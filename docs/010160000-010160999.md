# StackOverflow 问答 10160000-10160999

# java - 如何在 selectOne 中显示枚举中不存在的值？

> ID：10160000
> 
> 赞同：1
> 
> 时间：2012-04-15T06:18:53.097
> 
> 标签：java, jsf-2, enums, selectonemenu

在我的页面上，我有一个下拉列表，其值是根据枚举填充的，并且选择还设置了枚举的值。我现在需要在下拉列表中显示诸如“请选择一个值”之类的文本，而枚举中不存在该文本。

用户也可以不从下拉列表中选择任何值。

如果用户不选择值（用户这样做是合法的），如何在不修改枚举的情况下使用此附加文本填充 selectOne 并在托管 bean 中处理它。我尝试了各种组合，但对我没有任何效果。

这是我所做的工作，它是标准下拉列表，其中填充了不同的值枚举，只是一种标准方式。

这是这里的枚举

```
public enum Fruit {
    APPLE("Apple"), ORANGE("Orange");

    private String label;

    Fruit(String label) {
        this.label = label;
    }

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }   

} 
```

托管 Bean

```
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.model.SelectItem;

@ManagedBean
public class Simplebean {

    private Fruit selectedFruit;// How would this work if the value is not valid enum .
    private List<SelectItem>fruits = new ArrayList<SelectItem>();

    @PostConstruct
    public void init(){
        for (Fruit fruit : Fruit.values()){
            fruits.add(new SelectItem(fruit,fruit.getLabel()));// How to add a value not part of enum.
        }
    }

    public List<SelectItem> getFruits() {
        return fruits;
    }

    public void setFruits(List<SelectItem> fruits) {
        this.fruits = fruits;
    }

    public Fruit getSelectedFruit() {
        return selectedFruit;
    }

    public void setSelectedFruit(Fruit selectedFruit) {
        this.selectedFruit = selectedFruit;
    }

} 
```

在 XHTML 中

```
<h:selectOneMenu value="#{simplebean.selectedFruit}">
    <f:selectItems value="#{simplebean.fruits}" />
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:00:18.720

你可以像 Luggi 写的那样做，但是`noSelectionOption`在附加的`<f:selectItem>`. 作为建议 - 您不再需要`List<SelectItem>fruits`在支持 bean 上定义 selectItem List ，您可以这样做：

```
<h:selectOneMenu value="#{simplebean.selectedFruit}">
    <f:selectItem itemLabel="Select a value" noSelectionOption="true"/>
    <f:selectItems value="#{simplebean.fruits}" var="fruit" itemLabel="#{fruit.label}" itemValue="#{fruit}"/>
</h:selectOneMenu> 
```

和不带水果的backing bean selectItems：

```
@ManagedBean
public class Simplebean {

    private Fruit selectedFruit;

    public Fruit getSelectedFruit() {
        return selectedFruit;
    }

    public void setSelectedFruit(Fruit selectedFruit) {
        this.selectedFruit = selectedFruit;
    }

    public Fruit[] getFruits() {
        return Fruit.values();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:21:52.837

添加一个`f:selectItem`并定义项目标签和项目值：

```
<h:selectOneMenu value="#{simplebean.selectedFruit}">
    <f:selectItem  itemLabel="Select a value" />
    <f:selectItems value="#{simplebean.fruits}" />
</h:selectOneMenu> 
```

# javascript - 用jquery编写的函数不能正常工作

> ID：10160003
> 
> 赞同：0
> 
> 时间：2012-04-15T06:19:32.157
> 
> 标签：javascript, jquery, function

我有一个页面

```
<div id="aar">  
    <div id="stack0" class="stack">stack1</div>
    <div id="stack1" class="stack">stack1</div>
    <div id="stack2" class="stack">stack1</div>
</div> 
```

以下脚本在其中运行

```
$(document).ready(function(){
    $(".stack").click(function(){
       $("#aar").html($("#aar").html()+'ann');
    });
}); 
```

.stack click 函数只运行一次。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:25:14.597

这是因为您用新的 dom 替换了旧的 dom，而新的 dom 没有有限的单击事件处理程序。

您可以使用 .append 方法附加新内容。

```
$(document).ready(function(){
    $(".stack").click(function(){
        $("#aar").append(this.id);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:22:57.203

用户直播而不是点击：

```
$(document).ready(function(){
$(".stack").live('click', function(){
    $("#aar").html($("#aar").html()+$(this).attr("id"));
}); 
```

});​</p>

# class - vb6 类属性作为类的数组

> ID：10160004
> 
> 赞同：1
> 
> 时间：2012-04-15T06:20:17.163
> 
> 标签：class, vb6

很远，这个旧的 vb6 应用程序正在杀死我。在 .NET 之前，我是如何使用这些东西进行开发的。

我正在尝试创建一个 vb6 类，其属性成员是 UDT 或另一个类的数组。

例如

我有一个名为**Monitor**的类，它公开了一些属性：

*   解析度
*   回转
*   姓名
*   宽度
*   高度

在我的主程序模块中，我有一个名为 SystemConfig 的类，它有一个名为 MonitorConfig 的属性，但以前它只促进了一项。因为我们现在在多显示器的世界中运行，所以我需要这个属性来支持多个项目。

不幸的是 vb6 没有给我 List(Of T) 所以我需要下一个最好的东西。我的第一个想法是使用数组。

这是我的尝试：

```
Private m_MonitorConfig() As Monitor

Public Property Get MonitorConfig() As Monitor()
    MonitorConfig = m_MonitorConfig
End Property
Public Property Let MonitorConfig(val() As Monitor)
    m_MonitorConfig = val
End Property 
```

如何让属性识别进出 MonitorConfig 属性的数组值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:08:50.100

要么更改属性以接受“索引”参数，因此您可以在语法上将其视为“类似数组”，或者考虑使用集合而不是数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:11:06.343

您的代码还可以，但性能不是很好。如果您需要对监视器进行只读访问，但又不想实现完整的集合，那么一个简单的访问器属性和计数属性就足够了。

像这样的东西：

```
Option Explicit

Private Declare Function EmptyMonitorsArray Lib "oleaut32" Alias "SafeArrayCreateVector" (Optional ByVal vt As VbVarType = vbObject, Optional ByVal lLow As Long = 0, Optional ByVal lCount As Long = 0) As Monitor()

Private m_MonitorConfig() As Monitor

Property Get MonitorConfig(ByVal Index As Long) As Monitor
    Set MonitorConfig = m_MonitorConfig(Index)
End Property

Property Get MonitorConfigs() As Long
    MonitorConfigs = UBound(m_MonitorConfig) + 1
End Property

Private Sub Class_Initialize()
    m_MonitorConfig = EmptyMonitorsArray
End Sub 
```

# javascript - 强制停止java脚本执行功能

> ID：10160005
> 
> 赞同：1
> 
> 时间：2012-04-15T06:20:19.170
> 
> 标签：javascript, ajax, dojo

我有一个 dojo 树视图，当我单击一个节点时，一个 java 脚本会刷新一个网格。在单击节点后和刷新数据之前，我需要停止任何正在运行的 java 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:33:35.010

Javascript（在大多数情况下）是单线程的，因此当您获得点击事件时，该代码是唯一运行的东西。您的代码可能会被某些事件中断，这是您关心的问题吗？如果是这样，您可以在刷新之前取消这些事件的挂钩，然后如果您真的需要，然后将它们重新挂钩。如果没有看到一些代码，很难说最好的方法是什么。

# android - 调用分离后保存片段 UI 状态

> ID：10160006
> 
> 赞同：1
> 
> 时间：2012-04-15T06:20:42.637
> 
> 标签：android, user-interface, fragment, lifecycle

我正在使用 ActionBar 中的选项卡使用 UI。在选项卡之间切换时，我目前正在我的 Activity 中管理选项卡单击事件，并根据需要使用 FragmentManager 调用附加和分离。

每次附加片段时，我都会经历整个生命周期并创建一个新视图并重新加载我的所有数据。我在 onSaveInstanceState 和 onActivityCreated 中使用给定的 Bundle 来更新 gui 元素（主要是列表的滚动位置）。

这工作正常，但有很多开销。在我的情况下，列表可能有 300 条左右的记录，并且在选项卡之间切换时会有明显的延迟。

为了加快速度，我现在将 onCreateView 中的根视图保存为类变量。然后，当由于附加片段而再次调用 onCreateView 时，我会测试我的根视图的非空值并返回它而不是重新膨胀视图。这个保存的视图仍然有适当的数据集，在这种情况下我也绕过加载数据。当然，如果 Fragment 在后台被操作系统破坏，我仍然需要完全重建视图和数据。

我的问题是这是否是一种有效的方法？除非有内存问题需要担心，否则我认为它没有缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:13:18.287

这不是最好的方法，原因如下：

当您首先创建根视图时，所有视图都使用`Activity`' 上下文进行膨胀。如果 this`Activity`被破坏，然后您尝试将其重新附加`Fragment`到 this 的新实例`Activity`，您将遇到问题。

其次，当它不被使用时，有一个完全膨胀的根视图坐在那里是一种糟糕的内存使用。现在，您提到的记录没有存储在 any`View`中，而是您的列表视图引用了您创建的适配器，该适配器与您的视图一起保存在内存中。只是坐在那里就有很多数据。

现在要正确地给你推荐，你最终必须在内存使用和性能之间划清界限，记住如果你打算公开这个应用程序，有很多劣质的硬件设备。

一种选择是您已经完成的操作，即`savedInstanceState`在分离时使用该变量。您可以尝试将 300 条记录放入`Bundle`其中，看看效果如何。如果数据是您创建的类，请实现`Parcelable`接口（请参阅[文档](http://developer.android.com/reference/android/os/Parcelable.html)以了解如何正确实现它）并将其存储在 中`Bundle`，然后稍后检索它并创建新适配器。我强烈建议不要`View`在附件之间保留对 s 的引用。

# c# - 如何在不同的扬声器上播放声音？

> ID：10160009
> 
> 赞同：4
> 
> 时间：2012-04-15T06:21:31.313
> 
> 标签：c#, .net

我的设备有 2 个外部扬声器。我怎样才能分别测试它们？

1个只在左边播放声音的功能，一个只在右边播放声音的功能。

谷歌搜索没有成功。也许我使用了错误的术语。

也许使用 WIN32 API 设置平衡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T07:04:57.970

如果您正在谈论来自立体声扬声器系统设置的 2 个扬声器，那么您的解决方案很简单。

创建仅在左声道播放的声音，然后播放。然后，创建一个只在右声道播放的声音，播放它。

您可以使用 Audacity 来创建声音。

就 .NET API 而言，您可以通过[http://windowsmedianet.sourceforge.net/试试运气](http://windowsmedianet.sourceforge.net/)

您可能需要的是[http://msdn.microsoft.com/en-us/library/ms712636(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms712636(VS.85).aspx)，因为它们包装得很整齐。

编辑：

顺便说一句，您可以使用 waveOutOpen 两次打开同一设备，一次播放 LEFT 声音文件，并在两个单独的 waveOutOpen 设备句柄上独立播放 RIGHT 声音文件，它们都指向同一个物理设备。根据声音的类型，声音会在您选择的扬声器上按预期发出。

此外，如果您想以编程方式创建声音，则只有 LEFT 通道意味着音频文件中的所有其他 PCM 样本都应为 0。

我不建议使用 balance，因为混音器 API 很难理解，而且你会不小心为 BOTH 播放样本设置 API。

更多信息：

您可以使用[http://msdn.microsoft.com/en-us/library/system.media.soundplayer(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer(VS.80).aspx)播放 WAV 文件。如果您没有 WAV 文件但您想从 播放某些`MemoryStream`内容，请找到一种方法在音频样本数据的前面插入某种形式的 WAV 标头。你不会是第一个尝试它的人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:28:54.477

我不认为 .NET 本身有足够的控制权来做你所要求的。您可能必须使用 3rd 方库。看看[NAudio](http://naudio.codeplex.com/)，它肯定能做你想做的事。

# jsp - JSP 中的组播

> ID：10160011
> 
> 赞同：0
> 
> 时间：2012-04-15T06:21:52.113
> 
> 标签：jsp

我正在开发一个在 jsp 中具有密钥分发的 Web 应用程序。当新客户端到来时，服务器会更新会话密钥，并且必须将密钥多播给所有客户端。我不能用 servlet/jsp 做到这一点，并且在 servlet 中使用多播套接字也没有帮助。请建议我处理这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:48:53.897

我认为您可以参考 Camel 框架。您可以参考这些链接。他们谈论多播。

[Apache Camel http 到 http 路由（有可能吗？）](https://stackoverflow.com/questions/5646557/apache-camel-http-to-http-routing-is-it-possible)

[如何从 Camel servlet 组件路由到 http 组件？](https://stackoverflow.com/questions/7825623/how-to-route-from-camel-servlet-component-to-http-component)

希望这会帮助你。

# ios - 以编程方式从iOS系统上的进程pid获取其他应用程序的目录路径？

> ID：10160013
> 
> 赞同：3
> 
> 时间：2012-04-15T06:21:57.740
> 
> 标签：ios, process

如何从进程pid中获取其他应用程序的目录路径？</p>

似乎 iOS 上没有 proc_pidpath 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:42:07.577

以下适用于 iOS 并使用`sysctl`App Store 中使用的 Activity Monitor Touch 等应用程序，因此 Apple 应该可以接受。但是，一旦获得了路径，您打算如何处理它可能不会被 Apple 接受。如果您不打算将您的应用程序提交到 App Store，那么这可能不是问题。

```
- (NSString *)pathFromProcessID:(NSUInteger)pid {

    // First ask the system how big a buffer we should allocate
    int mib[3] = {CTL_KERN, KERN_ARGMAX, 0};

    size_t argmaxsize = sizeof(size_t);
    size_t size;

    int ret = sysctl(mib, 2, &size, &argmaxsize, NULL, 0);

    if (ret != 0) {
        NSLog(@"Error '%s' (%d) getting KERN_ARGMAX", strerror(errno), errno);            

        return nil;
    }

    // Then we can get the path information we actually want
    mib[1] = KERN_PROCARGS2;
    mib[2] = (int)pid;

    char *procargv = malloc(size);

    ret = sysctl(mib, 3, procargv, &size, NULL, 0);

    if (ret != 0) {
        NSLog(@"Error '%s' (%d) for pid %d", strerror(errno), errno, pid);            

        free(procargv);

        return nil;
    }

    // procargv is actually a data structure.  
    // The path is at procargv + sizeof(int)        
    NSString *path = [NSString stringWithCString:(procargv + sizeof(int))
                                        encoding:NSASCIIStringEncoding];

    free(procargv);

    return(path);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:39:01.030

iOS 上的东西比这更受限制。如果您希望在应用程序之间共享文件，请考虑使用 iCloud - 它允许您跨不同平台甚至不同应用程序访问文件，因为应用程序所属的开发人员 ID 是相同的。Ray Wenderlich 写了一个[有用的教程](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)。祝你好运！

# javascript - 将 id 属性分配给 li 不起作用

> ID：10160014
> 
> 赞同：3
> 
> 时间：2012-04-15T06:22:04.090
> 
> 标签：javascript, jquery, html

我的页面上有两个 UL。UL1 和 UL2。两者都是可排序和可拖动的。当来自 UL1 的 LI 添加到 UL2 时，LI 移出 UL1。为了从 UL2 中删除，用户单击 LI 内的删除链接。逻辑是删除该项目，并将其从 UL2 添加回 UL1。

这是我的代码：

```
$(".xOut").on("click", function(){
        var id = $(this).attr('id');
        $.ajax({

            url: '@Url.Action("RemoveCommand")',
            type: "POST",
            data: {
                aid: id,
                bId: @(Model.Id)
            },
            success: function(event, ui){
                var newListItem = $("<li />", {
                    html: $("#"+id).html()
                });

                $(newListItem).attr("id", id);

                newListItem.appendTo("#sortable1");
                $("#"+id).remove();
            }
        });
    }); 
```

**如果我不添加此行，代码可以正常工作：**

```
$(newListItem).attr("id", id); 
```

我需要新项目有一个 id，没有它就无法工作。

如何使这项工作？

更新添加的 HTML 代码：

```
<ul id="sortable1" class='droptrue'>
 @for (var i = 0; i < Model.SomeList.Count(); i++)
 {
     var item = @Model.SomeList.ElementAtOrDefault(i);
     if (item != null)
     { 
        <li id="@(item.Id)">
           <div>@item.Name</div>
       </li>
     }
 }
</ul>

<ul id="sortable2" class='droptrue'>
     @for (var i = 0; i < Model.SomeAssignedList.Count(); i++)
     {
         var item = @Model.SomeAssignedList.ElementAtOrDefault(i);
         if (item != null)
         { 
            <li id="@(item.Id)">
           <div>@item.Name</div>
           </li>
         }
     }
    </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:54:30.680

无需创建新项目并删除旧项目，只需移动它：

```
$(".xOut").on("click", function(){
  var id = $(this).attr('id');
  $.ajax({
    url: '@Url.Action("RemoveCommand")',
    type: "POST",
    data: {
      aid: id,
      bId: @(Model.Id)
    },
    success: function(event, ui){
      $("#sortable1").append($("#"+id));
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:32:16.023

我不确定为什么这涉及 ajax 调用，但无论如何 - 为什么不删除旧项目*，然后*再添加具有**相同 id**的新项目？

# validation - ASP.NET 中的必填字段验证器

> ID：10160018
> 
> 赞同：0
> 
> 时间：2012-04-15T06:23:11.033
> 
> 标签：validation, field, required

我有 AJAX 选项卡容器，其中包含三个选项卡，在第三个选项卡中，我有一个按钮，它会导致验证。当我点击它时，我将获得一个验证摘要，并且所需的字段将显示为“ *”（星号）。现在，如果我想查看所有必填字段并移至第一个选项卡，单击按钮后，我无法查看“* ”（星号）标记，因为选项卡上的页面重新加载更改。

请建议伙计们，即使我更改标签，我该怎么做才能显示所需的字段验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:25:07.897

似乎您在每次选项卡更改时都有 OnTabChange 事件，这意味着每次更改选项卡时都会发生回发...但是确保在选项卡更改时验证字段的一种方法是调用`Page.Validate()`您的选项卡更改事件...这将确保在更改选项卡时调用页面上的所有验证控件以运行它们各自的验证...

但是，我只是好奇为什么您在每次选项卡更改时都有回发内容......但这是一种快速肮脏的方式。

# python - python中的merge_sort

> ID：10160024
> 
> 赞同：2
> 
> 时间：2012-04-15T06:25:41.747
> 
> 标签：python, mergesort

我是 python 新手，正在尝试在 Python 中实现 merge_sort，这是我的代码。但它进入无限循环。谁能指出为什么？谢谢

```
def merge_sort(a):
    '''implement merge sort for array'''
    l = len(a)
    if l == 1:
        return a[0]
    a1 = merge_sort(a[:l/2-1])
    a2 = merge_sort(a[l/2:-1])
    a_sort = []
    idx1, idx2 = 0, 0
    #for i in range(l):
    if idx1 == len(a1):
        a_sort.append(a2[idx2:])
        import ipdb; ipdb.set_trace()
        return a_sort
    elif idx2 == len(a2):
        a_sort.append(a1[idx1:])
        return a_sort
    else:      
        if a1[idx1] >= a2[idx2]:
            a_sort.append(a2[idx2])
            idx2 += 1
        else:
            a_sort.append(a1[idx1])
            idx1 += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:37:28.980

问题是当您的递归下降到一个空列表（即`l == 0`）时，您在返回任何内容之前调用`merge_sort([])`了两次。您需要添加一个检查`if l == 0: return []`.

另外，您的检查`if l == 1: return a[0]`有点错误；`merge_sort`应该总是返回一个列表，而这会返回一个列表元素（数字或字符串或其他）。所以它可能应该只是

```
if l <= 1:
    return a 
```

另外，您`a2`实际上不包括数组的最后一个元素：您想要`a[l/2:]`，而不是`a[l/2:-1]`. （请记住，Python 中的范围**不**包括最后一个元素。）

这不会影响代码的正确性，但您应该使用`l // 2`to 表示整数除法；在 Python3 中，或者如果你这样做，如果是奇数`from __future__ import division`，`l/2`将是一个浮点数。`l`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:04:47.580

谢谢！工作代码如下

```
def merge_sort(a):
'''implement merge sort for array'''
l = len(a)
if l == 1:
    return a
a1 = merge_sort(a[:l//2])
a2 = merge_sort(a[l//2:])
a_sort = []
idx1, idx2 = 0, 0
while idx1 < len(a1) and idx2 < len(a2):
    if a1[idx1] >= a2[idx2]:
        a_sort.append(a2[idx2])
        idx2 += 1
    else:
        a_sort.append(a1[idx1])
        idx1 += 1
if idx1 < len(a1):
    a_sort.extend(a1[idx1:])
else:
    a_sort.extend(a2[idx2:])
return a_sort 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:37:06.013

正如 Dougal 和 Andrei 所指出的，无限循环是由未经检查的边缘条件引起的。`if l == 1:`用/替换行`if l < 2:`。
代码中还有其他问题：

*   `a`list by position的左部和右部`l/2`是对应的`a[:l/2]`和`a[l/2:]`。不需要减1。只要认为一个位置在两个项目之间。
*   在and分支中使用`.extend()`而不是`append()``if``elif`
*   不要忘记将注释掉的 forloop 取回。
*   终于没有`return`了

而且通常`while`结构更方便

```
while idx1 < len(a1) and idx2 < len(a2):
    'code in your else branch'    
if idx1 < len(a1):
    a_sort.extend(a1[idx1:])
else:
    a_sort.extend(a2[idx2:])
return a_sort 
```

# magento - 即使在用户登录后出现 Magento jscript 登录窗口

> ID：10160025
> 
> 赞同：2
> 
> 时间：2012-04-15T06:25:50.650
> 
> 标签：magento

我正在为我的 magento 商店使用 jscript 登录。问题是即使在登录后也会出现登录窗口......我在我的主页模板正文标签中使用了 onload="showSmartLoginDialog(); 。请指导我实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:21:18.837

在模板中的正文标记周围使用条件代码。试试这个而不是`<body>`：

```
<?php
    if (Mage::getSingleton('customer/session')->isLoggedIn()) { 
        echo '<body>';
    } else {
        echo '<body onLoad="showSmartLoginDialog()">';
    }
?> 
```

# jquery - 根据 body 中的类更改 div 类

> ID：10160026
> 
> 赞同：0
> 
> 时间：2012-04-15T06:25:56.583
> 
> 标签：jquery, class, drupal

我正在使用 Drupal Omega HTML5 starterkit 主题并试图删除一个块部分，然后使内容区域扩展以填充额外的空间。

当我首先在 Omega 中查看 HTML 输出时，我发现了两件事，它使用 'grid-($)' 来确定 div 区域的大小。

其次，活动布局类型被列为主体类之一，并根据当时处于活动状态的类型而变化，例如我试图定位的类型是 .responsive-layout-narrow。

我对 JQuery 比较陌生，但作为起点，我尝试编写以下脚本

```
$(document).ready(function(){
    $("body").hasClass("responsive-layout-narrow"){
        $('#region-content').removeClass('grid-6').addClass('grid-8');
    }
} 
```

到目前为止，我根本无法让它工作，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:35:29.467

你需要一个`if`语句，因为`hasClass()`返回一个布尔值：

```
if ($('body').hasClass('responsive-layout-narrow')) {
    $('#region-content').removeClass('grid-6').addClass('grid-8');
} 
```

您还可以使用`is()`较短的：

```
if ($('body').is('.responsive-layout-narrow')) { // Notice the `.`
    $('#region-content').removeClass('grid-6').addClass('grid-8');
} 
```

另外，要小心混用单引号和双引号，这是一个危险的习惯。

# html - 在 Coldfusion 页面上使用 !DOCTYPE html - IE9 渲染

> ID：10160029
> 
> 赞同：1
> 
> 时间：2012-04-15T06:27:48.230
> 
> 标签：html, internet-explorer, coldfusion, internet-explorer-9, doctype

让 ie9 以标准模式而不是怪癖呈现 < !DOCTYPE html > .cfm 页面的最佳方法是什么？

我有这个问题已经有一段时间了，而且很可疑，只在冷融合网站上！我刚刚有了将文件扩展名更改为 .html 和 BAM 的“好主意”！页面在标准模式下完美呈现。

不用说，这是我不必在测试环境中开发的第一个页面集合，因为它们使用的只是 html5、css、jquery/javascript，这让我产生了将文件扩展名更改为 html 的想法。

谁能分享他们如何解决这个问题（不更改文件扩展名）？我会非常感激你！

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T10:28:23.600

确保为页面设置正确的[内容类型](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c82.html)：

```
<cfcontent type="text/html; charset=utf-8"> 
```

还要检查 ColdFusion 是否在`DOCTYPE`声明之前没有放置任何内容。

最后，请注意，在许多情况下，即使[您做对了所有事情](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)，IE 也会默认以怪癖模式呈现 Intranet 页面。

# netbeans - netbeans 注释标记

> ID：10160035
> 
> 赞同：0
> 
> 时间：2012-04-15T06:28:46.247
> 
> 标签：netbeans, autocomplete, comments

我想知道是否可以编辑 NetBeans 自动完成注释标记的方式。

想改变：

```
/*
 * comment
 */ 
```

到：

```
/*
* comment
*/ 
```

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:13:48.290

真的不可能完全按照您的意愿行事。我发现的最好的事情是：

> 工具 -> 选项 -> 编辑器
> 
> 选择**Java**和**注释**

然后解开`Add Leading Star`

现在，当您键入 : 时`/**`，它将扩展为：

```
/**

*/ 
```

这是您想要的对齐方式，但您必须自己设置`*`，它们不再自动添加，但是当您输入 Enter 时光标将对齐。

# java - 从 GWT 项目向非 GWT 项目添加依赖项

> ID：10160039
> 
> 赞同：0
> 
> 时间：2012-04-15T06:29:41.160
> 
> 标签：java, gwt, maven

我正在使用 Maven GWT。当我单独运行该项目时，该项目运行正常。但是当我尝试向非 GWT 项目（一个简单的 java 项目）添加依赖项时，在执行 Maven 包时出现以下错误。

在项目源或资源中找不到 GWT 模块 My.Package.MyModule。

当然，我在非 GWT 项目中添加了 MyModule.gwt.xml，并在 pom 文件中从我的 GWT 项目中继承了该模块。

我试图用谷歌搜索答案，但最终一无所获..

我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:22:47.787

实际上，当您使用 Maven 反应器结构时，这是一个常见问题。在非gwt项目中添加gwt.xml文件并在gwt项目中继承后，还需要编辑非gwt项目和父maven项目的pom文件。

Mojo Codehaus 有详细的说明可以帮助您解决问题：http: [//mojo.codehaus.org/gwt-maven-plugin/user-guide/multiproject.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/multiproject.html)

# sql - 如何使用 T-SQL 查询在 Active Directory 中获得大约 1000 条记录限制？

> ID：10160049
> 
> 赞同：4
> 
> 时间：2012-04-15T06:31:42.373
> 
> 标签：sql, sql-server, tsql, active-directory, active-directory-group

如果我将光标限制在几个组中，下面的代码可以完美运行*，但如果我让它针对我们的整个域运行，我会在 AD 中遇到 1000 条记录限制。关于如何获得此分页的任何想法？

*完美，因为它应该只返回有限数量的记录，其数量低于 1000 条记录限制。

```
CREATE TABLE #MemberOfGroups
(
    groupName   VARCHAR (400),
    cn          VARCHAR (400),
    displayName VARCHAR (400)
);

SET NOCOUNT ON;

DECLARE @t AS VARCHAR (100), 
@t2 AS VARCHAR (1000), 
@ot AS VARCHAR (4000), 
@tt AS VARCHAR (4000);

DECLARE gC CURSOR
    FOR SELECT cn,
               distinguishedName
        FROM   OPENQUERY (ADSI, 'SELECT cn, distinguishedName
     FROM ''LDAP://DC=coal,DC=local''
     WHERE objectCategory = ''group''');

OPEN gC;

FETCH NEXT FROM gC INTO @t, @t2;

WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @ot = '''SELECT cn, displayName
     FROM ''''LDAP://DC=coal,DC=local''''
     WHERE objectCategory = ''''Person'''' AND objectClass = ''''user''''
     AND memberOf=''''' + @t2 + '''''';
        SET @tt = 'select ' + '''' + @t + '''' + ' As GroupName, cn, displayName from openquery(ADSI,' + @ot + ''') order by cn';
        INSERT INTO #MemberOfGroups (groupName, cn, displayName)
        EXECUTE (@tt);
        --print @tt
        FETCH NEXT FROM gC INTO @t, @t2;
    END

CLOSE gC;

DEALLOCATE gC; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T07:36:42.000

SQL Server ADO 对 Active Directory 的查询**非常有限**，并且不提供完整 AD 接口的所有功能。

根据 Active Directory MVP [Richard Mueller 在他的网站上的](http://www.rlmueller.net/SQLDistributedQuery.htm)说法，从搜索返回的 1000-1500 个对象的限制**不能**在 SQL Server AD 搜索中规避或修复：

> *您应该注意两个限制。首先，OPENQUERY 语句不支持多值属性。您无法检索多值属性的值，例如 memberOf。**其次，可以检索的记录总数限制为 1500 条**（Windows 2000 Active Directory 中为 1000 条）。**SQL 分布式查询不支持分页**，因此无法克服此限制，除非修改 maxPageSize 的 Active Directory 服务器限制。*

因此，恐怕您无法直接从 SQL Server 执行此操作 - 您必须找到另一种方法来实现此目的。

# c - 在 Linux 和 pthreads 中，wait() 不会阻塞

> ID：10160050
> 
> 赞同：0
> 
> 时间：2012-04-15T06:31:59.437
> 
> 标签：c, linux, pthreads

我在 Linux 上有一个相对简单的 pthread 程序。为此，我将它剥离成一小块，贴在最后。

wait(2) 的所有手册页都说 wait() 将阻塞，除非使用 WNOHANG（甚至不能为 wait() 指定）。查看 truss 输出，它只是不停地重复：

```
5460  wait4(-1, 0x7f8ee479fea8, 0, NULL) = -1 ECHILD (No child processes) 
```

再次查看 wait4(2) 的手册页，它说返回结果与 waitpid() 的返回结果相同，除非存在 WNOHANG，否则 waitpid 应该阻塞，并且 truss 显示调用是在选项为 0 的情况下进行的。

供参考，这是：

*   2.6.32-300.3.1.el6uek.x86_64
*   glibc-2.12-1.47.el6_2.9.x86_64
*   gcc-4.4.6-3.el6.x86_64
*   编译：gcc -pthread -lpthread -o ptw -Wall ptw.c

--

```
#include <pthread.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/wait.h>

static pthread_mutex_t _lock = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t  _sem = PTHREAD_COND_INITIALIZER;

static void* waiter(void*);

int main(int argc, char ** argv) {

    pthread_t thr;

    if (pthread_create(&thr, 0, waiter, 0)) {
        perror("pthread_create");
        return 1;
    }

    pthread_mutex_lock(&_lock);
    pthread_cond_wait(&_sem, &_lock);

    return 0;

}

void* waiter(void* arg) {

    while (1) {
        int status;
        int p = wait(&status);
        if (p<0) {
            perror("wait");
            // fprintf(stderr, "wait returned without exited child\n");
        }
    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:35:59.513

`wait()`如果没有要等待的子进程，也将立即返回，值`-1`并`errno`设置为`ECHILD`（这是您`strace`向您展示的内容）。在不存在子进程的情况下，您希望它做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:35:52.133

该`wait()`呼叫按记录工作。您遇到的是[此处](http://www.kernel.org/doc/man-pages/online/pages/man2/wait.2.html)`ERRORS`部分中描述的错误情况：

> ```
>  ECHILD (for wait()) The calling process does not have any unwaited-for
>           children.
> 
>    ECHILD (for waitpid() or waitid()) The process specified by pid (waitpid()) or
>           idtype and id (waitid()) does not exist or is not a child of the
>           calling process.  (This can happen for one's own child if the action
>           for SIGCHLD is set to SIG_IGN.  See also the Linux Notes section about
>           threads.)
> 
>    EINTR  WNOHANG was not set and an unblocked signal or a SIGCHLD was caught;
>           see signal(7).
> 
>    EINVAL The options argument was invalid. 
> ```

因此它不会阻塞，因为阻止错误是没有意义的。

# javascript - 如何使用 getElementsByClassName？

> ID：10160051
> 
> 赞同：0
> 
> 时间：2012-04-15T06:32:11.113
> 
> 标签：javascript

嘿伙计们，我在使用 getElementByClassName 时遇到错误。我的意图是，我想通过从下拉列表中选择一个选项来更改多个 TEXT 的颜色，其中每个选项都有不同的颜色。

在这里，我为所有文本分配了一个 className。

这是我的代码。

```
<html>
   <head>
      <script type="text/javascript">
         function copyText(selectedElement) {
            var className = document.getElementsByClassName("incomeTypeSalary");
            for (i = 0; i < className.length; i++)

            {
               className[i].style.color = selectedElement.options[selectedElement.selectedIndex].style.color;
            }

         }
      </script>
   </head>

   <body>
      <div style="width:600px;border:1px solid black;float:left">
         <select width="200px" id="selectedElement" onclick="copyText(selectedElement)">
            <option style="color:red">Theta Saving Plan</option>
            <option style="color:green">Roth Plan</option>
            <option style="color:yellow">IRG Plan</option>
            <option style="color:PINK">II Plan</option>
         </select>
      </div>
      <div style="width:300px;border:1px solid black;float:left">
         <span style="padding-top:30px;font-size:24px;font-family:arial:" class="incomeTypeSalary">Contribution</span>
         <table style="padding-top:24px">
            <tr>
               <td>
                  <span class="incomeTypeSalary">Annual Salary</span>
               </td>
               <td>
                  <input type="text" style="width:81px; direction:rtl;">
               </td>
            </tr>
            <tr>
               <td>
                  <span class="incomeTypeSalary2">Annual Coomission</span>
               </td>
               <td>
                  <input type="text" style="width:81px; direction:rtl;">
               </td>
            </tr>
            <tr>
               <td>
                  <span class="incomeTypeSalary3">Annual Bonus</span>
               </td>
               <td>
                  <input type="text" style="width:81px; direction:rtl;">
               </td>
            </tr>
         </table>
      </div>
   </body>
</html> 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:44:46.423

更改`onclick`为`onchange`

[http://jsfiddle.net/wQWdg/](http://jsfiddle.net/wQWdg/)

* * *

这适用于所有浏览器

```
function getElementsByClassName(className) {
    if (document.getElementsByClassName) {
        return document.getElementsByClassName(className);
    }
    else {
        return document.querySelectorAll('.' + className);
    }
}​ 
```

# iphone - CoreText 为每个段落的 las 行增加了额外的空间

> ID：10160053
> 
> 赞同：0
> 
> 时间：2012-04-15T06:32:26.887
> 
> 标签：iphone, ios, ipad, core-text, nsattributedstring

我正在显示这个字符串（注意中断）：

```
CONSEJO
NACIONAL
PARA LA
CULTURA
Y LAS ARTES 
```

[我已经使用苹果在此处](https://developer.apple.com/library/archive/#qa/qa1698/_index.html)建议的代码将 NSAttributedString 配置为将行高常量设置为 26 点：

```
CGFloat lineSpacing = 26;
CTTextAlignment theAlignment = kCTLeftTextAlignment;

CTParagraphStyleSetting theSettings[3] = 
{
    {kCTParagraphStyleSpecifierMaximumLineHeight, sizeof(CGFloat), &lineSpacing},
    {kCTParagraphStyleSpecifierMinimumLineHeight, sizeof(CGFloat), &lineSpacing},
    {kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &theAlignment },
}; 
```

但是最后一行有额外的空间：

![](../Images/384f38b295d06144e5dc1be45dcf7979.png)

如果我在单词之间手动添加空格，我会得到预期的结果，所以在打印时：

```
CONSEJO            NACIONAL                    PARA LA                                                                CULTURA                                                         Y LAS ARTES 
```

它显示了这一点（注意最后一行没有额外的间距）：

![](../Images/384f38b295d06144e5dc1be45dcf7979.png)

这不是一个可持续的解决方案，因为我不想手动更改所有字符串以根据帧大小添加空格。

我已经测试了几个月，但我无法解决这个问题，最后一行总是有更多空间。

我还尝试了“\r”，看看这是否得到了不同的结果，但它仍然增加了额外的空间，显示：

```
Consejo\rNacional\rpara la\rCultura\ry las Artes 
```

出品：

[左使用 \r] [右使用空格]

[![](../Images/53bb6b47a9e168027416adc0648e5ff3.png)](https://i.stack.imgur.com/8JhYl.png)

[这里所有的蓝色块都一样大]

[![](../Images/8800245b0b05057242ee4dbbcea07a3f.png)](https://i.stack.imgur.com/iwDIF.png)

所以空间变少了，但仍然超出了应有的空间。

CoreText 应该能够处理这样的简单字符串。

添加空格还不够好（有几个原因），必须有一种方法来控制它。

你认为问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T04:18:36.563

我看不到图像，但我想你遇到了我不久前刚刚遇到的同样问题，看[这个](https://stackoverflow.com/questions/9858879/space-between-the-last-2-lines-of-a-paragraph-is-larger)。

您可以使用`CTTypesetter`and`CTTypesetterSuggestClusterBreak`手动处理换行符。我使用字体大小作为线条的高度，我在手动绘制线条时添加了线条间距，并且效果很好。

# python - 删除列表中的元组

> ID：10160055
> 
> 赞同：0
> 
> 时间：2012-04-15T06:32:58.047
> 
> 标签：python

我有这些清单：

```
sqvaluelist = []
valuelist = [(10.5,), (20.5,), (21.5,), (70.0,), (34.5,)] 
```

我想将此代码应用于值列表：

```
for value in valuelist:
    valuesquared = value*value
    sqvaluelist.append(valuesquared,) 
```

但我收到了这个错误：

```
TypeError：不能将序列乘以“元组”类型的非整数

```

我想我知道这个错误背后的原因，因为每个值都在一个单独的元组中。

我的问题是，有什么方法可以将这些值从它们各自的元组中取出，然后将它们变成一个列表，例如

```
valuelist = [10.5, 20.5, 21.5, 70.0, 34.5] 
```

无需手动编辑现有列表的结构以便可以执行 for 循环？

编辑：我道歉！它们实际上是元组！在每个值后添加逗号。对不起！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T07:01:58.277

那么就

```
import itertools
list(itertools.chain(*valuelist)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T07:03:41.557

做

```
valuelist = [(10.5,), (20.5,), (21.5,), (70.0,), (34.5,)] 
```

进入

```
valuelist = [10.5, 20.5, 21.5, 70.0, 34.5] 
```

我会使用列表理解

```
valuelist = [x[0] for x in valuelist] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T06:41:22.660

```
valuelist = [(10.5), (20.5), (21.5), (70.0), (34.5)] 
```

是一个整数列表：

```
>>> [(10.5), (20.5), (21.5), (70.0), (34.5)]
[10.5, 20.5, 21.5, 70.0, 34.5] 
```

`(10.5)`是一个整数。`(10.5,)`是一个整数的元组。

所以：

```
>>> sqvaluelist = [x*x for x in valuelist]
>>> sqvaluelist
[110.25, 420.25, 462.25, 4900.0, 1190.25] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T06:53:05.557

只需访问每个元组的第一个元素：

```
>>> valuelist = [(10.5,), (20.5,), (21.5,), (70.0,), (34.5,)]
>>> sqvaluelist = [x[0]*x[0] for x in valuelist]
>>> sqvaluelist
[110.25, 420.25, 462.25, 4900.0, 1190.25] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T06:35:14.093

是的，您可以在一个班轮中非常轻松地做到这一点：

```
map(lambda x: x, valuelist) 
```

这是有效的，因为正如@eumiro 所指出的， (10.5) 实际上是一个浮点数而不是一个元组。元组将是 (10.5,)。

要计算平方很容易：

```
map(lambda x: x*x, valuelist) 
```

如果你有一个像 (10.5,) 这样的真实元组列表，你可以像这样修改它：

```
map(lambda x: x[0], valuelist)
map(lambda x: x[0]*x[0], valuelist) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-03T07:56:14.770

以pythonic方式进行：

> > > sqvaluelist = [v[0]**2 for v in valuelist]

# php - 当用户从 Paypal 请求退款时如何通过 IPN 检测

> ID：10160060
> 
> 赞同：1
> 
> 时间：2012-04-15T06:34:16.263
> 
> 标签：php, paypal, detect, paypal-ipn

我编写了一个网站 (PHP)，允许用户通过 Paypal 添加资金。我使用 IPN 获取结果并将数据插入数据库。这一步没问题。

但是我想知道用户是否登录到 Paypal 并退款，我不知道如何检测该操作发生。是否有任何方法通过 IPN 从 Paypal 返回，在退款时提醒我？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:48:35.543

请参阅[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNReference#id091EB04C0HS](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNReference#id091EB04C0HS)

在付款信息变量下，请参阅 mc_fee 和 mc_gross 的说明：

**mc_fee**：与付款相关的交易费用。mc_gross 减去 mc_fee 等于存入 receiver_email 帐户的金额。相当于美元付款的 payment_fee。如果此金额为负数，则表示退款或撤销，并且这些付款状态中的任何一种都可以是原始交易费用的全部或部分金额。

**mc_gross** : 客户付款的全额，扣除交易费用。相当于美元付款的 payment_gross。如果此金额为负数，则表示退款或撤销，并且这些付款状态中的任何一种都可以是原始交易的全部或部分金额。

payment_fee 等也是如此。只需使用该*IPN 变量参考*页面并搜索“退款”以查看您想在自己的代码中评估哪些变量。

# iis - IIS 7.5 自定义错误和 URL 重写

> ID：10160062
> 
> 赞同：1
> 
> 时间：2012-04-15T06:34:42.803
> 
> 标签：iis, iis-7, asp-classic, url-rewriting

我在 IIS 中查看这两个选项，以尝试完成查询字符串的组合，使其看起来像文件目录。像这样：

`/search/`

`/search/janice`

`/search/janice/cooper`

而原始 URL 类似于`/search?fname=janice&lname=cooper`

我尝试了 URL Rewrite 方法，但它不允许可选字段（用于查询字符串）

我尝试了自定义 404 错误，它得到了原始脚本的 REFERER，但是脚本本身不能通过 URL 访问，只能被引用，所以这也不起作用..

有没有人对如何完成这样的事情有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:50:55.120

这是实现它的一种方法：[URL Rewriting in classic ASP](http://asp.johnavis.com/blog/default.asp?id=19)

实现查询字符串连接以最终成为 URL 路由的最佳方法是将项目升级为 ASP.Net 并使用[ASP.NET Routing](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。

如果您正在升级中，并且希望能够轻松切换而不会损坏链接并且在链接更改时丢失谷歌排名，请使用[Helicon ISAPI Rewrite](http://www.isapirewrite.com/)

# css - 当父级是相对时，绝对定位元素的宽度受到限制

> ID：10160063
> 
> 赞同：2
> 
> 时间：2012-04-15T06:34:47.553
> 
> 标签：css, width, suckerfish

我有一段 CSS 实现了一个点击吸盘菜单。

标记：

```
<table>
<tr>
<td>
<div class="bodywrapper">
<a class="button" href="#">
   <ul class="menu">
      <li>test test test</li>
      <li>test test test test test test test test test test test test test test test</li>
   </ul>
</a>
</div>
</td>
</tr>
</table> 
```

款式：

```
td{
   width: 80px;
}

.button{
  position: relative;
  display: inline-block;
  background-color: red;
  width: 10px;
  height: 27px;

}

.button:focus .menu, .button:active .menu{
  display: block;
}

.menu{
  display: none;
  position: absolute;
  min-width: 99px;
  max-width: 700px;
  width: auto;
  border: 1px black solid;
  margin-top: 27px;
} 
```

* * *

更新，上面实际上包含在一个固定的表格单元格中

还有一个小提琴：http: [//jsfiddle.net/dAAXp/3/](http://jsfiddle.net/dAAXp/3/)

问题：我希望在整个应用程序中使用这种样式定义。因此，文本中的长度`<li>`会有所不同。但是，我想要的行为是菜单具有最小和最大宽度。我已经使用`min-width`and `max-width`for设置了这个`.menu`。但是由于某种原因，即使 中的内容`<li>`小于`max-width`，菜单的宽度也被限制为`min-width`。

有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:51:23.733

编辑：请参阅底部以获取问题更改的答案（解决方案完全相同）

原因是 A 是 UL 可以扩展到的第一个可定位（相对）块。因为锚点被限制为 10px，所以包含的 UL 只能根据该锚点框尺寸进行填充。

您需要做的是从锚点中删除位置：相对，添加另一个“不可见”容器并设置其相对位置，然后您的 UL 可以扩展到该元素的大小限制。看到[这个小提琴的固定版本](http://jsfiddle.net/dAAXp/)

在“英语”中，这就是你的 CSS 所说的：

UL：哦，好吧，所以我的宽度是第一个父级的 100%（因为你没有设置宽度），标记为相对...正确，所以我上方的锚被标记为相对，所以我的 100% 宽度是 10px...但是等一下我的分钟-width 是 99px，所以我会尊重这一点。

更新：

请参阅[将包装器移到桌子外的小提琴](http://jsfiddle.net/dAAXp/5/)

逻辑与第一个完全相同 - 您可以在表格上设置相对位置，因为它的容器只要其宽度为 100% 或大于包含的子项所需的最小/最大宽度。

附带说明一下，一旦您到达不能使父宽度大于所需宽度的地步，您将不得不开始查看绝对定位并将元素从父元素中分离出来（但我现在将保留它）

对于你们之间的语义：

我添加了 div 包装器-您可以轻松将此行为应用于任何父级（即 table/tr/td，只要它比您需要的最小-最大宽度 @phpdev 宽，但如果您再次到达您的父级位置只是不够宽，那么你可能不得不打破语义

# mysql - 在实时服务器上更改 MYSQL 数据库表

> ID：10160074
> 
> 赞同：2
> 
> 时间：2012-04-15T06:36:10.650
> 
> 标签：mysql, database

嗨，我们有一个数据库，其中每秒在要添加新列的特定表上读取和写入 3 到 4 条记录。该表有超过 60000 条记录。我需要为此添加一个新列。MySQL>ALTER TABLE 表名添加列名 int(1);

完成这项工作最安全的方法是什么。是否可以在不停止 MYSQL 服务器的情况下添加这个新列，并且在更新过程中不会丢失新记录，因为我认为这需要很长时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T06:46:46.003

MySQL 文档 (http://dev.mysql.com/doc/refman/5.1/en/alter-table.html) 提供了以下信息：

*“在大多数情况下，ALTER TABLE 会制作原始表的临时副本。MySQL 等待正在修改表的其他操作，然后继续。它将更改合并到副本中，删除原始表，并重命名新表。而ALTER TABLE 正在执行，原始表可以被其他会话读取。**在 ALTER TABLE 操作开始之后开始的对表的更新和写入会停止，直到新表准备好，然后自动重定向到新表，没有任何失败的更新。**临时表是在新表的数据库目录中创建的。”*

根据文档，不应该有任何数据丢失。但与往常一样，在对实时系统进行任何更改之前，请在测试机器上检查相同的场景。

# rsync - 使用 rsync 来“完成”目标

> ID：10160078
> 
> 赞同：0
> 
> 时间：2012-04-15T06:37:57.163
> 
> 标签：rsync

我`rsync`用来将文件夹/文件从我的笔记本电脑（源）复制到我的桌面（目标）。我希望在桌面中创建的文件保持不变，但只在使用笔记本电脑创建的文件上进行复制/更新/删除。

该`--delete`选项删除不在桌面（目标）上的文件。

是否可以通过 rsync 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:58:00.287

因此，您只需 rsync 一个文件夹，该文件夹会在您更新这些文件时更新？

```
 rsync options source destination 
```

如果从笔记本电脑运行

```
rsync -avz /stuff/ user@desktop ip:/home/laptop/stuff/ 
```

或者如果从桌面运行

```
rsync -avz username@latopip /stuff/ /home/laptop/stuff/ 
```

# c++ - 如何找到最近的下一个/上一个双精度值（numeric_limits::epsilon 对于给定的数字）

> ID：10160079
> 
> 赞同：20
> 
> 时间：2012-04-15T06:38:17.440
> 
> 标签：c++, floating-point, double

标题非常不言自明，输入被赋予双倍值，我想加/减尽可能少的数量。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-15T07:13:23.433

您可以使用`nextafter`，如果您的编译器实现了 C99 的数学函数（即 C++11 及更高版本），则可用。这个函数（及其各种重载）可以描述为：

```
double nextafter(double value, double target); 
```

它将以尽可能小的量从`value` **的方向移动（通常通过调整浮点数的位表示）。** `target`如果`value`已经在`target`，则什么也不做。

如果`target`大于`value`这将增加`value`最小的可能量。如果`target`小`value`于此值，将减少`value`可能的最小量。

常见的用法是传递`DBL_MAX`或`INFINITY`作为目标以增加最小数量（或否定它们以减少最小数量）。

`DBL_MAX`和之间的选择`INFINITY`取决于你想在边界上做什么 -`nextafter(DBL_MAX, DBL_MAX) == DBL_MAX`但是`nextafter(DBL_MAX, INFINITY) == INFINITY`。

是的，它的名字很糟糕。另见[`nextafter`和`nexttoward`：为什么这个特殊的界面？](https://stackoverflow.com/questions/52063370/nextafter-and-nexttoward-why-this-particular-interface).

* * *

```
#include <cfloat> // DBL_MAX
#include <cmath> // std::nextafter

double x = 0.1;

// Next representable number **after** x in the direction of DBL_MAX.
// (i.e., this is larger than x, and there is no double between it and x)
double xPlusSmallest = std::nextafter(x, DBL_MAX); 

// Next representable number **before** x in the direction of -DBL_MAX.
// (i.e., this is smaller than x, and there is no double between it and x)
double xMinusSmallest = std::nextafter(x, -DBL_MAX); 
```

即使你的编译器不支持它，它也可能有它的内在特性。（例如，MSVC`_nextafter`自 2005 年以来就有。GCC 可能将其作为标准实现。）

如果您的编译器不支持它，但您可以使用 Boost，您可以这样做：

```
#include <boost/math/special_functions/next.hpp>
#include <cfloat> 

double x = 0.1;

double xPlusSmallest = boost::math::nextafter(x, DBL_MAX); 
double xMinusSmallest = boost::math::nextafter(x, -DBL_MAX); 
```

如果这些都不适合您，您只需打开 Boost 标头并复制它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T08:51:18.580

这是一个非常肮脏的技巧，实际上是不合法的，并且仅在您的平台使用 IEEE754 浮点数时才有效：浮点数的二进制表示形式与浮点值的排序方式相同，因此您可以递增二进制表示形式：

```
double x = 1.25;

uint64_t * const p = reinterpret_cast<uint64_t*>(&x);

++*p;   // undefined behaviour! but it gets the next value

// now x has the next value 
```

通过执行通常的二进制复制体操以获得适当的`uint64_t`值，您可以完全合法地达到相同的效果。确保也正确检查零、无穷大和 NaN。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-15T09:04:28.630

怎么样：

```
x += fabs(x) * std::numeric_limits<double>::epsilon(); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-04-15T06:49:09.170

```
#define FLT_MIN         1.175494351e-38F        /* min positive value */
#define FLT_MAX         3.402823466e+38F        /* max value */
#define DBL_MIN         2.2250738585072014e-308 /* min positive value */
#define DBL_MAX         1.7976931348623158e+308 /* max value */ 
```

[http://xona.com/2006/07/26.html](http://xona.com/2006/07/26.html)

# assembly - 按功能划分的 x86 指令参考

> ID：10160084
> 
> 赞同：6
> 
> 时间：2012-04-15T06:40:46.950
> 
> 标签：assembly, x86, instruction-set

我正在寻找有关 x86 指令集“演变”的参考资料。主要是，哪些较新的命令使旧命令变得多余和不可用，并且根据它们的功能而不是根据它们添加的时间/处理器来分解指令。

另外，有没有关于近年来软件开发中x86命令的使用百分比的参考资料（意思是现代程序中不再使用哪些命令）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:18:56.370

这听起来更像是一个研究问题，而不是一个编程问题。

你最好的办法是去，比如说，列出沿袭处理器的 x86 指令的[Wikipedia 文章](http://en.wikipedia.org/wiki/X86_instruction_listings)，找出每条指令的作用并根据功能对它们进行分类。

至于使用说明的趋势，不知道。这是一个相当沉重的问题。这与问“哪些英语单词在现代使用中更常见？”没有太大区别？使用哪些指令取决于应用程序。

# java - Java CLI 解析器

> ID：10160086
> 
> 赞同：10
> 
> 时间：2012-04-15T06:41:14.517
> 
> 标签：java, command-line-interface, subcommand

我知道这个问题已经被问过了，但我正在寻找具有特定功能的 Java cli 解析器。我希望它能够定义命令行树，从而使用子命令（以及不止一个级别的深度）。因此，在获得选项之前，我可以拥有 3-4 级命令。并且这些子命令是互斥的。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T12:22:54.647

可以用[JCommander](http://jcommander.org/#Complex)完成。每个`JCommander`对象本质上都是一个具有任意数量的参数和/或任意数量的嵌套子命令的命令，其中顶部`JCommander`对象是*根*命令。命令参数始终特定于为其声明的命令，并且不会干扰其他命令的参数。添加子命令的界面不是很直观但是可以（见`addCommand`method()）

这是一个概念验证测试类：

```
public class Test{

@Test
public void nestedSubCommandTest() {
    GeneralOptions generalOpts = new GeneralOptions();
    JCommander jc = new JCommander(generalOpts);

    Command command = new Command();
    JCommander jc_command = addCommand(jc, "command", command);

    SubCommand1 subcommand1 = new SubCommand1();
    JCommander jc_subcommand1 = addCommand(jc_command, "subcommand1",
            subcommand1);

    SubCommand2 subcommand2 = new SubCommand2();
    JCommander jc_subcommand2 = addCommand(jc_subcommand1, "subcommand2",
            subcommand2);

    SubCommand3 subcommand3 = new SubCommand3();
    addCommand(jc_subcommand2, "subcommand3", subcommand3);

    jc.parse("--general-opt", 
        "command", "--opt", 
        "subcommand1",
        "subcommand2", "--sub-opt2", 
        "subcommand3", "--sub-opt3");

    assertTrue(generalOpts.opt);// --general-opt was set
    assertTrue(command.opt);// command --opt was set
    assertFalse(subcommand1.opt);// subcommand1 --sub-opt1 was not set
    assertTrue(subcommand2.opt);// subcommand2 --sub-opt2 was set
    assertTrue(subcommand3.opt);// subcommand3 --sub-opt3 was set
}

private static JCommander addCommand(JCommander parentCommand,
        String commandName, Object commandObject) {
    parentCommand.addCommand(commandName, commandObject);
    return parentCommand.getCommands().get(commandName);
}

public static class GeneralOptions {
    @Parameter(names = "--general-opt")
    public boolean opt;
}

@Parameters
public static class Command {
    @Parameter(names = "--opt")
    public boolean opt;
}

@Parameters
public static class SubCommand1 {
    @Parameter(names = "--sub-opt1")
    public boolean opt;
}

@Parameters
public static class SubCommand2 {
    @Parameter(names = "--sub-opt2")
    public boolean opt;
}

@Parameters
public static class SubCommand3 {
    @Parameter(names = "--sub-opt3")
    public boolean opt;
}
} 
```

**编辑：** 如何重用命令。

解决方案1，使用继承：

```
 public class CommonArgs{
    @Parameter(names="--common-opt")
    public boolean isCommonOpt;
  }

  @Parameters(description = "my command 1")
  public class MyCommand1 extends CommonArgs{}

  @Parameters(description = "my command 2")
  public class MyCommand2 extends CommonArgs{} 
```

我认为这个用法和行为很明显。一个缺点是您只能从一个类扩展，这可能会限制将来的可重用性。

解决方案 2，使用组合模式（请参阅[此处的文档](http://jcommander.org/#Parameter_delegates)）：

```
 public class CommonArgs{
    @Parameter(names="--common-opt")
    public boolean isCommonOpt;
  }

  @Parameters(description = "my command 1")
  public class MyCommand1{
    @ParametersDelegate
    public CommonArgs commonArgs = new CommonArgs();
  }

  @Parameters(description = "my command 2")
  public class MyCommand2{
    @ParametersDelegate
    public CommonArgs commonArgs = new CommonArgs();
  } 
```

在这里，嵌套`commonArgs`类的参数将被视为命令类的直接参数。您可以根据需要添加任意数量的委托，甚至可以将委托嵌套在其他委托中等等。要在解析后获取委托选项的值，只需 do`myCommand1.commonArgs.isCommonOpt`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-30T05:06:55.163

[picocli](http://picocli.info/)支持任意深度的嵌套子命令。

```
CommandLine commandLine = new CommandLine(new MainCommand())
        .addSubcommand("cmd1", new ChildCommand1()) // 1st level
        .addSubcommand("cmd2", new ChildCommand2())
        .addSubcommand("cmd3", new CommandLine(new ChildCommand3()) // 2nd level
                .addSubcommand("cmd3sub1", new GrandChild3Command1())
                .addSubcommand("cmd3sub2", new GrandChild3Command2())
                .addSubcommand("cmd3sub3", new CommandLine(new GrandChild3Command3()) // 3rd
                        .addSubcommand("cmd3sub3sub1", new GreatGrandChild3Command3_1())
                        .addSubcommand("cmd3sub3sub2", new GreatGrandChild3Command3_2())
                                // etc
                )
        ); 
```

您可能还喜欢它对 ANSI 样式和颜色的使用帮助。

请注意，除了选项和位置参数之外，用法帮助还列出了已注册的子命令。

[![在此处输入图像描述](../Images/844ff76f2ac6c5eda71892c3cec62421.png)](https://i.stack.imgur.com/2567S.png)

使用帮助很容易通过注释进行定制。

[![在此处输入图像描述](../Images/9d3cd6c1e69476772c04828cfff5044e.png)](https://i.stack.imgur.com/5w1Gi.png)

*   基于注释的
*   git 风格的子命令
*   嵌套子命令
*   强类型选项参数
*   强类型位置参数
*   可定制的类型转换
*   多值期权
*   一个字段消耗多少参数的直观模型
*   流畅的 API
*   POSIX 风格的集群空头期权
*   GNU 风格的长选项
*   允许任何选项前缀
*   使用帮助中的 ANSI 颜色
*   可定制的使用帮助
*   单一源文件：包含作为源，以使您的应用程序保持一个 jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T10:35:31.650

如果您的命令表达式很复杂，那么您可以考虑定义语法，编写其 BNF 并使用[JavaCC](http://javacc.java.net/)或[AntLR](http://www.antlr.org/)等库来创建自己的解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T06:17:28.727

我认为将这个多级命令拆分成几个 CLI 工具会更好。

代替：
`program cmd sub-cmd sub-sub-cmd -option1 argument -option2 argument`

在程序名称后附加一或两级：
`program-cmd-sub-cmd sub-sub-cmd -option1 argument -option2 argument`

真实单词示例：
`svn-add -q -N foo.c`

您可以将所有必需的类保存在单个 JAR 中（并尽可能多地重用它们），只需添加几个“主要”入口点。对于基本的 CLI 解析，我还推荐`JCommander`.

# android - 检查音乐是否在 android 媒体播放器 API 中播放

> ID：10160089
> 
> 赞同：14
> 
> 时间：2012-04-15T06:42:02.730
> 
> 标签：android, media-player

我正在使用下面的代码在 android 中播放音频文件

```
MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource("fileSourceHere");
mediaPlayer.prepare();
mediaPlayer.start(); 
```

我在那个程序上有一个按钮。单击该按钮时，它将检查是否正在播放音乐。如果播放音乐，它将停止。如何检查音乐是否正在播放？我尝试了下面的代码，但它没有工作

```
if(mediaPlayer.isPlaying() == true){
 mediaPlayer.pause();
}else{
 mediaPlayer.start();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-02T08:15:46.770

检查音乐是否由任何其他应用程序播放。利用

```
AudioManager.isMusicActive(); 
```

如果您想了解您的应用音乐。

添加监听器进行监听

```
mediaPlayer.setOnPreparedListener(this);

mediaPlayer.setOnCompletionListener(this);

mediaPlayer.setOnErrorListener(this); 
```

您可以添加一个布尔变量来检查 isPlaying；

```
boolean isPlaying= false; //false by default 
```

当你`start mediaPlayer`在设定的那一刻`isPlaying=true`，你很高兴。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-27T14:37:15.823

尝试这个：

```
MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource("fileSourceHere");
mediaPlayer.prepare();
mediaPlayer.start();

if(mediaPlayer.isPlaying())
{
    //stop or pause your media player mediaPlayer.stop(); or mediaPlayer.pause();
    mediaPlayer.pause();
}
else
{
    mediaPlayer.start();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-03T22:14:53.857

```
MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource("fileSourceHere");

If(mediaPlayer != Null){
if(mediaPlayer.isPlaying() == true)
{ 
mediaPlayer.pause();
}
else
{
 mediaPlayer.start();
}
}
else
{
//mediaPlayer is null
mediaPlayer.start();
} 
```

I had almost the same problem. Android studio generates an error when you try for the first time because there is no music as datasource. ;)

# linux - 解析日志以查找每个用户的所有源 IP 的最快方法

> ID：10160091
> 
> 赞同：0
> 
> 时间：2012-04-15T06:42:16.327
> 
> 标签：linux, bash, shell, logging, text-parsing

我有大量的日志，例如：

```
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userA 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userA 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userB 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userC 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userC 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.X:53516 [15/Apr/2012:06:24:51.504] userD 200 "GET HTTP/1.1" 
```

这是 Bash shell 中解析日志的最快方法（每个用户的所有请求源 IP）：

```
userA:
XXX.XXX.XXX.XXX(client's source IP, remove port number and uniq same IPs.)
XXX.XXX.XXX.XXX
...
userB:
XXX.XXX.XXX.XXX
XXX.XXX.XXX.XXX
XXX.XXX.XXX.XXX
...
userC:
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:51:49.223

使用 awk：

```
awk '
{ a[$6] = $4 "\n" a[$6] }                                     
END {
    for (u in a) print u ":\n" a[u]
}' FILE 
```

要删除端口和 uniq 主机试试这个（我没有很好地测试这个）：

```
awk '
{
  sub(":.*$", "", $4)
  if (!a[$6,$4]) a[$6,$4]++
}
END {
    for (u in a ) {
      split(u, b, SUBSEP)
      nu[b[1]] = b[2] "\n" nu[b[1]]
   }
   for (u in nu) print u ":\n" nu[u]
}' FILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:34:46.393

这可能有用；它以适合进一步自动处理的形式获取所需的数据（按用户排序的用户/IP 对列表）：

```
awk '{split($4,a,":"); print $6, a[1]; }' | sort -u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:29:43.700

一个 Bash 解决方案：

```
declare -A ips=()
while read x x x ip x user rest; do
  ips[$user ${ip%:*}\\n]=1                  # hash user+ip+newline
done < "$infile"

userold=''
while read user ip; do                      # split user, ip
  [ "$userold" != "$user" ] && echo "$user" && userold="$user"
  echo  "$ip"
done < <( echo -e "${!ips[*]}" | sort )     # feed sorted keys 
```

输入：

```
Apr 15 06:24:52  11.250.30.1:53516 [15/Apr/2012:06:24:51.504] userA 200 "GET HTTP/1.1"
Apr 15 06:24:54  11.250.30.2:53516 [15/Apr/2012:06:24:51.504] userA 200 "GET HTTP/1.1"
Apr 15 06:24:55  11.250.30.3:53516 [15/Apr/2012:06:24:51.504] userB 200 "GET HTTP/1.1"
Apr 15 06:24:51  11.250.30.4:53516 [15/Apr /2012:06:24:51.504] userC 200 "GET HTTP/1.1"
Apr 15 06:24:52  11.250.30.4:53516 [15/Apr/2012:06:24:51.504] userC 200 "GET HTTP/1.1"
Apr 15 06:24:58  11.250.30.5:53516 [15/Apr/2012:06:24:51.504] userD 200 "GET HTTP/1.1" 
```

输出排序：

```
userA
11.250.30.1
11.250.30.2
userB
11.250.30.3
userC
11.250.30.4
userD
11.250.30.5 
```

# c# - 注入静态字段

> ID：10160093
> 
> 赞同：0
> 
> 时间：2012-04-15T06:42:46.503
> 
> 标签：c#, .net, dependency-injection, ninject

这是我的接口和类：

```
public interface IWeapon
{
   void Shoot();
}

public interface IWarrior
{
   void Kill();
}

public class Killer : IWarrior
{
   private static IWeapon _weapon;

   public void Kill()
   {
       _weapon.Shoot();
   }
}

public class Rifle : IWeapon
{
   public void Shoot()
   {
   }
} 
```

如何使用 Ninject 在 Killer 类中注入 Rifle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:03:25.227

Ninject 不注入静态，因为这应该使用 InSingletonScope 完成。它也不支持字段注入，因为不应从类外部访问字段。请改用构造函数或属性注入。

# facebook - Facebook FQL 用于订购的 link_stats

> ID：10160094
> 
> 赞同：3
> 
> 时间：2012-04-15T06:43:25.623
> 
> 标签：facebook, facebook-fql

我正在尝试为以公共子字符串开头的 url 检索 link_stats 的有序（降序）结果集。我正在尝试使用以下内容：

```
SELECT url,
       normalized_url,
       share_count,
       like_count,
       comment_count,
       total_count,
       commentsbox_count,
       comments_fbid,
       click_count
FROM   link_stat
WHERE  substr(url, 0, 22) = "http://www.example.com"; 
```

但我不断收到以下错误消息：

```
Your statement is not indexable. The WHERE clause must contain an indexable column. 
```

任何有关如何使用附加语法以按“total_count”降序排列的建议都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:52:53.790

url 现在是**可索引**的列。请参阅[https://developers.facebook.com/docs/reference/fql/link_stat](https://developers.facebook.com/docs/reference/fql/link_stat)

您是否使用直接 where 子句来访问网址？

```
SELECT url,
       normalized_url,
       share_count,
       like_count,
       comment_count,
       total_count,
       commentsbox_count,
       comments_fbid,
       click_count
FROM   link_stat
WHERE  url = "www.example.com"; 
```

# php - youtube 如何使用 base_encode 获取唯一 ID 却无法解密？

> ID：10160097
> 
> 赞同：0
> 
> 时间：2012-04-15T06:43:52.240
> 
> 标签：php, mysql

我发现 youtube 上的视频有[http://www.youtube.com/watch?v=RArlg6HeZZM](http://www.youtube.com/watch?v=RArlg6HeZZM)网址。

RArlg6HeZZM 是视频独有的，如果您更改一个字母，它就不起作用，所以它对隐私很有好处。

我已经尝试过像 64 和 32 解密器这样的解密器来找出原始值但不能，所以他们正在做一些花哨的事情。关于他们如何做的任何想法？我想在我的网站上为我的网站视频实现此功能。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:51:52.937

这是一个随机生成的“哈希”。这实际上不是 MD5 哈希或任何东西。它自己的哈希算法。他们没有理由将 youtube 设为私有。为此，他们有其他方法。您看到的顶部是一个“哈希”，它被插入到他们的数据检索算法中。这种方式使它看起来更好，更“随机”。当你有索引增量时，它看起来很草率；您输入 300，您将找到上传到该网站的第 300 个视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:51:46.557

他们正在使用一种称为散列的技术： [http ://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

散列创建唯一的字符串（在大多数情况下），而不会透露原始字符串是什么。您无法解码 ID 的原因是因为您不应该这样做 - 这就是哈希的美妙之处。

# java - 围绕“|”在java中拆分字符串 特点

> ID：10160109
> 
> 赞同：1
> 
> 时间：2012-04-15T06:46:46.017
> 
> 标签：java, string, split

我有这个

```
String str = "a,pnp,a|pnp,lab2|pnp,a|pnp,lab2,utr,utr";
String[] strings = str.split("|"); 
```

此代码不会围绕“|”拆分 字符，而是拆分每个字符，例如

```
strings[0] == "a";
strings[1] == ","; 
```

等等。

如何让这个工作得到

```
strings[0] == "a,pnp,a"
strings[1] == "pnp,lab2"
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T06:50:19.707

`split()`接受正则表达式，并`|`为正则表达式 OR 保留，因此您需要对其进行转义：

```
String[] strings = str.split("\\|"); 
```

甚至更好：

```
String[] strings = str.split(Pattern.quote("|")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:48:47.633

利用

```
String[] strings = str.split("\\|"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T06:58:29.733

`|`正如其他答案所示，您可以转义该符号。我个人建议下载[番石榴](http://guava-libraries.googlecode.com)并[`Splitter`](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/base/Splitter.html)改用。虽然这可能被视为单个语句的过度杀伤，但根据我的经验，这将是一个罕见的项目，无法通过 Guava 的各个部分使其更具可读性。

如果可能的话，我个人会使用列表而不是数组，所以：

```
private static final Splitter PIPE_SPLITTER = Splitter.on('|');
...

// Or an immutable list if you don't plan on changing it afterwards
List<String> strings = Lists.newArrayList(PIPE_SPLITTER.split(str)); 
```

我可能只是对正则表达式过度过敏，但我真的不喜欢使用处理正则表达式的 API，除非我*真的*试图使用保证它们的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T06:56:50.227

公共字符串 [] 拆分（字符串正则表达式）

围绕给定正则表达式的匹配拆分此字符串。

此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。因此，尾随的空字符串不包含在结果数组中。

所以，你应该试试 String[] arrayOfStrings = str.split("\|");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:05:37.907

只是添加到转义`|`字符的选项中：

```
String[] strings = str.split("[|]"); 
```

# scroll - 如何用 cocos2d 制作这样的游戏？

> ID：10160111
> 
> 赞同：1
> 
> 时间：2012-04-15T06:47:49.980
> 
> 标签：scroll, cocos2d-iphone

这个游戏： [http ://armorgames.com/play/4421/toss-the-turtle](http://armorgames.com/play/4421/toss-the-turtle)

如果我要制作这样的游戏，我想我应该使用box2d来创建一个重力世界。然后我需要跟随英雄精灵，否则它会飞出屏幕。

问题是如何跟随英雄精灵？第一个想到怎么解决“跟随”的问题就是移动背景，但是是重力环境，我不知道怎么做，只知道精灵移动的时候怎么做。

那怎么办，有例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:03:24.647

您可以通过设置 CCLayer 的位置来移动背景。这不会影响物理世界。是的，你可能会想要 box2d。查看本教程以了解如何开始使用 box2d：[http](http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls) ://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls 。

# codeigniter - CodeIgniter 如何使用 database.php 连接多数据库进行第一次连接和 Model 进行第二次连接

> ID：10160112
> 
> 赞同：0
> 
> 时间：2012-04-15T06:48:13.350
> 
> 标签：codeigniter, codeigniter-datamapper

我有很多数据库连接我在 database.php 文件中有主要连接

```
$active_group = 'default';
$active_record = TRUE;
$db['default']['hostname'] = 'xxx';
$db['default']['username'] = 'xxx';
$db['default']['password'] = 'xxxx';
$db['default']['database'] = 'xxx';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

而且我有更多的连接..但我必须使用 [***模型***]配置另一个连接

我可以将参数传递给 database.php 吗？

或者我可以把这个代码放在模型中吗

```
$db['xxx']['hostname'] = 'xxx';
$db['xxx']['username'] = 'xxx';
$db['xxx']['password'] = 'xxxx';
$db['xxx']['database'] = 'xxx';
$db['xxx']['dbdriver'] = 'mysql';
$db['xxx']['dbprefix'] = '';
$db['xxx']['pconnect'] = TRUE;
$db['xxx']['db_debug'] = TRUE;
$db['xxx']['cache_on'] = FALSE;
$db['xxx']['cachedir'] = '';
$db['xxx']['char_set'] = 'utf8';
$db['xxx']['dbcollat'] = 'utf8_general_ci';
$db['xxx']['swap_pre'] = '';
$db['xxx']['autoinit'] = TRUE;
$db['xxx']['stricton'] = FALSE;

$this->load->database('xxx', TRUE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:56:43.867

我通常在 database.php 中定义其他数据库连接（如上所示），然后在模型中您可以像这样调用它：

```
$this->xxx_db = $this->load->database('xxx', true); 
$this->xxx_db->set($params);
$sql = $this->xxx_db->insert('table_name'); 
```

这样做可以将所有连接保持在一个位置 - 更易于维护。

您可能还希望看到这个问题：[多个数据库连接](https://stackoverflow.com/questions/7619711/multiple-database-connections)。我不是很清楚你有什么问题。

# emacs - Clojure 粘液配置

> ID：10160113
> 
> 赞同：3
> 
> 时间：2012-04-15T06:48:24.003
> 
> 标签：emacs, clojure, slime, swank-clojure

我有 lein 1.7 和 swank 1.4 插件。然后，我从没有配置 emacs 开始，从 marmalade 安装 clojure-mode，用 lein 创建一个新项目，打开 project.clj，然后执行 Mx clojure-jack-in。史莱姆开始就好了。然后我进入这个

```
; SLIME 20100404
user> (defn x[x]
          (let [y (* x 2)]
               (when (= y 2)
                 (throw (Exception. "hey")))
               y))
#'user/x
user> (x 2)
4
user> (x 1) 
```

它让我进入调试器，但看起来它并不完整：

```
hey
  [Thrown class java.lang.Exception]

Restarts:
 0: [QUIT] Quit to the SLIME top level

Backtrace:
  0:       NO_SOURCE_FILE:1 user/x
      [No Locals]
  1:       NO_SOURCE_FILE:1 user/eval1854
      [No Locals]
  2:     Compiler.java:6465 clojure.lang.Compiler.eval
  3:     Compiler.java:6431 clojure.lang.Compiler.eval
  4:          core.clj:2795 clojure.core/eval
  5:           core.clj:532 swank.core/eval690[fn]
  6:       MultiFn.java:163 clojure.lang.MultiFn.invoke
  7:           basic.clj:54 swank.commands.basic/eval-region
  8:           basic.clj:44 swank.commands.basic/eval-region
  9:           basic.clj:78 swank.commands.basic/eval880[fn]
 --more-- 
```

当地人没有显示。没有继续的选项。我看了视频： http: [//vimeo.com/23932914](http://vimeo.com/23932914)如何获得相同的 slime/emacs/clojure 配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:33:06.863

如果我理解正确，您希望在异常点看到本地人，但是，我相信您的问题是异常被捕获的位置（在`x`函数退出后）您已经移出堆栈帧当地人被定义了。

例如，如果您设置断点......

```
user> (defn x [x]
        (let [y (* x 2)]
           (when (= 2 y)
             (swank.core/break) 
               (throw (Exception. "hey")))))
user> (x 1) 
```

然后，当您到达断点并获取堆栈跟踪时，本地变量就可用了。

```
BREAK:
  [Thrown class java.lang.Exception]

Restarts:
 0: [QUIT] Quit to the SLIME top level
 1: [CONTINUE] Continue from breakpoint

Backtrace:
 0:       NO_SOURCE_FILE:1 user/x
      Locals:
        x = 1
        y = 2
 1:       NO_SOURCE_FILE:1 user/eval6821
 2:     Compiler.java:6465 clojure.lang.Compiler.eval
 3:     Compiler.java:6431 clojure.lang.Compiler.eval
 4:          core.clj:2795 clojure.core/eval
 5:           core.clj:532 swank.core/eval819[fn]
 6:       MultiFn.java:163 clojure.lang.MultiFn.invoke
 7:           basic.clj:54 swank.commands.basic/eval-region
 8:           basic.clj:44 swank.commands.basic/eval-region
 9:           basic.clj:78 swank.commands.basic/eval1009[fn]
 --more-- 
```

挖掘源代码`(swank.core/break)`，您实际上可以自己捕获这些本地绑定....

```
(defn x [x]
  (let [y (* x 2)]
    (when (= 2 y)
      (swank.core/local-bindings)
        (throw (Exception. "hey"))))) 
```

您将从“嘿”异常中获得与上述相同的堆栈跟踪...

更多细节[在这里](http://hugoduncan.org/post/2010/swank_clojure_gets_a_break_with_the_local_environment.xhtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:13:16.193

该视频显示了 swank-clj，它已重命名为[ritz](https://github.com/pallet/ritz)。请参阅存储库中有关如何安装和使用它的说明...

# c# - 如何为 WPF 属性制作模板？

> ID：10160124
> 
> 赞同：2
> 
> 时间：2012-04-15T06:50:46.690
> 
> 标签：c#, wpf, templates, properties

在我的 WPF XAML 表单上，我有很多元素绑定到我的属性。

对于每个属性，我正在执行以下步骤：

```
<TextBlock Grid.Column="0" Grid.Row="0" Name="TB11" Text="{Binding TBX11}" 
            VerticalAlignment="Center" HorizontalAlignment="Center" 
            DataContext="{Binding RelativeSource={RelativeSource Self}}" /> 
```

和

```
#region TBX11
private static void OnXBPropertyChanged(DependencyObject dependencyObject,
                DependencyPropertyChangedEventArgs e) 
{
    table myUserControl = dependencyObject as table;
    myUserControl.OnPropertyChanged("XB11");
    myUserControl.OnCaptionPropertyChanged(e);
}
private void OnCaptionPropertyChanged(DependencyPropertyChangedEventArgs e) {
    TB11.Text = TBX11;
}
public static readonly DependencyProperty TBX11Property =
        DependencyProperty.Register("TBX11", typeof(string), typeof(table),
        new PropertyMetadata(string.Empty, OnXBPropertyChanged));
public string TBX11 {
    get { return GetValue(TBX11Property).ToString(); }
    set {
        SetValue(TBX11Property, value);
        OnPropertyChanged("TBX11");
    }
}
#endregion 
```

我现在什至无法意识到我需要在这里写多少次，但我不知道我是否可以让它变得更容易？因为我需要从这里设置的是 WPF 块名称和绑定名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:57:06.373

有几种方法可以减少重复：

1.  引入用户控件以减少重复的 XAML 和 C# 代码。有关更多详细信息，请参阅[我编写](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)的本教程。
2.  如果您有一个相同 UI 元素的列表，则可以`ItemsControl`使用 an`ItemTemplate`创建重复的元素。

我发现您的代码存在一些问题：

1.  在您`OnCaptionPropertyChanged`设置的方法中`TextBlock.Text`，您不应该这样做 - 此绑定将负责更新！
2.  在您`TBX11`调用此方法的属性`OnPropertyChanged("TBX11")`中，您不应向依赖属性的 getter 或 setter 添加任何逻辑。不能保证这些会被调用。
3.  您`TextBlock.DataContext`的设置为自身，因此`Text`绑定将不起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:56:43.800

> 我不知道我是否可以让它变得更容易？

你可以使用像[Caliburn Micro](http://caliburnmicro.codeplex.com/)这样的 MVVM 框架。

Caliburn 将允许您将 XAML 重写为

```
 <TextBlock Grid.Column="0" Grid.Row="0" Name="TB11"  
        VerticalAlignment="Center" HorizontalAlignment="Center"/> 
```

# javascript - 是否可以使用 slideUp() 和 before()

> ID：10160125
> 
> 赞同：0
> 
> 时间：2012-04-15T06:50:47.960
> 
> 标签：javascript, jquery

基本上我有一个`<section>`和一些`<article>`标签

现在要从我使用的 ajax 返回数据

```
$("section#data article:last").before(html); 
```

但为了使其更加用户友好，我想添加**slideUp()**

我试试这个，数据是在最后一篇文章之前插入的，但是最后一篇文章是向上滑动的

```
$("section#data article:last").before(html).slideUp(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:53:23.770

尝试使用`prev()`

```
$("section#data article:last").before(html).prev().slideUp(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:04:07.540

```
var $data = $(html).hide();
$("section#data article:last").before($data);
$data.slideDown(); 
```

# java - 在android中按下后退按钮后如何停止finish（）方法？

> ID：10160128
> 
> 赞同：1
> 
> 时间：2012-04-15T06:51:18.047
> 
> 标签：java, android

我可以检查finish（）中的一些条件吗

如果条件成功，则继续返回上一个

否则，停止完成，并保持当前活动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T06:53:30.043

您可以通过覆盖`onBackPressed()`您的活动来捕捉“返回”新闻事件。如果您有一些不想完成活动的情况，请不要调用`super.onBackPressed()`该方法。

`super.onBackPressed()`但是，如果不满足该条件，请确保您确实打电话。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T09:01:23.153

另一种选择是，覆盖您的活动`finish()`

```
@Override
public void finish() {
    if( bLetsFinish ){
        super.finish(); //This will finish the activity and take you back
    }else{
        //Do whatever it is that you want to do
        return;
    }
} 
```

但是，请注意，每次 Activity 想要完成（）时都会调用此函数，例如，您旋转手机并重新创建 Activity。在这种情况下，您的旧 Activity 将无法完成（），我不确定 Activity 销毁的行为将如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T09:07:56.523

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if(success){
            finish();
       }
      return true;
   }
   return super.onKeyDown(keyCode, event);
} 
```

您可以使用上述方法或以下方法来完成您的任务

```
public void onBackPressed(){
if(success){
finish();
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T07:55:50.770

```
@Override
public void onBackPressed() {
    if (success)
        super.onBackPressed();
    else // Do what you want to do
} 
```

# eclipse - Eclipse 中的剪贴板历史记录

> ID：10160132
> 
> 赞同：8
> 
> 时间：2012-04-15T06:51:46.807
> 
> 标签：eclipse, clipboard, clipboarddata

Eclipse 中是否有一个插件可以在剪贴板中显示所有最近复制的项目，例如用于 sublime 编辑器的[https://github.com/kemayo/sublime-text-2-clipboard-history](https://github.com/kemayo/sublime-text-2-clipboard-history)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T06:57:16.560

[更多剪贴板](https://github.com/mikhail-barg/moreclipboard)似乎可以大致实现您正在寻找的内容。

# c - 我的数学怎么了？

> ID：10160137
> 
> 赞同：0
> 
> 时间：2012-04-15T06:52:29.793
> 
> 标签：c, floating-point, int

我有一个涉及浮点数和整数的函数。当我运行代码时，结果是错误的。当我为 input_voltage 输入 4.3 时，十进制为 3803，十六进制为 EDB。正确答案应该是 3808 和 EE0。谁能告诉我可能会发生什么？

```
#include <stdio.h>

int digital_encoding(float voltage);

int main()
{
    float input_voltage;
    int valid, ch;

    do{
        printf("Please enter the input voltage between 0 and 5 volts: \n");
        valid = scanf("%f", &input_voltage);
        if(input_voltage <= 0){
            printf("Enter a number larger than 0! \n");
            valid = 0;
        }
        if(input_voltage >= 5){
            printf("Enter a number less than 5! \n");
            valid = 0;
        }
    }while(valid != 1);

    digital_encoding(input_voltage);
}
int digital_encoding(float voltage)
{
    int dig_encode;
    dig_encode = ((voltage + 5)*(4095/10));
    printf("The digital encoding equals %d in decimal, and %X in HEX.\n", dig_encode, dig_encode);
    return dig_encode;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T06:56:50.460

`4095/10`是 409 而不是 409.5，这是整数算术，所以向下舍入。

您可能正在寻找 `4095.0 / 10`[或只是`409.5`]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:57:53.073

我认为您可能需要将 (4095/10) 更改为 (4095.0/10) ，否则您将获得该比率的整数运算，其余部分被丢弃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T06:58:07.783

问题在这里：

```
 int dig_encode;
        dig_encode = ((voltage + 5)*(4095/10)); 
```

以浮点数计算结果，然后在使用前将其转换为 int。

```
dig_encode = (int)((voltage + 5)*(4095/10.0)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T07:05:48.567

问题出在这里：

```
int digital_encoding(float voltage)
{
    **int** dig_encode;
    dig_encode = ((voltage + 5)*(4095/10));
    printf("The digital encoding equals %d in decimal, and %X in HEX.\n", dig_encode,    dig_encode);
    return dig_encode;
} 
```

改用这个

```
int digital_encoding(float voltage)
{
    float dig_encode;
    dig_encode = ((voltage + 5)*(4095.00/10));
    printf("The digital encoding equals %d in decimal, and %X in HEX.\n", (int)dig_encode, (int)dig_encode);
    return (int)dig_encode;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T06:59:10.450

结果`4095/10`是**int**，所以是 409，而不是 409.5。这是因为两个数字都是**int**。要使结果**浮动**，您可以这样写`4095.0/10`

# javascript - 为什么说回调未定义？

> ID：10160139
> 
> 赞同：0
> 
> 时间：2012-04-15T06:52:35.323
> 
> 标签：javascript, json, callback, jsfiddle

我为我正在制作的游戏制作了一个服务器，它为我生成了一张地图，但是在我制作的这个测试客户端上，它无法正常工作。

我将站点添加为脚本，它作为脚本工作正常，但是当读取 jsfiddle 上的 javascript 时，它说函数 callback() 没有定义，但它显然是，它应该发送地图对象到控制台，但它只是出错了......：/

这是 JS Fiddle 的链接：http: [//jsfiddle.net/Tgwizman/9QrUF/](http://jsfiddle.net/Tgwizman/9QrUF/)

我希望你们能弄清楚，因为我完全不知道为什么它不起作用......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T06:58:21.530

在您的 jsfiddle 中，javascript 回调函数是在您使用 javascript 包含加载地图后定义的，此时您的回调尚未定义。

这是一个固定的[小提琴](http://jsfiddle.net/rRXEB/)。

示例来源：

```
<script>
var map;

function callback(cb) {
    map = cb;
    console.log(map);
}
</script>
<script src='http://mmorpg_server.jit.su/?map=0,0'></script>​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T06:58:54.787

将下拉值更改为`no wrap (head)`

![截屏](../Images/81feb2bb3ae2d662a8d85de44886e69a.png)

[http://jsfiddle.net/9QrUF/3/](http://jsfiddle.net/9QrUF/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T06:57:16.087

[必须在加载地图之前定义回调](http://jsfiddle.net/9QrUF/2/)。否则，您正在调用未定义的函数。外部脚本可以按任何顺序下载，但按照它们被编码到页面中的顺序执行。

```
<script>
    var map;
    //declare callback first before anything uses it
    function callback(cb) {
        map = cb;
        console.log(map);
    }
</script>

//this calls the callback it MUST be loaded after
<script src='http://mmorpg_server.jit.su/?map=0,0'></script>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T06:58:38.510

~~这是因为 jsFiddle 并不总是能完美运行。~~

 ~~## [这是它的工作原理](http://jsfiddle.net/2PvwN/)~~ 

~~发生这种情况是因为 jsfiddle 将脚本元素包装在它们自己的包装器（闭包）中，因此无法访问其中声明的任何函数~~

没关系，[KARASZI István](https://stackoverflow.com/a/10160166/465546)和[Joseph 的](https://stackoverflow.com/a/10160157/465546)答案更好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:53:44.877

```
<script type="text/javascript">
var map;

function callback(cb)
 {
    map = cb;
    console.log(map);
}
</script>
<script src='http://mmorpg_server.jit.su/?map=0,0'> 
</script>​ 
```

希望这会奏效！

# android - Android 目标位置

> ID：10160144
> 
> 赞同：0
> 
> 时间：2012-04-15T06:53:28.270
> 
> 标签：android, location

我在为指南针应用设置目标位置时遇到问题。基本上它指向一个设定的目的地（而不是北方）。但是，每当我尝试执行 destinationObj.setLatittude() 或 setLongitutde() 时，我已经计算出了所有的数学运算，应用程序强制关闭。

奇怪的是，如果我将destinationObj set.Lat/Long 放在位置监听器中，它会覆盖GPS 位置，就好像应用程序只能识别一个位置而不是两个。

请提供任何指导。

谢谢，

这是我的代码：

```
import android.app.Activity;
...

public class CompassActivity extends Activity {

LocationManager locationManager;
Location LocationObj, destinationObj;

    private SensorEventListener mListener = new SensorEventListener() {
        public void onSensorChanged( SensorEvent event ) {

            if ( LocationObj == null ) return;

            ...bearing calculation...

                float bearing = LocationObj.bearingTo(destinationObj);

            rotateImageView( needle, R.drawable.needle, direction);

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        needle = (ImageView)findViewById(R.id.needle);
        log = (TextView)findViewById(R.id.log);
        lat = (TextView)findViewById(R.id.lat);

        **destinationObj.setLatitude(20);
        destinationObj.setLongitude(30);**

        LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
              LocationObj = location;
              log.setText(Double.toString(location.getLongitude()));
              lat.setText(Double.toString(location.getLatitude()));
            }
            public void onStatusChanged(String provider, int status, Bundle extras) {}
            public void onProviderEnabled(String provider) {}
            public void onProviderDisabled(String provider) {}
          };

        mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

        mSensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
    }

    private void rotateImageView( ImageView imageView, int drawable, float rotate ) {
       ...image rotation...
    }

    @Override
    protected void onResume()
    {
        super.onResume();
        mSensorManager.registerListener(mListener, mSensor,
                SensorManager.SENSOR_DELAY_GAME);
    }

    @Override
    protected void onStop()
    {
        mSensorManager.unregisterListener(mListener);
        super.onStop();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:39:31.250

因为destinationObj 仍然没有初始化并且为空

在这条线之前..

```
 destinationObj.setLatitude(20); 
```

放

```
 destinationOnj=new Location(NETWORK_PROVIDER); 
```

# ios - xcode - 我想接收设备语言

> ID：10160147
> 
> 赞同：1
> 
> 时间：2012-04-15T06:54:14.387
> 
> 标签：ios, device, http-accept-language

如何通过以下方法获取 iPhone 设备语言到服务器？

```
$_SERVER['HTTP_ACCEPT_LANGUAGE'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T03:34:09.670

如果您询问如何接收设备语言，您可以这样做：

```
NSString *userLocale = [[NSLocale currentLocale] localeIdentifier];
NSString *userLanguage = [userLocale substringToIndex:2];

if([userLanguage isEqualToString:@"en"]){
    //English
}
else if([userLanguage isEqualToString:@"es"]){
    //Spanish
}
else if([userLanguage isEqualToString:@"fr"]){
    //French
} 
```

对于其余的语言代码，您可以访问[此网站](http://www.loc.gov/standards/iso639-2/php/English_list.php)。iOS 的代码是最后一列中的 ISO 639-1 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-20T21:47:01.870

上面的答案对我不起作用，因为`[[NSLocale currentLocale] localeIdentifier]`总是会返回`en_US`。这是因为在模拟器中更改语言首选项是由`[NSLocale preferredLanguages]`. 这是检查设备语言设置的另一种方法：

```
NSString *preferredLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];
NSLog(@"%@", preferredLanguage);

if ([preferredLanguage isEqualToString:@"en_US"])
{
    // English
}
else if([preferredLanguage isEqualToString:@"es"])
{
    // Spanish
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-01T06:28:56.113

## *迅速*

*获取设备的当前语言*

```
NSLocale.preferredLanguages()[0] as String 
```

*输出：*

> 输入

*获取应用程序的语言*

```
NSBundle.mainBundle().preferredLocalizations[0] as NSString 
```

*笔记：*

它获取您在info.plist的*CFBundleDevelopmentRegion中给出的语言*

如果*CFBundleAllowMixedLocalizations*在 info.plist 中为真，则返回 info.plist中*CFBundleLocalizations*的第一项

[资源](https://stackoverflow.com/a/35123958/730807)

***PHP***

浏览器通常会发送一个名为 Accept-Language 的 HTTP 标头，指示用户愿意获得哪些语言

```
$_SERVER['HTTP_ACCEPT_LANGUAGE'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T16:14:17.440

Swift：通过原生 API 获取设备语言

```
let language = NSLocale.preferredLanguages()[0] as String 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:01:55.083

```
 'HTTP_ACCEPT_LANGUAGE'
   Contents of the Accept-Language: header from the current request, if there is one. Example: 'en'. 
```

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

基本上，您只需要找出代码是什么。您可能应该检查以下内容：

```
 if ($_SERVER['HTTP_ACCEPT_LANGUAGE'] != "")
   {
       $currentLanguage = "en";
   } 
```

我有一段时间没有接触过 PHP，但是浏览器有可能不会报告语言，具体取决于存在的浏览器。您将需要一个默认值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-29T07:52:25.850

我知道这是一篇旧帖子，但今天我需要做 Monk 要求的事情，而 qegal 发布的解决方案对我不起作用，所以我发布了我的答案。但它确实让我走上了正确的轨道，所以我对 qegal 投了 +1 票。

在我的应用程序中，当手机设置为瑞典语时，我需要做一些事情，所以在启动应用程序时会检查语言是否设置为瑞典语，如果是，请调用适当的方法。代码嵌套在 viewDidLoad: 方法中。记得将手机设置中的区域格式设置为对应的语言。

```
NSString *userLocale = [[NSLocale currentLocale] localeIdentifier];
NSLog(@"%@", userLocale);
if ([userLocale isEqualToString:@"sv_SE"]) {
    // Swedish, do something when phone is set to Swedish or whatever language you prefer

} 
```

# php - 如何使用backbone.js和php将数据保存到mysql数据库中

> ID：10160149
> 
> 赞同：4
> 
> 时间：2012-04-15T06:54:56.553
> 
> 标签：php, mysql, backbone.js

我刚刚开始使用backbone.js，并且正在使用Nettuts 上的本教程。[http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-backbone-js/](http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-backbone-js/)

```
var user = Backbone.Model.extend({
   initialize: function(){
     console.log('user was initialized!');
   },
   defaults:{
      'name' : 'wern',
      'full_name' : 'rem falkner',
      'password' : 'secret',
      'email' : 'secret@gmail.com'
   }
})

var u = new user() 
```

然后我使用了保存方法：

```
u.save(undefined, {url : 'inserts.php'}) 
```

Inserts.php 包含：

```
<?php 
include('conn.php');

$name = $_POST['name'];
$password = md5($_POST['password']);
$email = $_POST['email'];

$db->query("INSERT INTO tbl_users SET user_id='$name', pword_hash='$password', full_name='$name', email='$email'");
?> 
```

我的代码有什么问题？它似乎正在插入数据库，因为每当我调用 save() 方法时，它都会在用户表上插入一些东西，但只在密码字段中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T12:38:47.220

当您调用 .save() 方法时，会将一个 JSON 对象发送到您指定的 url；如果模型是新的，则将使用 POST 方法。在 PHP 脚本中收到 JSON 后，您必须对其进行解码并保存模型属性，假设每个属性一个字段。在“inserts.php”中更改：

```
<?php 
    include('conn.php');

    $data = json_decode(file_get_contents('php://input'));
    $name = $data->{'name'};
    $password = md5($data->{'password'});
    $email = $data->{'email'};

    //proceed to add every variable to a field in the database
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:03:05.313

在 $db->query 之前的行中的 PHP 代码中，执行以下操作：

```
echo $name, '<br>', $password, '<br>', $email; 
```

制作一个带有姓名密码电子邮件字段的传统 HTML 表单，并测试 PHP 脚本，确保您输入的姓名密码和电子邮件地址出现在屏幕上。

如果成功，您的错误可能在您的数据库查询中。对于初学者来说，您的代码似乎容易受到 SQL 注入的攻击。您需要发布一些关于您使用的 DBMS 的信息（MySQL、MSSQL、PostgreSQL 等）。无论如何，查询看起来是错误的。还要发布您的 CREATE TABLE 命令。

# entity-framework - 实体框架：数据上下文的生命？

> ID：10160152
> 
> 赞同：0
> 
> 时间：2012-04-15T06:56:48.133
> 
> 标签：entity-framework, datacontext

我正在阅读数据上下文的推荐寿命，但我仍然对最佳选择存有疑问。

一般来说，我看到的结论是，在桌面应用程序中，数据上下文的生命周期应该是表单的生命周期，而在 WCF 应用程序中，生命周期应该是会话的生命周期。

原因，如果我理解的话，这是因为数据上下文的生命周期应该足够大，以具有上下文工作单元的优点，但又不能太大而失去它的好处。

但是，例如，如果我从数据库中读取一些数据并且数据上下文被创建为桌面应用程序中表单的属性，如果我进行更改，我只需要更改数据上下文实体中的值和调用 savechanges() 方法，EF 将更改保存在数据上下文中。所以我与数据库有两种交互，一种是获取数据，另一种是保存更改。

但是，这样一来，数据上下文可能会变得非常大，并且出现并发问题的可能性也更大，我的意思是，由于我加载数据，进行更改并保存数据，其他用户有时间修改信息。

如果我为每个操作使用一个数据上下文，我使用一个 dispose 的数据上下文读取数据，对局部变量中的信息进行更改，然后，当我保存更改时，我必须使用其他数据上下文，它再次接收实体，我必须搜索实体以将信息从我的局部变量传递给实体，然后保存更改。

在这种情况下，我与数据库进行了三个交互，因此效率较低，数据库必须做更多的工作。一个是获取结果并将信息传递给局部变量，另一个是再次获取结果并将信息从局部变量传递到上下文，最后保存更改。此外，我必须做额外的工作来搜索第二个数据上下文中的实体，以将局部变量的更改传递到新上下文。

但是，并发问题发生的可能性较小，因为只是在第二个数据上下文中加载数据和将更改从局部变量传递到上下文之间经过的时间。

那么，在桌面应用程序和 WCF 应用程序中，哪个是处理数据上下文的最佳选择？也许我在使用数据上下文时做错了？

也许如果我使用第二种方法，并且我的本地变量也是实体，我可以创建第二个数据上下文，而不是从数据库中加载实体，我可以直接添加本地实体，将其状态更改为添加、更改或删除然后数据上下文可以保存更改吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T09:09:17.650

> 那么，在桌面应用程序和 WCF 应用程序中，哪个是处理数据上下文的最佳选择？

这取决于具体情况，但在大多数情况下，这正是您所需要的：

*   WinForm / WPF - 每个表单/每个演示者等。
*   WCF - 每个服务调用；**从不**按会话或按应用程序
*   ASP.NET - 每个请求；**从不**按会话或按应用程序

在这些情况下，每个提到的范围通常是一个工作单元。如果范围内有多个工作单元，则可能需要不同的上下文实例化。

最困难的情况是多线程 Windows 服务，您必须手动识别工作单元并使用适当的上下文生命周期。**永远不要**在线程之间共享上下文。**避免**使用用于服务多个工作单元的全局长期存在的上下文。[这](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)是相关的描述，为什么共享上下文是一个错误的想法。

> 但是，并发问题发生的可能性较小，因为只是在第二个数据上下文中加载数据和将更改从局部变量传递到上下文之间经过的时间。

那是对并发问题的误解。乐观并发应该检查您没有覆盖另一个线程/用户所做的更改。因此，您必须使用在修改之前加载的原始数据，因为这是您在修改之前知道的最后一个状态。如果最后一个状态与数据库中的当前状态不匹配，则必须解决并发问题。必须修改您提出的解决方案以支持这一点 - 例如，当您从数据库加载数据以进行更新时，您必须遍历所有实体并检查当前时间戳是否等于在第一次数据检索时从数据库加载的时间戳。

# php - Facebook 发布到墙上同时循环

> ID：10160170
> 
> 赞同：2
> 
> 时间：2012-04-15T06:58:49.330
> 
> 标签：php, facebook, facebook-wall

我正在尝试构建一个应用程序，该应用程序将在您授权并公开许可后将照片上传到新相册。

一个 cronjob（一个每 5 分钟执行一次的 php 文件）检查每个数据库条目的时间和超过 24 小时前的每个条目时间（它也将保存在数据库中）将被更新并上传用户 ID再来一张照片。但是，如果用户不在我的网站上，我如何上传照片呢？

```
$permissions = $facebook->api("/".$user."/permissions");
if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
    $facebook->setFileUploadSupport(true);

    $album_details = array(
        'message'=> ''.$album_msg.'',
        'name'=> ''.$album_name.''
    );

    $create_album = $facebook->api('/'.$user.'/albums', 'post', $album_details);

    $album_uid = $create_album['id'];

    $photo_details = array(
        'message'=> ''.$photo_msg.''
    );
    $file='temp/'.$first_name.'_'.$worth.'.png';
    $photo_details['image'] = '@' . realpath($file);

    $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);
} 
```

使用此代码，我在 index.php 中上传了一张照片。我试图用“/uid”替换“/me”，但它每次都告诉我我无权上传照片。需要帮助，真的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T14:14:24.673

登录 Facebook 和您的应用程序将为您提供访问令牌，但此令牌仅在短时间内有效，如果您想在没有登录用户的情况下上传照片，则必须扩展此令牌。有关如何完成此操作的信息，请访问： [https ://developers.facebook.com/docs/facebook-login/access-tokens/#extending](https://developers.facebook.com/docs/facebook-login/access-tokens/#extending)

# c# - 如何在 C# 中进行 POST 以获取 JSON 请愿的访问令牌？

> ID：10160171
> 
> 赞同：0
> 
> 时间：2012-04-15T06:58:54.050
> 
> 标签：c#, json, post, token

我正在尝试生成一个令牌，以便可以访问返回 JSON 文件的服务器。我已经阅读了服务器 API 的文档，它说的是这样的：

**动词**->POST

**协议**-> http://

**Primary_domain** -> api.actitudfem.com

**行动**-> 注册

**数据类型**-> json

**required_pa ​​rameters** -> appid=[unique_id]

**Optional_parameters** ->&name=[用户名]&email=[useremail]

**网址**->http://api.actitudfem.com/register.json

任何人都可以通过向我展示如何获取令牌来帮助我，以便我可以使用它来下载 JSON 文件吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:48:33.340

使用 HttpWebRequest。

确保您参考这些：

```
using System;
using System.IO;
using System.Net;
using System.Text; 
```

然后使用以下内容：

```
 const string url = "http://api.actitudfem.com/register.json";

    string postData = "appid=SomeUniqueID";
    var dataBytes = Encoding.UTF8.GetBytes(postData);

    var request = (HttpWebRequest)WebRequest.Create(url);
    request.ContentLength = dataBytes.Length;
    request.ContentType = "application/x-www-form-urlencoded";
    request.Method = "POST";

    using (var postStream = request.GetRequestStream())
        postStream.Write(dataBytes, 0, dataBytes.Length);

    string json = String.Empty;
    using (var response = (HttpWebResponse)request.GetResponse())
    {
        using (var sr = new StreamReader(response.GetResponseStream()))
            json = sr.ReadToEnd();
    } 
```

然后，如果需要，您可以选择附加`&name=[username]&email=[useremail]`到 postData。

# svn - 版本控制：之后创建标签

> ID：10160175
> 
> 赞同：2
> 
> 时间：2012-04-15T06:59:43.527
> 
> 标签：svn, version-control, tags

之后如何创建 svn 标签？

我已经更改了存储库结构以适应正常的主干、标签和分支结构。我现在如何为旧版本创建标签？

目前我正在尝试这个：

```
svn copy dev/somedir@35 tags/Stable-1.0 -r 35 
```

但我得到这个错误：

> svn：E155010：找不到节点“/path/to/repo/dev/somedir”。

这对于当前状态是正常的，但对于修订版 35 则不是这样。

我该如何解决这个问题？我应该查看旧的 rev 35 并将内容复制到当前版本吗？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:03:00.127

我试着重复你的问题：路径`/dev/somedir`存在于 rev 35，在目录结构更改之间，路径`/dev/somedir`不存在于 HEAD 版本中，路径`/tags`不存在于 rev 35。你想`/dev/somedir`从 rev 35 复制到`/tags`. 正确的？

尝试以下命令：

```
svn cp ^/dev/somedir@35 ^/tags/Stable-1.0 
```

此命令适用于两个 URL，而不是工作副本中的路径。我强烈建议在创建标签和分支时使用 URL。

以下操作也应该可以工作（URL 和 WC 的组合）。但是，我强烈建议不要使用它：

```
svn cp ^/dev/somedir@35 tags/Stable-1.0 
```

# css - 如何编写水平子菜单而不是下拉菜单

> ID：10160183
> 
> 赞同：1
> 
> 时间：2012-04-15T07:01:58.087
> 
> 标签：css, navbar

我有一个带有下拉子菜单的导航栏。但是如何将“下拉”子菜单转换为“并排”子菜单，就像在 Apple 网站中一样。例如，如果我们单击“ipad”，它会显示“功能”、“内置应用程序”、“ios”……并排显示一个突出显示。

我想在我的网站上实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:43:56.650

您希望它像在 Apple 网站上一样工作吗？

如果是这样....

在[Apple](http://www.apple.com/ipad/ "iPad 页面")上加载的子导航是 iPad 页面的一部分，而不是主菜单的一部分（就代码而言）。它只是加载在该特定页面上的一个单独的水平菜单。

因此，在您的第一页上的网站上，您将只有主菜单，水平样式

```
<ul id="main-menu">
  <li><a href="page1.html">page one</a></li>
  <li><a href="page2.html">page two</a></li>
  <li><a href="page3.html">page three</a></li>
  <li><a href="page4.html">page four</a></li>
</ul> 
```

然后在 page1.html 上，您只需在下面的某处添加一个额外的菜单，如下所示...

```
<ul id="main-menu">
  <li><a href="page1.html">page one</a></li>
  <li><a href="page2.html">page two</a></li>
  <li><a href="page3.html">page three</a></li>
  <li><a href="page4.html">page four</a></li>
</ul>

<ul id="sub-menu">
  <li><a href="page1_option1.html">option one</a></li>
  <li><a href="page1_option2.html">option two</a></li>
  <li><a href="page1_option3.html">option three</a></li>
  <li><a href="page1_option4.html">option four</a></li>
</ul> 
```

如果您想要一个子菜单，它是用户悬停在主菜单项上时显示的主菜单的一部分，您可以在主菜单的相关“li”内添加一个“ul”菜单，如下所示......

```
<ul id="main-menu">
  <li id="show-sub-menu"><a href="page1.html">page one</a>
    <ul id="sub-menu-1">
      <li><a href="page1_option1.html">option one</a></li>
      <li><a href="page1_option2.html">option two</a></li>
      <li><a href="page1_option3.html">option three</a></li>
    </ul>
  </li>
  <li><a href="page2.html">page two</a></li>
  <li><a href="page3.html">page three</a></li>
  <li><a href="page4.html">page four</a></li>
</ul> 
```

然后只需将您的子导航设置为像主菜单一样水平显示。您需要将其设置为 display:none 并在其父元素悬停时 sho，如下所示...

CSS

```
#main-menu li ul{
   display:none;
}

#main-menu li#show-sub-menu:hover ul{
   display:block;
} 
```

# javascript - 单击模态框时按钮没有被触发

> ID：10160185
> 
> 赞同：5
> 
> 时间：2012-04-15T07:02:24.343
> 
> 标签：javascript, jquery, asp.net, modal-dialog

[**`Assign a Textbox Value to the modal-box on the same page`**已回答]

**新问题：** 为什么当我点击按钮时模式框上的按钮没有被触发？我错过了什么吗？

我添加了处理服务器端点击事件的代码：

```
Protected Sub Save_Button_Click(sender As Object, e As System.EventArgs) Handles Save_Button.Click
    //The code goes here
End Sub 
```

请参阅下面带有标记行的代码。

* * *

我有下面的代码在单击 LinkBut​​ton 后显示模式框。而且，我想要做的是如何分配 Textbox 的值。

我有一个网格视图：

```
<asp:GridView ID="GV1" runat="server" DataSourceID="DS1" >
  <Columns>
    <asp:BoundField HeaderText="ID" DataField="ID"/>
    <asp:TemplateField ShowHeader="False">
      <ItemTemplate>
        <asp:LinkButton ID="Edit_Linkbutton" runat="server" CausesValidation="False" >
          <asp:Image ID="Edit_Linkbutton_Image" runat="server" ImageUrl="~/edit.png"></asp:Image>
        </asp:LinkButton>
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

在同一页面上（这是一个 div 作为模式框，在单击 Gridview 上的链接按钮后显示）：

```
<div id="dialog-form" title="Modal Box">
    <input type="text" id="Textbox1" />

    #--------------------------------------------------------------------#
    #This button didn't get fired while clicked
    <asp:Button ID="Save_Button" runat="server" Text="Save"></asp:Button>
    #--------------------------------------------------------------------#

</div> 
```

然后我通过代码隐藏将 Javascript 函数附加到 LinkBut​​ton：

```
Dim myLinkButton As LinkButton

For i As Integer = 0 To GV1.Rows.Count - 1
  myLinkButton = DirectCast(GV1.Rows(i).Cells(1).FindControl("LinkButton"), LinkButton)
  myLinkButton.Attributes.Add("onclick", "shopModalPopup('" + .Rows(i).Cells(0).Text & "'); return false;")
Next 
```

`Rows(i).Cells(0)`是 Gridview 上的第一列，它是“ `ID`”。

Javascript 代码与 Gridview 代码在同一页面上：

```
<script>
function shopModalPopup(id){
//show the modal-box
    $("#dialog-form").dialog("open");
    // ---> How to assign the 'id' value to the Textbox1 on the modalbox?
} 

$(function () {
    $("#dialog-form").dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true
    });
});
</script> 
```

上面的代码确实打开了模态框，但没有将值分配给模态框上的 Textbox1。

我要问的是如何将`Id`值分配给`Textbox1`模态框上的？我尝试搜索任何相关文章，但他们确实将模态框分隔到另一页上。但在这种情况下，模态框与单击的链接按钮位于同一页面上。我怎样才能做到这一点？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:46:37.907

你可以像这样绑定javascript事件......

```
<asp:LinkButton ID="LinkButton" runat="server" OnClientClick="SomeMethod();" /> 
```

您可以在代码中绑定javascript方法的其他方式，您可以在其中拥有更多控制权的示例是[here](http://www.dotnetfunda.com/forums/thread1808-attach-script-to-linkbutton-in-gridview.aspx)

如果你将参数传递给你的 javascript 函数，例如你传递给 javascript 中的参数，那么你应该定义你的函数

```
function SomeFunction(arg1, arg2)
{

//your statements

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:15:57.083

未经测试，但应该可以工作。

我想你也可以避免使用内联js，只绑定buttonLink的点击事件

```
#dialog-form { display:none } /* CSS */

<script>  /* JS */
/* Assuming all dialogs share the same default Settings in this grid scenario */
var grid_modal_options = {
        height: 300,
        width: 350,
        modal: true
};
function shopModalPopup(id){
    var DataField = id;
    grid_modal_options.open = function(){
        $('#dialog-form #Textbox1').val( DataField );
        // OR
        // $('#dialog-form').find('textarea').val( DataField );
    };

    $("#dialog-form").dialog(grid_modal_options);
} 
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:17:37.453

如果您回发没有触发，则您的模态很可能不在您的表单中`runat=server`。我之前在使用 jQuery UI 对话框时遇到过这个问题。您需要将模式移回`<form></form>`标签内。

初始化模态后试试这个：

`$("#dialog-form").parent().appendTo('form:first');`

# php - 去掉 PHP 中 json_encode 中的 int 索引用于多维数组

> ID：10160188
> 
> 赞同：3
> 
> 时间：2012-04-15T07:03:10.093
> 
> 标签：php, json, touch, extjs

这是一个有点难以解释的问题，所以我给你展示一下。如果您看下面，您将看到有效的 JSON。

```
{
    "data":{
        "0":{
            "action_id":"1",
            "date":"2012-04-10 15:07:38",
            "action_type":"1",
            "action_text":"Some one got blamed!"
        },
        "1":{
            "action_id":"2",
            "date":"2012-04-10 16:18:05",
            "action_type":"1",
            "action_text":"Testing multiple items for AJAX"
        },
        "total":2,
        "ajax_message":"Success",
        "ajax_status":"0",
        "success":"true"
    }
} 
```

但是对于正在使用的应用程序，它无法处理“0”：“1”，它只是希望它用逗号分隔。

我当前生成此代码的代码是：

```
while ($r = mysql_fetch_assoc($q)) {
        $array[] = $r;
    }
json_encode($array); 
```

目前相当简单和原始的东西。但我想我可能必须为自己编写一个 json_encode 才能像这样打印它.....

任何帮助将不胜感激

注意：这是一个有效的表格（手写）：

```
{
"data": [
{
"action_id": "1",
"date": "2012-04-10 15:07:38",
"action_type": "1",
"action_text": "Some one got blamed!",
"fb_id": "760775384"
},
{
"action_id": "2",
"date": "2012-04-10 16:18:05",
"action_type": "1",
"action_text": "Testing multiple items for AJAX",
"fb_id": "760775384"
}
],
"total": 2,
"ajax_message": "Success",
"ajax_status": "0",
"success": "true"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:12:46.397

问题是您的数字键 ( `0`, ) 在哈希中与命名键 ( ,等)`1`处于同一级别。而不是这样做：`total``ajax_message`

```
$a = array();
while ($r = mysql_fetch_assoc($q)){
    $a[] = $r;
}
$a['key'] = value; 
```

做这个：

```
$a = array();
$a['rows'] = array();
while ($r = mysql_fetch_assoc($q)){
    $a['rows'][] = $r;
}
$a['key'] = value; 
```

如果数组中的每个键（`$a['rows']`在本例中）都是数字，`json_encode()`则将其输出为`[{list}, {like}, {this}]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:08:45.870

你需要一个额外的数组级别。

你有：

```
array( 
  'data' => array(
    '0' => array()
    '1' => array()
    'total' => 2,
    'etc' => 'blah'
  )
) 
```

但你要求这个：

```
array( 
  'data' => array(
    array(),
    array()
  )
  'total' => 2,
  'etc' => 'blah'
) 
```

正如 Cal 所说，更深层次的问题是您将（隐式）数字键与您正在编码的数组的字符串键混合在一起。这在 PHP 中很好，但它对 JSON 中的数组无效，仅对对象有效。

`json_encode`将没有字符串键的数组编码为 JSON 数组，但它需要将字符串键数组编码为对象，以使它们成为有效的 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:13:59.800

```
while ($r = mysql_fetch_assoc($q)) {
    $array[][] = $r;
}
json_encode($array); 
```

# android - 左右对齐

> ID：10160199
> 
> 赞同：2
> 
> 时间：2012-04-15T07:06:41.183
> 
> 标签：android, android-layout

怎么可能像这样布局控件？ ![在此处输入图像描述](../Images/71b25bdbe07f016b3cac3641fd03c006.png)

换句话说 - 一个`TextView`对齐左侧，第二个对齐右侧。当然，红色布局应该根据屏幕宽度进行拉伸。我不知道如何以最好的方式做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:11:12.450

您可以根据您的要求使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" 
    android:background="#ffffff" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"/>

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"/>

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentLeft="true"/>

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"/>

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T11:15:11.817

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" 
    android:background="#ffffff" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"/>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView"  android:layout_below="@+id/textView1"/>

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"
            android:layout_below="@+id/textView2"/>

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentLeft="true"
             android:layout_below="@+id/textView3"/>

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" android:layout_alignParentRight="true"
            android:layout_below="@+id/textView4"/>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:09:54.867

您可以使用相对布局。然后只需将您的文本视图定位为

```
 android:layout_alignParentRight="true" 
```

这是此类布局的链接：

[Android 相对布局](http://developer.android.com/resources/tutorials/views/hello-relativelayout.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T07:23:39.387

您可以将整个视图变成一个 RelativeLayout，并使用 layout_alignParentLeft、layout_alignParentRight 将 Textview 粘贴到视图的左右两侧，然后使用 layout_alignBaseline 将 Textview 保留在每一侧。然后layout_below放Textview的下一行。

或者，您可以使用 LinearLayout 到 layout_width="match_parent" 然后使用上面相同的方法将红色框变成RelativeLayout。

但是，我建议您检查每种类型的布局以查看每个容器的特征，然后确定哪个最适合您的整体视图，但请记住，您在屏幕上拥有的视图/布局越多会影响性能一些设备。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:25:12.523

您可以使用RelativeLayout，但同一行中这两个视图的一个视图应该具有一定的固定宽度。如果您确定右视图的宽度不会大于某个宽度，那么您也可以将 wrap_content 分配给宽度，但如果第二个视图可能采用全屏宽度，则有必要为布局分配一些固定宽度。

所以将 LayoutParams 设置为左​​右视图，如下所示： LeftView：

Layout_width=fill_parent, Layout_height=wrap_content, layout_toLeftOf=@+id/rightView,

第二视图：

Layout_width=wrap_content，Layout_height=wrap_content，layout_alignParentRight=true

# javascript - 没有页面刷新的多个ajax请求

> ID：10160201
> 
> 赞同：0
> 
> 时间：2012-04-15T07:06:57.120
> 
> 标签：javascript, ajax, jquery, struts2

我有一个应用程序（struts2+sprin+glassfish3.1.2）每秒向服务器发送一个 ajax（jquery）请求。如果满足某些条件，我的 js 会将我重定向到其他页面，否则我什么也不做。
似乎在很长一段时间后（几个小时没有任何重定向）浏览器变得无响应或者需要很长时间才能执行请求。
我提到如果发生这种情况，我会从 X 关闭浏览器并重新打开它，一切正常。我没有设法在我的测试环境中复制这个问题，但似乎我在生产中遇到了这个问题:(。

## 有什么想法吗？

我使用 Jquery (struts2-jquery-plugin3.3.0) 进行 ajax 调用，我将附上一些代码：
此方法每 1 秒访问一次：

```
function checkedForAnsweredCalls(){

    if (ajaxFinished == 1){

        ajaxFinished = 0;

        $.getJSON('redirectToTicket.html',
                function(data) {

                    ajaxFinished = 1;
                    if (data != null){                      
                        window.location = data;         
                    }
                }
        );
    }

    }; 
```

通过这段代码：

```
<script>
            var ajaxFinished = 1;
            window.setInterval( "checkedForAnsweredCalls()", 1000 );            
        </script> 
```

此 ajax 代码访问具有 json 响应类型的 struts2 操作，因此如果满足某些数据库条件，我会返回一个 url。
感谢您的快速回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:29:47.900

使用 Firebug 分析您的 Web 应用程序，应该会告诉您挂起的位置。

至于在不刷新页面的情况下执行多个 Ajax 请求，您可能需要某种 ajax 管理库，可以是手写的，也可以免费获得（prototype.js 就是一个例子）。

我使用以下代码为我管理它，不能归功于它，它是我发现谷歌搜索的代码混杂，我做了一些小的改动。

```
var reqObj_arr = [];

function getXMLObject(index) {
    if(reqObj_arr[index]){
        return reqObj_arr[index];
    }

    var xmlHttp = false;
    try {
        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP")  // For Old Microsoft Browsers
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP")  // For Microsoft IE 6.0+
        } catch (e2) {
            xmlHttp = false   // No Browser accepts the XMLHTTP Object then false
        }
    }
    if (!xmlHttp && typeof XMLHttpRequest != 'undefined') {
        xmlHttp = new XMLHttpRequest();        //For Mozilla, Opera Browsers
    }
    reqObj_arr[index] = xmlHttp;
    return xmlHttp;  // Mandatory Statement returning the ajax object created
}

    function ajaxFunction(url, target, params) {
        var getdate = new Date();  //Used to prevent caching during ajax call
        var xmlhttp = new getXMLObject(target);    //xmlhttp holds the ajax object

        if(xmlhttp) {
            xmlhttp.open("POST",url,true); //calling url using POST method
            xmlhttp.onreadystatechange  = function() {
                if (xmlhttp.readyState == 4) {
                    if(xmlhttp.status == 200) {
                        document.getElementById(target).innerHTML = xmlhttp.responseText;
                    }
                    else {
                        alert("Error during AJAX call. Please try again");
                    }
                }
            };
            xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
            if(params){
                xmlhttp.send(params); // Posting to PHP file
            }
            else{
                xmlhttp.send(); // Posting to PHP file
            }
        }
    } 
```

要使用它，请将以下 Javascript 行添加到您的页面中

```
var url = 'URL to the .php file';
var target = 'ID of the element to add retrieved data to';
var params = 'Any other parameters to send';
ajaxFunction(url,target,params); 
```

# c# - C#，TextBox '&' char 更改为 amp;

> ID：10160204
> 
> 赞同：2
> 
> 时间：2012-04-15T07:07:39.467
> 
> 标签：c#, winforms

我有一个绑定到 String Url 属性的 TextBox。当用户插入带有 char '&' 的链接时，它会变为 amp; 这导致我在其他应用程序上出现很多问题有没有办法禁用这种转换？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-15T07:19:36.747

没有。实际上是进行查询/获取字符串的正确方法。原因是 & 是浏览器看到 URL 中变量结尾的方式；& 是一个变量拆分器。放入放大器；确保浏览器确切地知道这不是变量的结尾。这是所有浏览器都必须遵守的全球标准。

这是关于这类东西的好资源

[http://www.w3.org/](http://www.w3.org/)

# java - 超声波通讯

> ID：10160205
> 
> 赞同：1
> 
> 时间：2012-04-15T07:08:05.543
> 
> 标签：java, android, iphone, ios, signal-processing

我遇到了一个名为 zoosh 的安卓应用程序，它使用超声波频率进行短距离通信。

我的印象是android或大多数手机都不能产生超声波频率。

有人能告诉我这个东西是如何工作的，以及如何实现这样的东西。

就我而言，我认为我们需要为每个用户生成一个独特的频率，该频率可以从另一部手机的麦克风中读取。然后在另一部手机上，我们可以使用离散傅立叶变换来获得我们指定范围内的最大频率。

（顺便说一句，我想制作类似 tagtile.com 的东西，但要使用两部手机，不需要额外的硬件）

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T11:48:17.937

您将无法接收任何高于 1/2 采样率的频率，它们只会折回（混叠）。为了消除这种混叠，通常在 A2D 采样器之前有一个滤波器来截止高于采样频率 1/2 的频率。

当然，所使用的频率可能实际上不是超声波，只是在频率能力的上限和相当低的音量，并且设备相当靠近。

在接近超声波的频率和接近 2 倍频率的采样率下使用 DFFT 将为您提供相当宽的频率区间。最好只对数据使用脉冲编码调制之类的东西。

可以通过对包含用户 ID 的数据进行前导来完成每个用户的区分。

或者考虑一下蓝牙，GameKit 为短距离的点对点通信提供了一个很好的 API。蓝牙 4.0 版提供了非常快速的连接，尽管它仅在最新设备上可用。

注意：应用于声音的术语“超声波”是指高于可听声音频率的任何东西，名义上包括超过 20,000 赫兹的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:49:13.690

如果您有 2 部手机 - 去获得一对免费的应用程序 - 任何可以让您产生高频声音的东西，以及任何可以通过麦克风向您显示“音频范围”的​​东西。

使用这些 - 您可以清楚地看到可以从一个设备发送数据，这些数据显示在另一个设备上，但人类听不到！当然...正如您所注意到的，有很多事情可以做到这一点，但是自己观看总是很有趣:-)

Zoosh 出售一个 SDK - 好像你已经发现了？

# ios - 发布 UIImage Facebook 问题

> ID：10160206
> 
> 赞同：0
> 
> 时间：2012-04-15T07:08:09.923
> 
> 标签：ios, facebook

我正在尝试将图像发布到 Facebook。昨天我得到它，但今天我再次测试它并不起作用：S。我找不到问题。我修改了一些东西，但没有修改 Facebook 与之交互的方法。我希望有一个人可以帮助我。

我在 viewController 中得到了所有内容，因为它仅在用户请求时登录。

我调试了它，只有“publishFacebook”被调用，因为我调用它。它去 Facebook 并请求权限，然后你返回，没有任何反应。

URL 方案是正确的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb235694579858240</string>
        </array>
    </dict>
</array>
</plist> 
```

视图控制器.h

# 导入“FBConnect.h”

```
@interface ViewController : UIViewController <UIImagePickerControllerDelegate, UIActionSheetDelegate, UIGestureRecognizerDelegate, MFMailComposeViewControllerDelegate, FBSessionDelegate, FBDialogDelegate, FBRequestDelegate>

@property (nonatomic, retain) Facebook *facebook;
-(void)postWall; 
```

视图控制器.m

```
-(void) publishFacebook:(UIImage *)img { 

    //start the facebook action by clicking any button
    _publishedImage = img;
    _facebook = [[Facebook alloc] initWithAppId:@"235694579858240" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        _facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        _facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![_facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_photos",
                                @"user_likes", 
                                @"read_stream",
                                nil];
        _facebook.sessionDelegate = self;
        [_facebook authorize:permissions];
    }else{
        [self postWall];
    }
}

    - (void)fbDidLogin {
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:[_facebook accessToken] forKey:@"FBAccessTokenKey"];
        [defaults setObject:[_facebook expirationDate] forKey:@"FBExpirationDateKey"];
        [defaults synchronize];
        [self postWall];
    }

    - (void)postWall{

        //NSString *filePath = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"];
        NSData *imageData = UIImagePNGRepresentation(_publishedImage);
        //[NSData dataWithContentsOfFile:filePath]
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"Check out my awesome image!. I make it with Trolling for iOS", @"message", imageData, @"source", nil];
        [_facebook requestWithGraphPath:@"me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self];

        NSLog(@"Image posted");

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Image Posted" message:@"Your image was successfully posted of facebook" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alertView show];
    }

    -(void)fbDidNotLogin:(BOOL)cancelled{
        if (cancelled) {
            UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"Could not Login" message:@"Facebook Cannot login please try again" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
            [alertView show];
        }
    }

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [_facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [_facebook handleOpenURL:url]; 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:53:56.790

您需要仔细遵循 Facebook 的教程，一切都应该正常工作：[developers.facebook.com/docs/mobile/ios/build](http://developers.facebook.com/docs/mobile/ios/build)

您需要的唯一调整是作为 UIButton IBAction 调用的结果触发登录过程。其余的流程完全相同。这是一个非常微妙的过程，如果你错过了一些东西，很难调试。

# gwt - GWT RootPanel 与 RootLayoutPanel

> ID：10160210
> 
> 赞同：8
> 
> 时间：2012-04-15T07:09:29.387
> 
> 标签：gwt

我知道官方 GWT 建议使用较新的 RootLayoutPanel，但 Internet 上的一些帖子声称对于某些 Web 应用程序，最好使用 RootPanel。
如何决定使用哪一种？
每个都有不同的用例吗？（或者每个要求都可以满足）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T12:05:37.833

`RootLayoutPanel`再好不过了。只是不同而已。

`RootPanel`允许您向页面添加小部件（基本上您可以使用页面上的一些 html 元素作为根小部件）。`RootPanel's`您可以在同一应用程序中定义多个。

`RootLayoutPanel`行为有点不同，它总是尝试填充窗口中所有可用的大小，因此面板内的内容将完全适合浏览器窗口大小。它还将跟踪窗口的大小，并相应地调整子元素的大小（如果它们支持的话）。还会`RootLayoutPanel`尝试将自身直接附加到`<body> element`，例如，您无法选择页面上的哪个 html 元素将成为“起点”。

因此，根据您想要做什么，您可以选择`RootPanel`或`RootLayoutPanel`。

# java - 在 java IO 类中需要帮助

> ID：10160212
> 
> 赞同：-1
> 
> 时间：2012-04-15T07:09:32.497
> 
> 标签：java, java-io

我需要有关 IO java 代码的帮助，我正在尝试将 java 控制台输出 [来自 URL 类] 保存到本地机器中的文件中，我能够获得输出需要帮助将该文件保存到本地机器

为了得到输出我做了这个编码

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL oracle = new URL("http://www.yahoo.com/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
        yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

注意：我有另一个代码，我可以在其中将输出保存到文件中，但无法将两者关联起来，我尝试过扩展，但没有进展，这是那个类

```
import java.io.*;
class FileWrite {
    public static void main(String args[]) {
        try{
            // Create file 
            FileWriter fstream = new FileWriter("out.txt");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write("Hello Java");
            //Close the output stream
            out.close();
        }catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T07:37:13.977

它实际上几乎都在那里，您只需要知道每行代码的作用就可以知道如何将它们组合在一起。

```
import java.net.*;
import java.io.*;

public class WriteFromURL {
    public static void main(String[] args) throws Exception {
        try{

            // Block from connection reader
            URL oracle = new URL("http://www.yahoo.com/");
            URLConnection yc = oracle.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
            yc.getInputStream()));

            // Block from writer
            // Create file 
            FileWriter fstream = new FileWriter("out.txt");
            BufferedWriter out = new BufferedWriter(fstream);

            // Block from reader w/ small change
            String inputLine;
            while ((inputLine = in.readLine()) != null){
                // Write what you read
                out.write(inputLine);
                out.newLine();
            }
            in.close();

            // Block from writer
            //Close the output stream
            out.close();
        }catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:50:08.813

您正在将文本输出到控制台，为什么不将其写入文件？

```
public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL yahoo = new URL("http://www.yahoo.com/");
        URLConnection yc = yahoo.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));

        FileWriter fstream = new FileWriter("out.txt");
        BufferedWriter out = new BufferedWriter(fstream);

        String inputLine;
        while ((inputLine = in.readLine()) != null){
            out.write(inputLine);
            System.out.println(inputLine);
        }
        out.close();
        in.close();
    }
} 
```

现在将两个代码部分连接在一起以执行您想要的操作。我没有运行代码。检查它的正确性并添加错误处理代码。

# android - 如何更改 ListView 选定项的颜色（不是自定义 ListView）

> ID：10160215
> 
> 赞同：2
> 
> 时间：2012-04-15T07:10:12.477
> 
> 标签：android, listview

我知道如何更改 CUSTOM ListView 的选定项目的颜色。但我不知道如何更改普通 ListView 的颜色。

我试过这个：

> ```
> <ListView android:id="@id/android:list"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:drawSelectorOnTop="false"
>     android:listSelector="@drawable/listitemselector"> 
> ```

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:state_pressed="true"
    android:drawable="@color/light_blue"></item>
</selector> 
```

但这只是改变了整个 ListView 的颜色。我不想仅仅为了选择器颜色更改而实现 CUSTOM ListView。请为此提供解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T07:28:46.990

尝试使用形状作为背景，而不是简单的颜色。这是我的一个项目中的一个示例：

listselector_blue.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_pressed="true" android:drawable="@drawable/selector_state_blue"/>
   <item android:drawable="@color/transparent"/>
</selector> 
```

selector_state_blue.xml：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="270"
        android:endColor="#FF91B2FF"
        android:startColor="#4491B2FF" />

    <corners android:radius="10px" />

</shape> 
```

带有 ListView 的 Activity 的布局 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView android:id="@+id/list1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:listSelector="@drawable/listselector_blue" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T07:21:03.240

不要在 LISTVIEW 标记中使用此选择器。而是在列表视图中使用此选择器，即如果您使用 xml 来扩展列表视图（行视图），只需在该 xml 中使用此选择器。

# php - xDebug 找不到我的文件。总是在 localhost 中查找

> ID：10160216
> 
> 赞同：0
> 
> 时间：2012-04-15T07:11:47.473
> 
> 标签：php, xdebug, netbeans-7

1.  我正在运行 win7-64bit、NetBeans 7.1.1 和 WampServer 2.2（具有 xDebug）
2.  我已经配置了 php.ini（xdebug.remote_enable=on 等）
3.  我创建了一个目录（**名为 example.dev 的虚拟主机**）并添加了一个测试文件。(c:/wamp/example/test-xdebug.php)
4.  我在 NetBeans 中运行调试并显示以下 url：

    http:// **localhost** /example/test-xdebug.php?XDEBUG_SESSION_START=netbeans-xdebug

5.  这失败了。浏览器咳出以下错误消息。

    **未找到**。

    在此服务器上未找到请求的 URL /example/test-xdebug.php。

6.  我将**正确的路径**添加到虚拟主机，并且 xDebug**运行完美**：

    http://example.dev **/test-xdebug.php?XDEBUG_SESSION_START=netbeans-xdebug** _

尝试了我能想到的所有配置。如果这是一个 php.ini 配置问题，我肯定找不到它。如果它是 NetBeans 问题，则没有修改 i 的选项/界面（我可以找到）。

请照亮！

谢谢卧铺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:26:03.827

您是否在 PHP 配置中设置了 xdebug.remote_host 选项？例如：

`xdebug.remote_host="example.dev"`

另外，Netbeans 项目配置是否正确？转到文件 > 项目属性（或右键单击项目并单击属性），然后选择运行配置并检查项目 URL 字段。

# javascript - Div 上的 jQuery Click 事件，子 Div 除外

> ID：10160219
> 
> 赞同：28
> 
> 时间：2012-04-15T07:12:37.877
> 
> 标签：javascript, jquery, onclick

我有以下 HTML：

```
<div class="server" id="32">
  <a>Server Name</a>
  <div class="delete-server">X</div>
</div> 
```

我正在尝试这样做，因此当用户单击`server`div 时，它会弹出一个编辑对话框。问题只是在做：

```
 $(".server").click(function () {
     //Show edit dialog
 }); 
```

不起作用，因为如果他们单击删除的 X，它会弹出编辑对话框。怎样才能让整个div`server`除了div之外都有点击事件`delete-server`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-15T07:18:34.103

```
$(".server").on('click', ':not(.delete-server)', function (e) {
     e.stopPropagation()
     // Show edit dialog
}); 
```

这是小提琴：http: [//jsfiddle.net/9bzmz/3/](http://jsfiddle.net/9bzmz/3/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-15T07:14:21.047

只需检查触发事件的元素是什么：

```
$(".server").click(function(e) {
    if (!$(e.target).hasClass('delete-server')) {
        alert('Show dialog!');
    }
});​ 
```

[**现场演示**](http://jsfiddle.net/9bzmz/2/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-15T08:30:26.470

有一种替代方法可以解决此问题：

```
$(".server").click(function () {
    // show edit dialog
});
$(".delete-server").click(function (event) {
    // show delete dialog for $(this).closest(".server")
    event.stopPropagation();
}); 
```

只需确保发出的点击事件`.delete-server`不会冒泡到父元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T12:20:05.233

只有这对我有用。

`js_object`是元父的 jQuery 对象，例如`$('body')`

```
jq_object.on('click', '.js-parent :not(.js-child-1, .js-child-2)', function(event) {
    //your code
});

jq_object.on('click', '.js-child-1', function(event) {
    //your code
});

jq_object.on('click', '.js-child-2', function(event) {
    //your code
}); 
```

在你的情况下：

服务器——js-parent

删除服务器——js-child-1

```
jq_object.on('click', '.server :not(.delete-server)', function(event) {
    //your code
});

jq_object.on('click', '.delete-server', function(event) {
    //your code
}); 
```

# java - Solr - 访问 /solr/admin/ 的 HTTP 错误 500。原因：solr 配置严重错误

> ID：10160221
> 
> 赞同：0
> 
> 时间：2012-04-15T07:12:58.517
> 
> 标签：java, solr, django-haystack

主要警告如下：

Solr - 访问 /solr/admin/ 时出现 HTTP 错误 500 问题。原因：solr 配置中的严重错误。

引起：java.io.IOException：无法创建目录：/home/~solr/apache-solr-3.6.0/example/solr/./data/index

java.lang.RuntimeException：java.io.IOException：无法创建目录：/home/~solr/apache-solr-3.6.0/example/solr/./data/index

org.apache.solr.common.SolrException：没有创建核心，请检查日志是否有错误

试图克服 Solr 的第一个障碍，完成教程，并立即让门砰地一声关在我的脸上。有人有建议吗？谢谢。

顺便说一句，我正在使用 java jre1.6.0_31

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:00:19.300

问题解决了。我在 /home 目录中安装了 Solr，它归 root 所有。Java 无法创建目录或文件。将 Solr 移至 /mydir（在 /home 下一级），现在一切正常。

# c# - Tcp客户端服务器表单应用程序问题

> ID：10160227
> 
> 赞同：0
> 
> 时间：2012-04-15T07:13:22.013
> 
> 标签：c#, multithreading

我遇到了一个问题，那就是当我尝试从服务器写入多个客户端时，它一直在写入空字符串。我正在共享我的代码及其多个客户端服务器应用程序，其中客户端可以写入服务器，而服务器可以写入所有正在运行的客户端。写入服务器的客户端安静得很好。但服务器不是:(

服务器代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Net.Sockets;
using System.Threading;
using System.Collections;

namespace ServerGui
{
    public partial class Form1 : Form
    {
        TcpListener tcpListen;
        Thread listenThread;
        String read = "";
        ArrayList collect = new ArrayList();
        int counter = 0;
        ArrayList NS = new ArrayList();
        TcpClient general = null;
        readonly ManualResetEvent mre = new ManualResetEvent(false);

        public Form1()
        {
            InitializeComponent();
        }

        private void connectServerToolStripMenuItem_Click(object sender, EventArgs e)
        {
            tcpListen = new TcpListener(IPAddress.Any, 3000);
            listenThread = new Thread(new ThreadStart(ListenForClients));
            listenThread.Start();
            connectServerToolStripMenuItem.Enabled = false;
        }

        public void ListenForClients()
        {
            tcpListen.Start();

            while (true)
            {

                TcpClient client = tcpListen.AcceptTcpClient();
                collect.Insert(counter, client);
                general = (TcpClient)collect[counter];
                if (textBox1.InvokeRequired)
                {
                    textBox1.Invoke(new MethodInvoker(delegate { textBox1.AppendText(client.Client.LocalEndPoint.ToString() + "  Connected.");
                    textBox1.AppendText(Environment.NewLine); }));
                }
                else
                {
                    textBox1.AppendText(client.Client.LocalEndPoint.ToString() + "  Connected.");
                    textBox1.AppendText(Environment.NewLine);
                }
                Thread clientThread = new Thread(new ParameterizedThreadStart(Reader));
                clientThread.Start(collect[counter]);
                Thread clientThread1 = new Thread(new ParameterizedThreadStart(Writer));
                clientThread1.Start(collect[counter]);
                counter++;
            }
        }
        public void Reader(object client)
        {
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();
            StreamReader sr = new StreamReader(clientStream);
            while (true)
            {
                try
                {
                    read = sr.ReadLine();
                }
                catch
                {
                    if (textBox1.InvokeRequired)
                    {
                        textBox1.Invoke(new MethodInvoker(delegate
                        {
                              textBox1.AppendText(tcpClient.Client.LocalEndPoint.ToString() +
 " disconnected.");
                            textBox1.AppendText(Environment.NewLine);
                        }));
                    }
                    else
                    {
                        textBox1.AppendText(tcpClient.Client.LocalEndPoint.ToString() + " disconnected.");
                        textBox1.AppendText(Environment.NewLine);
                    }
                    return;
                }
                if (textBox1.InvokeRequired)
                {
                    textBox1.Invoke(new MethodInvoker(delegate
                    {
                        textBox1.AppendText("<" +         tcpClient.Client.LocalEndPoint.ToString() + "> saying: " + read);
                        textBox1.AppendText(Environment.NewLine);
                    }));
                }
                else 
                {
                    textBox1.AppendText("<" + tcpClient.Client.LocalEndPoint.ToString() + "> saying: " + read);
                    textBox1.AppendText(Environment.NewLine);
                }
            }

            tcpClient.Close();
        }

        public void Writer(object client)
        {
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream ns = tcpClient.GetStream();
            mre.WaitOne();
            while (true)
            {
                StreamWriter sw = new StreamWriter(ns);

                    string str = textBox2.Text;
                    sw.WriteLine(str);
                    sw.Flush();

                if (textBox2.InvokeRequired)
                {
                    textBox2.Invoke(new MethodInvoker(delegate 
                        {
                            textBox2.Clear();
                        }));
                }
                else
                textBox2.Clear();
                }
            tcpClient.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            mre.Set();
            textBox1.AppendText(textBox2.Text);
            textBox1.AppendText(Environment.NewLine);
            textBox2.Clear();
        }

        private void CheckKeys(object sender, System.Windows.Forms.KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)13)
            {
                mre.Set();
                textBox1.AppendText(textBox2.Text);
                textBox1.AppendText(Environment.NewLine);
                textBox2.Clear();
            }
        }

        private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }
    }
} 
```

客户端代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.IO;

namespace ClientGcui
{
    public partial class Form1 : Form
    {
        NetworkStream general = null;
        public Form1()
        {
            InitializeComponent();

        }

        private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void connectToServerToolStripMenuItem_Click(object sender, EventArgs e)
        {
            String str = "";
            TcpClient client = new TcpClient();
            IPEndPoint server = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 3000);
            client.Connect(server);
            textBox1.AppendText("Connected to server");
            textBox1.AppendText(Environment.NewLine);
            NetworkStream clientStream = client.GetStream();
            general = clientStream;
            StreamReader sr = new StreamReader(clientStream);
            StreamWriter sw = new StreamWriter(clientStream);
            Thread reader = new Thread(new ParameterizedThreadStart(readserver));
            reader.Start(sr);
        }
        public void readserver(object client)
        {
            StreamReader sr = (StreamReader)client;
            string read = "";
            while (true)
            {
                try
                {
                    read = sr.ReadLine();
                }
                catch
                {
                    if (textBox1.InvokeRequired)
                    {
                        textBox1.Invoke(new MethodInvoker(delegate
                        {
                            textBox1.AppendText("Disconnected from Server.");
                            textBox1.AppendText(Environment.NewLine);
                        }));
                    }
                    else
                    {
                        textBox1.AppendText("Disconnected from Server.");
                        textBox1.AppendText(Environment.NewLine);
                    }
                }
                if (textBox1.InvokeRequired)
                {
                    textBox1.Invoke(new MethodInvoker(delegate
                    {
                        textBox1.AppendText(sr.ReadLine());
                        textBox1.AppendText(Environment.NewLine);
                    }));
                }
                else
                {
                    textBox1.AppendText(sr.ReadLine());
                    textBox1.AppendText(Environment.NewLine);
                }
                }
            sr.Close();
            }

        private void button1_Click(object sender, EventArgs e)
        {
            StreamWriter sw = new StreamWriter(general);
            sw.WriteLine(textBox2.Text);
            sw.Flush();
            textBox1.AppendText(textBox2.Text);
            textBox1.AppendText(Environment.NewLine);
            textBox2.Clear();
        }

        private void CheckKeys(object sender, System.Windows.Forms.KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)13)
            {
                StreamWriter sw = new StreamWriter(general);
                sw.WriteLine(textBox2.Text);
                sw.Flush();
                textBox1.AppendText(textBox2.Text);
                textBox1.AppendText(Environment.NewLine);
                textBox2.Clear();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:44:43.243

'textBox1'、'textbox2'、'button1' 是什么？在这段代码中似乎没有一个特定于应用程序的组件名称 - 你知道，这些东西让有经验的开发人员快速浏览帖子时可以轻松快速地理解它。为什么在此处发布之前没有将组件名称编辑为有意义的内容？并不是说你的英语不好，（我可以理解），你的问题很清楚。

无论如何，您的作家没有调用（）读取 textbox2 的内容，然后第一个清除 textBox2 的作家赢得了比赛，并塞满了所有其他没有阅读内容的作家。

..在 CheckKeys 中，您正在向 mre 发出信号，然后在赢得比赛的作家甚至有机会阅读它之前清除文本框2。

我看不到您在哪里重置 mre，无论如何，这是使用错误的同步对象。

您不能吝啬多线程代码。你必须正确地做到这一点。

与您的作者线程进行通信有一些可能性。

1) 使用一个受锁保护、引用计数的对象来保留来自 textbox2 的传出文本，直到所有作者都完成了它。这意味着您知道有多少作家 - 目前您无法跟踪。这样做的问题是，如果不删除所有 refCount 被初始化为包含的“持有”实例的 refCount，编写者就不能退出。我怀疑你会做对。

2) 使用一个对象来保留来自 textbox2 的传出文本。此外，将此实例提交到一个超时队列，该队列会保留一个引用，例如 10 分钟，到那时所有作者肯定都会使用它。这是一种合理的做法。

3) 使用一个对象为每个作者保留来自 textbox2 的传出文本，并在生产者-消费者队列上向每个作者提交不同的副本。这意味着您需要在客户端连接和断开连接时必须保持最新的编写器向量。

4）我在写其他三个的时候想到了第四个方法，但我现在忘记了。

我会选择（2） - 最少的事情不工作的机会。

哦 - 忘了，发信号给所有客户端线程。如果您使用 MRE，您将在哪里重置它？您如何判断所有客户何时已阅读内容并即将再次等待？你不能，我怀疑这就是你的代码中没有 resetEvent 的原因——你不知道把它放在哪里。

考虑一下，考虑到你有一种 GC 语言，给每个编写器自己的 BlockingCollection 并将每个文本对象的引用排队给所有编写器可能是最简单和最安全的。再次，我们回到一个（线程安全的）写入器集合，这些写入器在连接时放入新条目，在断开连接时删除。即使使用线程安全集合，您也必须期待并捕获奇怪的异常，因为主线程试图发出一个文本对象 ref。对于刚刚断开连接的作家，还没有完全从收藏中删除自己。

此外，每个作者的线程有点矫枉过正。对于最大。客户，您最好使用 threadPool 进行写入。然后，您只需要一个“SeverClientSocket”类，它有自己的读取线程、一个用于添加主线程的 queueUpForWrite() 方法和一个用于调用池线程的 writeQueue() 方法。

# qt - Qt Designer 到另一个选项卡的快捷方式

> ID：10160232
> 
> 赞同：4
> 
> 时间：2012-04-15T07:14:29.110
> 
> 标签：qt, qt4, qt-designer

我想知道是否可以创建自己的 QTabWidget 快捷键。因此，如果我在字母前面加上一个 & 符号，这意味着 ALT+'letter' 将显示该选项卡；但是，我想要它以便 CTRL+'letter' 将显示该选项卡（而不是 ALT）。

在 Qt Designer 中是否有一种简单的方法可以做到这一点？如果没有，是否有一种简单的方法可以在代码中做到这一点？QTabWidget 似乎没有任何设置快捷方式的直接方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T07:41:44.333

我不知道通过设计器执行此操作的方法，对此不熟悉。[`QShortcut`](http://qt-project.org/doc/qt-4.7/qshortcut.html)不过，您可以在代码中相当容易地做到这一点。

这是一个虚拟小部件来说明这一点。按`Ctrl+a`/`Ctrl+b`在选项卡之间切换。

```
#include <QtGui>

class W: public QWidget
{
    Q_OBJECT

    public:
      W(QWidget *parent=0): QWidget(parent)
      {
        // Create a dummy tab widget thing
        QTabWidget *tw = new QTabWidget(this);
        QLabel *l1 = new QLabel("hello");
        QLabel *l2 = new QLabel("world");
        tw->addTab(l1, "one");
        tw->addTab(l2, "two");
        QHBoxLayout *l = new QHBoxLayout;
        l->addWidget(tw);
        setLayout(l);

        // Setup a signal mapper to avoid creating custom slots for each tab
        QSignalMapper *m = new QSignalMapper(this);

        // Setup the shortcut for the first tab
        QShortcut *s1 = new QShortcut(QKeySequence("Ctrl+a"), this);
        connect(s1, SIGNAL(activated()), m, SLOT(map()));
        m->setMapping(s1, 0);

        // Setup the shortcut for the second tab
        QShortcut *s2 = new QShortcut(QKeySequence("Ctrl+b"), this);
        connect(s2, SIGNAL(activated()), m, SLOT(map()));
        m->setMapping(s2, 1);

        // Wire the signal mapper to the tab widget index change slot
        connect(m, SIGNAL(mapped(int)), tw, SLOT(setCurrentIndex(int)));
      }
}; 
```

[这并不是作为小部件布局最佳实践的示例......只是为了说明将快捷方式序列连接到选项卡更改的一种方法。]

# php - ping Web 服务器的服务

> ID：10160238
> 
> 赞同：1
> 
> 时间：2012-04-15T07:15:49.593
> 
> 标签：php, python, c, url, ip

我有一个运行 PHP 软件的专用网络服务器，它需要自动收集和更新我的几个 Windows 和可能具有动态 IP 的 Linux 机器的 IP（与 no-ip.com 客户端的想法大致相同）。我认为最简单的做法是在每台机器上运行一个服务，它只是从网络服务器中提取一个唯一的 URL，然后可以查找客户端 IP 并将其与 URL 等匹配。

```
 $_SERVER["HTTP_CLIENT_IP"] 
```

构建客户端服务的最佳语言/库/环境是什么，它可以通过轻松访问机器的外部 IP 发出 URL 请求（检查动态 IP 的更改以免淹没网络服务器）？它不需要什么花哨的东西，它甚至不需要从服务器读取任何东西，它只需要发出 URL 请求。

除了 Web 编程之外，我还有一些 Python 和 C 以及其他一些方面的经验。我可以阅读有关该主题的任何指针或资源将不胜感激。还有，我是不是想多了？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:48:59.643

您可以编写一个带有 wget 调用的 shell 脚本，然后在循环中休眠。

wget 执行 http 请求，它适用于 windows，并且已经安装在所有/一些 unix 机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T10:53:11.520

机械化对于在 Python 中发出 URL 请求来说太过分了。这真的很容易：

```
from urllib2 import urlopen
urlopen("my://url").read() 
```

第一行可能因您的 Python 版本而异（例如，它`urllib.request`在 Python 3 中。）

那里有数百种“我的 IP 是什么”服务；或者你甚至可以自己写！将其中之一插入读取的 URL 以获取 IP。您必须轮询才能确定它何时发生变化，因为您无法在路由器上运行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:42:30.953

如果您已经有某种方法来进行 URL 请求，请每 10 分钟向此页面执行一次：

[http://checkip.dyndns.org/Current%20IP%20Check.htm](http://checkip.dyndns.org/Current%20IP%20Check.htm)

它会告诉你“当前 IP 地址：XXX.XXX.XXX.XXX”，你只需要提取一些字符串数据。

（你只会淹没 whatsmyip 网络服务器，而不是你自己的！）

乐意效劳

自我记录

# c - Pthread Xlib 编程

> ID：10160245
> 
> 赞同：1
> 
> 时间：2012-04-15T07:18:38.353
> 
> 标签：c, pthreads, x11, xlib

我对 pthread 和 xlib 编程非常陌生。我试图以相反的方向绘制和移动两组矩形，但是当我运行我的代码时，我的问题只有一个线程被执行，而另一个被忽略。

我尝试了几种选择，但无济于事。任何建议将不胜感激。

我已经包含了我的源代码。

谢谢。

编译：gcc -o Demofinal Demofinal.c -lpthread -lX11

运行：./Demofinal

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/Xos.h>
#include <X11/Xatom.h>
#include <X11/keysym.h>
#include <pthread.h>
//Compile gcc -o Demofinal Demofinal.c -lpthread -lX11
//Run ./Demofinal

Display *dis;
Window win;
XEvent report;
GC green_gc;
XColor green_col;
Colormap colormap;
pthread_mutex_t mutexsum;

char green[] = "#00FF00";
void *createMoveLogs( void *ptr );
typedef struct str_thdata
{
int xval;
int yval;
int dir;
} thdata;

int main() {

pthread_t mvleft, mvright;
thdata data1, data2;        

/* initialize data to pass to thread 1 and 2*/
    data1.xval = 600;
    data1.yval = 115;
    data1.dir = 0;

    data2.xval = 5;
    data2.yval = 250;
    data2.dir = 1;

dis = XOpenDisplay(NULL);
win = XCreateSimpleWindow(dis, RootWindow(dis, 0), 1, 1, 550, 550, 0, WhitePixel (dis, 0), WhitePixel(dis, 0));
XMapWindow(dis, win);
colormap = DefaultColormap(dis, 0);
green_gc = XCreateGC(dis, win, 0, 0);
XParseColor(dis, colormap, green, &green_col);
XAllocColor(dis, colormap, &green_col);
XSetForeground(dis, green_gc, green_col.pixel);

pthread_create( &mvleft, NULL, createMoveLogs, (void*) &data1);//thread 1 move right to left
pthread_create( &mvright, NULL, createMoveLogs, (void*) &data2);//thread 2 move left to right
pthread_join(mvleft, NULL);
pthread_join(mvright, NULL);    
return 0;
   }

  void *createMoveLogs( void *ptr )
  {
thdata *data;            
    data = (thdata *) ptr;

    int x= data->xval; int y = data->yval; int i;
int direction =  data->dir;
//check if the direction to move == left
if(direction == 0){
    pthread_mutex_lock(&mutexsum);
    for(i=0; i<=600; i++){
        XDrawRectangle(dis, win, green_gc, x, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x+200, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x+400, y, 145, 50);
        x-=10;
        if (x==-500){x=data->xval; i=0;}

        usleep(100000);
        XFlush(dis);
        XClearWindow(dis, win);
    } 
pthread_mutex_unlock(&mutexsum);
}else if(direction == 1){
    pthread_mutex_lock(&mutexsum);
    for(i=0; i<=600; i++){

        XDrawRectangle(dis, win, green_gc, x, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x-200, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x-400, y, 145, 50);
        x+=10;
        if (x==855){x=5; i=0;}
        usleep(100000);
        XFlush(dis);
        XClearWindow(dis, win);
    } 
    pthread_mutex_lock(&mutexsum);
  }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T21:10:44.197

# 不要运行这是因为您对闪光灯敏感。

```
XInitThreads(); 
...

if(direction == 0){
    for(i=0; i<=600; i++){
        pthread_mutex_lock(&mutexsum);
        printf ("Thread %d\n", direction);
        XDrawRectangle(dis, win, green_gc, x, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x+200, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x+400, y, 145, 50);
        x-=10;
        if (x==-500){x=data->xval; i=0;}

        XFlush(dis);
        XClearWindow(dis, win);
        usleep(50000);
        pthread_mutex_unlock(&mutexsum);
        usleep(50000);
    }
}else if(direction == 1){
    for(i=0; i<=600; i++){
        pthread_mutex_lock(&mutexsum);
        printf ("Thread %d\n", direction);
        XDrawRectangle(dis, win, green_gc, x, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x-200, y, 145, 50);
        XDrawRectangle(dis, win, green_gc, x-400, y, 145, 50);
        x+=10;
        if (x==855){x=5; i=0;}
        XFlush(dis);
        XClearWindow(dis, win);
        usleep(50000);
        pthread_mutex_unlock(&mutexsum);
        usleep(50000);
    }
} 
```

这将显示两组移动矩形。当然，该方法是完全野蛮的，因为`XClearWindow()`会导致不断的闪烁。在实际程序中，每个线程将负责清除旧框架中自己的部分，而不会触及其他部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T02:38:17.900

只有在调用任何其他 Xlib 函数*之前调用*[XInitThreads()](http://www.x.org/releases/X11R7.7/doc/man/man3/XInitThreads.3.xhtml) 时，Xlib 对来自多个线程的调用的支持才有效。即使这样，仍然存在一些错误，但没有它，就不会尝试在线程之间进行适当的锁定或同步。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:25:34.263

*您在互斥锁内部*有循环和`usleep()`调用，这意味着第一个执行的线程将永远锁定另一个线程。*

# php - 需要明确 CAS 基本配置

> ID：10160246
> 
> 赞同：0
> 
> 时间：2012-04-15T07:18:53.333
> 
> 标签：php, login, single-sign-on, cas, accounts

我正在尝试使用 CAS 作为我的单点登录服务，但我真的很难理解基础知识。这就是我发出请求的方式：

起始页：index.php：

```
<?php

include_once('../accounts/cas/config.php');
include_once('../accounts/cas/CAS.php');
phpCAS::setDebug();
phpCAS::client(CAS_VERSION_2_0, 'www.domain.com', 443, '/accounts');
phpCAS::setNoCasServerValidation();
phpCAS::forceAuthentication();

if (isset($_REQUEST['logout'])) {
    phpCAS::logout();
}

if (phpCAS::isAuthenticated()) {
    $name = phpCAS::getUser();
}

?> 
```

当我将浏览器指向此页面时，它会重定向到此 URL：`https://www.domain.com/accounts/login?service=https://www.domain.com`

我为此请求创建了一个文件`accounts/login/index.php`，但我不知道其中必须包含什么代码。我必须编写一个 html 表单来登录用户吗？或者 CAS 会为我做这件事吗？

我的问题是我真的缺少基础知识，我找不到任何我可以理解的文档。我的文件结构是这样的：

```
/my_app (accessible via: https://www.domain.com)
    /index.php
/accounts
    /cas
        /config.php
        /CAS.php
    /login
        /index.php
    /certificate
        /domain.crt 
```

对此的任何启示都将受到高度赞赏（甚至是我可以遵循的教程/示例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:15:37.970

您需要一个在 www.domain.com/accounts 上运行的 CAS 服务器，它将提供登录表单。

[http://www.jasig.org/cas/download](http://www.jasig.org/cas/download)

# powershell - 用powershell合并两个文本文件

> ID：10160248
> 
> 赞同：8
> 
> 时间：2012-04-15T07:19:00.793
> 
> 标签：powershell

我有两个包含数据的文本文件。

第一个文本文件包含我的文件的完整路径的大列表。d:\cat\cat1.txt

```
d:\test\file1-1.txt
d:\test\file1-2.txt
....
d:\test\file1-N.txt 
```

第二个文本文件包含我的 \files 的完整路径的简短列表

d:\cat\file\cat2.txt

```
d:\test\file2-1.txt
d:\test\file2-2.txt 
```

我需要第三个文件，其中包含

```
d:\test\file1-1.txt
d:\test\file1-2.txt
d:\test\file2-1.txt
d:\test\file1-3.txt
d:\test\file1-4.txt
d:\test\file2-2.txt
d:\test\file1-5.txt
d:\test\file1-6.txt
d:\test\file2-1.txt 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T12:10:26.357

如果要合并多个文件（ 2 个或更多），可以执行以下操作：

```
gc d:\cat\cat1.txt,d:\cat\file\cat2.txt | out-file d:\cat\combinedcat.txt 
```

从你的例子中不清楚你想要什么样的“特定”组合，所以你可能想解释一下，但是组合文件的逻辑就像上面一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T07:56:57.570

获取两个文件的内容并将输出保存到一个新文件：

```
Get-ChildItem d:\cat\cat1.txt,d:\cat\file\cat2.txt | 
  Get-Content | Out-File d:\cat\cat3.txt 
```

# extjs - ExtJS4 Panel 的 header 总是小于 body

> ID：10160256
> 
> 赞同：2
> 
> 时间：2012-04-15T07:19:37.020
> 
> 标签：extjs, extjs4, panel

我是 ExtJS4 的新手。我正在 ExtJs4 Docs 中测试一些简单的演示。我发现 Panel 的 header 总是比 panel 的 body 小一点，而且里面的 panel 也更小。标题总是比使用 Firebug 测量的正文短 11 像素。我在 FF、IE8、Chrome 中测试代码，它们都将其呈现为屏幕截图显示的内容（图片链接）。对不起我的英语不好。我对这个问题感到困惑，请帮助我。

屏幕截图链接：

[http://i.stack.imgur.com/vb2Xo.jpg](http://i.stack.imgur.com/vb2Xo.jpg)

```
 or 
```

[http://www.tu265.com/di-c870adf0409aa61a99c774186dd9afa8.jpg](http://www.tu265.com/di-c870adf0409aa61a99c774186dd9afa8.jpg)

我的js代码：

```
Ext.create('Ext.panel.Panel', {
    title: 'container panel',
    renderTo: 'container',
    width: 400,
    height: 300,
    layout: 'accordion',
    items: [{
        tools: [{ type: 'gear', handler: function () {
            Ext.Msg.alert('msgWindow', 'btn is Clicked');
        }
        }, { type: 'refresh'}],
        title: 'panel1',
        xtype: "panel",
        html: "insidePanel1"

    }, {
        title: 'panel2',
        xtype: "panel",
        html: "insidePanel2"
    }, {
        id: 'panel3',
        title: 'panel3',
        xtype: "panel",
        html: "insidePanel3"
    }]
});
Ext.create("Ext.Button", {
    renderTo: 'container',
    text: "open panel3",
    handler: function () {
        Ext.getCmp('panel3').expand(true);
    }
}); 
```

html代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Layouts</title>
<link href="../../ext-4.0.7-gpl/resources/css/ext-all.css" rel="stylesheet" type="text/css" />
<script src="../../ext-4.0.7-gpl/ext-all-debug.js" type="text/javascript"></script>
</head>
<body>
<div id="container"></div>
<script type="text/javascript">
//js code
</script>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:07:05.633

您的代码在我的 PC（FF、IE 8 和 Chrome）上运行良好。所以我认为您可以通过以下几种方式进行尝试：

*   `ext-all-gray.css`或`ext-all-access.css`代替`ext-all.css`.
*   `ext-all.js`而不是`ext-all-debug.js`.
*   `ext-4.0.7-gpl`从 Sencha 网站重新下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:53:43.757

例如，您可以使用自己的 css 文件和这样的规则

```
.x-panel-body .x-panel-header-text{
    font-size:12px;
    font-weight:bold;
}​ 
```

看一个[工作示例](http://jsfiddle.net/SJpg2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:04:21.357

我有类似的事情。尝试设置 scopeResetCSS = false，有时它带有演示示例，所以只需评论它们。

```
//Ext.scopeResetCSS = true; 
```

# java - 如何在 libgdx 中使用单个网格创建立方体

> ID：10160257
> 
> 赞同：3
> 
> 时间：2012-04-15T07:19:41.137
> 
> 标签：java, libgdx

使用 libgdx 绘制一个有 6 个边的立方体需要 6 个网格。但它会在渲染时根据每个网格增加时间。

我的代码：

```
for(int i=0; i<6; i++)
{

    faces[i].setvertices(new float[] {x,y,z,color};
} 
```

那么，我们可以使用单个网格而不是 6 个网格创建一个立方体吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:36:14.887

当然，您可以为立方体创建单个网格。查看 [libGDX](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/gles2/SimpleVertexShader.java)测试中的 SimpleVertexShader 测试。它使用[Shapes.genCube()](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/gles2/Shapes.java#L24)创建立方体网格。

# ruby-on-rails-3.1 - 新安装的 gem (FactoryGirl) 导致 WEBrick 退出（弃用警告）

> ID：10160259
> 
> 赞同：1
> 
> 时间：2012-04-15T07:19:55.277
> 
> 标签：ruby-on-rails-3.1, rubygems, factory-bot, webrick

尝试启动 WEBrick：

`rails s`

```
=> Booting WEBrick
=> Rails 3.1.1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
DEPRECATION WARNING: Change Factory.define to FactoryGirl.define
Exiting
/home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/syntax/default.rb:6:in `define': wrong number of arguments (1 for 0) (ArgumentError)
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/deprecated.rb:5:in `method_missing' 
```

这让我感到惊讶，因为一切都是全新安装的，并且相同的 gemset 非常适合共享存储库的其他人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:12:15.323

来自 ThoughtBot 网站[http://robots.thoughtbot.com/post/7176629856/factory-girls-new-look](http://robots.thoughtbot.com/post/7176629856/factory-girls-new-look)

请注意[这个](https://github.com/corydeppen/rails3-mongoid-devise/commit/cc0268c4400e17c096d75db935e9732cab987a66)差异，看起来他们遇到了同样的问题。

`Factory.define`当你应该打电话时，你或某人正在打电话的地方`FactoryGirl.define`

`grep -ir 'Factory.define' *`从应用程序根目录中应该可以为您提供有关您犯错误的确切位置的更多详细信息。如果它没有返回任何东西，那么您就知道它不是您的应用程序，而是一些 Gem（这是跟踪显示的内容）。

如果是这种情况，我会尝试`gem uninstall factory_girl`获取`gem install factory_girl`新版本。

# php - PHP多维数组或更好的选择？

> ID：10160260
> 
> 赞同：0
> 
> 时间：2012-04-15T07:20:03.483
> 
> 标签：php, arrays

我有一个代码，它从表格 A 中获取发布的数据，然后找到商品的价格并显示它们。现在我需要在第二个表格的正文中使用以下数据做更多的事情： 项目名称 项目数量 项目价格

代码在这里：

```
<?php
echo "<div style='width:30%; height:auto; border: 2px solid;'>";
    echo "<h1>The Items Are...</h1><br>";
    //array that will hold the sum of each item cost
    $totalAmountArray = array();

    foreach ($_POST['basket'] as $name => $value) 
    {
        //indexer for totalAmountArray
        $i=0;
        if($value > 0){
                //echo $name . ": " . $value . "<br>";

            $itemPrice;
            //reassign 
            $itemName = $name;

            $itemQty = $value;
            //sql connection..
            mysql_connect();
            mysql_select_db("xxxxxx");
            $result = mysql_query("SELECT * FROM pricing WHERE item = '".$name."'");
            while($row = mysql_fetch_array($result)){
                $itemPrice = $row['price'];
                /*DEBUGGING*/
                echo "Item Name: <b>".$itemName . " </b>@ ";
                echo "<b>".$itemPrice ." </b>X ".$itemQty."<br>";
            }//end of while loop

            //multiply to get total for this item - store in temp
            $temp = $itemQty * $itemPrice;
            //store temp at index i in totalAmountArray
            array_push($totalAmountArray, $temp);
            unset($result);
            unset($itemPrice);
            unset($itemQty);
            unset($temp);
        }//end of if-statement
    }//end of foreach
    echo "<h1>Total Amount:<br></h1> ";
    //print_r($totalAmountArray);
    $sum;
    foreach($totalAmountArray as $perItemPrice){
        $sum += $perItemPrice;
    }
    echo "<b>SR. ".$sum."</b>";
echo "</div>";
?> 
```

我正在考虑将从上面的 foreach 返回的所有详细信息存储到多维数组中以具有如下内容：

```
[0] => itemName => itemQty => itemPrice <br>
[1] => itemName => itemQty => itemPrice <br>
[2] => itemName => itemQty => itemPrice <br>
[3] => itemName => itemQty => itemPrice <br>
..... 
```

这会是最好的方法吗？怎么办？在实践中我真的不熟悉多维数组（仅在理论上）。

非常感谢您的帮助和建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:35:50.357

持有一个数组的数组。制作多维数组可能会有些混乱。对于每个项目，它都包含一个包含所有数据的数组。另一种方法是创建一个对象（类），比如“项目”，它保存表单中的每条数据。然后将每个表单提交对象放入一个数组中进行排序和检索。

所以它会是

```
[sudo PHP]
class foo
{
     int formID
     string submitterName
     string bar
}

foo->formID = $row['id']

myArray[lastPosition + 1] = foo

for (int i = 0; i < foo.length; i++)
{
    echo foo[i]->formID 
} 
```

我已经好几年没有接触过 PHP了，对看起来怪异的半 PHP 代码感到抱歉，只是想我可能会很快给出答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:39:56.500

我可能是错的，但既然你想要一个建议，我只是不明白为什么你会在这种情况下使用二维数组（虽然我可能误解了你的问题并且可能错了，但我认为解决你的问题的最佳方法是在该类中创建一个类 Item 有一个变量 itemName itemQty itemPrice 然后将有关每个对象项的信息存储到一个数组中

# php - php数组排序包含的值

> ID：10160261
> 
> 赞同：1
> 
> 时间：2012-04-15T07:20:21.950
> 
> 标签：php, arrays, sorting, mongodb

好的，首先，我什至不确定标题是否正确，如果是，我很抱歉。

我在这里有这个循环，它是 MongoDB 查询的结果：

```
foreach($cursor as $obj) {
   $monster = $obj["type"];
   $strenght = $obj["strenght"];
   $obj["value"] = rand(5, 15);
} 
```

现在，我放在`rand`那里以表示`value`每次迭代的更改。现在我希望这个数组在打印时按那个排序`$obj["value"]`，并且能够选择是升序还是降序。

* * *

好的，我试过这个

```
foreach($cursor as $obj) {
   $type = $obj["monster"];
   $strenght = $obj["strenght"];
   $obj["value"] = rand(5, 15);

   $newarr[] = $obj;
}

    usort($newarr, "cmp");
    function cmp($a, $b)
    { return $b['value'] < $a['value']; }

    foreach ($newarr as $obj)
    {
        echo $obj['value'] . $obj['type'] . "<br/>";
    } 
```

正如我所料，

```
 $obj["value"] = rand(5, 15); 
```

事实上，$newarr 不会在每次迭代中丢失，但问题是它根本不对它们进行排序。这些项目的打印顺序与它们放入数组中的顺序相同。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:25:07.917

首先，通过这样做，`$obj["value"] = rand(..)`您将多次分配具有不同值的相同数组变量。到循环结束时，变量将只包含**一个**值。

你可能试图这样做

```
$obj["value"][] = rand(5, 15); //This adds a new random item to the array contained in $obj['value'] each time 
```

当你有一个数组项时，你可以使用[sort()](http://php.net/manual/en/function.sort.php) ^([ascending]) function [rsort()](http://www.php.net/manual/en/function.rsort.php) ^([Descending[)

```
$sorted = sort($obj["value"]);
print_r($sorted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:25:12.180

```
function mysort ($arr,$d='asc') { 
        global $dir; 
        $dir = $d; 
        uasort($arr, 'cmp'); 
        return ($arr); 
    } 
    function cmp ($a, $b) {
        global $dir;
        if($a['value'] == $b['value']) return 0;
        else  {
            if(strtolower($dir) == 'asc')
                return ($a['value'] > $b['value']) ? 1 : -1;
            else if(strtolower($dir) == 'disc')
                return ($a['value'] > $b['value']) ? -1 : 1;

        }
    } 
    print_r(mysort($obj, 'disc')); 
```

**根据您的更新**

试试这个`cmp()`

```
function cmp($a, $b) {
    if($a['value'] == $b['value']) return 0;
    return $a['value'] > $b['value'] ? 1 : -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:25:19.667

你失去了这个价值

```
 $obj["value"] = rand(5, 15); 
```

我猜在每次迭代中。检查此链接以获取 php foreach 循环：

[PHP FOREACH](http://php.net/manual/en/control-structures.foreach.php)

对于排序你可以使用php的排序功能：

[PHP 排序](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:54:47.483

你的 foreach 不会真正产生任何有用的东西。所以我创建了一个示例数组来说明原理：

```
$array = array(
    array(
        'type' => 'type a',
        'strength' => '10',
        'value' => '12',
    ),
    array(
        'type' => 'type b',
        'strength' => '12',
        'value' => '15',
    ),
    array(
        'type' => 'type c',
        'strength' => '11',
        'value' => '6',
    ),
); 
```

现在你希望这个多维数组按值排序，所以如果它是降序排列的，你会得到一个 b 类型的列表，输入 a，然后输入 c。

[您正在寻找](http://php.net/manual/en/function.array-multisort.php)的功能是 array_multisort() 。这是一个如何在这个特定实例上使用它的示例。首先，您需要为函数创建该排序器数组来完成它的工作。然后只需使用 multisort 就完成了。

```
$sorter = array();

foreach ($array as $key => $row) {
    $sorter[$key] = $row['value'];
}

array_multisort($sorter, SORT_DESC, $array); 
```

现在 $array 已根据规范使用。使用 SORT_ASC 反转排序。

**添加的代码：**为了完整起见，这里是您的 foreach 代码，从技术上讲，它应该首先创建您想要的内容：

```
$array = array();

foreach($cursor as $obj) {
   $row = array();

   $row['type']  = $obj['type'];
   $row['strength']  = $obj['strenght'];
   $row['value'] = rand(5, 15);

   $array[] = $row;
} 
```

你的力量也有错别字:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T10:09:21.707

由于您使用的是整数值，因此您可以简单地使用它：

```
usort($newarr, "cmp");
function cmp($a, $b) {
    return $b['value'] - $a['value'];
} 
```

它将按降序对您的键进行排序，如果您想将其更改为升序，请交换 $a 和 $b。

* * *

排序函数通常期望比较函数在项目相同时返回值 0，如果第一个参数小于第二个参数，则返回 <0（在特定情况下无论 less 意味着什么），如果第一个参数大于，则返回 >0第二。

对于整数值，这可以简单地写成 $a - $b 或 $b - $a。

# css - 画一条在图像拉伸时不会变粗的线

> ID：10160262
> 
> 赞同：21
> 
> 时间：2012-04-15T07:20:42.567
> 
> 标签：css, svg

SVG中有没有办法在拉伸图像时绘制一条保持细线？

我使用 SVG 图像作为 CSS 背景，如下所示：

```
<svg ... preserveAspectRatio="none" viewBox="0 0 15 15">
  <line x1="0" y1="15" x2="15" y2="0"
        color="#000" stroke="#333" stroke-width="1" />
</svg> 
```

（对角线）。我通过一个矩形元素拉伸这个图像，当元素更大时，线条变得更粗，但我需要一条始终很细的线条。

可能的？类似于闪存中的“细”线。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-15T09:16:49.373

在实现 SVG 1.2T 的浏览器中，您可以使用[非缩放笔画](http://www.w3.org/TR/SVGTiny12/painting.html#NonScalingStroke) Opera 和 Webkit 支持此功能，Firefox 15 版也支持此功能。

```
<!-- via property -->
<line … vector-effect="non-scaling-stroke" />

<!-- via CSS -->
<style>
  line { vector-effect:non-scaling-stroke }
</style>
<line … /> 
```

# lotus-notes - 引用 Preferences 环境值

> ID：10160263
> 
> 赞同：1
> 
> 时间：2012-04-15T07:20:43.100
> 
> 标签：lotus-notes, lotusscript

在回答[检查计划的本地代理是否可以在 Notes 客户端中运行](https://stackoverflow.com/questions/10151443/check-if-scheduled-local-agents-can-run-in-notes-client)的问题时，我发现[Javed Khan 的论坛帖子](http://www-10.lotus.com/ldd/nd6forum.nsf/869c7412fe5d56b7852569fa007826e3/d35785d5b03f54cb852574f8002eea0b?OpenDocument)表明这可以通过检查`Preferences`环境值中的某个位是否已设置来进行检查。

```
Const LOCAL_AGENTS = &H8000000
Call Session.SetEnvironmentVar("Preferences", Cstr( Clng( Session.GetEnvironmentValue( "Preferences", True )) Or LOCAL_AGENTS ), True ) 
```

“计划的本地代理”设置显然是第 28 位。

我的问题是：是否有任何关于其他位含义的在线文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:46:43.700

这是列表，取自[http://www-10.lotus.com/ldd/46dom.nsf/55c38d716d632d9b8525689b005ba1c0/e870840587eed796852568f6006facde?OpenDocument](http://www-10.lotus.com/ldd/46dom.nsf/55c38d716d632d9b8525689b005ba1c0/e870840587eed796852568f6006facde?OpenDocument)

*   0 <0> = 最大化时将工作区保留在后面（启用=1）
*   1 <2> = 扫描未读
*   2 <4> =
*   3 <8> = 大字体
*   4 <16> =
*   5 <32> = 使 Internet URL (http//:) 成为热点
*   6 <64> =
*   7 <128> = 仅限打字机字体
*   8 <256> = 单色显示
*   9 <512> = 斯堪的纳维亚排序规则
*   10 <1024> =
*   11 <2048> =
*   12 <4096> = 签署已发送邮件（已启用 (1)）
*   13 <8192> = 加密发送的邮件
*   14 <16384> = 公制 (1)/英制 (0) 测量
*   15 <32768> = 最后排序的数字
*   16 <65536> = 法国套管
*   17 <131072> = 空垃圾文件夹（在 db close=0 期间提示/总是在 db close=1/manual=1 期间提示
*   18 <262144> = 每 x 分钟检查一次新邮件（启用=0）
*   19 <524288> = 启用本地后台索引
*   20 <1048576> = 加密保存的邮件
*   21 <2097152> =
*   22 <4194304> =
*   23 <8388608> = 右键双击关闭窗口
*   24 <16777216> = 提示位置
*   25 <33554432> =
*   26 <67108864> = 在预览窗格中打开时将文档标记为已读
*   27 <134217728> = 启用本地计划代理
*   28 <268435456> = 保存已发送邮件（始终提示=10/不保留副本=00/始终保留副本=01）
*   29 <536870912> =
*   30 <1073741824> = 新邮件通知（无=10/可听=00/可视=01）
*   31 <2147483648> =

# java - 如何以编程方式将图像设置为墙纸？

> ID：10160267
> 
> 赞同：6
> 
> 时间：2012-04-15T07:21:44.080
> 
> 标签：java, android, wallpaper

我一直在开发需要将图像设置为墙纸的应用程序。

**代码：**

```
WallpaperManager m=WallpaperManager.getInstance(this);

String s=Environment.getExternalStorageDirectory().getAbsolutePath()+"/1.jpg";
File f=new File(s);
Log.e("exist", String.valueOf(f.exists()));
try {
        InputStream is=new BufferedInputStream(new FileInputStream(s));
        m.setBitmap(BitmapFactory.decodeFile(s));

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.e("File", e.getMessage());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.e("IO", e.getMessage());
    } 
```

我还添加了以下权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

但它不起作用；该文件存在于 sdcard 上。我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:27:01.190

如果您的图像很大，您可能会耗尽内存。您可以通过阅读 Logcat 日志来确定这一点。如果是这种情况，请尝试通过以下方式将图片调整为设备大小：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 1; // best wallpaper width is twice screen width

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, width, height);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(path, options);

    WallpaperManager wm = WallpaperManager.getInstance(this);
    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
        Log.e(TAG, "Cannot set image as wallpaper", e);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:23:03.150

```
File f = new File(Environment.getExternalStorageDirectory(), "1.jpg");
String path = f.getAbsolutePath();
File f1 = new File(path);

if(f1.exists()) {
    Bitmap bmp = BitmapFactory.decodeFile(path);
    BitmapDrawable bitmapDrawable = new BitmapDrawable(bmp);
    WallpaperManager m=WallpaperManager.getInstance(this);

    try {
        m.setBitmap(bmp);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

打开 Androidmanifest.xml 文件并添加权限，如..

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

试试这个，让我知道会发生什么..

# web-crawler - 从一个网站爬取多个网页

> ID：10160268
> 
> 赞同：0
> 
> 时间：2012-04-15T07:23:03.443
> 
> 标签：web-crawler, dmoz

我想从网站中提取数据。比如说，URL 是[http://www.example.com/](http://www.example.com/)。所以我把这个网址放进去`start_urls`（参考文档中[DMOZ](http://www.dmoz.org/)的例子）。但是当我输入一个字符串并单击一个按钮时，我还想创建一个 GUI，它将将该字符串附加到`start_urls`并提取所有可以访问的页面，例如[http://www.example.com/computer/page- 1](http://www.example.com/computer/page-1) . 那么你能告诉我如何使用循环来做到这一点吗？我尝试`start_urls`手动输入更多 URL 以检查它是否有效，但响应不佳。有时它没有反应。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:48:28.437

你怎么能用循环来做到这一点？

朋友，那将是一些循环。说真的，我会考虑研究现有的开源脚本和执行此操作的应用程序。您会很容易地*看到并知道它是如何完成*的。然后，当然，你可以让任何你感觉*更好*的东西，你想要的一切。我很确定那里有很多网络蜘蛛解决方案的例子。使用我有限的工具集，我可能会尝试通过某种 bash 或 perl 脚本控制[wget](http://www.gnu.org/software/wget/)来破解某些东西，但那是我，不一定对很多人有利。

至于“任务”本身，如果您真的想自己编写代码，请考虑拆分子任务，有些人会看到 2 个应用程序执行此任务。例如，您可以让一个应用程序存储链接，而另一个应用程序是“抓取器”，即蜘蛛。

并且尽量不要从“循环”的角度来思考。在您的项目的这个阶段还没有循环。

如果您在 Linux 上或为 Windows 安装了 Cygwin / GnuTools，就像我暗示的那样，我强烈怀疑 wget 可能被编写脚本来执行此操作，请查看文本链接列表并获取 css、图像甚至 js。

当然，一旦所有这些都在命令行中正常工作，那么您可能希望前端以友好的方式访问它。同样取决于您使用的语言/技术堆栈，您将有不同的选择。那是另一个我不会涉及的话题。

希望这会有所帮助，干杯！

简而言之，您可以在 Sourceforge、git-hub、google 等上搜索现有的开源网络爬虫资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T18:03:34.277

根据您的需要，Netwoof 可以为您完成。可以循环链接、多个结果页面等......它是完全自动化的，生成 API，甚至可以限定结构化数据中的非结构化数据。

# php - PHP - MVC - 防止在控制器中调用不需要的方法的更好方法？

> ID：10160269
> 
> 赞同：3
> 
> 时间：2012-04-15T07:23:04.193
> 
> 标签：php, model-view-controller

我不知道我的问题是否应该在[这里](http://programmers.stackexchange.com)问。如果是这种情况，请让我知道或移动/删除它。

**问题：**

为了学习，我正在为一个非常小的个人网站制作自己的小型 MVC“库”。这是正在使用的过程（如果我还没有接近正确的方法，请纠正我）：

*   所有请求（图像等除外）都通过 index.php（引导文件）发送。
*   引导文件解析请求并提取控制器和操作，例如：

    [http://www.Domain.com/Controller/Action/Argument1/Argument2/](http://www.Domain.com/Controller/Action/Argument1/Argument2/) ...

其中Controller是控制器，action是在控制器上调用的方法。在这种情况下，它最终会是：**Controller** -> **Action** ( **Argument1** , **Argument2** );

现在，如果用户访问：

```
http://www.Domain.com/Controller/__destruct 
```

或者

```
http://www.Domain.com/Controller/__get/password 
```

**当前解决方案：**

*   通过 $config->getURIFilter() 方法或其他方法运行请求
*   检查 method_exists() 和 is_callable() 等。
*   控制器中没有任何不用于处理请求的方法

**看起来这不应该是一个问题，而且我的设计是错误的。**

**PS**我已经看过很多优秀的 MVC PHP 框架（CodeIgniter、Yii、CakePHP、Zend、Swiftlet 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T07:37:03.687

要么让你的控制器只处理特定的动作，例如

```
/controllers
 /user
  loginController.php
  logoutController.php 
```

然后有只做一件事的课程

```
class LoginController implements RequestHandler
{
    public function handleRequest(Request $request, Response $response)
    {
        …
    }

    private function someAuxiliaryMethod() {
        … 
```

这样 example.com/user/login 将创建一个新的 LoginController 并调用接口方法`handleRequest`。这是一种策略模式。

或者 - 如果您不想像这样拆分控制器操作 - 在您的操作后面加上一个单词（Zend 框架这样做）：

```
class UserController
{
    public function loginAction() {
        … 
```

然后在您的引导程序中添加后缀并调用这些方法。

另一个选择是引入一个路由器，它可以将 URL 映射到控制器操作，并且可以选择性地进行清理以过滤掉格式错误的 URL，例如去除下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:31:52.950

我建议您将任何以下划线开头的方法视为私有方法（仅在您执行 method_exists 检查它是否以下划线开头时显示未找到的页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:38:53.047

只需将您不想暴露给控制器的方法标记为私有或受保护。

把事情简单化！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T08:00:08.477

出于同样的原因，我推出了自己的 MVC 结构一次，我解决这个问题的方法只是做出一个架构决定，在所有可路由的控制器操作前加上“action”这个词，即：

```
public function actionGetData(){

}

public function actionUpdateSomething() {

} 
```

等等

我这样做的原因：

*   您可以完全控制类中的 public/protected/private 范围，而不必担心方法是否通过某个 URL 无意中公开。
*   它使可路由的操作对程序员来说是显而易见的。 `public function actionDoSomething()`可以通过公共 URL ( `/controllerName/doSomething`) 清楚地访问，而`public function getErDone()`不是。
*   您不必费劲儿地寻找可路由的动作。只需在传入参数前加上“action”，然后查看该方法是否存在。快速简单。

我发现这非常有效。

# vb.net - 如何从 vb 资源运行 bat 文件和自定义 cmd 文件？

> ID：10160273
> 
> 赞同：1
> 
> 时间：2012-04-15T07:23:50.473
> 
> 标签：vb.net

我正在尝试使用资源中的 cmd 文件运行批处理文件。我不想在任何地方提取它们。我只是想编辑表单中的 bat 命令并使用我拥有的 cmd 文件运行它。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:29:24.417

如果不先将其保存到磁盘，就无法运行`.cmd`or文件。`.bat`它必须在那里`cmd.exe`阅读和解释。您必须先将其保存到磁盘并从那里运行它。

保存后，您可以使用[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process%28v=vs.100%29.aspx)运行它。从链接的 VB.Net 示例：

```
Imports System
Imports System.Diagnostics
Imports System.ComponentModel

Namespace MyProcessSample
Class MyProcess

  Public Shared Sub Main()
    Dim myProcess As New Process()

      Try                ' Get the path that stores user documents.
        myProcess.StartInfo.UseShellExecute = False
        ' You can start any process, HelloWorld is a do-nothing example.
        myProcess.StartInfo.FileName = "C:\\HelloWorld.exe"
        myProcess.StartInfo.CreateNoWindow = True
        myProcess.Start()
        ' This code assumes the process you are starting will terminate itself. 
        ' Given that is is started without a window so you cannot terminate it 
        ' on the desktop, it must terminate itself or you can do it 
        ' programmatically from this application using the Kill method.
      Catch e As Exception
        Console.WriteLine((e.Message))
      End Try
    End Sub 'Main
  End Class
End Namespace 
```

# javascript - V8 内部 - 匿名函数的处理

> ID：10160275
> 
> 赞同：11
> 
> 时间：2012-04-15T07:24:57.387
> 
> 标签：javascript, v8

有关完整的故事，请查看[我的另一个问题](https://stackoverflow.com/questions/10157063/efficiency-with-javascript-callbacks)。

基本上，我问过在套接字处理程序中为以下代码使用命名函数是否更有效：

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080);

// Some unrelated stuff

io.sockets.on('connection', function (socket) {
    socket.on('action1', function (data) {
        // logic for action1
    });

    socket.on('action2', function (data) {
        // logic for action2
    });

    socket.on('disconnect', function(){
        // logic for disconnect
    });
}); 
```

总体答案是肯定的（有关更多详细信息，请参见上面的链接），但[ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)发表了以下评论：

> 我不熟悉 V8 内部结构，但它可能足够聪明，可以编译一次函数并每次都重新使用它，只是附加了不同的范围。

所以现在这是我的问题。V8 是否足够聪明，可以编译一次匿名函数，并在匿名函数通常会导致创建多个函数实例的情况下以不同的范围重用它们？例如，上面我希望`connection`事件的处理程序只创建一次，但为每个连接创建`action1`、`action2`和的处理程序。`disconnect`在另一个问题中，这是通过命名函数解决的，但我更感兴趣的是在 V8 中是否需要这样做，或者它是否会进行一些优化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T07:41:49.123

是的。我在 V8 邮件列表上[问了一个非常相似的问题](https://groups.google.com/forum/#!topic/v8-users/BbvL5qFG_uc)（在我的例子中与从构造函数中创建函数有关）。我得到的答复是函数的*代码*是“......通常重用......”，即使每次都有一个单独的函数*对象（根据规范的要求）。*

* * *

但请注意，您的问题与函数是命名还是匿名无关。您示例中的函数可能有一个名称：

```
io.sockets.on('connection', function handleConnection(socket) {
    socket.on('action1', function (data) {
        // logic for action1
    });

    socket.on('action2', function (data) {
        // logic for action2
    });

    socket.on('disconnect', function(){
        // logic for disconnect
    });
}); 
```

这使用了一个*命名函数表达式*，它完全有效并且由 V8 正确处理。（遗憾的是，[IE8 和更早版本没有正确处理](http://blog.niftysnippets.org/2010/09/double-take.html)它，它们在完全不同的时间创建了两个完全不同的功能。但是当您使用 V8 时，您不必担心这一点。）

# c++ - 为函数内部的结构分配和初始化值

> ID：10160276
> 
> 赞同：0
> 
> 时间：2012-04-15T07:24:59.270
> 
> 标签：c++, pointers, memory-management, struct, pass-by-reference

我想使用一个函数来分配和初始化两个相关的结构实例。但是我无法让内存在分配函数之外持续存在。另外，如果可能的话，我宁愿在没有内存泄漏的情况下这样做：

```
void alloc_init(foo_struct *bar, foo_struct *baz){
    //Create some values in here
    bar = new foo_struct(created_val1, created_val2);
    baz = new foo_struct(created_val3, created_val4);
} 
```

如果我从内部检查`created_val1`in的值，那就完全没问题了……但是一旦从堆栈中弹出，我就会得到垃圾。我如何使这些价值观持续存在？`bar``alloc_init()``alloc_init`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:26:22.017

您需要通过引用传递指针：

```
void alloc_init(foo_struct *& bar, foo_struct *& baz){
    //Create some values in here
    bar = new foo_struct(created_val1, created_val2);
    baz = new foo_struct(created_val3, created_val4);
} 
```

因为您按值传递指针，所以您正在为函数内的原始指针的*副本分配内存。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:27:09.667

你可以制作它们`static`，这不是最好的解决方案。或者您可以在更高的范围内声明全局变量，例如在更持久的类或全局变量中。

# scala - 如何在scala中实现通用平均函数？

> ID：10160280
> 
> 赞同：19
> 
> 时间：2012-04-15T07:25:09.743
> 
> 标签：scala, scala-collections

对于任何特定类型的数字（即双/整数）来说，这似乎很容易出现问题，但在一般情况下很难编写。

```
implicit def iterebleWithAvg(data:Iterable[Double]) = new {
    def avg:Double = data.sum / data.size
} 
```

如何为任何类型的数字（Int，Float，Double，BigDecemial）实现这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-15T07:50:42.323

您必须传递一个隐式`Numeric`，这将允许求和和转换为 Double：

```
def average[T]( ts: Iterable[T] )( implicit num: Numeric[T] ) = {
  num.toDouble( ts.sum ) / ts.size
} 
```

编译器将为您提供正确的实例：

```
scala> average( List( 1,2,3,4) )
res8: Double = 2.5

scala> average( 0.1 to 1.1 by 0.05 )
res9: Double = 0.6000000000000001

scala> average( Set( BigInt(120), BigInt(1200) ) )
res10: Double = 660.0 
```

您可以使用该函数来定义隐式视图（前提是您传播隐式数字依赖项）：

```
implicit def iterebleWithAvg[T:Numeric](data:Iterable[T]) = new {
  def avg = average(data)
}

scala> List(1,2,3,4).avg
res13: Double = 2.5 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-15T16:36:07.297

这是我在代码中定义它的方式。

`Numeric`我没有使用 ，而是使用`Fractional`，因为`Fractional`定义了除法运算（`Numeric`不一定有除法）。这意味着当你调用时`.avg`，你会得到你输入的相同类型，而不是总是得到`Double`。

我还在所有`GenTraversableOnce`集合中定义它，以便它适用于例如`Iterator`.

```
class EnrichedAvgFractional[A](self: GenTraversableOnce[A]) {
  def avg(implicit num: Fractional[A]) = {
    val (total, count) = self.toIterator.foldLeft((num.zero, num.zero)) {
      case ((total, count), x) => (num.plus(total, x), num.plus(count, num.one))
    }
    num.div(total, count)
  }
}
implicit def enrichAvgFractional[A: Fractional](self: GenTraversableOnce[A]) = new EnrichedAvgFractional(self) 
```

请注意，如果我们给它一个集合`Double`，我们会返回`Double`，如果我们给它`BigDecimal`，我们会返回`BigDecimal`。我们甚至可以定义自己的`Fractional`数字类型（我偶尔会这样做），它会为此工作。

```
scala> Iterator(1.0, 2.0, 3.0, 4.0, 5.0).avg
res0: Double = 3.0

scala> Iterator(1.0, 2.0, 3.0, 4.0, 5.0).map(BigDecimal(_)).avg
res1: scala.math.BigDecimal = 3.0 
```

然而，`Int`is not a kind of ，这意味着获得 an和 s 的平均结果是`Fractional`没有意义的，所以我们必须有一个特殊情况来转换为 a 。`Int``Int``Int``Double`

```
class EnrichedAvgInt(self: GenTraversableOnce[Int]) {
  def avg = {
    val (total, count) = self.toIterator.foldLeft(0, 0) {
      case ((total, count), x) => (total + x, count + 1)
    }
    total.toDouble / count
  }
}
implicit def enrichAvgInt(self: GenTraversableOnce[Int]) = new EnrichedAvgInt(self) 
```

所以平均`Int`s 给我们一个`Double`：

```
scala> Iterator(1, 2, 3, 4, 5).avg
res2: Double = 3 
```

# ruby-on-rails - 使用 Paperclip 和 Multipart 请求将文件上传到 Rails JSON API 服务器

> ID：10160286
> 
> 赞同：13
> 
> 时间：2012-04-15T07:25:41.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我想将文件从 Android 客户端上传到 Rails JSON API 服务器。

我正在从 Android 客户端发送一个 Multipart/form 请求，如下所示：

```
Content-Type: multipart/form-data; boundary=d99ArGa2SaAsrXaGL_AdkNlmGn2wuflo5
Host: 10.0.2.2:3000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)

--d99ArGa2SaAsrXaGL_AdkNlmGn2wuflo5
Content-Disposition: form-data; name="POSTDATA"
Content-Type: application/json; charset=UTF-8
Content-Transfer-Encoding: 8bit

{"tags":["test"],"location_id":1,"post":{"content":"test"}}
--d99ArGa2SaAsrXaGL_AdkNlmGn2wuflo5
Content-Disposition: form-data; name="IMAGEDATA"; filename="testimage.jpg"
Content-Type: image/jpeg
Content-Transfer-Encoding: binary

<BINARY DATA?
--d99ArGa2SaAsrXaGL_AdkNlmGn2wuflo5-- 
```

在 rails 控制器中，我正在使用以下代码创建新帖子：

```
@parsed_json = JSON(params[:POSTDATA])
@post = @current_user.posts.new(@parsed_json["post"]) 
```

如何让 Paperclip 保存多部分表单中的附件？

我可以这样做：

```
if params.has_key?(:IMAGEDATA)
    photo = params[:IMAGEDATA]
    photo.rewind

    @filename = "/tmp/tempfile"
    File.open(@filename, "wb") do |file|
      file.write(photo.read)
    end

    @post.photo = File.open(@filename)
  end 
```

但它看起来不是最好的解决方案，而且在多部分请求中传递的文件名也没有使用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T16:49:56.823

执行此操作的纯 json 方法是不传递 content-type multipart-form 并将文件作为 json 中的 base64 编码字符串传递。

我想通了感谢这篇文章：[http ://www.rqna.net/qna/xyxun-paperclip-throws-nohandlererror-with-base64-photo.html](http://www.rqna.net/qna/xyxun-paperclip-throws-nohandlererror-with-base64-photo.html)

这是一个json的例子：

```
"{\"account\":{\"first_name\":\"John\",\"last_name\":\"Smith\",\"email\":\"john@test.com\",\"password\":\"testtest\",\"avatar\":{\"data\":\"INSERT BASE64 ENCODED STRING OF FILE HERE\",\"filename\":\"avatar.jpg\",\"content_type\":\"image/jpg\"}}}" 
```

然后在控制器中处理传入的头像，然后保存模型。

```
def process_avatar
  if params[:account] && params[:account][:avatar]
    data = StringIO.new(Base64.decode64(params[:account][:avatar][:data]))
    data.class.class_eval { attr_accessor :original_filename, :content_type }
    data.original_filename = params[:account][:avatar][:filename]
    data.content_type = params[:account][:avatar][:content_type]
    params[:account][:avatar] = data
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T01:42:20.813

所以，我猜你的`Post`模型看起来像这样：

```
class Post < ActiveRecord::Base
  has_attached_file :photo, :styles => { ... }
  ...
end 
```

所以你应该能够做这样简单的事情：

```
@post.photo = params[:IMAGEDATA] if params[:IMAGEDATA].present?
@post.save if @post.valid? 
```

它应该保存照片。

如果您需要做一些更复杂的事情，请尝试将表单数据重新排列为 Paperclip 期望的格式的数据。如果您需要更深入地挖掘，[请查看 Paperclip 的`Paperclip::Attachment`类](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/attachment.rb)。

**堆栈溢出交叉引用**

*   [通过 API 使用 Paperclip 保存文件](https://stackoverflow.com/questions/8228188/save-files-using-paperclip-via-api)
*   [Github 上的回形针](https://github.com/thoughtbot/paperclip/)

# c# - 无法使用 silverlight 类库加载 system.xml

> ID：10160300
> 
> 赞同：2
> 
> 时间：2012-04-15T07:29:00.127
> 
> 标签：c#, silverlight, visual-studio-2010, xml-serialization, silverlight-5.0

我有 3 个项目 - silverlight 应用程序 A 和 2 silverlight 类库 B、C。我的序列化逻辑在项目 C，方法 CallSer() 中。如果 B 的例程调用 CallSer()，则一切正常。但是，如果 C 中的例程调用 CallSer()，则会出现以下错误。我尝试设置 Copy Local 属性，但没有帮助（当 Copy Local = True 时，我看到程序集被复制到调试文件夹中）。这似乎令人惊讶，有人对如何解决这个问题有想法吗？谢谢。

> {System.IO.FileNotFoundException：无法加载文件或程序集“System.Xml，版本=5.0.5.0，文化=中性，PublicKeyToken=7cec85d7bea7798e”或其依赖项之一。该系统找不到指定的文件。文件名：'System.Xml，版本=5.0.5.0，文化=中性，PublicKeyToken=7cec85d7bea7798e'}

更新：我做了更多分析，发现对 CallSer() 的调用实际上来自另一个 .NET 类库 D。所以调用堆栈显示为 D -> C -> CallSer()。我不确定只要我`System.Xml.Serialization`引用 C 会有什么不同。另外，我没有看到`System.Xml.Serialization`在 D 的添加引用选项中列出？为什么呢？

更新：看起来 XmlSerializer 对加载哪个引用感到困惑。那是因为 Silverlight 在 System.Xml.Serialization.dll 程序集中定义了 XmlSerializer，而 .NET 框架在 System.Xml.dll 中有它。我的项目 D 引用了 System.Xml，C 引用了 System.Xml 和 System.Xml.Serialization。如何确保 C 始终引用 Silverlight 版本的 dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:04:29.843

我在尝试运行单元测试时遇到了同样的问题，问题是如果调用 Silverlight 类库的代码是针对“桌面”.Net 框架构建的，您将遇到冲突，因为它将无法加载Silverlight 版本的 dll，只有 Silverlight 运行时可以加载针对 Silverlight CLR/BCL 构建的 dll。

看看创建可[移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)和[可移植库工具](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T08:59:45.157

我有同样的问题`Xml.Writer`。

我通过在我的 Silverlight 项目和我的非 Silverlight 项目之间共享我的源代码文件来解决这个问题，使用 Visual Studio 中的“添加为链接”。我还不得不使用`#ifdef SILVERLIGHT`一个单独的命名空间。

Lloyd 的可移植类库方法看起来更简洁，但我没有时间尝试。

# asp.net - 有没有办法在没有“Response.Write”的情况下将文本插入页面？

> ID：10160301
> 
> 赞同：0
> 
> 时间：2012-04-15T07:29:12.050
> 
> 标签：asp.net

我正在尝试在顶部面板上制作“登录信息”，例如“Welcome Back XXX”，所以我使用

`<% Response.Write(Session["username"]); %>`

在aspx页面内。

它可以工作，但是没有`Response.Write`这里直接使用变量吗？似乎没有必要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:48:01.520

在 ASP.NET 页面语法中有一个简单的“快捷方式”可以将`Response.Write`.

```
<%= Session["username"] %> 
```

在功能上等同于

```
<% Response.Write(Session["username"]); %> 
```

通常，您希望使用 将会话变量编码为 HTML `Html.Encode`，以防它们包含不在接受的 HTML 范围内的字符。如果您使用的是 ASP.NET 4，则可以使用`<%: %>`，相当于`Response.Write(Html.Encode(string))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:34:41.647

在您的页面上放置一个 asp.net 标签，例如

```
<asp:Label id=lblUserName runat="server" /> 
```

在您的代码隐藏页面、page_load 事件或适当事件上

```
lblUserName.Text = String.Format("welcome back {0}",Session["username"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T07:35:18.663

使用标签并为其分配用户名

在 aspx 中（html 代码）

```
<asp:Label id=lblUserName runat="server" /> 
```

在 aspx.cs 中（后面的代码）

```
lblUserName .Text = "Welcome back"+Session["username"].ToString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T07:43:08.913

你可以这样做：

```
<%= Session["username"] %> 
```

如果您使用 ASP.NET 4.0，您可以使用以下语法自动对值进行 HTML 编码：

```
<%: Session["username"] %> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T07:44:45.510

正确的方法。

1.  首先是检查值是否为空
2.  其次，因为您将它写在页面上，所以使用 HTMLEncode 来确保避免任何类型的注入或问题。

现在，如果您喜欢使用 Literal 或 Label，或者只是直接编写它，这取决于您。如果要将其放在 UpdatePanel 中，则必须使用 Literal。

现在，如果您使用 Literal 避免设置 ViewState 以从中获得空间，那么您需要在 PageLoad 上设置它。它将是

```
<asp:Literal runat="server" id="txtUserName" EnableViewState="false" /> 
```

和页面加载。

```
if(Session["username"] != null)
{
   Debug.Assert(Session["username"].ToString.Length > 0 , "Check out why I have zero user name");
   txtUserName.Text = Server.HTMLEncode(Session["username"].ToString);
} 
```

# c# - 使用 graph# 在 WPF 中的图形未绘制为链

> ID：10160304
> 
> 赞同：32
> 
> 时间：2012-04-15T07:29:58.870
> 
> 标签：c#, wpf, graph, graph-sharp

我正在将 WPF 与 graph# 库一起使用，并且我正在尝试将图形绘制为线性链，因此我定义了一些顶点和连接它们的边

```
new Edge<object>(vertices[i], vertices[i+1]) 
```

但问题是结果图没有按预期绘制，如下所示：

1 -> 2 -> 3 -> 1-> 4

换句话说，顶点 3 是通过顶点 1 到达顶点 4。

这是绘图方法的代码

```
private void CreateGraphToVisualize()
{
    var g = new BidirectionalGraph<object, IEdge<object>>();

    // add the vertices to the graph
    string[] vertices = new string[5];
    for (int i = 0; i < 5; i++)
    {
        vertices[i] = i.ToString();
        g.AddVertex(vertices[i]);
    }

    // add edges to the graph
    g.AddEdge(new Edge<object>(vertices[0], vertices[1]));
    g.AddEdge(new Edge<object>(vertices[1], vertices[2]));
    g.AddEdge(new Edge<object>(vertices[2], vertices[3]));
    g.AddEdge(new Edge<object>(vertices[3], vertices[4]));

    GraphToVisualize = g;
} 
```

这是与graph相关的xaml代码的一部分#

```
<DockPanel Grid.Row="2" Margin="10,10,13,10">
    <zoom:ZoomControl>
        <graphsharp:GraphLayout x:Name="graphLayout"
                            Graph="{Binding ElementName=root,Path=GraphToVisualize}" 
                            LayoutAlgorithmType="FR" 
                            OverlapRemovalAlgorithmType="FSA"
                            HighlightAlgorithmType="Simple"/>
    </zoom:ZoomControl>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:32:33.430

我已经尝试过这段代码，据我所知，它没有任何问题。可能是某些库引用不同步（QuickGraph-GraphSharp）。我重新编译了 Graph#-Controls 并将其全部组合到一个解决方案中。我删除了 XAML 中的绑定并将图形加载到 MainWindow 的构造函数中。

我从代码中得到的结果图是：0 -> 1 -> 2 -> 3-> 4 而**不是：1 -> 2 -> 3 -> 1-> 4。您可以在**[此处](http://sdrv.ms/WN5Ov5)下载完整的源代码亲眼看看。

* * *

*更多参考资料*

*   [.NET 的 QuickGraph、图形数据结构和算法](http://quickgraph.codeplex.com/)
*   [图形＃](http://graphsharp.codeplex.com/)

# asp.net - 在 GTalk、雅虎、MSN 中代表用户聊天？

> ID：10160306
> 
> 赞同：1
> 
> 时间：2012-04-15T07:30:50.240
> 
> 标签：asp.net, yahoo-api, google-talk, msn, yahoo-messenger

我想在 Asp.net 中开发应用程序，其中用户可以向我发送消息，我需要代表他们向 Gtalk、MSN 或 Yahoo 发送聊天消息。并收到相同的消息。

请让我知道是否有人有想法？

提前致谢..

# android - android、wp7、ios中用于音频流的xml解析

> ID：10160313
> 
> 赞同：0
> 
> 时间：2012-04-15T07:32:21.817
> 
> 标签：android, ios, windows-phone-7, audio-streaming

我正在 android、wp7、ios 中开发一个用于音频流的应用程序。url 是一个 xml 文件，用于获取网络数据。获取数据后，我在 android 中使用 xmlpullparser 进行解析，但是当我单击包含歌曲标题的已解析数据列表时，我很难流式传输音频。

任何建议，请随时发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T05:39:17.460

您可以使用适用于 iOS 的 HTTP Live Stream：

```
https://developer.apple.com/streaming/ 
```

安卓媒体播放器：

```
http://developer.android.com/guide/topics/media/mediaplayer.html 
```

和适用于 Windows Phone 8 的音频流代理

```
http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394039%28v=vs.105%29.aspx 
```

# php - 基本内爆 foreach

> ID：10160315
> 
> 赞同：1
> 
> 时间：2012-04-15T07:32:33.307
> 
> 标签：php, arrays, foreach, comma, implode

我有以下代码，我想回显以逗号分隔的数组元素。代码输出 disered 列表，但没有逗号。我错过了什么？

```
<?php 
    $array    = get_field('casts');
    $elements = $array;

    foreach($array as $key => $value) {
        echo implode(', ', $value)};
?> 
```

**编辑1：**`$elements`嵌套数组在哪里。

**编辑 2：**工作片段：

```
<?php 
    $array = get_field('casts');
    $new_array = array();
    foreach($array as $sub_array) {
        foreach($sub_array as $value) { 
            array_push($new_array, $value);
        }
    }
    echo implode(", ", $new_array);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T07:38:17.033

你为什么分配`$elements = $array;`然后从不使用`$elements`？

此外，您不需要循环 ( `foreach`) 来内爆数组。

试试这个：

```
<?php
$array = get_field('casts');
$new_array = array();
foreach($array as $sub_array) {
    foreach($sub_array as $value) {
        // this array_push() function adds $value to the end of $new_array.
        array_push($new_array, $value);
    }
}
echo implode(", ", $new_array);
?> 
```

这是关于[`implode()`](http://php.net/manual/en/function.implode.php)

[你可以在这里](http://codepad.viper-7.com/rhmBjk)玩耍和测试上面的代码。

下次还要加上 tag `php`，否则我们的代码不会得到颜色语法。

# c# - 自定义 WCF 测试客户端

> ID：10160318
> 
> 赞同：1
> 
> 时间：2012-04-15T07:33:45.157
> 
> 标签：c#, wcf

我想构建一个与 WCF 测试客户端具有相似功能的应用程序。我真正需要的是测试客户端的输入参数的能力。WCF 的工具非常人性化，它可以识别类型并允许您从下拉列表中选择类型，并且适用于嵌套对象和数组。

我想要一个类似的功能。
有没有办法提取此功能，或者是否有其他组件具有此功能？- 只是为了不让我重新发明轮子。
我的目标是，这不仅用于 Web 服务通信，甚至用于其他一些可以直接调用 C# 代码的测试。
我需要的是输入参数的机制。

任何帮助将不胜感激。

# php - 限制其他方法上的方法链接

> ID：10160319
> 
> 赞同：2
> 
> 时间：2012-04-15T07:33:53.837
> 
> 标签：php

假设我有这门课

```
class Test
{

   method_a(){ return $this;}

   method_b(){ return $this;}

   method_c(){ return $this;}
}

$obj = new Test();
$obj->method_a()->method_b();
$obj->method_a()->method_c();
$obj->method_b()->method_c(); //i want to disallow this 
```

如何禁止 method_b() 与 method_c() 链接

**编辑：**

调用 $obj->method_b() 并跟随 $obj->method_c() 也不允许，因为我只希望 method_b 与 method_a 和 method_c 与其他方法链接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T07:44:52.053

我能想到两种可能性。首先是不`$this`从`method_b()`. 这将阻止链接`method_c()`- 但其他所有内容也是如此，所以这似乎不是你想要的。

第二个有点难看，但可能会按预期工作：`$last_method`向您的类添加另一个私有变量并在每个调用的方法中设置它（到方法名称或某种 id）。这样，在调用时`method_c()`，您可以检查最后调用的方法是否是`method_b()`- 如果是，则抛出异常（或在这种情况下您想做的任何事情）。请注意，此解决方案还可以防止在没有链接的情况下调用`method_b()`和`method_c()`连续调用同一对象-因此这可能不是您正在寻找的 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:18:40.860

您可以使用状态模式并为测试中的每个可能状态引入状态对象。当有人调用方法 B 时，您在内部将 Test 的状态更改为 StateB 类，当有人调用方法 C 时，您可以引发异常。

见[http://sourcemaking.com/design_patterns/state](http://sourcemaking.com/design_patterns/state)

# java - 具有拖放功能的 Swing 中的 HTML 画廊页面

> ID：10160320
> 
> 赞同：0
> 
> 时间：2012-04-15T07:34:19.327
> 
> 标签：java, html, image, swing

我被要求写一个`JDialog`分开的左右面板。左侧面板显示演示 HTML 模板库（小尺寸），右侧面板显示图像系列或列表。我想让它可以拖动列表上的图像并将其放置在画廊中（或者可能从画廊中拖出一些图像）。问题是我不知道从哪里开始，有人能给我一些想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:41:51.923

HTML 画廊通常使用 JS 来完成“繁重的工作”（我猜它也需要幻灯片）。虽然 Swing 组件（在一定程度上）支持 HTML，但它们不支持 JS。

我建议不要尝试在 GUI 中*呈现*HTML/JS，而是`JList`在 GUI 中提供用户选择的图像+名称对象（使用`JFileChooser`）。选择每个图像后，您可以显示“首选名称” `JTextField`，以便用户对其进行编辑。

图像顺序可以按列表中的顺序显示。要更改顺序，请实施 Drag'n'Drop。有关详细信息，请参阅[拖放和数据传输](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)课程。

您可能需要`JLabel`在`CENTER`GUI 中显示（全尺寸）所选图像，并显示幻灯片的顺序和时间。

一旦用户对图像选择、顺序、名称和时间感到满意。为他们提供一个按钮，将所有详细信息写入单个目录，包括 HTML、脚本和图像（更简单）。编写 HTML 后，调用`Desktop.open(File)`以向用户显示完成的产品。

至于你如何做这一切，这真的超出了关于 SO 的答案范围。您需要完成每个部分的教程，然后返回更具体的问题。

# c++ - 何时使用 VirtualAlloc 与新的？

> ID：10160323
> 
> 赞同：3
> 
> 时间：2012-04-15T07:34:58.050
> 
> 标签：c++, windows, visual-c++

> **可能重复：**
> [VirtualAlloc 和 HeapAlloc 有什么区别？](https://stackoverflow.com/questions/872072/whats-the-differences-between-virtualalloc-and-heapalloc)

我想预先分配一大块内存，比如 1gb 来实现内存池。Virtual Alloc 使用 4kb 的页面大小进行分配。在这种情况下使用 virtualalloc 比 new 有什么优势？在这种情况下不应该使用 new 还是使用 new over virtual alloc 有什么缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:21:16.560

使用 VirtualAlloc，您可以保留 1gb 地址范围。稍后您可以根据需要提交其中的一部分 - 以便为给定的保留地址块分配实际的物理内存块。保留永远不会失败，而如果物理内存不足，提交可能会失败。实际上，对于 Windows 上的分页文件，这也应该总是成功的。

new 将保留并提交 1gb 块。

因此，如果您需要即时访问整个 1GB 块，请继续使用新的。

如果您一开始不需要访问整个 1GB 块，并且您可以编写算法以便它按需提交部分内存，那么 VirtualAlloc 可以优化您的内存消耗。

如果您出于您的目的考虑使用 VirtualAlloc，那么您可能会发现很难决定何时以及如何提交内存。我在 Jeffrey Richter 的书（Advanced Windows 3rd ed.）中找到的一种很好的方法是使用结构化异常处理。一旦您的代码触及未提交的内存异常，您所要做的就是捕获它，提交内存，然后告诉系统重试发生问题的指令。我从未尝试过，但据我所知，这就是堆栈的实际工作方式。

# c - 使用预先计算的成员长度在堆栈上分配结构的宏

> ID：10160326
> 
> 赞同：1
> 
> 时间：2012-04-15T07:35:57.760
> 
> 标签：c, macros, struct

我有一个形式的结构：

```
typedef struct node {
  unsigned int * keys;
  unsigned int * branches;
} NODE; 
```

键和分支的数量是在运行时确定的，但是是已知的。它派生自另一个结构：

```
typedef struct tree {
  unsigned int num_keys_per_node;
} TREE; 
```

为了为此分配 a `NODE`，`TREE`手动步骤将是：

```
NODE node;
unsigned int keys[tree->num_keys_per_node];
unsigned int branches[tree->num_keys_per_node + 1];

node.keys     = keys;
node.branches = branches; 
```

我需要在紧密循环中分配很多这些节点，只是在我遍历数据结构时临时分配，在节点遍历继续时快速丢弃它们。我可以编写一个函数来返回一个指针以及`malloc()`堆上的键和分支以及`free()`手动，但如果可能的话，我更喜欢使用堆栈。

由于此初始化逻辑将在许多地方重复，我如何定义宏，以便我可以有效地执行以下操作：

```
NODE node = CREATE_NODE_FOR_TREE(tree); 
```

我很难找到一种方法来做到这一点，这将导致预处理器给出有效的语法。

很高兴听到其他在堆栈内存上进行动态结构分配的方法。

编辑 | 我不应该同时在内存中需要多个节点，所以我也可以重复使用一个结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:58:21.767

尝试`node`像这样将参数作为参数传递给宏：

```
#define CREATE_NODE_FOR_TREE( \
  node, \
  tree) \
  \
  unsigned int keys[tree->num_keys_per_node]; \
  unsigned int branches[tree->num_keys_per_node + 1]; \
  \
  node.keys     = keys; \
  node.branches = branches; 

...
NODE node = {0};
CREATE_NODE_FOR_TREE(node, tree);
... 
```

此解决方案假定至少 c99。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:17:33.410

复合文字不能是 VLA 并且您的 size 参数是动态的，因此不可能直接使用您建议的语法来执行此操作。我会做以下事情：

```
#define NODE_ON_STACK(NAME, TREE)                         \
NODE NAME = { 0 };                                        \
register size_t NAME ## keys = (TREE)->num_keys_per_node; \
auto unsigned int NAME ## keys[NAME ## keys];             \
auto unsigned int NAME ## branches[NAME ## keys + 1];     \
node.keys     = NAME ## keys;                             \
node.branches = NAME ## branches 
```

这适用于函数范围内可以放置多个声明的任何位置。`register`并`auto`确保它永远不会在文件范围内使用。该`NAME ## keys`变量确保`TREE`参数只被评估一次。如果您愿意，您还可以修改生成的标识符的名称以避免冲突。

挑剔：

*   总是初始化`struct`变量
*   你`TREE`的问题在问题上有些错误
*   您问题中的`&`操作员错了
*   `int`由于整数类型几乎肯定是错误的，所以计数的东西应该是`unsigned`
*   `unsigned int`也是错误的，`size_t`通常最适合应该计算对象或其部分的所有内容。

啊和通常的警告标签：`auto`由于stackoverflow，VLA作为变量要小心。但我想你已经知道了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:57:27.717

我认为类似以下的方法可能有效，但我不确定这是否是最好的方法：

```
#define PASTE2(x,y) x##y
#define PASTE(x,y)  PASTE2(x,y)

#define CREATE_NODE_FOR_TREE( n, tree) \
    NODE n;                         \
    unsigned int PASTE(n,_keys)[(tree)->num_keys_per_node];         \
    unsigned int PASTE(n,_branches)[(tree)->num_keys_per_node + 1]; \
    n.keys     = &PASTE(n,_keys);                                \
    n.branches = &PASTE(n,_branches); 
```

令牌粘贴在那里，因此如果在某些时候您需要一次使用多个`NODE`，“隐藏”`keys`和`branches`本地人的名称将“限定”到`NODE`名称以避免冲突。使用它，而不是

```
NODE node = CREATE_NODE_FOR_TREE(tree); 
```

你会`node`像这样声明和初始化：

```
CREATE_NODE_FOR_TREE(node, tree); 
```

# c# - ConcurrentQueue<> 需要在 n 方法处重新排队

> ID：10160328
> 
> 赞同：0
> 
> 时间：2012-04-15T07:36:13.197
> 
> 标签：c#, .net

我需要在第 n 个元素处重新排队，其中 n 由有序键定义。

```
 ConcurrentQueue<KeyValuePair<string, SomeClass>> queue = new ConcurrentQueue<KeyValuePair<string, SomeClass>>();

 queue.RequeueByOrderedKey(key, element) 
```

或者

```
 queue.RequeueN(index, element) 
```

...因为看起来有必要自己实现这个，我正在考虑基于公共的东西

```
 class Class1 : KeyedCollection<K,V>{}

   it'd be nice to have Class1 : OrderedKeyedCollection<K,V>{} 
```

这是我做的一些代码。我会把它放在这里以供评论，然后可能会移动它作为答案。可能还没有正确处理并发问题。

```
 public class QueueExt<TK, TV> : SortedList<TK, TV> {

        #region Constructors

        public QueueExt(Func<TV, TK> getKey = null) {
            GetKey = getKey;
        }

        private Func<TV, TK> GetKey = null;

        public QueueExt(int capacity, Func<TV, TK> getKey = null)
            : base(capacity) {
            GetKey = getKey;
        }

        public QueueExt(IComparer<TK> comparer, Func<TV, TK> getKey = null)
            : base(comparer) {
            GetKey = getKey;
        }

        public QueueExt(int capacity, IComparer<TK> comparer, Func<TV, TK> getKey = null)
            : base(capacity, comparer) {
            GetKey = getKey;
        }

        public QueueExt(IDictionary<TK, TV> dictionary, Func<TV, TK> getKey = null)
            : base(dictionary) {
            GetKey = getKey;
        }

        public QueueExt(IDictionary<TK, TV> dictionary, IComparer<TK> comparer, Func<TV, TK> getKey = null)
            : base(dictionary, comparer) {
            GetKey = getKey;
        }

        #endregion

        public TV Dequeue() {
            lock (this) {
                var first = this.ElementAt(0).Value;
                this.RemoveAt(0);
                return first;
            }
        }

        public void Requeue() {

            if (GetKey == null)
                throw new ArgumentNullException("Key getter lamda must not be null");

            lock (this) {
                var key = this.ElementAt(0).Key;
                var actualkey = GetKey(this.ElementAt(0).Value);
                if (!actualkey.Equals(key)) {
                    this.Enqueue(this.Dequeue());
                }
            }
        }

        public void Enqueue(TK key, TV item) {
            this.Add(key, item);
        }
        public void Enqueue(TV item) {
            if (GetKey == null)
                throw new ArgumentNullException("Key getter lamda must not be null");
            var key = GetKey(item);
            this.Add(key, item);
        }

        public TV Peek() {
            return this.ElementAt(0).Value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:40:39.210

不，这是不可能的，因为它的本质是`queue`，您不能对它进行键或索引访问。`List<>`为此使用 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:19:21.227

您可以使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)来做到这一点。您创建可索引队列并使其实现[IProducerConsumerCollection](http://msdn.microsoft.com/en-us/library/dd287147%28VS.100%29.aspx)。`BlockingCollection`我在我的文章[Customizing Blocking Collection](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=822)中展示了如何使用这种方式。我在文章中使用了一个堆栈，但您可以轻松地将堆栈替换为您的可索引队列。

另一种可能是并发优先级队列。你可以用一个堆和一个锁来构建一个简单的。请参阅我的文章[A Generic Binary Heap](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)。您需要添加同步。

# apache - 启动 apache 失败（无法绑定到地址 0.0.0.0:80）

> ID：10160339
> 
> 赞同：54
> 
> 时间：2012-04-15T07:39:15.547
> 
> 标签：apache, port, kill, netstat

更新：已修复，似乎 VirtualHosts 配置文件之一在启用站点时出错。

我有 Ubuntu 11.10

当我运行命令启动 apache2 时：

```
sudo /etc/init.d/apache2 start 
```

我收到以下错误消息：

> 启动 web 服务器 apache2
> apache2：无法可靠地确定服务器的完全限定域名，使用 127.0.1.1 作为 ServerName (98) 地址已在使用中：make_sock：无法绑定到地址 0.0.0.0:80 没有可用的侦听套接字，正在关闭无法打开日志操作“开始”失败。

我运行此命令以获取使用端口 80 的进程：

```
sudo netstat -ltnp | grep ':80' 
```

返回此输出：

```
tcp6       0      0 :::80                   :::*                    LISTEN      1176/ 
```

要知道哪个进程是我运行这个命令：

```
ps -wlp1176 
```

返回：

```
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
5 D    33  1176     1  0  80   0 -     0 exit   ?        00:00:00 apache2 
```

但是，如果我尝试终止该进程：

```
sudo kill -9 1176 
```

它不会杀死它，如果我再次运行 netstat 命令仍然出现在监听并且 apache 启动失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-11-08T16:09:56.557

为我运行此命令工作：

```
fuser -k -n tcp 80 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-04T19:31:56.127

它可能是使用端口 80 的 Skype 或 nginx。

尝试关闭Skype，或运行：`sudo /etc/init.d/nginx stop`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-17T12:23:38.497

我有同样的错误，只是想确认运行

```
 sudo netstat -ltnp | grep ':80' 
```

帮助我指出 Hiawatha 网络服务器阻碍了 Apache2。

删除 Hiawatha 解决了这个问题 (sudo dpkg --purge hiawatha)。Ubuntu 12.04.2 服务器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-18T15:59:43.683

我有同样的问题

对我来说，apache 已经在运行，但运行方式错误。

杀死进程不起作用，因为守护进程不断重新实例化它。

```
apachectl stop 
```

解决了这个问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-31T07:03:07.270

试试这个，它对我有用……</p>

```
sudo netstat -ltnp | grep ':80' 
```

这将返回以下内容：

```
tcp6 0 0 :::80 :::* LISTEN 1047/apache2 
```

然后

```
sudo kill -9 1047 
```

然后我能够重新启动 Apache，一切正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-02T10:00:15.997

使用任何一个

```
sudo killall httpd 
```

或者

```
sudo killall apache2 
```

检查是否有人使用 80 端口

```
sudo netstat -tulpn| grep :80 
```

重启

```
sudo service httpd start 
```

然后重新启动服务器。我花了一整天的时间才明白这个问题

[![在此处输入图像描述](../Images/c7f039a579dc061c16616630b4b3d1f8.png)](https://i.stack.imgur.com/JQc2k.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-04T11:13:52.810

转到设备管理器，从菜单/视图中选择“显示隐藏的设备”，转到“非即插即用驱动程序”/HTTP，双击它以禁用它（并禁用或手动一些依赖它的服务）。重新启动并享受！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-26T04:56:21.540

看起来其他进程正在使用端口 80。

```
$ netstat -anp | grep 
```

例如。`$ netstat -anp | grep 80`

通过上面你得到进程名称，如果你想使用端口，那么你需要停止进程或更改端口

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-09T06:19:02.443

这会因为重复安装 apache 或端口被另一个服务使用而发生

```
sudo lsof -i | grep "httpd" 
```

您将找到进程 ID 和服务的侦听端口。然后检查

```
cd /proc/(process id of http) 
```

然后使用命令杀死该进程

```
kill -9 pid 
```

现在

```
sudo netstat -nltp 
```

再次杀死进程

句法：-

```
kill -9 pid 
```

现在启动apache

```
sudo ./apachectl start 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-15T14:46:26.873

我要做的只是检查您的 /etc/apache2/sites-available/your-domain-name.com.conf 中是否设置了以下内容

```
SSLEngine on 
SSLCertificateFile /your/path/to/your-domain.com.crt
SSLCertificateKeyFile /your/path/to/your-domain.com.key
SSLCACertificateFile /your/path/to/your-domain.com.ca-bundle 
```

并且没有任何输入错误的目录或任何其他不应该在您的 .conf 文件中的内容。它对我有用，因为重新启动和终止进程根本没有帮助。无论如何它并没有开始。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-27T11:14:35.923

我使用以下程序修复了它。以 root 用户身份运行以下命令。

```
root# ps aux |grep apache 
```

它将向您显示 Apache PID，只需杀死该 PID 并重新启动 Apache 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-12T16:46:44.460

您只能在 .conf 的一个文件中监听 PORTNUMBER。不要把它放在多个文件中。尝试一下 ：）

# javascript - AMD：javascript上下文的目的是什么？

> ID：10160343
> 
> 赞同：3
> 
> 时间：2012-04-15T07:40:13.927
> 
> 标签：javascript, javascript-framework, js-amd

关于 AMD（异步模块定义），我读到这样的阶段：

> AMD 格式来自于想要一种模块格式，它比今天的“编写一堆具有隐含依赖关系的脚本标签，您必须手动订购”以及易于直接在浏览器中使用的东西。

javascript上下文的目的是什么？你能举个例子吗？赞成和控制使用 AMD？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T08:19:34.547

早在 JavaScript 获得原生模块系统之前，将脚本放到页面上的唯一方法就是`<script>`元素。这些按顺序执行，按照它们在 HTML 中出现的顺序。这意味着如果你的脚本依赖于 jQuery，那么 jQuery`<script>`必须在你脚本的`<script>`. 否则，它会爆炸。

将应用程序逻辑拆分为多个文件的情况并不少见，尤其是随着应用程序的增长。但是使用这种手动排序脚本的系统很快就会变成一场噩梦。您的脚本具有隐式依赖关系，其管理在其他地方定义。这就是 AMD 的用武之地。

AMD 是一个模块规范，而 RequireJS 是这种系统的实现。简而言之，它是您代码的包装器，它 1) 在调用之前保持脚本惰性，2) 允许您的脚本显式定义其依赖项，以及 3) 允许模块系统计算出哪些依赖项以什么顺序执行。

这是一个粗略的例子：

```
// your-app.js
define(['jquery', 'underscore'], function($, _){
  // Your script sits in this "wrapper" function.
  // RequireJS now knows app.js needs jquery and underscore.
  // It loads and executes them first before your script.
})

// jquery.js
define('jquery', [], function(){
  // jQuery stuff
  return jQuery
})

// underscore.js
define('underscore', [], function(){
  // underscore stuff
  return underscore
})

// Then on your HTML, load up your app.
<script data-main="path/to/app.js" src="path/to/require.js"></script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T08:05:28.197

相互依赖的 Javascript 库通常要求以特定顺序加载它们。例如，包含 jQuery 库的脚本标签必须位于包含 jQuery UI 库的脚本标签之前。

如果这些库使用 AMD，则可以按任何顺序包含它们。AMD 库将负责以正确的顺序初始化库，因为您指定哪个库依赖于哪个库。

（具有讽刺意味的是，包含 AMD 库的脚本标签当然必须位于包含任何使用 AMD 的库的代码之前……）

# c - 《Smashing The Stack For Fun and Profit》中的内存地址计算

> ID：10160344
> 
> 赞同：4
> 
> 时间：2012-04-15T07:40:29.997
> 
> 标签：c, memory, assembly, stack-overflow

我正在阅读“[为了乐趣和利润而粉碎堆栈](http://www.phrack.org/issues.html?id=14&issue=49)”

在“缓冲区溢出”部分，我看到了这个：

```
 0x8000490 <main>:       pushl  %ebp
    0x8000491 <main+1>:     movl   %esp,%ebp
    0x8000493 <main+3>:     subl   $0x4,%esp
    0x8000496 <main+6>:     movl   $0x0,0xfffffffc(%ebp)
    0x800049d <main+13>:    pushl  $0x3
    0x800049f <main+15>:    pushl  $0x2
    0x80004a1 <main+17>:    pushl  $0x1
    0x80004a3 <main+19>:    call   0x8000470 <function>
    0x80004a8 <main+24>:    addl   $0xc,%esp
    0x80004ab <main+27>:    movl   $0x1,0xfffffffc(%ebp)
    0x80004b2 <main+34>:    movl   0xfffffffc(%ebp),%eax
    0x80004b5 <main+37>:    pushl  %eax
    0x80004b6 <main+38>:    pushl  $0x80004f8
    0x80004bb <main+43>:    call   0x8000378 <printf>
    0x80004c0 <main+48>:    addl   $0x8,%esp
    0x80004c3 <main+51>:    movl   %ebp,%esp
    0x80004c5 <main+53>:    popl   %ebp
    0x80004c6 <main+54>:    ret
    0x80004c7 <main+55>:    nop 
```

“我们可以看到，当调用 function() 时，RET 将为 0x8004a8，我们想跳过 0x80004ab 处的赋值。我们要执行的下一条指令是 0x8004b2。一个小数学告诉我们距离是 8 个字节。 "

我在这里没有得到答案。0x80004b2 - 0x80004ab = 7，对吗？为什么作者说是8？我在这里错过任何一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:48:46.170

我也想知道这个。我只能认为 aleph1 从未实际测试过该代码，因为我确信偏移量应该是 10 (0x80004b2 - 0x80004a8)。我还发现这个版本的文章将原始值更正为 10。

[http://www.cs.wright.edu/~tkprasad/courses/cs781/alephOne.html](http://www.cs.wright.edu/~tkprasad/courses/cs781/alephOne.html)

# lucene - 将 Apache Lucene 与 Infinispan 一起使用

> ID：10160347
> 
> 赞同：1
> 
> 时间：2012-04-15T07:40:50.777
> 
> 标签：lucene, infinispan

将 Infinispan 与 Lucene 一起使用会提高 Lucene 的性能吗？Lucene 本身包含一个 RAM 目录。Infinispan 是否优于 RAM 目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:43:23.943

Lucene 提供的 RAMDirectory 并不是真正的高性能。使用 NIO 和内存映射的基于文件系统的实现可能更有效，除非您正在处理用于概念证明和单元测试的索引。

Infinispan 目录 - 就像文件系统一样 - 为良好的性能进行了调整；事实上，它比文件系统执行写操作要快一点（原因很明显）；读取性能的速度竞赛是一场微妙的战斗，很大程度上取决于您的实际用例。

使用 Infinispan 目录的主要原因不是原始性能，而是：

1.  它具有跨多个节点复制和分发索引的能力：为 FSDirectory 使用共享文件系统通常是有问题的，而且根本不快。
2.  它能够作为缓存直写存储来运行较慢的持久性服务。FS 是其中之一，但它可能是关系数据库、Cassandra、S3 等云存储服务，...[写你的插件]
3.  它是（可选的）事务性的。如果需要，您可以让它参与 XA 事务。

# java - 适用于 Windows 和 Linux 的 Jaas 登录模块

> ID：10160348
> 
> 赞同：0
> 
> 时间：2012-04-15T07:41:09.077
> 
> 标签：java, jaas

有人可以在 jaas 登录模块上工作吗？我正在浏览文档，我的理解是有 ntlogin 模块，unix 登录模块带有 sun-jdk。

我想要的是这些登录模块可以 1\. 与操作系统用户进行身份验证 2\. 提供该用户的组。

基本上我想用 os 进行身份验证。输入是用户名、密码和组名。我想知道用户名、密码组合是否正确以及用户是否属于该组。

我想使用 Windows 和流行的 linux 发行版进行身份验证，例如 RHEL、Suse、CentOS。

我不想只进行 LDAP 身份验证 os 身份验证。

对于 Windows，有可用的 waffle 库。但是在使用 64 位机器时我无法进行身份验证。在 32 位上它运行良好。

对于 linux，有 jpam，但它不给组。它只会检查用户名、密码组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:34:10.887

据我所知，JAAS 是关于 Java 代码和 vm 相关授权：当前运行的代码是否被授权做某事？

我认为使用一些操作系统本机包装脚本来验证用户，然后在 Java 代码中提取用户信息会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T12:26:34.270

我一直在寻找同样的东西。到目前为止，我发现 Unix“登录模块”实际上并没有进行任何身份验证。它为流程所有者的用户和组创建主体，并将它们添加到主题中。这使得它对验证 webapp 会话毫无用处。

您将需要本机代码来验证 OS 凭据，但应该可以将其挂接到 JAAS。将本机代码制作成一个小而简单的外部帮助程序（就像使用类似框架来解决相同问题的许多“checkpasswd”程序之一）是有意义的，因为它需要提升权限才能访问存储的密钥.

# android - 未捕获 ACTION_AUDIO_BECOMING_NOISY

> ID：10160349
> 
> 赞同：2
> 
> 时间：2012-04-15T07:41:39.613
> 
> 标签：android, audio, headset

在阅读了 android 开发指南和此处的一些帖子后，我实现了一个简单的解决方案，以在运行 Android 2.3.3 的平板电脑中捕获 HEADSET UNPLUG 事件。

不幸的是，我似乎遗漏了一些东西，因为 onReceive() 事件从未被捕获。

下面是实现的代码：

```
public class MusicIntentReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(android.media.AudioManager.ACTION_AUDIO_BECOMING_NOISY)) {
            Toast.makeText(context, "Headphones disconnected.", Toast.LENGTH_SHORT).show();
        }

    }

} 
```

在 android 清单文件中：

```
<receiver android:name=".MusicIntentReceiver">
            <intent-filter>
                <action android:name="android.media.AUDIO_BECOMING_NOISY" />
            </intent-filter>
        </receiver> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:35:58.807

NOISY 过滤器会在音频输出源发生变化时触发，并且可能会导致一些奇怪的东西。

耳机插头的正确过滤器应该是：

```
IntentFilter commandFilter = new IntentFilter();
commandFilter.addAction(Intent.ACTION_HEADSET_PLUG); 
```

清单应为：

```
 <intent-filter>
            <action android:name="android.intent.action.HEADSET_PLUG" />
 </intent-filter> 
```

# .net-4.0 - LinqPad - EntityFramework 4.3.1 - MissingMethodException - Sql Compact

> ID：10160354
> 
> 赞同：3
> 
> 时间：2012-04-15T07:42:16.903
> 
> 标签：.net-4.0, sql-server-ce, linqpad, entity-framework-4.3, missingmethodexception

I have my POCO model is seperate dll than my asp.net mvc 3 website.

I created new connection in LinqPad Beta: v4.41.01 selected option for Poco, provided path to custom dll, Chose DbContext, Chose via parameterless constructor.

This did not work, as I am using SqlServer Compact.

Then I created dummy.config file as follows:

```
 <?xml version="1.0" encoding="utf-8"?>
   <configuration>
    <configSections>
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0,  Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
    <parameters>
      <parameter value="System.Data.SqlServerCe.4.0" />
    </parameters>
  </defaultConnectionFactory>
</entityFramework>
    <connectionStrings>
        <add name="ModelContext"
             connectionString="data source=database.sdf"
             providerName="system.data.sqlserverce.4.0" />
    </connectionStrings>
</configuration> 
```

With this, Test on connection is shown successful. Even, tree on left is also populated. But when I run any query, it throws exception as follows: Method not found: 'System.Data.Entity.DbSet`1 InventoryModelContext.get_xxx()'.

**EDIT**: Also, note that this seems to be compilation error!

Any solution or workaround? Am I missing something?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:44:40.213

我也遇到了这个问题，它没有任何明显的原因就开始了 - 没有改变我的环境中的任何东西。

我正在使用 EF4.2 Poco、LINQPad 4.42.01

***为了解决我开始以Adminstartor*****的身份运行 LINQPad**，它解决了它。我不确定是什么改变了它，我有一段时间没有使用 LINQPad，所以可能是 LINQPad 的一些自动更新或类似的东西。

**更新：**重新安装后，由于某种原因，Administor 技巧不起作用，我发现的一个新方法是先查询而不指定数据库（在右上角，它说`<None>`），然后我收到一个错误，我正在查询的内容没有存在于这个上下文中，然后我将数据库设置为正确的上下文，它就可以工作了。

仍然不确定是什么导致了它。

# .net - 显示表单时出现内部异常错误

> ID：10160356
> 
> 赞同：0
> 
> 时间：2012-04-15T07:42:27.047
> 
> 标签：.net, vb.net, forms

在过去的一个小时里，每当我尝试打开表单时，都会弹出一个错误；

创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：索引超出了数组的范围。

对于简单的代码，例如；

```
formbooking.show() 
```

每当我以任何方式引用此表单时，都会弹出该错误。我最近没有做任何与该表格相关的事情，我不知道问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:44:44.860

当您尝试显示表单时，需要对其进行构造。这意味着在该`sub new()`方法中，您有一些错误的代码引用了不存在的数组索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:50:18.073

通常当这种情况发生在我身上时，我有一个使用一些外部值索引的数组，并且正在传递的数据大于数组的尺寸。您将需要在您的新子例程上设置一个断点并逐步执行您的程序以确定问题出在哪里。

# jsp - How to locate AlloyUI combobox in liferay JSP file?

> ID：10160360
> 
> 赞同：0
> 
> 时间：2012-04-15T07:44:08.653
> 
> 标签：jsp, liferay

Does AlloyUI has combobox? How can I locate one in my JSP file in Liferay? and how can I fill it from database?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:15:28.393

jsp：

```
<aui:form action="<%=actionUrl%>" method="post">
    <aui:select name="city" label="What city do you prefer?" id="selectedCity">
        <aui:option value="Moskau" label="Moskau" selected="${lastSelectedCity=='Moskau'}"/>
        <aui:option value="New Your" label="New York" selected="${lastSelectedCity=='New York'}"/>
        <aui:option value="London" label="London" selected="${lastSelectedCity=='London'}"/>
        <aui:option value="Berlin" label="Berlin" selected="${lastSelectedCity=='Berlin'}"/>
    </aui:select>
</aui:form> 
```

爪哇动作：

```
@Override
    public String render(PortletConfig portletConfig, RenderRequest request, RenderResponse renderResponse)
            throws Exception {

        request.setAttribute("lastSelectedCity", lastSelectedCity);

        return "/html/next.jsp";
    } 
```

# php - 如何在 wordpress 上创建自己的自定义函数

> ID：10160361
> 
> 赞同：0
> 
> 时间：2012-04-15T07:44:29.990
> 
> 标签：php, wordpress

我想将我的页面内容分发到 wordpress 主题的各种文件中。正如我对页眉、侧边栏和页脚所做的那样。

就像是

```
<?php get_imageslidercontent(); ?> 
```

或其他任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T07:56:04.943

您应该将此函数放在主题根文件夹中的 functions.php 文件中，然后您可以在主题中使用您的函数

# c# - Deserializing UTF8 encoded Byte[] in javascript in the browser or in the node.js application?

> ID：10160366
> 
> 赞同：3
> 
> 时间：2012-04-15T07:45:02.810
> 
> 标签：c#, javascript, node.js, socket.io, rabbitmq

I have an event class in c# :

```
public class AreaInterventoCreata{
    //public properties
}
var message= new AreaInterventoCreata(); 
```

I create an instance of this class server side. My aim then is to communicate this creation to the clients that have subscribed to this kind of event.

Therefore I am passing it to my broker RabbitMQ the follwing `byte[]` :

```
var responseBody = Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(message))
responseChannel.BasicPublish(
                             "",                 // exchange 
                             properties.ReplyTo, // routingKey
                             responseProperties, // basicProperties 
                             responseBody);      // body 
```

Some node.js server has subscribed to this kind message :

```
q.subscribe(function (message) { 
    for (var i = 0; i < sockets.length; i++) {
        console.log('_sockets[' + i + '] emitted');
        sockets[i].emit(event, message);
    }
}); 
```

This node.js has himself received socket.io connection coming from browsers, and therefore can perform a push to these sockets, eg these browsers :

```
sockets[i].emit(event, message); 
```

Finally I receive this message in my browser :

```
var socket = io.connect('http://localhost:8091');
socket.on('Events_AreaIntervento_AreaInterventoCreata:Events', function (data) {
    var json = Utf8.decode(data);
}); 
```

When I inspect data trough firebug , it is an object data with an array of number define as `data.data`.

I assumed this array of number to be the array of byte i have given at the beginning of the process. Am I wrong in this assumption ?

*   *How could I deal with it so that I can work with some normal object in javascript?*****(found it!)****
***   Should I translate it in json directly at the node.js server level? is it more efficient? more something to do so?**

 **ok found it (at least part of it) with the help of this [website](http://www.webtoolkit.info/javascript-utf8.html)

```
var Utf8 = {
    // public method for url decoding
    decodeArray: function (utfArray) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while (i < utfArray.length) {

            c = utfArray[i];

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if ((c > 191) && (c < 224)) {
                c2 = utfArray[i + 1];
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utfArray[i + 1];
                c3 = utfArray[i + 2];
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }
        return string;
    }
} 
```

to be used like this

```
<script>
    var socket = io.connect('http://localhost:8091');
    socket.on('Events_AreaIntervento_AreaInterventoCreata:Events', function (msg) {
        var jsonString = Utf8.decodeArray(msg.data);
        alert(jsonString);
    });
</script> 
```

***But I still wonder if it is better to do it on the client, or on the node.js server, and how to do it on the node.js server ?***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:00:31.680

我以前从未使用过 RabbitMQ，但您将 JSON 字符串从 .NET 传递到 RabbitMQ 的方式似乎有问题。您的“responseProperties”可能不正确，因为在 nodejs 或客户端上使用 JSON 之前，您不需要解码 UTF-8 数组。**

# java - 登录密码authintication php的Android错误？

> ID：10160367
> 
> 赞同：0
> 
> 时间：2012-04-15T07:45:05.727
> 
> 标签：java, android

您好，我是 android 开发的新手，我从未见过这种类型的错误，也不知道这意味着什么我放了中断来调试错误，它说。

04-15 00:15:37.227: E/JSON(360): **Deprecated : 在第****80**行的**C:\xampp\php\PEAR\Config.php**中不推荐使用通过引用分配 new 的返回值

 **我下载了 xampp 服务器并没有改变任何东西，我将我的 php 文件存储在名为 android_login_api 帮助的 htdocs 下的文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:25:52.413

不推荐使用意味着不应再使用该功能或​​命令。如果您使用较新的编译器/库编译您的代码，那么您编写的代码可能会收到这些消息。**

# c# - 如何在c#中使用正则表达式分割这一行

> ID：10160373
> 
> 赞同：0
> 
> 时间：2012-04-15T07:48:16.123
> 
> 标签：c#, regex

输入

`-n. 1 geographical map or plan, esp. for navigation. 2 sheet of information in the form of a table, graph, or diagram. 3 (usu. in pl.) colloq. listing of the currently best-selling pop records. -v. make a chart of, map. [Latin charta: related to *card1]`

我需要这样拆分
`-n.`
`1 geographical map or plan, esp. for navigation.`
`2 sheet of information in the form of a table, graph, or diagram.`
`3 (usu. in pl.) colloq. listing of the currently best-selling pop records.`
`-v.`
`make a chart of, map. [Latin charta: related to *card1]`

我的表情在这里 `((—\w\.)|(\d\s))(([^\d—])*)`

但这失败了`card1]`

如何解决这个问题？

如何否定`digit followed with space`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:28:19.500

利用前瞻：

```
((-\w\.)|(\d\s))(([^\d-]|(\d(?!\s))|(-(?!\w\.)))*) 
```

您需要任意数量的非数字或非破折号 ( `[^\d-]`)，但您还希望允许数字后面不跟空格`(\d(?!\s))`和连字符，后面不跟字符和句点`(-(?!\w\.))`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T08:04:41.623

您应该对输入字符串执行[Regex.Escape 。](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)

# alignment - 爆炸两个来自 python 脚本的序列

> ID：10160375
> 
> 赞同：1
> 
> 时间：2012-04-15T07:48:19.250
> 
> 标签：alignment, bioinformatics, biopython

我有一个蛋白质对列表，我想将“BLAST Two Sequences”的速度和准确性与 Smith-Waterman 程序进行比对。我知道 NCBI 网站上有一个“Blast Two Sequences”选项，但我想从 python 脚本运行它。也许 Biopython 有这个能力？如果我不能使用 Blast Two Sequences，我将比较 Smith-Waterman 的不同版本，但这不会那么令人兴奋 :) 或者，如果有人对涉及比较蛋白质对的生物信息学大四项目有其他想法，请不要犹豫，让我知道！提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:14:00.007

[Biopython Tutorial and Cookbook 的第 7 章（BLAST）](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc81)应该有你要找的东西。

该`NCBBI`模块允许与在线 BLAST 工具交互，`Bio.Blast.Applications`具有许多不同的局部比对实用程序，并且该`Bio.Seq`模块包含与不同序列交互的对象。

Biopython 的[文档](http://biopython.org/wiki/Documentation)非常好，[API](http://biopython.org/DIST/docs/api/)通常写得很好。如果您正在寻找一个有趣的项目，我建议您阅读[教程和食谱](http://biopython.org/DIST/docs/tutorial/Tutorial)——它很好地概述了 Biopython 所提供的内容。

# python - python的“.format”函数

> ID：10160390
> 
> 赞同：5
> 
> 时间：2012-04-15T07:51:41.217
> 
> 标签：python, string, dictionary, formatting

最近，我发现`''.format`函数非常有用，因为与`%`格式化相比，它可以大大提高可读性。尝试实现简单的字符串格式化：

```
data = {'year':2012, 'month':'april', 'location': 'q2dm1'}

year = 2012
month = 'april'
location = 'q2dm1'
a = "year: {year}, month: {month}, location: {location}"
print a.format(data)
print a.format(year=year, month=month, location=location)
print a.format(year, month, location) 
```

虽然前两个打印按我的预期进行格式化（是的，`something=something`看起来很丑，但这只是一个例子），最后一个会 raise `KeyError: 'year'`. python中是否有任何技巧来创建字典，以便它会自动填充键和值，例如`somefunc(year, month, location)`输出`{'year':year, 'month': month, 'location': location}`？

我对 python 很陌生，找不到关于这个主题的任何信息，但是这样的技巧会大大改善和缩小我当前的代码。

在此先感谢并原谅我的英语。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:01:34.597

第一个`print`应该是

```
print a.format(**data) 
```

此外，如果你正在寻找一些捷径，你可以写一个类似的，没有太大的区别。

```
def trans(year, month, location):
    return dict(year=year, month=month, location=location) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T13:03:28.557

```
data = {'year':2012, 'month':'april', 'location': 'q2dm1'}
a = "year: {year}, month: {month}, location: {location}"

print a.format(**data) 
```

..是你要找的。它在功能上与doing`.format(year=data['year'], ...)`或您提供的其他示例相同。

double-asterix 是一个很难搜索的东西，所以它通常被称为“kwargs”。这是关于此语法的一个[很好的 SO 问题](https://stackoverflow.com/questions/1769403/understanding-kwargs-in-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T07:53:03.093

您可以使用`dict()`可调用的：

```
dict(year=yeah, month=month, location=location) 
```

传递关键字参数时，它会创建一个包含您指定为 kwargs 的元素的 dict。

如果您不想指定参数名称，请使用以下位置样式`.format()`：

```
>>> a = 'year {0} month {1} location {2}'
>>> print a.format(2012, 'april', 'abcd')
year 2012 month april location abcd 
```

但是，如果您尝试做类似于[`compact()`PHP](http://php.net/compact)中所做的事情（创建一个将变量名称映射到其值的字典，而不单独指定名称和变量），请不要这样做。它只会导致丑陋的不可读代码，并且无论如何都需要讨厌的黑客攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T09:54:41.617

你可以通过`locals()`：

```
a.format(**locals()) 
```

当然，这有问题：您必须在本地传递所有内容，并且很难理解重命名或删除变量的效果。

更好的方法是：

```
a.format(**{k:v for k,v in locals() if k in ('year', 'month')})
# or; note that if you move the lambda expression elsewhere, you will get a different result
a.format(**(lambda ld = locals(): {k:ld[k] for k in ('year', 'month')})()) 
```

但这不再简洁了，除非你用一个函数来包装它（它当然必须接受一个 dict 参数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-29T17:29:12.587

从[Python 3.6](https://docs.python.org/3/whatsnew/3.6.html)开始，您还可以使用新的 [**Formatted string literals (f-strings)**](https://docs.python.org/3/whatsnew/3.6.html#pep-498-formatted-string-literals)，您可以将其与**变量**一起使用：

```
year = 2012
month = 'april'
location = 'q2dm1'
a = f"year: {year}, month: {month}, location: {location}"
print(a) 
```

或**字典**：

```
data = {'year': 2012, 'month': 'april', 'location': 'q2dm1'}
a = f"year: {data['year']}, month: {data['month']}, location: {data['location']}"
print(a) 
```

注意`f`字符串文字前的前缀。

> [**PEP 498：格式化字符串文字**](https://www.python.org/dev/peps/pep-0498/)：
> 
> 格式化字符串文字以'f'为前缀，类似于 str.format() 接受的格式字符串。它们包含由花括号包围的替换字段。替换字段是表达式，在运行时进行评估，然后使用 format() 协议进行格式化：
> 
> ```
> >>>
> >>> name = "Fred"
> >>> f"He said his name is {name}."
> 'He said his name is Fred.'
> >>> width = 10
> >>> precision = 4
> >>> value = decimal.Decimal("12.34567")
> >>> f"result: {value:{width}.{precision}}"  # nested fields
> 'result:      12.35' 
> ```
> 
> ...

# excel - 读取一列Excel文件时，如何在不选择单元格的情况下定义单元格坐标？

> ID：10160393
> 
> 赞同：0
> 
> 时间：2012-04-15T07:53:29.117
> 
> 标签：excel, vba

谁能告诉我如何改进这个宏？

宏所做的只是读取一个 Excel 文件以获取要在应用程序中更新的帐户列表（SmarTerm Beta）。它在技术上已经实现了目标，但是有没有办法对其进行编码，以便在读取 Excel 文件时，读取帐号的单元格坐标以及写入输出的单元格坐标不依赖于“预选”的单元格？选择单元格的风险在于，如果有人在宏运行时意外选择了不同的单元格，那么一切都会搞砸。

这是我当前的代码：

```
Public oExcelObj As Object

Function WaitSystem(Optional NoDialog as Variant) As Boolean
    Dim nContinue as Integer
    Dim nTimeOut as Integer 'In seconds.
    'The default timeout for each command is 3 minutes. 
    'Increase this value if your host requires more time
    'for each command.
    nTimeOut = 10
    If IsMissing(NoDialog) then NoDialog = False
    'Wait for response from host.
    Session.EventWait.Timeout = nTimeOut
    Session.EventWait.EventType = smlPAGERECEIVED
    Session.EventWait.MaxEventCount = 1
    WaitSystem = True
    If Session.EventWait.Start = smlWAITTIMEOUT Then
        If NoDialog Then
            WaitSystem = False
            Else
                nContinue = QuerySyncError()
                If nContinue <> ebYes then WaitSystem = False
        End If
    End If
    Set LockStep = Nothing
End Function

'Establish link.  Search for Excel. 
Function OleLinkConnection
    Const XlMaximized = &HFFFFEFD7
    Titlebar$ = AppFind$("Microsoft Excel")
    If Titlebar$ <> "" Then
        bIsExcelActive = True               
        If AppGetState(Titlebar$) = ebMinimized Then                
            AppSetState 2, Titlebar$
        End If
        Else
            bIsExcelActive = False              
    End If
    If bIsExcelActive Then
        'Create Excel Object using current instance of Excel.
        Set oExcelObj = GetObject(, "Excel.Application")
        Else
            'Create Excel Object using a new instance of Excel.
            Set oExcelObj = CreateObject("Excel.Application")
    End If
    Version = oExcelObj.Application.Version
    oExcelObj.ScreenUpdating = True
    oExcelObj.Displayalerts = True
    oExcelObj.Visible = true
End Function

Sub JPBmacro
    Dim AccountNumber As String
    Dim Temp As Integer
    Begin Dialog StartDialogTemplate ,,211,74,"Run JPBmacro?"
    OKButton 60,12,92,20,.Proceed
    CancelButton 60,40,92,20,.Exit
    End Dialog
    Dim StartDialog As StartDialogTemplate
    r% = Dialog(StartDialog)
    If r% = 0 Then End
    g$ = "G:\DATA\outputfile.xlsx"
    oleCode = OleLinkConnection
    oExcelObj.Workbooks.Open g$
    oExcelObj.Range("A1").Select ‘&lt;----This selects the cell from which all coordinates are based off of.  The coordinates of oExcelObj.ActiveCell.Offset(Y,X).Value VBA depend on selecting a cell.

    NEXTACCOUNT:
        Temp = 0
        AccountNumber = oExcelObj.ActiveCell.Offset(Temp,0).Value
        While AccountNumber <> ""
            Session.SendKey "CLEAR"
            If WaitSystem = False Then End
            Session.Send "ACTU " & AccountNumber
            Session.SendKey "ENTER"
            If WaitSystem = False Then End
            If Trim(Session.ScreenText(4,6,1,22)) = "INVALID ACCOUNT NUMBER" Or Trim(Session.ScreenText(4,6,1,19)) = "ACCOUNT NOT ON FILE" Then
                oExcelObj.ActiveCell.Offset(Temp,1).Value = Trim(Session.ScreenText(4,6,1,22))
                GoTo RESTARTLOOP
            End If 

            UPDATEIOV:
                If Trim(Session.ScreenText(13,76,1,1)) = "Y" Then
                    oExcelObj.ActiveCell.Offset(Temp,1).Value = "Account already flagged as institutional."
                    Else
                        Session.Row = 13
                        Session.Column = 76
                        Session.send "Y"
                        Session.SendKey "ENTER"
                        If WaitSystem = False Then End
                        oExcelObj.ActiveCell.Offset(Temp,1).Value = Trim(Session.ScreenText(24,2,1,50))
                End If

            RESTARTLOOP:
                Temp = Temp + 1
                AccountNumber = oExcelObj.ActiveCell.Offset(Temp,0).Value
        Wend

    ENDNOW:
        oExcelObj.Workbooks.Close
        MsgBox "All Done!"

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:32:15.240

鉴于 assylias 的评论以及另一位海报已经用这种方法“回答”：

我看不到在哪里`oExcelObj`实例化？或者您如何指代特定的工作表。

不管怎样，

1.  您可以通过设置范围来避免选择，即`Set rng1 = oExcelObj.Sheets(1).Range("A1")`
    ，然后使用`rng1`.
2.  代码运行时用户将无法干预

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:55:03.140

为什么不保留对第一个单元格的引用？

```
Dim rng as Range
Set rng = oExcelObj.Range("A1")
i=1
...
x = rng.Cell(i,1).Value

'Or faster yet is reading all the values into an variant array.
Dim array() as Variant
array = rng.Resize(N,M).Value

' Work with array as
x = array(i,1) 
```

# delphi - TVirtualStringTree：数据在 OnMeasureItem 事件和 OnGetText 事件之间发生变化

> ID：10160396
> 
> 赞同：7
> 
> 时间：2012-04-15T07:53:45.637
> 
> 标签：delphi, virtualtreeview, tvirtualstringtree

我有一个数组保存数据将在 TVirtualStringTree 上表示。这个数组是线程安全的和可锁定的。并由另一个线程增长。

我的问题是，当 VST 执行 OnMeasureItem 事件来测量节点的高度时，用于测量的数据在使用 OnGetText 事件打印数据时会发生变化。

我检查了事件的执行顺序，这对我的设计不利。首先它为所有未初始化的节点触发 OnMeasureItem 事件，然后它开始调用 OnGetText 事件。我的意思是，假设我们有 3 个节点，事件将按该顺序触发：

```
OnMeasureItem for node 1
OnMeasureItem for node 2
OnMeasureItem for node 3
OnGetText for node 1
OnGetText for node 2
OnGetText for node 3 
```

但我需要这样的东西才能锁定：

```
OnMeasureItem for node 1
OnGetText for node 1

OnMeasureItem for node 2
OnGetText for node 2

OnMeasureItem for node 3
OnGetText for node 3 
```

保持 OnMeasureItem 和 OnGetText 事件之间获得的数据同步的最佳方法是什么？

我不想在所有 OnMeasureItem() 和 OnGetText() 事件期间锁定我的数组。

谢谢你。

添加了onTimer：

```
procedure TMainForm.SyncHexLog;
begin
  HexLog.BeginUpdate;
  Try
    if (HexLog.RootNodeCount <> FirpList.ComOperationCountLagged) then
      begin
          HexLog.RootNodeCount := FirpList.ComOperationCountLagged;

          // measure for fast scrolling
          HexLog.ReInitNode(HexLog.GetLastNoInit(), True);    

          if FAutoScroll then
          begin
            HexLog.ScrollIntoView(HexLog.GetLast, False, False);
          end;
      end;
  Finally
    HexLog.EndUpdate;
  End;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T10:16:09.757

我会尝试通过`vsHeightMeasured`从节点的状态中删除并随后调用该`MeasureItemHeight`方法来手动强制项目测量。它会`OnMeasureItem`再次触发。问题*再次出现*在这里，因为您不应该多次测量项目节点的文本被更改，但`OnMeasureItem`由于滚动的东西仍然必须处理。

因此，正如您在评论中提到的，您可以将自己的`NodeMeasured`标志包含到您的数据结构中，并在节点的文本发生更改时重置它（当您的日志项中的某些数据发生更改时），并在您通过`OnGetText`强制传递事件后设置它节点高度测量。这是一个伪代码：

```
procedure TForm1.VirtualStringTreeGetText(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Column: TColumnIndex; TextType: TVSTTextType;
  var CellText: string);
begin
  ThreadList.LockList;
  try
    // check if the own flag which indicates that the text is new, that
    // the data has changed since the last time you were here in OnGetText
    // is False and if so, force the node measurement to set current node
    // height and set this flag to True to remember we already did this
    if not ThreadList.Items[Node.Index].NodeMeasured then
    begin
      // fake the node measurement, remove the measured flag
      Exclude(Node.States, vsHeightMeasured);
      // this will trigger the OnMeasureItem again because of removed
      // vsHeightMeasured flag from the node's state
      VirtualStringTree.MeasureItemHeight(VirtualStringTree.Canvas, Node);
      // set the NodeMeasured flag to remember we've measured the item
      ThreadList.Items[Node.Index].NodeMeasured := True;
    end;
    // here set the node's text and unlock your thread safe list
    CellText := ThreadList[Node.Index].SomeText;
  finally
    ThreadList.UnlockList;
  end;
end; 
```

并且在您的线程中，当数据发生更改时，您必须将此`NodeMeasured`标志设置为 False。

```
if LogHasChanged then
begin
  ThreadList.LockList;
  try
    ThreadList.Items[X].NodeMeasured := False;
    ThreadList.Items[X].SomeText := 'Something new';
  finally
    ThreadList.UnlockList;
  end;
end; 
```

# r - R：找到最近的索引

> ID：10160400
> 
> 赞同：7
> 
> 时间：2012-04-15T07:54:35.980
> 
> 标签：r, vectorization, nearest-neighbor

我有两个有几千点的向量，但在这里概括：

```
A <- c(10, 20, 30, 40, 50)
b <- c(13, 17, 20) 
```

我怎样才能得到`A`最接近*的*指标`b`？预期的结果是`c(1, 2, 2)`。

我知道`findInterval`只能找到第一个出现，而不是最近的出现，而且我知道它`which.min(abs(b[2] - A))`正在变暖，但我无法弄清楚如何对其进行矢量化以使用 和 的长`A`向量`b`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T08:02:10.587

你可以把你的代码放在一个 sapply 中。我认为这与 for 循环具有相同的速度，因此在技术上并没有矢量化：

```
sapply(b,function(x)which.min(abs(x - A))) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T12:25:37.963

FindInterval 让您非常接近。您只需要在它返回的偏移量和下一个偏移量之间进行选择：

```
#returns the nearest occurence of x in vec
nearest.vec <- function(x, vec)
{
    smallCandidate <- findInterval(x, vec, all.inside=TRUE)
    largeCandidate <- smallCandidate + 1
    #nudge is TRUE if large candidate is nearer, FALSE otherwise
    nudge <- 2 * x > vec[smallCandidate] + vec[largeCandidate]
    return(smallCandidate + nudge)
}

nearest.vec(b,A) 
```

返回 (1,2,2)，并且在性能上应该与 FindInterval 相当。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T00:45:48.980

这是一个使用 R 经常被忽视的`outer`功能的解决方案。不确定它是否会表现得更好，但它确实避免了`sapply`.

```
A <- c(10, 20, 30, 40, 50)
b <- c(13, 17, 20)

dist <- abs(outer(A, b, '-'))
result <- apply(dist, 2, which.min)

# [1] 1 2 2 
```

# audio - openal：获取源的当前播放位置

> ID：10160401
> 
> 赞同：2
> 
> 时间：2012-04-15T07:54:55.527
> 
> 标签：audio, streaming, core-audio, openal

您如何获得公开赛中播放源的当前位置？我想我的意思是，在音频经过您的缓冲区、openal 的缓冲区、硬件缓冲区等之后，当前在硬件上播放的位置是什么。

我对 api 进行了简要介绍，但我不太确定 AL_SAMPLE_OFFSET/AL_BYTE_OFFSET/AL_SEC_OFFSET 代表什么。如果我正在播放流媒体源，我似乎没有得到不断增加的数字，似乎我在当前播放缓冲区中获得了一个位置？（或所有缓冲区？）

例如，在播放时，我循环并运行以下代码：

```
alGetSourcef( sources[0], AL_SAMPLE_OFFSET, &secoffset );
printf(" - %f samples\n", secoffset); 
```

并得到

```
 - 0.000000 samples
 - 8192.000000 samples
 - 9216.000000 samples
 - 5632.000000 samples 
```

这似乎没有增加。

这是在带有最新 xcode 4.3 的 macos 10.7 上，但我假设它在其他平台上应该是相似的。

更新：

我尝试增加缓冲区大小，它实际上看起来只是当前播放缓冲区中的当前位置：

```
 - 0.000000 bytes
 - 18432.000000 bytes
 - 20480.000000 bytes
 - 36864.000000 bytes
 - 36864.000000 bytes
 - 55296.000000 bytes
 - 55296.000000 bytes
 - 73728.000000 bytes
refilling buffer 2408
re-queued buffer 2408
 - 16384.000000 bytes
 - 34816.000000 bytes
 - 34816.000000 bytes
 - 51200.000000 bytes
 - 51200.000000 bytes
 - 69632.000000 bytes
refilling buffer 2409
re-queued buffer 2409 
```

因此，考虑到这一点，是否有一种体面的方式来跟踪公开赛通过多个不同的缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:44:52.583

这些偏移量来自排队缓冲区的开头。您需要手动计算已经未排队的缓冲区的大小并添加到此数字。

在这里，如果您阅读[文档](http://connect.creativelabs.com/openal/Documentation/OpenAL%201.1%20Specification.pdf)，它在第 40 页上说：

> 该位置相对于源的所有排队缓冲区的开头，并且 set 调用遍历的任何排队缓冲区都将被标记为已处理。

# linq-to-entities - linq 到实体不同的方法

> ID：10160404
> 
> 赞同：-1
> 
> 时间：2012-04-15T07:55:39.577
> 
> 标签：linq-to-entities

我有一张名为 CateringPurchaseOrder 的桌子。该表包含一个名为“PONO”的列。该列不止一次包含相同的值。我想根据“pono”列中的唯一值检索记录。

例子：

```
pono  column1
1        value1 
1        value2  
2        value3  
2        value4 
```

输出：

```
pono    coulm1 
1           value1  
2           value3 
```

我尝试过使用以下代码：

```
IEnumerable<CateringPurchaseOrder> order =   entites.CateringPurchaseOrders.Distinct<CateringPurchaseOrder>(new CateringPorderComparer());

public class CateringPorderComparer : IEqualityComparer<CateringPurchaseOrder>
{
    bool IEqualityComparer<CateringPurchaseOrder>.Equals(CateringPurchaseOrder p1, CateringPurchaseOrder p2)
    {
        return p1.P_O_No == p2.P_O_No;
    }

    int IEqualityComparer<CateringPurchaseOrder>.GetHashCode(CateringPurchaseOrder obj)
    {
        return obj.P_O_No.GetHashCode();
    }
} 
```

我收到以下错误：

```
LINQ to Entities does not recognize the method 'System.Linq.IQueryable`1[MilitarymessModel.CateringPurchaseOrder] Distinct[CateringPurchaseOrder](System.Linq.IQueryable`1[MilitarymessModel.CateringPurchaseOrder], System.Collections.Generic.IEqualityComparer`1[MilitarymessModel.CateringPurchaseOrder])' method, and this method cannot be translated into a store expression. 
```

你有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T08:42:38.393

Linq to entity 无法将您的 CateringPorderComparer 解析为 SQL。

如果这不是问题，您可以在 C# 代码中执行 Distinct 操作，而不是让数据库执行此操作。根据有多少行和有多少重复项，这对您来说可能不是问题。

要在数据库查询之后执行 Distinct，请在执行 distinct 之前将其转换为 Eumerable：

```
entites.CateringPurchaseOrders.AsEnumerable().Distinct<CateringPurchaseOrder>(
new CateringPorderComparer()); 
```

# java - JMAP -dump 未在 java 上执行：runtime.exec()

> ID：10160407
> 
> 赞同：0
> 
> 时间：2012-04-15T07:55:45.673
> 
> 标签：java, unix, heap-dump, jmap

我试图执行 'jmap -dump:format =b; file" 命令在 runtime.exec() 中，但它不会在其他命令（如日期、密码）工作正常的地方执行。有人知道为什么吗？

公共静态无效命令（字符串 s）{

```
 runtime=Runtime.getRuntime();

    try {
        System.out.println(" Creating Heap Dump ");
        process=runtime.exec("jmap -dump:format=b,file=D:/heapdump_2012APR10/heapdump_date +%d%b%Y-%H_%M_%S.bin 4478");
        System.out.println("Heap Dump Created. Zipping the file");
        process=runtime.exec("gzip *.bin");
        System.out.println("Succesfully zipped");

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:19:28.490

您连续调用两个进程

```
process=runtime.exec("jmap -dump:format=b,file=D:/heapdump_2012APR10/heapdump_date +%d%b%Y-%H_%M_%S.bin 4478");
process=runtime.exec("gzip *.bin"); 
```

无需等待第一个终止。

然后你永远不会消耗你执行的进程流，或者检查他们的退出代码。

所以请按照@Andrew Thompson 的建议阅读这篇[文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。它很好地解释了如何从 Java 启动外部进程。

# javascript - EmberJS 应用程序中列表 + 详细信息 + 编辑视图的数据处理

> ID：10160410
> 
> 赞同：2
> 
> 时间：2012-04-15T07:56:07.243
> 
> 标签：javascript, data-binding, ember.js

我正在构建一个需要三个组件的 EmberJS 应用程序。项目列表、每个项目的详细视图和每个项目的编辑视图。在这种特殊情况下，我还没有找到任何关于如何管理数据的好的解释或示例。

你可以在这个要点上找到我现在所拥有的简化和清理的示例：[https ://gist.github.com/2390740](https://gist.github.com/2390740)

我想避免的是拥有两个数据副本，但我能够将数据放入详细视图的唯一方法是制作它的副本，这远非理想。

有没有办法从 DetailController 引用 ListController 中数组中的项目？这样，当项目在详细视图中更新时，列表视图会随着更改自动更新。

我想要实现的是 ListController 加载一个包含每个项目的基本信息的列表，然后 DetailController 加载所选项目的所有可用信息。如果列表和详细视图的客户端数据存储可能相同，那么如果用户返回到已加载的项目，DetailController 就不必再次加载详细信息。另一个好处是，如果用户更改任何内容然后返回列表，列表视图就已经是最新的了。

注意：我知道此示例中缺少编辑视图，我只是想让详细视图和列表之间的数据绑定首先起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:19:52.663

我在我的[提要阅读器 ember 应用程序](https://github.com/mattkatz/Wordprss)中正是这样做的。做到这一点的方法是有一个带有内容属性的 detailController。将所有详细视图的内容绑定到 detailController。在 listcontroller 中选择一个项目应该将 detailcontroller 的 content 属性设置为该项目。完毕！

# cobol - COBOL 输出不变。无法使用记事本查看输出。

> ID：10160413
> 
> 赞同：0
> 
> 时间：2012-04-15T07:57:06.627
> 
> 标签：cobol

我正在尝试查看我正在处理的这个程序的输出。我被指示使用记事本，但每次打开文件时，我都会得到旧的输出，然后再对其进行更改。我不知道这是我的编程错误还是技术失误。各位大佬可以看看是怎么回事吗？

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID. CH0402Practice.
   ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
       SELECT PAYROLL-MASTER
           ASSIGN TO "C0402.DAT"
           ORGANIZATION IS LINE SEQUENTIAL.
       SELECT PRINT-FILE
           ASSIGN TO "C0402.RPT".
   DATA DIVISION.
   FILE SECTION.
   FD  PAYROLL-MASTER
       LABEL RECORDS ARE STANDARD
       RECORD CONTAINS 80 CHARACTERS
       BLOCK CONTAINS 20 RECORDS.
   01  MASTER-REC.
       05  EMP-NO-IN                       PIC X(5).
       05  NAME-IN                         PIC X(20).
       05  LOC-CODE-IN.
           10  TERR-NO-IN                  PIC XX.
           10  OFFICE-NO-IN                PIC XX.
       05  SALARY-IN                       PIC 9(6).
       05  SS-NO-IN                        PIC 9(9).
       05  DEP-IN                          PIC 99.
       05  JOB-CLASS-IN                    PIC 99.
       05                                  PIC X(32).
   FD  PRINT-FILE
       LABEL RECORDS ARE OMITTED
       RECORD CONTAINS 80 CHARACTERS.
   01  REPORT-OUT                          PIC X(80).

   WORKING-STORAGE SECTION.
   01  ARE-THERE-MORE-RECORDS              PIC XXX.
   01  HEADING-LINE1.
       05                                  PIC X(33)  VALUE SPACES.
       05                                  PIC X(15)  VALUE
           "PAYROLL LISTING".
       05                                  PIC X(32)  VALUE SPACES.

   01  HEADING-LINE2.
       05                                  PIC X(5)   VALUE SPACES.
       05                                  PIC X(10)  VALUE
           "EMP NUMBER".
       05                                  PIC X(4)   VALUE SPACES.
       05                                  PIC X(4)   VALUE
           "NAME".
       05                                  PIC X(16) VALUE
           "SALARY".
       05                                  PIC X(7)  VALUE SPACES.
       05                                  PIC X(5)  VALUE
           "SS NO".
       05                                  PIC X(9)  VALUE
           "DEPENDENT".
       05                                  PIC X(25) VALUE SPACES.
   01  DETAIL-LINE.
       05                                  PIC X(5).
       05  EMP-NO-OUT                      PIC X(5).
       05                                  PIC X(14).
       05  NAME-OUT                        PIC X(20).
       05                                  PIC X(4).
       05  SALARY-OUT                      PIC 9(6).
       05                                  PIC X(7).
       05  SS-NO-OUT                       PIC 9(9).
       05                                  PIC X(7).
       05  DEP-OUT                         PIC 99.
       05                                  PIC X(21).

   PROCEDURE DIVISION.
   100-MAIN-MODULE.
       PERFORM 100-INITIALIZATION-MODULE.
       PERFORM 200-PRINT-MODULE
            UNTIL ARE-THERE-MORE-RECORDS = 'NO '.
       CLOSE PAYROLL-MASTER
             PRINT-FILE.
       STOP RUN.
   100-INITIALIZATION-MODULE.
       OPEN INPUT  PAYROLL-MASTER
            OUTPUT PRINT-FILE.
       MOVE 'YES' TO ARE-THERE-MORE-RECORDS.
       PERFORM 300-TOP-OF-PAGE-MODULE.
       PERFORM 600-READ-MODULE.
   200-PRINT-MODULE.
       MOVE SPACES TO REPORT-OUT.
       MOVE EMP-NO-IN TO EMP-NO-OUT.
       MOVE NAME-IN TO NAME-OUT.
       MOVE SALARY-IN TO SALARY-OUT.
       MOVE SS-NO-IN TO SS-NO-OUT.
       MOVE DEP-IN TO DEP-OUT.
       MOVE DETAIL-LINE TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 1 LINES.
       PERFORM 600-READ-MODULE.

   300-TOP-OF-PAGE-MODULE.
       MOVE HEADING-LINE1 TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 1 LINES.
       MOVE SPACES TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 1 LINES.
       MOVE HEADING-LINE2 TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 1 LINES.

   600-READ-MODULE.
       READ PAYROLL-MASTER
            AT END MOVE 'NO ' TO ARE-THERE-MORE-RECORDS
       END-READ. 
```

在这里输入代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:24:43.543

通常的嫌疑人是

1.  你没有改变你认为你在程序中改变的东西。
2.  您在再次运行程序之前没有重新编译程序，因此您最终运行了旧版本的程序，当然，产生了相同的结果。
3.  您从另一个文件夹运行程序，该文件夹将新的输出文件放在您认为的其他位置，因此您并没有真正查看新的输出文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T00:17:17.593

确保再次运行程序时没有打开输出文件。另外，找一个更好的文本编辑器，比如 Notepad++ 来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T06:35:23.547

删除或重命名“旧”文件以确保。您可以添加“eyecatcher”写入来验证。
如果文件时间戳正在更改但输出不是您正在运行旧版本。您是否更改了代码中的文件名但正在检查旧名称？

# python - sqlalchemy关联代理的json序列化

> ID：10160416
> 
> 赞同：3
> 
> 时间：2012-04-15T07:57:29.733
> 
> 标签：python, sqlalchemy

我用 . 序列化 SQLAlchemy 映射的对象`json.dumps`。而且我希望我的对象的[关联代理](http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html)属性也能正确序列化。默认情况下它们没有正确序列化，所以我必须编写一个特定的 JSON 编码器：

```
from sqlalchemy.ext.associationproxy import _AssociationList
class MyEncoder(JSONEncoder):
    def default(self, obj):
        if isinstance(obj, _AssociationList):
            return list(obj)
        return JSONEncoder.default(self, obj) 
```

这看起来不太好，因为我需要导入`_AssociationList`SQLAlchemy 私有的。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T15:14:34.323

您可以进行更通用的测试，而不是检查 _AssociationList 特定类型：“喜欢”是一个列表吗？然后将其序列化为列表！（鸭子打字，请参阅[Python：检查对象是列表还是元组（但不是字符串）](https://stackoverflow.com/questions/1835018/python-check-if-an-object-is-a-list-or-tuple-but-not-string)）。

```
def is_sequence(arg):
    return (not hasattr(arg, "strip") and
        hasattr(arg, "__getitem__") or
        hasattr(arg, "__iter__"))

class MyEncoder(JSONEncoder):
    def default(self, obj):
        if is_sequence(obj):
            return list(obj)
        return JSONEncoder.default(self, obj) 
```

这会将集合、元组、_AssociationLists 和列表本身视为列表！但不是字符串、整数等。

# ajax - 如何在一组 ajax 调用之间设置超时？

> ID：10160417
> 
> 赞同：0
> 
> 时间：2012-04-15T07:57:34.533
> 
> 标签：ajax, settimeout, intervals, rotten-tomatoes

我的烂番茄 API 限制为 10 次调用/秒。我总共需要打 50 个电话。

如果我把它们放在一起，很多电话都会被拒绝。

所以我需要在每 10 次调用后给出 1 秒的超时时间。

我该如何实施？这是我的代码：

```
$.get("t250.txt", function (data) {
    var elem = data.split("\n");
    $.each(elem, function(index, item) {
        var $placeholder = $('<div>').appendTo("div.content");

        setTimeout(function() {
            $.ajax({
                type: 'post',
                url: moviesSearchUrl + '&q=' + encodeURI(item) + '&page_limit=1',
                dataType: "jsonp",
                async: false,
                success: searchCallback
            });
        }, 1000);

        function searchCallback(data){});
    }
} 
```

问题仍然存在。此外，页面等待 1 秒加载，然后完全加载所有内容。我`setTimeout`在 for each 循环中给出了函数。因此，似乎没有任何影响。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:03:38.330

`async: false`中删除`$.ajax()`。

**编辑：** 试试这个：

```
var elem;
var timeoutId;
function getURLs(){
    $.get("t250.txt", function (data) {
        elem = data.split("\n");
    });

    timeoutId = setTimeout("sendRequest()", 1000);    
}

var idx = 0;
function sendRequest(){
    if (idx > elem.length-1){
        clearTimeout(timeoutId);
        return;
    }
    var item = elem[idx];
    $.ajax({
        type: 'post',
        url: moviesSearchUrl + '&q=' + encodeURI(item) + '&page_limit=1',
        dataType: "jsonp",
        success: searchCallback
        });
    idx++;   
}

function searchCallback(data) {
//Callback logic
} 
```

# iphone - 如何 NSLog ASCII 无限符号？

> ID：10160419
> 
> 赞同：2
> 
> 时间：2012-04-15T07:57:37.443
> 
> 标签：iphone, objective-c

我有

```
NSLog(@"%c", (char) 236); 
```

试图打印 ASCII 中定义的无限符号。但这不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T08:09:37.960

假设它不必是 C `char`，您可以在 中使用无穷大符号的 UTF 编码`NSString`：

```
NSLog(@"%@", @"\u221E"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-15T08:15:46.403

ASCII 字符范围从 0 到 127，没有 ASCII 字符 236。如果你想要[无穷大符号](http://www.fileformat.info/info/unicode/char/221e/index.htm)，你可以使用`NSString`：

```
NSString *infinity = @"\u221E";
NSLog(@"%@", infinity); 
```

你也可以把它放在一个里面`wchar_t`：

```
wchar_t infinity = L'\u221E';
NSLog(@"%lc", infinity); // %lc means wide character 
```

# c++ - 如果类类型是按值调用的函数的参数，是否会调用该类的重载赋值运算符？

> ID：10160420
> 
> 赞同：2
> 
> 时间：2012-04-15T07:57:43.317
> 
> 标签：c++, function, overloading

让我们`A`成为重载类`operator=` 如果我按值调用具有参数`A`的函数，重载会`operator=`被调用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T07:59:35.797

No its assignment operator won't be called.
The copy constructor will be called.

That is the purpose of copy constructor, to create copies of the type by taking in an object of the same type. Pass by value is the typical case where copy constructor is always called.

# javascript - Javascript 执行问题

> ID：10160421
> 
> 赞同：0
> 
> 时间：2012-04-15T07:57:43.447
> 
> 标签：javascript

此代码计算大圆距离。原始来源在这里：[http ://www.movable-type.co.uk/scripts/latlong-vincenty.html](http://www.movable-type.co.uk/scripts/latlong-vincenty.html)

我确定它缺少一些简单的东西，但是 javascript 不会执行。

[http://jsfiddle.net/RvdJH/](http://jsfiddle.net/RvdJH/)

```
<script type="text/javascript">

function distVincenty(lat1, lon1, lat2, lon2) {
    var a = 6378137,
        b = 6356752.314245,
        f = 1 / 298.257223563; // WGS-84 ellipsoid params
    var L = toRad(long2 -lon1);
     function toRad(degrees){
         return degrees * Math.PI / 180;
     }
    var U1 = Math.atan((1 - f) * Math.tan(lat1.toRad()));
    var U2 = Math.atan((1 - f) * Math.tan(lat2.toRad()));
    var sinU1 = Math.sin(U1),
        cosU1 = Math.cos(U1);
    var sinU2 = Math.sin(U2),
        cosU2 = Math.cos(U2);

    var lambda = L,
        lambdaP, iterLimit = 100;
    do {
        var sinLambda = Math.sin(lambda),
            cosLambda = Math.cos(lambda);
        var sinSigma = Math.sqrt((cosU2 * sinLambda) * (cosU2 * sinLambda) + (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda) * (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda));
        if (sinSigma == 0) return 0; // co-incident points
        var cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;
        var sigma = Math.atan2(sinSigma, cosSigma);
        var sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;
        var cosSqAlpha = 1 - sinAlpha * sinAlpha;
        var cos2SigmaM = cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha;
        if (isNaN(cos2SigmaM)) cos2SigmaM = 0; // equatorial line: cosSqAlpha=0 (§6)
        var C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
        lambdaP = lambda;
        lambda = L + (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));
    } while (Math.abs(lambda - lambdaP) > 1e-12 && --iterLimit > 0);

    if (iterLimit == 0) return NaN // formula failed to converge
    var uSq = cosSqAlpha * (a * a - b * b) / (b * b);
    var A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));
    var B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));
    var deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));
    var s = b * A * (sigma - deltaSigma);

    s = s.toFixed(3); // round to 1mm precision
    return s;

    // note: to return initial/final bearings in addition to distance, use something like:
    var fwdAz = Math.atan2(cosU2 * sinLambda, cosU1 * sinU2 - sinU1 * cosU2 * cosLambda);
    var revAz = Math.atan2(cosU1 * sinLambda, -sinU1 * cosU2 + cosU1 * sinU2 * cosLambda);
    return {
        distance: s,
        initialBearing: fwdAz.toDeg(),
        finalBearing: revAz.toDeg()
    };
}​

</script>

<table>
    <tr>
        <td>
            <p>
                Lat 1: <input name="lat1" value="53.0902"> 
                Long 1: <input name="lon1" value="001.5040">
            </p>
            <p>
                Lat 2: <input name="lat2" value="52.1219"> 
                Long 2: <input name="lon2" value="040.0833">
            </p>
            <input type="button" value="calculate distance" onClick="document.getElementsByName('result')[0].value = distVincenty( document.getElementsByName('lat1')[0].value ,document.getElementsByName('lon1')[0].value , document.getElementsByName('lat2')[0].value, document.getElementsByName('lon2')[0].value);">
        </td>
    </tr>
</table>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:07:40.477

您不能访问像 result.value 这样的输入值。使用喜欢

```
document.getElementsByName('result')[0].value 
```

并且代码获取 toRad is not defined 错误。添加此方法

```
Number.prototype.toRad = function() {  // convert degrees to radians
 return this * Math.PI / 180;
}
Number.prototype.toDeg = function() {  // convert radians to degrees
  return this * 180 / Math.PI;
} 
```

# android - android:uiOptions="splitActionBarWhenNarrow" 的样式？

> ID：10160422
> 
> 赞同：6
> 
> 时间：2012-04-15T07:57:43.513
> 
> 标签：android, android-actionbar

有谁知道使用 sdk 版本 14 时用于拆分操作栏的样式资源`android:uiOptions="splitActionBarWhenNarrow"`？

对于正常情况`ActionBar`，我可以使用

```
<item name="android:actionBarStyle">@style/MyActionBar</item> 
```

但这不会自动溢出到底部的拆分栏。

我努力了

```
 <item name="android:actionBarSplitStyle">@style/MyActionBar</item>
    <item name="android:actionBarTabBarStyle">@style/MyActionBar</item> 
```

但它们都对 Galaxy Nexus 没有影响

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T20:54:58.963

这个答案基本上是[niko34 的](https://stackoverflow.com/users/328152/niko34)，但更详细一点。目前，我将顶部操作栏和下部操作栏（下部操作栏更恰当地命名为[拆分操作栏](https://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)）的样式相同，但您会发现将它们设置为不同的样式非常简单。我正在使用[ActionBarSherlock](http://actionbarsherlock.com/) v4.2.0，并且已经在运行 Jelly Bean 的三星 Galaxy S3 和运行 Gingerbread 的 HTC Droid Incredible 上完美地测试和运行了它。

## AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="..."
    android:versionCode="1"
    android:versionName="0.1" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/main_activity_title"
            android:name=".MainActivity"
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Styled"
            android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

## res/values/themes.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
    </style>
    <style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="background">@drawable/bg_actionbar</item>
        <item name="android:background">@drawable/bg_actionbar</item>
        <item name="backgroundSplit">@drawable/bg_actionbar</item>
        <item name="android:backgroundSplit">@drawable/bg_actionbar</item>
    </style>
</resources> 
```

在这里你可以看到我是如何引用`@drawable/bg_actionbar`几次的。那是一个位于`res/drawable`目录中的 xml 文件。以下是该文件的来源。

## res/drawable/bg_actionbar.xml

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:src="@drawable/bg_tile"
    android:tileMode="repeat" /> 
```

在这里，`android:src="@drawable/bg_tile"`只是引用我的`bg_tile.png`文件，该文件位于`res/drawable-hdpi`、`res/drawable-ldpi`、`res/drawable-mdpi`和`res/drawable-xhdpi`.

所以所有这些可能是比必要的更多信息，但总比没有足够的好！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T09:11:26.817

这个问题很老，但我刚刚处理了同样的问题。如果它可以帮助别人...

拆分栏也使用 ActionBarStyle 设置样式。

例如，如果要设置拆分操作栏底部的样式，可以在 MyActionBar 样式中使用名为 backgroundSplit 的项目。

```
...
<item name="android:actionBarStyle">@style/MyActionBar</item>
...

<style name="MyActionBar">
    <item name="background">@drawable/action_bar_top_background</item>
    <item name="backgroundSplit">@drawable/action_bar_bottom_background</item>
</style> 
```

您可以使用样式而不是可绘制对象来自定义背景，但如果更喜欢在可绘制对象中定义背景。

# c# - 视觉工作室中的蓝线

> ID：10160432
> 
> 赞同：3
> 
> 时间：2012-04-15T07:59:36.263
> 
> 标签：c#, visual-studio, visual-studio-2005

突然按错一些键后，我的 Visual Studio 编码编辑器显示蓝线我怎么能关掉它？示例

![在此处输入图像描述](../Images/0b0d9ab40f3e97a73007541aca76ab5c.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T08:02:19.990

编辑 -> 高级 -> 查看空白：`Ctrl`+ `E`,`S`

![在此处输入图像描述](../Images/abf6eb8eff65fd4b97c5bb08463d3bd2.png)

# drupal - Need help print cache of drupal menu and convert relative paths of links to absolute ones

> ID：10160435
> 
> 赞同：1
> 
> 时间：2012-04-15T08:00:37.303
> 
> 标签：drupal, url, menu, opencart, absolute

I've got a script put togheter form other sources, not my own thinking. The reason for me needing to get this to work is to get a drupal top menu into top of an opencart installation to be able to use the superior cms functionalites while letting opencart handle the superior web shop functions.

The problem is that the menu that prints to a cache file from the script uses relative url.s. This of course means that when the menu is required into opencart, which is on a subdomain, the paths show the path of the subdomain. Not good.

EDIT: Ok, I got the code working, got a little confused for a while, what with all $content and $contents everywhere. Changing code below to how it looks now. I needed to change the time interval to 1 second, otherwise the drupal page behaved very oddly.

```
<?php  
  $cache_time = 1; // Time in seconds to keep a page cached  
  $cache_folder = 'cache'; // Folder to store cached files (no trailing slash)  
  $cache_filename = $cache_folder.md5($_SERVER['REQUEST_URI']);
  // Location to lookup or store cached file  
  //Check to see if this file has already been cached  
  // If it has get and store the file creation time
  $cache_created  = (file_exists($cache_file_name)) ? filemtime($cache_filename) : 0;

  if ((time() - $cache_created) < $cache_time) {
    readfile($cache_filename);
    // The cached copy is still valid, read it into the output buffer
    die();
  }  
?>

<?php ob_start(); // Turns on output buffering ?>
<?php $contents = ob_get_contents(); ?>
<!-- //Stores the contents of the buffer in a variable as a string -->

<?php if ($page['header_menu']): ?>
<div id="header-menu-wrapper">
<div id="header-menu">
<?php print render($page['header_menu']); ?>
</div>
</div>
<?php endif; ?>

<?php
  $contents = ob_get_contents();
  $contents = str_replace('href="','href="http://yourdomain.com', $contents);
  file_put_contents($cache_filename, $contents());
  ob_end_flush();
?> 
```

Also, it would be great to be able to get the cached file always be written to the same filename, otherwise it wouldn't do much good since the menu in the shop would't change when the drupal menu does since the change would result in a new filename.

I've looked at other questions here regarding drupal and absolute paths but either I don't understand enough or they are not applicable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:16:09.220

当然，您可以将 a`str_replace()`用于 url 问题，将域放入其中。所以在您的脚本末尾有

```
<?php  
$content = ob_get_contents();
$content = str_replace('href="','href="http://yourdomain.com/', $content);
file_put_contents($cache_filename, $content);  
ob_end_flush();  
?> 
```

如果您想获得真正的技术性，您可以使用正则表达式甚至 DOM 文档来完成，但对于您给出的情况，这应该足够了

至于缓存，你只需将它保存为`cache.unique-key.time`opencarts`/system/cache/`文件夹，然后调用

```
$menu_var = $this->cache->get('unique-key'); 
```

如果它不为空/假则打印`$menu_var`，否则生成它

# haskell - Haskell - Print a Trace After Execution

> ID：10160436
> 
> 赞同：2
> 
> 时间：2012-04-15T08:01:09.150
> 
> 标签：haskell, io, monads, trace, side-effects

I have a project for Uni to write a compiler (in Haskell) for a simple made-up imperative language. One of the requirements is printing debug statements on entering a function call, leaving a function and assigning variables.

Printing messages when entering functions is easy, I just use Debug.trace, eg:

```
functionValue = trace "Entering function" (evaluateFunction functionArguments) 
```

The same process applies when assigning to variables. What I can't figure out is how to print when returning from a function call and have the output timed correctly with the other outputs. Every attempt I've made so far has resulted in "Leaving function" being printed immediately after "Entering function" - I need the function's internal debug statements (assigning and nested function calls) to be printed before "Leaving function" is printed.

My imperative habits tell me that I need a way to force execution of (evaluateFunction functionArguments) before the leave-function output, but this seems impossible and wrong in Haskell.

Example output I get now:

```
Entering main function...
Leaving main function...
Entering fn1 function...
Leaving fn1 function...
Assigning value1 to A.
Assigning value2 to C.
Entering fn2 function...
Leaving fn2 function...
Assigning value3 to B.
Assigning value4 to C. 
```

Same program's output the way I need it to look:

```
Entering main function...
Entering fn1 function...
Assigning value1 to A.
Leaving fn1 function...
Assigning value2 to C.
Entering fn2 function...
Assigning value3 to B.
Assigning value4 to C.
Leaving fn2 function...
Leaving main function... 
```

So, what's Haskell idiom for 'run myFunctionWithTraces then print myString'?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T08:42:04.980

如果要立即打印痕迹，可以将函数提升到 IO monad，并将其放在两个`putStr`s 之间，例如

```
trace :: String -> IO () -> IO ()
trace name f = do
    putStrLn $ "Entering " ++ name
    f
    putStrLn $ "Leaving " ++ name 
```

接着：

```
main = trace "main" $ do
    fn1
    fn2

fn1 = trace "fn1" $ do
    return ()

fn2 = trace "fn2" $ do
    return () 
```

这也可以纯粹地用[`Writer`](http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/Control-Monad-Writer-Lazy.html)monad 来完成（即不打印，而只是在你去的时候积累调试输出）。`trace`然后看起来更像这样：

```
trace :: String -> Writer String () -> Writer String ()
trace name f = do
    tell $ "Entering " ++ name ++ "\n"
    f
    tell $ "Leaving " ++ name ++ "\n" 
```

以及使用`runWriter`或展开调试输出的附加步骤`execWriter`。

编辑：概括`trace`起来`IO a`并不难：

```
trace :: String -> IO a -> IO a
trace name f = do
    putStrLn $ "Entering " ++ name
    ret <- f
    putStrLn $ "Leaving " ++ name
    return ret

main = trace "main" $ do
    a <- fn1
    b <- fn2
    print $ a + b

fn1 = trace "fn1" $ do
    return 42

fn2 = trace "fn2" $ do
    return 69 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:25:51.423

[代码在评论中不可读，因此我发布了另一个答案作为对 Cat Plus Plus 的评论]

我终于通过我的所有代码线程化了 IO monad，但是这个解决方案并不能很好地工作——我需要从我的函数中获取返回值（即 IO（值））。

```
do
    putStrLn $ "Entering " ++ name
    f
    putStrLn $ "Leaving " ++ name 
```

上面的代码片段将返回 IO () （空的 IO monad）。所以我将其修改为：

```
do
    putStrLn $ "Entering " ++ name
    returnVal <- f
    putStrLn $ "Leaving " ++ name
    return (returnVal) 
```

~~但这现在正在打印：~~

~~inside function actions... ... ... 进入函数 离开函数~~

编辑：不正确的输出是我的错：我不小心`result <- f` *把* `putStrLn "Entering...`

# jquery - Disable OmniAuth's Email Case-Sensitivity?

> ID：10160437
> 
> 赞同：1
> 
> 时间：2012-04-15T08:01:28.790
> 
> 标签：jquery, ruby-on-rails

I'm currently using OmniAuth for user registration (Facebook and Identity), but I'd like to disable the default case sensitivity. I've added .downcase! to the user creation, so that's taken care of insert fields into the 'User' table - but my identities table can still contain camelcase nonsense. Has anyone dealt with this before, and if so, how?

# audio - 从mp3格式中提取10段均衡信息的方法

> ID：10160439
> 
> 赞同：1
> 
> 时间：2012-04-15T08:01:40.650
> 
> 标签：audio

我想为我的 mp3 播放器制作一个 16 波段​​图形均衡器。

但是，我不知道从哪里开始，因为我没有音频处理方面的经验。

所以，我真的不知道从哪里开始从 mp3 格式中提取频段（？）。

有人可以建议我一个简单的解决方案吗？

啊，还有，有没有开源的mp3播放器，易于修改和构建为windows应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T07:47:18.703

我认为您正在寻找的是频谱分析仪。它显示了整个音频频谱中不同频率范围的瞬时能量水平。对于大多数人来说，它基本上是养眼的。它不会修改信号。

另一方面，图形均衡器允许您增强或减弱各种频段的音频能量。它肯定会修改信号。大多数人使用图形均衡器来增强部分频谱以获得效果，例如增强低音。

发烧友通常使用连接到麦克风（而不是放大器）的频谱分析仪来监控通过图形均衡器播放白噪声的房间的响应。然后他们调整均衡器以使频率响应变平，从而补偿房间的声学效果，让您听到更纯净的录制音频。如果您随后弄乱了他们的均衡器设置，这些人通常会非常沮丧。:)

您可以查看流行的 Linux mp3 播放器，例如 RhythmBox、Banshee、VLC，甚至 Audacity。如果你想自己写，这里有一些说明。假设您知道如何在 Windows 上编写 GUI 程序，并且您只想要一个好的频谱分析仪，那么您真正需要做的事情如下：

1.  在解码阶段之后接入信号路径。

2.  将音频缩混为单声道，这通常意味着只需将左右样本相加。小心在音频中使用浮点数（应该缩放到 +/- 1），或者在添加之前将（大概是 16 位）样本转换为 32 位整数，以避免在添加短裤时溢出。

3.  测量一些样本（称为窗口），通常为 512、1024 或 2048（始终选择 2 的幂）。在分辨率（更大的窗口具有更高的分辨率）、成本（更多的样本需要更多的时间来处理）和响应能力（更大的窗口需要更多的时间来积累，从而降低分析器的帧速率）之间存在权衡。

4.  通过快速傅里叶变换 (FFT) 运行这些样本。请查阅您使用的 FFT 库的文档（[FFTW](http://www.fftw.org/)是一个很好的库），但输出通常是一个复数数组，关于中间对称。

5.  如果输出是对称的，则只使用前半部分。如果它不是对称的，那么就使用整个东西。从头到尾（或中间）的每个复数都以从 0 Hz 到音频采样率的一半的线性间隔频率对正弦曲线的能量和相位进行编码。如果音频为 44.1 kHz，并且您在 FFT 中选择了 1024 个样本，则每个数字代表 22050 Hz / 512 = 43 Hz。

6.  取每个复数并将其实部和虚部平方，然后将这些数字相加。您最终将得到每个箱中的功率（即能量平方），这是一个实数和正数。

7.  通过相加将 FFT bin 分组到频带中。例如，如果您在上面的示例中使用 512 个 bin 并将它们按 51 分组，那么您将拥有 10 个 2196 Hz 的频段。这在低频中提供的分辨率太低，因此人们通常使用对数间隔的频段：0 (0-43 Hz)、1 (43-86 Hz)、2-3 (86-172 Hz)、4-7 (172- 344 赫兹）、8-15（344-688 赫兹）等

8.  您现在可以直接显示功率总和，或者计算每个波段的平均值，然后取其平方根（RMS 能量）并绘制它。要以分贝为单位显示值，请计算 RMS 能量，然后绘制此图：`20 * log10(RMS / 32768)`。对于 16 位音频，值从 0 dB（满量程）到 -90 dB（静音）。

9.  不断重复步骤 2-8，每次都更新您的显示。

10.  去打动你的朋友。

祝你好运。如果您在 16 kHz 以上没有看到太多能量，请不要惊慌。mp3 编码算法过滤掉 16 kHz 以上的所有内容以帮助压缩。

ps 如果你真的很好，并且有解码器的源，那么你可以在解码器的频域中访问音频并将其用于频谱分析仪。您必须采用解码器在窗口大小方面为您提供的内容，但您的计算成本几乎为零。请注意，mp3 使用离散余弦变换而不是傅立叶变换来将音频移入和移出频域，因此您的能量值将与使用适当的 FFT 不同。

# visual-studio-2010 - 如何使用 VS2010/msbuild 支持多解决方案模型的项目引用？

> ID：10160440
> 
> 赞同：1
> 
> 时间：2012-04-15T08:01:43.173
> 
> 标签：visual-studio-2010, msbuild

VS2010/msbuild 如何支持多方案模型的项目引用？

过时的 Microsoft 模式和实践文章[“结构化解决方案和项目”](http://msdn.microsoft.com/en-us/library/ee817674.aspx)列出了划分解决方案和项目的三个主要模型：

*   单一解决方案
*   分区单一解决方案
*   多解决方案

文章提到多解决方案模型的一个缺点是它需要使用文件引用而不是项目引用。

这篇文章是2002年1月写的，从那以后就没有新版本了。

MSBuild [“装配解决方案系列”](http://blogs.msdn.com/b/visualstudio/archive/2010/05/11/assembly-resolution-in-msbuild-and-visual-studio-series-introduction.aspx) 也没有启动。

有哪些关于在 VS2010 中划分解决方案和项目的模型的最佳实践的好文章，包括允许项目引用和使用 msbuild 进行改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:47:38.650

查看[模式和实践中的最新版本：使用 Visual Studio Team Foundation Server 进行团队开发](http://tfsguide.codeplex.com/)

相关位描述于：

*   [第 3 章 - 在源代码管理中构建项目和解决方案](http://tfsguide.codeplex.com/wikipage?title=Chapter%203%20-%20Structuring%20Projects%20and%20Solutions%20in%20Source%20Control&referringTitle=Home)
*   [第 4 章 - 在 Team Foundation 源代码控制中构建项目和解决方案](http://tfsguide.codeplex.com/wikipage?title=Chapter%204%20-%20Structuring%20Projects%20and%20Solutions%20in%20Team%20Foundation%20Source%20Control&referringTitle=Home)
*   [第 10 章 - 大型项目注意事项](http://tfsguide.codeplex.com/wikipage?title=Chapter%2010%20-%20Large%20Project%20Considerations&referringTitle=Home)

相关的SO问题：

*   [解决方案和项目结构指南](https://stackoverflow.com/q/4405517/147211)
*   [更多信息：帮助构建 VS2010 解决方案/项目和 TFS2010](https://stackoverflow.com/q/5083614/147211)
*   [在 C# 中构建大型 Winforms 应用程序的项目和依赖项](https://stackoverflow.com/q/152053/147211)
*   [Visual Studio 解决方案中推荐的项目数](https://stackoverflow.com/q/529907/147211)

# javascript - Jquery在javascript中访问iframe文档内容

> ID：10160442
> 
> 赞同：0
> 
> 时间：2012-04-15T08:01:52.933
> 
> 标签：javascript, jquery

如何访问 iframe 文档内容意味着整个文档内容（从 <!DOCTYPE> 声明到 </html> 全部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:04:44.737

如果父页面和 iframe 在同一个域中，您可以访问如下元素：

```
var someDiv = $("#id_of_iframe").contents().find("#someDiv"); 
```

[如果 iframe 与父页面位于不同的域中，则由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您无法访问其内容。

# html - 更改内部元素处于焦点时的颜色

> ID：10160445
> 
> 赞同：12
> 
> 时间：2012-04-15T08:02:44.447
> 
> 标签：html, css

当用户选择其中的文本框时，我想更改 tr 元素的颜色。焦点伪类不使用它。~~这可以在没有 JavaScript 的情况下实现吗？~~

html:

```
<table>
<tr>
    <td>Name</td><td><input type="text" name="name"></td>
</tr>
</table>​ 
```

CSS：

```
tr:focus
{
    background:yellow;
}​ 
```

**Update1：**
​​看起来没有 CSS only 方法。使用 JavaScript 最简单的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-01-18T18:12:07.783

使用 :focus-within 怎么样？

```
<table>
  <tr>
    <td>Name</td>
    <td><input type="text" name="name"></td>
  </tr>
</table>​ 
```

CSS：

```
tr:focus-within {
  background:yellow;
  }​ 
```

[小提琴](http://jsfiddle.net/yuha0t4g/)

[对我有什么帮助。](https://www.scottohara.me/blog/2017/05/14/focus-within.html)因为选择的答案对我不起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-15T08:06:39.173

[不，CSS3 中没有主题选择器，但CSS4](http://www.w3.org/TR/selectors4/#subject)中会有一个。

**编辑**：

一个纯 JavaScript 解决方案可能是

```
var i;
var inputs = document.querySelectorAll("tr > td > input");
for(i = 0; i < inputs.length; ++i){
    inputs[i].addEventListener('focus',function(e){
        this.parentNode.parentNode.className += ' highlight';        
    });
    inputs[i].addEventListener('blur',function(e){
        this.parentNode.parentNode.className = this.parentNode.parentNode.className.replace(/\s*highlight\s*/ig,' ');
    });
} 
```

但是，这在 IE≤7 中不起作用，因为之前 8 的版本不知道[`document.querySelectorAll`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)（[演示](http://jsfiddle.net/EH8Q3/)）。如果您想要一个无忧无虑的跨浏览器解决方案，您可以使用[jQuery](http://jquery.com/)和以下代码（[演示](http://jsfiddle.net/EH8Q3/1/)）：

```
$("tr > td > input").focus(function(e){
    $(this).parent().parent().addClass('highlight');
}).blur(function(e){
    $(this).parent().parent().removeClass('highlight');
}); 
```

不要忘记在`tr.highlight`你的 CSS 中添加一个类。请记住，jQuery 将在未来版本中放弃对旧浏览器的支持（请参阅[浏览器支持](http://jquery.com/browser-support/)），因此对于 IE ≤8，您必须使用 jQuery 1.x。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T11:01:59.470

在足够新的浏览器上，通过在`tr`元素上使用`tabindex`属性（例如`<tr tabindex="1">`.

然而，聚焦的方法是依赖于浏览器的，而可聚焦的表格行可能是可用性的噩梦。例如，在 IE 和 Firefox 上，当适当使用 TAB 键时，该行将聚焦，但聚焦行不接受输入。用户需要再次点击 TAB 才能进入输入字段。在 Firefox 上，但不是在 IE 上，也可以通过单击来关注该行，但不能通过单击输入字段（因为这将关注该字段）。如果您使用`label`标记，推荐使用性和可访问性，例如

```
<table>
<tr tabindex="1">
    <td><label for="name">Name</label></td>
    <td><input type="text" name="name" id="name"></td>
</tr>
</table>​ 
```

…然后点击标签关注输入字段（使用`label`标记的原因之一！），而不是行元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:10:33.470

正要说：http: [//jsfiddle.net/qHmGe/](http://jsfiddle.net/qHmGe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T08:06:29.207

不，你不能没有 JavaScript。

# c# - couchbase 客户端商店返回 false

> ID：10160446
> 
> 赞同：2
> 
> 时间：2012-04-15T08:02:57.853
> 
> 标签：c#, .net, couchbase

我已经安装了 couchbase 1.8 并使用了 couchbase .net 客户端库。是否按照以下文档中给出的所有配置，但 client.store 总是失败并返回 false。

* * *

```
<configSections>
<section name="couchbase" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
</configSections>
<couchbase>
<servers bucket="default" bucketPassword="">
<add uri="http://xx.xx.xx.xx:8091/pools/default"/>
</servers>
</couchbase>
<startup>
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

* * *

```
CouchbaseClient client = new CouchbaseClient(); //this creates a not null client object
bool result = client.store(Storemode.Add,"test","Couchbase test"); // this returns false always
string str = client.Get("test") as string; // this returns null always 
```

* * *

我可以远程登录到 8091 端口。telnet 进入一个空白屏幕，键入任何来自 telnet 会话的键，说客户端发送了一个错误的请求。我猜这是正确的行为，但不知何故商店失败了。我在 couchbase 默认数据桶上看不到任何活动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:37:26.070

您的配置看起来正确。但是，如果您之前为键“test”保存了一个非字符串值，那么您的代码将为结果生成 false，为字符串生成 null。

对于给定键的存储操作，StoreMode.Add 将只工作一次。因此，如果您之前为键“test”保存了一个 int，那么 Store 将失败。as cast 也将返回 null。

如果您尝试使用 StoreMode.Set，代码是否运行正常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:26:50.400

我有同样的问题。

安装 Couchbase Server 后，在配置网站的 Server Nodes 选项卡上，您应该会看到服务器的 IP。

该 IP 可能是错误的（因为它是由安装程序随机分配的）。

如果它是错误的（例如不是公共 IP），请按照[以下步骤](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html)设置正确的 IP。还要确保您已关闭防火墙，或者您已畅通[端口。](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-network-ports.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T02:57:27.730

另一个可能导致此错误的问题是开发环境中的防火墙阻止了此错误。您可以通过绕过 IE 中的 couchbase ip 服务器来解决此问题：工具/Internet 选项/连接/LAN 设置/高级/例外。

问候。

# android - 从 android 将图片贴到墙上

> ID：10160449
> 
> 赞同：3
> 
> 时间：2012-04-15T08:03:42.873
> 
> 标签：android, facebook, image, photos

我想在墙上贴一张照片，就像我可以在 facebook 网页上做的一样。

我已经尝试了这两种方法，但都不是我想要的。

1.  [ [http://facebook.stackoverflow.com/questions/5168145/android-post-picture-to-facebook-wall](http://facebook.stackoverflow.com/questions/5168145/android-post-picture-to-facebook-wall) ] 这个只是上传图片到相册，墙上会有留言，其实不是一个帖子。多张图片将放在同一条消息中。
2.  [ [Android 如何使用 facebook android sdk 将图片贴到朋友的墙上](https://stackoverflow.com/questions/6688957/android-how-to-post-picture-to-friends-wall-with-facebook-android-sdk)] 这一篇贴到墙上，带有图片链接。但是貌似分享了一个链接，图片太小了。

是否可以用图片（来自手机的文件，而不是 URL）制作墙贴？

这看起来像是我从 Facebook 网站上的“上传照片”发布的。

[http://i.stack.imgur.com/o16Hn.png](https://i.stack.imgur.com/o16Hn.png) （抱歉我不能发布图片）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:59:30.557

第一个线程中接受的答案是正确的，只需进行一次更改，当您在 facebook 中上传图片时，您会看到，就像在您添加的屏幕截图中一样，您将其发布到名为“Wall Photos”的特定相册中。

在那个答案中，他们使用*了 me/photos*，这将为应用程序创建一个相册（如果尚不存在）并在那里发布图像。

我认为这应该有效：

```
Bundle params = new Bundle();
params.putByteArray("source", imageBytes);
params.putString("message", "A wall picture");
facebook.request("me/feed", params, "POST"); 
```

（您显然可以使用异步运行器）

如果这不起作用，那么您必须先获取登录用户的“墙照片”相册 ID，然后执行以下操作：

```
Bundle params = new Bundle();
params.putByteArray("source", imageBytes);
params.putString("message", "A wall picture");
facebook.request("ALBUM_ID/photos", params, "POST"); 
```

# r - 如何在绘图上仅绘制轴，而不是矩形

> ID：10160450
> 
> 赞同：1
> 
> 时间：2012-04-15T08:04:41.453
> 
> 标签：r, plot

抱歉，我找不到这个：当我在 R 中绘制任何图时，我有一个圆形图形区域矩形。它的左边是 X 轴，底线是 Y 轴，这是我想要的。但是在图形区域的右侧和顶部总是有线条，这些我不想要。如何压制那两条线？我只想要两条线 - 轴，而不是矩形。谢谢（我的意思是那个矩形包括轴）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T09:23:17.873

参见 ?par，选项 bty

```
par(bty="l") 
```

编辑：一个例子：

```
plot(1:4)
par(bty="l")
plot(1:4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T08:09:12.853

你要`frame.plot = FALSE`

```
plot(1,1, frame.plot=F) 
```

# ruby-on-rails - 思考狮身人面像中的联合选项

> ID：10160453
> 
> 赞同：1
> 
> 时间：2012-04-15T08:04:47.913
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我的模型中定义了两个以上的属性，有没有办法将两个结果组合在一起。即结果的 OR。通常，当我对模型进行搜索时，它会对结果进行 AND 操作。

```
Article.search(:with => {:abc => 1, :xyz => 1}) 
```

我想知道是否有任何方法可以结合这两个属性的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:00:23.660

Sphinx 本身不支持过滤器之间的“或”。

见 [http://sphinxsearch.com/info/faq/#filter-or](http://sphinxsearch.com/info/faq/#filter-or)

可以使用 Select 来计算一个虚拟属性（但不知道如何在 Thinking-Sphinx 中指定它） - 或者在全文字段中进行。

# handlebars.js - 将返回单个对象的流星方法转换为车把的上下文

> ID：10160455
> 
> 赞同：4
> 
> 时间：2012-04-15T08:05:12.840
> 
> 标签：handlebars.js, meteor

在meteor.com 的基本排行榜示例中，有一个名为 selected_name 的方法。

```
 Template.leaderboard.selected_name = function () {
    var player = Players.findOne(Session.get("selected_player"));
    return player && player.name;
  };

  {{#if selected_name}}
  <div class="details">
    <div class="name">{{selected_name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
  </div>
  {{/if}} 
```

相反，我想返回整个播放器对象，然后让该对象被车把视为上下文。我希望我能这样说：

```
 Template.leaderboard.selected_person = function () {
    var player = Players.findOne(Session.get("selected_player"));
    return player || false;
  };

  {{#if selected_person}}
  <div class="details">
    <div class="name">{{name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
  </div>
  {{/if}} 
```

上面的#if 块实际上在meteor 中不起作用。#if 语句只是评估 selected_person 方法，而嵌套的 {{name}} 绝对什么都不做。我想知道是否可以编写一个方法，以便可以将返回的对象用作#if 块的上下文。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T08:39:01.573

解决了！如果我只使用#with 而不是#if，那么一切都会很好。正如车把文档中所说`You can shift the context for a section of a template by using the built-in with block helper.`

```
 {{#if selected_person}}
  {{#with selected_person}}
  <div class="details">
    <div class="name">{{name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
  </div>
  {{/with}}
  {{/if}} 
```

嵌套的 if/with 非常麻烦，显然不值得仅渲染名称，但我可以想到对单个对象的更多属性进行特殊渲染的时候会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:23:19.863

我做了类似的事情，但我不认为这是“正确的方式”？

```
Template.leaderboard.selected_person = function () {
    return Players.find(Session.get("selected_player"));
};

{{#each selected_person}}
<div class="details">
    <div class="name">{{name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
</div>
{{/each}} 
```

# twitter-bootstrap - 使用引导程序的弹出框保持焦点

> ID：10160459
> 
> 赞同：3
> 
> 时间：2012-04-15T08:06:02.263
> 
> 标签：twitter-bootstrap

我一直在研究使用 Bootstrap 的 Popover 小部件，虽然我喜欢它，但我希望看到的一件事是能够在弹出框正文的内容中放置超链接或按钮。实际上将它们放在那里，但问题是允许用户单击它们。

更具体地说，问题是 - 无论如何都有默认选项 - 一旦您离开链接并移向弹出框，它就会消失。除了拨打延迟{隐藏}设置之外，还有什么方法可以解决这个问题？在我看来，“正确”的解决方案是保持严格的“隐藏设置”（又名延迟：{hide:100}），但允许光标在弹出窗口上方移动以不启动计时器。

希望我在这里错过了一个简单的技巧。欢迎所有和任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T07:50:05.500

下面的代码将在鼠标经过时显示弹出框，当鼠标移开时它将保持可见。

```
$("span[rel=popover]").popover({ trigger: 'manual' }).hover(function(e){ 
$(this).popover('show');
e.preventDefault(); 
}); 
```

关闭它调用

```
 $("span[rel=popover]").popover('hide'); 
```

高温高压

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T19:58:49.523

游戏可能有点晚了，但我刚刚遇到了这个名为“click over”的弹出框变体。该解决方案涵盖了您的需求，并具有其他一些有用的方法。

[http://www.leecarmichael.com/bootstrapx-clickover/examples.html](http://www.leecarmichael.com/bootstrapx-clickover/examples.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T15:10:11.803

我知道这是非常旧的链接，但供其他人参考我正在添加其他 stackoverflow 的链接 [如何在弹出窗口悬停时保持引导弹出窗口活动？](https://stackoverflow.com/questions/15989591/how-can-i-keep-bootstrap-popover-alive-while-the-popover-is-being-hovered)

# c# - UPDATE 操作 - 由于对象的当前状态，操作无效（VS2010 和 Linq）

> ID：10160460
> 
> 赞同：1
> 
> 时间：2012-04-15T08:06:05.367
> 
> 标签：c#, linq-to-sql, null

我们有拖车桌。一个调用**VirtualMachine**，其列名为***sessionID*** ，它是第二个调用**session**的表的外键，主键名为***Id*** ( null-able `int`)。

我们使用**linq to sql**并且当我们尝试将 VirtualMachine.sessionID 更新为`null`我们得到以下错误

> “由于对象的当前状态，操作无效”

我们的代码：

```
List<VirtualMachine> currentVms = _context.getAllVMs();
foreach (VirtualMachine vm in currentVms)
{
    if (vm.sessionID != null)
    {
        //if no  change the session status 
        Session ChangeStatus = _context.getSessionByID((int)vm.sessionID);

        ChangeStatus.status = (int)sessionStatus.closed;
        _context.updateSesion(ChangeStatus);
        string SessionKey = vm.Session.sessionNumber;

        // change the session id to null
          VirtualMachine toUpdate = new VirtualMachine();
          toUpdate.ID = vm.ID;
          toUpdate.IP = vm.IP;
          toUpdate.sessionID = null;
          _context.updateVM(toUpdate);///here we get the exception.

    }
} 
```

# asp.net - 通过 MSMQ 将 Web 层和数据库层解耦是必要的还是矫枉过正？

> ID：10160463
> 
> 赞同：8
> 
> 时间：2012-04-15T08:06:32.247
> 
> 标签：asp.net, architecture, msmq

我正在组合一个简单的 asp.net Web 控件，它作为 ajax 表单发布的结果将一条记录插入到 MSQL 数据库中。

包含此控件的页面可能会在很短的时间内收到数千次点击，我担心打开数据库连接、插入记录然后关闭每个请求的连接的性能问题。

我想到的一个解决方案是让 Web 控件将消息放入 MSMQ 队列，并让服务器上的 Windows 服务定期读取队列并进行批量插入。

考虑到 Web 和数据库服务器运行在同一台机器上，这听起来是不是一种合理的架构。听起来有必要吗？

从我在数据库上读到的内容来看，使用 MSMQ 的大部分好处都与弹性而不是性能有关，所以我可能会找错树。

任何建议将不胜感激

非常感谢

皮特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T10:32:43.150

以这种方式离线处理请求是处理大量请求时的常见模式。

您是否应该甚至可以这样做取决于许多因素。

主要因素是：您的调用者是否需要同步查看对其请求的响应？

我的意思是，调用者是否必须立即并且绝对确定地知道数据库是否成功提交了他们的数据作为调用响应的一部分？如果是这样，那么离线处理请求并不是一个真正的选择。

但是，如果可以向调用者发送一个响应，说明他们的请求将被离线处理（并且任何所需的响应也将离线发送），那么使用队列肯定会有益于您的整体架构。

首先受益的是前端可用性问题。

如果您在短时间内处理数千个请求，并且每个请求都由一个线程提供服务，然后该线程会离开并将数据插入数据库，那么您很可能会遇到没有可用的调度程序线程来服务传入请求的问题。

但是，通过减少 IIS 正在执行的后端工作量（写入本地队列相对于数据库调用来说真的很便宜），您还可以减少基于可用性的故障的可能性。

其次，通过使用队列，您将有一种限制后端流量的方法，因为您可以控制后端处理的吞吐量。

例如，您可以有一个单线程队列读取器进程，它将请求出列并将其处理到数据库中。如果您发现队列中有消息堆积，您可以通过托管更多实例来扩展队列阅读器服务。

这意味着您正在减少出现数据库争用问题的可能性，因为您可以随时更好地控制数据库上访问线程的数量。

因此，通过使用排队，您遭受的故障更少并且管理开销更低，这是编写良好的应用程序的标志。尤其是当您考虑在 Web 服务器上托管数据库时！

此外，您应该阅读称为[CQRS](http://en.wikipedia.org/wiki/CQRS)的架构模式，其中一个核心原则是离线执行数据库写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:13:21.950

异步架构有很多好处（正如 Hugh 所指出的），但肯定会带来更高的成本和复杂性。这应该仔细平衡。从 2 个组件（Web 应用程序和 DB）开始，您现在必须开发、维护和监控 4 个组件（Web 应用程序、DB、批处理服务、MSMQ）。您说 Web 服务器和 DB 服务器是同一台机器，考虑到您的性能要求，这很奇怪。明天您可能必须托管 Web 应用程序、批处理服务和 DB 是 3 台独立的机器。现在 MSMQ 也涉及到网络。还有一件事可能会出错。多线程批处理器也不容易，如果您必须按生成的顺序处理每条消息（至少对于给定实体）逻辑可能会变得复杂。

如果可能，测量两种解决方案并做出决定。

# session - 骨干，节点，会话验证，我的方法有效，但告诉我它是否正确

> ID：10160465
> 
> 赞同：1
> 
> 时间：2012-04-15T08:06:54.730
> 
> 标签：session, node.js, backbone.js, express

我一开始就用这个：

```
var app = express.createServer(
  express.cookieParser(),
  express.session({ secret: 'somesecretword' })
); 
```

下面的代码是一个示例代码，用于获取以 uname 为键的用户详细信息。

我通过调用 model.fetch() 从主干模型的 url 调用此代码。

```
app.get('/user/:uname/', function (req, res) {

  var uname=req.params.uname;
  if(!req.session.user)   // check if logged in
  res.send("Not Logged In");

  return UserModel.find({uname : uname},function(err, user) {
    if (!err) {
      return res.send(user);
    } else {
      return res.send(err);
    }
  });
}); 
```

所以，这里我直接在上面的get方法中写了验证session的代码。

如果我有很多这样的方法怎么办？我是否必须在每个方法中编写相同的东西，或者 Node 中是否有任何控制器可以做到这一点？

例如，向我展示一个验证路径 "/user" 的控制器，这意味着 "/user/anythinghere/" 应该自动验证或向我展示其他更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T11:20:06.733

您需要的是某种与 app.get 方法一起传递的中间件。我无法完全重写您的代码块，因为我自己仍在从 Express 文档中学习 Node.js（进行了一些修改以尝试满足您的需求）

```
function requireAuth(req, res, next) {
  if(req.session.user) {
    next();
  } else {
    next(new Error('Failed to load user ' + req.params.id));
  }
}

app.get('/user/edit/:id', requireAuth, function(req, res){
  res.send('you can see this because you are authed');
});

app.get('/', function(req, res){
  res.send('Not requiring auth on homepage');
}); 
```

这里的文档解释得更好，然后我可以：

[http://expressjs.com/guide.html#route-middleware](http://expressjs.com/guide.html#route-middleware)

我希望这能有所帮助。:) 如果有的话，我自己刚刚学到了一些新东西来回答这个问题，所以谢谢 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:30:52.577

您可以使用中间件并将其放在这样的路由中：

```
app.get('/user/edit/:id', requireAuth, function(req, res){
  res.send('you can see this because you are authed');
}); 
```

或者我所做的是使用通配符这样的事情：

```
app.all("/api/private*", ensureAuthenticated); 
```

您可以在此处阅读更多信息：[https ://fabianosoriani.wordpress.com/2011/08/15/express-api-on-node-js-with-mysql-auth/](https://fabianosoriani.wordpress.com/2011/08/15/express-api-on-node-js-with-mysql-auth/)

# c# - 接口用于实现多重继承，但在我的代码中没有多重继承

> ID：10160468
> 
> 赞同：0
> 
> 时间：2012-04-15T08:07:29.443
> 
> 标签：c#, mvvm-light

没有多重继承。但是我的项目伙伴使用接口来实现`add, remove`等方法。

这是代码：

```
public interface IAccountCategoryDataSource
{
    bool Add(AccountCategory accountCategory);
    bool Update(AccountCategory accountCategory);
    bool Remove(AccountCategory accountCategory);

    AccountCategory GetById(int id);
    AccountCategory GetByName(string name);
    IEnumerable<AccountCategory> GetByParentCategory(AccountCategory category);
    IEnumerable<AccountCategory> GetTopLevelCategories();
    IEnumerable<AccountCategory> GetBySearchTerm(string searchTerm);
    IEnumerable<AccountCategory> GetAll();

    event EventHandler<ObjectAddedEventArgs> AccountCategoryAdded;
    event EventHandler<ObjectUpdatedEventArgs> AccountCategoryUpdated;
    event EventHandler<ObjectRemovedEventArgs> AccountCategoryRemoved;
} 
```

请解释接口的需要是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T10:51:38.300

接口可用于多种用途。多重继承或解决[循环引用](https://stackoverflow.com/questions/2052579/circular-dependencies)很少。

但在大多数情况下，接口用于在消费者（需要某些功能的类）和实现（实现此功能的类）之间建立契约。这意味着，他们都同意这个功能是什么，但不同意这个功能将如何实现。消费者则不需要关心实现（消费者只是使用安排好的接口）并且实现者可以确定，当他正确实现接口的所有方法时，该接口的任何消费者都会接受该实现。这特别有用，如果消费者和实现类是由不同的人编写的，但即使不需要强调消费者不依赖特定实现这一事实，也可以使用它，这在面向对象中是非常好的实践编程。

举个例子，假设您正在研究具有从整数列表中返回 5 个最大整数的方法的类。最简单的方法是按降序对整个列表进行排序，然后返回前 5 个数字。但是你不想在你的类中实现排序算法，因为它是独立的功能，应该在其他类中实现（或者可能已经有类可以这样做）。*因此，您使用一种方法Sort*定义接口，该方法接受整数数组并返回排序数组。你不关心这个排序功能将如何实现，你只需要使用*Sort*这个接口的方法，即使你对排序算法一无所知，你也可以完成你的课程。然后您的同事（或您）将创建另一个实现此接口的类。他不需要知道任何关于你的类的事情，他可以使用任何他想要的排序算法，他可以在未来随时更改算法，它仍然可以一起工作。

接口必要性的一个很好的例子是插件。主应用程序的作者创建了具有功能的公开可用接口，他的应用程序将使用这些功能。然后，任何人编写具有此接口实现的类都可以将其用作插件。

# c# - 使用 XmlSerializer 序列化 ArrayList

> ID：10160474
> 
> 赞同：2
> 
> 时间：2012-04-15T08:07:53.057
> 
> 标签：c#, .net, xml-serialization

我正在 Visual Studio 2010 的一个小型 c# 项目上工作，我试图序列化一个数组列表，其中包含我的 People 类对象。这是我的代码块

```
FileStream fs = new FileStream("fs.xml", FileMode.OpenOrCreate, FileAccess.Write);
XmlSerializer xml = new XmlSerializer(typeof(ArrayList));
xml.Serialize(fs,this.array); 
```

最后一行出现错误消息“生成 XML 文档时出错”。谁能帮我把好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:11:53.080

您收到此错误的原因是因为您使用的是 an`ArrayList`并且 XmlSerializer 不知道您的`Person`类。一种可能性是在实例化序列化器时将序列化器指示为已知类型：

```
var serializer = new XmlSerializer(typeof(ArrayList), new Type[] { typeof(Person) }); 
```

但更好的方法是使用泛型`List<T>`而不是 ArrayList。因此，假设您有以下模型：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

现在你可以有一个人员列表：

```
List<Person> people = new List<Person>();
people.Add(new Person { FirstName = "John", LastName = "Smith" });
people.Add(new Person { FirstName = "John 2", LastName = "Smith 2" }); 
```

你可以序列化：

```
using (var writer = XmlWriter.Create("fs.xml"))
{
    var serializer = new XmlSerializer(typeof(List<Person>));
    serializer.Serialize(writer, people);
} 
```

# java - 调用 ArrayAdapter 中的 getView() 时

> ID：10160475
> 
> 赞同：17
> 
> 时间：2012-04-15T08:08:03.260
> 
> 标签：java, android, layout, adapter, android-arrayadapter

在android中创建自定义`adapter`时`ListView`，我看到我必须创建一个扩展`ArrayAdapter`类并实现该`getView(..)`方法的类。

一切正常，但我想知道调用方法和执行的顺序。即在哪个代码点`getView()`被调用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T08:27:35.953

ArrayAdapter 的 getView() 被多次调用......

1.  作为添加新行时...
2.  您向上滚动和向下滚动列表视图....
3.  当列表未更改时..

请参阅此链接 [Android 自定义 ArrayAdapter getView 方法多次调用 - 重置动态 TextView 值](https://stackoverflow.com/questions/9853397/android-custom-arrayadapter-getview-method-called-multiple-times-resetting-dyn)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-15T08:29:25.937

来自 android docs - Adapter 对象充当 AdapterView （例如您的情况下的 ListView ）和该视图的基础数据之间的桥梁。Adapter 提供对数据项的访问，还负责为数据集中的每个项创建一个视图。

因此，每当 ListView 需要显示特定行的数据时，它都会通过 getView() 方法请求关联的适配器提供与该位置的数据对应的视图。只要需要在屏幕上更新视图（例如，在创建/滚动等期间），就会发生这种情况。

作为应用程序开发人员，只要您在适配器中提供具体的 getView() 实现，您就不必担心究竟在什么时候调用 getView()。确保该方法有效（缩略图等应加载到后台线程中）以获得最佳性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:27:09.527

```
getView(int position, View view, ViewGroup parent) 
```

被称为

```
List of Objects 
```

使用的元素数量

```
getItem(int position) 
```

对于我们列表的长度

所以，直到你的整个列表被分配了一个布局和列表中的数据，它才会被调用。

# c++ - 使用发射与调用信号，就好像它是 Qt 中的常规函数 一样

> ID：10160476
> 
> 赞同：108
> 
> 时间：2012-04-15T08:08:17.913
> 
> 标签：c++, qt

假设我有这个信号：

```
signals:
    void progressNotification(int progress); 
```

我最近才了解 Qt 中的 emit 关键字。到目前为止，我过去常常通过像普通函数一样调用它们来执行信号。所以而不是：

```
emit progressNotification(1000 * seconds); 
```

我会写：

```
progressNotification(1000 * seconds); 
```

像这样调用它们似乎有效，并且所有连接的插槽都会执行，那么使用 emit 关键字会导致不同的行为，还是只是语法糖？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-04-15T08:15:36.500

`emit`只是语法糖。如果您查看发出信号的函数的预处理输出，您会发现`emit`它已经消失了。

“魔术”发生在为信号发射函数生成的代码中，您可以通过检查 moc 生成的 C++ 代码来查看。

例如`foo`，一个没有参数的信号会生成这个成员函数：

```
void W::foo()
{
    QMetaObject::activate(this, &staticMetaObject, 0, 0);
} 
```

并且代码`emit foo();`被预处理为简单`foo();`

`emit`在`Qt/qobjectdefs.h`（无论如何以源代码的开源风格）定义，如下所示：

```
#ifndef QT_NO_EMIT
# define emit
#endif 
```

（define guard 是为了让你可以通过`no_keywords`QMake 配置选项将 Qt 与其他名称冲突的框架一起使用。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-07T22:52:11.420

18 个月后......我开始在@Mat 的回答下发表评论，并且很快就没有空间了。从而得到答案。

IMO`emit`既不是语法糖也不是简单的关键字，因为

1.  它生成代码（如上面@Mat 所解释的），
2.  它帮助`connect`机制认识到它确实是一个`signal`, 和
3.  它使您的信号成为“更大”系统的一部分，其中信号和响应（插槽）可以同步或异步执行，或排队执行，具体取决于信号发出的位置和方式。这是信号/槽系统的一个非常有用的功能。

整个信号/槽系统与简单的函数调用不同。我相信它源于观察者模式。`signal`a和 a之间还有一个主要区别`slot`：*不必实现信号，而**必须*实现插槽！

你走在街上，看到一所房子着火了（信号）。您拨打 911（*将火警信号与 911 响应插槽连接*）。信号*只是发出*的，而槽*是*由消防部门实施的。可能不精确，但你明白了。让我们看一下OP的例子。

一些后端对象知道已经取得了多少进展。所以它可以简单地`emit progressNotification(...)`发出信号。由显示实际进度条的类来获取此信号并在其上执行。但是视图是如何连接到这个信号的呢？欢迎使用 Qt 的信号/槽系统。现在可以设想一个管理器类（通常是某种小部件），它由一个视图对象和一个数据计算对象（两者都是`QObjects`）组成，可以执行`connect (m_myDataEngine, &DataEngine::progressNotification, m_myViewObj, &SimpleView::displayProgress)`。

让我们不要进入管理器类的设计方面，但只要说这就是信号/插槽系统的亮点就足够了。我可以专注于为我的应用程序设计一个非常干净的架构。并非总是如此，但很多时候，我发现我*只是发出信号但实现了 slot*。

如果可以在*不发出*信号的情况下使用/调用信号方法，那么它必然意味着*您从一开始就不需要将该函数作为信号*。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-15T08:13:50.730

第二个选项意味着您始终知道函数名称和函数参数是什么，并且您将其发送到的对象是该特定函数已知的。这两种情况并不总是正确的，所以这就是为什么要制作插槽和信号的两个主要原因。“幕后”的信号和槽机制只是一个表，其中包含指向连接的每个函数的指针。

此外，请查看此 pdf，它非常清楚地解释了信号和插槽机制的性质： [http ://www.elpauer.org/stuff/a_deeper_look_at_signals_and_slots.pdf](http://www.elpauer.org/stuff/a_deeper_look_at_signals_and_slots.pdf)

# c# - 我需要根据状态执行函数，对调用者隐藏

> ID：10160477
> 
> 赞同：0
> 
> 时间：2012-04-15T08:08:35.073
> 
> 标签：c#, recursion, hidden

我有一个如下所示的 C# 函数：

```
bool func(string name, bool retry)
{
    string res= SomeOp(name);
    if(res=="whatever")
    {
        return true;
    }
    else
    {
        if(retry)
            return func(res, false)
    }
    return false;
} 
```

我希望对调用该函数的用户隐藏重试标志。

我需要该功能只执行两次。

我不想将函数设为静态，也不想为这个简单的需求声明一个外部变量，并且默认值是不够的。还有其他优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:13:20.657

像这样的东西？

```
public bool func(string name)
{
    return func(name, true);
}

private bool func(string name, bool retry)
{
    string res= SomeOp(name);
    if(res=="whatever")
    {
        return true;
    }
    else
    {
        if(retry)
            return func(res, false)
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:22:15.333

你可以做这样的事情

```
public bool func(string name)
{
    var retryCount = 1;

    string result = string.Empty;
    while (retryCount <=2)
    {
        result = DoSomething(name);

        if(result =="Whatever")
            return true;

        retryCount ++;
    }

    return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:22:28.010

请注意，重试没有退出条件，如果答案始终不是“随便”，则递归不会结束，我们只会以该站点的“同名”结束。

```
public bool fun(string name)
{
     bool retry = Properties.Resources.retry == "true";

      string result = Get(name);
      if (result == "whatever")
      {
           return true;
       }
       else if (retry)
       {
            Console.WriteLine("Retrying");
            return fun(name);
        }
        return false;
} 
```

**更新**

与其将重试作为布尔值，我更愿意将其作为整数。这控制了退出条件。

```
 private bool fun(string name, int retryCount)
    {
        string result = Get(name);
        if (result == "whatever")
        {
            return true;
        }
        if (retryCount > 0)
        {
            return fun(name, retryCount - 1);
        }
        return false;
    }

    public static bool fun(string name)
    {
        bool retry = Properties.Resources.retry == "true";
        int retryCount = Int32.Parse(Properties.Resources.retryCount);
        return fun(name, retryCount);                       
    } 
```

# javascript - jQuery/JS 只选择直接包含文本的元素

> ID：10160478
> 
> 赞同：1
> 
> 时间：2012-04-15T08:08:36.050
> 
> 标签：javascript, jquery

我想`<a>`使用 jQuery 或直接 javascript 选择页面上的所有元素。如果锚直接包含文本而没有其他内容，那么问题是我选择它的唯一方法。有没有办法只选择文本节点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:15:37.943

尝试这个：`$('a:not(:has(*))')`

演示：http: [//jsfiddle.net/QAamN/](http://jsfiddle.net/QAamN/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T08:17:45.860

您可以使用 jQuery 过滤器方法来实现

```
$("a").contents().filter(function() {
    return this.nodeType == 3;
}); 
```

# c - TCP 连接错误“没有可用的缓冲区空间”

> ID：10160479
> 
> 赞同：1
> 
> 时间：2012-04-15T08:08:50.567
> 
> 标签：c, sockets, tcp, connection

当我在非常大规模（2048 台机器）上测试自制的分布式键值存储时遇到此错误，它在 1024 台机器上运行良好。通信模式是 n:n，这意味着每台机器都会向其他机器发送大量请求。我使用 C TCP socket 来实现它， SO_REUSEADDR 来回收那些套接字。谁能给我一些关于可能导致此错误的可能性的提示？代码很复杂，很难在不丢失必要逻辑的情况下简化并在此处发布。所以我只想知道开始调试的所有可能原因。

顺便说一句，我将设置更改为： echo 8000 > /proc/sys/kernel/threads-max

echo 8000 > /proc/sys/net/core/somaxconn #监听队列的限制，默认为128

回声 8000 > /proc/sys/net/core/netdev_max_backlog

回声 10 > /proc/sys/net/ipv4/tcp_fin_timeout

回声“10000 65000”> /proc/sys/net/ipv4/ip_local_port_range

我这样做只是为了启用最大连接数。

谢谢，-托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:11:23.887

我遇到了与您的“没有可用的缓冲区空间”错误相同的问题。你做的那个回声补丁被认为是临时设置。

使用 echo 更改临时设置后（如上所述），您将需要重新启动网络，这将清除“没有可用的缓冲区空间”错误。

您需要通过在 /etc/sysctl.conf 文件末尾添加以下行来添加永久设置：

somaxconn = 8000

见这里： [http ://www.cyberciti.biz/files/linux-kernel/Documentation/networking/ip-sysctl.txt](http://www.cyberciti.biz/files/linux-kernel/Documentation/networking/ip-sysctl.txt)

希望能帮助到你。

罗伯特

[http://NetworkCities.com](http://NetworkCities.com)

# javascript - javascript filereader 从我的主页滞后，但不在 jsbin 上

> ID：10160486
> 
> 赞同：0
> 
> 时间：2012-04-15T08:10:09.413
> 
> 标签：javascript, optimization, filereader, lag

我有一个主页，用户可以从他们的计算机上传图像并在我的主页上预览，唯一的问题是上传 > 0.5MB 的图像需要 10 多秒。我从这里复制/粘贴了所有内容（我的 html 完全像这样）

[http://jsbin.com/uboqu3/edit#javascript,html,live](http://jsbin.com/uboqu3/edit#javascript,html,live)

jsbin 示例加载速度非常快，而我的示例在 10 多秒内保持无响应。

有没有其他人在使用 javascript 的 FileReader() 时经历过很长的加载时间？任何想法为什么我的主页处理上传如此惨淡？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:41:25.897

我认为主要问题是`$('#image').attr('src',longlonglonglongdataurl);`特别为大图像设置，所以一旦我将图像加载到javascript变量并监听.onload（），我将图像绘制到画布上并将其裁剪到我需要它的确切尺寸（减少 dataurl 长度）。

对我有用，希望这对其他人有帮助

# facebook - 检测类似facebook/消息

> ID：10160487
> 
> 赞同：-2
> 
> 时间：2012-04-15T08:10:16.213
> 
> 标签：facebook, facebook-graph-api

我被以下问题困扰。

想做一个`mini-homepage`，我想请访问者访问`facebook-like`我的页面，在他们注册我的时事通讯后。

一旦他们喜欢我的页面，我想给他们发送一封电子邮件，感谢他们喜欢 Facebook。

**问题**：

有没有办法可以检测我页面上的某个访问者是否喜欢我的页面并将其连接到他/她的会话/电子邮件地址（可能与 fb 电子邮件地址不同）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:25:27.717

它在 Facebook 文档中：

> 我如何知道用户何时点击了“赞”按钮？
> 
> 如果您使用的是 XFBML 版本的按钮，您可以通过 FB.Event.subscribe 订阅 'edge.create' 事件。

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# c++ - Visual Studio 2010 中的 Friend 模板类和 Lambda 函数

> ID：10160489
> 
> 赞同：2
> 
> 时间：2012-04-15T08:10:29.410
> 
> 标签：c++, visual-studio-2010, lambda, c++11, friend

我在VS2010中遇到了编译错误，不知道是不是编译器的bug：

我尽可能地简化了场景：一个模板类被声明为某个类的友元，并尝试在 lambda 函数中访问友元的私有成员。这是代码：

```
class Foo {
    template<typename T> friend class Bar;
    int priv;
};

template<typename T>
class Bar {
public:

    void func() {
        Foo foo;
        foo.priv = 17; // compiles
        auto lambda_func = [](Foo& _foo) { _foo.priv = 17;  }; // doesn't compile
    }
};

void test() {
    Bar<int> bar;
    bar.func();
} 
```

请注意，仅当 Bar 是模板类时才会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:32:41.883

这在 g++ 4.6 和 4.7 中编译得很好。我认为这也是合法的 --- lambda 应该具有与其定义的函数一样多的访问权限。

C++11 标准，5.1.2p7 说（强调）：

> lambda 表达式的复合语句产生函数调用运算符的函数体 (8.4)，但出于名称查找 (3.4) 的目的，确定 this (9.3.2) 的类型和值并转换 id 表达式使用 (*this) (9.3.1) 将非静态类成员转换为类成员访问表达式，**复合语句在 lambda-expression 的上下文中被考虑**。

我认为这意味着封闭块中的任何有效内容在 lambda 主体中都是有效的。

MSVC2010 有其他的 lambda 错误，所以它无法编译这个案例并不让我感到惊讶。

# java - 多租户应用程序的数据源

> ID：10160491
> 
> 赞同：4
> 
> 时间：2012-04-15T08:11:04.007
> 
> 标签：java, spring, hibernate, datasource, multi-tenant

我正在开发一个基于 Hibernat 4 的多租户应用程序。我使用单独的数据库解决方案。我使用 Mysql 作为数据库提供程序。对于每个新租户，我向 mysql 添加一个新数据库。我想在不重新启动应用服务器的情况下向我的应用程序添加一个新租户。我使用 DriverManagerDataSource 为每个租户创建一个新的数据源，但是这个类不打算在生产中使用？我应该使用哪个类？我正在考虑将数据源添加到 appserver 并使用 JNDIdatasource，但问题是我需要为每个新租户重新启动 appserver。有没有办法在不重新启动应用服务器的情况下添加数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:27:32.850

为了直接回答您的问题，您可以通过 JMX 公开您的应用程序上下文并以编程方式对其进行修改。这样做的问题是更改将是暂时的，即如果您重新启动服务器，它们将不会持续存在。

另一种选择是以编程方式修改底层 xml 文件（假设您正在使用 xml）并在应用程序上下文中调用[refresh() 。](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/context/ConfigurableApplicationContext.html#refresh%28%29)例如，您可以为数据源创建一个带有占位符的速度模板：

```
<beans>
...
#foreach ( $datasource in $datasources )
  $datasource
#end
...
</beans> 
```

然后，您将所有所需数据源的列表传递给velocity，然后生成更新的datasource-context.xml

**但是正如其他用户指出的那样，这确实不是一个好主意，最好使用分区或其他方法**

# java - 多线程环境中使用的 UDP Socket.receive() 方法

> ID：10160494
> 
> 赞同：0
> 
> 时间：2012-04-15T08:12:37.147
> 
> 标签：java, multithreading, udp

我一直在寻找这些信息，但在其他地方找不到：我正在构建一个带有服务器和固定数量客户端的多人游戏。我们的客户端是多线程的（一个线程用于游戏逻辑和可视化，一个线程用于接收消息）并且可以异步接收来自服务器的消息。使用 UDP 实现通信。

如果前一个线程调用 socket.receive() 方法而后一个线程也通过一个使用 socket.receive() 的循环会发生什么？

更具体地说，如果一条消息从服务器到达并且两个线程同时等待接收，那么两个线程是否都收到了消息？如果没有，是否定义了哪个线程将接收数据包？

请注意，两个线程都使用同一个套接字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:15:35.183

我不知道，顺便说一句——但我只是一开始就避免出现这种情况。

您说第一个线程用于游戏逻辑和可视化，第二个用于接收消息 - 那么到底为什么第一个线程会调用`socket.receive()`？那不是它的工作，如果它是用来展示东西的，它当然应该是阻塞的。

有一个专门的线程来接收消息对我来说听起来是一个非常合理的想法 - 所以坚持这个计划而不是混淆两个线程之间的职责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:07:59.447

消息被接收一次，由第一个线程进入receive()方法。

在后台，这是通过 PlainSocketImpl.receive() 同步的事实来实现的。

# android - setImageViewBitmap 在 android 小部件中不起作用

> ID：10160497
> 
> 赞同：6
> 
> 时间：2012-04-15T08:13:17.193
> 
> 标签：android, bitmap, widget, rgb

当我尝试在小部件上放置位图时，我使用了这个：

```
theBitmap = Bitmap.createBitmap(WW, HH,
            Bitmap.Config.ARGB_8888);
.
.
// draw something using a canvas
.
.
rviews.setImageViewBitmap(R.id.time,theBitmap); 
```

这适用于我的手机，但不适用于我的 Galaxy 平板电脑或 Galaxy Note，

如果我将**theBitmap**复制到新的**ARGB_4444 中**，则它适用于所有设备：

```
Bitmap clone= theBitmap.copy(Bitmap.Config.ARGB_4444, false); // workaround
rviews.setImageViewBitmap(R.id.time, clone); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T18:59:16.083

首先，如果没有您的解决方法，请检查您的 logcat 输出：

```
ERROR/JavaBinder(20204): !!! FAILED BINDER TRANSACTION !!! 
```

您可能达到了保存对`RemoteViews`层次结构所做更改的 IPC 事务的文件大小限制。

当您使用`Bitmap.Config.ARGB_4444`配置复制位图时，每个像素将用 2 个字节表示，而`Bitmap.Config.ARGB_8888`（2.3 及更高版本的默认配置）每个像素是 4 个字节[[Source]](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)。

通过使用您的解决方法，您传递了一半的数据，因此受到大小限制的影响。[这篇文章](https://groups.google.com/forum/#!msg/android-developers/KKEyW6XdDvg/wgetULOJq3QJ)建议大小限制为 1MB，但我不确定这是否因操作系统版本或制造商而异。

**更新：**传递图像的另一种方法是不发送位图本身，而是将 URI 传递给磁盘上的文件。然后，您需要确保其他进程对您的文件具有读取权限（例如，启动器将在不同的进程中运行）。如果要将文件写入目录，则可以通过在[Context.openFileOutput()](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)`/data/data/my.package.name/`上指定[MODE_WORLD_READABLE](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE)来执行此操作。例如：

```
remoteViews.setUri(R.id.time, "setImageURI", Uri.fromFile(file)); 
```

# java - android：如何从互联网访问移动网络服务器

> ID：10160504
> 
> 赞同：3
> 
> 时间：2012-04-15T08:14:38.287
> 
> 标签：java, android, web, ijetty

我可以从同一网络中的 pc 访问安装在 android 中的 i-jetty web 应用程序。但我也想从互联网上访问它。怎么可能？i-jetty 服务器在安卓设备上运行。

或者任何其他可以在android上运行并且可以从互联网访问的服务器？google play 上有一些应用程序，它们的功能相同，但在同一个网络中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T22:30:36.767

如果您的设备位于通过 wifi 连接的局域网内，则您位于 Internet 网关后面。因此，当您想从互联网访问移动设备上的服务器应用程序时，您必须在路由器上设置一个端口转发，从服务器端口上的任何地方到具有相同端口的移动设备。

或者使用您的移动设备切换到 umts 或 lte 连接，找出您的 IP 地址并使用您的服务器应用程序的客户端调用它。

有网页显示您的 IP 地址。用谷歌搜索“我的 ip 是什么”。

# r - 从 for 循环中在同一行上打印多个变量的值

> ID：10160511
> 
> 赞同：27
> 
> 时间：2012-04-15T08:15:43.123
> 
> 标签：r

我有一个问题肯定看起来很微不足道，但答案总是暗示我：如何从 for 循环中在同一行上打印多个变量的值？

我提出了两种解决方案，它们都只依赖于格式化`print`语句，我仍然对是否`print`可以单独使用它来返回所需格式的输出感兴趣。

首先我介绍`for-loop`包含一个解决方案的 ，然后我介绍一个代表另一种解决方案的函数：

```
P <- 243.51
t <- 31 / 365
n <- 365

for (r in seq(0.15, 0.22, by = 0.01)) {

     A <- P * ((1 + (r/ n))^ (n * t))
     interest <- A - P

     # this prints each variable on a separate line
     print (r)
     print (interest)

     # this does not work
     # print c(r, interest)

     # this presents both variables on the same line, as desired
     output <- c(r,interest)
     print(output)

     # EDIT - I just realized the line below prints output in the desired format
     print (c(r, interest))

}

# this function also returns output in the desired format

data.fn <- function(r) {

     interest <- P*(1+(r/ n))^(n*t) - P
     list(r = r, interest = interest)

}

my.output <- as.data.frame(data.fn(seq(0.15, 0.22, by = 0.01)))
my.output

#      r interest
# 1 0.15 3.121450
# 2 0.16 3.330918
# 3 0.17 3.540558
# 4 0.18 3.750370
# 5 0.19 3.960355
# 6 0.20 4.170512
# 7 0.21 4.380842
# 8 0.22 4.591345 
```

有没有办法格式化`print`语句，`for-loop`以便`print`语句本身返回格式化为 in 的输出`my.output`？我知道我也可以在 for 循环中放置一个矩阵来存储 的值，`r`然后`interest`在循环完成后打印矩阵。但是，我认为使用`print`语句会更容易，特别是因为我不需要保留`r`or的值`interest`。

谢谢你的任何建议。再次抱歉，这个问题太琐碎了。我已经在很长一段时间内搜索了很多答案，但从未找到解决方案。也许我已经在这篇文章中提出了足够多的解决方案，从而使其他可能的解决方案变得多余。尽管如此，我仍然感兴趣。

编辑：

除了下面的有用回复之外，我刚刚意识到使用：

```
print (c(r, interest)) 
```

在上面`for-loop`也有效。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T08:29:55.207

尝试`cat`并`sprintf`在您的 for 循环中。

例如。

```
cat(sprintf("\"%f\" \"%f\"\n", df$r, df$interest)) 
```

看[这里](https://stackoverflow.com/questions/3516008/how-to-print-r-variables-in-middle-of-string)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T08:35:26.833

作为附加说明，由于 R 的矢量化，不需要 for 循环。

这：

```
P <- 243.51
t <- 31 / 365
n <- 365

for (r in seq(0.15, 0.22, by = 0.01))    
     A <- P * ((1 + (r/ n))^ (n * t))
     interest <- A - P
} 
```

相当于：

```
P <- 243.51
t <- 31 / 365
n <- 365
r <- seq(0.15, 0.22, by = 0.01)
A <- P * ((1 + (r/ n))^ (n * t))
interest <- A - P 
```

因为`r`是一个向量，所以上面包含它的表达式对向量的所有值执行。

# iphone - 处理轻量级应用

> ID：10160513
> 
> 赞同：1
> 
> 时间：2012-04-15T08:15:48.367
> 
> 标签：iphone, objective-c, ios, cocoa-touch

嘿，伙计们，我在 appstore 中有一个名为 GPSReminds 的应用程序。

我创建了一个名为 GPSReminds Free 的新项目，所以它是一个新项目，但它的内容相同，除了你只能获得 3 个提醒，所以它是一种精简版我该如何处理？我所做的是记录用户已经在您存储 app.plist 的文件夹中获得了多少提醒，因此当您收到 3 个提醒时，它会要求您购买完整版以继续提醒您。但是，最大的问题是：如果用户到达 3 个提醒，但随后他删除了免费应用并从应用商店重新下载，会发生什么？app.plist 是否保留在他的 iPhone 中，所以当他再次下载它时，应用程序会告诉他他达到了​​ 3 个提醒？还是这个app.plist在他删除应用程序时也被删除了？？？不知道如果你得到我，我真的很烂用英语写作我会说西班牙语。

非常坦克你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:05:04.023

除非您的应用程序使用某种外部服务器来控制提醒并监控谁安装了该应用程序，否则您无法阻止用户删除和重新安装您的应用程序的精简版。

我知道您正试图保护应用付费版本造成的收入损失。但这是您必须平衡价格与便利性的地方。如果用户觉得一遍又一遍地删除和安装应用程序值得他们花时间，那么他们会的。但如果价格足够低，他们就会购买该应用程序。

但我猜如果用户发现您的应用程序非常有用以至于他们愿意一遍又一遍地重新加载它，那么在某些时候他们会觉得 $$ 成本比他们的时间便宜。

我的建议是对精简版不做任何事情，除了将其限制为 3 个提醒。但是对于付费版本，我会发布一个更新的版本，它添加了更多在精简版中无法获得的有用功能。例如，在人们之间分享要做的事情列表并跟踪所做的事情（对于这个建议，我只想要你利润的 10% 削减：D）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:32:25.580

你是对的，他将能够通过删除和重新安装来绕过限制。处理此问题的最佳（唯一？）方法是为每个设备创建一个唯一 ID，并将该 ID 与提醒数量存储在某处的服务器上。

您也可以将提醒的数量存储在 iCloud 中，但是用户必须启用 iCloud，并且 iCloud 信息也可以随时删除，因此这可能不是最佳选择。

# paypal-sandbox - Paypal Sandbox 付款待处理状态

> ID：10160514
> 
> 赞同：1
> 
> 时间：2012-04-15T08:16:08.333
> 
> 标签：paypal-sandbox

> **可能重复：**
> [paypall IPN 总是在沙盒上返回“payment_status: Pending”？](https://stackoverflow.com/questions/4298117/paypall-ipn-always-return-payment-status-pending-on-sandbox)

我想用 Paypal Sandbox 测试我的交易系统，但是每当我进行测试交易时，付款状态总是“待处理”。

我已在买卖账户上将“付款审查”设置为“禁用”，并在启用和不启用“负测试模式”的情况下进行了尝试。

沙盒手册还说，应该有一个选项可以在以买家帐户登录后手动清除付款，这似乎不是真的。

更多细节：“PAYMENTINFO_0_PENDINGREASON”总是设置为“授权”两个账户都是英镑，我试过转移英镑和美元，没有任何效果

一定有人在那里工作，我的问题是什么？

# jquery - Closest form.submit 执行 AJAX 查询

> ID：10160516
> 
> 赞同：0
> 
> 时间：2012-04-15T08:16:49.210
> 
> 标签：jquery, ajax, submit

对不起我的英语不好..

我有一个按钮：<a class="button" href="http://mysite.com/mvc3controller"><span>提交</span></a>

提交

以及模板页面上的脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".submit-link").click(function () {
            $(this).closest("form").submit();
        });
    });
</script> 
```

我需要发送表单并显示答案，但由于某种原因，它使用 AJAX 来完成。因此，脚本得到了正确的结果并且不再做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:18:22.780

它不做 AJAX。.submit 方法只是触发任何订阅的事件。如果您已订阅它并 AJAXified 可能解释为什么要发送 AJAX 查询的表单。如果你想在不调用任何注册处理程序的情况下调用底层事件，你可以在 DOM 元素上调用本机提交事件，而不是 jQuery 的提交方法：

```
$(this).closest("form").get(0).submit(); 
```

# php - 发生了什么变化？$变量未见

> ID：10160520
> 
> 赞同：0
> 
> 时间：2012-04-15T08:17:15.153
> 
> 标签：php, forms

在我的服务器上，在提交表单后，我没有使用 $_POST['username'] 来收集数据，而是能够使用 $username

因此，在提交表单后：

```
echo $username; 
```

将产生相同的结果：

```
echo $_POST['username'] 
```

我刚搬到一个新服务器，这似乎不适用于我的新服务器......这可能是在 PHP 中设置的吗？

我现在的任务是浏览整个站点并更改一个非常表单驱动的站点以使用新的 $_POST[] 方法（这不是新的，但你知道我的意思）

另外，没有像我过去那样使用 $_POST[]，这是不好的做法，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:20:32.980

从 $_POST、$_GET 和 $_COOKIE 自动创建变量是[`register_globals`](http://php.net/manual/en/security.globals.php)INI 指令的效果。

由于安全问题，它已被弃用，并且在最近安装时默认关闭。我建议您永远不要依赖此功能，并始终明确指定数据的原始来源。

# c# - 更新 web.config 以将 aspnetdb 更改为自己的数据库？

> ID：10160521
> 
> 赞同：0
> 
> 时间：2012-04-15T08:17:26.607
> 
> 标签：c#, sql-server, wcf-ria-services, aspnetdb

我正在开发一个 Web 应用程序，我必须在其中添加一些授权，所以我确实有一个数据库 ASPNETDB.MDF，我希望我的应用程序使用来自 SQL 服务器的 WATERINFO.MDF。

我已经使用 aspnet_regsql.exe 用所有模式和数据更新了 WATERINFO.MDF

目前我的silverlight应用程序的web.config文件是

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.serviceModel">
      <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" allowDefinition="MachineToApplication" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web>
    <httpModules>
      <add name="DomainServiceModule" type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>
    <compilation debug="true" targetFramework="4.0" />

    <roleManager enabled="true"/>

    <authentication mode="Forms">
      <forms name=".AuthorizationSample_ASPXAUTH" />
    </authentication>

    <profile>
      <properties>
        <add name="FriendlyName"/>
      </properties>
    </profile>

  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="DomainServiceModule" preCondition="managedHandler"
          type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>
  </system.webServer>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

现在要将其更改为 WATERINFO.MDF 我需要更新配置文件

```
 <?xml version="1.0"?>
    <configuration>
<connectionStrings>
        <add name="DefaultConnectionString" connectionString="Data Source=COMPLEX\SQLEXPRESS;Initial Catalog=waterinfo;Integrated Security=True"
    providerName="System.Data.SqlClient" />

      </connectionStrings>
      <configSections>
        <sectionGroup name="system.serviceModel">
          <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" allowDefinition="MachineToApplication" requirePermission="false" />
        </sectionGroup>
      </configSections>

      <system.web>

        <roleManager enabled="true" defaultProvider="DPISqlRoleProvider">
          <providers>
            <add connectionStringName="DefaultConnectionString" applicationName="DPI" name="DPISqlRoleProvider"
     type="System.Web.Security.SqlRoleProvider"/>

          </providers>
        </roleManager>
        <httpModules>
          <add name="DomainServiceModule" type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </httpModules>
        <compilation debug="true" targetFramework="4.0" />

        <authentication mode="Forms">

        </authentication>

        <membership defaultProvider="DPISqlMembershipProvider">

          <providers>
            <add connectionStringName="DefaultConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true"
     requiresQuestionAndAnswer="true" applicationName="DPI" requiresUniqueEmail="true" passwordFormat="Hashed"
     maxInvalidPasswordAttempts="5" minRequiredPasswordLength="4" minRequiredNonalphanumericCharacters="0"
     passwordAttemptWindow="10" passwordStrengthRegularExpression="" name="DPISqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider"/>

          </providers>
        </membership>
        <profile>
          <properties>
            <add name="FriendlyName"/>
          </properties>
        </profile>

      </system.web>

      <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules runAllManagedModulesForAllRequests="true">
          <add name="DomainServiceModule" preCondition="managedHandler"
              type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </modules>
      </system.webServer>

      <system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
      </system.serviceModel>
    </configuration> 
```

我在 web.config 文件中更新了这些更改，但无法将数据库更改为新数据库。

我也知道我可以使用`<remove "LocalSqlServer">`，但现在这对生产目的有好处

请建议我应该在我的 web.config 文件中进行哪些更改。

谢谢

回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:48:58.050

您需要将 connectionStrings 标记放在 configSections 下方。configSections 必须是第一个，如[msdn](http://msdn.microsoft.com/en-us/library/ackhksh7%28vs.71%29.aspx)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:19:06.890

我解决了这个问题，有一些连接字符串错误和其他一些分钟更改......我需要更新 Web.Config 文件

```
 <?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.serviceModel">
      <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" allowDefinition="MachineToApplication" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="DefaultConnectionString" connectionString="My Connection Details"
providerName="System.Data.SqlClient" />

  </connectionStrings>

  <system.web>

    <roleManager enabled="true" defaultProvider="DPISqlRoleProvider">
      <providers>
        <add connectionStringName="DefaultConnectionString" applicationName="DPI" name="DPISqlRoleProvider"
 type="System.Web.Security.SqlRoleProvider"/>

      </providers>
    </roleManager>
    <httpModules>
      <add name="DomainServiceModule" type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">

    </authentication>

    <membership defaultProvider="DPISqlMembershipProvider">

      <providers>
        <add connectionStringName="DefaultConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true"
 requiresQuestionAndAnswer="true" applicationName="DPI" requiresUniqueEmail="true" passwordFormat="Hashed"
 maxInvalidPasswordAttempts="5" minRequiredPasswordLength="4" minRequiredNonalphanumericCharacters="0"
 passwordAttemptWindow="10" passwordStrengthRegularExpression="" name="DPISqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider"/>

      </providers>
    </membership>
    <profile>
      <properties>
        <add name="FriendlyName"/>
      </properties>
    </profile>

  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="DomainServiceModule" preCondition="managedHandler"
          type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>
  </system.webServer>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

# php - 缺少呈现此页面的数据

> ID：10160523
> 
> 赞同：1
> 
> 时间：2012-04-15T08:17:35.580
> 
> 标签：php, mysql

`enter code here`php初学者，需要帮助。我通过创建的管理部分添加了产品，但它没有反映在页面上。我从代码中得到消息：“echo”缺少呈现此页面的数据。未设置获取 ID 变量。请联系我们。”;”。请帮忙

代码：

```
<?php 

// Script Error Reporting
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>
<?php 
// Check to see the URL variable is set and that it exists in the database
if (isset($_GET['?id=1'])) {
    // Connect to the MySQL database  
    include "..storescripts/connect_to_mysql.php"; 
    $id = preg_replace('#[^0-9]#i', '', $_GET['?id=1']); 
    // Use this var to check to see if this ID exists, if yes then get the product 
    // details, if no then exit this script and give message why
    $sql = mysql_query("SELECT * FROM products WHERE id='$id' LIMIT 1");
    $productsCount = mysql_num_rows($sql); // count the output amount
    if ($productsCount > 0) {
        // get all the product details
        while($row = mysql_fetch_array($sql)){ 
             $product_name = $row["product_name"];
             $price = $row["price"];
             $shippingprice = $row["shippingprice"];
             $details = $row["details"];
             $category = $row["category"];
             $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
             //product_name, price, shippingprice, details, category, date_added 
         }

    } else 
    {
        echo "No product in the system with that ID.";
        exit();
    }

} else 
{
    echo "Data to render this page is missing.Get ID variable is not set. Please contact us.";
    exit();
}
mysql_close();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php echo $product_name; ?></title>
<link rel="stylesheet" href="style/style.css" type="text/css" media="screen" />
</head>
<body>
<div align="center" id="mainWrapper">
  <?php include_once("template_header.php");?>
  <div id="pageContent">
  <table width="100%" border="0" cellspacing="0" cellpadding="15">
  <tr>
    <td width="19%" valign="top"><img src="inventory_images/<?php echo $id; ?>.png" width="142" height="188" alt="<?php echo $product_name; ?>" /><br />
      <a href="inventory_images/<?php echo $id; ?>.jpg">View Full Size Image</a></td>
    <td width="81%" valign="top"><h3><?php echo $product_name; ?></h3>
      <p><?php echo "£".$price; ?><br />
        <br />
        <?php echo "£".$shippingprice; ?> <br />
<br />
        <?php echo $details; ?>
<br />
        </p>
      <form id="form1" name="form1" method="post" action="cart.php">
        <input type="hidden" name="pid" id="pid" value="<?php echo $id; ?>" />
        <input type="submit" name="button" id="button" value="Add to Shopping Cart" />
      </form>
      </td>
    </tr>
</table>
  </div>
  <?php include_once("template_footer.php");?>
</div>
</body>
/html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:22:05.873

更改此行

```
$id = preg_replace('#[^0-9]#i', '', $_GET['?id=1']); 
```

至

```
$id = preg_replace('#[^0-9]#i', '', $_GET['id']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T08:22:39.410

$_GET 超全局是一个名称-值数组。因此，如果您的查询字符串是 ?id=1，则 $_GET 将包含

```
array( 'id' => 1 ) 
```

因此，您可以使用 $_GET['id'] 检索 id 的值。然后，您可以根据需要检查预期值。

# android - 使用 android accoutmanager.getAuthToken 获取 gmail 的 accessToken 和 accessSecret？

> ID：10160526
> 
> 赞同：1
> 
> 时间：2012-04-15T08:18:10.700
> 
> 标签：android, oauth, token, accountmanager

是否可以使用 accoutmanager.getAuthToken 来获取 gmail 的 accessToken 和 accessSecret？我想避免做 oauth 舞，而是利用 accoutmanager....

我看到的所有代码都是 accountmanager.getAuthToken 只返回一个 authtoken （我假设它是访问令牌），但没有访问秘密的迹象。

我想使用这些访问令牌和访问密钥进行 smtp 身份验证。

# linq - 使用 linq 到实体返回按导航属性中的项目数排序的对象列表

> ID：10160527
> 
> 赞同：0
> 
> 时间：2012-04-15T08:18:11.023
> 
> 标签：linq, entity-framework, linq-to-entities

我有`context`两个实体：`Authority`一对多`Reports`（每个报告都有一个权限，但每个权限可以有多个报告）。

我在每个实体中都有导航属性以指向另一个实体。

我正在尝试编写一个查询以返回按其拥有的报告数量排序的权限列表。由于`Authority`实体具有作为`Reports`报告列表的导航属性，我想我可以询问列表中有多少报告。

这可能吗 ？我是 Linq2Entities 的新手，我试图找到一个例子来做到这一点，但找不到。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:20:03.813

听起来你想要这样的东西：

```
var query = context.Authority.OrderBy(auth => auth.Reports.Count()); 
```

（可能`OrderByDescending`改为。）

# jquery - 单击按钮时更新数据表（JQuery）

> ID：10160530
> 
> 赞同：8
> 
> 时间：2012-04-15T08:18:39.767
> 
> 标签：jquery, jquery-datatables

我创建了一个简单的表单，并使用 Datatables jQuery 插件在其中显示一些数据。数据由 php 脚本 (process.php) 填充，该脚本以 JSON 格式返回正确的结果。在表单中，有一个按钮将文本框的值发送到 process.php。**问题是单击按钮时，我无法使用 process.php 脚本接收到的新数据来更新/更改数据表**。

表格代码：

```
<form name="myform" id="myform" action="" method="POST">  
    <label for="id">Enter an id:</label>  
    <input type="text" name="txtId" id="txtId" value=""/> 
    <input type="button" id="btnSubmit" name="btnSubmit" value="Search"> 
</form>

<div id="results">
    <table class="display" id="example">
        <thead>
            <tr>
                <th>id</th>
                <th>Surname</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
            <!-- data goes here -->
        </tbody>
    </table>
</div> 
```

要创建数据表，我使用以下 JQuery 代码：

```
 $(document).ready(function() {
            var oTable = $('#example').dataTable( {
                "sPaginationType": "full_numbers",
                "iDisplayLength": 10,
                //"bServerSide": true,
                "sAjaxSource": "process.php"
            } );

        $("#btnSubmit").click(function(){
            $.ajax({  
                type: "POST",  
                url: "process.php",  
                data: 'txtId=' + $("txtId").val(),  
                success: function(result) {  
                    oTable.fnReloadAjax();
                    oTable.fnDraw();
                }  
            });
        });
    } ); 
```

process.php 脚本（工作正常）是：

```
<?php
$result="";
if (empty($_REQUEST["txtId"])) {    
    $result = '{"aaData":[["1","Surname1","Name1"]]}';
}
else {
    $result = '{"aaData":[["2","Surname2","Name2"]]}';
}
print $result;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T12:54:08.833

`fnReloadAjax`是你应该使用的（我相信它可能在函数中内置了重绘）。但问题是，尽管您进行了第二次 .ajax 调用，但该调用中的数据根本与您的数据表无关，并且永远不会绑定到它。

Using`fnReloadAjax`将进行与您在表初始化中指定的相同的 Ajax 调用。因此，正如 Stefan 所提到的，您需要的是在`fnServerData`数据表设置中指定您的参数（但要丢弃这些`Success`参数，因为数据表已经假定了这些方面的内容）。然后只需进行按钮调用`fnReloadAjax()`。

这是您的最终代码应如下所示：

```
$(document).ready(function() {
        var oTable = $('#example').dataTable( {
            "sPaginationType": "full_numbers",
            "iDisplayLength": 10,
            "sAjaxSource": "process.php",
            "fnServerData": function ( sSource, aoData, fnCallback ) {
                $.ajax( {
                    "dataType": 'json', 
                    "type": "POST", 
                    "url": sSource, 
                    "data": 'txtId=' + $("txtId").val(), 
                    "success": fnCallback
                } );
            }
        } );

    $("#btnSubmit").click(function(){ 
        oTable.fnReloadAjax();
    });
} ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T18:04:17.307

最后，我找到了解决方案！我的 JQuery 代码中有两个问题：

1.  我必须在加载数据表的脚本标记之后和 $(document).ready() 语句之前添加 fnReloadAjax() 代码。
2.  我不得不更改提交按钮的 JQuery 代码（不需要 AJAX 调用，只需要 fnReloadAjax()）。

谢谢斯特凡和姆比斯利！！

现在的jQuery代码是：

```
//
// fnReloadAjax() code      
//
    $.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback, bStandingRedraw )
    {
        if ( typeof sNewSource != 'undefined' && sNewSource != null )
        {
            oSettings.sAjaxSource = sNewSource;
        }
        this.oApi._fnProcessingDisplay( oSettings, true );
        var that = this;
        var iStart = oSettings._iDisplayStart;
        var aData = [];

        this.oApi._fnServerParams( oSettings, aData );

        oSettings.fnServerData( oSettings.sAjaxSource, aData, function(json) {
            /* Clear the old information from the table */
            that.oApi._fnClearTable( oSettings );

            /* Got the data - add it to the table */
            var aData =  (oSettings.sAjaxDataProp !== "") ?
                that.oApi._fnGetObjectDataFn( oSettings.sAjaxDataProp )( json ) : json;

            for ( var i=0 ; i<aData.length ; i++ )
            {
                that.oApi._fnAddData( oSettings, aData[i] );
            }

            oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
            that.fnDraw();

            if ( typeof bStandingRedraw != 'undefined' && bStandingRedraw === true )
            {
                oSettings._iDisplayStart = iStart;
                that.fnDraw( false );
            }

            that.oApi._fnProcessingDisplay( oSettings, false );

            /* Callback user function - for event handlers etc */
            if ( typeof fnCallback == 'function' && fnCallback != null )
            {
                fnCallback( oSettings );
            }
        }, oSettings );
    }

    $(document).ready(function() {

        var oTable = $('#example').dataTable( {
            "sPaginationType": "full_numbers",
            "iDisplayLength": 10,
            //"bServerSide": true,
            "sAjaxSource": "process.php"
        });

        $("#btnSubmit").click(function(){
            oTable.fnReloadAjax("process.php?txtId=" + $("txtId").val());
        });

    } ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T09:01:29.630

`fnServerData`如果您想使用 ajax POST，您还应该在设置数据表时指定：http: [//datatables.net/ref#fnServerData](http://datatables.net/ref#fnServerData)

您也可能不需要调用`fnReloadAjax()`，而只需调用`fnDraw()`。 `fnReloadAjax()`是一个插件函数，所以我假设你之前加载过它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T21:18:16.780

您也可以只销毁表并重新创建它。

```
var oTable = null;

function reloadTable() {
    if (oTable) {
        oTable.fnDestroy();
    }

    oTable = $('#example').dataTable( {
        "sPaginationType": "full_numbers",
        "iDisplayLength": 10,
        //"bServerSide": true,
        "sAjaxSource": "process.php"
    } );
}

reloadTable(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-22T17:28:57.197

您可以使用。

```
otable.ajax.reload()
```

# wordpress - css 目录中的 style.css（即不在主题根目录中）

> ID：10160532
> 
> 赞同：1
> 
> 时间：2012-04-15T08:18:45.033
> 
> 标签：wordpress

我是 WordPress 新手，这是我第一次尝试将静态网站迁移到 WordPress。网站布局必须保持不变，所以我打算为其开发一个主题。

我习惯在 css 目录中有 css 文件，但是[WordPress 主题开发页面](http://codex.wordpress.org/Theme_Development#Basic_Templates)指出主题根目录中必须有一个 style.css。

我可以设置 WP 来获取 css/style.css 吗？在 WP 中组织 css 文件的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:08:21.980

您可以使用 Wordpress' `wp_enqueue_style`。

```
function addMyScript() {
wp_enqueue_style( 'my-style', get_template_directory_uri() . '/css/my-style.css', false, '1.0', 'all' );
}
add_action('wp_head', 'addMyScript'); 
```

请记住，您仍然需要`style.css`在主题根目录中包含一个，即使它仅以评论的形式包含有关主题的详细信息。

请参考：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)

# iphone - iOS：将 UIImageView 图像分解成形状并改变它们的颜色

> ID：10160535
> 
> 赞同：3
> 
> 时间：2012-04-15T08:20:00.593
> 
> 标签：iphone, ios, image-processing, shapes, image-segmentation

我一直在制作一个 iPhone 应用程序，我需要在其中识别和分解 UIImageView 图像中的不同形状（例如墙壁、椅子、书本等）并更改它们的颜色。到目前为止，我已经实现了允许用户选择颜色并将其应用到使用手势识别器的选定区域（像素基础）的代码，但我正在寻找的远远超过我所做的！

是否可以检测给定图像中可用的不同形状并改变它们的颜色？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:07:49.127

无论你使用什么算法，你都应该把它放在最好的计算机视觉框架之一之上，[为 iOS 开放 CV](http://code.google.com/p/opencv-ios/)

然后你可以检查其他语言的其他项目，这些项目使用 open cv 进行图像分割，并且理论上可能会推出你自己的解决方案；）祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:59:05.120

对象识别和检测是计算机科学中一个非常广泛的主题，据我所知，UIImage 的公共方法不支持。我认为你要实现自己的目标还有很长的路要走。尝试查找任何处理对象检测的开源 iOS 项目，或者甚至查看具有 iOS 包装器的非本地库，例如 openCV。祝你好运，不要放弃。

# php - 强制 PHP 显示完整的 MySQL 查询

> ID：10160540
> 
> 赞同：1
> 
> 时间：2012-04-15T08:20:51.597
> 
> 标签：php, mysql, database

当您的查询不正确时，php 会返回如下错误消息：

```
Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@aaa.com)' at line 1' in C:\Program Files\... 
```

有没有办法强制它在错误消息中显示完整的 MySQL 查询字符串？

**更新**：

我需要一个适用于整个网站的解决方案（处于开发阶段）。

也许通过 my.ini 的 php.ini

我目前使用 ZF 进行数据库交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:26:46.900

```
$stmt = /* PDOStatement */
if (!$stmt->execute()) {

    echo $stmt->queryString;
} 
```

# java - MVC 间接关联

> ID：10160549
> 
> 赞同：1
> 
> 时间：2012-04-15T08:22:51.573
> 
> 标签：java, spring, spring-mvc

我说的是在 wiki 上解释的通用 MVC 模式。那张讨厌的粉红色照片让我心碎。我见过不同的，但那些有间接关联的总是让我感到困惑。[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

1 为什么视图与控制器有间接关联？

视图基于模型 - 这就是关联是直接的原因

2 但是为什么模型与视图有间接关联？它甚至不知道它不需要知道的视图的存在吗？

我使用 Java Servlets 和 Spring MVC 进行开发，我是一个相对较新的开发人员，我觉得它可以追溯到 Martin Fowler 讨论的其他语言。因为使用 Spring MVC，我总是使用控制器作为连接链接，没有奇怪的间接关联。

我在 3 年前才开始编程，所以我总是被提出正确做事的想法。例如，如果现在我们将 MVC 与 n 层相结合，而模型正是它的本质——只是一个带有参数和 getter+setter 以及整个 MVC 的愚蠢类，那么当它完全错误且效率低下时，你为什么要在模型中存储过去的业务逻辑只是按照最初的意图服务用户界面，还是不是？我们有 DAO 和封装 DAOS + 一些逻辑的服务层，它与模型有什么关系？

我的典型模型并不比传统的“学生”或“汽车”类复杂，通常类似于数据库中的表（我目前不使用 ORM）我是否正确使用它？DTO 与模型有何关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:52:08.223

> 1 为什么视图与控制器有间接关联？

控制器负责调解对模型的行为请求。这是因为请求倾向于更改模型中保存的几个协作对象，而不是仅影响一个对象的简单“更改名称”。让控制器单独访问模型，允许视图简单地访问来改变模型（而不是视图改变大量模型对象本身）。

这是一种间接关联，因为 View 对象（例如类按钮的实例）不直接理解控制器对象。必须在之后应用连接（例如 onclick 回调）。

> 视图基于模型 - 这就是关联是直接的原因

这是不准确的，直接关联代表一个委托链接。View 是一个完全独立于它可能必须委托给的 Model 对象的对象。

授权需要了解目标对象，因此需要直接关联。当 View 对象需要信息时，信息的收集将委托给 Model 对象并返回给 View 以继续。

> 2 但是为什么模型与视图有间接关联？它甚至不知道它不需要知道的视图的存在吗？

您的 View 对象必须从您的模型中“提取”信息，这可能是不切实际的。Model 和 View 之间的间接关联表示当 Model 对象更改时对 View 对象的回调（查看观察者模式）。这将模型和视图之间的连接更改为“推”。

# c - c中矩阵的几何平均值

> ID：10160550
> 
> 赞同：1
> 
> 时间：2012-04-15T08:23:25.250
> 
> 标签：c

该程序计算2x2矩阵中负元素的平均几何平均值，我试图理解下面这个程序中的代码以及作者为什么写他写的东西，有人可以向我解释下面这段代码的作用，我觉得很难理解什么作者在代码中写了太多指针

```
#include <stdio.h>
#include <math.h>

#define ROWS 2
#define COLS 2
char * last_geom_err = NULL;

float geometricMean(float * arr, int rows, int cols){
    float neg_mul = 1;
    int neg_count = 0;
    float arr_elem;
    for (int i = 0; i < rows; i++)
        for (int j = 0; j < cols; j++)
            if((arr_elem = *(arr + i * cols + j)) < 0){
                neg_mul *= arr_elem;
                neg_count++;
            }
    if (neg_count == 0){
        last_geom_err = "no negative elements in array";
        return 0;
    }   
    if ((neg_count % 2 == 0) && (neg_mul < 0)){
        last_geom_err = "a negative number under the square root of even degree";
        return 0;
    }
    last_geom_err = NULL;
    return pow(neg_mul, (float)neg_count);
}

int main(){
    float arr[ROWS][COLS] = {
        1., -2.,
        -5., -6.
    };
    printf("Array:\n");
    for(int i = 0; i < 2; i++){
        for(int j = 0; j < 2; j++)
            printf("%5.2f ", arr[i][j]);
        putchar('\n');
    }
    float gm = geometricMean((float*)arr, ROWS, COLS);
    if (last_geom_err != NULL)
        printf("#Error of calculation: %s", last_geom_err);
    else
        printf("Geometric mean of negative elements of array = %5.2f", gm);
    return 0; 
} 
```

为什么这个？

```
char * last_geom_err = NULL;

    float geometricMean(float * arr, int rows, int cols){
        float neg_mul = 1;
        int neg_count = 0;
        float arr_elem;
        for (int i = 0; i < rows; i++)
            for (int j = 0; j < cols; j++)
                if((arr_elem = *(arr + i * cols + j)) < 0){
                    neg_mul *= arr_elem;
                    neg_count++;
                }
        if (neg_count == 0){
            last_geom_err = "no negative elements in array";
            return 0;
        }   
        if ((neg_count % 2 == 0) && (neg_mul < 0)){
            last_geom_err = "a negative number under the square root of even degree";
            return 0;
        }
        last_geom_err = NULL;
        return pow(neg_mul, (float)neg_count);
    } 
```

和这个

```
float gm = geometricMean((float*)arr, ROWS, COLS);
        if (last_geom_err != NULL)
            printf("#Error of calculation: %s", last_geom_err);
        else
            printf("Geometric mean of negative elements of array = %5.2f", gm);
        return 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:50:53.147

> 程序计算 2x2 矩阵中负元素的平均几何平均值

它没有。首先，通常[几何平均值仅适用于正数。](http://en.wikipedia.org/wiki/Geometric_mean)可以通过说负数的几何平均值是绝对值的几何平均值的负数，以某种有意义的方式将定义扩展到负数`k`，但是包含负数和正数的集合的几何平均值应该是什么不清楚。扩展几何平均值的另一种有意义的方法是将其作为全纯函数扩展到其全纯域（它`k > 1`不会是 ℂ<sup>k 的子集）。^(这将包括前一个扩展作为 ℝ<sub>< 0 k)上方一个分支上的值。

无论如何，几何平均值的计算将包括`k`某种形式的 -th 根，而给定的程序没有。现在让我们看一下代码。

```
float geometricMean(float * arr, int rows, int cols){
    float neg_mul = 1;
    int neg_count = 0; 
```

初始化负数组元素的乘积及其计数。

```
 float arr_elem;
    for (int i = 0; i < rows; i++)
        for (int j = 0; j < cols; j++) 
```

矩阵的内存布局为

```
 --------------------------------------------
arr -> | row 0 | row 1 | row 2 | ... | row (rows-1) |
        -------------------------------------------- 
```

所以`row 0`占用slots 0 to `cols - 1`，`row 1`占用slots `cols`to `2*cols - 1`，一般来说`row k`占用slots `k*cols`to `(k+1)*cols - 1`。因此`arr + i*cols + j`指向`col j`in `row i`。

```
 if((arr_elem = *(arr + i * cols + j)) < 0){
                neg_mul *= arr_elem;
                neg_count++;
            } 
```

读取矩阵元素`a[i][j]`，如果它是负数，则将其乘以所有负数的乘积并计数。请注意，由于平坦的内存布局，人们可以简单地循环`for(k = 0; k < rows*cols; ++k)`和访问`arr[k]`这里。

```
 if (neg_count == 0){
        last_geom_err = "no negative elements in array";
        return 0;
    } 
```

如果数组根本不包含负元素，则设置错误消息并返回。没有数字的（几何）平均值根本没有意义。

```
 if ((neg_count % 2 == 0) && (neg_mul < 0)){
        last_geom_err = "a negative number under the square root of even degree";
        return 0;
    } 
```

如果否定条目的数量是偶数并且否定条目的乘积是负的，则设置错误消息并返回。

请注意，这是死代码。偶数个负数的乘积总是正数，浮点运算（符合 IEEE 754 或足够接近该标准；如果它完全被破坏，任何事情都可能发生）的唯一警告是下溢，乘积可能会变为 0，尽管在数学上它不是。（溢出在这里不是问题，无穷大与 0 相比，并且在乘法中表现应如此。）

```
 last_geom_err = NULL;
    return pow(neg_mul, (float)neg_count);
} 
```

最后，将错误消息设置为`NULL`，因为没有发生异常情况并返回

> （否定条目的乘积）^(（否定条目的数量）)。

对于几何平均值，最后一行应该类似于

```
 return pow(neg_mul, 1.0/neg_count); 
```

但是，如果`neg_mul < 0`因为`pow`只处理整数指数的负基数，那将返回 NaN，所以

```
if (neg_mul < 0) {
    return -pow(-neg_mul, 1.0/neg_count);
} else {
    return pow(neg_mul, 1.0/neg_count);
} 
```

# build - 使用 Cygwin 在 Windows 7 上安装 pocketsphinx 0.7 时出错

> ID：10160553
> 
> 赞同：0
> 
> 时间：2012-04-15T08:23:42.557
> 
> 标签：build, cygwin, cmusphinx

我尝试使用 Cygwin 在我的 Windows 7 上安装 pocketsphinx 0.7 版（我已经安装了 sphinxbase 0.7）。我在使用“make”命令时遇到了一些错误。请帮我。非常感谢 ！！！

Makefile:316: 目标配方`pocketsphinx_continuous.exe' failed make[2]: *** [pocketsphinx_continuous.exe] Error 1 make[2]: Leaving directory`/cygdrive/d/Cao_Hoc/Luan_Van/test_Android_ASR/test_1/pocketsphinx-0.7/src/programs' Makefile:271: 目标配方`all-recursive' failed make[1]: *** [all-recursive] Error 1 make[1]: Leaving directory`/cygdrive/d/Cao_Hoc/Luan_Van/test_Android_ASR/test_1/pocketsphinx- 0.7/src' Makefile:372: 目标'all-recursive'的配方失败 make: *** [all-recursive] 错误 1

* * *

这是完整的日志：[http ://www.mediafire.com/view/?34577vncq1rqu7b](http://www.mediafire.com/view/?34577vncq1rqu7b)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:24:03.663

对于 Cygwin，不要使用 0.7 版。下载最新的快照，它应该编译得更好

[http://cmusphinx.sourceforge.net/wiki/download](http://cmusphinx.sourceforge.net/wiki/download)

# wpf - 如何在不影响渲染曲线和文本质量的情况下获取不同大小的 WPF 元素的快照？

> ID：10160554
> 
> 赞同：1
> 
> 时间：2012-04-15T08:23:43.377
> 
> 标签：wpf, c#-4.0, graphics, charts, rendering

我正在处理 WPF 中的图表控件。我需要实现一个功能，以便在不影响其上呈现的曲线和文本的质量的情况下，以任何输入大小拍摄图表的快照。

该功能已经实现，但现在的问题是，在使用 FrameworkElement.Transform() 拍摄快照时，屏幕会闪烁，因为实际控件正在调整大小并重新渲染。

任何人都可以建议我解决问题的解决方案或指针。值得一提的是，要在 Chart 上呈现的数据非常庞大，因此在 Chart 上重新呈现数据需要一些时间。

非常感谢任何形式的帮助。

# mysql - MySQL 查询 - 使用 ORDER BY rand() 强制区分大小写

> ID：10160556
> 
> 赞同：3
> 
> 时间：2012-04-15T08:24:23.370
> 
> 标签：mysql, case-sensitive

是否可以强制查询区分大小写？

我的声音是这样的：

```
"SELECT g_path FROM glyphs WHERE g_glyph = :g_glyph ORDER BY rand()" 
```

如果 g_glyph = r，则结果可以是 R 或 r，这不是我所期望的。我正在寻找区分大小写的返回。

我用谷歌搜索了我的问题，我找到了这个解决方案：

```
/*Case-sensitive sort in descending order.
In this query, ProductName is sorted in 
case-sensitive descending order.
*/
SELECT ProductID, ProductName, UnitsInStock
FROM products
ORDER BY BINARY ProductName DESC; 
```

但是以下行根本不起作用：

```
"SELECT g_path FROM glyphs WHERE g_glyph = :g_glyph ORDER BY BINARY rand()" 
```

有什么建议吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T08:42:39.420

字符的顺序和相等性由[排序](http://dev.mysql.com/doc/refman/5.6/en/charset-general.html)规则定义。在大多数情况下，使用不区分大小写的排序规则。

如果您需要对特定数据使用严格、区分大小写的比较，请使用[`BINARY`运算符](http://dev.mysql.com/doc/refman/5.6/en/charset-binary-op.html)：

```
mysql> SELECT 'a' = 'A';
        -> 1
mysql> SELECT BINARY 'a' = 'A';
        -> 0
mysql> SELECT 'a' = 'a ';
        -> 1
mysql> SELECT BINARY 'a' = 'a ';
        -> 0 
```

所以在你的情况下：

```
SELECT g_path FROM glyphs WHERE BINARY g_glyph = :g_glyph ORDER BY rand() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T08:28:16.717

手册页[Case Sensitivity in String Searches](http://dev.mysql.com/doc/refman/5.6/en/case-sensitivity.html)对此进行了介绍。

您需要指定区分大小写或二进制排序规则。

> 默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串比较不区分大小写。这意味着如果您使用 col_name LIKE 'a%' 进行搜索，您将获得所有以 A 或 a 开头的列值。要使此搜索区分大小写，请确保其中一个操作数具有区分大小写或二进制排序规则。例如，如果要比较都具有 latin1 字符集的列和字符串，则可以使用 COLLATE 运算符使任一操作数具有 latin1_general_cs 或 latin1_bin 排序规则：
> 
> ```
> col_name COLLATE latin1_general_cs LIKE 'a%'
> col_name LIKE 'a%' COLLATE latin1_general_cs
> col_name COLLATE latin1_bin LIKE 'a%'
> col_name LIKE 'a%' COLLATE latin1_bin 
> ```
> 
> 如果您希望始终以区分大小写的方式处理列，请使用区分大小写或二进制排序规则声明它。请参见第 13.1.14 节，“CREATE TABLE 语法”。

排序规则名称中的`_cs`代表“区分大小写”。

# asp.net - 关于 ASP.NET 中的 webcontrol 范围的混淆

> ID：10160558
> 
> 赞同：0
> 
> 时间：2012-04-15T08:24:51.030
> 
> 标签：asp.net, custom-controls, master-pages

**我的 Masterpage 中的自定义控件**，可以访问主页吗？

请帮忙！这是我的代码。

```
namespace TVSSystem
{
    public partial class ControlTVS1 : System.Web.UI.UserControl
    {
        Page abc;
        protected void Page_Load(object sender, EventArgs e)
        {
            abc = this.Page; //Control: I suposse that I can access all controls of my page
        }

        protected void Image1_Click(object sender, ImageClickEventArgs e)
        {
        ContentPlaceHolder cph = (ContentPlaceHolder)abc.FindControl("ContentPlacerHolder1");

       TextBox txt = (TextBox)cph.FindControl("TextBox1");
       Button btn = (Button)cph.FindControl("Button3");
       txt.Visible = true;
       btn.Visible = true;
        }
    }
} 
```

解决了。 [http://forums.asp.net/t/1000865.aspx/1](http://forums.asp.net/t/1000865.aspx/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:32:56.547

您可以使用该[`Page`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.page.aspx)属性访问包含此用户控件的页面（无论您是否将其放在母版页中）：

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var page = this.Page;
        ...
    }
} 
```

# c++ - Qt 中的层管理器

> ID：10160559
> 
> 赞同：2
> 
> 时间：2012-04-15T08:24:53.580
> 
> 标签：c++, qt, qlistwidget

我想创建一个类似于 Photoshop 的 GUI 用于图层选择和可见性，以管理我的软件的图层。基本上，我想要一个类似于图层`ListView`的`QListWidgetItem`文本和可见性复选框。

起初`QListWidget`，`QListWidgetItem`通过设置项目的标志使其成为 UserCheckable 似乎很容易。它在某种程度上有效，但它迫使我在更改其可见性之前选择一个“层”。

有没有办法实现 QListWidgetItem 以便我可以选中/取消选中复选框而无需选择项目？还是我应该尝试其他方法来实现我的图层管理器​​？

我正在考虑用`QGraphicsView`and来做`QGraphicsItem`，但我真的很想知道我是否可以在没有的情况下实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:45:31.330

QListWidget 使用[itemAt()](http://qt-project.org/doc/qt-4.8/qlistwidget.html#itemAt)来确定一个被点击的项目边界矩形并选择它——即使它只是一个复选框。由于此方法不是虚拟的，因此您无法在没有任何肮脏技巧的情况下更改该行为（每次切换复选框时更改选择等）。您必须派生自己的 QListView 和 QAbstractItemModel （就像 QListWidget 一样）。别担心，[其他人](http://www.qtcentre.org/archive/index.php/t-1951.html)注意到一些不方便的检查/选择行为。让我给你一些方向：

您应该派生自己的 QAbstractItemModel，它有两列。第一列是您的复选框列，您需要分配一个绘制复选框项目的列委托，第二列是您的显示文本列（下面未介绍）。然后在 YourListView 类中：

将 clicked 信号连接到您自己的插槽：

```
 connect( this, SIGNAL(clicked( const QModelIndex &  )), this, SLOT(clickedSlot( const QModelIndex &  )) ); 
```

并声明/使用

```
 void YourListView::clickedSlot( const QModelIndex &index )
 {        
       if( index.isValid() )
       {
          // Checkbox toggle

          if( index.column() == 0 )
          {
             QVariant beforeValue = this->model()->data( index );

             this->model()->setData( index, QVariant::fromValue( ! beforeValue.toBool() ) );
          }
          else
          if( index.column() == 1 )
          {
             this->selectionModel()->select( index, QItemSelectionModel::Toggle );
          }
       }
 } 
```

我知道 Qt 的模型-视图-委托架构对于未经培训的程序员来说有些可怕，但一旦了解它的乐趣。啊，我个人会避免使用手工编织的 QGraphicsView 解决方案——它有自己的陷阱和角落，这可能会花费你更多的时间来让它变成可接受的形状。

祝你好运！

# iis - 如何使用 URL Rewrite 重写查询字符串

> ID：10160563
> 
> 赞同：0
> 
> 时间：2012-04-15T08:26:24.677
> 
> 标签：iis, iis-7, url-rewrite-module

请我刚开始使用 iis 重写模块，我有一个任务是用查询字符串重写一个 url。

我要做的是重写这个网址 [http://www.blah.com/Pages/Content.aspx?id=n%2fWA2PJCJXXnu8mvdC0jXQ%3d%3d&ln=Gy7UlI4cSJE94Wa2qudbFQ%3d%3d](http://www.blah.com/Pages/Content.aspx?id=n%2fWA2PJCJXXnu8mvdC0jXQ%3d%3d&ln=Gy7UlI4cSJE94Wa2qudbFQ%3d%3d)

像这样[http://www.blah.com/Pages/Content.aspx?id=Ecommerce](http://www.blah.com/Pages/Content.aspx?id=Ecommerce)

您好 Mathew，感谢您提供的链接，但是我并没有真正了解我附带的 url 重写模块的速度，而且它似乎无法正常工作

```
<rules>
    <rule name="QueryStringRW" stopProcessing="true">
        <match url="^Content\.aspx$" ignoreCase="true" />
        <conditions>
            <add input="{QUERY_STRING}" pattern="id=(\d+)" />
            <add input="{IDtoTitleMap:{C:1}}" pattern="(.+)" />
        </conditions>
        <action type="Redirect" url="Content.aspx?id={C:1}" appendQueryString="false" redirectType="Permanent"/>
    </rule>
</rules>
<rewriteMaps>
    <rewriteMap name="IDtoTitleMap">
        <add key="id=n%2fWA2PJCJXXnu8mvdC0jXQ%3d%3d&ln=Gy7UlI4cSJE94Wa2qudbFQ%3d%3d" value="Id=Ecommerce" />
    </rewriteMap>
</rewriteMaps> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:43:05.270

重写规则需要以下信息：

*   规则名称
*   用于匹配 URL 字符串的模式
*   可选的一组条件
*   模式匹配时执行的操作

有关如何为 URL 重写模块创建规则的详细方法，请访问：[http ://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)

# r - R中的慢循环，有什么建议可以加快速度吗？

> ID：10160566
> 
> 赞同：2
> 
> 时间：2012-04-15T07:06:56.703
> 
> 标签：r

我有一个数据框“m”，如下所示：

![米](../Images/0b9db3a8404614806c0f671ddfcec048.png)

我正在尝试查找每个帐户最活跃的月份（V1 数量最多）。例如，对于帐户“2”，它将是“month 6”，对于帐户 3，它将是“month 1”，...。

我写了下面的循环，它工作正常，但即使我只使用了 8000 行，也需要很长时间，整个数据集有 250,000 行，所以下面的代码不可用。有没有人可以提出一种更好的方法来实现这一目标？

非常感谢。

![代码](../Images/34599ae0327f536b557a2bdf1487656e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:16:32.067

您可以使用 plyr 做到这一点

```
library(plyr)
ddply(m, "AccountID", subset, V1==max(V1)) 
```

编辑：要按月获得结果，只需更改 de“id”变量

```
library(plyr)
ddply(m, "Month", subset, V1==max(V1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T11:04:43.043

我认为 Owe Jessen 的评论是正确的，这不是问题的答案。所以这是我在`data.table`.

首先，让我们使用一个更容易理解的示例：

```
library(data.table)
DT <- data.table(AccountID = rep(1:3, each=4),
                 V1        = sample(1:100, 12, replace=FALSE),
                 Month     = rep(1:4, times=3))
      AccountID V1 Month
 [1,]         1 81     1
 [2,]         1 23     2
 [3,]         1 72     3
 [4,]         1 36     4
 [5,]         2 22     1
 [6,]         2 13     2
 [7,]         2 50     3
 [8,]         2 40     4
 [9,]         3 74     1
[10,]         3 83     2
[11,]         3  4     3
[12,]         3  3     4 
```

所以在这里我们有 3 个账户和四个月，对于每个账户/月组合，我们有一个 V1。因此，为每个帐户找到最大 V1，我执行以下操作：

```
setkey(DT, AccountID)
DT <- DT[, list(maxV1=max(V1)), by="AccountID"][DT]
DT[maxV1==V1]
     AccountID maxV1 V1 Month
[1,]         1    81 81     1
[2,]         2    50 50     3
[3,]         3    83 83     2 
```

这有点难以理解，所以我试着解释一下：我将 AccountID 设置为 DT 的 key。现在，我基本上在`DT[, list(maxV1=max(V1)), by="AccountID"][DT]`. 首先，我计算每个帐户 ( `DT[, list(maxV1=max(V1)), by="AccountID"]`) 的最大 V1 值，然后通过`[DT]`在它之后调用，我将这个新列添加`maxV1`到旧的`DT`. 显然，那么我只需要获取所有`maxV1==V1`保留的行。

将此解决方案应用于 Nico 更高级的示例，并向您展示如何将 a 转换`data.frame`为 a `data.table`：

```
library(data.table)
DT <- as.data.table(m)
#Note that this line is only necessary if there are more than one rows per Month/AccountID combination
DT <- DT[, sum(V1), by="Month,AccountID"]
setkey(DT, AccountID)
DT <- DT[, list(maxV1=max(V1)), by="AccountID"][DT]
DT[maxV1==V1]
   AccountID maxV1 Month    V1
           1 24660     1 24660
           2 22643     2 22643
           3 23642     3 23642
           4 22766     5 22766
           5 22445    12 22445
... 
```

这正好给出了 50 行。

编辑：

这是一个base-R解决方案：

```
df <- data.frame(AccountID = rep(1:3, each=4),
                 V1        = sample(1:100, 12, replace=FALSE),
                 Month     = rep(1:4, times=3))
df$maxV1 <- ave(df$V1, df$AccountID, FUN = max)
df[df$maxV1==df$V1, ] 
```

我从[这里](https://stackoverflow.com/questions/8225621/faster-way-to-create-variable-that-aggregates-a-column-by-id/8227271#8227271)获得灵感。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T11:11:02.453

我想基本上这与 Tal 的解决方案相同

我通过以下循环获得了合理的时间

```
# Generate some random data
AccountID <- sample(1:50, 250000, replace=T)
V1 <- sample(1:100, 250000, replace=T)
Month <- sample(1:12, 250000, replace=T)

m <- data.frame(AccountID, V1, Month)

# Aggregate the data by month

ac = as.numeric(levels(as.factor(m$AccountID)))
active.month = rep(NA, length(ac))
names(active.month) = ac

system.time(
{
  for(i in ac)
  {
    subm = subset(m, AccountID == i)
    active.month[i] = subm[which.max(subm[,"V1"]),"Month"]
  }
})
   User      System verstrichen 
   0.78        0.14        0.92 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T08:13:56.400

我看不到向量化该算法的方法（如果其他人这样做，我很想知道如何）。

这是我将如何编码（ps：请在将来包含自包含代码。也请查看 ?dput 以获取帮助）：

```
make.data <- function(n = 100) # 250000
{
# Generate some random data
AccountID <- sample(1:50, n, replace=T)
V1 <- sample(1:100, n, replace=T)
Month <- sample(1:12, n, replace=T)

m <- data.frame(AccountID, V1, Month)
m
}

fo <- function(X)
{
unique_ID <- unique(X$AccountID)
M_max <- numeric(length(unique_ID ))

for(i in seq_along(unique_ID))
{
    ss <- X$AccountID == unique_ID[i]
    M_max [i] <- X[ss,"Month"][which.max(X[ss,"V1"])]
}

# results:
# M_max
data.frame(unique_ID , M_max)
}

X <- make.data(1000000)
system.time(fo(X))
#   user  system elapsed 
#   2.32    0.33    2.70 
```

我怀疑其中一些功能可能比您使用的功能更快（但值得测试时间）。

**编辑：** *R 的新 JIT 可能会对您有所帮助（您可以在此处阅读更多相关信息：[使用即时 (JIT) 编译器加速您的 R 代码](http://www.r-statistics.com/2012/04/speed-up-your-r-code-using-a-just-in-time-jit-compiler/)）* 我也尝试使用 JIT，但它并没有加快速度。

并行化你的循环也可能是值得的（但我现在不会进入它）。

如果时间不现实，可能会使用 data.table 包（但我没有使用它的经验），甚至可以使用 SQL 来完成它......

祝你好运，塔尔

**更新**：我使用了 nico 的示例，并将解决方案包装在函数中。时机绝对好，不需要更高级的解决方案......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T08:15:41.797

这在我使用 250000 行的笔记本电脑上几乎是瞬间完成的（而且它更干净）

```
# Generate some random data
AccountID <- sample(1:50, 250000, replace=T)
V1 <- sample(1:100, 250000, replace=T)
Month <- sample(1:12, 250000, replace=T)

m <- data.frame(AccountID, V1, Month)

# Aggregate the data by month
V1.per.month <- aggregate(m$V1, sum, by=list(Month = m$Month)) 
```

编辑：重新阅读我意识到我忘记考虑帐户的问题（双关语）

然而，这应该做

```
V1.per.month <- aggregate(m$V1, sum, 
             by=list(Month = m$Month, Account= m$AccountID)) 
```

时序图（误差线为 SD）。如您所见，每 100 万行需要大约 2.5 秒，我认为这是非常可以接受的。

![每行数经过的时间](../Images/3d90da5cb7c5f8a7bb91778d0956b82b.png)

# javascript - 是什么意思window["_GOOG_TRANS_EXT_VER"] = "1";

> ID：10160573
> 
> 赞同：5
> 
> 时间：2012-04-15T08:27:21.367
> 
> 标签：javascript, header

我的页面标题上有此代码

```
 <script>window["_GOOG_TRANS_EXT_VER"] = "1";</script> 
```

但我不明白它的含义或它是从哪里产生的，有人知道吗？我想删除它，因为它似乎是页面生成中的问题......

感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T01:44:26.393

这是由谷歌翻译扩展（或其他基于谷歌翻译扩展的扩展）动态插入的

谷歌翻译扩展的源代码特指它：

```
/* Copyright 2010 Google */
...
function v(a) {
    var b = {
        noEvents: c,
        content: u('window["_GOOG_TRANS_EXT_VER"] = "1";')
    };
    i.tabs.executeScript(a, {
        code: q(s, b)
    })
}
... 
```

禁用扩展程序会将其从页面中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:24:28.773

检查锚标记中的 onClick 事件的操作，或正在触发的其他 JavaScript 操作。它很可能是一个不应该转义的转义引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:35:56.647

该脚本所做的只是在全局范围内创建一个变量 _GOOG_TRANS_EXT_VER，然后其值为 1。如果没有使用此变量，它不应该产生任何问题，但它似乎是由某种 Google 小部件插入的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T23:29:28.617

你有谷歌翻译插件吗？我看到了同样的事情，然后尝试关闭我的翻译插件，这条线消失了。

假设您正在运行 Chrome，您可以在 chrome://extensions/ 处检查/禁用

# android - 获取不幸的应用程序已停止错误

> ID：10160577
> 
> 赞同：-1
> 
> 时间：2012-04-15T08:29:24.927
> 
> 标签：android, networking, send

我有以下代码假设用于使用 android App 将数据发送到服务器，但我不断收到错误状态“不幸的是我的应用程序名称已停止”

我的活动代码是：

```
public class SendDataToServerActivity extends Activity {
    /** Called when the activity is first created. */
    Button sendButton;
    EditText msgTextField;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // make message text field object
        msgTextField = (EditText) findViewById(R.id.msgTextField);
        // make send button object
        sendButton = (Button) findViewById(R.id.sendButton);
        sendButton.setOnClickListener(new Button.OnClickListener(){
            //perform your action here            
            public void onClick(View v){
                String msg = msgTextField.getText().toString();  

                // make sure the fields are not empty
                if (msg.length()>0)
                {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://98.131.137.4/husam.php");
                 try {
                   List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                   nameValuePairs.add(new BasicNameValuePair("id", "12345"));
                   nameValuePairs.add(new BasicNameValuePair("message", msg));
                   httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                   httpclient.execute(httppost);
                   msgTextField.setText("");
                 } catch (ClientProtocolException e) {
                     // TODO Auto-generated catch block
                 } catch (IOException e) {
                     // TODO Auto-generated catch block
                 }
                }
                else
                {
                    // display message if text fields are empty
                    Toast.makeText(getBaseContext(),"All field are   required",Toast.LENGTH_SHORT).show();
                }
            }
        });
    }
} 
```

我的日志如下：

```
04-19 01:17:02.168: E/AndroidRuntime(583): FATAL EXCEPTION: main
04-19 01:17:02.168: E/AndroidRuntime(583): android.os.NetworkOnMainThreadException
04-19 01:17:02.168: E/AndroidRuntime(583):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
04-19 01:17:02.168: E/AndroidRuntime(583):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
04-19 01:17:02.168: E/AndroidRuntime(583):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
04-19 01:17:02.168: E/AndroidRuntime(583):  at libcore.io.IoBridge.connect(IoBridge.java:112)
04-19 01:17:02.168: E/AndroidRuntime(583):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
04-19 01:17:02.168: E/AndroidRuntime(583):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
04-19 01:17:02.168: E/AndroidRuntime(583):  at java.net.Socket.connect(Socket.java:842)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-19 01:17:02.168: E/AndroidRuntime(583):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-19 01:17:02.168: E/AndroidRuntime(583):  at com.husamalahmadi.send.SendDataToServerActivity$1.onClick(SendDataToServerActivity.java:55)
04-19 01:17:02.168: E/AndroidRuntime(583):  at android.view.View.performClick(View.java:3511)
04-19 01:17:02.168: E/AndroidRuntime(583):  at android.view.View$PerformClick.run(View.java:14105)
04-19 01:17:02.168: E/AndroidRuntime(583):  at android.os.Handler.handleCallback(Handler.java:605) 
```

有没有人可以帮助并告诉我我在这里做错了什么，知道一旦我调试我的应用程序就没有错误或警告这一事实

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:41:11.520

根据我在上面发布的问题，我找到了问题并从根本上解决了问题，如果没有 Blundell 的帮助，这不可能发生，他在我的问题中发表了评论，这里是问题和答案。

前面代码中的问题虽然看起来很好，但它正在执行一些代码，这些代码将在主 UI 线程中持续 5-10 秒，在早期的 android 版本中这是可以的，但在最新的 android 版本中却不是。所以我将这个followig代码添加到主要活动中：

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()  
                    .detectDiskReads()  
                    .detectDiskWrites()  
                    .detectNetwork()   
                                    .problems  
                    .penaltyLog()  
                    .build());  
        StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()  
                    .detectLeakedSqlLiteObjects()  
                    .detectLeakedClosableObjects()  
                    .penaltyLog()  
                    .penaltyDeath()  
                    .build()); 
```

此代码仅建议在开发阶段实现，但对于生产代码，我建议使用另一个线程，即工作线程来执行文件处理和网络东西或任何其他繁重的处理代码，并为主 UI 线程提供更新。这是一个很好的入门教程，您可以检查[Android 线程、处理程序和 AsyncTask - 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

# php - 将一个表复制到另一个具有不同列数的表

> ID：10160579
> 
> 赞同：0
> 
> 时间：2012-04-15T08:29:38.060
> 
> 标签：php, mysql

由于我远不是 php 专家，这让我惊呆了，我似乎无法为它编写脚本。

让我们看看我是否可以尽可能清楚地解释这一点。

假设我有 table1 和 table2

`Table1 = (teamid, name, round1pos, round1score, round2pos, round2score)`

`Table2 = (id, tournamentid, teamid, name, round1pos, round1score, round2pos, round2score...till round10pos/round10score)`

当从表 1 复制到表 2 时，我想在它前面添加 2 个字段。（id和锦标赛ID）

我面临的问题是 Table1 每次都有不同数量的 roundxpos/roundxscore。

基本上我想要做的是一旦锦标赛结束我想删除表。但将其中的数据复制到另一个表以存档结果。但每场比赛可以有不同大小的回合。

我希望有人能理解我想要实现的目标 +_+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:59:38.313

您应该规范化您的表格，但与此同时......我假设主要问题是处理代码中的可变数量的 roundxpos 和 roundxscore 列。

希望这可以帮助：

*   获取此查询的结果： SHOW COLUMNS FROM Table1 WHERE Field LIKE 'round%pos'
*   获取此查询的结果： SHOW COLUMNS FROM Table1 WHERE Field LIKE 'round%score'
*   通过遍历字段名称来创建 table2 插入

    ```
    //example, assuming results are fetched into an associative array
    $query = "INSERT INTO table2 (tournamentid, teamid, name)";
    foreach($roundpos_fields as $f){  $query .= "," . $f['Field'];  }
    foreach($roundscore_fields as $f){  $query .= "," . $f['Field'];  }
    $query .= "( SELECT $tournamentid, '' teamid, name"; 
    foreach($roundpos_fields as $f){  $query .= "," . $f['Field'];  }
    foreach($roundscore_fields as $f){  $query .= "," . $f['Field'];  }        
    $query .= ")"; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T08:37:37.160

您应该创建第三个表，从现有表中删除 roundX 列并使用它们的 ID 引用它们。

```
rounds: team_id, tournament_id, no, pos, score 
```

# c - fork() - 多进程和系统调用

> ID：10160583
> 
> 赞同：8
> 
> 时间：2012-04-15T08:30:00.913
> 
> 标签：c, fork

我正在编写一个使用多个 I/O 管道（每个进程一个管道）来获得一些最终结果的 mapreduce 程序。我在创建流程时遇到问题。具体来说，我收到以下错误：

```
wait error: Interrupted system call 
```

这是我产生进程的代码：

```
while (values[inc]!=NULL) //provided array of text lines
{
    if ((pid = fork()) == -1) {
        perror("fork error");
        exit(EXIT_FAILURE);
    }    

    else if (pid == 0) {             /* start of child process      */
        printf("Child process...\n");
        /* pipes[inc][1] is a file descriptor to which myMap writes some data
           using the write() system call
           mr is a struct that holds other function pointers */
        mr->myMap(pipes[inc][1],values[inc]); 
        exit(0);
    }
    else {                           /* start of parent process     */
        printf("Parent process...\n");

        if ((wpid = wait(&status)) == -1)
        /* Wait for child process.      */  
            perror("wait error");
        else {                       /* Check status.                */
            if (WIFSIGNALED(status) != 0)
                printf("Child process ended because of signal %d\n",
                       WTERMSIG(status));
            else if (WIFEXITED(status) != 0)
                printf("Child process ended normally; status = %d\n",
                       WEXITSTATUS(status));
            else
                printf("Child process did not end normally\n");
        }
        //close(fd[1]);

        printf("Parent process ended\n");
    }
    inc++;
} 
```

在此之后，我正在创建一个线程

```
pthread_t newThread;
pthread_create(&newThread,NULL,threadFunction,values);
pthread_join(newThread,NULL); 
```

threadFunction 使用 select() 函数找出哪个文件描述符准备好被读取并读取它并将数据放入字典中。

运行表单 gdb 调试器时，程序输出：

```
Parent process...
Child process...
wait error: Interrupted system call
Parent process ended
Parent process...
Child process ended normally; status = 0
Parent process ended
Parent process...
Child process...
Child process...
wait error: Interrupted system call
Parent process ended 
```

我不知道如何解决这个问题。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T08:44:30.853

您需要将`wait()`调用放入循环中，如果它返回错误（-1）并`errno == EINTR`继续循环。任何其他错误都是真正的错误，应该这样对待。

诸如分析计时器之类的事情可能会导致将信号发送到进程，但是可能导致中断的信号是`SIGCHLD`，正如您所知，当子进程*更改状态*时会调用它。

编辑：好的，我将在代码中写下答案：

```
do
{
    wpid = wait(&status);
}
while (wpid == -1 && errno == EINTR);
if (wpid == -1)
{
    perror("wait error");
    return -1;
}
else
{
    // we have wait status
    ...
} 
```

# tfs - 如何解除 MVC 项目与团队基础服务器的绑定？

> ID：10160586
> 
> 赞同：3
> 
> 时间：2012-04-15T08:30:22.210
> 
> 标签：tfs

我无法访问 TFS（它不再存在），但我想编辑该项目。我想断开我的项目和 TFS 之间的关系，但看到消息，例如“文件 HomeCatalog.cs 无法保存，因为它是写保护的”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:28:49.183

使用 Windows 资源管理器或您喜欢的任何工具从项目的所有文件夹中的所有文件中删除只读属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T13:10:17.153

要解除项目与团队基础服务器的绑定，请在解决方案资源管理器中打开项目并转到文件菜单，展开源代码控制选项并单击更改源代码控制。然后，您将收到一个提示，要求您取消解决方案与源代码管理的关联，您需要单击“是”。

# java - 让我的第一个 Spring webapp 工作

> ID：10160588
> 
> 赞同：2
> 
> 时间：2012-04-15T08:30:35.473
> 
> 标签：java, spring, spring-mvc

我有一个从 search.jsp 中的表单获取 ID 的控制器。我希望它重定向到 entitydemo.jsp，它应该能够访问 EntityDemo 并输出其属性。我怎么做？我是否需要以某种方式使用重定向并将 EntityDemo 作为会话属性？

```
@Controller
public class SearchEntityController {

  @RequestMapping(value = "/search", method = RequestMethod.GET)
  public EntityDemo getEntityDemoByID(@ModelAttribute("search") Search search, BindingResult result) {
    EntityDemo entityDemo = null;
    if (search.getId() != null) {
      int id = Integer.parseInt(search.getId());
      entityDemo = DBHelper.getEntityDemo(id);
    }
    return entityDemo;
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:36:14.097

假设您有一些名为的类，`EntityDemo`它具有所有字段，我认为您应该这样做：`Getters``Setters`

```
@Controller
public class SearchEntityController {

  @RequestMapping(value = "/search", method = RequestMethod.GET)
  public ModelAndView getEntityDemoByID(@ModelAttribute("search") Search search, BindingResult result) {
    EntityDemo entityDemo = null;
    Map<String, Object> model = new HashMap<String, Object>();
    if (search.getId() != null) {
      int id = Integer.parseInt(search.getId());
      entityDemo = DBHelper.getEntityDemo(id);
      model.put("entityDemo", entityDemo);
    }

    return new ModelAndView(new RedirectView(pageIWantToRedirectTo), model);
  }
} 
```

然后，在您的 JSP 中，您可以使用`JSTL`并执行以下操作：`${entityDemo.name}`，`name`我假设`EntityDemo`该类与适当的 一起具有的字段在哪里`Getter`，这是`public String getName(){return this.name;}`。

据我所知，Controller 方法不会返回整个对象，它们要么返回`String`表示视图名称的值，要么返回`\foo\bar\myPage.jsp`整个`ModelAndView`对象（有两种类型的对象，其中一种具有`portlet`全名，另一种具有全名）有`servlet`。在这种情况下，你必须使用`servlet`全名中的那个。为了清楚起见，当我说全名时，我指的是包含它所在的包的名称。如果我没记错的话，你正在寻找的那个for is in`springframework...servlet.ModelAndView`或类似的东西。

编辑：如果您想在提交时重定向，那么，您将需要制作 2 个控制器，一个将呈现表单，另一个将在提交表单后重定向。

关于您的 JSP 页面，您应该有一个 xml 文件名`dispatcher-servlet.xml`。名称可能不同，具体取决于您在 中的配置`web.xml`，但它们都具有`<servletname>-servlet.xml`. 应该有一个名为的属性`viewResolver`（虽然应该是这种情况，但某些 IDE 不会为您填充太多内容。另一方面，诸如 Netbeans 之类的 IDE 会为您设置大部分初始配置）。这是另一个作用于您的`views`. 它的作用是自动在您`view`在控制器中指定的名称之前和之后附加项目。通常它附加一个前缀`pages/jsp/`和一个后缀`.jsp`。因此，如果您有一个包含以下路径的页面`pages/jsp/myPage.jsp`，那么您需要传入控制器的只是`myPage`. 页面的完整路径将由视图解析器构建。如果您传入整个 URL，它仍会继续添加内容，因此即使您指定了正确的路径，仍然无法找到该页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:25:09.777

我在控制器中使用 2 种方法让它工作 - 一种用于显示表单，另一种用于搜索结果

控制器：

```
@Controller
public class SearchEntityController {

  @RequestMapping(value = "/search", method = RequestMethod.GET)
  public void searchForm(Model model) {
    model.addAttribute(new Search());
  }

  @RequestMapping(value = "/entitydemo", method = RequestMethod.POST)
  public void showSearchResult(@ModelAttribute Search search, Model model) {
    model.addAttribute("entityDemo", getEntityDemo(search));
  }

  // code to load entity here
} 
```

（搜索是一个带有 an`int id`和访问器的类）

search.jsp 中的表单：

```
<form:form action="entitydemo" commandName="search">
    ID: <form:input path="id" />
</form:form> 
```

在 entitydemo.jsp 中显示结果：

```
<core:out value="${entityDemo.foo}" /> <br/>
<core:out value="${entityDemo.bar}" /> 
```

# php - 通过 htaccess、php、javascript 等进行页面重定向

> ID：10160590
> 
> 赞同：0
> 
> 时间：2012-04-15T08:31:05.883
> 
> 标签：php, .htaccess, redirect, server-side

我想问一个问题：

我如何将请求重定向到[http://sub.example.com](http://sub.example.com)或[http://sub.example.com](http://sub.example.com)到

[http://sub.example.com/index.php](http://sub.example.com/index.php)？而且我不是在询问将 index.php 设置为 DirectoryIndex，而是要求将服务器物理重定向到[http://sub.example.com/index.php](http://sub.example.com/index.php)而不是仅在 sub.example.com 处执行 index.php地址栏。是否有任何 .htaccess 或 php 服务器端解决方案？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:34:08.503

以 htaccess 为例

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

将不是物理文件或文件夹的所有内容重写到 index.php

做一个从 / 到 /index.php 的硬重定向

```
RedirectMatch ^/$ http://sub.exmaple.com/index.php 
```

# c++ - OpenCV 机器学习函数需要 CvFileStorage* 而不是 cv::FileStorage*

> ID：10160592
> 
> 赞同：16
> 
> 时间：2012-04-15T08:32:03.677
> 
> 标签：c++, opencv, machine-learning, computer-vision, neural-network

我正在使用 OpenCV 中机器学习库中的 CvANN_MLP 函数，并且我想将训练有素的网络写入文件。使用 SIFT 时，我已经能够使用 cv::FileStorage 为关键点和描述符做到这一点，但是当我在这里尝试这样做时，它不起作用。

机器学习的标头自始至终都使用 CvFileStorage，但我无法在没有*“CvFileStorage fs 具有初始化程序但类型不完整”*错误的情况下声明此对象，并且传入 cv::FileStorage 根本没有帮助。

我想这可能是因为我没有最新版本的 OpenCV，但我检查了 SVN 存储库，它的原型中仍然有 CvFileStorage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-21T13:16:09.287

*由[Will](https://stackoverflow.com/users/252053/will)编写的解决方案，最初作为他们问题的一部分发布。*

隐藏在`cv::FileStorage`类中的是以下内容：

```
// returns the underlying CvFileStorage*
CvFileStorage* operator *() { return fs; }
const CvFileStorage* operator *() const { return fs; } 
```

# java - Java“指针”如何工作？

> ID：10160594
> 
> 赞同：6
> 
> 时间：2012-04-15T08:32:31.337
> 
> 标签：java, pointers

假设这是 C++ 代码：

```
void change(int& x){
    x++;
} 
```

或者

```
void change2(int* a){
    *a++;
} 
```

两者都会改变全局 x，对吧？

那么我怎么能在java中做这样的事情呢？
具体来说，我想指向一个 Vector 对象

但由于 Java 没有指针，我不知道该怎么做。
通过搜索互联网，我看到人们说 Java 以其他方式做到这一点，但我没有找到任何真实的例子。

感谢帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T08:36:55.013

在 Java 中，不是指针，而是对对象的引用。您不能通过引用传递原始类型，但可以将原始类型包装在对象中，然后传递对该对象的引用。

Java 提供了`Integer`wraps的类型`int`，但是这种类型是不可变的，因此您无法在构造后更改其值。但是，您可以`MutableInt`从 Apache Commons 使用：

```
void change(MutableInt x) {
    x.increment();
} 
```

对 x 的更改将对调用者可见。

* * *

> 具体来说，我想指向一个 Vector 对象

当您编写时，您正在为变量`Vector v = ...;`分配对向量的*引用*`v`。Java 中的引用与指针非常相似。引用实际上是在内部使用指针实现的。

Java 使用按值传递。将向量传递给方法时，实际上是在复制对该向量的*引用。*它不会克隆载体本身。因此，在 Java 中传递引用与在 C++ 中传递指针非常相似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T08:46:32.243

使用 Java，您不能像`int`通过引用一样传递原始类型，它们只能通过值传递。

您唯一能做的就是找到技巧来做到这一点，因为它`Objects`是通过引用传递的。这里举两个例子。

使用单值数组，像这样

```
int[] value = new int[1];
value[0] = 2;

// call a method
obj.setValue(value);

// and in setValue
public void setValue(int[] value) {
  value[0] = 5;
} 
```

或者第二种方法使用持有者类：

```
public class Holder<T> {
  public T value;
  public Holder(T value) {
    this.value = value;
  }
}

// then use it in this way
Holder<Integer> h = new Holder<Integer>(2);

obj.setValue(h);

// and in setValue
public void setValue(Holder<Integer> h) {
  h.value = 5;
} 
```

在这种情况下，我使用带有泛型的持有者类实现，但您也可以有一个简单的持有者，仅适用于整数。例如：

```
public class IntHolder {
  public int value;
  public IntHolder(int value) {
    this.value = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T08:39:45.933

Java 总是按值传递，并且没有 C++ 意义上的全局变量。因此，如果您想在 C++ 中执行相同的操作，则需要返回新值。

因此：

```
public int change(int x) {
    return ++x;
    // or 
    // return x + 1;
} 
```

要测试它：

```
int x = 2;

change(x);

System.out.println(x); // returns 2

x = change(x);

System.out.println(x); // returns 3 
```

所以让方法被调用没有任何意义，`change`按照`calculateThisInt`.

* * *

Java 确实按值传递对象。但正如[Mark Byers](https://stackoverflow.com/a/10160620/3713)提到的，[Integer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)类是不可变的，您可以[`MutableInt`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/mutable/MutableInt.html)从 Apache Commons 库中使用。为了描述它是如何工作的，您可以自己为您的示例实现它：

```
public class MyInt() {

    public int i;

    public void setInt(int i) {
        this.i = i;
    }

    public int getInt() { 
        return this.i; 
    }

    public int increment() {
        this.i++;
    }

} 
```

您需要更改`change`函数以将上述`MyInt`对象作为参数：

```
public void change(MyInt i) {
    i.increment();
} 
```

用法：

```
MyInt x = new MyInt();
x.setInt(2);

change(x);

System.out.println(x.getInt); // returns 3 
```

* * *

在您的情况下，您想更改[Vector](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html)对象...

```
public void changeVector(Vector v) {
    // anything you do with 'v' will change it even
    // for the scope that called this method
}

// Usage:
Vector v = new Vector();
changeVector(v);
// v should be changed after calling change vector method 
```

希望这一切都有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:08:09.893

虽然您无法替换已传递给函数的对象，但您可以通过直接更改字段或调用方法来更改其状态。如果您需要类似指向原语的指针，请将其包装在一个对象中。要遵循您的代码，您可以这样做：

```
public class IntPointer {
    public int value;
    public IntPointer(int value) {
        this.value = value;
    }
} 
```

然后在其他地方你可以说：

```
public static void change(IntPointer ipoint) {
    ipoint.value++;
}
public static void main(String[] args) {
    IntPointer a = new IntPointer(10);
    change(a);
} 
```

这可能看起来有点尴尬，但它并没有像你想象的那样经常出现。我更有可能做这样的事情：

```
public class ABPair {
    private int a = 0;
    private int b = 0;
    public static void changeA() {
        a++;
    }
    public static void changeB() {
        b++;
    }
} 
```

所以在其他地方我可以说：

```
public static void main(String[] args) {
    ABPair ab = new ABPair();
    if (ACondition) {
        ab.changeA();
    }
} 
```

换句话说，我的数据往往已经包装在某种对象中，并且我倾向于使用数据对象的方法来调解任何更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T09:33:20.520

> 两者都会改变全局 x，对吧？
> 
> 那么我怎么能在java中做这样的事情呢？具体来说，我想指向一个 Vector 对象

这个问题有点模糊，但我的印象是你最终想要一个可以保存东西**的全局[向量？](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)**

有很多方法可以做到这一点，但最简单的方法之一是在类中拥有一个**静态**字段，并使用公共静态方法来访问它。（或者只是一个可以直接访问的公共静态字段，但这在 Java 中确实不是惯用的。）

```
public class Foo {
    private static List<Integer> globalVector = new Vector<Integer>();

    public static void add(int number){
         globalVector.add(number);
    }

    // ... plus whatever other accessors to the global list that you need 
} 
```

代码中的其他任何地方：

```
Foo.add(23); // modifies the global vector 
```

（顺便说一句，[Vector](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)有点过时了，通常我们现在会使用 ArrayList 代替它。正如 Javadoc 所说，它已经过改造以实现 List 接口，我也在示例中使用了该接口。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T15:03:03.283

Java 支持它所谓的“引用”。引用的行为很像 C/C++ 类语言中的指针。它们的行为方式与这些语言中的“参考”工作方式不同。

C 中的指针和 Java 中的引用之间的主要区别是：

您不能在 Java 中进行指针运算（即，您不能从 Java 引用中“添加”或“减去”，您只能取消引用它或将其与另一个引用进行比较）。您不能将其转换为不兼容的类型：Java 是强类型安全的，您不能将内存中的字节“重新解释”为其他对象。对于指针的某些用途，这没有真正的影响（例如，链表在两种语言中的工作方式几乎相同），对于其他人来说，差异很大（C 中的数组只是花哨的指针算法，在 Java 中它们的工作方式完全不同）。

所以在某种程度上，Java 引用可以称为“受限指针”。

# iphone - 如何提取 NSUserDefault 的一部分以放入 UITableView、UIButton 文本甚至 UILabel？

> ID：10160598
> 
> 赞同：0
> 
> 时间：2012-04-15T08:32:46.523
> 
> 标签：iphone, xml, xcode, nsstring, xml-parsing

我已经使用以下方法缓存了 url 的内容，并将文本保存为 NSUserDefault，因为我需要在另一个 UIViewController 中访问它。

这是我用来下载 URL 内容并保存为 NSUserDefault 的代码，这是我用来将该 NSUserDefault 的内容加载到 UITableView 中的代码。

//下载 URL 内容并保存到 NSUser 默认值

```
NSString *url = [[NSString stringWithFormat:@"http://www.pharmacon.site50.net/database/1.xml"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *myTxtFile = [NSString stringWithContentsOfURL:[NSURL URLWithString:url] encoding:NSUTF8StringEncoding error:&err];
[[NSUserDefaults standardUserDefaults] setObject:myTxtFile forKey:@"one"]; 
```

//加载一个 NSUserDefault 并将其放置在 UITextView 中

```
NSString *myTxtFile = [[NSUserDefaults standardUserDefaults] stringForKey:@"one"];
textView.text=myTxtFile; 
```

这是我下载的典型 XML 文件的样子；

```
<item>
<din>1</din>
<category>Drugs</category>
<name>Paracetamol</name>
<phonetic>Pa-ra-ce-ta-mol</phonetic>
<spoken>Paracetamol.mp3</spoken>
<description>
Paracetamol is a drug commonly used for headaches and minor aches and pains.
</description>
<purpose>
Paracetamol is best used for minor to moderate aches and pains and can also be used to treat mild headaches.
</purpose>
<author>Sam Vale</author>
<editor>Harrison Fuller</editor>
</item> 
```

现在，我想要做的是阅读这个 NSUserDefault 但实际上只提取名称区域中的文本（因此在本例中为“扑热息痛”），然后将其放入 UITableView 单元格的文本中，作为按钮或 UILabel（选择您认为最好的或您知道的）。我想这样做的原因是因为我将在 UITableView 中显示从数据库下载的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:36:24.003

你需要`NSXMLParser`这个。有很多关于如何使用它来解析 Internet 上可用的 XML 的示例。

# eclipse-rcp - 创建 Eclipse 扩展点时选择和序列之间的区别

> ID：10160601
> 
> 赞同：4
> 
> 时间：2012-04-15T08:32:58.233
> 
> 标签：eclipse-rcp

任何人都可以在创建 Eclipse 扩展点时解释选择和序列之间的区别！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:10:26.047

从[架构定义帮助页面](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/editors/schema_editor/page_schema_definition.htm)：

> 例子：
> 
> 扩展元素指定一个或多个快捷元素的序列被允许作为其合法子元素。
> 元素引用用于表示快捷方式元素。
> 序列合成器**用于表示元素序列**。

![顺序](../Images/a05faa7f21b374d06332201d3f480474.png)

扩展点元素第 2 节

> 快捷方式元素指定允许将描述或类别元素作为其合法子元素。
> 元素引用用于表示描述和类别元素。**Choice 合成器用于表示元素的**
> 选择。

 **![选择](../Images/c0d6688da4e311cf2e3b3197f5939a59.png)

正如这个[线程所提到](http://www.eclipse.org/forums/index.php/t/103301/)的，这是[标准的 XML Schema](http://www.w3schools.com/schema/default.asp)，其中包括：

*   [XML 模式选择元素](http://www.w3schools.com/schema/el_choice.asp)
*   [XML 模式序列元素](http://www.w3schools.com/schema/el_sequence.asp)**

# asp.net - 带有 fastcgi-mono-server4 的单声道随机 CS0006 编译错误

> ID：10160605
> 
> 赞同：4
> 
> 时间：2012-04-15T08:33:43.223
> 
> 标签：asp.net, linux, mono, fastcgi-mono-server

我正在尝试使用带有 fastcgi-mono-server4 的 mono 2.10.8.1 在我的 Linux 服务器上部署在 Mono/OSX 上开发的 ASP MVC 项目

webapp 总是可以正常启动，但随后我开始收到各种 URI 的随机 CS0006 编译错误，一旦它们中断，它们就会一直中断，直到我重新启动服务器应用程序。

一个示例错误：

```
Server Error in '/' Application

Compilation Error

Description: Error compiling a resource required to service this request. Review your source file and modify it to fix this error.

Compiler Error Message: CS0006: Metadata file `/tmp/root-temp-aspnet-0/ed68754/App_global.asax_40e709ea.dll' could not be found

~/Views/Order/Download.aspx 
```

一月份有[一个相关的线程](https://stackoverflow.com/questions/8960212/mod-mono-random-compilationexception-errors)，但问题和答案似乎都是 mod_mono 特定的并且相当手动。有人对尝试调试/解决/解决此问题有什么建议吗？它变得非常令人沮丧。特别是，是否有任何“不受支持”的解决方法，我可以从我的 Windows Server 机器复制一些东西以使用 MS 实现而不是有问题的单声道？

（我也[提交了错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=4439)。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:00:46.490

由于错误似乎是 Mono JIT 尝试编译不存在的临时文件的问题，因此我花了几天时间尝试解决此问题的不同方法（与解决它相比）。一种可行的解决方案是在 Windows 上使用 aspnet_compiler 创建一个二进制版本，该版本可以在 Linux/Mono 上按原样复制和运行（因为 Mono 的最新版本现在支持预编译的 ASP.NET 应用程序）。

但是，我一直在寻找本机 Linux 解决方案，我不想编译和同步二进制文件（而不是同步 GIT 代码仓库）到服务器，所以当我遇到 Mono 时，我正在寻找另一种解决方案时间编译，这几乎相当于 Windows 上的 ngen.exe。

虽然它没有预编译所有内容，但它似乎已经成功了。对我来说，这个部署脚本在没有任何运行时构建失败的情况下完成了这项工作：

```
xbuild SystemDiscs.sln
mono --aot -O=all SystemDiscs/bin/SystemDiscs*.dll
killall -9 mono
nohup fastcgi-mono-server4 /socket=tcp:127.0.0.1:8000 /applications=/:/var/asp/S
ystemDiscs/SystemDiscs/ > /var/log/systemdiscs.log & 
```

第一步`SystemDiscs*.dll`编译的解决方案的输出在哪里。`xbuild`我不认为这会预编译 ASP 页面（据我所知，x86 不支持 --aot=full），但不知何故它完成了这项工作。我一直在等着看这是否只是一个侥幸，但自从我十天前问这个问题以来，可能有十几个提交/部署一直很好，所以我认为可以肯定地说它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T13:09:58.183

我有一个类似的问题：

```
Compilation Error

Description: Error compiling a resource required to service this request. Review your source file and modify it to fix this error.

Compiler Error Message: CS0006: Metadata file `/tmp/<DOMAIN/>/<username/>-temp-aspnet-0/5ed74d00/App_global.asax_34cccb99.dll' could not be found
/Default.aspx 
```

但这与预编译没有任何关系，而是与我的用户名中的反斜杠有关。我使用 likewise-open 登录到 Windows 域，所以我的用户名是 <DOMAIN/>\<username/> 而我的主目录没有反斜杠：/home/likewise-open/<DOMAIN/>/<username/ >。这种差异或只是反斜杠本身导致 mono 在 temp 目录中找不到编译的 global.asax。如果您仔细查看详细输出，您会发现 out 参数中的反斜杠 \ 已更改为正斜杠 /：

```
dmcs /target:library /lib:"/home/likewise-open/<DOMAIN/>/<username/>/Documents/test9999/test9999/bin" /debug+ /optimize- /warn:4 /out:"/tmp/<DOMAIN/>\<username/>-temp-aspnet-0/5ed74d00/App_Web_17ca7bdd.dll" /r:"/usr/lib/mono/4.0/mscorlib.dll" /r:"/usr/lib/mono/gac/Microsoft.CSharp/4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll" /r:"/usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll" /r:"/usr/lib/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll" /r:"/usr/lib/mono/gac/System.Web/4.0.0.0__b03f5f7f11d50a3a/System.Web.dll" /r:"/usr/lib/mono/gac/System.Data/4.0.0.0__b77a5c561934e089/System.Data.dll" /r:"/usr/lib/mono/gac/System.Web.Services/4.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll" /r:"/usr/lib/mono/gac/System.Xml/4.0.0.0__b77a5c561934e089/System.Xml.dll" /r:"/usr/lib/mono/gac/System.Drawing/4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll" /r:"/usr/lib/mono/gac/System.EnterpriseServices/4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll" /r:"/usr/lib/mono/gac/System.IdentityModel/4.0.0.0__b77a5c561934e089/System.IdentityModel.dll" /r:"/usr/lib/mono/gac/System.Runtime.Serialization/4.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll" /r:"/usr/lib/mono/gac/System.Xaml/4.0.0.0__b77a5c561934e089/System.Xaml.dll" /r:"/usr/lib/mono/gac/System.ServiceModel/4.0.0.0__b77a5c561934e089/System.ServiceModel.dll" /r:"/usr/lib/mono/gac/System.ServiceModel.Web/4.0.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll" /r:"/usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll" /r:"/usr/lib/mono/gac/System.Web.Extensions/4.0.0.0__31bf3856ad364e35/System.Web.Extensions.dll" /r:"/usr/lib/mono/gac/System.Data.DataSetExtensions/4.0.0.0__b77a5c561934e089/System.Data.DataSetExtensions.dll" /r:"/usr/lib/mono/gac/System.Xml.Linq/4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll" /r:"/usr/lib/mono/gac/System.ComponentModel.DataAnnotations/4.0.0.0__31bf3856ad364e35/System.ComponentModel.DataAnnotations.dll" /r:"/usr/lib/mono/gac/System.Web.DynamicData/4.0.0.0__31bf3856ad364e35/System.Web.DynamicData.dll" /r:"/usr/lib/mono/gac/System.Data.Linq/4.0.0.0__b77a5c561934e089/System.Data.Linq.dll" /r:"/usr/lib/mono/gac/System.Web.ApplicationServices/4.0.0.0__31bf3856ad364e35/System.Web.ApplicationServices.dll" /r:"/home/likewise-open/<DOMAIN/>/<username/>/Documents/test9999/test9999/bin/test9999.dll" /r:"/tmp/<domain/>/<username/>-temp-aspnet-0/5ed74d00/App_global.asax_34cccb99.dll"  /nowarn:0169 /d:DEBUG  -- "/tmp/<DOMAIN/>\<username/>-temp-aspnet-0/5ed74d00/App_Web_17ca7bdd_0.cs" 
```

所以：

```
/out:"/tmp/<DOMAIN/>\<username/>-temp-aspnet-0/5ed74d00/App_Web_17ca7bdd.dll 
```

变成

```
/tmp/<DOMAIN/>/<username/>-temp-aspnet-0/5ed74d00/App_global.asax_34cccb99.dll 
```

如果我将目录 5ed74d00 复制到 /tmp/<DOMAIN/>/<username/>-temp-aspnet-0/ 应用程序按预期工作。

我花了将近 2 天的时间才看到这个，所以希望我能帮助其他人回答这个问题。

# django - Django Mongoengine EmbeddedDocument 查询问题

> ID：10160606
> 
> 赞同：1
> 
> 时间：2012-04-15T08:33:46.670
> 
> 标签：django, mongodb, mongoengine

我的模型是关于顶级电影的列表

```
class Movie(Document):
    title = StringField()
      ...
    ranks = ListField(EmbeddedDocumentField('Rank'))

class Rank(EmbeddedDocument):     
    rank = IntField()
    imdb_rating = FloatField()
    date = StringField(required=True) 
```

如何编写查询以仅获取今天有排名记录的电影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:49:46.703

我建议使用`datetime`对象作为日期而不是字符串，因为它看起来更明确。无论哪种方式，您都可以轻松找到所有`Movie`具有`date`今天匹配等级的文档，如下所示：

```
Movie.objects(ranks__date__gte=datetime.today().date())  # using DateTimeField 
```

或者

```
Movie.objects(ranks__date="16/04/2012")  # using StringField 
```

# r - 如何修改 ggplot 的 geom_tile 生成的热图的图例？

> ID：10160609
> 
> 赞同：1
> 
> 时间：2012-04-15T07:25:23.060
> 
> 标签：r, data-visualization, ggplot2

有没有办法修改使用 ggplot2 包中的 geom_tile 生成的热图[的](http://had.co.nz/ggplot2/geom_tile.html)图例？我想增加图例中的瓷砖数量并在那里设置显示值的最小值和最大值。

在手册页的这个示例中，图例包含五个彩色图块，代表从 -0.4 到 0.4 的值。我怎样才能让例如 9 瓦显示呢？

```
library (ggplot2)

pp <- function (n,r=4) {
   x <- seq(-r*pi, r*pi, len=n)
   df <- expand.grid(x=x, y=x)
   df$r <- sqrt(df$x^2 + df$y^2)
   df$z <- cos(df$r^2)*exp(-df$r/6)
   df
}

p <- ggplot(pp(20), aes(x=x,y=y))
p + geom_tile(aes(fill=z)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:51:33.987

我想有几种可能的方法来存档它。一种解决方案是手动指定图例的中断。

```
d = pp(20)
ggplot(d, aes(x=x,y=y,fill=z)) + geom_tile() + 
    scale_fill_continuous( breaks = round( seq(-.4, .4, length.out = 10 ), 1) ) 
```

# android - 在 Android 中返回 OnClickListener 对象的函数

> ID：10160610
> 
> 赞同：1
> 
> 时间：2012-04-15T08:34:27.897
> 
> 标签：android, onclick, onfocus, onclicklistener, oncheckedchanged

所以我做了一些研究，试图找到一个函数来为 RadioGroup 返回一个 OnClickListener 对象，一个很好的线索是“ [pedromateo ”提出的一个问题，“](https://stackoverflow.com/q/6610143/1328476)[纪尧姆](https://stackoverflow.com/a/9069957/1328476)”给出了一个有希望的答案，但我什至找不到这个函数“getOnClickListener()”，否则我不会寻求帮助。

所以请有人指引我正确的方向。

-编辑-

有些人可能想知道我为什么要这样做作为答案：

```
public class CompositeOnClickListener implements View.OnClickListener {
    List<View.OnClickListener> listeners;
    public CompositeOnClickListener() {
        listeners = new ArrayList<View.OnClickListener>();
    }
    public void addOnClickListener(View.OnClickListener listener) {
        listeners.add(listener);
    }
    @Override
    public void onClick(View v) {
        for (View.OnClickListener listener : listeners) {
            listener.onClick(v);
        }
    }
} 
```

[从此处复制[DeeV 的](https://stackoverflow.com/a/7587569/1328476)答案。]

因此，我将使用该类将多个侦听器添加到同一个对象，并且我希望用户将其添加`OnClickListener`到对象中，我将使用非非现有的“ `getOnClickListener`”函数获取它并将其添加到`CompositeOnClickListener`.

任何想法将不胜感激。

-编辑(2)-

为什么有 a`getOnFocusChangedListener`而没有`getOnCheckedChanged`or `getOnClick`？

这真的让我很困惑，让我很沮丧。=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:42:52.713

你需要在你的扩展类中实现这个方法`View`，`View`没有这样的方法。

# asp.net - 如何获取触发到断点的 ASP.NET 事件列表？

> ID：10160623
> 
> 赞同：1
> 
> 时间：2012-04-15T08:37:05.580
> 
> 标签：asp.net, .net, visual-studio, profiling, intellitrace

如何获取触发到断点的 ASP.NET 事件列表？例如，如果我在 Page_Load 中放置了一个断点，我希望看到诸如 preinit、init、LoadViewState、loadpostdata..etc 之类的事件被触发。我正在查看 IntelliTrace，但没有此类信息。

有什么工具可以提供这些信息吗？探查器？商业产品很好。

我正在使用一些第三方服务器控件，这样的工具对调试有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:43:42.500

您可以签出[StackTrace](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)类。

# javascript - 动态 JavaScript 对象属性值

> ID：10160629
> 
> 赞同：1
> 
> 时间：2012-04-15T08:38:34.520
> 
> 标签：javascript, asp-classic, jscript

我试图弄清楚是否有一种方法可以在其原型中将对象属性定义为动态值，该动态值可以在每次创建对象实例时更改。这是我能描述它的最好方式；我做了一个小提琴来展示我正在尝试做的事情（尽管它不起作用）。

```
var Response = {
    LCID: 321
};

Date.prototype.LCID = Number(0);
Date.prototype.LCID.valueOf = function() { return Response.LCID; };

document.write((new Date()).LCID);
Response.LCID = 456;
document.write((new Date()).LCID); 
```

[http://jsfiddle.net/tx2fW/2/](http://jsfiddle.net/tx2fW/2/)

我想要实现的是，它`Response.LCID`可以在代码的整个生命周期内发生变化，正如你可以从我身上看到的那样，稍后在代码中改变它的值。每当我创建一个`Date`对象时，我希望 的值`(new Date()).LCID`是 的当前值`Response.LCID`，而不仅仅是我第一次创建时的值`Date.prototype.LCID`。

有什么办法可以做到这一点？最大的限制是它必须在 JavaScript 1.5 中工作......虽然我很想知道它是否可以在最近的版本中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:46:06.347

好的，这是使用该[`__defineGetter__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/DefineGetter)方法完成的，但是我不确定它在所有浏览器上的表现如何，但这是我能找到实现您想要的唯一方法（我认为这一次就是您想要的）

[http://jsfiddle.net/tx2fW/6/](http://jsfiddle.net/tx2fW/6/)工作示例。

```
var Response = {
    LCID: 321
};

var d = Date.prototype;

d._LCID = Number(0);
d.getLCID = function() {
    if (d._LCID != Response.LCID) d._LCID = Response.LCID;
    return d._LCID ;
};
d.__defineGetter__("LCID", function() {
    return this.getLCID();
});

document.write((new Date()).LCID);
Response.LCID = 456;
document.write((new Date()).LCID);​ 
```

如需替代方案，`__defineGetter__`请参阅[此帖子](https://stackoverflow.com/questions/5731454/neat-alternatives-to-definegetter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T10:10:19.960

`Number(0) === 0`. 修改原始值`.valueOf`和`.toString`对原始值无效。

正确的方法是使用[operator](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)传递构造函数的**实例**：`Number`[`new`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)

```
var Response = {
    LCID: 321
};
Date.prototype.LCID = new Number();   // <-- Use the "new" operator
Date.prototype.LCID.valueOf = function() { return Response.LCID; }; 
```

## 带注释的演示和注释：http: [//jsfiddle.net/tx2fW/7/](http://jsfiddle.net/tx2fW/7/)

*   `LCID`是一个对象。**`typeof new Date().LCID === 'object'`**.
*   `LCID`是 的真实实例`Number`。**`new Date().LCID instanceof Number === true`**
*   `LCID`等于 321：**`(new Date().LCID == 321) === true`**
*   `LCID`与 321: 不同**`(new Date().LCID === 321) === false`**。
    （因为 LCID 是一个对象，而 321 是一个原始数值）。

PS。如果您不熟悉`==`vs `===`，请参阅[JavaScript 比较中应该使用哪个等号运算符 (== vs ===)？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:55:51.333

经过更多的研究和实验，我能够真正解决这个问题。我曾尝试使用 Date 构造函数等，但我在最初的试验中运气不佳 - 显然是因为我忽略了 Date 对象是独一无二的这一事实，因为它的功能取决于它的调用方式（如一个函数或对象构造函数）。这意味着您不能只做，`Date.prototype.constructor.apply(this, arguments)`因为您将得到的只是一个字符串（ Date 对象被作为函数调用）。

在找到[这个线程](https://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply)并阅读它之后，我想出了以下代码，它创建了一个实际的 Date 对象（如果作为函数调用，则为字符串）并完美地模仿了内置的 Date 对象（就我的测试显示而言）。每次创建新的 Date 对象时，它都会获取在对象创建期间动态生成的 LCID 属性，这正是我所需要的。

```
Date = (function(orig) {
    var date = function(a, b, c, d, e, f, g) {
        var object = (this instanceof Object ? (arguments.length < 1 ? new orig() : (arguments.length < 2 ? new orig(a) : (arguments.length < 4 ? new orig(a, b || 0, c || 1) : new orig(a, b, c, d || 0, e || 0, f || 0, g || 0)))) : orig());
        object.LCID = Response.LCID;

        return object;
    };
    date.prototype = orig.prototype;

    return date;
})(Date); 
```

我还创建了一堆测试用例，以确保与内置 Date 对象没有区别，或者使用此代码（注释掉此代码以查看使用内置 Date 对象的结果并进行比较）。

```
var Response = { 'LCID': 123 };

Date = (function(orig) {
    var date = function(a, b, c, d, e, f, g) {
        var object = (this instanceof Object ? (arguments.length < 1 ? new orig() : (arguments.length < 2 ? new orig(a) : (arguments.length < 4 ? new orig(a, b || 0, c || 1) : new orig(a, b, c, d || 0, e || 0, f || 0, g || 0)))) : orig());
        object.LCID = Response.LCID;
        return object;
    };
    date.prototype = orig.prototype;
    return date;
})(Date);

var x = new Date();
document.writeln(x);
document.writeln(x.LCID);
document.writeln(x.getFullYear());
document.writeln(typeof x);
document.writeln(Object.prototype.toString.call(x));
document.writeln(x instanceof Date);
document.writeln("<br/>");

Response.LCID = 456;

var y = new Date();
document.writeln(y);
document.writeln(y.LCID);
document.writeln(y.getFullYear());
document.writeln(typeof y);
document.writeln(Object.prototype.toString.call(y));
document.writeln(y instanceof Date);
document.writeln("<br/>");

document.writeln(Date());
document.writeln(new Date());
document.writeln(new Date(2012));
document.writeln(new Date(2012, 7));
document.writeln(new Date(2012, 7, 14));
document.writeln(new Date(2012, 7, 14, 9));
document.writeln(new Date(2012, 7, 14, 9, 45));
document.writeln(new Date(2012, 7, 14, 9, 45, 27));
document.writeln(new Date(2012, 7, 14, 9, 45, 27, 687)); 
```

这也可作为更新的小提琴：http: [//jsfiddle.net/tx2fW/9/](http://jsfiddle.net/tx2fW/9/)

# sql - 插入触发器之前的 SQL Server 2008

> ID：10160635
> 
> 赞同：3
> 
> 时间：2012-04-15T08:39:49.763
> 
> 标签：sql, sql-server-2008, triggers

我有以下查询：

```
Insert into tblTest (ID, Name, Age) VALUES (1, 'TestName', 20); 
```

在我的触发器中，我想检查 - 如果查询的 ID 等于 1，则发送另一个查询：

```
Insert into tblTest (ID, Name, Age) VALUES (2, 'TestName', 21); 
```

否则，不要做任何事情。

问题是，我不知道如何保持参数不变而只是更改年龄，所以基本上我想发送 SAME 查询，并更改某个参数（在这种情况下，它的年龄参数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:46:09.863

即将插入的行可以在特殊`inserted`表中找到。这是一个例子：

```
if object_id('tblTest') is not null 
    drop table tblTest
create table tblTest (id int, name varchar(50), age int)
go
create trigger trg_tblTest_BeforeInsert
on tblTest
after insert
as begin
    insert  tblTest
    select  id + 1
    ,       name
    ,       age + 1
    from    inserted
    where   id = 1 -- Only for rows with id=1
end
go
insert tblTest (id, name, age) values (1, 'TestName', 20)
select * from dbo.tblTest 
```

这打印：

```
id  name      age
1   TestName  20
2   TestName  21 
```

# twitter-bootstrap - 在表中使用 SELECT 时的引导 UI 干扰

> ID：10160636
> 
> 赞同：1
> 
> 时间：2012-04-15T08:39:49.957
> 
> 标签：twitter-bootstrap

我想将一个表单字段放入 Bootstrap 的表类中，一切都很顺利，直到我在表单中添加了一个 SELECT 元素，坏的 juju 爬进来了。现在——虽然表单仍然有效并且呈现“ok”——有在上述选择下拉菜单的水平起点和终点垂直散落着奇怪的视觉伪影。

这个例子可以在这里看到：[[example]](http://jsfiddle.net/ksnyde/w9PqC/3/embedded/result/)。您必须单击按钮以使模态控件向上，然后垂直向下滚动一点以查看有问题的 SELECT 字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:31:30.173

Chrome for Mac 的渲染引擎似乎存在缺陷。它不会出现在 Windows Chrome 或 Mac 上的 Firefox 或 Mac Safari 中。基于此，我将考虑关闭。

# zend-framework - Zend 框架中的 Ajax 加载器 div

> ID：10160638
> 
> 赞同：0
> 
> 时间：2012-04-15T08:40:48.133
> 
> 标签：zend-framework, jquery

通过我的应用程序，我使用常见的 Ajax 加载程序 Div，当我发出 ajax 请求时，我总是显示它

```
submitHandler: function(form) { 

                $('#loader').show();
                $(form).ajaxSubmit({
                    type: 'POST',
                    url: "/exampleactions/example",
                    data:{
                    },
                    success: function(response_data){
                        $('#loader').hide(); 
```

哪里是放置这个 div 以在任何地方使用它的最佳位置？

我应该把它放在 layout.php 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:46:00.047

国际海事组织

*   不会有一个 100% 正确的答案。
*   它完全取决于应用程序的设计。

但是，如果整个站点都使用相同的加载器，并且在 AJAX 之外没有加载任何内容，那么将 div 保留在布局中并在需要时将其隐藏起来可能是个好主意。

# workflow-foundation-4 - 对变量使用隐式强制转换有什么缺点吗？

> ID：10160639
> 
> 赞同：-1
> 
> 时间：2012-04-15T08:40:51.033
> 
> 标签：workflow-foundation-4

在 wf4 中，您可以使用显式语法以两种方式将变量和常量绑定到 InArguments 或 OutArguments：

```
Variable<string> nameOfPerson = new Variable<string>();

new Assign { 
  To = new OutArgument<string>(nameOfPerson),
  Value = new InArgument<string>("Name")
} 
```

或者您可以使用隐式语法

```
new Assign {
    To = nameOfPerson,
    Value = "Name"
} 
```

使用第二种语法是否有任何缺点，例如性能？

**更新**

显然，

```
new Assign { 
    To = nameOfPerson,
    Value="name"
} 
```

不起作用，但这确实有效

```
new Assign {
    To = new OutArgument<string>(nameOfPerson),
    Value = new InArgument<string>("name")
} 
```

对于 Value 属性，您可以使用隐式：

```
var anotherVariable = new Variable<string();

new Assign {
    To = new OutArgument<string>(nameOfPerson),
    Value = anotherVariable
} 
```

什么时候可以使用隐式，什么时候不可以，这很令人困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:30:04.657

不是真的，最终执行相同的代码。唯一的额外代码是从 Variable 到 InArgument 的隐式转换，但这只是一个构造函数调用，因此没有额外的开销。

# gwt - 使用 GWT 调试模式和 logback 禁用 httpclient 有线内容日志

> ID：10160640
> 
> 赞同：1
> 
> 时间：2012-04-15T08:40:53.217
> 
> 标签：gwt, httpclient, logback

在调试模式下使用 GWT 时，我从 httpclient 线路获取了大量日志。我正在使用logback。

我在这里进行了几次对话，如何通过将 apache httpclient 线路记录器级别设置为 WARN 来禁用此日志记录，但这对我不起作用。我还尝试将 logback 根级别设置为 INFO - 但我仍然从 httpclient 获取 DEBUG 级别。

有人设法使用 logback 禁用 GWT 上的 httpclient 线记录器吗？

这是我尝试过的：

```
<logger name="org.apache" level="WARN" />
<logger name="org.apache.axis2" level="WARN" />
<logger name="org.apache.axiom" level="WARN" />
<logger name="httpclient.wire" level="WARN" />
<logger name="org.springframework" level="warn" />

<root level="INFO">
<appender-ref ref="${logback.appender}" />
</root> 
```

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:05:10.190

正如我发现的那样，您需要将 logback.xml 添加到 GWT 运行配置类路径中......

# c++ - 静态构建 Qt 后，我 无法在 Windows 7 上编译/链接应用程序（GNU 分配器错误）

> ID：10160642
> 
> 赞同：0
> 
> 时间：2012-04-15T08:41:15.007
> 
> 标签：c++, windows, qt, gcc

我正在尝试将我的应用程序与 Qt 静态链接。这就是我所做的：

1.  下载了 Qt 库 4.8.1
2.  下载MinGW
3.  配置Qt：

    配置 -release -platform win32-g++ -nomake 示例 -nomake 演示 -no-rtti -no-qt3support -no-scripttools -no-openssl -no-opengl -no-webkit -no-phonon -no-style-motif -no -style-cde -no-style-cleanlooks -no-style-plastique -no-sql-sqlite

4.  运行win32-make

5.  在 Qt Creator 中设置我的项目（也来自 SDK 4.8）以发布和使用静态库。

将 CONFIGURE += static 添加到 .pro 文件

我得到了这个错误（显然有些东西不喜欢我使用 std::vector<> 的代码？）：

```
C:/MinGW/bin/mingw32-make.exe -f Makefile.Release
mingw32-make.exe[1]: Entering directory `C:/PhotoChop-build-desktop-Qt_4_8_0_for_Desktop_-_MSVC2010__Qt_SDK__Release'
g++ -c -Os -momit-leaf-frame-pointer -fno-exceptions -Wall -fno-rtti -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -DQT_NO_DYNAMIC_CAST -I"..\..\..\Qt\4.8.1\include\QtCore" -I"..\..\..\Qt\4.8.1\include\QtGui" -I"..\..\..\Qt\4.8.1\include" -I"..\..\..\Qt\4.8.1\include\ActiveQt" -I"release" -I"." -I"..\PhotoChop" -I"." -I"..\..\..\Qt\4.8.1\mkspecs\win32-g++" -o release\mainwindow.o ..\PhotoChop\mainwindow.cpp
In file included from c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++allocator.h:34:0,
                 from c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/allocator.h:48,
                 from c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/string:43,
                 from ..\..\..\Qt\4.8.1\include/QtCore/../../src/corelib/tools/qstring.h:54,
                 from ..\..\..\Qt\4.8.1\include/QtCore/qstring.h:1,
                 from ..\..\..\Qt\4.8.1\include/QtCore/../../src/corelib/kernel/qobject.h:48,
                 from ..\..\..\Qt\4.8.1\include/QtCore/qobject.h:1,
                 from ..\..\..\Qt\4.8.1\include/QtGui/../../src/gui/kernel/qwidget.h:46,
                 from ..\..\..\Qt\4.8.1\include/QtGui/qwidget.h:1,
                 from ..\..\..\Qt\4.8.1\include\QtGui/../../src/gui/widgets/qmainwindow.h:45,
                 from ..\..\..\Qt\4.8.1\include\QtGui/qmainwindow.h:1,
                 from ..\..\..\Qt\4.8.1\include\QtGui/QMainWindow:1,
                 from ..\PhotoChop\/mainwindow.h:4,
                 from ..\PhotoChop\mainwindow.cpp:1:
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/ext/new_allocator.h: In instantiation of '__gnu_cxx::new_allocator<const PCOperator::OperatorInfo* const>':
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/allocator.h:92:11:   instantiated from 'std::allocator<const PCOperator::OperatorInfo* const>'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_vector.h:73:60:   instantiated from 'std::_Vector_base<const PCOperator::OperatorInfo* const, std::allocator<const PCOperator::OperatorInfo* const> >'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_vector.h:180:11:   instantiated from 'std::vector<const PCOperator::OperatorInfo* const>'
..\PhotoChop\mainwindow.cpp:55:35:   instantiated from here
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/ext/new_allocator.h:82:7: error: 'const _Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::const_reference) const [with _Tp = const PCOperator::OperatorInfo* const, __gnu_cxx::new_allocator<_Tp>::const_pointer = const PCOperator::OperatorInfo* const*, __gnu_cxx::new_allocator<_Tp>::const_reference = const PCOperator::OperatorInfo* const&]' cannot be overloaded
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/ext/new_allocator.h:79:7: error: with '_Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::reference) const [with _Tp = const PCOperator::OperatorInfo* const, __gnu_cxx::new_allocator<_Tp>::pointer = const PCOperator::OperatorInfo* const*, __gnu_cxx::new_allocator<_Tp>::reference = const PCOperator::OperatorInfo* const&]'
mingw32-make.exe[1]: Leaving directory `C:/PhotoChop-build-desktop-Qt_4_8_0_for_Desktop_-_MSVC2010__Qt_SDK__Release'
mingw32-make.exe[1]: *** [release/mainwindow.o] Error 1
mingw32-make.exe: *** [release] Error 2
01:24:28: The process "C:\MinGW\bin\mingw32-make.exe" exited with code 2.
Error while building project PhotoChop (target: Desktop)
When executing build step 'Make' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:44:01.313

基本上，mingw编译器与msvc编译器存在一些问题

`std::vector<const PCOperator::OperatorInfo* const>`

我用 -platform win32-msvc2010 和 nmake 而不是 mingw32-make 重新配置了 qt，现在编译得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:45:33.250

我在您的配置参数中没有看到“-static”选项？

# ruby-on-rails - 安装活动管理 gem 时出错

> ID：10160653
> 
> 赞同：1
> 
> 时间：2012-04-15T08:43:37.580
> 
> 标签：ruby-on-rails, activeadmin

我正在尝试将最新版本的 activeadmin gem 安装到我的 rails 应用程序中。我遵循了文档[http://activeadmin.info/documentation.html](http://activeadmin.info/documentation.html)但在运行 rake db:migrate 时出现此错误。

```
rake aborted!
/Library/Ruby/Gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': no such file to load -- InheritedResources

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我安装了 InheritedResources

```
gem install InheritedResources 
```

这是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

#working with capastrano 
# gem 'mysql2', '< 0.3'

#upgraded for local 
gem 'mysql2', "~> 0.3.11"

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
  # gem 'haml', '3.1.4'
  # gem 'haml-rails'
end

gem 'activeadmin'
gem "meta_search",    '>= 1.1.0.pre'
gem 'inherited_resources'

#Media managment
gem 'ruby_parser'
gem 'hpricot'
group :development do 
    ##gem 'annotate', :git => 'git://github.com/ctran/annotate_models.git' 
end

group :test do 
end

group :production do 
end

# deployment 
gem 'capistrano' 
```

这是我的宝石环境

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.6
  - RUBY VERSION: 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]
  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/1.8
  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-darwin-11
  - GEM PATHS:
     - /Library/Ruby/Gems/1.8
     - /Users/aaalsubaie/.gem/ruby/1.8
     - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gem" => "--no-ri --no-rdoc"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

# javascript - 我的 Joomla 网站中的 Javascript 错误

> ID：10160658
> 
> 赞同：0
> 
> 时间：2012-04-15T08:44:52.870
> 
> 标签：javascript, joomla

我的网站是 marutiindia.in。在我安装了一个名为 lof k2 scroller 的模块之前，我的网站运行良好。该网站显示 jquery 错误，并且模板下半部分的模块无法正常工作。但是我设法通过在显示错误的 JS 文件的开头添加以下代码来使模块工作：

```
if(jQuery){ 
    jQuery.noConflict(); 
} 
```

但是，现在我遇到了其他我无法理解的 JS 错误。以下是错误截图的链接：

[截屏](http://www.screenshots.cc/photos/original/65886-nt2hz.jpg)

我不知道这些错误是什么意思。

此外，我还有一个插件可用于我的网站，这也会导致滚动条无法工作。

请帮我解决这些错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:00:31.893

Joomla 使用 Mootools，它也使用`$`函数名。为了避免这种情况，您的插件可以：

*   必须使用`jQuery`而不是`$`. 例如，不是`$('div')`获取 div，而是使用`jQuery('div')`
*   如果您真的想使用`$`，请将 jQuery 代码包装在一个闭包中

    ```
    (function($){

        //code that uses `$`

    }(jQuery)) 
    ```

*   确保插件`jQuery`从而不是扩展`$`。

# jquery - 如何在jqgrid中的操作按钮之前添加按钮

> ID：10160660
> 
> 赞同：2
> 
> 时间：2012-04-15T08:44:59.770
> 
> 标签：jquery, jqgrid

[自定义 jQGrid 发布操作](https://stackoverflow.com/questions/6622779/custom-jqgrid-post-action)中的答案使用 appendTo() 将自定义按钮添加到操作结束按钮。

如何在操作按钮之前添加按钮？

我试图用 before() 和 prepend() 替换 appendTo() 但在这一切按钮都消失了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T18:59:20.933

我尝试使用`prependTo`而不是`appendTo`所有的作品。确切地说是我用过

```
loadComplete: function () {
    var iCol = getColumnIndexByName(grid, 'act');
    $(this).find(">tbody>tr.jqgrow>td:nth-child(" + (iCol + 1) + ")")
        .each(function() {
            $("<div>", {
                title: "Custom",
                mouseover: function() {
                    $(this).addClass('ui-state-hover');
                },
                mouseout: function() {
                    $(this).removeClass('ui-state-hover');
                },
                click: function(e) {
                    alert("'Custom' button is clicked in the rowis="+
                        $(e.target).closest("tr.jqgrow").attr("id") +" !");
                }
            }
          ).css({"margin-right": "5px", float: "left", cursor: "pointer"})
           .addClass("ui-pg-div ui-inline-custom")
           .append('<span class="ui-icon ui-icon-document"></span>')
           .prependTo($(this).children("div"));
    });
} 
```

对应的[demo](http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm)显示

![在此处输入图像描述](../Images/d73ffa03318aa626563d841bd6120d93.png)

我另外添加了CSS

```
.ui-inline-custom.ui-state-hover span { margin: -1px; } 
```

对于悬停的小改进对应于已经在 jqGrid 4.3.2 中实现[的错误修复。](http://www.trirand.com/blog/?page_id=393/bugs/remove-dancing-on-hover-of-the-icons-of-formatter-actions/#p26110)

**更新：**当前版本的[免费 jqGrid](https://github.com/free-jqgrid/jqGrid)支持实现自定义按钮的简单方法。请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/OK/CustomActionButton.htm)。

# iphone - 内存崩溃更新 UIActivityIndi catorView

> ID：10160662
> 
> 赞同：0
> 
> 时间：2012-04-15T08:45:20.403
> 
> 标签：iphone

每当我尝试`UIActivityIndicatorView`从线程更新时，应用程序都会因抛出异常而崩溃

> 正在完成的修改层 - 0x7e177fd0 -[CALayer removeAnimationForKey:]：消息发送到已释放实例 0x7e177fd0

当我尝试从 mallocDebugger 工具跟踪内存泄漏时，这种崩溃并没有发生

请帮我解决这个内存问题

线程实现：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];

[autoRechargeCell addSubview:activityIndicator];
[self.activityIndicator startAnimating];
if( [PennyTalkAPI getBalanceInfoForAccount:appDelegate.accountNumber withPIN:appDelegate.pinNumber])
{   
    [autoRechargeCell.switchField setOn:[[NSUserDefaults standardUserDefaults] boolForKey:@"AutoRecharge"]];
    [self.activityIndicator stopAnimating];   <<<<<<<<<<<<<<<<<<<<<< 
}
else
{
    [self.activityIndicator stopAnimating];
}

[pool release]; 
```

这是我写的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-25T17:55:33.600

看到这个。添加 [[NSNotificationCenter defaultCenter] removeObserver:self]; 到 UIActivityIndi​​catorView+AFNetworking.m dealloc [https://github.com/AFNetworking/AFNetworking/issues/2748](https://github.com/AFNetworking/AFNetworking/issues/2748)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:02:44.917

您正在从辅助线程更新它，为什么它会在主线程上调用它，例如

```
 [self.activityIndicator performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:NO]; 
```

我想它可以帮助你....

# entity-framework - 如何使用实体框架代码优先

> ID：10160663
> 
> 赞同：0
> 
> 时间：2012-04-15T08:45:21.870
> 
> 标签：entity-framework, ef-code-first, console-application

我创建了一些类，并配置了连接字符串。

但是还是报错：

> *未处理的异常：System.NotSupportedException：无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:54:29.070

我通过在包管理器控制台中运行“启用迁移”命令来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:33:59.057

1.  检查您拥有的 EF 版本，最新的是 4.3.1。
2.  您还需要配置一个 DbContext 类。检查这个：http: [//msdn.microsoft.com/en-us/data/gg685467](http://msdn.microsoft.com/en-us/data/gg685467)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T05:51:04.013

如果您可以从头开始删除和重新创建数据库，这对我有用。

首先，从包管理器控制台运行以下命令。

*   sqllocaldb.exe 停止 v11.0

*   sqllocaldb.exe 删除 v11.0

接下来，从项目的 app_data 文件夹中删除 mdf 和 ldf 文件。

关键的部分来了。通常你会运行更新数据库。如果你这样做，异常仍然会被抛出。

不要运行更新数据库。INSTEAD 直接运行您的项目代码。EF 将重新创建数据库。

这些步骤对我有用。让我知道这是否对您有帮助。

# php - 警告：mysqli_query() 期望参数 1 是 mysqli，给定资源

> ID：10160664
> 
> 赞同：10
> 
> 时间：2012-04-15T08:45:30.980
> 
> 标签：php, mysql

我的代码中出现此错误，我不知道如何解决我的代码：

```
<?php
session_start();
include_once"connect_to_mysql.php";

$db_host = "localhost";
// Place the username for the MySQL database here
$db_username = "root"; 
// Place the password for the MySQL database here
$db_pass = "****"; 
// Place the name for the MySQL database here
$db_name = "mrmagicadam";

// Run the actual connection here 
$myConnection= mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql");
mysql_select_db("mrmagicadam") or die ("no database");        
$sqlCommand="SELECT id, linklabel FROM pages ORDER BY pageorder ASC";
$query=mysqli_query($myConnection, $sqlCommand) or die(mysql_error());
$menuDisplay="";

while($row=mysql_fetch_array($query)) {
    $pid=$row["id"];
    $linklabel=$row["linklabel"];
$menuDisplay='<a href="index.php?pid=' .$pid . '">' .$linklabel. '</a><br/>';
}
mysqli_free_result($query);

?> 
```

这是错误：

> 警告：mysqli_query() 期望参数 1 为 mysqli，第 17 行 C:\xampp\htdocs\limitless\connect_to_mysql.php 中给出的资源

我做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T08:48:37.660

您正在混合[mysqli](http://php.net/manual/en/class.mysqli.php)和[mysql](http://php.net/manual/en/book.mysql.php)扩展，这是行不通的。

你需要使用

```
$myConnection= mysqli_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql"); 

mysqli_select_db($myConnection, "mrmagicadam") or die ("no database"); 
```

`mysqli`比原来的扩展有很多改进`mysql`，所以建议你使用`mysqli`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T08:56:36.117

您使用了不正确的语法。如果您阅读文档[mysqli_query()](http://php.net/manual/en/mysqli.query.php)您会发现它需要两个参数。

> 混合 mysqli_query ( mysqli $link , string $query [, int $resultmode = MYSQLI_STORE_RESULT ] )

`mysql $link`一般是指，建立mysqli连接的资源对象来查询数据库。

所以有两种方法可以解决这个问题

mysqli_query();

```
$myConnection= mysqli_connect("$db_host","$db_username","$db_pass", "mrmagicadam") or die ("could not connect to mysql"); 
$sqlCommand="SELECT id, linklabel FROM pages ORDER BY pageorder ASC";
$query=mysqli_query($myConnection, $sqlCommand) or die(mysqli_error($myConnection)); 
```

或者，使用`mysql_query()`（现在已过时）

```
$myConnection= mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql");
mysql_select_db("mrmagicadam") or die ("no database");        
$sqlCommand="SELECT id, linklabel FROM pages ORDER BY pageorder ASC";
$query=mysql_query($sqlCommand) or die(mysql_error()); 
```

正如评论中所指出的，请注意使用 die 来获取错误。它可能会在不经意间给查看者一些敏感信息。

# jquery - 将一个 DIV 滑到另一个 DIV 上

> ID：10160665
> 
> 赞同：0
> 
> 时间：2012-04-15T08:45:43.650
> 
> 标签：jquery, html, css

我想在页面上所有元素的顶部向下滑动一个 div。我已将滑动 DIV 的 z-index 设置为 999，但仍然无法正常工作。这是我的[演示](http://jsfiddle.net/dharmesh_guna/MQr5g/2/)代码。（在加载时选择最新的 jQuery 版本）

您可以看到，在将鼠标悬停在第一行的最后一个 div 上时，一个 DIV 正在向下滑动到第二行的其他 2 个 DIV 下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:56:38.227

尝试从以下位置更新您的 javascript 代码的第 16 行：

```
$(this).next("div:(:visible)").css("position": "absolute"); 
```

到

```
$(this).next("div:(:visible)").css({"position": "absolute", "z-index": 1}); 
```

那应该可以解决问题。要查看它的实际效果：http: [//jsfiddle.net/MQr5g/4/](http://jsfiddle.net/MQr5g/4/)

# javascript - 使用backbone.js 进行分页

> ID：10160674
> 
> 赞同：1
> 
> 时间：2012-04-15T08:47:15.160
> 
> 标签：javascript, backbone.js

我想为这个简单的[网络应用程序](https://github.com/thomasdavis/backbonetutorials/tree/gh-pages/examples/todo-app)实现分页。

我看到可以使用[backbone.paginator](https://github.com/addyosmani/backbone.paginator)，但是在使用这个组件之前，我想知道用backbone.js 实现分页的最简单和最干净的方法是什么。

这里有一点代码：
请查看 AppView 中的注释

* * *

> **风景**

```
var AppView = Backbone.View.extend({
    initialize: function () {
         items.fetch(); // <-- now it fetches all the data, 
                        //     I would like to set a limit
    }
}); 
```

* * *

**该系列**

```
var ItemsCollection = Backbone.Collection.extend({
     model: item 
```

* * *

**该模型**

```
var ItemModel = Backbone.Collection.extend({
     return ItemModel;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:24:02.043

而不是`items.fetch()`，使用类似`items.fetchPage({pageSize: 12, pageNumber: 23})`then 的方法实现 this 作为集合上的方法。

# java - Java - 将加速器添加到 JMenuItem

> ID：10160676
> 
> 赞同：1
> 
> 时间：2012-04-15T08:48:10.653
> 
> 标签：java, swing, accelerator, jmenuitem

我想为 JMenuItem 设置一个加速器。

现在我这样设置

```
openFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O, ActionEvent.CTRL_MASK)); 
```

它正在工作，但我不希望 ctrl+o 作为加速器。我想要“空间”作为加速器，但我没有找到任何方法可以生成与“空间”对应的 KeyStroke。

```
KeyStroke.getStroke() 
```

要么采用 char 要么 (int, int)。我也没有找到任何与空间相对应的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:04:41.490

> ..也没有找到任何与空格相对应的字符。

[`KeyEvent.VK_SPACE`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#VK_SPACE)

如果 Swing 忽略它，我不会感到惊讶，因为它`' '`是一个不寻常且难以看到的加速器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T10:19:31.973

大多数 UI 委托`KeyEvent.VK_SPACE`使用类似`METRICAL TETRASEME`: ⏘ ( [`U+23D8`](http://www.fileformat.info/info/unicode/char/23d8/index.htm)) 的方式呈现加速器。例如， an[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)可能包括以下几行：

```
static final int MASK = Toolkit.getDefaultToolkit().getMenuShortcutKeyMask();
putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, MASK)); 
```

# java - 如何在JAVA中按下按钮之前停止程序？

> ID：10160681
> 
> 赞同：0
> 
> 时间：2012-04-15T08:48:50.027
> 
> 标签：java, swing, button, jbutton

如何使程序在单击按钮之前不会继续读取代码？

为什么？：我有一个 10x10 的网格，每个部分都有按钮，然后根据点击的内容运行代码。但是，我的程序一直在读取代码，因此永远不会做出选择，这给了我错误。我试着给它一个无限循环，直到按下一个按钮，但效果不太好

-edit 我是一个完整的 Java 初学者。

这是图形用户界面的图片

![图形用户界面](../Images/d3f55ba1c991fa90265fd40679e6784d.png)

[http://imageshack.us/content_round.php?page=done&l=img843/5351/sascp.png](http://imageshack.us/content_round.php?page=done&l=img843/5351/sascp.png)

我想要的是代码在单击按钮之前不会逐步运行。

例如：

*   创建游戏GUI
*   等到并检查按下了哪个按钮

* * *

```
if(buttonClicked[i][k] == something){
  System.out.println("lool");
} 
```

但是在我的代码中发生的是它创建了`gameGUI`然后，因为用户没有足够快来单击它，它只是跳过了 if 语句或因为没有按下任何内容而出现运行时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:49:24.027

在 Android 和 Swing（我希望 J2ME）中，按钮在被告知这样做时会触发事件（通过激活它们）。您通常会在做任何事情之前等待它发生，而不用担心 GUI 的其余部分当时正在做什么（或不做什么）。

或者换句话说：

*   `ActionListener`向按钮添加一个。
*   在该`actionPerformed()`方法中，插入上面的代码。

## 还

*   代码片段几乎没有提供任何有用的信息。为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)。
*   那个 GUI 在我看来就像 Swing。如果不是，那是什么？
*   请始终复制/粘贴运行时错误。

# mysql - 如何在 MySQL 中添加“组”行并增加它们的“组 ID”？

> ID：10160682
> 
> 赞同：0
> 
> 时间：2012-04-15T08:48:53.560
> 
> 标签：mysql, sql

我有下表*my_table*，主键*id*设置为 AUTO_INCREMENT。

```
id  group_id  data_column
1   1         'data_1a'
2   2         'data_2a'
3   2         'data_2b' 
```

我一直在尝试构建一个查询，该查询将采用一组数据，例如 ['data_3a', 'data_3b']，并适当地增加*group_id*以产生：

```
id  group_id  data_column
1   1         'data_1a'
2   2         'data_2a'
3   2         'data_2b'
4   3         'data_3a'
5   3         'data_3b' 
```

我认为使用 WITH 子句很容易，但 MySQL 不支持。我对 SQL 很陌生，所以**也许我以错误的方式组织数据**？（一个组应该代表通过表单一起上传的一组文件。每行是一个文件，数据列存储其路径）。

我想到的“Psuedo SQL”代码是：

```
INSERT INTO my_table (group_id, data_column)
VALUES ($NEXT_GROUP_ID, 'data_3a'), ($NEXT_GROUP_ID, 'data_3b')
LETTING $NEXT_GROUP_ID = (SELECT MAX(group_id) + 1 FROM my_table) 
```

其中组成的“LETTING”子句只会在查询开始时计算一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:01:19.753

您可以启动一个事务，执行 select max(group_id)+1，然后执行插入。或者甚至通过锁定表格以便其他人无法更改（插入）它是可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:39:19.303

如果一个组代表属于一起的文件，我宁愿为这些组提供一个单独的表，特别是当您可能想要保存有关该组的元数据（如上传用户、日期等）时。否则（在这种情况下）你会得到冗余数据（这很糟糕——大多数时候）。

或者，MySQL 确实有类似变量的东西。查看[http://dev.mysql.com/doc/refman/5.1/en/set-statement.html](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)

# c# - 使用 C# 使用 POST 方法中的数据进行 PHP 加密和解密

> ID：10160690
> 
> 赞同：1
> 
> 时间：2012-04-15T08:50:53.770
> 
> 标签：c#, php, .net, post, encryption

我正在尝试使用 POST 方法从应用程序发送的密钥对字符串进行加密。POST 方法发送用于加密的密钥。但是脚本无法正常工作，请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:35:18.620

它不起作用的原因是您的填充错误。PKCS7 是重复填充长度的字节值（即，如果填充 2 个字节，则为 00000010 00000010）。这不是字符串值“0202”，似乎没有任何 php 函数可以正确执行此操作，所以我建议您使用不需要填充的操作模式。c# 和 php 都支持 OFB。

您不能使用固定 IV。对于 cbc 模式，它相当不安全，对于 OFB，它完全不安全。每次使用[mcrypt_create_iv](http://www.php.net/manual/ru/function.mcrypt-create-iv.php)获取一个新的随机数。然后在发送时将 IV 添加到密文中（不需要加密）。请注意，您可能已经遇到的一个问题是 php 使用字符串，而 C# 使用字节作为 IV，即使现在您也可能无法获得正确的转换。为了确定，我可能会使用十六进制和转换到/转换的函数。

其次，您需要使用一些东西来检测人们何时篡改您的数据，否则他们可能会通过底层加密库中的错误代码/时间问题读取密文。Hmacs 运行良好，[这里](http://php.net/manual/en/function.hash-hmac.php)支持php 和这里支持[c#](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmac.aspx)。HMAC 您的 IV+密文消息并将输出添加到它之前。另一方面，对相同的数据运行 c# 等效函数，然后比较 HMAC 值。如果它们是相同的，你安全，如果不是，拒绝。

# windows-7 - Windows 7 上的 VNC 服务器

> ID：10160691
> 
> 赞同：3
> 
> 时间：2012-04-15T08:50:59.050
> 
> 标签：windows-7, vnc

我想使用 VNC 访问 Windows 7。

注意 - RDP 不适合我的需求，因为我需要运行单个会话，并且能够从不同的客户端（不是同时）连接到它而不中断会话以查看正在运行的进程。

我从真正的 vnc 开始，性能很差。我使用镜像驱动程序迁移到 UltraVNC，它更好，但仍然很慢，并且屏幕刷新很糟糕（可能需要 10 秒）。

有没有人有改善这个的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:22:43.543

我找到了适用于 windows 7 或 vista 的全新解决方案 - [http://www.onlinevnc.com](http://www.onlinevnc.com)。它具有良好的性能和通过 Flash 查看器从 Web 浏览器支持访问。效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:29:40.250

经过多次选择后，我发现 [serverfault.com](https://serverfault.com/questions/6386/vnc-on-vista)中的建议 对我来说效果最好。它调整了 VNC 以轮询更改，现在性能很好。

# c# - 在静态方法中返回“this”

> ID：10160692
> 
> 赞同：2
> 
> 时间：2012-04-15T08:51:02.077
> 
> 标签：c#, .net, this, static-classes

我想制作一个具有流畅界面的静态类，但出现错误：

> 'this' 在静态属性、方法中无效...

这是我的代码：

```
public static MyClass
{
    private static StringBuilder builder;
    private static StringBuilder RouteBuilder
    {
        get
        {
            if (builder == null)
                builder = new StringBuilder();

            return builder;
        }
    }

    public static MyClass Root()
    {
      RouteBuilder.Append("/");
      return this;
    }

    public static MyClass And()
    {
      RouteBuilder.Append("and");
      return this;
    }

    public static MyClass Something()
    {
       RouteBuilder.Append("something");
       return this;
    }
} 
```

这使我能够做到`MyClass.Root().And().Something();`

有没有办法做到这一点或解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T08:52:30.780

那是不可能的。您不能拥有静态类的实例。由于您已将 MyClass 标记为静态，因此不能有任何实例。不要让它静态：

```
public class MyClass
{
    private StringBuilder builder;
    private StringBuilder RouteBuilder
    {
        get
        {
            if (builder == null)
                builder = new StringBuilder();

            return builder;
        }
    }

    public MyClass Root()
    {
        RouteBuilder.Append("/");
        return this;
    }

    public MyClass And()
    {
        RouteBuilder.Append("and");
        return this;
    }

    public MyClass Something()
    {
        RouteBuilder.Append("something");
        return this;
    }
} 
```

然后你可以链接：

```
var result = new MyClass().Root().And().Something(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:53:07.980

return RouteBuilder 会成功的！

**编辑：错了，对不起**

对于这些情况，您也可以只做一个 Extension 类

说

```
 public static class StringBuilderExtensions {

    public static StringBuilder Root(this StringBuilder builder) {
      Asserts.IsNotNull(builder);
     builder.Append("/");
     return builder;
    }

   public static StringBuilder And(this StringBuilder builder) {
     Asserts.IsNotNull(builder);
     builder.Append("and");
     return builder;
   }
   //...etc
 } 
```

并像使用它一样

```
var builder = new StringBuilder();
builder.Root().Append() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:58:21.003

我很惊讶该语言甚至允许这样做 - 您定义的方法清楚地返回一个实例，但是在同一个类定义中，您已经声明您永远不能创建它的实例。

您仍然可以在普通类上定义静态方法。您可以强制实现者始终使用流畅的接口，而不是`MyClass`通过以下方式实例化自己：

*   给 MyClass 一个`private MyClass()`只能从内部调用的私有构造函数`MyClass`
*   将 MyClass 标记为`sealed`防止创建暴露公共构造函数的继承者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:02:34.603

您不能在静态方法中使用“this”关键字，因为“this”返回类的当前实例。但是静态方法不属于任何实例（相反，它们属于类本身），因此不能返回它。

为什么你需要你的类和方法是静态的？删除所有静态关键字将使其工作。如果您，请改用[单例模式](https://stackoverflow.com/questions/2155688/what-is-a-singleton-in-c)。

# mysql - 我的简单 MySql 查询不使用索引

> ID：10160694
> 
> 赞同：8
> 
> 时间：2012-04-15T08:51:23.523
> 
> 标签：mysql, select, indexing

我有一个非常简单的查询：

```
 SELECT   comments.*
  FROM comments 
  WHERE comments.imageid=46 
```

这是我的桌子：

```
CREATE TABLE IF NOT EXISTS `comments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `imageid` int(10) unsigned NOT NULL DEFAULT '0',
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `content` text CHARACTER SET utf8,
  `adate` datetime DEFAULT NULL,
  `ip` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ids` (`imageid`) USING BTREE,
  KEY `dt` (`adate`) USING BTREE
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=12 ; 
```

但是 MySql 不能在这个简单的查询上使用索引。这是解释结果：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    filtered    Extra
1   SIMPLE  comments    ALL     ids     NULL    NULL    NULL    4   75.00   Using where 
```

当我将查询更改为此时，Mysql 可以使用 index. 为什么？：

```
 SELECT   comments.id
  FROM comments 
  WHERE comments.imageid=46 
```

这是解释：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    filtered    Extra
1   SIMPLE  comments    ref     ids     ids     4   const   4   100.00  Using index 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T09:42:45.210

我猜你的“comments”表中的行数很少，这就是 MySQL 进行全表扫描而不是在第一个查询中使用索引的原因。据估计，全表扫描的成本可能低于首先匹配索引然后查找行的成本。

在您的第二个查询中使用索引，因为可以直接从索引中获取查询的所有列（“id”列），而无需在匹配索引后查找表行。这就是“使用索引”额外信息的含义。

尝试如果“评论”中的大量行 MySQL 仍然使用完整扫描，我认为这将是一种奇怪的行为。事实上，我在 MySQL 5.1 版本中进行了完全相同的测试，即使行数很少，它也总是使用“索引”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:54:17.333

你试过[标准](http://jonathonhill.net/2009-05-01/what-to-do-when-mysql-doesnt-use-an-index/) [的东西吗？](http://code.openark.org/blog/mysql/7-ways-to-convince-mysql-to-use-the-right-index)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T11:06:47.327

第二个查询是索引覆盖查询。请求的全部信息可以从索引中读取（因为主键是 InnoDB 中任何二级索引的一部分）。

在第一个查询中，MySQL 必须从索引中读取 PK，然后读取行。因为表的行数太少，优化器决定直接读取行并丢弃不匹配的行会更快

# xpages - 访问 XPiNC 中的 Notes 客户端 Java 插件

> ID：10160696
> 
> 赞同：0
> 
> 时间：2012-04-15T08:51:37.893
> 
> 标签：xpages, xpinc

Notes 客户端 Eclipse API 有许多有趣的特性：

*   您可以注册一个 ISelectionListener 以查看在应用程序的其他部分中选择的内容，而无需触摸其他部分
*   您可以与 Eclipse EventAdmin 交谈（比房产经纪人低一级）
*   使用任何其他插件

我的主要兴趣是在 XPiNC 应用程序中使用结果 ISelectionListener（或 eventAdmin - 我可以编写一个插件，将我感兴趣的内容发送到 EventAdmin）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:28:09.820

Karsten Lehmann 对此进行了 Lotusphere 会议：http: [//www.mindoo.com/web/blog.nsf/dx/17.01.2011061656KLE886.htm](http://www.mindoo.com/web/blog.nsf/dx/17.01.2011061656KLE886.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:00:19.240

特蕾莎为此做了一个视频，但它似乎已经消失了。

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPage_Components_in_Notes_851_Videos.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPage_Components_in_Notes_851_Videos.htm)

星期一戳我，我会尝试修复 wiki。据我了解，您创建了一个可以通过 Wire 触发的插件。

# objective-c - 使用目标 C 解码 XML 实体

> ID：10160697
> 
> 赞同：0
> 
> 时间：2012-04-15T08:51:48.527
> 
> 标签：objective-c, ios, ipad, html-encode

我正在寻找一种方法来为我的 iPad 应用程序解码一些特殊字符的 XML 实体，例如（μ、Λ、μ、ν、π）。我花了几个小时浏览博客和问题以找到解决方案。

所以我找到[了这个](https://stackoverflow.com/a/1105297/1075164)并通过添加以下代码行对其进行了修改，

```
 else if ([scanner scanString:@"&micro;" intoString:NULL])
        [result appendString:@"µ"];
    else if ([scanner scanString:@"&Lambda" intoString:NULL])
        [result appendString:@"Λ"];
    else if ([scanner scanString:@"&Pi;" intoString:NULL])
        [result appendString:@"Π"]; 
```

但我不觉得这是一个好的解决方案。

所以，我正在寻找某人的善意帮助。

XCode4 和 iOS 4.3 是我的开发环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:33:19.977

假设您已经决定要手动进行此解析，而不是使用 NSXMLParser 和委托中的适当实体调用，那么您可能希望为此使用表驱动解析器。

由于 & 在 XML 中始终是对实体的介绍，因此可以安全地执行以下操作（假设您正在解析 XML 而不是 HTML，它可以对允许的内容有一个非常宽松的定义）：

```
if ([scanner scanString: @"&" intoString: nil]) {
    NSString *entityNameString;
    if ([scanner scanUpToString: @";" intoString: entityNameString]) {
        NSString *entityValue =[entityDictionary objectForKey: entityNameString];
        if (entityValue)
             [result appendString: entityValue];
        else {
             // TODO: figure out if you want to blow an error, ignore the entity, or insert the original string
             [result appendString: [NSString stringWithFormat: @"&%@;", entityNameString]];
        }
    } else {
        // TODO: Determine if you want to blow an error, ignore, or insert the original string
        [result appendString: @"&"];
    }
} 
```

entityDictionary 将是一个键值对字典，表示每个实体及其表示的字符串：

```
NSDictionary *entityDictionary = [NSDictionary dictionaryWithObjectsAndKeys: @"µ",@"micro", @"π", @"Pi",nil]; 
```

或者您可以使用以下方法从 plist 加载：

```
NSDictionary *entityDictionary = [NSDictionary dictionaryWithContentsOfURL: @"myEntityList.plist"]; 
```

# linux - 目录和字符串 i bash 脚本

> ID：10160701
> 
> 赞同：0
> 
> 时间：2012-04-15T08:52:20.697
> 
> 标签：linux, bash

我是 bash 脚本的新手，需要一些帮助来解决一个奇怪的问题。

这是我的代码行：

```
#!/bin/ash -x  
echo  Variabel \$1='\t'$1  
TARGET_DIR=/volume1/video/Transcoded/  
echo "Variabel\$TARGET_DIR=$TARGET_DIR"  
fbname=$(basename "$1")  
echo  Variabel \$fbname=$fbname  
out="${fbname}""${TARGET_DIR}"  
echo  $out  
read -p "Press [Enter] key to start next Transcode..." 
```

这输出：

```
Variabel $1=\t/volume1/video/Movies/Thor (2011)/Thor (2011).mkv  
Variabel$TARGET_DIR=/volume1/video/Transcoded/  
Variabel $fbname=Thor (2011).mkv  
/volume1/video/Transcoded/  
Press [Enter] key to start next Transcode... 
```

在最后一个 echo $out 应该是路径和文件名的组合..但它被打破了。有什么问题？

谢谢你的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:55:29.133

尝试这个：

```
out="${fbname}${TARGET_DIR}"  
echo  $out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:52:21.360

在我看来，$1 或脚本的某些行以回车符结尾（有时写成 \r）——这个字符通常是不可见的，但会导致奇怪的行为和输出。例如，如果我们以 TARGET_DIR="/volume1/video/Transcoded/" 和 fbname=$'Thor (2011).mkv\r' 开头（注意：$'...' 是带有转义序列的字符串的 bash 表示法像 \r 解释），然后你会以 out=$'Thor (2011).mkv\r/volume1/video/Transcoded/' 结束，当你`echo $out`，它打印：

```
Thor (2011).mkv
/volume1/video/Transcoded/ 
```

...第二条“线”印在第一条的顶部，所以你永远看不到第一部分。

杂散回车通常是使用 DOS/Windows 文本编辑器的结果——不要将它们用于 unix 文本文件（包括脚本）。要删除它们，请在[此处](https://stackoverflow.com/questions/2613800/how-to-convert-dos-windows-newline-to-unix-newline-in-bash-script)和[此处](https://superuser.com/questions/156516/is-there-a-bash-command-to-convert-r-n-to-n)查看之前的问题。

顺便说一句，我第二次@shellter 对为什么文件名在路径之前感到困惑......

# objective-c - 数组分配上的 EXC_BAD_ACCESS (CIDetector featuresInImage)

> ID：10160703
> 
> 赞同：4
> 
> 时间：2012-04-15T08:53:04.197
> 
> 标签：objective-c, ios, xcode, exc-bad-access, augmented-reality

我正在关注 Pro iOS 5 Augmented Reality 书中的面部识别应用程序示例。我什至下载了源代码......我从那里运行它并且他的代码仍然存在问题。这是问题所在：它在分配一个数组时崩溃，该数组将 CGImage 的 featuresInImage 用于检测人脸的 CIDetector。从日志中......似乎这个方法被多次调用......我正在使用cocos2d_chipmunk所以我使用的是CSScene。请注意，这个崩溃是一个`EXC_BAD_ACCESS (code=1, address=0x4499923c)` 帮助吗？

```
 - (void)facialRecognitionRequest:(UIImage *)image {
//NSLog(@"Image is: %f by %f", image.size.width, image.size.height);
if (!isProcessingRequest) {
    isProcessingRequest = YES;
    //NSLog(@"Detecting Faces");
  NSArray* arr = [detector featuresInImage:[CIImage imageWithCGImage:[image CGImage]]]; // CRASHES HERE

    if ([arr count] > 0) {
        //NSLog(@"Faces found.");
        for (int i = 0; i < 1; i++) { //< [arr count]; i++) {
            CIFaceFeature *feature = [arr objectAtIndex:i];
            double xPosition = (feature.leftEyePosition.x + feature.rightEyePosition.x+feature.mouthPosition.x)/(3*image.size.width) ;
            double yPosition = (feature.leftEyePosition.y + feature.rightEyePosition.y+feature.mouthPosition.y)/(3*image.size.height);

            double dist = sqrt(pow((feature.leftEyePosition.x - feature.rightEyePosition.x),2)+pow((feature.leftEyePosition.y - feature.rightEyePosition.y),2))/image.size.width;

            yPosition += dist;
            CGSize size = [[CCDirector sharedDirector] winSize];
            pumpkin.opacity = 255;
            pumpkin.scale = 5*(size.width*dist)/256.0;

            //int randomPumpkin = ((arc4random() % 10) + 5);
            [pumpkin setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"pumpkin%d.png", pumpkin_count + 4]]];
            CCMoveTo *moveAction = [CCMoveTo actionWithDuration:0 position:ccp((size.width * (xPosition)), (size.height * ((yPosition))))];
            [pumpkin runAction:moveAction];

        }
    } else {
        pumpkin.opacity = 0;

    }    

}
isProcessingRequest = NO;

  } 
```

分配 CIDetector：

```
 - (id)init {
if (self = [super init]) {
  // ....... other stuff here        
    NSDictionary *detectorOptions = [NSDictionary dictionaryWithObjectsAndKeys:CIDetectorAccuracyLow, CIDetectorAccuracy, nil];
    self.detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions]; // CIDetector instance named detector is my property

}
return self;
 } 
```

我试过：CGImage *theCGImage = [图像 CGImage]; NSLog(@"theCGImage: %@", theCGImage);

```
CIImage *theCIImage = [CIImage imageWithCGImage:theCGImage];
NSLog(@"theCIImage: %@", theCIImage);

NSArray* arr = [detector featuresInImage:theCIImage];
NSLog(@"arr: %@", arr); 
```

结果如下：

```
 2012-04-15 19:08:25.136 Ch8[981:609f] tmpCGImage: <CGImage 0x1f689c00>
 2012-04-15 19:08:25.143 Ch8[981:609f] tmpCIImage: <CIImage: 0x1f687970 extent [0 0 480 360]>
 2012-04-15 19:08:25.282 Ch8[981:609f] arr: (
"<CIFaceFeatureInternal: 0x1f58e080>"
) 
```

我也尝试过启用`NSZombies`但仍然没有运气......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:04:31.777

作为对评论的回答（不是整个问题，仅作为格式化的答案）：
“我将如何做到这一点，我只写 if 语句以查看它们是否非零然后记录它？”

代替：

```
 NSArray* arr = [detector featuresInImage:[CIImage imageWithCGImage:[image CGImage]]]; 
```

将其分解为三个语句：

```
CGImage *theCGImage = [image CGImage];
NSLog(@"theCGImage: %@", theCGImage);

CIImage *theCIImage = [CIImage imageWithCGImage:theCGImage];
NSLog(@"theCIImage: %@", theCIImage);

NSArray* arr = [detector featuresInImage:theCIImage];
NSLog(@"arr: %@", arr); 
```

这样就可以找到违规的语句。这是一种通用的调试技术，无论如何都不是编写代码的坏方法。

这些`NSLog`语句并不是真正必要的，在第一个语句上设置一个断点，然后单步执行。

对于由于过早发布而导致的崩溃，请使用`NSZombies`. 它可以在 Xcode 中的“Edit Scheme, tab:”Diagnostics”下启用，在设备上运行时一定要关闭它。

![在此处输入图像描述](../Images/3343468fbea6f4efcd5983bf36b413de.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-18T11:49:35.903

检查是否添加了异常断点。在我的例子中，在 features 函数调用中引发了异常，并且试图捕获异常的断点导致了崩溃。通过从断点列表中删除异常断点，崩溃消失了。

# java - 如何在java中列出远程计算机上目录的所有文件？

> ID：10160705
> 
> 赞同：0
> 
> 时间：2012-04-15T08:53:21.510
> 
> 标签：java

我有 ac 代码。我需要编写一个 java 代码，然后我必须将其转换为 jar 文件并从我的 c 代码运行。jar 文件的目的是登录到远程机器，然后导航到定义的路径，然后以字符串格式列出特定目录中的所有文件。也就是说，我想获得类似 String FileNames[] = {"File1","File2",...} 这样我就可以使用系统调用可用于FTP登录和下载以递归下载所有文件。

那我该怎么做。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:55:59.077

查看包含 FTP 实用程序的 Apache [commons-net 。](http://commons.apache.org/net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T08:56:53.023

这是你需要的，看看它：[http ://docs.oracle.com/javase/6/docs/api/java/io/File.html](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T10:06:53.383

```
ArrayList<String> list = new ArrayList<String>();

public void recursive_file(String path) {
File theFolder = new File(path);
File temp;
String[] theFiles = path.list();

for (int i=0; i<theFiles.length; i++) {
    theFiles[i]=path+theFiles[i];
    temp=new File(theFiles[i]);
    if (temp.isDirectory()) {
        recursive_file(theFiles[i]);
        }
    else { list.add(theFiles[i]); 
         }
    }
} 
```

像这样的东西？不确定这是最优雅的解决方案。您可能还需要在路径字符串上附加一个“/”或“\”，具体取决于它是如何提供给方法的。

# c# - 如何在 C# 的组合框中按值查找项目？

> ID：10160708
> 
> 赞同：23
> 
> 时间：2012-04-15T08:53:51.973
> 
> 标签：c#, combobox, find, items

在 C# 中，我有 ,`a`类型的变量`string`。

我如何`find item`通过`a`in的值`combobox`（我想找到没有显示组合框文本的值的项目）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-15T09:13:36.147

您可以使用以下代码找到它。

```
int index = comboBox1.Items.IndexOf(a); 
```

要获取项目本身，请编写：

```
comboBox1.Items[index]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-08T21:24:21.953

You should see a method on the combo box control for FindStringExact(), which will search the displaymember and return the index of that item if found. If not found will return -1\.

```
//to select the item if found: 
mycombobox.SelectedIndex = mycombobox.FindStringExact("Combo"); 

//to test if the item exists: 
int i = mycombobox.FindStringExact("Combo"); 
if(i >= 0)
{
  //exists
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T19:10:58.393

我知道我的解决方案非常简单有趣，但在训练之前我使用了它。重要提示：组合框的 DropDownStyle 必须为“DropDownList”！

首先在组合框中，然后：

```
bool foundit = false;
String mystr = "item_1";
mycombobox.Text = mystr;
if (mycombobox.SelectedText == mystr) // Or using mycombobox.Text
    foundit = true;
else foundit = false; 
```

它对我有用并解决了我的问题......但是@st-mnmn的方式（解决方案）更好更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-12T07:31:34.143

嗨，伙计们，如果搜索文本或值，最好的方法是

```
int Selected = -1;    
int count = ComboBox1.Items.Count;
    for (int i = 0; (i<= (count - 1)); i++) 
     {        
         ComboBox1.SelectedIndex = i;
        if ((string)(ComboBox1.SelectedValue) == "SearchValue") 
        {
            Selected = i;
            break;
        }

    }

    ComboBox1.SelectedIndex = Selected; 
```

# sqlite - 在命令提示符下打开 SQLite Expert 数据库

> ID：10160710
> 
> 赞同：0
> 
> 时间：2012-04-15T08:54:25.243
> 
> 标签：sqlite

如何在 Windows XP 中使用命令提示符打开 SQLite Expert 数据库？我的数据库文件扩展名为 s3db，SQLite Expert exe 文件名为 SQLiteExpertPers.exe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:35:36.970

打开一个外壳。（开始|运行，键入`cmd`，然后按“确定”按钮。）

更改为 SQLite 数据库所在的驱动器和目录。如果您的数据库在“我的文档”中，则键入

```
cd "\Documents and Settings\YourLoginName\My Documents" 
```

并按 [Enter] 键。

如果您加入了 Windows 域，您需要输入

```
cd "\Documents and Settings\YourLoginName.YOURDOMAIN\My Documents" 
```

然后运行 ​​SQLite3，并给它你的数据库的名称。

```
sqlite3 YourDatabase.s3db 
```

错误信息

> 'sqlite3' 不是内部或外部命令、可运行程序或批处理文件。

表示 sqlite3 不在您的路径中。提供 sqlite3.exe 的完整路径

```
"c:\Program Files\SQLite\sqlite3.exe YourDatabase.s3db" 
```

或更改路径设置（控制面板、系统、“高级”选项卡、“环境变量”按钮）。

进入后，`.tables`在 sqlite 提示符下键入以确保您在正确的数据库中。

# c++ - 使用哪个库来解析 C++ 中的命令行参数

> ID：10160711
> 
> 赞同：7
> 
> 时间：2012-04-15T08:54:31.013
> 
> 标签：c++, c, linux, boost, getopt

我知道`getopts`和[`argp`](http://www.gnu.org/software/libc/manual/html_node/Argp.html)。我刚看了看，`boost`它们有`program_options`一个用于解析命令行参数的库。

我不确定要使用哪一个。我知道`getopts`是`POSIX`，虽然`argp`不是，但这对我来说并不重要。重要的是易用性。你能推荐（优点/缺点？）一个。我也对其他图书馆开放。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T09:07:04.213

如果您想要轻量级且易于使用的东西，那么您可能会对[`TCLAP`](http://tclap.sourceforge.net/)（仅标题，自由许可证）感兴趣。（[示例](http://tclap.sourceforge.net/manual.html#EXAMPLE)）

否则[`boost::program_options`](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options.html)（也是自由许可证）几乎提供了人们可能需要的任何东西。（[示例](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options/tutorial.html#id2499896)）

最后，如果您已经在使用具有一些命令行参数处理的框架/库（[WxWidgets](https://stackoverflow.com/questions/10118342/command-line-arguments-in-wxwidgets/10118492#10118492)、Qt），那么可能最简单的选择就是坚持使用该框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T08:57:22.800

您也可以使用[popt](http://linux.about.com/library/cmd/blcmdl3_popt.htm)。

如果您使用 Gtk（如果在 C++ 中则通过 GtkMM）或 Qt 之类的图形工具包，它们中的每一个都提供自己的命令行参数解析工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:09:54.663

glibmm 有 Glib::OptionContext。它非常简单，但以标准方式满足大多数人的需求。它没有很好的文档记录，但这里有一个例子展示了它可以做的大部分事情：[http ://git.gnome.org/browse/glibmm/tree/examples/options/main.cc](http://git.gnome.org/browse/glibmm/tree/examples/options/main.cc)

它将 GOptionContext C API 包装在 glib 中。

# git - 大型仓库的维护者如何知道如何解决合并冲突？

> ID：10160713
> 
> 赞同：2
> 
> 时间：2012-04-15T08:54:52.743
> 
> 标签：git, merge, merge-conflict-resolution

我想知道大型 repo（例如 Linux 内核）的维护者如何合并“重要”分支，例如 next pu maint 等。一个人如何知道如何解决合并冲突？我假设这些重要的分支可能会因源代码树不同部分的许多不同人的许多提交而分道扬镳。合并两个这样的分支必须由一个人完成，因此您不能将冲突拆分为特定冲突领域的专家来解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:33:45.053

对于非常大的项目，Linux 内核就是其中之一，参与人员之间需要大量的沟通和协调。

答案不是“只看什么合并冲突”和/或“你得到什么编译器错误”。您需要事先知道为什么会发生（或将要发生）某些冲突，如果您不知道还有谁在做出影响您的更改，请提前找出并协调。源代码管理器可以帮助您告诉您发生了什么以及是谁做的，但目标应该是首先避免意外问题，而不必在有人做出他们一开始就不应该做出的改变之后进行清理。

让像 Linus 这样的人参与其中的好处是，他对内核有一个全面的了解，可以帮助在问题发生之前避免问题。您的问题还提出了打字员、程序员和软件工程师之间的区别问题。

软件项目的权威著作仍然是 Frederick Brooks 的“The Mythical Man-Month”。他在 1975 年在大型项目中发现的相同问题（他是 OS/360 的架构师……）今天仍然适用。买它。阅读。记住它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:57:17.130

我认为 Linus 解决了“简单”的合并冲突。如果事情变得困难，他会要求补丁提交者与所涉及的子系统的副官一起解决问题。[Stackoverflow 上有一个关于 Linus 如何运行他的项目的问题。](https://stackoverflow.com/questions/4166530/git-how-to-manage-a-hierarchy-of-committers-like-linux-kernel-dev)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T09:00:48.327

如果您遇到合并错误，则意味着您编辑了同一个文件，这隐含地意味着您要么知道该文件的内容，要么您做了一些无论如何都不应该做的事情。

万一发生这种情况，告诉`human A`推送到一个单独的`branch x`，并让他自己`human B`解决与那个新的冲突`branch x`。合并`branch x`到`master`.

# ios - iOS - 你怎么知道设备是否正在播放？

> ID：10160715
> 
> 赞同：1
> 
> 时间：2012-04-15T08:55:17.073
> 
> 标签：ios, html5-video, statusbar

我需要知道 HTML 视频何时开始播放。我看到当它这样做时，状态栏中会出现这个小播放图标。

我想知道我的 iOS 设备的状态栏中是否有那个小播放图标。

有没有一种方法可以调用才能知道它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T11:26:43.330

通常，您会捕获以下通知之一：

```
MPMoviePlayerWillEnterFullscreenNotification
MPMoviePlayerDidEnterFullscreenNotification 
```

但由于它来自`UIWebView`您不会收到这些通知，您可以尝试这样的[事情](https://stackoverflow.com/questions/8518719/how-to-receive-nsnotifications-from-uiwebview-embedded-youtube-video-playback/#8554077)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:09:56.417

Html5 指定

> `[media.played](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#playing-the-media-resource)`
> 
> 返回一个 TimeRanges 对象，该对象表示用户代理已播放的媒体资源的范围。

但我不确定有多少浏览器支持这一点。该规范表明没有浏览器完全支持该 API。

# php - jQuery自动完成在第一次尝试时不起作用

> ID：10160718
> 
> 赞同：0
> 
> 时间：2012-04-15T08:55:31.193
> 
> 标签：php, jquery, zend-framework, autocomplete

我试图在我的程序中实现动态自动完成。第一次输入后它工作得很好。但它没有显示第一次尝试的建议。但是，服务器正在响应自动完成所需的源。这是我的代码。

```
 $('.autocomplete').live('keyup', function(){
        $this = $(this);
        var search = $this.val();
        $.ajax({
            url:'/package/index/search/keyword/'+search+'/format/json',
            async: false,
            success: function(res){
                //console.log(res.options);
                //console.log(res.defined_ids);
                staticObject = res.defined_ids;
                $this.autocomplete({
                    source: res.options
                });
            }
        });            
    }); 
```

服务器端代码是

```
 $keyword = $this->_getParam('keyword');
    $elementDetailModel = new Package_Model_ElementDetail();
    $arr = $elementDetailModel->searchElementDetail($keyword);
    $this->view->options = $arr['options']; // returns in the format array("test2","my new test", "night stay in delux room")
    $this->view->defined_ids = $arr['defined_ids']; // returns in the format array(21::21=>"test2", 22::22=>"my new test", 24::24=>"night stay in delux room") 
```

当我在 firebug 中控制台记录 defined_ids 和选项时，当我在文本字段中输入“t”时，我得到了以下响应。
选项：

> ["test2", "我的新测试", "晚上住豪华房"]

定义ID：

> Object { 21::21="test2", 22::22="my new test", 24::24="晚上住豪华房"}

任何帮助都是不言而喻的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T10:29:24.583

萤火虫显示的格式不是 JSON 格式。它是一个数组，使用索引访问。

显示输出时，请确保`json_encode()`先显示数组，然后再显示。

例如，关于这个问题，你最终的数组应该是这样的

```
$array['options'] = array("test2", "my new test", "night stay in room");
//Then you should echo the encoded the array to json

echo json_encode($array); 
```

接下来，请确保您的视图已关闭此请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:32:10.623

您可能忘记指定上下文服务器端。在控制器的`_init()`方法中，添加：

```
$ajaxContext = $this->_helper->getHelper('AjaxContext');
$ajaxContext->addActionContext('actionName', 'json')
            ->initContext(); 
```

并确保`actionName`用您的动作控制器名称替换。

然后，`$this->view->options = $arr['options']`将自动转换为有效的 json 格式。

[手册中](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch.ajaxcontext)有关 AjaxContext 的更多信息。

# android-ksoap2 - Android ksoap 对象映射

> ID：10160719
> 
> 赞同：3
> 
> 时间：2012-04-15T08:55:44.233
> 
> 标签：android-ksoap2

## 如何使用 KvmSerializable 将 SoapObject 的响应映射到 MyObject？

我在 ksoap2-android 上阅读了 wiki。但还是做不到。
我在信封中添加了一张地图：

```
envelope.addMapping(NAMESPACE, "return", new GoodsObject().getClass()); 
```

但我得到一个例外：
**java.lang.ClassCastException: org.ksoap2.serialization.SoapObject**
on the string

```
GoodsObject resultsRequestSOAP = (GoodsObject) envelope.bodyIn 
```

代码如下。我在这个问题上花了很多时间，但仍然没有想法（

* * *

Java 类**GoodsObject**：

```
 package com.deaddy64.droid;

    import java.util.Hashtable;

    import org.ksoap2.serialization.KvmSerializable;
    import org.ksoap2.serialization.PropertyInfo;

    public class GoodsObject implements  KvmSerializable {

    /**
     * 
     */
    public String ref;
    public String DeletionMark;
    public String Code;
    public String Description;

    private static final long serialVersionUID = -4872313975732374054L;

    public void setref(String strref) {
        this.ref = strref;
        }

    public String getref() {
        return this.ref;
        }

    public void setDeletionMark(String strDeletionMark) {
        this.DeletionMark = strDeletionMark;
        }

    public String getDeletionMark() {
        return this.DeletionMark;
        }

    public void setCode(String strCode) {
        this.Code = strCode;
        }

    public String getCode() {
        return this.Code;
        }

    public void setDescription(String strDescription) {
        this.Description = strDescription;
        }

    public String getDescription() {
        return this.Description;
        }

    /* (non-Javadoc)
     * @see org.ksoap2.serialization.KvmSerializable#getProperty(int)
     */
    public Object getProperty(int index) {
        switch (index) {
           case 0:
               return ref;
           case 1:
               return DeletionMark;
           case 2:
               return Code;
           case 3:
               return Description;

    }
        return null;
    }

    /* (non-Javadoc)
     * @see org.ksoap2.serialization.KvmSerializable#getPropertyCount()
     */
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 4;
    }

    /* (non-Javadoc)
     * @see org.ksoap2.serialization.KvmSerializable#setProperty(int, java.lang.Object)
     */
    public void setProperty(int index, Object value) {
        switch(index) {
        case 0:
            this.ref = value.toString();
            break;
        case 1:
            this.DeletionMark = value.toString();
            break;
        case 2:
            this.Code = value.toString();
            break;
        case 3:
            this.Description = value.toString();
            break;
        default:
            break;

     }

    }

    public void getPropertyInfo(int index, Hashtable properties,
            PropertyInfo info) {
        switch (index) {
           case 0:
               info.type = PropertyInfo.STRING_CLASS;
               info.name = "Ref";
               break;
           case 1:
               info.type = PropertyInfo.STRING_CLASS;
               info.name = "DeletionMark";
               break;
           case 2:
               info.type = PropertyInfo.STRING_CLASS;
               info.name = "Code";
               break;
           case 3:
               info.type = PropertyInfo.STRING_CLASS;
               info.name = "Description";
               break;

    }
        }
    } 
```

这是**ResponseDump**：

```
 <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Header/>
    <soap:Body> <m:getReferenceResponse xmlns:m="com.deaddy64">
    <m:return xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <Ref xmlns="http://v8.1c.ru/8.1/data/enterprise/current-config">7f4fb970-6a62-11e1-9bd0-001fd027b6bb</Ref>
        <DeletionMark xmlns="http://v8.1c.ru/8.1/data/enterprise/current-config">false</DeletionMark>
        <Code xmlns="http://v8.1c.ru/8.1/data/enterprise/current-config">000000003</Code>
        <Description xmlns="http://v8.1c.ru/8.1/data/enterprise/current-config">123</Description>
    </m:return>
</m:getReferenceResponse></soap:Body>
</soap:Envelope> 
```

在调试器中的**信封.bodyIn**是：

```
 (org.ksoap2.serialization.SoapObject) getReferenceResponse{return=anyType{Ref=7f4fb970-6a62-11e1-9bd0-001fd027b6bb; DeletionMark=false; Code=000000003; Description=123; }; } 
```

主要活动：

```
 package com.deaddy64.droid;

    import java.io.IOException;

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;
    import org.xmlpull.v1.XmlPullParserException;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.provider.ContactsContract.Contacts;
    import android.util.Log;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class Droid1Activity extends Activity {
        /** Called when the activity is first created. */

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            myButton.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {

                    String NAMESPACE = "com.deaddy64";
                    String URL = "http://10.0.2.2/InfoBase/ws/ws1.1cws";
                    String SOAP_ACTION = "com.deaddy64#testService:getReference";
                    String METHOD_NAME = "getReference";    

                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

                    //envelope.dotNet = true;

                    envelope.setOutputSoapObject(request);
                    envelope.addMapping("http://v8.1c.ru/8.1/data/enterprise/current-config", "CatalogObject.Номенклатура", new GoodsObject().getClass());

                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                    androidHttpTransport.debug = true;
                    Log.v("dd64", "xml");
                    GoodsObject resultsRequestSOAP;
                    try {
                         // List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
                          //headerList.add(new HeaderProperty("Authorization", "Basic " + org.kobjects.base64.Base64.encode("username:password".getBytes())));
                        androidHttpTransport.call(SOAP_ACTION, envelope);
                        resultsRequestSOAP = (GoodsObject) envelope.getResponse();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (XmlPullParserException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    Log.v("dd64",androidHttpTransport.requestDump);
                    Log.v("dd64", androidHttpTransport.responseDump);

                }
            });
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:14:59.340

试试这个：

```
envelope.addMapping(NAMESPACE, "GoodsObject", new GoodsObject().getClass()); 
```

和

```
GoodsObject resultsRequestSOAP = (GoodsObject) envelope.getResponse(); 
```

希望能帮助到你。

# php - PHP检查变量函数？

> ID：10160734
> 
> 赞同：0
> 
> 时间：2012-04-15T08:59:29.343
> 
> 标签：php

我正在尝试编写一个函数来检查我的变量是否有效。例如，在我的脚本中，我有：

```
$flag = $_GET['page']; 
```

但后来我得到了错误：

```
Notice: Undefined index: page in C:\xampp\htdocs\phpinv\php\add.php on line 8 
```

我尝试编写一个 checkVar 函数：

```
function checkVar($var, $method, $defaultValue){
    if (!isset($method['$var'])) 
    {
        $var = $defaultValue;
    } else {
        $var = $method['$var'];
    }
} 
```

但后来我得到：

```
Parse error: syntax error, unexpected '[' in C:\xampp\htdocs\phpinv\php\functions.php on line 21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:03:12.243

也许你应该做这样的事情

```
 function checkVar($var, $method, $defaultValue){
        if (!isset($method[$var])) //instead of $method['$var']
        {
            $var = $defaultValue;
        } else {
            $var = $method[$var];
        }
        return $var;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:04:02.770

`'$var'`数组中的寻址`'$var'`用作字符串，而不是存储在`$var`.

这可能是你想要的：

```
function checkVar($var, $method, $defaultValue){ 
    if (!isset($method[$var]))  
    { 
        $var = $defaultValue; 
    } else { 
        $var = $method[$var]; 
    } 
} 
```

# php - AND 条件在 MySQL 查询中不起作用

> ID：10160736
> 
> 赞同：0
> 
> 时间：2012-04-15T08:59:42.313
> 
> 标签：php, mysql

请在我的脚本方面需要你的帮助。每当我包括

```
AND maintable.semester_name = '$semester_name' 
```

在 MySQL Query 中，它对两个学期名称的值都返回 0，而在处理 echo $nums 时，实际上只有一个值应该为 0。当我删除

```
AND maintable.semester_name = '$semester_name' 
```

查询给出了我期望的正常结果。

谢谢。

```
$query = "SELECT *             
   FROM maintable 
   WHERE maintable.matric_no = '$matric_no'
   AND   maintable.session = '$session'
   AND   maintable.semester_name = '$semester_name'
   AND   maintable.level = '$level'";
$result = mysql_query($query);
$nums = mysql_numrows($result);
echo $nums ; 
```

**表结构**

```
COURSES
  course_id int(100) 
  course_code varchar(100) 
  course_title varchar(100) 
  course_unit int(10) 

MAINTABLE
  maintable_id int(255) 
  matric_no int(10) 
  session varchar(10) 
  semester_name varchar(10) 
  course_code varchar(10) 
  level int(10) 
  score int(10) 
  grade varchar(4) 

RESULT_UPLOAD
  upload_id int(10) 
  session varchar(10) 
  semester_name  varchar(10) 
  course_code varchar(10) 
  level varchar(10) 

SEMESTER
  semester_id int(10) 
  semester_name varchar(10) 

STUDENT
  matric_no int(10) 
  first_name varchar(100) 
  last_name varchar(100) 
  other_name varchar(100) 
  level int(10) 

USERS
  users_id int(10) 
  title varchar(20) 
  first_name varchar(20) 
  last_name varchar(20) 
  username varchar(20) 
  password varchar(100) 
  register_date datetime 
  tmp_name varchar(100) 
  type varchar(20) 
  name varchar(20) 
  size int(10) 

YEAR
  level_id int(10) 
  level int(10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:11:56.637

您的查询是正确的，但有点模棱两可。以下查询完全按照您的方式运行，但字数较少。

```
$query = "SELECT *             
   FROM maintable 
   WHERE matric_no = '$matric_no'
   AND   session = '$session'
   AND   semester_name = '$semester_name'
   AND   level = '$level'"; 
```

现在，关于您的**问题**，可能发生这种情况的唯一方法可能是由于没有记录匹配数据库中的记录。

尝试获取您正在运行`echo $query`的查询并直接从 phpmyadmin 运行查询以查看您将获得多少结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:03:32.857

查询是正确的。我猜您的条件确实与表中的任何行都不匹配。只需检查数据库中的值以及传递给条件的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T11:28:11.500

试试这个查询...它有效

```
$query = "SELECT *FROM maintable WHERE maintable.matric_no = '".$matric_no."'AND maintable.session = '".$session."' AND maintable.semester_name = '".$semester_name."' AND maintable.level = '".$level."' "; 
```

# .net - 依赖注入 - 分层应用

> ID：10160737
> 
> 赞同：2
> 
> 时间：2012-04-15T08:59:49.177
> 
> 标签：.net, dependency-injection, inversion-of-control

我希望在新解决方案中使用 IoC 容器，例如 StructureMap。解决方案如下：

*   桌面.UI
*   桌面模型
*   桌面视图
*   Desktop.Presenters
*   商业逻辑
*   业务对象
*   数据访问

其中 Desktop.Models、BusinessLogic 和 DataAccess 都引用了 BusinessObjects。

Desktop.UI 项目将是配置 DI 的入口点，但我真的不想仅为 DI 添加对 DataAccess 的引用。

我在 SO 上看到了一些其他问题，一个答案是为 IoC 创建一个单独的项目，该项目引用相关项目，然后从 Desktop.UI 引用 IoC 项目。但是 Desktop.UI 需要 DI 配置来实例化视图的演示者，因此不确定单独的项目是否可以工作。

我已经看到了一些定义注册表类和使用 StructureMap 扫描功能自动检测注册表类的基本示例。我的第一个想法是将这些注册表类放在他们正在配置的项目中，但这会导致所有项目都必须引用 StructureMap。

在分层应用程序中设置 DI 的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:11:47.930

根据我的经验，我发现我在整个服务器端代码中使用了一种形式的依赖注入，在客户端代码中使用了一种。例如，我最近在从事的 [ *sigh ] WinForms 项目在服务器端使用 Unity（业务逻辑、数据访问）和在客户端使用智能客户端软件工厂（用于 Winforms 的 MVP 框架，包括其自己的 DI 形式）。*因此，在您的示例中，我想说，如果您在尝试让 DI 框架跨应用程序的所有层工作时遇到困难，那是因为您不应该这样做。您可能遇到过一种情况，您希望有两种形式的 DI，一种用于客户端，一种用于服务器。

除此之外，我认为大多数 DI 框架允许您在配置文件中引导您的依赖项是正确的。配置文件告诉框架有关您的依赖项的所有信息，包括它们所在的程序集。这意味着您不需要在实例化 IoC 容器的项目中引用任何实际项目。因此，在我的框架项目示例中，您将有一个单例实例化您的 IoC 容器并从配置文件中读取所有依赖项。

这里有一些链接给你：

*   统一：[http ://unity.codeplex.com/](http://unity.codeplex.com/)
*   Unity 配置设置：[关于 Unity 配置设置的 Stackoverflow 问题](https://stackoverflow.com/questions/7584911/should-i-use-unity-config-file-or-code-to-register-types-and-instances)

希望其中的一些帮助！

问候，

詹姆士

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:05:40.350

对于 WindowsForms，我有一个单独的项目用于 IoC 的东西。我称之为[CompositionRoot](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。

`CompositionRoot`（启动项目）的入口点：

```
public static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        BootsTrapper.Boot();

        using (var mainForm = ObjectFactory.GetInstance<IPresenter<IMainView>>())
        {
            Application.Run((Form)mainForm.CurrentView);
        }
    }
} 
```

`BootsTrapper`负责注册并且是`CompositionRoot`.

MainViewPresenter 显示第一个表单。MainViewPresenter 可以通过使用`IMainViewPresenterFacade`包含抽象 Presenter 工厂的外观服务来显示其他表单。

```
public class MainViewPresenter : Presenter<IMainView>
{
    readonly IArticleRepository _articlesRepository;
    readonly IMainViewPresenterFacade _presenterFactory;
    readonly IUnitOfWork _unitOfWork;

    public MainViewPresenter(IMainView currentView, IArticleRepository articlesRepository, IUnitOfWork unitOfWork,
                             IMainViewPresenterFacade presenterFactory)
        : base(currentView, unitOfWork)
    {
        _articlesRepository = articlesRepository;
        _unitOfWork = unitOfWork;
        _presenterFactory = presenterFactory;

        Ensure.That(articlesRepository).IsNotNull();
        Ensure.That(presenterFactory).IsNotNull();

        CurrentView.DetailsClick += View_DetailsClick;
        CurrentView.CloseClick += ViewCloseClick;
        CurrentView.CreateClick += View_CreateClick;
        CurrentView.DeleteClick += View_DeleteClick;

        CurrentView.BindModel(_articlesRepository.GetAll().Select(x => new ArticleViewModel { Id = x.ArticleId, Name = x.Description }));
    }

    public override void Dispose()
    {
        base.Dispose();

        CurrentView.DetailsClick -= View_DetailsClick;
        CurrentView.CloseClick -= ViewCloseClick;
        CurrentView.CreateClick -= View_CreateClick;
        CurrentView.DeleteClick -= View_DeleteClick;
    }

    void View_DeleteClick(object sender, EventArgs e)
    {
        var selectedArticle = CurrentView.GetSelectedArticle();
        var article = _articlesRepository.GetById(selectedArticle.Id);
        _articlesRepository.Delete(article);
        _unitOfWork.Commit();
    }

    void View_CreateClick(object sender, EventArgs e)
    {
        using (var createPresenter = _presenterFactory.CreateCreatePresenter())
        {
            ShowDialog(createPresenter.CurrentView, CurrentView);
        }
    }

    void ViewCloseClick(object sender, EventArgs e)
    {
        CurrentView.Close();
    }

    void View_DetailsClick(object sender, EventArgs eventArgs)
    {
        var article = CurrentView.GetSelectedArticle();

        if (article == null) return;

        using (var detailPresenter = _presenterFactory.CreateDetailPresenter(article))
        {
            ShowDialog(detailPresenter.CurrentView, CurrentView);
        }
    }
} 
```

看看我的[SimpleMVP](https://github.com/Rookian/SimpleMVP)项目或这个问题[Dependency Injection and project structure for Console applications](https://stackoverflow.com/questions/9806737/dependency-injection-and-project-structure-for-console-applications)并随时提出更多问题 :)

# actionscript-3 - LocalConnection 在它应该失败时工作

> ID：10160738
> 
> 赞同：0
> 
> 时间：2012-04-15T08:59:51.137
> 
> 标签：actionscript-3, flash, localconnection

在我的页面中，我有一个主 swf，它应该检查是否存在第二个 swf - 如果它丢失，主 swf 应该向用户显示某个消息，否则它应该按计划工作。

我想通过使用 LocalConnection 来实现这一点 - 主 swf 设置为发送 swf，它应该调用另一个 swf 上的某个函数。我在想，如果第二个 swf 丢失，本地连接就会失败 - 要么抛出错误，要么它的 STATUS 事件侦听器会在事件的 level 属性中收到“错误”。

如果你和我一样想 - 再想一想。没有引发错误，并且侦听器在事件的级别属性中获得了“状态”，尽管没有人处理 LocalConnection 的“发送”方法。

我错过了什么？还是有更好的方法来实现我的目标？

干杯，

埃雷兹

# wpf - 如何将 VisualElement 渲染为基于矢量的图像？

> ID：10160740
> 
> 赞同：2
> 
> 时间：2012-04-15T09:00:28.787
> 
> 标签：wpf, graphics, charts, wpf-controls, rendering

我正在开发图表控件，我需要实现图表快照功能，以捕获任何请求大小的高质量曲线和文本的基于矢量的图像。

谁能建议我任何解决方案或解决此问题的指针。

任何形式的帮助都深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:51:28.653

如果您必须以矢量格式保存图像，您可以使用跟踪。[Potrace](http://potrace.sourceforge.net/)是一个开源的位图到矢量跟踪库（但认为位图跟踪是不完善的）。还认为 wpf 与矢量图形标记语言[XAML密切相关，因此您可能希望](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)[将光栅图形转换为 XAML](http://weblogs.asp.net/rrobbins/archive/2007/11/11/how-to-convert-raster-graphics-to-xaml.aspx)（尽管 Charles Petzold[不能在 XAML 文件中嵌入位图](http://www.charlespetzold.com/blog/2006/08/230443.html)）

如果需要绘制矢量图，可以使用[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx)元素，该元素提供了形状元素的基类，例如 Ellipse、Polygon 和 Rectangle；并将形状添加为[Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx) child。如果您正在处理成千上万的形状，我建议使用[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)类，这是一个可用于在屏幕上渲染矢量图形的视觉对象，以及它的 RenderOpen 方法。

要缩放，您必须使用转换，特别是[ScaleTrasnform](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)并将转换应用于您的面板或形状。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:50:48.913

你可以看看 XamlToy 但我还没有尝试过。 [http://xamltoys.codeplex.com/](http://xamltoys.codeplex.com/)

# google-api - App-Inventor 中的 Android 身份验证以访问 Google 电子表格

> ID：10160743
> 
> 赞同：0
> 
> 时间：2012-04-15T09:00:45.880
> 
> 标签：google-api, app-inventor

我希望能够从 Android App-Inventor 应用程序访问我的谷歌应用程序电子表格数据，而无需发布给所有人。如何设置身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:32:39.703

这是我一年前写的解析教程：

[https://imagnity.com/tutorials/app-inventor/web-component-json-response-on-app-inventor/](https://imagnity.com/tutorials/app-inventor/web-component-json-response-on-app-inventor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:32:06.893

App Inventor 不支持直接在 Google 电子表格中进行身份验证。您可以使用 App Inventor 的融合表来获取支持身份验证的电子表格。

将您的电子表格数据导入一个 Fusion Table，该表格使用您的 App Inventor 应用使用的相同 Google id 进行身份验证。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T13:49:05.023

如果您仍在寻找答案，请参阅此处的 Google 电子表格示例[http://puravidaapps.com/taifunGS.php](http://puravidaapps.com/taifunGS.php)和身份验证示例[http://puravidaapps.com/snippets.php#taifunOA](http://puravidaapps.com/snippets.php#taifunOA) Taifun

# ios - iOS 无法获取人像

> ID：10160750
> 
> 赞同：4
> 
> 时间：2012-04-15T09:01:27.040
> 
> 标签：ios, addressbook

我有两个 tableViewControllers。第一个有一个联系人列表。另一个显示详细的人员信息。

第一个tableViewController的一段代码

```
ABAddressBookRef addressBook = ABAddressBookCreate();
ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
NSArray *allPeople = (__bridge_transfer NSArray*)ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source,kABPersonSortByFirstName);
for ( int i = 0; i < [allPeople count]; i++ )
{
    ...
    contactClass = [[ContactClass alloc] initWithName:name surName:surName manID:[allPeople objectAtIndex:i]];
    ...
} 
```

第二个tableViewController的一大块代码

```
ABRecordRef person = (__bridge  ABRecordRef)contactClass.manID;
BOOL isHasImage = ABPersonHasImageData(person); 
```

变量 isHasImage 始终为 false，即使联系人有头像。我什至在第一个 tableViewController 上检查了这个，如果人有头像，那么它返回 true 和 image。

有谁知道为什么我无法获取联系人图像？

ps`contactClass.manID`是`id`. 它有一个正确的地址，因为`ABMultiValueRef multiValue = ABRecordCopyValue((__bridge ABRecordRef)contactClass.manID, kABPersonPhoneProperty);`在第二个 tableViewController 中返回正确的值

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T10:13:24.533

我可能为您提供解决方案为时已晚，但也许这会帮助其他遇到同样问题的人。至少在 iOS 5.x 上，在副本（例如，从使用 获得的数组中）看起来像`ABPersonHasImageData()`并且`ABPersonCopyImageDataWithFormat()`不能按预期工作。您可以像这样解决它：`ABRecordRef``ABContactRef``ABAddressBookCopyArrayOfAllPeople()`

```
- (UIImage*)imageForContact: (ABRecordRef)contactRef {
    UIImage *img = nil;

    // can't get image from a ABRecordRef copy
    ABRecordID contactID = ABRecordGetRecordID(contactRef);
    ABAddressBookRef addressBook = ABAddressBookCreate();

    ABRecordRef origContactRef = ABAddressBookGetPersonWithRecordID(addressBook, contactID);

    if (ABPersonHasImageData(origContactRef)) {
        NSData *imgData = (NSData*)ABPersonCopyImageDataWithFormat(origContactRef, kABPersonImageFormatOriginalSize);
        img = [UIImage imageWithData: imgData]; 

        [imgData release];
    }

    CFRelease(addressBook);

    return img;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T15:18:57.987

对此有何进一步更新？

我收到了一些用户无法看到一些联系人的缩略图的投诉。大多数情况下它工作正常，是否有任何不返回缩略图的特殊情况。

我正在使用以下代码：

```
 - (instancetype)initWithABContact:(ABRecordRef)contact {
          NSData *iThumbnailData = nil;
          if (ABPersonHasImageData(contact)) {
            iThumbnailData =
            CFBridgingRelease(ABPersonCopyImageDataWithFormat(contact, kABPersonImageFormatThumbnail));
          }
    } 
```

# jquery - JQuery 在 IE 中不工作，但在 Chrome 和 firefox 中工作

> ID：10160753
> 
> 赞同：0
> 
> 时间：2012-04-15T09:01:53.903
> 
> 标签：jquery, internet-explorer

我必须开发一个应用程序，其中一部分是 IQuery，但我不熟悉它。当鼠标悬停在地图上并更改地图的背景颜色和链接颜色时，代码必须执行。它适用于 Chrome 和 Firefox，但在 Inernet Exlporer 中无效。请提供任何帮助！

这是我的代码：

```
<script type="text/javascript" >
try{
    jQuery(document).ready(function () {

        $.fn.maphilight.defaults = {
            fill: true,
            fillColor: '008000',
            fillOpacity: 0.8,
            stroke: false,
            strokeColor: 'ff0000',
            strokeOpacity: 1,
            strokeWidth: 1,
            fade: true,
            alwaysOn: false,
            neverOn: false,
            groupBy: false
        };
        $(".main-menu").mouseover(function () {
            alert('go');
            var himg = $(this).attr('himg')
            $(this).children().attr('src', himg)
        });

        $(".main-menu").mouseout(function () {
            var nimg = $(this).attr('nimg')
            $(this).children().attr('src', nimg)
        });

        $("a.fancybox").fancybox({
            'titlePosition': 'inside'
        });

        $("a.iframe").click(function () {
            $.fancybox({
                'padding': 0,
                'margin': 0,
                'autoScale': false,
                'transitionIn': 'none',
                'transitionOut': 'none',
                'width': 980,
                'height': 575,
                'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                'type': 'iframe'
            })
            return false;
        });

        $('#photos').galleryView({
            panel_width: 900,
            panel_height: 300,
            frame_width: 160,
            frame_height: 110
        }); 
        $("#one").sexyCombo({
            emptyText: "Select"
        });
        $("#two").sexyCombo({
            emptyText: "Select"
        });
        $("#three").sexyCombo({
            emptyText: "Select"
        });

    }); 
    }
catch (err)
 {
    alert(err);
 }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:05:29.637

删除`try-catch`呼叫。您似乎并不真正需要它，并且在 IE 中引起了攻击。

# windows-phone-7 - 找到准确位置后停止 GeoCoordinateWatcher

> ID：10160755
> 
> 赞同：2
> 
> 时间：2012-04-15T09:02:37.290
> 
> 标签：windows-phone-7, geolocation

该`GeoCoordinateWatcher`课程允许我不断更新用户当前位置。该`WatcherOnPositionChanged`事件将在以下时间引发

1.  找到初始位置
2.  提高了准确性
3.  用户实际移动超出了定义的阈值

我需要尽可能准确地找到用户的位置，然后有效地停止观察者而忽略用户是否在移动。但是，似乎没有办法消除最后两种类型的更新。

我想到了几种方法。第一次更新始终是上次使用 GPS 时的缓存，第二次似乎是不准确的猜测，第三次似乎是最终准确的位置（至少在我的设备上）。根据这一点，对于所有设备来说都是如此似乎充其量是不可靠的。另一种方法可能是在确定位置之前等待固定的时间。例如等待 10 秒，然后获取最新位置。

我的第一种方法是在每次位置更改时更新和显示数据。然而，由于两个原因，这非常麻烦。在最初的几秒钟内，位置会发生多次变化，其次是当用户位置快速变化时，即当坐在移动的汽车中时，加载会变得非常烦人。

尽可能准确地找到用户的位置，然后关闭观察者的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:48:57.460

在您从 GeoCoordinateWatcher 获得的 GeoCoordinate 对象上，有两个属性：VerticalAccuracy 和 Horizo​​ntalAccuracy，它们以米为单位给出误差幅度。只需忽略坐标，直到精度属性足够低以满足您的需要。

# ubuntu - 是否可以与其客户端共享 vnc 服务器的屏幕？

> ID：10160759
> 
> 赞同：1
> 
> 时间：2012-04-15T09:03:11.923
> 
> 标签：ubuntu, vnc

我在 ubuntu 10.04 或更高版本的机器上使用了tightvnc 服务器和查看器。我通过在客户端机器上使用命令`vncserver :1`和 vncviewer 来启动一个 vncserver。现在，默认情况下，我的桌面对于连接到同一台服务器的所有 vncviewer 都是相同的，即一个客户端上的任何图形活动都会在其他客户端上重现。然而，客户端上的这个屏幕与我的服务器上的不同。是否有可能甚至服务器与客户端共享其桌面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:23:12.740

标准 VNC 服务器创建新会话。如果你想共享控制台会话，你想使用像`vnc.so`x.org (`vnc4server`包) 或[X11vnc](http://www.karlrunge.com/x11vnc/)的插件。

# java - 请帮助以非线性方式偏移坐标

> ID：10160761
> 
> 赞同：0
> 
> 时间：2012-04-15T09:03:17.930
> 
> 标签：java, android, function, math, algebra

假设您有一个坐标可以在 0.0 到 1.0 之间的任何位置（见蓝线），但我需要将其偏移为红线。

即当它是 0.75 时它应该是 0.75 + offsetValue，当它是 0.25 时它应该是 0.25 - offsetValue。 ![在此处输入图像描述](../Images/24417902672b1a4c9ea1f0ba6e86c780.png)

你会怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:16:46.323

使用类似`-sin(blue_value * 2 * PI)`或`sin(-1 * blue_value * 2 * PI)`

您想要的是 0-2PI 的负正弦曲线。

检查[这个](http://www.wolframalpha.com/input/?i=sin%28-x%29)

# mysql - 从数据库表中删除具有多个重复列的行

> ID：10160766
> 
> 赞同：1
> 
> 时间：2012-04-15T09:03:47.220
> 
> 标签：mysql, sql

我想删除最后一行，因为 userid 和friendwith 列是重复的。

```
friendshipid    userid  friendwith  friendshipstatus
183             24      102          4
151             24      52           2
155             24      66           2
179             24      66           2 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:11:30.670

如果您想保留最新的友谊ID，请执行以下操作

```
CREATE TABLE temp_table AS (SELECT * FROM table);
DELETE FROM table WHERE friendshipid NOT IN (SELECT friendshipid FROM (SELECT * FROM temp_table ORDER BY friendshipid DESC) as temp_table GROUP BY userid, friendwith);
DROP TABLE temp_table ; 
```

或者，如果您想保留最古老的友谊 ID，请执行以下操作

```
CREATE TABLE temp_table AS (SELECT * FROM table);
DELETE FROM table WHERE friendshipid NOT IN (SELECT friendshipid FROM (SELECT * FROM temp_table ORDER BY friendshipid ASC) as temp_table GROUP BY userid, friendwith);
DROP TABLE temp_table ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:10:47.573

`userid`您可以使用相同的and删除所有存在另一行的行`friendswith`，但使用较低的`friendshipid`. 例如：

```
delete  dup
from    YourTable as dup
join    YourTable orig
on      orig.userid = dup.userid
        and orig.friendwith = dup.friendwith
        and orig.friendshipid < dup.friendshipid 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/d0718/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:05:48.967

```
select friendshipid  ,  userid  , friendwith  , friendshipstatus from table 
group by userid , friendwith 
```

# c# - 如何在控制台应用程序中将列表打印为表格？

> ID：10160770
> 
> 赞同：25
> 
> 时间：2012-04-15T09:04:45.183
> 
> 标签：c#, .net

我需要在控制台应用程序中将列表打印为表格并以方便的格式预览的方法，如下所示：

```
Pom_No          Item_Code          ordered_qty                      received_qty

1011            Item_Code1         ordered_qty1                    received_qty1 

1011            Item_Code2         ordered_qty2                    received_qty2

1011            Item_Code3         ordered_qty3                    received_qty3

1012            Item_Code1         ordered_qty1                    received_qty1 

1012            Item_Code2         ordered_qty2                    received_qty2

1012            Item_Code3         ordered_qty3                    received_qty3 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-15T09:06:14.550

你的主要工具是

```
Console.WriteLine("{0,5} {1,10} {2,-10}", s1, s2, s3); 
```

`,5`and`,10`是宽度说明符。使用负值左对齐。

格式化也是可能的：

```
Console.WriteLine("y = {0,12:#,##0.00}", y); 
```

或宽度为 24 和自定义格式的日期：

```
String.Format("Now = {0,24:dd HH:mm:ss}", DateTime.Now); 
```

* * *

### 编辑，对于 C#6

使用字符串插值，您现在可以编写

```
Console.WriteLine($"{s1,5} {s2,10} {s3,-10}");  
Console.WriteLine($"y = {y,12:#,##0.00}"); 
```

您不再需要`String.Format()`显式调用：

```
string s = $"Now = {DateTime.Now,24:dd HH:mm:ss}" + ", " + $"y = {y,12:#,##0.00}" ; 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-04-17T21:57:34.130

您可以做的最简单的事情是使用[现有的库](https://www.nuget.org/packages/ConsoleTables/)

```
Install-Package ConsoleTables 
```

然后你可以像这样定义你的表：

```
ConsoleTable.From<Order>(orders).Write(); 
```

它会给出这个输出

```
| Id       | Quantity | Name              | Date                |
|----------|----------|-------------------|---------------------|
| 3355     | 6        | Some Product 3355 | 18-04-2016 00:52:52 |
| 3355     | 6        | Some Product 3355 | 18-04-2016 00:52:52 |
| 3355     | 6        | Some Product 3355 | 18-04-2016 00:52:52 |
| 3355     | 6        | Some Product 3355 | 18-04-2016 00:52:52 |
| 3355     | 6        | Some Product 3355 | 18-04-2016 00:52:52 | 
```

或者定义一个自定义表格

```
var table = new ConsoleTable("one", "two", "three");
table.AddRow(1, 2, 3)
     .AddRow("this line should be longer", "yes it is", "oh");

table.Write(); 
```

有关更多示例，请查看[c# 控制台表](https://github.com/khalidabuhakmeh/ConsoleTables)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T09:07:07.557

使用 \t 放入制表符以分隔列

# javascript - 将 Amazon S3 文件导入数据库

> ID：10160774
> 
> 赞同：0
> 
> 时间：2012-04-15T09:05:46.267
> 
> 标签：javascript, database, amazon-s3, media-player

我的客户购买了大约 60GB 的 Amazon S3 存储来上传音乐。现在我必须构建一个具有 JavaScript 音乐播放器的应用程序。例如，是否可以将音乐文件导入 MySQL 数据库，然后让播放器读取这些文件？我想可以直接从我的 JavaScript 播放器中的 Amazon S3 存储读取文件，但是每个用户都有一个自定义的播放列表等，所以我认为这里需要一个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:12:25.310

您不需要将音乐文件导入本地数据库。您可以创建一个用户播放列表数据库并将 s3 文件路径关联到它。

喜欢： **用户播放列表表**

```
UserID int
S3FilePath varchar 
```

# c - (int**)malloc(sizeof(int*))

> ID：10160776
> 
> 赞同：1
> 
> 时间：2012-04-15T09:05:50.987
> 
> 标签：c, malloc, double-pointer

我知道为了`malloc`指向数组的指针数组，语法应该是：

```
(int**)malloc(numberOfDesiredElements*sizeof(int*)) 
```

不小心忘记把`numberOfDesiredElements*`size放在前面了。它弄乱了我的程序抛出随机分段错误，即有时程序输出正确，有时它出现分段错误。

当我没有说明我想要多少个插槽时，有人可以解释发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T09:07:02.623

这只是一个普通的乘法，而不是神奇的语法；所以它为 1 而不是 3 分配了空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T13:53:44.253

更好的写作方式是

```
int **p = malloc(numberOfDesiredElements * sizeof *p); 
```

更简洁，更易于阅读，您不必担心在`sizeof`表达式中保持您的类型。强制转换是不必要的（在 C 中；在 C++ 中是必需的，但您不应该`malloc`在 C++ 中使用），并且如果您没有`malloc`范围内的原型，则可以抑制有用的诊断。

至于当您分配的空间少于您的预期时会发生什么，那么您超出了定义的行为范围。如果你破坏了一些重要的东西，你会得到一个运行时错误。如果您不这样做，您的代码*似乎*可以正常工作。

# android - 应用程序 AChartengine 意外停止。请再试一次

> ID：10160778
> 
> 赞同：10
> 
> 时间：2012-04-15T09:06:21.070
> 
> 标签：android, achartengine

我只是尝试使用 achartengine 演示，但每次我单击某些内容以显示图表时都会出现错误消息“应用程序 AChartengine 已意外停止。请重试”。有人知道告诉我该怎么做吗？我按照此页面[http://www.achartengine.org/content/goodies.html](http://www.achartengine.org/content/goodies.html)中建议的说明进行操作，并使用 api 级别 7 的模拟器标准。我有以下错误：

```
 04-15 09:08:43.285: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.AverageTemperatureChart.execute
    04-15 09:08:43.325: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYSeries', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.addXYSeries
    04-15 09:08:43.345: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYMultipleSeriesDataset', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildBarDataset
    04-15 09:08:43.387: E/dalvikvm(333): Could not find class 'org.achartengine.renderer.XYMultipleSeriesRenderer', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildBarRenderer
    04-15 09:08:43.395: E/dalvikvm(333): Could not find class 'org.achartengine.model.CategorySeries', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildCategoryDataset
    04-15 09:08:43.425: E/dalvikvm(333): Could not find class 'org.achartengine.renderer.DefaultRenderer', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildCategoryRenderer
    04-15 09:08:43.425: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYMultipleSeriesDataset', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildDataset
    04-15 09:08:43.445: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYMultipleSeriesDataset', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildDateDataset
    04-15 09:08:43.445: E/dalvikvm(333): Could not find class 'org.achartengine.model.MultipleCategorySeries', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildMultipleCategoryDataset
    04-15 09:08:43.485: E/dalvikvm(333): Could not find class 'org.achartengine.renderer.XYMultipleSeriesRenderer', referenced from method org.achartengine.chartdemo.demo.chart.AbstractDemoChart.buildRenderer
    04-15 09:08:43.525: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.AverageCubicTemperatureChart.execute
    04-15 09:08:43.545: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.TrigonometricFunctionsChart.execute
    04-15 09:08:43.555: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.ScatterChart.execute
    04-15 09:08:43.555: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.SalesComparisonChart.execute
    04-15 09:08:43.565: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.ProjectStatusChart.execute
    04-15 09:08:43.576: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.SalesGrowthChart.execute
    04-15 09:08:43.595: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYMultipleSeriesDataset', referenced from method org.achartengine.chartdemo.demo.chart.ProjectStatusBubbleChart.execute
    04-15 09:08:43.606: E/dalvikvm(333): Could not find class 'org.achartengine.model.XYMultipleSeriesDataset', referenced from method org.achartengine.chartdemo.demo.chart.TemperatureChart.execute
    04-15 09:08:43.606: E/dalvikvm(333): Could not find class 'org.achartengine.model.CategorySeries', referenced from method org.achartengine.chartdemo.demo.chart.WeightDialChart.execute
    04-15 09:08:43.615: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.SensorValuesChart.execute
    04-15 09:08:43.615: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.CombinedTemperatureChart.execute
    04-15 09:08:43.626: E/dalvikvm(333): Could not find class '[Lorg.achartengine.chart.PointStyle;', referenced from method org.achartengine.chartdemo.demo.chart.MultipleTemperatureChart.execute
    04-15 09:13:51.145: E/AndroidRuntime(333): Uncaught handler: thread main exiting due to uncaught exception
    04-15 09:13:51.155: E/AndroidRuntime(333): java.lang.NoClassDefFoundError: [Lorg.achartengine.chart.PointStyle;
    04-15 09:13:51.155: E/AndroidRuntime(333):  at org.achartengine.chartdemo.demo.chart.AverageTemperatureChart.execute(AverageTemperatureChart.java:72)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at org.achartengine.chartdemo.demo.ChartDemo.onListItemClick(ChartDemo.java:102)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.app.ListActivity$2.onItemClick(ListActivity.java:312)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.widget.ListView.performItemClick(ListView.java:3285)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1640)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.os.Handler.handleCallback(Handler.java:587)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:92)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:521)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    04-15 09:13:51.155: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
    04-15 09:13:51.175: E/dalvikvm(333): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-08T09:55:28.953

请参阅此解决方案： [http ://groups.google.com/group/achartengine/browse_thread/thread/4cb1efddad3c19d0/2b59e5164e05c469#2b59e5164e05c469](http://groups.google.com/group/achartengine/browse_thread/thread/4cb1efddad3c19d0/2b59e5164e05c469#2b59e5164e05c469)

担

引用：

> 在 Eclipse 中： -> 右键单击​​您的项目 - 转到构建路径 - 选择配置构建路径 -> 转到“订购和导出”选项卡 -> 选中“achartengine-1.0.0.jar 框，然后单击其名称 - > 将其向上移动，使其位于 Android 依赖项的正下方（如果您有多个 Jar，有时这会有所不同）
> 
> 单击确定，然后清理您的项目。（项目->清理...）
> 
> 尝试再次运行它，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:34:24.077

如果您想知道 achartengine 是如何工作的，那么将 achartengine 0.7.0 jar 添加到 libs 文件夹并将其与您的项目链接，也有以下这些活动。

```
public class GeneratedChartDemo extends ListActivity {
  private static final int SERIES_NR = 2;

  private String[] mMenuText;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // I know, I know, this should go into strings.xml and accessed using
    // getString(R.string....)
    mMenuText = new String[] { "Line chart", "Scatter chart", "Time chart", "Bar chart" };
   setListAdapter(new SimpleAdapter(this, getListValues(), android.R.layout.simple_list_item_1,
        new String[] { "name"}, new int[] { android.R.id.text1 }));
  }

  private List<Map<String, String>> getListValues() {
    List<Map<String, String>> values = new ArrayList<Map<String, String>>();
    int length = mMenuText.length;
    for (int i = 0; i < length; i++) {
      Map<String, String> v = new HashMap<String, String>();
      v.put("name", mMenuText[i]);
      values.add(v);
    }
    return values;
  }

  private XYMultipleSeriesDataset getDemoDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    final int nr = 10;
    Random r = new Random();
    for (int i = 0; i < SERIES_NR; i++) {
      XYSeries series = new XYSeries("Demo series " + (i + 1));
      for (int k = 0; k < nr; k++) {
        series.add(k, 20 + r.nextInt() % 100);
      }
      dataset.addSeries(series);
    }
    return dataset;
  }

  private XYMultipleSeriesDataset getDateDemoDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    final int nr = 10;
    long value = new Date().getTime() - 3 * TimeChart.DAY;
    Random r = new Random();
    for (int i = 0; i < SERIES_NR; i++) {
      TimeSeries series = new TimeSeries("Demo series " + (i + 1));
      for (int k = 0; k < nr; k++) {
        series.add(new Date(value + k * TimeChart.DAY / 4), 20 + r.nextInt() % 100);
      }
      dataset.addSeries(series);
    }
    return dataset;
  }

  private XYMultipleSeriesDataset getBarDemoDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    final int nr = 10;
    Random r = new Random();
    for (int i = 0; i < SERIES_NR; i++) {
      CategorySeries series = new CategorySeries("Demo series " + (i + 1));
      for (int k = 0; k < nr; k++) {
        series.add(100 + r.nextInt() % 100);
      }
      dataset.addSeries(series.toXYSeries());
    }
    return dataset;
  }

  private XYMultipleSeriesRenderer getDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setPointSize(5f);    
    renderer.setMargins(new int[] {20, 30, 15, 0});
    XYSeriesRenderer r = new XYSeriesRenderer();
    r.setColor(Color.BLUE);
    r.setPointStyle(PointStyle.SQUARE);
    r.setFillBelowLine(true);
    r.setFillBelowLineColor(Color.WHITE);
    r.setFillPoints(true);
    renderer.addSeriesRenderer(r);
    r = new XYSeriesRenderer();
    r.setPointStyle(PointStyle.CIRCLE);
    r.setColor(Color.GREEN);
    r.setFillPoints(true);
    renderer.setXLabels(0);
  renderer.addXTextLabel(1, "aga");
  renderer.addXTextLabel(2, "agar");
    renderer.addSeriesRenderer(r);
    renderer.setAxesColor(Color.DKGRAY);
    renderer.setLabelsColor(Color.LTGRAY);
    return renderer;
  }

  public XYMultipleSeriesRenderer getBarDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setMargins(new int[] {20, 30, 15, 0});
    SimpleSeriesRenderer r = new SimpleSeriesRenderer();
    r.setColor(Color.BLUE);
    renderer.addSeriesRenderer(r);
    r = new SimpleSeriesRenderer();
    r.setColor(Color.GREEN);
    renderer.addSeriesRenderer(r);
    return renderer;
  }

  private void setChartSettings(XYMultipleSeriesRenderer renderer) {
    renderer.setChartTitle("Chart demo");
    renderer.setXTitle("x values");
    renderer.setYTitle("y values");
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(5);
    renderer.setYAxisMin(0);
    renderer.setYAxisMax(250);
  }

  @Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    switch (position) {
    case 0:
      Intent intent = ChartFactory.getLineChartIntent(this, getDemoDataset(), getDemoRenderer());
      startActivity(intent);
      break;
    case 1:
      intent = ChartFactory.getScatterChartIntent(this, getDemoDataset(), getDemoRenderer());
      startActivity(intent);
      break;
    case 2:
      intent = ChartFactory.getTimeChartIntent(this, getDateDemoDataset(), getDemoRenderer(), null);
      startActivity(intent);
      break;
    case 3:
      XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
      setChartSettings(renderer);
      intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
      startActivity(intent);
      break;
    }
  }
} 
```

# ios - 尝试删除 NSUserdefault 数组中的表视图行

> ID：10160783
> 
> 赞同：0
> 
> 时间：2012-04-15T09:07:41.160
> 
> 标签：ios, ios5

我正在尝试删除表视图中的一行，然后将更新的表视图保存到 NSUserdefault 中的数组中。它看起来像这样：

```
 - (void)tableView:(UITableView *)tableView 

 commitEditingStyle:(UITableViewCellEditingStyle)editingStyle

  forRowAtIndexPath:(NSIndexPath *)indexPath {

NSMutableArray *stringsArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"history"];
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSMutableArray *history = [NSMutableArray arrayWithArray:[prefs objectForKey:@"history"]];    
 NSUInteger row = [indexPath row];

 NSUInteger count = [stringsArray count];

 if (row < count) {

    [stringsArray removeObjectAtIndex:row];

  [prefs setObject:history forKey:@"history"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [tableView reloadData]; 

    NSLog(@"tabort %d", row);
    NSLog(@"tabort %d", count);    
    NSLog(@"tabort %@", stringsArray);

    }

    } 
```

当我运行它时，我可以删除一行，但它没有被保存，当我尝试删除下一行时，它会出现以下消息：

> 2012-04-15 11:02:58.704 test220[88546:f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray removeObjectAtIndex:]：发送到不可变对象的变异方法”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:17:16.227

尝试换行：

```
NSMutableArray *stringsArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"history"]; 
```

至：

```
NSMutableArray *stringsArray = [NSMutableArray arrayWithArray: [[NSUserDefaults standardUserDefaults] arrayForKey:@"history"]]; 
```

# vb.net - for循环中的值不会改变

> ID：10160784
> 
> 赞同：0
> 
> 时间：2012-04-15T09:07:44.870
> 
> 标签：vb.net, list, reference

我的 VB.NET 程序中有一个`List`of 结构，我正在循环它们，并更改列表中对象的值，如下所示

```
Dim retvals As List(Of SomeStruct) = parser.RetrieveData(new_path)

 For i As Integer = 0 To retvals.Count - 1 Step 1
 dim temp as SomeStruct = retvals(i)

  temp.A = GetValueForA()
  temp.B = GetValueForB() 

 Next 
```

当我在这个循环之后查看我的结构列表时，没有一个值被覆盖。为什么？我认为我的列表中有引用，所以如果我将引用 A 更改为结构，那么引用 B 到同一个结构应该会看到更改吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:16:02.783

结构是值类型，而类是引用类型。如果您要使用 SomeClass 而不是 SomeStruct，则此代码将按您的预期工作。

在使用类的场景中，retvals 将是指向类对象的指针列表。“dim temp as ...”创建指针的副本，并将 temp.A 设置为某些内容会更改指针指向的对象。因此，当代码完成后，retval 中的指针仍然指向同一个对象，该对象现在已更改。但是，当使用结构时，不存储指针。retvals 只是存储在结构中的值的列表。“dim temp as ...”创建整个结构的副本。您通过更改 temp.A 来修改此结构，但原始结构永远不会更改，因为您只修改了它的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:14:40.077

我意识到问题出在哪里，`Structure`在 .NET 中是一个*值类型*，这意味着内容将被**复制**到`List`. 所以改变`temp`变量不会改变原来的`List`

我通过使用 a`class`来修复它，它是一个引用类型。

# javascript - 带有文本输入选项的 Jquery 选择菜单插件

> ID：10160789
> 
> 赞同：4
> 
> 时间：2012-04-15T09:08:46.687
> 
> 标签：javascript, jquery, html

我需要 jquery 插件来改变我的简单

```
<select>
  <option>text</option>
</select> 
```

在完全可定制的列表中，例如`<lu>`列表或列表`<div>`，我发现了很多此类插件，但没有一个可以选择输入内容并将其设置为选项。

可以说我有一个列表：

```
<select>
  <option value="text">text</option>
  <option value="other">other</option>
</select> 
```

现在我想要**其他**选项转换为`<input type="text" />`，我很确定必须有插件可以做到这一点。

我做了一个例子，它应该是什么样子，左边是我当前的插件，右边是我需要的，我知道我可以编辑我当前的插件，但这对我来说太大了，而且需要很多时间。

![在此处输入图像描述](../Images/7a8b819dee730ac4126b54e623ff4f46.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:47:35.487

没有 jQuery 插件可以做到这一点。但是，有一个[jQuery UI 选择菜单插件](http://filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)，它将选择元素转换为 html 表示，以便您可以设置选择菜单的样式。这个插件还提供了一个用于格式化文本的回调，这样在我们的例子中，我们可以将我们的“其他”选项格式化为一个输入框。

假设我们有以下选择：

```
 <select name="otherselect" id="otherselect">
        <option value="united-states">United States</option>
        <option value="latvia" selected="selected">Latvia</option>
        <option value="france">France</option>
        <option>Other</option>
    </select> 
```

我们可以使用这个插件创建一个选择菜单：

```
 $(function(){
        selectMenu = $('select#otherselect').selectmenu({
            style:'popup',
            width: 300,
            format: otherFormatting
        });
    }); 
```

在这里，函数`otherFormatting`是一个将格式化我们的其他选项的函数。这是我们的功能：

```
 var otherFormatting = function(text){

    // if text contains 'Other' format into Other input box...
        if ( text == "Other" ) {
        var button = $('<input type="submit" onclick="selectOther(this)" value="select"/>');
        var input = $('<input class="other" type="text" value="Other..."/>');

            return $('<span/>')
            .append(input)
            .append(button)[0].outerHTML;
    }

        return text;
    } 
```

单击按钮时调用的`selectOther`函数是我们将扩展插件的函数。此功能在单击按钮时激活，将设置我们选择的值，以便我们可以轻松地使用表单提交它。而且，设置新选择菜单中显示的值（而不是在选择框中显示输入框）。

我们需要扩展这个插件，它基本上是一个[jQuery UI 小部件](http://jqueryui.com/demos/widget/)。然而，由于插件绑定了一些事件，使我们无法让输入字段和按钮工作，我们需要取消绑定其中的一些。我们在打开选择菜单时执行此操作。为此，我们需要重写小部件的 open 函数，调用我们取消绑定某些事件的函数，然后使用原始 open 函数打开菜单。

把这一切放在一起：

```
<!DOCTYPE html>
<html>
    <head>
    <title>Demo Page for jQuery UI selectmenu</title>

    <link type="text/css" href="../../themes/base/jquery.ui.all.css" rel="stylesheet" />
    <link type="text/css" href="../../themes/base/jquery.ui.selectmenu.css" rel="stylesheet" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../ui/jquery.ui.core.js"></script>
    <script type="text/javascript" src="../../ui/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="../../ui/jquery.ui.position.js"></script>
    <script type="text/javascript" src="../../ui/jquery.ui.selectmenu.js"></script>
    <style type="text/css">
        body {font-size: 62.5%; font-family: "Verdana",sans-serif; }
        fieldset { border: 0; }
        label, select, .ui-select-menu { float: left; margin-right: 10px; }
        select { width: 200px; }
    </style>
    <script type="text/javascript">
        // We need to able to call the original open method, save intoIf you need to call original method
        var fn_open = $.ui.selectmenu.prototype.open;
        $.widget("ui.selectmenu", $.extend({}, $.ui.selectmenu.prototype, {
            open : function() {
                // Every the selectmenu is opened, unbind some events...
                this._unbindEvents();
                fn_open.apply(this, arguments);
            },
            _unbindEvents : function() {
                var el = $(this.list).find('li:has(input.other)').eq(0);
                // unbind events, we need a different event here...
                el.unbind('mouseup');
                el.unbind('mousedown');
                el.bind('mousedown', function() {
                    // We need to call focus here explicitly
                    $(this).find('input.other').eq(0).focus();

                    // Empty field on click...
                    if ( $(this).find('input.other').eq(0).val() == 'Other...' )
                         $(this).find('input.other').eq(0).val("");
                });
                // Unbind keydown, because otherwise we cannot type in our textfield....
                this.list.unbind('keydown');
                // We only need to return false on the mousedown event.
                this.list.unbind('mousedown.selectmenu mouseup.selectmenu');
                this.list.bind('mousedown', function() {
                        return false;
                });
            },
            selectOther : function(el) {
                var button = $(el);

                // li item contains the index
                var itemIndex = button.parent().parent().parent().data('index');
                var changed = itemIndex != this._selectedIndex();

                // Get the value of the input field
                var newVal = button.prev().val();
                this.index(itemIndex);
                // Update the display value in the styled select menu.
                this.newelement.find('.' + this.widgetBaseClass + '-status').html(newVal);

                // Update the value and html of the option in the original select.
                $(this.element[0].options[itemIndex]).val(newVal).html(newVal);

                // Call the select, change and close methods
                var e = jQuery.Event("mouseup");
                this.select(e);
                if ( changed )
                    this.change(e);
                this.close(e);
            }
        }));

        var selectMenu;
        $(function(){
            selectMenu = $('select#otherselect').selectmenu({
                style:'popup',
                width: 300,
                format: otherFormatting
            });
        });

        function selectOther(el) {
            // Call our self defined selectOther function.
            selectMenu.selectmenu('selectOther', el);
        }

        //a custom format option callback
        var otherFormatting = function(text){

            // if text contains 'Other' format into Other input box...
            if ( text == "Other" ) {
                var button = $('<input type="submit" onclick="selectOther(this)" value="select"/>');
                var input = $('<input class="other" type="text" value="Other..."/>');

                return $('<span/>')
                    .append(input)
                    .append(button)[0].outerHTML;
            }

            return text;
        }
    </script>
</head>
<body>
    <h2>Select with Other option input field</h2>
    <fieldset>
        <label for="otherselect">Select a value:</label>
        <select name="otherselect" id="otherselect">
            <option value="united-states">United States</option>
            <option value="latvia" selected="selected">Latvia</option>
            <option value="france">France</option>
            <option>Other</option>
        </select>
    </fieldset>
    <button onclick="console.log($('#otherselect').val());">Test</button>
</body>
</html> 
```

要尝试此操作，[请在此处下载插件](https://github.com/fnagel/jquery-ui)并确保 js/css 文件的 url 正确。（我已将此 html 文件放入 demos/selectmenu 文件夹，它可以工作......）。当然，您可以用图像替换按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T10:01:33.470

试试这个，如果选择框的值为其他，这个小脚本将在选择框之后创建一个文本输入。新文本输入与选择的名称相同，以便其值覆盖选择设置的一个（因为它是另一个）

如果该值不是其他值，我们只需检查文本输入是否存在并将其删除（因此它不会覆盖选择值）

[http://jsfiddle.net/cW725/1/](http://jsfiddle.net/cW725/1/)

HTML

```
<form>

    <p>
        <select>
            <option value="text">text</option>
            <option value="text">text</option>
            <option value="text">text</option>
            <option value="other">other</option>
        </select>
    </p>

    <p>
        <select>
            <option value="text">text</option>
            <option value="text">text</option>
            <option value="text">text</option>
            <option value="other">other</option>
        </select>
    </p>

</form>
​ 
```

jQuery

```
$(function() {

    // bind all select on change
    $('select').on('change', function() {

        // if value is other
        if ($(this).val() == 'other') {

            // add a text input we match the name so that this input overwrite the select one as after in the form
            $(this).after('<input type="text" name="' + $(this).attr('name') + '" class="otherInput" />');

        } else {

            if ($(this).next().is('input.otherInput')) {
                $(this).next().remove();
            };
        };
    });
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T09:55:31.167

我正在寻找一个 jquery 'select or edit' 解决方案，发现这可以在[select2 plugin](https://select2.github.io/examples.html)的帮助下完成。

原来是一个非常简单的解决方案，完全符合我的要求。

HTML：

```
<select name="otherselect" id="otherselect">
    <option value="united-states">United States</option>
    <option value="latvia" selected="selected">Latvia</option>
    <option value="france">France</option>
</select> 
```

JS：

```
$('#otherselect').select2({tags: true}); 
```

示例： [https ://jsfiddle.net/h0qp37jk/](https://jsfiddle.net/h0qp37jk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T21:48:31.897

您可以查看[selected.js](http://harvesthq.github.com/chosen/) - 它可能适合您的需求。从头开始制作东西可能更容易。祝你好运。

# sql-server - SQL Server 无法识别\r？

> ID：10160792
> 
> 赞同：0
> 
> 时间：2012-04-15T09:08:57.353
> 
> 标签：sql-server, sql-server-2005

简单查询：

```
UPDATE [WebERP].[dbo].[Users]
   SET 
       [ActiveDirectoryUser] = null

WHERE ActiveDirectoryUser='xxx\royin' 
```

错误 ：

> 消息 512，级别 16，状态 1，过程 Users_Update，第 17 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。该语句已终止。

我想问题出在这里：

![在此处输入图像描述](../Images/951eed41beeed1a91e8466587f683f77.png)

它将其视为回车。

（如果我改变它就可以了。`\r`）`\b`

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T09:28:14.270

我认为您的错误实际上存在于其他地方-我假设您给了我们一个非常简化的查询，实际上并没有重现原始错误，或者您只给了我们更大查询的一部分。

一方面-它说错误发生在子查询中-您的示例不包含一个。

您提供的代码在我的 Adventureworks 数据库中运行良好：

```
update SalesLT.Address
set AddressLine2 = 'abc\nd'
where AddressID = 9 
```

完全符合预期。

# c - 如何将全局变量或环境从主要状态转移到 Lua 通道？

> ID：10160793
> 
> 赞同：0
> 
> 时间：2012-04-15T09:09:15.197
> 
> 标签：c, multithreading, api, lua, lua-lanes

```
local lanes = require "lanes".configure()
local linda = lanes.linda()
local thread = lanes.gen({globals = _G}, function()
print("Starting thread...")
while true do
    local command = linda:receive("cmd")
    if command=="quit" then
        break
    else
        broadcast(-1,"Hello from lanes.")
    end
end
end)

local threads = {}
local NCORES = 2
for i=1,NCORES do threads[i] = thread() end
linda:send("cmd", "test")
for i=1,NCORES do linda:send("cmd", "quit") end
for i=1,NCORES do threads[i]:join() end 
```

作为在我的游戏服务器上让 Lua Lanes 正常运行的测试，我正在尝试在新线程中使用来自主状态的全局函数。不幸的是，这个特定的代码不断导致`Assert Failure in tools.c line 1216`. 我正在尝试进行设置，这样我就可以在不锁定主线程以及最终锁定我的游戏服务器的情况下完成繁忙的工作。有没有更好的方法来做到这一点？或者也许我可以`luaL_newthread(state)`在我的服务器中运行我的脚本？请告诉我正确的方向，因为这目前正在停止我的发展。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:31:01.597

你不应该在车道上访问这样的全局变量。线程以单独的状态运行。你得到的是全局表的深层副本（不是参考）。此外，通过在单独的线程中调用全局函数，您将面临同步问题的风险。

您可以做的是`require`线程本身的模块。要将`broadcast`函数放入线程，您有以下选项：

1.  将`broadcast`其他函数放入一个模块并`require`在线程中调用。
2.  ~~存储`broadcast`为`local`线程函数之前的 a 以将其作为上值。~~

**更新**：不幸的是，第二种方式不再像以前那样工作了。由于与 LuaJIT 2 的兼容性问题，Lanes 必须在运行时[计算原生函数的映射表](https://github.com/LuaLanes/lanes/blob/master/src/lanes.c#L2423)`configure`。我还没有找到一种将简单的 C 函数转移到线程中的方法，而不是真正`require`将模块转移到线程中。

# jquery - 使用 jQuery 添加表格行后，jquery 数值函数不再工作

> ID：10160795
> 
> 赞同：1
> 
> 时间：2012-04-15T09:09:22.220
> 
> 标签：jquery, keypress, numeric, keyup

单击后，我使用以下代码添加表格行，但添加行后，数字功能不再起作用。有什么问题？

数字函数是一个插件，只允许在输入框中输入有效的数字。

这是jQuery代码

```
var count = 1;
    $('.Outlettbl').delegate('.addbtn', 'click', function(){
        count++;
        var brandid = $(this).closest('tr').find('input[name="brandelement"]').val();
        var rowtoadd = '<tr><td colspan="6" height="5"></td></tr><tr><td width="150"><input type="text" name="Outname['+brandid+'][]" class="required" style="width:140px; height:27px;" /><input type="hidden" name="brandelement" value="'+brandid+'"</td><td width="185"><input type="text" name="Outaddress['+brandid+'][]" class="required" style="width:175px; height:27px;" /></td><td width="100"><input type="text" name="Outcode['+brandid+'][]" class="numeric required" style="width:90px; height:27px;" /></td><td width="110"><input id="otel'+brandid+'_'+count+'" type="text" class="fgray" name="Outtel['+brandid+'][]" onfocus="clearText(\'otel'+brandid+'_'+count+'\', \'optional\');" value="optional" style="width:100px; height:27px;" /></td><td width="165"><input id="ohour'+brandid+'_'+count+'" type="text" class="fgray" name="Outhour['+brandid+'][]" onfocus="clearText(\'ohour'+brandid+'_'+count+'\', \'optional\');"  value="optional" style="width:155px; height:27px;" /></td><td>&nbsp;<a href="javascript:;" class="addbtn addrow'+brandid+'">&nbsp;</a></td></tr>';
        $(this).closest('tr').after(rowtoadd);
        $(this).replaceWith('<a id="row" href="javascript:;" class="delrow">&nbsp;</a>');
            return false;
    }); 
```

# c - Scanf 和两个字符串

> ID：10160796
> 
> 赞同：1
> 
> 时间：2012-04-15T09:09:37.233
> 
> 标签：c, input

我的任务是读取两个数字字符串并将它们保存在不同的数组中。我决定使用 scanf 函数，但程序只能读取第一个字符串。这是我的错误代码。

```
int main()
{

    int firstArray[50], secondArray[50], i, j;

    /* fill an array with 0 */
    for(i=0; i<50; ++i)
    {
        firstArray[i]=secondArray[i]=0;
    }

    i=j=0;

    while((scanf("%d", &firstArray[i]))== 1) { ++i; }
    while((scanf("%d", &secondArray[j]))== 1) { ++j; }

    /* Print this. */
    for(i = 0; i < 20; ++i)
    {
        printf("%d ", firstArray[i]);
    }
    putchar('\n');

    for(j = 0; j < 20; ++j)
    {
        printf("%d ", secondArray[j]);
    }

    return 0;
} 
```

我只是不明白 scanf 函数是如何工作的。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:34:51.043

`scanf`忽略空白字符（包括换行符）。`firstArray`因此，如果您没有“非空白”分隔符，您的扫描将读取整个输入。

如果文件/数据`;`位于第一行的末尾，它将停止读取到`firstArray`那里，并且永远不会读取任何内容`secondArray`- 因为您永远不会使用`;`.

```
/* This will never be 1 as ; is blocking */
while((scanf("%d", &secondArray[i])) == 1) { 
```

所以：如果你与 ie 分开，`;`你必须在读入`secondArray`.

您还可以添加以下内容：

```
char c;

/* this can be done more tidy, but only as concept */
while((scanf("%d", &firstArray[i])) == 1 && i < max) {
    ++i;
    if ((c = getchar()) == '\n' || c == ';')
        break;
} 
```

此外，您可以说，而不是通过循环将数组初始化为 0：

```
int firstArray[50] = {0}; /* This set every item to 0 */ 
```

还要注意确保您不超过 50 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:24:18.733

你不能用它`scanf`来做到这一点。

阅读[文档](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)。

观察：

1.  `scanf`如果您输入一个数字，您的循环将永远运行
2.  没有检查阵列的大小 50 限制
3.  如果您按`return`然后它会忽略该行，因为与您的模式不匹配
4.  如果您输入一个字母，则模式不匹配并且循环中断

因此，请使用其他功能，`gets`也许`atoi`或[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)。并记住检查数组的大小限制为 50。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:50:37.967

实际上，C 的数组有一个特殊点。

尽管您声明了数组的大小。说`int arr[5];`您可以存储超过**5**大小的值。它不会显示任何错误，但会导致未定义的行为（可能会覆盖其他变量）。

请参考这个问题：[数组大小小于号。存储在其中的元素](https://stackoverflow.com/questions/10137916/array-size-less-than-the-no-of-elements-stored-in-it)

在你的情况下，那是你的问题。编译器从未超过第一个 while 语句。因此，您没有得到任何输出。事实上，它甚至还没有编译整个代码！

`while((scanf("%d", &firstArray[i]))== 1) { ++i; }`

所以，你可以这样写这个 while 语句：

```
while(  scanf("%d", &firstArray[i]) ==1 && i<50 )  
    i++; 
```

要不然：

```
while(i<50 )
{
        scanf("%d", &firstArray[i]);             
        i++;
} 
```

要不然：

```
for (i=0; i<50; i++)
    scanf("%d", &firstArray[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T10:10:31.937

你说一串数字然后你读`%d`。该格式扫描输入以查找表示整数（有符号）值的最长序列。第一个 while 循环消耗了两个“数字字符串”。

**编辑**而不是“数字字符串”，您应该说“整数字符串”。在这种情况下，它有点微妙，因为第一个 while 可以消耗所有整数，除非它们被一些*不是*可能的整数（例如 a `;`）分隔。

因此，要使以下内容起作用，您必须将两个“行”与无法解析为整数*且不*被视为“白色字符”的内容分开。不是更好的解决方案，而是一种可能的解决方案。

```
#include <stdio.h>
#include <ctype.h>

int main()
{

  int firstArray[50] = {0};
  int secondArray[50] = {0};
  int i, j, l1, l2;
  int tmp;

  i = j = 0;

  // read integers, but not more than size of array
  while( scanf("%d", &firstArray[i]) == 1 && i < sizeof(firstArray) ) { 
    ++i; 
  }

  // consume non digits
  for(tmp = getchar(); tmp != EOF && !isdigit(tmp); tmp = getchar());
  // on EOF you should exit and stop processing;
  // we read one more char, push it back if it was a digit
  if (isdigit(tmp)) ungetc(tmp, stdin);

  while( scanf("%d", &secondArray[j]) == 1 && j < sizeof(secondArray) ) { 
    ++j; 
  }

  l1 = i; // preserve how many ints were read
  l2 = j;

/* Print this. */
  for(i = 0; i < l1; ++i)
  {
    printf("%d ", firstArray[i]);
  }
  putchar('\n');

  for(j=0; j < l2; ++j)
  {
    printf("%d ", secondArray[j]);
  }

  return 0;
} 
```

**编辑**可能更适合您需要的解决方案是将行（每次一个）读入缓冲区并 sscanf 缓冲区。

# c++ - 从任意数量的模板模板类继承

> ID：10160797
> 
> 赞同：1
> 
> 时间：2012-04-15T09:09:38.980
> 
> 标签：c++, c++11, variadic-templates

是否可以将任意数量的模板模板类传递给一个类？像这样的东西：

```
template < template < typename > ... class types > struct T {}; 
```

完成后，我想从他们那里继承，如下所示：

```
template < typename p, template < typename > ... class types >
struct T : types <p> ... {}; 
```

我将如何获得这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T09:14:04.727

看起来你只是放错了省略号，试试这个：

```
template < template < typename > class... types > struct T {}; 
```

或者从他们那里继承：

```
template < typename p, template < typename > class... types >
struct T : types <p>... {}; 
```

# c# - 谁订阅了 PropertyChanged 事件

> ID：10160798
> 
> 赞同：0
> 
> 时间：2012-04-15T09:09:45.187
> 
> 标签：c#, wpf, inotifypropertychanged

通常当一个类公开一个事件时：

```
SomeClass.OnSomeEvent += Handler ; 
```

我想了解的：（如果我错了，请纠正我）

实现 INotifyPropertyChanged 时，实现类公开 PropertyChanged 事件

(1) 谁注册了该活动？

（2）有没有办法观察wpf框架的底层代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:13:38.867

> (1) 谁注册了该活动？

[`Binding`对象](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.aspx)。_ 它们是辅助对象，在设置 WPF 数据绑定时隐式创建。

> （2）有没有办法观察wpf框架的底层代码？

您始终可以使用反射。但是阅读文档和规范会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:14:00.990

1.  `DataBinding`订阅该事件，当您提出它时，它会相应地更新 UI。
2.  无法观察它，因为它都是关于框架内部的，但可以对其进行分析，如果这可以帮助你解决*这个*问题。

# android - android gridview总是为空

> ID：10160801
> 
> 赞同：0
> 
> 时间：2012-04-15T09:10:30.197
> 
> 标签：android, android-layout

在我的活动中，我有：

DrawView 是一个自定义相对布局。

这个 RelativeLayout 应该存在一个自定义导航栏和一个自定义 GridView

此处将自定义 NavigationBar 添加到 DrawView：

```
final LayoutInflater factory = getLayoutInflater();
        final View textEntryView = factory.inflate(R.layout.multiplechoice, null);
        com.lernapp.src.Views.NavigationBarTest navigation = (com.lernapp.src.Views.NavigationBarTest)textEntryView.findViewById(R.id.navigationbar);
        RelativeLayout parent = (RelativeLayout)navigation.getParent();
        parent.removeAllViews();

        drawView.addView(navigation); 
```

我想用 GridView 做类似的事情。

我不明白，我的 CustomGridView 总是为空，这是为什么呢！？

```
MyCustomGridView grid = (MyCustomGridView)findViewById(R.id.gridview); 
```

xml:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
  android:orientation="vertical"  
  android:layout_width="fill_parent"  
  android:layout_height="fill_parent">  

    <com.lernapp.src.Views.MyCustomGridView  
        android:id="@+id/gridview"  
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"  
        android:cacheColorHint="#00000000"  
        android:listSelector="@android:color/transparent"  
        android:numColumns="auto_fit"  
        android:columnWidth="160dp"/>  
</LinearLayout> 
```

自定义网格视图：

```
public class MyCustomGridView extends GridView implements OnItemClickListener{  
      private Listener mListener;  

      public MyCustomGridView(Context context, AttributeSet attrs) {  
        super(context, attrs);  
        setOnItemClickListener(this);  
      }  

      public void onItemClick(AdapterView parent, View v, int position, long id) {  
        if (mListener != null) {  
          mListener.onClick(position);  
        }  
      }  

      public void setListener(Listener l){  
        mListener = l;  
      }  

      public interface Listener{  
        void onClick(int position);   
      }

    } 
```

编辑：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int height = this.getWindowManager().getDefaultDisplay().getHeight();
    int width = this.getWindowManager().getDefaultDisplay().getWidth();

    MyCustomGridView grid = (MyCustomGridView)findViewById(R.id.gridview);

    DrawView drawView = new DrawView(this, dragFieldText, targetFieldText, height, width, grid);

    final LayoutInflater factory = getLayoutInflater();
    final View textEntryView = factory.inflate(R.layout.multiplechoice, null);
    com.lernapp.src.Views.NavigationBarTest navigation = (com.lernapp.src.Views.NavigationBarTest)textEntryView.findViewById(R.id.navigationbar);
    RelativeLayout parent = (RelativeLayout)navigation.getParent();
    parent.removeAllViews();

    drawView.addView(navigation);

    setContentView(drawView);       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:28:17.780

将此行添加到您的 onCreate 中，一切都会好起来的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.the_name_of_the_layout_for_this_activity); 
```

并且要非常清楚，它

```
 setContentView(R.layout.the_name_of_the_layout_for_this_activity); 
```

您应该添加到 onCreate，并且必须在您尝试执行 findViewById() 之前添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:39:12.450

你有2个选择

1.  你用`findViewById`. 您正在寻找的视图必须通过使用“在屏幕上” `setContentView()`。没有其他方法可以解决它，这就是该功能`findViewById`的用途。
2.  如果您`setContentView()`因为想以编程方式设置此视图而无法使用，并且由于某种原因它不在您想要设置的 XML 中，则您必须对视图进行**充气**，然后用它来发挥您的魔力，然后您就可以随意使用`setContentView()`了。如何执行此操作的示例很简单，但请查看[手册](http://developer.android.com/reference/android/view/LayoutInflater.html)和一些[随机示例](https://stackoverflow.com/questions/3477422/layout-inflater-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:23:12.287

正如 Heinrisch 所说，您需要在使用 findViewById() 之前调用 setContentView。为什么不将自定义相对布局添加到布局 xml？通常你不需要自己膨胀视图。

```
<com.lernapp.src.Views.DrawView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.lernapp.src.Views.MyCustomGridView
        android:id="@+id/gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:columnWidth="160dp"
        android:listSelector="@android:color/transparent"
        android:numColumns="auto_fit" />
</com.lernapp.src.Views.DrawView> 
```

# java - 在Java中调用方法时如何获取方法参数名称

> ID：10160804
> 
> 赞同：0
> 
> 时间：2012-04-15T09:10:48.617
> 
> 标签：java

例如：

我有一个像这样定义的方法：

```
class MyController extends Controller {

   public void index() {
       String aa = "1111";
       int bb = 122;

       render("index.html", aa, bb);
   }
} 
```

现在，我想获取参数名称：aa 和 bb 来构建一个 HashMap：

```
Map map = new HashMap();
map.set("aa", aa);
map.set("bb", bb); 
```

我看到很多MVC框架都可以这样做，怎么实现的？反射或字节码黑客或编译时处理？

PS：我知道如何获取方法参数名称（通过调试编译），但调用时我需要知道方法参数名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:23:31.537

我认为你的 MVC 框架做了别的事情。它可能使用反射提取方法参数的名称。例如，如果您的方法渲染定义为

`void render(String file, String a, String b)`

您的框架（和您）可以获得参数“a”和“b”的名称。我怀疑有人可以获得本地方法变量的名称，`aa`并且`bb`它们是在您的示例中编写的。

获取有关参数名称的一些数据的另一种方法是使用注释。您可以定义自定义注释（我们称之为`@Param`），然后按如下方式使用它：

`render(@Param("fileName") "index.html", @Param("aa") "aaaaa", @Param("bb") "bbbb");`

现在您可以使用反射 API 提取参数名称。注释可以在方法定义或方法调用时使用。

这就是 Spring MVC 的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:31:49.303

最终，您永远不会看到任何框架读取参数名称。它们在对象属性级别工作——实例字段、getter 和 setter。您可以在运行时通过反射找到它们。如果您想推出自己的工具来消除样板，您仍然必须重新设计以使用对象属性的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:17:37.557

您是否希望该`render()`方法找出其参数的变量名称？

如果没有字节码操作，这是不可能的。

MVC 框架在获得包含调用表达式的字符串时（例如在 JSF 和其他 Web 框架中）可以知道参数名称，但在获得包含实际调用的某些字节码时则不知道。

# php - 如何使 PHP 日期和时间自动更新

> ID：10160810
> 
> 赞同：0
> 
> 时间：2012-04-15T09:11:58.657
> 
> 标签：php

我有一个显示日期和时间的脚本。

如何添加一些内容以使其自动更新而不是页面刷新。

这是脚本：

```
<?php
$hourdiff = 0; // Replace the 0 with your timezone difference (;
$site = date("l, d F Y g:i a",time() + ($hourdiff * 3600));
echo $site;
?> 
```

任何人都可以帮忙。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T09:13:39.197

PHP 是一种服务器端语言，您向服务器发送请求的唯一方法是通过重定向、导航、刷新或通过 ajax 请求。

因此，您将需要 Javascript。

这是一个简单的[演示](http://jsfiddle.net/pLsgJ/1/)

```
setInterval(function() {
    var currentTime = new Date ( );    
    var currentHours = currentTime.getHours ( );   
    var currentMinutes = currentTime.getMinutes ( );   
    var currentSeconds = currentTime.getSeconds ( );
    currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;   
    currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;    
    var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";    
    currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;    
    currentHours = ( currentHours == 0 ) ? 12 : currentHours;    
    var currentTimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay;
    document.getElementById("timer").innerHTML = currentTimeString;
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:18:55.523

您可以使用 javascript 显示当前时间。

这是一篇关于此的介绍性文章：[http ://www.elated.com/articles/creating-a-javascript-clock/](http://www.elated.com/articles/creating-a-javascript-clock/)

也可能重复：[使用 php 和 jquery ajax 显示服务器时间](https://stackoverflow.com/questions/9889226/show-server-time-using-php-and-jquery-ajax)

# javascript - 无法在 android 上显示 KendoUI 按钮

> ID：10160815
> 
> 赞同：0
> 
> 时间：2012-04-15T09:12:30.420
> 
> 标签：javascript, android, cordova, kendo-ui

我在使用 KendoUI 中的按钮时遇到了麻烦。当我使用 Ripple 进行调试时，我可以看到按钮，但是当我在我的手机（带有 CyanogenMod7 的 Atrix）上尝试时，按钮就是不显示！

这是我正在使用的代码：

```
<div data-role="view" data-layout="listado-layout" id="main-update" data-title="Actualizar Base de Datos">
<ul data-role="listview" data-style="inset">
  <li><center><input type="button" onclick="updateDB();" value="Actualizar"></input></center></li>
</ul> 
```

顺便说一句，我正在使用 PhoneGap 制作应用程序，但我无法从浏览器或 phonegap 中看到按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T11:39:59.323

这看起来像是 Android 浏览器中的一个错误 - 转换元素中的按钮失去了其默认样式，并且在透明背景上只有黑色文本，并且看起来它消失了。作为一种解决方法，您可以使用 data-role="button" 来使用 Kendo UI Mobile 样式，如下所示：

```
<li><center><input type="button" data-role="button" onclick="updateDB();" value="Actualizar" /></center></li> 
```

# c - Linux read() 最小数据量

> ID：10160817
> 
> 赞同：2
> 
> 时间：2012-04-15T09:13:23.603
> 
> 标签：c, linux, unix

在 Linux 中使用 read() 系统调用从任何源（文件、套接字、管道）读取时，是否有可以返回的最小数据量（在阻塞模式下）？或者系统调用甚至可以返回 1 个字节？

当我想从管道中读取单个 int（4 或 8 个字节）时，是否还需要检查 read() 的返回值以查看我收到的是否小于 sizeof(int) 个字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T09:16:28.017

没有最小值，除非在块模式设备上，最小值是块大小。

您应该始终检查返回值；事情可能会破裂，您应该计划破裂并适当地处理短读取和错误，而不是假设对方总是完美的。

# javascript - 使用 highcharts 处理 unix 时间戳

> ID：10160822
> 
> 赞同：14
> 
> 时间：2012-04-15T09:13:46.713
> 
> 标签：javascript, jquery, highcharts

**jsfiddle：http:** [//jsfiddle.net/RjPRd/](http://jsfiddle.net/RjPRd/)

时间和标签显示不正确。

我认为 Javascript Time 的时间戳应该乘以 1000，但最好的方法是什么？另外我认为设置仍然不正确，因为标签似乎与光标所在的位置相反。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-15T10:06:44.297

你是对的，Javascript 中的时间戳是毫秒，所以你应该将所有内容乘以 1000。

对于另一个问题，它来自于您的数据是倒序排列的事实。显然，当系列没有正确排序时，HighCharts 搞砸了。

这是您的代码的更正：http: [//jsfiddle.net/cvedovini/RjPRd/2/](http://jsfiddle.net/cvedovini/RjPRd/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-12T20:55:38.670

在 Highcharts 中使用时间戳（毫秒）的一种简单方法是使用[formatter](https://api.highcharts.com/highcharts/xAxis.labels.formatter)。因此，首先将您的时间值作为[unix 时间戳](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Date/now)接收，然后在图表中设置以下功能之一：

在 xAxis 标签中使用：

```
xAxis:[{
  labels:{
     formatter:function(){
         return Highcharts.dateFormat('%Y %M %d',this.value);
     }
  }
}] 
```

在工具提示中使用：

```
tooltip: {
    readerFormat: {
        formatter: function(){
         return Highcharts.dateFormat('%Y %M %d',this.value);
     }
  },
    pointFormat: '{point.y} ms',
    shared: true
}, 
```

[带有工具提示的代码示例](https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/annotations/)

[关于格式化程序的参考](https://api.highcharts.com/highcharts/xAxis.labels.formatter)

# javascript - 如果太长，如何使内联 ul 显示水平截断以适合屏幕宽度

> ID：10160826
> 
> 赞同：2
> 
> 时间：2012-04-15T09:14:07.507
> 
> 标签：javascript, jquery, html, css

我正在尝试制作一个水平显示的无序列表。我得到了那个部分的工作。

接下来，我想要它，这样无论列表中有多少项目（即太多而无法在屏幕上显示）它都不会换行到下一行，而是会被截断。我想要它，所以即使它对屏幕来说太大，它的宽度也会是 100%。我的意思是它不会导致浏览器有一个水平滚动条，允许您滚动查看其余数据。不适合屏幕的内容将被隐藏。

我想出了：

```
<html>
<head>
<style type="text/css">
#navlist li
{
display: inline;
list-style-type: none;
padding-right: 20px;
overflow-x:hidden;
}

#rt, #divlist
{
overflow-x:hidden;
}
</style>

<ul id="navlist">
<li id="active"><a href="#" id="current">Item one</a></li>
<li><a href="#">Item two</a></li>
<li><a href="#">Item three</a></li>
<li><a href="#">Item four</a></li>
<li><a href="#">Item five</a></li>
<li><a href="#">Item six</a></li>
<li><a href="#">Item seven</a></li>
<li><a href="#">Item eight</a></li>
<li><a href="#">Item nine</a></li>
<li><a href="#">Item ten</a></li>
<li><a href="#">Item eleven</a></li>
<li><a href="#">Item twelve</a></li>
<li><a href="#">Item thirteen</a></li>
<li><a href="#">Item fourteen</a></li>
<li><a href="#">Item fifteen</a></li>
</ul> 
```

好的，所以它水平显示很酷，但我正在努力让截断位工作。它一直换到下一行。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:25:26.397

我认为您可以使用 inline-block 而不是使用 inline

```
#navlist li
{
display: inline-block;
list-style-type: none;
padding-right: 20px;
overflow-x:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:18:22.303

添加到您的脚本中：

```
#navlist{
    width:100%;          //gives an explicit width for overflow:hidden to work
    overflow-x:hidden;   //overflows along the width
    white-space:nowrap;  //prevent children from wrapping
} 
```

[这是一个演示](http://jsfiddle.net/qNdnp/)

# php - 如何可靠地找到与键入的字符串相似的字符串

> ID：10160837
> 
> 赞同：0
> 
> 时间：2012-04-15T09:16:20.703
> 
> 标签：php, mysql, string, compare

我有一个界面，用户将在其中输入公司名称。然后，它将他们输入的内容与数据库中的当前条目进行比较，如果发现类似的内容，它会向他们提供选项（以防拼写错误），或者他们可以单击一个按钮，确认他们输入的内容绝对是新的和独特的。

我遇到的问题是它不是很准确，并且经常会出现几十个根本不相似的“相似”匹配！

这就是我现在所拥有的，我没有制作的第一个大型功能，我不清楚它到底做了什么。有没有更简单的方法来实现我想要的？

```
// Compares strings and determines how similar they are based on a nth letter split     comparison.
function cmp_by_optionNumber($b, $a) {
if ($a["score"] == $b["score"]) return 0;
if ($a["score"] > $b["score"]) return 1;
return -1;
}
function string_compare($str_a, $str_b)
{
$length = strlen($str_a);
$length_b = strlen($str_b);

$i = 0;
$segmentcount = 0;
$segmentsinfo = array();
$segment = '';
while ($i < $length)
{
    $char = substr($str_a, $i, 1);
    if (strpos($str_b, $char) !== FALSE)
    {
        $segment = $segment.$char;
        if (strpos($str_b, $segment) !== FALSE)
        {
            $segmentpos_a = $i - strlen($segment) + 1;
            $segmentpos_b = strpos($str_b, $segment);
            $positiondiff = abs($segmentpos_a - $segmentpos_b);
            $posfactor = ($length - $positiondiff) / $length_b; // <-- ?
            $lengthfactor = strlen($segment)/$length;
           $segmentsinfo[$segmentcount] = array( 'segment' => $segment, 'score' => ($posfactor * $lengthfactor));
        }
        else
        {
             $segment = '';
             $i--;
             $segmentcount++;
         }
     }
     else
     {
         $segment = '';
        $segmentcount++;
     }
     $i++;
 }

 // PHP 5.3 lambda in array_map
 $totalscore = array_sum(array_map(function($v) { return $v['score'];  },    $segmentsinfo));
 return $totalscore;
}

$q = $_POST['stringA'] ;
$qLengthMin = strlen($q) - 5 ; // Part of search calibration. Smaller number = stricter.
$qLengthMax = strlen($q) + 2 ; // not in use.

$main = array() ;

include("pdoconnect.php") ;

$result = $dbh->query("SELECT id, name FROM entity_details WHERE
                  name LIKE '{$q[0]}%'
                  AND CHAR_LENGTH(name) >= '$qLengthMin'
                  #LIMIT 50") ; // The first letter MUST be correct.     This assumption makes checker faster and reduces irrelivant results.
$x = 0 ;
while($row = $result->fetch(PDO::FETCH_ASSOC)) {

$percent = string_compare(strtolower($q), strtolower(rawurldecode($row['name']))) ;

if($percent == 1) {
    //echo 1 ;// 1 signifies an exact match on a company already in our DB.
    echo $row['id'] ;
    exit() ;
}
elseif($percent >= 0.6) { // Part of search calibration. Higher deci number = stricter.
    $x++ ;
    $main[$x]['name'] = rawurldecode($row['name']) ;
    $main[$x]['score'] = round($percent, 2) * 100;

    //array_push($overs, urldecode($row['name']) . " ($percent)<br />") ;
}

}

usort($main, "cmp_by_optionNumber") ;
$z = 0 ;
echo '<div style="overflow-y:scroll;height:175px;width:460px;">' ;
foreach($main as $c) {
if($c['score'] > 100) $c['score'] = 100 ;
if(count($main) > 1) {
echo '<div id="anysuggested' . $z . '" class="hoverdiv" onclick="selectAuto(' . "'score$z'" . ');">' ;
}
else echo '<div id="anysuggested' . $z . '" class="hoverdiv" style="color:#009444;" onclick="selectAuto(' . "'score$z'" . ');">' ;
echo '<span id="autoscore' . $z . '">' . $c['name'] . '</span></div>' ;
$z++ ;
}
echo '</div>' ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:21:29.437

比较字符串是一个很大的话题，有很多方法可以做到这一点。一种非常常见的算法称为[Levenshtein 差分](http://en.wikipedia.org/wiki/Levenshtein_distance)。这是[PHP 中的本机实现，](http://uk3.php.net/levenshtein)但在 MySQL 中没有。但是，[这里](http://www.artfulsoftware.com/infotree/queries.php#552)有一个您可以使用的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:23:54.070

您需要近似/模糊字符串匹配。

阅读更多关于 [http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)，[http://www.slideshare.net/kyleburton/fuzzy-string-matching](http://www.slideshare.net/kyleburton/fuzzy-string-matching)

最好的方法是使用一些基于索引的搜索引擎，例如 SOLR [http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)。

# asp.net - 如果旧密码被散列，有没有办法比较旧密码？

> ID：10160845
> 
> 赞同：1
> 
> 时间：2012-04-15T09:17:19.287
> 
> 标签：asp.net, hash, asp.net-membership, change-password

我正在使用 ChangePassword Web 控件来更改用户密码。我的提供商正在使用散列密码，我想继续使用它。只是想知道是否有办法将用户输入的当前密码与数据库中的旧密码进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:21:08.800

您可以使用 Membership.ValidateUser 方法，该方法返回 true 或 false，具体取决于输入的密码（在您的情况下为新密码）是否与旧密码相同。

[http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:19:02.207

散列当前密码并比较它..通常是这样完成的

# bash - 包含字符和数字的“排序”文件名

> ID：10160847
> 
> 赞同：1
> 
> 时间：2012-04-15T09:17:40.773
> 
> 标签：bash, sorting

我有很多相关的文件，像这样：

> data0.csv data1.csv data2.csv data11.csv data21.csv

当我 时`ls .`，它们看起来像这样：

```
data0.csv
data1.csv
data11.csv
data2.csv
data21.csv 
```

但我希望它们按升序排列，如下所示：

```
data0.csv
data1.csv
data2.csv
data11.csv
data21.csv 
```

怎么做呢`bash`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:58:33.803

这可能对您有用：

```
ls -v *.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:29:42.960

对于这个特定的例子，你也可以这样做：

```
$> ls . | sort -k3 -ta -n
data0.csv
data1.csv
data2.csv
data11.csv
data21.csv 
```

使用 'a' 作为字段分隔符 ( )`-n`对第三个字段 ( ) 进行数字排序( )。`-k3``-ta`

# javascript - javascript中+=和=+的区别

> ID：10160850
> 
> 赞同：11
> 
> 时间：2012-04-15T09:18:22.217
> 
> 标签：javascript

我想知道为什么运行第三行代码后结果`a`是5？

```
a = 10;
b = 5;
a =+ b; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-15T09:20:42.990

尴尬的格式：

```
a =+ b; 
```

相当于：

```
a = +b; 
```

这`+b`只是一种转换`b`为数字的奇特方式，如下所示：

```
var str = "123";
var num = +str; 
```

你可能想要：

```
a += b; 
```

相当于：

```
a = a + b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T08:14:17.247

函数前面的 + 号，实际上称为[一元加号](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_plus)，是一组称为一[元运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#unary_operators)和（一元加号）的一部分，用于将字符串和其他表示形式转换为数字（整数或浮点数）。

> 一元运算是只有一个操作数的运算，即单个输入。这与使用两个操作数的二元运算形成对比。

**基本用途：**

```
const x = "1";
const y = "-1";
const n = "7.77";

console.log(+x);
// expected output: 1

console.log(+n);
// expected output: 7.77

console.log(+y);
// expected output: -1

console.log(+'');
// expected output: 0

console.log(+true);
// expected output: 1

console.log(+false);
// expected output: 0

console.log(+'hello');
// expected output: NaN
```

当 + 号位于变量、函数或任何返回的字符串表示之前，输出将被转换为整数或浮点数；一元运算符 (+) 也转换非字符串值 true、false 和 null。

# ruby-on-rails - 设计：通过子域范围获取唯一用户？

> ID：10160855
> 
> 赞同：0
> 
> 时间：2012-04-15T09:19:20.743
> 
> 标签：ruby-on-rails, authentication, devise

我有一个应用程序使用设计基于子域的不同帐户进行身份验证。

如何区分 Devise 用户并使电子邮件仅在每个子域范围内唯一？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:58:46.077

在 Rails 2 中：

```
validates_uniqueness_of :email, :scope => :subdomain 
```

在 Rails 3 中：

```
validates :email, :uniqueness => true, :scope => :subdomain 
```

在迁移中：

```
add_index :users, [:subdomain, :email], :unique => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:17:08.907

范围需要是 subdomain_id （无法访问子域，使用 :scope => :subdomain 时）

验证 :email, :uniqueness => true, :scope => :subdomain_id

# c++ - C++ 控制台 INT 输入验证 - 在没有输入数据之前检测 ENTER？

> ID：10160857
> 
> 赞同：1
> 
> 时间：2012-04-15T09:19:59.097
> 
> 标签：c++, validation, input

我有这个代码块来自我希望改进的输入类。目前它工作正常。

[http://ideone.com/ryatJ](http://ideone.com/ryatJ)

你像这样使用它......它的作用是传递对流的引用，对用户输入的引用和一个 int 来标记输入必须是的最大范围。usrinput 被引用，所以我们可以在其他地方使用它，它返回一个真假，所以我们可以像这样使用它......来获取输入......

```
while (!(validate(cin, returnval, a))){
        //# Error Code code here
    } 
```

基本上一切正常.. 它要求用户输入一个我们期望作为 int 的数字。

使用 if (cin >> int) - 根据用户是否输入 int，我得到一个真假。（所以任何字符串或任何东西......错误）使用 > 和 < 我们确保 int 在正确的范围内，否则会出错。使用 peek 我们检查流中的 \n.. 如果没有找到.. 它会出错。（所以 2.2 或 2:3 4@3 等会出错）

所以这一切都有效，事实上我只是最近才注意到我还需要一个错误检查。虽然我不知道该怎么做。

基本上，如果您只是按 Enter 键而没有先输入 ANY 值，那么 cin 就会换行。有没有办法检测到用户只是按了回车键，所以我可以返回正确的错误消息并重新绘制菜单屏幕以及我想做的所有其他事情。？

夏天

我怎样才能添加一个功能来检查是否在不输入任何其他值的情况下按下了输入？

感谢您的帮助--Jynks

编辑 - - -

我无法回答我自己的问题..但这就是答案...

我非常接近..但答案已经在我的代码中了....意味着 cin.peek() 正在查看流，目前它在将其读入变量后调用它。这意味着它看到了“第二个”字符以及测试工作的原因......我需要做的就是进行新的测试 b4 读取了 cin 并检查了第一个字符..

解决 [了 http://ideone.com/mt7jH](http://ideone.com/mt7jH)

# asp.net-mvc - MVC3 View 在验证通过时不显示空表单

> ID：10160858
> 
> 赞同：3
> 
> 时间：2012-04-15T09:20:04.707
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

很简单的情况，这是我的模型：

```
public class Comment
{
    [Required]
    public string Name { get; set; }
    [Required]
    public string Text { get; set; }

} 
```

这是我的控制器：

```
public class CommentController : Controller
{
    //
    // GET: /Comment/Create

    public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Comment/Create

    [HttpPost]
    public ActionResult Create(FormCollection collection)
    {
        Comment new_comment = new Comment();

        if (TryUpdateModel(new_comment))
        {
            return View(new Comment()); //problem is there
        }
        else
        {
            return View(new_comment);
        }

    }

} 
```

这是我的标准生成的强类型视图：

```
@model test.Models.Comment

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Comment</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Text)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Text)
            @Html.ValidationMessageFor(model => model.Text)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

**问题是**：当我输入有效数据时，`TryUpdateModel()`返回`true`和

```
return View(new Comment()); 
```

应该显示空表单，因为传递了新的 Comment 空实例，但它仍然显示具有先前输入的值的表单。

请有人告诉我为什么。如何让它再次显示空表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:22:33.933

清除模型状态：

```
if (TryUpdateModel(new_comment))
{
    ModelState.Clear();
    return View(new Comment()); //no more problem here
} 
```

所有 HTML 助手在渲染它们的值时首先查看 ModelState，然后才在模型中查看。

* * *

或者甚至更好、更正确地使用[Redirect-After-Post](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式（即在成功 POST 后重定向）：

```
if (TryUpdateModel(new_comment))
{
    return RedirectToAction("Create");
} 
```

# php - 在xampp中关闭php错误报告？

> ID：10160859
> 
> 赞同：7
> 
> 时间：2012-04-15T09:20:38.083
> 
> 标签：php

我刚刚安装了xampp，到处都是错误。想要摆脱错误处理。我的变量只是烦人的错误。

我不确定在哪里可以找到 php.ini，它不存在于我的`C:\xampp\apache`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-15T09:46:35.880

在您的内部`php.ini`确保您必须`display_errors`关闭。据我了解，如果您将 display_errors 设置为 Off，则 error_reporting 指令不需要更改。

例子：

```
error_reporting = E_COMPILE_ERROR|E_ERROR|E_CORE_ERROR
display_errors = Off 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T05:57:09.557

在 php.ini 中，进行以下更改，

```
display_errors = Off 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-08T19:15:26.463

这现在已经很老了，但如果有人遇到这个问题，那么版本 5.6.3 就会出现 XAMMP 问题。我有同样的问题，错误显示设置为“关闭”，它仍然显示为在 phpinfo()

出于某种原因，他们在 php.ini 中添加了两次错误报告。*display_errors*显示在 php.ini 的第 99 行，然后再次显示在第 552 行。

因此，如果您向下滚动并禁用第一个，第二个仍设置为“打开”并覆盖第一个，使错误报告处于活动状态。

我确信这将在 XAMMP 的未来版本中得到解决，但我想在这里为任何来这里寻找这个问题的答案的人添加这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T12:28:19.667

如果你设置 display_errors=off 那么所有类型的错误都会出现。

但是如果你只想注意到错误，你可以设置 `error_reporting = E_ALL & ~E_NOTICE`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-20T00:06:00.270

Xampp 和其他 Web 应用程序有一个错误界面来显示程序员（和用户）执行错误或警告（通知）。为了修改 Xampp 显示错误的方式，您必须进入控制面板并打开 php.ini。在此文件中，您可以找到两点来修改它显示错误的方式：

1.  “display_errors = On”。从我的角度来看，它必须一直处于开启状态。如果你推迟，你将不会有任何关于坏句子的信息。

2.  “error_reporting=E_ALL”。这是关键点。更改它的值，您可以更改它显示错误的方式。php.ini 内部记录了所有选项。我最喜爱的：

    *   error_reporting=E_ALL  它显示了一切。适合调试。
    *   error_reporting=E_ALL & ~E_STRICT & ~E_DEPRECATED  它显示错误和通知（对调试非常重要），并且在下一个 php 版本中不显示建议和不推荐使用的功能。
    *   error_reporting=E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED  生产环境不包括通知。

我希望这适合你。

更多详情[https://community.apachefriends.org/f/viewtopic.php?f=17&t=50989](https://community.apachefriends.org/f/viewtopic.php?f=17&t=50989)

# iphone - 关于 iphone 方向的通知

> ID：10160868
> 
> 赞同：0
> 
> 时间：2012-04-15T09:22:32.420
> 
> 标签：iphone, objective-c

我想在用户将屏幕旋转为横向或纵向时收到通知，有可能吗？

我找到了几篇文章，但我没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:41:55.833

如果您想在设备旋转时收到通知，您可以`shouldAutorotateToInterfaceOrientation:`在视图控制器中实现该方法，也可以注册以接收`UIDeviceOrientationDidChangeNotification`.

在我们开始之前，设备方向和界面方向可以不同。设备可能是横向的，但界面可能保持纵向，具体取决于应用程序的编写方式。在更改界面方向以匹配设备方向之前不久发送设备通知。如果您不想改变界面方向，您应该`shouldAutorotateToInterfaceOrientation:`在视图控制器中实现该方法以返回`NO`。这将停止更新界面方向。

从您的问题来看，您似乎想收到通知，所以我认为您想使用第二种方法。您可以`UIDeviceOrientationChangeNotification`使用以下方法启用 s：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

有对应的：

```
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

您可以注册以正常方式接收通知，使用`NSNotificationCenter`和注册接收`UIDeviceOrientationDidChangeNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

最后，您将实现在收到通知时调用的方法，如下所示：

```
- (void)orientationChanged:(NSNotication *)notification {

    UIDeviceOrientation = [[UIDevice currentDevice] orientation];

    if (orientation == UIDeviceOrientationPortrait || 
        orientation == UIDeviceOrientationPortraitUpsideDown) {

        // Portrait

    } else {
        // Landscape
    }

} 
```

如您所见，可以使用 的 `orientation`实例方法访问方向`UIDevice`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:27:54.020

`shouldAutorotateToInterfaceOrientation`您需要在方法中以横向添加本地通知

试试这样：

```
if(interfaceOrientation == UIInterfaceOrientationLandscapeRight || UIInterfaceOrientationLandscapeLeft)

    {
         here schedule your local notification
    } 
```

# jquery - 加载条显示在图像旁边

> ID：10160870
> 
> 赞同：1
> 
> 时间：2012-04-15T09:22:41.480
> 
> 标签：jquery, html, css, wordpress

我为我的投资组合买了一个新设计。网站位于：[abconlinesolutions.com](http://www.abconlinesolutions.com) 在里面，我编辑了一些内容。

当您单击“作品集”时，它会在中心显示一个加载图像，然后加载一些内容（单击时将以 Lightbox 样式打开的框中的图像）。上面有一些菜单，上面写着“GPT 站点”、“个人站点”等。因此，当单击其中一个按钮时，会显示相同的加载程序图像。但它显示在图像框的后面。

我怎样才能让它在前面（而不是在盒子后面，这使得动画对用户可见）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:39:54.417

预加载器项是“cascade-window”元素上的背景图像。在该元素上添加了一个名为“cascade-window-prealoder”的类。这个类负责显示背景图像。

将此添加到您的 CSS 文件中：

```
.cascade_dark div.cascade div.cascade-window.cascade-window-prealoder:after {
    display:block;
    width: 40px;
    height: 40px;
    content: " ";
    position: absolute;
    top: 50%;
    left: 50%;
    background-color:#fff;
    background-image:url('images/dark/preloader.gif');
    z-index: 100;
} 
```

然后从这条规则中取消注释 background-image 属性：

```
.cascade_dark div.cascade div.cascade-window.cascade-window-prealoder {
    /**background-image:url('images/dark/preloader.gif');**/
} 
```

当你这样做时，你会注意到加载器 gif 上有一个背景颜色。可能您将不得不用透明的替换gif

# c# - 抽象泛型类型变量的声明

> ID：10160876
> 
> 赞同：5
> 
> 时间：2012-04-15T09:23:25.330
> 
> 标签：c#, generics, abstract-class

我的问题如下。我为一个显然不起作用的家庭项目进行了代码设计。也许您可以帮助我弄清楚“代码气味”的来源。

好的，让我们开始吧：我已经定义了一些类来包装不同类型的存档类型：

```
public abstract class Archive { }
public class ZipArchive : Archive { }
public class TarArchive : Archive { } 
```

为了处理这些档案，我定义了 Manager 类。定义所需行为的抽象行为，

```
public abstract class ArchiveManager<T> where T : Archive
{ 
    public abstract void OpenArchive(T archive);
} 
```

而具体的，实际上实现了特定的行为：

```
public class ZipArchiveManager : ArchiveManager<ZipArchive>
{
    public override void OpenArchive(ZipArchive archive) {  /* .. */ }
}

public class TarArchiveManager : ArchiveManager<TarArchive>
{
    public override void OpenArchive(TarArchive archive) {  /* .. */ }
} 
```

现在发生的情况是，在编译期间，我不知道我将处理哪种档案，所以我尝试了以下方法：

```
class Program
{
    static void Main(string[] args)
    {
        ArchiveManager<Archive> archiveManager = null;

        if (/*some condition*/) {            
            archiveManager = new ZipArchiveManager();
        }
        else {
            archiveManager = new TarArchiveManager();
        }
    }
} 
```

最终出现以下错误：

> 无法将类型“ZipArchiveManager”隐式转换为“ArchiveManager”

据我了解，泛型参数不能被隐式转换。有什么办法可以解决这个问题吗？这个代码/设计“有味道”吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:10:19.430

您可以使用逆变接口代替不实现任何功能的抽象类。在这种情况下，您只能将类型参数用作方法的返回值，而不能用作参数：

```
public interface IArchiveManager<out T>
    where T : Archive
{
    T OpenArchive(Stream stream);
} 
```

然后，只需在管理器类中实现接口：

```
public class ZipArchiveManager : IArchiveManager<ZipArchive>
{
    public ZipArchive OpenArchive(Stream stream)
    {
        // ...
    }
}

public class TarArchiveManager : IArchiveManager<TarArchive>
{
    public TarArchive OpenArchive(Stream stream)
    {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:46:58.460

我通过使用 c# .NET 4.0 的“动态”关键字找到了另一种方法......

```
class Program
{
    static void Main(string[] args)
    {
        dynamic archiveManager = null;

        if (/*some condition*/) {            
            archiveManager = new ZipArchiveManager();
        }
        else {
            archiveManager = new TarArchiveManager();
        }
    }
} 
```

对我来说就像一个魅力;）

# extjs - 网格列中的不同元素

> ID：10160878
> 
> 赞同：2
> 
> 时间：2012-04-15T09:23:45.053
> 
> 标签：extjs, grid

Ext JS 网格列中是否可以有不同的元素？如果是，我该怎么做？如果没有，是否有其他合适的解决方案？也许举个例子。

谢谢你的帮助！

亲切的问候，嘘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:17:49.160

What do you mean by different elements exactly?

You could use a [TemplateColumn](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Template), and put in any markup and record values that you want

You could use the [.renderer()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-cfg-renderer) method to return any markup that you want

You could use the [.getRowClass()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-getRowClass) method to return a different css class depending on content

If you want to put an actual ExtJS component in a grid column, you should use Skirtle's [ComponentColumn](http://skirtlesden.com/ux/component-column)

# c# - 实体框架中循环引用的 WCF Datacontract 序列化问题

> ID：10160881
> 
> 赞同：3
> 
> 时间：2012-04-15T09:24:21.303
> 
> 标签：c#, asp.net, wcf, entity-framework-4, wcf-serialization

我正在使用 Entity Framework 4，在一些实体之间有循环引用，但是我得到了 stackoverflow 异常，这是启用延迟加载的情况......

然后我将延迟加载启用为false，并使用`Include()`方法包含所有相关实体，但仍然出现相同的错误......需要帮助......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T15:53:27.550

我之前遇到过这个问题 - 我通过将 [IgnoreDataMember] 属性添加到导致循环引用的属性来解决它。这通常是引用父实体的导航属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:36:35.417

如果你不能删除你的循环，那么像[WCF 循环引用](http://chabster.blogspot.com/2008/02/wcf-cyclic-references-support.html "WCF 循环引用")之类的东西应该修复它

# javascript - 如何更改 jqgrid 工具栏和操作列中的删除图标

> ID：10160882
> 
> 赞同：2
> 
> 时间：2012-04-15T09:24:32.200
> 
> 标签：javascript, jqgrid

我试图用减号替换工具栏和操作列中的jqgrid默认删除图标

```
 $.extend($.jgrid.del, {
            delicon: 'ui-icon-minusthick'
}
); 
```

但默认图标（垃圾仍然显示）。如何用减号替换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:43:35.523

你应该使用

```
$.extend($.jgrid.nav, {delicon: "ui-icon-minusthick"}); 
```

更改导航器的“删除”图标。

要更改格式化程序“操作”的“删除”图标，您必须执行以下操作

```
loadComplete: function () {
    $(this).find("div.ui-inline-del>span")
        .removeClass("ui-icon-trash")
        .addClass("ui-icon-minusthick");
} 
```

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/CustomDelIcon.htm)：

![在此处输入图像描述](../Images/1b5a9d895449c532db5e6c62f81d2ece.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:38:34.267

这应该有效。

```
$('.ui-icon-trash').removeClass('ui-icon-trash').addClass('ui-icon-minusthick'); 
```

# java - 请帮我解决简单的Java程序

> ID：10160885
> 
> 赞同：0
> 
> 时间：2012-04-15T09:24:52.353
> 
> 标签：java, user-input, java.util.scanner

任务是：

编写一个程序，为在 XYZ 书店购买任意两本书的会员提供 20% 的折扣。（提示：使用常数变量获得 20% 的折扣。）

我已经打码了，但是不能提示书名，然后显示折扣价。请在下面查看我的编码并根据您的需要进行修改。

```
import java.util.Scanner;

public class Book_Discount {
  public static void main(String args[]) {
  public static final double d = 0.8;
  Scanner input = new Scanner(System.in);

  int purchases;
  double discounted_price;
  System.out.print("Enter value of purchases: ");

  purchases = input.nextInt();
  discounted_price = purchases * d; // Here discount calculation takes place

  // Displays discounted price
  System.out.println("Value of discounted price: " + discounted_price); 
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:26:28.673

为了提示书名，您可以编写如下内容：

```
/* Promt how many books */
System.out.print("How many books? ");
int bookCount = scanner.nextInt();
scanner.nextLine(); // finish the line...
double totalPrice = 0.0d; // create a counter for the total price

/* Ask for each book the name and price */
for (int i = 0; i < bookCount; ++i)
{
    System.out.print("Name of the book? ");
    String name = scanner.nextLine();  // get the name
    System.out.print("Price of the book? ");
    double price = scanner.nextDouble(); // get the price
    scanner.nextLine(); // finish the line
    totalPrice += price; // add the price to the counter
}

/* If you bought more than 1 book, you get discount */
if (bookCount >= 2)
{
    totalPrice *= 0.8d;
}

/* Print the resulting price */
System.out.printf("Total price to pay: %.2f%n", totalPrice); 
```

# iphone - 找不到协议声明

> ID：10160887
> 
> 赞同：27
> 
> 时间：2012-04-15T09:25:30.167
> 
> 标签：iphone, objective-c, ios, delegates, protocols

我有两个对象，它们都是视图控制器。第一个（我称之为 viewController1）声明了一个协议。第二个（不出所料，我将其命名为 viewController2）符合此协议。

XCode 给我一个构建错误：“找不到 viewController1 的协议声明”

我已经看到有关此主题的各种问题，并且我确定它与循环错误有关，但在我的情况下我看不到它......

下面的代码..

**viewController1.h**

```
@protocol viewController1Delegate;

#import "viewController2.h"

@interface viewController1 {

}

@end

@protocol viewController1Delegate <NSObject>

// Some methods

@end 
```

**视图控制器2.h**

```
#import "viewController1.h"

@interface viewController2 <viewController1Delegate> {

}

@end 
```

最初，我在 viewController1 中的导入行位于协议声明的上方。这完全阻止了该项目的建设。在SO上搜索后，我意识到了问题，并把两条线调换了。我现在收到警告（而不是错误）。该项目构建良好，实际上运行完美。但我还是觉得一定有什么不对的地方要警告。

现在，据我所知，当编译器到达 viewController1.h 时，它首先看到的是协议的声明。然后它导入 viewController.h 文件并看到它实现了这个协议。

如果它以相反的方式编译它们，它会首先查看 viewController2.h，然后它会做的第一件事是导入 viewController1.h，其中第一行是协议声明。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-15T09:36:01.080

删除此行`viewController1.h`：

```
#import "viewController2.h" 
```

问题是`viewController2`' 的接口在协议声明之前进行了预处理。

文件的一般结构应该是这样的：

```
@protocol viewController1Delegate;
@class viewController2;

@interface viewController1
@end

@protocol viewController1Delegate <NSObject>
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-27T16:17:44.947

对于那些可能需要它的人：

也可以通过在*ViewController2*的实现文件 (.m) 而不是头文件 (.h)中移动*ViewController1.h的导入来解决此问题。*

 *像这样：

ViewController1.h

```
#import ViewController2.h

@interface ViewController1 : UIViewController <ViewController2Delegate>
@end 
```

ViewController2.h

```
@protocol ViewController2Delegate;

@interface ViewController2
@end 
```

视图控制器2.m

```
#import ViewController2.h
#import ViewController1.h

@implementation ViewController2
@end 
```

这将解决发生错误的情况，因为*ViewController1.h*在协议声明之前被导入到*ViewController2.h中。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T03:05:48.133

```
 A.h:
    #import "B.h"  // A

    @class A;

    @protocol Delegate_A 
       (method....)
    @end

    @interface ViewController : A
    @property(nonatomic,strong)id<ViewControllerDelegate> preViewController_B;(protocol A)
    @end

    B.h:
    #import "A.h"  // A

    @class B;

    @protocol Delegate_B 
       (method....)
    @end

    @interface ViewController : B
    @property(nonatomic,strong)id<ViewControllerDelegate> preViewController_A;(protocol B)
    @end

    A.m:
    @interface A ()<preViewController_B>
    @end

    @implementation A
    (implement protocol....)
    end

    B.m:
    @interface B ()<preViewController_A>
    @end

    @implementation B
    (implement protocol....)
   @end 
```*

# oracle - 为什么我们需要全局临时表，它们的实际用例

> ID：10160890
> 
> 赞同：7
> 
> 时间：2012-04-15T09:26:26.427
> 
> 标签：oracle, temp-tables

我刚刚了解了全局临时表（我使用 oracle 作为数据库）并理解了它们，但无法知道它们的确切用途。

顾名思义，它们用于保存临时数据/会话，并且在关闭会话时，该会话的数据会消失。

可以是什么示例，我们需要使用它们的业务用例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T10:07:58.380

一个可能的用例是仅有权创建报告的用户。这些报告使用大量汇总数据，并且这些信息在不止一份报告中重复使用。因此，缓存该会话的信息是一个好主意，这可以通过使用临时表来完成。

另一个用例是您有一个报告框架并希望有一种简单的方法来查询信息。因此，您只需调用一个 PLSQL 包，将信息放在一个临时表中，在包完成后，您可以执行 SELECT * FROMtemporary_table。

# jsf - 从 Primefaces 组件中删除所有样式？

> ID：10160892
> 
> 赞同：27
> 
> 时间：2012-04-15T09:26:33.753
> 
> 标签：jsf, primefaces

是否可以从 Primefaces 组件中删除所有样式？我的意思是，组件集很好，但是必须手动覆盖每个组件的每一点以使组件样式适合我的应用程序的整体设计并不好。我不能用几个小时来使用 Firebug 来查找它使用的类等等。

那么有没有办法删除它，只使用组件的功能并提供您自己的设计，而不是被迫使用默认......或“主题”之一？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-15T12:53:37.080

将`primefaces.THEME`context 参数设置为`none`，您将获得一个没有样式的功能性 ui。

```
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>none</param-value>
</context-param> 
```

您无需花费数小时编辑样式。PrimeFaces 的样式是通过共享样式完成的`ui-widget-header`，`ui-widget-content`您可以通过[themeroller](http://jqueryui.com/themeroller/)网络表单进行自定义。我不认为 JSF 和主题可以比 PrimeFaces 更容易。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-17T20:28:18.573

PrimeFaces 默认插入两个 CSS 文件，`theme.css`并且`primefaces.css`. 您可以`theme.css`通过将以下内容删除`web.xml`：

```
<context-param>
  <param-name>primefaces.THEME</param-name>
  <param-value>none</param-value>
</context-param> 
```

然后您可以通过在以下位置创建一个空文件来覆盖`primefaces.css`：

```
WebContent/resources/primefaces/primefaces.css 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-15T09:35:21.937

**较旧的 PF 版本 (<6.0)**

如果您想将 primefaces 与您自己的 css 一起使用，使用[jQuery UI - ThemeRoller](http://jqueryui.com/themeroller/)创建您自己的主题不是更容易吗？

这是您如何[为 PrimeFaces 创建自己的主题的链接](http://www.youtube.com/watch?feature=player_embedded&v=e7OqkknhEtk#!)

**较新的 PF 版本（6.0 及更高版本）**

最近 PrimeFaces 引入了[“Designer API”](https://www.primefaces.org/introducing-primefaces-designer-api/)由于 PF 组件具有更多功能，因此主题滚轮不再那么适合了。Designer API 基于 SASS，允许您[创建非常好的主题](https://www.primefaces.org/designer-jsf/documentation.xhtml)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-15T10:04:26.660

正如@Daniel 所说，创建自己的主题。我只想补充：

对于部分样式，您不必触发所有内容，primefaces[用户指南](http://primefaces.org/documentation.html)涵盖了每个元素的样式类。它还包含其他非常有用的信息和提示（也是关于蒙皮的部分）。因此，当您发现自己正在为有关 primefaces 的任何事情而苦苦挣扎时，请使用它作为您的第一个来源。

# android - 制作单一的 Android 小部件

> ID：10160893
> 
> 赞同：0
> 
> 时间：2012-04-15T09:27:13.507
> 
> 标签：android, widget, homescreen

我正在开发 Android 小部件，我希望该小部件是单数的，这意味着如果用户将我的小部件添加到他的主屏幕，他应该无法再次将其添加到他的屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-15T16:36:47.820

您可以尝试使用一种解决方法来完成此操作：

1）在您的 AppWidgetProvider 中创建一个公共静态 Integer 变量来跟踪小部件 Id，最初将其设置为 null

2）为小部件创建一个配置活动（此处的说明[https://developer.android.com/guide/topics/appwidgets/index.html#Configuring](https://developer.android.com/guide/topics/appwidgets/index.html#Configuring)）

3) 在您的配置活动中，检查提供程序中变量的状态。如果已经创建了一个小部件（id 不等于 null），您可以使用 AlertDialog 向用户显示一条消息，然后将结果设置为取消。

您的代码可能如下所示：

在您的提供商中：

```
public class MyAppWidgetProvider extends AppWidgetProvider {
    public static Integer widgetId;

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
        //If the current widget has been deleted, set widget id to null again
        for(int i = 0; i < appWidgetIds.length; i++){
            if(widgetId == appWidgetIds[i]){
                widgetId = null;
            }
        }
        super.onDeleted(context, appWidgetIds);
    }
} 
```

在您的配置活动中

```
public class ConfigurationActivity extends Activity {
    public int appWidgetId;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {
            appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,  AppWidgetManager.INVALID_APPWIDGET_ID);
        }

        if(MyAppWidgetProvider.widgetId != null){
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Widget already created");
            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() { 
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Intent resultValue = new Intent();
                    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
                    setResult(RESULT_CANCELED, resultValue);
                    finish();
                }
            });
            AlertDialog dialog = builder.create();
            dialog.show();
        } else {
            MyAppWidgetProvider.widgetId = appWidgetId;
            Intent resultValue = new Intent();   
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
            setResult(RESULT_OK, resultValue);      
            finish();
        }
    }
} 
```

# android - 背景在运行时绘制为黑色

> ID：10160894
> 
> 赞同：0
> 
> 时间：2012-04-15T09:27:15.393
> 
> 标签：android, background

我正在尝试为 Android 开发一个应用程序，但我遇到了一些问题。我有一个主要的 RelativeLayout，它有一个漂亮的背景图像。当我通过 AVD（通过 Eclipse）运行它时，它可以工作并且看起来很好，但是当我尝试在我的 Galaxy Nexus 手机上测试它时，它的背景是纯黑色的。我该如何解决这个问题？

主要布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/GPRelativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/gempouchbg"
android:orientation="vertical"> 
```

它与一些标题布局合并。

```
 <include
    android:id="@+id/headerMerge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="45dp"
    layout="@layout/header" /> 
```

谁能帮我？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:30:30.803

由于您使用图像来设置 relativelayout 的背景，因此在所有情况下它必须看起来相同。

如果您对您的背景不满意，那么您必须更改您的案例中的图像并尝试。

将您的图像放在可绘制文件夹中并尝试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:31:27.317

我已经解决了这个问题，背景图像尺寸太大了，我需要将其裁剪为 640x640，它解决了我的问题。希望它对任何人都有帮助。

# c# - MonoDevelop/MonoDroid 项目/构建错误：不是有效的 base-64 字符串

> ID：10160895
> 
> 赞同：1
> 
> 时间：2012-04-15T09:27:24.843
> 
> 标签：c#, monodevelop, xamarin.android

我下载了 MonoDroid 开发环境。如果我创建一个新的“Android 应用程序的 Mono”项目，或者如果我在 MonoDevelop 中导入一个示例项目，我会立即在消息日志中弹出以下两条错误消息（并且无法构建/运行该项目）：

```
Error - 16:49:38 - Error running resgen
System.FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 
   at System.Convert.FromBase64String(String s)
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectService.GetProjectBuilder(TargetRuntime runtime, String toolsVersion, String file)
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectHandler.GetProjectBuilder()
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectHandler.RunTarget(IProgressMonitor monitor, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.SolutionItem.OnRunTarget(IProgressMonitor monitor, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.SolutionEntityItem.OnRunTarget(IProgressMonitor monitor, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.DefaultProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.ProjectServiceExtension.RunTarget(IProgressMonitor monitor, IBuildTarget item, String target, ConfigurationSelector configuration)
   at MonoDevelop.Projects.SolutionItem.RunTarget(IProgressMonitor monitor, String target, ConfigurationSelector configuration)
   at MonoDevelop.MonoDroid.MonoDroidProject.<RunResgen>b__13(Object )

Error - 16:49:38 - Parser database for project 'MonoA3 could not be loaded
System.FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 
   at System.Convert.FromBase64String(String s)
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectService.GetProjectBuilder(TargetRuntime runtime, String toolsVersion, String file)
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectHandler.GetProjectBuilder()
   at MonoDevelop.Projects.Formats.MSBuild.MSBuildProjectHandler.<MonoDevelop.Projects.Extensions.IAssemblyReferenceHandler.GetAssemblyReferences>d__2.MoveNext()
   at MonoDevelop.Projects.DotNetProject.<GetReferencedAssemblies>d__f.MoveNext()
   at MonoDevelop.Projects.Dom.Serialization.ProjectCodeCompletionDatabase.UpdateFromProject()
   at MonoDevelop.Projects.Dom.Serialization.ProjectCodeCompletionDatabase..ctor(Project project, ParserDatabase pdb)
   at MonoDevelop.Projects.Dom.Serialization.ParserDatabase.LoadProjectDom(Project project)
   at MonoDevelop.Projects.Dom.Parser.ProjectDomService.Load(Project project) 
```

我多次卸载并重新安装了 MonoDevelop（V2.8.8.4，自动安装在德文版）和 MonoDroid（4.0.6），但仍然收到相同的错误消息（操作系统是 Win 7 Sp1）。在虚拟机（Win Vista，英文版）中，我可以运行它。我的问题是，我看不到导致问题的字符串。[我在这里](http://monodevelop.sourcearchive.com/documentation/2.8.5plus-pdfsg-1/MSBuildProjectService_8cs_source.html)找到了导致此异常的代码块：

```
Process p = null;
try {
    p = runtime.ExecuteAssembly (pinfo);
    p.StandardInput.WriteLine (Process.GetCurrentProcess ().Id.ToString ());
    string sref = p.StandardError.ReadLine ();
    byte[] data = Convert.FromBase64String (sref);
    MemoryStream ms = new MemoryStream (data);
    BinaryFormatter bf = new BinaryFormatter ();
    builder = new RemoteBuildEngine (p, (IBuildEngine) bf.Deserialize (ms));
} catch {
    if (p != null) {
        try {
            p.Kill ();
        } catch { }
    }
    throw;
} 
```

使用 TargetRuntime 运行时，ProcessStartInfo pinfo。看起来进程返回了一个不正确的 Base64 字符串的 StandardError。如何访问此流程的 StandardError 输出？我来自 Java 世界，我对 Mono/.NET 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:12:02.203

我现在只是在调查这个错误。只是为了确认一下，您是说它在英文版的 Windows Vista 上运行良好，但是如果您使用德文版的 Windows 7 会引发异常？我将使用相同的软件版本在英文版的 Windows 7 上进行测试，看看我是否可以触发相同的问题。

# extjs - 组合框不在 extjs 4 mvc 环境中运行？

> ID：10160904
> 
> 赞同：1
> 
> 时间：2012-04-15T09:28:47.500
> 
> 标签：extjs, sencha-touch, extjs4, sencha-touch-2

我试图让一个组合框运行，但是当我将它添加到我的表单时，表单不显示。

这是我的表单代码：

```
 Ext.define("Screener.view.Pharmacyform", {

          xtype: 'pharmacyform',
    extend: 'Ext.form.Panel',
    requires: ['Ext.tab.Panel','Ext.form.FieldSet'],

    config:{
         styleHtmlContent: true,
            xtype:'orderform',
            autoscroll: true,

          items:[{
                  xtype: 'fieldset',
                  title: 'Pharmacy Order',

         items: [
            {
                xtype: 'textfield',
                name : 'name',
                label: 'Name'
            },{
                {xtype: 'combo',
    fieldLabel: 'Combobox',
    name:'drugdrug',
    id:'combodrug',

    store: Ext.create('Screener.store.Drugs',{
                            storeId: 'drugstore'

                        }),
                        displayField: 'drugname',
                        valueField: 'drugname',
                        queryMode: 'local',
                        triggerAction: 'all'

        }

              ]
    }]

    }

    }); 
```

药店代码：

```
/*
 * This store loads the drugs from file 'drugs.json'
 * Note: there is no writer attached, so changes will
 * only occur in local cache
 */

    Ext.define('Screener.store.Drugs', {
        extend: 'Ext.data.Store',
    storeId: 'drugStore',

        config: {
            model: 'Screener.model.Drug',
            proxy: {
                type: 'ajax',
                url : 'drugs.json',
                reader: 'json',     
                },
            autoLoad: true

        }
    }); 
```

我是 extjs 的新手，请告诉我如何让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:07:39.720

你没有指定这么多。为了能够帮助您，我需要一个工作示例和您正在使用的煎茶版本。

我从表面上看到的是您有两个商店：第一个在组合框定义中定义为“内联”。该商店不是 Ext.store.Store 的后代，因此它不起作用。

第二个似乎几乎是正确的，但由于您正在实例化第一个，因此未使用它。

尝试将视图中商店的定义更改为：

```
...
 fieldLabel: 'Combobox',
    name:'drugdrug',
    id:'combodrug',

    store: 'drugStore'
... 
```

此外，您并不是说您是否在控制台中遇到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:11:39.100

问题是您正在按名称引用存储，并且您需要在加载视图之前加载该存储。你有三个选择：

引用该视图的控制器中的store（.stores[]），并在视图之前加载控制器

在 application.stores[] 中引用 store

通过引用而不是名称来设置存储，例如：

```
{
xtype:'combobox',
store: new Ext.data.Store({model:'somemodel'}),
...
} 
```

最后一个选项可能更好，因为组合通常在他们自己的商店中效果更好。例如，4.1RC2 中有一个错误，您不能将分页与共享存储一起使用。在这种情况下，请确保您将代理放在模型上，以便具有相同模型的商店之间没有代码重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:26:40.987

嘿伙计，你应该添加一个声明

renderTo:Ext.getBody()

# facebook-graph-api - 仅给定实体 ID，我如何判断它是否是页面/应用程序/用户？

> ID：10160906
> 
> 赞同：0
> 
> 时间：2012-04-15T09:28:56.230
> 
> 标签：facebook-graph-api

例如，如果给我 ID`128740590570428`并查询[http://graph.facebook.com/128740590570428](http://graph.facebook.com/128740590570428)，我如何判断这是页面、用户还是应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:30:53.780

将 metadata=1 添加到获取参数。“类型”将在元数据中。

例如。 [http://graph.facebook.com/128740590570428?metadata=1](http://graph.facebook.com/128740590570428?metadata=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:22:01.283

[从这里的](https://developers.facebook.com/docs/reference/api/)facebook 图形 API 文档

所有对象都以相同的方式访问，因此使用图形 api，您可能无法判断给定 ID 是否返回用户、页面或事件对象。

![在此处输入图像描述](../Images/f57e4d7607d272f322f79dcbbefea17d.png)

您必须自己编写规则才能从结果中识别对象的类型。
我希望这有帮助。

谢谢

# php - 使用 PHP 审查电子邮件

> ID：10160907
> 
> 赞同：1
> 
> 时间：2012-04-15T09:29:03.393
> 
> 标签：php, email

我正在使用这个简单的代码：

```
$raw = 'text hi@li.com text';
$raw = preg_replace('<[\w.]+@[\w.]+>', '***@$2', $raw); 
```

我应该得到输出，比如`***@li.com`；当我得到`***@`

我无法调试它，我不知道怎么回事。

* * *

所以解决方案是

```
preg_replace('<([\w.]+)@([\w.]+)>', '***@$2', $raw); 
```

我必须添加 () 才能组成一个组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:31:51.567

```
$raw = ' hi@li.com ';
$raw = preg_replace('/[^@]+@(.+)/', '***@$1', $raw); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T09:33:50.817

您需要通过添加 () 创建一个组，顺便说一句，它将是 1 美元：

```
$raw = ' hi@li.com ';
$raw = preg_replace('/[^@]+@([^\s]+)/', '***@$1', $raw); 
```

还修改了 .+ tp [^\s]+ 所以它只“吃”了电子邮件而不是它后面的文本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T09:32:19.497

这里没有正则表达式：

```
$raw = 'hi@li.com';
$raw = explode('@', $raw);
array_shift($raw);
$raw = '***@'.implode('', $raw); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:38:11.280

正则表达式对于这项任务来说有点矫枉过正。使用该`explode()`函数和一点字符串连接就足够了。

```
$pieces = explode('@', $raw);
$raw = '***@' . $raw[count($raw) - 1]; 
```

请注意，我访问存储在`$raw`. 我没有使用`$raw[1]`，因为该`@`字符实际上可以用作电子邮件地址（如果它被引号包围），尽管它实际上有点不寻常。您可以在此处查看更多电子邮件地址示例：[http ://en.wikipedia.org/wiki/Email_address#Valid_email_addresses](http://en.wikipedia.org/wiki/Email_address#Valid_email_addresses)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T10:22:56.570

您也可以使用[strstr()](http://php.net/manual/en/function.strstr.php)函数。此外，使用真正的参数，您可以获得针前的部分并计算长度并用 asterix 填充。

```
<?php
$email  = 'name@example.com';

$len = strlen(strstr($email, '@', true));
$domain = strstr($email, '@');

echo str_repeat('*',$len).$domain; // prints ****@example.com
?> 
```

# .net - 是否可以查看在 dll 文件中创建的所有方法和类？

> ID：10160908
> 
> 赞同：4
> 
> 时间：2012-04-15T09:29:11.800
> 
> 标签：.net, dll

我真的可以在 dll 文件中看到驻留在 dll 文件中的方法或类吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T09:32:43.087

将 dll 添加到您的项目中，然后在 Visual Studio 中

> 查看菜单 -> 对象浏览器

您将能够看到公开公开的方法和属性
您还可以在工具[.Net Reflector](http://www.reflector.net/)中打开 .net dll ，它是非常强大的工具，如果代码没有被混淆，您可能会看到代码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T09:35:22.077

您可以按照其他答案中的讨论将它们添加到 Visual Studio 中，但是如果您想查看代码并且没有 .pdb，那么您可以使用 ILSpy（替代 .NET Reflector）

请参阅[ILSpy 下载页面](http://wiki.sharpdevelop.net/ilspy.ashx)

# plone - 克隆：plonesocial.auth.rpx->rpx_login_form 未找到

> ID：10160912
> 
> 赞同：1
> 
> 时间：2012-04-15T09:30:48.500
> 
> 标签：plone, rpx, plone-3.x

尝试使用 rpx 登录表单；页面最终被重定向到`http://site_name/rpx_login_form`

出现错误：此页面似乎不存在...</p>

对于给您带来的不便，我们深表歉意，但您尝试访问的页面不在此地址。您可以使用下面的链接来帮助您找到所需的内容。

如果您确定您的网址正确但遇到错误，请联系站点管理。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:14:38.207

听起来`rpx_skins`皮肤层没有正确注册。检查您的皮肤层配置（在 ZMI -> `portal_skins`-> 属性中）。

*免责声明：*我从未使用过这个插件，我只查看了[BitBucket 源代码库](https://bitbucket.org/cryu/plonesocial.auth.rpx/)。

# ios - ARC 为 iOS 重构了 Facebook Hackbook

> ID：10160914
> 
> 赞同：2
> 
> 时间：2012-04-15T09:31:20.137
> 
> 标签：ios, facebook, facebook-graph-api

我在重构 Facebook Hackbook for iOS 示例代码时遇到了困难。有谁知道已经完成的任何示例代码？

谢谢你的帮助。

# linux - 无法在 ubuntu 中创建 arm 项目：“未定义对 __gnu_thumb1_case_uqi 的引用”

> ID：10160931
> 
> 赞同：1
> 
> 时间：2012-04-15T09:34:36.890
> 
> 标签：linux, gcc, makefile, arm

我下载了这个[http://code.google.com/p/qcombbdbg/src/preloader](http://code.google.com/p/qcombbdbg/) 得到编译但不能编译 src/qcombbdbg

```
maysam@ubuntu:~/Desktop/QDebugger/src/qcombbdbg$ make
arm-linux-gnueabi-ld -Bstatic -x -X -Map qcombbdbg.map  -T devices/qcombbdbg-2.5.23Hd.script qcombbdbg.o rex.o interrupts.o mmu.o core.o trace.o relocator.o -o qcombbdbg.elf
arm-linux-gnueabi-ld: warning: section `.bss' type changed to PROGBITS
trace.o: In function `trace_vm_exec':
/home/maysam/Desktop/QDebugger/src/qcombbdbg/trace.c:840: undefined reference to `__gnu_thumb1_case_uqi'
relocator.o: In function `relocate_thumb_insn':
/home/maysam/Desktop/QDebugger/src/qcombbdbg/relocator.c:920: undefined reference to `__gnu_thumb1_case_uhi'
/home/maysam/Desktop/QDebugger/src/qcombbdbg/relocator.c:1336: undefined reference to `__gnu_thumb1_case_uqi'
make: *** [link] Error 1
maysam@ubuntu:~/Desktop/QDebugger/src/qcombbdbg$ 
```

我能做些什么来修复这些错误？

# c++ - unsigned long long 算术

> ID：10160935
> 
> 赞同：0
> 
> 时间：2012-04-15T09:35:25.843
> 
> 标签：c++, visual-c++, long-integer, unsigned

我想将两个相乘`unsigned integers`，但我希望结果在一个`unsigned long long`变量中

```
unsigned long long M;
unsigned int X;
unsigned int Y;

X = 999999;
Y = 9990;
M = X * Y; 
```

`M`应该是`9989990010`，但由于某种原因，它一直存在`1400055418`

我已经为此困扰了一个星期，我想我已经到了想哭的地步！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T09:37:01.273

您需要将`X`and`Y`转换为`long long`。

```
M = (unsigned long long)X * Y; 
```

足以投射其中之一，结果将基于较大的类型。

否则结果将是`int`，因此溢出。它将被分配到`long long`分配，但这为时已晚:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T09:41:56.060

X 和 Y 都只是整数，所以表达式 X*Y 的类型是整数。乘法完成后，该数字将转换为 long long。将 X 和 Y 做长，你会得到预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T09:39:04.423

将其中至少一个投射到`unsigned long long`. 另一个将被自动施放（提升）。这里的问题是：编译器如何知道您是想要相乘的截断结果`int`还是不截断的结果`long long`？

# wpf - 如何将文本框添加到 Gridview 的每个标题列并使用文本框过滤该列？

> ID：10160939
> 
> 赞同：1
> 
> 时间：2012-04-15T09:36:09.457
> 
> 标签：wpf, mvvm, mvvm-light, wpfdatagrid

我需要在 DataGrid 的每列标题中添加一个文本框并使用此文本框过滤该列？我使用这篇文章将文本框添加到列标题，但我不知道如何将它们绑定到 Viewmodel？ [数据网格自定义标题](https://stackoverflow.com/questions/6035082/datagrid-custom-header)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:50:09.433

您可以创建自定义类，它将代表您的可过滤标头，然后您可以将额外的可过滤标头集合放入您的视图模型中，这样您将公开两个集合 - 一个用于实际数据，一个用于标头绑定，然后绑定它。你也可以检查一下：[WPF Datagrid binding custom column headers](https://stackoverflow.com/questions/2189671/wpf-datagrid-binding-custom-column-headers)

# java - 软件导致连接中止：套接字写入错误

> ID：10160940
> 
> 赞同：1
> 
> 时间：2012-04-15T09:36:09.443
> 
> 标签：java, tcp, tcpclient

我有一个案例，客户端在与服务器建立连接后接收一个文件，并且当使用相同的连接（持久）时，我最终得到了上面提到的这个错误。下面是实现的代码：

```
Scanner in = new Scanner(file);

this.clientSocket = new Socket(this.host,this.port);

this.os = new DataOutputStream(this.clientSocket.getOutputStream());

this.is = this.clientSocket.getInputStream();

while(in.hasNextLine()){
  newFile = in.nextLine();
  System.out.println(newFile);

  this.os.writeBytes(newFile + '\n');
  this.os.flush();
  scanFileList();
  writeFile();

 } 
```

服务器端实现是：

```
 final class HttpRequest implements Runnable {
   final static String CRLF = "\r\n";
   Socket socket;
   static String dir;
   BufferedOutputStream outToClient = null;
   // Constructor
   public HttpRequest(Socket socket) throws Exception {
      this.socket = socket;
      dir = "C:\\Users\\";
 }

      // Implement the run() method of the Runnable interface.
 public void run() {
     try {

       // Get a reference to the socket's input and output streams.
       InputStream is = socket.getInputStream(); 
       outToClient = new BufferedOutputStream(socket.getOutputStream());
       processRequest(is,outToClient);
         } catch (Exception e) {
               System.out.println(e);
         }
 }

private void processRequest(InputStream is,BufferedOutputStream os) throws Exception {

    // Set up input stream filters.
    BufferedReader br = new BufferedReader(new InputStreamReader(is));

    // Get the request line of the HTTP request message.
    String fileName = br.readLine();

    // Prepend a "." so that file request is within the current directory.
    System.out.println(fileName);
    // Open the requested file.
    File myFile = null ;

    boolean fileExists = true ;

    myFile = new File(dir + fileName);

    FileInputStream fis = null ;
    try {
      fis = new FileInputStream(dir + fileName);
      System.out.println(fis);
    } catch (FileNotFoundException e) {
        fileExists = false ;
    }

    // Debug info for private use
    System.out.println("Incoming!!!");

   // Send the entity body.
   if (fileExists) {
    sendBytes(myFile, os);
    //fis.close();
   } 
   // Close streams and socket.
   is.close();
   os.close();
   br.close();
   socket.close();
   }

   private static void sendBytes(File myFile, 
    BufferedOutputStream os) throws Exception {
         // Construct a 1K buffer to hold bytes on their way to the socket.
         byte[] mybytearray = new byte[(int) myFile.length()];

         FileInputStream fis = null;
         // Copy requested file into the socket's output stream.
         try {
           fis = new FileInputStream(myFile);
         } catch (FileNotFoundException ex) {
            // Do exception handling
         }
         BufferedInputStream bis = new BufferedInputStream(fis);

         try {
           bis.read(mybytearray, 0, mybytearray.length);
           os.write(mybytearray, 0, mybytearray.length);
           os.flush();

           // File sent, exit the main method
           return;
         } catch (IOException ex) {
         // Do exception handling
           }
        }

   } 
```

当客户端的程序尝试通过以下方式写入服务器时会发生错误：this.os.writebytes(newFile + /n);

```
 Testfile01.bmp

  writing

  saved

  Testfile02.bmp

Exception in thread "main" java.net.SocketException: Socket closed
at java.net.SocketOutputStream.socketWrite(Unknown Source)
at java.net.SocketOutputStream.write(Unknown Source)
at java.io.DataOutputStream.writeBytes(Unknown Source)
at TCPClientPersistentNp.openSocket(TCPClientPersistentNp.java:53)
at TCPClient.main(TCPClient.java:66) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:49:43.227

这是在你的代码中做什么？

```
is.close();
os.close();
br.close();
socket.close(); 
```

您在处理每个请求后明确关闭所有内容？你说这是一个*持久*连接的实现吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:51:17.657

我不会尝试详细阅读您的代码（请参阅上面的评论...），但显然有一些非常奇怪/错误的地方。

简而言之，如果你要与基于 HTTP 的服务器通信，你不能只打开一个套接字并写东西。您的客户端必须创建格式良好的 HTTP 请求，并处理返回的 HTTP 响应。

客户端的异常正在发生，因为服务器端......实际上是您的代码......已经关闭了另一端的连接。

# android - 如何防止应用程序自动卸载？

> ID：10160944
> 
> 赞同：0
> 
> 时间：2012-04-15T09:37:11.997
> 
> 标签：android, uninstallation

我的应用程序的一些用户说应用程序突然从他们的手机中卸载。不止一位用户举报。可能是什么原因，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:10:02.400

> 可能是什么原因？

也许您的用户感到困惑。例如，也许您正在玩一些`PackageManager`技巧并最终禁用您的启动器活动。用户可能会误以为您的应用已被卸载，即使它已安装。

或者，也许您的用户喝醉了。

> 我怎样才能防止这种情况发生？

不要禁用您的启动器活动。

或者，要求您的用户在饮酒时不要使用您的应用。

> 谷歌有卸载应用程序的政策吗？

仅在可识别的恶意软件的情况下，在这种情况下，它将是您应用程序的所有副本，而不是某个子集。

# wpf - 如何使用 WPF MVVM prism 技术将数据绑定到模板化组合框？

> ID：10160948
> 
> 赞同：1
> 
> 时间：2012-04-15T09:38:29.843
> 
> 标签：wpf, mvvm, combobox

```
 Am very very beginner in WPF and MVVM architcture using PRISM. 
```

如何将数据绑定到模板组合框？我有一个可观察的字符串集合，它是主数据和视图模型中类型的实体列表。observablecollection = {data1，data2，data3，data4，data5，..}实体{字符串名称；整数价格价值；} List = {{data1,13}, {data5,23} } 当观察集合与数据实体之一匹配时，应选中组合框的复选框，其值应显示在文本框中 在 xaml 标记中有一个模板化的组合框将文本框和复选框绑定到字符串的上述 observablecollection。还有另一个文本框包含实体的一个属性。必须检查模板化组合框的所有实体列表共有的字符串。

```
 Pls help in writing up the markup  and the conditions to bind the data to templated combo box and textbox. 
```

出现错误或无法正确编码

# jquery - 通过 jQuery 在 DIV 之间复制选定的 CSS 样式

> ID：10160954
> 
> 赞同：1
> 
> 时间：2012-04-15T09:39:47.427
> 
> 标签：jquery, css, html

我想将一些 CSS 样式从一个 DIV 复制到另一个 DIV。

1.  单击“一个”DIV

2.  然后 jQuery 从 ARRAY 读取 CSS 属性列表

3.  然后将这些属性从 DIV "ONE" 复制到 DIV "TWO"。

这是我的尝试，但它不起作用。它出什么问题了？

[“JsFiddle 示例”](http://jsfiddle.net/ynternet/meU9M/1/)。

HTML

```
 <div class="one">Click HERE on this DIV, to TRANSFER CSS properties From this ONE</div>
 <div class="two">To this TWO</div> 
```

CSS

```
* {
   background-color:gray;
}
.one {
   color: red;
   font-size:12px;
   width: 100px;
   height: 100px;
   background-color: white;
   margin: 20px;
   padding: 20px;
   font-weight: bold;
}
.two {
   font-size:20px;
   color: blue;
   width: 200px;
   height: 200px;
   background-color: yellow;
   margin: 20px;
   padding: 20px;
} 
```

jQuery

```
 $(document).ready(function(){
     $("div.one").click(function(){
         var $array = ['color','width','height', 'background-color', 'font-weight', 'font-size'];
         $(this).each( $array , function(item, value){
             $("div.two").css(value, $(this).css(value));
         });
     });
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:44:07.380

1.  [**`jQuery`**](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)在 JSFiddle 的左侧面板中选择。
    ![](../Images/e06c0302c4805ec641dbe83c304c80cd.png)
2.  使用[`$.each(array, fn)`](http://api.jquery.com/jQuery.each/)而不是[`$().each(array, fn)`](http://api.jquery.com/each/).
3.  存储`$(this)`在变量中，例如`$this = $(this)`. 在循环内部，`this`指的是数组元素，*而不是*被点击的 DOM 元素。
4.  （非关键）不要在非 jQuery 对象前加上`$`.

## 演示：http: [//jsfiddle.net/meU9M/2/](http://jsfiddle.net/meU9M/2/)

```
$(document).ready(function(){
    $("div.one").click(function(){
        var array = ['color','width','height', 'background-color', 'font-weight', 'font-size'];
        var $this = $(this);
        $.each( array , function(item, value) {
            $("div.two").css(value, $this.css(value));
        });
    });
}); 
```

# ruby-on-rails - 仅在特定条件下更改布局

> ID：10160957
> 
> 赞同：3
> 
> 时间：2012-04-15T09:40:09.600
> 
> 标签：ruby-on-rails, layout

在我的 gem 中，我只想在特定条件下更改布局。

我知道我可以有一个指定布局的方法，但是我怎样才能在那个方法中指向当前布局呢？我知道它`_layout`指向布局名称，但是如果在指定布局的方法中调用它会导致堆栈溢出。

这是我的澄清代码（在我的引擎的应用程序控制器中）：

```
layout :get_layout

def get_layout

  current = _layout # this is what I want, but causes a stack overflow
  request.path_info.include?( '/baco/' ) ? 'baco' : current

end 
```

例如：带有这个gem的应用程序指定了一个名为'qday'的布局，现在如果路径包含'baco'，gem需要更改布局，但如果不包含，它应该呈现'qday'。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T11:47:51.777

您似乎一直在尝试做的是设置布局，如果您不想更改它，请将其设置为原来的样子。相反，由于递归，我认为你应该只在你的条件成立的情况下设置布局。

```
before_filter set_baco_layout

def set_baco_layout
  self.class.layout "baco" if request.path_info.include?( '/baco/' )
end 
```

但是，如果您的引擎控制器每个都调用布局，这将是一个更简洁的设计。

```
class Baco::BatsController < ApplicationController
  layout "baco"
  ... 
```

这可能看起来并不干燥，但它是一个更清洁的步骤。

为了解决 DRY 问题，我使用了继承。有一个基础控制器类，它设置布局并从您的基础继承您的其他控制器。

```
class Baco::BaseController < ApplicaitonController
  layout "baco"
end

class Baco::BatsController < Baco::BaseContoller
  ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T11:31:58.203

尝试：

```
before_filter only: [:index, :show, :edit, :new] do
  render layout: 'baco' if request.path_info.include? '/baco/'
end 
```

顺便说一句，Rails 允许您在不编码的情况下使用每个控制器的布局。只需在您的控制器之后命名它，但`controller`在末尾没有（如`users.html.haml`）并将其放入您的`/views/layouts/`目录。只是为了考虑...

# c# - 如何处理在 WPF TreeView 中显示数据的大延迟

> ID：10160959
> 
> 赞同：1
> 
> 时间：2012-04-15T09:40:26.770
> 
> 标签：c#, wpf, xaml, treeview, delay

我正在使用 WPF TreeView 向用户显示统计信息。TreeView 通过 MVVM 绑定到一堆对象。

有时，当 TreeNode 确实包含很多项目时，显示所有这些项目需要几秒钟的时间。在此期间，应用程序似乎卡住了。

我希望 TreeView 在此延迟期间显示响应。

如果我在 WinForms 中执行此操作，我会显示某种加载图标，并在后台线程中进行计算，之后我会更新相应的 TreeNode。

在 WPF 中处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:46:55.277

您需要使用线程，以便您的应用程序在处理大量数据时不会出现卡顿。

例子：

在我正在开发的应用程序中，我需要在所有文件夹中搜索特定文件。这会冻结应用程序（甚至不让我最小化窗口），直到它完成整个搜索。

为了避免这种情况，我使用了一个叫做 BackgroundWorker 的东西，它可以让我在后台执行搜索。这意味着我仍然可以控制我的应用程序，同时它在后台进行繁重的工作。

Backgroundworker 还有一个 WorkerReportsProgress 属性。启用此功能后，您可以轻松更新进度条或百分比计数器，让用户知道在工作时发生了什么。

它在 Professional C# 4 and .NET 4 一书中得到了很好的解释。它由 Wrox 出版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:55:13.317

1.  使用线程让 UI 呼吸。

2.  仅在用户请求时才加载根节点`TreeView`和子节点，方法是单击 [+]。

3.  使用[数据虚拟化](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)加载，因此*只*显示 UI 上实际可见的数据。

通过结合这些技术，即使您已经使用了其中的一部分，也会显着提高性能。

# jquery - 动态更改嵌入 svg 图像的颜色

> ID：10160960
> 
> 赞同：2
> 
> 时间：2012-04-15T09:40:45.193
> 
> 标签：jquery, dynamic, colors, svg

我正在尝试实现一个 SVG 徽标，并希望在事件中动态更改它的颜色。

目前我只是简单地嵌入了它：

```
<embed class="logo" src="images/logo.svg" type="image/svg+xml"    pluginspage="http://www.adobe.com/svg/viewer/install/" /> 
```

然后，我使用这段 jQuery 将嵌入切换为 img 标记以支持 webkit 浏览器。

```
if ($.browser.webkit) {
            $(".logo").replaceWith("<img class=logo src=images/logo.svg type=image/svg+xml pluginspage=http://www.adobe.com/svg/viewer/install/ />")
            } 
```

是否可以使用此实现来操纵 SVG 的填充颜色？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:29:57.743

其他问题/答案建议使用 getSVGDocument 方法，但它似乎仅在 Firefox 中有效：http: [//jsfiddle.net/mihaifm/Kqd89/](http://jsfiddle.net/mihaifm/Kqd89/)

要么我做错了什么，要么问题的答案是否定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:02:54.610

您可以从 <embed> 元素中获取引用的 svg 的 DOM，但不能从 <img> 元素中获取。另请参阅[如何在 <img> 元素中访问 SVG 文件的内容？](https://stackoverflow.com/questions/8102528/how-do-you-access-the-contents-of-an-svg-file-in-an-img-element)

# python - Python os.system() 在命令尚未完成时自动退出

> ID：10160961
> 
> 赞同：2
> 
> 时间：2012-04-15T09:40:48.573
> 
> 标签：python, os.system

目前我正在使用python`os.system(cmd)`做一些日常工作。

这是一种情况，cmd需要5-6分钟才能完成，我手动运行这个cmd，它可以工作，但是当我把它放入时`os.system(cmd)`，`os.system(cmd)`当cmd还没有完成时会自动退出。

所以我的问题是：如何处理这个问题，设置超时值还是有更好的方法来完成这项工作？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:59:34.943

你试过这个`subprocess`模块吗？添加它以替换`os.system`其他较旧的`os`方法。以下内容几乎直接来自文档：

```
import os
import subprocess

proc = subprocess.Popen(cmd, shell=True)
pid, sts = os.waitpid(proc.pid, 0)

# you may check on this process later and kill it if it's taking too long
if proc.poll() in [whatever, ...]:
    os.kill(proc.pid) 
```

或者如果您正在尝试调试进程退出的原因：

```
import subprocess
import sys

try:
    retcode = subprocess.call(cmd, shell=True)
    if retcode < 0:
        print >>sys.stderr, "Child was terminated by signal", -retcode
    else:
        print >>sys.stderr, "Child returned", retcode
except OSError, e:
    print >>sys.stderr, "Execution failed:", e 
```

# jquery - IE 特定的 AJAX 访问问题

> ID：10160963
> 
> 赞同：2
> 
> 时间：2012-04-15T09:41:49.633
> 
> 标签：jquery, ajax, internet-explorer-9, yahoo-pipes

我在调试 AJAX 请求时遇到问题。（`async`因为是隧道）

无论如何，它在 Chrome 和 Firefox 上运行良好，但至少在 IE8/9 中失败。

```
var responseA = '';

$.ajax({
    type: 'GET',
    url: 'http://pipes.yahooapis.com/pipes/pipe.run?_id=xxxxxx&url=http%3A%2F%2Fwww.rottentomatoes.com%2Fm%2Fthe_hunger_games%2F&_render=json',
    async: true,
    dataType: 'json',
    success: function(text) {
        responseA = text;
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log(errorThrown);
    }
});

console.log(responseA);​ 
```

`errorThrown`投掷`LOG: No Transport`

我尝试添加`$.support.cors = true;`

尝试解决任何跨域问题，但现在我得到了

`LOG: Error: Access is denied.`（仅在 IE 中）给出了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:16:45.297

Internet Explorer 8（及以下）不支持 CORS，您必须代理他们的请求（通过同一域中的 PHP 脚本，该脚本调用远程脚本并返回输出）

# objective-c - GameCenter 说“错过方法”并且不报告分数

> ID：10160967
> 
> 赞同：3
> 
> 时间：2012-04-15T09:42:08.703
> 
> 标签：objective-c, xcode, game-center

我一直在寻找一些类似主题的答案，但我找不到适合我的问题的答案。

我在 viewDidLoad 中有这个

```
self.currentLeaderBoard = [leaderboards objectForKey:[defaults objectForKey:@"Level"]];

if ([GameCenterManager isGameCenterAvailable]) {

    self.gameCenterManager= [[GameCenterManager alloc] init];
    [self.gameCenterManager setDelegate: self];
    [self.gameCenterManager authenticateLocalUser];

} else {

    NSLog(@"Current device doesn't support GameCenter");

} 
```

我尝试以这种方式发送分数：

```
NSLog(@"Category %@", self.currentLeaderBoard);

[self.gameCenterManager reportScore: 20 forCategory: self.currentLeaderBoard];
[self.gameCenterManager reloadHighScoresForCategory: self.currentLeaderBoard]; 
```

我也添加了这个来修复，但它没有帮助：

```
- (void) processGameCenterAuth: (NSError*) error
{
    if(error == NULL)
    {
        [self.gameCenterManager reloadHighScoresForCategory: self.currentLeaderBoard];
        NSLog(@"GAMECENTER OK");
    }
    else
    {
        UIAlertView* alert= [[UIAlertView alloc] initWithTitle: @"Game Center Account Required" 
                                                        message: [NSString stringWithFormat: @"Reason: %@", [error localizedDescription]]
                                                       delegate: self cancelButtonTitle: @"Try Again..." otherButtonTitles: NULL];
        [alert show];
    }

} 
```

但效果总是一样的：

```
2012-04-15 11:34:31.987 Colors[40146:1bb03] authenticateWithCompletionHandler: enter
2012-04-15 11:34:32.009 Colors[40146:1bb03] authenticateWithCompletionHandler: exit
2012-04-15 11:34:32.010 Colors[40146:1bb03] NORMAL MODE
2012-04-15 11:34:33.163 Colors[40146:1bb03] GAMECENTER OK
2012-04-15 11:34:33.368 Colors[40146:1bb03] Missed Method
2012-04-15 11:34:33.773 Colors[40146:1bb03] Category 2
2012-04-15 11:34:33.851 Colors[40146:1bb03] Missed Method
2012-04-15 11:34:33.989 Colors[40146:1bb03] Missed Method 
```

正如您所看到的，它在应用程序开始运行时以及当我尝试报告分数时显示“Missed Method”。它根本不报告分数（我在模拟器上尝试了 2 个不同的帐户） - GC 中没有显示任何内容。当然，我检查了在 iTunes Connect 中是否正确设置了类别，并且它们似乎是正确的。 [http://cl.ly/183a2A2p1M0A2k2c3U2B](http://cl.ly/183a2A2p1M0A2k2c3U2B)

请告诉我我做错了什么以及如何解决它......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:03:26.577

我已经遇到了同样的问题。错过的方法不是一个大问题，你可以忽略它。

问题可能来自：

*   你的模拟器版本，如果你有 5.1 也许你应该尝试 4.3 它可以让你的分数神奇地出现 x)。
*   如果您的排行榜中只有一个用户，则基本上不会显示，请尝试制作多个帐户报告分数。

祝你好运

# android - ContentValues put 方法

> ID：10160968
> 
> 赞同：3
> 
> 时间：2012-04-15T09:42:22.807
> 
> 标签：android, android-intent

在数据库端，`checkInTime`并且`checkOutTime`是类型`TIMESTAMP`

在我的java代码中也是，`checkInTime`并且`checkOutTime`是类型`java.sql.Timestamp`

为了将记录插入数据库，我正在使用这段代码：

```
1\. ContentValues contentValues=new ContentValues();

    2\. contentValues.put(USER_ID, userId);
    3\. contentValues.put(ROOM_ID, roomId);
    4\. contentValues.put(CHECK_IN, checkInTime);
    5\. contentValues.put(CHECK_OUT, checkOutTime);

    6\. return database.insert(MRM_BOOKING_DETAILS_TABLE, null, contentValues); 
```

但是我在第 4 行和第 5 行遇到编译错误，因为他们不期望 java.sql.Timestamp 类型的东西

我看不到任何 C 的 put 方法将在其第二个参数中`ontentValues`接受类型。`java.sql.Timestamp`请建议在这种情况下如何通过，`java.sql.Timestamp`以便我也可以删除编译错误。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T11:40:05.033

我建议你使用`DATETIME`而不是`TIMESTAMP`. 它在处理日期和时间时更为通用。

此外，您可以在插入或读取数据库时使用 SimpleDateFormat 解析 DATETIME 值。

```
final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

* * *

**更新：**

尝试如下操作：

```
final SimpleDateFormat parser = new SimpleDateFormat("yyyy-MM-ddTHH:mm:ss.SSS");

contentValues.put(CHECK_IN, parser.format(checkInTime));
contentValues.put(CHECK_OUT, parser.format(checkOutTime)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:49:43.227

如果 checkInTime 和 checkOutTime 是第一个时间戳，那么在将 thm 存储到 contentvalue 之前，只需将它们转换为毫秒并存储它们，然后再将它们重新转换为您需要的格式。因为 ContentValue 不接受时间戳所以只需转换和存储，这样你就不会得到任何编译错误。

# java - 使用 MergeSort 处理用户输入

> ID：10160971
> 
> 赞同：1
> 
> 时间：2012-04-15T09:43:22.507
> 
> 标签：java

我想对一组输入（来自命令行参数）进行排序，在这里停留了 3 天，却没有发现我的代码错误……真的很绝望……

有人可以给我一个提示吗？

```
import java.util.Arrays;

public class MergeSorter 
{

    public MergeSorter(int[] anArray)
    {
        a = anArray;
    }
    public void sort()
    {
          if (a.length <= 1) return;
          int[] first = new int[a.length / 2];
          int[] second = new int[a.length - first.length];

          System.arraycopy(a, 0, first, 0, first.length);
          System.arraycopy(a, first.length, second, 0, second.length);

          MergeSorter firstSorter = new MergeSorter(first);
          MergeSorter secondSorter = new MergeSorter(second);
          firstSorter.sort();
          secondSorter.sort();
          merge(first, second);
    }
    private void merge(int[] first, int[] second)
    {
        int iFirst = 0;
        int iSecond = 0;
        int j = 0;
        while (iFirst < first.length && iSecond < second.length) 
        {
            if (first[iFirst] < second[iSecond])
            {
                a[j] = first[iFirst];
                iFirst++;
            }
            else
            {
                a[j] = second[iSecond];
                iSecond++;
            }
            j++;
        }
          System.arraycopy(first, iFirst, a, j, first.length - iFirst);
          System.arraycopy(second, iSecond, a, j, second.length - iSecond);
       }
    private int[] a;

    public static void main(String[] args)
    {
        int[] a = new int[args.length];
        for (int i = 0; i < args.length; i++) 
        {
            a[i] = Integer.parseInt(args[i]);
        }
        MergeSorter sorter = new MergeSorter(a);
        sorter.sort();
        System.out.println(Arrays.toString(a));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:04:41.430

如果这不是关于合并排序的练习，您可以简单地使用合并排序`Arrays.sort(array);`。

对于降序排序，您可以指定自己的比较器。

```
Arrays.sort(array, new Comparator<Integer>()
{
    public int compare(Integer i1, Integer i2)
    {
        return -i1.compareTo(i2);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T10:10:03.590

运行测试代码：

```
Random r = new Random();

int testCase = 0;
out: while (true) {
    System.out.println("Test case " + testCase++);

    //Create array of random length (from 0 to 999) and random content
    int[] a = new int[r.nextInt(1000)];
    for (int i = 0; i < a.length; i++)
        a[i] = r.nextInt();

    //Try to sort (in ascending order)
    MergeSorter sorter = new MergeSorter(a);
    sorter.sort();

    //Test if sorted
    for (int i = 0; i < a.length-1; i++) {
        if (a[i+1] < a[i]) //not ascending
        {
            System.out.println("Array is not sorted!");
            System.out.println(Arrays.toString(a));
            break out;
        }
    }
} 
```

找不到任何您的分拣机无法排序的情况（我将其运行到大约 1.000.000 个测试用例）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T10:15:35.313

它工作正常。试着写：

```
java MergeSorter 7 3 5 3 5 
```

它给：

```
[3,3,5,5,7] 
```

但是如果你写：

```
java MergeSorter 73535 
```

由于一个 int 参数，它给出与输入相同的值：

```
[73535] 
```

# php - 如何保存在php中生成的html代码？

> ID：10160975
> 
> 赞同：2
> 
> 时间：2012-04-15T09:44:11.560
> 
> 标签：php, html, forms

我正在使用 php 生成一些 html 代码

它在现在，

```
<textarea>
<html>
....
</html>
</textarea> 
```

我想做的是创建一个按钮**“另存为 html”**

当我按下它时，它有一个窗口另存为对话框，允许用户选择存储位置，

然后在确认时保存到那个地方（对话框不应该由我创建，使用 Windows 。）

工作流程是：首先我在服务器中保存了一个临时 html 文件，然后用户打开对话框，（我不需要担心“保存到部分”，只需要指定临时 html 文件路径），以及何时用户关闭，我删除临时文件。那么，如何实现呢？谢谢

再次感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:49:08.443

您不能只是将`<html>`标签放入`<textarea>`标签中，它不会那样工作。

我建议您使用预制解决方案，例如[TinyMCE](http://www.tinymce.com/)，它将为您处理大部分事情。[还可以使用HTML Purifier](http://htmlpurifier.org/)之类的东西在保存用户输入之前对其进行清理，因为有人可能会保存恶意脚本。

TinyMCE 网站上有很多关于如何使用它的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T09:50:40.333

您可以使用 php 标头函数执行此操作，如下所示（假设您的 html 已发布到此页面：

```
<?php

header('Content-Disposition: attachment; filename="filename.html"');
echo $_POST['html'];
?> 
```

将此 php 页面设置为该表单的目标，我想您将完成

编辑：但是你应该注意可能的 XSS 攻击，比如评论中提到的 Damien Pirsy，你总是可以清理输入，去掉不需要的东西，比如脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T10:00:27.900

PHP 在服务器端不要忘记。生成页面后，它就在客户端上。我认为用 javascript 做这种事情更有意义，尽管您也可以将数据发布到 PHP 页面，然后获取数据。

通过 POST 方法将“输入”数据发送到 PHP 页面：

```
<form action="savedata.php">
     <input id="someElement" name="someElementName" type="textarea" />
     <input type="submit" />
</form> 
```

在 PHP 端接收：

```
# savedata.php

$inputdata = $_POST["someElementName"];
$filename = "somefile.html";
file_put_contents($filename, $inputdata); 
```

然后你可以在 PHP 中有一个链接来下载文件。

```
echo "<a href='".$filename."'>Right-click, Save Target As...</a>"; 
```

之后，您可以像这样从服务器中删除文件：

```
unlink($filename); 
```

要打开保存文件对话框 - 重定向到文件，您的浏览器应打开保存文件对话框：

```
header('Content-type: text/plain'); 
header('Content-disposition: attachment; filename="$filename"'); 
```

要查看文件的预览，请创建一个 iframe：

```
echo "<iframe src='$filename' width=600 height=200 frameborder=0 />"; 
```

# jquery - Changing element p with input text field issue jquery

> ID：10160978
> 
> 赞同：3
> 
> 时间：2012-04-15T09:44:41.643
> 
> 标签：jquery

I am facing small issue while firing jquery event to replace element p or span with text field and onblur event replace back to p or span field.

Demo is here http://jsfiddle.net/yXcZG/

It works well for first time while clicking on p text, but failed when you repeat same process second time.

Can any one help me where should be the issue

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T09:55:57.347

[jQueries .on](http://api.jquery.com/on/) selecor is used to attach to dynamic content, eg ajax and what you are doing. Normally you would just use `$('.myClass').click(funcction(){});` but using a static class like you have done `$('.cmtedit').on(...` is problematic because once you clicked that class and it gets removed.. it no longer exists with the reference you created it with. So to use `.on` properly, you neeed to attach it to the `document` so it can always re attach to any dynamic content! :-)

> .on( events [, selector] [, data] , handler(eventObject) )

```
$(document).on('click', '.cmtedit', function (e) {
    console.log(this);
   TBox(this);
}); 
```

Works well here..

[http://jsfiddle.net/yXcZG/3/](http://jsfiddle.net/yXcZG/3/)

Also remember to remove `console.log();` if you are not usin Chrome or Firefox. It is not supported in IE at all!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T09:52:46.393

I think as you are removing the obj by doing

```
 $(obj).remove(); 
```

in the `TBox` function

so in the `RBox` function when you create it again you have to add click event handler

OR even better

I suggest you use

```
$(".cmtedit").live('click', function (e) { 
```

instead of

```
$(".cmtedit").on('click', function (e) { 
```

for reference [http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:57:15.107

You are not attaching the click event to the new <p> created in the RBox() function. The following code works: (Test if out here: [http://jsfiddle.net/yXcZG/5/](http://jsfiddle.net/yXcZG/5/))

```
$(".cmtedit").on('click', function (e) {
   TBox(this);
});

$("input").live('blur', function (e) {
   RBox(this);
});
function TBox(obj) {
        var id = $(obj).attr("id");

        var tid = id.replace("cmt_edit_", "cmt_tedit_");
        var input = $('<input />', { 'type': 'text', 'name': 'n' + tid, 'id': tid, 'class': 'text_box', 'value': $(obj).html() });
        $(obj).parent().append(input);
        $(obj).remove();
        input.focus();
}
function RBox(obj) {
    var id = $(obj).attr("id");

    var tid = id.replace("cmt_tedit_", "cmt_edit_");
    var input = $('<p />', { 'id': tid, 'class': 'cmtedit', 'html': $(obj).val() });
    $(obj).parent().append(input);
    $(obj).remove();

    $(".cmtedit").on('click', function (e) {
     TBox(this);
   });
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T10:11:14.057

If I were you though I would refactor it (live is expensive) and write it like this:

```
<style>
    ​#cmt_edit_323 input { display: none; }​
</style>

<div id="sample">
     <p id="cmt_edit_323" class="cmtedit"><span>Sample Text</span><input type="text"></input>    </p>
</div>​​​​​

<script>
$(".cmtedit").on('click', function (e) {
   TBox(this);
});

$(".cmtedit input").on('blur', function (e) {
   RBox(this);
});

function TBox(obj) {
        var input = $(obj).find("input");
        var span = $(obj).find("span");
        input.attr('value', span.text()).show().focus();
        span.hide();            

}
function RBox(obj) {
        var input = $(obj);
        var span = $(obj).parent().find("span");
        span.html(input.attr('value')).show();
        input.hide();
}​
</script> 
```

Check it here: [JSFiddle](http://jsfiddle.net/yXcZG/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T04:36:49.677

I couldn't make comment so I had to make it as an answer.

@ppumkin's answer was working with just a small issue - if you click out of the browser or switch tabs, two elements were added inside the parent.

I tried to check many other events to resolve this but with no luck. So the easiest solution for me was to do a simple check before append the element in the `RBox()` function:

```
if ($("#" + tid).length == 0) {
    $(obj).parent().append(input);
} 
```

Apart from this I used [**.on()**](https://api.jquery.com/on/) method for the `blur` as **[.live()](http://api.jquery.com/live/)** is deprecated and no longer recommended.

# javascript - Html5 websql如何在没有循环的情况下将xml插入本地数据库表

> ID：10160982
> 
> 赞同：1
> 
> 时间：2012-04-15T09:46:27.570
> 
> 标签：javascript, jquery, html

我有一个从 Web 服务器获得的 XML 变量，我想使用 jquery / javascript 将其插入本地数据库表而不循环（循环非常慢....），

我现在用于插入的代码是：

```
 $(xx).find("Customers").each(function () {
         var $this = $(this),
             CustID = $this.find("CustID").text(),
             CustName = $this.find("CustName").text(),
             City = $this.find("City").text(),
             PhoneNum = $this.find("PhoneNum").text()
         // guid = $this.find("guid").text(),
         //  postid = $this.find("postid").text(),
         //  url = $this.find("enclosure").attr('url');
         i++;
         db.transaction(function (tx) {
             tx.executeSql('INSERT INTO Customers (CustID, CustName, City, PhoneNum) VALUES (?,?,?,?)', [CustID, CustName, City, PhoneNum]);
         });
     }); 
```

XX 是一个 xml 变量。

有没有人有这样的例子？

谢谢，

# ios - UITableView 单元格行为不端，显示没有披露等等

> ID：10160986
> 
> 赞同：4
> 
> 时间：2012-04-15T09:46:58.720
> 
> 标签：ios, uitableview, storyboard

我有一个非常奇怪的问题，我的 UITableView 内容已经开始表现得很不正常。

1.  无论我将 line Separator 属性设置为什么，单元格之间都没有线条。
2.  披露插入符号不显示，即使它显示在情节提要编辑器中。
3.  在编辑模式下设置表格视图不会显示任何编辑小部件。单元格内容实际上完全不受影响（它应该为删除图标腾出空间，对吧？）。
4.  但是当从编辑模式转到“正常”模式时，单元格突然向右移动（没有动画）。向右移动的是单元格，而不是内容。我知道是因为我已经尝试过分组样式。

有人见过这个吗？有人有提示扔我吗？这个愚蠢的事情阻碍了我的应用程序的进步！

如果我可以添加任何信息以使我的问题更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:01:17.190

找到了。我忘记调用`[super layoutSubViews]`我的自定义单元类。呸！

# cakephp - 分页+在cakephp中搜索

> ID：10160989
> 
> 赞同：0
> 
> 时间：2012-04-15T09:47:58.623
> 
> 标签：cakephp, pagination, cakephp-1.3, cakephp-2.1

请帮助我如何在搜索结果中进行分页，我在这里发现了一些问题，但我仍然无法理解。

这就是我想做的，

用户填写输入搜索然后系统在分页中显示结果

如果用户单击分页链接，则系统将移动到目标分页，而不会丢失有关搜索输入的任何信息。

我发现搜索条件保存在会话中的信息，但我不知道如何制作。

我花了两天时间才成功，但仍然没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:14:56.717

```
$search_keyword =   $value_you_get_from_search_field || '';  
$this->paginate = array(
    ....
    'conditions' => array(
         'YOURMODEL.field LIKE' => '%' . $search_keyword . '%', // this condition will check for search value to corresponding field you want
         .....
     )
);

$search_results = $this->paginate(); // search result will contain query for your search with pagination 
```

要保存搜索字段的值，您必须将字段值设置为如下所示：

```
$this->set(compact('search_results', 'search_keyword')); 
```

你必须设计你的搜索字段，如下所示：

```
$this->Form->input('fieldname', array('type' => ...., 'value' => $search_keyword, ....)); 
```

**注意**在输入字段中，我将`value`属性设置为`$search_keyword`，它是从控制器发送的。最初是 '';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:06:31.720

你真的应该看看搜索插件： [https ://github.com/dereuromark/search](https://github.com/dereuromark/search)

它为您提供此功能，而无需重新发明轮子。它还使用“最佳实践”方法，如 PRG 和 LIKE 等易于扩展的搜索配置。

# javascript - 如何使用 JSON 在 JavaScript 中处理 Web 服务的 XML 响应数据

> ID：10160990
> 
> 赞同：0
> 
> 时间：2012-04-15T09:48:04.090
> 
> 标签：javascript, xml, web-services

我是处理 XML 响应数据的新手。我有一个 Web 服务，它检查 SQL 服务器数据库中的用户和他的密码并相应地返回响应。Web服务方法的代码如下；

```
<WebMethod()> _
    Public Function Authentication(ByVal username As String, ByVal password As String) As String

        'Public Function ConnectToSQL() As String
        Dim con As New SqlConnection
        Dim result As Boolean
        Dim response As String

        Try

            con.ConnectionString = "Data Source=TestServer;Initial Catalog=MyDB;Persist Security Info=True;User ID=myuser;Password=mypass"
            Dim cmd As New SqlCommand("SELECT username FROM user_detail WHERE username='" + username  + "' AND password='" + password + "'", con)
            con.Open()

            ' Execute Query
            Dim reader As SqlDataReader = cmd.ExecuteReader()
            result = reader.HasRows
        'Validate user info from database 
           If result = True Then
            response = "Valid user info..Thanks"
        Else
            response = " Not valid user info..Please Enter again, Thanks"
        End If

        If Not reader Is Nothing Then
            reader.Close()
            End If

        Catch ex As Exception
            MessageBox.Show("Error while connecting to SQL Server." & ex.Message)
        Finally
            con.Close() 'Whether there is error or not. Close the connection.
        End Try
        Return response 
    End Function
End Class 
```

响应为 XML 数据，如下图所示。（如果输入了有效的用户信息）

![有效响应](../Images/587362ef788a703c7f03c6e091921ad3.png)

现在我想在 Javascript 中创建一个视图，它从用户那里获取输入，然后通过这个 Web 服务从数据库中验证用户信息。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:13:16.727

您可以创建一个可以接受用户名和密码的表单

并使用 javascript SOAP 客户端提交到您的 Web 服务。因此，您需要发出 SOAP 请求并将用户名和密码传递给它验证的服务。您可以在此处查看使用 javascript 的使用 Web 服务的示例。

[最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript)

[http://www.guru4.net/articoli/javascript-soap-client/en/](http://www.guru4.net/articoli/javascript-soap-client/en/)

希望这会帮助你。

# c++ - C++ 从字符串中获取前 8 个符号

> ID：10160991
> 
> 赞同：0
> 
> 时间：2012-04-15T09:48:10.840
> 
> 标签：c++, string, function, for-loop

用户输入一个文本，然后我检查该字符串是否可以除以 8

```
if(text.length()%8==0) 
```

如果是，我取商。

```
int sk = text.length()/8; 
```

所以我需要从那个句子中取出每 8 个符号并转换成一个新的不同符号。例如，如果句子是 1234567890123456，则必须将其划分为 2 个不同的符号。12345678 = A 和 90123456 = B

为此，我知道我应该使用`for loop` 我已经这样做了：

```
if(text.length()%8==0){
            sk = text.length()/8;
            for(int m=1;m<=sk;m++){
                //change the text
            }
} 
```

`for loop`所以，我的问题是，为了看到想要的结果，写下什么？

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:53:48.397

您可以使用以下`replace`方法`std::string`：

```
if(text.length()%8==0){
        sk = text.length()/8;
        for(int m=1;m<=sk;m++){
            text.replace(sk, sk+8, newString);
        }
} 
```

当然，您需要执行一些检查。

# iphone - iPhone，来自 utf8 xml 的字符串，字符错误

> ID：10160992
> 
> 赞同：0
> 
> 时间：2012-04-15T09:48:15.630
> 
> 标签：iphone, ios, xml, utf-8, rss

我必须显示包含在我从网络上获得的 xml 文件中的文本。该文件以：

<?xml 版本="1.0" 编码="utf-8"?> ...

然后是文本节点，这样写：

<text><![CDATA[E ancora, il fascino delle cittÃ del nord, che con la primavera conquistano ore luce, o di isole dove la Pasqua Ã¨ un rito rimasto fedele nel tempo.Pasqua Ã¨ un'occasione pe.. .]]></text>

这是很好的 utf-8 格式文本吗？

我已经尝试了所有这些，但仍然无法将“Ã”替换为“à”和“Ã¨”替换为“è”：

```
text = ^the string from above^
NSData* data_text = [text dataUsingEncoding:NSUTF8StringEncoding];
NSString* text_c3 = [[NSString alloc] initWithBytes:[data_text bytes] length:[data_text length] encoding:NSUTF8StringEncoding];

const char* utfstring = "E ancora, il fascino delle cittÃ  del nord,";// [text UTF8String];
NSString* text_c1 = [[NSString alloc] initWithUTF8String:utfstring];
NSString* text_converted = [NSString stringWithCString:utfstring encoding:NSUTF8StringEncoding]; 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:25:47.523

从您的问题中无法判断 CDATA 部分是否正确 UTF-8 编码。由于编码数据是二进制数据，您需要发布二进制数据（即以十六进制表示）而不是一些文本。

此外，您的所有代码示例都依赖于以正确编码存储的源代码文件，这又无法从您的问题中确定。

我建议您使用一个像样的 XML 解析器来解析 XML 数据，例如内置的*NSXMLParser*类。当它遇到 CDATA 部分时，它将调用您的委托并将文本作为 UTF-8 编码的二进制数据传递，无论原始编码是什么。然后，您可以将其转换为字符串：

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)cdataBlock
{
    NSString *text = [NSString stringWithUTF8String: [cdataBlock bytes]];

    // do something with the text...
} 
```

并确保您将 XML 文件作为二进制数据检索，并将其作为 XML 数据传递给 XML 解析器。否则，您将有不必要的解码和编码，并且您可能会损坏编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:53:47.193

...

像这样添加标签

...

并使用

[请求 setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

和 [请求 setValue:[NSString stringWithFormat:@"%d", [json_data length]] forHTTPHeaderField:@"Content-Length"]; [请求 setHTTPBody:[[jsonRequest stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding] dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:28:13.477

NSURL *url = [NSURL URLWithString:@"http://www.yourURL.com"];

```
//NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"{\"createInvoice\":{\"client_id\":\"%@\",\"address\":\"\",\"invoice_title\":\"%@\",\"number\":\"\",\"date\":\"%@\",\"due_date\":\"%@\",\"late_fee\":\"\",\"schedule_date\":\"%@\",\"po_number\":\"\",\"status\":\"paid\",\"notes\":\"invoice notes\",\"terms\":\"invoice terms\",\"items\":[{\"name\":\"Test4\",\"type\":\"Product\",\"description\":\"\",\"unit_cost\":\"15\",\"quantity\":\"100\",\"discount\":\"10\",\"discount_type\":\"Percent\",\"tax1_name\":\"\",\"tax1_type\":\"\",\"tax2_name\":\"\",\"tax2_type\":\"\",\"tax1_percent\":\"\",\"tax2_percent\":\"\"}]}}",selected_Client_ID,invoiceTitleTxtFld.text,invoiveDateTxtFld.text,invoiceDueDateTxtFld.text,scheduleOnTxtFld.text] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"{\"updateInvoice\":{\"invoice_id\":\"%@\",\"client_id\":\"60105\",\"address\":\"ABS\",\"invoice_title\": \"%@\",\"number\":\"inv-7774 new\",\"date\":\"2012-03-30\",\"due_date\":\"2012-04-30\",\"late_fee\":\"\",\"schedule_date\":\"2012-03-31\",\"po_number\":\"PO-7770\",\"status\":\"paid\",\"notes\":\"invoice notes\",\"terms\":\"invoice terms\",\"items\":[{\"name\":\"Test4\",\"type\":\"Product\",\"description\":\"Test4 desc\",\"unit_cost\":\"15\",\"quantity\":\"100\",\"discount\":\"10\",\"discount_type\":\"Percent\",\"tax1_name\":\"\",\"tax1_type\":\"\",\"tax2_name\":\"\",\"tax2_type\":\"\",\"tax1_percent\":\"\",\"tax2_percent\":\"\"}]}}",delegate.invoice_ID,invoiceTitleTxtFld.text] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSData *json_data = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: json_data];
NSLog(@"%@",json_data);
//[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
//[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [json_data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:[[jsonRequest stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]
                      dataUsingEncoding:NSUTF8StringEncoding 
                      allowLossyConversion:YES]];

//  [NSURLConnection connectionWithRequest:[request autorelease] delegate:self]; 
```

NSUrlsConnection *conn_InvEdit = [[NSURLConnection alloc] initWithRequest:request delegate:self];

```
// Successful connection.
if (conn_InvEdit) {

    // [self initSpinner];
    // [self spinBegin];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData=data;
    [data release];
} 
// Unsuccessful connection.
else {

}  
// Clean up
[url release];
[request release];
// Close keypad.

Try with this code, If you still have any problem then send me your complete question at  akram.khan@mail.vinove.com. I'll send you sample app with solution. 
```

# iphone - cocos2d OpenGL 错误 0x0502 在 -[EAGLView swapBuffers]

> ID：10160995
> 
> 赞同：8
> 
> 时间：2012-04-15T09:49:21.027
> 
> 标签：iphone, ios, image, image-processing, cocos2d-iphone

我在我的 cocos2d 项目中实现[了 GPUImage 框架](https://github.com/BradLarson/GPUImage)，GPUImage 框架是一个 BSD 许可的 iOS 库，可让您将 GPU 加速过滤器和其他效果应用于图像、实时摄像机视频和电影。

当我调用任何一个 GPUImage 过滤器时，我得到“ cocos2d OpenGL error 0x0502 in -[EAGLView swapBuffers] ”错误。

你知道在这种情况下可能是什么问题吗？

谢谢和问候，普拉卡什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:08:52.647

我不知道您的代码在做什么，但我所看到的是，如果应用程序的方向从正常方向发生变化，有时会出现交换缓冲区问题。尝试在使用代码之前和之后打印主视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T12:51:28.003

我碰巧遇到了同样的问题。我发现以下帖子很有用： [iOS 和多个 OpenGL 视图](https://stackoverflow.com/questions/8111345/ios-and-multiple-opengl-views)

就我而言，cocos2d 文件没有必要的“setCurrentContext”命令，所以我将它添加到 CCEAGLView-ios.mm 中。它解决了我的问题。

```
(void) layoutSubviews
{
[renderer_ resizeFromLayer:(CAEAGLLayer*)self.layer];
size_ = [renderer_ backingSize];

[EAGLContext setCurrentContext: context_];
cocos2d::Size size;
size.width = size_.width;
size.height = size_.height;

cocos2d::Director::getInstance()->drawScene();
} 
```

# c# - 使用 C# 获取/设置“文件历史记录”（Windows 8）设置

> ID：10160999
> 
> 赞同：2
> 
> 时间：2012-04-15T09:49:54.250
> 
> 标签：c#, .net, .net-3.5, windows-8

我正在创建一个可以在 Windows 8（桌面）上运行的应用程序

我需要：

1.  使用户能够使用我的应用程序启动“文件历史记录”。我需要找到打开“文件历史记录”的命令行。

2.  我需要能够显示“文件历史记录”的当前设置。

我发现数据保存在“C:\Users\UserName\AppData\Local\Microsoft\Windows\FileHistory\Configuration.

信息保存在 xml 文件中。我不喜欢解析 XML 文件，尤其是在没有确切格式规范的情况下。所以我想知道是否还有其他地方可以从中获取“文件历史记录”设置信息。

另一件事是，由于某种原因，我有 2 个文件：config1 和 config2。文件之间有什么区别？哪个文件包含更准确的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:19:20.517

我找到了如何使用 C# 打开“文件历史记录”。

```
ProcessStartInfo startInfo = 
       new ProcessStartInfo("Control.exe",@"/name Microsoft.FileHistory");
startInfo.UseShellExecute = true;
Process.Start(startInfo); 
```

如果你想进入“恢复个人文件”导航项，你应该启动：

> “C:\Windows\System32\FileHistory.exe”