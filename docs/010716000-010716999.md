# StackOverflow 问答 10716000-10716999

# html - 哪个 CSS 更快？上限是否会提高速度？

> ID：10716004
> 
> 赞同：0
> 
> 时间：2012-05-23T08:14:37.050
> 
> 标签：html, css, performance, optimization, pagespeed

三码十六进制码有没有快捷方式，例如，黑色可以写两种方式

```
.black{color:#000}
.black{color:#000000} 
```

这可以`#DBDBDB`写得更短吗？因为`#DBD`不起作用。

还有什么更快，这有关系吗，我注意到 Firebug 以区分大小写的格式吐出颜色和其他一些变量。有关系吗？将所有内容都小写以便浏览器和用户可以更快地加载和呈现是否更快？

```
.webform{color:#dbdbdb}
.WebForm{color:#DBDBDB} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T08:17:31.067

> #DBDBDB 可以写得更短吗？由于#DBD 不起作用。

不。唯一比 6 进制颜色代码短的东西是 3 进制代码（仅适用于 XXYYZZ 颜色）和（某些）命名颜色（并且没有与 #DBDBDB 匹配的颜色）。

> 还有什么更快

停止微优化。如果存在差异，则差异不会很大，并且可能会因浏览器而异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T08:16:36.900

简单的答案是它没有明显的区别。这是一个过度思考优化的经典案例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:23:01.547

实际上有很多指定黑色的方法：

```
.black{color:#000} 
.black{color:#000000}
.black{color:black;}
.black{color:rgb(255,0,0);} 
```

[http://www.w3.org/TR/CSS21/syndata.html#color-units](http://www.w3.org/TR/CSS21/syndata.html#color-units)

如果任何浏览器的精度之间存在任何可测量的速度差异，我会感到非常惊讶。

`#DBDBDB`不能写得更紧凑，它相当于：`rgb(219,219,219)`. 在更短的符号中，您可以找到的最接近的符号`#DDD`是`rgb(221,221,221)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:17:26.987

在三个字母缩写中，每个字母都是重复的，所以`#DBD`变成`#DDBBDD`. 您不能缩短代码，例如`#DBDBDB`.

大写和小写字母之间没有性能差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T08:17:32.353

`#DBDBDB`不能写得更短。

速度没有区别。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T08:51:22.697

小写和大写在性能上没有区别，但值得一提的是，速记十六进制颜色可以在一定程度上减少 css 文件大小，这或多或少有助于节省带宽。

# ruby-on-rails - Controller中的Rails Exception执行查询实例变量？

> ID：10716006
> 
> 赞同：1
> 
> 时间：2012-05-23T08:14:42.550
> 
> 标签：ruby-on-rails, ruby, exception, activerecord, controllers

在我的 Rails 3.0.11 应用程序中，我们在控制器中有非常简单的代码：

```
def index
  @record = Record.valid # scope around 80,000 records
  asdfasdfsa # consider this is a typo to raise NameError Exception
end 
```

有趣的是，当遇到拼写错误时，应用程序似乎在引发异常之前首先查询/执行 @record 实例变量。查询花费将近 1 分钟来获取记录。所以在浏览器中，页面在进入异常模板之前会挂起很长时间。

如果我将@record 替换为局部变量“record”，则根本不会发生查询。有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T00:32:41.730

正如@Khronos 指出的那样，这是由于错误消息和评估变量造成的，但不是 to_s，而是`#inspect`.

在`actiondispatch/middleware/templates/rescues/diagnostic.erb`它调用`<%=h @exception.message %>`以显示错误。快速进入 irb 提供了这个花絮：

```
class Object ; def inspect; "foo" ; end ; end
 => nil 
a=Exception.new(Object)
 => #<Exception: #<Exception:0x10d8a4108>> 
a.message
 => foo 
```

所以我认为@exception.message 会在异常上调用inspect，这反过来可能会在控制器上调用inspect。虽然它在检查期间枚举整个对象，但它运行查询，但是当它运行 to_s 时，我认为它只为对象 id 丢弃所有这些。

我仍然有点模糊，但它至少与异常和检查有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:22:56.227

有关此问题的详细信息，请参阅我的博客文章[Ruby's Inspect Considered Harmful](http://devblog.agworld.com.au/post/24392662859/rubys-inspect-considered-harmful)。简而言之：

1.  NameError`inspect`在格式化其错误消息时调用
2.  *递归*`inspect`调用`inspect`所有实例变量的默认实现
**   NameError*丢弃**超过 65 个字符*`inspect`的结果**   对我们来说，这意味着 View 中的拼写错误导致 Rails 挂起*20 分钟*，而 Ruby 构建了一个巨大的 20MB 字符串，然后*将其丢弃**   我们花了*7 个月*的时间才在 Rails 核心中对此进行了[简单的修复](https://github.com/rails/rails/issues/1525)**

 **简而言之，我认为 NameError 的行为是 Ruby 解释器中的一个令人发指的错误。我想不出这种实施的合理理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:32:28.743

这是异常处理代码的副作用。

想想你在两种情况下看到的行为。

1.  实例变量 - 您已将查询分配给控制器的实例变量。然后你抛出一个异常，作为异常处理的一部分，rails 将在控制器上调用 to_s，然后强制执行查询，因为它默认显示所有实例变量。

2.  局部变量 - 您已将查询分配给控制器的局部变量。当在这种情况下抛出异常时，局部变量就会被丢弃。

我发现总是在对象上覆盖 to_s 是一种很好的做法，因为在 ruby​​ 控制台中创建结构的字符串表示可能很昂贵和/或垃圾邮件。**

# sql - 为什么我在 vb.net 中的 SQL 上创建 2 个命令时出现错误

> ID：10716012
> 
> 赞同：-3
> 
> 时间：2012-05-23T08:15:06.213
> 
> 标签：sql, vb.net

我应该使用吗？

```
 Private Sub btntest_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btntest.Click
        If sqlConnection.State = ConnectionState.Closed Then
            sqlConnection.Open()
        End If
        Dim query = "Select * from tablebusiness"

        Dim cmd = New MySqlCommand(query, sqlConnection)

        Dim data = cmd.ExecuteReader()

        Do While data.Read
        Loop

        Dim cmd1 = New MySqlCommand(query, sqlConnection)
    Dim data1 = cmd1.ExecuteReader //Error. Already have data reader 
                                  //Error There is already an open DataReader associated with this Connection which must be closed first.

    Dim check = 1

    'sqlConnection.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:34:19.617

你错过了后面的括号`cmd1.ExecuteReader`。应该是`cmd1.ExecuteReader()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:54:12.773

尽管您没有让我们知道错误是什么（这使得解决任何问题变得更加困难），但我预计会出现问题，因为您正试图将 SqlConnection 对象重新用于 2 个不同的命令。特别是因为您没有在初始化第二个命令之前处理您的第一个命令。

首先，使用 2 个不同的 SqlConnection 对象来管理与数据库的连接。如果您这样做，您不会在数据库或代码上增加任何开销。让 .NET 框架连接池完成它的工作 - 不要试图自己做。您不需要执行任何特定的操作来启用连接池（尽管您可以通过在连接字符串中设置 Pooling=false 来禁用它）。

其次，使用[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句正确处理您的 SqlConnection、SqlCommand 和 SqlDataReader 对象。例如

```
 Using connection As New SqlConnection(connectionString)
        connection.Open()
        Using Command As New SqlCommand(query, connection)
            Using reader As SqlDataReader = Command.ExecuteReader()
                While reader.Read()
                    'Do Stuff'
                End While
            End Using
        End Using
        connection.Close()
    End Using 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:11:27.730

如果您希望两个数据读取器同时工作，则需要另一个连接，否则在使用 cmd1.ExecuteReader() 之前关闭/处理上一个命令

# c - 我可以在 C 中释放（）静态和自动变量吗？

> ID：10716013
> 
> 赞同：8
> 
> 时间：2012-05-23T08:15:10.987
> 
> 标签：c, free, scope, static-variables, dynamic-allocation

代码如下：

```
#include <stdlib.h>

int num = 3;   // Static external variable
int *ptr = &num;

int main(void)
{
 int num2 = 4;  // Automatic variable
 int *ptr2 = &num2;

 free(ptr);  //Free static variable
 free(ptr2); //Free automatic variable

 return 0; 
} 
```

我尝试编译上面的代码并且它可以工作，我很好奇该`free()`函数是否能够同时释放静态变量和自动变量？还是基本上什么都不做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T08:16:26.490

调用`free()`未由内存分配函数（等）返回的指针`malloc`会`calloc`导致**未定义行为**。
你的代码有一个未定义的行为，所以编译器不需要给你任何诊断，它可以显示任何行为，它可能会工作，或者崩溃，或者真的做任何事情。

避免编写导致未定义行为的代码是唯一的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T08:16:27.457

你不应该那样做。`free`仅用于由`malloc`函数族从堆中动态分配的内存。

内存`num`是在数据段中静态分配的，无法释放。内存`num2`在 的调用栈帧中分配，`main`一旦`main`返回就会释放。

实际发生的情况取决于`free`. 通常在堆中维护特定的数据结构来帮助`malloc`/`free`跟踪分配和空闲的内存区域。`free`期望这些数据结构位于其参数指向的位置附近。当您向它传递一个不指向已`malloc`分配堆区域的指针时，它会将垃圾数据视为一些有用的信息并做一些奇怪的事情。如果结果只是立即的程序崩溃，那么您很幸运。

# lucene - Lucene 的分析器是否创建 tf-idf 表示？

> ID：10716014
> 
> 赞同：0
> 
> 时间：2012-05-23T08:15:25.710
> 
> 标签：lucene, indexing

我想知道 Lucene 的分析器是否使用 tf-idf 表示来构建索引。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:51:48.940

否：分析器只是将文档分解为令牌流。

IndexWriter 是一个分析消费者，它构建一个倒排索引，记录原始统计信息，例如该术语在文档中出现的次数以及有多少文档包含该术语。

但这不是 tf/idf 表示：索引格式独立于评分模型。

# php - MySQL 自动提交 - 插入被忽略

> ID：10716019
> 
> 赞同：1
> 
> 时间：2012-05-23T08:15:30.333
> 
> 标签：php, mysql, insert, autocommit

我有一个 MySQl 数据库，里面有几个表，都是 UTF-8 和 MyISAM 存储。在 PHP 中，我正在解析一个将大量数据写入表的 XML 文件。我只使用简单的 Insert 语句和 mysqli 函数。

表上没有那么多读取操作，并且在插入期间没有一个操作。首先，性能非常非常慢，所以我在脚本开头添加了 SET AUTOCOMMIT = 0。

我现在遇到的问题是，我在第三个 foreach 循环中的所有插入都被忽略了，并且不会出现在 mysql 表中。在那之前的一切都很好。

所以我的问题是，我做错了什么，我该怎么做？

开启自动提交 = 插入所有内容，但速度非常慢 关闭自动提交 = 速度非常快，但忽略了很多插入

希望有人有想法并可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:22:17.313

关闭自动提交后 MySQL 会更快，因为 INSERT 不会立即写入您的数据库；只有在执行 COMMIT 语句时才会保存数据。插入数据后是否有 COMMIT 语句？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:30:26.720

你应该这样尝试：

```
<?php
try {
    $db->beginTransaction();

    $stmt = $db->prepare("SOME QUERY?");
    $stmt->execute(array($value1));

    $stmt = $db->prepare("YET ANOTHER QUERY??");
    $stmt->execute(array($value2, $value3));

    $db->commit();
} catch(PDOException $ex) {
    //Something went wrong then rollback!
    $db->rollBack();
    echo $ex->getMessage();
} 
```

**注意：**调用`bindTransaction()`会自动关闭自动提交。

* * *

使用 时`mysqli`，您可以改用以下内容：

```
mysqli_autocommit($dbh, FALSE);    // turn off auto-commit
mysqli_rollback($dbh);    // if error, roll back transaction
mysqli_commit($dbh);    // commit transaction 
```

# django - 访问 Django 模型的父类

> ID：10716022
> 
> 赞同：2
> 
> 时间：2012-05-23T08:15:35.437
> 
> 标签：django, django-models

我的模型结构如下：

```
class Store(models.Model):
    STORE_TYPE = (
        ('I', 'Ice Cream'),
        ('H', 'Hardware'),
    ) 
    retailer_type = models.CharField(max_length=10, choices=STORE_TYPE)
    ...

class HardwareStore(Store):
        hammers_stocked = models.BooleanField() 
```

如果我有一个实例`HardwareStore`，我如何访问该`Store`对象。我目前正在使用

```
Retailer.objects.get(pk=hardware_store.pk) 
```

哪里`hardware_store`是一个实例，`HardwareStore`但这似乎很笨重

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T08:25:55.680

不太清楚 and 之间的关系`Store`，`Retailer`你能发布一些代码吗？要通过模型继承
访问实例，请使用`Retailer`

```
hardware_store.retailer_ptr 
```

# ios - 将现有 Facebook 页面与 Facebook 应用程序连接起来

> ID：10716027
> 
> 赞同：2
> 
> 时间：2012-05-23T08:15:49.990
> 
> 标签：ios, facebook, sdk

1) 我的产品在这里已经有一个 Facebook 页面：http: [//www.facebook.com/portfoliopro](http://www.facebook.com/portfoliopro)

以前我的 iPad 应用程序没有与 Facebook 集成。但在我的下一次更新中，它确实可以让用户将照片上传到 Facebook。

2）所以现在我也有一个Facebook“应用程序”。即我已将 Facebook 的 iOS SDK 集成到我的应用程序中，并且我有一个应用程序 ID。

我不想从头开始为我的应用程序创建一个新的 Facebook 社区页面，我想将 Facebook 应用程序与现有的 Facebook 页面连接起来。

这可能吗？我看不到如何广泛浏览应用程序和页面的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:38:37.783

它会在您创建 Facebook 应用页面时自动发生。但是，如果您将其删除，它将永远断开连接。

# ios - iOS UiTextField 限制输入和键盘关闭

> ID：10716033
> 
> 赞同：0
> 
> 时间：2012-05-23T08:16:01.543
> 
> 标签：ios, uitextfield

嗨，我创建了一个 UITextField，我想将其限制为 3 个字母。如果它为空，则禁用按钮，如果不启用按钮。有谁知道如何做到这一点？

我已经尝试过了，但如果我输入 3 个字母，它会显示 3 但不会关闭键盘，它并不能真正正常工作。我不禁觉得有更好的方法来做到这一点。

这是我所做的

```
- (void)hideKeyboardAction {

    NSLog(@"Hide");

    if([self.playerName length] >= 4){
        [self.nameTextField resignFirstResponder];
    } else if([self.playerName length] < 3) {
        [self.addToScores setEnabled:FALSE];
    }
}

- (IBAction)hideKeyboard:(id)sender {

  [self hideKeyboardAction];
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    self.playerName = [textField.text stringByReplacingCharactersInRange:range withString:string];

    if([self.playerName length] <4 ){
        [self hideKeyboardAction];
    }

    if([self.playerName length] > 3){
        [self.addToScores setEnabled:FALSE];
    }

    BOOL shouldStayOpen = !([self.playerName length] > 3); 
    return shouldStayOpen;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:37:39.760

您不应替换 textField:shouldChangeCharactersInRange:replacementString: 中的文本。您应该检查 textField 中文本的长度，比较范围的长度和替换字符串的长度，然后决定（返回 YES/NO）是否替换。您还可以根据替换后文本的计算长度启用/禁用此方法中的按钮。

在我看来，没有必要隐藏键盘。

# api - API 向后兼容性的最佳实践

> ID：10716035
> 
> 赞同：15
> 
> 时间：2012-05-23T08:16:26.393
> 
> 标签：api, backwards-compatibility

我正在开发一个与 JSON API 通信的 iPhone/iPad/Android 应用程序。

该应用程序版本的第一个版本已完成，现在正在进行其他开发阶段。在其他阶段，应用程序需要与新版本的 API 集成，并允许用户访问其他功能，例如新屏幕或现有屏幕中的修改行为。但是，该应用程序确实需要使用 API 的早期版本。

解决此类要求的最佳做法是什么？我可以在整个代码中进行检查：

```
if (APIVersion == 1) {

} else if (APIVersion == 2) {

} else if (APIVersion == ....) {

}... 
```

但我担心这种方法的可扩展性。想到了工厂方法，但我不确定这会让我走多远。

谢谢，马克

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-23T09:30:44.207

发布新的 API 版本是一件**非常罕见**的事情。通常，您只需添加新的可选参数或新方法即可实现向后兼容。例如，如果你有一个名为的方法`search`，但现在你对它的工作方式不满意，你可以通过多种方式来处理它：

*   如果更改很简单，您可以添加一个`mode`默认为的新参数`mode1`（因此它是向后兼容的）。如果用户向`mode2`您提供您自己提出的正确`if`条件来检测它。（另外，通常你可以想出一个比“mode”更好的名字。）

*   如果更改很大，您可以添加`search2`使用新界面的新服务。然后将`search`方法标记为已弃用（但仍然有效且向后兼容）。通常当你这样做时，你可以**重构**你的代码，几乎所有的逻辑都在`search2`方法内部，并且你的旧`search`方法在`search2`内部使用修改后的参数调用（并适当地重新格式化结果）。如果您正确执行此操作，您将不再需要更改`search`方法。当您更改表格等时 - 您只需要修改`search2`.

我的观点是，避免发布`N+1`API 的 -st 版本。**如此大的版本意味着你所有**的方法都发生了重大变化，而不仅仅是一个。许多主要的 API 从未发布其 API 的第 2 版，它们仍然使用第 1 版，只是稍微修改了其中的一部分，如上例所示。

如果您**绝对确定**要发布API 的 -st 版本，请为您的**所有**`N+1`方法创建新的入口点。如果您有一个名为 的文件夹，请创建一个名为 的新文件夹。重构您的代码，以便它使用大部分. 如果您认为这太过分了，那么我认为您还不需要-st 版本的 API。**`services``services-v2``services``services-v2``N+1`**

 **顺便说一句，不要将集中式 API（如 Google Maps）与分布式 API（如 Android）混淆。Android 一直在发布新的 API 版本，因为有数十亿台 Android 服务器（每台 Android 设备就是一台），而且它们都不能简单地由 Google 远程升级。**下一个版本的 Android 仍然向后兼容上一个版本，增加数字只是为了表示新功能。**例如，您仍然可以在 Android 7.0 上运行为 Android 3.0 构建的应用程序（用户可能会收到一些额外的警告，但应用程序会运行）。Android 应用程序开发人员使用这些数字来描述他们的应用程序的“最低要求”。**然而，集中式 API 通常会增加其版本号，以表明重大的向后不兼容更改**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:18:15.183

我猜你已经分离了关注点。我的意思是，获取应用程序的数据只能通过模型​​完成（例如）。

所以你只需要改变模型。

我的建议是只有一个入口点：“路由器”文件。此文件检查所需的 API 版本，并加载正确的文件。这样，您可以为每个 API 获得不同的文件。“路由器”文件不会很大，每个新的 API 版本都有自己的文件，因此您不会混合所有内容。

例如，在“路由器”文件中：

```
function dispatch() {
    switch (APIVersion) {
    case 1:
        use('file.1.ext');
        break;
    case 2:
        use('file.2.ext');
        break;
    case 3:
        use('file.3.ext');
        break;
    }
} 
```**

# iphone - 如何更改 UIBarButtonItem 图像大小

> ID：10716041
> 
> 赞同：5
> 
> 时间：2012-05-23T08:16:58.180
> 
> 标签：iphone, objective-c, ios, uibarbuttonitem, uinavigationitem

使用 UIBarbuttonItem, initWithImage 我得到一张我想要更小的图片。

我觉得绝对没有办法调整图像的大小。

UIedgeInsetMake 根本不运行。调整图片大小也不起作用（像素化）。我有一个@2x 48x48 图标和一个普通的 24x24。创建具有更大空白边框的新图片不起作用。

如果我使用 20x20，它会像素化。无论。

有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-05T12:01:28.330

这可以通过以下方式实现，

1.  UIBarbuttonItem 的打开大小检查器
2.  更改“Bar Item”的值--> Image Inset--> top/bottom/left/right。

试试看...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T09:53:47.713

您可以使用自定义 BarbuttonItem 设置图像并使用以下方法调整标题大小的大小：

```
+(UIBarButtonItem *)createToolBarButtonItemWithTitle:(NSString *)t target:(id)tgt action:(SEL)a
{
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
// Since the buttons can be any width we use a thin image with a stretchable center point
UIImage *buttonImage = [[UIImage imageNamed:@"toolbarbutton_button_mouseup.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];
UIImage *buttonPressedImage = [[UIImage imageNamed:@"toolbarbutton_button_mouseover.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];
[[button titleLabel] setFont:[UIFont boldSystemFontOfSize:12.0f]];
//[[button titleLabel] setFont:[UIFont fontWithName:@"Futura-Medium" size:12.0]];
[button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[button setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
[[button titleLabel] setShadowOffset:CGSizeMake(0.0, 1.0)];

CGRect buttonFrame = [button frame];
buttonFrame.size.width = [t sizeWithFont:[UIFont boldSystemFontOfSize:12.0]].width + 24.0;

//Applicable only for iPhone FrameFun
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && [[[NSUserDefaults standardUserDefaults] stringForKey:@"is_Landscape"] isEqualToString:@"landscape"]) {
    buttonFrame.size.height = 23.0;
}else {

    buttonFrame.size.height = buttonImage.size.height;
}

[button setFrame:buttonFrame];

[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button setBackgroundImage:buttonPressedImage forState:UIControlStateHighlighted];

[button setTitle:t forState:UIControlStateNormal];

[button addTarget:tgt action:a forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button];
return [buttonItem autorelease];

} 
```

此方法可让您使用所需图像制作按钮的动态大小。在这里我已经习惯`stretchableImageWithLeftCapWidth`了调整图像。我想它会对你有所帮助。您也可以使用整个方法来制作自定义 BarButton。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:54:20.373

如果您想更改按钮的大小以匹配图像，最好创建一个 UIButton 并自定义 UIBarButtonItem。在 UIBarButtonItem initWithImage 中，图像被缩放以适合 UIBarButtonItem。

观看[此](https://stackoverflow.com/questions/3300527/add-image-to-uibarbuttonitem-using-initwithimageuiimage-image)分析器以获取有关如何执行此操作的更多信息。

# protobuf-net - 已经压缩的 ProtoBuf-Net 压缩？

> ID：10716048
> 
> 赞同：2
> 
> 时间：2012-05-23T08:17:47.797
> 
> 标签：protobuf-net

协议缓冲区如何处理已经压缩的字节 [] 的压缩？

伪示例：

```
[ProtoContract]
class Foo
{
  [ProtoMember(1)]
  public string Bar{ get; set; }

  [ProtoMember(2)]
  public byte[] CompressedFoo { get; set; }
}

// proto is my ProtocolBuffer.Net utility class

Foo _foo = new Foo() { Bar = "Hello World"; };

Foo _foo2 = new Foo() { Bar = "Goodbye cruel world"; };
_foo2.CompressedFoo = proto.Compress(_foo);

byte[] compressedFoo2 = proto.Compress(_foo2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:02:34.010

protobuf 规范不包括***任何***压缩，除非您计算`varint`整数数据的编码。C# 中的A`byte[]`被视为*protobuf* `bytes`类型，这意味着它只是一个以长度为前缀的原始字节转储。因此，如果`CompressedFoo`是（仅作为示例）12 个字节，它将以 14 个字节序列化它，由以下部分组成：

*   1 个字节用于数据类型（`2`, 表示以长度为前缀）和字段编号（`2`，来自`[ProtoMember(2)]`），混合在一起（“移位”）并进行 varint 编码
*   数据长度为 1 个字节 ( `12`)，varint 编码
*   12 个字节的数据（从“按原样”获取`CompressedFoo`）

# uitextview - TextView 最初未加载但随后加载

> ID：10716053
> 
> 赞同：0
> 
> 时间：2012-05-23T08:17:58.983
> 
> 标签：uitextview, nstimer

我正在制作一个应用程序，我将用户在 textview 中输入的文本传递给第二个视图控制器，然后将其放回完成一些动画的 textview 中。

我的问题是第二个视图控制器加载的初始时间需要很长时间，并且 textview 根本不显示。第一次之后，textview 每次都完美加载。我还设置了一个计时器来使用新的视图控制器进行初始化，但它会立即触发而不是等待。

奇怪的是，我的动画都等到视图按预期加载。问题只是计时器和文本视图，但只是第一次。如果我重复这个过程，计时器、文本视图和动画都会完美地一起触发，并且它们应该在它们应该立即加载并且视图控制器立即加载，不像第一次似乎需要永远。

有没有人有任何可能有帮助的想法？为什么他们在第一次之后都能完美工作，但不是第一次？

谢谢大家！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:28:41.950

希望这可以帮助某人...

显然，这与我对动画进行分层的方式有关。由于某种原因，直到我将 textview 动画块放在我的 imageview 动画块中，它们才会起作用。在我这样做之前，textview 块根本不会第一次触发。我不得不将我的两个计时器放入 imageview 块的完成处理程序中，现在一切正常，除了第一次加载时我仍然有一些延迟。但我并不像对动画和计时器那样担心。我觉得奇怪的是，在初始加载之后它会起作用，但这是有道理的，因为我现在知道它没有按正确的顺序触发。

如果有人想了解这方面的更多信息，请告诉我。如果有人感兴趣，我会发布代码

# sql-server - 分区策略

> ID：10716055
> 
> 赞同：3
> 
> 时间：2012-05-23T08:18:04.110
> 
> 标签：sql-server, sql-server-2008, tsql

**起点**：
我用数据填充了一个表，为了比较从运行到运行的数据，我添加了一个列“运行”（整数）。
我保留最后 5 次运行。由于我在表中运行 2 次后不断超时，因此我决定在“运行”时对表进行分区。

**我做了什么**：
1\. 我创建了一个有 1000 个分区的分区表（我想“运行”是从 1 到 1000），最多只有 5 个分区，其他 995 个是空的，等到下一次运行的那一刻放在那里。
2\. 我创建了使用上述分区功能的分区方案，并将所有分区（即 1000）保留在 PRIMARY 文件组中。
3\. 我在“运行”时对表进行了分区。

**结果：**不再超时，但处理时间增加了 50%。

**问题**：在我的分区策略中哪些点不是最理想的？我应该创建 5 个分区并更改我对运行进行编号的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:32:18.650

分区不是*性能*问题的解决方案。您正在寻找**索引**。分区会减慢处理速度，您可以期望的最好的结果是与非分区表的性能相当。分区非常适合数据管理场景，用于使用分区切换（ETL 或数据过期）进行快速数据移动。

您需要调查为什么会超时。有根据的猜测将表明表扫描（即缺少索引）。一个好的方法是[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)。

# java - java.nio 选择器和 SocketChannel 用于继续流式传输

> ID：10716057
> 
> 赞同：6
> 
> 时间：2012-05-23T08:18:10.370
> 
> 标签：java, nio

我目前正在将 java.nio.channel.Selectors 和 SocketChannels 用于将打开一对多连接以继续流式传输到服务器的应用程序。我的应用程序有三个线程：StreamWriteWorker - 对 SocketChannel 执行写操作，StreamReadWorker - 从缓冲区读取字节并解析内容，StreamTaskDispatcher - 为 readyOps 执行 Selector 的选择并为工作线程分派新的可运行对象。

问题 - 对 Selector 的选择方法的调用仅在第一次调用时返回值 > 0（有效的 readyOps）；我可以一次在所有准备好的通道上执行写入和发送数据，但是选择器的选择方法的所有以下调用都返回 0。

问题：我是否需要在每次读/写后在 SocketChannel 上调用 close（我希望不需要！）？如果不是，那么 SocketChannels 不能用于任何读/写操作的原因可能是什么？

很抱歉我无法发布代码，但我希望我已经清楚地解释了这个问题，以便有人提供帮助。我已经搜索了答案，发现关闭后您无法重用 SocketChannel 连接，但我的频道不应该关闭，服务器永远不会收到 EOF 流结果。

我取得了一些进展，并发现由于 json 解析错误，服务器应用程序上没有发生写入操作。因此，现在客户端应用程序代码上的 SocketChannel 在处理读取操作后已准备好进行另一次写入操作。我想这是 SocketChannels 的 TCP 特性。但是，SocketChannel 不能用于服务器应用程序端的另一个读取操作。这是 SocketChannels 的正常行为吗？是否需要在读取操作后关闭客户端的连接并建立新连接？

这是我正在尝试做的代码示例：

```
package org.stream.socket;

import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.channels.SelectionKey;
import java.nio.channels.Selector;
import java.nio.channels.ServerSocketChannel;
import java.nio.channels.SocketChannel;
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;
import java.nio.charset.CodingErrorAction;
import java.util.HashMap;
import java.util.Iterator;
import java.util.UUID;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingQueue;

import org.apache.commons.lang3.RandomStringUtils;

import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.google.gson.JsonPrimitive;
import com.google.gson.stream.JsonToken;

public class ClientServerTest {

    private LinkedBlockingQueue<byte[]> dataQueue = new LinkedBlockingQueue<byte[]>();
    private ExecutorService executor = Executors.newFixedThreadPool(1);
    private HashMap<String, Integer> uuidToSize = new HashMap<String, Integer>();

    private class StreamWriteTask implements Runnable {
        private ByteBuffer buffer;
        private SelectionKey key;
        private Selector selector;

        private StreamWriteTask(ByteBuffer buffer, SelectionKey key, Selector selector) {
            this.buffer = buffer;
            this.key = key;
            this.selector = selector;
        }

        @Override
        public void run() {
            SocketChannel sc = (SocketChannel) key.channel();
            byte[] data = (byte[]) key.attachment();
            buffer.clear();
            buffer.put(data);
            buffer.flip();
            int results = 0;
            while (buffer.hasRemaining()) {
                try {
                    results = sc.write(buffer);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                if (results == 0) {
                    buffer.compact();
                    buffer.flip();
                    data = new byte[buffer.remaining()];
                    buffer.get(data);
                    key.interestOps(SelectionKey.OP_WRITE);
                    key.attach(data);
                    selector.wakeup();
                    return;
                }
            }

            key.interestOps(SelectionKey.OP_READ);
            key.attach(null);
            selector.wakeup();
        }

    }

    private class StreamReadTask implements Runnable {
        private ByteBuffer buffer;
        private SelectionKey key;
        private Selector selector;

        private StreamReadTask(ByteBuffer buffer, SelectionKey key, Selector selector) {
            this.buffer = buffer;
            this.key = key;
            this.selector = selector;
        }

        private boolean checkUUID(byte[] data) {
            return uuidToSize.containsKey(new String(data));
        }

        @Override
        public void run() {
            SocketChannel sc = (SocketChannel) key.channel();
            buffer.clear();
            byte[] data = (byte[]) key.attachment();
            if (data != null) {
                buffer.put(data);
            }
            int count = 0;
            int readAttempts = 0;
            try {
                while ((count = sc.read(buffer)) > 0) {
                    readAttempts++;
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (count == 0) {
                buffer.flip();
                data = new byte[buffer.limit()];
                buffer.get(data);
                if (checkUUID(data)) {
                    key.interestOps(SelectionKey.OP_READ);
                    key.attach(data);
                } else {
                    System.out.println("Clinet Read - uuid ~~~~ " + new String(data));
                    key.interestOps(SelectionKey.OP_WRITE);
                    key.attach(null);
                }
            }

            if (count == -1) {
                try {
                    sc.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            selector.wakeup();
        }

    }

    private class ClientWorker implements Runnable {

        @Override
        public void run() {
            try {
                Selector selector = Selector.open();
                SocketChannel sc = SocketChannel.open();
                sc.configureBlocking(false);
                sc.connect(new InetSocketAddress("127.0.0.1", 9001));
                sc.register(selector, SelectionKey.OP_CONNECT);
                ByteBuffer buffer = ByteBuffer.allocateDirect(65535);

                while (selector.isOpen()) {
                    int count = selector.select(10);

                    if (count == 0) {
                        continue;
                    }

                    Iterator<SelectionKey> it = selector.selectedKeys().iterator();

                    while (it.hasNext()) {
                        final SelectionKey key = it.next();
                        it.remove();
                        if (!key.isValid()) {
                            continue;
                        }

                        if (key.isConnectable()) {
                            sc = (SocketChannel) key.channel();
                            if (!sc.finishConnect()) {
                                continue;
                            }
                            sc.register(selector, SelectionKey.OP_WRITE);
                        }

                        if (key.isReadable()) {
                            key.interestOps(0);
                            executor.execute(new StreamReadTask(buffer, key, selector));
                        }
                        if (key.isWritable()) {
                            key.interestOps(0);
                            if(key.attachment() == null){
                                key.attach(dataQueue.take());
                            }
                            executor.execute(new StreamWriteTask(buffer, key, selector));
                        }
                    }
                }
            } catch (IOException ex) {
                // Handle Exception
            }catch(InterruptedException ex){

            }

        }
    }

    private class ServerWorker implements Runnable {
        @Override
        public void run() {
            try {
                Selector selector = Selector.open();
                ServerSocketChannel ssc = ServerSocketChannel.open();
                ServerSocket socket = ssc.socket();
                socket.bind(new InetSocketAddress(9001));
                ssc.configureBlocking(false);
                ssc.register(selector, SelectionKey.OP_ACCEPT);
                ByteBuffer buffer = ByteBuffer.allocateDirect(65535);
                DataHandler handler = new DataHandler();

                while (selector.isOpen()) {
                    int count = selector.select(10);

                    if (count == 0) {
                        continue;
                    }

                    Iterator<SelectionKey> it = selector.selectedKeys().iterator();

                    while (it.hasNext()) {
                        final SelectionKey key = it.next();
                        it.remove();
                        if (!key.isValid()) {
                            continue;
                        }

                        if (key.isAcceptable()) {
                            ssc = (ServerSocketChannel) key.channel();
                            SocketChannel sc = ssc.accept();
                            sc.configureBlocking(false);
                            sc.register(selector, SelectionKey.OP_READ);
                        }
                        if (key.isReadable()) {
                            handler.readSocket(buffer, key);
                        }
                        if (key.isWritable()) {
                            handler.writeToSocket(buffer, key);
                        }
                    }
                }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    private class DataHandler {

        private JsonObject parseData(StringBuilder builder) {
            if (!builder.toString().endsWith("}")) {
                return null;
            }

            JsonParser parser = new JsonParser();
            JsonObject obj = (JsonObject) parser.parse(builder.toString());
            return obj;
        }

        private void readSocket(ByteBuffer buffer, SelectionKey key)
                throws IOException {
            SocketChannel sc = (SocketChannel) key.channel();
            buffer.clear();
            int count = Integer.MAX_VALUE;
            int readAttempts = 0;
            try {
                while ((count = sc.read(buffer)) > 0) {
                    readAttempts++;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            if (count == 0) {
                buffer.flip();
                StringBuilder builder = key.attachment() instanceof StringBuilder ? (StringBuilder) key
                        .attachment() : new StringBuilder();
                Charset charset = Charset.forName("UTF-8");
                CharsetDecoder decoder = charset.newDecoder();
                decoder.onMalformedInput(CodingErrorAction.IGNORE);
                System.out.println(buffer);
                CharBuffer charBuffer = decoder.decode(buffer);
                String content = charBuffer.toString();
                charBuffer = null;
                builder.append(content);    
                System.out.println(content);
                JsonObject obj = parseData(builder);
                if (obj == null) {
                    key.attach(builder);
                    key.interestOps(SelectionKey.OP_READ);
                } else {
                    System.out.println("data ~~~~~~~ " + builder.toString());
                    JsonPrimitive uuid = obj.get("uuid").getAsJsonPrimitive();
                    key.attach(uuid.toString().getBytes());
                    key.interestOps(SelectionKey.OP_WRITE);
                }
            }

            if (count == -1) {
                key.attach(null);
                sc.close();
            }
        }

        private void writeToSocket(ByteBuffer buffer, SelectionKey key)
                throws IOException {
            SocketChannel sc = (SocketChannel) key.channel();
            byte[] data = (byte[]) key.attachment();
            buffer.clear();
            buffer.put(data);
            buffer.flip();
            int writeAttempts = 0;
            while (buffer.hasRemaining()) {
                int results = sc.write(buffer);
                writeAttempts++;
                System.out.println("Write Attempt #" + writeAttempts);
                if (results == 0) {
                    buffer.compact();
                    buffer.flip();
                    data = new byte[buffer.remaining()];
                    buffer.get(data);
                    key.attach(data);
                    key.interestOps(SelectionKey.OP_WRITE);
                    break;
                }
            }

            key.interestOps(SelectionKey.OP_READ);
            key.attach(null);
        }
    }

    public ClientServerTest() {
        for (int index = 0; index < 1000; index++) {
            JsonObject obj = new JsonObject();
            String uuid = UUID.randomUUID().toString();
            uuidToSize.put(uuid, uuid.length());
            obj.addProperty("uuid", uuid);
            String data = RandomStringUtils.randomAlphanumeric(10000);
            obj.addProperty("event", data);
            dataQueue.add(obj.toString().getBytes());
        }

        Thread serverWorker = new Thread(new ServerWorker());
        serverWorker.start();

        Thread clientWorker = new Thread(new ClientWorker());
        clientWorker.start();

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        ClientServerTest test = new ClientServerTest();
        for(;;){

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T07:56:11.833

1.  正确的处理方法`OP_CONNECT`是尝试`finishConnect()`一次，如果成功取消注册`OP_CONNECT`并注册`OP_READ`或`OP_WRITE`，可能是后者，因为您是客户。在非阻塞模式下循环和休眠没有意义。如果`finishConnect()`返回 false，`OP_CONNECT`将再次触发。

2.  您对`!key.isAcceptable()`,`!key.isReadable()`和的处理`!key.isWriteable()`绝对是零意义的。如果密钥是可接受的，请调用`accept()`。如果它可读，请调用`read()`. 如果它是可写的，请调用`write()`. 就这么简单。

3.  您需要注意，通道几乎总是可写的，除了它们的套接字发送缓冲区已满的短暂时期。`OP_WRITE`所以只有在你有东西要写的时候才注册，或者*在*你尝试写并得到零回报之后更好；然后当`OP_WRITE`触发时，重试写入并取消注册`OP_WRITE`，除非你得到另一个零。

4.  你的`ByteBuffer`. 在实践中，*每个通道都需要一个。*您可以将其保存为密钥附件，以便在需要时将其取回。否则，您没有任何方法可以累积部分读取，这肯定会发生，或者任何重试写入的方法。

# sql - SQL 组 LEFT JOIN 结果

> ID：10716058
> 
> 赞同：1
> 
> 时间：2012-05-23T08:18:11.160
> 
> 标签：sql, postgresql

我有几张桌子：

**用户**

ID

**设置**

用户身份

我想返回用户详细信息以及在“设置”索引下的结果中可访问的给定用户的所有设置，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:29:29.357

Postgresql 有一个`ARRAY_AGG`函数可以为你进行连接。例如

```
SELECT  Users.ID, 
        ARRAY_AGG(COALESCE(Name || ' : ' || Value, '')) AS Settings
FROM    Users
        LEFT JOIN Settings
            ON Users.ID = Settings.User_ID
GROUP BY Users.ID 
```

你的表结构有点模糊，所以上面是基于我在[SQL Fiddle上创建的模式](http://sqlfiddle.com/#!1/c7d7e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:36:58.030

假设您在 user_id 列中有一个索引，您可以执行以下操作：

```
select u.*, s.*
from Users u
inner join Settings s on (u.id = s.user_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:37:02.740

如果我很好理解，以下查询应该做你想做的事......

```
SELECT Users.*, Settings.*
FROM Users 
JOIN Settings ON Settings.user_id = Users.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T08:43:14.947

试试 GROUP_CONCAT

像这样在mysql中？

```
SELECT u.id, GROUP_CONCAT(s.id)  
FROM Users u  
INNER JOIN Settings s ON u.id = s.user_id 
GROUP BY u.id; 
```

**编辑：**

PostgreSQL 版本：

```
SELECT u.id, STRING_AGG(s.id)  
FROM Users AS u  
INNER JOIN Settings AS s ON u.id = s.user_id 
GROUP BY u.id; 
```

# c# - 在特定日期后过时？

> ID：10716061
> 
> 赞同：3
> 
> 时间：2012-05-23T08:18:20.377
> 
> 标签：c#, deprecated, custom-attributes, obsolete

我想标记一个方法/类......已过时，但仅在特定日期之后。例如，这个类将在 6 个月内过时，让其他开发人员有时间实现新架构。

C# 中是否存在这样做的属性？还是我应该实施自己的？

所有项目都将警告视为错误，因此 ObsoleteAttribute 不回答这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:27:58.230

您通常不会将这些信息烘焙到代码中，而是发布开发路线图，其中包含将要发生的任何重大更改。已弃用的功能不一定是重大更改。

即使您为 IDE 编写一种机制来使用这种“延迟弃用”，其他开发人员也需要这个 VS 扩展才能使用它。

只需发布一个文档，说明将被弃用/破坏的内容，然后在时机成熟时使用属性弃用它。

“将警告视为错误”只会在弃用时影响您，但这意味着您在从旧代码迁移到新代码时保持警惕。当然，如果您需要提供向后兼容性，您要么需要停止将警告视为错误（以便让代码使用已弃用的代码作为支持），要么在弃用时抑制警告，但这可能会有点混乱.

没有对延迟弃用的内置支持，而且我不知道有任何第三方解决方案在野外 - 所以现在你只能靠自己了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:31:48.447

如果你以这样的方式开始你的方法呢？

```
void method()
{
    if(System.Diagnostics.Debugger.IsAttached) // you want your application to work, but warn developers
    {
        string DeprecatedFrom = "20001231"; //example date: 31 dec 2000
        if (string.Format("{0:yyyymmdd}",DateTime.Now).Equals(DeprecatedFrom)) throw new NotSupportedException("Don't use this method.");
    }
} 
```

Crude, but effective: method will start throwing when 31 dec 2000 (in the example) is reached.

# c++ - 堆损坏错误；无法释放 cv::Mat opencv

> ID：10716069
> 
> 赞同：5
> 
> 时间：2012-05-23T08:18:50.440
> 
> 标签：c++, opencv, merge

这段代码工作正常，直到最后一行。它将正确的图像保存在磁盘上，但在退出功能后显示“内存泄漏” - 堆损坏。我读过 Mat 不需要明确释放。就我而言，它在释放和不释放时都会崩溃。请帮忙。

```
void CannyEdgeDetectionFilter::applyFilter(Mat& mat, Mat& mixedBandsMat)
{
    //Mat mixedBandsMat;

    vector<Mat> bandWiseImages;
    split(mat, bandWiseImages);

    //! Evaluate numChannels to be filtered in the input image
    int numChannels = mat.channels();
    int type = mat.type();

    //! Multiplied by 8 to get bits from Bytes
    int singleChannelDepth = 8*mat.elemSize1();

    for (int i = 0; i < numChannels; i++)
    {
        Canny(bandWiseImages[i], bandWiseImages[i], m_LowerThreshold,
            m_UpperThreshold, m_Kernel.rows);
    }

    //! Creating filteredImgMat in order to set DataValues
    mixedBandsMat.create(mat.rows, mat.cols, mat.type());

    //! Unifying the channels back to the output image
    merge(bandWiseImages, mixedBandsMat);
#if 1
    //Release bandWiseImages Mat memory
    int bandWiseVecSize = bandWiseImages.size();
    for(int i = 0; i < bandWiseVecSize; i++)
        bandWiseImages[i].release();
    bandWiseImages.clear();
    //fromTo.clear();
#endif
    imwrite("D:\\testAfterCannyEdgeDetetionFilter.jpg", mixedBandsMat);
    mixedBandsMat.release();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:27:40.067

有了这个小信息，我只能给你一些支持，但没有真正的解决方案：

**1.）**我猜你使用的是Win7。所以请[访问 Dr. Memory](http://www.drmemory.org/)并安装它（将路径添加到系统变量中）。然后您可以使用以下命令启动您的应用程序`drmemory.exe -no_follow_children C:\\the_path\\YourExecutable.exe argv[1] ... argv[n]`：-no_follow_children 用于忽略其他第三方代码。运行此命令。Dr. Memory 会将结果写入`C:\Users\NAMEHERE\AppData\Roaming\Dr. Memory\`. 看一看，或许你现在有了提示。如果没有 -> 在这里发布。=)

**2.)**当您在没有压缩参数的情况下编写图像时，OpenCV 有时会崩溃。我已经经历过一段时间了，所以我总是给 imwrite 函数一个 int 参数向量：

```
vector<int> crparam;
crparam.push_back(CV_IMWRITE_PNG_COMPRESSION);
cv::imwrite("D:\\testAfterCannyEdgeDetetionFilter.png", mixedBandsMat, crparam); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T07:12:27.117

我在 C++ 的 STL 中找不到 vector[i].release 成员函数。试试 vector[i].erase

# android - 如何获得扩展的 Android 软件版本？

> ID：10716070
> 
> 赞同：1
> 
> 时间：2012-05-23T08:18:53.403
> 
> 标签：android

例如 HTC Evo 4G 的 Android 版本为 2.3.5，其软件版本可以是 4.67.651.3（适用于 HTC Evo 4G）

我应该如何以编程方式获取此软件版本值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:31:47.717

尝试这个：

```
 String productVersion = "";
    Process ifc = null;
    try {
        ifc = Runtime.getRuntime().exec("getprop ro.product.version");
        BufferedReader bis = new BufferedReader(new InputStreamReader(ifc.getInputStream()), 2048);
        productVersion = bis.readLine();

    } catch (IOException e) {
    } finally {
        if (ifc != null) {
            ifc.destroy();
        }
    } 
```

这将为您提供您正在寻找的价值。这取决于设备。您可能还需要查看属性“ro.build.description”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T08:27:57.163

我的一个应用程序的一个片段，用于发送一封电子邮件，其中包含我需要的应用程序的所有数据。Build.VERSION.SDK_INT 是操作系统版本。我使用 ApplicationInfo 和 PackManager 从存储有关应用程序的非 Android 元数据的清单中获取一些自定义数据。

```
ApplicationInfo ai = _context.getPackageManager().getApplicationInfo(_context.getPackageName(), PackageManager.GET_META_DATA);

PackageInfo manager= _context.getPackageManager().getPackageInfo(_context.getPackageName(), 0);
body.append("Application version " + manager.versionName + " - ");
body.append("Content version " + ai.metaData.get("ContentVersion")  + "\n");

body.append("OS Version:" + Build.VERSION.SDK_INT + "\n");
body.append(Build.MANUFACTURER + " - ");
body.append(Build.MODEL + " - ");
body.append(Build.PRODUCT + "\n"  + "\n" + "\n"); 
```

# jquery - 如何使用 Javascript 从 Web 服务中获取 Json 对象？

> ID：10716074
> 
> 赞同：0
> 
> 时间：2012-05-23T08:19:13.157
> 
> 标签：jquery, web-services

我必须从 Web 服务中获取一个 Json 对象，但我还没有找到任何关于它的文档。我必须发布一个sql语句才能得到它。有谁知道这一切是否可行？

好的，谢谢您的回答。首先，Web 服务有一个 GetJsonString “metod”。我正在尝试这段代码：

```
$(document).ready(function () {
$.ajax({
    type: 'Get',
    url: 'http:********************************.asmx?op=GetJSONString',
    success: function(returnedJson) {
        alert(returnedJson)
    }
    }); 
```

});

我得到这个错误：

```
XMLHttpRequest cannot load http:/***********asmx?op=GetJSONString. Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:24:57.937

检查这个： http: [//www.json.org/js.html](http://www.json.org/js.html)

> 要将 JSON 文本转换为对象，可以使用 eval() 函数。eval() 调用 JavaScript 编译器。由于 JSON 是 JavaScript 的真子集，因此编译器将正确解析文本并生成对象结构。文本必须用括号括起来，以避免在 JavaScript 语法中出现歧义。
> 
> var myObject = eval('(' + myJSONtext + ')');

myJSONtext 是您的 Web 服务的返回值

如果您使用的是 jQuery，这篇文章是一个很好的答案：[Calling a web service in JQuery and assign returned Json to JS variable](https://stackoverflow.com/questions/10715897/calling-a-web-service-in-jquery-and-assign-returned-json-to-js-variable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:28:39.843

这是可能的，但取决于几个因素：

1.  Web 服务返回什么？标准 Web 服务返回 XML，而不是 JSON。因此，您要么必须直接解析 XML，要么将其转换为 JSON。
2.  将 SQL 发送到 Web 服务是一个巨大的安全风险。想象有人发送`DELETE FROM important_table`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:30:03.787

您可以将 SQL 作为 POST 请求的参数发送，例如

```
$.ajax({
    type: 'POST',
    url: "http://www....",
    method: "serverCallback",
    data: "SELECT ....",
    success: success,
    dataType: dataType
 }); 
```

使用 RPC（远程进程调用）处理它，将结果打包成 json，成功回调会将其作为参数返回。缺点是从您的 Web 应用程序发送原始 SQL 查询非常危险，它很容易成为 SQL 注入攻击的目标。

因此，如果您可以发送一个参数来定义将在数据库中执行的 SQL 查询，而不是发送查询本身，那就更好了。

# php - Javascript将值从弹出页面传递给父级

> ID：10716076
> 
> 赞同：0
> 
> 时间：2012-05-23T08:19:26.430
> 
> 标签：php, javascript, popup

我有一个打开弹出页面的父页面。在弹出页面上，用户可以选择一个传递回父页面的值。

父页面上的代码片段是：

```
<script type="text/javascript">  
function selectValue(id) 
{ 
    // open popup window and pass field id 
    window.open('sku.php?id=' + encodeURIComponent(id),'popuppage', 
      'width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100'); 
} 

function updateValue(id, value) 
{ 
    // this gets called from the popup window and updates the field with a new value 
    document.getElementById(id).value = value; 
} 

</script> 
```

并且弹出年龄的代码片段是：

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(parentId, value); 
    window.close(); 
} 
</script> 
```

我需要更改弹出页面代码，以便用户可以选择一个将他们带到另一个页面的类别（仍在弹出页面中）。现在，当他们在此页面中选择值时，由于父页面已更改，因此不会将其传递回父页面。

我可以编辑弹出代码以指向原始父页面吗？在我的例子中，父页面是 newsalea.php。我可以做类似的事情：

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(newsale.php, value); 
    window.close(); 
} 
```

这样我将 parentid 硬编码到弹出页面中？这可能吗？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:44:14.260

无需使用 window.open 您可以使用弹出式 javascript 库，如[jquery dialoge](http://jqueryui.com/demos/dialog/)！或[fancybox](http://fancybox.net/)并简单地说 parent.div=your value

# oracle - Oracle：如何用 case when 制定复杂的约束

> ID：10716077
> 
> 赞同：4
> 
> 时间：2012-05-23T08:19:54.230
> 
> 标签：oracle, check-constraints

以下条件约束根本不起作用。是否有可能以一种可行的方式制定？

```
ALTER TABLE eni_trasc_voci_pwr_fatt
ADD CONSTRAINT tvp_constraint_1 CHECK (
CASE WHEN TVP_CODICE_ASSOGGETAMEN = '-' THEN tvp_regione IS NULL
END); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:26:08.403

Try the following:

```
ALTER TABLE eni_trasc_voci_pwr_fatt
ADD CONSTRAINT tvp_constraint_1 CHECK (
CASE WHEN TVP_CODICE_ASSOGGETAMEN = '-' THEN tvp_regione else null end IS NULL); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:28:21.960

看起来你想要这里的逻辑含义（“如果 X 则 Y”），这在逻辑上等同于“（不是 X）或 Y”。CASE 用于创建有限映射。

您的约束应该类似于

`TVP_CODICE_ASSOGGETAMEN != '-' OR TVP_REGIONE IS NULL`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:36:21.963

我认为你可以在没有 case 语句的情况下做你想做的事：

```
create table t1 (c1 varchar2(10), c2 varchar2(10));

alter table t1 add constraint t1_chk1 check ( (c1 = '-' and c2 is null) or (c1 != '-' and c2 is not null) ); 
```

现在尝试插入一些值：

```
SQL> insert into t1 values ('-', 'reject');
insert into t1 values ('-', 'reject')  
*
ERROR at line 1:
ORA-02290: check constraint (SODONNEL.T1_CHK1) violated

SQL>
SQL> insert into t1 values ('-', null);

1 row created.

SQL>
SQL> insert into t1 values ('a', null);
insert into t1 values ('a', null)
*
ERROR at line 1:
ORA-02290: check constraint (SODONNEL.T1_CHK1) violated

SQL>
SQL> insert into t1 values ('a', 'accept');

1 row created. 
```

# php - PHP - pchart 长标签

> ID：10716079
> 
> 赞同：0
> 
> 时间：2012-05-23T08:19:58.387
> 
> 标签：php, pchart

我正在用 PHP 和 pchart 绘制一些图表，但在 X 轴上我看到了一些长标签，有什么方法可以避免重叠？

还是其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:11:57.200

我有时会使用 pchart2，在您描述的情况下，我个人倾向于修改 pchart 代码本身。

您必须搜索打印标签的位置并执行调整。不幸的是，pcchart 的代码是……嗯……嗯，在我看来不是很好，所以很容易迷失在其中。

也许，您可以欣赏我自制的功能，将长文本分成多行以强制文本的最大可接受宽度：

```
 /**
 * Insert ends of line into the given string to prevent exceeding the given width of the
 * string when it is printed.
 * @param unknown_type $text String for separation by EOLs.
 * @param unknown_type $displayFont Font used for text printing.
 * @param unknown_type $displaySize Size of the printed text.
 * @param unknown_type $angle Angle of text printing.
 * @param unknown_type $maximumWidth Maximum allowed width (pixels).
 * @return string The edited input text.
 */
function changeTextForMaximumWidth($text, $displayFont, $displaySize, $angle, $maximumWidth) {

    $result = "";

    $processedText = $text;
    $remainingText = "";

    while ($processedText != "") {
        // replace this by any routine that computes the width and height of the text
        $TxtPos = $this->getTextBox(0, 0, $displayFont, $displaySize, $angle, $processedText);

        // what about TXT margin??
        $TxtWidth = abs($TxtPos[0]["X"] - $TxtPos[1]["X"]); 

        // if text length is sufficient
        if ($TxtWidth <= $maximumWidth) {

            $result .= $processedText;
            if ($remainingText != "") {
                $result .= PHP_EOL;
            }

            $processedText = $remainingText;
            $remainingText = "";
            continue; 
        }

        // the text is too wide
        // try to make it shorter
        $pos = strrpos($processedText, " ");
        if ($pos == FALSE) {
            // cannot be made shorter
            $result .= $processedText;
            if ($remainingText != "") {
                $result .= PHP_EOL;
            }

            $processedText = $remainingText;
            $remainingText = "";
            continue;
        }

        // can be shorten

        $shorten = substr($processedText, 0, $pos);

        $restLength = strlen($processedText) - ($pos + 1); 
        $rest = substr($processedText, $pos + 1, $restLength);

        $processedText = $shorten;
        $remainingText = $rest . " " . $remainingText;
    }

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T15:10:47.447

您可以尝试对 `word-wrap`标签的文本使用该功能，使它们变得更短并占用多行。

# jquery - getScript 在 div 中显示加载的数据

> ID：10716081
> 
> 赞同：0
> 
> 时间：2012-05-23T08:20:12.073
> 
> 标签：jquery, ajax, getscript

我正在尝试将第 3 方提供的视频流加载到我的网站中。链接到流的文件以 js 文件的形式提供，并简单地写出`document.write('iframe code...')`. 由于流受域保护，因此必须引用 js 文件。

这将我引向`$.ajax`/`dataType: script`和`$.getScript`选项。以下将目标 div 留空

```
$.ajaxSetup ({
    cache: false
});

var stream = 'http://live.streamsupplier.com/se8ilyjs/'; 
$("#cam").click(function(){    
    $.ajax({
        url: stream,
        dataType: "script",
        success: function(data) {
            $('#cam').html(data);
            alert('Load was performed.');
        }
    });
}); 
```

任何想法都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:29:24.040

您违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，因为您请求的 URL 在您的站点之外。您将需要使用服务器端代理来获取脚本，然后从您的 jQuery 代码中调用此本地 URL 以插入脚本。

# excel - 如果某行上的活动单元格，Excel VBA会添加边框

> ID：10716082
> 
> 赞同：1
> 
> 时间：2012-05-23T08:20:14.783
> 
> 标签：excel, vba, border, cells

我正在为甘特图电子表格编写一些 VBA。

我在第 5 行有 3 个月的日期，我可以通过在更新整个工作表的单元格中输入日期来设置开始日期。

我的图表 L6:CZ42 有一系列单元格。对于此范围，如果第 5 行中的单元格是该月的 1 号，则该列中的每个单元格都将有一个灰色虚线左边框，而右侧没有任何内容。这可以按我的意愿工作。

问题是它在单元格的顶部和底部添加了一个灰色边框，这对于第 7 到 41 行是可以的，但是对于第 6 行，我想要一个黑色的顶部边框，而对于第 42 行，我想要一个黑色的底部边框。

我添加了这部分代码试图对这个问题进行排序，但语法错误，检查它是否在第 6 行

```
' If this is the first row (6) in the range then
' add a black continuous border to the top
If Cells(6, i) Then
    With .Borders(xlEdgeTop)
        .ColorIndex = 1
        .Weight = xlThin
        .LineStyle = xlContinuos
    End With
End If 
```

这是我的全部代码

```
Sub Worksheet_Change(ByVal Target As Range)

Dim i As Long
Dim CuDate As Date

For i = 12 To 104
CuDate = Cells(5, i).Value

' Are we on the 1st day of the month
If Day(CuDate) = 1 Then
    With Range(Cells(6, i), Cells(42, i))
        ' If this is the first row (6) in the range then
        ' add a black continuous border to the top
        If Cells(6, i) Then
            With .Borders(xlEdgeTop)
                .ColorIndex = 1
                .Weight = xlThin
                .LineStyle = xlContinuos
            End With
        End If

        With .Borders(xlEdgeLeft)
            .ColorIndex = 15
            .Weight = xlThin
            .LineStyle = xlDot
        End With
        With .Borders(xlEdgeRight)
            .LineStyle = xlLineStyleNone
        End With
    End With
Else
    With Range(Cells(6, i), Cells(42, i))
        ' If this is the last row (42) in the range then
        ' add a black continuous border to the bottom
        If Cells(42, i) Then
            With .Borders(xlEdgeBottom)
                .ColorIndex = 1
                .Weight = xlThin
                .LineStyle = xlContinuos
            End With
        End If

        With .Borders(xlEdgeLeft)
            .LineStyle = xlLineStyleNone
        End With
        With .Borders(xlEdgeRight)
            .LineStyle = xlLineStyleNone
        End With
    End With
End If

Next
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:18:16.343

这条线没有做你认为它做的事情：`If Cells(6, i) Then`

这相当于说：`If Cells(6, i).Value = True Then`，即“如果第 6 行和第 6 列的单元格内容`i`计算为`True`当隐式强制为布尔值时，则”，这显然不是您想要的。相反，请尝试：

```
If ActiveCell.Row = 6 Then 
```

同样的推理`If Cells(42, i) Then`在您的代码中也适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T20:42:11.513

[**更新：** Jean-François Corbett 已经更正了您的代码逻辑：检查活动单元格是否在第 6 行。但是由于拼写错误，代码不会产生顶部和底部边框。]

您的代码无法编译。请考虑`Option Explicit`在代码模块的顶部使用。我可以复制您的问题的唯一方法是删除`Option Explicit`. 我设置了 VBA 编辑器，使其自动放置`Option Explicit`在新模块的顶部。

LineStyle 属性必须是[XlLineStyle](http://msdn.microsoft.com/en-us/library/bb241348%28v=office.12%29.aspx)常量之一：

*   xl连续
*   xlDash
*   xlDashDot
*   xlDashDotDot
*   xl点
*   xl双
*   xlSlantDashDot
*   xlLineStyleNone

在您的代码中，您写的**是 xlContinuos**而不是**xlContinuos**。进行此更正后，代码应该可以工作。

此外，这是一个小问题，但从技术上讲，Worksheet_Change 事件应声明如下：

`Private Sub Worksheet_Change(ByVal Target As Range)`

我可以建议您利用 VBA 编辑器的内置功能以及帮助文档吗？

# c# - 编写处理不同消息的单个函数的方法

> ID：10716083
> 
> 赞同：2
> 
> 时间：2012-05-23T08:20:20.560
> 
> 标签：c#, oop, design-patterns

我有一个将消息保存在数据库中的功能。根据类型保存消息有不同的方案。例如，我有保存消息、保存消息以进行修复和从 XML 保存消息。

一个明智的方法是创建一个带有指定操作类型的参数的函数，并在调用三种不同方法之间选择一个 switch case 吗？

到目前为止，我已经想出了这个：

```
public bool SaveMessage(Message message,
                        List<Image> images,
                        List<Attachments> attachments,
                        string type); 
```

并具有其他三种方法：`SaveMessage()`、`SaveMessageForRepair()`和`SaveMessageXml()`。

这是一个合理的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:32:38.533

使用**策略模式**。

> 定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户而变化。

[http://www.dofactory.com/Patterns/PatternStrategy.aspx](http://www.dofactory.com/Patterns/PatternStrategy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:24:20.747

创建一个对象，该对象封装了包括消息类型在内的所有信息，并将其传递给将该消息保存在数据库中的函数。现在目标函数将决定保存位置和保存方式。

这样，如果系统中引入了新的消息类型，将很容易覆盖行为并扩展功能。

# ruby-on-rails - Rails 中的 Gmail 推送通知

> ID：10716088
> 
> 赞同：8
> 
> 时间：2012-05-23T08:20:36.950
> 
> 标签：ruby-on-rails, ruby, push-notification, classification, gmail-imap

我正在开发一个应用程序，用户可以在其中添加他们的 Gmail 帐户，并对他们的电子邮件进行一些分类工作。

我希望在任何注册帐户收到新电子邮件时收到通知。

一个解决方案是继续通过 IMAP 轮询帐户并保存我获取的最后一个电子邮件日期以检查是否有新邮件，但这会产生很多开销。

知道如何监控 Gmail 并在收到新电子邮件时收到通知并将其与 Rails 应用程序集成吗？例如，是否有一个扩展可以做到这一点并将发布请求发送到我的 Rails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:51:08.150

试试这些：

1.  如果你想要低级，Ruby 提供了[Net::IMAP](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/imap/rdoc/Net/IMAP.html)。

2.  您可以尝试[imap_processor](http://rubygems.org/gems/imap_processor) gem。

3.  你可以试试[gmail](http://rubygems.org/gems/gmail) gem。

深入研究它们，让我们知道什么对您有用，尤其是在 IDLE 方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:29:22.897

我很确定 IMAP 是这里唯一的答案。

您可能想看看 IDLE 是否有效——我读过相互矛盾的答案。如果是这样，它比轮询响应更快。

否则，轮询。

[维基百科关于 IDLE 的文章](https://en.wikipedia.org/wiki/IMAP_IDLE)

# android - 向客户发送群发短信。我应该喜欢什么样的数据存储？

> ID：10716090
> 
> 赞同：0
> 
> 时间：2012-05-23T08:20:42.077
> 
> 标签：android, android-layout, android-intent

我做了一个使用共享偏好的应用程序，其中存储容量太低，只需添加移动 IMEI 号和 OTP 号等，现在我计划创建用于向批量号码发送短信的 appln。但一开始我被困在使用**SHARED PREFERENCE**是否好。任何建议请告诉我。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:49:21.550

在处理更大的数据集时，使用数据库始终是更好的方法

# ruby-on-rails - 带有子域的 Rails 页面缓存

> ID：10716095
> 
> 赞同：2
> 
> 时间：2012-05-23T08:21:03.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, subdomain

有没有人成功实现了带有子域的 Rails 页面缓存？

现在，相同的文件正在子域之间提供服务，因为 rails 无法识别子域已更改的事实。

我希望我的页面缓存看起来像这样：

```
/public/cache/subdomain1/index.html
/public/cache/subdomain1/page2.html
/public/cache/subdomain2/index.html
/public/cache/subdomain2/page2.html 
```

我正在使用 nginx 来提供这些页面，因此需要更改其配置文件以在缓存这些文件后找到这些文件，这不是问题。目前对我来说，症结在于轨道末端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:20:08.673

我用了这个人的[帖子](http://www.agileproductions.com/blog_posts/16-Page-Caching-by-Subdomain-in-Rails-and-Nginx)（做了一些修改）

```
class ApplicationController < ActionController::Base

  # Cache pages with the subdomain
  def cache_page(content = nil, options = nil, gzip = Zlib::BEST_COMPRESSION)
    path = [nil, request.subdomains, nil].join("/") # nil would add slash to 2 ends
    path << case options
    when Hash
      url_for(options.merge(:only_path => true, :skip_relative_url_root => true, :format => params[:format]))
    when String
      options
    else
      if request.path.empty? || request.path == '/'
        '/index'
      else
        request.path
      end
    end
    super(content, path, gzip)
  end 
```

然后只需使用通常的 caches_page 类方法。

这样做的缺点是，我还需要破解 expire_page （帖子中没有提到）。如果存在，Rails 也不会使用现有的页面缓存，因为它不会在默认路径中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:41:01.220

您需要根据正在使用的子域更新缓存位置。

您可以添加一个`before_filter`来执行此操作。

一个例子是：

```
class ApplicationController < ActionController::Base
  before_filter :update_cache_location

  def update_cache_location
    if current_subdomain.present?
      ActionController::Base.page_cache_directory = "#{Rails.public_path}/cache/#{current_subdomain.directory_name}"
    end
  end
end 
```

# c++ - 基于 STL 双端队列的树与自己的二叉树实现？

> ID：10716104
> 
> 赞同：3
> 
> 时间：2012-05-23T08:22:02.177
> 
> 标签：c++, binary-tree

这是 [对二叉树的列表实现是否可扩展？](https://stackoverflow.com/questions/10715389/is-a-list-implementation-of-binary-tree-scalable/10715698)

使用线性数组（stl向量）或stl deque完成树实现的优点或缺点是什么

而不是一个具有左右指针的单个节点的二叉树？

假设：树将被预先计算并且一旦构建就不会被修改，并且只会用于搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:30:23.247

好吧，我会说它是这样的：

*   使用指针树，您将内存用于*数据和指向数据*的指针，而您只为*数据*`std::vector`分配内存（容器处理自身的迭代）
**   如果你使用`std::vector`，你的记忆是本地化的。例如，如果你想访问一棵树的单个完整*级别*，这将在内存中是连续的，而单独分配的各个节点，你会像兔子一样跳过内存访问所有这些*   如果您分配单个节点，您实际上无法分配它们，除非单独分配。这意味着对`malloc`-euqivalent 函数的大量调用。*（在C*中有一些技巧可以用来避免这种情况，它们仍然可以`C++`在`std::vector`.*   创建向量时，您可以使用它`std::vector.reserve()`来预分配所有内存。此外，如果您知道向量是如何操作的，您就会知道它会在`malloc`每次启动树的新级别时调用 -equivalent 来保留内存 - 分配的数量应该大致等于树中的级别数*   访问向量的元素非常简单，在基于向量的完全填充的二叉树中导航非常直观且易于使用*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:33:41.320

数组（包括`std::vector`）提供了良好[的引用局部性](https://en.wikipedia.org/wiki/Locality_of_reference)并节省了一些空间，因为它们将数据保存在一个连续的块中，而指针树可能会将其节点分散在整个内存中并产生分配器开销。

对于预先计算的树，最好将其存储在`vector`. 使用[二叉堆](https://en.wikipedia.org/wiki/Binary_heap#Heap_implementation)常用的布局可以非常有效地存储*完整*（或接近完整）的二叉树。

（可以通过选择一个好的分配器来避免树中的开销，但是 C++ 标准库只提供了一个通用的分配器。）*

# php - PHP 和存在 SQLITE

> ID：10716109
> 
> 赞同：-2
> 
> 时间：2012-05-23T08:22:17.963
> 
> 标签：php, sqlite, pdo

要插入数据、更新数据和删除表，是否需要将现有的 sqlite 数据库复制到 PHP 中的 :memory: 中？

表定义：

```
CREATE TABLE [appointment] (
    _appId integer NOT NULL PRIMARY KEY AUTOINCREMENT
   ,_id integer NOT NULL
   ,svc_id integer NOT NULL
   ,cust_id integer NOT NULL
   ,person_nm text NOT NULL
   ,cust_cno integer NOT NULL
   ,full_add text NOT NULL
   ,book_dt date NOT NULL
   ,app_dt date NOT NULL
   ,app_time time NOT NULL
   ,service text NOT NULL
   ,status text NOT NULL
   ,nxt_dt date
   ,nxt_time time
   ,att_dt date
   ,att_time time
   ,remark text
); 
```

和更新声明是：

```
UPDATE appointment 
SET svc_id='$sid',app_dt='$dt',app_time='$tim',full_add='$add',cust_cno='$cno' 
WHERE _appId='$i'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:38:14.997

不可以。您可以直接访问和更改存储在文件中的 SQLite 数据库。

# sharepoint - 将 Active Directory 组用户添加到 SharePoint 网站组

> ID：10716112
> 
> 赞同：0
> 
> 时间：2012-05-23T08:22:24.253
> 
> 标签：sharepoint, active-directory, spgroup

我们需要定期将 Active Directory 组中的用户添加到共享点组。换句话说，我们需要将 AD 组中的用户同步到 Share Point 组。

我们正在研究执行此操作的服务/工作流程。

请帮助我们解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:27:34.710

**Perhabs you can use SPUtility.GetPrincipalsInGroup** ([MSDN](http://msdn.microsoft.com/en-us/library/ms457726%28v=office.14%29.aspx))

```
bool reachedMaxCount;
SPWeb web = SPContext.Current.Web;
int limit = 100;
int group = "Domain\\SecurityGroup";
SPPrincipalInfo[] users = SPUtility.GetPrincipalsInGroup(web, group, limit, out reachedMaxCount); 
```

There is a good example how to use: [https://stackoverflow.com/a/6153943/655293](https://stackoverflow.com/a/6153943/655293)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:12:17.513

据我所知，没有开箱即用的 Web 服务或工作流来执行此任务。`SPUtility.GetPrincipalsInGroup`@HW90 建议的方法绝对为您指明了正确的方向。

我建议您编写自定义 SharePoint 计时器作业 ( [SPJobDefinition](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spjobdefinition.aspx) )。[在SPJobDefinition.Execute 方法](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spjobdefinition.execute)中执行所需的操作：

```
public override void Execute(Guid targetInstanceId)
{
  using (SPSite site = new SPSite("http://server/the/site/collection")
  {
    using (SPWeb web = site.OpenWeb())
    {
      int limit = 100;
      string group = "Domain\\SecurityGroup";
      SPPrincipalInfo[] users = SPUtility.GetPrincipalsInGroup(web, group, limit, out reachedMaxCount);

      SPGroup siteGroup = web.SiteGroups["TheGroup"];

      // clear the group
      for (int i = siteGroup.Users.Count - 1; i >= 0; i--)
      {
        siteGroup.Users.Remove(i);
      }

      foreach (SPPrincipalInfo pi in users)
      {
        siteGroup.AddUser(web.EnsureUser(pi.LoginName));
      }
    }
  }
} 
```

# facebook - 应用程序的 Facebook 访问令牌是否过期？

> ID：10716117
> 
> 赞同：1
> 
> 时间：2012-05-23T08:22:50.103
> 
> 标签：facebook, facebook-oauth

我找到的答案是[No](https://developers.facebook.com/docs/authentication/applications/)和[Yes](https://developers.facebook.com/tools/access_token/)。

[上一个问题](https://stackoverflow.com/questions/9401563/does-a-facebook-applications-access-token-expire)并没有真正得到回答（更不用说那里引用的链接有些旧了）谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T08:32:30.693

访问令牌确实过期。如果您使用offline_access 权限获取访问令牌，则它不会在更长的时间内过期。几个月的经验。

# r - 向 ordiplot3d() 添加点

> ID：10716121
> 
> 赞同：2
> 
> 时间：2012-05-23T08:23:08.657
> 
> 标签：r, rgl, vegan

我正在制作一个 PCA，`vegan{}`并且我还想按因素标记我的点（而不是按它们的唯一行标识，这是 的默认值`biplot.rda()`）。对于我的 2D PCA，我使用了Gavin Simpson建议[的方法。](http://r.789695.n4.nabble.com/Different-labels-for-subsets-of-points-in-a-PCA-or-RDA-biplot-td880695.html)我想问问聪明的 R 社区是否有这种方法的 3D 版本来创建自定义标签的 PCA。这是适用于 2D PCA 的方法：

```
#Relabel a la Gavin Simpson:
site.scr<-scores(dat.pca,display="sites",scaling=2,choices=c(1,2,3))
spp.scr<-scores(dat.pca,display="species",scaling=2,choices=c(1,2,3))

## generate x,y lims
xlims <- range(site.scr[,1], spp.scr[,1])
ylims <- range(site.scr[,2], spp.scr[,2])

## plot what you want, but leave out sites
biplot(dat.pca, display = "species", xlim = xlims, ylim = ylims)
points(site.scr[39:65,2:3],col="green",pch=1)   #These sites are in green
points(site.scr[1:38,2:3],col="brown",pch=3)        #These sites are in brown 
```

我已经`ordirgl()`在我的一台计算机上完成了这项工作，但是有一些 R 版本/OS 组合不能很好地与 rgl 配合使用（这对许多人来说似乎是一个问题），所以我希望能够两者的情节`rgl()`和`ordiplot3d()`

```
ordiplot3d(dat.pca, display = "species", scaling = 3) 
```

这会将点绘制到 3D 空间上，而不是 biplot.rda 的向量上（第一个问题——当我使用 rgl 时我也遇到了这个问题——我认为这些点是在普通`biplot.rda()`PCA 中绘制的向量的末端）。这对我来说不是很关心，但如果有人知道如何在 ordirgl 中绘制这些向量并标记它们，我想知道。更大的问题是，一旦制作完成，我很难向 ordiplot3d 添加点。理想情况下，这将类似于`points()`. 我在几个不同的问题线程中看到了这一点，但如果有一个不需要 rgl 的优雅解决方案会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:55:22.067

[我编写了一个名为 pca3d ( http://cran.r-project.org/web/packages/pca3d/index.html](http://cran.r-project.org/web/packages/pca3d/index.html) )的小包，它也可以创建 3D 双图。我独立地缩放样本和变量，因此变量负载是直接可比的。但是，它是测试版，所以要小心。

![在此处输入图像描述](../Images/fe5e6d2ba6e542c91703300fba910613.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:54:08.980

首先是警告；目前用于绘制 3d 双图的基础代码（包**scatterplot3d**）不允许我们对*所有*轴进行相同的缩放。因此双标图不正确，因为第三个维度不能以与其他两个相同的单位进行缩放。**Jari 为scatterplot3d**包的维护者提供了一个补丁，允许对其进行控制，但我们正在等待它被接受等。

您缺少的是`ordiplot3d()`（因为它使用`scatterplot3d()`）返回一个对象，该对象包含允许您将点等添加到现有 3d 散点图的函数。

这是一个例子

```
## continue example from ?biplot.rda
require(vegan)
## produces 'mod' 
example(biplot.rda)
## why do we need this?
par(ask = FALSE)

## grab the scores on axes you require; mod == your fitted rda/pca 
site.scr <- scores(mod, display = "sites", scaling = 3, choices = 1:3) 
spp.scr <- scores(mod, display = "species", scaling = 3, choices = 1:3)

## do the 3d plot but suppress plotting of the species,
## though plot is scaled to accommodate them
ordi <- ordiplot3d(mod, display = "species", scaling = 3, type = "n") 
```

现在看看对象`ordi`它是一个复杂的对象返回函数，允许您向当前绘图添加点：

```
> str(ordi, max = 1)
List of 7
 $ xyz.convert   :function (x, y = NULL, z = NULL)  
 $ points3d      :function (x, y = NULL, z = NULL, type = "p", ...)  
 $ plane3d       :function (Intercept, x.coef = NULL, y.coef = NULL, lty = "dashed", lty.box = NULL, 
    ...)  
 $ box3d         :function (...)  
 $ origin        : num [1, 1:2] 1.67 1.33
 $ envfit.convert:function (object)  
 $ points        : num [1:30, 1:2] -0.146 2.776 1.291 3.102 2.816 ...
  ..- attr(*, "dimnames")=List of 2
 - attr(*, "class")= chr [1:2] "ordiplot3d" "ordiplot" 
```

现在通过说明的方式，用一个颜色和一个圆圈绘制前 10 个物种，用`points3d()`返回的颜色绘制第二个 10 个不同的颜色和绘制字符等：

```
cols <- bgs <- c("red","green","blue")
pchs <- 21:23
ordi$points3d(spp.scr[1:10,1], spp.scr[1:10,2], spp.scr[1:10,3],
              col = cols[1], bg = bgs[1], pch = pchs[1])
ordi$points3d(spp.scr[11:20,1], spp.scr[11:20,2], spp.scr[11:20,3],
              col = cols[2], bg = bgs[2], pch = pchs[1])
ordi$points3d(spp.scr[21:30,1], spp.scr[21:30,2], spp.scr[21:30,3],
              col = cols[3], bg = bgs[3], pch = pchs[3]) 
```

产生：

![向 3d 散点图添加点的示例](../Images/bf6099c93c1a0f0af7f9779272b11cd3.png)

虽然请注意这不是一个真正的双标图，因为在将具有相等缩放的能力添加到`scatterplot3d()`.

# ios - if 语句不返回任何内容

> ID：10716123
> 
> 赞同：0
> 
> 时间：2012-05-23T08:23:20.460
> 
> 标签：ios, string, if-statement, cocos2d-iphone

**完整的类代码在这里： http:** [//pastebin.com/rdjDGLJS](http://pastebin.com/rdjDGLJS)

编辑：取自原始海报评论的最新代码片段

```
NSMutableString *spriteType;

- (void) pickSpriteType {

    randomSpriteNumber = arc4random() % 2+1;

    switch (randomSpriteNumber) {
        case 1:
            spriteType = [NSMutableString stringWithFormat:@"typeOne"];
            break;

        case 2:
            spriteType = [NSMutableString stringWithFormat:@"typeTwo"];
            break;
    }
}

- (void) findSpriteNumber {

    levelNumberString = [NSMutableString stringWithFormat:@"%d",levelNumber];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"plist_enemies" ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
    spriteNumber = [[[dict objectForKey:spriteType] objectForKey:levelNumberString] intValue];
}

- (void) initSprite {
    [self moveUp];
    for(int i = 0; i<spriteNumber; i++) {
        if ([spriteType isEqualToString:@"typeOne"]) {
            NSLog(@"repeat");
        }
        if ([spriteType isEqualToString:@"typeTwo"]) {
            NSLog(@"repeat");
        }
    }
} 
```

原帖：

我正在使用带有 NString 的 if 语句，使用以下代码：

```
- (void) initSprite {
    for(int i = 0; i<spriteNumber; i++) {
        if (spriteType == @"typeOne") {
            NSLog(@"repeat");
        }   
    }  
} 
```

它应该记录“重复”“spriteNumber”的次数，只要字符串“spriteType”的内容为“typeOne”，但什么也没有发生。它不记录“重复”，但也没有任何错误。字符串'sprite type'的内容肯定是'typeOne'，并且spriteNumber > 0。

可以做些什么来解决这个问题？

**编辑**：我现在尝试了这样的代码：

```
- (void) initSprite {
for(int i = 0; i<spriteNumber; i++) {
if ([spriteType isEqualToString:@"typeOne"]) {
    NSLog(@"repeat");
}}} 
```

它返回一个错误，EXC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:43:39.907

我已经等了很长时间才使用这个我想出的关于编程世界中两种类型的平等的愚蠢故事。想象一下，你和你的另一半一起去野餐。你深爱着，所以你打包一份午餐让你们俩分享。如果有人要你指着你的午餐，你们都会指着同一份午餐。你们的午餐是`==`彼此的。现在假设你是大食客，所以你打包了两种不同的午餐，内容相同。现在当有人让你指点你的午餐时，你会指着不同的午餐。你的午餐是`!=`。但是，如果你看看里面的午餐是什么食物，它们的内容还是一样的。他们是`[isEqualTo]`彼此。你知道我要去哪里吗？

午餐是一个对象，你和你的另一半是指针。您在使用 时测试*指针等价*性（即午餐是哪一天）`==`，但这通常不是您想要的。您想要*对象等价*（即午餐中的食物）。

总之，使用`[isEqualTo]`而不是`==`->`if([spriteType isEqualToString:@"typeOne"])`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:25:25.890

不要对字符串使用 == 运算符。采用

```
if [string1 isEqualToString:string2] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T08:27:03.417

编辑：回复。保留 spriteType 的值。

看起来好像您正在尝试将 spriteType 用作类变量，但在设置它的值时并没有保留它。

```
spriteType = [NSMutableString stringWithFormat:@"typeOne"]; 
```

**stringWithFormat:**将返回一个自动释放的 NSString，它在调用它的方法范围之外是不可访问的。

让 spriteType 在整个类中工作的最简单方法是将其声明为 @property - 在这两种情况下，您都需要在 .h 文件中声明该属性并在 .m 文件中综合它。

弧

@property (nonatomic, strong) NSString* spriteType;

NON ARC -*你将负责释放 dealloc 中的值*

@property (nonatomic, 保留) NSString* spriteType;

原来的：

在 NSString 上使用 == 将测试 string 的两个实例是否确实相同（*指针等效*）。

您需要使用 NSString 方法**isEqualToString:**来测试这样的*对象等价*性-

```
if ([spriteType isEqualToString:@"typeOne"]) 
```

**isEqualToString：**相互测试字符串变量的内容......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T10:31:38.867

你确定`randomSpriteNumber = arc4random() % 2+1;`你的想法吗？在 Objective C 中，“+”的优先级高于模运算符（请参阅[http://www.techotopia.com/index.php/Objective-C_2.0_Operator_Precedence](http://www.techotopia.com/index.php/Objective-C_2.0_Operator_Precedence)），所以这很有效`%3`——因此允许返回 0 、1 或 2。你不处理 0。

# c++ - Detecting windows time changes by the user

> ID：10716124
> 
> 赞同：1
> 
> 时间：2012-05-23T08:23:34.813
> 
> 标签：c++, windows, date, settings

Is it possible to detect a change made by the user to windows date/time settings?
for example, if the user has changed the date from 23.5.2012 to 16.5.2012?
Are these changes registered somewhere?
I'll need to use a native API if there is one...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:26:53.163

See the [SystemEvents](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx) class. The SystemEvents class provides the ability to respond to specific types of system events. You can subscribe to the [TimeChanged](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.timechanged.aspx) event.

# java - 使用 Java 在 HTML 页面中提取动态呈现的内容

> ID：10716125
> 
> 赞同：3
> 
> 时间：2012-05-23T08:23:41.027
> 
> 标签：java, html, parsing, html-parsing

我有一个 HTML 页面

```
<html>
<head>
<!-- necessary java scripts -->
</head>
<body>
<div id="content"></div>
</body> 
```

使用该脚本，当页面呈现时，适当的 html 内容将与 id 为“content”的 div 元素一起放置。因此，在页面呈现后，会有大量带有 div 元素的 html 内容。

现在我需要使用 Java 在 div 元素中提取动态呈现的内容。任何人都可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:33:32.680

问题是您需要在 java 中评估页面上的脚本。你需要一些网络引擎来做到这一点。你可以看这里：[Embedding Gecko/Webkit in Java](https://stackoverflow.com/questions/2653949/embeding-gecko-webkit-in-java)并尝试使用 webkit 或 gecko 来加载页面。然后你可以使用一些java库来解析html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:28:30.743

您可以使用 javax.swing.text.html.HTMLEditorKit.Parser 解析 html。看看这个链接

[http://java.sun.com/products/jfc/tsc/articles/bookmarks/](http://java.sun.com/products/jfc/tsc/articles/bookmarks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:31:08.400

看看这些：

[http://java-source.net/open-source/html-parsers](http://java-source.net/open-source/html-parsers)

# objective-c - 核心情节：RealTimePlot - 放置静态 yAxis

> ID：10716126
> 
> 赞同：1
> 
> 时间：2012-05-23T08:24:01.437
> 
> 标签：objective-c, ios5, static, core-plot

我的问题是我不能在我的 RealTimePlot 示例中放置静态 yAxis（不移动）。在移动期间，xAxis 是静态的，但 yAxis 会消失。

我的代码是：

```
-(void)renderInLayer:(CPTGraphHostingView *)layerHostingView withTheme:(CPTTheme *)theme
{

    graph = [[[CPTXYGraph alloc] initWithFrame:bounds] autorelease];
    layerHostingView.hostedGraph = graph;

    graph.plotAreaFrame.paddingTop    = 15.0;
    graph.plotAreaFrame.paddingRight  = 15.0;
    graph.plotAreaFrame.paddingBottom = 55.0;
    graph.plotAreaFrame.paddingLeft   = 55.0;

    // Axes
    // X axis
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    x.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    x.minorTicksPerInterval       = 9;
    x.title                       = @"X Axis";
    x.titleOffset                 = 35.0;

    // Y axis
    CPTXYAxis *y = axisSet.yAxis;
    y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    y.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    y.minorTicksPerInterval       = 3;
    y.labelOffset                 = 5.0;
    y.title                       = @"Y Axis";
    y.titleOffset                 = 30.0;

    y.constraints = CPTMakeConstraints(CPTConstraintNone, CPTConstraintFixed);

    // Rotate the labels by 45 degrees, just to show it can be done.
    x.labelRotation = M_PI * 0.25;

    // Create the plot
    CPTScatterPlot *dataSourceLinePlot = [[[CPTScatterPlot alloc] init] autorelease];
    dataSourceLinePlot.identifier     = kPlotIdentifier;
    dataSourceLinePlot.cachePrecision = CPTPlotCachePrecisionDouble;

    CPTMutableLineStyle *lineStyle = [[dataSourceLinePlot.dataLineStyle mutableCopy] autorelease];
    lineStyle.lineWidth              = 3.0;
    lineStyle.lineColor              = [CPTColor greenColor];
    dataSourceLinePlot.dataLineStyle = lineStyle;

    dataSourceLinePlot.dataSource = self;
    [graph addPlot:dataSourceLinePlot]; 
```

}

我的 CorePlot 版本是 1.0。

任何的想法？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T23:06:19.537

`constraints`语法在 1.0 版本之前发生了变化。尝试

```
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# android - Android mapview bigger zoom

> ID：10716133
> 
> 赞同：1
> 
> 时间：2012-05-23T08:24:20.110
> 
> 标签：android, android-mapview

Is it possible to set bigger zoom than maximum zoom? I need to set bigger zoom to show custom layer, that has many detail in big zoom. It doesn't mather how would look google layer. Or is it possible to disable google layer and set bigger zoom?

# android - How can i Confirm request to friend?

> ID：10716138
> 
> 赞同：-2
> 
> 时间：2012-05-23T08:24:37.357
> 
> 标签：android, facebook-graph-api

I`m developing android application.I get requests friends from me/friendrequests . How can i Confirm request to friend ???

```
asyncRanFace.request("me/friendrequests",new RequestListener(){

                            public void onComplete(String res, Object state) {
                                try{
                                    JSONObject jsonRequest = Util.parseJson(res);
                                    JSONArray friendsRequestArray =  jsonRequest.getJSONArray("data");                                   
                                    JSONObject friendRequest;
                                    String fRId=null,fRNm= null;
                                    for(int i =0 ; i<friendsRequestArray.length(); i++){
                                        friendRequest= friendsRequestArray.getJSONObject(i);

                                        JSONObject temp= friendRequest.getJSONObject("from");

                                        fRId = temp.getString("id");
                                        fRNm= temp.getString("name");
                                        myRequestFriendsMap.put(fRId, fRNm);

                                    }

                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:12:51.040

您不能“接受”用户的好友请求，您只能使用 API 查看未完成的好友请求是什么。这是一种安全措施，因此恶意应用程序不会自动添加不需要的朋友。

[http://developers.facebook.com/docs/reference/api/user/#friendrequests](http://developers.facebook.com/docs/reference/api/user/#friendrequests)

只`GET`允许打电话。`POST`和`DELETE`调用，分别接受或删除，是不允许的。

# open-source - 轮胎店CMS

> ID：10716142
> 
> 赞同：0
> 
> 时间：2012-05-23T08:24:48.590
> 
> 标签：open-source, content-management-system, e-commerce

我想听听你的意见，什么开源 CMS 最适合在线轮胎店？基本上我需要它有高级搜索选项，所以我可以按轮胎高度、宽度、轮辋尺寸、季节类型等进行搜索。我在考虑 OpenCart，但它的搜索功能似乎非常有限。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:15:03.193

我发现 Magento 是最好的选择。许多扩展，出色的社区，良好的文档。

# sql - 将 Oracle 联接 (+) 从 Oracle PL/SQL 转换为 Microsoft T-SQL

> ID：10716145
> 
> 赞同：1
> 
> 时间：2012-05-23T08:24:55.650
> 
> 标签：sql

我有以下查询需要从 Oracel PL/SQL 转换为 T-SQL 以适应数据源更改。

Oracle 连接 (+) 如何转换为 T-SQL？

```
SELECT INA01 , SMYDESC , CASE WHEN INACONF = 'Y' THEN '0' ELSE '1' END  , INB15 , AZF03  , INAORIU  , ZX02  , INADATE  , INA04  , GEM02  , INA02  , INA11  , INA07  , INB03  , INB04  , IMA02 , INB09 , INB08 , INBUD02
       FROM INA_FILE , SMY_FILE , GEM_FILE , INB_FILE , IMA_FILE , AZF_FILE , ZX_FILE
       WHERE INA00 = '1'                                 
         AND INACONF <> 'X'
         AND INA01 = INB01
         AND INB04 = IMA01(+)
         AND SUBSTRING(INA01,1,5) = SMYSLIP(+)
         AND SUBSTRING(INA01,1,5) NOT IN ('0IN99','1IN03','0IN92','1IN04','0IN98')
         AND INA04             = GEM01(+)
         AND INB15             = AZF01(+)
         AND INAORIU           = ZX01(+)
         AND INACONF           = 'Y'                     
         AND inadate = to_date('2012/05/23', 'yyyy/mm/dd') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:51:16.027

您可能需要在 JOIN 子句中的列名前面添加表名：

```
SELECT INA01, SMYDESC, 
       CASE WHEN INACONF = 'Y' THEN '0' ELSE '1' END, 
       INB15, AZF03 , INAORIU , ZX02, INADATE, INA04, GEM02, INA02, 
       INA11, INA07, INB03, INB04, IMA02, INB09, INB08, INBUD02
FROM INA_FILE 
INNER JOIN INB_FILE ON INA01 = INB01
LEFT OUTER JOIN IMA_FILE ON INB04 = IMA01
LEFT OUTER JOIN GEM_FILE ON INA04 = GEM01
LEFT OUTER JOIN AZF_FILE ON INB15 = AZF01
LEFT OUTER JOIN SMY_FILE ON SUBSTRING(INA01,1,5) = SMYSLIP
LEFT OUTER JOIN ZX_FILE ON INAORIU = ZX01
WHERE INA00 = '1'                                 
AND INACONF <> 'X'
AND SUBSTRING(INA01,1,5) NOT IN ('0IN99','1IN03','0IN92','1IN04','0IN98')
AND INACONF = 'Y'                     
AND inadate = CONVERT(DATETIME, '05/23/2012', 101) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:30:24.580

这是`outer join`运算符的本机 Oracle 语法。

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm)

**upd**：为了帮助您实际*重写*此查询，我需要了解表结构，因为您在 where 子句中不使用任何表引用 - 只有列，这似乎是唯一的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:43:58.563

我对您的架构做了一些假设......但是像这样

```
 SELECT  INA01 , SMYDESC , CASE WHEN INACONF = 'Y' THEN '0' ELSE '1' END  , INB15 , AZF03  , INAORIU  , ZX02  , INADATE  , INA04  , GEM02  , INA02  , INA11  , INA07  , INB03  , INB04  , IMA02 , INB09 , INB08 , INBUD02
    FROM    INA_FILE join inb_file on ina01 = inb01
            left join SMY_FILE on SUBSTRING(INA01,1,5) = SMYSLIP
            left join GEM_FILE on INA04 = GEM01
            join INB_FILE on INA01 = INB01
            left join IMA_FILE on INB04 = IMA01
            left join AZF_FILE on INB15 = AZF01
    WHERE   INA00 = '1'                                 
            AND INACONF <> 'X'
            AND SUBSTRING(INA01,1,5) NOT IN ('0IN99','1IN03','0IN92','1IN04','0IN98')
            AND INACONF = 'Y'                     
            AND inadate = '2012-05-23' 
```

# mobile - 我在哪里可以找到获得 UAPROF 的好网站？

> ID：10716147
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:25:06.987
> 
> 标签：mobile, uaprof

我正在努力寻找一个好的 UAPROF 网站，但只有我能看到[http://www.uaprof.com/](http://www.uaprof.com/)。我需要 HTC 的 UAPROFS，在那个网站上很多链接都被破坏了。你知道另一个可以找到 UAPROFS 的网站或资源吗？

预先感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:20:22.957

[开放移动联盟验证器](http://validator.openmobilealliance.org/)保留[到经过验证的配置文件](http://validator.openmobilealliance.org/cgi/validation/profiles.html)的链接。然而，制造商确实删除了旧的配置文件，或者在某些情况下制造商不再存在，这可能就是您在 uaprof.com 上看到断开链接的原因。

通过搜索[“uaprof filetype:xml”](http://www.google.co.uk/search?q=uaprof%20filetype%3axml%20&oq=uaprof%20filetype%3axml%20&sugexp=chrome,mod=5&sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&num=100&complete=0)和[“uaprof filetype:rdf”](http://www.google.co.uk/search?q=uaprof%20filetype%3axml%20&oq=uaprof%20filetype%3ardf%20&sugexp=chrome,mod=5&sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&num=100&complete=0#num=100&hl=en&client=ubuntu&hs=Yrh&tbo=d&channel=cs&complete=0&q=uaprof%20filetype%3ardf&oq=uaprof%20filetype%3ardf&gs_l=serp.3...4364.5213.0.5300.0.0.0.0.0.0.0.0..0.0.les;..0.0...1c.1.2.serp.7dk5Af9xGWk&bav=on.2,or.r_gc.r_pw.&bvm=bv.41867550,d.dGI&fp=8a583eaadc0c82e3&biw=1366&bih=632) ，Google 是另一个很好的配置文件来源。

或者查看[WURFL](http://wurfl.sourceforge.net/)。这不是 UAProf，但数据是从 UAProf 派生的，它是 XML，因此更容易处理，并且经过整理，不会有同样的问题。

[DELI 网站上](http://delicon.sourceforge.net/)有更多的 UAProf 资源。

# crystal-reports - Crystal Reports in VB.net with datatable

> ID：10716148
> 
> 赞同：1
> 
> 时间：2012-05-23T08:25:09.480
> 
> 标签：crystal-reports

!!

I'm using crystal report in my project of vb.net. I'm using visual studio 2010,sql server2008 and SAP crystal report.there is an error that i can not overcome/solve.here is my code:

```
 Dim database As New Database
  Dim dr As DataRow
  Dim dt As Data.DataTable
  Dim report As New CrystalReportChalan
  Dim query1 As String
  Try
        query1 = "select per_name,f_name,per_address,rem_amount from person_info  "
        database.creatConn()
        dt = database.getDS(query1, "person_info")
        'dr = dt.Rows(0)
        MessageBox.Show(dt.Rows.Count)  // Here the no of rows displayed

        report.SetDataSource(dt)   //Error 'Report has no table'

        CrystalReportViewer1.ReportSource = report
        CrystalReportViewer1.Refresh()
Catch ex As Exception
        MessageBox.Show("Error: " & ex.Message)
End Try 
```

*   there is a separated class for Database connection
*   that class has function to get data from database.

# php - 显示信息

> ID：10716152
> 
> 赞同：0
> 
> 时间：2012-05-23T08:25:26.003
> 
> 标签：php, codeigniter

问题在索引函数内部是我要获取两个变量并使用它们运行一个函数来检查数据库中的值并查看它们是否匹配记录，如果匹配则验证来自电子邮件的激活但是我'正在试图弄清楚我应该如何处理这里的消息。我想要做的是显示一条成功激活的消息，并显示一条消息说它不是在相同页面加载的情况下成功激活。应该如何尝试？

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Activate extends CI_Controller { 

public function __construct()
{
    parent::__construct();
    $this->load->library('auth');
}

public function index($param1 = NULL, $param2 = NULL)
{
    //Config Defaults Start
    $msgBoxMsgs = array();//msgType = dl, info, warn, note, msg
    $cssPageAddons = '';//If you have extra CSS for this view append it here
    $jsPageAddons =  '';//If you have extra JS for this view append it here
    $metaAddons = '';//Sometimes there is a need for additional Meta Data such in the case of Facebook addon's
    $siteTitle = '';//alter only if you need something other than the default for this view.
    //Config Defaults Start

    //examples of how to use the message box system (css not included).
    //$msgBoxMsgs[] = array('msgType' => 'dl', 'theMsg' => 'This is a Blank Message Box...');

    /**********************************************************Your Coding Logic Here, Start*/

    $x = 0;
    if(($param1 !== NULL)&&($param2 !== NULL))
    {

        //params not null yay..
        if((isset($param1))&&((trim($param1) !== '')||(!empty($param1))))
        {
            if(!is_numeric($param1))
            {
              $x++;
            }
        }
        if((isset($param2))&&((trim($param2) !== '')||(!empty($param2))))
        {
            if(!preg_match('/^[A-Za-z0-9]+$/', $param2))
            {
              $x++;
            }
        }

        if($x !== 0)
        {
           $bodyContent = $this->config->item('defaultTemplate') ."error_page";
        }
        else
        {
           $bodyContent = $this->config->item('defaultTemplate') ."/usermanagement/forms/activate";//which view file
        }

    }
    else
    {
        $bodyContent = "error_page";
    }
    $bodyType = "full";//type of template   

    /***********************************************************Your Coding Logic Here, End*/

    //Double checks if any default variables have been changed, Start.
    //If msgBoxMsgs array has anything in it, if so displays it in view, else does nothing.      
    if(count($msgBoxMsgs) !== 0)
    {
        $msgBoxes = $this->msgboxes->buildMsgBoxesOutput(array('display' => 'show', 'msgs' =>$msgBoxMsgs));
    }
    else
    {
        $msgBoxes = array('display' => 'none');
    }

    if($siteTitle == '')
    {
        $siteTitle = $this->metatags->SiteTitle(); //reads 
    }

    //Double checks if any default variables have been changed, End.

    $this->data['msgBoxes'] = $msgBoxes;
    $this->data['cssPageAddons'] = $cssPageAddons;//if there is any additional CSS to add from above Variable this will send it to the view.
    $this->data['jsPageAddons'] = $jsPageAddons;//if there is any addictional JS to add from the above variable this will send it to the view.
    $this->data['siteTitle'] = $siteTitle;//defaults can be changed via models/metatags.php
    $this->data['bodyType'] = $bodyType;
    $this->data['bodyContent'] = $bodyContent;
    $this->load->view($this->config->item('defaultTemplate') .'/usermanagement/index', $this->data);
}

}

/* End of file activate.php */ 
/* Location: ./application/controllers/activate.php */ 
```

**编辑 ：**

我试图弄清楚我需要在哪里运行我的函数，该函数获取两个参数并根据数据库检查它们，然后如果结果返回 true，则用户进行验证。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Activate extends CI_Controller { 

public function __construct()
{
    parent::__construct();
    $this->load->library('auth');
}

public function index($param1 = NULL, $param2 = NULL)
{
    //Config Defaults Start
    $msgBoxMsgs = array();//msgType = dl, info, warn, note, msg
    $cssPageAddons = '';//If you have extra CSS for this view append it here
    $jsPageAddons =  '';//If you have extra JS for this view append it here
    $metaAddons = '';//Sometimes there is a need for additional Meta Data such in the case of Facebook addon's
    $siteTitle = '';//alter only if you need something other than the default for this view.
    //Config Defaults Start

    //examples of how to use the message box system (css not included).
    //$msgBoxMsgs[] = array('msgType' => 'dl', 'theMsg' => 'This is a Blank Message Box...');

    /**********************************************************Your Coding Logic Here, Start*/

    $x = 0;
    if(($param1 !== NULL)&&($param2 !== NULL))
    {

        //params not null yay..
        if((isset($param1))&&((trim($param1) !== '')||(!empty($param1))))
        {
            if(!is_numeric($param1))
            {
              $x++;
            }
        }
        if((isset($param2))&&((trim($param2) !== '')||(!empty($param2))))
        {
            if(!preg_match('/^[A-Za-z0-9]+$/', $param2))
            {
              $x++;
            }
        }

        if($x !== 0)
        {
           $bodyContent = $this->config->item('defaultTemplate') ."error_page";
           $message = 'User was not activated successfully! Please try again with the right credentials!';
        }
        else
        {
           $bodyContent = $this->config->item('defaultTemplate') ."/usermanagement/forms/activate";//which view file
           $message = 'User was activated successfully! You may now login!';
        }

    }
    else
    {
        $bodyContent = "error_page";
    }
    $this->data['message'] = $message;
    $bodyType = "full";//type of template   

    /***********************************************************Your Coding Logic Here, End*/

    //Double checks if any default variables have been changed, Start.
    //If msgBoxMsgs array has anything in it, if so displays it in view, else does nothing.      
    if(count($msgBoxMsgs) !== 0)
    {
        $msgBoxes = $this->msgboxes->buildMsgBoxesOutput(array('display' => 'show', 'msgs' =>$msgBoxMsgs));
    }
    else
    {
        $msgBoxes = array('display' => 'none');
    }

    if($siteTitle == '')
    {
        $siteTitle = $this->metatags->SiteTitle(); //reads 
    }

    //Double checks if any default variables have been changed, End.

    $this->data['msgBoxes'] = $msgBoxes;
    $this->data['cssPageAddons'] = $cssPageAddons;//if there is any additional CSS to add from above Variable this will send it to the view.
    $this->data['jsPageAddons'] = $jsPageAddons;//if there is any addictional JS to add from the above variable this will send it to the view.
    $this->data['siteTitle'] = $siteTitle;//defaults can be changed via models/metatags.php
    $this->data['bodyType'] = $bodyType;
    $this->data['bodyContent'] = $bodyContent;
    $this->load->view($this->config->item('defaultTemplate') .'/usermanagement/index', $this->data);
}

}

/* End of file activate.php */ 
/* Location: ./application/controllers/activate.php */ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:45:12.763

你可以尝试使用`$this->session->flashdata()`

# iis - 无法从自托管的 nuget 服务器下载包（404 错误）

> ID：10716156
> 
> 赞同：3
> 
> 时间：2012-05-23T08:25:37.900
> 
> 标签：iis, http-status-code-404, nuget

我安装了一个自托管的 Nuget 服务器，如此处[所述](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)。我正在使用 Windows 2008 R2、IIS 7.5 和 Nuget 1.7。

在 VS 中，我可以在包管理器窗口中看到我的自托管包，但是当我尝试安装其中任何一个包时，我收到一个错误“远程服务器返回错误：（404）未找到”。

帮助任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T16:53:40.367

请确保在 IIS 中将 .nupkg 扩展 mime 类型设置为 application/zip。

另请参阅这些讨论以获取更多信息：[问题 #707](http://nuget.codeplex.com/workitem/707)，[讨论 #246387](http://nuget.codeplex.com/discussions/246387)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:11:29.190

我必须执行 3 项操作才能最终使其正常工作

1) 我的一些包的扩展名为“.symbols.nupkg”，我发现 Nuget 服务器不能只提供这些包。如果我将包文件的扩展名从“.symbols.nupkg”更改为“.nupkg”，一切正常。

2）所有的包必须平放在包文件夹下（没有子文件夹）。

3）packages文件夹必须放在网站下面（原始位置很好，“~/Packages”）。我试图将它放在绝对路径“C:\NugetPackages”中，但它不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-12T15:30:18.520

假设您使用 IIS：

1.  允许目录浏览您拥有 nuget 包的虚拟目录
2.  将 .nupkg 扩展名的 mime 类型设置为 application/x-msdownload 这应该可以解决您的问题。

# python - nginx and supervisor setup in Ubuntu

> ID：10716159
> 
> 赞同：50
> 
> 时间：2012-05-23T08:25:44.843
> 
> 标签：python, django, apache, nginx, supervisord

I'm using django-gunicorn-nginx setup by following this tutorial [http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/](http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/) Upto nginx setup, it is working. Then I installed supervisor, configured it and then I reboot my server and checked, it shows 502 bad gateway. I'm using Ubuntu 12.04 LTS

/etc/supervisor/conf.d/qlimp.conf

```
[program: qlimp]
directory = /home/nirmal/project/qlimp/qlimp.sh
user = nirmal
command = /home/nirmal/project/qlimp/qlimp.sh
stdout_logfile = /path/to/supervisor/log/file/logfile.log
stderr_logfile = /path/to/supervisor/log/file/error-logfile.log 
```

Then I restarted supervisor and I run this command `$ supervisorctl start qlimp` and I'm getting this error

```
unix:///var/run/supervisor.sock no such file 
```

Is there any problem in my supervisor setup?

Thanks!

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-09-17T20:07:04.293

没有套接字文件可能意味着主管没有运行。它未运行的一个原因可能是您的 qlimp.conf 文件中存在某种错误。如果你做一个

```
sudo service supervisor start 
```

您可以查看是否是这种情况。如果主管已经在运行，它会说。如果它捕捉到错误，它通常会给你一个比 supervisorctl 更有帮助的错误信息。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-07-29T06:45:54.957

我也遇到了和你一样的问题，经过几次，解决方法如下：

1.  首先删除 apt-get supervisor 版本：

    ```
     sudo apt-get remove supervisor 
    ```

2.  杀死后端主管进程：

    ```
     sudo ps -ef | grep supervisor 
    ```

3.  然后获取最新版本（apt-get 版本为 3.0a8）：

    ```
    sudo easy_install(pip install) supervisor==3.0b2 
    ```

4.  回显配置文件（root权限）：

    ```
    echo_supervisord_conf > /etc/supervisord.conf 
    ```

5.启动supervisord：

```
 sudo supervisord 
```

6.进入supervisorctl：

```
 sudo supervisorctl 
```

什么都做了！玩得开心！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-11-06T16:56:08.080

尝试这个

```
cd /etc/supervisor
sudo supervisord
sudo supervisorctl restart all 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-23T08:42:26.663

您确定 supervisord 已安装并正在运行吗？当前是否有套接字文件`/var/run/supervisor.sock`？

该错误表明`supervisorctl`，控制 CLI 无法到达 UNIX 套接字以与`supervisord`守护程序通信。

您还可以检查和部分`/etc/supervisor/supervisord.conf`的值是否匹配。`unix_http_server``supervisorctl`

请注意，这是一个 Ubuntu 级别的问题，而不是 Python、Django 或 nginx 的问题，因此这个问题可能属于 ServerFault。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-10-16T22:26:16.910

在 Ubuntu 16+ 上，这似乎是由切换到 systemd 引起的，此解决方法可能会修复新服务器：

```
 # Make sure Supervisor comes up after a reboot.
 $ sudo systemctl enable supervisor

 # Bring Supervisor up right now.
 $ sudo systemctl start supervisor 
```

然后检查您的**主管 icon.conf [我的例子]**的状态

```
$ sudo supervisorctl status iconic 
```

[![在此处输入图像描述](../Images/86d54e6a93a7aee6743f71a09a37ba68.png)](https://i.stack.imgur.com/UT5aI.png)

PS：确保gunicorn在运行时不会出现任何问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-12T03:58:36.893

该错误可能是由于您没有权限。也许你可以通过这种方式修复错误，打开你的终端，输入`vim /etc/supervisord.conf`编辑文件，搜索行

```
[unix_http_server]
;file=/tmp/supervisor.sock   ; (the path to the socket file)
;chmod=0700                  ; socket file mode (default 0700) 
```

并删除字符串开头的分号`;file=/tmp/supervisor.sock`and `;chmod=0700`，重新启动您的supervisord。我建议你这样做。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-02T12:42:34.383

确保在`/etc/supervisor.conf`以下两个部分中存在

```
[unix_http_server]
file=/tmp/supervisor.sock ; path to your socket file

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-01T09:39:41.913

你可以做这样的事情： -

```
sudo touch /var/run/supervisor.sock
sudo chmod 777 /var/run/supervisor.sock
sudo service supervisor restart 
```

这绝对有效，试试这个。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-03T22:50:06.997

就我而言，主管没有运行。要发现我运行的问题：

```
sudo systemctl status supervisor.service 
```

问题是我的日志指向一个不存在的目录，所以我只需要创建它。

我希望它有帮助:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-19T06:30:54.203

```
touch /var/run/supervisor.sock
sudo supervisord -c /etc/supervisor/supervisord.conf 
```

并在 supervisorctl 重新启动所有

如果你想监听主管端口

```
ps -ef | grep supervisord 
```

如果你想杀死进程

```
kill -s SIGTERM 2503 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-07T13:26:40.030

创建一个conf文件并在下面添加行

请记住，为了使用 Nginx，您必须禁用系统启动时自动启动，这是您在安装 Nginx 时激活的。

[https://askubuntu.com/questions/177041/nginx-disable-autostart](https://askubuntu.com/questions/177041/nginx-disable-autostart)

**注意：所有主管进程必须处于“守护进程关闭”模式，才能与主管一起工作**

```
[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
startretries=5
stopasgroup=true
stopsignal=QUIT
numprocs=1
startsecs=0
process_name=WebServer(Nginx)
stderr_logfile=/var/log/nginx/error.log
stderr_logfile_maxbytes=10MB
stdout_logfile=/var/log/nginx/access.log
stdout_logfile_maxbytes=10MB 
```

`sudo supervisorctl reread && sudo supervisorctl update`

[![在此处输入图像描述](../Images/f2eb077d8ac2c096552715e2f328fc82.png)](https://i.stack.imgur.com/pMIMH.png)

# windows-7 - How to auto-upgrade program (Inno Setup) on windows 7 without being admin?

> ID：10716163
> 
> 赞同：0
> 
> 时间：2012-05-23T08:26:21.463
> 
> 标签：windows-7, inno-setup, user-permissions

I use Inno setup to install python package (py2exe) on the program files folder. the first installation require admin privileged and it is ok.

The application has automatically upgrade option (it download the new setup exe ad run it in silence mode)

**The problem is that it fails because the user is not admin.**

My first though was to install the first installation in {pf} folder, but to install the updated pyc in the user folder. and somehow to tell the app to check for pyc in this folder. But I don't know how to do it and if it can be done

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:20:22.810

如果没有要求/要求完全管理员访问权限，普通应用程序无法运行安装程序来更新系统范围的位置。

作为最佳实践，在升级之前提示/警告用户，UAC 提示应该不是问题。

# operating-system - 为什么变量的地址在修改后在fork（）系统调用中保持不变

> ID：10716164
> 
> 赞同：5
> 
> 时间：2012-05-23T08:26:21.553
> 
> 标签：operating-system

考虑以下代码片段。

```
if (fork() == 0)
{
     a = a + 5;
     printf("%d, %d \n", a, &a);
}
else
{
     a = a - 5;
     printf ("%d, %d \n", a,& a);
} 
```

AFAIK，当创建 fork() 时，父级的虚拟地址空间被复制到子级，并且子级和父级共享相同的物理页面，直到其中一个尝试修改。当孩子和父母中的一个修改变量时，父母的物理页面被复制到另一个孩子的页面并且物理页面保持私有。所以，这里的“a”值在孩子和父母中是不同的。但是当涉及到孩子和父母中“a”的地址时，输出是相同的。即使物理页面不同，我也无法弄清楚为什么地址保持不变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:33:13.930

的地址`a`不是实际的物理地址。

它是一个虚拟地址。
硬件/操作系统层将虚拟地址映射到物理地址（对您的应用程序不可见）。

因此，即使地址相同`number`，它们也不会映射到 ram 芯片上的相同物理内存。

PS。使用 printf() 打印地址（即指针）时最好使用“%p”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:47:05.820

响应几乎在您的问题中： 的物理页面`a`在修改后被复制（因此与父进程中的不同）`a`，但虚拟地址（您的程序通过 看到的`&a`）没有改变。

实际上，`a`在分配新值时更改虚拟地址会非常尴尬。考虑一下如果您之前存储了一个指向 的指针会发生什么`a`：

```
 int *p = &a;
 a = a - 5;
 printf("%d", *p) 
```

在第二行之后 p 将不再指向`a`，这是任何程序员都不会想到的行为。

对物理页面使用写时复制是对操作系统的一种优化，与您的程序行为无关：您可以考虑在 fork 时复制整个地址空间。

# c# - 调用扩展方法的设置结果

> ID：10716168
> 
> 赞同：20
> 
> 时间：2012-05-23T08:26:54.947
> 
> 标签：c#, unit-testing, nunit, moq

我正在尝试`Setup`返回对扩展方法的调用并收到：

`SetUp : System.NotSupportedException : Expression references a method that does not belong to the mocked object: m => m.Cache.GetOrStore<String>("CacheKey", () => "Foo", 900)`

`GetOrStore`引用作为扩展方法的 Cache 对象上的方法似乎有问题。

代码可以编译，但测试因此异常而失败。

我需要做什么来设置这样的扩展方法的结果？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T08:40:56.070

扩展方法不能像实例方法一样被模拟，因为它们没有在你的模拟类型上定义。它们在其他静态类中定义。由于您不能简单地模拟这些，您应该模拟扩展方法使用的所有方法/属性。

这是扩展方法如何将您的代码与其他类紧密耦合的示例。无论你做什么，你的类都依赖于那些静态方法。你不能模拟它并孤立地测试它。如果内部有任何逻辑，我建议重构您的代码以将这些方法移动到它们自己的类中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T08:36:33.093

Moq 无法模拟静态方法，因此您将无法模拟您的`GetOrStore`扩展。

取而代之的是模拟对象的`Get`and`Insert`方法`Cache`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-29T12:22:33.450

有可能，虽然不是很漂亮......我假设您的扩展方法中有一些内部缓存对象，或者在某处引用了某个缓存。您可以使用反射来替换内部对象来存储缓存。你在你的测试中得到这样的东西：

```
IFixture fixture = new Fixture().Customize(new AutoMoqCustomization());

Mock<ICache> internalCache = new Mock<ICache>();
internalCache.Setup(i => i.Get<String>("CacheKey")).Returns("Foo");

var cacheExtension = typeof(CacheExtensions);
var inst = cacheExtension.GetField("_internalCache", BindingFlags.NonPublic | BindingFlags.Static);
inst.SetValue(cacheExtension, internalCache.Object); 
```

请注意，此代码未经测试，但应该解释基本思想。

# jquery - 是否可以在没有任何 id 的情况下显示 div 的父级

> ID：10716173
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:27:09.000
> 
> 标签：jquery

我有一个 div 和 div 有一个跨度

我想要的是，当悬停 div 的跨度将可见。

我可以在不需要 div 的 id 的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:34:19.530

假设我正确理解了您的问题，这应该有效：

```
$("div").hover(
    function() { $("> span", this).show(); },
    function() { $("> span", this).hide(); }
); 
```

[**示例小提琴**](http://jsfiddle.net/9Y6ZR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:28:39.493

确实。只需使用`$('span').parent()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:35:56.667

```
$("div").hover(function(e) {
  $(e.target).find("span").show();
}, function(e) {
  $(e.target).find("span").hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:40:19.857

野刺，因为我不确定我是否理解您的问题。

```
$('span').on('hover', function(){
  $(this).parent('div').show();
}); 
```

`$(this)`是对`<span>`当前悬停的引用。然后我沿着 DOM( `.parent`) 向上移动并显示父级`<div>`。简单的。

# python - 将 python 升级到 2.7，将 Django 升级到 1.4，但它告诉我 No module named *

> ID：10716178
> 
> 赞同：1
> 
> 时间：2012-05-23T08:27:24.003
> 
> 标签：python, django

我刚刚在我的 Ubuntu 服务器上将我的 python 升级到 2.7，并将 Django 重新安装到 1.4。我使用 python Flup 将 Django 应用程序作为 fastcgi 运行，但是当我尝试重新启动应用程序时，它一直告诉我 No module named *

例如

```
File "./manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
...
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
ImportError: No module named * 
```

该问题是由旧 Django (1.3) 项目中的 manage.py 文件引发的，但根据文档[https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-和-管理-py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)

这就是我使用 python-flup 运行项目的方式

```
exec python ./manage.py runfcgi host=127.0.0.1 port=8083 maxchildren=40 pidfile=$PIDFILE --settings=expand.settings 
```

> 旧式的 manage.py 将继续像以前一样工作，直到 Django 1.6。在 1.5 中它会引发 DeprecationWarning

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:55:08.580

我通过查看 django 的源代码猜测您的项目布局或 python 路径有问题。

```
execute_from_command_line(sys.argv) 
```

运行以下代码片段（来自 django/core/management/ **init** .py），这很可能是您的错误的原因：

```
# Import the project module. We add the parent directory to PYTHONPATH to
# avoid some of the path errors new users can have.
sys.path.append(os.path.join(project_directory, os.pardir))
import_module(project_name)
sys.path.pop() 
```

# java - 如何释放 JScrollpane 使其不总是落到底部？

> ID：10716181
> 
> 赞同：3
> 
> 时间：2012-05-23T08:27:36.170
> 
> 标签：java, swing, jscrollpane

我在我的项目中添加了以下代码段，以在用户执行选择性能后强制 JScrollPane 自动下降到底部，但是，当我尝试将滚动条拖动到顶部时，它仍然被迫向下滚动到底部了，我想请教一下有什么办法解决吗？提前致谢。

```
private void autoScrollToBottom() {
    sdPanel.getTabScrollPane().getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener() {

        @Override
        public void adjustmentValueChanged(AdjustmentEvent e) {
            e.getAdjustable().setValue(e.getAdjustable().getMaximum());
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:51:59.653

尝试使用一些布尔标志来指示您是否应该移动滚动条。将其设置为`true`当您执行正确的操作时，然后在您的代码中：

```
@Override
  public void adjustmentValueChanged(AdjustmentEvent e) {
  if(isScrollingDownRequired) {
    e.getAdjustable().setValue(e.getAdjustable().getMaximum());
    isScrollingDownRequired = false;
  }
} 
```

# php - Move file with zend: permission errror

> ID：10716182
> 
> 赞同：0
> 
> 时间：2012-05-23T08:27:39.480
> 
> 标签：php, windows, zend-framework

I'm trying to upload an image with zend, but can't move the file because of permission error. What can I do? Thanks in advance

```
Windows Server 2008, IIS 
```

Error log:

```
move_uploaded_file(): Unable to move 'C:\inetpub\temp\PHP uploads\phpD05E.tmp' to 'C:\inetpub\test.ool.nu\public\banners\phpD05E.tmp' in C:\inetpub\test.ool.nu\library\Zend\File\Transfer\Adapter\Http.php on line 185 
```

# ios - 将适用于 iOS 的 ZIPArchive 添加到 xcode 时如何修复“未知类型名称”错误

> ID：10716184
> 
> 赞同：0
> 
> 时间：2012-05-23T08:27:43.307
> 
> 标签：ios, xcode4, compiler-errors, ziparchive

我已将 ziparchive 拖放到我的 xcode（**xcode 版本 4.3.2**）项目中，
我还检查了

```
"Copy items into destinations group's folder" (if needed) 
```

**和**

```
"Create groups for any added folders" 
```

但我收到以下错误（见附图）。
我真的不知道如何解决这个问题，这里有什么问题？

![](../Images/d642fb2924361b2ca22e13cbda946159.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:04:05.253

看看你最近写的一个标题。当这样的错误发生在我身上时，通常是因为我的头文件之一格式错误。这意味着它会运行到其他类导入的其他标头中。

# java - 在 Java 中显示数组中的第二大数字

> ID：10716186
> 
> 赞同：2
> 
> 时间：2012-05-23T08:27:53.690
> 
> 标签：java, arrays

大家好，我想找出数组中第二大的不接受负数。我使用了下面的代码，这个显示第二大没有只有正面没有。所以请建议我如何做到这一点。

```
class ArrayExample {
    public static void main(String[] args) {
        int secondlargest = 0;
        int largest = 0;
        Scanner input = new Scanner(System.in);
        System.out.println("Enter array values: ");
        int arr[] = new int[5];
        for (int i = 0; i < arr.length; i++) {
            arr[i] = input.nextInt();
            if (largest < arr[i]) {
                secondlargest = largest;
                largest = arr[i];
            }
            if (secondlargest < arr[i] && largest != arr[i])
                secondlargest = arr[i];
        }
        System.out.println("Second Largest number is: " + secondlargest);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:31:13.387

问题来自您在以下行中将两个变量初始化为 0 的事实：

```
int secondlargest = 0;
int largest = 0; 
```

相反，您应该将它们初始化为`Integer.MIN_VALUE`，然后它也适用于负值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:31:45.390

将最大和次大初始化为`Integer.MIN_VALUE`而不是零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:36:36.627

`secondlargest`用最小的`largest`负值 初始化变量。
使用此代码：

```
class ArrayExample {
        public static void main(String[] args) {
            int secondlargest = Integer.MIN_VALUE;
            int largest = Integer.MIN_VALUE;
            Scanner input = new Scanner(System.in);
            System.out.println("Enter array values: ");
            int arr[] = new int[5];
            for (int i = 0; i < arr.length; i++) {
                arr[i] = input.nextInt();
                if (largest < arr[i]) {
                    secondlargest = largest;
                    largest = arr[i];
                }
                if (secondlargest < arr[i] && largest != arr[i])
                    secondlargest = arr[i];
            }
            System.out.println("Second Largest number is: " + secondlargest);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:37:43.327

这对我来说适用于正值和负值。在循环之前，您需要用非常小的值初始化`largest`and`secondlargest`变量，通过这样做，您可以（几乎）确保数组中的所有其他值都大于它们：

```
int largest = Integer.MIN_VALUE;
int secondlargest = Integer.MIN_VALUE; 
```

循环内部：

```
if (arr[i] > largest) {
    secondlargest = largest;
    largest = arr[i];
}

else if (arr[i] != largest && arr[i] > secondlargest) {
    secondlargest = arr[i];
} 
```

循环后：

```
if (secondlargest != Integer.MIN_VALUE)
    System.out.println("Second Largest number is: " + secondlargest); 
```

请注意，对于数组中的所有元素恰好是 （不太可能）的情况，需要最后一次检查`Integer.MIN_VALUE`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T09:16:35.127

我认为这种方法可能很有用，它需要 n+log(n)-2 次比较

```
 import java.util.ArrayList;

 public class SecondLargest {
 static ArrayList<ArrayList<Integer>> level = new ArrayList<ArrayList<Integer>>();

public static void main(String[] args) {
    int input[]={9,8,7,4,5,6,1,2,3,1,1,21,33,32,1,2,3,12,3,2,1};
    ArrayList<Integer> arr= new ArrayList<Integer>();

    for(int i=0;i<input.length;i++){
        arr.add(input[i]);
    }
    level.add(arr);
    seconLarger(arr);
    System.out.println(SecondLarge(level));
}

private static ArrayList<Integer> seconLarger(ArrayList<Integer> arr) {
    ArrayList<Integer> tmp= new ArrayList<Integer>();
    if (arr.size()==1)
    {
        return arr;
    }

if(arr.size()%2==0)
    {
        for(int i=0;i<arr.size();i=i+2)
        {
            if(arr.get(i)>arr.get(i+1))
            {
                tmp.add(arr.get(i));
            }
            else
            {
                tmp.add(arr.get(i+1));
            }
        }

    }   
else 
    {
        for(int i=0;i<arr.size()-1;i=i+2)
        {
            if(arr.get(i)>arr.get(i+1))
            {
                tmp.add(arr.get(i));
            }
            else
            {
                tmp.add(arr.get(i+1));
            }
        }
        tmp.add(arr.get(arr.size()-1));
    }
level.add(tmp);
return seconLarger(tmp);
}

private static int SecondLarge(ArrayList<ArrayList<Integer>> li)
{
    int li_size=li.size();
    int large=li.get(li_size-1).get(0);
    int secondlarge=0;
    int tmp=0;
    for(int i=li_size-2;i>=0;i--)
    {
        ArrayList<Integer> arr = li.get(i);
        if(large==arr.get(tmp))
        {
            if(tmp+1<arr.size())
            {
                if(secondlarge<arr.get(tmp+1))
                {
                    secondlarge=arr.get(tmp+1);
                }
            }
        }
        else
        {
            if(secondlarge<arr.get(tmp))
            {
                secondlarge=arr.get(tmp);
            }
            tmp=tmp+1;

        }

        tmp=tmp*2;
    }
    return secondlarge;
}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-28T09:36:18.530

```
package com.demo.mum;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

/**
 * @author cyruses
 * 
 */
public class SecondLargest {
    public static int largest = Integer.MIN_VALUE;
    public static int secondLargest = Integer.MIN_VALUE;

    public static void main(String args[]) throws IOException {

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter the Size of Array:");
        int n = Integer.parseInt(br.readLine());
        int a[] = new int[n];
        System.out.println("Enter the elements on array:");
        for (int i = 0; i < a.length; i++) {
            a[i] = Integer.parseInt(br.readLine());
        }
        System.out.println("Elements you entered are:");
        for (int i = 0; i < a.length; i++) {
            System.out.println("a[" + i + "]" + "=" + a[i]);
        }
        if (a.length <= 2) {
            if (a[0] == a[1]) {
                System.out.println("Theres no second largest number in your array");
            } else {
                System.out.println("SecondLargest:" + secondLargest(a));
            }
        } else {
            System.out.println("SecondLargest:" + secondLargest(a));
        }
    }

    private static int secondLargest(int[] a) {

        for (int i = 0; i < a.length; i++) {
                if (a[i] > largest) {
                    secondLargest = largest;
                    largest = a[i];
                } else if (a[i] > secondLargest) {
                    secondLargest = a[i];
                }
            }
        return secondLargest;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-03T13:23:03.990

或者这里是一个不依赖 Integer.MIN_VALUE 的花哨的 Java 实现

```
int findSecondHighest(int[] arr){
    if(arr == null || arr.length < 2){
        throw new IllegalArgumentException();
    }

    int fh,sh;

    if(arr[0]>=arr[1]){
        fh = arr[0];
        sh = arr[1];
    }else{
        fh = arr[1];
        sh = arr[0];
    }

    for (int i = 2; i < arr.length; i++) {
        if(fh < arr[i]){
            sh = fh;
            fh = arr[i];
        }else if(sh < arr[i]){
            sh = arr[i];
        }
    }

    return sh;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-30T13:01:52.930

而不是将第二大数字初始化为最小值或零。您可以按照以下代码获得第二大数字。

```
import java.util.Scanner;

public class SecondLargestNumber {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int[] a;
        int n;
        System.out.println("Enter number of elements");
        n = scanner.nextInt();
        a = new int[n];
        for(int i=0; i<n; i++) {
            a[i] = scanner.nextInt();
        }
        int secondLargestNumber = a[0];
        int largestNumber = a[0];
        int count = 1;
        for(int i=1; i<a.length; i++) {
            if(a[i] >= largestNumber) {
                if(a[i] == largestNumber) {
                    count++;
                } else {
                    count = 1;
                }
                secondLargestNumber = largestNumber;
                largestNumber = a[i];
            } else {
                if(secondLargestNumber == largestNumber && count == 1) {
                    secondLargestNumber = a[i];
                } else if(a[i] > secondLargestNumber) {
                    secondLargestNumber = a[i];
                }
            }
        }
        System.out.println("Second Largest Number: " + secondLargestNumber);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-28T18:32:24.527

```
public static void main(String[] args) {

    Scanner in = new Scanner(System.in);
    System.out.println("Enter array size = ");
    int size=in.nextInt();
    int[] n = new int[size];
    System.out.println("Enter "+ size +" values ");

    for(int i=0;i<n.length;i++)
        n[i] = in.nextInt();
    int big=n[0],sbig=n[0];

    // finding big, second big
    for(int i=0;i<n.length;i++){
        if(big<n[i]){
            sbig=big;
            big=n[i];
            }else if(sbig<n[i])
                sbig=n[i];
    }
    // finding second big if first element itself big
    if(big==n[0]){
        sbig=n[1];
        for(int i=1;i<n.length;i++){
            if(sbig<n[i]){
                sbig=n[i];
                }
        }
    }       

    System.out.println("Big "+ big+" sBig "+ sbig);

    in.close();
} 
```

# php - PHP 速记 If/Else

> ID：10716194
> 
> 赞同：-3
> 
> 时间：2012-05-23T08:28:28.373
> 
> 标签：php, shorthand

当这是真的时，我希望发生两件事。它工作正常，但我不确定这是不是很好的编程。

```
$a =1;  
($a == 1) ? (($b= 'val1') && ($c= 'val2')) : null;
echo $b . '<br/>';
echo $c; 
```

我可以简单地用 if else 写，但这样，它很聪明。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:32:34.657

简单的 ...

```
<?php
$age = 20;
$status = ($age >= 18) ? "adult" : "kid";
echo $status;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:32:38.650

这不好。你应该使用`if`的是这种情况，它更适合。

请注意，将 PHP 和 HTML 混合在一个文件中是不好的。为此，您必须使用模板引擎（例如[Smarty](http://www.smarty.net/)）。否则无论如何也不能称为好的编程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:34:51.163

那是**糟糕**的风格。永远不应该在实际代码中使用它。

顺便提一句。如果您热衷于探索，即使这也适合您：

```
<?php
$a=1;
$a==1 && ($b='val1') && ($c='val2');
echo $b;
echo $c;
?> 
```

这来自[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T08:32:43.627

如果第一个条件匹配，则将评估第二个和第三个条件。

```
$a == 1 AND $b = 'val1' AND $c = 'val2'; 
```

# zend-framework - 如何在一个文件中连接 zend_Db

> ID：10716205
> 
> 赞同：2
> 
> 时间：2012-05-23T08:28:59.650
> 
> 标签：zend-framework, zend-db

当我想将 zend 框架中的数据库与 zend_Db 连接时，在每个控制器或模型中必须编写以下代码：

```
$params = array(
'host'           => '127.0.0.1',
'username'       => 'webuser',
'password'       => 'xxxxxxxx',
'dbname'         => 'test',
'charset'        => 'utf8'
); 
```

但是当使用 Doctrine 时，在 application.ini 中编写这段代码就足够了

```
doctrine.dsn = "mysql://user:pass@localhost/dbase" 
```

我如何在每个文件中使用 zend_Db 而没有设置连接设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:36:01.553

打开

```
application/configs/application.ini 
```

添加以下行

```
resources.db.adapter = PDO_MYSQL
resources.db.isDefaultAdapter = true
resources.db.params.host = localhost
resources.db.params.username = root
resources.db.params.password = 
resources.db.params.dbname = foo 
```

然后在你的 Bootstrap.php

做

```
public function _initSetup()
{
$this->bootstrap('db');
} 
```

然后无论何时何地你需要数据库实例只需做

```
$db = Zend_Db_Table::getDefaultAdapter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:58:51.327

有两种方法，一种是通过此代码使用您的 configuration.ini 文件：

```
resources.db.adapter = PDO_MYSQL
resources.db.params.host = localhost
resources.db.params.username = root
resources.db.params.password = ''
resources.db.params.dbname = dbname
resources.db.params.driver_options.1002 = "SET NAMES utf8;" 
```

或通过使用 hte 适配器类

```
$db = new Zend_Db_Adapter_Pdo_Mysql(array(
    'host'     => '127.0.0.1',
    'username' => 'webuser',
    'password' => 'xxxxxxxx',
    'dbname'   => 'test'
)); 
```

并且不要在 bootstrap.php 文件中添加任何函数

# c# - WPF 应用程序：将计算机从睡眠或休眠状态唤醒

> ID：10716206
> 
> 赞同：1
> 
> 时间：2012-05-23T08:29:10.713
> 
> 标签：c#, wpf, hibernation

我试图完成这项工作的最后一天：使用 WPF 应用程序将我的计算机从睡眠或休眠状态唤醒。我试过的都没有用。

到目前为止，我已经尝试了网络上最流行的示例。例如：

```
[DllImport("kernel32.dll")]
        public static extern SafeWaitHandle CreateWaitableTimer(IntPtr lpTimerAttributes, 
                                                                  bool bManualReset,
                                                                string lpTimerName);

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool SetWaitableTimer(SafeWaitHandle hTimer, 
                                                    [In] ref long pDueTime, 
                                                              int lPeriod,
                                                           IntPtr pfnCompletionRoutine, 
                                                           IntPtr lpArgToCompletionRoutine, 
                                                             bool fResume);

        public static void SetWaitForWakeUpTime()
        {
            DateTime utc = DateTime.Now.AddMinutes(2);
            long duetime = utc.ToFileTime();

            using (SafeWaitHandle handle = CreateWaitableTimer(IntPtr.Zero, true, "MyWaitabletimer"))
            {
                if (SetWaitableTimer(handle, ref duetime, 0, IntPtr.Zero, IntPtr.Zero, true))
                {
                    using (EventWaitHandle wh = new EventWaitHandle(false, EventResetMode.AutoReset))
                    {
                        wh.SafeWaitHandle = handle;
                        wh.WaitOne();
                    }
                }
                else
                {
                    throw new Win32Exception(Marshal.GetLastWin32Error());
                }
            }

            // You could make it a recursive call here, setting it to 1 hours time or similar
            Console.WriteLine("Wake up call");
            Console.ReadLine();
        } 
```

以及用法：

```
WakeUp.SetWaitForWakeUpTime(); 
```

我也试过这个例子（看看我如何在代码之后使用该方法）：

```
public event EventHandler Woken;

private BackgroundWorker bgWorker = new BackgroundWorker();

public WakeUp()
{
    bgWorker.DoWork += new DoWorkEventHandler(bgWorker_DoWork);
    bgWorker.RunWorkerCompleted += 
      new RunWorkerCompletedEventHandler(bgWorker_RunWorkerCompleted);
}

public void SetWakeUpTime(DateTime time)
{
    bgWorker.RunWorkerAsync(time.ToFileTime());
}

void bgWorker_RunWorkerCompleted(object sender, 
              RunWorkerCompletedEventArgs e)
{
    if (Woken != null)
    {
        Woken(this, new EventArgs());
    }
}

private void bgWorker_DoWork(object sender, DoWorkEventArgs e) 
{
    long waketime = (long)e.Argument;

    using (SafeWaitHandle handle = 
              CreateWaitableTimer(IntPtr.Zero, true, 
              this.GetType().Assembly.GetName().Name.ToString() + "Timer"))
    {
        if (SetWaitableTimer(handle, ref waketime, 0, 
                               IntPtr.Zero, IntPtr.Zero, true))
        {
            using (EventWaitHandle wh = new EventWaitHandle(false, 
                                                   EventResetMode.AutoReset))
            {
                wh.SafeWaitHandle = handle;
                wh.WaitOne();
            }
        }
        else
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }
    }
} 
```

}

以及用法：

```
WakeUp w = new WakeUp();
                w.Woken += new EventHandler(w_Woken);
                w.SetWakeUpTime(alarmDate.Subtract(new TimeSpan(0,0,0,20))); 
```

似乎没有什么能唤醒我的电脑。

我知道这是可能的，因为其他几个闹钟可以做到这一点。他们设法毫无问题地唤醒我的电脑，所以一定有一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:50:43.703

问题不是所有的计算机都支持这个问题。如果您的计算机不支持它，显然没有什么可做的。

# android - 使用 ChartDroid（或任何）在 Android 上的实时图表

> ID：10716209
> 
> 赞同：0
> 
> 时间：2012-05-23T08:29:29.477
> 
> 标签：android, eclipse, graph, charts

有没有实时显示图表的例子。我的温度传感器实时读取数据并将其发送到数据库，然后使用数据库中的数据构建图表实时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:35:33.060

嗨，我和你有同样的问题，目前正试图从我所遇到的情况中了解更多信息，我想你可以在这里按照这个例子进行操作，[http: //www.jjoe64.com/p/graphview- library.html](http://www.jjoe64.com/p/graphview-library.html)并且您可能可以通过网络服务更新值？也许 json 或类似的东西对你有用！

# php - 更改目录中的文件后更新数据库

> ID：10716212
> 
> 赞同：0
> 
> 时间：2012-05-23T08:29:48.577
> 
> 标签：php, mysql, file

考虑以下场景：您是一个包含一些文件的文件夹 (F)。一些元数据保存在这些文件中，数据库中有这些元数据的表。当文件更改时，我们希望数据库自动更改以反映这些更改。文件通过操作系统工具（而不是 php）更改。

实施该方案的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:40:20.743

如果可以，**操作系统工具应该触发**php 脚本来更新数据库。

较重的方法是监视文件夹的更改，从 cronjob 或更实时的服务，如[SOS 作业调度程序的](http://www.sos-berlin.com/modules/cjaycontent/index.php?id=72&page=osource_scheduler_features_en.htm#hot_folders)**Hot Folders**功能，例如

# google-analytics - 跟踪来自 Google Adwords 和 GA 的关键字并存储它们

> ID：10716213
> 
> 赞同：0
> 
> 时间：2012-05-23T08:29:48.793
> 
> 标签：google-analytics, google-analytics-api, google-ads-api

我在谷歌上运行了一个广告词活动。

用户输入关键字并通过他们看到的一些广告来到我的目标网页。现在我的登陆页面有 2 页。一个具有信息，可在广告点击后将用户直接带到登录页面 - 第二个是注册表单。现在我希望捕获他输入的关键字，然后进入此表单，以便我们了解用户对我们的广告的反应以及他们输入的内容。

复杂的部分是我们如何使用 GA - API 来追踪它。由于用户将登陆 /page 并最终可能从 /page1 注册，因此我们需要从他的 url 存储这些 kewyords（这是通过 url 中的 Value Track 代码完成的），然后存储在 cookie 中，以便他以后来/page1 和注册的关键字一样可以传递和存储在后台吗？

这是可能的吗？有些人可以帮忙解决这个问题 - 在哪里寻找如何实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:47:22.153

我在 AdWords 中将代码附加到我的广告网址：

```
www.example.com/?code=some-unique-id 
```

在登录页面上，我检查查询字符串参数，如果找到，将其存储在 cookie 中。

任何后续页面都可以访问 cookie，并从原始登录页面获取代码。

这只是广告组级别，但这只是一个开始。

# c# - 通过javascript在c#中停止事件

> ID：10716215
> 
> 赞同：2
> 
> 时间：2012-05-23T08:29:52.583
> 
> 标签：c#, javascript, asp.net

我有 2 个文本框和按钮的页面。当我按下按钮时，服务器上会出现一些事件。但如果文本框为空，我需要检查大小写。所以我为 button 制作了 2 个事件`onclick="Button1_Click" onclientclick="Button1_javaEvent()"`。在事件 Button1_javaEvent 我检查这种情况。如果文本框为空，是否可以在 javascript 中停止 Button1_Click 以及如何？

```
 function Button1_javaEvent() {
        var flag = false;
        var message_str = "";
        if (main_form.Text_login.value == "") {
                message_str += "Enter the login";
                message_str += "\n";
                flag = true;
            }
         if (main_form.Password_login.value == "") {
                message_str += "Enter the password";
                flag = true;
             }
             if (flag == true) {
                 alert(message_str);
             }
             else {                  
                   ????????????         
             }
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:40:03.077

在您的 javascript 函数中，如果您想要回发，则返回 true；如果您不想要回发，则返回 false。

像这样：

```
function Button1_javaEvent() {
    var flag = false;
        var message_str = "";
        if (main_form.Text_login.value == "") {
                message_str += "Enter the login";
                message_str += "\n";
                flag = true;
    }

    if (main_form.Password_login.value == "") {
                message_str += "Enter the password";
                flag = true;
    }

    if (flag == true) {
        alert(message_str);
    }

    return !flag;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:32:38.823

使用以下代码：

```
onclientclick="return Button1_javaEvent()" 
```

从函数返回 true/false `Button1_javaEvent()`，如果 Button1_javaEvent() 返回 true，则回发将发生，否则不会发生。

[参考在线样本进行测试](http://www.w3schools.com/aspnet/prop_webcontrol_linkbutton_onclientclick.asp)

# php - PHP：APC 已启用，但仍然无法工作？

> ID：10716216
> 
> 赞同：7
> 
> 时间：2012-05-23T08:29:54.860
> 
> 标签：php, apc

在我的新 Xubuntubox 上，我安装了`lamp-server`工具 , `php`，`php-apc`将该`extension=apc.so`行添加到 php.ini 并重新启动系统。Apache 和 PHP 似乎运行良好，但 APC 却不行。

所以我检查了 apc.php 文件的内容：

```
No cache info available. APC does not appear to be running. 
```

但在 php 信息中，它似乎已启用。看看怎么`php -i | grep 'apc'`说：

```
Additional .ini files parsed => /etc/php5/cli/conf.d/apc.ini,
apc
apc.cache_by_default => On => On
apc.canonicalize => On => On
apc.coredump_unmap => Off => Off
apc.enable_cli => Off => Off
apc.enabled => On => On             <- it is enabled
apc.file_md5 => Off => Off
apc.file_update_protection => 2 => 2
apc.filters => no value => no value
apc.gc_ttl => 3600 => 3600
apc.include_once_override => Off => Off
apc.lazy_classes => Off => Off
apc.lazy_functions => Off => Off
apc.max_file_size => 1M => 1M
apc.mmap_file_mask => no value => no value
apc.num_files_hint => 1000 => 1000
apc.preload_path => no value => no value
apc.report_autofilter => Off => Off
apc.rfc1867 => Off => Off
apc.rfc1867_freq => 0 => 0
apc.rfc1867_name => APC_UPLOAD_PROGRESS => APC_UPLOAD_PROGRESS
apc.rfc1867_prefix => upload_ => upload_
apc.rfc1867_ttl => 3600 => 3600
apc.serializer => default => default
apc.shm_segments => 1 => 1
apc.shm_size => 32M => 32M
apc.slam_defense => On => On
apc.stat => On => On
apc.stat_ctime => Off => Off
apc.ttl => 0 => 0
apc.use_request_time => On => On
apc.user_entries_hint => 4096 => 4096
apc.user_ttl => 0 => 0
apc.write_lock => On => On 
```

果然`php -m | grep 'apc'`也发现了`apc`。

您知道缺少什么，我无法正确使用它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T08:50:29.223

有**两种**方法可以运行 PHP。

您正在显示 PHP 的 CLI 配置，而 apc.php 没有使用它。

事实上，如果您`phpinfo()`通过浏览器检查，您可以看到没有加载任何 APC 扩展。

**解决方案：**`/etc/php5/cgi/conf.d/apc.ini`在（`cgi`不是）打开`cli`并再次将您的配置粘贴到那里。重新启动 Web 服务器 ( `sudo service httpd restart`)，瞧！

希望这可以帮助 ！

# git - Git获取哈希A和B之间的更改到工作目录

> ID：10716217
> 
> 赞同：3
> 
> 时间：2012-05-23T08:29:57.160
> 
> 标签：git, diff

在哈希 A 和哈希 B 之间的 git 中进行了一些更改（最新的分支在 Z 中 - 之后有数千次提交）。我想让 HEAD（我的本地）指向哈希 A，并在我的工作目录中包含在 A 和 B 之间进行的所有更改。

为什么？因为 git diff 不方便，我宁愿使用我的 IDE (IntelliJ IDEA) 拥有的 diff 工具。但是为此，我需要让 IDE 相信我已经更改了文件——因此是请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:51:13.717

我实际上找到了一种方法：

```
git checkout <hash A>
git diff –patch <hash A> <hash B> > patch.patch
patch –p1 –N < patch.patch 
```

一位同事还告诉我，我可以使用

```
git checkout <hash A>
git merge --squash <hash B> 
```

相反 - 但我还没有测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:00:54.087

你可以：

*   `git clone`您的本地存储库并将其重置为`hashB`（请参阅“ [Git 克隆远程存储库的特定版本](https://stackoverflow.com/questions/3555107/git-clone-particular-version-of-remote-repository)”）
*   `git reset hashA`在您的本地仓库中
*   清空其内容并替换它：IDEA 中的 Git 插件将检测与当前`HEAD`.

# javascript - 这 IE 8 之前的版本不支持 disabled 属性。有什么解决方法吗？

> ID：10716219
> 
> 赞同：2
> 
> 时间：2012-05-23T08:30:05.593
> 
> 标签：javascript, html, css, internet-explorer

IE 中不支持 disabled 属性，之前的版本 8 用于 HTML `<option>`disabled 属性。[http://www.w3schools.com/tags/att_option_disabled.asp](http://www.w3schools.com/tags/att_option_disabled.asp)

我们有哪些选项可以自定义外观并使该字段只读？

**警告！** 阅读问题两次，因为我们不问`<input disabled>`我们问`<option disabled>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:42:54.730

> *“IE 不支持禁用属性，HTML 禁用属性的早期版本 8。”*

这是完全不真实的。

甚至 IE7 也会使`<option disabled>`元素变暗并阻止选择它（但 IE6 不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:40:08.653

我唯一的建议（这根本没有经过测试）是在`<option>`标签上添加一个事件处理程序并让它`return false;`防止它被选中。

`select onchange`或者，当不应该单击所选值时，您可以挂接到处理程序并恢复为旧值。支持的浏览器`disabled` 不会受到影响，因此这可能对您有用。

# c# - asp.net mvc 在同一控制器上路由不同的操作

> ID：10716225
> 
> 赞同：3
> 
> 时间：2012-05-23T08:30:29.400
> 
> 标签：c#, asp.net-mvc, routing

我有一个名为的控制器`Raportare`，它有两个动作：`ReportA`和`ReportB`. 两者都根据提供的参数返回一个 excel 文件。

```
public ActionResult ReportA(int? month, int? year)
{
...
}
public ActionResult ReportB(int? month, int? year)
{
...
} 
```

我的 global.asax 对此有以下路由规则：

```
routes.MapRoute(
                "ReportA",
                "{Raportare}/{ReportA}/{month}/{year}",
                new { controller = "Raportare", action = "ReportA", month = UrlParameter.Optional, year = UrlParameter.Optional});

 routes.MapRoute(
                "ReportB",
                "{Raportare}/{ReportB}/{month}/{year}",
                new { controller = "Raportare", action = "ReportB", month = UrlParameter.Optional, year = UrlParameter.Optional }); 
```

但是，当我访问 mysite.com/Raportare/ReportB/5/2012 时，它会返回 ReportA 文件。如果我访问 mysite.com/Raportare/ReportB?month=5&year=2012，它工作正常。可能我在路由规则中做错了，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:39:35.150

您不需要为每个操作添加路由 - 它们像模板一样工作，第三个参数只是默认值。

```
routes.MapRoute(
  "reports",
  "Raportare/{action}/{month}/{year}",
  new {
    controller = "Raportare",
    action = "ReportA",
    month = UrlParameter.Optional,
    year = UrlParameter.Optional
  }
); 
```

将此放在 Global.asax.cs 中的默认规则之前，否则默认值可能首先匹配。

然后`mysite.com/Raportare/ReportB/5/2012`将调用该`ReportB`操作，因为它已在 url 中指定。

`mysite.com/Raportare`将调用`ReportA`，因为它是默认操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:50:52.373

您创建的路线基本相同。这就是为什么第一个匹配请求字符串成功并调用第一个操作的原因。

# objective-c - 动态分组表单元格

> ID：10716227
> 
> 赞同：0
> 
> 时间：2012-05-23T08:30:32.940
> 
> 标签：objective-c, cocoa

在我的故事板中，我有一个 UITableView 并且它具有以下属性

```
Style: Grouped
Content: Dynamic Prototypes 
```

我的问题是如何制作不同的组。当我现在运行该应用程序时，没有白色背景（只有默认的衬里背景），文本位于顶部。另外，如果我随后创建了这些动态组，我将如何设置它们的页眉和页脚？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:44:23.250

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 2;

    }
    -(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

        // implement your code

    }
    -(NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section{

        //implement your code
    }
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

     /// Write basic code//

switch (indexPath.section) {
        case 0:
//It belongs to  first group and implement your code.
               break;
        case 1:
//It belongs to second group and implement your code.
               break;

} 
```

我想对你会有帮助

# javascript - 尝试在 Firefox 扩展中获取标题属性时出错

> ID：10716234
> 
> 赞同：0
> 
> 时间：2012-05-23T08:30:58.933
> 
> 标签：javascript, firefox-addon

我有点困惑为什么这不起作用。我正在尝试获取正在浏览器中加载的文档的标题。不幸的是，我的代码产生了一个奇怪的错误。

```
let lg = Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService);

window.addEventListener("load", function p7Foxload() {

    window.removeEventListener("load", p7Foxload, false);

    gBrowser.addEventListener("DOMContentLoaded", function(event){
        if(event.originalTarget instanceof HTMLDocument) {
            lg.logStringMessage(event.originalTarget.getAttribute('title'));
        }
    }, false);

}, false); 
```

它给了我以下错误：

```
event.originalTarget.getAttribute is not a function 
```

我不明白为什么它说 getAttribute 方法不是函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:33:36.097

那是因为 a`HTMLDocument`没有它。改为使用`event.originalTarget.title`。

# c# - 如何在 aspx 页面中引用另一个对象属性

> ID：10716236
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:03.970
> 
> 标签：c#, asp.net

我有一个类，它不在后面的代码中，我已经声明了一个属性，比如“名称”。现在我想在 aspx 页面中访问这个属性“名称”。

我知道我们可以通过在页面后面的代码中创建另一个属性或字符串变量或隐藏字段并为其设置“名称”属性值并使用 <%= %> 访问这个新的属性/变量/隐藏字段来做到这一点aspx 页面。

但我不想采用上述方法。

那么有没有其他办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:43:41.077

您可以在代码后面添加一个属性，该属性将包含对您的类的引用：

```
public SomeClass MyClass 
{
    get
    {
        // return an instance of SomeClass here
        return new SomeClass();
    }
} 
```

然后在 aspx 页面中，您可以访问此属性：

```
<%= MyClass.SomeProperty %> 
```

# iphone - 发生奇怪的编译错误

> ID：10716241
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:18.307
> 
> 标签：iphone, objective-c, ipad

一个奇怪的编译问题如下：

![在此处输入图像描述](../Images/dd5f68cc4fa87e9c9ecae64538b9a442.png)

我已经正确导入了“ViewController”类，为什么我会收到如图所示的错误编译消息？如何解决？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:47:55.883

尝试添加这个而不是导入：

```
@class ViewController 
```

您是否也在 ViewControll.h 中导入 PGConductor ？可能是您的进口产品的自行车行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:47:23.917

尝试添加`@class ViewController`后`#import "ViewController.h"`

希望你的问题能得到解决

# jquery - Jquery中的淡入淡出效果

> ID：10716243
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:32.100
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 jquery addClass 和 removeClass 函数

这是代码

```
<script>
$(document).ready(function() {
    abc();

    function abc() {

        res=randomXToY(1,15,0);
            $('#img' + res).addClass('activeImg');
            setTimeout(function() {removeClassImg(res) },3000);
    }
    function removeClassImg(res) {

            $('#img' + res).removeClass('activeImg');
            abc();

    }
    function randomXToY(minVal,maxVal,floatVal)
    {
        var randVal = minVal+(Math.random()*(maxVal-minVal));
        return typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);
    }
});
</script> 
```

而CSS是

```
.activeImg{
    opacity:1 !important;
} 
```

这是完美的工作。但现在我想为此添加淡入淡出和淡出效果..

我不知道如何在删除类中添加淡入淡出效果到 addClass activeimg 和淡出效果。

任何人都对此有想法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:35:17.220

尝试

```
$('#img' + res).fadeOut().removeClass('activeImg'); 
```

同样地

```
$('#img' + res).fadeIn().addClass('activeImg'); 
```

您使用 !important 有什么具体原因吗？这可能会覆盖 JQuery 对您的元素执行其效果，所以如果可以的话，请将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:01:26.633

用这个 ：

```
 <script>
 $(document).ready(function() {
abc();

function abc() {

    res=randomXToY(1,15,0);
        $('#img' + res).fadeIn().addClass('activeImg');
        setTimeout(function() {removeClassImg(res) },3000);
}
function removeClassImg(res) {

        $('#img' + res).fadeOut().removeClass('activeImg');
        abc();

}
function randomXToY(minVal,maxVal,floatVal)
{
    var randVal = minVal+(Math.random()*(maxVal-minVal));
    return typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);
}
   });
  </script> 
```

干杯！

# iphone - 如何使用 ASIHTTPRequest 类发布请求以将文本文件上传到服务器？

> ID：10716244
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:32.503
> 
> 标签：iphone

我正在处理一个上传代码，它将文件上传到服务器，它正在成功工作

现在我需要什么作为休闲：

从一个例子开始——>假设我有一个名为 file.txt 的文件，它的大小是 30MB，当我读取文件的内容时，它会给我它包含的所有 30MB。在 sendSynchronousRequest 方法中，我想给请求最多 10mb 的数据和老化调用相同的东西，除非它到达文件的最后一点。（简而言之，我想使用循环将请求部分发送到服务器

为了解决我阅读表格[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)的目的，并在包含后将 ASIHTTPRequest 包含到我的项目中，我想做同样的事情，这将接受数据块（甚至通过 POST）然后将该数据块附加到文件中。在我看来，您需要某种客户端应用程序来获取文件并将其分解为多个块，然后一次将其发送到您的 Web 服务。

我的问题：-如何从 ASIHTTPRequest 发送带有大量数据的 Post 请求？- 我需要更改 PHP 吗？

任何人都可以为 php 和 ASIHTTPRequest 发布一段代码，以便我可以从他们那里获取参考。

感谢你们一直以来的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:29:19.573

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"Ben" forKey:@"first_name"];
[request setPostValue:@"Copsey" forKey:@"last_name"];
[request setFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photo"]; 
```

来自[ASIHTTPRequest 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:38:44.083

您可以参考以下关于堆栈溢出的链接：

[NSURLConnection 异步上传文件？](https://stackoverflow.com/questions/7266464/nsurlconnection-to-upload-file-asynchonrously)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:38:54.513

如果您在网站中使用表单，则使用 ASIFormDataRequest 而不是标准的 ASIHTTPRequest 会更容易。具体细节在这里：[Using ASIFormDataRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use#sending_a_form_post_with_ASIFormDataRequest)

本质上，您只需在网站中创建表单字段并在创建请求时引用它们。如果表单中有任何文本字段，请使用

```
[request setPostValue:@"Your value" forKey:@"form key"]; 
```

该文件应通过使用的路径发送

```
[request setFile:@"filepath to needed file" forKey:@"form key"]; 
```

如果您愿意，您也可以异步发送它并使用委托方法来跟踪上传进度。

我希望这有帮助。

# android - 如何从包含多行的android游标中提取单行

> ID：10716245
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:35.420
> 
> 标签：android, sqlite, android-cursor

我正在从 SQLite 中的表中获取数据。

这是我的代码

```
String[] sColoumns = { "_id", "userloginid", "password", "firstname", "lastname", "email", "address"};
Cursor cursor = db.query("users", sColoumns, null,null,null,null,null); 
```

查询返回游标中表的所有行。

现在我想从光标中一一拉出行或将它们加载到数据表中，然后一一拉出（就像在 Visual Studio 中一样）。

有什么可用的或我能做些什么来实现这一目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:37:23.993

有两种方法可以回答您的问题。

1）您可以简单地遍历游标并对行数据执行任何操作：

```
String[] sColoumns = { "_id", "userloginid", "password", "firstname", "lastname", "email", "address"};
Cursor cursor = db.query("users", sColoumns, null,null,null,null,null); 

try {
    int firstNameColIndex = cursor.getColumnIndex("firstname");
    int lastNameColIndex = cursor.getColumnIndex("lastname");

    while (cursor.moveToNext()) {
        String fullName = cursor.getString(firstNameColIndex) + cursor.getString(lastNameColIndex);
    }
} finally {
    cursor.close();
} 
```

2) 一个常见的用例是在列表视图中显示数据。由于 Android 3.0 Honeycomb（以及早期版本的 Android Support/Compatiblity lib），最佳实践是使用 Loader 来管理光标。例如，如果数据在内容提供者中更新，它将负责更新列表视图。我建议阅读[http://developer.android.com/guide/topics/fundamentals/loaders.html](http://developer.android.com/guide/topics/fundamentals/loaders.html)（请参阅底部的示例链接）以了解该主题。

# xml - 将 j2me 文本字段输入导出为 CSV 和 XML

> ID：10716251
> 
> 赞同：0
> 
> 时间：2012-05-23T08:31:53.917
> 
> 标签：xml, csv, java-me

您好我是 J2ME 新手，想知道是否可以将 j2ME 用户输入导出到 XML 文件或 CSV 文件中。

目前，我有一个用于用户输入的“验证页面”，它显示每个文本字段的所有用户输入值。有没有办法将我的“验证”页面导出到 XML 文件中？或者可能是 CSV 文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:56:58.617

请查看[http://developers.sun.com/mobility/midp/articles/databasemap/](http://developers.sun.com/mobility/midp/articles/databasemap/)上的 toByteArray 方法。
您可以为 CSV 和 XML 格式创建类似的方法。

# java - 诊断冻结的应用程序

> ID：10716253
> 
> 赞同：2
> 
> 时间：2012-05-23T08:32:00.037
> 
> 标签：java, debugging

我有一个 GUI 组件，如果我让它保持打开状态，它会在几个小时后冻结我的 Java 桌面应用程序。它看起来像一个死锁，可能涉及[Event Dispatching Thread](http://en.wikipedia.org/wiki/Event_dispatching_thread)。

一旦应用程序被冻结以分析线程转储，我尝试运行 jconsole、jstack 和 jvisualvm，但所有 3 个都失败（给出各种异常，归结为“无法连接到进程”）。

**是否有另一种方法来诊断冻结的应用程序并找出发生了什么？**

ps：作为信息，GUI 组件是嵌入在 Swing 面板中的 Java FX 2 表格 - 它可以正常打开，对各种交互反应良好，可以关闭，但一段时间后会冻结应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:48:32.077

在冻结之前附加 jconsole。

在崩溃之前监控应用程序可能是您获取有用信息的唯一选择。

我会考虑将此报告为 jstack/jconsole/jvisualvm 错误。您可能会从相同的开发人员那里获得一些很好的故障排除提示或“无法连接到进程”异常的解释。

# c# - 在 C# 应用程序中使用多线程时出现 OutOfMemory 异常

> ID：10716254
> 
> 赞同：4
> 
> 时间：2012-05-23T08:32:00.513
> 
> 标签：c#, multithreading, out-of-memory

我正在用 C# 编写一个应用程序，该应用程序循环浏览维基百科本地数据库副本的文章。我使用一堆正则表达式在这些文章中找到正确的信息，启动一个线程来获取每篇文章的图像，保存信息并转到下一篇文章。

我需要使用代理列表来下载这些图像，以免被谷歌禁止。由于代理可能很慢，我使用线程进行并行下载。

如果我不使用线程，则应用程序工作正常，但需要一段时间才能获取所有信息。

如果我使用线程，应用程序将一直工作，直到它使用大约 500 个线程，然后我得到一个 OutOfMemory 异常。

问题是它只使用了大约 300Mo 的 RAM，因此它不会使用可用总内存 (8Go) 和分配给单个 32 位应用程序的内存的所有内存。

每个应用程序有线程限制吗？

**编辑：**

这是下载海报的代码（从 getPosterAsc() 开始）。

```
 string ddlValue = "";
    private void tryDownload(object obj)
    {
        WebClient webClientProxy = new WebClient();
        Tuple<WebProxy, int> proxy = (Tuple<WebProxy, int>)((object[])obj)[0];
        if (proxy != null)
            webClientProxy.Proxy = proxy.Item1;
        try
        {
            ddlValue = webClientProxy.DownloadString((string)((object[])obj)[1]);
        }
        catch (Exception ex) { 
            ddlValue = "";

            Console.WriteLine("trydownload:" + ex.Message);
        }

        webClientProxy.Dispose();
    }

    public void getPoster(object options = null)
    {
        if (options == null)
            options = new object[2] { toSave, false };
        if (!AppVar.debugMode && AppVar.getImages && this.getImage)
        {
            if (this.original_name != "" && !this.ambName && this.suitable)
            {
                Log.CountImgInc();

                MatchCollection MatchList;
                string basic_options = "";
                string value = "";
                WebClient webClient = new WebClient();
                Regex reg;
                bool found = false;

                if (original_name.Split(' ').Length > 1) image_options = "";

                if (!found)
                {
                    bool succes = false;
                    int countTry = 0;
                    while (!succes)
                    {
                        Tuple<WebProxy, int> proxy = null;
                        if (countTry != 5)
                            proxy = Proxy.getProxy();

                        try
                        {
                            Thread t = new Thread(tryDownload);
                            if (!(bool)((object[])options)[1])
                                t.Start(new object[] { proxy, @"http://www.google.com/search?as_st=y&tbm=isch&as_q=" + image_options + "+" + basic_options + "+" + image_options_before + "%22" + simplify(original_name) + "%22+" + " OR %22" + original_name + "%22+" + image_options_after + this.image_format });
                            else
                                t.Start(new object[] { proxy, @"http://www.google.com/search?as_st=y&tbm=isch&as_q=" + image_options + "+" + basic_options + "+" + image_options_before + "%22" + simplify(original_name) + "%22+" + " OR %22" + original_name + "%22+" + image_options_after + "&biw=1218&bih=927&tbs=isz:ex,iszw:758,iszh:140,ift:jpg&tbm=isch&source=lnt&sa=X&ei=kuG7T6qaOYKr-gafsOHNCg&ved=0CIwBEKcFKAE" });
                            if (!t.Join(40000))
                            {
                                Proxy.badProxy(proxy.Item1.Address.Host, proxy.Item1.Address.Port);
                                continue;
                            }
                            else
                            {
                                value = ddlValue;
                                if (value != "")
                                    succes = true;
                                else
                                    Proxy.badProxy(proxy.Item1.Address.Host, proxy.Item1.Address.Port);
                            }
                        }
                        catch (Exception ex)
                        {
                            if (proxy != null)
                                Proxy.badProxy(proxy.Item1.Address.Host, proxy.Item1.Address.Port);
                        }
                        countTry++;
                    }

                    reg = new Regex(@"imgurl\=(.*?)&amp;imgrefurl", RegexOptions.IgnoreCase);
                    MatchList = reg.Matches(value);
                    if (MatchList.Count > 0)
                    {
                        bool foundgg = false;
                        int j = 0;
                        while (!foundgg && MatchList.Count > j)
                        {
                            if (MatchList[j].Groups[1].Value.Substring(MatchList[j].Groups[1].Value.Length - 3, 3) == "jpg")
                            {
                                try
                                {
                                    string guid = Guid.NewGuid().ToString();
                                    webClient.DownloadFile(MatchList[j].Groups[1].Value, @"c:\temp\" + guid + ".jpg");

                                    FileInfo fi = new FileInfo(@"c:\temp\" + guid + ".jpg");
                                    this.image_size = fi.Length;

                                    using (Image img = Image.FromFile(@"c:\temp\" + guid + ".jpg"))
                                    {
                                        int minHeight = this.cov_min_height;
                                        if ((bool)((object[])options)[1])
                                            minHeight = 100;

                                        if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Jpeg) && img.HorizontalResolution > 70 && img.Size.Height > minHeight && img.Size.Width > this.cov_min_width && this.image_size < 250000)
                                        {
                                            foundgg = true;
                                            image_name = guid;
                                            image_height = img.Height;
                                            image_width = img.Width;
                                            img.Dispose();
                                            if ((bool)((object[])options)[0])
                                            {
                                                Mediatly.savePoster(this, (bool)((object[])options)[1]);
                                            }
                                        }
                                        else
                                        {
                                            img.Dispose();
                                            File.Delete(@"c:\temp\" + guid.ToString() + ".jpg"); 
                                        }
                                    }
                                }
                                catch (Exception ex)
                                {
                                }
                            }

                            j++;
                        }
                    }
                }

                webClient.Dispose();
                Log.CountImgDec();
            }
        }
    }

    public void getPosterAsc(bool save = false, bool banner = false)
    {
        ThreadPool.QueueUserWorkItem(new WaitCallback(getPoster), new object[2] { save, banner });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:05:33.103

我会确保您使用线程池来“管理”您的线程。正如有人所说，每个线程消耗大约 1MB 的内存，并且取决于系统硬件，这可能会导致您的问题。

解决此问题的一种可能方法是使用线程池。这减少了通过在可能的情况下共享和回收线程来生成所有线程所产生的开销。这允许低级线程设施（有许多线程处于活动状态），但限制了这样做的性能损失。

线程池还限制了它将同时运行的工作线程的数量（注意，这些都是后台线程）。过多的操作线程是一个很大的管理开销，并且会“[使 CPU 缓存失效](http://www.albahari.com/threading/)”。一旦达到您将施加的线程池限制，额外的作业将排队并在另一个工作线程空闲时执行。我觉得这是一种更有效、更安全、更节省资源的方式来满足您的需求。

根据您当前的代码，有多种进入线程池的方法：

1.  `BackgroundWorker`.
2.  `ThreadPool.QueueUserWorkItem`.
3.  异步代表。
4.  普林克。

我个人会使用 TPL，因为它很棒！我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:54:10.807

使用 perfmon 检查内存的实际使用情况，特别要密切注意“Modified Page List Bytes”的值。这在多线程应用程序中可能特别麻烦，因为对文件的引用被保留了一段特定的时间 - 高利用此值的通常（临时）解决方案是增加可用的虚拟内存。

此外，如果在 Windows Server 2008 上运行高度线程化的应用程序，您将需要应用[Microsoft](http://www.microsoft.com/en-us/download/details.aspx?id=9258)的 dynacache以防止系统文件缓存有效地占用您的可用内存。

上述两个问题都可以直接与处理大量数据的 .net 多线程应用程序相关，不幸的是它们没有显示为您的应用程序正在使用，因此很难追踪（正如我发现的那样痛苦的几天的过程）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:02:10.127

我最近在我的一个应用程序中遇到了一个与此非常相似的问题。它与在单个“字符串”对象中存储和使用的数据量有关。如果我不得不猜测，您的内存不足异常来自初始分配

```
ddlValue = webClientProxy.DownloadString((string)((object[])obj)[1]); 
```

如果您可以重新编写它，您能否找到一种方法以流的形式访问 Web 返回，而不是将整个响应读入字符串。然后，您可以使用流阅读器逐行解析 Web 响应。

是的，我知道这听起来很复杂，但它与我最终不得不在自己的代码中使用的解决方案相匹配。我正在处理一些太大而无法存储为单个字符串的东西，而不得不直接从流中访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:58:18.807

当您使用 32 位可执行文件时，您实际上只能默认分配 2Gb 而不是 8Gb（有关更多信息，请参见此处：http: [//blogs.msdn.com/b/tom/archive/2008/04/10/chat-question- 32 位和 64 位进程的内存限制.aspx](http://blogs.msdn.com/b/tom/archive/2008/04/10/chat-question-memory-limits-for-32-bit-and-64-bit-processes.aspx) )

尝试限制你的工作线程，这样你就不会使用那么多，并确保你在执行代码的线程上没有内存泄漏。

用 try...catch 包装你的线程执行（如果你在线程执行代码上得到 OutOfMemoryException），因为它可能与你下载的图像有关

# c# - 绑定 StringFormat 给出不正确的结果

> ID：10716255
> 
> 赞同：0
> 
> 时间：2012-05-23T08:32:08.127
> 
> 标签：c#, wpf, xaml, binding, string-formatting

由于某种原因，使用`Content="{Binding Time, StringFormat=t}`仍然给我一个很长的日期。支持字段是`DateTime`初始化的属性，`DateTime.Now`但无论我尝试什么字符串格式，它仍然显示完整日期......

我只想看到 HH:mm tt

有任何想法吗？

XAML：

```
<Window x:Class="ArgosSystem.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:ArgosSystem"
        xmlns:sys="clr-namespace:System;assembly=System"
        Title="MainWindow" Height="800" Width="1280" Loaded="Window_Loaded">
    <Window.Resources>
        <DataTemplate DataType="{x:Type loc:Picknote}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" MinWidth="200" />
                    <ColumnDefinition Width="350" />
                    <ColumnDefinition Width="250" />
                    <ColumnDefinition Width="50" />
                </Grid.ColumnDefinitions>
                <Label Content="{Binding Time, StringFormat=t}" VerticalContentAlignment="Center"  Foreground="IndianRed" FontSize="36" Grid.Column="0" />
                <Label Content="{Binding Customer}" VerticalContentAlignment="Center" Foreground="IndianRed" FontSize="36" Grid.Column="1" />
                <Label Content="{Binding PicknoteNo}"  VerticalContentAlignment="Center"  Foreground="IndianRed" FontSize="36" Grid.Column="2" />
                <Label Content="{Binding Qty}"  VerticalContentAlignment="Center"  Foreground="IndianRed" FontSize="36" Grid.Column="3" />
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <Grid Background="Black">
        <DockPanel>
            <ScrollViewer Name="lstPicknoteScroll" VerticalScrollBarVisibility="Auto">
                <ItemsControl Name="lstPicknotes" ItemsSource="{Binding}"  IsTabStop="False" Foreground="Cornsilk" />
            </ScrollViewer>
        </DockPanel>
    </Grid>
</Window> 
```

C＃ ：

```
public partial class MainWindow : Window
{
    ObservableCollection<Picknote> picknotes = new ObservableCollection<Picknote>();

    public MainWindow()
    {
        InitializeComponent();
        lstPicknotes.DataContext = picknotes;
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        picknotes.Add(new Picknote
        {
            Time = DateTime.Now,
            Customer = "REED FOR SPEED",
            PicknoteNo = "PKN767677",
            Qty = 100
        });

        picknotes.Add(new Picknote
        {
            Time = DateTime.Now.AddHours(-2),
            Customer = "F1 AUTOMOTIVE",
            PicknoteNo = "PKN767677",
            Qty = 50
        });
        picknotes.Add(new Picknote
        {
            Time = DateTime.Now.AddHours(-1),
            Customer = "FERGUSENS",
            PicknoteNo = "PKN767677",
            Qty = 10
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:46:37.070

***StringFormat***适用于字符串类型的属性。Content 属性属于 Object 类型，因此您需要使用Label 控件的***ContentStringFormat属性指定格式。***

```
<Label Content="{Binding Time}" ContentStringFormat="t" VerticalContentAlignment="Center"  Foreground="IndianRed" FontSize="36" Grid.Column="0" /> 
```

# java - 使用 2 个下拉框过滤检票口中的 ListView

> ID：10716259
> 
> 赞同：2
> 
> 时间：2012-05-23T08:32:28.197
> 
> 标签：java, listview, filter, wicket, dropdownchoice

我正在尝试通过使用 2 个下拉框来过滤放置在列表视图中的列表。

第一个下拉框的标题是价格，第二个是所有者。

我希望能够在这些下拉框中的一个或多个中选择一个值，然后使用过滤结果重新呈现列表视图。

问题是我不知道如何开始这项任务，有人能赐教我吗：D

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:34:16.590

你最好的起点可能是[这个](http://www.wicket-library.com/wicket-examples/ajax/choice?2)例子：（源代码也可以在这个页面上找到，ChoicePage.java 是名称）

首先，您必须使用动态模型`ListView`来生成项目列表，具体取决于您在下拉框中选择的内容。

然后基本思想是`AjaxFormComponentUpdatingBehavior`向控制更新的组件添加一个（在您的情况下是您的两个下拉框），并且在`onUpdate()`此行为的方法中，您应该将要更新的组件添加到`AjaxRequestTarget`传递的组件中。

# ruby-on-rails - Rails 迁移和 PostgreSQL：用于迁移的单独用户和为生产用户设置权限

> ID：10716269
> 
> 赞同：3
> 
> 时间：2012-05-23T08:32:53.010
> 
> 标签：ruby-on-rails, postgresql, privileges, rails-migrations

我在 postgresql 中有两个用户，其中一个`migration`在 Rails 在生产服务器上运行迁移时被调用并使用。该用户拥有生产数据库。我也有`production`应该只有以下权限的用户：`SELECT, INSERT, UPDATE, DELETE`在生产数据库上。

问题是，每次创建新表时，我都必须在 psql 中手动运行它：

```
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO production;

-- next line is needed for each new table which has an auto incrementing field, in this case - table `users`
GRANT USAGE, SELECT ON SEQUENCE users_id_seq TO production; 
```

因为`production`新创建的表上的用户权限不会自动设置。运行迁移时自动执行此操作的最佳方法是什么？任何可用于 Rails/Capistrano 的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:15:31.053

您可以使用 Postgres`ALTER DEFAULT PRIVILEGES`让它自动为所有新创建的表分配*生产*[权限。](http://www.postgresql.org/docs/9.1/static/sql-alterdefaultprivileges.html)

 *`after "deploy:migrate", "mycustomtaskname"`或者，您可以编写自定义 Capistrano 任务来设置通过挂钩调用的权限。[这篇文章](http://pastebin.com/vCtEqPi9)可能会给你一些关于如何通过 Capistrano 与 pgsql 交互的好提示，例如如何以交互方式提供密码。*

# android - 从自定义对话框设置值

> ID：10716270
> 
> 赞同：1
> 
> 时间：2012-05-23T08:32:53.470
> 
> 标签：android, map

我编写了一个程序，您可以从用户那里提供位置，然后向他显示位置。对于获取位置，我使用自定义对话框，但我不知道如何使用用户输入的位置。例如，我使用一个按钮来接受值，但每次我使用这种方法时都会出错。这是我使用按钮并得到错误的来源：

```
public class main extends MapActivity {
/** Called when the activity is first created. */

EditText lat;
EditText lang;

Integer latitude;
Integer longtitude;

Button b = (Button) findViewById(R.id.button1);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView view = (MapView) findViewById(R.id.themap);
    view.setBuiltInZoomControls(true);

    final MapController control = view.getController();

    LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener listener = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location location) {
            latitude = Integer.valueOf(lat.getText().toString());
            longtitude = Integer.valueOf(lang.getText().toString());

            control.setCenter(new GeoPoint(latitude, longtitude));

        }
    };
    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Dialog d = new Dialog(main.this);
    d.setContentView(R.layout.choose);
    d.setTitle("Location");
    d.show();
    lat = (EditText) findViewById(R.id.editText1);
    lang = (EditText) findViewById(R.id.editText2);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });
    return super.onOptionsItemSelected(item);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是我的权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET"/> 
```

所以这是我的问题：
为什么我会出错以及如何解决这个问题，我的意思是如何使用此按钮关闭我的自定义对话框并设置位置。

日志猫：

```
05-23 13:15:10.953: W/KeyCharacterMap(13490): No keyboard for id 131074
05-23 13:15:10.953: W/KeyCharacterMap(13490): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-23 13:15:21.434: W/MapActivity(13490): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@40719228
05-23 13:15:21.444: V/MapActivity(13490): Recycling map object.
05-23 13:15:21.524: I/MapActivity(13490): Handling network change notification:CONNECTED
05-23 13:15:21.524: E/MapActivity(13490): Couldn't get connection factory client 
```

# android - [android][lock_screen] 来电时解锁待机屏幕

> ID：10716272
> 
> 赞同：4
> 
> 时间：2012-05-23T08:32:56.160
> 
> 标签：android, unlock

我正在编写一个`sip`基于调用的应用程序。当有来电时，相应的活动将被触发并显示在锁定屏幕下方。但是用户不知道来电...锁定屏幕出现一段时间并且屏幕关闭..即使电话仍在响铃...铃声在整个持续时间内都处于活动状态但屏幕没有'不显示来电 UI。我需要找到一种方法来显示适当的 UI 并在整个来电期间保持屏幕开启......

对于在来电期间保持屏幕开启的部分，我正在使用唤醒锁......但我无法摆脱锁定屏幕......

我研究并发现可以使用`KeygaurdManager`或与`WindowManager.LayoutParams`适当的标志（如`FLAG_KEEP_SCREEN_ON`,`FLAG_DISMISS_KEYGAURD`和手机被密码/模式锁定...这是我无法显示我想要的用户界面的问题吗？它如何处理来电？请给我一些解决方案`FLAG_SHOW_WHEN_LOCKED``FLAG_TURN_SCREEN_ON`

我提到的链接是

[如何在 Android 中以编程方式解锁屏幕？](https://stackoverflow.com/questions/1959012/how-can-i-unlock-the-screen-programmatically-in-android)

[解锁安卓锁屏](https://stackoverflow.com/questions/6058990/unlock-the-android-lockscreen)

[如何防止 Android 设备以编程方式进入睡眠状态？](https://stackoverflow.com/questions/3723634/how-can-i-prevent-an-android-phone-from-going-to-sleep-programmatically)

[https://stackoverflow.com/questions/7006894/how-to-unlack-the-screen-and-power-on-when-my-application-is-in-background-when](https://stackoverflow.com/questions/7006894/how-to-unlack-the-screen-and-power-on-when-my-application-is-in-background-when)

[强制屏幕开启](https://stackoverflow.com/questions/2131948/force-screen-on)

[通话时解锁屏幕android](https://stackoverflow.com/questions/10383204/unlock-screen-while-in-call-android)

[Android：打开屏幕并通知用户](https://stackoverflow.com/questions/6693773/android-turn-screen-on-and-notify-user)

[启用锁屏时如何启动活动？](https://stackoverflow.com/questions/5161699/how-to-launch-an-activity-when-lock-screen-is-enabled)

[默认锁定屏幕上的 Android 活动](https://stackoverflow.com/questions/3629179/android-activity-over-default-lock-screen)

[Android 创建一个浮动在锁屏上的 Activity](https://stackoverflow.com/questions/8185572/android-create-an-activity-that-float-over-lockscreen)

[以编程方式解锁 Android 手机？](https://stackoverflow.com/questions/9004720/unlock-android-phone-programmatically)

[屏幕锁定时如何显示Activity？](https://stackoverflow.com/questions/3793221/how-my-app-can-unlock-screen-programatically)

[当我的活动将以编程方式启动时如何解锁设备？](https://stackoverflow.com/questions/8531674/how-to-unlock-the-device-when-my-activity-will-be-launched-programmatically)

[Android：如何以编程方式打开和关闭屏幕？](https://stackoverflow.com/questions/9561320/android-how-to-turn-screen-on-and-off-programmatically)

[https://stackoverflow.com/questions/10590918/how-to-display-dialog-when-user-get-incoming-call-on-default-call-screen-in-andr](https://stackoverflow.com/questions/10590918/how-to-display-dialog-when-user-get-incoming-call-on-default-call-screen-in-andr)

[如何在android应用程序中显示来电通知](https://stackoverflow.com/questions/2771648/how-to-show-incoming-call-notification-in-android-application)

[屏幕锁定时如何显示Activity？](https://stackoverflow.com/questions/3793221/how-my-app-can-unlock-screen-programatically)

[如何解除锁定屏幕？](https://stackoverflow.com/questions/5390365/how-to-dismiss-lock-screen)

[KeyGuardManager 的问题](https://stackoverflow.com/questions/3908337/problem-with-keyguardmanager)

[如何在android中以编程方式解锁和锁定屏幕](https://stackoverflow.com/questions/7648347/how-unlock-and-lock-screen-programtically-in-android)

[当我的活动将以编程方式启动时如何解锁设备？](https://stackoverflow.com/questions/8531674/how-to-unlock-the-device-when-my-activity-will-be-launched-programmatically)

[获取 Sip 来电 id](https://stackoverflow.com/questions/9696817/get-the-sip-incoming-call-id)

[当另一部电话有来电时如何通知 SIP 客户端](https://stackoverflow.com/questions/2883588/how-to-notify-sip-client-when-there-is-an-incoming-call-on-another-phone)

[活动能否在系统的默认接收器之前接收无序广播（来电）意图？](https://stackoverflow.com/questions/9869314/can-an-activity-receive-an-unordered-broadcastincoming-call-intent-before-syst)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:36:07.480

对我来说，以下代码效果很好。

```
@Override
protected void onCreate() {
    KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
    keyguard = km.newKeyguardLock("MyApp");
}
//when we need to unlock screen
@Override
protected void onResume() {
    keyguard.disableKeyguard();
}
@Override
protected void onPause() {
    keyguard.enableKeyguard();
} 
```

记得添加权限

`<uses-permission android:name="android.permission.DISABLE_KEYGUARD" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:36:28.420

FLAG_SHOW_WHEN_LOCKED 在大多数手机上都适用于我。活动必须是不透明的（不是对话框）。您可能还需要 FLAG_TURN_SCREEN_ON 和 FLAG_KEEP_SCREEN_ON

但是，它目前不适用于运行 4.0.3 的 Galaxy Note。还不知道为什么...

# file-upload - Struts2 - 文件上传：检测文件大小错误

> ID：10716273
> 
> 赞同：0
> 
> 时间：2012-05-23T08:33:08.453
> 
> 标签：file-upload, struts2, action

我已经使用 Struts2 实现了一个上传实用程序。我已经通过在我的操作类中以编程方式检查我的 setFileContentType() 方法来限制上传特定文件类型。

剩下的一个问题是在上传的文件超过最大文件大小设置的情况下向用户显示自定义错误页面。

我对此进行了研究，并看到了验证拦截器应如何与返回的“输入”结果一起使用。但是，我仍然无法将所有部分放在一起。

我的最终目标如下：如果用户尝试上传一个大文件，我想显示一个带有我自己的错误消息的新页面。

任何提示/建议？

**更新** 我的 struts.xml 中有以下配置：

```
<action name="FileUpload" class="common.FileUpload">
<interceptor-ref name="fileUpload"/>
  <result name="success">common/FileUpload/FileUpload.jsp</result>
  <result name="UploadResult">common/FileUpload/FileUploadResult.jsp</result>
</action> 
```

我知道上面的配置缺少验证拦截器，以防我想检测文件大小错误。问题是我不确定此时它是如何发挥作用的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:24:36.040

FileUpload 有一个文件大小参数，你可以在你的配置中使用它

```
 <interceptor-ref name="fileUpload">
        <param name="maximumSize">50</param>
    </interceptor-ref> 
```

如果您想提供自定义消息，您可以在此处设置

> struts.messages.error.file.too.large
> 
> 当上传的文件过大时发生，由 maximumSize 指定。

执行您的操作`ValidationAware`，如果 Struts2 遇到此错误，您将收到通知，您`addFieldError`将被调用以通知您在属性文件中定义的错误`key`和`struts.messages.error.file.too.large`消息，一旦您`addFieldError`被调用，您可以采取必要的操作。

上传文件时 FileUploadInterceptor 也会对文件或文件类型、大小进行验证，如果操作实现了 ValidationAware，那么它将通过调用 addFieldError 回调方法在该操作中设置验证消息

# java - maven sql 插件配置以在执行时显示查询

> ID：10716274
> 
> 赞同：1
> 
> 时间：2012-05-23T08:33:12.710
> 
> 标签：java, maven, maven-2

我已经配置了 maven-sql 插件来执行集成测试的插入和删除脚本。

删除脚本从 sql 插件运行了更长的时间。我从 OracleSQLDeveloper 中运行了相同的脚本，执行需要几秒钟。我想知道哪个 sql 查询资源不足。

```
<!-- Maven SQL plugin to insert test data to DB. -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>sql-maven-plugin</artifactId>
                <version>1.3</version>

                <configuration>
                    // DB CONFIGS
                </configuration>
                <executions>
                    <execution>
                        <id>create-database-tables</id>
                        <phase>process-test-resources</phase>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <autocommit>false</autocommit>
                            <onError>continue</onError>
                            <srcFiles>
                                <srcFile>sql/delete_data.sql</srcFile>
                                <srcFile>sql/load_data.sql</srcFile>
                            </srcFiles>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

是否有配置在控制台中显示正在运行的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:07:30.207

我尝试了很多方法，但没有用。唯一的方法是按照调试模式运行构建。

谢谢@Andyb

# c# - 我可以用受保护/私有静态变量做什么？

> ID：10716276
> 
> 赞同：17
> 
> 时间：2012-05-23T08:33:28.840
> 
> 标签：c#, .net

我知道我可以写：

```
protected static 
```

在我的 C# 类中（在我的例子中，一个 aspx.cs）。也 ：

```
private static 
```

这是什么意思？静态无处不在。为什么受保护/私有？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-23T08:35:03.967

静态的定义不是“随处可用”。它是在 AppDomain 范围内声明的类型之间共享的变量。

[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.100%29.aspx)不会改变这个定义，但显然会影响访问范围。

您将[静态](http://msdn.microsoft.com/en-us/library/98f28cdx%28v=vs.100%29.aspx)修饰符与访问修饰符混淆了。静态变量仍然需要定义可访问性。在您的示例中，私有静态变量只能在定义它的类型中访问，受保护的变量可以在类型和任何派生类型中访问。

请注意，请注意 IIS（托管 ASP.NET 应用程序）会回收工作进程，这将刷新当时处于活动状态的所有静态变量值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T08:39:25.493

如果您将变量声明为 Private，则您无法在当前类之外访问它，如果声明为 Protected，则只有派生类才能访问该变量。在您的示例中，私有和受保护的基本含义是没有改变，所以不管你如何声明它是静态的还是简单的......

```
class Test
{
    protected static int var1;
    private static int var2;
}
class MainProgram : Test
{
    private static int test;
    static void Main(string[] args)
    {
        Test.var1 = 2;
        Test.var2 = 5;   //ERROR :: We are not able to access var2 because it is private                 
    }
} 
```

在上面的代码中，您可以看到我们是否希望静态变量只能在当前类中访问，那么您需要将其设为 Private。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T08:39:41.977

**private**
类型或成员只能被同一类或结构中的代码访问。
**protected**
类型或成员只能由同一类或结构中的代码或派生类中的代码访问。 **静态修饰符**
静态方法在没有实例引用的情况下被调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T08:35:29.920

`static`并不意味着它无处不在。您仍然需要`protected`/`private`来定义可见性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T08:38:29.713

如果您只想通过某些类访问变量，例如在使用多态性和继承时，请使用 protected。公共使其始终在范围内可见，而私有则非常明显。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T08:36:05.127

一种用途是您可以创建私有静态字段，并使用公共静态方法/属性公开（应用一些自定义业务逻辑，如单例等）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-09T07:55:36.400

静态是一个修饰符。保护和私有是访问修饰符。访问修饰符指定变量的范围。当我们希望字段或方法为单例时使用静态修饰符，因此我们不必通过创建对象来访问它们，而是可以直接通过类名调用它们

# security - Jasper 报告安全沙盒

> ID：10716281
> 
> 赞同：4
> 
> 时间：2012-05-23T08:33:39.780
> 
> 标签：security, jasper-reports, reporting, sandbox

我正在编写一个 Java Web 应用程序，我希望它允许用户执行基本的 PDF 报告。通常我会为此使用 Jasper Reports。但是这次我希望用户能够在 iReport 中编辑自己的报告并上传它们。这应该足够直截了当。

这让我想到，Jasper 让您可以有效地在报告中编写代码，这些代码在生成报告时执行。是否可以编写一份对 Java API 以及我的网络应用程序具有完全访问权限的报告。我不希望用户能够杀死 tomcat，或者更糟的是仍然使用我构建的 DAO api 来读取其他用户数据。

有谁知道这是否真的可行，如果可以，您能否以某种方式对其进行沙箱处理。可能我可以在报告 XML 编译之前过滤它吗？

还有人知道这是否同样适用于其他开源报告工具，例如 BIRT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:25:09.843

我正在发布一个网络服务 [1] 以允许开发人员使用在 i-report 上绘制的模板生成 PDF，

所以我不得不解决同样的问题，我的第一次尝试是使用 Java 安全引擎 API，但它太复杂了，需要很多权限。

因此，当我在搜索 Heroku 如何隔离每个 Web 应用程序时，我发现了 Linux 容器 (LXC) [2]，因此我决定将每个“开发人员沙箱”隔离在一个 lxc 容器中。

它不会阻止用户关闭“沙箱服务器”，但如果他们这样做，他们只会关闭自己的沙箱，其他用户的沙箱不会受到影响。

[1] [http://reports.simpleservic.es/landing](http://reports.simpleservic.es/landing) [2] [http://en.wikipedia.org/wiki/LXC](http://en.wikipedia.org/wiki/LXC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T16:01:23.147

看看我们在 BI 解决方案 Reportserver [2] 中使用的 java-sandbox [1]。我目前正在准备一篇博文，将解释如何在沙盒环境中运行 jasperreports。

至于Birt，同样适用于那里。这里用户不能直接写java代码，但是可以用Rhino，最终效果是一样的。

[1] [http://blog.datenwerke.net/p/the-java-sandbox.html](http://blog.datenwerke.net/p/the-java-sandbox.html) [2] [http://reportserver.datenwerke.net](http://reportserver.datenwerke.net)

# android - 带有 allignParentBottom 的 ScrollView 内的 RelativeLayout

> ID：10716293
> 
> 赞同：7
> 
> 时间：2012-05-23T08:34:39.313
> 
> 标签：android, scrollview, android-relativelayout

我有一个带有 RelativLayout 的片段，顶部有一个 TextView，中间有一个 LinearLayout（用 CheckBox 动态填充），底部有一个 Button。

问题是如果添加了太多复选框，我需要滚动。Button 使用属性 layout_alignParentBottom 对齐并显示在屏幕顶部。此属性不适用于 Scrollview。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<TextView  
    android:id="@+id/show_content"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:textColor="@color/black"
    android:textSize="25sp"
    android:gravity="center"
    android:padding="10dp" />

<LinearLayout
    android:id="@+id/hold_check_boxes"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_below="@+id/show_content" />

<Button android:id="@+id/save"            
    android:layout_width="150dp" 
    android:layout_height="wrap_content"         
    android:text="@string/save"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" />   

</RelativeLayout> 
```

有什么建议么？

编辑：使用 ScrollView

```
 <?xml version="1.0" encoding="utf-8"?>
 <ScrollView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/mainScrollView"         
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content" >            

    <RelativeLayout              
        android:id="@+id/topLayout"
        android:layout_width="fill_parent"             
        android:layout_height="wrap_content"
        android:orientation="vertical">                               

          <TextView  
            android:id="@+id/show_content"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:textColor="@color/black"
            android:textSize="25sp"
            android:gravity="center"
            android:padding="10dp"
            android:background="@drawable/bottom_border" />

        <LinearLayout
            android:id="@+id/hold_check_boxes"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_below="@+id/show_content" />

        <Button android:id="@+id/save"            
            android:layout_width="150dp" 
            android:layout_height="wrap_content"         
            android:text="@string/save"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true" />     

     </RelativeLayout>    
 </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:41:10.970

你可以这样做而不需要作为父母。您唯一要做的就是在 ScrollView 中使用 Linearlayout。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/show_content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="10dp"
        android:textColor="@color/black"
        android:textSize="25sp" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/save"
        android:layout_below="@+id/show_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp" >

        <LinearLayout
            android:id="@+id/hold_check_boxes"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" />
    </ScrollView>

    <Button
        android:id="@+id/save"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/save" />

</RelativeLayout> 
```

更新：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/show_content"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="@color/black"
            android:textSize="25sp" />

        <LinearLayout
            android:id="@+id/hold_check_boxes"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/show_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:orientation="vertical" />

        <Button
            android:id="@+id/save"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_below="@+id/hold_check_boxes"
            android:layout_centerHorizontal="true"
            android:text="@string/save" />
    </RelativeLayout>

</ScrollView> 
```

# ios - 如何正确对齐静态“正确的细节” UITableViewCell 内容与图像？

> ID：10716296
> 
> 赞同：3
> 
> 时间：2012-05-23T08:34:48.733
> 
> 标签：ios, uitableview, uistoryboard

我正在使用情节提要、静态单元格和“正确的细节”单元格样式。我的问题在 Xcode 和模拟器中都如下所示（为指导添加了红线）：

![在此处输入图像描述](../Images/980980f0ed3e495c28f652a3420e36c5.png)

如您所见，第三行已关闭。它向右移动 1 个点。图像和标签都未对齐。所有图像的宽度均为 24 像素，尺寸检查器正确显示了这一点。所有三个单元格的属性检查器设置都是相同的，除了图像。

怎么了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:13:30.780

似乎最可能的解释是您的“X”图形未正确居中。

如果您检查了它在 Photoshop 中是否正确居中，您检查的版本和您在应用程序中看到的版本是否可能是不同的图像（例如，因为一个是 @2x 视网膜版本）？

一个好的测试可能是用颜色（例如红色）填充图像的背景，以便您可以看到图像边界并确定图像本身未对齐，而不是图像内容。

# c++ - 从 QGridLayout 中移除 QWidget

> ID：10716300
> 
> 赞同：2
> 
> 时间：2012-05-23T08:34:58.043
> 
> 标签：c++, qt, qwidget, qgridlayout

我有一个`QGridLayout`添加自定义的地方`QWidgets`。

当我尝试删除所有它们时，它们应该从布局中删除（因为函数`layout.count()`返回 0），但它们仍然显示在界面中，我可以与它们交互。

在这里，您可以使用我添加小部件的方式：

```
void MyClass::addCustomWidget(CustomWidget *_widget, int r, int c)
{
    layout->addWidget(_widget, r, c);
    _widget->show();
} 
```

这里是我删除它们的方式：

```
void MyClass::clearLayout()
{
    qDebug() << "Layout count before clearing it: " << layout->count();

    int count = layout->count();
    int colums = layout->columnCount();
    int rows = layout->rowCount();

    int i=0;
    for(int j=0; j<rows; j++)
    {
        for(int k=0; k<colums && i<count; k++)
        {
            i++;

            qDebug() << "Removing item at: " << j << "," << k;
            QLayoutItem* item = layout->itemAtPosition(j, k);

            if (!item) continue;

            if (item->widget()) {
                layout->removeWidget(item->widget());
            } else {
                layout->removeItem(item);
            }
            qDebug() << "Removed!";
        }
    }

    qDebug() << "Layout count after clearing it: " << layout->count();
} 
```

从 QGridLayout 中正确删除项目/小部件的任何帮助或提示？

**PD：**我在互联网上看到很多人在将小部件从布局中删除后直接删除（删除_widget）。就我而言，这是不可能的，因为我需要在内存中保留这些小部件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-12T10:35:02.637

您还可以`deleteLater()`用来避免在迭代期间维护子计数的问题：

```
for (int i = 0; i < gridLayout.count(); i++)
{
   gridLayout.itemAt(i)->widget()->deleteLater();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:44:00.840

只是要清楚。您没有“删除”小部件。您只是将它们从布局中删除。从布局中删除仅意味着该布局将不再管理（调整大小/定位）该小部件，但这并不意味着该小部件将被“删除”（以 C++ 方式）。小部件也不会被神奇地隐藏。从布局中删除后，您的小部件仍保留在它创建/管理的小部件中。因此，此布局的所有者仍将此小部件作为子小部件（可见子代）。

你必须

1.  隐藏小部件，或者如果您确定将不再使用它

2.  使用“删除”关键字删除小部件

你也不需要打电话`removeWidget(item->widget())`；`removeItem(item)`足以满足所有布局项目（即使是那些内部有小部件的项目）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:44:13.383

尝试

```
QLayoutItem *child;
while ((child = layout->takeAt(0)) != 0); 
```

它[应该是安全](http://qt-project.org/doc/qt-4.8/qlayout.html#takeAt)的。如果由于任何原因它不起作用，您可以使用小部件或布局项的集合，每次添加小部件时都会更新。然后删除你在集合上的循环并从布局中删除每个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T10:10:28.950

```
Header:
class Grid : QGridLayout
{
public:
    Grid(QWidget* parent);
    void addElement(QWidget* element, int x, int y);
    void delElement(int x, int y);
    void resize(int width, int height);
    void clear();
protected:
    QSize size;
};

void Grid::clear(){
    for(int i = 0;i<size.width();i++){
        for(int j = 0;j<size.height();j++){
            QLayoutItem* item = takeAt(i*size.width() + j);
            if(item != NULL) delete item;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-01T21:43:11.137

这些答案都不适合我。在我的情况下，我有几个对象，每个对象都有自己的 QChartView。这个想法是用户选择他们想要查看的对象，并且主窗口中央的公共区域使用用户选择的对象的 QChartView 进行更新。这应该很简单，只需从图表区域中删除小部件，添加一个新小部件。最终为我工作的是：

```
while( QLayoutItem* item = ui->mPlotArea->layout()->takeAt(0) )
{
    item->widget()->setVisible(false);
    ui->mPlotArea->layout()->removeItem(item);
}

ui->mPlotArea->layout()->addWidget( pv );
pv->setVisible(true); 
```

哪里`mPlotArea`是 a`QFrame`并且`pv`是 的派生类`QChartView`。我无法解释为什么其他答案不起作用，但我花了几个小时尝试不同的小部件和不同的删除方式而不删除、组织等......

# hadoop - 使用hadoop流时如何在HDFS中导入nltk语料库

> ID：10716302
> 
> 赞同：1
> 
> 时间：2012-05-23T08:35:07.157
> 
> 标签：hadoop, streaming, nltk, corpus

```
 I got a little problem I want to use nltk corpus in hdfs,But failed.For example I want to load nltk.stopwords in my python code.
 I use this http://eigenjoy.com/2009/11/18/how-to-use-cascading-with-hadoop-streaming/ 
```

我说了这么多，但我不知道如何在我的工作中转化它。我的 nltk 文件名是 nltk-2.0.1.rc1 我的 pyam 文件名是 PyYAML.3.0.1 所以我的命令是：

```
zip -r nltkandyaml.zip nltk-2.0.1.rc1 PyYAML.3.0.1 
```

然后它说“mv ntlkandyaml.zip /path/to/where/your/mapper/will/be/nltkandyaml.mod”

我的 mapper.py 保存在 /home/mapreduce/mapper.py 所以我的命令是：

```
mv ntlkandyaml.zip /home/mapreduce/nltkandyaml.mod 
```

那正确吗？

然后我压缩我的语料库停用词：

```
zip -r /nltk_data/corpora/stopwords-flat.zip * 
```

在我的代码中，我使用：

```
importer = zipimport.zipimporter('nltkandyaml.mod')
yaml = importer.load_module('PyYAML-3.09')
nltk = importer.load_module('nltk-2.1.0.1rc1')
from nltk.corpus.reader import stopwords
from nltk.corpus.reader import StopWordsCorpusReader
nltk.data.path+=["."]
stopwords = StopWordsCorpusReader(nltk.data.find('lib/stopwords-flat.zip')) 
```

最后我使用命令：

```
bin/hadoop jar /home/../streaming/hadoop-0.21.0-streaming.jar -input  
/user/root/input/voa.txt -output /user/root/output -mapper /home/../mapper.py -reducer  
/home/../reducer.py -file /home/../nltkandyaml.mod -file /home/../stopwords-flat.zip 
```

请告诉我哪里错了

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T18:27:18.230

```
 zip -r [your-nltk-package-name/nltk] nltk.zip

    zip -r [your-yaml-package-name/lib/yaml] yaml.zip 
```

然后在你的脚本中，添加：

```
 importer = zipimport.zipimporter('nltk.zip')
    importer2=zipimport.zipimporter('yaml.zip')
    yaml = importer2.load_module('yaml')
    nltk = importer.load_module('nltk') 
```

在您的命令中，添加：

```
 -file [path-to-your-zip-file] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:45:02.923

I'm not entirely clear what your problem / error is, but if you want the contents of stopwords-flat.zip to be available in the current working directory at runtime use the `-archives` flag rather than `-files` (which could be your problem as you're using `-file`).

Hadoop will unpack the named archive file (zip), and the contents will be available as if they were in the local directory of your running mapper:

```
bin/hadoop jar /home/../streaming/hadoop-0.21.0-streaming.jar \
  -input  /user/root/input/voa.txt 
  -output /user/root/output \
  -mapper /home/../mapper.py \
  -reducer /home/../reducer.py \
  -files /home/../nltkandyaml.mod \
  -archives /home/../stopwords-flat.zip 
```

# objective-c - iOS 中的 PngCrush 是什么？

> ID：10716303
> 
> 赞同：4
> 
> 时间：2012-05-23T08:35:07.813
> 
> 标签：objective-c, ios, xcode, image-optimization, pngcrush

我知道 Pngcrush 是 iOS 中的一种图像优化技术，但我怀疑 X-code 是否会在每次构建期间内部执行此操作，或者在将我们的应用程序部署到 iTunes 商店之前，我们需要进行此图像优化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:39:39.037

Xcode 在构建期间进行转换。最终的应用程序将修改 png，您无需手动执行任何操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T08:55:06.267

PNG粉碎是使用`pngcrush`您可以使用以下命令手动访问的工具完成的：

```
xcrun -sdk iphoneos pngcrush -iphone ... 
```

Xcode 会自动为任何添加到目标的“PNG”文件类型的文件执行此操作：

![在此处输入图像描述](../Images/1a0f537c4a5784f5b3f054d6426cdfe5.png)

如果您使用目录引用包含资源，则Xcode*不会*执行 PNG 粉碎，您必须手动执行此操作。

您可以使用这个小 bash 片段手动粉碎目录中的所有 PNG：

```
find /path/to/directory -name "*.png" | while read filename; do
    xcrun -sdk iphoneos pngcrush -iphone "$filename" "${filename}_crushed"
    mv "${filename}_crushed" "${filename}"
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:53:25.397

默认情况下，XCode 会**自动**执行处理。

您可以从项目的构建设置中控制此行为：

搜索设置“**压缩 PNG 文件**”并设置所需的值。

# opencart - opencart 中的可定制产品

> ID：10716309
> 
> 赞同：0
> 
> 时间：2012-05-23T08:35:28.123
> 
> 标签：opencart

我正在创建一个在线马克杯印刷电子商店。我想允许用户在杯子上应用自己的图像是否有 opencart 中的任何模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:49:29.800

有可能的。有很多模块允许用户向当前覆盖的图像添加自定义文本，但这些图像是预先加载的。我正在考虑做同样的事情（不是杯子，而是图片的上传） Opencart 目前不提供专门用于图像的现成模块，但是您可以获得文件上传模块：

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=1887](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=1887)

对于带有图像覆盖的传统文本选项，您可能还需要考虑以下内容，对于 T 恤公司，用户可以将文本添加到页面上已经存在的 T 恤图像，更改图像和文本的颜色，字体等...可能是杯子的不错选择。

[http://forum.opencart.com/viewtopic.php?f=24&t=3998&start=20](http://forum.opencart.com/viewtopic.php?f=24&t=3998&start=20)

它们不是您正在寻找的东西，但不幸的是，目前不存在任何东西。如果你有时间、耐心和金钱，你可以很容易地找到一位自由职业者为你创造一个。我建议他们不要专门在您的站点中创建一个模块，而是创建一个可以上传到您的站点的模块，这样您实际上可以转身并在 Opencart 商店上出售它，也许可以赚回一些钱 - 很多人在那里寻找同样的东西！

所以简而言之，除了上面的链接或让自由职业者为您创建一个之外，目前没有其他解决方案。

干杯，

一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T15:42:11.107

也许这是一个老问题，但我认为未来有相同需求的用户会欢迎另一种选择。当您需要自定义框架或其他产品时，应考虑此选项自定义产品生成器[http://wedoweb.com.au/store/opencart-extensions](http://wedoweb.com.au/store/opencart-extensions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T08:15:00.157

是的，有一个类似的插件可以满足您的杯子打印 eshop 的目的。

这是 Opencart 的自定义 T 恤模块，但您也可以将其用于自定义马克杯，因为它们具有将徽标和文本拖动到产品任何位置的功能。

[http://codecanyon.net/item/opencart-custom-tshirt-design/4943029?ref=wpproducts](http://codecanyon.net/item/opencart-custom-tshirt-design/4943029?ref=wpproducts)

因此，如果您使用马克杯的图片而不是 T 恤，它可能会为您提供很好的服务。

此外，我从他们的团队听说他们将很快发布 Custom Mug Design Maker 扩展。因此，您可以关注他们保持联系。

谢谢松地

# jquery - 带回表格

> ID：10716311
> 
> 赞同：0
> 
> 时间：2012-05-23T08:35:32.853
> 
> 标签：jquery

我的表单存在这个问题，一旦提交，如果您没有填写任何字段，您将收到一条错误消息。我希望用户在看到错误消息后可以选择取回表单并可以选择重新填写。我觉得我可以解释清楚，自己检查：www.insead4sq.com

```
 <form method="post" action="default.asp?Process=add" id="SIGNUPFORM"><a href="#" name="signup"></a>
                        <fieldset>
                            <p>
                                <label>Name</label>
                                <input type="text" name="FIRSTNAME" id="FIRSTNAME" size="55" value="" />
                            </p>
                            <p>
                                <label>Surname</label>
                                <input type="text" name="LASTNAME" id="LASTNAME" size="55" value="" />
                            </p>
                            <p>
                                <label>Email Address</label>
                                <input type="text" name="EMAILADDRESS" id="EMAILADDRESS" size="55" value="" />
                            </p>
                            <p>
                                <label>Password</label>
                                <input type="password" name="PASSWORD" id="PASSWORD" size="55" value="" />
                            </p>
                            <p>
                                <label>Hometown</label>
                                <input type="text" name="CITY" id="CITY" size="55" value="" />
                            </p>
                            <p>
                                <input type="button" name="signup" value="Sign Up" class="submit" />
                            </p>
                        </fieldset>
                    </form>   

<script type="text/javascript">
$(document).ready(function() { 
    $("[name='signup']").click(function() { 
            $.ajax({
                type: "POST",
                data: $("#SIGNUPFORM").serialize(),
                url: "default.asp?Process=add", 
                success: function(output) { 
                $('#SIGNUPFORM').html(output)
                },
                error: function(output) {
                $('#SIGNUPFORM').html(output);
                }
            }); 
    }); 
    $(function update() {
        $.ajax({
            type: "GET",
            url: 'default.cs.asp?Process=TotalMembers',
            timeout: 2000,
            success: function(data) {
                $(".totalmembers").html(data);
                window.setTimeout(update, 5000);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                $(".totalmembers").html('.');
                window.setTimeout(update, 60000);
            }
        });
    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:38:46.050

使用预制的[JQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)不是更容易吗？即时验证，并向字段添加一个类“错误”，以便您可以 - 例如 - 更改 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:38:59.353

假设您返回的是文本错误消息，请尝试此操作。

首先，`div`在页面加载时不可见的页面添加一个：

```
<div id="errorMessage" style="display: none"></div> 
```

然后更改您的`error`处理程序以在其中显示上述 div 错误消息，而不是删除您的表单：

```
error: function(output) {
    $('#errorMessage').html(output).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:49:03.167

不是最好的做事方式。但是，如果您希望它按原样工作，请将您的错误函数更改为包含如下内容。

```
 $('#SIGNUPFORM').prepend($('<div></div>').attr({id:'dynamicResponse'}).append(output)) 
```

# python - 保证金 Openoffice python

> ID：10716313
> 
> 赞同：1
> 
> 时间：2012-05-23T08:35:38.967
> 
> 标签：python, openoffice.org, openoffice-writer, uno

我一直在搜索，没有任何结果，所以我会在这里尝试一下。我正在尝试使用 Python 为 OpenOffice 制作文档。我只是找不到如何设置文档的上边距。有人知道如何做到这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:09:11.440

像这样的东西似乎对我有用（在 Python 宏上下文中）：

```
import uno

def setMargin():
    doc = XSCRIPTCONTEXT.getDocument()
    oStyle = doc.StyleFamilies.getByName("PageStyles").getByName("Default")
    oStyle.TopMargin = 5000  #Not sure what the units are 
```

# php - 如何在 Zend Framework 项目中配置 .htaccess 以仅允许公共文件夹中的 index.php

> ID：10716314
> 
> 赞同：0
> 
> 时间：2012-05-23T08:35:54.127
> 
> 标签：php, apache, zend-framework, .htaccess

我正在恢复一个允许通过管理面板上传的网站，只允许公共文件夹中的 index.php 脚本。困扰我的是我使用公共文件夹中的 ckeditor+pgrfilemanager 并包含所需的 php 文件。

根据 SO 中知识渊博的人的建议，我收到了对此 .htaccess 片段的引用：

```
RewiteEngine On
RewriteCond %{REQUEST_METHOD} ^PUT$ [OR]
RewriteCond %{REQUEST_METHOD} ^MOVE$
RewriteRule ^/public/(.*)\.php /public/$1.nophp 
```

我的问题是这将如何影响公共子文件夹中的 php 文件？

另一个问题是我真的不确定我的 ZF 项目的最终 .htaccess 是什么样的。目前正在阅读 .htaccess 手册，因为我不太熟悉它，所以不确定我的更改

这是我想提出的

```
SetEnv APPLICATION_ENV production
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
RewriteCond %{REQUEST_METHOD} ^PUT$ [OR]
RewriteCond %{REQUEST_METHOD} ^MOVE$
RewriteRule ^/public/(.*)\.php /public/$1.nophp
AddHandler cgi-script .html .htm .shtml .php .php3 .phtml .phtm .pl .py .cgi .js .sh .jsp .asp
Options -ExecCGI 
```

如果我能向有经验的人学习，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:50:30.550

如果其中有真正的子文件夹，`public`则根 .htaccess 文件不会影响其中的文件。Apache 找到最低的文件夹并在那里查找指令。

.htaccess 文件中的不同组件看起来不错，但它们的顺序不正常。像这样的东西会更好：

```
SetEnv APPLICATION_ENV production
AddHandler cgi-script .html .htm .shtml .php .php3 .phtml .phtm .pl .py .cgi .js .sh .jsp .asp
Options -ExecCGI

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteCond %{REQUEST_METHOD} ^PUT$ [OR]
RewriteCond %{REQUEST_METHOD} ^MOVE$
RewriteRule ^/public/(.*)\.php /public/$1.nophp [L]

RewriteRule ^.*$ index.php [NC,L] 
```

# c# - "is" c# 多个选项

> ID：10716315
> 
> 赞同：5
> 
> 时间：2012-05-23T08:35:54.000
> 
> 标签：c#, c#-4.0

```
return (
      Page is WebAdminPriceRanges ||
      Page is WebAdminRatingQuestions
); 
```

有没有办法做到这一点：

```
return (
    Page is WebAdminPriceRanges || WebAdminRatingQuestions
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:38:34.823

不，这样的语法是不可能的。[is](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)运算符需要 2 个操作数，第一个是对象的实例，第二个是类型。

你可以使用`GetType()`：

```
return new[] { typeof(WebAdminPriceRanges), typeof(WebAdminRatingQuestions) }.Contains(Page.GetType()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T08:38:36.260

并不真地。您可以`Type`在集合中查找实例，但这并不能说明[`is`](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.100%29.aspx)执行的隐式转换；例如，`is`还检测类型是否是它所操作的实例的*基础*。

例子：

```
var types = new[] {typeof(WebAdminPriceRanges), typeof(WebAdminRatingQuestions)};

// this will return false if Page is e.g. a WebAdminBase
var is1 = types.Any(t => t == Page.GetType());

// while this will return true
var is2 = Page is WebAdminPriceRanges || Page is WebAdminRatingQuestions; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:39:19.103

不，您指定的第一种方式是唯一合理的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T08:38:39.037

不，C# 不是英语语言，您不能在二操作数运算中省略一个操作数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T08:38:45.283

不，你不能这样做。

如果您的*意图*是返回一个页面，**只有**当它是 or 类型`WebAdminPriceRanges` *时* `WebAdminRatingQuestions`，您可以使用 if 轻松完成。

例如：

```
if(Page is WebAdminPriceRanges || Page is WebAdminRatingQuestions)
   return Page;
return null; 
```

假设 Page 是*引用*类型或至少可以为*空的值*类型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T08:49:58.923

其他答案是正确的，但是虽然我不确定在哪里适合运算符优先级。如果 is 运算符低于逻辑或运算符，那么您会将两个类放在一起，这是没有意义的。

# ios5 - UIStoryBoard 和自定义 SplashView 的问题

> ID：10716323
> 
> 赞同：0
> 
> 时间：2012-05-23T08:36:22.977
> 
> 标签：ios5, uinavigationcontroller, splash-screen, uistoryboard

与 ios4 一样，我可以创建自定义视图以显示为初始屏幕，并可以使用 xib 在 appdelegate 文件中设置 rootViewController

但

使用带有 UIStoryBoard 的 iOS 5 如何设置或更改默认 UIStoryBoard 以首先显示启动画面，然后在我的应用程序中显示所需的视图，它是一个导航控制器

请帮助我提前谢谢

快乐编码:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:37:36.807

另一种解决方案是提供一个模态视图控制器，如下所示：

```
- (void)applicationDidBecomeActive:(UIApplication*)application
{
   static dispatch_once_t onceToken;

   dispatch_once( &onceToken, ^
                 {
                    SomeLaunchViewController* launchViewController = [[SomeLaunchViewController alloc] init];
                    [self.window.rootViewController presentViewController:launchViewController animated:NO completion:NULL];
                 } );
} 
```

以模态方式呈现视图控制器`-application:didFinishLaunchingWithOptions:`对我来说不起作用——“UIStoryboard”机制当时似乎还没有完成。

使用`dispatch_once`确保模态启动屏幕只会显示一次，而不是每次应用程序从后台状态变为活动状态时。

此示例使用 ARC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:31:18.237

通过一些研究得到解决方案必须使用`performSegueWithIdentifier:sender:`并且问题得到解决。

不需要使用任何其他`UIStoryBoard`的，只需输入 required`UINavigationController`

它的工作就像魅力

感谢谷歌和苹果

快乐编码:)

# c++ - c++中的分区函数

> ID：10716324
> 
> 赞同：2
> 
> 时间：2012-05-23T08:36:23.223
> 
> 标签：c++, algorithm, math

我需要 C++ 中的算法解决方案来解决[分区问题](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)

简单解释：找出所有得到数字 n 的和。例如

*   输入：5
*   输出：
    *   11111
    *   2111
    *   311
    *   41
    *   5
    *   221
    *   23

这个问题看起来很简单，但我找不到解决方案。我很接近做这个蛮力，因为最高输入是 11。关于这个问题的文章是高度数学化的，我真的不明白。

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:54:01.433

您可以尝试使用函数 F 的递归方法来查找给定数字 X 的所有第一级分区，即 X 表示为两个整数 a,b < X 的总和，然后在 a 和 b 上再次调用 F 直到它们不能再分区。[这是 Python 中的一个示例](http://code.activestate.com/recipes/218332-generator-for-integer-partitions/)，它可以帮助您用 C++ 编写自己的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:54:36.980

```
/*
E.g.
input number:5
5
1 4
1 1 3
1 1 1 2
1 1 1 1 1
1 2 2
2 3
*/
#include <iostream>
#include <vector>

using namespace std;

void print (vector<int>& v, int level){
    for(int i=0;i<=level;i++)
        cout << v[i] << " ";
    cout << endl;
}

void part(int n, vector<int>& v, int level){
    int first; /* first is before last */

    if(n<1) return ;
    v[level]=n;
    print(v, level);

    first=(level==0) ? 1 : v[level-1];

    for(int i=first;i<=n/2;i++){
        v[level]=i; /* replace last */
        part(n-i, v, level+1);
    }
}

int main(){
    int N;
    cout << "input number:";
    cin >> N;

    vector<int> v(N);

    part(N, v, 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:47:03.327

只需将它们按明确定义的顺序排列即可。然后编写一个函数以按该顺序查找第一个条目。然后编写一个函数以按该顺序查找下一个条目。那么问题就很简单了。

例如，在 5 的情况下，第一个条目有两个选择，11111 或 5。这些条目中的任何一个生成起来都很简单。然后，您只需要一个操作即可从给定条目中获取“下一个条目”。重复该操作，直到它失败并完成。

我建议这个顺序：

```
 11111
 1112
 113
 122
 14
 23
 5 
```

# android - 如何阻止所有其他操作

> ID：10716331
> 
> 赞同：0
> 
> 时间：2012-05-23T08:37:18.483
> 
> 标签：android, google-maps, android-listview, indexoutofboundsexception

在我的应用程序中，我有一个 ListView，它通过每次向下滚动时添加 10 个项目来动态增加。当我点击任何项目时，它会将我带到谷歌地图，然后返回 listView 我有一个按钮。

```
 public void onClick(View arg0) {

            Intent intent = new Intent(MapMarkerActivity.this,
                    FeedListViewActivity.class);
            startActivity(intent);
        } 
```

但是我的 FeedListViewActivity 需要大约 3-4 秒才能加载，因此在此期间，如果我单击设备上的后退按钮，屏幕会闪烁 0.3 秒并显示谷歌地图（基本上它不会去任何地方）。现在我单击设备上的后退按钮，它给了我一个空白屏幕，当我第二次单击后退按钮时，它会将我带到 listView。问题就在这里......现在当我尝试滚动列表视图时，我的应用程序崩溃说：

IndexOutOfBounf 索引=30 大小=10；

所以我将我的 onclick 更改为：

```
 public void onClick(View arg0) {
            finish();
        } 
```

现在单击此按钮时，它会给我一个空白屏幕，然后我必须单击设备的后退按钮才能从谷歌地图进入列表视图。

我的问题是为什么我会出现那个空白屏幕......我的意思是为什么我应该单击两次返回以返回列表视图以及为什么我得到 indexOutOfBound 异常。

我以这种方式命名问题的原因是“我希望在我点击按钮（在我的应用程序中）返回到延迟 3-4 秒的列表视图时阻止我设备上的后退按钮”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:41:57.590

bpgc 如果您从地图视图返回到列表视图，请知道您使用异步任务加载列表视图的时间？？？？

如果你想阻止后退按钮按下事件意味着只需使用

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
} 
```

# java - tomcat线程本地内存泄漏

> ID：10716332
> 
> 赞同：2
> 
> 时间：2012-05-23T08:37:21.137
> 
> 标签：java, tomcat, memory-leaks, thread-local

我正在使用线程本地方法为每个应用程序线程创建一个 json 序列化程序，以避免每次我想序列化它时创建对象。

我正在使用以下代码的代码：

```
public class JsonSerializerFactory {
    private static final ThreadLocal<JsonSerializer> JSON_SERIALIZER = 
        new ThreadLocal<JsonSerializer>() {
        @Override 
        protected JsonSerializer initialValue() {
             return new JsonSerializer();
        }
    };

public static JsonSerializer get() {
    return JSON_SERIALIZER;
} 
```

}

每次我想获得序列化程序时，我都会这样做：

```
JsonSerializerFactory.get() 
```

当我关闭tomcat时，我看到以下日志：

```
May 23, 2012 9:15:25 AM org.apache.catalina.loader.WebappClassLoader     clearReferencesThreads SEVERE: The web application [] appears to have started a thread named [Logback AsyncAppender Dispatcher [Async_Logger] - Thread-16] but has failed to stop it. This is very likely to create a memory leak. 
```

我已经阅读了[Tomcat 内存泄漏保护](http://wiki.apache.org/tomcat/MemoryLeakProtection#customThreadLocal)，但我可能在那里遗漏了一些东西。我真的有泄漏，还是应该忽略此消息？

有人可以解释一下吗？

查看[如何增强 tomcat 线程池行为](https://stackoverflow.com/questions/10671503/how-to-enhance-tomcat-thread-pool-behaviour)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:11:27.367

每次你使用 a 时，`ThreadLocal`你真的应该有一些方法来清除它。tomcat 抱怨的是 logback 内部创建的线程在本地引用了这个线程，因此不会被收集（假设线程没有死）。

如果出现以下情况，您可能会忽略此消息：

*   热应用程序重新加载并不那么重要，如果您重新加载应用程序，它只是一个泄漏
*   你知道 logback 线程在应用程序停止时完成

您可能首先要考虑的是您是否需要`ThreadLocal`缓存。真的`JsonSerializer`那么贵吗？你确定它不是线程安全的。

```
public class JsonSerializerFactory {
    public static JsonSerializer get() {
        // do this until you know you have a problem.
        return new JsonSerializer();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:43:36.553

我会说这与您的代码无关。

# c# - Windows 服务未显示在已安装的服务中（因此无法启动）

> ID：10716333
> 
> 赞同：2
> 
> 时间：2012-05-23T08:37:25.593
> 
> 标签：c#, windows-services

我刚刚构建了一个非常简单的 Windows 服务来测试某些东西并构建它来获取 .exe。根据MSDN 中的[这篇文章](http://msdn.microsoft.com/en-us/library/7a50syb3.aspx)，我还使用 Visual Studio Command Prompt 2010 (run as administrator) 安装了该服务`installutil TestService.exe`。

使用该`installutil`命令时，一切运行正常，我收到一条消息，提示该服务已安装。此外，当我检查服务节点（在 Visual Studio 的服务器资源管理器中）时启动服务，我没有看到任何名为`TestService.exe`.

此外，开始菜单-> 我的电脑（右键单击）-> 管理-> 服务和应用程序-> 服务没有显示`TestService.exe`我可以通过它启动服务的方式。

任何建议我如何启动服务？

函数内部`OnStart`代码：

```
Process[] testProcess = Process.GetProcessesByName("notepad.exe");
if (testProcess.Length == 0)
    File.WriteAllText(@"C:\Users\User1\Desktop\service.txt", "nothing");

else
    File.WriteAllText(@"C:\Users\User1\Desktop\service.txt", "run"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T08:47:57.057

我以前遇到过问题，`installutil`发现使用该`sc`命令有效，而`installutil`没有。

尝试使用以下命令安装您的服务：

```
sc create servicename binPath= serviceexe.exe 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T20:52:31.450

我刚刚遇到了这个问题，并且能够通过以下步骤解决它。如果您跳过这些步骤，您的安装项目将构建您的文件并将其复制到正确的目录；但是，如果没有这些步骤，他们不会将您的二进制文件注册为服务。

1.  在解决方案资源管理器中，右键单击安装项目，指向查看，然后选择自定义操作。出现自定义操作编辑器。

2.  在自定义操作编辑器中，右键单击自定义操作节点并选择添加自定义操作。将出现“选择项目中的项目”对话框。

3.  双击列表框中的应用程序文件夹将其打开，从 MyNewService (Active) 中选择主输出，然后单击 OK。主要输出添加到自定义操作的所有四个节点：安装、提交、回滚和卸载。

4.  构建安装项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T14:39:16.457

在 VS 2013 中工作时，当我通过右键单击项目并添加类型的新项目来添加安装程序时遇到了这个问题`Installer Class`。主要区别在于您需要右键单击`Design View`并`Windows Service`单击`Add Installer`。

有关 .Net 4.5 和 4.6 的完整详细信息，请参阅[创建服务](https://msdn.microsoft.com/en-us/library/9k985bc9(v=vs.110).aspx)、[添加安装程序](https://msdn.microsoft.com/en-us/library/ddhy0byf(v=vs.110).aspx)和[安装服务](https://msdn.microsoft.com/en-us/library/sd8zc8ha(v=vs.110).aspx)

# jquery - 如何使用 jtweetsanywhere 仅显示 tweetTimestamp？

> ID：10716334
> 
> 赞同：0
> 
> 时间：2012-05-23T08:37:26.750
> 
> 标签：jquery

有没有人有使用 jtweetsanywhere 插件的经验？我试图只显示推文的时间戳。目前我也得到了所有属性，比如转发器。这是我使用的代码。

```
$('#tweetFeed').jTweetsAnywhere({
                username: 'username',
                count: 1,
                showTweetFeed: {
                    showProfileImages: false,
                    showUserScreenNames: false,
                    showUserFullNames: false,
                    showActionReply: false,
                    showActionRetweet: false,
                    showActionFavorite: false,
                    showTwitterBird: false,
                    showTimestamp: {
                        refreshInterval: 15
                    }
                }
            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:17:01.497

这些是调用 jTweetsAnywhere 时可以设置的配置选项（及其默认值）：

```
showProfileImages: null
showUserScreenNames: null
showUserFullNames: false
showActionReply: false
showActionRetweet: false
showActionFavorite: false
showTwitterBird: true
showTimestamp: true
showSource: false
showGeoLocation: true
showInReplyTo: true 
```

如果你想隐藏转发器，你必须覆盖`tweetRetweeterDecorator`里面的配置选项：

```
tweetRetweeterDecorator: function()
{
    return '';
} 
```

# php - 使用 php 运行获取链接服务器端

> ID：10716336
> 
> 赞同：2
> 
> 时间：2012-05-23T08:37:32.677
> 
> 标签：php

当我的 PHP 脚本运行时，我想运行这样的服务器端链接：

```
http://77.33.xx.xx/s/addtoqueue.php?action=store&filename=myprettypicture&link=http://i69.servimg.com/u/f69/13/29/70/44/facebo10.png 
```

我这样做是为了将图像存储在自己的单独图像服务器上。该链接正在将图像添加到队列中。

如何正确执行此链接？

到目前为止，我这样做了：

```
$link = 'http://77.33.xx.xx/s/addtoqueue.php?action=store&filename='.$filename.'&link=$link; 
```

但不知道如何运行这个？

顺便说一句，对 $link 进行 urlencode() 和 urldecode() 是否明智？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:40:04.617

我不会像那样自己构建查询字符串，而是[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)优先使用：

```
$url = 'http://77.33.xx.xx/s/addtoqueue.php';
$params = array(
    'action' => 'store',
    'filename' => $filename,
    'link' => $link,
);
$link = $url . '?' . http_build_query($params); 
```

要真正调用 URL，您可以使用多种技术，但在这种情况下我最喜欢的是[curl](http://php.net/curl)。[这是手册中示例](http://php.net/manual/en/curl.examples-basic.php)的改编版本：

```
<?php
$ch = curl_init($link);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch); 
```

其他选项包括[`file_get_contents($link);`](http://php.net/file_get_contents)是否[启用了 fopen 包装器](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。

## 评论的附加回复

```
<?php
$ch = curl_init($link);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch); 
```

`$response`现在包含来自 URL 的响应。从[`curl_exec()`手册页](http://php.net/manual/en/function.curl-exec.php)：

> 成功时返回 TRUE，失败时返回 FALSE。但是，如果设置了 CURLOPT_RETURNTRANSFER 选项，它将在成功时返回结果，在失败时返回 FALSE。

有关 curl 选项的更多信息，您可以查看[`curl_setopt()`手册页](http://php.net/manual/en/function.curl-setopt.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:40:17.737

您可以使用 cURL 来调用您的链接。 [http://php.net/manual/ru/book.curl.php](http://php.net/manual/ru/book.curl.php)

# jquery - 如何删除第一行中的最后一个 TD

> ID：10716340
> 
> 赞同：2
> 
> 时间：2012-05-23T08:37:41.860
> 
> 标签：jquery, html, css

```
<table border="2">
    <tbody>
        <tr>
            <td>aaa</td><td>aaa</td><td>aaa</td><td>aaa</td><td class="last">THIS SHOULD BE DELETED</td>
        </tr>
        <tr>
            <td>aaa</td><td>aaa</td><td>aaa</td><td>aaa</td><td class="last">NON DELETED</td>
        </tr>
        <tr>
            <td>aaa</td><td>aaa</td><td>aaa</td><td>aaa</td><td class="last">NON DELETED</td>
        </tr>
        <tr>
            <td>aaa</td><td>aaa</td><td>aaa</td><td>aaa</td><td class="last">NON DELETED</td>
        </tr>
    </tbody>
</table> 
```

[http://jsfiddle.net/Vwa3p/](http://jsfiddle.net/Vwa3p/)

如何使用 CSS 或 jQuery 删除第一行中的最后一个 TD？应该显示：无，但如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:39:33.373

第一行，意思是第一行？

```
$('tr:first td:last').hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:43:31.480

使用 jquery：

```
$('.last:first').remove(); 
```

使用 CSS：

```
table tbody tr:first-child td.last  {
    display:none
} 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:46:18.253

仅限 CSS：

```
​table tr:first-child td:last-child{
    display:none;
}​ 
```

或者

```
​table tr:first-child .last{
    display:none;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T08:38:51.080

如果您需要删除它，请使用：

```
$("table tr:first > td:last").remove();​ 
```

如果您需要隐藏它，请使用：

```
$("table tr:first > td:last").hide();​ 
```

**演示：http:** [//jsfiddle.net/Vwa3p/1/](http://jsfiddle.net/Vwa3p/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T08:38:54.887

```
$('table > tbody > tr:first > td:last').hide() 
```

使用这样的 CSS：

```
table > tbody > tr:first-child > td:last-child 
```

我建议使用子选择器 (>) 来更快地遍历并将其限制为仅在 tbody 中搜索，您永远不知道您以后是否在广告 thead 和/或 tfooter。

# wpf - 在运行时更改系统日期格式时更新 DatePicker 中的日期格式

> ID：10716345
> 
> 赞同：2
> 
> 时间：2012-05-23T08:37:58.920
> 
> 标签：wpf, datepicker, culture, datetime-format

我正在使用`DatePicker`WPF 应用程序中的一个。我想将日期格式更改为`DatePicker`系统日期格式。

这是邮件窗口：

```
<Window x:Class="DateTimeDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button x:Name="Btn" Width="100" Click="Btn_Click">Click</Button>
    </StackPanel>
</Window> 
```

使用以下代码打开子窗口：

```
private void Btn_Click(object sender, RoutedEventArgs e)
{
    ChiildWindow Cw = new ChiildWindow();
    Cw.ChildDatePicker.SelectedDate = DateTime.Now;
    Cw.ShowDialog();
    Cw.Focus();
} 
```

这是子窗口，它只包含一个`DatePicker`：

```
<Window x:Class="DateTimeDemo.ChiildWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ChiildWindow" Height="300" Width="300">
    <StackPanel>
        <DatePicker x:Name="ChildDatePicker"/>
    </StackPanel>
</Window> 
```

当我打开子窗口时，格式取自系统区域性，但如果我在窗口打开后从控制面板更改系统日期格式，则格式不会改变。

我在 ChildWindow.xaml.cs 文件中尝试了以下代码：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CurrentCulture; 
```

但是当我打开子窗口时，格式不会改变。

有谁知道问题是什么以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:25:22.573

根据这个答案（[如何在 C# 中获取当前区域设置？](https://stackoverflow.com/questions/1542409/how-to-get-current-regional-settings-in-c)），您可以使用以下代码检测文化：

```
private class State
{
    public CultureInfo Result { get; set; }
}

public CultureInfo GetCurrentCulture()
{
    Thread.CurrentThread.CurrentCulture.ClearCachedData();
    var thread = new Thread(s => ((State)s).Result = Thread.CurrentThread.CurrentCulture);
    var state = new State();
    thread.Start(state);
    thread.Join();
    var culture = state.Result;
} 
```

最后，您需要设置 CurrentUICulture 属性以影响 UI 组件：

```
Thread.CurrentThread.CurrentUICulture = GetCurrentCulture(); 
```

# exception - APPFabric客户端通讯错误？

> ID：10716346
> 
> 赞同：0
> 
> 时间：2012-05-23T08:38:01.197
> 
> 标签：exception, client, appfabric

我已经配置了 2 个 AppFabric 实例并尝试从测试客户端连接到缓存。起初，我在使用 DataCacheFactory 建立缓存时遇到了麻烦，但在防火墙中打开 22233-22235 端口后，我设法使用 DataCacheFactory 获取缓存。

一旦我尝试将缓存用于一个非常小的对象（使用简单的 get），我就会得到以下带有 null InnerException 的信息：ErrorCode:SubStatus:The connection was terminate,可能是由于服务器或网络问题或序列化对象大小大于服务器上的 MaxBufferSize。请求的结果未知。

我不相信这是 MaxBufferSize 问题（我还修改了配置中的 transportProperties 以确保），但另一方面 - 我能够获取缓存，我认为这应该表明客户端可以与之通信服务器。那是什么？-我怎样才能获得有关此问题的更多详细信息？

在此先感谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:29:53.190

得到这个工作！我需要做的只是将出现在 ClusterConfig 文件中的主机名添加到客户端的 hosts 文件中，就是这样！

希望对任何人都有帮助，尼尔。

# database - 网格控件导航

> ID：10716356
> 
> 赞同：0
> 
> 时间：2012-05-23T08:38:35.887
> 
> 标签：database, foxpro, gridcontrol

在 VFP9 中，我有一个网格控件，可以显示数据库表中的记录。而且我还有一个命令按钮，我想用它从一行导航到另一行。我试过了`thisform.grid1.ActiveRow = thisform.grid1.ActiveRow +1`，但这不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:13:04.173

根据 VFP 文档，ActiveRow 属性“指定包含网格控件中活动单元格的行。在设计时不可用；在运行时只读”。

我会做这样的事情。

```
IF EOF("TableAlias) = .F.
    SKIP 1 IN "TableAlias"
ENDIF 
```

# php - 在 PHP 中比较字符串不是一直有效吗？

> ID：10716363
> 
> 赞同：0
> 
> 时间：2012-05-23T08:38:53.437
> 
> 标签：php, string-comparison

我有这个代码：

```
if($post['maintopics'] == '-1--- Bitte wählen Sie ein Thema aus --' && $post['subtopics'] == 'Bitte wählen Sie erst eine Oberkategorie...') {
                echo 'test';
} 
```

在我的本地 Windows 上，它会打印“test”，而 Linux 服务器上的相同代码不会打印“test”。我尝试在执行 if 之前记录值，它们与 if 中的值完全相同。知道为什么这在我的服务器上不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:55:37.003

尝试在文件的开头定义它：

```
ini_set( 'default_charset', 'UTF-8' );
mb_internal_encoding('UTF-8'); 
```

此外，检查您是否在没有 BOM 的情况下以 UTF-8 格式保存 PHP 文件，Notepad++ 是一个不错的选择。

我也有一些头疼，希望它可以帮助你。

# c# - 选择正确的数据类型与强制转换

> ID：10716365
> 
> 赞同：3
> 
> 时间：2012-05-23T08:38:56.777
> 
> 标签：c#

我正在努力学习编写好的 C# 代码，我希望得到您的建议。

例如，如果我有一个小于 255 的无符号数值，则该值适合该`byte`类型。但是这个值不会用作字节，而是用作`Int`设置组合框索引，因此需要强制转换。

我的问题是，在编写好的 C# 代码时，我有多少需要担心数据类型？我是否需要将此值声明为`Int`以避免强制转换？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:41:43.527

投射 from `byte`to`int`是安全的，因为`int`它比 宽`byte`，因此不会丢失数据。

但是，如果您将变量定义为`byte`但实际上一直将其转换为`int`，那么最好只使用它`int`，因为您只会混淆您自己和代码的其他读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:42:00.087

如果你需要它是一个`int`，使用一个`int`。

数据类型很重要，但代码可读性问题也很重要——必须到处进行转换会降低可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:41:21.247

数据类型的设计不应依赖于控件显示（或保存到数据存储）的方式。如果我看到类型属性，`byte`那么它会告诉我我的数据类型期望的值范围。例如，类具有类型的`Color`自描述属性。`R,G,B``byte`

也不要进行[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)- 如果它成为性能问题（我怀疑从字节转换为整数可能会对系统性能产生重大影响），那么您可以稍后优化问题代码。

顺便说一句，从 byte 转换为 int 是隐式的，因此您无需手动进行：

```
comboBox.SelectedIndex = myObj.ByteProperty; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:43:13.967

答案是**肯定**的。

当您需要使用不是很大的整数值时，您应该避免使用/转换为任何其他类型，`int`除非您有需要。就像您发送此数据的有限带宽一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T08:45:06.557

数据类型是良好编码的基础——它允许编译器为你做很多检查，因此有助于消除/突出错误。

在您的示例中，您可以使用 ushort 来存储您的数字，但除非您正在编写一个对内存非常敏感的应用程序，否则最好使用 int ，因为无论如何都需要将参数转换回整数。（由于常量类型转换，这将使您的代码的可读性降低 - 并且效率也可能降低）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T08:46:30.420

凭借我们计算机上当前可用的内存量，当需要在字节或整数之间进行选择时，内存不再是问题。

我要补充一点，int 更容易处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T10:59:36.680

谢谢你们的回答。我不能接受一个答案，因为它们相辅相成，所以我决定将它们分组。

1.  CPU 旨在高效处理 32 位值（[链接问题](https://stackoverflow.com/questions/1097467/why-should-i-use-int-instead-of-a-byte-or-short-in-c-sharp)）。
2.  没有必要做[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)。
3.  总是强制转换数据类型效率不高。
4.  声明某种类型的变量并总是强制转换它会降低代码的可读性。

# php - MySQL 数据库中记录的分页

> ID：10716367
> 
> 赞同：-3
> 
> 时间：2012-05-23T08:39:00.930
> 
> 标签：php, javascript, mysql

我有一个脚本可以计算它在页面上看到的记录数：

```
 <script>
document.write(document.getElementById('moon').rows.length-1);
document.write ('&nbsp;');
document.write (' of ');
document.write ('&nbsp;');
document.write(document.getElementById('moon').rows.length-1);
document.write (' pages');

 </script> 
```

我将如何使用它一次对 10 条记录进行分页？也许使用诸如`display:none`或之类的样式，然后链接到“页面”计数上的这些隐藏的 div。

谢谢

**编辑：**

我曾尝试使用 PHP Mysql Query 来使用 num_rows 执行此操作，但即使我获取数据，它也总是会抛出错误！

**第二次编辑**

好的，我正在提取信息并显示它：

```
<table class="std" id="moon" border="0" cellpadding="0" cellspacing="0">
        <tr>
        <?php

        $pcounter = 1;
        $userID = LedDB::getInstance()->get_user_id_by_name($_SESSION['user']);
        $presult = LedDB::getInstance()->get_page_by_campaign_id($campaignID);
        $i=0;
        while ($row = mysqli_fetch_array($presult)):
             $style = "";
                if($i%2==0)
{
    $style = 'style="background-color: #EFEFEF"';
}
echo "<tr ".$style.">";     
            echo "<td class='camp' style='padding-left:10px;'><b><a href='editPage.php?pageID=" .htmlentities($row['pid']) ."&campaignID=" .htmlentities($row['campaignid']) ."' class='camp'> Page" . $pcounter . "</a></b></td>";
            echo "<td style='padding-left:10px;'></td>";
            echo "<td style='padding-left:10px;'></td>";
            echo "<td></td>";
            echo "<td></td>";
            $pageID = $row['pid'];
            //The loop is left open
            ?>
            <td>
             <div class="buttons">
                <form name="editPage" action="editPage.php" method="GET"> 
                    <input type="hidden" name="campaignID" value="<?php echo $campaignID ?>"/>
                    <input type="hidden" name="pageID" value="<?php echo $pageID ?>"/>
                    <button type="submit" name="editPage" value="Edit" class="blue" >
                   <img src="images/edit.png" width="20" height="20"></button>

                </form>
                 </div>
            </td>
            <td>
                <form name="deletePage" action="deletePage.php" method="POST">
                    <input type="hidden" name="pageID" value="<?php echo $pageID; ?>"/>
                    <div class="buttons">
                    <button type="submit" name="deletePage" value="Delete" class="negative">
                    <img src="images/delete_x.png" width="20" height="20"></button>
                    </div>
                </form>
            </td>
            <?php
            echo "</tr>\n";
        $pcounter++;
        $i++;
        endwhile;
        mysqli_free_result($presult);
        ?>
    </table> 
```

这是哪里`$presult = LedDB::getInstance()->get_page_by_campaign_id($campaignID);`：

```
public function get_page_by_campaign_id($campaignID) {
     $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid,campaignid,message_text,message FROM pages WHERE campaignid =" . $campaignID );
} 
```

每当我尝试将其包装在分页类中时，它要么返回一个 0 值，要么只是用`sql_num_rows()`错误轰炸我的整个脚本......

这就是我认为 javascript 分页在这种情况下是最佳解决方案的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:57:19.983

网上有几个示例可以帮助您入门，这就是我要开始的地方：

[http://www.phpclasses.org/search.html?words=pagination&x=0&y=0&go_search=1](http://www.phpclasses.org/search.html?words=pagination&x=0&y=0&go_search=1) http://www.phpsnaps.com/snaps/view/php-pagination-class/ [http://www.phpbuilder .com/board/showthread.php?t=10283679](http://www.phpbuilder.com/board/showthread.php?t=10283679) http://phpsense.com/2007/php-pagination-script/

# java - 创建“隐形”图形

> ID：10716370
> 
> 赞同：1
> 
> 时间：2012-05-23T08:39:11.673
> 
> 标签：java, image, invisible, off-screen, raw-data

在从图形类生成屏幕外图像并将它们转换为二进制数据而不将它们设置在屏幕上可见时，我需要您的帮助。我想生成大量标签并将它们作为二进制数据发送到打印机。如果我创建图像，在屏幕上显示然后发送它，一切都很好，但是我在一分钟内生成 100 个标签，当它们在我的 java 应用程序的屏幕上闪烁时很烦人。我希望它由单独的线程生成，没有明显的效果。
如果我不给他们看，标签是黑色的。我试图生成它们，然后在屏幕外展示它们，这与我的期望不符。有没有办法从 Graphics2d 生成“不可见”的图像？或者还有其他方法可以建议我吗？

提前谢谢你 Qba

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:44:58.127

您可以使用 a[`BufferedImage`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)和 use[`getGraphics()`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getGraphics%28%29)来获取`Graphics2D`在此图像上绘制的对象。

如果您在绘制 GUI 组件之后（例如，如果您的“标签”指的是 JLabel），您可以查看以下问题：

*   [如何从 java 中的组件获取 BufferedImage？](https://stackoverflow.com/questions/3857901/how-to-get-a-bufferedimage-from-a-component-in-java)
*   [Java/Swing 离屏渲染 (Cobra HTMLPanel -> BufferedImage) 问题：组件没有先完成重绘](https://stackoverflow.com/questions/2783377/java-swing-offscreen-rendering-cobra-htmlpanel-bufferedimage-problem-compo)

# r - 使用表达式时轴标签中的间距（粘贴（...））

> ID：10716374
> 
> 赞同：11
> 
> 时间：2012-05-23T08:39:26.523
> 
> 标签：r, axis-labels, plotmath

考虑以下示例：

```
plot(c(2,4,6)~c(1,2,3),xlab="x",
ylab=expression(paste('flux (g ',CO[2]~m^{-2}~h^{-1},')'))) 
```

显然我想要在“g”和“CO”之间有一个完整的空间，但由于某种原因，我在图形标签中得到了一个更小的（一些标签甚至为零）空间。

如果我这样做，问题就更加明显了：

```
plot(c(2,4,6)~c(1,2,3),xlab="x",
ylab=expression(paste('flux (g C',O[2]~m^{-2}~h^{-1},')'))) 
```

难道我做错了什么？有没有办法固定间距，甚至有更好的方法来创建带有大量子/上标和希腊字母的标签？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T12:17:24.490

*您很*可能会在操作系统用于非衬线显示的字体中获得印刷正确的“空格”。您可以更改字体，也可以使用 plotmath 插入足以容纳特定字符串的空格`phantom()`：

```
 plot(c(2,4,6)~c(1,2,3),xlab="x",
     ylab=expression(paste('flux',phantom(x),'(g ',CO[2]~m^{-2}~h^{-1},')'))) 
```

或者正如@baptiste 指出的那样，这可以在没有`paste`使用普通绘图分隔符的情况下完成，因为真正的 R 表达式中的波浪号被处理为“空格”：

```
 ylab=expression(flux*phantom(x)*(g~CO[2]~m^{-2}~h^{-1}))) 
```

# math - 钻石上的像素坐标

> ID：10716378
> 
> 赞同：10
> 
> 时间：2012-05-23T08:39:40.213
> 
> 标签：math, coordinates

我得到了一张图片，上面有几颗钻石并排放置，如下图所示

![钻石坐标](../Images/b9ae836a16c2ef21adc5077688034eea.png)

我在图像上知道的唯一坐标是顶角（绿色文本）。
当我点击图像时，我得到了该点的坐标，但我无法得到我所在的钻石。
例如我点击红点，我怎么知道 x:260, y:179 = top diamond ？
蓝色属于左边？ETC...

非常感谢您的帮助。

编辑：
我终于使用了 Canvas，但我认为 SVG 对于我需要做的事情同样有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:55:27.430

我看到了两种可能的方法：直接检查一个点是否在钻石内并使用仿射变换。我将描述两者。

# 直接点位检查

要确定一个点是否在钻石内部，您必须检查它与钻石中点的偏差。您必须将 X 和 Y 偏差与钻石的 X 和 Y 范围成比例，您将得到两个因素。对于菱形内的所有点，这些因子的模值之和小于或等于 1。在代码中，如下所示：

```
var dx = Math.abs(coords[0] - middle[0]);
var dy = Math.abs(coords[1] - middle[1]);
if (dx / size[0] + dy / size[1] <= 1)
  alert("Inside diamond");
else
  alert("Outside diamond"); 
```

因此，您现在要做的就是确定每颗钻石的中间点（在所有情况下大小都相同）并检查您要测试的点是否位于其中。

工作示例：http: [//jsfiddle.net/z98hr/](http://jsfiddle.net/z98hr/)

# 仿射变换

使用[仿射变换](http://en.wikipedia.org/wiki/Affine_transformation)，您可以将顶部菱形的角坐标更改为 (0,0)、(1,0)、(0,1) 和 (1,1)。如果您随后将相同的转换应用于您需要测试的点，那么确定它属于哪颗钻石就变得微不足道了。

首先，您需要一个平移向量将 (225,2) 点移动到坐标原点。假设您有四个坐标确定您的顶部钻石（左右坐标，顶部和底部坐标）：

```
var topDiamond = [[113, 2], [337, 227]]; 
```

那么将菱形的顶点移动到零坐标的[平移向量](http://en.wikipedia.org/wiki/Translation_%28geometry%29#Matrix_representation)将是：

```
var translationVector = [-(topDiamond[0][0] + topDiamond[1][0]) / 2,
                         -topDiamond[0][1]]; 
```

您可以将其应用于原始坐标，如下所示：

```
function add(vector1, vector2)
{
  return [vector1[0] + vector2[0], vector1[1] + vector2[1]];
}
topDiamond = [add(topDiamond[0], translationVector),
              add(topDiamond[1], translationVector)]; 
```

然后你需要一个[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)：

```
var angle = -Math.atan2(topDiamond[1][1] - topDiamond[0][1],
                        topDiamond[1][0] - topDiamond[0][0]);
var rotMatrix = [[Math.cos(angle), -Math.sin(angle)],
                 [Math.sin(angle), Math.cos(angle)]]; 
```

与该矩阵相乘后，点 (225,2) 和 (337,114.5) 在 X 轴上对齐。但是您现在拥有的是一个秋千，您现在需要一个[水平剪切变换](http://en.wikipedia.org/wiki/Shear_mapping)来使菱形的另一侧在 Y 轴上对齐：

```
function multiply(matrix, vector)
{
  return [matrix[0][0] * vector[0] + matrix[0][1] * vector[1],
          matrix[1][0] * vector[0] + matrix[1][1] * vector[1]];
}
var point = [topDiamond[0][0], (topDiamond[0][1] + topDiamond[1][1]) / 2];
point = multiply(rotMatrix, point);
var shearMatrix = [[1, -point[0] / point[1]], [0, 1]]; 
```

与此矩阵相乘后，您现在有一个矩形。现在您只需要一个[缩放矩阵](http://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)来确保角的 X 和 Y 坐标具有值 0 和 1：

```
point = multiply(shearMatrix, point);
var point2 = [topDiamond[1][0], (topDiamond[0][1] + topDiamond[1][1]) / 2];
point2 = multiply(rotMatrix, point2);
point2 = multiply(shearMatrix, point2);
var scaleMatrix = [[1/point2[0], 0], [0, 1/point[1]]]; 
```

有了它，现在您可以将这些转换应用于任何点：

```
alert(
  multiply(scaleMatrix,
    multiply(shearMatrix,
      multiply(rotMatrix,
        add(translationVector, [260, 179])
      )
    )
  )
); 
```

这给了你`0.94,0.63`- 两个值都在`(0..1)`范围内，这意味着它是顶级钻石。作为`[420,230]`输入，您会得到`1.88,0.14`- X 在`(1..2)`范围内，Y 在`0..1`范围内表示正确的钻石。等等。

工作示例：http: [//jsfiddle.net/FzWHe/](http://jsfiddle.net/FzWHe/)

在回顾展中，这对于像钻石这样简单的几何图形来说可能工作量太大了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T09:10:31.620

本质上，您所拥有的可能是 4 个瓷砖的等距视图（基于您对显示为梯形的钻石的评论）。

一种快速的方法是创建两条与“钻石”的“轴”平行的线（但仍然相互交叉......这也很重要）。在给出的示例图像中，这意味着两条线彼此垂直但旋转了 45 度。在等轴测图的情况下，这些线不会相互垂直，而是根据您的视图以其他角度。

一旦你有了这两条线，你就可以创建一个“hitTest()”函数，它将获取被点击点的坐标，并计算两条线方程。您对线方程返回的实际数字并不真正感兴趣，而只是对符号感兴趣。该标志向您显示您的点位于直线的哪一侧。

这意味着您的“钻石”将对应于这些符号对（每个线方程一个符号）[-,-], [-,+], [+,-], [+,+]。

（请注意，符号取决于线的定义方式，换句话说，对于给定的点 P，如果线被定义为“从左到右”运行，则某个线方程 (L) 的符号将有所不同或“从右到左”，或更一般地，符号将是相反方向的相反方向。）

[可以从这里](http://en.wikipedia.org/wiki/Line_%28geometry%29#Coordinate_geometry)获得有关您需要的线方程形式的更多信息

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T09:54:19.317

使用矩阵，您可以推导出选择钻石的快速公式。

您想要从`(x,y)`“钻石空间”转变。也就是说，一个坐标系，其中`(0,0)`顶部的菱形`(1,0)`是右下方和`(0,1)`左下方的坐标系。

```
A * x = y 
```

其中`A`是变换，`x`是图像坐标，`y`是菱形坐标。要处理平移（`(0,0)`在两个空间中不是同一点），您可以向向量添加另一行，始终为`1`.

您可以同时变换多个向量，方法是将它们放在一起，使它们形成一个矩阵。

```
[ a b dx ]   [ 225 337 113 ]   [ 0 1 0 ]
[ c d dy ] * [   2 114 114 ] = [ 0 0 1 ]
[ 0 0  1 ]   [   1   1   1 ]   [ 1 1 1 ]
                 ^   ^   ^-left  ^-^-^--- new coordinates for each point
                 |   '-right
                 '-top diamond 
```

要求解第一个矩阵中的系数，您需要除以第二个矩阵（或乘以逆矩阵）。

```
[ a b dx ]   [ 0 1 0 ]   [ 225 337 113 ]^-1
[ c d dy ] = [ 0 0 1 ] * [   2 114 114 ]
[ 0 0  1 ]   [ 1 1 1 ]   [   1   1   1 ] 
```

结果是：

```
[ a b dx ]   [  (1/224) (1/224) (-227/224) ]
[ c d dy ] = [ (-1/224) (1/224)  (223/224) ]
[ 0 0  1 ]   [   0       0          1      ] 
```

将其放入程序代码中：

```
function getDiamond(x, y) {
    return [(x + y - 227) / 224, (-x + y + 223) / 224];
} 
```

例子：

```
> getDiamond(260,179); // red
[0.9464285714285714, 0.6339285714285714]
> getDiamond(250,230); // green
[1.1294642857142858, 0.90625]
> getDiamond(189,250); // blue
[0.9464285714285714, 1.2678571428571428]
> getDiamond(420,230); // yellow
[1.8883928571428572, 0.14732142857142858] 
```

如果您查看整数部分，您可以看到坐标对应于哪个菱形。红色的`(0.94, 0.63)`位于`(0,0)`非常靠近边缘的区域`(1,0)`。

* * *

**注意。**OP 中的蓝点和绿点绘制在错误的位置（或给出了错误的坐标），因此我的函数的结果将它们置于不同的相对位置。

* * *

如果你象征性地进行计算，你会得到这样的结果：

```
[ a b dx ]   [ (y2 - y0)/M  -(x2 - x0)/M  -(x0*y2 - y0*x2)/M ]
[ c d dy ] = [-(y1 - y0)/M   (x1 - x0)/M   (x0*y1 - y0*x1)/M ]
[ 0 0  1 ]   [        0             0                   1    ] 
```

哪里`M = x1*y2 - x2*y1 - y0*x1 + y0*x2 + x0*y1 - x0*y2`。

点 0 是顶部菱形的位置，点 1 是右侧菱形的位置，点 2 是左侧菱形的位置。

这是一个计算这个的函数：

```
function DiamondMaker(topx,topy,  leftx,lefty,  rightx,righty)
{
    var M = topx*lefty - topx*righty +
            leftx*righty - leftx*topy +
            rightx*topy - rightx*lefty;
    var a  = -(topy - righty)/M;
    var b  =  (topx - rightx)/M;
    var dx = -(topx*righty - topy*rightx)/M;
    var c  =  (topy - lefty)/M;
    var d  = -(topx - leftx)/M;
    var dy =  (topx*lefty - topy*leftx)/M;
    return function(x, y) {
        return [a * x + b * y + dx, c * x + d * y + dy];
    };
}

var getDiamond = DiamondMaker(225,2,  337,114,  113,114);
// (same example as before) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T08:49:45.340

所有你需要的 - 只是停留什么是 roration。这是链接：[http](http://en.wikipedia.org/wiki/Rotation_(mathematics) ://en.wikipedia.org/wiki/Rotation_(mathematics )

您应该旋转您的点以使正方形的边与坐标网格平行。旋转点应该是您将威胁为 0,0 钻石的钻石的 1 个角。旋转后，您可以轻松定义从 0,0 指向的 daimond 数量

# c# - 接口可以是后代吗？

> ID：10716381
> 
> 赞同：1
> 
> 时间：2012-05-23T08:39:53.690
> 
> 标签：c#

我想知道：可以`interface`从另一个类继承吗？

我试图让接口继承自`MarshalByRefObject`.

我的意图是所有实现接口的类也继承自该类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:41:21.450

不，它不能。
一个接口只能指定其他必须实现的接口。这是通过使用与继承相同的语法来完成的，但它有所不同。

您可以使用抽象类来代替继承`MarshalByRefObject`并要求实现您的接口。

根据您需要如何强制执行您的要求，通用约束也可能会有所帮助。对于泛型类型参数，您可以设置类约束，例如`class Argh<T> where T : MarshalByRefObject, ISomeInterface`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:42:15.697

接口不能从类继承。为了做到这一点，C# 需要支持当前不支持的实现的多重继承。

想象一下，如果你可以`IMyInterface`从一个类中派生一个接口 ，`MyClass`。然后，当您声明另一个实现该接口的类时，您必须编写如下内容：

```
public class MyImplementingClass: MyBaseClass, IMyInterface 
```

但这意味着实现的多重继承，因为您同时继承自`MyBaseClass`和`MyClass`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:41:26.150

不可以，但是一个接口可以从另一个接口继承。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T08:42:46.483

不，接口不能有任何实现，因此它不能从类继承。但是，您可以创建一个**继承**自`MarshalByRefObject`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T08:49:57.207

不，类可以实现接口。它不是反过来。

1.  类可以继承类并实现接口。
2.  接口只能实现接口，不能继承也不能实现类。

# drupal - 在drupal 7中，drupal如何链接到另一个远程服务，使用nodejs等Web服务中的数据？

> ID：10716383
> 
> 赞同：0
> 
> 时间：2012-05-23T08:40:03.670
> 
> 标签：drupal, node.js, remote-server

我正在为我的 CMS 服务器使用 drupal 7，同时，我有一个基于 nodejs 的服务器，我需要到我的 nodejs 服务器的 drupal 链接，以使 drupal 使用基于 nodejs 的服务器中的数据，这将暴露宁静的服务接口

是否有这样的模块可以链接到像 nodejs rest 这样的远程 Web 服务，使用 Web 服务中的数据并将远程数据公开为视图？以及如何在drupal和nodejs之间建立身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:28:36.063

[Node.js 集成](http://drupal.org/project/nodejs)- 该模块将 Node.js 与 Drupal 集成。

[AMQP](http://drupal.org/project/amqp) - AMQP NodeJS - 与 NodeJS 服务器集成，允许您使用 JavaScript 在浏览器中消费消息。这对于通知类型的消息非常有用。

# python - Python Scapy 并以反向模式读取 pcap

> ID：10716390
> 
> 赞同：0
> 
> 时间：2012-05-23T08:40:23.987
> 
> 标签：python, networking, pcap, packet-capture, scapy

我正在使用以下函数读取*pcap*文件：`rdpcap`

```
s = rdpcap(pcap) 
```

我想知道如何反转`s`：它应该是一个列表，但我尝试过：

```
rev_s = s.reverse() 
```

它不起作用：它给了我`SyntaxError: invalid syntax`错误。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:01:10.830

对我来说，这有效：

```
>>> a = rdpcap("test.pcap")
>>> b = a.reverse()
>>> c = a[::-1] 
```

（您也可以使用切片表示法创建列表的反向副本）

# ios - 当应用程序从后台变为活动状态并重新加载 UItableView 时程序崩溃

> ID：10716392
> 
> 赞同：1
> 
> 时间：2012-05-23T08:40:37.717
> 
> 标签：ios

大家好，我正在创建一个 iOS（通用）应用程序。我的问题是，在我的应用程序中，如果应用程序没有进入后台（通过按主页按钮或单击 URL 链接），则 UITableView 可以正常工作。

如果应用程序进入后台，当它被激活时，重新加载一个单元格或整个表格视图会使整个应用程序崩溃。

任何解决方案？？？

删除 dequeueReusableCellWithIdentifier: 会有所不同吗？

代码是：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *identifier = @"Cell";

    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:identifier];

    if(cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
    }
    Animation *animation = [animationArray objectAtIndex:indexPath.row];

    cell.textLabel.text = animation.title;

    if(animation.isAnimationEnabled){
        cell.imageView.image = OnImage;
    }else {
        cell.imageView.image = OffImage;
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:48:26.323

您必须确保应用程序中的所有视图控制器都可以承受任意数量的视图加载/视图卸载周期。检查是否删除了在 viewDidLoad 中使用的 viewDidUnload 中的某些内容。

# jquery - 向 jQuery 日期选择器添加 +1 天

> ID：10716393
> 
> 赞同：0
> 
> 时间：2012-05-23T08:40:41.283
> 
> 标签：jquery, datepicker

我有一个 jQuery datepicker 工作，以 TIMESTAMP 格式输出到 altField。我想将 +1 天添加到 altField 以包含所选日期（但不在 UI 中显示 +1）。我不知道如何实现这一点。我的代码如下所示：

```
$('#end_date').datepicker({
    inline: true,
    altField: 'input[name="event_start_date_max"]',
    altFormat: '@',
    onSelect : function(dateText, inst) {
        var epoch = $.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000;
        $('input[name="event_start_date_max"]').val(epoch);
    }
}); 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:56:42.320

**[我在这里](http://jsfiddle.net/3jpUE/)**为你摆弄了一个解决方案。基本上你可以添加 86400 或 (60*60*24)，如下所示：

```
$('#end_date').datepicker({
    inline: true,
    altField: 'input[name="event_start_date_max"]',
    altFormat: '@',
    onSelect: function(dateText, inst) {
        var epoch = ($.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000) + (60 * 60 * 24);
        $('input[name="event_start_date_max"]').val(epoch);
    }
});​ 
```

# php - Safari 不允许我输入 Flash 格式

> ID：10716394
> 
> 赞同：1
> 
> 时间：2012-05-23T08:40:42.190
> 
> 标签：php, actionscript-3, flash, safari

我制作了一个带有联系表格的 Flash 网站，它可以在我的电脑上的 FireFox、IE 和 Chrome 中完美运行。但是，在 Safari 中，我似乎无法输入任何文本字段；在Android上，我只能输入大写字母（基本上大写锁定已打开，它不会让我更改为小写）。

我怀疑问题完全出在 Flash 中，因为发送电子邮件确实可以正常工作。在此处或在 Google 上搜索并没有让我找到任何相关内容。

有小费吗？

**这是我的代码：**

*FormScript.as（这是从我的主 .as 文件调用的外部 .as 文件）*

```
//***All imports, vars, etc***

function submit(e:MouseEvent):void {

    //Check to see if any of the fields are empty       
        if(yourName.text == "" || fromEmail.text == "" ||
            yourSubject.text == "" ||yourMsg.text == "" ) {
            valid.text = "All fields must be filled";
        }

    //Check if you're using a valid email address       
        else if(!checkEmail(fromEmail.text)) {
            valid.text = "Please fill in an existing email";
        } 

        else { 
            valid.text = "Verzenden.."; 
            var emailData:String = 
            "name=" + yourName.text +
            "&from=" + fromEmail.text +
            "&subject=" + yourSubject.text +
            "&msg=" + yourMsg.text;

            var urlVars:URLVariables = new URLVariables(emailData);
            urlVars.dataFormat = URLLoaderDataFormat.TEXT;
            urlRequest.data = urlVars; varLoad.load( urlRequest );
            varLoad.addEventListener(Event.COMPLETE, thankYou );
        }
    }
    function reset(e:MouseEvent):void {
        init(); //call the initial clear function
    }
    function checkEmail(s:String):Boolean {
        //This tests for correct email address
        var p:RegExp = /(\w|[_.\-])+@((\w|-)+\.)+\w{2,4}+/;
        var r:Object = p.exec(s);
        if( r == null ) {
            return false;
        }
        return true;
    }   
    function thankYou(e:Event):void { 
        var loader:URLLoader = URLLoader(e.target); 
        var sent = new URLVariables(loader.data).sentStatus;
        if( sent == "yes" ) {
            valid.text = "Thanks for your email!"; timer = new Timer(500);
            timer.addEventListener(TimerEvent.TIMER, msgSent);
            timer.start();
        }
        else {
            valid.text = "Something went wrong, please try again";
        }
    }

    function msgSent(te:TimerEvent):void {
        if(timer.currentCount >= 10) {
        init();
        timer.removeEventListener(TimerEvent.TIMER, msgSent);
    } 
```

*用于邮件处理的 PHP 文件：*

```
<?php
    $yourName = $_POST['name'];
    $fromEmail = $_POST['from'];
    $yourSubject = $_POST['subject'];
    $yourMsg = $_POST['msg'];

    if( $yourName == true ) {
        $sender = $fromEmail;
        $yourEmail ="myemailaddress@example.com"; // Naturally I put in my own email address here :)
        $ipAddress = $_SERVER['REMOTE_ADDR']; // This gets the user's ip Address

        $emailMsg = "Van: $sender\r\n" .
                    "Naam: $yourName\r" .
                    "Subject: my site - $yourSubject\n\n" .
                    "$yourMsg\n\n\n\n" .
                    "------------------------------\r" .
                    "Verstuurd vanaf IP-adres $ipAddress\r" .
                    "X-Mailer: PHP/" . phpversion();
        $return = "From: $sender\r\n";

        if( mail( $yourEmail, "$yourSubject", $emailMsg, $return)) { 
            echo "sentStatus=yes";
        }
        else {
            echo "sentStatus=no";
        }
    }
?> 
```

## 编辑：

我已经设法解决了这个问题。Safari 仍然不让我输入。

我更改了标题 -***原始问题：*** *“Android 上的 Flash 表单让我只能输入大写字母/CAPS，Safari 根本不允许我输入”*

可能对 Android 起到作用的部分是将文本字段设置为 for`.htmlText`而不是`.text`在 AS3 代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:13:30.287

我唯一建议的是，看看您是否需要更新您的 Flash 版本。在我无法输入 Firefox 并更新 Flash 解决它之前，我已经看到了一个问题。

# c# - Allocated Bytes 和 Final Heap Bytes 的比例合适吗？或任何逻辑来衡量或比较分配内存和堆最终大小？

> ID：10716397
> 
> 赞同：1
> 
> 时间：2012-05-23T08:40:49.143
> 
> 标签：c#, .net, clr, profiler, clrprofiler

在我提出任何问题/解释之前，如果我在问题标题中不清楚，请原谅我。

我刚开始使用可以从 Microsoft 网站下载的 CLRProfiler 64 位，我试图调查我的应用程序分配了多少字节，GC 在每一代中收集了多少字节，最终结果是什么在堆上结束。

我已经使用该应用程序几分钟，然后从 CLRProfiler 生成报告。

我已经得到了我在这里要求的所有信息[Clrprofile 摘要](https://i.stack.imgur.com/Z9y5F.png)

然而，问题是我想知道或者更确切地说，如果我在整个应用程序中的对象分配逻辑导致如此巨大的最终堆结果必然是一件坏事，或者......或者它是否取决于诸如保持循环引用之类的因素（a 和 b 有一个 c 的引用，一个释放的 c 引用，但是 GC 无法收集 b，因为它仍然被引用）或者我如何分配等于 X 字节的对象数量并且最终堆大小要大得多比 X 还是我没有正确理解堆分配？

关于如何评估我是否正在处理分配以及我的堆大小是否正确的任何指导？

我知道我缺乏提出具体问题的指示，但如果您需要更多详细信息，请务必询问。

**编辑：**

我做了一些非常愚蠢的事情，我在应用程序终止之前生成了报告，反过来可能没有计算分配的字节数，我在终止应用程序后重新生成了，结果现在似乎更有意义了。

[![最新的 CLRProfiler 摘要](../Images/eba8e8491df9d80f685640b938260984.png)](https://i.stack.imgur.com/GB0ju.jpg)

但是我的问题仍然有效，我想，任何有助于更好地理解分配与最终堆大小的帮助将不胜感激。

# javascript - 使用日期函数 javascript

> ID：10716398
> 
> 赞同：0
> 
> 时间：2012-05-23T08:40:56.063
> 
> 标签：javascript

我正在尝试将日期格式从一个更改为另一个，例如 10/05/2012 14:30:56 到 10th May 2012 12:30:56

我使用的javascript函数是

```
var monthNames = new Array("January", "February", "March","April", "May", "June", "July", "August", "September", "October", "November", "December");

var today = new Date("10/05/2012 14:30:56");
var cDate = today.getDate();
var cMonth = today.getMonth();
var cYear = today.getFullYear();
var cHour = today.getHours();
var cMin = today.getMinutes();
var cSec = today.getSeconds();
alert( monthNames[cMonth] + " " +cDate  + "," +cYear + " " +cHour+ ":" + cMin+ ":" +cSec ); 
```

我得到的输出是 10 月 5 日，这是不正确的。那么如何互换日期和月份呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:44:50.857

构造`Date`函数采用美国日期格式 - 表示 MM/DD/YYYY。如果要使用英国日期格式 (DD/MM/YYYY)，则必须手动交换日期和月份，如下所示：

```
var date = "10/05/2012 14:30:56";
if (/^(\d+)\/(\d+)(.*)/.test(date))
  date = RegExp.$2 + "/" + RegExp.$1 + RegExp.$3;

var today = new Date(date); 
```

然后您可以执行通常的日期转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:07:49.157

知道用户的 Dates 的默认字符串、格式化和设置输入会很方便。您只需在每个会话中检查一次：

```
Date.ddmm: (function(){
    return Date.parse('2/6/2009')==1243915200000;
})();

if(Date.ddmm)//format DD/MM/YYYY;
else ////format MM/DD/YYYY; 
```

# internet-explorer - 如何在 IE9 中切换到 IE8 兼容模式？

> ID：10716402
> 
> 赞同：0
> 
> 时间：2012-05-23T08:41:05.510
> 
> 标签：internet-explorer, internet-explorer-9, ie8-compatibility-mode

正如标题所说 - 我需要一种在 IE8 兼容模式下查看页面的方法。在开发人员工具中找不到执行此操作的选项，而且我似乎在浏览器的工具菜单中找不到任何兼容性设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T13:29:17.073

在 'head' 元素之后添加以下文本行作为第一个 dom 元素。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"> 
```

也可以切换到“IE=EmulateIE7”来模拟IE7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:55:09.767

您应该会在 url 栏 -> 旁边看到一个小的碎纸图标![在此处输入图像描述](../Images/33d4bc1513815d6c405f2250ab6654c8.png)，单击它。

[http://windows.microsoft.com/is-IS/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9](http://windows.microsoft.com/is-IS/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)

# jquery - jQuery Accordion UI 空项目问题。

> ID：10716407
> 
> 赞同：0
> 
> 时间：2012-05-23T08:41:25.093
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我对手风琴 UI 中的空项目有疑问。

我有 3 个部分。

```
+ Section 1
+ Section 2 (empty) 
+ Section 3 
```

html

```
<div id="accordion">
  <h3>Section 1</h3>
  <div>content 1</div>
  <h3>Section 2 (empty)</h3>
  <div></div>
  <h3>Section 3</h3>
  <div>content 3</div>
</div> 
```

jQuery

```
$(function() {
    $("#accordion").accordion({
        autoHeight: false,
        active: false,
        collapsible: true,       
    });
});​ 
```

示例：http: [//jsfiddle.net/ty5ZH/](http://jsfiddle.net/ty5ZH/)

当我单击而`Section 2`不是单击其他部分时，**手风琴不起作用**。

如果我单击`Section 2`比`Section 2`再次单击比单击其他部分一切正常。

是 jQuery UI 手风琴错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:49:50.967

这是一个主题问题。您忘记引用导致问题的 jQuery UI CSS 主题文件之一。

[你会在这里](http://jsfiddle.net/ty5ZH/1/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:58:49.260

如果您想阻止该部分甚至打开，这个答案可能是您需要的修复：[https ://stackoverflow.com/a/4672074/750593](https://stackoverflow.com/a/4672074/750593)

我创建了一个 JS fiddle [http://jsfiddle.net/cchana/ty5ZH/2/](http://jsfiddle.net/cchana/ty5ZH/2/)它工作。您需要添加一个类或 ID 来识别您不想打开的部分，然后在声明您的手风琴后立即运行以下命令。

```
$('.disable').addClass("ui-state-disabled");
var accordion = $( "#accordion" ).data("accordion");
    accordion._std_clickHandler = accordion._clickHandler;
    accordion._clickHandler = function( event, target ) {
    var clicked = $( event.currentTarget || target );
    if (! clicked.hasClass("ui-state-disabled"))
        this._std_clickHandler(event, target);
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T10:33:47.150

这是另一种解决方案。您只需要使用 beforeActivate 方法来防止它在为空时扩展。

```
$('#accordion').accordion({
    autoHeight: false,                                               
    collapsible: true,
    active: false,
    beforeActivate: function( event, ui ) {
        if (ui.newPanel.length>0 && ui.newPanel.text()==""){
            event.preventDefault();
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-23T09:43:57.950

使用这个组合，它会工作得很好。

```
$( ".selector" ).accordion({
  heightStyle: "content"
}); 
```

# c# - 通过 PropertyInfo 变量按 lambda 选择属性

> ID：10716410
> 
> 赞同：0
> 
> 时间：2012-05-23T08:41:35.100
> 
> 标签：c#

这是我的 POCO 对象：

```
public class ExampleTestOfDataTypes
{
    public float FloatProp { get; set; }
    public BoolWrapper BoolProp2 { get; set; }
} 
```

这是 POCO 的配置文件

```
public class ExampleTestOfDataTypesConfig : EntityTypeConfiguration<ExampleTestOfDataTypes>
{
    public ExampleTestOfDataTypesConfig()
    {    
         this.Property(x=>x.FloatProp).HasColumnName("CustomColumnName");
    }
} 
```

这是 EntityTypeConfiguration 的定义（属性配置只是示例）

```
ExampleTestOfDataTypesConfig config = new ExampleTestOfDataTypesConfig(); 
```

我需要遍历类 ExampleTestOfDataTypes 的所有属性，找到 dataTypes 派生自 Wrapper（BoolWrapper 是）的所有属性，然后使用 lambda 表达式获取这些属性。或者无论如何通过 config.Property(...) 选择它们

```
Type configPocoType = config.GetType().BaseType.GetGenericArguments()[0];
var poco = Activator.CreateInstance(configPocoType);

foreach (System.Reflection.PropertyInfo property in poco.GetType().GetProperties())
{
    if (property.PropertyType.BaseType!=null&&
        property.PropertyType.BaseType == typeof(Wrapper)
        )
    {
        //TODO: Set property
        //config.Property(x=>x.[What here]); //?
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:47:26.973

## 更新

我没有注意到该`Property`方法不是您自己的实现，对不起。看起来您必须手动创建表达式。这应该有效，或者至少足够接近：

```
var parameter = Expression.Parameter(configPocoType);
var lambda = Expression.Lambda(
    Expression.MakeMemberAccess(parameter, property),
    parameter);

config.Property(lambda); 
```

## 原始答案

看起来您现有的`Property`方法很可能只是使用 an`Expression`来读取属性的名称，同时保持编译时安全。大多数情况下，此类方法使用反射将属性名称提取到字符串中，然后继续使用字符串名称进行反射（可能通过调用另一个`Property`接受字符串的重载）。

因此，一种合理的方法是自己调用这个其他重载，因为您的代码已经有了一个`PropertyInfo`可以立即从中获取属性名称的方法。

如果您只有一种`Property`方法，请将其拆分为两部分进行重构：一部分将名称从其中提取出来，`Expression`另一部分与名称一起使用；然后，您可以直接从您的代码中调用第二个。

# matlab - 如何在 MuPad 中为变量数组分配值数组

> ID：10716411
> 
> 赞同：1
> 
> 时间：2012-05-23T08:41:37.310
> 
> 标签：matlab

我想分配一个矩阵，符号元素的向量，一个矩阵，值的向量......如何？

就像是：

```
matrix([a,b,c,d]) = matrix([1,2,3,4]) 
```

MuPad 中哪个是不正确的……那怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T11:33:00.050

使用列表而不是矩阵：

```
[a,b,c,d] := [1,2,3,4]; 
```

您还可以分配不同的类型，例如矩阵：

```
[A,b,c,d] := [matrix([[1,2],[3,4]]),2,3,4]; 
```

# asp.net - 在 ASP .NET 应用程序中管理页面路径

> ID：10716414
> 
> 赞同：2
> 
> 时间：2012-05-23T08:41:49.867
> 
> 标签：asp.net

目前在我的网络应用程序中，我有很多这样的行：

```
 Response.Redirect("~/Default.aspx"); 
```

等等。现在，我正在重新组织 aspx 页面结构，因为它非常扁平 - 一切都在一个文件夹中。所以我必须彻底搜索所有代码才能修复 aspx 路径。所以我的问题是：有没有办法在 ASP .NET 中管理/组织网站页面结构 - 某种 SiteMap，所以我的代码类似于：

```
 Response.Redirect(Pages.Default); 
```

这样我的代码将被关闭以进行一些 aspx 页面在文件夹之间移动的修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:10:31.693

我认为没有任何自动解决方案，您最终可能会自己构建一些东西。你可能想看看 Asp.Net Sitemap 的东西，虽然它主要集中在导航控件上。

[http://msdn.microsoft.com/en-us/library/yy2ykkab.aspx](http://msdn.microsoft.com/en-us/library/yy2ykkab.aspx)

我在几个项目中遇到了同样的问题。一种简单的解决方案是创建常量/静态/枚举来表示页面名称/url：

```
public static class SiteMap {
    public static readonly string Default = "/default.aspx";
} 
```

这当然可以让你做

```
Response.Redirect(SiteMap.Default); 
```

但这很快就过时了，因为页面需要传入参数，并且迟早您会遇到与参数名称完全相同的问题。所以我们通过添加一个 Url 工厂类来扩展这个想法

```
public static class SiteMap {
    public static readonly string Article = "/blog/article.aspx";
}

public static class PageParams {
    public static readonly string ArticleId = "aid";
}

public static class UrlFactory {
    public static string GetUrlBlogArticle(int articleId){
        return string.Format("/{0}?{1}={2}",SiteMap.Article, PageParams.ArticleId, articleId.ToString());
    }
} 
```

该方法可确保所有链接以相同的方式工作并包含相同的参数。通过设置 PageParams 常量类，登录页面/控件代码也更简洁一些，因为您可以这样做

```
public void method(){
    var articleId = Request[PageParams.ArticleId];
} 
```

而不是到处都有随机的请求参数名称。

希望能给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:29:57.347

我编写了一个可以帮助您的开源项目，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)。

您在配置文件中列出您的页面和转换。这是一个例子：

```
<state key="Page1" page="~/Page1.aspx">
    <transition key="Next" to="Page2"/>
</state>
<state key="Page2" page="~/Page2.aspx"/> 
```

然后在您的代码中，您可以像这样从 Page1.aspx 移动到 Page2.aspx：

```
StateController.Navigate("Next"); 
```

如果您有兴趣或需要任何帮助，请告诉我。

# mysql - 使用表 B 中的内容更新表 A

> ID：10716416
> 
> 赞同：1
> 
> 时间：2012-05-23T08:41:59.290
> 
> 标签：mysql, triggers, sql-update

我试图在 mySQL 中创建一个触发器，当我进行插入时，它将使用另一个表中的数据更新一个列。

我有表：rtsEP_groups 有：id，name

和表：rtsEP_users 具有：id、组（以及许多其他人）

当 rtsEP_users 中有新插入时，我想使用 rtsEP_groups 中的“id”更新 rtsEP_users 中的“组”，其中“name”是“Student”。

我正在研究这个触发器，但不确定它是否正确，以及如何完成它。如何更新正确的列。

```
CREATE TRIGGER defaultGroup
AFTER INSERT ON rtsEP_users
BEGIN
DECLARE _group_id INTEGER;
SELECT id INTO _group_id FROM rtsEP_groups WHERE name = "Student"
UPDATE rtsEP_users SET groups = _group_id WHERE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:50:43.623

使用`BEFORE INSERT`代替`AFTER`，因此`New`代表可以更新的插入行。试试这个

```
CREATE TRIGGER defaultGroup BEFORE INSERT ON rtsEP_users
FOR EACH ROW
SET New.groups = (SELECT id FROM rtsEP_groups WHERE name = "Student"); 
```

# asp.net - 将文件从一个文件夹复制到另一个文件夹

> ID：10716422
> 
> 赞同：4
> 
> 时间：2012-05-23T08:42:04.033
> 
> 标签：asp.net, asp.net-3.5

我正在网站上工作，我想将文件从我的应用程序文件夹复制到同一服务器上的其他文件夹（但这个文件夹不在我的应用程序文件夹中，即我在 C 驱动程序上的应用程序和目标文件夹在 D 驱动器上）。是这可能使用 Asp.Net 的任何功能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T08:49:16.100

是的，有可能，您需要注意的唯一问题是 CopyTo 路径应该是完整路径，而不是相对路径（例如：**c:\websites\myOtherFolder**）。

这样，您可以成功地从 ASP.NET 代码中复制/移动文件。

下面是一个伪代码，向您展示如何完成它（假设该文件已放置在您的 ASP.NET 应用程序的根文件夹中）。

```
 using System.IO;
    ..
    ..
    ..

// Get the current app path:
var currentApplicationPath =  HttpContext.Current.Request.PhysicalApplicationPath;

//Get the full path of the file    
var fullFilePath = currentApplicationPath + fileNameWithExtension;

// Get the destination path
var copyToPath = "This has to be the full path to your destination directory. 
                  Example d:\myfolder";

// Copy the file
File.Copy(fullFilePath , copyToPath ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:46:43.573

使用这个功能：

```
System.IO.File.Copy(FileToCopy, NewCopy) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T07:32:47.970

将文件从一个文件夹移动到另一个文件夹非常容易。您可以在移动时更改文件名...

```
 string Tranfiles, ProcessedFiles;

           //Tranfiles = Server.MapPath(@"~\godurian\sth100\transfiles\" + Filename);

           Tranfiles = Server.MapPath(@"~\transfiles\" + Filename);
           if (File.Exists(Server.MapPath(@"~\transfiles\" + Filename)))
           {
               File.Delete(Server.MapPath(@"~\transfiles\" + Filename));
           }

           //ProcessedFiles = Server.MapPath(@"~\godurian\sth100\ProcessedFiles");
           ProcessedFiles = Server.MapPath(@"~\ProcessedFiles");

           File.Move(Tranfiles, ProcessedFiles); 
```

就是这样，您现在可以检查您的应用程序文件夹以确认移动过程状态

# .net - WCF 服务器处理缺少的 Content-Type

> ID：10716423
> 
> 赞同：0
> 
> 时间：2012-05-23T08:42:04.213
> 
> 标签：.net, wcf, http

我有一个处理 POST 命令的 WCF 服务器。我使用 WebHttpBinding 创建了端点。我的问题是我无法控制发送 POST 的客户端。事实证明，客户端没有发送 Content-Type。我有办法处理这个吗？我知道内容类型应该是什么。是否可以拦截请求并添加内容类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:42:46.687

您可以使用 IDisptachMessageInspector 接口 AfterRecieveRequest 方法来处理请求并执行必要的操作

[IDispatchMessageInspector.AfterReceiveRequest 方法](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.afterreceiverequest.aspx)

# regex - Emacs：用每个匹配提示替换正则表达式

> ID：10716428
> 
> 赞同：6
> 
> 时间：2012-05-23T08:42:41.733
> 
> 标签：regex, emacs

据说 Emacs 23.3 允许通过`\?`语法在每次匹配时提示部分替换字符串。

应在迷你缓冲区中提示该字符串。

此处描述了此功能： [http ://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Replace.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Replace.html)

我尝试`(query-replace-regexp "^" "\\?")`在 Windows 上使用 Emacs 23.3 进行简单替换，但出现“在替换文本中无效使用 `\'”错误。

关于我应该如何使用此功能的任何想法？

注意：我可以`\,(read-from-minibuffer "? ")`改用，但这样做会在突出显示匹配之前提示输入字符串。

我认为这并不重要，但我的 Emacs 版本如下：GNU Emacs 23.3.1 (i386-mingw-nt6.1.7601)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T08:52:54.537

这是 的一个特点`replace-regexp`，不是`query-replace-regexp`。（不知道这个功能；感谢您强调它！）

# sql-server-2008 - 无法创建 SQL Server 2008 数据库

> ID：10716431
> 
> 赞同：0
> 
> 时间：2012-05-23T08:42:50.267
> 
> 标签：sql-server-2008

我正在尝试创建一个数据库，但出现以下错误![在此处输入图像描述](../Images/9f3b054c44b1238651f77703306f7deb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:14:51.983

您需要创建数据库的权限。最简单的解决方案是与继承了有权创建数据库的登录名的用户连接

您使用哪个用户连接到数据库？

右键单击您的登录并检查您是否有权使自己成为 dbcreator：

![在此处输入图像描述](../Images/aaacefcf925ebef72ee55c4cf875653b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:01:23.363

Microsoft SQL Server 的解决方案，错误：262

单击开始 -> 单击 Microsoft SQL Server 2005 现在右键单击 SQL Server Management Studio 单击以管理员身份运行 现在问题解决了。这是以具有所有管理权限的管理员身份登录我们的 SQL Server 2005 的实际过程。但我认为在 Microsoft SQL Server 2005 速成版中我们不需要经过上述过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:18:37.150

转到 SQL Server -> 安全性 -> 登录名并创建一个具有所有权限和角色的新登录名。

# go - Go HTTP 处理程序 - 处理两个以上的表单操作

> ID：10716433
> 
> 赞同：0
> 
> 时间：2012-05-23T08:42:55.447
> 
> 标签：go

我有一个 web 应用程序，其中有如下代码：

```
func handler (w res, r req) {
  if req.Method == POST {
    // create html form 2 with a submit button2
    return ;
  }
  // create html form 1 with a submit button1
  return
} 

func main() {
  handle("/", handler)
} 
```

现在，根 / 已注册到处理程序 func。在第一个请求 (GET) 中，我创建了一个表单并将其发送给用户。如果用户提交了这个表单，我会在“POST”方法下处理它。现在，我在 post 方法处理程序中创建了一个不同的表单，现在我想要一种方法来根据用户在此 form2 中键入的内容执行一些操作，当他提交 form2 时。

go 处理 form2 表单提交的标准方法是什么？我之前做过一些 asp 编程，我们使用表单操作提交到不同的 asp 文件。如何根据解析 form2 提交请求来执行一些操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:15:09.230

如果我对您的理解正确，您想要一种基于请求*方法*而不仅仅是路径将相同 URL 路由到不同处理程序的方法吗？如果是这样的话...

相比之下，使用 Python + Django，你这样做的方式是非常标准的：

```
def my_django_view(request):
    if request.method == "POST":
        try_to_process_posted_data()
    elif request.method == "GET":
        show_a_form_to_user() 
```

如果您正在尝试基于路径**和**请求方法（GET、POST、DELETE，...）进行 URL 路由等更高级的事情，那么您可能会对[Gorilla.mux 之类的东西感兴趣](http://gorilla-web.appspot.com/pkg/gorilla/mux/)

它提供了一些友好的 URL 路由方法：

```
func main() {
    router := mux.NewRouter()
    router.HandleFunc("/", YourGETHandlerFunc).Methods("GET")
    router.HandleFunc("/", YourPOSTHandlerFunc).Methods("POST")
    http.Handle("/", router)
} 
```

如果您正在寻找更多用于 Web 开发的资源...

*   芒果： http: [//paulbellamy.com/2011/05/introducing-mango/](http://paulbellamy.com/2011/05/introducing-mango/)
*   Web.go：[http ://www.getwebgo.com/tutorial](http://www.getwebgo.com/tutorial)
*   Twister: [https://github.com/garyburd/twister/blob/master/examples/hello/main.go](https://github.com/garyburd/twister/blob/master/examples/hello/main.go)

# elasticsearch - ElasticSearch 索引 unix 时间戳

> ID：10716435
> 
> 赞同：15
> 
> 时间：2012-05-23T08:43:01.963
> 
> 标签：elasticsearch

我必须索引包含“时间”字段的文档，该字段的值是一个整数，表示自纪元以来的秒数（又名 unix 时间戳）。

我一直在阅读 ES 文档并发现了这一点：

[http://www.elasticsearch.org/guide/reference/mapping/date-format.html](http://www.elasticsearch.org/guide/reference/mapping/date-format.html)

但似乎如果我想提交 unix 时间戳并将它们存储在“日期”字段中（整数字段对我没有用），我只有两个选择：

*   实现我自己的日期格式
*   在发件人处转换为支持的格式

我还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T16:54:28.677

如果你提供一个映射告诉 ES 该字段是一个日期，它可以使用 epoch millis 作为输入。如果您希望 ES 自动检测，则必须提供 ISO8601 或其他可发现的格式。

更新：我还应该注意，您可以影响 ES 将哪些字符串识别为映射中的日期。[http://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html](http://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-16T08:05:53.620

如果您想使用我期望的 Kibana，并根据日志/条目的时间进行可视化，您将需要至少一个字段作为日期字段。

*请注意，在将任何数据输入 /index/type 之前，您必须将该字段设置为日期类型。否则它将被存储为长期且不可更改的。*

可以粘贴到[marvel/sense](https://www.elastic.co/guide/en/marvel/current/index.html "奇迹/感觉")插件中的简单示例：

```
# Make sure the index isn't there
DELETE /logger

# Create the index
PUT /logger

# Add the mapping of properties to the document type `mem`
PUT /logger/_mapping/mem
{
  "mem": {
    "properties": {
      "timestamp": {
        "type": "date"
      },
      "free": {
         "type": "long"
      }
    }
  }
}

# Inspect the newly created mapping
GET /logger/_mapping/mem 
```

*依次运行这些命令中的每一个。*

## 生成免费的内存日志

这是一个简单的脚本，它回显到您的终端并记录到您的本地弹性搜索：

```
while (( 1==1 )); do memfree=`free -b|tail -n 1|tr -s ' ' ' '|cut -d ' ' -f4`; echo $load; curl -XPOST "localhost:9200/logger/mem" -d "{ \"timestamp\": `date +%s%3N`, \"free\": $memfree }"; sleep 1; done 
```

### 在弹性搜索中检查数据

将此粘贴到您的奇迹/感觉中

```
GET /logger/mem/_search 
```

现在您可以转移到 Kibana 并制作一些图表。Kibana 将自动检测您的日期字段。

# php - PHP 使用客户端和服务器端验证而不使用 3rd 方代码

> ID：10716436
> 
> 赞同：3
> 
> 时间：2012-05-23T08:43:06.293
> 
> 标签：php, javascript, validation

编辑：感谢所有帮助。收到一封电子邮件，说我们不需要客户端，所以我放弃了这个想法，转而按时完成任务。

在你问之前，是的，这是分配工作。不，我不是在寻找某人的完整代码。我是初学者，几乎没有 HTML/PHP/javascript 方面的经验，但这是作业的第二部分，所以我已经从第一部分中获得了一些我自己的代码，与这部分相比，这非常容易。该任务没有具体说明我们必须使用客户端验证，但我认为这将是一个很好的做法。

我需要有人清楚地向我展示如何使用客户端和服务器端验证。我已经有 javascript 验证，但我可以修改它，因为它会为每个错误显示一个警告框。我不能使用像 jQuery 这样的 3rd 方代码，显然互联网上的每个人都喜欢使用，而且我正在做的课程不喜欢真正教我们任何有用的内容，所以我们都是靠自己的。

然后表单中的数据将通过 MySQL（我不期待这样做）输入到数据库中，并且通过查看 w3schools 关于该主题的最少信息，我知道我必须将表单发布到自身。

表单本身非常简单：包含姓名、DoB、电子邮件、邮政编码等。我当前的 .js 仅使用 alpha、仅数字、日期格式、电子邮件格式、单选按钮和复选框检查，并且每个字段都经过测试以确保它是不是空的。

我想我所追求的是关于如何做到这一点的完整教程。我的互联网搜索没有结果，但至少我还有一周的时间。

任何帮助表示赞赏，但简单而明确的帮助将更是如此。在那之前，我将继续在互联网上寻找帮助，如果我找到对遇到同样问题的其他人有用的东西（我敢肯定这是我班上 90% 的人......）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:14:35.127

阅读下面的代码。希望内联评论回答您的问题。

**add_record.php**

```
<?php
if(isset($_POST['name'])) {

  //get post data
  $name = trim($_POST['person_name']);
  $email = trim($_POST['email']);
  $message = trim($_POST['message']);

  //This is server-side check!
  if (strlen($name) > 10){
    echo "FAILED! You tried to submit a name which is greater than 10 chars."
  }else{
    //insert to the database here..

    //and send out a "success message or render HTML
    echo "SUCCESS!";
  }
}else {
    echo "Error! Proper parameters were not provided!";
} 
```

**一个.html**

```
<html>
<head>
<script type="text/javascript">
function checkForm(){
    //client side (JS) validation. This happens before submitting.
    var name = document.forms[0].person_name.value;
    if (name.length > 10){
        alert("Name is too long");
        return false;
    }
    //do some more checks here..
    //return true if all checks have passed, false otherwise.

    //the return value of this function is checked before submit. The form is submitted only when this function returns a true.
    return true;
}
</script>
</head>
<body>
<form action="add_record.php" method="POST" onsubmit="return checkForm()">
Name: <input type="text" name="person_name"/>
Email: <input type="text" name="email"/>
Message: <input type="text" name="message"/>
<input type="submit"/>
</form>
</body>
</html> 
```

**编辑**：正如 mplungjan 指出的那样，在表单中有一个名为“name”的字段并不是一个好主意。表单对象本身可能有一个可能会发生冲突的“名称”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:57:06.640

既然是家庭作业，我至少应该为您指出一些资源：

**客户端**

对于验证：

*   [http://www.9lessons.info/2009/03/perfect-javascript-form-validation.html](http://www.9lessons.info/2009/03/perfect-javascript-form-validation.html)（表单验证器）
*   [http://www.javascriptkit.com/javatutors/re.shtml](http://www.javascriptkit.com/javatutors/re.shtml)（正则表达式指南）

不要马上跳到 AJAX，那是高级材料。首先完成基础，然后让表单提交给 PHP（即页面刷新，如果有任何验证问题，PHP 会重绘表单）。

**服务器端**

验证：[http](http://www.php.net/filter) ://www.php.net/filter -[示例](http://www.php.net/manual/en/filter.examples.validation.php)

对于数据库工作：[http](http://www.php.net/pdo) ://www.php.net/pdo -[教程](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:55:52.233

对于服务器端验证，您可以使用 method="post" 将表单数据发送到 php 页面，然后检查格式是否正确。就像是：

```
<form action="validate.php" method="post">
<!-- form fields -->
</form> 
```

在 validate.php 中，您使用 $_POST["var_name"]（其中 var_name 是输入字段的名称）来检查数据。因此，例如，类似：

```
$age = $_POST["age"];
if (ctype_digit($age) && $age > 0) {
    // correct format
} 
```

似乎您已经弄清楚了客户端验证。不过，我不太确定我是否正确理解了您的问题 - 让我知道您具体在哪里遇到问题，我会尽力提供帮助。

# c++ - C++ Visual Studio 2008，将项目从 64 位移动到 32 位

> ID：10716445
> 
> 赞同：0
> 
> 时间：2012-05-23T08:43:42.697
> 
> 标签：c++, visual-studio-2008, 32bit-64bit, 32-bit

我试图将我的 64 位 C++ 应用程序用于 32 位系统，但在使用 Visual Studio 2008 时遇到了一些问题。

我刚刚在我的 32 位电脑 (Microsoft Windows Xp) 上下载了解决方案，并将 Visual Studio 设置设置为：Debug|Win32

编译阶段没问题，但是如果我尝试运行程序，系统会说：

`Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: C:\wspace4\BioTesi\BioCpp.dll: %1 is not a valid Win32 application`

不知何故，系统不会将我的 dll 解释为 32 位。我想我错过了一些 Visual Studio 设置……但是哪个？

如何解决这个问题呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:15:07.240

您是否为 32 位和 64 位 dll 和 exe 设置了不同的构建路径？您很可能有一些 64 位输出覆盖了 32 位输出。一些事情要尝试：

*   从您的版本控制系统中检查一个干净的工作区，这样您就不会有任何意外的项目
*   打开配置管理器，查看解决方案的 32 位配置实际上是在构建每个项目的 32 位版本
*   使用 DependencyWalker，如果它们恰好是 64 位，它将显示带有“64”覆盖的 .exe 和 .dll 图标

# facebook - 通过 RSS 在 Facebook 上发布内容

> ID：10716451
> 
> 赞同：1
> 
> 时间：2012-05-23T08:44:02.097
> 
> 标签：facebook, rss, facebook-page

我想通过一些 API 添加新内容。我发现[这个站点](http://boomient.com/seo-blog/how-to-import-blog-to-facebook-rss)，他们说有一个*导入站点*功能，允许输入 RSS 提要，内容将自动发布。这是真的？或者今天也更好？

如果是，请指出我必须在哪里设置。Facebook 发生了如此大的变化，以至于[他们的方式](http://boomient.com/seo-blog/how-to-import-blog-to-facebook-rss)在今天已经行不通了。我循环浏览菜单大约一个小时后没有任何成功。

如果这不起作用，请告诉我另一种方式。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T23:08:22.237

自 9 月以来，此功能已被删除。

> 我们希望您以最有效的方式与您的粉丝建立联系。这就是为什么从 9 月 30 日起，您将无法再将帖子从您的网站自动导入主页备注。让人们与您的内容互动的最佳方式是通过添加个人评论和回复粉丝的反馈，让他们深入了解您在 Wall 上分享的链接。

[来源：为什么我不能再将博客文章从我的网站导入到我的主页的注释中？](https://www.facebook.com/help/?faq=277347965620183)

# php - fsockopen() 和 header(location:xxx) 在打开的脚本中？

> ID：10716456
> 
> 赞同：0
> 
> 时间：2012-05-23T08:44:09.850
> 
> 标签：php, header, fsockopen

奇怪的问题，我正在打开一个与`fsockopen()`页面的连接，该页面有一个`header(location:xx)`到同一页面（我只是刷新脚本），但似乎重定向不起作用......

如果我用浏览器复制它，显然一切正常......

一些代码：

连接页面：

```
$socketcon = fsockopen($_SERVER['HTTP_HOST'],80,$errorno,$errorstr,10);
if($socketcon) {
    $socketdata = "GET http://www.example.com/test2.php HTTP/1.0\r\nHost: ".$_SERVER['HTTP_HOST']."\r\nConnection: Close\r\n\r\n";
    fwrite($socketcon,$socketdata); 
    fclose($socketcon);
} 
```

连接页面（test2.php）：

```
<?
//other code (working fine)

if($_GET["AAA"]){

     //REDIRECT WORKED !

} else {
     header("location:test2.php?AAA=1");   //same page but with a get param
}
?> 
```

REDIRECT WORKED 部分永远不会被执行......

有什么建议么 ？

编辑：连接必须是异步的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:52:40.110

> 有什么建议么 ？

是的，停止使用套接字来做[cURL](http://nl.php.net/curl)可以做得更好的事情；) A`header('Location: X')`实际上会向您发送一个 301/303 HTTP 响应，您（或浏览器）应该通过发出新请求来处理它。但是，您似乎不处理重定向。另一方面，cURL 模仿类似浏览器的功能，它可以通过使用`curl_setopt( $curlResource, CURLOPT_FOLLOWLOCATION, true );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:45:56.330

考虑[使用 PHP 可以实现异步 HTTP 请求吗？](https://stackoverflow.com/questions/5453192/is-making-asynchronous-http-requests-possible-with-php)这是一个类似的问题。

[`exec()`](http://php.net/exec)如果您不需要返回值，使用-family 函数可能是一个不错的选择；你可以只调用 curl 附加的`&`，它会在后台运行。

如果您真的非常想在 PHP 中执行此操作，您可以：生成一个新进程（使用[`pcntl_fork()`](http://php.net/pcntl_fork)）或自己处理重定向。

要处理重定向，您需要：

1.  通过查看从流中读取的前三个字符来确定您的响应代码是什么。200 意味着成功，300 中的任何东西都意味着部分成功。
2.  在前三个字符中找到 302（或 307）后，搜索位置标题。我相信这将匹配 regex `/\s*location:\s*(.+)$/m`。
3.  验证您从位置字段获得的 URL 是否符合您的期望并且值得信赖。它应该是一个绝对 URL，但您需要检查它是否有安全服务器、安全端口、安全 URL 和安全参数。[`parse_url()`](http://php.net/parse_url)可能会派上用场，但**不会检查潜在的安全问题**。
4.  打开与上面匹配的新 URL 的新连接（或者，如果它是同一个主机并且您使用 HTTP 1.1 和 Keep-Alive，请重用您的连接）以发送适当的数据。
5.  根据需要处理任何结果/清理。

你可以看到这是非常复杂的。这也将是递归的。您真正谈论的是用 PHP 编写一个基本的 HTTP 解析器。这不是一个好主意 - 使用 cURL 并找到其他方法使其异步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:47:04.353

您的连接函数不处理重定向。

如果你想支持它，你必须自己编写代码，或者使用类似的库`curl`来建立连接。

# php - 如何将旧的 MS Word 文档转换为纯文本？

> ID：10716459
> 
> 赞同：1
> 
> 时间：2012-05-23T08:44:16.590
> 
> 标签：php, apache, text, ms-word

我想从 MSword 03 或更早版本中获取文本内容。有没有可以做到这一点的脚本或软件包？

我能够从 2007 年文档的 word 文件中获取文本。我无法从旧版本（.doc）中获得相同的结果。

我正在使用 apache2 和 php mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:47:59.783

Try `catdoc`，它将任何 .doc 文件转换为纯文本。请参阅[catdoc 主页](http://www.wagner.pp.ru/~vitus/software/catdoc/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:03:03.880

这是一个用于 ms word 文档的 PHP 类，位于[http://obninsk.name/obninsk_doc/](http://obninsk.name/obninsk_doc/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:55:44.820

您可以使用 LiveDocx 处理所有 MS Word 文件，包括 RTF [http://www.phplivedocx.org/2009/08/13/convert-docx-doc-rtf-to-html-in-php/](http://www.phplivedocx.org/2009/08/13/convert-docx-doc-rtf-to-html-in-php/)

# python - OpenCV 中用于虹膜检测的 HoughCircles 的正确用法/参数值是什么？

> ID：10716464
> 
> 赞同：14
> 
> 时间：2012-05-23T08:44:31.970
> 
> 标签：python, opencv, computer-vision, image-recognition, biometrics

我一直在阅读有关该主题的内容，但无法以“简单的英语”了解有关`HoughCircles`（特别是 之后的`CV_HOUGH_GRADIENT`）的用法和参数的想法。

什么是累加器阈值？100“票”是正确的价值吗？

我可以找到并“掩盖”学生，并通过该`Canny`功能工作，但我正在努力超越，我的问题是`HoughCircles`功能。似乎无法找到 Iris 的圈子，我不知道为什么。

![这就是我到目前为止所拥有的。 左：蒙面瞳孔 右：精明的结果](../Images/10a7499d508358937765753ae124fefd.png)

这是我正在处理的功能：

```
def getRadius(area):
    r = 1.0
    r = math.sqrt(area/3.14)
    return (r)

def getIris(frame):
    grayImg = cv.CreateImage(cv.GetSize(frame), 8, 1)
    cv.CvtColor(frame,grayImg,cv.CV_BGR2GRAY)
    cv.Smooth(grayImg,grayImg,cv.CV_GAUSSIAN,9,9)
    cv.Canny(grayImg, grayImg, 32, 2)
    storage = cv.CreateMat(grayImg.width, 1, cv.CV_32FC3)
    minRad = int(getRadius(pupilArea))
    circles = cv.HoughCircles(grayImg, storage, cv.CV_HOUGH_GRADIENT, 2, 10,32,200,minRad, minRad*2)
    cv.ShowImage("output", grayImg)
    while circles:
        cv.DrawContours(frame, circles, (0,0,0), (0,0,0), 2)
        # this message is never shown, therefore I'm not detecting circles
        print "circle!"
        circles = circles.h_next()
    return (frame) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-23T11:27:11.997

`HoughCircles`可能有点棘手，我建议查看[此线程](https://stackoverflow.com/questions/9860667/writing-robust-color-and-size-invariant-circle-detection-with-opencv-based-on)。包括我在内的一群人;)，讨论如何使用它。关键参数是`param2`，所谓的`accumulator threshold`。基本上，它越高，你得到的圈子就越少。而且这些圆圈有更高的正确概率。每个图像的最佳价值都不同。我认为最好的方法是在`param2`. IE。继续尝试值，直到满足您的条件（例如：有 2 个圆圈，或不重叠的最大圆圈数等）。我有一些对“param2”进行二进制搜索的代码，所以它很快就满足了条件。

另一个关键因素是预处理，尽量减少噪声并简化图像。模糊/阈值/canny的某种组合对此有好处。

无论如何，我明白了：

![在此处输入图像描述](../Images/39f4e97bc2a87a1e40c46f947595289c.png)

从您上传的图像中，使用以下代码：

```
import cv
import numpy as np

def draw_circles(storage, output):
    circles = np.asarray(storage)
    for circle in circles:
        Radius, x, y = int(circle[0][3]), int(circle[0][0]), int(circle[0][4])
        cv.Circle(output, (x, y), 1, cv.CV_RGB(0, 255, 0), -1, 8, 0)
        cv.Circle(output, (x, y), Radius, cv.CV_RGB(255, 0, 0), 3, 8, 0)    

orig = cv.LoadImage('eyez.png')
processed = cv.LoadImage('eyez.png',cv.CV_LOAD_IMAGE_GRAYSCALE)
storage = cv.CreateMat(orig.width, 1, cv.CV_32FC3)
#use canny, as HoughCircles seems to prefer ring like circles to filled ones.
cv.Canny(processed, processed, 5, 70, 3)
#smooth to reduce noise a bit more
cv.Smooth(processed, processed, cv.CV_GAUSSIAN, 7, 7)

cv.HoughCircles(processed, storage, cv.CV_HOUGH_GRADIENT, 2, 32.0, 30, 550)
draw_circles(storage, orig)

cv.ShowImage("original with circles", orig)
cv.WaitKey(0) 
```

**更新**

我意识到我有点错过阅读你的问题！您实际上想要找到**虹膜**边缘。他们没有像学生那样明确定义。所以我们需要`HoughCircles`尽可能地提供帮助。我们可以通过以下方式做到这一点：

1.  指定虹膜的大小范围（我们可以从瞳孔大小计算出一个合理的范围）。
2.  增加圆心之间的最小距离（我们知道两个虹膜永远不会重叠，因此我们可以安全地将其设置为我们的最小虹膜尺寸）

然后我们需要`param2`再次进行参数搜索。用以下代码替换上面代码中的“HoughCircles”行：

```
cv.HoughCircles(processed, storage, cv.CV_HOUGH_GRADIENT, 2, 100.0, 30, 150,100,140) 
```

得到我们这个：

![在此处输入图像描述](../Images/4868dbe1266359de6a3d763342b5312e.png)

这还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T07:20:10.237

我的替代建议是使用阈值和 Blob 分析。检测虹膜比使用精明边缘和霍夫变换更简单。

我的方法是...首先你设置阈值。选取任何阈值，直到黑白图像仅产生（黑色）虹膜和睫毛。

然后通过将斑点分析值输入 XX 的最小长度和 YY 的最小宽度来分离虹膜和睫毛。XX 和 YY 值是虹膜长度和宽度的值。

# android - Android - 在 ViewPager 中替换片段时返回堆栈

> ID：10716465
> 
> 赞同：6
> 
> 时间：2012-05-23T08:44:34.383
> 
> 标签：android, android-fragments, android-viewpager

我正在创建具有三个视图的 ViewPager。在第一个视图上是一个 ListView，其中 onItemClick 用其中的 WebView 替换了该片段新片段。我有两个问题：当添加“transaction.addToBackStack(null)”或“transaction.setCustomAnimations(...)”片段时，WebView 会停止显示。如果没有这些行，它会显示，但我不能按 BACK 按钮返回列表。

我正在根据[该教程](http://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html)和[这个 SO question](https://stackoverflow.com/questions/7723964/replace-fragment-inside-a-viewpager)创建代码。在那个问题中使用了 PagerAdapter，而我正在使用 FragmentPagerAdapter。我也不需要更换更多的碎片。它只能是一次（从列表到 webView 并返回）。

这是我的适配器的代码：

```
public Fragment getItem( int position )
{
    Fragment fragment = null;
    switch ( position )
    {
        case 0: // news
            if ( mFragmentAtPos0 == null )
            {
                mFragmentAtPos0 = new NewsListFragment( new FirstPageFragmentListener()
                {
                    @Override
                    public void onSwitchToNewsFragment( String url, ViewGroup container )
                    {
                        FragmentTransaction transaction = fm.beginTransaction();
                        transaction.setCustomAnimations( R.anim.rotate_in, R.anim.rotate_out, R.anim.rotate_in, R.anim.rotate_out );

                        WebViewFragment wv = new WebViewFragment( url, context );
                        transaction.replace( container.getId(), wv );
                        transaction.commit();

                        mFragmentAtPos0 = wv;
                        notifyDataSetChanged();
                    }
                } );
            }
            fragment = mFragmentAtPos0;
            break;
        case 1: 
            fragment = new NewsInfoFragment( context, true );
            break;
        case 2: 
            fragment = new NewsInfoFragment( context, false );
            break;
    }
    return fragment;
} 
```

以及来自该列表片段的 onCreateView() 的片段：

```
listView.setOnItemClickListener( new OnItemClickListener()
    {
        @Override
        public void onItemClick( AdapterView<?> parent, View view, int position, long id )
        {
            if ( position < listNewsAdapter.getCount() - 1 )
            {
                if ( listener != null )
                {
                    listener.onSwitchToNewsFragment( listNewsAdapter.getItem( position ).getNewsUrl(), container );
                }
            }
        }
    } ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:29:28.323

查看我对上述问题的新答案：[https ://stackoverflow.com/a/11974777/685292](https://stackoverflow.com/a/11974777/685292)

您可以在此处看到一个示例，因为*addToBackStack(null)*不适用于*ViewPager*片段，因此您可以自己使用*ViewPager实现简单的反向堆叠。*另请注意，关于您的问题的主要问题可能是缺少*getItemId(int position)*覆盖方法。

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T01:37:13.780

**在新的设计支持库中，我使用此解决方案**
您可以使用堆栈通过推送堆栈中的位置并使用堆栈中的弹出返回来存储选项卡。

在 viewpager 中有 3 个片段的主要活动中，我创建堆栈并推送和弹出数据。

```
private Stack<Integer> stackkk;
private ViewPager mPager;
private int tabPosition = 0;

    mTabLayout.setupWithViewPager(mPager);
    mPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(mTabLayout));
    mTabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
        @Override
        public void onTabSelected(TabLayout.Tab tab) {
            tabPosition = tab.getPosition();
            mPager.setCurrentItem(tab.getPosition());

            if (stackkk.empty())
                stackkk.push(0);

            if (stackkk.contains(tabPosition)) {
                stackkk.remove(stackkk.indexOf(tabPosition));
                stackkk.push(tabPosition);
            } else {
                stackkk.push(tabPosition);
            }
        }

        @Override
        public void onTabUnselected(TabLayout.Tab tab) {
            tabPositionUnselected = tab.getPosition();
        }

        @Override
        public void onTabReselected(TabLayout.Tab tab) {
        }
    });
} 
```

并在 onBackPressed 活动中，

```
@Override
public void onBackPressed() {
    if (stackkk.size() > 1) {
        stackkk.pop();
        mPager.setCurrentItem(stackkk.lastElement());
    } else {
//do wat you want
    }
} 
```

希望这可能会有所帮助***

# gwt - GWT 请求 .with 方法

> ID：10716466
> 
> 赞同：0
> 
> 时间：2012-05-23T08:44:36.100
> 
> 标签：gwt, requestfactory

如果这个相当n00bish的问题实际上在我刚刚找不到的文档中有答案，我很抱歉，但是

我对 GWT 还比较陌生，并且尽我所能尝试我无法找到我能理解的 request.with(String...) 方法实际执行的解释。请有人可以用一个音节向我解释这种方法的作用以及您为什么要使用它？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:13:57.543

它确实在文档中：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#relationships](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#relationships)

默认情况下，从您正在获取的实体代理/ies 引用的实体代理**不会**被获取（属性将只是`null`在客户端）。您必须使用 明确要求它们`with()`，并传递您要获取的属性的名称（也可以是虚线路径）。

# objective-c - 类声明为 UIImage (FiltrrCompositions) iOS SDK

> ID：10716467
> 
> 赞同：1
> 
> 时间：2012-05-23T08:44:37.147
> 
> 标签：objective-c, ios5

我是 iPhone 和目标 c 的新手

我想知道下面声明的含义..谁能告诉我答案

```
UIImage (FiltrrCompositions) iOS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:49:40.927

它是 Objective-C [Category](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Category.html)，换句话说是现有类的扩展。

# asp.net - 可以更改 RadioButtonFor 的名称吗？

> ID：10716468
> 
> 赞同：3
> 
> 时间：2012-05-23T08:44:38.533
> 
> 标签：asp.net, asp.net-mvc-3, radiobuttonfor

我在视图中使用 foreach 循环来显示几个单选按钮行..

```
sample radiobutton

<tr>
    <td width="30%">
    Integrity
    </td>
    <td width="17%">@Html.RadioButtonFor(x => x.main.ElementAt(i).nested.integrity, 1, new { id = "main_" + i + "__nested_integrity) Poor
    </td>
    <td width="18%">@Html.RadioButtonFor(x => x.main.ElementAt(i).nested.integrity, 2, new { id = "main_" + i + "__nested_integrity" }) Satisfactory
     </td>
     <td width="18%">@Html.RadioButtonFor(x => x.main.ElementAt(i).nested.integrity, 3, new { id = "main_" + i + "__nested_integrity" }) Outstanding
     </td>
     <td width="16%">@Html.RadioButtonFor(x => x.main.ElementAt(i).nested.integrity, 4, new { id = "main_" + i + "__nested_integrity" }) Off
     </td>
     </tr> 
```

因为我在模型绑定时遇到问题，所以我创建了手动 id 以满足我的要求（不同的递增 id）。
但是我认为名称属性再次出现问题。对于第一个和每个循环，我得到相同的名称属性（不递增），即如果我从第一个循环中选择单选按钮，那么它会从其他循环中取消选择 taht 行。

喜欢

```
Loop1 id= "main_0__nested_integrity"
Loop2 id= "main_0__nested_integrity"
Loop1 name= "nested.integrity"
Loop2 name= "nested.integrity" 
```

如您所见，所有循环的名称属性都是相同的，具有不同的 id。
**现在我的问题是......是否可以像 id 一样覆盖 RadioButtonFor 的 name 属性？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:46:13.837

> 现在我的问题是......是否可以像 id 一样覆盖 RadioButtonFor 的 name 属性？

不，那是不可能的。name 属性将根据您作为第一个参数传递的 lambda 表达式计算。

就我个人而言，我会使用编辑器模板，根本不用担心任何循环

```
@model MainViewModel
<table>
    <thead>
        ...
    </thead>
    <tbody>
        @Html.EditorFor(x => x.main)
    </tbody>
</table> 
```

并在相应的编辑器模板中：

```
@model ChildViewModel
<tr>
    <td width="30%">
        Integrity
    </td>
    <td width="17%">
        @Html.RadioButtonFor(x => x.nested.integrity, 1) Poor
    </td>
    <td width="18%">
        @Html.RadioButtonFor(x => x.nested.integrity, 2) Satisfactory
     </td>
     <td width="18%">
         @Html.RadioButtonFor(x => x.nested.integrity, 3) Outstanding
     </td>
     <td width="16%">
         @Html.RadioButtonFor(x => x.nested.integrity, 4) Off
     </td>
</tr> 
```

# javascript - 制作 Backbone.js 视图以在画布上绘制对象

> ID：10716478
> 
> 赞同：8
> 
> 时间：2012-05-23T08:45:34.327
> 
> 标签：javascript, html, canvas, backbone.js

我正在制作一个应用程序，在画布上绘制不同的矩形，我正在尝试使用 Backbone 来完成。我有一个名为 box 的模型：

```
 Box = Backbone.Model.extend({
        defaults: {
            x: 0,
            y: 0,
            w: 1,
            h: 1,
            color: "#FF9000",
            linewidth: 3,
            id: 0,
        },

        drawBox: function(ctx) {
            ctx.fillStyle = "#FF9000";
            ctx.globalAlpha = 0.1;
            ctx.fillRect(this.get("x"), this.get("y"), this.get("w"), this.get("h")); //transparent box in the back
            ctx.globalAlpha = 1;
            ctx.strokeStyle = this.get("color");
            ctx.lineWidth = this.get("linewidth");
            ctx.strokeRect(this.get("x"), this.get("y"), this.get("w"), this.get("h")); //rectangle on top      
        }
    }); 
```

我也收集了这个 Box 模型：

```
 BoxSet = Backbone.Collection.extend({
        model: Box          
    }); 
```

我的想法是有一个视图，我可以使用 Box 模型中的 drawBox 方法将 BoxSet 集合中的每个 Box 模型放在画布上，但到目前为止，所有教程和示例都处理简单的文本模板，我无法想象出如何实现这一点。

关于如何使用 Backbone 视图完成此操作的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T09:55:01.730

我会遵循 Backbone 提供的模型和视图的分离。将您的模型保存为数据存储库：

```
var Box = Backbone.Model.extend({
    defaults: {
        x: 0,
        y: 0,
        w: 1,
        h: 1,
        color: "#FF9000",
        linewidth: 3
        // don't define a default id, that leads to strange behaviors
    }
});

var BoxSet = Backbone.Collection.extend({
    model:Box
}); 
```

并定义视图以在画布上呈现不同的部分：

```
var BoxView = Backbone.View.extend({
    render: function() {
        var model = this.model, ctx = this.options.ctx;

        ctx.fillStyle = "#FF9000";
        ctx.globalAlpha = 0.1;
        ctx.fillRect(
            model.get("x"), model.get("y"),
            model.get("w"), model.get("h")
        ); 

        ctx.globalAlpha = 1;
        ctx.strokeStyle = model.get("color");
        ctx.lineWidth = model.get("linewidth");
        ctx.strokeRect(
            model.get("x"), model.get("y"), 
            model.get("w"), model.get("h")
        );
    }
});

var SetView= Backbone.View.extend({
    initialize: function() {
        this.listenTo(this.collection, "all", this.render);
    },

    render: function() {
        var canvas = this.el, ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        this.collection.each(function(model) {
            var view = new BoxView({ctx: ctx, model: model});
            view.render();
        })
    }
}); 
```

最后实例化和渲染：

```
var c = new BoxSet();
c.add({x: 150, y: 150, w: 100, h: 100});
c.add({x: 10, y: 10, w: 100, h: 100});

var v = new SetView({
    el: $("canvas"),
    collection : c
});
v.render(); 
```

查看这两个漂亮方块的小提琴[http://jsfiddle.net/JB9yg/](http://jsfiddle.net/JB9yg/)

另一个对集合的更改会导致重新渲染[http://jsfiddle.net/JB9yg/1/](http://jsfiddle.net/JB9yg/1/)

这个例子可能可以用来提供更简洁的操作，但这应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T04:00:07.677

您也可以尝试使用[Backbone.KineticView](https://github.com/slash-system/backbone.kineticview)插件为 Backbone 添加画布支持。它通过 KineticJS 工作，因此也可以将事件委托的所有功能用于画布节点。

例子：

```
var MyView = Backbone.KineticView.extend({
  // build Kineticjs object, then return it.
  el : function(){
    var rect = new Kinetic.Rect({
      x : 100,
      y : 100,
      width : 50,
      height : 50,
      fill : 'green',
      id : 'rect'
    });
    var circle = new Kinetic.Circle({
      x : 200,
      y : 100,
      radius : 50,
      fill : 'red',
      name : 'circle'
    });
    var group = new Kinetic.Group();
    group.add(rect).add(circle);
    return group;
  },
  // setup events
  events : {
    'click #rect' : function(){
      console.log("on rectangle clicked");
    },
    'mouseover .circle' : 'onMouseOverCircle'
  },
  onMouseOverCircle : function(){
    console.log('Mouse is over circle');
  },
  render : function(){
    // this.$el - cached kineticjs object.
    this.options.layer.add(this.$el);
    layer.draw();
  }
});

var stage = new Kinetic.Stage({
  container : 'container',
  width : 300,
  height : 300
});
var layer = new Kinetic.Layer();
stage.add(layer);

view = new MyView({layer:layer});
view.render(); 
```

# php - 如何在 PHP 中快速处理多个相同的表单字段？

> ID：10716482
> 
> 赞同：1
> 
> 时间：2012-05-23T08:45:46.553
> 
> 标签：php, arrays, forms

我有一张如下表：

```
<table>
  <thead>
     <th>PRODUCT TYPE</th>
     <th>QUANTITY</th>
     <th>WEIGHT</th>
     <th>WEIGHT PRICE</th>
     <th>TOTAL</th>
  </thead>
  <tr>
     <td>DRINKS</td>
     <input type="hidden" name="product[]" value="1" />
     <td><input type="text" name="qty[]" /></td>
     <td>LITER</td>
     <input type="hidden" name="unitPrice[]" value="34.92" />
     <td><input type="text" name="total[]" readonly="readonly" /></td>
   </tr>
  <tr>
     <td>DRY FOODS</td>
     <input type="hidden" name="product[]" value="1" />
     <td><input type="text" name="qty[]" /></td>
     <td>KG</td>
     <input type="hidden" name="unitPrice[]" value="16.30" />
     <td><input type="text" name="total[]" readonly="readonly" /></td>
   </tr>
  <tr>
     <td>FRESH FOOD</td>
     <input type="hidden" name="product[]" value="1" />
     <td><input type="text" name="qty[]" /></td>
     <td>TON</td>
     <input type="hidden" name="unitPrice[]" value="26.45" />
     <td><input type="text" name="total[]" readonly="readonly" /></td>
   </tr>
  <tr>
     <td>SWEET CONFECTIONARY</td>
     <input type="hidden" name="product[]" value="1" />
     <td><input type="text" name="qty[]" /></td>
     <td>TON</td>
     <input type="hidden" name="unitPrice[]" value="65.10" />
     <td><input type="text" name="total[]" readonly="readonly" /></td>
   </tr>
</table> 
```

所以，这里有一个问题：我想检查输入值`qty`，如果`qty`被填满，那么将取相关的产品值。但是，重要的事情不需要填写所有这些字段。员工可以填写一个或多个字段！

有人可以指导我如何使用 PHP 处理此表单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:56:54.393

像这样的代码是有问题的，因为`product`和`qty`数组的元素必须保持同步，但是表单提交的 HTML4（和 HTML5）模型并没有说这些`qty`控件必须[成功](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.2)。因此浏览器可能会选择不提交它们的值，这会弄乱跨数组索引。

最干净的解决方案是在每个控件的名称中显式指定数组的索引：

```
 <tr>
     <td>DRINKS</td>
     <input type="hidden" name="product[0]" value="1" />
     <td><input type="text" name="qty[0]" /></td>
     <td>LITER</td>
     <input type="hidden" name="unitPrice[0]" value="34.92" />
     <td><input type="text" name="total[0]" readonly="readonly" /></td>
   </tr>
  <tr>
     <td>DRY FOODS</td>
     <input type="hidden" name="product[1]" value="1" />
     <td><input type="text" name="qty[1]" /></td>
     <td>KG</td>
     <input type="hidden" name="unitPrice[1]" value="16.30" />
     <td><input type="text" name="total[1]" readonly="readonly" /></td>
   </tr> 
```

这样你就可以做到

```
foreach ($POST['product'] as $i => $val) {
    if (!empty($POST['qty'][$i])) {
        // the product has a nonzero quantity
    }
} 
```

您可能要考虑的另一个选项是：

```
 <tr>
     <td>DRINKS</td>
     <input type="hidden" name="product[0][product]" value="1" />
     <td><input type="text" name="product[0][qty]" /></td>
     <td>LITER</td>
     <input type="hidden" name="product[0][unitPrice]" value="34.92" />
     <td><input type="text" name="product[0][total]" readonly="readonly" /></td>
   </tr> 
```

这将与

```
foreach ($POST['product'] as $product) {
    if (!empty($product['qty'])) {
        // the product has a nonzero quantity
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:02:07.903

您可以在数组上分配唯一索引

```
<input type="hidden" name="product[1]" value="1" />
<td><input type="text" name="qty[1]" /></td>
...
<input type="hidden" name="product[2]" value="2" />
<td><input type="text" name="qty[2]" /></td> 
```

# c# - 从 Rabbit MQ 以字节 [] 形式检索存储的电子邮件附件不会发送电子邮件

> ID：10716486
> 
> 赞同：0
> 
> 时间：2012-05-23T08:46:03.703
> 
> 标签：c#, rabbitmq, email-attachments

我将 svg 对象转换为 byte[] 并将其存储在具有以下类的队列中

```
public class MailMessage
{  
    public string AttachmentName { get; set; }    
    public byte[] Attachment { get; set; }
} 
```

但是，电子邮件永远不会被发送。我认为附件已损坏，因为如果我们跳过将附件添加到电子邮件中，那么它可以正常发送。

```
using (var stream = new MemoryStream(attachment))
{
  var mailMessage = new MailMessage(this.from, new MailAddress(recipient)) { Subject = subject, Body = message };

  // this is the line which if commented out allows the email to be sent 
  mailMessage.Attachments.Add(new Attachment(stream, filename));

  MailSender().SendAsync(mailMessage, null);
} 
```

一位同事建议 byte[] 可能由于 rabbit 存储消息的方式而受到损害，因此在使用内置函数存储之前对 byte[] 进行 base64 编码

```
Convert.ToBase64String(bytes)

Convert.FromBase64String(message.Attachment) // to retrieve 
```

然而，这也没有奏效。

谁能想到为什么这无法发送并想到任何解决方法。

我正在考虑将图像存储在数据库中，并在发送电子邮件后将其删除，但这是最后一个资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:53:53.510

问题在于`MailSender.SendAsync()`. 该`stream`对象在发送邮件之前被处置。

不要`using`在这里使用“”。您在调用后立即销毁内存流`SendAsync`，例如可能在 SMTP 读取它之前（因为它是异步的）。

在回调中销毁您的流。

或者

使用`MailSender.Send()`而不是`MailSender.SendAsync()`同步发送。

[请参阅此以获取更多详细信息](http://social.msdn.microsoft.com/Forums/en-AU/winforms/thread/477d9b5b-bc6e-4fe3-9734-820211ae250f)

# c# - ASP.NET MVC 中的自动邮件

> ID：10716487
> 
> 赞同：0
> 
> 时间：2012-05-23T08:46:09.720
> 
> 标签：c#, asp.net, asp.net-mvc-3

当某些预订发生更改时，我希望所有参与的人都能收到有关更改的邮件。

实际上我不确定如何完成这项工作。但我想我的第一个问题应该是。我应该如何检查更改是否一致，以及我应该如何知道哪些人参与了更改？

我在 MVC 3 中使用实体框架（延迟加载）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:55:36.707

三角洲，

这可以通过多种方式解决。我今天使用的是基于在存储库保存更改时引发事件。不确定您的配置是什么样的，但这是我所做的一个片段：

```
public void SaveChanges()
{
    //_auditDate = DateTime.Now; ignore this in your case
    OnSavingChanges();
    _context.SaveChanges();
    OnSavedChanges();
}

private void OnSavingChanges()
{
    if (SavingChanges != null)
    {
        var eventArgs = new RepositorySavingChangesEventArgs()
        {
            AuditDate = _auditDate
        };
        SavingChanges(this, eventArgs);
    }
}
public event EventHandler<RepositorySavingChangesEventArgs> SavingChanges;

private void OnSavedChanges()
{
    if (SavedChanges != null)
    {
        var eventArgs = new RepositorySavedChangesEventArgs()
        {
            AuditDate = _auditDate
        };
        SavedChanges(this, eventArgs);
    }
}
public event EventHandler<RepositorySavedChangesEventArgs> SavedChanges; 
```

然后简单地确保您的客户端代码订阅了 SavingChanges EventHandler。任务完成。您实际上只在您知道关键更改所在的上下文中订阅，然后在该事件处理程序内触发电子邮件服务调用。

希望这可以帮助。

**[编辑]**作为对下面评论的回应，您可以在服务类、基本抽象类或更简单地说，在您的控制器中引发这些事件中的任何一个。这是控制器引发事件的示例：

```
public TimelinesController(IRepository repository)
{
_serviceTasks = new TimelineService(repository);
    repository.SavedChanges +=
        new EventHandler<RepositorySavedChangesEventArgs>(repository_SavedChanges);
}

private void repository_SavedChanges(object sender, RepositorySavedChangesEventArgs e)
{
    var newDate = e.AuditDate;
    /* do something fancy with the audit date */
} 
```

希望这能为您指明一个更“明确”的方向:)

# php - PHP，爆炸多个单词并插入数据库表

> ID：10716496
> 
> 赞同：0
> 
> 时间：2012-05-23T08:46:44.150
> 
> 标签：php

如果我发布多个单词数据，我想将它们拆分并将其保存到具有不同行的数据库中。

```
 keyword = "apple,banana,orage,kiwi,mango" 
```

所以我写了这段代码。

```
$keyword = $this->input->post('keyword');
$password = $this->input->post('pwd');
$password_confirm = 'password';

if($password == $password_confirm)
{
    $ExplodeKeywords = explode(",", $keyword);

    foreach($ExplodeKeywords as $val) 
    {
        $arrayshift = array_shift($val);
        if(count($arrayshift) > 0)
        {
            $query = 'INSERT INTO '.T_KEYWORD_POPULAR.' (kp_keyword, kp_time) VALUES ("'.$arrayshift.'", "'.date("Y-m-d H:i:s").'")';
            $this->db->query($query);               
        }
    }

    echo 'GOOD!';
} 
```

它不会将 foreach 数据保存到数据库中。

你能看出是什么导致了问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:53:23.383

```
$ExplodeKeywords = explode(",", $keyword);
foreach ($ExplodeKeywords as $row) {
    $query = 'INSERT INTO '.T_KEYWORD_POPULAR.' (kp_keyword, kp_time) VALUES ("'.$row.'", "'.date("Y-m-d H:i:s").'")';
    $this->db->query($query); 
} 
```

# c# - C# Winform 将实体 connectionString 放在 userSetting 上

> ID：10716499
> 
> 赞同：0
> 
> 时间：2012-05-23T08:46:52.450
> 
> 标签：c#, winforms, entity-framework, connection-string

我已将我的 ConnectionString 移动到用户设置中

```
<userSettings>
    <FrontEnd_Offline.Properties.Settings>
      <setting name="PC_Name" serializeAs="String">
        <value>PC-CARTO3</value>
      </setting>
      <setting name="Soft8Exp_ClientConnStr" serializeAs="String">
        <value>Data Source=xxxx;Initial Catalog=xxx;User ID=xx;Password=xxx</value>
      </setting> 
```

并用这个保存修改

```
private string BuildConnection()
        {
            if (String.IsNullOrEmpty(cmbServers.Text))
                return "";

            SqlConnectionStringBuilder csb = new SqlConnectionStringBuilder();

            csb.DataSource = cmbServers.Text;
            //csb.IntegratedSecurity = chkUseWindowsSecurity.Checked;
            csb.InitialCatalog = "xxxx";
            csb.UserID = "xx";
            csb.Password = "xxxx";
            string cs = csb.ToString();

            return cs;

        }

 private void simpleButton_ServeurSave_Click(object sender, EventArgs e)
        {
            string Temp_CS = BuildConnection();

            if (!String.IsNullOrWhiteSpace(Temp_CS))
            {
                SqlConnection con = new SqlConnection(Temp_CS);
                try
                {
                    //set the new value of ClientConnectionString
                    Properties.Settings.Default.Soft8Exp_ClientConnectionString = Temp_CS;
                    Properties.Settings.Default.Soft8Exp_ClientConnStr = Temp_CS;

                    //apply the changes to the settings file
                    Properties.Settings.Default.Save();

                }
                catch (Exception ex)
                {
                    MessageBox.Show("Impossible de se connecter à la base de données\n" + ex.Message, "Result", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                }
            } 
```

它工作正常。现在我想对我的实体连接做同样的事情。我知道我必须使用[实体 connectionBuilder](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.aspx)，但问题是：我无法将实体的 connectionString 移动到 userSetting 中。

提前谢谢你

# jquery - Jquery：具有延迟的控制功能流

> ID：10716505
> 
> 赞同：1
> 
> 时间：2012-05-23T08:47:10.110
> 
> 标签：jquery, queue, jquery-deferred, deferred, chain

抱歉，但我似乎在兜圈子。

这个过程相当简单

1.  SaveButtonClicked

2.  调用函数执行离线数据库事务以更新记录

3.  检查是否在线（/*使用 Ed Norton 示例进行此操作 */）

4.  如果在线调用选择事务以获取所有更新的记录

5.  选择加载结果成功到数组中

6.  使用数组调用 web 服务

到目前为止，我尝试使用 $.Deferred, dothis = defer.pipe(...), .queue [但这些似乎基于元素而不是函数完成] 来控制流程，将函数放入数组中,

在测试中，控制台总是在“构建数组”之前写入“构建数组”

```
var arrvals = [];
var deferA , deferB;
function updatedb(params){
    db.transaction('update....',[params],updateOk,updateFail)
}
function updateOk(){
    deferA.resolve()
}
function updateFail(){
    deferA.reject()
}
function areweonline(){
    $.ajax(.....) 
}
function selectrows(){
    db.transaction('update....',[params],buildarray,selectFail)
}
function buildarray(transaction,results){
    console.log('building array')
    for(i=0;i<=results.rows.length;i++){
        var row = results.rows.item(i);
        var job = {};
        job.text = row["testtext"]
        arrvals.push(job);
    }
    deferB.resolve()
}
function selectFail(){
    deferB.reject();
}
function callwebservice(vals){
    $.ajax(....) /* this bit is working fine*/
}
function SaveButtonClicked(){
    deferA = $.Deferred(); 
    deferB = $.Deferred();
    $.when(deferA).then(
        console.log('update completed')
        $.when(deferB).then(function(){
            console.log('array built')
            callwebservice(arrvals)
        })
    )
} 
```

那么最好的方法是什么？$.Deffered、队列、回调……黑魔法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:02:30.200

以这种方式尝试

```
function updatedb(params) {
    var deferA     = $.Deferred(),
        updateOk   = function() { deferA.resolve(); },
        updateFail = function() { deferA.reject(); }

    db.transaction('update....',[params],updateOk,updateFail);
    return deferA.promise();
}

function selectrows() {

    var arrvals = [];

    var deferB     = $.Deferred(),
        buildarray = function (transaction, results) {
            console.log('building array')
            for(i = 0; i <= results.rows.length; i++){
                var row = results.rows.item(i);
                var job = {};
                job.text = row["testtext"]
                arrvals.push();
            }
            deferB.resolve(arrvals);
        },
        selectFail = function() {
            deferB.reject();
        };

    db.transaction('update....',[params],buildarray,selectFail);
    return deferB.promise();
}

function callwebservice(vals) { $.ajax(....) /* this bit is working fine*/ }

function SaveButtonClicked(){

    $.when(updatedb('your params here')).then(
        console.log('update completed')
        $.when(selectrows()).then(function(arr){
            console.log('array built');
            callwebservice(arr)
        })
    )
} 
```

一些想法

*   `push()`你有一个空`selectrows`函数（我认为这不是你想要的，因为`arrvals`它是空的）；
*   我重构了您的代码以使用更少的全局变量/函数：延迟对象现在在返回承诺的函数中声明；
*   `arrvals`现在在`selectrows()`函数中定义，你可以在解决延迟任务时传递它；
*   `areweonline()`函数已从我的示例中删除（因为您没有在代码段中的任何地方使用它）；
*   `when()`现在正在寻找承诺（而不是延期）。

注意：我没有尝试执行代码，但希望无论如何这会有所帮助

# python - 鼻子的 assert_raises 函数在哪里？

> ID：10716506
> 
> 赞同：5
> 
> 时间：2012-05-23T08:47:16.800
> 
> 标签：python, nose

我正在使用鼻子 1.1.2 为 Python 项目编写测试。`assert_raises`文档中碰巧提到了这个功能，但我在任何地方都找不到。

它应该是这样的简写：

```
value_error_raised = False
try:
    do_something_that_should_raise_value_error()
except ValueError:
    value_error_raised = True
assert value_error_raised

type_error_raised = False
try:
    do_something_else_that_should_raise_type_error()
except TypeError:
    type_error_raised = True
assert type_error_raised 
```

那将变成：

```
assert_raises(ValueError,
              do_something_that_should_raise_value_error)

assert_raises(TypeError,
              do_something_else_that_should_raise_type_error) 
```

我已经搜索了源代码，唯一提到的是文档中的 tools.py 模块`raises`：

> 如果您想在单个测试中测试许多关于异常的断言，您可能需要`assert_raises`改用。

这个功能是从鼻子上去掉的吗？如果是这样，有人可以帮我理解为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:58:56.290

```
>>> from nose.tools import assert_raises
>>> assert_raises
<bound method Dummy.assertRaises of <nose.tools.Dummy testMethod=nop>>
>>> import nose
>>> nose.__version__
'1.1.2' 
```

我个人将 unittest2.TestCase 类与鼻子测试一起使用，并使用 self.assertRaises。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T08:49:18.523

在您的测试功能上使用[`@raises(*exceptions)`](http://readthedocs.org/docs/nose/en/latest/testing_tools.html#nose.tools.raises)装饰器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T08:45:23.990

此答案适用于您无法找到有关 assert_raises 的信息的原因。

从[鼻子文档](https://nose.readthedocs.org/en/latest/testing_tools.html)：

> nose.tools 模块提供了 [...] 在 unittest.TestCase 中找到的所有相同的 assertX 方法（仅以 PEP 8 方式拼写，因此 assert_equal 而不是 assertEqual）

以下是[PEP 8 建议的函数命名](http://www.python.org/dev/peps/pep-0008/#function-names)和Python 基础文档中的[*assertX*](http://docs.python.org/2/library/unittest.html#assert-methods)[方法](http://docs.python.org/2/library/unittest.html#assert-methods)[列表。](http://docs.python.org/2/library/unittest.html#assert-methods)

# django - 覆盖继承模型字段的默认值

> ID：10716508
> 
> 赞同：1
> 
> 时间：2012-05-23T08:47:23.043
> 
> 标签：django, django-models

我的模型结构如下：

```
class Store(models.Model):
    STORE_TYPE = (
        ('I', 'Ice Cream'),
        ('H', 'Hardware'),
    ) 
    retailer_type = models.CharField(max_length=10, choices=STORE_TYPE)
    ...

class HardwareStore(Store):
        hammers_stocked = models.BooleanField() 
```

当我创建 HardwareStore() 对象时，我想将 Retailer_type 默认设置为 H。是否可以在 HardwareStore 类中为此字段设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:26:58.107

[这是您的答案](https://docs.djangoproject.com/en/1.1/topics/db/models/#field-name-hiding-is-not-permitted)，如果您尝试覆盖的字段是“字段”类型，则 django 默认不允许这样做。我认为如果retailer_type 是一个基本类型（比如一个字符串），你可以很容易地做到这一点，因为python 允许这样做。另一方面，对于它自己的数据类型，Django 没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:40:16.853

不确定这是否有效，请尝试

```
class Store(models.Model):
    STORE_TYPE = (
        ('I', 'Ice Cream'),
        ('H', 'Hardware'),
    )
    STORE_TYPE_DEFAULT = lambda: None

    retailer_type = models.CharField(max_length=10, choices=STORE_TYPE, default=STORE_TYPE_DEFAULT)
    ...

class HardwareStore(Store):
    STORE_TYPE_DEFAULT = lambda: 'H'

    hammers_stocked = models.BooleanField() 
```

但是你为什么还需要`STORE_TYPE`呢？您可以使用`isinstance(obj, HardwareStore)`或`hasttr(obj, 'hammers_stocked')`来检查商店的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:00:41.250

我认为一个优雅的解决方案可能是在[post_init](https://docs.djangoproject.com/en/dev/ref/signals/)信号中编写代码或覆盖 init 方法来设置默认值。程序可能是检查它是新模型还是现有模型（检查实例 pk），并在正确的情况下将您的属性设置为默认值。

如果您需要更多详细信息，请告诉我。

# script# - 如何将 ScriptSharp 生成的 JS 与 NodeJS 一起使用？

> ID：10716513
> 
> 赞同：3
> 
> 时间：2012-05-23T08:47:47.177
> 
> 标签：script#

我尝试在 NodeJS 中使用由 Script# 生成的 Javascript 文件，但由于对 NodeJS 中不可用的某些库的依赖性，它无法工作。

有没有人尝试在 NodeJS 中使用 Script# 生成的 JS 文件？你是如何克服与它内部使用的 JS 文件相关的依赖问题的？你只是包括了一堆吗？

如果没有，是否可以提供此功能？谢谢！

# android - 具有向后兼容性的 Android Holo 主题

> ID：10716514
> 
> 赞同：5
> 
> 时间：2012-05-23T08:47:51.393
> 
> 标签：android, backwards-compatibility

我已经构建了支持`android:minSdkVersion="7"` `android:targetSdkVersion="15"`. 我使用继承 Android 默认主题的自定义主题。

所以现在我想将整个应用程序主题更改为 Holo 主题。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T11:38:02.520

您可以通过使用不同的样式 XML 来实现“样式选择器”。

只需在以下位置定义一个名为“StyleSelector”或类似名称的主题`/res/**values**/styles.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="ThemeSelector" parent="@android:style/Theme.Black">
    ... Your theme definitions
    </style>
</resources> 
```

然后创建一个`/res/**values-v11**/styles.xml`：

```
<resources>
    <style name="ThemeSelector" parent="@android:style/Theme.Holo">
    </style>
</resources> 
```

现在只需使用“ `@style/ThemeSelector`”应用您的主题，让 Android 发挥作用。在较旧的 Android 版本上，将加载您的主题定义，在具有 Holo-Support 的较新版本上，您的主题将来自 Holo。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T11:41:38.587

尝试使用[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)作为父主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:01:30.690

只需修改包含主题的 AndroidManifest.xml 中的应用程序标记：

```
android:theme="@style/Theme.Holo" 
```

例如像这样：

```
<application android:icon="@drawable/ic_launcher"
             android:label="@string/app_name"
             android:theme="@style/Theme.Holo"> 
```

或者您可以在每个活动的基础上进行。以下是相关文档： [https ://developer.android.com/guide/topics/ui/themes.html](https://developer.android.com/guide/topics/ui/themes.html)

# java - 使用音频/基本作为类型的 j2me 中记录数据的结构是什么？

> ID：10716519
> 
> 赞同：0
> 
> 时间：2012-05-23T08:48:06.103
> 
> 标签：java, java-me, bytearray, mmapi, sample-rate

我正在将 j2me 电话中麦克风的音频录制到 ByteArrayOutputStream，如下所示

```
 p = Manager.createPlayer("capture://audio?encoding=pcm");
  p.realize();  
  RecordControl rc = (RecordControl)p.getControl("RecordControl");
  ByteArrayOutputStream output = new ByteArrayOutputStream();
  rc.setRecordStream(output);  
  rc.startRecord();
  p.start(); 
```

记录数据的结构是什么？

我的意思是采样率、每个样本的大小、通道数等信息在哪里存储

我可以在完成录制后使用 Output.toByteArray() 将 ByteArrayOutputStream 转换为 ByteArray 来获取这些信息吗？

我想直接从记录的数据中获取这些信息，然后再将其加载到另一个播放器中进行播放

# xml - 使用 C# 2.0 函数从 XML 获取属性值

> ID：10716520
> 
> 赞同：0
> 
> 时间：2012-05-23T08:48:17.833
> 
> 标签：xml, xpath, c#-2.0, xpathdocument

我正在使用 C# 2.0，并且我有以下 xml 格式（这只是一个示例）并在 XPathDocument xmlData 中加载；

```
<?xml version="1.0"?>
<sitedata>
<resources>
<WorldwideSites>Worldwide sites</WorldwideSites>
<PublishedDate>20120507163835</PublishedDate>
</resources>
<region code="global" title="Global">
<site defaultLanguage="en" id="tcm:0-233-1" url="/english" countryCode="" title="" order="1">
<language code="en" pubId="tcm:0-233-1" countrylang="en-GB">English</language>
</site>
</region>
<region code="NSAM" title="North &amp; South America">
<site defaultLanguage="es" id="tcm:0-520-1" url="/ar/spanish" countryCode="AR" title="Argentina">
<language code="es" pubId="tcm:0-520-1" countrylang="es-AR" >Español</language>
<language code="en" pubId="tcm:0-447-1" countrylang="en-AR" >English</language>
</site>
</region>
<region code="EU" title="Europe">
<site defaultLanguage="de" id="tcm:0-336-1" url="/at/german" countryCode="AT" title="Austria">
<language code="de" pubId="tcm:0-336-1" countrylang="de-AT" >Deutsch</language>
<language code="en" pubId="tcm:0-337-1" countrylang="en-AT" >English</language>
</site>
</region>
</sitedata> 
```

现在我想创建一个 C# 2.0 函数，它将这个 XML 作为输入并返回一个多维数组或数组列表

```
ArrayList xmldata = new ArrayList();
xmldata[0][0] will be ["233"]["en-GB"] //a middle part of pubId attribute
xmldata[1][1] will be ["520"]["es-AR"] //attribute value of countrylang
..
..
and so on 
```

或者建议最好的方法

请推荐！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:43:14.663

针对上述问题实施了以下解决方案。请建议任何更改。

```
 public ArrayList GetPubIDAndCountryLangFromSitesXML(XPathDocument xPathDoc)
        {
            ArrayList retArr = new ArrayList();

            XPathNavigator navigator = xPathDoc.CreateNavigator();
            if (navigator != null)
            {
                foreach (XPathNavigator navdata in navigator.Select("sitedata/region/site/language"))
                {
                    string[] str = new string[2];
                    string pubid = navdata.SelectSingleNode("@pubId").Value;
                    string clang = navdata.SelectSingleNode("@countrylang").Value;
                    if (!string.IsNullOrEmpty(pubid) && !string.IsNullOrEmpty(clang))
                    {
                        str[0] = pubid.Split('-')[1];
                        str[1] = clang;
                        if (pubid != "481")
                        {
                            retArr.Add(str);
                        }
                    }
                }
            }
            return retArr;
        } 
```

# phpmyadmin - 1045 拒绝 phpmyadmin 通过局域网访问但不在桌面上

> ID：10716524
> 
> 赞同：0
> 
> 时间：2012-05-23T08:48:28.517
> 
> 标签：phpmyadmin

我在 CentOS 6 上安装了 phpmyadmin，我可以使用`http://localhost/phpmyadmin`服务器桌面上的浏览器登录它就好了，但是当我`http://192.168.254.5/phpmyadmin`从笔记本电脑上尝试时，我得到了

错误 #1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：YES）

我检查了 config.inc.php 中的设置

*   auth_type 是 'cookie'，我在 blowfish_secret 中有一个 41 个字符的字符串
*   根据 wiki.phpmyadmin.net 上的文档，主机为“127.0.0.1”（也尝试了“localhost”和“192.168.254.5”）

我已经`mysql -uroot -pmypassword`使用笔记本电脑上的 ssh 窗口输入并成功登录，以确保输入正确，然后将 mypassword 剪切并粘贴到笔记本电脑浏览器上的 phpmyadmin 登录表单中。

奇怪的是，当我尝试`http://192.168.254.5/phpmyadmin`从服务器桌面上的浏览器登录时，我得到

错误 #2003 服务器没有响应

但是我可以`mysql -uroot -pmypassword -h 192.168.254.5`从服务器上的终端窗口或局域网上的另一个 linux 系统进入并登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:46:37.427

很奇怪。它神奇地修复了自己 %-(

我突然想到，如果这是一些奇怪的 SELinux 问题，我应该从笔记本电脑再试一次，然后查看 dmesg；但是，这一次它让我登录就好了。

# javascript - 使用 .NET MVC4 的实用实时应用程序的最佳实践

> ID：10716525
> 
> 赞同：1
> 
> 时间：2012-05-23T08:48:29.733
> 
> 标签：javascript, ajax, asp.net-mvc, jsonp, real-time

你好人和机器人，

我正在为系统开发前端 Web 应用程序并且遇到了一个小问题。

整个应用程序必须在一个页面上，这意味着在应用程序主要区域的流程中没有刷新或页面更改。

它还必须在包括 IE7 在内的所有 Web 浏览器中运行，并且可以部署为平板电脑和手机的 HTML5 应用程序。

它基于用户登录，由 webforms 身份验证控制，然后我需要轮询或长轮询服务器以获取更新。如果我可以对系统的每个部分进行请求，这将很简单，但是如果系统变得太大，会话阻塞就会成为一个问题，并且它也可能最终导致自身崩溃。所以我需要做的是想办法发送一个请求并从该请求构建一个响应。

我的第一个想法是使用 JSON 或 XML 构建响应模型，并让 JavaScript 管理需要更新的内容。例如，对某个主题发表了新评论，所有客户几乎都会立即看到此更新。我的想法是发送这样的东西：

```
[
    'd':
    {
        'addComment' : [{'topicId':'topic1', 'description':'haha'}, {'topicId':'topic1', 'description':'lol'}],
        'addTopics' : ['topic2','topic708'],
    }
] 
```

JavaScript 然后会解析这个并将“haha”和“lol”添加到 id 为“topic1”的元素中。从理论上讲，这似乎很容易实现，但随着系统变得越来越大，它似乎不断地变得一团糟。

我的第二个想法是简单地拥有一组客户端函数，用于在 DOM 中添加和删除内容，然后使用 JSONP 技术调用此函数。

```
var addComment = function(commentModel)
{
    var topic = document.getElementById(commentModel.topicId),
        comments = topic.getElementByClassName('comments')[0],
        comment = document.createElement('div');

    comment.innerHTML = commentModel.description;
    comments.appendChild(comment);

    updateUnreadComments();
} 
```

回复：

```
(function(addComment){
    addComment({ topicId : 'topic1', description : 'haha' })
    addComment({ topicId : 'topic1', description : 'lol' })
})(addComment) 
```

就个人而言，我发现这两种方法都是一个相当烦人的解决方法，只不过是简单的广播。

我想知道是否有其他人遇到过同样的问题，以及他们是否曾经提出过更有创意的解决方案。

我还想知道 JSONP 会出现什么样的安全问题。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:18:15.897

You may take a look at [SignalR](https://github.com/SignalR/SignalR). Scott Hanselman also [blogged](https://github.com/SignalR/SignalR) about it.

# silverlight - ReSharper 对 XAML 中的绑定路径的错误建议

> ID：10716527
> 
> 赞同：2
> 
> 时间：2012-05-23T08:48:37.660
> 
> 标签：silverlight, xaml, binding, path, resharper

我从 ReSharper (6.1) 收到了一个误导性的建议，即用 System.Windows.Interop 中的类型替换绑定路径中的属性名称“内容”。由于我的 SO 声誉太低，我无法显示屏幕截图，因此我尝试让您成为弹出的 ReSharper 建议的“绘图”：

```
<DataTemplate>                        |(?) System.Windows.Interop.Content? (Alt+Enter)
        <TextBlock Text="{Binding Path=Content.Name}"/>
</DataTemplate> 
```

我可以忽略该建议并继续前进，但有时我会成为该建议的受害者。或者我可以将我的属性重命名为其他名称，但这是我最后的选择。有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:31:44.107

发生这种情况是因为 ReSharper 无法解析 Content 属性并找到 System.Windows.Interop.Content 类型，并试图猜测您是否想使用它。

原则上，它不应该是侵入性的......

感谢您的反馈。我们将与团队讨论。

# openmpi - Openmpi 编译错误：mpicxx.h“数字常量之前的预期标识符”

> ID：10716528
> 
> 赞同：2
> 
> 时间：2012-05-23T08:48:40.503
> 
> 标签：openmpi

我正在尝试使用 openmpi 编译程序，但我的代码没有给出任何错误，而是 mpi 标头之一：

```
/usr/include/openmpi-x86_64/openmpi/ompi/mpi/cxx/mpicxx.h:168: error: expected identifier before numeric constant
/usr/include/openmpi-x86_64/openmpi/ompi/mpi/cxx/mpicxx.h:168: error: expected unqualified id before numeric constant 
```

标题中的相关代码行简单地读取：

```
namespace MPI { 
```

我正在使用 mpiCC 编译器。难道我做错了什么？或者这是openmpi中的错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:30:10.307

虽然我无法重现您遇到的问题，但可以在 中找到以下评论`mpi.h`，其中`mpicxx.h`包括：

```
/*                                                                             
 * Conditional MPI 2 C++ bindings support.  Include if:
 *   - The user does not explicitly request us to skip it (when a C++ compiler
 *       is used to compile C code).
 *   - We want C++ bindings support
 *   - We are not building OMPI itself
 *   - We are using a C++ compiler
 */
#if !defined(OMPI_SKIP_MPICXX) && OMPI_WANT_CXX_BINDINGS && !OMPI_BUILDING
#if defined(__cplusplus) || defined(c_plusplus) 
#include "openmpi/ompi/mpi/cxx/mpicxx.h"
#endif
#endif 
```

如果您不使用已弃用的 C++ 绑定，则可能的解决方法是添加

```
-DOMPI_SKIP_MPICXX 
```

到你的`CXXFLAGS`. 希望这可能会有所帮助。

# ios - 让应用程序同时兼容 iPhone 和 iPad？

> ID：10716529
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:48:41.607
> 
> 标签：ios

我是一名初级 iPhone 程序员。我为 iPhone 制作了一个无法在 iPad 上运行的球类游戏应用程序。我不知道如何在 iPad 上运行 iPhone 应用程序。那么如何让我的应用程序同时兼容 iPhone 和 iPad？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:55:33.013

在 xcode 4.3 的左侧选择您的项目，选择您的第一个目标，选择选项卡“摘要”并选择设备“通用”而不是“iPhone”，该应用程序将在 ipad 上全屏运行而不是一个小的 iPhone 窗口

# javascript - Dojo dijit.form.button 未加载

> ID：10716530
> 
> 赞同：0
> 
> 时间：2012-05-23T08:48:44.060
> 
> 标签：javascript, dojo

我有以下代码：

```
require(["dijit/registry", "dijit/layout/BorderContainer", "dijit/layout/ContentPane", "dijit/form/Button", "dojo/query", "dojo/domReady!"], function(registry, BorderContainer,  ContentPane, Button, query){

var appLayout = new BorderContainer({
    design: "sidebar"
}, "appLayout");

var dataArea = new ContentPane({
    region: "center",
    content: '<div id="grid"></div>'
});

var actionArea = new ContentPane({
    region: "bottom",
    id: "actionarea",
    content: '<button id="computer"></button>'
});

var treeArea = new ContentPane({
    region: "left",
    id : "treearea",
    content: '<div id="treeroot"></div>',
    splitter: true
});

var button = new Button({
    label: "Load Computer tree"
}, "computer");

appLayout.addChild(treeArea);
appLayout.addChild(dataArea);
appLayout.addChild(actionArea);
appLayout.startup();
button.startup();
}); 
```

所有布局均已正确加载，但我的按钮未加载。

我试图在 button.startup() 调用之前查询#computer，它加载得很好。

```
appLayout.addChild(treeArea);
appLayout.addChild(dataArea);
appLayout.addChild(actionArea);
appLayout.startup();

console.log(query("#computer"));

button.startup();
}); 
```

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:25:30.847

不要在标记中创建按钮

```
var actionArea = new ContentPane({
    region: "bottom",
    id: "actionarea"
}); 
```

并将按钮小部件设置为内​​容

```
var button = new Button({
    label: "Load Computer tree"
}); 
actionArea.set('content', button); 
```

这是一个工作示例：http: [//jsfiddle.net/cswing/V6qK2/](http://jsfiddle.net/cswing/V6qK2/)

# java - 我们可以在运行时使用 SAX 解析器修改 XML 文件，例如删除、更新节点吗？

> ID：10716533
> 
> 赞同：1
> 
> 时间：2012-05-23T08:48:56.677
> 
> 标签：java

我是 xml 解析的新手，我们是否可以更新或修改，例如在运行时使用 SAX 解析器删除 XML 的节点，并将更新的数据作为 XML 流式传输，或者如果我们需要将其转换为我们自己的格式？正如 DOM 解析器所做的那样。

```
dbFactory = DocumentBuilderFactory.newInstance();
            docBuilder = dbFactory.newDocumentBuilder();
            document = docBuilder.parse("src/"+xmlFile);

             tranformerFactory = TransformerFactory.newInstance();
             transformer = tranformerFactory.newTransformer();

             for (int i = 0; i < inputElementsArrayToRemove.length; i++) 
             {
                 element = (Element)document.getElementsByTagName(inputElementsArrayToRemove[i]).item(0);

                 if(element != null)
                 {
                    // Removes the node from the document
                     element.getParentNode().removeChild(element);
                 }
             }

             // Normalize the DOM tree to combine all adjacent nodes
            document.normalize();

            // Here, transforming(Converting) the document source to the another XML file
            Source source = new DOMSource(document);
            Result dest = new StreamResult(new FileOutputStream(new File("src/"+resultXmlFileName)));

            // transform method to write out the DOM as XML data.
            transformer.transform(source, dest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:15:21.863

是的，使用[XMLReader](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/XMLReader.html)和[XMLFilter](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/XMLFilter.html) API。有关示例，请参阅[此问题](https://stackoverflow.com/q/10598035/139595)和[答案。](https://stackoverflow.com/a/10599507/139595)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:52:10.200

我们可以使用 SAX 解析器读取或写入 xml。要编辑或更新，我们只需要使用 DOM 解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:55:30.157

你不能。SAX Parser 生成事件流并将它们提供给您的处理程序。处理程序用它做它喜欢的事情。

DOM 解析器生成节点树，您可以对其进行修改并将其保存为 XML（但它也会消耗内存）

XPP 解析器允许您将 xml 事件一一从流中提取出来，您可以使用解析器将其包装并动态修改事件。我推测是接近你的任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:56:46.237

没有。SAX 是基于事件的解析器，它告诉它何时遇到令牌。它用于阅读。我们可以用它来写吗？

# java - 在类、扩展和实现方面苦苦挣扎

> ID：10716539
> 
> 赞同：0
> 
> 时间：2012-05-23T08:49:18.517
> 
> 标签：java, android, oop

我真的在类、扩展和实现方面苦苦挣扎。

那么在 android 我想创建一个偏好屏幕并检查用户输入。

因此，我可以使用一个名为 preferences.class 的文件，并使用以下类做我需要的一切：

```
 public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener {

        @Override
protected void onCreate(Bundle savedInstanceState) {
}

      @Override
      public void onSharedPreferenceChanged(SharedPreferences sp, String key) {
    }
} 
```

但是把它分成不同的类不是更好吗？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:52:32.077

你可以有一个`PreferenceChangeListener`which implements`OnSharedPreferenceChangeListener`并且你的 Preference 类将有一个`PrefernceChangeListener`

```
public class Preference extends PreferenceActivity {

   private PrefernceChangeListener prefernceChangeListener;

   public void addPreferenceChangeListener(PrefernceChangeListener prefernceChangeListener){
     this.prefernceChangeListener = prefernceChangeListener;
   }

   public PrefernceChangeListener getPrefernceChangeListener(){
     return this.prefernceChangeListener;
   }    
} 
```

一般来说，如果您的类具有可以外部化的属性，您应该尝试使用**HAS A**关系，当您的类在继承值之上提供功能时，您将使用**IS A关系。**

大多数情况**IS A**可以避免，除非你的类没有继承的意义没有继承支持**HAS A**而不是**IS A**关系。

[更喜欢组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)

# java - 应用重新安装后的 Android c2dm 推送通知

> ID：10716542
> 
> 赞同：2
> 
> 时间：2012-05-23T08:49:29.937
> 
> 标签：java, android, push-notification, android-c2dm, reinstall

我有以下问题：

我已经在我的应用程序中成功实现了 C2DM。我正在注册谷歌 c2dm 云和“创建”通知内容的自定义服务器。一切正常。我的问题是：当我卸载我的应用程序然后在同一台设备上重新安装它时会发生什么？我注意到 C2DM 将相同的 app_key 发回给我，因此显然无法确定我的应用安装状态更改。而且我不断收到旧的推送通知（它们是由应用程序中的用户偏好定制的）。在最终版本之前，我将无法使用 google play 发布的应用程序进行测试，所以我想知道 google 本身是否有可能通知 c2dm 该应用程序已在我的设备上卸载并强制它更改我的 app_id下次重启。

在此先感谢斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:55:15.960

根据我对 C2DM 的了解，您不应该单独依赖 Google 的注册 ID。他们什么都不“承诺”——你甚至可能在没有明确原因的情况下获得一个新的注册 ID（可能是他们自己的 vrsion 升级等）。
如果您想跟随安装 - 您应该使用自己的服务器进行安装 - 每当应用程序要求注册时创建一个唯一标识符，并使用它而不是 Google 的注册 ID。
关于 Google Play - 找不到已发布的应用程序和未发布的应用程序之间的区别 - 行为似乎是相同的。
希望这会有所帮助。
书树

# objective-c - 如何使用目标 C 提取相关字符串？

> ID：10716546
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:49:41.137
> 
> 标签：objective-c, nsstring

例如，我得到了这样的格式：

`link://thisIsAction?param1=value1&param2=value2`

它可能有一个这样的参数

`link://thisIsAction?param1=value1`

或者没有任何参数：

`link://thisIsAction`

我怎样才能提取`thisIsAction`, 和`param`, 和`value`？`param`可能不以前缀开头，`param`它可能只是简单的 as `p`。

我希望在字典中返回参数和值......我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:55:06.143

将字符串转换为 NSURL，然后使用 API 提取它的不同部分，包括查询字符串参数。

你可以让主机使用

```
NSURL *url = [NSURL URLWithString:yourUrlString]; 
NSString *scheme = [url scheme]; // gives "link" 
NSString *host = [url host];  // gives thisIsAction in your example
NSString *query = [url query]; // gives "param=value1&param=value2" 
```

[关于它的文档here](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

正如@Rene 所指出的，要在字典中获取查询值，请遵循[Parse NSURL 查询参数的最佳答案](https://stackoverflow.com/questions/3997976/parse-nsurl-query-property)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:56:53.317

还有另一个问题，如果您先将其转换为 NSURL，您可以在哪里找到答案。 [解析 NSURL 查询属性](https://stackoverflow.com/questions/3997976/parse-nsurl-query-property)

# ruby-on-rails-3 - Rails3：嵌套表单不保存，因为 id

> ID：10716547
> 
> 赞同：3
> 
> 时间：2012-05-23T08:49:43.057
> 
> 标签：ruby-on-rails-3, forms, validation, nested-forms, nested-attributes

两个模型（步骤包含“accepts_nested_attributes_for”）：

```
class Step < ActiveRecord::Base

  has_many :statements  
  accepts_nested_attributes_for :statements

end

class Statement < ActiveRecord::Base

  belongs_to :step

end 
```

步骤控制器，新方法（使用@step.statements.build）并创建：

```
def new
    @step = Step.new
    @step.statements.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @step }
    end
  end

def create
        @step = Step.new(params[:step])

        respond_to do |format|
          if @step.save
            format.html { redirect_to @step, notice: 'Step was successfully created.' }
            format.json { render json: @step, status: :created, location: @step }
          else
            format.html { render action: "new" }
            format.json { render json: @step.errors, status: :unprocessable_entity }
          end
        end
      end 
```

以及带有 form_fields for statements 的 New 视图中的嵌套表单：

```
<%= form_for(@step) do |step_form| %>

   <div class="field">
    <%= step_form.label :step_type %><br />
    <%= select("step", "step_type_id", @step_types.collect {|p| [ p.name, p.id ] }, {:include_blank => true}) %>
  </div>

  <%= step_form.fields_for :statements do |statement_form| %>

  <div class="field">
    <%= statement_form.label :title %><br />
    <%= statement_form.text_field :title %>
  </div>

  <% end %>

  <div class="actions">
    <%= step_form.submit %>
  </div>
<% end %> 
```

提交模型时不要保存，因为：“语句步骤不能为空”（步骤应在...之前创建）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-23T15:48:29.987

您可以使用 inverse_of 来完成这项工作，同时保留验证：

```
class Step < ActiveRecord::Base
  has_many :statements, inverse_of: :step
  accepts_nested_attributes_for :statements
end

class Statement < ActiveRecord::Base
  belongs_to :step, inverse_of: :statements
  validates :step, presence: true
end 
```

# ios - 用于登录的 facebook 对话框 ios

> ID：10716548
> 
> 赞同：0
> 
> 时间：2012-05-23T08:49:44.670
> 
> 标签：ios, facebook

我遵循了适用于 iOS 的 Facebook SDK（Hackbook）的示例，它运行良好，但是每当用户登录应用程序时，都会将该用户带到 Safari 或 Facebook 应用程序（如果您已将其安装在设备上）。有没有办法可以在不离开应用程序的情况下调用权限。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:18:51.260

曾经有过。但是 facebooks 说您应该在官方 facebook 应用程序中使用 SSO（单点登录）。因此，即使您修改了 facebook-ios-sdk 的文件，它也可能无法正常工作。

# c# - 编组一个 C# 结构的数组并在 COM 中使用它-什么是正确的编组属性

> ID：10716555
> 
> 赞同：3
> 
> 时间：2012-05-23T08:50:10.173
> 
> 标签：c#, .net, com, interop, marshalling

我几乎一周都面临以下问题：我有一个需要发送到 COM 应用程序的 c# 结构数组。但是当我调用 COM 方法时，我得到以下信息

> 错误：发生 System.Runtime.InteropServices.MarshalDirectiveException'
> 
> 附加信息：无法封送“参数 #5”：托管/非托管类型组合无效（Int/UInt 必须与 SysInt 或 SysUInt 配对）。

IDL 文件使用 C# 接口扩展/派生。

这是 IDL 中定义的方法：

```
[helpstring("Method MyCallbackMehtod")]
    HRESULT MyRequestFinished(
        [in] long    callId,
        [in] unsigned int nrElemArray1,
        [in, size_is(nrElemArray1)] MyStruct ElemArray1[],
        [in] unsigned int nrElemArray2,
        [in, size_is(nrElemArray2)] MyStruct ElemArray2[]
); 
```

C#接口：

```
 [ComImport, Guid("xxxxxxxx-xxxx-xxxx-xxx-xxxxxxxxxx")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IMyInterface
    {

        void MyRequestFinished(
            [In] 
            long callId,

            [In] 
            uint nrElemArray1,

            [In,MarshalAs(UnmanagedType.LPArray,SizeParamIndex=1)] 
            IntPtr ElemArray1,

            [In]
            uint nrElemArray2,

            [In, MarshalAs(UnmanagedType.LPArray,SizeParamIndex = 3)]  
            IntPtr ElemArray2);
} 
```

MyStruct 的定义是：

```
[StructLayout(LayoutKind.Sequential,Pack=1)]
    public struct MyStruct
    {
        public double setValue;
        public double actualValue;
        [MarshalAs(UnmanagedType.I4)]
        public MyEnum myResult;
    }

    [ComVisible(true)]
    public enum MyEnum 
    {
        Val1,

        Val2,

        Val3
    } 
```

调用 COM 方法的代码片段：

```
IntPtr pMyElemArray1  = IntPtr.Zero;
IntPtr pMyElemArray2 = IntPtr.Zero;

MyStruct[] MyElemArray1= GetArray1();
MyStruct[] MyElemArray2= GetArray2();

int lengthElemArray1= MyElemArray1.Length;
int lengthElemArray2= MyElemArray2.Length;

pMyElemArray1 = Marshal.AllocCoTaskMem(Marshal.SizeOf(MyElemArray1[0]) * lengthElemArray1);
pMyElem2 = Marshal.AllocCoTaskMem(Marshal.SizeOf(MyElemArray2[0]) * lengthElemArray2);

int rundef = (int)pMyElemArray1 ;
for (int i = 0; i < lengthElemArray1; i++)
{
     Marshal.StructureToPtr(MyElemArray1 [i], (IntPtr)rundef, false);
     rundef += Marshal.SizeOf(MyElemArray1[i]);
}

rundef = (int)pMyElemArray2;
for (int i = 0; i < lengthElemArray2; i++)
{
    Marshal.StructureToPtr(MyElemArray2[i], (IntPtr)rundef, false);
    rundef += Marshal.SizeOf(MyElemArray2[i]);
}

// Notify COM component
//here i get the error
  myComObject.MyRequestFinished(callId,
                       ((uint)lengthElemArray1),
                       pMyElemArray1,
                       ((uint)lengthElemArray2),
                       pMyElemArray2);
//....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T11:14:18.660

`LPArray`不适用于 type 的参数`IntPtr`。尝试将参数类型更改为数组或删除`MarshalAs`属性。

```
void MyRequestFinished(
    [In]
    long callId,

    [In]
    uint nrElemArray1,

    [In, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)]
    MyStruct[] ElemArray1,

    [In]
    uint nrElemArray2,

    [In]  
    IntPtr ElemArray2);
} 
```

就个人而言，我更喜欢传入一个数组而不是 IntPtr，因为它会在调用站点产生更简单的逻辑。

# c# - Windows资源管理器中的单独文件名字符串？

> ID：10716556
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:50:11.403
> 
> 标签：c#, .net, file, io

注意：我已将标签编辑为 C# 和 .NET。

![在此处输入图像描述](../Images/e0e15ae2fcf1a47c241ed0f585404144.png)

您可以在我的上图中看到，我的 2009 文件夹中有 .pdf 文件，现在我的任务是获取之前的字符串`_`是我的 id，字符串是文件名，之后`.`是扩展名。

这些都是我的Windows资源管理器中2009文件夹下的文件名。

在 sql 中，我想创建一个包含三列的表，其中包含第一个文件名。

```
1-AXJUHC_65927302.pdf 
```

在sql中我需要

```
id             filename                   fileextension

1-AXJUHC       1-AXJUHC_65927302.pdf         pdf 
```

所有文件名的这种方式。

如果有人只是建议我如何使用 bash 或任何其他工具在 Windows 级别提取上述字段，然后将此 id、filname、fileextension 写入文本文件，那么我可以将其插入 sql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:11:01.900

使用 C# [http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)中的 FileInfo 类获取完整的文件名和扩展名。

```
FileInfo file = new FileInfo(@"path");<br/>
string sFileName = file.Name;<br/>
string sExtension = file.Extension; 
```

并为您的 id 获取第一部分，使用类似的东西

```
srting [] sFilename = sFileName.Split('_');
string sId = sFilename[0]; 
```

编辑：

要获取目录中的所有文件：

```
Foreach(string path in Directory.GetFiles(@"Some_Path_Here"))<br/>
{`enter the code mentioned above here`} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:00:35.603

```
foreach ( string filePath in System.IO.Directory.EnumerateFiles ( pathOfDirectory ) )
{
    string filename = System.IO.Path.GetFileName ( filePath );
    string id = filename.Substring ( 0 , filename.IndexOf ( '_' ) );
    string extension = filename.Substring ( filename.LastIndexOf ( '.' ) + 1 );
} 
```

您可以按照 MrGTgo 的建议使用 FileInfo 类，但这会读取比您需要的更多的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:29:34.783

你可以这样做：

根据需要获取`Path`文件 [Let it be `filepath`] ：

然后你可以使用：

```
using System.IO;

string filename = Path.GetFileName(filepath); // returns "1-AXJUHC_65927302.pdf"
string id = Path.GetFileNameWithoutExtension(filename.Replace(".", "~").Replace("_", ".")).Replace("~", "."); // for "1-AXJUHC_65927302.pdf", returns "1-AXJUHC"
string fileextension = Path.GetExtension(filename).Substring(1);// returns "pdf" 
```

# joomla - 如何在 2.04 购物车模块中添加从购物车中删除按钮

> ID：10716557
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:50:18.190
> 
> 标签：joomla, virtuemart

我正在为 JOOMLA 2.5.1 使用 Virtuemart 2.04 购物车模块。

我想在每个产品的购物车模块中添加从购物车中删除按钮。

所以任何人都可以给出想法在我的购物车模块中添加这个功能..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:01:02.060

如果我没听错，您想删除产品列表视图中的添加到购物车按钮。（但在详细视图中时请保留它）因此，您必须先进入 mercurialmart 管理，然后进行配置，然后单击“站点”选项卡，然后在名为“布局”的右侧列中单击“选择主题”下的配置你的商店”，最后勾选“在产品列表上显示添加到购物车按钮？”

希望这可以帮助

# android - Android 和返回按钮

> ID：10716559
> 
> 赞同：0
> 
> 时间：2012-05-23T08:50:23.683
> 
> 标签：android

我的后退按钮有问题。他不工作。当我从第一个活动转到第二个，从第二个到第三个返回按钮时不想工作。我用了 ：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        Log.v("Co1s", "Cos1");
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

但是当我按下按钮时，我只得到：

> 05-23 10:45:57.863: W/KeyCharacterMap(238): 无法打开 keycharmap 文件 05-23 10:45:57.863: W/KeyCharacterMap(238): 加载 keycharmap 文件时出错'/system/usr/keychars/ pm8058-keypad.kcm.bin'。hw.keyboards.0.devname='pm8058-keypad' 05-23 10:45:57.863：W/KeyCharacterMap(238)：使用默认键盘映射：/system/usr/keychars/qwerty.kcm.bin

并且此功能中的此日志未显示在日志中。为什么？

编辑：acrivity nr1：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.services_description);

        back_button = (Button) findViewById(R.id.service_back_button);
        back_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                intent = new Intent(services_description.this, service.class);
                TabActivityGroup parentActivity = (TabActivityGroup)getParent();
                parentActivity.startChildActivity("menu_activity", intent);     
                finish();
            }
        });
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.v("Co1s", "Cos1");
        }
        return super.onKeyDown(keyCode, event);
    } 
```

第二：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.service);

    title = (TextView) findViewById(R.id.serviceTitle);
    description = (TextView) findViewById(R.id.serviceDescription);
    nextPage = (ImageView) findViewById(R.id.serviceNextPage);
    back_button = (Button) findViewById(R.id.service_back_button);

    nextPage.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            intent = new Intent(service.this, services_description.class);
            TabActivityGroup parentActivity = (TabActivityGroup)getParent();
            parentActivity.startChildActivity("menu_activity", intent);     

        }
    });
    back_button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            finish();

        }
    });
}
@Override
public void onBackPressed() {
    Log.v("Cos", "Cos");
    finish();
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        Log.v("Co1s", "Cos1");
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:16:12.460

您可以通过方法覆盖后退按钮，`onBackPressed()`也可以`intent`在此方法中移动应用程序中的任何活动。您可以从[onKeyDown() 或 onBackPressed()](https://stackoverflow.com/questions/9566315/onkeydown-or-onbackpressed/9566455#9566455)这个链接获得更多信息。这将为您提供我们如何做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:53:10.610

你不应该做任何事情来让后退按钮工作。只需删除整个块`if (keyCode == KeyEvent.KEYCODE_BACK)`等，你应该一切都好。

如果您出于某种原因需要在单击后退按钮时记录，我*认为*您可以这样做：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Log.v("Co1s", "Cos1");
    }
    return super.onKeyDown(keyCode, event);
} 
```

重要的是您将单击按钮的“处理”传递给被覆盖的方法，并让 Android 操作系统本身处理返回到上一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:08:54.673

您可以[`onBackPressed()`](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)在活动中覆盖而不是覆盖`onKeyDown()`

# android - Android中网格视图中的图像顺序

> ID：10716570
> 
> 赞同：0
> 
> 时间：2012-05-23T08:51:24.730
> 
> 标签：android, android-imageview, image-gallery, android-gallery, android-gridview

我有一个 android 应用程序，其中有一个网格视图库。在此网格视图中，当用户单击图像时，我将全屏显示图像。它工作得很好。但问题是网格视图在第一次出现在屏幕上时正确显示图像，但是当用户向下滚动以查看更多图像时，顺序会随机变化。这是我下面的适配器代码，您可以查看图片。

```
 public class GridGallery extends BaseAdapter {

    Context context;

    public GridGallery(Context context) {
        this.context = context;
    }

    @Override
    public int getCount() {
        return urlList.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        System.gc();

        ImageView view;

        if(convertView == null) {

            view = new ImageView(context);

            view.setScaleType(ImageView.ScaleType.FIT_CENTER);
            view.setLayoutParams(new GridView.LayoutParams(screenWidth/4, screenHeight/4));
            view.setAdjustViewBounds(false);
            view.setPadding(2, 2, 2, 2);

            imageLoader.DisplayImage(urlList.get(position), view);

            System.gc();

        }else {
            view = (ImageView) convertView;
        }

        System.gc();

        return view;
    }

} 
```

在这里我如何设置下面的适配器，

```
GridView g = (GridView) findViewById(R.id.myGrid);
        g.setAdapter(new GridGallery(context));

        isGalleryVisible = false;

        g.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

                myPagerAdapter = new MyPagerAdapter(context);
                pager = (ViewPager) findViewById(R.id.gallery_view);
                pager.setAdapter(myPagerAdapter);
                pager.setCurrentItem(position);

                isGalleryVisible = true;

            }
        }); 
```

这是我的屏幕截图，当我滚动它时它会重复。每次我向下滚动并返回顶部时，他们的位置都会随机变化。

任何帮助将不胜感激。提前致谢。

![](../Images/64e2590cf48061184f9585860ade8264.png)

![](../Images/92446f0c7711fe6fa71b0bcf92b2553b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:19:07.037

是的，我现在也遇到了同样的问题。我也在使用 Fedor 的延迟加载概念。我不确定这会有多大帮助以及这是否是正确的方法。但它仍然为我解决了问题。

我不得不在**getView() 中做一些修改，**

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        System.gc();

        ImageView view;

        if(convertView == null) {

            view = new ImageView(context);

            view.setScaleType(ImageView.ScaleType.FIT_CENTER);
            view.setLayoutParams(new GridView.LayoutParams(screenWidth/4, screenHeight/4));
            view.setAdjustViewBounds(false);
            view.setPadding(2, 2, 2, 2);

            System.gc();

        }else {
            view = (ImageView) convertView;
        }
          if(view!=null)
            {
                   imageLoader.DisplayImage(urlList.get(position), view);
                   notifyDataSetChanged();  //Calling this helped to solve the problem. 
            }

        System.gc();

        return view;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T07:34:04.587

我刚刚删除了

if(convertView==null) 它有效

# android - 执行选项卡切换时避免重新创建相同的视图

> ID：10716571
> 
> 赞同：31
> 
> 时间：2012-05-23T08:51:43.323
> 
> 标签：android

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-11T10:57:36.550

我遇到了同样的问题，并尝试按照错误消息中的建议进行操作。我尝试了以下代码，它对我有用。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle state)  {
     if (mMyView == null) {
         mMyView = new MyView(getActivity());
     } else {
         ((ViewGroup) mMyView.getParent()).removeView(mMyView);
     }

     return mPuzzleView; 
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-12T16:13:07.770

几个小时前，我开始为此寻找一个简单的解决方案，最后偶然发现[了@roger 的答案，](https://stackoverflow.com/a/11914078/1256219)这为我节省了很多头发......

在其他实现中使用 ViewPager 时，我可以简单地调用：

```
mViewPager.setOffscreenPageLimit(//number of pages to cache); 
```

所以，我很惊讶我花了这么多时间来解决这个问题。他给出的例子并不完全清楚，所以为了完整起见，这是我在 FragmentTabHost 中用于片段的[代码](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentExample extends Fragment {

    private View rootView;

    public FragmentExample() {
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {

        if (rootView == null) {

            rootView = inflater.inflate(R.layout.fragment_example_layout, container, false);

            // Initialise your layout here

        } else {
            ((ViewGroup) rootView.getParent()).removeView(rootView);
        }

        return rootView;
    }
} 
```

我搜索了我在这里添加的以下关键短语，希望我可以从我刚刚经历的挫折中拯救其他人！

* * *

FragmentTabHost 保存 Fragment 状态

重新创建 FragmentTabHost 视图

FragmentTabHost 缓存片段

FragmentTabHost onCreateView 片段被破坏

* * *

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-18T21:46:21.043

以下解决方案对我有用。它可以防止在切换选项卡时调用 Fragment 的 onCreateView。

活动的 onCreate 应该添加所有片段并隐藏除第一个选项卡之外的所有片段：

```
ft.add(R.id.fragment_content, secondTabFragment);
ft.hide(secondTabFragment);
ft.add(R.id.fragment_content, firstTabFragment);
ft.show(firstTabFragment);
ft.commit();
currentFragment = firstTabFragment; 
```

Activity 的 onTabSelected 应该只是隐藏当前片段并显示与所选选项卡对应的片段。

```
ft.hide(currentFragment);
ft.show(chosenFragment);
ft.commit();
currentFragment = chosenFragment; 
```

请注意，更改设备方向将重新启动您的活动，然后重新创建您的片段。您可以通过在清单中添加此 configChanges 来避免这种情况：

```
<activity android:configChanges="keyboardHidden|orientation" ... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-02T23:15:16.790

```
View mMyView = null;     
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle state)  {
         if (state == null) {
             mMyView = new MyView(getActivity());
         } else {
             container.removeView(mMyView);
         }

         return mMyView; 
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T15:28:04.053

## 更新

`ViewPager`我只是通过使用而不是`ActionBar`选项卡来避免这个问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-31T11:35:31.680

我遇到了同样的问题，但我所做的是，在 ActionBar.TabListener 的回调中附加或分离片段之前，调用

```
fragmentManager.executePendingTransactions(); 
```

这为我解决了问题

```
@Override
public void onTabelected(Tab tab, FragmentTransaction ft, FragmentManager fm) {
    fm.executePendingTransactions(); // **execute the pending transactions before adding another fragment.
    if (mFragment == null) {
        mFragment = Fragment.instantiate(mContext, mFragmentName);
        ft.replace(android.R.id.tabcontent, mFragment, mTag);
    } else {
        ft.attach(mFragment);
    }
} 
```

# asp.net - 企业库类库 App.Config

> ID：10716573
> 
> 赞同：1
> 
> 时间：2012-05-23T08:51:49.083
> 
> 标签：asp.net, app-config, enterprise-library

我有一个类库，它是 Enterprise Library Logging Application Block 的 Wrapper 类。我在那里保存了一个 App.Config 配置文件。存在所有企业库相关配置的位置。

现在我在 ASP.NET Web 应用程序中引用了这个类库。我遇到的问题是：ASP.NET Web 应用程序无法读取 App.Config 文件以获取配置信息。而且我得到以下异常：

![在此处输入图像描述](../Images/73a2b14cf7ede17e3542a12a6604cafe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:12:53.087

配置文件是每个 appdomain，而不是每个二进制文件。如果您有一个 .exe，它会查找 .config，在 Web 应用程序中，它会查找 web.config。您可以使用一些技巧，但它们都涉及在主配置文件中放置*一些东西*- 大多数情况下您都无法避免它。

最简单的做法是将信息放入 web.config 文件中。还有一些其他选择，但它们变得越来越复杂。您使用的是哪个版本的 Entlib？如果使用 5.0，则有编程配置支持（配置生成器的东西），这使得通过代码设置 entlib 设置相当容易 - 如果配置实际上是固定的，您可以在库中使用这些设置。

尽管您提到您正在包装日志记录块，但屏幕截图显示了异常块。您的主应用程序是否也将使用 Entlib，还是仅通过您的包装器？

# c++ - 如何使用 ImageMagick 使用自定义量化表将 PNM 文件压缩为 JPEG

> ID：10716574
> 
> 赞同：0
> 
> 时间：2012-05-23T08:51:55.287
> 
> 标签：c++, imagemagick

如何使用 ImageMagick 使用自定义量化表将 PNM 文件压缩为 JPEG

我可以用 C++ 编程做到这一点吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:30:23.150

多么巧合：[http ://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20414](http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20414)

哎呀，这可能是你？

# datetime - 比较 Groovy 日期忽略天数

> ID：10716580
> 
> 赞同：1
> 
> 时间：2012-05-23T08:52:22.530
> 
> 标签：datetime, groovy

如何在 Groovy 中忽略日期比较日期？像这样：***MM-yyyy_1 > MM-yyyy_2***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:00:03.373

你可以这样做：

```
int compareIgnoringDays( Date a, Date b ) {
  new Date( a.time ).with { newa ->
    new Date( b.time ).with { newb ->
      newa.set( date:1 )
      newb.set( date:1 )
      newa.compareTo( newb )
    }
  }
} 
```

您可以像这样测试：

```
Date a = Date.parse( 'yyyy/MM/dd', '2012/05/23' )
Date b = Date.parse( 'yyyy/MM/dd', '2012/05/24' )
Date c = Date.parse( 'yyyy/MM/dd', '2012/06/01' )

assert compareIgnoringDays( a, b ) == 0
assert compareIgnoringDays( b, a ) == 0
assert compareIgnoringDays( a, c ) == -1
assert compareIgnoringDays( c, a ) == 1 
```

编写相同功能的另一种方法是：

```
int compareIgnoringDays( Date a, Date b ) {
  [ a, b ].collect { new Date( it.time ) }   // Clone original dates
          .collect { it.set( date:1 ) ; it } // Set clones to 1st of the month
          .with { newa, newb ->
            newa.compareTo( newb )           // Compare them (this gets returned)
          }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:02:50.427

您可以像这样比较两个日期：

```
def myFormat = 'MM/dd/yyyy'
if(Date.parse(myFormat, '02/03/2012') >= Date.parse(myFormat, '03/02/2012))
{...} 
```

# asp.net-mvc - URL 包含“&”返回内部服务器错误

> ID：10716582
> 
> 赞同：2
> 
> 时间：2012-05-23T08:52:28.140
> 
> 标签：asp.net-mvc, url, iis-7

[http://staging.syncfusion.com/downloads/Support/DirectTrac/88838/Linq2&sql_9d7a1858.zip](http://staging.syncfusion.com/downloads/Support/DirectTrac/88838/Linq2&sql_9d7a1858.zip)这是返回内部服务器错误的链接。

因为“Linq2&sql_9d7a1858.zip”包含 & 它返回错误。当尝试在 localhost 中运行它时，我在 global.aspx 的 Application_Error 中收到异常“从客户端 (&) 检测到潜在危险的 Request.Path 值”，然后将调用正确的操作并下载文件。我正在使用 .Net 4.0 框架。我试图将验证输入 false 放在 webconfig 本身和操作之上，但都失败了。

任何人都可以为此提供解决方案吗？

谢谢，

卡尔提克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:01:18.713

您可以从无效字符列表中排除该`&`字符（`<`, `>`, `*`, `%`, `:`, `&`, `\`）：

```
<httpRuntime 
    requestPathInvalidCharacters="&lt;,&gt;,*,%,:,\" 
/> 
```

# php - pear DB 错误：在 windows 7 apache 服务器中找不到扩展名 sql server

> ID：10716590
> 
> 赞同：0
> 
> 时间：2012-05-23T08:53:01.027
> 
> 标签：php, sql, sql-server-2008-r2, database-connection, pear

pear DB 错误：在 windows 7 apache 服务器中找不到扩展名 sql server

大家好，我在将 sql server 与 pear DB 连接时遇到了一些问题。

以下是我已经吃过的梨。

1.  Archive_Tar 1.3.10 稳定版
2.  Console_Getopt 1.3.1 稳定版
3.  DB 1.7.14 稳定版
4.  HTTP_Request 1.4.4 稳定版
5.  MDB2 2.5.0b3 测试版
6.  MDB2_Driver_mysql 1.5.0b3 测试版
7.  MDB2_Driver_mysqli 1.5.0b3 测试版
8.  MDB2_Driver_sqlsrv 1.5.0b3 测试版
9.  Net_Socket 1.0.10 稳定版
10.  Net_URL 1.0.15 稳定版
11.  PEAR 1.9.4 稳定版
12.  SOAP 0.12.0 测试版
13.  Structures_Graph 1.0.4 稳定版
14.  XML_Util 1.2.1 稳定版

在 php 中我已经包含扩展名 **php_sqlsrv_53_ts_vc9.dll**

在 php.ini 我已经包含了 dll

**extension=php_sqlsrv_53_ts_vc9.dll我在**[http://download.microsoft.com/download/C/D/B/CDB0A3BB-600E-42ED-8D5E-E4630C905371/SQLSRV20.EXE](http://download.microsoft.com/download/C/D/B/CDB0A3BB-600E-42ED-8D5E-E4630C905371/SQLSRV20.EXE) 下载 dll

以下是 php 代码 tp 连接数据库。

```
<?php
/**
 * PEAR
 */

require_once 'DB.php';
$DB = new DB();
$DBIn = $DB->connect($CONF['db'], true);

?> 
```

我收到错误 DB**错误：找不到扩展**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:59:24.937

用于`phpinfo();`确保确实加载了扩展。更改后您可能忘记重新启动 Web 服务器软件`php.ini`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T08:00:03.613

我知道自问题/答案以来已经有很长时间了……但仍然如此。我也遇到了这个问题，**DB Error: extension not found**，它发生在我使用 PHP 7.x 的新 Centos 8 上。和一个旧的遗留 PHP 应用程序，其中 PEAR 包是用户。最终，我发现缺少 PHP 模块 mysqli 和 mysqldn。所以首先，检查安装的模块，运行：

```
php -m 
```

而且，如果缺少 mysql 的东西：

```
apt-get install php-mysqlnd 
```

或者

```
yum install php-mysqlnd 
```

另外提醒一下...在我的情况下，我还缺少 php-json 和 php-mbstring，因此请务必对所有缺少的模块重复上述步骤。

此外，安装后，重新启动您的 apache/httpd：

```
service apache2 restart 
```

或者

```
systemctl restart httpd 
```

BR

# mysql - IF 语句问题：MySQL

> ID：10716591
> 
> 赞同：0
> 
> 时间：2012-05-23T08:53:06.853
> 
> 标签：mysql, if-statement, insert

我有一张桌子叫`contact`

我在表中有一个字段标记为`name`，还有一个字段标记为`email`。

我`Ryan`在名称字段中有一行值和一个空白电子邮件字段。

我想运行一个 if 语句，以便它将电子邮件`info@ryanmurphy.org.uk`插入到`email field`if`name`匹配项中`Ryan`。

如果它没有找到匹配项，那么我希望它插入该行。

到目前为止，我已经尝试过：

```
 IF name = 'Ryan'
 THEN INSERT INTO contact (email) VALUES ('info@ryanmurphy.org.uk') 
 ELSE
 INSERT INTO contact (name, email) VALUES ('Ryan', 'info@ryanmurphy.org.uk')
 END IF; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:56:46.640

我可能真的错了，但下面的代码不起作用吗？

```
UPDATE contact SET email='info@ryanmurphy.org.uk' WHERE name='Ryan'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:19:36.787

如果名称列是主键，您可以使用替换命令

```
REPLACE INTO contact (name, email) VALUES ('Ryan', 'info@ryanmurphy.org.uk') 
```

在我看来，您的表中应该有键或唯一字段。例如，如果 name 是唯一字段，您可以使用类似这样的内容

```
INSERT INTO contact (name, email) VALUES ('Ryan', 'info@ryanmurphy.org.uk') ON DUPLICATE KEY UPDATE email = "info@ryanmurphy.org.uk" 
```

你能改变你的表模式吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:00:29.713

解决方案是将问题中的查询放入存储过程

# c# - 尽管有 WS_EX_COMPOSIET 标志和 DoubleBuffered 属性，但在调整大小后闪烁

> ID：10716592
> 
> 赞同：2
> 
> 时间：2012-05-23T08:53:07.207
> 
> 标签：c#, .net, winforms, flicker, aero

我有一个 TableLayoutPanel，我在其中使用布局内的控件执行一些拖放操作。不幸的是，控件在放置动作后闪烁。我在所有控件和许多其他东西上都尝试了 DoubleBuffered=true。我也尝试了这个解决方案：[如何修复用户控件中的闪烁](https://stackoverflow.com/questions/2612487/how-to-fix-the-flickering-in-user-controls)。实际上它与上面提到的 CreateParams 配合得很好。但直到我调整表格大小。调整大小后，Windows 似乎忘记了 WS_EX_COMPOSIET 标志。它仅以航空主题出现。如果没有 aero，它会在调整大小后保留 CreateParams 的设置。

开启aero主题时有什么办法可以防止闪烁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:27:28.817

on the the form resize Events (onResizeBegin & on ResizeEnd) use the following code :

```
protected override void OnResizeBegin(EventArgs e) 
 {
    SuspendLayout();
    base.OnResizeBegin(e);
 }

protected override void OnResizeEnd(EventArgs e) 
 {
    ResumeLayout();
    base.OnResizeEnd(e);
 } 
```

# php - 单击搜索按钮后如何显示搜索详细信息？

> ID：10716593
> 
> 赞同：-1
> 
> 时间：2012-05-23T08:53:09.457
> 
> 标签：php, javascript, ajax, dom, button

我有一个模式窗口，其中包含一个文本框和一个搜索按钮。现在我想要的是，当用户输入一个单词然后单击“搜索”按钮时，我希望它运行查询并显示结果，无论是否有结果。

问题是我不知道如何让“搜索”按钮在点击后输出必要的详细信息。目前，如果用户在输入单词后单击“搜索”按钮，则不会发生任何事情。

所以我只想要一个与“搜索”按钮关联的普通功能，以便在单击搜索按钮后输出详细信息。如何做到这一点？

这是该[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)的链接，因此您可以查看正在发生的事情。

以下是完整代码：

```
<div class="previouslink">

<button type="button" id="close" onclick="return closewindow();">Close</button>
<h1>PREVIOUS QUESTIONS</h1>

<?php

      foreach (array('questioncontent') as $varname) {
        $questioncontent = (isset($_POST[$varname])) ? $_POST[$varname] : '';
      }

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
      <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" /></p>
      <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
      </form>

<?php

            if (isset($_POST['searchQuestion'])) {

              $questionquery = "SELECT QuestionContent FROM Question
          WHERE(QuestionContent = '".mysql_real_escape_string($questioncontent)."')";

      $questionnum = mysql_num_rows($questionresult = mysql_query($questionquery));
      ?>

     <p>
         Your Search: <?php echo "'$questioncontent'"; ?>
     </p>

      <?php
        if($questionnum ==0){
    echo "<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
    echo "<p>Sorry, No Questions were found from this Search</p>";}
    else{
        echo"<p>Number of Questions Shown from the Search: <strong>$num</strong></p>";

      $output = "";
$output .= "
    <table border='1'>
      <tr>
      <th>Question</th>
      </tr>
";
        while ($questionrow = mysql_fetch_array($questionresult)) {
$output .= "
      <tr>
      <td>{$questionrow['QuestionContent']}</td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

  }

  if (empty($questioncontent)){
    echo "Please enter in a phrase in the text box in able to search for a question";
}

}

  mysql_close();

?>

</div> 
```

更新如下：

```
<body>

                <?php

               if (isset($_POST['searchQuestion'])) {

                    echo "xxx";

                exit;

               }
?>

<form id="QandA" action="imageupload.php" method="post">

<h1>CREATING QUESTIONS AND ANSWERS</h1>

<table id="plus" align="center">
<tr>
<th>
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
</th>
</tr>
</table>

<div class="previouslink">

<button type="button" id="close" onclick="return closewindow();">Close</button>
<h1>PREVIOUS QUESTIONS</h1>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
      <p>Search: <input type="text" name="questioncontent" /></p>
      <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
      </form>

</div>

</form> 

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:00:19.010

`<form method="POST"> </form>`您应该在一个块内移动您的输入标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:31:30.633

尝试调试您在单击按钮搜索时得到的内容，使用退出查看您的查询列出的内容，

当没有表单时没有任何操作，所以点击搜索不会发生任何事情使用正确的代码格式

# javascript - 构建一个json树结构

> ID：10716595
> 
> 赞同：0
> 
> 时间：2012-05-23T08:53:10.777
> 
> 标签：javascript, jquery, json

我将通过 ajax 请求将 json 字符串传递给 servlet：

```
function add() {
    $.ajax({
    url: "pathToServlet" ,
    dataType: "text",
    data: ({
        name : 'myJsonString'
    }),
    success: function(data) {
            alert('returned!!');
    });
} 
```

为了构建这个 json 字符串，我有一个监听器，当它被触发时，它会在 string 中附加一段新的 json ：

```
var json = "";
json += "{ new json ..... }" 
```

这是建立 json String 的正确方法吗？我是否应该使用 jQuery 方法创建一个 json 对象（如果它们存在）并向其添加元素，然后将 json 对象转换为字符串而不是自己创建 json 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:56:44.487

我建议做的是构建一个*object*，然后当你准备好将它发送到服务器时，通过`JSON.stringify`.

因此，例如，您可能有一个名为的对象`data`：

```
var data = {}; 
```

...您可能会定期向其中添加属性：

```
data.foo = "bar";
data.stuff = {nifty: "stuff"}; 
```

或者也许`data`是一个数组：

```
var data = []; 
```

...你添加的东西：

```
data.push({nifty: "stuff"}); 
```

然后，当您准备好发送它时：

```
function add() {
    $.ajax({
    url: "<%=savePortlet%>" ,
    dataType: "text",
    data: {
        name : JSON.stringify(data)
    },
    success: function(data) {
            alert('returned!!');
    });
} 
```

因为您将一个对象传递给`ajax`，所以您不必担心对 JSON 字符串进行 URL 编码；jQuery 会为你做这件事。

`JSON.stringify`被定义为 ECMAScript5 的一部分并被许多浏览器原生支持，但当然我们中的许多人必须支持过时版本的浏览器。在这些情况下，您可以获得“JSON shim”以添加`JSON.stringify`到没有它的环境中。其中之一可从 JSON 的创始人 Douglas Crockford 在[他的 github 页面上获得](https://github.com/douglascrockford/JSON-js/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:21:36.650

如果使用 jQuery，您可以使用[jquery-json](http://code.google.com/p/jquery-json/)，这是一个非常方便的插件，可以使用 JavaScript 和 jQuery 处理 JSON。

用法：

```
var jsonString = $.toJSON(myObject); 
```

# android - 使用 getExternalStoragePublicDirectory 损坏 Android 文件

> ID：10716597
> 
> 赞同：0
> 
> 时间：2012-05-23T08:53:21.183
> 
> 标签：android

当我想从我的应用程序将图像保存到 Android 时，我遇到了这个奇怪的问题。图像已损坏，现在 Android 无法使用它们。我看不出我的代码有什么问题。

这是我的下载方法：

```
 public void createExternalStoragePublicPicture(String DownloadUrl, String fileName) {
    // Create a path where we will place our picture in the user's
    // public pictures directory.  Note that you should be careful about
    // what you place here, since the user often manages these files.  For
    // pictures and other media owned by the application, consider
    // Context.getExternalMediaDir().

    Log.i("Download", DownloadUrl);
    Log.i("File", fileName);

    File path = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES);
    File file = new File(path, fileName);

    try {
        // Make sure the Pictures directory exists.
        path.mkdirs();

        // Very simple code to copy a picture from the application's
        // resource into the external file.  Note that this code does
        // no error checking, and assumes the picture is small (does not
        // try to copy it in chunks).  Note that if external storage is
        // not currently mounted this will silently fail.
        URL url = new URL(DownloadUrl);
        URLConnection ucon = url.openConnection();

        InputStream is = ucon.getInputStream();
        OutputStream os = new FileOutputStream(file);
        byte[] data = new byte[is.available()];
        is.read(data);
        os.write(data);
        is.close();
        os.close();

        // Tell the media scanner about the new file so that it is
        // immediately available to the user.
        MediaScannerConnection.scanFile(this,
                new String[] { file.toString() }, null,
                new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
                Log.i("ExternalStorage", "Scanned " + path + ":");
                Log.i("ExternalStorage", "-> uri=" + uri);
            }
        });
    } catch (IOException e) {
        // Unable to create file, likely because external storage is
        // not currently mounted.
        Log.w("ExternalStorage", "Error writing " + file, e);
    }
} 
```

任何想法这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:20:59.153

可能`is.available()`不会像您期望的那样工作。通常你不应该依赖它，`available()`因为它没有严格指定它返回什么值。

请参阅[InputStream](http://developer.android.com/reference/java/io/InputStream.html#available%28%29)：“认识到您不能使用此方法来调整容器大小并假设您可以读取整个流 [...]”，这一点尤为重要

使用常见的“循环”方法：

```
int c;
while ( (c = is.read(buf)) >= 0 ) {
  os.write(buf,0,c)
} 
```

这可以确保您确实从源文件中读取*了所有字节。*

# arrays - 在 Powershell 2D 数组中查找缺失的行

> ID：10716600
> 
> 赞同：0
> 
> 时间：2012-05-23T08:53:26.240
> 
> 标签：arrays, powershell

我有 2 个数组，每个数组有 2 个字段（例如“项目”和“价格”）。

以下是我的 1 个数组的 get-member 结果（实际上两个数组具有相同的结构）

```
 TypeName: System.Management.Automation.PSCustomObject

Name        MemberType   Definition                    
----        ----------   ----------                    
Equals      Method       bool Equals(System.Object obj)
GetHashCode Method       int GetHashCode()             
GetType     Method       type GetType()                
ToString    Method       string ToString()             
item        NoteProperty System.String field1=computer 
price       NoteProperty System.String field2=2000 
```

我需要在数组 $shopA 中找到在数组 $shopB 中找不到的项目。我现在使用 2 个循环来查找丢失的项目。

```
$missing = @()
foreach ($itemA in $shopA) {
  $found = 0
  foreach ($itemB in $shopB) {
    if ($itemB.item -eq $itemA.item) {
      $found = 1
    }
  }
  if ($found = 0) {
    $missing += $itemA
  }
} 
```

这种方法对我有用，但我的 2 个数组非常大，我想要一个比循环遍历整个数组更快的方法......

我一直在寻找一种更好的方法来做到这一点，并且 compare-object 几乎可以完成这项工作，但所有示例似乎都仅适用于一维数组。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:15:54.237

从我所见，您确实有两个一维数组，尽管您声称相反。

寻找丢失物品的一种天真的方法是

```
$missing = $shopA | ? { $x = $_; !($shopB | ? {$_.item -eq $x.item})} 
```

However, this will always be O(n²); to make it quicker you can collect all items from `$shopB` in a hastable first, which makes checking for existence O(1), not O(n):

```
$hash = @{}
$shopB | %{ $hash[$_.item] = 1 }
$missing = $shopA | ?{ !$hash.ContainsKey($_.item) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:02:02.227

像这样的东西？

```
 $shopA= @(1, 2, 3, 4)
 $shopB= @(4, 3, 5, 6)
 $shopB | where { $shopA -notcontains $_  } 
```

# c# - AppDomain.CreateInstanceAndUnnrwap 有替代方案吗？

> ID：10716603
> 
> 赞同：-2
> 
> 时间：2012-05-23T08:53:39.373
> 
> 标签：c#, assemblies, appdomain

我正在尝试在特定的 AppDomain 中加载一个插件，一个加载程序集中的类，但希望避免我的插件来自 MarshalByRefObject。

`Activator.CreateInstance(t)`坠毁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:00:55.483

根据 MSDN，MarshalByRefObject “允许跨应用程序域边界访问对象”。“不从 MarshalByRefObject 继承的对象是按值隐式编组的”。并且“当跨应用程序域边界使用类型时，类型必须从 MarshalByRefObject 继承”。在我看来你被 MarshalByRefObject 困住了 - [http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:59:15.317

放弃您自制的插件系统，转而使用[托管可扩展性框架](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。

# objective-c - 在 iOS 上处理复杂配置的首选方式/设计模式

> ID：10716604
> 
> 赞同：1
> 
> 时间：2012-05-23T08:53:47.173
> 
> 标签：objective-c, ios, configuration

假设你需要对一系列不同的 Objects 进行一系列复杂的配置。这个配置可以是NSString，比如服务的服务器地址，NSNumber，比如超时时间等等。我想施加以下约束：

*   配置不得对用户可见和/或不可编辑，因此应用程序包中的 plist 不是可接受的解决方案
*   我需要为调试、AdHoc 或发布目标设置不同的配置值（我可能会通过一系列#ifdef 来实现这一点，但我是为了完整性而写的）
*   我要配置的所有对象都属于静态库，我想从使用此静态库的代码中*注入*配置（注入是斜体，作为我个人对依赖注入的提示）

我的问题是：实现这一目标的最佳方法是什么？你有没有遇到过这样的问题？你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:35:52.073

利用**Xcode 构建系统**。您可以拥有任何构建配置（调试、发布等）和目标组合的[Xcode 配置文件。](https://stackoverflow.com/a/6210437/143097)

这些文件支持继承以简化共享配置。没有单一的方法来定义选项。一个简单的方法是使用`GCC_PREPROCESSOR_DEFINITIONS`or`CFLAGS`或您的编译器将采用的任何内容。

`TargetX.xcconfig`：

```
GCC_PREPROCESSOR_DEFINITIONS = STAGE=2 SERVER_URL='www.wuonm.com' 
```

使用配置的值来构建所需的对象是相当简单`NSString`的`NSNumber`。提示：您将需要某种[字符串化](https://stackoverflow.com/a/7953958/143097)。

它与使用非常相似，但恕我直言，如果您花一些时间[了解](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/XcodeConfig/xcconfigs-readme.txt?r=523)[文件](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/XcodeConfig/?r=523#XcodeConfig/subconfig)的工作原理`#define`，它会更加简洁和结构化。`xcconfig`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:39:42.880

要求第一次使用时，存在互联网连接并通过 HTTPS 下载您的配置并将其保存在内存中（如果需要，可以加密）。

然后利用 iOS 中的钥匙串，将您的配置作为字符串存储在那里（本质上是序列化它）。

```
NSString *serializedConfig = ...;
[keychain setObject:serializedConfig  forKey@"MyConfig"]; 
```

在后续使用中，检索存储在钥匙串中的配置：

```
NSString *serializedConfig = [keychain objectForKey:@"MyConfig"]; 
```

[您可以在 Apple Docs 站点上找到钥匙串包装器和文档。](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:59:58.590

这篇文章有很多问题：

1.  为什么您的输入配置需要这种级别的保护？
2.  是您不希望用户能够修改您的配置，还是您根本不希望他们能够知道它？
3.  如果您相信 SW 无法保护 SW 的理论，那么您真的愿意让自己经历多大程度的痛苦，以便让黑客经历足够的痛苦，他们不想破解您的 SW（因为让我们面对现实吧，这就是您的全部真的会得到，请参阅我上面关于加密的评论）
4.  我有点同意从互联网上获取您的配置，但这仅适用于您希望存在互联网功能以使用您的应用程序的情况。如果您这样做并且还需要某种程度的保护，那么您将不得不使用一些安全协议（如 SSL）来下载它。
5.  如果您真的希望您的应用程序能够在本地使用（没有互联网访问权限），那么我会说您的配置的真正安全性是不可能的，因为您不控制操作系统，您不控制您的软件运行的硬件， ETC...
6.  将您的应用程序放在 iPhone 上可能意味着您希望获得相当大的下载量。这意味着触摸它并可能对其产生裂缝的手的数量也很大。在这种情况下获得安全性的唯一方法（实际上没有软件），就是让破解它的价值让你的配置不值那么多钱。如果价值低，那么没有黑客会愿意尝试破解它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:18:37.963

我在不同类中使用的服务器 URL 和常量数字（如颜色、大小和几乎任何需要轻松更改的配置）中遇到了同样的问题。我找到的最佳解决方案是创建一个像 Constants.h 这样的头文件，这个头文件的内容是：

```
#define MAX_DIST 1000
#define MIN_DIST 300
#define ANIMATION_DURATION 0.010
#define PIXEL_MOVES 7
#define SENSITIVITY 14
#define VIEW_ANGLE 30 //Range of vision divided by 2
#define RAD_POS_X 415
#define RAD_POS_Y 15
#define BUTTON_VIEW_WIDTH PIXEL_MOVES*360
#define SCREEN_HEIGHT 480
#define BUTTON_WIDTH_CLOSE 180
#define BUTTON_HEIGHT_CLOSE 100
#define BUTTON_WIDTH_MEDIUM 100
#define BUTTON_HEIGHT_MEDIUM 60
#define BUTTON_WIDTH_FAR 60
#define BUTTON_HEIGHT_FAR 40
#define BUTTON_Y_POSITION_CLOSE 200
#define BUTTON_Y_POSITION_MEDIUM 135
#define BUTTON_Y_POSITION_FAR 90
#define SERVICE_URL @"http://my.server.com/SoapServer/SoapServiceWS"// 
```

您甚至可以定义常用功能，例如

```
#define DEGREES_TO_RADIANS(__ANGLE__) ((__ANGLE__) / 180.0 * M_PI) 
```

通过这种方式，我能够从一个文件配置我的应用程序的各个方面，并且您可以像您说的那样使用#ifdef 来管理不同的编译。当然，您必须在需要访问这些常量的任何类中导入文件 Constants.h。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T15:47:07.913

您的静态库应该提供一些接口来设置将在运行时设置的当前配置。

```
SetCurrentConfiguration(Configuration config); 
```

然后“客户端”可以在运行时使用所需的配置对其进行配置。第二步是从指定的源加载配置，比如说 xml 文件并通过上面的方法将其注入静态库。

如果您不希望用户修改配置文件，您可以使用某种加密，然后即时解密。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T14:16:52.693

如果这些值对于每个构建配置都是常量，为什么不将它们作为常量放在代码中呢？如果它们是因配置而异的常量，我真的不明白为什么需要将这些设置外部化。使用在私有标头中声明的这些常量，您对设置的 ifdef 选择将同样有效（并且更快）。

如果这些设置在应用程序运行期间以某种方式发生变化（不是从构建到构建，而是在运行应用程序的单个构建的范围内），那么将这些设置外部化是合适的。

# android - 数据库未关闭游标。插入方法后关闭

> ID：10716605
> 
> 赞同：1
> 
> 时间：2012-05-23T08:53:48.607
> 
> 标签：android, database

你介意指出这种和平的代码有什么问题吗？GenresCursor 包含“应用程序没有关闭在此处打开的游标或数据库对象”异常。插入后如何真正关闭此光标？谢谢。

UPD：似乎根本没有问题。即使它包含仍然可以提取数据的异常。我在实际应用中一定是错的，这个例外让我得出结论，这就是问题所在。感谢大家的参与。

```
public class DatabaseCursorActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        HashMap<Integer, String> _dummy = new HashMap<Integer, String>();

        OpenDatabaseHelper helper = new OpenDatabaseHelper(this);
        SQLiteDatabase db = helper.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(OpenDatabaseHelper.GENRES_ID_KEY, 1);
        values.put(OpenDatabaseHelper.GENRES_TITLE_KEY, "Test");
        db.insert(OpenDatabaseHelper.GENRES_TABLE_NAME, null, values);
        db.close();
        helper.close();

        db = helper.getReadableDatabase();
        Cursor genresCursor = db.query(OpenDatabaseHelper.GENRES_TABLE_NAME, new String[]{OpenDatabaseHelper.GENRES_ID_KEY, OpenDatabaseHelper.GENRES_TITLE_KEY }, null, null, null, null, null);
        int i = genresCursor.getColumnCount();
        genresCursor.moveToFirst();
    }

    public class OpenDatabaseHelper extends SQLiteOpenHelper {

        public static final String GENRES_TABLE_NAME = "genres";
        public static final String GENRES_ID_KEY = "id";
        public static final String GENRES_TITLE_KEY = "title";

        public OpenDatabaseHelper(Context context) {
            super(context, "ttt.db", null, 1);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + GENRES_TABLE_NAME + "( id integer primary key not null, title text);" );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T17:49:42.437

使用游标和数据库的最佳实践是您应该在同一个代码块中打开和关闭它。当我用于将行插入数据库时​​，我会在开始时打开它，然后插入许多列并在返回之前将其关闭。

在 Honeycomb 之前的 API 中，您不会收到有关未关闭游标的任何日志消息和性能问题，但 Honeycomb 之前的 API 有一个 Cursor not closed 检测器，它将记录有关游标未关闭的消息。

编辑：在同一代码块中关闭数据库。光标可以根据场景关闭，但必须在上下文删除之前关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:00:31.220

您首先打开数据库，插入后关闭数据库，然后再次打开以读取值。

首先，您不需要关闭并再次打开它。您可以执行所有操作，并且可以关闭它，因为您仍在同一代码块中。

使用您的genresCursor 完成操作后，通过genresCursor.close() 关闭它，然后关闭您的db。希望它会没事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:20:34.223

我不明白您为什么插入此代码：

```
db = helper.getReadableDatabase();
Cursor genresCursor = db.query(OpenDatabaseHelper.GENRES_TABLE_NAME, new String[]{OpenDatabaseHelper.GENRES_ID_KEY, OpenDatabaseHelper.GENRES_TITLE_KEY }, null, null, null, null, null);
int i = genresCursor.getColumnCount();
genresCursor.moveToFirst(); 
```

问题出在这部分代码中。如果您只想关闭光标，请调用`genresCursor.close()`. 但从架构的角度来看，我不明白你为什么需要这段代码。

# wpf - 如何在设计时打开 WPF 菜单？

> ID：10716608
> 
> 赞同：2
> 
> 时间：2012-05-23T08:53:56.977
> 
> 标签：wpf, visual-studio-2010, styles, design-time

我正在为 WPF 中的菜单设置样式，并希望查看它的外观，而无需启动应用程序来打开菜单。

有没有办法在设计时保持菜单打开（所以我可以看到菜单项），所以我可以看到我去的变化？

我目前只有 Visual Studio 2010 可以使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:22:49.693

您可以设置 IsSubmenuOpen="True"，但如果您单击其他位置，菜单将关闭。再次设置为打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:00:37.817

进行更改后，您应该能够在设计窗口中看到更改-您使用的是VS2010 express吗？我发现当我进行样式更改时，设计师没有刷新 - 我必须关闭/重新打开表单才能看到反映的更改。您不需要构建来查看设计更改，除非您当然要添加新的用户控件等需要在设计师处理它们之前构建

# iphone - 应用程序未通过协同设计验证，iPhone

> ID：10716615
> 
> 赞同：3
> 
> 时间：2012-05-23T08:54:24.130
> 
> 标签：iphone, ios, appstore-approval, flash-cs5.5

我使用 flash CS 5.5 为 iPhone 制作了一个应用程序，在设备上对其进行了测试（在那里工作正常），我是开发计划的成员。在 iTunes 连接上填写所有信息后，我正尝试将应用程序上传到商店。但是，当我尝试通过 Application Loader（版本 2.5.2）上传 ipa 文件时，我一直遇到同样的错误：

> '应用程序代码签名验证失败。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。

我尝试再次创建证书，但仍然遇到相同的错误。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:00:55.410

这意味着您没有使用*iPhone 分发证书*，这是在应用商店上传应用所必需的。我猜您正在使用开发人员证书。

以下是如何为应用商店提交创建分发证书的链接：创建分发证书的[步骤。](http://soulwithmobiletechnology.blogspot.in/2011/03/how-to-create-distribution-build-with.html)

下次进行搜索时，您会收到很多与此主题相关的问题。例如： [应用程序未通过协同设计验证？](https://stackoverflow.com/questions/8888943/application-failed-codesign-verification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:00:23.327

再次尝试使用您的发布证书，并确保您在此处引用的用于制作证书的任何内容都应与您应用的 plist 文件相同。

请参阅此链接：[构建您的应用程序以进行分发](http://www.idev101.com/code/Distribution/build.html)

# c# - Nservicebus 不在 msmq 中存储订阅者

> ID：10716617
> 
> 赞同：4
> 
> 时间：2012-05-23T08:54:33.180
> 
> 标签：c#, wcf, msmq, nservicebus, publish-subscribe

我对 NServiceBus 相当陌生，我有一个问题。

我有一个 WCF 服务，它是我的发布者（我知道我不应该使用 wcf 发布）。我有另一个 WCF 服务作为订阅者。

我的问题是，当第二个 wcf 服务要订阅发布者时，我的发布者不会将此信息存储在 msmq 中（使用 .MsmqSubscriptionStorage() 时）。但是当发布者将订阅者存储在内存中时它会起作用（.InMemorySubscriptionStorage()）

如何强制我的总线使用 msmq？

下面我将给出发布者和订阅者的代码。

发布者总线初始化：

```
Bus = NServiceBus.Configure.WithWeb()
                .DefaultBuilder()
                .XmlSerializer()
                .MsmqTransport()
                .IsTransactional( false )
                .PurgeOnStartup( false )
                .UnicastBus()
                .LoadMessageHandlers()
                .ImpersonateSender( false )
                .MsmqSubscriptionStorage()
                .CreateBus()
                .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

发布者配置：

```
<configSections>
        <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
        <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
        <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
    </configSections>
    <MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/> 
```

订户总线初始化：

```
Bus = NServiceBus.Configure.WithWeb()
                .DefaultBuilder()
                .XmlSerializer()
                .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(false)
                .UnicastBus()
                .ImpersonateSender(false)
                .LoadMessageHandlers()
                .CreateBus()
                .Start(() => Confgure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

订阅者配置：

```
 <configSections>
        <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
        <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
        <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
    </configSections>

    <MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/>

    <UnicastBusConfig>
        <MessageEndpointMappings>
            <add Messages="Messages" Endpoint="FirstService" />
        </MessageEndpointMappings>
    </UnicastBusConfig> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:35:18.390

我发现出了什么问题。Publisher 应设置`.IsTransactional(true)`为使用 MSMQ 存储供订阅者使用。

# javascript - 我怎样才能将图像放入 ?

> ID：10716620
> 
> 赞同：3
> 
> 时间：2012-05-23T08:54:54.150
> 
> 标签：javascript, jquery, html

我正面临这个问题..我可以知道，我怎样才能将图像放入这个元素标签中，

```
<div id="item1"></div> 
```

下面这段代码的目的是，当用户点击“+”时，图像就会出现。并且当用户点击“播放”按钮时，出现的图像应该像上面提到的那样放入标签中。

不幸的是，我无法将刚刚出现的图像放入标签中。

我知道有硬编码方法，但对不起，我不是在寻找这种方法..

```
 <!DOCTYPE html>
    <html>
<head>
    <script src="code.jquery.com/jquery-1.7.2.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>   

    <style>
      .myClass {
            width: 40px; height: 40px; float:left;
           padding: 1px; margin:3px; position:absolute; 
            left:50px; top:60px; background:blue; color:white;
        }
    </style>       

</head>
<body bgcolor="green";>
    <div id="item1" class="myClass">F1</div>
    <div id="item2" class="myClass">F2</div>
    <div id="item3" class="myClass">F3</div>

    <script>
        var predator;

        var Predatorlist = [];            

        function addvalue()
        {
            Predatorlist.push(uniqueid)
            alert(Predatorlist);
        }

        function removevalue()
        {
            Predatorlist.pop(uniqueid)
            alert(x.innerHTML=Predatorlist);
        }

        //************** End of Array *********************** 
        function Add() {
            var id = Math.floor(Math.random()*101+1);
            x = Math.random() * 550;
            y = Math.random() * 250;
            if (document.getElementById('amount').value < 50){
                document.getElementById('amount').value++;
                svg = document.getElementById("main");

                var id = 'predator';
                uniqueid =  "frog" + document.getElementById('amount').value;

                //namespaces for SVG
                svgNS="http://www.w3.org/2000/svg";
                xlinkNS="http://www.w3.org/1999/xlink";

                // create a image element
               image = document.createElementNS(svgNS, 'image');

                // set id and other attributes
                image.setAttributeNS(null, "id", uniqueid);
                image.setAttributeNS(xlinkNS, "href","jef-frog.gif");
                image.setAttributeNS(null, "x", x);
                image.setAttributeNS(null, "y", y);
                image.setAttributeNS(null, "width", "50");
                image.setAttributeNS(null, "height", "50");

                // append to svg
                svg.appendChild(image);
            } else {
                alert("we got 50");
            }
        }

       function Remove() {
            if(document.getElementById('amount').value > 0)
            {         
                document.getElementById('amount').value--;
                svg = document.getElementById("main");
                svg.removeChild(svg.lastChild);
            }
        }

        function numinput(e){
            // get the input value if enter
            key=e.keyCode || e.which;
            if (key==13){
                total = document.getElementById("amount").value;
                dummy = total;

                // clear svg with image to avoid clearing the canvas
                svg = document.getElementById("main");
                element = svg.getElementsByTagName("image");
                while(element.length>0){
                    element = svg.getElementsByTagName("image");
                    element[0].parentNode.removeChild(element[0]);
                }

                // use the input to create the number of frog.
                while (dummy>0)
                {
                    Add();
                    dummy--;
                }
                document.getElementById("amount").value = total;
            }
        }     

        function randomRange(min,max) {
            return Math.random() * (max-min) + min;
        }

        /* Generate some random starting position */
        var startItem1X = randomRange(50,100);
        var startItem1Y = randomRange(50,100);
        var startItem2X = randomRange(50,100);
        var startItem2Y = randomRange(50,100);
        var startItem3X = randomRange(50,100);
        var startItem3Y = randomRange(50,100);
        var startmyClassX = randomRange(50,100);
        var startmyClassY = randomRange(50,100);

        var item1 = $("#item1"),cycle1;
        var item2 = $("#item2"),cycle1;
        var item3 = $("#item3"),cycle1;

        function runItem1() {                               
            /* Set a the starting position to be random by editing the css */
            $("#item1").css("left", startItem1X+"px");
            $("#item1").css("top", startItem1Y+"px");

          /* Cycle1 and Cycle2 variables allow infinite loop */ 
            (cycle1 = function() {
             var m = randomRange(50,100);
             var n = randomRange(75,150);
             item1.appendChild(image)
             item1.animate({left:'+='+n},2000);
             item1.animate({left:'+='+m, top:'+='+m}, 2000)
             item1.animate({left:'-='+m, top:'+='+m}, 2000)
             item1.animate({left:'-='+n},2000);
             item1.animate({top:'-='+n},2000,cycle1)

             })();
        }

        function runItem2() {
            $("#item2").css("left", startItem2X+"px");
            $("#item2").css("top", startItem2Y+"px");

            (cycle2 = function() {
             var m = randomRange(50,100);
             var n = randomRange(75,150);
             item2.animate({top:'+='+m, left:'+='+n},2000);
             item2.animate({left:'-='+n},2000);
             item2.animate({left:'+='+n, top:'-='+n},2000);
             item2.animate({left:'-='+n},2000)
             item2.animate({top:'+='+m},2000,cycle2)              
             })();
        }
        runItem1();
        runItem2();
    </script>

    <SVG xmlns="http://www.w3.org/2000/svg"

        xmlns:xlink="http://www.w3.org/1999/xlink" id="main" style="border:inset 1px #000000;width:600;height:300"><param name='wmode' value='transparent'/></SVG>

    <img src="jef-frog.gif" alt="frogsonice.com" width="100" height="100"/><BR/>

    <INPUT type="button" value="+" onClick="Add(); addvalue();"> 
    <INPUT type="text" id="amount" value=0  maxlength="3" size="1"  onkeypress="numinput(evt)">
    <INPUT type="button" value="-" onClick="Remove(); removevalue();">        
    <INPUT type="button" value="Play" onClick="runItem1(); runItem2();">  

</body>
    </html> 
```

非常感谢那里的任何人，花时间阅读并尝试提供帮助..再次感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:59:29.993

会做的。

```
$('#your-play-button').click(function(e) {

  $('#item1').html('<img src="mygif.gif" />');

}); 
```

在查看您可以替换的代码后进行编辑：

document.getElementById('amount')

通过 $("#amount") 等并真正使用 jQuery。因为现在你没有使用 jQuery 的优势，而只是在编写普通的 javascript...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:02:26.420

好吧，您可以使用 innerhtml 属性添加一个 img 标记，或者创建元素并将其附加到 div。然后根据您的逻辑，您可以将图像的标签 src 设置为所需的。

# c++ - 这个 Windows API 调用 WaitForSingleObject 有什么问题？

> ID：10716622
> 
> 赞同：3
> 
> 时间：2012-05-23T08:55:01.057
> 
> 标签：c++, windows, exception, windbg, activation-context-api

该进程在 Windows 7 中不稳定地崩溃。我使用`!analyze -v`命令 in`WinDbg`进行异常分析。它告诉以下信息。异常实际上是由`WaitForSingleObject`调用的函数抛出的`IrsSim!IrsNet_BlockOutput`。WinDbg 的异常分析告诉我这是`INVALID_POINTER_READ`错误的。

对于调用代码，`pChannel->hMutex`is not `NULL`。我已经倾倒它并检查了它的价值。

```
IRSNETRET IrsNet_BlockOutput( IRSNET    *pChannel)
{

// Check channel
    IRSNET_CHECK_CHANNEL(pChannel);

// Wait for synchronization mutex
    switch(WaitForSingleObject(pChannel->hMutex, INFINITE))
    {
...
} 
```

> <<<<<===========
> 
> FAULTING_IP: IrsSim!Channel::SendIrsMessage+285 [s:\som5\ics\scsv\isv\test.u\irssim\irsiftransport.cpp @ 539] 00520ed5 8b06 mov eax,dword ptr [esi]
> 
> EXCEPTION_RECORD: ffffffff -- (.exr 0xffffffffffffffff) ExceptionAddress: 77db4639 (ntdll!RtlDeactivateActivationContextUnsafeFast+0x00000058)
> ExceptionCode: c0150010 ExceptionFlags: 00000001 NumberParameters: 3 Parameter[0]: 00000000 Parameter[1]: 07befc58 Parameter[2]: 00000000
> 
> DEFAULT_BUCKET_ID：INVALID_POINTER_READ
> 
> PROCESS_NAME：IrsSim.exe
> 
> ERROR_CODE: (NTSTATUS) 0xc0150010 - 被停用的激活上下文对于当前执行线程不活动。
> 
> EXCEPTION_CODE: (NTSTATUS) 0xc0150010 - 被停用的激活上下文对于当前执行线程不活动。
> 
> EXCEPTION_PARAMETER1：00000000
> 
> EXCEPTION_PARAMETER2：07befc58
> 
> EXCEPTION_PARAMETER3：00000000
> 
> STACK_TEXT: 07d2fce0 00520ed5 irssim!Channel::SendIrsMessage+0x285 07d2fd1c 00521072 irssim!CChannelArray::SendIrsMessage+0x132 07d2fd50 0052208a irssim!CNetLibInterface::SendIrsMessage+0xba 07d2fd78 005c01b6 irssim!CSendActivity::Execute+0x76 07d2fdac 005e0b3f irssim!SimulationThreadState::ExecuteOneActivity +0x11f 07d2fdf8 005cc937 irssim!CSimulationSubThreadState::ExecuteState+0x267 07d2fe8c 005ccf02 irssim!ThreadFctSubSimulation+0xf2 07d2fec4 73b1e3ee mfc90u!_AfxThreadEntry+0xf2 07d2ff4c 739f3433 msvcr90!_endthreadex+0x44 07d2ff84 739f34c7 msvcr90!_endthreadex+0xd8 07d2ff90 767d339a kernel32!BaseThreadInitThunk+0xe 07d2ff9c 77d69ed2 ntdll !__RtlUserThreadStart+0x70 07d2ffdc 77d69ea5 ntdll!_RtlUserThreadStart+0x1b
> 
> =================================
> 
> 之后，我使用 !teb 命令尝试获取更多堆栈信息。
> 
> 0:011> k L=07beec2c 100 ChildEBP RetAddr 07bef54c 76be0bdd ntdll!NtWaitForMultipleObjects+0x15 07bef5e8 767d1a2c KERNELBASE!WaitForMultipleObjectsEx+0x100 07bef630 767d4208 kernel32!WaitForMultipleObjectsExImplementation+0xe0 07bef64c 767f80a4 kernel32!WaitForMultipleObjects+0x18 07bef6b8 767f7f63 kernel32!WerpReportFaultInternal+0x186 07bef6cc 767f7858 kernel32! WerpReportFault+0x70 07bef6dc 767f77d7 kernel32!BasepReportFault+0x20 07bef768 77da21d7 kernel32!UnhandledExceptionFilter+0x1af 07bef770 77da20b4 ntdll!__RtlUserThreadStart+0x62 07bef784 77da1f59 ntdll!_EH4_CallFilterFunc+0x12 07bef7ac 77d76ab9 ntdll!_except_handler4+0x8e 07bef7d0 77d76a8b ntdll!ExecuteHandler2+0x26 07bef7f4 77d76a2d ntdll!ExecuteHandler +0x24 07bef880 77d40143 ntdll!RtlDispatchException+0x127 07bef880 77db4639 ntdll!KiUserExceptionDispatcher+0xf 07befc34 76be0ad7 ntdll!RtlDeactivateActivationContextUnsafeFast+0x58 07befc38 76be0abc KERNELBASE!WaitForSingleObjectEx+0xde 07befc98 767d1194 KERNELBASE!WaitForSingleObjectEx+0xc3 07befcb0 767d1148 kernel32!WaitForSingleObjectExImplementation+0x75
> 
> 07befcc4 005e3b6e kernel32!WaitForSingleObject+0x12
> 
> 07befcd4 00520d3b IrsSim!IrsNet_BlockOutput+0x1e
> 
> 07befd14 00521072 IrsSim!Channel::SendIrsMessage+0xeb 07befd48 0052208a IrsSim!CChannelArray::SendIrsMessage+0x132 07befd70 005c01b6 IrsSim!CNetLibInterface::SendIrsMessage+0xba 07befda4 005e0b3f IrsSim!CSendActivity::Execute+0x76 07befdf0 005cc937 IrsSim!SimulationThreadState::ExecuteOneActivity+0x11f 07befe84 005ccf02 IrsSim!CSimulationSubThreadState::ExecuteState+0x267 07befebc 73b1e3ee IrsSim!ThreadFctSubSimulation+0xf2 07beff44 739f3433 mfc90u!_AfxThreadEntry+0xf2 07beff7c 739f34c7 msvcr90!_endthreadex+0x44 07beff88 767d339a msvcr90!_endthreadex+0xd8 07beff94 77d69ed2 kernel32!BaseThreadInitThunk+0xe 07beffd4 77d69ea5 ntdll!__RtlUserThreadStart +0x70 07beffec 00000000 ntdll!_RtlUserThreadStart+0x1b
> 
> =====================================>>>>>>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:57:38.927

这看起来很像 MFC 应用程序中遇到的 0xC015000f 异常（“被停用的激活上下文不是最近激活的。”）

在我遇到此异常的所有情况下，异常都不是主要问题。这是早期异常的副作用，通常是访问冲突，堆栈未正确展开。在异常处理中遗漏了使用宏（例如 AFX_MANAGE_STATE 宏）的调用帧。结果是下一次操作激活上下文时，例如通过另一个导致调用 AFX_MAINTAIN_STATE2::~AFX_MAINTAIN_STATE2 之类的程序的例程，系统检测到 cookie 不匹配并抛出异常。

在您的情况下，您可能会在一段代码中导致异常（很可能是 AV），然后由上下文异常表现出来。要捕获根本原因，请在启用第一次机会异常处理的情况下运行调试器。这样一来，可能被使用 try/catch(...) 的人在调用框架的其他地方捕获的 AV 将被暴露。由于您似乎是线程化的，因此您可能只是在内存访问上有一个竞争条件，这会导致主要异常（如果确实发生了这种情况）。

我在之前的一篇文章中看到：“其实这个问题来自于将程序从 64 位 Win XP 移植到 64 位 Win7。编译器因此从 VC6 切换到 VC9。”

这不是 MFC 中的错误。我认为，MFC 6 不包括在 Visual Studio 2005 中添加的激活上下文切换代码（基于 cookie）。所以你不会遇到这个异常。我们也认为较新的 MFC 有问题，但在我们遇到的每一种情况下，都是我们的代码导致了问题。最初的问题被以 try/catch（通常......）开始的代码流掩盖，最终调用使用 MFC 管理状态宏之一的代码，然后调用更多代码，最终会发生 AV。由于捕获在堆栈中向上，并且根据损坏情况，并非所有帧都正确展开，因此错过了 MFC 宏的背面（某些析构函数无法弹出其上下文）。更糟糕的是（用于调试），最终的上下文崩溃可能发生在代码中的任何地方（我们在 CWnd 的基本窗口消息处理路由方法中经历了很多）。我们最终创建了另一个工具供用户运行，它将自己作为调试器附加到我们的（发布目标）可执行文件，捕获第一次机会异常并创建一个 dmp 文件，以便我们可以找到自转储以来异常发生的初始点上下文异常几乎从来没有用过，因为问题的原始来源很久以前就已经执行过了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:57:36.407

呼叫以这种方式失败的唯一方法是，如果

```
pChannel->hMutex 
```

是无效的。要么`pChannel`本身无​​效，要么`hMutex`. 很可能是前者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:48:11.540

看起来像是上下文停用的问题（基于 windbg 转储的想法）。参考[http://blogs.msdn.com/b/junfeng/archive/2006/03/19/sxs-activation-context-activate-and-deactivate.aspx](http://blogs.msdn.com/b/junfeng/archive/2006/03/19/sxs-activation-context-activate-and-deactivate.aspx)文章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T10:07:01.647

您应该检查句柄是否无效，而不仅仅是不`NULL`喜欢：

```
if (myHandle != INVALID_HANDLE_VALUE)
{
    // do something
} 
```

通常创建句柄函数会在出错时返回这个值。

# bash - 使用单词指示符和单词修饰符自动执行 wget tar cd 的 bash 脚本

> ID：10716630
> 
> 赞同：3
> 
> 时间：2012-05-23T08:55:31.343
> 
> 标签：bash, shell, wget, tar

如何使用单词指示符和单词修饰符或类似的东西使用 bash shell 脚本自动执行以下操作？

```
root@server:/tmp# wget -q http://download.zeromq.org/zeromq-2.2.0.tar.gz
root@server:/tmp# tar -xzf !$:t
tar -xzf zeromq-2.2.0.tar.gz
root@server:/tmp# cd !$:r:r
cd zeromq-2.2.0
root@server:/tmp/zeromq-2.2.0# 
```

当我尝试以下类似的操作时，我会收到错误，因为单词指示符和单词修饰符在 bash 脚本中的工作方式与它们在 shell 中的工作方式不同：

Bash Shell 脚本示例 1：

```
#!/usr/bin/env bash
wget -q http://download.zeromq.org/zeromq-2.2.0.tar.gz && tar -xzf !$:t && cd !$:r:r

root@server:/tmp# ./install.sh 
tar (child): Cannot connect to !$: resolve failed

gzip: stdin: unexpected end of file
tar: Child returned status 128
tar: Error is not recoverable: exiting now 
```

Bash Shell 脚本示例 2：

```
#!/usr/bin/env bash
wget -q http://download.zeromq.org/zeromq-2.2.0.tar.gz
tar -xzf !$:t
cd !$:r:r

root@server:/tmp# ./install.sh 
tar (child): Cannot connect to !$: resolve failed

gzip: stdin: unexpected end of file
tar: Child returned status 128
tar: Error is not recoverable: exiting now
./install.sh: line 11: cd: !$:r:r: No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:06:28.900

历史替换在命令行中起作用。在脚本中，您可以使用参数扩展。

```
#!/usr/bin/env bash
url=http://download.zeromq.org/zeromq-2.2.0.tar.gz
wget -q "$url"
tarfile=${url##*/}        # strip off the part before the last slash
tar -xzf "$tarfile"
dir=${tarfile%.tar.gz}    # strip off ".tar.gz"
cd "$dir" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:01:28.833

如果提供的示例是您尝试解决的唯一问题，则以下内容可能会有所帮助：

```
version="2.2.0"
wget -q http://download.zeromq.org/zeromq-${version}.tar.gz
tar -xzf zeromq-${version}.tar.gz
cd zeromq-${version} 
```

在 bash 脚本版本中，可能是传递给脚本的第一个选项：

```
version=$1 
```

这不包含错误处理等，但应该让你开始。

# javascript - Three.js 中的相机参数

> ID：10716632
> 
> 赞同：19
> 
> 时间：2012-05-23T08:55:43.993
> 
> 标签：javascript, 3d, camera, three.js

这是相机的实例化方式：

```
var camera = new THREE.PerspectiveCamera(
    VIEW_ANGLE,
    ASPECT,
    NEAR,
    FAR
); 
```

这些值是什么意思？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-01T10:11:50.560

我想知道同样的事情，所以我查了一下，这是一个**“平截头体”**视图。

我将在此处粘贴我在最近的一个项目中编写的代码注释，因为它很好地总结了恕我直言。

```
// "What the f*** is a frustum?" you ask. Well I did.
// Think about it as a truncated pyramid. The tip is the camera. From a certain
// point "down" the pyramid (the "near plane"), stuff can be seen on-screen.
// After the "base" of the pyramid (the "far plane"), stuff is too far to be
// seen. Stuff outside the pyramid is off-screen too. There is also the "aspect
// ratio" (the rectangle that makes up the pyramid's base, so this value is
// width/height) and the "field of view" (think of it as a lens or something,
// it distorts the pyramid so there's more objects on screen - it is set in
// degrees and 45° is more-or-less a "natural" perspective. The bigger the
// number, the more "perspective" there is). 
```

                                         [![维基百科图片](../Images/290c79068a8f15058e3606d51d2e4e6e.png)](http://en.wikipedia.org/wiki/File:Usech_kvadrat_piramid.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-23T23:17:52.757

第一个参数是 FOV 表示视野，想象一下三脚架上的相机，如果你把镜头换成广角，你会得到更高的 FOV。试着想象一个圆锥体从相机里出来，它只能看到那个区域的物体。

ASPECT 表示纵横比，宽屏电视是 16/9，旧电视是 4/3，通常只给它屏幕宽度/高度或您希望使用 three.js 的 DIV 的暗度。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-05-11T18:11:21.170

我发现本[教程](https://www.script-tutorials.com/webgl-with-three-js-lesson-9/)[`PerspectiveCamera`](http://threejs.org/docs/#Reference/Cameras/PerspectiveCamera)对于理解所有相机参数以及和之间的区别非常有用[`OrthographicCamera`](http://threejs.org/docs/#Reference/Cameras/OrthographicCamera)。

**透视相机**

*   Fov（视野）- 这是可以从相机位置看到的场景的一部分。您可能知道，我们人类几乎拥有 180 度的视野，而有些鸟类甚至可能拥有完整的 360 度视野。但是，对于计算机，我们通常使用 60 到 90 度之间的视场。

*   Aspect - 纵横比是我们渲染输出区域的水平和垂直大小之间的比率。由于我们通常使用整个窗口，我们将只使用该比率。纵横比决定了水平视野和垂直视野之间的差异，如下页的图中所示。普通值为`window.innerWidth / window.innerHeight`。

*   `Three.js`Near - 此属性定义了与渲染场景的相机的最小距离。通常，这是一个非常小的值，例如 0.1。

*   Far - 此属性定义了我们从相机位置看到场景的最大距离。如果我们将它设置得太低，我们的场景的一部分可能不会被渲染；如果我们将它设置得太高，在某些情况下，它可能会影响渲染性能。正常值在 500 到 2000 之间。

**正交相机**

*   左（相机截头体左平面） - 您应该将其视为将被渲染的左边界。如果我们将此值设置为 -100，您将看不到任何更靠左的对象。

*   右（相机平截头体右平面）- 任何更靠右的东西都不会被渲染。

*   Top (Camera frustum top plane) - 要渲染的最大顶部位置。

*   底部（Camera frustum bottom plane）要渲染的底部位置。

*   Near (Camera frustum near plane) - 从这一点开始，根据相机的位置，将渲染场景。

*   Far (Camera frustum far plane) - 基于摄像机位置的最远点，场景将被渲染到该点。

下图应该很能说明问题：

[![在此处输入图像描述](../Images/18fb13b1ff10b1cd17d935e80a507800.png)](https://i.stack.imgur.com/3hUZ2.png)

两种相机模式之间的主要区别在于，在`OrthographicCamera`远处不起作用，因此所有元素的大小相同，正如您在红色和黄色球的情况下看到的那样。

最后，这里有一些代码可以用来从一个摄像头切换到另一个摄像头：

```
this.switchCamera = function(SCENE_WIDTH, SCENE_HEIGHT) {
  if (camera instanceof THREE.PerspectiveCamera) {
    camera = new THREE.OrthographicCamera( SCENE_WIDTH / - 2, SCENE_WIDTH / 2, SCENE_HEIGHT / 2, SCENE_HEIGHT / - 2, 0.1, 1000 );
    camera.position.x = 0;
    camera.position.y = 0;
    camera.position.z = -1;
    camera.lookAt(scene.position);
    this.perspective = "Orthographic";
  } else {
    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
    camera.position.x = 0;
    camera.position.y = 0;
    camera.position.z = -1;
    camera.lookAt(scene.position);
    this.perspective = "Perspective";
  }
}; 
```

**笔记：**

*   该函数`camera.lookAt(scene.position)`将相机定向到场景所在的位置，因此它是可见的。
*   中的单位`three.js`是[SI 单位](https://github.com/mrdoob/three.js/issues/6259)，因此`left,right,top,bottom` ***不应***假定 的值是像素。
*   相机平截头体的纵横比通常应与画布的纵横比相匹配。
*   `SCENE_WIDTH, SCENE_HEIGHT`，可以通过添加到场景中的几何图形来确定。正交平截头体可能比场景大得多，但不会很简约。

**有用的链接：**

*   [http://www.glprogramming.com/red/chapter03.html](http://www.glprogramming.com/red/chapter03.html)
*   [Three.js - 正交相机](https://stackoverflow.com/questions/17558085/three-js-orthographic-camera/17567292)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T03:54:25.320

fov：相机平截头体垂直视野。

aspect：相机平截头体纵横比。

近：平面附近的相机平截头体。

far：相机截头远平面。

在这些页面上，有一些 FOV、NEAR 平面和 FAR 平面的图像。

[https://threejsfundamentals.org/threejs/lessons/resources/frustum-3d.svg](https://threejsfundamentals.org/threejs/lessons/resources/frustum-3d.svg)

[https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/ViewFrustum.svg/440px-ViewFrustum.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/ViewFrustum.svg/440px-ViewFrustum.svg.png)

[https://threejsfundamentals.org/threejs/lessons/threejs-cameras.html](https://threejsfundamentals.org/threejs/lessons/threejs-cameras.html) [https://en.wikipedia.org/wiki/Viewing_frustum](https://en.wikipedia.org/wiki/Viewing_frustum)

这是纵横比。

[https://en.wikipedia.org/wiki/Aspect_ratio_(图片)](https://en.wikipedia.org/wiki/Aspect_ratio_(image))

这是官方文档。

[https://threejs.org/docs/#api/en/cameras/PerspectiveCamera](https://threejs.org/docs/#api/en/cameras/PerspectiveCamera)

# c++ - 2 组独立的单选按钮组，采用相同形式的 WINAPI（无 MFC）

> ID：10716640
> 
> 赞同：2
> 
> 时间：2012-05-23T08:56:18.613
> 
> 标签：c++, winapi, radio-button

我希望在我的程序的对话框中创建 2 组单独的单选按钮组，但我不能让它正常工作。据我了解，我需要使用 Group 属性，但没有得到想要的结果。

我有 2 个单选按钮，我希望用户选择其中的 1 个，然后是一组单独的 6 个，用户也选择其中的 1 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:52:39.553

我自己解决了这个问题。只需将单选按钮中的 1 个设置为 true 并将其余的设置为 false 即可获得所需的结果。我没有在代码中这样做。我只是使用属性视图

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-23T20:21:15.137

例如，您有两组单选按钮。为了使第一组你需要写

```
WS_GROUP | WS_TABSTOP 
```

第一组：

**`CreateWindowEx(bla_bla, bla_bla, bla_bla, WS_GROUP | WS_TABSTOP, bla, bla, bla, bla, bla,bla,bla,bla);`**

`CreateWindowEx();`还有一个单选按钮，指的是第一组；（注意没有`WS_GROUP | WS_TABSTOP`！！！！）

`CreateWindowEx();`还有一个单选按钮，指的是第一组；（注意没有`WS_GROUP | WS_TABSTOP`！！！！）

# android - 人脸检测错误

> ID：10716641
> 
> 赞同：0
> 
> 时间：2012-05-23T08:56:21.213
> 
> 标签：android, eclipse, face-detection

作为项目的一部分，我正在使用以下 java 代码进行人脸检测。我遇到了一个奇怪的错误

```
BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();

         /*BitMapFactory-Creates Bitmap objects from various sources, including 
          * files, streams, and byte-arrays. 
          */

         BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565; 

imageWidth = myBitmap.getWidth();

     imageHeight = myBitmap.getHeight();

    myFace = new FaceDetector.Face[numberOfFace];

    myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);

     numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace); 

     }

//i get error over there in R.drawable.pics      
myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.pics, BitmapFactoryOptionsbfo); 
```

我应该在图片中给出图片文件的名称，但它一直给我一个错误图片无法解析或不是一个字段。所以我将图片文件的名称设置为 pic PS 它是可绘制文件夹中的 jpg 文件。我还将单引号内的文件命名为“pic”——它给了我无效的字符常量错误。

我也在双引号内命名它，但它仍然不起作用。我还将它命名为“pic.jpg”仍然不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:58:59.620

只需检查以下代码行：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
 options.inPreferredConfig =  Bitmap.Config RGB_565;
 Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.icon,options); 
```

让我知道它是否有效？还要检查输入*R.drawable 后出现的图像名称。*

**编辑：**

如果您仍然无法从 drawable 访问图像，请将您的图像说 pic.png 复制到资产文件夹并使用以下代码访问它：

更新代码：

```
try {
       InputStream bitmap=getAssets().open("icon.png");
       Bitmap bit=BitmapFactory.decodeStream(bitmap);
       img.setImageBitmap(bit);
     } catch (IOException e1) {
       // TODO Auto-generated catch block
       e1.printStackTrace();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:21:49.147

您的代码中可能还有另一个名为“pics”的变量。

尝试将其保存在不同的文件夹中，例如 MyPics。并以不同的方式命名图片，例如 xyz1.jpg

在这种情况下，将行写为：

```
myBitmap = BitmapFactory.decodeResource(getResources(), R.MyPics.xyz1, BitmapFactoryOptionsbfo); 
```

另外，您是否将“myBitmap”初始化为位图图像？意思是，您是否包括以下行：

```
Bitmap myBitmap; 
```

在您的代码中，在执行图像读取之前？

# android - android：删除图像

> ID：10716642
> 
> 赞同：35
> 
> 时间：2012-05-23T08:56:24.863
> 
> 标签：android, image, gallery

我正在从我的应用程序中删除一个图像文件。我在做

```
new  File(filename).delete (); 
```

这实际上是在删除文件。但图像在画廊中仍然可见。

在搜索中我发现我们应该使用

`getContentResolver().delete(Uri.fromFile(file), null,null);`删除

但在这里我得到了例外：

> 未知的文件 URL。java.lang.IllegalArgumentException：未知的 URL 文件：///mnt/sdcard/DCIM/Camera/IMG_20120523_122612.jpg

当我用任何文件浏览器看到时，都会出现这个特定的图像。请帮我解决这个问题。当图像被物理删除时，有没有其他方法可以更新画廊

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-23T09:08:12.533

使用下面的代码，它可能会对您有所帮助。

```
File fdelete = new File(file_dj_path);
if (fdelete.exists()) {
    if (fdelete.delete()) {
        System.out.println("file Deleted :" + file_dj_path);
    } else {
        System.out.println("file not Deleted :" + file_dj_path);
    }
} 
```

* * *

***删除图像后刷新画廊使用下面的代码发送广播***

（对于 < KITKAT API 14）

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
 Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

对于 >= KITKAT API 14，请使用以下代码

```
MediaScannerConnection.scanFile(this, new String[] { Environment.getExternalStorageDirectory().toString() }, null, new MediaScannerConnection.OnScanCompletedListener() {
            /*
             *   (non-Javadoc)
             * @see android.media.MediaScannerConnection.OnScanCompletedListener#onScanCompleted(java.lang.String, android.net.Uri)
             */
            public void onScanCompleted(String path, Uri uri) 
              {
                  Log.i("ExternalStorage", "Scanned " + path + ":");
                  Log.i("ExternalStorage", "-> uri=" + uri);
              }
            }); 
```

因为：

```
ACTION_MEDIA_MOUNTED 
```

在 KITKAT(API 14) 中已弃用。

* * *

**2015 年 4 月 9 日编辑**

它的工作正常检查下面的代码

```
public void deleteImage() {
        String file_dj_path = Environment.getExternalStorageDirectory() + "/ECP_Screenshots/abc.jpg";
        File fdelete = new File(file_dj_path);
        if (fdelete.exists()) {
            if (fdelete.delete()) {
                Log.e("-->", "file Deleted :" + file_dj_path);
                callBroadCast();
            } else {
                Log.e("-->", "file not Deleted :" + file_dj_path);
            }
        }
    }

    public void callBroadCast() {
        if (Build.VERSION.SDK_INT >= 14) {
            Log.e("-->", " >= 14");
            MediaScannerConnection.scanFile(this, new String[]{Environment.getExternalStorageDirectory().toString()}, null, new MediaScannerConnection.OnScanCompletedListener() {
                /*
                 *   (non-Javadoc)
                 * @see android.media.MediaScannerConnection.OnScanCompletedListener#onScanCompleted(java.lang.String, android.net.Uri)
                 */
                public void onScanCompleted(String path, Uri uri) {
                    Log.e("ExternalStorage", "Scanned " + path + ":");
                    Log.e("ExternalStorage", "-> uri=" + uri);
                }
            });
        } else {
            Log.e("-->", " < 14");
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        }
    } 
```

下面是日志

```
09-04 14:27:11.085    8290-8290/com.example.sampleforwear E/-->﹕ file Deleted :/storage/emulated/0/ECP_Screenshots/abc.jpg
09-04 14:27:11.085    8290-8290/com.example.sampleforwear E/-->﹕ >= 14
09-04 14:27:11.152    8290-8290/com.example.sampleforwear E/﹕ appName=com.example.sampleforwear, acAppName=/system/bin/surfaceflinger
09-04 14:27:11.152    8290-8290/com.example.sampleforwear E/﹕ 0
09-04 14:27:15.249    8290-8302/com.example.sampleforwear E/ExternalStorage﹕ Scanned /storage/emulated/0:
09-04 14:27:15.249    8290-8302/com.example.sampleforwear E/ExternalStorage﹕ -> uri=content://media/external/file/2416 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-12-26T06:51:23.783

我看过很多建议使用的答案

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

这可行，但会导致媒体扫描仪重新扫描设备上的媒体。更有效的方法是通过 Media Store 内容提供程序查询/删除：

```
// Set up the projection (we only need the ID)
String[] projection = { MediaStore.Images.Media._ID };

// Match on the file path
String selection = MediaStore.Images.Media.DATA + " = ?";
String[] selectionArgs = new String[] { file.getAbsolutePath() };

// Query for the ID of the media matching the file path
Uri queryUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
ContentResolver contentResolver = getContentResolver();
Cursor c = contentResolver.query(queryUri, projection, selection, selectionArgs, null);
if (c.moveToFirst()) {
    // We found the ID. Deleting the item via the content provider will also remove the file
    long id = c.getLong(c.getColumnIndexOrThrow(MediaStore.Images.Media._ID));
    Uri deleteUri = ContentUris.withAppendedId(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id);
    contentResolver.delete(deleteUri, null, null);
} else {
    // File not found in media store DB
}
c.close(); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-09-23T09:36:16.850

```
File file = new File(photoUri);
file.delete();

context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(new File(photoUri)))); 
```

此代码适用于我，我认为它比重新安装整个 SD 卡更好`Intent.ACTION_MEDIA_MOUNTED`

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-05-22T17:45:25.667

要删除图像，

```
ContentResolver contentResolver = getContentResolver();
contentResolver.delete(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            MediaStore.Images.ImageColumns.DATA + "=?" , new String[]{ imagePath }); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-29T23:31:05.320

我尝试了所有这些解决方案，但在 Android 6 中没有运气。
最后，我发现这段代码运行良好。

```
public static void deleteFileFromMediaStore(final ContentResolver contentResolver, final File file) {
    String canonicalPath;
    try {
        canonicalPath = file.getCanonicalPath();
    } catch (IOException e) {
        canonicalPath = file.getAbsolutePath();
    }
    final Uri uri = MediaStore.Files.getContentUri("external");
    final int result = contentResolver.delete(uri,
            MediaStore.Files.FileColumns.DATA + "=?", new String[]{canonicalPath});
    if (result == 0) {
        final String absolutePath = file.getAbsolutePath();
        if (!absolutePath.equals(canonicalPath)) {
            contentResolver.delete(uri,
                    MediaStore.Files.FileColumns.DATA + "=?", new String[]{absolutePath});
        }
    }
} 
```

我还在 Android 4.4 和 5.1 中对此进行了测试，它运行良好。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-22T13:45:33.823

```
sendBroadcast(new Intent(
           Intent.ACTION_MEDIA_MOUNTED,
           Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

此代码有效，但资源非常昂贵。它卸载然后安装可能会影响某些应用程序或占用大量系统资源以刷新图库的 SDCard。我仍在寻找最好的替代品，如果我得到一个，我会发布。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-06T08:37:17.257

在 Kotlin 中，您可以这样做：

```
private fun deleteImage(path: String) {
    val fDelete = File(path)
    if (fDelete.exists()) {
        if (fDelete.delete()) {
            MediaScannerConnection.scanFile(this, arrayOf(Environment.getExternalStorageDirectory().toString()), null) { path, uri ->
                Log.d("debug", "DONE")
            }
        } 
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-06T17:28:09.187

我有同样的问题，我尝试了三种不同的方法来删除图像。有时它工作，有时它不是。现在花了太多时间后，我拥有的每种方法都会删除图像。我想说的是：**小心处理位图**。我正在拍照坚持它，然后在需要时旋转：

```
public static Bitmap rotatePictureToPortraitMode(String filePath, Bitmap myBitmap) {
try {
    ExifInterface exif = new ExifInterface(filePath);
    int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    Log.d("EXIF", "Exif: " + orientation);
    Matrix matrix = new Matrix();
    if (orientation == 6) {
        matrix.postRotate(90);
    } else if (orientation == 3) {
        matrix.postRotate(180);
    } else if (orientation == 8) {
        matrix.postRotate(270);
    }
    myBitmap = Bitmap.createBitmap(myBitmap, 0, 0, myBitmap.getWidth(), myBitmap.getHeight(), matrix, true); // rotating bitmap
} catch (Exception e) {

}
return myBitmap;
} 
```

之后我试图删除图像，但正如我之前所说，它不起作用。删除此方法有助于我解决问题。

也许这只是我的问题，但一旦我删除它，它对我有很大帮助，所以我想说小心你如何处理图像。对于我的情况，我使用了前面提到的答案：

```
File file = new File(photoUri);
file.delete();

context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, 
Uri.fromFile(new File(photoUri)))); 
```

希望能帮助到你！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-28T07:22:08.387

```
public static boolean deltefolderwithimages(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deltefolderwithimages(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }
    return dir.delete();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-24T09:29:06.393

`DocumentFile.fromSingleUri(context, uri).delete();`

为我工作很棒

# php - 在php中将数字转换为x.xx格式

> ID：10716658
> 
> 赞同：0
> 
> 时间：2012-05-23T08:56:56.290
> 
> 标签：php

> **可能重复：**
> [php中的简单正则表达式，格式化十进制数](https://stackoverflow.com/questions/6044815/simple-regex-in-php-formatting-decimal-number)

如何在php中将x格式的数字转换为x.xx格式？示例：我有一个数字 5。需要转换为 5.00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:59:52.023

```
$n = 5;
$n = number_format($n, 2, '.', ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:59:21.490

你应该尝试`number_format()`：

```
$your_number = 5;

echo number_format($your_number, 2); // displays 5.00 
```

[手动的](http://us2.php.net/manual/en/function.number-format.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:59:17.933

见[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T08:59:26.203

```
number_format('your digit', 2 or 1, '.', ''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:24:07.783

```
 $number = 125

 $no = number_format($number, 2, '.', '');

 output = 125.00 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T09:29:49.760

```
$x = 5;
$x = sprintf('%.2f', $x);
echo $x; 
```

# objective-c - 初始化类作为子类

> ID：10716662
> 
> 赞同：1
> 
> 时间：2012-05-23T08:57:07.483
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

我的问题有点奇怪，假设我有一个继承自 UITableViewCell 的类，称为 GenericTableViewCell，还有一些继承自 GenericTableViewCell 的类。我希望能够将一个参数传递给 GenericTableViewCell init 方法，该方法将告诉我 GenericTableViewCell 的哪个子类应该将此 TableViewCell 初始化为。这是我的想法，但我知道它会失败，因为它有一个递归循环。

```
@implementation GenericTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier cellIdentifier: (CellIdentifier *) identifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        if ([identifier class] == [FirstIdentifier class]){
            self = [[FirstTableViewCell alloc] initWithStyle:style reuseIdentifier:reuseIdentifier];
        }
        /// more else statements to check for other identifier cases
    }
    return self;
}

@end 
```

有没有办法做到这一点？或者我应该只检查 init 函数之外的标识符，然后决定我要声明哪个单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:17:35.887

是的，你可以这样做。这是您有时会遇到的一种模式，称为类集群。如果您不使用 ARC，则必须释放 self 的原始值以阻止内存泄漏。

但是，我不会这样做。我会在`GenericTableViewCell`.

```
+(GenericTableViewCell*) cellWithStyle: (UITableViewCellStyle)style 
                       reuseIdentifier: (NSString *)reuseIdentifier 
                        cellIdentifier: (CellIdentifier *) identifier
{
    GenericTableViewCell* ret = nil;

    if ([identifier class] == [FirstIdentifier class])
    {
        ret = [[FirstTableViewCell alloc] initWithStyle:style reuseIdentifier:reuseIdentifier];
    }
    else 
    {
        // ....
    }
    return [ret autorelease];
} 
```

您可以`if`通过向 CellIdentifier 添加一个方法并在子类中覆盖它来消除该语句，如下所示：

```
// in CellIdentifier.m

-(id) classForCell
{
    return [GenericTableViewCell class];
} 

// in FirstIdentifier.m

-(id) classForCell
{
    return [FirstTableViewCell class];
} 
```

然后你的工厂方法变成

```
+(GenericTableViewCell*) cellWithStyle: (UITableViewCellStyle)style 
                       reuseIdentifier: (NSString *)reuseIdentifier 
                        cellIdentifier: (CellIdentifier *) identifier
{
    return [[[[identifier classForCell] alloc] initWithStyle:style 
                                             reuseIdentifier:reuseIdentifier] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:19:42.097

您应该实现的东西称为类集群模式。在您的情况下，您不应该调用`initWithStyle:reuseIdentifier:`子类而不是子类的初始化程序：

在`GenericTableViewCell`：

```
- (id)initWithCustomIdentifier:(NSString *identifier) {
    Class cellClass = NSClassFromString(identifier);

    if (!cellClass) {
        cellClass = [MyStandardTableViewCell class];
    }
    self = [[cellClass alloc] init];

    return self;
} 
```

在`MyStandardTableViewCell`（或任何其他子类`GenericTableViewCell`：

```
- (id)init {
    self = [super initWithStyle:someStyle reuseIdentifier:NSStringFromClass([self class])];

    if (!self) return nil;

    // do extra setup here
    return self;
} 
```

# objective-c - iOS - 手势和uislider

> ID：10716671
> 
> 赞同：2
> 
> 时间：2012-05-23T08:57:58.500
> 
> 标签：objective-c, ios, xcode, uislider, uipangesturerecognizer

我正在为 iOS 开发一个带有[ECSlidingViewController 之](https://github.com/edgecase/ECSlidingViewController)类的菜单的应用程序，这是一个很好的项目来管理应用程序上的水平手势。当我将 UISlider 放入视图时，问题就出现了......我不能很好地触摸它，因为滑块的滑动运动被误认为是向左/向右滑动。 [这](https://github.com/edgecase/ECSlidingViewController/blob/master/ECSlidingViewController/Vendor/ECSlidingViewController/ECSlidingViewController.h)是包含所有方法的 che 类的头文件，这是放在主视图中的代码：

```
if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]]) {
    self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
  }

  if (![self.slidingViewController.underRightViewController isKindOfClass:[UnderRightViewController class]]) {
    self.slidingViewController.underRightViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"UnderRight"];
  }

  [self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

最后一行是将手势集成到应用程序上的代码。有没有一种方法可以仅在 uislider 上禁用手势？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T23:46:33.473

您可以添加一个委托并让它忽略视图`self.slidingViewController.panGesture`上的触摸。`UISlider`以下问题和答案包含您需要的所有信息：[平移手势干扰 UISlider](https://stackoverflow.com/questions/9601718/pan-gesture-interferes-with-uislider)。

# sql-server-2008 - 在 SQL Server 2008 上安装 Umbraco 的问题

> ID：10716674
> 
> 赞同：0
> 
> 时间：2012-05-23T08:58:10.027
> 
> 标签：sql-server-2008, installation, umbraco

我在 SQL Server 2008 上安装 Umbraco 时遇到很多问题，是否存在兼容性问题？

还有什么理由不使用 SQL Server CE 4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:13:10.820

什么版本的 Umbraco？V5.x*只能*在开箱即用的 SQL 2008 上运行。Umbraco 4.7 肯定会在 SQL2008 上运行良好。

没有理由不能使用 SQLCE 进行开发，但我不推荐它。

对于生产 - 性能还不够好（尽管我认为在低流量站点上它可能会起作用）。由于功能更强大的 SQL Express 还免费提供，所以几乎没有理由不从一开始就使用它，它会减轻您在路上可能遇到的 SQLCE->SQL Express 升级难题。

# android - 将网格布局图像制作成按钮以分别打开一个单独的活动

> ID：10716675
> 
> 赞同：0
> 
> 时间：2012-05-23T08:58:10.807
> 
> 标签：android, android-layout, gridview

> **可能重复：**
> [在 Android 的 GridView 中创建可点击的图像](https://stackoverflow.com/questions/738817/create-a-clickable-image-in-a-gridview-in-android)

我已经设置了一个网格布局，但想让图像打开单独的活动，我的代码如下所示：

```
package android.grid.layout; 
```

导入android.content.Context；导入android.view.View；导入android.view.ViewGroup；导入 android.widget.BaseAdapter；导入android.widget.GridView；导入android.widget.ImageView；

公共类 ImageAdapter 扩展 BaseAdapter { 私有上下文 mContext;

```
// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.group_off, R.drawable.indoor_off, R.drawable.outdoors_off,
        R.drawable.attractions_off, R.drawable.playcentre_off, R.drawable.animals_nature_off,
        R.drawable.entertainment_off, R.drawable.arts_off, R.drawable.educational_off, 
        R.drawable.museum_off, R.drawable.historical_off, R.drawable.exercise_off,
        R.drawable.swimming_off, R.drawable.restaurant_off, R.drawable.partyhat_off
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
    return imageView;
} 
```

}

读取它的类看起来像这样

```
package android.grid.layout; 
```

导入android.app.Activity；导入android.content.Intent；导入android.os.Bundle；导入android.view.View；导入 android.widget.AdapterView；导入 android.widget.AdapterView.OnItemClickListener；导入android.widget.GridView；

公共类 HomeActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

} 
```

}

我如何让每个人都可以点击打开一个新的单独活动以在其中包含自定义列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:13:50.097

在 Adpater 的 GetView 中添加一个点击监听器，

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
   imageView.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View view) {
   Intent i=new Intent(context,activity.class);
     startActivity(i);
  }

});

    return imageView;
} 
```

# php - 为什么 PHP 使用操作码缓存而 Java 编译为字节码文件？

> ID：10716676
> 
> 赞同：38
> 
> 时间：2012-05-23T08:58:15.237
> 
> 标签：php, apc

在我看来，PHP 和 Java 都有相似的结构。首先，您编写一些高级代码，然后必须将其转换为更简单的代码格式才能由 VM 执行。一个区别是，PHP 直接从源代码文件工作，而 Java 将字节码存储在 .class 文件中，VM 可以从中加载它们。

现在对快速执行 PHP 的要求越来越高，这导致人们相信直接使用操作码而不是每次用户点击文件时都经过编译步骤会更好。

解决方案似乎是[加载所谓的 Accelerators](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)，它基本上将编译的结果存储在缓存中，然后使用缓存的操作码而不是再次编译。

Facebook 采用的另一种方法是[将 PHP](https://github.com/facebook/hiphop-php)代码完全编译为另一种语言。

所以我的问题是，为什么 PHP 世界中没有人像 Java 那样做？是否有一些动态元素真的需要每次都重新编译或类似的东西？否则，当代码投入生产时编译所有内容然后就可以使用它会更聪明。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-23T09:17:35.543

最重要的区别是 JVM 有一个完全覆盖字节码的明确规范。这使得字节码文件具有可移植性和实用性，而不仅仅是由特定的 JVM 实现执行。

PHP 甚至没有*语言规范*。PHP 操作码是特定 PHP 引擎的实现细节，所以你不能用它们做任何有趣的事情，而且让它们更明显也没什么意义。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T20:39:27.270

PHP 操作码与 Java 类文件不同。Java 类文件被很好地指定，并且可以在机器之间移植。PHP 操作码不能以任何方式移植。例如，它们具有内置的内存地址。它们严格来说是 PHP 解释器的实现细节，不应被视为 Java 字节码之类的东西。

一定要这样吗？不，可能不是。但是 PHP 源代码是一团糟，PHP 内部社区既没有愿望也没有政治意愿来实现这一点。我认为有人谈论将操作码缓存烘焙到 PHP 6 中，但 PHP 6 死了，我不知道这个想法的状态。

**参考**：我写了[phc](http://phpcompiler.org)，所以我在 PHP 实现/编译方面已经有几年的时间了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T09:31:01.790

***PHP 世界中没有人***在做 java 所做的事情，这并不完全正确。[Alexey Zakhlestin 的 appserver](https://github.com/indeyets)等项目提供了某种程度的持久性，更类似于 java servlet 容器（尽管他的灵感更多是 Ruby 的 Rack 和 Python 的 WSGI，而不是 Java）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T16:14:44.350

PHP 不使用操作码的标准机制。我希望它要么粘在堆栈 VM（python、java）或寄存器 VM（x86、perl6 等）上。但它使用了绝对本土的东西，问题就在这里。

它使用内存中的连接列表，这导致每个操作码具有 ->op1 ->op2 和 ->result。现在每个都是常量或临时表中的条目等。这些指针不能以任何理智的方式序列化。

现在，人们已经使用 pecl/bcompiler 之类的项目完成了这项工作，它确实将流转储到磁盘中。

但是这些类使这变得更加复杂，这意味着存在潜在的代码片段，例如

```
if(<conditon>)
{
   class XYZ() { }
}
else 
{
   class XYZ() { }
}

class ABC extends XYZ {} 
```

这意味着大量关于类和函数的决定只能在运行时完成——像 Java 这样的东西会阻塞在两个同名的类上，它们是在运行时有条件地定义的。基本上，APC 的继承和类缓存代码可能是代码库中最复杂和最容易出错的部分。每当一个类被缓存时，所有父继承成员都必须被清除，然后才能保存到操作码缓存中。

指针问题并非不可克服。有一个 apc_bindump ，我从来没有费心修复它，以便在重新启动时直接从磁盘加载整个缓存条目。但是调试所有这些以获得仍然需要定位所有系统指针的东西是很痛苦的 - apache 案例太容易了，因为由于 fork 行为，所有 php 进程都具有相同的系统指针。旧的 fastcgi 版本速度较慢，因为它们通常先 fork 然后再初始化 php - php-fpm 通过相反的方式解决了这个问题。

但最终，PHP 中真正缺少的是发明一种字节码格式、抛弃当前引擎和所有模块的意愿——使用堆栈 VM 重写它并构建 JIT。我希望我有时间——fb 的人几乎都带着他们的 hiphop HHVM。这牺牲了 eval() 以获得更快的性能 - 这是一个公平的牺牲:)

PS：我是没时间正确更新APC for 5.4的人

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-29T15:44:08.090

我想你们都被误导了。HHVM 不是编译器，另一种语言是虚拟机本身。混淆是因为facebook使用编译成c++，但这种方法是为了满足开发人员的要求而慢慢地（十分钟编译只是为了测试一些小东西）。

# android - 我想为所有活动修复主页按钮。如何？

> ID：10716677
> 
> 赞同：0
> 
> 时间：2012-05-23T08:58:18.033
> 
> 标签：android, android-homebutton

我正在设计一个通过按钮/图像按钮具有不同类型功能的应用程序。最后，列表可能会增加。我想放一个自定义主页按钮，当我在差异活动中时，它始终保持在屏幕上。或者如果您对如何将此主页按钮编码到屏幕下方的此布局有任何想法。请帮忙。

![在此处输入图像描述](../Images/2ac560a4421eef2be6f3c9364962ec09.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:35:46.793

您是否考虑过专门为此目的设计的操作栏？ [http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:31:10.263

虽然底部的主页按钮可以使用图像视图/按钮轻松实现，但推荐使用操作栏。您不仅可以与主页活动链接，还可以与您选择的任何其他活动链接。参考此以获得更深的洞察力。

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

[http://developer.android.com/reference/android/app/ActionBar.html](http://developer.android.com/reference/android/app/ActionBar.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:16:27.473

您可以在 xml 布局中放置任何按钮/图像按钮/图像，并在该组件上设置单击侦听器。您还可以使用选项菜单并在应用程序的所有屏幕上提供多个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:51:16.617

使用顶部的 ScrollView 和滚动视图下方的图像按钮进行布局。
例子：

```
<!-- language: lang-xml -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
  <ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Your Content Here"
    />
  </ScrollView>
  <LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
    <ImageView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher"
    />
  </LinearLayout>
</LinearLayout> 
```

它看起来像这样：
![截屏](../Images/f6e91e740e9b5aa0db53b8be805da67d.png)

# iphone - UIWebView 委托第二次不工作

> ID：10716680
> 
> 赞同：1
> 
> 时间：2012-05-23T08:58:20.713
> 
> 标签：iphone, ipad, webview, uiwebviewdelegate

我有一个 rss 提要，它返回一个包含标题、短文本和全尺寸文本的 json。短文本的标题和部分显示在 TableView 中。

我有 3 个控制器和 3 个视图。View 1 显示一个 TableView 包含来自 json 的文章（标题和短文本），每篇文章都有一个“阅读更多”按钮，在按钮的 IBAction 中，我将 viewcontroller(2) 推入导航控制器，控制器有一个 UIWebView（第二个视图），它加载一个 html 字符串。该字符串包含链接，当用户点击一个链接时，我想呈现一个带有另一个 WebView(3) 的模态视图控制器，这次使用请求（请记住，两个 WebView 都有**单独的控制器和**nib ）。代表在他们两个上都正确设置，我从代码和使用可视化工具都试过了。在委托方法**中 shouldStartLoadWithRequest**在第一个 WebView 中，我检查请求参数是否包含“http”或“www”，因为只有这样我才想调用第二个 WebView。第二个 WebView 第一次运行良好，视图以模态方式呈现，但是当我关闭它并点击相同的链接或另一个时，不调用**shouldStartLoadWithRequest**委托方法，但链接在同一个 WebView 中加载（第一个） .

我用谷歌搜索了这个，但没有找到与我类似的案例或解决方案。我对ios应用开发没有那么多经验，但是一个同事很好，我们没有设法找到解决这个问题的方法。我们把代码拆开分析了一下，但是我们没有找到这个问题的潜在根源，而且他有一个**单独的项目**，他也有同样的问题，只是他只使用了一个控制器和一个 WebView（我们的控制器和 nib 在独立创建）。我们对研究和代码检查非常彻底

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:43:04.863

似乎解决方案很简单。第一个 WebView 显然失去了与其委托的连接，因此，在第二个 WebView 控制器中添加

```
- (void)viewWillDisappear:(BOOL)animated {
    [self.parentViewController viewWillAppear:YES];
} 
```

并在第一个 WebView 的第一个控制器中：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    webView_.delegate = self;
} 
```

我希望这可以帮助别人

# vbscript - cscript.exe 打开一个窗口

> ID：10716682
> 
> 赞同：1
> 
> 时间：2012-05-23T08:58:26.803
> 
> 标签：vbscript, windows-7-x64, wsh

我有一个需要以 32 位运行的 vbs 文件，即使我运行的是 Windows 7 64 位。我可以使用命令启动这个文件

```
C:\Windows\SysWOW64\cscript.exe my-file.vbs 
```

这很好用，但它给我留下了一个多余的命令提示符窗口，我每次都必须手动关闭。将这个 vbs 文件作为启动项运行也很麻烦。

有没有办法在后台启动我的 32 位 vbs 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:24:49.990

尝试解决 64 位问题，如果可行，您可以将其与其他答案结合使用

编辑：这里有一个关于 32/64 位问题的更深入的问题

[如何检查 wscript/cscript 是否在 x64 主机操作系统上运行？](https://stackoverflow.com/questions/556283/how-do-i-check-if-wscript-cscript-runs-on-x64-host-os)

这里是修改后的版本，应该确保脚本在 64 位平台上运行

```
On Error Resume Next
Dim WshShell, OsType
Set WshShell = CreateObject("WScript.Shell")
OsType = WshShell.RegRead("HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\PROCESSOR_ARCHITECTURE")
If OsType = "x86" then
  wscript.echo "Windows 32bit system detected"
else
  wscript.echo "Windows 64bit system detected"
  If InStr(LCase(WScript.FullName),"system32") Then 
    CreateObject("WScript.Shell").Run """%systemroot%\SysWOW64\wscript.exe"" """ & WScript.ScriptFullName & """" 
    Wscript.Quit 
  End If 
end if

Msgbox("I ran..") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:47:21.117

如果您需要使用 cscript，恕我直言，这是一个很酷的解决方案

```
Const HIDDEN_WINDOW = 0

strComputer = "."

Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set objStartup = objWMIService.Get("Win32_ProcessStartup")
Set objConfig = objStartup.SpawnInstance_
objConfig.ShowWindow = HIDDEN_WINDOW

Set objProcess = GetObject("winmgmts:\\" & strComputer & "\root\cimv2:Win32_Process")

objProcess.Create "Cscript.exe h:\Script\Test1.vbs", null, objConfig, intProcessID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:42:44.410

如果您可以使用 wscript，您可以执行以下操作，这是最简单的方法

```
Set objShell = CreateObject("Wscript.Shell")
objShell.Run "Wscript.exe h:\Script\Test1.vbs" 
```

实际上，您可以将其作为单行来执行（我是 Ruby 人 8>）

```
CreateObject("Wscript.Shell").Run("Wscript.exe h:\Script\Test1.vbs") 
```

# javascript - jQuery 删除功能真的会删除 Dom 元素吗？

> ID：10716684
> 
> 赞同：8
> 
> 时间：2012-05-23T08:58:43.057
> 
> 标签：javascript, jquery, html, dom

我真的想知道 jQuery**[删除](http://api.jquery.com/remove/)**函数是否真的从 DOM 中删除元素。
首先，我看了[这里](https://stackoverflow.com/questions/2185760/jquery-does-remove-really-remove)，但答案并不令人信服。
当我注意到我仍然能够操作我调用了删除函数的元素时，我遇到了这个问题。

我的代码：

```
<div id="container">
    <div id="div">
        This is a div
    </div>
</div>

var div = $('#div');
$('#div').remove();
$('#container').append(div); 
```

**注意：**我的问题不是**如何解决这个问题？**但我想了解这里发生了什么！

实际上，这段代码并没有从dom中删除#div，但是如果我有任何**数据**集到#div，它就会丢失。我现在对**删除**功能的行为感到很困惑。任何人都可以解释一下吗？ [DEMO](http://jsfiddle.net/VAUXG/1/)

我确信 div 变量不仅仅是 dom 元素的克隆，还是对它的引用，因为当我操作 div 变量时，（如**`div.html('something')`**）DOM 中的**div**会更新。
还是我错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T09:00:24.850

`remove()`确实从 DOM 中删除了该元素。

但是，在您的示例中，该元素已被缓存在内存中，因为您将其分配给了`div`变量。因此，您仍然可以使用它，并再次附加它，它仍将包含原始所做的所有事件。

> 如果您说的是对的，为什么我会松动绑定到 div 的数据呢？

如果您检查[remove() 的来源，](http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.remove)您会看到它调用了内部`cleanData`函数，该函数删除了事件并清除`data`了元素的缓存。这就是您丢失信息的原因。

如果要从 DOM 中删除元素，但保留元素，请`detach()`改用。

这是一个显示差异的小提琴：http: [//jsfiddle.net/2VbmX/](http://jsfiddle.net/2VbmX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:32:54.173

必须删除分配的变量：

```
delete div; 
```

# apache - 使用 ConcurrentUpdateSolrServer 需要哪些 jar？

> ID：10716690
> 
> 赞同：2
> 
> 时间：2012-05-23T08:59:03.170
> 
> 标签：apache, solr, solrj

目前使用

```
solrServer = new CommonsHttpSolrServer(serverUrl); 
```

和这些罐子..

```
apache-solr-core-3.6.0
apache-solr-solrj-3.6.0
commons-codec-1.6
commons-httpclient-3.1
commons-io-2.1
jcl-over-slf4j-1.6.1
slf4j-api-1.6.1
slf4j-jdk14-1.6.1
lucene-core-3.5.0 
```

然而 apache solr 已弃用`CommonHttpSolrServer`并建议`ConcurrentUpdateSolrServer`
替换`CommonHttpSolrServer`为`ConcurrentUpdateSolrServer`运行时异常..

线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/http/HttpRequestInterceptor

其中需要jar `httpcore-4.0-alpha6.jar`
Exception 还表示另外三个异常。
任何人`httpcore-4.0-alpha6.jar`都需要列出哪些额外的罐子需要替换`CommonHttpSolrServer`为`ConcurrentUpdateSolrServer`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:13:44.987

看看[https://issues.apache.org/jira/browse/SOLR-3374](https://issues.apache.org/jira/browse/SOLR-3374) 你需要包含`httpcore`,`httpmime`和`httpclient`jars。

另外，我注意到您正在使用 Solr 3.6 jar 和 Lucene 3.5 jar - 保持 Solr 和 Lucene jar 版本同步通常是个好主意。

# linux - 默认 Udev 规则

> ID：10716692
> 
> 赞同：0
> 
> 时间：2012-05-23T08:59:09.627
> 
> 标签：linux, kernel, driver, device, udev

如果我还没有定义我自己的一组 udev 规则，那么默认的 udev 规则是什么，我怎么知道它们。在动态注册的字符驱动程序的上下文中考虑这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T18:20:21.247

您可以在 中找到默认的 udev 规则，但`/lib/udev/rules.d/`您可能还想检查一下您的特定发行版。`/etc/udev/rules.d/``/run/udev/rules.d/`

我直接从`man 7 udev`

# git - 合并来自远程分支的更改

> ID：10716694
> 
> 赞同：7
> 
> 时间：2012-05-23T08:59:19.027
> 
> 标签：git

我开始学习 Git，但遇到了一个问题。

假设有一个主存储库和两个分支。

掌握

-> fork1 -> 我的本地克隆

-> 叉子2

我正在开发一个分支，我可以从主存储库中提取更改并将它们与我自己的合并。现在，假设在第二个 fork 的一个分支中进行了一些更改。我怎样才能把它们拉出来并合并到我的回购中？

fork2 -> 与我的本地克隆合并 -> 推送到 fork1

另外，我可以在第二个分叉中合并来自远程分支的特定提交（通过提交哈希）吗？如何？

感谢您的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T09:20:04.970

将你的 fork2 定义为你的 fork1 中的远程仓库

```
git remote add fork2 /path/to/fork2/repo 
```

然后从 fork2 获取更改

```
git fetch fork2 
```

从 fork2 中提取更改。

```
git pull fork2 <branch name> 
```

需要注意的是，上述命令将更新您当前的分支。因此，您最好使用跟踪远程存储库并查看更改并将其合并到 fork1 中的分支，如果您同意的话。

```
git checkout --track -b branch_fork2 fork2/branch2 
```

查看名为 branch_fork2 的本地分支中的代码。

查看您想要合并 fork2 更改的存储库。

```
git checkout feature_1 
```

然后合并它

```
git merge branch_fork2 
```

如果导致合并冲突，解决合并冲突并提交。

# maven - 复制依赖；只复制模块的依赖项，而不是项目的所有依赖项

> ID：10716695
> 
> 赞同：1
> 
> 时间：2012-05-23T08:59:20.133
> 
> 标签：maven, maven-plugin

如何在 Maven中获取***模块的所有依赖项（不是项目的所有依赖项） ？***我希望在运行模块的“包”阶段时，（例如）Hibernate 及其依赖项在目标文件夹内的单独文件夹中进行处理。我用谷歌搜索了很多，我的选择是：

1.  maven-dependency-plugin:copy-dependency （没有解决我的问题，因为我不想要项目的所有依赖项）
2.  maven-dependency-plugin:copy （没有解决我的问题，因为它只是复制包含一个）

我应该生成自己的插件！？任何想法 ？

提前致谢 ..

# compilation - 在 Ubuntu 12.04 上编译 libdecodeqr 0.9.4

> ID：10716700
> 
> 赞同：0
> 
> 时间：2012-05-23T08:59:28.380
> 
> 标签：compilation, installation, qr-code, ubuntu-12.04

我在带有 OpenCV 2.2 的 Ubuntu 10.10 上使用这个库，效果非常好。比0.9.3版本好多了！现在我正在更新我的系统，我仍然想使用 libdecodeqr 0.9.4，但我得到一个编译错误：

```
galois.cpp: In member function ‘Galois::Polynomial* Galois::Polynomial::_lu(Galois::Polynomial)’:
galois.cpp:400:48: error: taking address of temporary [-fpermissive]
galois.cpp:403:65: error: taking address of temporary [-fpermissive]
galois.cpp: In member function ‘Galois::Polynomial Galois::Polynomial::solve(Galois::Polynomial)’:
galois.cpp:458:69: error: taking address of temporary [-fpermissive]
galois.cpp:464:56: error: taking address of temporary [-fpermissive]
galois.cpp:466:54: error: taking address of temporary [-fpermissive]
galois.cpp: In member function ‘int Galois::BCH::decode(int)’:
galois.cpp:565:56: error: taking address of temporary [-fpermissive]
galois.cpp:567:59: error: taking address of temporary [-fpermissive]
galois.cpp: In member function ‘Galois::Nomial Galois::BCH::_error_syndrome(int)’:
galois.cpp:592:44: error: taking address of temporary [-fpermissive]
make[1]: *** [galois.lo] Error 1
make[1]: Leaving directory `/home/xxx/Downloads/libdecodeqr-0.9.4/libdecodeqr'
make: *** [all-recursive] Error 1 
```

我在 Ubuntu 12.04 和 OpenCV 2.4 上。我像 ./configure make make install 一样进行了 src 安装。我能做些什么来编译这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:00:02.153

我想到了。问题是新的 gcc 编译器“将临时地址变为错误”而不是警告。

按照以下方式构建 libdecodeqr 以使其编译：

```
sudo make CXXFLAGS+=-fpermissive 
```

在那之后，显然：

```
sudo make install
sudo ldconfig 
```

# python - 如何使用 matplotlib 使用非数值为绘图着色？

> ID：10716705
> 
> 赞同：2
> 
> 时间：2012-05-23T08:59:50.913
> 
> 标签：python, colors, plot, matplotlib

我正在尝试使用 matplotlib 绘制值，并且我有几个不同类别的点要绘制。例子

```
Number   class     x     y 
1        wood      0.2   9.4
3        glass     7.6   4.6 
```

我怎样才能优雅地在不同颜色的图中表示这些不同的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:20:21.060

如果您有不同类别的数据，则可以使用[`classes`](http://docs.python.org/tutorial/classes.html).

```
import matplotlib.pyplot as plt

class DataSet(object):
    def __init__(self, name, x_data, y_data, size, color):
        self.name = name
        self.x_data = x_data
        self.y_data = y_data
        self.size = size
        self.color = color

wood = DataSet('wood', [1,2,3,4], [5,7,4,1], 300, 'red')
glass = DataSet('glass', [0,2,0,4], [2,7,4,1], 100, 'blue')
paper = DataSet('paper', [1,7,3,6], [9,9,1,9], 500, '#a5a5a5')
plastic = DataSet('plastic', [3,2,5,5], [1,5,1,8], 700, 'yellow')

categories = [wood, glass, paper, plastic]
#Here we plot all the data:
for cat in categories:
    plt.scatter(cat.x_data, cat.y_data, s=cat.size , color=cat.color, label=cat.name)

plt.legend(loc='lower right', scatterpoints=1)
plt.show() 
```

这给了我们：

![在此处输入图像描述](../Images/91cc518f658d3de400199986d838741e.png)

这可能是优雅的，也可能不是优雅的！

# objective-c - UIWebView：根据内容调整大小/适合？

> ID：10716708
> 
> 赞同：2
> 
> 时间：2012-05-23T09:00:00.057
> 
> 标签：objective-c, ios, uiwebview

我想创建一个具有多种字体格式和颜色的文本区域，所以我使用的是 UIWebView。创建我的 HTML 文本并显示它没有问题，但我想让视图适合内容。

使用 UITextView 添加到 subView 后，我曾经执行以下操作：

```
CGRect frame = myTextView.frame;
frame.size.height = myTextView.frame.size.height;
myTextView.frame = frame; 
```

但它不适用于 UIWebView。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T09:18:01.080

我写了一篇关于如何将[UIWebView 的高度设置为其 HTML 内容的高度的](http://www.pixeldock.com/blog/set-the-height-of-a-uiwebview-to-the-height-of-its-html-content/)简短教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T09:14:18.230

将其调整为 UIWebView 的 scrollView 的 contentSize。

# html - div 没有显示在文本框上方

> ID：10716709
> 
> 赞同：0
> 
> 时间：2012-05-23T09:00:01.820
> 
> 标签：html, css

我想在文本输入框的开头显示一个搜索图标。

目前我的代码如下所示：

```
<div id="search-icon"></div>
<input type="text" name="search" id="search"/> 
```

还有我的 CSS：

```
#search-icon {
    display:inline-block;
    background-color:#455a21;
    height:60px;
    width:60px;
    border:thin solid black;
    border-radius:30px;
    z-index:100;
}

input#search {
    position:relative;
    top:-25px;
    left:-30px;
    padding:10px;
    padding-left:35px;
    border-radius:20px;
    border:thin solid #6d6e71;
    z-index:1;
} 
```

它在我想要的位置显示 div，但在实际文本框下方。当我将搜索图标位置更改为绝对位置时，它会搞砸我的定位。

我怎么刷它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:09:08.330

您可以使用两者的相对位置来解决它。但只需更改它们的 z-index。

```
#search-icon {

background-color:#455a21;
height:60px;
width:60px;
border:thin solid black;
border-radius:30px;
z-index:100;
position: absolute;
z-index: 2;
}

input#search {
position:absolute;
top:15px;
left:30px;
padding:10px;
padding-left:35px;
border-radius:20px;
border:thin solid #6d6e71;
z-index:1;}​ 
```

这就是你要找的东西[吗](http://jsfiddle.net/TyVBp/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:13:49.083

您是在谈论让搜索图标位于输入#搜索之上吗？

比如这样：http: [//jsfiddle.net/52YfE/](http://jsfiddle.net/52YfE/)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:16:48.993

我不知道你到底想要什么，但看看这个[http://jsfiddle.net/V8AZE/](http://jsfiddle.net/V8AZE/)

# c# - C#、lambda、linq

> ID：10716726
> 
> 赞同：0
> 
> 时间：2012-05-23T09:00:33.830
> 
> 标签：c#, linq, lambda

假设我有一个包含 id 列表的 int 列表。我有一个 linq 表，我想返回一个特定的列，但仅当 linq 表的 ID 等于 int 列表中的任何 ID 时。

到目前为止，我有：

```
dc.tb_References.SelectMany(n => n.ID == ids).ToList(); 
```

在 sql 中，我只想写：

```
SELECT Column_Name from Table where ID in (1,2,3,4) 
```

我一直在谷歌搜索，但找不到我要找的东西。有没有人有任何提示？我想坚持使用 lambda 表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:08:24.157

您可以在 ID 列表上使用[Contains()方法。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)

```
dc.tb_References.Where(item => ids.Contains(item.ID)).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T09:09:30.437

试试这个

```
dc.tb_References.Where(n => ids.Contains(n.ID)).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T09:11:30.600

将`Where`方法与方法一起使用`Contains`：

```
dc.tb_References
    .Where(n => theListOfIds.Contains(n.ID))
    .Select(x => x.Column_Name)
    .ToList(); 
```

或者你可以这样做：

```
var query = from item in dc.tb_References
            where theListOfIds.Contains(item.ID)
            select item.Column_Name;

var list = query.ToList(); 
```

SelectMany 用于从子列表中选择项目，然后将所有这些项目作为列表重新调整：

```
Fruit.Items:   Apple, Pear
Veggies.Items: Carrot, Cabbage

List.Items: Fruit, Veggies

List.Items.SelectMany(x => x.Items) 
```

结果：

```
Apple, Pear, Carrot, Cabbage 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:12:06.590

要生成 IN 子句，您需要调用`Contains`集合上的方法并将该方法传递给您要搜索的对象的属性：

```
var ids = new int[] { 1, 3 };
var query = from n in dc.tb_References 
            where ids.Contains(n.ID) 
            select n; 
```

这是生成的 SQL（来自 LinqPad）：

```
DECLARE @p0 Int = 1
DECLARE @p1 Int = 3

SELECT [t0].[ID], [t0].[Foo], [t0].[Bar]
FROM [tb_References] AS [t0]
WHERE [t0].[ID] IN (@p0, @p1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:12:23.017

这是你追求的那种东西吗？

```
int[] myIds = {1,4,5,3};
List<int> list = new List<int>();

list.Add(1);
list.Add(5);
list.Add(8);
list.Add(9);
list.Add(10);
list.Add(12);

List<int> select = (from l in list where myIds.Contains(l) select l).ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T09:17:58.197

```
int ids = new int[]{1,2,3,4};
var list =  (from d in dc.tb_References
             where ids. Contains(d.ID)
             select d. Column_Name).ToList(); 
```

# jquery - jQuery Mobile + PhoneGap：iOS 构建的问题 - 启动画面和页面转换

> ID：10716727
> 
> 赞同：1
> 
> 时间：2012-05-23T09:00:34.637
> 
> 标签：jquery, ios, jquery-mobile, cordova

我正在使用 jQuery Mobile 和 Phonegap 开发一个小型应用程序，以便可以在 Android 和 iOS 设备上使用它。

Android 构建过程非常顺利，但今天当我进行第一个 iOS 构建时，出现了一些“奇怪”的图形问题。

首先，启动画面在启动时显示（如预期的那样），但随后似乎“缩小”并在其消失之前显示很多白色（因为应用程序已加载）。

其次，当单击指向内部“页面”的链接（在 index.html 文件中使用数据角色定义的 div - 大约有 6 个像这样的小“页面”）时，您可能会暂时看到页面内容闪烁页面过渡，最后显示内容。显然，它不应该这样。

Android 版本的初始屏幕或导航到内部页面的问题为零。

澄清一下，我正在使用 jQuery 1.7.1、jQuery Mobile 1.1.0、phonegap.js（因此它使用最新版本），并且我正在运行 CyanogenMod 7.1 和 iPhone 4 的 HTC Desire 上进行测试（不确定 iOS 版本，它的我的同事们）

我唯一的“mobileinit”设置是

```
<script type="text/javascript">
        $(document).bind("mobileinit", function() {
            $.mobile.loadingMessage = 'Loading...' ;
        });
</script> 
```

有什么想法吗？

# java - SOAP/WSDL Web Services如何实现？

> ID：10716728
> 
> 赞同：0
> 
> 时间：2012-05-23T09:00:35.407
> 
> 标签：java, web-services, soap, netbeans, wsdl

我正在尝试实现 SOAP/WSDL Web 服务。我只有

服务 URL：和用户密钥：

所以我的问题是：

首先如何连接到 Web Service 做某事？你知道一个很好的教程吗？netbeans 中是否有 wsdl 的向导？

# java - 克隆（）不可见

> ID：10716734
> 
> 赞同：1
> 
> 时间：2012-05-23T09:00:57.710
> 
> 标签：java, generics, clone

我有一堂课：

```
public class CounterBag<T extends Additive<T> & Cloneable & Serializable> {
    private T cntData;

    // c'tor, accessors equals and hashcode... 
    public T getCounterData() {
       return cntData;
    }
} 
```

其他类`Service`有 type 的成员`Set<CounterBag>`。现在在里面`Service`我想查找特定`CounterBag`的并返回其`cntData`成员的克隆。

在`Service`类的查找方法中，我检测到集合中的实例`CounterBag`并尝试以下操作：

```
return counterBag.getCounterData().clone(); 
```

`clone()`似乎不可见。

我想知道需要做什么才能使`clone()`可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:14:55.297

`Cloneable`不（重新）声明该`clone`方法，它只是从`Object`. 这意味着`T`不知道 的实例具有可见的`clone`. 定义您自己的子接口，`Cloneable`其中声明`clone`并将其用作`T`. 如果你不能因为你无法控制各种具体`T`的 s，那么你将不得不诉诸反思。:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:10:21.607

`clone`方法默认在`Object`类中定义，它是类的`protected`成员。

从`Object`班级：

```
protected native Object clone() throws CloneNotSupportedException; 
```

所以，你必须在你的类中定义`clone`方法。`CounterBag`然后只有它可用。

```
public Object clone() throws CloneNotSupportedException {
    return super.clone();
} 
```

您必须将其定义为公共方法，以使其在包外可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:10:49.160

确保作为`T`类型参数传递的类`Cloneable`具有适当的可见性，例如：

```
@Override
public Object clone() {
    try {
        return super.clone();
    } catch (Exception e) {
        // either handle the exception or throw it
        return null;
    }
} 
```

请记住，该方法[`clone()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29) 被标记为`protected`在`Object`类中，并且您需要使其在您自己的类中可见。

# python - 如何使用 Robot 框架连接到数据库

> ID：10716738
> 
> 赞同：-4
> 
> 时间：2012-05-23T09:01:18.727
> 
> 标签：python, selenium, db2, robotframework

如果有人知道，如何使用 RobotFrame 工作连接到数据库（db2）。我想查询数据库以验证结果。

任何想法将不胜感激！

溴

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T09:18:24.650

1.  如果您有工作 python 代码来连接数据库，只需在其上编写一个机器人框架库。
2.  当然，已经有[A Database Library 了](http://franz-see.github.com/Robotframework-Database-Library/)，也许它可以满足您的要求，或者您必须回到计划 1。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:14:22.193

请将 DatabaseLibrary 安装到您的机器中并安装它。确保 pymysql 已经在您的系统中可用，如果没有，请也安装它。

请遵循[此处](http://franz-see.github.com/Robotframework-Database-Library/api/0.5/DatabaseLibrary.html)给出的关键字。

在这里，我编写了一个成功的 rf 脚本，您可以通过它连接到您的数据库：

```
***Settings*** 
Library  DatabaseLibrary
***Testcases***
TestCase

   Connect To Database Using Custom Params  pymssql  'DatabaseName', 'UserName', 'Password', 'ip address of the machine where this database is installed'
   @{S}  Execute Sql String  select * from TableName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T05:39:48.273

```
import pymysql.cursors

def Delete_Fund(Name):
connection = pymysql.connect(host='ip',
                         user='root',
                         password='mysql',
                         port=3306,
                         database='novobank_auto',
                         cursorclass=pymysql.cursors.DictCursor)
try:
    with connection.cursor() as cursor:
        sql1 = "SET @fundName = '" + fundName + "';"
        cursor.execute(sql1)
        sql2 = "DELETE FROM `m_fund` WHERE `name` = @fundName;"
        cursor.execute(sql2)
        connection.commit()
        print("Fund : "+fundName+" has been Deleted")
finally:
    connection.close()

Delete_Fund("Name") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T01:51:49.280

对于任何数据库，我们都需要先建立连接，然后再执行查询。

我们必须遵循以下两个步骤：-

1.  连接数据库需要安装数据库库（包含默认关键字。
2.  安装驱动程序让我们说 SQL 驱动程序或 Mysql 驱动程序。

安装后在机器人框架中包含数据库库并使用此库示例提供的关键字，例如

**连接到数据库 pymssql ${dbName} ${dbUsername} ${dbPassword} ${dbHost}**

[完成逐步说明以将数据库与机器人框架连接起来](http://www.ufthelp.com/2016/09/how-to-connect-robot-framework-to.html)

# c# - 在 finally 块中执行 Response.Write 是否正确？

> ID：10716747
> 
> 赞同：0
> 
> 时间：2012-05-23T09:01:48.260
> 
> 标签：c#, asp.net

在 asp.net 中 - 我有代码在 finally 块中的 http 响应中发送 Json 序列化对象 - 但请求客户端在响应中没有收到任何内容。

（我检查以确保对象在调试中发送时不为空。）

从 finally 块发送响应是否可能会导致此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:02:53.517

不，在块内使用代码`finally`本身不会导致问题。

代码执行流程有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:15:14.120

在 finally 块中编写这种类型的代码没有好地方......它总是执行。

# java - android：忽略微调器的条件数组适配器

> ID：10716756
> 
> 赞同：0
> 
> 时间：2012-05-23T09:02:39.853
> 
> 标签：java, android, spinner, android-arrayadapter

我是安卓新手。我试图为不同的字符串数组形成一个条件适配器（取决于一个字符串变量）。

```
 TextView textPrompt;
    textPrompt = (TextView)findViewById(R.id.textprompt);
    final String acType = i.getStringExtra("type");
    textPrompt.setText(acType);
    if (acType == "400G"){
    spinnerSurface = (Spinner) findViewById(R.id.spinnerSurface);
    ArrayAdapter<CharSequence> adapterSurface = ArrayAdapter.createFromResource(
            this, R.array.surface_option_1, android.R.layout.simple_spinner_item);
    adapterSurface.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerSurface.setAdapter(adapterSurface);

    }
    else if (acType != "400G"){
        spinnerSurface = (Spinner) findViewById(R.id.spinnerSurface);
        ArrayAdapter<CharSequence> adapterSurface = ArrayAdapter.createFromResource(
                this, R.array.surface_option, android.R.layout.simple_spinner_item);
        adapterSurface.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerSurface.setAdapter(adapterSurface);

    }

    spinnerSurface.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() { 
        public void onItemSelected(AdapterView<?> parent, View v, 
                int position, long id) { 
            TextView tx = (TextView)v; 
            Log.i("\n\nid",String.valueOf(tx.getText()));
        } 
        public void onNothingSelected(AdapterView<?> arg0) { 
            // TODO Auto-generated method stub 
        } 
    }); 
```

我使用 textPrompt 来检查 acType 的值。无论 acType 是“400G”还是非“400G”，程序都会将 acType 视为非“400G”，因此采用 R.array.surface_option 而不是 R.array.surface_option1。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:15:10.430

这实际上是一个 Java 问题，而不是 android - 你不应该比较`String`s using `==`，`equals()`而是使用

```
if (acType != null && acType.equals("400G")){
    ...
}
else {
    ...
} 
```

由于`String`s 是对象，因此`==`比较引用，在您的情况下，对于相等的字符串，这很可能会有所不同。

# android - 为意图设置优先级

> ID：10716758
> 
> 赞同：1
> 
> 时间：2012-05-23T09:02:43.447
> 
> 标签：android

我对 android 比较陌生，我需要找到一种方法来设置意图的优先级……我已经看过意图过滤器文档和 api setPriority……我不知道如何使用它。你能给我一个示例应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:14:08.650

您可以设置`IntentFilter`导致这些项目启动的对象的优先级。使用[IntentFilter.setPriority()](http://developer.android.com/reference/android/content/IntentFilter.html#setPriority%28int%29)例如我想设置优先级`ACTION_MEDIA_BUTTON`：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);
        filter.setPriority(1000);// what you want to set 
```

# ruby-on-rails-3 - 验证错误重置我的价值观为什么

> ID：10716766
> 
> 赞同：0
> 
> 时间：2012-05-23T09:03:04.983
> 
> 标签：ruby-on-rails-3, validation

我有一个模态“A”，它有一个带有 has_many 关联的 line_item 模型“B”。这意味着 B 与 A 相关联。我在 A 的模型中验证了 B

```
validates_presence_f :B
 validates_associated :B 
```

现在在我的表单中，我使用“fields_for”来保存 B 的值，如果我提交一个空白表单而不是验证失败并显示一条错误消息以表明存在行项目 B，但是 B 的字段被禁用，我必须重新显示他们的字段. 任何人都可以预测为什么会发生这种情况。

这是我的模型：模型 A：

```
 class Purchase < ActiveRecord::Base
    has_many :purchase_line_items
    accepts_nested_attributes_for :purchase_line_items, :reject_if => lambda {|a| a[:account_id].blank? }, :allow_destroy =>true
    validates_presence_of :purchase_line_items
        validates_associated :purchase_line_items
end 
```

和模型 B：

```
class PurchaseLineItem < ActiveRecord::Base
    belongs_to :purchase
end 
```

在我的控制器中：

```
class PurchasesController < ApplicationController
def new
    @purchase = Purchase.new
    @purchase.purchase_line_items.build
    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @purchase }
    end
  end
end 
```

最后是我的观点：

```
<%= form_for @purchase, :html => {:multipart => true} do |f| %>
        <%= render 'shared/form_error', :object => @purchase %>
 <% @purchase.purchase_line_items.each_with_index do |purchase_line_item, index| %>
                           <%= render "purchase_line_items", :purchase_line_item => purchase_line_item, :index => index %>
                         <% end %>

<%= f.submit %>
<% end %> 
```

在部分订单项中，我有：

```
<tr id="row<%= index %>" valign="top" >
            <%= hidden_field_tag "purchase[purchase_line_items_attributes][#{index}][id]",purchase_line_item.id%>
            <td valign="top">
                <%= select_tag "purchase[purchase_line_items_attributes][#{index}][account_id]", options_from_collection_for_select(@to_accounts, :id, :name,:selected => purchase_line_item.account_id ), :include_blank => true, :class=>"full"  %>

            </td>

      <td><%= text_field_tag "purchase[purchase_line_items_attributes][#{index}][amount]", purchase_line_item.amount, :class => 'full', :id => 'total', :readonly => 'readonly',  :size => 5%></td>
            <td><%= link_to image_tag("/images/black_icon/ic_cancel.png"),{:action => :remove_line_item, :index => index}, :remote => true unless index == 0 %></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:05:10.483

如果我正确理解了您，那么您在嵌套表单方面存在问题。

出于什么原因你有田地的`readonly`财产`:amount`？

我不知道，为什么您使用没有 的方法`fields_for`，但在这种情况下，没有它您无法验证嵌套字段。所以你的代码必须是这样的：

```
<%= form_for @purchase, :html => {:multipart => true} do |f| %>
    <%= render 'shared/form_error', :object => @purchase %>

    <%= f.fields_for :purchase_line_items do |pl| %>
        <tr id="row<%= pl.object.id %>" valign="top" >
            <%= pl.hidden_field :id %>
            <td valign="top">
                <%= pl.select :account_id, options_from_collection_for_select(@to_accounts, :id, :name, :selected => pl.object.account_id), :include_blank => true, :class=>"full" %>
            </td>

           <td><%= pl.text_field :amount, :class => 'full', :id => 'total', :readonly => 'readonly',  :size => 5 %></td>
           <td><%= link_to image_tag("/images/black_icon/ic_cancel.png"), {:action => :remove_line_item, :index => pl.object.id }, :remote => true unless index == 0 %></td>
        </tr>
    <% end %>
    <%= f.submit %>
<% end %> 
```

向您的 PurchaseLineItem 模型添加验证，以防止在没有 :account_id 的情况下保存记录。

```
class PurchaseLineItem < ActiveRecord::Base
    belongs_to :purchase
    validates_presence_of :account_id
end 
```

实际上，如果您要验证 :account_id，则不必使用 :reject_if。

```
class Purchase < ActiveRecord::Base
    has_many :purchase_line_items
    accepts_nested_attributes_for :purchase_line_items, :allow_destroy =>true

    validates_presence_of :purchase_line_items
    validates_associated :purchase_line_items
end 
```

为了更清楚，请编辑您的问题并添加`create`操作代码。

# jquery - 无响应的脚本 - 是否可以避免它？

> ID：10716768
> 
> 赞同：6
> 
> 时间：2012-05-23T09:03:13.117
> 
> 标签：jquery

我有一个包含 150 行的列表，每行有三个蒙皮选择项。

因为在显示每个结果之前需要进行大量处理，所以我收到一条错误消息“此页面上的脚本可能很忙，或者它可能已停止响应。您可以立即停止脚本，或者您可以继续查看脚本是否会完全的。” 它指的是 jquery.js 文件。

是否可以通过做一些 jQuery 工作来避免这个错误？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T09:09:45.253

您需要将您的处理分成多个部分，并通过使用 0 或 1 毫秒的 setTimeout 给浏览器一些时间来处理它们之外的*事情。*

一个非常简单的方法是使用[异步](https://github.com/caolan/async)库的[`forEachSeries`](https://github.com/caolan/async#foreachseriesarr-iterator-callback)方法：

```
async.forEachSeries(yourData, function(item, cb) {
    // process item
    async.nextTick(cb);
}); 
```

`yourData`可能是包含您的行的 jQuery 对象，然后`item`将是一行的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:12:51.097

我不了解 jQuery（如果 jQuery 中有一些包装器可用），但是在 vanilla JS 中有 WebWorkers 的概念（除了 IE 之外的支持相当好 - 请参见[此处](http://caniuse.com/#search=webworker)）。

在这里，您为您的计算启动了一个额外的线程，它不会阻塞您的 UI 线程。当计算完成并且只剩下结果显示时，您将数据从工作线程发送到 UI 线程并仅显示结果。

有关详细信息，请查看[MDN 教程](https://developer.mozilla.org/En/Using_web_workers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:16:47.660

> 在需要时下载 JavaScript，而不是在页面加载时全部下载。

[按需 JavaScript](http://ajaxpatterns.org/On-Demand_Javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:16:52.453

网站性能专家 Steve Souders 在他的“更快的网站”一书中写到了这个问题以及如何解决这个问题。他描述了一种解决方案，您可以使用超时让其他进程也获得一些时间。

[这是](http://books.google.nl/books?id=E7p-07kNfXYC&pg=PA102&lpg=PA102&dq=avoid%20long%20running%20scripts%20souders&source=bl&ots=UMenRKgdRp&sig=bGLYgeFHZyLmDq9NbUpXbNgGou8&hl=nl&sa=X&ei=kKq8T7mgAqbB0QXPo5hB&ved=0CFYQ6AEwAg#v=onepage&q&f=false)本书中处理这个问题的部分。

# c++ - C++ const 定位的区别

> ID：10716769
> 
> 赞同：23
> 
> 时间：2012-05-23T09:07:54.327
> 
> 标签：c++, constants

我正在努力弄清楚可以在 C++ 中的函数声明上放置“const”的各个地方之间的差异。

const开头的区别是什么：

```
const int MyClass::showName(string id){
...
} 
```

最后的 const 就像：

```
int MyClass::showName(string id) const{
...
} 
```

另外，像这样在开头和结尾都有 const 的结果是什么：

```
const int MyClass::showName(string id) const{
...
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-23T09:11:47.803

`const int MyClass::showName(string id)`返回一个`const int`对象。所以调用代码不能改变返回的int。如果调用代码是这样的`const int a = m.showName("id"); a = 10;`，那么它将被标记为编译器错误。但是，正如下面@David Heffernan 所指出的，由于整数是通过复制返回的，因此调用代码没有义务使用`const int`. 它可以很好地声明`int`为返回类型并对其进行修改。由于对象是通过复制返回的，因此将返回类型声明为`const int`.

`int MyClass::showName(string id) const`告诉方法`showName`是一个`const`成员函数。const 成员函数是不修改类的任何成员变量的函数（除非它们被标记为`mutable`）。`int m_a`因此，如果您在类中有成员变量，`MyClass`并且如果您尝试在`m_a = 10;`内部进行操作`showName`，则会出现编译器错误。

三是以上两种情况的结合。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-23T09:10:31.597

1.  `const`附加到返回值适用于返回值。由于返回值被复制，它是一个毫无意义的声明，无论你是否包含它都没有区别。
2.  参数列表后面的意思是该`const`函数不会修改未标记为可变的对象的任何状态。这是一个 const 成员函数，如果您有一个 const 对象，编译器将不允许您在 const 对象上调用非 const 成员函数。

这两种用途之间没有相互作用`const`——它们是完全独立的结构

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T09:12:19.317

不同之处在于`const`适用于不同的事物。

这表示`showName`返回一个常`int`量值——一个不可变的值。当然，由于`int`是按值返回的，因此`const`此处的存在没有任何作用。

```
const int MyClass::showName(string id) 
```

这表示`showName`不会修改的可观察状态`MyClass`（技术上：它不会修改任何未声明的成员[`mutable`](https://stackoverflow.com/questions/105014/c-mutable-keyword)），因此您可以在 type 的值上调用它`const MyClass`。

```
int MyClass::showName(string id) const 
```

如果您同时使用这两个`const`s，那么上述两个都适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T19:31:11.407

像这样的问题往往会增强我遵循 Dan Saks 建议的决心，正如这篇“与大师的对话”文章中所述：[http](http://www.drdobbs.com/conversationsa-midsummer-nights-madness/184403835) ://www.drdobbs.com/conversationsa-midsummer-nights-madness/184403835 。

特别是它处理 const 的位置如何改变事物。(*) 我意识到我极不可能将任何人从写作转换`const int ...`为`int const ...`，但也就是说，我更喜欢后者是有一个原因的。

(*) 包含一个注意事项，即在一开始就将 const 与类型声明交换是一个没有效果的更改。

它使可读性变得非常容易，因为对于 `const`声明中单词的任何实例，它左侧的所有内容都是 const 的类型，而右侧的所有内容实际上都是 const。

考虑如下声明：

```
int const * * const pointerToPointer; 
```

第一个`const`声明指针链末尾的整数是 const，它们可以在`* * const pointerToPointer`. 同时，第二个声明指向 const int 的指针类型的对象也是 const 并且该对象是`pointerToPointer`.

在OP的情况下：

```
int const MyClass::showName(string id){
...
} 
```

const 的类型是 int，而 const 是函数的返回值。

同时：

```
int MyClass::showName(string id) const {
...
} 
```

这里const的类型是function(string)返回int，而const是函数本身，即函数体。

# java - Java/JDBC - 使用 TableModels 显示单个数据

> ID：10716777
> 
> 赞同：0
> 
> 时间：2012-05-23T09:08:50.633
> 
> 标签：java, mysql, swing, jdbc

我的爱好级编程不会让我以我想要的方式扩展我的程序，我的书/谷歌不会帮助我太多，希望你们能！

我正在编写一个简单的数据库查看程序，使用“ResultSetTableModel”从本地 mySQL 数据库导入数据。当前程序在一个漂亮的列表中显示条目，并且每个条目中包含的所有数据都在 JTable 中显示为一个单独的单元格。

但是，我现在想为 JTable 行实现一个功能，即“单击时”显示内容（在我的情况下是使用图像路径的图像）但是，在无休止地尝试之后，我似乎找不到一种简单快捷的添加方法为我执行此操作的事件处理程序。

我之前已经设法用手动填充的表做类似的事情，但是当试图将在那里学到的经验应用到这个新项目时，我一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:15:54.560

您可以简单地将 ListSelectionListener 添加到表选择模型中：

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

    @Override
    public void valueChanged(ListSelectionEvent e) {
          // Last selected row:
          table.getSelectedRow(); // -1 if no row selected
          // All selected rows:
          table.getSelectedRows();

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:15:28.910

您是否尝试在表格中添加`MouseListener`（或） - 例如`MouseAdapter`

```
table.addMouseListener(new MouseAdapter(){
  @Override
  public void mouseClicked(MouseEvent e){
    // do something cool...
  }
} 
```

# render - 如何在媒体基础中编写第三方媒体接收器（muxer）

> ID：10716783
> 
> 赞同：0
> 
> 时间：2012-05-23T09:09:21.753
> 
> 标签：render, mediarecorder, ms-media-foundation

媒体接收器组件分为两大类，渲染器和存档接收器。对于播放，我可以使用 windows 默认渲染器。但现在我想编码一些文件，并写出一个文件。Windows Media Foundation 是否有一些关于如何开发媒体接收器（复用器）的示例代码。就像 sdk 中的 MPEG1SOURCE 示例代码和解码器示例代码一样。

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:51:01.167

在 SDK 中，有一个示例 WAVSINK

# android - Android ListFragment 滚动问题

> ID：10716786
> 
> 赞同：0
> 
> 时间：2012-05-23T09:09:28.293
> 
> 标签：android, android-fragments

我正在为手机和平板电脑在 Android 3.2/4.0.3 上开发应用程序。我一直在使用 Fragments 功能，在左侧的 Fragment 中，我扩展了 ListFragment 并成功地将我自己的自定义视图添加到每个列表行（在其自己的 XML 文件中定义的布局）。滚动时偶尔会出现我的问题，由于某种原因，列表变得疯狂，行在列表中重叠和反弹。有没有人遇到过这种行为？

我在下面附上了一些例子。我四处寻找试图找到这种情况的例子，但我找不到任何例子。似乎也没有针对它提出错误报告，所以我不知道这是由于我编写代码的方式还是这是 Android 的“功能”。

任何帮助将非常感激。

列表片段正常工作 - [http://imgur.com/jKmy6.png](http://imgur.com/jKmy6.png)

疯狂列表片段行为 - [http://imgur.com/KSKwm.png](http://imgur.com/KSKwm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:51:03.563

我不确定这个功能：

```
 public View getView(int p_position,
      View p_convertView,
      ViewGroup p_parent)
  {
    if (p_convertView == null)
    {
      return m_views.get(p_position);
    }
    else
    {
      return p_convertView;
    }
  } 
```

如果 p_convertView 不为空，为什么要返回它？Android 可能正在使用原始视图而不是创建新视图？试试这个...

```
 public View getView(int p_position,
      View p_convertView,
      ViewGroup p_parent)
  {
    return m_views.get(p_position);
  } 
```

# .net - FileSystemWatcher 无法启动

> ID：10716788
> 
> 赞同：1
> 
> 时间：2012-05-23T09:09:32.203
> 
> 标签：.net, windows, exception-handling, windows-services, filesystemwatcher

我正在使用 C# 2010 开发 Windows 服务，并且正在使用 FileSystemWatcher。由于某种原因，我无法启动我的服务。

当我尝试运行我的服务时，我收到以下消息。

> 本地计算机上的 -service- 启动和停止。如果某些服务未在其他服务或程序中使用，它们会自动启动。

当我输入这段代码时会发生这种情况：

开始：

```
FSWatcherTest.Path = ConfigurationManager.AppSettings["WatchPath"].ToString(); 
```

然后在一个方法中：

```
private void InitializeComponent()
{
     this.FSWatcherTest = new FileSystemWatcher();
     ((System.ComponentModel.ISupportInitialize)(this.FSWatcherTest)).BeginInit();

       this.FSWatcherTest.EnableRaisingEvents = true;
       this.FSWatcherTest.Path = "my path";
       this.FSWatcherTest.Changed += new      FileSystemEventHandler(this.FSWatcherTest_Changed_1);
       ((ISupportInitialize)(this.FSWatcherTest)).EndInit();

} 
```

等待一些可能的答案。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:03:01.243

这可能是一个安全问题，因为文件系统观察程序需要完全信任

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:07:45.993

我有一段时间没有使用它了，所以我可能不在基地，但你可能会在 FileSystemWatcher 准备好之前打开它。

在上面的代码中，EnableRaisingEvents 在 InitializeComponent 中设置为 true（我猜是设计器生成的代码的一部分）。设计器将该属性默认为 true ，希望您在设计时也设置有效路径。但是您并没有在设计时设置真正的路径（您只是在使用“我的路径”）。FSW 可能在 EndInit() 之后立即抛出异常，因为它开始寻找“我的路径”但找不到它。

由于您在 OnStart 方法中设置了真实路径，因此您应该在设计器中设置 EnableRaisingEvents false。设置路径后，在 OnStart 方法中将其设置为 true。那是您希望它开始寻找更改的时候。

# .net - Powershell：如何在不同的用户凭据下发送电子邮件

> ID：10716789
> 
> 赞同：0
> 
> 时间：2012-05-23T09:09:33.850
> 
> 标签：.net, powershell, sendmail

我们有一个用户登录到没有交换帐户的 Windows。我希望使用具有登录会话（没有交换帐户）权限的不同凭据发送电子邮件。有谁知道我怎么能做到这一点？

Send-MailMessage 没有凭据选项。

谢谢

# java - 尝试使用 Jersey 客户端时出现空指针异常

> ID：10716790
> 
> 赞同：1
> 
> 时间：2012-05-23T09:09:35.170
> 
> 标签：java, osgi, jersey

我正在尝试使用 Jersey 客户端访问远程 Web 服务。这是我发出请求的代码：

```
Client client = Client.create();
WebResource resource = client.resource(request.getUrl());

Builder builder = resource.accept("application/json");
String response = builder.post(String.class, request.getPayload()); 
```

我已将它捆绑到一个 OSGi 包中，并将其安装在 Adob​​e CQ CMS 上。

当尝试在 CMS 中运行请求代码时，我得到以下堆栈跟踪：

```
Caused by: java.lang.ExceptionInInitializerError
at com.sun.jersey.core.spi.factory.MessageBodyFactory.getMessageBodyWriterMediaTypes(MessageBodyFactory.java:444)
at com.sun.jersey.api.client.RequestWriter.getMediaType(RequestWriter.java:324)
at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:282)
at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:204)
at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:147)
at com.sun.jersey.api.client.Client.handle(Client.java:648)
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)
at com.myapp.auth.request.impl.HttpRequestSender.sendRequest(HttpRequestSender.java:44)
at com.myapp.auth.ws.clients.impl.AuthenticateClientImpl.authenticate(AuthenticateClientImpl.java:47)
at com.myapp.auth.Authenticator.authenticate(Authenticator.java:31)
at org.apache.jsp.apps.angry_002dnerds.components.page.base.content_jsp._jspService(content_jsp.java:155)
at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:420)
... 126 more 
```

原因：com.sun.jersey.core.header.MediaTypes.(MediaTypes.java:64) 处的 javax.ws.rs.core.MediaType.valueOf(MediaType.java:119) 处的 java.lang.NullPointerException ...还有 142 个

我环顾四周，发现其他人在 MediaType 在不同平台上抛出 NullPointerExceptions 时遇到了类似的错误。

有没有人见过这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T10:34:45.253

根据[Jersey deps](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html#d4e1727)，您需要`jersey-json`在依赖项/类路径中有模块。

# c++ - 使用 dynamic_pointer_cast 通过引用获取 shared_ptr

> ID：10716794
> 
> 赞同：0
> 
> 时间：2012-05-23T09:09:50.193
> 
> 标签：c++, c++11, shared-ptr

可以通过引用获取返回值`dynamic_pointer_cast`，还是会导致问题？

```
struct A
{
};

struct B : public A
{
};

int main()
{
  shared_ptr<A> b = make_shared<B>();
  auto &a = dynamic_pointer_cast<A>(b);
  //auto a = dynamic_pointer_cast<A>(b);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:24:25.707

即使*有*可能，它也不会做你想做的事：

> [目的是]参考计数器不增加

它*仍然会增加*，因为无论如何都会`dynamic_pointer_cast`返回一个*新* `shared_ptr`副本。

您的代码不起作用，因为引用将被绑定到由返回的临时对象`dyanamic_pointer_cast`，这是被禁止的。

使用`const`引用会起作用（因为`const&`允许绑定到临时），但结果仍然相同：强制转换将创建 a 的*新*实例`shared_ptr`，并增加引用计数。

# python - 如何将字符串转换为其 Base-10 表示？

> ID：10716796
> 
> 赞同：5
> 
> 时间：2012-05-23T09:09:51.440
> 
> 标签：python, string, base-conversion

是否有任何 python 模块可以帮助我将字符串转换为 64 位整数？（这个字符串的最大长度是 8 个字符，所以它应该很长）。

我想避免编写自己的方法。

例子：

```
Input String   Hex          result (Base-10 Integer)
'Y'            59           89
'YZ'           59 5a        22874
... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:17:31.187

这是一份工作[`struct`](http://docs.python.org/library/struct.html)：

```
>>> s = 'YZ'
>>> struct.unpack('>Q', '\x00' * (8 - len(s)) + s)
(22874,) 
```

或者有点棘手：

```
>>> int(s.encode('hex'), 16)
22874 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T09:13:55.963

我不认为有一个内置的方法可以做到这一点，但它很容易烹饪：

```
>>> int("".join([hex(ord(x))[2:] for x in "YZ"]), 16)
22874 
```

这通过base 16进行，当然可以优化。我将把它“作为练习”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T09:17:18.417

其他方式：

```
sum(ord(c) << i*8 for i, c in enumerate(mystr)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T09:16:48.200

```
>>> reduce(lambda a,b: a*256+b, map(ord,'YZ'), 0)
22874 
```

# spring - DelegatingFilterProxy 和 LazyInitializationException

> ID：10716797
> 
> 赞同：0
> 
> 时间：2012-05-23T09:09:54.747
> 
> 标签：spring, hibernate

我有一个 GWt 应用程序，我正在制作一个简单的爬虫来改进我的 SEO。为此，我使用 HTMLUnit 和 Google 使用过滤器发布的简单代码。

在这个过滤器中，我需要访问数据库来加载一些数据，这就是我得到这个异常的地方。

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.tapeanding.domain.beans.TFichas.tfichasDescripcioneses, no session or session was closed
at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:380)
at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:372)
at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:365)
at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:108)
at org.hibernate.collection.PersistentSet.iterator(PersistentSet.java:186)
at com.tapeanding.server.op.impl.OpFicha.cargarDescripcion(OpFicha.java:223)
at com.tapeanding.server.op.impl.OpFicha.cargarFicha(OpFicha.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy38.cargarFicha(Unknown Source)
at com.tapeanding.server.servlets.CrawlServlet.generarFicha(CrawlServlet.java:198)
at com.tapeanding.server.servlets.CrawlServlet.doFilter(CrawlServlet.java:136)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

**- web.xml**

```
<!-- Sesion de apertura de Spring -->
<filter>
    <filter-name>session-in-view</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>singleSession</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<!-- Filtro para convertir el codigo en HTML -->
<filter>
    <filter-name>crawler</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>targetFilterLifecycle</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>session-in-view</filter-name>
    <servlet-name>dispatcher</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>crawler</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

**- 应用程序上下文.xml**

```
 <!-- ========================= Crawler ========================================= -->
<bean id="crawler" class="com.tapeanding.server.servlets.CrawlServlet">
    <property name="opFicha" ref="opFicha" />
</bean>

<bean id="opFicha" class="com.tapeanding.server.op.impl.OpFicha">
    <property name="tFichasDAO" ref="tFichasDAO" />
    <property name="tFichasComentariosDAO" ref="tFichasComentariosDAO" />
</bean>

<bean id="tFichasDAO" class="com.tapeanding.server.daos.impl.TFichasDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
<bean id="tFichasDescripcionesDAO" class="com.tapeanding.server.daos.impl.TFichasDescripcionesDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

我不想使用“lazy=false”标签，因为在所有情况下我都不需要获取大量信息。

一些想法？如果我正在使用 OpenSessionInViewFilter 过滤器，当我尝试在过滤器中使用 bean 时，为什么会发生这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:55:31.183

您的 session-in-view 过滤器未出现在堆栈跟踪中...

尝试

```
<filter-mapping>
   <filter-name>session-in-view</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# css - StackLayoutPanel 在圆角处显示白色末端

> ID：10716798
> 
> 赞同：-1
> 
> 时间：2012-05-23T09:09:55.027
> 
> 标签：css, gwt, rounded-corners, gwt-widgets

我正在使用 GWT ，并尝试通过在以下 CSS 规则中`StackLayoutPanel`应用属性来绕过其标题的角落：`border-radius`

```
.mm-StackPanelHeader {
  padding-left: 7px;
  font-weight: bold;
  font-size: 1.4em;
  width: 200px;
  border-radius: 5px 5px 0px 0px;
  background: #d3def6;
  border: 0.5px solid #bbbbdd;
} 
```

折叠标题项时，边框不会完全相互覆盖，显示出难看的白色角端。

如何解决这个问题？

这是[输出的快照](http://imageshack.us/photo/my-images/805/stackoverflow.jpg/)，供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:23:13.810

假设您要使用[旧小部件的外观和感觉](http://gwt.google.com/samples/Showcase/Showcase.html#!CwStackPanel)，实现完全相同的结果将不可避免地涉及替换图像和弄乱小部件的布局属性（例如应用负边距，更改偏移量）。

话虽如此，我设法获得了一个基于 CSS 的快速解决方案，该解决方案似乎针对您的需求，并且无需进一步操作。我确信可以使用更准确的解决方案，因为这种尝试远非完美，但它应该为您提供一个良好的起点。

### 抽象的

要模拟旧小部件的外观：

*   将项目标题的顶角四舍五入。
*   为底层容器应用背景颜色，以避免那些*难看的白色角落*。
*   在该容器上也使用顶部圆角，以避免由于应用了背景颜色而在其上出现*难看的蓝色角。*
*   重置标题项的底部填充以重新居中其内容。

### 执行

将以下规则添加到您的样式表中：

```
.gwt-StackLayoutPanel,
.gwt-StackLayoutPanel .gwt-StackLayoutPanelHeader {
    background-color: #D3DEF6;
    border-radius: 5px 5px 0 0;
}
.gwt-StackLayoutPanel .gwt-StackLayoutPanelHeader {
    padding-bottom: 0;
} 
```

### 插图

这是最终结果的快照，通过在 GWT 展示实例上操作 CSS 属性创建：

![堆栈布局面板已修改](../Images/1a42a03a282b3e583a161fbbd394d909.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T22:00:22.797

嗯，`StackLayoutPanel`绝对是比`StackPanel`.

但是我在这种情况下使用了后者，因为没有其他方法，而且它就像一个魅力！

谢谢大家！

# c# - “项目已添加。在字典中键入”的解决方法每次都使用相同的键但具有不同的值

> ID：10716800
> 
> 赞同：1
> 
> 时间：2012-05-23T09:10:10.440
> 
> 标签：c#, .net, environment-variables, processstartinfo

在用户的环境变量下，我添加了一个变量，其键名为 eg。

```
TMP_VAR 
```

和价值，例如。

```
C:\temp\sim 
```

在 VS2010 .Net 4.0 中创建的 C# 应用程序中启动新进程并设置 StartInfo.EnvironmentVariables.Add("TMP_VAR", C:\temp\sim); 双击exe文件时出现此错误：

```
Item has already been added. Key in dictionary: 'TMP_VAR' Key being added: 'TMP_VAR' 
```

但是，如果我从 VS2010（按 F5）启动它，则不会发生错误。

我的理论是 VS2010 以某种方式在某种“shell”中启动该过程并覆盖该“shell”中的变量。

此外，我的应用程序使用相同的键但不同的值启动多个进程。无法更改密钥。它必须是 TMP_VAR，但允许更改该值。

我的问题是：我的应用程序如何启动一个新进程，在某种“shell”中使用 StartInfo.EnvironmentVariables 设置相同的键。还是有另一种聪明的解决方案来解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:24:38.847

进程可以检查键“TMP_VAR”是否存在，而不是添加，如果存在则相应地更改值。

```
if(StartInfo.EnvironmentVariables.ContainsKey("TMP_VAR"))
    StartInfo.EnvironmentVariables["TMP_VAR"] = "C:/temp/sim";
else
    StartInfo.EnvironmentVariables.Add("TMP_VAR", "C:/temp/sim"); 
```

# java - 如何使用eclipse从php返回到android客户端的数据？

> ID：10716801
> 
> 赞同：0
> 
> 时间：2012-05-23T09:10:13.990
> 
> 标签：java, android, eclipse

我正在使用 eclipse 开发一个 Android 应用程序。应用程序将用户名和密码发送到 php（服务器端），如果用户不存在，则返回“未找到”....

现在我不想使用 json :-)

我的问题是我不能对返回字符串做 EQUAL ！！！它不工作

```
if(text=="not found") ShowMessage("Invalid user and password !!"); 
```

或者

```
if(text==getResources().getString(R.string.wronguser))
    ShowMessage("Invalid user and password !!"); 
```

我尝试了 .equal(..) 函数但它不起作用....

当我将返回值分配给 textview 时，它显示“未找到”，那么为什么 == OR .equal 不起作用？？？？

我的 php 使用 UTF-8 编码...谢谢 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:12:16.280

在 Java 中，字符串应该使用`.equals`. （`==`执行身份比较，同时`.equals`比较实际内容。）

所以从改变开始

```
if (text=="not found") ... 
```

到

```
if (text.equals("not found")) ... 
```

等等

如果这似乎不起作用，请确保字符串不包含意外的前导/尾随空格。您可能还想忽略大小写：

```
if (text.trim().equalsIgnoreCase("not found")) ... 
```

# batch-file - 批处理文件执行启动、运行、%TEMP% 和删除所有

> ID：10716803
> 
> 赞同：12
> 
> 时间：2012-05-23T09:10:19.383
> 
> 标签：batch-file

寻找一种方法来执行以下操作：

开始 > 运行 > "%TEMP% > 删除所有内容（跳过任何冲突）。

到目前为止我有

```
@echo off
start %TEMP%
DEL *.* 
```

我想我可以使用 CD 进入文件夹，我想知道是否有任何实例无法删除一个对话框，我想跳过这些。

谢谢您的帮助！利亚姆

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-23T09:23:52.203

`del`不会触发任何对话框或消息框。但是，您有一些问题：

1.  `start`只会打开无用的资源管理器。您需要`cd`更改批处理文件的工作目录（在`/D`那里，它在从不同驱动器运行时也可以工作）：

    ```
    cd /D %temp% 
    ```

2.  您可能还想删除目录：

    ```
    for /d %%D in (*) do rd /s /q "%%D" 
    ```

3.  您还需要跳过问题`del`并删除只读文件：

    ```
    del /f /q * 
    ```

所以你到达：

```
@echo off
cd /D %temp%
for /d %%D in (*) do rd /s /q "%%D"
del /f /q * 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-13T07:33:07.157

以下批处理命令用于删除系统上的所有临时、最近和预取文件。

在本地系统上将以下代码另存为“Clear.bat”

```
*********START CODE************

@ECHO OFF

del /s /f /q %userprofile%\Recent\*.*

del /s /f /q C:\Windows\Prefetch\*.*

del /s /f /q C:\Windows\Temp\*.*

del /s /f /q %USERPROFILE%\appdata\local\temp\*.*

/Below command to Show the folder after deleted files

Explorer %userprofile%\Recent

Explorer C:\Windows\Prefetch

Explorer C:\Windows\Temp

Explorer %USERPROFILE%\appdata\local\temp

*********END CODE************ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T09:30:28.237

如果你想删除文件`%TEMP%`夹中的所有文件，你可以这样做：

```
del %TEMP%\*.* /f /s /q 
```

这将删除所有内容，任何具有任何扩展名的`*.*`文件（`/s``/q``/f`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-31T23:08:46.167

cd C:\Users\%username%\AppData\Local rmdir /S /Q Temp

del C:\Windows\Prefetch*.* /Q

德尔 C:\Windows\Temp*.* /Q

del C:\Users\%username%\AppData\Roaming\Microsoft\Windows\Recent Items*.* /Q pause

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-31T05:02:57.697

```
@echo off
RD %TEMP%\. /S /Q

::pause
explorer %temp% 
```

这批可以在任何地方运行。RD 代表删除目录，但这可以删除可删除的文件夹和文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-12T20:07:03.143

只需使用

```
del /f /q C:\Users\%username%\AppData\Local\temp 
```

它会起作用。

**注意：**它会删除整个文件夹，但是 Windows 会根据需要重新制作它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-11T14:09:05.783

```
@echo off    
del /s /f /q %windir%\temp\*.*    
rd /s /q %windir%\temp    
md %windir%\temp    
del /s /f /q %windir%\Prefetch\*.*    
rd /s /q %windir%\Prefetch    
md %windir%\Prefetch    
del /s /f /q %windir%\system32\dllcache\*.*    
rd /s /q %windir%\system32\dllcache    
md %windir%\system32\dllcache    
del /s /f /q "%SysteDrive%\Temp"\*.*    
rd /s /q "%SysteDrive%\Temp"    
md "%SysteDrive%\Temp"    
del /s /f /q %temp%\*.*    
rd /s /q %temp%    
md %temp%    
del /s /f /q "%USERPROFILE%\Local Settings\History"\*.*    
rd /s /q "%USERPROFILE%\Local Settings\History"    
md "%USERPROFILE%\Local Settings\History"    
del /s /f /q "%USERPROFILE%\Local Settings\Temporary Internet Files"\*.*    
rd /s /q "%USERPROFILE%\Local Settings\Temporary Internet Files"    
md "%USERPROFILE%\Local Settings\Temporary Internet Files"    
del /s /f /q "%USERPROFILE%\Local Settings\Temp"\*.*    
rd /s /q "%USERPROFILE%\Local Settings\Temp"    
md "%USERPROFILE%\Local Settings\Temp"    
del /s /f /q "%USERPROFILE%\Recent"\*.*    
rd /s /q "%USERPROFILE%\Recent"    
md "%USERPROFILE%\Recent"    
del /s /f /q "%USERPROFILE%\Cookies"\*.*    
rd /s /q "%USERPROFILE%\Cookies"    
md "%USERPROFILE%\Cookies" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-16T13:10:21.293

```
@echo off
del /s /f /q c:\windows\temp\*.*
rd /s /q c:\windows\temp
md c:\windows\temp
del /s /f /q C:\WINDOWS\Prefetch
del /s /f /q %temp%\*.*
rd /s /q %temp%
md %temp%
deltree /y c:\windows\tempor~1
deltree /y c:\windows\temp
deltree /y c:\windows\tmp
deltree /y c:\windows\ff*.tmp
deltree /y c:\windows\history
deltree /y c:\windows\cookies
deltree /y c:\windows\recent
deltree /y c:\windows\spool\printers
del c:\WIN386.SWP
cls 
```

# c# - 简单的即时窗口

> ID：10716808
> 
> 赞同：-1
> 
> 时间：2012-05-23T09:10:42.323
> 
> 标签：c#, visual-studio, scripting

我正在构建一个类似于 Visual Studio 中的即时窗口。我只是尝试在 Textedit 中编译文本。现在我的问题：我如何进入我正在运行的程序的范围？是否可以更改我的程序的值或列表？那是我当前的编译代码：

```
 private void SimpleButtonCompileClick(object sender, EventArgs e)
    {
        CompilerParameters compilerParameters = new CompilerParameters();
        compilerParameters.GenerateExecutable = true;
        compilerParameters.GenerateInMemory = true;
        compilerParameters.TreatWarningsAsErrors = true;
        compilerParameters.CompilerOptions = "/nowarn:1633";
        String sourceCode = "";
        string pattern =
                "\\s*#pragma\\s+reference\\s+\"(?<path>[^\"]*)\"\\s*";
        System.Text.RegularExpressions.Match match = System.Text.RegularExpressions.Regex.Match(sourceCode, pattern);
        if (match.Success)
            compilerParameters.ReferencedAssemblies.Add(match.Groups["path"].Value);
        // Specify .NET version
        Dictionary<string, string> providerOptions =
                new Dictionary<string, string>();
        providerOptions.Add("CompilerVersion", "v3.5");
        CSharpCodeProvider provider = new CSharpCodeProvider(providerOptions);
        // Compile source           
        CompilerResults results = provider.CompileAssemblyFromSource(compilerParameters, new string[] {sourceCode});
        // Show errors
        if (results.Errors.HasErrors)
        {
            String errorString = "";
            foreach (var err in results.Errors)
                errorString += err + "\n";
            XtraMessageBox.Show(errorString);
        }
        else
        {
            // Invoke compiled assembly's entry point
            results.CompiledAssembly.EntryPoint.Invoke
                    (null, new object[0] {});
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:35:28.673

我知道您有一种方法（一个按钮？一个组合键？），它会打开一个表单，您可以在其中输入您想要编译和执行的代码。由于 Invoke 是在同一个进程和 AppDomain 中执行的，因此您可以访问正在运行的程序中的所有内容，只要您有一个访问点即可访问您想要访问的内容。

例如，它可以是您的一个类中的公共静态变量。或者，要获得特定的表单，您可以使用 Application.OpenForms 并循环通过 FormCollection 寻找具有正确类型的表单。

# sql - 对 WITH 语句内的视图进行全文搜索

> ID：10716809
> 
> 赞同：2
> 
> 时间：2012-05-23T09:10:42.693
> 
> 标签：sql, sql-server, sql-server-2008, tsql, common-table-expression

我有以下问题。执行下面的查询时，我收到以下错误：

> 消息 0，级别 11，状态 0，行 0 当前命令发生严重错误。结果，如果有的话，应该丢弃。Msg 0, Level 20, State 0, Line 0 当前命令发生严重错误。结果，如果有的话，应该丢弃。

```
WITH PagingRows AS 
    ( 
        Select 
            ROW_NUMBER() Over (Order By LastName ASC) As Row,AddressBookId 
        FROM 
            AccountView  
        WHERE 
        (
            [AccountView].[AddressBookId] IN 
            (
               SELECT [key] FROM CONTAINSTABLE([AccountView],*,'"searchword*" ')
            )
        )
    ) 
    Select 
        [t0].*
    From
        PagingRows c    
        Inner Join AccountView t0 on c.AddressBookId = t0.AddressBookId 
    Where 
        c.Row Between 0 + 1 AND 0 + 50 
    Order By c.Row Asc FOR XML AUTO, ELEMENTS XSINIL 
```

“AccountView”是一个全文索引的视图。部分查询也可以单独工作。因为下面的查询执行没有问题。

```
SELECT 
    ROW_NUMBER() Over (Order By LastName ASC) As Row,AddressBookId 
FROM 
    AccountView  
WHERE 
    [AccountView].[AddressBookId] IN (
        SELECT [key] FROM CONTAINSTABLE([AccountView],*,'"searchword*" ')
    ) 
```

如果“AccountView”视图被表替换，则查询确实可以正常工作。我想知道如何解决这个问题以及错误的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:17:05.170

有可用于此问题的修补程序：[KB 2421014](http://support.microsoft.com/kb/2421014)

# tableview - TableView 并不总是调整列的大小

> ID：10716811
> 
> 赞同：1
> 
> 时间：2012-05-23T09:10:55.797
> 
> 标签：tableview, javafx-2

我有一个带有 CONSTRAINED_RESIZE_POLICY 列调整大小策略的 TableView。当我手动调整窗口大小时效果很好，但是当我最大化它或从最大化状态恢复它时，列不会调整。

有没有办法在 TableView 上强制“刷新”，以便在这些情况下调整列的大小？

**更新**：重现问题的示例可编译代码

```
public class TableViewResizeTest extends Application {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) {

    primaryStage.setTitle("TableView resize demo");

    ObservableList<Room> roomsList = FXCollections.observableArrayList();

    final TableView rooms = new TableView();
    TableColumn icons = new TableColumn();
    TableColumn name  = new TableColumn("Name");
    TableColumn topic = new TableColumn("Topic");
    TableColumn users = new TableColumn("Users");

    rooms.getColumns().addAll(icons, name, topic, users);

    name.setCellValueFactory( new PropertyValueFactory<Room,String>("name"));
    topic.setCellValueFactory( new PropertyValueFactory<Room,String>("topic"));
    users.setCellValueFactory( new PropertyValueFactory<Room,String>("users"));
    icons.setCellValueFactory( new PropertyValueFactory<Room,String>("icons"));

    name.setMinWidth(50);
    name.setMaxWidth(450);
    topic.setMinWidth(10);
    users.setMinWidth(100);
    users.setMaxWidth(150);

    icons.setMaxWidth(35);
    icons.setMinWidth(35);
    // Room resize policy, this is almost perfect
    rooms.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);

    for (int i = 1; i<50; i++) roomsList.add(new Room("Sample Room "+i));
    rooms.setItems(roomsList);
    BorderPane root = new BorderPane();
    root.setCenter(rooms);
    primaryStage.setScene(new Scene(root, 500, 460));
    primaryStage.show();

}

public class Room {

    public Room(String name) {

        this.name = new SimpleStringProperty(name);
        this.topic= new SimpleStringProperty("This is a sample description text");
        this.icon= new SimpleStringProperty("");
        nUsers = (int)(Math.random()*1000);
        this.users= new SimpleStringProperty(nUsers.toString());
    }    

    Integer nUsers;

    private SimpleStringProperty name;
    private SimpleStringProperty topic;
    private SimpleStringProperty users;
    private SimpleStringProperty icon;

    public String getName() {
        return name.get();
    }

    public void setName(String name) {
        this.name.set(name);
    }

    public String getTopic() {
        return topic.get();
    }

    public void setTopic(String topic) {
        this.topic.set(topic);

    }

    public String getUsers() {
        return nUsers.toString();
    }

    public void setUsers(String users) {
        this.users.set(users);
    }

    public String getIcon() {
        return icon.get();
    }

    public void setIcon(String icon) {
        this.icon.set(icon);
    }
}   

} 
```

根据调整大小政策，最后一列“用户”必须始终可见，如果您手动调整表单大小，它可以正常工作。但是，如果您尝试最大化和恢复几次，您会看到它脱离了视图，直到您手动调整窗口大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:07:32.713

我想你想用最大和最小宽度边界限制名称、用户和图标列，而主题列占用其余的可用空间。作为一种解决方法，我建议将主题列放在列的末尾，即`rooms.getColumns().addAll(icons, name, users, topic);`.

# jquery - Jquery mobile中的Jquery自动完成问题

> ID：10716812
> 
> 赞同：1
> 
> 时间：2012-05-23T09:10:56.680
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-mobile, cordova

我正在开发一个 jquery 移动项目，该项目需要 jquery 自动完成表单。由于移动浏览器上自动完成菜单的一些滚动问题（我无法在移动浏览器上滚动），我决定使用 JScrollPane.js 为我的自动完成菜单实现自定义滚动条，并且成功地实现了滚动条自动完成，但现在的问题是，滚动条仅适用于第一次搜索，例如：当我输入“a”时，它会显示带有自定义滚动条的“a”的所有结果 anu 菜单是可滚动的，但当我再次输入'，自定义滚动条消失，我们无法滚动自动完成菜单的内容...

[http://jsfiddle.net/uXbKY/2/](http://jsfiddle.net/uXbKY/2/)

第一次搜索后的所有后续搜索都会出现同样的问题，这是 Jquery 中的问题还是我需要更改任何代码？

任何帮助将不胜感激..

提前致谢..

# html - 与链接标签不同的样式标签中导入文件名.css的速度如何与css文件相关

> ID：10716819
> 
> 赞同：0
> 
> 时间：2012-05-23T09:11:24.190
> 
> 标签：html, css

如何以样式标签中的导入文件名.css 与链接标签不同的速度与 css 文件相关。？我很困惑，他们都做了同样的事情来提供 css 文件路径。我正在使用这个

```
<style>
@import "filename.css";
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:14:42.430

- 链接是在您的网页上包含外部样式表的第一种方法。它旨在将您的网页与样式表链接在一起。它被添加到您的 HTML 文档中，如下所示：

@import - 导入允许您将一个样式表导入另一个样式表。这与链接方案略有不同，因为您可以在链接的样式表中导入样式表。但是如果你在 HTML 文档的头部包含一个 @import，它会这样写：

@import url("styles.css");

更多信息：[http ://webdesign.about.com/od/beginningcss/f/css_import_link.htm](http://webdesign.about.com/od/beginningcss/f/css_import_link.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:14:50.253

永远不要使用**@import** ，`stylesheet`因为它`block parallel`会影响页面性能的下载。

始终**`<link rel="stylesheet" href="stylesheet.css" >`**用于`stylesheet`.

# perl - 如何按元素对两个列表求和

> ID：10716823
> 
> 赞同：3
> 
> 时间：2012-05-23T09:11:43.117
> 
> 标签：perl, list

我想逐行解析一个文件，每个文件都包含两个整数，然后将这些值加到两个不同的变量中。我天真的方法是这样的：

```
my $i = 0;
my $j = 0;
foreach my $line (<INFILE>)
{
    ($i, $j) += ($line =~ /(\d+)\t(\d+)/);
} 
```

但它会产生以下警告：

> 在 void 上下文中无用地使用私有变量

暗示诉诸 += 运算符会触发以标量而不是列表上下文对左侧进行评估（如果我在这一点上错了，请纠正我）。

是否可以在不借助数组或中间变量的情况下优雅地（可能在一行中）实现这一点？

* * *

相关问题：[如何在 Perl 中按元素对数组求和？](https://stackoverflow.com/questions/1865910/how-can-i-sum-arrays-element-wise-in-perl)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:15:46.937

不，这是因为表达式`($i, $j) += (something, 1)`解析为仅添加`1`到`$j`，而`$i`在 void 上下文中挂起。Perl 5 没有超级运算符或赋值运算符的自动压缩，例如`+=`. 这有效：

```
my ($i, $j) = (0, 0);
foreach my $line (<INFILE>) {
    my ($this_i, $this_j) = split /\t/, $line;
    $i += $this_i;
    $j += $this_j;
} 
```

您可以通过使用复合数据结构而不是列的命名变量来避免重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:37:24.440

首先，您成对添加数组的方式不起作用（您自己发布的相关问题在那里给出了一些提示）。

对于解析部分：拆分行怎么样？如果您的行被相应地格式化（空格应该不是问题）。

```
split(/\t/, $line, 2) 
```

如果你真的，真的想在一行中做到这一点，你可以做这样的事情（虽然我不认为你会称之为优雅）：

```
my @a = (0, 0);
foreach my $line (<INFILE>)
{
    @a = map { shift(@a)+$_ } split(/\t/, $line, 2);
} 
```

对于`@lines = ("11\t1\n", " 22 \t 2 \n", "33\t3");`它的输入给了我`@a = (6, 66)`

我建议您使用我的答案的拆分部分，而*不是加起来的部分*。使用多条线没有错！如果它使您的意图更清晰，那么多行总比一行好。但是现在我几乎不再使用 perl，而是使用 python，所以我的 perl 编码风格可能会在那里产生“坏”的影响......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T13:42:06.743

每次添加都可以交换对，这意味着您总是在每对中添加相同的元素。（如果需要，这可以推广到旋转多元素数组。）

```
use strict;
use warnings;

my @pair = (0, 0);

while (<DATA>) {
  @pair = ($pair[1], $pair[0] + $_) for /\d+/g;
}

print "@pair\n";

__DATA__
99 42
12 15
18 14 
```

**输出**

```
129 71 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:52:01.447

这是另一种选择：

```
use Modern::Perl;

my $i = my $j = 0;

map{$i += $_->[0]; $j += $_->[1]} [split] for <DATA>;

say "$i - $j";

__DATA__
1   2
3   4
5   6
7   8 
```

输出：

```
16 - 20 
```

# fullcalendar - 仅显示月份中的 allDay 事件 查看完整日历

> ID：10716825
> 
> 赞同：0
> 
> 时间：2012-05-23T09:11:49.053
> 
> 标签：fullcalendar

如何在完整日历月视图中仅显示 allDay = true 事件，并在其他视图中显示剩余的非所有 Day 事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:18:33.427

您可以通过在 eventRender 之类的回调中检查 view.name 来做到这一点。看看这个小提琴：http: [//jsfiddle.net/100thGear/vyKSZ/](http://jsfiddle.net/100thGear/vyKSZ/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T06:21:22.907

```
 $('#external-events div.external-event').each(function() {
        // store data so the calendar knows to render an event upon drop
        $(this).data('event', {
            title: $.trim($(this).text()), // use the element's text as the event title
            stick: true // maintain when user navigates (see docs on the renderEvent method)
        });
        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 1111999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });
    });
    /* initialize the calendar
     -----------------------------------------------------------------*/
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek'
        },
        editable: true,
        droppable: true, // this allows things to be dropped onto the calendar
        drop: function() {
            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
                // if so, remove the element from the "Draggable Events" list
                $(this).remove();
            }
        },
        eventDrop: function(event, delta, revertFunc) {
            alert( event.id );
            $.ajax({
                type: "POST",
                url: "${pageContext.request.contextPath}/task/periodic-task-update",
                data : {
                    id : event.id , 
                    date :event.start.format()
                },
                success: function(data) {
                     if(data=='Task Period Succesfully Changed'){
                        toastr.success("Task Period Succesfully Changed.");
                    }else{
                        toastr.success("Something Wrong");
                        revertFunc();
                    } 
                },
                error: function(data,textStatus,xhr) {
                    toastr.success("Something Wrong");
                    revertFunc();
                }       
            });
        },
        events: [
                <c:forEach var='periodicTask' items='${periodicTaskTemplates}'>
                    <c:forEach  varStatus="i" begin = "1" end = "12">
                        { id: '${periodicTask.id}', title: '${periodicTask.task}', start: new Date(y,  '${i.index}', '${periodicTask.startDate}'), end: new Date(y, '${i.index}', '${periodicTask.lastDate}') ,type:'${periodicTask.description}',location:'${periodicTask.location.name}'},
                    </c:forEach>
                </c:forEach>`
        ],
    }); 
```

# java - JoptionPane ShowConfirmDialog

> ID：10716828
> 
> 赞同：3
> 
> 时间：2012-05-23T09:12:03.693
> 
> 标签：java, swing, if-statement, conditional, joptionpane

我有一个 Java 程序。当我运行程序时，它会给我一个我附加的 GUI。

当我想关闭它时，它会提示一个确认对话框。如果我按下是按钮，它将使用`System.exit()`.

```
public static void main(String args[])
{
    ButtonTest app = new ButtonTest( );
    app.addWindowListener( 
        new WindowAdapter( )
        {
            public void windowClosing (WindowEvent e)
            {
                String message = " Really Quit ? ";
                String title = "Quit";
                int reply = JOptionPane.showConfirmDialog(null, message, title, JOptionPane.YES_NO_OPTION);
                if (reply == JOptionPane.YES_OPTION)
                {
                    System.exit(0);
                }

            }
        }
    );
} 
```

如果我不想退出程序，我该怎么办？`System.continued()`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:14:43.767

在这种情况下你不需要 else

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T09:15:18.683

尝试设置这个，

```
app.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE) 
```

**[已编辑]**

所以，你的代码会变成这样，

```
public static void main(String args[]) {
    ButtonTest app = new ButtonTest();
    app.addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            int reply = JOptionPane.showConfirmDialog(null,
                    "Really Quit ?", "Quit", JOptionPane.YES_NO_OPTION);
            if (reply == JOptionPane.YES_OPTION)
                System.exit(0);
        }
    });
    app.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
    app.setSize(640, 480);
    app.setVisible(true);
} 
```

**[解释]**

你可能会想为什么会这样。`JFrame`与 不同的是，窗口关闭按钮的行为`Frame`是隐藏窗口。因此，无论如何它都会隐藏/关闭窗口。但是当你指定它也必须退出程序时，当用户点击`yes`. 然后，除了关闭窗口之外，它还退出程序。当用户点击时`no`，它什么都不做，只是关闭窗口。因此，您必须明确告诉它`DO_NOTHING_ON_CLOSE`.

**[文档]**

> 与 Frame 不同，JFrame 有一些关于当用户试图关闭窗口时如何响应的概念。默认行为是在用户关闭窗口时简单地隐藏 JFrame。要更改默认行为，请调用方法 setDefaultCloseOperation(int)。要使 JFrame 的行为与 Frame 实例相同，请使用 setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE)。

参考：[JFrame 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:20:26.940

如果你问我，我会选择 on`YES SELECTION`而不是突然关闭我的应用程序`System.exit(0)`，我会选择关闭我的应用程序的优雅方式，使用`frameObject.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`and on `NO SELECTION`，我会选择`frameObject.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE)`。这是一个示例程序，可以帮助您：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ApplicationCloseExample
{   
    private void displayGUI()
    {
        final JFrame frame = new JFrame("Application Close Example");

        frame.addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent we)
            {
                int result = JOptionPane.showConfirmDialog(
                                frame, "Do you want to Exit ?"
                                , "Exit Confirmation : ", JOptionPane.YES_NO_OPTION);
                if (result == JOptionPane.YES_OPTION)               
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                else if (result == JOptionPane.NO_OPTION)   
                    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
            }
        });

        frame.setSize(300, 300);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ApplicationCloseExample().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T16:55:16.313

If you want the program to continue when you press NO, place the rest of your code in else block or call the function where you have placed the rest of your code.

Removing else block is also an option if you don't want to place any action on the NO button because the JOptionPane.showConfirmDialog() will close anyways. You can continue with rest of your code after the if statement.

FYI- There is no System.continue(). The program pretty much does that on it's own.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T20:08:27.297

您可以添加一个`else`块。如果你想再次运行 main 方法（我假设你这样做），它应该看起来像这样。如果用户选择否，您应该有一些您运行的方法，无论是主要方法`main(null)`还是其他方法。

```
public static void main(String args[])
{
ButtonTest app = new ButtonTest( );
app.addWindowListener( 
        new WindowAdapter( )
        {
            public void windowClosing (WindowEvent e)
            {
                String message = " Really Quit ? ";
                String title = "Quit";
                int reply = JOptionPane.showConfirmDialog(null, message, title, JOptionPane.YES_NO_OPTION);
                if (reply == JOptionPane.YES_OPTION)
                {
                    System.exit(0);
                } 
                else 
                {
                  //whatever you plan on running instead here, instead of quitting,
                  //main(null) to run the main method, or put another method if you want
                }
            }
        }
    );
} 
```

# apex-code - 我们可以动态设置“列表”属性的值吗 零件？

> ID：10716844
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:11.270
> 
> 标签：apex-code, visualforce

我正在尝试为对象设计一个通用的详细信息页面。

在控制器类中，我找到了该对象的所有子关系的列表。

然后我想为找到的每个子关系创建，为了实现这一点，我必须在其中动态设置列表属性的值。

例如 ：

```
<apex:relatedList subject={!ObjName} list="{!relatedListName}" /> 
```

但是这里的问题是 list 属性只接受 String 文字，所以不能实现它。请提出一种实现此要求的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T10:05:18.453

是的，您可以在相关列表标签上动态设置“列表”属性的值，并且您可以通过 Dynamic Visualforce 执行此操作。这个问题已经在 Salesforce Stack exchange 上针对任何未来的浏览器提出并简明地回答：

[https://salesforce.stackexchange.com/questions/7531/apexrelatedlist-list-dontexistinalorgs-c-only-solveable-with-dynamic](https://salesforce.stackexchange.com/questions/7531/apexrelatedlist-list-dontexistinallorgs-c-only-solveable-with-dynamic)

这是一般的解决方案：

在自定义控制器中，添加一个函数以动态生成相关列表标记。我将从您的措辞中假设您已经访问了控制器中的子关系的完整列表，因此为了在一个块中吐出所有列表，我将使用如下内容：

```
public Component.Apex.OutputPanel getDynamicList() 
{
    Component.Apex.OutputPanel outPanel = new Component.Apex.OutputPanel();

    for(String id : childNames) {
       Component.Apex.RelatedList relList = new Component.Apex.RelatedList();
       relList.list = id;
       outPanel.childComponents.add(relList);
    }

    return outPanel;
} 
```

在中间，您可以动态地将任何字符串设置为“列表”值，并且通过遍历字符串列表，您可以一遍又一遍地添加相关的列表对象。（要简单地添加一个列表，请删除 for 循环，并将“id”字符串值设置为您希望显示的任何特定关系）。

然后在您的 visualforce 页面上，您可以使用动态 visualforce 标签呈现此块：

```
<apex:dynamicComponent componentValue="{!DynamicList}" /> 
```

（你可能知道，公式值字段会自动挖掘 getter）

巨大的成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:48:56.907

我建议尝试使用[apex:dataTable](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_dataTable.htm)或[apex:repeat](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_repeat.htm)来构建您自己的列表显示。您可能需要一个[包装类](http://wiki.developerforce.com/page/Wrapper_Class)来处理将属性和值从 sObject 传递到页面。

# c++ - 用 C++ 编写一个简单的事件调度器——如何避免自引用和递归问题？

> ID：10716845
> 
> 赞同：1
> 
> 时间：2012-05-23T09:13:21.973
> 
> 标签：c++, events, event-handling

我正在尝试用 C++ 编写一个简单的事件调度程序。我对这个特殊的领域很陌生，所以请原谅我的无知。

对于调度过程，我有以下接口：

```
class listener
{
    public:
       virtual void triggerEvent(int id)=0;
}; 
```

然后合并它，我简单地实现它：

```
class A : public listener
{
    public:
           A();
           void triggerEvent(int event);
           .
           .
           .
           B* b;
}; 
```

在有一个名为 listener_ 的侦听器指针指向 A 对象的类中，可以触发 A 中的事件，如下所示，

```
 void B::method()
 {
       .
       .
       .
       listener_->triggerEvent(DO_SOMETHING); // calling point
 } 
```

但现在的问题是，A 也有一个指向 B 对象的指针，这样当调用 A 的 triggerEvent 实现时，会再次调用 B::method()，即：

```
 void A::triggerEvent(int id)
 {
      if(id==DO_SOMETHING)b->method();
 } 
```

这会导致递归问题。

理想情况下，我希望 B::method() 中的“调用点”立即从堆栈中释放。我该怎么做才能防止上述递归问题？我的事件调度程序设计有什么问题？我如何解决它？

编辑：上面显示的是一个非常极端的例子。在实际情况中，A 实际上可能是某个“控制线程”。然后，B 可能是一个单独的算法，需要在控制线程完成时指示控制线程，以便 A 可以继续进行进一步的操作。B::method 也可能是一个线程。

谢谢和最良好的祝愿，

本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:16:19.580

您正在实施**观察者模式**。

> 我的事件调度程序设计有什么问题？

您调用在事件处理程序中触发事件的方法的事实。您通过不调用该方法来修复它。

# jquery - IE8 和 jQuery 中的非英文文本

> ID：10716846
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:22.847
> 
> 标签：jquery, internet-explorer-8

我正在尝试将我的语言（希伯来语）的字符串传递给脚本。我已经建立[了这个](http://s-maof.com/shorts/shorts_table.php)页面

其中包含输入文本

```
<input type="text" class="filter"  id="Filter"/> 
```

和一个脚本来在更改时获取文本，然后表格过滤掉结果

```
 <script> 
    $('#Filter').change(function() {
    var str = $('#Filter').val();
    str = str.replace(/[\s]/g, '_'); //replcae spaces to "_" (Otherwise we get errors) 
   $('#Table').load('printShorts.server.php?Sortby=<?echo $sort;?>&dir=<?echo    $direction;?>&filter='+str+'&no-cache=' + (new Date()).getTime() ).fadeIn("slow");

});
</script> 
```

它传递了巨大的价值 - 在 FF 和 chrome 中。问题从 IE8（可能是 9）开始，你们建议我做什么？我什至不知道是否有像firebug这样的IE调试软件。

另外，如果您在页面中注意到，我像这样使用 UTF8

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

1.  另一个问题 - 我不知道为什么向上和向下箭头仅在 IE 中呈现蓝色边框！这是怎么回事？

帮助将被appriciated..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:17:44.400

请记住，您必须以某种 UTF-8 格式保存文件，您可以在文本/代码编辑器中进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:30:11.960

根据您提供的有关实际错误的少量信息，我将猜测问题所在。您没有对 str 参数进行 URL 编码，并且是 utf-8，可能会请求 URL 中无效的字符。Chrome 和 FF 可以优雅地处理其中一些问题，可能是 IE8 没有（以前的版本没有）

而不是`+str+`然后使用`+encodeURIComponent(str)+`

这将对 str 中的内容进行编码并确保生成的 URL 有效

# jpa - 如何构建搜索条件是对象的多个属性的jpql查询？

> ID：10716847
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:25.603
> 
> 标签：jpa

我在通过 JPA 查询数据库时遇到问题。有异常：

```
org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterDescriptor(ParameterMetadata.java:80)
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterExpectedType(ParameterMetadata.java:86)
    at org.hibernate.internal.AbstractQueryImpl.determineType(AbstractQueryImpl.java:444)
    at org.hibernate.internal.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:416)
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:440)
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:67)
    at com.lawa.service.impl.SubjectServiceImpl.getTotal(SubjectServiceImpl.java:746)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
```

我的代码是：

```
@Transactional(propagation=Propagation.REQUIRED)
    public long getTotal(PSubject search) {
        StringBuilder jsql = new StringBuilder("select count(*) from PSubject p where p.id=p.id ");
        ArrayList paramValues  = new ArrayList();
        if(search.getName()!=null && search.getName().trim().length()>0) {
            jsql.append(" and p.name=:name");
            paramValues.add(search.getName().trim());
        }
        if(search.getType()!=null && search.getType().trim().length()>0) {
            jsql.append(" and p.type=:type");
            paramValues.add(search.getType().trim());
        }
        if(search.getMacaddress()!=null && search.getMacaddress().trim().length()>0) {
            jsql.append(" and p.macaddress=:macaddress");
            paramValues.add(search.getMacaddress().trim());
        }
        if(search.getUri()!=null && search.getUri().trim().length()>0) {
            jsql.append(" and p.uri=:uri");
            paramValues.add(search.getUri().trim());
        }
        if(search.getDescription()!=null && search.getDescription().trim().length()>0) {
            jsql.append(" and p.description=:description");
            paramValues.add(search.getDescription().trim());
        }
        if(search.getCreateTime()!=null) {
            jsql.append(" and p.createTime=:createTime");
        }
        Query query = persistService.getEntityManager().createQuery(jsql.toString());
        for(int i=0;i<paramValues.size();i++) {
            query.setParameter((i+1), paramValues.get(i));
        }
        if(search.getCreateTime()!=null) {
            query.setParameter(":createTime",search.getCreateTime(),TemporalType.DATE);
        }
        Long count = (Long)query.getSingleResult();
        return count;
    } 
```

首先我想让代码工作，我不喜欢代码。我觉得不干净，我要一个一个地验证“PSubject”的每个属性并联系jpql，我必须选择“createTime”，因为它的类型是“Date”。更何况我在jpql里面加了“p.id=p.id”，感觉不太好。

请帮助我解决异常并提供最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:20:37.590

如果使用命名参数，则应按名称绑定它们：

```
query.setParameter("macaddress", theMacAddress); 
```

因此，您应该使用 Map 来保存按名称索引的参数值。

但这种动态查询正是设计 JPA 标准 API 的原因。你应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T10:17:29.530

您应该使用 Criteria 而不是 Query。它非常适合这个用例。

# wpf - 在 WPF 中更新“3 分钟前”类型文本的最有效方法

> ID：10716851
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:38.210
> 
> 标签：wpf, xaml, mvvm, dispatcher

我目前在 XAML 中使用 valueconverters 以“x 分钟前”格式显示我的视图模型 DateTime 字段。我需要定期更新它们而不会造成太多开销。在任何时候，我都有十几个在屏幕上，几十个在屏幕外。什么是最好的策略？

1.  在 viewmodel 对象的构造函数中，让它们将自己注册到静态“ViewRefresher”，该静态“ViewRefresher”会定期遍历所有对象并在注册字段上触发 PropertyChanged 处理程序。

2.  刷新包含我的对象的内容/项目控制对象

3.  还有什么？

我将继续尝试上述两种方法，同时等待答案并报告，以防它帮助其他人。

**更新：** 好的，感谢 csteinmueller 将我置于事件路径上。比注册/注销对象要干净得多。我相信以下策略不应该泄漏。

```
public class DateTimeC: INotifyPropertyChanged
{
    public DateTime DT {get; set;}
    public event PropertyChangedEventHandler PropertyChanged;

    public DateTimeC(DateTime dt)
    {
        DT = dt;
        ViewRefresher.FiveSecondsTick += () =>
           { PropertyChanged(this, new PropertyChangedEventArgs("DT")); };
    }

}

public delegate void TickHandler();

public static class ViewRefresher
{
    private static DispatcherTimer dt = new DispatcherTimer();
    private static int counter = 0;

    public static event TickHandler FiveSecondsTick;
    public static event TickHandler OneMinuteTick;

    static ViewRefresher()
    {
        dt.Interval = TimeSpan.FromSeconds(5);
        dt.Tick += Tick;
        dt.Start();
    }

    private static void Tick(object sender, EventArgs e)
    {
        if (FiveSecondsTick != null)
            FiveSecondsTick();

        if (counter++ != 12) return;

        counter = 0;

        if (OneMinuteTick != null)
            OneMinuteTick();
    }
} 
```

如果我可以直接从 DateTime 派生而不是作为字段内联，那就太好了，但它是密封的。

**更新 2**：这似乎确实有内存泄漏。您需要取消挂钩事件以将 DateTimeC 进行垃圾收集，或使用弱引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:20:19.577

我会选择一个 System.Timer 对象以及您的第一种方法（所有 ViewModel 都注册到静态类中的集合或事件）

```
Timer timer;
AutoResetEvent autoEvent = new AutoResetEvent(true);
TimerCallback callback = new TimerCallback(MyCallback);

timer = new Timer(callback, autoEvent, new TimeSpan(0), new Timespan(5)); 
```

# .htaccess - 通过重定向实现无扩展

> ID：10716852
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:40.480
> 
> 标签：.htaccess, redirect

我的网站有 500 多个动态页面，我已经制作了所有静态（相同）页面并使用 htaccess 文件中的以下规则重定向旧 url 或新 url：

```
RewriteCond %{QUERY_STRING} ^cid=2&gas=nitrogen$
RewriteRule ^purity\.php$ http://Example.com/gases/nitrogen.php? [R=301,L] 
```

并且通过使用此代码，我的所有页面现在都是静态 url

现在我想使它成为[http://www.Example.com/gases/nitrogen](http://www.Example.com/gases/nitrogen)（不带扩展名），为此我上传了以下规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^\ ]+)\.php\  [NC]
RewriteRule ^ /%1 [R=301] 
```

此代码实际上是将我的 php 页面重定向到非 php 页面，但出现 404 错误。

我无法弄清楚这个问题。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:03:39.277

您正在尝试做的事情有问题。你必须了解重写是如何工作的。您正在让您的网络服务器提供一个不存在的不同页面。因此，通过将丑陋的 url 发送到一个更好的 SEO 上，你是在说好的服务器给我这个页面。如果页面本身不存在，则服务器会发出 404 错误。您的重写应该来自您希望他们去的页面重定向到您的旧页面名称而不使用 [R] 参数，以便您的服务器知道，不要给这个页面，给另一个页面，不要让他们知道这是通过显示其他 url 来完成，这就是删除 [R] 所做的。然后为了防止无休止的重定向循环，不要将丑陋的页面名称重定向到新的页面名称。反而，只需显示重定向的 url，而不是带有所有这些丑陋参数的丑陋 URL。但是，由于您可能已经被索引并且搜索引擎知道丑陋的页面，我建议您不仅不要再链接到这些页面，而是在所有页面上使用新的页面名称进行导航和引用其他页面等操作，但我会在您的页面上添加规范元标记，告诉 Google 和其他搜索引擎您的首选网址是什么。如果您一开始没有任何搜索引擎知道您的 url 结构以及所有这些参数，那么您可以跳过使用规范元标记，因为如果您总是使用重写，搜索引擎将不会通过这些名称知道您的页面。我不仅建议不再链接到这些页面，并在所有页面上使用新页面名称进行导航和引用其他页面等操作，而且我会在你的页面上添加规范元标记，告诉 Google 和其他搜索引擎你的首选网址是。如果您一开始没有任何搜索引擎知道您的 url 结构以及所有这些参数，那么您可以跳过使用规范元标记，因为如果您总是使用重写，搜索引擎将不会通过这些名称知道您的页面。我不仅建议不再链接到这些页面，并在所有页面上使用新页面名称进行导航和引用其他页面等操作，而且我会在你的页面上添加规范元标记，告诉 Google 和其他搜索引擎你的首选网址是。如果您一开始没有任何搜索引擎知道您的 url 结构以及所有这些参数，那么您可以跳过使用规范元标记，因为如果您总是使用重写，搜索引擎将不会通过这些名称知道您的页面。

# actionscript-3 - AS3 旋转起始速度，然后随着时间的推移减速

> ID：10716860
> 
> 赞同：0
> 
> 时间：2012-05-23T09:13:58.760
> 
> 标签：actionscript-3, flash, animation, rotation

我得到了使我的对象连续旋转的代码

```
movieClip_2.addEventListener(Event.ENTER_FRAME, fl_RotateContinuously_2);

function fl_RotateContinuously_2(event:Event)
{
    movieClip_2.rotation += 100;

} 
```

我怎样才能让这个物体从 100 到 10 减慢 5 秒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:26:00.207

```
var fps:Number = stage.frameRate;
var step:int = 100;
var minStep:int = 10;
var time:Number = 5;
var increment:Number = (step - minStep) / (time * fps);

movieClip_2.addEventListener(Event.ENTER_FRAME, fl_RotateContinuously_2);

function fl_RotateContinuously_2(event:Event)
{
    movieClip_2.rotation += step;
    step -= increment;
    step = Math.max(minStep, step);
} 
```

# javascript - 替换 IE 8 及更低版本的 getElementsByClassName

> ID：10716867
> 
> 赞同：1
> 
> 时间：2012-05-23T09:14:32.943
> 
> 标签：javascript, jquery, innerhtml

我有一些看起来像这样的 html，我需要 address1 范围、城市范围和州范围类的 innerHTML 内容，分别用于不同的 std-address 类。

```
<div id="result-list">
            <div class="data">
                    <p class="std-address">
                        <span class="address1 range">some html content</span>
                        <span class="city range">some html content</span>
                        <span class="state range">some html content</span>

                    </p>
                    <p class="std-address">
                        <span class="address1 range">some html content</span>
                        <span class="city range">some html content</span>
                        <span class="state range">some html content</span>

                    </p>
                    <p class="std-address">
                        <span class="address1 range">some html content</span>
                        <span class="city range">some html content</span>
                        <span class="state range">some html content</span>

                    </p>
            </div>
</div> 
```

我编写了下面提到的代码，它工作正常，直到我在 IE 8 及更低版本上测试它

```
var addArrayX = document.getElementById("result-list").getElementsByClassName("std-address");

            for (i=0;i<addArrayX.length;i++){
                var address = addArrayX[i];
                stLine1 = trim(((address.getElementsByClassName("address1 range"))[0]).innerHTML);
                city = trim(((address.getElementsByClassName("city range"))[0]).innerHTML);
                state =  trim(((address.getElementsByClassName("state range"))[0]).innerHTML);
            } 
```

请帮助我使此代码与 IE 兼容（最好使用 js 或通过 jQuery）

这是 html [http://jsfiddle.net/H3HRN/9/​​的链接](http://jsfiddle.net/H3HRN/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:18:34.747

一般来说，如果有一个 DOM 函数不可用，请使用 polyfill 在不受支持的浏览器中实现类似的功能。对于许多功能，谷歌搜索`[name of method] + polyfill`会找到一段 js 代码，您可以将其包含在页面中，以使您的 js 跨浏览器工作。[这是 getElementsByClassName 的一个](https://gist.github.com/2299607)。

然而，如果你发现自己不得不填充大量的 DOM 方法，最好包含一个像 jQuery/Sizzle 这样的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:16:35.127

**jQuery方式：**

```
var innerHTML = $('.className').html(); 
```

如果你想要`resultList`id 的孩子：

```
var innerHTML = $('#resultList .className').html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:16:36.560

jQuery：

```
$('#resultList .stdAddress') 
```

恕我直言，如果您需要进行大量 DOM 选择，请继续使用 jQuery

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:18:26.203

在 jQuery 中，您的代码将如下所示：

```
$("#resultList .stdAddress").each(function() {
    var stLine1 = $.trim($(this).children(".address1").text());
    var city = $.trim($(this).children(".city").text());
    var state = $.trim($(this).children(".state").text());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:20:41.883

如果你想使用 jquery，那么试试这个：

```
 $("[id*='result-list']").find("p[class*='std-address']").each(function () {
        var address = $(this).children("span[class*=address1]").html();
        var city = $(this).children("span[class*=city]").html();
        var state = $(this).children("span[class*=state]").html();

    }); 
```

见这里：http: [//jsfiddle.net/H3HRN/20/](http://jsfiddle.net/H3HRN/20/)

# mercurial - 我可以在 Mercurial 中合并两个文件的历史记录吗？

> ID：10716873
> 
> 赞同：14
> 
> 时间：2012-05-23T09:14:43.927
> 
> 标签：mercurial

我需要将两个类的功能合二为一，但我想知道我是否也可以将它们的更改历史结合起来？

这两个类都包含许多以前的更改，因此我想将它们的更改历史记录在一个地方以供参考。我可以在组合类中发表评论，但在 IDE 中，获取已删除文件的历史记录并不容易。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T11:49:06.357

为此，您需要将文件合并记录为合并变更集。

假设变更集 0 是您当前的头，其中包含要合并到文件 C 中的文件 A 和 B。为此，请将文件 A 重命名为 C 并提交为变更集 1，然后更新回变更集 0，将文件 B 重命名为 C 和将此作为变更集 2 提交。接下来，合并这两个变更集，合并它们的内容并删除剩余的文件 A 和 B。这会导致 C 的文件历史记录为从 A 和 B 降序注册。最后，您可以重命名文件 C回到A。

生成的树如下所示：

```
0 [A, B] --- 1 [A, C] \
          \            \
           \ 2 [C, B] --- 3 [C] --- 4 [A] 
```

示例命令行流程：

```
$ hg init
$ echo a > a
$ echo b > b
$ hg add a b
$ hg commit -m "add files a and b"
$ hg mv a c
$ hg commit -m "rename a to c"
$ hg update 0
1 files updated, 0 files merged, 1 files removed, 0 files unresolved
$ hg mv b c
$ hg commit -m "rename b to c"
created new head
$ hg merge
merging c
warning: conflicts during merge.
merging c incomplete! (edit conflicts, then use 'hg resolve --mark')
0 files updated, 0 files merged, 1 files removed, 1 files unresolved
use 'hg resolve' to retry unresolved file merges or 'hg update -C .' to abandon
$ ls
c      c.orig
$ cat c
<<<<<<< local
b
=======
a
>>>>>>> other
$ echo ab > c
$ hg resolve --mark c
$ hg commit -m "merge a and b into c"
$ hg mv c a
$ hg commit -m "rename c back to a" 
```

如果您现在键入`hg log -f a`，您会注意到显示了两个文件的历史记录。

# gitorious - 如何删除 Gitorious 存储库

> ID：10716874
> 
> 赞同：1
> 
> 时间：2012-05-23T09:14:44.937
> 
> 标签：gitorious

我有一个可用的私人 Gitorious 服务器。在项目下`my_proj`，我创建了两个存储库`my_repo1`和`my_repo2`. 我想删除以后的存储库，但似乎找不到如何去做。

存储库的所有者是`+my_group (through ~my_user)`，我是该组的管理员。

**如何删除存储库？**

更新：

*   当我单击时，`my_repo2`即使我是管理员，我也没有“编辑存储库”选项`my_group`
*   我刚从 Gitorious 2.1.0 升级到 2.2.1 问题依然存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:16:06.520

转到 my_proj。

您会看到 my_repo1 和 my_repo2 列在那里。

单击 my_repo2 或要删除的存储库。

单击编辑存储库，在右侧您将看到删除存储库。单击它并确认，应该可以工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:27:25.647

有一个 python 脚本被调用`gmkrepo`来从命令行创建和删除一个 repo。这可能对您有所帮助。

# mysql - mysql联合无法正常工作

> ID：10716879
> 
> 赞同：2
> 
> 时间：2012-05-23T09:15:03.007
> 
> 标签：mysql, join, merge, union

您好我正在尝试合并两个表。

我的 id 仅存在于左表中，而我的 id 仅存在于右表中。我想得到一张包含所有 id 的表。我试过：

```
select * from temp_hours as a
    left outer join temp_orders as o on a.proj_id = o.proj_id
union
select * from temp_hours as a
    right outer join temp_orders as o on a.proj_id = o.proj_id 
```

但我得到错误：

```
Can't reopen table: 'a' 
```

任何想法我怎么能做到这一点？服务器版本：5.0.51a-24+lenny4 (Debian)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:01:18.747

按照建议添加括号或更改缩写...

```
select * from temp_hours as a
    left outer join temp_orders as ao on a.proj_id = ao.proj_id
union
select * from temp_hours as b
    right outer join temp_orders as bo on b.proj_id = bo.proj_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:18:29.203

只需在您的选择查询周围添加一些括号：

```
(select * from temp_hours as a
    left outer join temp_orders as o on a.proj_id = o.proj_id)
union
(select * from temp_hours as a
    right outer join temp_orders as o on a.proj_id = o.proj_id) 
```

例如，参见文档中的[示例](http://dev.mysql.com/doc/refman/5.0/en/union.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T09:18:07.730

每个选择都需要括号

```
(select * from temp_hours as a
    left outer join temp_orders as o on a.proj_id = o.proj_id)
union
(select * from temp_hours as a
    right outer join temp_orders as o on a.proj_id = o.proj_id) 
```

但是，您得到的错误似乎是[临时表限制。](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)

# objective-c - UIDocument openWithCompletionHandler 成功返回 NO

> ID：10716880
> 
> 赞同：3
> 
> 时间：2012-05-23T09:15:06.247
> 
> 标签：objective-c, ios, cocoa-touch, icloud, uidocument

我有这个代码：

```
[metaDoc openWithCompletionHandler:^(BOOL success) {
    if (!success) {
        NSLog(@"UH OH");
    }
}]; 
```

为什么这会返回NO？对我来说，即使在我的

```
- (BOOL)loadFromContents:(id)contents 
                  ofType:(NSString *)typeName 
                   error:(NSError **)outError 
```

方法，我总是返回YES。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:53:59.410

有很多原因。覆盖 handleError:userInteractionPermitted: 并记录详细信息，或在那里设置断点。您应该看到确切的错误。

# android - 无法在android中获取经度和纬度

> ID：10716882
> 
> 赞同：0
> 
> 时间：2012-05-23T09:15:10.353
> 
> 标签：android, locationmanager

我正在开发 android 应用程序以从 GPS 获取我当前的经度和纬度。我有以下代码

```
public class setting extends Activity {

TextView longval;
TextView latval;

@Override
public void onCreate(Bundle savedInstanceState){
/** Called when the activity is first created. */
    super.onCreate(savedInstanceState);
    setContentView(R.layout.setting);

    longval = (TextView)findViewById(R.id.longitudefield);
    latval = (TextView)findViewById(R.id.latitudefield);

LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

//Location lastLocation = locationManager.getLastKnownLocation(locationManager.GPS_PROVIDER);
LocationListener locationListener = new myLocationListener();

locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
}
class myLocationListener implements LocationListener{

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if(location != null){
            double longitude = location.getLongitude();
            double latitude = location.getLatitude();
            //Toast.makeText(getApplicationContext(), Double.toString(longitude), Toast.LENGTH_SHORT).show();
            longval.setText(Double.toString(longitude));
            latval.setText(Double.toString(latitude));
        }
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

我不确定何时将其放入手机（Galaxy Nexus）。我在手机顶部的栏上看到了一个 GPS 图标。但是，文本字段未更新以显示我当前的经度和纬度。请问是密码问题还是手机问题？我只是在没有移动数据的情况下打开 wifi。似乎没有调用 onLocationChanged 。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:45:01.127

使用 GPS 很难在房间/公寓内获得 Lat，Long。而不是 LocationManager.GPS_PROVIDER 使用 LocationManager.NETWORK_PROVIDER ..它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:21:44.173

您的代码是正确的。在您的设备上安装它后，将您当前的位置更改至少 10 米。我们从您当前的房间到另一个至少 10 米远的房间。我希望您能得到您的输出....

# jquery - 折叠div的响应式设计方法

> ID：10716885
> 
> 赞同：2
> 
> 时间：2012-05-23T09:15:15.027
> 
> 标签：jquery, css, responsive-design

我正在使用带有侧边栏导航菜单的 CSS 主题。我想添加一个按钮，让用户关闭侧边栏。

我熟悉 jQuery 切换、显示、隐藏等...我可以编写脚本以多种方式隐藏和显示 div，但是否有一种合规的方法可以在大多数浏览器和电话？

除了在 jQuery 中显示隐藏之外，还有更好的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:28:49.870

最合适的方法是只切换一个类，然后用 css 切换到其余部分......

```
var $yourSidebar = $(".sidebar");
$(document).on("click.toggleNav touch.toggleNav", ".yourTriggerButton", function(){ 
 $yourSidebar.toggleClass("open");
}); 
```

在您的 css 中，您可以使用媒体查询使导航在每个分辨率范围内表现不同，甚至可以使用 css 转换正确地制作动画。

这将适用于几乎所有的移动和桌面设备。

DMEO：http: [//jsfiddle.net/a24fQ/](http://jsfiddle.net/a24fQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:18:29.330

您可以使用 css 可见性属性并使可见性：在单击事件时隐藏。像`jQuery (selector).css('visibility','hidden');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:24:05.677

在课堂上使用这个...

```
div
{
display:none;
}
div:hover
{
display:block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:51:53.170

我认为没有实际更好的方法，然后使用 JS。因为您需要处理按钮单击时的切换。使用 jQuery、ExtJS 或直接 JS 是使用工具的问题。t 因此，在这种情况下，使用 JavaScript 这绝对是正常的。

# objective-c - 将不带 ARC 的项目添加到带 ARC 的项目中

> ID：10716891
> 
> 赞同：8
> 
> 时间：2012-05-23T09:15:36.560
> 
> 标签：objective-c, automatic-ref-counting

在 X 代码中，如果我创建一个具有自动引用计数 (ARC) 的新项目，并通过 File-->Add Files to 添加现有的非 ARC 项目（是否考虑添加到工作区？不确定工作区术语），那行得通吗？那么我在这个项目中写的新代码可以是ARC代码吗？

当您以这种方式添加项目时，文件不会在“编译源”中列出；因此，我没有什么可以设置“-fno-objc-arc”的。

我注意到 MapBox-ios-example 似乎正在这样做。你只是添加它而不考虑它吗？

一个单独的问题是，如果它是一个非 ARC 静态库 (.a) 我要链接到我的 ARC 项目怎么办？我必须对非 ARC 库中的类做一些特别的事情吗？

编辑：您好，很抱歉回复晚了。

几乎所有人都很好地回答了我的第二个问题，谢谢大家。由于 nverinaud 是第一个回答这个问题的人，我正在学习给予他荣誉。（奖励赏金似乎有时间限制？如果留下答案，我想给 nverinaud 表扬。）

但是我仍然对我的第一个问题有疑问。根据 Mapbox 示例和说明，我正在将一个非 ARC“项目文件”本身添加到我当前的 ARC 项目中）。我必须强调，我不是将源文件 (.m .c) 单独添加到项目中，而是添加项目文件。.m 和 .c 似乎位于单独文件夹中的单独项目中。这个 Mapbox 项目有像 [view release] 这样的调用，我不需要那个特殊的 -fno-objc-arc 标志来消除警告，因为警告不存在。

我知道，通常当您将非 ARC 源文件添加到 ARC 项目中时，您会收到编译器警告，该警告不会让您通过编译器阶段。但是在我的情况下，我没有得到任何东西。我的问题尤其不是如何放置标志（我知道），而是我是否需要标志（我猜我不需要，我什至可能在放入时出现编译器警告？我没有'不要尝试。）因为，没有标志就没有任何警告。我要求某种解释为什么没有警告，以及我是否做对了。

这是一个屏幕截图。![在此处输入图像描述](../Images/91c6031908089d2cd39b6d830b9c6716.png). OfflineSpotty 是我创建的 ARC 文件。MapView.xcodeproj 是我添加的非 ARC 项目。希望图像能澄清一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T18:29:12.273

如果您将非 ARC 包含到使用 ARC 的项目中，则需要`-fno-objc-arc`在所有非弧源文件上设置编译器标志。

要在 Xcode 中执行此操作，请转到您的活动目标并选择“构建阶段”选项卡。现在选择每个非 ARC 源文件，按 Enter，插入`-fno-objc-arc`，然后“完成”以禁用这些文件的 ARC。~~（不幸的是，您必须为每个文件添加这一行，并且没有组编辑之类的东西！:-( )~~。*更新：对于组编辑，只需标记所需的文件并按 Enter！（不要双击！Enter！ ) 这就是诀窍！:-)*

见截图： ![ARC 和非 ARC 启用文件的混合](../Images/20d144cd0d87c794e34a1346e6d1e3c5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:29:07.990

如果您要在项目中添加已编译的库，那么您无需担心任何事情，它是否为 ARC 无关紧要，因为它已经编译，因此编译器不必编译它。将静态库拖到您的项目中，并确保`Add to Targets`在弹出窗口的部分下选择您的目标。

如果要将项目文件添加到项目中，则将包含文件的文件夹拖到您的应用程序中。将显示一个弹出窗口，并在“添加到目标”下确保选择了您的应用程序的目标。如果您正确执行此操作，非弧文件​​将显示在`compile sources`目标构建阶段的部分中。正如其他人所说，您可以将`-fno-objc-arc`编译器标志添加到非弧文件中。为此，请一次选择所有非弧文件，然后按 Enter。将显示一个弹出窗口，您可以输入`-fno-objc-arc`它，然后按完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:27:43.447

我不记得确切的过程，但我很确定我记得在这个截屏视频中看过它：http: [//nsscreencast.com/episodes/9-automatic-reference-counting](http://nsscreencast.com/episodes/9-automatic-reference-counting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:29:49.737

> 根据下面的评论，问题是：“如何将 mapbox ios sdk 添加到我的项目中？”

您可以按照以下说明将开源项目中的静态库包含到您自己的项目中：http: [//blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode- 4/](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/)

> 一个单独的问题是，如果它是一个非 ARC 静态库 (.a) 我要链接到我的 ARC 项目怎么办？我必须对非 ARC 库中的类做一些特别的事情吗？

静态库已经编译，因此您无需担心。

# android - android：如何创建 ACRA 崩溃报告 Txt 文件？

> ID：10716892
> 
> 赞同：7
> 
> 时间：2012-05-23T09:15:38.260
> 
> 标签：android, acra

我想通过 ACRA 崩溃报告而不是 EMail/GoogleDoc 等创建崩溃日志信息的文本文件，那么我该如何实现这个目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T09:23:58.360

您可以实现自己的 ReportSender，根据官方文档将所有内容保存到文件中。 [https://github.com/ACRA/acra/wiki/Report-Destinations#implementing-your-own-sender](https://github.com/ACRA/acra/wiki/Report-Destinations#implementing-your-own-sender)

# python - 要包含的 qt 调试文件的 waf 配置

> ID：10716893
> 
> 赞同：1
> 
> 时间：2012-05-23T09:15:43.043
> 
> 标签：python, qt, wsh, waf

我正在编写一个用于实现代码的 wscript，其中包括 QDebug

```
#include <QDebug> 
```

在我用于配置 qt 的 wscript 中，我指定了这些行

```
def configure(conf): 
    conf.env.append_value('CXXFLAGS', ['-DWAF=1'])  
    conf.load('compiler_cxx qt4') 
    conf.check_cfg(package='gstreamer-0.10', args='--cflags --libs',        
            uselib_store='GSTREAMER') 
```

./waf configure 的输出如下

```
vickey@tb:~/p2p$ ./waf configure
Setting top to                           : /home/vickey/tunebasket/p2p 
Setting out to                           : /home/vickey/tunebasket/p2p/build 
Checking for 'g++' (c++ compiler)        : /usr/bin/g++ 
Checking for 'gcc' (c compiler)          : /usr/bin/gcc 
Checking for program qmake-qt4           : /usr/bin/qmake-qt4 
Checking for program qmake4              : not found 
Checking for program qmake               : /usr/local/Trolltech/Qt-4.8.0/bin/qmake 
Checking for program uic-qt3             : not found 
Checking for program uic3                : /usr/local/Trolltech/Qt-4.8.0/bin/uic3 
Checking for program uic-qt4             : /usr/bin/uic-qt4 
Checking for uic version                 : version 4.7.4 
Checking for program moc-qt4             : /usr/bin/moc-qt4 
Checking for program rcc                 : /usr/local/Trolltech/Qt-4.8.0/bin/rcc 
Checking for program lrelease-qt4        : /usr/bin/lrelease-qt4 
Checking for program lupdate-qt4         : /usr/bin/lupdate-qt4 
Found the Qt4 libraries in               : /usr/local/Trolltech/Qt-4.8.0/lib 
Checking for program pkg-config          : /usr/bin/pkg-config 
Checking for pkg-config version >= '0.1' : yes 
Checking for 'QtCore_debug'              : not found 
Checking for 'QtGui_debug'               : not found 
Checking for 'QtUiTools_debug'           : not found 
Checking for 'QtNetwork_debug'           : not found 
Checking for 'QtOpenGL_debug'            : not found 
Checking for 'QtSql_debug'               : not found 
Checking for 'QtSvg_debug'               : not found 
Checking for 'QtTest_debug'              : not found 
Checking for 'QtXml_debug'               : not found 
Checking for 'QtXmlPatterns_debug'       : not found 
Checking for 'QtWebKit_debug'            : not found 
Checking for 'Qt3Support_debug'          : not found 
Checking for 'QtHelp_debug'              : not found 
Checking for 'QtScript_debug'            : not found 
Checking for 'QtDeclarative_debug'       : not found 
Checking for 'QtCore'                    : yes 
Checking for 'QtGui'                     : yes 
Checking for 'QtUiTools'                 : yes 
Checking for 'QtNetwork'                 : yes 
Checking for 'QtOpenGL'                  : yes 
Checking for 'QtSql'                     : yes 
Checking for 'QtSvg'                     : yes 
Checking for 'QtTest'                    : yes 
Checking for 'QtXml'                     : yes 
Checking for 'QtXmlPatterns'             : yes 
Checking for 'QtWebKit'                  : yes 
Checking for 'Qt3Support'                : yes 
Checking for 'QtHelp'                    : yes 
Checking for 'QtScript'                  : yes 
Checking for 'QtDeclarative'             : yes 
Checking for 'gstreamer-0.10'            : yes 
'configure' finished successfully 0.758s
vickey@tb:~/p2p$ ./waf build
Waf: Entering directory `/home/vickey/tunebasket/p2p/build'
gstreamer includes ['/usr/include/glib-2.0', '/usr/lib/x86_64-linux-gnu/glib-2.0/include', '/usr/include/gstreamer-0.10', '/usr/include/libxml2']
[9/9] qxx: src/player/GSTEngine.cpp -> build/src/player/GSTEngine.cpp.1.o
../src/player/GSTEngine.cpp:7:18: fatal error: QDebug: No such file or directory
compilation terminated.
Waf: Leaving directory `/home/vickey/tunebasket/p2p/build'
Build failed
 -> task in '' failed (exit status 1): 
    {task 16658960: qxx GSTEngine.cpp -> GSTEngine.cpp.1.o}
['/usr/bin/g++', '-DWAF=1', '-Wall', '-I/usr/include/glib-2.0', '-I/usr/lib/x86_64-linux-gnu/glib-2.0/include', '-I/usr/include/gstreamer-0.10', '-I/usr/include/libxml2', '-DHAVE_QTCORE=1', '-DHAVE_QTGUI=1', '-DHAVE_QTUITOOLS=1', '-DHAVE_QTNETWORK=1', '-DHAVE_QTOPENGL=1', '-DHAVE_QTSQL=1', '-DHAVE_QTSVG=1', '-DHAVE_QTTEST=1', '-DHAVE_QTXML=1', '-DHAVE_QTXMLPATTERNS=1', '-DHAVE_QTWEBKIT=1', '-DHAVE_QT3SUPPORT=1', '-DHAVE_QTHELP=1', '-DHAVE_QTSCRIPT=1', '-DHAVE_QTDECLARATIVE=1', '-DHAVE_GSTREAMER=1', '../src/player/GSTEngine.cpp', '-c', '-o', 'src/player/GSTEngine.cpp.1.o'] 
```

在配置步骤中，缺少一些 qt 调试文件。我认为使用 DWAF=1 可以解决它们。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:56:49.023

似乎您忘记在任务生成器声明中使用 use='QTCORE' （您没有在此处发布）。

DWAF=1 的东西来自一个例子，绝对没有做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:25:59.207

要让 waf 找到 qtdebug 文件，您需要相应的 pc 文件。我以前没有。一旦您拥有/制作 .pc 文件并将它们放入正确的 PKG_CONFIG_PATH 中，waf 将自动拾取它们。

# c++ - 将 char 分配给 int 变量时的奇怪行为

> ID：10716894
> 
> 赞同：1
> 
> 时间：2012-05-23T09:15:47.930
> 
> 标签：c++

鉴于此代码：

```
#include <cstdio>
#include <iostream>
#include <string>
using std::cin;
using std::cout;
using std::string;

int main() {
        int a;
        string b;

        cin >> a;
        cin >> b;

        return 0;
} 
```

我尝试用 g++ 编译它并运行它。在将 char 分配给`a`时，首先`cin`似乎跳过了以下指令。

即使`getchar()`在最后两行之间添加两条指令，`getchar()`似乎也只有第二条被执行。有人可以准确地解释在低级别发生的事情，这似乎导致这些行明显不执行吗？

**编辑：**

使用此调试代码：

```
#include <cstdio>
#include <iostream>
#include <string>
using std::cin;
using std::cout;
using std::endl;
using std::string;

int main() {
        int a;
        string b;

        cin >> a;
        cin >> b;
        cout << "a is "<< a << endl;
        cout << "b is "<< b << endl;
        getchar();

        return 0;
} 
```

**输入** 1 测试

**OUTPUT** a is 1 b is test * 没有执行 getchar *

**输入** 1 测试

**输出** a 是 1 b 是测试

**输入** 测试

**输出** a 为 0 b 为

**输入** _

// 跳过第二个`cin`

**输出** a 为 0 b 为

注意： `getchar()`甚至没有执行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:17:58.820

您可能在第一个字符后按 Enter 键。您没有任何代码可以使用该输入，因此您得到一个空字符串。您的代码不希望在两个输入之间有任何分隔符，因此不要输入任何分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:19:39.447

从你的输出来看，有两件事。第一个是当你输入时 `"ttest"`，`cin >> a;`失败。这`cin`会进入错误状态，直到错误被清除为止。并且只要它处于错误状态，所有其他操作都是无操作的。在尝试使用这些值之前，您确实需要测试输入的结果：

```
std::cin >> a;
if ( !cin ) {
    std::cerr << "That wasn't an integer" << std::endl;
    std::cin.clear();
}
std::cin >> b;
if ( !cin ) {
    std::cerr << "Where was the string" << std::endl;
    std::cin.clear();
} 
```

`a`（并且在成功输入之前，不要使用未初始化的变量，例如。）

第二个是`>>`运算符只提取其目标所需的字符：`>>`到 a`int`将在第一个非数字字符处停止，在第`>>`一个`std::string`空格处停止（在这两种情况下，在跳过前导空格之后）。这意味着在类似 之后`"1test\n"`，缓冲区中仍然会有 a `'\n'`。虽然混合 `FILE*`(like `getchar()`) 和 iostream 通常是个坏主意，但如果它们正确同步，`getchar()`将`'\n'`立即读取并返回。

如果您正在阅读面向行的输入，最好的解决方案是使用 `getline()`，然后将行放入 a`std::istringstream`中进行解析。所以你的代码最终可能看起来像：

```
std::string line:
std::getline(std::cin, line);
if ( ! std::cin ) {
    //  Something unexpected went wrong...
    std::cin.clear();
} else {
    std::istringstream l( line );
    l >> a >> b;
    if ( !l ) {
        //  Format error in input...
    } else {
        //  use your data here...
    }
}
std::cin.get();  //  Wait for one more character... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:51:39.027

当您输入 a`char`并想要读取 a`int`时，`cin`流将具有它的`failbit`集合。如果操作失败（以太或设置） ，调用`cin.fail()`将返回。您可以从那里采取相应的行动。`true``failbit``badbit`

请注意，`cin`可以转换为`bool`进行测试，根据标准，该布尔值与 相同`!cin.fail()`，与`!cin`相同`cin.fail()`。以下两者是相同的，但有些人可能认为第二个更具可读性。

```
if(!cin) {
  // cin is in failed state
}

if(cin.fail()) {
  // cin is in failed state
} 
```

一旦`cin`处于失败状态，任何读取操作`cin`都将是空操作，直到您将流重置为良好状态。你可以通过调用来做到这一点`cin.clear()`。

但是您还必须意识到，冒犯的角色仍然在流中。也就是说，导致失败状态的非整数字符仍将在流中。你如何处理这取决于你想如何从错误中恢复。一种可能性是打电话

```
cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

这将清除当前行。然后您可以再次提示输入。

# keyboard-shortcuts - 在 VirtualBox 中退出缩放模式的快捷方式

> ID：10716899
> 
> 赞同：702
> 
> 时间：2012-05-23T09:16:11.253
> 
> 标签：keyboard-shortcuts, virtual-machine, virtualbox, mode

在 Oracle VirtualBox，Windows 7 主机中退出缩放模式的快捷方式是什么？

* * *

## 回答 #1

> 赞同：1225
> 
> 时间：2012-05-23T09:18:11.410

要退出缩放模式，请按：

`Right Ctrl (Host Key)`+`c`

* * *

*请注意，您的* `(Host Key)` *可能与* `Right Ctrl`*. 要检查当前绑定，请转到`VirtualBox Preferences > Input > Virtual Machine > Host Key Combination`。*

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-11-18T00:47:32.663

如果 Right `Ctrl`( `Host`Key) +`C`不起作用（在 Ubuntu 上出现了一些问题），请执行以下操作：

1) 虚拟机上的文件 > 首选项 > 输入卡在缩放模式下

2) 更改或重置主机密钥。更改设置后甚至无需保存

3）重新打开虚拟机，它应该被重置！

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-10-27T11:24:43.063

**脚步：**

*   `host`+ `f`, 切换到全屏模式，如果还没有，
*   `host`+ `c`, 切换到/退出缩放模式，
*   `host`+ `f`, 切换回正常大小，如果需要，

**提示：**

*   `host`键，默认为 right `ctrl`，键盘右侧的控制按钮，
*   `host`+`c`似乎只能在全屏模式下工作，

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-03-23T13:19:40.487

是的，卡在比例视图中很糟糕。

`Host`+`Home`将弹出虚拟机设置。（默认*主机*是`Right Control`）

从那里您可以更改视图设置，因为菜单栏隐藏在比例视图中。

有同样的问题，尤其是当您选中该框以不显示“切换到比例视图”对话框时。

您可以在 VM 运行时执行此操作。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-09-17T01:11:19.967

我来到这个页面，希望永久关闭缩放模式，所以我想我会分享我的发现：

```
VBoxManage setextradata global GUI/Input/MachineShortcuts "ScaleMode=None" 
```

在我的主机终端上运行它对我来说就像一个魅力。

来源：[https ://forums.virtualbox.org/viewtopic.php?f=8&t=47821](https://forums.virtualbox.org/viewtopic.php?f=8&t=47821)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-08-11T07:06:41.543

在 Ubuntu 12.04LTS 上使用 VirtualBox 时我遇到了类似的问题。现在，如果有人正在使用或曾经使用过 Ubuntu，您可能会意识到在 Ubuntu 中使用快捷键有时会变得很困难。对我来说，当我试图恢复主机键时，它并没有发生，快捷键也不起作用。我什至尝试了命令行选项来恢复缩放模式，但它也不起作用。最后，当所有其他选项都失败时，我发现了以下内容：

使用以下步骤修复 Ubuntu 中 Oracle VirtualBox 中的缩放模式问题：

1.  关闭所有虚拟机和 VirtualBox 窗口。
2.  找到您的机器配置文件（即），其中 ANKSVM 是您的 VM 名称，然后在和文件**`/home/<username>/VirtualBox VMs/ANKSVM`**中编辑和更改以下内容：**`ANKSVM.vbox`****`ANKSVM.vbox-prev`**

3.  编辑行：**`<ExtraDataItem name="GUI/Scale" value="on"/>`** 到 **`<ExtraDataItem name="GUI/Scale" value="off"/>`**

4.  重启 VirtualBox

你完成了。

当所有其他选项都失败时，这每次都特别有效，就像它发生在我身上一样。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-31T10:42:33.220

在 MacOS `Cmd`+`C`中对最小化全屏很有用

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-31T12:44:51.923

另一种解决方案（很糟糕）是退出 VM Box 并保存桌面（顶部选项），重新启动会使屏幕恢复到重新缩放之前的状态。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-11T12:50:54.173

正如@MikeMiller 指出的那样，要退出缩放模式：`Right Ctrl (Host Key)`+`C`
但对于没有的用户`Right Ctrl (Host Key)`
（例如 MS Surface Pro 用户：我们只有一个`Left Ctrl`键），你需要进入 Virtualbox>>File>>Preferences>>输入>>虚拟机选项卡>>将主机键组合更改为适合您的组合（我使用了 Ctrl+Shift+Alt，它似乎尚未使用）

# mysql - phpMyAdmin 单引号不返回结果

> ID：10716905
> 
> 赞同：0
> 
> 时间：2012-05-23T09:16:34.203
> 
> 标签：mysql, phpmyadmin

当我尝试：

```
SELECT * FROM user WHERE phone = 60123456789 
```

phpMyAdmin 返回结果但是当我尝试时：

```
SELECT * FROM user WHERE phone = '60123456789' 
```

phpMyAdmin 返回一个空结果。列类型 varchar。

如何使它与单引号一起使用？我是否错误地设置了结构中的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:21:20.947

尝试

```
SELECT * FROM user WHERE phone like '60123456789%' 
```

如果可行，那么您的列中有尾随空格

您可以使用删除它们

```
update user set phone = replace(phone, ' ', '') 
```

## 编辑

例子：

尾随空格：

```
'123  ' 
```

前导空格：

```
'  123' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:21:11.840

如果您仅使用整数值`varchar`，请将结构中的列类型 varchar 从更改 为。`int`

然后两者都可以工作

```
SELECT * FROM user WHERE phone = 60123456789

SELECT * FROM user WHERE phone = '60123456789' 
```

**更新**我正在使用 Varchar(225)

像

```
SELECT * 
FROM  `tbl_practice` 
WHERE  `name` =  '+5734563656546'
LIMIT 0 , 30

SELECT * 
FROM  `tbl_practice` 
WHERE  `name` =  +5734563656546
LIMIT 0 , 30

SELECT * 
FROM  `tbl_practice` 
WHERE  `name` =  5734563656546
LIMIT 0 , 30 
```

*我不知道你为什么会遇到这个问题？*

# android - 是否可以从 web 服务的 xml 在 android 中创建布局？

> ID：10716908
> 
> 赞同：1
> 
> 时间：2012-05-23T09:16:37.053
> 
> 标签：android, android-layout

我必须评估一些移动技术并且有一个问题。

我们有网络应用程序。它是客户端上的 javascript，它使用我们专有的视图格式从我们的服务器获取 xml。应用程序对其进行转换，并查看 html。

我们想在 Android 上原生 - 我们的应用程序会通过 http 从 web 服务获取这些 xml（可以更改它的格式）并创建视图。

可行吗？它以某种足够的方式可行吗？

我知道我可以用 Java 和一些 xml 格式创建布局。我可以从 Web 动态加载这些 xml 并使用它们来扩展布局（在教程中，这些 xml 仅在资源中）？还是让我解析我们的 xml 并调用适当的 Java 方法 - 该解决方案是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:29:48.097

资源布局文件夹中的 XML 是在编译时转换的，因此事后加载将无济于事。

您仍然可以动态解析 XML 并以编程方式从 XML 构建布局，您可能只需拥有一个 Android 版本的 javascript，您已经必须转换您的专有格式 - 但这取决于您的格式。

它在速度方面不会那么高效（很大程度上取决于您的网络和缓存代码，但仍然有一点取决于您的视图构建代码）但它会节省安装空间并允许您远程更新视图而无需发布新版本的应用程序。

**编辑、扩展并添加了一些代码：**

您可以将任何布局资源 xml 文件膨胀到一个视图中，如果您选择，您可以将其插入另一个视图，查看[LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28int,%20android.view.ViewGroup,%20boolean%29)以膨胀视图，然后只需使用 ViewGroup 扩展视图（如 LinearLayout 或 RelativeLayout）并添加到它.

一些代码的快速示例：

```
 protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    LinearLayout ll = new LinearLayout(this);
    setContentView(ll);
    TextView tv = new TextView(this);
    tv.setText("A message");
    ll.addView(tv);
} 
```

它很笨重，缺少很多格式，但提供了一种将一个视图添加到另一个视图的基本机制。

作为使用布局充气器的示例：

```
View convertView = LayoutInflater.from(Main.this).inflate(R.layout.account_entry, null, false); 
```

我建议使用 null 和 false 作为最后两个参数，因为稍后您将自己将其添加到特定视图中。

# c++ - cpp std::list 通过步进添加新元素

> ID：10716909
> 
> 赞同：1
> 
> 时间：2012-05-23T09:16:40.390
> 
> 标签：c++, list, sorting

我有两个`std::list`对象：`source_list`和`new_list`. 目标是添加对象 from`new_list`到`source_list`开始 from`position_at_source_to_adding_new_from`和 with `steps_between_new`。

`steps`:的问题`source_list`可以是短的，`new_list`也可以是大的（或`steps`大的），并且在进行迭代时，它`std::advance(it, steps_between_new)`可能会超出范围。`source_list``undefined behavior`

如何在之前/之后检查迭代器`std::advance`以确保我们在范围内？并且当有更多对象`new_list`可以放置在它们之间的步骤时 - 需要简单地将对象添加到源列表的末尾。

附言。对不起我的英语，不是母语很难解释。欢迎对我的文字进行任何更正。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:20:37.383

而不是调用`advance`，只需`++iterator`根据需要调用多次。每次调用后，将迭代器与`end()`.

# ruby-on-rails - 使用继承时rails 3中的回调顺序

> ID：10716910
> 
> 赞同：1
> 
> 时间：2012-05-23T09:16:43.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, inheritance, callback

我想知道`rails 3`使用继承时回调函数的执行顺序..

为了让我的问题更清楚，这里有一个来自[api.rubyonrails.org的例子](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

我们有一个父类

```
class Topic < ActiveRecord::Base
  before_destroy :destroy_author
end 
```

和一个儿童班

```
class Reply < Topic
  before_destroy :destroy_readers
end 
```

并且都在 before_destroy 上有回调。那么，他们中的哪一个先被执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:02:43.277

在子回调之前调用的所有父回调

在 Rails 3 回调上：http: [//intridea.com/posts/define-custom-callbacks-for-activerecord-and-more](http://intridea.com/posts/define-custom-callbacks-for-activerecord-and-more)

# python - python下划线：学习python的艰辛练习40

> ID：10716916
> 
> 赞同：2
> 
> 时间：2012-05-23T09:16:59.767
> 
> 标签：python, python-2.7

我正在尝试做“Learn Python the hard way”一书中的练习页面：106。示例如下：

```
cities = {'CA': 'San Francisco', 'MI': 'Detroit', 'FL': 'Jacksonville'}

cities['NY'] = 'New York'
cities['OR'] = 'Portland'

def find_city(themap, state):
    if state in themap:
        return themap[state]
    else:
        return "Not found."

# ok pay attention!
cities['_find'] = find_city

while True:
    print "State? (ENTER to quit)",
    state = raw_input("> ")
    if not state: break

    # this line is the most important ever! study!
    city_found = cities['_find'](cities, state)
    print city_found 
```

我不明白是什么`cities['_find'] = find_city`？是什么`_find`？特别是为什么下划线？同样，我不确定是什么`city_found = cities['_find'](cities, state)`。我在同一个问题上看到过类似的帖子： [learn python the hard way exercise 40 help](https://stackoverflow.com/questions/5434740/learn-python-the-hard-way-exercise-40-help)

这基本上说`cities['_find'] = find_city`将函数 find_city 添加到字典中，但我仍然不明白是什么`city_found = cities['_find'](cities, state)`（？）

如果有人可以向我解释上述两行，我将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T09:19:32.590

这段代码：

```
cities['_find'] = find_city 
```

只需使用 key 将函数`find_city`插入`cities`字典`_find`。下划线没有特殊含义，它只是键字符串的一部分。可能选择不与实际城市名称冲突。

这段代码：

```
city_found = cities['_find'](cities, state) 
```

调用该函数，首先使用键`find_city`在字典中查找它。`_find`

它可以重写为：

```
city_found = find_city(cities, state) 
```

这样做似乎没有任何实际*意义*，让字典（在代码中称为“地图”）包含`find`我可以看到的函数没有任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T09:20:50.567

正如你所说，`cities['_find'] = find_city`将函数添加到字典中。因此，`cities['_find']`从字典中检索它。

`foo(a,b)``foo`使用参数调用存储的函数`a`和`b`。`cities['_find'](cities, state)`做*同样的事情*。

至于下划线，它只是在那里，这样它就不会与一个名为“find”的城市发生冲突，如果有的话。整个示例非常做作，但重点似乎是要告诉您函数只是对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:20:45.117

`cities['_find'] = find_city`将函数添加到字典中。`city_found = cities['_find'](cities, state)`调用该函数（因为函数`find_city`需要的 parenteses 和两个 args。

下划线并没有真正改变任何东西，它是键的一部分。通常，您使用下划线作为前缀来表达某些内容，例如将其标记为内部或其他内容。这本书应该在某处说明它的含义。

# android - keytool 错误：java.lang.RuntimeException:error，--alias 不是合法命令

> ID：10716917
> 
> 赞同：0
> 
> 时间：2012-05-23T09:17:03.327
> 
> 标签：android, md5, android-mapview, keystore

当我尝试通过命令“keytool -list –alias androiddebugkey –keystore d:\debug.keystore”获取我的计算机的md5时，出现错误“keytool error ： java.lang.RuntimeException:error，–alias is不是合法的命令”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:43:58.427

如果您使用 Eclipse，请尝试使用**[“Keytoool for Eclipse”](http://keytool.sourceforge.net/)**。希望它能减轻获取 MD5 密钥的负担。仅供参考，如果您需要所有类型键（MD5、SHA 等），则需要使用“keytool -v -list”而不是“keytool -list”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:30:26.890

# java - java：将十六进制数字字符串转换为十进制

> ID：10716919
> 
> 赞同：0
> 
> 时间：2012-05-23T09:17:09.063
> 
> 标签：java, hex, decimal

我从 Matlab 接收十六进制数字字符串到我的设备中。我检查通过 wireshark 发送的数据：

```
0000  00 16 cf 5c 0d c2 ec 55  f9 44 c8 9b 08 00 45 00   ...\...U .D....E.
0010  00 dc 1c f9 00 00 80 11  9b 9a c0 a8 00 16 c0 a8   ........ ........
0020  00 17 04 bd 0b b8 00 c8  e5 1a 40 46 6c cc c0 00   ........ ..@Fl...
0030  00 00 3f e6 66 66 60 00  00 00 40 62 1e 66 60 00   ..?.ff`. ..@b.f`.
0040  00 00 bf c9 99 99 a0 00  00 00 40 4d c0 00 00 00   ........ ..@M....
0050  00 00 40 0f 33 33 40 00  00 00 40 6f e0 00 00 00   ..@.33@. ..@o....
0060  00 00 40 59 80 00 00 00  00 00 40 46 6c cc c0 00   ..@Y.... ..@Fl...
0070  00 00 3f d9 99 99 a0 00  00 00 40 6f e0 00 00 00   ..?..... ..@o....
0080  00 00 40 59 80 00 00 00  00 00 40 48 b3 33 40 00   ..@Y.... ..@H.3@.
0090  00 00 3f f4 cc cc c0 00  00 00 40 50 e9 99 a0 00   ..?..... ..@P....
00a0  00 00 40 11 cc cc c0 00  00 00 40 6f e0 00 00 00   ..@..... ..@o....
00b0  00 00 c0 39 99 99 a0 00  00 00 40 6f e0 00 00 00   ...9.... ..@o....
00c0  00 00 c0 39 99 99 a0 00  00 00 40 6f e0 00 00 00   ...9.... ..@o....
00d0  00 00 c0 39 99 99 a0 00  00 00 40 6f e0 00 00 00   ...9.... ..@o....
00e0  00 00 c0 39 99 99 a0 00  00 00 
```

我在这里收到这个数据（字节[]）：

```
receiveddata += str(data[i]) + " "; 
```

这是我的设备在将十六进制转换为十进制之前在屏幕上显示的内容：

```
64 71 32 0 0 0 0 0 -65 -39 -103 -103 -96 0 0 0 64 89 -93 51 64 0 0 0 -64 0 -52 -52 -64 0 0 0 64 86 -68 -52 -64 0 0 0 63 -10 102 102 96 0 0 0 64 100 120 0 0 0 0 0 -64 26 -52 -52 -64 0 0 0 64 70 108 -52 -64 0 0 0 63 -39 -103 -103 -96 0 0 0 64 111 -32 0 0 0 0 0 64 89 -128 0 0 0 0 0 64 71 -7 -103 -96 0 0 0 0 0 0 0 0 0 0 0 64 111 -32 0 0 0 0 0 -64 57 -103 -103 -96 0 0 0 64 111 -32 0 0 0 0 0 -64 57 -103 -103 -96 0 0 0 64 111 -32 0 0 0 0 0 -64 57 -103 -103 -96 0 0 0 64 111 -32 0 0 0 0 0 -64 57 -103 -103 -96 0 0 0 64 111 -32 0 0 0 0 0 -64 57 -103 -103 -96 0 0 0 
```

完全是胡说八道！有人知道为什么设备会显示这种废话吗？它会将十六进制本身转换为这种格式吗？

例如我发送 0 23 23 12 33 （xpc 目标 udp 发送二进制块）

在钢丝鲨中：

```
0000  00 16 cf 5c 0d c2 00 22  69 86 14 f3 08 00 45 00   ...\..." i.....E.
0010  00 44 85 66 00 00 80 11  33 c1 c0 a8 00 17 c0 a8   .D.f.... 3.......
0020  00 1a 08 87 0b b8 00 30  92 4c 00 00 00 00 00 00   .......0 .L......
0030  00 00 00 00 00 00 00 00  37 40 00 00 00 00 00 00   ........ 7@......
0040  37 40 00 00 00 00 00 00  28 40 00 00 00 00 00 80   7@...... (@......
0050  40 40                                              @@ 
```

但在手机屏幕上：

```
000000000000000 55 64 000000 55 64000000 40 64.............. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:21:32.757

你还没有告诉我们有什么类型`data`，但大概是`byte[]`.

您对以下代码有何期望

```
byte b = 42;
String receiveddata = "" + b; 
```

显然你会得到一堆数字。

尝试使用`new String(data)`.

# android - 谷歌android官方GridView教程

> ID：10716927
> 
> 赞同：0
> 
> 时间：2012-05-23T09:17:45.607
> 
> 标签：android, gridview, baseadapter

目前我正在查看[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html) 我在 onCreate()、onResume 和 getView() 中创建了带有附加日志的测试项目：

HelloGridViewActivity.java

```
package com.hello.namespace;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;
import android.widget.Toast;

public class HelloGridViewActivity extends Activity {
    private static final String TAG = "HelloGridViewActivity";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                Toast.makeText(HelloGridViewActivity.this, "" + position, Toast.LENGTH_SHORT).show();
            }
        });

        Log.e(TAG, "onCreate()");
    }

    protected void onResume() {
        super.onResume();

        Log.e(TAG, "onResume()");
    }
} 
```

ImageAdapter.java

```
package com.hello.namespace;

import android.content.Context;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
    private static final String TAG = "ImageAdapter";
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            Log.e(TAG, "position = " + position);
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };

} 
```

日志输出：

```
05-23 08:59:13.541: E/HelloGridViewActivity(733): onCreate()
05-23 08:59:13.551: E/HelloGridViewActivity(733): onResume()
05-23 08:59:13.711: E/ImageAdapter(733): position = 0
05-23 08:59:14.380: E/ImageAdapter(733): position = 1
05-23 08:59:15.190: E/ImageAdapter(733): position = 2
05-23 08:59:15.771: E/ImageAdapter(733): position = 3
05-23 08:59:16.340: E/ImageAdapter(733): position = 4
05-23 08:59:17.141: E/ImageAdapter(733): position = 5
05-23 08:59:17.721: E/ImageAdapter(733): position = 6
05-23 08:59:18.330: E/ImageAdapter(733): position = 7
05-23 08:59:18.611: E/ImageAdapter(733): position = 8
05-23 08:59:18.631: E/ImageAdapter(733): position = 9
05-23 08:59:18.631: E/ImageAdapter(733): position = 10
05-23 08:59:18.651: E/ImageAdapter(733): position = 11
05-23 08:59:18.651: E/ImageAdapter(733): position = 12
05-23 08:59:18.671: E/ImageAdapter(733): position = 13
05-23 08:59:18.681: E/ImageAdapter(733): position = 14
05-23 08:59:18.691: E/ImageAdapter(733): position = 15
05-23 08:59:18.701: E/ImageAdapter(733): position = 16
05-23 08:59:18.721: E/ImageAdapter(733): position = 17
05-23 08:59:18.721: E/ImageAdapter(733): position = 18
05-23 08:59:18.741: E/ImageAdapter(733): position = 19
05-23 08:59:18.741: E/ImageAdapter(733): position = 20
05-23 08:59:18.891: E/ImageAdapter(733): position = 0 
```

这里有两个问题：

1.  为什么位置 0 的 ImageView 被创建了两次？

2.  假设我想用 ImageViews 做点什么。我会创建 ImageView 数组，在 getView() 中初始化其元素，但我无法在 onCreate() 甚至 onResume() 中使用它，因为 ImageViews 还不存在！我该怎么办？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:33:55.570

1：我假设您滚动列表以获取此日志（因为仅当视图可见时才会调用 getView），因此您很可能只是再次向上滚动，并且位置 0 处的视图从顶部滚动并即将到来再次从顶部...

2：取决于您为什么要将您的视图放在`onCreate`或中`onResume`。如果没有其他解决方案并且您必须拥有它们，您可以简单地自己创建所有视图，`onCreate`将它们保存在列表中，然后在 getView 中返回。我会尽量避免这种情况，因为 ListView 仅在存在 Visible 并重用它们的情况下才将视图实例化。你会在我描述的实现中失去这个特性，所以请告诉我们，为什么你想在之前拥有它`getView`

# sql - FROM 子句中的对象“TableName”和“TableName”具有相同的公开名称。使用相关名称来区分它们

> ID：10716932
> 
> 赞同：1
> 
> 时间：2012-05-23T09:18:06.870
> 
> 标签：sql, sql-server-2008

有人可以解释这个错误是什么吗？

FROM 子句中的对象“TableName”和“TableName”具有相同的公开名称。使用相关名称来区分它们。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:19:57.057

如果您要与同一个表 (TableName) 进行连接，则需要为 SQL 设置不同的别名，以了解他应该从每个表中获取哪一列。

# c - 如何清理c中的缓冲区？

> ID：10716940
> 
> 赞同：-1
> 
> 时间：2012-05-23T09:18:27.947
> 
> 标签：c, linux, bash, buffer

我正在做很多迭代以模拟`bash`命令 (Homework) 。

代码运行良好，但问题是经过几次输入迭代后，程序开始出现一些缓冲区问题。我怀疑这与所有的`\n`命中有关`Enter`。

例如，代码开头是这样的：

```
#define BUFFER 4096
#define RUN_FOREVER 1
#define ERROR_SIGN -1
#define TRUE 1
#define FALSE 0

int main(int argc , char * argv[] )
{
    char input[BUFFER];

    //Get always a command line from the user.
    while(RUN_FOREVER)

    {

        if (isatty(0))
        {
            // input is from terminal
            // need to put something here 
        }

        char **separatedFormAmpersand ;

        int ampersandsCtr = 0, k=0,r=0;
        char *stringBeforeAmpersand = NULL;

        printf("$ ");

        memset(input, '\0', BUFFER);

         char ch;

        scanf("%[^\n]",input);
        scanf("%c",&ch);

        if(0 == strcmp(input, "exit"))
            break;

        //Separate the command according to the "&".
        stringBeforeAmpersand = strtok( input, "&");
... // more code (quite a lot , frankly) 
```

现在，如果用户点击以下输入：

```
ls Debug/ | grep r
ls >> file.jer & ls & ls & ls
ls >> file.jer 
```

`ls`一个接一个，然后当我点击输入数字时代码无法识别命令`3`。

如果我在一次代码运行中输入每个输入，一切都会完美运行。

任何想法如何清理缓冲区？也许`fflush`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:32:39.650

要读取一行输入，请使用以下命令：

```
fgets(buffer, sizeof buffer, stdin); 
```

并检查它的返回值是否失败。请注意，它会包含换行符，因此您可能需要添加代码来删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:40:06.907

在您从代码中分辨出任何内容之前，刷新标准输出显然是一件好事。

我假设你的一对`scanf`有以下目标：一个会抓住一条线，第二个会“跳过 \n”字符。顺便说一句，您可以只使用`getc()`后者。奇怪的是 scanf() 本身是否会`\n`为您读取字符。

以其 GNU 方式，`scanf()`可能证明比`fgets()`这里更好，因为`%a[...]`修饰符可以让您摆脱“缓冲区大小”限制，并让库`malloc()`为您提供足够大小的缓冲区。

有没有想过用 strace 调用你的程序来跟踪输入的读取？

# c# - 如何在安装过程中写入一次配置文件

> ID：10716942
> 
> 赞同：0
> 
> 时间：2012-05-23T09:18:29.353
> 
> 标签：c#, installation, app-config

我有一些变量需要在安装时设置一次。比如我需要设置COM口，注册车辆等等...

如何在安装过程中写入配置文件一次，然后总是读取它。有没有自定义安装工具。我看过 WinX，我必须说我不是很高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:23:35.300

只需创建一个像 SplashScreen 这样的新表单并在 app.config 中进行初始化，添加一个名为`fInstalled`app.config 的新变量并将其值更改为 true。

现在，无论您在哪里启动应用程序，检查是否`fInstalled`为真，如果为假，请转到您的 MainForm，否则使用启动画面重新配置。

SplashScreen 只是一个示例，或者您也可以不使用启动画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:53:21.497

建议使用[NSIS](http://sourceforge.net/projects/nsis/)

有了它，您可以在安装过程中操作 XML 配置文件。

# hidden - 复选框选中javascript时为隐藏字段赋值

> ID：10716945
> 
> 赞同：0
> 
> 时间：2012-05-23T09:18:30.537
> 
> 标签：hidden

当我从页面中选择任何复选框时，我需要将值存储在隐藏的文本字段中

```
 <input type="checkbox" name="checked1" value="checked1" onselect="getvalue()">
<input type="checkbox" name="checked1" value="checked2" onselect="getvalue()">
<input type="checkbox" name="checked1" value="checked3" onselect="getvalue()"> 
```

当我将任何复选框存储到下面的隐藏字段中时：

```
<input type="hidden" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:24:09.380

使用 jquery，并假设您为隐藏的输入提供了一个 id（此处为“myhidden”），您可以这样做：

```
$('input[type="checkbox"]').change(function(){
    $('#myhidden').val($(this).val());
}); 
```

这个小提琴演示了它：http: [//jsfiddle.net/dystroy/e6jpG/](http://jsfiddle.net/dystroy/e6jpG/)

# javascript - 用于发送的 Facebook UI 对话框在发送后更改链接

> ID：10716947
> 
> 赞同：0
> 
> 时间：2012-05-23T09:18:32.360
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我尝试通过 facebook graph API 发送邀请。该链接包含一个邀请码，每次我使用 Facebook UI 对话框发送它时，链接都会发生变化。

```
FB.init({
  appId: 'facebook_app_id',
  status: true,
  cookie: true,
  xfbml: true
});

FB.ui({
  method: 'send',
  link: 'https://mywebsite.com/i/jywk2j',
  name: 'You get an invitation',
  to: 1
}); 
```

当我检查消息时，链接是“https://mywebsite.com”并且缺少“/i/jywk2f”。

[https://mywebsite.com/i/jywk2j](https://mywebsite.com/i/jywk2j)没有任何重定向或奇怪的状态代码或任何东西。这只是一个正常的着陆页。

有人知道我在这里做错了什么吗？

更新

**应用配置**

```
Display name: My website name
Namespace: empty
App domains: empty
Hosting url: You have not generated a URL through one of our partners (Get one) 
```

选择您的应用如何与 Facebook 集成

```
Only option selected: Website with Facebook Login
With url: https://mywebsite.com 
```

**[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)的结果**

```
Response Code   200
Fetched URL     https://mywebsite.com/i/jywk2j
Canonical URL   https://mywebsite.com/i/jywk2j 
```

应该修复的开放图警告

```
Inferred Property   The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property   The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property   The 'og:description' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property   The 'og:image' property should be explicitly provided, even if a value can be inferred from other tags.
Tiny og:image       All the images referenced by og:image must be at least 200px in both dimensions. Please check all the images with tag og:image in the given url and ensure that it meets the minimum specification. 
```

对象属性

```
og:url      https://mywebsite.com/i/jywk2j
og:type     website
og:title    Title of my website 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:44:48.293

好的，我解决了这个问题。感谢@chumkiu 为我指明了正确的方向。

The problem was that i use a subdomain and my facebook application configuration was wrong. I needed to add `App Domains` with `mywebsite.com` and had to delete the subdomain in the `Website with Facebook Login` section

# php - 按 CSS 特异性排序

> ID：10716948
> 
> 赞同：8
> 
> 时间：2012-05-23T09:18:36.233
> 
> 标签：php, css, css-selectors, css-specificity

我的主要目标是尝试根据特异性重新排序 CSS 样式块。我以前曾从[SO](https://stackoverflow.com/questions/10636340/order-css-based-on-selector-specificity)那里得到帮助，我设法产生了这个功能。[**见要点**](https://gist.github.com/2774085)。

这是一个例子：

```
function specificity($selector){
// https://gist.github.com/2774085
}

$compare = function($a, $b) use ($specificity) {
    return $specificity($a) - $specificity($b)
};

$array = css_array();

uksort($array, $compare); 
```

在我遇到这个 CSS 之前，上述内容一直运行良好：

```
html, body, body div{
    background: transparent;
}
body {
    background-color: #D96F02;
} 
```

这被重新排序为：

```
body { // 1 point
    background-color: #D96F02;
}
html, body, body div{ // 4 points
    background: transparent;
} 
```

但是，这不是浏览器应用 CSS 的方式。

我认为我的特异性函数可能缺少 CSS 顺序的重要性，而不是基于选择器特异性的排序？这是真的？

## 更新

我认为我应该做的是在我的比较函数中，我应该总是添加一个额外的点，`10`因为特异性不仅仅基于选择器，它也基于选择器的顺序。所以是这样的：

```
 $compare = function($a, $b) use ($specificity) {
        return ($specificity($a) + 10) - $specificity($b)
    }; 
```

这看起来如何，我如何确定在这种情况下要给出的分数！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:25:43.963

如果您序列化，问题应该会消失

```
html, body, body div{ 
    background: transparent; 
} 
```

作为单独的规则，就好像它们是按以下方式编写的：

```
html{ 
    background: transparent; 
} 
body{ 
    background: transparent; 
} 
body div{ 
    background: transparent; 
} 
```

[语义有点混乱](http://www.w3.org/TR/CSS2/syndata.html#rule-sets)，但基本上您是根据已组合到同一规则集中的独立选择器来判断整个声明。

重新更新：[特异性不受选择器顺序](http://www.w3.org/TR/CSS21/cascade.html#specificity)的影响，即以下规则具有相同的特异性。最后一条规则将优先[渲染为 blue](http://jsfiddle.net/ovfiddle/Cphhq/)，除非您重新安排[渲染为 red](http://jsfiddle.net/ovfiddle/Cphhq/1/)的规则：

```
<style>
    #container span {color:red;}
    div #content {color:blue;}
</style>

<div id="container"><span id="content">Hello world!</span></div> 
```

# javascript - 通过jquery获取动态元素

> ID：10716951
> 
> 赞同：0
> 
> 时间：2012-05-23T09:18:47.443
> 
> 标签：javascript, jquery, dom

我想实现这个

```
$("div1 input").attr('id'); 
```

其中 div1 是通过 php 循环动态生成的（所以我喜欢 div1,div2,div3 等）

在我的 jquery 函数中，我`$('#counter').val();`动态地保存了从 1 到 3 的值，

所以这就是我正在做的`$("#div"+ $("#counter").val() +"input").attr('id')`

上面的代码应该给我输入属性id，

由于某些原因或可能是由于某些语法问题，我没有得到它，**请查看并指出我的错误**。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:20:14.233

你之前错过了空间`input`，试试这个：

```
$("#div" + $("#counter").val() + " input").attr('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:26:34.287

您需要在生成 div 之后使用您的代码。因此，您需要`<script>`在循环生成之后或文档就绪事件上放置。
尝试以下操作：

```
$(function()
{
        var $el = $("#div"+ $("#counter").val() +" input");
        //or you can use alert($el.length) to see if $el created.
        if ($el.length)
        {
           var id =  $el.attr('id');
        }

}); 
```

# .net - WebService 调用的默认超时

> ID：10716953
> 
> 赞同：0
> 
> 时间：2012-05-23T09:19:03.500
> 
> 标签：.net, web-services

我有一个包含多个项目的解决方案，其中一个使用了大量的 Web 服务。代理是从 WSDL 生成的，我不控制代理类的超时属性。

我想知道是否有办法在我的 web.config 中为 web 服务调用定义解决方案范围的默认超时参数？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:39:23.080

据我所知，您可以使用 web.config 中的 httpruntime executionTimeout 设置来执行此操作

```
<httpRuntime 
    executionTimeout="36000" /> 
```

请注意，仅当编译元素中的调试属性为 False 时才适用此超时。

```
<compilation 
   debug="false" /> 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/e1f13641.aspx](http://msdn.microsoft.com/en-us/library/e1f13641.aspx)

# visual-studio-2010 - IIS 未列出与启动 URL 匹配的网站

> ID：10716956
> 
> 赞同：180
> 
> 时间：2012-05-23T09:19:08.073
> 
> 标签：visual-studio-2010, debugging, iis-7, windows-vista

我需要在 IIS7（Vista Home）中调试我正在开发的网站（ASP.NET MVC3、Razor、.NET 4、VS2010 SP1（作为管理员））并得到错误：

IIS 不会列出与启动 url 匹配的网站。

为了测试它是否与应用程序的设置有关，我确实从头开始创建了一个空的新 ASP.NET MVC3 网站，设置为 IIS，创建虚拟目录，使用 F5 启动，我工作正常！

我再次创建了具有完全相同设置的第二个网站项目（只是为了确定），这也按预期启动。

这导致我认为我有一些配置问题！？但是什么？过去我很少使用 IIS，所以我的知识在这个方向上有所限制。

有什么提示吗？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2012-05-23T14:09:01.590

我讨厌回答我的问题：在我的问题中，我说我在管理员帐户下运行 VS。**这不是真的**！

所以解决方案（对我来说）是以管理员身份运行VS2010（开始->在Vista菜单中右键单击->以管理员身份运行）......如此简单。

作为副作用：VS2010 让我也可以毫无问题地创建虚拟目录（在此之前我收到错误消息，指出我必须手动调整这些）

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-11-27T09:17:07.067

You can set Visual Studio to run always as admin. `Right click on the shortcut => properties => Advanced => tick on run as administrator.`

![enter image description here](../Images/a1aca31bc29b35529d2ccdfdf099f515.png)

![enter image description here](../Images/0a5123bfdfe7caf3f18ca3eacd8c0a10.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-28T19:23:04.300

我正在使用 Visual Studio 2013 并为快捷方式设置管理员权限，因为@karim 说对我不起作用，所以我进入 devnev.exe 文件并在兼容性选项卡中设置管理员权限，这很有效。我不想将此添加为答案，但我无法分配图片，因此决定将其发布为新答案。

[![在此处输入图像描述](../Images/f74c3755f0a940e7b33d95de9128a53b.png)](https://i.stack.imgur.com/s0Mzr.jpg)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-05-01T15:27:06.290

为了搜索者的利益，我以管理员身份运行并且仍然得到这个，所以需要关注[这个博客](http://mvolo.com/fix-problems-with-visual-studio-f5-debugging-of-aspnet-applications-on-iis7-vista/)（显然忽略了一些与旧 .NET 版本相关的东西）。

之后，进行了重建，并且成功了。

编辑：（根据评论）

第 2 节特别有趣。它指出：

为了启用 F5 调试，您至少需要以下组件：

*   ASP.NET
*   Windows 身份验证模块（支持使用 NTLM 和 Kerberous 进行 Windows 身份验证）
*   元数据库兼容层（为现有软件用于管理 IIS 的旧 IIS 配置 API 提供支持。请注意，即使在尝试调试之前，从 Visual Studio 连接到 ASP.NET 应用程序也需要这样做。）

从控制面板 > 程序 > 打开和关闭 Windows 功能安装它们：

编辑：（添加功能路径）：

*   Internet 信息服务 -> 万维网服务 -> 安全 -> Windows 身份验证
*   Internet 信息服务 -> Web 管理工具 -> IIS 6 管理兼容性 -> IIS 元数据库和 IIS 6 配置兼容性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-18T08:55:42.653

我在一台新机器上遇到了这个问题 - 以管理员身份运行没有帮助。解决方案是先执行`aspnet_regiis.exe -i`。它必须从同样以管理员身份启动的命令提示符运行。通常可以在 exe 中找到`C:\Windows\Microsoft.NET\Framework\v4.0.30319`- 如果您需要更改它，您很可能已经知道要更改什么。

要始终以管理员身份运行程序而无需右键单击，请打开 VS 快捷方式属性兼容性选项卡并选中“以管理员身份运行此程序”。有关详细步骤，请参阅[http://technet.microsoft.com/en-us/magazine/ff431742.aspx](http://technet.microsoft.com/en-us/magazine/ff431742.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-21T09:19:31.683

1.  开始>>控制面板>>单击程序

2.  单击打开或关闭 Windows 功能。

3.  在用户帐户控制对话框中，单击继续

4.  展开 Internet 信息服务，展开 Web 管理工具，然后展开 IIS 6 管理兼容性

5.  单击以选中 IIS 元数据库和 IIS 6 配置兼容性复选框，然后单击确定。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-06T15:18:48.067

这对我有用，我将 VS 2017 版本更新到版本 15.4.2，以管理员身份运行，删除文件夹文件（Visual Studio 2017）并重新启动电脑。

# .net - 终端服务器上的 ConfigurationErrorsException

> ID：10716957
> 
> 赞同：0
> 
> 时间：2012-05-23T09:19:16.187
> 
> 标签：.net, winforms, terminal-services

在终端服务器上安装 .net 应用程序时，启动应用程序时会引发此异常：

```
System.Configuration.ConfigurationErrorsExceptionMessage = Index 1 is out of range.FullText=
 System.Configuration.ConfigurationErrorsException: Index 1 is out of range.
   at System.Configuration.ConfigurationElementCollection.BaseGet(Int32 index)
   at System.Configuration.ConnectionStringSettingsCollection.get_Item(Int32 index) 
```

找不到 AppName.exe.config 中的连接字符串。但是，配置文件放置在正确的位置，紧挨着 .exe 文件，并且连接字符串存在于 .config 文件中。此错误仅发生在终端服务器上，在 XP、Vista、win7 上一切正常...

应用程序名.exe.config ：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        ...
    </configSections>
    <connectionStrings>
        <add name="..."
            connectionString="..." />
        <add name="..."
            connectionString="..." />
    </connectionStrings>
... 
```

这是怎么回事 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T00:40:54.213

您可能还发现，您得到的错误与应用程序无法从您的 xml 文件读取/写入有关。

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationerrorsexception(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationerrorsexception(v=vs.80).aspx)

在 citrix 客户端和终端服务器上运行应用程序时，我遇到了类似的问题，应用程序本身在客户端操作系统和 VHD 上运行良好。

至于解决这个问题，我建议以下..

*   右键单击您的可执行文件，如果有选项，请以管理员身份运行它。如果这可行，那么您可以确定您在标准用户配置文件的存储位置上缺乏正确的权限。（即使您对您的 TS 拥有管理员权限，这也可能会有所不同。）
*   您可以测试的另一个选项（如果尚不存在）将应用程序存储在您拥有最多访问权限的位置。这很可能是您的用户配置文件，并查看它是否从那里运行。
*   作为第三个也是最后一个选项，如果可能的话，让对您的 TS 具有更高权限的人尝试运行该应用程序。

上述所有步骤都与权利有关，因为这是我的应用程序的问题。但是，这只是开始对其进行故障排除的一种方法。希望这会有所帮助。

# c++ - 使用纯 C/C++ 向 PDF 添加注释

> ID：10716958
> 
> 赞同：-6
> 
> 时间：2012-05-23T09:19:17.930
> 
> 标签：c++, c, pdf, annotations, pdf-generation

我正在寻找一种仅使用普通 C/C++（没有第三方库）向 PDF 添加注释的方法。

我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:40:54.170

这是[PDF 参考文档第三版](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)。

PDF 文件由不同的二进制对象组成，可以使用不同的算法、压缩方案（有损和无损）和编码过滤器进行压缩、编码或加密。每个对象都在一个引用表中引用，其中包含有关其在文件中的位置的信息。您将需要知道如何处理此表，您将需要实现所有可能的压缩方案、编码过滤器和加密算法，然后您将必须处理所有可能的 PDF 对象结构。

在 PDF 规范中，这些对象被称为字典，它们由条目组成。每个条目都有一个类型，可以是简单类型，也可以是另一个字典（或对它的引用），或者是这些元素类型中的一个以上的数组。所以我们可以说PDF基本上是一个字典对象树。

一旦你的代码能够处理规范中所有可能的字典，并且有了树结构，你可以转到*第 8 章 - 规范的交互特性*，第*8.4 部分 - 注释*，并实现一种将注释字典添加到 PDF 的方法文件。

您应该注意到，我什至没有提及 PDF 文件的热门话题，例如字体、色彩空间、透明胶片和页面内的绘图说明。我假设您将能够加载文件中的所有对象，创建注释对象，以某种方式将其插入到对象树中，然后“按原样”再次保存所有对象。这或多或少是[iText 的](http://itextpdf.com/)工作原理，所以如果你真的想实现它，你可以看看 iText 的源代码，这样你就可以对这类项目所需的工作量有一个小窗口。

您可能还想[在 SO 中查看这个答案](https://stackoverflow.com/a/3610696/501196)。

# java - 在 ServiceMix 上升级库的过程

> ID：10716968
> 
> 赞同：2
> 
> 时间：2012-05-23T09:19:57.003
> 
> 标签：java, jar, upgrade, apache-servicemix

在 ServiceMix 容器上升级库（FuseESB 编译）的过程是什么？

我使用的是 Fuse 版本 4.4.1，它使用的是 Spring 3.0.5。更新版本的 Spring 已经可用，那么，当我想使用它时，我应该怎么做呢？

对于那些在 startup.properties 中直接引用的任务，任务是显而易见的，但是其他的，比如 Spring 呢？我在谷歌中搜索更新过程描述，但毫不费力。您是否手动完成了此类更新，并且可以编写除了复制新 jar 之外需要做的事情？

Spring 驻留在`system/org/springframework`目录中。我可以简单地转到该目录并将 Spring jar 替换为较新的版本吗？

ServiceMix 没有很好的文档记录，我还没有找到有关此类程序的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:36:57.083

Fuse ESB v4.x 堆栈是一个以 Karaf 作为其内核的 OSGi 容器。它可以像创建一个应用程序特定的特性 XML 一样简单，该特性是基于项目依赖关系构建的，避免了 ESB 中包含的预定义特性。

您可能会遇到问题的一个领域是尝试添加更新版本的“核心”（那些在 startup.properties 文件中定义的）ESB 运行时依赖项，这在 OSGi 容器中应该是完全可以接受的。这些捆绑包的旧版本虽然具有定义不明确的清单，但导入只会指定版本包含而不是排除。然后，OSGi 容器将查看与捆绑包定义的导入包和版本匹配的所有可用包，而那些没有排除的包将在捆绑包初始化时获得最高可用版本。

例如，如果有一个核心捆绑包对 Spring Beans 2.5.6 有硬依赖，但该捆绑包仅指定了 version=2 而不是 version=[2,3)，则该核心捆绑包将从 Spring Beans 3 获取包捆绑包而不是 Spring Beans 2.5.6 捆绑包可能会破坏核心捆绑包。

更糟糕的是，有时某些包可能与 2.5.6 捆绑包而不是 Spring 3 捆绑包匹配，并且您会得到一个基本上爆炸的交叉包含。是的，我已经看到了。

基本上，您必须反复试验。鉴于 Fuse ESB 提供给您的所有可能排列，取决于在运行时加载的功能，不可能有一本可以准确定义升级容器所需步骤的说明书。

# java - 其他人知道这是什么意思吗？

> ID：10716970
> 
> 赞同：3
> 
> 时间：2012-05-23T09:20:08.067
> 
> 标签：java

```
static final boolean $assertionsDisabled = !java/util/TaskQueue.desiredAssertionStatus(); 
```

在源文件中可以看到`java.util.TaskQueue.java`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T09:23:56.853

引用[*6.2.1 断言开销*](http://etutorials.org/Programming/Java+performance+tuning/Chapter+6.+Exceptions+Assertions+Casts+and+Variables/6.2+Assertions/)：

> 了解断言机制的工作原理有助于了解断言语句如何影响性能。当编译器在一个类中找到一个断言时，它会为该类添加一个生成的静态 final 字段`$assertionsDisabled`。该字段未分配（这是合法的字节码）。断言本身被编译成如下形式的语句：

```
if ($assertionsDisabled)
  if (!boolean_expression)
    throw new AssertionError(String_expression); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T09:28:15.837

由于 java 标识符可以包含拉丁字母，$、_ 和以字母开头的数字（其中 $ 和 _ 是一种字母`$assertionsDisabled`）是一个有效的 java 标识符类型`boolean`。

`java/util/TaskQueue.desiredAssertionStatus()`似乎不是一个有效的表达方式。大概应该是这样`java.util.TaskQueue.desiredAssertionStatus()`的。`desiredAssertionStatus()`在这种情况下，它是从 class调用静态方法`TaskQueue`。

此方法返回布尔结果。`!`反转结果。

唯一的问题是它到底是什么？由于这里出现了明显的语法错误（`/`而不是`.`），我假设这一行是反编译 java 代码或“错误”编码尝试的结果。我对吗？

我刚刚检查了`java.util.TaskQueue.java`. 它不包含这样的行。所以，我现在很确定你是从反编译中得到它的。如果找不到源代码，您是否可能有 IDE 插件可以反编译所有类？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T18:11:41.197

正是因为这个类有一个断言，那么编译器就为自己创建了这个变量。

# python - 如何在python中的长对象中添加美元符号

> ID：10716984
> 
> 赞同：1
> 
> 时间：2012-05-23T09:20:48.133
> 
> 标签：python, printing, string-formatting

我想在行 [2] 前面的这个打印语句中添加一个美元符号：

```
print row[0], row[1], row[2] 
```

该图应该打印出来，没有空格，例如：`$1000` 它不能`$ 1000`

谁能帮忙？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:23:38.507

```
print "{0} {1} ${2}".format(row[0],row[1],row[2]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T09:23:04.287

打印时使用字符串格式：

```
print '%s %s $%s' % (row[0], row[1], row[2]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T09:22:19.640

`print row[0], row[1], "$"+str(row[2])`将是最简单的方法，最接近您现在所拥有的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T09:50:18.363

大多数其他解决方案（即：Ashwini Chaudhary's、Roman Bodnarchuk's 和 Junuxx's）都可以，但我想再添加两个：

```
print row[0], row[1], '$%s' % row[2] 
```

和

```
print row[0], row[1], '${}'.format(row[2]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:24:11.867

如果您有更多行：

```
l = [str(r) for r in row]
l[-1] = "$%s" % l[-1]
print " ".join(l) 
```

# jquery - 在 jquery 中键入（keypress/keyup）时是否有用于查询 URL 的自动完成插件？

> ID：10716985
> 
> 赞同：1
> 
> 时间：2012-05-23T09:20:48.157
> 
> 标签：jquery

我正在尝试在 jquery 中实现自动完成，我已经检查了 Jquery ui autocomplete 但无法弄清楚。

我需要从 url 作为 json 或文本获取数据，但每次在自动完成中更改文本时我都应该这样做。我不应该提取所有数据并保留在客户端..

请让我知道我们是否有任何直接的实现作为插件或其他东西..我是 jquery 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:23:11.830

你应该可以通过给一个回调来使用 jquery ui 自动完成来做到这一点`source`

```
$('#your_input').autocomplete({
  source: function(request, response) {
    $.ajax({
    ...
      success: function( data ) {
        response( $.map( data.field, function( item ) {
          return {
    ... 
```

请参阅[JSON 示例](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

匹配结果来自每次按键时的服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:35:19.247

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>
<script type="text/javascript">

      $("#input_id").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: 'URL',
                        dataType: "json",
                        data: {
                            filter: request.term // word being typed, can add additional params as needed
                        },
                        success: function (data) {
                            response($.map(eval(data), function (item) {
                                return {
                                    label: item.em_name,
                                    custom_val: item.custom_val,
                                    custom_val2: item.custom_val2
                                }
                            }));
                        }
                    })
                },
                maxLength: 2,   //length before search text gets submitted
                select: function (event, ui) {
                    $("#custom_val_textbox").attr('value', ui.item.custom_val);
                    $("#custom_val_textbox2").attr('value', ui.item.custom_val2);
                }
            });

</script> 
```

# javascript - 交换两个 html 元素并在它们上保留事件侦听器

> ID：10716986
> 
> 赞同：31
> 
> 时间：2012-05-23T09:20:49.443
> 
> 标签：javascript, jquery, dom, dom-events

有类似的问题，但所有的答案都是为了只为里面的内容交换 html 元素。

我需要交换两个 div，其中包含很多内容（表格、选择框、输入等）。元素上有事件监听器，所以我需要在交换主 div 后保留它们。

我可以访问 jQuery 1.5。所以答案是可以的。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-23T09:48:02.940

要在不丢失事件处理程序或破坏 DOM 引用的情况下交换两个 div，只需在 DOM 中移动它们即可。关键是不要更改 innerHTML，因为这会从头开始重新创建新的 DOM 节点，并且这些 DOM 对象上的所有先前事件处理程序都将丢失。

但是，如果您只是将 DOM 元素移动到 DOM 中的新位置，则所有事件都将保持关联，因为 DOM 元素只会重新设置父级，而不会更改 DOM 元素本身。

这是一个快速函数，可以交换 DOM 中的两个元素。只要一个元素不是另一个元素的子元素，它就可以与任意两个元素一起使用：

```
function swapElements(obj1, obj2) {
    // create marker element and insert it where obj1 is
    var temp = document.createElement("div");
    obj1.parentNode.insertBefore(temp, obj1);

    // move obj1 to right before obj2
    obj2.parentNode.insertBefore(obj1, obj2);

    // move obj2 to right before where obj1 used to be
    temp.parentNode.insertBefore(obj2, temp);

    // remove temporary marker node
    temp.parentNode.removeChild(temp);
} 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/NThjN/](http://jsfiddle.net/jfriend00/NThjN/)

* * *

这是一个在没有插入临时元素的情况下工作的版本：

```
function swapElements(obj1, obj2) {
    // save the location of obj2
    var parent2 = obj2.parentNode;
    var next2 = obj2.nextSibling;
    // special case for obj1 is the next sibling of obj2
    if (next2 === obj1) {
        // just put obj1 before obj2
        parent2.insertBefore(obj1, obj2);
    } else {
        // insert obj2 right before obj1
        obj1.parentNode.insertBefore(obj2, obj1);

        // now insert obj1 where obj2 was
        if (next2) {
            // if there was an element after obj2, then insert obj1 right before that
            parent2.insertBefore(obj1, next2);
        } else {
            // otherwise, just append as last child
            parent2.appendChild(obj1);
        }
    }
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/oq92jqrb/](http://jsfiddle.net/jfriend00/oq92jqrb/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-30T10:49:35.333

这是一个更简单的功能，用于交换两个元素而无需实际重新加载元素......

```
function swapElements(obj1, obj2) {
    obj2.nextSibling === obj1
    ? obj1.parentNode.insertBefore(obj2, obj1.nextSibling)
    : obj1.parentNode.insertBefore(obj2, obj1); 
} 
```

注意：如果 obj1 有像 YouTube 这样的嵌入视频，则在交换时不会重新加载。只是元素的位置发生了变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:54:37.800

如果您跟踪两个元素的 parentNodes 和一个的 nextSibling，您可以将两个元素与其子元素交换，而无需任何临时占位符。

如果第二个元素是唯一的子元素，或者是其父元素的最后一个子元素，则其替换（正确）附加到父元素。

```
function swap(a, b){
    var p1= a.parentNode, p2= b.parentNode, sib= b.nextSibling;
    if(sib=== a) sib= sib.nextSibling;
    p1.replaceChild(b, a);
    if(sib) p2.insertBefore(a, sib);
    else p2.appendChild(a);
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T11:19:18.140

我的简单功能似乎是最短和最广泛兼容的。它不需要占位符或重新加载元素或任何类似的混乱：

```
function swapElements(el1, el2) {
    var p2 = el2.parentNode, n2 = el2.nextSibling
    if (n2 === el1) return p2.insertBefore(el1, el2)
    el1.parentNode.insertBefore(el2, el1);
    p2.insertBefore(el1, n2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:41:15.437

这在某种程度上取决于您的事件如何绑定到您正在交换的元素。如果您使用的是 jQuery，那么[这个](https://stackoverflow.com/questions/2943140/how-to-swap-html-elements-in-javascript)答案就是您所需要的，真的。

最主要的不是元素`delete`，`removeChildnode`而是将html复制粘贴到其他地方。这样做时，某些浏览器会清除所有资源（包括事件处理程序），因此绑定的事件将丢失。尽管 IE 在动态绑定事件方面因泄漏内存而臭名昭著。真的很难预测各种浏览器的行为方式。

基本上，我会说：以任何你喜欢的方式交换元素，除了复制/粘贴 HTML 字符串，并使用 jQuery 的`.live()`方法绑定你的事件。因为我不认为 1.5 有`.on`方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-26T16:51:35.830

由于 jQuery 在问题中被标记，这里是一个 jQuery 解决方案：

```
 $('#el_to_move').appendTo('#target_parent_el'); 
```

而已。jQuery 会将其剪切/粘贴到新位置。

* * *

这也可能会有所帮助：

> [https://api.jquery.com/detach/](https://api.jquery.com/detach/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-14T10:26:45.377

考虑到 o1.swapNode(o2); 的事实，这一切都非常奇怪。在 IE 中运行良好很长时间。在我的对象和文本节点混合的情况下，仅适用于一个版本（已在此处显示）：

```
let t = document.createElement("div");
o1.parentNode.insertBefore(t, o1);
o2.parentNode.insertBefore(o1, o2);
t.parentNode.insertBefore(o2, t);
t.parentNode.removeChild(t); 
```

是的，我讨厌创建临时节点，但是如果你直接使用它（没有调用函数），没有这个技巧的上述版本会失败。有时您不想调用函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-24T21:47:21.077

如果您要交换彼此相邻的元素，这真的很容易：

```
<div class="container">
   <div class="item">Item 1</div>
   <div class="item">Item 2</div>
</div> 
```

`$('.container .item:nth-child(2)').insertBefore('.container .item:nth-child(1)');`

# jquery - 如果我向“绑定”添加回调，它会在绑定时触发还是每次调用时触发？

> ID：10716991
> 
> 赞同：0
> 
> 时间：2012-05-23T09:20:59.330
> 
> 标签：jquery, callback, bind

我有以下脚本：

```
$('#target').bind('click', 
                        function () {
                            $('#target').css({ 'display': 'none' });
                            $('#targetFake').css({ 'display': 'inline-block' });
                        },
                        function () {
                            alert('bind callback'); 
                        }); 
```

每次单击“#target”元素时似乎都会触发“绑定回调”警报，而不是在绑定元素时仅触发一次。我可以进行回调以验证绑定是否发生了一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:22:01.027

这就是它应该如何工作的：每个点击事件一个触发器。`bind`每次调用绑定一次；如果您不小心`bind`使用同一个处理程序多次调用，您将看到该处理程序仅由一个触发多次`click`。

但是：您的[`bind`](http://api.jquery.com/bind/)通话中的两个函数在做什么？没有接受两个函数的重载。

您可能正在寻找的其他替代方案是：

*   只在现场调用一次函数——直接调用它，你不需要 jQuery。
*   *绑定仅在事件第*一次发生时触发的处理程序——[`one`](http://api.jquery.com/one/)用于此目的。
*   正常绑定handler *，*当场调用一次；你可以用`$(...).bind('click', ...).trigger('click')`.

# java - 散列和索引列表或数组？

> ID：10716992
> 
> 赞同：5
> 
> 时间：2012-05-23T09:20:59.327
> 
> 标签：java, vector, hashmap

Java中是否有任何类可以按顺序保存元素数组并针对快速搜索进行了优化？

即我需要通过数字索引（如 in `Vector`）和哈希（如 in `HashMap`）来检索元素。

**LinkedHashMap 不匹配**

我认为`LinkedHashMap`不匹配，因为它保证了顺序，但不允许通过索引（位置编号）快速访问。根据描述，需要遍历整个链才能找到给定的位置。这就是`Collection`迭代器所能做到的。

**编辑 2**

即按键和索引搜索都应该很快，而不仅仅是按键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:22:51.383

我想你可以试试[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:22:42.917

您可以使用 a`Map`通过哈希快速检索元素。根据定义， a`Map`是无序的，谈论索引没有多大意义。使用[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)可能有用，因为它保证在迭代时保留插入顺序，尽管按索引访问元素仍需要一些额外的处理，如下所示：

```
map.entrySet().toArray()[index] // mind the casts, etc. 
```

如果您的地图不经常更改，如果您缓存数组并在按索引访问条目之前检查地图的大小是否已更改，则上述方法将很好地工作，仅当检测到大小更改时才创建新数组。另一方面，如果映射频繁更改，您需要在每次访问时重新创建数组，从而创建性能不佳的数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:23:14.273

使用**LinkedHashMap**。这将允许您通过 key 检索元素。您还可以按照存储在其中的相同顺序检索元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T09:24:10.030

我认为您正在寻找[LinkedHashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html)

从文档：

Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。（如果在调用 m.containsKey(k) 将在调用之前立即返回 true 时调用 m.put(k, v)，则将键 k 重新插入到映射 m 中。）

# c# - C# WinForm 在发布模式下无法生成

> ID：10716994
> 
> 赞同：0
> 
> 时间：2012-05-23T09:21:12.397
> 
> 标签：c#, winforms, build, release-mode

我已经将配置更改为发布模式，但是当我构建/生成它时，它似乎总是处于调试模式。

![图片](../Images/8419f35648233a50bc4368fa16fcd239.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:31:21.460

屏幕截图显示了适用于发布配置的设置 - 它实际上并没有使该配置成为活动配置。

为了切换配置，选择 Build | 配置管理器...菜单项，然后从活动解决方案配置下拉列表中选择“发布”。或者，您应该在 Visual Studio 工具栏上提供配置下拉菜单（请参见下面的屏幕截图）。这也允许您设置当前的构建配置。

![配置工具栏](../Images/8c43c491193c8660eb4e1876fbd8812a.png)

# sharepoint - sharepoint XsltListViewWebPart 在新窗口中打开超链接列

> ID：10716997
> 
> 赞同：0
> 
> 时间：2012-05-23T09:21:15.743
> 
> 标签：sharepoint, web-parts

希望有人可以提供提示，因为我有一个相当紧迫的问题。我有以下 XsltListViewWebPart：

```
 <WebPartPages:XsltListViewWebPart runat="server" Description="Test" ListDisplayName="" ImportErrorMessage="Error." PartOrder="0" HelpLink="" AllowRemove="True" IsVisible="True" AllowHide="True" UseSQLDataSourcePaging="True" ExportControlledProperties="False" IsIncludedFilter="" DataSourceID="" Title="Title" ViewFlag="8388621" NoDefaultStyle="" AllowConnect="True" FrameState="Normal" CatalogIconImageUrl="/_layouts/images/itdl.png" PageSize="-1" PartImageLarge="/_layouts/images/itdl.png" AsyncRefresh="False" Dir="Default" DetailLink="/Freigegebene Dokumente" ShowWithSampleData="False" ListId="84474224-4a76-471f-8e12-52f3185c4d72" ListName="{84474224-4A76-471F-8E12-52F3185C4D72}" FrameType="Default" PartImageSmall="" IsIncluded="True" SuppressWebPartChrome="False" AllowEdit="True" ViewGuid="{1B1FF0C7-CD99-4AFE-81E1-B1C2B3B08242}" AutoRefresh="False" AutoRefreshInterval="60" AllowMinimize="True" WebId="f9888801-89f4-459b-9fe6-a6780d624ec9" ViewContentTypeId="0x" InitialAsyncDataFetch="False" GhostedXslLink="main.xsl" MissingAssembly="Error." HelpMode="Modeless" ListUrl="" ID="g_205870e9_70f2_4539_bbbf_a71b43f06783" ConnectionID="00000000-0000-0000-0000-000000000000" AllowZoneChange="True" TitleUrl="/TitleUrl" ManualRefresh="False" __MarkupType="vsattributemarkup" __WebPartId="{1B1FF0C7-CD99-4AFE-81E1-B1C2B3B08242}" __AllowXSLTEditing="true" __designer:CustomXsl="fldtypes_Ratings.xsl" WebPart="true" Height="" Width=""><ParameterBindings>
                                        <ParameterBinding Name="dvt_sortdir" Location="Postback;Connection"/>
                                        <ParameterBinding Name="dvt_sortfield" Location="Postback;Connection"/>
                                        <ParameterBinding Name="dvt_startposition" Location="Postback" DefaultValue=""/>
                                        <ParameterBinding Name="dvt_firstrow" Location="Postback;Connection"/>
                                        <ParameterBinding Name="OpenMenuKeyAccessible" Location="Resource(wss,OpenMenuKeyAccessible)" />
                                        <ParameterBinding Name="open_menu" Location="Resource(wss,open_menu)" />
                                        <ParameterBinding Name="select_deselect_all" Location="Resource(wss,select_deselect_all)" />
                                        <ParameterBinding Name="idPresEnabled" Location="Resource(wss,idPresEnabled)" />
                                        <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noitemsinview_doclibrary)" />
                                        <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noitemsinview_doclibrary_howto2)" />
                                    </ParameterBindings>
      <XmlDefinition>
                                        <View Name="{1B1FF0C7-CD99-4AFE-81E1-B1C2B3B08242}" MobileView="TRUE" Type="HTML" Hidden="TRUE" DisplayName="" Url="/SitePages/Homepage.aspx" Level="255" BaseViewID="1" ContentTypeID="0x" ImageUrl="/_layouts/images/dlicon.png">
                                            <Query>
                                                <OrderBy>
                                                    <FieldRef Name="FileLeafRef"/>
                                                </OrderBy>
                                            </Query>
                                            <ViewFields>
                                                <FieldRef Name="DocIcon"/>
                                                <FieldRef Name="LinkFilename"/>
                                                <FieldRef Name="Modified"/>
                                                <FieldRef Name="Editor"/>
                                            </ViewFields>
                                            <RowLimit Paged="TRUE">15</RowLimit>
                                            <Toolbar Type="Freeform"/>
                                        </View>
                                    </XmlDefinition>
      <DataFields>
      </DataFields>
      </WebPartPages:XsltListViewWebPart> 
```

字段“编辑器”指的是一个超链接列。如何修改上述 XsltListViewWebPart 以使该列在新窗口中打开？我不需要确切的解决方案，只是一些关于我应该做什么的提示，因为现在我有点无能为力。

谢谢您的帮助。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:26:51.217

我发现了这个问题。Sharepoint Designer - Design View 中有一个选项可以为 XsltListViewWebPart 插入整个 XSLT。问题是，您首先需要在 XsltListViewWebPart 代码内实际单击，以使此 Design 选项可见，并使用其 insert XSLT 选项。