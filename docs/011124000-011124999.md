# StackOverflow 问答 11124000-11124999

# c# - 如何使用不同的注入重新实例化 MVC3 控制器

> ID：11124001
> 
> 赞同：2
> 
> 时间：2012-06-20T16:29:37.230
> 
> 标签：c#, asp.net-mvc, ninject.web.mvc

这是我向 SO 提出的第一个问题，所以我会尽量不让自己丢脸。

我现在正在做的是将两个依赖对象注入到 MVC3 控制器的构造函数中。

但是为了应用程序逻辑，我需要在（运行时）未来的某个时候用新的对象更改这些对象。显然，最明显的情况是让 MVC 创建一个注入新对象的新控制器。很好，但是我如何让 MVC 产生新的控制器？

这是控制器（如果它是相关的，或者只是用于视觉识别）：

```
 public class RestoreController : Controller {
    private readonly StatusProvider statusProvider;
    private readonly AppHost appHost;

    public RestoreController(StatusProvider statusProvider, AppHost appHost){
        this.statusProvider = statusProvider;
        this.appHost = appHost;
    } 
```

PS我考虑了一些其他的解决方案，但我想让一些人肯定地告诉我这是不可能的。

那么可以吗？

我很高兴听到对我的问题的评论。Tnx，祝你好运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:32:46.383

每次您尝试访问控制器时都会创建一个控制器实例（例如调用依赖于它的视图）。因此，如果您在运行时注入引用的对象，如果它们已更改（实例值），您应该在 Controller 上获得该更改

# javascript - 将 2 位数年份转换为 4 位数年份

> ID：11124007
> 
> 赞同：0
> 
> 时间：2012-06-20T16:29:50.413
> 
> 标签：javascript, jquery, html, asp.net-mvc

我们有一个输入表单，它为用户提供一个日历下拉菜单，但也允许手动输入数据。我们发现，如果一个人输入一个 2 位数的年份，则年份会更改为 1912 而不是 2012（日期不能是过去）。有没有办法我可以：

1.  检查他们是否输入了 2 位数的年份并将其转换为 4 位数的年份，或者
2.  如果他们输入 2 位数的年份，则给他们一个错误。

这是在 HTML 表单上，我还使用 jQuery 来处理其他一些东西。

我应该澄清一下，他们输入的日期作为一个完整的日期 01/01/2012 或 1/1/2012 是有效的。1/1/12 和 01/01/12 不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:32:51.113

最简单的是一个正则表达式，因为它也会使非数字值无效；

```
​var s = $("#something").val();

if (!/^\d{4}​​​​​​​​​​​​​​​​​​​​​​​$/.test(s)) {
   alert ("Thats not a 4 digit number")​​​​​​​​​​​
   return; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T16:32:41.063

您可能想向我们展示您的一些代码。事实上，像这样的基本内容可以满足您的第二个要求：

```
if ($('#yearInput').val().length() < 4) {
  alert('You must enter 4 digits');
} 
```

# css - 修复了 Horz 滚动网站上 Div 下方的页脚

> ID：11124010
> 
> 赞同：0
> 
> 时间：2012-06-20T16:30:08.453
> 
> 标签：css, scroll, footer, fixed

我有一个带有这个基本标记的网站 -->

页眉（固定位置） 内容区（598px 高） - 水平滚动，一般在 5000px 左右宽 Footer

我需要页脚位于内容区域下方，但也需要像页眉一样在浏览器中保持固定定位的中心。我们想要的一个例子在这里： [http ://www.woodberrykitchen.com](http://www.woodberrykitchen.com)

这是我们正在开发的网站： [http ://starprovisions.com/dev/bacchanalia.html](http://starprovisions.com/dev/bacchanalia.html)

任何人都可以帮忙吗？是否可以让页脚 div 位于内容区域下方（不覆盖）但也保持固定位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:33:44.843

我直接在浏览器中尝试了这个，它工作得很好。

```
#footer {position: fixed; width: 100%;}
#footer table {margin: auto;} 
```

当我们讨论它时，您似乎在摆弄该网站。从 18:58 GMT+1 开始，您应该`height`从`#container`.

# django - 如何组合 django 查询以让我一口气保存？

> ID：11124011
> 
> 赞同：1
> 
> 时间：2012-06-20T16:30:10.663
> 
> 标签：django, django-models

就目前而言，我有一个反序列化器，它可以导入我扔给它的任何模型并将其放入我的数据库中。不幸的是，它使用每个模型都会访问数据库，我想阻止它。

有什么办法可以让我把很多短的保存归为一个大的吗？

示例代码：

```
def deserialise(xml):
    for x in model_list:
         do work to make instance...
         instance.save()
    return True 
```

有没有办法将实例的保存移出for循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:35:48.537

您可以使用[`transaction.commit_manually()`](https://docs.djangoproject.com/en/dev/topics/db/transactions/#django.db.transaction.commit_manually).

```
from django.db import transaction

@transaction.commit_manually
def deserialise(xml):
    for x in model_list:
         # do work to make instance...
         instance.save()
    transaction.commit()
    return True 
```

或者[`transaction.commit_on_success()`](https://docs.djangoproject.com/en/dev/topics/db/transactions/?from=olddocs#django.db.transaction.commit_on_success)，如果函数成功返回，它将自动提交保存。

```
from django.db import transaction

@transaction.commit_on_success
def deserialise(xml):
    for x in model_list:
         # do work to make instance...
         instance.save()
    return True 
```

* * *

或者，在 django 1.4 中也有[bulk_create()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)，但请注意文档中列出的警告。

# android - Android - 创建和存储 SQLite 数据库以供 Javascript 使用

> ID：11124018
> 
> 赞同：0
> 
> 时间：2012-06-20T16:30:30.097
> 
> 标签：android, sqlite, cordova

我有一个 Phonegap / Cordova 应用程序，它需要捆绑一个 SQLite 数据库（大约 7mb）。然后我希望使用 Javascript (jQuery mobile) 访问该数据库。

我该如何处理？我不想使用 HTML5 本地存储，因为它没有足够的容量，使用后会被删除。它必须是原生的 Android SQLite 加上 javascript 连接。

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:40:58.680

**更新** 我刚刚发现可以使用 phonegap 创建 SQLite 数据库，在此处阅读更多信息[http://docs.phonegap.com/en/1.4.1/phonegap_storage_storage.md.html#Database](http://docs.phonegap.com/en/1.4.1/phonegap_storage_storage.md.html#Database)

```
 window.openDatabase(name, version, display_name, size); 
```

您好，您可以使用 WebView，并使用 `addJavascriptInterface(Object, String)`，这使您可以使用 javascript 中的 java 方法。您可以编写方法以在 java 中存储、检索，然后通过 javascript 访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:34:30.270

上次我几个月前检查过，这是不可能的。这是一个类似的问题[JavaScript sqlite](https://stackoverflow.com/questions/61972/javascript-sqlite)，另一个可能更有用[http://luthfihariz.wordpress.com/2011/10/23/android-sqlite-phonegap-jquerymobile/](http://luthfihariz.wordpress.com/2011/10/23/android-sqlite-phonegap-jquerymobile/)

# c# - 从绑定到可观察集合的嵌套列表框中的标签中获取内容？

> ID：11124025
> 
> 赞同：0
> 
> 时间：2012-06-20T16:30:49.773
> 
> 标签：c#, wpf, binding, listbox, observablecollection

我在一个列表框中有一个列表框，并且两者都绑定到一个可观察的集合。我已经为两者重载了 SelectionChanged 事件。对于嵌套列表框，我在其数据模板中有一些标签。我希望能够获得这些标签的内容。这很困难，因为即使定义了 x:name 属性，我也无法在后面的代码中引用它们中的任何一个。有人有想法么？

```
<ListBox Grid.Row="5" x:Name="lb1" ItemsSource="{Binding}" DataContext="{Binding}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionChanged="lb1_SelectionChanged">

        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                 <WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>

        <ListBox.ItemTemplate>
            <DataTemplate>
                 <Label x:Name="txtEnclosure" Content="{Binding Path=EnclosureID}"/>
                 <......other labels bound to other properties...>
                 <ListBox x:Name="lbserver" ItemsSource="{Binding Path=Slist}">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                 <Label x:Name="txtSlot" Content="{Binding Path=Slot}" />
                                 <Label x:Name="txtServer" Content="{Binding Path=HostnameID}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

父列表框绑定到一个名为 Elist 的可观察集合（Enclosures 的可观察集合，我定义的一个类）

```
this.DataContext = Settings.Elist; 
```

子列表框绑定到 Enclosure 类内部的一个可观察集合。

```
public class Enclosure
{
    public ObservableCollection<Server> Slist { get; set; }
    ...contains other variables as well....
} 
```

在应用程序中，它列出了机箱，每个机箱都有一个服务器列表。用户可以选择一个 Enclosure，我可以根据 SelectedIndex 从 Elist 中获取 Enclosure（我使用 ElementAt(SelectedIndex)）。当我尝试从嵌套列表框中获取其中一个服务器时，事情变得更加棘手。我希望能够选择列表中的一台服务器并从可观察的集合 Slist 中获取服务器。问题是当用户直接选择服务器时，我不知道服务器来自 Elist 中的哪个 Enclosure，而且我无法获取 SelectedIndex，因为我无法从后面的代码中的嵌套列表框中引用任何内容>.< 确实是一个非常令人沮丧的问题……有人有什么想法吗？

如果我可以在代码中获取嵌套列表框中的项目，那也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:41.927

下面的示例显示了当用户选择一个孩子时如何获取选定的父母和孩子，请参阅 OnSelectedModelChanged 方法。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel>
        <ListBox ItemsSource="{Binding .}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=Name}" FontWeight="Bold"/>
                        <ListBox ItemsSource="{Binding Path=Models}" SelectionChanged="OnSelectedModelChanged">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=Name}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</Window> 
```

后面的代码：

```
using System.Windows;
using System.Windows.Controls;
using System.ComponentModel;
using System.Collections.Generic;
using System.Windows.Controls.Primitives;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<Make> cars = new List<Make>();
            cars.Add(new Make("Ford") { Models = new List<Model>() { new Model("F150"), new Model("Taurus"), new Model("Explorer") } });
            cars.Add(new Make("Honda") { Models = new List<Model>() { new Model("Accord"), new Model("Pilot"), new Model("Element") } });
            DataContext = cars; 
        }

        private void OnSelectedModelChanged(object sender, SelectionChangedEventArgs e)
        {
            Selector modelSelector = sender as Selector;
            Model selectedModel = modelSelector.SelectedItem as Model;
            Make selectedMake = modelSelector.DataContext as Make;
        }
    }

    public class Make
    {
        public Make(string name)
        {
            Name = name;
        }

        public string Name { get; private set; }
        public IEnumerable<Model> Models { get; set; }
    }

    public class Model
    {
        public Model(string name)
        {
            Name = name;
        }
        public string Name { get; private set; }
    }
} 
```

# mysql - 适当的索引（或删除）以优化大型数据集表

> ID：11124026
> 
> 赞同：1
> 
> 时间：2012-06-20T16:30:57.883
> 
> 标签：mysql, sql, optimization, query-optimization

我们有一个“访问者”跟踪模式正在进行 - 当被推送时，似乎对数据库服务器造成了一些压力。

VISITORS 表通过 HASH 标识唯一用户（当前记录 310,000 条）。对散列执行搜索，如果未找到，则添加。以下两个表需要ID

```
CREATE TABLE  visitors (
    id int(10) UNSIGNED NOT NULL auto_increment,
    ip varchar(25) NOT NULL,
    hash varchar(64) NOT NULL,
    first_visit varchar(32) NOT NULL,
    created_at datetime NOT NULL default '0000-00-00 00:00:00',
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;   

ALTER TABLE visitors ADD UNIQUE INDEX (hash);
ALTER TABLE visitors ADD INDEX (created_at); 
```

VISITOR_VISITS 表标识用户何时访问，仅当我们可以标识一些推荐来源时（当前计数为 142,000）。执行搜索以查找 visitor_id、type 和 visit_date。如果没有找到 - 它被添加。下表中使用了 ID。

```
CREATE TABLE  visitor_visits (
    id int(10) UNSIGNED NOT NULL auto_increment,
    visitor_id int(10) UNSIGNED NOT NULL,
    source varchar(64) NULL DEFAULT NULL DEFAULT NULL,
    medium varchar(64) NULL DEFAULT NULL,
    campaign varchar(256) NULL DEFAULT NULL,
    page varchar(32) NULL DEFAULT NULL,
    landing varchar(32) NULL DEFAULT NULL,
    type enum('fundraiser_view') NULL DEFAULT NULL,
    visit_date date NOT NULL default '0000-00-00',
    created_at datetime NOT NULL default '0000-00-00 00:00:00',
    PRIMARY KEY (id)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 

ALTER TABLE visitor_visits ADD UNIQUE INDEX (visitor_id,type,visit_date);
ALTER TABLE visitor_visits ADD CONSTRAINT FK_visits_visitor_id FOREIGN KEY (visitor_id) REFERENCES visitors(id); 
```

PAGE_VIEWS 记录单个页面视图（不是所有页面，只是我们正在跟踪的页面）。它可以链接到访问者并可以引用访问者访问（当前计数 240 万 - 更高的原因是我们在记录单个页面后开始微访问者记录）。根据已识别用户的 view_date，使用插入/重复查询将记录添加到此。由于不需要 ID，因此不需要纯查找查询

```
CREATE TABLE page_views (
  id int(10) UNSIGNED NOT NULL auto_increment,
  page_id int(10) UNSIGNED NOT NULL,
  current_donations decimal(10,2) NOT NULL DEFAULT 0,
  ip varchar(25) NOT NULL,
  hash varchar(32) NOT NULL,
  visitor_id int(10) UNSIGNED NULL DEFAULT NULL AFTER,
  visitor_visit_id int(10) UNSIGNED NULL DEFAULT NULL AFTER,
  page_views int(10) UNSIGNED NOT NULL DEFAULT 0,
  widget_views int(10) UNSIGNED NOT NULL DEFAULT 0,
  view_date date NOT NULL,
  viewed_at datetime NOT NULL default '0000-00-00 00:00:00',
  created_at datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 

ALTER TABLE page_views ADD UNIQUE INDEX (page_id,view_date,visitor_id,hash);
ALTER TABLE page_views ADD INDEX (visitor_id);
ALTER TABLE page_views ADD INDEX (visitor_visit_id);
ALTER TABLE page_views ADD CONSTRAINT FK_page_views_page_id FOREIGN KEY (page_id)    REFERENCES pages(id);
ALTER TABLE page_views ADD CONSTRAINT FK_page_views_visitor_id FOREIGN KEY (visitor_id)    REFERENCES visitors(id);
ALTER TABLE page_views ADD CONSTRAINT FK_page_views_visit_id FOREIGN KEY (visitor_visit_id) REFERENCES visitor_visits(id); 
```

上周，由于一篇新闻文章，我们的网站获得了大量的人流量，而该访问者识别出性能瓶颈。我想知道那里是否有明显的优化。会不会是外键约束？过度索引？需要更好的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:46:42.277

你没有告诉我们*什么*是你的数据库的瓶颈，所以我只是猜测它是 InnoDB 并发写入。如果不是这样并且问题仅出在 SELECTs 上（我对此表示怀疑），那么您应该向我们展示确切的查询。您可以尝试通过创建临时表然后将内容从 in 批量移动到主表来降低写入性能：

```
CREATE TABLE page_views_tmp (
  id int(10) UNSIGNED NOT NULL auto_increment,
  page_id int(10) UNSIGNED NOT NULL,
  current_donations decimal(10,2) NOT NULL DEFAULT 0,
  ip varchar(25) NOT NULL,
  hash varchar(32) NOT NULL,
  visitor_id int(10) UNSIGNED NULL DEFAULT NULL AFTER,
  visitor_visit_id int(10) UNSIGNED NULL DEFAULT NULL AFTER,
  page_views int(10) UNSIGNED NOT NULL DEFAULT 0,
  widget_views int(10) UNSIGNED NOT NULL DEFAULT 0,
  view_date date NOT NULL,
  viewed_at datetime NOT NULL default '0000-00-00 00:00:00',
  created_at datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY (id)
) ENGINE=MEMORY DEFAULT CHARSET=utf8; 
```

然后，每隔几秒钟或在此表中有大量行之后：

```
START TRANSACTION;

INSERT INTO page_views SELECT * FROM page_views_tmp;
DELETE FROM page_views_tmp;

COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:03:38.713

试试这个 :: 1) varchar 上的索引并没有太大提高性能。2）尝试在日期范围内对表进行分区。

# internet-explorer - ie8,9 中的 CSS 选择器问题

> ID：11124033
> 
> 赞同：0
> 
> 时间：2012-06-20T16:31:37.423
> 
> 标签：internet-explorer, css, css-selectors

我有一个名为 switch 控件的 div 类，它有一个名为 thumb 的 div 类作为孩子

```
<div class="switch-control">
         <div class="thumb"></div>
</div> 
```

并且有他们的css称为：

```
.switch-control > .thumb
.switch-control > .thumb::before 
```

这两个 css 类都在 chrome 和 firefox 上生效并使用，但在 IE8,9 上`.switch-control > .thumb`是活动的，并且`.switch-control > .thumb::before`被标记为未使用，因此我看不到它在 IE8,9 上生效

为什么会这样，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:22:48.303

由于某些奇怪的原因，IE9 倾向于删除伪元素的样式，但它确实支持所有受支持的伪元素的 CSS3 双冒号表示法（这包括 CSS1`::first-line`和`::first-letter`，以及 CSS2`::before`和`::after`）。如果您的样式不起作用，则说明其他问题（有许多关于此效果的 SO 问题，但我不知道是什么导致了问题）。

IE8 不支持任何伪元素的 CSS3 双冒号表示法，只支持传统上一直使用的单冒号表示法。

如果您需要支持 IE8，则必须使用传统的单冒号表示法（出于兼容性原因，每个浏览器都应继续支持该表示法）：

```
.switch-control > .thumb:before 
```

关于您的评论：

> 我已将我的 css 样式表从 .switch-control > .thumb::before 更新为 .switch-control > .thumb:before （从双冒号到单冒号），但所有浏览器（chrome 和 IE）仍然显示双冒号。怎么会？

正如我所提到的，伪元素现在应该以双冒号为前缀，并保持单冒号以保持兼容性。它只是从 CSS3 选择器开始并继续使用的新符号，因此当浏览器的开发人员工具遇到*伪元素*而不是*伪类*时，如果它理解 CSS3，它会用双冒号显示它。

换句话说，它只是用双冒号显示的浏览器 UI。它不会以任何方式更改样式表中的代码。

# javascript - jQuery MaskMoney - 将输入设置为字段的开头

> ID：11124038
> 
> 赞同：0
> 
> 时间：2012-06-20T16:31:44.157
> 
> 标签：javascript, jquery

我制作了这个[jsfiddle](http://jsfiddle.net/Qct6U/)来演示我的问题。当我专注于该字段时，光标会走到最后。您开始在美元之前输入美分。我不想要这种行为。我希望它输入美元，直到用户按下“。”

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:59:08.087

插件目前不支持此功能。我们打开了这个问题[https://github.com/plentz/jquery-maskmoney/issues/33](https://github.com/plentz/jquery-maskmoney/issues/33)要求提供该功能，但目前没有人在处理它。欢迎请求请求:)

# javascript - 从 IntelliJ IDEA 中的代码完成中排除 javascript 库

> ID：11124042
> 
> 赞同：2
> 
> 时间：2012-06-20T16:32:11.820
> 
> 标签：javascript, intellij-idea

有没有办法从 IntelliJ IDEA 的代码完成中排除 Javascript 库而不将其从模块中排除？如果我将它从模块源中排除，Idea 将不再在工件中处理它。

我需要部署中的 Javascript 库，但它会污染自动完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:52:37.227

终于找到了解决办法：

右键单击项目窗口中的 Javascript 文件，选择“标记为纯文本”。也适用于 CSS。

# events - 如何以编程方式生成鼠标事件？

> ID：11124050
> 
> 赞同：5
> 
> 时间：2012-06-20T16:32:47.760
> 
> 标签：events, emacs, mouse

SLIME 中有两个非常有用的函数：`slime-copy-or-inspect-presentation-at-mouse`和`slime-presentation-menu`. 但必须使用事件参数调用它们。为了生成一个偶数，我需要做很多后勤工作（计算“鼠标”当前指向的对象的打印表示所占据的区域、行和列——这是我真的不想做的事情因为，Emacs 中肯定有一些东西已经计算了所有这些东西。

那么，有没有一种简单的方法来生成“假”鼠标事件？因为在不需要鼠标的编辑器中只使用鼠标做两件事感觉……嗯，不是很聪明。:)

**编辑**

这是我尝试过的：

```
(define-key lisp-mode-map (kbd "C-x ?")
  #'(lambda ()
      (interactive)
      (message "called")
      (slime-copy-or-inspect-presentation-at-mouse
       `(mouse-2 ;; button
     (,(selected-window) ;; window
      ,(point) ;; position
      (0 . 0) ;; window-relative pixel
      0 ;; timestamp
      nil ;; object
      ,(point) ;; text position 
      (,(current-column) . ;; column
       ,(line-number-at-pos (point))) ;; line
      nil ;; image
      (0 . 0) ;; object-relative pixel
      (1 . 1))))))
(define-key lisp-mode-map (kbd "C-x SPC")
  #'(lambda ()
      (interactive)
      (message "called")
      (slime-presentation-menu
       `(mouse-3 ;; button
     (,(selected-window) ;; window
      ,(point) ;; position
      (0 . 0) ;; window-relative pixel
      0 ;; timestamp
      nil ;; object
      ,(point) ;; text position 
      (,(current-column) . ;; column
       ,(line-number-at-pos (point))) ;; line
      nil ;; image
      (0 . 0) ;; object-relative pixel
      (1 . 1)))))) 
```

这实际上可以让我到达显示菜单的地步，但是当`slime-presentation-menu`调用绑定到菜单项的任何函数时，他们以某种方式看到它们没有被“真实”鼠标事件调用，然后抛出并退出。:(

**编辑2**

我实际上认为这是因为 ，`x-popup-menu`当您使用鼠标或键盘选择菜单项时，它会调度不同的事件...... arrrrrgh。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T15:39:00.817

期望绑定到鼠标单击的命令采用事件参数。这是一个列表，其中包含单击的按钮、位置、窗口等内容。请参阅[Elisp 手册中的 21.7.4 单击事件](http://www.gnu.org/software/emacs/manual/html_node/elisp/Click-Events.html)。

这是一个伪造滚轮事件的简单示例：

```
(mwheel-scroll `(mouse-5 ;; button
                 (,(selected-window) ;; window
                  ,(point) ;; position
                  (0 . 0) ;; window-relative pixel
                  0 ;; timestamp
                  nil ;; object
                  ,(point) ;; text position 
                  (,(current-column) . ;; column
                   ,(line-number-at-pos (point))) ;; line
                  nil ;; image
                  (0 . 0) ;; object-relative pixel
                  (1 . 1)))) ;; object size 
```

下面是一个真实事件的例子：

```
'(mouse-4
  (#<window 374 on *scratch*>
   120
   (6 . 10)
   1301935153
   nil
   120
   (0 . 0)
   nil
   (6 . 10)
   (7 . 15))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T18:38:47.600

`posn-at-point`做几乎正确的事。这是一种将其输出与真实鼠标事件进行比较的方法：

```
(defun my/test-posn (e)
  (interactive "e")
  (message "%S\n%S" e `(down-mouse-3 ,(posn-at-point))))

(global-set-key [down-mouse-3] #'my/test-posn) 
```

输出：

```
(down-mouse-3 (#<window 73 on blah> 3152 (0 . 594) 145393072 nil 3152 (0 . 33) nil (1 . 4) (8 . 18)))
(down-mouse-3 (#<window 73 on blah> 3152 (0 . 594) 0         nil 3152 (0 . 33) nil (0 . 0) (8 . 18))) 
```

# git - 不小心将 .idea 目录文件提交到 git

> ID：11124053
> 
> 赞同：355
> 
> 时间：2012-06-20T16:33:01.020
> 
> 标签：git

我不小心将`.idea/`目录提交到 git 中。这在我需要检查我的仓库的其他地方引起了冲突。我想知道如何从遥控器中删除这些文件？

因为 Intellij IDE 需要它们，所以我在本地仍然需要这些文件。我只是不希望它们在遥控器中。我已将目录添加`.idea/`到我的`.gitignore`并提交并将此文件推送到远程。不过，这在我在另一台机器上结账时似乎没有任何影响。我仍然收到错误消息：

```
error: The following untracked working tree files would be overwritten by checkout:
.idea/.name
.idea/compiler.xml
.idea/copyright/profiles_settings.xml
.idea/encodings.xml
.idea/misc.xml
.idea/modules.xml
.idea/scopes/scope_settings.xml
.idea/uiDesigner.xml
.idea/vcs.xml
.idea/workspace.xml 
```

* * *

## 回答 #1

> 赞同：753
> 
> 时间：2012-06-20T16:36:01.663

## 将 .idea 目录添加到忽略文件列表中

首先，将它添加到`.gitignore`，这样它就不会再次被您（或其他人）意外提交：

```
.idea 
```

## 从存储库中删除它

其次，仅从存储库中删除目录，但不要在本地删除它。为此，请执行此处列出的操作：

> [从 Git 存储库中删除文件而不从本地文件系统中删除它](https://stackoverflow.com/q/1143796/548696)

## 将更改发送给其他人

第三，提交文件并从存储库`.gitignore`中删除。`.idea`之后将其推送到遥控器。

## 概括

整个过程如下所示：

```
$ echo '.idea' >> .gitignore
$ git rm -r --cached .idea
$ git add .gitignore
$ git commit -m '(some message stating you added .idea to ignored entries)'
$ git push 
```

（可选地，您可以用 替换最后一行`git push some_remote`，其中`some_remote`是您要推送到的遥控器的名称）

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-06-20T16:34:52.437

您可以将其从存储库中删除并提交更改。

```
git rm .idea/ -r --cached
git add -u .idea/
git commit -m "Removed the .idea folder" 
```

之后，您可以将其推送到遥控器，之后的每个结帐/克隆都可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-12T08:15:38.520

最好在 Master 分支上执行此操作

编辑 .gitignore 文件。在其中添加以下行。

> `.idea`

从远程仓库中删除 .idea 文件夹。使用以下命令。

> `git rm -r --cached .idea`

了解更多信息。参考：[从 Git 存储库中删除文件而不实际删除它们](https://danielmiessler.com/blog/removing-files-from-a-git-repository-without-actually-deleting-them/)

暂存 .gitignore 文件。使用以下命令

> `git add .gitignore`

犯罪

> `git commit -m 'Removed .idea folder'`

推送到远程

> `git push origin master`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-03T14:57:29.887

您应该将**.gitignore**文件添加到您的项目并添加`/.idea`到它。您应该在一行中添加每个目录/文件。

如果你有一个现有的**.gitignore**文件，那么你应该简单地在文件中添加一个新行并放入`/.idea`新行。

在那个运行`git rm -r --cached .idea`命令之后。

如果遇到错误，可以运行`git rm -r -f --cached .idea`命令。毕竟运行`git add .`，然后`git commit -m "Removed .idea directory and added a .gitignore file"`最后通过运行`git push`命令推送更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-10T10:16:24.627

如果你还没有推送到 git

```
git rm .idea/ -r --cached
git add -u .idea/
git commit -m "Removed the .idea folder" 
```

如果“git rm .idea/ -r --cached”抛出错误“致命：pathspec'.idea'不匹配任何文件”并且已经推送到带有.idea的git。

```
git push origin --delete remoteBranchName
git add . //Everything is up to date
git commit -m "Removed the .idea folder" //Nothing to commit
git push origin remoteBranchName 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-09T11:14:51.673

为避免此问题再次发生，我发现拥有一个包含 的全局 gitignore 文件很有用`.idea`，例如：

```
$ echo '.idea' >> ~/.gitignore_global
$ git config --global core.excludesfile ~/.gitignore_global 
```

这种方法的另一个优点是您不需要使用 IDE 的详细信息“污染”项目的 .gitignore 文件。OTOH，您也可以选择添加`.idea`到项目中，`.gitignore`这样项目的其他贡献者就不会遇到问题。

# javascript - Backbone.js 嵌套模型

> ID：11124054
> 
> 赞同：0
> 
> 时间：2012-06-20T16:33:02.213
> 
> 标签：javascript, backbone.js

我刚刚开始学习 Backbone.js。如何为以下用例创建主干模型

*   状态：[0-n]
    *   姓名
    *   县：[0-n]
        *   姓名
        *   城市：[0-n]
            *   姓名：
            *   公园[0-n]
                *   姓名：

任何帮助将不胜感激。这是我到目前为止所尝试的

```
window.Team = Backbone.Model.extend({
        initialize: function(){
          this.id = this.get('id');
        }
      });
      window.Teams = Backbone.Collection.extend({model:Team});

      window.Ward = Backbone.Model.extend({
        initialize: function(){
          this.name = this.get('name');
          this.code = this.get('code');
          this.teams = new Teams(this.get('teams'));
        }
      });

      window.Wards = Backbone.Collection.extend({model:Ward});

      window.LGA = Backbone.Model.extend({
        initialize: function(){
          this.name = this.get('name');
          this.wards = new Wards(this.get('wards'));
        }
      });

      window.LGAs = Backbone.Collection.extend({model:LGA});

      window.State = Backbone.Model.extend({
        initialize: function(){
          this.name = this.get('name');
          this.lgas = new Wards(this.get('lgas'));
        }
      });

      window.States = Backbone.Collection.extend({model:State,

        initialize: function(){
          _.bindAll(this, 'fetch_success');
          this.bind('change', this.fetch_success);
        },

        url: function(){
            return "data.json"
        },

        fetch_success:function(){
            var data = Backbone.Syphon.serialize(someViewWithAForm);
            var model = new Backbone.Model(data);
        }
      }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:40:30.163

根据您构建/获取模型的方式，您可能会感兴趣[`Backbone-relational`](https://github.com/PaulUithol/Backbone-relational)，它可以让您定义模型之间的关系。

从文档：

```
Person = Backbone.RelationalModel.extend({
    relations: [
        {
            type: 'HasMany',
            key: 'jobs',
            relatedModel: 'Job',
            reverseRelation: {
                key: 'person'
            }
        }
    ]
}); 
```

# scala - 子类参数编译错误中的Scala内部案例类

> ID：11124056
> 
> 赞同：0
> 
> 时间：2012-06-20T16:33:08.087
> 
> 标签：scala, lift, html-email

我想从 String 设置 Html 电子邮件的正文，而不是 Lift Mailer 的 Xml 节点，所以我将 Mailer 子类化并重新定义了`buildMailBody`方法：

```
class HtmlMailer extends Mailer {
  final case class HtmlMailBodyType(text: String) extends MailBodyType

  override protected def buildMailBody(tab: MailBodyType) = {
    tab match {
      case HtmlMailBodyType(text) =>
        val bp = new MimeBodyPart
        bp.setText(text, charSet, "html")
        bp
      case _ => super.buildMailBody(tab)
    }
  }
}

object HtmlMailer extends HtmlMailer 
```

当我尝试使用它时：

```
import net.liftweb.util.Mailer
import Mailer._    

HtmlMailer.sendMail(From(sender.email), Subject(subject), To(user.email), HtmlMailBodyType(body)) 
```

我得到编译错误：

```
error: type mismatch;
found   : net.liftweb.util.Mailer.From
required: com.mypackage.HtmlMailer.From
Error occurred in an application involving default arguments.
HtmlMailer.sendMail(From(sender.email), Subject(subject), To(user.email), HtmlMailBodyType(body)) 
```

为什么会发生这种情况，我该如何正确解决？

我将 import Mailer._ 更改为 import HtmlMailer._ 并且它有效，但我相信它违反了 Liskov 替换原则，因为我不能替换`HtmlMailer`，`Mailer`因为它们有不同的参数类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:53.640

您在使用路径相关类型和单例时遇到问题。当您有嵌套类时，外部类的每个*实例都有嵌套类的**不同*实例。

现在，`From`(plus `Subject`, `To`, etc)，因为它们是嵌套的，属于一个特定的实例。在这种情况下，您有两个实例提供它们。它们是*对象*：

```
net.liftweb.util.Mailer
com.mypackage.HtmlMailer 
```

请注意，这些不是*类*，它们是*对象*。

现在，该方法`sendMail`要求其参数由与自身属于*同一实例*的类组成。提出这样的要求有很多原因，因为有很多方法可以不提出。

所以，真的，这里没有违反 liskov 替换原则，只是违反了导入隐藏的类型。如果你明确地写出来，它会变得更清楚：

```
val myInst: net.liftweb.util.Mailer = HtmlMailer
myInst.sendMail(myInst.From(sender.email), myInst.Subject(subject), myInst.To(user.email), myInst.HtmlMailBodyType(body)) 
```

您可以用或任何其他实例替换`HtmlMailer`那里，它会起作用。您*不能*使用 的两个不同实例，即使它们都属于同一类。`net.liftweb.util.Mailer``net.liftweb.util.Mailer`*`net.liftweb.util.Mailer`*

# javascript - 如何在 JavaScript 中处理条件回调，同时保持 DRY？

> ID：11124057
> 
> 赞同：4
> 
> 时间：2012-06-20T16:33:18.913
> 
> 标签：javascript, callback

我最近一直在玩，`NodeJS`我发现自己遇到了一个常规模式问题：

我有一个主要操作正在运行，取决于一些配置参数，我需要执行一个额外的步骤，但这个步骤是异步的：

```
 if(request.config.save) {

        fs.writeFile(request.config.save, decryptedData, function(err) {
            // Continue the operation with a callback...
            // Perform some other ops.
            if(typeof callback == 'function') callback(decryptedData);
        }.bind(this));

    } else {

        // Continue the same operation without a callback
        // Perform some other ops.
        if(typeof callback == 'function') callback(decryptedData); 
```

如您所见，此代码不是 DRY，因为主结尾（回调）被调用了两次。

我看到的唯一方法是使用函数（但函数调用又不是 DRY ......而且代码可能真的很臃肿......

那么有一个漂亮的忍者技巧来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:38:03.440

好吧，一行代码并不是那么重复，但如果你做的不止这些，它会变得非常不枯​​燥。将你的最终逻辑包装到一个函数中，然后在你的条件中调用它呢？

```
var endTick = function(){
    if(typeof callback == 'function') callback(decryptedData);
}

if(request.config.save) {

    fs.writeFile(request.config.save, decryptedData, function(err) {
        // Continue the operation with a callback...
        // Perform some other ops.
        endTick();
    }.bind(this));

} else {

    // Continue the same operation without a callback
    // Perform some other ops.
    endTick();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:43:15.463

```
function cb() {
   if (typeof arguments[0] === 'function')
      arguments[0].apply(null, Array.prototype.slice.call(arguments,1));
} 
```

Shouldn't be more than around 10 characters longer (might have to `bind`) than a normal function call *without* the `typeof` check, and assuming no `bind` it shouldn't be more than 4.

There is no way to solve this without paying some price, somewhere.

# c++ - MFC 中的动态菜单

> ID：11124058
> 
> 赞同：0
> 
> 时间：2012-06-20T16:33:21.620
> 
> 标签：c++, mfc

我需要在我正在编写的 VS2010 SDI 应用程序中创建一些动态菜单。我看过这个，但不是很明白 [使用 mfc 的动态菜单](https://stackoverflow.com/questions/3673546/dynamic-menu-using-mfc)

目前，我什至不知道如何使用 GetMenu 从我的 Doc 文件中获取菜单句柄。我正在尝试这个，但它说 GetMenu 不接受零参数，尽管我见过的许多例子都清楚地表明了这一点。

```
CMenu *menu = GetMenu();

        menu->AppendMenu(MF_STRING, ID_HIDE, _T("Text")); 
```

我要做的就是在子菜单下添加一个文件列表，从数据库中选择（因此是动态部分），以便用户可以选择他们想要处理的文件。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:49:43.280

如果您`GetMenu`从派生自 的窗口类`CWnd`中调用，您将调用`CWnd::GetMenu`并且它不需要窗口句柄。如果您从其他任何地方调用它`::GetMenu(HWND)`，您将需要传递一个窗口句柄。您可以从任何 CWnd 对象及其`m_hWnd`成员或通过调用`GetSafeHwnd()`它来获取句柄。

# c - 找不到 SendInput() 函数使用的任何数据类型

> ID：11124059
> 
> 赞同：0
> 
> 时间：2012-06-20T16:33:26.680
> 
> 标签：c, winapi, sendinput

我正在尝试使用`SendInput()`功能。我写了这段代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <winuser.h>

#define WIN32_LEAN_AND_MEAN

//...

    KEYBDINPUT kbi;
    kbi.wVk = 0x31;
    kbi.wScan = 0;
    kbi.dwFlags = 0;
    kbi.time = 0;

    INPUT input;
    input.type = INPUT_KEYBOARD;
    input.ki = kbi;

    SendInput(1, &input, sizeof input); 
```

编译：

`gcc -Wall -o window.exe win32.c -lWs2_32`

我得到：

```
win32.c: In function ‘main’:
win32.c:13:2: error: ‘KEYBDINPUT’ undeclared (first use in this function)
win32.c:13:2: note: each undeclared identifier is reported only once for each function it appears in
win32.c:13:13: error: expected ‘;’ before ‘kbi’
win32.c:14:2: error: ‘kbi’ undeclared (first use in this function)
win32.c:20:2: error: ‘INPUT’ undeclared (first use in this function)
win32.c:20:8: error: expected ‘;’ before ‘input’
win32.c:21:2: error: ‘input’ undeclared (first use in this function)
win32.c:21:15: error: ‘INPUT_KEYBOARD’ undeclared (first use in this function) 
```

我不知道如何解决这个问题。根据[文档](http://msdn.microsoft.com/en-us/library/ms646271%28v=vs.85%29.aspx)，它在`Winuser.h`标题中声明。但对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:49:18.927

我想你需要添加

```
#define _WIN32_WINNT 0x0401
#include <windows.h>
#include <winuser.h> 
```

在您的源代码中包含 windowssh 和 winuser.h 之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T23:41:00.180

```
#define _WIN32_WINNT 0x0403
#include <windows.h> 
```

似乎这是您在项目中某处需要的魔法#define（在代码中明确显示，或通过编译器命令行参数-D）。

请注意，windows.h 包含 winuser.h，因此无需包含它，因为它已经为您包含在内。此外，WIN32_LEAN_AND_MEAN 定义仅在包含*在*windows 之前才有效。[关于它在这里](http://blogs.msdn.com/b/oldnewthing/archive/2009/11/30/9929944.aspx)做什么的详细信息；这些天不需要或特别有用。

--

那么这里发生了什么？在winuser.h（C:\Cygwin\usr\include\w32api\winuser.h）中寻找KBDINPUT的定义，我们看到：

```
#if (_WIN32_WINNT >= 0x0403)
typedef struct tagMOUSEINPUT {
...
} MOUSEINPUT,*PMOUSEINPUT;
typedef struct tagKEYBDINPUT {
... 
```

那就是问题所在; 这些只有在 _WIN32_WINNT 大于 0x0403 时才被定义。

这些是 cygwin 包中的文件。有趣的是，来自 Microsoft SDK（通常安装在 C:\Program Files\Microsoft SDKs\Windows\v7.1\Include\WinUser.h）中的 winuser.h 使用不同的条件：

```
#if (_WIN32_WINNT > 0x0400) 
```

...这解释了 Jay 的建议 - 他可能正在查看 MS 文件，这里 0x0401 就足够了；并且还解释了为什么它不适合你——你可能使用的是具有更高版本要求的 cygwin。至于为什么这两个文件不同 - 我不知道那里......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T18:07:38.620

这是像 VC6 这样的旧 IDE 的问题，我尝试了上述方法，但没有成功。我必须在项目设置上提供标志。

转到设置>> C / C ++选项卡>>从类别组合框中选择“常规”添加`/D _WIN32_WINNT=0x401`到项目设置编辑框。那是针对VC6的。

[/d](https://msdn.microsoft.com/en-us/library/aa235412(v=vs.60).aspx)是您提供标志的方式，实际标志是_WIN32_WINNT=0x401。我必须将其设置为 0x401，其他值（如 0x0500）会导致更多错误。

# jquery - 如何在 jquery 中的两个类之间切换？

> ID：11124060
> 
> 赞同：1
> 
> 时间：2012-06-20T16:33:27.820
> 
> 标签：jquery, html, css, class, toggleclass

我有一个问题，`toggleClass`它似乎无法正常工作。图像应该在`show`和之间变化`hide`。它确实更改为`hide`，但没有返回

这是我的[示例](http://jsfiddle.net/patrioticcow/wNXRS/)和一些代码：

```
<div class="top_menu_hidden" style="display: none; ">testing</div>
<div class="show_menu"></div>

$('.show_menu').on('click', function(){
        $('.top_menu_hidden').stop().slideToggle('normal', function(){
            $(".show_menu").toggleClass("hide_menu show_menu");
        });
});​

.show_menu{
    background: url("http://placehold.it/150&text=show") no-repeat scroll 0 0 transparent;
    height: 150px;
    width: 150px;
}
.hide_menu{
    background: url("http://placehold.it/150&text=hide") no-repeat scroll 0 0 transparent;
    height: 150px;
    width: 150px;
} 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T16:34:54.673

```
$(".show_menu, .hide_menu").toggleClass("hide_menu show_menu"); 
```

**[演示](http://jsfiddle.net/wNXRS/2/)**

**完整代码**

```
$('.show_menu').on('click', function() {
    $('.top_menu_hidden').stop().slideToggle('normal', function() {
        $(".show_menu, .hide_menu").toggleClass("hide_menu show_menu");
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T16:35:23.207

有一个开箱即用的切换功能：

```
$(".show_menu").toggle(); 
```

`toggle`文档：

> 说明：显示或隐藏匹配的元素。

# svn - 恢复 SVN 中的提交？

> ID：11124062
> 
> 赞同：1
> 
> 时间：2012-06-20T16:33:36.393
> 
> 标签：svn, version-control

我如何恢复具有以下情况的提交？

```
Revision 3, Commit Message
Revision 2, Commit Message
Revision 1, Commit Message 
```

修订版 2 是一个错误的提交，我想删除它。如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T16:39:53.917

您可以通过 SVN 中的反向合并撤消提交：

假设您有一个从主干检出的工作副本：

```
svn merge -c -2 URL/trunk 
```

这将撤消您在修订版 2 中所做的更改，并为您留下一份工作副本，其中包含您需要提交的更改。

这不会更改历史记录，因为在 SVN 中无法更改已签入修订的历史记录。只有通过存储库服务器上的转储/加载循环，才能完全删除我不推荐的修订。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:39:42.810

在结帐时：

```
 svn merge -r2:1 path/to/checkout
  svn ci -m'Undo changes in rev 2 ' path/to/checkout 
```

如果您希望它完全脱离 repo，您​​需要将其转储、过滤并加载到 repo-server 上的新的。

# javascript - 在播放 HTML5 视频时打开弹出窗口

> ID：11124068
> 
> 赞同：1
> 
> 时间：2012-06-20T16:33:55.300
> 
> 标签：javascript, html, video, popup, popcornjs

我正在使用 popcorn.js 提供一些与 HTML5 视频的交互。在播放视频时，我试图让另一个窗口（带有另一个视频）在某个时间点打开，然后在 x 秒后关闭。基本上，我正在尝试重新创建此处看到的功能：http: [//thewildernessdowntown.com](http://thewildernessdowntown.com)

我遇到的问题是我的弹出窗口被 Firefox 的弹出窗口阻止程序阻止了。我怎样才能解决这个问题？再次，我将参考[http://thewildernessdowntown.com](http://thewildernessdowntown.com)，因为他们的窗户打开得很好，但我不知道他们在做什么。

这是我拥有的一些非常基本的代码：

```
document.addEventListener('DOMContentLoaded', function() {

    var $popcorn = Popcorn('#video');

    $popcorn.code({
        start: 6,
        end: 12,
        onStart: function() {
            window.open('window.html','window','width=400,height=200');
        },
        onEnd: function() {
            window.close();
        }
    });

}, false ); 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:19:41.373

您可以在“点击”事件侦听器中打开一个新窗口，但不能在超时或视频时间更新事件中打开一个新窗口，这是 Popcorn 使用的。但是，如果您仔细观察 The Wilderness Downtown，它会通过在您单击开始按钮时提前打开几个窗口然后稍后重新使用这些窗口来解决这个问题。所以像这样的事情......

```
document.getElementById('start-button').addEventListener('click', function() {

    var $popcorn = Popcorn('#video'),
        popup = window.open('about:blank','mywindow','width=10,height=10');

    $popcorn.code({
        start: 6,
        end: 12,
        onStart: function() {
            window.open('window.html','mywindow');
            popup.moveTo(400, 400);
            popup.resizeTo(400,200);
            popup.focus();
        },
        onEnd: function() {
            //window.close();
            /* in case you want to re-use this window again later... */
            window.open('about:blank','mywindow');
            popup.moveTo(0, 0);
            popup.resizeTo(10, 10);
        }
    });

    //optionally...
    $popcorn.play();

}, false ); 
```

如果您打开的窗口指向不同的域，您将遇到问题。

# c# - C# 公开强类型字典键

> ID：11124077
> 
> 赞同：1
> 
> 时间：2012-06-20T16:34:35.127
> 
> 标签：c#, dictionary

我确信我不会使用正确的词语来解释，但我希望你能理解我想要完成的事情。我有一个在字典集合中传递的类。传入的字典集合是否必须具有此类所需的某些键。我希望能够公开公开课程所需的那些密钥，但不仅仅是字符串，而是实际项目。枚举会起作用，但由于这个类是一个基类，我认为这不是一个好的解决方案。我需要类似于每次将项目添加到 Resources.resx 文件时生成的 Resources 类。所以你可以去 Resources.Resources.MyLabel1、Resources.Resources.MyLabel2 等。这可能吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:46:05.310

Create properties that expose your values

```
public class MyClass

    private Dictionary<string,string> _dict;

    public MyClass (Dictionary<string,string> dict)
    {
        _dict = dict;
    }

    public string FirstName { get { return _dict["FirstName"]; } }
    public string LastName { get { return _dict["LastName"]; } }
    ...
} 
```

Alternatively you can aslo create read/write properties

```
public string FirstName { 
    get { return _dict["FirstName"]; }
    set { _dict["FirstName"] = value; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:39:22.093

你可以在你的类上提供一个 static 或 const 成员：

```
class PickyClass {
  public static readonly string[] RequiredKeys = new[] {"length", "width"};

  /// <summary>
  /// Please note that you must include at least RequiredKeys in values
  /// </summary>
  public void Setup(Dictionary<string,string> values)
  {
    ...
  }
} 
```

（编辑）还是按名称可寻址它们很重要？在这种情况下，如何：

```
class PickyClass {
  public class RequiredKeys
  {
    public const string Length = "length";
    public const string Width = "width";
  }

  /// <summary>
  /// Please note that you must include every const in RequiredKeys in values
  /// </summary>
  public void Setup(Dictionary<string,string> values)
  {
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:46:54.123

这听起来像是你应该隐藏的细节

```
public void Setup(Dictionary<string,string> values) 
```

如果`values`必须包含某些键，那么也许您可以将该信息编码为您自己的字典类型。

```
public class FussyDictionary : Dictionary<string,string> {
  // You must provide these values
  public FussyDictionary(string valueA, string valueB) {
     Add("magicKey1", valueA);
     Add("magicKey2", valueB);
  }

  // Override remove to stop you removing these keys?
} 
```

# android - osmdroid mapview：放大时布局发生变化

> ID：11124078
> 
> 赞同：0
> 
> 时间：2012-06-20T16:34:41.173
> 
> 标签：android, android-mapview, osmdroid

我目前正在尝试使用 osmdroid mapview。我的 XML 布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/lblText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="text1"
    android:textSize="25sp" />

<TextView
    android:id="@+id/lblText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="text2"
    android:textSize="25sp" />

<org.osmdroid.views.MapView
    android:id="@+id/osmmapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:visibility="visible" />

</LinearLayout> 
```

这在执行时看起来非常好并且效果很好： ![图片](../Images/e790fc1dcc2de45d52e0007eeacc5eda.png)

不幸的是，如果按下放大按钮，布局就会出现问题，因为在执行放大期间，2个 TextView 会消失：

![在缩放过程中布局看起来像这样](../Images/2d62523abe04dc44da88da7ad4399d27.png)

缩放后再次正常，如第一个屏幕截图所示。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:06:41.590

你应该改变你的布局，如下所示：

```
<org.osmdroid.views.MapView
    android:id="@+id/osmmapview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:clickable="true"
    android:visibility="visible" /> 
```

宽度和高度设置为“fill_parent”的视图会填满整个屏幕。

# c++ - 如何从注入的 DLL 中获取程序窗口？

> ID：11124079
> 
> 赞同：0
> 
> 时间：2012-06-20T16:34:43.723
> 
> 标签：c++, winapi, hook, dll-injection

我已将 DLL 注入到程序中，以在应用程序主窗口上实现聊天 UI。我想我可以获取应用程序主窗口句柄，然后获取它的 DC，然后在上面绘制。该窗口有一个可预测的标题，这意味着我可以使用它`FindWindow`来获取句柄。唯一的问题是，DLL 是在进程启动时注入的。那时，该窗口尚未创建。这意味着`FindWindow`什么也没找到！

对此有什么解决方案？我可以在 DLL 中创建一个线程并休眠一段时间，直到我知道创建了窗口吗？这似乎很不稳定，所以我宁愿不这样做。

我试图做的是`SetWindowsHookEx`在 DLL 中使用来挂钩全局 WndProc。我可以扫描这些消息，直到从我的窗口中找到一条消息（这意味着它已被创建）。然后我可以保存句柄并继续我的程序。我不太担心当时有多个同名的窗口。唯一的问题是我的钩子永远不会被调用。

我像这样创建钩子：

```
m_hWndProcHook = SetWindowsHookEx(WH_CALLWNDPROC, (HOOKPROC)WndProc, m_hModule, 0);
if(!m_hWndProcHook)
{
    oss << "Failed to set wndproc hook. Error code: " << GetLastError();
    Log(oss.str().c_str());
    return false;
} 
```

它返回一个有效的钩子。WndProc 如下所示：

```
LRESULT CALLBACK CChatLibrary::WndProc(int code, WPARAM wParam, LPARAM lParam)
{
    CWPSTRUCT* pData;
    ostringstream oss;
    char wndName[256];

    gChatLib->Log("WNDPROC");

    if(code < 0)
        return CallNextHookEx(gChatLib->GetWndProcHookHandle(), code, wParam, lParam);
    else
    {
        //Get the data for the wndproc
        pData = (CWPSTRUCT*)lParam;

        //Log the message
        GetWindowText(pData->hwnd, wndName, 256);
        oss << "Message from window \"" << wndName << "\"";
        gChatLib->Log(oss.str().c_str());

        return CallNextHookEx(gChatLib->GetWndProcHookHandle(), code, wParam, lParam);
    }
} 
```

但是没有“WNDPROC”消息记录到我的日志文件中......早些时候，我有一个`MessageBox`而不是日志来查看它是否有效，结果证明这是一个糟糕的主意。所有程序都冻结了，因为它们在等待我单击“确定”，而我不得不进行硬重置...当我重新打开计算机并`MessageBox`用日志命令替换时，它不起作用。不过，我知道我的日志有效，因为它在其他任何地方都有效。我对发生的事情感到非常困惑。

是否有其他获取主窗口的方法（最好是在创建时）？还是我的钩子方法很好，但只是执行错误？感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:33:24.667

当应用程序已经启动时，您始终可以注入 DLL。由于 Windows Vista/7 中的 ASLR，现在它相当复杂，但并非不可能。您必须编写一个简短的应用程序，将选定的 DLL 注入到具有给定 PID 的进程中。为了将 DLL 注入正在运行的进程中，应该执行以下操作：

编写一个可以找到`kernel32.dll`库地址的 shellcode。这是我在 NASM 中的旧代码：

```
[BITS 32]

_main:
    xor     eax,    eax
    mov     esi,    [FS:eax+0x30]   ; ESI points at PEB
    mov     esi,    [esi+0x0C]  ; ESI points at PEB->Ldr
    mov     esi,    [esi+0x1C]  ; ESI points at PEB->Ldr.InInitOrder
    mov     edx,    -1          ; EDX is now the current letter pointer

check_dll:
    mov     ebp,    [esi+0x08]  ; EBP points at base address InInitOrder[i]
    mov     edi,    [esi+0x20]  ; EDI points at InInitOrder[X] name
    mov     esi,    [esi]       ; ESI points at flink
    mov     edx,    -1      ; set letter pointer at InInitOrder name
    mov     ebx,    0       ; set pattern letter pointer to null

check_small_name:
    inc     edx             ; go to the next letter in InInitOrder name
    cmp     ebx,    0x7     ; check if we have checked all letters
    je      library_found       ; if so and no error kernel32.dll found
    mov     al, BYTE[edi+edx]   ; load byte to EAX from InInitOrder name
    cmp     al,     0x0 ; check if unicode complement
    je      check_small_name    ; ignore if so
    jmp     s_kernel32

back1:
    pop     ecx
    cmp     BYTE[ecx+ebx],  al  ; compare characters
    jne     check_big_name      ; if not equal check upper size
    inc     ebx         ; if equal then go to the next letter in pattern
    jmp     check_small_name    ; loop  

check_big_name:
    jmp     b_kernel32

back2:
    pop     ecx
    cmp     BYTE[ecx+ebx],  al  ; check characters
    jne     check_dll       ; if not equal then go to the next module
    inc     ebx         ; if equal go increment the pattern pointer
    jmp     check_small_name    ; loop

library_found:
    mov     eax,    ebp         ; move kernel32 base address into ECX

loop:
    jmp loop    

s_kernel32:
    call    back1
    db      "kernel32",10,0 

b_kernel32:
    call    back2
    db      "KERNEL32",10,0 
```

1.  将编译好的 shellcode 从文件加载到内存中。
2.  作为调试器附加到目标进程。停止应用程序中的所有线程。分配一些内存并设置“读、写、执行”权限并在那里注入 shellcode。
3.  获取主线程句柄。打开线程，创建线程上下文备份，然后设置新的上下文并修改 EIP 寄存器（设置为分配的内存 - shellcode - 地址）。
4.  恢复线程一段时间（例如 5 秒）。确保进程被激活并且我们的 shellcode 有机会执行。
5.  再次作为调试器附加到目标进程。读取现在应该`kernel32.dll`在目标进程中存储基地址的 EAX 寄存器（感谢 ASLR，它可能与注入器进程中的不同）。
6.  从您的过程中检查`LoadLibraryA`函数的偏移量。`kernel32.dll`
7.  目标进程中的偏移量应该相同，因此您必须将远程`kernel32.dll`基地址添加到偏移量才能计算`LoadLibraryA`远程进程中函数的基地址。
8.  调用`CreateRemoteThread`函数，将计算地址`LoadLibraryA`作为要调用的函数，并将 DLL 路径作为参数。

前段时间我不得不自己解决这一切（我找不到任何描述），但最近我发现了类似的东西：http: [//syprog.blogspot.com/2012/05/createremotethread-bypass-windows.html](http://syprog.blogspot.com/2012/05/createremotethread-bypass-windows.html)

快乐黑客！

# python - 如何从xml中读取标签？

> ID：11124080
> 
> 赞同：0
> 
> 时间：2012-06-20T16:34:47.980
> 
> 标签：python, xml, elementtree

我有一些问题要从这个 xml 中读取信息：

```
<entry number="50" date="2011-01-29">
 <name>Info text about account</name>
 <row account="1930" debit="0" credit="2051"/>
 <row account="1471" debit="410" credit="0"/>
 <row account="4404" debit="1641" credit="0"/>
</entry> 
```

我使用此代码

```
def printInfoOfVerification():
    valFound = 0
        print("Now system will print information about a verification nr in xml:")
        val = input("Enter verification number: ")
    verificationNumbr = xmltree.iter('entry')
    for i in verificationNumbr:
        if (i.attrib['number']) == val:
                valFound = 1
                    print("Verification number:",val, "found")
                    print("Info about verification:")
                    print(i.attrib['date'])
            if valFound == 0:
                    print("Verification number not found:",val) 
```

如果“val”= 50，这将产生：

```
Verification number: 50 found
Info about verification:
2011-01-29 
```

但问题是，我还想打印标签“name”中的信息，所以对于这个例子，它应该是这样的：

```
Verification number: 50 found
Info about verification:
2011-01-29
Info text about account 
```

我试图用 xmltree.iter('name') 和其他方式读取名称标签，但没有成功:(有人知道该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:49:31.177

我个人选择在 Python 2.7.x 中使用 lxml。

```
from lxml import etree

data = """
<entry number="50" date="2011-01-29">
 <name>Info text about account</name>
 <row account="1930" debit="0" credit="2051"/>
 <row account="1471" debit="410" credit="0"/>
 <row account="4404" debit="1641" credit="0"/>
</entry>
"""

tree = etree.fromstring(data)
entry = tree.xpath('/entry[@number="49"]')
if not entry:
    print 'No entry found'

entry = tree.xpath('/entry[@number="50"]')[0]
print 'found'
print 'Info: {}'.format(entry.get('date'))
print entry.find('name').text
for row in entry.findall('row'):
    print 'account =', row.get('account') # etc... 
```

输出：

```
No entry found
found
Info: 2011-01-29
Info text about account
account = 1930
account = 1471
account = 4404 
```

可能的方便查找（通过数字快速访问节点）：

```
lookup = dict( (int(node.get('number')), node) for node in tree.xpath('/entry') ) 
```

然后通过以下方式访问：

```
lookup[50].findall('account') 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:10:41.880

谢谢帮忙！！我还找到了一种使用 ElementTree 来解决打印出来的问题的方法：

```
Verification number: 50 found
Info about verification:
2011-01-29
Namn: Info text about account
Konto: 1930, Debit:     0, Kredit:  2051
Konto: 1471, Debit:   410, Kredit:     0
Konto: 4404, Debit:  1641, Kredit:     0 
```

我使用的代码：

```
def printInfoOfVerification():
        print("Now system will print information about a verification nr in xml:")
        val = input("Enter verification number: ")
        verificationNumbr = xmltree.iter('entry')
        for entry in verificationNumbr:
                if (entry.attrib['number']) == val:
                        valFound = 1
                        print("Verification number:",val, "found")
                        print("Info about verification:")
                        print(entry.attrib['date'])
                        findInfoAboutVerification(entry)
        if valFound == 0:
                print("Verification number not found:",val)

def findInfoAboutVerification(entry):
        verificationText = entry.iter()
        for node in verificationText:
                if "name" in node.tag:
                        print('Namn: %s' % node.text)
                if "comment" in node.tag:
                        print('Kommentar: %s' % node.text)
                if "row" in node.tag:
                        print('Konto: %s, Debit: %s, Kredit: %s' % (node.attrib['account'], node.attrib['debit'].rjust(5), node.attrib['credit'].rjust(5))) 
```

# batch-file - Tortoise SVN noui 命令不起作用？

> ID：11124086
> 
> 赞同：1
> 
> 时间：2012-06-20T16:34:58.380
> 
> 标签：batch-file, tortoisesvn

我正在从批处理文件运行自动更新命令，并且正在使用 TortoiseSVN 的命令行提示符，我不希望显示任何弹出窗口。我已经尝试了命令 /noui 但它似乎不起作用。有没有办法在不弹出 UI 的情况下执行更新或清理过程？我目前在下面有这样的东西......

```
TortoiseProc.exe" /command:cleanup /path:"%SOURCETrunk%" /url:"%URLTrunk%" /closeonend:3 /nodlg /noui 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:06:56.400

我刚刚安装了 Tortoise SVN 命令行客户端。它是安装最新版本 Tortoise SVN 的一个选项。在那里我可以直接从命令行调用普通的 svn update 命令，并且不会出现任何 UI 窗口。

切换到工作目录，然后运行“svn update”命令

# servicestack - 使用 ServiceStack 的 AsyncServiceBase，一劳永逸

> ID：11124091
> 
> 赞同：8
> 
> 时间：2012-06-20T16:35:21.977
> 
> 标签：servicestack

我有以下服务

```
public class AppService : AsyncServiceBase<EvaluateStock>
{
    public IBus Bus { get; set; }

    public override object ExecuteAsync(EvaluateStock request)
    {
        // this will block the incoming http request 
        // unitl task is completed

        // long computation
        // Bus.Publish(result)
    }
} 
```

它被不同的消费者按照以下方式调用

```
POST
http://srv1/app/json/asynconeway/EvaluateStock 
```

使用 asynconeway，我假设它可以让我像 WCF 使用 IsOneWay 一样实现火而忘记。但似乎并非如此。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:42:00.520

[AsyncServiceBase](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/AsyncServiceBase.cs#L17)已被弃用，因为[ExecuteAsync](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceBase.cs#L307)现在位于 ServiceBase 中，当向**/asynconeway/XXX**预定义端点发出请求时，它会被调用。

建议的方法不是覆盖**ExecuteAsync** ，而是实现[IMessageFactory](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Messaging/IMessageFactory.cs)，如果`IMessageFactory`已在 AppHost IOC 中注册，则会调用它。如果一个 IMessageFactory 没有被注册，它只是被执行 Sync - 此时如果你仍然希望它是非阻塞的，你会覆盖它。ExecuteAsync 的 impl 位于：

```
// Persists the request into the registered message queue if configured, 
// otherwise calls Execute() to handle the request immediately.
// 
// IAsyncService.ExecuteAsync() will be used instead of IService.Execute() for 
// EndpointAttributes.AsyncOneWay requests
public virtual object ExecuteAsync(TRequest request)
{
    if (MessageFactory == null)
    {
        return Execute(request);
    }

    BeforeEachRequest(request);

    //Capture and persist this async request on this Services 'In Queue' 
    //for execution after this request has been completed
    using (var producer = MessageFactory.CreateMessageProducer()) {
        producer.Publish(request);
    }

    return ServiceUtils.CreateResponseDto(request);
} 
```

IMessageFactory（客户端）/IMessageService（服务器）是 ServiceStack 的消息传递 API 的一部分，它允许您发布消息以供以后延迟执行。有关使用内置 Redis IMessageService 的端到端解决方案的示例，请参阅[Redis 和消息 wiki 。](https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)也有[InMemory](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.Messaging.Tests/TransientServiceMessagingTests.cs)和[RCon](https://github.com/ServiceStack/ServiceStack/tree/master/src/ServiceStack.Common/Messaging/Rcon) IMesssageService 可用，创建自己的也应该很容易。

### 未来的异步支持

还有一个运行 ServiceStack的[异步分支](https://github.com/ServiceStack/ServiceStack/tree/async)`IHttpAsyncHandler`，并且已经有一个功能性的 alpha 版本可供您试用：[ServiceStack-v4.00-alpha.zip](https://github.com/downloads/ServiceStack/ServiceStack/ServiceStack-v4.00-alpha.zip)

通过此更改，ServiceStack 支持`Task<>`作为服务的返回类型。您只需要注册[Task<> 插件](https://github.com/ServiceStack/ServiceStack/blob/async/tests/ServiceStack.Plugins.Tasks.Tests/TaskServiceTest.cs#L46)。要查看完整示例，请查看[此集成测试](https://github.com/ServiceStack/ServiceStack/blob/async/tests/ServiceStack.Plugins.Tasks.Tests/TaskServiceTest.cs)。

# python - 将 Python 的“打印”输出重定向到 Logger

> ID：11124093
> 
> 赞同：45
> 
> 时间：2012-06-20T16:35:31.720
> 
> 标签：python, logging, stdout

我有一个 Python 脚本，它使用“打印”打印到标准输出。我最近通过 Python Logger 添加了日志记录，并希望这样做，如果启用了日志记录，这些打印语句将转到记录器。我不想修改或删除这些打印语句。

我可以通过执行'log.info（“some info msg”）'来记录。我希望能够做这样的事情：

```
if logging_enabled:
  sys.stdout=log.info
print("test") 
```

如果启用了日志记录，则应该记录“test”，就像我做了 log.info("test") 一样。如果未启用日志记录，则应将“test”打印到屏幕上。

这可能吗？我知道我可以以类似的方式将标准输出定向到文件（请参阅：[将打印重定向到日志文件](https://stackoverflow.com/questions/2513479/redirect-prints-to-log-file)）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T16:44:20.227

你有两个选择：

1.  打开一个日志文件并用它替换 sys.stdout，而不是一个函数：

    ```
    log = open("myprog.log", "a")
    sys.stdout = log

    >>> print("Hello")
    >>> # nothing is printed because it goes to the log file instead. 
    ```

2.  将 print 替换为您的日志功能：

    ```
    # If you're using python 2.x, uncomment the next line
    #from __future__ import print_function
    print = log.info

    >>> print("Hello!")
    >>> # nothing is printed because log.info is called instead of print 
    ```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-07-16T16:52:07.890

当然，您既可以打印到标准输出，也可以附加到日志文件，如下所示：

```
# Uncomment the line below for python 2.x
#from __future__ import print_function

import logging

logging.basicConfig(level=logging.INFO, format='%(message)s')
logger = logging.getLogger()
logger.addHandler(logging.FileHandler('test.log', 'a'))
print = logger.info

print('yo!') 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-29T22:27:06.237

另一种方法是将记录器包装在一个对象中，该对象将调用转换`write`为记录器的`log`方法。

Ferry Boender 就是这样做[的，根据 GPL 许可](http://www.electricmonk.nl/log/posting-license/)在[其网站](http://www.electricmonk.nl/)上[的帖子](http://www.electricmonk.nl/log/2011/08/14/redirect-stdout-and-stderr-to-a-logger-in-python/)中提供。下面的代码基于此，但解决了原始代码的两个问题：

1.  该类没有实现程序退出时调用的 flush 方法。
2.  该类不会缓冲换行符上的写入，因为 io.TextIOWrapper 对象应该会在奇数点产生换行符。

```
import logging
import sys

class StreamToLogger(object):
    """
    Fake file-like stream object that redirects writes to a logger instance.
    """
    def __init__(self, logger, log_level=logging.INFO):
        self.logger = logger
        self.log_level = log_level
        self.linebuf = ''

    def write(self, buf):
        temp_linebuf = self.linebuf + buf
        self.linebuf = ''
        for line in temp_linebuf.splitlines(True):
            # From the io.TextIOWrapper docs:
            #   On output, if newline is None, any '\n' characters written
            #   are translated to the system default line separator.
            # By default sys.stdout.write() expects '\n' newlines and then
            # translates them so this is still cross platform.
            if line[-1] == '\n':
                self.logger.log(self.log_level, line.rstrip())
            else:
                self.linebuf += line

    def flush(self):
        if self.linebuf != '':
            self.logger.log(self.log_level, self.linebuf.rstrip())
        self.linebuf = ''

logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s:%(levelname)s:%(name)s:%(message)s',
    filename="out.log",
    filemode='a'
)

stdout_logger = logging.getLogger('STDOUT')
sl = StreamToLogger(stdout_logger, logging.INFO)
sys.stdout = sl

stderr_logger = logging.getLogger('STDERR')
sl = StreamToLogger(stderr_logger, logging.ERROR)
sys.stderr = sl 
```

这使您可以轻松地将所有输出路由到您选择的记录器。如果需要，如果您以后需要恢复它，您可以在替换它之前保存`sys.stdout`和/或按照其他人在此线程中提到的方法。`sys.stderr`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-10-27T18:29:58.120

一个更简单的选择，

```
import logging, sys
logging.basicConfig(filename='path/to/logfile', level=logging.DEBUG)
logger = logging.getLogger()
sys.stderr.write = logger.error
sys.stdout.write = logger.info 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T16:54:58.097

你真的应该这样做：通过调整你的日志配置来使用`print`语句或其他东西，这取决于设置。不要覆盖`print`行为，因为将来可能引入的某些设置（例如，由您或其他人使用您的模块）可能实际上将其输出到`stdout`您将遇到问题。

有一个处理程序应该将您的日志消息重定向到正确的流（文件`stdout`或任何其他类似文件）。它被调用并与模块[`StreamHandler`](http://docs.python.org/library/logging.handlers.html#streamhandler)捆绑在一起。`logging`

所以基本上在我看来你应该做，你说你不想做的事情：`print`用实际的日志记录替换语句。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-17T14:05:50.170

一旦你定义了你的记录器，即使有多个打印参数，也可以使用它来使打印重定向到记录器。

```
print = lambda *tup : logger.info(str(" ".join([str(x) for x in tup]))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-12T03:10:36.207

下面的剪辑在我的 PySpark 代码中完美运行。如果有人需要以防万一理解-->

```
import os
import sys
import logging
import logging.handlers

log = logging.getLogger(__name_)

handler = logging.FileHandler("spam.log")
formatter = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")
handler.setFormatter(formatter)
log.addHandler(handler)
sys.stderr.write = log.error 
sys.stdout.write = log.info 
```

（将在同一目录中的“spam.log”中记录每个错误，控制台/标准输出上不会有任何内容）

（将在同一目录中的“spam.log”中记录所有信息，控制台/标准输出上不会出现任何内容）

在两个文件以及控制台中打印输出错误/信息删除以上两行。

快乐编码干杯！！！

# c# - 对除另一个特定程序集之外的所有内容隐藏班级成员

> ID：11124096
> 
> 赞同：0
> 
> 时间：2012-06-20T16:35:38.450
> 
> 标签：c#, dll, mono, unity-container, monodevelop

我有两个用于 Unity 运行时和编辑器扩展的类库“MyLibrary.dll”和“MyLibraryEditor.dll”。“MyLibrary.dll”中有几个类成员仅供“MyLibraryEditor.dll”使用。

我的第一个想法是使用`internal`关键字，因为我错误地认为这会限制对命名空间的可见性。相反，很明显这个关键字限制了程序集的可见性。

在不影响性能的情况下，将某些类成员的访问权限限制为“MyLibrary.dll”和“MyLibraryEditor.dll”的最佳方法是什么？此外，反射不是一种选择。

我很高兴简单地不记录这些功能，但不幸的是 Intellisense（和 MonoDevelop 的等价物）显示了这些成员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T16:40:26.763

如果您希望一个程序集中的内部构件在另一个程序集中可见，您可以`InternalsVisibleTo`在包含该构件的程序集中使用该属性。请参阅[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)：

```
[assembly:InternalsVisibleTo("MyLibraryEditor")] 
```

这就是答案，您可能需要重新考虑您的架构设计，以便您不需要使用它，因为它将向其他组件开放所有内部结构，而不仅仅是您想要的那些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T16:40:58.083

您可以创建成员`internal`，但用于[`[InternalsVisibleTo]`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)向其他程序集授予这些成员的访问权限。*当然，它们在同一个*程序集中仍然是可见的……没有办法绕过这一点。

我主要`InternalsVisibleToAttribute`用于授予内部成员访问测试类的权限，并且会*尽量*避免出于非测试目的这样做——但有时它可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:39:06.040

使用纯 C# 概念这是不可能的。你是两个独立的程序集，尽可能地独立，就.Net而言，两者之间没有关系。

您可以通过签名或验证来做一些事情，因此很难在没有另一个程序集的情况下使用一个程序集，但您不能做一些事情来防止类/成员的可见性。

# objective-c - 劫持或阻止 UITableView didSelectRowAtIndexPath

> ID：11124097
> 
> 赞同：1
> 
> 时间：2012-06-20T16:35:39.380
> 
> 标签：objective-c, ios, uitableview, didselectrowatindexpath

我试图找到一种方法来防止或劫持`didSelectRowAtIndexPath:`。当用户在 tableview 中选择一行时，我想首先抛出一个 alertview 说“如果你这样做，数据将从 CD 中删除。” “如果您继续，我们会将数据同步到服务器”。

用户单击是继续。我想防止在同步完成之前选择新单元格。如果同步失败，我想弹出一个警报，告诉用户它失败了，然后停止`didSelectRowAtIndexPath:`触发，从而防止他们触摸的新单元格被选中。

如果同步成功，我想`didSelectRowAtIndexPath:`被调用。

最好的方法是劫持`willSelectRowAtIndexPath:`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:05:10.237

实现委托方法

`-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath`

并返回`nil`相关的 indexPath

这将停止选择相关单元格。

从文档中`UITableViewDelegate`

> 返回值 确认或更改选定行的索引路径对象。如果要选择另一个单元格，则返回 indexPath 以外的 NSIndexPath 对象。如果您不想选择该行，则返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:48:36.877

知道了。

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableView *roomTable = tableView;
Rooms *room = [roomArray objectAtIndex:indexPath.row];
NSString *message = [NSString stringWithFormat:@"Switching rooms will remove data for current thing. Need to download %@ room", room.name];
[UIActionSheet actionSheetWithTitle:message 
                            message:@"Message" 
             destructiveButtonTitle:@"Continue" 
                            buttons:[NSArray arrayWithObjects:nil]
                         showInView:self.view 
                          onDismiss:^(int buttonIndex)
 {
     NSLog(@"User selected to change the room");
     [roomTable selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionNone];
 }
                           onCancel:^
 {
     NSLog(@"Change Room Cancelled");
 }];

return nil;   
} 
```

# c++ - VS2010中编译耗时太长

> ID：11124110
> 
> 赞同：1
> 
> 时间：2012-06-20T16:36:13.257
> 
> 标签：c++, visual-studio-2010

> **可能重复：**
> [您使用了哪些策略来缩短大型项目的构建时间？](https://stackoverflow.com/questions/1073384/what-strategies-have-you-used-to-improve-build-times-on-large-projects)

我用 C++ 完成了大约 800 行编码，cpp 文件有一些 7-8 个类也没有对象，但是程序需要 7 秒才能构建。这是我的第一个 C++ 程序，所以我想知道它是否正常？还是太过分了？此外，如果 C++ 方面的专家可以分享一些对我这样的初学者有帮助的见解，那将是非常棒的。如果它有任何帮助，我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:24:33.490

编译 C++ 的时间可能比我使用过的任何其他语言的变化都大。

可以产生重大影响的一件事是您包含的标题。即使*您的*代码可能只有 800 行，但如果其中一些是`#include`s，编译器可能很容易查看数千行（仅供参考，`#include <windows.h>`本身通常意味着编译器将查看超过 10,000 行）。

我们中的一些人最近在 C++ 聊天室中对一段特别讨厌的代码进行了一些测试，该代码有很多递归模板。尽管它只有大约 30 行代码，但取决于您设置的参数，很容易获得一个小时或更长时间的编译时间——而且对于大多数编译器（包括 VC++10 和 11/2012）来说，这很容易彻底使编译器崩溃。

如果代码在标头和/或模板（尤其是递归模板之类的东西）方面几乎没有或根本没有，那么编译 7.5 秒似乎相当多。只是为了比较，我做了一个快速测试，编译了一个接近相同大小（926 行）的程序。这花了0.3秒。我的机器已经有 5 年或 6 年的历史了，所以它的速度也没有达到最先进的水平*。*同时，我应该补充一点，对于编译那么少量的代码，CPU 速度可能不是主要的决定因素。我希望 SSD 比更快的 CPU 有更大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:21:58.970

C++ 是一种复杂的语言，与许多其他语言相比，它需要更多的时间来编译。最重要的是，Visual Studio 本身在构建 Intellisense 数据库等方面有额外的开销。在实际编译之后还需要考虑一个链接阶段。

当 Visual Studio 创建一个新项目时，它通常会创建一个包含大量 Windows 头文件的预编译头文件。这将为您的 800 行源代码添加数千行。

7 秒似乎有点慢，但并不过分。

# android - Android：从应用程序类启动新活动

> ID：11124119
> 
> 赞同：7
> 
> 时间：2012-06-20T16:36:47.417
> 
> 标签：android, android-intent, event-handling, listener, android-mediaplayer

我有一个从应用程序类播放音频的 android 应用程序。我的应用程序类中有一个 PhoneStateListener，它在有电话时暂停音频。

我想在通话结束时开始一项特定的活动，但我做不到。这是我的代码：

```
public void getPhoneState(){

TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
PhoneStateListener phoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (state == TelephonyManager.CALL_STATE_RINGING) {
            if(audio.isPlaying())
               audioPlayer.pause();

        } 
            else if(state == TelephonyManager.CALL_STATE_IDLE) {

                audio.start();
                Intent missintent= new Intent(context,AudioActivity.class);
                missintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(missintent);

        } 
            else if(state == TelephonyManager.CALL_STATE_OFFHOOK) {

            if(audio.isPlaying())
            audioPlayer.pause();

        }
        super.onCallStateChanged(state, incomingNumber);

    }
};

if(mgr != null) {
    mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
}
}

public boolean handleAudio(String source, int id) {

phoneState();
//Code for Playing Audio
.....
.....
} 
```

如果有人能告诉我如何以正确的方式开始活动，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T05:09:26.950

好的，所以我知道您已经找到了另一个解决方案，但是我正在努力解决它并找到了对我有用的东西。我没有调用意图，而是使用了 pendingIntent、意图过滤器和待处理的帖子。这是其他有此问题的其他人的代码片段。

```
Context context = MyApplication.this.getApplicationContext();
Intent errorActivity = new Intent("com.error.activity");//this has to match your intent filter
errorActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 22, errorActivity, 0);
try {
    pendingIntent.send();
    } 
catch (CanceledException e) {
        // TODO Auto-generated catch block
    e.printStackTrace();
    } 
```

然后在你的清单中确保你为捕捉活动设置了意图过滤器

```
<activity
    android:name="UncaughtErrorDialogActivity"
    android:theme="@android:style/Theme.Dialog" >
    <intent-filter>
        <action android:name="com.error.activity" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

# python - 我应该如何在不同的类之间共享一个变量？

> ID：11124121
> 
> 赞同：0
> 
> 时间：2012-06-20T16:36:54.393
> 
> 标签：python, global-variables

我有一个测试套件功能`runTests.py`，我从这个文件运行测试：

```
def suite():
    suite.addTest(makeSuite(Class1))
    suite.addTest(makeSuite(Class2))
    ...
    suite.addTest(makeSuite(ClassN))

if __name__ == '__main__':
    # grab argument from the command line and
    # initiate myVar1 and myVar2 here before running the suite
    # run the suite here 
```

我想要的是从命令行读取参数并在内部启动它们，就在我在语句`runTests.py`中运行套件之前。`if`这些变量也将在`Class1`,`Class2`等内部使用。

如果在`runTests.py`套件定义之前我有以下内容，这是否正确

```
myVar1 = 'defaultValue'
myVar2 = 'defaultValue' 
```

然后在`if`语句中从命令行获取参数并初始化`myVar1`and `myVar2`。所以在其他类中，例如`Class1`，我会像这样导入它：

```
from runTests import myVar1
from runTests import myVar2 
```

基本上，我想要的是从命令行读取一些参数，并能够在其他类中使用这些值。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:45:31.270

```
import sys
params = sys.argv 
```

sys.argv 会给你一个列表

```
$ python myproram.py var1 var2 var3 
```

sys.argv[0] => myprogram.py

sys.argv[1] => var1

sys.argv[2] => var2

ETC

您可以在任何课程中访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:42:28.463

```
from os import sys

class addc:
    def __init__(self , no1 , no2):
        self.no1 = no1
        self.no2 = no2
    def addition(self):
        total = self.no1 + self.no2
        return total

if len (sys.argv) !=3:
    print "no u cant go forwrd"
    print "agument is less"
    sys.exit()

obj_initial = addc(2 , 3 ) 
ans1 = obj_initial.addition() 
print " the total of internla argumnet is %i"%ans1

cmnd_argu1 = int(sys.argv[1]) 
cmnd_argv2 = int (sys.argv[2])

obj_cmnd_argu = addc(cmnd_argu1 , cmnd_argv2)
ans2_cmnd_argu = obj_cmnd_argu.addition()
print " the total of internla argumnet is %i" % int(ans2_cmnd_argu) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:15:33.007

我最终[从有效的stackoverflow](https://stackoverflow.com/questions/6011371/python-how-can-i-use-variable-from-main-file-in-module?rq=1)中使用了它。基本上，将我的共享变量放入一个新文件中`myVar1`，然后为变量赋值，如下所示：`myVar2``myfile.py``import myfile``runTests.py`

```
myfile.myVar1 = sys.argv[1] 
```

在其他需要使用的文件中`myVar1`，`import myfile`使用如下变量：

```
myfile.myVar1 
```

# jquery - jQuery使用循环显示总li项目

> ID：11124122
> 
> 赞同：4
> 
> 时间：2012-06-20T16:36:57.473
> 
> 标签：jquery

基本上我想显示包含 sub ul 的每个列表项的总列表项，请参阅我的代码：http: [//jsfiddle.net/NykJe/](http://jsfiddle.net/NykJe/)

```
<ul>
    <li>linkA</li>
    <li>linkB<span class="total"></span>
        <ul>
            <li>link2</li>
            <li>link2</li>
            <li>link2</li>
        </ul>
    </li>
    <li>linkC</li>
    <li>linkD<span class="total"></span>
        <ul>
            <li>link2</li>
            <li>link2</li>
            <li>link2</li>
            <li>link2</li>
            <li>link2</li>
        </ul>
    </li>
</ul>

var total = $('ul li ul li').size();
$('.total').append('<div>'+ total +'</div>'); 
```

我想使用循环来计算每个特定的 sub ul li 项目计数，结果将是 LinkB 3 和 LinkD 5 目前它显示 LinkB 8，LinkD 8

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:39:30.133

```
$('ul li ul').each(function(){
  $(this).prev('.total').append('<div>'+ $(this).find('li').length +'</div>');
}); 
```

**[JSFiddle](http://jsfiddle.net/NykJe/10/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:41:46.337

尝试这样的事情。它只是直接在标签中写出计数`span`，而不是添加新元素（如果您只想插入数字，则不需要额外的标签）。

```
$('.total').each(function()
{
    $(this).html($(this).parent().find('li').length);                    
}); 
```

[工作示例](http://jsfiddle.net/kfmCX/)。

# javascript - 全部藏起来 除了一个依赖于下拉选择？

> ID：11124126
> 
> 赞同：0
> 
> 时间：2012-06-20T16:37:29.877
> 
> 标签：javascript, onchange

在我的在线商店中，我有一个下拉列表，其中列出了许多产品。当下拉列表更改时，我想显示价格。

所有价格都以 HTML 格式写入单个 < div > 标记中，id 为“ProductPrice[x]”。

如何隐藏所有 ProductPrice[x] < div > ，但显示使用 javascript 选择的那个？

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:41:06.987

考虑将 jQuery 用于此类任务。使用 jQuery 变得简单：

```
 var selectedID = ... // retrieve selected id number
 $("[id^=ProductPrice]").hide();
 $("#ProductPrice[" + selectedId + "]").show(); 
```

更优雅的 jQuery 解决方案：

```
 var selectedID = ... // retrieve selected id number
 var selectedDiv = $("#ProductPrice[" + selectedId + "]");
 $("[id^=ProductPrice]").not(selectedDiv).hide();
 selectedDiv.show(); 
```

# php - 使用用户（和商店）坐标查找最近的商店

> ID：11124127
> 
> 赞同：0
> 
> 时间：2012-06-20T16:37:32.847
> 
> 标签：php, mongodb, database

我有一个带有坐标的商店位置的 mongo 集合。我正在创建一个应用程序，它将获取用户坐标并找到离他们最近的商店。什么是对商店进行排序以获得结果的最有效方法。那我怎么知道商店离我有多少英里？

我正在使用标准的 PHP mongo 驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:41:01.793

您可以使用 MongoDB GeoSpatial 查询来执行此查询。此功能记录在这里： [http ://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:43:47.730

我可以回答您问题的最后一部分“我如何才能获得商店距离多少英里？”，您可以使用 Google Maps API 找出当前位置和最近商店之间的行驶距离。至于第一点，我需要更多信息，我在评论中已经提到过。

# paypal - PayPal 链式付款错误 520009

> ID：11124129
> 
> 赞同：3
> 
> 时间：2012-06-20T16:37:46.480
> 
> 标签：paypal, error-code, paypal-adaptive-payments, chained

我正在尝试设置一个链式支付应用程序，并获得了该应用程序的批准。我希望像平行支付一样，链式支付可以让用户有或没有注册的贝宝账户。但是对于未注册的电子邮件帐户，api 返回错误代码 520009，说明帐户“email@domain.com”受到限制。我确实看到以下链接有同样的问题。

[https://stackoverflow.com/a/10262241/903978](https://stackoverflow.com/a/10262241/903978)

尽管在他们的开发文档中说任何拥有电子邮件的人都可以获得付款/通知（需要经过验证的帐户的应用程序所有者除外），但它会引发错误。我已经张贴了一张到 paypal/mts 的票，但还没有收到他们的消息。

我的应用案例是，1\. 用户获得报酬，例如 100 美元。他们是链中的主要接收者。2\. 应用程序（次要接收人）从这笔款项中分得一杯羹。说2美元。

任何人都知道链式付款是否需要主要以及其他收件人拥有有效的贝宝帐户而不仅仅是电子邮件？还是通话中的某些内容允许主要收件人仅使用电子邮件地址？

（我知道应用程序所有者需要一个注册的贝宝帐户）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:41:27.970

Paypal/mts 确认他们的文档不正确。链式付款需要确认的贝宝帐户，而不仅仅是电子邮件 ID。他们说他们会更新文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T13:17:09.967

我也可以确认这一点，Paypal Adaptive Payments with Chained Delayed Payments 确实需要对二级接收方和主要接收方进行验证，但对于“已确认”和“已验证”似乎有些混淆。当按下 PayPal 时，我们发现标准不同（或者他们在 Eco Market 告诉我们）并且用户有时必须确认他们的电子邮件地址（只需点击他们收到的验证电子邮件），但有时也必须走一步进一步验证他们的帐户（通过银行帐户确认等其他步骤）。他们告诉我们有时会因国家/地区而异，但出于安全原因并没有告诉我们更多关于他们如何做到这一点的信息（不是很有帮助）。

我们处理这个问题的方法是捕捉错误，作为一个市场，我们会自动联系客户/卖家，通知他们由于卖家账户未经过验证，订单无法处理。

更进一步，您还可以通过使用完全相同的 API 从他们那里收取小额付款（可以使用 API 退还）来验证卖家（再次在市场模型中）帐户，这将允许您验证卖家进行确保他们在注册之前拥有经过验证的帐户。

希望如果其他人对此有任何经验以及他们如何处理它，我很想听听它会有所帮助。

杰森丹特生态市场

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T13:31:07.143

根据我的经验，在自适应支付（尤其是链式支付）中，您需要这种环境：

a) 应用程序持有者/开发者必须有一个注册和验证的贝宝商业帐户（高级帐户也可以，但不是个人帐户）

b）如果金额不超过限制，收件人必须有一个企业帐户，如果没有验证也可以，但如果金额超过限制，您将在链中遇到问题。

c) 发件人必须有一个贝宝账户，一个简单的个人账户就可以了。

有时（很少）由于发件人电子邮件的限制而导致一次付款失败。我看到的最常见的情况是发件人使用一封电子邮件进行了预先批准，然后在预先批准付款之前，他/她更改了他/她的贝宝帐户中的电子邮件。愚蠢但贝宝无法控制这种环境。

希望这对你有帮助。

干杯，菲尔。意大利热那亚

# google-app-engine - 当我重置 GoogleAppEngine 时，我的所有信息都会被删除。我怎么不能避免这种情况？

> ID：11124133
> 
> 赞同：0
> 
> 时间：2012-06-20T16:38:07.747
> 
> 标签：google-app-engine, google-cloud-datastore

我对数据存储有一些问题。当我重新启动 googleappengine 时，我的所有数据都将被删除。

我不知道为什么重启 AppEngine 时我的数据会被删除？

我不能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:09:34.217

如果您在 Windows 上使用 1.6.6 SDK，我们会注意到该问题，并将在即将发布的版本中修复该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T02:49:24.953

它应该在 1.6.6 中修复。@Erikson Murrugarra：请更新您的 SDK。

# .net - 数据注释比较

> ID：11124137
> 
> 赞同：1
> 
> 时间：2012-06-20T16:38:22.880
> 
> 标签：.net, asp.net-mvc

以下三个注解有什么区别：

```
[ScaffoldColumn(false)]
[Display(Name = "")]
[Display(AutoGenerateField=false)] 
```

[这里](https://stackoverflow.com/questions/7439272/why-is-there-a-displayautogeneratefield-false-and-a-hiddeninputdisplayvalu)和[那里](https://stackoverflow.com/questions/7521204/difference-between-scaffoldcolumn-false-and-display-autogeneratefield-f)都有相关的 SO 问题，但我相信没有一个涵盖所有三个问题。我还看到一个 SO 帖子声称[AutoGenerateField=false 什么都不](https://stackoverflow.com/questions/5189773/html-editorformodel-and-hiding-element-from-edit)做。如果是这样，那它是为了什么？至于其他两个注释 - ScaffoldColumn(false) 和 Display(Name="") - 它们是否等效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:11:12.193

1.  `ScaffoldColumn(false)`*：仅*当您使用`@Html.DisplayForModel()`或`@Html.EditorForModel`（分别）时隐藏显示或编辑器字段，并且*仅* **在您使用默认显示和编辑器模板**时才隐藏。如果您覆盖内置模板，则需要在模板中重新添加对该属性的支持。
2.  `Display(Name="")`：影响显示为 、 、 和 的`DisplayForModel`标签`Label`的`LabelForModel`文本`EditorForModel`。在这种情况下，显示名称被设置为一个空字符串，因此将按字面意思作为标签输出。这不会阻止生成标签。
3.  `Display(AutoGenerateField=false)`：正如您所建议的，任何默认模板或帮助程序似乎都无法识别。

不，1和2*不*一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:19:43.543

**当用 ScaffoldColumn(false) 标记时**

```
public class Hate
{
    [ScaffoldColumn(false)]
    public string What { get; set; }

    public string Why { get; set; }
}

@model StrippingHtml.Models.Hate
@{
  ViewBag.Title = "What & Why You Hate";
}
<h2>
  What & Why You Hate</h2>
@using (Html.BeginForm("Save", "Hate"))
{
  <div>
    @Html.EditorForModel()
  </div>
} 
```

![在此处输入图像描述](../Images/1122c40e5041af05ab599216f54bd514.png)

**当标记为 Display(Name="")**

```
public class Hate
{
    [Display(Name="")]
    public string What { get; set; }

    public string Why { get; set; }
} 
```

![在此处输入图像描述](../Images/607bf6aecd55992b1eac94eb2fa1d8fb.png)

# jquery - 参数列表后缺少）？jQuery

> ID：11124139
> 
> 赞同：3
> 
> 时间：2012-06-20T16:38:34.097
> 
> 标签：jquery, select, apostrophe

`#courseelements`使用下面的代码，我可以在我的表 ( )中插入一个新行。

```
$("#addbutton").click(function() {
      $('#courseelements > tbody:last').append('<tr><td>Helloworld</td></tr>');
    }); 
```

但是，我想`Helloworld`用一个`<select>`元素替换 。所以是这样的：

```
$("#addbutton").click(function() {
      $('#courseelements > tbody:last').append('<tr><td>

        <select class='plan_id'>
            <option value='1'>Description</option>
            <option value='2'>Description</option>
            <option value='3'>Description</option>  
        </select>

      </td></tr>');
    }); 
```

但这让我在第一个撇号 ' 上的参数列表后“缺少 )`<select class='`

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:40:26.847

你忘了转义引号：

```
$("#addbutton").click(function() {
  $('#courseelements > tbody:last').append('<tr><td>

    <select class=\'plan_id\'>
        <option value=\'1\'>Description</option>
        <option value=\'2\'>Description</option>
        <option value=\'3\'>Description</option>  
    </select>

  </td></tr>');
}); 
```

作为替代方案，您可以将整个附加字符串包装在双引号中而不是单引号中：

```
$("#addbutton").click(function() {
  $('#courseelements > tbody:last').append("<tr><td>

    <select class='plan_id'>
        <option value='1'>Description</option>
        <option value='2'>Description</option>
        <option value='3'>Description</option>  
    </select>

  </td></tr>");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:39:44.303

```
var select=$("<select class='plan_id'></select>")
    .append("<option value='1'>Description</option>")
    .append("<option value='2'>Description</option>")
    .append("<option value='3'>Description</option>");

 $('#courseelements > tbody')
.append($("<tr><tr>"))
.append($("<td></td>")
.append(select)); 
```

[**演示。**](http://jsfiddle.net/heera/TzZTA/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T16:40:34.247

您需要为 HTML 中的引号使用不同的引号类型，而不是为 HTML 周围的引号使用不同的引号类型：

```
$("#addbutton").click(function() {
      $('#courseelements > tbody:last').append("<tr><td>

        <select class='plan_id'>
            <option value='1'>Description</option>
            <option value='2'>Description</option>
            <option value='3'>Description</option>  
        </select>

      </td></tr>");
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T16:41:10.757

您必须使用不同的引号。

```
select class="plan_id"> 
```

此处为 double，因为整个字符串由 single 分隔。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T16:43:15.027

用字符串内的双引号更改单引号-

```
<select class="plan_id">
            <option value="1">Description</option>
            <option value="2">Description</option>
            <option value="3">Description</option>  
        </select> 
```

`\`或者用like来逃避它们——

```
<select class=\'plan_id\'>...... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T14:59:01.147

如果你想通过 PHP echo 调用 $('').append，像这样：

```
$info= "<div style=\'font-size:9px;\'>
    <img src=\'./img/filtro.png\'>Some tips
</div>";
echo "<script type='text/javascript'>
    $('#divTips').append('$info'); 
</script>"; 
```

确保在之前替换所有断线，如下所示：

```
$info= preg_replace( '/\s+/', ' ', $info); 
```

# javascript - 正则表达式在 / 和 / 之间的 URL 中获取最后一个单词

> ID：11124151
> 
> 赞同：3
> 
> 时间：2012-06-20T16:39:30.767
> 
> 标签：javascript

如何获取 / 和 / 之间的 URL 中的最后一个单词？

例如：

[http://mywebsite.com/extractMe/test](http://mywebsite.com/extractMe/test)

[http://mywebsite.com/extractMe](http://mywebsite.com/extractMe)

[http://mywebsite.com/settings/extractMe/test](http://mywebsite.com/settings/extractMe/test)

[http://mywebsite.com/settings/extractMe](http://mywebsite.com/settings/extractMe)

在这里，我想`extractMe`从 URL 中获取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:42:21.890

如果 URL 是一致的，为什么不直接使用：

```
// Option 1
var url = "http://mywebsite.com/extractMe/test";
var extractedText = url.split("/")[3];

​// Option 2
// If when a trailing slash is present you want to return "test", use this code
var url = "http://mywebsite.com/extractMe/test/";
var urlAry = url.split("/");
var extractedText = urlAry[urlAry.length - 2];

​// Option 3
// If when a trailing slash is present you want to return "extractMe", use this:
var url = "http://mywebsite.com/extractMe/test/";
var urlAry = url.split("/");
var positionModifier = (url.charAt(url.length-1) == "/") ? 3 : 2;    
var extractedText = urlAry[urlAry.length - positionModifier]; 
```

这是一个工作小提琴：http: [//jsfiddle.net/JamesHill/Arj9B/](http://jsfiddle.net/JamesHill/Arj9B/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:02:10.957

它最终可以使用/或不使用它:)

```
var url = "http://mywebsite.com/extractMe/test/";    
var m = url.match(/\/([^\/]+)[\/]?$/);

console.log(m[1]); 
```

输出：测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:47:06.840

这既考虑了 URL `http://mywebsite.com/extractMe/test`，也包括`http://mywebsite.com/extractMe/`

```
function processUrl(url)
{
    var tk = url.split('/');
    var n = tk.length;
    return tk[n-2];
} 
```

**已编辑。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T16:55:40.447

正则表达式方式：

```
var str = "http://example.com/extractMe/test";
var match = str.match(/\/([^\/]+)\/[^\/]+$/);

if (match) {
    console.log(match[1]);
} 
```

# php - PHP 的最大执行时间

> ID：11124155
> 
> 赞同：1
> 
> 时间：2012-06-20T16:39:49.187
> 
> 标签：php

我正在从网站下载图像，但出现错误提示`"Maximum execution time of 30 seconds exceeded"`，图像下载已停止。我尝试添加以下我认为可以解决问题的代码行：

```
ini_set('max_execution_time', 0); //zero means forever I think, I also tried 200 or 300 seconds 
```

它没有给我错误，但执行停止了（我的意思是图像停止下载）。

如何使执行时间延长 300 秒？有什么解决办法吗？

提前致谢！

编辑：

```
function save_image($inPath,$outPath)
    { 
$in=    fopen($inPath, "rb");
$out=   fopen($outPath, "wb");
while ($chunk = fread($in,8192))
{
    fwrite($out, $chunk, 8192);
}
fclose($in);
fclose($out);
    } 
```

和一个方法调用：

```
foreach($li->find('a[class=thumbnail]') as $img) 
                    {
                        foreach($img->find('img') as $e)
                        {   
                            $image++;           
                           echo "<img src=\"" . $e->src . "\"/>" . "<br>";
                           save_image($e->src, 'thumbs/image'. $image .'.JPG');

                        }

                    } 
```

那是我正在使用的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:42:34.383

```
set_time_limit(0); 
```

确保它位于文档顶部，紧随其后`<?php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:01:26.990

或者，您可以更改`max_execution_time`php.ini 文件中的 ，使其符合您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T16:42:50.783

您应该改用`set_time_limit(0)`（[php.net](http://de.php.net/manual/en/function.set-time-limit.php)）。

# google-apps-script - 设置参数查询对象的问题

> ID：11124167
> 
> 赞同：0
> 
> 时间：2012-06-20T16:40:30.127
> 
> 标签：google-apps-script

为什么`app.getElementById('myTextBox').setValue('default')`工作`showDialog()`但没有工作`respondToSubmit(e)`？

```
function showDialog() {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();

  var textBox = app.createTextBox();
  textBox.setName('myTextBox').setId('myTextBox');
  app.getElementById('myTextBox').setValue('default');

  var button = app.createButton(Modify');
  panel.add(textBox);
  panel.add(button);

  var clickHandler = app.createServerClickHandler("respondToSubmit");
  button.addClickHandler(clickHandler);
  clickHandler.addCallbackElement(panel);

  app.add(panel);
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
}

function respondToSubmit(e) {
  var app = UiApp.getActiveApplication();
  app.getElementById('myTextBox').setText('Modifed');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:31:36.310

添加

```
return app; 
```

在您的 respondToSubmit 函数结束时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:46:47.607

在一种情况下您使用 setText()，在另一种情况下您使用 setValue()……您没有注意到吗？

此外，当您在创建不需要使用的元素的同一函数中时，`getElementById()`您可以只使用`textBox.setValue()`，因为 textBox 是保存元素的变量 -`getElementById`仅用于从另一个函数中调用元素。

# excel - ROW() 函数在 SUM() 和 SUMPRODUCT() 中的行为不同

> ID：11124173
> 
> 赞同：9
> 
> 时间：2012-06-20T16:40:51.907
> 
> 标签：excel, excel-2007, excel-formula, excel-2003

**问题定义：**

在单元格中输入任意数字`A1`。现在在第一行的任何地方尝试以下公式。

```
=SUM(INDIRECT("A"&ROW())) 
```

和

```
=SUMPRODUCT(INDIRECT("A"&ROW())) 
```

第一个公式计算，第二个给出#VALUE 错误。这是由于`ROW()`函数内部的行为不同造成的`SUMPRODUCT()`。

在第一个公式中，`ROW()`返回`1`。在第二个公式中，行返回`{1}`（一个长度的数组），即使该公式尚未作为 CSE 公式输入。

为什么会这样？

**背景**

我需要评估类型的公式

```
=SUMPRODUCT(INDIRECT(*range formed by concatenation and using ROW()*)>1) 
```

这是一个错误。作为此问题的解决方法，我现在`ROW()`在另一个单元格中计算（显然在同一行中）并将其连接到我的`INDIRECT()`. 或者，我也尝试将其封装在 sum 函数中，例如`SUM(ROW())`，并且效果也很好。

如果有人可以解释（或指向可以解释的资源）为什么在没有输入 CSE的情况下`ROW()`返回内部数组，我将不胜感激。`SUMPRODUCT()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T21:18:58.917

Interesting question. There are subtle issues here which I haven't seen documented.

It seems `INDIRECT("A"&ROW())` returns an array consisting of one element which is a reference to a cell - not the value in that cell. Many functions cannot resolve this type of data correctly but a few functions such as N and T can "dereference" the array and return the underlying value.

Take this case where there are two elements in the array:

```
=SUM(N(INDIRECT("A"&ROW(1:2)))) 
```

This returns A1+A2 when array entered but it only returns A1 when entered normally. However changing ROW(1:2) to {1;2} in this formula returns the correct result when entered normally. The equivalent SUMPRODUCT formula returns A1+A2 whether array entered or not.

This may be related to how the arguments are registered in the function. According to [http://msdn.microsoft.com/en-us/library/bb687900.aspx](http://msdn.microsoft.com/en-us/library/bb687900.aspx) there are essentially two methods to register function arguments to handle Excel data types:

Type R/U: "Values, arrays, and range references."

Type P/Q: "Excel converts single-cell references to simple values and multi-cell references to arrays when preparing these arguments."

SUM arguments seem to conform with type R/U while SUMPRODUCT arguments behave like type P/Q. Array-entering the SUM formula above forces the range reference argument in ROW to be evaluated as an array whereas this happens automatically with SUMPRODUCT.

**Update**

After a little more investigation, here's further evidence that might support this theory. Based on the link in the comment, the formula =SUM((A1,A2)) gives the same values as:

```
?executeexcel4macro("CALL(""Xlcall32"",""Excel4"",""2JRJR"",4,,1,(!R1C1,!R2C1))") 
```

Registering the last argument as type P by changing `2JRJR` to `2JRJP` gives an error in this case but does allow for single area ranges like `!R1C1:!R2C1`. On the other hand, changing the 4 (xlfsum) to 228 (xlfsumproduct) only allows single area references either way it's called just like SUMPRODUCT.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:06:55.227

作为`ROW()`返回一个数组，用于`INDEX`获取第一个元素。

你的例子然后变成：`=SUMPRODUCT(INDIRECT("A"&INDEX(ROW(),1)))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:39:16.773

我不认为 ROW() 在这里表现不同，它在两种情况下都返回一个数组。我假设 SUM 和 SUMPRODUCT 以不同的方式处理该数组 - 不知道为什么。

Many functions or combinations of them return arrays - you don't need CTRL+SHIFT+ENTER to make that happen, you only need CSE in many cases to process the arrays created.

I would just use INDEX in place of INDIRECT (which also benefits you by avoiding a volatile function), i.e.

`=SUMPRODUCT(INDEX(A:A,ROW()))`

....expanding that to your range this formula will count the number of values > 1 in a range in column A where x defines the start row and y the end row

`=COUNTIF(INDEX(A:A,x):INDEX(A:A,y),">1")`

x and y can be calculated by formulas

you can use SUMPRODUCT or COUNTIFS in a similar way if there are more conditions to add

# ruby-on-rails-3 - Rails：更改显示的错误列名称

> ID：11124174
> 
> 赞同：1
> 
> 时间：2012-06-20T16:40:52.363
> 
> 标签：ruby-on-rails-3, validation, error-handling

我已尝试关注此处找到的帖子：[Rails 3 Change Error Message](https://stackoverflow.com/questions/6473894/rails-3-change-error-message)和此处：[ActiveRecord validates... custom field name](https://stackoverflow.com/questions/2521383/activerecord-validates-custom-field-name)但两者都没有为我工作，我的数据库字段名称仍然显示。

例如我得到：名称太短（最少为 1 个字符）

任何想法/是否有解决此问题的首选方法？谢谢。

这是我在我的语言环境中使用第一篇链接文章的内容：

```
en:
  activerecord:
    models:
      account:        "Account"
    attributes:
      order:
        name:         "Business Name" 
```

这是我的帐户模型的一部分：

```
validates_presence_of :name
validates_length_of :name, :minimum => 1, :maximum => 100

attr_accessible :name,  :admin_attributes, :image 
```

在帐户上尝试保存失败后，这是从我的角度显示错误的代码：

```
<% if @account.errors.any? %>
      <div class="errorExplanation">
        <h2>Errors encountered with your account information:</h2>
        <ul>
          <% @account.errors.full_messages.each do |m| %>
            <li><%= m %></li>
          <% end %>
        </ul>
      </div>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:49:11.047

我知道这已经很老了，但我在最终[转向 rails guides](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)之前发现了这个问题，这让我的代码正常工作。

看起来您想更改 Account 的属性名称，但使用的是 Order：

```
en:
  activerecord:
    models:
      account:        "Account"
    attributes:
      order: # Right here, this should be account
        name:         "Business Name" 
```

我不相信你需要模型： account: "Account" 。这是为了告诉 Rails 如果你想给模型起不同的名字，但你不这样做，所以你可以删除它。然后，Attributes 将模型用于您要更改的内容，然后是属性。

```
en:
  activerecord:
    attributes:
      account:
        name: "Business name" 
```

我认为可能让您失望的是，它几乎看起来属性属于模型，但实际上它在另一条线上。希望这会有所帮助，因为它是迟到的！

# javascript - 如何为具有不同高度的多个实例设置 CKEditor？

> ID：11124182
> 
> 赞同：12
> 
> 时间：2012-06-20T16:41:05.390
> 
> 标签：javascript, height, ckeditor, multiple-instances

我想拥有多个基于相同配置设置但高度不同的 CKEditor 实例。我尝试使用默认高度设置*配置*，设置第一个实例，然后覆盖高度并设置第二个实例：

```
var config = {
    .....
    height:'400'
};

$('#editor1').ckeditor(config);
config.height = '100';
$('#editor2').ckeditor(config); 
```

...但是我得到了两个 CKEditor 实例，它们的高度都为 100px。

我也试过这个：

```
CKEDITOR.replace('editor2',{
    height: '100'
}); 
```

.. 我收到实例已经存在的错误消息。我搜索了一下，发现有人在类似情况下得到建议，你必须在替换（）之前销毁（）实例，但这对于设置不同的**初始**高度来说似乎太复杂了。

最后，我设置了两个不同的配置并复制了 toolbar_Full 属性：

```
var config1 = {
    height:'400',
    startupOutlineBlocks:true,
    scayt_autoStartup:true,
    toolbar_Full:[
        { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
        { name: 'editing', items : [ 'Find','Replace','-' ] },
        { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
        { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
        '/',
        { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
        { name: 'insert', items : [ 'Image','HorizontalRule' ] },
        { name: 'styles', items : [ 'Styles','Format','Font','FontSize' ] },
        { name: 'colors', items : [ 'TextColor','BGColor' ] },
        { name: 'tools', items : [ 'Maximize', 'ShowBlocks' ] },
        { name: 'document', items : [ 'Source' ] }
    ]
}

var config2 = {
    height:'100',
    startupOutlineBlocks:true,
    scayt_autoStartup:true
};
config2.toolbar_Full = config1.toolbar_Full;

$('#editor1').ckeditor(config1);
$('#editor2').ckeditor(config2); 
```

有没有更好的办法？有什么我想念的吗？有[这个问题](https://stackoverflow.com/questions/7658325/multiple-ckeditors-with-different-height)，但他们发布的内容还不够有用，而且[这个非常相似的问题](https://stackoverflow.com/questions/9408707/changing-ckeditor-dimension-for-different-instances-not-all-instances)还没有得到回答。谢谢！

**更新：**

这似乎是 CKEditor 的计时/配置处理怪癖——稍后读取和应用配置（我猜是在设置编辑器的 DOM 框架之后），而不是在第一次实例化编辑器时。

因此，在使用 .ckeditor() 实例化第一个编辑器*后立即*对配置设置所做的任何更改*实际上*会在接下来的几毫秒内由编辑器应用。我认为这不是正常行为，也不是合乎逻辑的。

例如，您可以`config.height`通过使用 setTimeout() 延迟第二个 CKEditor 实例来获得我的第一个示例中的预期行为（在第一个编辑器被实例化后覆盖该属性）。Firefox 需要约 100 毫秒，IE 需要 1 毫秒。古怪和错误。

CKEditor 应该在每个编辑器第一次实例化时读取配置设置。目前，每个人都必须解决这个怪癖。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T17:49:16.913

使用自定义高度初始化两个编辑器的最简单方法是：

```
$('#editor1').ckeditor({ height: 100 });
$('#editor2').ckeditor({ height: 200 }); 
```

或者没有 jQuery：

```
CKEDITOR.replace('editor1', { height: 100 });
CKEDITOR.replace('editor2', { height: 200 }); 
```

AFAIK 无法即时更改编辑器的高度。

如果这些方法对你不起作用，那么你做错了。

**更新：**

回答您的评论 - 您的问题实际上不是关于 CKEditor，而是关于共享一个只有两个不同属性的对象。所以你可以这样尝试：

```
var configShared = {
        startupOutlineBlocks:true,
        scayt_autoStartup:true,
        // etc.
    },
    config1 = CKEDITOR.tools.prototypedCopy(configShared),
    config2 = CKEDITOR.tools.prototypedCopy(configShared);
config1.height = 100;
config2.height = 200;

CKEDITOR.replace('editor1', config1);
CKEDITOR.replace('editor2', config2); 
```

`CKEDITOR.tools.prototypedCopy`是一种创建新对象的工具，其原型设置为传递的对象。因此，它们共享所有属性，但您稍后会覆盖这些属性。

**更新 2：**

这是问题中“更新”部分的更新:)。

CKEditor 的时间或错误或任何东西都没有怪癖 - 它是纯 JavaScript 以及 BOM/DOM 和浏览器的工作方式以及一些实用方法。

首先，90% 的 BOM/DOM 是同步的，但也有一些不是。因此，整个编辑器必须具有异步性质。这就是为什么它提供了这么多事件。

第二件事——在 JS 中对象是通过引用传递的，因为我们希望 CKEditor 快速初始化，我们应该避免不必要的任务。其中之一是复制配置对象（没有充分的理由）。因此，为了节省一些毫秒（并且因为异步插件也加载了）CKEditor 仅通过将其原型设置为包含默认选项的对象来扩展传递的配置对象。

总结 - 我知道这可能看起来像一个错误，但这就是 JS/BOM/DOM 库的工作方式。我很确定许多其他库的异步方法也受到相同问题的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T10:36:45.407

添加这个，您将在单个页面中获得两个 CKeditor 的不同工具栏

```
<script>

    CKEDITOR.on('instanceCreated', function (event) {
        var editor = event.editor,
            element = editor.element;

        if (element.is('h1', 'h2', 'h3') || element.getAttribute('id') == 'editorTitle') {
            editor.on('configLoaded', function () {
                // Remove unnecessary plugins to make the editor simpler.
                editor.config.removePlugins = 'find,flash,' +
                    'forms,iframe,image,newpage,removeformat,' +
                    'smiley,specialchar,stylescombo,templates';

                // Rearrange the layout of the toolbar.
                editor.config.toolbarGroups = [
                    { name: 'editing', groups: ['basicstyles'] },
                    { name: 'undo' },
                    //{ name: 'clipboard', groups: ['selection', 'clipboard'] },
                  { name: 'styles' },
                    { name: 'colors' },
                    { name: 'tools' }
                  //  { name: 'about' }
                ];
            });
        }
    });

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T18:31:35.020

Reinmar 的上述解决方案对我有用，但是我决定再提供 1 个我在此之前使用的解决方案。

这真的很简单，你只需要知道 ckeditor 为每个具有几乎相同 id 的实例创建内容 div 元素，唯一的区别是增量值。因此，如果您有 2,3,4.. 实例，则唯一的区别将是序数。代码在这里：

```
 CKEDITOR.on('instanceReady', function(){
    $('#cke_1_contents').css('height','200px');
}); 
```

此事件将为您拥有的每个实例激活，因此如果您想为所有实例设置高度，您可以创建全局变量并像 x in 一样使用它`#cke_"+x+"contents`，每次激活事件时将 x 增加 1，检查行中的哪个实例简单的 if 然后设置高度。

```
 var x=1;
CKEDITOR.on('instanceReady', function(){
    if(x==1) h='200px';
    else if(x==2)h='400px';
    else if(x==3)h='700px';
    $('#cke_'+x+'_contents').css('height',h);
    x++;
}); 
```

这不是最佳解决方案，但它正在工作，问题是您实际上看到内容 div 调整大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-02T20:23:24.497

2019 年 6 月 25 日更新。

请使用此代码添加多个 CKEditor 实例，每个实例具有自定义高度。有史以来最简单的方法。

```
 <textarea name="editor1" style="height:30px;" class="ckeditor"></textarea>
   <script type="text/javascript">
      CKEDITOR.replace( 'editor1' );
      CKEDITOR.add            
   </script>

<textarea name="editor2" style="height:40px;" class="ckeditor"></textarea>
   <script type="text/javascript">
      CKEDITOR.replace( 'editor2' );
      CKEDITOR.add            
   </script>

<textarea name="editor3" style="height:50px;" class="ckeditor"></textarea>
   <script type="text/javascript">
      CKEDITOR.replace( 'editor3' );
      CKEDITOR.add            
   </script>

<textarea name="editor4" style="height:60px;" class="ckeditor"></textarea>
   <script type="text/javascript">
      CKEDITOR.replace( 'editor4' );
      CKEDITOR.add            
   </script>

<textarea name="editor5" style="height:70px;" class="ckeditor"></textarea>
   <script type="text/javascript">
      CKEDITOR.replace( 'editor5' );
      CKEDITOR.add            
   </script> 
```

参考：[这里](https://ckeditor.com/old/forums/CKEditor-3.x/Multiple-CK-Editors)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T11:24:56.703

如果您将 ckeditor.js 也多次添加到页面，则可能会导致该问题。脚本代码必须在每一页中定义一次。 `<script type="text/javascript" src="Fck342/ckeditor.js"></script>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-22T06:50:08.597

只需使用`CKEDITOR.replaceAll();`

# jquery - 不正确的 jQuery UI 滑块句柄，从 2 直接前进到限制

> ID：11124187
> 
> 赞同：1
> 
> 时间：2012-06-20T16:41:12.643
> 
> 标签：jquery, jquery-ui, uislider, jquery-ui-slider

我的 jQuery UI 句柄在加载页面时正确显示数字 14，但如果我第二次设置它，它会将滑块句柄一直移动到最后。这是示例：

[http://jsfiddle.net/rRrgV/](http://jsfiddle.net/rRrgV/)

我肯定做了一些愚蠢的事情，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:48:26.243

改变：

```
var v = input.val(); 
```

到：

```
var v = parseInt(input.val(),10); 
```

您的`v`变量是一个字符串，因此您需要将其转换为整数。

**[jsFiddle 示例](http://jsfiddle.net/j08691/rRrgV/1/)**。

# html - 显示有序列表项

> ID：11124190
> 
> 赞同：1
> 
> 时间：2012-06-20T16:41:19.060
> 
> 标签：html, css

我有：http: [//jsfiddle.net/Gkz4v/9/](http://jsfiddle.net/Gkz4v/9/)

```
.pagination li a {
    float: left;
      width: 6px;
      height: 6px;
      line-height: 6px;
      margin-right: 3px;
      text-indent: -9999px;
      background-color: #4b4b4b;
} 
```

在上面的类中，如果我删除“float:left”行，结果的显示与该行存在时不同。请在我上面的小提琴中尝试一下。

我想要具有“float：left”效果的不同行上的项目

你能解释一下这是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:44:35.530

您描述的效果是元素的大小？你正在尝试做这样的事情：http: [//jsfiddle.net/Gkz4v/10/](http://jsfiddle.net/Gkz4v/10/)

有必要添加一个`display: block`in `<a>`。这是必要的，因为`<a>`带有`display: inline`内联元素的元素不遵守大小规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:47:48.537

标签默认为内联`a`元素，不服从宽度和高度。`float`设置元素是使其服从宽度的一种方法（这就是您注意到效果的原因），但在这种情况下，您只需将 更改`display`为`block`以获得所需的外观。

```
.pagination
{
    padding: 3px 0 3px 3px;
}  

.pagination li a
{
    display: block; /* change here */
    width: 6px;
    height: 6px;
    line-height: 6px;
    margin-bottom: 3px; /* changed the margin too, so it's nice and spaced out */
    text-indent: -9999px;
    background-color: #4b4b4b;
}

.pagination li.on a
{
    background-color: #1f84e3;
}

ol { list-style: none; } /* JSFiddle adds this automatically I think, but in the general case, this will remove the dots in the list */ 
```

[工作示例](http://jsfiddle.net/PFhXs/)。

# php - 获取远程服务器上数组的字符串值

> ID：11124191
> 
> 赞同：1
> 
> 时间：2012-06-20T16:41:22.550
> 
> 标签：php, xml, arrays, xml-rpc

我正在尝试在远程服务器上查找数组的内容。我目前只能发回字符串（由于 xmlrpc 的 PHP 实现的限制）。通常，我只会使用`var_dump()`，但这会返回 void。我试过使用`var_export`，但我得到 XML 错误，即使我将结果转换为字符串。

如何获取数组的字符串表示形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:41:47.113

使用[`serialize()`](http://php.net/serialize)：

```
$string = serialize( $array); 
```

然后使用[`unserialize()`](http://php.net/unserialize)将其返回到数组中：

```
$array = unserialize( $string); 
```

如果您对 JSON 格式的字符串感兴趣，也可以使用[`json_encode()`](http://php.net/json_encode)/ 。[`json_decode()`](http://php.net/json_decode)

```
$string = json_encode( $array);
$array = json_decode( $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:42:38.560

您可以使用 PHP 序列化、json_encode ...。这些是编码对象的替代方法。

# java - 从jni到java的float返回收到错误的结果

> ID：11124200
> 
> 赞同：2
> 
> 时间：2012-06-20T16:41:45.447
> 
> 标签：java, floating-point, java-native-interface

我有一个函数可以将浮点数从 JNI 本机返回到 Java。这应该是一个简单的调用，但我得到了奇怪的结果。

在我的测试用例中，我将值 1.61863e+010 返回到 java 中。代码很简单：

```
cout << result << endl;  cout.flush(); // get 1.61863e+010
return (jfloat) result; 
```

（澄清一下，如果 cout.precision(6)，我得到 16186300000.000000）

但是我的 Java 代码正在接收 1.61863004E10。当我使用

```
DecimalFormat formatter = new DecimalFormat("###,###.######");
System.out.println(formatter.format(result)); 
```

我得到 16,186,300,416。

这个 416 是从哪里来的？我认为 jfloat 和 float 都是 32 位 IEEE 浮点数，所以不应该有任何精度损失。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:44:43.887

You're using a `float`, which only has 7 decimal digits of precision (23 bits of mantissa, with the implicit bit for normalized numbers). Therefore you should regard anything *after* that as effectively noise. Your value isn't actually changing - it's just that the displayed representation differs between Java and your C++ implementation.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T16:46:17.767

它的 C++ 程序很可能四舍五入到 7 位有效数字，即`float`. 如果您将 Java 中的值四舍五入到 7 位，您将给出相同的数字。当您使用 DecimalFormat 时，默认情况下它将打印最接近的整数。

```
System.out.println("(float) " + 16186300000.0 + 
                   " is actually " + new BigDecimal((float) 16186300000.0)); 
```

印刷

```
(float) 1.61863E10 is actually 16186300416 
```

# javascript - IPad 无法在带有 javascript UI 可拖动页面的页面上滚动

> ID：11124205
> 
> 赞同：0
> 
> 时间：2012-06-20T16:41:56.570
> 
> 标签：javascript, iscroll4

好的，所以我有一个使用 javascript UI 可拖动鼠标选项的网站，但是当有人从他们的 iphone 或 ipad 访问该页面时，UI 可拖动脚本不起作用？有什么简单的修复方法吗？我试图为它找到类似 iscroll 的东西，但不确定我是否朝着正确的方向前进。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:44:31.743

通过此页面找到答案 [https://github.com/furf/jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch)

# sql-server-2000 - SQL Server - 如何选择在最后一行带有单词“Quit”之后显示的带有单词“Rehired”的第一行

> ID：11124208
> 
> 赞同：0
> 
> 时间：2012-06-20T16:42:05.307
> 
> 标签：sql-server-2000

```
Date..............Comment1............................Comment2
20041206.....Address change from/to:........616 Barry Road Apt
20050314.....Rehired on Mar 14/05............Rehired on Mar 14/05
20051117.....Terminated on Nov17/05.......Shortage of Work
20060131.....Address change from/to:........616 Barry Road Apt
20060410.....Rehired on Apr 10/06   ............Pay Rate change    
20060419.....Vac. pay owing: from..............changed by 
20060531.....Terminated on May31/06........Quit
20070208.....Address change from/to:........11 Bettley Court
20080921.....Rehired on Sep 21/08............Pay Rate change    <== this row
20080925.....Vac. pay owing:.....................from   
20090215.....Pay Rate change...................0.00
20090712.....Pay Rate change...................0.000 
```

我想从指示的记录中得到 Date (20080921) 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:54:28.490

就像是

```
SELECT TOP 1 *
FROM   YourTable
WHERE  Date > (SELECT TOP 1 Date
               FROM   YourTable
               WHERE  ( Comment1 LIKE '%Quit%'
                         OR Comment2 LIKE '%Quit%' )
               ORDER  BY Date DESC)
       AND ( Comment1 LIKE '%Rehired%'
              OR Comment2 LIKE '%Rehired%' )
ORDER  BY Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:56:07.353

日期格式可能很棘手，但请尝试这样。

```
declare @LastDate datetime
set @LastDate='2008/09/21'

select date,comment1,comment2 from your table 
where cast(date as datetime)>=@LastDate 
order by date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:54:44.057

有点粗糙，但是：

```
SELECT t2.DATE
FROM TABLE t1 INNER JOIN
     TABLE t2 on t1.Date < t2.Date LEFT OUTER JOIN
     TABLE t3 on t1.Date < t3.Date AND t3.Date < t2.Date AND t3.Comment1 LIKE 'Rehired%' LEFT OUTER JOIN
     TABLE t4 on t4.Date > t1.Date and t4.Comment2 = 'Quit'
WHERE t1.Comment2 = 'Quit'
AND t2.Comment1 like 'Rehired%'
AND t3.Date = null
AND t4.Date = null 
```

t1 是您的离职记录，t2 是您的重新雇用记录。t3 确保在 t1 和 t2 之间没有其他 rehired 发生，t4 确保在 t1 之后没有其他退出发生。因此，t2 是最后一次离职后最先重新雇用的。

# javascript - 来自 javascript 的 Firefox 13 iframe 打印问题

> ID：11124211
> 
> 赞同：0
> 
> 时间：2012-06-20T16:42:16.357
> 
> 标签：javascript, firefox, iframe

无法在 FF 13 上打印。没有 javascript 错误，只是什么都不做。有什么建议吗？

javascript:

```
$(document).ready(function() {
    function print_app(){
        $('#content')[0].focus();
        $('#content')[0].contentWindow.print();
    }
    $('#print').click( function(){
        print_app();
    });
}); 
```

HTML：

```
<div id="print">PRINT</div>
<iframe id="content" name="content" src="pto.pdf" 
style="width: 100%; height: 745px;"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:12:50.287

最好的方法是在 iframe 中放置一个打印函数并从父级调用它

框架：

```
 function printThis() {
    window.print();
    } 
```

家长：

```
 document."iframeid".printThis(); 
```

# wpf - 外发光效果到边框

> ID：11124212
> 
> 赞同：29
> 
> 时间：2012-06-20T16:42:17.490
> 
> 标签：wpf, border, glow, bitmapeffect

如何为边框提供外发光效果？

```
<Grid Width="200" Height="200">
    <Grid.Background>
        <RadialGradientBrush Center="0.5,0.5" GradientOrigin="0.5,0.5" RadiusX="0.8" RadiusY="0.8">
            <RadialGradientBrush.GradientStops>
                <GradientStop Offset="0" Color="#FF123B5F" />
                <GradientStop Offset="1" Color="#FF001F31" />
            </RadialGradientBrush.GradientStops>
        </RadialGradientBrush>
    </Grid.Background>
    <Border Width="180" Height="180" Margin="10" Background="Transparent"
            BorderBrush="White" BorderThickness="1">
        <Border.BitmapEffect>
            <OuterGlowBitmapEffect GlowColor="White" GlowSize="3" Opacity="1" />
        </Border.BitmapEffect>
    </Border>
</Grid> 
```

我已经尝试过了，但它不起作用

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-20T16:51:30.283

`BitmapEffects`.NET 4.0 不再支持。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms743435.aspx)

> 重要事项 在 .NET Framework 4 或更高版本中，BitmapEffect 类已过时。如果您尝试使用 BitmapEffect 类，您将得到一个过时的异常。BitmapEffect 类的非过时替代品是 Effect 类。在大多数情况下，Effect 类的速度要快得多。

这不是一回事，但您可以尝试使用`DropShadowEffect`接近`ShadowDepth`0 的 a 。

*例子*

```
<Border Width="180" Height="180" Margin="10" Background="Transparent"
        BorderBrush="White" BorderThickness="2" Opacity="1.0">
    <Border.Effect>
        <DropShadowEffect ShadowDepth="0"
                          Color="White"
                          Opacity="1"
                          BlurRadius="5"/>
    </Border.Effect>
</Border> 
```

`BitmapEffects`你有的和`DropShadowEffect`上面的比较。`DropShadowEffect`向右。

![在此处输入图像描述](../Images/b1fe124d4f0510295fc431446ae60c68.png)

# .net - IIF 声明 LogiXML

> ID：11124213
> 
> 赞同：0
> 
> 时间：2012-06-20T16:42:19.900
> 
> 标签：.net, vbscript, iif-function

我在尝试执行以下操作时遇到问题。我正在尝试在标题中加入 iif 语句。这是在标签上评估的当前行：

**=round(@Data.rp_TATStatAtBenchmark~/@Data.rp_TATStatCount~ * 100) + "%"**

当@Data.rp_TATStatCount = 0 和@Data.rp_TATStatAtBenchmark = 0 时，我已将其更改为以下以处理错误（由于某种原因，报告显示???当第二个值为0而不是仅显示“0 %"。无论如何，这就是我要写的：

**=IIf((@Data.rp_TATStatAtBenchmark~ = "0" OR @Data.rp_TATStatCount~ = "0"),"0%", round(@Data.rp_TATStatAtBenchmark~/@Data.rp_TATStatCount~ * 100) + "%" )**

但它不工作。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:08:06.370

如果 @Data.rp_TATStatCount~ 值为 0，您看到“？？？”结果的原因 是因为除以零是一个没有意义的数学表达式（“未定义”）。这将始终返回为 undefined '???' 而不是数字——因此结果永远不会是 0。由于标记变量被简单地替换，因此即使您使用 iif() 语句，仍会检查表达式的有效性。

如果要创建除以零的异常，则还需要提供计算以检查何时 rp_TATStatCount = 0，并将其替换为非零整数，或使用不同的列名。最好的方法可能是创建第二个计算列来检查零（您的 iif() 语句），然后使用这个新创建的列来执行您的 round() 函数。

这是一个使用现有列名的静态数据层内的快速示例：

```
<DataLayer Type="Static" ID="dlStatic">
 <StaticDataRow rp_TATStatAtBenchmark="0" rp_TATStatCount="0" />
   <CalculatedColumn Formula="iif(@Data.rp_TATStatCount~=0, 1, @Data.rpTATStatCount~)" ID="StatCount2" />
   <CalculatedColumn Formula="iif(@Data.rp_TATStatAtBenchmark~ = &quot;0&quot; OR @Data.rp_TATStatCount~ = &quot;0&quot;, &quot;0%&quot;, round(@Data.rp_TATStatAtBenchmark~ / @Data.StatCount2~ * 100) + &quot;%&quot;)" ID="pctCol" />
</DataLayer> 
```

# spring - Spring Roo、Mvn 和 Eclipse——理解实体管理器

> ID：11124214
> 
> 赞同：2
> 
> 时间：2012-06-20T16:42:21.707
> 
> 标签：spring, maven-2

因此，我已经遇到了一段时间，并且看到了与该主题相关的其他问题/答案，但我觉得我还不明白发生了什么。

我正在使用 Spring Roo 1.1.15、Eclipse 3.6.0 和 Maven 2.2.1。

我发现，如果我成功运行了测试（从 Eclipse 中运行），然后对 RooEntity 类对象进行任何修改，那么任何/所有以 Roo 为中心的测试都将在下次运行时失败，如下所示：

```
Entity manager has not been injected (is the Spring Aspects JAR configured as an AJC/AJDT aspects library?) 
```

这将一直持续到我执行以下操作：

1.  在 Eclipse 的项目菜单中启用“自动构建”
2.  翻转到终端窗口并在项目根问题处：

    `mvn -o clean package`

3.  一旦 mvn 完成，然后切换回 Eclipse 并刷新项目
4.  让 Eclipse 刷新然后重新构建

此时我可以运行测试套件，它会报告准确的信息。（测试通过或失败取决于实际结果，而不是抱怨实体经理。）

我还没有时间将该项目升级到最新版本的 Roo，我承认这可能是正确的“修复”，但我想知道是否有其他人看到过这种行为，并且可以解释在重建过程中发生的事情会导致经理要“消失”？如果是这样，或者您已经找到了一种允许 Eclipse 独立于终端解决方法而成功运行的方法，那么反馈会很棒。

一如既往地感谢。

# sql-server - 安排服务代理自动接收消息

> ID：11124228
> 
> 赞同：4
> 
> 时间：2012-06-20T16:43:10.267
> 
> 标签：sql-server, service-broker

我是 Sql Server Service Broker 的新手并正在尝试它。

我能够从一个数据库发送消息并在另一个数据库（同一个 SQL 服务器）中接收这些消息，并且我将这些消息插入到接收数据库中的一个表中。

到目前为止一切正常，但是每次我从源数据库发送消息时，我都必须转到目标数据库并手动运行 RECEIVE 查询以从接收队列中获取消息并插入表中。

我想在消息到达后立即自动从接收队列接收消息（或者按计划，比如每 10 分钟一次）并将它们插入到我的目标表中，而无需我手动执行。

一种选择是创建一个 SP 并安排它每 10 分钟运行一次。我不确定这是否是推荐的方式，或者是否有任何其他更好的方式来收听接收队列并在消息到达后立即自动检索消息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:18:03.947

您正在寻找的是所谓的代理激活（特别是内部激活）。实质上，您可以将存储过程“附加”到服务代理队列，当消息出现在队列中时将调用该队列。[在BOL](http://msdn.microsoft.com/en-us/library/cc281517%28v=sql.105%29.aspx)中阅读所有相关信息。

# java - 选中复选框时如何删除列表项？

> ID：11124234
> 
> 赞同：0
> 
> 时间：2012-06-20T16:43:21.687
> 
> 标签：java, android

在我的项目中有一个包含文本视图和复选框的列表视图。这是我的列表活动类：

```
package com.pack.custom;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class DemolistActivity extends ListActivity {
    /** Called when the activity is first created. */
    public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    // Create an array of Strings, that will be put to our ListActivity
    ArrayAdapter<Model> adapter = new MyArrayAdapter(this,
    getModel());
    setListAdapter(adapter);
    }
    private List<Model> getModel() {
    List<Model> list = new ArrayList<Model>();
    list.add(get("Bangladesh"));
    list.add(get("India"));
    list.add(get("China"));
    list.add(get("Japan"));
    list.add(get("Australia"));
    list.add(get("Denmark"));
    list.add(get("Germany"));
    list.add(get("Indonesia"));
    // Initially select one of the items
    list.get(1).setSelected(true);
    return list;
    }
    private Model get(String s) {
    return new Model(s);
    }
} 
```

这是 myarrayadapter 类：

```
package com.pack.custom;

import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.ImageView;
import android.widget.TextView;

public class MyArrayAdapter extends ArrayAdapter<Model> {
    private final List<Model> list;
    private final Activity context;

    public MyArrayAdapter(Activity context, List<Model> list) {
        super(context, R.layout.rowbuttonlayout, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.rowbuttonlayout, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
            viewHolder.checkbox
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) viewHolder.checkbox
                                    .getTag();
                        element.setSelected(buttonView.isChecked());
                        }
                    });
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    }
} 
```

现在我想当我选择复选框然后删除这个特定的列表项。我该怎么做？请帮助

![在此处输入图像描述](../Images/37868a6556781dfa73ba33f6c0d59859.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:48:50.740

试试这个代码，让我知道会发生什么......

```
viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
 @Override
  public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
     if(isChecked)
      {
        if(list.getCount() > position)
        {
        list.remove(position);
        this.notifyDataSetChanged();
        }
      }
     else
     {
       Log.e("CheckBox", isChecked+"");
     }
   }
 }); 
```

# c# - 如何将颜色转换为代码，反之亦然

> ID：11124237
> 
> 赞同：2
> 
> 时间：2012-06-20T16:43:40.837
> 
> 标签：c#, colors, color-picker

我有来自程序的“FF7B2900”等颜色。我需要能够将这种颜色代码转换为颜色并返回。

因此，例如将此代码转换为颜色，我正在这样做：

```
 string colorcode = "FF7B2900";
            int argb = Int32.Parse(colorcode, NumberStyles.HexNumber);
            Color clr = Color.FromArgb(argb); 
```

问题是当我尝试将颜色转换为字符串时，因为我需要使用颜色选择器选择颜色并获取（字符串）相同类型的代码以及 alpha“FF7B2900”而不是简单的 html 代码“#7B2900”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:57:56.863

您可以通过执行来获得完全相同的十六进制字符串`clr.ToArgb().ToString("x").ToUpper()`。clr.ToArgb() 获取您的 int 并调用 ToString("x") 告诉它输出 int 的十六进制字符串表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:46:19.790

开头的 FF 指的是 255 的 alpha。您始终可以删除开头的 #，并以 FF 为前缀...这将为您提供相同的颜色。

# jquery - Javascript 库的概述（或列表/索引），并说明其用途

> ID：11124240
> 
> 赞同：0
> 
> 时间：2012-06-20T16:43:56.590
> 
> 标签：jquery, dojo, javascript-framework, mocha.js

我正在尝试更多地了解可用的 javascript 库以及每个库的用途。即，它们都是用于操作 HTML 还是其中一些是为其他任务（如数据库访问）而设计的。

*用例*：如果我想做 X，我怎么知道要查看哪个库？其中 X =

*   特定的效果（如使窗口出现的过渡效果）
*   特殊控件（如富文本编辑器）
*   单元测试
*   离线存储数据

我在 Wikipedia 上看到了该列表，但没有对每个列表进行描述。这些例子有点偶然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:12.873

我发现的最好的例子是：

*   [http://javascriptlibraries.com/](http://javascriptlibraries.com/)
*   [http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:41:51.437

Npm 是 Node.js 包管理器和包索引。

[https://npmjs.org/](https://npmjs.org/)

Jam 是一个包管理器和包索引。Jam 是 npm 包的扩展，在大多数情况下，Jam 包也可以与 npm 一起安装。

[http://jamjs.org/](http://jamjs.org/)

对于 Node.js 之外的 Javascript 库，有些人建议搜索 github.com 或 google.com。

# vb.net - How to troubleshoot "Object cannot be cast from DBNull to other types."

> ID：11124242
> 
> 赞同：-2
> 
> 时间：2012-06-20T16:44:02.053
> 
> 标签：vb.net, visual-studio-2008, dataset

how can I troubleshoot "Object cannot be cast from DBNull to other types."? I am using a combobox, to retrieve the price and discount price of the service, If I select an item in combobox3 once, error will not occur, but if I select a item again in combobox3, "Object cannot be cast from DBNull to other types." will occur..

here is my code

```
Private Sub ComboBox3_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox3.SelectedIndexChanged

    Dim ds As New DataSet

    ds = getPrice(arr(ComboBox2.SelectedIndex), ComboBox3.Text)

    If ds.Tables("getPrice").Rows.Count > 0 Then
        For i As Integer = 0 To ds.Tables("getPrice").Rows.Count - 1

            TextBox1.Text = Convert.ToDecimal(ds.Tables("getPrice").Rows(i).Item(0))
            TextBox2.Text = Convert.ToDecimal(ds.Tables("getPrice").Rows(i).Item(1))

        Next
    End If

End Sub 
```

this is my query

```
 Public Function getPrice(ByVal serviceId As String, ByVal breedSize As String)

    If breedSize = "Small Breed" Then
        sqlStr = "Select price_small_breed, discount_small_breed From tblServicePrice Where service_id = " + serviceId + ""
    ElseIf breedSize = "Medium Breed" Then
        sqlStr = "Select price_medium_breed, discount_medium_breed From tblServicePrice Where service_id = " + serviceId + ""
    ElseIf breedSize = "Big Breed" Then
        sqlStr = "Select price_big_breed, discount_big_breed From tblServicePrice Where service_id = " + serviceId + ""
    End If

    ds.Clear()
    da = New OleDbDataAdapter(sqlStr, con.ConnectionString)
    da.Fill(ds, "getPrice")

    Return ds

End Function 
```

here is the image

![enter image description here](../Images/7beaa57921040c7770767578cfb6adf2.png)

what could be the caused of having this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:01:51.060

```
TextBox1.Text = If(ds.Tables("getPrice").Rows(i).Item(0) Is DBNull.Value, "", Convert.ToDecimal(ds.Tables("getPrice").Rows(i).Item(0)).ToString()) 
TextBox2.Text = If(ds.Tables("getPrice").Rows(i).Item(0) Is DBNull.Value, "", Convert.ToDecimal(ds.Tables("getPrice").Rows(i).Item(1)).ToString()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:32:32.800

如果您针对数据库运行在 GetPrice 中执行的特定查询语句，您将看到至少有一行在您正在读取的序号位置具有空值。

serviceID（注意大写）可能不是您假设的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:23:42.707

如果数据库中有 NULL 值，会发生什么？如果可以接受使用某个值，例如零，您可以修改查询，如

```
sqlStr = "Select COALESCE(price_small_breed, 0), COALESCE(discount_small_breed, 0) From tblServicePrice Where service_id = " & serviceId & "" 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-20T17:33:12.793

我的答案是这样的。我声明了新数据集，我没有使用代码顶部的数据集

```
Public Function getPrice(ByVal serviceId As String, ByVal breedSize As String) As DataSet

        Dim dsa As New DataSet

        If breedSize = "Small Breed" Then
            sqlStr = "Select price_small_breed, discount_small_breed From tblServicePrice Where service_id = " + serviceId + ""
        ElseIf breedSize = "Medium Breed" Then
            sqlStr = "Select price_medium_breed, discount_medium_breed From tblServicePrice Where service_id = " + serviceId + ""
        ElseIf breedSize = "Big Breed" Then
            sqlStr = "Select price_big_breed, discount_big_breed From tblServicePrice Where service_id = " + serviceId + ""
        End If

        dsa.Clear()
        da = New OleDbDataAdapter(sqlStr, con.ConnectionString)
        da.Fill(dsa, "getPrice")

        Return dsa

    End Function 
```

这是我以前的代码..

```
Public Function getPrice(ByVal serviceId As String, ByVal breedSize As String)

    If breedSize = "Small Breed" Then
        sqlStr = "Select price_small_breed, discount_small_breed From tblServicePrice Where service_id = " + serviceId + ""
    ElseIf breedSize = "Medium Breed" Then
        sqlStr = "Select price_medium_breed, discount_medium_breed From tblServicePrice Where service_id = " + serviceId + ""
    ElseIf breedSize = "Big Breed" Then
        sqlStr = "Select price_big_breed, discount_big_breed From tblServicePrice Where service_id = " + serviceId + ""
    End If

    ds.Clear()
    da = New OleDbDataAdapter(sqlStr, con.ConnectionString)
    da.Fill(ds, "getPrice")

    Return ds

End Function 
```

# perl - Perl：使用哈希值通过引用调用子例程的问题

> ID：11124244
> 
> 赞同：5
> 
> 时间：2012-06-20T16:44:11.503
> 
> 标签：perl, hash, reference, subroutine, callbyname

在 Perl 中，您可以通过引用（或名称）调用函数，如下所示：

```
 my $functionName = 'someFunction';
    &$functionName();

    #someFunction defined here:
    sub someFunction { print "Hello World!"; } 
```

我想做的是使用哈希值，如下所示：

```
 my %hash = (
        functionName => 'someFunction',
    );

    &$hash{functionName}();

    #someFunction defined here:
    sub someFunction { print "Hello World!"; } 
```

我得到的错误是全局符号“$hash”需要明确的包名。

我的问题是：有没有不使用中间变量的正确方法？
对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T16:47:48.803

这只是一个优先级问题，可以通过不省略花括号来解决。你可以使用

```
&{ $hash{functionName} }() 
```

或者使用替代语法：

```
$hash{functionName}->() 
```

在索引之间，`->`可以省略（但我这里没有省略）：

```
$hash{functionName}() 
```

参考：[延迟语法](http://www.perlmonks.org/?node_id=977408)

# junit - How to unit test aop(aspect class)

> ID：11124248
> 
> 赞同：1
> 
> 时间：2012-06-20T16:44:24.320
> 
> 标签：junit, aop, aspectj

How to unit test the following method using JUnit4??

```
public Object invoke(ProceedingJoinPoint joinPoint) throws Throwable {
    Object serviceObject = null;
    BaseServiceRequest baseServiceRequest = null;
    ServiceContext serviceContext = null;

    baseServiceRequest = (BaseServiceRequest) joinPoint.getArgs()[0];
    if (baseServiceRequest == null)
        ExceptionHandlerUtil.createExceptionType("SL","BaseServiceRequest cannot be empty", new Object[] {});

    serviceContext = baseServiceRequest.getServiceContext();
    ExceptionHandlerUtil.createExceptionType("SL","ServiceContext cannot be empty", new Object[] {});
    createServiceInvocationInterceptor(baseServiceRequ est,joinPoint);

    serviceObject = getServiceObject(serviceContext, joinPoint);
    serviceContext.getMethodInvocationEvent().setReturnValue(serviceObject);

    return serviceObject;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:48:31.223

我不知道这是否是您想知道的，因为问题有点不清楚，但是如果您想知道如何模拟生产方面用于单元测试的对象，您可以使用另一个方面 - 我们称之为元方面或测试方面 - 为了做到这一点。我已经在[How to mock an aspect](https://stackoverflow.com/questions/11825325/how-to-mock-an-aspect/11906391#11906391)下描述了一种方法。

# ruby-on-rails - Rails 3.2: Ruby date logic

> ID：11124250
> 
> 赞同：0
> 
> 时间：2012-06-20T16:44:31.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

I have a rails app where I need to check date(s)(dd/mm) from several models in my database and trigger a mailer 2 weeks before, 1 week before, and 1 day before each date. How could I write this logic in my app (rails 3.2)?

*Note - I plan on using a rake task to check whether and mails need to be sent out.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:10:05.323

您可以使用范围执行此操作：

```
class MyModel < ActiveRecord::Base
  scope :two_weeks_before, lambda{|the_date| where('my_date between ? and ?', 2.weeks.until(the_date), the_date)}
  scope :one_week_before, lambda{|the_date| where('my_date between ? and ?', 1.week.until(the_date), the_date)}
  scope :the_day_before, lambda{|the_date| where('my_date between ? and ?', 1.day.until(the_date), the_date)}
  scope :undelivered, where(:delivered => false)
end

# usage:
MyModel.two_weeks_before(Date.tomorrow).undelivered.all.each do |model|
  MyMailer.notification(model).deliver
  model.update_attribute(:delivered, true)
end 
```

日期范围获取日期在 2 周前的所有模型，您可以根据需要调整端点，obv。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:48:47.337

2 周前，将日期与此进行比较：

```
Model.where("my_date between ? and ?", Date.today - 15, Date.today - 14) 
```

1周，到这个：

```
Model.where("my_date between ? and ?", Date.today - 8, Date.today - 7) 
```

在您的控制台中尝试并查看结果。

# c# - SQL Like statement not return a wildcard output asp.net c#

> ID：11124257
> 
> 赞同：2
> 
> 时间：2012-06-20T16:44:51.413
> 
> 标签：c#, asp.net, sql

i have these sql statement to output job field based on user input.

```
 SELECT jf.name, j.jname, c.cname, cj.url
    FROM company_has_job cj
        INNER JOIN job j ON j.id = cj.job_id
        INNER JOIN company c ON c.id = cj.company_id
        INNER JOIN jobfield_has_job jhj ON jhj.job_id = j.id
        INNER JOIN jobfield jf ON jf.id = jhj.jobfield_id
    WHERE jf.name LIKE '%' + @InputJob + '%' 
```

for example when user input query "**Programmer**", the system will output all programmer job defined in the database.but the system does not show any result if i enter "**Program**" in the search box. This is my control parameter:

```
<SelectParameters>
    <asp:ControlParameter ControlID="TextBox4" Name="InputExpertise" 
        PropertyName="Text"/>
</SelectParameters> 
```

can you tell me where i did wrong? your help is much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:22:21.527

我不确定这是否只是一个错字，但不应该是

```
WHERE jf.name LIKE '''%' + @InputJob + '%''' 
```

请注意，我这样做是为了使代码最终以 . 结尾`LIKE '%Program%'`，而看起来它将以`LIKE %Program%`当前结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:15:16.647

还不能发表评论，但也许这会回答这个问题，您加入的任何列是否允许 NULL？内连接不会返回包含空值的结果。

考虑这个查询：

```
select wb.employee,wb.Dept from web_user wb
inner join Employee e on wb.Dept = e.Department
where wb.employee like '%Ted%' 
```

没有结果

但是这个：

```
select wb.employee,wb.Dept from web_user wb
left join Employee e on wb.Dept = e.Department
where wb.employee like '%Ted%' 
```

返回： 泰德 NULL

此外，它对调试很有帮助，在对数据库的实际调用中设置断点以获取它正在使用的 SQL 语句，然后将其粘贴到查询编辑器中。当查询不正常时，我已经多次这样做了。一旦您知道程序对 SQL 语句使用什么，这也可以帮助您找到问题。

# javascript - div 跟随滚动

> ID：11124266
> 
> 赞同：1
> 
> 时间：2012-06-20T16:45:11.333
> 
> 标签：javascript, jquery, html, css

我正在尝试构建一个跟随用户滚动的右框：

**CSS：**

```
 .clearfix:after {
            content: " ";
            display: block;
            font-size: 0;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        .wrapper {
            border: 1px solid black;
        }

        .column {
            float: left;
            border: 1px solid red;
        }

        .relative {
            position: relative;
            margin-top: 0px;
        } 
```

**HTML：**

```
<div class="wrapper clearfix">
    <div class="column">
        small or big text
    </div>
    <div class="column">
        <div class="dmap relative">a</div>
        <span>some other crazy stuff</span>
    </div>
</div> 
```

**Javascript：**

```
referencey = $(".dmap").offset().top;

$(window).scroll(function (event) {

    var y = $(this).scrollTop();

    if (y >= referencey) {
        $(".dmap").css("margin-top", y - referencey)
    } else {
        $(".dmap").css("margin-top", 0);
    }

}); 
```

代码工作得很好。列大小无关紧要，因为我所做的只是更改顶部边距，这意味着列和包装器总是获得新的大小。代码的缺点是用户滚动时会出现小跳。

避免滚动时小跳跃的另一种方法是不更改 margin-top ，而是将框的位置更改为 fixed after `y >= referencey`。该解决方案的缺点是相对于列大小的错误行为，因为当我将类更改为固定时，它不再占用右列内的空间，如果左列更小，则会出现一整套新错误.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:36:41.993

我想出了一个不能解决问题的解决方案，但可以解决它。我所做的是在用户停止滚动后滚动该框。不同的效果，但没有小跳跃（而且看起来也很酷）。

```
var scrolly = $(".dmap").offset().top;
var scroll = false;

$(window).scroll(function (event) {

    var y = $(this).scrollTop();

    if (scroll) {
        clearTimeout(scroll);
    }

    scroll = setTimeout(function () {
        $(".dmap").animate(
            { marginTop: (y >= scrolly ? y - scrolly : 0) },
            { queue: false, duration: 200 }
        );
    }, 100);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:57:37.107

一条简单的线；`position: fixed;` 这意味着该对象固定在页面上，因此在您滚动时它会跟随。

# django - Django-haystack（xapian）自动完成给出不完整的结果

> ID：11124268
> 
> 赞同：0
> 
> 时间：2012-06-20T16:45:17.367
> 
> 标签：django, django-haystack, xapian

我有一个以 xapian 作为后端运行 django-haystack 的 django 站点。我的自动完成功能正常工作，但它返回了奇怪的结果。从 searchqueryset 返回的结果是不完整的。

例如，我有以下数据...

['测试'，'测试 1'，'测试 2']

如果我输入“t”、“te”或“tes”，我将一无所获。但是，如果我输入“测试”，我会得到所有结果，正如预期的那样。

我有一个看起来像这样的东西......

```
results = SearchQuerySet().autocomplete(auto=q).values('auto') 
```

我的搜索索引看起来像这样......

```
class FacilityIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    created = DateTimeField(model_attr='created')
    auto = EdgeNgramField(model_attr='name')

    def get_model(self):
        return Facility

    def index_queryset(self):
        return self.get_model().objects.filter(created__lte=datetime.datetime.now()) 
```

任何提示表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:59:36.527

有点晚了，但您需要检查被索引的最小 ngram 大小。它很可能是 4 个字符，因此它不会匹配任何字符少于此的字符。虽然我不是 Xapian 用户，所以我不知道如何更改该后端的配置选项。

# entity-framework - Entity framework adds 2 milliseconds to a date attribute, why?

> ID：11124269
> 
> 赞同：1
> 
> 时间：2012-06-20T16:45:17.933
> 
> 标签：entity-framework

Why does Entity Framework add 2 milliseconds to a date attribute

```
foreach (var msg in msgs)
           {
               msg.Status = (int)StaticsParams.MessageStatus.Deleted;
               msg.LastUpdate = deletedDate;
               rep.Update(msg);
           }

           rep.UnitOfWork.SaveChanges(); 
```

# c# - 内存收集的 Linq 性能

> ID：11124273
> 
> 赞同：7
> 
> 时间：2012-06-20T16:45:26.660
> 
> 标签：c#, asp.net, performance, linq, .net-4.0

我有一个列表：集合用户，其中包含大约 100K+ 用户记录（所有用户对象都从数据库中完全加载，其中包含生物、名字、姓氏等字段）。此集合在应用程序启动时从数据库中获取并保存在内存中。

然后我有如下代码：

```
User cachedUser = users.FirstOrDefault(x => string.Equals(x.UserName, username,
StringComparison.CurrentCultureIgnoreCase)); 
```

我用来从这个集合中获取用户。但不知何故，我注意到这个操作非常慢。使用 Linq 查询大对象的内存集合时是否存在性能问题？每次我想获得用户时，我是否应该调用数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T17:03:37.703

我认为您可能需要根据您提供给我们的信息重新考虑您的架构。利用数据库，让它为您完成搜索工作。之后观察、测量并做出相应的改变。你可能会意识到你过早地优化了整个事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T16:55:01.763

与任何其他迭代技术（循环、在数组中搜索）一样，您的 LINQ 查询将访问每条记录，直到找到所请求的记录。在最坏的情况下，这意味着 10 万次比较。为了加快速度，您有以下选择：

1.  使用排序列表或字典：二进制搜索要快得多。使用 ORDER BY 从数据库中获取数据时对数据进行排序
2.  使用数据集。它就像一个提供更快搜索的内存数据库
3.  将数据留在数据库中并设置适当的索引以便更快地访问

由于以下原因，我建议使用数据库：

*   存储 100k 条记录是浪费内存，您可能从不使用这些记录
*   更改数据后，您将不得不刷新缓存，这可能相当复杂
*   Web 应用程序是多线程的（每个请求都在自己的线程中运行）。如果您更改数据，则必须与锁同步。
*   数据库可以缓存经常调用的数据
*   你必须写更少的代码
*   您有一个可扩展性更好的无状态 Web 应用程序（网络农场）
*   您的应用程序可能还有其他数据，您无法将所有内容存储在内存中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T17:03:09.507

如果您想优化您的响应时间，您可以创建一个`Dictionary<T,U>`并在以下范围内搜索用户：

```
 Dictionary<string, User> usersDictionary = new <Dictionary<string, User>(StringComparer.CurrentCultureIgnoreCase);

    // After querying the users from the DB add them to the dictionary             
    usersDictionary.Add(user.UserName, user);

    // Then when you need to retrieve a user
    User retrieveUser = null; 
    usersDictionary.TryGetValue(username, out retrieveUser); 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:03:36.103

您注意到的搜索性能的不同是因为数据库使用索引来定位数据库中的字符串，但是您在内存中简单地搜索所有记录，直到找到一条。此外，数据库为字符串保留一个哈希数并搜索这个数字哈希，速度要快得多，而不是实际进行字符串比较。

make也是一个索引，`Dictionary<>`但是添加数据有延迟，当数据开始增长时，因为当它添加一些数据时，每次都是搜索将它放置在正确的索引点的位置。

此外，数据库缓存结果，许多数据库还缓存索引并创建额外的统计信息，有助于快速定位您要查找的内容。

最好让数据库进行搜索，除非您可以为额外的自定义案例更快地进行搜索。

# vb.net - Trying to make DataSet read from Xml file to add values to ComboBox

> ID：11124274
> 
> 赞同：1
> 
> 时间：2012-06-20T16:45:27.087
> 
> 标签：vb.net

I am kinda newbie on Visual basic 2010, and wanted to create a chat loader, and i wanted it to read values from a xml table.

This is the code i have used in Vb.

```
 ChatXml.ReadXmlSchema(My.Application.Info.DirectoryPath & "/../Release/chat.xml")
 ChatXml.ReadXml(My.Application.Info.DirectoryPath & "/../Release/chat.xml")
 ComboBox1.DataSource = ChatXml.Tables
 ComboBox1.DisplayMember = "chat" 
```

And the xml file.

```
<?xml version="1.0" encoding="utf-8"?>
 <chat>
    <gn>Help</gn>
    <gid>1913106</gid>
    <xc>2336</xc>
    <cn>1500337760</cn>
    <g8>g8</g8>
 </chat> 
```

That i want it to do, is to read the value "gn", and add it to the ComboBox, i am not sure what is wrong, tried the "Google is your friend" and could not find something that worked.

The error i get is this.

```
Complex DataBinding accepts as a data source either an IList or an IListSource.
enter code here 
```

Not sure, but tried to add data to the Tables in DataSet, but seems i can't get it to work. Any help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:00:43.583

您的问题是您正在指示组合框显示聊天表中的所有行，而不是告诉它显示`gn`聊天表中的所有字段。你需要这样做：

```
ComboBox1.DataSource = ChatXml.Tables(0)
ComboBox1.DisplayMember = "gn" 
```

# shell - Counts of various elements in various files

> ID：11124279
> 
> 赞同：0
> 
> 时间：2012-06-20T16:45:52.907
> 
> 标签：shell, unix, sed, awk, grep

So I have about 1000 files that are multiple columns, but I'm only interested in some stats of two of those columns. If $4 was something like a star's spectral class (ie a unique value) and $5 in each of these files was a result, like seen, unseen, unknown, etc, is there a recommended way to grep or awk out the stats like so across the 1000 or so files so I get something like:

```
Type O, #verified, #not-verified, #property-j, ...
Type B, ...
Type A, ...
.
.
.
Type i, 
```

Where, in each file, you'd see something like:

```
$1, $2, $3, Spectral Type, Result
foo, foo, foo, A, verified
foo, foo, foo, G, verified
foo, foo, foo, A, unknown
foo, foo, foo, F, verified
foo, foo, foo, G, verified
foo, foo, foo, K, verified
foo, foo, foo, K, seen 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:22:22.917

```
perl -aF, -nle '{${$h{@F[3]}}{@F[4]}=1}END{while(($k,$v)=each%h){print"$k, @{[keys%$v]}";}}' files 
```

编辑

为什么这可以解决问题。

对于标志信息类型

```
perl --help 
```

算法

```
{..} END{..}    # first block is evaluated on each line, END block only once at the end 
```

@F[3]应该写成$F[3]，不同的是@F[3]是一个元素的数组，而$F[3]是元素

```
${h{$F[3]}}     # gets value or creates and return a new entry in the hash %h with key $F[3] third element of array @F
${..}{$F[4]}=1  # supposes that value in hash %h is type HASHREF and creates a new entry with key 
```

可以编写整个表达式（也许更容易），但这是我首先想到的第一个语法

```
$h{$F[3]}{$F[4]}=1 
```

结尾

```
while(($k,$v)=each%h)  # loop over entries of hash %h
"@{[..]}"   # is a trick to display array in a double quote expression
%$v         # dereferences HASHREF 
```

更接近问题的解决方案：

```
perl -lnaF'/\s*,\s*/' -e '{$h{$F[3]}{$F[4]}=1;}END{while(($k,$v)=each%h){print("Type $k, ",join(", ",map("#$_",keys%$v)));}}' 
```

注意：在这种情况下，打印后的括号是可选的，但为了提高可读性，在关闭花括号之前也要保留分号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:56:45.690

如果您的问题是：“如何生成格式为“Type $4, $5”的输出，其中 $4 和 $5 分别是输入的第 4 列和第 5 列？一种解决方案是：

```
for i in list of input file; do
  awk '{print "Type "$4, $5}' $i > $i.result
done 
```

这给出了您想要的输出，但依赖于所有不包含空格的列。如果可能有空格，您可以执行以下操作：

```
 awk '{printf( "Type %s, %s", $4, $5 )}' FS=, $i > $i.result 
```

但您可能想要修剪这将产生的额外空白。请注意，尽管在示例中我将输入文件列表硬编码为 4 个文件名“list”、“of”、“input”和“file”，但我不希望您输入名称。而是，你应该以某种方式生成它们，我只是演示了一个（许多！）迭代一组文件的方法。似乎这个问题的核心是处理 的部分`awk`，而不是迭代。

对该问题的第二次阅读表明您每个输入文件只有一行，并且您希望将结果汇总在一个文件中。在这种情况下，只需执行以下操作：

```
cat list of all files | awk '{print "Type "$4, $5}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T16:48:24.437

如果分隔符只是逗号，并且不需要转义的 CSV 解析，请使用 cut 实用程序：

```
cat $file | cut -d, -f4 
```

# asp.net-mvc-3 - 模型级别的 ValidateRequest

> ID：11124283
> 
> 赞同：0
> 
> 时间：2012-06-20T16:46:13.770
> 
> 标签：asp.net-mvc-3, validate-request

我需要找到一种在模型上设置 ValidateRequest 的方法...我知道我可以在 Web 配置级别将 ValidateRequest 设置为 false ...但我不想在应用程序级别这样做，我更喜欢这样做它在模型级别，在 WebForms 中，我们曾经有 ValidateRequest 页面指令属性，您可以将其设置为 false，但在 MVC 中，我们可以使用“ValidateRequest = false”在控制器级别执行它......但我想要做的是看到如果有办法在模型级别应用此属性......因为我想在我的应用程序的不同位置使用模型......我不想每次在视图中使用它时都设置“ValidateRequest” ...

任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:48:44.810

我能想到的最接近的属性是`[AllowHtml]`（在 System.Web.MVC 下）......

# c# - 为事件代理一般地存储和调用委托

> ID：11124290
> 
> 赞同：3
> 
> 时间：2012-06-20T16:46:35.527
> 
> 标签：c#, delegates, contravariance

我正在尝试创建一个支持松散耦合的事件代理，同时仍允许开发人员使用熟悉的 += 语法和智能感知。我正在努力解决如何在不使用 DynamicInvoke 的情况下一般调用代表。

大概的概念：

*   所有事件都在接口中定义，每个事件都采用一个派生自 EventInfoBase 的参数。

    ```
    public delegate void EventDelegate<in T>(T eventInfo) where T : EventInfoBase; 
    ```

*   在订阅方，客户端向 Windsor 容器请求实现事件接口的实例。Windsor 返回一个拦截所有 += (add_xxx) 和 -= (remove_xxx) 调用的代理。存储类型和委托信息以供将来在触发事件时查找和执行。目前，委托存储为委托，但更愿意将其存储为 EventDelegate 之类的东西。

*   在发布者端，发布者向事件代理注册作为事件接口的源。事件代理通过反射使用 EventDelegate<EventInfoBase> 类型的委托订阅每个事件。

*   当一个事件被触发时，事件代理会查找任何合适的委托并执行它们。

问题：

使用 EventInfoBase 基类向发布者添加事件处理程序是逆变的合法使用。但事件代理无法将客户端订阅存储为 EventDelegate<EventInfoBase>。[Eric Lippert 在这篇博](http://blogs.msdn.com/b/ericlippert/archive/2007/10/19/covariance-and-contravariance-in-c-part-three-member-group-conversion-variance.aspx)文中解释了原因。

关于如何存储客户端订阅（委托）以便以后可以在不使用 DynamicInvoke 的情况下调用它们的任何想法？

**更新了其他详细信息：**

订阅者向事件代理请求事件接口，然后根据需要订阅事件。

```
// a simple event interface
public class EventOneArgs : EventInfoBase { }
public class EventTwoArgs : EventInfoBase { }
public interface ISomeEvents
{
  event EventDelegate<EventOneArgs> EventOne;
  event EventDelegate<EventTwoArgs> EventTwo;
}

// client gets the event broker and requests the interface
// to the client it looks like a typical object with intellisense available
IWindsorContainer cont = BuildContainer();
var eb = cont.Resolve<IEventBroker>();
var service = eb.Request<ISomeEvents>();
service.EventOne += new EventDelegate<EventOneArgs>(service_EventOne);
service.EventTwo += new EventDelegate<EventTwoArgs>(service_EventTwo); 
```

在后台，事件代理对事件接口一无所知，它返回该接口的代理。所有 += 调用都被拦截，订阅添加了代表字典。

```
public T Request<T>(string name = null) where T : class
{
  ProxyGenerator proxygenerator = new ProxyGenerator();
  return proxygenerator.CreateInterfaceProxyWithoutTarget(typeof(T), 
            new EventSubscriptionInterceptor(this, name)) as T;
}

public void Intercept(IInvocation invocation)
{
  if (invocation.Method.IsSpecialName)
  {
    if (invocation.Method.Name.Substring(0, s_SubscribePrefix.Length) == s_SubscribePrefix) // "add_"
    {
       // DeclaringType.FullName will be the interface type
       // Combined with the Name - prefix, it will uniquely define the event in the interface
       string uniqueName = invocation.Method.DeclaringType.FullName + "." + invocation.Method.Name.Substring(s_SubscribePrefix.Length);
       var @delegate = invocation.Arguments[0] as Delegate; 
       SubscirptionMgr.Subscribe(uniqueName, @delegate);
       return;
    }
    // ...
  }
} 
```

存储在 SubscriptionManager 中的委托属于 EventDelegate<T> 类型，其中 T 是事件定义的派生类型。

发布者：发布者注册为事件接口的来源。目标是消除显式调用事件代理的需要，并允许使用 EventName(args) 的典型 C# 语法。

```
public class SomeEventsImpl : ISomeEvents
{
   #region ISomeEvents Members
   public event Ase.EventBroker.EventDelegate<EventOneArgs> EventOne;
   public event Ase.EventBroker.EventDelegate<EventTwoArgs> EventTwo;
   #endregion

   public SomeEventsImpl(Ase.EventBroker.IEventBroker eventBroker)
   {
      // register as a source of events
      eventBroker.RegisterSource<ISomeEvents, SomeEventsImpl>(this);
   }

   public void Fire_EventOne()
   {
      if (EventOne != null)
      {
         EventOne(new EventOneArgs());
      }
   }
} 
```

事件代理使用反射来订阅具有公共处理程序的接口中的所有事件（AddEventHandler）。我还没有尝试过组合处理程序。我创建了一个包装类，以防在触发事件时需要可用的其他信息，例如类型。

```
public void RegisterSource<T, U>(U instance)
   where T : class
   where U : class
{
   T instanceAsEvents = instance as T;
   string eventInterfaceName = typeof(T).FullName;
   foreach (var eventInfo in instanceAsEvents.GetType().GetEvents())
   {
      var wrapper = new PublishedEventWrapper(this, eventInterfaceName + "." + eventInfo.Name);
      eventInfo.AddEventHandler(instance, wrapper.EventHandler);
   }
}

class PublishedEventWrapper
{
   private IEventPublisher m_publisher = null;
   private readonly EventDelegate<EventInfoBase> m_handler;

   private void EventInfoBaseHandler(EventInfoBase args)
   {
      if (m_publisher != null)
      {
         m_publisher.Publish(this, args);
      }
   }

   public PublishedEventWrapper(IEventPublisher publisher, string eventName)
   {
      m_publisher = publisher;
      EventName = eventName;
      m_handler = new EventDelegate<EventInfoBase>(EventInfoBaseHandler);
   }

   public string EventName { get; private set; }
   public EventDelegate<EventInfoBase> EventHandler
   {
      get { return m_handler; }
   }
} 
```

我一直在努力解决的问题在于发布。Publish 方法查找事件的委托并需要执行它们。由于 DynamicInvoke 的性能问题，我想将委托转换为正确的 EventDelegate<T> 表单并直接调用它，但还没有找到解决方法。

为了弄清楚这一点，我当然学到了很多东西，但是时间不多了。我可能缺少一些简单的东西。我尝试将委托包装在另一个（动态生成的）中，基本上看起来像：

```
private static void WrapDelegate(Delegate d, DerivedInfo args)
{
   var t = d as EventDelegate<DerivedInfo>;
   if (t != null)
   {
      t(args);
   }
} 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:54:46.023

> 关于如何存储客户端订阅（委托）以便以后可以在不使用 DynamicInvoke 的情况下调用它们的任何想法？

您可以使用`Dictionary<Type, Delegate>`, 然后适当地转换：

```
public void Subscribe<T>(EventDelegate<T> handler) where T : EventInfoBase
{
    Delegate existingHandlerPlain;
    // We don't actually care about the return value here...
    dictionary.TryGetValue(typeof(T), out existingHandlerPlain);
    EventDelegate<T> existingHandler = (EventDelegate<T>) existingHandlerPlain;
    EventDelegate<T> newHandler = existingHandler + handler;
    dictionary[typeof(T)] = newHandler;
}

public void Publish<T>(EventInfo<T> info) where T : EventInfoBase
{
    Delegate handlerPlain;
    if (dictionary.TryGetValue(typeof(T), out handlerPlain))
    {
        EventDelegate<T> handler = (EventDelegate<T>) handlerPlain;
        handler(info);
    }
} 
```

演员表应该始终是安全的，因为您自己管理内容。

但是，如果您尝试组合实际上属于不同类型的事件处理程序，您仍然可能会遇到差异问题。如果这是一个问题，您将需要显式使用 a`List<EventHandler<T>>`而不是使用“正常”组合操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:44:44.363

包装委托的解决方案：

我确实设法找到了一种用已知类型的委托包装通用委托的方法。这允许使用 SomeDelegate(args) 的标准调用约定。此解决方案采用由以下定义的通用委托：

```
public delegate void EventDelegate<in T>(T eventInfo) where T : EventInfoBase; 
```

通用委托由具有已知签名的委托包装，该签名可由基础设施代码调用。我还没有验证这种方法的性能。订阅事件会产生调用 MethodInfo.Invoke 的费用。触发事件的成本是 DelegateWrapper 中的代码。

```
 private static EventDelegate<EventInfoBase> DelegateWrapper<T>(Delegate @delegate) where T : EventInfoBase
  {
     return (o =>
        {
           var t = @delegate as EventDelegate<T>;
           var args = o as T;
           if (t != null && o != null)
           {
              t(args);
           }
        }
     );
  }

  private static readonly MethodInfo s_eventMethodInfo = typeof(EventSubscriptionInterceptor).GetMethod("DelegateWrapper", BindingFlags.NonPublic | BindingFlags.Static);

  private EventDelegate<EventInfoBase> GenerateDelegate(Delegate d)
  {
     MethodInfo closedMethod = s_eventMethodInfo.MakeGenericMethod(d.Method.GetParameters()[0].ParameterType);
     var newDel = closedMethod.Invoke(null, new object[] { d }) as EventDelegate<EventInfoBase>;
     return newDel;
  } 
```

至少这给了我一个松散耦合事件代理的工作原型，它具有“主要”C# 语法。

# wget - 为什么wget只下载某些网站的index.html？

> ID：11124292
> 
> 赞同：59
> 
> 时间：2012-06-20T16:46:39.893
> 
> 标签：wget

我正在尝试使用 wget 命令：

```
wget -p http://www.example.com 
```

获取主页上的所有文件。对于某些网站，它可以工作，但在大多数情况下，它只下载 index.html。我已经尝试了 wget -r 命令，但它不起作用。任何人都知道如何获取页面上的所有文件，或者只是给我一个文件列表和页面上相应的 url？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-20T17:10:23.453

Wget 还能够下载整个网站。但是因为这会给服务器带来沉重的负担，所以 wget 将服从 robots.txt 文件。

```
 wget -r -p http://www.example.com 
```

-p 参数告诉 wget 包含所有文件，包括图像。这将意味着所有的 HTML 文件将看起来应该如何做。

那么，如果您不想让 wget 服从 robots.txt 文件怎么办？您可以像这样简单地将 -e robots=off 添加到命令中：

```
 wget -r -p -e robots=off http://www.example.com 
```

由于许多网站不允许您下载整个网站，它们会检查您的浏览器身份。要解决这个问题，请使用 -U mozilla，如上所述。

```
 wget -r -p -e robots=off -U mozilla http://www.example.com 
```

许多网站所有者不喜欢您下载他们的整个网站这一事实。如果服务器发现您正在下载大量文件，它可能会自动将您添加到它的黑名单中。解决这个问题的方法是在每次下载后等待几秒钟。使用 wget 执行此操作的方法是包含 --wait=X （其中 X 是秒数。）

你也可以使用参数：--random-wait 让 wget 选择一个随机的等待秒数。要将其包含在命令中：

```
wget --random-wait -r -p -e robots=off -U mozilla http://www.example.com 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-08-22T09:45:48.077

首先，为了澄清问题，目的是下载`index.html`该页面的所有必要部分（图像等）。该`-p`选项等效于`--page-requisites`。

并非总是下载页面必需品的原因是它们通常托管在与原始页面不同的域（例如 CDN）上。默认情况下，[wget 拒绝访问其他主机](http://www.gnu.org/software/wget/manual/html_node/Spanning-Hosts.html)，因此您需要使用**选项****启用主机跨接`--span-hosts`**。

```
wget --page-requisites --span-hosts 'http://www.amazon.com/' 
```

如果您需要能够`index.html`从本地版本加载并加载所有页面必备项，则需要添加该`--convert-links`选项，以便将`img`src 属性中的 URL（例如）重写为指向本地版本的相对 URL。

或者，您可能还希望通过添加选项将所有文件保存在单个“主机”目录下`--no-host-directories`，或者通过添加选项将所有文件保存在单个平面目录中`--no-directories`。

使用`--no-directories`将导致大量文件被下载到当前目录，因此您可能希望为输出文件指定一个文件夹名称，使用`--directory-prefix`.

```
wget --page-requisites --span-hosts --convert-links --no-directories --directory-prefix=output 'http://www.amazon.com/' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-21T20:26:09.673

您提供的链接是主页或/index.html，因此很明显您只获得了一个 index.html 页面。对于实际下载，例如“test.zip”文件，您需要在末尾添加确切的文件名。例如使用以下链接下载 test.zip 文件：

> wget -p domainname.com/test.zip

**下载完整的网站使用`wget --mirror`**

以下是当您想要下载完整网站并可供本地查看时要执行的命令行。

> wget --mirror -p --convert-links -P ./LOCAL-DIR [http://www.example.com](http://www.example.com)

*   –mirror：打开适合镜像的选项。

*   -p：下载正确显示给定 HTML 页面所需的所有文件。

*   –convert-links：下载后，将文档中的链接转换为本地查看。

*   -P ./LOCAL-DIR：将所有文件和目录保存到指定目录

**使用仅下载某些文件类型`wget -r -A`**

您可以在以下情况下使用它：

*   从网站下载所有图像，

*   从网站下载所有视频，

*   从网站下载所有 PDF 文件

> wget -r -A.pdf [http://example.com/test.pdf](http://example.com/test.pdf)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-30T20:43:47.527

另一个问题可能是您要镜像的站点使用的链接没有`www`. 所以如果你指定

`wget -p -r http://www.example.com`

它不会下载任何链接（实习）页面，因为它们来自“不同”域。如果是这种情况，那么使用

`wget -p -r http://example.com`

相反（没有`www`）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-21T23:55:01.793

我在下载 CFSv2 模型的文件时遇到了同样的问题。我使用上述答案的混合解决了它，但添加了参数`--no-check-certificate`

`wget -nH --cut-dirs=2 -p -e robots=off --random-wait -c -r -l 1 -A "flxf*.grb2" -U Mozilla --no-check-certificate https://nomads.ncdc.noaa.gov/modeldata/cfsv2_forecast_6-hourly_9mon_flxf/2018/201801/20180101/2018010100/`

这里对使用的每个参数进行简要说明，更多说明请[参见 GNU wget 1.2 手册](https://www.gnu.org/software/wget/manual/wget.html)

*   `-nH`相当于`--no-host-directories`：禁止生成以主机为前缀的目录。在这种情况下，避免生成目录`./https://nomads.ncdc.noaa.gov/`

*   `--cut-dirs=<number>`: 忽略目录组件。在这种情况下，避免生成目录`./modeldata/cfsv2_forecast_6-hourly_9mon_flxf/`

*   `-p`相当于`--page-requisites`：此选项使 Wget 下载正确显示给定 HTML 页面所需的所有文件。这包括内联图像、声音和引用样式表等内容。

*   `-e robots=off`: 避免下载 robots.txt 文件

*   `-random-wait`：导致请求之间的时间在 0.5 和 1.5 * 秒之间变化，其中使用`--wait`选项指定。

*   `-c`相当于`--continue`：继续获取部分下载的文件。

*   `-r`相当于`--recursive`：打开递归检索。默认最大深度为 5

*   `-l <depth>`相当于`--level <depth>`：指定递归最大深度级别

*   `-A <acclist>`等同于`--accept <acclist>`：指定要接受的名称后缀或模式的逗号分隔列表。

*   `-U <agent-string>`相当于`--user-agent=<agent-string>`：HTTP 协议允许客户端使用 User-Agent 头字段来标识自己。这可以区分 WWW 软件，通常用于统计目的或跟踪协议违规。Wget 通常标识为“Wget/version”，版本是 Wget 的当前版本号。

*   `--no-check-certificate`：不要根据可用的证书颁发机构检查服务器证书。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-10T05:54:01.383

我知道这个线程很旧，但请尝试 Ritesh 提到的内容：

> --no-cookies

它对我有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-17T00:24:31.523

如果您`index.html`在[**wget 手册**](http://www.gnu.org/software/wget/manual/wget.html#index-index_002ehtml-73)[中查找，](http://www.gnu.org/software/wget/manual/wget.html#index-index_002ehtml-73)**您可以找到一个`--default-page=name`默认选项`index.html`。例如，您可以更改`index.php`为。**

 **```
--default-page=index.php 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-01T09:29:30.417

如果您只得到`index.html`并且该文件看起来只包含二进制数据（即没有可读文本，只有控制字符），那么该站点可能正在使用`gzip`压缩发送数据。

`cat index.html | gunzip`您可以通过运行以查看它是否输出可读的 HTML来确认这一点。

如果是这种情况，则`wget`的递归功能 ( `-r`) 将不起作用。有一个用于处理 gzip 压缩数据的[补丁](https://lists.gnu.org/archive/html/bug-wget/2014-12/msg00087.html)`wget`，但它似乎还没有出现在标准版本中。**

# vb.net - 静态输入我的变量是否有可能会提高脚本执行时间？

> ID：11124294
> 
> 赞同：0
> 
> 时间：2012-06-20T16:46:48.740
> 
> 标签：vb.net, types

我正在更新一个`.aspx.vb`最初用动态类型变量编写的旧脚本，如下所示：

```
Dim price 
```

我将它们更新为以下格式（以及一些`IsDBNull`补偿检查）：

```
Dim price As String 
```

在对我的所有变量执行此操作后，脚本似乎运行得更快了。这是静态类型的真实效果，还是只是巧合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:00:02.030

是的，这是 VB 中首先存在该功能（Dim var As Type）的部分原因。

# algorithm - 查找非循环图中是否存在特定长度的路径

> ID：11124295
> 
> 赞同：2
> 
> 时间：2012-06-20T16:46:50.553
> 
> 标签：algorithm, graph, shortest-path, directed-acyclic-graphs, longest-path

在无环图中，我试图找出两个给定节点之间是否存在长度为 L 的路径。我的问题是，在这种情况下使用的最好和最简单的算法是什么。

请注意，该图最多有 50 个节点和 100 条边。

我尝试使用 DFS 查找所有路径，然后检查两个节点之间是否存在该路径，但我从在线法官那里得到了“超出时间限制”的答案。

我也使用了统一成本搜索算法，但我也得到了否定的回应。

我需要一种更有效的方法来解决此类问题。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T16:54:03.997

我不知道它是否会比 DFS 方法更快 - 但它会提供一个可行的解决方案：

将图表示为矩阵`A`，并计算**`A^L`**- 当且仅当 i 和 j 之间存在长度为 L 的路径`A[i][j] != 0`

此外，关于 DFS 解决方案：您不需要找到DFS 中的*所有路径*- 您应该**将自己限制在长度 <= L 的路径中**，并在长度超过所需长度后通过此修剪一些搜索。一旦长度为 L 的路径到达目标，您也可以逃避搜索。

另一种可能的优化可能是[**双向搜索**](http://en.wikipedia.org/wiki/Bidirectional_search)。

*   找到从源到它们的路径长度为 L/2 的所有顶点。
*   接下来，找到从它们到目标的路径长度为 L/2 的所有顶点（反向图上的 DFS）
*   然后，检查是否有两个集合共有的顶点，如果有 - 你得到了一条从源到目标的长度为 L 的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:10:46.933

由于图是非循环的，您可以对顶点进行拓扑排序。让我们命名起始顶点 A 并结束顶点 B。

现在核心算法开始：对于每个顶点计算从 A 到该顶点的所有可能距离。一开始有一条从 A 到 A 的路径，长度为零。然后按拓扑顺序取顶点。当您选择顶点 x 时：查看每个前驱并在此处更新可能的距离。

这应该在 O(N^3) 时间内运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:27:28.623

您可以使用修改后的 Dijkstra 算法，而不是为每个顶点保存到原点的最小距离，而是保存小于或等于所需距离的所有可能距离。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T18:28:54.300

我相信您可以使用以下算法找到树中最长的路径。这假设您的图表是连接的，如果不是，您需要在每个连接的组件上重新运行它：

1.  选择一个任意节点，A。
2.  从 A 执行 BFS（或 DFS）以在树中找到离 A 最远的节点，将此节点称为 B。
3.  从 B 做一个 BFS（或 DFS），在树中找到离 B 最远的节点，称这个节点为 C。
4.  从 B 到 C 的路径是树中最长的路径（可能并列最长）。

显然，如果这条路径比 L 长，那么您可以缩短它以找到长度为 L 的路径。

# terminal - 在 OSX Lion 中为终端制作别名

> ID：11124300
> 
> 赞同：0
> 
> 时间：2012-06-20T16:47:06.113
> 
> 标签：terminal, alias, scp

我希望能够输入：

```
myscpalias ~/file.txt . 
```

为了执行这个命令：

```
scp myusername@server.com:~/file.txt . 
```

* * *

我也不确定如何处理以下内容。我想输入：

```
cd mypath
#or something like:
scp mypath/file.txt myusername@server.com:~/folder 
```

为了真正做到：

```
cd /blah1/blah2/blah3/ 
#or something like:
scp /blah1/blah2/blah3/file.txt myusername@server.com:~/folder 
```

我一直无法让别名这样做。我什至需要别名还是应该使用函数？我已经尝试了很多东西的组合，但我无法让它发挥作用。我在 OSX Lion 上并将别名放在我的 .profile 文件中。很感谢任何形式的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:27:48.297

如果您的 shell 是`bash`（默认），那么别名语法是这样的：

```
alias myalias='this is my command' 
```

例如：

```
alias dir1='cd /blah1/blah2/blah3/' 
```

...将允许您键入`dir1`以执行上述`cd`命令。

没错，函数也是一种选择，它们可能更适合更复杂或多行的东西，例如参数化的`scp`.

例如：

```
myscpalias() {
  host=$1
  dir=$2
  # should add error checking, such as:
  if [ "x$host" = "x" ] ; then
    echo "host is required" >&2
  else
    scp myusername@server.com:${host} ${dir}
  fi
} 
```

# javascript - 在json中传递表

> ID：11124302
> 
> 赞同：1
> 
> 时间：2012-06-20T16:47:06.943
> 
> 标签：javascript, jquery, json

我试图使用 JSON 传递表格，如下所示。

**示例.json**

```
 {       
     "title": "sample data",
     "body": "<table border=\"1\" width=\"600\" bordercolor=\"#FFFFFF\"><tr><td>Column 1</td> <td>Column 2</td></tr></table>"
 } 
```

我使用 Javascript 代码读取 JSON 文件，

```
 $.getJSON("sample.json", function(data) {
     console.log(data);
 }); 
```

但是会产生以下错误

[JAVASCRIPT 错误]

错误详细信息：TypeError：正文未定义

是否可以在 JSON 中传递表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:02:19.023

你没有调用`body`你的代码，你什么时候调用这个？

```
 $.getJSON("sample.json", function(data) {
     console.log(data.body);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:02:41.957

错误在其他地方。下面的 jsfiddle 证明它工作正常。[http://jsfiddle.net/mendesjuan/YYPHe/](http://jsfiddle.net/mendesjuan/YYPHe/)

我删除了属性周围的引号只是为了避免转义问题。可能是您的代码没有正确转义您的引号。

```
var json = '{"title": "sample data","body": "<table border=1 width=600 bordercolor=#FFFFFF><tr><td>Column 1</td> <td>Column 2</td></tr></table>"}';

$.ajax({
    url: "/echo/json/", 
    data: {
        json: json 
    },
    type: "POST",
    dataType: 'json',
    success: function(data) {
       console.log(data.body);
    }
});​ 
```

# api - MSN XMPP API 连接失败

> ID：11124309
> 
> 赞同：0
> 
> 时间：2012-06-20T16:47:33.903
> 
> 标签：api, xmpp, msn

我正在尝试通过 Actionscript 使用 MSN XMPP API，但与 MSN 的连接总是失败。我可以在日志中识别此错误：

```
I DONT KNOW HOW TO HANDLE DER stuff of TYPE 22
I DONT KNOW HOW TO HANDLE DER stuff of TYPE 12
I DONT KNOW HOW TO HANDLE DER stuff of TYPE 22
I DONT KNOW HOW TO HANDLE DER stuff of TYPE 22
(..)
> <stream:error
> xmlns:stream="http://etherx.jabber.org/streams"><see-other-host
> xmlns="urn:ietf:params:xml:ns:xmpp-streams">BY2MSG4020608.gateway.edge.messenger.live.com</see-other-host></stream:error> </stream:stream> 
```

有谁知道这与什么有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:04:20.340

流错误[see-other-host 在 RFC 6120 中定义](https://www.rfc-editor.org/rfc/rfc6120#section-4.9.3.19)为一种重定向。这意味着服务器希望您重试连接到另一台主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:14:04.223

您必须解析流错误并获取那种 URL “BY2MSG4020608.gateway.edge.messenger.live.com” 也许您必须访问原始响应。如果您提供有关您正在使用的库的一些信息，我们可以为您提供帮助（代码示例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:48:00.483

微软在四月份的最新服务器更新中引入了变化。另请参阅：http: [//msdn.microsoft.com/en-us/library/live/hh826554.aspx](http://msdn.microsoft.com/en-us/library/live/hh826554.aspx)

所以在 TLS 协商之后，他们总是发送这个流错误并关闭流。您必须打开一个新的 XMPP 流到看到其他主机错误中给出的主机。这是他们的 XMPP 负载平衡方式：/

# hadoop - Cloudera manager - hadoop 安装失败

> ID：11124314
> 
> 赞同：1
> 
> 时间：2012-06-20T16:47:49.310
> 
> 标签：hadoop, cloudera

尝试安装 Cloudera Manager。在 hadoop 主机中步骤自动安装失败。

```
Error:
Installing JDK package...
BEGIN yum info jdk 
Loaded plugins: fastestmirror 
Loading mirror speeds from cached hostfile 
* base: archive.cs.uu.nl 
* extras: archive.cs.uu.nl 
* updates: mirror.fraunhofer.de 
http://archive.cloudera.com/redhat/cdh/3/repodata/repomd.xml: [Errno 4] IOError: <urlopen error (-3, 'Temporary failure in name resolution')> 
Trying other mirror. 
Error: Cannot retrieve repository metadata (repomd.xml) for repository: cloudera-cdh3\. Please verify its path and try again 
END (1) 
remote package jdk is not available, giving up

From OS command 
yum info jdk 
complete success.

In the OS set proxy (export http_proxy=....) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:50:13.963

Cloudera SCM 失败，因为它无法使用 yum 下载和安装 JDK。

到目前为止，我看到它总是试图这样做。

您可以自己更新机器上的 yum 存储库，具体取决于您使用的 Linux 版本。

这是使用 RHEL / OEL 5 的示例：

```
# This adds Oracle Yum repo
cd /etc/yum.repos.d/
wget http://public-yum.oracle.com/public-yum-el5.repo

# This adds Fedora EPEL yum repo
yum remove epel-release-5-4
rpm -Uvh http://mirrors.kernel.org/fedora-epel/5/x86_64/epel-release-5-4.noarch.rpm 
```

看看能不能手动安装JDK。

[编辑：]

检查您是否能够在没有问题的情况下执行以下操作：

```
python
>>> import urllib
>>> x = urllib.urlopen('http://archive.cloudera.com/redhat/cdh/3/repodata/repomd.xml')
>>> x.getcode()
200
>>> print x.readlines() 
```

# sql-server - 我希望 sql 代码运行一个报告，计算每个经理接受合规类型的员工的百分比

> ID：11124317
> 
> 赞同：0
> 
> 时间：2012-06-20T16:47:51.450
> 
> 标签：sql-server

我有员工、经理、complincetype 表，我想计算有多少员工接受了什么样的 compliencetype.compliancetype 表由以下列组成，即 bcoe、eud、leave、building、parking 所以在每个经理中可以有 2 个或更多接受 bcoe 的员工，那么该经理在 bcoe 中的百分比取决于该经理下有多少员工。我已设法加入经理和员工表，以便我可以看到谁向哪个经理报告，所以我需要 sql 代码来加入所有表并计算 percenatge.in compliancetype 表我在每个 compliencetype 下都有“y”作为数据，以表明此类员工接受 complience.i 在 complience 表上也有 emp_id 列以识别员工。

表列如下：manager table:manager_id as PK,name as char,lname as char employee table:emp_id as PK,emp_name,emp_surname,manager_id compliencetype table:bcoe,eud,leave,building,parking,emp_id

我在 oracle apex 上运行此报告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:13:35.550

没有实际数据进行测试，我在这里猜测了一下，但可能是这样的：

```
select c.cmanager_id,c.cmanager_name,bcoe,e.emp_id,e.emp_name,e.emp_lname 
, pct = 100 * SUM(CASE bcoe WHEN 'Y' THEN 1.0 ELSE 0.0 END)OVER(PARTITION BY c.cmanager_id)
  / SUM(1.0)OVER(PARTITION BY c.cmanager_id)
from cemployees e 
join cmanager c on c.cmanager_id = e.cmanager_id 
join compliancetype t on e.emp_id = t.emp_id 
```

我对百分比公式的实际测试查询：

```
SELECT DISTINCT c.cmanager_id
, pct = 100 * SUM(CASE bcoe WHEN 'Y' THEN 1.0 ELSE 0.0 END)OVER(PARTITION BY c.cmanager_id) / SUM(1.0)OVER(PARTITION BY c.cmanager_id)
FROM (VALUES(1,'Y',8),(2,'Y',8),(3,'N',8),(4,'Y',9),(5,'N',9)) c(emp_id,bcoe,cmanager_id) 
```

结果：

```
cmanager_id pct
----------- ---------------------------------------
8           66.666666
9           50.000000 
```

# jquery - 将 URL 拖放到浏览器中并使用 jQuery 进行处理

> ID：11124320
> 
> 赞同：3
> 
> 时间：2012-06-20T16:48:00.163
> 
> 标签：jquery, url, drag-and-drop

我需要能够将 URL（从浏览器中的 url 栏）拖放到网页中，使用该链接向 Web 服务发出请求，并获取 JSON 回复并填充表单。

我已经能够创建处理链接的 Web 服务，并且我已经能够使用 jQuery.ajax 发出请求，但我不确定如何与删除的链接进行交互。

谁能给我举个例子？我应该使用什么？

编辑：

我已经能够使用“drop”触发我的 ajax 查询，但我不确定如何获取我已删除的 URL 的值。这是我的代码：

```
jQuery(function() {
$("input").bind("drop", function(e){
        var val = e.dataTransfer.getData('Text')
        $.ajax({
        type: 'GET',
        url: 'http://dev.null:8888/gud/',
        data: 'url=' + val,
        dataType: 'json',
        success: function(jsonData) {
          alert(jsonData);
        },
        error: function (xhr, ajaxOptions, thrownError){
          alert("this isnt working");
        },                              
      });
    });
  }); 
```

我认为这`e.dataTransfer.getData('Text')`可以让我访问 URL 的值，但事实并非如此。有谁知道我如何访问该值？

找到了。这是`e.originalEvent.dataTransfer.getData('Text')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:57:11.870

有趣的问题。我相信这**是**可能的；但是，我确实认为存在一些限制的可能性。

据我所知，大多数平台/浏览器在拖放文本内容（无论是原始文本、网址、“炸鱼和薯条”等）方面的行为都类似……文本到文本框中，文本框将填充该内容。因此，您可以指示您的用户将链接/文本放到特定的文本区域...

关于检测何时发生丢弃，我认为您将不得不依靠`setInterval`检查某个文本框的值/内容的方法来了解何时插入了有效的 URL。

* * *

** 现在关于限制 - 我不知道（我不知道）这个功能是否确实是通用的，但我相信这是所有“主要”浏览器的标准功能，它不涉及该平台。*

*[很想从一个更有学问的人那里得到一些确认。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-25T07:19:28.520

使用 setInterval 概念改进 Lix 的解决方案：不要执行 setInterval，因为它会不断重复，而是添加一个带有单个超时的 drop listener，如下所示：

```
var $t=$('textarea');
$t.on('drop',(event)=>{
  setTimeout(()=>{alert(event.target.value);},0);
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-20T16:53:39.667

我认为对于您的情况，您必须为浏览器创建一个插件或扩展程序。

一旦您将 url 放到浏览器地址元素中，页面就会被加载并且您的 JavaScript 将不会运行。

# vbscript - 如何在不覆盖的情况下写入 VBScript 中的文本文件？

> ID：11124321
> 
> 赞同：0
> 
> 时间：2012-06-20T16:48:07.700
> 
> 标签：vbscript

我目前正在编写一个脚本，它从计算机解析 ServiceTage、Computername 和 Username 并将其输出到共享上的文本文件，但它似乎总是覆盖那里的数据而不是添加到它。

代码如下：

```
'Get Dell Service Tag Info
set ProSet = GetObject("winmgmts:").InstancesOf("Win32_BIOS")
Set ProSet1 = GetObject("winmgmts:").InstancesOf("Win32_SystemEnclosure")
For each Pro in ProSet
  For each Pro1 in ProSet1
    ServiceTag=Pro.SerialNumber
    exit for
  Next
  exit for
Next

'get username and computername, could also be asked in a batch
Set oShell     = WScript.CreateObject("WScript.Shell")
Set oShellEnv  = oShell.Environment("Process")
sComputerName  = oShellEnv("ComputerName")
sUsername      = oShellEnv("username")

dim filesys, filetxt, getname, path
Set filesys = CreateObject("Scripting.FileSystemObject")
Set filetxt = filesys.CreateTextFile("\\xx.xx.xx.xx\Support\DataLog.txt", 8, True)
path = filesys.GetAbsolutePathName("\\xx.xx.xx.xx\Support\DataLog.txt")
getname = filesys.GetFileName(path)
filetxt.WriteLine sUsername & ", " & sComputerName & ", " & ServiceTag
filetxt.Close 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:47:16.570

直接来自 VBScript 文档：

```
object.CreateTextFile(filename[, overwrite[, unicode]])

object.OpenTextFile(filename[, iomode[, create[, format]]]) 
```

从您的代码：

```
Set filetxt = filesys.CreateTextFile(filename, 8, True) 
```

诊断：

您使用 .OpenTextFile() 的参数调用 .CreateTextFile()

补救：

使用 .OpenTextFile()：

```
Set filetxt = filesys.OpenTextFile(filename, 8, True) 
```

# javascript - 使用 JavaScript 获取特定时区的日期时间

> ID：11124322
> 
> 赞同：37
> 
> 时间：2012-06-20T16:48:10.100
> 
> 标签：javascript, date

似乎 JavaScript 的 Date() 函数只能返回本地日期和时间。无论如何，是否有特定时区的时间，例如 GMT-9？

结合@​Esailija 和@D3mon-1stVFW，我想通了：你需要有两个时区偏移，一个用于本地时间，一个用于目的地时间，这是工作代码：

```
var today = new Date();  
var localoffset = -(today.getTimezoneOffset()/60);
var destoffset = -4; 

var offset = destoffset-localoffset;
var d = new Date( new Date().getTime() + offset * 3600 * 1000) 
```

一个例子在这里：http: [//jsfiddle.net/BBzyN/3/](http://jsfiddle.net/BBzyN/3/)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T16:56:43.433

```
var offset = -8;
new Date( new Date().getTime() + offset * 3600 * 1000).toUTCString().replace( / GMT$/, "" )

"Wed, 20 Jun 2012 08:55:20" 
```

```
<script>
  var offset = -8;

  document.write(
    new Date(
      new Date().getTime() + offset * 3600 * 1000
    ).toUTCString().replace( / GMT$/, "" )
  );
</script>
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-09-14T00:47:03.517

您可以在一行中执行此操作：

```
let d = new Date(new Date().toLocaleString("en-US", {timeZone: "timezone id"})); // timezone ex: Asia/Jerusalem 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-20T16:50:25.650

```
var today = new Date();  
var offset = -(today.getTimezoneOffset()/60); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T09:26:53.890

可以在[https://github.com/mde/timezone-js](https://github.com/mde/timezone-js)找到一个用于轻松处理时区的简单库，称为 TimezoneJS 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T16:55:06.537

您始终可以获得 GMT 时间（只要客户的时钟正确）。

要在任意时区**显示日期，请在添加偏移量后从 UTC 小时、分钟和秒构造一个字符串。**

# python - FITS 文件更改

> ID：11124325
> 
> 赞同：1
> 
> 时间：2012-06-20T16:48:18.213
> 
> 标签：python, fits, pyfits

我的导师给了我一些数据。数据由数千个 .fits 文件组成。一些 .fits 文件是其他文件的旧版本，并且数据表的构建方式也不同。这就是我的意思：

假设我有两个 .fits 文件：FITS1.fits 和 FITS2.fits

```
$ python
>>> import pyfits
>>> a = pyfits.getdata('FITS1.fits')
>>> b = pyfits.getdata('FITS2.fits')
>>> a.names
['time', 'timeerr', 'sap_flux', 'sap_flux_err']
>>> b.names
['time', 'sap_flux', 'timeerr', 'sap_flux_err'] 
```

有谁知道我可以切换数据表中的列的方法？所以 FITS2.fits 的格式类似于 FITS1.fits ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T16:34:36.153

你最好的选择是不直接使用 pyfits，而是使用更新的、更闪亮的 Astropy [Table](http://docs.astropy.org/en/latest/table/index.html)界面。您可以阅读 FITS 表，例如：

```
from astropy.table import Table
table = Table.read('FITS1.fits') 
```

如[修改表](http://docs.astropy.org/en/latest/table/modify_table.html#modifying-a-table)部分所示，您可以重新排列列，如：

```
table = table[['time', 'timeerr', 'sap_flux', 'sap_flux_err']] 
```

（从技术上讲，这会创建一个表的新副本，并按照您希望它们所在的顺序选择列；但是 IIRC 这不会复制基础列数组，并且应该仍然是一个快速操作）。

使用旧的 pyfits 接口也完全可以做到这一点，但在大多数情况下我不推荐它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T20:46:26.277

你不应该编写依赖于字典中键顺序的代码——字典是一个哈希表，它们的存储顺序基本上是任意的。如果您需要匹配或比较条目，您应该获得一个键列表并对它们进行排序。

pyfits 很可能按照键存储在 FITS 标头中的顺序构建字典，但这不一定是真的。

# sql - SQL Server 2008，一个查询的不同 WHERE 子句

> ID：11124328
> 
> 赞同：1
> 
> 时间：2012-06-20T16:48:39.270
> 
> 标签：sql, sql-server-2008, tsql

我有一个存储过程，它采用相同的列但具有不同的`WHERE`子句。

像这样的东西。

```
SELECT
     alarms.startt, alarms.endt, clients.code, clients.Plant,
     alarms.controller, alarmtype.atype, alarmstatus.[text]
FROM alarms
INNER JOIN clients ON alarms.clientid = clients.C_id 
INNER JOIN alarmstatus ON alarms.statusid = alarmstatus.AS_id
INNER JOIN alarmtype ON alarms.typeid = alarmtype.AT_id 
```

我将相同的查询放在 3 个 if（条件）中，其中`WHERE`子句根据传递给变量的参数而变化。

我是否必须为每个 if 中的每个条件一遍又一遍地写整个字符串？

或者我可以将它优化为一次，唯一会改变的是 WHERE 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:18:55.663

如果您执行以下操作，则可以避免重复代码：

```
WHERE (col1 = @var1 AND @var1 IS NOT NULL)
OR ...
OPTION RECOMPILE; 
```

您还可以通过数据库的参数化设置（简单与强制）对这种行为产生一些影响。

避免重复代码并避免由于参数嗅探而导致次优计划的方法是使用动态 SQL：

```
DECLARE @sql NVARCHAR(MAX) = N'SELECT ...';
IF @var1 IS NOT NULL
  SET @sql = @sql + ' WHERE ...'; 
```

如果您启用了服务器设置“针对临时查询进行优化”，这可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:57:00.400

你不必这样做，你可以通过做类似的事情来解决它

```
SELECT  *
FROM    [Query]
WHERE   (@Parameter = 1 AND Column1 = 8)
OR      (@Parameter = 2 AND Column2 = 8)
OR      (@Parameter = 3 AND Column3 = 8) 
```

但是，仅仅因为您可以做某事，并不意味着您应该做某事。不太冗长的 SQL 并不意味着更好的性能，所以使用类似的东西：

```
IF @Parameter = 1
    BEGIN
        SELECT  *
        FROM    [Query]
        WHERE   Column1 = 8
    END
ELSE IF @Parameter = 2
    BEGIN
        SELECT  *
        FROM    [Query]
        WHERE   Column2 = 8
    END
ELSE IF @Parameter = 3
    BEGIN
        SELECT  *
        FROM    [Query]
        WHERE   Column3 = 8
    END 
```

虽然等效于第一个查询应该会产生更好的性能，因为它将被更好地优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:05:58.537

因为没有人提出这个建议。您可以将原始查询放在一个视图中，然后使用不同的 WHERE 子句访问该视图。

为了提高性能，如果您知道 WHERE 子句中常​​用的列，您甚至可以向视图添加索引（查看[http://msdn.microsoft.com/en-us/library/dd171921(v=sql. 100).aspx](http://msdn.microsoft.com/en-us/library/dd171921(v=sql.100).aspx) )。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T16:57:14.233

我可能会坚持重复整个 SQL 语句，但过去曾诉诸于此……

```
WHERE (@whichwhere=1 AND mytable.field1=@id)
  OR (@whichwhere=2 AND mytable.field2=@id)
  OR (@whichwhere=3 AND mytable.field3=@id) 
```

不是特别可读，如果它很慢，您将不得不检查执行计划，但它可以防止您重复代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T17:17:25.693

就像 SQL 中的大多数东西一样：这取决于。这里有一些考虑。

*   不同的 WHERE 是否会导致执行的查询计划大不相同，例如索引的列之一而不是其他两个
*   查询是否可能随时间而改变：即需要其他列的客户需求
*   WHERE 是否可能变成 4，然后是 8，然后是 16 等选项。

一种方法是将不同的过程执行到临时表中。然后每个 proc 将有自己的查询计划。

另一种方法是使用动态 SQL，再次为每个“查询”分配自己的计划。

第三种方法是编写一个为每个选项生成 SQL 的应用程序，这可以是存储的过程或 sql 字符串。

然后拥有一个数据集并针对它进行测试驱动开发（每种方法都是如此）。

最后，最好的学习解决方案可能是 a) 阅读 SQL Kalen Delaney Inside SQL 是一位公认的专家。b) 根据您自己的数据测试您自己的解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T18:02:47.567

我会这样： WHERE 8 = CASE @parameter WHEN 1 THEN Column1 WHEN 2 THEN Column2 。. .

# python - 将整数拆分为两个连接的十六进制字符串 - Python

> ID：11124333
> 
> 赞同：0
> 
> 时间：2012-06-20T16:48:51.110
> 
> 标签：python, hex, bit-manipulation

我需要通过两个不同的十六进制字符串传输大于 65535 的值，以便在接收到字符串时，可以将它们连接起来再次形成整数。例如，如果值为 70000，则两个字符串将是 0x0001 和 0x1170。

我认为这就像将整数转换为十六进制一样简单，然后将其右移 4 以获得顶部字符串并删除除最后 4 个字符之外的所有字符。

我想我可能正在为一些语法（对 Python 来说相当新）和一些逻辑而苦苦挣扎。谁能想到一个简单的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:02:12.540

使用`divmod`内置函数：

```
>>> [hex(x) for x in divmod(70000, 65536)]
['0x1', '0x1170'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:59:06.520

你的意思是这样吗？

```
In [1]: big = 12345678
In [2]: first, second = hex(big)[2:][:-4], hex(big)[2:][-4:]
In [3]: first, second
Out[3]: ('bc', '614e')

In [4]: int(first+second, 16)
Out[4]: 12345678 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:13:07.083

您的算法可以很容易地实现，如 Lev Levitsky 的回答：

```
hex(big)[2:-4], hex(big)[-4:] 
```

但是，对于 65536 以下的数字，它将失败。

你可以解决这个问题，但你最好拆分数字，然后将两半转换为十六进制，而不是拆分十六进制字符串。

ecatmur 的回答可能是最简单的方法：

```
[hex(x) for x in divmod(70000, 65536)] 
```

或者您可以将您的“右移/截断”算法翻译成这样的数字：

```
hex(x >> 16), hex(x & 0xFFFF) 
```

如果您需要这些字符串是“0x0006”而不是“0x6”，而不是在零件上调用十六进制，您可以这样做：

```
['%#06x' % (x,) for x in divmod(x, 65536)] 
```

或者，使用更现代的字符串格式样式：

```
['0x{:04x}'.format(x) for x in divmod(x, 65536)] 
```

但另一方面，您可能再次希望通过先转换为整数然后移动和屏蔽数字来撤消此操作，而不是连接字符串。与 ecatmur 的答案相反的是：

```
int(bighalf) * 65536 + int(smallhalf) 
```

移位/掩码实现的（等效）逆是：

```
(int(bighalf) << 16) | int(smallhalf) 
```

在这种情况下，您不需要左侧的额外 0。

还值得指出的是，如果数字可以为负数或大于 4294967295，这些算法都不会起作用，但这只是因为在这些情况下问题是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T16:58:34.023

对于大于`65536`或具有长度的数字`>=5`，您可以使用`slicing`：

```
>>> num=70000
>>> var1=hex(num)[:-4]
>>> var2='0x'+hex(num)[-4:]
>>> integ=int(var1+var2[2:],16)
>>> print(integ)
    70000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T17:21:13.693

警惕大/小端，你可以做的保持简单是：

```
val = 70000
to_send = '{:08X}'.format(val) # '00011170'
decoded = int('00011170', 16) # 70000 
```

**编辑：那么要非常清楚......**

```
hex1, hex2 = to_send[:4], to_send[4:] # send these two and on receipt
my_number = int(hex1 + hex2, 16) 
```

# cmd - cmd：列表越过屏幕

> ID：11124337
> 
> 赞同：1
> 
> 时间：2012-06-20T16:49:13.700
> 
> 标签：cmd

例如，如果我在 cmd 中为 SYSTEM32 输入“dir”，列表就会继续。我启用了滚动，但滚动只是一点点。

是否有特殊的命令或方法来控制视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:59:37.393

您可以分页：

```
dir | more 
```

或者您可以输出到文件

```
dir > output.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:03:58.390

1.  您可以使用 /P 选项
2.  您可以增加 cmd 缓冲区大小
3.  您可以将输出重定向到文件： dir > 1.txt

# javascript - 简单的backbone.js模型连接

> ID：11124338
> 
> 赞同：0
> 
> 时间：2012-06-20T16:49:17.647
> 
> 标签：javascript, model-view-controller, backbone.js, bind

我从主干开始，我试图创建一个简单的视图，每当我的模型发生变化时都会发出警报。现在正在调用视图中的初始化函数，但是当我的模型更改（我的模型正在更改）时，不会调用渲染函数。我尝试了两种绑定到更改事件的方法（在初始化函数和事件属性中）。我觉得我错过了一些明显的东西。

#jsonPreview id 存在于 html 中。

```
// Create the view
var JSONView = Backbone.View.extend({
initialize: function(){
    this.bind("change", this.render);
  },

  render: function() {
    alert("change");
  },
  events:
  {
    "change":"render"
  }

});

// Create the view, and attach it to the model:
var json_view = new JSONView({ el: $("#jsonPreview"), model: documentModel }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:03:17.377

看起来您正在绑定到`change`视图上的事件而不是视图的模型。认为您需要绑定到模型事件，如下所示：

```
initialize: function(){
  this.model.bind("change", this.render);
}, 
```

# vb.net - 我可以在@Using.BegingForm() 中渲染@Section 吗？

> ID：11124343
> 
> 赞同：3
> 
> 时间：2012-06-20T16:49:27.937
> 
> 标签：vb.net, asp.net-mvc-3, razor

我正在尝试在 VB.NET MVC3 的表单中呈现自定义部分？该部分在主布局中，并且是默认的 - 但我喜欢在特定视图中创建自定义部分

当我尝试

```
@Using Html.BeginForm()
..my markup
   @Section footerMenu
      ..custom footer markup
   End Section
End Using 
```

编辑：该部分在我的 _Layout.vbhtml 中被删除

```
<div id="footer">      
    @If (IsSectionDefined("footerMenu")) Then
        @RenderSection("footerMenu")    
    Else
    ...default markup    
    End If
</div> 
```

我收到此错误：

> “@”字符后出现意外的“Section”关键字。进入代码后，您无需在“Section”之类的结构前面加上“@”。

当然删除“@”会导致另一个错误：

> 编译器错误消息：BC30451：未声明“节”。由于其保护级别，它可能无法访问。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:53:55.307

您`section`在其他地方定义并在您的表单中呈现它们。您在这里所做的是在导致错误的表单中*定义。* `section`

你需要创建一个自定义的（基本上保持简单）

所以你需要的是这样的：

```
@Using Html.BeginForm()
..my markup
   @RenderSection("footerMenuCustom") 
End Using 
```

其他地方（可以是局部视图）

```
@Section footerMenuCustom 
... Markup...
End Section 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:09:54.450

在您的布局页面中，指定`isRequired`值为`false`。这样即使您不提供某些详细信息页面的内容，它也不会抛出错误

```
@RenderSection("footerMenu",false) 
```

# build - 连接解决方 案级别的构建事件

> ID：11124346
> 
> 赞同：2
> 
> 时间：2012-06-20T16:49:37.977
> 
> 标签：build, solution, visual-studio-2012

我想在 VS 2011 中为 .net 项目连接解决方​​案级别的预构建/构建后事件。

我的行动包括启动批处理文件。（它适用于任何单个项目，但我希望它用于解决方案构建过程）。

如何做到这一点？

我已经看到这个使用宏的[问题。](https://stackoverflow.com/questions/938864/solution-level-build-events-in-vs-2008)但是宏在 VS 2011 中被删除了。

另一个类似的[问题](https://stackoverflow.com/questions/2295454/visual-studio-solution-wide-pre-build-event)建议 makefile 项目，它特定于 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:33:43.537

[这](http://msdn.microsoft.com/en-us/library/envdte.buildevents%28v=vs.110%29)可能会有所帮助。看看那个。不过，您将为此编写一个包。

# python - wxpython，将变量从一个框架导入到两个不同文件中的另一个框架

> ID：11124349
> 
> 赞同：1
> 
> 时间：2012-06-20T16:49:59.910
> 
> 标签：python, variables, wxpython

我在不同的文件中有两个框架（主框架和设置框架），我想知道是否可以将变量从文件中的框架传递到另一个文件中的另一个框架。当我更改设置框架上的值时，我需要它，以便它可以主动更改主框架。

我尝试导入它们：

主要.py：

```
from sett import settingsframe 
```

从主框架打开设置框架...

设置.py：

```
from main import mainframe 
```

但我收到一个导入错误（如我所想）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:38:23.733

如果两个帧都属于同一个，`wx.App`那么我认为您可以使用[PubSub](http://wiki.wxpython.org/WxLibPubSub)来回发送变量。与`wx.Event`对象不同，我不相信 PubSub 与父/子层次结构相关联。我在我的应用程序中使用 PubSub。虽然我只有一帧，但我确实使用它在面板之间发送变量以及向/从我的数据库包装类发送变量。

该链接有一些示例代码可以帮助您进行操作，以便您查看它是否适合您。

或者，由于两个帧都在同一个循环中，你可以做一些非常骇人听闻的事情，比如让帧相互设置为`self`变量。我建议先尝试 PubSub。

# css - 我真的需要将 css 资源文件放入 GWT 中的 ClientBundle 中吗？

> ID：11124350
> 
> 赞同：1
> 
> 时间：2012-06-20T16:50:03.023
> 
> 标签：css, gwt, path, clientbundle

我想把我所有的资源都放到一个 ClientBundle 中以便于管理。因此，我首先开始着手将单个 css 文件（也是目录下的文件`/war`）放入 ClinetBundle。但是，无法在我的输出中呈现样式，但是如果我只是将 css 文件放在下面`/war`而不使用 css ClientBundle，那么程序就可以正常工作。

下面是我的简单测试用例（使用 ClientBundle） - 我将 css 文件放在`client`包中的同一文件夹中，并删除目录下的 css 文件`/war`：

```
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.resources.client.ClientBundle;
import com.google.gwt.resources.client.CssResource;
import com.google.gwt.resources.client.CssResource.NotStrict;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.RootPanel;
import com.smartgwt.client.widgets.layout.HLayout;
import com.smartgwt.client.widgets.layout.VLayout;

public class Test implements EntryPoint {

    private static final int REPORT_TITLE_HEIGHT = 50;
    public static final MyResources INSTANCE = GWT.create(MyResources.class);

    public interface MyResources extends ClientBundle {
        @NotStrict
        @Source("Test.css")
        CssResource css();
    }

    public void onModuleLoad() {

        INSTANCE.css().ensureInjected();

        Window.enableScrolling(false);
        Window.setMargin("0px");

        VLayout vl = new VLayout();
        vl.setWidth100();
        vl.setHeight100();

        HLayout reportTitleBar = new HLayout();
        reportTitleBar.setHeight(REPORT_TITLE_HEIGHT);
        reportTitleBar.setStyleName("report-title-bar");

        vl.setMembers(reportTitleBar);

        RootPanel.get().add(vl);
    }
} 
```

**无法渲染样式。**

另一个简单的案例 - 不使用 css ClientBundle 并将 css 文件放回文件`/war`夹中。

```
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.RootPanel;
import com.smartgwt.client.widgets.layout.HLayout;
import com.smartgwt.client.widgets.layout.VLayout;

public class Test implements EntryPoint {

    private static final int REPORT_TITLE_HEIGHT = 50;

    public void onModuleLoad() {

        Window.enableScrolling(false);
        Window.setMargin("0px");

        VLayout vl = new VLayout();
        vl.setWidth100();
        vl.setHeight100();

        HLayout reportTitleBar = new HLayout();
        reportTitleBar.setHeight(REPORT_TITLE_HEIGHT);
        reportTitleBar.setStyleName("report-title-bar");

        vl.setMembers(reportTitleBar);

        RootPanel.get().add(vl);
    }
} 
```

**样式可以正确渲染。**

还有我的 Test.css 代码：

```
.report-title-bar {
    /* IE10 Consumer Preview */
    background-image: -ms-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);
    /* Mozilla Firefox */
    background-image: -moz-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);
    /* Opera */
    background-image: -o-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);
    /* Webkit (Safari/Chrome 10) */
    background-image: -webkit-gradient(linear, left top, right bottom, color-stop(0, #FFFFFF), color-stop(1, #00A3EF));
    /* Webkit (Chrome 11+) */
    background-image: -webkit-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%);
} 
```

这里有什么问题，请任何人给我一些启发。赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:20:48.693

如果您将您的 css 文件放入 clientbundle，您的 css 文件必须由 GWT Compilers CSS Parser 解析，它目前基于一个有点被破解的旧版本。（虽然这将在未来改变）

要使解析器正常工作，您需要像这样转义背景值：

```
background-image: literal('-webkit-linear-gradient(top left, #FFFFFF 0%, #00A3EF 100%)'); 
```

还有一些其他的怪癖也需要逃避。查看文档并搜索转义：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

# haskell - Haskell：具有匿名/lambda 函数的函数组合

> ID：11124354
> 
> 赞同：2
> 
> 时间：2012-06-20T16:50:12.487
> 
> 标签：haskell, functional-programming

在准备函数式编程考试时，我在之前的考试中遇到了以下问题：

```
t1 = (reverse . take 2 . words . \ _ -> name)"!" 
```

任务是编写语句的输出。变量名是指学生的名字，写成“Smith, John”的形式。如果我将语句输入 WinHugs，我会得到以下输出：

```
["John","Smith,"] 
```

我了解函数 reverse、take 和 words 在做什么，并且我了解 . 操作员将它们连接起来。我不明白这里发生了什么：

```
\ _ -> name 
```

斜线、下划线和“箭头”是干什么用的？另外，引号中的感叹号有什么作用？（没有？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:52:38.303

它是一个 lambda 函数，它丢弃其（唯一）参数（即“！”）并产生`name`.

作为另一个 lambda 示例，以下将是一个将其参数平方的 lambda 函数：

```
\x -> x * x 
```

`\`是用于引入 lambda 函数的符号。

`_`意思是“我们不关心谁的名字的变量” 。

将`->`lambda 函数的参数与用于指定其结果的表达式分开。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T16:54:32.763

您所看到的是一个匿名函数或 lambda 函数（该名称来自 lambda 演算）。反斜杠告诉您正在启动该功能。下划线表示该函数接受一个参数并忽略它。箭头从参数列表指向结果 - 在这种情况下，它最终会忽略其参数并返回名称。本质上`\_ -> name`是一样的`const name`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T16:53:13.280

一个常量匿名函数：无论哪个参数， return `name`。

Haskell 的 lambda 表达式（即匿名函数）以这种形式出现：

```
\x -> f x 
```

where`x`是一个参数，以及`f x`使用此参数的表达式。特殊变量`_`匹配任何内容并将其视为不重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T16:57:46.770

“斜线”是 lambda[函数](http://www.haskell.org/tutorial/functions.html)的一部分，下划线是模式中使用的“通配符”（它被丢弃）。箭头是 lambda 函数的另一部分。无论输入如何，该函数`\ _ -> name`都会返回名称，因此“！” 除了为函数提供（未使用的）输入之外什么都不做。

# php - 有没有办法提交一个表格形式，每行有两个输入作为列表？

> ID：11124357
> 
> 赞同：-1
> 
> 时间：2012-06-20T16:50:23.827
> 
> 标签：php, codeigniter

我有这个表格：

```
 <tbody>
    <tr>
     <th>ID</th>
     <th>Name</th>
     <th>Birthdate</th>
     <th><input type="text" autofocus="autofocus" name="textinput1"/></th>
     <th><input type="checkbox" name="checkinput[]" value="1"/></th>
    </tr>
    <tr>
     <th>ID</th>
     <th>Name</th>
     <th>Birthdate</th>
     <th><input type="text" autofocus="autofocus" name="textinput2"/></th>
     <th><input type="checkbox" name="checkinput[]" value="1"/></th>
    </tr>
    (...and so on...)
  </tbody> 
```

当我点击提交按钮时，有没有办法发布数据是数组类型，每个索引都有复选框值和文本输入？这样我只需要迭代数组并为表单中的每一行检查数据库中的相应行并更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:56:50.697

将文本输入框制作成数组，并将数组键的值放入 HTML：

```
<th><input type="text" autofocus="autofocus" name="textinput[1]"/></th>
<th><input type="checkbox" name="checkinput[]" value="1"/></th> 
```

然后当你迭代时，你会做这样的事情：

```
$input = is_array( $_POST['textinput']) ? $_POST['textinput'] : array();
foreach( $input as $checkbox_value => $text_input_value)
     echo $checkbox_value . ' ' . $text_input_value; 
```

请注意，这不会告诉您复选框是否被选中，因为只有选中的复选框会从浏览器发送到服务器。为此，请修改复选框以包含数组键：

```
<th><input type="checkbox" name="checkinput[1]" value="1"/></th> 
```

然后，将`foreach`循环更改为：

```
foreach( $input as $checkbox_value => $text_input_value) {
     echo $checkbox_value . ' ' . $text_input_value;
     $checked = (isset( $_POST['checkinput'][$checkbox_value])) ? 'checked' : 'not checked';
     echo "\nThe checkbox was $checked\n";
} 
```

# ruby-on-rails - 无模型控制器的 CanCan 数据库功能失败

> ID：11124359
> 
> 赞同：0
> 
> 时间：2012-06-20T16:50:26.820
> 
> 标签：ruby-on-rails, cancan

要么我遗漏了一些东西，要么不理解其他帖子/说明。我正在尝试使用标准模型和无模型控制器来实现基于数据库的能力。在数据库中，我有：

```
| action_name | object_type             |
|:index       |Tag                      |
|:index       |AssetDashboardController | 
```

标记可以正常工作... AssetDashboardController 作为类而不是符号传递，因此失败`can`。

Rails 控制台尝试使用字符串和常量化：

```
1.9.3p194 :017 > "AssetDashboardController".constantize
 => AssetDashboardController 
1.9.3p194 :018 > "Tag".constantize
 => Tag(id: integer, tag_unique: string, room_monitor_id: integer, star_id: integer, map_id: integer, tracked_type_id: integer, tracked_object_id: integer, x: integer, y: integer, created_at: datetime, updated_at: datetime) 
1.9.3p194 :019 > 
```

“AssetDashboard”代替数据库中的“AssetDashboardController”获取`NameError: uninitialized constant AssetDashboard`，“asset_dashboard”代替“AssetDashboardController”获取`NameError: wrong constant name asset_dashboard`

能力.rb：

```
 def initialize(user)
    user ||= User.new #in case user is not passed there is a blank user to validate against

    if user.is_implementer?
      can :manage, :all
    elsif user.user_permissions.exists?
      user.user_permissions.each do |user_permission|
        can user_permission.permission.action_name.to_sym, user_permission.permission.object_type.constantize
      end
    elsif !user.role.nil?
      user.role.default_role_permission.each do |role_permission|
        can role_permission.permission.action_name.to_sym, role_permission.permission.object_type.constantize
      end
    else
      can :read, [Asset, Patient, StaffMember, AssetDashboardController, PatientDashboardController, DashboardController]
    end
  end
end 
```

AssetDashboardController.rb

```
class AssetDashboardController < ApplicationController
  authorize_resource :class => false

  def index

  end

end 
```

如果我把它放在 Ability.rb 中： `can [:show, :index], :asset_dashboard` 它工作正常。

如果我可以添加更多内容，请告诉我。

*RVM 上的 Rails 3.0.13、Cancan 1.67、Ruby 1.9.3p194*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:01:03.407

`can [:show, :index], :asset_dashboard`

看起来不错，因为您正在批准控制器中可访问的操作。 我相信是典型意义上的资源，即模型支持`can :read`。`can :manage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:38:17.707

我最终做了几件事。我设置了一个数据库字段，然后在ability.rb中我这样做了：

```
can user_permission.permission.action_name.to_sym,user_permission.permission.no_model_permission? ? user_permission.permission.object_type.to_sym : user_permission.permission.object_type.constantize 
```

如果`no_model_permission`为假，我在数据库中的 object_type 上使用 constantize 方法。如果没有，我使用 to_sym。

对于非模型 object_types，我必须对 object_type 使用“asset_dashboard”而不是“AssetDashboardController”

有点hacky，但我想不出更优雅的解决方案

# jquery - 如何将主干集合包装到 JSON 对象中？

> ID：11124362
> 
> 赞同：3
> 
> 时间：2012-06-20T16:50:49.330
> 
> 标签：jquery, json, backbone.js

我已经扩展了 Backbone Collection 类以包含一个“保存”方法，它本质上是一个同步代理。每当执行“保存”时，就会将一组对象提交到后端。但是，后端目前的结构不能直接处理集合，它需要对象。有没有人对我如何将这个集合“包装”在一个对象中有任何建议？

我试过了：

```
var objectCollection = {};
objectCollection['key'] = backboneCollection.models; 
```

但是上面的结果是“*模型没有 toJSON 方法*”错误——因为我只是代理同步。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:15:05.460

要提供自定义格式`Backbone.sync`，您必须将数据作为 JSON 字符串传递并提供正确的`contentType`. 像这样的东西：

```
var M=Backbone.Collection.extend({
    url: '/echo/json/',

    save: function() {
        var data={}, opts= {};
        data.key=this.toJSON();

        opts.contentType = 'application/json';
        opts.data = JSON.stringify(data);

        Backbone.sync.call(this,'update',this, opts);
    }
}); 
```

还有一个 Fiddle [http://jsfiddle.net/xx4pr/](http://jsfiddle.net/xx4pr/)（检查你的控制台查看请求）

# nginx - nginx proxy_pass 动态目的地

> ID：11124366
> 
> 赞同：1
> 
> 时间：2012-06-20T16:51:07.960
> 
> 标签：nginx

是否可以将 nginx 配置为查询服务（不是 DNS）以根据当前请求的 URI 确定 proxy_pass 目标？

例如：

1.  客户端请求[http://somesite.tld/somepage](http://somesite.tld/somepage)，需要代理。
2.  nginx 连接到解析服务并发送用于确定代理目的地的请求 URI。
3.  解析服务响应，提供目的地的主机名。
4.  客户端的请求被重定向到给定的目的地。

如果这不受支持，有什么好方法可以做到这一点？我可以将 proxy_pass 传递给解析器+代理，但更愿意让 nginx 直接处理到目的地的代理。请注意，需要查询解析器，因为每个 URI 的目标可能会更改。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:00:16.607

我看不到实现您所要求的方法。

但是，如果您只是想将请求参数映射到主机名（并且它们不会发生太大变化），那么您可能可以使用 Nginx 的[map 模块](http://wiki.nginx.org/HttpMapModule)。

[您也许还可以使用mod_lua](http://wiki.nginx.org/HttpLuaModule)做一些事情，但它可能会非常骇人听闻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:36:33.667

盒子完全支持这一点。在 *proxy_pass* 指令中使用域名。例如：

```
proxy_pass http://yourproxy:port; 
```

之后，您可以根据需要配置 DNS 并更改您的*代理*地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:41:05.660

@Pavel 你有机会按照描述配置 nginx 吗？我有一个类似的任务：在代理请求之前，必须定义哪个服务器可以处理它。到目前为止，我只看到两种方法可以做到这一点：要么为 nginx 实现一个自定义模块（查看如何完成“负载平衡”的来源），要么使用应用程序服务器并组合一个将执行转发的应用程序的请求。

后一种方法似乎更简单，但我不确定性能。

谢谢。

# c++ - 创建 __stdcall 的映射

> ID：11124367
> 
> 赞同：2
> 
> 时间：2012-06-20T16:51:13.420
> 
> 标签：c++, types, function-pointers, stdcall

我正在尝试使用 __stdcall 创建函数名称和函数指针的映射。以下是我目前获取函数指针的方式：

```
typedef int (CALLBACK* InitializeDLL)(int,int);
InitializeDLL initializeDLL = (InitializeDLL)GetProcAddress(hInstanceLibrary, "InitializeDLL"); 
```

现在我的地图：

```
map<string, int *__stdcall> mapInt;
mapInt["InitializeDLL"] = initializeDLL; //throws error for "InitializeDLL cannot be assigned to entity of type int*" 
```

该错误正是我所期望的，但我需要在 __stdcall 前面添加一个明显的类型。如果我删除前面的“int”，那么它会抱怨：

```
Error: expected a type specifier 
```

如果我仅在前面包含“int”的地图对象创建后尝试编译它，则会引发错误：

```
error C2059: syntax error : '>' 
```

这对我来说没有多大意义。那么使用 __stdcall 作为地图类型的正确方法是什么？在它前面添加 int 对我来说似乎很可疑，但如果我不添加它，它就会抱怨它需要指定类型。

此外，如果这令人困惑，CALLBACK 是 __stdcall 的#define。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:53:32.517

您使用`__stdcall`的是一种类型，但它不是一种类型。您需要在地图定义中使用您的函数指针类型。

```
map<string, InitializeDLL> mapInt; 
```

我不确定您为什么首先尝试做其他事情，因为您已经在其他地方使用过这种类型，难道不是很明显这里也需要它吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:12:46.867

函数指针类型不限于单个函数。例如，您的`InitializeDLL`函数指针类型可以保存指向具有此签名的任何函数的指针：`int foo(int,int)`.

也许`CallbackFunction`该 typedef 是一个更好的名称，因为它包含所有具有可用于回调的签名的函数：

```
typedef int (CALLBACK* CallbackFunction)(int,int);
CallbackFunction initializeDLL =
    (InitializeDLL)GetProcAddress(hInstanceLibrary, "InitializeDLL");
map<string, CallbackFunction> mapInt;
mapInt["InitializeDLL"] = initializeDLL; 
```

* * *

有更通用的方法来处理函数（甚至是成员函数）。如果你有能力/愿意使用新的 C++11 特性，你可以使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)and [`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind). 如果没有，那么您可以使用[boost::function](http://www.boost.org/doc/libs/release/doc/html/function.html)和[boost::bind](http://www.boost.org/doc/libs/release/libs/bind/bind.html)。这些工具的 Boost 和 C++11 版本的使用方式完全相同。Boost 文档将比 cppreference 更有帮助。

如果您向我们展示您打算如何调用地图中的回调函数（包括函数签名不同的情况），我也许可以向您展示有关如何使用`function`和`bind`用于您的用例的示例。

* * *

您可能会考虑让所有命令回调具有相同的函数签名，然后让每个回调负责提取完成工作所需的任何参数。包含命令参数的对象可以作为参数传递给回调函数。

[`std::vector<boost::any>`](http://www.boost.org/doc/libs/release/doc/html/any.html)您还可以考虑以或的形式将参数列表传递给回调函数[`std::vector<boost::variant>`](http://www.boost.org/doc/libs/release/doc/html/variant.html)。然后，回调函数将每个`boost::any`或转换`boost::variant`为与该特定参数关联的特定类型。如果命令参数类型是简单的内置类型，您甚至可以使用`std:vector<UnionOfPossibleParameterTypes>`，其中`UnionOfPossibleParameterTypes`是普通的旧 C 样式`union`。

# android - 如何使用特定选项卡启动活动？

> ID：11124372
> 
> 赞同：6
> 
> 时间：2012-06-20T16:51:33.530
> 
> 标签：android, android-tabhost, android-tabactivity, android-tabs

我浏览了许多示例、问题和教程，但从未见过带有特定选项卡的活动启动（启动新意图）。我知道可以`.setCurrentTab`用来切换到一个选项卡，但这只能从父活动选项卡内部完成。如何从不同的活动启动一个活动中包含的特定选项卡？可能吗？如果是这样，那怎么办？

在我的代码中，在标准活动启动用户显示第一个选项卡，但我希望他转到第四个选项卡，以防他从另一个活动重定向。我的 TabHost 代码（MyTabActivity）：

```
int tabIndex = 0;

          mTabHost.addTab(mTabHost.newTabSpec("top10").setIndicator("Top 10").setContent(R.id.Top_10));
          mTabHost.addTab(mTabHost.newTabSpec("billable").setIndicator("Billable").setContent(R.id.Billable));
          mTabHost.addTab(mTabHost.newTabSpec("product").setIndicator("Product").setContent(R.id.Product));
          mTabHost.addTab(mTabHost.newTabSpec("regular").setIndicator("Regular").setContent(R.id.General));

          mTabHost.setCurrentTab(tabIndex); 
```

现在在另一个活动中：

```
public void gotoTab() {
//This will take me to the first tab
Intent i = new Intent(this, MyTabActivity.class);
startActivity(i);
finish();
//How to I make it take me to the fourth tab?
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T17:01:29.577

`setCurrentTab`您需要在新活动的构造函数中自己处理它。

调用时，您应该在意图中添加其他值 -

```
Intent i = new Intent(this, MyTabActivity.class);
i.putExtra("FirstTab", 4); 
```

在 MyTabActivity 的构造函数中 -

```
Intent i = getIntent();
int tabToOpen = i.getIntExtra("FirstTab", -1);
if (tabToOpen!=-1) {
    // Open the right tab
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T13:28:57.883

用你的标签位置试试这个

Intent intent = new Intent(MyActivity.this, TabScreenActivity.class); intent.setFlags（Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK）；intent.putExtra(ConstantString.ViewTab,1); 开始活动（意图）；

在 TabScreenActivity 的构造函数中

如果（getIntent（）！= null）{

```
 tabPosition = getIntent().getIntExtra(ConstantString.ViewTab, tabPosition);

        if (tabPosition == 1) {
            new Handler().postDelayed(new Runnable() {
                @Override
                public void run() {
                    viewPager.setCurrentItem(1, true);
                }
            }, 1000);
        } else {
            viewPager.setCurrentItem(0, true);
        }

    } else {
        viewPager.setCurrentItem(0, true);
    } 
```

# android - Android：将 TabHost 与以编程方式创建的视图一起使用

> ID：11124376
> 
> 赞同：1
> 
> 时间：2012-06-20T16:51:48.020
> 
> 标签：android, user-interface

我想创建选项卡来显示我通过代码创建的某些视图。现在我可以将视图传递给 TabHost，但只能通过 id。

所以我尝试为我以编程方式创建的视图分配一些随机 id，比如 1001 -

```
TabHost th = getTabHost();
View v=getMyView(); v.setId(1001);
th.addTab(th.newTabSpec("tab1").setIndicator("Monthly").setContent(v.getId())); 
```

当我运行它并显示没有视图编号 1001 的消息时，我得到一个强制关闭。

有没有其他方法可以在 TabHost 或选项卡式界面中使用我自己生成的视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:04:41.777

您需要使用采用[TabHost.TabContentFactory](http://developer.android.com/reference/android/widget/TabHost.TabContentFactory.html)[`setContent()`](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setContent%28android.widget.TabHost.TabContentFactory%29)的重载方法版本。

```
th.addTab(th.newTabSpec("tab1")
    .setIndicator("Monthly")
    .setContent(new TabHost.TabContentFactory() {
        @Override
        public View createTabContent(String tag) {
            if (tag.equals("tab1")) {
                return getMyView();
            }
            return null;
        })); 
```

# hadoop - 如何检查映射器的输入大小（以字节为单位）？

> ID：11124381
> 
> 赞同：1
> 
> 时间：2012-06-20T16:52:15.813
> 
> 标签：hadoop, mapreduce

我注意到在 500 个映射器中，完成时间差几乎是 3 倍。

当我检查日志时（通过 JobTracker Web 界面），我发现差异主要在于第一次溢出时间（“Finished splash 0”）。

这似乎意味着每个映射器的输入文件大小差异并不是一个真正的因素。可能不同节点之间的性能差异？欢迎任何见解/评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:57:25.227

这实际上取决于您的映射器正在做什么来调查差异。您必须根据地图作业功能以及涉及的 I/O 和处理进行调查。

有三个问题会导致映射器的不同性能差异。

1.  本地化但依赖于节点的文件 I/O。不同的节点类型可以表现出不同的性能特征。
2.  网络 I/O ：如果您的映射器从其他地方获取数据（例如：从数据库获取数据的 Sqoop 作业），那么这是一个更重要的问题，并且通常随着映射器在不同时间执行具有不同网络特性而变化。
3.  计算密集型作业（映射器性能）：通常应该类似地影响所有映射器，但仍然依赖于节点。

此外，如果您从命令行执行作业，您应该会看到与此类似的输出（对于网络 I/O）

```
mapred.JobClient:     SLOTS_MILLIS_MAPS=2958530
mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
mapred.JobClient:     Launched map tasks=1
mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
mapred.JobClient:   FileSystemCounters
mapred.JobClient:     HDFS_BYTES_READ=87
mapred.JobClient:     FILE_BYTES_WRITTEN=58294
mapred.JobClient:     HDFS_BYTES_WRITTEN=248301
mapred.JobClient:   Map-Reduce Framework
mapred.JobClient:     Map input records=1679
mapred.JobClient:     Physical memory (bytes) snapshot=267583488
mapred.JobClient:     Spilled Records=0
mapred.JobClient:     CPU time spent (ms)=2580
mapred.JobClient:     Total committed heap usage (bytes)=158334976
mapred.JobClient:     Virtual memory (bytes) snapshot=927236096
mapred.JobClient:     Map output records=1679
mapred.JobClient:     SPLIT_RAW_BYTES=87
mapreduce.ImportJobBase: Transferred 242.4814 KB in 2,964.2976 seconds (83.7639 bytes/sec)
mapreduce.ImportJobBase: Retrieved 1679 records. 
```

您可以从处理和写入文件的数据以及传输时间中看到。

[编辑：]

有可用的基准测试可以帮助您检查 Hadoop 集群特征：

1.  测试DFSIO
2.  MRBench

# android - 虽然我有权限但无法连接到互联网

> ID：11124382
> 
> 赞同：1
> 
> 时间：2012-06-20T16:52:20.190
> 
> 标签：android, permissions, webview

我正在尝试制作浏览器应用程序，但问题是它无法连接到互联网

这是一个多选项卡，所以这些是代码：

主要活动：

```
public class TabTestActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TabHost host=getTabHost();
        host.addTab(host.newTabSpec("two")
                .setIndicator("facebook")
                .setContent(new Intent(this,facebrowser.class)));
        host.addTab(host.newTabSpec("one")
                .setIndicator("Google")
                .setContent(new Intent(this,googlebrowser.class)));

    }
} 
```

tab1 活动：

```
public class facebrowser extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        WebView browse = new WebView(this);
        setContentView(browse);
        browse.loadUrl("http:\\www.facebook.com");
    }
} 
```

tab2 活动：

```
public class googlebrowser extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        WebView browse = new WebView(this);
        setContentView(browse);
        browse.loadUrl("http:\\www.google.com");
    }
} 
```

xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />
    </LinearLayout>
</TabHost> 
```

显现 ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.x.TabBrowse"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TabTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="googlebrowser" android:label="name">

        </activity>
        <activity android:name="facebrowser" android:label="name"></activity>
    </application>
</manifest> 
```

页面告诉我：

> 网页无法显示
> 
> http://www.facebook.com 上的网页可能暂时关闭，或者它可能已永久移动到新的网址。
> 
> 以下是一些建议：
> 
> *   检查以确保您的设备具有信号和数据连接。
> *   稍后重新载入此网页。
> 
> 查看来自 Google 的网页缓存副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:10:44.273

而不是 browse.loadUrl("http:\\www.facebook.com"); 使用browse.loadUrl("http://www.facebook.com");

那应该工作

对于您的第二个问题：您需要制作一个 webviewclient

```
public class googlebrowser extends Activity{

    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return false;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        WebView browse = new WebView(this);
        setContentView(browse);

        browse.setWebViewClient(new HelloWebViewClient());

        browse.loadUrl("http://www.google.com");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:58:30.997

你是用模拟器测试这一切吗？这可能没有互联网连接。这是一个有点普遍的问题。请参阅此处的其他 Stackoverflow 帖子 (http://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)，这可能有助于您进行故障排除。

# workflow - Workflow Foundation 4，执行 Workflow 的最佳方式

> ID：11124384
> 
> 赞同：3
> 
> 时间：2012-06-20T16:52:27.397
> 
> 标签：workflow, workflow-foundation-4, workflowservice

在问一个问题之前，在你们因为有几个类似的问题而生气之前，我想解释一下什么是项目要求。你会看到这个问题与所有其他问题不同。

*   用户将使用 ReHosted WPF 应用程序创建工作流，并将 xaml 文件上传到我们将提供的 Web 应用程序。
*   启动工作流执行的入口点位于该 Web 应用程序中。他们可以从自己的应用程序中使用 UI 或使用 API 功能。
*   工作流程将长期运行。

我知道托管的不同可能性。

最简单的方法是将其托管**在 ASP.NET Web 应用程序**中，但由于我们不知道用户将上传什么样的工作流，IIS AppDomain 回收可能会破坏工作流线程的执行。

**WCF 工作流服务**看起来不错，但用户将上传自己的 xaml 工作流定义这一事实使事情变得更加复杂。看起来我们必须创建类似*核心*工作流的东西，公开为 WCF 服务，并且该工作流将加载并执行内部工作流（xaml 客户上传）。不确定在这种情况下如何将 in 参数传递给内部工作流。

第三种选择，也是我认为最好的选择，是在**Windows Service**中托管工作流执行。Web 应用程序和窗口服务之间的通信可以通过 MSMQ。此解决方案的缺点可能是用于确保 web 应用程序和 win 服务之间的良好通信的 boillerplate 代码。

我错过了更好的解决方案吗？如果您需要更多详细信息，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:56:46.493

我有类似的要求，并与“问题解决者”进行了长时间的讨论。

[WF4.0 哪个架构更好？](https://stackoverflow.com/questions/10022636/which-one-is-better-architecture-for-the-wf4-0)

现在我的结论是将 Workflow 开发为托管在 IIS 上的工作流服务。

您可以遵循这两种方法。

1.  将工作流需求划分为更小的活动，它们可以是独立的 XAML 活动，并在工作流服务 (xamlx) 上创建工作流拖放。在需要时将这些与 InArgument 和 outargument 和相关上下文相关联。
2.  在数据库中创建和存储工作流并动态加载它们。优秀的链接——http [://blogs.msdn.com/b/appfabric/archive/2011/06/16/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric。 aspx](http://blogs.msdn.com/b/appfabric/archive/2011/06/16/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric.aspx)

# php - mod_rewrite 添加 .php 扩展名

> ID：11124386
> 
> 赞同：5
> 
> 时间：2012-06-20T16:52:39.573
> 
> 标签：php, apache, .htaccess

我的 .htaccess 文件如下：

```
Options -Multiviews
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php 
```

我遇到的问题是，当我尝试在没有 www 的情况下访问我的网站时。前缀，.php 扩展名被添加到地址，这通常会导致问题。例如，如果我尝试使用地址 example.com 访问我的主页，该地址将转换为 www.example.com/.php。我要万维网。要添加，但最后添加的 .php 扩展名只会导致错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:03:06.803

`RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]`

去掉 中的 L `[R=301,L]`，表示“Last”，表示“在此之后停止处理 RewriteRules”。

301 也意味着“永久重定向”。在这种情况下，您的浏览器会记住永久重定向。您是否有可能拥有一个版本的重写规则，转到您的 URL，然后更改它？清除缓存或尝试其他浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:05:08.820

文件第 4 行的“L”标志表示“最后一个”，即不再处理任何规则。尝试删除 L。

# search - Lucene Boost Confusion - 在文档中的字段或查询解析器上设置提升？

> ID：11124387
> 
> 赞同：3
> 
> 时间：2012-06-20T16:52:39.793
> 
> 标签：search, lucene, lucene.net

我对 Lucene.NET API 有点困惑，但是，这可能只是我的一个误解，因为我还在学习。

创建文档时，您将字段添加到该文档。一个例子：

```
//Create the field.
field = new Field(
    fieldName,
    fieldValue,
    isFieldStorable ? Field.Store.YES : Field.Store.NO,
    Field.Index.ANALYZED
);

//If a boost value was supplied, then set the boost for this field.
if (boostValue != null) {
    field.SetBoost((float)boostValue);
} 
```

这正确地设置了场上的提升。然后将该字段添加到文档中，并将文档添加到索引编写器中。

但是，在球场上设置提升似乎并不重要。这有什么不同？因为，当我创建查询时，我需要调用类似：

```
multiFieldQueryParser = new MultiFieldQueryParser(
    Lucene.Net.Util.Version.LUCENE_29,
    fieldsToSearch.ToArray(),
    analyzer
); 
```

创建一个 MultiFieldQueryParser 的实例允许我提供一个提升字典，但是，那么在字段上设置提升有什么意义呢？查询解析器对我的文档和其中包含的字段一无所知（因此，对我的字段提升一无所知）。

这只是旧代码留在库中的错误吗？或者，如果您的代码结构不同，那么在现场设置提升实际上会产生影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:08:38.980

Lucene 允许索引时间提升（在文档和字段级别）和查询时间提升。

当您创建文档并在字段级别添加提升时，您正在使用索引时间提升。

MultiFieldQUeryParser 的 Boost 参数用于查询时间提升。如果要使用索引时间提升值，则无需传递此提升值。该提升值隐含在分数计算中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:09:54.680

我使用与 Ek0nomik 相同的逻辑，并为扩展查询获得恒定分数。

我`SetMultiTermRewriteMethod(CORING_BOOLEAN_QUERY_REWRITE)`在 MultiFieldParser 中使用并在索引中搜索两个字段。第一个字段的 boost-value=2，第二个字段的 default-value=1。
索引文档后，我可以在索引中看到正确的规范值（使用卢克）。在使用不同字段中的搜索词搜索索引时，我得到所有结果的相同相关性。
我认为 boost-value 为 2 的字段应该有更高的相关性。我在思考正确的评分结果时是否有错误？

在调试模式下，我在解析搜索词后看不到任何用于对结果进行评分的语法。它看起来像这样：`...description:*test* title:*test* path:*test*...`。搜索查询中
不应该有任何评分值吗？`...description:*test* title:*test*^2 path:*test*...`

# matlab - 将 3 维 matlab 矩阵转换为 3 维列向量

> ID：11124388
> 
> 赞同：2
> 
> 时间：2012-06-20T16:52:41.483
> 
> 标签：matlab, vector, matrix, resize, reshape

嗨，我有一个 3 维矩阵，我试图将行转换为列，然后堆叠所有列以生成一个具有三个维度的向量。

因此，第 1 行变为第 1 列，第 2 行变为第 2 列，依此类推。然后，第 2 列在第 1 列下，第 3 列在第 1 列和第 2 列下。我还需要保持尺寸相同

下面的PV_power_output(:,:,K)是一个365 x 24 x 27的矩阵，按照上面提到的定位顺序应该变成一个8760x1的向量

我正在为这个编码而苦苦挣扎

到目前为止我有

```
PV_power_output(:,:,K) = real((Vmpp_(:,:,K).*Impp_(:,:,K))*inverter_efficiency)/1000; 

 permdims = 1 : ndims(PV_power_output); 
out = reshape(permute(PV_power_output, permdims),8760,1,[]); 
```

但是，在检查不同位置的元素时，上述内容是不正确的，因此任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:23.710

也许您的置换是错误的，因为就目前而言它没有做任何事情：

```
permute(PV_power_output, 1:3) == PV_power_output 
```

也许你需要：

```
permute(PV_power_output, [2 1 3]) 
```

一般来说，我经常发现 reshape 很难遵循（尤其是当您在三周后返回代码时），因此如果性能不重要，那么您可以考虑在此处使用循环来代替您的 3d 矩阵。

您可能会考虑使用元胞数组而不是 3d 矩阵，然后您的重塑会更加直接：

```
PV_power_output{K} = real((Vmpp_(:,:,K).*Impp_(:,:,K))*inverter_efficiency)/1000;

vector = reshape(PV_power_output{K},8760,1); 
```

* * *

**更新：**

也许尝试重塑为 2D：

```
out = reshape(permute(PV_power_output, [2 1 3]), 8760,27); 
```

然后您可以访问第 K 列向量：

```
vector_K = out(:,K) 
```

# android - 在我的活动开始之前需要一个警报对话框

> ID：11124389
> 
> 赞同：0
> 
> 时间：2012-06-20T16:52:45.413
> 
> 标签：android, android-intent, alert

这就是我现在所拥有的。它正在检查是否安装了 GoLauncher，如果是，它会将其带到 go 启动器主屏幕。如果未安装，则需要用户到市场才能安装。

我需要的是，如果它已经安装，我需要弹出一个警告框，向用户展示如何安装主题。用户点击 OK 后，它应该转到 GoLaunhcer 主屏幕

```
gosetting = (ImageButton) findViewById(R.id.gosetting);
    gosetting.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            try {
                Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.setComponent(new ComponentName("com.gau.go.launcherex","com.jiubang.ggheart.apps.desks.diy.GoLauncher"));
                startActivity(intent);
            } 
            catch (ActivityNotFoundException e) {
                AlertDialog.Builder alert = new AlertDialog.Builder(HelperActivity.this);
                alert.setTitle("GO Not Found");
                alert.setMessage("Do you want to vist the GO Launcher Android Market page?");
                alert.setIcon(R.drawable.go_icon2);
                alert.setPositiveButton("Yes",
                 new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int id) {
                      final Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse("market://details?id=com.gau.go.launcherex"));
                      startActivity(intent);
                  }
                 });
                alert.setNegativeButton("No",
                 new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int id) {
                      return;
                  }
                 });

                alert.show();

            } catch (Exception go) {
                go.printStackTrace();
            }
        }

    }); 
```

添加了您更新的代码，现在收到此错误..！[1](http://i.stack.imgur.com/OHtil.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:02:53.703

看看[Detect an application is installed or not的回答？](https://stackoverflow.com/questions/3922606/detect-an-application-is-installed-or-not)这解释了如何查询 PackageManager 以了解您的应用程序是否已安装。

**编辑：添加代码**

```
public void onClick(View v) {
    if (isAppInstalled("com.gau.go.launcherex")) {
        // Show dialog about installing the theme
        AlertDialog.Builder alert = new AlertDialog.Builder(HelperActivity.this);
        alert.setTitle("GO Theme installer");
        alert.setMessage("You need to install the theme like this...");
        alert.setIcon(R.drawable.go_icon2);
        alert.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                  // Here actually start the GoLauncher
                  final Intent intent = new Intent(Intent.ACTION_MAIN);
                  intent.setComponent(new ComponentName("com.gau.go.launcherex","com.jiubang.ggheart.apps.desks.diy.GoLauncher"));
                  startActivity(intent);
              }
             });
        alert.show();
    } else {
        // Here you put up the dialog about visitng the market page
        AlertDialog.Builder alert = ...
    }
}

private boolean isAppInstalled(String uri) {
    PackageManager pm = getPackageManager();
    boolean installed = false;
    try {
       pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
       installed = true;
    } catch (PackageManager.NameNotFoundException e) {
       installed = false;
    }
    return installed;
} 
```

# c# - 渲染 2 个 ListBox，一个包含字符串，一个包含相同字符串的长度

> ID：11124390
> 
> 赞同：0
> 
> 时间：2012-06-20T16:52:49.673
> 
> 标签：c#, winforms

```
public partial class Form1 : Form
{
    string[] names = new string [20]                  

  {"John","Susy","Obedia","Saul","Abram","Lincoln","Abraham","Eli","Kain","Abel",                                    

   "Will","Smitty","Scott","Julie","Ramona","Melissa","Todd","Lilly","Naomi","Leland"};

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //Question #1 Pop Names in listbox
        for (int i = 0; i < names.Length; i++)
        {
            listBox1.Items.Add(names[i]);
        }
    } 
```

这就是我填充我的方式`listbox1`，但现在`listbox2`我想显示每个名称的长度。我想知道如何在 C# 代码中找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:56:04.507

您可以使用以下代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    //Question #1 Pop Names in listbox
    for (int i = 0; i < names.Length; i++)
    {
        listBox1.Items.Add(names[i]);
        listBox2.Items.Add(names[i].Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:57:00.910

这看起来像家庭作业，所以我不会给出完整的答案。

您想使用[`String.Length`](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)C# 中的属性来获取每个名称的长度。

```
string str = "Michael";
int len = str.Length; 
```

现在，您可以选择是从`listBox1`自身编译属性，还是获取原始数组并对其进行迭代。

# animation - 使用 Processing 沿斜边为椭圆设置动画

> ID：11124391
> 
> 赞同：0
> 
> 时间：2012-06-20T16:52:51.417
> 
> 标签：animation, processing, trigonometry

我最近才开始涉足处理和动画……这太新了！还有……我的三角很烂。

我有这个代码：

```
 float ballPosX = 10;
    float ballPosY = 10;

    float boxPosX = 400;
    float boxPosY = 500;

    void setup() {
      size(800,600);
      background(0);
    }

    void draw() {
      fill(0, 20);
      rect(0, 0, width, height);

      fill(0, 240, 0);
      rect(boxPosX, boxPosY, 50, 50);

      fill(240, 0, 0);
      smooth();
      ellipse(ballPosX, ballPosY, 15, 15);

    //  stroke(0,0,240);
    //  line(ballPosX, ballPosY, boxPosX, boxPosY);
    //  line(ballPosX, ballPosY, 10, boxPosY);
    //  line(10, boxPosY, boxPosX, boxPosY);
      noStroke();

      //work out a2 + b2 = c2 - Pythagoras
      float a = boxPosX - ballPosX;
      float b = boxPosY - ballPosY;
      float c = sqrt(sq(a) + sq(b));
      println("a: " + a + " b: " + b + " c: " + c);

      //now get the angles
      float C = radians(90.0);
      float B = asin(a/c);
      float A = radians(180) - C - B;
      println("A: " + degrees(A));
      println("B: " + degrees(B));
      println("C: " + degrees(C));

      //lets say b is 10, work out a
      //we have the angles...
      b = 10;
      float sinA = sin(A);
      float sinB = sin(B);
      a = sinA/(sinB/b);
      fill(240, 0, 0);
      smooth();
      ellipse(b, a, 15, 15);

      for(int i = 0; i < 160; i++) {
       b += 5;
       sinA = sin(A);
       sinB = sin(B);
       a = sinA/(sinB/b);
       println("new a:" + a);

       fill(240, 0, 0);
       smooth();
       ellipse(b, a, 15, 15);
     }
   } 
```

基本上我在点 x1,y1 有一个椭圆，在点 x2,y2 有一个矩形。使用直角三角形沿 c 线绘制椭圆。上面的代码工作......或多或少。

这个想法是让许多椭圆从 x=0 开始彼此相邻，并使用相同的方法让它们都收敛在矩形上。

希望这是有道理的！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:33:51.667

线性插值怎么样（已经在 Processing as [lerp()](http://processing.org/reference/lerp_.html)中实现了：

```
float startX,startY,endX,endY;

void setup(){
  size(400,400,P2D);
  smooth();
  noStroke();
  rectMode(CENTER);

  startX = random(10,50);
  startY = random(10,50);
  endX   = height - random(10,50);
  endY   = width  - random(10,50);
}
void draw(){
  background(0);
  //compute our values
  float t = map(mouseX,0,width,0,1);//a value between 0.0 and 1.0 - where on the line we want to be
  float x = lerp(startX,endX,t);//lerp with take care of linear interpolation for us
  float y = lerp(startY,endY,t);
  //draw
  for(float d = 0 ; d <= 1; d+= .05) 
    ellipse(lerp(startX,endX,d),lerp(startY,endY,d),5,5);                                           
  rect(x,y,10,10);
}
void mousePressed(){   setup(); } 
```

```
var startX,startY,endX,endY;

function setup(){
  createCanvas(400,400);
  smooth();
  noStroke();
  rectMode(CENTER);

  startX = random(10,50);
  startY = random(10,50);
  endX   = height - random(10,50);
  endY   = width  - random(10,50);
}
function draw(){
  background(0);
  //compute our values
  var t = constrain(map(mouseX,0,width,0,1),0,1);//a value between 0.0 and 1.0 - where on the line we want to be
  var x = lerp(startX,endX,t);//lerp with take care of linear interpolation for us
  var y = lerp(startY,endY,t);
  //draw
  for(var d = 0 ; d <= 1; d+= .05) 
    ellipse(lerp(startX,endX,d),lerp(startY,endY,d),5,5);                                           
  rect(x,y,10,10);
}
function mousePressed(){   setup(); }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

# sql-server-2012 - SQL Server 2012：恢复数据库备份时出现问题

> ID：11124392
> 
> 赞同：0
> 
> 时间：2012-06-20T16:52:59.747
> 
> 标签：sql-server-2012, database-restore

我尝试运行以下查询来恢复数据库：

```
restore database myDatabase
from disk=
'C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\MSSQL\Backup\myDatabase_backup_2012_06_20.bak' 
with replace, 

move 'myDatabase' to 
'C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\MSSQL\DATA\myDatabase',

move 'Analytics_log' to 
'C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\DATA\myDatabase_log.ldf' 
```

并收到以下错误：

> 消息 5133，级别 16，状态 1，行 1 文件
> “C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\DATA\myDatabase_log.ldf”的目录查找失败，操作系统错误 2（系统找不到指定的文件。）。
> 
> 消息 3156，级别 16，状态 3，第 1 行文件“myDatabase_log”无法还原到“C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\DATA\myDatabase_log.ldf”。
> 使用 WITH MOVE 标识文件的有效位置。

对于第一个错误，SQL Server 似乎找不到 .ldf 文件。但是，它位于该位置，并在我运行`restore filelistonly`.bak 文件时列在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:06:11.167

您确定您的 LDF 文件不应该被复制到： C:\Program Files\Microsoft SQL Server\MSSQL11.SQLSERVER2012\MSSQL\DATA\myDatabase_log.ldf 吗？...请注意，您缺少 MSSQL 子文件夹。我的意思是 LDF 文件路径可能无效。

# redgate - Redgate ANT 性能分析器在分析时似乎陷入了无限循环，即使应用程序从未进入无限循环

> ID：11124394
> 
> 赞同：0
> 
> 时间：2012-06-20T16:53:08.647
> 
> 标签：redgate, red-gate-ants

我使用我的凭据运行 ANT 探查器，将其指向 IIS。当我开始分析时，主页出现了，但是当我点击某个页面时，ANT 似乎陷入了试图分析应用程序的无限循环中。

我可以突出显示当前区域，我看到一个未知方法的 8000 万次点击（这似乎是蚂蚁卡住的地方）

我可以停止 ANTS，导航到该站点和导致蚂蚁卡住的同一页面，一切都很好。我经常看到 ANT 这样做，但从来没有连续 10 次。

通常，我可以重置 IIS，然后重新启动 ANTS 服务和工具，中提琴它将再次开始工作，而不会进入无限循环。

此类问题是否存在已知的错误/解决方法

# .net - 没有安装程序的 Ngen

> ID：11124401
> 
> 赞同：2
> 
> 时间：2012-06-20T16:53:39.737
> 
> 标签：.net, ngen

我以前没有使用 NGen，但现在我需要提高我的 WPF 应用程序的启动性能。据我了解，常见情况是在应用程序安装期间运行 ngen 。但是我的应用程序用于满足公司内部需求并且没有安装程序（它只会使事情复杂化）。

还有其他运行ngen的方法吗？如果我在第一次启动应用程序时这样做怎么办？我需要管理员权限吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:20:33.890

根据[MSDN （](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.100%29.aspx)**备注**下的第一行），您需要管理权限才能运行 ngen。将您的应用程序打包到一个简单的 MSI 中可能会更容易，因为我认为您不能从应用程序内部提升您的权限来运行 ngen。您必须更改清单文件，这会导致您的应用程序每次启动时都需要管理权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T09:39:47.490

如果您的应用程序面向 .NET 4.5 或更高版本并在 Windows 8 或更高版本上运行，那么您可以使用 Auto NGEN。Auto NGEN 是在用户计算机空闲时运行的维护任务。维护任务会自动在“合格”程序集上运行 NGEN。

对于您的方案，您需要将您的应用程序安装到 GAC 中。首次启动应用时，.NET 运行时会生成使用日志并记下您的应用程序集。Auto NGEN 任务只是使用这些日志并为您运行 NGEN。因此，通常您会在维护任务运行完成后获得改进的启动性能。（我认为它通常在凌晨 3 点运行）

有关一些信息，请参阅此链接：http: [//eknowledger.wordpress.com/2012/05/04/clr-4-5-net-framework-kernel-improvements/](http://eknowledger.wordpress.com/2012/05/04/clr-4-5-net-framework-kernel-improvements/)

请注意，就像 NGEN 一样，将程序集安装到 GAC 需要管理员权限。:) 因此，您可能更喜欢创建安装程序并在安装时启用 NGEN，如上述答案中所述。

# java - 在 RMI 中使用 ImageIcon

> ID：11124402
> 
> 赞同：0
> 
> 时间：2012-06-20T16:53:54.020
> 
> 标签：java, rmi, imageicon

好吧，我对 java.swing.ImageIcon 类的实例的行为有一个简单的疑问。

现在是基于RMI Client服务端操作......

假设在***服务器计算机***中存在一个名为**jpg 的文件**。现在使用检索它`A.jpg`

 *```
 // At Server...
           ImageIcon ic = new ImageIcon("C://server_image_folder//A.jpg");
           return ic; 
```

然后在具有该功能的客户端中使用它

```
 // At Client....
           // same variable name used for simplicity....
           System.out.print(ic); 
```

**我们将在这里观察到它在服务器计算机中打印图像文件的 URL。**

*在这里，例如： -* `C:/server_image_folder/A.jpg`

所以我的问题很简单......

```
 Will it cause any trouble since such URL don't exist in client computer ? 
```

***在localhost***这样的情况下无法观察到此类问题，因为它们共享相同的 URL（我相信）。

但是，***当两个程序都在不同的计算机上实现时，情况会怎样***......？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:26:05.257

这不会导致问题，但可能会导致一些混乱。您正在使用的构造函数将单个 arg 视为文件名和描述。该`filename`字段是瞬态的，因此它不是序列化数据的一部分。但是，该`description`字段不是瞬态的，它将成为序列化数据的一部分。由于该`toString`方法将返回`description`非空字段，因此可能会导致您认为文件名也已保留，但事实并非如此。*

# outlook - 如何在 Outlook 中的撰写电子邮件正文（邮件项目）中捕获按键事件？

> ID：11124404
> 
> 赞同：1
> 
> 时间：2012-06-20T16:53:57.940
> 
> 标签：outlook, vsto, add-in, keypress

当用户在邮件正文中键入内容时，我需要捕获**按键事件。**当用户按下`spacebar`前一个单词时，必须从撰写邮件正文中读取。如何在邮件正文的撰写邮件窗口中捕获此**按键事件？**

任何建议或任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:52:35.443

您可以[通过](http://social.msdn.microsoft.com/Forums/is/vsto/thread/3e84cb9f-3423-4874-b24b-8fb9a0f678e5). _ 为此，您[需要访问低级 WIN32 API](https://stackoverflow.com/a/646168/175679)调用，例如.[`Word.Document`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.document.aspx)[`Inspector.WordEditor`](http://msdn.microsoft.com/en-us/library/ff868196.aspx)[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

[这是一篇 MSDN 博客文章，描述了](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)**按键事件**的用法[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)和捕获。

# c# - Ultragrid 子行

> ID：11124405
> 
> 赞同：2
> 
> 时间：2012-06-20T16:53:57.990
> 
> 标签：c#, visual-studio-2010, user-interface, ultrawingrid

我希望能够在加载时显示子行。现在我有它，你必须点击所有行以查看哪些行有子行。如果它们是子行，我希望能够显示子行。我是一个完整的超网格初学者，所以有经验的人可以引导我进入一个大方向吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:23:58.490

请尝试以下代码，以便仅在您有子行时获得指示：

```
 private void ultraGrid1_InitializeLayout(object sender, Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs e)
    {
        e.Layout.Override.ExpansionIndicator = Infragistics.Win.UltraWinGrid.ShowExpansionIndicator.CheckOnDisplay;
    } 
```

如果您希望在加载时扩展这些行，您可以使用以下代码示例：

```
ultraGrid1.Rows.ExpandAll(true); 
```

# java - 在 Java 中创建沙盒插件可扩展应用程序

> ID：11124409
> 
> 赞同：4
> 
> 时间：2012-06-20T16:54:04.400
> 
> 标签：java, security, plugins

[这个问题与这个](https://stackoverflow.com/questions/2104821/implementing-dynamic-plugins-in-java)问题非常相似，但我需要专注于不同的问题。

假设我有一个带有大型数据库（即电影数据库）的应用程序。应用程序的用户应该能够添加她自己的插件并能够运行它们。

场景可能如下所示：

*   启动主应用程序
*   将 stats-plugin.jar 放在 /app/plugins 目录中
*   告诉主应用加载新插件
*   告诉应用列出插件
*   选择一个插件（例如刚刚安装的）并运行它
*   stats-plugin.jar 查询有关电影的数据库并计算恐怖电影的数量，返回计数
*   主应用程序呈现结果

每个插件都可以有几个标准方法（一个通用`Plugin`接口）可以调用，例如`onInitialize`，`onRun`等等。

主应用程序需要保证的是，如果插件崩溃（例如除以 0），主应用程序将保持稳定（例如，将显示错误对话框，但不会自行崩溃）。还应该可以限制执行时间并检查插件正在执行的操作。

这一切都归结为一个沙盒插件环境。最重要的事情是：插件风格的可扩展性和沙盒插件——只允许安全操作（例如读取数据库，但不更新它）。

该插件不必用 Java 编写。它需要以某种方式*执行*……它甚至可以是一个 JavaScript 文件……如果可能的话。

您将如何处理这样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:42:11.600

您应该考虑使用[安全管理器](http://docs.oracle.com/javase/7/docs/technotes/guides/security/permissions.html)，并可能定义一些您自己的权限。在定义策略时，已经有一组常用的权限可供您使用。

请注意，对 RDBMS 的只读访问不太可能在您的 Java 环境范围内。相反，这通常使用具有特定权限的单独 RDBMS 用户来处理。您的框架需要使用该用户名连接到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:43:49.957

可以使用您自己的安全策略文件和您自己的安全管理器来执行类似的操作。基本上，授予您自己的 jar AllPermission 和插件 jar 较少的权限。但是，这样一来，您将无法限制不受信任的小程序可用的操作，因此仍然可以编写一个创建无限循环或分配 100GB RAM 的线程。

为了允许数据库访问但只允许特定操作，您必须提供自己的 API（位于您的受信任的罐子之一中），该 API 将仅提供受信任的操作（例如首先验证 SELECT 语句）并在之后调用 AccessController.doPrivileged 如果它是信任执行操作。由于不受信任的代码可能无法打开套接字连接（除非允许特定主机），因此代码将无法以这种方式与数据库混淆。

但是，正确实现安全管理器可能会很棘手（在实现中经常会发现错误，例如最近在 Batik Squiggle 中），因此使用模拟语言（例如 JavaScript/Rhino）可能更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:54:57.313

您也许可以使用[Java Authentication and Authorization Service](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html)来实现这样的可插入架构。使用 JAAS，您可以执行具有受限访问控制权限的插件。ACL 可以限制打开套接字连接、写入文件、打开数据库连接等，

对于数据库访问，您可以通过 JNDI 数据源提供与插件的数据库连接，并使用只能读取而不能更新数据库的 DB 用户配置数据源。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-20T17:31:46.163

我不认为 java 是运行不受信任插件的合适平台。一旦插件运行，它将能够执行主机程序可以执行的所有操作。

您需要创建自己的抽象层和“安全”操作沙箱，作为主程序的一部分执行。该插件可以提供您解释为程序的数据。你不能让插件运行。

# c - 尝试在 C 中释放结构时的问题

> ID：11124411
> 
> 赞同：0
> 
> 时间：2012-06-20T16:54:18.767
> 
> 标签：c, pointers, struct, free

```
#include<stdio.h>
#include<stdlib.h>
#include<malloc.h>

#include <math.h>
typedef struct label{

int id;
double p,*t,q,c;

int V[45];
struct label *next;
struct label *prev;
struct path *tail;
struct path *head;

  }label;

 typedef struct path{
int i;

struct path *Pperv;
struct path *Pnext;
}path;

void main (){

int i,j,k;
struct label *Current,*FCurrent,*Current2,*Head,*Tail,*FHead,*FTail;
struct path *cur,*test3,*test2,*test1,*path_head,*path_tail;

Head=(struct label*)malloc(1*sizeof(struct label));
Tail=(struct label*)malloc(1*sizeof(struct label));

Head->next=Tail;
Tail->prev=Head;

FHead=(struct label*)malloc(1*sizeof(struct label));
FTail=(struct label*)malloc(1*sizeof(struct label));

FHead->next=FTail;
FTail->prev=FHead;

for (i=0;i<250000;i++)
{
    //printf("%d",i);
    Current=(struct label*)malloc(1*sizeof(struct label));
    Current->t=(double*)malloc(15*sizeof(double));

    Current->head=(struct path*)malloc(1*sizeof(struct path));
    Current->tail=(struct path*)malloc(1*sizeof(struct path));
    Current->head->Pnext=Current->tail;
    Current->tail->Pperv=Current->head;

    for (j=0;j<15;j++)
    {
        test1=(struct path*)malloc(1*sizeof(struct path));

        test1->Pperv=Current->head;
        test1->Pnext=Current->head->Pnext;

        Current->head->Pnext->Pperv=test1;
        Current->head->Pnext=test1;

        test1->i=1;
        Current->t[j]=23123.43;

    }
    if (i % 4!=0)
    {
    Current->next=Tail;
    Current->prev=Tail->prev;
    Tail->prev->next=Current;
    Tail->prev=Current;
    Current->p=54545.323241321;
    }
    else 
    {   

    Current->next=FTail;
    Current->prev=FTail->prev;
    FTail->prev->next=Current;
    FTail->prev=Current;

    }
}

Current=Head->next;
while(Current->next!=Tail)
{   

    Head->next->next->prev=Head;
    Head->next=Head->next->next;

    test1=Current->head->Pnext;
    while(test1!=Current->tail)
        {
            test2=test1;
            test1=test1->Pnext;
            free(test2);

        }

    free(Current->t);
    free(Current->head);
    free(Current->tail);
    free(Current);
    Current=Head->next;
}

Current=FHead->next;
while(Current->next!=FTail)
{   

    FHead->next->next->prev=FHead;
    FHead->next=FHead->next->next;
    k=0;
    test1=Current->head->Pnext;
    while(test1!=Current->tail)
        {

            test2=test1;
            test1=test1->Pnext;
            free(test2);
            k++;

        }

    free(Current->t);
    free(Current->head);
    free(Current->tail);
    free(Current);
    Current=FHead->next;
}

} 
```

我遇到以下问题。这不是我的实际问题，它只是我创建的一个示例，以便更容易查看问题。正如你在这个例子中看到的那样，我有两个结构，一个在另一个里面，这个例子的作用是创建标签类型的新结构，并用指针 FHead 和 FTail 将它们放在列表中 4 次中的 3 次和 1 次列表中的 4 次指针是 Head 和 Tail。问题是，当我尝试释放结构时它没有发生，语法是 100% 正确的，因为当我将所有结构保存在两个列表之一中时，费用函数工作得很好。这导致我在使用指针时出现了问题，不幸的是我是 C 的新手，所以我不太清楚整个指针是如何进行的。因此，如果有人能解释使用指针出了什么问题，以及我应该如何创建这些列表以使 frre 函数正常工作，我将非常感激。先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:21:52.827

您的代码很难阅读，因为您只有一个很长的函数，并且其中发生了很多事情。即使是有经验的 C 也很难阅读，所以对于 C 初学者来说一定很难。如果将此函数拆分为更小的、非常专业的函数，则可能更容易理解和发现错误。

附带说明（即使错误可能不是来自这里，不这样做也是一种非常糟糕的做法）：每次调用 malloc 时，都必须检查它是否失败。Malloc 可能无法给您一些内存，在这种情况下它返回 NULL。例如 ：

```
test1=(struct path*)malloc(1*sizeof(struct path)); 
```

可能变成

```
test1 = (struct path*)malloc(1*sizeof(struct path));
if (test1 == NULL) {
    abort(); /* Makes the program stop abruptly */
} 
```

如果您不检查并得到 NULL 结果，您的程序将出现不稳定的行为；这些错误很难找到。

编辑：正如评论所建议的，更好的风格是

```
test1 = malloc(sizeof(path));
if (test1 == NULL) {
    abort();   /* Or something else that makes sense */
} 
```

# apache - 需要使用虚拟主机中的 apache 代理测试从我的本地主机到外部服务器的 html 页面的登录

> ID：11124416
> 
> 赞同：0
> 
> 时间：2012-06-20T16:54:36.237
> 
> 标签：apache, proxy

我正在尝试在本地计算机上的 html 页面中测试登录表单。登录请求发布到外部 Web 服务器。外部服务器将只接受来自其域的请求。因此，我需要配置 apache 以使来自本地域的请求看起来来自外部服务器的域。我很确定我需要在本地域的虚拟主机配置中使用某种代理指令，但到目前为止我运气不佳。

我启用了 proxy_module 和 proxy_http_module。我在我的虚拟主机配置中使用以下内容。

```
ProxyRequests On
<Proxy>
    Order deny,allow
    Allow from all
</Proxy>
ProxyPass /loginscript https://externalserver.com/loginscript
ProxyPassReverse /loginscript https://externalserver.com/loginscript 
```

使用它时出现 500 服务器错误。错误是“代理：没有协议处理程序对 URL /loginscript 有效。如果您使用的是 mod_proxy 的 DSO 版本，请确保代理子模块包含在使用 LoadModule 的配置中。

我已经检查并加载了所需的模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:09:54.950

1.  关掉`ProxyRequests On`。如果你没有做任何代理限制，这会将你的网络服务器变成一个开放的代理，这是**非常**糟糕的。

2.  您正在制作 SSL 反向代理 (https:)。尝试添加`SSLProxyEngine On`到您的虚拟主机上方`ProxyPass`。查看[mod_ssl](http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxyengine)文档。您可能需要根据您的证书设置一些其他 SSL 代理指令。

# jsf-2 - 在 POST 上呈现的页面缺少 DOCTYPE

> ID：11124420
> 
> 赞同：1
> 
> 时间：2012-06-20T16:54:44.533
> 
> 标签：jsf-2, facelets, cdi, mojarra

我正在经历一种奇怪的行为（至少在我看来）。

当我从包含包含的模板发布帖子时，不知何故缺少 DOCTYPE 和 html-tag。

假设我在 home1.xhtml 上执行 GET，它使用包含 widget.xhtml 的 template1.xhtml。现在我在 home2.xhtml 上做一个 POST。现在共鸣缺少 DOCTYPE 和 html-tag。

如果我

*   直接在 home2.xhtml 上执行 GET 或

*   用包含的内容替换 template1.xhtml 中的包含并执行 POST

DOCTYPE 和 html-tag 按预期在响应中。

home1.xhtml:

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="template1.xhtml">
  <ui:define name="content">

  </ui:define>
</ui:composition> 
```

模板1.xhtml：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" >
<h:head>
</h:head>
<h:body>
  Called with GET
  <ui:include src="widget.xhtml" />
  <h:form>
    <h:commandLink action="#{homeBean2.show}" value="POST" />
  </h:form>
</h:body>
</html> 
```

wigdet.xhtml：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html" >
  <h:form id="someForm">
  </h:form>
</ui:composition> 
```

home2.xhtml:

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="template2.xhtml">
  <ui:define name="content">
    POST 1
  </ui:define>
</ui:composition> 
```

模板2.xhtml：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" >
<h:head>
</h:head>
<h:body>
    template 2
</h:body>
</html> 
```

如何让 DOCTYPE 和 html-tag 显示在呈现的页面中？

任何提示我在这里缺少什么？

强尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:18:19.967

它看起来像一个错误。请参阅[http://java.net/jira/browse/JAVASERVERFACES-2453](http://java.net/jira/browse/JAVASERVERFACES-2453)

# ruby - 依赖破坏超出范围

> ID：11124422
> 
> 赞同：2
> 
> 时间：2012-06-20T16:54:47.520
> 
> 标签：ruby, ruby-on-rails-3, activerecord

好的，所以我有 2 个有`has_many :through`关系的模型：

```
class Server < ActiveRecord::Base
  has_many :services, :through :servers_services, :dependent => :destroy
  has_many :servers_services, :dependent => :destroy

  def destroy!
    options = {:name => self.name, :services => self.services.map { |s| s.attributes }}
    Resque.enqueue(Cluster::DestroyServer, options)
    self.destroy 
  end
end 
```

和

```
class Service
  has_many :servers, :through => :servers_services
  has_many :servers_services
end 
```

它们通过以下方式连接：

```
class ServersService < ActiveRecord::Base
  belongs_to :server
  belongs_to :service
end 
```

Server 模型中的`destroy!`方法以前可以工作，但现在不能正常工作。它应该找到所有`Services`与 关联的`Server`，触发`Resque`任务（有效），然后销毁`Server`及其关联的`Services`。

然而，正在发生的事情是它破坏了所有`ServerServices`（字面意思是整个表），而不仅仅是与`Server`对象关联的那些，它破坏了所有的关联。我在这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:40:50.590

This was being caused by a broken `postgresql` sequence on the ID column on the servers_services table. Fixed the sequence so that there is a valid primary key and everything works as expected again.

# javascript - 在Javascript中使用多组括号来创建一种数组？

> ID：11124423
> 
> 赞同：0
> 
> 时间：2012-06-20T16:54:55.633
> 
> 标签：javascript, arrays, syntax

就在我认为我正在理解 Javascript 的语法时，我遇到了这样的事情......

[我在jqPlot 插件](http://www.jqplot.com/tests/data-renderers.php)页面 上看到了这段代码。

`[[]]`javascript中有什么样的数组？嵌套数组？我以为我理解了双括号，但在评论文本中，我不明白为什么会有一个额外的集合（下面的问题）。

```
$(document).ready(function(){
// Our data renderer function, returns an array of the form:
// [[[x1, sin(x1)], [x2, sin(x2)], ...]]
var sineRenderer = function() {
var data = [[]];
for (var i=0; i<13; i+=0.5) {
  data[0].push([i, Math.sin(i)]);
}
return data;
}; 
```

为什么这个注释语句（最外面的一组）中有一组额外的括号？

```
[[[x1, sin(x1)], [x2, sin(x2)], ...]] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:00:13.353

是的，它是一个嵌套数组。该`data`数组包含一个数组，具有值和该值的正弦的其他数组被推送到该数组。

AFAIK，jQPlot 插件将使用其中的每个数组`data`来打印一个新图形。你可以例如做

```
function graph(fn, from, to, gap) {
    // creates an array with points
    var res = [];
    for (var i=from; i<to; i+=gap) {
        res.push([i, fn(i)]);
    }
    return res;
}

var data = [
   graph(Math.sin, 0, 13, 0.5),
   graph(Math.cos, 0, 13, 1)
];
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:01:59.430

Hunter 是正确的——它是包含其他数组的数组的语法。您还可以将其视为一个对象，如下所示：[http](http://www.quirksmode.org/js/associative.html) ://www.quirksmode.org/js/associative.html 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T16:57:07.440

如果他们说，那将是一组括号`data.push`。由于数组的第 0 个元素是一个数组，因此它们用于`data[0].push`在其中填充内容。

为什么他们需要双重包装，没有更多上下文就不知道了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T16:59:10.217

由于您要在数组中放入`data`数组（在数组中创建*数组*），因此这样做可以避免：

```
var data = [];
for (var i=0; i<13; i+=0.5) {
  data.push([i, Math.sin(i)]);
} 
```

当你使用`[[]]`然后 do`data[0]`时，你没有使用外部数组，当你输出它时会跳进去。

# php - Microsoft SQL Server 2008 和 ZF2 出现 sqlsrv_prepare 错误

> ID：11124430
> 
> 赞同：0
> 
> 时间：2012-06-20T16:55:12.513
> 
> 标签：php, sql-server-2008, zend-framework2

我遵循 Rob Allen 的 ZF2 优秀教程（http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework-2.pdf）。

我正在尝试连接到 Microsoft SQL Server 2008。当我在做

```
$this->getDatasTable()->fetchAll() 
```

我收到以下错误：

```
PHP Warning:  sqlsrv_prepare() expects parameter 1 to be resource, null given in C:\inetpub\wwwroot\LinuxWebApp\source\vendor\zendframework\zendframework\library\Zend\Db\Adapter\Driver\Sqlsrv\Statement.php on line 153 
```

在 config/autoload/global.php 我有：

```
return array(
'db' => array(
    'driver' => 'Sqlsrv',
    'dsn'            => 'sqlsrv:dbname=xxx;hostname=xxx',
    'username'       => 'xxx',
    'password'       => 'xxx',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
),
); 
```

我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:31:20.087

`PDO::MYSQL_ATTR_INIT_COMMAND`不适用于 SQL Server。尝试删除该`driver_options`部分。

更新下一个想法：
参数 1 是 sqlsrv 资源，那么你能得到一个直接使用 PDO Sqlsrv 驱动程序的测试脚本吗？我现在想知道连接是否有问题。

# java - 在 Java 中对 HashTable 的 ArrayList 进行排序

> ID：11124432
> 
> 赞同：0
> 
> 时间：2012-06-20T16:55:23.917
> 
> 标签：java, date, arraylist, hashmap, comparator

这是我的第一篇文章。我是一名 CS 专业的学生，​​在大二暑假期间从事和实习。我在 Java 方面拥有丰富的经验，但比较对象总是给我带来麻烦。

现在我正在编辑一个 JSP 页面，该页面在日历的不同日期有一堆事件。每个事件都是保存在（事件的）ArrayList 中的 HashMap。我需要对这些事件进行排序。

这是如何添加它们的示例。有很多逻辑，因为许多日期被保存为重复日期（即“五月的第一个星期日”）。

```
 convertedDate = convertJulian(rs.getDouble("starting_date"));
  eventDate = convertedDate.split(",");
  tempMap.put("id", rs.getString("cal_item_id"));
  tempMap.put("description", rs.getString("description"));            
  tempMap.put("startingDate", rs.getInt("starting_date"));    
  tempMap.put("resource", rs.getString("resource_name"));
  tempMap.put("eventMonth", eventDate[0]);
  tempMap.put("eventDay", eventDate[1]);
  tempMap.put("eventYear", eventDate[2]);

  if (!parkYearsList.contains(eventDate[2]) && rs.getDouble("starting_date") >= startDate) {
      parkYearsList.add(eventDate[2]);
  }
  if ( rs.getDouble("starting_date") >= startDate)            
      parkEventsList.add(tempMap); 
```

为了对它们进行排序，我尝试这样做。但它会删除 ArrayList 中的所有内容吗？

```
Collections.sort(parkEventsList, new MapComparator() ); 
```

这是我的比较器和`toJulian`方法。我没有写大部分内容，所以很难看出哪里可能存在问题。

```
public class MapComparator implements Comparator
{
    public int compare( Object object1 , Object object2)
    {

        String date1=(String)((HashMap)object1).get("startingDate");
        String date2=(String)((HashMap)object2).get("startingDate");

        Double date1Value = toJulian(date1);
        Double date2Value = toJulian(date2);

        return date1Value.compareTo(date2Value);
    }
}

public static double toJulian(String ymd) {
    String[] date = ymd.split(",");
    int jgreg = 15 + 31*(10+12*1582); 
    int year=Integer.parseInt(date[0]);
    int month=Integer.parseInt(date[1]); 
    int day=Integer.parseInt(date[2]);
    int julianYear = year;
    if (year < 0) julianYear++;
    int julianMonth = month;
    if (month > 2) {
        julianMonth++;
    }
    else {
        julianYear--;
        julianMonth += 13;
    }

    double julian = (java.lang.Math.floor(365.25 * julianYear)
         + java.lang.Math.floor(30.6001*julianMonth) + day + 1720995.0);
    if (day + 31 * (month + 12 * year) >= jgreg) {
        // change over to Gregorian calendar
        int ja = (int)(0.01 * julianYear);
        julian += 2 - ja + (0.25 * ja);
    }

    return java.lang.Math.floor(julian);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:56:29.030

尝试这个

```
public static Hashtable<String, String> sortValue(Hashtable<String, String> t)
            {
               //Transfer as List and sort it
                 ArrayList<Map.Entry<String, String>> l = new ArrayList<Entry<String, String>>(t.entrySet());
                  Hashtable<String,String> f = new Hashtable<String,String>(); 
                  Collections.sort(l, new Comparator<Map.Entry<String, String>>(){
                     public int compare(Map.Entry<String, String> o1, Map.Entry<String, String> o2) {
                    return o1.getValue().compareTo(o2.getValue());
             }});} 
```

# xml - 如何在 SQL Server 2008 中合并 2 个 XML 变量

> ID：11124437
> 
> 赞同：3
> 
> 时间：2012-06-20T16:56:00.313
> 
> 标签：xml, sql-server-2008, tsql, xquery

假设我在 SQL Server 2008 中有 2 个 XML 变量，并带有以下 XML

```
DECLARE @FIRST XML = '<DBPerson>
                          <firstname>John</firstname>
                          <lastname>Bob</lastname>
                      </DBPerson>',
        @Second XML = '<FromUI>
                           <lastname>New Bob</lastname>
                           <age>39</age>
                       </FromUI>'; 
```

我想要以下输出：

```
<DBPerson>
     <firstname>John</firstname>
     <lastname>New Bob</lastname>
     <age>39</age>
</DBPerson> 
```

基本上，我想将 2 个 XML 变量的内容合并到一个变量应该具有优先级的位置（如果两个&`@Second`中都存在一个节点，则应该考虑内部的节点）。`@First``@Second``@Second`

我采用的方法是首先获取两个根元素中所有唯一元素的列表，如下所示：

```
WITH ALLFields AS
(
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @Second.nodes('FromUI/*') AS x(y)
    UNION
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @FIRST.nodes('DBPerson/*') AS x(y)
)
SELECT * FROM ALLFields AF 
```

但我不知道如何从这里开始。我知道我必须先使用`sql:column`某个地方来构建一个表来获取节点名称及其值（基于`AllFields`），然后我可以使用它`FOR XML PATH('DBPerson')`来形成最终的 xml，但有点不确定`sql:column`

任何帮助高度赞赏。

**更新**：我将其归结为以下查询：

```
DECLARE @FIRST XML = '<DBPerson><firstname>John</firstname><lastname>Bob</lastname></DBPerson>',
        @Second XML = '<FromUI><lastname>New Bob</lastname><age>39</age></FromUI>';

WITH ALLFields AS
(
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @Second.nodes('FromUI/*') AS x(y)
    UNION
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @FIRST.nodes('DBPerson/*') AS x(y)
), Filtered AS
(
    SELECT 
          Element
        , @FIRST.value('(DBPerson/*[local-name()=sql:column("Element")])[1]','varchar(max)') AS F
        , @Second.value('(FromUI/*[local-name()=sql:column("Element")])[1]','varchar(max)') AS S
    FROM ALLFields AF
), FinalValues AS
(
    SELECT
        Element 
        , CASE 
                WHEN S IS NULL THEN F
                ELSE S
            END AS V
    FROM Filtered
)
SELECT * FROM FinalValues 
```

此查询为我提供了一个表，其中包含一列中的所有元素以及另一列中元素的数据。现在我如何像这样生成我的最终 XML：

```
<DBPerson><firstname>John</firstname><lastname>New Bob</lastname><age>39</age></DBPerson> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:25:04.943

```
select isnull(S.N.query('.'),F.N.query('.')) as '*'
from @First.nodes('/DBPerson/*') as F(N)
  full outer join @Second.nodes('/FromUI/*') as S(N)
    on F.N.value('local-name(.)', 'nvarchar(100)') = S.N.value('local-name(.)', 'nvarchar(100)')
for xml path(''), root('DBPerson') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:45:57.190

比我更了解 XML 粉碎的人可能能够在 XML 粉碎级别解决这个问题，但在这里我将对您更新的查询执行动态透视。我将首先将 FinalValues 写入临时表，以便动态 SQL 访问它：

```
DECLARE @FIRST XML = '<DBPerson><firstname>John</firstname><lastname>Bob</lastname></DBPerson>',
        @Second XML = '<FromUI><lastname>New Bob</lastname><age>39</age></FromUI>';

WITH ALLFields AS
(
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @Second.nodes('FromUI/*') AS x(y)
    UNION
    SELECT 
          x.y.value('local-name(.)','varchar(50)') As Element   
    FROM @FIRST.nodes('DBPerson/*') AS x(y)
), Filtered AS
(
    SELECT 
          Element
        , @FIRST.value('(DBPerson/*[local-name()=sql:column("Element")])[1]','varchar(max)') AS F
        , @Second.value('(FromUI/*[local-name()=sql:column("Element")])[1]','varchar(max)') AS S
    FROM ALLFields AF
), FinalValues AS
(
    SELECT
        Element 
        , CASE 
                WHEN S IS NULL THEN F
                ELSE S
            END AS V
    FROM Filtered
)
SELECT [age],[firstname],[lastname] FROM
    FinalValues
PIVOT (
    MAX(V)
    FOR Element IN ([age],[firstname],[lastname])
) AS p
FOR XML PATH('DBPerson');

/* Commenting out the dynamic piece to show the straight pivot above
SELECT *
INTO FinalValues_Staging
FROM FinalValues;
GO

DECLARE @sql NVARCHAR(MAX)
, @col NVARCHAR(MAX);

SELECT @col = COALESCE(@col, '') + QUOTENAME(Element) + ',' 
FROM
(
         SELECT DISTINCT Element
         FROM FinalValues_Staging
) AS x;  
SET @col = LEFT(@col, LEN(@col)-1);
SET @sql = N'SELECT <COL> FROM
    dbo.FinalValues_Staging
PIVOT (
    MAX(V)
    FOR Element IN (<COL>)
) AS p
FOR XML PATH(''DBPerson'')';

SET @sql = REPLACE(@sql, '<COL>', @col); 
EXEC sp_executeSQL @sql;
PRINT @sql;  
GO

-- DROP TABLE FinalValues_Staging
*/ 
```

结果：

```
<DBPerson>
  <age>39</age>
  <firstname>John</firstname>
  <lastname>New Bob</lastname>
</DBPerson> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:00:32.363

您可以使用 XQuery 返回序列的第一个元素，例如

```
DECLARE @first XML = '<DBPerson> 
                          <firstname>John</firstname> 
                          <lastname>Bob</lastname> 
                      </DBPerson>', 
        @second XML = '<FromUI> 
                           <lastname>New Bob</lastname> 
                           <age>39</age> 
                       </FromUI>'; 

DECLARE @xml XML

-- Combine the two XMLs
SET @xml = ( SELECT @first AS "*", @second AS "*" FOR XML PATH(''))

SELECT @xml.query('<DBPerson>
  {(FromUI/firstname, DBPerson/firstname)[1]}
  {(FromUI/lastname, DBPerson/lastname)[1]}
  {(FromUI/age, DBPerson/age)[1]}
</DBPerson>
') 
```

# javascript - 使用 jQuery 切换 div 的显示

> ID：11124439
> 
> 赞同：1
> 
> 时间：2012-06-20T16:56:04.923
> 
> 标签：javascript, jquery

我有两个链接，一个带有 id #calendar_arrival_open，另一个带有 #calendar_departure_open。两个链接都控制是否显示包含日历的 div，但在这两种情况下显示的日历都是相同的日历，以避免加载两个相同的日历。我正在尝试使用以下代码在单击链接时切换日历的打开和关闭。

```
var state = "closed";
if(state == "closed"){
    $("#calendar_arrival_open").click(function () {
        $("#calendar_box").show();
        $("#select_arrival_date").show();
        $("#select_departure_date").hide();
        state = "arrival_open";
    });
    $("#calendar_departure_open").click(function () {
        $("#calendar_box").show();
        $("#select_departure_date").show();
        $("#select_arrival_date").hide();
        state = "departure_open";
    });
}

if(state == "arrival_open"){
    $("#calendar_arrival_open").click(function () {
        $("#calendar_box").hide();
        state = "closed";
    });
    $("#calendar_departure_open").click(function () {
        $("#select_departure_date").show();
        $("#select_arrival_date").hide();
        state = "departure_open";
    });
}

if(state == "departure_open"){
    $("#calendar_arrival_open").click(function () {
        $("#calendar_box").hide();
        $("#select_departure_date").hide();
        $("#select_arrival_date").show();
        state = "arrival_open";
    });
    $("#calendar_departure_open").click(function () {
        $("#calendar_box").hide();
        state = "closed";
    });
} 
```

此代码适用于打开日历，但不适用于关闭它。我不明白为什么。如您所见，如果打开“到达日历”并单击出发日历链接，则会出现“出发日历”，反之亦然。但是，如果到达日历打开并且单击了到达日历链接，则日历将关闭。

任何人都可以看到问题吗？这种“状态”方法是处理我需要的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:09:15.440

试试这个：

```
var state = "closed";

$("#calendar_arrival_open").click(function () {
    if(state == "closed"){

        $("#calendar_box").show();
        $("#select_arrival_date").show();
        $("#select_departure_date").hide();
        state = "arrival_open";

    } else if(state == "arrival_open"){

        $("#calendar_box").hide();
        state = "closed";

    } else {

        $("#calendar_box").hide();
        $("#select_departure_date").hide();
        $("#select_arrival_date").show();
        state = "arrival_open";

    }
});

$("#calendar_departure_open").click(function () {
    if(state == "closed"){

        $("#calendar_box").show();
        $("#select_departure_date").show();
        $("#select_arrival_date").hide();
        state = "departure_open";

    } else if(state == "arrival_open"){

        $("#select_departure_date").show();
        $("#select_arrival_date").hide();
        state = "departure_open";

    } else {

        $("#calendar_box").hide();
        state = "closed";

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:15:51.343

发生单击事件时运行的代码必须在`click`事件处理程序中定义。在您的代码中，您希望在每次单击时执行状态检查，但是您`if`在事件处理程序之外添加了语句。然后，您会被第一个`if`块中的那些处理程序困住。

你的代码说：“当`state`是`x`，定义一个`click`事件处理程序做`a`；当`state`是`y`，定义一个`click`事件处理程序做`b`;”。

你想要的是：“当一个元素被点击时，做`a`if `state`is `x`, or `b`if `state`is `y`”。

看到不同？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:17:15.780

您可以使用 switch 块来实现这一点。我不确定这是否以编程方式更快，但对我来说它看起来更容易维护。

这显然需要放在`$(document).ready()`处理程序中。

```
var state = "closed";

$("#calendar_arrival_open").click(function () {

switch(state){

case "closed":
    $("#calendar_box").show();
    $("#select_arrival_date").show();
    $("#select_departure_date").hide();
    state = "arrival_open"; 
break;
case "arrival_open":
    $("#calendar_box").hide();
    state = "closed";   
break;  
case "departure_open":
    $("#calendar_box").hide();
    $("#select_departure_date").hide();
    $("#select_arrival_date").show();
    state = "arrival_open";
break;  
}
})

$("#calendar_departure_open").click(function () {

switch(state){

case "closed":
    $("#calendar_box").show();
    $("#select_departure_date").show();
    $("#select_arrival_date").hide();
    state = "departure_open";
break;
case "arrival_open":
    $("#select_departure_date").show();
    $("#select_arrival_date").hide();
    state = "departure_open";
break;  
case "departure_open":
    $("#calendar_box").hide();
    state = "closed";
break;  
}
}) 
```

# firefox - 在 Glassfish 中使用 Grizzly Comet 的 HTTP 流在 Firefox 中不起作用

> ID：11124442
> 
> 赞同：0
> 
> 时间：2012-06-20T16:56:16.193
> 
> 标签：firefox, iframe, glassfish, comet, grizzly

我有一个使用 Grizzly Comet 的 Comet 的类似 Java 聊天的应用程序，它适用于 Chrome，但不适用于 Firefox（两者的最新版本）。它使用 HTTP 流式传输方法，将 Javascript 片段发送到隐藏的 iframe（“永久帧”）以执行。在 Firefox 上，最初不会显示任何聊天消息，直到 Chrome 用户发送了几条消息 - 然后它才会恢复活力并正常工作。

没有使用代理，所以这不是代理问题。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:04:44.253

当您添加CometHandler 时，请确保您拥有**这两**行：

```
 response.setContentType("text/html");
        // Needed to fill buffer on some browsers 
        response.getWriter().write(padding); 
```

`padding`在这种情况下，是一个字符数组，可以是任何字符，只要它不会做任何事情并且足够长以触发所有浏览器中的缓冲（1K 应该足够了）。我只是用空格填充它。

# php - 无法回显 wpdb 结果

> ID：11124443
> 
> 赞同：0
> 
> 时间：2012-06-20T16:56:30.217
> 
> 标签：php, count, wordpress

我正在从 WordPress 数据库中提取信息。它肯定会提取所有正确的信息，如果我用它显示信息，`print_r( $res, true )`则表明我需要的是：

[term_id] => 8 [name] => 非洲 [slug] => 非洲 [COUNT(a.id)] => 1

我需要回应，`COUNT(a.id)`但我似乎无法管理这个？我的完整代码在这里： http: [//pastie.org/4121409](http://pastie.org/4121409)

我已经设法回应了所有其他信息，只是没有`COUNT(a.id)`

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:58:48.803

选择时，使用列别名，如下所示：`COUNT(a.id) AS id_count`

然后它将显示为结果集中的字段名称，而不是`COUNT(a.id)`您将能够通过以下方式访问它`$rs->id_count`

另请注意，在您的原始代码中，第 22 行将破坏代码。应该是`$counter = "COUNT(a.id)";`

# ruby-on-rails - 如何在主应用程序中合并 Rails Engine ApplicationController 方法？

> ID：11124447
> 
> 赞同：2
> 
> 时间：2012-06-20T16:56:42.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何将 Rails 引擎 ApplicationController（它的方法）合并到主应用程序中？我需要访问这些引擎控制器方法，并且我想在我的主应用程序的 ApplicationController 中不使用“包含”。

```
module MyEngine
  class Engine < Rails::Engine
    initializer  "myengine.load_helpers" do
      ActiveSupport.on_load(:action_controller) do
        include MyEngine::Helpers
      end
    end
  end
end 
```

以上是在[A way to add before_filter from engine to application](https://stackoverflow.com/questions/7323327/a-way-to-add-before-filter-from-engine-to-application/)上发布的，但我的理解是助手只能查看可用，而我需要在我的控制器中访问它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T17:02:19.467

我之前为一个名为 dynamic_menu 的 rails gem 做过这个

基本上看起来像

```
require 'dynamic_menu'

module DynamicMenu
  class Engine < Rails::Engine
    initializer "dynamic_menu.menu_items" do |app|
      ActionController::Base.send :include, DynamicMenu::MenuItems
    end
  end
end 
```

所以我假设你想要的是

```
require 'myEngine'
class Engine < Rails::Engine
  initializer "myengine.load_helpers" do |app|
    ActionController::Base.send :include, MyEngine::Helpers
  end
end 
```

您想添加在 lib 中使用的 .rb 文件的要求，然后只需将模块发送到 ActionController::Base

[在github](https://github.com/plowdawg/dynamic_menu)上查看我的 gem，它本质上非常简单，也许可以提供一些指导。评论，我可以解释更多。

# android - Android ActionBarSherlock 按下时更改项目的颜色

> ID：11124450
> 
> 赞同：0
> 
> 时间：2012-06-20T16:56:54.220
> 
> 标签：android, android-actionbar

我不明白如何更改 ActionBarSherlock 中按下项目的颜色。我正在覆盖主题`Widget.Sherlock.Light.ActionBar.Solid.Inverse`，当我查看这个主题的来源时，我找不到我的项目在按下时所具有的蓝色。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:46:17.377

有一个样式属性负责 ActionButton 背景：**actionBarItemBackground**。只需将您自己定义的 DrawableStateList 设置为一个值。

例如，这是默认的 DrawableStateList：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
<item android:state_focused="true"  android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/abs__list_selector_disabled_holo_dark" />
<item android:state_focused="true"  android:state_enabled="false"                              android:drawable="@drawable/abs__list_selector_disabled_holo_dark" />
<item android:state_focused="true"                                android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_dark" />
<item android:state_focused="false"                               android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_dark" />
<item android:state_focused="true"                                                             android:drawable="@drawable/abs__list_focused_holo" />
<item                                                                                          android:drawable="@android:color/transparent" /> 
```

# javascript - 如何将数字转换为科学计数法？

> ID：11124451
> 
> 赞同：29
> 
> 时间：2012-06-20T16:56:59.517
> 
> 标签：javascript, html, math, scientific-notation

我想制作一个接受输入值并将其转换为科学计数法的函数（N x 10^a）

我尝试了很多不同的事情，但我似乎无法做到正确。

例子：

我输入 200。转换器将其转换为 2 x 10^2

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-20T17:01:29.737

你可以这样做：

```
a = 200
a.toExponential(); //output 2e+2 
```

小提琴：http: [//jsfiddle.net/Q8avJ/9/](http://jsfiddle.net/Q8avJ/9/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-06T09:39:24.267

在某些时候，我想将系数和指数用作数字。

如果你想这样做，你可以使用`toExponential`函数，拆分字符串并将数组的项目转换为数字。

在下面的代码片段中，我将数字分配给`numInSciNot`对象并以所需的格式打印它们。

```
const num = 200;
const numInSciNot = {};
[numInSciNot.coefficient, numInSciNot.exponent] =
  num.toExponential().split('e').map(item => Number(item));

console.log(`${numInSciNot.coefficient} x 10^${numInSciNot.exponent}`);
```

如果您不想将它们用作数字，则可以使用`replace`：

```
const num = 200;

console.log(num.toExponential().replace(/e\+?/, ' x 10^'));
```

在这个片段中，我使用 RegExp 替换`e`或`e+`（在正指数的情况下）。

如果要指定小数点后的位数，可以`toExponential(NumberOfDigits)`在上面的示例中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-23T19:04:37.283

如果你想要这样的 base 10 格式：

*米*^(*×*) 10

 *然后你可以使用这样的函数：

```
function writeScientificNum(p_num, p_precision) {
    var n = Math.round(Math.log10(a));
    var m = (p_num * (Math.pow(10,Math.abs(n)))).toFixed(p_precision);
    document.getElementById("outputTxt").innerHTML = m.toString() + ' x 10<sup>' + n.toString() + '</sup>';
} 
```

测试一下：http: [//jsfiddle.net/u1hd4zm9/](http://jsfiddle.net/u1hd4zm9/)

唯一奇怪的是 toFixed 方法（至少在 Chrome 中）不会向上取整，而是向下取整。例如，如果您运行此代码：

```
var test = 2.55;
alert(test.toFixed(1)); 
```

它将像您期望的那样打印“2.5”而不是“2.6”。但是，如果您运行此代码：

```
var test = 2.5;
alert(test.toFixed(0)); 
```

它将打印 3。所以请注意这一点。*

# php - Memcache - 存储 mysql 结果

> ID：11124454
> 
> 赞同：2
> 
> 时间：2012-06-20T16:57:04.943
> 
> 标签：php, mysql, memcached

我有一个数据库类，它管理我的应用程序的所有 mysql 连接。

由于多种原因，我不得不（迟来的）实现 Memcache。我已经开始弄清楚了，但想确认一件事。

我希望对超时的默认值进行修改。它会查看它是否在内存缓存中，如果没有 - 进行查询并存储它。

但是，您似乎无法存储 mysqli 结果（[通过此问题](https://stackoverflow.com/questions/8020678/memcache-mysqli-couldnt-fetch-mysqli-result)）。这是否意味着您不能在应用程序中使用 $db->fetch_assoc() 或任何其他通用对象使用的任何代码？

如果是这样，这是否意味着我们正在讨论全面的代码更改？在我把头埋在手中之前，我想确认一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:03:52.267

您不能存储结果对象，不，但您可以将所有行提取到一个数组中并存储该数组。如果您需要在其他地方重构您的代码，取决于您如何编写代码以及您之前对数据库访问的抽象程度。

例如，如果您有这样的功能：

```
function database_result($query) {
   ...
   $result_array = $result->fetchAll();
   return $result_array;
} 
```

然后您可以在该函数中添加 Memcached 缓存：

```
function database_result($query, $expire = 60) {
   $memcached_key = 'db:' . $query;
   $cached = $memcached->get($memcached_key);
   if ($memcached->getResultCode() !== Memcached::RES_NOTFOUND) {
       return $cached;
   }
   ...
   $result_array = $result->fetchAll();
   $memcached->set($memcached_key, $result_array, $expire);
   return $result_array;
} 
```

如果您在任何地方都使用原始 PDO 或 MySQLi 对象，那么您还有更多工作要做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T17:26:39.647

Memcache 存储字符串，而不是结构。您必须能够将结构序列化为字符串以存储它们，并将它们反序列化回结构以检索它们。

这比听起来简单，因为 PHP 提供了一组函数来执行此操作。见： http: [//php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

但是，作为一项规则，当您缓存结果时，您总是希望在缓存结果之前尽可能多地对结果进行处理、过滤和其他操作，这样当您从缓存中检索数据时，您不必总是在之后立即重复相同的处理步骤。

还要记住 MySQL 已经有一个内置的查询缓存。如果您所做的只是根据查询字符串盲目地存储查询结果，那么您只是在复制功能。如果您想要显着提升性能，您需要在某处“增加价值”，利用您对应用程序的了解在更高级别缓存应用程序对象，而不仅仅是数据库查询结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T17:23:34.310

您不能在 memcache 中存储任何依赖资源的内容。

页面结束时会丢弃资源，无论是否已缓存。您的 mysqli 结果是一个对象，但依赖于使用的资源。它提供了一种干净的 OOP 方法来浏览资源，并且该对象可能可以存储在 memcache 中，但是当页面结束时资源标识符将被删除......

将 mysql(i) 数据存储在 memcache 中的唯一方法是将其循环并放入数组中，标量数据或对象数据不会更改任何内容并存储该数据数组，而不是 mysqli 结果。

祝你好运

# vb.net - 需要 Pcap.Net 成员或类的列表吗？

> ID：11124463
> 
> 赞同：1
> 
> 时间：2012-06-20T16:57:45.087
> 
> 标签：vb.net, pcap.net

需要 Pcap.Net 成员或类的列表吗？他们的网站没有太多文档，并且在论坛中四处查看。

我已经找到..

`PacketTs = Packet.Timestamp.ToString("yyyy-MM-dd hh:mm:ss.fff")
PacketS = Packet.Ethernet.IpV4.Source
PacketSp = Packet.Ethernet.IpV4.Transport.SourcePort
PacketD = Packet.Ethernet.IpV4.Destination
PacketDp = Packet.Ethernet.IpV4.Transport.DestinationPort
PacketP = Packet.Ethernet.IpV4.Protocol` 

还可以提取哪些其他数据。像 IpV6 信息等。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:52:27.873

如果您的项目引用了它们的库，则可以在对象浏览器中查看该库定义的所有命名空间、类和类成员。在 Visual Studio 中，从“视图”菜单中选择“对象浏览器”选项。

# c# - 实现特定的正则表达式模式

> ID：11124468
> 
> 赞同：0
> 
> 时间：2012-06-20T16:58:00.060
> 
> 标签：c#, regex

我有那个文字：

```
<a href="/extend/themes/bizway">BizWay</a> 
```

我想使用正则表达式来获取仅从 a 标签的内部文本中提取的 BizWay 词。顺便说一下，这是一个示例标签，BizWay 可以是任何单词

所以让我们说我想要一个像这样的正则表达式：

```
<a href=" + '"' + "/extend/themes/WORD" + '"' + ">WORD</a> 
```

其中字 = 字

编辑 ：

我尝试了以下 REGEX 模式：

```
@"<a href=" + '"' + "/extend/themes/.*" + '"' + @">.*</a>" 
```

但它给了我整条线。

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:03:48.653

我建议使用 C# 的 HTML 解析器库而不是使用正则表达式（这里有一个关于它的长论点，来自 stackoverflow [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)）。

通过快速搜索，HTMLAgilityPack 似乎是 C# 的一个不错的选择。这篇 stackoverflow 帖子将有助于在您的 C# 项目中进行此设置。[如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:39:40.020

我完全同意loeschg。我犯了忽略这个建议并使用正则表达式的错误。在调整我的代码大约一个月后，我最终使用了 HtmlAgilityPack。使用正则表达式解析 Html 并不像您期望的那样简单，变量太多。

这是您的起点...

```
string rawHtml = "<a href=\"/extend/themes/bizway\">BizWay</a>"

HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(rawHtml);
HtmlNodeCollection linkNodes = doc.DocumentNode.SelectNodes("//a/@href");
foreach (var node in linkNodes)
{
    string word = node.InnerText;
} 
```

要检查 href 的值，您可以这样做...

```
if (node.Attributes["href"].Value.Contains("extend/themes")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:39:21.407

我怀疑问题不是正则表达式本身，而是你对它会做什么的期望。根据我的经验，正则表达式系统返回与指定的完整模式匹配的文本。您的期望是它只会返回与通配符匹配的部分。不幸的是，这不是正则表达式的工作方式。您仍然需要为您感兴趣的行的位解析正则表达式的结果。

对于解析 HTML，正如 loeschg 所提到的，最好使用 HTML 解析库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:45:05.070

如果您只想要线路的一部分，您将需要使用一个组。为此，您可以将稍后要检索的部分用括号括起来，并可以选择使用以下名称对其进行命名：

```
?<name> 
```

所以：

```
Match m = Regex.Match(@"<a href='/extend/themes/bizway'>BizWay</a>", 
                      @"<a href='/extend/themes/(?<word1>.+)'>(?<word2>.+)</a>");
Console.WriteLine(m.Groups["word1"] + " " + m.Groups["word2"]); 
```

将打印“bizway BizWay”。

# php - 这个 PHP for 循环应该运行缓慢吗？

> ID：11124472
> 
> 赞同：1
> 
> 时间：2012-06-20T16:58:15.430
> 
> 标签：php, performance, loops, for-loop

我编写了以下循环，因为我必须重复相同/相似的代码 25 次。我可能需要重复更多，但现在是 25。

```
<?php
for ($i = 0; $i <= 24; $i++) {
  echo "<div class=\"";
  if ($i = 0) {
    echo "overlay";
  } else {
    echo "layer"+$i;
  }
  echo "\">code</div>\n";
}
?> 
```

当上传到我的网站时，它需要永远加载然后从我的计算机中提取资源并最终使计算机变慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T16:59:53.027

尝试改变：

```
if ($i = 0) { 
```

到：

```
if ($i == 0) { 
```

您在每次迭代中将 $i 设置为 0，而不是比较它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:00:03.867

你可能想要 if ($i == 0)

我怀疑您每次通过 if 循环时都会将 $i 重置为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:22:32.960

更好的简化：

```
echo '<div class="overlay">code</div>';
for ($i = 1; $i <= 24; $i++) {
   echo <<<EOL
<div class="layer$i">code</div>

EOL;
} 
```

假设`code`在循环内没有改变。另请注意，您的

```
echo "layer"+$i; 
```

是不正确的。PHP 中的字符串连接是用`.`. 您正在添加一个数学加法，因此 PHP 将转换`"layer"`为`0`并且您最终将有效地仅输出`$i`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:26:58.063

```
<?php
for ($i = 0; $i <= 24; $i++) {
  echo "<div class=\"";
  if ($i = 0) {
    echo "overlay";
  } else {
    echo "layer"+$i;
  }
  echo "\">code</div>\n";
}
?> 
```

您没有使用比较操作 (==)，而是使用了赋值运算符 (=)。

采用，

```
if($i == 0){
   echo "// your code  ";
   } 
```

# javascript - 从模式对话框窗口中选择开启页面元素？

> ID：11124473
> 
> 赞同：1
> 
> 时间：2012-06-20T16:58:22.697
> 
> 标签：javascript, jquery, modal-dialog

```
//Html - page containing link to open dialog

<input type="text" value="something" id="inputbox_id" />
<a href="#" class="opendialog">Open</a>

//Javascript

.opendialog.click function 
{
$('.modaldialog').click(function(event) {
    $('<div id="dialogContainer"> </div>').appendTo('body');

   //ajax call to page.php, if successful then add output of page.php to 
   //dialogContainer div created above
   //page.php has a button and some javascript as below
}

//Html - content of page.php
<input type="button" id="button" value="I am button" />

//Javascript on page.php
// On click "#button" 
// $('#inputbox_id').val("Something New"); 
```

但它没有工作，而是我收到一个错误“inputbox_id is not defined”....

所以我将代码更改为

```
$('#input_box_id', 'body').val(); // didn't work

$('body').find('#input_box_id').val("some value"); //Worked 
```

我的问题是——

为什么 $(selector, context) 选择器在这种情况下不起作用？可以使用选择正文然后找到所需的元素吗？你有什么更好的建议吗？

单击 #button 后如何关闭此对话框？

我感谢您的帮助！

**更新**

对话框关闭问题已解决 - 只需调用 $("#IdOfDialogContainer").remove();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:05:52.807

```
$('#input_box_id', 'body').val(); 
```

这种用法是错误的，你必须在第二个参数中给出 DOM 元素。像这样：

```
$('#input_box_id', document.getElementsByTagName('body')).val(); 
```

另一种方式是-您在帖子中提到的，

```
$(body).find('#input_box_id').val(); 
```

JQuery官方网页中已经提到过：

> *在内部，选择器上下文是用 .find() 方法实现的，* *所以 $('span', this) 等价于 $(this).find('span').*

**来源：[http ://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)**

所以，你不需要按照我说的第一种方式来实现，不会有性能问题。

# c# - WCF 与 Unity 一起休息

> ID：11124474
> 
> 赞同：2
> 
> 时间：2012-06-20T16:58:24.780
> 
> 标签：c#, .net, wcf, unity-container

我正在尝试使用 WCF REST 服务和 Unity（企业库 5），但找不到如何使用 Unity 实现服务解析的示例。我想在 global.asax 中调用所有接口和实现的注册以进行解析。

我正在使用以下类来注册容器：

```
public class DependencyResolver
{
    public static IUnityContainer Container { get; private set; }\

    static DependencyResolver()
    {
        Container = new UnityContainer()
            .AddNewExtension<EnterpriseLibraryCoreExtension>()
            .RegisterType<IServiceDAO, ServiceDAO>()
            .RegisterType<IServiceBO, ServiceBO>()
            .RegisterType<IService, Service>();
    }
} 
```

我搜索但找不到足够的示例，有人会有应用此解决方案的代码示例吗？

我找到了一些示例，例如[如何将值传递给我的 wcf 服务的构造函数？](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service/2455039#2455039)但我希望所有服务都具有相同的上下文。我想要这样的[http://entlibex.codeplex.com/wikipage?title=Unity%20Service%20Behavior&referringTitle=Documentation](http://entlibex.codeplex.com/wikipage?title=Unity%20Service%20Behavior&referringTitle=Documentation)但在我的情况下我没有 svc 文件。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:48:37.503

你为什么使用 WCF 4 REST？WCF 4 REST 有点过时并且难以使用。

我建议您使用 ASP.NET Web API（以前的 WCF Web API）。它更容易用于 REST 服务和 DI/IoC 容器（在 WCF 中，您应该编写自己的主机、行为等），因为它对 DI/IoC 具有良好的内置连接支持。

这是示例：

[http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)

# iphone - AFNetworking 需要 60 秒才能返回 401 状态码？

> ID：11124480
> 
> 赞同：2
> 
> 时间：2012-06-20T16:58:46.910
> 
> 标签：iphone, objective-c, ios, afnetworking

我有一个使用 AFNetworking 进行网络调用的 iOS 应用程序。一切都很好，除非我试图捕获 401 状态代码。调用返回响应总是需要大约 60 秒。是否有任何设置或什么会导致这种情况？每个成功的呼叫都会立即返回。我还尝试通过 curl 运行此代码，然后 401 立即返回。这是我正在使用的代码：

```
 AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

        __weak AFHTTPRequestOperation *_operation = operation;

        [operation setCompletionBlock:^{
                    //It takes 60 seconds to get to this line if a 401 is encountered
            DDLogInfo(@"Response body: %@", [_operation responseString]);

            if(_operation.response.statusCode == 401) {
                DDLogInfo(@"Expired Auth Token");
            }

            NSError *error = [_operation error];        
            NSData *responseData = [_operation responseData];

            if(responseData == nil && error == nil)
                error = [NSError errorWithDomain:isDevMode ? DEV_SERVICE_BASE_URL : SERVICE_BASE_URL code:-1 userInfo:nil];

            callback(error, responseData);
        }];

        [operation start]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:06:05.293

您需要使用适合您需要的超时值初始化 NSURLRequest。

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:inURL 
                                                       cachePolicy:NSURLRequestReturnCacheDataElseLoad 
                                                   timeoutInterval:10.0]; 
```

请参阅[NSMutableURLRequest](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)文档。

`AFHTTPRequestOperation`然后，使用该初始化`NSMutableURLRequest`请求初始化 AFNetworking 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:25:35.657

当请求失败并返回代码 401 时，将调用您尚未设置的操作的失败块。使用以下 AFHTTPRequestOperation 方法进行操作，失败块将被立即调用。

```
- (void)setCompletionBlockWithSuccess:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                              failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure; 
```

抱歉，没有注意到这个帖子是 6 个月大的！无论如何，对于那些仍然面临问题的人来说，答案仍然存在。

# web-services - 使用 Web 服务访问 TFS

> ID：11124484
> 
> 赞同：3
> 
> 时间：2012-06-20T16:59:02.977
> 
> 标签：web-services, tfs

我想知道是否有一种方法可以使用 Web 服务访问 TFS 以提取用户故事。在最终状态下，我想要发生的是，用户进入我的网站，输入用户故事 ID 单击一个按钮，然后将用户故事标题、描述以及分配给我的用户拉入我的网站。我不想让他们知道故事的出处，只是希望他们能够把它拉出来。关于如何做到这一点的任何想法都会很棒。

更新：让我扩展我的问题，因为我做了更多的研究。是否有人尝试将 OData 与 TFS 一起使用以查询或提取故事。有没有好的例子。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:09:03.297

假设您的网站是 .net，您想使用 TFS SDK。

[http://msdn.microsoft.com/en-us/library/bb130146(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bb130146(v=vs.80).aspx)

[http://social.msdn.microsoft.com/Forums/en-US/tfsworkitemtracking/thread/73f79348-0b37-406b-aa3b-a63d3837951b](http://social.msdn.microsoft.com/Forums/en-US/tfsworkitemtracking/thread/73f79348-0b37-406b-aa3b-a63d3837951b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:41:58.903

我建议支持 TFS ODATA 服务。这些服务目前可用于所有 CodePlex 项目，源代码可供下载。这些服务可以通过最少的工作在内部托管，或者您可以考虑使用像 Azure 这样的云托管选项。

这是来自 Brian Keller 的帖子，其中包含更多信息和指导。 [http://blogs.msdn.com/b/briankel/archive/2011/10/26/odata-service-for-team-foundation-server-2010-v1.aspx](http://blogs.msdn.com/b/briankel/archive/2011/10/26/odata-service-for-team-foundation-server-2010-v1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T09:49:05.797

[TFS REST API](https://www.visualstudio.com/en-us/docs/integrate/api/overview)记录在MSDN。除其他外，您可以

*   访问 TFS 用户配置文件
*   完成构建并启动它们
*   操作工作项

# html - 带有或不带有 Twitter Bootstrap 的嵌套侧边栏

> ID：11124486
> 
> 赞同：4
> 
> 时间：2012-06-20T16:59:04.870
> 
> 标签：html, css, navigation, twitter-bootstrap

是否可以使用 twitter bootstrap 创建嵌套的左侧边栏？我检查了他们的教程，但找不到。我想制作一个带有一些列表的侧栏，每个列表都包含嵌套列表，默认情况下这些列表是隐藏的，当用户将鼠标悬停在列表上时，隐藏的选项应该变得可见。

```
<div class="span2">  
    <div class="well sidebar-nav">  
        <ul class="nav nav-list">  
            <li class="nav-header">Categories</li>  
            <li class="divider"></li>
            <li><a href="#">Books</a> 
                              <ul>
                                  <li><a href="#">Science Books</a></li>
                                  <li><a href="#">Computer Books</a></li>
                                  <li><a href="#">History Books</a></li>
                               </ul>
                            </li>  
            <li><a href="#">Electronics</a></li> 
                                <ul>
                                  <li><a href="#">TV</a></li>
                                  <li><a href="#">Freezer</a></li>
                                  <li><a href="#">Radio</a></li>
                                </ul> 
            <li><a href="#">Computer</a></li>
        </ul>  
    </div> 
</div> 
```

可以用 twitter bootstarp 来做吗？如果没有其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T01:51:28.530

[折叠](http://twitter.github.com/bootstrap/javascript.html#collapse)您可以将折叠插件与 well+nav 类混合使用。[示例](http://jsfiddle.net/zzJ4w/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T02:44:00.720

是的，您可以这样做，请参阅下面给出的链接

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>
            <a class="brand" href="#">Brand X</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li><a href="#">Regular Link</a></li>                    
                    <li class="dropdown">
                        <a href="" class="dropdown-toggle" data-toggle="dropdown">Basic List <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Lorem</a></li>
                            <li><a href="#">Ipsum</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nested Lists<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li class="nav-header">Top Stuff</li>
                            <li class="nav nav-list">Nested List<b class="caret"></b>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Foo</a></li>
                                    <li><a href="#">Bar</a></li>    
                                    <li><a href="#">Bat</a></li>                                
                                </ul>        
                            </li>
                            <li class="nav nav-list">Nested List<b class="caret"></b>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Foo</a></li>
                                    <li><a href="#">Bar</a></li>    
                                </ul>    
                            </li>
                            <li><a href="#">Sit</a></li>
                            <li><a href="#">Amet</a></li>
                            <li><a href="#">Dolor</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Other Stuff</li>
                            <li><a href="#">Foo</a></li>
                            <li><a href="#">Bar</a></li>
                            <li><a href="#">Bat</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div>

.nav li.dropdown ul.dropdown-menu li.nav-list:hover {
    background: #08c;
    color: #fff;
    cursor: pointer;    
}

.nav li.dropdown ul.dropdown-menu .nav-list {
    font-size: 13px;
    color: #333;
    float: none;
    line-height: 21px;
}

.nav li.dropdown ul.dropdown-menu li:hover ul {
    display:block;
    position:absolute;
    left:100%;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}

.nav li.dropdown ul.dropdown-menu ul {
    display: none;
    float:right;
    position: relative;
    top: auto;
    margin-top: -27px;
}

.nav li.dropdown ul.dropdown-menu .nav-list .caret {
    border-bottom-color: #999;
    border-top-color: #999;
    float: right;
}

.nav li.dropdown ul.dropdown-menu .nav-list:hover .caret {
    margin-left: 6px;
    margin-top: 5px;
    margin-right: 1px;
    border-right: 0;
    border-left: 4px solid #fff;
    border-top: 4px solid transparent;
    border-bottom: 4px solid transparent;
}

.nav li.dropdown ul .nav-list .dropdown-menu:after {
    top: 8px;
    left: -12px;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-right: 6px solid #fff;
}

.nav li.dropdown ul .nav-list .dropdown-menu:before {
    left: -7px;
    border-left: 0;
    top: 7px;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
    border-right: 7px solid rgba(0,0,0,0.05);
} 
```

[http://jsfiddle.net/scottloway/S9yTU/](http://jsfiddle.net/scottloway/S9yTU/)

# ruby - 从 Ruby 块中的一系列调用返回

> ID：11124491
> 
> 赞同：3
> 
> 时间：2012-06-20T16:59:24.990
> 
> 标签：ruby

我有一个类似于 DSL 的 Ruby 代码，如下所示：

```
Activity.new('20-06-2012') do
  Eat.log do |l|
    l.duration = 0.30
    l.priority = 5
  end
  Work.log do |l|
    l.duration = 2
    l.priority = 3
  end
end 
```

每次调用 log() 方法时，都会实例化一个 Log 对象（在幕后），并将块传递给该方法（该块传递给 Log 对象的构造函数）。我的问题是，有没有办法从 log() 方法收集所有返回？在上面的示例中，最外层块的返回值是对 log() 的最后一次调用。但我想在一个数组中获取所有调用的结果，而不仅仅是最后一个。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:26:18.877

您的内部 DSL 仍然太像 Ruby，您可以将其重构为如下所示：

```
activity '20-06-2012' do
  log :eat do
    duration 0.30
    priority 5
  end
  log :work do
    duration 2
    priority 3
  end
end 
```

现在捕获你的调用`instance_eval`并将值累积在一个内部数组中，通常是 DSL 的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:16:45.210

块的最后一条语句始终是返回值。如果你不想强迫你的用户写成`l`块中的最后一条语句，你应该使用对`l`实例所做的修改（不管它是什么），而不是块的返回值。另一种选择是更改`l`对象的 setter-behavior 以在分配时返回所有值的数组 - 但我会选择第一个选项，具体取决于您的代码，它可能如下所示：

```
class Log
  attr_accessor :duration, :priority
  def initialize(block)
    block.call(self)
  end
end

Log.new proc{ |l| l.duration = 0.3; l.priority = 5 }
# => #<Log:0x000000029d8030 @duration=0.3, @priority=5> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:31:31.963

创建一个新对象或其他任何对象，并将其从初始化程序`ActivityLog`传递给块。`Activity`

```
Activity.new('20-06-2012') do |log|
  log.eat do |l|
    l.duration = 0.30
    l.priority = 5
  end
  log.work do |l|
    l.duration = 2
    l.priority = 3
  end
end 
```

如果您只有少数几种日志类型，只需将它们添加到`ActivityLog`( `ActivityLog#eat`,`ActivityLog#work`等)。初始化相应的对象（`Eat`, `Work`）并使用接收到的块调用其 log 方法。

作为下一步，您可以将它们添加到数组中并在其中迭代`ActivityLog#initialize`并动态创建每个方法。

懒惰的方法是`ActivityLog`让 a`method_missing`接受任何方法，将其转换为类常量，然后执行上述步骤。这很糟糕，因为它通常会使调试变得更加困难，如果您在对象上调用与记录器不对应的方法，您可能会得到误导性异常，并且您不能`methods`针对该对象调用并查看列出的方法。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:13:29.737

使用`return`，用逗号分隔每个块。

```
Activity.new('20-06-2012') do
  return_value = Eat.log do |l|
    l.duration = 0.30
    l.priority = 5
  end, Work.log do |l|
    l.duration = 2
    l.priority = 3
  end
return return_value #redundant
end 
```

当您返回用逗号分隔的多个值时，Ruby 会将它们连接到一个数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T17:16:15.093

André 的方法会起作用，但它的可读性不是很强。如果你在一个月左右的时间里回到它，很难发现隐藏在那里的逗号。

就我个人而言，我会让数组集合更加明确：

```
Activity.new('20-06-2012') do
  logs = []
  logs << Eat.log do |l|
    l.duration = 0.30
    l.priority = 5
  end
  logs << Work.log do |l|
    l.duration = 2
    l.priority = 3
  end
  logs
end 
```

这样，很难查看代码并误读它的作用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T17:22:30.567

如果（且仅当）您的日志结构简单且一致，则可以使用以下方法：

```
Activity.new('20-06-2012') do
  logs = {
    Eat => {:duration => 0.30, :priority => 5},
    Work => {:duration => 2, :priority => 3}
  }

  logs.map do |log_type, log_data|
    log_type.log do |l|
      l.duration = log_data[:duration]
      l.priority = log_data[:priority]
    end
  end
end 
```

您需要自行决定这是否适合您的结构以及是否足够可读

# smartgwt - smartgwt 窗口添加成员填充

> ID：11124492
> 
> 赞同：1
> 
> 时间：2012-06-20T16:59:25.863
> 
> 标签：smartgwt, listgrid

> **可能重复：**
> [SmartGWT 对话框标题设置不正确](https://stackoverflow.com/questions/5405204/smartgwt-dialog-title-not-set-correctly)

我有一个问题，是我已经形成了一个 Listgrid，但是当我使用 addMember 方法将它添加到一个窗口时，窗口控件包括标题，转到底部，不希望这样，我试图在窗口但不起作用..有什么想法吗？这是我的代码：

```
final Window winModal = Utils.createModalWindow("Title", true, true, true);
winModal.addCloseClickHandler(new CloseClickHandler() {
public void onCloseClick(CloseClientEvent event) {
winModal.destroy();
}
});
winModal.setPadding(1000);
winModal.setAlign(VerticalAlignment.CENTER);
winModal.setContentLayout("vertical");
winModal.addMember(getListGrid(), Integer.MAX_VALUE);
winModal.show(); 
```

多谢。

注意：方法 getListGrid 返回已经形成的 listgrid 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:00:37.723

`addItem`是在`Window`

检查`Javadoc`：[http ://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/Window.html](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/Window.html)

# cuda - 适用于多个 GPU 的 SLI

> ID：11124494
> 
> 赞同：27
> 
> 时间：2012-06-20T16:59:31.903
> 
> 标签：cuda, gpu, sli

我是 CUDA 编程的新手，我正在解决一个需要在一台机器上安装多个 GPU 的问题。我知道为了更好地进行图形编程，需要通过 SLI 组合多个 GPU。但是，对于 CUDA 编程，我是否还需要通过 SLI 组合 GPU？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T17:15:46.023

不，一般来说，如果您打算使用 GPU 进行计算而不是纯图形应用程序，则您不想使用 SLI。您将能够从 CUDA 程序中将两个 GPU 作为独立设备访问。请注意，您需要在 GPU 之间明确划分工作。

我没有解释为什么 SLI 不适用于计算应用程序，但这是我在 Nvidia 论坛上读到的，并从 IRC 频道的其他人那里听到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-25T20:38:24.743

您可以在没有 SLI 的多个 GPU 上使用 CUDA，甚至可以在不同的 CUDA 架构之间使用 CUDA，但是您必须编写额外的代码来划分工作并同步划分的子工作。这是一个在 3 个 GPU 上为示例内核 vectorAdd 进行负载平衡的简单程序（GT1030 GPU 一个 Pascal 架构 GPU + 两个 Kepler 架构的 K420 GPU，在同一个任务池中一起工作没有问题）：

```
/**
 * Copyright 1993-2015 NVIDIA Corporation.  All rights reserved.
 *
 * Please refer to the NVIDIA end user license agreement (EULA) associated
 * with this source code for terms and conditions that govern your use of
 * this software. Any use, reproduction, disclosure, or distribution of
 * this software and related documentation outside the terms of the EULA
 * is strictly prohibited.
 *
 */

/**
 * Vector addition: C = A + B.
 *
 * This sample is a very basic sample that implements element by element
 * vector addition. It is the same as the sample illustrating Chapter 2
 * of the programming guide with some additions like error checking.
 */

#include <stdio.h>

// For the CUDA runtime routines (prefixed with "cuda_")
#include <cuda_runtime.h>

#include <helper_cuda.h>

// for load balancing between 3 different GPUs
#include "LoadBalancerX.h"

/**
 * CUDA Kernel Device code
 *
 * Computes the vector addition of A and B into C. The 3 vectors have the same
 * number of elements numElements.
 */
__global__ void
vectorAdd(const float *A, const float *B, float *C, int numElements)
{
    int i = blockDim.x * blockIdx.x + threadIdx.x;

    if (i < numElements)
    {
        C[i] = A[i] + B[i];
    }
}

#include<iostream>
#include<map>
int
main(void)
{

    int numElements = 1500000;
    int numElementsPerGrain = 50000;
    size_t size = numElements * sizeof(float);

    float *h_A; cudaMallocHost((void**)&h_A,size);
    float *h_B; cudaMallocHost((void**)&h_B,size);
    float *h_C; cudaMallocHost((void**)&h_C,size);

    for (int i = 0; i < numElements; ++i)
    {
        h_A[i] = rand()/(float)RAND_MAX;
        h_B[i] = rand()/(float)RAND_MAX;
    }

    /*
     * default tutorial vecAdd logic

    cudaMemcpy(d_A, h_A, size, cudaMemcpyHostToDevice);
    cudaMemcpy(d_B, h_B, size, cudaMemcpyHostToDevice);

    int threadsPerBlock = 256;
    int blocksPerGrid =(numElements + threadsPerBlock - 1) / threadsPerBlock;

    vectorAdd<<<blocksPerGrid, threadsPerBlock>>>(d_A, d_B, d_C, numElements);
    cudaGetLastError();

    cudaMemcpy(h_C, d_C, size, cudaMemcpyDeviceToHost);
    */

    /* load-balanced 3-GPU version setup */
    class GrainState
    {
    public:
        int offset;
        int range;
        std::map<int,float *> d_A;
        std::map<int,float *> d_B;
        std::map<int,float *> d_C;
        std::map<int,cudaStream_t> stream;
        ~GrainState(){
            for(auto a:d_A)
                cudaFree(a.second);
            for(auto b:d_B)
                cudaFree(b.second);
            for(auto c:d_C)
                cudaFree(c.second);
            for(auto s:stream)
                cudaStreamDestroy(s.second);
        }
    };

    class DeviceState
    {
    public:
        int gpuId;
        int amIgpu;
    };

    LoadBalanceLib::LoadBalancerX<DeviceState,GrainState> lb;
    lb.addDevice(LoadBalanceLib::ComputeDevice<DeviceState>({0,1})); // 1st cuda gpu in computer
    lb.addDevice(LoadBalanceLib::ComputeDevice<DeviceState>({1,1})); // 2nd cuda gpu in computer
    lb.addDevice(LoadBalanceLib::ComputeDevice<DeviceState>({2,1})); // 3rd cuda gpu in computer
    //lb.addDevice(LoadBalanceLib::ComputeDevice<DeviceState>({3,0})); // CPU single core

    for(int i=0;i<numElements;i+=numElementsPerGrain)
    {
        lb.addWork(LoadBalanceLib::GrainOfWork<DeviceState,GrainState>(
                [&,i](DeviceState gpu, GrainState& grain){
                    if(gpu.amIgpu)
                    {
                        cudaSetDevice(gpu.gpuId);
                        cudaStreamCreate(&grain.stream[gpu.gpuId]);
                        cudaMalloc((void **)&grain.d_A[gpu.gpuId], numElementsPerGrain*sizeof(float));
                        cudaMalloc((void **)&grain.d_B[gpu.gpuId], numElementsPerGrain*sizeof(float));
                        cudaMalloc((void **)&grain.d_C[gpu.gpuId], numElementsPerGrain*sizeof(float));
                    }
                },
                [&,i](DeviceState gpu, GrainState& grain){
                    if(gpu.amIgpu)
                    {
                        cudaSetDevice(gpu.gpuId);
                        cudaMemcpyAsync(grain.d_A[gpu.gpuId], h_A+i, numElementsPerGrain*sizeof(float), cudaMemcpyHostToDevice,grain.stream[gpu.gpuId]);
                        cudaMemcpyAsync(grain.d_B[gpu.gpuId], h_B+i, numElementsPerGrain*sizeof(float), cudaMemcpyHostToDevice,grain.stream[gpu.gpuId]);
                    }
                },
                [&,i](DeviceState gpu, GrainState& grain){
                    if(gpu.amIgpu)
                    {
                        int threadsPerBlock = 1000;
                        int blocksPerGrid =numElementsPerGrain/1000;
                        vectorAdd<<<blocksPerGrid, threadsPerBlock, 0, grain.stream[gpu.gpuId]>>>(grain.d_A[gpu.gpuId], grain.d_B[gpu.gpuId], grain.d_C[gpu.gpuId], numElements-i);
                    }
                    else
                    {
                        for(int j=0;j<numElementsPerGrain;j++)
                        {
                            const int index = j+i;
                            h_C[index]=h_A[index]+h_B[index];
                        }
                    }
                },
                [&,i](DeviceState gpu, GrainState& grain){
                    if(gpu.amIgpu)
                    {
                       cudaMemcpyAsync(h_C+i, grain.d_C[gpu.gpuId], numElementsPerGrain*sizeof(float), cudaMemcpyDeviceToHost,grain.stream[gpu.gpuId]);
                    }
                },
                [&,i](DeviceState gpu, GrainState& grain){
                    if(gpu.amIgpu)
                    {
                        cudaStreamSynchronize(grain.stream[gpu.gpuId]);
                    }
                }
        ));
    }

    /* load-balance setup end*/

    // run 100 times
    size_t nanoseconds=0;

    for(int i=0;i<100;i++)
    {
        nanoseconds += lb.run();

    }

    std::cout<<nanoseconds/100.0<<"ns  ("<<((numElements*12.0/(nanoseconds/100.0)))<<"GB/s)"<<std::endl;

    std::cout<<"??"<<std::endl;

    for (int i = 0; i < numElements; i+=numElementsPerGrain)
    {
        std::cout<<h_A[i]<<" + "<<h_B[i]<<" = "<<h_C[i]<<std::endl;
    }
    auto z = lb.getRelativePerformancesOfDevices();
    std::cout<<"work distribution to devices:"<<std::endl;
    for(auto zz:z)
    {
        std::cout<<zz<<"% ";
    }
    std::cout<<std::endl;
    cudaFreeHost(h_A);
    cudaFreeHost(h_B);
    cudaFreeHost(h_C);

    return 0;
} 
```

# c# - C# 图表和图形 Windows 窗体

> ID：11124497
> 
> 赞同：0
> 
> 时间：2012-06-20T16:59:45.057
> 
> 标签：c#, .net, telerik

我知道有 C# 和 Windows 窗体的股票图表和图形。但是我一直在研究 Telerik，我真的很喜欢他们的风格，我只是不想花 1000 美元买这个软件。Telerik 是否有提供类似设计类型的替代品。我只是想避免低质量的库存设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:05:05.830

.netframework 3.5 和 4.0 中已经有图表支持，你看过了吗？

```
using System.Windows.Forms.DataVisualization.Charting; 
```

它基本上为您创建了所有类型的图表并且它是免费的

这里有几个有用的链接

[http://www.dotnetperls.com/chart](http://www.dotnetperls.com/chart)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx)

[http://www.codeproject.com/Articles/168056/Windows-Charting-Application](http://www.codeproject.com/Articles/168056/Windows-Charting-Application)

# mysql - MySQL左连接性能问题

> ID：11124510
> 
> 赞同：0
> 
> 时间：2012-06-20T17:00:38.087
> 
> 标签：mysql, performance, left-join

我在一些查询上遇到了 MySQL（5.5 版）左连接性能的问题。在所有情况下，我都能够通过使用联合和子选择重组查询来解决这个问题（我在《*高性能 MySQL* 》一书中看到了一些例子）。问题是这会导致非常混乱的查询。

下面是产生完全相同结果的两个查询的示例。第一个查询比第二个查询慢大约两个数量级。第二个查询比第一个查询可读性差得多。

据我所知，这些类型的查询并没有因为索引错误而表现不佳。在所有情况下，当我重组查询时，它运行得很好。我还尝试仔细查看索引并使用提示无济于事。

有没有其他人遇到过类似的 MySQL 问题？我应该尝试调整任何服务器参数吗？有没有人找到一种更清洁的方法来解决这类问题？

## 查询 1

```
select
  i.id,
  sum(vp.measurement * pol.quantity_ordered) measurement_on_order
from items i
left join (vendor_products vp, purchase_order_lines pol, purchase_orders po) on
  vp.item_id = i.id and
  pol.vendor_product_id = vp.id and
  pol.purchase_order_id = po.id and
  po.received_at is null and
  po.closed_at is null
group by i.id

explain:
+----+-------------+-------+--------+-------------------------------+-------------------+---------+-------------------------------------+------+-------------+
| id | select_type | table | type   | possible_keys                 | key               | key_len | ref                                 | rows | Extra       |
+----+-------------+-------+--------+-------------------------------+-------------------+---------+-------------------------------------+------+-------------+
|  1 | SIMPLE      | i     | index  | NULL                          | PRIMARY           | 4       | NULL                                |  241 | Using index |
|  1 | SIMPLE      | po    | ref    | PRIMARY,received_at,closed_at | received_at       | 9       | const                               |    2 |             |
|  1 | SIMPLE      | pol   | ref    | purchase_order_id             | purchase_order_id | 4       | nutkernel_dev.po.id                 |    7 |             |
|  1 | SIMPLE      | vp    | eq_ref | PRIMARY,item_id               | PRIMARY           | 4       | nutkernel_dev.pol.vendor_product_id |    1 |             |
+----+-------------+-------+--------+-------------------------------+-------------------+---------+-------------------------------------+------+-------------+ 
```

## 查询 2

```
select
  i.id,
  sum(on_order.measurement_on_order) measurement_on_order
from (
  (
    select
      i.id item_id,
      sum(vp.measurement * pol.quantity_ordered) measurement_on_order
    from purchase_orders po
    join purchase_order_lines pol on pol.purchase_order_id = po.id
    join vendor_products vp on pol.vendor_product_id = vp.id
    join items i on vp.item_id = i.id
    where
      po.received_at is null and po.closed_at is null
    group by i.id
  )
  union all
  (select id, 0 from items)
) on_order
join items i on on_order.item_id = i.id
group by i.id

explain:
+------+--------------+------------+--------+-------------------------------+--------------------------------+---------+-------------------------------------+------+----------------------------------------------+
| id   | select_type  | table      | type   | possible_keys                 | key                            | key_len | ref                                 | rows | Extra                                        |
+------+--------------+------------+--------+-------------------------------+--------------------------------+---------+-------------------------------------+------+----------------------------------------------+
|  1   | PRIMARY      | <derived2> | ALL    | NULL                          | NULL                           | NULL    | NULL                                | 3793 | Using temporary; Using filesort              |
|  1   | PRIMARY      | i          | eq_ref | PRIMARY                       | PRIMARY                        | 4       | on_order.item_id                    |    1 | Using index                                  |
|  2   | DERIVED      | po         | ALL    | PRIMARY,received_at,closed_at | NULL                           | NULL    | NULL                                |   20 | Using where; Using temporary; Using filesort |
|  2   | DERIVED      | pol        | ref    | purchase_order_id             | purchase_order_id              | 4       | nutkernel_dev.po.id                 |    7 |                                              |
|  2   | DERIVED      | vp         | eq_ref | PRIMARY,item_id               | PRIMARY                        | 4       | nutkernel_dev.pol.vendor_product_id |    1 |                                              |
|  2   | DERIVED      | i          | eq_ref | PRIMARY                       | PRIMARY                        | 4       | nutkernel_dev.vp.item_id            |    1 | Using index                                  |
|  3   | UNION        | items      | index  | NULL                          | index_new_items_on_external_id | 257     | NULL                                | 3380 | Using index                                  |
| NULL | UNION RESULT | <union2,3> | ALL    | NULL                          | NULL                           | NULL    | NULL                                | NULL |                                              |
+------+--------------+------------+--------+-------------------------------+--------------------------------+---------+-------------------------------------+------+----------------------------------------------+ 
```

# objective-c - 你如何让 NSScrollView 滚动更慢？

> ID：11124512
> 
> 赞同：1
> 
> 时间：2012-06-20T17:00:43.227
> 
> 标签：objective-c, cocoa, nsscrollview

使用鼠标滚轮（或触控板滚动），我的自定义滚动视图滚动得太快，无法在应用程序中实现。有没有办法减少每次用户使用触控板或滚轮滚动时的滚动量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:49:40.750

你能覆盖吗

```
- (void)scrollWheel:(NSEvent *)theEvent 
```

在您的自定义 NSScrollView 中更改滚动行为以响应鼠标滚轮？

# service - 设置自动短信服务

> ID：11124517
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:09.963
> 
> 标签：service

尝试为客户设置自动短信服务，人们可以在其中发短信给号码，并从某种服务器获得自动回复。手机用户应该能够通过文本与服务器进行某种交流。任何人都知道如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:43:59.617

您可以设置服务器来响应 MO（移动发起）消息。

您需要与将 MO 消息转发到您的服务器的 SMS 提供商/聚合器建立关系。根据关键字，您可以决定如何回复 - 因为您有原始电话号码，您可以轻松回复发件人。

我已经开发了这样的系统，所以如果您需要更多详细信息，请询问。

# c++ - 无法访问另一个标题中包含的标题？

> ID：11124518
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:18.170
> 
> 标签：c++, header

我有三个`.cpp`文件及其标题。

```
 //a.cpp
#include "a.h"
#include "b.h"
void A::foo() {
    C c;
    c.bar();
}

    //a.h
#include "b.h"
class A {
public:
    void foo();
};

    //b.h
#include "c.h"

    //c.h
#pragma once    
class C {
public:
    void bar();
};

    //c.cpp
#include "c.h"
void C::bar() {}

    //other files are ignored 
```

但是当我编译它们时，我得到了这个错误：

```
a.cpp:(.text+0xb1): undefined reference to `C::bar()` 
```

我是否包括`c.h`在内`b.h`？为什么它不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T17:10:34.347

未定义的引用是链接器错误，您的代码正在编译。确保您正在链接`a.obj`,`b.obj`和`c.obj`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:14:04.577

这是一个链接错误，表示`C::bar()`为构建程序而链接的一组翻译单元中缺少 的定义。最可能的原因是您没有包含`c.cpp`在您的构建中。

# php - 显示所有 mySQL 表中的数据

> ID：11124519
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:22.447
> 
> 标签：php, mysql

我有很多表，列的变化​​很小。我希望能够从每个表中选择所有数据，并且当一个表没有来自另一个表的列时只显示空值（或空白）。

我知道当您的表之间存在相互关系时，这通常可以使用 JOIN 运算符来完成，但是我的表之间没有任何关系，只是它们有很多常见的列名。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T17:10:21.720

无论如何，这是我能想到的最接近的：[fiddle](http://sqlfiddle.com/#!2/7b08f/1)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T17:26:22.220

```
SELECT DISTINCT TABLE_NAME FROM INFORMATION_SCHEMA.columns
 WHERE TABLE_SCHEMA = 'database_name'
 ORDER BY TABLE_NAME 
```

这为您提供了所有表名的列表。然后，您可以对所有这些运行查询。

# mysql - mysql计数非空白字段

> ID：11124520
> 
> 赞同：1
> 
> 时间：2012-06-20T17:01:28.610
> 
> 标签：mysql

在一张表中`members(id, contractid, a,b,c,d)`，我需要计算：

1.  至少有 a,b,c,d>0 之一的成员数

2.  给定contractid的a>0、b>0等的行数（合约和成员之间的关系是一对多的）。

我的目标是显示一个图表（表格），其中包含关于有多少成员在他们的合同中选择了 a、b、c 和 d 的分组信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:12:25.763

通过将聚合`SUM()`与返回 0 或 1 的布尔测试结合使用，您可以确定填充了多少：

### 至少填写一项的会员人数：

```
SELECT COUNT(*) 
FROM members
/* add up the boolean comparisons (which return 0 or 1) to find out if the total is > 0 */
WHERE ((a > 0) + (b > 0) + (c > 0) + (d > 0)) > 0
/* Actually that's overkill, and it could just be an OR chain */
/* WHERE a > 0 OR b > 0 OR c > 0 OR d > 0 */ 
```

### 每个合约 ID 的数量

```
SELECT
  contractid,
  /* SUM() a 1 for each row in which the col is > 0 */
  SUM(CASE WHEN a > 0 THEN 1 ELSE 0 END) AS a_greater_than_0,
  SUM(CASE WHEN b > 0 THEN 1 ELSE 0 END) AS b_greater_than_0,
  SUM(CASE WHEN c > 0 THEN 1 ELSE 0 END) AS c_greater_than_0,
  SUM(CASE WHEN d > 0 THEN 1 ELSE 0 END) AS d_greater_than_0
FROM members
GROUP BY contractid 
```

MySQL 允许您缩短它，因为`(a > 0)`返回 1 或 0，但这不能移植到所有其他 RDBMS：

```
SELECT
  contractid,
  /* SUM() a 1 for each row in which the col is > 0 */
  SUM(a > 0) AS a_greater_than_0,
  SUM(b > 0) AS b_greater_than_0,
  SUM(c > 0) AS c_greater_than_0,
  SUM(d > 0) AS d_greater_than_0
FROM members
GROUP BY contractid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:12:20.550

1.  `select count(id) from Members where (a>0 or b>0 or c>0 or d>0)`

2.  `select contractid,count(id) from members group by contractid having a>0;`
    `select contractid,count(id) from members group by contractid having b>0;`

# c# - 如何在 asp.net 后面的代码中获取网格 CheckBoxSelectColumn 值？

> ID：11124523
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:34.967
> 
> 标签：c#, asp.net, obout

我在 obout 网格中有 CheckBoxSelectColumn。我想检查是否选中了列中的复选框。我尝试了不同的方法来检索信息，但我没有成功。

请帮帮我。

```
<obout:Grid ID="mGrid" runat="server" >
     <ClientSideEvents OnClientSelect="Grid1_Select" 
         ExposeSender="true" />                

     <Columns>
         <obout:CheckBoxSelectColumn ShowHeaderCheckBox="false" ControlType="Standard" HeaderText="Select"  runat="server"   >

         </obout:CheckBoxSelectColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:23:33.487

`SelectedRecords`您可以使用一个名为的属性。

`mGrid.SelectedRecords`它会返回一个 ArrayList，其中包含您选择的所有复选框。

# javascript - jQuery 尚未准备好，但仍在实例化

> ID：11124524
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:38.157
> 
> 标签：javascript, jquery

我正在使用 jQuery Class 插件：

```
jQuery(document).ready(function($) {
    window.SSK.calendar = new(Class.extend({
    filter_by_filtered_names: function() {
      console.log('foobar!');
    },
      init: function() {
        if ( window.location.href.match(/name_filters/) ) {
          SSK.calendar.filter_by_filtered_names();
        };
      }
    }))
}); 
```

由于某种原因，这会在加载时返回：

```
SSK.calendar is undefined 
```

这告诉我插件类在它自己的调用之前没有加载。确实很奇怪。好奇是否有人知道补救措施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:11:36.177

这种行为对我来说似乎很有意义，即使我不知道如何`Class`工作：

`Class.extend(...)`创建一个新的构造函数（我假设）。`new`执行依次调用的构造函数`init`。结果分配给`window.SSK.calendar`。你看，`init`在实例化时被调用，这发生在实例被分配给`window.SSK.calendar`.

这是一个简化的示例：

```
function MyClass() {
    this.bar = 'baz';
    console.log(foo.bar);
}

var foo = new MyClass(); 
```

这将失败，因为`foo`仍在`undefined`调用构造函数的那一刻。实例是函数调用的*返回值*，因此`foo`不能在调用*之前*包含对实例的引用。

您可以通过简单地使用`this`引用实例来解决您的问题：

```
init: function() {
    if ( window.location.href.match(/name_filters/) ) {
    // better in this case: if(/name_filters/.test(window.location.href))
        this.filter_by_filtered_names();
    };
} 
```

插件的文档应该提到如何从方法内部引用实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:09:35.627

似乎您使用了两个 onReady 侦听器：`jQuery(document).ready(fn)`并且`$(fn)`完全等效。实际上，当外部函数执行时，您会将内部函数附加到函数队列的末尾。当尝试访问`SSK.calendar`之后未注册的任何 onDOMready 函数时，它将不可用。

例子：

```
$(function(){
    console.log("A");
    $(function(){
       console.log("B");
    });
    console.log("C");
});
$(function(){
    console.log("D");
}); 
```

将记录：

```
A
C
D
B 
```

# wordpress - 如何检测 admin_init 挂钩回调中的自定义帖子类型？

> ID：11124525
> 
> 赞同：12
> 
> 时间：2012-06-20T17:01:39.770
> 
> 标签：wordpress

或者我应该使用不同的钩子？主要是我试图只在管理员和一些自定义帖子中执行一些操作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T23:42:57.157

这个方法很简单：

```
/**
 * Based on http://wordpress.stackexchange.com/a/59999/12615
 */

add_action( 'admin_head', 'wpse_59652_list_terms_exclusions' );

function wpse_59652_list_terms_exclusions() {
    global $current_screen;

    if( 'post' != $current_screen->post_type )
        return;

    // Do your stuff
} 
```

其他：

```
/**
 * Based on http://wordpress.stackexchange.com/a/54279/12615
 */

add_action( 'admin_notices', 'wpse_54258_display_error_message' );

function wpse_54258_display_error_message() { 
    global $post;
    if( !isset( $post ) || 'page' != $post->post_type )
        return;

    ?>
        <div class="error fade">This is a "page" post type</div>
    <?php
} 
```

还有一个复杂的：

```
/***
  * Conditional enqueue of scripts according to Admin page
 * Based on http://wordpress.stackexchange.com/a/9095/12615
 */

add_action('admin_init', 'wpse_9080_admin_init');

function wpse_9080_admin_init() {
    global $pagenow;
    global $firephp; // Using FirePHP for debugging - Remove if library not included
    if ( 'edit.php' == $pagenow) {
        if ( !isset($_GET['post_type']) ) {
            $firephp->log('I am the Posts listings page');  
        }
        elseif ( isset($_GET['post_type']) && 'page' == $_GET['post_type'] ) {
            // Will occur only in this screen: /wp-admin/edit.php?post_type=page
            $firephp->log('I am the Pages listings page');  
        }
    }
    if ('post.php' == $pagenow && isset($_GET['post']) ) {
        // Will occur only in this kind of screen: /wp-admin/post.php?post=285&action=edit
        // and it can be a Post, a Page or a CPT
        $post_type = get_post_type($_GET['post']);
        $firephp->log($post_type);
        if ( 'post' == $post_type ) {
            $firephp->log('I am editing a post');   
        }
        elseif ( 'page' == $post_type) {
            $firephp->log('I am editing a page');   
        }
        elseif ( 'movie' == $post_type) {
            $firephp->log('I am editing a custom post type');   
        }
    }

    if ('post-new.php' == $pagenow ) {
        // Will occur only in this kind of screen: /wp-admin/post-new.php
        // or: /wp-admin/post-new.php?post_type=page
        if ( !isset($_GET['post_type']) ) {
            $firephp->log('I am creating a new post');  
        }
        elseif ( isset($_GET['post_type']) && 'page' == $_GET['post_type'] ) {
            $firephp->log('I am creating a new page');  
        }
        elseif ( isset($_GET['post_type']) && 'movie' == $_GET['post_type'] ) {
            $firephp->log('I am creating a new custom post type');  
        }
    }   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-02T21:57:16.180

这是一个功能，您可以毫无问题地使用它。

```
function admin_post_type () {
    global $post, $parent_file, $typenow, $current_screen, $pagenow;

    $post_type = NULL;

    if($post && (property_exists($post, 'post_type') || method_exists($post, 'post_type')))
        $post_type = $post->post_type;

    if(empty($post_type) && !empty($current_screen) && (property_exists($current_screen, 'post_type') || method_exists($current_screen, 'post_type')) && !empty($current_screen->post_type))
        $post_type = $current_screen->post_type;

    if(empty($post_type) && !empty($typenow))
        $post_type = $typenow;

    if(empty($post_type) && function_exists('get_current_screen'))
        $post_type = get_current_screen();

    if(empty($post_type) && isset($_REQUEST['post']) && !empty($_REQUEST['post']) && function_exists('get_post_type') && $get_post_type = get_post_type((int)$_REQUEST['post']))
        $post_type = $get_post_type;

    if(empty($post_type) && isset($_REQUEST['post_type']) && !empty($_REQUEST['post_type']))
        $post_type = sanitize_key($_REQUEST['post_type']);

    if(empty($post_type) && 'edit.php' == $pagenow)
        $post_type = 'post';

    return $post_type;
} 
```

我使它变得灵活、快速和准确。您可以根据需要扩展它。

# rabbitmq - rabbitmq 铲子状态总是启动

> ID：11124526
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:44.323
> 
> 标签：rabbitmq

使用以下 rabbitmq 配置

```
[   {mnesia, [{dump_log_write_threshold, 100}]},
    {rabbit, [{vm_memory_high_watermark, 0.4}]},
    {rabbitmq_shovel,
        [{shovels,
            [{devShovel,
                [{sources, [{broker, "amqp://shoveluser:shoveluser@server2:5672"}]},
                 {destinations, [{broker, "amqp://shoveluser:shoveluser@localhost:5672"}]},
                 {queue, <<"queue">>},
                 {publish_fields,[{exchange,<<"DataExchange">>}]}
                ]
            }]

        }]
    }
]. 
```

并且所有相关的队列/交换都声明我能够启动我的 rabbitmq 服务器。但是，当我检查铲子管理时，插件总是显示为铲子的状态。是什么原因造成的，有什么方法可以获取更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:57:46.357

确保检查用户在代理上的设置是否正确。

# c# - 在访问 XmlDocument.Load 之前修改伪 xml 文档

> ID：11124527
> 
> 赞同：0
> 
> 时间：2012-06-20T17:01:48.897
> 
> 标签：c#, xml, .net-3.5

我有一系列...伪xml文件。我的意思是，它们几乎是 XML 文件，但是它们缺少 xml 声明和根节点。例如，从概念上讲，它可能看起来像这样：

```
<a>info</a>
<b>info2</b> 
```

我想要做的是将它加载到一个`XmlDocument`对象中，例如类似于这样的东西：

```
 XmlDocument xml = new XmlDocument();

    using (StreamReader file = new StreamReader(File.Open(@"file.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite)))
    {
        xml.Load(file);
    } 
```

这是抛出错误，很可能是由于格式错误的伪 xml 文件。我需要在它到达`Load`. 我不想修改实际文件，或者必须将任何内容保存到磁盘（例如新的临时文件）。我被困在这个问题上，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:32:53.580

XmlDocument 还有一个解析 Xml 字符串的[LoadXml() 方法](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)。您可以将文件内容加载到字符串中，添加声明并调用 LoadXml()。当然，当您使用长文件时，这可能会非常消耗内存，请注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:42:38.297

你可以试试这个

`var xmlString = file.ReadToEnd();
xmlString = "<root>" + xmlString + "</root>";
xml.LoadXml(xmlString);`

# regex - 可以让 re-seq 表现得像 .split 吗？

> ID：11124531
> 
> 赞同：3
> 
> 时间：2012-06-20T17:02:05.473
> 
> 标签：regex, clojure

是否有一些正则表达式可以传递给 re-seq 使其表现得像`.split`？

```
user=> (seq (.split "a,b,c,,e" ","))
("a" "b" "c" "" "e")
user=> (re-seq #"[^,]" "a,b,c,,e")
("a" "b" "c" "e")
user=> 
```

如您所见，正则表达式`[^,]`不太可接受，因为它不会在分隔文件中的空列上拾取。我是坚持`.split`还是可以`re-seq`工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:31:07.927

尝试

```
(re-seq #"[^,]+|(?<=,)(?=,)" "a,b,c,,e") 
```

我希望 Clojure 正则表达式支持后向断言。

**解释：**

```
[^,]+       # Either match one or more non-comma characters
|           # or
(?<=,)(?=,) # match the empty string between two commas 
```

# python - Python标准错误和管道

> ID：11124534
> 
> 赞同：1
> 
> 时间：2012-06-20T17:02:15.300
> 
> 标签：python, pipe, stderr

我在这里搜索了很多并用谷歌搜索，试图找出为什么我的第一个命令中的 stderr 在最终的 stderr 中没有看到。我知道其他方法，例如“check_output”（python3）和“commands”（python2），但我想编写自己的跨平台方法。这是问题所在：

```
import subprocess

p1 = subprocess.Popen('dirr', shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE)
p2 = subprocess.Popen('find "j"', shell=True, stdin=p1.stdout, stderr=subprocess.PIPE, stdout=subprocess.PIPE)
p1.stdout.close()
output,error=p2.communicate()
print(output,'<----->',error) 
```

我也尝试重定向 stderr=subprocess.STDOUT，但这并没有改变事情。您能告诉我如何从第一个命令重定向标准错误，以便我可以在标准输出或标准错误中看到它吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:38:47.963

要查看第二个命令`stderr`的`stdout`/`stderr`中的第一个命令：

*   第二个命令可以读取`stderr1`，例如，从它的`stdin2`
*   第二个命令可以将此内容打印到其 stdout2/stderr2

### 例子

```
#!/usr/bin/env python
import sys
from subprocess import Popen, PIPE, STDOUT

p1 = Popen([sys.executable, '-c', """import sys; sys.stderr.write("stderr1")"""],
           stderr=STDOUT, stdout=PIPE)
p2 = Popen([sys.executable, '-c', """import sys
print(sys.stdin.read() + " stdout2")
sys.stderr.write("stderr2")"""],
           stdin=p1.stdout, stderr=PIPE, stdout=PIPE)
p1.stdout.close()
output, error = p2.communicate()
p1.wait()
print(output, '<----->', error) 
```

### 输出

```
('stderr1 stdout2\n', '<----->', 'stderr2') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T17:06:07.547

对于 p2，您不应该将 subprocess.PIPE 用于任何一个输出，因为您没有将其通过管道传输到另一个程序。

# android - Android 上的 CpuFreq

> ID：11124538
> 
> 赞同：0
> 
> 时间：2012-06-20T17:02:42.587
> 
> 标签：android, api, cpu

我试图找到 Android 设备的每秒周期数，偶然发现了这个 API 类：[http ://static.meizu.com/m9sdk/reference/android/os/CPUfreq.html](http://static.meizu.com/m9sdk/reference/android/os/CPUfreq.html)

以前有人用过这个吗？读取和保存方法有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:06:53.577

> 偶然发现了这个 API 类

Android SDK中没有CpuFreq，目前的Android源码中似乎也没有这样的类。

> 以前有人用过这个吗？

希望不会，除非在固件应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:44:32.277

您可以尝试读取此文件 /sys/devices/system/cpu/cpu[x]/cpufreq/scaling_cur_freq (x 从 0 开始到总核心数 - 1) 以获取每个核心的当前 cpu 频率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:44:45.387

如果您想要它的每秒周期数，您可以轻松修改`Perf`以提供此统计信息。`perf stat`默认情况下为您提供在很长一段时间内收集的统计信息。但是，修改它非常简单，`perf`可以在更小的间隔内为您提供统计信息。

要包含`perf`到您的 android 源代码中，您应该

`git clone https://android.googlesource.com/platform/external/linux-tools-perf/`在你的`external`文件夹中

# java - 如何通过钥匙获得锁

> ID：11124539
> 
> 赞同：37
> 
> 时间：2012-06-20T17:02:42.657
> 
> 标签：java, algorithm, synchronization, locking

防止在不锁定整个集合的情况下同时更新键值集中的一条记录的最佳方法是什么？从语义上讲，我正在寻找某种按键锁定（理想情况下，Java 实现，但不一定）：

```
interface LockByKey {
   void lock(String key); // acquire an exclusive lock for a key   
   void unlock(String key); // release lock for a key
} 
```

此锁旨在同步对远程存储的访问，因此某些同步的 Java 集合不是一个选项。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-20T18:11:48.620

Guava 在 13.0 中发布了类似的东西；如果你愿意，你可以把它从 HEAD 中取出。

[`Striped<Lock>`](https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/Striped.java)或多或少分配特定数量的锁，然后根据其哈希码将字符串分配给锁。API看起来或多或少像

```
Striped<Lock> locks = Striped.lock(stripes);
Lock l = locks.get(string);
l.lock();
try {
  // do stuff 
} finally {
  l.unlock();
} 
```

或多或少，可控制的条带数量让您可以用内存使用来交换并发性，因为为每个字符串键分配一个完整的锁可能会很昂贵；本质上，只有在遇到哈希冲突时才会出现锁争用，而哈希冲突（可以预见）很少见。

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-12T19:02:50.753

```
private static final Set<String> lockedKeys = new HashSet<>();

private void lock(String key) throws InterruptedException {
    synchronized (lockedKeys) {
        while (!lockedKeys.add(key)) {
            lockedKeys.wait();
        }
    }
}

private void unlock(String key) {
    synchronized (lockedKeys) {
        lockedKeys.remove(key);
        lockedKeys.notifyAll();
    }
}

public void doSynchronously(String key) throws InterruptedException {
    try {
        lock(key);

        //Do what you need with your key.
        //For different keys this part is executed in parallel.
        //For equal keys this part is executed synchronously.

    } finally {
        unlock(key);
    }
} 
```

**try-finally** - 非常重要 - 即使您的操作抛出异常，您也必须保证在操作后解锁等待线程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-27T07:30:29.147

我编写了一个可以动态锁定任何键的类。它使用静态`CuncurrentHashMap`. 但如果不使用锁，则地图为空。作为我们基于键创建的新对象，语法可能会令人困惑。如果不使用，它会清理上的锁`unlock`。保证`DynamicKeyLock`基于两个相等/hascode 键创建的任何两个，它们将被相互锁定。

请参阅 Java 8、Java 6 的实现和一个小测试。

爪哇 8：

```
public class DynamicKeyLock<T> implements Lock
{
    private final static ConcurrentHashMap<Object, LockAndCounter> locksMap = new ConcurrentHashMap<>();

    private final T key;

    public DynamicKeyLock(T lockKey)
    {
        this.key = lockKey;
    }

    private static class LockAndCounter
    {
        private final Lock lock = new ReentrantLock();
        private final AtomicInteger counter = new AtomicInteger(0);
    }

    private LockAndCounter getLock()
    {
        return locksMap.compute(key, (key, lockAndCounterInner) ->
        {
            if (lockAndCounterInner == null) {
                lockAndCounterInner = new LockAndCounter();
            }
            lockAndCounterInner.counter.incrementAndGet();
            return lockAndCounterInner;
        });
    }

    private void cleanupLock(LockAndCounter lockAndCounterOuter)
    {
        if (lockAndCounterOuter.counter.decrementAndGet() == 0)
        {
            locksMap.compute(key, (key, lockAndCounterInner) ->
            {
                if (lockAndCounterInner == null || lockAndCounterInner.counter.get() == 0) {
                    return null;
                }
                return lockAndCounterInner;
            });
        }
    }

    @Override
    public void lock()
    {
        LockAndCounter lockAndCounter = getLock();

        lockAndCounter.lock.lock();
    }

    @Override
    public void unlock()
    {
        LockAndCounter lockAndCounter = locksMap.get(key);
        lockAndCounter.lock.unlock();

        cleanupLock(lockAndCounter);
    }

    @Override
    public void lockInterruptibly() throws InterruptedException
    {
        LockAndCounter lockAndCounter = getLock();

        try
        {
            lockAndCounter.lock.lockInterruptibly();
        }
        catch (InterruptedException e)
        {
            cleanupLock(lockAndCounter);
            throw e;
        }
    }

    @Override
    public boolean tryLock()
    {
        LockAndCounter lockAndCounter = getLock();

        boolean acquired = lockAndCounter.lock.tryLock();

        if (!acquired)
        {
            cleanupLock(lockAndCounter);
        }

        return acquired;
    }

    @Override
    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException
    {
        LockAndCounter lockAndCounter = getLock();

        boolean acquired;
        try
        {
            acquired = lockAndCounter.lock.tryLock(time, unit);
        }
        catch (InterruptedException e)
        {
            cleanupLock(lockAndCounter);
            throw e;
        }

        if (!acquired)
        {
            cleanupLock(lockAndCounter);
        }

        return acquired;
    }

    @Override
    public Condition newCondition()
    {
        LockAndCounter lockAndCounter = locksMap.get(key);

        return lockAndCounter.lock.newCondition();
    }
} 
```

爪哇 6：

```
public class DynamicKeyLock<T> implements Lock
{
    private final static ConcurrentHashMap<Object, LockAndCounter> locksMap = new ConcurrentHashMap<Object, LockAndCounter>();
    private final T key;

    public DynamicKeyLock(T lockKey) {
        this.key = lockKey;
    }

    private static class LockAndCounter {
        private final Lock lock = new ReentrantLock();
        private final AtomicInteger counter = new AtomicInteger(0);
    }

    private LockAndCounter getLock()
    {
        while (true) // Try to init lock
        {
            LockAndCounter lockAndCounter = locksMap.get(key);

            if (lockAndCounter == null)
            {
                LockAndCounter newLock = new LockAndCounter();
                lockAndCounter = locksMap.putIfAbsent(key, newLock);

                if (lockAndCounter == null)
                {
                    lockAndCounter = newLock;
                }
            }

            lockAndCounter.counter.incrementAndGet();

            synchronized (lockAndCounter)
            {
                LockAndCounter lastLockAndCounter = locksMap.get(key);
                if (lockAndCounter == lastLockAndCounter)
                {
                    return lockAndCounter;
                }
                // else some other thread beat us to it, thus try again.
            }
        }
    }

    private void cleanupLock(LockAndCounter lockAndCounter)
    {
        if (lockAndCounter.counter.decrementAndGet() == 0)
        {
            synchronized (lockAndCounter)
            {
                if (lockAndCounter.counter.get() == 0)
                {
                    locksMap.remove(key);
                }
            }
        }
    }

    @Override
    public void lock()
    {
        LockAndCounter lockAndCounter = getLock();

        lockAndCounter.lock.lock();
    }

    @Override
    public void unlock()
    {
        LockAndCounter lockAndCounter = locksMap.get(key);
        lockAndCounter.lock.unlock();

        cleanupLock(lockAndCounter);
    }

    @Override
    public void lockInterruptibly() throws InterruptedException
    {
        LockAndCounter lockAndCounter = getLock();

        try
        {
            lockAndCounter.lock.lockInterruptibly();
        }
        catch (InterruptedException e)
        {
            cleanupLock(lockAndCounter);
            throw e;
        }
    }

    @Override
    public boolean tryLock()
    {
        LockAndCounter lockAndCounter = getLock();

        boolean acquired = lockAndCounter.lock.tryLock();

        if (!acquired)
        {
            cleanupLock(lockAndCounter);
        }

        return acquired;
    }

    @Override
    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException
    {
        LockAndCounter lockAndCounter = getLock();

        boolean acquired;
        try
        {
            acquired = lockAndCounter.lock.tryLock(time, unit);
        }
        catch (InterruptedException e)
        {
            cleanupLock(lockAndCounter);
            throw e;
        }

        if (!acquired)
        {
            cleanupLock(lockAndCounter);
        }

        return acquired;
    }

    @Override
    public Condition newCondition()
    {
        LockAndCounter lockAndCounter = locksMap.get(key);

        return lockAndCounter.lock.newCondition();
    }
} 
```

测试：

```
public class DynamicKeyLockTest
{
    @Test
    public void testDifferentKeysDontLock() throws InterruptedException
    {
        DynamicKeyLock<Object> lock = new DynamicKeyLock<>(new Object());
        lock.lock();
        AtomicBoolean anotherThreadWasExecuted = new AtomicBoolean(false);
        try
        {
            new Thread(() ->
            {
                DynamicKeyLock<Object> anotherLock = new DynamicKeyLock<>(new Object());
                anotherLock.lock();
                try
                {
                    anotherThreadWasExecuted.set(true);
                }
                finally
                {
                    anotherLock.unlock();
                }
            }).start();
            Thread.sleep(100);
        }
        finally
        {
            Assert.assertTrue(anotherThreadWasExecuted.get());
            lock.unlock();
        }
    }

    @Test
    public void testSameKeysLock() throws InterruptedException
    {
        Object key = new Object();
        DynamicKeyLock<Object> lock = new DynamicKeyLock<>(key);
        lock.lock();
        AtomicBoolean anotherThreadWasExecuted = new AtomicBoolean(false);
        try
        {
            new Thread(() ->
            {
                DynamicKeyLock<Object> anotherLock = new DynamicKeyLock<>(key);
                anotherLock.lock();
                try
                {
                    anotherThreadWasExecuted.set(true);
                }
                finally
                {
                    anotherLock.unlock();
                }
            }).start();
            Thread.sleep(100);
        }
        finally
        {
            Assert.assertFalse(anotherThreadWasExecuted.get());
            lock.unlock();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:21:44.840

如果你提到的“记录”是一个可变对象，而“更新”是指在不干扰容器结构的情况下修改了对象的内部状态，那么你只需锁定记录对象即可完成你想要的。

但是，如果“更新”意味着从容器中删除记录对象并替换它，那么您必须锁定整个容器以防止其他线程看到它处于不一致状态。

无论哪种情况，您都应该查看`java.util.concurrent`包中的类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T17:04:21.460

每个桶保持一个互斥锁/锁。这将确保只有冲突在该互斥体上等待。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-03-17T08:17:44.800

就是这样；我做到了。是的，我同意如果两个不同的字符串共享相同的哈希码最终会获得相同的锁。

```
class LockByKey {
    ObjectForString objHolder = new ObjectForString(100);
    public void lockThenWorkForKey (String key) {
        synchronized(objHolder.valueOf(key)){
            //DoSomeWork
        }
    }
}

public final class ObjectForString {

    private final Object[] cache;
    private final int cacheSize;
    final int mask;

    public ObjectForString(int size) {
        // Find power-of-two sizes best matching arguments
        int ssize = 1;
        while (ssize < size) {
            ssize <<= 1;
        }

        mask = ssize - 1;
        cache = new Object[ssize];
        cacheSize = ssize;
        //build the Cache
        for (int i = 0; i < cacheSize; i++) {
            this.cache[i] = new Object();
        }
    }

    public Object valueOf(String key) {
        int index = key.hashCode();
        return cache[index & mask];
    }
} 
```

# java - 与在电子邮件签名中实现图像有关的一些问题？

> ID：11124540
> 
> 赞同：1
> 
> 时间：2012-06-20T17:02:46.543
> 
> 标签：java, email, base64, mime-types

我需要用图像实现电子邮件签名。截至目前，我们只支持已经工作的电子邮件签名中的文本。我需要提供可以在邮件签名中插入图像的功能。我可以将电子邮件发送给 myapplication 中的用户，也可以发送给 gmail、yahoo 等外部邮件域上的用户。当邮件发送给我的应用程序系统中的某个用户时，系统会进入数据库，并且当接收者在收件箱中接收时（内部从 db 读取邮件）。现在，如果用户在 gmail 上将邮件发送给外部用户，它会使用 javax mail api。同样，我可以接收来自外部邮件域（gmail、yahoo 等）的电子邮件现在我有几个问题基于 tis 要求：-

**1）对于像gmail这样的外部邮件域如何将签名内的图像发送到另一个域，比如（我的应用程序邮件域），是否有任何标准？与它相关的另一点 gmail 用户可以有两张图片，一张用于签名，另一张用于正文。我将如何确定哪个图像属于签名？是否有任何已定义的属性？**

**2）也无法确定发送（无论是内部应用程序用户还是外部邮件域用户）包含图像的电子邮件签名的最佳/一致方法是什么，以便在用户收到图像时正确呈现？**

我对第 2 点的想法是：- 我早些时候认为我可以使用[如何在 jsp 中显示图像中建议的解决方案？](https://stackoverflow.com/questions/5243726/how-to-display-an-image-in-jsp). 使用标签**<.img src="/getImage.action?imageId=123">**，我可以从动作类或 servlet 中的 db 获取图像并返回。但请记住，一旦我在 gmail 上将邮件发送给用户，他将无法访问 servlet。所以这种方法似乎不符合要求。 **然后我在电子邮件签名中遇到了另一个很棒的 stackoverflow 链接** [base64 编码图像，](https://stackoverflow.com/questions/9110091/base64-encoded-images-in-email-signatures)其中 Tim Medora 的解决方案看起来很棒，但是***解决方案下方的评论 Gmail 似乎不支持它***再次结束我的朋友们，我真的认为如果像 gmail、雅虎这样的邮件域支持建议的解决方案，我应该这样做，因为在这种情况下，我可以将图像作为 base64 字符串而不是图像作为附件发送。

如果您能就第 1 点和第 2 点向我提供一些指示/方法，人们将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:27:30.013

要在电子邮件中包含图像，首先您必须将图像作为 MIME 附件包含在电子邮件中。这些附件中的每一个都必须有一个“Content-ID”标头。

```
--f46d0444ea0d6991ba04b91c92e6
Content-Type: image/gif; name="theImage.gif"
Content-Transfer-Encoding: base64
Content-ID: <theImage@abcd>

[base64 string]
--f46d0444ea0d6991ba04b91c92e6-- 
```

2) 然后，在电子邮件消息中，将 Content-ID 包含在标签的`src`属性中。`<img>`

```
<img src="cid:theImage@abcd" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T07:49:28.510

为了让 Gmail 从字节数组中查看嵌入的图像，我发布了[另一个类似问题](https://stackoverflow.com/questions/9110091/base64-encoded-images-in-email-signatures/29205203#29205203)的答案，即使用 ByteArrayDataSource 并将其嵌入到 HtmlEmail 中。这是代码片段：

```
import javax.mail.util.ByteArrayDataSource;
import org.apache.commons.mail.ImageHtmlEmail;
...
ImageHtmlEmail email = new ImageHtmlEmail();
byte[] qrImageBytes = createQRCode(); // get your image byte array
ByteArrayDataSource qrImageDataSource = new ByteArrayDataSource(qrImageBytes, "image/png");
String contentId = email.embed(qrImageDataSource, "QR Image"); 
```

# android - 我可以从我的活动中更改活动标签吗？

> ID：11124543
> 
> 赞同：1
> 
> 时间：2012-06-20T17:02:58.137
> 
> 标签：android

我有一个要在多个视图之间切换的活动，并且在每个视图中我都希望更改活动标签。这可能吗？这是我的清单文件。

```
 <activity android:name=".MiscParamsTwo"
        android:label="@string/misc_parameters2" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity> 
```

每次切换视图时，我都想更改“@string/misc_parameters2”。我正在通过 android 菜单执行此操作。

```
case R.id.item3:
        // Anti-Pump
        setContentView( R.layout.antipump_phaserotation );
        return true;
    case R.id.item4:
        // Relaxed Close
        setContentView( R.layout.relaxed_close );
        return true;
    case R.id.item5:
        // Misc Parameters 1
        setContentView( R.layout.misc_params_one );
        return true;
    case R.id.item6:
        setContentView( R.layout.misc_params_two );
        // Misc Parameters 2
        return true;
    case R.id.item7:
        setContentView( R.layout.dnp_three );
        // DNP3 Setup
        return true; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:04:16.677

打电话

```
setTitle("New title"); 
```

或者如果您在 strings.xml 文件中声明了一个字符串

```
setTitle(R.string.title_resource_string); 
```

# python - 使用特定条件从文件中选择行

> ID：11124545
> 
> 赞同：0
> 
> 时间：2012-06-20T17:03:03.817
> 
> 标签：python, file-io, python-2.7

我是 Python 新手，需要帮助：

我有一个包含这些行的文件（见下文）。我想从此文件中复制行，并且由于某些行具有相似的日期，如果行具有相似的日期，我想选择具有最小值的行结束列表。

```
'1990-01-01','f','2'
'1990-01-02','c','4'
'1990-01-01','j','2.5'
'1990-01-01','j','1.5'
'1990-01-02','b','3.9' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:59:26.437

先上一些代码：

```
text_data = """'1990-01-01','f','2'
'1990-01-02','c','4'
'1990-01-01','j','2.5'
'1990-01-01','j','1.5'
'1990-01-02','b','3.9'
"""

import csv
from StringIO import StringIO
from operator import itemgetter
from itertools import groupby

temp = StringIO(text_data)
tabular = list(csv.reader(temp, quotechar="'"))
tabular.sort(key=lambda L: (L[0], float(L[2]))

for key, val in groupby(tabular, itemgetter(0)):
    print next(val) # or do something appropriate 
```

我已将文本放入代码中并将其包装在 StringIO 对象中以模拟文件，但通常人们会使用 csv.reader 在使用 open() 的文件上打开文本。

然后数据按数据列（索引 0）和值列（索引 2）排序 - 这种排序顺序确保相同的日期在一起（我意识到你提到了“相似”，但这个配方可以调整）并且对于每个日期，最低值列首先出现。

itertools.groupby() 用于迭代匹配某些条件的键——当它们满足该条件时，它们在同一个“组”中。'key' （分组依据）将是日期的值，而 'val' 将是该键中可用值的另一个可迭代。由于只需要第一个，因此使用 next(val) 将返回具有最小值的结果。

输出是：

```
['1990-01-01', 'j', '1.5']
['1990-01-02', 'b', '3.9'] 
```

# zend-framework - 以特定顺序从每个模块加载/执行基于模块的引导程序

> ID：11124552
> 
> 赞同：-2
> 
> 时间：2012-06-20T17:03:27.257
> 
> 标签：zend-framework

我在每个模块中都有模块引导文件，并且这些文件正在按文件系统顺序加载（我相信）。如何使它们按我指定的特定顺序加载/执行？

我的应用程序中有 4 个模块。

```
1\. 1module
2\. 2module
3\. 3module
4\. 4module. 
```

每个模块都有自己的引导程序，根据文件系统的顺序加载。在上述情况下。应用程序按以下顺序加载上述模块的引导程序。

```
1\. loads bootstrap of module 1
2\. loads bootstrap of module 2
3\. loads bootstrap of module 3
4\. loads bootstrap of module 4\. 
```

但我喜欢按以下顺序或指定的任何顺序加载模块的引导程序。

```
1\. loads bootstrap of module 3
2\. loads bootstrap of module 1
3\. loads bootstrap of module 4
4\. loads bootstrap of module 2 
```

如何更改顺序？

相关阅读，但不是我要找的。

[http://phpdev.ro/zf-tutorial-series-part-1-module-based-app.html](http://phpdev.ro/zf-tutorial-series-part-1-module-based-app.html)

[http://forums.zend.com/viewtopic.php?f=69&t=1589](http://forums.zend.com/viewtopic.php?f=69&t=1589)

[http://www.stephenrhoades.com/?p=386](http://www.stephenrhoades.com/?p=386)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:12:12.283

通常，没有明确指定引导顺序。

但是，如果一个应用程序资源或`_initXXX()`方法需要首先初始化另一个资源，您可以调用：

```
$bootstrap->bootstrap('someResource');
$someResource = $bootstrap->getResource('someResource'); 
```

以确保命名的资源`someResource`在使用之前全部启动。

请注意，如果您在应用程序引导扩展`Zend_Application_Bootstrap_Bootstrap`中，则调用是：

```
$this->bootstrap('someResource');
$someResource = $this->getResource('someResource'); 
```

如果您处于扩展模块引导程序中`Zend_Application_Module_Bootstrap`，则它会稍微更改为：

```
$application = $this->getApplication();
$application->bootstrap('someResource');
$someResource = $application->getResource('someResource'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:24:15.667

这样做的唯一方法是按字母顺序在模块前面加上一个字母。或者，覆盖 Zend_Application_Module_Bootstrap/Zend_Application_Resource_Modules 并给它一个配置文件，其中包含它应该引导的顺序。

# c# - 工厂方法返回 null 可以吗？

> ID：11124562
> 
> 赞同：29
> 
> 时间：2012-06-20T17:03:55.923
> 
> 标签：c#, oop, design-patterns, factory-method

我想知道这里的最佳实践。如果工厂方法无法创建任何内容，则返回 null 是一种好习惯吗？这是一个例子：

```
ICommand command = CommandFactory.CreateCommand(args);
if (command != null)
    command.Execute();
else
    // do something else if there is no command 
```

我猜另一种选择是返回 a`NullCommand`或其他东西，但最佳实践是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-20T17:04:59.253

我认为工厂方法在某些情况下返回 null 可能是合理的，但*如果*它是一个名为`CreateCommand`. 如果是`GetCommand`or `FetchCommand`，那可能没问题...但是`Create`我建议方法应该在失败时抛出异常。

当然，您是否*真的*希望它在这种情况下回归`null`取决于​​更大的图景。（例如，您可以返回一个合理的空对象实现吗？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:11:30.100

我同意乔恩·斯基特的观点。`CreateCommand`显然意味着建设。

如果你不抛出`Exception`，那么在那种情况下，我会亲自去`NullCommand`实现，以避免所有消费者中的条件语句和可能的`NullReferenceException`错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T17:19:41.793

在这种情况下返回`null`会使你的方法更难使用；客户必须意识到隐含的故障条件。相反，抛出异常，您还可以为客户端提供单独的方法来测试这种情况：

```
if (CommandFactory.CanCreate(args)) {
  ICommand command = CommandFactory.Create(args);
  command.Execute();
} 
```

或者使工厂可实例化；如果您需要预处理会更好`args`：

```
CommandFactory factory = new CommandFactory(args);
if (factory.IsValid()) {
  ICommand command = factory.Create();
  command.Execute();
} 
```

工厂的接口现在清楚明确地表明创建可能会失败，但它仍然需要客户端使用检查方法。另一种选择是：

```
ICommand command;
if (CommandFactory.TryCreate(args, out command)) {
  // creation succeeded ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:20:27.903

*只有当您希望*用户每次调用 Create 时都必须检查 null 时，才返回 Null 才有意义。通常，您会认为以下是完全有效的使用模式：

```
var obj = MyFactory.CreateThing();
obj.DoSomething(); 
```

但是您建议的是强制以下使用模式：

```
var obj = MyFactory.CreateThing();
if (obj == Null) {
    // Handle null condition
} else {
    obj.DoSomething();
} 
```

通常，*Null*场景意味着某种失败，在这种情况下，异常可能最有意义。但最终你是这里的音乐制作人，你必须决定在你正在构建的世界中什么是明智的。

# iphone - UIImage 获取视网膜大小

> ID：11124565
> 
> 赞同：2
> 
> 时间：2012-06-20T17:03:59.943
> 
> 标签：iphone, objective-c, uiimage, retina-display

我想知道如何检索 UIImage 大小，具体取决于我使用的显示类型。

```
UIImage * refimg = [UIImage imageNamed:@"people-there.png"];
NSLog(@"SIZE: %f",refimg.size.height); 
```

输出是

```
SIZE: 62.000000 
```

... 在 iPhone 3gs 和 iPhone 4g 上。我在与“people-there.png”相同的目录中有图像“people-there@2x.png”

如何在视网膜显示屏上获得“SIZE：124.000”？

提前致谢，

卢卡斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:01:49.320

UIImage 有一个`scale`可以使用的属性。

```
UIImage * refimg = [UIImage imageNamed:@"people-there.png"];
NSLog(@"SIZE: %f", refimg.scale * refimg.size.height); 
```

# selenium - 带有无头硒的 HTMLUNIT

> ID：11124566
> 
> 赞同：1
> 
> 时间：2012-06-20T17:04:06.683
> 
> 标签：selenium, htmlunit, headless

我正在尝试使用无头 Selenium 抓取包含图像的网站。最初，该网站填充了 50 张图像。如果向下滚动，就会加载越来越多的图像。

Windows 7 x64
python 2.7
最近安装的 selenium

[1] 非无头
导航到带有 selenium 的网站如下：

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get(url)
browser.execute_script('window.scrollBy(0, 10000)')
browser.page_source 
```

这有效（如果有人有更好的建议，请告诉我）。
我可以继续*scrollBy()*直到我到达最后，然后拉出源页面。

[2] 使用 HTMLUNIT 无头

```
from selenium import webdriver
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNIT)
driver.get(url) 
```

我不能在这种无头环境中使用*scrollBy() 。*
有关如何抓取此类页面的任何建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T06:23:21.810

`java`当我尝试相同的方法时，我收到了 selenium 在连接到模拟时崩溃的错误消息`javascript`。

我将脚本写入 execute_script 方法，然后代码运行良好。

我猜 selenium 和 java 服务器部分之间的通信配置不正确。

启用`javascript`with`HTMLUNITDRIVERWITHJS`是可能且快速的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:31:44.390

使用 HtmlUnit 驱动程序时需要显式启用 JavaScript：

```
driver.setJavascriptEnabled(true); 
```

根据 [http://code.google.com/p/selenium/wiki/HtmlUnitDriver](the docs)，默认情况下它应该模拟 IE 的 JavaScript 处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:00:10.027

一种选择是研究 JavaScript 以了解它如何计算接下来要加载的内容。然后在您的抓取客户端中实现该逻辑。一旦你这样做了，你就可以使用更快的抓取工具，比如 Perl 的 WWW::Mechanize。

# windows - 什么是命令“date+%s”的windows等价物

> ID：11124572
> 
> 赞同：4
> 
> 时间：2012-06-20T17:04:39.190
> 
> 标签：windows, bash, command-line, batch-file, unix-timestamp

我正在编写一个批处理脚本，我需要 unix 时间。在linux下很容易，但我不知道如何在windows中做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T21:48:14.103

这是一个本机批处理解决方案，应该适用于任何语言环境。它使用 WMIC 以独立于区域设置的方式获取当前本地时间。其他一切都是字符串解析和基本数学的“简单”问题。

```
:UnixTime  [ReturnVar]  [TimeStamp]
::
:: Computes the Unix time from the current local time as reported by the
:: operating system. The Unix time is the number of seconds that have elapsed
:: since midnight Coordinated Universal Time (UTC), January 1, 1970, not
:: counting leap seconds.
::
:: The result is returned in variable ReturnVar,
:: or the result is echoed if ReturnVar is not specified
::
:: If the TimeStamp is provided in the 2nd parameter, then the Unix time for
:: the TimeStamp is computed, rather then for the current time.
::
:: The TimeStamp must have the same format as used by WMIC:
::
::   YYYYMMDDhhmmss.ffffffSzzz
::
:: where:
::
::   YYYY   = gregorian year
::   MM     = month
::   DD     = day
::   hh     = hour in 24 hour format
::   mm     = minute
::   ss     = seconds
::   ffffff = fractional seconds (microseconds)
::   S      = timezone sign: + or -
::   zzz    = timezone: minutes difference from GMT
::
:: Each component must be zero prefixed as needed to maintain the proper width.
::
:: The ReturnVar parameter must be provided in order to use the TimeStamp.
:: A ReturnVar of "" will function the same as no ReturnVar. This enables the
:: specification of a TimeStamp without an actual ReturnVar.
::
@echo off
setlocal
set "ts=%~2"
if not defined ts for /f "skip=1 delims=" %%A in ('wmic os get localdatetime') do if not defined ts set "ts=%%A"
set /a "yy=10000%ts:~0,4% %% 10000, mm=100%ts:~4,2% %% 100, dd=100%ts:~6,2% %% 100"
set /a "dd=dd-2472663+1461*(yy+4800+(mm-14)/12)/4+367*(mm-2-(mm-14)/12*12)/12-3*((yy+4900+(mm-14)/12)/100)/4"
set /a ss=(((1%ts:~8,2%*60)+1%ts:~10,2%)*60)+1%ts:~12,2%-366100-%ts:~21,1%((1%ts:~22,3%*60)-60000)
set /a ss+=dd*86400
endlocal & if "%~1" neq "" (set %~1=%ss%) else echo %ss%
exit /b 
```

*请注意，此解决方案的使用寿命有限。当 Unix 时间超过有符号 32 位整数的最大值时，它将在 2038-01-19 停止工作。*

***编辑***- 代码已被编辑以支持在命令行上转换时间戳字符串而不是当前本地时间。支持的精确时间范围是 1901-12-13 20:45:52.000000 到 2038-01-19 03:14:07.999999 GMT。1970-01-01 00:00:00.000000 之前的时间将产生负值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:16:12.807

如果“unix 时间”是指[纪元秒](http://en.wikipedia.org/wiki/Unix_time)，那么 Windows 不包含生成该时间的工具。相反，您可以安装第三方工具。例如：

*   安装[Cygwin](http://www.cygwin.com/)。
*   找到`date`二进制文件（在`C:\Cygwin\`你安装它的下面或任何地方）
*   像在 Linux 中一样使用它。

或者，根据对此答案的精彩评论，您可以安装还包含命令的[GNU Coreutils](http://gnuwin32.sourceforge.net/packages/coreutils.htm)`date`。它包括许多您可能不需要的其他工具，但是 Cygwin 也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T17:54:59.997

您可以在 windows 中使用 vbscript，解释器在您的系统上可用。

```
'--------------------epoch.vbs----------------------- 
option explicit
dim s,o,z
for each o in GetObject("winmgmts:").InstancesOf ("Win32_OperatingSystem")
z=o.CurrentTimeZone
next
s=DateDiff("s", "01/01/1970 00:00:00", Now())-(60*z)
wscript.echo(s)
wscript.quit 
```

# android - 实现不同视图之间的滑动

> ID：11124573
> 
> 赞同：0
> 
> 时间：2012-06-20T17:04:40.267
> 
> 标签：android, android-actionbar

我今天一直在更新一个 Android 应用程序，到目前为止它只有一个`TableLayout`基于`View`. 现在，我想`View`用另一组支持数据复制它，并使用水平滑动在两者之间切换。在某些时候，我还想添加具有不同 TableLayout 的第三个“页面”。

我还没有真正找到任何好的方法来实现这一点。我一直在查看[http://developer.android.com/training/implementing-navigation/lateral.html](http://developer.android.com/training/implementing-navigation/lateral.html)，实际上我复制了 Tabs Pattern 的代码片段`NAVIGATION_MODE_TABS`。这会导致将一个小的下拉小部件添加到`View`操作栏中的标题中，但单击它不会显示我设置的选项卡（带有`actionBar.addTab()`）。我也不确定如何设置视图（XML）代码以将`TableLayout`s 粘贴在那里。

我应该提到，我不必为此关心 4.0 之前的 Android，因此兼容性不是（大部分）问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:10:11.250

尝试使用 ViewPager 小部件，您可以在网络上找到有用的链接，这个小部件处理视图之间的水平滑动。

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

[http://blog.stylingandroid.com/archives/537#](http://blog.stylingandroid.com/archives/537#)

![在此处输入图像描述](../Images/dbf49a3f26a05ea23687fb66a4a1bb6a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:10:00.677

> 我还没有真正找到任何好的方法来实现这一点。

试试`ViewPager`。这是一篇 Android 开发者博客文章`ViewPager`：[http ://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

这是一个使用的小示例应用程序`ViewPager`：[https ://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:08:31.327

其他答案都没有太大帮助。但是，这个非常好：

[http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

# python - 进入python或ipython解释器时自动导入模块

> ID：11124578
> 
> 赞同：135
> 
> 时间：2012-06-20T17:04:51.863
> 
> 标签：python, numpy, ipython

我发现自己`import numpy as np`几乎每次启动 python 解释器时都在打字。如何设置 python 或 ipython 解释器以便自动导入 numpy？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-20T17:22:38.517

对于 ipython，有两种方法可以实现这一点。两者都涉及 ipython 的配置目录，该目录位于`~/.ipython`.

1.  创建自定义 ipython 配置文件。
2.  或者你可以添加一个启动文件到`~/.ipython/profile_default/startup/`

为简单起见，我将使用选项 2。您所要做的就是在目录中放置一个`.py`或`.ipy`文件，`~/.ipython/profile_default/startup`它将自动执行。因此，您可以简单地放置`import numpy as np`在一个简单的文件中，并且您将在 ipython 提示符的命名空间中拥有 np。

选项 2 实际上将使用自定义配置文件，但使用自定义配置文件将允许您根据特定情况更改启动要求和其他配置。但是，如果您*总是*想随时待命，那么请务必`np`将其放在启动目录中。

有关 ipython 配置的更多信息。[文档](http://ipython.readthedocs.io/en/stable/interactive/tutorial.html#startup-files)有更完整的解释。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-06-20T17:07:08.950

使用环境变量[PYTHONSTARTUP](http://docs.python.org/using/cmdline.html#envvar-PYTHONSTARTUP)。来自官方文档：

> 如果这是一个可读文件的名称，则该文件中的 Python 命令会在第一个提示以交互模式显示之前执行。该文件在执行交互式命令的同一名称空间中执行，以便在其中定义或导入的对象可以在交互式会话中使用而无需限定。

因此，只需使用 import 语句创建一个 python 脚本并将环境变量指向它。话虽如此，请记住“显式总是比隐式好”，所以不要依赖这种行为来生产脚本。

对于 Ipython，请参阅[本](http://ipython.readthedocs.io/en/stable/config/intro.html)教程以了解如何制作 ipython_config 文件

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-20T17:37:54.783

我使用这样的 ~/.startup.py 文件：

```
# Ned's .startup.py file
print("(.startup.py)")
import datetime, os, pprint, re, sys, time
print("(imported datetime, os, pprint, re, sys, time)")

pp = pprint.pprint 
```

然后定义 PYTHONSTARTUP=~/.startup.py，Python 会在启动 shell 时使用它。

打印语句在那里，所以当我启动 shell 时，我会收到一个提醒，它已经生效，并且已经导入了什么。快捷`pp`方式也很方便......

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-16T13:38:27.873

作为已接受答案的更简单替代方法，在 linux 上：

只需定义一个别名，例如放入`alias pynp='python -i -c"import numpy as np"'`您的 ~/.bash_aliases 文件中。然后你可以调用 python+numpy with `pynp`，你仍然可以只使用 python with `python`。Python 脚本的行为保持不变。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-12-27T22:18:06.790

虽然创建像[ravenac95](https://stackoverflow.com/users/1142531/ravenac95) [建议](https://stackoverflow.com/questions/11124578/automatically-import-modules-when-entering-the-python-or-ipython-interpreter/11124846#11124846)的自定义启动脚本是大多数情况下的最佳通用答案，但在您想要使用`from __future__ import X`. 如果您有时在 Python 2.x 中工作但想使用现代除法，那么只有一种方法可以做到这一点。创建配置文件后，编辑`profile_default`（对于 Ubuntu，位于 中`~/.ipython/profile_default`）并在底部添加如下内容：

```
c.InteractiveShellApp.exec_lines = [
    'from __future__ import division, print_function',
    'import numpy as np',
    'import matplotlib.pyplot as plt',
    ] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-11T03:56:28.113

你可以创建一个普通的 python 脚本，`import_numpy.py`或者任何你喜欢的东西

```
#!/bin/env python3
import numpy as np 
```

然后用`-i`标志启动它。

`python -i import_numpy.py`

这样的方式将使您可以灵活地为不同的项目选择只需要的模块。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-24T15:20:55.827

正如[ravenac95](https://stackoverflow.com/users/1142531/ravenac95)在他的[回答](https://stackoverflow.com/a/11124846/513397)中提到的，您可以创建自定义配置文件或修改默认配置文件。这个答案是`import numpy as np`自动所需的 Linux 命令的快速视图。

如果要使用名为 的自定义配置文件`numpy`，请运行：

```
ipython profile create numpy
echo 'import numpy as np' >> $(ipython locate profile numpy)/startup/00_imports.py
ipython --profile=numpy 
```

或者，如果您想修改默认配置文件以始终导入 numpy：

```
echo 'import numpy as np' >> $(ipython locate profile default)/startup/00_imports.py
ipython 
```

查看[IPython 配置教程](http://ipython.readthedocs.org/en/stable/config/intro.html)以深入了解配置配置文件。请参阅`.ipython/profile_default/startup/README`以了解启动目录的工作原理。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-24T21:16:14.143

我的默认`ipython`调用是

```
ipython --pylab --nosep --InteractiveShellApp.pylab_import_all=False 
```

`--pylab``ipython`一段时间以来一直是一种选择。它进口`numpy`和（部分）`matplotlib`。我添加了该`--Inter...`选项，因此它不使用`*`导入，因为我更喜欢使用显式的`np....`.

这可以是快捷方式、别名或脚本。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-15T10:20:00.033

我创建了一个小脚本来使用您想要的代码初始化 ipython。

*   `start.ipy`在项目根文件夹中创建一个文件。
*   使用进入 ipython 所需的所有内容编辑创建的文件。
*   `ipython profile create <your_profile_name>`. 提示，不要在名称中添加单词“profile”，因为 ipython 已经包含它。
*   `cp start.ipy ~/.ipython/profile_<your_profile_name>/startup/start.ipy`
*   `ipython --profile=<your_profile_name>`每次需要在 ipython 中加载所有内容时运行。

使用此解决方案，您无需设置任何环境变量。但是，每次修改文件时都需要将文件复制到`start.ipy`文件夹中。`ipython`

# mysql - MySQL 仅从列中选择某些值而不排除行

> ID：11124579
> 
> 赞同：2
> 
> 时间：2012-06-20T17:04:52.627
> 
> 标签：mysql, select, group-by, group-concat

我想知道是否有一种方法可以只选择列中的某些值以用于 GROUP_CONCAT 而不从 SELECT 中排除不匹配的列。

这是具体的场景：对于我的 WordPress 网站，我的表`wp_22_posts`和`wp_22_postmeta`表在帖子和元数据之间具有一对多的关系。我想对加入的结果进行分组，并为每个组`wp_22_posts.ID`选择一个以分号分隔的列表。如果键匹配“authorid”或“isbn”，我只想获取元键和值；*但是，我不想排除没有“authorid”或“isbn”的行*- 对于不匹配的行，我宁愿只返回或类似的东西。`wp_22_postmeta.meta_key``wp_22_postmeta.meta_value`*`null`*

 *下面是我目前正在使用的查询，但正如您所见，它正在提取*所有*元数据：

```
SELECT posts.post_title, MAX(posts.post_date_gmt), posts.post_content, posts.guid AS url, posts.comment_count,
    GROUP_CONCAT(postmeta.meta_key ORDER BY postmeta.meta_value DESC SEPARATOR ';') AS meta_key,
    GROUP_CONCAT(postmeta.meta_value ORDER BY postmeta.meta_value DESC SEPARATOR ';') AS meta_value
FROM wp_22_posts AS posts
JOIN wp_22_postmeta AS postmeta ON (posts.ID = postmeta.post_id)
WHERE posts.post_status = 'publish'
GROUP BY posts.ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:08:28.633

我相信你可以使用`CASE`而不是列名`GROUP_CONCAT`：

```
GROUP_CONCAT(CASE WHEN postmeta.meta_key='authorid' OR postmeta.meta_key='isbn'
 THEN postmeta.meta_key END, ..... 
```

抱歉，我目前无法测试它，但它应该可以工作*

# android - HowTo OnTouch 上的油漆覆盖（谷歌地图）？

> ID：11124584
> 
> 赞同：0
> 
> 时间：2012-06-20T17:05:15.247
> 
> 标签：android, google-maps, overlay, touch-event

我在我的谷歌地图视图（封闭多边形，填充）上绘制了一个叠加层。但是现在我不知道当我点击覆盖时如何弹出吐司。我发现的大多数示例都使用标记，并且看起来与我的代码非常不同。

主要活动：

```
public class BOSLstItemDetail extends MapActivity{
    ArrayList<HashMap<String, Object>> boslst;
    MapView mapView; 
    MapController mapcontrol;
    GeoPoint p;
    Polygon polygon;

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.boslst_item_detail);

        String coordinates[] = {"48.098056", "9.788611"};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        p = new GeoPoint(
                (int) (lat * 1E6), 
                (int) (lng * 1E6));

        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapcontrol = mapView.getController();
        mapcontrol.animateTo(p);
        mapcontrol.setZoom(10);
        mapView.setBuiltInZoomControls(true);

        ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();
        try{
            InputStream koord = getAssets().open("gps.txt");
            if (koord != null) {
                InputStreamReader input = new InputStreamReader(koord);
                BufferedReader buffreader = new BufferedReader(input);
                String line;
                while (( line = buffreader.readLine()) != null) {
                    String[] point_t = line.split(",");
                        double y = Double.parseDouble(point_t[0]);
                        double x = Double.parseDouble(point_t[1]);
                        points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
                }
                koord.close();
                polygon = new Polygon(points);
            }
        }catch (Exception e) {
            Log.e("APP","Failed", e);
        }        

        mapView.getOverlays().clear();
        mapView.getOverlays().add(polygon);
        mapView.invalidate();
    }
} 
```

多边形.java

```
public class Polygon extends Overlay {
    ArrayList<GeoPoint> geoPoints;

    public Polygon(ArrayList<GeoPoint> points){
        geoPoints = points;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow){
        //Set the color and style
        Paint paint = new Paint();
        paint.setColor(Color.parseColor("#88ff0000"));
        paint.setAlpha(50);
        paint.setStyle(Paint.Style.FILL_AND_STROKE);

        //Create path and add points
        Path path = new Path();
        Point firstPoint = new Point();
        mapView.getProjection().toPixels(geoPoints.get(0), firstPoint);
        path.moveTo(firstPoint.x, firstPoint.y);

        for(int i = 1; i < geoPoints.size(); ++i){
            Point nextPoint = new Point();
            mapView.getProjection().toPixels(geoPoints.get(i), nextPoint);
            path.lineTo(nextPoint.x, nextPoint.y);
        }

        //Close polygon
        path.lineTo(firstPoint.x, firstPoint.y);
        path.setLastPoint(firstPoint.x, firstPoint.y);
        canvas.drawPath(path, paint);
        super.draw(canvas, mapView, shadow);

    }
} 
```

全球定位系统.txt：

```
9.34669876098644,48.2405319213867
9.36384963989269,48.2296714782715
9.3639497756958,48.2259712219238
9.87827968597418,48.2786293029785
9.87261867523205,48.2822494506837
9.87254810333263,48.2859611511232
9.88368034362787,48.2898597717285
9.8835382461549,48.2972793579102
9.72781181335461,47.9827613830566
9.72225093841558,47.9826812744141
9.72232818603527,47.9789619445801
9.71129894256597,47.9750900268555
9.70574092864985,47.9750099182129
9.70557022094732,47.9824409484864
9.69992923736572,47.9860801696778
9.69436073303234,47.9860000610352
9.33546066284174,48.2403602600099
9.34669876098644,48.2405319213867 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:24:47.017

如果要扩展 Overlay，可以覆盖 OnTap 方法：

```
protected boolean onTap(final int index)
{
    OverlayItem item = mOverlays.get(index);
    if(item != null){
        Toast.makeText(mContext, textToShow, Toast.LENGTH_SHORT).show();
    }       
    //return true to indicate we've taken care of it
    return true;
} 
```

# python - 如何从 Python 中的子方法属性获取父属性？

> ID：11124585
> 
> 赞同：0
> 
> 时间：2012-06-20T17:05:19.670
> 
> 标签：python, python-2.7

我有这个代码：

```
def some_method():
    #i need to get some attrs :(
    return 'blabla'

setattr(parent, 'new_attr', some_method) 
```

有没有办法在`some_method`函数中获取父级的其他属性？

提前致谢！

**更新：（解决方案）**

我是这样解决的，不知道是不是最好的。

```
def some_method(parent):
    # print or do something parent.xy_attribute
    return 'blabla'

parent.new_attr = some_method(parent) 
```

它有效！

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:09:38.087

您真正想要的是创建一个[`MethodType`](http://docs.python.org/library/types.html#types.MethodType)要分配的对象（来自[`types`](http://docs.python.org/library/types.html)）。

```
import types

setattr(parent, 'new_attr', types.MethodType(some_method, parent, type(parent))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:15:36.573

如果`parent`是一个类，那么您可以像使用类的任何其他方法一样访问它的属性，方法是提供 self 参数并使用它。

如果它不是一个类，那么处理这个问题的最好方法可能是将你的函数写在一个包装器/工厂/东西中，而不是直接作为一个方法。

```
def some_method_wrapper(parent):

    def some_method():
        #access any parent attribute 
        #by using the parent positional argument passed to the function
        print parent.desired_attribute
        return 'blabla'

    setattr(parent, 'new_attr', some_method) 
```

然后您可以使用`parent.new_attr()`它，它将能够打印/操作/您想要的任何父属性。

这是一个更详细的示例，说明如何使用它来操作函数上的计数器（或者说，刷新函数缓存）。

```
def parent_function(numbers):
    # do something with numbers
    parent_function.counter += 1
    return sum(numbers)

parent_function.counter = 0

def add_reset_function(parent):

    def reset_counter():
        parent.counter = 0

    setattr(parent, 'reset', reset_counter)

# call parent_function a few times

numbers = [1, 2, 3]
for i in range(4): parent_function(numbers)
print parent_function.counter # 4

add_reset_function(parent_function)

# call the reset function just added
parent_function.reset()

print parent_function.counter # 0
parent_function(numbers)
print parent_function.counter # 1 
```

# jquery - jQuery 自动完成建议框在鼠标悬停之前不会消失

> ID：11124594
> 
> 赞同：0
> 
> 时间：2012-06-20T17:05:59.327
> 
> 标签：jquery, jquery-ui, autocomplete

我对 jQuery 自动完成有疑问。当我键入**a**时，脚本会按预期从预填充的数组中返回相关结果。但是，如果我键入**a**并按住鼠标不放，导致键入 a 的字符串**，**则建议框在键入第一个 a 后立即打开**，但当****a**的流跟随时不会消失（因此减少到文本框有一系列**a**的中间情况，并且建议框显示的结果仅与 1 **a**一致。只有当我松开鼠标时，盒子才会消失。这与谷歌搜索不同，其中建议框在 5-6 **a时立即消失**即使按住鼠标，也会输入 's。反正有没有调整插件来消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:29:38.547

在自动完成的选项中，将延迟设置为 0。类似于：

```
$(selector).autocomplete({ source: [your array], delay: 0}); 
```

这在我的测试中对我有用。默认延迟 300 产生的结果类似于您报告的结果。

另外，你是如何用鼠标打字的？

# jquery - 单击除第一个 td 之外的行

> ID：11124600
> 
> 赞同：6
> 
> 时间：2012-06-20T17:06:15.083
> 
> 标签：jquery, datatables

我正在尝试单击表格行并执行操作。但是，如果他们单击第一个`<td>`单元格，我不希望它执行该操作。

这是我到目前为止的代码：

```
jQuery('#dyntable tbody tr').live('click', function () {
        nTr = jQuery(this)[0];

        openMessage(oTable, nTr);
    }); 
```

这按预期工作，除了第一个`<td>`有一个复选框，所以如果他们单击该单元格，我不想调用 o`penMessage(oTable, nTr);`函数。

我还需要`nTr`= 行的内容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T17:25:56.287

使用行内点击目标，查看TD的索引

简化演示：http: [//jsfiddle.net/WLR9E/](http://jsfiddle.net/WLR9E/)

```
jQuery('#dyntable tbody tr').live('click', function (evt) {
    var $cell=$(evt.target).closest('td');
    if( $cell.index()>0){
       openMessage(oTable, this);
}
}); 
```

不推荐使用 live()，如果使用 jQuery >= 1.7 转换为 on()。以下假设主表是页面中的永久资产。

```
jQuery('#dyntable').on('click','tbody tr', function (evt) {
    var $cell=$(evt.target).closest('td');
    if( $cell.index()>0){
       openMessage(oTable, this);
   }
}); 
```

您代码中的这一行是 redindant，它只是返回与`this`

```
nTr = jQuery(this)[0]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-19T12:37:26.197

```
 $("#dyntable tbody").on('click', 'tr td:not(:first-child)',function () {
    alert("success");
}); 
```

```
$(document).ready(function ()
{
   $("#tbluserdata tbody").on('click', 'tr td:not(:first-child)', function () {
      alert("write code");
    });

 });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<html>
  <head>
    </head>
  <body>
    <table border="2" width="50%" id="tbluserdata">
      <thead>
        <tr>
          <th>Id</th>
        <th>Name</th>
        <th>Address</th>
          <th>Action</th>
          </tr>
        </thead>
      <tbody>
      <tr>
        <td>1</td>
        <td>aaa</td>
        <td>ccc</td>
         <td>delete</td>
        </tr>
      <tr>
        <td>1</td>
        <td>aaa</td>
        <td>ccc</td>
        <td>delete</td>
        </tr>
      <tr>
        <td>1</td>
        <td>aaa</td>
        <td>ccc</td>
        <td>delete</td>
        </tr>
        </tbody>
      </table>
    </body>
</html>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T17:25:30.813

这可以解决问题：

```
jQuery('#dyntable tbody tr td:not(:first)').live('click', function () {
        nTr = jQuery(this).parent('tr')[0];

        openMessage("asdf", nTr);
});

function openMessage(oTable, nTr){
  console.log(nTr);
  alert('something happened');    
} 
```

​</p>

这是要测试的小提琴：[DEMO](http://jsfiddle.net/ArSZ6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:08:35.013

您可以尝试向该`<td>`元素添加类或唯一 ID。然后在你的处理程序中测试它。

```
jQuery('#dyntable tbody tr').live('click', function () {
  var $thisRow = jQuery(this); // cache this selector for performance
  nTr = $thisRow[0];
  if (!$thisRow.hasClass('not_this_one')){
    openMessage(oTable, nTr);
  }
}); 
```

# php - CSV 中的 CSV 搜索 - php

> ID：11124602
> 
> 赞同：1
> 
> 时间：2012-06-20T17:06:26.170
> 
> 标签：php, search, csv

我有两个变量作为 CSV 字符串。例子：

```
 $csva = "1,4,7,10,39,12";
 $csvb = "4,1,12"; 
```

我想搜索中的所有元素是否都`$csvb`存在于`$csva`.

有一个简单的功能可以做到这一点吗？

注意：我知道我们可以遍历它来比较每个元素。但我想知道是否有任何 php 函数可以做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:14:58.987

[http://codepad.org/nA2P6FCH](http://codepad.org/nA2P6FCH)

```
function csv_contains( $haystack, $needle ){
  return ! count( array_diff(
    explode(',',$needle ),
    explode(',',$haystack)
  ));
}

var_dump( csv_contains( "1,4,7,10,39,12", "4,1,12") ); //true

var_dump( csv_contains( "1,4,7,10,39,12", "4,1,12,999") ); // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:14:59.757

不，你能得到的最接近的是：

```
if(count(array_intersect(explode(',', $csva), explode(',', $csvb))) == count(explode(',', $csvb))){
    echo 'All items there';
} 
```

# javascript - 在 jquery 追加后或添加 innerHTML 后重绘页面

> ID：11124609
> 
> 赞同：1
> 
> 时间：2012-06-20T17:07:04.387
> 
> 标签：javascript, jquery, html, css, ajax

我正在向现有代码添加验证。视图是使用 ajax 加载的，因为页面上有多个选项卡。通过返回一个 JSON 对象，我让验证本身起作用。显示的选项卡取决于 JSON 对象是否包含错误。如果有错误，则不会加载新页面，并且验证错误会显示在页面顶部。

问题是错误消息将页面内容向下推，但不会扩展其容器（它们没有固定高度），因此它会延伸到其容器之外。我认为这是因为整个页面没有重绘，我该如何解决这个问题？我尝试使用 innerHTML 而不是使用 jQuery 追加，但这并没有什么不同，页面仍然失真。

```
$.ajax({
type: "POST",
url: actionURL,
datatype: "json",
data: this.GetParams(),
success: function (data) {
if (data.Error) {
//$("#validationErrors").empty().append('<ul>');
//for(var i=0; i<data.ErrorMessages.length; i++) {
//$('#validationErrors').append('<li>' + data.ErrorMessages[i] + '</li>');
//}
//$("#validationErrors").append('</ul>');
document.getElementById('validationErrors').innerHTML = '<ul><li>Username is required</li></ul>'
}
else {
//load another page  
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:55:55.460

一种解决方法是获取高度并为其添加一个常数。不是我正在寻找的解决方案，但它现在有效。我想知道这是否只是一个IE7的问题，没有在其他浏览器中尝试过。

```
$('.container).height($('.container).height() + 1) 
```

# python - 通过linux发送格式化的html邮件

> ID：11124611
> 
> 赞同：0
> 
> 时间：2012-06-20T17:07:09.363
> 
> 标签：python, html, linux

我有一个 python 2.2 脚本，它以下列方式构建一个 html 字符串：

```
html_string = ""
html_string = html_string + "MIME-Version: 1.0\n"
html_string = html_string + "Content-type: text/html\n\n"
html_string = html_string + "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">"
html_string = html_string + "<html>..."
html_string = html_string + "</html" 
```

然后我将这些数据写入文件。然后我运行以下命令：

```
os.system("mail -s \"<Subject>\" <my_email_addr> < /path/to/file/email_file") 
```

然后我收到一封电子邮件，但它没有格式化。它显示了所有的 html 标签等。如何让它显示应有的 html？我正在使用 Outlook 2010 作为邮件客户端顺便说一句。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:32:15.873

看看[这个链接](https://unix.stackexchange.com/questions/15405/how-do-i-send-html-email-using-linux-mail-command)，它描述了如何使用各种形式发送 HTML 邮件`mail`。

这与其说是一个 Python 编程问题，不如说是一个如何调用我如何`mail`发送 HTML 邮件的问题。

当然，您也可以使用[相关的 Python 库（电子邮件包）](http://docs.python.org/library/email)来执行您需要的操作。

# android - Novoda ImageLoader - 加载相同的图像

> ID：11124613
> 
> 赞同：1
> 
> 时间：2012-06-20T17:07:11.173
> 
> 标签：android, support-image-loader

我正在使用 Novoda ImageLoader (https://github.com/novoda/ImageLoader)，当我在 CursorAdapter 中使用这个加载器时，一切都很好。但是当我想在没有任何适配器的情况下使用一个 ImageView 的 Activity 时，我会为不同的 URL 获得相同的图像。

```
//onCreate in Activity   
imageManager = MyApplication.getImageLoader(); 
imageTagFactory = new ImageTagFactory(this, R.drawable.ic_refresh_inverse);
imgView = (ImageView) findViewById(R.id.imgIV);

//fillData - when I finish loading img URL from DB with CursorLoader
imgView.setTag(imageTagFactory.build(imgURL));
imageManager.getLoader().load(imgView);

//code in onCreate Application
LoaderSettings settings = new SettingsBuilder().withDisconnectOnEveryCall(true).withCacheManager(new LruBitmapCache(this)).build(this);
imageManager = new ImageManager(this, settings); 
```

当我查看缓存目录时，加载了不同的图像，但未使用。知道哪里可能出现问题或如何正确使用此库来仅加载一个图像吗？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:01:26.260

问题可能类似于此[https://github.com/novoda/ImageLoader/issues/41](https://github.com/novoda/ImageLoader/issues/41) 你在 url 中有查询参数吗？如果是这样，请尝试在设置生成器上添加此 .withEnableQueryInHashGeneration(false)

这是一个反转参数 enableQueryInHashGeneration 背后的逻辑的错误。此参数应启用/禁用（默认情况下应启用）生成图像哈希名称时 url 的查询部分。当您在 url 中有会话令牌作为参数并且您不想一遍又一遍地下载相同的图像时，这很有用。

问题会在1.5.6版本解决

# version-control - 是否有使用 SCM 分支的 A/B 测试框架？

> ID：11124614
> 
> 赞同：4
> 
> 时间：2012-06-20T17:07:18.810
> 
> 标签：version-control, ab-testing

我只有少量的 A/B 测试经验；但据我所见，进行 A/B 测试的标准方法似乎是在应用程序代码中引入一些条件逻辑。这可能很难正确实现（取决于测试的复杂性），并且需要额外的设置和清理工作。

这让我想知道：是否有任何 A/B 测试的框架或方法可以使用例如 Git 分支来简化问题？我正在设想负载均衡器级别的东西，它将一半流量引导到部署了“主”或“默认”的服务器，另一半引导到部署了“实验”的服务器。这样，代码本身就可以完全不受任何正在进行的 A/B 测试的影响；并且大概选择 A 或 B 进行全面部署的行为将是一个简单的开关翻转。

我敢肯定，正确设置这不是一件容易的事。但我仍然想知道这是否可能，如果事实上它已经完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T16:43:36.453

它相对容易构建并且绝对可行。您需要实现一个部署系统，在其中将所有以“ab_*”开头的分支部署到服务器上的不同文件夹中。然后在代码中的某个时刻，您可以根据您的实际测试。它不是真正的“框架”，它是一个简单的架构设计模式，你必须添加到你自己的系统中，我之前在生产中也是这样做的。

# php - Php Include 函数会导致空格并忽略样式

> ID：11124615
> 
> 赞同：0
> 
> 时间：2012-06-20T17:07:27.660
> 
> 标签：php, html

我有一个通过 include() 函数使用另一个页面的页面。请求和使用这个外部页面的页面嵌入了一些 html 以及使用 echo 函数的一些输出。这是我所指的一个例子。

页面 Apple.php 包含：

```
 <html>
 <head></head>
 <body>

<h1>I have some content here.</h1>

 <div id="format" style=" width:20px; height:20px;"><?php include("Orange.php") ?></div>

 <h2>Some more content here.</h2>
 </body>
 <html> 
```

页面 Orange.php 包含：

```
 <?php
     $astringA='blue';
     $astringB='berry';
     include("someExternalPage.php");
     echo "fruit is ".$astringA.$astringB.$externalVariable;
     ?> 
```

每当在浏览器中查看 Apple.php 时，只会显示其主体的顶部（包含函数上方的部分），并且 div 框下方的所有内容都会丢失并被空白填充。此外，包含的文件会忽略 div 框具有的所有样式。Orange.php 也是如此；include() 函数下方的所有输出都将丢失。我该如何解决这个问题，以便包含的文件符合我想要的样式并继续输出页面上的其余内容？

我还注意到，即使我尝试通过 php 输出页面的其余部分，例如 echo ">h2>Some more content here。"; （我故意反转了上面一行中的第一个“>”，以便在这里说明代码）包含的仍然优先于当前页面，因此从不显示输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:10:41.913

闻起来像你在这里有一个隐藏的致命错误。

尝试使用 error_reporting(E_ALL) 并运行页面以查看是否有错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:13:00.880

看起来您在 Apple.php 中包含后缺少分号。当您尝试加载时，我们可以看到输出`Orange.php`吗？准确了解流量中断的位置很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:13:39.647

someExternalPage.php 或$externalVariable 有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:57:02.230

如果 someExternalPage.php 实际上是一个外部文件（即您包含一个文件，例如[http://example.com/test.php](http://example.com/test.php)），您可能需要检查您是否在 php.ini 中启用了 allow_url_include

或者，请确保 someExternalPage.php 存在。

# android - 发生超时时出错

> ID：11124624
> 
> 赞同：0
> 
> 时间：2012-06-20T17:08:24.683
> 
> 标签：android, timeout, android-asynctask, progressdialog, runtimeexception

我现在正在构建的应用程序在使用 HTTP post 时出现问题。发生超时时，应用程序崩溃并出现以下错误：

```
06-20 19:01:35.715: E/Timeout Exception:(3802): java.net.SocketTimeoutException
06-20 19:01:35.720: W/dalvikvm(3802): threadid=15: thread exiting with uncaught exception (group=0x40c4d1f8)
06-20 19:01:35.865: D/dalvikvm(3802): GC_CONCURRENT freed 67K, 18% free 13640K/16519K, paused 7ms+3ms
06-20 19:01:35.870: E/AndroidRuntime(3802): FATAL EXCEPTION: AsyncTask #4
06-20 19:01:35.870: E/AndroidRuntime(3802): java.lang.RuntimeException: An error occured while executing doInBackground()
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.lang.Thread.run(Thread.java:856)
06-20 19:01:35.870: E/AndroidRuntime(3802): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.os.Handler.<init>(Handler.java:121)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.app.Dialog.<init>(Dialog.java:107)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.app.AlertDialog.<init>(AlertDialog.java:114)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.app.AlertDialog$Builder.show(AlertDialog.java:931)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at com.on_d_mand.live_evenementen.Helper.showAlert(Helper.java:357)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at com.on_d_mand.live_evenementen.SyncData.doInBackground(SyncData.java:99)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at com.on_d_mand.live_evenementen.SyncData.doInBackground(SyncData.java:1)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-20 19:01:35.870: E/AndroidRuntime(3802):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-20 19:01:35.870: E/AndroidRuntime(3802):     ... 5 more 
```

这是源的样子：

```
//ON PRE EXECUTE
protected void onPreExecute(){

    if(MESSAGE != null){
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMessage(MESSAGE);
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();
    }
}

//DO IN BACKGROUND
@Override
protected String doInBackground(String... urls) {
    //SYNC DATA WITH THE SERVER
    try{

        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds (30 seconds) until a connection is established.
        // The default value is zero, that means the timeout is not used. 
        int timeoutConnection = 30 * 1000;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds (30 seconds) which is the timeout for waiting for data.
        int timeoutSocket = 30 * 1000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        HttpClient httpclient = new DefaultHttpClient(httpParameters);
        HttpPost httppost = new HttpPost(urls[0]);
        httppost.setEntity(new UrlEncodedFormEntity(preparedInformation));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        IS = entity.getContent();

    }catch (SocketTimeoutException ste){
        Log.e("Timeout Exception: ", ste.toString());
    }
    catch(Exception e){
        Log.e("log_tag", "Error in http connection"+e.toString());
    }

    //CONVERT DATA INTO STRING
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(IS,"iso-8859-1"),8);
            SB = new StringBuilder();
            SB.append(reader.readLine() + "\n");
            String line="0";

            while ((line = reader.readLine()) != null) {
                SB.append(line + "\n\n");
            }

            IS.close();
            this.result = SB.toString();
    }
    catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    return this.result;
} 
```

由 Java RuntimeException 引起...好吧，那又怎样？这个问题需要避免，因为它是我现在拥有的应用程序中的最后一个错误。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:14:58.583

你的问题是`show()`方法。

> 必须从 UI 线程调用方法 show()。

您只能在执行任务之前在`onPogressUpdate()`or`onPostExecute()`或调用中调用此方法。`show()`也`showAlert()`不能打电话`doInBackground()`。

你必须知道你不能调用任何 update `UI`in `background thread`。因此，要更新您的 UI，请仅使用`onProgressUpdate()`方法或我的意思`onPostExecute()`。

**编辑：**

```
catch(Exception ex){
   Log.e("log_tag", "Error in http connection"+e.toString());
   return ex.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:16:21.323

`helper.showAlert()`从方法中删除方法`doInBackGround()`，您不能从工作线程在主线程上运行（不能更新 MainUI 线程）。

取而代之的是，从中使用`onProgressUpdate()`和使用 helper.showAlert() 。

**更新：**

```
catch (SocketTimeoutException ste){
        Log.e("Timeout Exception: ", ste.toString());
        return ste.toString();
    }
    catch(Exception e){
        Log.e("log_tag", "Error in http connection"+e.toString());
        return e.toString();
    }

protected void onPostExecute(String result) {
    Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();
 } 
```

# magento - 如何在 Magento 中更改产品评论的元标题

> ID：11124625
> 
> 赞同：0
> 
> 时间：2012-06-20T17:08:25.433
> 
> 标签：magento, magento-1.4, magento-1.6

我无法提供任何代码，因为这是问题的一部分，但我相信如果你引导我朝着正确的方向前进，我可以从你告诉我的文件中粘贴代码。

我在我的网站上启用了产品评论：但是产品页面标题和产品评论页面标题相同，并且它为我的 SEO 工作提供了很多重复页面。

示例：普通页面 [http://www.theprinterdepo.com/hp-laser-p2015dn-printer-cb368a](http://www.theprinterdepo.com/hp-laser-p2015dn-printer-cb368a)

相同的产品评论页面 [http://www.theprinterdepo.com/review/product/list/id/1133/](http://www.theprinterdepo.com/review/product/list/id/1133/)

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:56:20.803

我不知道任何开箱即用的功能允许您为产品评论页面指定不同的标题。我可能是错的吗？

因此，剩下的两种方法可以用来实现这一目标。

1.  核心块覆盖
2.  事件/观察者

我会在这里选择选项2。即使使用此选项，仍有多种方法可以实现此目的。这是其中之一...

所以，一旦你创建了你的模块，你需要在你的 config.xml 中声明观察者：

```
<?xml version="1.0"?>
<config>

    <!-- other config xml -->

    <frontend>
        <events>
            <controller_action_layout_render_before_review_product_list>
                <observers>
                    <productmeta>
                        <class>YourCompany_YourModule_Model_Observer</class>
                        <method>controller_action_layout_render_before_review_product_list</method>
                    </productmeta>
                </observers>
            </controller_action_layout_render_before_review_product_list>
        </events>
    </frontend>

    <!-- other config xml -->

</config> 
```

那么您的观察者将与此类似...

```
<?php

class YourCompany_YourModule_Model_Observer
{
    /**
     * @pram Varien_Event_Observer $observer
     * @return void
     */
    public function controller_action_layout_render_before_review_product_list(Varien_Event_Observer $observer)
    {   
        $title = "Your new page title";
        Mage::app()->getLayout()->getBlock('head')->setData('title', $title);
    }
} 
```

# javascript - 如何在 Firefox 中执行 document.ondrop？

> ID：11124630
> 
> 赞同：2
> 
> 时间：2012-06-20T17:08:35.207
> 
> 标签：javascript, html, firefox, google-chrome

document.ondrop 似乎适用于 chrome，但不适用于 Firefox？

附上一个例子： [http ://auth.letschat.info/test2.php](http://auth.letschat.info/test2.php)

如果您将文件放到页面上，它应该会弹出一个警告框。但是它在 Firefox 中不起作用，但在 chrome 中起作用。

当我使用 firefox 控制台时，正确设置了 document.ondrop 处理程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T07:17:34.547

假设原始 javascript 看起来像这样并在 Chrome 中工作：

```
document.ondrop=function(event){
    alert("hello");
} 
```

它可以更改为在 Firefox 和 Chrome 中工作。Firefox 要求您在拖动文件时停止执行默认操作，这可以通过使用 ondragover 事件来解决。以下 javascript 代码也适用于 Firefox：

```
document.ondragover = function(event){
    event.preventDefault();
}
document.ondrop=function(event){
    alert("hello");
} 
```

我通过查看[w3schools](http://www.w3schools.com/html5/html5_draganddrop.asp?output=print)并寻找他们的简单示例和您的代码之间的差异找到了这个解决方案。

在幻灯片 #18 上的[html5rocks](http://slides.html5rocks.com/#drag-in)中，还有一个 html5 示例，通过将侦听器添加到页面来使用拖放的另一种方式。

# c# - 其他类的方法可以内联吗？

> ID：11124631
> 
> 赞同：1
> 
> 时间：2012-06-20T17:08:35.653
> 
> 标签：c#, .net, optimization, asp.net-4.0, .net-4.5

想象一下，你有一个类 A，它的代码作为方法 M 运行。还有一个类 B，它需要向 A 发出信号，它是时候运行 M 了。

通常你会触发一个事件。然而，有几种方法可以做到这一点。触发事件、调用 Action 或调用 M 作为公共方法。IE：

```
b.OnMEvent(this, null);
b.MAction();
a.M(); 
```

**有没有可能在运行时内联这些（或其他）调用其他 calss 方法的方法？**

**是否可以通过积极的内联在 .NET 4.5 中实现？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:13:42.980

当前版本的 .NET JIT 不内联委托调用。事件使用委托作为调用机制，因此事件调用也不会被内联。

内联委托很难，因为在编译时不一定知道目标。有一些缓解技术，但当前的 JIT 没有实现其中任何一个。

不过，在大多数情况下，委托调用足够快。

# c# - .NET如何监控数据库连接中断？

> ID：11124634
> 
> 赞同：1
> 
> 时间：2012-06-20T17:08:44.747
> 
> 标签：c#, .net, database

有什么方法可以监控数据库连接是否中断？我有一个跨应用程序共享的连接，并且一些对象应该对连接中断做出反应。

理想情况下，它应该是一个事件。我发现的唯一一件事是连接异常，但它是在本地引发的（我正在侦听异常）。

我有想法继承`DbConnection`并侦听此对象中的异常（重载其方法），在连接错误异常上引发信号（通过相关代码）。但也许有最简单的方法。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T17:16:13.417

共享单个连接从来都不是一件好事，而且**是**一种不好的做法。主要原因其实是你的问题。我建议你稍微改变你的设计（没什么大不了的）并依赖 ADO.NET**连接池**。如果您不想遇到各种瓶颈，尤其是在多线程情况下，这是必须的。

这意味着您的所有连接都是暂时的，只有在需要访问数据库时才创建一个。

[您可以在此处](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)阅读有关它的更多信息，还可以在其中找到有关如何使用它的示例。关于它的主要了解是它使用 Disposable 模式。

```
//Notice the **using ** block
using(SqlConnection conn = new SqlConnection(connString)) 
{
  conn.Open();
  //do something with the connection.
  //as soon as the using block ends, the managed connection is disposed and released in the pool
} 
```

# c# - 如何去一个页面，加载，去一个页面，加载等

> ID：11124636
> 
> 赞同：0
> 
> 时间：2012-06-20T17:08:54.873
> 
> 标签：c#, automation

我希望能够自动执行此操作，这样我就可以转到一页，加载，执行代码，下一页，加载，执行代码。现在我正在使用计时器，但这似乎不如等待页面加载有效。这是我认为可行的方法，但它只是转到最后一个站点然后加载。

我的方法可能是错误的，所以我希望也许有人能指出我正确的方向。

谢谢你。

```
private void button1_Click(object sender, EventArgs e)
{
    string url1 = "http://google.com";
    string url2 = "http://yahoo.com";
    string url3 = "http://msn.com";

    webBrowser1.Navigate(url1);
    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
    webBrowser1.Navigate(url2);
    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
    webBrowser1.Navigate(url3);
    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:26:24.410

您不需要为每个页面加载事件使用不同的事件处理程序。只需创建一个堆栈/队列来存储您要加载的页面：

```
Queue<string> pagesToLoad = new Queue<string>();

private void Button1_Click(object sender, EventArgs e)
{
    pagesToLoad.Enqueue("http://www.test.com");
    pagesToLoad.Enqueue("http://www.test2.com");
    pagesToLoad.Enqueue("http://www.test3.com");

    webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
    webBrowser1.Navigate("http://www.first.com");
} 
```

然后编写您的事件处理程序方法。当您的浏览器完成页面加载时，它将调用此方法。您可以在其中运行代码，准备好后，您可以导航到下一页。

```
webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // TODO: do whatever you want with the page you just loaded
    // You can get the page URL with e.Url

    // Get the next Url from the queue and navigate:
    if (pagesToLoad.Count == 0) 
    {
        return; // Finished!
    }
    else
    {
        string nextUrl = pagesToLoad.Dequeue();
        webBrowser1.Navigate(nextUrl);
    }
} 
```

就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:16:40.997

如果您需要在开始下一页之前等待第一页完成，您应该通过等待`DocumentCompleted`前一个 URL 的事件触发来顺序链接导航：

```
private void button1_Click(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted += OnGoogleCompleted;

    webBrowser1.Navigate("http://google.com");
}

private void OnGoogleCompleted(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted -= OnGoogleCompleted;
    webBrowser1.DocumentCompleted += OnYahooCompleted;

    webBrowser1.Navigate("http://yahoo.com");
}

private void OnYahooCompleted(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted -= OnYahooCompleted;
    webBrowser1.DocumentCompleted += OnMsnCompleted;

    webBrowser1.Navigate("http://msn.com");
}

private void OnMsnCompleted(object sender, EventArgs e)
{
    // ...
} 
```

# android - 黑莓 Playbook 模拟器不工作

> ID：11124637
> 
> 赞同：0
> 
> 时间：2012-06-20T17:08:59.547
> 
> 标签：android, blackberry-playbook

我在 Eclipse 上开发了一个 Android 应用程序，现在我正在尝试将它移植到 BlackBerry。我有我的签名密钥和证书、Eclipse BlackBerry 插件和 BlackBerry 平板电脑模拟器。

当 Eclipse 将我的应用程序上传到 Playbook 模拟器时，它会打开应用程序，但会出现“正在初始化，请稍候...”消息。坐在那里几分钟后，它退出并返回主屏幕，该应用程序已清晰安装。Eclipse 在上传应用程序的 70% 时卡住了。还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:39:41.770

您是否尝试过使用“c:\Program Files\Research In Motion\blackberry-tablet-sdk-1.1.1\bin\blackberry-deploy.bat”进行安装？也许你会在那里看到更多信息

您是否尝试过 telnet 或 SSH 到设备并查看`/apps`?

# python - Python threading.Timer 只重复一次

> ID：11124640
> 
> 赞同：5
> 
> 时间：2012-06-20T17:09:13.873
> 
> 标签：python, multithreading

```
def On_Instrumentation_StartAnimation():  

    """
    Syntax      : On_Instrumentation_StartAnimation()
    Purpose     : Fired if the animation is started
    Parameters  : None
    """
    print "----------------------------------------------------------------------------------------"
    localtime = time.asctime(time.localtime(time.time()))
    global start
    start = time.clock()
    print "The user entered Animation Mode at local time: ", localtime
    print("This data has also been written to 'c:\dSPACE71\cdlog\cdlog.txt'")   
    threading.Timer(2, ExecuteDemo).start()
    ExecuteDemo()
    # Printing to the text file
    file1 = open('c:\dSPACE71\cdlog\cdlog.txt', 'a')
    file1.write("\n----------------------------------------------------------------------------------------")
    file1.write("\nThe user entered Animation Mode at local time: ")
    file1.write(localtime)
    file1.close()      

def ExecuteDemo()
    .
    .
    .
    Current_value = Current.Read()
    localtime = time.asctime(time.localtime(time.time()))
    print "The current reading at localtime:", localtime, "is", str(Current_value) + "."
    # Printing to the text file
    file1 = open('c:\dSPACE71\cdlog\cdlog.txt', 'a')
    file1.write("\n----------------------------------------------------------------------------------------")
    file1.write("\nThe current reading at localtime: ")
    file1.write(localtime)
    file1.write(" is: ")
    file1.write(str(Current_value))
    file1.close()
    .
    .
    . 
```

如您所见，我试图在 StartAnimation 函数被调用后每 2 秒重复一次 ExecuteDemo() 函数。但我的问题是我的 ExecuteDemo() 只运行了两次。我怎样才能让它不断重复？我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T17:23:59.253

从文档中：

> 类 threading.Timer
> 
> 在指定时间间隔过后执行函数的线程。

这意味着将在指定的时间段**后**`Threading.Timer`调用一个函数。正如您所注意到的，它只被调用一次。这里的解决方案是在函数结束时再次设置计时器。**`ExecuteDemo(..)`**

 **```
def ExecuteDemo():
    .
    .
    .
    threading.Timer(2, ExecuteDemo).start() 
```

* * *

在我看来，上述方法效率有点低。就像每 2 秒创建一个新线程，一旦它执行该函数，它就会在创建下一个线程之前死掉。

我会建议这样的事情：

```
def ExecuteDemoCaller():
    #while True: # or something..
    while someCondition:
        ExecuteDemo()
        time.sleep(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:20:32.593

从[文档](http://docs.python.org/library/threading.html#threading.Timer)：

> class threading.Timer( *interval* , *function* , *args* =[], *kwargs* ={})¶ 创建一个计时器，该计时器将在*间隔*秒数过去后使用参数*args*和关键字参数*kwargs运行**函数。*

 ***我找不到关于反复调用某事的任何信息。也许其他人有更好的答案，或者您可能必须手动滚动它（这不会太难）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:22:30.767

计时器不重复。您可以在回调函数结束时设置另一个计时器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T16:58:37.383

```
class setInterval(threading.Thread):
 def __init__(self, interval, function, args=[], kwargs={}):
  threading.Thread.__init__(self)
  self.interval = interval
  self.function = function
  self.args = args
  self.kwargs = kwargs
  self.finished = threading.Event()
  self.flag_run = True
 def cancel(self):
  self.finished.set()
 def run(self):
  while self.flag_run:
   self.finished.wait(self.interval)
   if not self.finished.is_set(): self.function(*self.args, **self.kwargs)
   else: self.flag_run = False
  self.finished.set() 
```

阅读“threading.py” 10 分钟后，我使用此代码*****

# android-activity - 如何从 Application 类获取数据到 PhoneStateListener 类？

> ID：11124641
> 
> 赞同：0
> 
> 时间：2012-06-20T17:09:14.763
> 
> 标签：android-activity, event-listener, android

我有一个具有 Application 类的 Android 应用程序，并且我有另一个扩展类`PhoneStateListener`。

我想在我的类中使用 Application 类中的一个对象来扩展 PhoneStateListener。我不能这样做，因为它的`PhoneStateListener`类没有扩展`Activity`。

有什么办法可以`Application`在我的`PhoneStateListener`班级中使用班级中的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:14:02.917

请参阅[此](http://smartandroidians.blogspot.in/2010/07/listening-to-phone-calls-using.html)示例和[此](https://stackoverflow.com/q/4700109/1289716)问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:10:37.997

扩展`PhoneStateListener`并拥有一个以它想要的作为参数的构造函数。

# joomla - 更改服务器后Joomla空白，管理面板好

> ID：11124647
> 
> 赞同：2
> 
> 时间：2012-06-20T17:09:35.940
> 
> 标签：joomla, configuration, phpbb3, server-migration

我将 Joomla 1.5 网站和 PHPBB3 论坛从一台服务器移到另一台服务器的 cPanel 移动，当 DNS 更改启动时，我看到的只是一个空白页面。管理员面板可以正常工作。cPanel 工作。网站和论坛（与网站分开）都是空白的。

然后我手动下载并上传了所有文件（没有手动移动数据库），由于 555 文件权限，有些文件不会上传。我暂时将权限更改为 777 以用手动上传的文件覆盖文件。因此，所有文件现在都与旧服务器上的文件相同。

即使我打开站点调试，屏幕也是空白的。

没有可能导致问题的隐藏 index.html 或 default.html 文件。

整个帐户已使用 cPanel 移动，因此在旧服务器和新服务器上是相同的。托管服务提供商报告没有问题。两天前开始进行 DNS 更改。

PHP 正在工作，因为此链接有效： http: [//oklade.net/findpath.php](http://oklade.net/findpath.php)

在 configuration.php 中，没有任何内容专门指向旧站点。

```
var $dbtype = 'WeboMySql';
var $host = 'localhost'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:14:14.977

这些情况下的所有道路一般都会导致 configuration.php 检查拼写和标点是否有错误。此外，启用默认的 Joomla 模板之一，以确保您使用的任何模板都不会使用旧值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:03:14.457

问题解决了。

正如大家所建议的那样，应该归咎于configuration.php文件，但是没有办法手动更改它并让它正确，我不得不**让系统确定自己的配置**。

我在单独的文件夹中安装了新版本的 Joomla，在单独的文件夹中安装了新版本的 PHPBB3。

然后我把这两件事的 configuration.php 和 config.php 文件放在了网站的现有文件夹中，这些文件夹不起作用。

更改了诸如数据库前缀之类的次要细节（因为我在安装时无法输入现有的前缀），仅此而已。现在它起作用了。

因此，对于面临相同问题的任何人来说，这可能是一个很好的解决方法。安装一个虚拟版本的 Joomla 并将生成的 configuration.php 文件用于旧的、无法运行的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:51:27.437

1.  在开始调试服务器之前，打开调试模式（在管理 CP 中）![在此处输入图像描述](../Images/cf0e24ebb63a074bf7999dfdbadef502.png)
2.  我会尝试的第一件事是通过运行删除缓存：
    `rm –rf /var/www/html/<your website directory>/var/cache/*`
3.  接下来我会尝试切换到另一个模板 - 确保模板不是问题。
4.  此外，请务必检查 apache 访问日志 - 以防万一。此外，您可以检查 .htaccess 中是否有 301 重定向规则或任何其他有问题的配置（同样适用于 httpd.conf 和 configuration.php）

祝你好运！

# objective-c - 对大量缺失的、非常基本的 Objective-C 类进行故障排除

> ID：11124650
> 
> 赞同：0
> 
> 时间：2012-06-20T17:09:44.933
> 
> 标签：objective-c, ios, xcode, atmhud

我在 Xcode 中有一个运行良好的 iOS 项目。我添加了 ATMHud 项目 ( [https://github.com/atomton/ATMHud](https://github.com/atomton/ATMHud) ) 中的类，我已经在其他项目中成功使用了这些类，但我突然收到几十个关于缺少非常基本对象类型的接口声明的错误，例如NSObject 和 UIView：

![36 个错误，9 个警告](../Images/323f29ef99c47163d91a859173ed20e1.png)

根据文档，我已将 QuartzCore 和 AudioToolbox 框架添加到我的项目中。我检查了我自己的 .h 和 .m 文件，以确保我的所有自定义 #import 语句都在我的 .m 文件中，而不是 .h 文件中，除非必要。实际上，我在头文件中只有一条#import 语句链，它们都与我编写的自定义类有关。

我在这里看到了很多这样的问题的答案，但没有一个能帮助我解决我的问题。我觉得我错过了一些明显的东西，但如果是的话，它会躲避我。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:36.627

如果您缺少 NSObject 和 UIView 之类的基本内容，我觉得您不再导入 UIKit 和 Foundation。这些东西通常在前缀文件（myProject-Prefix.pch）中导入。

您可能会错过这些导入有两个可能的原因。您重新排列了文件夹结构并且前缀文件不再是以前的位置，或者您更改了目标的一些构建设置。添加第三方类时，您很可能更改了某些构建设置。

要解决此问题，请选择您的目标并进入构建设置并搜索“前缀标头”。在那里定义的路径应该是相对于 myProject.xcodeproj 文件的前缀文件的路径。

您也可以将前缀文件中的代码更改为不再包含 UIKit 和 Foundation，但您可能会记得这样做

# mobile - Tabris iOS 客户端开发是否需要 Mac？

> ID：11124651
> 
> 赞同：0
> 
> 时间：2012-06-20T17:09:49.770
> 
> 标签：mobile

Tabris iOS 客户端开发是否需要 Mac？例如 - 如果使用预构建的客户端，iOS 客户端还需要 Mac 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:09:21.257

如果您想从源代码构建自己的 iOS 应用程序，您只需要一台 Mac 即可进行开发。

如果您没有 Mac，您可以[请求预编译的 Tabris iOS 应用程序](http://developer.eclipsesource.com/tabris/downloads/request-a-build/)，为您的 iOS 设备、品牌和服务器 URL 定制构建。

所以，就像你说的 - 你不需要 Mac 来使用 Tabris 进行 iOS 开发。

# javascript - 子 div 掩盖了对其父 div 的点击

> ID：11124652
> 
> 赞同：0
> 
> 时间：2012-06-20T17:09:50.660
> 
> 标签：javascript, jquery, html, css, jquery-templates

不久前，我发布了一个关于父 div 没有对点击事件做出反应的问题，因为它的子项似乎掩盖了它。如果没有显示一堆代码，我无法复制它，并且真的不想这样做，因为这似乎有很多问题要问，但由于我仍然遇到问题，我希望有人能花时间来看看这个。我相当糊涂！

使用[vktemplate](http://www.eslinstructor.net/vktemplate/)获取一个 json 对象并将其插入到我的页面中，如下所示：（我认为这是唯一相关的部分，但整个代码都[在这里](http://jsfiddle.net/GX387/)......大约还有 50 行。）

```
<div class='order_and_lines_container_div' id='order_container_<%= o[order]['order_header'].order_number %>' >

    <div id="order_details_button_<%=o[order]['order_header'].order_number %>" class='fl order_details_trigger' >

    <% if ( o[order]['order_header'].reference ) { %>

        <input type='hidden' id="reference_<%= o[order]['order_header'].order_number %>" value="<%= o[order]['order_header'].reference %>" />

    <% } %>

        <!-- //shipping data-->
        <input type='hidden' id='ship_to_name' value="<%= o[order]['order_header'].ship_to_name %>" />

        <input type='hidden' id='ship_to_address_1' value="<%= o[order]['order_header'].ship_to_address1 %>" />

        <input type='hidden' id='ship_to_address_2' value="<%= o[order]['order_header'].ship_to_address2 %>" />

        <input type='hidden' id='ship_to_city' value="<%= o[order]['order_header'].ship_to_city %>" />

        <input type='hidden' id='ship_to_zipcode' value="<%= o[order]['order_header'].ship_to_zipcode %>" />

        <% var escaped_title_for_customer = (o[order]['order_header'].name).replace("'", "");

        escaped_title_for_customer = (escaped_title_for_customer).replace('"', ''); %>

        <div class='fl cell_div for_customer_div clip' value='<%= escaped_title_for_customer %>'>

            <div class='tooltip' style='width:215px;overflow:hidden;' title='<%= escaped_title_for_customer %>'>

            <%= o[order]['order_header'].name %>

            </div>

       </div>

       <div class='fl cell_div order_number_div' id='order_number_div_<%= o[order]['order_header'].order_number %>'>

       <%= o[order]['order_header'].order_number %>

       </div>       

       <div class='fl cell_div order_status_div'>

       <%= o[order]['order_header'].status %>

       </div>

       <div class='fl cell_div order_date_div'> 

       <%= o[order]['order_header'].order_date %> 

       </div>

       <div class='fl cell_div scheduled_ship_date_div'>

       <%= o[order]['order_header'].due_date %>

       </div>

        <% if ( o[order]['order_header'].order_description ) {

            var escaped_title_description = (o[order]['order_header'].order_description).replace("'", "");

            escaped_title_description = (escaped_title_description).replace('"', ''); %>

            <div class='fl cell_div project_name_div tooltip' value='<%= escaped_title_description %>' title='<%= escaped_title_description %>'>

            <%= o[order]['order_header'].order_description %>

            </div>

        <% } %> 

         <div class='cb'></div>  

     </div>

//more

<% } %> 
```

我生成这个html：

![来自 chrome 控制台的 html 屏幕截图](../Images/da298a989739c71c5a66b2fae7438a4e.png)

渲染，看起来像

![呈现的 html 截图](../Images/b6be762bdf9a6d726a0dc0fbcf9e2976.png)

我正在尝试在`order_details_trigger`单击具有 id 的 div 时执行某些操作（弹出一个包含更详细信息的模式），但现在，它仅在我单击包含信息的 div 之间的微小空间时触发（其中我已将红色框放在屏幕截图中）。

关于为什么会发生这种情况的任何想法？谢谢你，如果你度过了这一切！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:17:15.957

添加`pointer-events: none;`到子 div 的样式。

# mysql - 看似简单的mysql查询，实属不易

> ID：11124656
> 
> 赞同：0
> 
> 时间：2012-06-20T17:10:05.183
> 
> 标签：mysql

我有一个非常基本的 mysql 表，称为成员资格，它跟踪哪些人属于哪些组。人们可以属于许多群体。

它包含 3 个字段：id、person_id、group_id

我需要选择所有 group_id 为“20”和“53”的 person_id。人们必须只属于这两个群体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:20:09.750

```
SELECT DISTINCT a.person_id
FROM memberships a
JOIN memberships b
    ON a.person_id = b.person_id 
    AND b.group_id = 53
LEFT JOIN memberships c
    ON a.person_id = c.person_id 
    AND c.group_id NOT IN (20,53)
WHERE a.group_id  = 20 AND c.person_id IS NULL; 
```

尽管您也可以选择一种[`NOT EXISTS`](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)格式。

# ruby-on-rails - 在 Rails 表单参数名称中编码 UTF-8

> ID：11124658
> 
> 赞同：0
> 
> 时间：2012-06-20T17:10:10.667
> 
> 标签：ruby-on-rails, ruby, params

我的参数有问题。我收到以下参数：

```
{"utf8"=>"✓", "authenticity_token"=>"...=", "Portugu\xC3\xAAs"=>{"title"=>"313" } } 
```

在我的控制器中，我需要使用键 =>“Portugu\xC3\xAAs”，但首先我需要它采用正确的形式（即 -> Português），我不知道该怎么做。

编辑：

工作流程 1\. 用户保存一种语言 2\. 我在表单中使用该语言来保存信息，如下所示：

```
Português[title] 
```

3\. 因为用户可以在该表单中拥有多个语言环境（步骤 1 中保存的所有语言环境）

```
locales.each do |locale|
 ...
 :value => params[locale.key][:title] 
```

问题是 locale.key ('Português') 与 "Portugu\xC3\xAAs" 不匹配，因此它会因 nil 而崩溃

你能帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:48:26.797

对我有用的解决方案是迭代接收到的参数，并在 URI.escape 的帮助下比较字符串，如果匹配 enc_locale 设置并在值中使用。感谢所有帮助过的人！

```
 enc_locale = ""
    params.each do |param|
      if URI.escape(param[0]) == URI.escape(locale.key)
        enc_locale = param[0]
      end
    end

   ...
   :value => params[enc_locale][:title] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:07:06.320

我试过这个，结果很好：

```
 <% p = {}
       p["Português"] = {}
       p["Português"][:title] = "Title in Portugês" %>
    <p><%= p["Portugu\xC3\xAAs"][:title] %> 
```

我得到

```
<p>Title in Portugês</p> 
```

我没有看到问题。

# c# - 将 C# Func<> 移植到 Java- 数学方程

> ID：11124668
> 
> 赞同：3
> 
> 时间：2012-06-20T17:10:37.213
> 
> 标签：c#, java, porting

我正在将 C# 库移植到 Java（用于非线性回归，原始代码[在此处](http://www.trentfguidry.net/post/2011/12/10/Implementing-Levenberg-Marquardt-algorithm-nonlinear-least-squares-regression-multiple-weighted-simultaneous-functions-in-C-sharp.aspx)）。该库使用 Java 中不存在的 Func<> 类。IE（A、B、C、D，时间是回归的参数，不需要固定。）

```
Func<double>[] regressionFunctions = new Func<double>[]
{() => A * Math.Exp(time) * Math.Sin(B * time),
() => C * Math.Exp(time) * Math.Cos(D * time)}; 
```

我想做的是将其转换为 Java 代码。我看到了一些关于创建匿名内部类的内容，但我不确定这种特殊情况的正确用法。我希望等式可以在以后进行评估（对于特定的 t 值）。我需要一个新类、一个接口还是最好的方法？任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:26:32.483

我不确定库中是否已经有一个接口，但你可以这样做：

```
interface Func<T> {
    T appy();
} 
```

然后说：

```
Func<Double>[] funcs = new Func<Double>[] {
    new Func<Double> { @override Double apply() { ... } },
    new Func<Double> { @override Double apply() { ... } }
}; 
```

然后再打电话申请他们。注意：我编写的 c# 比 java 多得多，并且没有方便的 java 编译器，因此该数组实例化的语法可能不适用——但希望你能明白我的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:28:34.900

您可以定义自己的接口，并使用匿名实现来移植代码：

```
// Declaring the interface
interface FuncDouble {
    double calculate();
}

public LevenbergMarquardt(FuncDouble[] regressionFunctions, ...) {
    // Using the functor:
    double functionValue = _regressionFunctions[i].calculate()
}

// Declaring an array of functors:
FuncDouble[] regressionFunctions = new FuncDouble[] {
    new FuncDouble() {
        public double calculate() {
            return A * Math.Exp(time) * Math.Sin(B * time);
        }
    }
,   new FuncDouble() {
        public double calculate() {
            return C * Math.Exp(time) * Math.Cos(D * time);
        }
    }
}; 
```

为了使实现工作，`A`、`B`、`C`、`D`和`time`变量必须是实例/类变量，或者是`final`局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:14:15.123

您始终可以使用泛型创建接口并传递它的实现。有一些方法可以解决“Java 中不存在”的问题。

```
public interface Func<T> {
   T evaluate(Object...params);
} 
```

你也可以看看`Callable<T>`类。

# c++ - 我将 Sprite 添加到 CCArray，但是如何通过 CCObject 获取它的成员，如 getPosition()？

> ID：11124670
> 
> 赞同：1
> 
> 时间：2012-06-20T17:10:38.163
> 
> 标签：c++, cocos2d-x

```
cocos2d::CCArray *arr;  
cocos2d::CCSprite *foo;  
arr->addObject(foo);

CCObject *item;
CCARRAY_FOREACH(arr, item)
{
    //how to get item->getPosition() ????
} 
```

我知道 arr 中的 foo 是 CCObject。我想知道如何获得他们的子类成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:21:51.527

```
((cocos2d::CCSprite*)item)->getPosition() 
```

你会在 cocos2d-x 中大量使用 type_casting

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:31:38.503

```
(static_cast<cocos2d::CCSprite*>item)->getPosition(); 
```

另外，如果您存储类似的对象，请查看 CCMutableArray。它是一个基于模板的容器，将提供的实例返回到模板类型而无需强制转换

# openoffice-calc - Openoffice Calc - 更改文本大小写

> ID：11124674
> 
> 赞同：1
> 
> 时间：2012-06-20T17:10:42.613
> 
> 标签：openoffice-calc

我正在尝试输入

F值

在一个单元格中。Openoffice 将其更改为

F值

该单元格设置为文本单元格。我在工具 > 单元格内容下未选中重新计算、自动计算和自动输入。

我怎样才能让它停止做这个改变？我只想输入我想输入的内容，没有自动更正，非常感谢：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:01.447

应该是：
工具 -> 自动更正选项... -> 选项卡选项 -> 取消选中正确的两个首字母大写

# php - 使用 PHP 和 curl 或 fopen 获取 Bing 网站管理员统计信息

> ID：11124676
> 
> 赞同：0
> 
> 时间：2012-06-20T17:10:57.873
> 
> 标签：php, curl, certificate, fopen, bing

我正在尝试加载 Bing 网站管理员工具生成的统计数据。我正在根据所需数据构建 url 并尝试加载它。由于 file_get_contents() 不适用于 https，因此我尝试了基于 curl 的函数和 fopen。

这是否可能，或者 Bing 是否以某种方式阻止了该数据流被远程访问？我知道谷歌有一个登录过程，但我没有发现 Bing 有这样的东西。相反，我使用 cURL 设置了证书，打开了 allow_url_fopen，并启用了 ssl。除了以下消息之外，Var 转储和打印什么都没有给我：

使用 fopen() 时：resource(3) of type (stream) Resource id #3

使用 getBingdata() 时：bool(false)

这是我的功能。其中大部分是从关于 SO 和其他地方的教程拼凑而成的。对于任何重大错误或遗漏，我提前道歉

```
function getBingData($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]); //
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);

    // goes to Bing login page if set to false
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);

    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_ENCODING, true);

    if(substr($url,0,4)=='http') { $temp = parse_url($url); }
    else if(substr($url,0,5)=='https') { $temp = parse_url($url); }
    else { $temp = parse_url('https://'.$url); }

    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); // 0, 1, and 2 make no difference
    curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "./certificates/ssl.bing.com.cer");
    curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "./certificates/wmstat.bing.com.cer");

    $result = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
    return ($info['http_code']!=200) ? false : $result;
} 
```

我也尝试通过 curl 发送我的 bing 网站管理员登录名和密码，但发现没有任何区别。我需要用 cookie 做些什么吗？Bing 有登录流程吗？有没有更好的方法从 https url 获取 web 数据？还是必须将 Bing 中的所有内容都转储到文件中以供其他用途？

提前谢谢了！

附言。我正在使用[https://wmstat.bing.com/webmaster/data.ashx?wmkt=en-CA&wlang=en-CA&type=sitelinks&url=CLIENTURLGOESHERE&out=plain](https://wmstat.bing.com/webmaster/data.ashx?wmkt=en-CA&wlang=en-CA&type=sitelinks&url=CLIENTURLGOESHERE&out=plain)给出的输出，我知道可以将其设置为文件（csv格式）或从浏览器中保存。但是，我需要动态加载所有或各个部分以进行 SEO 分析，并可能转储到数据库中。如果我可以直接获取这些生成页面的内容，而不是将它们保存到文件中然后读取它们，那将节省大量时间和精力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T03:29:35.570

如果仅使用它就可以工作

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

卷曲的选择，祝你好运

# android - TTS - CHECK_VOICE_DATA_FAIL - 检查引擎是否可用

> ID：11124678
> 
> 赞同：1
> 
> 时间：2012-06-20T17:11:08.567
> 
> 标签：android, text-to-speech

我的 TTS 引擎有一个奇怪的问题，我不知道为什么/哪里是我的错误。为解决方案搜索了数小时，但没有任何可提及的结果。

当我使用这个[API 演示代码](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/TextToSpeechActivity.html)时，一切都运行良好，我可以听到所有已安装语言的声音。

但是当我通过[这种方法](http://developer.android.com/resources/articles/tts.html)进行检查时，我得到了 CHECK_VOICE_DATA_FAIL 作为自定义 TTS 引擎的返回码（我需要所有必要的语言，标准 google 是不够的）。

我在这里想念什么？如何检查 TTS 引擎的可用性？我知道这不一定是代码问题，但是对于其他程序，这似乎是有效的。

[我从SVox 网站](http://svoxmobilevoices.wordpress.com/gallery/)安装了一些其他应用程序，这些应用程序似乎可以在我的所有设备上运行，而下面的代码却失败了。

例如，[TalkToMeClassic](http://market.android.com/details?id=info.fidogames.apps.talktome)正在检查引擎的可用性并且它正在工作。

这里有什么不同？

这是我的确切代码（这是文章的副本）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, 0x99);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 0x99) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            // success, create the TTS instance
            mTts = new TextToSpeech(this, this);
        } else {
            Log.e("TTS","Missing Data:" + resultCode );
            // missing data, install it
            Intent installIntent = new Intent();
            installIntent.setAction(
                TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:03:56.197

不幸的是，`initializing TextToSpeech`可靠是复杂的、异步的和令人困惑的。

为什么你的代码检查 0x99？？？

您实际上不需要使用`ACTION_CHECK_TTS_DATA Intent`来检查语言可用性，`TextToSpeech.isLanguageAvailable`而是使用。

所以[这是一个帮助类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/tts/TextToSpeechInitializer.java)。该库中的代码将帮助您入门。它可以像扩展[这个类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)一样简单。

或者您可以阅读[本书](https://rads.stackoverflow.com/amzn/click/com/1118183487)中的详细信息。

# iphone - 按钮没有响应点击事件，

> ID：11124682
> 
> 赞同：0
> 
> 时间：2012-06-20T17:11:20.820
> 
> 标签：iphone

我正在处理表格视图并进行自定义。`tableFooterView`我正在做的是：

类A.m

```
- (void)viewDidLoad
{
    FooterViewController    *footerView     =   [[FooterViewController alloc] initWithNibName:@"FooterViewController" bundle:nil];

    // Add selector of Class A to checkOutButton
    [footerView.checkOutButton addTarget:self action:@selector(goToCheckOut) forControlEvents:UIControlStateNormal];

    self.shoppingListTable.tableFooterView.backgroundColor  =   [UIColor clearColor];
    self.shoppingListTable.tableFooterView  =   footerView.view;
}

- (void)goToCheckOut {
    NSLog(@"this is a response from a button");
} 
```

FootViewController.h

```
@interface FooterViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *amount;
@property (strong, nonatomic) IBOutlet UIButton *checkOutButton;
@end 
```

插座也连接到 xib 文件

但是，当我单击按钮时，它根本没有响应，并且日志什么也没有显示......

我在这里做错了什么。如果您对此有任何想法，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:34:09.150

试试这个：

```
[footerView.checkOutButton addTarget:self action:@selector(goToCheckOut) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:44:00.243

您的代码不起作用，因为您设置了错误的`forControlEvents`参数。要通过按下按钮调用方法，您需要使用`UIControlEventTouchUpInside`.

所以改变你的这一行`[footerView.checkOutButton addTarget:self action:@selector(goToCheckOut) forControlEvents:UIControlStateNormal];`

**到**

`[footerView.checkOutButton addTarget:self action:@selector(goToCheckOut) forControlEvents:UIControlEventTouchUpInside];`

请检查控制事件参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

# android - 从 onCreate 访问 ViewPager 视图？

> ID：11124685
> 
> 赞同：1
> 
> 时间：2012-06-20T17:11:31.593
> 
> 标签：android, android-viewpager

我一直在 Android 中尝试使用 ViewPager，并注意到 PagerAdapter 直到onCreate() 在我的主 Activity 中完成*后才实例化“页面”视图。*这似乎使得无法将任何侦听器连接到主 Activity 的任何布局小部件或回调。是否有一个在 onCreate() 之后调用的方法，我可以挂钩以便从 PagerAdapter 访问实例化视图？OnPostResume() 和 OnPostCreate()似乎没有被调用*。*

主要活动

```
public class mainApp extends Activity
{
    protected void onCreate (Bundle savedInstanceState)
    {
        super.onCreate (savedInstanceState);
        setContentView (R.layout.main);

        mAdapter = new MyPagerAdapter ();
        mPager = (ViewPager) findViewById (R.id.myfivepanelpager);
        mPager.setAdapter (mAdapter);
        mPager.setCurrentItem (1);

        /* here, I would like to be able to inflate the views 
         * instantiated in mAdapter, however they have not been 
         * instantiated yet even though setCurrentItem() has been called */
    }

    ...
} 
```

寻呼机适配器

```
public class MyPagerAdapter extends PagerAdapter
{
    private String TAG = "** MyPagerAdapter **";
    View vscreen1;
    View vscreen2;

    @Override
    public int getCount ()
    {
        return 2;
    }

    @Override
    public int getItemPosition (Object object)
    {
       return super.getItemPosition (object);
    }

    public Object instantiateItem (View collection, int position)
    {
        LayoutInflater inflater = (LayoutInflater) collection.getContext ().getSystemService (Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;

        switch (position)
        {
            case 0:
                  resId = R.layout.screen1;
                        Log.d (TAG, "screen1");
                  // tie in button callbacks here for screen1
            break;

            case 1:
                        resId = R.layout.screen2;                               
                        Log.d (TAG, "screen2");
                  // tie in button callbacks here for screen2
            break;
        }

        View view = inflater.inflate (resId, null);
        ((ViewPager) collection).addView (view, 0);

        return view;
    }

   ...

} 
```

# hibernate - Grails / Hibernate 标准 id inList

> ID：11124686
> 
> 赞同：3
> 
> 时间：2012-06-20T17:11:32.687
> 
> 标签：hibernate, grails, groovy, criteria

这个问题是基于我[在这里](https://stackoverflow.com/questions/11113527/hql-joins-in-grails-part-deux)问的。相同的关系和相同的目标。我有一个事物的实例。我想获取与我拥有的 Thing 实例相关联的所有 Bar 实例相关联的 Foo 的所有实例。

我的模型中有一个方法，它根据某些条件返回对象列表。

```
class Foo {

    static List findAllAssociatedWith( Object obj ) {
        def results = null
        if( obj instanceof Bar) {
            results = Foo.withCriteria() {
                bars{
                    //inList( "id", Thing.bars.id ) // this does not work
                    inList( "id", [new Long(3), new Long(4)] ) // this works
                }
            }
        }
        return results
    }
} 
```

`Thing.bars.id`返回我要检查的 id 列表，但显然它是一个整数的 ArrayList，即使预期为 Long。这是我得到的错误：

```
java.util.ArrayList cannot be cast to java.lang.Long. Stacktrace follows:
Message: java.util.ArrayList cannot be cast to java.lang.Long 
```

**为什么`Thing.bars.id`返回整数列表而不是长整数列表，我该如何解决？**

**更新：**

我打电话后发现了问题`println Things.bars.id`。我希望它返回一个数字（整数或长整数）的 ArrayList，如下所示：

```
[3,4] 
```

但相反，我得到了 ArrayLists 的 ArrayList，其中第一个数组列表是我想要的，第二个数组列表是一个空列表，如下所示：

```
[ [ 3, 4 ], [] ] 
```

不知道为什么 Grails 会这样做，但现在一个简单的方法是`Thing.bars.id.get( 0 )`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-13T09:50:49.877

ubiquibacon，您可以使用 flatten 方法 Thing.bars.id.flatten() 将数组数组展平为简单数组

你的 [ [ 3, 4 ], [] ] 变成 [3,4]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:23:09.550

如果没有看到 的定义`Thing.bars`，很难说出这里发生了什么。但是，如果您有一个想要转换为 Long 的整数列表，您可以使用

```
Thing.bars.id*.asType(Long) 
```

# powershell - PowerShell 比较运算符背后的推理

> ID：11124689
> 
> 赞同：2
> 
> 时间：2012-06-20T17:11:42.957
> 
> 标签：powershell, comparison, operator-keyword

有谁理解为每个 PowerShell 的比较运算符制作区分大小写和不区分大小写版本的原因？为什么要让默认大小写不敏感？

例如，以 -eq 和 -ceq 为例。这些运算符用于比较所有类型，而不仅仅是字符串。那么 0 -ceq 1 是什么意思呢？如何不区分大小写比较两个整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:50:50.403

很明显，因为有时您需要区分大小写，而有时您不需要。不区分大小写是一个合理的默认设置，因为当您从命令行执行临时查询时，您不需要做额外的工作来确保看到最常见的尝试匹配的示例。

至于 0 -ceq 1 可能意味着什么：谁在乎？真的！如果你不想知道，就不要编码。

# iphone - iPhone App 不再具有写入权限

> ID：11124691
> 
> 赞同：0
> 
> 时间：2012-06-20T17:11:49.277
> 
> 标签：iphone, objective-c, nsfilemanager

我有一个需要能够写入 /var/mobile/Applications/.../Documents 目录的应用程序。这工作正常，但由于某种原因，现在当我运行我的代码时，NSFileManager createFileAtPath 每次都返回 NO。我不知道为什么会发生这种情况，还有其他人吗？我想知道我是否以某种方式意外更改了一些目标设置......

任何帮助表示赞赏，

罗宾

注意：这发生在我尝试写入的任何数据（NSString、NSDictionary 等）

```
NSDictionary *dataToWrite = [[NSDictionary alloc] initWithObjectsAndKeys:@"1234", @"id", @"hfjk", @"password",nil]; 
NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(

                                                          NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDirectory = [arrayPaths objectAtIndex:0];
filePath = [docDirectory stringByAppendingString:@"/sample-file-name"];
NSFileManager *fileMgr;
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver encodeObject:dataToWrite forKey:@"any-key"];
[archiver finishEncoding];

BOOL status = [fileMgr createFileAtPath:path contents:data attributes:nil];
if (status)
    NSLog(@"Created file at path: %@",path);
else
    NSLog(@"Failed to create file at path: %@",path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:37:44.613

不写作，

```
filePath = [docDirectory stringByAppendingString:@"/sample-file-name"]; 
```

请检查这个

```
filePath = [docDirectory stringByAppendingPathComponent:@"sample-file-name"]; 
```

请检查[NSFileManager 类参考](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)

# ios - iOS 中的 ARC 问题

> ID：11124693
> 
> 赞同：1
> 
> 时间：2012-06-20T17:12:02.590
> 
> 标签：ios, automatic-ref-counting

~ ARC 是否总是在最后一个强指针被删除后释放一个对象？或者它是未确定的，并且在未来某个未指定的时间点将被发布？同样，假设您没有对程序进行任何更改，那么每次运行和编译程序时 ARC 是否总是相同的？

〜你如何处理将对象交给其他类？例如，假设我们在一个类中创建一个`Cake`对象。`Bakery`这个过程可能需要很长时间，涉及到很多不同的方法，所以我们把蛋糕放在一个`strong property`. 现在假设我们想把这个蛋糕对象交给客户。客户也可能希望有一个强有力的指针。这个可以吗？有两个具有指向同一个对象的强指针的类？或者我们应该在`Bakery's`交接后立即取消指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:50:49.083

1.  你的代码应该是结构化的，所以这个问题的答案并不重要——如果你想使用一个对象，保留一个指向它的指针，不要依赖 ARC 副作用来保持它:) 这些副作用可能会随着不同的编译器。

2.  两个强指针绝对没问题。ARC 只会在两个指针都指向其他东西（或什么都没有！）时释放对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:41:08.473

Ok, first this answer might helpt you also a little bit: [ARC equivalent of autorelease?](https://stackoverflow.com/questions/8292060/arc-equivalent-of-autorelease)

Generally after the last strong variable is nilled, the object is released immediately. If you store it in a property, you can nil the property, assign it to something like __strong Foo *temp = self.bar; before you nil, and return that local __strong variable (although arc normally detects the return, and inferes the __strong byitself).

Some more details on that: [Handling Pointer-to-Pointer Ownership Issues in ARC](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:42:50.963

1.  ARC 将在编译时实现正确的保留和释放。它的行为与您自己将它们放在那里没有任何不同，因此它将始终进行相同的编译，并且回答您的问题的行为应该始终相同。但这并不意味着您的对象总是会在指针被删除后立即被释放。因为你从不直接以任何形式的目标 C 调用 dealloc，你只是告诉它没有引用计数并且释放它是安全的。这通常意味着它将立即发布。

2.  如果您将一个对象从一个类传递到另一个类，并且接收类具有与之关联的强属性，并且传递它的类最终将其指针归零，那么它的引用计数仍然至少为 1 并且会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:55:47.040

DeanWombourne 的回答是正确的；但要添加到（1）。

特别是，作为优化的一部分，编译器可能会显着地重新排序语句。虽然方法调用总是按照代码中编写的顺序发生（因为任何方法调用都可能有副作用），但编译器可以对任何原子表达式重新排序，只要重新排序不影响行为即可。局部变量重用等也是如此……

因此，ARC 编译器将保证指针在需要时有效，仅此而已。但是不能保证指向的对象何时可能被释放，除非它不会超出声明的范围。也不能保证对象 A 在 B 之前被释放，仅仅因为 A 是在 B 之前声明和最后使用的。

换句话说，只要您在不依赖副作用和竞争条件的情况下编写代码，它就应该可以正常工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-14T10:35:03.253

请保持您的代码正确，因为它在不同的编译器上具有不同的行为。

[![在此处输入图像描述](../Images/8489766cc971c795de7ee0ae1d6d6ff3.png)](https://i.stack.imgur.com/ozMPA.png)

# c# - 加载。XIB在一个班级

> ID：11124698
> 
> 赞同：1
> 
> 时间：2012-06-20T17:12:18.287
> 
> 标签：c#, iphone, uitableview, xamarin.ios, nib

我如何加载一个。XIB 通过点击表格视图的行？下面的这个例子是一个类的一部分，因为我提醒这个类的加载？

```
public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
{
    tableView.DeselectRow (indexPath, true);

    //this.PresentModalViewController(home,true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:04:40.157

您的问题和评论中没有太多细节......

如果您`override`使用该`RowSelected`方法，那么您很可能会从`UITableViewSource`right 继承一个新类型？如果是这样，那么您应该使其构造函数保留对的引用`UITableViewController`并使用此引用来调用`PresentModalViewController`并使用此引用稍后

例如

```
public class MyTableViewSource : UITableViewSource {

    UITableViewController ctrl;

    public MyTableViewSource (UITableViewController c)
    {
        ctrl = c;
    }

    public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
        tableView.DeselectRow (indexPath, true);
        var home = new UIViewController ("YouNibName", null); // default bundle
        ctrl.PresentModalViewController (home, true);
    }
} 
```

注意：我使用过`UIViewController`，但您可能已经为您的 NIB 定义了一个类型。

# rest - 如果我需要额外的 REST API，Meteor 是一种选择吗？

> ID：11124699
> 
> 赞同：14
> 
> 时间：2012-06-20T17:12:19.120
> 
> 标签：rest, meteor

我要编写一个 Web 应用程序，它应该可以从 Web 和本机移动设备应用程序中访问 CRUD。对于后者，我绝对致力于 REST API。是否有可能通过 Meteor.com 实现这一点？是否可以选择仅将 Meteor 用于 Web 并使用第二个 REST 接口直接与 mongo 对话？由于流星客户端侦听 mongodb 中的更改，这不应该引起冲突，不是吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T08:01:05.790

截至 2015 年，请查看[Gadi](https://stackoverflow.com/a/22601617/1269037)对 Meteorpedia REST API 条目的回答，以及[krose](https://stackoverflow.com/a/27828110/1269037)比较 REST API 包的回答。关于将 REST API 折叠成核心的[讨论在 Hackpad 上](https://meteor.hackpad.com/Meteor-Hack-Week-REST-APIs-with-Meteor-XK2NNXqhUvj)。这个问题是[How to expose a RESTful service with Meteor](https://stackoverflow.com/questions/10150538/how-to-expose-a-restful-web-service-using-meteor)的副本，它有更好的答案。——丹·达斯卡斯库

下面的旧答案（2012）。

* * *

要在数据之上添加 RESTful 方法，请查看为 Meteor 编写的 Collection API：

[https://github.com/crazytoad/meteor-collectionapi](https://github.com/crazytoad/meteor-collectionapi)

至于访问数据库的认证，看看这个项目：

[https://github.com/meteor/meteor/wiki/Getting-started-with-Auth](https://github.com/meteor/meteor/wiki/Getting-started-with-Auth)

两者在开发中都绝对是幼稚的，但是您*可以*创建一个 RESTful API 并将其与移动本地客户端轻松集成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-24T06:41:11.473

这个问题有很多重复。我在 Meteorpedia 中对此进行了完整的撰写，我相信它涵盖了所有问题：

[http://www.meteorpedia.com/read/REST_API](http://www.meteorpedia.com/read/REST_API)

这篇文章回顾了创建 REST 接口的所有 6 个选项，从最高级别（例如为您处理一切的智能包）到最低级别（例如编写您自己的 connectHandler）。

此外，这篇文章还介绍了在 Meteor 中使用 REST 接口是对还是错，参考 Meteor REST 测试工具，并解释了 CORS 安全问题等常见缺陷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:55:44.990

如果您计划开发生产应用程序，那么 Meteor 现在不是一个选择。它在不断的变化中，还有很多共同的特性需要支持才能投入使用，这将是相当长的一段时间。

对于您的问题，有人已经询问并回答了有关在流星中支持文件上传的问题（还包含 HTTP 处理相关信息）。
[如何使用 Meteor 处理文件上传？](https://stackoverflow.com/questions/10099202/how-would-one-handle-a-file-upload-with-meteor)

# google-ads-api - 通过 adwordsAPI 从 MCC adwords 帐户获取所有 clientID

> ID：11124700
> 
> 赞同：2
> 
> 时间：2012-06-20T17:12:20.053
> 
> 标签：google-ads-api

我想从我的 MCC 帐户中检索所有 clientID。我正在使用此代码

```
 AdWordsUser user = new AdWordsUser(adwordsPropertyService.getEmail(), adwordsPropertyService.getPassword(),
                      null, adwordsPropertyService.getUseragent(), adwordsPropertyService.getDeveloperToken(),
                      adwordsPropertyService.getUseSandbox());

              InfoServiceInterface infoService = user.getService(AdWordsService.V201109.INFO_SERVICE);

              InfoSelector selector = new InfoSelector();
              selector.setApiUsageType(ApiUsageType.UNIT_COUNT_FOR_CLIENTS);
              String today = new SimpleDateFormat("yyyyMMdd").format(new Date());
              selector.setDateRange(new DateRange(today, today));
              selector.setIncludeSubAccounts(true);

              ApiUsageInfo apiUsageInfo = infoService.get(selector);
              for (ApiUsageRecord record : apiUsageInfo.getApiUsageRecords()) {
                      ...... 
```

但是 apiUsageInfo.getApiUsageRecords 只返回我的一些 clientId。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-27T10:44:31.483

**我的回答将对 PHP 开发人员有所帮助**

我正在使用 v201502(php)，您将从`ManagedCustomerService`api 获取所有帐户详细信息。请参考以下网址[https://developers.google.com/adwords/api/docs/reference/v201502/ManagedCustomerService](https://developers.google.com/adwords/api/docs/reference/v201502/ManagedCustomerService)

这是我使用的示例代码，

```
 function DisplayAccountTree($account, $link, $accounts, $links, $depth) {
      print str_repeat('-', $depth * 2);
      printf("%s, %s\n", $account->customerId, $account->name);
      if (array_key_exists($account->customerId, $links)) {
        foreach ($links[$account->customerId] as $childLink) {
          $childAccount = $accounts[$childLink->clientCustomerId];
          DisplayAccountTree($childAccount, $childLink, $accounts, $links,
              $depth +1);
        }
      }
    }
    function GetAccountHierarchyExample(AdWordsUser $user) {
      // Get the service, which loads the required classes.

      $user->SetClientCustomerId('xxx-xxx-xxxx');
      $managedCustomerService =
          $user->GetService('ManagedCustomerService');

      // Create selector.
      $selector = new Selector();
      // Specify the fields to retrieve.
      $selector->fields = array('CustomerId',  'Name');

      // Make the get request.
      $graph = $managedCustomerService->get($selector);

      // Display serviced account graph.
      if (isset($graph->entries)) {
        // Create map from customerId to parent and child links.
        $childLinks = array();
        $parentLinks = array();
        if (isset($graph->links)) {
          foreach ($graph->links as $link) {
            $childLinks[$link->managerCustomerId][] = $link;
            $parentLinks[$link->clientCustomerId][] = $link;
          }
        }
        // Create map from customerID to account, and find root account.
        $accounts = array();
        $rootAccount = NULL;
        foreach ($graph->entries as $account) {
          $accounts[$account->customerId] = $account;
          if (!array_key_exists($account->customerId, $parentLinks)) {
            $rootAccount = $account;
          }
        }
        // The root account may not be returned in the sandbox.
        if (!isset($rootAccount)) {
          $rootAccount = new Account();
          $rootAccount->customerId = 0;
        }
        // Display account tree.
        print "(Customer Id, Account Name)\n";
        DisplayAccountTree($rootAccount, NULL, $accounts, $childLinks, 0);
      } else {
        print "No serviced accounts were found.\n";
      }
    }

    GetAccountHierarchyExample($user); 
```

**SetClientCustomerId**将是您所有帐户的父 ID，它将出现在您的 google AdWords 帐户的退出按钮附近，请参阅附图

![在此处输入图像描述](../Images/a90f912e42efb04f63567bb68e0b6034.png)

我希望这个答案会有所帮助，如果您需要任何进一步的帮助，请在下面添加您的评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:25:30.930

如果您只需要 clientCustomerIds 列表，请尝试使用 ServicedAccountService。
[这](https://github.com/googleads/googleads-java-lib/blob/master/examples/adwords_axis/src/main/java/adwords/axis/v201502/accountmanagement/GetAccountHierarchy.java)是一个代码示例，显示了如何完成此操作。

下次，您可能还想考虑在 AdWords API 官方论坛上提问：[https ://groups.google.com/forum/?fromgroups#!forum/adwords-api](https://groups.google.com/forum/?fromgroups#!forum/adwords-api)

# asp.net-mvc - 如何让 AutoMapper 填充我的视图模型？

> ID：11124704
> 
> 赞同：3
> 
> 时间：2012-06-20T17:12:30.453
> 
> 标签：asp.net-mvc, automapper

我的问题的代码示例：

```
IList<TestDataAnimal> testDataFromDb = this.db.TestDataAnimals.Include(t => t.TestType).Include(t => t.Visit).Include(t => t.Visit.Patient).ToList();

Mapper.CreateMap<TestDataAnimal, TestDataAnimalViewModel>();

IList<TestDataAnimalViewModel> viewModelList = Mapper.Map<IList<TestDataAnimal>, IList<TestDataAnimalViewModel>>(testDataFromDb); 
```

在上面的代码中，`testDataFromDb`返回我需要的所有数据。到目前为止，一切都很好......我知道我从数据库中获取了所有正确的数据。问题是`viewModelList`没有填充来自`Visit.Patient`.

我的视图模型具有`FirstName`、`LastName`、`MRN`、`DOB`和的属性`PatientId`。除了在`PatientId`中命名`Id`的`Visit.Patient`，属性名称在域对象和视图模型中匹配。

如何让 AutoMapper 使用中找到的值填充我的视图模型属性`Visit.Patient`？谢谢！

解决方案 - 在这里添加是因为我无法回答我自己的问题......

这叫做扁平化，我刚刚在[这里找到了一个视频](http://www.dimecasts.net/Content/WatchEpisode/160)

基本上，这就是我想要的：

```
Mapper.CreateMap<TestDataAnimal, TestDataAnimalViewModel>()
.ForMember(d => d.FirstName, opt => opt.MapFrom(s => s.Visit.Patient.FirstName)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:18:02.953

这叫做扁平化，我刚刚在[这里找到了一个视频](http://www.dimecasts.net/Content/WatchEpisode/160)

基本上，这就是我想要的：

```
Mapper.CreateMap<TestDataAnimal, TestDataAnimalViewModel>()
.ForMember(d => d.FirstName, opt => opt.MapFrom(s => s.Visit.Patient.FirstName)); 
```

***在这里发布后不久就找到了我自己问题的答案，但 SO 说我无法回答我自己的问题。现在，我在几个小时内都无法接受自己的答案。

# go - 如何在 Go 中创建不区分大小写的地图？

> ID：11124705
> 
> 赞同：16
> 
> 时间：2012-06-20T17:12:41.903
> 
> 标签：go, case-folding

我想要一个键不敏感的字符串作为键。它是由语言支持还是我必须自己创建？谢谢你

**编辑：**我正在寻找的是一种默认方式，而不是每次使用地图时都必须记住转换键。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T18:16:51.537

编辑：我的初始代码实际上仍然允许映射语法，因此允许绕过这些方法。这个版本更安全。

您可以“派生”一种类型。在 Go 中，我们只说声明。然后你在你的类型上定义方法。只需要一个非常薄的包装器就可以提供您想要的功能。但请注意，您必须使用普通的方法调用语法调用 get 和 set。没有办法保留内置地图的索引语法或可选的 ok 结果。

```
package main

import (
    "fmt"
    "strings"
)

type ciMap struct {
    m map[string]bool
}

func newCiMap() ciMap {
    return ciMap{m: make(map[string]bool)}
}

func (m ciMap) set(s string, b bool) {
    m.m[strings.ToLower(s)] = b
}

func (m ciMap) get(s string) (b, ok bool) {
    b, ok = m.m[strings.ToLower(s)]
    return
}

func main() {
    m := newCiMap()
    m.set("key1", true)
    m.set("kEy1", false)
    k := "keY1"
    b, _ := m.get(k)
    fmt.Println(k, "value is", b)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:21:53.770

两种可能：

1.  如果您是输入集，则转换为大写/小写保证仅限于转换为大写/小写将产生正确结果的字符（对于某些 Unicode 字符可能不正确）

2.  否则转换为 Unicode 折叠大小写：

用于`unicode.SimpleFold(rune)`将 unicode 符文转换为折叠大小写。显然，这比简单的 ASCII 风格的大小写映射要昂贵得多，但它也更易于移植到其他语言。请参阅[EqualsFold 的源代码](http://golang.org/src/pkg/strings/strings.go?s=15764:15796#L600)以了解它是如何使用的，包括如何从源字符串中提取 Unicode 符文。

*显然，您会将这个功能抽象到一个单独的包中，而不是在使用地图的任何地方重新实现它。这应该不言而喻，但你永远不会知道。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-24T02:03:14.677

这是比[strings.ToLower](//golang.org/pkg/strings#ToLower)更强大的东西，您可以使用[golang.org/x/text/cases](//pkg.go.dev/golang.org/x/text/cases)包。例子：

```
package main
import "golang.org/x/text/cases"

func main() {
   s := cases.Fold().String("March")
   println(s == "march")
} 
```

如果你想使用标准库中的东西，我运行了这个测试：

```
package main

import (
   "strings"
   "unicode"
)

func main() {
   var (
      lower, upper int
      m = make(map[string]bool)
   )
   for n := '\u0080'; n <= '\u07FF'; n++ {
      q, r := n, n
      for {
         q = unicode.SimpleFold(q)
         if q == n { break }
         for {
            r = unicode.SimpleFold(r)
            if r == n { break }
            s, t := string(q), string(r)
            if m[t + s] { continue }
            if strings.ToLower(s) == strings.ToLower(t) { lower++ }
            if strings.ToUpper(s) == strings.ToUpper(t) { upper++ }
            m[s + t] = true
         }
      }
   }
   println(lower == 951, upper == 989)
} 
```

所以可以看出，`ToUpper`是稍微好一点的选择。

# c - 使用指针修改字符串会导致分段错误

> ID：11124716
> 
> 赞同：0
> 
> 时间：2012-06-20T17:13:22.657
> 
> 标签：c, string, segmentation-fault, constants

> **可能的重复：**
> [Linux 上 C 中字符数组和指针的分段错误](https://stackoverflow.com/questions/1773079/segmentation-fault-with-char-array-and-pointer-in-c-on-linux)

考虑以下代码

```
#include <stdio.h>

int main()
{
   char a[] = "hello";
   char *ptr = "world";
   a[2] = 'y'; //Line1\. No segmentation fault
   ptr[2] = 'u'; //Line2\. Causes Segmentation fault

   printf("name = %s\n", a); 
   printf("name = %s\n", ptr);

   return 0;
} 
```

如果 Line2 由于试图修改字符串常量而导致分段错误，那么为什么该规则不适用于 Line1？

# css - 是否有修复 IE 渲染错误的 javascript 库？

> ID：11124717
> 
> 赞同：3
> 
> 时间：2012-06-20T17:13:25.530
> 
> 标签：css, internet-explorer, browser-bugs

我们的网站在除 IE 6-8 之外的所有浏览器中看起来都很棒。我们甚至没有使用很多 CSS3 特性。这些只是普通的旧 IE 渲染错误（如边距和填充）。在尝试应用一堆 IE 特定修复之前，我想知道是否有人知道我可以应用来修复这些典型错误的 javascript 库？

**更新：**就像我提到的，我们不一定使用任何“现代”CSS3 功能或 HTML5，所以这些只是典型的 IE 8 错误，其中 IE 呈现的内容与所有其他浏览器不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:16:21.207

寻求出色的[**normalize.css 重置**](http://necolas.github.com/normalize.css/)来处理大部分内容（也被[HTML5 Boilerplate](http://html5boilerplate.com/)使用）

> Normalize.css 是一个可自定义的 CSS 文件，它使浏览器能够更一致地呈现所有元素并符合现代标准。我们研究了默认浏览器样式之间的差异，以便仅针对需要规范化的样式。

至于为不支持 CSS3 的浏览器获得支持，请查看[CSS3Pie](http://css3pie.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:15:01.077

你不需要 JavaScript；只需使用 CSS 重置文件：http: [//yuilibrary.com/yui/docs/cssreset/](http://yuilibrary.com/yui/docs/cssreset/)

这将适用于大多数浏览器，不仅可以解决 IE 问题，还可以使您的网站在不同的浏览器上呈现更均匀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T16:43:20.037

你可能想看看这个：[https](https://code.google.com/p/ie7-js/) ://code.google.com/p/ie7-js/ 或者这个：[https ://code.google.com/p/html5shiv/](https://code.google.com/p/html5shiv/)

# delphi - 如何在 Delphi 中编写高级计算器而不受浮点类型的限制？

> ID：11124722
> 
> 赞同：0
> 
> 时间：2012-06-20T17:13:36.257
> 
> 标签：delphi, delphi-7

您好，我可以`17^1000`在 Windows 7 的计算器中进行计算，看起来像

`1.2121254521552524e+123`（在我看来这是不正确的）

我怎么能用delphi写它，我想用例如`1.2121254521552524e+123 mod 18` 或`1.2121254521552524e+123 mod 100`.

另一个例子：`17 mod 5 = 2`

怎么写，谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:32:41.683

您将需要使用某种扩展精度类型。这种类型不会是原始类型，您需要使用现有类型或编写自己的类型（这将是大量工作，并且是重新发明轮子的经典案例）。Java 可能是一种更好的语言，因为它的系统库包括 BigInteger 和 BigDecimal 类，它们可以处理您需要的功能。

编辑：这里有一些提供大整数和高精度浮点运算的delphi库：http: [//www.delphiforfun.org/programs/Library/big_integers.htm](http://www.delphiforfun.org/programs/Library/big_integers.htm)

也就是说，如果您发现自己无法使用 windows 计算器来完成您正在寻找的东西，并且您只需要它来完成一两件事，请考虑使用更强大的在线服务，例如 WolframAlpha。

另外，如果您仍然没有答案：

```
17^1000 mod 18  == 1
17^1000 mod 100 == 1 
```

用于计算此类数字的算法很简单，不需要大整数支持。考虑以下伪代码：

```
modular_exponentiation (base, exponent, modulus):
    let value = 1
    let c_exponent = 0
    for c_exponent less than exponent:
        let value = value * base
        if value greater than or equal to modulus:
            let value = (value) mod (modulus)
        increment c_exponent
    value. 
```

# iphone - Mp4 视频在 iPad 上无法播放 *在离线模式下*

> ID：11124734
> 
> 赞同：1
> 
> 时间：2012-06-20T17:14:18.830
> 
> 标签：iphone, html, caching, video, offline

将 mp4 嵌入到 iOS Safari 中的网页时，我遇到了一个奇怪的问题。我用视频标签嵌入它：

`<video src='gizmo.mp4' width=560 height=320></video>`

但是，在页面上，我得到了“视频不可用”占位符图形（带有斜线的播放按钮）

但是，当我转到服务器上的直接视频 (http://www.example.com/gizmo.mp4) 时，视频效果很好。

我正在使用[这里](http://www.808.dk/?code-html-5-video)的视频进行测试，我还没有最终的视频文件。我还用 Quicktime 在我点击“Export for Web”时生成的 gizmo.m4v 文件替换了 gizmo.mp4 文件。我得到相同的结果。

我只对 iOS 感兴趣，因此欢迎针对 iPhone/iPad 的特定解决方案（即使它们不能在整个网络中使用）

提前致谢！
-Esa

**编辑：**做了更多的测试。由于这是我正在开发的离线应用程序，因此我完全离线，依赖于清单。但是，一旦我取出清单并再次完全在线工作，这些视频就可以正常工作。所以看起来iOS没有缓存视频资源？有问题的视频是 748kB，所以这不是缓存大小问题（不过，当我尝试在线播放 13MB 电影时，Safari 会自动要求缓存内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T18:55:19.417

视频被浏览器视为流媒体资源并且不会被缓存 - 即使在 .appcache 清单文件中直接引用时也是如此。我认为你可以让它工作的唯一方法是将 HTML 5 应用程序打包为原生应用程序，使用许多可用工具之一（[https](https://trigger.io) ://trigger.io、Accelerator 等）。

# jquery - 将现有代码升级到 DataTables

> ID：11124736
> 
> 赞同：0
> 
> 时间：2012-06-20T17:14:26.763
> 
> 标签：jquery, datatables, jquery-datatables

我已经完成了很大一部分功能。我只是想念如何将我为单个块所做的复制到多个复选框块。

这是我到目前为止所拥有的：

```
jQuery('#blockID, .msg_block').live('click', function () {
        var aData = oTable.fnGetData(nTr);
        var blockList = [];
        var count = 0;
        jQuery('td input:checked').each(function () {
            count = count + 1;
            var tr = $(this).closest('tr');
            blockList.push(tr.attr('replytoid'));
        });
        if (count >= 1) {
            blockDistID(blockList.join(', '), count, oTable, nTr);
        } else {
            //console.log(aData[4]);
            //console.log(jQuery('#replytoid').val());
            blockDistID(aData[4], 1, oTable, nTr);
            return false;
        }

    }); 
```

对于上述代码中的这一部分：

```
var tr = $(this).closest('tr');
blockList.push(tr.attr('replytoid')); 
```

我可以从`oTable`对象中提取数据`nTr`吗？

以前我已将此值附加到 id 属性部分，但我现在尝试从行本身中提取此数据。

我不知道我是否需要将这两个功能分开。`#blockID`是一个按钮，应该将所有的 id 放入一个被检查的数组中。

`.msg_block`是一个阻止单个用户的按钮。

这部分代码：

```
jQuery('td input:checked').each(function () {
            count = count + 1;
            var tr = $(this).closest('tr');
            blockList.push(tr.attr('replytoid'));
        }); 
```

需要以某种方式获取`<td>`已检查行的数据。据我所知，所有需要的代码都已存在，我只是不确定如何`aData`在上述`input:checked`代码部分中进行分配，这将允许我抓取`aData[4]`该数据并将其推送到数组中。

# internet-explorer-7 - DHTML 文档类型 IE7

> ID：11124737
> 
> 赞同：1
> 
> 时间：2012-06-20T17:14:27.677
> 
> 标签：internet-explorer-7, dhtml, doctype, css3pie

我正在使用一些 DHTML（通过 css3pie），只要未声明 doctype，它们就可以正常工作，但是一旦声明了 doctype，就停止以任何方式运行。没有错误消息被抛出，只是没有任何功能......好吧，正常运行。这是 IE 的已知问题吗？我必须在怪癖模式/无文档类型下运行我的网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:52:55.347

我目前正在使用以下 DOCTYPE 声明和 HTML 标记。在 IE7 中，CSS3Pie 渲染的元素正确显示，并且页面以标准模式渲染：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:35:03.843

使用带有 XML 声明的 XHTML 文档类型，后跟换行符和注释来强制使用 quirks 模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- stuff -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

# dns - 未在并行 Plesk 面板中创建域

> ID：11124739
> 
> 赞同：0
> 
> 时间：2012-06-20T17:14:53.250
> 
> 标签：dns, plesk, windows-hosting

我正在使用 Parallels Plesk Panel 9.5.4。创建一个域“www.elixir.edu.np”时出现以下错误：

您正在执行的操作失败。您可以在更改或不更改其参数的情况下重试该操作。您可能还想将此问题报告给我们的支持人员，以便我们尽快为您提供帮助。

```
Additional Details
********************

Failed domain creation: Unable to update domain data: Failed mail post-configuration: Can't create mail domain servie: mailManager->addDomain() failed: mailmng failed: MEAOPO.PostOffice.AddPostOffice failed for name elixir.edu.np [elixir.edu.np]
---------------------- Debug Info -------------------------------
0: DomainPropertiesUIPointer.php:284
DomainPropertiesUIPointer->accessItem_create(string 'POST')
1: DomainPropertiesUIPointer.php:62
DomainPropertiesUIPointer->accessItem(string 'POST', NULL null)
2: UIPointer.php:601
UIPointer->access(string 'POST') 
```

其他域的创建没有任何错误。我尝试过类似的域名，例如：“elixir1.edu.np”| “eelixir.edu.np”，除了上面提到的一个之外，这些都是成功创建的。请任何帮助？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:18:20.393

> MEAOPO.PostOffice.AddPostOffice 名称为 elixir.edu.np 失败

这意味着不能在 MailEnable 中创建域。检查 MailEnable 管理员面板，可能 MailEnable 中已经存在这样的域，但在 Plesk 中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T08:24:07.400

在创建域之前检查域是否已经存在于 Windows 中的 plesk、iis 和 dns 记录中。

请在创建前删除记录。

# iphone - 用 Objective-C 打开 SQL

> ID：11124748
> 
> 赞同：0
> 
> 时间：2012-06-20T17:15:12.573
> 
> 标签：iphone, objective-c, sql, xcode, sqlite

我的支持文件中有一个 sql 文件。如何打开此文件以便开始使用 SQL 命令获取所需信息？我尝试了几种不同的语法，最后一次尝试时我最终搞砸了整个应用程序，因为我不记得我改变了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:33:00.373

如果您使用的是 sqlite 3。那么，

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString* documentsDirectory = [paths lastObject];
NSString* dbPath = [documentsDirectory stringByAppendingPathComponent:@"database.sqlite"];

if(sqlite3_open([dbPath UTF8String], &dataBase) == SQLITE_OK)
{
     NSLog(@"Opened Database");
    //Your code
}
else
{
     NSLog(@"Failed to open database");
     sqlite3_close (database);
} 
```

# google-maps - 谷歌地图：DirectionService 返回 OVER_QUERY_LIMIT 响应

> ID：11124749
> 
> 赞同：3
> 
> 时间：2012-06-20T17:15:19.350
> 
> 标签：google-maps, google-maps-api-3

我正在使用 google.maps.DirectionsService 获取两点之间的路线。此代码在过去 8 个月内一直有效。但是，从过去几天开始，DirectionService 路由调用正在返回 OVER_QUERY_LIMIT 响应状态。只有 6 组点，其中只有 2 或 3 个请求得到结果，其余的都失败。代码与过去 8 个月相比没有变化。以下是供参考的代码片段：

```
 var directionsService = new google.maps.DirectionsService();
            var request = {                     
                    origin:originLatlng, //This is of type : google.maps.LatLng
                    destination:destLatlng,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING,
                    provideRouteAlternatives: true
            };

            directionsService.route(request, function(result, status) {
                if (status == google.maps.DirectionsStatus.OK) {

                    polyline = new google.maps.Polyline({
                        path: result.routes[0].overview_path,
                        strokeColor: color1,
                        strokeOpacity: 0.8,
                        strokeWeight: 5,
                        geodesic: true
                    });
                }
            } 
```

几乎有 6 个这样的同时请求被发送到 DirectionService。我不能在请求之间设置睡眠，因为它会增加我的应用程序 GUI 加载时间。

我也尝试过来自不同网络的相同代码，但问题仍然存在。

我绝对没有接近达到每日 2,500 个请求的限制。

这里可能是什么问题？请为此提出解决方案。

任何帮助将不胜感激。

提前致谢

萨蒂亚帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:23:58.657

Google Map API 有两种配额。您正在使用客户端配额，如果您每分钟请求超过〜20（这是我的观察）地理编码，则会阻止您。

在这里查看详细信息：

[https://developers.google.com/maps/articles/geocodestrat#client](https://developers.google.com/maps/articles/geocodestrat#client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:39:07.177

我按照 Google 的 API 获取服务器端指示，并创建了一个 PHP 页面，`sleep(0.2)`如果`OVER_QUERY_LIMIT`返回 an 作为状态。然后我用来`$.getJSON`检索这个 PHP 页面，它使用*几乎完全相同*的数据和参数。（按照[Google 的](https://developers.google.com/maps/documentation/directions/)说明处理参数的差异。）

PHP：

```
$params = http_build_query($_GET);
$url = "http://maps.googleapis.com/maps/api/directions/json?sensor=false&" . $params;
$json = file_get_contents($url);
$status = json_decode($json)->status;

// check for over_query_limit status
while ($status=="OVER_QUERY_LIMIT") {
    sleep(0.2); // seconds
    $json = file_get_contents($url);
    $status = json_decode($json)->status;
}

header('application/json');
echo $json; 
```

jQuery：

```
request = { // construct route request object
    origin: start_address,
    destination: end_address,
    waypoints: addresses.join('|'),
    avoid: 'tolls'
};

$.getJSON('directions-lookup.php', request, function(response) {
    //console.log(response);
    var status = response.status;
    if (status==google.maps.DirectionsStatus.OK) {
        // do things here
    };
}); 
```

我注意到，当您使用 JavaScript Directions API 时，您会以 Google LatLng 对象的形式返回诸如 lat/lng 位置之类的内容，而这在此处不会发生。我只是用来`new google.maps.LatLng(..., ...)`将它们重新构建为对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:25:41.487

尝试将您的请求放在 setTimeout() 函数中：query_limit 可能指的是过去的请求，距离这个请求太近了。

```
setTimeout(function(){
    directionsService.route(request,function(result, status) {
        if (status == google.maps.DirectionsStatus.OK)
            {[...your code...]}
        else alert(status);
    });
},1000); 
```

# python - 为具有计算值 NetworkX 的图形编写标题

> ID：11124753
> 
> 赞同：3
> 
> 时间：2012-06-20T17:15:51.317
> 
> 标签：python, matplotlib, networkx

这应该是一个微不足道的问题。但我很困惑。我想在图形标题中打印由 NetworkX 计算的值：

```
y=nx.average_clustering(G) 
```

我应该如何正确编写该行：

```
plt.title('<C>='y) 
```

其中标题是计算出来的单词和值的组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:38:39.530

字符串格式是你正在工作的。

```
plt.title('<C>={}'.format(y)) 
```

可能适用于这个例子。您还可以执行通常的固定宽度填充，如[文档中所述](http://docs.python.org/library/stdtypes.html#string-formatting)。与运算符相反，`.format`表单是现在进行字符串格式化的首选方式`%`。

# c# - 如何在 C# 中使用通用数据库连接调用存储过程？

> ID：11124757
> 
> 赞同：4
> 
> 时间：2012-06-20T17:16:09.443
> 
> 标签：c#, ado.net, odbc, sqlclient, idbcommand

我必须在 C# (.Net 2.0) 中调用存储过程，有时使用 ODBC 连接，有时使用 SQLClient。我未来我们也可能不得不与 Oracle 进行沟通。

我的存储过程具有输入/输出参数和返回值。

```
CREATE PROCEDURE myProc (@MyInputArg varchar(10), @MyOutputArg varchar(20) output) AS (...) return @@ERROR 
```

我的问题是我找不到一种方法来存储无论客户端如何都可以通用的命令。我正在使用**IDbCommand**对象。

使用 ODBC 连接，我必须定义：

```
objCmd.CommandText = "? = CALL myProc (?,?)"; 
```

在 SQLclient 上下文中：

```
objCmd.CommandText = "myProc"; 
```

我真的不想解析我的命令，我相信有一个更好的方法来拥有一个通用的！

为了帮助人们重现，您可以在下面找到我是如何建立通用数据库连接的。在我的上下文中，提供者对象是从配置文件中定义的。

```
// My DB connection string, init is done from a configuration file
string myConnectionStr = "";

// Provider which defined the connection type, init from config file
//object objProvider = new OdbcConnection(); //ODBC
object objProvider = new SqlConnection(); // SQLClient

// My query -- must be adapted switch ODBC or SQLClient -- that's my problem!
//string myQuery = "? = CALL myProc (?,?)"; // ODBC
string myQuery = "myProc"; // SQLClient

// Prepare the connection
using (IDbConnection conn = (IDbConnection)Activator.CreateInstance(typeof(objProvider), myConnectionStr ))
{
    // Command creation
    IDbCommand objCmd = (IDbCommand)Activator.CreateInstance(typeof(objProvider));
    objCmd.Connection = conn;

    // Define the command
    objCmd.CommandType = CommandType.StoredProcedure;
    objCmd.CommandTimeout = 30;
    objCmd.CommandText = myQuery;

    IDbDataParameter param;

    // Return value
    param = (IDbDataParameter)Activator.CreateInstance(typeof(objProvider));
    param.ParameterName = "RETURN_VALUE";
    param.DbType = DbType.Int32;
    param.Direction = ParameterDirection.ReturnValue;
    objCmd.Parameters.Add(param);

    // Param 1 (input)
    param = (IDbDataParameter)Activator.CreateInstance(typeof(objProvider));
    param.ParameterName = "@MyInputArg";
    param.DbType = DbType.AnsiString;
    param.Size = 10;
    param.Direction = ParameterDirection.Input;
    param.Value = "myInputValue";
    objCmd.Parameters.Add(param);

    // Param 2 (output)
    param = (IDbDataParameter)Activator.CreateInstance(typeof(objProvider));
    param.ParameterName = "@MyOutputArg";
    param.DbType = DbType.AnsiString;
    param.Size = 20;
    param.Direction = ParameterDirection.Output;
    objCmd.Parameters.Add(param);

    // Open and execute the command
    objCmd.Connection.Open();
    objCmd.ExecuteReader(CommandBehavior.SingleResult);
    (...) // Treatment
} 
```

谢谢你的时间。

问候，蒂博。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:30:43.567

您可以围绕 IDbCommand 和实现创建一个包装器（但前提是您想要:)）。

```
//Note the IDisposable interface
public class MultiSqlCommand : IDisposable
{
  //DbConnectionType  is a custom enum
  public MultiSqlCommand(DbConnectionType connType, DbConnection conn)
  {
    //initialize members
    ...
    switch(connType) 
    {
      case ADO:
        _cmd = new SqlCommand(_connection);
        break;
      case ODBC:
        ...
    }
  }

  //As param name you pass the undecorated parameter name (no @, ?, etc.)
  public void AddParameter(string strippedName, object value) 
  {
    //this should be an internal function which gives you an SqlParameter formatted for your specific DbConnectionType
    object parameter = GetSqlParam(strippedName, value);
    _cmd.Parameters.Add(object);
  }
} 
```

添加参数后，您的命令就可以执行了。您可以通过属性公开它并在此类之外执行它，或者扩展 API 并添加一些方法来执行它并获取结果。随便你觉得方便。

**注意：**在您的 IDisposable 实现中，您应该处置 IDbCommand 实例（如果不为空）。这很重要，否则你会泄漏内存。

如果建议不清楚，请告诉我，我会尽力补充更多细节。我想说，解决方案很简单。您可以更进一步，在整个 ADO.NET 命令和参数支持之上创建一个抽象层，但我认为这里没有必要。这不像您没有编写完整的数据提供程序。

# ios - iOS如何记录动作并回放

> ID：11124758
> 
> 赞同：1
> 
> 时间：2012-06-20T17:16:10.647
> 
> 标签：ios, replay

我有一个游戏，用户控制一个角色（用他的手指），我想添加功能，以便用户可以在玩游戏时记录他的动作，然后回放。问题是游戏包含物理，我想很难复制完全相同的动作。我怎样才能实现这样一个可以完美重播所有用户操作的系统？我必须记录每一次触摸然后回放所有的触摸吗？有人对这个有经验么？我将 Box2D 用于物理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:27:27.317

“我们通过存储击键和帧号来记录回放” - box2d.org/forum/viewtopic.php?f=3&t=1982&view=next 似乎这是唯一的方法。将这些写到 PLIST 或其他东西上，你就会得到回放。此外，如果您的物理还不是确定性的（即随机），那么也只需删除随机值）

从评论：

“只需每帧（或可能每隔一帧）记录所有对象的所有位置和旋转状态，然后，当您想要回放时，只需完全跳过物理引擎，只需从记录的位置/旋转中重新定位每帧对象状态。

您需要做的就是确保回放的帧与物理运行时的持续时间相同。”

# google-fusion-tables - 融合表本身的可嵌入 iFrame 代码链接在哪里？

> ID：11124759
> 
> 赞同：0
> 
> 时间：2012-06-20T17:16:11.607
> 
> 标签：google-fusion-tables

我们希望创建一个类似于[http://nycstalled.com/](http://nycstalled.com/)示例的显示，其中地图可视化向左浮动，而表格（以及指向每条记录的链接）显示在右侧。

如果我将表格可视化为“地图”，我将获得配置信息窗口、配置样式、下载 KML、下载 KML 链接和“获取可嵌入链接”的选项

当我可视化为表格时，这些选项没有出现我需要的是“获取可嵌入链接”

我尝试了高级搜索，但没有找到答案。这是融合层的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:02:14.427

您可以使用 Experimental UI 获得可嵌入的表格可视化版本。点击右上角的实验链接。从“行 1”选项卡中选择工具 > 发布，这将为您提供最多可容纳 500 行的[表格的嵌入链接。](https://developers.google.com/chart/interactive/docs/gallery/table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:17:12.407

显示表格时，“获取链接”位于“在实验中查看”旁边的右上角

# search - 推力矢量化搜索：有效结合 lower_bound 和 binary_search 来找到位置和存在

> ID：11124764
> 
> 赞同：6
> 
> 时间：2012-06-20T17:16:18.073
> 
> 标签：search, cuda, binary-search, thrust, lower-bound

我正在尝试使用 Thrust 来检测是否可以在另一个数组中找到数组的每个元素以及在哪里（两个数组都已排序）。我遇到了矢量化搜索例程（lower_bound 和 binary_search）。

lower_bound 将为每个值返回可以插入到列表中的索引，考虑到它的排序。

我还需要知道是否找到了该值（可以使用 binary_search 完成），而不仅仅是它的位置。

是否可以在不进行两次搜索（调用 binary_search 然后调用 lower_bound）的情况下有效地实现两者？

我知道在标量情况下，如果找不到值，lower_bound 将返回指向数组末尾的指针，但这在矢量化版本中不会发生。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:23:38.923

您可以检查`lower_bound`返回的元素是否与您搜索的元素相同。例如给定`a = {1,3,5}`和搜索`b = {1,4}`，结果将是`c = {0,2}`。我们有`a[c[0]] == b[0]`，所以在`b[0]`，`a`但不在。`a[c[1]] != b[1]``b[1]``a`

（请注意，您需要确保不会进行任何越界内存访问，因为`lower_bound`可能会返回超出数组末尾的索引。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:25:10.620

@tat0：您也可以使用[Arrayfire](http://www.accelereyes.com/arrayfire/c/)：使用 lower_bound() 的矢量化搜索不会立即给您答案，而在 arrayfire 中使用 setintersect() ，您可以直接获得两个数组的“交集”：

```
float A_host[] = {3,22,4,5,2,9,234,11,6,17,7,873,23,45,454};
int szA = sizeof(A_host) / sizeof(float); 

float B_host[] = {345,5,55,6,7,8,19,2,63}; 
int szB = sizeof(B_host) / sizeof(float); 

// initialize arrays from host data
array A(szA, 1, A_host);
array B(szB, 1, B_host);

array U = setintersect(A, B); // compute intersection of 2 arrays

int n_common = U.elements();
std::cout << "common: ";     
print(U); 
```

输出为：常见：U = 2.0000 5.0000 6.0000 7.0000

要获取数组 A 中这些元素的实际位置，可以使用以下构造（前提是 A 中的元素是唯一的）：

```
int n_common = U.elements();
array loc = zeros(n_common); // empty array      

gfor(array i, n_common) // parallel for loop
     loc(i) = sum((A == U(i))*seq(szA));
print(loc); 
```

然后： loc = 4.0000 3.0000 8.0000 10.0000

此外，thrust::lower_bound() 似乎比 setintersect() 慢，我使用以下程序对其进行了基准测试：

```
int *g_data = 0;
int g_N = 0;

void thrust_test() {
 thrust::device_ptr<int> A = thrust::device_pointer_cast((int *)g_data),
     B = thrust::device_pointer_cast((int *)g_data + g_N);
 thrust::device_vector<int> output(g_N);
 thrust::lower_bound(A, A + g_N, B, B + g_N, 
                  output.begin(),
                  thrust::less<int>());
 std::cout << "thrust: " << output.size() << "\n";
}
void af_test() 
{   
  array A(g_N, 1, g_data, afDevicePointer);
  array B(g_N, 1, g_data + g_N, afDevicePointer);
  array U = setintersect(A, B);
  std::cout << "intersection sz: " << U.elements() << "\n";
}
int main()
{
  g_N = 3e6; // 3M entries
  thrust::host_vector< int > input(g_N*2);
  for(int i = 0; i < g_N*2; i++) {  // generate some input
    if(i & 1)
       input[i] = (i*i) % 1131;
    else
       input[i] = (i*i*i-1) % 1223 ;
 }
 thrust::device_vector< int > dev_input = input;
 // sort the vector A
 thrust::sort(dev_input.begin(), dev_input.begin() + g_N);
 // sort the vector B
 thrust::sort(dev_input.begin() + g_N, dev_input.begin() + g_N*2);
 g_data = thrust::raw_pointer_cast(dev_input.data());
 try {
    info();
    printf("thrust:  %.5f seconds\n", timeit(thrust_test));
    printf("af:  %.5f seconds\n", timeit(af_test));
 } catch (af::exception& e) {
     fprintf(stderr, "%s\n", e.what());
 }
return 0;
} 
```

结果：

CUDA 工具包 4.2，驱动程序 295.59

GPU0 GeForce GT 650M，2048 MB，Compute 3.0（单、双）

内存使用：1937 MB 可用空间（总共 2048 MB）

推力：0.13008 秒

阵列火：0.06702 秒

# objective-c - 自定义字体不起作用

> ID：11124767
> 
> 赞同：3
> 
> 时间：2012-06-20T17:16:28.640
> 
> 标签：objective-c, ios, fonts, uilabel, xcode4.3

我正在尝试将字体添加到我的项目中以在标签中使用，但它不起作用。这是我正在做的事情：

1.  我将字体文件复制到我的项目资源中。

2.  使用数组键设置我的 plist 文件`UIAppFonts`。

3.  将我的字体名称`Kingashandwriting.ttf`（带有扩展名的真实名称，而不是文件名）添加到数组中。

4.  在代码中设置我的字体：`UIFont *font= [UIFont fontWithName:@"Kingashandwriting" size:15];`

5.  将其设置为我的标签：`[self.myLabel setFont:font];`

myLabel 是`IBOutlet`与界面生成器中的标签链接的。我正在使用 Xcode 4.3.3

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T19:13:25.670

我记得在我的应用程序中实现自定义字体时遇到了同样的问题。我以为我的官方名称是对的，但这给我带来了问题。

我的建议是打开字体册中的文件并查看窗口顶部，看看该名称的含义。然后完全按照您在 fontWithName: 方法中看到的格式对其进行格式化。

这是您要查找的图像：

[http://i.stack.imgur.com/uOZy6.png](http://i.stack.imgur.com/uOZy6.png)

然后您的字体方法将如下所示（基于图像中的字体）：

```
UIFont *font= [UIFont fontWithName:@"BankGothic Lt BT" size:15]; 
```

有关更多信息，在我的应用程序中，我的文件名为 bankgthl.ttf，我将该文件名添加到我的 plist 数组中。但是当我在我的代码中设置字体时，我使用字体书中看到的名称将其称为与上面相同的名称，并且一切正常。

# c++ - 如何绑定异步？

> ID：11124768
> 
> 赞同：3
> 
> 时间：2012-06-20T17:16:31.857
> 
> 标签：c++, c++11

我已经使用 VS、g++ 和 Clang 尝试了以下操作，但无法确定任何错误喷出的押韵或原因。

```
void foo() {}

auto f = bind(async, foo); 
```

我怀疑这些错误可能源于混淆 async() 绑定到哪个，一个采用启动策略与一个不采用启动策略......或者我必须明确地为 async() 提供其模板类型（例如 async <...>）？无论哪种方式，编写上述语句的正确方法是什么？

**编辑：**

感谢您的建议，但以下均无效（使用任何编译器）：

```
bind(async<decltype(foo)>, foo);

bind(async<void (*)()>, foo);

bind(async<function<void ()> >, foo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:56:37.200

`std::async`不仅是一个模板，而且它也是重载的。您不仅需要选择所需的模板，还需要选择重载。

```
 typedef decltype(&foo) foo_type;
 typedef std::result_of<foo_type()>::type foo_rettype;

 auto chosen_async=
   static_cast<std::future<foo_rettype> (*)(foo_type && )>
     (&std::async<foo_type>); 
```

不幸的是，`std::bind`似乎不允许绑定函数采用右值引用。所以光写`std::bind(chosen_async, &foo)`还是不行。Is there a reference_wrapper<> for rvalue [references？](https://stackoverflow.com/questions/5126219/is-there-a-reference-wrapper-for-rvalue-references)：

```
template<typename T> struct adv { 
  T t; 
  explicit adv(T &&t):t(std::forward<T>(t)) {} 
  template<typename ...U> T &&operator()(U &&...) { 
    return std::forward<T>(t); 
  } 
}; 

template<typename T> adv<T> make_adv(T &&t) { 
  return adv<T>{std::forward<T>(t)}; 
}

namespace std { 
  template<typename T> 
  struct is_bind_expression< adv<T> > : std::true_type {}; 
} 
```

我们可以这样说`std::bind(chosen_async, make_adv(std::move(&foo)))`，除了一个问题：您不能直接传递`std::async`我们的包装对象之一，因此`std::result_of<...>`（因此`std::bind`）。无法推断`chosen_async`会返回什么。所以我们明确声明返回类型：

```
auto async_bound=
    std::bind<std::future<foo_rettype>>(chosen_async, 
                                        make_adv(std::forward<foo_type>(&foo))); 
```

做这一切似乎足以让 GCC 高兴，至少：http: [//ideone.com/gapLs](http://ideone.com/gapLs)。

* * *

当然，您可以使用 lambda 表达式为自己省去很多麻烦：

```
auto async_bound=[=]()->std::future<void> {return std::async(&foo);}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:20:09.590

您必须提供`async`模板参数。不只有*一个* `async`可以绑定。函数模板的每个实例都有一个。

# sql-server - EF 代码生成中的 SQL Server 架构名称到 CLR 命名空间

> ID：11124771
> 
> 赞同：1
> 
> 时间：2012-06-20T17:16:55.227
> 
> 标签：sql-server, entity-framework, entity-framework-4

我的数据库中有以下表格：

```
Business.Profiles
User.Profiles 
```

其中“业务”和“用户”是模式。

通过 Ado.Net DbContext Generator（添加代码生成项）生成 DbContext 时，我在代码中得到两个类：

```
Profile
Profile1 
```

理想情况下，我希望将架构名称转换为 clr 命名空间，但这并没有发生。有没有办法强迫这样的事情？我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:54:27.747

DbContext Generator 仅使用在 EDMX 文件中指定的名称，所以我猜您已经在 EDMX`Profile`中`Profile1`定义了实体。

类必须与 EDMX 中的实体具有完全相同的名称，并且您不能将具有相同名称的两个类映射到同一个 EDMX 模型。EF 不支持它，因为 POCO 类是按约定映射的，该约定仅使用类的名称（EF 在映射中不使用 CLR 命名空间）。正因为如此，你无法实现你想要的。简单的解决方法是简单地在 EDMX`UserProfile`和`BusinessProfile`.

# ios - 重力读数与 iPhone 加速度计的用户加速度读数？

> ID：11124772
> 
> 赞同：2
> 
> 时间：2012-06-20T17:17:04.913
> 
> 标签：ios, xcode, accelerometer, core-motion, uiaccelerometer

Iphone加速度计提供用户加速度和重力读数？从苹果指南中可以清楚地看到用户加速的意思，比手机从用户那里得到的加速。那么重力读数是什么意思呢？无论如何，他们提到总加速度是两者的加法！我对重力阅读感到困惑，谁能解释一下这背后的理论？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:39:25.360

The accelerometer measures the sum (user acceleration + gravity). Unfortunately it is of little use, in your application you typically need one or the other. So it is split into components (into user acceleration and gravity) with a sophisticated procedure called sensor fusion.

Gravity points downwards, corresponds to the gravitation. It tells you where downwards is. You can compute tilt angles from it, which may be handy in developing tilt games.

The user acceleration is handy when you are trying to figure out how the phone is shaken. It good for shaking games.

See also [accelerometers uses- smartphone](https://stackoverflow.com/a/7427860/341970)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:51:46.190

重力是一种向下恒定的加速度。它沿其矢量与任何其他恒定加速度无法区分。旋转手机将改变重力对每个加速度轴的贡献，与地面的角度成正比。重力恒定，三轴组合矢量长度的任何变化都应归因于用户加速度。

# html - twitter bootstrap navbar 固定顶部重叠站点

> ID：11124777
> 
> 赞同：372
> 
> 时间：2012-06-20T17:17:19.563
> 
> 标签：html, twitter-bootstrap

我在我的网站上使用引导程序，并且导航栏固定顶部有问题。当我只使用常规导航栏时，一切都很好。但是，当我尝试将其切换到导航栏固定顶部时，网站上的所有其他内容都会向上移动，就像导航栏不存在并且导航栏与其重叠一样。这基本上是我的布局：

```
.navbar.navbar-fixed-top
  .navbar-inner
    .container
.container
  .row
    //yield content 
```

我试图完全复制引导程序示例，但仅在使用导航栏固定顶部时仍然存在此问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：563
> 
> 时间：2012-06-20T17:19:46.893

您的答案在[文档](http://getbootstrap.com/components/#navbar-fixed-top)中是正确的：

> ### 需要身体填充物
> 
> 固定导航栏将覆盖您的其他内容，除非您添加`padding`到`<body>`. 尝试您自己的价值观或使用我们下面的代码段。提示：默认情况下，导航栏的高度为 50px。
> 
> ```
> body { padding-top: 70px; } 
> ```
> 
> 确保在核心 Bootstrap CSS**之后包含它。**

在**Bootstrap 4 文档中...**

> 固定导航栏使用位置：固定，这意味着它们是从 DOM 的正常流程中拉出来的，并且可能需要自定义 CSS（例如，在 上的 padding-top ）以防止与其他元素重叠。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-10-24T14:56:58.170

正如其他人所说，在 body 上添加一个 padding-top 效果很好。但是，当您使屏幕变窄（到手机宽度）时，导航栏和主体之间会出现间隙。此外，拥挤的导航栏可以换成多行栏，再次覆盖一些内容。

这为我解决了这些问题

```
body { padding-top: 40px; }
@media screen and (max-width: 768px) {
    body { padding-top: 0px; }
} 
```

这在默认情况下会产生 40px 的填充，当宽度低于 768px 时会产生 0px（根据引导程序的文档，这是将创建间隙的手机布局截止点）

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-06-18T22:04:10.367

一个更方便的解决方案供您参考，它在我的所有项目中都很完美：

改变你的第一行

```
.navbar.navbar-fixed-top 
```

到

```
.navbar.navbar-default.navbar-static-top 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2019-08-07T14:50:05.653

只需更改`fixed-top`. `sticky-top`这样您就不必计算填充。
它有效！

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2013-10-17T06:50:54.507

@Ryan，您是对的，对高度进行硬编码会使其在自定义导航栏的情况下无法正常工作。这是我愉快地用于 BS 3.0.0 的代码：

```
$(window).resize(function () { 
   $('body').css('padding-top', parseInt($('#main-navbar').css("height"))+10);
});

$(window).load(function () { 
   $('body').css('padding-top', parseInt($('#main-navbar').css("height"))+10);         
}); 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2012-06-20T17:22:29.567

这个问题是已知的，并且在 twitter 引导站点中有一个解决方法：

> 粘贴导航栏时，请记住考虑下方的隐藏区域。添加 40px 或更多的填充到`<body>`. 请务必在核心 Bootstrap CSS 之后和可选的响应式 CSS 之前添加它。

这对我有用：

```
body { padding-top: 40px; } 
```

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2018-07-20T13:25:00.920

Bootstrap 4 的解决方案，它在我的所有项目中都很完美：

改变你的第一行

```
navbar-fixed-top 
```

到

```
sticky-top 
```

[引导文档参考](https://getbootstrap.com/docs/4.0/utilities/position/#sticky-top)

大约是时候他们做对了：D

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2012-12-22T16:09:09.353

我把它放在产量容器之前：

```
<div id="fix-for-navbar-fixed-top-spacing" style="height: 42px;">&nbsp;</div> 
```

我喜欢这种方法，因为它记录了让它工作所需的 hack，而且它也适用于移动导航。

编辑 - 这工作得更好：

```
@media (min-width: 980px) {
  body {
    padding-top: 60px;
    padding-bottom: 42px;
  }
} 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2016-03-16T01:44:49.610

正如我在一个类似的问题中发布的那样，在我真正的固定导航栏之前创建一个虚拟的非固定导航栏，我取得了很好的成功。

```
<nav class="navbar navbar-default"></nav> <!-- Dummy nav bar -->
<nav class="navbar navbar-default navbar-fixed-top"> <!-- Real nav bar -->
    <!-- Nav bar details -->
</nav> 
```

间距适用于所有屏幕尺寸。

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2015-01-10T22:48:26.933

问题在于 navbar-fixed-top，除非指定 body-padding，否则它将覆盖您的内容。此处提供的解决方案没有在 100% 的情况下有效。JQuery 解决方案在页面加载后闪烁/移动页面，这看起来很奇怪。

对我来说真正的解决方案不是使用 navbar-fixed-top，而是使用 navbar-static-top。

```
.navbar { margin-bottom:0px;} //for jumtron support, see http://stackoverflow.com/questions/23911242/gap-between-navbar-and-jumbotron

<nav class="navbar navbar-inverse navbar-static-top">
...
</nav> 
```

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2013-08-05T07:47:41.980

所有以前的解决方案都以一种或另一种方式将 40 像素专门硬编码到 html 或 CSS 中。如果导航栏包含不同的字体大小或图像怎么办？如果我有充分的理由不首先弄乱**身体**填充物怎么办？我一直在寻找解决这个问题的方法，这就是我想出的：

```
$(document).ready(function(){
    $('.contentwrap') .css({'margin-top': (($('.navbar-fixed-top').height()) + 1 )+'px'});
    $(window).resize(function(){
        $('.contentwrap') .css({'margin-top': (($('.navbar-fixed-top').height()) + 1 )+'px'});
}); 
```

您可以通过调整“1”来向上或向下移动它。无论导航栏中内容的大小，在调整大小之前和之后，它似乎都对我有用。

我很好奇其他人对此有何看法：请分享您的想法。（顺便说一句，它将被重构为不重复。）除了使用 jQuery 之外，还有其他理由不以这种方式解决问题吗？我什至可以使用这样的辅助导航栏：

```
$('.contentwrap') .css({'margin-top': (($('.navbar-fixed-top').height())
        + $('.admin-nav').height() + 1 )+'px'}); 
```

PS：以上是在 Bootstrap 2.3.2 上 - 它会在 3.x 中工作，只要通用类名仍然存在......事实上，它应该独立于引导程序工作，对吗？

编辑：这是一个完整的 jquery 函数，它处理两个堆叠的、响应式的动态大小的固定导航栏。它需要 3 个 html 类（或者可以使用 id）：user-top、admin-top 和 contentwrap：

```
$(document).ready(function(){

    $('.admin-top').css({'margin-top':($('.user-top').height()+0)+'px'});
    $('.contentwrap') .css({'padding-top': (
        $('.user-top').height()
         + $('.admin-top').height()
         + 0 )+'px'
    });

    $(window).resize(function(){
        $('.admin-top').css({'margin-top':($('.user-top').height()+0)+'px'});
        $('.contentwrap') .css({'padding-top': (
            $('.user-top').height()
             + $('.admin-top').height()
             + 0 )+'px'
        });
}); 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2013-11-25T16:00:12.903

要处理菜单栏中的换行，请将 id 应用于导航栏，如下所示：

```
<div class="navbar navbar-default navbar-fixed-top" role="navigation" id="topnavbar"> 
```

并在包含 jquery 后在头部添加这个小脚本，如下所示：

```
<script>
    $(document).ready(function(){
        $(document.body).css('padding-top', $('#topnavbar').height() + 10);
        $(window).resize(function(){
            $(document.body).css('padding-top', $('#topnavbar').height() + 10);
        });
    });
</script> 
```

这样，身体的顶部填充就会自动调整。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2019-01-30T19:30:51.837

在导航标签中使用这个类

> class="navbar navbar-expand-lg navbar-light bg-light**置顶**"

对于引导程序 4

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-12-06T08:42:56.483

对于 Bootstrap 3.+ ，我将使用以下 CSS 来修复基于 [https://github.com/twbs/bootstrap/issues/1768的 navbar-fixed-top 和锚点跳转重叠问题](https://github.com/twbs/bootstrap/issues/1768)

```
/* fix fixed-bar */
body { padding-top: 40px; }
@media screen and (max-width: 768px) {
  body { padding-top: 40px; }
}

/* fix fixed-bar jumping to in-page anchor issue */
*[id]:before { 
  display: block; 
  content: " "; 
  margin-top: -75px; 
  height: 75px; 
  visibility: hidden; 
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-08-13T02:13:23.000

你所要做的就是

```
@media (min-width: 980px) { body { padding-top: 40px; } } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-06-23T16:54:17.963

继 Nick Bisby 的回答之后，如果您在 Rails 中使用 HAML 遇到此问题，并且您已在此处应用了 Roberto Barros 的修复程序：

> 我将“bootstrap_and_overrides.css”中的要求替换为：
> 
> =需要 twitter-bootstrap-static/bootstrap.css.erb

（见[https://github.com/seyhunak/twitter-bootstrap-rails/issues/91](https://github.com/seyhunak/twitter-bootstrap-rails/issues/91)）

...您需要将正文 CSS 放在require 语句**之前**，如下所示：

```
@import "twitter/bootstrap/bootstrap";
body { padding-top: 40px; }
@import "twitter/bootstrap/responsive";
=require twitter-bootstrap-static/bootstrap.css.erb 
```

如果 require 语句在 body CSS 之前，它不会生效。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-04-30T18:29:12.227

我会这样做：

```
// add appropriate media query if required to target mobile nav only
.nav { overflow-y: hidden !important } 
```

这应该确保导航块不会向下延伸并覆盖页面内容。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-11-27T13:56:14.410

这很有效，对我来说看起来不错。

```
<body class="pt-5 mt-4">....</body> 
```

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2014-03-05T01:19:41.720

我只是将导航栏包裹在

```
<div width="100%">
<div class="nav-? ??">
...
</nav>
</div> 
```

没有花哨的恶作剧，但它奏效了..

# security - SSAS 更改维度安全性需要处理多维数据集？

> ID：11124783
> 
> 赞同：1
> 
> 时间：2012-06-20T17:18:04.693
> 
> 标签：security, ssas, ssas-2008

是否有必要在数据库维度的允许属性更改出现之前处理多维数据集？我有一个关于 SSAS 2008 的数据库，其地理维度包含一个名为“State”的属性。State 属性包含美国每个州的值（例如，阿拉斯加、阿拉巴马、...、华盛顿）。我有一个使用这个维度的 MOLAP 立方体。对于每个州，我都有一个 AD 组，对于包含关联 AD 组的每个州，我都有一个 SSAS 角色。

我想使用数据库维度而不是多维数据集维度上的角色安全性来限制对特定状态的访问。我想这样做是因为我将来会添加一个额外的多维数据集，它将共享相同的状态维度。我在数据库维度级别对权限所做的任何更改似乎都没有反映在多维数据集中。但是，当我在多维数据集维度上设置权限时，一切都按预期工作。

例如，我已将我的阿拉斯加角色设置为只能访问 SSAS 数据库中地理维度的“阿拉斯加”状态属性值。当我以 Alaska 用户身份进行身份验证时（我从工作站注销并以 Alaska 用户身份登录），我会看到所有 50 个状态。但是，当我限制多维数据集维度的权限并以阿拉斯加用户身份进行身份验证时，我看到的唯一状态是阿拉斯加。

在数据库级别的权限更改反映在多维数据集中之前，我是否需要处理我的多维数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:38:09.523

*   是否有必要在数据库维度的允许属性更改出现之前处理多维数据集？

是的，因为您有 MOLAP 存储，所有信息都从数据库复制到多维数据集。

* * *

*   我想在数据库维度而不是多维数据集维度上使用角色安全性来限制对特定状态的访问

这是不可能的，但由于您使用的是 SSAS 2008，您可以在多个多维数据集之间共享一个维度，因此您只需执行一次

# playframework - 意外标记：第 1 行第 57 列附近的 VALUES

> ID：11124784
> 
> 赞同：2
> 
> 时间：2012-06-20T17:18:07.137
> 
> 标签：playframework, syntax-error, sql-in

```
JPA.em("default").createQuery("insert into USER (FULLNAME, EMAIL, USERNAME, PASSWORD) " + " VALUES (\'"+fullname+"\',\'"+email+"\',\'"+username+"\',\'"+password+"\');"); 
```

这是一个错误的查询吗？我收到此错误：

```
[IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: unexpected token: VALUES near line 1, column 57 [insert into USER (FULLNAME, EMAIL, USERNAME, PASSWORD) VALUES ('Doniyor','ikbola-86@bk.ru','jurabayev','er');]] 
```

我不知道为什么会这样，查询字符串实际上是可以的，对吧？

将不胜感激任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T17:28:14.830

我认为你应该使用

```
.createNativeQuery(...); 
```

代替

```
.createQuery(...); 
```

但我不确定。

如果您使用注释

`@Query(value = "your_query_here", nativeQuery = true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:32:33.257

看起来您好像在尝试使用 SQL 语句而不是 JPAQL 进行查询，我不相信它有一个 Insert Into，尽管我自己还是 Play Framework 的新手，所以我可能弄错了。

我相信您应该做的是创建您希望插入的用户，然后保留该对象，因为您使用的是 JPA。

所以你的代码看起来像这样：

```
User u = new User('Doniyor','ikbola-86@bk.ru','jurabayev','er');
JPA.em("default").persist(u); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T10:49:37.573

这也行.......

```
String hql = String.format("insert into attendence(slip_change_cntr,roll_no)values(0,"+a+")");
    Query query = sessionHb.createSQLQuery(hql);
    return query.executeUpdate(); 
```

# objective-c - 使用 5 种不同方法参数的坏习惯？

> ID：11124786
> 
> 赞同：2
> 
> 时间：2012-06-20T17:18:19.327
> 
> 标签：objective-c, ios

我有两个按钮，每个按钮可以执行两种不同的实现（无论是否选择），所以总共有 4 种可能的实现。全部编码后，我注意到每个实现都有 20 多行代码，每个实现只有 1 或 2 个变量不同。我决定要清理它并让每个实现调用单独的较小方法并将不一致的变量作为参数传递。

我认为这是一个更好的实践 b/c 我正在重用代码。但是，在我的一种方法中，我必须通过 5 个不同的参数以正确的条件实现该方法。

在方法中有这么多参数是不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:24:53.377

拥有许多参数并不是一件坏事。

有一些模式可以创建一个类来将所有参数分组到一个对象中，这对您来说可能看起来更清晰。另一种选择是使用带有所有参数的字典作为单个配置参数。一些 Apple 类会这样做（例如[导航栏中的标题字体配置](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/occ/instp/UINavigationBar/titleTextAttributes)）。

我*个人*会说代码重复比许多相互调用并具有多个参数的方法更糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:23:43.107

如果它允许您删除许多重复的行，我认为这样做没有任何问题。如果要删除 1 或 2 行，那么它可能不值得努力。

事实上，您可以根据需要传递尽可能多的参数。可能还有其他方法可以完成您要实现的目标，但如果没有代码，您的 5 个参数乍一看似乎是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T17:25:05.627

没有特定数量的参数通常是“不好的做法”。一个方法应该有尽可能多的参数。也就是说，在某些情况下，具有大量参数可能表明更好的设计是可能的。例如，在某些情况下，您可能会意识到对象应该跟踪成员变量中的某个值，而不是每次都将值传递给它的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T17:26:35.977

我认为使用 5 个参数是可以的，因为一些 Objective-c 默认方法也有 4 个参数，例如

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(updateConvMenu:)
                                 notificationName:@"NSConvertersChanged" 
                                           object:converterArray]; 
```

我们可以做的更清楚的是为您的代码提供更好的格式

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T17:48:54.630

免责声明：我知道关于目标 c 的 zilch

没有看到有问题的代码就很难说，这完全取决于你在做什么。说一个有五个参数的方法是不好的做法，这有点假设，尽管保持方法参数的数量尽可能少当然是好的做法。

这个方法听起来像一个内部“帮助”方法（而不是 API 的公开暴露组件）这一事实为您提供了比其他方式更多的回旋余地，但通常您不希望处于一个方法的情况正在根据一些神秘的参数组合做不同的事情。

当我遇到具有令人不安的长签名的方法时，如果不创建冗余代码就无法对其进行重组，我通常会执行以下操作之一：

*   用几个更简洁的方法来包装进攻方法。例如，您可以为每个“实现”创建一个方法，并用一个好名称指示其目的，只接受该目的所需的参数。然后它将委托给内部的、更臭的方法。臭方法只会在您的“特定于实现”包装器中使用，而不是分散在您的代码中。使用命名良好的包装器，开发人员将了解您的意图，而无需破译参数的含义。

*   创建一个封装方法所需数据的类。如果该方法的作用取决于某个系统或子系统的状态，则封装该状态！我经常用“XXContext”类型的类来做这件事。现在，您的方法可以检查和分析这些上下文数据并采取适当的措施。这也有利于重构。如果将来该方法需要更多信息来完成其任务或实现新功能，您可以将此数据添加到参数对象，而不必更改使用该方法的每一位代码。只有需要使用更改的代码才必须为上下文数据提供适当的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T17:23:17.810

这是那些很难明确回答的主观问题之一。

我不介意 Objective C 方法中的许多参数，因为它可以使被调用的 API 更加清晰（并且参数也可以很好并且类型安全）。

如果您可以将这些许多函数提炼成数量较少的函数（或从所有其他函数调用的“基本”函数），那么这可能也会使代码更简洁，更易于理解和阅读。另外，如果您对该“基本”功能进行更新，则功能更改将通过您调用操作的所有方式来获取（当然，这也可能是好事或坏事）。

# wcf - WCF：在具有 HTTPS 的 Silverlight 4.0 应用程序中使用 nettcp

> ID：11124787
> 
> 赞同：4
> 
> 时间：2012-06-20T17:18:26.127
> 
> 标签：wcf, ssl, silverlight-4.0, https, net-tcp

我有一个使用在 HTTP 中工作的 nettcp 的 Silverlight 4.0 应用程序。然后我尝试从 http 切换到 https。这是我开始遇到问题的地方。当我运行应用程序时，我会收到 Internet Explorer 通知“显示混合内容？”。如果我单击“是”，那么我的应用程序中会收到错误消息：

```
Could not connect to net.tcp://ServerName:4502/TestService.svc/netTcp. The connection attempt lasted for a time span of 00:00:01.2191219\. TCP error code 10013: An attempt was made to access a socket in a way forbidden by its access permissions.. This could be due to attempting to access a service in a cross-domain way while the service is not configured for cross-domain access. You may need to contact the owner of the service to expose a sockets cross-domain policy over HTTP and host the service in the allowed sockets port range 4502-4534. 
```

我`ClientConfig`的如下：

```
 <configuration>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="NetTcpBinding_ITestService">
          <binaryMessageEncoding />
          <tcpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="net.tcp://ServerName:4502/TestService.svc/netTcp"
        binding="customBinding" bindingConfiguration="NetTcpBinding_ITestService"
        contract="TestServer.ITestService" name="NetTcpBinding_ITestService"/>
    </client>
  </system.serviceModel>
</configuration> 
```

我的 Web.config 如下：

```
 <netTcpBinding>
      <binding name="netTcpBindingConfig">
        <security mode="None" />
      </binding>
    </netTcpBinding>

  </bindings>
  <services>
    <service name="TestService">
      <endpoint address="netTcp" binding="netTcpBinding" bindingConfiguration="netTcpBindingConfig" contract="ITestService" />
      <endpoint address="mex" binding="mexHttpsBinding" name="mex" contract="IMetadataExchange" />
      <host>
      <baseAddresses>
        <add baseAddress="net.tcp://ServerName:4502/TestService.svc" />
        <add baseAddress="https://ServerName/TestService.svc" />
      </baseAddresses>
      </host>
    </service>
  </services> 
```

在我的服务器的根目录下，我有一个名为`clientaccesspolicy.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
          <domain uri="http://*"/>
          <domain uri="https://*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true" />
        <socket-resource port="4502-4530" protocol="tcp" />
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

nettcp 通信不需要安全，但应用程序中的其他服务需要安全。是否可以在 HTTPS 托管应用程序中运行 nettcp？

# ruby-on-rails - 为什么 Rails 资产没有在模型之间隔离？

> ID：11124788
> 
> 赞同：1
> 
> 时间：2012-06-20T17:18:40.007
> 
> 标签：ruby-on-rails, asset-pipeline

我有一个模型的咖啡脚本文件，`entree`它只是在另一个咖啡脚本文件中实例化一个类：

```
jQuery(document).ready ->
  ch = new CepageHandling
  ch.handleKeyPress() 
```

该`handlePress`函数捕获`keyup`控件上的事件。

我有另一个模型`vin`，我想启用相同的功能。我很惊讶我不需要做任何事情（它已经有相同的 html），它已经在工作了，即使`vin`模型的咖啡脚本完全是空的。我假设`entree`即使我不在此页面上，创建的 javascript 也会被调用。

我已经看到`scss`文件的相同行为，如果描述符匹配，为一个模型定义的样式将应用于其他模型。有人可以解释（或指向一些文章）如果这是资产未隔离在轨道中的正常行为吗？我真的很难理解它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:23:31.747

默认清单文件（`application.js`等）`require_tree .`将加载所有页面上的所有文件，在生产中将它们全部连接在一起等。如果您希望隔离事物，您需要在`ready`处理程序中进行测试以跳过此代码在某些情况下，或者您将需要更多清单（`application.js`例如不使用）来存储每页的代码。[我建议你仔细阅读资产管道 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)的每一个字……必读！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:23:46.007

这是因为清单文件**application.js**发生的，更准确地说是在这行代码中：

```
//= require_tree . 
```

这意味着**/assets/javascripts/**文件夹中包含的所有**.js**文件都将加载到您的视图中。 由于您的**entree.js**已经加载并使用**JQuery 文档就绪功能**，它会在您的所有视图中搜索文件的规则。 这意味着包含此**ch**元素的所有页面都将获得相同的行为。

# javascript - javascript：用户滚动时动画滚动

> ID：11124790
> 
> 赞同：0
> 
> 时间：2012-06-20T17:18:47.190
> 
> 标签：javascript, jquery

我想在用户滚动时动画页面滚动到页面的不同部分。所以我写了这段代码：

```
var $window = $(window);    
var sectionHeight = $window.height();
var animating = false;
var dir;
// initialize page position (0)
var pagePos = $(window).scrollTop();

$(window).scroll(function() {
    // current page position    
    var st = $(this).scrollTop();

    // whether to animate up or down        
    dir = ((st > pagePos) ? '+=' : '-=');

    // animate 
    if (animating == false) {
        animating = true;
        $('html, body').stop().animate({scrollTop: dir+sectionHeight},500, function() {

            pagePos = $(window).scrollTop();    
            animating = false;
        }); 
    }
}); 
```

问题是，在我的初始动画关闭后，我得到了一个链接动画，它将页面动画返回到顶部。我不知道为什么，因为除非“动画”设置为假，否则它不应该动画。只有在动画完成时它才会被设置回 false ......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:34:22.493

一个潜在的解决方法，虽然我确信有人可以提出更好的解决方案，但在它滚动后禁用它一段时间。

相关代码：

```
var ct = new Date().getTime();

if (animating == false && new Date().getTime() > ct + 10) 
```

这只会在至少 11 毫秒过去后才允许动画发生。似乎适用于低至 2 的值。您并没有真正注意到滚动有任何滞后，但我也不认为这是一个理想的解决方案。

[演示](http://jsfiddle.net/twMSG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:29:27.540

我能够让它工作，我仍然不知道为什么它在编码时不起作用，但这是对我有用的解决方案 - 我受到@sachleen 回答的启发。谢谢萨克林。

我将滚动动画移动到一个单独的函数中，然后在对动画函数的回调中，我使用了一个与动画具有相同持续时间的 setTimeout 来调用另一个函数，该函数只是将“动画”布尔值更改回 false。

# delphi - 如何在 Delphi 中使用 dbExpress 将参数传递给查询

> ID：11124791
> 
> 赞同：4
> 
> 时间：2012-06-20T17:18:47.397
> 
> 标签：delphi, delphi-xe2, dbexpress, firebird2.5

我想使用 dbExpress TSQLQuery 组件。但我不知道如何编写 SQL 来添加参数。我会举一个例子，也许它会更清楚我的问题是什么。

在 TADOQuery 中，以下工作：

```
SELECT*
FROM sometable
WHERE sometable.id = :value; 
```

现在在上面的示例中，您在参数名称前使用冒号 (:) 将参数传递给查询。但是当我尝试使用 TSQLQuery 执行此操作时，出现以下错误：

```
dbExpress driver does not support the TDBXTypes.UNKNOWN data type. Vendor Error Message. 
```

现在，如果这不是您在 TSQLQuery 组件中传递参数的方式，有人可以帮助我。这对我来说是新的领域。

我使用的是 Firebird 数据库，我使用的是 Delphi XE2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T20:32:27.353

要设置参数的属性，您必须使用该[`Params`](http://docwiki.embarcadero.com/Libraries/en/Data.SqlExpr.TCustomSQLDataSet.Params)属性。从这里您可以使用索引或名称访问每个参数，设置参数的值使用[属性](http://docwiki.embarcadero.com/Libraries/en/Data.DB.TParam_Properties) [AsString](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TParam.AsString)、[AsInteger](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TParam.AsInteger)等之一，取决于字段的类型。

检查这个样本

```
var
  LSQLQuery : TSQLQuery;
begin
  LSQLQuery:=TSQLQuery.Create(nil);
  try
    LSQLQuery.SQLConnection:=SQLConnection1;
    LSQLQuery.CommandText:='Select FIRST_NAME from EMPLOYEE Where EMP_NO=:Param1';
    LSQLQuery.Params.ParamByName('Param1').AsInteger:=2;//or using the index of the parameter LSQLQuery.Params[0].AsInteger:=2; 
    LSQLQuery.Open;//Execute the query
    ShowMessage(LSQLQuery.FieldByName('FIRST_NAME').AsString); //get the data
    LSQLQuery.Close;
  finally
    LSQLQuery.Free;
  end;
end; 
```

# java - 使用 com.jgraph.layout 格式化 JGraph 图形 - 刷新显示

> ID：11124793
> 
> 赞同：1
> 
> 时间：2012-06-20T17:18:56.930
> 
> 标签：java, swing, awt, graph-visualization, jgrapht

我正在用 Java 编写我的第一个实际执行 UI 的程序，所以如果这个问题的答案很明显，请多多包涵。

我正在使用 JGraph 5 (5.14) 来可视化由 JGrapht (0.8.3) 创建的图形。

我可以很好地使用 JGrapht 创建图形，并且我相信它可以使用 org.jgrapht.ext.JGraphModelAdapter 转换为 JGraph OK。问题是，当结果显示在窗口中时（我在 JApplet 中使用面板），所有顶点都显示在另一个顶点之上。

其他人遇到了这个问题（[JGraph Layout Does Not Work](https://stackoverflow.com/questions/8496114/jgraph-layout-does-not-work)），我尝试了那里提供的解决方案，但只显示了两个节点。基本上，我只希望以某种方式显示图表，其中节点彼此分开。

有些代码值一千字，所以这是我目前拥有的，它只显示两个节点（图中有 219 个）：

```
class ourGraphVisualizer extends JApplet
{

private static final Color DEFAULT_BG_COLOR = Color.decode("#FAFBFF");
private static final Dimension DEFAULT_SIZE = new Dimension(1280, 1024);

// this init overrides the JApplet.init().  Our class here extends JApplet so we can do the visualization
public void init(ListenableDirectedWeightedGraph<String, DefaultWeightedEdge> theGraph)
{
    JGraphModelAdapter<String, DefaultWeightedEdge> jgAdapter;

    JPanel panel = new JPanel();
    panel.setPreferredSize(DEFAULT_SIZE);

    JScrollPane scrollpane = new JScrollPane(panel);
    scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    this.getContentPane().add(scrollpane, BorderLayout.CENTER);

    JFrame frame = new JFrame();

    frame.add(this);
    frame.setTitle("Call Graph, " + theGraph.vertexSet().size() + "nodes");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setPreferredSize(DEFAULT_SIZE);

    jgAdapter = new JGraphModelAdapter<String, DefaultWeightedEdge>(theGraph);

    JGraph jgraph = new JGraph(jgAdapter);

    panel.add(jgraph);
    resize(DEFAULT_SIZE);

    // Let's see if we can lay it out
    JGraphFacade jgf = new JGraphFacade(jgraph);
    JGraphFastOrganicLayout layoutifier = new JGraphFastOrganicLayout();
    layoutifier.run(jgf);
    System.out.println("Layout complete");

    final Map nestedMap = jgf.createNestedMap(true, true);
    jgraph.getGraphLayoutCache().edit(nestedMap);

    jgraph.getGraphLayoutCache().update();
    jgraph.refresh();

    frame.setVisible(true);
    panel.setVisible(true);
    scrollpane.setVisible(true);
} 
```

任何建设性的建议/帮助/灵感将不胜感激！

谢谢...

-埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:00:11.273

如果您想避免顶点重叠，请尝试不同的图形布局，我在这里给出了一些用于分层布局并调用此的运行方法

```
final  JGraphHierarchicalLayout hir = new JGraphHierarchicalLayout();
final JGraphFacade graphFacade = new JGraphFacade(jgraph);      
hir.run(graphFacade);
        final Map nestedMap = graphFacade.createNestedMap(true, true);
        jgraph.getGraphLayoutCache().edit(nestedMap); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T12:37:53.650

使用适当的布局管理器创建两个 JPanel 并将您的图形分别添加到 JPanel 和 JFrame 到 JFrame 将是一个更好的主意

# iphone - UITableViewCell 分组框架超出单元格

> ID：11124796
> 
> 赞同：0
> 
> 时间：2012-06-20T17:19:02.930
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在创建一个自定义单元设置。我的问题是当我向单元格添加子视图并使其与单元格右侧对齐时，它超出了单元格的右边缘。显然，框架超出了单元格的可见边缘并进入了背景。

我需要右边缘是单元格的内部。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:23:27.010

我必须手动完成，只检测设备是否是 ipad 并更改框架。

# c# - C#如何快速处理大量数据

> ID：11124797
> 
> 赞同：5
> 
> 时间：2012-06-20T17:19:05.193
> 
> 标签：c#

我试图找到一些关于我的问题的文章，但没有找到任何相关的或对我的应用程序有意义的东西。这是我的问题：

我有两个（> 20,000）项列表。

我需要检查每个列表中的每个项目与相反列表中的每个项目。

像这样的实现：

```
 foreach(var item1 in List1)
    {
         foreach(var item2 in List2)
         {
              // Check item 1 against item 2\. 
              // Check item 2 against item 1.
         }
    } 
```

由于为检查所做的工作，非常缓慢且无法使用。

有没有更有效的方法来处理这些需要像这样检查的大型项目列表？

如果我可以提供更多信息，请告诉我。感谢您的任何帮助/建议。

我正在使用 C# .NET 3.5

编辑：让我试着简要解释一下检查。

item1 和 item2 是路径系统的一部分。item1 和 item2 由 N 个其他项目连接。我正在检查 item1 是否连接（有效路径）到 item2，并且 item2 是否连接到 item1。不能假设如果 item1 -> item2，而不是 item2 -> item1。所以这两项检查都是必要的。

数据库包含是否以及如何 item1 -> item2 和 if/how item2 -> item1。在检查内部，有一个对服务的命名管道调用来进行检查。该服务会执行所有路径检查，并在 item1 -> item2 等情况下返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:22:58.113

那是一张`O(N * M)`支票。

如果您只是比较某个键或其他键的相等性，那么假设合理的哈希码和良好的键分布，您可以摆脱 O(N + M) 次迭代。在 .NET 中执行此操作的最简单方法是使用 LINQ 连接：

```
var pairs = from x in List1
            join y in List2 on x.Key1 equals y.Key2
            select new { x, y}; // Or whatever

foreach (var pair in pairs)
{
    // Process each match
} 
```

当然，如果您*不*检查是否相等，这将无济于事……但是如果没有更多上下文，几乎不可能提供任何具体帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:21:39.100

长循环 + 数据库查询 = 糟糕的性能。

您应该尝试做的是首先运行一些查询，获取您需要的数据，然后针对该数据进行 N x M 检查。

当然，这不一定是可能的。真的取决于你正在做的检查类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:22:42.500

尽量避免每次迭代都向数据库发出请求的情况。尽可能尝试在循环外进行一次查询，或者在循环外获取所需的数据，然后对这些数据进行检查。

一切都取决于检查操作。所以描述他们。但无论如何，如果您的迭代是独立的，您也可以使用 PLINQ 和 Task Parallel Libary 并行化您的循环

[数据并行（任务并行库）](http://msdn.microsoft.com/en-us/library/dd537608.aspx)

[如何：编写一个简单的 Parallel.ForEach 循环](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T21:26:18.053

我建议将每个表的两边都转换为哈希表 (O(n)) 并扫描每个列表并在另一个表中进行 O(1) 查找以检查它是否包含当前项目 (o(n) 整体）。这导致总体上为 O(n)。

我用 ~1,000,000 的列表做了类似的事情，它通常在我记得的 ~1 秒范围内完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T17:24:51.080

Lambda 表达式和 Linq

我会节省时间并远离循环。我确信您想要实现的任何目标都可以通过 LINQ 查询来完成。

例如，在另一个集合中查找值或在另一个集合中查找项目集合。

这是一个示例，如何按 ID 获取包含在另一个集合中的项目集合，例如按名称排序：

```
var result = from x in List1
         where (from c in List2
                select c.Id).Contains(x.Id)
                select x).OrderByDescending(x => x.Name); 
```

# fortran - 如何在由 MPI 并行化的 fortran 中调用子例程？

> ID：11124809
> 
> 赞同：0
> 
> 时间：2012-06-20T17:20:05.357
> 
> 标签：fortran, call, mpi, subroutine

我的问题是我在 Fortran 中使用 mpi 方案时不知道如何调用子例程。我编写了这个名为 TRY.f90 的小代码，其中有一个名为 CONCENTRATION.f90 的子例程。我应该如何更改 CONTENTRATION.f90 以使代码正常工作？

```
PROGRAM TRY
USE MPI

integer status(mpi_status_size)
INTEGER                 I, J, K, II, IERR, MY_ID, NUM_PROCS, PSP
INTEGER , PARAMETER             :: GRIDX =64, GRIDY=64 
REAL    , DIMENSION(gridx,gridy)    :: PSI
PSI=0
PRINT*, 'VARIABLE'

CALL MPI_INIT(IERR)
CALL MPI_COMM_RANK(MPI_COMM_WORLD,MY_ID,IERR)
CALL MPI_COMM_SIZE(MPI_COMM_WORLD,NUM_PROCS,IERR)

CALL CONCENTRATION(GRIDX, GRIDY, NUM_PROCS, MY_ID , PSI)

IF (MY_ID .NE. 0) THEN
    CALL mpi_send( PSI(1+MY_ID*GRIDX/NUM_PROCS:(MY_ID+1)*GRIDX/NUM_PROCS:1,1:GRIDY:1),&
    (GRIDX/NUM_PROCS)*GRIDY,mpi_real, 0,10,mpi_comm_world,ierr)
END IF
IF (MY_ID .EQ. 0) THEN
    DO II=1,NUM_PROCS-1
        CALL mpi_recv(PSI(1+II*GRIDX/NUM_PROCS:(II+1)*GRIDX/NUM_PROCS:1,1:GRIDY:1),&
        (GRIDX/NUM_PROCS)*GRIDY,mpi_real, &
        II,10,mpi_comm_world,status,ierr)
    END DO
 END IF

 CALL MPI_FINALIZE(IERR)
 END PROGRAM TRY 
```

我正在使用一个名为 CONCENTRATION.f90 的子程序，它是：

```
SUBROUTINE CONCENTRATION(GRIDX, GRIDY, NUM_PROCS, MY_ID , PSI)
implicit none

INTEGER*8, INTENT(IN)               :: GRIDX, GRIDY
INTEGER  , INTENT(IN)               :: NUM_PROCS, MY_ID
REAL*8   , DIMENSION(GRIDX,GRIDY), INTENT(OUT)  :: PSI
INTEGER*8                          I, J

DO I=1+MY_ID*GRIDX/NUM_PROCS, (MY_ID+1)*GRIDX/NUM_PROCS
    DO J=1,GRIDY
        PSI(I,J)=2.0
    END DO
END DO

END SUBROUTINE CONCENTRATION 
```

该代码目前给了我错误，因为我认为我应该对子例程 CONCENTRATION.f90 进行一些更改。或者我也应该改变调用子程序的方式。

你能告诉我这些变化是什么吗？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:23:00.190

由于类型不匹配，您的程序出现段错误。在主程序中，您已声明`PSI`为一个数组`REAL`：

```
REAL    , DIMENSION(gridx,gridy)    :: PSI 
```

而在`CONCENTRATION`子例程中，您使用另一种类型`REAL*8`：

```
REAL*8   , DIMENSION(GRIDX,GRIDY), INTENT(OUT)  :: PSI 
```

默认情况下`REAL`是 4 个字节长，而`REAL*8`(or `DOUBLE PRECISION`or `REAL(KIND=8)`) 是 8 个字节长。因此，您提供`CONCENTRATION`的数组比它认为的要小 2 倍，并且从`NUM_PROCS/2`后面的所有等级都写入到`PSI`数组的末尾，从而导致段错误。如果您仅使用一个进程运行，那么即使排名 0 也会出现段错误。

您还应该阅读有关 MPI 集合操作的信息。`MPI_GATHER`并`MPI_GATHERV`在此处执行您想要实现的多次发送和接收。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T17:24:22.180

唯一的变化是声明`concentration`为`reentrant`. 这可能是 Fortran 90 的默认设置。（我的大部分经验是 F77，`reentrant`并不是默认设置。）

# python - 为什么我的应用引擎任务会阻止页面刷新？

> ID：11124813
> 
> 赞同：0
> 
> 时间：2012-06-20T17:20:12.280
> 
> 标签：python, google-app-engine, asynchronous, transactions

我正在学习 App Engine 任务队列。我的应用程序具有处理文档的任务。每个任务大约需要 5-10 分钟才能完成。我的目标是通过网页监控每项任务的进度。

作为测试，我用一个简单的循环调整了[推送队列教程代码（见下文）。](https://developers.google.com/appengine/docs/python/taskqueue/overview-push)当提交“分析器页面”表单时，将启动一个新的“事务循环”任务。

我很惊讶异步“事务循环”阻止了“分析器页面”的刷新，直到任务完成。

我有两个问题：

1.  为什么异步任务会停止页面刷新？

    我对任务背后的实现的幼稚看法是，每个任务都是一个计划线程或进程，并且“事务循环”线程会在数据存储 io 期间阻塞，让“分析器页面”线程刷新。（这是出于兴趣，因为我们的最终代码将与此测试有很大不同）

2.  使用数据存储/内存缓存来记录任务进度似乎相当重，尤其是在写入配额方面——有没有更好的方法来做到这一点？

谢谢，

布赖恩

* * *

在开发服务器 1.6 上测试：

```
from google.appengine.api import taskqueue
from google.appengine.ext import db
from google.appengine.ext import webapp

class Counter(db.Model):
     count = db.IntegerProperty(indexed=False)

class Analyser(webapp.RequestHandler):
    # Analyser Page  -- Page refresh (get) only completes after task is called
    def get(self):

        self.response.write("<html> <body>")

        # My first  guess was that calling counter.put() blocked the Counter.all() 
        # call to the datastore. 
        # However commenting the following code had the same effect.

        # self.response.write("Counters:<br>")
        # counters = Counter.all()
        # for counter in counters:
        #   self.response.write(str(counter.count) + "<br>")

        self.response.write("<form action=\"/api/analyse\" method=\"post\"> \
                            Key: <input type=\"text\" name=\"key\" /><br /> \
                            <input type=\"submit\" value=\"Submit\" />  \
                        </form>")

        self.response.write("</body> </html>")

def post(self):
    key = self.request.get('key')
    # Add the task to the default queue.
    taskqueue.add(url='/analyse_worker', params={'key': key})
    self.response.write("Added task with key:" + key)

class AnalyserWorker(webapp.RequestHandler):
    def post(self): # should run at most 1/s
        key = self.request.get('key')

    def txn():
        counter = Counter.get_by_key_name(key)
        if counter is None:
            counter = Counter(key_name=key, count=1)
        else:
            counter.count += 1
        counter.put()

    # Transaction loop
    for i in range(0,200):
        db.run_in_transaction(txn) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:46:52.330

开发应用程序服务器是单线程的，这就是为什么您的刷新页面在任务完成之前被阻止的原因。

# ruby-on-rails - Rails 3，Pandastream API - 视频未显示在应用程序中

> ID：11124818
> 
> 赞同：0
> 
> 时间：2012-06-20T17:20:37.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pandastream

我一直在按照本指南在我的 Rails 3 应用程序中使用 Pandastream API：http: [//www.pandastream.com/docs/integrate_with_rails](http://www.pandastream.com/docs/integrate_with_rails)

我已经到了可以从我的应用程序成功上传视频（我可以在我的 pandastream 帐户的仪表板上看到它）的地步，但是当我去我的 show.html.erb 页面查看上传的视频时，所有我看到的是一个 HTML 5 播放器，它只是说“正在加载”，这段代码：

```
#<Panda::Video id: "b1dc1f37094330867e68fa73e7c23c14", created_at: "2012/06/20 17:09:05 +0000", updated_at: "2012/06/20 17:09:07 +0000", original_filename: "panda.mp4", source_url: nil, duration: 14014, height: 240, width: 300, extname: ".mp4", file_size: 805301, video_bitrate: 344, audio_bitrate: 112, audio_codec: "aac", video_codec: "h264", fps: 29.97, audio_channels: 2, audio_sample_rate: 44100, status: "success", path: "b1dc1f37094330867e68fa73e7c23c14", cloud_id: "12fbe9bac70c2264d3b9a6a89511b258"> 
```

我在这里做错了什么？

**显示.html.erb**

```
<h2><%= @video.title %></h2>
<p><%= h @video.panda_video.inspect %></p>

<% if @h264_encoding.success? %>
  <video id="movie" width="<%= @h264_encoding.width %>" height="<%= @h264_encoding.height %>" preload="none" 
  poster="<%= @h264_encoding.screenshots.first %>" controls>
  <source src="<%= @h264_encoding.url %>" type="video/mp4">
  </video>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:05:58.677

当您上传视频时，它正在处理熊猫云中的编码（检查平移）。一段时间后刷新浏览器。将播放视频。

# c# - 使用正则表达式在 C# 中验证逗号分隔的电子邮件

> ID：11124820
> 
> 赞同：1
> 
> 时间：2012-06-20T17:20:52.220
> 
> 标签：c#, asp.net, regex

我正在尝试在 c# 中验证一串逗号分隔的电子邮件

到目前为止，这已经奏效：

```
^[\W]*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,4}[\W]*,{1}[\W]*)*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,4})[\W]*$ 
```

但是如果电子邮件由多个逗号分隔，我需要它来不允许电子邮件。例如：

```
test@test.com,,test@test.com 
```

会发回一封无效的电子邮件，并让用户知道重新输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:24:35.363

我建议在执行正则表达式之前拆分字符串。您可以检查空字符串以查看它们是否有两个连续的逗号。

然后你只剩下电子邮件地址正则表达式的正常问题，如你所见：

[https://stackoverflow.com/search?q=Email+address+validation](https://stackoverflow.com/search?q=Email+address+validation)

已经被问到了数十亿次，但实际上并没有一个好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:48:28.910

我使用的语言是 VB.NET，但方法保持不变：

```
Imports System.Net.Mail

Module Module1

    Friend Function IsValidEmailAddress(a As String) As Boolean
        Dim isValid As Boolean = False
        Try
            Dim e = New MailAddress(a)
            isValid = True
        Catch ex As FormatException
            isValid = False
        End Try

        Return isValid

    End Function

    Sub Main()
        Dim addressesToCheck = "test@test.com,,test@test.com,notanemailaddress"
        Dim addresses = addressesToCheck.Split(",".ToCharArray, StringSplitOptions.RemoveEmptyEntries)
        For Each a In addresses
            Console.WriteLine(String.Format("{0} valid: {1}", a, IsValidEmailAddress(a)))
        Next

        Console.ReadLine()

    End Sub

End Module 
```

输出：

```
test@test.com valid: True
test@test.com valid: True
notanemailaddress valid: False 
```

# ruby-on-rails-3 - Rails 标记日志记录

> ID：11124821
> 
> 赞同：2
> 
> 时间：2012-06-20T17:21:07.150
> 
> 标签：ruby-on-rails-3, logging

我正在使用带有 Unicorn 的 Tagged Logging 并在我的环境文件中使用以下配置。

```
config.logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))
config.log_tags = [:uuid] 
```

到目前为止，一切都很好。

当涉及到标签时，有没有办法 -

1.  打印出特定的请求标头

2.  打印自定义 UUID，即我可以生成的东西。rails 吐出的默认 UUID 太长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:43:20.833

在此处查看此 Gist 中的一些示例[https://gist.github.com/2513183](https://gist.github.com/2513183)

您可以将 proc 添加到 log_tags 数组中，该数组可以访问请求对象。

您可以在该过程中生成一个 UUID，或者您可以通过 request.env 从您的 ApplicationController 在 before_filter 中传递一些东西，如下所示：

```
#application_controller.rb
before_filter :set_some_request_env

def set_some_request_env
  request.env['some_var'] = "Happy"
end

# application.rb
config.log_tags = [
  -> request {
    request.env['some_var']
  }
] 
```

# 更新

您可以使用该`#tagged`方法将标签添加到给定块内发送的所有日志消息。

要从您的请求或控制器参数中获取一个参数到标记的输出中，您可以执行以下操作：

```
#application_controller.rb
around_filter :add_tags_to_logs

def add_tags_to_logs
  Rails.logger.tagged(custom_uuid_for_current_user) do
    yield
  end
end 
```

# ios - 将项目转换为 ARC 后 xCode 抱怨

> ID：11124825
> 
> 赞同：1
> 
> 时间：2012-06-20T17:21:32.917
> 
> 标签：ios, warnings, automatic-ref-counting

将项目转换为 ARC 后，转换操作`assign, retain`从 @properties 减速中删除了所有 - ，并且只剩`nonatomic`下了。

```
@property (nonatomic) AVCaptureVideoPreviewLayer *captureVideoPreviewLayer;
@property (nonatomic) IBOutlet UIBarButtonItem *cameraToggleButton; 
```

即使是“他做到了”，xCode 也会对项目中的所有声明发出警告：

![xcode 警告](../Images/f61f24cf1917ba455f8db907f5841d96.png)

问题是什么？我该怎么办？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:25:47.630

即使 XCode 做到了，转换也并不顺利，只是没能做到。你需要做的基本上是让那些被声明为assign的属性被声明为weak，而那些被声明为retain的属性现在被声明为strong。

然而，情况并非总是如此，这就是为什么您应该在继续之前查看此[过渡到 ARC 发行说明的原因。](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

希望有帮助。

# jquery - 有什么方法可以知道链接是否被共享（发送）？

> ID：11124833
> 
> 赞同：0
> 
> 时间：2012-06-20T17:21:56.587
> 
> 标签：jquery, facebook, facebook-like

除了“赞”按钮之外，还有一个“发送”按钮，其功能类似于已弃用的“分享”按钮。我想知道是否有一种编程方式可以知道特定用户是否成功共享了链接。

我正在考虑在我的网站上向那些在 facebook 上分享链接的人提供奖励，但为了做到这一点。我需要能够跟踪哪个用户共享了链接。

我可能的解决方案是为每个用户共享一个唯一的 URL，然后跟踪引用者，但我不知道该方法有多可靠，或者它有多可滥用，我认为如果 facebook 提供某种回调函数会更容易，所以我可以跟踪哪个用户发送了链接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:30:04.370

[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

您可以订阅“message.sent”事件并在事件触发时使用 ajax 请求调用您的服务器。

FB.Event.subscribe('message.sent'', function(response) { alert('追踪某人分享了 URL：' + response); } );

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:40:24.130

> 我正在考虑在我的网站上向那些在 facebook 上分享链接的人提供奖励

这将违反[平台政策](https://developers.facebook.com/policy/)——见*第四节。应用程序集成点，#1*：

> “您不得激励用户使用 [...] Facebook 社交渠道，或暗示激励与使用我们的渠道直接相关。”</p>

# xcode - 组织从服务器获取数据的 iOS 应用程序？

> ID：11124836
> 
> 赞同：1
> 
> 时间：2012-06-20T17:22:09.343
> 
> 标签：xcode

我正在制作一个使用 http 请求来显示文档图像的应用程序。它将在带有文档选项的主页上打开，一旦您单击文档，它将从服务器读取图像（注意有 200 张图像），您可以翻阅页面。我的问题：如何创建一个应用程序来从服务器获取一堆图像，而不必创建一堆单独的 Xcode 页面？它必须能够根据您点击哪一本书来处理多本书。它应该能够处理向服务器添加文档。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:40:10.770

如果我理解您的问题，那么“在 xcode 中创建页面”是指在“界面构建器”中。如果您有很多图像，您必须以编程方式而不是使用界面构建器来加载、创建和显示它们，并注意异步加载它们以免冻结您的应用程序（您如何做的响应是在关于缓存图像的另一个问题中；）） .

# asp.net - 我可以在不触发 pageload 事件的情况下触发按钮单击事件吗？

> ID：11124837
> 
> 赞同：1
> 
> 时间：2012-06-20T17:22:10.067
> 
> 标签：asp.net, page-lifecycle, pageload, buttonclick

我的页面上有一个按钮，并且有几个文本框会在 page_load 事件上改变它们的上下文。当我第一次打开页面时，它将随机数据从数据库加载到具有页面加载功能的文本框，并且我动态地创建了这些文本框。我想要的是对文本框文本进行一些更改，然后单击按钮而不是将文本框的新上下文发送到数据库。但是，当我单击按钮时，PageLoad 事件会再次触发，它会重新生成文本框，并且它们的上下文自然会发生变化，因为它们是新创建的文本框。我尝试在页面加载中使用“if(!Page.isPostBack)”，但是没有创建文本框和相关对象，它们变为空。

我该如何克服这个问题？我能想到的最好的事情是找到某种方法来触发按钮单击事件而不触发 PageLoad 事件，但我不知道该怎么做。

任何帮助，将不胜感激;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:10:33.593

## 来自评论

您可以`Textbox`在每个页面加载执行上重新生成吗？并且对这些的数据分配`Textbox`应该在`!Page.IsPostback`. 您所要做的就是保持`Textbox`第`ViewState`一次页面加载和下一次重新生成的`Textbox`ID 将具有先前存储的 ID，并且您还必须将 ID 对应的数据存储在 ViewState 中。说得通？

# android - 带有静态项目/不带适配器的 Android ExpandableList

> ID：11124849
> 
> 赞同：0
> 
> 时间：2012-06-20T17:22:44.823
> 
> 标签：android, android-layout, expandablelistview

在我的应用程序中，有一个 Activity 包含很多视图（editText-fields，...）。因为屏幕太小，无法容纳所有视图。因此，我想使用一个 ExpandableList ，其中包含所有按语义分组的视图（作为布局）来列出项目。

有没有简单的方法来完成这项工作？实现适配器似乎有点复杂，因为列表应该只包含“静态”视图。

像这样的东西会很好：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  ExpandableListView lv = (ExpandableListView) findViewById(R.id.explist);
  lv.addItem(findViewById(R.id.linearlayoutitemone);
  lv.addItem(findViewById(R.id.linearlayoutitemtwo);
  EditText et = (EditText) lv.getItem(1).findViewById(R.id.etBirthdate);
  et.setText("01.01.1970");
  (....)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:12:30.323

要映射静态数据，您可以使用[SimpleExpandableListAdapter](http://developer.android.com/reference/android/widget/SimpleExpandableListAdapter.html)。API 演示有[一个如何使用它的示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T12:02:45.030

我编写了一个扩展 BaseExpandableListAdapter 的自己的适配器。在适配器中，我保留布局的实例以显示为类变量——这不是关于性能的最佳解决方案，而是一个方便的解决方案。由于只有固定数量的项目要显示，因此性能问题不会太麻烦。

# iphone - 有人使用 XMPP 在 iOS 上实现推送通知吗？

> ID：11124851
> 
> 赞同：2
> 
> 时间：2012-06-20T17:22:53.010
> 
> 标签：iphone, ios, xmpp, push, real-time

我正在寻找任何已实施 XMPP/Jabber 以成功将通知发送到 iOS 设备（iPhone/iPad）的人的参考项目或关键学习。

我正在考虑使用 XMPP 服务器（特别是[OpenFire](http://www.igniterealtime.org/projects/openfire/index.jsp)）来提供单一的跨平台移动推送系统。适用于 android 的 C2DM 有许多烦人的要求，例如拥有 Google 帐户的用户。这就是让我开始关注 XMPP 的原因。我还需要支持推送到 iOS 设备。我对 APNS 了如指掌，但是我想知道我是否可以将 XMPP 服务器用于 Android 和 iOS 平台（可能更像是 Black Berry）。

我觉得可能会出现的事情是：

1.  iOS 终止与 XMPP 服务器的任何持久连接。会自动重连吗？
2.  iOS 阻止访问某些端口或协议。这里有什么要注意的吗？
3.  其他陷阱只有通过尝试才能发现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:49:12.730

在这里您可以找到第一个问题的答案：

> 当您的应用程序进入后台时，您（客户端）关闭与 xmpp 服务器的连接。当您的应用程序回到前台时，您重新打开连接。如果您的服务器需要向您的客户端发送消息，它必须使用推送通知。当客户端收到通知*时*（这取决于用户操作）可以回到前台。

（来源：[iOS 后台和 XMPPFramework](https://stackoverflow.com/questions/10229723/ios-backgrounding-xmppframework)）

# javascript - 发布数据在 Firefox 上不起作用

> ID：11124853
> 
> 赞同：0
> 
> 时间：2012-06-20T17:22:59.363
> 
> 标签：javascript, browser

这是我的代码：

```
<body onload="ccform.submit();">
<form id="ccform" name="ccform" method="post" action="https://www.XXXX.com" runat="server">
    <input type="hidden" name="id" value="XXX" />
    .....

</form> 
```

这在 ie9 和 chrome 上都可以正常工作，但在 Firefox 中，它停在此页面而不是发布到“https://www.XXXX.com”。

然后我将代码更改为

```
<body>
<form id="ccform" name="ccform" method="post" action="https://www.XXXX.com" runat="server">
    <input type="hidden" name="id" value="XXX" />
    .....

</form>
<script type="text/javascript">
    document.body.onload = ccform.submit();
</script> 
```

它仍然适用于 ie9 和 chrome，但不适用于 Firefox。有谁知道为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:48:52.167

我同意 bfavaretto 的观点，即在页面加载时提交是很奇怪的。

如果要在文档准备好时提交，可以使用 jquery ：

加载jQuery：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

然后发布您的表格

```
<script>
$(document).ready(function(){
    var form = jQuery("#ccform");
    form.submit(); 
}
</script> 
```

# fortran - 带有数字/标签而不是另一个语句的 Fortran IF 语句

> ID：11124855
> 
> 赞同：9
> 
> 时间：2012-06-20T17:23:07.330
> 
> 标签：fortran, fortran90

这个 Fortran 代码是什么意思：

```
 IF (J1-3) 20, 20, 21
21 J1 = J1 - 3
20 IF (J2-3) 22, 22, 23
23 J2 = J2 - 3
22 CONTINUE 
```

我在旧项目中见过，我不知道这个带有数字（标签）的 IF 是什么意思。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T17:30:12.310

这是来自 FORTRAN 77 的[算术`if`语句](http://www.fortran.com/F77_std/rjcnf0001-sh-11.html#sh-11.4)。改编自 FORTRAN 77 规范（重点是我的）：

> 算术`IF`语句的形式为：
> 
> `IF (e) s1 , s2 , s2`
> 
> *   其中：`e`是整数、实数或双精度表达式
>     
>     
> *   `s1`, `s2`, 和`s3`是与算术语句出现在同一程序单元中的可执行语句的语句标签`IF`。同一个语句标签在同一个算术语句中可能出现多次`IF`。
>     
>     
> 
> 执行算术`IF`语句会导致对表达式进行评估，`e`然后转移控制。**由、****或****标识的语句接下来执行，因为 的值分别小于零、等于零或大于零。`s1``s2``s3``e`**

对于您问题中的示例，从上面的最后一句话中，

*   如果`J1-3 < 0`将执行语句 20
*   if`J1-3 = 0`语句 20 也将被执行
*   如果`J1-3 > 0`将执行语句 21

**编辑**：一种现代且更具可读性的编写方式是：

```
if (J1-3 > 0) J1 = J1 - 3
if (J2-3 > 0) J2 = J2 - 3 
```

# caching - 使用 Guava 进行高性能线程安全缓存

> ID：11124856
> 
> 赞同：20
> 
> 时间：2012-06-20T17:23:08.050
> 
> 标签：caching, guava

我正在尝试实现高性能线程安全缓存。这是我实现的代码。我不想要任何按需计算。我可以使用 cache.asMap() 并安全地检索值吗？即使缓存设置为有softValues？

```
 import java.io.IOException;
  import java.util.concurrent.ConcurrentMap;
  import java.util.concurrent.ExecutionException;
  import java.util.concurrent.TimeUnit;
  import java.util.concurrent.TimeoutException;

  import com.google.common.cache.Cache;
  import com.google.common.cache.CacheBuilder;

  public class MemoryCache {

    private static MemoryCache instance;
    private Cache<String, Object> cache;

    private MemoryCache(int concurrencyLevel, int expiration, int size) throws IOException {

        cache = CacheBuilder.newBuilder().concurrencyLevel(concurrencyLevel).maximumSize(size).softValues()
            .expireAfterWrite(expiration, TimeUnit.SECONDS).build();
    }

    static public synchronized MemoryCache getInstance() throws IOException {
        if (instance == null) {
               instance = new MemoryCache(10000, 3600,1000000);
        }
        return instance;
    }

    public Object get(String key) {
        ConcurrentMap<String,Object> map =cache.asMap();
        return map.get(key);
    }

    public void put(String key, Object obj) {
        cache.put(key, obj);
    }
   } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-20T17:59:08.567

番石榴贡献者在这里：

是的，这看起来很好，尽管我不确定将缓存包装在另一个对象中的意义何在。（另外，`Cache.getIfPresent(key)`完全等价于`Cache.asMap().get(key)`。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T08:11:54.187

如果你想要高性能，为什么不静态实例化缓存而不是使用同步的 getInstance()？

# actionscript-3 - AS3 Vector.sort() 不带排序选项？

> ID：11124860
> 
> 赞同：6
> 
> 时间：2012-06-20T17:23:22.887
> 
> 标签：actionscript-3, sorting, flash

在 AS3 中，`Array.sort()`采用了一些不错的排序选项，例如：

*   **Array.DESCENDING** - 将数组从大到小排序
*   **Array.RETURNINDEXEDARRAY** - 返回一个索引数组，以便您可以跟踪哪个项目在哪里排序

但遗憾`Vector<T>.sort()`的是不支持这些功能，并且只需要一个`compareFunction:Function`参数，以便您可以编写自己的排序逻辑。

有没有其他方法可以快速获取向量的排序索引数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T17:44:18.390

查看文档：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#sort) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#sort ()

仍然可以使用这些选项，但您必须将它们作为第一个参数而不是比较函数传递。

```
 myVector.sort(Array.DESCENDING|Array.RETURNINDEXEDARRAY); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T09:43:30.587

`RETURNINDEXEDARRAY`在 Flash Player 10+ 中不起作用。它只是返回相同的原始`Vector<Number>`.

与数组不同，`RETURNINDEXEDARRAY`该方法忽略了选项`Vector.sort()`。返回的 Vector 对象始终是原始对象的引用。

# javascript - 在 document.form.element.value 上触发 jquery

> ID：11124866
> 
> 赞同：0
> 
> 时间：2012-06-20T17:23:36.713
> 
> 标签：javascript, jquery, drop-down-menu, triggers

我有 2 个下拉菜单（select1 和 select2）和 1 个输入文本（速率）。在 select1 中选择一个值时，它在 select2 中发生变化。当我在 select2 中选择一个值时，该值出现在输入文本中。现在我想要更改输入文本以在 select1 触发器更改 select2 时更改。但这不起作用。我尝试改变，模糊......但它没有帮助。

任何的想法？

```
$('#select1').change( function() { 
    $.post("includes/functions.php", {select1: ""+$(this).val()+""},
      function(data){
        var objet = JSON.parse(data);       
        ...
        $("#select2").val(objet.select2value); //That works!
      }
} 
```

进而：

```
$('#select2').bind('keyup blur change focus click', function(){
  $.post("includes/functions.php", {
    rate: ""+$(this).val()+"" }, function(data){
       var objet = JSON.parse(data);
       /* That works when I change select2 directly in the drop-down;
          not when select2 changed by changing select1 */
       document.form.rate.value = objet.rate;  
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:45:31.770

如何在第二个处理程序之外重构逻辑，并在两个事件上调用它：

```
$('#select1').change( function() { 
    $.post("includes/functions.php", {select1: ""+$(this).val()+""},
      function(data){
        var objet = JSON.parse(data);       
        ...
        $("#select2").val(objet.select2value);
        updateRate();
      }
}

$('#select2').change( function(){
  updateRate();
});

function updateRate() {
    $.post("includes/functions.php", {
        rate: ""+ $('#select2').val() +"" }, function(data){
           var objet = JSON.parse(data);
           document.form.rate.value = objet.rate;  
      });
} 
```

# jpa - Eager fetching 在 Onetomany 中工作而不在 Manytoone 中工作

> ID：11124873
> 
> 赞同：1
> 
> 时间：2012-06-20T17:23:49.857
> 
> 标签：jpa, groovy, one-to-many

这就像 groovy 和 Java 的混合。作为学习的一部分，我创建了代码。

```
===================================================================

@Entity
public class GroovyBoy implements SimpleEntity {

@Id
@GeneratedValue
private long Id;
private String name;

@OneToMany(fetch=FetchType.EAGER,cascade=CascadeType.ALL)
private List<GroovyBro> brothers;

@Override
public Long getId() {
return Id;
}

@Override
public void setId(Long id) {
Id = id;
}
}

===================================================================

@Entity
class GroovyBro implements SimpleEntity {

    @Id
    @GeneratedValue
    private long Id;

    private String name;

    @ManyToOne(fetch=FetchType.EAGER)
    private GroovyBoy brother;

    @Override
    public Long getId() {
        return Id;
    }

    @Override
    public void setId(Long id) {
        Id = id
    }
}

===================================================================
        def dao = (MyDaoImpl) appContext.getBean("dao")

        def boy = new GroovyBoy()
        boy.name='boy1'

        def bro1 = new GroovyBro()
        bro1.name='bro1'

        def bro2 = new GroovyBro()
        bro2.name='bro2'

        boy.brothers = [bro1, bro2]

        dao.save(boy)

        //dao.evict(boy)

        println 'Id: ' + boy.brothers[0].id

        def loadBro = new GroovyBro();
        loadBro.id = boy.brothers[0].id

        GroovyBro bro = (GroovyBro) dao.get(loadBro)

        println 'Bro: ' + bro.brother

=================================================================== 
```

最后一行返回 null。但是当我获取 GroovyBoy 实体时，它会加载持久包，然后加载 GroovyBro 实例。为什么没有加载 GroovyBoy 实例？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:42:41.040

不完全确定您的代码做了什么，但请确保您设置了双向关系的双方。

如果在创建对象时只设置了一侧，那么另一侧仍然为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:05:28.873

您没有设置关系的*拥有*方。关系的拥有方对应于表/类，其外键引用另一方，即@ManyToOne 方。设置非拥有方并不重要，这就是您在这里所做的：

```
boy.brothers = [bro1, bro2]

dao.save(boy) 
```

当您调用 时`dao.save(boy)`，您的 JPA 提供程序将在您的实例上持久化所有映射字段`GroovyBoy`，然后将持久化操作级联到`GroovyBro`其集合中的每个实例。您尚未`brother`在任何一个实例上设置属性`GroovyBro`，因此外键设置为空。因此，当您`GroovyBro`在此处加载实例时：

```
GroovyBro bro = (GroovyBro) dao.get(loadBro) 
```

`brother`它正确地对该属性有一个空引用。要修复，请添加：

```
bro1.brother = boy
bro2.brother = boy 
```

在你打电话之前`dao.save(boy)`。

您可以离开`boy.brothers = [bro1, bro2]`，但 JPA 不会查看集合的内容来设置外键关系。

# javascript - 按字母顺序对项目进行排序

> ID：11124874
> 
> 赞同：1
> 
> 时间：2012-06-20T17:23:51.593
> 
> 标签：javascript, jquery, javascript-events

我重新发布这个问题是因为我第一次发布它时犯了一个错误：我在提问之前没有足够努力。我想向社区道歉，要求它为我做我的工作

我正在尝试按字母顺序对 div 内的无序列表进行排序。不是列表项在无序列表中，而是无序列表本身。

这是 HTML 的样子：

```
<div class="FindByCategory">
    <ul>
         <li> B. This is the first list item in the second unordered list</li>
         <li> B. This is the second list item in the second unordered list</li>
    </ul>
    <ul>
         <li> A. This is the first list item in the first unordered list</li>
         <li> A. This is the second list item in the first unordered list</li>
    </ul>
</div> 
```

我希望它看起来像这样：

```
<div class="FindByCategory">
    <ul>
         <li> A. This is the first list item in the first unordered list</li>
         <li> A. This is the second list item in the first unordered list</li>
    </ul>
    <ul>
         <li> B. This is the first list item in the second unordered list</li>
         <li> B. This is the second list item in the second unordered list</li>
    </ul>
</div> 
```

这是我到目前为止所做的：

```
 <script>
        function sortUnorderedList(div.FindByCategory, sortDescending) {
  if(typeof div.FindByCategory == "string")
    div = document.getElementById(div.FindByCategory);
  var uls = ul.getElementsByTagName("UL");
  var vals = [];
  for(var i = 0, l = uls.length; i < l; i++)
    vals.push(uls[i].innerHTML);
  vals.sort();
  for(var i = 0, l = uls.length; i < l; i++)
    uls[i].innerHTML = vals[i];
}
$(function(){
    FindByCategory()
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:35:21.567

对任何 DOM 节点进行排序时，只需三个简单的步骤：

1.  构建一个要排序的节点数组，并附上您正在排序的部分（如果它不是一个易于访问的属性）。
2.  对数组进行排序。
3.  根据新顺序重建 DOM 树。

在这种情况下，您要排序的节点由 匹配`#FindByCategory > ul`，并且您正在按其文本内容进行有效排序。所以：

```
var qsa = document.querySelectorAll("#FindByCateory > ul"), l = qsa.length, i, arr = [];
for( i=0; i<l; i++) {
    arr[i] = [qsa[i],qsa[i].textContent || qsa[i].innerText];
    // the text content is not readily accessible, since it depends on the browser
}
// now sort the array:
arr.sort(function(a,b) {return a[1] < b[1] ? -1 : (a[1] == b[1] ? 0 : 1);});
// and now re-append them
for( i=0; i<l; i++) {
    arr[i][0].parentNode.appendChild(arr[i][0]);
    // by re-appending the nodes, they will emerge sorted
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:50:18.880

尝试这个

```
<script type="text/javascript">

                var array = new Array();

                for(var i = 0 ; i<4 ; i++){

                    var string = $("li:eq("+i+")").text();
                    array[i]  = string;

                }

                array.sort();

                alert(array);

            </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:26:41.797

这是 jQuery 的瑞士军刀排序插件的链接。[http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)

# javascript - SharePoint 获取当前用户帐户名？

> ID：11124879
> 
> 赞同：6
> 
> 时间：2012-06-20T17:24:01.373
> 
> 标签：javascript, ajax, sharepoint, soap, sharepoint-2010

SharePoint 2010 是否将当前用户的帐户名存储在全局可访问的 JS 对象中？

我能找到的每个解决方案都涉及 ajax Web 服务调用的一些变体，这似乎是一个非常繁重的解决方案，可以访问应该是微不足道的信息。

**我可以轻松访问的内容：**

*   获取当前用户ID`__spUserId`
*   通过抓取功能区的 html 获取当前用户名（例如`$('#zz17_Menu').text()`：）

但这些都不是帐户名。

**我宁愿不做的事情：**

*   通过对 GetUserProfileByName 的 SOAP 调用获取当前用户信息
*   通过对 ../_layouts/userdisp.aspx 进行 Ajax 调用来获取当前用户信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-30T22:29:56.120

对于任何偶然发现这一点的人，一年后我想出了如何。

到您的母版页[注册 SPSWC](http://social.msdn.microsoft.com/Forums/sharepoint/en-US/5d4277fe-40d1-449b-a79a-421fddee9bd9/show-accounts-first-name-in-sharepoint-through-masterpage)（如果您使用的是 Randy Drisgill 的[入门母](http://startermasterpages.codeplex.com/)版，它将已经存在）。

```
<%@ Register Tagprefix="SPSWC" Namespace="Microsoft.SharePoint.Portal.WebControls" Assembly="Microsoft.SharePoint.Portal, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

然后，在你想访问一个属性（例如：用户名）之前，拉入数据

```
<SPSWC:ProfilePropertyLoader runat="server"/> 
```

接下来，访问其中一个属性，我建议使用 TitleMode 将其嵌入到`<script>`元素中。

```
<script>
  var username = '<SPSWC:ProfilePropertyValue PropertyName="UserName" TitleMode="true" runat="server"/>';
</script> 
```

我们现在使用它，如这个[PasteBin 演示](http://pastebin.com/HG6pdpwe)中所示，用一些属性填充一个全局变量，如名字、姓氏、用户名、个人资料图片、状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:41:04.813

您确实需要进行 Web 服务调用才能可靠地执行此操作。值得庆幸的是，SPServices 使这样做变得快速而轻松。

[http://spservices.codeplex.com/wikipage?title=](http://spservices.codeplex.com/wikipage?title=) $%28%29.SPServices.SPGetCurrentUser

```
$().SPServices.SPGetCurrentUser({
    fieldName: "Name",
    debug: false
}); 
```

# javascript - jquery 不显眼的验证属性参考？

> ID：11124880
> 
> 赞同：65
> 
> 时间：2012-06-20T17:24:17.267
> 
> 标签：javascript, jquery

我在哪里可以找到**Unobtrusive jquery 验证属性**的参考，例如

`data-val-length`等。`data-val-required`我想要这些属性的完整列表。是

有什么地方可以找到这个吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-12T17:50:50.383

我发现的最接近的东西是在文章[Some things I've learned about jQuery unobtrusive validation](https://web.archive.org/web/20130919030425/http://denverdeveloper.wordpress.com/2012/09/26/some-things-ive-learned-about-jquery-unobtrusive-validation/)中。这篇文章有更好的格式和更多的信息，但我在这里复制了好的部分，以防它消失。

*   `data-val="true"`：在此元素上启用不显眼的验证（应该在您要验证的每个输入元素上）
*   `data-val-required="ErrMsg"`：使输入成为必需，并显示 ErrMsg
*   `data-val-length="ErrMsg"`, `data-val-length-min="5"`, `data-val-length-max="15"`: 设置所需的字符串长度和相关的错误消息。
*   `data-val-number="ErrMsg"`: 使字段必须是数字。
*   `data-val-date="ErrMsg"`: 需要一个字段作为日期（我不推荐这个，因为它接受太多 - 我更喜欢使用正则表达式）。
*   `data-val-equalto="ErrMsg"`, `data-val-equalto-other="Fld"`: 要求一个字段与另一个字段匹配（例如密码确认。fld 是一个 jQuery 选择器
*   `data-val-regex="ErrMsg"`, `data-val-regex-pattern="^regex$"`: 要求该字段与正则表达式模式匹配。
*   `data-val-email="ErrMsg"`: 需要一个字段作为电子邮件（我不推荐这个，因为它接受太多 - 我更喜欢使用正则表达式）。
*   `data-val-url="ErrMsg"`: 需要一个字段作为 url（我不推荐这个，因为它接受的太多——我更喜欢使用正则表达式）。

* * *

**更新：**

要显示验证消息，请为要验证的每个控件添加一个容器。

```
<div class="field-validation-valid" data-valmsg-for="controlName" data-valmsg-replace="true"></div> 
```

请注意，这`data-valmsg-for`是控件的**名称**，而不是 id。

# linux - 在linux中查找命令

> ID：11124882
> 
> 赞同：0
> 
> 时间：2012-06-20T17:24:27.557
> 
> 标签：linux, shell, unix, find

好的，所以我正在运行一个像这样的简单命令：

```
find / -name ssh | grep bin 
```

的输出是这样的：

```
/usr/bin/ssh 
```

现在我想让它看起来像这样，当我 cd 到它时

```
/usr/bin/ 
```

我不知道如何让它变得聪明，因为我可以强制它只为这个工作，但是当我想在另一台机器上运行相同的代码并且 ssh 的位置在别处时怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:27:41.810

你不想要这个吗？

```
cd $(dirname $(which ssh)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:28:59.287

dirname 是您要查找的内容吗？

```
$ dirname `find / -name ssh | grep bin | head -1`
/usr/bin 
```

这`head -1`部分只是为了确保只有 1 个东西被传递给 dirname，否则它将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:46:14.623

*dirname*程序是 coreutils的一部分，可用于去除路径名序列中的最后一部分：

```
dirname `find / -name ssh | grep bin` 
```

将输出

```
/usr/bin 
```

然后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:25:38.113

如果您试图找到`ssh`命令所在的位置，您有几个选择：

```
 which ssh 
```

和

```
 whereis ssh 
```

将为您提供此信息（`which`将为您提供一条路径，同时`whereis`将包含所有引用的路径`ssh`）

至于`find`命令，更改您在命令中指定的（起始）目录`find`：

```
 find /usr/bin -name ssh 
```

将在 /usr/bin 目录中开始搜索。

这是你想要做的吗？我不是 100% 确定我理解了你帖子的最后一部分。如果没有，您可以考虑改写它吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T17:28:29.340

```
find / -name ssh|grep bin|xargs dirname 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T17:30:05.813

您可以使用**xargs**获取命令的目录部分。

```
find / | filter1 | xargs -I_VAR_ dirname _VAR_ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T17:30:17.350

```
find / -name ssh | grep bin|sed "s/ssh//g" 
```

# android - android/蓝牙可以做到这一点吗？

> ID：11124887
> 
> 赞同：1
> 
> 时间：2012-06-20T17:24:40.850
> 
> 标签：android, bluetooth

所以我正在考虑为android编写一个蓝牙应用程序，我需要以下功能：

*   自动启用蓝牙
*   向运行相同应用程序的其他手机广播该应用程序已启用
*   列出安装应用程序附近的其他手机
*   在手机之间共享数据

这一切有可能吗？我对蓝牙完全陌生，我真正需要知道的是我是否可以在不强迫用户手动配对他们的设备或类似的东西的情况下做到这一切。因此，例如，我想按照以下流程做一些事情：

*   人员 A 打开应用程序，看到附近启用并运行应用程序的人员列表。
*   人员 A 在应用程序中选择人员 B，输入消息，按“发送”
*   B 收到消息

这是我希望做的一个简化的例子——蓝牙是这个的正确工具/这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:38:55.940

是的“自动启用蓝牙”。

没有“广播...”，因为您不使用蓝牙广播（在发现期间除外）。

“列出安装应用程序附近的其他手机”为否，因为安装您的应用程序不会导致其服务被列出。它必须为此运行（我希望他们会改变这一点）。

是的，用于在手机之间共享数据，是的，用于您想要做的三个项目符号摘要，但是......

“我真正需要知道的是，我是否可以在不强迫用户手动配对他们的设备或类似的东西的情况下做到这一切。”

这是一个常见的请求，并且在 2.3 中添加了对不配对蓝牙的支持（它在 2.2 中被隐藏）。不幸的是，它在 ICS 中被部分破坏，直到并包括 4.04，因此该错误将出现在所有 ICS 设备上： [http ://code.google.com/p/android/issues/detail?id=29039](http://code.google.com/p/android/issues/detail?id=29039)

我认为蓝牙有很大的潜力，但我发现在实现中有很多错误和很多可变性，所以要谨慎对待。

# jsp - Struts2 - 如何更新表单中的集合

> ID：11124892
> 
> 赞同：0
> 
> 时间：2012-06-20T17:25:02.330
> 
> 标签：jsp, struts2

我已经研究了一段时间。我已经阅读 [了如何使用 Struts2 更新 JSP 上显示的列表的内容？](https://stackoverflow.com/questions/5855732/how-to-update-a-the-contents-of-a-list-displayed-on-jsp-using-struts2) 它非常接近我的需要，但我仍然无法解决我的问题。

我有一个 java.util.Set 对象。类是“事件”，集合的名称是“事件”。我想在 JSP 中显示一个表单，允许用户修改 Event 对象的属性，但我想一次更新多个。这是我的 JSP 片段：

```
<s:form theme="simple">
  <table>
    <s:iterator value="events" var="ev">
    <tr>
      <td> <s:textfield name="?????" value="%{#ev.price}" </td>
      <td> <s:textfield name="?????" value="%{#ev.amount}" </td>
     </tr>
     </s:iterator>
     <tr><td colspan="2">
       <s:submit value="Apply" action="EditEventsAction_save" ></s:submit>
     </td></tr>
  </table>
</s:form> 
```

我的问题是（我认为）需要以 texfield 的名称来更新我的 Set。

如何指定文本字段中的数据应该更新我的 Set 的成员？

这可能吗？

*更新*

这是我最新的（简化的）尝试，主要基于我在[类型转换文档](http://struts.apache.org/2.3.4/docs/type-conversion.html#TypeConversion-Indexingacollectionbyapropertyofthatcollection)中阅读的内容。

表单已正确填充，但在提交时未捕获在文本字段中输入的更改。

动作类：

```
public class TestAction extends ActionSupport implements Preparable {

    private static HashMap<Integer, AssetId> assetMap = new HashMap<Integer, AssetId>();

    public String execute () {
        return SUCCESS;
    }   

    public void prepare() throws Exception {
        AssetId a1 = new AssetId(1, "Asset 1");
        AssetId a2 = new AssetId(2, "Asset 2");
        AssetId a3 = new AssetId(3, "Asset 3");
        assetMap.put(1, a1);
        assetMap.put(2, a2);
        assetMap.put(3, a3);
    }

    public String save () {
        return SUCCESS;
    }

    public static HashMap<Integer, AssetId> getAssetMap() {
        return assetMap;
    }

    public static void setAssetMap(HashMap<Integer, AssetId> assetMap) {
        TestAction.assetMap = assetMap;
    }
} 
```

JSP：

```
<%@ taglib uri="/struts-tags" prefix="s" %>

<html>
  <body>      
    <s:form theme="simple">
      <table>
        <s:iterator value="assetMap" var="asset">
          <tr>
            <td><s:textfield name="assetMap[key].clientId"  /></td>
          </tr>
        </s:iterator>
        <tr><td colspan="2"><s:submit value="Apply!" action="TestAction_save" /></td></tr>
      </table>
    </s:form>
  </body>
</html> 
```

`AssetId`班级：

```
public class AssetId implements java.io.Serializable {
    private int assetId;
    private String clientId;
    // And public getters/setters
} 
```

`TestAction-conversion.properties`

```
Key_assetMap=java.lang.Integer
Element_assetMap=AssetId
CreateIfNull_assetMap=false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:34:46.793

有很多问题；您应该已经在日志文件中看到了堆栈跟踪。

最重要的是：您没有检查呈现的 HTML。如果你有，你会看到`key`渲染未评估。我的错（评论不完整），尽管文档显示了 OGNL 逃逸。

```
<s:textfield name="assetMap[%{key}].clientId" /> 
```

由于您正在尝试评估`key`当前迭代对象的值，因此您必须将其包装在 OGNL 转义序列中——您*不想*评估其余部分。这呈现：

```
<input type="text" name="assetMap[1].clientId" value="foo" id="map_save_assetMap_1__clientId"/> 
```

*始终检查呈现的 HTML。*

最终静态地图将成为一个问题。它应该是一个实例属性（或者，我想是 a `ThreadLocal`，但 IMO 你很难证明这一点）。

此时您应该*不需要*类型转换文件；这在很大程度上是一个遗留工件。你也应该看到一个关于找不到`AssetId`类的异常。

如果我在提交方法中记录资产映射，一旦处理完这些事情，我就会看到：

```
{1=foo.AssetId@502c06b2, 2=foo.AssetId@7a6bb93c, 3=foo.AssetId@364e50ee} 
```

# c++ - 禁止编译器警告声明的函数从未被引用

> ID：11124895
> 
> 赞同：22
> 
> 时间：2012-06-20T17:25:27.663
> 
> 标签：c++, c, gcc, gcc-warning

所以我有一些这样的代码：

```
void foo (int, int);

void bar ( )
{
    //Do Stuff

   #if (IMPORTANT == 1)
       foo (1, 2);
   #endif

} 
```

在没有“重要”的情况下进行编译时，我得到一个编译器警告 foo 已定义且从未被引用。这让我思考（这就是问题所在）。

所以为了解决这个问题，我只是`#if (IMPORTANT == 1)`在函数定义等周围添加了相同的内容......以删除警告，然后我开始怀疑是否有不同的方法来抑制该函数上的警告。我正在查看“未使用”的 GCC 属性，但不知道函数是否具有我可以设置的相同属性？是否还有另一种方法来抑制它，只抑制该功能而不是文件的警告？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2017-01-09T15:43:11.100

在 C++17 中，您可以使用以下命令声明您的函数`[[maybe_unused]]`：

```
[[maybe_unused]] void foo (int, int); 
```

这将抑制警告，并且是在 C++17 中表达可能未使用的函数的正确惯用方式。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-20T18:43:29.853

我相当确定相关的警告选项是这个：

> **-Wunused-function**
> 声明静态函数但未定义或未使用非内联静态函数时发出警告。此警告由**-Wall 启用。**

所以警告应该只针对一个`static`有趣的功能。说得通。如果一个函数是`static`它只能在当前文件中使用，那么它的定义也必须在这个文件中。

并且声明它`static inline`可以避免警告，而无需使用丑陋的宏或编译器特定的编译指示或属性。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-20T17:34:07.757

> ...然后我开始怀疑是否有其他方法可以抑制对该功能的警告。

可能有编译器选项来抑制此警告。然而，一个技巧是这样的：

```
(void)foo; //cast it to void. 
```

它应该抑制这个警告。

你可以写一个宏：

```
#define SUPPRESS_WARNING(a) (void)a

void foo(int thisIsAlsoAnUnsedParameter, int usedParameter)
{
   SUPPRESS_WARNING(foo); //better do this inside the definition itself :D

   SUPPRESS_WARNING(thisIsAlsoAnUnsedParameter);
} 
```

如您所见，`foo`自身的定义抑制了警告。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-06-20T17:51:13.577

一种解决方案是通过函数属性。

```
void foo (int, int) __attribute__ ((unused)); 
```

这将告诉 gcc 不要为该函数发出未使用的函数警告`foo`。如果您担心可移植性，您可以定义一个宏`UNUSED_FUNCTION_ATTRIBUTE`，该宏`__attribute__ ((unused))`使用支持属性的编译器扩展，但在其他情况下扩展为什么都没有。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T17:52:47.830

封装依赖于编译器和系统的东西的一个好方法是将它分解到头文件中。然后根据编译器和系统以及可能的其他因素调整包含路径。您可以对源代码文件执行相同的操作。

在这种情况下，声明似乎不依赖于编译器或系统，因此只需添加以下公共标头：

```
// [foo.h]
#pragma once
void foo( int, int ); 
```

带实现文件

```
// [foo.cpp]
#include <foo.virtual.cpp> 
```

然后对于应该发生某些事情的构建，将包含路径添加到包含路径

```
// [foo.virtual.cpp]
#include <foo.h>
void foo( int const a, int const b )
{
    // Do the thing.
} 
```

对于不应该发生任何事情的构建，将包含的目录添加到包含路径

```
// [foo.virtual.cpp]
#include <foo.h>
void foo( int, int ) {} 
```

如果您担心空函数的调用会非常耗时，例如浪费一纳秒，那么只需将定义移至标题并添加单词`inline`.

如果`foo`也用于其他目的，请定义一个函数`bar`，为应该或不应该发生的事情调用它，并执行上述 for`bar`而不是 for `foo`。

然后，您已经删除了所有预处理器的东西。

请记住，*代码*中的预处理器指令是不好的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-30T09:01:08.817

我找到了一种在全球范围内做到这一点的方法，它也适用于`c`

```
#define SUPPRESS_UNUSED_WARN(var) \
    int _dummy_tmp_##var = ((int)(var) & 0) 
```

然后你像这样使用它：

```
static int foo(int a, int b)
{
    // ....
}
SUPRESS_UNUSED_WARN(foo); 
```

*   它可以用于函数和全局变量
*   它应该放在全球范围内才能正常工作
*   它不能用于局部变量

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-02T12:36:44.757

对于 ARM 目标平台，在使用 ARM 编译器时，在目标函数周围使用以下编译器指令来抑制“Warning[Pe177]: function declared but never referenced”警告消息：

```
#pragma diag_suppress=Pe177
void foo(void)
{
/* does something but is not being called for the current build */
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-17T04:23:44.453

```
#define SUPPRESS_UNUSED_WARN(var) \
    int _dummy_tmp_##var = ((int)(var) & 0) 
```

在 IAR 中不起作用，更改此设置将起作用：

```
#define SUPPRESS_UNUSED_WARN(var) \
     void _dummy_tmp_##var(void) { (void)(var); } 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2015-01-30T09:08:37.523

您还可以在 Visual Studio 项目设置中定义 _CRT_SECURE_NO_DEPRECATE 宏。

转到项目属性 -> 配置属性 -> C/C++ -> 预处理器 -> 预处理器定义

添加 _CRT_SECURE_NO_DEPRECATE。

就是这样。！

# r - 根据列数据生成组列

> ID：11124900
> 
> 赞同：1
> 
> 时间：2012-06-20T17:25:39.127
> 
> 标签：r, categories

我是 R 新手，我正在尝试根据列中的数据引入一个组列。

data.frame 示例

```
1           11.3178501            4    9        11.618880
2           10.3969713           20    8        11.047486
8            9.5067421           14    7        10.079806
6            6.6135932            6    6         7.002669
4            5.4157174            2    5         5.566232
17           3.8860793            5    4         4.235564
16           3.8183699           15    3         4.406416
11           1.2574765           18    2         1.885113
15           0.7084411            7    1         1.130990 
```

第一列是 R 引入的索引，但我排序所以顺序不同，我想做的是引入一个列，该列根据最后一列值定义每行所属的括号。所以如果最后一列的值介于`0-5 => 1, 5-0 => 2`等之间，那么我们在最后添加一个新列`group -> 1,2,3...`

```
16           3.8183699           15    3         4.406416    1
11           1.2574765           18    2         1.885113    2
15           0.7084411            7    1         1.130990    2 
```

我尝试了以下`dataFrame$column4 < 5`，但这给了我一个布尔值，所以我想我将它乘以 1 然后我得到以下

```
0 0 0 0 0 1 1 1 1 
```

我不确定我是否走在正确的轨道上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:51:59.120

即使给出您的评论，我仍然建议`cut`。它在基础 R 中，通常不被认为是一个花哨的函数。

```
df <- structure(list(V1 = c(1L, 2L, 8L, 6L, 4L, 17L, 16L, 11L, 15L), 
    V2 = c(11.3178501, 10.3969713, 9.5067421, 6.6135932, 5.4157174, 
    3.8860793, 3.8183699, 1.2574765, 0.7084411), V3 = c(4L, 20L, 
    14L, 6L, 2L, 5L, 15L, 18L, 7L), V4 = c(9L, 8L, 7L, 6L, 5L, 
    4L, 3L, 2L, 1L), V5 = c(11.61888, 11.047486, 10.079806, 7.002669, 
    5.566232, 4.235564, 4.406416, 1.885113, 1.13099)), .Names = c("V1", 
"V2", "V3", "V4", "V5"), class = "data.frame", row.names = c(NA, 
-9L))

df$groups <- cut(df$V5, seq(0,15, by=5))

> df
  V1         V2 V3 V4        V5  groups
1  1 11.3178501  4  9 11.618880 (10,15]
2  2 10.3969713 20  8 11.047486 (10,15]
3  8  9.5067421 14  7 10.079806 (10,15]
4  6  6.6135932  6  6  7.002669  (5,10]
5  4  5.4157174  2  5  5.566232  (5,10]
6 17  3.8860793  5  4  4.235564   (0,5]
7 16  3.8183699 15  3  4.406416   (0,5]
8 11  1.2574765 18  2  1.885113   (0,5]
9 15  0.7084411  7  1  1.130990   (0,5]
> 
```

最后，如果整数是您想要的，您可以`groups`使用`factor`.

```
df$groups <- as.integer(df$groups)

> as.integer(df$groups)
[1] 3 3 3 2 2 1 1 1 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:15:47.897

贾斯汀的回答很好；但是，如果您想自己实现较笨的切割，则可以这样做。首先，您使用阈值定义一个向量，例如`thre<-c(0,5,10,15)`，然后使用大于运算符对您的值和那些阈值进行外部比较，并对这样创建的矩阵的行求和：

```
rowSums(outer(values,thre,'>')) 
```

瞧，(0,5] 中的所有值现在都是 1，(5,10] 是 2，等等。
包装在一个函数中，它可能看起来像这样：

```
ultraDumbCut<-function(v,thre) rowSums(outer(v,thre,'>')) 
```

变得更加智能，如下所示：

```
dumbCut<-function(v,jump=5,thre=seq(0,max(v),by=jump)) rowSums(outer(v,thre,'>')) 
```

所以`dumbCut(1:7)`就是`1 1 1 1 1 2 2`，`dumbCut(1:7,3)`是`1 1 1 2 2 2 3`，`dumbCut(1:7,thre=c(0,2,3,5))`是`1 1 2 3 3 4 4`。

下一步是将输出转换为因子（因为在 R 中使用数字表示类别只是一种受虐狂）并生成有意义的关卡名称，因此基本上复制了实际`cut`的 .

# java - 基本的try catch问题

> ID：11124901
> 
> 赞同：-3
> 
> 时间：2012-06-20T17:25:40.210
> 
> 标签：java, try-catch

```
package mp1practice;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Driver 
{    
    ArrayList<String> arraylist = new ArrayList<String>();

    public void GrabData() {

        try {
            BufferedReader br = new BufferedReader(new FileReader("data/Catalog.txt"));
        }catch (FileNotFoundException ex) {
            Logger.getLogger(Driver.class.getName()).log(Level.SEVERE, null, ex);
    }
  }        
} 
```

你好，我有一个关于 try 和 catch 的非常基本的问题，我收到一个错误，说未报告的异常。必须被抓住或宣布被扔掉。有任何想法吗？

解决了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:34:03.737

最简单的更改是将代码放在初始化程序块中。

```
public class Driver {
    private final List<String> arraylist = new ArrayList<String>();
    {
        try {
            BufferedReader br = new BufferedReader(new FileReader("data/Catalog.txt"));
        } catch (FileNotFoundException ex) {
            Logger.getLogger(Driver.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

但更有用的是明确并设置一个字段。

```
public class Driver    {
    private final List<String> arraylist = new ArrayList<String>();
    private final BufferedReader br;

    public Driver() throws FileNotFoundException {
        br = new BufferedReader(new FileReader("data/Catalog.txt"));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:29:08.863

我认为你需要把它放在你的方法声明行中。

```
throws FileNotFoundException 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:31:02.857

首先，try-catch 块必须在方法内部。其次，`BufferedReader`and`FileReader`类`IOException`也抛出了文件权限。

所以：

```
public void methodName() {
    try {
        BufferedReader br = new BufferedReader(new FileReader("data/Catalog.txt"));
    } catch (FileNotFoundException ex) {
        Logger.getLogger(Driver.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException e) {
        // do something for IO exception here.
    }
} 
```

或者，您可以将`throws Exception`代码可能引发的任何其他异常添加到您的方法声明中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T17:31:02.963

使用 try/catch 您只能捕获“正在尝试”的方法中实际抛出的内容。因此，如果您要捕获的异常未定义为在方法内抛出，那么您将遇到上述错误。

# javascript - 监控外部网站的HTTP请求

> ID：11124904
> 
> 赞同：0
> 
> 时间：2012-06-20T17:25:45.150
> 
> 标签：javascript, ajax, cross-domain, http-request, http-monitor

我想根据网站上发生的事情编写一个脚本生成器，为此我编写了 javascript - 基于 ajax 的脚本生成器，在每个页面上我都包含 js 文件，并且在提交页面的页面的功能块中我调用javascript 的函数通过 getElementsByTagName(*) 启动页面变量 (DOM) 的读取，并在循环通过它之后，我使用 ajax 将预定义的格式写入文件。

这一切都是针对其运行的同一个站点完成的，但是现在当我需要为任何其他站点实现相同的记录器和脚本生成器时，就像在网站上所做的一样并登录到文件中，我也不能将我的脚本包含在任何其他外部网站，也没有在提交之前放置函数调用以读取 dom 并放入文件中。

这是js的虚拟代码

```
 beginRecording();

function beginRecording()
{
    if(RECORD_BIT == 1)
    { 
       processPageData();   
    }
}

function processPageData()
{
  var i
  var obj = document
  var posArray = new Array();
  var allElement = obj.getElementsByTagName("*");
  var dataArrayString = "";

  for(i=0; i < allElement.length; i++)
  {
    if (allElement[i].getAttribute('id') != null && allElement[i].getAttribute('id') != "") 
    {
        posArray[posArray.length] = allElement[i].getAttribute('id');
    }
 }

 for(i = 0 ; i < posArray.length ; i++)
 {
    dataArrayString = dataArrayString+"SET  "+posArray[i]+"="+getValueFromPage(posArray[i]);
 }

  writePostData(dataArrayString);

} 
```

函数 writePostData，通过记录 DOM 元素上的内容来执行 ajax 并在服务器上写入/更新文件，并且我发送了一些更详细的信息，例如 GET/POST 或页面名称等。

在 javascript 作为 document.forms[0].submit() 提交之前，在页面上调用 beginRecording()，以便它可以捕获 POST。

我阅读了有关跨域 ajax 的信息，但我仍然不确定如何在不将脚本添加到该文件并写入文件的情况下监控任何外部网站的 HTTP（读取 GET / POST 和页面或 URL 上的数据）

任何帮助或方向都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:40:16.217

You can't include javascript on a remote site, or monitor it's HTTP requests both of those things would be catastrophic to security...

# jquery - 头中的jquery变量

> ID：11124909
> 
> 赞同：1
> 
> 时间：2012-06-20T17:25:52.903
> 
> 标签：jquery, tags, head

我想在头上有一个这样的脚本：

```
<script type="text/javascript" id="scriptid" src="https://accountName.cloudServiceURL.com"></script> 
```

我想让“accountName”能够根据使用模板文件的人进行更改。

所以我创建了一个像这样的变量

```
<script type="text/javascript">
var claccount = 'accountName';
</script> 
```

因此，我尝试使用它来让人们添加自己的帐户名，如下所示：

```
<script type="text/javascript" id="scriptid" src="https://' + accountName + '.cloudServiceURL.com"></script> 
```

jQuery 是否会阻止使用脚本执行此类操作，因为我一直使用锚点和其他东西来执行此操作。

我也尝试使用 jquery 将脚本标签插入头部，但似乎不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:31:19.967

您可以动态加载脚本。您可以在解析帐户名称时动态加载它，而不是在相关脚本的头部添加单独的脚本标记，如下所示：

```
<script type="text/javascript">
    var claccount = 'accountName';
    var script = document.createElement('script');
    script.id = 'scriptId';
    script.type = 'text/javascript';
    script.src = 'https://' + claccount + '.cloudServiceURL.com';
    // you may need this as well...
    document.getElementsByTagName('head')[0].appendChild(script)​;​​​
</script> 
```

# java - 从 Java 中的 WebService 调用并行进程

> ID：11124912
> 
> 赞同：0
> 
> 时间：2012-06-20T17:26:05.480
> 
> 标签：java, web-services, tomcat, servlets, parallel-processing

我在 Java 中开发了一个 WebService (WS1)，它部署在 Tomcat 服务器中。如果满足某些条件，WS1 需要调用另一个 WebService (WS2) 来并行运行。这可能吗？还是 WS1 必须等待 WS2 的响应才能继续运行。这样做的目的不是延迟 WS1 的响应，因为它不依赖于 WS2。但是，WS2 触发器依赖于 WS1，这就是我的问题开始的方式。

我对这个问题的假设解决方案是创建一个单独的 servlet，它调用 WS2 而不延迟 WS1。我该如何实施它，或者任何人都可以想到更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:34:33.757

这取决于您想要达到的目标。如果您只想启动第二个 WS，您可以创建一个新的本地线程并进行调用。第二个 WS 甚至可能支持异步调用，这样你在调用它之后就不会被阻塞。创建一个新线程的工作方式如下。

首先，您需要一个用于该线程的类。此类将负责与 WS2 的通信：

```
class ThreadForWS2 extends Thread {
  public void run() {
    // invoke WS2 here
  }
} 
```

在您的 WS1 请求处理程序中，您只需要启动此线程，例如：

```
Thread threadForWS2 = new ThreadForWS2();
threadForWS2.start(); 
```

就是这样，当然在 Java 中有很多方法可以创建另一个线程。这取决于您调查最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:33:32.463

当然可以。
我想知道您是在谈论 SOAP 还是 RESTFul Web 服务
一般来说，在这两种技术中，您都可以在 WS1 中调用一个方法，从而与 WS2 进行通信（即 - 将带有 REST 数据的 HTTP 请求发送到资源 URL 或发送 SOAP 信封）
如果您的意思是并行运行以打开一个线程并执行 WS2 中方法的调用代码 - 这也是可能的
此外，据我所知，servlet API 3.0 支持异步调用，也许这也可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:37:06.557

您必须以**异步**方式调用 WS2 。这意味着 Web 服务调用在单独的线程中处理，不会影响父线程 (WS1) 的执行。

与异步调用相反的是**同步**调用，它阻塞当前线程，直到收到响应。

# powershell - Transfer data from pssession to host?

> ID：11124916
> 
> 赞同：2
> 
> 时间：2012-06-20T17:26:19.110
> 
> 标签：powershell, powershell-2.0

Basically my issue comes down to this, I need to run code on a remote server using the ServerManager Module, but return the output to the local shell.

Here is the code run on WKS01:

```
Enter-PsSession SVR01
Import-Module ServerManager
$Roles = @(Get-WindowsFeature | Where {$_.installed -eq $true}) 
```

Now I need to use the data in $Roles on WKS01\. Is there a way to do this? Am I going about this wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:16:47.143

That is what -ArgumentList is for.

You can pass arguments to a remote session using this parameter. Here is an example:

```
$procName = "powershell"
Invoke-Command -ComputerName (get-content c:\scripts\servers.txt) `
   -ScriptBlock {param ($Name) Get-Process -Name $Name} `
   –ArgumentList $procName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:43:06.133

```
$rs = New-PSSession -ComputerName SVR01
$Roles = Invoke-Command -Session $rs -ScriptBlock {
      Get-WindowsFeature | Where { $_.Installed }
}
Remove-PSSession $rs 
```

# java - Android没有将值传递给MySQL

> ID：11124920
> 
> 赞同：0
> 
> 时间：2012-06-20T17:26:29.750
> 
> 标签：java, php, android, mysql, parameters

**已解决**：我的网址错误。"rating" 应该是 rating* *s* *"

这是我的 Java，我在其中获取两个参数 (BasicNameValuePairs) 并推送到 PHP。

```
protected Void doInBackground(String... params) {

        String url_select = "http://www.---.com/---/insert_rating.php";

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("rating", String.valueOf(ratingsDouble)));
        param.add(new BasicNameValuePair("item", String.valueOf(Item)));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        return null;

    } 
```

这是我的 PHP，我在其中获取我的 Android 参数：

```
 $ratings=$_REQUEST['rating'];
 $item=$_REQUEST['item']; 
```

其余的 PHP 大部分是不需要的，因为当我硬编码一个字符串时，例如：

```
 $ratings = "5.0" 
```

...它将在数据库中传递；所以我知道最终是有效的（PHP 到 MySQL）。但是当我使用 $_REQUEST 时，它不起作用。在 Java 端，我通过 toast 确认这两个参数在传递到 onCreate 方法或任务中的 doPostExecute 方法时是正确的。

我是否错过了如何将变量从 Android 正确传递到 PHP 中？

# hibernate - 休眠策略离线获取多个表？

> ID：11124930
> 
> 赞同：0
> 
> 时间：2012-06-20T17:27:03.240
> 
> 标签：hibernate, lazy-loading, parent-child, fetch

听起来很疯狂，但这是故事。

背景：

*   想象一下我们的数据库看起来像：公司有 n 个员工，有配偶和孩子。员工也有带轮胎的汽车......等等......
*   我们的应用程序提供 Web 和桌面 UI。因此，用户希望从多个表中加载数据，以便在桌面上离线工作。例如：将大约 1000 个公司加载到桌面上工作。
*   数据量很大，从数千条记录到有时十万条记录不等。但是离线加载的数据并没有那么大，只有几千。

当前架构：

*   我们使用的是[来自 Adob​​e ADEP4.6 的 HibernateAssembler](http://help.adobe.com/en_US/enterpriseplatform/10.0/AEPDeveloperGuide/WSc3ff6d0ea77859461172e0811f00f6f4da-7fffUpdate.html#WSc3ff6d0ea77859461172e0811f00f7045b-7f55Update)，与 DAO 非常相似，例如，对于每个实体，我们都有一个 Assembler。但是对 Hibernate 的访问是非常有限的。
*   对于 Web，我们使用 LAZY Loading，到目前为止一切顺利。
*   对于 AIR 桌面，我们正在尝试多种选择

AIR 桌面的选项，注意 Entity 都标记为 LAZY，我们正在考虑以下选项之一：

1.  在命名的 hql 中使用“fetch join”：在一个 hql 中同时加载公司、员工、汽车、轮胎
2.  单独加载每个表，然后手动匹配它们。
3.  将 EAGER FETCH 与 BatchSize 一起使用？！！难以控制
4.  放弃 Hibernate 并返回到庞大的 JDBC 查询。

请给我们您的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:24:34.420

1.  如果您有多个 1-N 关系，则返回的 ResultSet 将包含太多冗余数据，以我的经验，Hibernate 处理起来会太慢。

2.  我会使用 Hibernate 或纯 SQL 来解决这个问题。实际上，Hibernate 可以在一定程度上做到这一点，方法是用 @Fetch(FetchMode.SUBSELECT) 注释你的关系。例如，当您根据条件检索某些公司时，将运行以下 SQL：

    ```
    SELECT * FROM company WHERE condition
    SELECT * FROM employee WHERE employee.company_id IN (SELECT id FROM company WHERE condition) 
    ```

    请注意，这仅在某些数据库中有效。如果它表现不佳，请考虑#3。

3.  在这种情况下，我尝试了 BatchSize，它在一定程度上提高了性能，但选项 #2 更好。

4.  它归结为 SQL 运行。如果那是有效的，Hibernate 通常不会增加那么多开销（只有对象创建的开销，将所有对象保存在内存中等）

# javascript - HTML 上的自定义剪切路径

> ID：11124932
> 
> 赞同：0
> 
> 时间：2012-06-20T17:27:15.227
> 
> 标签：javascript, jquery, css, svg, mask

在对 SVG 进行不成功的实验后，我希望使用另一种技术将**剪辑路径**（自定义多边形，如箭头）应用于 a `<div>`，女巫内部还有一些其他 HTML 元素

```
<div class="firstbox">
    <h2>Title</h2>
    <a href="#">This is a link</a>
    <img src="#">
</div> 
```

关于外部背景的问题`<div>`，它应该是可见的 - 没有png过度制作“假面具”。HTML 内容应该在没有 JS 的情况下可见 - 所以没有`<canvas>`AFAIK - 并且能够被搜索机器人索引。

这是想要完成的任务：http: [//min.us/mboMRhEQSq](http://min.us/mboMRhEQSq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:56:31.667

如果您只有几个短字符串（例如在您的示例中），我建议您只使用纯 svg，并在 svg 内使用掩码。这将适用于所有支持 svg 的浏览器。或者您可以等待所有浏览器实施尚未标准化的[建议之一（建议 1-3）。](https://stackoverflow.com/a/11126899/109374)

这是在 svg 中使用掩码的[示例](http://dev.w3.org/SVG/profiles/1.1F2/test/svg/masking-path-11-b.svg)。[svg 1.1 testsuite](http://dev.w3.org/SVG/profiles/1.1F2/test/harness/htmlObjectApproved/index.html)中还有更多内容，请查找名为 masking-* 的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:35:41.203

好吧，经过一番研究：

1.  [clip-path](https://developer.mozilla.org/en/CSS/clip-path)是 Mozilla 想要并且可以提供帮助的东西，但只有 Firefox 支持它。
2.  仅 Chrome 支持[mask CSS 属性。](http://caniuse.com/#feat=css-masks)
3.  编写一个带有 HTML 的 SVG 并剪辑内容，可以弥补这个任务，但 IE9 不会在 foreignObject 中呈现 HTML。
4.  [使用 SVG 仅剪切背景图像是一种解决方案，但是使用jQuery SVG 插件](http://keith-wood.name/svg.html)在块内制作动画（以将它们保留在剪辑中）是一项非常艰巨的任务。[用于 SVG 的Raphaël JS 框架](http://raphaeljs.com)不支持内联 SVG。
5.  在内容上使用 PNG 是不行的，下面的背景`<div>`必须是可见的。
6.  用于`<canvas>`任务是不行的，它不是用来渲染内部的 html 代码的。此外，没有像 SVG 这样的事件处理程序来为“悬停”设置动画。

所以，答案很明确：**没有办法剪辑（制作）一组 HTML 元素**。回到绘图板，我猜。

# javascript - 将标记/代码作为文本发布

> ID：11124938
> 
> 赞同：0
> 
> 时间：2012-06-20T17:27:47.250
> 
> 标签：javascript, jquery, html

我有一个页面，其中包含一些使用 HTML/CSS/JavaScript 的非常基本的示例。我希望能够将这些示例的代码作为文本发布在我的网站上。我尝试使用 pre 和 code 元素来包装代表代码的文本块。

这是网站：[https ://mywebspace.wisc.edu/jkinzel/examples/](https://mywebspace.wisc.edu/jkinzel/examples/)

最后一个小问题是，在某些情况下， < 和 > 被编码为`&gt;`and `&lt;`。您在第二个示例的代码（在 JavaScript 和 CSS 标题下）中看到了这种情况，但仅在某些情况下。其他时候，它们会正确显示为 < 和 > （这是我想要的）。

有人对为什么有时会发生这种情况而不是其他人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:58:31.700

使用像[google-code-prettify](http://code.google.com/p/google-code-prettify/)这样的东西会为你做这件事怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:59:31.790

从我上面的评论：

这是文本被编码两次的结果；也就是说，它被编码一次以将 < 和 > 字符转换为 HTML 实体，然后再对它们进行编码，这使得它们停止工作。也就是说，当它被编码两次时`&lt;`变成。`&amp;lt;`

*更多细节*：为了以源代码形式显示 HTML，最重要的编码字符是“<”和“&”；通常人们也会对“>”进行编码，尽管*通常*这不是问题。（实际上，“&”本身*通常*也不是问题，但无论如何。）HTML 实体看起来像“&foo;”，其中“foo”是一些键。因此，当您对文本进行编码时，您最终会得到“&foo;” 到处都是。当你*再次*编码时，那些小字符串开头的“&”被重新编码为“&”。

# python - 在 jinja2 模板中创建指向 Flask 应用程序 url 的链接

> ID：11124940
> 
> 赞同：43
> 
> 时间：2012-06-20T17:28:07.140
> 
> 标签：python, flask, jinja2, url-for

在我的 Flask 应用程序中，我有一个显示帖子的视图

```
@post_blueprint.route('/post/<int:year>/<int:month>/<title>')
def get_post(year,month,title):
    # My code 
```

要显示最后 10 个条目，我有以下视图：

```
@post_blueprint.route('/posts/')
def get_all_posts():
    # My code
    return render_template('p.html',posts=posts) 
```

现在，当我显示最后 10 个帖子时，我想将帖子的标题转换为超链接。目前我必须在我的 jinja 模板中执行以下操作来实现这一点：

```
<a href="/post/{{year}}/{{month}}/{{title}}">{{title}}</a> 
```

有什么办法可以避免对网址进行硬编码？

像`url_for`这样用于创建 Flask url 的函数：

```
url_for('view_name',**arguments) 
```

我已经尝试寻找一个，但我无法找到它。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-20T17:41:25.380

I feel like you're asking two questions here but I'll take a shot...

For the posting url you'd do this:

```
<a href="{{ url_for('post_blueprint.get_post', year=year, month=month, title=title)}}">
    {{ title }}
</a> 
```

To handle static files I'd highly suggest using an asset manager like [Flask-Assets](http://flask-assets.readthedocs.org/en/latest/index.html), but to do it with vanilla flask you do:

```
{{ url_for('static', filename='[filenameofstaticfile]') }} 
```

If you'd like more information I highly suggest you read. [http://flask.pocoo.org/docs/quickstart/#static-files](http://flask.pocoo.org/docs/quickstart/#static-files) and [http://flask.pocoo.org/docs/quickstart/#url-building](http://flask.pocoo.org/docs/quickstart/#url-building)

**Edit for using kwargs:**

*Just thought I'd be more thorough...*

If you'd like to use `url_for` like this:

```
{{ url_for('post_blueprint.get_post', **post) }} 
```

You have to change your view to something like this:

```
@post_blueprint.route('/posts/')
def get_all_posts():
    models = database_call_of_some_kind # This is assuming you use some kind of model
    posts = []
    for model in models:
        posts.append(dict(year=model.year, month=model.month, title=model.title))
    return render_template('p.html', posts=posts) 
```

Then your template code can look like this:

```
{% for post in posts %}
    <a href="{{ url_for('post_blueprint.get_post', **post) }}">
        {{ post['title'] }}
    </a>
{% endfor %} 
```

At this point I would actually create a method on the model so you don't have to turn it into a dict, but going that far is up to you :-).

# android - 在 PreferenceActivity 中选择百分比数字的对话框

> ID：11124945
> 
> 赞同：1
> 
> 时间：2012-06-20T17:28:31.433
> 
> 标签：android, preferenceactivity

在我调用的扩展`PreferenceActivity`类`addPreferencesFromResource(R.xml.livewallpaper_settings)`中，我有一个 xml 文件，我在其中定义了所有内容。如何定义要求用户设置百分比的对话？也许我可以限制`EditTextPreference`只接受 0-100 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:40:19.857

您可以创建一个`SeekBarPreference`弹出一个对话框，其中包含一个`SeekBar`，供用户通过滑块选择百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:58:34.620

您可能必须在代码中而不是在 XML 中处理这个问题。

1.  获取使用 `EditText`的.`EditTextPreference`[`getEditText()`](http://developer.android.com/reference/android/preference/EditTextPreference.html#getEditText%28%29)
2.  `InputFilter`使用它设置一个[`setFilters()`](http://developer.android.com/reference/android/widget/TextView.html#setFilters%28android.text.InputFilter%5B%5D%29)
3.  约束[`filter()`](http://developer.android.com/reference/android/text/InputFilter.html#filter%28java.lang.CharSequence,%20int,%20int,%20android.text.Spanned,%20int,%20int%29)方法中的 输入`InputFilter`。

# jquery - 使用 .load() 检索参数

> ID：11124946
> 
> 赞同：1
> 
> 时间：2012-06-20T17:28:34.493
> 
> 标签：jquery, ajax, jsp, parameters, get

**我有一个 jsp 文件：validate.jsp-**

```
var rollNo=document.forms["result_form"]["studentRollno"].value;
var name=document.forms["result_form"]["studentName"].value;

$("#student_result").load("result.jsp?rollNo="+rollNo+"&name="+name); 
```

如您所见，我将两个数据 rollNo 和 name 传递给 result.jsp

**现在在 result.jsp 中：**

```
String rollNo=request.getParameter("rollNo");
String name=request.getParameter("name");       

out.print("Your roll number is: "+rollNo+"<br>");
out.print("Your name is: "+name); 
```

一切都很好。当我给出 rollNo=5 和 name=something（在 validate.jsp 的文本框中）时，result.jsp 会按我的意图加载显示消息。唯一的问题是，它只有在我不在文本框中提供空格的情况下才有效！例如：如果我输入 name="Stalin"，它可以工作，但对于 name="Stalin" 和 "Stalin Subramanaim"，它不起作用。result.jsp 页面未加载！请帮忙..！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:32:20.840

您正在手动构建参数，这可能会导致查询字符串格式不正确。您应该使用 jQuery 助手[`$.param`](http://api.jquery.com/jQuery.param/)来解决这个问题：

```
el.load( "result.jsp?" + $.param( { rollNo: rollNo, name: name } ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:36:44.120

它不起作用，因为您不能在 url 中有空格。您需要将空格转换为特殊字符（javascript函数`escape(url)`会很好）

# hadoop - 无法从 Hadoop 访问公共 S3 存储桶

> ID：11124949
> 
> 赞同：4
> 
> 时间：2012-06-20T17:28:55.540
> 
> 标签：hadoop, amazon-s3

我正在使用 Hadoop 来处理 Google Books ngram，它们作为 Hadoop 序列文件存储在 Amazon S3 中。

Hadoop 包括从 S3 读取的功能（使用 S3 存储桶作为虚拟“文件系统”），只需在文件名上指定 s3:// 或 s3n:// 协议即可。

不幸的是，它要求您设置 AWS 访问和密钥。由于我想读取的存储桶是公开的，因此我没有任何密钥可供使用。如果我使用自己的密钥，则无法从 ngrams 存储桶中读取数据（因为它不属于我的帐户）。

如何使用存储在 Hadoop 的公共 S3 存储桶中的文件，而无需自己重新托管该文件（这会变得非常昂贵，因为有几 TB 的数据）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T21:03:14.970

如果数据是公开的，您将不需要 AWS 访问或密钥，因为您不会使用该`s3n://`变体。相反，您将使用公共 URL 变体，该变体将以`http://*.s3.amazonaws.com/*`

如果公共 URL 不可用，您可以尝试为每个 AWS 访问密钥和密钥传递一个空白字符串，看看会发生什么

# ios - 如何使用 MKNetworkKit 将 NSArray 传递给 POST

> ID：11124950
> 
> 赞同：2
> 
> 时间：2012-06-20T17:28:55.600
> 
> 标签：ios, json, mknetworkkit

MKNetworkOperation *op = [self operationWithPath:@"thestore/services/storeservice.svc/getfavorites" params:fetchedObjects httpMethod:@"POST"];

fetechedObjects 是一个数组。我可以遍历数组以获取需要放入 POST 请求正文的值

```
[
 {
     "id": 9222,
    "latitude": 19.7897,
    "longitude": -64.0208
 },
 {
     "id": 7832,
     "latitude": 79.7713,
     "longitude": -44.1084
 }
] 
```

但我不知道如何使用 MKNetworkOperation

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:19:03.737

首先要尝试的是将`postDataEncoding`操作的属性设置为`MKNKPostDataEncodingTypeJSON`. 这*应该*导致数组被序列化并设置为请求正文。

**但是**，`MKNetworkKit`并不真正支持`params`参数的数组值；它需要一本字典。如果您输入了错误的代码路径，它可能会崩溃，因为它需要一个您提供数组的字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:34:16.833

这应该可以帮助你。

```
 [op setCustomPostDataEncodingHandler:^NSString *(NSArray *listOfItems) {

    return [listOfItems description];

  } forType:@"text/json"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T13:24:29.383

我通过将数组（产品）作为列表发送来解决它：

> NSData *data = [NSJSONSerialization dataWithJSONObject:products options:0 //非漂亮打印错误：nil]; ; [参数 setObject:[[NSString alloc] initWithData:数据编码:NSUTF8StringEncoding] forKey:@"list"];

# ruby-on-rails - 过滤标记以使用 gmaps4rails 隐藏/显示？

> ID：11124951
> 
> 赞同：1
> 
> 时间：2012-06-20T17:28:58.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我正在使用 gmaps4rails（很棒的宝石！）进行一些映射。我已经能够通过 javascript 成功启动回调函数并隔离标记，但不能按照 Google 地图 API 文档中的规定在它们上调用任何方法。所以在这里，标记给了我一个标记数组，但不能在其中任何一个上调用 set 可见。

```
<script type="text/javascript" charset="utf-8">
     Gmaps.map.callback = function() {
      var markers = Gmaps.map.markers
      Gmaps.map.markers[0].setVisible(true)
      } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:49:35.310

只需更换：

```
Gmaps.map.markers[0].setVisible(true) 
```

和：

```
Gmaps.map.markers[0].serviceObject.setVisible(true) 
```

实际上`Gmaps.map.markers[0]`包含与标记相关的所有信息 + 从谷歌地图或任何其他提供者创建的标记对象。

# django - 了解 jenkins 和 django-jenkins 的区别

> ID：11124953
> 
> 赞同：15
> 
> 时间：2012-06-20T17:29:04.573
> 
> 标签：django, jenkins, django-jenkins

我的问题比较主观，请版主不要关闭它，因为我想知道有经验的书呆子的意见。

我是部署领域的新手，并且正在[jenkins](http://jenkins-ci.org/)上做一些 RTFM ，来自 python/django 背景我搜索 github 以找到[django-jenkins](https://github.com/kmmbvnr/django-jenkins)。

CI 的整个想法是有一个连续的构建过程，这样如果构建失败，您可以恢复到最后一个阶段。

据我所知，jenkins 在服务器上运行，如果所有测试都通过，当代码被推送到 github 或其他一些 repo 时，它会运行测试和部署。它可能通过轮询或 cron 作业与 repo 对话。

而当我在文档中查看 django-jenkins 时提到了

```
./manage.py jenkins 
```

这意味着，我们可以将命令添加到设置文件中，在本地进行测试，然后进行部署。（如果我错了请纠正我）

那么它有什么区别呢？django-jenkins 是否不需要使用 jenkins 进行 CI 的附加服务器？

请让我知道，并清除我哪里错了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T17:33:27.053

**Jenkins**本身就是真正的持续集成工具：它处理手动和自动构建、部署，并且可以运行测试脚本和显示报告。这对于查看您的测试是否仍然通过以及构建是否成功很有用。

**django-jenkins**是一个用于 Django Web 框架的 Python 包，它提供了可以在 Jenkins 中使用的其他工具。例如，它生成可供 Jenkins 阅读的报告。您可以将这些命令添加到构建脚本中以生成报告。

换句话说，Jenkins 可以用于许多不同的持续集成目的，但如果你碰巧用 Python/Django 构建网站，那么 django-jenkins 提供了额外的功能来让生活更轻松。

# php - PHP - 从作为函数结果的数组中回显特定字符串

> ID：11124957
> 
> 赞同：0
> 
> 时间：2012-06-20T17:29:19.233
> 
> 标签：php, function

PHP：

我编写了一个返回数组的函数。我希望能够只回显这个数组的一部分，而不必像这样创建一个变量：

```
$var = meth_0('getPlayerLimit');
echo $var['success']; 
```

这可能吗？我已经测试过做下面的事情，但它没有用。

```
echo meth_0('getPlayerLimit')['success']; 
```

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:32:11.090

只有 php 5.4 才有可能，这称为 Array Dereferencing，新添加到 php.ini 中。

另一方面，您可以使用 php 5.3 或更少的方式执行此操作，例如：

```
echo reset(meth_0('getPlayerLimit')); //Success must be first item
echo end(meth_0('getPlayerLimit')); //Success must be last item 
```

或者

```
echo valueOf(meth_0('getPlayerLimit'), 'success');
function valueOf($arr, $idx){ return $arr[$idx]; } 
```

这就是我能想到的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:32:20.040

你可以用 来做到这一点`PHP 5.4`，它被称为数组解引用：

```
 function get_cars()
  {
    return ["ferrari","lamborghini","maserati","bugatti"];
  }
  echo get_cars()[3];  //bugatti 
```

示例取自[http://www.waynemay.com/function-array-dereferencing-in-php-5-4-03052012](http://www.waynemay.com/function-array-dereferencing-in-php-5-4-03052012)

# instance - 创建不知道其类型的派生类的新实例

> ID：11124960
> 
> 赞同：1
> 
> 时间：2012-06-20T17:29:32.500
> 
> 标签：instance, base, derived-class, base-class, derived

如果我有一个名为“A”的类，并且我有两个派生自它的类，可以说“B”和“C”我如何创建 B 和 C 的新实例而不知道哪个是哪个。这可能听起来令人困惑，所以让我澄清一下并使用与我类似的代码。

基类：

```
class A {
    stuff...
} 
```

派生类：

```
class B : A{
    stuff...
}

class C : A {
    stuff...
} 
```

然后在其他一些课程中，我有：

```
class Z {
    void Derp() {
        foreach(A classA in listOfA's) {
            create new instance of derived class
        }
    }
} 
```

我不能只是说`B = new B()`，`C = new C()`因为也许 B 根本不在列表中，或者列表中可能有 3 个 B 和 1 个 A。Surly 有一些方法可以做到这一点，但如果没有，我可以有一个 switch-case 语句，如：

```
class Z {
    void Derp() {
        foreach(A classA in listOfA's) {
            switch(classA) {
                case is B:
                    B = new B();
                    break;
                case is C:
                    C = new C();
                    break;
                }
            }
        }
    }
} 
```

除非必要，否则我想避免这样做，因为每次我创建一个派生自类 A 的新类时，我都必须记住在其中添加另一个 case 语句。

那么我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:35:24.707

一个常见的 C++ 解决方案是所谓的[*虚拟构造函数习语*](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.8)：您定义一个`clone`在基类中调用的虚函数`A`，然后将其覆盖`B`以返回一个新的实例，`B`并在`C`返回一个新的实例`C`。

如果您需要一个空白实例而不是克隆，您可以添加一个`newInstance`使用默认构造函数的函数。

# ruby-on-rails-3 - ActiveRecord::RecordNotUnique: PG::Error: ERROR

> ID：11124961
> 
> 赞同：0
> 
> 时间：2012-06-20T17:29:44.477
> 
> 标签：ruby-on-rails-3, postgresql

我将我的数据库从 Sqlite 迁移到 Postgres。现在当我尝试创建新记录时

`Account.create! code:"0001", name:"foo"`

我收到了这个错误

`ActiveRecord::RecordNotUnique: PG::Error: ERROR: duplicate key value violates unique constraint "accounts_pkey" DETAIL: Key (id)=(4) already exists.`

似乎自动增量不起作用。我需要一些额外的配置吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:34:49.903

您可以`sequence value`使用 pgAdminIII 手动更改您的 PG 表。
转到您的数据库-> 序列，单击与您的模型对应的表并将其更改为`Current value`.

# java - StringBody 没有得到完整的字符串

> ID：11124962
> 
> 赞同：0
> 
> 时间：2012-06-20T17:29:45.600
> 
> 标签：java, android, apache, entity, http-post

我不明白：在android中，我没有得到我输入到stringbody中的完整字符串。我已经检查过字符串是否已完全保存，但是当它传递给 stringbody 时它就会中断。在同一应用程序的桌面版本中，结果是成功的。但在 Android 中，字符串末尾的随机部分会丢失。如果我在结果字符串丢失后尝试保存它，该字符串将保存在同一个位置。我不使用任何口音或特殊字符。来自测试的示例：

先写：

> 这是一个带有随机消息的测试简历，我正在写在旅途中。如果这像我期望的那样被削减，那么将会遗漏一些东西。让我们看看会发生什么。

一次保存可以保存：

> 这是一个带有随机消息的测试简历，我正在写在旅途中。如果这像我期望的那样被削减，将会遗漏一些东西

第二次保存：

> 这是一个带有随机消息的测试简历，我正在写在旅途中。如果这像我一样被剪掉

代码是

```
protected void gravarPerfil() throws UnsupportedEncodingException {

    MultipartEntity entity = new MultipartEntity();
    StringBody sAcerca = null, sLoc = null;

    DefaultHttpClient client = new DefaultHttpClient();
    if (cookie != null) {
        client.getCookieStore().addCookie(cookie);
    }

    HttpPost post = new HttpPost(address + "/dinamicas/editarPerfil");

    FileBody imagebin = null;

    if (imgfile != null) {
        imagebin = new FileBody(imgfile);
    }

    Log.v("msg", acerca.getText().toString()); 
```

这是我的文件体没有加载整个字符串的部分

```
 sAcerca = new StringBody(acerca.getText().toString());
    sLoc = new StringBody(local.getText().toString());

    try {

        entity.addPart("acerca", sAcerca);
        entity.addPart("localizacao", sLoc);
        if (imgfile != null) {
            entity.addPart("foto", imagebin);
        }

        post.setEntity(entity);

        HttpResponse response = client.execute(post);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:57:22.803

没有得到任何合理的解决方案，所以我申请了四处走走。我发现被删除的结尾总是在 5 - 13 个字符之间......所以我在字符串的末尾添加了 15 #，然后在服务器端被删除。它不漂亮，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:25:34.303

你的意思是最后的日志行给你一些奇怪的东西吗？：

```
 Log.v("msg", response.toString()); 
```

因为它会。

尝试这个：

```
InputStream responseStream = response..getEntity().getContent();
String textResponse = StreamConverter.convertStreamToString(responseStream);
Log.v("msg", "Received:"+ textResponse);

public class StreamConverter {

    public static String convertStreamToString(InputStream inputStream) throws IOException {
        if (inputStream != null) {
            Writer writer = new StringWriter();

            char[] buffer = new char[1024];
            try {
                Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),1024);
                int n;
                while ((n = reader.read(buffer)) != -1) {
                    writer.write(buffer, 0, n);
                }
            } finally {
                inputStream.close();
            }
            return writer.toString();
        } else {
            return "";
        }
    }
} 
```

# mysql - 重用 MySqlConnection.serverString

> ID：11124964
> 
> 赞同：0
> 
> 时间：2012-06-20T17:29:53.230
> 
> 标签：mysql, vb.net, mysqlconnection

假设我有一个数据库连接。在阅读了一些东西后，我想连接到同一个数据库。于是我自然而然地使用了第一个数据库mysqlconnection.serverstring

猜猜看，密码和用户名不包含在 connect1.ConnectionString 中。那么我该怎么做呢？这是设计使然吗？

```
 Using connect1 As New MySqlConnection(ConnectLocalhost.serverString)
            connect1.Open()
bla bla bla
                Using connect2 As New MySqlConnection(connect1.ConnectionString) ' this won't work
                    connect2.Open()
                End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:42:25.453

You need to put Persist Security Info = true in your original connection string otherwise it won't be read back.

Course if you do that you might as well not have a user name and password...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:43:26.590

1.  将您的连接字符串存储在您的配置中 - 因为它需要在代码之外进行更改（例如 - 生产与开发）。

2.  编写一个返回活动连接或包装对象的函数，以便您可以使用：

    ```
    使用 MyHelper.GetConnection()

       ...

    结束使用

    ```

3.  这样，您可以使用连接并关闭它，因为连接池会保存连接以供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:32:13.680

你能不只是重复使用你原来的连接吗？除非您已明确关闭它，否则您应该仍然可以访问。

# javascript - 用于 jquery 动画的 jquery cookie

> ID：11124965
> 
> 赞同：0
> 
> 时间：2012-06-20T17:29:54.197
> 
> 标签：javascript, jquery, cookies

好的，这是我到目前为止的代码

```
$(window).load(function() { 

        $("#notify").animate({top: 0}, 200, null);
        //for css positioning prblem
        $("#notify").css("position", "relative");

}); // end window load 

$(document).ready(function(){

    //Hide notify bar
    $('.notify-close').click(function(){
        $("#notify").slideToggle({top: -100}, 300, function() {
            $("#notify").css("position", "absolute");
        });
    });
}); 
```

我怎样才能做到这一点，以便当用户单击带有类的按钮时`.notify-close`，下一个时间限制通知栏不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:54:40.473

这对你有用，

```
$(window).load(function() { 
        if($.cookie("mynotifycookie")=="read") {
            $("#notify").animate({top: 0}, 200, null);
            //for css positioning prblem
            $("#notify").css("position", "relative");
        }
        else {
            $("#notify").css("display", "none");                
        }

}); // end window load 

$(document).ready(function(){

    //Hide notify bar
    $('.notify-close').click(function(){
        $.cookie("mynotifycookie", "read", , { expires: 9999 });
        $("#notify").slideToggle({top: -100}, 300, function() {
            $("#notify").css("position", "absolute");
        });
    });
}); 
```

# macos - 无法禁用系统键盘快捷键

> ID：11124977
> 
> 赞同：1
> 
> 时间：2012-06-20T17:30:58.340
> 
> 标签：macos, cocoa

我正在尝试使用以下代码禁用系统键盘快捷键：

```
#import "AppDelegate.h"
#import "Carbon/Carbon.h"

@implementation AppDelegate

void *oldHotKeyMode;

@synthesize window = _window;

-(void)dealloc
{
[super dealloc];
}

-(void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
oldHotKeyMode = PushSymbolicHotKeyMode(kHIHotKeyModeAllDisabled);
}

-(void)applicationWillTerminate:(NSNotification *)notification
{
PopSymbolicHotKeyMode(oldHotKeyMode);
}

@end 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:19:24.357

问题出在系统偏好设置中。仅当您在“通用访问”中选中“启用辅助设备访问”时，此代码才有效。

# html - html中闪烁的多级下拉菜单

> ID：11124985
> 
> 赞同：0
> 
> 时间：2012-06-20T17:31:17.330
> 
> 标签：html, menu, header, drop-down-menu, submenu

任何人请告诉我加载产品的子菜单有什么问题。

链接在这里：

[http://www.lexurcapacitor.com/index.html](http://www.lexurcapacitor.com/index.html)

这是css链接：

[http://www.lexurcapacitor.com/css/style.css](http://www.lexurcapacitor.com/css/style.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:26.237

我发现菜单闪烁是因为文件中的代码`<script src="js/dualflow.js"></script>`；

`c("#header-nav").delegate("li","mouseenter mouseleave",function(f){`

**此**代码在`<nav id="header-nav">`. 这段代码的缺点是，它也考虑了子菜单中的**li**！

我得到的最简单的解决方案是为第一个菜单项的**li元素设置一个类（***例如：Home、About、Products...*）

**HTML 更新**

```
<nav id="header-nav">
        <ul>
            <li class="current menu">
                <a href="index.html">Home</a>
            </li>
            <li class="menu">
                <a href="about.html">About</a>
            </li>                       
            <li class="menu">
                <a href="msc.html">Products</a>
                <ul>
                    <li>
                        <a href="msc.html">Motor Start Capacitor</a>
                        </li>   
                        <li>
                            <a href="mrc.html">Motor Run Capacitor</a>
                        </li>   
                        <li>
                            <a href="tc.html">Terminal Capacitor</a>
                        </li>   
                        <li>
                            <a href="bstc.html">Box Square Type Capacitor</a>
                        </li>   
                        <li>
                            <a href="flc.html">Fluorescent Lighting Capacitor</a>
                        </li>
                        <li><a href="fc.html">Fan Capacitor</a>
                        </li>                   
                    </ul>
                </li>  
                <li class="menu">
                    <a href="needus.html">Need us</a>
                </li>
                <li class="menu">
                    <a href="network.html">Network</a>
                </li>
                <li class="menu">
                    <a href="certificate.html">Certificates</a>
                </li>
                <li class="menu">
                    <a href="contact.html">Contact</a>
                </li>
            </ul>
        </nav> 
```

**dualflow.js 更新**

使用以下代码更新 dualflow.js 文件（添加类“菜单”）

~~`c("#header-nav").delegate("li","mouseenter mouseleave",function(f){`~~

```
c("#header-nav").delegate("li.menu","mouseenter mouseleave",function(f){ 
```

# php - Two Admin Backends as One

> ID：11124988
> 
> 赞同：1
> 
> 时间：2012-06-20T17:31:23.353
> 
> 标签：php, widget

Assume there are two separate web applications:

1.  a sports site with admin backend
2.  an email marketing application also with an admin backend

I want to be able to administer the marketing application from the sport's backend so that I don't have to open two separate admin interfaces.

My questions are as follows:

**1)**

How is this achieved? How can I embed the email admin backend into the sport's backend so that I operate the two from one place? Let's say both applications are in PHP.

Lets assume both applications are from the same Framework (Yii or Zend or CakePHP etc..).

**2) EXTRA QUESTION::**

Assuming the applications are in **different PHP Frameworks** , how can it be done?

I hope my question is clear. I have tried googling the issue but couldn't find any answers. If there is a tutorial somewhere, kindly point me there.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:33:23.470

Unless there is some kind of bridging software between the two applications (you don't say what they are), or some ***very*** common ground, you'll likely have to write such an interface yourself. Both sites depend on different code and data to accomplish similar tasks, and you'll have to "introduce them to eah other" so that they can work together.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:49:43.117

I cant see any problems here at all? Most frameworks allow you to connect to multiple databases, so just create a general admin that has pages for both websites, connecting to the correct database for each page. You would be able to choose whatever framework you want. The general backend for both sites can be on any domain. The only drawback i can think of is if one database is on another server it will be much slower.

# java - Android 上的 Java NIO 性能

> ID：11124991
> 
> 赞同：3
> 
> 时间：2012-06-20T17:31:34.240
> 
> 标签：java, android, nio, ijetty

我正在评估安卓上的 i-jetty。我看到 i-jetty 支持 NIO 并且默认启用。这让我明白了：NIO 和传统 IO 在 android 上的比较如何？

乍一看，似乎在移动平台上蔚来会做得更好，因为它可以节省更多的内存。另一方面，OIO 可以更好地适应，因为通常我们不需要像在 Java EE 上那样需要很多打开的套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T20:55:04.213

这并不是一个答案。只想与两个实现分享快速手动测试的结果：

1.  NIO with [ION](https://github.com/koush/ion) (1.1.5) by Koushik Dutta
2.  Square 中的人使用[OkHttp](http://square.github.io/okhttp/) (1.1.1)进行 OIO

测试是在具有 LTE 的同一设备 (Android 4.0.4) 上完成的。8分钟内，108个请求一一发出（无并发）。请求分为 5 个部分： NIO -> OIO -> NIO -> OIO -> NIO 。该请求是对 UserGrid API 的 HTTP PUT 请求，该请求返回相同的响应，该响应被转换为字符串并以相同的方式处理。

以毫秒为单位：

```
NIO/ION 60 times   OIO/OkHttp for 48 times        
 Min.   :  889      Min.   :  629.0
 1st Qu.: 1086      1st Qu.:  774.5
 Median : 1426      Median : 1241.0
 Mean   : 1659      Mean   : 1712.2
 3rd Qu.: 1697      3rd Qu.: 1881.2
 Max.   :10913      Max.   :16333.0

 Std Dev: 1329.406  Std Dev: 2254.099 
```

评论：

*   该应用程序在每个部分之间重新启动。所以 NIO/ION 测试多了一个“第一次运行”，速度稍慢。但是，它不应该对平均值/平均值产生很大影响。

从这个测试中，你可以说 NIO 在响应时间上更加可预测。

正如我所说，这并不是要回答的。我有兴趣查看其他测试结果并找出在哪种情况下 NIO/OIO 更好。谢谢

# jquery - Twitter 的 bootstrap typeahead - 如何只允许列表中的值？

> ID：11124993
> 
> 赞同：6
> 
> 时间：2012-06-20T17:31:41.483
> 
> 标签：jquery, jquery-validate, twitter-bootstrap

有没有办法允许用户仅使用 Twitter 的引导程序预先输入来从预定义列表中选择值？理想情况下，每个文本值都应替换为某个数值（如何使用`select`）。

例如：

```
var regionsList = ["value1", "value2", "value3"];
var regionsCodesList = [11, 12, 77];
$('#region').typeahead({ source: regionsList }); 
```

用户应该只能输入*value1*、*value2*或*value3*，仅此而已。提交表单后，应相应地传递诸如*11*、*12*、*77之类的值。*

更新。我创建了自定义验证方法：

```
$.validator.addMethod("validRegion", function (value, element, param) {
  return !(param.indexOf(value) == -1);
}, "Please start to input the region and then choose the value from the list"); 
```

`regionsList`被传递为`param`。但它不能很好地工作 - 如果用户用鼠标从列表中选择值，则不会隐藏错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:02:47.580

试试更新方法：

```
$('#region').typeahead({ 
   // ....  
   "updater" : function bla(item) {
       $('#region').val(item);
       $("#myForm").validate().element("#region");
       return item;         }
   } 
} 
```

# php - PHP 一个完成后的几个 curl 请求

> ID：11124994
> 
> 赞同：0
> 
> 时间：2012-06-20T17:31:42.593
> 
> 标签：php, curl

我想用 curl 为我的网站创建一个登录名来管理一些东西。因此我必须使用相同的 cookie 发出多个 curl 请求

现在我想知道什么代码更好地实现这一目标。这是否更好：

```
$CookieFile = 'cookies/'. uniqid() . '.txt';
file_put_contents($CookieFile, '');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $Url);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $PostData1);
curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFile);
curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFile);
$result1 = curl_exec($ch);

curl_setopt($ch, CURLOPT_URL, $Url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $PostData2);
$result2 = curl_exec($ch);
curl_close($ch); 
```

还是这样做更好

```
$CookieFile = 'cookies/'. uniqid() . '.txt';
file_put_contents($CookieFile, '');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $Url);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $PostData1);
curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFile);
curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFile);
$result1 = curl_exec($ch);
curl_close($ch);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $Url);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $PostData2);
curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFile);
curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFile);
$result2 = curl_exec($ch);
curl_close($ch); 
```

我不太确定哪个版本更好，我有点担心饼干。或者有没有我没想到的更好的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:17:42.557

使用第一个并添加以下 curl 选项：

```
curl_setopt($ch, CURLOPT_FORBID_REUSE, 0);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 0);
curl_setopt($ch, CURLOPT_AUTOREFERER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "valid user agent"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:34:25.837

第一个更好，因为它可以利用`Keep-Alive`.

第二个选项每次打开/关闭http连接，这个TCP握手比较耗时

注意：这仅与与同一服务器建立的连接有关，当然......

# android - 不同版本的不同图标

> ID：11124996
> 
> 赞同：0
> 
> 时间：2012-06-20T17:31:45.570
> 
> 标签：android, icons

ICS 设备和 3.0 及以前的设备是否可以使用不同的图标？

创建自定义图标时，我创建了一些 2.3 风格的图标，只是为了看到它们与我使用的其他系统图标形成对比，这些图标依赖于版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:39:40.353

将图标放在不同的文件夹中，API 级别后缀如下：

```
drawable-hdpi-v9 
```

[查看文档](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)以获取有关这种指定资源的方法的更多信息。

# android - Android：LinearLayout - 未指定垂直或水平

> ID：11124999
> 
> 赞同：9
> 
> 时间：2012-06-20T17:31:53.557
> 
> 标签：android, layout

我正在关注一个教程，我注意到有一个未指定垂直或水平的线性布局。我在另一个教程中被告知它基本上是必需的......两者都没有是什么意思？不好吗？这被另一个 DID 的线性布局包围

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/group"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/add"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add New" 
            android:onClick="onClick"/>

        <Button
            android:id="@+id/delete"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Delete First" 
            android:onClick="onClick"/>

    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T17:34:50.663

它只是意味着`orientation`默认为`horizontal`. 所以如果属性不存在，那么线性布局就是*水平*线性布局。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T08:48:07.083

当未`orientation`指定[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)时，它使用**默认值**，即`horizontal`.

根据[官方文档](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aorientation)：

> **机器人：方向**
> 
> 布局应该是一列还是一行？对一行使用“水平”，对一列使用“垂直”。默认为水平。

[在LinearLayout 的类概述中](http://developer.android.com/reference/android/widget/LinearLayout.html)也提到过：

> **类概述**
> 
> 将其子项排列在单列或单行中的布局...默认方向是水平的。

还有在[`setOrientation()`](http://developer.android.com/reference/android/widget/LinearLayout.html#setOrientation%28int%29)：

> **公共无效setOrientation（int方向）**
> 
> ...
> 
> 参数
> 
> *方向*           通过水平或垂直。默认值为水平。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T18:22:52.813

线性布局的默认方向是“水平”