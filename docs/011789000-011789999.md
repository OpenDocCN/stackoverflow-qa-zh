# StackOverflow 问答 11789000-11789999

# android-preferences - 首选项属性无法正常工作

> ID：11789002
> 
> 赞同：0
> 
> 时间：2012-08-03T03:47:42.270
> 
> 标签：android-preferences

我正在尝试以如下所示的方式从首选项文件中读取属性：

```
boolean status = attrs.getAttributeBooleanValue(PREFERECES_NS, ATTR_DEFAULT_VALUE, false) 
```

我无法弄清楚为什么状态变量总是假的，不管在首选项文件中分配给属性的值是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:49:30.897

我从来没有使用 getAttributeBooleanValue() 方法解决过这个问题。但是，此问题的解决方法是：

```
attributes = context.obtainStyledAttributes(attrs,R.styleable.yourFullPackageName_ClassName);

status = attributes.getBoolean(R.styleable.yourFullPackageName_ClassName_YourAttributeNameFromPreferencesFile, false); 
```

# sql - 使用 4 个表获取数据

> ID：11789007
> 
> 赞同：0
> 
> 时间：2012-08-03T03:48:05.277
> 
> 标签：sql, postgresql

我有以下表格：

```
trendingtopic
  id
  name

trendingtopiccycle
  id
  trendingtopic_id(FK)

tweet
  id 
  text
  tt_cycle_id(FK)
  user_id(FK)

user
  id
  rank 
```

我想知道是否有一种方法可以有效地检索每个热门话题的排名较高的用户发出的推文。

这是我当前的查询：

```
 SELECT tt."name",
  MAX(tu."actual_rank") AS rank,tu."name"
  FROM "trendingtopics_twitteruser" tu
  LEFT JOIN "trendingtopics_tweet" tw ON tu."id" = tw."user_id" 
  LEFT JOIN "trendingtopics_trendingtopiccycle" ttc ON tw."tt_cycle_id" = ttc."id"
  LEFT JOIN "trendingtopics_trendingtopic" tt ON ttc."tt_id" = tt."id" 
  GROUP BY tt."name" 
```

它不起作用，因为根据 Postgresql：'“tu.name”必须出现在 GROUP BY 子句中或在聚合函数中使用'。

如果我将 tu."name" 添加到 GROUP BY 子句中，我最终会得到如下内容：

```
"106 & Park";0;"910Prince"
"106 & Park";0;"ActressAlexiss"
"106 & Park";0;"AmeliaThirlwall"
"106 & Park";0;"_ArielIvy"
"106 & Park";0;"_AyyeVce"
"106 & Park";0;"barcastuff"
"106 & Park";0.42141;"pareexo"
"106 & Park";0.0363;"khleosupporters"
"#15ThingsAboutMyCrush";0;"_ALoyalLady"
"#15ThingsAboutMyCrush";0.22275;"AmberrNikole"
"#15ThingsAboutMyCrush";0;"a_paigeturner"
"#15ThingsAboutMyCrush";0.33942018;"ArleneAndrea_xo" 
```

但我想得到的是：

```
"106 & Park";0.42141;"pareexo"
"#15ThingsAboutMyCrush";0.33942018;"ArleneAndrea_xo" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:02:31.913

实际上，这可以很容易地在子查询中使用窗口函数来完成：

```
SELECT t."topic_name", t."rank", t."user_name"
FROM 
    (SELECT tt."name" AS topic_name, tu."actual_rank" AS rank, tu."name" AS user_name,
        row_number() OVER (PARTITION BY tt."name" ORDER BY tu."actual_rank" DESC) user_rank
    FROM "trendingtopics_trendingtopic" tt
    LEFT JOIN "trendingtopics_trendingtopiccycle" ttc ON ttc."tt_id" = tt."id"
    LEFT JOIN "trendingtopics_tweet" tw ON tw."tt_cycle_id" = ttc."id"
    LEFT JOIN "trendingtopics_twitteruser" tu ON tu."id" = tw."user_id") t
WHERE t."user_rank" = 1 
```

此外，我对连接进行了重新排序，以便您从热门话题而不是 twitter 用户开始。由于您正在尝试为热门主题获取排名最高的用户，因此（至少对我而言）将其作为源表开始更有意义。

有关窗口函数和分区的更多信息，请访问此处：[http ://www.postgresql.org/docs/8.4/static/tutorial-window.html](http://www.postgresql.org/docs/8.4/static/tutorial-window.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:37:11.577

*最快*的解决方案可能是使用`DISTINCT ON`而不是窗口函数。

```
SELECT DISTINCT ON (tt."name")
    tt."name", tu."actual_rank" AS rank, tu."name"
  FROM "trendingtopics_twitteruser" tu
  LEFT JOIN "trendingtopics_tweet" tw ON tu."id" = tw."user_id" 
  LEFT JOIN "trendingtopics_trendingtopiccycle" ttc ON tw."tt_cycle_id" = ttc."id"
  LEFT JOIN "trendingtopics_trendingtopic" tt ON ttc."tt_id" = tt."id" 
  ORDER BY tt."name", tu."actual_rank" DESC; 
```

顺便说一句，这是未经测试的，因为您没有提供语句来实际创建和加载您描述的表。如果您*确实*在问题中提供了此类内容，人们通常会在发布之前测试他们的答案，并且您不会有愚蠢的错误需要处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:34:52.080

```
SELECT tt."name",
  MAX(tu."actual_rank") AS rank,MAX(tu."name") as name_1
  FROM "trendingtopics_twitteruser" tu
  LEFT JOIN "trendingtopics_tweet" tw ON tu."id" = tw."user_id" 
  LEFT JOIN "trendingtopics_trendingtopiccycle" ttc ON tw."tt_cycle_id" = ttc."id"
  LEFT JOIN "trendingtopics_trendingtopic" tt ON ttc."tt_id" = tt."id" 
  GROUP BY tt."name" 
```

# iphone - 在objective-c中调用c函数时内存不释放

> ID：11789011
> 
> 赞同：1
> 
> 时间：2012-08-03T03:48:52.847
> 
> 标签：iphone, ios

我正在开发一个包含基于 C 的核心模块并使用可可触摸来实现 UI 的应用程序。我将调用 c 模块来获取数据以显示在屏幕上，但在那之后，内存似乎没有被释放。我用剖析工具观察泄漏，并没有出现泄漏。*但是All Allocations*的 Total Bytes 字段在发布后不会减少。也就是说，如果我多次重复操作，每次都会增加内存，最终导致应用程序崩溃。

这是我使用的代码。

```
In Interface ( ClassA.m file)

-(NSString*) getName:(int) index{
    int len = get_name_len(index);
    char* name = malloc(len); // name[len-1] indicate NULL CHAR
    get_name(name,index,len);
    NSString *result = [NSString stringWithUTF8String:name];
    free(name);
    name = nil;
    return result;
}

In UI (.m file)

@property (nonatomic, retain) NSString* name;

...

-(void) update {
self.name = [ClassA getName:0];
}

...

-(void) dealloc{
self.name = nil;
[super dealloc];
} 
```

我有大约 100 个数据。如果我调用 self.name = [ClassA getName:0]。它会增加一些内存并且在我调用 self.name = nil 后不会释放。然后，如果我调用 self.name = [ClassA getName:1]。它会再次增加。但是如果我多次调用同一个 self.name = [ClassA getName:0] ，它只会增加一次。（在再次调用这个函数之前，我会先调用 self.name = nil）。

太奇怪了。

我也尝试：

```
[ClassA getName:0];
self.name = [NSString* stringWithString@"ABC"]; 
```

然后，内存将被正确释放。

我认为这可能表明 self.name 和 function:getName() 的内存管理应该没问题。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:38:42.900

跟进我的评论...您有以下内容（在您的 UI .m 文件中）：

```
@property (nonatomic, reatin) NSString* name; 
```

它应该是：

```
@property (nonatomic, retain) NSString* name; 
```

您拼写错误的关键字`retain`。

# go - 在 Go 中实现一个基本的 ORM

> ID：11789012
> 
> 赞同：0
> 
> 时间：2012-08-03T03:49:05.373
> 
> 标签：go

我正在尝试为我正在开发的数据应用程序设计一个基本的 ORM。我对我提出的模型的问题有两个：

*   这是数据库跟踪的“最佳”最“有效”模型吗？
*   这是惯用的围棋吗？

这个想法是在应用程序启动时将数据库的完整模型加载到内存中。使用此模型生成一个带有每个对象的 crc32 散列的映射（对应于数据库中的一行）。这就是我们用来与模型进行比较的方法，以明确在调用 .save() 时所做的更改。

以下第一部分生成 crc32 映射，第二部分引入随机更改，最后一部分将是 .save() 的一部分，用于将 db 更改写入磁盘

编码：

```
func main() {
    // Read data off of disk into memory
    memDB := ddb

    // Create hash map of memDB
    peopleMap := make(map[int]uint32)
    for _, v := range memDB.people {
        // make row into byte array, looks kludgy
        hash := []byte(fmt.Sprintf("%#v", v))
        peopleMap[v.pID] = crc32.ChecksumIEEE(hash)
        fmt.Printf("%v: %v %v \t(%v %v) - crc sum: %v\n",
            v.pID, v.fName, v.lName, v.job, v.location,
            peopleMap[v.pID])
    }
    fmt.Println("\n# of people in memory:", len(memDB.people))

    // Sometime later, we need to delete Danielle, so
    // Delete in memory:
    var tmpSlice []ddPerson
    for _, v := range memDB.people {
        if v.fName == "Danielle" {
            continue
        }
        tmpSlice = append(tmpSlice, v)
    }
    memDB.people = tmpSlice
    fmt.Println("# of people in memory:", len(memDB.people))

    // Okay, we save in-memory representation mem.DB back
    // to disk with some kind of .save() assertion
    // a len(peopleMap) comparison to len(memDB.people) will
    // tell us there has been a change for INSERTS and
    // DELETES, but it won't tell us about updates or which
    // record was inserted or deleted

    // First, check for additions
    if len(peopleMap) < len(memDB.people) {
        // Code to find and add person to disk db ddb here
        fmt.Println("Adding someone to disk database...")
    } else if len(peopleMap) > len(memDB.people) {
        // Check for deletions
        fmt.Println("Purging someone from disk database...")
    }

    // in any case, recheck hashes
    tMap := make(map[int]uint32)
    for _, v := range memDB.people {
        hash := []byte(fmt.Sprintf("%#v", v))
        t := crc32.ChecksumIEEE(hash)
        // Add to temporary map
        tMap[v.pID] = t
        // And check for changes
        if t != peopleMap[v.pID] {
            fmt.Println("Change detected in in-memory model...")
            fmt.Println("Writing changes to disk db now")
            // Writing any changes to DB here
            ddb.people = memDB.people
        }
    }

    // 'Fix' our hashmap checker deal
    peopleMap = tMap

    // Carry on
} 
```

有一个工作版本：[http ://play.golang.org/p/XMTmynNy7t](http://play.golang.org/p/XMTmynNy7t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:14:02.343

您已经实现了数据库的内存缓存，这与 ORM 并不完全相同。

你所拥有的有几个问题：

*   如果其他一些进程/应用程序曾经修改过数据库，那么您的内存模型将会过时。这可能会导致您的写入破坏对数据库的写入，因为您不知道您的缓存已过时。
*   如果数据库变大，您的应用程序将相应变大。

大多数 ORM 提供了一种将类型（例如结构）映射到数据库读写的方法。这允许您从数据库中读取单个对象并对其进行修改，然后将该对象写回数据库。这可能是一个更好的方法。

至于你的走是多么地道，我没有看到明显的非地道走，但也没有太多的事情发生。顶部`memDb := ddb`是一个函数调用，但后面没有括号。这是一个语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:08:01.167

在加载数据时生成校验和，在保存数据时再次生成对我来说似乎效率很低。

大多数使用数据库后端的 Web 应用程序直接对数据库进行更改。但显然您希望有一个单独的“保存”操作，以便用户可以退出他的更改......？

您是否考虑过使用交易？您可以在用户开始编辑数据时发出 BEGIN TRANSACTION 命令。然后，当他按下“保存”时，您将发出 COMMIT 命令，将更改永久存储在数据库中。如果用户退出他的更改或退出而不保存，您将发出 ROLLBACK 命令。

这里的问题与其说是关于 Go 的惯用用法，不如说是关于 SQL 的惯用用法。

# r - 将 xts 对象中的所有列乘以另一个单列 xts 对象

> ID：11789022
> 
> 赞同：3
> 
> 时间：2012-08-03T03:50:20.347
> 
> 标签：r, xts

```
library(xts)
set.seed(1)
x = xts( cbind(a=1:10,b=20:11) , Sys.Date()+1:10 )
y = xts( runif(10) , Sys.Date()+1:10 )
z = x*y 
```

在 (x, y) 中给我*错误`*.default`：不一致的数组*

我想要的是将 x 中的每一列乘以 y 中的值。

预期结果：

```
 a         b
2012-08-04 0.2655087  5.310173
2012-08-05 0.7442478  7.070354
2012-08-06 1.7185601 10.311361
2012-08-07 3.6328312 15.439532
2012-08-08 1.0084097  3.226911
2012-08-09 5.3903381 13.475845
2012-08-10 6.6127269 13.225454
2012-08-11 5.2863823  8.590371
2012-08-12 5.6620264  7.549369
2012-08-13 0.6178627  0.679649 
```

理想情况下，解决方案应该在`index(x)!=index(y)`

旁白：我想出了这个技巧：

```
 z = xts( apply(x,2,function(col) col*y ) , index(x) ) 
```

它适用于测试数据，但在我的真实数据上它抱怨*错误数组（ans，c（len.a％/％d2，d.ans），if（！all（vapply（dn.ans，is.null） , : 'dimnames' [1] 的长度不等于数组范围* （我还没有设法在一小段测试数据中重现这一点。）

Joshua 和 DWin 的答案不存在这个问题，因此不仅在简洁性上而且在结果质量上都非常出色！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:43:55.543

如果您只是删除单列 xts 对象的尺寸，它应该可以工作。然后R的回收规则可以接管。这比[DWin 的解决方案](https://stackoverflow.com/a/11789265/271616)略好，因为如果`index(x) != index(y)`.

```
R> (z <- x*drop(y))
                   a         b
2012-08-03 0.2655087  5.310173
2012-08-04 0.7442478  7.070354
2012-08-05 1.7185601 10.311361
2012-08-06 3.6328312 15.439532
2012-08-07 1.0084097  3.226911
2012-08-08 5.3903381 13.475845
2012-08-09 6.6127269 13.225454
2012-08-10 5.2863823  8.590371
2012-08-11 5.6620264  7.549369
2012-08-12 0.6178627  0.679649
R> (z1 <- x*drop(y[1:5]))
                   a         b
2012-08-03 0.2655087  5.310173
2012-08-04 0.7442478  7.070354
2012-08-05 1.7185601 10.311361
2012-08-06 3.6328312 15.439532
2012-08-07 1.0084097  3.226911 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T18:50:57.903

不像[JoshuaUlrich 的回答](https://stackoverflow.com/a/11789393/967840)那么圆滑，但是为了展示不同的东西，您可以使用`sweep`

```
sweep(x, 1, y, "*")
#                   a         b
#2012-08-04 0.2655087  5.310173
#2012-08-05 0.7442478  7.070354
#2012-08-06 1.7185601 10.311361
#2012-08-07 3.6328312 15.439532
#2012-08-08 1.0084097  3.226911
#2012-08-09 5.3903381 13.475845
#2012-08-10 6.6127269 13.225454
#2012-08-11 5.2863823  8.590371
#2012-08-12 5.6620264  7.549369
#2012-08-13 0.6178627  0.679649 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T04:27:48.547

将 y 对象变成普通向量：

```
> z <-  x * c(coredata(y))
> z
                      a             b
2012-08-03 0.2655086631  5.3101732628
2012-08-04 0.7442477993  7.0703540931
2012-08-05 1.7185600901 10.3113605403
2012-08-06 3.6328311600 15.4395324299
2012-08-07 1.0084096552  3.2269108966
2012-08-08 5.3903381098 13.4758452745
2012-08-09 6.6127268802 13.2254537605
2012-08-10 5.2863823399  8.5903713023
2012-08-11 5.6620263951  7.5493685268
2012-08-12 0.6178627047  0.6796489751 
```

# python - 使用 uuid 作为 url 的一部分是否会泄漏有关服务器的信息？

> ID：11789025
> 
> 赞同：1
> 
> 时间：2012-08-03T03:50:27.990
> 
> 标签：python, uuid

例如，使用`uuid.uuid1()`（使用 MAC 地址）是否会使服务更容易受到攻击？我只想为我的异步任务创建一个唯一的 ID。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:56:02.590

我不认为泄露服务器的 MAC 地址真的是个问题，因为没有人会与服务器在同一个本地子网上，在那里你可以做任何恶意的事情。

但是，如果您担心，为什么不在 python 中使用其他 UUID 之一呢？

*   [`uuid.uuid4()`](http://docs.python.org/library/uuid.html#uuid.uuid4)- 生成随机 UUID。
*   [`uuid.uuid5(namespace, name)`](http://docs.python.org/library/uuid.html#uuid.uuid5)- 根据命名空间标识符（UUID）和名称（字符串）的 SHA-1 哈希生成 UUID。

# iphone - 获取用户在 iPhone 视图中向前和向后平移的时间间隔

> ID：11789030
> 
> 赞同：0
> 
> 时间：2012-08-03T03:50:47.027
> 
> 标签：iphone, objective-c

如果这对你来说是一个简单的问题，我很抱歉。但我卡在这里。

我在视图中添加了平移手势。

当用户在视图中向前和向后平移时，我坚持要获得时间间隔的点。

现在我用这段代码来获取时间间隔，

```
if ([sender state] == UIGestureRecognizerStateBegan )
        {
            startTime = [[NSDate alloc]init];}

else if([sender state] == UIGestureRecognizerStateChanged ) 
        {         
            CGPoint velocity = [sender velocityInView:self.imageView];

            if(velocity.x > 0)
            {

                NSLog(@"gesture went right");
            }
            else
            {

                NSLog(@"gesture went left");
            }

            double chagedTime = [startTime timeIntervalSinceNow] * -1000.0;
            NSLog(@"%f changed ",chagedTime);
} 
```

现在我得到了用户开始向前平移的时间间隔，但问题是假设当用户开始向后平移时，时间间隔也在增加。

那么如何在向前平移时增加时间间隔，在向后平移时减少时间间隔。

希望得到您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:29:33.277

如果我正确阅读了您的问题，您希望记录用户向前平移的时间，并从中减去用户向后平移的时间。

```
//Declared:
double netTimeInterval;
double previousStartTime;

if ([sender state] == UIGestureRecognizerStateBegan )
    netTimeInterval = 0;
else if([sender state] == UIGestureRecognizerStateChanged )
{
    CGPoint velocity = [sender velocityInView:sender.view];
    double changedTime;
    changedTime = (velocity.x > 0)? (CFAbsoluteTimeGetCurrent()-previousStartTime):(previousStartTime-CFAbsoluteTimeGetCurrent());
    //Conversion from seconds to microseconds
    changedTime *=1000;

    netTimeInterval += changedTime;
    NSLog(@"%f",changedTime);
    NSLog(@"%f",netTimeInterval);
}
previousStartTime = CFAbsoluteTimeGetCurrent(); 
```

# python - 如何在 Django 的 ManyToManyField 上自动创建对称对象？

> ID：11789035
> 
> 赞同：6
> 
> 时间：2012-08-03T03:51:36.810
> 
> 标签：python, django, django-models, django-admin

我想在我的模型上创建一个对称关系，并在关系中添加一个字段。我遇到了[这个博客](http://charlesleifer.com/blog/self-referencing-many-many-through/)（以及[另一个博客](http://www.caktusgroup.com/blog/2009/08/14/creating-recursive-symmetrical-many-to-many-relationships-in-django/)），并按照步骤创建了我自己的模型。

```
class CreditCardIssuer(models.Model):
    name = models.CharField(_('name'), max_length=256)
    transfer_limits = models.ManyToManyField('self', through='Balancetransfer', related_name='no_transfer_allowed+', symmetrical=False, help_text=_('List of issuers to which balance transfer is not allowed.'))

    def add_balancetransfer(self, creditcardissuer, until):
        balance_transfer, _newly_created = Balancetransfer.objects.get_or_create(
            no_transfer_from=self,
            no_transfer_to=creditcardissuer,
            until=until)
        balance_transfer, _newly_created = Balancetransfer.objects.get_or_create(
            no_transfer_from=creditcardissuer,
            no_transfer_to=self,
            until=until)
        return balance_transfer

    def remove_balancetransfer(self, creditcardissuer, until):
        Balancetransfer.objects.filter(
            no_transfer_from=self, 
            no_transfer_to=creditcardissuer,
            until=until).delete()
        Balancetransfer.objects.filter(
            no_transfer_from=self, 
            no_transfer_to=creditcardissuer,
            until=until).delete()
        return

    def get_transfer_limits(self, until):
        return self.transfer_limits.filter(
            no_transfer_to__until=until, 
            no_transfer_to__no_transfer_from=self)

class Balancetransfer(models.Model):
    no_transfer_from = models.ForeignKey('CreditCardIssuer', related_name='no_transfer_from')
    no_transfer_to = models.ForeignKey('CreditCardIssuer', related_name='no_transfer_to')
    until = models.IntegerField(blank=True, null=True, help_text='Minimum card ownership period to allow balance transfer.')

    class Meta:
        unique_together = ('no_transfer_from', 'no_transfer_to') 
```

但是当我从管理员创建关系时，只创建了一个。你能帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:24:07.483

你说你在 Django 管理员中有一半（你没有说如何，但除非你发布代码，否则我会假设它有效）：剩下的步骤是设置缺少的一半关系.

我怀疑如果你在你的`add_balancetransfer()`方法 ( `import pdb; pdb.set_trace()`) 中放置一个断点，你会发现它永远不会被调用——创建的关系部分*是*通过内置的 Django 管理行为完成的。

简而言之，您可能只需要在`add_balancetransfer()`保存模型时调用自己 - 或者更好的是，只添加缺失关系的不同版本。

一种方法是[覆盖模型的`save()`方法](https://docs.djangoproject.com/en/1.4/topics/db/models/#overriding-model-methods)，但这可能有点脆弱。[对于您的情况，在模型的`post_save`信号](https://docs.djangoproject.com/en/1.4/ref/signals/#post-save)中填充缺失的关系可能会更好：

```
from django.db.models.signals import post_save
from django.dispatch import receiver

from yourapp.models import CreditCardIssuer

@receiver(post_save, sender=CreditCardIssuer)
def add_missing_relationship(sender, **kwargs):
    # Add the other side of what should be a symmetrical relationship
    ... 
```

# r - R 是否有像 Java 的 PriorityQueue 这样的优先级队列？

> ID：11789038
> 
> 赞同：8
> 
> 时间：2012-08-03T03:52:37.733
> 
> 标签：r, priority-queue

我正在寻找一个通用的优先级队列`R`。R 是否有任何通用优先级队列实现（包），如 Java`PriorityQueue`类或 Python `heapq`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-26T05:51:35.087

我继续并实现了一个基本队列作为 R 参考类。详细信息可以在[这里](http://www.exegetic.biz/blog/2013/11/implementing-a-queue-as-a-reference-class/)找到。它已被扩展以处理优先级队列，如此[处](http://www.exegetic.biz/blog/2013/11/deriving-a-priority-queue/)所述。

基本和优先队列实现现在可以作为 CRAN 上的[liqueueR](https://cran.r-project.org/web/packages/liqueueR/index.html)包使用，在[GitHub 上](https://github.com/DataWookie/liqueueR)有开发版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T23:37:15.190

[您可以使用Rosetta Code](http://rosettacode.org/wiki/Priority_queue#R)中的以下实现，但请注意插入需要 O(n log n)

```
PriorityQueue <- function() {
  keys <<- values <<- NULL
  insert <- function(key, value) {
    temp <- c(keys, key)
    ord <- order(temp)
    keys <<- temp[ord]
    values <<- c(values, list(value))[ord]
  }
  pop <- function() {
    head <- values[[1]]
    values <<- values[-1]
    keys <<- keys[-1]
    return(head)
  }
  empty <- function() length(keys) == 0
  list(insert = insert, pop = pop, empty = empty)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:08:06.553

你可以很容易地自己创建它，或者使用类（引用类最适合），或者使用`data.frame`带有自定义类型的 a ，并结合一些对其进行操作的函数（`add_to_queue(element, queue_object, priority)`, `get_item(queue_object)`）。在引用类的情况下，这些函数将是方法。我更喜欢参考类解决方案，因为它将状态和逻辑都存储在一个地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-07T22:10:09.710

Checkout the package collections: [https://cran.r-project.org/web/packages/collections/index.html](https://cran.r-project.org/web/packages/collections/index.html)

```
q <- PriorityQueue()
q$push("not_urgent")
q$push("urgent", priority = 2)
q$push("not_as_urgent", priority = 1)
q$pop() # urgent
q$pop() # not_as_urgent
q$pop() # not_urgent 
```

EDIT: update syntax for collection v0.2.0

# c# - 将网页图像添加到 pdf

> ID：11789043
> 
> 赞同：4
> 
> 时间：2012-08-03T03:52:57.897
> 
> 标签：c#, itextsharp

我正在尝试使用 iTextSharp 将网络图像添加到 pdf

我正在尝试使用与本地图像相同的代码

```
using (var pdfDoc = new Document()) 
using (var pdfWriter = PdfWriter.GetInstance(pdfDoc, pdfStream)) { 
    pdfDoc.Open();
    Image tif = Image.GetInstance("www.myimage.com");
    pdfDoc.Add(tif);
    pdfDoc.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:08:45.777

您必须先发出 http 网络请求才能下载图像。

```
public Image DownloadImageFromURL(string url)
{
   HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(filename);
   httpWebRequest.AllowWriteStreamBuffering = true;            
   httpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";            
   httpWebRequest.Timeout = 30000; //30 seconds
   webResponse = httpWebRequest.GetResponse();    
   webStream = webResponse.GetResponseStream();
   Image downloadImage = Image.FromStream(webStream);            
   webResponse.Close();   
   return downloadImage;
}

//in your code
    using (var pdfDoc = new Document()) 
using (var pdfWriter = PdfWriter.GetInstance(pdfDoc, pdfStream)) { 
    pdfDoc.Open();
    Image tif = DownloadImageFromURL("www.myimage.com");
    pdfDoc.Add(tif);
    pdfDoc.Close();
} 
```

使用此方法发出 HttpWebRequest 并下载图像。现在把它写成pdf。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:21:28.907

与其他发布的答案相反，您**不需要**发出单独的 HTTP 请求。只需确保在调用时使用[绝对 URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier#Examples_of_absolute_URIs)`Image.GetInstance()`：

```
string url = "http://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Pollinationn.jpg/320px-Pollinationn.jpg";
using (Document document = new Document()) {
  PdfWriter.GetInstance(document, Response.OutputStream);
  document.Open();
  Image img = Image.GetInstance(url);
  document.Add(img);
} 
```

这[对于重载的方法调用有明确的记录](http://itextsupport.com/apidocs/itext5/latest/com/itextpdf/text/Image.html#getInstance-java.net.URL-)。

# xamarin.ios - 寻找使用 MonoTouch 调用 Json Web 端点的示例项目

> ID：11789047
> 
> 赞同：0
> 
> 时间：2012-08-03T03:53:28.043
> 
> 标签：xamarin.ios, webclient, json.net, restsharp

我是 MonoTouch 的新手，一直在努力尝试发布到将 JSON 返回给我的网站。在 MonoTouch 示例站点中，有剪切和粘贴的示例，但我找不到工作项目。RestSharp 看起来不错，但我一直找不到任何包含工作示例的 IOS 项目。我知道这应该很简单，只需剪切和粘贴代码，System.dll 具有 System.Net 名称空间，但对我来说，我不断得到未解决的引用。我可以运行的一个工作示例将有很长的路要走。哪怕只是一个微不足道的例子。我可以添加我自己的所有复杂的东西。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:49:05.090

这是我在 System.JSON 命名空间中使用的代码片段：

```
public JsonValue Post(string address) {

    JsonValue value = null;
    try
    {
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(address);
        req.Method = "POST";

        JsonObject postJson = new JsonObject();
        foreach (KeyValuePair<string, string> val in this.FormParams) 
            postJson.Add(new KeyValuePair<string, JsonValue>(val.Key, new JsonPrimitive(val.Value)));

        byte[] postData = new ASCIIEncoding().GetBytes(postJson.ToString());

        req.ContentLength = postData.Length;

        Stream dataStream = req.GetRequestStream();
        dataStream.Write(postData, 0, postData.Length);
        dataStream.Close();

        using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse()) 
        {
            using (StreamReader reader = new StreamReader (resp.GetResponseStream ())) 
            {
                value = JsonValue.Load(reader);
            }
        }
    }
    catch (Exception ex)
    {
        _lastError = ex.Message;
        Log.Error(String.Format("Exception on JsonHandler::Post(action): {0}", ex.Message)); 
    }
    return value;
} 
```

其中“action”是要访问的地址，例如[http://service-address.com/json/users](http://service-address.com/json/users) 而“this.FormParams”是一个包含 post-data 的列表。它将返回一个可以包含各种 JSON 对象的 JsonValue。

# c - 如何在结构中打包结构

> ID：11789049
> 
> 赞同：1
> 
> 时间：2012-08-03T03:53:38.513
> 
> 标签：c, compiler-construction, padding, linux-device-driver

让我更清楚一点，我想填充一个内部结构我该怎么做..？例子-

`struct b`在哪里

```
struct b{
  u_int32_t aa;
  u_int32_t bb;
};

struct c{
  u_int64_t cc;
}; 
```

现在，我的编译器在结构 d 中的结构 b 和 c 之间填充 8 个字节。那么，我该如何摆脱它呢？

希望，现在清楚了。有人可以给我答案吗？

结构化的{

```
struct b;

struct c; //I want to make this structure a padded one, how to go about it?

struct c;

} 
```

拜托，有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:29:42.770

从标签中，我推断你在 linux 上。GCC 识别以下属性：

```
__attribute__((packed)) 
```

您可以在结构声明之前或之后编写它以删除填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T09:36:16.383

事实上，**它没有**在 b 和 c 之间放置任何填充。

让我们看看为什么，

都是`u_int32_t`32 位 => 4 字节。现在 的大小`struct b`将是 8 个字节（4 个因为 aa，4 个因为 bb）。此外， 的大小`struct c`也是 8 个字节。

因此，当`struct d`制作时，两者`struct b`和`struct c`一个接一个地依次放置。next`struct c`直接放在 previous 之后`struct c`。

但是**在 final** `struct c`和`struct d`. 这是因为，如果`struct d`要在内存中放置多个，则第二个`struct d`将从 24 而不是 32 的内存位置开始（这很方便）。

如果您想了解更多信息：[C 结构打包的失落艺术](http://www.catb.org/esr/structure-packing/)

# c# - 使用blink c#时捕获用户提交数据的时间

> ID：11789050
> 
> 赞同：0
> 
> 时间：2012-08-03T03:53:41.547
> 
> 标签：c#, time, timer

![在此处输入图像描述](../Images/de72478a4cff720902a2498b1c8827a8.png) ![在此处输入图像描述](../Images/332222dd58f4ad7c8a6bade0fcaa32cd.png) ![在此处输入图像描述](../Images/d197724eba6599c6f96f639861c7aaff.png)

那是我的界面，其中包含日期、时间和名称的列表框。这个界面显示时间一直在变化，但其他数据保持不变。

名称的数据由用户使用套接字接收。无论如何，数据获取的位置在这里不是问题。

我将数据设置为闪烁显示，我将时间设置为真。每次用户发送数据时，它都会自动显示出来。在这里，我们将知道用户发送了新数据。如果没有发送新数据，它应该出现旧数据或只是一个空列表框。

然而，时间总是在变。它不是静态的。它会不断改变时间。我无法获得我们接收数据的具体时间。

这是我的代码。

```
private void button1_Click_2(object sender, EventArgs e)
    {           
        listBox1.Items.Clear();//date
        listBox2.Items.Clear();//time
        listBox3.Items.Clear();//level
        listBox4.Items.Clear();//name

        pictureBox1.Refresh();

        //retrieve date
        DateTime dt = DateTime.Now;
        DateTime saveNow = dt.Date;
        string shortDate = dt.ToShortDateString();
        //retrieve time
        int hours = DateTime.Now.Hour;
        int minutes = DateTime.Now.Minute;
        int seconds = DateTime.Now.Second;             

        for (int i = 0; i <= _server.Q.NoOfItem - 1; i++)
        {                
            String time = hours + ":" + minutes + ":" + seconds;
            String words = _server.Q.ElementAtBuffer(i).ToString();
            String[] berjaya = words.Split(new char[] { ',', '[', ']', ' ' });                                               

            listBox1.Items.Add(shortDate);
            listBox2.Items.Add(time);
listBox4.Items.Add(berjaya[3]);//name 
```

接收的数据被拆分到每个自己的列表框。

拆分数据并在每个列表框中查看后，我将所有数据保存在 xml 文件中。这是我的代码。

```
XmlDocument xmlDoc = new XmlDocument();
                xmlDoc.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
                XmlElement contentElement = xmlDoc.CreateElement("Patient");

                XmlElement levelEl = xmlDoc.CreateElement("LevelPriority");
                XmlText xmlText = xmlDoc.CreateTextNode(berjaya[1]);
                levelEl.AppendChild(xmlText);
                contentElement.AppendChild(levelEl);
                xmlDoc.DocumentElement.AppendChild(contentElement);

                XmlElement nameEl = xmlDoc.CreateElement("Name");
                nameEl.InnerText = berjaya[3];
                contentElement.AppendChild(nameEl);
                xmlDoc.DocumentElement.AppendChild(contentElement); 
```

xml 文件放在一起`for (int i = 0; i <= _server.Q.NoOfItem - 1; i++)` 考虑这样做。

```
 if(berjaya[3] != null){
       //put the code above
} 
```

但是，时间还会继续……我的想法行不通。有什么办法吗？

# java - 为什么我的代码在 ideone.com 中不起作用？

> ID：11789057
> 
> 赞同：3
> 
> 时间：2012-08-03T03:55:05.843
> 
> 标签：java

```
import java.util.Scanner;
public class Admit {

    // the main method has minimal dialogue and just calls the other methods with the appropriate parameters.
    public static void main(String[] args) {
        promptUser();
        System.out.println("Information for the first applicant:");
        double person1Score = getAllResults();
        System.out.println();
        System.out.println("Information for the second applicant");
        double person2Score = getAllResults();
        System.out.println("First applicant's overall score  = " + person1Score);
        System.out.println("Second applicant's overall score = " + person2Score);
        compareScores (person1Score, person2Score);

    }

    // promptUser() introduces the program and what it's used for.
    public static void promptUser() {
        System.out.println("This program compares two applicants to");
        System.out.println("determine which one seems like the stronger");
        System.out.println("applicant. For each candidate I will need");
        System.out.println("either SAT or ACT scores plus a weighted GPA.");
        System.out.println();
    }

    // getAllResults() calculates the applicant's overall score to be compared,
    // depending on whether the user submitted SAT or ACT scores.
    public static double getAllResults() {
        Scanner userInput = new Scanner(System.in);
        System.out.print("\tDo you have 1) SAT scores, or 2) ACT scores? ");
        int testType = userInput.nextInt();
        // @var vinalScore is just storing an arbitrary value for now.
        double finalScore = 0;
        if (testType == 1) {
            System.out.print("\tSAT Math? ");
            int SATMath = userInput.nextInt();
            System.out.print("\tSAT Verbal? ");
            int SATVerbal = userInput.nextInt();
            System.out.print("\tActual GPA? ");
            double yourGPA = userInput.nextDouble();
            System.out.print("\tMax GPA? ");
            double maxGPA = userInput.nextDouble();
            double testScore = calculateSATScore(SATVerbal, SATMath);
            double finalGPA = calculateGPA(yourGPA, maxGPA);
            finalScore = calculateOverallScore(testScore, finalGPA);
        }
        else if (testType == 2) {
            System.out.print("\tACT English? ");
            int ACTEng = userInput.nextInt();
            System.out.print("\tACT Math? ");
            int ACTMath = userInput.nextInt();
            System.out.print("\tACT Reading? ");
            int ACTRead = userInput.nextInt();
            System.out.print("\tACT Science? ");
            int ACTSci = userInput.nextInt();
            System.out.print("\tActual GPA? ");
            double yourGPA = userInput.nextDouble();
            System.out.print("\tMax GPA? ");
            double maxGPA = userInput.nextDouble();
            double testScore = calculateACTScore(ACTEng, ACTMath, ACTRead, ACTSci);
            double finalGPA = calculateGPA(yourGPA, maxGPA); 
            finalScore = calculateOverallScore(testScore, finalGPA);
        }
        return finalScore;
    }

    // calculateSATScore() calculates the overall SAT score taken from getAllResults().
    public static double calculateSATScore(int verbal, int math) {
        double SATScore = (2 * verbal + math) / 24;
        return SATScore;
    }

    // calculateACTScore() calculates the overall ACT score taken from getAllResults().
    public static double calculateACTScore(int eng, int math, int read, int sci) {
        double ACTScore = ((2 * read) + eng + math + sci) / 1.8;
        return ACTScore;
    }

    // calculateGPA() calculates the final GPA taken from getAllResults().
    public static double calculateGPA(double uGPA, double mGPA) {
        double finalGPA = uGPA / mGPA * 100;
        return finalGPA;
    }

    // calculateOverallScore() computes the final scores to be compared, using the
    // overall test scores and the final GPA.
    public static double calculateOverallScore(double testScore, double GPA) {
        double overallScore = testScore + GPA;
        return overallScore;
    }

    // compareScores() compares the overall scores for each applicant and then prints out
    // which applicant appears to be the better choice.
    public static void compareScores (double person1, double person2) {
        if (person1 > person2) {
            System.out.println("The first applicant seems to be better.");
        }
        else {
            System.out.println("The second applicant seems to be better.");
        }
    }
} 
```

我不断收到一条错误消息，提示“Main.java:11: error: class Admit is public, 应该在名为 Admit.java public class Admit {' 的文件中声明

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:06:50.263

只需遵循示例 Java 代码：http: [//ideone.com/samples#sample_lang_10](http://ideone.com/samples#sample_lang_10)

将“public class Admit {”更改为“public class Main {”

您的应用程序可能无法运行，因为看起来您使用

```
 Scanner userInput = new Scanner(System.in); 
```

接收键盘输入，ideone.com 只接受 STDIN，可能 Scanner 不支持。

例如，当我运行修改后的代码时，出现以下错误：

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Scanner.java:838)
at java.util.Scanner.next(Scanner.java:1461)
at java.util.Scanner.nextInt(Scanner.java:2091)
at java.util.Scanner.nextInt(Scanner.java:2050)
at Main.getAllResults(Main.java:32)
at Main.main(Main.java:8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:26:50.447

你的代码工作得很好。您引用的错误是您的文件名与您的类名不匹配的问题。该文件需要命名为 Admit.java，因为您的类名为 Admit。

# php - 如何自定义 php-markdown 链接语法

> ID：11789058
> 
> 赞同：1
> 
> 时间：2012-08-03T03:55:09.307
> 
> 标签：php, markdown

链接可以通过以下方式定义：

```
[foo](http://foo)
//or
[foo][1]

[1]:http://foo 
```

您如何自定义[php-markdown](http://michelf.ca/projects/php-markdown/)以便您可以选择是否使用`rel="nofollow"`？就像是

`[foo](!http://foo "this is the title")`

在哪里`!`表示一个`rel="nofollow"`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:01:10.377

对于参考链接，请修改第[733 行周围的行](https://github.com/michelf/php-markdown/blob/b1bc42eb99bfb44b7b9d2c9f12a399a746dedd2e/markdown.php#L733)（在撰写本文时）以添加`nofollow`适当的内容。对于内联链接，修改[第 752 行](https://github.com/michelf/php-markdown/blob/b1bc42eb99bfb44b7b9d2c9f12a399a746dedd2e/markdown.php#L752)。

参考链接代码目前如下所示：

```
$url = $this->urls[$link_id];
$url = $this->encodeAttribute($url);

$result = "<a href=\"$url\"";
if ( isset( $this->titles[$link_id] ) ) {
    $title = $this->titles[$link_id];
    $title = $this->encodeAttribute($title);
    $result .=  " title=\"$title\"";
}

$link_text = $this->runSpanGamut($link_text);
$result .= ">$link_text</a>";
$result = $this->hashPart($result); 
```

内联链接代码看起来很相似。您需要添加一个检查是否`$url`以开头，`!`如果是，则将其剥离并`rel="nofollow"`放在`$result`.

# xslt - XSLT 将新行转换为

> ID：11789059
> 
> 赞同：1
> 
> 时间：2012-08-03T03:55:43.327
> 
> 标签：xslt, xslt-1.0

我无法让它工作。我已经看过所有关于堆栈溢出的示例并理解 xslt 代码。但由于某种原因，它正在替换我的空格字符而不是新行。

```
<t>Line1 Is here 
Line2 Is another 
Line3 Is some more 
</t> 
```

XSLT 模板是

```
<xsl:stylesheet version="1.0"  
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
 <xsl:output omit-xml-declaration="yes" indent="yes"/>  
 <xsl:template match="t">  
  <p>  
    <xsl:apply-templates/>  
  </p>  
 </xsl:template>  

 <xsl:template match="text()" name="insertBreaks">  
   <xsl:param name="pText" select="."/>  

   <xsl:choose>  
     <xsl:when test="not(contains($pText, '&#xA;'))">  
       <xsl:copy-of select="$pText"/>  
     </xsl:when>  
     <xsl:otherwise>  
       <xsl:value-of select="substring-before($pText, '&#xA;')"/>  
       <br />  
       <xsl:call-template name="insertBreaks">  
         <xsl:with-param name="pText" select=  
           "substring-after($pText, '&#xA;')"/>  
       </xsl:call-template>  
     </xsl:otherwise>  
   </xsl:choose>  
 </xsl:template>  
</xsl:stylesheet> 
```

我得到的结果是这个

```
Line1 
Is 
here Line2 
Is 
another Line3 
Is 
some 
more 
```

在此处查看我的示例[http://www.xsltcake.com/slices/VsPbib](http://www.xsltcake.com/slices/VsPbib)

它似乎正在替换空格字符而不是换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:16:33.620

这是 webkit 中的一个已知问题，它会影响 Safari 和 Chrome。这是详细信息：

[https://bugs.webkit.org/show_bug.cgi?id=53375](https://bugs.webkit.org/show_bug.cgi?id=53375)

前段时间我自己问了一个类似的问题：[有什么方法可以让 webkit 的 javascript 正确处理空格？](https://stackoverflow.com/questions/4822883/is-there-any-way-of-getting-webkits-javascript-to-handle-whitespace-properly)

# java - JaxB unable to marshall, says missing RootElement but has one

> ID：11789062
> 
> 赞同：0
> 
> 时间：2012-08-03T03:56:08.210
> 
> 标签：java, annotations, jaxb, marshalling

I have seen posts that exist around this issue, but as I am new to jaxB I am having a bit of trouble I have a Root element set up and declaring my XML elements aswell. what am I doing wrong here?

I am getting this error

```
org.springframework.oxm.MarshallingFailureException: JAXB marshalling exception; nested exception is javax.xml.bind.MarshalException
 - with linked exception:
[com.sun.istack.internal.SAXException2: unable to marshal type "au.test.Search.ws.model.SearchRequest" as an element because it is missing an @XmlRootElement annotation] 
```

However this is my SearchRequest Class

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
        "searchControls",
        "searchCriteria",
        "searchFilters"
})
@XmlRootElement(name = "searchRequest")
public class SearchRequest {

    @XmlElement(required = true)
    protected SearchControls searchControls;
    @XmlElement(required = true)
    protected NameSearchCriteria searchCriteria;
    @XmlElement
    protected NameSearchFilters searchFilters;

    public SearchControls getSearchControls() {
        return searchControls;
    }

    public void setSearchControls(SearchControls value) {
        this.searchControls = value;
    }

    public NameSearchCriteria getSearchCriteria() {
        return searchCriteria;
    }

    public void setSearchCriteria(NameSearchCriteria value) {
        this.searchCriteria = value;
    }

    public NameSearchFilters getSearchFilters() {
        return searchFilters;
    }

    public void setSearchFilters(NameSearchFilters value) {
        this.searchFilters = value;
    }
} 
```

How searchControls,criteria and Filters are set up

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "NameSearchFilters", propOrder = {

})
public class NameSearchFilters {

    protected FilterOperator operator;

    public FilterOperator getOperator() {
        return operator;
    }

    public void setOperator(FilterOperator value) {
        this.operator = value;
    }
} 
```

How i am unmarshalling as requested using org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive

```
public SearchResponse performSearch(SearchRequest searchRequest) {
    searchResponse = (SearchResponse) getWebServiceTemplate()
            .marshalSendAndReceive(searchRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:52:04.330

The issue here was that the Ant builds creating dependancy jar was an old version, the ant build needed to be redone and all errors fixed. I was converting Castor to Jaxb, so the set up of elements are correct so can be used as a reference point.

For people having this issue and it not being a dependancy issue, the most likly cause of the problem is in your marshalling.

# java - 如何使用 listIndexOf() 删除文件名的一部分？

> ID：11789063
> 
> 赞同：1
> 
> 时间：2012-08-03T03:56:07.917
> 
> 标签：java

我有这些文件：

```
 Hingga Akhir Nanti - Allycats_part001
, Hingga Akhir Nanti - Allycats_part002
, Hingga Akhir Nanti - Allycats_part003 
```

我想删除这些文件`"_part001"`并将其替换`.mp3`为文件夹中所有文件的扩展名..

关于如何在 Java 中做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:15:50.853

我希望这个片段可以帮助你。

```
/**
 * Pass your file names here as a comma separated values
 * @param strs
 * @return nothing
 */
 public static void convertToMp3Extenesion(String... strs) {
  for (String string : strs) {
    File file  = new File(string);
    if (!file.exists()){
    continue;
    }
    String replacedFileName = string.replaceAll("_part\\d+", ".mp3");

    file.renameTo(new File(replacedFileName));
  } 
```

为了从一个目录中获取所有文件，您可以将上述代码段增强为，

```
/**
 * pass your directory containg your files
 * @param directory name
 * @return nothing
 */
 public static void convertToMp3Extenesion(String dir) {

 File fileDir = new File(dir);
 if (!fileDir.isDirectory()) {
 System.err.println(dir +" is not a valid directory ");
 return;
 }

 String[] strs = fileDir.list();
  //use if for debug. not so good, if files are too many
 //System.out.println("All Files "+Arrays.toString(strs));
 for (String string : strs) {

   File file  = new File(dir+ File.separator+ string);
   if (!file.exists()) {
      continue;
   }
   String replacedFileName = string.replaceAll("_part\\d+", ".mp3");

   file.renameTo(new File(dir+ File.separator+ replacedFileName));
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:01:40.390

您可以使用正则表达式`myFileName.replaceAll("_part\\d+", ".mp3")` ，然后使用文件的 renameTo() 方法应用新名称。

我相信它需要的字符串是文件的完整路径，所以要小心包含它（如果我在这方面是正确的）。

# java - 通用枚举方法

> ID：11789066
> 
> 赞同：1
> 
> 时间：2012-08-03T03:56:39.860
> 
> 标签：java, generics, enums

不久前有人问了一个问题，该问题被召回，因为它被否决了。很明显，枚举本身不能是通用的，但问题标题是“通用枚举方法”，这当然*是*可能的。最初的问题有一些示例伪 Java 代码，类似于：

```
enum Test<T> {
    TEST1<T1>,
    TEST2<T2>,
    TEST3<T3>;
    // I missed some details they had here for overriding methods or such

   public T getInstance() {...
      // somehow returning a T1 when called on TEST1, a T2 for TEST2, etc.
   }
} 
```

我正在重新询问，因为我在下面有一个潜在的答案，可能是@Radu 的问题*背后*的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:56:39.860

已提供的示例代码（我试图在上述问题中从内存中复制，显然无法按预期工作，因为枚举本身不能是通用的。

但是根据原始海报试图完成的任务，下面可能会提供正在寻找的内容，并且它确实可以编译和运行。

```
public enum Test {
    TEST1(String.class),
    TEST2(Object.class),
    ;

    Class clazz;

    Test(Class<?> clazz) {
        this.clazz = clazz;
    }

    <T> T getInstance() throws IllegalAccessException, InstantiationException {
        return (T)clazz.newInstance();
    }

    public static void main(String[] args) {
        try {
            String str = TEST1.getInstance();
            Object obj = TEST2.getInstance();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        }
    }
} 
```

这里写的有一些明显的缺陷。根据您为每个枚举值提供的类型，可能没有可用的无参数构造函数。如果需要解决该问题，可以通过使用 Objenesis 使其变得更加复杂。此外，我“巧妙地”将方法的返回类型设置为 generic ，以便可以在没有警告/错误的情况下对其进行分配。但是，这样做是完全非类型安全的。您可以在没有编译器错误的情况下反转分配：

```
String str = TEST2.getInstance();
Object obj = TEST1.getInstance(); 
```

但是你得到一个运行时 ClassCastException。

无论如何，我认为我已经证明了泛型方法可以写在枚举中，而且可以在枚举中编写一个方法，该方法基于与每个静态关联的类型返回不同类类型的新实例枚举值（只是不作为每个枚举值的通用参数）。

# api - 身份验证后保护资源端点的方法

> ID：11789069
> 
> 赞同：1
> 
> 时间：2012-08-03T03:56:58.113
> 
> 标签：api, authentication, hmac

所以，我已经完成了我的 /auth 端点的所有设置。我正在使用由 API 密钥签名的 Nonce-Encoded HMAC 来验证客户端。现在，我不完全确定我了解如何保护我的 API 中的其余资源端点。

一旦客户端通过身份验证，我是否应该创建一个身份验证令牌（散列客户端公钥 + 随机数）然后将其存储在数据库中，然后使用每个 api 请求（对于其他端点）散列请求客户端的公钥和随机数和比较两者？

或者我应该在身份验证后生成一些身份验证令牌并将其发送给客户端并存储它，然后要求他们将其与每个请求一起发回并进行比较？

此外，我的计划是在每次请求之前获得一个随机数。这看起来是不是太过分了？

任何帮助解释如何从这里开始的选项将不胜感激。

# haskell - 没有模板haskell的酸状态便利包装器？

> ID：11789072
> 
> 赞同：2
> 
> 时间：2012-08-03T03:58:07.913
> 
> 标签：haskell, acid-state

在[`acid-state`教程](http://www.happstack.com/docs/crashcourse/AcidState.html#acid_state)中，所有示例都使用 Template Haskell。但是，由于[某些原因](https://stackoverflow.com/questions/10857030/whats-so-bad-about-template-haskell)，我不太热衷于使用它。

我知道可以在没有模板 haskell 的情况下使用酸状态，如下所示：http:
[//mirror.seize.it/acid-state/examples/HelloWorldNoTH.hs](http://mirror.seize.it/acid-state/examples/HelloWorldNoTH.hs)

但是如果有任何方便的包装器或库来帮助更容易地使用酸状态（不使用模板haskell），我会徘徊吗？

PS：我的目的是为网络应用程序实现一个数据库层。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:10:25.300

你不能编写一个派生实例的函数，这就是 Acid-State 使用 Template Haskell 的原因。

Acid-State 的开发人员之前提到过，如果 GHC 增加了对自动派生类的支持，他们就不需要使用 TH（很像`data SomeData = Foo | Bar deriving (Show)`）

*您链接的帖子中针对*TH列出的许多要点仅适用于特定情况（例如，您可以确定 Acid-State 的 TH 功能不会发射任何导弹）

我真的不认为你应该太担心使用 TH - 它有时会有所帮助！

# iphone - CGLayer 上的 UIImage

> ID：11789073
> 
> 赞同：2
> 
> 时间：2012-08-03T03:58:10.423
> 
> 标签：iphone, ios, xcode, ipad, ipod

我想在 CGLayer 上绘制一个简单的 UIImage，但是我找不到任何有用的资源来做这件事。请告诉我如何在 CGLayer 上绘制 UIImage。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:02:14.260

这是你要找的吗？

```
CGContextRef layerCtx = CGLayerGetContext(layer);
 CGContextDrawImage(layerCtx, (CGRect){ CGPointZero, myImage.size }, myImage.CGImage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:08:40.533

您需要使用 CGLayerGetContext 函数从 CGLayer 获取图形上下文。之后，只需将新上下文压入堆栈，并在图形上下文中绘制图像。

# javascript - JavaScript 编码差异

> ID：11789078
> 
> 赞同：3
> 
> 时间：2012-08-03T03:59:00.203
> 
> 标签：javascript, oop, class

我有时会创建这样的课程

```
function class1(){
.....
   class1.prototype.callme = function(){
      alert("hai");
   }
}
then I instantiate using (new class1()).callme(); 
```

有时我使用模块化模式

```
var class2 = (function(){
var privatemethod = function(){
....
}
var publicmethod = function(){
alert("am public");
}
return{
callme:publicmethod
}
})();

then I call class2.callme() 
```

有什么好处和坏处，请大神解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:10:27.857

如果您想了解不同的 Javascript 模式，我绝对会推荐[Learning JavaScript Design Patterns](http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/)它是免费/开源的，并且会不断更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:04:45.133

第一个是构造函数，第二个是对象，所以它们不一样。您可能希望在不同情况下使用其中一种。无论如何，您通常在构造函数之外声明原型并`this.property`用于公共方法和变量。第二个选项不能作为一个类重用，除非你使用 jQuery`extend`或 Underscore 之类的东西`_extend`，这是我通常这样做的方式，如果没有原型链臃肿的代码，它似乎更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:15:51.580

对于使用[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)：

> 拥有只能由我们的模块使用的私有功能的自由。由于它们不暴露给页面的其余部分（只有我们导出的 API 是），它们被认为是真正私有的。
> 
> 鉴于函数被正常声明并命名，当我们试图发现哪些函数引发了异常时，在调试器中显示调用堆栈会更容易。
> 
> 正如 TJ Crowder 过去所指出的，它还使我们能够根据环境返回不同的函数。过去，我看到开发人员使用它来执行 UA 测试，以便在他们的模块中提供特定于 IE 的代码路径，但现在我们可以轻松地选择特征检测来实现类似的目标。

# jakarta-ee - 处理高内存可扩展 Java EE 应用程序

> ID：11789086
> 
> 赞同：0
> 
> 时间：2012-08-03T04:00:28.857
> 
> 标签：jakarta-ee, cloud, scalable, ehcache-bigmemory

我在一个 Java EE 应用程序中工作，它需要太多的内存服务器端应用程序级数据（即它不是用户级数据）。通过应用程序级别的数据，我的意思是所有用户的数据都是不变的，例如主数据。到目前为止，我们在一台具有 16 GB RAM 的 Windows 服务器上为 15-20 个并发用户使用 EHCache。我们为我们的应用程序指定堆大小为 8GB。

现在我们需要重新设计应用程序，使其能够支持超过 500 个并发用户。这将导致更多的内存数据需求。

我想在这种情况下有你的观点，以便应用程序具有足够的可扩展性。

据我了解，以下解决方案可以提供帮助-

1.  实施负载平衡，以便分配负载，但每个服务器上的内存数据仍然很高，因为它是应用程序级别的数据。虽然会在一定程度上有所帮助。

2.  将此实现为无状态操作，而不是将数据保存在缓存中。但这会对性能产生影响。我在某处读到无状态是可扩展性的关键。我想避免这种情况，因为这需要太多的工作。

3.  将 Terracotta 的 BigMemory 与 EHCache 结合使用。它基本上以一种特殊的方式将数据保存在磁盘上，即数据访问速度仍然不错。请注意，这不是免费产品，我们有这样的免费选项吗？

4.  选择基于云的内存架构？对此不是很清楚。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:04:23.617

您可以使用 BigMemory Go，它可以让您在每台服务器上使用多达 32GB 的内存 (RAM)。因为，我认为您稍微误解了 BigMemory 是什么，它不会将数据存储在磁盘上（如果您希望进程可重新启动，它可以），但*始终*直接从内存中访问数据。

有关详细信息，请参阅[http://terracotta.org/products/bigmemorygo 。](http://terracotta.org/products/bigmemorygo)但鉴于你低于 32GB 的限制，它对你来说都是免费的......

# java - 从 Java 运行进程，使用 C++ 的输出

> ID：11789092
> 
> 赞同：2
> 
> 时间：2012-08-03T04:01:24.650
> 
> 标签：java, android, android-ndk

*简短*：从*Java*调用进程并将其输出由通过*JNI调用的**C++*函数使用的最佳方法是什么。

 **Long*：我正在试验*Android*的日志阅读器应用程序。为此，我必须运行`logcat`命令并解析其输出。我已经从*Java*尝试过这个，但是执行的内存分配量不仅使过程非常缓慢，而且还会使相同的日志变得混乱，其中包含许多与*GC*相关的条目。

出于这个原因，我在*C++*中实现了所有与解析相关的操作。但是，我不能使用通常的习惯用法从*C++*`fork/exec`端调用，因为*NDK*并不真正支持它。相反，我需要从*Java*启动该过程，并以某种方式使其输出可供*C++*代码访问。理想情况下，我会为此使用管道，但*Android*上也没有这些方法。`logcat`****`redirectOutput``ProcessBuilder`****

 ***到目前为止，我想出的最佳解决方案是启动进程，将其输出重定向到一个临时文件（使用`logcat > tempfile`），并从该文件中读取*C++代码。*然而，这远非理想。有没有更好的方法让本机代码访问从*Java*开始的进程的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:07:55.540

您的前提有点错误：从 Java 完成的 fork/exec() 在 Android 上不再“合适”，而不是通过 NDK 完成 - 在这两种情况下它今天都有效，但被认为超出了 Android 应用程序的方式应该工作。

阅读日志是另一个边界情况：对于 JellyBean，您只能阅读自己的（进程或用户 ID，不确定是哪个）消息。有一个 ADB 命令可用于使给定的应用程序能够像以前的版本一样读取所有日志，但这必须从 ADB 发出 - 它不能由应用程序设置。

如果你想按照你所说的去做，不管缺乏必要性和实用性的迫在眉睫的限制，要做的事情是将连接到子进程的文件描述符的知识放入本机代码中。您可能能够传递它，或者本机代码可能能够自己发现它，因为所有文件描述符都列在 /proc 中。****

# php - 在 PHP 中运行 C++ 脚本

> ID：11789095
> 
> 赞同：10
> 
> 时间：2012-08-03T04:01:45.787
> 
> 标签：php, c++, json

我有一个 C++ 程序，它需要从 PHP 脚本中获取数据，对其进行处理，然后将数据返回给我的 PHP 脚本。

1.  如何将值从 PHP 传递到 C++？
2.  你如何运行 C++ 脚本？你必须先编译它吗？
3.  如何从 C++ 脚本中获取值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T04:09:34.167

**1\.** 如何将值从 PHP 传递到 C++？

***Ans:***在 php 文件中，你可以使用[exec](http://php.net/manual/en/function.exec.php)函数来执行你的 C++ 二进制文件。例子：

```
exec("/path/to/your/binary $var1 $var2", $output); 
```

**2\.** 你如何运行 C++ 脚本？你必须先编译它吗？

***Ans:***当然，你不能直接执行C++脚本，C++是编译语言，你可以直接执行二进制文件。

**3\.** 如何从 C++ 脚本中获取值？

***Ans:***见 1，你会得到 C++ 的输出`$output`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:06:06.807

1-您可以使用`exec`调用外部应用程序，使用命令行参数

2- C++ 不是脚本，它是一种编译语言，你必须先编译它

3-正常的标准输出将被 php`exec`函数捕获

# php - PHP/CodeIgniter 关系数据库数组构建

> ID：11789102
> 
> 赞同：7
> 
> 时间：2012-08-03T04:02:33.947
> 
> 标签：php, mysql, codeigniter, codeigniter-2

**解决了！最终答案位于此问题的底部**

我正在尝试使用 CodeIgniter 制作菜单构建器，出于某种原因，我似乎无法理解这个概念，尽管它看起来很简单（我是 PHP 和 CI 的新手）。这实际上与 CodeIgniter 本身的关系应该不大，因为我实际上只是将它用于查询和 MVC 模式。

我有两张桌子：

*   **菜单：**

    *   ID
    *   姓名
*   **菜单页面：**

    *   ID
    *   page_id（与 pages.id 相关）
    *   menu_id（与 menus.id 相关）
    *   item_name（它在菜单中的显示方式）
    *   item_order（用于排序）
    *   item_parent（用于在子菜单中嵌套项目）

**编辑：这是我希望实现的结构：**

```
array(  
    [0] => array(
        [menu_id]    => 1,
        [menu_name]  => 'Menu 1',
        [menu_pages] => array(
            [0] => array(
                [id]         => 1,
                [page_id]    => 1,
                [menu_id]    => 1,
                [item_name]  => 'Home',
                [item_order] => 0,
                [item_level] => 0,
                [parent_id]  => ''
            ),
            [1] => array(
                [id]         => 2,
                [page_id]    => 2,
                [menu_id]    => 1,
                [item_name]  => 'About',
                [item_order] => 0,
                [item_level] => 0,
                [parent_id]  => ''
            )
        )
    ),
    [1] => array(
        [menu_id]    => 2,
        [menu_name]  => 'Menu 2',
        [menu_pages] => array(
            [0] => array(
                [id]         => 3,
                [page_id]    => 3,
                [menu_id]    => 2,
                [item_name]  => 'Services',
                [item_order] => 0,
                [item_level] => 0,
                [parent_id]  => ''
            ),
            [1] => array(
                [id]         => 4,
                [page_id]    => 4,
                [menu_id]    => 2,
                [item_name]  => 'Contact',
                [item_order] => 0,
                [item_level] => 0,
                [parent_id]  => ''
            )
        )
    )
) 
```

**这是我到目前为止所得到的（更新）：**

```
function GetMenus() {
    $menus    = $this->db->get('menus');
    $menucols = $this->db->list_fields('menus');

    $pages    = $this->db->get('menu_pages');
    $pagecols = $this->db->list_fields('menu_pages');

    $arr      = array();
    $i        = 0;

    foreach($menus->result() as $menu) {
        foreach($pages->result() as $page) {
            foreach($pagecols as $col) {
                $arr[$i][$col] = $page->$col;
            }

            foreach($menucols as $cols) {
                $this->menus[$i][$cols] = $menu->$cols;

                if($arr[$i]['menu_id'] === $menu->id) {
                    $this->menus[$i]['menu_pages'] = $arr[$i];
                }
            }
        }

        $i++;
    }

    return $this->menus;
} 
```

**上面实际上输出了这个：**

```
Array(
    [0] => Array(
        [id] => 1,
        [name] => default,
        [menu_pages] => Array(
            Array( /* missing #1, showing #2/2 */
                [id] => 2
                [page_id] => 1
                [menu_id] => 1
                [item_name] => About
                [item_order] => 0
                [item_level] => 0
                [parent_id] => 
            )
        )
    ),
    [1] => Array(
        [id] => 2,
        [name] => menu2,
        [menu_pages] => Array(
            Array( /* missing #3, showing #4/4 */
                [id] => 4
                [page_id] => 3
                [menu_id] => 2
                [item_name] => Contact
                [item_order] => 0
                [item_level] => 0
                [parent_id] => 
            )
        )
    )
) 
```

如您所见，这非常接近我的需要，但是缺少项目，因为它们似乎在数组中被覆盖（它仅显示每个菜单的最后一个菜单项-似乎它们具有相同的键）。

感谢您的任何帮助和建议！

**编辑：这是最终的解决方案，大致基于米沙的回答：**

**模型：**

```
function GetMenus() {
    /* Yes, I know these can be chained, I unchained them to avoid
       horizontal scrolling on SO */
    $this->db->select('menus.name, menu_pages.*, pages.slug');
    $this->db->join('menu_pages', 'menu_pages.menu_id = menus.id');
    $this->db->join('pages', 'pages.id = menu_pages.page_id');
    $this->db->order_by('item_order', 'ASC');
    $menus  = $this->db->get('menus');
    $result = array();

    foreach($menus->result() as $menu) {
        $result[$menu->name][$menu->id] = array(
            'page_id'    => $menu->page_id,
            'menu_id'    => $menu->menu_id,
            'item_name'  => $menu->item_name,
            'item_slug'  => $menu->slug,
            'item_order' => $menu->item_order,
            'item_level' => $menu->item_level,
            'parent_id'  => $menu->parent_id
        );
    }

    return $result;
} 
```

**控制器：**

```
$this->menu = $this->page->GetMenus(); 
```

**看法：**

```
<ul class="nav">
    <?php foreach($this->menu['default'] as $item) { ?>
        <li>
            <a href="<?php echo $item['item_slug']; ?>">
                <?php echo $item['item_name']; ?>
            </a>
        </li>
    <?php } ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:34:57.820

试试这个：

```
function GetMenus() {
    $menus = $this->db->get('menus');
    $pages = $this->db->get('menu_pages');
    $cols  = $this->db->list_fields('menu_pages');

    foreach($menus->result() as $menu) {
        $this->menus[$menu->id] = $menu;
        foreach($pages->result() as $page) {
            if($page->menu_id === $menu->id) { 
                foreach($cols as $col) {
                    $this->menus[$menu->id][$col][] = $page->$col;
                }
            }
        }
    }

    print_r($this->menus); // for debugging to see result

    return $this->menus;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T07:51:47.403

您有两个查询，但我想我会选择一个带有连接的查询。这使得代码更短、更简单。我还没有测试下面的代码，但是这样的东西应该可以工作：

```
function GetMenus()
{
  $this->db->select('menus.name, menu_pages.*');
  $this->db->join('menu_pages', 'menu_pages.menu_id = menus.id');
  $this->db->order_by('menus.id');
  $q = $this->db->get('menus');

  $result = array();
  $current_menu_id = NULL;
  $i = -1;

  foreach($q->result() as $row)
  {
    if($current_menu_id !== $row->menu_id)
    {
      $i++;
      $result[] = array('menu_id' => $row->menu_id,
                        'menu_name' => $row->name,
                        'menu_pages' => array()
                  );
    }

    $result[$i]['menu_pages'][] = array('id' => $row->id,
                                        'page_id' => $row->page_id,
                                        'menu_id' => $row->menu_id,
                                        'item_name' => $row->item_name,
                                        'item_order' => $row->item_order,
                                        'item_level' => $row->item_level,
                                        'parent_id' => $row->parent_id
                                  );

    $current_menu_id = $row->menu_id;
  }

  return $result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:19:34.407

```
 $sql = "
    select 
    id , 
    name ,
    group_concat(page_id) as page_ids,
    group_concat(item_name) as item_name,
    group_concat(item_order ) as item_order ,
from menues 
left join menu_pages on menu_pages.menu_id = menues .id";

$query = $this->db->query($sql);
return $query->result(); 
```

并完成了 php 端的单元格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:19:49.430

您可以将 $this->menus 声明为：

```
$this->menus = array() 
```

并使用`array_push()`这样的功能：

```
array_push($this->menus,$page->$col); 
```

我还建议在模型中进行连接操作，而不是在你的函数中循环，因为数据库会快速完成并且你的代码看起来很优雅。

# iphone - 自定义 segue 推送，如后退按钮

> ID：11789106
> 
> 赞同：0
> 
> 时间：2012-08-03T04:03:13.103
> 
> 标签：iphone, ios, xcode, back-button, segue

我正在尝试构建我的自定义 segue，其行为类似于标准 Push segue，但在我的情况下，我想使用自定义按钮在屏幕之间切换（没有标签栏适合这个应用程序，任何模式 segue 也不好） . 主屏幕是自定义图形，而要切换到的屏幕是地图。用户选择地图上的点，点击完成并返回主屏幕及其坐标。我正在尝试将 ViewControllers 与自定义 segue 连接起来。

我在 Internet 上研究了很多解决方案，找到了一个适合的解决方案，但是代码分散在 ViewControllers 和 AppDelegate 周围（我不确定 Apple 是否会接受它）。我正在尝试将整个代码放入 CustomSegue.m /h。成功是部分的，因为使用技术（如下）它与第二个 ViewControler 相匹配，但我不知道如何关闭第二个并返回主屏幕。我尝试了各种技术，但是当我运行它时，编译器会以一堆错误终止应用程序。在构建和运行之前既没有错误也没有警告。我还尝试使用 [selfdismissModalViewControllerAnimated:YES] 使用按钮将其关闭；或 [self dismissViewControllerAnimated:YES 完成：nil]；当我尝试模态序列但我的代码结果不佳时，它们会起作用。

有没有人对这样做的巧妙方法提出建议。在过去的几天里，我一直在解决这个问题。我在很多应用程序中看到了这种转场，所以它似乎很流行，简单的解决方案。我对 Xcode 的经验并不多，只有几个 mo。这是我的自定义 segue（带有 QuartzCore 动画）。

```
#import "CustomTabBarSegue.h"

@implementation CustomTabBarSegue

 -(void)perform {
    UIViewController *src = (UIViewController*)[self sourceViewController];
    UIViewController *dst = (UIViewController*)[self destinationViewController];

    UIView *currentView = src.view;
    UIView *theWindow = [currentView superview];
    UIView *newView = dst.view;
    [theWindow addSubview:newView];

    CATransition *transition = [CATransition animation];

    transition.delegate = self;
    transition.duration = 1;

    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionMoveIn; 
    transition.subtype = kCATransitionFromRight;

    [[theWindow layer] addAnimation:transition forKey:@"MySegue"];
 }

@end 
```

下面是我的按钮从destinationVC返回的代码。（不起作用）

```
- (IBAction)dismiss:(id)sender 
```

{

```
[self dismissViewControllerAnimated:YES completion:^() {
    [self performSegueWithIdentifier:@"MySegue" sender:self];
}]; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T04:12:38.853

我想我可能理解你想要做什么。如果我错了，请纠正我。您想转到一个视图，然后单击返回按钮返回。正确的？用故事板做到这一点很容易。将 NavigationController 作为初始视图，并将导航控制器的根视图控制器设置为主菜单。从那里你想做一个 PUSH segue，然后回去你想做一个 POP。

调用 push segue 是调用 segue 的正常方式，但 pop 有点不同。弹出一个视图的代码是：`[self.navigationController popViewControllerAnimated:YES];`. 弹回根视图控制器的代码是：`[self.navigationController popToRootViewControllerAnimated:YES];`.

我相信这是你想做的。无需自定义转场。

# iphone - 我的应用程序在启动后立即崩溃，找不到有效的解决方案。

> ID：11789108
> 
> 赞同：0
> 
> 时间：2012-08-03T04:03:33.773
> 
> 标签：iphone, xcode, jailbreak

我无法让我的应用程序在 iOS 5.1 上运行。它在设备上启动后立即崩溃。我知道该应用程序没有崩溃，因为它在 iOS 5.0 上运行良好。我已经尝试过 JailCoder、[this](http://iklive.org/objective-c-compiling-ios-5-software-without-developer-program/)和类似的教程，使用 ldid 手动签名，没有任何效果。由于这个问题，我的应用程序的开发已经停止。还有什么我可以做的吗？这非常令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:44:42.460

您似乎没有`chmod`为您的应用程序可执行文件提供正确的设置。尝试（作为根）：

```
chmod 755 /Applications/Brandsonic\ Web\ mobile.app/Brandsonic\ Web\ mobile 
```

您可能还需要伪造代码来运行应用程序：

```
ldid -S /Applications/Brandsonic\ Web\ mobile.app/Brandsonic\ Web\ mobile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:12:39.177

您是否尝试在安装后重新启动您的设备？我从 iKlive Networks 编写了指南，我总是必须重新启动，否则它会崩溃。

# javascript - Javascript / Jquery 兼容性问题

> ID：11789111
> 
> 赞同：0
> 
> 时间：2012-08-03T04:04:25.407
> 
> 标签：javascript, jquery

我有一个网站，其中有一个来自 cartrawler 的预订引擎。

引擎需要加载一定数量的自己的 javascript，但是我注意到一旦我这样做了，我的[jQuery Simplyscroll](http://logicbox.net/jquery/simplyscroll/jquery.simplyscroll.min.js)就不再工作了。一定有某种兼容性问题。

我目前加载我的 SimplyScroll 的方式是：

```
 <script type="text/javascript">
    (function($) {
        $(function() {
    $("#scroller").simplyScroll({pauseOnHover: false});
        });
       })(jQuery);
    </script> 
```

经过一番调查，我认为以下 JS 会导致问题并破坏我的滚动功能：

```
<script type="text/javascript">
document.write('<script type="text/javascript" src="https://ajaxgeo.cartrawler.com/cartrawlerabe/abe/js/ct_abe.js?'+CARTRAWLER.SVNInfo.revision+'"><\/script>');
</script> 
```

有什么方法可以防止脚本破坏我的简单滚动功能吗？

一些建议将不胜感激 - 非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:08:56.350

JavaScript 和 jQuery 是 100% 兼容的。您使用的库可能与 jQuery 不完全兼容。在这种情况下，您可以使用 jQuery [`$.noConflict`](http://api.jquery.com/jQuery.noConflict/)，以防任何其他变量劫持`$`

# openoffice-calc - VBA 中的 ActiveWorkbook

> ID：11789112
> 
> 赞同：0
> 
> 时间：2012-08-03T04:04:34.930
> 
> 标签：openoffice-calc

我正在尝试创建一个宏，如果它已打开一段时间，它将自动关闭并保存 Excel 工作簿。修改我在微软网站上找到的一些代码，我有：

```
Private Sub Workbook_Open()
     StartTimer
End Sub

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    StartTimer
End Sub

Const idleTime = 30
Dim Start as Long

Sub StartTimer()
    Start = Timer
    Do While Timer < Start + idleTime
        DoEvents
    Loop
    Application.DisplayAlerts = False
    ActiveWorkbook.Close True
    Application.DisplayAlerts = True
End Sub 
```

但是，当循环结束时（经过 30 秒后），这会引发错误。在`Application.DisplayAlerts = False`它的行给我一个错误`BASIC runtime error Object variable not set`如果我注释掉 Application 行，它会给我与 ActiveWorkbook 行相同的错误。然后我尝试制作一个只是调用的宏，`Msgbox ActiveWorkbook.name`这给了我同样的错误。我以前从未使用过 VBA，所以我觉得这是一个非常明显的错误，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:10:55.290

这实际上是一个简单的错误，为我解决了更多的谷歌搜索。

我在 OpenOffice 中进行测试，它从 OO 3.3 开始使用与 Microsoft 不同的 API。我使用 ref docs 的 3.2 支持 ActiveWorkbook，而 3.3 需要 ThisComponent 而不是 ActiveWorkbook

# javascript - Internet Explorer、Json.Net JavaScript 日期和毫秒问题

> ID：11789114
> 
> 赞同：9
> 
> 时间：2012-08-03T04:04:38.980
> 
> 标签：javascript, internet-explorer, datetime, json.net

我不确定是我遗漏了什么 - 还是 IE 或 Json.Net。

但基本上这是有效的：

`new Date("2012-08-03T12:36:54.743Z")`

这失败并出现“无效日期”错误：

`new Date("2012-08-03T12:36:54.74Z")`

第二个日期在 SQL Server 中存储为：

`2012-08-03 12:36:54.740`

然后使用 Json.Net 将其序列化为 JSON - Json.Net 确实将日期序列化为`2012-08-03T12:36:54.74Z`，有效地切断了最后一个 0。

我的问题：

*   这是 IE 中的预期行为 - 它需要以毫秒为单位的所有 3 位数字才能工作？
*   这是 Json.Net 中的预期行为 - 它总是会切断日期中的最后一个 0 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T13:01:11.667

我不能告诉你它是否是有意的，但我已经做了很多搜索，我也没有找到这个问题的真正解决方案。看来我们不得不接受 IE 只接受三位数的事实。解决此问题的唯一方法（对我而言）是在序列化时使用 Json.NET 的自定义转换器：

```
string json = JsonConvert.SerializeObject(
    whatEver,
    new IsoDateTimeConverter
        {
            DateTimeFormat = "yyyy-MM-dd\\THH:mm:ss.fffK"
        }
    ); 
```

*（仅使用 Json.NET 4.0.8 和 4.5.8 测试）*

这会强制 Json.NET 使用 3 位小数。

据我所知，Json.NET`DateTime`以 ISO 格式序列化值，并以最大必要精度省略“第二个”值的小数位后面的零。

这匹配的输出

```
someDateTimeValue.ToString("yyyy-MM-dd\\THH:mm:ss.FFFFFFFK") 
```

*   一个普通的`DateTime`like`DateTime.UtcNow`最多会被序列化为 7 位数字，因为那是 a 的精度`DateTime`（以 Ticks 为单位）。
*   如果“第二”部分的`DateTime`小数位数较少，Json.NET 将省略那些尾随零。
*   因此，像这样的日期值在“秒”值后面将不`DateTime.Today`包含*任何*数字，因为它恰好是`0`.

[另请参阅自定义日期和时间格式字符串的描述。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#FFFFFFF_Specifier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T01:27:55.050

是IE。我找到的最全面的解释和答案是[JavaScript：While browsers support parsing of ISO-8601 Date String with Date.parse](https://stackoverflow.com/questions/5802461/javascript-which-browsers-support-parsing-of-iso-8601-date-string-with-date-par?rq=1)

尤其

> IE9 在毫秒数上失败，位数不是 3：（在 IE10 中修复）

# c# - 模型弹出扩展器问题

> ID：11789115
> 
> 赞同：0
> 
> 时间：2012-08-03T04:04:39.890
> 
> 标签：c#, asp.net, ajax

我在我的页面中使用模型弹出扩展器。我创建了一些规​​则。如果该规则为真，则显示模型弹出扩展器，否则将其隐藏。我使用以下代码显示模型弹出扩展器。

```
 <asp:ModalPopupExtender runat="server" ID="modelPopupExtender1" TargetControlID="Lnk_1"
            PopupControlID="pan_addEdit" BackgroundCssClass="modalBackground">
        </asp:ModalPopupExtender>
        <asp:Panel ID="pan_addEdit" runat="server" CssClass="pnl">
            <asp:LinkButton ID="Lnk_1" runat="server" OnClick="btn_generate_Click" Visible="true"></asp:LinkButton>
            <table border="0" width="800px" height="350px">
            ....... 
```

我的问题是当规则条件为假时，它只会在几分之一秒内显示和消失。我怎样才能减少它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:44:06.097

由于您的 ModalPopupExtender 的**TargetID**是您的`LinkButton Id`，无论 RULE 是什么，它都会在检查该 RULE 之前始终显示。解决方案是添加一个`HiddenField`并将其 ID 作为**TargetID 传递**给 ModalPopupExtender。这样，您可以在单击 LinkBUtton 时检查 RULE 并用于**`ModalPopupExtender.Show()`**显示弹出窗口。

```
<asp:HiddenField ID="hdnpop" runat="server" />

<asp:ModalPopupExtender runat="server" ID="modelPopupExtender1" TargetControlID="hdnpop"
            PopupControlID="pan_addEdit" BackgroundCssClass="modalBackground">
</asp:ModalPopupExtender> 
```

在 LinkBut​​ton 事件中，

```
if(RULE)
{//Do something
    modelPopupExtender1.Show()
}
else
{
   //Do something else an dont Show()
} 
```

# macos - 核心数据从界面元素创建实体

> ID：11789124
> 
> 赞同：0
> 
> 时间：2012-08-03T04:06:17.157
> 
> 标签：macos, core-data, view, xcode4, interface

我是 Xcode 和 OS X 应用程序开发的新手。

我想创建一个小应用程序来管理本地密码。基本上，这个应用程序将包含一个具有标签标签和值属性的密码核心数据实体。我希望界面只是一个搜索字段，用于搜索标签并在搜索框下方的字段中显示第一个结果的标签：密码。在搜索结果字段下，我想要 3 个文本字段和一个添加按钮。您像 HTML 表单一样填写文本字段，然后单击添加。这会将新密码添加到数据存储中，使用字段作为新实体的值，然后清除这些字段。

任何示例代码或教程都会很棒。我已经阅读了几篇关于使用 TableView 和添加空白实体的添加按钮的教程，然后您选择它并通过绑定的文本字段对其进行编辑，但这并不是我想要的。我希望能够在单击添加之前指定新的实体属性值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:49:03.080

您所要做的就是制作所需的文本字段，让用户填写它们，然后让他按下“添加”按钮。

如果您了解它的工作原理，剩下的就是为您创建的实体添加属性 - 只需从文本字段中获取它们，例如

```
entity.firstAttr = texfield1.text;,etc 
```

比保存上下文，你在这里！

**编辑** 这就是你添加动作的方式

```
[checkIfAlright addTarget:yourButton action:@selector(yourMethod)forControlEvents:UIControlEventTouchUpInside]; 
```

这就是你保存上下文的方式

```
 NSError *error = nil;
[context save:&error]; 
```

# c# - 从用户控件的构造函数访问用户控件中的 Web 控件

> ID：11789125
> 
> 赞同：0
> 
> 时间：2012-08-03T04:06:17.387
> 
> 标签：c#, asp.net, user-controls, nullreferenceexception

得到旧的“对象引用未设置为对象的实例”错误。为了缩写，将所有内容缩短：

**.ascx 文件：**

```
<asp:Label ID="lblcategory" runat="server" Text="Label"></asp:Label> 
```

**.ascx.cs 文件：**

```
public partial class NewsArticleContainer : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }      

    public NewsArticleContainer()
    {
        lblcategory.Text = "hello there!"; //null reference exception
    }
} 
```

然后，在使用 web.config 文件注册此用户控件后，我将其放入另一个页面。

**.aspx 文件：**

```
<MyUC:NewsArticleContainer runat="server"/> 
```

* * *

如果我将该`lblcategory.Text = "hello there!"`行放在 Page_Load 中并将其从构造函数中注释掉，它就可以正常工作。但是，稍后，我希望能够以编程方式添加此用户控件的实例（即`mypanel.Controls.Add(new NewsArticleContainer(x))`，其中 x 是 NewsArticle）。

我已经知道需要使用 LoadControl 来通过用户控件执行此操作 --- 这不是问题。问题是我无法从用户控件的构造函数访问用户控件中的 Web 控件。

**我在写这个**的时候突然想到：在用户控件的情况下，Page_Load 是否相当于传统意义上的构造函数，即创建一个类的实例，而传统的构造函数 public ClassName()不应该触摸或修改 UserControl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:11:31.623

那么你需要在这里了解一些事情。虽然 UserControl 是一个类，但是控件有自己的生命周期。单个控件仅在调用页面生命周期/控件生命周期的 Init 后才能使用。在初始化之前，您的任何控件都没有被初始化，因为它们没有分配给它们的唯一 ID。这就是您收到对象引用错误的原因。你可以在这里做的如下

```
public partial class NewsArticleContainer : System.Web.UI.UserControl
{
   List<string> NewsArticle = null;
   public NewsArticleContainer(List<string> toCreateNewsArticle)
   {
      NewsArticle = toCreateNewsArticle;
   }

    protected void Page_Load(object sender, EventArgs e)
    {
       foreach(string s in NewsArticle)
       {
          //dynamically create your label control and add it to this user control
          Label lb = new Label;
          lb.Text = s;
          this.Controls.Add(lb);
       }
    }
} 
```

传递输入并将 NewsArticle 存储在您的类级别变量中。然后在页面加载或 page_init 中，动态创建您的标签并添加到您的控件

# asp.net-mvc-3 - ASP.NET MVC3 中的控制器，如 PHP 中的 CodeIgniter

> ID：11789126
> 
> 赞同：0
> 
> 时间：2012-08-03T04:06:28.167
> 
> 标签：asp.net-mvc-3, codeigniter

我是 ASP.NET MVC3 的新手，我需要了解它。

我可以让控制器播放/结构像[Code Igniter 吗](http://codeigniter.com/)？

示例：控制器文件夹：员工和我制作控制器文件，如下所示：

*   SalaryController.cs
*   员工控制器.cs
*   缺席控制器.cs

我可以像这样注入网址：http: [//mysite.com/mymvcapp/EmployeeControllerFolder/MyController/RouteValue](http://mysite.com/mymvcapp/EmployeeControllerFolder/MyController/RouteValue) ..

我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:54:11.457

这在 ASP.NET MVC 中称为区域，您创建一个区域（路径的第一部分），然后是控制器（第二部分），最后是动作（第三部分）。

但我认为您应该坚持使用常规的 ASP.NET MVC 做事方式，除非您的应用程序需要一个区域（如管理区域），否则请坚持使用常规控制器及其操作。

# c# - 返回 Windows Phone 时将数据传回上一页的最佳方法

> ID：11789127
> 
> 赞同：3
> 
> 时间：2012-08-03T04:06:42.167
> 
> 标签：c#, windows-phone-7, navigation

当我单击 Windows Phone 中的后退按钮时，将数据传回上一页的最佳方法是什么。我想要做的是，当用户从我的一个子页面返回主页时，如果我在子页面中保存了某些内容，则主页应该刷新数据。前进时很简单，我只是简单地使用QueryStringm，但我不知道当我回去时该怎么办。我试过这个：

```
private void PhoneApplicationPage_BackKeyPress(object sender, System.ComponentModel.CancelEventArgs e)
{
    e.Cancel = true;
    NavigationContext.QueryString.Add("test", "test");
} 
```

然后，在主页中，我尝试这样做：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    if (e.NavigationMode == System.Windows.Navigation.NavigationMode.Back)
    {
        if (NavigationContext.QueryString.ContainsKey("test"))
        {
            MessageBox.Show(NavigationContext.QueryString["test"]);
        }
    }
} 
```

我这样做只是为了测试目的，但我没有运气，我在互联网上搜索了答案，但没有找到任何令人满意的答案。我考虑在 App.xaml.cs 中放入一个名为 Pending 的字典，我将在其中保存应该在某些点处理的数据，然后，如果我返回主页并且我有这本字典中的数据，我会刷新用户界面。会不会是个好主意？？

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:30:46.787

我建议的是，如果您遵循 MVVM 架构，请从子页面在视图模型中设置一个属性并在父页面上访问它。希望对你有帮助

# asp.net - Page_unload 重置文本框

> ID：11789128
> 
> 赞同：0
> 
> 时间：2012-08-03T04:06:47.693
> 
> 标签：asp.net

Page_Unload 事件是否有可能重置 textbox.text？我发现不能！

标记

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:TextBox ID="txt" runat="server"></asp:TextBox>
    <asp:Button ID="btn" runat="server" Text="Do something1" />
    <asp:Button ID="btn1" runat="server" Text="Do something2" />
    <asp:Button ID="btn2" runat="server" Text="Do something3" />
    </div>
    </form>
</body>
</html> 
```

背后的代码

```
Protected Sub btn_Click(sender As Object, e As System.EventArgs) Handles btn.Click
    Method1()
End Sub

Protected Sub btn1_Click(sender As Object, e As System.EventArgs) Handles btn1.Click
    Method2()
End Sub

Protected Sub btn2_Click(sender As Object, e As System.EventArgs) Handles btn2.Click
    Method3()
End Sub

Private Sub Method1()
    'Do something
End Sub

Private Sub Method2()
    'Do something
End Sub

Private Sub Method3()
    'Do something
End Sub

Protected Sub Page_Unload(sender As Object, e As System.EventArgs) Handles Me.Unload
    txt.Text = String.Empty
End Sub 
```

你可能认为把`txt.Text = String.Empty`in each 方法放入是解决这个问题的最好方法，但是如果我有 80 个按钮，那么我必须放入`txt.Text = String.Empty`80 个按钮的点击事件。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:10:34.317

查看[asp.net 页面的生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。

在所有按钮单击后调用的事件是 PreRender。

您可以覆盖 OnPreRender 以清除此类文本。

![页面生命周期](../Images/5eb4d23d64a70eae899a7a97644e2450.png)

# c++ - C++中的指针数组

> ID：11789131
> 
> 赞同：0
> 
> 时间：2012-08-03T04:07:05.287
> 
> 标签：c++, pointers

`**(iptr+3)`如果 iptr 是一个数组指针，那么和之间有什么区别吗`*iptr[3]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:08:02.070

不，而且，令人惊讶的是（或不是），也等同于`*(3[iptr])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:36:01.543

对编译器来说，不，没有区别。两种形式最终都访问相同的元素。

但是，如果您正在为编译器编写代码，那么您就找错了受众。你的代码应该写得好像下一个维护它的人是一个知道你住在哪里的精神病患者。

换句话说，代码的可读性和可维护性，让编译器自己担心优化^((a))。为此，我总是更喜欢这种`array[index]`形式，`*(array+index)`因为前者阐明了意图：访问数组元素。

* * *

^((a))当然，与大多数规则一样，也有例外。但是，与大多数例外情况一样，它们很少而且相差甚远，因此该建议成立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:11:44.800

`**(iptr+3)`和`*iptr[3]`之间没有什么相同的

`*iptr[3]`是表示数组中地址为 no-3 的元素的指针

`**(iptr+3)` 就像 iptr 比它的 **(6) 大 3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:00:01.830

由于指针算法，它是相同的。

假设您有一个自定义类型

```
typedef struct
{
     /* add some parameters here */
} MyStruct; 
```

然后创建一个这种类型的向量

```
MyStruct xMyStructArray[20]; 
```

例如，当您要访问第三个元素时，可以通过以下方式之一进行：

```
MyStruct xValue = xMyStructArray[2]; // index starts from zero
MyStruct xValue = xMyStructArray + 2; 
```

xMyStructArray 单独被视为指向第一个数组元素的指针。

xMyStructArray == &(xMyStructArray[0])

C/C++ 在连续的内存单元中创建一个数组，当您使用 [] 运算符时，您告诉它访问该数组的相应单元，从对应于第一个数组元素地址的指针地址开始。所以它知道你的类型的大小，并去正确的地址。

指针算法的工作原理相同。当您将 1 与指针相加时，编译器会检查与该指针对应的类型的大小，然后转到与该类型兼容的内存中的下一个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:03:45.773

两者都是一样的，编译器只会将`iptr[3]`and`3[iptr]`视为`*(iptr+3)`and `*(3+iptr)`。

`int a[5][10] = {0};`考虑这个二维数组。这里的`a[i][j]`意思`*(*(a+i) + j)`，所以我们也可以写like `i[a][j]`which表示`*(*(i + a) + j)`。

但是`i[j][a]`是错误的，因为它会被视为`*(*(i + j)+a)`哪个是错误的。`*(i+j)`将导致崩溃（未定义的行为）。

# jquery - jQuery：如何返回类别列表？

> ID：11789133
> 
> 赞同：1
> 
> 时间：2012-08-03T04:07:35.540
> 
> 标签：jquery, html-table

在此表中，我每行有 1 个复选框。如何从复选框选中的所有行中返回 Categorynames 列表？

html:

```
<tbody>
    <table>
        <tr style="height: auto" role="row" class="jqgfirstrow">
            <td style="height: 0px; width: 55px;" role="gridcell">
            </td>
            <td style="height: 0px; width: 150px;" role="gridcell">
            </td>
            <td style="height: 0px; width: 150px;" role="gridcell">
            </td>
        </tr>
        <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="1">
            <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
                <input type="checkbox" value="true" name="Catchecked" id="Catchecked"><input type="hidden"
                    value="false" name="Catchecked">
            </td>
            <td aria-describedby="jqgCategories_Name" title="Beverages" style="text-align: left;"
                role="gridcell">
                Beverages
            </td>
            <td aria-describedby="jqgCategories_Description" title="Soft drinks, coffees, teas, beers, and ales"
                style="text-align: left;" role="gridcell">
                Soft drinks, coffees, teas, beers, and ales
            </td>
        </tr>
        <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="2">
            <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
                <input type="checkbox" value="true" name="Catchecked" id="Catchecked"><input type="hidden"
                    value="false" name="Catchecked">
            </td>
            <td aria-describedby="jqgCategories_Name" title="Condiments" style="text-align: left;"
                role="gridcell">
                Condiments
            </td>
            <td aria-describedby="jqgCategories_Description" title="Sweet and savory sauces, relishes, spreads, and seasonings"
                style="text-align: left;" role="gridcell">
                Sweet and savory sauces, relishes, spreads, and seasonings
            </td>
        </tr>
        <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="7">
            <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
                <input type="checkbox" value="true" name="Catchecked" id="Catchecked"><input type="hidden"
                    value="false" name="Catchecked">
            </td>
            <td aria-describedby="jqgCategories_Name" title="Produce" style="text-align: left;"
                role="gridcell">
                Produce
            </td>
            <td aria-describedby="jqgCategories_Description" title="Dried fruit and bean curd"
                style="text-align: left;" role="gridcell">
                Dried fruit and bean curd
            </td>
        </tr>
        <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="8">
            <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
                <input type="checkbox" value="true" name="Catchecked" id="Catchecked"><input type="hidden"
                    value="false" name="Catchecked">
            </td>
            <td aria-describedby="jqgCategories_Name" title="Seafood" style="text-align: left;"
                role="gridcell">
                Seafood
            </td>
            <td aria-describedby="jqgCategories_Description" title="Seaweed and fish" style="text-align: left;"
                role="gridcell">
                Seaweed and fish
            </td>
        </tr>
    </table>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:18:43.913

试试这个：

```
$('input[type="checkbox"]').change(function(){
    var cat = $('input[type="checkbox"]:checked').parent().next().map(function(){
                    return $(this).attr('aria-describedby')
              }).get()
}) 
```

[演示](http://jsfiddle.net/kAeCL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:23:54.627

```
$('#clickhere').click(function() {
    var categories = [];
    $('input:checkbox:checked').each(function() {
        categories.push($(this).parent('td').next('td').text().trim());
    });
    alert(categories);
}); 
```

[http://jsfiddle.net/LvbDQ/1/](http://jsfiddle.net/LvbDQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:24:16.947

每当您需要从表中收集类别时，将其放入某个函数中：

```
var table = ...; // get the table DOMElement or jQuery object here
var categories = [];
$(':checkbox[checked]', table).each(function() {
    categories.push($(this).parent().next().text().trim());
});
//alert(categories);   // return an array of categories 
```

这是[jsFiddle](http://jsfiddle.net/pwpq9/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:29:23.487

我不确定您将如何处理每个检查的值，但以下内容将获得您正在寻找的文本。

```
$("table input[type=checkbox]:checked").each(function()
  {
     console.log($.trim($("td[aria-describedby=jqgCategories_Name]", $(this).closest("tr")).text()));
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:52:41.410

您可以在此处找到上述查询的完整解决方案。

**演示：** [http ://codebins.com/bin/4ldqp8w](http://codebins.com/bin/4ldqp8w)

**HTML**

```
<div class="input">
  <span>
    <input type="button" name="btnget" id="btnget" value="Get Categories"/>
  </span>
  <span id="result">
  </span>
</div>

<table>
  <tr style="height: auto" role="row" class="jqgfirstrow">
    <td style="height: 0px; width: 55px;" role="gridcell">
    </td>
    <td style="height: 0px; width: 150px;" role="gridcell">
    </td>
    <td style="height: 0px; width: 150px;" role="gridcell">
    </td>
  </tr>
  <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="1">
    <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
      <input type="checkbox" value="true" name="Catchecked" id="Catchecked">
      <input type="hidden"
      value="false" name="Catchecked">
    </td>
    <td aria-describedby="jqgCategories_Name" title="Beverages" style="text-align: left;"
    role="gridcell">
      Beverages
    </td>
    <td aria-describedby="jqgCategories_Description" title="Soft drinks, coffees, teas, beers, and ales"
    style="text-align: left;" role="gridcell">
      Soft drinks, coffees, teas, beers, and ales
    </td>
  </tr>
  <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="2">
    <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
      <input type="checkbox" value="true" name="Catchecked" id="Catchecked">
      <input type="hidden"
      value="false" name="Catchecked">
    </td>
    <td aria-describedby="jqgCategories_Name" title="Condiments" style="text-align: left;"
    role="gridcell">
      Condiments
    </td>
    <td aria-describedby="jqgCategories_Description" title="Sweet and savory sauces, relishes, spreads, and seasonings"
    style="text-align: left;" role="gridcell">
      Sweet and savory sauces, relishes, spreads, and seasonings
    </td>
  </tr>
  <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="7">
    <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
      <input type="checkbox" value="true" name="Catchecked" id="Catchecked">
      <input type="hidden"
      value="false" name="Catchecked">
    </td>
    <td aria-describedby="jqgCategories_Name" title="Produce" style="text-align: left;"
    role="gridcell">
      Produce
    </td>
    <td aria-describedby="jqgCategories_Description" title="Dried fruit and bean curd"
    style="text-align: left;" role="gridcell">
      Dried fruit and bean curd
    </td>
  </tr>
  <tr class="ui-widget-content jqgrow ui-row-ltr" role="row" tabindex="-1" id="8">
    <td aria-describedby="jqgCategories_act" title="" style="text-align: center;" role="gridcell">
      <input type="checkbox" value="true" name="Catchecked" id="Catchecked">
      <input type="hidden"
      value="false" name="Catchecked">
    </td>
    <td aria-describedby="jqgCategories_Name" title="Seafood" style="text-align: left;"
    role="gridcell">
      Seafood
    </td>
    <td aria-describedby="jqgCategories_Description" title="Seaweed and fish" style="text-align: left;"
    role="gridcell">
      Seaweed and fish
    </td>
  </tr>
</table> 
```

**jQuery：**

```
 $(function() {
    $("#btnget").click(function() {
        $("#result").html("");
        var categories = new Array();
        $(".jqgrow").each(function() {
            if ($(this).find("td:first input[type=checkbox]").is(":checked")) {
                categories.push($(this).find("td[aria-describedby=jqgCategories_Name]").text().trim());
            }
        });
        if (categories.length > 0) {
            $("#result").html(categories.join(","));
        }
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp8w](http://codebins.com/bin/4ldqp8w)

# objective-c - 基于分页的 iPhone 应用程序 - 在 DataViewController 中使用来自 RootViewController 的函数

> ID：11789149
> 
> 赞同：0
> 
> 时间：2012-08-03T04:09:04.653
> 
> 标签：objective-c, ios, uipageviewcontroller

我正在使用 Storyboards 和 ARC 构建一个基于页面的 iPhone 应用程序。我正在尝试使用 RootViewController 类中的函数从 DataViewController 类中的函数内部翻转到特定页面。

问题是在 RootViewController 类中找不到 DataViewController 类的主实例，但在 ModelController 类中找到了它。而且似乎 ModelController 类是只读的（因此我无法从外部类（例如 RootViewController 类）设置 ModelController 的委托）

我最初的计划是：

**1) 将 ModelController 委托设置为 RootViewController 类中的 RootViewController**

**2) 将 DataViewController 委托设置为 ModelController 的委托**

但这似乎不起作用 - 我假设由于 ModelController 类的只读性......

在这种情况下，如何使用 DataViewController 类中的 RootViewController 类中的函数？有没有比设置代表更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T07:37:50.560

我这样做的方法是使用通知

我在 DataViewController 中的按钮单击上添加了一个通知

```
[[NSNotificationCenter defaultCenter]postNotificationName:@"H2RAutoPage" object:nil]; 
```

并在 RootViewController 中的 viewDidLoad

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(autoPage:) name:@"H2RAutoPage" object:nil]; 
```

我的 AutoPage 例程看起来像这样

```
- (void)autoPage: (NSNotification *)notification
{
//get current index of current page
 NSUInteger currentPage = [self.modelController indexOfViewController:    [self.pageViewController.viewControllers objectAtIndex:0]];
// this is the next page nil mean we have reach the end
H2RDataViewController *targetPageViewController = [self.modelController viewControllerAtIndex:(currentPage + 1) storyboard:self.storyboard];

if (targetPageViewController) {
    //put it(or them if in landscape view) in an array
    NSArray *viewControllers = [NSArray arrayWithObjects:targetPageViewController, nil];
    //add page view
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];
} 
```

}

我也尝试过使用委托，但发现代码变得混乱，因为它不断丢失委托，我发现 NSnotification 更干净。

# perl - 在perl中执行dos命令

> ID：11789152
> 
> 赞同：-3
> 
> 时间：2012-08-03T04:09:50.613
> 
> 标签：perl, cgi, dos

我在 cgi 文件中有一个简单的 perl 脚本来查找和替换 dos 中的文本，例如：

```
system("type data.txt | powershell -Command "$input | ForEach-Object { $_ -replace \"ID\", \"$id\" }" > new.txt"); 
```

或者

```
system("cat tmp/$id/index.html 's/ID/$id/g' a"); 
```

（我有 Powershell 和 Cygwin）

当我运行这个脚本时，什么也没有发生！但是如果我直接在cmd（windows）中输入这个命令，就完成了！我的问题是：如何在我的 CGI 文件中运行这些命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:28:52.887

```
open(my $fh, "<", "data.txt") or die "Error opening data.txt: $!";
open(my $out, ">", "new.txt") or die "Error opening new.txt: $!";
my $id = 'NewId';
while (<$fh>) {
    s/ID/$id/g;
    print $out $_;
}
close $fh;
close $out; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:28:46.143

这通常是由于您的 shell 和 perl 环境的环境设置不一样。它通常通过对命令使用显式路径名来修复。

所以而不是

```
system("cat tmp/$id/index.html 's/ID/$id/g' a"); 
```

尝试

```
system("/bin/cat tmp/$id/index.html 's/ID/$id/g' a"); 
```

这将在我的机器上工作。在 cygwin 中，您应该能够通过键入来找出任何给定命令的路径`which command`，替换`command`为您需要查找路径的命令。

我对 Powershell 不像对 Cygwin 那样熟悉，而且我不知道您是否使用的是 Cygwin perl。奇怪的是你必须使用 unix 风格的路径来获取你的命令。如果您使用的是 cygwin，您可以使用看起来像`/cygdrive/c/window32/powershellcommand.exe`. 如果没有，您将不得不查找您的 perl 版本的文档以获得确切的语法（否则其他人将不得不纠正我）。

希望有帮助！

# jsf-2 - PrimeFaces 中不同组件的不同 Ajax 状态

> ID：11789153
> 
> 赞同：13
> 
> 时间：2012-08-03T04:09:51.110
> 
> 标签：jsf-2, primefaces

在我的网页上，我使用模态的全局 ajax 状态。即当有ajax调用时，用户被阻止执行其他动作，被迫等待。像这儿：

[http://www.primefaces.org/showcase-labs/ui/ajaxStatusScript.jsf](http://www.primefaces.org/showcase-labs/ui/ajaxStatusScript.jsf)

但是，页面上的所有组件都不需要这种行为。例如，对于自动完成，最好在自动完成组件旁边有一个非阻塞的。在 RichFaces 中，自动完成组件有 status 属性。

在 PrimeFaces (3.4 SNAPSHOT) 中，有没有办法让页面上的两个不同的 ajax 状态根据需要独立触发它们？

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T04:32:44.423

您可以使用全局属性是否触发 ajaxStatus。例如，将其设置为 false 不会像这样触发 ajaxStatus：

```
<p:autoComplete id="acSimple" value="#{autoCompleteBean.txt1}" 
completeMethod="#{autoCompleteBean.complete}" global="false"/> 
```

对于您使用 ajax 更新的其他组件。你可以做这样的事情：

```
<p:inputText value="#{autoCompleteBean.txt1}">
    <f:validateLength minimum="2" /> 
    <p:ajax global="false" update="email" event="keyup"/>
</p:inputText> 
```

**更新**：如果您想要两种状态，请编写您自己的对话框，如下所示：

```
<p:dialog widgetVar="status" modal="true" closable="false">
   Please Wait
</p:dialog>

<p:inputText value="#{autoCompleteBean.txt1}">
    <f:validateLength minimum="2" /> 
    <p:ajax global="false" onstart="status.show()" oncomplete="status.hide()" update="email" event="keyup"/>
</p:inputText> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-27T13:46:33.340

在 Primefaces 5.1 中，您将看到 Ravi 解决方案的警告，并且它不起作用。

```
 27-Mar-2015 14:35:41.877 WARNING [http-apr-8080-exec-2] org.primefaces.component.autocomplete.AutoCompleteRenderer.encodeScript The process/global/onstart/oncomplete attribute of AutoComplete was removed. Please use p:ajax with the query event now 
```

Primefaces 5.1 的正确解决方案是添加

```
 <p:ajax event="query" global="false"/> 
```

在 autoComplete 标签内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-21T13:54:04.380

我有同样的问题这是我的解决方案（不是超级简单但非常灵活）：

如果要为页面的某些部分添加加载指示器，则需要添加两个`<h:panelGroup>`元素，一个用于加载指示器，一个用于加载的内容。

例如：

```
 <h:panelGroup styleClass="contentPreview content">
        <h:outputText id="previewText" styleClass="updatePreview" value="#{lazyResultBean.previewContent}" />
   </h:panelGroup>
   <h:panelGroup styleClass="contentPreview loading">
        <p:graphicImage style="width: 15px; height: 15px;" name="/images/ajax-loader.gif" />
   </h:panelGroup> 
```

`loading`重要的是为加载指示器和内容设置正确的样式类`content`。两个面板还需要有一个它们共享的类，在本例中为`contentPreview`Class。

要在加载指示器和内容之间切换，您只需要调用一个 JavaScript 函数。 `showLoading('.contentPreview')`显示加载指示器 `hideLoading('.contentPreview')`隐藏指示器并显示内容。

例如：

```
 <p:commandButton id="previewBtn" onstart="showLoading('.contentPreview')" oncomplete="hideLoading('.contentPreview')" value="Preview" update="previewText" actionListener="#{lazyResultBean.loadPreviewContent(result.url)}">
    </p:commandButton> 
```

JavaScript 函数的代码如下所示：

```
 function showLoading(clazz) {
    console.log('showLoading' + clazz);
    var loadingElements = $(clazz + '.loading');
    loadingElements.each(function (index, el) {
      el.style.display = 'block';
    });

    var contentElements = $(clazz + '.content');
    contentElements.each(function (index, el) {
      el.style.display = 'none';
    });
  } 
```

```
 function hideLoading(clazz) {
    console.log('hideLoading' + clazz);
    var loadingElements = $(clazz + '.loading');
    loadingElements.each(function (index, el) {
      el.style.display = 'none';
    });

    var contentElements = $(clazz + '.content');
    contentElements.each(function (index, el) {
      el.style.display = 'block';
    });
  } 
```

# node.js - Node.js - 如何在 express 下的公共文件夹中导入依赖模块

> ID：11789156
> 
> 赞同：1
> 
> 时间：2012-08-03T04:10:01.523
> 
> 标签：node.js, express

我使用命令“express -e sample”创建了一个简单的 node.js 项目。

我在 /public 目录下有我的 javascript、css 文件和在视图下的 ejs 文件，我的 server.js 在根目录中。

我创建了一个表单页面，当用户提交它时，我在 /public/javascripts 下的一个 js 文件中调用一个函数。

一切都很完美。我现在想将表单输入保存到我的数据库（mysql）中，所以我尝试获取 mysql 但它失败了。警报声明说该对象未定义。

```
var database = require('mysql').Client; 
```

但是，相同的命令在 server.js 中运行良好。它打印我的数据库属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:43:40.590

`<input type="submit" onclick="processFormData();"/>``processFormData();`是在用户单击按钮后在客户端（在浏览器中）调用函数的代码。

因此，`var database = require('mysql').Client;`也在客户端上执行。

显然，`require`浏览器中没有；即使浏览器中有`require`和`mysql`库 - 可能您仍然希望从服务器而不是客户端更改数据库（而不是向客户端发送您的数据库凭据）。

为此，您应该：

1.  移除`onclick`处理程序，让用户提交表单；
2.  在服务器上，处理提交的表单数据并使用 DB 做任何你想做的事情。

或者，如果您想使用当前的“一次编写，随处运行”的方法，您可能会对[Meteor](http://meteor.com/)和[OPA 语言等替代平台感兴趣](http://opalang.com/)

# android - 后按多个实例

> ID：11789157
> 
> 赞同：0
> 
> 时间：2012-08-03T04:10:05.413
> 
> 标签：android, button, back, instances

我有一个音频播放器，它有两个主要活动。1.用于加载启动页面的启动活动和另一个用于播放器的启动活动。当我按下后退按钮并从启动器中选择我的应用程序时，正在发生多个活动实例。

飞溅活动-播放器-另一个飞溅活动-另一个播放器-另一个飞溅活动-另一个播放器 ABA `-B`-A`-B` 如果我在所有 3 个播放器活动中单击播放，则将在后台播放 3 首歌曲。

仅在按下后退按钮时才会发生。当您按下主页按钮时，它不会发生。

因此，作为一个简单的解决方案，我暂时禁用了后退按钮。

我可以从任何人那里得到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:51:42.947

您可以在清单文件中写入

```
android:launchMode="singleInstance" 
```

在活动标签中

```
<activity
    android:name=".HomeActivity"
    android:launchMode="singleInstance"
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:47:17.487

**尝试这个**

```
@Override
public void onBackPressed() {
    Intent ip = new Intent(this, YourMainActivity.class);
    startActivity(ip);
    finish();
    super.onBackPressed();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:48:54.567

看看[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

和[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

如果您可以显示一些代码，则更容易找出确切的问题。

# jquery - 我可以简化这个在表单上查找元素的 jQuery 吗？

> ID：11789162
> 
> 赞同：2
> 
> 时间：2012-08-03T04:10:47.327
> 
> 标签：jquery

有没有办法可以简化这段代码：

```
var topic_html = obj.$form.find("#select-topic").html();
var topic_val = obj.$form.find("#select-topic").val();
var topic_text = obj.$form.find("#select-topic option:selected").text(); 
```

我知道它相当干净，但是有没有办法可以避免这三种情况`obj.$form.find.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T04:14:09.657

您不需要每次都找到选择，将其缓存在变量中。

```
var topic = obj.$form.find("#select-topic");
var topic_html = topic.html();
var topic_val = topic.val();
var topic_text = topic.find("option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T04:15:01.493

你通过它的 id 得到一个对象 - 你为什么要这样做`obj.$form.find`？

就这样做`$('#select-topic')`- 除非您需要确保该元素是表单的子元素？

反正：

```
var select = $('#select-topic');
var topic_html = select.html();
var topic_val = select.val();
var topic_text = select.find('option:selected').text(); 
```

为什么你需要同一事物的所有三个版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:22:09.320

这是@xdazz 的回答略有不同。我尝试将其保留为单个 var 关键字。

```
var topic = obj.$form.find("#select-topic"),
    topic_html = topic.html(),
    topic_val = topic.val(),
    topic_text = topic.find("option:selected").text(); 
```

# mysql - MySQL - 有没有办法保存搜索以加快未来的冗余查询？

> ID：11789169
> 
> 赞同：0
> 
> 时间：2012-08-03T04:12:00.557
> 
> 标签：mysql

我正在尝试实现用户可以请求保存搜索的功能。如果请求，在搜索中找到的行将被标记，因此将来，如果执行相同的搜索，程序只需查找该标记。

这会加速未来的冗余查询吗？MySQL中是否有这样做的功能？我试图避免为每个保存的搜索创建一个新表。

谢谢，

肥中微子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:18:24.177

创建一个带有'tag, id' 的表，即所有找到的id 的列表，并将它们与一个标签相关联。

这可以正常工作，但是，如果添加了新内容，则不会更新搜索。您说要保存行而不是搜索。

如果要保存搜索，请创建一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:21:29.280

MySQL 确实有一个查询缓存[，](https://dev.mysql.com/doc/refman/5.5/en/query-cache-configuration.html)当与`SELECT SQL_CACHE`.

请注意，如果表中的数据发生更改，MySQL 查询缓存将始终失效，因此如果您的数据经常更新，这些结果将不会长时间保持缓存。但是，如果您的数据不经常更新，它将非常有效。

如果您希望用户的“存储搜索”即使在他们搜索的数据已更新时仍保持缓存，并且更关心节省数据库负载而不是结果是否新鲜，那么您将需要实现某种缓存在您的应用程序中 - 在 MySQL 客户端-服务器连接的“客户端”端。

# django - 如何在 Django 的 DetailView 中将 ForeignKey 显示为 RadioSelect 选项？

> ID：11789178
> 
> 赞同：1
> 
> 时间：2012-08-03T04:13:23.250
> 
> 标签：django, e-commerce, detailview

我正在学习如何在 python/django 中编程，并且我已经挑战自己为印刷企业建立一个电子商务网站。总体思路如下：

一旦客户选择了产品，他将不得不从一组选项（尺寸、边框宽度、材料）中进行选择，以便定制他的产品。值得一提的是，每个选项都具有将其与其他选项区分开来的特征。例如：每个尺寸都有一个宽度和一个高度，这是材质不需要的属性。然后他会上传一张图片（但我还没有），商店会处理他的订单。

因此，我选择将 models.py 设计如下（简化）：

```
class Product(models.Model):
    title = models.CharField(max_length = 150)
    slug = models.SlugField(max_length = 150)
    base_price = models.DecimalField(max_digits = 12, decimal_places = 2, default=0.00)

    class Meta:
        verbose_name = ('Product')
        verbose_name_plural = ('Products')

    #Methods. There is a method for each option.
    def get_materials(self):
        materials = self.materials.all()
        return materials

#There is a model for each option. Each model has a ForeignKey to Product.
class Material(models.Model):
    product = models.ForeignKey(Product, verbose_name = "Product", related_name="materials")
    name = models.CharField(max_length = 150)
    code = models.SlugField(max_length=150)
    price_per_meter = models.DecimalField(max_digits = 12, decimal_places = 2, blank = True, default = 0.00)
    created_at = models.DateTimeField(auto_now_add = True)

    class Meta:
        ordering = ["-created_at"]
        verbose_name_plural = "Materials" 
```

为了简化事情，我正在使用 DetailView。所以在我的 catalogue.urls.py 中：

```
from django.conf.urls import patterns, include, url
from django.views.generic import DetailView
from catalogue.models import Product

urlpatterns = patterns('',
    url(r'^(?P<pk>\d+)/$', DetailView.as_view(
        model = Product,
        template_name = "detail.html"
        )),
) 
```

所以，这是*最后*的问题：

**如何自定义我的 DetailView 以便在 UI 中每个选项都显示为 RadioSelect？**

已经发布了类似的问题，但它们与表单更相关：即如何在表单中将 ForeignKey 显示为 RadioSelect。

我目前的方法使用以下 detail.html

```
{% extends "base.html" %}

{% block content %}

<h1>{{ product.title }}</h1>

<h2>Please select one of the following:</h2>
<p>{{ product.get_materials }}</p>
<p>{{ product.get_sizes }}</p>
<p>{{ product.get_border_width }}</p>
<p>{{ product.get_border_color }}</p>

{% endblock %} 
```

这呈现以下内容： *我向数据库添加了一些随机数据*

```
Please select one of the following:

[<Material: Material 1>, <Material: Material 2>]

[<Size: Size 1>, <Size: Size 2>]

[<BorderWidth: Border 1>, <BorderWidth: Border 2>]

[<BorderColor: Color 1>, <BorderColor: Color 1>] 
```

任何正确方向的帮助/指出将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:32:54.087

简而言之，a`DetailView`用于显示数据。鉴于您正在向用户提出问题（“哪种材料？”、“哪种尺寸？”*等*），您几乎肯定会真的*想*使用表格。这就是表单的设计目的！

为了使以下工作，我建议您颠倒`ForeignKey`s 的定义方式；我假设您希望在多种产品中使用相同的材​​料，而不是相反！`material = models.ForeignKey(Material, related_name='products')`向您的中添加一个字段`Product`，并从中删除该`product`字段`Material` *等。*

在您的情况下，使用表单可能会非常容易。查看[“从模型创建表单”文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)，并尝试以下操作：

```
# urls.py
from django.views.generic import CreateView

urlpatterns = patterns('', ...
    url(r'^(?P<pk>\d+)/$', CreateView.as_view(
        model = Product,
        template_name = "add_product.html"
    )),
) 
```

这将为您提供默认`Select`小部件 - “从模型创建表单”文档（上）包含有关[自定义用于绘制表单字段的小部件的](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)信息。您需要创建一个新表单（继承自`ModelForm`）并将您的观点指向该表单：

```
# forms.py
from django import forms

from catalogue.models import Product

class ProductForm(forms.ModelForms):
    class Meta:
        model = Product 
        widgets = {
            'material': forms.RadioSelect()
            ...
        }

# urls.py

from catalogue.forms import ProductForm

# add the following parameter to your call to as_view():
...
    'form_class': ProductForm 
```

# sql - SQL - 满足条件时将行从一个表插入到另一个表

> ID：11789183
> 
> 赞同：0
> 
> 时间：2012-08-03T04:13:50.360
> 
> 标签：sql, database, sqlite, insert

这段代码有什么问题：

```
INSERT INTO main.table_1 
   (SELECT * 
    FROM TempDatabase.table_1 
    WHERE TempDatabase.table_1.ID != "5855CA0F8E23") 
```

我对 ID 设置了条件以防止重复（也因为我在 main.table_1 上应用了约束）。然而，当我在 SQLiteManager 中运行时，我得到一个语法错误“near SELECT”。

如果我删除了括号，由于违反了 main.table_1 上的约束，我仍然会遇到另一个错误（就像完全忽略 WHERE 条件一样！）

我在这里做错了什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:21:10.463

正确的语法是您的第二次尝试，不带括号。（括号用于定义您将插入的列名。）

您遇到了约束违规，因为不管您怎么想，将临时数据插入主数据库实际上违反了对主数据库表的某些约束，即使您排除了具有 id 的一条记录`5855CA0F8E23`。检查你的约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:22:06.457

您需要使用`IGNORE`或`REPLACE`（http://www.sqlite.org/lang_insert.html）

如果发生约束冲突，则将跳过行，并将继续：

```
INSERT OR IGNORE INTO main.table_1 SELECT * from TempDatabase.table_1 
```

如果发生约束冲突，记录 in`main.table_1`将被删除并插入整行 from `TempDatabase.table_1`：

```
INSERT OR REPLACE INTO main.table_1 SELECT * from TempDatabase.table_1 
```

没有“合并行”的方法 - 即将两个选项卡中的数据聚合到新行中。

# iphone - 应用程序终止后如何在 UIWebView 中显示最后一个 URL 2

> ID：11789185
> 
> 赞同：0
> 
> 时间：2012-08-03T04:14:33.987
> 
> 标签：iphone, ios, xcode

我已经尝试过这段代码，但无法让它工作。提前致谢。

```
(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:
 (NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
  [[NSUserDefaults standardUserDefaults] saveObject:
   [[request URL] absoluteString] forKey: @"SAVED-URL"];
} 
```

# ruby-on-rails - session_controller 之外的omniauth.auth 数据

> ID：11789190
> 
> 赞同：0
> 
> 时间：2012-08-03T04:15:17.690
> 
> 标签：ruby-on-rails, facebook, omniauth, parse-platform

基本上，我在我的 ruby​​ on rails 网站上使用了omniauth gem 来验证用户。parse.com 数据库的 authData 字段存储用户的详细信息。这很好用。

我被告知将用户的 Facebook id 存储在不同的字段中，以便于访问它。我一直坚持的是：1）我似乎无法将来自omniauth.auth的信息存储到session_controller中的数据库2）我可以从我的user_controller将东西存储在数据库中，但那里 `auth = request.env["omniauth.auth"]`似乎不起作用。

身份验证内容的范围是否仅在会话控制器中？

感谢帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:26:08.723

auth 哈希仅在获取回调的控制器中可用。如果要将其传递给另一个，则必须将其存储在会话中或使用其他方式进行传递。您可以查看[这个 omniauth railscast](http://railscasts.com/episodes/236-omniauth-part-2)，其中处理了这个确切的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:31:24.430

而不是使用此应用程序并在其中处理相同的问题

```
 https://github.com/kashiftufail/facebook_login_using_devise_and_omniauth_facebook 
```

# facebook - Auth Dialog Preview User 通过 Facebook 应用程序发布读取活动失败

> ID：11789193
> 
> 赞同：1
> 
> 时间：2012-08-03T04:15:56.863
> 
> 标签：facebook, facebook-opengraph

我们正在为我们的 facebook 应用程序使用内置的“读取”操作，将活动发布`'... read an article'`到用户的时间轴上。该发布适用于该应用程序的所有开发人员。

但是，当我们尝试使用“Auth Dialog Preview User”进行发布时（Facebook 使用它来批准操作的使用），发布失败并出现以下 OAuthException：

`{"Code" : 2, "message": "An unexpected error has occurred. Please retry your request later."}`

这导致我们提交的待批准操作被拒绝：`"We are unable to test this action according to the usage instructions you provided."`

关于可能导致上述错误的任何想法？

以下是我们发布操作的方式：

```
FB.api(
        '/me/news.reads',
        'post',
        { article : uri },
        function(response) {
                       if (!response || response.error) {
                          console.log('Error occured while publishing as an article!');
                          console.log(response);
                       } else {
                          console.log('Post as an article was successful! Action ID: ' + response.id);
                       }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:00:00.333

在应用设置中禁用沙盒模式。

# c# - String.Format - 如何格式化为 x 位（不考虑小数位）？

> ID：11789194
> 
> 赞同：12
> 
> 时间：2012-08-03T04:16:03.250
> 
> 标签：c#, string-formatting, decimal-point

我需要将浮点数格式化为 x 个字符（在我的情况下为 6 个，包括小数点）。我的输出还需要包含数字的符号

所以给定输入，这是预期的输出

```
1.23456   => +1.2345

-12.34567 => -12.345

-0.123456 => -0.1234

1234.567  => +1234.5 
```

请假设在最后一个字符之前总是有一个小数位。即不会有 `12345.6`数字输入 - 输入将始终小于或等于`9999.9`。

我认为这必须有条件地完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:38:08.330

您提到“x 个字符”。所以我们可以将其简化为“x-1 位”，只需编写显示 x 位的代码。

我认为将[“G”数字格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString)传递给[`Double.ToString()`](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)尽可能接近内置。

```
double d = 1234.56789;
string s = d.ToString("G6");           // "1234.57" 
```

所以我们只是将其扩展为在前面手动添加“+”：

```
if (d > 0)
    s = "+" + s; 
```

将它们放在一个扩展方法中：

**编辑：包括截断的可选参数**

```
public static string ToStringWithSign(this double d, int digits, bool truncate = false)
{
    if (truncate) {
        double factor = Math.Pow(10, digits - 1);
        d = Math.Truncate(d * factor) / factor;
    }

    string s = d.ToString("G" + digits);
    if (d > 0)
        s = "+" + s;
    return s;
} 
```

结果：

```
(1234.56789).ToStringWithSign(4);      // "+1235"
(1234.56789).ToStringWithSign(5);      // "+1234.6"
(1234.56789).ToStringWithSign(6);      // "+1234.57"
(-1234.56789).ToStringWithSign(6);     // "-1234.57"

(1.2345678).ToStringWithSign(6);       // "+1.23457"
(1.2345678).ToStringWithSign(6, true); // "+1.23456" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T05:06:48.607

如果要截断：

```
string str = number.ToString("+0.00000;-0.00000").Substring(0,7); 
```

如果要四舍五入：

```
string str = number.ToString("+0.0000;-0.0000"); 
```

编辑：如果需要，可以编写一个简单的包装器，将位数作为参数：

```
string FormatDecimal(decimal value, int digits )
{
    return value
        .ToString(String.Format("+0.{0};-0.{0}", new string('0',digits - 2)))
        .Substring(0,digits+1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:06:49.567

我相信如果你想输出到包括小数点在内的 6 个字符，你可以看看这个

```
double val1 = -99.56789;
//string strval = val1.ToString("+#.######;-#.######");// add # for additional decimal places
string strval = val1.ToString("+#.000000;-#.000000");    
Console.WriteLine(strval.Substring(0,strval.Length >= 7 ? 7 : strval.Length));
 //output -99.567 if positive would output +99.567 
```

您只需要将值转换为字符串，然后从输出的字符串中提取相关的 6 个字符（另外一个用于符号）。

在这种情况下没有四舍五入并且适合您的需要，希望这是您所寻找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T05:11:08.390

这是一种无需格式字符串的透明方法（“F”除外）：

```
 static void Main()
  {
     double y = 1.23456;
     Console.WriteLine(FormatNumDigits(y,5));
     y= -12.34567;
     Console.WriteLine(FormatNumDigits(y,5));
     y = -0.123456;
     Console.WriteLine(FormatNumDigits(y,5));
     y = 1234.567;
     Console.WriteLine(FormatNumDigits(y,5));

     y = 0.00000234;
     Console.WriteLine(FormatNumDigits(y,5));

     y = 1.1;
     Console.WriteLine(FormatNumDigits(y,5));
  }

  public string FormatNumDigits(double number, int x) {
     string asString = (number >= 0? "+":"") + number.ToString("F50",System.Globalization.CultureInfo.InvariantCulture);

     if (asString.Contains('.')) {
        if (asString.Length > x + 2) {
           return asString.Substring(0, x + 2);
        } else {
           // Pad with zeros
           return asString.Insert(asString.Length, new String('0', x + 2 - asString.Length));
        }
     } else {
        if (asString.Length > x + 1) {
           return asString.Substring(0, x + 1);
        } else {
           // Pad with zeros
           return asString.Insert(1, new String('0', x + 1 - asString.Length));
        }
     }
  } 
```

输出：

```
 +1.2345
  -12.345
  -0.1234
  +1234.5
  +0.0000
  +1.1000 
```

**编辑**

请注意，它不会切断尾随零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T04:41:15.353

试试这个：

```
 double myDouble = 1546.25469874;
        string myStr = string.Empty;
        if (myDouble > 0)
        {
            myStr = myDouble.ToString("+0.0###");
        }
        else
        {
            myStr = myDouble.ToString("0.0####");
        }
        if (myStr.Length > 7)
        {
            myStr = myStr.Remove(7).TrimEnd('.');
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T04:58:58.557

这应该做你想要的。不过，它*确实会*舍入最后一位数字。

```
static string Format(double d)
{
    // define how many number should be visible
    int digits = 5;

    // Get the left part of the number (ignore negative sign for now)
    int s = Math.Abs(d).ToString("####0").Length;

    // Total size minus the amount of numbers left of the decimal point
    int precision = digits - s;

    // Left side for positive, right side for negative.
    // All it's doing is generating as many 0s as we need for precision.
    string format = String.Format("+###0.{0};-###0.{0}", new String('0', precision));
    return d.ToString(format);
} 
```

鉴于您的输入，这将返回：

```
+1.2346
-12.346
-0.1235
+1234.6 
```

它会处理零没问题：

```
+0.1000
+0.0000
+1000.0 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-03T04:32:31.467

正如MSDN[在此处](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)所述，“0”是数字的占位符。所以，你只需要：

`myDecimal.ToString("000000");`

或者

`myDecimal.ToString("######");`

如果您不希望出现数字而不是零。

# javascript - Jquery ajax请求不起作用

> ID：11789202
> 
> 赞同：2
> 
> 时间：2012-08-03T04:17:43.197
> 
> 标签：javascript, jquery, html, forms

我之前用过同样的代码，查了查，没有报错。似乎不知何故，这段代码没有做它应该做的事情。我不知道为什么。请帮忙。

ajax 代码似乎不执行 ajax 请求，而是根据表单在 HTML 中设置的内容提交正常的 HTTP get/post 请求。这意味着页面不断刷新。似乎成功函数甚至没有被调用。我已经检查了其余代码是否正在运行，直到**$.ajax({**刷新页面的行。这可能是我设置表单的方式吗？请注意，我没有提交按钮，因为表单根据按下的按钮向服务器发送不同的操作。

这是HTML代码：

```
<form id="frmVerify" name="frmVerify" method="post">
<p>Your account has not been verified. You must verify your email to continue logging into your account.</p>
<p>A verification token was sent to your email address, <strong id="username" name="username"><?php echo $_SESSION['username']; ?></strong>. Note that this token expires after 24 hours of issue.</p>
<p>Please check your email to retrieve this token:</p>

  <p>
  <input type="text" name="token" id="token" />
  <button name="action" id="verify" value="<?php echo ACT_VERIFY; ?>">Verify</button>
  </p>
  <p>You can also: </p>
<p>
  <button name="action" id="send" value="<?php echo ACT_SEND_TOKEN; ?>">Send another token</button><br />

  <button name="action" id="change" value="<?php echo ACT_CHANGE_EMAIL; ?>">Change Email</button><br />

  <button name="action" id="delete" value="<?php echo ACT_DELETE_ACCOUNT; ?>">Delete Account</button>
</p>
<p>
  <input type="hidden" name="requester" id="requester" value="Verification" />
</p>
<p><a href="logout.php">Log out</a></p>
</form> 
```

这是JQUERY代码：

```
function submitForm(action){
    var username = $("#username").html();
    var token = $("#token").val();
    var requester = $("#requester").val();
    if(validateLogin()){
        $.ajax({
            type: "post",
            url: "verification.php",
            data: "username="+username+"&token="+token+"&action="+action+"&requester="+requester,
            success: function(data) {
                try{
                    var jsonObj = $.parseJSON(data);
                    processOutput(action, jsonObj);
                }catch(e){
                    $("#output").html("PHP module returned non JSON object: <p>"+data+"</p>");
                }//try
            }//success function
        });//ajax
    }else{
        alert("Please fill UserName & Password!");
        return false;
    }//if validate
}

$(document).ready(function(){

$("#verify").click(function(){
    var action = $(this).val();
    submitForm(action);
});

$("#send").click(function(){
    var action = $(this).value();
    submitForm(action);
});

$("#change").click(function(){
    var action = $(this).value();
    submitForm(action);
});

$("#delete").click(function(){
    var action = $(this).value();
    submitForm(action);
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:35:45.583

我相信`<button>`元素默认是提交按钮，因此当按下按钮时，您的点击处理程序会调用该`submitForm()`函数，但随后会发生默认行为并提交表单。尝试使用以下命令指定按钮：

```
<button type="button" ... 
```

或者`false`从单击处理程序返回（如果您需要按钮为禁用 JS 的浏览器执行传统提交）。

请注意，您的代码可以大大简化，因为您的所有`.click()`处理程序都执行相同的操作：

```
$(document).ready(function(){
    $("#frmVerify button").click(function(){
        submitForm($(this).val());
        return false;
    });
}); 
```

也就是说，当单击任何带有表单的按钮时，会将其值传递给`submitForm()`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:36:50.737

它表现得像普通帖子的原因是`button`元素默认是提交类型，因此它在 javascript 完成执行之前发布。将您的 html 按钮更改为以下内容：

```
<button type="button" name="action" id="verify" value="<?php echo ACT_VERIFY; ?>">Verify</button> 
```

您的代码可能还有很多需要修复的地方，但问题集中在为什么它执行的是帖子而不是 ajax 帖子。

这是一个演示更改的jsfiddle。-- [http://jsfiddle.net/GSVdQ/1/](http://jsfiddle.net/GSVdQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:42:46.710

`$(this).value()`听起来不太对...

# jquery - jquery：如何从 htmlstring 中获取值？

> ID：11789204
> 
> 赞同：0
> 
> 时间：2012-08-03T04:18:13.790
> 
> 标签：jquery, jquery-selectors

我有一个这样的脚本：

```
<script>
    var stuff = '<input id="testinput" name="testinput" type="text" value="this is the right one" /><input id="testinput2" name="testinput2" type="text" value="this is the wrong one" />'
</script> 
```

我如何使用 jQuery 从 stuff 变量中获取值（“这是错误的”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T04:20:07.470

使用`.val`方法。

```
var value = $(stuff).val(); 
```

***更新：*** 没有注意到您的字符串中有多个输入。在这种情况下，您需要使用`.map`方法将值作为数组返回。

***[演示。](http://jsfiddle.net/AjCh7/)***

```
var stuff = '<input id="testinput" name="testinput" type="text" value="this is the one" /><input id="testinput2" name="testinput2" type="text" value="this is the wrong one" />';

console.log($(stuff).map(function() {
    return $(this).val();
}));​ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T04:19:18.950

```
var stuff = '<input id="testinput" name="testinput" type="text" value="this is the one" /><input id="testinput2" name="testinput2" type="text" value="this is the wrong one" />';

console.log($(stuff).val()); // This is the one 
```

[**演示**](http://jsfiddle.net/ricardolohmann/Bfmxd/)

```
console.log($($(stuff)[1]).val());​ // This is the wrong one 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:26:11.050

用于`val()`获取值或如果您使用属性`.attr()`

```
var v = $(stuff).val();

var attr = $(stuff).attr('attribute you want'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T15:15:59.043

在选择器失败之前，我遇到了类似的问题，直到我这样做：

```
var stuff = '<input id="testinput" name="testinput" type="text" value="this is the one" /><input id="testinput2" name="testinput2" type="text" value="this is the wrong one" />';

var myValue = HtmlElementAttribute(stuff, 'testinput2', 'value');

function HtmlElementAttribute(htmlString, elementId, attributeName) {
    var foundValue = '';
    $(htmlString).filter(function (x) {
        var idX = eval('$(htmlString)[x].id');
        if (idX && idX == elementId) {
            foundValue = $(eval('$(htmlString)[x].outerHTML')).attr(attributeName);
        }
    });
    return foundValue;
} 
```

# magento - 从magento中的url中删除白色sapces

> ID：11789210
> 
> 赞同：0
> 
> 时间：2012-08-03T04:18:41.310
> 
> 标签：magento

我有 mageanto 网站，我在菜单列表中写下条件。

那是菜单活动类。

我写了这个条件：

```
<li class="<?php if (Mage::helper('core/url')->getCurrentUrl() === $this->getUrl('about-fruit-store')):?>active<?php endif;?>"><a href="<?php echo $this->getUrl('about-fruit-store')?>"><?php echo $this->__('About Us') ?></a></li> 
```

但任何时候都不会显示活动课程。

我想显示 li 中的活动课程。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:23:19.603

Var_dump the two statements and the if statement, they should be the same length and the if should be true, obviously it is not. If it is there should be an active. Easy going: WHY is the if false. Thats the question to answer.

# php - 检查页面是否包含 或者 tags, if yes load files

> ID：11789212
> 
> 赞同：1
> 
> 时间：2012-08-03T04:18:48.107
> 
> 标签：php, html, if-statement

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:35:59.680

I think you're focusing your effort in the wrong place. Make sure the files are both properly cached and minified, and include them on every page. The user will only download them once, and use the cached version for all further pages.

If you absolutely must,

Using PHP's DOM extension can solve this problem.

```
<?php

    $html = <<<HTML
<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>

  <code></code>

</body>
</html>
HTML;

    $doc = new DOMDocument();
    $doc->loadHTML($html);

    if ($doc->getElementsByTagName("code")->length != 0) {
        $script_element = $doc->createElement("script");
        $script_element->setAttribute("src", "prism.js");

        $style_element = $doc->createElement("link");
        $style_element->setAttribute("rel", "stylesheet");
        $style_element->setAttribute("href", "prism.css");

        $head_element = $doc->getElementsByTagName("head")->item(0);
        $body_element = $doc->getElementsByTagName("body")->item(0);

        $body_element->appendChild($script_element);
        $head_element->appendChild($style_element);
    }

    $doc->formatOutput = true;
    echo $doc->saveHTML(); 
```

The upside of this, is that it will inject the style and script in the correct places. Style at the head, and script at the end of `<body>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:27:00.117

Download PHP Simple HTML DOM from

[http://www.coursesweb.net/php-mysql/simple-php-html-dom_pc](http://www.coursesweb.net/php-mysql/simple-php-html-dom_pc)

extract it and put it into your project code folder and write following code :

```
include('php_html_dom/simple_html_dom.php');

// Create a DOM object from a HTML file
$html = file_get_html('test.htm');

// Write a function with parameter "$elm"
function add_css_js($elm) {
  // if pre or code tag, add css and js
  if ($elm->tag=='pre' || $elm->tag=='code') {
    echo '<link rel="stylesheet" src="prism.css" />';
    echo '<script src="prism.js"></script>';
  }
} 
$html->set_callback('add_css_js');
echo $html; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:12:07.313

Output can be stored in a buffer instead of sending it directly from the script. Before sending out the content of the buffer you can modify it using a callback function.

```
<?php
// change the output before sending it out. Replace the first occurrence of <pre>
// with your html.
function callback($buffer)
{
    $str = "<link rel=\"stylesheet\" src=\"prism.css\" />" .
        "<script src=\"prism.js\"></script>";
    if (strpos($buffer, "<pre>") !== false) {
        $buffer = preg_replace('/<pre>/', $str . '<pre>', $buffer,1);
    }
    return $buffer;
}

// turn on your buffer
ob_start("callback");

?>
<html>
<body>
<pre> hello </pre>
<p>It's like comparing apples to oranges.</p>
</body>
</html>
<?php
// flush you content here.
ob_end_flush();

?> 
```

Output:

```
<html>
<head></head>
<body>
    <link rel="stylesheet" src="prism.css">
    <script src="prism.js"></script>
    <pre> hello </pre>
    <p>It's like comparing apples to oranges.</p>
</body>
</html> 
```

Reference: [http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-03T04:24:03.297

You could either use a preg_match or stristr functions.

For example:

```
$page = 'Your page content <pre>Something</pre>';

if (stristr($page,'<pre>') || stristr($page,'<code>')) {
   echo '<link rel="stylesheet" src="prism.css" />';
   echo '<script src="prism.js"></script>';
} 
```

If by "Page" you mean the page itself then use the output buffet like this:

```
ob_start();

echo 'Your page stuff yay!';
echo '<pre>Something</pre';
echo 'End of page';

$page = ob_get_contents();
ob_end_flush();

if (stristr($page,'<pre>') || stristr($page,'<code>')) {
   echo '<link rel="stylesheet" src="prism.css" />';
   echo '<script src="prism.js"></script>';
} 
```

# node.js - Expressjs 未在 heroku 上加载样式表，出现 500 错误

> ID：11789216
> 
> 赞同：4
> 
> 时间：2012-08-03T04:19:44.723
> 
> 标签：node.js, express, stylesheet, pug, stylus

我在 heroku 上运行 Expressjs 安装，它没有加载样式表。

我按 ctrl+u 然后单击样式表链接，并收到此错误：

```
TypeError: Object #<SendStream> has no method 'on'
    at Object.static [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/static.js:75:8)
    at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 
```

当我转到 url '/stylesheets/style.css' 时，我收到此错误：

```
Express
500 TypeError: Object #<SendStream> has no method 'on'

    at Object.static [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/static.js:75:8)
    at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at /app/node_modules/stylus/lib/middleware.js:174:46
    at /app/node_modules/stylus/lib/middleware.js:208:20 
```

在本地一切正常。

这是 package.json

```
 {
    "name": "app-name",
      "version": "0.0.1",
      "private": true,
      "scripts": {
      "start": "node app"
     },
     "dependencies": {
       "express": "3.0.0rc1",
       "jade": "*",
       "stylus": "*"
     }
   } 
```

app.js：

```
/**
 * Module dependencies.
 */
 var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/about', routes.about);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

过程文件：

```
web: node app.js 
```

如果我继续刷新，它会使应用程序崩溃。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T04:31:36.227

我可以通过在 package.json 中指定引擎依赖项来解决这个问题

```
{
  "name": "app-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.0.0rc1",
    "jade": "*",
    "stylus": "*"
  },
  "engines": {
    "node": "0.8.4",
    "npm": "1.1.41"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:01:03.617

我找到了答案！你的应用推送到云端的运行时错误你可以这样做

```
vmc push yourappname --runtime node08 
```

我希望我能帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T07:35:31.743

我刚刚遇到了同样的问题，发现运行以下命令（通过 Heroku CLI）对我有用：

heroku 配置：添加 NODE_ENV=production

这与 Silas 提到的指定 Node 和 NPM 的版本有关。

（通过[http://quickleft.com/blog/getting-started-with-express-in-node](http://quickleft.com/blog/getting-started-with-express-in-node)）

# node.js - 使用 Express.js 在 Node.js 中设置路由的最佳方式

> ID：11789218
> 
> 赞同：8
> 
> 时间：2012-08-03T04:20:04.837
> 
> 标签：node.js, express

我想知道如何在 Express.js 中构建路由的选项。这是我现在的应用程序目录：

```
 ├── public
  │   ├── images
  │   ├── javascripts
  │   │   ├── showLogin.js
  │   │   └── showSignup.js
  │   └── stylesheets
  │       ├── dash.styl
  │       ├── reset.styl
  │       ├── space.styl
  │       ├── style.css
  │       ├── style.styl
  │       └── typography.styl
  ├── routes
  │   └── index.js
  ├── views
  │   ├── dash.jade
  │   ├── index.jade
  │   ├── layout.jade
  │   └── space.jade
  ├── app.js
  └── package.json 
```

是否最好将 routes/index.js 分解为多个单个路由文件？这个我试过了，显然我不太擅长，哈哈。

另一种选择是在某处引入 lib 目录。人们通常在哪里这样做？

任何其他建议都会动摇！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T18:30:52.603

我们几个在工作中创建了一个小型参考应用程序来编写标准的 Express 应用程序结构。它并不过分复杂或任何东西，我们只是试图创建一些易于理解的东西，并且具有允许应用程序随着时间的推移而增长的结构。

你可以在这里找到它：[https ://github.com/EAAppFoundry/tableau](https://github.com/EAAppFoundry/tableau)

当您在那里时，请随时向我们提供反馈。我确信它可以改进。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T04:36:59.037

查看我对[ExpressJS 如何构建应用程序的回答？](https://stackoverflow.com/a/7350875/266795). 我喜欢将路由分组到控制器（登录、购物车、偏好、照片等）中，并清晰地分离关注点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-29T16:39:50.080

看看 PayPal 使用[KrakenJS](http://www.krakenjs.com)所做的工作。它建立在 express 之上，但它添加了一个配置层，以保持路由等超级整洁。

# javascript - 如何将下一个和上一个按钮添加到图像库

> ID：11789221
> 
> 赞同：0
> 
> 时间：2012-08-03T04:20:19.673
> 
> 标签：javascript, jquery, css

我知道这个问题已经被问到了，我已经在这里搜索过，但是a）我似乎无法弄清楚如何调整我发现的内容，b）我还有另一个小问题要尝试添加我的画廊式布局的下一个和上一个按钮。

这是我的页面的链接：

[http://mymediaculture.com/_broadway_branding/index2.html](http://mymediaculture.com/_broadway_branding/index2.html)

第二个问题是我对我的图像使用纯 css 淡入/淡出过渡效果，但我找不到在页面加载时显示画廊的第一张图像的方法。

如您所见，我已经准备好下一个/上一个链接。只是对 js/jquery 了解不够，无法让它们工作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:33:02.730

html

```
 <div id="top_mid_mid">
    <a rel="nofollow" target="_blank" href="#">
        <img id="mypicture" border="0" alt="portfolio" src="images/recent/recent1.jpg" />
    </a>
    <div id="prev"><a class="current" href="#"  title="portfolio"><img  alt="prev" src="images/prev.gif" id="prevlink" /></a></div>
        <div id="next"><a class="current" href="#"   title="portfolio"><img  alt="next" src="images/next.gif" id="nextlink" /></a></div>

</div> 
```

javascript

```
window.onload= recent_pic;
window.onload= toogle;

var mypix=new Array("images/recent/recent1.jpg","images/recent/recent2.jpg","images/recent/recent3.jpg","images/recent/recent4.jpg","images/recent/recent5.jpg");

var thispic = 0;

function recent_pic(){
    document.getElementById("prevlink").onclick=processprev;
    document.getElementById("nextlink").onclick=processnext;

        document.getElementById(1).onclick =  one;
        document.getElementById(2).onclick =  tow;
        document.getElementById(3).onclick =  three;
        document.getElementById(4).onclick =  four;
        document.getElementById(5).onclick =  five;

}

/******************for arrow ****************/
function processprev(){
    if(thispic==0){
        thispic=mypix.length;
    }
    thispic--;
    document.getElementById("mypicture").src= mypix[thispic];
    return false;
}

function processnext(){
    thispic++;
    if(thispic==mypix.length){
        thispic=0;
    }
    document.getElementById("mypicture").src= mypix[thispic];
    return false;
}

/******************for arrow end****************/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:25:55.320

我已经使用 jQuery 完成了带有上一个和下一个按钮的图像幻灯片放映的完整箱。我觉得这个Demo应该对你有帮助，所以demo链接如下。

**演示：** [http ://codebins.com/bin/4ldqp8x](http://codebins.com/bin/4ldqp8x)

**HTML：**

```
<div class="topbar">
  <ul id="navigation">
    <li id="previous">
      <a href="#tag">
        Previous
      </a>
    </li>
    <li class="active">
      <a href="#">
        1
      </a>
    </li>
    <li>
      <a href="#">
        2
      </a>
    </li>
    <li>
      <a href="#">
        3
      </a>
    </li>
    <li>
      <a href="#">
        4
      </a>
    </li>
    <li>
      <a href="#">
        5
      </a>
    </li>
    <li>
      <a href="#">
        6
      </a>
    </li>
    <li>
      <a href="#">
        7
      </a>
    </li>
    <li>
      <a href="#">
        8
      </a>
    </li>
    <li>
      <a href="#">
        9
      </a>
    </li>
    <li>
      <a href="#">
        10
      </a>
    </li>
    <li id="next">
      <a href="#tag">
        Next
      </a>
    </li>
  </ul>
</div>
<div id="images">
  <div class="slide">
    <img src="http://thumbs.myopera.com/sz/colx/Mathilda%C2%B4s%20Wallpaper/albums/104123/Animal%20Friends.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://marowall.ru/Jivotnie/Grizuni/Kroliki1024/8/9.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://www.mejoresmascotas.com/wp-content/uploads/2009/02/perrito.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://data.whicdn.com/images/16010691/white_lion_large.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://koprol.zenfs.com/system/mugshots/0153/9924/index.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://cdn.cutestpaw.com/wp-content/uploads/2011/11/Cute-Squirrel-s.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://thumbs.myopera.com/sz/colx/adilsaadi/albums/5861552/horses.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://fundartspring2011.wikispaces.com/file/view/puppy_dogs_14.jpg/217071218/297x225/puppy_dogs_14.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://1.bp.blogspot.com/-zfT5EAh0Tz8/TbJVRf5wywI/AAAAAAAAAE4/TWWdSLhx9Io/s1600/ardilla.jpg" width="250" height="200" />
  </div>
  <div class="slide">
    <img src="http://thumbs.myopera.com/sz/colx/skafridi/albums/6474892/animals-pictures-birds-bluebird.jpg" width="250" height="200" />
  </div>
</div> 
```

**CSS：**

```
 .topbar{
  position:fixed;
  top:0;
  left:0;
  height:35px;
  background:none repeat scroll 0 0 #B0832E;
  border-shadow:1px 0 4px rgba(0, 0, 0, 0.4);
  font-size:12px;
  width:100%;
  z-index:9999;

}

#navigation{

  border: 1px solid red;
  list-style: none outside none;
  margin: 5px auto 0;
  text-align: center;
  width: 60%;
  z-index: 3;
}
#navigation li{
  display:inline-block;
  background:none repeat scroll 0 0 rgba(255, 255, 255, 0.9);
  box-shadow:1px 1px 2px rgba(0, 0, 0, 0.2);
  border:1px solid white;
  color:#444444;
  font-size:12px;
  text-transform:uppercase;

}
#navigation li a{
  color:#444444;
  text-decoration:none;
  padding:2px 5px;
}
#navigation li.active a, #navigation li:hover a{
  color:#fff;
  background:#333;
  text-decoration:underline;
}
#images{
  text-align:center;
}
.slide{
  padding:5px;
  display:none;
  position:absolute;
  top:35;
  margin-left:25%;
  background:#2255a9;
} 
```

**jQuery：**

```
$(function() {
    //Show Current Active Image Slide On Document Ready
    showSlide();

    $("li", $("#navigation")).click(function() {
        var activeIndex = $("li.active", $("#navigation")).index();

        if (typeof $(this).attr('id') != "undefined") {

            if ($(this).attr('id') == "previous" && activeIndex > 1) {
                //set PREV Active Image
                $("li", $("#navigation")).removeClass('active');
                $("#navigation li:eq(" + (activeIndex - 1) + ")").attr('class', 'active');

            } else if ($(this).attr('id') == "next" && activeIndex < ($("li", $("#navigation")).length - 2)) {
                //set NEXT Active Image
                $("li", $("#navigation")).removeClass('active');
                $("#navigation li:eq(" + (activeIndex + 1) + ")").attr('class', 'active');
            }
        } else {
            //set Active Image which slide no is clicked    
            $("li", $("#navigation")).removeClass('active');
            $(this).attr('class', 'active');
        }
        //Check if Different Slide has been clicked or Move then only load..
        if (activeIndex != $("li.active", $("#navigation")).index()) {
            showSlide(); //Call to show active image
        }
    });

});
//Function to Show Current Active Image Slide
function showSlide() {
    //Get Current Index of Active LI
    var i = $("li.active", $("#navigation")).index();
    //Check Range of Current Index
    if (i > 0 && i < ($("li", $("#navigation")).length - 1)) {
        //FadeOut all Images
        $(".slide", $("#images")).fadeOut(1000);
        //FadeIn Only Current Active Indexed Slided
        $(".slide:eq(" + (i - 1) + ")", $("#images")).fadeIn(3000);

    }

} 
```

**演示：** [http ://codebins.com/bin/4ldqp8x](http://codebins.com/bin/4ldqp8x)

# asp.net-mvc - 识别网络爬虫

> ID：11789223
> 
> 赞同：2
> 
> 时间：2012-08-03T04:21:03.823
> 
> 标签：asp.net-mvc, web-crawler

以下属性是否足够可靠以识别搜索引擎网络爬虫？

[`Request.Browser.Crawler`](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.crawler.aspx)

如果我的网站之前没有访问过该网站并且我获得的点击量比我的分析建议的要多，我的网站会根据页面请求创建一个新用户作为访客。- 多很多。

我使用上面的代码片段只创建合法的用户访客帐户，但我认为一些爬虫正在通过。

也许我可以使用 HttpRequest UserAgent 属性来识别它们。如果是这样，有人可以建议一个当前爬虫名称的列表，我相信例如 bing bot 是 call bingbot ，如此[处](http://onlinehelp.microsoft.com/en-us/bing/hh204496.aspx)所述。

```
Request.UserAgent 
```

**更新：**

我确信他们没有被使用 Request.Browser.Crawler 识别，因为来自 65.52.110.143 的请求是连环罪犯，我认为这是一个 bingbot。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:32:50.110

## Request.Browser.Crawler 遗憾地过时了

您可以手动添加对其他用户代理的检测作为机器人。使用[**Browser Element**](http://msdn.microsoft.com/en-us/library/ms228122.aspx)而不是[browserCaps](http://msdn.microsoft.com/en-us/library/sk9az15a.aspx)，因为它在 .NET 2.0 中已被弃用

例子：

```
<browsers>
    <browser id="Googlebot" parentID="Mozilla">
        <identification>
            <userAgent match="^Googlebot(\-Image)?/(?'version'(?'major'\d+)(?'minor'\.\d+)).*" />
        </identification>
        <capabilities>
            <capability name="crawler" value="true" />
        </capabilities>
    </browser>
    .
    .
    .
</browsers> 
```

这必须以 .browser 扩展名保存`App_Browsers`在应用程序的目录下。

**[（匹配的正则表达式列表）](http://support.stormhosts.net/showthread.php?t=739)**

# ruby - Sinatra 应用程序无法运行

> ID：11789235
> 
> 赞同：1
> 
> 时间：2012-08-03T04:23:35.013
> 
> 标签：ruby, sinatra

我使用 RubyGems 安装了 Sinatra，创建了一个名为 hello.rb 的简单文件

文件包含：

```
 require 'rubygems'
require 'sinatra'

get '/' do
  puts "Hello World"

end 
```

我在终端上导航到 mac 上的桌面到我保存 hello.rb 并通过以下方式运行文件：ruby hello.rb 它给了我消息它正在这个端口 4567 上使用 WEBrick 运行我去了 localhost:4567 然后我得到了这条消息“Sinatra 不知道这个小曲。”

我是否必须将 hello.rb 文件保存到 WEBrick 服务器文件夹才能使其工作？如果是这样，该文件夹位于 mac 上的哪个位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:37:32.480

你必须返回一些东西，如：

```
get '/' do
  "Hello World" # the return is implicit
end 
```

然后它将起作用。`puts`打印到命令行但返回 nil，因此没有任何内容返回给 sinatra。

# android - 在文本框或按钮外单击会以 IllegalStateException 关闭我的应用程序

> ID：11789238
> 
> 赞同：0
> 
> 时间：2012-08-03T04:23:52.117
> 
> 标签：android, android-layout, android-emulator, android-widget, android-sdk-2.3

下面是我使用的 Java 文件。所有代码都运行良好，但上面的错误仍然存​​在。任何人都可以看到问题吗？

```
package tip.calculator;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class TipCalculator extends Activity 
{
    private Button enter;
    EditText myEditField;
    EditText myEditField2;
    float percentage = 0;
    float percentageInp = 0;
    float billAmount = 0;
    double output = 0; 
    String output1 = "";
    Button clearButton ;
    TextView textView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myEditField = (EditText) findViewById(R.id.percentText);
        enter = (Button)findViewById(R.id.button1);
        myEditField2 = (EditText) findViewById(R.id.billText);
        clearButton = (Button) findViewById(R.id.clearButton);

        enter.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                TextView errors;
                textView = (TextView) findViewById(R.id.textView1);
                errors = (TextView) findViewById(R.id.textView4); 
                int a = 0;
                if(myEditField2.getText().toString().equals("")) {
                    errors.setText("Error");
                } else {
                    a++;
                }

                if(myEditField.getText().toString().equals("")){
                    errors.setText("Error");
                } else {
                    a++;
                }

                if(a == 2) {
                    percentageInp = Float.parseFloat(myEditField.getText().toString());
                    billAmount = Float.parseFloat(myEditField2.getText().toString());
                    percentage = ((float)percentageInp /100);

                    output = (double)(billAmount * percentage);

                    double result = output * 100;
                    result = Math.round(result);
                    result = result / 100;

                    output1 = Double.toString(result);

                    View.setText(output1 + " $");
                    errors.setText("");
                }
            }
        });

        clearButton.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                TextView errors;
                textView = (TextView) findViewById(R.id.textView1);
                errors = (TextView) findViewById(R.id.textView4); 
                int a = 0;

                if (myEditField2.getText().toString().equals("")) {
                    myEditField.setText("");
                    percentage = 0;
                    percentageInp = 0;
                    billAmount = 0;
                    output = 0; 
                    textView.setText("");
                    output1 = "";
                } else {
                    a++;
                }

                if(myEditField.getText().toString().equals("")) {
                    myEditField2.setText("");
                    percentage = 0;
                    percentageInp = 0;
                    billAmount = 0;
                    output = 0; 
                    output1 = "";
                    textView.setText("");
                 } else {
                    a++;
                 }

                 if (a == 2) {
                    myEditField.setText("");
                    myEditField2.setText("");
                    percentage = 0;
                    percentageInp = 0;
                    billAmount = 0;
                    output = 0; 
                    output1 = "";

                    textView.setText("");
                    errors.setText("");
                }
            }
        });
    }
} 
```

这是logcat，我得到一个我根本不明白的错误。我从不调用方法*`onEnterClick()`*？

```
08-02 21:17:37.205: E/AndroidRuntime(27185): FATAL EXCEPTION: main
08-02 21:17:37.205: E/AndroidRuntime(27185): java.lang.IllegalStateException: Could not find a method onEnterClick(View) in the activity class tip.calculator.TipCalculator for onClick handler on view class android.widget.RelativeLayout with id 'errorText'
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.view.View$1.onClick(View.java:3085)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.view.View.performClick(View.java:3620)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.view.View$PerformClick.run(View.java:14292)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.os.Handler.handleCallback(Handler.java:605)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.os.Looper.loop(Looper.java:137)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at java.lang.reflect.Method.invokeNative(Native Method)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at java.lang.reflect.Method.invoke(Method.java:511)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at dalvik.system.NativeStart.main(Native Method)
08-02 21:17:37.205: E/AndroidRuntime(27185): Caused by: java.lang.NoSuchMethodException: onEnterClick [class android.view.View]
08-02 21:17:37.205: E/AndroidRuntime(27185):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at java.lang.Class.getMethod(Class.java:915)
08-02 21:17:37.205: E/AndroidRuntime(27185):    at android.view.View$1.onClick(View.java:3078)
08-02 21:17:37.205: E/AndroidRuntime(27185):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:34:47.270

我认为您也在 XML 布局中定义了 onclick 方法。并且您已经在程序中编写了 onclick 侦听器。从您的 xml 布局中删除以下行，您的程序可以正常工作：

```
android:onclick="onEnterClick" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:34:22.230

这是因为您设置`android:onClick="onEnterClick"`为`RelativeLayout`并且，您没有在`TipCalculator.java`文件中实现此功能。所以，你有一个例外，`IllegalStateException`看你`LogCat`的第一行 -

> 在 id 为“errorText”的视图类 android.widget.RelativeLayout 上的 onClick 处理程序的活动类 tip.calculator.TipCalculator 中找不到方法 onEnterClick(View)

你可以很容易地理解上面的异常行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:16:56.413

也许是因为您在 xml 的 Button 布局中声明了一个函数 onEnterClick 。`android:onClick="onEnterClick`在您的按钮布局中会有一条线。

所以当你按下那个按钮时，定义你想要的动作，里面

```
public void onEnterClick(View view) 
```

在你的java类中。

注意：您首先必须创建此功能。

# tridion - 如何避免 Visual Studio (Cassini) 64 位 dll 错误？

> ID：11789245
> 
> 赞同：3
> 
> 时间：2012-08-03T04:24:10.683
> 
> 标签：tridion

我在 64 位 Windows Server 2008 R2 上的 .NET（演示文稿）网站的 Visual Studio 中的网站和 Web 应用程序的 Visual Studio 中看到以下错误。

> 无法加载文件或程序集“Tridion.ContentDelivery.AmbientData”或其依赖项之一。试图加载格式不正确的程序。

在 IDE 之外查看站点时（在 IIS 中设置站点并使用浏览器访问）时，我没有收到错误消息。

我的同事解释说这与使用 Visual Studio 的内置 Web 服务器（Cassini）有关，我理解它与 64 位的冲突`Tridion.ContentDelivery.AmbientData.dll.`

1.  使用 SDL Tridion 的 Content Delivery API 开发 .NET 站点时，管理此错误的适当方法是什么？
2.  [如果使用Web 应用程序和网站](http://msdn.microsoft.com/en-us/library/dd547590.aspx)，我应该做什么？

我注意到设置`Property Pages`>`Build`以`No Build`消除错误并仍然允许调试，但我不确定这样做是否遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:27:33.013

Cassini 不支持开箱即用的 64 位，但您显然可以获得支持的版本。

请参阅 StackOverflow 上的以下主题：[Visual Studio 2010 WebDev WebServer (Cassini) 是否兼容 64 位？](https://stackoverflow.com/questions/1890582/is-visual-studio-2010-webdev-webserver-cassini-64-bit-compatible)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:20:55.713

如果您希望能够从 VS 进行调试，我发现的唯一可靠方法是将站点配置为以 32 位运行。

否则，设置断点并附加到 W3WP 可以正常工作。

ñ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:40:47.683

在某些情况下，为每个应用程序运行创建一个临时目录，其中应用程序 dll 由 VS 放置，它始终具有唯一的名称。也许这不是旅游案例，但您可以尝试先将此 dll 放入 GAC。排除这种情况

# android - 不使用 ADT 开发 Android 有什么优势吗？

> ID：11789247
> 
> 赞同：0
> 
> 时间：2012-08-03T04:24:45.657
> 
> 标签：android

所以，我是 Android 开发的新手，想知道在没有 ADT 插件的情况下编程是否更好？

我有点迷失，因为我不知道没有它会有多困难，但几分钟前我在插件的eclipse中遇到了堆栈溢出问题，只是因为我删除了一个简单的行命令......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:34:33.150

没有 ADT 的开发意味着没有 eclipse 的开发。因为 ADT 插件是 Eclipse 和 Android SDK 之间的纽带。您可以使用命令行进行编码，但我不建议这样做，因为 eclipse 使它变得如此简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:35:46.790

找到这本书：（Beginning.Android.2，Mark Murphy 着）在我看来，这对初学者来说是一本非常有用的书。本书中有许多有助于学习使用 android 的基本示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:40:57.490

ADT/Java 有一些替代方案。

我知道你可以用[Phonegap](http://phonegap.com/)做到这一点。这样做的好处是 Web 开发人员很容易上手，但它不允许您进行精细的硬件控制，而且看起来也不是很好，因为它基本上是一个使用 Android 包装器制作的网站。

[果酱](http://www.madewithmarmalade.com/)真的很好但是很贵。它允许几乎与 ADT 一样多的控制，非常好地支持 C 和 OpenGL，因此受到想要在多个平台上发布的游戏制作者的欢迎。

还有很多其他工具也可以创建 Android 应用程序。ADT 不是唯一的方法。

ADT 是制作 Android 应用程序的“典型”方法，因此是最受支持的。开始有点困难，但如果您想要“快速”的 Android 构建器应用程序通常不允许的完全低级控制和优化，那么它是值得的。

# html - 使用 HTML5 画布绘制方程式

> ID：11789256
> 
> 赞同：0
> 
> 时间：2012-08-03T04:26:17.807
> 
> 标签：html, canvas

在 HTML5 画布上绘制方程式需要帮助。我正在考虑开发这样的东西：

[http://www.mathwarehouse.com/algebra/linear_equation/systems-of-equation/interactive-system-of-linear-equations.php](http://www.mathwarehouse.com/algebra/linear_equation/systems-of-equation/interactive-system-of-linear-equations.php)

由于这也将在移动设备上访问 - 需要触摸以拖动锚点

该过程将是： 在画布上绘制方程式 可能有输入 - 如果用户更改 - 它会反映在图表上 获得桌面浏览器的拖动功能 获得移动设备上的拖动

我正在考虑使用 Kineticjs - 想知道是否可以使用 Kineticjs 实现上述目标。否则，将不胜感激任何其他图书馆以及有关如何进行此操作的任何帮助/提示

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:49:33.907

我想你知道煎茶图表。如果你是开源的，那么你可以免费获得煎茶图表。检查dis链接。[煎茶图表 gpl](http://www.sencha.com/products/charts/download/sencha-touch-charts-1.0/249)

并查看他们的网站。你会有一些想法。

# c++ - 使用链接列表制作复制构造函数

> ID：11789257
> 
> 赞同：1
> 
> 时间：2012-08-03T04:26:34.230
> 
> 标签：c++, linked-list, copy-constructor

我当前任务的这一部分让我完全难过：

我正在尝试构建一个包含复制构造函数的 LinkedList 类，该构造函数本身调用静态方法 (*makeCopy())。我不知道如何使 makeCopy 方法工作（所有方法标题都在作业中提供给我们）。

```
class ListNode
{
public:
    ListNode(double v, ListNode *p)
{
   value = v; 
   next = p;
}
private:    
   double value;
   ListNode *next;
   friend class LinkedList;    // LinkedList  has friend status 
};

// The linked list class itself
class LinkedList
{
public:
//Add number to Linked List
void add(double x)
{
    if (head == NULL)
    {
        head = new ListNode(x, NULL);
        return;
    }
    else
    {
        ListNode *nodePtr = head;
        head = new ListNode(x, nodePtr);
    }

}
LinkedList() { head = NULL; }

//Default destructor
~LinkedList()
{
    ListNode *nodePtr = head;
    while (nodePtr != NULL)
    {
        ListNode *garbage = nodePtr;
        nodePtr = nodePtr->next;
        delete garbage;
    }
}

//Copy Constructor
LinkedList(LinkedList &);

//Copy function
static ListNode *makeCopy(ListNode *pList);

private:
   ListNode * head;    

}; 
```

以下是我尝试编写 makeCopy 函数的方式：

```
LinkedList::LinkedList(LinkedList &list)
{
    *makeCopy(list.head);
}

static ListNode *makeCopy(ListNode *pList)
{
   if(pList->value == NULL)
   {        
       return NULL;
   }
   else
   {
    ListNode *node = pList;

    while(node != NULL)
    {
        ListNode newOne = *node;
        node = node->next;
    }
}

return;
} 
```

首先，我继续收到错误“成员 ListNode::value 无法访问”。其次，我对 C++ 很陌生，而且我很确定我已经很远了。如果有人可以帮助我朝着正确的方向前进，将不胜感激。谢谢

这是我当前对复制构造函数和 makeCopy 方法的迭代。不幸的是，ListNode 构造函数以及所有方法头都是分配的一部分。我们必须为他们编写代码。我现在得到的错误是：两个返回语句都说“错误：构造函数或析构函数可能不会返回值”。我完全迷失了这个，因为这只是一个返回语句，我没有看到构造函数或析构函数。

```
LinkedList::LinkedList(LinkedList &list)
{
    LinkedList *copy = new LinkedList();

    while(list.head != NULL)
    {
        ListNode node = *makeCopy(list.head);
        copy->add(node.value);
        list.head = head->next;
    }

    return *copy;
 }

 ListNode * LinkedList::makeCopy(ListNode *pList)
 {
    ListNode node = *pList;

    return *node;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:35:46.837

```
static ListNode *makeCopy(ListNode *pList) 
```

应该

```
ListNode * LinkedList::makeCopy(ListNode *pList) 
```

您的版本定义了一个带有内部链接的自由函数，而不是定义成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:39:55.757

**<编辑 1>**您首先需要正确连接您的 makeCopy - 请参阅 Luchian 的答案以获取解释。**</编辑 1>**

您的第一个问题是，在 makeCopy 开始时，您将`value`（双精度）与 NULL（零，对于所有意图和目的）进行比较，如果它们匹配，则返回一个空指针。

我怀疑您实际上是想说，如果`pList`它本身是 NULL，则返回 NULL。

其次，您实际上从未在 makeCopy 中复制任何内容。在 while 循环中，您正在堆栈上创建一个新节点，但这只会在循环的每次迭代中创建/销毁。

您需要使用类似的东西创建每个节点的副本

```
ListNode * newNode = new Node();
newNode->value = node->value;
newNode->next = ???; 
```

注意使用 new 来创建新元素。

你需要解决的事情（我怀疑作业的真正目标，所以我不会在这里喂你），是你如何设置这个`->next`领域。

如果您知道列表很小，则可以考虑递归。不过，这不会是非常可扩展的。

否则，您需要在复制下一个元素*后*找到设置下一个指针的方法（这是更好的方法）。

**<Edit 2>** makeCopy 也没有返回任何东西。它需要返回一个指向头节点副本的指针（您需要记住它）。

您的 LinkedList 复制构造函数实际上也没有做任何事情。它调用 makeCopy，取消引用返回的指针，然后将其全部丢弃。你会想做类似的事情`head = makeCopy(list.head)`。或者更好的是，如果您已经了解了字段初始化器，那么请改用字段初始化。 **/<编辑 2>***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:02:57.130

如果我正确理解了您的分配，“makeCopy”需要一个指向节点链表的指针，并且必须创建该链表的副本并返回指向第一个元素的指针，对吗？

以下是我认为需要做的事情：

```
LinkedList::LinkedList(LinkedList &list)
    : head(makeCopy(list.head))
{
}

ListNode* LinkedList::makeCopy(ListNode *pList)
{
   if (!pList)
   {
       return 0;
   }

   ListNode* head = new ListNode(plist->value, 0);
   ListNode* back = head;
   plist = plist->next;

   while (pList)
   {
       ListNode* newNode = new ListNode(plist->value, 0);
       back->next = newNode;
       back = newNode;
       plist = plist->next;
   }

   return head;
} 
```

# python - 特里？在python中匹配带有尾随字符的单词

> ID：11789259
> 
> 赞同：0
> 
> 时间：2012-08-03T04:26:40.927
> 
> 标签：python, algorithm, data-structures, trie, linguistics

这与 stackoverflow 上的大多数 trie 问题有点不同（是的，我已经花时间搜索和阅读），所以请多多包涵。

我有文件 A，其中包含以下词：allow*、apolog* 等。总共有数万个这样的条目。我的文件 B 包含一段文本，最多有数千个单词。我希望能够将文件 B 中的文本中的单词与文件 A 中的单词匹配。

例子：

文件 B 的“道歉”将匹配文件 A 的“道歉*”

文件 B 的 "a" 既不匹配 "allow*" 也不匹配 "apolog*"

文件 B 的“apologizetomenoworelseiwillkillyou”也将匹配文件 A 的“道歉*”

任何人都可以建议一种算法/数据结构（最好在 python 中可行）可以帮助我实现这一目标吗？我研究过的尝试似乎更多是关于将前缀与整个单词匹配，但在这里，我将整个单词与前缀匹配。词干算法是不可能的，因为它们有固定的规则，而在这种情况下，我的后缀可以是任何东西。我不想遍历文件 A 中的整个列表，因为那会花费太多时间。

如果这令人困惑，我很乐意澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:34:47.347

将所有前缀放入哈希表中。然后取出 B 中的每个单词并在哈希表中查找它的所有前缀。你得到的任何命中都表示匹配。

所以哈希表将包含“允许”和“道歉”。对于“apologize”，您会查找“a”然后是“ap”，依此类推，直到您查找“apolog”并找到匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:18:49.913

如果 FILE B 中的单词数远大于 FILE A 中的前缀，也可以构建前缀的 Trie 并匹配其中的单词。

如果您了解 Trie 的工作方式，将会容易得多。Trie 是由字符串构建的树，如下所示。在 Trie 中匹配字符串是从根走到其中一个叶子的过程。

在您的问题中，如果我们将前缀放在 Trie 中，并查找单词，我们将需要将 Trie 中的一些内部节点标记为前缀的终止。当我们在 Trie 中查找一个单词时，每次我们到达一个标记为前缀终止的节点时，我们都会将该前缀作为“匹配”添加到单词中。（然后我们继续下一个字母）。

这正是@Blckknght 解决方案的逆向解决方案。哪个更有效取决于 FILE A 和 FILE B 中哪个更大。

在@Blckknght 的解决方案中，Trie 中的每个节点都由包含该节点的单词集（其路径）标记。前缀的搜索在前缀的最后一个字母处结束。当它停止时，我们获取搜索停止的 Trie 节点，然后我们将节点上标记为匹配的集合添加到前缀。

如果对任何人有帮助，我会写一些伪代码。

[来自wiki的Trie，您可以从中找到“算法”部分的一些代码](http://en.wikipedia.org/wiki/Trie)

![在此处输入图像描述](../Images/1860cf02baf819adacaa48b731935ed2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:54:18.850

如果我了解您要查找的内容，您希望能够查看文件 A 中与文件 B 中的给定完整单词匹配的所有前缀。 trie 数据结构可让您将单个前缀与完整单词列表匹配，但你需要去另一个方向。

如果是这样，您可能仍然使用 trie 进行匹配，使用查找表来反转结果。这是算法：

*   遍历文件 B 中的单词，将它们放入 trie 中。
*   遍历文件 A 中的前缀，从 trie 中找到匹配项。
    *   对于每个匹配项，将前缀添加到由匹配词索引的列表字典中。

这是一些实现该算法的代码。您需要作为参数传入的 trie 类和`Trie`iterables （如果您不希望所有值同时在内存中，请使用生成器）：`words``prefixes`

```
def matchPrefixes(words, prefixes):
    """Returns a word-to-prefix lookup table."""

    trie = Trie()
    for word in words:
        trie.add(word)

    lookupTable = defaultdict(list)
    for prefix in prefixes:
        matchedWords = trie.matchPrefix(prefix)

        for word in matchedWords:
            lookupTable[word].append(prefix)

    return lookupTable 
```

这在时间和内存上都应该非常有效，尤其是当单词列表比前缀列表短得多时。与任何单词不匹配的前缀在与 trie 进行检查后将不会使用任何内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:12:43.847

假设您在每个文件中有 100,000 个单词。

排序 = n*log(n) 二进制搜索查找 = log(n)

所以这是更糟糕的情况 n*log(n)

这是 100, 000 * log(100, 000) = 100,000 * 11 = 10^6 = 几乎瞬间

我认为你不需要对这么小的文件有任何花哨的东西。简单的排序和二进制搜索：

```
__author__ = 'Robert'

from bisect import bisect_right

file_a = """hell*
wor*
howard*
are*
yo*
all*
to*""".splitlines()

file_b = """hello world how are you all today too told town""".split()

a_starts = sorted(word[:-1] for word in file_a) #can do this easily if only 100, 000 words as you say.

def match(word):
    pos = bisect_right(a_starts, word)
    #assert 0 <= pos < len(a_starts)
    matched_word = a_starts[pos - 1]
    return matched_word if word.startswith(matched_word) else None

for word in file_b:
    print(word, " -> ", match(word))

"""
hello  ->  hell
world  ->  wor
how  ->  None
are  ->  are
you  ->  yo
all  ->  all
today  ->  to
too  ->  to
told  ->  to
town  ->  to
""" 
```

# ios - JSON.NET：不能使用 MonoTouch “用完 2 型蹦床”

> ID：11789261
> 
> 赞同：2
> 
> 时间：2012-08-03T04:26:58.810
> 
> 标签：ios, json, xamarin.ios, trampolines

我在[https://github.com/ayoung/Newtonsoft.Json](https://github.com/ayoung/Newtonsoft.Json)尝试了 JSON.NET 和 MonoTouch 端口，但得到了这个序列化错误：

```
Ran out of trampolines of type 2 in '/private/var/mobile/Applications/A901C3E6-D9AB-44AF-AA13-6B6E44467BAE/StaffRostering.app/mscorlib.dll' (128)

Stacktrace:

at Newtonsoft.Json.Serialization.DefaultContractResolver.GetParametrizedConstructor (System.Type) [0x00009] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/DefaultContractResolver.cs:336
at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateObjectContract (System.Type) [0x000ae] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/DefaultContractResolver.cs:310
at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateContract (System.Type) [0x000b0] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/DefaultContractResolver.cs:675
at Newtonsoft.Json.Utilities.ThreadSafeStore`2.AddValue (TKey) <0x000bf>
at Newtonsoft.Json.Utilities.ThreadSafeStore`2.Get (TKey) <0x00173>
at Newtonsoft.Json.Serialization.DefaultContractResolver.ResolveContract (System.Type) [0x00011] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/DefaultContractResolver.cs:196
at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.GetContractSafe (object) [0x00008] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/JsonSerializerInternalWriter.cs:86
at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize (Newtonsoft.Json.JsonWriter,object) [0x00011] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/Serialization/JsonSerializerInternalWriter.cs:70
at Newtonsoft.Json.JsonSerializer.SerializeInternal (Newtonsoft.Json.JsonWriter,object) [0x00012] in /Users/vink/Dropbox/Ajilon Source/Apps/Utils/Newtonsoft.Json.MonoTouch/Newtonsoft.Json/JsonSerializer.cs:451
at Newtonsoft.Json.JsonSerializer.Serialize (Newtonsoft.Json.JsonWriter,object) [0x00000] 
```

我也试过 RestSharp.Monotouch 并得到类似的错误：

```
Ran out of trampolines of type 2 in '/private/var/mobile/Applications/A901C3E6-D9AB-44AF-AA13-6B6E44467BAE/StaffRostering.app/mscorlib.dll' (128)

Stacktrace:

at RestSharp.Reflection.SafeDictionary`2.GetEnumerator () <0x000ab>
at RestSharp.PocoJsonSerializerStrategy.TrySerializeUnknownTypes (object,object&) <IL 0x0002b, 0x00247>
at RestSharp.PocoJsonSerializerStrategy.SerializeNonPrimitiveObject (object,object&) <IL 0x00010, 0x000e7>
at RestSharp.SimpleJson.SerializeValue (RestSharp.IJsonSerializerStrategy,object,System.Text.StringBuilder) <IL 0x000f7, 0x00e1b>
at RestSharp.SimpleJson.SerializeObject (object,RestSharp.IJsonSerializerStrategy) <IL 0x0000e, 0x000eb>
at RestSharp.SimpleJson.SerializeObject (object) <IL 0x00006, 0x0008f>
at RestSharp.Serializers.JsonSerializer.Serialize (object) <IL 0x00001, 0x00083> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:44:01.103

这是解决方案：

**用完 2 型蹦床**

如果您使用大量接口，您可能会在设备上收到此消息。您可以通过修改项目选项“iPhone Build”部分来创建更多类型 2 蹦床（类型 IMT Thunks）。您想为 Device 构建目标添加额外的参数：

```
-aot "nimt-trampolines=512" 
```

IMT Thunk trampolines 的默认数量为 128。尝试增加此数量，直到您有足够的接口使用。

**我不知道蹦床是什么......**

# combobox - Combobox 的子类不支持 vaadin 中的过滤

> ID：11789262
> 
> 赞同：1
> 
> 时间：2012-08-03T04:27:18.330
> 
> 标签：combobox, filtering, vaadin

在 vaadin 中对 ComboBox 组件进行子类化是一种常见做法，因为它缺少在标准 API 中设置 pageLength 功能。

问题是设置过滤模式不适用于子类。我已经尝试使用带有 FILTERINGMODE_STARTSWITH 的 ComboBox 的简单代码，它运行良好，与自定义类相同的代码 - 不起作用（过滤不起作用，所有项目都显示出来）。

为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:14:42.853

原来问题出在pageLength参数上。如果它设置为零，则过滤不起作用。我已将其设置为一个大数字，以便它的行为与零相同，并且一切正常。

# jquery - 绑定到动态创建的元素的事件。(jQuery 1.7.2)

> ID：11789270
> 
> 赞同：1
> 
> 时间：2012-08-03T04:29:04.683
> 
> 标签：jquery

我有一个 js 文件。它包含以下代码：

```
$("#speedB").change(function () {

    var date = $(this).val();
    $('.fl_near a').removeClass('selected');
    var clientId = $('#wiz_main').data('client');
    var eventId = $('#wiz_main').data('event');
    $.get('/desk/GetSessionScreen', { clientId: clientId, eventId: eventId, date: date }, function (data) {
        $('#step1').html(data);
    });
}); 
```

`speedB`加载页面时，页面上不存在带有 id 的元素中的问题。它在 ajax 请求之后出现。如何为稍后使用`jQuery 1.7.2 (method`on`) 创建的元素绑定事件？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T04:33:23.527

采用[`.on()`](http://api.jquery.com/on/)

```
$(document).on("change", "#speedB").(function () { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T04:36:37.757

你需要使用[`$.on()`](http://api.jquery.com/on/). 像这样的东西。

```
$("body").on("change", "#speedB", function() { . . . your code here . . . }) 
```

第一个选择器`$("body")`应该是一个始终在页面上的元素，这样当事件冒泡到它时，您想要的操作就会生效。

`"#speedB"`需要是 的第二个参数`.on()`，即触发事件的元素。

查看 jQuery 页面了解更多详情。[`$.on()`](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:32:18.430

试试这个：

```
$(document).on('change', '#speedB', function(){
  // ...
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T15:32:27.923

尝试在动态创建元素的函数范围内绑定函数。

# android - 除了使用 trafficstats API 之外，还有其他方法可以在 android 中查找数据使用情况吗

> ID：11789272
> 
> 赞同：0
> 
> 时间：2012-08-03T04:29:18.940
> 
> 标签：android, traffic-measurement

在我的应用程序中，我想在应用程序处于前台时计算数据使用情况。

我正在使用**Trafficstats API**。

但有时这个值会被重置并**从 0 开始**。

除了使用永远不会重置的 Trafficstats 之外，还有其他方法或 API 来获取**数据使用情况。**

或者有什么方法可以**跟踪该数据何时重置**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:59:47.520

我在这里的回答是基于假设，而不是基于已证实的确凿事实，但通常 TrafficStats 中的计数器不应重置，除非重新启动设备。但是，从trafficStats接收到的数据存储为long，每当接收/发送数据的总值超过long的最大容量时，就会显示为stats已被重置，因为long值会溢出。

# iphone - UIAlertView 按钮在 iPad 的警报窗口之外？

> ID：11789273
> 
> 赞同：0
> 
> 时间：2012-08-03T04:29:23.263
> 
> 标签：iphone, ipad, uialertview, uialertsheet

我有一个与 UIAlertView 相关的问题。我创建了一个带有正文消息和两个按钮的警报，用于确定和取消。当我展示 alertWindow 时，按钮使其位置在警报窗口之外并且不可访问。当方向改变时它会变得正常。

我尝试通过更改 alertWindow 的大小，但问题存在。

这是我的代码

```
 UIAlertView *errorAlert=[[UIAlertView alloc]initWithTitle:errorAlertTitle message:errorAlertMessage  delegate:self cancelButtonTitle:errorAlertClose otherButtonTitles:@"Reload", nil];
     errorAlert.tag=2;
     errorAlert.frame = CGRectMake(0,0,500,600);

     [errorAlert show];
     [errorAlert release]; 
```

![在此处输入图像描述](../Images/13c1e0f24eb55aab72012a7e4b392679.png)

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:04:02.987

When you write "alert window", you mean the visible portion of the `UIAlertView` that has text and buttons, right? Do you think that you are setting the frame of the "alert window" in your code? Are you actually setting the frame of a transparent blocking view that prevents the user from interacting with the rest of the UI and contains the "alert window"? [The view hierarchy of UIAlertView is private](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html), so we can't know for sure how it is structured, but you may be manipulating the wrong thing. Note that the documentation also warns against interfering with the `UIAlertView` view hierarchy, so you may not want to set any view properties like frame for your `UIAlertView`.

If you really want to modify the "alert window", you could:

1.  Analyze the subviews of the alert view by writing code to walk through them and log useful information (frame, type, etc.). This might tell you which subview you actually want to manipulate.

and then

1.  Use the [callbacks in UIAlertViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html) to manipulate the alert window after the UIAlertView been constructed and is about to become visible.

But maybe you want to look into `UIActionSheet` or `UIPopoverController` if the automatic styling of `UIAlertView` is not working for you?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:43:00.220

根据您的要求，我只是您使用操作表，但对于您的问题，请执行以下操作：

添加此代码：

```
 errorAlert.frame = CGRectMake(0,0,500,600); 
```

后

```
[errorAlert show]; 
```

# android - android - 调用需要 API 级别 9（当前最小值为 8）：android.os.StrictMode#setThreadPolicy

> ID：11789275
> 
> 赞同：13
> 
> 时间：2012-08-03T04:29:26.317
> 
> 标签：android, eclipse, json

我是 JSON 新手。我按照[本教程](http://www.edumobile.org/android/android-development/json-example-in-android/)创建示例应用程序。当我尝试将代码复制到我的 Eclipse 时，它​​显示错误。

```
Call requires API level 9 (current min is 8): android.os.StrictMode#setThreadPolicy 
```

请指教。谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-03T04:41:13.123

转到android AndroidManifest.xml

在你的文件中是 8

```
<uses-sdk android:minSdkVersion="8" /> 
```

将 SDK 版本更改为 9，如下所示

```
<uses-sdk android:minSdkVersion="9" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-16T05:27:11.927

```
Right Click on you Android Project>Android Tools>Clear Lint Markers 
```

**“运行 Android Lint”会生成一些标记，这些标记会导致此错误。**

这对我有用，所以如果你使用它不需要改变

```
<uses-sdk android:minSdkVersion="8" /> 
```

到 9

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T04:44:52.227

在 AndroidManifest.xml 中，您已将 minSdkVersion 定义为 8

```
<uses-sdk android:minSdkVersion="8" /> 
```

尽管在您的代码中，您使用的是 API 级别 9 支持的 StrictMode。

因此，您可以跳过在应用程序中使用 StrictMode 或将 midSdkVersion 设置为 9。

要跳过使用 StrictMode，只需删除这些行。

```
import android.os.StrictMode;

StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectDiskReads().detectDiskWrites().detectNetwork().penaltyLog().build()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T07:53:30.690

其他答案是正确的，但如果您仍然看到错误，请确保“将项目与 Gradle 文件同步”（在 Android Studio 工具栏上）。

# java - 为什么需要显式转换？

> ID：11789283
> 
> 赞同：1
> 
> 时间：2012-08-03T04:30:55.820
> 
> 标签：java, android, casting

我一直在查看 Android 开发教程，在查看了一些代码后，我注意到以下内容：

```
HeadlinesFragment mHeadlinesFragment;
mHeadlinesFragment = (HeadlinesFragment) getSupportFragmentManager().findFragmentById(
            R.id.headlines); 
```

我对 Java 还很陌生，所以这可能是问题所在，但为什么需要对 (HeadlinesFragment) 进行显式转换？mHeadlinesFragment 还不是 HeadlinesFragment 类型吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:33:13.657

```
getSupportFragmentManager().findFragmentById(
            R.id.headlines); 
```

这将返回一个 Fragment 对象，并且 HeadlinesFragment 是 Fragment 类的子类，每次将超类的对象分配给子类的引用时，都需要显式转换。

当您将子类对象分配给超类引用时，您不需要显式转换，例如分配：

```
List<String> list=new ArrayList<String>(); 
```

# objective-c - 看门人是否允许两个具有相同标识符和不同证书的应用程序

> ID：11789284
> 
> 赞同：9
> 
> 时间：2012-08-03T04:30:57.023
> 
> 标签：objective-c, cocoa, code-signing, mac-app-store, osx-mountain-lion

我有两个具有相同标识符的应用程序。一个用于 mac 应用商店，一个用于其他目的（用于分发到 mac 应用商店之外）。而且我的两个应用程序并不完全相同，两者在代码和资源上也有很多差异。应用商店版本的应用由“3rd Party Mac Developer Application:Company”签名，另一个由“Developer ID Application:company”签名。

我的问题是 - 看门人会允许我的两个应用程序在 10.8 OS X 上运行吗？谢谢。

更新：由于两个应用程序具有不同的指定要求但相同的包，它应该运行。

更新：在我的测试中，我发现这两个应用程序都在我的系统和其他系统中运行。但在某些系统中，它允许 Mac 应用商店应用程序启动，但对于非 Mac 应用商店应用程序，它会显示一条消息，表明它已损坏，我们应该将其移至垃圾箱。为什么相同的构建在不同的系统中显示出两种不同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:19:59.123

**看门人确实允许**。我已经能够在同一台 Mac 上运行两个共享相同应用 ID 的应用，一个来自 App Store，另一个独立运行。[1] 但是，**不建议这样做，并且可能会导致其他麻烦**，因为系统中的许多事物通过其所谓的唯一 ID 指定应用程序。[请参阅有关 Spaces 如何在应用 ID 方面工作](http://www.cocoabuilder.com/archive/cocoa/236266-correct-way-to-identify-an-application-launch-services-spaces.html)的示例详细信息。

^(实际上，如果您考虑一下，实际上每次运行 Mac 应用程序的调试版本时都会这样做，同时还会将最新的 Mac App Store 版本存储在`/Applications`.)

# dojo - 如何在 Travis CI 上设置 Dojo Doh 单元测试？

> ID：11789286
> 
> 赞同：0
> 
> 时间：2012-08-03T04:31:07.567
> 
> 标签：dojo, travis-ci, doh

有没有人有在 Travis CI 上设置基于 dojo doh 的单元测试的经验？

我想设置一个网络服务器和无头浏览器。

如果可能的话，我还想使用 dijit/robotx（它使用 java 插件）来进一步自动化一些测试。

通过阅读 Travis 文档，我认为可以做到，但如果有人有示例或脚本要分享，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:33:38.563

我不确定你能否让 DOH Robot 与无头浏览器一起工作：它非常适合生成低级鼠标和键盘事件。不确定这是否会在无头场景中对您有所帮助？

然而，没有机器人的普通 DOH 应该可以正常运行。

这取决于您：如果您认为您需要 DOH Robot 提供的各种东西，您可能不想将自己限制在无头模式。如果你想要无头，我认为 DOH 可能没有 DOH Robot。

我没有无头浏览器体验，但我确实有一个完整的环境，在多个真实浏览器上运行在 Jenkins 上的 DOH、DOH Robot、JSCoverage 等。（我们使用真实的浏览器，即使有兼容层，它们也有很大的不同，因此会产生巨大的差异。）

在 [另一个涵盖基础知识的 SO 问题](https://stackoverflow.com/questions/5256334/how-to-run-dojo-doh-unit-tests-through-jenkins)上有一些很好的信息：您使用 Selenium 启动浏览器，将一些 JS 注入浏览器以运行您的测试并将结果吸回，然后将它们写入磁盘。我只是把它们写成 JUnit 格式的 XML 文件，然后我的 CI 系统就把它们吞了。

# android - 在不同的编译器中编译 NDK 代码

> ID：11789287
> 
> 赞同：0
> 
> 时间：2012-08-03T04:31:11.927
> 
> 标签：android, android-ndk

尝试进行 NDK 构建时出现以下错误日志....我怀疑这是因为我针对错误的 C++ 编译器编译代码，现在我正在使用 GNU C++.. 使用命令

```
APP_STL := gnustl_static 
```

请让我知道如何使用不同版本的编译器和可用的不同编译器。

```
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `Imf::Pxr24Compressor::uncompress(char const*, int, Imath::Box<Imath::Vec2<int> >, char const*&)':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:431: undefined reference to `__cxa_allocate_exception'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `tooMuchData':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:173: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:173: undefined reference to `__cxa_allocate_exception'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `Imf::Pxr24Compressor::compress(char const*, int, Imath::Box<Imath::Vec2<int> >, char const*&)':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:404: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:404: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `uiMult<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `uiAdd<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `uiMult<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o): In function `uiAdd<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfPxr24Compressor.o):(.data.rel.ro._ZTIN3Imf15Pxr24CompressorE[typeinfo for Imf::Pxr24Compressor]+0x0): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
./obj/local/x86/libFreeImage.a(ImfRleCompressor.o): In function `__static_initialization_and_destruction_0':
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::~Init()'
./obj/local/x86/libFreeImage.a(ImfRleCompressor.o): In function `Imf::RleCompressor::uncompress(char const*, int, int, char const*&)':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:283: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:283: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfRleCompressor.o): In function `uiMult<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfRleCompressor.o):(.data.rel.ro._ZTIN3Imf13RleCompressorE[typeinfo for Imf::RleCompressor]+0x0): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `__static_initialization_and_destruction_0':
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
/home/flock/ANDROID/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::~Init()'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `Imf::ZipCompressor::uncompress(char const*, int, int, char const*&)':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:192: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:192: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `Imf::ZipCompressor::compress(char const*, int, int, char const*&)':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:159: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:159: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `uiMult<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `uiAdd<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `uiMult<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o): In function `uiAdd<unsigned int>':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(ImfZipCompressor.o):(.data.rel.ro._ZTIN3Imf13ZipCompressorE[typeinfo for Imf::ZipCompressor]+0x0): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
./obj/local/x86/libFreeImage.a(IlmThread.o): In function `IlmThread::Thread::start()':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:74: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:74: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(IlmThread.o): In function `~Thread':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(IlmThread.o): In function `Thread':
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_throw'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(IlmThread.o):(.data.rel.ro._ZTIN9IlmThread6ThreadE[typeinfo for IlmThread::Thread]+0x0): undefined reference to `vtable for __cxxabiv1::__class_type_info'
./obj/local/x86/libFreeImage.a(IlmThread.o):(.data.rel.ro._ZTIN3Iex9NoImplExcE[typeinfo for Iex::NoImplExc]+0x0): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::stretch()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:9060: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:9060: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::fuji_rotate()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:9015: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:9015: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::median_filter()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4429: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4429: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::remove_zeroes()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:337: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:337: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::recover_highlights()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4521: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4521: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::blend_highlights()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4493: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:4493: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function `LibRaw::scale_colors()':
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:3789: undefined reference to `__cxa_allocate_exception'
/home/flock/Desktop/FreeImage/jni/../Source/LibRawLite/./internal/dcraw_common.cpp:3789: undefined reference to `__cxa_throw'
./obj/local/x86/libFreeImage.a(dcraw_common.o): In function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:44:30.760

您没有使用错误的编译器，这是 gcc/NDK 中的一个错误，它在 Linux、Cygwin 和 Windows（非 Cygwin）上的表现略有不同。

这是我为修复它所做的工作（适用于 Linux 和我的一位盲人并且必须使用 Cygwin 的开发人员）......

-`APP_STL := gnustl_static`从您的 Application.mk 中删除该行（它在 NDK 中已损坏，并且在 Linux Cygwin、Windows 上的损坏略有不同）
- 在您的 Android.mk 文件中的 $(LOCAL_LDLIBS) 中添加一行内容：

`$(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/libgnustl_static.a`

还在 Andriod.mk 中添加两行说，
`LOCAL_C_INCLUDES := $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/include` `LOCAL_C_INCLUDES += $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include`

上述内容将完成您的 Application.mk 中应该具有的“APP_STL := gnustl_static”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:01:48.693

尝试添加

-fexceptions 到您的 Android.mk 文件中的 LOCAL_CXXFLAGS

我的 Application.mk 文件中也有这个

APP_STL := gnustl_static APP_ABI := 全部

我想在添加 -fexceptions 之前我遇到了同样的错误

# php - 为什么上传取消并且服务器关闭连接

> ID：11789288
> 
> 赞同：2
> 
> 时间：2012-08-03T04:31:18.657
> 
> 标签：php, .htaccess, codeigniter, file-upload

我正在上传一个 14 兆字节的视频文件，这是我的配置：

```
ini_set("max_execution_time", "180");
ini_set("upload_max_filesize", "300M");
ini_set("post_max_size", "300M");
ini_set("memory_limit", "300M"); 
```

我把它放在 index.php 文件和我的 .htaccess 中：

```
addDefaultCharset UTF-8

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|uploads|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

所以问题是，当我上传视频文件时，在状态栏中，我看到百分比递增 1%、2%、3%、4%、5%、6%、7%、8%、9%、10%， 11%、12%、13 美元、14%、15%……等等。

当它达到 19-20% - 它取消到 0%，然后再次开始增加 1%、2%、3%，我不明白为什么会发生这种情况？有人可以解释一下吗？你有过这样的事情吗？如何解决这个问题？，文件大约 14 兆字节....

```
<form action="" method="post" enctype="multipart/form-data">
<p>title</p>
<input type="text" name="title">
<p>video file</p>
<input type="file" name="video">
<p>cover file</p>
<input type="file" name="pic">
<p>description</p>
<textarea name="short_desc" style="width: 500px; height: 150px;"></textarea>
<p><input type="submit" value="add video" name="add"></p>
</form> 
```

这是html上传表单...

这是codeIgniter中的上传方法：

```
public function add_video()
{

    if(!$this->is_admin){return false;}

    if(!$this->input->post('add')){
    $data['content'] = $this->load->view(ADMIN.'video/add', null, true);
    $this->load->view(ADMIN.'layout', $data);
    }
    else
    {

        $num = 1;
        if(is_dir("./uploads/videos/video".$num))
        {

            while(true)
            {
                $num++;
                if(!is_dir("./uploads/videos/video".$num))
                {

                    mkdir("./uploads/videos/video".$num);
                    break;
                }
            }
        }
        else
        {

            mkdir("./uploads/videos/video".$num);
        }

    $config['upload_path'] = "./uploads/videos/video".$num;
    $config['allowed_types'] = 'mov|mpeg|mp3|mp4|avi|flv';;
    $config['max_size'] = '0';
    $config['max_width']  = '0';
    $config['max_height']  = '0';

    $this->load->library('upload', $config);
    if ($this->upload->do_upload('video'))
    {

         $data = array('upload_data' => $this->upload->data());
         $file_name = $data['upload_data']['file_name'];

         $video_path = "./uploads/videos/video".$num.'/'.$file_name;
         $config['allowed_types'] = 'jpg|png|gif|bmp';
         $this->upload->initialize($config);
         if ($this->upload->do_upload('pic'))
         {

             $data = array('upload_data' => $this->upload->data());
             $file_name = $data['upload_data']['file_name'];
             $config['image_library'] = 'gd2';
             $config['source_image'] = "./uploads/videos/video".$num.'/'.$file_name;
             $config['create_thumb'] = FALSE;
             $config['maintain_ratio'] = FALSE;
             $config['width'] = 150;
             $config['height'] = 100;

             $this->load->library('image_lib', $config); 

             $this->image_lib->resize();

             $image_path = $config['source_image'];

         }
         else
         {
            redirect(base_url().'admin/add_video');

         }
    }
    else
    {
        redirect(base_url().'admin/add_video');
    }
    $data = array();

    $data['title'] = $this->input->post('title');
    $data['short_desc'] = strip_tags($this->input->post('short_desc'));
    $data['video_path'] = $video_path;
    $data['image_path'] = $image_path;
    $data['date'] = date('y-m-d h:i:s');
    $this->load->model('video_model');
    $this->video_model->add($data);

    redirect(base_url().'admin/add_video');

    }

} 
```

很抱歉有很多代码，但你能在这里找到一些导致这个问题的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:14:27.543

您是否检查过您的 ini_set() 是否有效？每次调用时都尝试回显 ini_set() 。如果设置了值，它将返回旧值（如果无法设置新值，则返回 false）。

还尝试使用以下方法进行测试：

```
set_time_limit(0);  // it will make the time limit unlimited 
```

# javascript - 在 Javascript 中打开外部 sqlite3 数据库

> ID：11789290
> 
> 赞同：0
> 
> 时间：2012-08-03T04:31:26.700
> 
> 标签：javascript, database, sqlite

我有一个名为 mydb.db 的 sqlite3 数据库。它是一个外部文件。是否可以在 javascript 中打开此数据库？

我尝试了以下代码，但这会导致在 chrome 创建它的 DB 的任何地方创建 mydb.db，因此它显然不是从文件中加载我的。

```
try {
    if (!window.openDatabase) {
        alert('Databases are not supported in this browser.');
    } else {
        var Name = 'mydb.db';
        var version = '1.0'; //1.0
        var displayName = 'TEST';
        var maxSize = 100000; //  bytes
        database = openDatabase(Name, version, displayName, maxSize);
    }
} catch(e) {
    ...
} 
```

谢谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:37:07.827

不。（至少不是通过这种方式。）

允许任意文件/数据库访问将是一个安全漏洞。想象一个文件“C:\My Documents\My Bank Data\transactions.sqlite”..

（实际上，我希望浏览器将数据库“名称”从物理文件中沙箱化/抽象为一种理智但特定于实现的策略。）

# java - 如何在java中注册mysql游标？

> ID：11789296
> 
> 赞同：1
> 
> 时间：2012-08-03T04:32:23.183
> 
> 标签：java, mysql

您好，在java中注册Oracle游标如下：

```
statement.registerOutParameter(4, oracle.jdbc.OracleTypes.CURSOR); 
```

如何在java中从MySQL注册游标？那是什么“类型”？

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:50:03.787

我不认为有一个 MySQL 相当于注册一个像 Oracle 这样的游标。MySQL的[Connector/J 文档](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-implementation-notes.html)对**语句**这样说：

> MySQL 不支持 SQL 游标，并且 JDBC 驱动程序不模拟它们，因此 setCursorName() 无效。

尽管存储过程和函数支持游标。

# css - 获取 div 的分隔符以获取表格行为

> ID：11789297
> 
> 赞同：-1
> 
> 时间：2012-08-03T04:32:25.193
> 
> 标签：css, css-tables, tablerow

我有一个像这样的独特代码结构：http: [//jsfiddle.net/VqzeQ/](http://jsfiddle.net/VqzeQ/)。我想要实现的是这样的输出：

![输出](../Images/8dfc249e8ada336a51c3544a41115d9e.png)

我的问题是，是否有可能只用 CSS 实现像上图这样的输出？我玩过`display:table`, table-cell 等，但没有运气。

如果仅使用 CSS 是不可能的，您会建议我使用给定的代码结构来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:44:54.217

没有办法只用 css 做你想做的事。你可以试试js，像这样：

```
var numbers = $(".number");
var contents = $(".content");
for (var i = 0, l = numbers.length; i < l; i++)
  $(numbers[i]).height($(contents[i]).height()); 
```

但这也是不好的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:46:43.890

**正如操作所述：**

> 我的问题是，是否可以仅使用 css 实现上图的输出？我玩过 display:table、table-cell 等，但没有运气。

**是的，这是可能的，**但您需要调整纯 css 表的标记，如下所示；

**HTML：**

```
<div class="table-row">
    <div class="number table-cell">1</div>
    <div class="content table-cell">
        1111 11111 111 111 111 111 111 111 111 111 111 111 111 11 11 1111111 111111111111111 111 111 111 111 111 111 111 111 111 111 111 11 11 1111111 1111111111 11 11 1 11111 1 111111 1
    </div>
</div>

<div class="table-row">
    <div class="number table-cell">2</div>
    <div class="content table-cell">
        222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222 222 22222 222         
    </div>
</div> 
```

**CSS：**

```
.number, .content {border:1px solid #333;}
.table-row { display: table-row; }
.table-cell { display: table-cell } 
```

[**看演示**](http://jsfiddle.net/akhurshid/ZrxHZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:40:09.997

你在干什么...？我们有桌子是有原因的。充分利用它，而不是半途而废。

回答你的问题：不，不能用 CSS 做到这一点。您正在尝试根据另一个 div 的高度设置一个 div 的高度，它们之间的唯一关系是它们都是两个元素的第 n 个子元素。你能做的最好的就是给他们一个固定的高度，如[这个演示](http://jsfiddle.net/VqzeQ/1/)所示。您无法仅使用 CSS 获得一个高度并将其他高度设置为该高度。

我可以写出 JS 解释，但我不会，因为您应该使用表格来正确显示表格数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:44:17.930

如果您不介意所有行的高度相同，您可以在您的 css 中执行此操作：

```
.number, .content {border:1px solid #333;}
.number {float: left; position: relative; right: -8px;}
.content, .number {height: 55px;} 
```

注意：这适用于 jsFiddle。我没有在浏览器中检查它

否则，我认为您将进入 JavaScript 修复程序。

# actionscript-3 - AS3 Broadcast live video using FMS and save that video for VOD

> ID：11789301
> 
> 赞同：1
> 
> 时间：2012-08-03T04:32:47.387
> 
> 标签：actionscript-3, flash-media-server

I want to broadcast live video I am using FMS to brodacast live video. I want to save that video to view again back, may be after some days or week.

I know how to publish live

ns.publish("appName","live");

But I want to save this video and view back when user request to see it again (not as live - as video on demand).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:07:20.660

Check the Adobe documentation for [NetStream](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/NetStream.html). You simply use "record" instead of "live" :

```
ns.publish("lecture", "record"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T10:21:46.663

IF you don't want to replace your saved file each time... use appned mode for publish

```
ns.publish("appName","append"); 
```

# magento - Magento中的PDF图像问题

> ID：11789305
> 
> 赞同：3
> 
> 时间：2012-08-03T04:32:54.950
> 
> 标签：magento, magento-1.7

[我在 magento 中安装了http://www.magazento.com/english/magento-ext/magazento-extensions/free-pdf-export](http://www.magazento.com/english/magento-ext/magazento-extensions/free-pdf-export)的pdfcatalog 插件。它生成产品详细信息页面的 pdf，但产品图像的质量变得模糊。您能否告诉我如何解决它以及如何确保 pdf 包含至少 150 到 300 dpi 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:14:33.940

问题是 pdf 生成器可用的源图像不是原始图像，它的工作原理与您在普通浏览器上看到的缩略图相同。

诀窍是摆脱页面上的缩放工具并显示不同的媒体文件。

一种方法是检查 $_REMOTE 地址，如果它与 $_SERVER 地址相同，则显示不同的 media.phtml，一个没有 gizmos，只有 supa-dooper-high-quality 中的图像。这也可以绑定到打印样式表中 - 看看它是如何被包含的，并为您的 media.phtml 选择性加载使用相同的方法。

*您可能需要推出自己的 PDF 生成器。*

wkhtml2image 程序可能很有用——您可以使用它来创建一个非常简洁的 PDF。您还可以通过第三方扩展不那么容易的方式来理解它。

# google-api - Google Calendar API 产生“Quota Exceeded”错误，但未达到配额限制

> ID：11789309
> 
> 赞同：7
> 
> 时间：2012-08-03T04:33:19.377
> 
> 标签：google-api

我正在使用 Python 客户端中的 Google Calendar API v3。礼貌限制是每天 10,000 个查询。Google API 控制台显示我今天到目前为止已经用完了 471 个请求，过去 28 天总共用完了 1.47k，这听起来远远低于限制。

我现在每次尝试使用 API 时都会看到 HTTP 错误 403 Quota Exceeded 错误。我知道还有一个速率限制，但我发送请求的速度不是特别快，并且为了安全起见，我使用 API 控制台将每个用户的速率限制重置为 10,000 个请求/秒/用户。我可能每秒从一个单线程应用程序的一个实例生成少于 5 个请求，在开发过程中没有其他人可以访问该实例。我试过睡觉并重试查询，但每次重试时都会遇到同样的错误。

是否还有其他一些配额（除了每天 10,000 个请求和每个用户的速率限制）我正在运行？谷歌的配额系统坏了吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T21:30:01.427

Google Calendar API 似乎对在给定时间段内可以创建的新日历的数量有一个未记录的限制。限制非常低，通常在20或30左右。到第二天，我可以制作另一批日历。

我们正在尝试为学校中的每个人创建一个班级日历，现在创建所有日历需要几天甚至几周的时间。

创建日历后，将应用正常的 API 限制。

# java - 对 ThreadPoolExecutor 中的单个线程设置超时

> ID：11789319
> 
> 赞同：0
> 
> 时间：2012-08-03T04:34:58.243
> 
> 标签：java, multithreading, threadpool

我正在使用 java api 中的 threadPoolExecutor 类来处理我的所有线程。目前我有 5 个线程可以存在于线程池中。我的线程都在做同样的任务。他们正在向数据库发出请求，并等待回复。有时数据库有一段时间没有回复。这意味着这些线程卡在线程池中等待。

我想知道有没有办法在线程池中的线程上设置超时。因此，如果一个线程运行超过半小时，那么线程池将杀死它并处理队列中的下一个线程。我不

目前，线程池中的线程有自己的计时器任务，该任务写入日志，说明线程花费了 30 多分钟。我正在想办法杀死需要这么长时间的线程。

我怎样才能做到这一点 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:24:01.647

> 保活次数
> 
> 如果池当前有多个 corePoolSize 线程，多余的线程如果空闲时间超过 keepAliveTime（请参阅 getKeepAliveTime(java.util.concurrent.TimeUnit)）将被终止。这提供了一种在池没有被积极使用时减少资源消耗的方法。如果池稍后变得更加活跃，则将构造新线程。也可以使用方法 setKeepAliveTime(long, java.util.concurrent.TimeUnit) 动态更改此参数。使用 Long.MAX_VALUE TimeUnit.NANOSECONDS 的值可以有效地禁止空闲线程在关闭之前终止。默认情况下，keep-alive 策略仅适用于超过 corePoolSizeThreads 的情况。但是方法 allowCoreThreadTimeOut(boolean) 也可用于将此超时策略应用于核心线程，

来自[ThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#allowsCoreThreadTimeOut%28%29) Java 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:02:32.840

**1.**使用`CachedThreadPool`。

**2.** CachedThreadPool 将池化，将从定义的线程数开始。现在根据需要它可以跨越新线程。

**3.**最**令人惊奇和你想要的特性**是`CachedThreadPool`，**当一个线程在 60 秒内没有参与任何活动时，它就会被杀死。**

# assembly - MIPS：将整数或整数数组存储为局部变量

> ID：11789320
> 
> 赞同：1
> 
> 时间：2012-08-03T04:35:03.000
> 
> 标签：assembly, mips

在一个问题中，我被要求在 MIPS 汇编语言中使用将整数变量分配为局部变量的概念。这是。编写一个程序，它 (i) 在局部变量“inp”中读取一个整数（有适当的提示）

将整数变量分配为局部变量实际上是什么意思？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:45:26.637

通读以下[教程](http://logos.cs.uic.edu/366/notes/mips%20quick%20tutorial.htm)。这个练习的一部分只是调用正确的系统例程：

> read_int、read_float 和 read_double 服务读取整行输入，直到换行符（包括换行符）。

就您的问题而言，它只是意味着读取用户输入变量的值（在您的情况下可能是寄存器或临时变量）。

**读取整数值，以标签 int_value 存储在 RAM 位置（可能在数据部分中声明）**

```
 li  $v0, 5            # load appropriate system call code into register $v0;
                          # code for reading integer is 5
    syscall               # call operating system to perform operation
    sw  $v0, int_value    # value read from keyboard returned in register $v0;
                          # store this in desired location 
```

# paypal - 使用 Express Checkout for Digital Goods 上线后出错

> ID：11789321
> 
> 赞同：0
> 
> 时间：2012-08-03T04:35:19.437
> 
> 标签：paypal, paypal-sandbox, express-checkout

在对 paypal 沙箱进行所有操作后，我切换了 URL 和凭据以使用 Express Checkout for Digital Goods 上线。但是，当用户被重定向到贝宝时，每次购买尝试都会导致此消息：

> 我们目前无法完成您的请求。请稍后再试。我们对不便表示抱歉。

我已经尝试了许多解决这个问题的“解决方案”，但没有一个适用于我的具体问题。我在下面提供了一些详细信息，但请让我知道是否还有其他可以帮助解决此问题的方法。

*   请求网址： [https ://api-3t.paypal.com/nvp](https://api-3t.paypal.com/nvp)
*   重定向网址（带有示例令牌）： [https ://www.paypal.com/incontext?token=EC%2d50D36426BB652071N&useraction=commit](https://www.paypal.com/incontext?token=EC%2d50D36426BB652071N&useraction=commit)
*   我传递的参数

```
  定义参数数据 = [
    “用户”：paypal用户名，
    '密码'：密码，
    “签名”：签名，
    '方法'：'SetExpressCheckout'，
    '版本'：'65.1'，
    “PAYMENTREQUEST_0_AMT”：“1.00”，
    'PAYMENTREQUEST_0_CURRENCYCODE':'USD',
    'PAYMENTREQUEST_0_ITEMAMT':'1.00',
    'PAYMENTREQUEST_0_PAYMENTACTION':'销售',
    'L_PAYMENTREQUEST_0_NAME0':'一些产品',
    'L_PAYMENTREQUEST_0_DESC0':'一些产品',
    'L_PAYMENTREQUEST_0_AMT0':'1.00',
    'L_PAYMENTREQUEST_0_QTY0':'1',
    'L_PAYMENTREQUEST_0_ITEMCATEGORY0'：'数字'，
    'REQCONFIRMSHIPPING':'0',
    'NOSHIPPING':'1',
    'RETURNURL' : 'http://mydomain.com/return',
    'CANCELURL' : 'http://mydomain.com/cancel'
    ]

```

*   我用来将触发器附加到贝宝按钮的 Javascript： `var dg1 = new PAYPAL.apps.DGFlow({ trigger: "buyStart1" });`

*   是的，我有一个经过验证的企业帐户

*   此外，在重定向之前发生的 SetExpressCheckout 调用的响应如下所示：

```
TOKEN=EC%2d50D36426BB652071N&TIMESTAMP=2012%2d08%2d02T14%3a57%3a33Z&CORREL
ATIONID=93da36285a4ae&ACK=成功&版本=65%2e1&BUILD=3386080

```

您的帮助将不胜感激！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:11:18.550

多年来，我多次看到此错误，这通常导致内部 PayPal 问题或他们需要解决的问题。我建议快速致电 Paypal 商家支持，他们应该能够快速修复它，或者至少告诉你问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:12:37.010

出于某种原因，我无法对 Jimmyb 的回答添加评论 - 但答案确实是致电 PayPal。

我刚刚与他们通了电话，并被告知我需要向销售团队申请在我的帐户上启用数字商品功能。销售团队目前不在办公室，所以我明天会确定，但听起来很有希望。

# php - 创建市场的起点

> ID：11789323
> 
> 赞同：1
> 
> 时间：2012-08-03T04:35:43.523
> 
> 标签：php, mysql

我希望创建一个功能集相当有限的在线市场。用户应该能够注册和列出待售物品。所有商品将属于同一类型，但具有不同的属性，例如“发布日期”、“质量”和“价格”。用户将能够在列表中设置该信息并输入他们的贝宝信息，以便接收客户的直接付款。

如果有帮助，这个想法有点像缩小版的 etsy 与 ebay 的相遇（但现在只能安排购买）。

我没有真正的 php/mysql 经验，但是我想学习这个项目。谁能指出我需要一些好的教程或概念的方向？我确实有一些通用的编码和大量的 html/css/javascript 经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:38:24.773

为此，您需要良好的 php 和 mysql 以及数据库知识，html 是必须的，css 对于出色的用户界面非常重要

在这里你会得到一般信息和教程[PHP](https://stackoverflow.com/tags/php/info)，[mysql](https://stackoverflow.com/tags/mysql/info)

# mysql - 创建与多个表的关系

> ID：11789326
> 
> 赞同：0
> 
> 时间：2012-08-03T04:35:55.303
> 
> 标签：mysql, rdbms

我正在做一个简单的讨论论坛，用户可以在其中发布内容并对帖子发表评论。帖子和评论都有一个标记选项。我将帖子的标志和评论都存储在同一张桌子上。因此，在删除帖子或评论时，我还需要删除存储在同一张表中的它们的标志。现在如何在我的表中建立关系，以便在删除帖子或评论时也应该删除相应的标志项。

这是我的标志表的结构。 ![在此处输入图像描述](../Images/29ec1a9b807e8c8234ae40bede12eade.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:54:03.433

我想帖子和评论存储在不同的表中。如果是这种情况，您不能使用 CASCADE DELETE 删除具有外键的行。

有 2 个选项供您选择：

1.  在程序中进行。

2.  使用 MySQL 触发器。

    在删除后
    为每一行创建触发器 deleteflags 从 faf_item_id = old.id 的标志
    开始删除

# mysql - 如果表为空，为什么 MySQL 不返回任何内容？

> ID：11789329
> 
> 赞同：1
> 
> 时间：2012-08-03T04:36:23.340
> 
> 标签：mysql, select

我在 MySQL 中有 2 个表。

> table1: id, 标题
> table2: id, 标题

现在，我想查看两个表中的所有标题。我遇到的问题是，如果**标题**字段在两个表中都包含任何内容，我可以看到返回值。但是，如果其中一张桌子是空的，即使是另一张桌子，我也看不到任何东西。
这是我的查询：

```
SELECT
    t1.title as 'title1',
    t2.title as 'title2'
FROM
    table1 t1,
    table2 t1 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:40:02.270

您需要使用 LEFT JOIN 而不是 CROSS JOIN（这是逗号运算符在这里所做的）。

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

您使用的逗号连接将表 1 中的每一行与表 2 中的每一行匹配。由于表 2 中没有行，它不可能匹配表 1 中的任何行，因此您不会得到任何结果。如果您想始终查看表 1 中的结果，则必须使用 LEFT JOIN，它从表 1 中提取所有行以及从表 2 中提取*任何*匹配的行。如果您想查看行，无论哪个表有它们，您可以使用全外连接，MySQL 不直接支持，但可以模拟（如果需要示例，请参阅 Google）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:43:07.367

使用联合

```
Select title from t1
Union 
Select title from t2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:44:05.597

您需要为此使用[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)。以这种方式进行查询：

```
SELECT `table1`.`title` as `title1`
UNION
SELECT `table2`.`title` as `title2`; 
```

# mysql - 简单连接导致使用大量行

> ID：11789331
> 
> 赞同：0
> 
> 时间：2012-08-03T04:36:45.240
> 
> 标签：mysql

我正在尝试做我认为是两个表之间的简单连接。

```
CREATE TABLE t_slv
(
    symbol_id       int                     NOT NULL,
    load_id         SMALLINT,
    val                     DECIMAL(10,4)   NOT NULL,
    -- PRIMARY KEY ( symbol_id )
    unique index ( symbol_id )
);

CREATE TABLE nasd (
    symbol_id       integer                 NOT NULL, 
    load_id         SMALLINT                NOT NULL,
    openp           DECIMAL(10,4)   NOT NULL,   -- range 0.0001 - 999,999.9999
    high            DECIMAL(10,4)   NOT NULL,
    low                     DECIMAL(10,4)   NOT NULL,
    last            DECIMAL(10,4)   NOT NULL,
    volume          integer                 NOT NULL
    -- PRIMARY KEY ( symbol_id, load_id )
    -- INDEX ( load_id )
);

CREATE UNIQUE INDEX nasd_1_ix1 on nasd( symbol_id, load_id );
CREATE UNIQUE INDEX nasd_1_ix2 on nasd( load_id, symbol_id ); 
```

所以，当我这样做时：

```
mysql> explain                 select  nasd.load_id
  ->                         -- nasd.low
->                 from    t_slv,
->                         nasd
->                 where   t_slv.symbol_id = nasd.symbol_id
->                         and nasd.load_id >= 4700
->                         and nasd.load_id <= 4917 ;
      +----+-------------+-------+-------+-----------------------+------------+---------+--------    --------------+---------+--------------------------+
| id | select_type | table | type  | possible_keys         | key        | key_len |   ref                  | rows    | Extra                    |
+----+-------------+-------+-------+-----------------------+------------+---------+----------------------+---------+--------------------------+
|  1 | SIMPLE      | t_slv | index | symbol_id             | symbol_id  | 4       | NULL                 |       1 | Using index              |
|  1 | SIMPLE      | nasd  | ref   | nasd_1_ix1,nasd_1_ix2 | nasd_1_ix1 | 4       | prog.t_slv.symbol_id | 2069669 | Using where; Using index |
+----+-------------+-------+-------+-----------------------+------------+---------+----------------------+---------+--------------------------+ 
```

2 行（0.00 秒）

对不起，这很难读。

如果 t_slv 中只有一行，仅将其加入 nasd 会导致访问超过 200 万行。如果我取出 t_slv 并从表 nasd 中直接选择，则仅访问 217 行 - 这是有道理的，因为这是 4700 到 4917 之间的行数。

因此，仅使用一行连接到一个表会导致访问的行数激增，即使它使用的索引与 t_slv 不在连接中时使用的索引相同。

这对任何人都有意义吗？

现实生活中的情况实际上更糟——如果 t_slv 中有 1000 行，则选择需要 20 分钟，这基本上使它无法运行。

即使我强制索引，我也很确定我会得到相同的结果。这意味着，即使它正在使用索引，它也正在访问数百万行。

TIA。

大学教师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:01:10.617

mysql 认为 里面只有一行`t_slv`，所以它认为可以抓取那一行，从里面抓取`symbol_id`出来，然后使用`nasd_1_ix1`索引找到所有匹配的行。它关于有多少行匹配的2M 行*猜测*`nasd`是索引不唯一这一事实的`symbol_id,load_id`产物，因此它无法知道您给出的范围之间有多少行。考虑到您的真实数据，它实际上不会读取那么多行。

`t_slv`只有一排吗？如果没有，您可能想要重建该表，以便 mysql 对其大小有最新的了解。

即使`t_slv`有很多行，该计划仍然看起来不错，因为`symbol_id`s 在 中是唯一的`t_slv`，并且有一个以`symbol_id`on开头的索引`nasd`，因此 mysql 确信它永远不必查看一行两次。

# iphone - 在 iphone sdk 中播放音频文件时出错

> ID：11789333
> 
> 赞同：0
> 
> 时间：2012-08-03T04:36:56.430
> 
> 标签：iphone, objective-c, core-audio

嘿，我是 iphone 开发的新手。我正在尝试在我的应用程序中播放音频文件。但是我收到了这个错误。谁能帮我解决这个问题。我已经添加了 AVFoundation 和 CoreGraphics 框架。所以请帮我解决这个问题。先感谢您。

ld "/Users/keshav/Desktop/Build Files/SampleAudioCode-gedwwrowqwoobjgojkmypquuiukj/Build/Products/Debug-iphonesimulator/SampleAudioCode.app/SampleAudioCode" normal i386 cd /Volumes/d/projects/sample/SampleAudioCode setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/ Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin: /sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs /iPhoneSimulator5.1.sdk "-L/Users/keshav/Desktop/Build Files/SampleAudioCode-gedwwrowqwoobjgojkmypquuiukj/Build/Products/Debug-iphonesimulator" "-F/Users/keshav/Desktop/Build Files/SampleAudioCode-gedwwrowqwoobjgojkmypquuiukj/Build/Products/Debug-iphonesimulator"-filelist"/Users/keshav/Desktop/Build Files/SampleAudioCode-gedwwrowqwoobjgojkmypquuiukj/Build/Intermediates/SampleAudioCode.build/Debug -iphonesimulator/SampleAudioCode.build/Objects-normal/i386/SampleAudioCode.LinkFileList" -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework CoreFoundation -framework AVFoundation -framework UIKit -框架基础 -framework CoreGraphics -o "/Users/keshav/Desktop/Build Files/SampleAudioCode-gedwwrowqwoobjgojkmypquuiukj/Build/Products/Debug-iphonesimulator/SampleAudioCode.app/SampleAudioCode"

架构 i386 的未定义符号：“_AudioServicesCreateSystemSoundID”，引用自：ViewController.o 中的-[ViewController viewDidLoad] “_AudioServicesPlaySystemSound”，引用自：ViewController.o ld 中的-[ViewController viewDidLoad]：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:43:10.247

您还必须`AudioToolbox`在 Xcode 中添加框架以消除此链接器错误。

# ruby-on-rails - Rails 关联的属性标签解释不正确

> ID：11789337
> 
> 赞同：1
> 
> 时间：2012-08-03T04:37:17.303
> 
> 标签：ruby-on-rails

我有两个模型，称为“页面”和“区域”

有如下关系：

```
class Page < ActiveRecord::Base
  has_many :areas

end

class Area < ActiveRecord::Base
  belongs_to :page

  attr_accessible :content, :name, :order, :title , :page_id

end 
```

我有一个视图来创建我接受 page_id 以将该区域与页面相关联的区域：

```
 <%= f.label :page_id %><br /> #this is being interpreted incorrectly
 <%= f.text_field :page_id %> 
```

使用 page_id 属性正确返回 action 方法中的表单值。但在 html 表单中，该字段的文本值被解释为“页面”而不是“页面 id”。

不管这可能不是一个好的做法，或者有一种手动更改标签值的变通方法；我需要了解为什么会这样。有人可以解释一下。即使我在 Area 控制器的新操作方法中使用调试器，对象 @area 也会正确显示 page_id 属性。我假设 f.label 在这里做了一些奇怪的事情。

我正在使用导轨 3.2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:44:29.090

这就是它的工作原理，Rails 假设在打印到表单时`something_id`应该会变成这样。`something`如果你想让它在任何地方都变成真正的“page_id”，打开`config/locales/en.yml`并把它放在那里：

```
en:
  activerecord:
    attributes:
      area:
        page_id: "page_id" 
```

你去了，现在它将`page_id`在这个标签和所有其他地方（包括验证和所有）中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:41:38.187

默认情况下，Rails 会删除标签中的 _id。f.label 中的下一个参数是一个字符串，它将成为标签的内部 html：

```
<%= f.label :page_id, "Page" %> 
```

输出：

```
<label for="area_page_id">Page</label> 
```

# c# - 聊天 - 获取新消息可用性的最佳方式

> ID：11789338
> 
> 赞同：2
> 
> 时间：2012-08-03T04:37:21.810
> 
> 标签：c#, javascript, asp.net, wcf

我正在使用启用的 Ajax-Wcf 服务开发 Asp.Net 聊天。这是一个非常简单的聊天引擎，其中消息对话框意味着一对一（单个用户），但是我不知道如何（以最佳方式）管理新消息可用性的通知。例如，假设以下场景：

每当我需要从一个用户向另一个用户发送一条新消息时，我都会编写这样的 javascript 代码：

```
// btnSend client event handler
MyWcfNamespace.MyWcfClass instance = new ..();
instance.CallMethod("message string", callBackFunction, null); 
```

嗯，这很简单。现在，从另一方（将接收我的消息的用户），需要某种机制才能知道何时发送了新消息。我想使用 ajax 计时器来调用另一个 wcf 方法，如果可用则返回字符串消息，如果不可用则返回空字符串，但我认为这是完成此操作的最佳方法。

如果存在某种方式来通过 javascript 注册某些 wcf 事件，那就太好了：

```
// javascript code:
MyWcfNamespace.MyWcfClass instance = new ..();
instance.OnNewMessageAvailable = myJavascriptCallBackFunction;
// And on CallBack function..
function myJavaScriptCallbackFunction(msg) {
alert('new message arraived:' + msg):
} 
```

显然，我的 wcf 服务应该实现一些静态事件来管理我需要的所有通知。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:42:35.510

使用 WCF，您可以通过使用长轮询等技术来实现这一点，但显然这并不容易。看看这个[例子](http://www.interworks.com/blogs/banderton/2010/07/30/simple-long-polling-wcf-server)如何

有许多 JS 库可以让您轻松完成这项工作。[SignalR](http://msdn.microsoft.com/en-us/magazine/hh882442.aspx)就是其中之一 看看这个[Wiki](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)如何

**更新 2**

如果您使用的是 Wcf 4.5，完成此任务的另一种方法是使用 Web 套接字。聊天应用程序需要基于推送的技术，而不是基于拉取的技术。Wcf 4.5 通过支持 Web Sockets 为您提供了这种能力。[例子](http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-part-2-of-2.aspx)

**更新 3**

如果您决定使用长轮询，那么您没有使用异步方法。长轮询将按以下方式工作。

1.  将请求发送到服务器。
2.  等到响应到来，或者超时
3.  去客户端，提出另一个请求。

因此，不要使用异步结果（因为从 JS 对 Web 服务的调用已经是异步的），您可以使用带有线程信号技术的普通方法，例如 WaitOne（等待新请求到来）和 ManualResetEvent 用于信号，一些请求已经到来。

请注意，长轮询比轮询要好得多，因为响应始终是最新的。

看看这个使用[Wcf 和 Long Polling实现的 Chat Server](http://anthymecaillard.wordpress.com/2012/06/06/wcf-real-time-web-development-with-long-polling/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:29:48.443

您还可以使用[Websockets](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)来建立持久连接。

[这个 SignalR](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)示例也很有用。

# mysql - 如何在没有 Internet 连接的 Ubuntu Server 中安装 Mysql Server

> ID：11789340
> 
> 赞同：0
> 
> 时间：2012-08-03T04:37:29.153
> 
> 标签：mysql, ubuntu

我尝试下载 deb 包并安装它，因为机器没有互联网我下载了所需的依赖项。但是，它启动了每个依赖项所需的依赖链。

有人可以让我知道我们如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:53:13.237

非常感谢您的回复。经过大量的试用，终于可以下载所有需要的软件包并有序地安装它们。所以我想我会分享以下内容以供将来参考，尽管有人可能已经尝试过。

```
http://packages.ubuntu.com/natty/all/libnet-daemon-perl/download
http://packages.ubuntu.com/natty/all/libplrpc-perl/download
http://packages.ubuntu.com/natty/amd64/libdbi-perl/download
http://packages.ubuntu.com/natty/amd64/mysql-common/download
http://packages.ubuntu.com/natty/amd64/libmysqlclient16/download
http://packages.ubuntu.com/natty/amd64/libdbd-mysql-perl/download
http://packages.ubuntu.com/natty/amd64/mysql-client-core-5.1/download
http://packages.ubuntu.com/natty/amd64/mysql-client-5.1/download
http://packages.ubuntu.com/natty/amd64/mysql-server-core-5.1/download
http://packages.ubuntu.com/natty/amd64/mysql-server-5.1/download
http://packages.ubuntu.com/natty/all/libhtml-template-perl/download
http://packages.ubuntu.com/natty/all/mysql-server/download 
```

最后按照以下顺序安装它们：

```
sudo dpkg -i libnet-daemon-perl_0.43-1_all.deb
sudo dpkg -i libplrpc-perl_0.2020-2_all.deb
sudo dpkg -i libdbi-perl_1.612-1_amd64.deb
sudo dpkg -i mysql-common_5.1.63-0ubuntu0.11.04.1_all.deb
sudo dpkg -i libmysqlclient16_5.1.63-0ubuntu0.11.04.1_amd64.deb
sudo dpkg -i libdbd-mysql-perl_4.016-1_amd64.deb
sudo dpkg -i mysql-client-core-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb
sudo dpkg -i mysql-client-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb
sudo dpkg -i mysql-server-core-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb
sudo dpkg -i mysql-server-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb
sudo dpkg -i mysql-server_5.1.63-0ubuntu0.11.04.1_all.deb
sudo dpkg -i  libhtml-template-perl_2.9-2_all.deb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T10:36:21.993

这个问题的公认答案告诉您如何在**ubuntu 11.04**中安装 mysql 。
对于**Ubuntu 12.04 精确 64 位**，请在下方找到所需的软件包和安装顺序。

```
sudo dpkg -i libnet-daemon-perl_0.43-1_all.deb
sudo dpkg -i libplrpc-perl_0.2020-2_all.deb
sudo dpkg -i libdbi-perl_1.622-1_amd64.deb
sudo dpkg -i mysql-common_5.5.32-0ubuntu0.12.04.1_all.deb
sudo dpkg -i libmysqlclient18_5.5.32-0ubuntu0.12.04.1_amd64.deb
sudo dpkg -i libdbd-mysql-perl_4.021-1_amd64.deb
sudo dpkg -i mysql-client-core-5.5_5.5.32-0ubuntu0.12.04.1_amd64.deb
sudo dpkg -i libterm-readkey-perl_2.30-4build3_amd64.deb
sudo dpkg -i mysql-client-5.5_5.5.32-0ubuntu0.12.04.1_amd64.deb
sudo dpkg -i mysql-server-core-5.5_5.5.32-0ubuntu0.12.04.1_amd64.deb
sudo dpkg -i mysql-server-5.5_5.5.32-0ubuntu0.12.04.1_amd64.deb
sudo dpkg -i mysql-server_5.5.32-0ubuntu0.12.04.1_all.deb
sudo dpkg -i libhtml-template-perl_2.9-2_all.deb 
```

*注意：libterm-readykey-perl 是您需要在此处安装的附加软件包。*

# android - 无法让 SipDemo 注册 sip 语音通话

> ID：11789343
> 
> 赞同：1
> 
> 时间：2012-08-03T04:37:48.940
> 
> 标签：android

几天来，我在尝试注册 sip 呼叫时遇到了问题。下面是我的代码，有人可以告诉我 sip 注册中的问题是什么吗？

```
public class SipRegistration extends Activity {

    public String sipAddress;
    public SipManager manager = null;
    public SipProfile profile = null;
    public SipAudioCall call = null;
    private EditText user, pass, domaine;
    // private SipAudioCall.Listener listener;
    protected static final String TAG = null;
    private Button register;
    private SipRegistrationListener listener;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        user = (EditText) findViewById(R.id.main_edtUser);
        pass = (EditText) findViewById(R.id.main_edtPassword);
        domaine = (EditText) findViewById(R.id.main_edtDomain);
        register = (Button) findViewById(R.id.main_btnRegister);

        register.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                initializeLocalProfile();

            }
        });
    }

    /**
     * Logs you into your SIP provider, registering this device as the location
     * to send SIP calls to for your SIP address.
     * 
     * @return
     */
    public boolean initializeLocalProfile() {
        if (manager == null) {
            manager = SipManager.newInstance(this);
        }

        Log.e("On build profile.......", "");

        String username = user.getText().toString();
        String domain = domaine.getText().toString();
        String password = pass.getText().toString();

        if (username.length() == 0 || domain.length() == 0
                || password.length() == 0) {
            return true;
        }
        Log.e("@@@@@@@@", "username \n" + username);
        Log.e("@@@@@@@@@", "domain \n" + domain);
        Log.e("@@@@@@@", "password \n" + password);

        try {
            SipProfile.Builder builder = new SipProfile.Builder(username,
                    domain);
            builder.setPassword(password);
            profile = builder.build();
            Log.e("profile Password", "" + builder.build());

            // Intent i = new Intent();
            // i.setAction("android.SipDemo.INCOMING_CALL");
            // PendingIntent pi = PendingIntent.getBroadcast(this, 0, i,
            // Intent.FILL_IN_DATA);
            // manager.open(profile, pi, null);
             manager.open(profile);
            Log.e("Profile:", "" + profile);
            // Log.e("Intent:", "" + pi);

            // Log.e("Listner:", "" + listener);
            listener = new SipRegistrationListener() {

                public void onRegistering(String localProfileUri) {
                    // TODO Auto-generated method stub
                    updateStatus("Registering with SIP Server...");
                    Log.e("Registration Running..........", "");
                    try {
                        manager.register(profile, 3000, listener);
                    } catch (SipException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                public void onRegistrationDone(String localProfileUri,
                        long expiryTime) {
                    // TODO Auto-generated method stub

                    updateStatus("Ready");
                    Log.e("Registration Done..........", "");
                }

                public void onRegistrationFailed(String localProfileUri,
                        int errorCode, String errorMessage) {
                    // TODO Auto-generated method stub

                    updateStatus("Registration failed.  Please check settings.");
                    Log.e("Registration failed..........", "");

                }

            };

            if (manager.isRegistered(profile.getUriString())) {
                Log.e("SipManager is ready for calls", "");
                return true;
            } else
                return false;

        } catch (Exception ex) {

            Log.e("---Error-- initializeProfile: " + ex.getMessage(), "");
            return false;

        }

    }

    // This listener must be added AFTER manager.open is called,
    // Otherwise the methods aren't guaranteed to fire.

    public void updateStatus(final String status) {
        // Be a good citizen. Make sure UI changes fire on the UI thread.
        this.runOnUiThread(new Runnable() {
            public void run() {
                TextView labelView = (TextView) findViewById(R.id.main_sipLabel);
                labelView.setText(status);
                Log.e("Registration Running..........", "");
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:42:59.550

将端口号更改为`8891`使用

```
Sipmanger.port(); 
```

SIP 演示在真实设备 (2.3) 或更高版本上实际运行。确保在清单文件中添加权限。

# c# - 来自网页的 Javascript 源代码

> ID：11789344
> 
> 赞同：1
> 
> 时间：2012-08-03T04:37:54.490
> 
> 标签：c#, javascript, c#-4.0, html-parsing, web-scraping

是否可以获取网页中使用的 javascript 的源代码。我想要带有实际变量但不带有替换变量的值的 javascript 源。

```
function fun() {
 var x = '12938771293737123791738';

document.location   = x;
} 
```

在上面的脚本中，x 值已替换为值“12938771293737123791738”。我想查看没有 x 值被替换的 java 脚本源代码。我们能得到它吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:43:50.210

如果 javascript 被动态添加到页面，那么您将无法获得任何东西，除了您从响应中看到的内容，而无需访问本地源代码。

# javascript - 用于 x 轴和网格的 Dojo 图表选择性标签

> ID：11789353
> 
> 赞同：0
> 
> 时间：2012-08-03T04:39:11.763
> 
> 标签：javascript, charts, dojo, axis-labels

我需要创建一个道场图表

[http://codebins.com/bin/4ldqp8z/1](http://codebins.com/bin/4ldqp8z/1)

在上面的链接中，我的图表有 x 轴标签，如

当前 x 轴：**上午 11 点、下午 12 点 40 分、下午 2 点 20 分和下午 4 点**

对于相同的标签，我有网格线。

现在的要求是我只需要 3 个标签

所需的 x 轴：**上午 10 点、下午 1 点和下午 4 点**

图表显示 9:30 pm 到 4 pm 之间的数据，间隔 10 分钟。

这是工作示例：- [http://codebins.com/bin/4ldqp8z/1](http://codebins.com/bin/4ldqp8z/1)

这是代码：-您需要在http上运行它

```
<html>

    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type">
        <title>Code Bins</title>
                            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" ></script>

    </head>

    <body Body Params>
        <div id="chart1" style="width:300px;height:200px">
</div>    </body>
                        <script type="text/javascript">
                    require(["dojo/_base/declare", "dojo/dom-style", "dojo/ready", "dojox/charting/Chart",  "dojox/charting/action2d/PlotAction", "dojox/charting/axis2d/Default", "dojox/charting/plot2d/Columns", "dojox/charting/plot2d/Lines", "dojox/charting/plot2d/Grid"], function(declare, domStyle, ready, Chart, PlotAction, Default, Columns, Lines, Grid) {

    ready(function() {
        var chart = new Chart("chart1")
            .addAxis("y", { vertical: true, 
                fixLower: "major", 
                fixUpper: "major", 
                leftBottom: false,
                majorTicks:false,
                minorTicks:false,
                stroke: {color:"#FFF",width:0},
                majorTick:{length:0}})
            .addAxis("x", {
                labels: labels, /* Lables are coming from here*/
                majorTicks:false,
                majorTick:{length:4,color:"#FFFFFF"},
                majorLabels:true,
                majorTickStep:10,
                minorTicks:false,
                max:40,
                stroke: {color:"#CFCFCF",width:"1"}})
            .addSeries("y", close, {  fill: "#EBEBEB"})
            .addPlot("Grid", {
                    type: "Grid",
                    markers: true
                });

        chart.render();
    });
});

var close = [];
for (var i = 0; i < 40; i++) { close.push(parseInt((Math.random() * 100) + 1200)); }
var labels = [{value: 1,text: "9:30am"},
{value: 2,text: "9:40am"},{value: 3,text: "9:50am"},{value: 4,text: "10am"},{value: 5,text: "10:10am"},{value: 6,text: "10:20am"},{value: 7,text: "10:30am"},{value: 8,text: "10:40am"},{value: 9,text: "10:50am"},{value: 10,text: "11am"},{value: 11,text: "11:10am"},{value: 12,text: "11:20am"},{value: 13,text: "11:30am"},{value: 14,text: "11:40am"},{value: 15,text: "11:50am"},{value: 16,text: "12pm"},{value: 17,text: "12:10pm"},{value: 18,text: "12:20pm"},{value: 19,text: "12:30pm"},{value: 20,text: "12:40pm"},{value: 21,text: "12:50pm"},{value: 22,text: "1pm"},{value: 23,text: "1:10pm"},{value: 24,text: "1:20pm"},{value: 25,text: "1:30pm"},{value: 26,text: "1:40pm"},{value: 27,text: "1:50pm"},{value: 28,text: "2pm"},{value: 29,text: "2:10pm"},{value: 30,text: "2:20pm"},{value: 31,text: "2:30pm"},{value: 32,text: "2:40pm"},{value: 33,text: "2:50pm"},{value: 34,text: "3pm"},{value: 35,text: "3:10pm"},{value: 36,text: "3:20pm"},{value: 37,text: "3:30pm"},{value: 38,text: "3:40pm"},{value: 39,text: "3:50pm"},{value: 40,text: "4pm"}];
// BOTTOM OF PAGE
                </script>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:54:59.497

您的 X 标签明确将主要刻度步设置为 10。从你的标签来看，它应该是 18：1 是 10 分钟，6 是 1 小时，18 是你想要的 3 小时。所以这部分很简单。问题是步数是从 0 开始计算的，而 0 是上午 9:20。您应该从不同的号码开始。一种可能的方法是将上午 10 点设为零。这意味着您应该将数据和标签移回，如下所示：

```
var labels = [
  {value: -3,text: "9:30am"},
  {value: -2,text: "9:40am"},
  {value: -1,text: "9:50am"},
  {value:  0,text: "10am"},
  {value:  1,text: "10:10am"},
  {value:  2,text: "10:20am"}
  // and so on
]; 
```

或者从早上 7 点开始，像这样：

```
var labels = [
  // we have no data for 7am, so we skip labels too
  {value: 15,text: "9:30am"},
  {value: 16,text: "9:40am"},
  {value: 17,text: "9:50am"},
  {value: 18,text: "10am"},
  {value: 19,text: "10:10am"},
  {value: 20,text: "10:20am"}
  // and so on
]; 
```

尝试以不同的方式映射您的序数，您可以获得所需的效果。

PS：同样的方式你可以控制次要和微型刻度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:23:19.813

找到解决方案 [http://codebins.com/bin/4ldqp8z/2](http://codebins.com/bin/4ldqp8z/2)

扩展的axis2d和它的一些如此简单。不是没有必要计算任何东西的步骤。只要给你想给的任何标签。

```
dojo.provide("myDojo.myAxis");
dojo.declare("myDojo.myAxis", dojox.charting.axis2d.Default, {
        calculate: function(min, max, span, labels){
            this.inherited(arguments);
            this.ticks.major= [{ value:4, label:"10am"},{ value:22, label:"1pm"},{ value:40, label:"4pm"}]
            return this;
        }
    });
      dojox.charting.axis2d.myAxis = myDojo.myAxis; 
```

添加轴的同时添加类型

```
.addAxis("x", {
                labels: labels, /* Lables are coming from here*/
                majorTicks:false,
                majorTick:{length:4,color:"#FFFFFF"},
                majorLabels:true,
                majorTickStep:10,
                minorTicks:false,
                max:40,
                type:"myAxis",
                stroke: {color:"#CFCFCF",width:"1"}}) 
```

# php - Symfony2 无法持久化有关系的列

> ID：11789354
> 
> 赞同：0
> 
> 时间：2012-08-03T04:39:25.723
> 
> 标签：php, mysql, symfony, doctrine-orm, auto-increment

我有一个董事会实体和一个股份实体。一个板可以有很多份额（就像一个用户与另一个用户共享一个他创建的板）。

Boards 实体拥有一家汽车公司。名为 boardId 的列。共享实体具有将共享映射到板的同名列。这是映射它的代码：

板：

```
/**
 *  @orm:OneToMany(targetEntity="Shares", mappedBy="boards", cascade={"persist",  "remove"})
 */
private $shares; 
```

分享：

```
/**
 * @orm:ManyToOne(targetEntity="Boards", inversedBy="shares")
 * @orm:JoinColumns({
 *   @orm:JoinColumn(name="board_id", referencedColumnName="board_id")
 * })
 */
private $boards; 
```

当我这样坚持一个新的共享时：

```
 $share = new Shares();
 $share->setMemberIdT($members[0]->getMemberId());
 $share->setMemberIdF($id);
 $share->setBoardId($boards[0]->getBoardId());
 $share->setDateShared();
 $share->setReceived(0); 
```

我这样称呼boardId：

```
 $boards = $em->getRepository('PixbellyHomeBundle:Boards')
    ->findByBoardId($board); 
```

我已经回显了 boardId ，直到字面上的前行和 id 是正确的，但是当我调用persist 时，我收到了这个错误：

```
"response":{"errorInfo":["23000",1048,"Column 'board_id' cannot be null"]}} 
```

我认为这与关系有关，但我已经尝试了一切，没有任何帮助，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:53:44.507

您应该执行以下操作：

```
$share->setBoards($boards); 
```

# iphone - 使用官方 iOS SDK 检测 SIM 卡更改或查找 SIM 卡的 IMSI？

> ID：11789357
> 
> 赞同：13
> 
> 时间：2012-08-03T04:39:56.753
> 
> 标签：iphone, ios, imei, msisdn

我正在为移动运营商开发应用程序。首先，我想找到任何东西（IMSI、ICCID、IMEI、MSISDN），以便我可以检测 SIM 是否与我的移动运营商有关。但我猜苹果不允许这样做。

现在作为一种解决方法，我将要求用户在我的应用程序中注册他的电话号码。但是，如果用户更换 SIM 卡，又会发生坏事。

有什么方法可以让我使用官方 iOS SDK 检测 SIM 卡更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T11:38:59.657

您只能在越狱设备上访问。

在路径上查找文件`/private/var/root/Library/Lockdown/data_ark.plist`

关键是`InternationalMobileSubscriberIdenti`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:37:30.287

**`subscriberCellularProviderDidUpdateNotifier`**应该使用[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html)注册通知

但是，只有在您的应用程序运行时发生交换时才会通知您。当您的应用未运行时，您仍然无法检测到用户是否将 SIM 更改为来自同一运营商的另一张 SIM。

# jquery - 有没有办法让我的文本区域增长以匹配我的文本大小？

> ID：11789360
> 
> 赞同：0
> 
> 时间：2012-08-03T04:40:09.130
> 
> 标签：jquery

我有一个宽度为 100 的文本区域。有时这是几个单词的文本，有时是几百个。有什么方法可以让高度调整到使用 jQuery 或其他方式的文本数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:42:58.497

你想要[TextAreaExpander](http://blogs.sitepointstatic.com/examples/tech/textarea-expander/index.html)插件。

其他包括

*   [自动尺寸](http://www.jacklmoore.com/autosize)
*   [松紧带](http://unwrongest.com/projects/elastic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:44:02.357

当文本区域大小增加时，您可以使用类似的东西

```
 <textarea style='overflow-y:hidden;' onkeyup='this.rows = (this.value.split("\n").length||1);'>
    </textarea> 
```

这里有更多方法 [http://perplexed.co.uk/596_expanding_textarea_as_you_type.htm](http://perplexed.co.uk/596_expanding_textarea_as_you_type.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:47:10.017

您可以尝试 CSS[`resize`](http://www.w3.org/TR/css3-ui/#resize)属性：

```
textarea { 
   resize: both; 
   width: 100px;
   min-height:200px; 
   max-height:300px; 
} 
```

# python - 在numpy中转换为数组时列表元素的反直觉截断？

> ID：11789363
> 
> 赞同：1
> 
> 时间：2012-08-03T04:40:22.640
> 
> 标签：python, numpy, scipy

我注意到`numpy`. 我有一个要转换为数组的列表列表：

```
>>> a = [['abc', 117858348, 117858388, 'def']] 
```

当我将它转换为数组时，它会将元素转换为字符串（这很好），但意外地丢弃了两个中间元素的最后一位：

```
>>> array(a)
array([['abc', '11785834', '11785838', 'def']], 
      dtype='|S8') 
```

这是什么原因？有没有办法没有这种行为？将列表转换为数组很方便的原因是为了快速索引某些元素。例如，如果您有一个`x`数组索引列表`a`，您可以`a[x]`检索它们。如果`a`是列表列表，则不能，而是必须执行类似`[a[i] for i in x]`.

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:09:29.480

这很有趣，运行你的例子给了我这个：

```
>>> numpy.asarray([['abc', 117858348, 117858388, 'def']])
array([['abc', '117', '117', 'def']], 
      dtype='|S3') 
```

我很想知道转换是如何工作的：

```
>>> help(numpy.asarray)
asarray(a, dtype=None, order=None)
Convert the input to an array.

Parameters
----------
a : array_like
    Input data, in any form that can be converted to an array.  This
    includes lists, lists of tuples, tuples, tuples of tuples, tuples
    of lists and ndarrays.
dtype : data-type, optional
    By default, the data-type is inferred from the input data. 
```

看起来底层类型是`inferred from the input data`，我想知道这意味着什么，所以我做了

```
>>> import inspect
>>> print inspect.getsource(numpy.asarray) 
```

我们得到`return array(a, dtype, copy=False, order=order)`但是`numpy.array`是内置的，所以通过[http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)的文档我们得到：

> dtype：数据类型，可选
> 数组所需的数据类型。如果没有给出，那么类型将被确定为在序列中保存对象所需的最小类型。此参数只能用于“向上转换”数组。对于向下转换，请使用 .astype(t) 方法。

好吧，它看起来尽可能向上转换，所以在我的情况下向上转换为长度为 3 的字符串，因为那是我在序列中拥有的最长字符串，如果我引入更长的字符串，它会向上转换，似乎在我的如果它没有正确考虑其他类型的数字长度，这可能是一个错误，我不知道......

你可以只指定一个长字符串序列

```
>>> numpy.asarray([['abc', 117858348, 117858388, 'defs']], dtype = 'S20')
array([['abc', '117858348', '117858388', 'defs']], 
  dtype='|S20') 
```

20个字符似乎绰绰有余，虽然它可能会消耗更多的内存，所以你可以简单地将它设置为最大值......

据我所知`numpy`，将值存储为同质类型，这就是为什么在创建数组时一切都必须是预先确定的类型。

```
>>> numpy.__version__
'1.6.1'

$ python --version
Python 2.6.1

$ uname -a
Darwin 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T05:20:21.867

如果您使用对象数组，则不会有任何截断。这也将允许您混合不同的类型，并获得所有索引的说服力。

```
a = [['abc', 117858348, 117858388, 'def']]
a = array(a, dtype=object)
type(a[0, 0])
# <type str>
type(a[0, 1])
# <type int> 
```

# iphone - Xcode：为什么找不到_objc_retain？

> ID：11789368
> 
> 赞同：1
> 
> 时间：2012-08-03T04:41:25.350
> 
> 标签：iphone, xcode, sdk, automatic-ref-counting, nsfetchrequest

我在构建 Xcode 项目时遇到问题。

我正在使用 Xcode4.3，基础 SDK = 5.0，部署目标 = 4.3

奇怪的是，我几天前能够成功构建项目而没有任何错误。即使对于 git commit 它也成功构建。

但是，当我尝试在命令行中构建 .xcodeproj 时，它会说类似

```
Undefined symbols for architecture i386:
"_objc_retain", referenced from: 
```

其他未定义的符号是 _objc_retainAutoreleasedReturnValue、_objc_release、_objc_autoreleaseReturnValue、_objc_storeStrong 和 _objc_autorelease。

我想这和ARC有关……只​​是建造它时的突然失败让我感到困惑……

我还搜索了这里的网站和问题，并提到了一些关于框架引用的问题……但是我检查了连接，似乎没有缺少任何必需的框架。

因此，任何人都可以帮助我，因为我完全不知道在构建时突然失败...

更多信息：在这些日子里，我的代码没有太大变化，只是修改了一些布局。一个很大的变化是允许应用 APNS（它更新了配置文件并已经修复了“代码签名错误：未找到配置文件（长字符串）。”）

# 编辑：

只是发现这是由改变编码风格引起的......我正在使用

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:(NSString *)]; 
```

导致错误看起来像 - 错误：'NSFetchRequest'没有可见的@interface声明选择器'initWithEntityName：'“然后当我改为使用

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:(NSString *) inManagedObjectContext:(NSManagedObjectContext *)];
[request setEntity:entity]; 
```

我上面的问题中提到的错误出现了....

需要帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:37:23.047

原来这只是在提交到 git 期间意外分支......

# ios - UIImageView 的图像属性没有正确分配

> ID：11789370
> 
> 赞同：0
> 
> 时间：2012-08-03T04:41:30.067
> 
> 标签：ios, uiimageview, uiimage

下面的两行代码是我发现通常建议从封装在 NSData 对象中的网络流中获取图像数据，将其转换为 UIImage，然后分配给 UIImageView。但是我没有看到任何图像。当我进一步观察时，我最终发现图像分配并没有像人们想象的那样“接受”。J 将收到 nil (0) 的值。

```
UIImage * I = [UIImage imageWithData:NextFrame];
[RootView.MyImageView setImage:I];
UIImage * J = [RootView.MyImageView image]; 
```

我知道这不是很多信息，但我不知道为什么这么简单的事情会失败，或者其他信息可能与 UIImageView 交互。如果有人有任何关于为什么会发生这种情况的信息，我将非常感谢您的回复。我整天都在研究这个问题，通过网络查看不同的示例，他们都指出我上面的前两行代码是正确的。

PS，这个动作发生在主线程中。我以前被那个虫子咬过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:12:33.190

我发现了问题。MyImageView 是 UIImageView 的子类。这本身不是问题，但是当我有一个名为 Image 的插座时，它似乎与 image 属性混淆了。将名称更改为 MyImage 并且效果很好。它真的很好用。出口的概念还为时过早。我什至不知道我是否需要将它与该属性一起使用。（我是所有这些 iOS 框架的新手。）

感谢您的回复，它让我更关注图像视图类而不是整个应用程序的其他方面。

# javascript - FX15 OSX 中的 Date.parse ddd mmm dd hh:mm:ss UTC +nnnn 问题

> ID：11789378
> 
> 赞同：0
> 
> 时间：2012-08-03T04:42:44.823
> 
> 标签：javascript, date

我期待能够解析这种格式
`var dStr = "Thu Aug 2 12:20:12 UTC +0100";`
，但在 Fx15 中没有。Chrome 看起来很开心

什么是上面所说的（RFC ...），是否值得我尝试让 date.js 来处理它 - 似乎它自 2008 年以来没有更新[http://code.google.com/p/datejs /](http://code.google.com/p/datejs/)

更新：我现在注意到丢失的 YYYY - 添加它可以解决问题
OP 忘记给我 yyyy - 格式是“Thu Aug 2 12:20:12 UTC +0100 2012”

更新：如果我这样做，也适用于 date.js

`Date.parse(dStr.replace(" UTC",""))`;

**试训：**

*   本机：http: [//jsfiddle.net/mplungjan/KWTb2/](http://jsfiddle.net/mplungjan/KWTb2/) - 在 FX15 osx 中不行

*   moment.js： http: [//jsfiddle.net/mplungjan/J9gH9/](http://jsfiddle.net/mplungjan/J9gH9/) - 如果我添加年份则有效

*   date.js 替换： http: [//jsfiddle.net/mplungjan/SQrgW/](http://jsfiddle.net/mplungjan/SQrgW/)（有效）

*   添加年份作品（FX15，OSX）[http://jsfiddle.net/mplungjan/dYNLD/](http://jsfiddle.net/mplungjan/dYNLD/)

我会尝试让 OP 添加一年的服务器端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:46:55.040

字符串是有效格式。

```
console.log(new Date("Thu Aug 2 12:20:12 UTC +0100")); 
```

***编辑：*** 在 Firefox 中，您似乎需要指定年份。 [演示](http://jsfiddle.net/KWTb2/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:48:41.490

试试[http://momentjs.com/](http://momentjs.com/)。它至少与最近的版本保持同步。

# django - django模型验证不起作用

> ID：11789390
> 
> 赞同：11
> 
> 时间：2012-08-03T04:43:48.240
> 
> 标签：django, django-models

我有以下模型：

```
class CardInfo(models.Model):
    custid = models.CharField(max_length=30, db_index=True, primary_key = True)
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    street = models.CharField(max_length=100)
    building = models.CharField(max_length=100)
    city = models.CharField(max_length=100)
    state = models.CharField(max_length=100)
    zipcode = models.CharField(max_length=100)
    payment_method = models.CharField(max_length=100, null=True, blank=True)
    amount = models.CharField(default = '0',max_length=10, null=True, blank=True)
    valid_to_month = models.CharField(max_length=100, null=True, blank=True)
    valid_to_year = models.CharField(max_length=100, null=True, blank=True)
def __unicode__(self):
    return "Cust ID %s" %(self.custid) 
```

在 shell 中，当我给出 full_clean 时，我得到验证错误，但在保存时它会被保存而不是抛出错误。为什么会这样？我正在使用 django1.3 和 python 2.6：

```
c=CardInfo(custid="Asasasas")
c.full_clean()
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/usr/local/python2.6/lib/python2.6/site-packages/django/db/models/base.py", line 828, in full_clean
raise ValidationError(errors)
ValidationError: {'building': [u'This field cannot be blank.'], 'city': [u'This field cannot be blank.'], 'first_name': [u'This field cannot be blank.'], 'last_name': [u'This field cannot be blank.'], 'zipcode': [u'This field cannot be blank.'], 'state': [u'This field cannot be blank.'], 'street': [u'This field cannot be blank.']}
c.save() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T07:43:14.430

文档对此很[明确](https://docs.djangoproject.com/en/1.8/ref/validators/#how-validators-are-run)：

> 请注意，当您保存模型时，验证器不会自动运行，但如果您使用的是 ModelForm，它将在表单中包含的任何字段上运行您的验证器。

如果您不使用表单，则在保存之前调用 clean 方法是您的责任。

可以像这样强制调用模型验证器：

```
model_instance.full_clean() 
```

# wpf - 如何将父用户控件依赖属性绑定到子用户控件 ViewModel 属性？

> ID：11789404
> 
> 赞同：0
> 
> 时间：2012-08-03T04:44:43.410
> 
> 标签：wpf, c#-4.0, binding

嗨，我有 2 个用户控件。Parent UserControl 和 Child UserControl 都有自己的 ViewModel。如何将父控件的依赖属性绑定到子控件的 ViewModel 中的属性。任何帮助都是显而易见的。我可以轻松地将 Parent UserControl DependencyProperty 绑定到 Child Control Dependency Property 。但问题是如何将其绑定到 ViewModel 属性。假设我将 Child UserControl 的 Tag 属性绑定到 ParentControl 的 Dependency 属性（到这里为止很好），但是现在我如何将此 Tag 属性绑定到 ViewModel 属性。（我想保持简单，不想使用 Converter/转换器参数逻辑）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:58:44.907

尝试类似的东西

```
{Binding Path=PathToParentDP, RelativeSource={RelativeSource AncestorType={x:Type ParentType}}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:31:07.237

通常你`ViewModels`是你的`DataContext`（数据层）`UserControls`，所以你可以`ViewModel`通过绑定到`DataContext`属性来访问子控件的

```
{Binding ElementName=MyChildUserControl, Path=DataContext.ChildViewModelProperty} 
```

# android - 套接字连接和轮询。就电池寿命而言，哪个是更好的解决方案？

> ID：11789407
> 
> 赞同：42
> 
> 时间：2012-08-03T04:44:55.550
> 
> 标签：android, sockets, tcp, polling, battery

所以......我正在为Android制作一个应用程序。应用程序需要发送和接收实时聊天数据（需要是一个套接字），但它还需要发送命令（客户端不知道它何时发送）。

我需要知道在节省用户电池方面什么是更好的解决方案。

**a)**每次发送命令时打开和关闭连接，如果打开聊天选项卡，则保持连接不变。

**b)**始终保持连接不变。

我浏览了互联网，但得到的答案不一，有人说保持持久连接不利于电池寿命，而另一些人则说不是（例如：*“你问保持 TCP 连接打开是否会耗尽电池电量-life？也许我离这里很远，但是，保持连接打开不应该浪费电池寿命......如果你认为它会我很想知道你从哪里得到这些信息。这对我来说听起来很奇怪。“*）

或者如果有其他更好的解决方案。我也不认为 Google 的 C2DM 在这种情况下会非常有用。

基本上，什么会更耗电：保持连接，或者打开和关闭连接，除非打开聊天选项卡？

谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-03T05:32:03.083

保持空闲 TCP 套接字连接打开（没有发送或接收数据）不会（或至少不应该）比关闭它消耗更多的电池。这是因为空闲的 TCP 连接不使用带宽或 CPU 周期 (*)。

也就是说，长时间保持 TCP 连接打开对于移动设备来说可能不是一个好的选择，因为 TCP 连接不能与进入睡眠状态的计算机进行良好的交互。问题场景是这样的：您的 Android 用户在您的应用程序运行时让他的 Android 设备进入睡眠状态，然后远程用户的程序（或 TCP 连接另一端的任何程序）通过 TCP 流发送一些数据。远程用户的程序永远不会从 Android 设备收到任何 ACK，因为当然 Android 设备处于休眠状态，所以远程设备的 TCP 堆栈假定它发送的 TCP 数据包一定已经丢失，并通过增加超时时间来响应，减小其 TCP 窗口大小（即一次允许在飞行中允许的 TCP 数据包数量），并重新发送 TCP 数据包。但是 Android 设备仍然处于休眠状态，因此同样的事情再次发生。结果是几分钟后，TCP 连接的远程端已经减慢到即使 Android 设备要唤醒，TCP 连接也可能太慢而无法使用——此时您的程序将需要关闭陷入困境的 TCP 连接并启动一个新的连接，所以为什么还要尝试保持打开状态呢？

因此，我的建议是使用选项 (a)，并规定您关闭 TCP 连接作为您的设备现在进入睡眠例程的一部分。

一个可能的警告是，如果 Android 具有一个功能，即保持 TCP 连接打开会导致 WiFi 或蜂窝网络硬件在否则可能进入睡眠状态的情况下保持通电 - 如果是这种情况，那么 Android设备将为天线供电支付电池成本，否则它不必支付。我不知道有任何类似的 Android 逻辑，但我只使用了一点 Android，所以这可能只是我的无知。至少它可能值得测试。

(*) 好吧，从技术上讲，TCP 确实会在 TCP 连接打开时每隔一段时间发送一个“keepalive”数据包，这确实会占用一些 CPU 周期和天线功率……但在 Android 上发送 keepalive 数据包的默认间隔是[两个小时](https://stackoverflow.com/questions/6565667/how-to-set-the-keepalive-timeout-in-android)，所以我怀疑用于此的力量会很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:49:20.780

为了真正保持连接打开，您可能必须来回发送心跳信号，因为 android 设备和您的服务器之间的任何有状态路由器都会在相对较短的时间后忘记连接。

哪个更好取决于您认为无需连接到服务器即可使用多长时间。如果您在大多数情况下大约每 30 秒左右连接一次，请务必保持连接打开，但如果没有，您最好关闭它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T12:09:25.737

电池与 3G 上从 DCH/FACH/IDLE 的无线电状态转换非常相关。如果您想拥有一个节能的应用程序，您应该在有限的时间间隔内发送尽可能多的数据，与持久连接无关......

# spring - 将参数从 JSP 发送到 spring 控制器

> ID：11789409
> 
> 赞同：2
> 
> 时间：2012-08-03T04:45:17.973
> 
> 标签：spring, model-view-controller, jsp

我正在使用 Spring MVC 开发一个 Web 应用程序。我以以下格式将参数从 JSP 传递到 spring 控制器。就像我必须传递两个参数一样，所以我在做

```
<a href="/spring.html?data1=<%=data1 %>?data2=<%=data2 %>"> Hello </a> 
```

我的假设是在弹簧控制器中，我可以收到如下输出

```
data1= request.getAttribute("data1");
data2= request.getAttribute("data2"); 
```

这是传递参数的正确方法吗？我已经多次运行我的代码，但我的页面仍然给出空指针，所以我怀疑是否是因为这个。你能否请让我知道这件事。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:50:40.397

至少有2个技术错误：

1.  您应该将请求参数作为请求参数获取，而不是作为请求属性。

    ```
    data1 = request.getParameter("data1");
    data2 = request.getParameter("data2"); 
    ```

2.  请求参数分隔符是`&`，不是`?`。是`?`请求查询字符串分隔符。

    ```
    <a href="/spring.html?data1=<%=data1 %>&data2=<%=data2 %>"> Hello </a> 
    ```

顺便说一句，还有第三个错误，但这更多是设计问题。[十年来一直不鼓励使用](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)[*Scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:58:23.003

如果它是 Spring MVC 控制器，那么你不需要调用`request.getParameter`。您可以像这样定义您的方法，参数将由 MVC 框架自动填充：

```
@RequestMapping(value="/myRequest", method=RequestMethod.GET)
@ResponseBody
public String handleMyRequest(
        @RequestParam String data1,
        @RequestParam String data2
        ) {
   // your handler code here
   // you will have data1 and data2 automatically populated by Spring MVC
} 
```

# algorithm - when to use segment tree and when to use BIT

> ID：11789412
> 
> 赞同：4
> 
> 时间：2012-08-03T04:45:30.697
> 
> 标签：algorithm, data-structures

I don't have a scenario. But for the generic case where we have to just

1.  Update in a range (example clear all values in some range i-j)
2.  Query for some value in a range. (example RMQ)
3.  Make an update on an individual element ( a specific case of point 1)
4.  Search for a particular value in a range ( again a specific case of point 2)

All these operations can be performed with either a BIT or a segment tree.But except **3** and some specific cases of **2** segment tree is much more efficient. (Infact BIT doesn't helps in any way for queries like RMQ)

The most clear advantage of BIT is its far easier to code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:44:05.787

(Here are my thoughts after spending time with segment tree and BIT problems since few weeks, so i am quite new it)

BIT is easier to code, but there are situations which you can easily visualize and relate to a segment tree. Another advantage that BIT offers is that it takes the lesser space (O(n) space).

From what i feel, segment trees are easier to understand compared to BIT, so you can easily apply and relate it to a given situation. Lazy propagation is also simpler and easy to understand in segment trees. Thus, Segment tree lets you efficiently update over a range.

# wxwidgets - 如何将一些图片保存到一张图片中？

> ID：11789413
> 
> 赞同：0
> 
> 时间：2012-08-03T04:45:39.247
> 
> 标签：wxwidgets

我在 wxPanel 中用 wxStaticbitmap 绘制了一些图片。现在我想将这些图片保存到一个文件中，最好是图像格式。有什么我可以调用的函数吗？或者怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:27:24.240

您需要截取包含位图的窗口的屏幕截图。

这是一些详细的代码，展示了如何做到这一点 - 这是第二篇文章。

[http://forums.wxwidgets.org/viewtopic.php?p=32313](http://forums.wxwidgets.org/viewtopic.php?p=32313)

# database - 带有 Erlang/OTP 的面向服务的架构：如何正确使用消息传递

> ID：11789418
> 
> 赞同：2
> 
> 时间：2012-08-03T04:46:47.437
> 
> 标签：database, activerecord, erlang, soa, erlang-otp

[我之前](https://softwareengineering.stackexchange.com/questions/154034/amazon-soa-database-as-a-service)关于数据库访问和服务抽象的问题的答案帮助我理解了在 SOA 中数据库服务应该提供公共 API，而不是对数据库的直接访问（SQL 或通过 ORM）。

现在，如果我想在 Erlang/OTP 应用程序中创建（SOA）服务，我认为它应该是 gen_server 或其他 OTP 行为，因为在这种情况下，API 将很容易定义并且服务本身可以很容易地合并到应用程序。

但是我应该如何将数据从服务传递给它的消费者呢？

我知道在 Ruby on Rails 中我可以做类似的事情

```
persons = Person.find(all) 
```

然后我可以返回`persons`服务消费者。

在 Erlang/OTP 中，如果`persons`有几千条记录，我应该在 gen_server return 语句中传递它吗？这意味着 gen_server 将向其调用者（服务消费者）发送一条消息，并且该消息将实质上复制到 Erlang VM 中。我倾向于认为这不是对 Erlang 消息传递的正确使用。

所以我的问题是：

*   如何在 Erlang/OTP 中创建数据库服务 (SOA)？
*   这种服务的 API 应该使用 OTP 标准机制（如 gen_server 返回消息）还是其他任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:44:33.757

并非所有 Erlang 应用程序都需要消息传递！此外，并非所有 Erlang 应用程序都需要使用`gen_servers`. 对于涉及连接的应用程序（例如 Web 应用程序），让我们真正分析一下您需要`gen_server`.

Web 服务器（`Yaws`）本质上会产生一个进程来处理每个传入的请求。现在，在您的应用程序中，可能会发生以下情况：

```
1\. 您也可能会生成另一个进程来处理请求，然后将
答案作为消息发送给第一个进程
2\. 您可能只是通过不同模块中的一堆顺序代码来处理请求
，例如直接发送给 mnesia 或通过 odbc 连接等
```

现在，在 的情况下`1`，您已经在增加每个请求的进程数。大多数应用程序将与 case 足够并行`2`。这一切是怎么`gen_server`来的？

A`gen_server`是许多事物的抽象。但是，a 仍然会`gen_server`处理 requests `one-by-one`，同时也会产生故障点。当然，当它失败时，有一个`restart strategy`会提出来的。因此，如果您`gen_server`介于两者之间`yaws`并说`mnesia`或`an odbc connection to MySQL / Oracle / e.t.c.`然后，则执行的并行化`yaws`是浪费时间，因为 gen_server 正在按顺序为这些进程提供服务。然而，现在，如果每个进程都通过一堆顺序代码来获得答案，那么好处是巨大的。

实际上，我之前创建了一些`SOA`应用程序，但它们是`RESTFUL`自然的。我发现实际上，如果他们在数据库中获取信息的路径中有一个，那么使用说`yaws appmods`（他们基本上`RESTFUL`已经）会很浪费。在应用程序的速度和稳定性方面`gen_server`消除了改进的性能。`gen_server`有时，`mailbox / message box`你`gen_server`的进程可能会变得太大，并且会减慢整个系统的速度，因为进程将等待答案。另一件事，因为消息在 erlang 虚拟机中被复制到各处，内存成为问题。作为您的问题的参考示例，打开这[本书（Franceso and Simpsons Erlang Book）](http://worknetlab.no-ip.org/docs/programming/erlang/ERLANG%20Programming.pdf)并查看 page `110`，在标题下`A Case Study on Concurrency-Oriented Programming`，它们向您展示了流​​程设计模式、坏方法和好方法。

# php - 无法覆盖 symfony2 中的表单模板

> ID：11789424
> 
> 赞同：0
> 
> 时间：2012-08-03T04:47:39.227
> 
> 标签：php, forms, symfony

我有表单集合，在我的模板中我有这个代码

```
 {% for task in form.usertasks %}
                <tr>
                <td> {{ form_row(task.mainTask.name) }} </td>
                <td> {{ form_row(task.tasknote) }}</td>
                <tr>
 {% endfor %} 
```

现在上面代码的输出是这样的

```
<td>  <div>
      <label> name</label>
      <input value="MYTASK NAME">
      </div>
</td>

<td> <div>
     <label> tasknote</label>
     <input value="TASK NOTE">
     </div>
</td> 
```

有什么方法可以得到以下代码作为最终结果。

```
<td>  MYTASK NAME </td>

<td> <input value="TASK NOTE"></td> 
```

我已经尝试了很多东西，但我无法覆盖。我试过[这个链接](http://symfony.com/doc/current/cookbook/form/form_customization.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T06:55:28.950

首先，您应该从表单构建器中删除 task.mainTask.name 并使用 entity.mainTask.name 例如来显示该值。

# javascript - 使用 jquery 选择元素附近的第一个 h2

> ID：11789427
> 
> 赞同：0
> 
> 时间：2012-08-03T04:48:13.747
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors

我真的是 JS 和 JQuery 的新手，我没有选择要动画的元素，这是我的 HTML

```
 <div class="box-product">
      <h2>Light</h2>
      <figure>
        <img src="img/boxes/light.jpg" alt="Pepper Box Light" title="Pepper Box Light" />
        <figcaption>
          Versão light, porém igualmente apimentada da nossa PepperBox, para quem quer se divertir com seu amor</figcaption>
      </figure>          
    </div><!-- box-product --> 
```

我正在尝试选择`h2`用户将鼠标悬停在的时间`figure`，所以这是我最好的猜测：

```
 $('.box-product figure').hover(function() {
    $('.box-product').closest('h2').animate({color: 'f00'}, 'slow')
}, function() {
    $('.box-product').closest('h2').animate({color: 'inherit'}, 'slow')
}); 
```

但是什么也没发生，所以，我需要一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:51:35.037

`closest():`

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

您可以使用`prev()`方法：

```
$('.box-product figure').hover(function() {
   $(this).prev().animate({color: '#f00'}, 'slow')
}, function() {
   $(this).prev().animate({color: 'inherit'}, 'slow')
}); 
```

或者：

```
$('.box-product figure').hover(function() {
   $(this).siblings('h2').animate({color: '#f00'}, 'slow')
}, function() {
   $(this).siblings('h2').animate({color: 'inherit'}, 'slow')
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:52:10.303

[`.prev()`](http://api.jquery.com/prev/)由于期望`h2`是 的上一个同级，因此使用`figure`，[`.closest()`](http://api.jquery.com/closest/)搜索所选项目的祖先以寻找匹配项。

```
$('.box-product figure').hover(function() {
    $h2 = $(this).prev('h2');
    $h2.animate({color: '#f00'}, 'slow')
}, function() {
    $h2.animate({color: '#000'}, 'slow')
}); 
```

[小提琴](http://jsfiddle.net/mowglisanu/zQZZh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:53:04.663

[`closest()`](http://api.jquery.com/closest/)在父节点之间返回 dom 树中的元素。您将需要[`siblings("h2")`](http://api.jquery.com/siblings/)或只是[`prev()`](http://api.jquery.com/prev/)在悬停之前获取元素`<figure>`：

```
$('.box-product figure').hover(function() {
     $(this).prev().animate({color: 'f00'}, 'slow')
}, function() {
    $(this).prev().animate({color: 'inherit'}, 'slow')
}); 
```

从 selector 开始`$('.box-product')`，您可以使用[`find("h2")`](http://api.jquery.com/find/)or [`children("h2")`](http://api.jquery.com/children/)，但这会选择整个文档中的所有这些。如果你的盒子是独一无二的，你也可以使用类似的东西`$("#box-product h2")`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T04:53:16.753

`h2`是 的兄弟姐妹`figure`。

```
$('.box-product figure').hover(function() {
    $(this).siblings('h2').animate({color: '#f00'}, 'slow')
}, function() {
    $(this).siblings('h2').animate({color: 'inherit'}, 'slow')
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T04:53:36.753

试试这个......最近的第一个元素......

```
​$('h2').siblings(':first')​;​ 
```

[**小提琴**](http://jsfiddle.net/PvqWQ/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T04:57:16.843

*close()*方法从父层次结构中找到最接近的匹配，而不是从子元素或兄弟元素。

在您的情况下，您只需要从父元素中找到子元素。像这样：

```
 $('.box-product figure').hover(function() {
     $(this).closest('.box-product').find('h2').animate({color: 'f00'}, 'slow')
 }, function() {
     $(this).closest('.box-product').find('h2').animate({color: 'inherit'}, 'slow')
 }); 
```

# mysql - 范围 IP 的远程 MySQL 连接

> ID：11789430
> 
> 赞同：1
> 
> 时间：2012-08-03T04:48:39.193
> 
> 标签：mysql

我正在尝试设置一个可以从 IP（192.168.1.100~192.168.1.255）访问 mysql 的远程 mysql 用户。

我尝试了以下命令：

```
GRANT select ON *.* TO 'uname'@'192.168.1.%'  IDENTIFIED BY 'some_pass' WITH GRANT OPTION; 
```

问题是它也允许从 192.168.1.1 到 192.168.1.99 的 IP。

所以我尝试了这个：

```
GRANT select ON *.* TO 'uname'@'192.168.1.100/25'  IDENTIFIED BY 'some_pass' WITH GRANT OPTION; 
```

结果相同。有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:54:31.823

```
GRANT select ON . TO 'uname'@'192.168.1.1__' IDENTIFIED BY 'some_pass' WITH GRANT OPTION;
GRANT select ON . TO 'uname'@'192.168.1.2__' IDENTIFIED BY 'some_pass' WITH GRANT OPTION; 
```

# c++ - 枚举值的编译器支持

> ID：11789434
> 
> 赞同：1
> 
> 时间：2012-08-03T04:49:19.977
> 
> 标签：c++, enums, compilation, standards

给定`enum`这样的声明：

```
enum {
    A,
    B,
    C,
    D
}; 
```

参考 C++11 标准第 7.2 节的一般编译器支持是什么？具体来说，这段摘自第 7.2.2 节：

> 如果第一个枚举器没有初始化器，则相应常量的值为零。没有初始化器的枚举器定义为枚举器提供了通过将前一个枚举器的值增加一而获得的值。

**我能否期望常见的现代编译器（GCC、Intel、Clang、CL 的最新版本、*其他*）给出相同的结果，即`A = 0`、`B = 1`、`C = 2`和`D = 3`？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T05:00:58.437

您引用的规则在 C++11 中并不新鲜。它是 C++03、C++98、C11、C99 和 C89 的一部分。在这些语言标准化*之前，*这条规则就已经存在。Java 和 C# 都通过枚举继承了这种行为。

是的，编译器支持这部分语言。就像它们支持`if`, `switch`, `#define`, `int`s 和其他*基本语言结构*一样。

我们不是在谈论 r 值引用或 lambdas 什么的。这是今天许多程序员*出生*之前的核心内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T04:53:05.143

是的，如果编译器支持标准。

```
enum { a, b, c=0 };
enum { d, e, f=e+2 }; 
```

定义`a`、`c`和`d`为零、1 和`b`3 。`e``f`

# node.js - 设置 node.js 服务器

> ID：11789436
> 
> 赞同：0
> 
> 时间：2012-08-03T04:49:22.260
> 
> 标签：node.js

我设法设置了一个 node.js 服务器，并在我的本地计算机上访问它（通过 localhost）。但是，我无法从 LAN 上的任何其他计算机访问它。

服务器是192.168.1.103，客户端是192.168.105

我将 Apache 用于 Web 服务器，将 node.js 用于端口 8080 上的聊天服务器。

似乎每次我重新启动服务器时，都会收到不同的错误。有时我可以从远程计算机访问 192.168.1.103:8080/socket.ion/socket.io.js ，有时它会因错误而导致服务器崩溃，或者：

```
/home/tnewhook/node_modules/socket.io/lib/manager.js:0
(function (exports, require, module, __filename, __dirname) { /*!
^
RangeError: Maximum call stack size exceeded 
```

或者

```
/home/tnewhook/node_modules/socket.io/lib/manager.js:916
match = req.url.substr(0, resource.length); 
```

到目前为止我见过的最奇怪的错误是

```
missing resource (GET http://192.168.1.105:8080/socket.io.  error in socket.io.js:1632 
```

为什么 socket.io 会尝试调用自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:56:22.117

如果我在客户端套接字 io js 中没有记错的话，有一个硬编码的 ip，这解释了为什么这在两台计算机之间不起作用。

要解决此问题，请将您的应用程序上传到像[dotcloud.com](http://dotcloud.com)这样的服务提供商，或者 nodejitsu（仅限有限的 beta 访问）唯一支持 websockets 的服务提供商。

或者您可以例如在机器 edic`/etc/hosts` 和服务器上添加

```
myApp.local 127.0.0.1 
```

并在客户端

```
myApp.local 192.168.1.103 
```

例如，对于一个 procedent 项目，我使用本地 DNS 或 dotcloud 与世界共享。

```
var url = 'http://myapp:8080';
url = 'http://myapp-me.dotcloud.com';
var socket = io.connect(url); 
```

# php - 提交表单时在弹出窗口中打开响应

> ID：11789438
> 
> 赞同：0
> 
> 时间：2012-08-03T04:49:45.427
> 
> 标签：php, javascript, jquery, forms, popup

提交表单后，我想打开某种感谢弹出窗口。我正在使用这个表单脚本： http: [//www.mattvarone.com/web-design/simpleform-php-email-script](http://www.mattvarone.com/web-design/simpleform-php-email-script)已经有响应但只会出现内联。

请帮忙！非常感谢您的先进！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:49:32.783

您可以将 jquery 插件用于弹出窗口，然后使用`.popup()`它包含的功能。[您可以从这里](http://swip.codylindley.com/popupWindowDemo.html)下载弹出插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:52:44.777

您是否尝试向[`alert()`](http://www.w3schools.com/js/js_popup.asp)表单的`onsubmit`事件添加 javascript 函数？如果表单已经调用了一个函数，你可以在最后添加一条警告语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:53:03.407

在 javascript`checkform.js`中，您可能需要更改此部分：

```
if ( passed == false ) 
{
    // responce = alertText.replace('#name', eLabel); // Comment this out
    alert( responce ); // Let just the response be there
    next.focus();
    return false;
} 
```

或者我想说的最好的建议是使用 jQuery 或类似的模态窗口插件：[http ://www.queness.com/post/77/simple-jquery-modal-window-tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)

# android - android中的Textview出现和消失

> ID：11789442
> 
> 赞同：0
> 
> 时间：2012-08-03T04:50:25.930
> 
> 标签：android, textview

在我的应用程序中，我必须显示一些 3 个编辑文本视图和 3 个文本视图，基于某些条件（即）如果它满足某些条件，则应该显示，否则它不应该显示。我在 xml 文件中有这个文本视图。我怎样才能做到这一点..提前致谢：

我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Item" 
        android:layout_marginLeft="10dp"/>

    <EditText
        android:id="@+id/itemedit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Price" 
        android:layout_marginLeft="10dp"/>

    <EditText
        android:id="@+id/priceedit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:numeric="decimal"/>

    <LinearLayout                                   
          android:orientation="horizontal"          
         android:layout_width="fill_parent"
         android:layout_height="wrap_content">

           <TextView                             -------->TExtview1

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:text="Type" 
        android:layout_marginLeft="10dp"/>        
             <TextView                              --------->TExtview2

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"       
        android:gravity="center_horizontal"  
        android:text="Recurrence" 
       />        

             <TextView                               --------->TExtview3
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"       
        android:text="Start Date" 
       />        

         </LinearLayout>

      <LinearLayout 
         android:orientation="horizontal" 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         >

        <EditText                                     --------->edittext1
        android:id="@+id/recccatedit"
        android:layout_width="110dp"
        android:layout_height="wrap_content"  

        />

        <EditText                                       --------->edittext2
        android:id="@+id/reccedit"
        android:layout_width="80dp"
        android:layout_height="wrap_content" 

        android:numeric="decimal"
        />

    <EditText                                             --------->edittext1
        android:id="@+id/reccdateedit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_weight="1"   
        android:layout_gravity="right"
/>
    </LinearLayout>

            <LinearLayout 
         android:orientation="horizontal" 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="10dp">

                <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Back" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Save" />

    <Button
        android:id="@+id/btndelete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Delete" />

      </LinearLayout>

</LinearLayout> 
```

我的java类文件：

```
if(!reccinc.equals("0"))
            {
                System.out.println("Inside if");
            EditText rec=(EditText)findViewById(R.id.reccedit);
            EditText reccdate=(EditText)findViewById(R.id.reccdateedit);
            EditText recctype=(EditText)findViewById(R.id.recccatedit);

            String recc=null;
            String date=null;
            String type=null;
            db.open();               
            if(!intent.getStringExtra("Recc").equals("0"))
            {
                 Cursor c= db.getReccurenceCount(intent.getStringExtra("Recc"));    
                 startManagingCursor(c);
                 recc=c.getString(c.getColumnIndex("increment"));
                 date=c.getString(c.getColumnIndex("startdate"));
                 type=c.getString(c.getColumnIndex("recurrencetype"));
            }

            rec.setText(recc);
            recctype.setText(type);
            reccdate.setText(date);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:53:37.900

你可以打电话

```
view.setVisibility(View.GONE); 
```

使视图从布局中消失。你可以打电话

```
view.setVisibility(View.VISIBLE); 
```

把它带回来（假设它没有从布局中删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:03:39.837

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Item" 
    android:layout_marginLeft="10dp"/>

<EditText
    android:id="@+id/itemedit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Price" 
    android:layout_marginLeft="10dp"/>

<EditText
    android:id="@+id/priceedit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:numeric="decimal"/> 
```

you can have a id for linearlayout as linearlayout1 and set visibility as Invisible

```
<LinearLayout        
      android:id=""@+id/linearLayout1"             
      android:orientation="horizontal"          
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
      android:visibility="invisible">

       <TextView                             -------->TExtview1

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:text="Type" 
    android:layout_marginLeft="10dp"/>        
         <TextView                              --------->TExtview2

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"       
    android:gravity="center_horizontal"  
    android:text="Recurrence" 
   />        

         <TextView                               --------->TExtview3
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"       
    android:text="Start Date" 
   />        

     </LinearLayout> 
```

you can have a id for linearlayout as linearlayout2 and set visibility as Invisible

```
 <LinearLayout 
     android:id="@+id/linearLayout2"
     android:orientation="horizontal" 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
      android:visibility=""invisible"
     >

    <EditText                                     --------->edittext1
    android:id="@+id/recccatedit"
    android:layout_width="110dp"
    android:layout_height="wrap_content"  

    />

    <EditText                                       --------->edittext2
    android:id="@+id/reccedit"
    android:layout_width="80dp"
    android:layout_height="wrap_content" 

    android:numeric="decimal"
    />

<EditText                                             --------->edittext1
    android:id="@+id/reccdateedit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_weight="1"   
    android:layout_gravity="right" 
```

/>

```
 <LinearLayout 
     android:orientation="horizontal" 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_marginTop="10dp">

            <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Back" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Save" />

<Button
    android:id="@+id/btndelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Delete" />

  </LinearLayout> 
```

your java file

My java class file:

```
if(!reccinc.equals("0"))
            {
              linearLayout1.setVisibility(View.VISIBLE);
                System.out.println("Inside if");
            EditText rec=(EditText)findViewById(R.id.reccedit);
            EditText reccdate=(EditText)findViewById(R.id.reccdateedit);
            EditText recctype=(EditText)findViewById(R.id.recccatedit);

            String recc=null;
            String date=null;
            String type=null;
            db.open();               
            if(!intent.getStringExtra("Recc").equals("0"))
            {
                  linearLayout.setVisibility(VIEW.VISIBLE);

                 Cursor c= db.getReccurenceCount(intent.getStringExtra("Recc"));    
                 startManagingCursor(c);
                 recc=c.getString(c.getColumnIndex("increment"));
                 date=c.getString(c.getColumnIndex("startdate"));
                 type=c.getString(c.getColumnIndex("recurrencetype"));
            }

            rec.setText(recc);
            recctype.setText(type);
            reccdate.setText(date);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:57:38.137

当您想在特定条件下显示它们时，只需使您的父布局可见性最初为 android:visibility="gone" ，如果条件满足，则以编程方式将该布局可见性设为 true，以便在您需要时显示，您可以隐藏该完整布局通过将可见性设置为消失。

或者，如果您想添加特定的 edittext 或 textview，然后以编程方式从您的 Activity 中添加和删除它们。

您可以通过以下方式为您的编辑文本做

最初在 xml 中设置它们 visibility="gone"

在特定条件下的代码中，即

```
if(!reccinc.equals("0"))
            {
               System.out.println("Inside if");
               EditText rec=(EditText)findViewById(R.id.reccedit);
               EditText reccdate=(EditText)findViewById(R.id.reccdateedit);
               EditText recctype=(EditText)findViewById(R.id.recccatedit);

                after finding them..
                rec.setVisibity(View.visible);
                recdate.setVisibity(View.visible);
                rectype.setVisibity(View.visible);

       and rest of logic goes here.. 
```

希望这个解释对你有用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:59:25.097

您必须为您的文本视图提供 ID

```
 <TextView                               
    android:layout_id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"       
    android:text="Start Date" 
   /> 
```

然后在java文件中获取它

```
TextView textview =(TextView )findViewById(R.id.text); 
```

然后在条件下做

```
textview.setVisibility(View.INVISIBLE); 
textview.setVisibility(View.VISIBLE); 
```

Gone 将从布局中删除您的视图空间

```
textview.setVisibility(View.GONE); 
```

# database - 网页上的分页是如何工作的？

> ID：11789453
> 
> 赞同：1
> 
> 时间：2012-08-03T04:51:51.387
> 
> 标签：database, web-applications, paging

从数据库“可分页”生成结果集涉及哪些原则或实现？

如何在不将其存储在内存中的情况下对超过一百万条记录进行分页？当有 100 页时，什么允许从 5 到第 50 页码“跳转”？

我正在寻找一种关于如何完成分页的伪代码解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:54:35.333

通常在 Next 按钮的 URL 中有一些东西可以修改呈现页面的数据库查询。然后，呈现的页面会碰撞下一个 URL 中的索引。

所以第一页可能是一个有 LIMIT 20 的 SQL 请求，第 2 页也有 LIMIT 20 但也有 OFFSET 20。

因此，在该模型中，基本上一次只加载 20 个项目，但该页面还会加载多少项目已被偏移如此胖，并更改“下一页”URL。

通常还会有一个函数检查您相对于总项目数的位置，以便页面知道它是否应该显示下一个链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:59:40.570

基本前提是记住以下几点：

1.  定义您的页面大小，即每页的记录数 ( `PAGE_SIZE`)
2.  知道集合中的记录总数。然后你可以计算有多少页。`var numPages = totalNumRecords / PAGE_SIZE;`
3.  使用变量来跟踪页码，即`Page = 1`
4.  执行如下所示的简单 Skip/Take 算法，您就拥有了分页所需的元素

`Skip((page - 1)*PAGE_SIZE).Take(PAGE_SIZE);`

因此，当您点击数据源获取结果时会发生什么，您将跳到您想要的记录集并获取规定的数量。希望这是有道理的。

# c# - Webmatrix 无法从模板创建项目

> ID：11789455
> 
> 赞同：1
> 
> 时间：2012-08-03T04:51:54.297
> 
> 标签：c#, asp.net, asp.net-mvc, webmatrix

我正在使用 webmatrix2，我无法从模板创建项目。它失败并出现错误

```
 Error

 There was an error creating site 'mysitename' Invalid Index.
 (Exception from HRESULT: 0x80070585)

 copy details to clipboard 
```

而它的“从……下载模板”正在生成。这是我的剪贴板内容

```
---------------------------
Error
---------------------------
There was an error creating site 'mysitename'.

Invalid index. (Exception from HRESULT: 0x80070585)
---------------------------
OK
---------------------------

---------------------------
System.Runtime.InteropServices.COMException (0x80070585): Invalid index. (Exception from HRESULT: 0x80070585)
   at Microsoft.Web.Administration.Interop.IAppHostElement.GetPropertyByName(String bstrSubName)
   at Microsoft.Web.Administration.ConfigurationElement.GetAttributeValue(String attributeName)
   at Microsoft.Web.Administration.Binding.get_SslFlags()
   at Microsoft.Web.Administration.Binding.get_CertificateHash()
   at Microsoft.Web.Administration.BindingCollection.Add(Binding binding)
   at Microsoft.Web.Administration.BindingCollection.Add(String bindingInformation, String bindingProtocol)
   at Microsoft.Web.Administration.SiteCollection.Add(String name, String bindingProtocol, String bindingInformation, String physicalPath, Byte[] certificateHash, String certificateStore, SslFlags sslFlags)
   at Microsoft.WebMatrix.Utility.CreateSiteHelper.CreateSite(String name, String path, FrameworkType frameworkType)
   at Microsoft.WebMatrix.Utility.CreateSiteHelper.CreateSiteFromName(String name, Boolean makeNameUnique)
   at Microsoft.WebMatrix.Gallery.Server.GalleryModuleService.<>c__DisplayClass10.<AddSiteFromName>b__f(ExecutionContext context)
   at Microsoft.WebMatrix.Core.Server.ModuleService.<>c__DisplayClass4`1.<InvokeOnMTA>b__0()
   at Microsoft.WebMatrix.Core.TaskServiceImplementation.<>c__DisplayClass8`1.<InvokeOnMTA>b__5()
--------------------------- 
```

在了解错误的含义之前，你们中是否有人遇到过这种情况？

我曾尝试卸载 webmatrix2 然后重新安装它，但一切都以同样的方式失败。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:02:34.977

有同样的问题，但通过手动卸载 IIS Express 7.5 和 WebMatrix 解决了。然后我下载了 IIS 7.5、MSSQL Server Management Objects 和 WebMatrix，然后手动安装了它。通过 WebPI 安装时我的电脑关机，这可能对我造成了问题。

以下链接是我从 WebPI 复制的链接：

IIS Express 7.5：http: [//download.microsoft.com/download/D/C/4/DC4EC38C-A6AA-449D-9B19-7ABC6DF72B34/iisexpress_1_11_x86_en-US.msi](http://download.microsoft.com/download/D/C/4/DC4EC38C-A6AA-449D-9B19-7ABC6DF72B34/iisexpress_1_11_x86_en-US.msi)

MSSQL 服务器管理对象：http: [//download.microsoft.com/download/F/E/D/FEDB200F-DE2A-46D8-B661-D019DFE9D470/ENU/x86/SharedManagementObjects.msi](http://download.microsoft.com/download/F/E/D/FEDB200F-DE2A-46D8-B661-D019DFE9D470/ENU/x86/SharedManagementObjects.msi)

WebMatrix 2：http: [//download.microsoft.com/download/8/5/7/8573745C-384B-4F74-BE2C-D85C390742D5/WebMatrix_x86_en-US.msi](http://download.microsoft.com/download/8/5/7/8573745C-384B-4F74-BE2C-D85C390742D5/WebMatrix_x86_en-US.msi)

希望这可以帮助。

# xcode - Xcode中的单个文件全局/模式是否可以有多个构建规则？

> ID：11789457
> 
> 赞同：2
> 
> 时间：2012-08-03T04:52:00.887
> 
> 标签：xcode, build-automation

您可以为匹配特定模式的文件制定自定义构建规则，例如`*.m`针对 Objective-C 源代码。如果你这样做，那些文件将不再被编译，它似乎覆盖了现有的规则。

是否可以为特定文件类型（例如`.m`文件）创建多个构建规则，并让它们在构建期间运行，这样您就可以让 Xcode 正常编译源代码，但也可以通过其他一些脚本/实用程序运行它们？

# c - C - 使用按位运算符将 int 显示为十六进制

> ID：11789458
> 
> 赞同：0
> 
> 时间：2012-08-03T04:52:06.317
> 
> 标签：c, hex, bit-manipulation

[我正在阅读关于使用 C 将整数显示为十六进制](https://stackoverflow.com/questions/4878572/convert-integer-to-hex)的 SO 问题（不使用 %x，通过使用自定义函数），第一个答案提到使用按位运算符来实现目标。

但我自己无法弄清楚。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T05:00:39.363

我希望这能让你明白一点。

```
char *intToHex(unsigned input)
{
    char *output = malloc(sizeof(unsigned) * 2 + 3);
    strcpy(output, "0x00000000");

    static char HEX_ARRAY[] = "0123456789ABCDEF";
    //Initialization of 'converted' object

    // represents the end of the string.
    int index = 9;

    while (input > 0 ) 
    {
        output[index--] = HEX_ARRAY[(input & 0xF)];
        //Prepend (HEX_ARRAY[n & 0xF]) char to converted;
        input >>= 4;            
    }

    return output;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:09:18.720

This is *not* an "optimal solution". Other posters in the same thread suggested a table lookup, which is much, much better.

But, to answer your question, this is pretty much what he was suggesting:

> [Convert integer to hex](https://stackoverflow.com/questions/4878572/convert-integer-to-hex)
> 
> Each 4 bits of an integer maps to exactly one hex digit, if the value of those four bits is less than 10, then its ASCII representation is '0' + value, otherwise it is 'A' + value - 10.
> 
> You can extract each group of four digits by shifting and masking. The mask value is 0x0f, and assuming a 32bit integer, the right shift starts at 24 bits and decrements by four for each successive digit.

```
#include <stdio.h>

unsigned int
hex_digit (int ival, int ishift)
{
  ival = (ival >> ishift) & 0xf;
  if (ival < 10)
    ival += '0';
  else
    ival += ('a' + ival - 10);
  return ival;
}

int
main()
{
  int i = 100;
  char s[9];

  s[0] = hex_digit (i, 28);
  s[1] = hex_digit (i, 24);
  s[2] = hex_digit (i, 20);
  s[3] = hex_digit (i, 16);
  s[4] = hex_digit (i, 12);
  s[5] = hex_digit (i, 8);
  s[6] = hex_digit (i, 4);
  s[7] = hex_digit (i, 0);
  s[8] = '\0';

  printf ("hex(%d)=%s\n", i, s);
  return 0;
} 
```

SAMPLE OUTPUT:

```
gcc -o tmp -g -Wall -pedantic tmp.c
./tmp
hex(100)=00000064 
```

# ruby-on-rails-3 - 无法在 Rails 中进行简单的搜索工作

> ID：11789459
> 
> 赞同：0
> 
> 时间：2012-08-03T04:52:08.983
> 
> 标签：ruby-on-rails-3, search, simple-form, railscasts

我是一名铁路新手。我正在尝试在我的推文中实现简单的搜索，但**它显示了那里的整个推文**，而不是我正在搜索的特定推文。使用 SQLITE 和 Rails 3.2.6

我查看了 RailsCasts#37 和其他一些教程，但我不知道我在哪里犯了错误。

我的推文模型

```
class Tweet < ActiveRecord::Base
  belongs_to :user
  attr_accessible :body
    def self.search(search)
        if search
            find(:all, :conditions => ['body LIKE ?', "%#{search}%"])
        else
            find(:all)
        end
    end

end 
```

控制器

```
 @tweets = Tweet.search(params[:search]) 
```

在我的索引页面中形成

```
<%= simple_form_for tweets_path, :method => 'get', :html => { :class => 'pull-right' } do |f| %>
    <%= f.input :search, :label => false, :input_html => { :class => 'span3'} %>
<% end %> 
```

推文迁移

```
class CreateTweets < ActiveRecord::Migration
  def change
    create_table :tweets do |t|
      t.text :body
      t.references :user

      t.timestamps
    end
    add_index :tweets, :user_id
  end
end 
```

我搜索内容时的 URL！

```
http://localhost:3000/tweets?utf8=%E2%9C%93&%2Ftweets%5Bsearch%5D=awesome 
```

寻求帮助和支持！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:02:48.713

我认为您的参数名称错误。看[这里](http://guides.rubyonrails.org/form_helpers.html)，“传递给 form_for 的名称控制参数中用于访问表单值的键”，因此在您的控制器中，您应该编写如下内容：

```
@tweets = Tweet.search(params[:tweets][:search]) 
```

# android - 如何在不使用surfaceview的情况下在android 2.2中应用拖放？

> ID：11789461
> 
> 赞同：1
> 
> 时间：2012-08-03T04:52:12.473
> 
> 标签：android, imageview

嗨，我是 android 新手，我使用 android 2.2 api level-8.so 我可以使用两个图像，一个用于拖动目的，另一个用于 Drop 目的。在这里我显示一些我可以在这里做的代码。代码是哪个显示设备高度宽度和球是我拖动的图像视图。

```
windowwidth = getWindowManager().getDefaultDisplay().getWidth();
        windowheight = getWindowManager().getDefaultDisplay().getHeight();
        Log.e("Screen Width-->", "" + windowwidth);
        Log.e("Screen Height-->", "" + windowheight);
        ball = (ImageView) findViewById(R.id.secondImage);
        tempAnimationDrawable = (AnimationDrawable) ball.getDrawable();
        ball.setOnTouchListener(this); 
```

在此应用 seton touch Listener。on touchListener 如下。

```
public boolean onTouch(View v, MotionEvent event) 
    {
        layoutParams = (RelativeLayout.LayoutParams) ball.getLayoutParams();

        switch (event.getAction()) 
        {       
        case MotionEvent.ACTION_DOWN:
            break;

        case MotionEvent.ACTION_MOVE:

            int imgWidth = ball.getWidth();
            Log.e("Image Width -->", "" + imgWidth);
            int imgHeight = ball.getHeight();
            Log.e("Image Height -->", "" + imgHeight);

            int x_cord = (int) event.getRawX();
            System.err.println("Display X code->" + x_cord);
            int y_cord = (int) event.getRawY();
            System.err.println("Display y code->" + y_cord);

            int getX=(int) event.getX();
            System.err.println("Display Here X Value -->"+getX);            
            int getY=(int) event.getY();
            System.err.println("Display Here Y Value -->"+getY);

            if (x_cord < windowwidth && getX < imgWidth ) 
            {               
                x_cord = windowwidth;
                Log.e("If Part X Cord-->", "" + x_cord);
            }
            if (y_cord > windowheight) 
            {
                y_cord = windowheight;
                Log.e("If Part Y Cord-->", "" + y_cord);
            }
            layoutParams.setMargins(imgWidth + incLeft, imgHeight + incTop, imgWidth + incRight, imgHeight + incBottom);
            // layoutParams.setMargins(left, top, right, bottom)
            ball.setLayoutParams(layoutParams);
            break;

        default:
            break;

        }
        return true;
    } 
```

现在我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:57:28.980

```
 import android.app.Activity;
   import android.graphics.Point;
   import android.os.Bundle;
   import android.view.Display;
   import android.view.MotionEvent;
   import android.view.View;
   import android.widget.ImageView;
   import android.widget.RelativeLayout;

 public class DragMainActivity extends Activity  {
     int windowwidth;
     int windowheight;      
     ImageView ima1,ima2;

     private android.widget.RelativeLayout.LayoutParams layoutParams ;
    // private android.widget.RelativeLayout.LayoutParams layoutParams ;
     //private android.widget.RelativeLayout.LayoutParams layoutParams ;         

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

        /* Display display = getWindowManager().getDefaultDisplay(); 
         int width = display.getWidth();
         int height = display.getHeight();*/

         windowwidth = getWindowManager().getDefaultDisplay().getWidth()-130; 
         windowheight = getWindowManager().getDefaultDisplay().getHeight()-165;

         System.out.println("width" +windowwidth);
         System.out.println("height" +windowheight);             

         ima1 = (ImageView)findViewById(R.id.imageview1);
         ima1.setOnTouchListener(new View.OnTouchListener() {  

             public boolean onTouch(View v, MotionEvent event) {
                 layoutParams = (RelativeLayout.LayoutParams) ima1.getLayoutParams();

                 switch(event.getAction())

                 {
                     case MotionEvent.ACTION_DOWN:                           
                         break;                   
                     /*case MotionEvent.ACTION_CANCEL:
                         break;*/
                     case MotionEvent.ACTION_MOVE:
                         int x_cord = (int) event.getRawX();
                         int y_cord = (int) event.getRawY();

                         System.out.println("value of x" +x_cord);
                         System.out.println("value of y" +y_cord);            

                         if (x_cord > windowwidth) {
                             x_cord = windowwidth;
                         }
                         if (y_cord > windowheight) {
                             y_cord = windowheight;
                         }
                         layoutParams.leftMargin = x_cord-25;
                         layoutParams.topMargin = y_cord-25;
                  //       layoutParams.rightMargin = x_cord-25;
                   //      layoutParams.bottomMargin = y_cord-25;
                         ima1.setLayoutParams(layoutParams);
                         break;
                     default: break;
                 }  
                 return true;
             }
         });

         ima2 = (ImageView)findViewById(R.id.imageview2);
         ima2.setOnTouchListener(new View.OnTouchListener() {         

             public boolean onTouch(View v, MotionEvent event) {
                 layoutParams = (RelativeLayout.LayoutParams) ima2.getLayoutParams();
                 switch(event.getActionMasked())
                 {
                     case MotionEvent.ACTION_DOWN:
                         break;
                     case MotionEvent.ACTION_MOVE:
                         int x_cord = (int) event.getRawX();
                         int y_cord = (int) event.getRawY();

                         System.out.println("value of x1" +x_cord);
                         System.out.println("value of y1" +y_cord);                          

                         if (x_cord > windowwidth) {
                             x_cord = windowwidth;
                         }
                         if (y_cord > windowheight) {
                             y_cord = windowheight;
                         }
                         layoutParams.leftMargin = x_cord - 25;
                         layoutParams.topMargin = y_cord - 75;
                         ima2.setLayoutParams(layoutParams);
                         break;
                     default: break;
                 }
                 return true;
             }
         });
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:58:36.323

嗨，我在不使用表面视图的情况下为您提供了 android 2.2 中的整个拖放代码。我在这里给出链接。去那里查看代码并实现它。我相信它会对你有所帮助。

链接是 [如何在 android 2.2 中实现拖放？](https://stackoverflow.com/questions/9306243/how-to-implement-drag-and-drop-in-android-2-2/11431727#11431727)

另一个是 [http://code.google.com/p/android-drag-and-drop-basic/source/browse/src/edu/sbcc/cs123/draganddropbasic/DragAndDropBasicActivity.java](http://code.google.com/p/android-drag-and-drop-basic/source/browse/src/edu/sbcc/cs123/draganddropbasic/DragAndDropBasicActivity.java)

# javascript - 在 node.js / socket.io 中，如何判断一个对象是否是套接字的实例？

> ID：11789462
> 
> 赞同：2
> 
> 时间：2012-08-03T04:52:13.110
> 
> 标签：javascript, node.js, socket.io

在我的应用程序`socket`中传递为`this`using`bind`和`call`

```
socket.on( 'handle', someFunc.bind(socket) );

function someFunc() {
  var socket = this;
  ...
  anotherFunc.call( socket, 'abc', ... );
} 
```

我希望确保这`this`确实是一个`socket`- 忘记 - 使用`func(...)`而不是`func.call(socket,...)`.

```
function someFunc() {
  var socket = this;
  assert.ok( /* ensure this is instanceof a socket */ );
  ...
} 
```

我如何做出断言？

`socket`里面有没有`io = require('socket.io')`我可以用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:37:17.043

要解决有问题的具体问题，最好检查是否`this`不为空：

```
function someFunc() {
  var socket = this;
  assert.ok(socket);
  ...
} 
```

断言`someFunc();`调用失败，只会传递`someFunc.bind(socket)();`和`someFunc.call(socket);`调用（只要`socket`不为空）。

正如 Bergi 所建议的那样，如果下一个 Node.js 版本具有不同的实现，那么依赖实现细节将使您的应用程序无法使用；它似乎不是公共 API 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:21:55.473

从我在[源代码](https://github.com/LearnBoost/socket.io/blob/master/lib/socket.io.js#L77)中读到的内容，它返回一个[`Manager`](https://github.com/LearnBoost/socket.io/blob/master/lib/manager.js)实例。此检查应该有效：

```
var io = require('socket.io');
var socket = io.listen(...);

socket instanceof io.Manager; // true 
```

# jquery - 对 DIV 标签中的 HTML 数据进行排序

> ID：11789466
> 
> 赞同：0
> 
> 时间：2012-08-03T04:52:40.513
> 
> 标签：jquery, html, sorting

对于我的 html ，我没有表格中的数据，但它们是用标签构造的

它类似于

```
<div id="1"> name=abc id=501  </div>
<div id="2"> name=sdc id=502  </div>
<div id="3"> name=xyz id=503  </div> 
```

我可以使用 jquery/javascript php 对此进行排序吗？?

注意数量是可变的，即动态决定的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:59:57.053

[**演示**](http://jsfiddle.net/Q4U6N/5/)

我将您的 html 更改为使用数据属性（在标记中存储数据的正确方法）；现在看起来像这样`<div id='2' data-name='sdc' data-id='502'>sdc</div>`。[`.data()`这也允许 jQuery 使用该方法](http://api.jquery.com/data/)轻松检索属性。

**这是按名称排序的。要改为按 id 排序，请更改`return a.name > b.name ? 1 : -1;`为`return a.id > b.id ? 1 : -1;`**

```
$(function() {
    var alphaSort = $("div").map(function() {
        return {
            htmlId: this.id,
            name: $(this).data('name'),
            id: $(this).data('id')
        };
    }).toArray().sort(function(a, b) {
        return a.name > b.name ? 1: -1;
    });

    $.each(alphaSort, function(i, val) {
        if( $('div[data-name]').last().is('#'+val.htmlId) ) {
            return true; //continue               
        }
        $('div[data-name]').last().after($('#'+val.htmlId));
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:11:26.993

我不知道你绝对想要，但我试试它'按 id 排序，然后按名称排序。

[http://jsfiddle.net/k9aPj/3/](http://jsfiddle.net/k9aPj/3/)

```
// html
<div id='container'>    
    <div id="3"> name=xyz id=503  </div>
    <div id="1"> name=abc id=501  </div>
    <div id="2"> name=sdc id=502  </div>
</div>

// js code
var parent = document.getElementById('container');
var childs = parent.childNodes;
childs = Array.prototype.slice.call(childs).filter(function(el){
        return el.nodeName == "DIV";
     });

childs.sort(function(a, b){    
    var aValues = a.innerText.split(' ');
    var aName = aValues[0].split("=")[1];
    var aId = aValues[1].split("=")[1];

    var bValues = b.innerText.split(' ');
    var bName = bValues[0].split("=")[1];
    var bId = bValues[1].split("=")[1];

    if( aName != bName ){
       if (aName > bName) return 1;
       if (aName < bName) return -1;
       return parseInt(aId) - parseInt(bId); // sort by id
    }    
});

container.innerHTML = childs.map(function(el){
    return el.outerHTML;
}).join('');

//result is 
name=abc id=501
name=sdc id=502
name=xyz id=503 
```

​</p>

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:12:43.970

我认为您可以使用这种方式做得更好，并且还可以根据需要对 ID 和名称进行排序。

**现场演示：**

[http://jsfiddle.net/oscarj24/VJ3ZR/](http://jsfiddle.net/oscarj24/VJ3ZR/)

**HTML：**

```
<div id="3"> name=xyz id=503  </div>
<div id="1"> name=abc id=501  </div>
<div id="2"> name=sdc id=502  </div> 
```

**JS：**

```
var arrName = new Array();
var arrId = new Array();

$(function(){

    $('div').map(function(){
        var data = $(this).text().match(/name=(.*) id=(.*)/);
        arrName.push($.trim(data[1]));
        arrId.push(parseInt($.trim(data[2])));      
    });

    arrName.sort();
    arrId.sort();

    alert('Sorted names: ' + arrName + '\nSorted ids: ' + arrId);
}); 
```

**输出：**

> 排序名称：abc,sdc,xyz / 排序 ID：501,502,503

# vba - 用于合并数据的 Excel 宏

> ID：11789478
> 
> 赞同：2
> 
> 时间：2012-08-03T04:53:36.790
> 
> 标签：vba, excel

我在一个文件夹中有很多excel文件。

我想要一个宏来遍历每个文件并复制名为*最终成本*的工作表，并在目标文件中制作一个带有源文件名称的工作表。

就像有三个文件 A、B、C，每个文件都有一张名为*“最终成本”的表格*

新文件将包含三个名为

*   一个，
*   乙，
*   C

编辑后的代码看起来像

```
Sub RunCodeOnAllXLSFiles()
    Dim lCount As Long
    Dim wbResults As Workbook
    Dim wbCodeBook As Workbook

    'Application.ScreenUpdating = False
    'Application.DisplayAlerts = False
    'Application.EnableEvents = False

    'On Error Resume Next

    'Set wbCodeBook = ThisWorkbook

    Dim FilePath    As String, fName As String
    Dim aWB As Workbook, sWB As Workbook

    Set aWB = ActiveWorkbook
    FilePath = "D:\binny\" 'change to suit
    fName = Dir(FilePath & "*.xls")

    Do While fName <> ""
        If fName <> aWB.Name Then
            Set sWB = Workbooks.Open(FileName:=FilePath & fName, UpdateLinks:=0)
            sWB.Worksheets("Final Cost").Range("A1:Z6666").Copy
            sWB.Close False
            Sheets.Add.Name = fName
            Worksheets(fName).Range("D1").Select
            ActiveSheet.PasteSpecial Format:= _
            "Microsoft Word 8.0 Document Object"
        End If
        fName = Dir
    Loop
    Set sWB = Nothing: Set aWB = Nothing

               'Application.ScreenUpdating = True
    'Application.DisplayAlerts = True
    'Application.EnableEvents = True
End Sub 
```

现在要做的事情是：

1.  保留格式和单元格宽度
2.  我无法让选择性粘贴工作
3.  如果存在，删除同名工作表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:48:01.637

你已经弄清楚了大部分。这是我推荐的。

在运行宏的文件中为 1 个主工作表设置一个名称，以便您可以删除除 1 个工作表之外的所有工作表。假设主工作表是“MainSheet”

例如

```
Sub Sample()
    Dim ws As Worksheet

    For Each ws In ThisWorkbook.Sheets
        If ws.Name <> "MainSheet" Then
            Application.DisplayAlerts = False
            ws.Delete
            Application.DisplayAlerts = True
        End If
    Next ws
End Sub 
```

现在您可以将此代码添加到代码的开头。我已经修改了你的代码。我在您的代码中所做的只是在创建工作表之后，只需删除 Z 之后的列。

看到这个（**未测试**）

```
Sub test()
    Dim FilePath As String, fName As String
    Dim aWB As Workbook, sWB As Workbook
    Dim ws As Worksheet
    Dim ColName As String

    Set aWB = ThisWorkbook

    '~~> Delete sheets
    For Each ws In aWB.Sheets
        If ws.Name <> "MainSheet" Then
            Application.DisplayAlerts = False
            ws.Delete
            Application.DisplayAlerts = True
        End If
    Next ws

    FilePath = "D:\binny\" '<~~ Change to suit

    fName = Dir(FilePath & "*.xls")

    Do While fName <> ""
        If fName <> aWB.Name Then
            Set sWB = Workbooks.Open(Filename:=FilePath & fName, UpdateLinks:=0)
            sWB.Sheets("Final Cost").Move after:=aWB.Sheets(aWB.Sheets.Count)
            sWB.Close False
            '~~> The sheet is copied, simply delete the columns after Z
            With aWB.Sheets(aWB.Sheets.Count)
                .Name = fName
                .Cells.Copy
                .Cells.PasteSpecial xlPasteValues
                '~~> Get the last column Name
                ColName = Split(.Cells(, .Columns.Count).Address, "$")(1)
                .Columns("AA:" & ColName).Delete
            End With
        End If
        fName = Dir
    Loop
    Set sWB = Nothing: Set aWB = Nothing
End Sub 
```

试一试，如果你有任何错误，让我知道哪一行，我会纠正它。

# ios - 处理试用版应用程序的最佳方法是什么？

> ID：11789485
> 
> 赞同：0
> 
> 时间：2012-08-03T04:54:11.050
> 
> 标签：ios, registration

我正在开发一个应用程序，用户无需注册即可使用该应用程序 14 天。之后，他必须注册（不是任何付款）才能继续使用该应用程序。

我现在使用的方法是将首次启动日期存储到用户默认值中，并将其与每次连续启动时的当前日期进行比较。如果用户将时钟调回以避免必须注册，则此方法将失败。

我的问题类似于以下问题，[即使用户调回时钟，如何限制日常使用？](https://stackoverflow.com/questions/8356670/how-to-limit-daily-usage-even-if-user-sets-his-clock-back)，但我不确定这会对我有帮助。

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T05:24:10.407

我相信这些跟踪应用程序不会被 Apple 接受阅读 Apple 指南

**2.9 “beta”、“demo”、“trial”或“test”版本的应用程序将被拒绝**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:14:41.880

我认为这会有所帮助。

定义 14 天的列表并将它们存储在用户默认值中。第一天是安装日期，其他是接下来的 13 天。这些是唯一允许使用您的应用程序的日子。如果用户将日期设置在您的第一天之前，它将超出允许的范围。这不会阻止将日期设置为范围内的任何日期。为避免这种情况，请存储每天的使用分钟数并检查每天合理的最大使用量。

为避免用户重新安装应用程序，请在钥匙串中存储一些数据以记录安装和免费使用总量。

# netbeans - 404 异常与宁静的 Web 服务球衣

> ID：11789487
> 
> 赞同：0
> 
> 时间：2012-08-03T04:54:22.800
> 
> 标签：netbeans, jersey, http-status-code-404, restful-architecture

我刚刚在我的mac（os x lion）上安装了netbeans，我正在尝试用球衣创建一个宁静的网络服务。

当我转到我的 localhost:8080/HelloWorld/test/printHello 时，我得到一个 404 异常...所以我想我会查看我的 web.xml ..但我找不到该文件。

任何我应该看的地方和我应该做什么的指针？我的java类发布在下面。

```
@Path("/test")
public class helloworld {

    @GET
    @Path("printHello")
    @Produces("text/plain")
    public String printHello() {
        return "Hello there!";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:21:01.247

根据 servlet 3.0 规范，web.xml 是可选的。

然而，在 Netbeans/Eclipse 中创建 Web 项目时，我们将获得一个选项来拥有一个部署描述符。如果没有选项，我们可以显式创建 web.xml。是的，我们需要一个 web.xml 来使用 Jersey 来提供宁静的 Web 服务，因为它的 API 公开了 ServletContainer，它负责基于 URL 的类映射。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T15:00:46.727

在 Netbeans 中，web.xml 位于

```
WAR-Project with Maven
    - Web Pages
        - WEB-INF
            - web.xml 
```

在文件夹结构中，它位于：

```
WAR-Project with Maven
    - src
        - main
            - webapp
                - WEB-INF
                    - web.xml 
```

在那里你可以定义 Jersey Servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<!-- Jersey -->
    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>package.path.to.your.rest.service;</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

现在您可以通过以下 URL 访问您的 REST 服务：

```
localhost:8080/HelloWorld/rest/test/printHello 
```

# c# - 使用 System.Random

> ID：11789489
> 
> 赞同：5
> 
> 时间：2012-08-03T04:54:29.053
> 
> 标签：c#, random, integer

我在 .NET Framework 3.5 中使用 C#，并尝试使用 Random() 生成随机整数。我的代码在这里：

```
using System.Random;

int randomNumber;
Random RNG = new Random();
randomNumber = RNG.Next(1,10); 
```

我认为一切都应该没问题，但我收到 System.Random 不是有效命名空间的错误，但我很确定它是......

有人知道我应该使用什么方法来生成一个范围内的随机整数有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T04:55:58.143

`Random`是`System`命名空间中的一个类。将第一行更改为just `using System;`，您应该一切顺利。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T04:57:24.550

Random 类是`System`命名空间的一部分，而不是`System.Random`. 您可以使用命名空间直接引用类型：

```
System.Random rnd = new System.Random(); 
```

或者..

```
using System;

Random rnd = new Random(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T05:46:27.977

您只需要使用系统命名空间

```
using System;

int randomNumber;
Random RNG = new Random();
randomNumber = RNG.Next(1,10); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T04:57:59.907

~~您不需要 using 语句。~~您的 using 语句无效。

Random 是 System 命名空间中的一个类。只需使用

```
using System; 
```

而不是使用 System.Random；

# java - 无法初始化类 com.sun.jna.Native

> ID：11789493
> 
> 赞同：2
> 
> 时间：2012-08-03T04:55:06.347
> 
> 标签：java, linux, jsp, file-permissions, jna

我试图使用 JNA 在 linux 服务器上更改以编程方式上传文件的文件权限。我的参考资料是[this](http://www.experts-exchange.com/Programming/Languages/Java/A_1498-File-permissions-with-Java.html)和[this](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)。我的代码如下。我得到了一个`Operation not permitted`例外。有没有办法解决这个问题？有没有其他方法可以通过编程方式更改上传文件的权限？或者有什么方法可以上传具有指定文件权限的文件。我正在使用java 1.5。我已经把 jna.jar 放进去`/public_html/WEB-INF/lib`，谁能推荐一个适合初学者的 JNA 教程？

## JSP 代码（用于测试）

```
<%@page import="cc.FileModifierLinux"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%

try
{

    FileModifierLinux flx=new FileModifierLinux();
    String pathX = getServletContext().getRealPath("/testpage.jsp");
    flx.Update(pathX);
    out.println("No Exception");
}
catch(Exception exp)
{
    out.println("exp :"+exp);
}
%>
</body>
</html> 
```

## 使用的类

```
package cc;
import com.sun.jna.Library;
import com.sun.jna.Native;

public class FileModifierLinux {
     CLibrary libc = (CLibrary) Native.loadLibrary("c", CLibrary.class);
    public void Update(String pth) {
        libc.chmod(pth, 0755);
    }
}

interface CLibrary extends Library {
    public int chmod(String path, int mode);
} 
```

## 例外

有关完整的异常详细信息，请参阅[此](http://export.idreamzsolutions.net/index_check.jsp)

```
 org.apache.jasper.JasperException: Exception in JSP: /index_check.jsp:23

20: {
21:     
22:     
23:     FileModifierLinux flx=new FileModifierLinux();
24:     String pathX = getServletContext().getRealPath("/testpage.jsp");
25:     flx.Update(pathX);
26:     out.println("No Exception");

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:395)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

root cause

javax.servlet.ServletException: Could not initialize class com.sun.jna.Native 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T02:57:55.537

我有一个类似的问题；对我来说，从 JNA 3.0.9 升级到 3.2.7 解决了这个问题。我还添加了我之前缺少的 platform.jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:58:41.987

您可能需要在服务器上安装 libjnidispatch.so 以便它在 java.library.path 中可用，以便 JNA 可以加载它。抛出的异常是由于 JNA 没有找到该库并试图从其自己的 jar 文件中解压缩它。

根据最初的例外情况，您的 servlet 将不允许加载本机库，除非从指定的受保护位置加载。检查您的 servlet 容器文档以了解如何安装并使其可用于加载 JNI 库。

# jquery - 获取可能是下一个元素的子元素的元素

> ID：11789497
> 
> 赞同：0
> 
> 时间：2012-08-03T04:55:57.767
> 
> 标签：jquery, selector

假设我想从中选择最近的目标元素`startFromThis`（仅 . 之后的元素`startFromThis`。目标可能是任何未命名或未分类元素的子元素。无论如何要选择这个。

抱歉，我想将 startFromThis 编辑为 ID

```
<div id="startFromThis"><div>
<div>
  <span class="target"></span>
<div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:58:00.827

`$('#startFromThis').closest('target element')`假设`startFromThis`是一个ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:00:34.543

您可以为此使用该[`.closest()`](http://api.jquery.com/closest/)功能：

```
$(document).ready(function(){
    $('.startFromThis').closest('.target').html('Selected!');
}); 
```

在此处查看文档：http: [//api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:57:10.193

```
$(".startFromThis").closest().children(".target"); 
```

# java - 正则表达式匹配 JAVA 中的两个斜线

> ID：11789504
> 
> 赞同：22
> 
> 时间：2012-08-03T04:57:02.757
> 
> 标签：java, regex

我想匹配特定字符串中的正斜杠`/`或反斜杠`\`，例如：
1\. `Hi/Hello/Bye/`
2\. `Hi\Hello\Bye\`
3\. `Hi\Hello/Bye\`
4.`HiHelloBye`
在给定的字符串中，只有最后一条记录不应该匹配，因为它不包含`/`or `\`。

**我正在使用什么**

```
if (strFile.matches(".*//.*"))
{
    //String Matches.
}
else
{
    //Does not match.
} 
```

这仅匹配正斜杠`/`。我不知道如何为两个斜杠（用于`OR`条件）编写正则表达式。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-03T04:59:54.480

您要匹配的“角色”将是：

```
"[/\\\\]" 
```

首先为字符串复制反斜杠，然后再为正则表达式复制反斜杠。

当您需要在也使用反斜杠转义字符串的语言中使用反斜杠时，这可能是最讨厌的正则表达式。

Java 编译器看到`"\\\\"`源代码中的字符串并将其实际转换为`"\\"`（因为它`\`用作转义字符）。

然后正则表达式看到这一点，`"\\"`并且因为它也`\`用作转义字符，所以会将其视为单个`\`字符。

> *正如柳岩在评论中指出的那样，您可以使用以下方法之一*摆脱一级反斜杠（正则表达式）：

```
".*[/\\x5c].*"
".*[/\\u005c].*" 
```

> 这可能会使它更具可读性。

完成所有缩减后，您已指定由两个斜杠组成的字符类，如果所讨论的字符与其中任何一个匹配，则返回 true。

以下代码显示了这一点：

```
public class testprog {
    public static void checkString (String s) {
        boolean yes = s.matches(".*[/\\\\].*");
        System.out.println ("'" + s + "': " + yes);
    }

    public static void main (String s[]) {
        checkString ("Hi/Hello/Bye/");
        checkString ("Hi\\Hello\\Bye\\");
        checkString ("Hi\\Hello/Bye\\");
        checkString ("HiHelloBye");
    }
} 
```

它输出：

```
    '嗨/你好/再见/'：真
    '嗨\你好\再见\'：真
    '嗨\你好/再见\'：真
    “你好再见”：假

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T05:01:26.843

你要：

```
strFile.matches(".*[/\\\\].*") 
```

具体来说，替换`//`为`[/\\\\]`.

你只需要一个正斜杠，但你需要 4 个反斜杠，因为一个是字符串中的转义符，而 2 是正则表达式的转义符，所以你需要 4 个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:03:40.367

Use alternation: `strFile.matches(".*(/|\\\\).*")` matches either a forward or backward slash. You might want to take a look at the [Java regex documentation](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html "Regex patterns in Java").

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T05:09:41.370

用这个...

`[ ]`将为您提供**OR**功能。

```
Pattern pat = Pattern.compile("[/\\\\]");
Matcher m = pat.matcher("Hi/Hello/Bye/");

while (m.find()){

    System.out.println(m.group());
} 
```

# jquery - 为 jSquares 插件创建一个关闭按钮

> ID：11789506
> 
> 赞同：0
> 
> 时间：2012-08-03T04:57:11.430
> 
> 标签：jquery, jquery-plugins, custom-controls

我在这里使用这个插件：

[http://boedesign.com/blog/2009/10/22/jsquares-for-jquery/](http://boedesign.com/blog/2009/10/22/jsquares-for-jquery/)

GitHub 链接 [https://github.com/jboesch/jSquares/blob/master/js/jquery.jsquares.js](https://github.com/jboesch/jSquares/blob/master/js/jquery.jsquares.js)

...脚本运行良好，但我真正需要的是创建一个关闭按钮，该按钮仅在将鼠标悬停在标题上时才会显示在标题内。

显然，我不需要桌面站点的关闭按钮，因为它使用悬停，但我需要它才能在 iPad 上更好地工作。我们的解决方案基本上只是在其中有一个关闭按钮，供人们单击以手动关闭它。

任何帮助将不胜感激！

编辑 - 我在那里看到这个，那么有没有一种简单的方法可以将它附加到标题内的按钮上？

```
.bind('mouseleave', function(){
    _fadeInOutImage('out', options.fade_start)
    $('#js-overlay-id-' + index).remove();
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:36:37.770

我找到了一个不错的方法。

添加了此代码

```
$('.js-overlay-html .remove').bind('click', function(){
    _fadeInOutImage('out', options.fade_start)
    $('#js-overlay-id-' + index).remove();
    return false;
    }
); 
```

紧随其后：

```
$('<div id="js-overlay-id-' + index + '">' + contents + '</div>')
    .css(caption_options)
    .addClass(options._overlay_selector_class)
    .appendTo('body')
    .bind('mouseleave',
    function(){
         _fadeInOutImage('out', options.fade_start)
    $('#js-overlay-id-' + index).remove();
    }
); 
```

这似乎可以解决问题。

# ssh - 无法使用密钥对登录 Amazon EC2 实例

> ID：11789510
> 
> 赞同：2
> 
> 时间：2012-08-03T04:57:25.240
> 
> 标签：ssh, amazon-ec2, pki

我可以通过给定的文件连接到我的**Amazon EC2**实例。`pem`

我做这样的事情

```
ssh -i <mykeyname>.pem ubuntu@<myexternalip> 
```

它工作正常。

[但是现在我需要一个无密码登录到我的实例，所以我创建了一个如图所示的](http://queirozf.com/reminders/creating-a-private-public-key-pair-on-ubuntu)密钥对 并将我的`.pub`文件发送到我的远程实例并将其放在`.ssh`具有名称的目录下，`authorized_keys`但我仍然无法连接！

我不断收到一条错误消息：

```
Permission denied (publickey). 
```

谁能告诉我我做错了什么？**EC2 实例**是否默认禁止所有其他形式的登录（除了 .pem 文件）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:57:12.927

事实证明，这根本不是**SSH**问题。问题是，当我打电话时`sudo`，我忘记了用户更改为**root ......显然我没有为****root**用户设置密钥，所以它一直在我身上失败......

我通过使用解决了它`sudo -u actual_user`。

感谢git@freenode 上的**cmn**帮助我看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:48:37.853

如果您还没有，我建议您检查 ssh 输出 (ssh -v)。有时调试消息可以帮助查明问题。也就是说，这感觉像是文件权限问题。确保 .pub 文件可以被非 root 用户读取。

# c - c静态库linux

> ID：11789520
> 
> 赞同：0
> 
> 时间：2012-08-03T04:58:34.893
> 
> 标签：c, linux, static-libraries

我想制作一个静态库，并且能够按照 yolinux 教程 [http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html正确制作一个](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

当我想包含一个静态库来创建一个新的静态库时，就会出现问题。场景是：

```
gcc -Wall -c cdbSearch.c
ar -cvq cdbSrc.a cdbSearch.o cdb.a 
```

这成功创建了一个名为 cdbSrc.a 的静态库

但是当我尝试将其与我的测试程序链接时

```
gcc -o cdbtest cdbtest.c cdbSrc.a
cdbSrc.a(cdbSearch.o): In function `cdb_search':
cdbSearch.c:(.text+0xa2): undefined reference to `cdb_seek'
collect2: ld returned 1 exit status 
```

它给了我一个错误，说 cdb_seek 不能被引用，这实际上是 cdb.a 的一部分

如果我用 cdb.a 编译测试程序，它可以正常工作，但它不能达到目的..

```
gcc -o cdbtest cdbtest.c cdbSrc.a cdb.a 
```

并且二进制文件已成功创建 cdbtest。

这是预期的行为，是的，为什么？如果不是我做错了什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:10:52.530

是的。这是预期的行为。您需要链接所有静态库以形成二进制文件。与共享库不同的静态库不会保存到其他库的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:11:41.830

静态库只是目标文件的存档。您必须使用解压缩 cdb.a`ar x`

之后，将所有解压缩的对象加上 cdbSearch.o 打包到 cdbSrc.a

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:42:15.337

您想创建一个新的静态库，其中应包含正确`cdbSearch.o`的所有目标文件`cdb.a`。

我假设喜欢`cdb.a`有两个目标文件，它们是`first.o`和`second.o`.

`ar`允许将目标文件添加到现有的静态库中。您可以为此执行以下命令。

`ar r cdb.a cdbSearch.o`

如果存在名为的库`cdb.a`，则上述命令会将新的目标文件添加`cdbSearch.o`到其中。否则它将创建一个新的静态库`cdb.a`，其中只包含一个目标文件（`cdbSearch.o`）。

现在`cdb.a`将包含 3 个对象文件（`first.o`和`second.o`）`cdbSearch.o`。现在您可以根据需要重命名静态库文件名，`mv cdb.a cdbSrc.a`.

我们也可以使用`d`选项从静态库中删除任何现有的目标文件。例如，如果要从中删除目标文件`second.o`，`cdbSrc.a`可以执行以下命令。

`ar d cdbSrc.a second.o`

使用该`t`选项列出静态库的目标文件。

`ar t cdbSrc.a`

# jquery - 事件未附加到移动设备上动态创建的元素

> ID：11789525
> 
> 赞同：0
> 
> 时间：2012-08-03T04:59:14.157
> 
> 标签：jquery, cordova

`list[i].fnctn`- 包含我要附加到单击事件处理程序的函数的名称。我在同一个`js`文件中全局定义了这些函数

```
function createList(list){
    var parentID = $("#content_nav ul");
    var len = list.length;
    for(var i=0;i<len;i++){
        var anchorElement = jQuery('<a />',{text:list[i].text});
        var liElement = jQuery('<li />',{"class":"navlink_"+(i+1),id:"navlink_"+(i+1)});
        //anchorElement.attr('onclick',list[i].fnctn+"()"); - Works fine on desktop browsers but doesn't work on mobile devices. (Mobile devices are my target platform

        anchorElement.on('click',{funct:list[i].fnctn},function(event) {
            return window[event.data.funct](event);
        });
        liElement.append(anchorElement);
        parentID.append(liElement);
    }
} 
```

此代码在桌面浏览器上运行良好。但是当我使用电话间隙将它部署到移动设备时它不起作用。

问题是什么？

我试用的设备是 - 三星 Google Nexus S (ICS 4.0.0) iPhone 4 和 iPhone 4s (Simulator)，Android 模拟器。

PS：让我知道是否有其他更好的方法可以做到这一点。我现在正在做的是，我从 JSON 中获取要分配给事件处理程序的函数名称（作为字符串），然后使用上面的代码应用它。我不知道这是否是最佳做法。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:02:17.093

只需更改代码顺序：

```
function createList(list){
    var parentID = $("#content_nav ul");
    var len = list.length;
    for(var i=0;i<len;i++){
        var anchorElement = jQuery('<a />',{text:list[i].text});
        var liElement = jQuery('<li />',{"class":"navlink_"+(i+1),id:"navlink_"+(i+1)});
        //anchorElement.attr('onclick',list[i].fnctn+"()"); - Works fine on desktop browsers but doesn't work on mobile devices. (Mobile devices are my target platform

        // append the target first

        liElement.append(anchorElement);
        parentID.append(liElement);

        // after append then bind the
        // click event

        anchorElement.on('click',{funct:list[i].fnctn},function(event) {
            return window[event.data.funct](event);
        });

    }
} 
```

# iphone - UIImage 到 BitmapContext

> ID：11789528
> 
> 赞同：2
> 
> 时间：2012-08-03T04:59:38.693
> 
> 标签：iphone, ios, xcode, ipad, ipod

我想将一个简单的 UIImage 转换为 BitmapContext，但我找不到任何将 UIImage 转换为 BitmapContext 的教程。请告诉我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:07:34.150

可能是这段代码帮助你

```
CGSize newSize = CGSizeMake(320, 400);
UIGraphicsBeginImageContext( newSize );

[imageView.image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

NSData * data = UIImagePNGRepresentation(newImage);
[data writeToFile:@"foo.png" atomically:YES];

 UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil);///save image in phone

OR For Bitmap.

CGContextRelease(context);
context = CGBitmapContextCreate (NULL,                                                     
                                image.size.width,
                                image.size.height,
                                8,    // bits per component
                                bitmapBytesPerRow,
                                colorSpace,
                                kCGImageAlphaLast
                                );
CGColorSpaceRelease( colorSpace );                                                                      

CGContextDrawImage(context, CGRectMake(0, 0, image.size.width, image.size.height), image.CGImage);
pixelData = CGBitmapContextGetData(context); 
```

# spring-mvc - ExtJS 4网格在添加新记录后更新网格

> ID：11789548
> 
> 赞同：0
> 
> 时间：2012-08-03T05:01:24.703
> 
> 标签：spring-mvc, extjs, grid

我正在研究 Ext Grid。我使用代理进行 CRUD 操作。但我的问题是，一旦我在网格中添加新行，我就无法用新记录更新网格。有人可以帮我解决这个问题或给我提示吗？我正在使用 Spring MVC，Mybatis。

谢谢。杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:49:36.573

你在使用编辑器网格吗？还是网格面板？

如果您使用的是 GridPanel，请尝试使用

```
var grid = Ext.getCmp('yourgridID');
grid.getStore().reload(params); 
```

# haskell - 在类和实例声明中键入关键字

> ID：11789552
> 
> 赞同：6
> 
> 时间：2012-08-03T05:01:51.083
> 
> 标签：haskell

我正在查看源代码[`Data.Has`](http://hackage.haskell.org/packages/archive/has/0.5.0.1/doc/html/Data-Has.html)并试图弄清楚它是如何工作的。我相信下面的代码旨在允许某人“加入”两个值，比如`a :: A`and`b :: B`成一个新值，它同时具有`a`and的功能`b`。

我特别不明白`type`类和实例声明中的含义。

我也不知道`~`下面的符号是什么意思。

[有人可以解释Data.Has.TypeList](http://hackage.haskell.org/packages/archive/has/0.5.0.1/doc/html/src/Data-Has-TypeList.html)中的以下代码有效吗？

```
-- | Provides type-list functionality

module Data.Has.TypeList where

import Control.Applicative
import Data.Monoid (Monoid (..))
import Test.QuickCheck (Arbitrary (..), CoArbitrary (..))
import Data.Typeable
import Data.Data
-- | Cons a type onto type-list.
data a ::: b = a ::: b deriving (Show,Eq,Ord,Read,Bounded,Typeable,Data)

-- | The empty type-list.
data TyNil = TyNil deriving (Read,Typeable,Data)

-- | Appends a type-list and another.
class Append a b where
    type a :++: b
    (.++.) :: a -> b -> a :++: b
infixr 5 :++:

-- Implementation of Append

instance Append TyNil b where
    type TyNil :++: b = b
    _ .++. b = b

instance (Append y b) => Append (x ::: y) b where
    type (x ::: y) :++: b = x ::: (y :++: b)
    ~(x ::: y) .++. b = x ::: (y .++. b) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T07:49:10.373

`type`类型类和实例声明中的语法是[`TypeFamilies`](http://www.haskell.org/haskellwiki/Type_families)扩展的一部分。类型族可以被认为是从类型到类型的函数。Haskell wiki 中有关于类型和数据族的非常详细的解释（参见链接）。

应用于类型类，类型族成为*关联类型*。在这方面，它们非常接近[`FunctionalDependencies`](http://www.haskell.org/haskellwiki/Functional_dependencies)，也就是说，它们允许明确的实例解析。[GHC 手册](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/type-class-extensions.html#id3176364)中充分说明了这一需求。

您示例中的类型定义非常简单。`:::`是 2-tuple（一对值）的另一个名称，与`TyNil`unit type 同构`()`。

我将尝试阅读类和实例声明，以便清楚它们的含义。

```
class Append a b where
    type a :++: b
    (.++.) :: a -> b -> a :++: b
infixr 5 :++: 
```

> 声明`Append a b`具有关联类型`a :++: b`和一个方法函数的多参数类型类，该函数`(.++.)`接受类型的值并产生类型`a`的`b`值`a :++: b`。我们还设置`(.++.)`了与优先级 5 的右关联。

```
instance Append TyNil b where
    type TyNil :++: b = b
    _ .++. b = b 
```

> `Append a b`使用固定的第一个参数 ( `TyNil`) 和任意第二个参数 ( )声明一个实例`b`，其中关联类型`a :++: b`（在本例中是`TyNil :++: b`）被声明为等于`b`。（我不会描述用什么方法做的，这很清楚）。

```
instance (Append y b) => Append (x ::: y) b where
    type (x ::: y) :++: b = x ::: (y :++: b)
    ~(x ::: y) .++. b = x ::: (y .++. b) 
```

> 假设已经有一个声明的实例，则以任意和任意第二个参数`Append a b`的形式声明一个带有第一个参数的实例。关联类型（这里显然是 ）被声明为等于。方法定义在这里也很清楚：它接受一对值和另一个值并构造另一对，其中第一个元素与第一个参数中的相同，第二个元素是第一个参数与第二个参数与方法相结合的第二个元素。由于限制，我们被允许使用`x ::: y``x``y``b``Append y b``a :++: b``(x ::: y) :++: b``x ::: (y :++: b)``.++.``.++.``Append y b`

这些是`(.++.)`类声明和实例声明中方法的类型签名：

```
(.++.) ::               a       -> b -> a :++: b
(.++.) ::               TyNil   -> b -> b
(.++.) :: Append y b => x ::: y -> b -> x ::: (y :++: b) 
```

请注意，在每个实例中，非常抽象`a :++: b`的转换为更具体的类型。它`b`在第一种情况下很简单，更复杂`x ::: (y :++: b)`，它本身是用`:++:`.

需要这种关联类型的声明来告诉类型系统有一些类型（`a :++: b`在这种情况下）是由*唯一确定*`a`的`b`。也就是说，如果类型检查器知道在某些表达式中`a`和`b`类型等于，比如说，`Int`和`Double`，并且：

1.  有一个约束`Append a b`；
2.  有一个类型类实例`Append Int Double`，其关联类型声明为`type Int :++: Double = String`，

那么类型检查器就会知道，如果他遇到 type`a :++: b`它就会知道这个类型实际上是`String`.

至于`~`，它被称为“惰性模式匹配”。[这里](http://en.wikibooks.org/wiki/Haskell/Laziness#Lazy_pattern_matching)解释得很清楚。

随意询问是否仍有不清楚的地方。

# sql - SQL 代码中最好的 VIEWs 缩写是什么？

> ID：11789553
> 
> 赞同：1
> 
> 时间：2012-08-03T05:02:10.553
> 
> 标签：sql, view, abbreviation

我们在编写 SQL 代码时使用了一些缩写，例如：

> db -> 数据库
> tbl -> 表
> sp -> 存储过程

`VIEW`SQL中最好的缩写是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:09:13.530

你可以只使用

```
vw                //View
udf              //UserDefineFunction 
```

问候

# javascript - 如何在 IE 中刷新页面

> ID：11789555
> 
> 赞同：4
> 
> 时间：2012-08-03T05:02:16.040
> 
> 标签：javascript, internet-explorer, dom-events, page-refresh

如何在 IE 中使用 Javascript 刷新页面？以下代码在 Mozilla 中有效，但在 Internet Explorer 中无效

```
window.location.reload());
history.go(0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T05:09:13.993

In javascript you can use:

```
location.reload(); => post request, same as click the refresh button on the browser
window.location=window.location; => get request
self.location=self.location; => get request 
```

If you get an IE error saying

***'To display the webpage again, Internet Explorer needs to resend the information you've previously submitted'***,

you can use window.location=window.location; to refresh the page instead of location.reload();

***Implementation:***

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="PostMethod_Test._Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<asp:Literal ID="litJavascript" runat="server"></asp:Literal>
<div>
Refresh:
<div>
Get/Post Method:<a href="javascript:location.reload();">JS Location Reload</a> (if
there is any control in the form then after the form was submitted for the first
time, if you click this, it will be a post method coming with the IE alert)
</div>
<div>
Get Method:<a href="javascript:window.location=window.location;">JS Window Location</a>
(does not create a history entry) (if there is any control in the form then after
the form was submitted for the first time, if you click this, it will still be a
get method which means the form will not be submitted again)
</div>
<div>
Get Method:<a href="javascript:self.location=self.location;">JS Self Location</a>
(Same as above)
</div>
<div>
Get/Post Method: IE Refresh button - same as location.reload()
</div>
</div>
<hr />
<div>
Open New Window:
<div>
No Method:<a href="javascript:var a = window.open('webform1.aspx');">JS Window Open</a>
(just open)
</div>
<div>
Post Method for parent page:<asp:Button ID="btnOpen" Text="Open Window" runat="server"     />
</div>
</div>
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T05:03:51.287

Window.location.href is the url of the window page. What you do, is just rewrite the very same value in it, so the browser send another GET request to the very same ur

```
window.location.href = window.location.href; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:05:29.367

```
window.location = window.location 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T05:06:34.640

Use **`window.location.reload(true);`**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T05:07:18.680

use this:

```
location.reload(); 
```

it should work. If it's not working you might have an error somewhere else in your page.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T05:05:24.360

This should do it..

```
window.location.reload(); 
```

# java - How do I read xml file with a servlet?

> ID：11789563
> 
> 赞同：-4
> 
> 时间：2012-08-03T05:03:31.440
> 
> 标签：java, xml, servlets, xml-parsing

I am new to servlet programming. I need to read a xml file from a client using one. How can I do this?

Can anyone refer me to some example code? I'm able to parse xml using jaxb, but how can I get the xml itself from the client?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:11:04.597

[**在这里**](http://www.roseindia.net/answers/viewqa/JSP-Servlet/20574-read-XML-file-and-display-it-using-java-servlets.html)你可以找到一个示例代码，另见下文。

```
import java.io.*;
import org.w3c.dom.*;
import javax.servlet.*;
import javax.xml.parsers.*;
import javax.servlet.http.*;

public class ReadXML extends HttpServlet{ 

    public boolean isTextNode(Node n){
        return n.getNodeName().equals("#text");
    }

    public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException,IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        try{
            DocumentBuilderFactory docFactory =  DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            Document doc = docBuilder.parse("C:/roseindia.xml");
            out.println("<table border=2><tr><th>Name</th><th>Address</th></tr>");
            Element  element = doc.getDocumentElement(); 
            NodeList personNodes = element.getChildNodes(); 

            for (int i=0; i<personNodes.getLength(); i++){

                 Node emp = personNodes.item(i);
                 if (isTextNode(emp))
                 continue;

                 NodeList NameDOBCity = emp.getChildNodes(); 
                 out.println("<tr>");

                 for (int j=0; j<NameDOBCity.getLength(); j++ ){

                     Node node = NameDOBCity.item(j);
                     if ( isTextNode(node)) 
                     continue;
                    out.println("<td>"+(node.getFirstChild().getNodeValue())+"</td>");

                 } 

                 out.println("</tr>");
             }

             out.println("</table>");

        }

        catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T05:24:12.910

学习使用像谷歌这样的搜索引擎，他们有很多关于大多数基本和不那么基本的东西的方便教程

示例：

[http://www.tutorialspoint.com/servlets/servlets-file-uploading.htm](http://www.tutorialspoint.com/servlets/servlets-file-uploading.htm)

# iphone - iphone sdk 无法播放音频文件

> ID：11789569
> 
> 赞同：3
> 
> 时间：2012-08-03T05:04:36.687
> 
> 标签：iphone, objective-c, core-audio

我正在尝试在我的 iphone 应用程序中播放音频文件。我已经使用了这个代码

```
#import <AVFoundation/AVFoundation.h>

 NSBundle *bundle = [NSBundle mainBundle];
    NSString *musicPath = [bundle pathForResource:@"audioSample" ofType:@"mp3"];
    NSURL *musicURL = [NSURL fileURLWithPath:musicPath];
    NSError *error= [NSError errorWithDomain:@"Domain" code:0 userInfo:nil];

    AVAudioPlayer *aplayer= [[AVAudioPlayer alloc] initWithContentsOfURL:musicURL error:&error];
    aplayer.delegate = self;
    [aplayer play]; 
```

但是运行这个应用程序我会收到这个错误。任何人都可以帮我解决这个问题。我不明白为什么会发生这个错误。

```
System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-03 10:12:07.330 SampleAudioCode[591:12003] Error loading /Library/Audio/Plug-Ins/HAL/Digidesign CoreAudio.plugin/Contents/MacOS/Digidesign CoreAudio:  dlopen(/Library/Audio/Plug-Ins/HAL/Digidesign CoreAudio.plugin/Contents/MacOS/Digidesign CoreAudio, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-03 10:12:07.330 SampleAudioCode[591:12003] Cannot find function pointer NewDigiCoreAudioPlugIn for factory B8A063B5-2F3D-444A-88CB-D0B8F1B22042 in CFBundle/CFPlugIn 0xdc50f50 </Library/Audio/Plug-Ins/HAL/Digidesign CoreAudio.plugin> (bundle, not loaded) 
```

谢谢您的回答..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:40:32.940

仅在使用 iOS 模拟器时，这似乎是 AVAudio 框架的问题。在实际硬件（在我的情况下是 iPad 2 和 iPad 1）上进行测试不会产生同样的错误

这个错误只是来自系统框架的控制台噪音，你应该忽略它，它不会影响你。如果您的应用程序崩溃或无法播放，真正的原因在其他地方。

```
and please also add CoreFoundation framwork. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:16:43.667

首先你必须添加 AVFoundation 框架

为此，请按照此步骤

*   在项目的 Groups & Files 面板中展开 Targets 分支
*   按住 Control 键单击或右键单击 AudioPlayer 项目
*   选择添加 > 现有框架...</li>
*   单击链接库下方左下方的 + 按钮
*   选择 AVFoundation.framework 并单击添加
*   AVFoundation.framework 现在将列在链接库下。关闭窗口

现在在 .h 文件中包含这个框架并创建 avaudio 播放器的实例

```
#import <AVFoundation/AVFoundation.h> 
```

并在界面部分

```
AVAudioPlayer *audioPlayer; 
```

现在在你的 .M 文件中，在你想播放 .mp3 文件的地方使用这个代码。

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]];

NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;

if (audioPlayer == nil)
    NSLog([error description]);             
else 
    [audioPlayer play]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:41:13.997

我认为这对 AudioPlayer 很有用...

```
-(void)play
{
    [audioPlayer stop];

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@",[soundArry objectAtIndex:pageNo.currentPage]] ofType:@"mp3"]]; 

    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    [audioPlayer play];

} 
```

soundArry 是我的 SoundArray。pageNo 是我的 PageControl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T05:47:06.617

我认为这对音频播放很有用：

```
NSString *filePath=[[NSBundle mainBundle] pathForResource:@"audiofile" ofType:@"mp3"]; 

NSURL *url = [NSURL fileURLWithPath:filePath];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;
if (audioPlayer == nil)
      NSLog([error description]);               
else 
     [audioPlayer play]; 
```

# coronasdk - 如何在 Corona sdk 中将 ImageRect 图像用于影片剪辑？

> ID：11789579
> 
> 赞同：1
> 
> 时间：2012-08-03T05:05:53.460
> 
> 标签：coronasdk

在我的游戏中，我必须使用影片剪辑。它在 iphone 中运行完美。当我使用 4x 图像时。它无法正常工作。如何将 imagerect 图像用于movieclip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:27:02.283

我使用了最新的movieclip.lua 文件。我的问题解决了。

# objective-c - Facebook iOS SDK：检索用户的电话号码和国家

> ID：11789591
> 
> 赞同：4
> 
> 时间：2012-08-03T05:07:35.327
> 
> 标签：objective-c, ios, xcode, facebook, sdk

我知道如何正确使用 Facebook iOS SDK。我之前已经实现了发布和共享功能，所以我对此并不害羞。但是，我想知道的是如何检索用户（在我的应用程序中与 FB 连接）的电话号码和国家（如果不是国家，则为城市）。

我已经阅读了有关如何检索电子邮件和姓名的不同问题和文章，但只是想知道是否可以检索电话号码和国家/地区。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T11:46:38.897

我看不到获取电话的方法#，但您可以通过`location`FBGraphUser 上的属性获取位置。这将为您提供一个符合`FBGraphPlace`. Conformer 上的`location`属性`FBGraphPlace`是一个符合`FBGraphLocation`协议的对象，它具有如下属性：

*   `city`
*   `country`
*   `latitude`
*   `longitude`
*   `state`
*   `street`
*   `zip`

希望这可以帮助！

# php - How can I use PHP Simple HTML DOM to get the contents of a tags attribute?

> ID：11789592
> 
> 赞同：1
> 
> 时间：2012-08-03T05:07:35.373
> 
> 标签：php, simpledom

I want to get the contents of the `src` attribute of an `<img>` tag. Here is the code I'm using:

```
require_once( 'simple_html_dom.php');

$curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, $webpage);  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);  
$str = curl_exec($curl);  
curl_close($curl);  

if( $str )
{
    $html= str_get_html($str);
    $img = $html->find('img', 0); // get the first image on the page
    $src = $img->src; // get the contents of the img src - but it doesn't seem to work
} 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:09:52.127

尝试这个：-

```
<?php
include("simple_html_dom.php");

$webpage ="http://www.santabanta.com";

$html = file_get_html($webpage);

foreach($html->find('img') as $element) {
    echo $element->src . '<br>'; 
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:31:50.010

您可以使用 PHP 提供的 DOM 解析器来获取第一张图片的 src，如下所示：

```
$curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, $webpage);  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);  
$html = curl_exec($curl);
curl_close($curl);  

if( !empty($html) ) {
   $doc = new DOMDocument;
   libxml_use_internal_errors(true);
   $doc->loadHTML($html);
   #echo $doc->saveHTML();
   $xpath = new DOMXPath($doc);
   $src = $xpath->evaluate("string(//img/@src)");
   echo "src=" . $src . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:09:30.607

### 你错过了第一`'`行中的第一个！！！

代替：

```
require_once( simple_html_dom.php'); 
```

和：

```
require_once( 'simple_html_dom.php'); 
```

# iphone - 如何以编程方式关闭 iphone sdk 中的自动校正？

> ID：11789594
> 
> 赞同：12
> 
> 时间：2012-08-03T05:08:06.583
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

> **可能重复：**
> [iPhone 编程：停用 UITextView 中的拼写检查](https://stackoverflow.com/questions/3318827/iphone-programming-deactivate-spell-check-in-uitextview)

我正在创建一个拼写测验应用程序。

当我在文本框中输入文本时，因为自动更正已打开，它会显示正确答案。

我想执行以下任一操作：（a）以编程方式关闭自动更正或（b）让用户选择在应用程序中手动关闭自动更正。

请让我知道上述任何一个的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T05:13:40.993

您可以使用以下属性：

```
myTextField.autocorrectionType = UITextAutocorrectionTypeNo; //in ios 8 use UITextAutocorrectionTypeNo. 
```

[如这里](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)`UITextInputTraits`的协议中所定义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:14:11.867

您可以通过以下方式关闭自动校正

```
textField.autocorrectionType = UITextAutocorrectionTypeNo; 
```

并且可以通过

```
textField.autocorrectionType = UITextAutocorrectionTypeYes; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:15:23.823

```
textField.autocorrectionType = UITextAutocorrectionTypeNo; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T05:17:18.983

对于 UITextField，您可以通过 Interface Builder/Storyboard（靠近大写字母和键盘类型）将“更正”设置为 YES 或 NO，以编程方式设置它，您可以使用：

```
UITextField *yourTextField;
yourTextField.autocorrectionType = UITextAutocorrectionTypeNo; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T05:13:53.513

`UITextView`并且`UITextField`都实现了 UITextInputTraits 协议。因此，它们都有一个属性`autocorrectionType`，它本身就是 type `UITextAutocorrectionType`。此属性的默认值为 on。您可以将其设置`UITextAutocorrectiontypeNo`在您的代码中（可能在您创建视图时），这将禁用任何自动更正。

# sql - sql中的转换失败错误

> ID：11789598
> 
> 赞同：1
> 
> 时间：2012-08-03T05:09:06.007
> 
> 标签：sql, sql-server, sql-server-2005

我的代码有问题，我想通了：

```
SELECT
   pono,
   convert(varchar,podate,103) as podate,
   Convert(varchar,validity,103) as validity,
   OriginalPOno, Sitename, Vendorname 
FROM  dbo.tbl_POR_PO_MAIN 
WHERE originalpono not in (select originalpono from tbl_Despatch_POR_PO_Main)
  AND pono not in (select pono from tbl_Despatch_POR_PO_Main)
  AND status=15
  AND (DATEDIFF(day,getdate(),validity)<=1)
ORDER BY sitename, validity, originalpono 
```

这给了我以下错误：

> 从字符串转换日期时间时转换失败。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:38:23.283

请检查列中的数据和有效性。此列中的任何一个都具有字符串值。这就是您收到此错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:56:12.793

尝试使用 MSSQL 服务器 ISDATE() 函数，如果字符串不是日期，则返回 0，如果是日期并且可以转换，则返回 1。尝试运行以下选择并检查不正确的字符串：

```
select 'incorrect podate',  podate from dbo.tbl_POR_PO_MAIN where ISDATE(podate)=0
union all
select 'incorrect validity',  validity from dbo.tbl_POR_PO_MAIN where ISDATE(validity)=0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T05:18:33.870

找到[这个线程](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/2e36331d-0081-47e4-a0f4-fe3183547187/)：

> SQL Server 需要格式为 mm/dd/yyyy 的日期，因此您需要在提交之前将日期转换为这种格式。
> 
> 此错误的问题在于，如果日期的日期值 <=12，它将自动转换为 mm/dd/yyyy，从而给您错误的印象，即您的代码正在运行。直到 13> 的那一天，问题才引起了它的丑陋。

听起来这可能是问题所在，也许你应该看看 Podate 结构。

# ruby-on-rails-3 - how to tell scope that it will return single object

> ID：11789599
> 
> 赞同：0
> 
> 时间：2012-08-03T05:09:10.840
> 
> 标签：ruby-on-rails-3, activerecord, scope

Am trying this out

```
@user.orders.of(:some_type).for_today 
```

business rule says a user can place single order of any type per day, being applied this through callbacks etc. I know that `for_today`, I want it to return single object. That means I want to make scope `for_today` return a single object but not an array. However all followings returns array

### 1

```
scope :of, lambda{ |type| where(:order_type => type) }
scope :for_today, where(" created_at BETWEEN ? AND ? ", Date.today, Date.tomorrow) 
```

### 2

```
scope :of, lambda{ |type| where(:order_type => type) }
scope :for_today, where(" created_at BETWEEN ? AND ? ", Date.today, Date.tomorrow).limit(1) 
```

### 3

```
scope :of, lambda{ |type| where(:order_type => type) }
scope :for_today, where(" created_at BETWEEN ? AND ? ", Date.today, Date.tomorrow).first 
```

and then I do not see any other option calling again `first` in my code

```
@user.orders.of(:some_type).for_today.first 
```

I guess, it is correct the way it is working, because developer gets to know that she is fetching out 1st record out, which makes more sense, else there is no way to guess whether it returns array or single object. But still, considering my business rules I would expect that `for_today` should return single object, and hence wanted to know, is there any way to tell `scope` that it is going to return single object so do not package it using array.

# gcc - 从 Gimple 表示创建基本块的数据流图

> ID：11789608
> 
> 赞同：4
> 
> 时间：2012-08-03T05:09:34.263
> 
> 标签：gcc, compiler-construction, graph, dot, dataflow

GCC 的 Gimple internal representation (IR) 为 SSA（Static Single Assignment）形式的每个基本块提供了一些数据流分析。我想将 GCC 生成的 Gimple 文件作为输入，并为基本块生成数据流图。例如，下面的代码显示了一个由 GCC 生成的 Gimple 格式的简单基本块（使用`-fdump-tree-cfg`）。

```
...
<bb 3>:
  i2 = 0;
  goto <bb 5>;

<bb 4>: //the inner-most loop, where real computation happens
  i1.0 = i1;
  i1.1 = i1;
  D.1608 = y[i1.1];
  i2.2 = i2;
  D.1610 = w[i2.2];
  D.1611 = i1 + i2;
  D.1612 = x[D.1611];
  D.1613 = D.1610 * D.1612;
  D.1614 = D.1608 + D.1613;
  y[i1.0] = D.1614;
  i2 = i2 + 1;

<bb 5>:
  if (i2 <= 31)
    goto <bb 4>;
  else
    goto <bb 6>;
... 
```

在上面的代码中，可以在`bb 4`. 我需要可视化数据依赖关系，以便以数据流图的形式分析每个基本块中的数据流。数据流图是指图中的节点表示加法和乘法等操作，边表示节点之间的数据依赖关系的图。一种选择是编写一个解析器，它接受 Gimple 并生成一个`dot`文件。我想知道是否已经有这样的工具可以做到这一点。编写这样一个解析器似乎并不难，但我担心我可能会在处理很多极端情况时陷入困境。

请注意：我的谷歌搜索并没有那么富有成效，因为我发现这样的工具[只](http://gcc-python-plugin.readthedocs.org/en/latest/examples.html)生成控制流图。

# css - css 不同分辨率 em 或 px

> ID：11789609
> 
> 赞同：2
> 
> 时间：2012-08-03T05:09:37.140
> 
> 标签：css, screen-resolution

我设计了一个网站。我是 css、html、php 的新手，所以在 css 中我使用了 px 中的所有尺寸。但是当我更改屏幕分辨率时，网页内容不正确，意思是：

当我缩小这是结果如何在 css 中处理这个？当我用谷歌搜索时，我发现我应该使用 em / % 而不是使用 px。

要使用什么？

1.  时间
2.  像素
3.  %

对于宽度和高度。

**编辑1**

**缩小**后

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:21:11.417

[**font-size:**](https://developer.mozilla.org/en/CSS/font-size) font-size CSS 属性指定字体的大小。反过来，字体大小可能会改变其他项目的大小，因为它用于计算 em 和 ex 长度单位的值。

**价值观**

> **xx 小，x 小，小，中，大，x 大，xx 大**
> 
> 一组基于用户默认字体大小（中等）的绝对大小关键字。与用户默认字体大小为 .

***更大，更小***

> 大于或小于父元素的字体大小，大致为用于分隔上述绝对大小关键字的比率。

**长度**

> 正长度。当单位以 em 或 ex 指定时，大小是相对于相关元素的父元素上的字体大小定义的。例如，0.5em 是当前元素父级字体大小的一半。

**百分比**

> 父元素字体大小的正百分比。
> 
> 最好避免使用与用户默认字体大小无关的值，例如单位不是 em 或 ex 的长度。但是，如果必须使用此类值，则 px 优于其他单位，因为它们的含义不会因操作系统认为（通常是错误的）显示器分辨率而异。

**--- 可能的方法 ---**

**关键词**

> 关键字是设置网络字体大小的好方法。通过在 body 元素上设置关键字字体大小，您可以在页面上的其他位置设置相对字体大小，使您能够轻松地在整个页面上相应地放大或缩小字体。

**像素**

> 当您需要像素精度时，以像素值 (px) 为单位设置字体大小是一个不错的选择。px 值是静态的。这是一种独立于操作系统和跨浏览器的方式，它实际上告诉浏览器以您指定的高度像素数精确呈现字母。不同浏览器的结果可能略有不同，因为它们可能使用不同的算法来实现类似的效果。
> 
> 字体大小设置也可以组合使用。例如，如果父元素设置为 16px，而其子元素设置为更大，则子元素在页面中的显示大于父元素。
> 
> **注意：**无法以像素为单位定义字体大小，因为用户无法从浏览器更改字体大小。（例如，视力有限的用户可能希望将字体大小设置为远大于网页设计师选择的大小。）因此，如果您希望创建包容性设计，请避免使用像素作为字体大小。

**EMS**

> 另一种设置字体大小的方法是使用 em 值。em 值的大小是动态的。定义 font-size 属性时，em 等于应用于相关元素父级的字体大小。如果你没有在页面的任何地方设置字体大小，那么它是浏览器默认的，大概是 16px。因此，默认情况下 1em = 16px，而 2em = 32px。如果你在 body 元素上设置了 20px 的字体大小，那么 1em = 20px 和 2em = 40px。请注意，值 2 本质上是当前 em 大小的乘数。
> 
> 为了计算所需任何像素值的 em 等效值，您可以使用以下公式：
> 
> em = 想要的元素像素值/父元素font-size，单位为像素例如，假设页面body的font-size设置为1em，浏览器标准为1em = 16px；如果你想要的字体大小是 12px，那么你应该指定 0.75em（因为 12/16 = 0.75）。同样，如果你想要一个10px的字体大小，那么指定0.625em（10/16 = 0.625）；对于 22px，指定 1.375em (22/16)。
> 
> 在整个文档中使用的一种流行技术是将正文的字体大小设置为 62.5%（即默认 16px 的 62.5%），相当于 10px 或 0.625em。现在，您可以使用 em 单位设置任何元素的字体大小，通过将 px 值除以 10 进行易于记忆的转换。这样 6px = 0.6em、8px = 0.8em、12px = 1.2em、14px = 1.4em，16 像素 = 1.6em。例如：

```
body {
  font-size: 62.5%; /* font-size 1em = 10px */
}
p {
  font-size: 1.6em; /* 1.6em = 16px */
} 
```

> em 是 CSS 中非常有用的单位，因为它可以自动适应读者选择使用的字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T05:14:13.257

由于不一致，**不建议**网站具有主要内容区域的**百分比 (%)宽度。**对于整个网站，最好使用大约 960 像素的**像素宽度**，可能会更小一些，这样它就适用于所有分辨率。

 ****至于主要内容区域内的元素，最好使用百分比宽度，因为计算精确的像素值对两者都没有意义。结果设置为固定，因为它是父级固定宽度的百分比，而不是显示器的分辨率，这在用户之间有所不同。

### 总结一下：

最好使用带有 a 的固定宽度父`wrap`元素，并`960px`在.`%``wrap`

### 示例代码：

首先，您可以使用以下示例代码：

### HTML：

```
<div class="wrap">
    <!-- Other Elements -->
</div> 
```

### CSS：

```
.wrap {margin: 0px auto; width: 960px;} 
```

有关更多信息，请查看 Programmers 上的这个问题：[https ://softwareengineering.stackexchange.com/questions/135506/percent-or-pixels-html-css](https://softwareengineering.stackexchange.com/questions/135506/percent-or-pixels-html-css)******

# cassandra - Hector查询列族中的所有数据

> ID：11789614
> 
> 赞同：2
> 
> 时间：2012-08-03T05:10:45.907
> 
> 标签：cassandra, hector

我想使用 hector api 编写一个代码，给我带来一些结果，就像我得到的一样`select * from table` ，在 Cassandra 中是否可能。请尽快回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:39:21.523

取决于如何构建 ColumnFamily

使用 columSlice 和 StringSerializer 的示例可能是：

```
ColumnSlice<String, String> result = HFactory.createSliceQuery(ksp, stringSerializer, stringSerializer, stringSerializer)
            .setKey(row)
            .setRange(startColumn, endColumn, false, limit)
            .setColumnFamily(columnFamily)
            .execute().get();

    List<HColumn<String, String>> columns = result.getColumns(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T04:28:32.380

SliceQuery 不会给出列族中的所有行，因为它需要一个行键。要获取列族的所有行，请使用键和范围为 null 的 rangeSliceQuery

```
RangeSlicesQuery<Object, Object, Object> rangeQuery =    HFactory.createRangeSlicesQuery(keyspace, keySerializer,
            nameSerializer, valueSerializer);
rangeQuery.setColumnFamily(cf);
rangeQuery.setRange(null, null, false, MAX_COL);
rangeQuery.setKeys(null, null);
rangeQuery.setRowCount(rowCount);//Greater than count(*)
QueryResult<OrderedRows<Object, Object, Object>> result = rangeQuery.execute(); 
```

# c++ - 如何在 Linux C/C++ 程序中支持多种语言？

> ID：11789615
> 
> 赞同：3
> 
> 时间：2012-08-03T05:10:50.380
> 
> 标签：c++, c, linux, locale

例如，在这个最简单的 hello world 程序中：

```
#include <iostream>
int main()
{
    std::cout<<"Hello World!"<<std::endl;
    return 0;
} 
```

`LANG`如果用户的环境设置为，我想看法语`fr_FR`，它可能看起来像：

```
$ ./a.out
Hello World!

$ LANG=fr_FR.utf8
$ ./a.out
Bonjour tout le monde! 
```

是否有关于如何在 Linux 中归档的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:14:31.917

关键是使用“资源”（每种语言一个，配置为在运行时读取）与硬编码字符串。Qt 和 GTK+ 等 GUI 框架使这（相对）容易。

这是 GTK+ 使用的 Pango" 库的链接（但强调不是GTK+*独有*的）：

*   [http://www.pango.org/](http://www.pango.org/)

以下是使用 Pango 的教程：

*   [http://x11.gp2x.de/personal/google/](http://x11.gp2x.de/personal/google/)

这是一个关于“gettext()”的教程（我相信 Pango 使用它）：

*   [http://inti.sourceforge.net/tutorial/libinti/internationalization.html](http://inti.sourceforge.net/tutorial/libinti/internationalization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:17:43.197

这里有两个问题。

1.  [您可以使用Gettext 库](http://www.gnu.org/software/gettext/)轻松地使您的程序国际化/本地化。

2.  您可以使用标准函数 `getenv()' 检查用户的环境变量：

    `const char *langcode = getenv("LANG");`

或某些实现（我相信包括 Linux 和 Mac OS X）支持 3 参数主函数：

```
int main(int argc, char **argv, char **envp)
{
    char **e;
    char *langcode;
    for (langcode = NULL, e = envp; e != NULL; e++)
    {
        if (strstr(*e, "LANG") != NULL)
        {
             langcode = strchr(*e, '=') + 1;
             break;
        }
    }

    printf("Language: %s\n", langcode);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:30:08.303

您可能不想在简单的程序中执行此操作，但如果您的程序足够大，您可以使用 GNU gettext，它可以在[http://www.gnu.org/software/gettext/](http://www.gnu.org/software/gettext/)找到。然后，为程序提供文本文件，然后使用 printf (_("Some string\n")) 输出本地化字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:00:48.033

刚刚找到了一个我可以轻松学习的教程：http: [//fedoraproject.org/wiki/How_to_do_I18N_through_gettext](http://fedoraproject.org/wiki/How_to_do_I18N_through_gettext)

这是我的新代码

```
#include <iostream>
#include <libintl.h>
#include <locale.h>

int main()
{
    setlocale(LC_ALL, "");
    bindtextdomain("helloworld", "/usr/share/locale");
    textdomain("helloworld");

    std::cout<<gettext("Hello World!")<<std::endl;
    return 0;
} 
```

然后创建`pot`文件

```
mkdir po
xgettext --package-name helloworld --package-version 1.0 -d helloworld -o po/helloworld.pot -s a.cpp 
```

生成`mo`文件

```
msginit --no-translator --locale fr_FR --output-file po/helloworld.po --input po/helloworld.pot
sed --in-place po/helloworld.po --expression='/"Hello World!"/,/#: / s/""/"Bonjour tout le monde!"/'
msgfmt po/helloworld.po -o po/helloworld.mo
sudo cp po/helloworld.mo /usr/share/locale/fr/LC_MESSAGES/ 
```

这是输出

```
[deqing@hdell]~/work/sty$ ./helloworld
Hello World!
[deqing@hdell]~/work/sty$ LANG=fr_FR.utf-8
[deqing@hdell]~/work/sty$ ./helloworld
Bonjour tout le monde! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:32:13.127

对于c++，如果可以使用Qt库，它对本地化有很好的支持。有关详细信息，请查看[他们的内部化页面](http://doc.qt.nokia.com/4.7-snapshot/internationalization.html)。

下一个伪示例显示如何加载翻译文件，并设置语言环境：

```
int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);

     QTranslator qtTranslator;
     qtTranslator.load("qt_" + QLocale::system().name(),
             QLibraryInfo::location(QLibraryInfo::TranslationsPath));
     app.installTranslator(&qtTranslator);

     QTranslator myappTranslator;
     myappTranslator.load("myapp_" + QLocale::system().name());
     app.installTranslator(&myappTranslator);

     ...
     return app.exec();
 } 
```

# php - 从 android 连接到数据库 mySQL 失败

> ID：11789621
> 
> 赞同：0
> 
> 时间：2012-08-03T05:11:26.237
> 
> 标签：php, android, mysql, login, logcat

我正在开发一个 android 项目，当我尝试使用 php 文件和 easyphp/mySQL 登录应用程序时，它失败了，这是 logcat 错误：

```
 08-03 04:53:20.203: W/System.err(244): org.apache.http.NoHttpResponseException: The     target server failed to respond
    08-03 04:53:20.237: W/System.err(244):  at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85)
    08-03 04:53:20.247: W/System.err(244):  at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
    08-03 04:53:20.247: W/System.err(244):  at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
    08-03 04:53:20.247: W/System.err(244):  at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
    08-03 04:53:20.260: W/System.err(244):  at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
    08-03 04:53:20.260: W/System.err(244):  at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
    08-03 04:53:20.260: W/System.err(244):  at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
    08-03 04:53:20.282: W/System.err(244):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:410)
    08-03 04:53:20.288: W/System.err(244):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
    08-03 04:53:20.300: W/System.err(244):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
    08-03 04:53:20.307: W/System.err(244):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
    08-03 04:53:20.320: W/System.err(244):  at com.stage.sondage.Login.onClick(Login.java:109)
    08-03 04:53:20.320: W/System.err(244):  at android.view.View.performClick(View.java:2364)
    08-03 04:53:20.339: W/System.err(244):  at android.view.View.onTouchEvent(View.java:4179)
    08-03 04:53:20.358: W/System.err(244):  at android.widget.TextView.onTouchEvent(TextView.java:6540)
    08-03 04:53:20.358: W/System.err(244):  at android.view.View.dispatchTouchEvent(View.java:3709)
    08-03 04:53:20.367: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.379: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.387: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.401: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.401: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.401: W/System.err(244):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-03 04:53:20.407: W/System.err(244):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    08-03 04:53:20.420: W/System.err(244):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    08-03 04:53:20.420: W/System.err(244):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    08-03 04:53:20.420: W/System.err(244):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    08-03 04:53:20.420: W/System.err(244):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    08-03 04:53:20.427: W/System.err(244):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-03 04:53:20.438: W/System.err(244):  at android.os.Looper.loop(Looper.java:123)
    08-03 04:53:20.459: W/System.err(244):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    08-03 04:53:20.459: W/System.err(244):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-03 04:53:20.459: W/System.err(244):  at java.lang.reflect.Method.invoke(Method.java:521)
    08-03 04:53:20.459: W/System.err(244):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    08-03 04:53:20.467: W/System.err(244):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    08-03 04:53:20.517: W/System.err(244):  at dalvik.system.NativeStart.main(Native Method) 
```

登录中的第 109 行是`response = hhtpclient.execute(httppost);`

其中 response 是 HttpResponse 的一个实例；我已经尝试了这两个值

```
httppost=new HttpPost("http://10.0.2.2/android/connection.php"); 
```

和

```
httppost=new HttpPost("http://127.0.1.1/android/connection.php"); 
```

（顺便问一下这两个IP地址有什么区别？）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:16:58.577

您的清单文件中的 Internet 权限是必需的。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

将此粘贴到应用程序标记后的清单文件中。

# java - 给定 SMS 字符串的正则表达式是什么

> ID：11789622
> 
> 赞同：0
> 
> 时间：2012-08-03T05:11:27.220
> 
> 标签：java, android, regex, sms

我的字符串是一条短信，有以下两种格式之一：

**潜在客户的短信：**
您已收到 1 个潜在客户
**标题**：我的潜在客户
**潜在客户 ID**：12345-2365
**警报设置 ID**：890

**短信回复：**
您已收到 1 个回复
**标题**：我的回复
**回复 id**：12345-2365
**广告 id**：890

实际上，我正在解析 SMS 以将数据库中的值存储在各个字段中。我想使用正则表达式来解析逻辑。正如您在上面看到的，SMS 由线索或回复区分，并且字段因它们而异（粗体）。我的问题是如何使用正则表达式来区分这两种 SMS 类型。例如，如果我想区分 SMS 字符串中的潜在客户 ID 和回复 ID，那么正则表达式字符串是什么？

**注意：**我知道还有另一种方法称为 String.split() 但基于此编写的代码太长且太复杂。所以使用正则表达式。

感谢和问候
Sohaib Rahman

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:36:56.513

我使用此代码提取消息的 ID 值并区分消息类型。我使用的代码是这样的：

```
 String lead = "You have received 1 lead\ntitle:my lead\nlead id:12345-2365\nalert setting id:890";
    String reply = "You have received 1 reply\ntitle:my reply\nreply id:12345-2365\nad id:890\n";

    Pattern leadPattern = Pattern.compile("lead id:\\s*(\\d{5}-\\d{4})", Pattern.MULTILINE);
    Matcher leadMatcher = leadPattern.matcher(lead);
    if (leadMatcher.find())
    {
        System.out.println("Lead: " + leadMatcher.group(1));
    }

    Pattern replyPattern = Pattern.compile("reply id:\\s*(\\d{5}-\\d{4})", Pattern.MULTILINE);
    Matcher replyMatcher = replyPattern.matcher(reply);
    if (replyMatcher.find())
    {
        System.out.println("Reply: " + replyMatcher.group(1));
    }

    System.out.println(leadPattern.matcher(reply).find());
    System.out.println(replyPattern.matcher(lead).find()); 
```

它产生了以下结果：

```
Lead: 12345-2365
Reply: 1234-2365
false
false 
```

# ruby - 如何解决 Ubuntu 11.10 中的 xapian-core 问题

> ID：11789623
> 
> 赞同：1
> 
> 时间：2012-08-03T05:11:31.103
> 
> 标签：ruby, rubygems, ruby-on-rails-3.2, xapian

我无法使用 gcc 4.6.1 在 Ubuntu 11.10 (GNU/Linux 3.0.0-16-virtual i686) 中安装 gem xapian-core 我的 ruby​​ 版本是 1.9.2 和 rails 3.2.3。这是说C编译器无法创建可执行文件。

```
See config.log for more details.

I am trying to install  xapian-core for my ruby application. It works everything fine in older version of Ubuntu 10.10\. But when I require to upload all the files to server(Ubuntu 11.10) there it through s an issue with following error.

xapian-bindings-1.2.7/perl/Search/Xapian/PositionIterator.pm
xapian-bindings-1.2.7/perl/Search/Xapian/PostingIterator.pm
xapian-bindings-1.2.7/perl/Search/Xapian/QueryParserError.pm
xapian-bindings-1.2.7/perl/Search/Xapian/QueryParser.pm
xapian-bindings-1.2.7/perl/Search/Xapian/Query.pm
xapian-bindings-1.2.7/perl/Search/Xapian/RangeError.pm
xapian-bindings-1.2.7/perl/Search/Xapian/RSet.pm
xapian-bindings-1.2.7/perl/Search/Xapian/RuntimeError.pm
xapian-bindings-1.2.7/perl/Search/Xapian/SimpleStopper.pm
xapian-bindings-1.2.7/perl/Search/Xapian/Stem.pm
xapian-bindings-1.2.7/perl/Search/Xapian/Stopper.pm
xapian-bindings-1.2.7/perl/Search/Xapian/TermGenerator.pm
xapian-bindings-1.2.7/perl/Search/Xapian/TermIterator.pm
xapian-bindings-1.2.7/perl/Search/Xapian/TradWeight.pm
xapian-bindings-1.2.7/perl/Search/Xapian/UnimplementedError.pm
xapian-bindings-1.2.7/perl/Search/Xapian/ValueIterator.pm
xapian-bindings-1.2.7/perl/Search/Xapian/Weight.pm
xapian-bindings-1.2.7/perl/Search/Xapian/WritableDatabase.pm
xapian-bindings-1.2.7/perl/Search/Xapian.pm
xapian-bindings-1.2.7/perl/t/
xapian-bindings-1.2.7/perl/t/symbol-test/
xapian-bindings-1.2.7/perl/t/symbol-test/SymbolTest.pm
xapian-bindings-1.2.7/perl/t/symbol-test/typemap
xapian-bindings-1.2.7/perl/t/symbol-test/SymbolTest.xs
xapian-bindings-1.2.7/perl/t/symbol-test/Makefile.PL
xapian-bindings-1.2.7/lua/docs/
xapian-bindings-1.2.7/lua/docs/examples/
xapian-bindings-1.2.7/lua/docs/examples/simpleindex.lua
xapian-bindings-1.2.7/lua/docs/examples/simpleexpand.lua
xapian-bindings-1.2.7/lua/docs/examples/simplematchdecider.lua
xapian-bindings-1.2.7/lua/docs/examples/simplesearch.lua
xapian-bindings-1.2.7/lua/docs/index.html
xapian-bindings-1.2.7/lua/Makefile.am
xapian-bindings-1.2.7/lua/Makefile.in
xapian-bindings-1.2.7/lua/util.i
xapian-bindings-1.2.7/lua/smoketest.lua
xapian-bindings-1.2.7/lua/xapian_wrap.cc
prefix = /usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1
./configure --prefix=/usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1 --exec-prefix=/usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking how to create a ustar tar archive... gnutar
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking how to print strings... printf
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7':
configure: error: C compiler cannot create executables
See `config.log' for more details
rake aborted!

Tasks: TOP => default
(See full trace by running task with --trace)

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.2-p320/gems/xapian-core-1.2.7.1/ext/gem_make.out

An error occured while installing xapian-core (1.2.7.1), and Bundler cannot continue.
Make sure that `gem install xapian-core -v '1.2.7.1'` succeeds before bundling.

When I am trying to install "xapian-core" it was not allowing to install .

Can any once please help me for this issue. How can I proceed with xapian package for Ubuntu 11.10.

 Can any one plz provide me the step by step procedure of installing this package. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:58:52.687

您可以从 github 签出最新版本并自行构建。
下面一步步来。

1.  查看最新版本：
    `git clone https://github.com/rlane/xapian-full.git`
    `cd xapian-full`
2.  构建宝石：
    `rake`
    `gem build xapian-full.gemspec`
3.  安装它：
    `gem install --local xapian-full*.gem`

# c - C语言中的Windows虚拟麦克风

> ID：11789624
> 
> 赞同：3
> 
> 时间：2012-08-03T05:11:35.713
> 
> 标签：c, windows, api, filtering, portaudio

前段时间问了一个类似的问题，但我不是很了解，所以我无法足够具体。

我想编写一个程序，从我的麦克风中获取输入，对其进行处理，然后将输出发送到一个假的“虚拟麦克风”，就好像我创建的处理后的声音是麦克风听到的一样。然后，我希望能够将此虚拟麦克风与任何支持选择麦克风输入（几乎所有编写良好的软件）作为有效麦克风的应用程序一起使用。所以应用程序“听到”的将是我处理后的麦克风输入版本。

我正在使用 C 语言中的 Portaudio，我可以很好地从麦克风中捕获、处理并发送到扬声器。现在我需要用假麦克风替换应用程序中的真实扬声器。Windows 似乎为此提供了一些 API。 [http://msdn.microsoft.com/en-us/library/windows/hardware/ff536201%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff536201%28v=vs.85%29.aspx) 所以我的接收器引脚将是真正的麦克风，我将不得不创建一个新的源引脚这应该对其他应用程序可见。我该怎么做呢？我很难找到代码示例甚至任何信息量非常大的文档。

语言：C 操作系统：Windows 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T05:44:23.440

我相信这需要编写设备驱动程序，而不仅仅是使用 Win32 API。

SuperUser 上有一个类似的问题：[How to create a virtual audio device and stream audio input with it](https://superuser.com/questions/117625/how-to-create-a-virtual-audio-device-and-stream-audio-input-with-it)。他们的解决方案是查看[Virtual Audio Cable](http://software.muzychenko.net/eng/vac.htm)。然而它不是免费的。

有[虚拟音频电缆的替代品，其中之一是](http://alternativeto.net/software/virtual-audio-cable/)[JACK](http://jackaudio.org/)的 Windows 端口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T06:18:11.443

为此，可以使用 Windows Stereo Mix。然后您可以在环回模式下打开虚拟设备并通过编程记录麦克风听到的内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T21:52:30.977

您可能正在使用称为虚拟音频电缆的程序。免费软件包括多达 3 个 vac-s。之后，您可以使用 mitov.com audiolab 库来做任何您想做的事情。如果你想做一些 DSP 或其他什么

# binding - 尝试使用 WinRT 绑定到 IsChecked

> ID：11789627
> 
> 赞同：2
> 
> 时间：2012-08-03T05:11:55.957
> 
> 标签：binding, radio-button, windows-8, windows-runtime, winrt-xaml

在下面的代码中，转换器中没有遇到断点。单击单选按钮不会更改活动控件。这就像 IsChecked 甚至不会触发更改事件。有任何想法吗？这是 WinRT 代码。

```
<Page
    x:Class="TestBinding.MainPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TestBinding"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <local:EqualsToBoolConverter x:Key="equalsToBoolConverter"/>
    </Page.Resources>
<Page.TopAppBar>
        <AppBar IsOpen="True" IsSticky="True">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                <RadioButton
                    Style="{StaticResource TextRadioButtonStyle}"
                    Name="goItem1"
                    IsChecked="{Binding ElementName=flipView,Path=SelectedItem,Converter={StaticResource equalsToBoolConverter}, ConverterParameter={Binding ElementName=item1}, Mode=TwoWay}">Go 1</RadioButton>
                <RadioButton
                    Style="{StaticResource TextRadioButtonStyle}"
                    Name="goItem2"
                    IsChecked="{Binding ElementName=flipView,Path=SelectedItem,Converter={StaticResource equalsToBoolConverter}, ConverterParameter={Binding ElementName=item2}, Mode=TwoWay}">Go 2</RadioButton>
            </StackPanel>
        </AppBar>
    </Page.TopAppBar>
    <FlipView
        Name="flipView"
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
        Margin="100"
        Padding="10"
        SelectedIndex="0">
        <FlipViewItem Name="item1">
            <TextBlock Text="item1"/>
        </FlipViewItem>
        <FlipViewItem Name="item2">
            <TextBlock Text="item2"/>
        </FlipViewItem>
    </FlipView>
</Page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:53:26.913

我无法在 RadioButton.IsChecked 中声明任何绑定。但是，通过反转问题，我确实让它工作得很好。FlipViewItem 上有一个 IsSelected 属性。我用这种方法成功了：

```
IsSelected="{Binding ElementName=radioButton1,Path=IsChecked,Mode=TwoWay}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:33:14.667

不确定您的转换器做了什么，但常见的问题`IsChecked`是它不是布尔值，而是`bool?`( `Nullable<bool>`)。那是您的转换器需要/返回的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:55:23.860

好吧，这不是布尔？你需要的。见（这很好用）：

```
<Grid Height="150">
    <Grid.Resources>
        <x:Boolean x:Key="MyBool">true</x:Boolean>
    </Grid.Resources>
    <StackPanel>
        <CheckBox IsChecked="true" Content="Hello World" />
        <CheckBox IsChecked="{StaticResource MyBool}" Content="Hello World" />
    </StackPanel>
</Grid> 
```

您的问题是转换器参数不能是绑定值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T22:56:39.757

[此 MSDN 博客](http://blogs.msdn.com/b/mim/archive/2013/03/11/tips-winrt-converter-parameter-binding.aspx)描述了一种技术，您可以通过该技术对 ConverterParameters 使用绑定。

关键摘录：

> ConverterParameter 不是依赖属性，而是“简单”对象。在这种情况下，您不能使用绑定。这种副作用适用于所有 XAML 平台：WP7-8、Silverlight、WPF，当然还有 WinRT。
> 
> 这个想法是在我的转换器上创建一个依赖属性，而不是使用 ConverterParameter ：为了能够创建 DP，您的转换器必须继承自 DependencyObject ：

```
public class DistanceConverter : DependencyObject, IValueConverter
{
    public UserViewModel CurrentUser
    {
        get { return (UserViewModel) GetValue(CurrentUserProperty); }
        set { SetValue(CurrentUserProperty, value); }
    }

    public static readonly DependencyProperty CurrentUserProperty =
        DependencyProperty.Register("CurrentUser",
                                    typeof (UserViewModel),
                                    typeof (DistanceConverter),
                                    new PropertyMetadata(null));

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

> 然后，我在页面资源中声明了我的转换器：

```
<common:LayoutAwarePage.Resources>
  <conv:DistanceConverter x:Key="DistanceConverter"  
    CurrentUser="{Binding User}"
    CurrentItem="{Binding CurrentItem}"
    MaxWidthAvailable="450" />
</common:LayoutAwarePage.Resources> 
```

> 最后，我在我的项目模板中设置了转换器：

```
<Rectangle HorizontalAlignment="Left" VerticalAlignment="Center" 
           Fill="#00FF84" Margin="10,0" Height="10"
           Width="{Binding Path=CurrentItem.Distance, 
 Converter={StaticResource DistanceConverter}}">
</Rectangle> 
```

# php - filemtime 无法读取文件修改时间

> ID：11789634
> 
> 赞同：0
> 
> 时间：2012-08-03T05:12:45.643
> 
> 标签：php, filemtime

这是我的代码：

```
 date_default_timezone_set('Europe/Baku');
        $dh =opendir('C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css');
        $full_path='C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css';
        $way=array();

        while ($file = readdir($dh)):

         array_push($way,$full_path.$file);
         endwhile;
        closedir($dh);
        echo '<br>';
        for ($t=2;$t<=6;$t++){
       echo "<br> $way[$t] : " . filetype($way[$t]) . "\nCreate Date: " . date("F d Y                       H:i:s ", filemtime((string)$way[$t]) );   

        }

echo '<br>'.date ("F d Y H:i:s.", filemtime('C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css\blank.gif'));

        ?> 
```

这就是它的回应：

`C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\cssblank.gif : Create Date: January 01 1970 00:00:00 C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\cssiepngfix.htc : Create Date: January 01 1970 00:00:00 C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\csswelcome.css : Create Date: January 01 1970 00:00:00 C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\csswelcome_ie6.css : Create Date: January 01 1970 00:00:00 : Create Date: January 01 1970 00:00:00 July 04 2012 16:13:34.`

我认为 filemtime 无法读取修改时间，也不知道为什么。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:21:57.067

```
-$full_path='C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css';
+$full_path='C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css\'; 
```

您在 full_path 变量中丢失了反斜杠。所以，你得到错误的文件完整路径：

```
'C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\csswelcome.css' 
```

代替

```
'C:\Program Files (x86)\Zend\Apache2\htdocs\upload\extjs-4.1.1\welcome\css\welcome.css' 
```

# java-me - 如何在 netbeans ide 7.1.2 中安装和集成 j2me Polish？

> ID：11789635
> 
> 赞同：0
> 
> 时间：2012-08-03T05:12:50.883
> 
> 标签：java-me, j2mepolish

我试图将 j2me Polish 安装到我的 IDE，但我无法获得，最初我已经下载了 j2me Polish 2.0.7.jar，我使用了命令“java -jar j2mepolish-2.0.7.jar”

C:\Documents and Settings\pavan\My Documents\Downloads>java -jar j2mepolish-2.0\. 7.罐子；

它说无法访问 jar 文件，任何人都可以安装和运行示例 j2me 波兰应用程序的步骤吗？为此我可以安装 j2me 波兰插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:20:35.597

我遵循以下步骤，它一直对我有用。下载 J2ME-Polish2.1.4，安装库和 Netbeans 插件。也许您需要重新启动 IDE。现在

1) 在 Netbeans 中创建一个项目（例如 Polish Table），使用 J2ME 波兰语插件。让我们称之为

2) 将/samples/tableitem/ 中除nbproject 目录以外的所有文件复制到NetBeans 目录。在此复制过程中覆盖由 Netbeans 创建的 build.xml。

3) 将 /samples/tableitem/nbproject 的内容（私有文件夹除外）复制到目录。覆盖所有文件。

4) 切换到 NetBeans 目录

5) 编辑 project.xml 文件。注释掉标签。将标签中的项目名称重命名为 Netbeans 中创建的项目名称（即波兰表）

6) 编辑 nbproject 目录下的 project.properties 文件。将 src.dir 从 src 更改为 source/src

7) 编辑 nbproject 目录下的 project.properties 文件。确保 libs.classpath= 属性指向 J2ME 波兰导入客户端库。如果未找到，请确保添加以下两行：

8)file.reference.enough-j2mepolish-client.jar=C:/J2ME-Polish/import/enough-j2mepolish-client.jar 9.libs.classpath=${file.reference.enough-j2mepolish-client.jar}

重新启动 NetBeans IDE。从现在开始，您可以完全使用 IDE 工作。但是，您需要从命令行编译。即使这也可以集成 - 但没有费心去弄清楚。希望这足以让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T09:33:53.020

我遇到了与 OP 类似的问题。对我来说，将 jar 文件移动到路径不包含任何空格的位置似乎可以解决问题 - 或者，将 jar 放在 NB 项目文件夹的根目录中并相对访问它。

# javascript - 在javascript中设置星期几

> ID：11789647
> 
> 赞同：24
> 
> 时间：2012-08-03T05:14:21.947
> 
> 标签：javascript, date

我正在使用 phonegap localNotifications 插件，它指定我可以将通知设置为每周发生一次。

但是，似乎 javascript date 对象只有`.getDay()`没有`.setDay()`.

我有一个要设置为重复的星期几的 json 对象，

```
set_days = {“星期一”：假，“星期二”：真，“星期三”：假，“星期四”：真...}

```

你如何在javascript中设置一天？因为是设置通知，所以日子必须在未来，所以我不想得到最近的“星期三”，而只想得到下一个“星期三”。

这是插件的链接，但我认为这并不是插件所特有的。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-03T05:33:38.760

> 你如何在javascript中设置一天？

你的意思是，在本周？一周什么时候开始？

假设它从星期日开始（如[`getDay`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getDay#Description)：0 - 星期日，1 - 星期一等），这将起作用：

```
var date, daytoset; // given: a Date object and a integer representing the week day

var currentDay = date.getDay();
var distance = daytoset - currentDay;
date.setDate(date.getDate() + distance); 
```

* * *

要将日期设置为接下来 7 天内的工作日，请使用以下命令：

```
var distance = (daytoset + 7 - currentDay) % 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-15T16:17:43.540

这是一个已经很好完成的答案，但我找到了一个我想与您分享的解决方案。

我不擅长更新像Date这样的JS对象，所以我没有提供一个完整的解决方案来实现`Date.proptype.setDay`，但想法就在这里：

```
// Get a day of the current week
// Example "Get Monday" : getWeekDay({day:1})

// Args:
//  - day {Number} Same format that Date.getDay() > Sunday - Saturday : 0 - 6
//  - inWeeks {Number} Number of week relative to current, -1: Previous week, 1: Next week, 2: in 2 weeks
//  - date {Date} Use this date instead of now to get relative current week
//  - atMidnight {Bool} Force result date to be at 00:00:00:00 (instead of keeping current/date time)
/*export*/ const getWeekDay = ({
  day, inWeeks=0,
  date,
  atMidnight=false, // Force days to be at 00:00:00:00
}={}) => {
  date = date ? new Date(date) : new Date(); // Loose ref if exist, or take now
  day = (typeof day !== 'number' && typeof day !== 'string')
    ? date.getDay()
    : day;
  date.setDate(date.getDate() + inWeeks * 7 + (day - date.getDay()));
  if (atMidnight) {
    date.setHours(0,0,0,0);
  }
  return date;
};

// Same that getWeekDay
// but return an array of all days in the week [Sunday, Monday, .. Saturday]
// Instead of one single day

// Additional Args:
// - days: Array of day: {Number} Same format that Date.getDay() > Sunday - Saturday : 0 - 6
 /*export*/ const getWeekDays = ({
  days = [ ...Array(7).keys() ], 
  ...args
}) => days.map(day => getWeekDay({...args, day}));

// Demo: 

let wed = getWeekDay({inWeek:1, day:3})
console.log("The next Wednesday is: " + wed);
console.log("The next one (at midgnight): " + getWeekDay({date: wed, inWeeks:1, atMidnight:true}));
console.log("All days 2 weeks ago: " + getWeekDays({inWeeks:-2}));
console.log("Only Monday and Wednesday next week: " + getWeekDays({inWeeks:1, days:[1,3]}));
```

**附加说明**

如果您真的不想松开 ref 并更新**您**`date`作为 arg 发送的内容，则可以替换此行：

`date = date ? new Date(date) : new Date(); // Loose ref if exist, or take now`

经过：

`date = date ? date : new Date(); // KEEP ref if exist in order to update original, or take now`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-03T05:32:23.090

您是否正在创建一个新的日期对象来设置？

```
var d = new Date();
d.setDate(11); 
```

会导致

```
Tue Aug 14 2012 00:31:56 GMT-0500 (Central Daylight Time) 
```

日期对象确实有一个 set 方法。

[http://www.tutorialspoint.com/javascript/javascript_date_object.htm](http://www.tutorialspoint.com/javascript/javascript_date_object.htm)

# java - JPA - @OneToMany 作为地图

> ID：11789649
> 
> 赞同：22
> 
> 时间：2012-08-03T05:14:46.210
> 
> 标签：java, jpa, map, one-to-many

这似乎是一个很常见的情况，但作为 JPA 新手，我很难弄清楚这一点。我正在使用 EclipseLink 和 PostgreSQL，但这应该只与 JPA 规范有关。

我有一个表`PRIMARY`，它有一个 ID，然后是一堆其他列。还有一个表`SECONDARY`有一个外键到`PRIMARY`表中，也称为`ID`. 该`SECONDARY`表有一个复合键`ID`和一个表示语言环境的 varchar。

所以，在`Primary`实体中，我想要一个类型的字段，`Map<String, Secondary>`其中键是`SECONDARY`表中的语言环境字符串，条目是`Secondary`实体。我的`Secondary`课看起来像这样：

```
@Entity
public class Secondary
{
     @Id
     private Long id;
     @Id
     private String locale;
     private String str1;
     private String str2;
     .....
} 
```

我想我想使用`@MapKeyJoinColumn`注释，但我似乎无法让其他注释工作。我试过这个：

```
@OneToMany
@JoinColumn(name="ID")
@MapKeyJoinColumn(name="LOCALE")
private Map<String, Secondary> secondaryByLocale; 
```

这导致它尝试选择不存在的名为 secondaryByLocale_key 的列。

然后我尝试了这个：

```
@OneToMany
@JoinTable(name="SECONDARY", 
        joinColumns={@JoinColumn(name="ID")},
        inverseJoinColumns=@JoinColumn(name="ID"))
@MapKeyJoinColumn(name="LOCALE")
private Map<String, Secondary> secondaryByLocale; 
```

这会导致以下错误：

```
Exception Description: The @JoinColumns on the annotated element [field secondaryByLocale] from the entity class [class com.foo.Primary] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn. 
```

我尝试将 referencedColumnName 添加到注释中（我不确定它应该是什么），但我得到了同样的错误。

按照建议，我尝试使用`@MapKey`如下：

```
@OneToMany
@JoinColumn(name="ID")
@MapKey(name="LOCALE")
private Map<String, Secondary> secondaryByLocale; 
```

这会导致以下错误：

```
Exception Description: The map key [LOCALE] on the entity class [class com.foo.Secondary] could not be found for the mapping [org.eclipse.persistence.mappings.UnidirectionalOneToManyMapping[secondaryByLocale]]. 
```

也许我做错了，有更好的方法来注释 Map 字段。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T05:28:43.803

尝试`@MapKey(name = "locale")`改用。

`@MapKeyJoinColumn`当您的地图键是实体时使用，但在这里您只是使用区域设置字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T13:54:06.183

就我而言，它与 @OneToMany(cascade=CascadeType.PERSIST) @MapKeyColumn(name="COLUMN_NAME")

或者

您可以仅使用 @OneToMany(cascade=CascadeType.PERSIST) 直接尝试

# regex - 解决灾难性回溯的工具

> ID：11789650
> 
> 赞同：3
> 
> 时间：2012-08-03T05:14:49.513
> 
> 标签：regex, perl, pcre

我一般要求一种工具或方法来在正则表达式中找到导致不受控制的回溯的“热点”。我对所有格匹配、否定前瞻断言、原子组等有相当好的掌握，但我面临的情况是不清楚我的正则表达式到底哪里错了。

有问题的正则表达式是 PCRE 正则表达式；但我会为任何语言的任何指针感到高兴。

理想情况下，我希望看到一个工具可以突出显示正则表达式中的“热点”。我过去曾尝试为它创建一个包装器，`perl -Mre=debug`但无法真正弄清楚我应该如何有效地处理它的输出。模糊地说，这个想法是针对一个正则表达式运行一个或多个输入字符串，并收集匹配器不断返回的正则表达式中的偏移量（可能还有字符串中的偏移量）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T05:32:35.830

Damian Conway 的 Perl 全新[Regexp::Debugger](https://metacpan.org/module/Regexp::Debugger)模块让您可以观看正则表达式与字符串匹配的动画。它应该可以很容易地发现过多的回溯。只需安装它并使用包含的`rxrx`脚本，您可以输入一个正则表达式和一个字符串来匹配它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-12T18:08:41.870

我意识到我迟到了，但请查看这个具有正则表达式调试器的正[则表达式测试器。](http://regex101.com)看看这个例子：[http ://regex101.com/r/pF9pC2/#debugger](http://regex101.com/r/pF9pC2/#debugger)

# c# - 如何在 mvc3 视图中调用 foreach 中的 javascript 函数

> ID：11789651
> 
> 赞同：3
> 
> 时间：2012-08-03T05:14:51.620
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3

我想在 asp.net mvc3 视图中调用 c# 代码中的 JavaScript 函数，但不知道该怎么做。我的代码如下

**Javascript 函数**

```
function JK(){

   alert("Javascript Function Called From foreach");

  } 
```

**C# Foreach**

```
foreach(var item in collection){ //I want to call JavaScript function here on every iterate.  
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T05:20:56.550

那么你可以使用这样的东西：

```
foreach (var item in collection) {
   <script type="text/javascript">
     JK();
   </script>
} 
```

如果你需要在 javascript 代码中使用 foreach，你应该只使用 . 像这样：

```
<script type="text/javascript">
   @foreach (var item in collection) {
      <text>JK();</text>
   }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:21:34.160

我会以不同的方式实现它

```
@foreach(var item in collection)
{
    <!-- some html element that will be generated on each loop cycle
    <input type="hidden" class="item"/>
} 
```

然后有/没有第三方 JavaScript 库的帮助

```
$(document).ready(function () {
    $('.item').each(function () {
        JK();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:16:59.203

您不能仅在视图中调用服务器端的 JS 函数。它看起来像

```
@foreach(var item in collection)
{
  ...
  <script type="text/javascript">
     JK()
  </script>
  ...
} 
```

输出 html 将包含此 js 函数的多个调用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-17T10:51:33.370

调用 javascript 函数

```
 //C# Code
@Html.Raw("CallFunction('" + @param + "');");
    //C# code.. 
```

现在用于 Javascript 函数

```
<script type="text/javascript">
     CallFunction(param)
     {
       alert(param);
     }
  </script> 
```

# javascript - 如何创建可滚动的tablesroter

> ID：11789658
> 
> 赞同：0
> 
> 时间：2012-08-03T05:15:38.517
> 
> 标签：javascript, jquery, tablesorter

我正在使用 tablesorter Pager 插件，但它似乎给我带来了一些问题。所以我认为创建一个可滚动的表格排序器将是我要走的路。但是我还没有找到这样的解决方案。有人对此有想法吗？

赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:39:53.313

它与分拣器的插件无关，您可以合并另一个只负责滚动的滚动器插件，因此您可以使用两个插件，一个用于排序一个用于滚动这里是一对

[http://www.farinspace.com/jquery-scrollable-table-plugin/](http://www.farinspace.com/jquery-scrollable-table-plugin/)

[http://www.flexigrid.info/](http://www.flexigrid.info/)

[http://www.tablefixedheader.com/fullpagedemo/](http://www.tablefixedheader.com/fullpagedemo/)

# jquery - jQuery 动画 SVG 元素

> ID：11789665
> 
> 赞同：9
> 
> 时间：2012-08-03T05:16:06.453
> 
> 标签：jquery, svg, jquery-animate, jquery-svg

我的应用程序中有一个 svg。像

```
<svg id="gt" height="450" width="300" xmlns="http://www.w3.org/2000/svg">
<image id="1_dice" x="0" y="420" height="30" width="30" xlink:href="images/1_coin.png" />
</svg> 
```

我有一个名为“1_dice”的 svg 元素。在 HTML 按钮中单击我想根据参数为元素设置动画。像

```
$('#btn').click(function(){
     $('#1_dice').animate({'x':200},2000);
}); 
```

我试过这个，但这不起作用......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-27T03:51:33.890

没有插件是可能的，但它涉及一个技巧。问题是这`x`不是一个 css 属性而是一个属性，而[jQuery.animate](http://api.jquery.com/animate/)只为 css 属性设置动画。但是您可以使用该`step`参数为动画指定您自己的自定义行为。

`foo`是一个不存在的*属性*，我们可以在阶跃函数中使用它的动画值。

```
$('#btn').click(function(){
    const $image = $('#dice_1');
    $image.animate(
        { 'foo': 200 },
        {
          step: (foo) => $image.attr('x', foo),
          duration: 2000
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T17:57:10.890

jQuery animate 用于动画 HTML 元素。对于 SVG，你必须尝试[jQuery SVG](http://keith-wood.name/svg.html)插件。请点击链接 - [http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

# css - CSS Sprites 和选项卡菜单导航样式问题

> ID：11789666
> 
> 赞同：2
> 
> 时间：2012-08-03T05:16:23.697
> 
> 标签：css

我目前正在为我的标签菜单使用精灵图像。问题是图像正在显示，但每个选项卡的标题根本没有出现。如何将图像和标题很好地放置在选项卡内？[例子](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

这就是我的目标：

![在此处输入图像描述](../Images/553b622e4ed3c588bc86b6476994e1a9.png)

这就是我得到的：

![在此处输入图像描述](../Images/cd4689551810212ebd3cecc1b683ece9.png)

**HTML**

```
<ul>
<li><a href="#tab-1" class="pngIcon sprite-category">1\. Category</a></li>
<li><a href="#tab-2" class="pngIcon sprite-description">2\. Description</a></li>
<li><a href="#tab-3" class="pngIcon sprite-images">3\. Images</a></li>
<li><a href="#tab-4" class="pngIcon sprite-contact">4\. Contact Info</a></li>
<li><a href="#tab-5" class="pngIcon sprite-final">5\. Final</a></li>
</ul> 
```

**张贴标签.css**

```
.pngIcon {
    padding: 0;
    background-image: url(http://webprolearner.ueuo.com/dropdown-menu/images/tabdetails.png);
    background-repeat: no-repeat;
    height: 32px;
    line-height: 32px;
    text-indent: 40px;
    margin: 0 5px;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:32:49.923

## 只需删除您的 css 文件中的选择器`width`：`.sprite-*`

**你的CSS：**

```
.sprite-final{  background-position: 0 0; width: 32px; height: 32px; } 
.sprite-category{ background-position: 0 -82px; width: 32px; height: 32px; } 
.sprite-contact{ background-position: 0 -164px; width: 32px; height: 32px; } 
.sprite-description{ background-position: 0 -246px; width: 32px; height: 32px; } 
.sprite-images{ background-position: 0 -328px; width: 32px; height: 32px; } 
```

**工作CSS：**

```
.sprite-final{  background-position: 0 0; height: 32px; } 
.sprite-category{ background-position: 0 -82px; height: 32px; } 
.sprite-contact{ background-position: 0 -164px; height: 32px; } 
.sprite-description{ background-position: 0 -246px; height: 32px; } 
.sprite-images{ background-position: 0 -328px; height: 32px; } 
```

## 最终结果：[**dabblet 上的演示**](http://dabblet.com/gist/3244655)

![在此处输入图像描述](../Images/00826e5e0865d71807e477b4933f5aaf.png)

**CSS 代码：（**我做了一些重构）

```
li a {
    padding: 0;
    background-image: url(http://webprolearner.ueuo.com/dropdown-menu/images/tabdetails.png);
    background-repeat: no-repeat;
    height: 32px;
    line-height: 32px;
    text-indent: 40px;
    padding: 0 5px;
    display: block;
    text-decoration: none;
}

.nav-category    { background-position: 0px -85px; }
.nav-description { background-position: 0px -248px; }
.nav-images      { background-position: 0px -327px; }
.nav-contact     { background-position: 0px -164px; }
.nav-final       { background-position: 0px 0px; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T05:25:09.483

在您的 CSS 中添加一个`width: auto`（感谢 Kwon 指出问题）。[jsFiddle](http://jsfiddle.net/HdekX/)的工作示例。

```
.pngIcon {
    ...
    width: auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:19:25.093

不声明元素的宽度似乎是您的直接问题。

# jquery - 加载问题以在 jqgrid 中设置所有过滤器

> ID：11789670
> 
> 赞同：1
> 
> 时间：2012-08-03T05:16:42.707
> 
> 标签：jquery, jqgrid

我正在尝试将存储在我的数据库中的过滤器设置为加载时的网格。这正在工作，但我对性能和这样做的方式不满意..

问题是我将搜索参数插入到网格中，之后我需要使用 triggerToolbar() 方法。

问题是我还想设置网格的页面和排序顺序。这是进行两次“重新加载”，我认为应该有可能只有一个..

我的代码：

```
gridDOM.triggerToolbar();

setTimeout(function () {
    $("#Jqgrid").jqGrid("setGridParam", { sidx: sortnameFilter, sortorder: sortorderFilter, rowNum: rownumFilter, page: pageFilter }).trigger("reloadGrid")
}, 400); 
```

由于 triggerToolbar 发布了一个 ajax 帖子，我需要将另一个重新加载设置为超时。在考虑稳定性时，我也不喜欢这样做。

有人对此有任何解决方案吗？

**编辑：** 代码在 loadComplete 事件中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:35:45.857

如果`triggerToolbar`发出 ajax 请求。`reload`在回调中调用你的`success`而不是使用`setTimeout`.

```
$.ajax({
  url : '',
  success : function(data){
     //do things
     //call reload
  }
}); 
```

# android - 旋转图像时，它会改变图像的实际位置

> ID：11789679
> 
> 赞同：1
> 
> 时间：2012-08-03T05:17:17.733
> 
> 标签：android, matrix, bitmap, image-rotation

我尝试使用 Matrix 旋转位图，如果角度是 90 度而不是 90 度，则它的工作正常，位图位置正在改变。

代码片段：

```
 Matrix matrix = new Matrix();
            matrix.postRotate(90);
            Bitmap map= Bitmap.createBitmap(resizedBitmap, 0, 0,resizedBitmap.getWidth(), resizedBitmap.getHeight(),matrix, true); 
```

你们能告诉我如何在不改变图像位置的情况下旋转图像吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:37:10.067

您好，如果您使用的是 ImageView，我建议您为 ImageView 设置矩阵，而不是每次都创建一个新的位图

```
 Matrix matrix=new Matrix();
     img.setScaleType(ScaleType.MATRIX);   
     int height =  img.arrow.getHeight();
        int width =  img.arrow.getWidth();
    matrix.postRotate((float) angle, width/2,height/2);
     img.setImageMatrix(matrix); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T07:25:34.330

这是唯一一个为我工作的

```
private Bitmap rotateBitmap(Bitmap bitmap, int rotationAngleDegree){

        int w = bitmap.getWidth();
        int h = bitmap.getHeight();

        int newW=w, newH=h;
        if (rotationAngleDegree==90 || rotationAngleDegree==270){
            newW = h;
            newH = w;
        }
        Bitmap rotatedBitmap = Bitmap.createBitmap(newW,newH, bitmap.getConfig());
        Canvas canvas = new Canvas(rotatedBitmap);

        Rect rect = new Rect(0,0,newW, newH);
        Matrix matrix = new Matrix();
        float px = rect.exactCenterX();
        float py = rect.exactCenterY();
        matrix.postTranslate(-bitmap.getWidth()/2, -bitmap.getHeight()/2);
        matrix.postRotate(rotationAngleDegree);
        matrix.postTranslate(px, py);
        canvas.drawBitmap(bitmap, matrix, new Paint( Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG | Paint.FILTER_BITMAP_FLAG ));
        matrix.reset();

        return rotatedBitmap;
    } 
```

# javascript - JQuery乘以表行的输入值

> ID：11789683
> 
> 赞同：1
> 
> 时间：2012-08-03T05:17:33.523
> 
> 标签：javascript, jquery, model-view-controller, jquery-selectors

我想通过将单个行的输入相乘来计算每一行的总价格，然后最后通过使用 JQuery 将 Total 列的所有总值相加来计算总计。当我输入值时，我只会让第一行显示总计。任何帮助将不胜感激。

```
 <script type="text/C#" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
         $(document).ready(function () {
            $(".txtMult").each(function () {
                $(this).keyup(function () {
                    multInputs();
                });
            });
           });

           function multInputs() {
               var mult = 0;
               $(".txtMult").each(function () {
                   var $val1 = $('#val1').val();
                   var $val2 = $('#val2').val();
                   var $total = ($val1 * 1) * ($val2 * 1)
                   $('#multTotal').text($total);
               });
           }

    </script>
    @using (@Html.BeginForm())
    {
        <table>
        <tr>
            <th>
                Quanity
            </th>
            <th>
                Unit Price
            </th>
            <th>
                Total
            </th>
        </tr>
        @for (int i=0; i < 5; i++)
        {

            <tr>
                <td>
                    <input class ="txtMult" name="txtEmmail" id="val1"  />
                </td>
                <td>
                    <input class ="txtMult" name="txtEmmail" id="val2"/>
                </td>
                <td>
                    <span id="multTotal">0.00</span>
                </td>
            </tr>

    }
<tr>
    <td colspan="3" align="right">
        Grand Total# <span id="grandTotal">0.00</span>
    </td>
</tr>
    </table> 
    } 
```

![在此处输入图像描述](../Images/6e0cca680333a81099fedf59de71b503.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T05:29:02.213

您的 html 无效：该`id`属性应该是唯一的，但您在每一行中重复相同的三个 id。解决此问题的最简单方法是将输入更改为 have`class="val1"`和`class="val2"`而不是`id="val1"`and ``id="val2"`，并将行总数更改为 have `class="multTotal"`。我还将`txtMult`类移动到每个带有输入的 tr 元素，以便于选择这些行：

```
 <tr class="txtMult">
            <td>
                <input name="txtEmmail" class="val1"  />
            </td>
            <td>
                <input name="txtEmmail" class="val2"/>
            </td>
            <td>
                <span class="multTotal">0.00</span>
            </td>
        </tr> 
```

...然后将 jQuery 代码中的选择器更改为*在当前行的上下文中*按类选择。另请注意，您不需要`.each()`循环将`.keyup()`处理程序绑定到与您的选择器匹配的元素，只需使用`$("someselector").keyup()`：

```
 $(document).ready(function () {
       $(".txtMult input").keyup(multInputs);

       function multInputs() {
           var mult = 0;
           // for each row:
           $("tr.txtMult").each(function () {
               // get the values from this row:
               var $val1 = $('.val1', this).val();
               var $val2 = $('.val2', this).val();
               var $total = ($val1 * 1) * ($val2 * 1);
               // set total for the row
               $('.multTotal', this).text($total);
               mult += $total;
           });
           $("#grandTotal").text(mult);
       }
  }); 
```

工作演示：http: [//jsfiddle.net/nnnnnn/5FpWC/](http://jsfiddle.net/nnnnnn/5FpWC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:55:52.387

让我们在表中添加一个类`in`。

首先将更改事件添加到表的所有输入。在更改输入字段时，将同一行的所有输入相乘并更新`multTotal`和`grandTotal`

```
$(function(){
            $('.in input').change(function(){
                var p=$(this).parent().parent() //get the parent of changed input
                var m=p.find('input.txtMult') //find all input of the row
                var mul=parseFloat($(m[0]).val()*$(m[1]).val()).toFixed(2) //multiply them
                var res=p.find('.multTotal') // get corresponding multTotal
                res.html(mul); //show the result
                var total=0;
                $('.in .multTotal').each(function(){
                    total+=parseFloat($(this).html())
                }) //calculate grand total
                $('.in #grandTotal').html(parseFloat(total).toFixed(2)) //show grand total
            });
        }) 
```

[在jsfiddle](http://jsfiddle.net/sarowar/Hvsu7/)检查这个

如果需要处理超过 2 个字段的变化

```
var mul=parseFloat($(m[0]).val()*$(m[1]).val()).toFixed(2) //multiply them 
```

到

```
var mul=1;
$(m).each(function(){
  mul*=$(this).val()
})
mul=parseFloat(mul).toFixed(2) 
```

# iphone - 你如何为自己做一个segue？

> ID：11789691
> 
> 赞同：0
> 
> 时间：2012-08-03T05:18:16.220
> 
> 标签：iphone, ios, xcode, uiviewcontroller, segue

我有一个游戏，当你完成一个关卡时。您可以选择重播该级别。所以我以编程方式创建了一个重播级别按钮，当关卡完成时出现，我告诉它在 touchupinside 时执行选择器重播级别。在我的重播关卡方法中，我基本上只是要对关卡执行一个segue，以便基本上重置该vc中的所有内容。但是，通常当我以编程方式执行 segue 时，我会将 vc segue 设置为另一个 vc，并给它一个标识符并执行它。然而，我到底怎么能从我的 vc 到它自己的 segue 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:29:25.910

您不应该尝试通过“自我隔离”来重置视图控制器（这实际上意味着取消分配和重新分配 VC 的内存），您应该做的是重置主游戏循环并将所有值设置回某个默认值该级别重新启动。从纯粹的技术角度来看，这也根本不可能。导航控制器（考虑到您可以成功更改视图控制器，我将假设您正在使用它）管理视图控制器堆栈，当它们发生突变时，要么解除分配，要么保留指向其视图控制器的指针。实际上，您会要求数组中的 VC 对象自动刷新自身，而不会出现一些讨厌的内存管理问题。

# gcc - 在 ubuntu 下使用 gcc 与 intel mkl 的奇怪链接错误

> ID：11789695
> 
> 赞同：1
> 
> 时间：2012-08-03T05:18:41.457
> 
> 标签：gcc, intel-mkl

我想在一些优化问题中使用 intel mkl，所以我使用 intel example 来测试它。测试.cpp：

```
 #include <mkl.h>
    #include <stdio.h>
    typedef struct {
        double re;
        double im;
    } complex16;

    extern "C" void cblas_zdotc_sub(int, const void*, int, const void*, int, void*);

    #define N 5

    int main()
    {
        int n, inca = 1, incb = 1, i;
        complex16 a[N], b[N], c;
        n = N;

        for(i = 0; i < n; i++) {
            a[i].re = (double)i;
            a[i].im = (double)i * 2.0;
            b[i].re = (double)(n - i);
            b[i].im = (double)i * 2.0;
        }

        cblas_zdotc_sub(n, (void*)a, inca, (void*)b, incb, (void *)&c);
        printf("The complex dot product is: ( %6.2f, %6.2f) ", c.re, c.im);
        return 0;
    } 
```

当我用 "g++ -I/home/l/intel/mkl/include -w test.cpp - L"/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64" "/home/l/ 编译它时intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64"/libmkl_intel_lp64.a -Wl,--start-group"/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64"/libmkl_intel_thread.a"/home/ l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64"/libmkl_core.a -Wl,--end-group -L"/home/l/intel/composer_xe_2011_sp1.6.233/mkl/../compiler/lib/intel64 “ -liomp5 -lpthread -lm -L/home/l/intel/mkl/lib/intel64 -o 模板”，一切都很好...

但是如果我将编译步骤和链接步骤分开，它会给我一个链接错误：

test.cpp:(.text+0x10b): undefined reference to `cblas_zdotc_sub'

我用来编译和链接的命令是：

编译：

g++ -I/home/l/intel/mkl/include -w -c test.cpp -o test.o

关联：

g++ -I/home/l/intel/mkl/include -w -L"/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64""/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib /intel64"/libmkl_intel_lp64.a -Wl,--start-group "/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64"/libmkl_intel_thread.a "/home/l/intel/composer_xe_2011_sp1.6.233/mkl /lib/intel64"/libmkl_core.a -Wl,--end-group -L"/home/l/intel/composer_xe_2011_sp1.6.233/mkl/../compiler/lib/intel64" -liomp5 -lpthread -lm ./ test.o -L/home/l/intel/mkl/lib/intel64 -o 模板

我正在使用 ubuntu 12.04、gcc 4.6.3、intel composer_xe_2011_sp1.6.233。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:26:45.093

> g++ ... "/home/l/intel/composer_xe_2011_sp1.6.233/mkl/lib/intel64"/libmkl_intel_lp64.a ... -liomp5 -lpthread -lm ./test.o ...

此命令行不正确。链接行上的对象和库的顺序很[重要](http://webpages.charter.net/ppluzhnikov/linker.html)，而且你得到的顺序与它应该是完全相反的。移到图书馆`test.o` *之前*，它会起作用（TM）。

# ios - iOS：报亭通知。需要免费订阅吗？

> ID：11789697
> 
> 赞同：2
> 
> 时间：2012-08-03T05:19:05.703
> 
> 标签：ios, in-app-purchase, subscription, newsstand-kit

我正在创建一个 ios 报亭应用程序，并且对订阅有疑问。我对报摊推送通知有点困惑。

我计划在有新问题时向设备发送报亭推送通知。我需要在应用内设置免费订阅吗？

关于是否所有报亭应用程序都需要至少一个订阅，我在网上读到了不同的观点。我看不到创建免费订阅的必要性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:11:00.543

Apple 的硬性要求是所有 NS 应用程序必须至少有一个订阅。如果您的所有内容都是免费的，您需要在 iTunes 中创建“免费订阅”。您的应用程序应该提供一种方式，以便用户可以订阅您应用程序中的内容。建议 NS Push 通知仅在用户订阅时才开始下载。

# ubuntu - 如何在 rsync 中限制每秒数据包？

> ID：11789698
> 
> 赞同：0
> 
> 时间：2012-08-03T05:19:09.510
> 
> 标签：ubuntu, rsync

最近，我主机的防火墙开始阻止每一个超过每秒 9000 个数据包的 IP。我在我的 Ubuntu 服务器中设置了一个 cron 作业，它将使用 rsync 进行备份并将其推送到远程服务器。最近，在运行此备份时，它开始超出限制，因此我的服务器被阻止。所以我的问题是，如何将 rsync 限制为每秒 9000 个数据包？

PS：我使用 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:29:46.820

听起来是时候用你的钱投票，把你的生意带到别处了（并确保他们知道*为什么*）。同时 ...

我认为不可能知道特定传输将有多少数据包：这取决于数据被细分的程度，这取决于许多因素，包括随机机会，我认为。

Rsync 确实提供了带宽限制功能，我建议您尝试一下，看看您是如何开始的：

例如，这会将 rsync 限制为 500 KByte/sec，大约是 5Mbits/s：

```
rsync --bwlimit=500  ...... 
```

（是的，我知道一个字节中有 8 位，但这并没有考虑到网络开销。）

您可以首先将其限制为您假定的最大带宽的一半。如果这行得通，那么您最多可以增加四分之三。如果这不起作用，请尝试两者之间的一半，依此类推，直到找到最大可靠数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:36:52.033

就像 ams 指出的那样，
您只能限制传输的带宽，而不是数据包数，

--bwlimit=KBPS 应用移动平均来限制产生的吞吐量，因此您只会注意到它对于比您的可用带宽大得多的传输。

从[手册](http://jimmyg.org/blog/2007/rsync-basics.html)页，

> 数据块被发送，然后如果 rsync 确定传输太快，它会在发送下一个数据块之前等待。结果是等于指定限制的平均传输速率。）

看看[涓涓细流](http://monkey.org/~marius/pages/?page=trickle)，它似乎采用了更精细的算法来体现这个概念。

# javascript - 我试图了解familyecho网站的js，但我没有找到应该在这里的代码

> ID：11789700
> 
> 赞同：-2
> 
> 时间：2012-08-03T05:19:13.543
> 
> 标签：javascript, family-tree

在familyecho网站，当你点击我框时，必须有一个点击触发器，我试图找到这个功能，但我在任何地方都没有找到它，谁能告诉我它在哪里，最好告诉我如何找出来。 [http://www.familyecho.com/](http://www.familyecho.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:34:40.470

您需要“tree.js”文件。找到 TCT 函数并通过函数 ESP、EHW 和 SS 翻转它，使用 GE 函数隐藏上面的弹出栏。

# asp.net-mvc - 图像请求的图像处理程序在 ASP .NET MVC 中失败

> ID：11789704
> 
> 赞同：2
> 
> 时间：2012-08-03T05:20:06.873
> 
> 标签：asp.net-mvc, image, httprequest

我们已将图像上传到 CDN 并从那里请求图像。我的问题是，我需要编写一个图像处理程序来检查请求的图像在 CDN 中是否可用，并且由于找不到图像或 CDN 关闭等其他错误，请求失败，我必须将该图像请求重定向到本地图像地点。我怎样才能做到这一点？

例如，如果请求图像，

“http://cdn.images.net/content/images/image1.png”这个请求失败，那么我应该将该请求重定向到“http://www.example.com/content/images/images1.png”。

我如何使用图像处理程序来处理这个问题？

问候， 卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:31:37.807

您可以为此目的使用 HTTP HEAD 请求。通过这样做，您只会获得 HTTP 标头作为响应。这是一个简单的例子：

```
public bool ImageExists(string imageUri)
{
    HttpWebRequest request = (HttpWebRequest) WebRequest.Create(imageUri);
    request.Method = "HEAD";

    try
    {
        HttpWebResponse response = (HttpWebResponse) request.GetResponse();

        if (response.StatusCode == HttpStatusCode.OK)
            return true;
        else
            return false;  
    }
    catch
    {
        return false;
    } 
} 
```

...这就是它的名称：

```
if (ImageExists(firstUri) 
{
    // Download from http://cdn.images.net...
}
else
{
    // Download from http://www.example.com...
} 
```

*检查响应的 mime 类型是否为image/png*也可能很有用，具体取决于您的请求在远程服务器上的处理方式。

# wordpress - Magic Fields 2 自定义帖子类型消失了？

> ID：11789705
> 
> 赞同：1
> 
> 时间：2012-08-03T05:20:08.407
> 
> 标签：wordpress, custom-post-type

有人遇到这个问题吗？您可以看到突出显示的帖子类型“学习文明”，但它似乎已经从魔法领域菜单中消失了......我已经卸载并重新安装了插件，认为这是一个小故障，但设置保持不变 - 非常奇怪。

在此处查看图片：http: [//qikr.co/tqbxs](http://qikr.co/tqbxs)

# sql-server - SQL Server 在 SP 内执行 SP 并使用内部 SP 调用的结果

> ID：11789707
> 
> 赞同：0
> 
> 时间：2012-08-03T05:20:19.967
> 
> 标签：sql-server, tsql, stored-procedures

我需要在另一个存储过程中执行一个存储过程，并将内部存储过程的结果用于外部存储过程。

简单如下。

**SP1**

```
CREATE PROCEDURE spExternal
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @intInternalResult INT

    SET intInternalResult= EXEC spInternal
END 
```

**SP 内部**

```
CREATE PROCEDURE spInternal 
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 1+2
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:29:04.767

我的朋友，您不能为未返回的变量赋值。您可以编写一个函数来完成存储过程 spInternal 的工作，该过程将返回一个值。否则你可以这样做：

```
CREATE PROCEDURE spInternal 
AS
BEGIN

    SELECT 1+2
END

CREATE PROCEDURE spExternal
AS
BEGIN

    DECLARE @intInternalResult INT
    CREATE TABLE #temp
    (
        Rslt int
    )
    INSERT INTO #temp (Rslt)
    EXEC spInternal

    SELECT @intInternalResult = Rslt
    FROM #temp
    DROP TABLE #temp
    PRINT @intInternalResult
END

EXEC spExternal 
```

还有一件事，下次别忘了把@放在变量前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:05:50.950

如果您的存储过程只返回一个整数值，请使用`RETURN`

```
create proc pInternal
as
begin
    return 2
end 
```

然后您可以访问结果为

```
exec @intInternalResult = pInternal 
```

如果要返回非整数或多个值，请使用`OUTPUT`参数

# sql - 替换 SQL Server 中的字符串

> ID：11789709
> 
> 赞同：1
> 
> 时间：2012-08-03T05:20:30.777
> 
> 标签：sql, sql-server, string, function

我在下面有一个函数还有输出，它基本上是在字符串中找到特定的字母并将它们替换为其他一些字母，例如在这个字符串中`abcde`我想用 替换`de`，`xy`所以我给出`@input = abcde`,`@find = de`和`@replace = xy`，所以我得到了输出as `abcxy`，但是如果假设我有一个字符串`hat`并且我想用 and 替换and ，`h`我该如何实现呢？`t``m``c`

而且我必须在函数中不使用 while 循环的情况下找到解决方案

```
create  FUNCTION dbo.replace_letters
(
  @Input AS VarChar(1000),
  @Find AS VarChar(100),
  @Replace AS VarChar(100)
)
RETURNS VarChar(1000)
AS
BEGIN
   SELECT @Input = REPLACE(@Input, @Find,@Replace)

   return @input
end

--run
select dbo.replace_letters ('abcde', 'ed', 'dc') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:29:05.567

最简单的方法是第二次运行该函数:-)

```
select dbo.replace_letters(dbo.replace_letters('hat', 'h', 'm'), 't', 'c') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:00:23.693

只需运行

选择替换（替换（'HAT'，'H'，'M'），'T'，'C'）。

SQL Server 提供了替换功能，那么为什么要编写自己的功能来完成相同的任务呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:47:41.313

试试这个：它将替换@Find的第一个字符并将其替换为@Replace的第一个字符和@Find的第二个字符并将其替换为@Replace的第二个字符。

```
CREATE  FUNCTION dbo.replace_letters
(
  @Input AS VARCHAR(1000),
  @Find AS VARCHAR(100),
  @Replace AS VARCHAR(100)
)
RETURNS VARCHAR(1000)
AS
BEGIN
   SELECT @Input = REPLACE(REPLACE(@Input, SUBSTRING(@Find,1,1),SUBSTRING(@Replace,1,1)),SUBSTRING(@Find,2,1),SUBSTRING(@Replace,2,1))
   RETURN @input
END

 SELECT dbo.replace_letters('hat','ht','mc')
 SELECT dbo.replace_letters('hahtaahtat','ht','xy') 
```

答案是：

苹果电脑

呸呸呸

# string - Perl：选择性字符串替换

> ID：11789717
> 
> 赞同：0
> 
> 时间：2012-08-03T05:21:08.640
> 
> 标签：string, perl, substitution

我有一个包含前缀为 A_B_ 的字符串的文本文件。

例子：`A_B_Monday`

我想替换所有出现的`A_B_*`with ，`X_Y_*`除非 * is `C`。

所以所有是`A_B_*`但不是的字符串都`A_B_C`必须替换为`X_Y_*`.

这应该如何在 perl 中完成？

编辑：1 上面的 * 是一个字符串。所以所有不是 A_B_Geneva 的 A_B_* 都应该替换为 X_Y_NewYork。perl -pi.bak -e 's/^A_B_(!Geneva)/X_Y_/g;' File.Txt 似乎不起作用。我在草莓 Perl 上。

更新：这对我有用 perl -i.bak -pE "s/A_B_(?!Geneva)/USB_EP_/g" File.Txt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:25:52.957

也许：</p>

```
s/^A_B_(?!C)/X_Y_/; 
```

或者：

```
s/^A_B_(?!C)/X_Y_/i; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:42:57.027

```
s/^A_B_(?!Type\z)/X_Y_/; 
```

没有`\z`,`A_B_Typed`将不会更改`X_Y_Typed`为应有的状态。

您可以按如下方式使用它：

```
perl -pi.bak -pe"s/^A_B_(?!Type\z)/X_Y_/g" file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:25:51.090

```
$line =~ s/^A_B_([^C])/X_Y_$1/; 
```

您应该为文件的每一行执行此操作。

# android - 适用于 Android 的音频过滤器

> ID：11789720
> 
> 赞同：1
> 
> 时间：2012-08-03T05:21:16.657
> 
> 标签：android, filter

我需要 android 中的音频过滤器。谷歌是否为 android 开发了任何过滤器（低、高或带通）。如果是，请提供一些链接或信息，或者如果不是，请告诉我如何创建过滤器的替代方法在android中或者如何通过ndk在android中使用C/C++等原生语言的过滤器。
对不起这个问题，我已经在谷歌搜索并没有找到任何答案。所以我在这里问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:29:31.243

有用于播放的 AudioEffect API，其中包括例如均衡器。但我不能 100% 确定是否所有均衡器实现都支持修改单个频段，或者是否某些仅提供一堆预设（流行、摇滚等），您可以在它们之间切换。频带的数量在不同的实现之间也可能不同。

对于录音，Android 4.1 (Jellybean) 中有一个新的 API，它允许您添加他们所谓的预处理效果。但是，默认情况下没有可用的均衡器。只是一个回声消除器、自动增益控制器和一个降噪器。

另一种可能性是您自己在您的应用程序中进行所有处理（在 Java 代码中或在您的一个本机库中）。在 PCM 流上运行 C 过滤器实现，然后通过 OpenSL ES 播放它，或者通过 JNI 将处理后的流传递给 Java 并通过 AudioTrack 播放。使用这种方法，如果您需要使用压缩流，您必须将必要的编解码器与您的应用程序捆绑在一起，并自己进行编码/解码。

# telerik - Telerik MVC Charts 在同一页面中一次只支持一个图表吗

> ID：11789721
> 
> 赞同：0
> 
> 时间：2012-08-03T05:21:18.267
> 
> 标签：telerik, telerik-mvc, telerik-charting

这是我的源代码。我正在使用 Telerik 控件试用版。当我尝试 graphs 时，它一次只显示一个。Telerik 是否支持同一页面中的多个图表？

**我的索引页面**

```
<link href="@Url.Content("~/Content/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/examples-offline.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo.dataviz.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script>
<script src="@Url.Content("~/Scripts/console.min.js")"></script>
<script src="@Url.Content("~/Scripts/prettify.min.js")"></script>
    <div style="width: 30%; height: 10%">
        @Html.Partial("_PieSeries")
    </div>
    Hi
    <br />
    <div style="width: 30%; height: 10%">
        @Html.Partial("_BarSeries")
    </div> 
```

_Pie系列

```
<div  >
    @(Html.Kendo().Chart()
        .Name("chart")
        .Title("Weekly Enagagement Allocation Status ")
        .Legend(legend => legend
            .Position(ChartLegendPosition.Bottom)
        )
        .Series(series =>
        {
            series.Pie(new dynamic[] {
                new { category = "Mumbai_IND_DC_A112", value = 12 },
                new { category = "Bejing_CHI_DC_A223", value = 68 },
                new { category = "Redmount_US_DC_B221", value = 49 }, 
                new { category = "Sydney_AUS_DC_B1989", value = 37 },              
                new { category = "DC_US_B1341", value = 17 },              
                new { category = "KPMG_US_DC_B1099", value = 57 },              
                new { category = "KPMG_CHI_DC_U9489", value = 67 },              
                new { category = "DI_US_DC_A1369", value = 87 },              
                new { category = "MIC_UK_DC_B1709", value = 27 },             
                new { category = "KPMG_UK_DC_B6990", value = 37 }                
            });
        })
        .Tooltip(tooltip => tooltip
            .Visible(true)
            .Format("{0}%")
        )
    )
</div> 
```

**_酒吧系列**

```
<div  >
    @(Html.Kendo().Chart()
        .Name("chart")
        .Title("Internet Users")
        .Legend(legend => legend
            .Position(ChartLegendPosition.Bottom)
        )
        .Series(series => {
            series.Column(new double[] { 15.7, 16.7, 20, 23.5, 26.6 }).Name("World");
            series.Column(new double[] { 67.96, 68.93, 75, 74, 78 }).Name("United States");
        })
        .CategoryAxis(axis => axis
            .Categories("2005", "2006", "2007", "2008", "2009")
        )
        .ValueAxis(axis => axis
            .Numeric().Labels(labels => labels.Format("{0}%"))
        )
        .Tooltip(tooltip => tooltip
            .Visible(true)
            .Format("{0}%")
        )
    ) 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:06:14.333

我认为您需要做的就是更改其中一个图表的 Name 属性。每个图表都需要有一个唯一的名称。

```
@(Html.Kendo().Chart()
    .Name("chart1")
    .Title("Weekly Enagagement Allocation Status ")

@(Html.Kendo().Chart()
    .Name("chart2")
    .Title("Internet Users") 
```

如果两个图表具有相同的名称，则只会显示一个图表。

# python - 无法访问 GAE 的本地管理控制台

> ID：11789723
> 
> 赞同：3
> 
> 时间：2012-08-03T05:21:48.687
> 
> 标签：python, google-app-engine

我们正在 GAE 上为 golang 开发一个 Web 应用程序。我们的程序通过了编译，我们可以在本地机器上访问应用程序的内容。但是我们无法访问本地管理控制台并收到如下错误。我的机器是 Mac OSX 10.8，GAE/G 版本是 1.7.0。

有人有想法吗？

> 回溯（最近一次调用）：文件“/usr/local/google_appengine/google/appengine/ext/webapp/_webapp25.py”，第 701 行，**调用** handler.get(*groups) 文件“/usr/local/google_appengine /google/appengine/ext/admin/ **init** .py”，第 1372 行，在获取 self.generate('datastore.html', values) 文件“/usr/local/google_appengine/google/appengine/ext/admin/ **init**。 py”，第 238 行，生成“xsrf_token”：get_xsrf_token()，文件“/usr/local/google_appengine/google/appengine/ext/admin/ **init**.py”，第 114 行，get_xsrf_token for i in range(6)] 文件“/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/random.py”，第 191 行，在 randrange ValueError：randrange() 的空范围（2147483648，-2147483649，-4294967297）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:06:27.280

我在 OSX 10.8 + Python 2.5.6 + GAE 1.7.0 上也遇到了这个问题

我按照以下进行了更改，它对我有帮助：

[http://code.google.com/p/googleappengine/issues/detail?id=7885](http://code.google.com/p/googleappengine/issues/detail?id=7885)

# php - 另类反框架克星

> ID：11789727
> 
> 赞同：0
> 
> 时间：2012-08-03T05:22:04.860
> 
> 标签：php, javascript, html, iframe

我一直在寻找一段时间并尝试了几种反框架破坏代码，但它们都没有真正起作用。所以我的问题是，我可以让 PHP 或 JavaScript 扫描所有 url 并查看它是否是重定向并获取重定向 url 并使用它而不是原始 url 吗？我正在使用一个 API，并且我正在为它提供给我的 iframe 链接，并且 URL 不断将我的用户重定向到他们的网站，而不是将他们的东西保存在我的框架中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:56:09.847

如果一个网站不想被框起来，你就做不到（除非你在浏览器中关闭了 javascript）。

网站有权确定它是否超出框架，如果框架或允许则拒绝显示其内容。

有一些方法可以尝试对抗框架破坏，这会变成某种技术之战，但如果网站愿意，它可以简单地使其内容不可见。如果一个网站不想被使用框架，它可以阻止它。毕竟是他们的内容。他们应该有权决定如何显示或不显示。

在 2018 年的现代浏览器中，X-FRAME-OPTIONS 标头似乎是防止框架的最可靠方法。这篇文章[点击劫持防御表](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet)提供了对旧版浏览器的各种其他方法的讨论。旧版浏览器（我主要谈论的是 IE）有一些弱点，允许攻击者击败某些帧破坏技术。

# rest - Erlang/OTP：RESTful 应用程序中的授权/身份验证

> ID：11789729
> 
> 赞同：5
> 
> 时间：2012-08-03T05:22:21.693
> 
> 标签：rest, erlang, authorization, restful-authentication, erlang-otp

我正在设计一个 Erlang/OTP 应用程序，它将通过 RESTful API 公开其服务 (SOA)。

构成后端的服务将是数据库服务、价格计算服务等。

客户端可以有多种类型：Web 客户端、移动客户端、Asterisk 服务器客户端（需要在数据库服务中查找用户记录），甚至还有我不打算拥有且还不知道的客户端。客户端会以不同的方式使用 RESTful API：有些会使用所有服务，有些会只使用部分服务（SOA 方式）。

我主要关心的是身份验证/授权。

![RESTful Web 应用程序](../Images/7f5768392969eb9aa40ef5583b3397a5.png)

我不能使用 Ruby on Rails 的内置身份验证/授权，因为 Web 客户端只是许多可能的客户端中的一个客户端，它们将通过 RESTful API 使用应用程序。

所以，我的问题是：

*   对于预期与许多不同客户端一起使用的典型 RESTful Web 应用程序，身份验证/授权的一般概念是什么？
*   在 RESTful Web 应用程序中授权/认证最实用的软件设计模式是什么？
*   您可以推荐哪些 Erlang/OTP 开源软件库来为此类应用程序实现身份验证/授权？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:09:17.403

只需检查其他人是如何做到这一点的，例如在这篇文章中：[Facebook 上的身份验证](https://developers.facebook.com/docs/authentication/)。

一般来说，这个想法是客户端调用一个单独的 API 调用，以便向系统验证自己的身份。系统可以接受任何客户或仅接受来自已注册客户列表的客户。一旦系统验证了客户端，它就会发出一个特殊的令牌，然后客户端将在所有 API 调用中使用该令牌。在 Facebook 文档中，它被称为访问令牌。如果客户端尝试在没有有效令牌的情况下调用 API，系统会将此报告为错误，并且在某些情况下可能会阻止客户端。

在 REST 中，令牌可以简单地作为 URL、POST 中的另一个参数或直接作为 JSON 中的附加字段发送。以 POST 或 JSON 形式发送它可能是最好的，因为它可以保持 URL 干净（并且不会与可能基于 URL 的任何缓存冲突）。

这是这个想法的优点，但通常需要考虑更多的事情。例如，令牌应该难以猜测，因此客户端无法在未通过系统身份验证的情况下重新创建有效令牌。此外，如果在指定时间段内没有调用 API，系统可能需要使令牌过期。

要回答您问题的最后一部分，需要指出一些库：

*   [erlang:phash2](http://www.erlang.org/doc/man/erlang.html#phash-2)或[加密](http://www.erlang.org/doc/man/crypto.html)库可用于生成不易猜到的唯一令牌
*   [Webmachine](http://wiki.basho.com/Webmachine.html)作为一个优秀的框架，或者他们喜欢称之为 REST 工具包，用于在 Erlang 中创建 REST 接口
*   API 调用背后的逻辑可以在 Erlang 中实现并直接从 web 服务器提供服务，例如 inets 或 yaws，或者它可以使用像 Nitrogen 或 Chicago Boss 这样的 web 框架来实现。检查这个[Erlang Web 框架](https://github.com/evanmiller/ChicagoBoss/wiki/Comparison-of-Erlang-Web-Frameworks)列表。

# sqlalchemy - SQLAlchemy，我什么时候提交？

> ID：11789735
> 
> 赞同：2
> 
> 时间：2012-08-03T05:22:45.580
> 
> 标签：sqlalchemy

我想提高 SQLAlchemy 的性能，在单个 API 调用中，我到处都有提交，我是否要聚合这些会话添加，并在 API 调用结束时进行提交？还是我到处都这样做有关系吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:58:35.613

提交应该在您想要保存所有这些记录（对象）或不保存的相关调用的逻辑块之后发生。如果一个失败，你希望他们都失败（回滚）。另一方面，将不相关的调用组合到一个事务中可能会导致意外的副作用，发生意外的错误，并且当它真的应该保存得很好时，你不打算的东西会被回滚，这不是你正在做的事情但我以前见过这个性能。

无论如何，通常情况下，我在每次 API 调用结束时都有一个提交，因为我认为 API 调用是全有或全无的交易，我怀疑如果我在某处遇到唯一键违规时我保存了一半的数据，调用者会不会高兴在中间。

我在 SA 文档中找到了这个页面，处理会话解释了如何布置我的会话、事务等。 [上下文会话的生命周期](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html?highlight=web#lifespan-of-a-contextual-session)

# css - 主题申请指南

> ID：11789737
> 
> 赞同：0
> 
> 时间：2012-08-03T05:23:15.830
> 
> 标签：css, themes

我正在为一个应用程序创建 HTML，该应用程序将以 CSS 和背景图像为主题（“皮肤”）。可能有大量主题用于同一个 Web 应用程序。我想知道在创建 HTML 时可以遵循哪些准则（如果有的话），以便以后创建主题。

一个重要的考虑因素是以后添加 HTML 组件（例如 UI 组件）而不更改大量现有 CSS 主题的能力。因此，从一开始就添加和样式化的通用组件越多，以后需要修改的主题就越少。

您对此有任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T08:26:44.143

我也在做同样的事情，只是将颜色主题添加到 Web 应用程序（html 页面）。我发现了一些对你更有用的东西

[http://usman.it/free-responsive-admin-template/](http://usman.it/free-responsive-admin-template/) .download 并检查这些模板，这些模板使用 jquery(charisma.js) 和每个主题的 css 更改了动态主题

在标题中您看到代码的位置

```
 <link id="bs-css" href="css/bootstrap-cerulean.css" rel="stylesheet"> 
```

动态更改主题。对于与 css 文件相同的较少 css。justr 将 charisma.js 文件中的扩展名更改为 css 以减少扩展名

# javascript - 如何使用 javascript 在 CKEditor 中扩展/放大文本选择。？

> ID：11789738
> 
> 赞同：1
> 
> 时间：2012-08-03T05:23:17.473
> 
> 标签：javascript, ckeditor

谁能告诉我如何扩大或扩大 CKEditor 中的选择。

我可以使用

```
var EditorInstance = CKEDITOR.instances['Editor'];
var selection = EditorInstance.getSelection(); 
```

但我想要的是用 javascript 扩大该选择。

例如，这是我现在的选择

![在此处输入图像描述](../Images/0eff25ee3ad62a0f9d4ec42ae3b6e4c6.png)

然后我想像这样扩展或放大该选择

![在此处输入图像描述](../Images/24df52d613a846850374ebbf6b1048c5.png)

而且这个选择也可能包含像粗斜体这样的标签。只使用javascript请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:44:58.960

只要您在现代网络浏览器中，[`Selection`](https://developer.mozilla.org/en/nsISelection)就可以使用该方法进行扩展。[`modify()`](https://developer.mozilla.org/en/DOM/Selection/modify/)例如，要将选择向前扩展一个单词，您可以这样做：

```
var selection = window.getSelection();
selection.modify("extend", "forward", "word"); 
```

也可以指定向后扩展，可以按字、字符、行等指定扩展。

# php - 使用 jquery masonry/isotope 围绕内容边界（没有空格）

> ID：11789742
> 
> 赞同：1
> 
> 时间：2012-08-03T05:23:41.563
> 
> 标签：php, jquery, html, css, border

我目前正在使用带有 jquery 的砌体插件。我有几个盒子。我希望能够在它们接触且没有空间的地方创建盒子。现在我正在尝试在这些容器周围创建边框，但是当我这样做时

```
border:thin solid black; 
```

在 CSS 中，它围绕着一切。因此，如果容器彼此相邻，则边框几乎会翻倍。除非有办法让容器相互重叠，否则边界线将正好在彼此的顶部对齐。到目前为止，它要么使容器进入下一行，要么我必须加宽宽度以显示双线。

有什么建议么？

谢谢

编辑：

```
 $container.masonry({
            itemSelector: '.container',
            columnWidth: 1,
            isFitWidth: true,
            position:'relative',
            animationOptions: 
            {
                    duration: 750,
                    easing: 'linear',
                    queue: false
            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:31:45.720

只需像这样更改您的CSS：

```
#main {
    width:300px;

}
.container {
width:50px;
height:80px;
border:1px solid black;
margin-right: -1px;
margin-bottom: -1px;
} 
```

这里的演示：http: [//jsfiddle.net/ongisnade/wsk7C/6/](http://jsfiddle.net/ongisnade/wsk7C/6/)

# python - 以编程方式逐行跟踪 Python 程序行/语句的执行

> ID：11789744
> 
> 赞同：1
> 
> 时间：2012-08-03T05:23:46.337
> 
> 标签：python, pdb

执行 Python 脚本并为每个执行的语句将行号或行本身传递给回调函数的最简单方法是什么？例如

一段要执行的代码

```
for i in range(5):
    z = i**2 
```

和一个回调

```
def callback(line):
   print line 
```

输出将是：

```
for i in range(5):
    z = i**2
for i in range(5):
    z = i**2
for i in range(5):
    z = i**2
...
etc 
```

另一种说法是，如果我正在运行脚本并通过调试器逐步执行，我想知道接下来要执行的代码片段。我已经看过[这个关于跟踪](https://stackoverflow.com/questions/8032484/python-tracing-the-execution-of-a-for-loop)的问题， 但我感兴趣的不仅仅是跟踪回调函数中执行的次数。

调试器会有所帮助，但前提是我可以在非交互模式下运行它并能够回调 python 代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:12:51.317

查看[sys.settrace](http://docs.python.org/library/sys.html#sys.settrace)函数。这允许您指定为每一行代码执行的跟踪函数。我认为，它是专门为创建而实现的，`pdb`因此它处于您似乎想要的正确抽象级别。实现你想要的不是微不足道的，但我认为这是最好的起点。

对于使用它的生产程序，请查看[coverage.py](http://nedbatchelder.com/code/coverage/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:03:58.200

April's fools 模块`goto`是用 Python 实现的跟踪的一个工作示例，因此尽管它无疑比 coverage.py 中的 C 实现慢，但它相当容易理解。[http://entrian.com/goto/](http://entrian.com/goto/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T21:55:00.160

接受 Noufal 的回答，因为它让我走上了正确的道路，但这也有帮助

[http://www.dalkescientific.com/writings/diary/archive/2005/04/20/tracing_python_code.html](http://www.dalkescientific.com/writings/diary/archive/2005/04/20/tracing_python_code.html)

# c# - 替换字符串数组中所有出现的字符串

> ID：11789750
> 
> 赞同：11
> 
> 时间：2012-08-03T05:24:19.550
> 
> 标签：c#, arrays, string, replace

我有一个字符串数组，如：

```
 string [] items = {"one","two","three","one","two","one"}; 
```

我想一次用零替换所有的。那么项目应该是：

`{"zero","two","three","zero","two","zero"};`

我找到了一个解决方案[如何替换字符串数组中的项目？](https://stackoverflow.com/questions/2349339/how-do-i-replace-an-item-in-a-string-array).

但它只会替换第一次出现。哪个是替换所有事件的最佳方法/方法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-03T05:30:33.957

没有循环就没有办法做到这一点..即使是这样的内部循环：

```
string [] items = {"one","two","three","one","two","one"};

string[] items2 = items.Select(x => x.Replace("one", "zero")).ToArray(); 
```

我不确定为什么您的要求是不能循环。但是，它总是需要循环。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-03T05:47:06.823

有一种方法可以在不遍历每个元素的情况下替换它：

```
 string [] items = {"zero","two","three","zero","two","zero"}; 
```

除此之外，您必须遍历数组（for/lambda/foreach）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-03T06:24:00.697

对不起，你必须循环。没有办法绕过它。

此外，所有其他答案都会为您提供一个包含所需元素的*新数组。*如果您希望修改*同一个数组*的元素，正如您的问题所暗示的那样，您应该这样做。

```
for (int index = 0; index < items.Length; index++)
    if (items[index] == "one")
        items[index] = "zero"; 
```

简单的。

为了避免每次需要发生这种情况时都在代码中编写循环，请创建一个方法：

```
void ReplaceAll(string[] items, string oldValue, string newValue)
{
    for (int index = 0; index < items.Length; index++)
        if (items[index] == oldValue)
            items[index] = newValue;
} 
```

然后像这样调用它：

```
ReplaceAll(items, "one", "zero"); 
```

你也可以把它变成一个扩展方法：

```
static class ArrayExtensions
{
    public static void ReplaceAll(this string[] items, string oldValue, string newValue)
    {
        for (int index = 0; index < items.Length; index++)
            if (items[index] == oldValue)
                items[index] = newValue;
    }
} 
```

然后你可以这样称呼它：

```
items.ReplaceAll("one", "zero"); 
```

当您使用它时，您可能希望使其通用：

```
static class ArrayExtensions
{
    public static void ReplaceAll<T>(this T[] items, T oldValue, T newValue)
    {
        for (int index = 0; index < items.Length; index++)
            if (items[index].Equals(oldValue))
                items[index] = newValue;
    }
} 
```

呼叫站点看起来相同。

现在，这些方法都不支持自定义字符串相等检查。例如，您可能希望比较是否区分大小写。添加一个带 的重载`IEqualityComparer<T>`，这样您就可以提供您喜欢的比较；这更加灵活，无论`T`是`string`还是其他：

```
static class ArrayExtensions
{
    public static void ReplaceAll<T>(this T[] items, T oldValue, T newValue)
    {
        items.ReplaceAll(oldValue, newValue, EqualityComparer<T>.Default);
    }

    public static void ReplaceAll<T>(this T[] items, T oldValue, T newValue, IEqualityComparer<T> comparer)
    {
        for (int index = 0; index < items.Length; index++)
            if (comparer.Equals(items[index], oldValue))
                items[index] = newValue;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T06:55:38.363

```
string [] items = {"one","two","three","one","two","one"};
items =  items.Select(s => s!= "one" ? s : "zero").ToArray(); 
```

[从这里](http://forums.asp.net/t/1830202.aspx/1?Replace%20same%20strings%20from%20a%20string%20array)找到答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-03T07:24:04.470

您也可以并行执行：

```
Parallel.For(0, items.Length,
  idx => { if(items[idx] == "one") { item[idx] = "zero"; } }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-03T05:36:07.997

你可以试试这个，但我认为，它也会循环。

```
string [] items = {"one","two","three","one","two","one"};
var str= string.Join(",", items);
var newArray = str.Replace("one","zero").Split(new char[]{','}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-03T05:39:45.947

```
string[] items = { "one", "two", "three", "one", "two", "one" }; 
```

如果你想要它指定的索引方式：

```
int n=0;
while (true)
{
n = Array.IndexOf(items, "one", n);
if (n == -1) break;
items[n] = "zero";
} 
```

但是LINQ会更好

```
var lst = from item in items
select item == "one" ? "zero" : item; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T05:35:49.083

```
string[] newarry = items.Select(str => { if (str.Equals("one")) str = "zero"; return str; }).ToArray(); 
```

# python - 如何包装 Windows 交互式控制台程序以实现自动化

> ID：11789756
> 
> 赞同：2
> 
> 时间：2012-08-03T05:25:12.867
> 
> 标签：python, subprocess, pipe, stdin, getch

我在 Windows 中有一个交互式控制台程序。我需要按'e''c'之类的击键到cmd窗口。人工操作方便，但程序自动化很难。

现在，我想包装控制台程序，以便更容易在其他程序（如python）中进行操作。

但是，控制台程序使用 'getch()' 来获取键盘输入，这不是标准输入。所以，我不能简单地将密钥发送到标准输入。

有没有人遇到过这个问题？谢谢。

```
 class ThreadWorker(threading.Thread):
        def __init__(self, callable, *args, **kwargs):
            super(ThreadWorker, self).__init__()
            self.callable = callable
            self.args = args
            self.kwargs = kwargs
            self.setDaemon(True)

        def run(self):
            try:
                self.callable(*self.args, **self.kwargs)
            except Exception, e:
                print e

        def start(self):
            global running
            running = True
            threading.Thread.start(self)

    def console_presskey(char):
        proc.stdin.write(char)
        proc.stdin.flush()

    def start():
        def worker(pipe):
            while running:
                line = pipe.readline()
                if line == '': 
                    break
                else:
                    print line,

        proc = Popen("something.exe",stdout=PIPE,stdin=PIPE)

        stdout_worker = ThreadWorker(worker, proc.stdout)
        stderr_worker = ThreadWorker(worker, proc.stderr)
        stdout_worker.start()
        stderr_worker.start()

    if __name__ == "__main__":
        start()
        sleep(2)
        console_presskey('e')
        sleep(2)
        console_presskey('c') 
```

编辑：

最后，我使用 win32 SendMessage 函数来完成任务。我分叉了一个新的子进程，然后隐藏它，获取它的 hWnd 和 pid。

这是代码：

```
import threading
import re
import os
from subprocess import Popen, PIPE,STDOUT,CREATE_NEW_CONSOLE,STARTUPINFO,STARTF_USESHOWWINDOW,SW_HIDE
from time import sleep
import win32process,win32con,win32gui,win32api

TargetPower = 'N/A'
Mode = 'N/A'
Channel = 'N/A'
con_stdin = ''
con_stdout = ''
stdout_worker = ''
stdin_woker = ''
running = False
proc = ''
Console_hwnd = ''
#status = 'NotStarted' # or Running 
class ThreadWorker(threading.Thread):
    def __init__(self, callable, *args, **kwargs):
        super(ThreadWorker, self).__init__()
        self.callable = callable
        self.args = args
        self.kwargs = kwargs
        self.setDaemon(True)

    def run(self):
        try:
            self.callable(*self.args, **self.kwargs)
        except Exception, e:
            print e

    def start(self):
        global running
        running = True
        threading.Thread.start(self)
def get_hwnds_for_pid (pid):
    def callback (hwnd, hwnds):
        #if win32gui.IsWindowVisible(hwnd) and win32gui.IsWindowEnabled(hwnd):
        _, found_pid = win32process.GetWindowThreadProcessId(hwnd)
        #print hwnd
        if found_pid == pid:
            hwnds.append(hwnd)
        return True
    hwnds = []
    win32gui.EnumWindows(callback, hwnds)
    #if hwnds == []:
        #raise 
    return hwnds

def sendkey(char):
    global Console_hwnd
    hwnd = Console_hwnd[0]
    code = ord(char)
    win32api.SendMessage(hwnd, win32con.WM_CHAR, code, 0)
    print '[*]',char,'Pressed.'

    #Another Keypress example. only works with keycode
    #win32api.PostMessage(hwnd, win32con.WM_KEYDOWN, win32con.VK_F9, 0)
    #print char,code,"down"
    #win32api.PostMessage(hwnd, win32con.WM_KEYUP, code, 0)
    #print char,code,"up"
def sendesc():
    global Console_hwnd
    hwnd = Console_hwnd[0]
    win32api.PostMessage(hwnd, win32con.WM_KEYDOWN, win32con.VK_ESCAPE, 0)
    print '[*]',"Esc down"
    win32api.PostMessage(hwnd, win32con.WM_KEYUP, win32con.VK_ESCAPE, 0)
    print '[*]',"Esc up"

def start():
    def worker(pipe):
        global TargetPower
        global Mode
        global Channel
        global running
        while running:
            line = pipe.readline()
            if line == '':
                break
            elif line.startswith('|') or line.startswith('==='):
                pass
            elif line.startswith("Operating in"):
                info = line
                for i in range(7):
                    info += pipe.readline()
                    #print 'ART> '+info,
                try:
                    TargetPower = eval(re.search(r'(Output|Target) (power|Power) = .{4}',info).group(0).split('=')[1])
                    #27.0
                    Mode = re.search(r'gOffRate = (.+?),',info).group(1).lstrip().rstrip()
                    #6MBps
                    Channel = re.search(r'channel ([\d.]+GHz),',info).group(1)
                    #2.412GHz
                except Exception,e:
                    TargetPower = 'N/A'
                    Mode = 'N/A'
                    Channel = 'N/A'
                    print e
            elif line =='\r\n':
                print '>',
            else:
                print 'ART>'+line,
        print 'worker done.'
    global proc
    si = STARTUPINFO()
    si.dwFlags |= STARTF_USESHOWWINDOW
    si.wShowWindow = SW_HIDE
    #proc = Popen("art.bat",stdout=PIPE,creationflags=CREATE_NEW_CONSOLE) #qt works!
    proc = Popen("art.bat",stdout=PIPE,creationflags=CREATE_NEW_CONSOLE,startupinfo=si)
    #proc = Popen("art.bat",stdout=PIPE,startupinfo=si)  #hidden
    #proc = Popen("cmd")  #for test
    sleep(2)
    print '[*] pid: ',proc.pid

    global Console_hwnd
    Console_hwnd = get_hwnds_for_pid(proc.pid)
    print '[*] hwnd:',Console_hwnd[0]

    global stdout_worker
    global stderr_worker
    stdout_worker = ThreadWorker(worker, proc.stdout)
    stderr_worker = ThreadWorker(worker, proc.stderr)
    stdout_worker.start()
    stderr_worker.start()

def stop():
    global stdout_worker
    global stderr_worker
    global running
    print 'stop'
    global proc
    sendesc()
    sendesc()
    sendesc()
    Popen("taskkill /F /T /PID %i"%proc.pid , shell=True)
    try:
        running = False
        TargetPower = 'N/A'
        Mode = 'N/A'
        Channel = 'N/A'
    except Exception,e:
        print e

if __name__ == "__main__":
    start()
    sleep(1)
    sendkey('e')
    sleep(1)
    sendkey('c')
    sleep(10)
    stop()
    while True:
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:41:56.687

据我所知，`getch()` *确实*使用标准输入。可能是应用程序确实收到了该输入，但您没有收到它的输出？这是一个常见问题，因为如果输出没有指向终端，它通常会被缓冲。您可以调整程序以在每行之后刷新其输出吗？

我发现您的 python 代码存在许多问题：您没有为 stderr 创建管道，并且 proc 变量似乎是 start 方法的本地变量。

您可能希望暂时保留从 python 进程继承的子进程输出。这应该抑制缓冲并排除其中的任何错误`ThreadWorker`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T15:50:19.270

您需要做的就是：

在新行中写入每个步骤的文件：

例如：

第 1
步 第 2
步 第 3 步

然后像这样调用程序：

程序.exe <输入.txt

努夫说！！

# android - 安卓环境变量

> ID：11789757
> 
> 赞同：0
> 
> 时间：2012-08-03T05:25:25.047
> 
> 标签：android

我正在尝试更新一个能够在 Eclipse 上运行 android 开发的系统。我安装`android-sdk`并更新了系统路径。路径是`"C:\Android\android-sdk\platform-tools"`。当我在 cmd 提示符下给 adb 时，`"C:\Users\Darshana"`它说不被识别为内部或外部命令.. 但是当我在 cmd 提示符中浏览到时`"C:\"`， adb 被识别。它只发生在 1 个系统上...我能知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:52:23.207

在系统属性中设置环境路径

[http://www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

# sequence - 在 OWL-DL 本体中建模序列顺序

> ID：11789763
> 
> 赞同：1
> 
> 时间：2012-08-03T05:26:09.643
> 
> 标签：sequence, ontology, owl

默认情况下，OWL 本体中不维护序列顺序。如何在 OWL-DL 本体中建模序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T22:17:19.283

对序列进行建模并对其元素进行排序的一种方法是只引入一个`hasNext`属性来捕获序列顺序：

```
Class: SequenceItem
    EquivalentTo: 
        hasNext only SequenceItem

ObjectProperty: hasNext 
    Domain: 
       SequenceItem
    Range: 
       SequenceItem
    InverseOf:
       hasPrevious 
```

然后，假设您要按顺序排序的项目表示为实例，您可以按如下方式捕获它们的顺序：

```
SequenceItem: item_1
    hasNext: 
         item_2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:49:35.477

OWL 允许您声明，例如：

*   每个项目最多跟随一个项目。
*   每个项目后面最多跟一个项目。
*   每个第一个项目都是一个不跟在任何项目之后的项目。
*   Item1 是一个项目，后面是 Item2。
*   ...

这些语句允许您描述序列（可能是开放式的，即具有无限模型）。

(The above statements were written in ACE, use the [ACE parser](https://github.com/Attempto/APE) to convert them to OWL, where `item` becomes a class, `follows` becomes an object property and `Item1` and `Item2` are individuals.)

# c++ - OpenGL/GLM - 计算截锥体问题

> ID：11789766
> 
> 赞同：0
> 
> 时间：2012-08-03T05:26:54.203
> 
> 标签：c++, math, opengl, frustum

我正在尝试计算我的截锥体来做一些简单的边界框测试。

这是我的功能：

```
void CFrustum::calculateFrustum(glm::mat4* mat)
{
    // Calculate the LEFT side
    m_Frustum[LEFT][A] = *glm::value_ptr(mat[0][3]) + *glm::value_ptr(mat[0][0]);
    m_Frustum[LEFT][B] = *glm::value_ptr(mat[1][3]) + *glm::value_ptr(mat[1][0]);
    m_Frustum[LEFT][C] = *glm::value_ptr(mat[2][3]) + *glm::value_ptr(mat[2][0]);
    m_Frustum[LEFT][D] = *glm::value_ptr(mat[3][3]) + *glm::value_ptr(mat[3][0]);

    // Calculate the RIGHT side
    m_Frustum[RIGHT][A] = *glm::value_ptr(mat[0][3]) - *glm::value_ptr(mat[0][0]);
    m_Frustum[RIGHT][B] = *glm::value_ptr(mat[1][3]) - *glm::value_ptr(mat[1][0]);
    m_Frustum[RIGHT][C] = *glm::value_ptr(mat[2][3]) - *glm::value_ptr(mat[2][0]);
    m_Frustum[RIGHT][D] = *glm::value_ptr(mat[3][3]) - *glm::value_ptr(mat[3][0]);

    // Calculate the TOP side
    m_Frustum[TOP][A] = *glm::value_ptr(mat[0][3]) - *glm::value_ptr(mat[0][1]);
    m_Frustum[TOP][B] = *glm::value_ptr(mat[1][3]) - *glm::value_ptr(mat[1][1]);
    m_Frustum[TOP][C] = *glm::value_ptr(mat[2][3]) - *glm::value_ptr(mat[2][1]);
    m_Frustum[TOP][D] = *glm::value_ptr(mat[3][3]) - *glm::value_ptr(mat[3][1]);

    // Calculate the BOTTOM side
    m_Frustum[BOTTOM][A] = *glm::value_ptr(mat[0][3]) + *glm::value_ptr(mat[0][1]);
    m_Frustum[BOTTOM][B] = *glm::value_ptr(mat[1][3]) + *glm::value_ptr(mat[1][1]);
    m_Frustum[BOTTOM][C] = *glm::value_ptr(mat[2][3]) + *glm::value_ptr(mat[2][1]);
    m_Frustum[BOTTOM][D] = *glm::value_ptr(mat[3][3]) + *glm::value_ptr(mat[3][1]);

    // Calculate the FRONT side
    m_Frustum[FRONT][A] = *glm::value_ptr(mat[0][3]) + *glm::value_ptr(mat[0][2]);
    m_Frustum[FRONT][B] = *glm::value_ptr(mat[1][3]) + *glm::value_ptr(mat[1][2]);
    m_Frustum[FRONT][C] = *glm::value_ptr(mat[2][3]) + *glm::value_ptr(mat[2][2]);
    m_Frustum[FRONT][D] = *glm::value_ptr(mat[3][3]) + *glm::value_ptr(mat[3][2]);

    // Calculate the BACK side
    m_Frustum[BACK][A] = *glm::value_ptr(mat[0][3]) - *glm::value_ptr(mat[0][2]);
    m_Frustum[BACK][B] = *glm::value_ptr(mat[1][3]) - *glm::value_ptr(mat[1][2]);
    m_Frustum[BACK][C] = *glm::value_ptr(mat[2][3]) - *glm::value_ptr(mat[2][2]);
    m_Frustum[BACK][D] = *glm::value_ptr(mat[3][3]) - *glm::value_ptr(mat[3][2]);

    // Normalize all the sides
    NormalizePlane(m_Frustum, LEFT);
    NormalizePlane(m_Frustum, RIGHT);
    NormalizePlane(m_Frustum, TOP);
    NormalizePlane(m_Frustum, BOTTOM);
    NormalizePlane(m_Frustum, FRONT);
    NormalizePlane(m_Frustum, BACK);
} 
```

现在，在有人告诉我列/行的顺序错误之前，我已经尝试了它们，但都没有运气。

我从获取矩阵的固定函数模式切换，如下所示：

```
glGetFloatv( GL_PROJECTION_MATRIX, proj );

glGetFloatv( GL_MODELVIEW_MATRIX, modl ); 
```

实际传递一个矩阵。此时我唯一渲染的是世界顶点，我怀疑问题是我的边界框位置没有考虑到我在世界中的位置的偏移量。

这是我的矩阵创建：

```
cameraMatrix = glm::lookAt(position, position+direction, up);
projectionMatrix = glm::perspective(50.0f, 4.0f / 3.0f, 0.1f, 1000.f);
viewMatrix = projectionMatrix * cameraMatrix; 
```

因为我现在唯一渲染的是具有绝对位置的全局顶点，所以我不使用任何模型矩阵。

我确信我的 box vs frustum 代码是正确的。有人看到我的计算代码有错误，或者知道我确实需要转换绑定框顶点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:25:02.490

如果您的边界框位于世界坐标中，则应该将 viewMatrix 传递给 calculateFrustum。

将 viewMatrix 传递给 calculateFrustum 将在世界空间中生成平面。

如果您将 projectionMatrix 传递给 calculateFrustum ，则必须在执行相交测试之前将 cameraMatrix 应用于边界框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T00:05:39.083

我一直在尝试做同样的事情，尝试使用此代码并发现问题。这是通常的指针混淆。

这是更正方法的第一行：

```
m_Frustum[LEFT][A] = (*mat)[0][3] + (*mat)[0][0]; 
```

# python - 如何让 Python 智能地将动态输入转换为固定宽度的输出？

> ID：11789767
> 
> 赞同：2
> 
> 时间：2012-08-03T05:26:55.997
> 
> 标签：python, string, function, format, etl

.我正在尝试使用 Python 实现一些功能，它可以智能地转换输入并为可重复输出应用字符串格式规则，如果你愿意的话，有点像智能 ETL 函数。举个例子，我将收到来自地理位置分散的客户的数字数据，这些数据需要转换为可重复的格式，以便我们的传统金融引擎可以使用它。

例如，我可能会收到如下数值数据：

```
input = 123,456,789.4533 
```

此输入数据需要重新格式化为 26 位的输出，表示为 (17)(9)，其中前 17 位是输入值的小数点左侧的值，左侧填充零，而 9 将是小数点右侧的所有输入值，再次在右侧填充零。所以，如果我们要改造它，它看起来像：

```
output = 00000000123456789453300000 
```

现在，有时输入数据可能如下所示：

```
123456789.4533
123.456.789,4533 (european currency) 
```

在 Python 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:21:28.367

你可以用正则表达式来做

```
import re
inputs = [r'123,456,789.4533',r'123456789.4533',r'123,456,789,4533',r'123.456.789,4533']
for input in inputs:
    decimal = re.search(r'(?<=[.,])\d+$',input).group()
    integer = re.search(r'.*(?=[.,]\d+$)',input).group()
    checkdigit = lambda x : x.isdigit()
    integer = ''.join([character for character in integer if checkdigit(character)])
    print integer.rjust(17,'0') + decimal.ljust(9,'0') 
```

**印刷：**

00000000123456789453300000

00000000123456789453300000

00000000123456789453300000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:07:57.853

```
>>> def transfer(input,euro=false):
...     part1, _, part2 = input.partition(',' if euro else '.')
...     nondigit = lambda x:x.isdigit()
...     part1=filter(nondigit, part1)
...     part2=filter(nondigit, part2)
...     return part1.rjust(17,'0') + part2.ljust(9,'0')
>>> transfer('123456789.4533')
'00000000123456789453300000'
>>> transfer('123.456.789,4533', true)
'00000000123456789453300000' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:08:20.493

如果您绝对确定会出现小数分隔符，您可以这样做：

```
separator = re.match('.*(\D)\d*$', input).group(1)
integer_part, decimal_part = (re.sub('\D', '', x) for x in input.split(separator)) 
```

如果不是，则必须事先知道分隔符是什么，否则您的问题将无法确定（是什么`123,456`意思？`123456e0`用美国符号还是`123456e-3`欧洲符号？）

一旦你有了整数部分和小数部分，你可以按照你需要的方式填充它们：

```
output = integer_part.zfill(17) + decimal_part.ljust(9, '0') 
```

* * *

解释：

1.  为了找出分隔符是什么，我使用正则表达式来捕获输入中的最后一个非数字字符；
2.  使用该分隔符拆分字符串，得到整数和小数部分；删除它们上任何剩余的非数字，你只会得到数字。

# python - 如何知道队列中的特定任务是否完成？

> ID：11789768
> 
> 赞同：0
> 
> 时间：2012-08-03T05:27:15.803
> 
> 标签：python, multithreading

我对 python 队列有疑问。

我写了一个线程类，它的 run() 方法执行队列。

```
 import threading
  import Queue

  def AThread(threading.Thread):
     def __init__(self,arg1):
         self.file_resource=arg1
         threading.Thread.__init__(self)
         self.queue=Queue.Queue()

     def __myTask(self):
         self.file_resource.write()
         ''' Method that will access a common resource
          Needs to be synchronized.
          Returns a Boolean based on the outcome
         '''

     def run():
         while True:
             cmd=self.queue.get()
             #cmd is actually a call to method
             exec("self.__"+cmd)
             self.queue.task_done()

 #The problem i have here is while invoking the thread
 a=AThread()
 a.queue.put("myTask()")
 print "Hai" 
```

同一个 AThread 实例 (a=AThread()) 会将任务从不同位置加载到队列中。

因此底部的 print 语句应该等待通过上面的语句添加到队列中的任务，并等待一个确定的时间段，并在执行任务后接收返回的值。

有没有一种简单的方法来实现这一点？我对此进行了很多搜索，请查看此代码并提供建议。

以及为什么python的获取和释放锁不在类的实例上。在提到的场景中，AThread 的实例 a 和 b 不需要同步，但是当应用获取和释放锁时，myTask 会为 a 和 b 的两个实例同步运行。

请提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:19:05.490

您可以采取很多方法，具体取决于您的问题的具体情况。

如果您`print "Hai"`只需要在 myTask 完成后发生，您可以将其放入任务中，并让 myTask 在完成时将该任务放入队列中。（如果您是 CS 理论类的人，您可以认为这类似于 continuation-passing 风格）。

如果您`print "Hai"`对多个任务有更复杂的依赖，您可能会研究期货或承诺。

您可以进入基于 Actor 的并发世界，在这种情况下，可能会有一个同步消息发送方法或多或少地执行您想要的操作。

如果您不想使用期货或承诺，您可以通过引入条件变量手动实现类似的事情。在 myTask 启动之前设置条件变量并将其传递给 myTask，然后等待它被清除。随着程序的增长，您必须非常小心，并不断重新考虑您的锁定策略，以确保它保持简单和易于理解——这是造成困难并发错误的原因。

获得你想要的东西的最小的明智步骤可能是提供一个阻塞版本的 Queue.put() 来做条件变量的事情。确保您考虑是否要阻塞直到队列为空，或者直到您放入队列的内容从队列中删除，或者直到您放入队列的内容完成处理。然后确保你实现了你在考虑时决定实现的东西。

# python - gae python ascii编解码器无法解码字节

> ID：11789770
> 
> 赞同：1
> 
> 时间：2012-08-03T05:27:21.597
> 
> 标签：python, google-app-engine

当我运行我的应用程序时，它会查找链接、检查它们是否存在于数据库中并将它们添加到数据库中，我得到一个错误。

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~nothing-but-net/1.360769209191920043/main.py", line 460, in get
    blchrlinks(True, a)
  File "/base/data/home/apps/s~nothing-but-net/1.360769209191920043/main.py", line 271, in blchrlinks
    if Articles.by_name(title):
  File "/base/data/home/apps/s~nothing-but-net/1.360769209191920043/main.py", line 498, in by_name
    u = Articles.all().filter("name =", name).get()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2099, in get
    results = self.run(limit=1, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2063, in run
    iterator = raw_query.Run(**kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 1622, in Run
    itr = Iterator(self.GetBatcher(config=config))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 1601, in GetBatcher
    return self.GetQuery().run(_GetConnection(), query_options)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 1490, in GetQuery
    filter_predicate=self.GetFilterPredicate(),
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 1534, in GetFilterPredicate
    property_filters.append(datastore_query.make_filter(name, op, values))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 107, in make_filter
    properties = datastore_types.ToPropertyPb(name, values)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore_types.py", line 1745, in ToPropertyPb
    pbvalue = pack_prop(name, v, pb.mutable_value())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore_types.py", line 1556, in PackString
    pbvalue.set_stringvalue(unicode(value).encode('utf-8'))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 57: ordinal not in range(128) 
```

我的 by_name 代码是：

```
def by_name(cls, name):
    u = Articles.all().filter("name =", name).get()
    return u 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:40:56.697

正如堆栈跟踪的最后一行所示，它首先尝试将值转换为 unicode，然后将其编码为 utf-8。但是，（隐式）转换使用的是 ascii，这对于您的字符串来说是不够的。在将其传递给`filter`. 例子：

```
u = Articles.all().filter("name =", name.decode('utf-8')).get() 
```

（请记住，您需要提供**正确**的编码；如果`name`不是 UTF-8 字符串，而是 Cp1252、ISO-Latin 或其他内容，则需要在`decode`调用中指定）

# verilog - 系统verilog/verilog ---事件

> ID：11789771
> 
> 赞同：0
> 
> 时间：2012-08-03T05:27:24.280
> 
> 标签：verilog, verification, system-verilog

```
task monitorPush();
  begin
    bit [7:0] data = 0;
    while (1) begin
      @ (posedge intf.clk);
      if (intf.cb.wr_cs== 1 &&  intf.cb.wr_en== 1) begin
        // @ (posedge intf.clk);
        data = intf.data_in;
        sb.addItem(data);
        $write("%dns : Write posting to scoreboard data = %x\n",$time, data);
      end
    end
  end
  endtask 
```

上面的代码和下面的代码有什么不同？就像将 posedge 时钟从第 5 行移到第 7 行如何改变代码一样？提前致谢

```
task monitorPush();
  begin
    bit [7:0] data = 0;
    while (1) begin
      // @ (posedge intf.clk);
      if (intf.cb.wr_cs== 1 &&  intf.cb.wr_en== 1) begin
        @ (posedge intf.clk);
        data = intf.data_in;
        sb.addItem(data);
        $write("%dns : Write posting to scoreboard data = %x\n",$time, data);
      end
    end
  end
endtask 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:42:13.270

`@(posedge intf.clk)`等待 clk 的 posedge 然后继续执行。

您的代码版本 1 等待 clk (posedge) 然后执行 if 语句。

版本 2：在 if 语句失败的情况下，将在 while true 块内连续执行，直到 if 变为 true，然后您将等待 clk posedge。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T06:28:29.633

在第 2 版中，您可能会陷入无限循环，因为模拟器会在评估 while 循环和 if 语句时陷入困境，并且不会切换到执行代码的其他部分。在版本 1 中，@(posedge intf.clk) 将让模拟器跳转到代码的其他部分。简而言之，使用版本 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-31T05:12:15.927

版本 2) 将挂起您的模拟，因为您没有 if 的 else 条件。从调用监视函数的那一刻起，wr_cs/wr_en 第一次遇到为零将卡在 while(1) 无限循环中，因为没有 else 条件或任何计时事件。

版本 1 是正确的使用方式。大多数情况下，您的控制和数据信号会随时钟而变化。

在版本 1) 中，您将在 CS/WEN 变高时的时钟沿对记分板的数据进行采样

在版本 2）中，您将在 wr_cs/wr_en 变高后一个时钟对数据进行采样。（当您看到它们为高后等待时钟）您最终可能会得到错误的数据。

# ruby-on-rails - YouTube 如何计算其观看次数？

> ID：11789772
> 
> 赞同：2
> 
> 时间：2012-08-03T05:27:36.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, youtube

尝试对我们的网络应用程序的视图计数实施类似的方法。

阅读这篇文章： http: [//mashable.com/2012/06/25/why-do-youtube-videos-freeze-at-301-views/](http://mashable.com/2012/06/25/why-do-youtube-videos-freeze-at-301-views/)

并观看：[http ://www.youtube.com/watch?v=oIkhgagvrjI](http://www.youtube.com/watch?v=oIkhgagvrjI)

YouTube 采用哪些方法来确定观看是否有效？例如，不是来自机器人、视图服务或尝试多次刷新页面的用户。我知道他们可能对此有几种方法。但希望开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:33:46.913

这有点难以回答，我不是来自 youtube。但我可以尝试一些事情来帮助你思考这个问题。

什么时候应该声明一个视图？有几种选择：

1.  用户点击视频链接和数据开始流动的那一刻。[最简单的工程解决方案，但不是真正有效的措施]
2.  如果用户观看了视频的前 25%（或 30% 或在此处输入您的号码）。这也可以更改为说用户观看了 40% 的视频并进行了擦除。
3.  如果用户已经观看了整个视频到最后。太保守了。有人可能会在最后 5 秒停止观看，因为说学分正在滚动。
4.  用户在继续观看视频之前已经观看了整个前贴片广告（也许广告客户只对此感兴趣！）

还有视频视图是否是人工/自动的方面？

1.  您是否以人类无法实现的速度从同一个位置获得太多视图？
2.  即使到达速度不是很快，您的视频观看是否显示出非常不可能的模式（例如，所有观看都在 45 秒或视频的 50% 处停止，或者所有观看总是到最后）。人类的观看模式会有所不同。
3.  链接到您的观点的来源是什么。您是否从不同来源获得意见？
4.  关于上一个视频视图是什么，下一个视频视图是什么的一些规则也可以添加到机器人的检测中。[假设正在按字母顺序或在搜索中呈现的顺序观看视频。你知道这很可能是一个自动程序，只是通过一个列表。]

然后，您可以将规则与尝试流式传输的位置、操作系统、浏览器、设备等结合起来。在最初的规则集之后，它变得比这更复杂。但我想你会明白它的要点。

# c# - 1001：推特用户名或密码无效

> ID：11789776
> 
> 赞同：0
> 
> 时间：2012-08-03T05:28:19.573
> 
> 标签：c#, .net, twitter, twitpic

我在尝试上传到 twitpic 时收到无效的用户名或密码错误。我很肯定这些是正确的。

我正在使用 Twitpic.net

```
 Twitpic tp = new Twitpic(data, ConfigurationManager.AppSettings["TwitterUsername"],        ConfigurationManager.AppSettings["TwitterPassword"]);
TwitpicResponse resp = tp.UploadAndPost("The Message"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:54:18.583

您是否确认您实际上可以从应用程序配置中读取设置？即例如将从 ConfigurationManager 读取的值分配给临时变量并改为调试/显示/打印它们？如果读取失败，则返回值为*null*。

然后，当您可以验证您确实发送了正确的凭据时 - 验证您是否已在您的 Twitter 帐户上授权 Twitpic 应用程序？

此外，对配置键进行硬编码并不是最佳实践——改用常量或类似方法。

# android - Dynamically add scrollview in layout and linearlayout in scrollview

> ID：11789777
> 
> 赞同：5
> 
> 时间：2012-08-03T05:28:19.840
> 
> 标签：android, scrollview, android-linearlayout

How do I dynamically add a scrollview in my layout? and once I get that scrollview added I want to add a linearlayout inside it so I can now add controls in that linearlayout?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:07:06.050

I hope it will helpful to you.

Try this Code...

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout rl=(RelativeLayout)findViewById(R.id.rl);

        ScrollView sv = new ScrollView(this);
        sv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        ll.setOrientation(1);
        sv.addView(ll);

        for(int i = 0; i < 20; i++) 
        {
            Button b = new Button(this);
            b.setText("Button "+i);
            ll.addView(b);
        }

        rl.addView(sv);

        /* If you want to set entire layout as dynamically, then remove below lines in program :
         * setContentView(R.layout.activity_main);
         * RelativeLayout rl=(RelativeLayout)findViewById(R.id.rl);
         * rl.addView(sv);
         * 
         * And Add below line :
         * this.setContentView(sv);

        */

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T05:35:08.410

try this

[http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T07:08:57.820

try this it will work :

```
 TextView tv = new TextView(this);
    tv.setText(msg);       
    tv.setMovementMethod(new ScrollingMovementMethod());
    setContentView(tv); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-03T10:36:31.690

You can wrap your widget inside a ScrollView. Here's a simple example:

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/txt"/>
    </LinearLayout>
</ScrollView> 
```

If you want to do it in code:

```
ScrollView sv = new ScrollView(this);
//Add your widget as a child of the ScrollView.
sv.addView(wView); 
```

# php - 使用 abraham twitteroauth 库的 Twitter 自动登录

> ID：11789784
> 
> 赞同：0
> 
> 时间：2012-08-03T05:29:07.863
> 
> 标签：php, twitter

我有推特用户名和密码。我想要的是，当客户从管理端添加任何新文章时，我希望它的 url 是自动 twit。每次他添加文章时，我都不想打扰客户登录 Twitter。有什么方法可以使用 Abraham twitteroauth 库自动登录。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:22:58.910

Twitter 需要首先授权客户端应用程序，然后您才能在某些情况下自动发送推文（即发布新文章）。有关详细描述，您可以查看我[为 Chyrp 创建的这个 Twitter 模块。](https://github.com/xhezairi/chyrp-modules/tree/master/chweet)它使用 Abraham 的 Twitter oAuth 库。在 abraham 的图书馆档案中还有一个明显的例子，可以稍微澄清一下。

另一方面，您用于客户网站的 CMS/博客应提供挂钩（回调），以便了解何时创建帖子，以便相应地调用 Tweet 方法。

来自 Chyrp 的链接 Twitter 模块的示例：

1) 使用 Twitter 授权：

```
static function admin_chweet_auth($admin) {
    if (!Visitor::current()->group->can("change_settings"))
        show_403(__("Access Denied"), __("You do not have sufficient privileges to change settings."));

    # If the oauth_token is old redirect
    if (isset($_REQUEST['oauth_token']) && $_SESSION['oauth_token'] !== $_REQUEST['oauth_token'])
    Flash::warning(__("Old token. Please refresh the page and try again."), "/admin/?action=chweet_settings");

    # New TwitteroAuth object with app key/secret and token key/secret from SESSION
    $tOAuth = new TwitterOAuth(C_KEY, C_SECRET, $_SESSION['oauth_token'], $_SESSION['oauth_token_secret']);
    $access_token = $tOAuth->getAccessToken($_REQUEST['oauth_verifier']);

    # Save access tokens locally for future tweeting.
    $config = Config::current();
    $config->set("chweet_oauth_token", $access_token["oauth_token"]);
    $config->set("chweet_oauth_secret", $access_token["oauth_token_secret"]);
    $config->set("chweet_user_id", $access_token["user_id"]);
    $config->set("chweet_username", $access_token["screen_name"]);

    unset($_SESSION['oauth_token']);
    unset($_SESSION['oauth_token_secret']);

    if (200 == $tOAuth->http_code)
        Flash::notice(__("Chweet was successfully Authorized to Twitter."), "/admin/?action=chweet_settings");
    else
        Flash::warning(__("Chweet couldn't be authorized."), "/admin/?action=chweet_settings");
} 
```

2)`add_post (trigger)`

```
public function add_post($post) {
   fallback($chweet, (int) !empty($_POST['chweet']));
   SQL::current()->insert("post_attributes",
                    array("name" => "tweeted",
                          "value" => $chweet,
                          "post_id" => $post->id));

   if ($chweet and $post->status == "public")
       $this->tweet_post($post);
} 
```

3) Tweet-it 方法（截断）。

```
public function tweet_post($post) {
    $tOAuth = new TwitterOAuth(C_KEY, C_SECRET, $config->chweet_oauth_token, $config->chweet_oauth_secret);
    $user = $tOAuth->get("account/verify_credentials");
    $response = $tOAuth->post("statuses/update", array("status" => $status));
    return $response;
} 
```

# tridion - 如何访问在 SDL Tridion 2011 SP1 中作为二进制文件上传的 Page TBB 中的 .css 文件

> ID：11789789
> 
> 赞同：-1
> 
> 时间：2012-08-03T05:29:44.137
> 
> 标签：tridion, tridion-2011

我在 SDL Tridion 2011 CME 中将 .css 文件作为二进制文件（在单独的多媒体模式中）上传。

我有两个选择。

```
1.Writing the TBB and CT for the CS and access it
2.Publishing the .css as binary and access it
  I doubt that whether we can access the published binaries through the TBB. 
```

我的页面 TBB 使用 Dreamweaver 模板。

我不确定最好的方法。

有人可以告诉最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T06:15:44.070

您是否在问如何从 Tridion 发布 CSS 文件？

如果是这样，则有多种方法，此处记录了一种方法：

[http://blog.building-blocks.com/publishing-code-files-from-sdl-tridion](http://blog.building-blocks.com/publishing-code-files-from-sdl-tridion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:26:34.700

这是轻松发布网站设计的另一篇好文章：

[http://www.sdltridionworld.com/articles/sdltridion2011/publish-design-the-basics.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/publish-design-the-basics.aspx)

# grails - 我如何列出 grails 插件的所有控制器/服务

> ID：11789790
> 
> 赞同：4
> 
> 时间：2012-08-03T05:29:45.927
> 
> 标签：grails, grails-plugin, grails-2.0

如何列出 grails 插件的所有控制器/服务。或者我如何知道给定 GrailsApplication 类的 pluin 名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T15:31:52.833

插件中的工件使用注释进行`GrailsPlugin`注释，以添加有关其源的元数据。因此，您可以使用它来查找控制器/服务/等是否存在。来自应用程序或这样的插件：

```
import org.codehaus.groovy.grails.plugins.metadata.GrailsPlugin

for (type in ['controller', 'service']) {

   for (artifactClass in ctx.grailsApplication."${type}Classes") {

      def clazz = artifactClass.clazz

      def annotation = clazz.getAnnotation(GrailsPlugin)
      if (annotation) {
         println "$type $clazz.name from plugin '${annotation.name()}'"
      }
      else {
         println "$type $clazz.name from application"
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:53:02.517

在新创建的 Grails 应用程序中，grails-app/views/index.gsp 具有以下内容：

```
<g:each var="c" in="${grailsApplication.controllerClasses.sort { it.fullName } }">
    <li class="controller"><g:link controller="${c.logicalPropertyName}">${c.fullName}</g:link></li>
</g:each> 
```

您可以以类似的方式获得服务。

# android - Android 语音转文本示例

> ID：11789791
> 
> 赞同：12
> 
> 时间：2012-08-03T05:29:46.677
> 
> 标签：android, speech-to-text

我已经查看了 VoiceRecognition 的 Android 示例，但我真的不明白它应该做什么或它是如何工作的。在清单中没有任何类型的主要活动要运行，所以当我在手机上安装应用程序时，我无法运行它。

我还试图找到一个简单的语音转文本示例，它将语音作为输入并在屏幕上输出文本。只是这样我就可以研究它以了解它是如何工作的，但是我无法在网络上找到任何显示它的示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T06:30:10.443

我是这样做的：

在 onCreate 中：

```
List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0); 
```

在启动语音识别的方法中：

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
startActivityForResult(intent, REQUEST_CODE); 
```

活动结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        // Populate the wordsList with the String values the recognition engine thought it heard
        ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
    }
} 
```

希望我没有错过任何东西，已经有一段时间了。如果有什么不起作用，请给我留言。关于文本输出：我相信一旦你有一个填充的匹配数组，你就可以处理它。

# magento - 如何根据类别过滤添加到愿望清单的 magento 产品

> ID：11789798
> 
> 赞同：2
> 
> 时间：2012-08-03T05:30:17.087
> 
> 标签：magento

在 magento 中，我想根据目录类别过滤登录用户的愿望清单项目。有人可以建议我任何解决方案吗？

任何帮助，将不胜感激。

请查看以下网址中的图片：

[https://dl.dropbox.com/u/53435938/wishlist.png](https://dl.dropbox.com/u/53435938/wishlist.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:20:54.430

**注意：** 未经测试。这里有一些即兴表演。

```
// ID of the category you wish to filter by
$category_id = 35;

// Instantiate a category model and load it
$_category = Mage::getModel( 'catalog/category' )->load( $category_id );

// Grab the wishlist collection
$_wishlistCollection = Mage::helper( 'wishlist' )->getWishlistItemCollection();

// Filter it by category as you would any normal collection
$_wishlistCollection->addCategoryFilter( $_category ); 
```

然后进行正常的集合迭代。

# c - ^M^Mtypedef 枚举 - 头文件中的杂散字符

> ID：11789808
> 
> 赞同：0
> 
> 时间：2012-08-03T05:31:57.793
> 
> 标签：c

我正在使用 Vim 编辑器，当我打开我的文件时，我得到一些杂散字符，如下所示：

```
^M^Mtypedef enum 
```

这不会产生任何编译问题。但是当我看代码时它看起来很荒谬。

在我交付代码之前，我想删除这些杂散字符。请提出一种方法。

**附加信息：**

当我使用源洞察打开文件时，不显示特殊字符，但变量的颜色显示错误，例如对于`enum`类型变量，源洞察通常显示蓝色，但由于这些杂散字符，显示为空格，颜色显示为绿色。如果我删除多余的空间（实际上是 ^M），颜色就会正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:37:59.477

使用 vim 中的替换命令摆脱它们：

```
:%s/^V^M//g 
```

`^V^M`表示：输入 Control+v - 按住 Control 键并输入`v`，然后输入 Control+m。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:34:56.663

请使用以下命令。

```
dos2unix * 
```

这将删除那些特殊字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:40:29.750

^M 是一个 DOS 换行符，如果你从 Windows 下载文件，它会出现在 Linux 中。

试试下面的：

```
:%s/(ctrl+v)(ctrl+m)//g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T05:39:55.623

将 \r 替换为 \n。试试sed。^M 实际上是 \r

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T14:55:31.463

大多数人建议的 dos2unix 对我不起作用。最后我做了一件简单的事情。复制 whle 代码，粘贴到文本文件中。再次从那里复制它并在我的源代码中再次替换它。这确实有效.. !!

# emacs - 获得类似于 emacs 中的 dired-at-point 的 ido 模式功能

> ID：11789813
> 
> 赞同：1
> 
> 时间：2012-08-03T05:32:35.580
> 
> 标签：emacs, elisp, dired, ido-mode

我喜欢在 emacs 中使用 ido 模式以及使用运行 ido-list-directory 的 Cx Cd 列出目录。是否有启用 ido 模式操作的命令，但在当前点，如 dired-at-point。我经常使用它，但更喜欢使用 ido-dired-at-point 之类的东西。

不知道这是否已经实现，我只是在文档中找不到它，或者它是否易于实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:10:38.143

看起来`ido-list-directory`是用于交互式完成的`list-directory`。因此，如果该点是文件名，而不是使用 ido，`list-directory`则直接使用应该达到相同的最终结果。

像这样的东西怎么样：

```
(defun ido-ffap-list-directory ()
  (interactive)
  (let ((fap (ffap-guess-file-name-at-point)))
    (if fap
        (list-directory (file-name-directory fap))
      (ido-list-directory)))) 
```

**编辑：**

或者，如果您想确认目录 @ 点（仅用于`C-u`前缀），`list-directory`请将上面的 sexp 替换为以下内容：

```
(defun ido-ffap-list-directory (&optional arg)
  (interactive "P")
  (let ((fap (ffap-guess-file-name-at-point)))
    (if (null fap)
        (ido-list-directory)
      (if arg
          (list-directory 
           (ido-read-directory-name "Directory: "
                                    (file-name-directory fap)))
        (list-directory (file-name-directory fap)))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:00:27.217

`(setq ido-use-filename-at-point 'guess)`

# android - Android中的两个垂直并排视图

> ID：11789817
> 
> 赞同：0
> 
> 时间：2012-08-03T05:33:09.910
> 
> 标签：android, android-layout

我想知道如何在 Android 中做两个垂直的并排视图，其中一侧是 Google 日历，另一侧是 Google 任务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:37:25.250

您可以在一个父布局中采用两个布局（可能是具有水平方向的 LinearLayout），然后为子布局或视图提供**android:layout_weight="1"**。所以我认为它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:38:28.357

[使用两个Fragments](http://developer.android.com/guide/components/fragments.html)创建一个 Activity 。示例应用程序[FragmentBasics](http://developer.android.com/training/basics/fragments/index.html)说明了如何使用片段。

# mysql - 将 MySQL 日期时间分组为间隔，而不考虑时区

> ID：11789818
> 
> 赞同：8
> 
> 时间：2012-08-03T05:33:10.303
> 
> 标签：mysql, datetime, group-by, timestamp

以前有人问[过](https://stackoverflow.com/questions/4342370/grouping-into-interval-of-5-minutes-within-a-time-range)这个问题，但我面临的问题略有不同。

我有一个记录事件并存储它们的时间戳（作为日期时间）的表。我需要能够将时间分成几块并获取在该时间间隔内发生的事件数。间隔可以自定义（比如从 5 分钟到 1 小时甚至更长）。

显而易见的解决方案是将 datetime 转换为 unix_timestamp 将其除以间隔中的秒数，取其 floor 函数并将其乘以秒数。最后将 unix_timestamp 转换回日期时间格式。

这适用于小间隔。

```
select 
from_unixtime(floor(unix_timestamp(event.timestamp)/300)*300) as start_time,
count(*) as total 
from event 
where timestamp>='2012-08-03 00:00:00' 
group by start_time; 
```

这给出了正确的输出

```
+---------------------+-------+
| start_time          | total |
+---------------------+-------+
| 2012-08-03 00:00:00 |    11 |
| 2012-08-03 00:05:00 |     4 |
| 2012-08-03 00:10:00 |     4 |
| 2012-08-03 00:15:00 |     7 |
| 2012-08-03 00:20:00 |     8 |
| 2012-08-03 00:25:00 |     1 |
| 2012-08-03 00:30:00 |     1 |
| 2012-08-03 00:35:00 |     3 |
| 2012-08-03 00:40:00 |     3 |
| 2012-08-03 00:45:00 |     5 |
~~~~~OUTPUT SNIPPED~~~~~~~~~~~~ 
```

但是如果我将间隔增加到 1 小时（3600 秒）

```
mysql> select from_unixtime(floor(unix_timestamp(event.timestamp)/3600)*3600) as start_time, count(*) as total from event where timestamp>='2012-08-03 00:00:00' group by start_time;
+---------------------+-------+
| start_time          | total |
+---------------------+-------+
| 2012-08-02 23:30:00 |    35 |
| 2012-08-03 00:30:00 |    30 |
| 2012-08-03 01:30:00 |    12 |
| 2012-08-03 02:30:00 |    18 |
| 2012-08-03 03:30:00 |    12 |
| 2012-08-03 04:30:00 |     4 |
| 2012-08-03 05:30:00 |     3 |
| 2012-08-03 06:30:00 |    13 |
| 2012-08-03 07:30:00 |   269 |
| 2012-08-03 08:30:00 |   681 |
| 2012-08-03 09:30:00 |  1523 |
| 2012-08-03 10:30:00 |   911 |
+---------------------+-------+ 
```

据我所知，未正确设置边界的原因是 unix_timestamp 会将时间从我的本地时区 (GMT + 0530) 转换为 UTC，然后输出数值。

所以像 2012-08-03 00:00:00 这样的值实际上是 2012-08-02 18:30:00。划分和使用 floor 会将分钟部分设置为 00。但是当我使用 from_unixtime 时，它​​会将其转换回 GMT + 0530，因此给我从 30 分钟开始的间隔。

无论时区如何，如何确保查询正常工作？我使用 MySQL 5.1.52，所以 to_seconds() 不可用

**编辑：** 无论时间间隔如何（可以是小时、分钟、天），查询也应该正确触发。一个通用的解决方案将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:06:40.753

您可以使用[`TIMESTAMPDIFF`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_timestampdiff)按时间间隔分组：

对于指定的小时间隔，您可以使用：

```
SELECT   '2012-08-03 00:00:00' + 
         INTERVAL FLOOR(TIMESTAMPDIFF(HOUR, '2012-08-03 00:00:00', timestamp) / <n>) * <n> HOUR AS start_time,
         COUNT(*) AS total 
FROM     event 
WHERE    timestamp >= '2012-08-03 00:00:00'
GROUP BY start_time 
```

`2012-08-03 00:00:00`用您的最小输入日期替换出现。

`<n>`是您指定的以**小时**为单位的时间间隔（`2`每小时、`3`每小时等），您可以在几分钟内执行相同的操作：

```
SELECT   '2012-08-03 00:00:00' + 
         INTERVAL FLOOR(TIMESTAMPDIFF(MINUTE, '2012-08-03 00:00:00', timestamp) / <n>) * <n> MINUTE AS start_time,
         COUNT(*) AS total 
FROM     event 
WHERE    timestamp >= '2012-08-03 00:00:00'
GROUP BY start_time 
```

`<n>`您指定的时间间隔在哪里（以**分钟**为单位） （每`45`分钟、每分钟`90`等）。

确保您将最小输入日期（在此示例中`2012-08-03 00:00:00`）作为第二个参数传递给`TIMESTAMPDIFF`.

* * *

***编辑：***如果您不想担心在`TIMESTAMPDIFF`函数中选择哪个间隔单位，那么当然只需按秒计算间隔（300 = 5 分钟，3600 = 1 小时，7200 = 2 小时等）

```
SELECT   '2012-08-03 00:00:00' + 
         INTERVAL FLOOR(TIMESTAMPDIFF(SECOND, '2012-08-03 00:00:00', timestamp) / <n>) * <n> SECOND AS start_time,
         COUNT(*) AS total 
FROM     event 
WHERE    timestamp >= '2012-08-03 00:00:00'
GROUP BY start_time 
```

***EDIT2：***要解决您关于减少声明中必须传入最小参数日期的区域数量的评论，您可以使用：

```
SELECT   b.mindate + 
         INTERVAL FLOOR(TIMESTAMPDIFF(SECOND, b.mindate, timestamp) / <n>) * <n> SECOND AS start_time,
         COUNT(*) AS total 
FROM     event 
JOIN     (SELECT '2012-08-03 00:00:00' AS mindate) b ON timestamp >= b.mindate
GROUP BY start_time 
```

只需将您的最小日期时间参数传入一次连接子选择。

您甚至可以在连接子选择中为您的秒间隔（例如`3600`）创建第二列，并将该列命名为`secinterval`... 然后将`<n>`'s 更改为`b.secinterval`，因此您只需传入最小日期参数和间隔一次.

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/9d854/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:53:27.527

更简单的方法是：

方法1

```
select date(timestamp) as date_timestamp, hour(timestamp) as hour_timestamp, count(*) as total 
from event
where timestamp>='2012-08-03 00:00:00' 
group by date_timestamp, hour_timestamp 
```

如果您想使用原始方法。

方法2

```
select from_unixtime(floor(unix_timestamp(event.timestamp-1800)/3600)*3600+1800) as start_time, 
count(*) as total 
from event 
where timestamp>='2012-08-03 00:00:00' 
group by start_time; 
```

# 编辑1

对于第一种方法，它还允许用户设置不同的间隔。例如，如果用户希望日志按 15 分钟分组，

```
select date(time) as date_timestamp, 
    hour(time) as hour_timestamp,  
    floor(minute(time) as minute_timestamp / 15) * 15 as minute_timestamp
    count(*) as total
from event
group by date_timestamp, hour_timestamp, minute_timestamp 
```

# c# - 关于正则表达式的问题

> ID：11789819
> 
> 赞同：1
> 
> 时间：2012-08-03T05:33:28.947
> 
> 标签：c#, .net, regex

我想匹配我教授给我的 *.sgm 中标签之外的所有“行为”，我知道我们可以使用 XML 解析器，但我们的目标是纯粹学习 REGEX。

这是我目前的正则表达式：

```
(?<![""=<\/])\bthe act\b(?!\>) 
```

这个例子的问题是：

```
<ptext>Test example the act example</ptext> 
```

我的正则表达式匹配“行为”。这是正确的。

但是如果这个例子现在我会尝试：

```
<ptext tags="Test the act">Example the act</ptext> 
```

正则表达式将匹配（2）两个“行为”，一个在标签属性内部，一个在外部，我不想匹配标签内的所有行为，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:39:40.613

也许这会起作用：`(?<=\>[^>]*)the act(?=[^<]*\<)`如果正则表达式引擎允许可变长度向后看，它应该可以工作，我认为 c# 的引擎可以。

# actionscript-3 - 如何在多显示器设置中强制闪存全屏显示到特定显示器

> ID：11789829
> 
> 赞同：0
> 
> 时间：2012-08-03T05:34:51.383
> 
> 标签：actionscript-3, flash

我想让几个 Flash 动画在启动时出现在不同的显示器上。Actionscript 中有没有一种方法可以强制电影在特定显示器上全屏显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:21:50.823

Flash Player 选择要全屏显示的显示器。如果有解决方案，那不是AS3。

“Flash Player 和 AIR 使用度量来确定哪个监视器包含最大的 SWF 部分，并将该监视器用于全屏模式。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:44:01.500

将您的 Flash 动画打包到 AIR 应用程序中 - 然后您可以在属性框/xml 中设置每个应用程序的 x,y。

# facebook - 如何使用 Facebook PHP API 将封面照片更新到任何注册的 Facebook 应用程序用户？

> ID：11789831
> 
> 赞同：0
> 
> 时间：2012-08-03T05:35:03.963
> 
> 标签：facebook

有没有办法使用 PHP API 将 Facebook 封面照片添加到用户个人资料中。

我试过了，但我只能将图像上传到用户相册或照片部分。我无法更新我的应用注册用户封面照片。

我怎么能这样。帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:26:23.377

实际上不可能直接通过 Graph API

# android - 如何从 SDCard 中搜索图像？

> ID：11789832
> 
> 赞同：1
> 
> 时间：2012-08-03T05:35:06.863
> 
> 标签：android, image, sd-card

我已经完成了一个应用程序，它显示了存储在可绘制文件夹中的图像。

现在我想实现一个从 SD 卡/手机内存中搜索图像并将它们显示在缩略图中的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:45:46.457

尝试一些修改它可能会帮助你..

```
 private void walkdir(File dir) 
    {
    String filePattent = ".jpge";
    String filePattentCAP = ".JPGE";
            File listFile[] = dir.listFiles();
            if (listFile != null) 
            {
                for (int i = 0; i < listFile.length; i++) 
                {
                    if (listFile[i].isDirectory()) 
                    {
                        walkdir(listFile[i]);
                    }
                     else if (listFile[i].getName().endsWith(filePattent) || listFile[i].getName().endsWith(filePattentCAP)) 
                    {
                                fileName.add(listFile[i].getName());
                                filePath.add(listFile[i].getAbsolutePath());
                    }
                }
            }
        } 
```

# iphone - 使用返回值管理 CoreGraphics / CoreText 中的内存

> ID：11789835
> 
> 赞同：2
> 
> 时间：2012-08-03T05:35:18.690
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我有一个简单的方法，它接受一个`CTFramesetterRef`对象并从中构建一个`CTTextFrameRef`，如下所示：

```
- (CTFrameRef) createFrameRefWithFramesetterRef:(CTFramesetterRef)framesetterRef
{
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetterRef, CFRangeMake(0, 0), self.mutablePathRef, NULL);
    return frameRef;
} 
```

然后在另一种方法中，我调用了上述方法：

```
- (void) someMethod
{
     CTFramesetterRef framesetterRef = CTFramesetterCreateWithAttributedString((CFMutableAttributedStringRef)self.text);
     CTFrameRef newFrameRef = [self createFrameRefWithFramesetterRef:framesetterRef];
     //do some stuff
     CTRelease(newFrameRef);
     CTRelease(framesetterRef);
} 
```

我只是想验证我是否在这里正确管理了内存，因为我是新手`CoreGraphics`。当`CTFramesetterCreateFrame`被调用时，retain 会自动被调用`frameRef`。我不必担心`frameRef`在返回时释放它，因为它存储在`newFrameRef`其中并且保留计数保持不变。我只需要担心释放`newFrameRef`( `CTRelease(newFrameRef)`)。它是否正确？

更新：我实际上仍然因此而发生内存泄漏，一个在返回线处，另一个在我发布“newFrameRef”的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:49:32.307

C 接口 API 从旧的 Foundarion Kit 命名指南中汲取灵感，该指南有两个不同的（且有用的）命名约定，称为[Get Rule](http://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-SW1)和[Create Rule](http://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029)。为简洁起见：任何包含该词`create`的 C 函数都会返回一个您必须手动管理的引用。因此，要回答您的问题，是的，您确实需要发布它`CTFramesetterRef`，因为您现在手上有泄漏。

# javascript - Java 脚本功能不起作用？

> ID：11789836
> 
> 赞同：0
> 
> 时间：2012-08-03T05:35:27.070
> 
> 标签：javascript, android, html

我在下面使用此代码，但似乎我的 setValue() 方法不起作用。有人可以指出这段代码有什么问题吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script language="javascript"> 
function rand ( n )
{
    document.getElementById("orderRefId").value =  ( Math.floor ( Math.random ( ) * n + 1 ) );
}

function setValue(amount1)
{
    myValue = amount1;
    document.getElementById("amount").value = myValue;
  }

</script>
</head>
<body onLoad="rand( 2000000 )">
        <!-- 
            Note: https://www.pesopay.com/b2c2/eng/payment/payForm.jsp for live payment URL
                  https://test.pesopay.com/b2cDemo/eng/payment/payForm.jsp for test payment URL
        -->
        <form method="POST" name="frmPayment" action="https://test.pesopay.com/b2cDemo/eng/payment/payForm.jsp">
        <table>
        <tbody>
        <tr>
            <td>Order Reference No. (your reference number for every transaction that has transpired):</td> 
            <td><input type="text" id="orderRefId" name="orderRef" value="Test-001"/></td>
        </tr>   
        <tr>
            <td>Amount:</td>
            <td><input type="text" onLoad = "setValue()" name="amount" value=""/></td>

        </tr>
        <tr>
            <td>Currency Code - "608" for Philippine Peso, "840" for US Dollar:</td>
            <td><input type="text" name="currCode" value="608"/></td>
        </tr>   
        <tr>
            <td>Language:</td>
            <td><input type="text" name="lang" value="E"/></td>
        </tr>   
        <tr>
            <td>Merchant ID (the merchant identification number that was issued to you - merchant IDs between test account and live account are not the same):</td> 
            <td><input type="text" name="merchantId" value="18056869"/></td>
        </tr>
        <tr>    
            <td>Redirect to a URL upon failed transaction:</td>
            <td><input type="text" name="failUrl" value="http://www.yahoo.com?flag=failed"/></td>
        </tr>   
        <tr>
            <td>Redirect to a URL upon successful transaction:</td>
            <td><input type="text" name="successUrl" value="http://www.google.com?flag=success"/></td>
        </tr>
        <tr>
            <td>Redirect to a URL upon canceled transaction:</td>
            <td><input type="text" name="cancelUrl" value="http://www.altavista.com?flag=cancel"/></td>
        </tr>
        <tr>
            <td>Type of payment (normal sales or authorized i.e. hold payment):</td> 
            <td><input type="text" name="payType" value="N"/></td>
        </tr>
        <tr>    
            <td>Payment Method - Change to "ALL" for all the activated payment methods in the account, Change to "BancNet" for BancNet debit card payments only, Change to "GCASH" for GCash mobile payments only, Change to "CC" for credit card payments only:</td>
            <td><input type="text" name="payMethod" value="ALL"/></td>
        </tr>
        <tr>    
            <td>Remark:</td>
            <td><input type="text" name="remark" value="Asiapay Test"/></td>
        </tr>
        <!--<tr>    
            <td>Redirect:</td>
            <td><input type="text" name="redirect" value="1"/></td>
        </tr>-->
        <tr>
            <td></td>
        </tr>   

        <input type="submit" value="Submit">
        </tbody>
        </table>
        </form>
    </body>
    </html> 
```

注意：变量“amount1”来自我的 android。它不会导致问题，因为我在其他代码中使用它。

我将非常感谢任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:39:00.220

JavaScript 在 WebView 中处于禁用的默认设置中。您需要先激活它。

```
YourWebView.getSettings().setJavaScriptEnabled(true); 
```

* * *

您还需要更正您的 JavaScript。您调用 function `document.getElementById(...)`，但您的输入元素没有 Id 而是一个名称。所以你需要打电话`document.getElementsByName(...)[0]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:39:49.053

1.你没有id为“amount”的DOMInputElement。您需要像这样更改html：

```
<input type="text" onLoad = "setValue()" name="amount" id="amount" value=""/> 
```

或者像这样的js：

```
function setValue(amount1)
{
    myValue = amount1;
    document.frmPayment.amount.value = myValue;
} 
```

2.第二个问题是您不能将 onLoad 事件附加到输入元素。您可以做的是将 <script/> 与 setValue() 调用或将您的 <body> 标记更改为：

```
<body onLoad="rand(200000);setValue();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:10:34.950

```
 function text() {
        var dt = new Date();
        dt.format("dd-mmm-yyyy");
        var newdt = dt.getFullYear();
        var tt = document.getElementById("ctl00_ContentPlaceHolder1_txtPolicyStartDate").value;           
        var dt2 = new Date.parseLocale(tt, 'dd-MMM-yyyy');     

        dt2.setFullYear(dt2.getFullYear() + 1);
        dt2.setDate(dt2.getDate() - 1);
        document.getElementById("ctl00_ContentPlaceHolder1_txtPolicyExpiryDate").value = dt2.format("dd-MMM-yyyy");
        return dt2;
    } 
```

# javascript - 访问给定的特定内容并更改 html

> ID：11789837
> 
> 赞同：1
> 
> 时间：2012-08-03T05:35:27.943
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, json

嗨thanx对我上一个问题的帮助......它帮助了我很多......但现在我面临另一个问题，我能够每5秒刷新一次“表格”（这是我的代码）

```
function GetStatus() {
    $.ajax({
        url: "/Site/StatusReport/",
        type: "GET",
        data: '',
        contentType: "application/json",
        success: function (result) {
            // var type = $.parseJSON(result);
            var row = "";

            $(result).each(function () {
                // row += "<tr><td>" + this.SiteId + "</td></tr></br>";
                // row += "<tr><td>" + this.SiteName + "</td></tr>";
                // row += "<tr><td>" + this.SiteStatus + "</td></tr>";  
                changeStatus(this.SiteId, this.SiteName, this.SiteStatus);
            });
            // $("#sometable").html(row);
        }
    });
} 
```

并使用以下代码将 json 数据呈现为表

```
<table id="sometable" > 
    <tr> 
        <th></th>
        <th>SiteName</th> 
        <th>SiteStatus</th> 
        <th></th> 
    </tr> 

    <%foreach (var item in (List<MvcList.Models.CenterStatus>)ViewData["table"])
      { %>
        <tr id ="<%= item.SiteId%>"> 
            <td>
               <img  src='../../Content/<%= item.SiteName%>.png'/>
            </td> 
            <td> 
                <%= item.SiteName%>
            </td> 
            <td> 
                <%= item.SiteStatus %>
            </td>          
        </tr> 
    <%} %>
</table> 
```

但是现在我需要根据其值更改特定 SiteStatus 的颜色（例如，如果数据库中的站点状态为“Low Tickets”，我想更改该特定站点状态的颜色......我已经用这个那

```
function changeStatus(data1, data2, data3) {
    if (data3 = "Low Tickets") {
        // $("#sometable[id='" + data1 + "']tr td:nth-child(2)").addClass("LowTicket");
        // $("#sometable tr:nth-child(3)").addClass("LowTicket");
        // $("#sometable tr:nth-child(4)>td:nth-child(3)").addClass("LowTicket");
        $('table #sometable tr:nth-child(' + data1 + ')>td:nth-child(3)').addClass("LowTicket");
    } 
} 
```

但是代码不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:56:06.767

我不知道您想做什么，但我认为您想将第三列的行更改为“LowTicket”类名；

如果是，

您可以在加载数据时调用一次javascript，通过替换

```
$(result).each(function () {
            //                        row += "<tr><td>" + this.SiteId + "</td></tr></br>";
            //                        row += "<tr><td>" + this.SiteName + "</td></tr>";
            // row += "<tr><td>" + this.SiteStatus + "</td></tr>";  
            changeStatus(this.SiteId, this.SiteName, this.SiteStatus);

        }); 
```

至

```
$('#sometable tr>td:nth-child(3)').each(function(){
    if ($(this).html() == "Low Tickets"){
        $(this).parent().addClass("LowTicket"); //For change class of parent rows
        // Or
        // $(this).addClass("LowTicket"); //For change class only status column
    }
}); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:49:30.620

我相信应该是

```
function changeStatus(data1, data2, data3) {
  if (data3 = "Low Tickets") {
    $('#sometable tr#' + data1 + '>td:nth-child(3)').addClass("LowTicket");
  } 
} 
```

看到这个[jsFiddle](http://jsfiddle.net/WLvRM/)

**编辑**

如果您想突出显示所有 LowLevel 行，您可以简单地使用

```
$("tr td:contains('LowTicket')").parent().addClass("LowTicket"); 
```

看[这里](http://jsfiddle.net/WLvRM/)

# ruby-on-rails-3 - 偶尔但不可重复的 TypeError（无法使用默认 proc 转储哈希）：

> ID：11789838
> 
> 赞同：0
> 
> 时间：2012-08-03T05:35:39.630
> 
> 标签：ruby-on-rails-3

我偶尔会在我的生产中遇到这个错误。我无法复制它——不是在开发中，也不是在产品中。如果重新运行导致此错误的相同请求，则在几次尝试后它可以工作。为什么会这样？

另一个问题是异常记录器也没有捕获这个错误——也许这是一个线索，但不确定。欢迎任何建议

```
TypeError (can't dump hash with default proc):
  activesupport (3.2.2) lib/active_support/message_verifier.rb:53:in `dump'
  activesupport (3.2.2) lib/active_support/message_verifier.rb:53:in `generate'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:297:in `[]='
  actionpack (3.2.2) lib/action_dispatch/middleware/session/cookie_store.rb:67:in `set_cookie'
  rack (1.4.1) lib/rack/session/abstract/id.rb:330:in `commit_session'
  rack (1.4.1) lib/rack/session/abstract/id.rb:206:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__462345741__call__579728663__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  rack (1.4.1) lib/rack/sendfile.rb:102:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'

activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-rewrite (1.2.1) lib/rack/rewrite.rb:20:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  railties (3.2.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (3.0.11) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.11) lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
  passenger (3.0.11) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.11) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  passenger (3.0.11) lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/utils.rb:479:in `safe_fork'
  passenger (3.0.11) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.11) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.11) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:42:49.320

那么问题如下我正在将错误填充到flash [：alert]中

```
flash[:alert] = new_user.errors 
```

我把它改成了

```
flash[:alert] = new_user.errors.full_messages.join(",") 
```

并且错误得到了解决。显然错误数组无法转储，因此错误。

# java - 使用 JSF 添加动态内容

> ID：11789845
> 
> 赞同：0
> 
> 时间：2012-08-03T05:36:38.480
> 
> 标签：java, jakarta-ee, jsf-2, facelets

嗨伙计们，我是 JSF 的新手，我陷入了 JSF 问题。我想在我的 JSF 页面中动态添加我的内容。我的要求是我有一个 facelets，我必须在某些事件之后将其添加到我的页面中。

## 我的页面包含

两个字段“用户名”和“答案”
以及
两个按钮“登录”和“恢复密码”

## Facelet 包含

一个字段和一个按钮

现在我希望当我运行我的这个页面时，它应该只显示页面内容（如上所述）
，如果用户按下按钮，`'recover password'`那么它应该在同一页面上的页面组件下显示 facelet 意味着按下按钮后，页面可能包括小面。
但是现在当我运行我的代码时，它会显示两者，因为我没有放置任何逻辑来动态添加第二个 facelet。
这是下面给出的我的代码补丁

```
 <h:inputText id="txtLogin" styleClass="textEntry" required="true" requiredMessage="Username is required."> 
                    </h:inputText>
<h:inputText id="answer" styleClass="textEntry" autocomplete="off" required="true" requiredMessage="Answer is required."></h:inputText>
                                    <h:commandButton id="btnSave" value="Save" styleClass="formbutton" onclick="btnSave_Click" />
                    <h:commandButton id="btnRecover" value="Recover" styleClass="formbutton" onclick="btnRecover_Click"/> 
```

现在我想在`btnRecover_click`单击时包含此 facelet 或运行此代码

```
<div class="divPadding">
            <ui:include id="passrecov" src="ucPasswordRecovery.xhtml" rendered="false"/>
        </div> 
```

请记住，我必须使用 JSF 执行此操作，并且不想使用 JavaScript 执行此操作
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:08:35.243

我将发布一个使用 1 列的示例，请记住您可以使用另一个 ui 容器。

```
<h:form>
    <h:panelGrid id="login">
        <h:panelGrid>
            <h:inputText id="txtLogin" styleClass="textEntry" required="true"
                requiredMessage="Username is required."> 
            </h:inputText>
            <h:inputText id="answer" styleClass="textEntry" autocomplete="off"
                required="true" requiredMessage="Answer is required.">
            </h:inputText>
            <h:commandButton id="btnSave" value="Save" styleClass="formbutton"
                onclick="btnSave_Click" />
            <h:commandButton id="btnRecover" value="Recover" styleClass="formbutton"
                action="#{loginBean.showPassRecovery}" />
        </h:panelGrid>
    </h:panelGrid>

    <h:panelGrid id="passRecovery">
        <h:panelGrid rendered="#{not loginBean.loginEnabled}">
        <ui:include id="passrecov" src="ucPasswordRecovery.xhtml" />
        </h:panelGrid>
    </h:panelGrid>
</h:form> 
```

还有你的托管bean：

```
@ManagedBean
@ViewScoped
public class LoginBean {
    private boolean loginEnabled;

    public LoginBean() {
        loginEnabled = true;
    }

    //getters and setters...

    //this method will return void, so the page will be refreshed with the new
    //loginEnabled value. this time the components inside "login" panelGrid won't be rendered
    //but "passRecovery" panelGrid components will.
    public void showPassRecovery() {
        loginEnabled = false;
    }
} 
```

# django - 为什么我的 django-taggit 通过模型/美味派查询使我的应用程序崩溃？

> ID：11789846
> 
> 赞同：2
> 
> 时间：2012-08-03T05:36:42.800
> 
> 标签：django, tastypie, django-taggit

我对 Django 比较陌生，并且一直在努力通过 sweetpie REST API 实现自定义 django-taggit 应用程序。我对此进行了研究，并不断遇到同样的问题。感谢您提供的任何帮助和指导。

我有一个模型，我正在尝试使用 django-taggit 添加标签。我需要为每个标签添加一个 user_id，以便每个用户都拥有自己的标签列表。出于这个原因，我设置了一个[直通模型，如下所示](http://django-taggit.readthedocs.org/en/latest/custom_tagging.html)。这是我的模型的设置方式：

```
class Tags(TagBase):
    user = models.ForeignKey('UserProfile')

class TaggedMedia(GenericTaggedItemBase):
    tag = models.ForeignKey(Tags, related_name="tagged_items")

class Media(models.Model):
    user = models.ForeignKey('UserProfile')
    # All Other Media Fields
    tags = TaggableManager(through=TaggedMedia) 
```

这会按照我的想法设置数据库表，所以我觉得我走在正确的道路上。

现在，当我尝试通过 TastyPie 访问这些模型时，这就是我遇到问题的地方。我的模型资源设置如下：

```
class TaggedResource(ModelResource):
    tags = ListField()
    user = fields.ForeignKey(UserProfileResource, 'user')

    class Meta:
        queryset = Media.objects.all().order_by('-timestamp').distinct()
        authorization = MediaAuthorization()
        detail_allowed_methods = ['get', 'post', 'put', 'delete','patch']

    def build_filters(self, filters=None):
        if filters is None:
            filters = {}

        orm_filters = super(TaggedResource, self).build_filters(filters)

        if 'tag' in filters:
            orm_filters['tags__name__in'] = filters['tag'].split(',')

        return orm_filters

    def dehydrate_tags(self, bundle):
        return map(str, bundle.obj.tags.all())

    def save_m2m(self, bundle):
        tags = bundle.data.get('tags', [])
        bundle.obj.tags.set(*tags)
        return super(TaggedResource, self).save_m2m(bundle) 
```

现在。这适用于 2 个场景：

1.  对带有标签过滤器的查询运行 GET 查询。
2.  运行 PUT 查询以将现有标签添加到 TaggedMedia 表

但是，如果我使用不在标签表中的标签运行 PUT 查询，它将永远挂起并旋转而没有响应。

对不起，有史以来最长的问题，但希望细节能帮助你。：） 再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:20:24.940

我确信这不是最佳的，但这似乎有效：

```
def save_m2m(self, bundle):
    usrObj = User.objects.get(username=bundle.request.GET['username'])
    tags = bundle.data.get('tags', [])
    print tags

    for tag in tags:
        #check if the tag already exists for that user, if not save it in the DB before we try to reference it with m2m
        try:
            tagCheck = Tags.objects.get(user_id=usrObj.id,name=tag)
        except Tags.DoesNotExist:
            tagCheck = None
        if tagCheck is None:
            t1 = Tags(name=tag, user_id=usrObj.id)
            t1.save()
    #create relationships between tags and media        
    bundle.obj.tags.set(*tags)
    return super(MediaResource, self).save_m2m(bundle) 
```

我快速检查标签是否存在，如果不存在，我快速创建它。这有效，不会崩溃。你觉得这样做有什么问题吗？

# jsf - JSF 2.x @EJB 依赖注入错误

> ID：11789847
> 
> 赞同：2
> 
> 时间：2012-08-03T05:36:50.113
> 
> 标签：jsf, jakarta-ee, jsf-2

因此，正如编程中通常那样，我问了一个问题，一个潜在的解决方案导致了更多问题（和错误）。我是使用 servlet、JSF 和 EJB 的新手，并且遇到了依赖注入错误。

这是我最初的问题：[JSF h tags not displayed](https://stackoverflow.com/questions/11788786/jsf-h-tags-not-displaying)

有人告诉我我需要提出一个新问题，粘贴我的托管 bean 代码和注入错误导致的堆栈跟踪。任何帮助将不胜感激。

托管豆

```
@ManagedBean(name ="draftSavvyController")
@RequestScoped
public class DraftSavvyController 
{
    // ======================================
    // =             Attributes             =
    // ======================================
    @EJB
    private DraftSavvyBean draftBean;
    private Person person;
    private String name;
    private String password;
    private String userType;
    private String searchTerm;
    private static final String apiKey = "4765b95b1bb4ca5248261b7b9af443db";

    // ======================================
    // =           Public Methods           =
    // ======================================
    public String doRegisterUser()
    {
        draftBean.registerUser(name, password, userType);
        return "chooseBeers.xhtml";
    }

    public String doCheckForUser()
    {        
        if(draftBean.checkForUser(name, password))
        {
            return "chooseBeers.xhtml";
        }
        else return "loginerror.xhtml";
    }

    public String searchForBeers() throws MalformedURLException, IOException, JSONException
    {
        draftBean.searchForBeers(searchTerm, apiKey);

        return "displaybeers.js";
    } 
```

堆栈跟踪

```
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean draftSavvyController
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:211)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=com.draftsavvy.frontend.DraftSavvyController/draftBean,Remote 3.x interface =com.draftsavvy.frontend.DraftSavvyBean,ejb-link=null,lookup=,mappedName=,jndi-name=com.draftsavvy.frontend.DraftSavvyBean,refType=Session into class com.draftsavvy.frontend.DraftSavvyController: Lookup failed for 'java:comp/env/com.draftsavvy.frontend.DraftSavvyController/draftBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:194)
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
    ... 56 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=com.draftsavvy.frontend.DraftSavvyController/draftBean,Remote 3.x interface =com.draftsavvy.frontend.DraftSavvyBean,ejb-link=null,lookup=,mappedName=,jndi-name=com.draftsavvy.frontend.DraftSavvyBean,refType=Session into class com.draftsavvy.frontend.DraftSavvyController: Lookup failed for 'java:comp/env/com.draftsavvy.frontend.DraftSavvyController/draftBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:703)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
    ... 57 more
Caused by: javax.naming.NamingException: Lookup failed for 'java:comp/env/com.draftsavvy.frontend.DraftSavvyController/draftBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=com.draftsavvy.frontend.DraftSavvyController/draftBean,Remote 3.x interface =com.draftsavvy.frontend.DraftSavvyBean,ejb-link=null,lookup=,mappedName=,jndi-name=com.draftsavvy.frontend.DraftSavvyBean,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean' [Root exception is javax.naming.NamingException: Lookup failed for 'com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean not found]]]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
    ... 60 more
Caused by: javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=com.draftsavvy.frontend.DraftSavvyController/draftBean,Remote 3.x interface =com.draftsavvy.frontend.DraftSavvyBean,ejb-link=null,lookup=,mappedName=,jndi-name=com.draftsavvy.frontend.DraftSavvyBean,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean' [Root exception is javax.naming.NamingException: Lookup failed for 'com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean not found]]
    at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:191)
    at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$EjbReferenceProxy.create(ComponentEnvManagerImpl.java:1109)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
    at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
    ... 64 more
Caused by: javax.naming.NamingException: Lookup failed for 'com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean not found]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:186)
    ... 69 more
Caused by: javax.naming.NameNotFoundException: com.draftsavvy.frontend.DraftSavvyBean#com.draftsavvy.frontend.DraftSavvyBean not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
    ... 73 more 
```

无状态 Bean

```
@Stateless
public class DraftSavvyBean implements DraftSavvyBeanRemote {

    // ======================================
    // =             Attributes             =
    // ======================================

    @PersistenceContext(unitName = "DraftSavvyFrontEndPU")
    private EntityManager em;

    // ======================================
    // =           Public Methods           =
    // ======================================
    public void registerUser(String username, String password, String userType)
    {
        //code here
    }

    public boolean checkForUser(String username, String password)
    {
        //code here
    } 

    public void searchForBeers(String searchTerm, String apiKey) throws MalformedURLException, IOException, JSONException
    {
        //code here
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:45:28.683

正如 Petr Mensik 所说，您可能不需要远程 EJB（除非您计划从不同的服务器调用该 ejb 的方法）。您可以使用`@Local`接口，甚至根本不使用接口。只需声明 bean @Stateless 并删除`implements DraftSavvyBeanRemote`.

如果确实使用接口（本地或远程），则必须注入对接口的引用，而不是 bean。所以你的注入应该是这样的。

```
@EJB
private DraftSavvyBeanRemote draftBean; 
```

# java - 对齐黑莓的布局设计问题

> ID：11789856
> 
> 赞同：2
> 
> 时间：2012-08-03T05:37:54.120
> 
> 标签：java, blackberry

我正在开发一个应用程序，我需要在其中设置两个按钮`HorizontalFieldManage`。一个`Bitmap`应该留在左边，另一个`LabelField`应该水平居中。在这里，我尝试了很多次，但无法先`Bitmap`在左侧设置，所以请你帮我解决这个问题..

**这是我的代码::**

```
VerticalFieldManager VFM = new VerticalFieldManager(USE_ALL_WIDTH){
            public void paint(Graphics g) {
                g.setBackgroundColor(Color.WHITE);
                g.clear();
                super.paint(g);
            }
        };
        HorizontalFieldManager HFM = new HorizontalFieldManager(FIELD_HCENTER){
            public void paint(Graphics g) {
                g.setBackgroundColor(Color.WHITE);
                g.clear();
                super.paint(g);
            }
        };

        Bitmap logom1;
        logom1 = Bitmap.getBitmapResource("logo48X48.png");
        BitmapField imgField = new BitmapField(logom1,Field.FIELD_LEFT);
        LabelField RegistrationLbl = new LabelField("Registration",FIELD_HCENTER | FIELD_BOTTOM);

        FontFamily fontFamily[] = FontFamily.getFontFamilies();
        Font font = fontFamily[1].getFont(FontFamily.CBTF_FONT, 20);
        font = fontFamily[1].getFont(Font.BOLD, 25);
        RegistrationLbl.setFont(font);

        HFM.add(imgField);
        HFM.add(RegistrationLbl);

        VFM.add(HFM);
        add(VFM); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:55:08.943

Signare 的通用解决方案可以工作，但左边距不太正确。`HFM`在将标签添加到对象之前，您需要添加的唯一调用是这些（为了清楚起见分为两行） ：

```
int labelX = (Display.getWidth() - RegistrationLbl.getPreferredWidth()) / 2;
RegistrationLbl.setMargin(0, 0, 0, labelX - imgField.getPreferredWidth()); 
```

这假定它所在的类 ( `Manager`) 占据了整个屏幕宽度 ( `Display.getWidth()`)。

[阅读这篇文章以获得关于什么是边距的很好的描述](https://stackoverflow.com/a/9812241/119114)。

另外，请注意，`setMargin()`在 6.0 之前的 API 中没有记录，但我相信它实际上可以（但未记录）回到 OS 4.5 左右。

**编辑：**顺便说一句，您正在分配您的`font`对象，然后立即将其分配给其他东西。这看起来也不对，尽管它不会影响标签居中的问题。

**另一个编辑：**如 Rupak 的评论所示，此代码仅在您有固定方向显示时才有效。如果标签应该再次以设备方向更改为中心，那么您需要的不仅仅是这个。如果需要，请对问题进行更多说明，有人会提供帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:11:31.087

试试这个（这不是正确的方法）-

```
 HorizontalFieldManager VFM = new HorizontalFieldManager(){
        public void paint(Graphics g) {
        g.setBackgroundColor(Color.WHITE);
        g.clear();
        super.paint(g);
        }
        };

        HorizontalFieldManager LogoHFM = new HorizontalFieldManager(FIELD_LEFT);
        Bitmap logom1;
        logom1 = Bitmap.getBitmapResource("logo48X48.png");
        BitmapField imgField = new BitmapField(logom1);
        LogoHFM.add(imgField);

        LabelField RegistrationLbl = new LabelField("Registration",FIELD_HCENTER);
        FontFamily fontFamily[] = FontFamily.getFontFamilies();
        Font font = fontFamily[1].getFont(FontFamily.CBTF_FONT, 20);
        font = fontFamily[1].getFont(Font.BOLD, 25);
        RegistrationLbl.setFont(font);
        RegistrationLbl.setMargin(0,0,0,(Display.getWidth()-logom1.getWidth())/4);

        VFM.add(LogoHFM);
        VFM.add(RegistrationLbl);
        add(VFM); 
```

# spring - 使用 Spring 3 的 Transaction 框架背后的设计原则

> ID：11789857
> 
> 赞同：0
> 
> 时间：2012-08-03T05:37:55.983
> 
> 标签：spring, transactions, aspectj

我已经通过 spring 和 AspectJ 浏览了许多关于 tx 的帖子。下面是总结，说，我有一个服务类和它的接口

```
interface TestService {
 void methodA();
 void methodB();
}

class TestServiceImpl implements TesService {

   @Transactional
   void methodA() {
      methodB();
   }

   @Transactional(propagation=Propagation.NEVER)
   void methodB(){}
} 
```

还有我的配置

```
<tx:annotation-driven transaction-manager="jpaTxManager"/>

<bean id="jpaTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory"><ref bean="entityManagerFactory"/></property>
<property name="dataSource"><ref bean="dataSource"/></property>
</bean>

<bean id="testService" class="com.motherframework.plugin.test.service.TestServiceImpl">
     <property name="testDAO" ref="testDAO"/>
</bean> 
```

我是`testService.methodA()`从某个客户班打来的。按照spring的JDK动态代理使用，只会关心`@Transactional`on `methodA()`，不关心`@Transactional(propagation=Propagation.NEVER)`on `methodB()`。因此代码通过正确的事务和提交执行。如果我们使用 AspectJ 模式，那么它也会检查`@Transactional(propagation=Propagation.NEVER)`on`methodB()`并抛出异常。

现在我的问题是，为什么这个限制是由 Spring 强加的？现在Spring设计有两种可能，

1.  Spring 的技术限制是他们无法检查 methodB() 中的注释，尽管它是公开的？但是如果 AspectJ 可以检查它，那为什么不是 Spring 呢？

2.  他们有意限制了这种 AOP 检查内部方法调用。这种方法调用（目标方法用不同的 transactionPropagation 注释）是否违反了正确的设计方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:06:53.423

是的，这是技术限制。当您不使用 AspectJ 时，事务方面是通过在实际 bean 类实例周围返回一个代理并将此代理返回/注入其他 bean 来实现的。因此，当您致电时`testService.methodA()`，（基本上）会发生以下情况：

```
caller ---> transactionalProxy.methodA() ---> testServiceImpl.methodA() 
```

代理在调用周围应用事务方面`testServiceImpl.methodA()`：它在之前启动事务，并在之后提交/回滚它。

如果您`this.methodB()`从调用`methodA()`，会发生以下情况：

```
caller ---> transactionalProxy.methodA() ---> testServiceImpl.methodA() ---> testServiceImpl.methodB() 
```

而且由于您绕过代理，因此无法应用任何事务方面。

AspectJ 是不同的，因为它转换字节码`TestServiceImpl`以便在各种方法调用周围应用方面。

我不会说围绕内部方法调用应用方面不是正确的设计。您只需要知道它仅适用于字节码检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T13:24:03.893

这是一个技术限制（正如其他人所回答的那样）。如果你想让 Spring 检查这个，你可以像这样修改你的服务：

```
class TestServiceImpl implements TesService {

   TesService thiz; // setter left outside, assumed to be injected by Spring

   @Transactional
   void methodA() {
      thiz.methodB();
   }

   @Transactional(propagation=Propagation.NEVER)
      void methodB(){}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:21:20.147

这里的想法是，最外层的方法知道什么对整个事务最有利。但是，正如您所注意到的，存在一些极端情况。

解决方法：将方法的实现移动到第二个 bean 并将该 bean 注入到您的`TestServiceImpl`. 由于您将获得代理注入，因此所有方法调用都会注意注释。

您将需要拆分一些方法。如果你有这种情况：

```
methodX() {
     ...code before...
     methodB();
     ...code after...
} 
```

您可以使用回调：

```
methodX() {
     Callable<Void> callback = new Callable<Void>() {
         Void call() {
              realImpl.methodB();
         }
     }
     realImpl.methodX(callback);
} 
```

在你的内心豆中：

```
void methodX(Callable<Void> callback) {
     ...code before...
     callback();
     ...code after...
} 
```

# java - 如何在 java 项目中管理适当的结构

> ID：11789861
> 
> 赞同：0
> 
> 时间：2012-08-03T05:38:11.400
> 
> 标签：java, database-design, project-management

我经常遇到这个问题。想不出办法来面对这种情况。现在我得到了这个很棒的论坛！我相信这里的专家会帮助我解决这个问题。

这不是关于特定代码段之类的问题。我有能力（我认为）用java做一些高级项目。这意味着，简单地说，我可以完成项目以给出确切的结果。

但问题是，虽然我可以完成它，但我对班级等的管理并不满意。实际上我不知道如何妥善管理它。考虑到我目前正在从事的项目，我将解释一下（我不是专业的编码员，这将是为了我的自学）。

我正在开发一个数据库管理系统（MySQL + Java）。我希望在那里实现几个功能。流程大致是这样的。

```
1\. Login
2\. Main window 
```

主窗口将是这样的。

![在此处输入图像描述](../Images/04266aeac7ecf4c649350e88904e144f.png)

在左侧面板中，您可以选择需要执行的操作。

```
Eg.

*. Add some entries to the database

*. Search database

*. Other..(will be add later) 
```

有人可以告诉我如何管理所有这些东西，两个框架和几个面板。

我所做的是这样的。

我写了一个`managerClass`具有主要方法的。然后它会`loginFrame`先调用。验证后，`loginFrame`调用 , 中的方法`managerClass`进行加载`mainFrame`。但是我`managerClass`在所有框架、面板等中都保留了对 的引用，因为我将所有必需的信息保存在 中`managerClass`，例如用户名等。

但是当修改和调试时，事情变得非常非常困难。因为我没有按照任何特定的规则做事。我将不得不修改几乎所有的类来进行轻微的修改。我虽然有很多和大海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:01:46.330

根据我对您的应用程序的了解，您的主要问题是组件与应用程序的不同层（表示、交互控制、域逻辑）之间的耦合。我建议使用两种可能有帮助的设计模式（或样式）：

1.  Model-View-Presenter：将模型/域逻辑与表示（视图）与控制用户交互的逻辑分开。我最近在一个大型应用程序中使用了它，我发现它确实有助于以一种干净的方式分离关注点，并使测试变得更加简单。请不要将其与 Model-View-Controller 模型混淆，后者很接近，但存在很多问题。[Martin Fowler](http://martinfowler.com/eaaDev/uiArchs.html)有一篇很好的文章描述了这两种模式
2.  在组件之间采用基于[事件的交互](http://martinfowler.com/eaaDev/EventCollaboration.html)。与其让 Login 框架调用 Manager 类，不如让它触发一个事件（“用户认证”），该事件由感兴趣的组件处理。例如，您可能在主窗口中有一个小的用户帐户详细信息面板，该面板在触发此事件之前不会显示。不幸的是，我不知道任何纯 Java 的事件框架（我怀疑如果你正在使用它进行开发）我使用的是 Google Web Toolkit。

# ruby-on-rails - 切换数据库中的属性

> ID：11789866
> 
> 赞同：1
> 
> 时间：2012-08-03T05:38:29.630
> 
> 标签：ruby-on-rails, database, oauth, boolean

如果用户没有使用 twitter 或 facebook 注册，则 provider 属性为空白，并且用户是专业用户。我已将 pro 属性作为布尔值添加到数据库中，默认值为 false。

我正在尝试使用下面的代码将数据库中的 pro 属性切换为 true。

```
 def pro?
    toggle!(:pro) if provider.blank? 
  end 
```

但是我得到这个错误。

```
stack level too deep 
```

我也试过def pro？:pro => 如果 provider.blank 为真？结束但得到这个错误：

```
 syntax error, unexpected tASSOC, expecting keyword_end 
```

注意我还需要使用 pro 方法，因为它在代码中的许多其他地方都使用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:50:37.420

例如，当您在 ActiveRecord 数据库上定义布尔列时`:pro`，您将免费获得`pro?`方法。当你用`pro?`这种方式覆盖时，它会提高`stack level too deep`. 因此，请考虑重命名您的方法，例如：

```
def toggle_pro?
  toggle!(:pro) if provider.blank? 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:11:02.607

```
def toggle_pro
  self.pro = !self.pro if provider.blank?
  self.save!
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:07:08.567

如果您将`pro`属性定义为布尔值，则以下方法均可免费使用：

*   `pro?``pro`: 返回属性的布尔值
*   `pro=`: 设置值`pro`

一个以 a 结尾的 ruby​​ 方法`?`应该返回一个布尔值，没有任何副作用。

在你的情况下，我会做的是添加一个回调：

```
class User

  before_save :check_pro_status

  def check_pro_status
    pro = provider.blank?
  end

end 
```

这将确保每次更改您的`user`, 在保存之前，它将`pro`根据提供者正确设置 -status。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T09:21:52.073

**[现在您可以使用ActiveRecord#toggle](http://apidock.com/rails/ActiveRecord/Base/toggle)**方法简单地切换您的布尔字段

例如：

```
@user.toggle!(:pro) 
```

如果您的记录是，`false`那么它将成为`true`或反之亦然。如果您使用过，则无需对您的对象进行`save`/`update`调用`toggle!`。

**Note:** The method skips validations and callbacks. Attribute must be passed as a symbol.

# ruby-on-rails - db：迁移现有模型时出错

> ID：11789867
> 
> 赞同：3
> 
> 时间：2012-08-03T05:38:33.700
> 
> 标签：ruby-on-rails

我在 rake db:migrate 中遇到问题。当我使用脚手架创建模型，运行 db:migrate 然后使用脚手架 d 帖子删除模型时，问题就开始了。

现在我再次使用脚手架 g 创建了模型，并运行了 db:migrate。由于用户表已经存在，它给了我一个错误。我该如何补救？

```
murtaza@murtaza-dev:~/workspace/rails/base$ rake db:migrate
==  CreatePosts: migrating ====================================================
-- create_table(:posts) rake aborted! An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: table "posts" already exists: CREATE TABLE "posts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "content" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 

Tasks: TOP => db:migrate (See full trace by running task with --trace) murtaza@murtaza-dev:~/workspace/rails/base$ rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
==  CreatePosts: migrating ====================================================
-- create_table(:posts) rake aborted! An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: table "posts" already exists: CREATE TABLE "posts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "content" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)  /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `initialize' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `new' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `prepare' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:134:in `execute' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:278:in `block in execute' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:278:in `execute' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/schema_statements.rb:170:in `create_table' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:466:in `block in method_missing' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:438:in `block in say_with_time' /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:280:in `measure' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:438:in `say_with_time' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:458:in `method_missing' /home/murtaza/workspace/rails/base/db/migrate/20120802061742_create_posts.rb:3:in `change' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:407:in `block (2 levels) in migrate' /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:280:in `measure' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:407:in `block in migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:123:in `with_connection' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:389:in `migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:528:in `migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:720:in `block (2 levels) in migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `call' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `block in ddl_transaction' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/transactions.rb:208:in `transaction' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `ddl_transaction' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:719:in `block in migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:700:in `each' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:700:in `migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:570:in `up' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/migration.rb:551:in `migrate' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.6/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain' /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `load' /home/murtaza/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `<main>' Tasks: TOP => db:migrate 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T05:48:50.163

尝试

```
rake db:drop && rake db:create && rake db:migrate && rake db:schema:dump && rake db:test:prepare 
```

或者

```
rake db:schema:load 
```

请参阅： [清除或重新创建 Ruby on Rails 数据库](https://stackoverflow.com/questions/4116067/how-to-recreate-the-database)

多次迁移不止一次创建用户表。您可以手动查看每个迁移并删除创建表查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:54:07.050

AFAIK`scaffold d`不会生成用于删除表的迁移，您必须自己执行此操作。您可以手动添加迁移以删除表：

```
def up
    drop_table :posts
end
def down
    raise ActiveRecord::IrreversibleMigration
end 
```

并且`rake db:migrate`，只需确保它出现在您尝试`posts`再次创建的新迁移之前。`sqlite3`或者，您可以使用命令行工具打开数据库，然后`drop table posts;`手动删除表。

# ruby-on-rails - 如何路由到新的 Rails 控制器操作

> ID：11789869
> 
> 赞同：0
> 
> 时间：2012-08-03T05:38:47.667
> 
> 标签：ruby-on-rails, routing, routes

我是 Rails 新手，遇到过这个问题。

我有一个 books_controller，我在其中定义了一个名为下载的新操作：

```
def download
  @book = Book.find(params[:id])

  return send_file @book.get_filepath, :type => 'application/pdf', :filename => @book.get_filename
end 
```

我的 routes.rb 就像：

```
resources :books
match '/books(/download(/:id))', :controller => "books", :action => "download" 
```

我想创建一个类似 /books/download/10 的 URL 来调用下载操作。

我不确定如何创建该链接。我曾尝试阅读有关路由的 Rails 指南，但对此感到非常困惑。

我努力了

```
<td><%= link_to books_download_path(book) %></td> 
```

它显然不起作用。

```
undefined method `books_download_path' for #<#<Class:0x682ac40>:0x482cad8> 
```

我很感激这方面的任何帮助。

谢谢

PS 也许 /books/10/download 比 /books/download/10 更有意义

index.html.erb

```
<table>
<% @recent_books.each do |book| %>
    <tr>
        <!-- <td><%= image_tag(book.get_thumbnail) %></td> -->
        <td><%= truncate(book.get_title, :length => 30) %></td>
        <td><%= book.get_author %></td>
        <td><%= book.get_summary %></td>
        <td><%= truncate(book.get_filename, :length => 30) %></td>
        <!-- <td><%= link_to 'Download', book %></td> -->
        <td><%= link_to "Download", download_book_path(book) %></td>
    </tr>
<% end %>
<table> 
```

路线.rb

Caliberator::Application.routes.draw 做资源 :authors

```
resources :books do
  get :download, :on => :member, :to => 'books#download'
end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:57:48.057

对于 Rails 3，试试这个

```
resources :books do
  get :download, :on => :member, :to => 'books#download'
end 
```

现在，在您看来，您可以使用。

```
<%= link_to 'Download', download_book_path(book) %> 
```

这将生成`books/10/download`类型链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:57:17.720

尝试关注

```
match '/books(/download(/:id))', :controller => "books", :action => "download", :as => "books_download" 
```

参考：[-naming_routes](http://guides.rubyonrails.org/routing.html#naming-routes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:48:04.523

对于 rails 3，你应该写：

```
resources :books do
  member do
    get 'download'
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:03:17.520

你必须这样做：

```
<%= link_to "Download", download_books_path + "/#{book.id}" %> 
```

# excel - 保护图表名称

> ID：11789872
> 
> 赞同：1
> 
> 时间：2012-08-03T05:39:17.227
> 
> 标签：excel, vba

有谁知道是否有办法保护图表名称以使用户无法更改它？我有很多引用各种图表的代码。如果用户要更改一个或多个图表名称，事情很快就会变得难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:56:10.113

我可能会为您提供解决方案，但它会带来一些开销。

您可以为您正在使用的每个图表添加一个*真实*图表，并希望在您的工作簿中具有名称保护。它们在您的工作簿中显示为单独的选项卡（如表格）。

看起来像这里：

![在此处输入图像描述](../Images/a64e3795051922e00a27c96fbd26d9a3.png)

右键单击您的图表并选择*移动图表*，然后选择*新工作表*。这样，您将拥有“更好”的图表对象，您可以通过 VBA 或 Ribbon-Menue 单独保护它们，并且您有一个内部**CodeName**！

像这儿：

![在此处输入图像描述](../Images/35fab3617c315b17b958e591f2c5ce80.png)

使用内部代码名称应该解决您的用户问题，因为他们可以按照他们想要的方式命名它们，您也可以；）我不信任索引 8 并且讨厌使用用户定义的名称 - 代码名称是最好的，除了处理在代码中，但这只是一个主要的 vba 缺陷。

我猜想，这些额外的图表会让你有点厌烦，所以只需让它们不可见，并将它们的副本用作表格中的 ChartObjects。

这应该是它。

此外，我偶然发现了一个有趣的事实，即您实际上只能通过将图表名称保护为受保护表中的嵌套对象来保护它。即使通过我的尝试，用户也可以更改名称，除非您使用它保护工作簿结构和所有表格/图表名称。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T16:48:27.637

试试这样的代码。将“Sheet1”更改为“图表#”。最后一点（注释掉 & Workbook.Sheets.Count）可以添加回您的编码中，以添加增量命名，如果您有许多图表，如您所记。

```
 ThisWorkbook.VBProject.VBComponents(Sheets("Sheet2").CodeName).Name = "NewChartName" ' & Workbook.Sheets.Count 
```

# git - 我怎样才能让两个“发展流”（分支？）相互跟踪，同时以特定方式保持不同？

> ID：11789875
> 
> 赞同：6
> 
> 时间：2012-08-03T05:39:23.143
> 
> 标签：git, mercurial, dvcs, bazaar

简短的：

我想让两个（或更多）“开发流”/环境相互跟踪，在两个方向上相互发送变化，而不是完全收敛——同时保留某些关键的、基本的差异？

细节，一个特别的例子：

这是一个特殊的例子：

哦，28 年来，我一直在控制我的主目录 glew-home 的版本。RCS、SCCS、许多 RCS 包装器、CVS、SVN，对早期 DVCS（如 Monotone 和 Darcs、bzr、git 以及现在的 Mercurial）的短暂实验。目前我主要喜欢使用 Mercurial，尽管我会根据需要跳回 git 或 bzr。

现在，我的主目录在许多系统上都是相似的，但并不完全相同。最大的区别在于 Cygwin 和工作中的各种 Linux 之间。我试图让它们尽可能相似，但差异会出现，并且经常需要坚持。

这是差异的一个简单示例：在 Cygwin 上，在我个人拥有的笔记本电脑上，~/LOG 是指向 ~/LOG.dir/LOG.cygwin.glew-home 的符号链接，而在工作中 ~/LOG 是指向某些东西的符号链接比如~/work/LOG.dir/LOG.work。

原因：任何专有的东西都需要继续工作。~/work 是一个单独的存储库，~/work/.hg，不会被推/拉或以其他方式与我的个人计算机同步。

问题：我想保持这些符号链接（和其他几个文件）不同。但我想同步所有其他文件。我在这两个地方都改变了我的环境。如果我在工作中对 ~/.emacs 进行更改，我想将其发送回家，反之亦然。

问：我怎样才能最方便地做到这一点？

在过去糟糕的日子里，我会使用一个通用的存储库，比如一个通用的 CVS 存储库。CVS 不处理符号链接，但说我有一个脚本，它从存储在 CVS 中的模板生成符号链接。我会安排 ~/LOG 的符号链接模板为我的 cygwin-laptop 和工作提供不同的分支。我将创建工作区，其中大多数文件指向其相应 RCS/CVS 存储库的同一分支，而 cygwin-linux 和 work 之间不同的文件会将其相应的分支检出到相应的工作区中。

这很有效，尽管维护起来有点痛苦。

我还没有想出用现代 DVCS 来做到这一点的好方法，比如 Mercurial（或 Got，或 Bzr）。

这些现代 DVCS 工具执行整个 repo 分支，而不是每个文件分支。他们不理解两个分支对于大多数文件是相同的但仅在某些文件中不同的概念。

当我尝试跟踪两个分支时，我总是以传播本质差异而告终。

有些人建议使用 Makefile。没有吸引力。

我已经考虑过对基础转速进行基本更改，并不断重新调整基础。但我不喜欢这么多变基。

更好的想法表示赞赏。

被子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:31:52.813

在 git 中，您可以维护一个`master`包含所有公共文件的分支（可能加上某些默认状态下的不同文件）和*自定义*分支，如`work`or `cygwin`。

当您想要做出应该传播到每台机器的更改时，您在`master`. 如果你想让某些东西只在工作/cygwin 机器上运行，你可以在适当的分支中进行。

*当您从已签出自定义*`master`分支的机器上提取新更改时，您只需访问该分支或从该分支中​​提取。*`git merge master``git rebase master`*

 *您应该使用哪一个是一个偏好问题，生成的工作目录是相同的，只是历史记录不同。使用您将*始终*`merge`看到您何时使用. 使用它看起来就像所有自定义都从 master 的尖端分支出来，好像您首先在 master 中完成了所有操作，然后才提交任何自定义。*`master``rebase`*

 *不幸的是，我不知道其他 DVCS，因为我对它们没有任何经验，但是，我相信 git 的这个过程非常简单。**

# php - 使用 PHP 将整个目录和内容从一个位置复制到另一个位置

> ID：11789876
> 
> 赞同：0
> 
> 时间：2012-08-03T05:39:30.207
> 
> 标签：php, directory, copy

我正在尝试使用 PHP 将整个文件夹从一个位置复制到另一个位置，但它似乎不起作用：

```
$username = "peter" //this is just an example.
$userdir = "../Users/".$username."/";
mkdir($userdir);// create folder 

// copy image folder
$source = "templates/template1/images/";//copy image folder -source
$dest = $userdir;

function copyr($source, $dest){
// Simple copy for a file
if (is_file($source)) {
$c = copy($source, $dest);
chmod($dest, 0777);
return $c;
}

// Make destination directory
if (!is_dir($dest)) {
$oldumask = umask(0);
mkdir($dest, 0777);
umask($oldumask);
}

// Loop through the folder
$dir = dir($source);
while (false !== $entry = $dir->read()) {
// Skip pointers
if ($entry == "." || $entry == "..") {
continue;
}

}

// Clean up
$dir->close();
return true;
} 
```

我还尝试了我在网上看到的其他解决方案，但没有成功。将不胜感激任何可能的帮助

* * *

我也只是尝试了这个脚本，没有任何运气。

我刚刚尝试了另一个脚本，但仍然没有运气:(。

```
$template_homepage = "templates/template1/index.php";//path to default template homepage
$homepage = file_get_contents($template_homepage);//get default homepage structure

$username = testuser;// folder name for store

if (trim($username) == '') {
die("An error occured.");
} else {
$userdir = "../Users/".$username."/";
mkdir($userdir);// create folder for new website

// copy image folder
$src = 'templates/template1/images';//copy image folder -source
$dst = $userdir;

   function rcopy($src, $dst) {
  if (file_exists($dst)) rrmdir($dst);
  if (is_dir($src)) {
mkdir($dst);
$files = scandir($src);
foreach ($files as $file)
if ($file != "." && $file != "..") rcopy("$src/$file", "$dst/$file"); 
}
  else if (file_exists($src)) copy($src, $dst);

}

$fh = fopen($userdir."index.php", 'w') or die("An error occured. ");// create home page in users folder

   // $stringData = $title; //."\n";//
   fwrite($fh, $homepage);// write homepage structure into new homepage file.
    fclose($fh);// close new homepage file.
 $launchpage = "../Users/".$username."/"; // launch new homepage file.
header("Location: $launchpage");
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:41:38.567

为什么不使用[exec](http://php.net/manual/en/function.exec.php)并使用 OS 命令复制文件夹？

```
exec('cp -r sourcedir destdir'); 
```

# .net - 不包含单词列表的正则表达式匹配序列 (.NET)

> ID：11789877
> 
> 赞同：15
> 
> 时间：2012-08-03T05:39:38.583
> 
> 标签：.net, regex

用于搜索的源文本：

```
/russia/moscow-region/moscow/mitino_m
/russia/moscow-region/moscow/planernaya_m
/russia/moscow-region/outside
/russia/moscow-region/moscow/otradnoe_m
/russia/moscow-region/outside/podol-sk
/russia/moscow-region/foreign/mexico
/russia/moscow-region/moscow
/russia/moscow-region/abrakadabra/u-lalala
/russia/moscow-region/outside/himki
/russia/moscow-region/moscow/preobrajenskaya_pl_m 
```

正则表达式在这里：

```
russia/moscow-region/(moscow|outside).*$ 
```

你可以在这里看到结果：[http ://www.myregextester.com/?r=7f93ce7f](http://www.myregextester.com/?r=7f93ce7f)

我需要反转这个表达式以匹配所有`moscow, outside`在“russia/moscow-region/”字符串值之后不包含单词的值。如何改变它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-03T05:42:41.113

将其分组为 NOT：

```
russia/moscow-region/(?!(moscow|outside)).* 
```

# tridion - 在 SDL Tridion 2011 Sp1 中访问除 RenderComponentPresentaion 之外的组件表示的方法

> ID：11789889
> 
> 赞同：0
> 
> 时间：2012-08-03T05:40:04.607
> 
> 标签：tridion, tridion-2011

在 Dreamweaver 模板中，我们可以通过两种方式访问​​组件的字段。

```
 1.@@Component.Field.FieldName@@
  2.@@RenderComponentField("FieldName",0)@@ 
```

类似于访问组件表示

```
 1.RenderComponentPresentation() 
```

有没有办法以另一种方式访问​​它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:43:00.153

> 你真的应该考虑编辑你的问题并澄清一下，以更清楚地说明你在问什么。阅读您驳回的所有答案及其评论，我认为您想要完成的是让页面上的一些组件演示文稿可编辑，而其他则不是。

根据您使用的 SiteEdit 版本，有两种解决方案：

1.  SiteEdit 2009 SP3 - 您应该从您不想编辑的组件模板中删除内联编辑 TBB，页面仍会在组件演示文稿上生成悬停，以便可以移动它。

2.  UI 2012（新 UI 或 Experience Manager）- 您可以通过组件模板中的复选框禁用每个组件模板的内联编辑。

如果您还需要删除组件演示文稿上的悬停，那么我认为唯一的解决方案是删除页面模板的内联编辑功能（对于 SE 2009 SP3，删除 TBB 并在 UI 2012 上禁用它页面模板）并在页面模板中自己生成所有需要的 SiteEdit 标记。

所有这一切的一个有趣的问题是“为什么？”，您究竟有什么要求只需要对页面上的某些内容启用内联编辑。因为您也可以通过某些用户组的（编辑）权限来实现这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:41:50.010

Tridion、SiteEdit 2009 和新的 UI/Experience Manager 附带的默认 TBB 都坚持围绕组件表示和组件字段生成标记。您可以控制它们生成的标记元素，但目前无法关闭它们。

为了获得这样的完全控制，我创建了一个用于 DWT 模板的简单扩展函数。你可以在这里找到它：[http ://code.google.com/p/tridion-practice/wiki/TridionUI2012FunctionsForUseInHtmlTemplates](http://code.google.com/p/tridion-practice/wiki/TridionUI2012FunctionsForUseInHtmlTemplates)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:09:50.813

RenderComponentPresentation 将来自页面模板，第一个示例来自组件模板，或者在例如重复区域内：

```
<!-- TemplateBeginRepeat name="Components" -->

    Fields.*FieldName*

<!-- TemplateEndRepeat --> 
```

但无论哪种方式，你为什么要问？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:12:49.530

您还可以使用以下代码从另一个组件模板中调用 RenderComponentPresentation：

```
@@RenderComponentPresentation(Component.ID, ComponentTemplate.ID)@@ 
```

其中参数是您希望渲染的组件的 tcm id，以及用于渲染它的模板。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T06:29:53.613

对于动态组件演示，您可以在页面模板中使用以下内容：

```
<tcdl:ComponentPresentation type="Dynamic" componentURI="${ComponentID}" templateURI="${DynamicComponentTemplateID}" /> 
```

但在这种情况下，这些动态组件演示不会在发布页面期间发布。因此，您应该在发布页面之前发布它们。

# java - 将文件上传到云帐户

> ID：11789891
> 
> 赞同：0
> 
> 时间：2012-08-03T05:40:21.683
> 
> 标签：java, cloud

我需要开发一个应用程序，它会定期将文件从我的本地机器上传到云帐户（cloudme 帐户）。我用 Java 和 apache commons 试过这个。但我不能。我遵循什么技术。我在哪里可以找到这方面的教程？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:47:20.293

**1.**我总是喜欢`Apache's common libs`

我还附加了我用来上传和下载歌曲到 ftp 服务器的程序，使用 apache 的公共库

**上传：**

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("192.168.2.57");

            if (con.login("Administrator", "KUjWbk"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/vivekm4a.m4a";

                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/vivekm4a.m4a", in);
                in.close();
                if (result) Log.v("upload result", "succeeded");
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    } 
```

**下载：**

```
public void goforIt(){
    FTPClient con = null;

    try
    {
        con = new FTPClient();
        con.connect("192.168.2.57");

        if (con.login("Administrator", "KUjWbk"))
        {
            con.enterLocalPassiveMode(); // important!
            con.setFileType(FTP.BINARY_FILE_TYPE);
            String data = "/sdcard/vivekm4a.m4a";

            OutputStream out = new FileOutputStream(new File(data));
            boolean result = con.retrieveFile("vivekm4a.m4a", out);
            out.close();
            if (result) Log.v("download result", "succeeded");
            con.logout();
            con.disconnect();
        }
    }
    catch (Exception e)
    {
        Log.v("download result","failed");
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:45:27.460

我认为，您应该使用 WebDAV，因为 cloudme 支持这种方式。
还有一些 java 库在那里

# php - 打印流体模板内的值

> ID：11789893
> 
> 赞同：0
> 
> 时间：2012-08-03T05:40:37.077
> 
> 标签：php, typo3, typoscript, extbase

我有一个流体模板，我正在将一个数组传递给这个流体模板。我需要在该流体模板文件中操作该数组。我的目标是在模板文件中打印该数组的每个值，如下所示：

```
<?php 

foreach($array as $value){
echo $value;
}
?> 
```

```
<f:section name="main">
<f:for each="{AccordionList}" as="accordionList" key="accordionTitle">
<div class="right-catdownload">{accordionTitle}</div> 
<f:for each="{accordionList}" as="accordionListArry" key="accordionSubtitle">
</f:for> 
</f:for>
</f:section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:42:56.863

当我们谈论 MVC 结构时，（afaik）没有办法在流体模板中操作数组。这应该在您的控制器中完成。

另一种“不干净”的方式是自己的 viewHelper：[http ://www.t3node.com/blog/writing-a-basic-fluid-viewhelper-for-typo3/](http://www.t3node.com/blog/writing-a-basic-fluid-viewhelper-for-typo3/)

# asp.net-mvc - 从 jquery 调用返回操作后，我如何强制显示临时数据

> ID：11789894
> 
> 赞同：0
> 
> 时间：2012-08-03T05:40:54.117
> 
> 标签：asp.net-mvc, jquery

我使用 jquery 调用此操作

```
public ActionResult Delete(int Id){
   Schedule schedule = context.Schedules.FirstOrDefault(s => s.Id == Id);
   try{
       context.Schedules.Remove(schedule);
       context.SaveChanges();
       TempData["Message"] = "Succesfully removed schedule.";
       return Content(Boolean.TrueString);
   }catch(Exception ex){
       TempData["Message"] = "Something went wrong";
       return Content(Boolean.FalseString);
   }

} 
```

在我看来，我有一个 div 处理来自主控的 TempData["Message"]

```
<div id="messages">
 <% if(ViewContext.TempData["Message"] != null { %>
     <div class="alert">
        <%: ViewContext.TempData["Message"] %>
     </div>
  <% } %>
</div> 
```

这正是我的 jquery 的样子。使用 Boolean.TrueString / FalseString 返回。我不确定这是否是正确的方法，因为我仍然开始学习带有动作的 jquery。

[http://ricardocovo.com/2010/09/02/asp-mvc-delete-confirmation-with-ajax-jquery-ui-dialog/](http://ricardocovo.com/2010/09/02/asp-mvc-delete-confirmation-with-ajax-jquery-ui-dialog/)

基本上我的目标是能够显示任何错误，或通知用户任何错误或需要完成这些步骤的任何说明。是否考虑过使用 JSON 作为返回类型？我不确定如何处理它。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:55:06.060

您正在使用 ajax 调用；视图不会再次完全渲染；例如，为了能够显示一条消息，您必须将其作为 json 返回并在 jquery 回调中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:56:33.883

在这种情况下，您应该使用 ViewData 而不是 TempData。TempData 用于在请求之间临时存储一些东西。它在幕后使用 Session 对象。就像在 Post->Redirect->Get 中一样。

在您的情况下，您在同一请求中使用数据。所以不需要 TempData。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:59:11.477

当您使用 jQuery 调用此函数时，您将其称为异步。这是由 AJAX 完成的，并且以 JSON 格式返回消息要容易得多：

```
Response.Write('{"message":"foo"}'); 
```

在 jQuery 中，您只需在 ajax 请求完成时调用对话框：

```
$.ajax({
  url: "test.aspx"
}).done(function(data) { 
  $(".alert").text(data.message);
  $("#messages").dialog();
}); 
```

# java - 在 Java 中使用 HTML 代码是否只能在互联网系统上工作？

> ID：11789896
> 
> 赞同：0
> 
> 时间：2012-08-03T05:41:01.980
> 
> 标签：java, html, desktop

我正在开发桌面应用程序。在那我使用一些`HTML code`换行符（换行文本）并在`JTabbedPane`.

如果我在没有互联网的系统中使用该应用程序，该应用程序`HTML code`会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:45:30.657

在您的应用程序中使用 HTML 标记不会使其依赖于有效的 Internet 连接。但是，请确保您的应用程序没有使用某些 HTML DTD 或模式规范来进行严格的 HTML 验证。

我想你可以通过尝试自己找到它。

# php - 如何检查另一个数组php中是否存在数组的任何值？

> ID：11789897
> 
> 赞同：25
> 
> 时间：2012-08-03T05:41:03.827
> 
> 标签：php

我有两个数组

```
$a = array('a','b');
$b = array('a','1','2','3','4'); 
```

如何在不使用循环的情况下检查数组 $b 中是否存在数组 $a 的任何值？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-03T05:45:05.007

```
if (count(array_intersect($array1, $array2)) === 0) {
  // No values from array1 are in array 2
} else {
  // There is at least one value from array1 present in array2
} 
```

[http://php.net/manual/en/function.array-intersect.php](http://php.net/manual/en/function.array-intersect.php)

*可能毫无价值，很可能在引擎盖下使用了一个循环。*

# javascript - javascript中for循环和for in循环有什么区别

> ID：11789901
> 
> 赞同：2
> 
> 时间：2012-08-03T05:41:21.923
> 
> 标签：javascript, for-loop

> **可能重复：**
> [JavaScript for...in vs for](https://stackoverflow.com/questions/242841/javascript-for-in-vs-for)

我在我的函数中使用了一个 for 循环。我使用两种类型的循环，“ `for in`”和“ `for`”。两者都产生相同的结果，所以我想知道这些循环之间有什么区别以及如何知道应该使用哪个循环。

```
<script type="text/javascript">
var jam = ['amit','sam','ram','soly']
for(var i in jam){
alert(jam[i])
}
//for (i=0; i<jam.length; i++) {
//  jam[i]
//alert(jam[i].length)
//}
</script>
</head>
<body>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:19:34.083

这取决于你需要什么。我通常使用 for-in 循环，因为它是一种较短的形式，但有时您可能希望控制迭代变量。例如，如果要遍历*偶数*索引，则需要使用普通的 for 循环：

```
for (var i = 0; i < myarray.length; i+=2) {...} 
```

例如，如果您想向后迭代，这同样适用：

```
for (var i = myarray.length-1; i >= 0; i--) {...} 
```

当然，对于对象，for-in 循环允许您在迭代变量中获取属性名称。例如：

```
var myobject = {year: 1992, city: "Barcelona"}
for (var propname in myobject) alert(propname + " = " + myobject[propname]); 
```

在您的示例中，我将使用 for-in 因为您正在进行简单的迭代。此外，我认为在未优化的 Javascript 编译器/解释器中，for-in 循环会更快，因为变量增量是在内部完成的（即它不是诸如“i++”之类的 Javascript 语句）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:29:40.670

`for`循环意味着`iterate`在递增/递减时。

```
// note that I'm making this big and ugly to show what's going on
var incrementor = 1, length = 10,
    array = [ "one", "two", "three", "four", "five",
              "six", "seven", "eight", "nine", "ten" ];

for (; incrementor <= length; incrementor = incrementor + 1) {
    console.log(incrementor);  // 1,2,3,...,10
    console.log( array[incrementor - 1] );  // "one", "two", "three", ..., "ten"
} 
```

`for ... in ...`循环旨在`enumerate`通过对象属性。

```
var object = { "key1" : "one", "key2" : "two", "key3" : "three" },
    key = "";

for (key in object) {
    console.log(key); // "key1", "key2", "key3"
    console.log( object[key] ); // "one", "two", "three"
} 
```

您使用`for`数组的原因是因为在不良浏览器上，`for ... in ...`不仅可以包括数字属性（即：）`key=0, key=1,...`，而且还可以枚举您不希望它... ...之类的东西`key=splice, key=length, key=unshift`。如果您在专业站点上运行此代码，或者在特定硬件上运行的 JS 专用版本，或者在 Unity 或 Unreal Editor 的 UnrealScript 等程序中作为脚本语言运行，这并不是一件好事。

您不使用`iterator`on 对象的原因是因为您通常不会制作如下对象：

```
var obj = { "0" : "zero", "1" : "one", "2" : "two" }; 
```

即使你这样做了（例如，jQuery 做了类似的事情），你可能想要枚举基于单词的属性，但你不能，因为你在计数。

同样重要的是要注意：`enumerating`with`for ... in ...`的功能没有标准化。这意味着不能 100% 保证按照您期望的顺序吐出值。如果您依赖循环运行，`0,1,2,3,...`则`for ... in ...`不能保证 100% 的浏览器会这样做, 100% 的时间 - 即使大多数浏览器大部分时间都正确。

大多数情况下，他们现在遵循先进先出规则。如果您构建您的对象`{ one : 1, two : 2, three : 3 }`，任何现代浏览器都会打印`1,2,3`。如果您像这样构建对象：`{ two: 2, one: 1, six: 6 }`，您将获得`2,1,6`.

但这是 95% 的时间“应该”，而不是 100% 的时间“将”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:46:40.993

你可以使用任何你清楚地理解的东西。对于数组，您可以同时使用这两种情况。

对于您可以使用的数组

```
for (var i = 0; i < a.length; i++){
  //do something
} 
```

对于您可以使用的对象

```
for ( var i in obj){
  //do something
} 
```

因为您无法获得对象的长度。

# c# - 从活动 Word 文档中获取文本

> ID：11789902
> 
> 赞同：0
> 
> 时间：2012-08-03T05:41:22.497
> 
> 标签：c#, winforms

我想从活动的winword窗口获取文本，我想从打开活动窗口的位置获取.doc文件路径。

我怎样才能用 C# 做到这一点？

我正在使用 C#.net 做窗口基础应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:09:11.977

首先，我认为你应该使用 FindWindow。

然后你可以得到打开的文件名。

# eclipse - 如何关闭 Eclipse Juno 中编辑器上弹出的面板

> ID：11789908
> 
> 赞同：2
> 
> 时间：2012-08-03T05:41:39.287
> 
> 标签：eclipse, eclipse-juno

在 Eclipse 中，我大部分时间都在最大化编辑器的情况下工作（我必须在比我的智能手机大一点的小屏幕上工作）。所以控制台和junit视图在侧面折叠。

当测试运行或某些东西被打印到控制台时，适当的视图会根据需要弹出。

在以前的版本中，我可以只按 ESC（我认为），视图就会倒塌。

但是对于当前版本（Juno），我无法通过键盘关闭视图，并且使用鼠标我需要多次点击，而我并没有真正了解我必须点击的位置。

所以问题是：

如何通过键盘关闭弹出视图，最好按一下键。

使用鼠标时视图关闭的具体标准是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:38:06.757

`Esc`如果控制台*处于焦点*状态，弹出的控制台视图实际上会在按下时关闭......但它需要大约三秒钟才能做出反应。

否则，`F12`似乎是默认的*激活编辑器*键绑定。

哦，如果多一点关注可用性，Eclipse 会**很棒。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:43:22.683

将您 `Esc`的键设置为“激活编辑器”命令。

![在此处输入图像描述](../Images/9f06f140147073e12c9c37c32aac2ebb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:11:40.150

您是否知道仅在 JUnit 视图菜单中的*“失败/错误时激活”菜单项？*这首先避免了这两种情况之一。尤其是即使 JUnit 视图的图标也显示了测试运行的红/绿结果。

# django - 如何检查 ChoiceField 中的项目是否被选中？

> ID：11789912
> 
> 赞同：1
> 
> 时间：2012-08-03T05:41:52.547
> 
> 标签：django

在一个表单中，我想使用一个列表，其中包含 ChoiceField 中尚未选择的所有*项目*。为了做到这一点，我想遍历选择并丢弃被选中的那些（即在他们的 html 中有 selected="selected" ）

```
class MethodForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(MethodForm, self).__init__(*args, **kwargs)
        #pseudo-code starts here
        exclude = []
        for val in self.fields['someM2Mfield'].choices:
            exclude.append(val.is_selected)
        #/pseudocode
        rule_choices = get_rule_choices(exclude)
        self.fields['rule'] = forms.ChoiceField(rule_choices)
        ... 
```

伪代码位是我不知道要使用什么方法/属性的地方。任何人都可以启发我吗？

PS：我可以通过调用来遍历选项`next()`，`self.fields[].choices.__iter__`但是如何确定选项是否被选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:02:14.207

表单`self.inital`应该为您提供一个字典，其中包含表单所有字段的初始值。所以`self.initial['someM2Mfield']`应该返回已经选择的*值*。如果您需要所选*选项*的列表，您可以执行以下操作：

```
selected_values = self.initial['someM2Mfield']
rule_choices = [(value, text) for value, text in 
                self.fields['someM2Mfield'].choices
                if value in selected_values] 
```

# php - 将变量从包含的 html 文件传递 到另一个 php 脚本

> ID：11789915
> 
> 赞同：0
> 
> 时间：2012-08-03T05:42:00.550
> 
> 标签：php, cakephp, phpmyadmin, cakephp-1.3, php-5.2

1.php

```
include'form.html' 
```

表单.html

```
<form action="email.php" method="post">
<input type="text" id="name" value="name" />
</form> 
```

电子邮件.php

```
<?php
$name = $_POST['name']; 
$email_message = "Name: $name ";
$sent = mail($email_to, $email_subject, $email_message); 
if($sent) {
    echo "success=yes";
} else {
    echo "success=no";
}
include('success.html');
?> 
```

错误：

```
Notice: Undefined index: name in C:\wamp\www\a\action.php on line 3 
```

我还尝试在 form.html 中使它们成为全局变量，但不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:45:51.143

插入 name="name" 表单的输入标签。像这样

```
<input type="text" id="name" value="name" name="name" /> 
```

name 属性指定元素的名称。name 属性用于引用 JavaScript 中的元素，或在提交表单后引用表单数据。只有具有 name 属性的表单元素才会在提交表单时传递它们的值。

# javascript - 在数据表的 fnInitComplete 函数中使用 fnDrawCallback

> ID：11789916
> 
> 赞同：1
> 
> 时间：2012-08-03T05:42:36.807
> 
> 标签：javascript, jquery, datatables

嗨，我正在使用数据表，并且正在使用异步 XHR 调用来加载表。我会这样做[，](http://datatables.net/forums/discussion/6807/filtering-using-multiselect-dropdown-lists.-how-to-limit-conflicting-filter-options/p1)但由于我使用 xhr 调用表，我的 fnCreateSelect 函数说参数是未定义的，因为还没有表数据。有没有办法在 fnInitComplete 内部调用 fnDrawCAllback，反之亦然？

任何其他关于如何做到这一点的建议将不胜感激。

一些代码：这是我的 fnInitcomplete 函数，如果有帮助，我也会使用固定列。

```
"fnInitComplete": function() {
                $("thead th").each( function ( i ) {
                    this.innerHTML += "<div class='DataTables_sort_wrapper'><span class='css_right ui-icon ui-icon-carat-2-n-s'></span></div><br/>"+fnCreateSelect( fleetT.fnGetColumnData(i) );
                    $("thead select").each( function (i) {
                        this.visibleIndex = i;
                    } );
                    $('select', this).change( function () {
                    var visIndex = typeof this.visibleIndex == 'undefined' ? 1 : this.visibleIndex;
                    fleetT.fnFilter( $(this).val(), visIndex);
                } );
            });
            new FixedColumns( fleetT, {
        "iLeftColumns": 2,
        "iLeftWidth": 220
    } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:39:31.367

当所有数据都已经在客户端上时，您尝试做的事情会很好，因为它可以获得不同的值来创建选择。但是，如果您进行服务器端分页，客户端只有一小部分数据集，因此您无法获得完整数据集的不同值，而只能获得您目前管理的 10 / 25 行。我的建议只是您创建选择服务器端（通过对 db 进行正常的 DISTINCT 查询），然后正常呈现它们。

# php - 在 PHP 网站上输出 matplotlib 图的好方法是什么？

> ID：11789917
> 
> 赞同：2
> 
> 时间：2012-08-03T05:42:39.243
> 
> 标签：php, python, matplotlib

我有一个 python 脚本，可以使用 matplotlib 和命令行输入输出绘图。

我现在正在做的是让脚本打印生成的绘图图像的位置/文件名，然后当 PHP 看到它时，它会输出一个 img 标签来显示它。

python 脚本在运行时会删除超过 20 分钟的图像。这似乎是一个太多的解决方法，我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:53:27.283

您可以修改您的 python 脚本，使其输出图像（图像/jpeg），而不是将其保存到文件中。然后像往常一样使用标签，但直接指向python脚本。您的 php 根本不会调用 python 脚本，它只会将其作为图像的 src 包含在内。

# java - 如何转换格林威治标准时间？

> ID：11789926
> 
> 赞同：-1
> 
> 时间：2012-08-03T05:43:16.917
> 
> 标签：java

我试图从数据库中获取数据，例如..

```
 while(rs.next())
               {
                java.sql.Timestamp t=rs.getTimestamp("date");

                } 
```

现在我想将 Timestamp 't' 转换为 java.util.Date 类型。我正在尝试

```
Date d=new Date(t);//but hear given error
System.out.println(d);
System.out.println(d.toGMTString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:47:34.467

[`java.sql.Timestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)已经 extends [`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)，所以你不需要做任何事情：

```
Date date = t; 
```

不过，您应该阅读文档以`Timestamp`了解一些潜在的意外行为的详细信息，特别是：

> 由于上面提到的 Timestamp 类和 java.util.Date 类之间的差异，建议代码不要将 Timestamp 值一般视为 java.util.Date 的实例。Timestamp 和 java.util.Date 的继承关系实际上是实现继承，而不是类型继承。

（我将其翻译为“糟糕，我们在本应使用组合的地方使用了继承。”）

为了解决这个问题，您可能需要使用：

```
Date date = new Date(t.getTime()); 
```

# jquery - 在 IE 中拖动时弹出标题在晃动

> ID：11789928
> 
> 赞同：0
> 
> 时间：2012-08-03T05:43:42.073
> 
> 标签：jquery, html, css, jquery-ui-draggable

我设计了一个带有标题和正文部分的弹出窗口，并且可以拖动。但问题是每当我开始拖动时，弹出窗口的标题部分都会晃动。它仅在 IE 中发生，但 Google Chrome 运行良好。

这是我的一段代码：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
<style>
  .irmNMsgLog{
    display:none;
    border:8px solid rgba(0,0,0,0.5);
    box-shadow:0px 0px 10px #676767;
    border-radius:5px;
    width:400px;        
    position:absolute;
    z-index:999999; 
    background:#e5e5e5; 
   }
   .irmNMsgLogHeader{
    cursor:move;
    width:100%; 
    color:#fff;
    background:#ba0101;
    filter:progid:DXImageTransform.Microsoft.gradient(GradientType="0",startColorStr="#ba0101",
      endColorStr="#870101");
    background: -webkit-gradient(linear, left top, left bottom, from(#ba0101), to(#870101)); 
    background: -moz-linear-gradient(top,#ba0101,#870101);
    font-size:0.8em;
   }
   .irmNMsgLogHeader table{
     border-collapse:collapse;
    }
  .irmNMsgLogHeader td{
   font-weight:bold !important;
   padding:2px 5px;
  }
  .irmNMsgLogHeader td:last-child{
    background:url('close.gif') 50% 50% no-repeat;
    width:20px;
    height:20px;
    cursor:pointer !important;  
   }
   .irmNMsgLogHeader td:last-child:hover{
     background:url('close-over.gif') 50% 50% no-repeat;
   }     
</style>

<div class="irmNMsgLog">
 <div class="irmNMsgLogHeader irmNText">
  <table width="100%" cellpadding=0 cellspacing=0><tr><td width="93%">Messages(4)</td><td title="Close"></td></tr></table>
 </div> 

 <div class="irmNMsgLogBody irmNText">
  <table width="100%">
   <tr><td class="irmNMsgLogImgError"></td><td>Enter valid email</td></tr>
   <tr><td class="irmNMsgLogImgWarn"></td><td>Enter valid email</td></tr>
   <tr><td class="irmNMsgLogImgInfo"></td><td>Enter valid email</td></tr>
  </table>
 </div> 
</div>
<script>
$(this).draggable({containment:"document",cancel:".irmNMsgLogBody"});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:39:16.780

这是你所期待的吗？

[http://fiddle.jshell.net/pAeBW/](http://fiddle.jshell.net/pAeBW/)

# vb.net - 从字符串“”到整数类型的 Datagridview 和搜索按钮转换无效

> ID：11789930
> 
> 赞同：0
> 
> 时间：2012-08-03T05:44:03.717
> 
> 标签：vb.net, string, search, datagridview, integer

我有一个搜索按钮，当我单击它时，会显示结果，但它有一个消息框，上面写着“从字符串转换为整数类型无效”。这是我的搜索代码：

```
Private Sub btnSearchExpenditure_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearchExpenditure.Click
  Try
    If txtSearchExpenditure.Text = "" Then
        MsgBox("Please fill up search field!", MsgBoxStyle.Exclamation)
        Exit Sub
        Else
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()
        RecordCount = modGlobalFunctions.loadDataGrid("SELECT * " & _
                      "FROM bims_expenditure " & _
                      "WHERE type_id='" & TypeId & "' " & _
                      "AND (code LIKE '%" & txtSearchExpenditure.Text & "%' " & _
                      "OR object_name LIKE '%" & txtSearchExpenditure.Text & "%' ) " & _
                      "ORDER BY code ASC", dgvExpenditureItems)
                 If RecordCount = 0 Then
                    txtCodeExpenditure.Clear()
                    txtNameExpenditure.Clear()
                    MsgBox("No records found!", MsgBoxStyle.Exclamation)
                End If
                With dgvExpenditureItems
                    .Font = gridFont.Font
                    .Columns(1).Visible = False
                    .Columns(4).Visible = False
                    .Columns(5).Visible = False
                    .Columns(6).Visible = False
                    .Columns(7).Visible = False

                    .Columns(0).HeaderText = ""
                    .Columns(2).HeaderText = "Code"
                    .Columns(3).HeaderText = "Name"

                    .Columns(0).Width = 0
                    .Columns(2).Width = 150
                    .Columns(3).Width = 540
                End With
                frmMain.recordsLabel.Visible = True
                frmMain.tssRecords.Text = RecordCount
                modGlobalFunctions.Connection.Close()
            End If
        Catch ex As Exception
            MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try
    End Sub 
```

我不知道怎么了。有什么建议么？提前致谢。上帝保佑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:31:14.643

尝试转换`RecordCount`成`String`这样：

```
frmMain.tssRecords.Text = Convert.ToString(RecordCount) 
```

正如你所说`type_id`的表中的列`bims_expenditure`是`INT`，所以你需要`''`从值中删除`type_id`（例如你的查询应该是`WHERE type_id=" & TypeId & " "`而不是`WHERE type_id='" & TypeId & "' "`）。

试试下面的代码：

```
Private Sub btnSearchExpenditure_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearchExpenditure.Click
  Try
    If txtSearchExpenditure.Text = "" Then
        MsgBox("Please fill up search field!", MsgBoxStyle.Exclamation)
        Exit Sub
        Else
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()
        RecordCount = modGlobalFunctions.loadDataGrid("SELECT * " & _
                      "FROM bims_expenditure " & _
                      "WHERE type_id=" & TypeId & " " & _
                      "AND (code LIKE '%" & txtSearchExpenditure.Text & "%' " & _
                      "OR object_name LIKE '%" & txtSearchExpenditure.Text & "%' ) " & _
                      "ORDER BY code ASC", dgvExpenditureItems)
                 If RecordCount = 0 Then
                    txtCodeExpenditure.Clear()
                    txtNameExpenditure.Clear()
                    MsgBox("No records found!", MsgBoxStyle.Exclamation)
                End If
                With dgvExpenditureItems
                    .Font = gridFont.Font
                    .Columns(1).Visible = False
                    .Columns(4).Visible = False
                    .Columns(5).Visible = False
                    .Columns(6).Visible = False
                    .Columns(7).Visible = False

                    .Columns(0).HeaderText = ""
                    .Columns(2).HeaderText = "Code"
                    .Columns(3).HeaderText = "Name"

                    .Columns(0).Width = 0
                    .Columns(2).Width = 150
                    .Columns(3).Width = 540
                End With
                frmMain.recordsLabel.Visible = True
                frmMain.tssRecords.Text = Convert.ToString(RecordCount)
                modGlobalFunctions.Connection.Close()
            End If
        Catch ex As Exception
            MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try
    End Sub 
```

# objective-c - 应用内购买不起作用

> ID：11789932
> 
> 赞同：0
> 
> 时间：2012-08-03T05:44:21.020
> 
> 标签：objective-c, xcode, in-app-purchase

我设置了我的应用内购买，创建了两个捆绑 ID。我创建了一个测试帐户并检查了我的应用内购买..它工作得非常好......一周后当我测试我得到这个错误`*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array' *** First throw call stack:`并且它没有退回产品。 ..你们能帮我吗？这可能有什么问题

```
 -(void)Declarations
 {
if ([SKPaymentQueue canMakePayments]) {

    NSLog(@"parental functions are disabled");
    SKProductsRequest *productRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObjects:@"com.techzone.9xo.onedollar",@"com.techzone.9xo.twodollar",nil]];
    productRequest.delegate=self;
    [productRequest start];
}else {
    NSLog(@"parental functions are enabled");
}

}
   -(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:  (SKProductsResponse *)response
{
SKProduct *validProduct=nil;
int count = [response.products count];
NSLog(@"number of prouducts present:%d",count);

if(_HintValue)
{
    validProduct = [response.products objectAtIndex:0];

}
if (!_HintValue) {
    validProduct = [response.products objectAtIndex:1];
}
NSLog(@"the product is :%@",validProduct.localizedTitle);
SKPayment *skpayment = [SKPayment paymentWithProduct:validProduct];
[[SKPaymentQueue defaultQueue] addPayment:skpayment];
[[SKPaymentQueue defaultQueue]addTransactionObserver:self];

 }
  - (void)request:(SKRequest *)request didFailWithError:(NSError *)error  
  {  
  NSLog(@"Failed to connect with error: %@", [error localizedDescription]); 

 }
 -(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
for (SKPaymentTransaction *transaction in transactions) {

    switch (transaction.transactionState) {
        case SKPaymentTransactionStatePurchasing:
            NSLog(@"stuff is getting purchased");
            break;
        case SKPaymentTransactionStatePurchased:   
            NSLog(@"purchased properly");
            NSInteger currentValue=[Util getIntegerValueForKey:@"hintValue"];
            if(_HintValue)
            [Util setIntegerValue:10+currentValue forKey:@"hintValue"];
            if (!_HintValue) 
            [Util setIntegerValue:25+currentValue forKey:@"hintValue"];
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;
        case SKPaymentTransactionStateRestored:
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;
        case SKPaymentTransactionStateFailed:
            if (transaction.error.code != SKErrorPaymentCancelled) {
                NSLog(@"error happened");
            }
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;
        default:
            break;
    }
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:17:43.623

问题是您得到一个有效产品 ID 的空列表。您正在访问`objectAtIndex:0`一个创建该错误的空数组。

如果您检查`response.invalidProductIdentifiers`，您会在那里找到您的产品 ID。

不幸的是，这可能有很多原因。请查看可能导致无效产品 ID[的原因清单。](http://troybrant.net/blog/2010/01/invalid-product-ids/)

# c++ - C++ 中宏的二元运算

> ID：11789934
> 
> 赞同：0
> 
> 时间：2012-08-03T05:44:42.453
> 
> 标签：c++, macros, binary

我想通过宏使用二进制标志，但在以下情况下出现编译器错误：

```
#define FLAG_A 0x01;
#define FLAG_B 0x02;

int binVal = 0;
binVal = FLAG_A | FLAG_B;

//getting 0x03 here 
```

但编译器以：

```
error: expected primary-expression before ‘|’ token 
```

试过：

```
binVal = 0x01 | 0x02; //this does perfectly well. 
```

感谢您提前回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T05:45:35.073

去掉分号：

```
#define FLAG_A 0x01
#define FLAG_B 0x02 
```

否则该语句将扩展为

```
binVal = 0x01; | 0x02;; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T05:49:59.300

这就是为什么您**永远**不想在宏定义之后放置分号的原因。预处理器不需要它们；如果它们在那里，它们将被合并到扩展宏中，从而产生语法错误。利用

```
#define FLAG_A 0x01
#define FLAG_B 0x02 
```

反而。如果你想要那些分号，你也可以使用枚举：

```
enum flag {
    FLAG_A = 0x1,
    FLAG_B = 0x2
}; 
```

# c# - 在 C# 中使用 try catch() 的正确方法

> ID：11789937
> 
> 赞同：2
> 
> 时间：2012-08-03T05:44:58.350
> 
> 标签：c#, lambda, try-catch

我正在使用`ASP.NET/C#`.

这是一个示例，我使用`lambda expression`.

```
try
{
    using (var db = new DataClasses1DataContext())
    {
        var logSubGroup = db.sys_Log_Account_SubGroups
             .SingleOrDefault(subGroup => subGroup.cSubGroupName.Equals(subGroupName));
        logSubGroup.cRejectedBy = rejectedBy;
        logSubGroup.dRejectedOn = DateTime.Now;
        logSubGroup.cAuthorizedStatus = "Rejected";
        db.SubmitChanges();
    }
}
catch (Exception ex)
{
} 
```

如您所见，我没有在里面做任何事情`catch() block`。

我知道这是一种糟糕的使用方式`try catch`。

任何人都可以帮助我以`try catch block`正确的方式使用。

我只是不知道里面必须有什么`catch block`。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:48:23.803

根本不要使用 try-catch 块，除非您有*特定的理由*来捕获*特定的异常*。

相反，使用一种全局异常处理方法（ASP.NET 中的[Application_Error](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)）来全局捕获未处理的异常，显示错误消息并记录错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:50:03.360

作为一般规则，如果捕获异常的代码无法解决问题，则无需捕获异常，然后继续正确运行。在您所提供的代码中，您能否确定可以在 catch 块中采取的一些操作，以将程序恢复到您相信它可以继续运行的状态？如果没有，那么就让异常在堆栈中冒泡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:49:53.923

理想情况下，您应该处理错误，以便您的应用程序可以从中恢复，但至少您应该记录它。你不应该只是吞下它。此外，您不应该处理您不期望或无法处理的异常。例如，当打开一个文件时，可以预期并处理 FileNotFoundException，例如通过显示警告并让用户选择另一个文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T05:52:22.903

从理论上讲，您可以决定在您的 catch 语句中可能会发生什么样的异常，当然，如果您处于开发阶段，这样做并不是完全错误的，我强烈不建议您使用 try catch，因为您可能会错过一些重要的可能发生的异常，您通常也希望修复，如果捕获到异常或错误，您应该包含一条消息或应该发生的操作 可以通知用户一条消息，该操作没有很好地执行，但理想情况下您必须让用户知道出了什么问题，因此在这种情况下，更好的错误处理是一种方法

# c# - 调用 web 服务时自动完成 Jquery 函数返回内部服务器错误

> ID：11789941
> 
> 赞同：0
> 
> 时间：2012-08-03T05:45:32.783
> 
> 标签：c#, asp.net, web-services, jquery, autocomplete

我正在开发一个项目，该项目需要在输入一些数据时自动完成文本框，并且将从数据库中获取数据。

为此，我创建了一个网络服务 -

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
//[ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[ScriptService]
public class SearchIssues : System.Web.Services.WebService
{
    //[ScriptMethod]      
    [WebMethod]
    public string[] GetCompletionList(string prefixText)
    {
        DataSet ds = null;
        DataTable dt = null;
        OracleConnection conn = null;
        StringBuilder sb = new StringBuilder();
        try
        {
            conn = new OracleConnection(WebConfigurationManager.ConnectionStrings["Conn"].ToString());
            sb.Append("select issueno from cet_sepcet where issueno like '");
            sb.Append(prefixText);
            sb.Append("%'");
            OracleDataAdapter daRes = new OracleDataAdapter(sb.ToString(), conn);
            ds = new DataSet();
            daRes.Fill(ds);
            dt = ds.Tables[0];
        }         
        catch (Exception exc)
        {

        }

        if (conn.State == ConnectionState.Open)
        {
            conn.Close();
        }
        List<string> IssueList = new List<string>();
        for (int i = 0; i < dt.DataSet.Tables[0].Rows.Count; i++)
        {
            IssueList.Add(dt.DataSet.Tables[0].Rows[i][0].ToString());
        }
        return IssueList.ToArray();
    }
} 
```

我写的jquery ajax方法是——

```
 $(function() {
        $(".tb").autocomplete({
            source: function(request, response) {               
            debugger;
                $.ajax({
                    url: "SearchIssues.asmx/GetCompletionList",
                    data: request.term,
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function(data) { return data; },
                    success: function(data) {
                        response($.map(data.d, function(item) {
                            return {
                                value: item                           
                            }
                        }))
                        //alert('Hello');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                     debugger;
                        alert(errorThrown);
                    }
                });
            },
            minLength: 1
        });
    }); 
```

网络服务运行良好。但是当我尝试从 .aspx 页面调用 web 服务时，问题就来了。它引发内部服务器错误。

我不确定我哪里出错了。请帮忙。

提前致谢。阿基勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:11:13.080

我建议您使用 `firebug`这种方式检查您的 Post 请求和响应是否可以轻松调试您的应用程序。

这个在你的代码中`ajax`

```
 data: request.term, 
```

其实应该

```
 data:  "{'prefixText':'" + request.term+ "'}", 
```

您的服务期望`prefixText`字符串作为参数，我假设`request.term`是值。

**更新**：

我不知道什么对你有用，这对我有用：

```
 <script src="js/jquery-1.4.2.min.js" type="text/javascript"></script>
        <script src="js/jquery-ui-1.8.custom.min.js" type="text/javascript"></script>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

        <script type="text/javascript">
            $(document).ready(function() {          
               $("input#autocomplete").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "/Service/WSDataService.asmx/GetStatesWithAbbr",
                        data: "{'name':'" + $(autocomplete).val() + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.Name,
                                    value: item.Name
                                }
                            }))
                        }
                    });
                },
                minLength: 1
              });
            });
        </script> 
```

……

```
 <input id="autocomplete" /> 
```

服务 ：

```
 [WebMethod]        
    public List<State> GetStatesWithAbbr(string name)
    {
        List<State> sbStates = new List<State>();
        //Add states to the List
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:12:22.150

这段代码可能会抛出异常，所以请再验证一次，可能没有检索到表或类似的东西。

```
 List<string> IssueList = new List<string>();
      for (int i = 0; i < dt.DataSet.Tables[0].Rows.Count; i++)
      {
         IssueList.Add(dt.DataSet.Tables[0].Rows[i][0].ToString());
     }
    return IssueList.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T11:11:51.240

将此行放在您的 ajax 中： data: '{ "prefixText": "' + request.term + '"}'，它会像我一样工作。

# java - 将整数从一种方法传递到另一种方法

> ID：11789947
> 
> 赞同：1
> 
> 时间：2012-08-03T05:45:55.013
> 
> 标签：java, arrays

尝试用两种方法编写程序。第一个接受一个整数并打印其除数以及除数之和，第二个是一个布尔函数，如果给定整数等于其除数之和（完美数），则返回。

我的第一种方法做得很好，但我想从中获取整数和并在第二种方法中使用它，这甚至可能吗？我花了相当长的时间试图研究它，但没有成功。

像往常一样，任何和所有的建议表示赞赏。到目前为止的代码如下。

```
import java.util.Scanner;
import java.io.*;

class arrayTest {

public static int sumFacs(int n) {

    int sumDiv[] = new int[50];
    int c = 0;
    int sum=0;

    if(n<0){
        System.out.println("Sorry I dont do negatives!");
    }

    else {

    for(int i=1; i<=n; i++){
        int j = n%i;

        if(j==0){
            System.out.println( i + " is a divisor of " + n + "\n");
            sumDiv[c] = i;
            c++;
        }

    }

    for (int i=0; i<sumDiv.length; i++){
    sum += sumDiv[i];}

    System.out.println("The sum of the divisors of " + n + " is: " + sum);

}
    return sum;
}

public static boolean isPerfect(int n, int sum) {

boolean b = (n == sum);
if(b){
    System.out.println( n + " is a perfect number.");
}

else {
    System.out.println( n + " is not a perfect number.");
}
}

public static void main(String[] args){

Scanner scanner = new Scanner(System.in);
    System.out.println("Please enter a positive integer.");
    int n = scanner.nextInt();

 sumFacs(n);
 int sumDivisors = sumFacs(n);
 System.out.println(isDivisors(sumFacs(n), n));

 isPerfect(n, sum);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:52:37.340

你`sumFacs`返回一个整数，所以你绝对可以使用它在你的`isPerfect`方法中产生的任何东西。正如您现在所做的那样，您将相同的数字传递给方法。为了做你想做的事，你需要做这样的事情：

```
int sumFacsResult = sumFacs(n);     //Take whatever value sumFacs yields, store it in sumFacsResult
System.out.println(isPerfect(sumFacsResult, n);    //Take the result of sumFacs and pass it to the isPerfect method 
```

或速记：

```
System.out.println(isPerfect(sumFacs(n), n));    //It is usually recommended to use the other approach, for readability purposed. 
```

你的`isPerfect`方法应该是这样的：

```
public static boolean isPerfect(int sum, int number)
{
    return sum == number;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:52:30.803

您`sumFacs(int n)`的返回类型为 int 并且您正在返回 sum 但是在调用该方法的地方您没有将其设置为任何内容，因此您想要做的是：

```
int foo = sumFacs(n);  
isPerfect(n,foo); 
```

让你的完美课堂

```
public static void isPerfect(int n, int foo)
{ 
  if((n==foo) 
  {     
    System.out.println( n + " is a perfect number."); 
  }else{    
    System.out.println( n + " is not a perfect number."); 
  }
} 
```

然而，在一类而不是二类中这一切都会更容易

# asp.net-mvc-3 - 在 MVC3 中创建嵌套列表

> ID：11789949
> 
> 赞同：0
> 
> 时间：2012-08-03T05:45:57.860
> 
> 标签：asp.net-mvc-3, asp.net-mvc-2

我想使用`<ul> and <li>`标签创建菜单。我在 MVC3 + Razor 工作。我像这样将菜单存储在数据库中

MenuId 名称 ParentMenuId OrderBy

```
1      Item1         Null        1
2      Item2         Null        2 
3      Item2.1        2          1
4      Item2.1.1      3          1
5      Item2.1.2      3          2 
```

HTML 输出应该是

```
<ul>
 <li><a href="#">Item1</a></li>`
 <li><a href="#">Item2</a></li>`
   <ul>
       <li><a href="#">Item2.1</a></li>
       <ul>
             <li><a href="#">Item2.1.1</a></li>
              <li><a href="#">Item2.1.2</a></li>
       </ul>
   </ul>
</ul> 
```

谁能帮助我如何从中生成菜单。我尝试在互联网上搜索，但找不到可以使用的东西。

我看到这篇文章（[ASP.NET MVC 视图中的递归](https://stackoverflow.com/questions/942489/recursion-in-an-asp-net-mvc-view/942616#942616)），其中一个答复是创建`HTMLHelperExtension`。

但在我的情况下无法找到如何使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:38:37.607

你可以尝试这样的事情：

```
@helper CreateCategory(int? nid)
{
        var childs = context.Categories.Where(c=>c.parentid == nid).OrderBy(C => C.order);        
        int childsCount = childs.Count(); 
        if (childsCount == 0)
              return;
        <ul>

             @foreach (Category child in childs)
             {      
                 <li>
                    <a href="@child.Url">@child.Title</a>          
                    CreateCategory(child.Id);  
                 </li>                                                                                                   
             }
         </ul> 
} 
```

您最常称此助手为：

```
CreateCategory(null); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:31:33.313

你应该使用 DisplayTemplate 下面是一个例子：

```
<!-- Your view -->
@if (Model.Items != null)
{
    <ul>
        foreach (var item in Model.Items)
        {
            @Html.DisplayFor(m => item)
        }
    </ul>
}

<!-- Your DisplayTemplate control -->
<li>
    @Model.Name
</li>
@if (Model.Items != null) {
<ul>
    foreach (var item in Model.Items)
    {
        @Html.DisplayFor(m => item)
    }
</ul>
} 
```

所以你会递归地从 DisplayTemplate 调用 DisplayTemplate 来渲染嵌套的 Items

# java - WildcardQuery 没有返回正确的结果

> ID：11789951
> 
> 赞同：3
> 
> 时间：2012-08-03T05:46:03.763
> 
> 标签：java, search, lucene, wildcard

我已经使用一些数据创建了一个索引。现在我正在使用 WildcardQuery 来搜索这些数据。索引的文档有一个`Product Code`我正在搜索的字段名称。

下面是我用于创建查询和搜索的代码：

`Term productCodeTerm = new Term("Product Code", "*"+searchText+"*");`

`query = new WildcardQuery(productCodeTerm);`

`searcher.search(query, 100);`

searchText 变量包含用于搜索索引的搜索字符串。如果什么时候`searchString`是'jf'，我会得到以下结果：

```
JF32358
JF5215
JF2592 
```

现在，当我尝试搜索 using`25, or f2 or f3`或除 using only 之外的任何其他内容时`j,f,jf`，查询没有命中。

我无法理解为什么会这样。有人可以帮助我理解搜索以这种方式运行的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:52:56.397

您在索引时使用了什么分析器？鉴于您的示例，您应该确保您的分析器：

*   小写，
*   不删除数字，
*   不会在字母和数字之间的边界处分裂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:59:28.447

在 lucene 常见问题页面中它说：

> QueryParser 默认不支持前导通配符（例如 *ook）。从 Lucene 2.1 开始，可以通过调用 QueryParser.setAllowLeadingWildcard( true ) 来启用它们。请注意，这可能是一项昂贵的操作：它需要完整地扫描索引中的标记列表以查找与模式匹配的标记。

有关更多信息，请查看[此处。](http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F)

# java - java中的getRuntime.exec()是否理解*？

> ID：11789952
> 
> 赞同：0
> 
> 时间：2012-08-03T05:46:03.370
> 
> 标签：java, unix

我想要`.tar.gz`指定目录中的文件列表。为此，我正在`ls directory_path/*.tar.gz`使用`getRuntime.exec()`Java 运行“”。但它没有给出任何输出，而是在说 `No such file or directory`..但是相同的命令正在命令提示符下运行..我在 unix 中运行 java。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:47:39.243

这是因为`exec`不会启动 shell 只是为了运行您的程序。它只是开始一个过程。在类 Unix 系统上，shell 负责将通配符扩展为文件列表。因此，您需要`ls`通过 shell 运行才能获得所需的行为。

但是，你为什么要使用`ls`呢？[这个答案](https://stackoverflow.com/a/1385015/73070)显示了如何使用 Java 获取文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:52:34.847

**1.**您将能够使用`exec()`not the command promt 来触发进程。

**2.**最好使用`list()`获取目录下所有文件的名称，然后使用`FileFilter`获取.tar.gz 文件。

# events - 在对象外部开始单击时防止 MouseUp

> ID：11789953
> 
> 赞同：0
> 
> 时间：2012-08-03T05:46:21.843
> 
> 标签：events, actionscript, mouseevent

我有 Sprite 对象，它是一个扑克筹码。当用户点击它时，出价会增加。我正在提高对`MouseUp`活动的出价。但是，如果用户在对象/芯片之外开始单击，然后将鼠标拖到芯片上并执行此操作`MouseUp`，它会触发映射到的函数`MouseUp`。如果单击从对象外部开始，如何防止它触发。

```
this.addEventListener(MouseEvent.MOUSE_DOWN, pressChipDown)
this.addEventListener(MouseEvent.MOUSE_UP, pressChipUp)
this.addEventListener(MouseEvent.MOUSE_OUT, pressChipOut)

private function pressChipDown(e:MouseEvent):void
    {
        super.x = startX + 5;
        super.y = startY + 5;
    }

    private function pressChipUp(e:MouseEvent):void
    {
        increaseBid();
        super.x = startX;
        super.y = startY;
    }

    private function pressChipOut(e:MouseEvent):void
    {
        if(e.buttonDown) //if mouse button is down, move chip back but dont increase bid
        {
            pressChipUp(MouseEvent.MOUSE_OUT as MouseEvent)
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:58:46.107

翻滚时，开始听鼠标向下和鼠标向上，如果在向下之前先向上，那就是“假”

this.addeventlistener(MouseEvent.ROLL_OVER, onOver)

...

# python - __new__ 和 __init__

> ID：11789955
> 
> 赞同：7
> 
> 时间：2012-08-03T05:46:35.287
> 
> 标签：python

> **可能重复：**
> [Python 对 __new__ 和 __init__ 的使用？](https://stackoverflow.com/questions/674304/pythons-use-of-new-and-init)

我试图了解如何使用这两种方法。我知道那`__new__` 是用来创建对象的，而`__init__`用来初始化的。但我不确定创建对象时会发生什么。

1.  这是否意味着`__new__`并且`__init__`必须具有相同的参数？

2.  如果我不使用相同的参数会怎样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T05:51:46.983

1.  是的。

2.  你会得到一个错误。

（从技术上讲，`__new__`第一个参数是类，而`__init__`第一个参数是实例。但是，它们都必须能够接受相同的参数仍然是正确的，因为除了第一个参数之外，传递给的参数`__init__`是与传递给的相同`__new__`。）

```
>>> class Foo(object):
...     def __new__(cls, x):
...         return super(Foo, cls).__new__(cls)
...     
...     def __init__(self, x, y):
...         pass
>>> Foo(1)
Traceback (most recent call last):
  File "<pyshell#260>", line 1, in <module>
    Foo(1)
TypeError: __init__() takes exactly 3 arguments (2 given)
>>> Foo(1, 2)
Traceback (most recent call last):
  File "<pyshell#261>", line 1, in <module>
    Foo(1, 2)
TypeError: __new__() takes exactly 2 arguments (3 given) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T05:59:00.507

两种方法都将传递（几乎）相同的参数集，因此通常它们具有匹配的签名（相同的参数集）。

我在那里说“几乎”，因为`__new__`方法是作为第一个参数传递给类的，而`__init__`方法是传递方法的结果`__new__`；新创建的实例。

在python中，*可以*使用“通配符”参数；`*args`and （`**keyword`参见[What do *args and **kwargs mean?](https://stackoverflow.com/q/287085)），这意味着要么`__new__`或`__init__`可以使用它们来仅命名*一些*传入的参数。

当签名不匹配时会发生什么（考虑到通配符参数）？你得到的结果与将参数传递给任何签名与传入的参数不匹配的 python 可调用对象相同；你得到一个例外。

# android - pdf以编程方式在android中图像

> ID：11789957
> 
> 赞同：1
> 
> 时间：2012-08-03T05:46:40.393
> 
> 标签：android

如何将具有单页的PDF文件转换为android中的图像。有人可以为此分享一些代码吗？我尝试过 jpedal 和 itext，但两者都有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:00:47.657

我发现了一个加载 PDF 的项目，然后将其转换为我认为对您有帮助的图像。请参阅以下链接： [Android PDF 查看器](http://support.leadtools.com/CS/forums/41907/ShowPost.aspx)

希望这可以帮助。

# magento - 如何在 Magento 中获取特定页面的 CMS 页面 ID

> ID：11789959
> 
> 赞同：4
> 
> 时间：2012-08-03T05:46:48.557
> 
> 标签：magento

在 magento 中使用以下代码：

```
$currentPageId =$this->getRequest()->getParam('page_id'); 
```

我们可以得到当前页面的id。

但是如何获取特定页面的页面 id？

例如，我有一个带有 URL key 的页面`about-fruit-store`。

我想得到它的页面ID。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T05:59:36.627

任何一个

```
$model = Mage::getModel('cms/page')->load('about-fruit-store','identifier');
var_dump($model->getData());
var_dump($model->getPageId()); 
```

或者

```
$model = Mage::getModel('cms/page')->getCollection()
->addFieldTofilter('identifier','about-fruit-store')
->getFirstItem();
var_dump($model->getData());
var_dump($model->getPageId()); 
```

应该这样做。

# ruby-on-rails - git分支模型

> ID：11789962
> 
> 赞同：0
> 
> 时间：2012-07-22T13:29:13.347
> 
> 标签：ruby-on-rails, git, hudson

我们目前有多个针对不同项目的 Git 存储库。

目前我们有以下工作流程： Master - 这里的所有提交 Deploy - 在实时服务器上使用的生产代码

我们让 Hudson ci 在每次新提交时检查 master。每分钟轮询更改。我们还有一个登台服务器，用于在从我们的主分支部署之前签署测试物理功能的工作请求

我们现在看到的主要问题是我们在工单/工作请求的基础上工作，我们可能并不总是希望在发布的基础上部署所有更改，但如果工单是由高级员工签署的。

我看过 Git flow 和 github flow 之类的东西。两者都有其优势，但是我无法找到包含登台服务器和 ci 的策略。

任何帮助或阅读建议将不胜感激！

**更新 1**

我们的工作流程应遵循以下内容：

```
Production:  -------------I-----------O----
                         /           /
             B---E---F---G    J---K---L
Master:  A--/--C---D---H--\--/---M---N-\---
          \-1-/-2-/-3-/     \-1-/-2-/ 
```

Ci 和 Staging 区域都从 Master 运行，所有工作都在一个分支上进行并合并到 staging。然后将功能/票证分支的签核工作合并到生产中，仅在特定分支中进行更改。

如果这是错误的或者如果有人对此有更好的解决方案，请纠正我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:42:50.483

所以你有一个主分支，那里的任何提交都去 prod 和一个登台分支，那里的任何提交都去一个登台服务器，我接受它..

所以这对我来说很有意义..每张票都应该是它自己的主分支。从那里，开发人员可以合并到登台进行测试。一旦它通过测试并被签署，该分支就可以开始了。从那里您可以决定将哪些分支合并到您的“发布”分支中，并将该分支合并到主分支中进行部署。

您甚至可以将发布分支合并到 staging 以再次测试发布，以确保每个分支与其他分支配合得很好。

或者..如果您使用 github.. 只需根据票证让每个 dev 分支离开一个新分支.. 然后将 PR 发送给 master

# html - 为我的 html 网站打开 id

> ID：11789968
> 
> 赞同：2
> 
> 时间：2012-08-03T05:47:15.707
> 
> 标签：html, css, jquery-ui, web-applications, openid

首先，我是一名网络开发人员（在应用程序方面非常薄弱）。

我的网站在`.html`，我的问题是，是否可以`open id`在我的 html 页面中使用概念，或者我想将其更改为 php 或其他。

使用 open id 登录后，我的页面中也有一个讨论表单。

这一切都可能在 .html 中吗？是否也可以使用开放 id 概念进行讨论。任何演示或链接对我来说都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:50:42.607

对于任何类型的登录或评论，您都需要将 php 与数据库一起使用。你也许可以用 jQuery 来完成它。

[http://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html) - 登录教程 [http://www.allsyntax.com/tutorials/PHP/24/Building-a-Comments-Script/1.php](http://www.allsyntax.com/tutorials/PHP/24/Building-a-Comments-Script/1.php) - 评论教程

这是你要找的还是别的什么？

# php - 嵌入式支付 IPN

> ID：11789973
> 
> 赞同：0
> 
> 时间：2012-08-03T05:47:25.607
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox, paypal-adaptive-payments

我有一个使用嵌入式支付处理的自适应支付。一切正常（购买得到处理），但我的 IPN 监听器从未收到通知。我使用了 PayPal 提供的 IPN 测试工具，听众接听电话，但不是来自嵌入付款。

这是在支付密钥中发送的信息：

```
$bodyparams = array (
 "requestEnvelope.errorLanguage" => \"en_US",         
 "actionType" => "PAY",   
 "cancelUrl" => "http://mysite.com/cancel",       
 "returnUrl" => "http://mysite.com/buying",       
 "currencyCode" => "USD",          
 "paymentType" => "DIGITALGOODS",     
 "ipnNotificationUrl" => 'http://mysite.com/listener.php',    
 "trackingId" => $rows['key'],    
 "memo" => 'You are buying ' . $title . ' from ' . $paypal . '',
 "receiverList.receiver.email" => $paypal,             
 "receiverList.receiver.amount" => $price
); 
```

这是我的监听器代码（取自 PayPal 网站）：

```
<?php
  $req = 'cmd=' . urlencode('_notify-validate');

  foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
  }

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'https://www.sandbox.paypal.com/cgi-bin/webscr');
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: https://www.sandbox.paypal.com'));
  $res = curl_exec($ch);
  curl_close($ch);
  $item_name = $_POST['item_name'];
  $item_number = $_POST['item_number'];
  $payment_status = $_POST['payment_status'];
  $payment_amount = $_POST['mc_gross'];
  $payment_currency = $_POST['mc_currency'];
  $txn_id = $_POST['txn_id'];
  $receiver_email = $_POST['receiver_email'];
  $payer_email = $_POST['payer_email'];

  if (strcmp ($res, "VERIFIED") == 0) {
    $myFile = "log.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    $stringData = "logged ' . $txn_id . '\n";
    fwrite($fh, $stringData);
    fclose($fh);
  }
  else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
  }
?> 
```

再次，PayPal IPN 测试工具证明监听器有效，但是为什么实际支付没有通知监听器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:14:53.440

确保您没有在实时代码中使用沙盒 URL。

如果您没有转到 PayPal 登录，请转到历史 > IPN 历史

查看 IPN 已发送到何处。

单击消息 ID。

检查通知 URL 检查 HTTP 响应代码是否为 200，最后检查 IPN 消息是否包含您期望的所有参数。

如果您返回 IPN 历史记录屏幕，您可以在需要时重新发送 IPN。

# ruby-on-rails - Rails：来自安全操作的 json 响应

> ID：11789976
> 
> 赞同：1
> 
> 时间：2012-08-03T05:47:37.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, firefox, devise

最初我有很常见的带有 json 响应的 ajax 形式：

```
def create
  # created logic omitted as most likely irrelevant
  render :json => {:success => true} #over simplified JSON for debug purposes
end 
```

到目前为止一切顺利，按预期工作。我通过[ssl_requirement](https://github.com/rails/ssl_requirement/) gem 为创建操作添加了安全性：

```
class RegistrationsController < Devise::RegistrationsController
  ssl_required :create
  # rest of the code omitted, 'create' action as above
end 
```

突然间，我在表单响应中得到以下信息（在 HttpFox 中观察）：

```
Error loading content (NS_ERROR_DOCUMENT_NOT_CACHED) 
```

创建操作按预期运行（强制执行 HTTPS，创建一个对象，但......在浏览器中失败。具体而言，在**Firefox**中失败（适用于 chrome）。任何线索和想法将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:08:08.823

我不确定，但我相信您的问题与跨站点 AJAX 请求有关。

您使用不同协议的事实使 Firefox 相信您正在发出跨站点请求。我相信 Chrome 在本地时对这个限制没有那么严格。尝试访问该站点本身`https`并查看 AJAX 请求是否通过。

# c# - 创建启动画面而不创建多线程表单

> ID：11789979
> 
> 赞同：0
> 
> 时间：2012-08-03T05:47:47.437
> 
> 标签：c#

我想制作一个启动画面而不在应用程序上创建多线程有没有人有任何想法来创建将自动显示下一个表单的启动画面？

我已经尝试了这个 timer_tick 并为下一个表单创建了 showdialog 对象，但它不能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:15:18.563

尝试这样的事情：

```
public partial class FormTicker : Form
{
    Timer timer;
    public FormTicker()
    {
        timer = new Timer();
        InitializeComponent();
        timer.Interval = 2000;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        timer.Stop();
        FormMain formMain = new FormMain();
        formMain.Show();
        this.Hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:40:25.540

Visual Basic 支持启动屏幕，您可以通过在 c# 项目中引用 Microsoft.VisualBasic 来利用它。

可以在[Splash screen doesn't hide 找到一个示例 - 使用 Microsoft.VisualBasic 库](https://stackoverflow.com/questions/3253020/splash-screen-doesnt-hide-using-microsoft-visualbasic-library)

# iphone - 如何在 iOS 中将 UIColor 对象添加到 NSMutableArray

> ID：11789983
> 
> 赞同：1
> 
> 时间：2012-08-03T05:47:59.873
> 
> 标签：iphone, ios, nsmutablearray, uicolor

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T05:52:30.873

直到你不初始化你的指针（color4），它指向一个未定义的位置，在那里可能没有对象，只有垃圾。也许它甚至不是一个有效的menory位置。取消引用时，它会自然崩溃。您需要将其初始化为有效对象。

此外，该对象不能是`nil`，否则 NSMutableArray 本身将引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T05:50:43.657

color4 未初始化，您尝试在数组中插入 nil。像其他颜色一样初始化 color4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:51:02.210

当您将 Color4 添加到数组时，它是 nil。NSMutableArrays 是 nil 终止的。这意味着 NSMutableArray 中的最后一个元素是 nil。您不能手动将 nil 对象添加到数组中，这意味着 nil 对象之后的数据将被忽略！

以下代码产生异常：

```
NSMutableArray *array = [[NSMutableArray alloc] init];

UIColor *color;

[array addObject:color]; 
```

*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

解决方案是在将 color4 变量添加到数组之前对其进行初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:30:58.640

您需要创建第一个 UIColor 对象并像这样添加数组

```
 NSArray *mycolorsArray = [[NSArray alloc] initWithObjects:color1, color2, nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T05:56:22.270

尝试：

```
 UIColor* color1 = [UIColor blueColor];
    UIColor* color2 = [UIColor greenColor];
    UIColor* color3 = [UIColor whiteColor];
    UIColor* color4 = [[UIColor alloc] init];

    NSMutableArray* arrayColor = [[NSMutableArray alloc] initWithObjects:color1, color2, nil ];

    [arrayColor addObject:color3];
    [arrayColor addObject:color4]; 
```

# java - 做什么 在Java异常中表示？

> ID：11789990
> 
> 赞同：17
> 
> 时间：2012-08-03T05:48:30.137
> 
> 标签：java, exception, stack-trace

`<init>`Java 异常中的含义是什么？

例如：

```
BlahBlahException...

at java.io.FileInputStream.<init>(FileInputStream.java:20) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T05:50:24.220

在构造对象时抛出异常，有两种选择：

*   在构造函数中
*   在初始化变量时

看看我写的这个演示：http: [//ideone.com/Mm5w5](http://ideone.com/Mm5w5)

* * *

```
class Main
{
        public static void main (String[] args) throws java.lang.Exception
        {
                try
                { new Test(); } catch (Exception e) { e.printStackTrace(); }

                try
                { new Test2(); } catch (Exception e) { e.printStackTrace(); }

                try
                { new Test3(); } catch (Exception e) { e.printStackTrace(); }

        }

        static class Test
        {
                Object obj = getObject();
                Object getObject()
                { throw new RuntimeException("getObject"); }
        }

        static class Test2
        {
                Test2()
                {
                        throw new RuntimeException("constructor");
                }
        }

        static class Test3
        {
                Object obj1 = null;
                String str = obj1.toString();
        }
} 
```

产生：

```
java.lang.RuntimeException: getObject
    at Main$Test.getObject(Main.java:24)
    at Main$Test.<init>(Main.java:22)
    at Main.main(Main.java:9)
java.lang.RuntimeException: constructor
    at Main$Test2.<init>(Main.java:31)
    at Main.main(Main.java:12)
java.lang.NullPointerException
    at Main$Test3.<init>(Main.java:38)
    at Main.main(Main.java:15) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T05:59:18.963

> <**初始化**>

叫做

> 实例初始化方法

它是由您的 java 编译器从您定义的构造函数创建的。尽管它不是有效的方法定义，但您的 JVM 期望这个，并且您放入构造函数中的任何内容都将在方法中执行。因此，当您使用 from 出现异常时，您可以确定它来自已执行的 java 类的构造函数。阅读 Bill venner 关于[Object Initialization](http://www.artima.com/designtechniques/initialization4.html)的设计技术文章，了解更多相关信息。

# python - python TCP客户端无法连接到我的TCP服务器

> ID：11789995
> 
> 赞同：2
> 
> 时间：2012-08-03T05:49:22.693
> 
> 标签：python, networking, tcp, pygame

我可以运行我的程序的两个实例并将它们相互连接，但是当不同 ip 的其他人尝试连接到我的服务器时，他们的套接字无法连接。我的代码没有输入用户计算机的 ip，但有我的 ip（因为我将是唯一运行服务器的人）硬编码。

这是服务器类连接函数：

```
def connect(self,host,port):
    self.host = host
    self.port = port
    self.unconnected_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.unconnected_socket.bind((self.host,self.port))
    self.unconnected_socket.listen(5) 
```

这是程序创建游戏的时间

```
self.server = server.Server()
self.server.connect(ip,port) #ip is my computer's ip address
self.serverThread = Thread(target=self.server.serve_forever)
self.serverThread.daemon = True
self.serverThread.start()
self.client.connect(ip,port) 
```

现在这里是类客户端连接函数：

```
def connect(self,host,port):
    self.host = host
    self.port = port
    self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.socket.connect((self.host,self.port)) 
```

当另一台计算机上的某人运行程序但选择加入游戏时：

```
self.client.connect(ip,port) 
```

我正在使用来自 pygames 的稍作修改的 Mastermind Networking Lib - 1.5.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:31:29.943

盲目猜测：您可能正在将您的服务器绑定到地址`127.0.0.1`（或`localhost`）。无法从出站连接访问此地址。相反，您应该将绑定地址的主机设置为`socket.INADDR_ANY`

# windows-installer - MSI 卸载不会删除 Windows Server 2003 R2 上的 win32 DLL

> ID：11789996
> 
> 赞同：0
> 
> 时间：2012-08-03T05:49:26.627
> 
> 标签：windows-installer, windows-server-2003, uninstallation

我已经构建了一个 C# MSI 安装程序，它在系统目录中复制了一个 C++ win32 dll。它可以在 windows 7、windows server 2008 R2 和 windows server 2003 R2 上正常安装。

但是，卸载描述了不同的行为 - 在 Windows 7 上：卸载删除了 C++ dll - 在 Windows Server 2008 R2 上：卸载删除了 C++ dll - 在 Windows Server 2003 R2 上：卸载没有删除 C++ dll

当 remove prev version 设置为 true 时，预计安装程序会将 C++ dll 替换为较新版本。但它不会在 windows server 2003 R2 上被替换。

有人见过这个吗？请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:45:08.543

这里有两件事：

首先，如果您要将 DLL 安装到 SystemFolder (System32\SysWow64)，则永远不要卸载。Microsoft 最佳实践规定此处安装的文件应该是永久性的。

[ICE09](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368933%28v=vs.85%29.aspx)

其次，确保您了解[默认文件版本控制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368267%28v=vs.85%29.aspx)规则。在安装和升级期间，MSI 将查看文件版本并使用它来确定是否覆盖文件。如果您正在重建 DLL 并且没有正确地对文件进行版本控制，您将无法获得预期的结果。

# php - PHP图像计数器数字格式

> ID：11789998
> 
> 赞同：0
> 
> 时间：2012-08-03T05:49:30.247
> 
> 标签：php, image, counter, number-formatting

我正在构建一个计数器，用于计算并在网页上显示某个目录中的图像数量。

我目前使用的代码是这样的：

```
<?
    $d = opendir("images/myimagefolder");
$count = 0;
     $min_digits = 7;
while(($f = readdir($d)) !== false)
  if(ereg('.jpg$', $f))
     ++$count;
closedir($d);
 if ($min_digits)
{
  $count = sprintf('%0'.$min_digits.'f', $count);
}

$number = $count;
$formattedNumber = sprintf("%07d", $number);
$formattedNumber = str_split($formattedNumber, 3);
$formattedNumber = implode(",", $formattedNumber);

  print "$formattedNumber";
?> 
```

这很好用并输出如下数字：000,000,5

我想要的是让分隔逗号从右边而不是左边每隔 3 位出现一次，所以它会显示为 0,000,005

这将如何完成？

我已经尝试对我的 sprintf 和 str_split 代码进行一些修改，但到目前为止没有任何效果。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:56:49.997

```
$formattedNumber = sprintf("%07d", $number);
$formattedNumber = str_split(strrev($formattedNumber), 3);
for (i=0;i<count($formattedNumber); i++)
    $formattedNumber[i] = strrev($formattedNumber[i]);
$formattedNumber = implode(",", array_reverse($formattedNumber)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:59:19.727

删除最后四行。您只需要'打印 number_format ($count);'

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

**编辑，以上内容不适用于前导 0**

我在 php 网站的评论中发现了这一点。一点正则表达式魔术应该在一行中完成。

```
print preg_replace("/(?<=\d)(?=(\d{3})+(?!\d))/",",",$count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:03:12.757

这是我对数组的看法：

```
$num    = sprintf("%07d", 5);
$digits = str_split($num, 1);
$digits = array_reverse($digits);
$chunks = array_map('array_reverse', array_reverse(array_chunk($digits, 3)));

$concat_chunks = array();
foreach ($chunks as $chunk) {
    $concat_chunks[] = join('', $chunk);
}

$output = join(',', $concat_chunks);
print $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:05:19.900

```
<?php

//image count
$images=count(glob("images/myimagefolder/*.jpg"));

//padding
$images=sprintf("%07s",$images);

//commas
$images=strrev(implode(",",str_split(strrev($images),3)));

//outputs 0,000,005
echo $images;

?> 
```

想出最短的方法来完成您的解决方案，这很有趣。:)