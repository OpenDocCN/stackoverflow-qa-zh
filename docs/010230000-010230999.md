# StackOverflow 问答 10230000-10230999

# error-handling - 在此服务器上找不到请求的 URL

> ID：10230001
> 
> 赞同：0
> 
> 时间：2012-04-19T14:14:24.480
> 
> 标签：error-handling

我有简单的 html 网站。当用户提供错误的 URL 时，如何解决“在此服务器上找不到请求的 URL”的问题。例如用户输入 mydomain.com/abc.html 并且该页面在服务器上不存在，因此会导致错误。如何在错误页面上重定向它以避免此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:19:56.140

创建一个 .htaccess 文件并添加这一行。

`ErrorDocument 404 /foo.html`

这会将任何 404 错误重定向到 foo.html

# java - JDK7 和原生组件的焦点问题

> ID：10230006
> 
> 赞同：6
> 
> 时间：2012-04-19T14:14:35.870
> 
> 标签：java, swing, java-native-interface, java-7, jxbrowser

我们有一个 Swing 应用程序，它通过 JNIWrapper 嵌入了一个 IE ocx 组件。

从 jdk6 切换到 jdk7 后，我们开始注意到焦点问题。当嵌入式 IE 显示带有文本字段的网页（例如 google 搜索页面）时，麻烦就开始了：

浏览器“抓住”焦点，因此您可以开始在搜索文本字段中输入内容。键入的每个键都会进入 IE ocx。但是swing似乎忽略了这个焦点变化。即使我将焦点更改为摇摆文本字段（并且摇摆显示闪烁的输入光标），所有键入的键都会转到 IE ocx

“修复”焦点的唯一方法是停用并激活主框架。之后，焦点似乎是一致的。但是如果我再次点击谷歌搜索文本字段，焦点又会被打破。

jdk7中的焦点处理似乎有很大的变化。从[链接](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/awt.html)：

> 在 Windows 平台上，实现了“综合焦点”的概念。这意味着焦点所有者组件仅模拟其可聚焦状态，而真正的本机焦点设置为“焦点代理”组件。该组件接收键和输入法本机消息并将它们分派给焦点所有者。在 JDK7 之前，焦点代理组件是框架/对话框内的专用隐藏子组件。在 JDK7 中，框架/对话框本身充当焦点代理。现在它代理的焦点不仅是拥有窗口中的组件，还包括所有子组件。一个简单的窗口从不接收本机焦点并依赖于其所有者的焦点代理。这种机制对用户来说是透明的，但在调试时应该考虑到这一点。

任何人都有“修复”行为的想法？

*编辑*：这里有一些代码可以重现[JxBrowser的问题](http://www.teamdev.com/jxbrowser/)

```
 public static void main(String[] args) {
    Browser browser = BrowserFactory.createBrowser(BrowserType.IE);

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(browser.getComponent(), BorderLayout.CENTER);

    JPanel panel = new JPanel();
    frame.getContentPane().add(panel, BorderLayout.NORTH);

    textField = new JTextField();
    panel.add(textField);
    textField.setColumns(10);
    frame.setSize(700, 500);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

    browser.navigate("http://www.google.com");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:54:59.497

全部 - 我们刚刚在另一个浏览器组件（DjProject Native Swing）中遇到了这个问题。在 Java 1.6 下一切正常，但在 Java-7 下，我们开始看到奇怪的问题，您可以在输入框中输入内容，但如果您向后选择以修复错字，则在单击鼠标后无法输入。要恢复，您必须从输入字段中选择，然后返回以继续编辑。

请参阅[http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/awt.html#gdcqp](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/awt.html#gdcqp) 特别是这里关于合成焦点和焦点代理的部分。

无论如何，长话短说 - 在我们的例子中，我能够通过将鼠标侦听器附加到 JWebBrowser.getNativeComponent() 来找到解决方法。然后在 mousePressed 上执行 browser.requestFocus() 后跟 browser.getNativeComponent().requestFocusInWindow();

希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T18:01:35.680

我终于找到了一个可行的解决方法。在找出造成这种情况的原因时，注意到单击另一个组件（即 JLabel）并单击返回文本字段工作正常。所以我使用 AWT Robot 类复制了这种行为。请参阅[在代码中复制鼠标行为中的](https://stackoverflow.com/questions/16742540/replicating-mouse-behavior-in-code/16842951#16842951)更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T22:21:18.890

尝试查看[FocusListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/FocusListener.html)和[WindowFocusListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowFocusListener.html)以实现 Swing 组件本身或 JFrame 的侦听器。每当对其进行调用时`focusLost(..)`，您都可以`requestFocus()`在 Window 或 Component 上使用来强制焦点返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T04:43:34.067

试试 Java 1.7 的最新 jdk。它对我有用。早些时候，我无法在文本字段中输入任何内容。升级后，我没有遇到这个问题。

[http://bugs.sun.com/view_bug.do?bug_id=8018672](http://bugs.sun.com/view_bug.do?bug_id=8018672)

# git - 我该如何做 gitk 的“写提交到文件”的反向操作？

> ID：10230007
> 
> 赞同：6
> 
> 时间：2012-04-19T14:14:36.563
> 
> 标签：git, git-commit, gitk

我`gitk`通过右键单击提交并选择“将提交写入文件”将提交写入文件。

如何应用此文件的提交？我可以做`git apply`,`git add`和`git commit`组合，但是没有一步命令来获取输出（带有提交消息和元数据）并按原样提交吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-02T09:42:32.233

似乎没有人提供这个问题的实际答案，所以这是我从[https://github.com/sinsunsan/archiref_wiki/wiki/Git-howto找到的](https://github.com/sinsunsan/archiref_wiki/wiki/Git-howto)

```
patch -p1 < patch-file 
```

这需要'Write commit to file'生成的补丁文件，告诉它忽略文件中的第一级路径（-p1），即a/，b/，并应用于磁盘上的当前文件。然后结果在您的工作树中，并且可以作为新提交提交：

```
git commit -am'Commit message here please.' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:00:24.827

我正在使用 Linux，但我想我明白你在说什么。右键单击提交时，`gitk`有一个“将提交写入文件”选项，它会弹出一个对话框，`git diff-tree --stdin -p --pretty`默认情况下执行该命令。

`git apply`仅用于应用差异，即它不会创建提交对象，因此不应使用。`git am`应该是执行此操作的正确工具，因为它会创建提交对象。但是，它不理解上述命令输出的格式，并产生您所看到的错误。

`git am`最简单的选择可能是使用可以理解的格式创建补丁，`git format-patch`而不是`git diff-tree`. 可能有一种方法可以强制`git am`理解`git diff-tree`格式，但我不做太多补丁，所以我不知道它是临时的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:17:05.313

`git am`可能会做你正在寻找的东西。它需要生成的补丁`git format-patch`作为输入。我不知道`git-gui`吐出来的是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T20:30:56.397

我以一种棘手的方式解决了这个问题。我猜想，我以一种棘手的方式得到了它。

我使用了我前一段时间工作的旧主分支，现在决定将它逐个提交带到我的新项目中。似乎在几天前，我在一个提交和另一个提交之间搞乱了我的文件模式。

因此，在通过点击`gitk`“将提交写入文件”持续创建这些提交文件以进行移动之后，我开始在记事本中编辑其中的一些文件时一个接一个地“git apply”提交文件。这是对我有用的修复示例。

我调整了这些部分

```
index 30d5c59..63e26fb 100755 
```

让它们看起来像这样

```
old mode 100644
new mode 100755
index 30d5c59..63e26fb 
```

希望这对其他人有帮助。

# android - 奇怪的布局行为 - layout_weight 和按钮

> ID：10230009
> 
> 赞同：0
> 
> 时间：2012-04-19T14:14:52.757
> 
> 标签：android, android-layout, width, android-layout-weight

我在我的 Android 应用程序中的布局有一个奇怪的问题（我正在学习它，所以我当然正在制作一个计算器:)）。我已将所有按钮指定为行宽的 25%，但是当我在顶部添加 EditText 时，第一列变得比其他三列宽很多。（屏幕截图来自 IntelliJ 预览，但是当我在我的设备上加载应用程序时，显示相同的结果。

当我删除 EditText 时，这个问题就消失了。我尝试将权重属性添加到 XML 中的 EditText，但无济于事。

结果：

![结果](../Images/b0678998bc852628561b4f0700152618.png)

我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TableLayout android:layout_height="wrap_content"
                 android:layout_width="fill_parent"
                 android:weightSum="1.0">
        <TableRow android:layout_width="fill_parent"
                  android:weightSum="1.0">
            <EditText android:layout_weight="1.0"
                      android:text="Edit me"></EditText>
        </TableRow>
        <TableRow android:layout_width="fill_parent"
                  android:weightSum="1.0">
            <Button android:text="7"
                    android:layout_weight="0.25"></Button>
            <Button android:text="8"
                    android:layout_weight="0.25"></Button>
            <Button android:text="9"
                    android:layout_weight="0.25"></Button>
            <Button android:text="/"
                    android:layout_weight="0.25"></Button>
        </TableRow>
        <TableRow android:layout_width="fill_parent"
                  android:weightSum="1.0">
            <Button android:text="4"
                    android:layout_weight="0.25"></Button>
            <Button android:text="5"
                    android:layout_weight="0.25"></Button>
            <Button android:text="6"
                    android:layout_weight="0.25"></Button>
            <Button android:text="*"
                    android:layout_weight="0.25"></Button>
        </TableRow>
        <TableRow android:layout_width="fill_parent"
                  android:weightSum="1.0">
            <Button android:text="1"
                    android:layout_weight="0.25"></Button>
            <Button android:text="2"
                    android:layout_weight="0.25"></Button>
            <Button android:text="3"
                    android:layout_weight="0.25"></Button>
            <Button android:text="-"
                    android:layout_weight="0.25"></Button>
        </TableRow>
        <TableRow android:layout_width="fill_parent">
            <Button android:text="0"
                    android:layout_weight="0.25"></Button>
            <Button android:text="."
                    android:layout_weight="0.25"></Button>
            <Button android:text="+/-"
                    android:layout_weight="0.25"></Button>
            <Button android:text="="
                    android:layout_weight="0.25"></Button>
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:22:46.217

如果你的编辑文本填满了屏幕的整个宽度，为什么不把它放在你的表格之外呢？像这样？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">
    <EditText android:layout_width="fill_parent"
              android:layout_height="wrap_content"
                      android:text="Edit me"/>
    <TableLayout android:layout_height="wrap_content"
                 android:layout_width="fill_parent"
                 android:weightSum="1.0">
        <TableRow android:layout_width="fill_parent"
                  android:weightSum="1.0">
            ... 
```

# vb.net - 在消息 ID 上捕获错误 #

> ID：10230020
> 
> 赞同：0
> 
> 时间：2012-04-19T14:15:15.023
> 
> 标签：vb.net

使用 Try/Catch 是否可以通过 Msg ID 捕获 MSSQL 错误？我想在找不到表时捕获 208 然后创建它。我在 C# 中找到了模型代码，但对于如何获取错误 ID，VB.NET 却一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:20:59.870

也许是这样的：

```
Try 
   'Some statment
Catch sqlEx as SqlException When sqlEx.Number = [SQL error number] 
   'Some error handling for that exception 
Catch sqlEx as SqlException When sqlEx.Number = [Another SQL error number]
   'Some other handling for that exception
Catch sqlEx as SqlException
   'Do something else for the other sql exceptions 
Catch ex as Exception 
   Throw 'if there is another exception it might be a good idé to retrow it
End Try 
```

# java - AJAX/Java 持久性

> ID：10230024
> 
> 赞同：1
> 
> 时间：2012-04-19T14:15:24.260
> 
> 标签：java, javascript, ajax, gwt, asynchronous

我是服务器端的新手。我正在为我的公司创建一个数据库应用程序，用于存储指向我们所有营销视频的链接。每个条目都是一个 url（到视频）、描述、行业等。

我已经在 HTML/JavaScript 中设置了一些前端。使用本地 XML 源文件，它使用视频名称填充列表，并为视频项目的所有道具提供文本字段。

这是我的问题：当我将表单数据（新条目）发送到后端时，如何处理更新我的视图？我应该根据本地数据插入一个新条目吗？我是否应该等待服务器的响应，如果成功则根据本地数据更新视图？或者，和上面一样，但是根据后端数据更新视图？目标是确保我的视图始终反映后端数据的状态。

（后端是 Java / Google App Engine）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:22:27.637

使用 AJAX 时：
其中包含一个回调函数，当请求的响应从服务器返回时异步触发。
在此函数中，您可以调用页面更新函数来执行页面更新过程。

# vba - VBA - 如何将 Excel 中的行从一个工作簿复制到另一个工作簿？

> ID：10230025
> 
> 赞同：6
> 
> 时间：2012-04-19T14:15:26.503
> 
> 标签：vba, excel, excel-2010

尽管我看过许多与我的问题相同的帖子，但没有一个答案能满足我的要求。如果您可以将我链接到我很乐意阅读它。

我有一个带有工作表的工作簿。为简单起见，假设我的工作簿有一个工作表。在我的名为“Sheet1”的工作表中，单元格 A1 到 A4 中有数据。

我想要我的 VBA 代码做的是：

1.  将工作簿“A”的第 1 行（或特别是单元格 A1 到 A4）复制到范围变量“myRange”中
2.  创建一个新的工作簿，我们称之为工作簿'B'
3.  将工作簿“B”的默认“sheet1”命名为“测试名称”
4.  打开工作簿“B”（尽管我意识到 VBA 代码“Workbooks.Add”会打开一本新书，因此此步骤可能是多余的，因为 Workbooks.Add 涵盖了第 2 点和第 3 点的一半）
5.  将“myRange”粘贴到“工作簿 B”的第一行
6.  保存名称为“Test Book”的“工作簿 B”，并用方括号括起来的时间戳。该文件还必须是文件扩展名“xls”
7.  关闭“工作簿 B”并返回“工作簿 A”

我到目前为止是这样的：

```
Sub OpenAndSaveNewBook()
    'Declarations
    Dim MyBook As String
    Dim MyRange As Range
    Dim newBook As Workbook

    'Get name of current wb
    MyBook = ThisWorkbook.Name
    Set MyRange = MyBook.Sheets("Sheet1").Range("A1,F1")

    'Create/Open new wb
    newBook = Workbooks.Add

    'Save new wb with XLS extension
    ActiveWorkbook.SaveAs Filename:=ThisWorkbook.Path & "/" & "TEST-BOOK", _
                            FileFormat:=xlNormal, CreateBackup:=False

    '===NOTE: BEFORE THE FOLLOWING RUNS I NEED TO PERFORM ACTIONS ON CELLS VIA VBA ON
    '===WORKBOOK 'A'. DOES THE NEWLY CREATE WORKBOOK BECOME THE PRIMARY/ACTIVE WORKBOOK
    '===? AND SO THEN DO I NEED TO ACTIVATE WORKBOOK 'A'? 
    ActiveWorkbook.Close savechanges:=True

    'Return focus to workbook 'a'
    MyBook.Activate
End Sub 
```

如您所见，我缺少将处理的代码：

*   将我复制的数据粘贴到新工作簿
*   将新工作簿的 sheet1 名称更改为其他名称
*   在保存时向文件名字符串添加时间戳

最后，我在代码中包含了一个问题，因为我认为我可能对 ActiveWorkbook 方法有误解。当代码“Workbooks.Add”运行时，AFAIK 将成为活动工作簿，即具有焦点的工作簿。这是否会影响 VBA 代码在工作簿“A”上运行的方式？这是否意味着如果我想添加代码来操作工作簿“A”的单元格，那么我需要使用“MyBook.Activate”，其中“MyBook”包含工作簿“A”的实际标题字符串？

任何帮助将不胜感激。

谢谢，QF

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T14:36:23.173

您可以直接执行此操作，而不是复制粘贴您上面提到的方式。这也将否定变量的使用。

```
MyBook.Sheets("Sheet1").Rows("1:4").copy _
newBook.Sheets("Sheet1").Rows("1") 
```

**编辑**

我刚刚注意到您的代码有错误。

```
newBook = Workbooks.Add 
```

这条线会给你一个错误，因为你必须使用`Set`

你的代码可以写成

```
Option Explicit

Sub OpenAndSaveNewBook()
    Dim MyBook As Workbook, newBook As Workbook
    Dim FileNm As String

    Set MyBook = ThisWorkbook

    FileNm = ThisWorkbook.Path & "\" & "TEST-BOOK.xls"
    Set newBook = Workbooks.Add

    With newBook
        MyBook.Sheets("Sheet1").Rows("1:4").Copy .Sheets("Sheet1").Rows("1")

        'Save new wb with XLS extension
        .SaveAs Filename:=FileNm, FileFormat:=xlNormal, CreateBackup:=False

        .Close Savechanges:=False
    End With
End Sub 
```

**更多编辑**

阐述使用`SET`

我建议你看看这篇文章。

链接：[工作表不起作用](https://stackoverflow.com/questions/10196620/worksheets-does-not-work/10196646#10196646)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:54:15.363

尽可能避免引用 ActiveWorkbook 以支持显式引用。

正如您所发现的，知道当前处于活动状态的内容可能会令人困惑，并且您无需激活工作簿即可对其进行操作。

所以你应该使用

```
newBook.SaveAs... 
newBook.Close... 
```

录制的宏往往会激活工作簿以便对其进行处理，但那是因为录制宏的人就是这样工作的！所有激活真正做的是改变焦点。

这同样适用于做出选择然后操纵当前选择；这在 VBA 中不是必需的，并且往往比直接操作要慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T14:47:38.837

Excel 最棒的地方在于“记录宏”功能。我开始录制宏并按照您概述的步骤进行操作，然后对 Excel 作为录制宏提供的代码进行了一些小的修改：

```
Range("A1:F1").Select
Selection.Copy
Workbooks.Add
ActiveSheet.Paste
Sheets("Sheet1").Name = "Test Name"
Application.CutCopyMode = False
myNewFileName = myPath & myTestName & "_" & Date & ".xls"
ActiveWorkbook.SaveAs Filename:=myNewFileName _
    , FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False 
```

该`Date`函数返回当前系统日期。请务必注意，您想要的方括号不是有效的文件名字符；如果您尝试使用这些，Excel 将引发错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T00:47:23.757

打开宏记录器；仔细执行您想要的步骤；停止录音机；“编辑”生成的宏。根据需要进行修复，以制作您想要的程序，例如，对其进行参数化。

# android - 访问 xml 中的整数资源

> ID：10230026
> 
> 赞同：31
> 
> 时间：2012-04-19T14:15:28.110
> 
> 标签：android, android-layout, android-resources

我读过[这篇](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)文章，发现如何访问 java 类中的整数资源，但没有其他资源的文档。

这是 res/values/integers.xml 中的资源

```
<resources>
     <integer name="input_field_padding" >5</integer>
</resources> 
```

试图访问 EditText 中的 input_field_padding。

```
<EditText
        android:id="@+id/user_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"    
        android:padding="@integer/input_field_padding" /> 
```

但我得到了以下异常

```
java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x10 
```

是否可以在另一个资源文件中访问它或者我错过了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-10T04:52:39.800

最后，我能够访问 java 代码中的整数资源和 xml 中的整数值作为维度。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="input_field_padding">20dip</dimen>
    <integer name="input_field_padding">20</integer>
</resources> 
```

在 xml 文件中：-

```
<EditText
    android:id="@+id/user_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"    
    android:padding="@dimen/input_field_padding" /> 
```

在java文件中： -

```
EditText mUsername = (EditText) this.findViewById(R.id.user_name);
//int padding = this.getResources().getInteger(R.integer.input_field_padding);
int padding = (int) this.getResources().getDimension(R.dimen.input_field_padding);
mUsername.setPadding(padding, padding, padding, padding); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-14T17:57:16.957

接受的答案完全是错误的。除非有特定的独特原因，否则您永远不应使用 Integer 资源来设置填充大小。不仅在 XML 中，而且在代码中。这就是为什么您经历了`UnsupportedOperationException`. 整数资源不会根据屏幕的 DPI 进行缩放。这意味着您不会为所有设备获得一致的间隔填充。帝门资源会自动为你调整价值。您的 java 代码应如下所示：

```
EditText mUsername = (EditText) this.findViewById(R.id.user_name);
int padding = (int) this.getResources().getDimension(R.dimen.input_field_padding);
mUsername.setPadding(padding, padding, padding, padding); 
```

`EditText`顺便说一句，如果您已经在 XML 中设置了元素，则无需在代码中设置元素的填充。除非您想在运行时将其更改为不同的值。

在此处阅读更多内容：[使用 XML 布局的](http://developer.android.com/guide/topics/ui/declaring-layout.html)
[密度独立性](http://developer.android.com/guide/practices/screens_support.html#density-independence)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-24T11:18:10.873

您也可以这样定义：

```
<resources>
<item name="text_line_spacing" format="integer" type="dimen">10</item>
</resources> 
```

格式 = 封闭数据类型：

float boolean fraction integer ... 和 type 代表：

类型 = 资源类型（用 R.XXXXX.name 引用）：

颜色尺寸字符串样式等...

像这样访问它：

```
Resources res = getResources();
int i= res.getInteger(R.dimen.int_value); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T05:34:53.970

如果您正在使用 Integer 资源，那么您必须像这样使用 R.Integer.yourintvalue

```
int value=(int) contextG.getResources()
            .getDimension(R.integer.myvalue); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-17T08:12:14.033

访问整数字段的正确方法是使用`@integer/input_field_padding`

在 XML 中

```
 <EditText
        android:id="@+id/user_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"    
        android:padding="@dimen/input_field_padding" /> 
```

在 JAVA

```
R.integer.integer_name 
```

请参阅此[http://developer.android.com/guide/topics/resources/more-resources.html#Integer](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-11T09:28:27.690

```
 <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
```

> android:text="@integer/imageSelectLimit"

```
 android:textColor="@color/colorPrimary"
       android:textSize="@dimen/textSize"/> 
```

# javascript - 将 JSON 转换为具有自定义键和值的对象数组

> ID：10230040
> 
> 赞同：1
> 
> 时间：2012-04-19T14:15:53.660
> 
> 标签：javascript

我从服务器收到一个 JSON 字符串：

`{0:["aNumber","aText","anID"],1:["aNumber","aText","anID"]..`.

我必须详细说明这个字符串，以便：

1.  aNumber 与客户端字符串连接（例如，它变为“http://www.myurl.com/aNumber.jpg”）；
2.  aNumber 成为对象数组中 url 的值；
3.  aText 成为同一数组中标题的值；
4.  anID 成为同一数组中 id 的值；

    [{url:"http://www.myurl.com/aNumber.jpg",caption:"aText",id:"anID}.{url:"http://www.myurl.com/aNumber.jpg" ,caption:"aText",id:"anID"}...

我完全知道如何做到这一点，但我想知道是否有人知道是否可以做同样的事情来避免循环：JSON 在移动环境中真的很大（超过 10000 个项目），所以我希望有一些东西提高性能的魔法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:19:39.097

尝试在移动环境中循环浏览 10,000 个项目。然后尝试 100,000 和 1,000,000。您可能会看到循环并不是最大的性能瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:25:24.320

您不能真正做到这一点，这里最好的解决方案是仅在需要时转换对象中的一个特定子数组。

反正循环执行的时间不长，最长的就是解析JSON String > Object。

对于你的循环，我会做类似的事情：

```
obj=JSON.parse({0:["aNumber","aText","anID"],1:["aNumber","aText","anID"]});
arr=[];
for(i in obj){
  o=obj[i]; // improve performances on big objects
  arr.push({url: "http://www.myurl.com/"+ o[0] + ".jpg", caption:o[1], id:o[2]});
} 
```

# lwuit - 是否可以使用代号为 1 的 ZXing？

> ID：10230041
> 
> 赞同：1
> 
> 时间：2012-04-19T14:15:55.020
> 
> 标签：lwuit, zxing, codenameone

我需要知道代号一是否支持[zxing。](http://code.google.com/p/zxing/)如果没有，有没有其他方法可以扫描带有 Codename One 的二维码？我需要在 android 和 iPhone 上都使用它。代号一可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:06:49.837

我们打算相对较快地增加对此的支持。如果您有特定要求，请打开问题/RFE，我们倾向于更快地从社区成员那里推广 RFE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:41:06.113

[这](http://code.google.com/p/codenameone/source/browse/#svn%2Ftrunk%2FDemos%2FZXing)是一个工作示例，如何通过本机调用在[codenameone中使用](/questions/tagged/codenameone "显示标记为“代号”的问题")[zxing 。](/questions/tagged/zxing "显示标记为“zxing”的问题")

还有一个用于扫描条形码的[代号类（](/questions/tagged/codenameone "显示标记为“代号”的问题") [javadoc](https://codenameone.googlecode.com/svn/trunk/CodenameOne/javadoc/com/codename1/codescan/CodeScanner.html)）。[您可以在此处](http://code.google.com/p/codenameone/source/browse/trunk/Demos/BarCodeScanner/)找到使用示例。

# javascript - JQuery-UI Draggable 锁定到窗口

> ID：10230043
> 
> 赞同：2
> 
> 时间：2012-04-19T14:16:09.127
> 
> 标签：javascript, jquery, html, jquery-ui, draggable

我创建了一个非常简单的地图，我希望它是可拖动的。

这是代码：http: [//jsfiddle.net/AeABp/](http://jsfiddle.net/AeABp/)

它有效，我可以随意移动地图。但是我希望它被锁定在“窗口”上，这样它被拖动时就不会出现空白，我希望你明白我的意思。我还查看了 jquery-ui 的概述，但没有找到我需要的任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:32:27.000

您需要将运动限制到一组坐标以使其正常工作。有点搞砸了，但是容器根据元素的左上角限制了元素。

```
$(function() {
    var con = $('#container');
    var cw = con.width( ), ch = con.height( );
    var map = $('#map');
    var mw = map.width( ), mh = map.height( );
    var x1 = -mw + cw, y1 = -mh + ch;
    map.draggable({containment:[x1,y1,0,0]});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:22:10.343

查看[http://jqueryui.com/demos/draggable/#constrain-movement](http://jqueryui.com/demos/draggable/#constrain-movement)这应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T20:30:55.933

有一个简单的方法来做到这一点（如果我理解得很好）：

```
$('#map').draggable({
    containment: 'window',
    scroll: false
}); 
```

# iphone - 在 iPhone 中居中占位符文本

> ID：10230049
> 
> 赞同：6
> 
> 时间：2012-04-19T14:16:27.517
> 
> 标签：iphone, css, html

我使用 HTML5 占位符属性进行文本输入。我可以将用户输入的文本居中，但不能将 iPhone 的占位符文本居中。

我试过以下方法：

```
input::-webkit-input-placeholder, 
input:-moz-placeholder,
::-webkit-input-placeholder,
:-moz-placeholder,
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder,
input:-moz-placeholder, textarea:-moz-placeholder,
{ 
text-align:center; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:37:04.200

似乎像这样捆绑 webkit 和 moz 属性并不能很好地与 webkit 配合使用。尝试单独声明 webkit...

```
input:-moz-placeholder, :-moz-placeholder, 
input:-moz-placeholder, textarea:-moz-placeholder
{ 
text-align:center; 
}

input::-webkit-input-placeholder, ::-webkit-input-placeholder,
textarea::-webkit-input-placeholder
{ 
text-align:center; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:58:07.317

如果您想将任何 CSS 应用于占位符，这里有一个很好的答案：

[使用 CSS 更改 HTML5 输入的占位符颜色](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)

对于颜色之类的东西，这似乎在 iOS 上运行得很好。此外，据此，这就是您在 iPhone 上将占位符居中所需的全部内容：

```
::-webkit-input-placeholder { /* WebKit browsers */
    text-align:center;
} 
```

我已经在 iPhone (iOS 5.1.1)、iPad (iOS 5.0.1) 和 Safari (Win, 5.1.7) 上对此进行了测试。他们似乎都没有认识到这条规则。

# html - html 5画布中的3d变换

> ID：10230056
> 
> 赞同：6
> 
> 时间：2012-04-19T14:16:39.463
> 
> 标签：html, html5-canvas

在 html5 画布中，是否可以拍摄常规的 2d 图像并将其向后旋转以创建 3d 表面的效果？

我的意思很简单，只是改变视角的角度。当然，我并不是说真的有一个 3d 表面

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:48:46.397

我假设您在这里不是在谈论 WebGL...

对于 2D 画布图形，您应该尝试使用[**画布变换方法**](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#transformations)。尽管无法从中获得真正的透视变换，但您可以使用剪切（[**变换矩阵**](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-settransform)`b`的和`c`分量）。请参阅[**Wikipedia**](http://en.wikipedia.org/wiki/Transformation_matrix#Shearing)以了解您可以使用剪切变换和[](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-settransform)**[](http://en.wikipedia.org/wiki/Transformation_matrix#Shearing)**

 ****## 也可以查看一个（愚蠢的）[**JSFiddle 示例**](http://jsfiddle.net/W5Djd/8/)！****

# sql - 返回不同日期的最大数字

> ID：10230061
> 
> 赞同：2
> 
> 时间：2012-04-19T14:16:47.133
> 
> 标签：sql, ms-access, group-by

数据：

```
Name | Score | Date
==
John | 10 | 09/01/2012
John | 20 | 09/01/2012
John | 5 | 09/01/2012
Frank | 20 | 11/01/2012 
```

我想运行一条 SQL 语句，它只提取每天的最高分，所以我不想要一个日期的三个分数，只需要最高分。所以我想从 SQL 得到的回报是：

```
John  | 20 | 09/01/2012    
Frank | 20 | 11/01/2012 
```

是否可以通过 SQL 做到这一点，目前我可以在通过检查日期拉取所有内容后做到这一点。但是，如果可以直接从数据库中进行，那就太好了。

我尝试了一些解决方案，但由于日期和分数并不明显，因为我想要最高的，我不确定从哪里开始。SQL 正在与 MS Access 数据库一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:18:53.347

这是一个完整的例子。我是在 Oracle 中完成的，因此您可能需要稍微调整一下 Access 的语法。

```
CREATE TABLE tbl1 (NAME VARCHAR2(100), score INT, Dt DATE);

INSERT INTO tbl1 VALUES ('John',10,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('John',20,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('John',5,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('Harry',15,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('Frank',20,to_date('20121101','YYYYMMDD'));

select a.dt
     , b.name
     , a.score
  FROM (SELECT dt
             , MAX(score) score
          FROM tbl1
       GROUP BY dt) a
     , (SELECT NAME
             , dt
             , MAX(score) score
          FROM tbl1
       GROUP BY name, dt) b
  WHERE a.dt = b.dt
    AND a.score = b.score 
```

**输出：**

```
1   11/1/2012   Frank   20
2   9/1/2012    John    20 
```

请注意，如果两个人在给定的一天得分最高，它将打印他们两个。例如：

```
INSERT INTO tbl1 VALUES ('John',10,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('John',20,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('John',5,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('Harry',20,to_date('20120901','YYYYMMDD'));
INSERT INTO tbl1 VALUES ('Frank',20,to_date('20121101','YYYYMMDD'));

select a.dt
     , b.name
     , a.score
  FROM (SELECT dt
             , MAX(score) score
          FROM tbl1
       GROUP BY dt) a
     , (SELECT NAME
             , dt
             , MAX(score) score
          FROM tbl1
       GROUP BY name, dt) b
  WHERE a.dt = b.dt
    AND a.score = b.score 
```

**输出：**

```
 DT          NAME    SCORE
1   11/1/2012   Frank   20
2   9/1/2012    John    20
3   9/1/2012    Harry   20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:19:20.657

我想这很简单

```
Select [Name], max([score]) as Score, [Date] from scoresTable
   group by [Date], [Name] 
```

## 编辑：

更准确但有点复杂

```
select o.[Name], i.[Date], i.Score from scoresTable o
inner join (select [Date], max(Score) as Score
   from scoresTable group by [Date]) as i
on o.[Date] = i.[Date] and i.Score = o.Score 
```

甚至更多，如果您的日期字段也包含时间

```
select o.[Name], i.[Date], i.Score from scoresTable o
inner join (select convert(varchar, [Date], 101) as Date, max(Score) as Score
  from scoresTable
    group by convert(varchar, [Date], 101)) as i
on convert(varchar, o.[Date], 101) = i.[Date] and i.Score = o.Score 
```

# java - 休眠刷新方法

> ID：10230062
> 
> 赞同：0
> 
> 时间：2012-04-19T14:16:47.520
> 
> 标签：java, hibernate

我有以下代码在数据库中插入或更新 bean。我有一个静态函数，`HibernateUtil`它从 Hibernate 会话返回一个单例实例。

```
hibSession = HibernateUtil.currentSession();
hibSession.saveOrUpdate(bean);
hibSession.flush(); 
```

这是现有的代码，我想知道是否有任何理由让程序员使用刷新而不是简单地提交以及刷新究竟做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:22:27.673

flush() 方法将绑定到当前持久性上下文的修改与底层数据库同步。flush() 方法不会结束正在运行的事务。

flush() 方法的一种具体用法是强制执行数据库触发器或生成器逻辑（例如生成的 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:22:32.637

flush 将数据库与 Hibernate 重新同步。如果您在表上设置了触发器，这将很有用。触发器将在刷新时运行，不需要事务提交（）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:19:56.627

`flush`将 Hibernate 会话与数据库同步，`commit`结束数据库事务。

# javascript - iPad画布旋转

> ID：10230064
> 
> 赞同：2
> 
> 时间：2012-04-19T14:16:51.500
> 
> 标签：javascript, ipad, html, canvas, orientation

我创建了一个画布元素，并使用 javascript 使其在视口中尽可能大，同时保持纵横比。

当您旋转 iPad 时，设备首先会旋转页面，然后才会启动调整大小事件。

问题是，如果你从横向（大约 800 像素宽）到纵向（大约 400 像素），身体的一部分没有被显示，因为那时还没有调整大小。在此之后，resize 事件将画布的大小调整为正确的大小，但是画布（和文档）的一部分仍然在视口之外。

所以基本上问题存在，因为调整大小事件仅在 iPad 已经切断两侧身体的一部分后才会启动，因为身体太宽了。

我可以通过在画布上设置一个边距来解决这个问题，但这是一个肮脏的解决方案......有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:50:12.753

这也可以被认为是一个肮脏的解决方案，但过去我曾使用 a`setTimeout`来处理这个问题，而且它似乎总是可靠的。

```
window.onorientationchange = function() {
    canvasResize();
}

function canvasResize() {
    window.setTimeout(function () {
        //Your code here based on new size
    }, 100);
} 
```

或者，如果您正在寻找一个不太脏的解决方案，您应该能够自己跟踪视口宽度，然后等到更改后进行更新。在某处添加到您的脚本中：

```
var viewportWidth = window.innerWidth; 
```

并改变`canvasResize`：

```
function canvasResize() {     
    if(window.innerWidth != viewportWidth) {//Dimensions have changed for sure
        viewportWidth = window.innerWidth; //Update viewportWidth for future use
        //Your code here based on new size
    }
    else {
        //Delay and try again
        window.setTimeout(function () {
            canvasResize();
        }, 100);
    }
} 
```

两者都非常快速和肮脏，如果有更优雅的解决方案我会很感兴趣，但我还没有找到一个。

# javascript - dojo 复选框已选中，但直到鼠标悬停才显示

> ID：10230066
> 
> 赞同：3
> 
> 时间：2012-04-19T14:17:00.343
> 
> 标签：javascript, dojo

所以我试图在 JS Bin 中重现这一点，但我无法让道场工作。在 chrome 和 firefox 上也是如此。

我有一个复选框和一个 dojo 就绪功能，看起来像

```
dojo.ready(function() {
    dijit.byId('checkbox1').checked = true;
}); 
```

现在，当页面呈现时，checked = true 已成功执行，但是复选框不会出现检查直到您将鼠标悬停在它上面！

就像浏览器没有在复选框上重新绘制区域一样。在复选框上挥动鼠标，浏览器会重新绘制它，以便您可以看到勾号。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:07:47.000

您需要使用：

```
dijit.byId('checkbox1').set('checked', true) 
```

而不是直接设置属性。所有小部件都应遵循此约定，因为您永远不知道更改属性值时可能需要进行哪些其他处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T23:04:40.700

对我来说，问题是我没有正确加载小部件的 css。

Dojo 的复选框使用 sprite-sheet 而不是原生 html 复选框显示。

通过隐藏 spritesheet 图像并显示支持它的常规 html 复选框，我覆盖了 dojo 的 css（我使用的是 claro 主题）。

因此，请确保您在 css 中包含一个 dojo 主题 css 文件（对我来说是 claro.css）。并确保`<body>`您的 html 上的标签具有`class="claro"`您正在使用的主题或任何主题。

使用精灵表（同样，在本例中为 claro），您的复选框应该看起来![dojo claro 主题复选框](../Images/4b8a00f2ce0145123ae66e2e59c45605.png)不像![html复选框](../Images/da04f1ff978e3024427a37ec3c325046.png)

# javascript - Raphael JS 可调整大小的矩形

> ID：10230069
> 
> 赞同：2
> 
> 时间：2012-04-19T14:17:06.663
> 
> 标签：javascript, html, raphael

我在互联网上搜索过，但我发现无法在 raphael JS 中制作可调整大小的矩形；我正在寻找可以在平板电脑上使用的交互式东西，这就是为什么右键单击是一种解决方案。你有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:20:03.193

你试过这个 raphael 插件吗？[自由形式插件](https://github.com/ElbertF/Raphael.FreeTransform)（[演示](http://alias.io/raphael/free_transform/)）

# iphone - 如何检查 iPhone 中视图位置的 UIImageView 存在

> ID：10230071
> 
> 赞同：0
> 
> 时间：2012-04-19T14:17:13.277
> 
> 标签：iphone, ios, uiimageview

我在特定位置有一个图像视图，我知道该位置，但我想检查该位置是否有一个图像视图。

请帮我解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:55:19.907

Here is a helper method to check if two rects overlap:

```
-(BOOL) rect:(CGRect)rect overlap:(CGRect)anotherRect
{
    BOOL xOverlap = ((rect.origin.x >= anotherRect.origin.x) && (rect.origin.x <= anotherRect.origin.x + anotherRect.size.width)) ||
                    ((anotherRect.origin.x >= rect.origin.x) && (anotherRect.origin.x <= rect.origin.x + rect.size.width));

    BOOL yOverlap = ((rect.origin.y >= anotherRect.origin.y) && (rect.origin.y <= anotherRect.origin.y + anotherRect.size.height)) ||
                    ((anotherRect.origin.y >= rect.origin.y) && (anotherRect.origin.y <= rect.origin.y + rect.size.height));

    return xOverlap && yOverlap;
} 
```

Usage:
You can iterate though all subviews of a view and check if the frame of your view overlaps another view's frame. Suppose you have a property myView then:

```
for(UIView *v in self.view.subviews)
    {
        if(v == self.myView) //skip the same view
            continue;

        if([self rect:self.myView.frame overlap:v.frame])
        {
            //Do something...
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:21:05.083

首先，您在主视图中获得所有视图的数组：

```
NSArray *subviews = [view subviews]; 
```

然后，对于每个视图，您可以检查每个视图的框架：

```
for (int i = 0 ; i < [subviews count]; i++){
    CGRect frame = [subviews objectAtIndex:i].frame;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:20:31.170

您可以在 for 循环中浏览该 UIImageView 的父视图的子视图。并将每个视图的位置与特定 UIImageView 的位置进行比较。

但这对我来说听起来很糟糕。也许如果你能告诉更多关于这个问题的信息，我们可以提供更好的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:38:24.030

您也可以使用这种方法：

既然你说你有 ImageView 的位置，那么将它保存在一些 CGRect 变量中。试试这个

```
UIImageView *yourImgView = (UIImageView *)[view subviews]; 
```

这将返回您的 imageView 。然后，您可以根据需要检查其较早保存的位置或其可见性的框架。

# c++ - unique_ptr 没有成员函数

> ID：10230073
> 
> 赞同：3
> 
> 时间：2012-04-19T14:17:13.940
> 
> 标签：c++, c++11, unique-ptr

我正在将我的 gcc 4.4 更新到 gcc 4.7，我将这样做以使用 4.7。

我的问题是当我使用`unique_ptr`. 我写了这段代码

```
#include <iostream>
#include <memory>

#include <CL/cl.h>

using namespace std;

/*
 * 
 */
int main(int argc, char** argv) {

  std::unique_ptr<cl_platform_id[]>yt;
  yt = std::unique_ptr<icl_platform_id[]> (new cl_platform_id [3]);

  /* yt.get()[0] = ...... */ this is error no member found

    return 0;
} 
```

但我想使用`yt`成员`uique_ptr::get()`，我得到的唯一功能是`operator*`，那有什么问题？

编辑：

这是我的问题： http://image-load.biz/?di= [6FBY](http://image-load.biz/?di=6FBY)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:18:07.413

这将是您的 IDE 成员建议的问题。`std::unique_ptr`当然`pointer get() const noexcept;`在默认模板和数组的部分特化中都有一个 member 。

如果您`get()`自己键入，那么编译器应该很高兴。不幸的是，我从来没有使用过那个 IDE，所以我不能帮你修复它的自动完成器。

你是否应该打电话`get()`是另一个问题。您可以访问数组元素`yt[0]`等。`get()`仅适用于您实际需要原始指针的极少数情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:27:24.590

你想要这样的东西：

```
std::unique_ptr<cl_platform_id[]> yt ( new cl_platform_id[3] );
yt[0].some_member(); 
```

# c# - 将带有 Web 服务的网站项目移动到 AWS windows 服务器

> ID：10230077
> 
> 赞同：0
> 
> 时间：2012-04-19T14:17:26.253
> 
> 标签：c#, visual-studio, web-services, amazon-web-services

我已经启动了一个 Windows Server 2008 的新实例，并试图移动并启动我在 Visual Studio 中创建的 Web 服务。如何将项目从本地计算机移动到远程桌面？感谢所有帮助！

我已经尝试了非常简单的方法，只是将目录复制到与本地计算机相同位置的远程桌面。没用..当我尝试访问它在本地计算机上的相同地址时（http://localhost:80/somesite 我得到的是：

HTTP 错误 403.14 - 禁止

Web 服务器配置为不列出此目录的内容。

我可能会以错误的方式解决这个问题，但不知道从哪里开始..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:26:09.520

听起来您需要设置 IIS。请参阅以下链接[http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:26:50.043

我会确保在 IIS 服务器中启用了 asp.net。还尝试明确点击您的页面，例如：

```
http://localhost:80/somesite/myhome.aspx 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:33:16.443

我相信您的特定问题有一个快速的答案，但如果您要经常做这种事情，最好先花一些时间阅读，然后点击并感受一下IIS。

[http://msdn.microsoft.com/en-us/library/ms178477.aspx](http://msdn.microsoft.com/en-us/library/ms178477.aspx)

Visual Studio 已经抽象了大部分站点/虚拟目录设置和配置，您可能不能只是将文件复制过来并让它工作。有很多事情需要考虑：网站与虚拟目录及其配置、应用程序池及其身份、文件权限、默认文档等。

# python - 我正在尝试使用 forms.py 由 Django 构建注册表单

> ID：10230083
> 
> 赞同：0
> 
> 时间：2012-04-19T14:17:36.220
> 
> 标签：python, django

在这里每次我输入任何数据时，除了重新加载页面并且密码和验证密码为空之外，即使我没有写它们通常相同，raise.ValidationError 没有显示任何建议？

视图.py

```
 from django.contrib.auth.models import User
    from django.http import HttpResponse
    from django.http import HttpResponseRedirect
    from django.shortcuts import render_to_response
    from shoghlanah.forms import SignUpForm
    from django.template import RequestContext
    from django.views.decorators.csrf import csrf_exempt
    from django.contrib.auth import authenticate, login
    from django.contrib.auth import logout
    from shoghlanah.models import *

    def EmployerRegistration(request):
        if request.user.is_authenticated():
            return HttpResponseRedirect('/profile/')
        if request.method == 'POST':
            form = SignUpForm(request.POST)
            if form.is_valid():
                user=User.objects.create_user(username=form.cleaned_data["username"],password= form.cleaned_data['password'],first_name=form.cleaned_data['first_name'],last_name=form.cleaned_data['last_name'],email=form.cleaned_data['email'],address=form.cleaned_data['address'],mobile=form.cleaned_data['mobile'])
                user.save()
                employer =Employer(user=user,first_name=form.cleaned_data['first_name'],last_name=form.cleaned_data['last_name'],email=form.cleaned_data['email'],address=form.cleaned_data['address'],mobile=form.cleaned_data['mobile'])
                employer.save()
                #Employer=user.get_profile()
                #Employer.first_name=form.cleaned_data['first_name']
                #Employer.last_name=form.cleaned_data['last_name']
                #Employer.address=form.cleaned_data['address']
                #Employer.mobile =form.cleaned_data['mobile']
                #Employer.save()
            return HttpResponseRedirect('/login/') 

            #else:
             #    return render_to_response('Sign_up_Employer.html',{'form':form},context,context_instance=RequestContext(request))

        else:
        #user is not submitting show them the registeration form
                form= SignUpForm()
                context = {'form':form}
                return render_to_response('Sign_up_Employer.html',context,context_instance=RequestContext(request)) 
```

表格.py

```
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth.models import User
from django import forms
from django.forms import ModelForm
from shoghlanah.models import *

class SignUpForm(ModelForm):
    username      = forms.CharField(label=(u'Username'))
    first_name    = forms.CharField(label=(u'First name'))
    last_name     = forms.CharField(label=(u'Last name'))
    address       = forms.CharField(label=(u'Address'))
    email         = forms.EmailField(label=(u'Email Address'))
    password      = forms.CharField(label=(u'Password'),widget=forms.PasswordInput(render_value=False))
    password1     = forms.CharField(label=(u'Verify Password'),widget=forms.PasswordInput(render_value=False))
    mobile        = forms.IntegerField(label=(u'Mobile'))

    class Meta:
        model = Employer

        exclude =('user',)

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username

            raise forms.ValidationError("That username  already exists. Please select another")

    def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
              raise forms.ValidationError("not matched")
        return self.cleaned_data 
```

sign_up_Employer.html

```
{%block content%}
<form action ="" method ="post">
{% csrf_token %}
{% if form.errors %}<p>Please Correct </p> {% endif %}
<div class ="register_div">
{%if form.username.errors%}<p class= "error">{{form.username.errors}}</p>{% endif %}
 <p> <label for ="username"{% if form.username.errors %} class= "error"{% endif %}> Username</label></p>
<p>{{form.username}}</p>
 </div>
 <div class ="register_div">
{%if form.first_name.errors%}<p class= "error">{{form.first_name.errors}}</p>{% endif %}
 <p> <label for ="first_name"{% if form.first_name.errors %} class= "error"{%endif%}>First name</label></p>
<p>{{form.first_name}}</p>
 </div>
 <div class ="register_div">
{%if form.last_name.errors%}<p class= "error">{{form.last_name.errors}}</p>{% endif %}
 <p> <label for ="last_name"{% if form.last_name.errors %} class= "error"{%endif%}>Last name</label></p>
<p>{{form.last_name}}</p>
 </div>
<div class ="register_div">
{%if form.address.errors%}<p class= "error">{{form.address.errors}}</p>{% endif %}
 <p> <label for ="address"{% if form.address.errors %} class= "error"{%endif%}>Address'</label></p>
<p>{{form.address}}</p>
 </div>
 <div class ="register_div">
{%if form.email.errors%}<p class= "error">{{form.email.errors}}</p>{% endif %}
 <p> <label for ="email"{% if form.email.errors %} class= "error"{%endif%}>Email Address</label></p>
<p>{{form.email}}</p>
 </div>
 <div class ="register_div">
{%if form.password.errors%}<p class= "error">{{form.password.errors}}</p>{% endif %}
 <p> <label for ="password"{% if form.password.errors %} class= "error"{%endif%}>Password</label></p>
<p>{{form.password}}</p>
 </div>

 <div class ="register_div">
{%if form.password1.errors%}<p class= "error">{{form.password1.errors}}</p>{% endif %}
 <p> <label for ="password1"{% if form.password1.errors %} class= "error"{%endif%}>Verify Password</label></p>
<p>{{form.password1}}</p>
 </div>

 <div class ="register_div">
{%if form.mobile.errors%}<p class= "error">{{form.mobile.errors}}</p>{% endif %}
 <p> <label for ="mobile"{% if form.mobile.errors %} class= "error"{%endif%}>Mobile</label></p>
<p>{{form.mobile}}</p>
 </div>
 <p><input type =submit alt =register></p>
</form>
{% endblock %} 
```

模型.py

```
from django.db import models
class Employer(models.Model):#Employer inherits from User
    user = models.OneToOneField(User)
    employer_verified = models.BooleanField(default=False)
    profile_picture = models.ImageField(upload_to='ProfilePictureDB', null=False , blank=False) 
    #profile pictures will be uploaded to ProfilePictureDB 
    hidden_values = models.CharField(max_length=200) 
    #hidden_values will contain all the attributes that the employer/contractor wants to hide
    signature = models.OneToOneField(Signature)
    mobile = models.IntegerField(max_length=20)
    address = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:35:02.490

```
if request.method == "POST":

    if form.is_valid():
        # ....
    return HttpResponseRedirect('/login/')  # not indented 
```

返回没有缩进 is_valid() 块。因此，无论表单的有效性如何，POST 都会重定向。改成

```
if request.method == "POST":

    if form.is_valid():
        # ....
        return HttpResponseRedirect('/login/')  # indented 
```

更新：

```
def clean_username(self):
    username = self.cleaned_data['username']
    try:
        User.objects.get(username=username)
    except User.DoesNotExist:
        return username

        raise forms.ValidationError("That username  already exists. Please select another") 
```

这是错误的；回来后不能加薪。加注应该在 try 块中。

```
def clean_username(self):
    username = self.cleaned_data['username']
    try:
        User.objects.get(username=username)
        raise forms.ValidationError("That username already exists. "
                                    "Please select another")
    except User.DoesNotExist:
        return username 
```

# silverlight-5.0 - 如何从 SL5 中的标记扩展更新目标对象？

> ID：10230088
> 
> 赞同：0
> 
> 时间：2012-04-19T14:17:51.000
> 
> 标签：silverlight-5.0, markup-extensions, dependencyobject

我正在 Silverlight 5 的标记扩展中尝试此代码。

```
 public override object ProvideValue(IServiceProvider serviceProvider)
    {
        _target = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        _depObj = _target.TargetObject as DependencyObject;
        _depProp = _target.TargetProperty as DependencyProperty;

        return GetText(TextId, DefaultText);
    } 
```

depObj 似乎提供正确，但 depProp 似乎不是 DependencyProperty 类型（类型是 Sytem.String（System.Reflection.PropertyInfo））。强制转换结果为 null。

depProp 代表正确的 Text 或 Content 属性，但如果没有它是 DependencyProperty，我无法设置它的值。

非常感谢任何输入。

西科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:17:32.933

不知道为什么它作为 PropertyInfo 出现，但您当然*可以*使用以下代码设置值：

```
if (TargetProperty is DependencyProperty)
{
    var dependencyObject = target as DependencyObject;
    if (dependencyObject != null)
    {
        var newValue = GetValue();
        dependencyObject.SetValue(TargetProperty as DependencyProperty, newValue);
    }
}
else if (TargetProperty is PropertyInfo)
{
    var pi = target as PropertyInfo;
    pi.SetValue(target, GetValue(), null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T10:26:22.047

@Berryl 上面给出的方法可以工作。但是，如果您还需要访问`DependencyProperty`，则可以使用类似的东西。此代码还演示了 silverlight 和 WPF 之间的细微差别，但两者都可以很好地工作。

仅对于 silverlight 或 WPF，您可以删除之前或之后的部分`#else`以稍微简化代码。

但是解决依赖属性的部分在中间（赋值`_property`）。

```
public override object ProvideValue(IServiceProvider serviceProvider)
{
    IProvideValueTarget Target = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;

    if (Target == null) {
        throw new InvalidOperationException(
            "Cannot resolve the IProvideValueTarget. Are you binding to a property?");
    }

    /* we need the dependency property (for bindings) */
#if SILVERLIGHT
    PropertyInfo Property = (PropertyInfo)Target.TargetProperty;

    /* resolve the dependency property */
    FieldInfo DepPropertyInfo = Target.TargetObject.GetType()
        .GetField(Property.Name + "Property", BindingFlags.Static | BindingFlags.Public);

    _property = (DependencyProperty)DepPropertyInfo.GetValue(/* obj = */ null);
#else
    _property = Target.TargetProperty as DependencyProperty;
#endif

    if (_property != null) {
#if SILVERLIGHT
        if (Property.Name.StartsWith("Text")) {
            UpdateSourceTrigger = UpdateSourceTrigger.Default;
#else
        if (_property.Name.StartsWith("Text")) {
            UpdateSourceTrigger = UpdateSourceTrigger.LostFocus;
#endif
        }
        else {
            UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
        }
    } 
```

# java - Google 协议缓冲区 - 用户定义的 java 对象作为消息字段

> ID：10230093
> 
> 赞同：3
> 
> 时间：2012-04-19T14:17:58.703
> 
> 标签：java, serialization

我从昨天开始学习谷歌协议缓冲区并且有一个问题：

我可以使用用户定义的 java 类作为 .proto 文件中的字段类型吗？

让我用以下细节澄清我的问题：

1 - 我有以下 java 类“MyComplexClass.java”：

```
package mypackage;

import another.package1.ClassA;
import another.package2.ClassB;

public class MyComplexClass {

private ClassA var1;
private ClassB var2;

public MyComplexClass(ClassA X, ClassB Y)
 this.var1 = X;
 this.var2 = Y;
} 
```

2-现在我想序列化“MyComplexClass.java”类的一个实例。为此，我想在 .proto 文件中描述如下消息：

```
message myMessageToBeSerialized {

 required ***MyComplexClass*** intanceOfComplexClass = 1;

} 
```

是否可以使用用户定义的类***MyComplexClass***作为字段类型？还是只允许使用标量类型？

任何帮助，将不胜感激。提前致谢。

贺拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:20:57.223

不可以。只能使用定义为协议缓冲区的类型。（也就是说，当您需要添加更多功能时，通常将您自己的复杂类实现为协议缓冲区类的*包装器。）*

如果您真的非常热衷于它，您可以使用普通的 Java 序列化（`ObjectOutputStream`包裹在 a 周围`ByteArrayOutputStream`），然后通过协议缓冲区发送 byte[]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:02:14.850

是的你可以。将 ClassA 和 ClassB 都定义为消息，您可以将它们称为 MyComplexClass 中的字段类型。见下文。（在单独的 .proto 文件中定义所有 3 个包）

```
package another.package1;
message ClassA 
{
  <fields>
}

package another.package2;
message ClassB
{
  <fields>  
}

package mypackage;

import another/package1/ClassA;
import another/package2/ClassB;

message MyComplexClass
{
     required ClassA var1 = 1;
     required ClassB var2 = 2;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:21:38.360

只需定义一个代理类来实现从协议缓冲区类到您的类的转换，反之亦然。

# python - 带有浮点数的格式字符串中的千位分隔符

> ID：10230095
> 
> 赞同：9
> 
> 时间：2012-04-19T14:18:04.907
> 
> 标签：python, formatting, python-2.6

我想在浮点数中有千个分隔符。我正在做的是：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, 'en_US.UTF-8')
'en_US.UTF-8'
>>> print '{0:n}'.format(123456.0)
123,456 
```

当整数部分有 7 位或更多位时，它不起作用：

```
>>> print '{0:n}'.format(1234567.0)
1.23457e+06 
```

我发现的解决方法是在格式化之前将浮点数转换为整数：

```
>>> print '{0:n}'.format(int(1234567.0))
1,234,567 
```

是否有一个格式字符串可以处理所有浮点数而无需先将其转换为整数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-19T16:58:30.453

语言环境设置有点难看，因为它不是线程安全的，并且非常依赖于语言环境的实际作用。这可能是你想要的，但这里是 Python 的内部版本（从 2.7 开始）：

```
>>> '{0:,.2f}'.format(123466666)
'123,466,666.00' 
```

有关规范，请参见[http://www.python.org/dev/peps/pep-0378/](http://www.python.org/dev/peps/pep-0378/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T14:28:29.403

使用语言环境模块格式功能：

```
>>> locale.setlocale(locale.LC_ALL, 'English')
>>> 'English_United States.1252'

>>> print locale.format('%.2f', 123456789.0, True)
>>> 123,456,789.00 
```

# php - 将值存储在会话变量中，并检查它

> ID：10230098
> 
> 赞同：5
> 
> 时间：2012-04-19T14:18:10.497
> 
> 标签：php, javascript

我使用 javascript 函数在灯箱上制作了一个登录表单。现在我想在会话变量上存储一个值，以便检查用户是否已登录，而不是在页面上的导航中一次又一次地向他显示登录灯箱。我的 javascript 函数是：

```
<script language="javascript" type="text/javascript">  
    function createlightbox()  
    {  
        document.getElementById('light').style.display='block';  
        document.getElementById('fade').style.display='block'  
    }  
    function closelightbox()  
    {  
        document.getElementById('light').style.display='none';  
        document.getElementById('fade').style.display='none'  
    } 
     function checksession()  
    {  if (admin=="admin")
    {closelightbox();}
    else
    {createlightbox();}  
    } 

function check(form)/*function to check userid & password*/
{
 /*the following code checkes whether the entered userid and password are matching*/
 if(form.name.value == "admin" && form.password.value == "admin")
  {
    closelightbox();
     var admin = <?php $_SESSION['Admin']= 1; ?>

  }
 else
 {
  document.getElementById("error").style.display='block';/*displays error message*/
  }
}      
</script> 
```

我在我的表单 onsubmit 事件中调用 checksession 函数

```
<form id="Admin" onreset="checksession()"> 
```

问题是，在每次重置或提交表单时，即使页面发生更改，也会显示登录表单。为什么它不检查检查会话功能。请告诉我我犯的任何错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:53:52.520

我不确定你的条件在哪里。但以下代码应出现在生成灯箱的 php 脚本中：

```
<?php echo '<script> var admin ='.$_SESSION['Admin'].'</script>'; ?> 
```

（要检查上面是否正常工作，您可以查看页面的源代码并查看是否有类似的行`<script> var admin =1</script>`：）

在您访问上面设置的管理变量之前，应执行以下操作：

```
<script language="javascript" type="text/javascript">  
.... //other code

 function checksession()  
    {  if(admin =="admin")
    {closelightbox();}
    else
    {createlightbox();}  
    } 
.... 
```

还要注意`if`语句应该比较`==`而不是分配`=`

# r - 我怎样才能使这个 R 代码片段更快、更 R-ish？

> ID：10230101
> 
> 赞同：2
> 
> 时间：2012-04-19T14:18:16.420
> 
> 标签：r, function, performance, lapply

来自其他各种语言，我发现 R 功能强大且直观，但我对它的性能并不感到兴奋。所以我决定尝试改进我编写的一些代码片段，并学习如何更好地在 R 中编写代码。

这是我写的一个函数，试图确定一个向量是否是二进制值（两个不同的值或只有一个值）：

```
isBinaryVector <- function(v) {
  if (length(v) == 0) {
    return (c(0, 1))
  }
  a <- v[1]
  b <- a
  lapply(v, function(x) { if (x != a && x != b) {if (a != b) { return (c()) } else { b = x }}})
  if (a < b) {
    return (c(a, b))
  } else {
    return (c(b, a))
  }
} 
```

编辑：这个函数应该查看一个向量，然后`c()`如果它不是二进制值则返回，`c(a, b)`如果是，则返回，a 是较小的值，b 是较大的值（如果 a == b 则只是`c(a, a)`。例如，对于

```
 A B C
1 1 1 0
2 2 2 0
3 3 1 0 
```

我会这样做`lapply`并`isBinaryVector`得到：

```
$A
[1] 1 1

$B
[1] 1 1

$C
[1] 0 0 
```

在中等大小的数据集（大约 1800 * 3500，其中 2/3 是二进制值）上花费的时间大约是 15 秒。该集合仅包含浮点数。

无论如何我可以更快地做到这一点吗？

感谢您的任何投入！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T14:52:02.270

您实际上是在尝试编写一个函数，如果向量恰好具有两个唯一值，则该函数返回 TRUE，否则返回 FALSE。

试试这个：

```
> dat <- data.frame(
+   A = 1:3,
+   B = c(1, 2, 1), 
+   C = 0
+ )
> 
> sapply(dat, function(x)length(unique(x))==2)
    A     B     C 
FALSE  TRUE FALSE 
```

接下来，您要获取最小值和最大值。该函数`range`执行此操作。所以：

```
> sapply(dat, range)
     A B C
[1,] 1 1 0
[2,] 3 2 0 
```

在那里，你拥有了制作一个易于理解并且应该非常快速的小函数的所有要素，即使是在大量数据上：

```
isBinary <- function(x)length(unique(x))==2

binaryValues <- function(x){
  if(isBinary(x)) range(x) else NA
}

sapply(dat, binaryValues)

$A
[1] NA

$B
[1] 1 2

$C
[1] NA 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:42:44.140

此函数为向量（或数据框的列）返回 true 或 false：

```
is.binary <- function(v) {
  x <- unique(v)
  length(x) - sum(is.na(x)) == 2L
} 
```

也看看[这个帖子](https://stackoverflow.com/questions/9830963/identify-binary-columns "这个帖子")

我会使用类似的东西来获取列索引：

```
bivalued <- apply(my.data.frame, 2, is.binary)

nominal <- my.data.frame[,!bivalued]
binary <- my.data.frame[,bivalued] 
```

样本数据：

```
my.data.frame <- data.frame(c(0,1), rnorm(100), c(5, 19), letters[1:5], c('a', 'b'))
> apply(my.data.frame, 2, is.binary)
     c.0..1\.   rnorm.100\.     c.5..19\. letters.1.5\.  c..a....b.. 
        TRUE        FALSE         TRUE        FALSE         TRUE 
```

# java - java中是否有一些经验模式分解库？

> ID：10230106
> 
> 赞同：3
> 
> 时间：2012-04-19T14:18:42.433
> 
> 标签：java, signal-processing

我想问你关于用java编写的任何[经验模式分解](http://en.wikipedia.org/wiki/Hilbert%E2%80%93Huang_transform#The_empirical_mode_decomposition_.28EMD.29)库。我找不到任何东西。最好是开源的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T20:43:17.607

我刚刚找到了一个 C 实现（[https://code.google.com/p/realtime-emd/](https://code.google.com/p/realtime-emd/)）并将其翻译成 Java。所以请注意，这段代码不是Java风格的代码，它只是编译和运行的Java代码。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package tryout.emd;

/**
 *
 * @author Krusty
 */
public class Emd {
    private void emdSetup(EmdData emd, int order, int iterations, int locality) {
        emd.iterations = iterations;
        emd.order = order;
        emd.locality = locality;
        emd.size = 0;
        emd.imfs = null;
        emd.residue = null;
        emd.minPoints = null;
        emd.maxPoints = null;
        emd.min = null;
        emd.max = null;
    }

    private void emdResize(EmdData emd, int size) {
        int i;
        // emdClear(emd);

        emd.size = size;
        emd.imfs = new double[emd.order][]; // cnew(double*, emd->order);
        for(i = 0; i < emd.order; i++) emd.imfs[i] = new double[size]; // cnew(double, size);
        emd.residue = new double[size]; // cnew(double, size);
        emd.minPoints = new int[size / 2]; // cnew(int, size / 2);
        emd.maxPoints = new int[size/2]; //cnew(int, size / 2);
        emd.min = new double[size]; // cnew(double, size);
        emd.max = new double[size]; // cnew(double, size);
    }

    private void emdCreate(EmdData emd, int size, int order, int iterations, int locality) {
        emdSetup(emd, order, iterations, locality);
        emdResize(emd, size);
    }

    private void emdDecompose(EmdData emd, double[] signal) {
        int i, j;
        System.arraycopy(signal, 0, emd.imfs[0], 0, emd.size); // memcpy(emd->imfs[0], signal, emd->size * sizeof(double));
        System.arraycopy(signal, 0, emd.residue, 0, emd.size); // memcpy(emd->residue, signal, emd->size * sizeof(double));

        for(i = 0; i < emd.order - 1; i++) {
            double[] curImf = emd.imfs[i]; // double* curImf = emd->imfs[i];
            for(j = 0; j < emd.iterations; j++) {
                emdMakeExtrema(emd, curImf);

                if(emd.minSize < 4 || emd.maxSize < 4) break; // can't fit splines

                emdInterpolate(emd, curImf, emd.min, emd.minPoints, emd.minSize);
                emdInterpolate(emd, curImf, emd.max, emd.maxPoints, emd.maxSize);
                emdUpdateImf(emd, curImf);
            }

            emdMakeResidue(emd, curImf);
            System.arraycopy(emd.residue, 0, emd.imfs[i+1], 0, emd.size); // memcpy(emd->imfs[i + 1], emd->residue, emd->size * sizeof(double));
        }
    }

    // Currently, extrema within (locality) of the boundaries are not allowed.
    // A better algorithm might be to collect all the extrema, and then assume
    // that extrema near the boundaries are valid, working toward the center.

    private void emdMakeExtrema(EmdData emd, double[] curImf) {
        int i, lastMin = 0, lastMax = 0;
        emd.minSize = 0;
        emd.maxSize = 0;

        for(i = 1; i < emd.size - 1; i++) {
            if(curImf[i - 1] < curImf[i]) {
                if(curImf[i] > curImf[i + 1] && (i - lastMax) > emd.locality) {
                    emd.maxPoints[emd.maxSize++] = i;
                    lastMax = i;
                }
            } else {
                if(curImf[i] < curImf[i + 1] && (i - lastMin) > emd.locality) {
                    emd.minPoints[emd.minSize++] = i;
                    lastMin = i;
                }
            }
        }
    }

    private void emdInterpolate(EmdData emd, double[] in, double[] out, int[] points, int pointsSize) {
        int size = emd.size;
        int i, j, i0, i1, i2, i3, start, end;
        double a0, a1, a2, a3;
        double y0, y1, y2, y3, muScale, mu;
        for(i = -1; i < pointsSize; i++) {
            i0 = points[mirrorIndex(i - 1, pointsSize)];
            i1 = points[mirrorIndex(i, pointsSize)];
            i2 = points[mirrorIndex(i + 1, pointsSize)];
            i3 = points[mirrorIndex(i + 2, pointsSize)];

            y0 = in[i0];
            y1 = in[i1];
            y2 = in[i2];
            y3 = in[i3];

            a0 = y3 - y2 - y0 + y1;
            a1 = y0 - y1 - a0;
            a2 = y2 - y0;
            a3 = y1;

            // left boundary
            if(i == -1) {
                start = 0;
                i1 = -i1;
            } else
                start = i1;

            // right boundary
            if(i == pointsSize - 1) {
                end = size;
                i2 = size + size - i2;
            } else
                end = i2;

            muScale = 1.f / (i2 - i1);
            for(j = start; j < end; j++) {
                mu = (j - i1) * muScale;
                out[j] = ((a0 * mu + a1) * mu + a2) * mu + a3;
            }
        }
    }

    private void emdUpdateImf(EmdData emd, double[] imf) {
        int i;
        for(i = 0; i < emd.size; i++)
            imf[i] -= (emd.min[i] + emd.max[i]) * .5f;
    }

    private void emdMakeResidue(EmdData emd, double[] cur) {
        int i;
        for(i = 0; i < emd.size; i++)
            emd.residue[i] -= cur[i];
    }

    private int mirrorIndex(int i, int size) {
        if(i < size) {
            if(i < 0)
                return -i - 1;
            return i;
        }

        return (size - 1) + (size - i);
    }

    public static void main(String[] args) {
        /*
        This code implements empirical mode decomposition in C.
        Required paramters include:
        - order: the number of IMFs to return
        - iterations: the number of iterations per IMF
        - locality: in samples, the nearest two extrema may be
        If it is not specified, there is no limit (locality = 0).

        Typical use consists of calling emdCreate(), followed by
        emdDecompose(), and then using the struct's "imfs" field
        to retrieve the data. Call emdClear() to deallocate memory
        inside the struct.
        */
        double[] data = new double[]{229.49,231.94,232.97,234,233.36,235.15,235.64,235.78,238.95,242.09,240.61,240.29,237.88,252.11,259.16,263.4,262.1,254.85,254.42,261.27,253.92,259.04,251.58,248.96,239.49,229.39,247.02,249.48,254.9,251.27,246.85,245.43,241.52,231.23,235.67,239.99,238.49,237.41,246.4,249.83,253.67,256.71,255.9,248.93,244.05,242.49,236.52,243.63,246.55,247.3,252.56,259.91,264.41,266.55,262.75,266.33,263.53,261.62,259.38,260.94,249.14,244.63,241.66,240.16,241.81,251.57,251.01,252.49,250.23,244.89,245.79,244.55,243.04,238.84,244.98,247.26,251.91,252.81,252.16,256.83,253.8,251.03,250.19,254.66,254.74,255.76,254.52,252.95,254.57,252.29,243.32,244.88,242.26,240.84,245.05,246.12,243.02,242.79,239.05,233.34,236.22,233.69,234.99,235.84,236.43,243.46,245.25,251.67,250.73,255.7,255.85,256.18,259.71,260.7,262.8,268.98,267.81,275.46,275.98,279.85,280.99,284.3,283.17,278.99,279.48,275.96,274.77,270.99,281.01,281.25,281.28,286,287.25,290.35,291.9,294.01,306.1,309.27,301,302.01,301.02,299.03,300.36,299.59,299.38,296.86,292.72,295.83,300.87,304.21,309.53,308.43,309.87,307.4,309.3,307.96,299.58,298.61,293.31,292.25,299.96,298.31,304.76,300.26,306.16,306.35,308.17,302.61,307.72,309.42,308.73,311.36,309.48,312.2,310.98,311.76,312.84,311.5,311.57,312.43,311.81,313.37,315.3,316.24,314.72,315.77,316.54,316.36,314.78,313.71,320.52,322.2,324.83,324.57,326.89,333.05,332.26,334.97,336.19,338.92,331.3,329.54,323.55,317.75,328.19,332.03,334.41,333.79,326.88,330.01,335.56,334.87,334.01,336.99,342.22,345.45,348.33,344.81,347.06,349.32,350.02,353.16,348.47,340.94,329.32,333.22,333.47,338.6,343.52,339.72,342.46,349.69,350.12,345.61,346,342.8,337.15,342.33,343.86,335.95,320.95,325.46,321.59,329.99,331.84,329.88,335.5,341.89,340.82,341.33,339.06,338.94,335.1,331.83,329.59,328.76,328.8,325.86,321.72,323.28,326.9,323.3,318.47,322.74,328.59,333.01,341.07,343.32,340.8,340.54,337.23,340.52,336.78,338.64,339.98,337.23,337.15,338.06,339.86,337.7,337.06,331.15,324.15,326.91,330.54,331.18,326.02,325.22,323.07,327.54,325.81,328.15,338.28,336.03,336.6,334.01,328.76,322.93,323.12,322.39,316.96,317.64,323.32,317.78,316.24,311.47,306.67,316.37,313.76,322.14,317.39,322.93,326.06,324.87,326.46,333.84,339.84,342.11,347.4,349.84,344.28,344.04,348.19,347.95,354.9,363.54,366.51,376.28,376.66,382.51,387.56,392.34,381.81,381.07,379.76,385.86,378.24,381.8,367.01,363.37,343.52,363.74,353.71,363.44,366.64,372.89,370.04,370,356,346.26,346.66,363.35,365.85,363.46,373.05,379.27,379.29,374.27,370.57,363.78,369.32,373.39,373.6,367.12,369.51,374.06,378.61,382.17,389.51,400.33,402.1,400.83,390.79,393.2,392.1,388.3,386.11,379.85,370.85,364.32,362.28,367.87,367.01,359.65,378.14,389.3,391.15,397.22,410.42,408.46,410.65,387.68,384.46,382.09,394.63,386.85,389.6,393.58,393.84,393.67,385.63,386.5,392.01,389.25,388.76,395.08,384.43,374.65,374.06,368.85,378.16,374.21,367.05,364.65,358.88,366.18,356.92,353.59,365.8,362.96,371.71,377.28,379,382.22,380.22,378.41,379.94,382.82,381.09,378.14,369.75,368.54,370.56,371.72,385.08,385.57,387.61,392.26,395.37,391.59,394,393.88,399.94,402.09,406.56,410.81,410.15,411.62,410.95,409.82,408.29,413.04,417.33,416.01,408.76,415.68,408.87,434.4,432.43,435,440.58,443.95,443.67,442.63,447.06,451.24,455.96,463.6,479.63,479.88,488.81,495.48,484.01,488.43,488.34,500.72,498.96,502.22,508.07,511.33,520.71,527.55,529.53,530.22,518.53,515.71,516.12,527.11,530.21,536.85,552.51,573.4,569.49,569.5,584.6,589.33,585.96,582.89,579.69,590.32,597.61,600.67,593.12,583.09,601.65,612.05,607.17,616.29,618.77,611.19,609.01,605.68,588.62,564.21,592.97,591.64,571.32,557.25,556.01,544.9,593.26,591.02,586.45,567.95,566.15,569.9,565.85,549.74,553.85,552.59,553.56,554.86,551.16,542.9,537.99,531.09,515.57,515.82,545.87,541.68,554.9,549.8,546.86,556.56,563.27,561.87,545.59,548.8,547.38,555.78,556.03,564.39,555.49,560.35,556.46,555.84,558.37,569.7,571.29,569.66,561.81,566.12,555.1,556.33,558.73,553.43,567.97,576.26,582.96,593.2,589.25,597.04,591.52,587.84,582.46,588.37,590.25,590.28,589.62,597.46,587.71,587.26,584.43,559.19,559.1,569.1};
        Emd emd = new Emd();
        EmdData emdData = new EmdData();
        int order = 4;
        emd.emdCreate(emdData, data.length, order, 20, 0);
        emd.emdDecompose(emdData, data);

        for (int i=0;i<data.length;i++) {
            System.out.print(data[i]+";");
            for (int j=0;j<order; j++) System.out.print(emdData.imfs[j][i] + ";");
            System.out.println();
        }
    }

    private static class EmdData {
        protected int iterations, order, locality;
        protected int[] minPoints, maxPoints;
        protected double[] min, max, residue;
        protected double[][] imfs;
        protected int size, minSize, maxSize;
    }
} 
```

# sublimetext - 标记当前行，并浏览标记的行

> ID：10230107
> 
> 赞同：101
> 
> 时间：2012-04-19T14:18:43.090
> 
> 标签：sublimetext, sublimetext2

在 Visual Studio 中，我们可以使用：
`CTRL+kk`在当前行上放置一个标记并在标记的行
中
`CTRL+kn`导航。

我的问题是：有没有办法用 Sublime Text2 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-04-19T17:58:28.763

是的！转到菜单上，`Preferences>Key Bindings - Default`这是一个包含所有默认键绑定的文件。阅读全文！（很多好东西）这是书签信息（linux）的剪切和粘贴，应该是不言自明的。

```
{ "keys": ["f2"], "command": "next_bookmark" },
{ "keys": ["shift+f2"], "command": "prev_bookmark" },
{ "keys": ["ctrl+f2"], "command": "toggle_bookmark" },
{ "keys": ["ctrl+shift+f2"], "command": "clear_bookmarks" },
{ "keys": ["alt+f2"], "command": "select_all_bookmarks" }, 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-08-16T03:05:56.720

事实上，你可以。这是来自 Mac 的菜单屏幕截图。我希望这有帮助。

![崇高的文本2](../Images/042516f482732ec426268e0ba4d6ac43.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-02-27T11:31:58.603

书签系统还不错，但我建议你试试插件“SublimeBookmarks”，它扩展了内置机制的功能。

在这里查看： [https ://github.com/bollu/sublimeBookmark](https://github.com/bollu/sublimeBookmark)

预览：http: [//i.imgur.com/gtjChPG.gif](https://i.imgur.com/gtjChPG.gif) ![在此处输入图像描述](../Images/5b2c803c3ab1594a25642b11c67184b0.png)

# php - 爆炸不能正常工作

> ID：10230110
> 
> 赞同：0
> 
> 时间：2012-04-19T14:18:46.660
> 
> 标签：php, string, explode

我有一个 csv 文件，我需要从中删除部分，它有 7017 行长，所以我使用 php 删除某些部分并将其重新组合在一起，相关代码如下。

```
$rows;
$count = 0;
while (($row = fgetcsv($files, 56000)) !== false) {
  $rows[$count] = $row;
  if (stristr($rows[$count][8], "Features:")) {
    $rows[$count][8] = str_replace("Features:", "features", $rows[$count][8]);
    $rows[$count][8] = str_replace(":", "", $rows[$count][8]);
    $rows[$count][8] = explode("features", $rows[$count][8]);
    if (isset($rows[$count][8][1])) {
      $rows[$count][8][1] = str_replace("Compatible", "compatible", $rows[$count][8][1]);
      $rows[$count][8][1] = explode("compatible", $rows[$count][8][1]);
      //$rows[$count][8][1] = explode("Compatible", $rows[$count][8][1]); produces error if  used
      $rows[$count][8][1] = explode("-", $rows[$count][8][1][0]);
    } else if (isset($rows[$count][8][0])) {
      $rows[$count][8][0] = str_replace("Compatible", "compatible", $rows[$count][8][0]);
      $rows[$count][8][0] = explode("compatible", $rows[$count][8][0]);
      //$rows[$count][8][0] = explode("Compatible", $rows[$count][8][0]); produces error if  used
      $rows[$count][8][0] = explode("-", $rows[$count][8][0][0]);
    } else {
      $rows[$count][8] = str_replace("Compatible", "compatible", $rows[$count][8]);
      $rows[$count][8] = explode("compatible", $rows[$count][8]);
      //$rows[$count][8] = explode("Compatible", $rows[$count][8]); produces error if  used
      $rows[$count][8] = explode("-", $rows[$count][8][0]);
    }
    $countif = 1;
    while (isset($rows[$count][8][1][0][$countif])) {
      $countif++;
    }
    $max = $countif - 2;
    $countif = 9;
    $counter = 1;
    while ($max <= 5 && $max >= 1 && $countif <= 13) {
      $rows[$count][$countif] = $rows[$count][8][1][0][$counter];
      $countif++;
      $counter++;
    }
    $rows[$count][8][0] = explode("Compatible", $rows[$count][8][0]);
    //$rows[$count][8] = $rows[$count][8][0][0];

  }
  $count++;
}

print_r($rows[14][8]); 
```

问题是即使 'Compatible' 在explode 语句中引用的字符串中，它仍然是一个字符串，可以说是未分解的。输出如下。

> 100% 全新 采用优质材料制成，确保质量好 防止划痕 屏幕上出现油脂和指纹 您现在可以使用手写笔轻松使用手机或文本人 设计用于您的触摸屏手机**兼容**：诺基亚： 5530 Xpress 音乐包装内容：1 x 用于诺基亚 5530 Xpress 音乐的触控笔 - 白色

任何帮助是极大的赞赏。

**编辑**：`var_dump($rows[14]);`

```
0 => string '41807' (length=5)
  1 => string '' (length=0)
  2 => string 'http://images.esellerpro.com/2477/I/418/07/07_!B-dzTQ!BWk~$(KGrHqQOKnMEy1t9tWyLBM8tHiFEnQ~~0_1.JPG' (length=98)
  3 => string '' (length=0)
  4 => string '' (length=0)
  5 => string '' (length=0)
  6 => string '5055496500300    ' (length=17)
  7 => string 'STYLUS-5530-WHITE - STOCK CONTROL' (length=33)
  8 => string ' 100% Brand New Made from high quality material to ensure good quality Prevent Scratches bumps grease and finger prints on the screen You can now easily use the mobile or text people with the stylus Designed to be used with&nbsp;your touch screen mobile&nbsp;Compatible with:&nbsp;Nokia : 5530 Xpress MusicPackage Contents: 1&nbsp;x Stylus for Nokia 5530 Xpress Music -&nbsp;White&nbsp;' (length=386)
  9 => string '' (length=0)
  10 => string '' (length=0)
  11 => string '' (length=0)
  12 => string '' (length=0)
  13 => string '' (length=0)
  14 => string '-1' (length=2)
  15 => string '' (length=0)
  16 => string '' (length=0)
  17 => string 'Frooition' (length=9)
  18 => string '' (length=0) 
```

**EDIT2：**原始行：

```
3PREPAY-ZTEMF627W1GB        http://images.esellerpro.com/2477/I/217/94/03_!B8Zel8w!2k~$(KGrHqJ!hYEyrrVkKNYBM28dwn4o!~~0_1.JPG               5.0555E+12  ZTE MF627 THREE PAY BROADBAND USB MODEM WITH 1GB READY  New ZTE MF627 on Three Pay Broadband with 1GB allowance IncludedGet broadband speeds with no wires or hassles. Just plug this lightweight USB Modem into your laptop and watch as everything auto-installs whether you’re on Windows or Mac. Easy. The user friendly dashboard is also a breeze (so you don’t need any technical knowledge) and it lets you send and receive text messages while you’re online.The MF627 gives you download speeds of up to 3.6 Mbps. Plus you can use your new best friend as a memory stick just add a MicroSD card to the slot and load up to 4GB. And don’t ever worry about losing the lid because it’s connected with a handy strap! Compatible with: Most Desktops and Laptops (Also supports Windows 7 and Mac OS X 10.6)Packing Contents:1 X Brand New ZTE MF627 USB Model on Three Pay as you go Broadband  - 1GB Allowance Included Maximum 1 per customer please.                       -1          Frooition 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:48:01.127

这是你的问题..

这是你的第二次爆炸...

```
$rows[$count][8][0] = explode("Compatible", $rows[$count][8][0]); 
```

如果该行不包含 Features 则 $count[8] 不会分解并转换为数组。在你的 var_dump $rows[$count][8] 只是一个字符串， $rows[$count][8][0] 不存在。换行来做到这一点..

```
$rows[$count][8] = explode("Compatible", $rows[$count][8]); 
```

但是您可能需要考虑将其放在 else 语句中而不是更改它。因为如果字符串包含 Features 并且已爆炸，您现在将拥有的内容将起作用。所以我建议的行应该放在 Else 语句中，以防 Features 不是字符串的一部分，并且 $rows[$count][8] 永远不会爆炸。

```
$rows;
$count = 0;
while (($row = fgetcsv($files, 56000)) !== false) {
  $rows[$count] = $row;
  if (stristr($rows[$count][8], "Features:")) {
    $rows[$count][8] = str_replace("Features:", "features", $rows[$count][8]);
    $rows[$count][8] = str_replace(":", "", $rows[$count][8]);
    $rows[$count][8] = explode("features", $rows[$count][8]);
    if (isset($rows[$count][8][1])) {
      $rows[$count][8][1] = str_replace("Compatible", "compatible", $rows[$count][8][1]);
      $rows[$count][8][1] = explode("compatible", $rows[$count][8][1]);
      //$rows[$count][8][1] = explode("Compatible", $rows[$count][8][1]); produces error if  used
      $rows[$count][8][1][0] = explode("-", $rows[$count][8][1][0]);
    } else if (isset($rows[$count][8][0])) {
      $rows[$count][8][0] = str_replace("Compatible", "compatible", $rows[$count][8][0]);
      $rows[$count][8][0] = explode("compatible", $rows[$count][8][0]);
      //$rows[$count][8][0] = explode("Compatible", $rows[$count][8][0]); produces error if  used
      $rows[$count][8][0][0] = explode("-", $rows[$count][8][0][0]);
    } else {
      $rows[$count][8] = str_replace("Compatible", "compatible", $rows[$count][8]);
      $rows[$count][8] = explode("compatible", $rows[$count][8]);
      //$rows[$count][8] = explode("Compatible", $rows[$count][8]); produces error if  used
      $rows[$count][8] = explode("-", $rows[$count][8][0]);
    }
    $countif = 1;
    while (isset($rows[$count][8][1][0][$countif])) {
      $countif++;
    }
    $max = $countif - 2;
    $countif = 9;
    $counter = 1;
    while ($max <= 5 && $max >= 1 && $countif <= 13) {
      $rows[$count][$countif] = $rows[$count][8][1][0][$counter];
      $countif++;
      $counter++;
    }
    $rows[$count][8][0] = explode("Compatible", $rows[$count][8][0]);
    //$rows[$count][8] = $rows[$count][8][0][0];

  }
  else // THE STRING DOESN'T CONTAIN "Features"
  {
        $rows[$count][8] = explode("Compatible", $rows[$count][8]);
  }
  $count++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:32:40.300

如果您的数据看起来像我想的那样，则不要检查字符串中是否存在“兼容”。关于什么：

```
if (stristr($rows[$count][8], "Features:")) {
  $rows[$count][8] = str_replace("Features:", "features", $rows[$count][8]);
  $rows[$count][8] = str_replace(":", "", $rows[$count][8]);
  $rows[$count][8] = explode("features", $rows[$count][8]);
} elseif (stristr($rows[$count][8], "Compatible:")) {
  $rows[$count][8][1] = str_replace("Compatible", "compatible", $rows[$count][8][1]);
  $rows[$count][8][1] = explode("compatible", $rows[$count][8][1]);
  $rows[$count][8][1][0] = explode("-", $rows[$count][8][1][0]);
... 
```

# .net - 从远程目录 FTP SSH 获取文件名列表

> ID：10230111
> 
> 赞同：0
> 
> 时间：2012-04-19T14:18:51.087
> 
> 标签：.net, vb.net, ssh, sharpssh

我需要使用 VB 通过 SFTP 获取所有文件名的列表。我正在尝试将它放在 ArrayList 中，但不确定要使用的命令..

```
Public Shared Function Retrieve_Directory_list(ByVal strHost As String, _
                                ByVal strUsername As String, _
                                ByVal strPassword As String, _
                                ByVal strFtpFilePath As String, _
                                ByVal strlocalFilePath As String) As ArrayList)

    Dim sshCp As SshTransferProtocolBase
    Dim res As New ArrayList()

    sshCp = New Sftp(strHost, strUsername, strPassword)

    sshCp.Connect()

'res = sshCp.???

    sshCp.Close()

Return res

End Function 
```

如果你还需要什么，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:26:28.587

我想你想要这样的东西：

```
sshCp.Connect()

Dim result as ArrayList() = sshCp.GetFileList("/foldername")

sshCp.Close()

Return res 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:18:57.397

您可能需要查看 Tamir.SharpSsh.Sftp.GetFileList(String path) ，它返回代表远程文件的 IEnumerable 对象。它应该能够做你正在寻找的东西。

[https://bitbucket.org/mattgwagner/sharpssh/src/260e9d6d1bcf/SharpSSH/Sftp.cs](https://bitbucket.org/mattgwagner/sharpssh/src/260e9d6d1bcf/SharpSSH/Sftp.cs)

# c# - ReSharper 减慢 VS 2010

> ID：10230115
> 
> 赞同：4
> 
> 时间：2012-04-19T14:18:57.007
> 
> 标签：c#, visual-studio-2010, resharper

我喜欢 ReSharper 功能，但是当我将它安装到我的笔记本电脑上的项目中时，VS2010 运行速度慢了很多（读取不可用）：统计数据是

```
Windows 7的
4GB 内存
英特尔 2 核双核 @ 2.00GHz
对比 2010
ReSharper 6.1
32 位架构

```

我假设这应该足以运行程序所以我能想到的可能原因是

*   其他导致冲突/重载 VS 的插件
*   太多 ReSharper 错误（它是旧代码，因此需要清理）

还有其他人对这可能是什么有建议吗？

编辑：解决方案是 15 个独立的项目，包含 20-30 个 cs 文件。有些非常大（antlr 生成）

编辑：关闭“解决方案范围分析功能”后，内存使用量降至 500Mb 并且运行良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:35:41.883

我有时需要打开旧项目，其中有许多带有更清晰错误的大文件。

我的解决方案是从 resharper 分析中排除这些文件（代码检查设置下的“编辑要跳过的项目”）。

我失去了一些智能，但 VS 又可以使用了。如果我需要在其中一个大文件中做很多工作，我会一一启用它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T14:22:07.363

ReSharper 倾向于增加 Visual Studio 的内存使用量（检查任务管理器中进程选项卡下的 devenv.exe）。如果您有一个包含许多项目的解决方案，并且在您的 PC 上运行许多其他东西，您可能会发现内存被大量交换到磁盘。

可能的解决方案：

*   获得更多内存
*   一次运行更少的程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T08:26:49.223

对我来说，我在 Visual Studio 2013 中使用了 30 多个项目的 Resharper，除了 Ultimate Guide 之外，甚至禁用解决方案范围的分析总体上还不够好。我有 16GB RAM - 所以内存可能不是问题。

Resharper 并没有随着项目数量的增加而很好地扩展。

我是如何解决这些问题的（除了终极指南（建议很好））

1.  卸载任何不直接相关的项目
2.  按照 Adrianm 的建议编辑要跳过的项目
3.  转到 Resharper 菜单 => 选项 => CodeInspection => 检查严重性。转到您的编程语言（对我来说是 C#）。在这些选项中，您将看到针对不同问题的许多检查严重性（数百个）。其中大多数我不在乎，其中一些我经常使用。对于许多我不关心的严重性，我将严重性设置为“不显示”。
4.  由于 Resharper 在一段时间后也降低了性能，而且我的解决方案中确实有一些我喜欢的 suo 设置（卸载了一些不太频繁的项目，启用了调试异常等），所以我对它们进行了备份。首先删除解决方案文件夹中的 suo 文件（用户设置）。之后在 Visual Studio 中设置所需的设置，然后单击全部保存。之后，对该 suo 文件进行备份。每次 resharper 变慢时，如果挂起/恢复没有帮助，我关闭解决方案，删除当前的 suo 文件，从备份中恢复 suo 文件，然后重新启动解决方案。

现在，所有这些步骤都为我的 Visual Studio 提供了非常愉快的 Resharper 性能。它有助于尽早投资。特别是对于第 3 项，当您考虑它时，您实际上正在并行运行许多您不关心的检查。

我知道这是一个较旧的线程 - 但我在这里写的部分有点独立于 Visual Studio 和 Resharper 版本，我无法在网络上的其他任何地方找到它。

希望它对任何看到 Resharper 类似性能问题的人有所帮助。

编辑 1：顺便说一句 - 一旦你有这个工作，它有助于获取 resharper 设置的备份，以防它们丢失。如果您在多个开发人员之间共享项目，那么将它放到 git/SVN 上可能也是一个好主意。

# android - 为什么在我为 imageview 设置ImageBitmap 后焦点发生了变化

> ID：10230116
> 
> 赞同：1
> 
> 时间：2012-04-19T14:19:02.870
> 
> 标签：android, imageview, fragment, lost-focus

问题：我为ImageView设置ImageBitmap后，焦点重置到左上角的小部件，为什么？

说明：我使用 FragmentActivity+Fragment 作为选项卡。在几个片段之一中，我使用 Gallery + ImageView 进行图像浏览。选择缩略图时，原始图像显示在 ImageView 中，如果我触摸缩略图，它可以正常工作，但是如果我通过键盘切换焦点，它不会，当我通过键盘将焦点切换到下一个缩略图时，原始图像闪烁，然后焦点重置到左上角的小部件，导致选项卡切换，另一个片段替换图像浏览片段。

如果我只是在图库中切换焦点而不更改原始图像，则不会完成重置。

```
// These two listener works for gesture and keyboard operation seperately
gallery.setOnItemClickListener(new GalleryItemClickListener());
gallery.setOnItemSelectedListener(new GalleryItemFocusListener());

// and then find out original image and show
currentBitmap = BitmapUtils.queryImageByThumbnailId(Home.this,
                        application.getThumbnailList().get(index));
currentImage.setImageBitmap(currentBitmap); 
```

# javascript - 私有函数的 setInterval

> ID：10230123
> 
> 赞同：0
> 
> 时间：2012-04-19T14:19:22.163
> 
> 标签：javascript

我想做一个与 setinterval 声明处于同一级别但不是全局的函数的 setInterval

**例子：**

```
function a()
{
    function b(){alert("hi");}
    setInterval("b()",1000);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T14:21:01.333

在您的示例中，只需使用`setInterval(b, 1000)`而不是`setInterval("b()", 1000)`.

我想说的是，您应该*始终*使用`setInterval`and`setTimeout`使用真正的函数而不是字符串。

# php - 在 CakePHP 中使用 saveAssociated 方法

> ID：10230126
> 
> 赞同：2
> 
> 时间：2012-04-19T14:19:28.737
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-model

我正在尝试使用`saveAssociated`方法，`CakePHP`但没有取得很大成功，该方法似乎部分有效，事实上我在保存过程中有三个模型： `Character`，哪个`$hasMany`> `Property`，`Label`所以这是`Character`模型：

```
class Character extends AppModel {
    public $name = 'Character';
    public $belongsTo = 'User';
    public $hasMany = array (
        'Property' => array (
            'dependent' => true
        )
    );
    public $hasOne = array (
        'Label' => array (
            'dependent' => true
        )
    );
    public $validate = array (
        'name' => array (
            'required' => true,
            'rule' => array('between', 0, 100),
            'message' => 'This is the error message for "name" field'
        ),
        'description' => array (
            'allowEmpty' => true,
            'rule' => array('between', 0, 100),
            'message' => 'This is the error message for "description" field'
        )
    );
} 
```

这是我从表格中获得的数据：

```
array(
    'Character' => array(
        'name' => 'Character name',
        'description' => 'Character description',
        'image' => 'http://url.com/image.jpg'
    ),
    'Label' => array(
        'name' => 'Basic attributes',
        'value' => 'Value'
    ),
    'Property' => array(
        (int) 0 => array(
            'name' => 'Strenght',
            'value' => '15'
        )
    )
) 
```

然后在我`CharactersController`对数据执行此操作`saveAssociated`：

```
class CharactersController extends AppController {

    public $uses = array ('Character', 'Property', 'Label');

    public function add () {
        if (!empty($this->request->data)) {
            $this->Character->saveAssociated($this->request->data);
        }
        debug ($this->request->data);
    }

} 
```

`Character`数据保存成功但没有`Label`，我`Property`错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:14:21.590

在另外两个 Model 中声明了 Model Association 的另一端了吗？好好看看[这个页面](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)。如果您使用`$hasAndBelongsToMany`关联，可能会使生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:24:01.657

尝试使用 saveAll 方法而不是 saveAssociated。

# android - Android (ICS) NFC 请求和响应可能

> ID：10230134
> 
> 赞同：0
> 
> 时间：2012-04-19T14:20:01.717
> 
> 标签：android, request, response, nfc

我开始研究 android (ics) nfc 应用程序。现在我有一个使用 nfc 智能手机和另一个应该相互通信的 nfc 设备的场景。

不是真正的问题，但我需要一种请求/响应场景。就像将 nfc 智能手机放在 nfc 设备前面并通过 nfc 向它发送密钥一样。设备获取密钥并开始与后端系统通信，然后将响应发送回 nfc 智能手机。智能手机得到响应，处理它，智能手机不能从设备上移除，我们就完成了。

但我真的需要回应。我没有通过 android ics (beam) 提供的 nfc 可能性来完成这项工作。

所以我的问题。这有可能吗？如果是的话可以以某种方式解释如何？喜欢使用外部库或创建自己的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:49:30.837

我想你可能需要 NFC 来启用手机的 Wifi-direct，然后进行双向数据传输。

或者您可能需要再次将手机靠近设备，然后再次进行光束操作。

# sql - SQLite 语法错误

> ID：10230142
> 
> 赞同：1
> 
> 时间：2012-04-19T14:20:23.957
> 
> 标签：sql, sqlite

嗨，我的数据库中的一个表有问题。我正在从 .txt 文件加载表，当我加载数据库时，我得到

```
ERROR NEAR line 49: near "(": syntax error 
```

下表从第 49 行开始

```
create table LEASE(
P_ID integer,
I_ID varchar2,
C_ID integer,
DATE date,
TRENT decimal(6,2),
RENTPM decimal(4,2),
RENTUTD varchar2 constraint rentutd_value (RENTUTD in ('Y','N')),
LENGTH varchar2(15),
SDATE date,
EDATE date,
NOTE varchar2(150),
G_ID integer,
A_ID integer,
constraint fkey_lea1 foreign key (P_ID) references PROPERTY(P_ID),
constraint fkey_lea2 foreign key (I_ID) references INSTITUTION(I_ID),
constraint fkey_lea3 foreign key (C_ID) references CLIENT(C_ID),
constraint fkey_lea4 foreign key (G_ID) references GUARANTOR(G_ID),
constraint fkey_lea5 foreign key (A_ID) references AGENT(A_ID),
constraint pkey_lea primary key (P_ID,I_ID,C_ID,DATE)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:33:24.350

看起来您的`rentutd` 列上的语法需要有点不同：

```
RENTUTD varchar2 constraint rentutd_value CHECK ( RENTUTD in ('Y','N')) 
```

看到这个[sqlfiddle](http://sqlfiddle.com/#!5/f516b)。

[SQLite 语法图](http://www.sqlite.org/syntaxdiagrams.html#column-constraint)非常适合解决这些问题。

# facebook - “页面选项卡”和“Facebook 上的应用程序”之间的区别

> ID：10230147
> 
> 赞同：3
> 
> 时间：2012-04-19T14:20:31.537
> 
> 标签：facebook

我想知道注册“应用程序”时必须选择的这两个类别之间有什么区别（该术语也适用于“页面选项卡”）。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:39:31.200

呃，一个是作为标签安装在 Facebook 页面上的应用程序，另一个是在 apps.facebook.com/appname 访问的画布应用程序 - 文档非常清楚地涵盖了这两种类型的应用程序：

画布应用：[https ://developers.facebook.com/docs/guides/canvas/](https://developers.facebook.com/docs/guides/canvas/)

页面标签应用程序：[https ://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

# mercurial - Mercurial：如何在不更新的情况下在分支之间进行更改？

> ID：10230153
> 
> 赞同：1
> 
> 时间：2012-04-19T14:20:44.490
> 
> 标签：mercurial, repository

我创建了一个分支，比如说**new_branch**。

我想在**不**更新的情况下更改为**默认**分支。也就是说，将更改保留在我的工作副本中（在**new_branch**中），即使**default**中有公共文件。

 ********不**这样做：

```
hg update default  <-- don't want to update! Just to change the branch 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:27:55.007

**当心。这回答了你的问题*，*但我不相信这是你*想要*的。**

`debugsetparents`会做的。但如前所述，*要小心*。

> ~$ hg help debugsetparents hg debugsetparents REV1 [REV2]
> 
> 手动设置当前工作目录的父级
> 
> > 这对于编写存储库转换工具很有用，但应谨慎使用。
> > 
> > 成功返回 0。
> 
> 选项：
> 
> > --mq 对补丁存储库进行操作
> 
> 使用“hg -v help debugsetparents”显示全局选项

您想将父级设置为`default`分支中的最后一个修订。

您还需要使用`hg debugrebuildstate`来修复内部状态（最明显的是，它的概念是您在哪个分支上）。

```
hg debugsetparents default
hg debugrebuildstate 
```******

# string - 使用空格分隔符解析文件

> ID：10230154
> 
> 赞同：0
> 
> 时间：2012-04-19T14:20:50.900
> 
> 标签：string, visual-studio-2010, perl, parsing

我有一个需要解析的包含中文内容的文件。每个帖子在字段之间都有一些奇怪的分隔符，我试图隔离字段但无法识别分隔符。

```
Dim stringSplitter() as string = {" "}
Try
  sampleResults = entry.Split(stringSplitter,StringSplitOptions.RemoveEmptyEntries)

..... 
```

帖子内容样本；

```
108087006686338t.qq.com/GAOCHUANG8899homeGAOCHUANG8899homehttp://t.qq.com/p/t/1080870066863382012-03-22 04:49:46 
```

分隔符在第一组数字 108087006686338 DELIMITTER t.qq.com/GAOCHUANG8899home 之后开始。我最初以为我可以使用 json 拆分它，但这绝对不是 json 格式。

抱歉，当我发布原件时，在发布此帖子时分隔符会消失。分隔符看起来像一个矩形块

编辑：

好的，使用十六进制编辑器我将字符十六进制值标识为 01，它看起来像一个句点，但句点的值为 2E。这对任何人都意味着什么？

编辑：

重现问题：我可以根据十六进制值拆分字符串吗？如果值为“01”，那么我将如何根据该值拆分字符串。

编辑：

最终答案：`

```
Dim hvalue as Char = Char(1)
Dim stringSplitter() as string = {hvalue} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:35:45.253

假设您有输入`$input`和分隔符，ASCII 码为`01`.

**珀尔：**

```
my $input = ...
my @output = split(chr(01), $input);
print "$_\t" for @output; # print all items 
```

上面的代码会将您拆分`$input`为`@output`数组，因此您可以通过以下方式访问项目

```
$output[0] # first item
$output[1] # second item
...
$#output + 1 # number of items 
```

**视觉工作室 2010**：

```
Dim hvalue as Char = Char(1)
Dim stringSplitter() as string = {hvalue} 
```

# gwt - GWT 列表框下拉菜单不起作用

> ID：10230158
> 
> 赞同：0
> 
> 时间：2012-04-19T14:21:01.483
> 
> 标签：gwt, listbox, drop-down-menu

我无法让下拉功能在 Chrome 和 IE 中适用于 ListBox。当我单击列表框时，没有任何反应。如果我将可见项目的数量设置为 2 或更多，则项目会显示，但不可选择。在 Firefox 中一切正常。有解决方法或替代方法吗？

我正在使用 UIBinder 创建列表框

```
<g:ListBox ui:field="areaList" />

@UiField
ListBox areaList;

areaList.addItem("Area1");
areaList.addItem("Area2"); 
```

html是：

```
     <select class="gwt-ListBox">
      <option value="Area1">Area1</option>
      <option value="Area2">Area2</option>
     </选择>

```

问题似乎是 onmousedown 事件触发了 chrome 和 IE 的下拉显示。

```
    <body onmousedown="return false;" >

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:36:48.760

GWT ListBox 只是一个 HTML `select`，它是非常基本的功能，应该可以在所有浏览器上正常工作。这表明问题不在于 ListBox，而在于其他问题。但是由于您的问题不包含任何进一步的细节，因此无法判断出什么问题。因此，您能否添加用于创建和填充 ListBox 的代码，并判断 ListBox 选择是否在它不起作用的浏览器中包含任何值。

# c++ - 如何使用线程将内容从一个文件复制到多个文件

> ID：10230162
> 
> 赞同：1
> 
> 时间：2012-04-19T14:21:05.710
> 
> 标签：c++, boost

我有一个大文件。这是一个文本文件，所以我一次读一行。

```
std::ifstream inFile(  "big_file.txt" );
std::string line;
while( getline( inFile, line ) )
{

} 
```

我想将从“big_file.txt”读取的行分发到多个文件。文件数取决于机器上可用的内核数。

***编辑：***目标文件可能在不同的物理设备上，或者内容可能发送到不同的机器

我（不成功）到目前为止的尝试如下

```
// list of writer objects each running in its own thread
std::vector<FileWriter> writers;    
// create as many threads as there are cores
unsigned long const cores = boost::thread::hardware_concurrency();
for( unsigned long i = 0; i < cores; ++i)
{
    std::ostringstream ss; 
    ss << i; 
    FileWriter rt(ss.str());
    writers.push_back(rt);
} 
```

然后正如我所说`getline(inFile, line),`，我希望能够以循环方式将线路发送到线程。它真的不必是循环的。在线程之间分配工作的最佳方法是什么都可以。
我已经没有想法了。

请建议 boost 和 pre c++11 STL，因为我还没有完整的 c++11 环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:23:50.333

除非每个新文件都在单独的物理设备上，否则仅通过使用多个线程来写入单个文件不太可能提高性能。这种类型的进程通常会受 I/O 限制而不是 CPU 限制。

要确保的一件重要事情是使用缓冲的 I/O（自从您展示 以来似乎就是这种情况`ifstream`）。如果没有缓冲 I/O，将单个行写入不同文件的延迟将是一个巨大的瓶颈。

**编辑**鉴于可以将各个行写入单独的设备，那么它*可能会*通过使用多个线程来提高性能。如果有很长的延迟（例如，如果通过某种机制发送到另一台机器，则在网络发送调用上），那么其他线程仍可能正在写入其他位置，所以这肯定会有所帮助。

我可能不完全理解这个问题，但似乎使用[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)才有意义。一种可能性是使用[threadpool](http://threadpool.sourceforge.net/)。我没用过，不过好像口碑不错。

# c - C - 将结构指针传递给函数时遇到问题

> ID：10230167
> 
> 赞同：0
> 
> 时间：2012-04-19T14:21:25.640
> 
> 标签：c, struct, function-pointers

当我编译这个时，我得到很多错误，说我的每个部分`struct`都是无效的，大致如下：

`sort.c:16: request for member 'last' in something not a structure or union`

对于我使用 strcpy 的情况，错误显示为：

`sort.c:18: warning: passing arg 2 of 'strcpy' from incompatible pointer type`

所以我一定是在滥用指针……但我不知道为什么。

我有`struct`定义`DBrecord.h`：

```
typedef struct{
    int DBrecordID;         //ID for each entry, range 0-319
    char *last;             //student last name
    char *first;            //student first name
    char studentID[8];      //student ID
    int age;                //student age
    class year;             //year in school
    float gpa;              //GPA
    int expGradYear;        //expected graduation year
}DBrecord;

#include <stdio.h>
#include <string.h>
#include "DBrecord.h"

void bubbleSort(DBrecord **record, int numEntries, int sortChoice) {
int i, j;
char temp[100];

for(i=0; i<numEntries; i++)
    for(j = 0; j < numEntries-1; j++)
        switch(sortChoice){
            //sort by last name
            case  1 : if(strcmp(record->last[j], record->last[j+1]) > 0){
                    //swap the two elements
                    strcpy(temp, record[j]);
                    strcpy(record[j], record[j+1]);
                    strcpy(record[j+1], temp);
                  }
            //sort by first name
            case  2 : if(strcmp(record->first[j], record->first[j+1]) > 0){
                    //swap the two elements
                    strcpy(temp, record[j]);
                    strcpy(record[j], record[j+1]);
                    strcpy(record[j+1], temp);
                  }
            //sort by student ID
            case  3 : if(atoi(record->studentID[j]) > atoi(record->studentID[j+1])){
                    //swap the two elements
                    temp = record[j];
                    record[j] = record[j+1];
                    record[j+1] = temp;
                  }
            //sort by age
            case  4 : if(atoi(record->age[j]) > atoi(record->age[j+1])){
                    //swap the two elements
                    temp = record[j];
                    record[j] = record[j+1];
                    record[j+1] = temp;
                  }
            //sort by class
            case  5 : if(record->class[j] > record->class[j+1]){
                    //swap the two elements
                    temp = record[j];
                    record[j] = record[j+1];
                    record[j+1] = temp;
                  }
            //sort by gpa
            case  6 : if(atoi(record->gpa[j]) > atoi(record->gpa[j+1])){
                    //swap the two elements
                    temp = record[j];
                    record[j] = record[j+1];
                    record[j+1] = temp;
                  }
            //sort by expected graduation year
            case  7 : if(atoi(record->expGradYear[j]) > atoi(record->expGradYear[j+1])){
                    //swap the two elements
                    temp = record[j];
                    record[j] = record[j+1];
                    record[j+1] = temp;
                  }
            default : break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:23:27.743

因为`record`is 指向指向 a 的指针`DBrecord`，`record->last[j]`所以没有任何意义。（指向指针的指针）处的对象`record`没有名为`last`;的字段。它根本没有字段，它只是一个指针。

您可能的意思是`record[j]->last`，获取`last`第 j:th DBrecord 的成员。等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:23:49.187

拿`record->last[j]`。这相当于`(*record).last[j]`。但`*record`不是一个`struct`。它是类型`DBrecord*`。换句话说，您需要取消引用您的指针两次，但您只取消引用了一次。

# alfresco - 带有日期和 Alfresco 4.0.d 的 Alfresco CMIS 查询的问题

> ID：10230168
> 
> 赞同：1
> 
> 时间：2012-04-19T14:21:33.417
> 
> 标签：alfresco, cmis

我没有收到执行以下 CMIS 查询的任何结果：

```
SELECT * FROM cmis:document WHERE cmis:creationDate > TIMESTAMP '2001-01-01T00:00:00.000Z' 
```

我正在使用 Alfresco-Explorer 的节点浏览器，我尝试过*cmis-alfresco*、*cmis-string*和*solr-cmis*。但没有成功。

编辑：

好的，这里是回应。

这似乎是一个错误，并在[此线程](https://forums.alfresco.com/en/viewtopic.php?f=45&t=43067)和[错误 ALF-12944](https://issues.alfresco.com/jira/browse/ALF-12944)中进行了评论。

我将尝试使用旧的 CMIS URL 来查看它是否有效。

问候

# google-tv - 通道块 API？

> ID：10230171
> 
> 赞同：0
> 
> 时间：2012-04-19T14:21:47.847
> 
> 标签：google-tv

是否有 API 支持可以阻止通道，如以下设置链接中所示：

> 设置 -> 隐私和安全 -> 安全 -> 设置 -> 家长锁 -> 频道阻止

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:57:54.257

目前没有，没有。[您可以在http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)请求该功能

# mysql - SSIS将英文BlobColumn转换为以汉字结尾的字符串

> ID：10230179
> 
> 赞同：1
> 
> 时间：2012-04-19T14:22:13.820
> 
> 标签：mysql, sql-server-2005, ssis

我正在将数据从 MS SQL 传输到 MYSQL。传输有效，但 BlobColumn 出现问题。我正在使用脚本组件实现传输，并对插入语句进行编码。我有几个 blob 列，它们是 MySQL 中的“文本”列。我是这样转换的：

```
Replace(System.Text.Encoding.Unicode.GetString(Row.link_desc.GetBlobData(0, Convert.ToInt32(Row.link_desc.Length))), "'","\'") 
```

它传输内容，但传输后它们是汉字。我认为这与编码有关，但不确定是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T21:04:10.670

在我看来，传入的数据可能是 ASCII，而您的编码是 Unicode。尝试：

```
Replace(System.Text.Encoding.ASCII.GetString(Row.link_desc.GetBlobData(0, Convert.ToInt32(Row.link_desc.Length))), "'","\'") 
```

# symfony1 - Symfony 不匹配/查找任何路由

> ID：10230180
> 
> 赞同：0
> 
> 时间：2012-04-19T14:22:19.063
> 
> 标签：symfony1, routing, symfony-1.4

在更新包含一些新路由的应用程序后，symfony 无法匹配任何路由：

```
symfony [err] {sfConfigurationException} Unable to find a matching route to generate url for params "array (  'action' => 'changeLanguage',  'module' => 'language',  'culture' => 'en_US',)" 
```

我需要做什么才能让 symfony 再次找到/匹配路线？

所以这是我的路由 Routing.yml

```
<?php $cultures = implode(I18NUtils::availableCultures(), '|') ?>

locality_list:
  url:  /:sf_culture/orte/:slug.:season.:id.:sf_format
  class: sfPropelRoute
  options: { model: Locality, type: object }
  param: { module: locality, action: list, sf_format: html }
  requirements:
    id: \d+
    sf_method: [get]

locality_info:
  url:  /:sf_culture/orte/:slug.:season.:id.details.:sf_format
  class: sfPropelRoute
  options: { model: Locality, type: object }
  param: { module: locality, action: show, sf_format: html }
  requirements:
    id: \d+
    sf_method: [get]

housings_by_category:
  url:  /:sf_culture/category/:slugs
  param: { module: housing, action: listByCategory, sf_format: html }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

housings_by_tag_locality:
  url:  /:sf_culture/tag/:tags/:locality_id
  param: { module: housing, action: listByTag, sf_format: html }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

housings_by_tag:
  url:  /:sf_culture/tag/:tags
  param: { module: housing, action: listByTag, sf_format: html }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

housings_by_locality:
  url:  /:sf_culture/:slug.:season.:id.list.:sf_format
  class: sfPropelRoute
  options: { model: Locality, type: object }
  param: { module: housing, action: list, sf_format: html }
  requirements:
    id: \d+
    sf_method: [get]

housing_info:
  url:  /:sf_culture/:slug.:season.:id.:sf_format
  class: sfPropelRoute
  options: { model: Housing, type: object }
  param: { module: housing, action: show, sf_format: html }
  requirements:
    id: \d+
    sf_method: [get]

housings:
  url: /:sf_culture/
  param: { module: housing, action: index }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

hut_details:
  url:  /:sf_culture/huetten/:slug.:season.:id.:sf_format
  class: sfPropelRoute
  options: { model: Housing, type: object }
  param: { module: housing, action: show, sf_format: html }
  requirements:
    id: \d+
    sf_method: [get]

huts:
  url: /:sf_culture/huetten
  param: { module: hut, action: index }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

legacy_redirect:
  url: /incoming/:action/*
  param: { module: legacysite, sf_format: html }

home:
  url:  /
  param: { module: home, action: index }

localized_home:
    url:    /:sf_culture/
    param:  { module: home, action: index  }
    requirements:
        sf_culture: (?:<?php echo $cultures ?>)

change_language:
    url:    /language
    param:  { module: language, action: changeLanguage }

# default rules
default_index:
  url:   /:sf_culture/:module
  param: { action: index }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>)

default:
  url:   /:sf_culture/:module/:action/*
  param: { sf_format: html }
  requirements:
    sf_culture: (?:<?php echo $cultures ?>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:07:12.703

您需要路线的`culture`参数：`change_language`

```
change_language:
    url:    /language/:culture
    param:  { module: language, action: changeLanguage } 
```

也许也符合您的要求。

# asp.net - 在 ASP.NET 中选择下拉列表时，如何在 gridview 上显示数据？

> ID：10230181
> 
> 赞同：-1
> 
> 时间：2012-04-19T14:22:19.937
> 
> 标签：asp.net

我有一个下拉列表和一个网格视图。当 Dropdownlist 被选中时，gridview 应该显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:23:50.403

```
protected void DropDownListChanged(object sender, EventArgs e)
{
    gridView.DataSource = GetDataSource();
    gridView.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:44:44.660

您需要编写一个事件**SelectedIndexChanged="ddlChanged"**并在其下编写您的逻辑。

```
protected void ddlChanged(object sender, EventArgs e)
{
    gridView.DataSource = GetData();
    gridView.DataBind();
} 
```

确保在 DropDownList 上有**AutoPostBack="true" 。**否则它不会触发事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:07:59.577

我想这对你有用

[http://www.facebook.com/groups/314912835194902/doc/406584239361094/](http://www.facebook.com/groups/314912835194902/doc/406584239361094/)

# django - 将 assignment_tag 设为可选

> ID：10230182
> 
> 赞同：1
> 
> 时间：2012-04-19T14:22:25.420
> 
> 标签：django, django-templates

如何制作一个行为类似于 simple_tag 或 assignment_tag 的标签，这两者`{% mytag %}`都是`{% mytag as varname %}`可能的？使用以下代码，我无法使用`{% mytag %}`.

```
@register.assignment_tag
def mytag():
    return 'hello, world!' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:37:23.050

您可以使用节点，例如：

**收件箱.py**

```
from django.template import Library, Node, TemplateSyntaxError

    class InboxOutput(Node):
        def __init__(self, varname=None):
            self.varname = varname

        def render(self, context):
            return ...

    def inbox_count(parser, token):
        """
        Usage::

            {% load inbox %}
            {% inbox_count %}

            {# or assign the value to a variable: #}

            {% inbox_count as my_var %}
            {{ my_var }}

        """
        bits = token.contents.split()
        if len(bits) > 1:
            if len(bits) != 3:
                raise TemplateSyntaxError, "inbox_count tag takes either no arguments or exactly two arguments"
            if bits[1] != 'as':
                raise TemplateSyntaxError, "first argument to inbox_count tag must be 'as'"
            return InboxOutput(bits[2])
        else:
            return InboxOutput()

    register = Library()     
    register.tag('inbox_count', print_inbox_count) 
```

# android - 无法在android资源文件中插入字符串而不会出现错误

> ID：10230194
> 
> 赞同：5
> 
> 时间：2012-04-19T14:22:51.230
> 
> 标签：android, eclipse

我如何抑制此错误：

```
<resources>
<string name='app_name'>PhoneMates</string>
<string name='app_url'>phonemates</string>
<string name='dom_url'>http://example.com/services/directlinkhandler.ashx?wid=124962546435&LinkID=1133&queryid=138&cid=8&promocode=GTJRPM</string>
<string name='loading'>Loading...</string> 
```

它指向 dom_url 链接并告诉我出现错误。对 LinkID 的引用必须以 ';' 结尾 分隔符。

如何在维护链接的同时防止/抑制该错误？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-19T14:26:49.187

尝试`&`用`&amp;`.

我已经确认这在我的环境中有效。原因是它会认为 & 符号后面的所有内容都是[& 字符代码](http://rabbit.eng.miami.edu/info/htmlchars.html)。

# java - 在 jtable 之前和之后打印带有特定文本的 jtable

> ID：10230196
> 
> 赞同：3
> 
> 时间：2012-04-19T14:22:52.400
> 
> 标签：java, swing, printing, jtable

我在[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)研究了关于打印 jtable 的示例代码，对我来说效果很好。现在我遇到了另一个问题。如何定义要在 jtable 内容之前和有时之后打印的文本？是否适合创建一个 html 页眉或页脚并像教程代码指示的那样插入它？或者有更好的方法吗？文本将由几个静态行组成，其中一些包含用户在创建 jtable 之前预定义的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:40:04.140

> 如何定义要在 jtable 内容之前和有时之后打印的文本？

*   这两个区域是页眉和页脚

*   您已经查看了有关[如何打印表格的单独教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/printtable.html)

*   [我的问题中有](https://stackoverflow.com/questions/6144775/messageformat-header-footerformat-how-to-change-font-for-jtable-printing)更多信息，你必须创建自己的页眉和页脚

# javascript - 两种 JavaScript 对象类型之间的区别

> ID：10230200
> 
> 赞同：2
> 
> 时间：2012-04-19T14:23:11.323
> 
> 标签：javascript, prototype

我看到 JavaScript 中的对象最常以以下两种方式组织。有人可以解释一下两者之间的区别和好处吗？是否存在一种更适合另一种的情况？

非常感谢任何澄清。非常感谢！

第一的：

```
 var SomeObject;

    SomeObject = (function() {

     function SomeObject() {}

         SomeObject.prototype.doSomething: function() {

         },
         SomeObject.prototype.doSomethingElse: function() {

         }

    })(); 
```

第二：

```
SomeObject = function() {

 SomeObject.prototype.doSomething: function() {

 },
 SomeObject.prototype.doSomethingElse: function() {

 }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:34:05.727

这两个例子都不正确。我想你的意思是：

第一的：

```
var SomeObject;
SomeObject = (function() {

    function SomeObject() {
    }

    SomeObject.prototype.doSomething = function() {
    };

    SomeObject.prototype.doSomethingElse = function() {
    };

    return SomeObject;

})(); 
```

（注意匿名函数末尾的 return，使用`=`而不是`:`，以及完成函数分配的分号。）

或者你的意思可能是：

```
function SomeObject() {
}

SomeObject.prototype.doSomething = function() {
};

SomeObject.prototype.doSomethingElse = function() {
}; 
```

（没有匿名封闭函数。）

第二：

```
function SomeObject() {
}
SomeObject.prototype = {

    doSomething: function() {
    },
    doSomethingElse: function() {
    }
}; 
```

（请注意，原型的赋值是在函数*之外*`SomeObject`；在这里，我们使用`:`是因为我们在对象初始化器中。同样，我们`;`在末尾有完成赋值语句。）

如果我是正确的，它们之间几乎没有区别。它们都创建了一个`SomeObject`构造函数并将匿名函数添加到其原型中。第二个版本用一个全新的对象（我不推荐）*替换*了构造函数的原型，其中第一个只是扩充了构造函数已经拥有的原型。`SomeObject``SomeObject`

一个更有用的形式是：

```
var SomeObject;
SomeObject = (function() {

    function SomeObject() {
    }

    SomeObject.prototype.doSomething = doSomething;
    function doSomething() {

    }

    SomeObject.prototype.doSomethingElse = doSomethingElse;
    function doSomethingElse()
    }

    return SomeObject;

})(); 
```

在那里，我们分配给函数`doSomething`并`doSomethingElse`具有**名称**，这在您在调试器中遍历代码时很有用（它们显示在调用堆栈、断点列表等中）。包装所有内容的匿名函数在那里，因此`doSomething`and`doSomethingElse`名称不会污染封闭的命名空间。更多：[*匿名者匿名*](http://blog.niftysnippets.org/2010/03/anonymouses-anonymous.html)

我们中的一些人更进一步：

```
var SomeObject;
SomeObject = (function() {
    var p = SomeObject.prototype;

    function SomeObject() {
    }

    p.doSomething = SomeObject$doSomething;
    function SomeObject$doSomething() {

    }

    p.doSomethingElse = SomeObject$doSomethingElse;
    function SomeObject$doSomethingElse()
    }

    return SomeObject;

})(); 
```

...这样我们不仅可以看到`doSomething`，而且可以`SomeObject$doSomething`在列表中看到 。有时这可能会妨碍您，但这是一种风格选择。（另请注意，我使用匿名函数为 加上别名`SomeObject.prototype`，以减少输入。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:32:40.780

首先，这两个片段都不会为我解析（Chrome） - 你应该使用`=`. `:`也就是说，我的拙见如下。

后面的代码片段有点奇怪，因为您实际上`SomeObject`是在对象构造时在 的原型上定义方法，而不是在解析时。因此，如果您在 上重新定义了某些方法`SomeObject.prototype`，则一旦构造了新对象，它将恢复为原始版本。这可能会导致此类型的现有对象出现意外行为。

前一个看起来不错，除了`(function { ...} ())()`包装器可能不是必需的。您可以只声明：

```
function SomeObject() {}
SomeObject.prototype.doSomething = function() {}
SomeObject.prototype.doSomethingElse = function() {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:36:40.743

您的问题中第一个和第二个之间的实际区别只是：

```
var o = (function () {})();  # call this (A) 
```

和

```
var o = function () {};  # call this (B) 
```

不幸的是，您提供的示例都*没有*正确编写，虽然我认为任何一个都不会在解析时实际给出错误，但当您尝试对结果进行处理时，两者都会以有趣的方式中断。

为了给你一个关于（A）和（B）之间区别的答案，（A）是立即函数应用模式。JavaScript Patterns book 有[一个很好的讨论](http://my.safaribooksonline.com/book/programming/javascript/9781449399115/functions/immediate_functions)，我推荐。

在我写这篇文章时，其他人已经解释了你代码中的实际问题。TJ Crowder 特别指出了重要的事情。

# java - Apache POI 将日期本地化为 Excel 单元格

> ID：10230204
> 
> 赞同：1
> 
> 时间：2012-04-19T14:23:28.463
> 
> 标签：java, excel, apache-poi

我有个问题。我使用的是 Apache POI 3.8，我需要将日期设置为 Excel 单元格。但我不明白 - 如何根据用户区域设置日期。因为美国格式的日期是月/日/年，在俄罗斯语言环境中 - 日/年/月。我正在为我的任务使用下一个代码

```
CellStyle dateStyle = workbook.createCellStyle();
dateStyle.setDataFormat(dataFormat.getFormat("m/d/yy"));
cell.setCellStyle(dateStyle); 
```

如果有人知道 - 如何根据用户区域设置设置单元格日期值，请回答。笔记。如果我使用“m/d/yy h:mm”，那么我在 Excel 文件中看不到我的日期（我在单元格中只看到“######”字符串）。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:39:12.297

尝试扩大细胞。有时，如果单元格宽度太短`######`，则会被视为输出。要获得本地化模式，您可以查看此[参考](https://stackoverflow.com/questions/4594519/how-do-i-get-localized-date-pattern-string)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T14:39:12.147

Excel 根据打开文档的机器的区域设置显示日期和数字。所以你不需要关心它。

在您的代码中，您使用模式“m/d/yy”。Excel 会自动将其转换为“de_DE”语言环境中的“dd.MM.yyyy”，“en_GB”语言环境中的“dd/MM/yyyy”等等。

您可以测试它更改机器的区域设置（**对于 Windows：** *控制面板 -> 时钟、语言和区域 -> 语言 -> 更改日期、时间或数字*）。正如您将看到的，相同的 Excel 文档在不同的语言环境中会以不同的方式显示。

* * *

关于“######”，您可以使用[Sheet#autosizeColumn](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html#autoSizeColumn(int))。但要小心，因为正如文档中所述：

> “这个过程在大纸张上可能相对较慢，因此通常每列只应在处理结束时调用一次”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T10:00:44.277

可以在 formatListener 上设置语言环境

```
MissingRecordAwareHSSFListener listener = new MissingRecordAwareHSSFListener(this);
formatListener = new FormatTrackingHSSFListener(listener, Locale.UK); 
```

# wolfram-mathematica - 如何在 Mathematica 中放置一些信息并将表格导出到相同的 .txt 文件中

> ID：10230205
> 
> 赞同：1
> 
> 时间：2012-04-19T14:23:33.290
> 
> 标签：wolfram-mathematica

我知道我可以通过以下方式将数组导出为表格形式

```
n={{1,3,3},{4,5,6}}
Export["file.txt",n,"Table"] 
```

但是在将表导出到同一个文件之前，我该如何写一些信息呢？我知道我可以通过以下方式编写信息：

```
x=37
stmp = OpenWrite["file.txt"]
WriteString[stmp, "E=", x, "\n"];
Close[stmp] 
```

但是将表放入同一个文件会删除以前的信息： E=37 有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:28:51.633

您可以简单地将流名称 ( `stmp`) 传递给`Export`，如下所示：

```
stmp = OpenWrite["file.txt"]
WriteString[stmp, "E=", x, "\n"]
Export[stmp,n,"Table"]
Close[stmp] 
```

# c# - SplitString 或 SubString 还是？

> ID：10230207
> 
> 赞同：0
> 
> 时间：2012-04-19T14:23:39.273
> 
> 标签：c#, .net, string

是否有（.NET 3.5 及更高版本）已经有一种拆分字符串的方法，如下所示：

*   string str = "{MyValue} 其他 {MyOtherValue}"
*   结果： MyValue ， MyOtherValue

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:30:27.937

喜欢：

```
 string regularExpressionPattern = @"\{(.*?)\}";
        Regex re = new Regex(regularExpressionPattern);
        foreach (Match m in re.Matches(inputText))
        {
            Console.WriteLine(m.Value);
        }
        System.Console.ReadLine(); 
```

不要忘记添加新的命名空间：[System.Text.RegularExpressions](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.aspx)；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:30:30.137

您可以使用正则表达式来做到这一点。此片段打印`MyValue`和`MyOtherValue`.

```
var r = new Regex("{([^}]*)}");
var str = "{MyValue} something else {MyOtherValue}";
foreach (Match g in r.Matches(str)) {
    var s = g.Groups[1].ToString();
    Console.WriteLine(s);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:30:56.163

像这样的东西：

```
string []result = "{MyValue} something else {MyOtherValue}".
           Split(new char[]{'{','}'}, StringSplitOptions.RemoveEmptyEntries)

string myValue = result[0];
string myOtherValue = result[2]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T14:34:14.120

```
MatchCollection match = Regex.Matches(str, @"\{([A-Za-z0-9\-]+)\}", RegexOptions.IgnoreCase);
Console.WriteLine(match[0] + "," + match[1]); 
```

# ruby - watir，元素当前不可见

> ID：10230208
> 
> 赞同：0
> 
> 时间：2012-04-19T14:23:39.440
> 
> 标签：ruby, firefox, watir, watir-webdriver

我正在尝试与网页上的小部件进行交互，将数据输入到表单元素中。但是我收到一条错误消息，说元素当前不可见，因此无法与之交互。当手动与页面交互时，文本框会要求您输入一些内容，然后当您单击该框并接受输入时，该文本就会消失。我试过让 watir 先点击这个框，但这对我也不起作用。这是原始的html：

```
<input class="symbol-search ui-autocomplete-input x-defaulttext-ghost" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">` 
```

在我点击浏览器中的框后，更改为：

```
<input class="symbol-search ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">` 
```

建议？不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:18:54.407

一个潜在的问题是代码中的输入元素缺少“类型”属性，这是 watir 用来区分诸如 text_field 和复选框之类的东西（因为它们都是输入元素，但行为不同）

没有那个类型属性（角色并没有真正削减它，它甚至不是输入字段的标准元素，甚至在 html5 中[也不是，据我所知](http://www.w3schools.com/html5/tag_input.asp)

缺少 type 属性，您将无法使用 watir 支持的大多数标准输入类型，这意味着您将无法访问 .set 方法您可能必须使用基本的 'element 来解决这个问题' 类，然后在单击它后使用 .send_keys 之类的东西来触发击键。

这到底是谁的小工具？他们有一个演示页面来展示它的例子吗？这将使人们更容易发现使用控件的潜在方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:48:39.613

这对我有用：

```
b.text_field(:class => /autocomplete/).set 'hello' 
```

# ios - 如何隐藏我在静态库中定义的常量？

> ID：10230209
> 
> 赞同：1
> 
> 时间：2012-04-19T14:23:48.577
> 
> 标签：ios, static-libraries

我有自己的图书馆。并且在标题中定义了很多常量（例如动画持续时间）。但是，我所有的标题都是可见和可变的。如何防止其他人更改我的默认值？

Apple 库的标头中有一些 const 值，如下所示：

CA_EXTERN NSString * const kCATransitionMoveIn __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:15:33.157

Objective-C 仍然是 C。也许旧系统有问题，这就是为什么你会在那里看到宏。无论如何，使用任何内置类型仍然应该是安全的。

如果您将某些内容声明为“extern”，编译器会将其视为“好的，我看到有人声明了外部事物。我不必知道它是什么，因为某些外部单元会定义它。链接器将处理其余的。

那段话会让我对 C 警察有麻烦，但它已经足够接近实际解释了。因此，您可以在头文件中执行此操作...

```
extern int const TheAnswerToLifeTheUniverseAndEverything; 
```

然后，在您的一个实现文件中（@implementation/@end 部分之外）...

```
int const TheAnswerToLifeTheUniverseAndEverything = 42; 
```

请注意，在“现代”Xcode 版本中，您可以对对象执行相同的操作。注意“const”，这意味着我们有一个指向 NSString 的常量指针。

```
// In header
extern NSString * const TheAnswerToLifeTheUniverseAndEverythingString;

// In source
NSString * const TheAnswerToLifeTheUniverseAndEverythingString = @"42"; 
```

# asp.net - 如何将 linq 中的查询分组到实体

> ID：10230214
> 
> 赞同：1
> 
> 时间：2012-04-19T14:23:58.133
> 
> 标签：asp.net, linq, entity-framework

我正在使用 linq to Entity 通过加入它们来从不同的表中检索数据，但我也想按字段**issueDesc**对它们进行分组，以消除同一问题的不必要的重复条目。

这是代码：

```
using (AssistantEntities context = new AssistantEntities())
        {
            var problems = context.tblProblems;
            var customers = context.tblCustomers;

            var query =
            from problem in problems
            join customer in customers
            on problem.CustID equals customer.custID
            where problem.IsActive == true
            orderby customer.isMonthlyService == true descending
            select new
            {
                problemID = problem.problemID,
                ProblemCreateDate = problem.ProblemCreateDate,
                CustID = problem.CustID,
                name = customer.name,
                isMonthlyService = customer.isMonthlyService,
                StationName = problem.StationName,
                problemDesc = problem.problemDesc,
                LogMeIn = problem.LogMeIn
            };
            return query.ToList();
        } 
```

我正在做 query.toList() 以便在 gridview 中使用该列表作为数据源。如果可能的话，还添加一个计算重复问题的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:28:20.667

您在以下链接中有大量示例。

[LINQ - 分组运算符](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)

# collections - 为什么整数必须先转换为字符串才能用于访问集合中的项目？

> ID：10230220
> 
> 赞同：3
> 
> 时间：2012-04-19T14:24:27.720
> 
> 标签：collections, vb6

一般来说，我是 VB 的新手。我正在浏览一些旧的 VB 代码，我看到如下语句 -

```
 Addr.AddrType(CStr(0)).A_Type = " " 
```

为什么整数 0 必须转换为字符串？

请注意，Addr 定义为

```
 Public Addr As clsAddressDetail 
```

AddrType 被定义为一个集合

```
 Public AddrType As New Collection 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:38:15.123

这里使用的`Collection`类实际上是一个[重载的 indexer](http://msdn.microsoft.com/en-us/library/a82kxee5%28v=vs.60%29.aspx)。我的重点：

> **通过 position 或 key**返回 Collection 对象的特定元素。只读。
> 
> ```
> Default Public ReadOnly Property Item( _
> ByVal { Key As String | Index As Integer | Index As Object } _ ) As Object 
> ```
> 
> 参数
> 
> 钥匙
> 
> 一个唯一的 String 表达式，它指定一个可以用来代替位置索引的键字符串来访问集合的元素。Key 必须对应于将元素添加到集合时指定的 Key 参数。
> 
> 指数
> 
> (A) 指定集合元素位置的数值表达式。索引必须是从 1 到集合的 Count 属性（集合对象）的值之间的一个数字。**或**(B) 一个 Object 表达式，它指定集合元素的位置或键字符串。

因此，如果您要求 ，则您要求`AddrType(0)`的是集合的第零个成员，对于这个基于 1 的集合来说，这是一个错误。但是，如果您要求`AddrType("0")`，则您要求的是使用 Key 添加的那个成员`"0"`。任何字符串都可以用作键 - 只是这里使用的特定字符串是数字的字符串表示形式。

顺便说一句，在风格上我会说写作`CStr(0)`而`"0"`不是特别好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:34:11.867

那里的 CStr() 函数用于访问 AddrType 集合的特定成员。集合可以通过数字索引或字符串键值引用。所以简短的回答是，整数**不必**转换为字符串来访问集合成员。为什么这个特定的编码器选择使用“0”作为键值是未知的；它当然不比使用数字索引更具描述性，这将是字符串键值的唯一优势。

# android - Android 检测应用程序是否正在下载

> ID：10230222
> 
> 赞同：0
> 
> 时间：2012-04-19T14:24:33.273
> 
> 标签：android, download, installation, apk

我知道在stackoverflow上有类似的问题，然后我全部阅读。我的问题有点不同。我用 iptables 实现了一些小应用程序，我需要知道用户是否安装了一些应用程序并且尚未下载。我的应用程序必须等到安装此应用程序。我知道如何制作接收器，`android.intent.action.PACKAGE_ADDED`但如何获取有关正在安装的应用程序的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:51:28.330

获取特定的应用程序信息很麻烦：不确定你是否能得到它。[此链接](http://blog.lytsing.org/archives/135.html)提供了有关如何收听下载管理器应用程序的一些信息：您可能有一种方法可以使用它并确定正在下载的内容是否实际上是 apk。

# facebook - 为什么延长令牌生命周期需要应用程序机密？

> ID：10230225
> 
> 赞同：0
> 
> 时间：2012-04-19T14:24:49.040
> 
> 标签：facebook, access-token

我对应用程序秘密的理解是它应该被保持“秘密”。

我想知道如何在不将应用程序机密嵌入客户端的情况下使用客户端流来延长令牌的生命周期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:31:11.547

你不能，你需要在服务器端做（可能通过代理调用）

例如，如果客户端代码是 Javascript，应该没有什么理由在客户端代码中使用长期令牌，而且我相信 iOS 和 Android SDK 在使用 SSO 流时已经收到扩展令牌

# proxy - 代理路由机制

> ID：10230226
> 
> 赞同：0
> 
> 时间：2012-04-19T14:24:50.287
> 
> 标签：proxy

关于互联网代理的一般问题。我们有几个代理人在工作。他们每个人都有自己的允许站点列表。有没有办法设置“某事”，告诉这个“某事”代理是 x,y,x 并让这个“某事”解决整个事情。类似于代理路由机制的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:49:50.860

Burp Proxy 可用作 Web 应用程序安全测试的拦截器。它就像浏览器和目标应用程序之间的中间人。检查这是否符合您的目的...

[http://www.portswigger.net/burp/proxy.html](http://www.portswigger.net/burp/proxy.html)

# ruby - 查找两个数组之间的共同值

> ID：10230227
> 
> 赞同：48
> 
> 时间：2012-04-19T14:24:52.087
> 
> 标签：ruby

`y`如果我想比较两个数组并在存在数组中的数组变量的情况下创建一个插值输出字符串，`x`如何获得每个匹配元素的输出？

这是我正在尝试但没有得到结果的方法。

```
x = [1, 2, 4]
y = [5, 2, 4]
x.each do |num|
  puts " The number #{num} is in the array" if x.include?(y.each)
end #=> [1, 2, 4] 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-04-19T14:29:00.293

您可以为此使用设置交集方法[`&`](http://ruby-doc.org/core/Array.html#method-i-26)：

```
x = [1, 2, 4]
y = [5, 2, 4]
x & y # => [2, 4] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-19T14:33:29.393

```
x = [1, 2, 4]
y = [5, 2, 4]
intersection = (x & y)
num = intersection.length
puts "There are #{num} numbers common in both arrays. Numbers are #{intersection}" 
```

将输出：

```
There are 2 numbers common in both arrays. Numbers are [2, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-18T18:50:34.657

好的，因此`&`操作员似乎是您获得此答案所需要做的唯一事情。

但在我知道我为数组类写了一个快速的猴子补丁来做到这一点之前：

```
class Array
  def self.shared(a1, a2)
    utf = a1 - a2 #utf stands for 'unique to first', i.e. unique to a1 set (not in a2)
    a1 - utf
  end
end 
```

运营商在这里`&`是正确的答案。更优雅。

# web-services - WS 安全机制之间的区别

> ID：10230230
> 
> 赞同：6
> 
> 时间：2012-04-19T14:25:13.133
> 
> 标签：web-services, ssl, wsdl, ws-security

通过修改 web.xml/ejb-jar.xml 与通过 WS-Policy 修改 WSDL 来通过 SSL 实现 SOAP 消息之间有什么优势？

我们的项目可以通过添加传输保证来实现让我们的客户（我们自己）通过安全连接访问 Web 服务的目标，但我们不确定这是否是一个完整/正确的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:40:04.810

使用 SSL，您可以获得客户端和服务之间的点对点加密。如果服务不是消息的最终接收者，而是将此消息路由到另一个服务的代理，则您在两个服务之间没有加密，或者您也必须对其进行配置。

通过 WS-Policy 配置的 WS-Security 有可能在客户端和消息的最终接收者之间为您提供端到端加密，因为您可以加密消息正文。您不需要为每对通信实体配置 SSL。每个代理都可以按照标头中的定义路由消息。

也就是说，如果您不需要端到端保证，但点对点就足够了（据我了解，这是您的方案），我会说使用 SSL 是一个公平的选择。

要考虑的另一件事是客户端和服务的 WS-Security 实现需要能够互操作。SSL 通常相当成熟，但我个人的经验是 WS-Security 实现还不是。因此，如果您为客户端和服务器使用不同的 WS-* 堆栈，则可能需要进行一些黑客攻击和反复试验才能找到适用于两者的策略配置。

# mysql - mysql 语法错误 1064 在第 194 行为多对多关系添加外键

> ID：10230233
> 
> 赞同：2
> 
> 时间：2012-04-19T14:25:32.823
> 
> 标签：mysql, many-to-many

请帮帮我。当我尝试运行 sql 命令时收到以下消息：

```
第 194 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '(
    添加约束 VFSGRPUSR_REF_VFSGRP
        外键 (VFSGRP)
        参考 `VFS' 在第 1 行

```

我正在尝试实现多对多关系。

```
``----------------------------------------------------------------------------------------`` `DROP TABLE IF EXISTS `VFSGRPUSR`;

CREATE TABLE `VFSGRPUSR`
(
  `VFSGRP` INTEGER REFERENCES VFSGRP(VFSGRP_ID),
  `VFSUSR` INTEGER REFERENCES VFSUSR(VFSUSR_ID),
  PRIMARY KEY (`VFSGRP`, `VFSUSR`)
)ENGINE=InnoDB DEFAULT CHARSET utf8;

# ----------------------------------------------------------------------------------------

DROP TABLE IF EXISTS `VFSUSR`;

CREATE TABLE `VFSUSR`
(
  `VFSUSR_ID` INTEGER NOT NULL auto_increment,
  `DEPARTMENT` INTEGER,
  `FIRSTNAME` VARCHAR(255) NOT NULL,
  `SURNAME` VARCHAR(255) NOT NULL,
  `LOGIN` VARCHAR(255) NOT NULL,
  `PASSWORD` BLOB,
  `TOKEN` BLOB,
  PRIMARY KEY  (`VFSUSR_ID`),
  CONSTRAINT VFSUSR_REF_DEPARTMENT FOREIGN KEY (DEPARTMENT) REFERENCES DEPARTMENT (DEPARTMENT_ID)
)ENGINE=InnoDB DEFAULT CHARSET utf8;

# ----------------------------------------------------------------------------------------

DROP TABLE IF EXISTS `VFSGRP`;

CREATE TABLE `VFSGRP`
(
  `VFSGRP_ID` INTEGER NOT NULL auto_increment,
  `GROUPNAME` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`VFSGRP_ID`)
)ENGINE=InnoDB DEFAULT CHARSET utf8;

# ----------------------------------------------------------------------------------------

ALTER TABLE VFSGRPUSR(
    ADD CONSTRAINT VFSGRPUSR_REF_VFSGRP
        FOREIGN KEY (VFSGRP)
        REFERENCES `VFSGRP`(VFSGRP_ID)
)ENGINE=InnoDB DEFAULT CHARSET utf8;

ALTER TABLE VFSGRPUSR(
    ADD CONSTRAINT VFSGRPUSR_REF_VFSUSR
        FOREIGN KEY (VFSUSR)
        REFERENCES `VFSUSR`(VFSUSR_ID)
)ENGINE=InnoDB DEFAULT CHARSET utf8;` 
```

* * *

 `## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:31:30.447

你为什么还要设置`ENGINE`and `CHARSET`？只需使用：

```
ALTER TABLE VFSGRPUSR
    ADD CONSTRAINT VFSGRPUSR_REF_VFSGRP
        FOREIGN KEY (VFSGRP)
        REFERENCES VFSGRP(VFSGRP_ID); 
```

并参考官方文档了解可用的语法：[http ://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)`

# sql-server - 如何管理数据库中更改的项目及其以前的名称

> ID：10230244
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:12.727
> 
> 标签：sql-server, database-design

当您有销售订单和项目表时，如何处理这种情况，然后在某个时间点您必须更改项目。更改也将显示在具有该项目的销售订单上。但是，假设在下订单时信息是正确的，但后来发生了变化。我不希望较旧的 SO 更改他们为订单项显示的内容，并且我不想制作新项目，因为这会让我稍后混淆哪个项目是正确的。

我注意到在 OpenERP 中它就是这样做的，即使您在销售订单下达后更改了零件编号和描述的名称，也会保留销售订单上的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:55:44.693

如果您正在创建新的数据库，请重组您的 Item 表。创建一个表（例如`ItemHistory`）。有一个`ItemID`和`ItemTypeID`和`DateCreated`字段。

ItemID 应该用于订单，`ItemTypeID`+`DateCreated`将帮助您获取当前项目。

# iphone - 关联帐户后 iPhone CHDropboxSync 崩溃到主屏幕

> ID：10230245
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:16.300
> 
> 标签：iphone, objective-c, ios, dropbox, chdropboxsync

我对使用 Dropbox 很陌生，正在寻找同步的示例。我发现`CHDropboxSync`并正在制作项目中包含的示例应用程序。

我遇到了这样的问题：Dropbox“与Dropbox的链接”网页打开时提示“ExampleApp想要访问您的Dropbox中的文件夹”。文件夹名称显示正确。当我点击绿色的“允许”按钮时，网络浏览器会关闭并出现黑屏。一秒钟后，我看到了 iPhone 的桌面。没有错误消息，但**应用程序在关联 Dropbox 帐户后不会重新打开。**什么可能导致此问题？**有没有其他人在使用 CHDropboxSync 时遇到过这种“崩溃到桌面”的问题？**

以下是我对项目进行的修改以使其正常工作：

```
<dict>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>db-CORRECT_APP_KEY</string>
            </array>
        </dict> 
```

在应用委托中：

```
// Dropbox
#warning Put your app-folder-type dropbox keys in here
    DBSession* dbSession = [[[DBSession alloc] initWithAppKey:@"CORRECT_KEY" appSecret:@"CORRECT_SECRET" root:kDBRootAppFolder] autorelease];
    [DBSession setSharedSession:dbSession]; 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:40:51.287

我通过以下方式解决了这个问题：创建一个不同的保管箱应用程序并使用新的密钥/秘密/根文件夹更新项目实施不同的应用程序委托方法：

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            NSLog(@"App linked successfully!");
            [CHDropboxSync forgetStatus];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"Linked" object:nil];
            // At this point you can start making API calls
        }
        return YES;
    }
    // Add whatever other url handling code your app requires here
    return NO;
} 
```

# javascript - 图片上传的UI插件

> ID：10230248
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:29.747
> 
> 标签：javascript, jquery, jquery-plugins, user-interface, upload

有人可以推荐一个用于上传图片的轻量级和可定制的 UI 插件吗？我目前正在为此使用 HTML 文件输入，这真的很难看，并且取决于浏览器的视图。

我的项目的一些要求是插件应该 -
1）不占用太多屏幕空间
2）能够限制可以上传的文件的类型和数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:22:47.933

这对我来说真的很好用[ajax-upload](http://valums.com/ajax-upload/)

# sql - sql2008 - 比多个替换语句更好？

> ID：10230249
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:29.943
> 
> 标签：sql, sql-server-2008, tsql, replace

在我[之前的帖子之后](https://stackoverflow.com/q/10190422/1331835)，我想将依赖对象（例如视图或过程）复制到“静态”数据库。*但是，生产*数据库和*静态*数据库之间的模式名称和其他对象前缀并不相同...

[我已经阅读了[Aaron Bertrand](http://www.mssqltips.com/sqlservertip/2085/sql-server-ddl-triggers-to-track-all-database-changes/)关于设置*审计*数据库的文章，但这对于我们目前的需求来说有点多。]

使用一些动态 sql 将对象定义提取到变量中后，我`replace`为每个更改运行多个语句，以便视图/过程仍然运行，从*静态*数据库中提取数据。

声明的原因`replace`是视图/过程是使用不同的命名约定创建的。有时我发现`<dbname>.dbo.<objectname>`，有时`<dbname>..<objectname>`甚至只是`dbo.<objectname>`！

而不是使用如下的多个`replace`语句（我觉得这可能会变得很大！），有没有更好的方法？表驱动的方法（使用 a `CURSOR`）会更明智/最明智吗？

[为简单起见，以下代码中已修改数据库/对象名称]

```
declare @sql nvarchar(500), @parmdef nvarchar(500), 
        @dbname varchar(20), @objname varchar(255), @ObjDef varchar(max);
set @dbname = 'ProdC';

--declare cursor; get object name using cursor on dbo.ObjectsToUpdate
--[code removed for simplicity]

set @sql = N'USE '+quotename(@dbname) +'; ' ;
set @sql = @sql + N'SELECT @def=OBJECT_DEFINITION(OBJECT_ID(''dbo.'+@objname+ '''));'
set @parmdef = N'@def nvarchar(max) OUTPUT' ;
exec sp_executesql @sql, @parmdef, @def=@ObjDef OUTPUT;

--Carry out object definition replacements
set @ObjDef= replace(@ObjDef, 'CREATE VIEW [dbo].[', 'ALTER VIEW ['+@dbname+'].[');
set @ObjDef= replace(@ObjDef, 'Prod1.dbo.', @dbname+'.'); --replace Prod1 with @dbname
set @ObjDef= replace(@ObjDef, ' dbo.', ' '+@dbname+'.'); --replace all 'dbo.'
set @ObjDef= replace(@ObjDef, 'dbo.LookupTable1', @dbname+'.LookupTable1');
--[code removed for simplicity]

exec(@ObjDef);

--get next object name from cursor
--[remaining code removed for simplicity] 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:30:48.137

您遇到的另一个问题是使用`OBJECT_DEFINITION`. 这仅返回对象名称的前 4,000 个字符。

使用`INFORMATION_SCHEMA.ROUTINES`.

查看这篇文章以讨论替代方案...

*   [伙计，我剩下的程序在哪里？](https://sqlblog.org/2011/11/08/t-sql-tuesday-24-dude-wheres-the-rest-of-my-procedure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:40:30.220

“但是，生产数据库和静态数据库之间的架构名称和其他对象前缀不同”

那就是你的问题。使它们相同，您的问题就会消失。由于 SQL Server 支持多个实例，因此这样做应该没有障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:15:46.087

@ben：静态数据库从几个生产数据库中提取，并且希望通过使用数据库名称作为静态数据库中的模式名称来维护原始“源”。

关闭。[与本帖](https://stackoverflow.com/q/5475428/1331835)重复

# c# - 使用类来表示节点检查空 XML 节点

> ID：10230254
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:41.900
> 
> 标签：c#, visual-studio-2010, nullreferenceexception, linq-to-xml

好的，所以我有一些课程如下...

```
/// <summary>
/// 
/// </summary>
public class InsuredOrPrincipal 
{
    XElement self;
    public InsuredOrPrincipal(XElement self) { this.self = self; }

    public GeneralPartyInfo GeneralPartyInfo { get { return _GeneralPartyInfo ?? (_GeneralPartyInfo = new GeneralPartyInfo(self.Element("GeneralPartyInfo"))); } }
    GeneralPartyInfo _GeneralPartyInfo;

    public InsuredOrPrincipalInfo InsuredOrPrincipalInfo 
    { get { return _InsuredOrPrincipalInfo ?? (_InsuredOrPrincipalInfo = new InsuredOrPrincipalInfo(self.Element("InsuredOrPrincipalInfo"))); } }
    InsuredOrPrincipalInfo _InsuredOrPrincipalInfo;
}
/// <summary>
/// 
/// </summary>
public class GeneralPartyInfo
{
    XElement self;
    public GeneralPartyInfo(XElement self) { this.self = self; }

    public NameInfo NameInfo { get { return _NameInfo ?? (_NameInfo = new NameInfo(self.Element("NameInfo"))); } }
    NameInfo _NameInfo;

    public Addr Addr { get { return _Addr ?? (_Addr = new Addr(self.Element("Addr"))); } }
    Addr _Addr;

    public string NameInfoStr
    {
        get { return (string)self.Element("NameInfo"); }
    }
} 
```

我尝试测试是 nameInfoStr != null 并且只是使用以下代码块测试 NameInfo != null

```
InsuredOrPrincipal[] coInsured = xmlDoc.Root
           .Descendants("InsuredOrPrincipal")
           .Select(x => new InsuredOrPrincipal(x))
           .Where(ip => ip.InsuredOrPrincipalInfo.InsuredOrPrincipalRoleCd == "Coinsured")
           .Where( gp => gp.GeneralPartyInfo.NameInfo != null)
           .ToArray(); 
```

或 .Where(gp=> gp.GeneralPartyInfo.nameInfoStr != null

我使用 xmlDoc 作为 XDocument，我必须调用一个 InsuredOrPrincipal 数组，因为可能有很多。我需要测试名称节点是否存在于 xml 文档中。因为如果他们不这样做，那么我不想将该被保险人或原则添加到数组中。先感谢您

蒂姆

如果这有帮助，下面是额外的节点

```
public class NameInfo
{
    XElement self;
    public NameInfo(XElement self) { this.self = self; }

    public PersonName PersonName { get { return _PersonName ?? (_PersonName = new PersonName(self.Element("PersonName"))); } }
    PersonName _PersonName;
}

/// <summary>
/// 
/// </summary>
public class PersonName
{
    XElement self;
    public PersonName(XElement self) { this.self = self; }

    public string Surname
    {
        get { return (string)self.Element("Surname"); }
        set { self.Element("Surname").SetValue(value); }
    }
    public string GivenName
    {
        get { return (string)self.Element("GivenName"); }
        set { self.Element("GivenName").SetValue(value); }
    }
    public string OtherGivenName
    {
        get { return (string)self.Element("OtherGivenName"); }
        set { self.Element("OtherGivenName").SetValue(value); }
    }

    public string NickName
    {
        get { return (string)self.Element("NickName"); }
        set { self.Element("NickName").SetValue(value); }
    }

} 
```

这是一个示例 XML

```
 InsuredOrPrincipal 
     GeneralPartyInfo 
                 NameInfo 
                 PersonName 
                 Surname NAME  Surname  
                 GivenName FIRST  GivenName  
                 OtherGivenName J  OtherGivenName  
              PersonName 
             TaxIdentity 
                 TaxIdTypeCd SSN  TaxIdTypeCd  
                 TaxId XXX-XX-XXXX  TaxId  
              TaxIdentity 
          NameInfo 
         Addr 
             AddrTypeCd MailingAddress  AddrTypeCd  
             Addr1 1315 STREET DR  Addr1  
             City Picker  City  
             StateProvCd OH  StateProvCd  
             PostalCode 99999  PostalCode  
             CountryCd Fairfield  CountryCd  
          Addr 
      GeneralPartyInfo 
     InsuredOrPrincipalInfo 
         InsuredOrPrincipalRoleCd Insured  InsuredOrPrincipalRoleCd  

      InsuredOrPrincipalInfo 
InsuredOrPrincipal 

  InsuredOrPrincipal
 GeneralPartyInfo 
     NameInfo 
         TaxIdentity 
             TaxIdTypeCd SSN  TaxIdTypeCd  
             TaxId 999-88-5684  TaxId  
          TaxIdentity 
      NameInfo 
  GeneralPartyInfo 
 InsuredOrPrincipalInfo 
     InsuredOrPrincipalRoleCd Coinsured  InsuredOrPrincipalRoleCd  
  InsuredOrPrincipalInfo 
InsuredOrPrincipal 
```

这是使用它的功能

```
private void CreateDataRows(XDocument xmlDoc, String Name)
    {
        DataRow fileRow = _ComboDataTable.NewRow();

        InsuredOrPrincipal[] insured = xmlDoc.Root
              .Descendants("InsuredOrPrincipal")
              .Select(x => new InsuredOrPrincipal(x))
              .Where(ip => ip.InsuredOrPrincipalInfo.InsuredOrPrincipalRoleCd == "Insured")
              .ToArray();

        InsuredOrPrincipal[] coInsured = xmlDoc.Root
           .Descendants("InsuredOrPrincipal")
           .Select(x => new InsuredOrPrincipal(x))
           .Where(ip => ip.InsuredOrPrincipalInfo.InsuredOrPrincipalRoleCd == "Coinsured")
           .ToArray();

        _insuredCount = insured.Count() + coInsured.Count(); //count number of elements 

        foreach (var person in insured)
        {
            try
            {
                fileRow["First_Name"] = person.GeneralPartyInfo.NameInfo.PersonName.GivenName;
            }
            catch
            {
                fileRow["First_Name"] = " ";
            }
            try
            {
                fileRow["Last_name"] = person.GeneralPartyInfo.NameInfo.PersonName.Surname;
            }
            catch
            {
                fileRow["Last_name"] = " ";
            }
            fileRow["Address1"] = person.GeneralPartyInfo.Addr.Address1;
            fileRow["City"] = person.GeneralPartyInfo.Addr.City;
            fileRow["State"] = person.GeneralPartyInfo.Addr.State;

            if (person.GeneralPartyInfo.Addr.Address2 != null)
                fileRow["Address2"] = person.GeneralPartyInfo.Addr.Address2;
            else
                fileRow["Address2"] = ' ';

            switch (person.GeneralPartyInfo.Addr.Zip.Length)
            {
                case 5:
                case 7: fileRow["Zip"] = person.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                    fileRow["Zip4"] = ' ';
                    break;
                case 6: fileRow["Zip"] = '0' + person.GeneralPartyInfo.Addr.Zip.Substring(0, 4);
                    fileRow["Zip4"] = ' ';
                    break;
                case 9: fileRow["Zip"] = person.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                    fileRow["Zip4"] = person.GeneralPartyInfo.Addr.Zip.Substring(5, 4); break;
                case 10: fileRow["Zip"] = person.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                    fileRow["Zip4"] = person.GeneralPartyInfo.Addr.Zip.Substring(6, 4); break;
                default: fileRow["Zip"] = "00000"; fileRow["Zip4"] = "0000"; break;
            }
            fileRow["Match_File"] = Name.ToString();
            fileRow["Num_Insured"] = _insuredCount.ToString();
            _ComboDataTable.Rows.Add(fileRow);
        }

        DataRow fileRow2 = _ComboDataTable.NewRow();

        foreach (var person2 in coInsured)
        {
            try
            {
                fileRow2["First_Name"] = person2.GeneralPartyInfo.NameInfo.PersonName.GivenName;
            }
            catch
            {
                fileRow2["First_Name"] = " ";
            }
            try
            {
                fileRow2["Last_name"] = person2.GeneralPartyInfo.NameInfo.PersonName.Surname;
            }
            catch
            {
                fileRow2["Last_name"] = " ";
            }
            try
            {
                fileRow2["Address1"] = person2.GeneralPartyInfo.Addr.Address1;
            }
            catch
            {
                fileRow2["Address1"] = fileRow["Address1"];
            }
            try
            {
                fileRow2["City"] = person2.GeneralPartyInfo.Addr.City;
            }
            catch
            {
                fileRow2["City"] = fileRow["City"];
            }

            try
            {
                fileRow2["State"] = person2.GeneralPartyInfo.Addr.State;
            }
            catch
            {
                fileRow2["State"] = fileRow["State"];
            }

            try
            {
                fileRow2["Address2"] = person2.GeneralPartyInfo.Addr.Address2;
            }
            catch
            {
                fileRow2["Address2"] = fileRow["Address2"];
            }

            try
            {
                switch (person2.GeneralPartyInfo.Addr.Zip.Length)
                {
                    case 5:
                    case 7: fileRow2["Zip"] = person2.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                        fileRow2["Zip4"] = ' ';
                        break;
                    case 6: fileRow2["Zip"] = '0' + person2.GeneralPartyInfo.Addr.Zip.Substring(0, 4);
                        fileRow2["Zip4"] = ' ';
                        break;
                    case 9: fileRow2["Zip"] = person2.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                        fileRow2["Zip4"] = person2.GeneralPartyInfo.Addr.Zip.Substring(5, 4); break;
                    case 10: fileRow2["Zip"] = person2.GeneralPartyInfo.Addr.Zip.Substring(0, 5);
                        fileRow2["Zip4"] = person2.GeneralPartyInfo.Addr.Zip.Substring(6, 4); break;
                    default: fileRow2["Zip"] = "00000"; fileRow2["Zip4"] = "0000"; break;
                }
            }
            catch
            {
                fileRow2["Zip"] = fileRow["Zip"];
                fileRow2["Zip4"] = fileRow["Zip4"];
            }

            fileRow2["Match_File"] = Name.ToString();
            fileRow2["Num_Insured"] = _insuredCount.ToString();
            _ComboDataTable.Rows.Add(fileRow2);
        }
    } 
```

希望你能帮忙

# c# - Windows 8 Metro 录制音频（过滤噪音、改变音高）

> ID：10230255
> 
> 赞同：3
> 
> 时间：2012-04-19T14:26:43.087
> 
> 标签：c#, audio, windows-runtime, windows-store-apps, winrt-xaml

是否可以仅在有人讲话时录制音频？我想听麦克风，只有在“音量”大于某个噪音水平（意味着有人在说话）时才开始录制，我还需要更改录制音频的音高。

我在 C# 中尝试了 MediaCapture 类，但示例中的 StartRecordToStorageFileAsync 在我的场景中不可用。在 Windows Phone 中，我使用 XNA，但在 Windows 8 中找不到类似的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:54:21.387

在 MSDN 论坛上查看此线程：[如何使用 C# 获得分贝？](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f04e0629-2609-4542-a141-46166f4cbdeb)

在 C#、Visual Basic 或 JavaScript 中似乎存在并且可能不会有用于执行此操作的 API，您需要在本机组件中执行此操作。

该线程中提到的文章中的核心音频/WASAPI API 应该具有您需要的内容：[Win32 and COM for Metro style apps (multimedia)](http://msdn.microsoft.com/en-us/library/windows/apps/hh452756.aspx)

我认为[本文档](http://download.microsoft.com/download/F/9/9/F99791F2-D5BE-478A-B77A-830AD14950C3/AudioCaptureRaw_Walkthrough.pdf)描述了从 Kinect 传感器捕获音频的示例，该示例可能具有相关的代码示例，显示您将如何使用 GetBuffer() 调用来获取原始音频样本的缓冲区，您可以处理这些缓冲区以获得所需的信息.

# azure - 我怎样才能将此传达给 CorpIT？

> ID：10230257
> 
> 赞同：1
> 
> 时间：2012-04-19T14:26:47.453
> 
> 标签：azure, firewall, azure-web-roles

我的 Azure Web 角色可以使用远程桌面通过浏览器 (IE) 连接到 google.com 和我们公司网络上的 DMZ 服务器。

我的 Web 角色无法通过 HTTP GET (IE) 连接到防火墙后面的非 DMZ 框。我的网络角色也无法 ping 此框。我的服务托管在北/中，据称所有已发布的北/中 IP 范围都已被我们的 CorpIT 人员授予对目标 IP 的访问权限。他们声称，当我尝试对目标本地 IP 执行 ping 或 HTTP GET 时，他们没有通过嗅探器看到来自我的计算实例 IP 的流量。

CorpIT 需要微软方面的帮助，但我们与微软没有关系。我确信这是数月草率的三手防火墙规则应用于相关目标环境的结果。我可以做些什么来为 CorpIT 进一步阐明这一点？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:40:10.943

您可以尝试从 Azure 实例运行跟踪路由或获取网络跟踪，然后查看从何处返回的内容。您还可以使用 microsoft 创建支持案例：

[https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:47:10.423

我不会打赌使用 IP 范围来使您的应用程序正常工作。Windows Azure 已经为您提供了一些服务，可以让您解决这些类型的问题：

*   [Windows Azure Connect](http://msdn.microsoft.com/en-us/library/windowsazure/gg433122.aspx)：允许您在服务器和托管服务之间创建 IPSec 安全连接。这意味着您无需为传入流量向防火墙添加规则。

*   [Windows Azure 服务总线中继](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/#what-is)：允许您向云公开 WCF 服务，而无需向防火墙添加规则以处理传入流量。选择此选项可能会为您添加一些额外的工作，如果您还没有 WCF 服务，您可能需要创建一个并更改您的 Web 角色中的代码以连接到此 WCF 服务。

# php - 如何在 Symfony 上配置内部 url 的内容

> ID：10230261
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:51.923
> 
> 标签：php, html, symfony1, web

我是 Symfony 的新手，我正在尝试了解 Symfony 项目的工作原理。现在我正在尝试更改内部 url 的内容。例如，在 layout.php 文件中，我可以这样写一句话：

```
<a href="<?php echo url_for('viajesDeusto/new') ?>">Suecia</a> 
```

这很好用，当我按下“Suecia”“按钮”时，它会更改内容，并将 viajesDeusto/new 添加到 url。我的问题是，我在哪里可以更改“viajesDeusto/new”网址显示的内容？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:05:33.570

如果您在`url_for()`函数中拆分 url，它会分解为 MODULE/ACTION

所以进入你的应用程序 (%SF_ROOT_DIR%/apps/%APP_NAME%) 在那个文件夹里面你有一个`modules`文件夹里面有模块名称你有一个`actions`文件夹和一个`templates`文件夹`actions`文件夹是你的代码检索/处理数据的地方驻留`templates`文件夹是演示代码所在的位置

例如，如果您的应用程序被调用`frontend`，代码的位置是：

%SF_ROOT_DIR%/apps/frontend/modules/viajesDeusto/actions %SF_ROOT_DIR%/apps/frontend/modules/viajesDeusto/templates

这是 syfony 1.x 应用程序的标准设置

# optimization - 为什么 NSGAII（多目标优化算法）总是在算法的拥挤距离分配部分选择两个边界点？

> ID：10230262
> 
> 赞同：0
> 
> 时间：2012-04-19T14:26:56.213
> 
> 标签：optimization, selection, evolutionary-algorithm

为什么 NSGA II（多目标优化）总是在算法的拥挤距离分配部分选择两个边界点？我知道在每次迭代中它选择具有多目标函数值之一的最佳值的解决方案，但为什么它也选择具有最差值的解决方案？对我来说，这种算法似乎试图尽可能地扩展帕累托前沿（或积极搜索的解决方案空间）。

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.18.4257](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.18.4257)

伪代码第 5 页

293 次引用，所以 NSGA II 是非常流行的多目标优化算法，所以我认为我的问题不太具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:05:52.000

您必须了解，根据帕累托前沿的定义，一个目标的最差值（在两个目标的情况下）会在第二个目标中产生最佳值。

此未支配解决方案列表根据第一个目标（最小化）排序

```
(0, 5), (1, 4), (2, 3), (3, 2), (4, 1), (5, 0) 
```

第一个值在第一个目标上是最好的，但在第二个目标上是最差的，但它仍然没有被支配。保留此解决方案可能有助于在当前 Pareto 前沿之外的解决方案的演进中取得进展。问题的真正帕累托前沿是未知的，可能会进一步超出目前发现的极值。

此外，从业者可能希望从他的最终解决方案中选择一组不受约束的解决方案，并可能决定他不能在一个目标上妥协。因此，根据他的决策标准，极端解决方案是他可以采取的最佳方案。

三个（以及更多）客观案例不太明显，但仍然是真实的。

# android - 我可以阻止 Eclipse 自动添加视图吗？

> ID：10230263
> 
> 赞同：0
> 
> 时间：2012-04-19T14:27:01.883
> 
> 标签：android, eclipse, view, ide, adt

比如我有两种观点，一种是调试，一种是编码。
在编码领域，我显然不想要用于调试的视图（例如来自 ADT 的 LogCat）。

Jet 当某些插件、功能或视图觉得它有重要的要说时，它只会以我的任何角度出现。Eclipse 只是添加了一个视图，并且每次都将其置于顶部，这很烦人。

如何禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:28:29.307

您可以从 Eclipse Preferences 窗口（例如，Windows 和 Linux 上的 Window > Preferences）配置 LogCat 行为。进入 Android > LogCat 并切换诸如“切换透视图”和“显示 logcat 视图...”之类的值。

![在此处输入图像描述](../Images/b947fe2cc86a90305c8be68b45375222.png)

# python - 处理瓶子的 SimpleTemplate Engine 模板中的未定义值

> ID：10230264
> 
> 赞同：2
> 
> 时间：2012-04-19T14:27:09.233
> 
> 标签：python, templates, bottle

我该如何处理：

```
... value="{{thing['attr']}}" ... 
```

as '' 对于未定义的事物？我试过了

```
... value="{{thing['attr'] if node else ''}}" ... 
```

但它抱怨说，那件事没有定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:12:30.017

```
{{thing['attr'] if defined('thing') else ''}} 
```

# java - Liferay LDAP Auth 未按预期工作

> ID：10230269
> 
> 赞同：1
> 
> 时间：2012-04-19T14:27:25.597
> 
> 标签：java, ldap, liferay-6, apacheds

我正在使用 Liferay 6.1 CE，并且我有以下与以下博客相关的问题

参考：[http ://www.liferay.com/web/jonas.yuan/blog/-/blogs/6583930](http://www.liferay.com/web/jonas.yuan/blog/-/blogs/6583930)

我正在尝试进行 LDAP 身份验证，我不应该导入 ldap 用户密码，我还想只使用 ldap 作为身份验证源，而不是第二次进行 liferay 身份验证。

这些是我在 portal-ext.properties 中的设置：

```
ldap.factory.initial=com.sun.jndi.ldap.LdapCtxFactory
ldap.referral=follow
ldap.base.provider.url=ldap://localhost:10389
ldap.base.dn=dc=example,dc=com
ldap.security.principal=uid=admin,ou=system
ldap.security.credentials=secret

auth.pipeline.enable.liferay.check=false

ldap.auth.enabled=true
ldap.auth.required=true
ldap.auth.method=bind

ldap.import.enabled=false
ldap.import.on.startup=false
ldap.import.interval=10
ldap.export.enabled=false
ldap.export.group.enabled=false

ldap.auth.search.filter=(mail=@email_address@)

ldap.user.mappings=screenName=cn\npassword=userPassword\nemailAddress=mail\nfirstName=givenName\nlastName=sn
ldap.user.custom.mappings=screenName=cn\npassword=userPassword\nemailAddress=mail\nfirstName=givenName\nlastName=sn
ldap.group.mappings=groupName=cn\ndescription=description\nuser=uniqueMember

ldap.import.user.search.filter=(objectClass=inetOrgPerson)
ldap.import.group.search.filter=(objectClass=groupOfUniqueNames)

ldap.password.policy.enabled=false
ldap.import.user.password.enabled=false
ldap.import.user.password.autogenerated=false
ldap.import.user.password.default=test 
```

发生的事情是，如果我保持 auth.pipeline.enable.liferay.check=false，那么即使使用 test@liferay.com 用户我也无法登录，因为他不在 ldap 中（其他用户也无法登录以下问题 1 中给出的理由）。如果我启用该属性，那么 liferay 在 ldap 之后进行第二次验证，但由于密码未导入设置，ldap 中的密码与本地虚拟密码（测试）不同，因此失败。

另外，我有 2 个单独的问题。

1.  当我使用此属性文件加载 ldap 道具时，只有在测试用户第一次登录并进入控制面板（ldap 页面）后，我才能在 portalproperties 表中看到它。如果我不这样做，其他用户都无法执行 ldap auth（因为 props 文件未加载到该门户属性表）

2.  liferay 中有没有办法让我只能做 ldap auth 而不能创建 liferay 用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T12:32:17.533

迟了快两年！！但是万一其他人发现了这个线程，Liferay 总是通过 Auth Pipeline，如果通过了，总是再次对照它的数据库检查密码，除非

auth.pipeline.enable.liferay.check=false

在 portal.properties 中。在这种情况下，与存储在 Liferay User_ 表中的密码无关，密码将仅根据 LDAP 进行检查。

抱歉迟到了两年！！

# javascript - 如何避免这种邪恶评估的情况？

> ID：10230271
> 
> 赞同：1
> 
> 时间：2012-04-19T14:27:32.463
> 
> 标签：javascript, eval, jslint, jshint

我继承了一个 javascript 代码库，我是 javascript 新手。所以我使用 JSHint 来避免常见的错误和误用。

JSHint 找到了这段代码，但我不知道如何避免邪恶的 eval：

```
function GetProperties(object) {
    var result, property, t;
    result = '';
    for (property in object) {
        if (property.indexOf('Get', 0) === 0) {
            t = object[property] + "...";
            eval("if (GetNumOfParameter(t) == 0) var m = object." + property + "(); else var m = -100;");

            if (window.m != -100) {
                result += property + ': ' + window.m + '\r\n';
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:36:23.490

用下面的就好多了，`m`别的地方不用就不用了。

```
function GetProperties(object) {
    var result, property, t;
    result = '';
    for (property in object) {
        if (property.indexOf('Get', 0) === 0) {
            t = object[property] + "...";

            if (GetNumOfParameter(t) == 0) 
                result += property + ': ' + object[property]() + '\r\n';
        }
    }
    return result;
} 
```

# vb.net - VB.NET 文本框 KeyDown 事件未触发

> ID：10230272
> 
> 赞同：2
> 
> 时间：2012-04-19T14:27:34.607
> 
> 标签：vb.net, events, textbox, keydown

所以，

我在 tabcontrol 页面上有一个文本框，当有人跳出文本框时，它应该移动到下一个选项卡。在我将表单从 UserControl 切换到实际表单之前，这非常有效。此更改并未更改实际代码。

所以现在，我已经尝试了一切。我将文本框设置为 AcceptTab = True，并且我有 KeyPreview = False（因为如果表单在文本框之前抓取事件，我假设它会搞砸）。

这是我的文本框代码：

```
 Private Sub txtMsgDTG_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles txtMsgDTG.KeyDown

    'check for tabbed out
    If e.KeyCode = Keys.Tab Then
        'If the user tabs into this field after filling out the necessary fields ...
        If txtMsgDTG.Text = String.Empty Then
            'If the user left the field BLANK ...

            'Move to next page:
            TabControl1.TabPages(0).Enabled = True
            TabControl1.TabPages(1).Enabled = True
            TabControl1.TabPages(2).Enabled = False
            TabControl1.TabPages(3).Enabled = False
            TabControl1.TabPages(4).Enabled = False
            TabControl1.SelectedIndex = 1

        Else
            'If the user did NOT leave the field blank ...

            'validate message DTG
            Dim dtgCheck As String
            dtgCheck = ValidateDTG(txtMsgDTG.Text)
            If dtgCheck <> "valid" Then
                MsgBox(dtgCheck)
            Else
                'Move to next page:
                TabControl1.TabPages(0).Enabled = True
                TabControl1.TabPages(1).Enabled = True
                TabControl1.TabPages(2).Enabled = False
                TabControl1.TabPages(3).Enabled = False
                TabControl1.TabPages(4).Enabled = False
                TabControl1.SelectedIndex = 1

            End If

        End If

    End If

End Sub 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:12:08.900

快速修复：

```
txtMsgDTG.Multiline = True 
```

您可以保留的另一个修复`Multiline = False`是订阅 TextBox 的`PreviewKeyDown`事件：

```
Private Sub txtMsgDTG_PreviewKeyDown(ByVal sender As Object, ByVal e As PreviewKeyDownEventArgs) Handles txtMsgDTG.PreviewKeyDown
  If e.KeyCode = Keys.Tab Then
    e.IsInputKey = True
  End If
End Sub 
```

# java - 如何在另一个类的函数中访问一个类的变量？

> ID：10230274
> 
> 赞同：0
> 
> 时间：2012-04-19T14:27:38.313
> 
> 标签：java, class

我有一个类**Main**（它有**public static void main(String []args)**）和另一个类**MyDocument**。

Main 类中有一个变量`text`，我想从**MyDocument**类中的函数**alphabetOccurrence()访问它。**我该怎么做呢？我不想将它用作静态变量。并且只能在函数中进行任何更改，其余代码应保持不变。

 **```
import java.util.*;

class Main {
    public static void main(String[] args) {
        MyDocument document = null;
        String text;
        text = "good morning. Good morning Alexander. How many people are there in your country? Do all of them have big houses, big cars? Do all of them eat good food?";
        char letter = 'd';
        document = new MyDocument();
        document.setDocumentText(text);
        System.out.println("Letter " + letter + " has occured "
                + document.alphabetOccurrence(letter) + " times");
    }
}

class MyDocument {
    private ArrayList<Character> document = new ArrayList();

    public MyDocument() {
    }

    void setDocumentText(String s) {
        for (int i = 0; i < s.length(); i++)
            document.add(s.charAt(i));
    }

    ArrayList getDocumentText() {
        return this.document;
    }

    public int alphabetOccurrence(char letter) {
        // use text variable here..
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:31:17.677

您应该更改您的`MyDocument`课程以添加`String`要保存的新字段`text`：

```
import java.util.ArrayList;

class MyDocument {

    private String text;
    private ArrayList<Character> document = new ArrayList();

    public MyDocument() {
    }

    void setDocumentText(String s) {
        this.text = text;
        for (int i = 0; i < s.length(); i++)
            document.add(s.charAt(i));
    }

    ArrayList<Character> getDocumentText() {
        return this.document;
    }

    public int alphabetOccurrence(char letter) {

        this.text; //do something

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:36:35.123

您可以在函数中将变量文本作为参数传递

```
public int alphabetOccurrence(char letter, String text){
    String text2 = text;
    // use text variable here...
} 
```**

# java - Java 详细类加载

> ID：10230279
> 
> 赞同：70
> 
> 时间：2012-04-19T14:27:50.920
> 
> 标签：java, jvm, classloader

我试图列出 Java 类加载器加载我的类的顺序。如果我使用`-verbose`参数，它将列出它加载的每个接口/类，包括大量接口，如可序列化、异常等。有没有办法调整这个输出，所以它只显示在我的主方法定义的类中加载了哪些类?

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-19T14:33:41.947

我想你最好的选择是执行以下操作：

*   `main`一旦你的方法开始和结束之前输出一些固定的文本。
*   *将详细*输出通过管道传输到文件中
*   使用诸如*less*或*grep*之类的东西从 main 方法中查找在两个标签之间加载的类。

这里有一个类似的问题和一些答案：[Is there a way to get which classes a ClassLoader has load?](https://stackoverflow.com/questions/1432180/is-there-a-way-to-get-which-classes-a-classloader-has-loaded)

你试过了`-verbose:class`吗？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-03-24T22:57:40.730

这是一个 sed 表达式，它将解析 java -verbose:class 的输出以生成成对的加载类名及其 jar 文件。您可以通过排序进一步获取唯一的 jar 文件。例如，

```
java -verbose:class -version 2>/dev/null |
  sed -ne 's/\[Loaded \(.\+\) from \(.\+\)\]/\2/p' | 
  sort -u 
```

输出

```
/usr/local/jdk1.7.0_67/jre/lib/rt.jar 
```

# php - 在黑莓中使用 PHP 推送通知

> ID：10230281
> 
> 赞同：2
> 
> 时间：2012-04-19T14:27:55.730
> 
> 标签：php, blackberry, push-notification, blackberry-webworks

我在 Webworks 中开发，需要在将新条目添加到我们的数据库时将通知推送到主屏幕。服务器上有一个 PHP 文件，它将条目添加到数据库中。我如何将 PHP 文件链接到推送功能？

我一直在查看[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-Create-a-Push-BlackBerry-](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-Create-a-Push-BlackBerry-) ... 试图了解推送，但我我大部分时间都不精通Java，所以我不明白那部分。理想情况下，我只需要推送一个数字，表明有多少通知。例如：

**PHP文件添加3个条目->推送数字“3”->我的应用程序的listener.html文件接收到“3”并执行blackberry.app.showBannerIndicator('images/icon.png', "3") ;**

我看过[PHP - Push Notifications](https://stackoverflow.com/questions/5452779/php-push-notifications)，但我认为这不是我想要的。有人知道该怎么做吗？谢谢。

# javascript - 我的 javascript 文件中的有趣字符

> ID：10230282
> 
> 赞同：0
> 
> 时间：2012-04-19T14:27:56.393
> 
> 标签：javascript, visual-studio-2010

这个字符 (ï»¿) 被添加到我的 javascript 文件中。我正在使用 Visual Studio 2010。有人遇到过这个问题吗？

此链接解释了我的问题和解决方案 [http://forums.silverlight.net/t/144306.aspx](http://forums.silverlight.net/t/144306.aspx) 干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:31:15.547

js 文件被编码为 UTF-8，并有一个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)(BOM) 来标识它。

只要您将文件提供为 UTF-8，这应该不是问题。

如果页面尚未使用`meta`内容类型设置为 UTF-8 的标记，您可以将此信息添加到脚本元素，如下[所述](http://www.highdots.com/forums/javascript/utf-8-javascript-files-298761.html)：

```
<script src="js.js" type="text/javascript" charset="utf-8"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T08:42:17.873

添加的字符是 BOM 字符，不建议用于 utf-8。默认情况下，Visual Studio 使用“Unicode(UTF-8 with signature)- Codepage 65001”编码保存 javascript 文件，此编码在文件开头添加 UTF-8 字节顺序标记。ie9 和 chrome 没有问题，但 firefox、opera 和 safari 完全崩溃....

所以要修复它，请遵循本文档中的解决方案

[http://forums.silverlight.net/t/144306.aspx](http://forums.silverlight.net/t/144306.aspx)并选择编码选项“Unicode(UTF-8 without signature)- Codepage 65001”。

希望这可以帮助。

干杯

# android - android - 在 Listview 中拖放

> ID：10230283
> 
> 赞同：2
> 
> 时间：2012-04-19T14:27:56.600
> 
> 标签：android, drag-and-drop

我是拖放功能的新手。请提供简单的教程。我看到了一些拖放功能从 3.0 及更高版本开始的地方。是否有可能在以下版本中使用？我想在列表视图中使用拖放功能。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:35:37.083

您可以将拖放功能与支持包一起使用。

所有细节都在这里：http: [//developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

在这里：http: [//developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

# jquery - 如何不让在 jquery datebox 中选择较旧的月份

> ID：10230284
> 
> 赞同：0
> 
> 时间：2012-04-19T14:28:02.993
> 
> 标签：jquery, jquery-mobile

我有以下 HTML 代码

`<input type="date" value="" id="startDate" name="startDate" class="texto" data-role="datebox" data-options='{"mode": "calbox"}' readonly/>`

我想让提前从实际日期中选择一个日期。如何删除以前的月份和年份？例如，如果实际日期是 4 月，则用户将没有“上个月”按钮来转到上个月以选择 3 月的某一天……

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:31:45.243

查看[http://dev.sainte-marine.org/mobile-datebox/demos/android/#/mobile-datebox/demos/android/limit.html](http://dev.sainte-marine.org/mobile-datebox/demos/android/#/mobile-datebox/demos/android/limit.html)并告诉我们您是否正在寻找

# jquery-ui - Jquery UI 对话框 - PLUPLOAD：Plupload 不适用于 jquery ui 对话框

> ID：10230286
> 
> 赞同：0
> 
> 时间：2012-04-19T14:28:14.457
> 
> 标签：jquery-ui, plupload

我在尝试使用**plupload**和**jquery ui dialog**上传时遇到问题。

我有一个用 jqueryui 构建**的模态对话框，并且我在其中添加了一个 plupload 布局。**

但是当我用 Firefox 尝试它时，它会打开 me 2 对话框，而用 Safari 则它不起作用。

我已经看到生成的代码，我已经看到在 Firefox 中我有 2

```
<div id="p16r5em3ep2gmrvk1ad335d1sae0_html5_container" style="position: absolute; background: none repeat scroll 0% 0% transparent; width: 0px; height: 0px; overflow: hidden; z-index: -1; opacity: 0; top: 0px; left: 0px;" class="plupload html5">
      <input type="file" multiple="multiple" accept="" style="font-size: 999px; position: absolute; width: 100%; height: 100%;" id="p16r5em3ep2gmrvk1ad335d1sae0_html5">
    </div> 
```

而第二个

```
<div id="p16r5em3i11ila2j0b91i163s44_html5_container" style="position: absolute; background: none repeat scroll 0% 0% transparent; width: 0px; height: 0px; overflow: hidden; z-index: -1; opacity: 0; top: 0px; left: 0px;" class="plupload html5">
        <input type="file" multiple="multiple" accept="" style="font-size: 999px; position: absolute; width: 100%; height: 100%;" id="p16r5em3i11ila2j0b91i163s44_html5">
    </div> 
```

对于 Safari，我有...

```
<div id="p16r5fjomdg751e101jao122t12gd0_html5_container" style="position: absolute; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: transparent; overflow-x: hidden; overflow-y: hidden; opacity: 0; top: 0px; left: 0px; width: 0px; height: 0px; z-index: -1; background-position: initial initial; background-repeat: initial initial; " class="plupload html5">
    <input id="p16r5fjomdg751e101jao122t12gd0_html5" style="font-size: 999px; position: absolute; width: 100%; height: 100%; " type="file" accept="" multiple="multiple">
</div> 
```

而第二个

```
<div id="p16r5fjong1g231iqm10sq1jte1nc34_html5_container" style="position: absolute; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: transparent; overflow-x: hidden; overflow-y: hidden; opacity: 0; top: 0px; left: 0px; width: 0px; height: 0px; z-index: -1; background-position: initial initial; background-repeat: initial initial; " class="plupload html5">
         <input id="p16r5fjong1g231iqm10sq1jte1nc34_html5" style="font-size: 999px; position: absolute; width: 100%; height: 100%; " type="file" accept="" multiple="multiple">
</div> 
```

但一切都不是正确的。

**请注意**，如果**我不使用模态对话框，它可以工作**......

**编辑** 我使用此代码来初始化 plupload

```
var uploader = new plupload.Uploader ({
        runtimes: 'html5,flash',
        container:'container',
        drop_element:'upDropArea',
        browse_button: 'upBrowseButton',
        url: 'url&action=action',
        flash_swf_url: '/lib/plupload/js/plupload.flash.swf',
        multipart: true,
        urlstream_upload:true,
        resize : {quality : 60},
        multiple_queues: true,

        filters : [
                   {title: 'Images', extensions: 'jpg,gif,png,jpeg'}
        ]

    }); 
```

任何的想法？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:23:56.957

您不必将 plupload 小部件初始化到 jQuery UI 模式对话框中，当您在脚本中的其他位置初始化它时它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T15:14:16.220

我最近通过在 jQuery UI 对话框的“打开”函数回调中编码 plupload 对象，在 jQuery UI 对话框中实现了**pluploadQueue插件：**

```
$("#plupload-dialog").dialog({
   autoOpen: false,
   modal: false,  // change this to true for modal, but haven't tested yet
   open: function(event, ui) {
       $("pluploader").pluploadQueue({
           runtimes: '', // add your runtimes here
           url: '',  // add your URL here
           flash_swf_url: '', // path to shockwave component
           silverlight_xap_url: '', // path to silverlight component
           max_file_size: '', // file size option
           filters: [], // filter options
           preinit: {  // preinit callbacks - note do not include separate init for pluploadQueue
               Init: function(up, info) {
               },
               UploadFile: function(up, file) {
               },
               Error: function(up, args) {
               }
           } 
       });
   }
}); 
```

不确定这是否会有所帮助，但也许值得一试。

# bash - 如何使用一行 bash 和可能的 & 符号将两个程序分叉到后台？

> ID：10230288
> 
> 赞同：9
> 
> 时间：2012-04-19T14:28:17.960
> 
> 标签：bash, background-process

我有两个无限期运行的程序。我知道我可以将一个分叉到后台，然后通过在命令行中键入以下命令来运行另一个：

```
> program1 &
> program2 & 
```

但是，我很懒，不想按 Enter，我只想立即运行它们。但是当我这样做时 bash 会抱怨：

```
> program1 &; program2 & 
```

我怎样才能同时运行它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T14:36:54.753

你省略了';' 字符，即

```
 program1 &  program2 & 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T19:39:13.397

尝试

```
(program1 &) ; (program2 &) 
```

# bash - Java 命令在 bash 上运行，在 zsh 上失败

> ID：10230293
> 
> 赞同：2
> 
> 时间：2012-04-19T14:28:32.340
> 
> 标签：bash, shell, java, zsh

考虑以下使用完美运行的命令`bash`：

```
java -classpath bin:lib/* FunctionalTests.TestRunner 
```

类在`bin`，罐子在`lib`，`main()`在`bin/FunctionalTests/TestRunner`：

```
.
├── bin
├── lib
│   ├── commons-collections-3.2.1.jar
│   ├── commons-httpclient-3.1.jar
│   ├── commons-io-2.1.jar
│   ├── commons-lang-2.4.jar
│   ├── commons-logging-1.1.1.jar
│   └── ...
└── src 
```

当使用 运行相同的命令时`zsh`，输出为：

```
zsh: no matches found: ./bin:./lib/* 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T14:36:26.617

它归结为另一对报价：

```
java -classpath "bin:lib/*" FunctionalTests.TestRunner 
```

希望它对将来的人有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T14:36:13.417

尝试使用类似的方法在类路径中添加每个 .jar：

```
CP=bin
for i in lib/*.jar
do
  CP=$CP:${i}               
done
java -classpath $CP FunctionalTests.TestRunner 
```

# linux - 我应该如何找到几个可能字符的索引？

> ID：10230294
> 
> 赞同：1
> 
> 时间：2012-04-19T14:28:35.007
> 
> 标签：linux, perl

我意识到问题名称并不能说明太多，但我真的不知道如何简短地解释它，所以这里是长版本。

首先，这是我当前的代码：

```
#! /usr/bin/perl

use strict;
use warnings;

my $input;
while (<>) {
        $input .= $_;
}
$input =~ s/ |\n//g;

print "\n"; 
```

我想做的是做一个计算器，例如当用户这样做时，`echo "8 * 5 + 21-15" | calculate`它会正确计算。所以这是我的思想进展。首先，我将字符串作为一个整体并将其去除所有空白字符。然后我想索引（）它是否出现*，+，/或-。然后我想将任何这些运算符之前的所有字符添加到字符串，然后（int）字符串，然后对运算符之后的部分执行相同操作，然后在它们之间进行操作。但我实际上并没有太多关于如何做到这一点的线索。另外，我对 Perl 很陌生（3 天经验），所以如果可能的话，请慢慢来。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:49:10.463

If you can accept that your calculator won't be able to handle parenthesis, use a regular expression to parse the string for you:

```
#!/usr/bin/env perl
use strict;
use warnings;

my @tokens = <STDIN> =~ /(\d+|\+|-|\*|\/)/g;
print "$_\n" for @tokens; 
```

this will provide you with an array of tokens that you can work on, so

```
echo "8 * 5 + 21-15" | script.pl 
```

will print

```
8
*
5
+
21
-
15 
```

Now it's up to you to write some code that does the right calculations on the tokens. It isn't too hard if you don't try parsing parens, but if you do, you'll need to write a recursive parser, which is much harder.

# objective-c - 双打目标 c 数组

> ID：10230305
> 
> 赞同：5
> 
> 时间：2012-04-19T14:29:11.383
> 
> 标签：objective-c, arrays, nsmutablearray, double

有没有类似的东西`NSMutableArray`会直接拿双打而不把它们放在里面`@""`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T14:30:40.827

您只能将对象放入`NSMutableArray`. 但是你可以像这样包裹你的双打`NSNumber`：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:0];
[array addObject:[NSNumber numberWithDouble:0.12345]];
[array addObject:[NSNumber numberWithDouble:5.43210]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:35:12.927

您只能将对象插入 NSMutableArray。幸运的是，有一个类 NSNumber，用于将 Objective-C 原语包装为对象。您可以使用 doubleValue 方法来获取原始值。

例如：

```
NSMutableArray *numArray = [[NSMutableArray alloc]initWithObjects:[NSNumber numberWithDouble:1.1f], nil];
double num = [[numArray objectAtIndex:0]doubleValue]; 
```

# html5-canvas - 使用音频及时更改文本（或其他元素）颜色

> ID：10230306
> 
> 赞同：0
> 
> 时间：2012-04-19T14:29:13.320
> 
> 标签：html5-canvas, html5-audio, soundcloud, soundmanager2

好的，我正在为希望通过 soundcloud 播放曲目的音乐家设计一个网站（以便他可以更新它们）。

对于他的网站，我在页面中央用大红色书写了客户名称。我想要做的是让每个字母随着正在播放的任何曲目的脉冲及时从红色变为黑色（然后又变回来）。除了知道我可能需要使用 HTML5 画布元素和 SoundManager2 之外，不知道从哪里开始这个项目。

感谢您的想法和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:26:11.710

您可以将 soundManagers eqData 或 peakData 与 whileplaying 结合使用来计算脉冲效果： [http ://www.schillmania.com/projects/soundmanager2/doc/#smsound-peakdata](http://www.schillmania.com/projects/soundmanager2/doc/#smsound-peakdata)

正如您所说，您可以使用画布制作脉冲效果或使用简单的 CSS 文本阴影。

# c++ - 在 C++ 中为包含对象数组的对象数组释放内存的正确方法

> ID：10230309
> 
> 赞同：1
> 
> 时间：2012-04-19T14:29:20.527
> 
> 标签：c++, memory, free

我有这样的事情：

```
class HashTable
{  
  Bucket<E>** index;
  ...
}

 ~HashTable( ) 
 {
     delete[] index;
 }

 class Bucket
 {
    E* elements
    ...
 }

 ~Bucket( ) 
 {
     delete[] elements;
 } 
```

在这种情况下如何正确释放内存？

delete[] 索引是否足够，还是我必须循环遍历所有 Bucket-Objects 并单独删除 elemtents-array？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:30:52.480

如果您使用 单独分配每个存储桶对象`new`，则应使用`delete`.
简单的规则是：
您应该分别拥有尽可能多的数量或`delete`数量。`delete[]``new``new[]`

建议：
您可以通过使用智能指针来帮自己一个忙，让自己免于此类内存管理问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:34:45.180

HashTable 包含一个双数组（我想），因此必须像这样删除它：

```
delete[] index[0];
delete[] index[1];
...
delete[] index; 
```

如果这些级别中的任何一个不是数组，而是单个指针，则省略`[]`.

`Bucket`正如你所写的那样，这个类很好，它会自动删除它的数组和其中的`E`'s。

# objective-c - 使用 UISegmentedControl 通过 NSUserDefaults 保存 mapKit 首选项 - 无法正常工作

> ID：10230310
> 
> 赞同：0
> 
> 时间：2012-04-19T14:29:21.050
> 
> 标签：objective-c, ios, nsuserdefaults, uisegmentedcontrol

我有一个带有 3 个选项的分段控件，用于在 NSUserDefaults 中保存标准/卫星/混合地图。我遇到的一个问题是，每当重新访问 mapSettingsViewController 时，分段控件就会变回第一段。另一个问题是 mapViewController 不会在 viewWillAppear 上重新加载。

我正在使用带有 Storyboard 的 pageCurl 模态转换 - 不确定这是否重要。

这是设置视图控制器（mapSettingsViewController）中保存分段选择的代码：

```
 - (IBAction)changeMapType: (id)sender{

    NSInteger index = ((UISegmentedControl*)sender).selectedSegmentIndex;

    // Get the shared defaults object.
    NSUserDefaults *mapUserPreferences = [NSUserDefaults standardUserDefaults];

    if(segmentedControlMapType.selectedSegmentIndex == 0){
        // Save the index.
    [mapUserPreferences setInteger:index forKey:@"mapViewKey"];

    }
    else if(segmentedControlMapType.selectedSegmentIndex == 1){
        // Save the index.
        [mapUserPreferences setInteger:index forKey:@"mapViewKey"];
    }
    else if(segmentedControlMapType.selectedSegmentIndex == 2){
        // Save the index.
        [mapUserPreferences setInteger:index forKey:@"mapViewKey"];

    }

    // Write them to disk
    [mapUserPreferences synchronize];
} 
```

然后在第一个视图控制器（mapViewController）中显示对用户选择的段的地图的更改。我将代码放在 viewWillAppear 中，因此每次出现视图时都会重新加载地图。

```
 -(void) viewWillAppear:(BOOL)animated {

    // Get the settings and set the selected index.
    NSUserDefaults *mapUserPreferences = [NSUserDefaults standardUserDefaults];
    if([mapUserPreferences integerForKey:@"mapViewKey"] == 0) {
        mapView.mapType = MKMapTypeStandard;
    }
    if([mapUserPreferences integerForKey:@"mapViewKey"] == 1) {
        mapView.mapType = MKMapTypeSatellite;
    }
    if([mapUserPreferences integerForKey:@"mapViewKey"] == 2) {
        mapView.mapType = MKMapTypeHybrid;
    }

} 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:49:36.443

我不知道你为什么这样做：

```
if(segmentedControlMapType.selectedSegmentIndex == 0){
// Save the index.
[mapUserPreferences setInteger:index forKey:@"mapViewKey"]; 
```

在 IBAction 中，您从 (id)sender 获取事件。

你为什么不把：

```
if((UISegmentedControl*)sender.selectedSegmentIndex == 0) 
```

也许我走错了路，但是您正在与分段控件的 2 个不同实例对象交谈。

它是什么？分段控制映射类型

和发件人一样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:50:12.970

要检查，当 modalView (pageCurl) 被解除时，只需将委托方法添加到您的 pageCurl 控制器：

```
viewWillDisappear: 
```

然后在那里添加地图更新逻辑。

# mysql - MySQL 从 .dat 文件恢复数据

> ID：10230311
> 
> 赞同：1
> 
> 时间：2012-04-19T14:29:21.347
> 
> 标签：mysql, backup, database-restore

我删除了我的数据库，客户服务给我发回了一个 .dat 文件，但他们的指示很糟糕。

他们说将（db_backup.dat）文件放在mysql/data文件夹中，然后导出到sql来恢复数据。任何人都可以在这里帮助如何做到这一点，该文件不是一个带有 sql 命令的文本文件，它只是很多不可读的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:38:29.320

我假设 .dat 文件是一个文本文件。

```
mysql -u root -p password < db_backup.dat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T08:17:49.460

看起来他们本可以向您发送裸数据文件，您应该将其放入 mysql 文件夹并重新启动 mysql 服务器。

如果他们向您发送了裸 DB 文件，您应该询问客户服务是哪种格式。它可以是 MyISAM 或 InnoDB 文件。如果他们告诉您格式，您应该创建一个名为 的格式的新数据库`db_backup`，然后找到您的 mySQL 实例保存文件的位置，停止服务器，将您从 CS 获取的文件放入该文件夹，替换现有文件并再次启动服务器。

最后，您可以从 Notepad++ 发布文件的前几行或屏幕截图吗？

PS 以上都是猜测，直到您发布文件头或文件格式。

# c++ - 使用 C++ 预处理器的大写字母 (x -> getX/setX)

> ID：10230313
> 
> 赞同：6
> 
> 时间：2012-04-19T14:29:33.037
> 
> 标签：c++, c-preprocessor

我想定义一些属性，例如：

```
#define property(T, x) T x; T get ## x (); void set ## x (T value);

class foo { 
public: 
  property(int, count);
  property(float, size);
} 
```

但我希望方法被称为 getCount/setCount 而不是 getcount/setcount。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:43:39.290

正如评论所说，你不能那样做。预处理器不做那些事情。

因此，您要么遵循@Shahbaz 在第一条评论中所说的内容，要么做类似的事情，让您得到、设置`get_count`和`set_count`形成。

```
#define property(T, x) private : T m_## x; \
public : T get_## x () { return m_## x;} \
void set_## x (T value) { m_## x = value; }

class foo { 
public: 
  property(int, count);
  property(float, size);
};

int main() {
        foo f;
        f.set_count(10);
        std::cout << f.get_count() << std::endl;
        return 0;
} 
```

[ideone 的快速演示](http://ideone.com/glvrU)

请注意，变量是在`private`节中声明的，其名称是`m_count`，并且函数在节中*定义*（不仅是*声明*的）`public`。

或者，您可以通过`Count`而不是`count`在宏中传递：

```
 property(int, Count); 
```

如果你这样做，那么你可以创建变量 as`m_Count`和函数 as`getCount`和`setCount`。这是最接近你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:42:39.303

没有办法（据我所知）使用 C 预处理器来做到这一点。我建议作为一种折衷方案，您选择下划线并使用`get_count()`易于阅读的内容。其他选择：

*   如果您真的想坚持使用预处理器，您可以`m4`作为第一步进行调查。这绝对是可能的，`m4`因为我做了一些非常相似的事情。也就是说，对于您想要实现的目标来说，这似乎有点复杂。
*   添加一个额外的参数，以便您可以`#define property(T, x, name)`单独指定名称。它更灵活，但又可能不是您想要的。
*   如果它真的只是创建访问器/修改器的跑腿工作，那么有很多 IDE 和代码生成器可以为您完成它，或者您可以编写一些 shell / Python / Perl 来轻松地将它作为一个整体来解决。

最后的两个观察：虽然这样写似乎更有效，但请记住，任何维护您的代码的人都可能会搜索`setCount()`但找不到它，这会浪费时间，直到他们弄明白您做了什么。即从代码维护的角度来看，**保持简单**。其次，用大写表示宏是一种很好的做法，因为这样很容易识别它们。同样，这在您维护代码时确实很有帮助。

# python - 查询基于位的值

> ID：10230314
> 
> 赞同：0
> 
> 时间：2012-04-19T14:29:33.507
> 
> 标签：python, database, python-2.7, pytables

我有一个问题如何从 pytables 中获取值。值是基于位的，但存储为整数。

我表中的一列是`Int32Column()`name `'Value'`。在本专栏中，我将存储整数值，其中每一位都具有不同的含义。因此，如果我想要一些信息，我将从表中获取值并进行一些位操作操作。我不知道如何查询以从表中获取指定值。

例如，我想知道`Value`第一位 == 1 和第三位 ==1 的列中的所有值。

如何进行该查询？我正在尝试使用面具：

```
[ x['Value'] for x in table.where('((Value & mask) == mask)')] 
```

但是，我得到了例外：

```
NotImplementedError: unsupported operand types for \*and\*: int, int 
```

处理查询必须非常快，因为将来会有大量行。一个限制是值必须是表中的 int 值，因为我从服务器获取 int 格式的值。我希望有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:00:39.903

备查。

我有一个类似的问题并通过以下方式解决了它。由于通常的按位运算符 (<<, >>) 不可用并且 &, | 的含义 运算符是合乎逻辑的，而不是按位计算，必须即兴发挥。

要检查值 VAL 是否设置了第 n 位，我们可以将感兴趣的位移动到第 0 位，这表示数字的奇偶性 (2**0)。可以使用模运算符检查奇偶校验。因此，可以执行类似检查，例如，第 25 位是否已设置而 16 位是否未设置。

```
table.where("((VAL/(2**25))%2==1) & ((VAL/(2**16))%2==0)") 
```

不优雅，但现在工作。

# javascript - Facebook javascript api 和 iPad、Android

> ID：10230315
> 
> 赞同：3
> 
> 时间：2012-04-19T14:29:37.810
> 
> 标签：javascript, facebook, mobile

我尝试使用来自 facebook javascript SDK 的 FB.login 方法。在桌面浏览器上一切正常。但我对 iPad 和 Android（摩托罗拉 xoom）有疑问。

```
unable to post message to recipient has origin www.facebook.com 
```

如何解决？

我正在尝试向用户墙发布消息

```
FB.login(function(response) {
           if (response.authResponse) {
             log("Info: login successfully");
             fbPublish();
           } else {
             log('User cancelled login or did not fully authorize.');
           }
         }); 
```

当在 fbPublish

```
function fbPublish(){
        log("Debug: fbPublish");
        FB.ui({
          method: "stream.publish",
          attachment: {
             name: uatitle.format(myChoice.question, myChoice.answer),
             href: document.location.href,
             media:[{"type":"image","src":"http:.....","href":document.location.href}]
          },
          action_links: [{ text: 'Vote yourself', href: document.location.href }]
         },
         function(response) {
           if (response && response.post_id) {
             log('Post was published.');
           } else {
             log('Post was not published.');
           }
         }
        );
    } 
```

所以，正如我在桌面上所说的，一切正常/新帖子已成功发布。但我在移动设备上遇到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:26:59.587

您可能应该尽快离开 stream.publish，因为它将成为历史并开始使用图形 API 进行发布。

发布看起来像这样，

```
var params = {};
params['message'] = 'Message';
params['name'] = 'Name';
params['description'] = 'Description';
params['link'] = 'http://apps.facebook.com/my-app/';
params['picture'] = 'my-site';
params['caption'] = 'Caption';

FB.api('/me/feed', 'post', params, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Published to stream !');
  }
}); 
```

希望这可以帮助

# simplepie - 如何使用 Simplepie 添加“加载更多”RSS 提要功能

> ID：10230317
> 
> 赞同：0
> 
> 时间：2012-04-19T14:29:48.343
> 
> 标签：simplepie

我正在尝试向我的网站添加“加载更多”RSS 提要按钮功能。我目前正在使用 Simplepie 将博客文章从我的 WP 博客站点拉入我的主站点。它工作得很好，我已将 $max_items 设置为 3，但我似乎找不到任何关于如何使用 Simplepie 添加“加载更多”按钮的教程或文档。

我一直在互联网和 Simplepie 文档中搜索，但我仍然无法找到有关此问题的任何内容。

有人可以帮助我或指向我的教程吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:36:14.487

“加载更多”功能是[News Blocks Demo 2.0](http://simplepie.org/wiki/tutorial/how_to_replicate_popurls)的一部分。许多 RSS 提要仅提供有限数量的帖子或仅考虑按时间顺序最近的帖子。我认为标准中没有任何内容可以让您只说“给我更多”。News Blocks 的工作方式是获取尽可能多的帖子，然后只显示第一个 X，当您单击“更多”时，它会显示其余的。祝你好运。

# ruby - Google-api 和令牌或我如何获取 google 附属广告客户列表的令牌（红宝石）

> ID：10230323
> 
> 赞同：1
> 
> 时间：2012-04-19T14:30:11.243
> 
> 标签：ruby, rubygems, google-api, google-api-client

我尝试从 GAN（在 ruby​​ 应用程序中）获取我的广告商列表，所以我需要首先获得一个令牌。

我尝试了很多方法，包括红宝石，但没有得到它。

有人知道如何获得这个令牌的确切方法吗？

# apache-flex - 如何将 3 位 HTML 十六进制颜色转换为 6 位 flex 十六进制颜色

> ID：10230331
> 
> 赞同：29
> 
> 时间：2012-04-19T14:30:51.133
> 
> 标签：apache-flex, colors, hex

我想将来自 HTML CSS 的三位十六进制颜色转换为 Flex 的六位十六进制颜色。谁能给我代码将 3 位十六进制颜色转换为 6 位等效值？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-19T14:52:01.537

通过将每个数字加倍来扩展三位十六进制颜色（参见[w3 规范](http://www.w3.org/TR/2001/WD-css3-color-20010305#colorunits "w3 规范")）。所以`#F3A`扩展为`#FF33AA`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T14:48:18.957

将每个数字加倍：例如`#A21`等于`#AA2211`。

但是这个问题是重复的：[转换为 3-digit hex color code](https://stackoverflow.com/questions/1459273/3-digit-hex-color-code)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-08T14:52:32.777

其他答案提供了该过程，但我将使用正则表达式和 java 编程语言提供代码

```
String value = "#FFF";
value = value.replaceAll("#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])", "#$1$1$2$2$3$3"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-11T00:16:22.527

如果您来到这里并使用 Python，请执行以下操作：

```
hex_code = '#FFF'
new_hex_code = '#{}'.format(''.join(2 * c for c in hex_code.lstrip('#'))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-27T16:12:20.577

Kotlin 版本的 Ovokerie 的回答：

```
shortHexString.replace(Regex("#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])"), "#$1$1$2$2$3$3") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-28T18:59:18.367

PHP版本：

```
 /**
 * returns a clean 6 digit hex number as a string
 * @param $hex
 * @return false|string
 */
function clean_hex_color($hex)
{
    $hex = strtolower($hex);
    //remove the leading "#"
    if (strlen($hex) == 7 || strlen($hex) == 4)
        $hex = substr($hex, -(strlen($hex) - 1));

    // $hex like "1a7"
    if (preg_match('/^[a-f0-9]{6}$/i', $hex))
        return $hex;
    // $hex like "162a7b"
    elseif (preg_match('/^[a-f0-9]{3}$/i', $hex))
        return $hex[0] . $hex[0] . $hex[1] . $hex[1] . $hex[2] . $hex[2];
    //any other format
    else
        return "000000";
} 
```

# sql - SQL动态创建参数xml

> ID：10230335
> 
> 赞同：0
> 
> 时间：2012-04-19T14:30:59.877
> 
> 标签：sql, xml, parameters

有没有办法查询传递给存储过程的参数并将它们作为 XML 返回，而无需创建参数字符串然后将其转换为 xml？我正在寻找通用的东西，它适用于大多数 SP，而不必每次都对其进行物理编码？

我有一堆存储过程可以访问和修改验证特定信息。在 SP 的末尾，我想将 SP 的名称以及用于调用 SP 的参数（以 xml 格式）插入到日志记录表中。我知道如何获取 SP 的名称，也知道如何获取 SP 的参数列表。我想要的是一种将其与传递的参数的实际值一起混入 XML 的方法。

我正在寻找可以做到这一点的东西，而无需手动编码每个参数：

```
DECLARE @L_Data varchar(1500)
SET @L_Data = '<parms>' + 
CASE WHEN @ParamRegStationID IS NULL THEN ''
ELSE ',@ParamRegStationID=''' + Convert(varchar, @ParamRegStationID) + '''' END +
CASE WHEN @ParamScheduleID IS NULL THEN '' 
ELSE ',@ParamScheduleID=''' + Convert(varchar, @ParamScheduleID) + '''' END +
CASE WHEN @ParamPatientID IS NULL THEN '' 
ELSE ',@ParamPatientID=''' + Convert(varchar, @ParamPatientID) + '''' END +
CASE WHEN @ParamHISPatientID IS NULL THEN '' 
ELSE ',@ParamHISPatientID=''' + @ParamHISPatientID + '''' END +
CASE WHEN @ParamEvent IS NULL THEN '' 
ELSE ',@ParamEvent=''' + @ParamEvent + '''' END +
'</parms>' 
```

这是行不通的，也没有我希望的那么优雅。但是，这是一个示例，说明了我最终要达到的目标。它会创建临时表，但不会将参数作为列添加到其中，因此我可以稍后将其提取为 XML。

```
 ALTER PROC uspTest
    @ParamID as bigint=null,
    @ParamXYZ as varchar(255)=null
as

-- PROC Does whatever it is going to do ....

DECLARE @ProcName varchar(128), @ParmName varchar(128), @ParmType varchar(128), @ParmLen int, 
@ParmSQL varchar(1000)
select @ProcName=OBJECT_NAME(@@PROCID)
--select * from INFORMATION_SCHEMA.ROUTINES where ROUTINE_TYPE='PROCEDURE' and ROUTINE_NAME=@ProcName
DECLARE csrParms CURSOR
FOR 
select PARAMETER_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH from INFORMATION_SCHEMA.PARAMETERS where SPECIFIC_NAME=@ProcName and PARAMETER_MODE='IN' 
ORDER BY ORDINAL_POSITION
FOR READ ONLY

OPEN csrParms
FETCH NEXT FROM csrParms
INTO @ParmName, @ParmType, @ParmLen

CREATE TABLE #Parms(ID int identity(1,1), Created DateTime)
INSERT INTO #Parms select GETDATE()

WHILE @@FETCH_STATUS = 0
BEGIN
-- GET Parm value and format as xml attribute to save parm
SET @ParmSQL = 'ALTER TABLE #Parms add ' + @ParmName + ' varchar(' + CAST(ISNULL(@ParmLen, 128) as varchar(128)) + ') NULL '
print @ParmSQL
EXEC (@ParmSQL)
SET @ParmSQL = 'UPDATE #Parms SET ' + @ParmName + ' = ''????''' 
print @ParmSQL
--EXEC (@ParmSQL)
FETCH NEXT FROM csrParms
INTO @ParmName, @ParmType, @ParmLen
END

SET @ParmSQL = CAST((select * from #Parms FOR XML RAW) as varchar(1000))
select @ParmSQL

CLOSE csrParms
DEALLOCATE csrParms 
```

这与我要找的很接近，我需要知道如何更换 ??? 虽然动态地使用参数的当前值。

```
 ALTER PROC uspTest
    @ParamID as bigint=null,
    @ParamXYZ as varchar(255)=null
as

-- PROC Does whatever it is going to do ....

DECLARE @ProcName varchar(128), @ParmName varchar(128), @ParmType varchar(128), @ParmLen int, 
@ParmSQL varchar(1000)
select @ProcName=OBJECT_NAME(@@PROCID)
--select * from INFORMATION_SCHEMA.ROUTINES where ROUTINE_TYPE='PROCEDURE' and ROUTINE_NAME=@ProcName
set @ParmSQL = 
'    CREATE TABLE #Parms(ID int identity(1,1), Created DateTime, ' + 
    STUFF((select (', ' + REPLACE(PARAMETER_NAME,'@','') + ' varchar(' + CAST(ISNULL(CHARACTER_MAXIMUM_LENGTH, 128) as varchar(128)) + ') NULL ')
     from INFORMATION_SCHEMA.PARAMETERS where SPECIFIC_NAME='uspTest' and PARAMETER_MODE='IN' 
     order by ORDINAL_POSITION for XML path(''), type).value('.', 'varchar(max)'), 1, 2, '')
+ '); 
' + 'INSERT INTO #Parms (Created) select GETDATE(); ' + STUFF((select ('; 
UPDATE #Parms SET ' + REPLACE(PARAMETER_NAME,'@','') + ' = ''???''')
     from INFORMATION_SCHEMA.PARAMETERS where SPECIFIC_NAME='uspTest' and PARAMETER_MODE='IN' 
     order by ORDINAL_POSITION for XML path(''), type).value('.', 'varchar(max)'), 1, 2, '')
+ '; 
select CAST((select * from #Parms FOR XML RAW) as varchar(1000));'

print @ParmSQL
EXEC (@ParmSQL) 
```

当我执行proc时：

```
EXEC uspTest 1, 'test' 
```

回报：

> <row ID="1" Created="2012-04-20T09:44:43.700" ParamID="???" 参数XYZ="???"/>

打印出来：

```
CREATE TABLE #Parms(ID int identity(1,1), Created DateTime, ParamID varchar(128) NULL , ParamXYZ varchar(255) NULL ); 
INSERT INTO #Parms (Created) select GETDATE(); 
UPDATE #Parms SET ParamID = '???'; 
UPDATE #Parms SET ParamXYZ = '???'; 
select CAST((select * from #Parms FOR XML RAW) as varchar(1000)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:10:16.477

这是 SQL Server 2000 还是更高版本？如果是这样，您可以使用 FOR XML 子句：

```
DECLARE @p1 varchar(100) = 'blah'
    , @p2 int = 1
    , @p3 datetime2(7) = '2011-01-01 13:41'
    ;

SELECT @p1 StringParm
    , @p2 IntParm
    , @p3 DateParm
FOR XML RAW 
```

返回：

```
<row StringParm="blah" IntParm="1" DateParm="2011-01-01T13:41:00"/> 
```

**编辑**

啊，问题在于您需要将参数列表以及值（本地的）解析为动态 SQL（它们超出范围）。

我想您可以使用 INFORMATION_SCHEMA.PARAMETERS 动态列出参数和 dbcc_inputbuffers 以获取传递的实际值。就像是：

```
create procedure junk
    (   @int INT 
        , @string VARCHAR(20) 
        , @date DATE 
    )
AS 
BEGIN
    DECLARE @tmp TABLE
        (   EventType NVARCHAR(30)
            , PARMS INT
            , Info NVARCHAR(2000)
        );

    DECLARE @object NVARCHAR(200);

    INSERT INTO @tmp
    EXEC('DBCC INPUTBUFFER(@@SPID) WITH NO_INFOMSGS');

    SELECT INFO
        , 'Call' lType
    FROM @tmp
    UNION 
    SELECT STUFF(
        (   SELECT ', ' + parameter_name
            FROM INFORMATION_SCHEMA.PARAMETERS 
            WHERE SPECIFIC_NAME = OBJECT_NAME(@@procid)
            ORDER BY ORDINAL_POSITION
            FOR XML PATH('')
        )
        , 1
        , 2
        , ''
        )
        , 'Parms';
END 
```

现在这样：

```
exec dbo.junk  @int = 3, @string = 'hoo', @date = '2/2/2002'; 
```

回报：

```
exec dbo.junk  @int = 3, @string = 'hoo', @date = '2/2/2002';   Call
@int, @string, @date                                                 Parms 
```

这应该让你一路走好。棘手的一点是 DBCC_INPUTBUFFERS 返回 EXACT 调用字符串。因此，您需要编写代码来解析调用以将输入行与参数列表匹配。如果你走那条路，你可能需要一个存储函数来进行解析。它可能会采用类似于上述返回值的调用字符串和参数列表，匹配它们，然后使用 FOR XML 子句返回您想要的格式。

您还可以在绑定到参数列表的游标中解析调用字符串。然后您将按顺序提取参数并查找逗号和@。如果您没有考虑到这一点，您仍然可能会遇到包含这些字符的参数值的问题。

恕我直言，与几乎可以从函数头复制/粘贴的简单选择相比，将其平方似乎需要做很多工作。当然，如果您谈论的是大量程序，那么它可能是值得的。不管怎样，祝你好运，感谢你提出发人深省的问题。

# php - 如何从 PHP Web 应用程序打印到点阵打印机？

> ID：10230336
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:00.183
> 
> 标签：php, printing, dot-matrix

我用 PHP 创建了一个 Web 应用程序。

应用程序应在点阵打印机 (Epson LQ300) 中打印收据。

收据版面定制，纸张打孔。

现在我创建了一个具有自定义纸张尺寸的 pdf，但用户应该点击 3 次才能最终打印收据，这有一些进纸错误。

所以我想让用户点击收据的打印机图标，接下来发生的事情就是打印收据。

假设 priter 只有一个，localy 和 default，所以我首先需要避免选择打印机对话框。

1.  如何从 PDF 阅读器做到这一点？

假设我改变了方法并只使用 HTML，而忘记了 PDF：

1.  如何控制字段的确切位置？
2.  如何避免“选择打印机对话框”？

# java - Eclipse：为 Java 1.5 编译插件：“Eclipse 列”

> ID：10230339
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:04.707
> 
> 标签：java, eclipse, plugins

[由于插件“Columns For Eclipse”](http://columns4eclipse.sourceforge.net/)，我决定给 Eclipse (Eclipse 3.7.2) 一个机会。我想要迁移的 IDE (Visual Slickedit) 已经用复杂的列编辑功能宠坏了我，这个插件拥有其中的大部分功能，而 Eclipse 中的默认列编辑功能对我来说太基础了。

我在家里试用了这个插件，我真的很喜欢它。但是，我在工作中使用的机器运行在 Java 1.5 上，并且插件需要 Java 1.6。

我想尝试在 Java 1.5 下重新编译插件，因为我的工作使用在 Java 1.5 上运行的 WebLogic 9.2。我不想通过将计算机设置为在 Java 1.6 上运行来冒兼容性问题的风险

我有源代码，但没有提供如何编译插件的说明。它不是在 Maven 项目中构建的。

我是 Eclipse 的 100% 新手，所以我想知道是否有人可以逐步指导我在 Java 1.5 下编译（和安装）我自己的插件副本。

或者，是否可以将 Eclipse 3.7.2 设置为在 Java 1.6 上运行但始终在 Java 1.5 中编译？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:50:24.563

在没有现有构建脚本的情况下构建和安装插件将非常复杂。对于您的第二个选项，您可以为整个 IDE 设置编译器合规性级别：

![IDE 编译器设置](../Images/ef19fed90b97fa8cd8b7bd1cf8774a14.png)

或者，您可以逐个项目地设置它（右键单击项目，属性->Java 编译器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:56:12.837

是的，可以使用 Java 6 运行 Eclipse，但使用 Java 5 JDK 作为编译和运行时的默认值。您需要配置 Eclipse：Window -> Preferences -> Java -> Installed JREs。

您还可以使用 Java 6 作为开发/运行时并将编译器合规级别设置为 1.5（与 5 相同），但这有点危险，因为它不会阻止您使用仅在 Java 6 中可用的 API；它只强制执行语言语法。

# ajax - 通过 HTTPS 的 HTTP Cookie 和 Ajax 请求

> ID：10230341
> 
> 赞同：47
> 
> 时间：2012-04-19T14:31:10.947
> 
> 标签：ajax, http, cookies, https

我知道以前曾以各种形式提出过这个问题，但我似乎无法解决这个问题。我尝试使用 jQuery 和本机 JS API 来发出 Ajax 请求。

我的情况如下（见附图）：

1.  浏览器发出 HTTP 请求
2.  服务器响应并设置持久 Cookie
3.  浏览器发出 HTTP Ajax 请求，Cookie 存在就好
4.  服务器按预期响应，更新 Cookie
5.  浏览器发出 HTTPS Ajax 请求，Cookie 不再存在（？！）
6.  服务器给出“默认”响应，因为没有 Cookie（意外行为）

在任何人开始关于跨域请求的讲座之前，让我先声明几件事：

*   我知道这是一个跨域请求（不同的协议），这就是服务器`Access-Control-Allow-Origin`在响应中设置标头的原因（我使用的是 Chrome 和 Firefox，两者都支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)）
*   不过，我还知道 HTTP cookie 应该可以通过 HTTPS 进行管理（请参阅[此处](https://stackoverflow.com/questions/2163828/reading-cookies-via-https-that-were-set-using-http)），因为主机是相同的
*   （编辑）为通用域（例如 .domain.ext）正确设置了 cookie，并且既没有设置 HttpOnly 也没有设置 Secure 标志

那么，为什么，为什么，为什么浏览器在进行 HTTPS Ajax 调用时不传递 cookie？有任何想法吗？我快要失去理智了……

```
 +-----------+ HTTP Request     +-----------+
     |Browser    |+---------------->|Server     |
     +-----------+                  +-----------+

                   HTTP Response
                  <----------------+
                   Set-cookie

                   Ajax HTTP Req.
                  +---------------->
                   Cookie (OK)

                   HTTP Response
                  <----------------+
                   Set-cookie (OK)

                   Ajax HTTPS Req.
                  +---------------->
                   No Cookie (!!!) 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-20T15:31:44.410

好的，找到了cookie问题的解决方案。

请参阅[XHR 规范](https://xhr.spec.whatwg.org/#the-withcredentials-attribute)、[jQuery 文档](http://api.jquery.com/jQuery.ajax/)和[StackOverflow](https://stackoverflow.com/questions/2870371/why-jquery-ajax-not-sending-session-cookie)。

The solution to have the cookies sent when switching protocol and/or subdomain is to set the `withCredentials` property to `true`.

E.g. (using jQuery)

```
 $.ajax( {
   /* Setup the call */
   xhrFields: {
     withCredentials: true
   }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T09:32:27.097

Document.cookie and Ajax Request does not share the cookie. Otherwise, ajax can't access the cookies from document.cookie or the response headers. They can only be controlled by the remote domain.

If you first get response including cookie from server by ajax, Since that you can request ajax communication with cookie to server.

For this case, you write such as below code (jQuery)

```
 $.ajax({
      xhrFields : {
           withCredentials : true
      }
 }); 
```

See [this article](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Requests_with_credentials) and [demo](http://arunranga.com/examples/access-control/credentialedRequest.html)

# macos - 可可应用程序中的退出应用程序菜单问题

> ID：10230343
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:15.407
> 
> 标签：macos, cocoa

我有一个在 Mac OS 10.6.8 上运行的可可应用程序我在应用程序的苹果菜单中添加一个条目，用于退出我的应用程序。代码是这样的：

`item = [menu addItemWithTitle: @"Quit Myapp" , NSLocalizedString(@"Quit", nil), applicationName] action:@selector(terminate:) keyEquivalent:@"q"];`

`[item setTarget:NSAPP];`

现在，我的问题是，当使用`runModal`of打开模式对话框时`NSOpenPanel`，此退出菜单项仍处于启用状态。其余菜单项照常禁用。我无法理解为什么。

如果我更改上面的代码，使菜单项的目标不是 NSApp，而是另一个可可对象，那么问题就消失了。

有人可以让我知道这是否是一个已知问题。将 NSApp 设置为菜单项的目标是否错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:48:07.610

我同意其他人的观点，即这样做可能是个坏主意。也就是说，将目标设置（或离开）`nil`以响应者链为目标。当模型窗口启动时，这可能会使其禁用。

更新：

唔。检查一个新的 MainMenu NIB，我看到 Quit 菜单项确实以应用程序对象为目标。所以，这可能不是问题。

顺便说一句，在上面的代码片段中，您的目标`NSAPP`是 ，无论是什么，而不是`NSApp`.

此外， to 的参数列表`-addItemWithTitle:...`都搞砸了，没有任何意义。您应该清理您的问题以反映实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:39:28.710

为什么不使用 Interface Builder 中的应用程序菜单？

# java - 此方法中的错误或错误

> ID：10230346
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:15.853
> 
> 标签：java, testing

我正在修改软件测试考试。其中一个问题给出了这种方法，并要求识别故障并产生一个不执行故障的测试用例（如果存在）。

这是代码：

```
public static int oddOrPos(int[] x) {
  //Effects: if x==null throw NullPointerException
  // else return the number of elements in x that
  // are either odd or positive (or both)
  int count = 0;
  for (int i = 1; i < x.length; i++)
  {
    if (x[i]%2 == 0 || x[i] > 0)
    { 
      count++;
    }
  }
  return count;
} 
```

我发现了两个问题。一个是 i 在 for 循环中被初始化为 1，因此 x[0] 没有得到测试。也`x[i] % 2 == 0`应该是`x[i] != 0`

这些问题是故障还是错误？我问这个是因为这个问题看起来似乎只有一个错误。

另外，我假设因为总是会执行 for 循环，所以没有不会执行错误的测试用例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:37:02.303

实际上`x[i] % 2 == 0`应该是`x[i] % 2 != 0`（如果我们想检测**奇**数值和正数值。现有代码将检测**偶**数值）。

测试用例只是`{ -2 }`- 这个元素是偶数和负数，所以不应该被计算在内，`0`即使它有错误，该方法也会返回。`{ 1 }`也会给`0`，这是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:38:47.490

如果你想检测*奇数的负值*，你必须寻找`-1`而不是`0`像现在这样寻找。

对于*奇数正值*，它将是`1`。所以基本上你想要**什么，但** `0`.

该`%`运算符是一个余数运算符，而不是真正的模运算符，如果第一个给定的数字是负数，它会返回一个负数：

```
class Test1 {
    public static void main(String[] args) {
        int a = 5 % 3;  // 2
        int b = 5 / 3;  // 1
        System.out.println("5%3 produces " + a +
                " (note that 5/3 produces " + b + ")");

        int c = 5 % (-3);  // 2
        int d = 5 / (-3);  // -1
        System.out.println("5%(-3) produces " + c +
                " (note that 5/(-3) produces " + d + ")");

        int e = (-5) % 3;  // -2
        int f = (-5) / 3;  // -1
        System.out.println("(-5)%3 produces " + e +
                " (note that (-5)/3 produces " + f + ")");

        int g = (-5) % (-3);  // -2
        int h = (-5) / (-3);  // 1
        System.out.println("(-5)%(-3) produces " + g +
                " (note that (-5)/(-3) produces " + h + ")");
    }
} 
```

* * *

另一个“小”故障是条件完成的方式。而不是检查**奇数**或**正数**，寻找**正数**或**奇数**会稍微快一些。这只是因为检查一个数字是否为正比获取其余数更容易。

* * *

**资源：**

*   [15.17.3。余数运算符 %](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:39:21.053

据我了解，您的假设是正确的。应该测试数组的第一个位置，因此`i[0]`您指出了。

但是，`x[i]%2 == 0`应该改为`x[i]%2 == 1`用于奇数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:55:19.843

这里的主要问题是你的 for 循环从 1 开始，它应该从 0 开始。你总是会错过数组的第一个元素。x[i]%2 == 0 对偶数返回 true，而不是奇数。因此将其更改为 x[i]%2 != 0。

```
public class test{

public static void main(String[] args){
int[] x = {3, 5, -1, -14}

if( 3 == oddOrPos(x)){
    System.out.println("Working");
else
    System.out.println("Test Fail");

}
public static int oddOrPos(int[] x) {
  //Effects: if x==null throw NullPointerException
  // else return the number of elements in x that
 // are either odd or positive (or both)
 int count = 0;
 for (int i = 0; i < x.length; i++)
 {
   if (x[i]%2 != 0 || x[i] > 0)
{ 
  count++;
}
 }
      return count;
}
} 
```

# javascript - jqPlot 添加 0 值

> ID：10230348
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:19.713
> 
> 标签：javascript, jqplot

我正在使用 jqPlot 库来构建图表。我正在使用一些 JS 来获取 JSON 文件，使用 JSON 文件中的值构建字符串，将其转换为嵌套数组（jqPlot 喜欢的唯一格式），然后传递给 jqplot。jqPlot 正在读取数组并绘制正确的值，但它在最后添加了一个 0 值。

这是字符串代码：

```
$(function () {
    $.getJSON("test.json", chartData);
    function chartData(data) {
                $.each(data.values, function(index,val){ 
                    chartValues += val + ",";
                });
            }; 
```

这是将其转换为嵌套数组的代码：

```
var temp = new Array();
temp = chartValues.split(',');
var temp2 = new Array(temp);
alert(temp2); 
```

因此，当 temp2 被传递给 jqplot 时，它会添加一个零，但是当我向它传递一个名为 test 的相同嵌套数组时，它是手动声明的，它不会添加零。他们在这里进行比较：

```
var test = [[12,32,21,23,34,43,52,86,25,]]; 
```

这里是 temp2

```
[[12,32,21,23,34,43,52,86,25,]] 
```

有任何想法吗？我也很感激我的逻辑在这方面的任何帮助，因为我觉得我可以更优雅地创建嵌套数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:28:50.393

在这一点上我不确定 100%，但我认为 .....86,25,]] 是不正确的。这可能是添加零值的原因。尝试消除这一点。另一件事是您可以使用基本的访问方法直接访问 json 文件中的数据数组。在 json 组织中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:57:26.270

在这种情况下，删除字符串中的最后一个字符（在转换为数组之前）是解决方案。

```
newStr = chartValues.substring(0, chartValues.length-1); 
```

# c# - MSDN 中的异步客户端套接字示例

> ID：10230349
> 
> 赞同：3
> 
> 时间：2012-04-19T14:31:30.297
> 
> 标签：c#, sockets, asynchronous, msdn

我有一个关于这个例子的问题：[异步客户端套接字](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)。它说这些操作是异步的并且它们**是**（出现了beginxxx/endxxx），但它们使用`ManualResetEvent`并且如果我正确理解示例代码 - 这样的调用：

```
 Receive(client);
  receiveDone.WaitOne(); 
```

会阻塞线程，它们是从中调用的。因此，如果我有一个带有 UI 的应用程序并且我从主线程调用该异步套接字代码 - 应用程序将冻结......或者我错了吗？抱歉，我希望在不冻结主线程的情况下通过 tcp 异步发送/接收一些命令。我是否必须调用该示例中的所有套接字操作以避免冻结？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:37:46.247

是的，此代码已设置为同步运行。但是，您可以轻松地自己使用 Beginxxx 和 Endxxx 调用，而不是像编写这个（糟糕的）异步操作示例一样包装它们。

为了进一步澄清，本文确实异步运行每个方法，但随后使用阻止`blocker.WaitOne();`类似这样的更好方法可能是让您的 beginconnect 回调触发发送，这将使其回调触发接收等

您还可以使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)并利用它们的[ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)功能来执行此操作。然后你的代码甚至可能看起来更干净:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:36:55.837

它会阻止用户界面。MSDN 示例确实演示了异步，但效果很差。它也很原始。请查看这个主题，我也刚刚回答了有关不同异步编程模型的问题。我讨论了很多，并为所有这些提供了链接和完整的例子。

链接：[在 C# 中实现多线程需要帮助](https://stackoverflow.com/questions/10224060/need-help-to-implement-multithreading-in-c-sharp/10224391#10224391)

# c++ - 比较两个矩阵的有趣算法？

> ID：10230351
> 
> 赞同：0
> 
> 时间：2012-04-19T14:31:34.363
> 
> 标签：c++, math, matrix

我有一个问题，基本上，我有两个矩阵（向量），一个大矩阵和一个较小的矩阵。我有一个算法，将海量矩阵分成块（小块的大小）

例如（我在这里使用测试数据），所以大矩阵大小是：4x4，小矩阵是 2x2，然后我将特定块（在当前位置）传递给一个检查小矩阵是否为等于大块（在那个特定位置），如果是，则返回真，否则返回假。

我可以像这样输出每个块：

```
bool compareMatrix(vector<double> &theMatrix1, vector<double> &theMatrix2, int startRow, int startCol)
{
      // I can output the matrix blocks like this:
      cout << theMatrix1[startRow*2+startCol] << endl;    
} 
```

但我不太明白如何将块（在startingRow / Col）与小矩阵进行比较..

这是怎么回事：矩阵1：（4x4）

```
0 1 0 1 
1 1 0 1 
0 0 1 1 
0 1 1 1 
```

矩阵 2：（2x2）

```
0 1 
0 1 
```

然后我将块分成 2x2：

B1 =

```
0 1 
1 1 
```

B1 等于 theMatrix2 - 否，因此返回 false

B2 =

```
0 1
0 1 
```

B2 是否等于 theMatrix2 - 是的，所以返回 true

我真的试图尽可能详细地解释事情，希望有人能给我一些建议，因为我已经工作了这么长时间了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:47:02.937

如果大矩阵的大小已知，您可以将它的小部分与您的 2x2 矩阵进行比较，如下所示

```
int bigMatrixSize=4;

bool compare(...)
{
 for (int i=0; i<2; ++i)
    for (int k=0; k<2; ++k)
       if(bigMatrix[k+startX+(i+staryY)*bigMatrixSize] != smallMatrix[k][i])
           return false;
 return true;
} 
```

我省略了边界检查和其他一些东西，但它应该给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:55:13.400

```
bool compareMatrix(vector<double> &theMatrix1, int nRow1, int nCol1, vector<double> &theMatrix2, int nRow2, int nCol2, int startRow, int startCol)
{
    int p1 = startRow * nCol1 + startCol, p2 = 0;

    for (int y = 0; y < nRow2; ++y)
    {
        for (int x = 0; x < nCol2; ++x)
        {
            if (theMatrix1[p1 + x] != theMattrix2[p2 + x]) // You can use memcmp here, but it's safer let compiler do the optimization.
            {
                return false;
            }
        }

        p1 += nCol1;
        p2 += nCol2;
    }

    return true;
} 
```

你想要这样的东西吗？您可以将列数添加到位置以到达下一行。

# java - “java.sql.SQLException The column .. in table ..不允许空值”尽管列值不为空

> ID：10230354
> 
> 赞同：1
> 
> 时间：2012-04-19T14:31:39.267
> 
> 标签：java, hibernate, sybase

我收到“java.sql.SQLException：表 METAL_HAREKET_IPTAL 中的列 ID 不允许空值”。在 Sysbase 数据库上。但是我要插入的值存在（您可以从下面的 Tomcat 日志中看到）

```
metalhareket id: 450
metalhareketiptal id: 450
org.hibernate.exception.ConstraintViolationException: could not insert: [com.turktrust.iab.ebs.pojos.MetalHareketIptal]
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
        at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:40)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2158)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2638)
        at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:48)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:250)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:298)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:107)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
        at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:172)
        at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
        at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:535)
        at org.hibernate.impl.SessionImpl.save(SessionImpl.java:523)
        at org.hibernate.impl.SessionImpl.save(SessionImpl.java:519)
        at com.turktrust.iab.ebs.service.VirmanIptalOnayService.virmanIptal(VirmanIptalOnayService.java:239)
        at com.turktrust.iab.ebs.backingbeans.VirmanIptalOnayIslemleriBean.virmanIptal(VirmanIptalOnayIslemleriBean.java:101)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:329)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:342)
        at org.jboss.el.parser.AstPropertySuffix.invoke(AstPropertySuffix.java:58)
        at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
        at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
        at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
        at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
        at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:772)
        at javax.faces.component.UICommand.broadcast(UICommand.java:300)
        at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
        at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
        at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.sql.SQLException: The column ID in table METAL_HAREKET_IPTAL does not allow null values.

        at com.sybase.jdbc4.jdbc.SybConnection.getAllExceptions(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybStatement.handleSQLE(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybStatement.nextResult(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybStatement.nextResult(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybStatement.updateLoop(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybStatement.executeUpdate(Unknown Source)
        at com.sybase.jdbc4.jdbc.SybPreparedStatement.executeUpdate(Unknown Source)
        at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeUpdate(NewProxyPreparedStatement.java:105)
        at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:73)
        at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:33)
        ... 48 more 
```

相关代码如下：

```
 System.out.println("metalhareket id: " + mh.getId().toString());
    session = HibernateUtil.getSessionFactory().openSession();
    tx = session.beginTransaction();
    mh.setDurum(EBSConstants.DURUM_BOOL_PASIF);

    session.update(mh);
    session.flush();

    Date d = new Date();

    MetalHareketIptal mhi = new MetalHareketIptal();
    mhi.setKullanici(kullanici);
    mhi.setMetalHareket(mh);
    mhi.setNeden(iptalNedeni);
    mhi.setTarih(d);
    mhi.setId(mh.getId());
    System.out.println("metalhareketiptal id: " + mhi.getId().toString());
    session.flush();
    session.save(mhi);

    Takas takas = mh.getTakas();
    BigDecimal geriMiktar = takas.getKalanMiktar().add(mh.getMiktar());
    takas.setKalanMiktar(geriMiktar);
    takas.setTakasDurum(EBSConstants.TAKAS_DURUM_AKTIF);

    session.update(takas); 
```

编辑：MetalHareket 的相关休眠代码是：

```
<hibernate-mapping>
  <class name="com...MetalHareket" table="METAL_HAREKET">
    <id name="id" type="java.lang.Long">
      <column name="ID"/>
      <generator class="identity"/>
    </id> 
```

MetalHareket的pojo：

```
public class MetalHareket implements java.io.Serializable {

    private Long id;
    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    } 
```

metalheraketiptal 的休眠映射：

```
 <hibernate-mapping>
      <class name="com....pojos.MetalHareketIptal" table="METAL_HAREKET_IPTAL">
        <id name="id" type="java.lang.Long">
          <column name="ID"/>
          <generator class="identity"/>
        </id> 
```

metalharektiptal 的 pojo：

```
public class MetalHareketIptal  implements java.io.Serializable {

private Long id;
 public Long getId() {
    return this.id;
}

public void setId(Long id) {
    this.id = id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:12:16.813

上面代码的问题是休眠文件。
而不是这个：

```
<generator class="identity"/> 
```

> 支持 DB2、MySQL、MS SQL Server、Sybase 和 HypersonicSQL 中的标识列。返回的标识符是 long、short 或 int 类型。

应该是这样的：

```
<generator class="assigned"/> 
```

> 在这种情况下，元素不生成主键，在 Java 中，需要在调用 save() 方法之前设置主键值。
> 
> 如果您希望应用程序分配标识符，而不是让 Hibernate 生成它们，您可以使用分配的生成器。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-id-enhanced-optimizers](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-id-enhanced-optimizers)

[http://www.roseindia.net/hibernate/hibernateidgeneratorelement.shtml](http://www.roseindia.net/hibernate/hibernateidgeneratorelement.shtml)

我依靠 Sybase 生成 ID 列，但后来我试图在我的应用程序中设置 ID 元素，这当然没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:42:31.920

表 METAL_HAREKET_IPTAL 中的列 ID 不允许空值。您可能正在设置空值检查一次。

# javascript - 从 DOM 对象获取 SINGLE 文本节点

> ID：10230357
> 
> 赞同：1
> 
> 时间：2012-04-19T14:31:48.223
> 
> 标签：javascript, jquery, textnode

需要从 DOM 元素中获取所有直接节点，实际上并不知道它们有多少以及它们是什么类型。 `.contents()?` 好吧，让我们来看看..

`$('<div />').html('<p>p</p>').contents()`-> `[<p>​p​&lt;/p>​]`

好的。

`$('<div />').html('textNode').contents()`->`[]`

怎么回事？

`$('<div />').html('textNode').append('another').contents()`-> `["textNode", "another"]`

好的，那么单个文本节点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:35:52.293

我不知道这是否有帮助。不久前，我使用 JSON 样式的输入构建了一个文档片段生成器。我还为它写了一个（有点工作的）反向函数，这样你就可以把你的 nodeList 变成一个 JSON 字符串。

[https://gist.github.com/2313580](https://gist.github.com/2313580)

```
var reverseFunction = function(DOM /* DOM tree or nodeList */) {
    var tree = [];[].forEach.call(DOM, function(obj) {
        if (obj instanceof Text) {
            tree.push({
                'textContent': obj.textContent
            });
        } else {
            var tmp = {};
            tmp['tagName'] = obj.nodeName;
            for( var data in obj.dataset ) {
                tmp['data-' + data] = obj.dataset[data];
            }
            for (var i = 0, l = obj.attributes.length; i < l; i++) {
                var key = obj.attributes[i].name,
                    val;
                if (key.indexOf('data-') === -1) {
                    switch (key) {
                    case ('class'):
                        key = 'className';
                        break;
                    case ('style'):
                        val = {};
                        obj.attributes[i].value.split(';').forEach(function(rule) {
                            var parts = rule.split(':');
                            val[parts[0]] = parts[1];
                        });
                        break;
                    };
                    tmp[key] = val || obj.attributes[i].value;
                }
            }
            if (obj.childNodes.length > 0) {
                tmp['childNodes'] = reverseFunction(obj.childNodes);
            }
            tree.push(tmp);
        }
    });
    return tree;
}; 
```

这确实找到了 textNodes 并将它们分开......你也许可以从中提取一些东西。

**更新**：回答上述问题中的评论...

```
var div = document.createElement('div');
div.appendChild(document.createTextNode('dsf'));
console.log( div.childNodes.length, div.childNodes, div.childNodes[0].textContent);​ 
```

我希望这对你来说更有意义。该数组在控制台中显示为空，但不是。检查长度并尝试访问它，你会看到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T14:39:15.233

.contents() 与 DOM 节点有关。第二个示例中的字符串不是 DOM 元素。

# php - PHP 错误字符串

> ID：10230358
> 
> 赞同：1
> 
> 时间：2012-04-19T14:31:54.697
> 
> 标签：php, error-handling

我将如何获得：

```
print (!$getTemplate) ? "Cannot Find Template File!" : "Template OK!"; 
```

用作：

```
if (!$getTemplate)
{
    echo "Cannot Find Template File!";
}
else
{
    echo "Template OK!";
}; 
```

我已经尝试了很多方法，但找不到它，我在 PHP 上还是很新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:33:23.323

你的意思是这样的：

```
 echo (!$getTemplate ? "Cannot Find Template File!" : "Template OK!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:34:13.567

您可以将列出的第一个表达式传递给`echo`构造：

```
echo ( $getTemplate ? "Template OK!" : "Cannot find template file!" ); 
```

（注意：我删除了`!`并颠倒了三元参数的顺序以使其更易于理解。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:34:39.603

很难从你的问题中看出哪里出了问题，但我建议这样做。

你可以尝试使用`file_exists();`

例如：

**稍后编辑以包括 OP 的编辑：**

```
$getTemplate = '/path/to/file.html';

if ( ! file_exists($getTemplate))
{
    echo "Cannot Find Template File!";
}
else
{
    echo "Template OK!";
    // fopen, fwrite, fclose here
} 
```

# php - 查找 2 个日期之间的差异并根据差异迭代图像

> ID：10230361
> 
> 赞同：2
> 
> 时间：2012-04-19T14:32:08.140
> 
> 标签：php, mysql, image, date

我设法遍历一个表并获得表中相邻的 2 个日期之间的天数差异。

多个条目具有相同的日期，我现在拥有它，当该日期更改时，它会显示图像但是我希望它显示图像的次数与日期差异一样多

```
$sql = mysql_query("SELECT * FROM Films_Info") 
 or die(mysql_error()); 

 $last_value = null;

while ($row = mysql_fetch_assoc($sql)) {

  if (!is_null($last_value)) {
  $a = new DateTime($row['FilmRelease']);
  echo "<p>".$row['FilmName']."</p>";
  $interval = $a->diff(new DateTime($last_value));
  //echo $interval->format('%d days');
  $i = 0;

}
$howManydays = $interval->days;

for ( $i; $howManydays; $i++) {
    echo "<img src=\"day.jpg\" />";
    $howManydays = 0;

}

  $last_value = $row['FilmRelease'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:35:52.793

`for ( $i = 0; $i < $howManydays; $i++)` 第二个是一个条件语句，告诉循环何时应该停止。

for 循环中的第一部分`$i = 0`将变量初始化`$i`为 0 然后测试条件`$i < $howManydays`。

假设`$howManydays`等于 1。这意味着 0 < 1，因此循环将执行。

在循环结束时，第三部分称为 ( `$i++`)，因此`$i`递增，现在等于 1。再次调用第二部分以测试条件`$i < $howManydays`，询问是否 1<1，否则循环将退出。

因此，如果`$howManydays`大于 0，则循环应该发生在`$howManydays`.

`$howManydays = 0;`如果您不希望它只触发一次，您将希望在 for 循环中删除。

for 循环

```
for ( $i = 0; $i < $howManydays; $i++){
  // ...
} 
```

有点等价于 while 循环：

```
$i = 0;
while ( $i < $howManydays ){
  // ...
  $i++;
} 
```

[http://php.net/manual/en/control-structures.for.php](http://php.net/manual/en/control-structures.for.php)了解更多信息

在上面的代码中，您还应该检查是否设置了间隔。如果只需要一个间隔，您可能应该只做一个 if 而不是一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:12:00.543

您可以对间隔进行简单的划分并多次打印出图像

```
$last_value_u   = $last_value->format('U');
$a_u            = $a->format('U');

$interval       = $a_u - $last_value_u;

$image_count    = intval($interval/86400);

for($i=0;$i<$image_count;$i++)
    echo "<p><img src=\"day.jpg\" /></p>"; 
```

## 更新

另一种选择是遍历间隔：

```
for($i=$last_value_u;$i<$a_u;)
{
    if(intval(($a_u - $i)/86400) == X)
    {
        // run special code for specific day
    }
    else
    {
        // run code for every other day
    }
    $i+=86400;
} 
```

# python - 如何在不知道行号的情况下将文件读取到以给定单词开头的字符串？

> ID：10230362
> 
> 赞同：3
> 
> 时间：2012-04-19T14:32:10.703
> 
> 标签：python, string, file

我在日志文件中有测试结果，其格式如下：

无用的信息

无用的信息

=======================

有用的信息

有用的信息

=======================

测试成功

每个部分中的行数可能会有所不同，因此我想检查双等号字符“==”的第一次出现，并将该行读取到文件末尾为止。目前我正在使用以下代码将整个文件读入字符串。

```
with open ("Report.txt", "r") as myfile:
    data = myfile.read() 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:38:46.117

```
useful = []
with open ("Report.txt", "r") as myfile:
    for line in myfile:
        if "===" in line:
            break
    for line in myfile:
        useful.append(line)
a_string = "".join(useful) 
```

但是，我更愿意将其隐藏在生成器中，如下所示：

```
def report_iterator():
    with open ("Report.txt", "r") as myfile:
        for line in myfile:
            if "===" in line:
                break
        for line in myfile:
            yield line

for line in report_iterator():
    # do stuff with line 
```

所有的过滤和吹毛求疵都在生成器函数中完成，您可以将“过滤输入”的逻辑与“处理输入”的逻辑分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:37:28.743

您可以逐行阅读，默认情况下不存储这些行。当您获得以 开头的行时`'=='`，您读取的所有行，直到您读取`'=='`存储在字符串或列表中的第二行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:38:12.560

```
myfile = open("Report.txt", "r")
while myfile.readline()[:2] != '==':
    pass
for line in myfile:
    data = line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:37:14.260

如果您已将整个文件保存在内存中，则可以像这样获得“除第一部分之外的所有内容”：

```
useful = data.split('======================\n',1)[1] 
```

这会在第一次出现分隔符时拆分数据，返回分隔符*之后*的所有内容。

# selenium - selenium web 驱动程序 - 替代 getEval

> ID：10230363
> 
> 赞同：0
> 
> 时间：2012-04-19T14:32:14.633
> 
> 标签：selenium, selenium-webdriver

Selenium IDE 有

商店评估 | /\d*$/.exec(storedVars['myLocation']) | 齐德

我正在使用的 Selenium webdriver 代码：

String qid = (String) ((JavascriptExecutor) driver).executeScript("/\d*$/.exec(storedVars['myLocation'])");

执行 jUnit 代码时出现错误。上面的 Javascript 执行器语句正确吗？

错误：

`org.openqa.selenium.WebDriverException: null (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 1.23 seconds Build info: version: '2.20.0', revision: '16008', time: '2012-02-27 19:03:59' System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_31' Driver info: driver.version: RemoteWebDriver at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:170) at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:123) at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:438) at org.openqa.selenium.remote.RemoteWebDriver.executeScript(RemoteWebDriver.java:353) at com.ui.tests.CreateNewTrait.testCreateNewTrait(CreateNewTrait.java:211) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30) at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222) at org.junit.runners.ParentRunner.run(ParentRunner.java:300) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)` 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:23:40.230

您的 javascript 看起来不正确。如果您只想从当前页面 url 中取出最后一位数字，那么您应该尝试使用 driver.getCurrentURL 获取 url 并使用 java pattern-matcher 而不是使用 javscript executor。在 IDE 中没有提供执行字符串、数学或逻辑函数的规定，因此使用了 javascript..但是使用 webdriver 或 rc，您可以使用 java 功能:)
希望它有所帮助。

# java - Android ListView 勾选所有复选框（自定义 ResourceCursorAdapter）

> ID：10230369
> 
> 赞同：0
> 
> 时间：2012-04-19T14:32:41.700
> 
> 标签：java, android, listview, checkbox, android-cursoradapter

我在活动中的自定义适配器：

```
private static HashMap<Integer, Boolean> checkedMap;

private class MyMediaCursorAdapter extends ResourceCursorAdapter {

    public MyMediaCursorAdapter(Context context, int layout, Cursor c) {
        super(context, layout, c);

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View view = super.newView(context, cursor, parent);
        final RecordListItemCache cache = new RecordListItemCache();

        cache.date = (TextView)view.findViewById(R.id.dateRecorded);
        cache.checkBox = (CheckBox)view.findViewById(R.id.checkBoxView);    

        view.setTag(cache);         
        return view;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        final RecordListItemCache cache = (RecordListItemCache)view.getTag();

        final SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
        final String dateString = sdf.format(cursor.getLong(cursor
                .getColumnIndex(MediaStore.Audio.Media.DATE_ADDED))*1000);

        final String displayName = cursor.getString(cursor
                .getColumnIndex(MediaStore.Audio.Media.TITLE));

        final int id = cursor.getInt(cursor
                .getColumnIndex(MediaStore.Audio.Media._ID));
        cache.checkBox.setOnCheckedChangeListener(null);
        Boolean chk = checkedMap.get(id);
        if (chk==null) {
            cache.checkBox.setChecked(false);
        } else {
            cache.checkBox.setChecked(chk);
        }

        cache.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                checkedMap.put(id, isChecked);

            }
        });

        cache.checkBox.setText(displayName);
        cache.date.setText(dateString);
    }   
}

final static class RecordListItemCache {
    public CheckBox checkBox;
    public TextView date;
    public boolean checked;
} 
```

在同一活动中的 onCreate 中：

```
myMediaCursorAdapter = new MyMediaCursorAdapter(getApplicationContext(),
            R.layout.multipledeleteview, audioCurosr);
setListAdapter(myMediaCursorAdapter); 
```

和点击：

```
public void onClick(View button) {
    switch (button.getId()) {
        case R.id.buttonDeleteMultiple: {
            Collection<Integer> IDs = checkedMap.keySet();
            for (Integer id : IDs) {
                if (checkedMap.get(id)==true) {
                    RecorderUtils.delete(getApplicationContext(), id, false);
                }
            }
            checkedMap = new HashMap<Integer, Boolean>();
        }
        case R.id.buttonDeleteMultipleChooseAll: {
            int size = myMediaCursorAdapter.getCount();
            ListView lv = getListView();
            for(int i = 0; i <= size; i++) {
                lv.setItemChecked(i, true);
            }
            myMediaCursorAdapter.notifyDataSetChanged();
        }
    }
} 
```

删除工作正常（它删除选中的）。但是选择全部的按钮不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:44:58.613

I reload the view with checked checkboxes...

# php - 一次显示两个视图并在更改时更改 url

> ID：10230370
> 
> 赞同：1
> 
> 时间：2012-04-19T14:32:44.357
> 
> 标签：php, ajax, yii

我有一个带有菜单的主视图，可以帮助我显示另一个视图。它类似于：

```
<div id="page">
    <div id="menu">
            <a href="controller/page1">Page1</a>
            <a href="controller/page2">Page2</a>
    </div>
    <div id="content">
            <!-- Page1 or Page2 are displayed here -->
    </div>
</div> 
```

我正在使用 php 的 Yii 框架。这使我不使用`<?php include("menuview.php"); ?>`. 所以我正在寻找不同的解决方案。我可以用 Ajax 做到这一点，但我也希望将链接更改为 mypage/controller/Page2。使用 Ajax 我只能做到这一点：mypage/controller/index#Page2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:53:06.060

在主视图中，而不是 include do

```
<?php echo $this->renderPartial('_page1', array('model'=>$model)); ?> 
```

**更新：**

*protected/views/controller/page1.php*和*protected/views/controller/page2.php*内容随心所欲

*受保护/视图/布局/custom.php：*

```
<?php $this->beginContent('//layouts/main'); ?>
<div id="page">
    <div id="menu">
        <?php echo CHtml::ajaxLink('Page1', array('controller/page1'), array('update' => '#content')); ?>
        <?php echo CHtml::ajaxLink('Page2', array('controller/page2'), array('update' => '#content')); ?>
    </div>
    <div id="content">
        <?php echo $content; ?>
    </div>
</div>
<?php $this->endContent(); ?> 
```

*受保护/控制器/ControllerController.php：*

```
class ControllerController extends Controller {

    /**
     * @var string the default layout for the views.
     */
    public $layout = '//layouts/custom';

    public function actionPage1() {
        if (Yii::app()->request->isAjaxRequest)
            $this->renderPartial('page1');
        else
            $this->render('page1');
    }

    public function actionPage2() {
        if (Yii::app()->request->isAjaxRequest)
            $this->renderPartial('page2');
        else
            $this->render('page2');
    }

} 
```

**更新2：**

如果您也需要更改地址栏中的链接，那么您唯一的选择是使用常规链接而不是 ajax`<?php echo CHtml::link('Page1', array('controller/page1')); ?>`

使用 ajax 的首选方法是使用您提到的哈希。

# android - Ramos W16 Android USB 驱动程序

> ID：10230373
> 
> 赞同：1
> 
> 时间：2012-04-19T14:33:00.517
> 
> 标签：android, usb, tablet

我的 Ramos W16 有问题。升级到最后一个固件。现在我想root设备，但无法安装驱动程序。这是硬件 ID 的 USB\VID_18D1&PID_4E22&REV_0231 USB\VID_18D1&PID_4E22

操作系统：Windows 7 x64。在设备管理中，平板电脑显示为 USB 复合设备。我尝试了许多不同的驱动程序，但它们都不起作用。来人帮帮我！试过 USBDeview - 删除所有驱动程序。

# c# - 检查存储在字典中的参数是否有效

> ID：10230376
> 
> 赞同：0
> 
> 时间：2012-04-19T14:33:06.920
> 
> 标签：c#, string, validation, dictionary, split

我有一个接收字符串的网络服务。

此字符串包含多个键 => 与字符“+”连接的值。

我必须验证每个值（“必需”、“非空”），并将每个值分配给具有相同名称的变量。

这是我从字符串构建字典的方法：

```
string firstname;
string lastname;
string amount;

string request = "firstname=foo+lastname=bar+amout=100.58";

Dictionary<string, string> arguments = new Dictionary<string, string>();

request.Split('+').ToList<string>().ForEach(p =>
{
    string[] tmp = p.Split('=');

    if (tmp.Length == 2)
        arguments.Add(tmp[0], tmp[1]);
});

// Validate and assign : How I do with one value : (I must find a better way)
bool isValid = true;

// check "firstname"
if(arguments.ContainsKey("firstname") && string.IsNullOrWhiteSpace(arguments["firstname"]) == false)
{
    firstname = arguments["firstname"];
}
else
{
    isValid = false;
    Logger.Write("Invalid argument : firstname");
}

// Do this for about 20 arguments, it becomes huge...

if(isValid)
{
    Console.WriteLine(firstname); // Displays foo
    Console.WriteLine(lastname); // Displays bar
    Console.WriteLine(amout); // Displays 100.58
} 
```

谢谢，抱歉拼写错误，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:38:40.733

我*认为*您想要这样的东西，但是由于您没有真正提出问题，所以我只是在猜测：

```
request.Split('+').ToList<string>().ForEach(p =>
{
    string[] tmp = p.Split('=');

    if (tmp.Length == 2 && !string.IsNullOrWhiteSpace(tmp[1]))
    {
        // edit - if your string can have duplicates, use
        // Dictionary<U,K>.ContainsKey(U) to check before adding
        var key = tmp[0];
        var value = tmp[1];

        if(!arguments.ContainsKey(key))
        {
            arguments.Add(key, value);
        }
        else
        {
            //overwrite with new value
            //could also maybe throw on duplicate or some other behavior.
            arguents[key]=value; 
        }
    }
    else
        throw InvalidOperationException("Bad dictionary string value");
}); 
```

另外，如果在代码审查中出现在我面前，我会质疑 ToList->ForEach 的使用。您想避免 Linq 中的副作用，我会使用传统的 foreach 来编写它，例如：

```
var itemValues = request.Split('+');
foreach(var item in itemValues)
{
    string[] tmp = item.Split('=');

    if (tmp.Length == 2 && !string.IsNullOrWhiteSpace(tmp[1]))
        arguments.Add(tmp[0], tmp[1]);
    else
        throw InvalidOperationException("Bad dictionary string value");
});

// Validate and assign
//read values from the dictionary
//use ContainsKey to check for exist first if needed

Console.WriteLine(arguments["firstname"]); // Displays foo
Console.WriteLine(arguments["lastname"]); // Displays foo
Console.WriteLine(arguments["amout"]); // Displays 100.58 
```

编辑 2 - 您应该将逻辑封装在一个方法中：

```
private string TryGetValue(IDictionary<string,string> dict,string key)
{
    string value = null;
    if(dict.ContainsKey(key) && !string.IsNullOrWhiteSpace(dict[key]))
    {
        value = dict[key];
    }
    else
    {
        Logger.Write("Invalid argument : " + key);
    }
    return value;
} 
```

现在你可以说：

```
string firstName = TryGetValue(arguments,"firstname");
string lastName= TryGetValue(arguments,"lastName");
string amount = TryGetValue(arguments,"amount");

bool isValid = firstName!=null && lastName != null && amount != null;

if(isValid)
{
    Console.WriteLine(firstName ); // Displays foo
    Console.WriteLine(lastName); // Displays bar
    Console.WriteLine(amout); // Displays 100.58
} 
```

`TryGetValue`将成为一个很好的扩展方法：

```
public static class Extensions
{
    public static string TryGetValue(this IDictionary<string,string> dict, string key)
    {
        string value = null;
        if(dict.ContainsKey(key) && !string.IsNullOrWhiteSpace(dict[key]))
        {
            value = dict[key];
        }
        else
        {
            Logger.Write("Invalid argument : " + key);
        }
        return value;
    }

} 
```

现在调用代码如下所示：

```
string firstName = arguments.TryGetValue("firstname");
string lastName= arguments.TryGetValue("lastname");
string amount = arguments.TryGetValue("amount"); 
```

**最后一次编辑 -** 关于扩展方法的注释 - 是的，它们很整洁，但也很容易意外地过度使用它们。阅读有关它们的 msdn 和博客，遵循指南。避免对泛型类型进行扩展，例如`object`,等`string`。

在我的项目中，我总是根据与之交互的类型在不同的命名空间中布置扩展方法，这迫使希望使用它们的类非常明确，例如：

```
namespace Extensions.IDictionary { ... }
namespace Extensions.string { ... }
namespace Extensions.SomeType { ... }
namespace Extensions.IList { ... } 
```

并且使用代码将具有`using`匹配的子句：

```
using Extensions.IDictionary; 
```

仅提取您感兴趣的扩展，*仅此而已。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:40:54.357

这只是一个猜测，因为您的问题不清楚。

```
// Validate and assign

foreach(KeyValuePair<string,string> pair in arguments)
{
    if(!String.IsNullOrEmpty(pair.Value))
    {
        Console.WriteLine(pair.Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:57:30.873

如果您有多个名字和姓氏，并且您可以使用列表作为字典的值。这样，您可以简单地为名字、姓氏和其他人添加其他值。

要验证，您可以在将值添加到字典之间进行：

```
 string request = "firstname=foo+lastname=bar+amout=100.58+firstname=+lastname=bar2+amout=100.59+firstname=foo3+lastname3=bar3+amout=100.60";

        Dictionary<string, List<string>> arguments = new Dictionary<string, List<string>>();
        request.Split('+').ToList<string>().ForEach(f =>
            {
                string[] data = f.Split('=');
                if (data.Length == 2)
                {
                    if (!arguments.ContainsKey(data[0]))
                    {
                        if (data[1] != "")
                            arguments.Add(data[0], new List<string> { data[1] });
                        else
                            arguments.Add(data[0], new List<string> { "no firstname" });
                    }
                    else
                    {
                        if (data[1] != "")
                            arguments[data[0]].Add(data[1]);
                        else
                            arguments[data[0]].Add("no firstname");
                    }
                }
            }); 
```

希望对你有帮助，再见

# javascript - Javascript，.NET：显示和使用 OK/Cancel 警报

> ID：10230377
> 
> 赞同：0
> 
> 时间：2012-04-19T14:33:11.780
> 
> 标签：javascript, asp.net

这是我的情况：我正在构建一个日程安排 asp.net 应用程序，我想提醒用户时间冲突的可能性（如果用户正在为某人插入一个新的日程安排并且某人已经为那个时间安排了一些事情）。

我已经阅读并在这里找到了很多“在 ASP.NET 中调用 JavaScript”的文章，但是它们要么展示了如何在用户单击某些内容时立即调用函数，或者在页面加载后立即显示一般警报只有 OK 按钮的窗口。

那么我的问题是，我如何从 c# 中的函数/处理程序中间调用带有确定和取消按钮的 javascript 消息框，并可以访问代表这些按钮的任何内容，以便我可以相应地分支？我听说 jquery 消息框比常规消息框更漂亮，我将如何继续使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:41:03.013

> 那么我的问题是，我如何从 c# 中的函数/处理程序中间调用带有确定和取消按钮的 javascript 消息框，并可以访问代表这些按钮的任何内容，以便我可以相应地分支？我听说 jquery 消息框比常规消息框更漂亮，我将如何继续使用它们？

这真的不可能。Javascript 发生在客户端上。c# 函数处理程序发生在服务器上。它们在另一个服务器>客户端>服务器>客户端等之后发生。您不能在服务器端代码中间中断并返回客户端，然后再返回服务器。

在表单发布之前发生的所有事情都发生在客户端（除非涉及 Ajax），一旦表单发布并且您在您的 c# 代码中，一切都在服务器上，直到页面生命周期完成并且响应返回给客户端。

如果你想要一个javascript确认功能，它需要在表单发布到服务器之前发生，你需要将该结果存储在表单字段中并传递它。或者，您可以根据用户选择的“确定”或“取消”选择根本不发布表单。

# javascript - Javascript OOP、getter、setter、运行 - D3.js - 通过选项设置使图形可重用

> ID：10230384
> 
> 赞同：1
> 
> 时间：2012-04-19T14:33:21.523
> 
> 标签：javascript, d3.js

我尝试了自己，但显然我还不够好，无法完成这项工作:-) 我想要实现的目标类似于 Mike 的可重用性演讲 - [http://bost.ocks.org/mike/chart/](http://bost.ocks.org/mike/chart/)：

```
marbles = new Marbles();
marbles.width();//getter, setter
marbles.height();//-||-
...etc
marbles.run();//run the code 
```

代码示例如下所示。有人可以帮我吗？我知道如何在 Java 或 PHP 中创建类和 OOP，但纯 JS 不是我的专业领域 :-)

我有这个代码：

```
//initialize on (menu click)
jQuery(document).ready(function(){

       marbles();

    });
}); 
```

带有变量和主要功能：

```
function marbles(){
    var height = 500,
        width = 1000;    

       var path = ""; 
```

**..另一个变量（大约 15 个）**

```
 var force = d3.layout.force()        
          .size([width, height]);
       //foci to be set for relation type positioning and nodes placing

       var links = force.links(),
          nodes = force.nodes();

      run();

     //graph starts here by loading data - d3.xml
     function run (rootNode){

     begin();

     }

    //internal timer function - adding nodes one at the time
    function begin(clickedNode){  

   }

   //classical update function
   function update() {

   }

} 
```

谢谢

卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:28:05.020

有几种方法可以在 JS 中执行 OOP。你可以在 JS 大师的书中找到它们

如果你只是想了解几个图表是如何工作的，请看看 Bob Monteverde 如何在他的图表库中实现模型... [https://github.com/novus/nvd3/tree/gh-pages/src/models](https://github.com/novus/nvd3/tree/gh-pages/src/models) 我想你会从他的代码中学到很多东西。

在这个 google 组线程中还有各种可重用图表的示例： [https ://groups.google.com/forum/#!searchin/d3-js/reusable$20charts/d3js/6VSl7srPYIo/iKNkxSr1YF0J](https://groups.google.com/forum/#!searchin/d3-js/reusable%2420charts/d3-js/6VSl7srPYIo/iKNkxSr1YF0J)

# sql - SQL Server 2008 报告：组最大值的总和

> ID：10230387
> 
> 赞同：7
> 
> 时间：2012-04-19T14:33:27.957
> 
> 标签：sql, sql-server-2008, reporting-services, sum, max

我在报表设计器中有一个这样的表：

```
Category:       1     2       3      4   Total
Max Amount:     x     y       z      c     ? 
```

我需要获取 Max Amount 的总数，但表达式不允许我取 Sum(Max(amount))，并且此单元格的加总功能被禁用。

最大数量行是一个表达式，它采用每个类别的最大值。源数据有重复值，所以我只取最大值。例如：

```
Category    Amount
    1         4.6
    1         4.6
    1         4.6
    2          5
    3          4 
```

表中的其他列不同，但数量相同，因此我不能只选择不同的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T14:39:10.727

也许是这样的：

```
SELECT
    SUM(t1.maxAmout)
FROM
(
    SELECT
        MAX(t.Amout) AS maxAmout,
        t.Category
    FROM
        yourTable AS t
    GROUP BY
        t.Category
) AS t1 
```

你也可以这样做。如果您使用的是 sql server 2005+：

```
SELECT
    pvt.[1],
    pvt.[2],
    pvt.[3],
    (
        pvt.[1]+
        pvt.[2]+
        pvt.[3]
    ) AS Total
FROM
(
    SELECT
        t.Category,
        t.Amout
    FROM
        yourTable AS t
) AS SourceTable
PIVOT
(
    MAX(Amout)
    FOR Category IN([1],[2],[3])
) AS pvt 
```

**编辑**

如果您有 1000 个类别。那么动态支点将是最好的解决方案。所以像这样：

**测试数据**

```
CREATE TABLE #T
    (
        Category INT,
        Amout FLOAT
    )

INSERT INTO #T
VALUES
    (1,4.6),
    (1,4.6),
    (1,4.6),
    (2,5),
    (3,4) 
```

**唯一的列名**

```
DECLARE @cols VARCHAR(MAX)
DECLARE @colsTotal VARCHAR(MAX)
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY t.Category ORDER BY t.Amout) AS RowNbr,
        t.*
    FROM
        #T AS t
)
SELECT  @cols = COALESCE(@cols + ','+QUOTENAME(Category),
                     QUOTENAME(Category)),
        @colsTotal=COALESCE(@colsTotal + '+ISNULL('+QUOTENAME(Category)+',0)',
                     'ISNULL('+QUOTENAME(Category)+',0)')
FROM 
    CTE
WHERE
    CTE.RowNbr=1
ORDER BY 
    Category 
```

**动态枢轴**

```
DECLARE @query NVARCHAR(4000)=
N'SELECT
    '+@cols+',
    (
        '+@colsTotal+'
    ) AS Total
FROM
(
    SELECT
        t.Category,
        t.Amout
    FROM
        #T AS t
) AS SourceTable
PIVOT
(
    MAX(Amout)
    FOR Category IN('+@cols+')
) AS pvt'

EXECUTE(@query) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:39:41.503

```
WITH
  aggregate
AS
(
  SELECT
    category,
    MAX(amount)  AS max_amount
  FROM
    yourTable
  GROUP BY
    category
)
SELECT
  MAX(CASE WHEN category = 1 THEN max_amount ELSE NULL END)    AS [1],
  MAX(CASE WHEN category = 2 THEN max_amount ELSE NULL END)    AS [2],
  MAX(CASE WHEN category = 3 THEN max_amount ELSE NULL END)    AS [3],
  MAX(CASE WHEN category = 4 THEN max_amount ELSE NULL END)    AS [4],
  SUM(max_amount)                                              AS [total]
FROM
  aggregate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:29:28.433

以下返回单个值：

```
SELECT DISTINCT SUM(MAX(Amount)) OVER ()
FROM atable
GROUP BY Category 
```

您可以将其用作计算`Total`列值的子查询。

或者，`TOP (1)`可以用来代替`DISTINCT`（不知道为什么我以前想不到）：

```
SELECT TOP (1) SUM(MAX(Amount)) OVER ()
FROM atable
GROUP BY Category 
```

# ruby-on-rails - Rails_admin 自定义部分不用于集成测试

> ID：10230390
> 
> 赞同：0
> 
> 时间：2012-04-19T14:33:34.987
> 
> 标签：ruby-on-rails, testing, capybara, guard, rails-admin

我目前正在开发一个使用自定义部分的 rails_admin 应用程序：这是我的 rails_admin.rb 初始化程序的摘录：

```
edit do
  field :propositions do
    partial 'form_propositions'
  end
end 
```

我使用 capybara 编写了集成测试并使用 guard 启动了它们：我所有的测试都是绿色的，当我在我的测试套件中使用“save_and_open_page”时，我可以确认我的自定义部分被 capybara 使用。但是，如果我使用 'rake test:integration' 启动我的测试，我的测试会失败：使用 'save_and_open_page' 方法我可以看到我的自定义部分没有被使用，而是我有原始的 rails_admin 表单......

你知道发生了什么吗？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:38:39.717

RailsAdmin 向 rake :environment 任务添加了一个 rake 任务，该任务关闭 RailsAdmin 初始化程序的加载。这意味着 rake 任务不会加载自定义操作、部分操作等。

由于保护不是由 rake 任务启动的，因此所有自定义项都已正确加载。

要关闭此性能“优化”以便您可以在 rake 任务中测试 RailsAdmin 自定义，请将以下内容添加到您的 Rakefile：

```
task :default => [:load_rails_admin_initializer]
task :load_rails_admin_initializer do
  ENV['SKIP_RAILS_ADMIN_INITIALIZER'] = 'false'
end 
```

# apache-flex - 动态改变文本流 spark flex

> ID：10230394
> 
> 赞同：0
> 
> 时间：2012-04-19T14:33:55.407
> 
> 标签：apache-flex, dynamic, colors, textarea, flex-spark

如何动态更改 spark 组件 TextArea 中的某些单词颜色。例如，我想要文本“一只敏捷的棕色狐狸跳过懒狗”。单词“dog”是红色，单词“fox”是绿色。

```
<s:TextArea textFlow="{scriptTextAreaTextFlow}" change="{doSomething(event)}" text ="A quick brown fox jumps over the lazy dog." id="tarea1"/> 
```

在每次调用改变函数 doSomething 时，她找到单词“dog”的每个位置和单词“fox”的每个位置。我需要做的就是动态改变这些单词的颜色。在 mx 中，使用 TextRange 很容易。

```
tr = new TextRange(tarea1, false, start, end);
tr.color = "#00FF00" 
```

现在，在火花中，我找到了一种使用 TextFlow 为其着色的方法

```
scriptTextAreaTextFlow = TextFlowUtil.importFromString(resoult); 
```

其中“resoult”是根据 TextArea 中的文本生成的 HTML 代码，因此 dog 和 fox 是彩色的。问题是检查（和着色）是实时完成的（onChange），并且在每次

```
scriptTextAreaTextFlow = TextFlowUtil.importFromString(resoult); 
```

TextArea 锚点移动到位置 0（开始）。我发现解决这个问题的唯一方法是在编辑之前记住锚点位置并在着色后设置它，但我正在寻找更好的解决方案。

请帮忙...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:52:24.807

另一种方法是捕获 onChange 并使用正则表达式来更改关键字周围的 HTMLText 以包含“字体颜色 =”名称。

# php - 警告：mysql_fetch_assoc()：

> ID：10230396
> 
> 赞同：1
> 
> 时间：2012-04-19T14:33:58.333
> 
> 标签：php, mysql

警告：：`mysql_fetch_assoc()`提供的参数不是第 35 行 **中的有效 MySQL 结果资源*

```
if($_SERVER['REQUEST_METHOD'] =='POST'){

    $userid = $_SESSION['userid'];
    $todo = $_POST['todo'];
    $description = $_POST['description'];
    $date = $_POST['date'];
    $priority = $_POST['priority'];
    $username = $_SESSION['username'];
} 
```

* * *

```
$get_product = mysql_query("SELECT * FROM inlog WHERE userid = '".$_SESSION['userid']."' ORDER BY id DESC"); 
```

* * *

```
while ($row = mysql_fetch_assoc($get_product)) { // Line 35
      ?> 
```

我想如果有人可以解释我做错了什么，在网上搜索，但无法解决我的问题。这就是我在这里的原因:) ///////// 问题已解决

下一个问题：我回应，（而不是死）我的错误待办事项等。但问题是，他仍然将它添加到我的数据库中。任何人都可以解释如何对抗它，我知道如果他不死，他仍然会添加它，但只会给出一个消息。

我想没有必要把脚本放在这里。但如果是这样。生病添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:04:19.747

很可能有些东西是空的，更新你的脚本来定位问题：

```
if($_SERVER['REQUEST_METHOD'] =='POST'){
    $userid = (int) $_SESSION['userid']; // Cast to (int) to make it safe
    if (empty($userid))
        die('Invalid User ID');

    $todo = $_POST['todo'];
    if (empty($todo))
        die('Invalid todo');

    $description = $_POST['description'];
    if (empty($description))
        die('Invalid description');

    $date = $_POST['date'];
    if (empty($date))
        die('Invalid date');

    $priority = $_POST['priority'];
    if (empty($priority))
        die('Invalid priority');

    $username = $_SESSION['username'];
    if (empty($todo))
        die('Invalid username');

    $get_product = mysql_query("SELECT * FROM inlog WHERE userid = '".$userid."' ORDER BY id DESC"); // See how I changed $_SESSION['userid'] to $userid
} 
```

还要确保在对变量进行查询之前对它们进行转义。就像我将用户标识转换为整数一样。

关于第二个问题：

> 下一个问题：我回应，（而不是死）我的错误待办事项等。但问题是，他仍然将它添加到我的数据库中。任何人都可以解释如何对抗它，我知道如果他不死，他仍然会添加它，但只会给出一个消息。

根据我的最佳解决方案：

```
if($_SERVER['REQUEST_METHOD'] =='POST'){
    $errors = array();

    $userid = (int) $_SESSION['userid']; // Cast to (int) to make it safe
    if (empty($userid))
        $errors[] = 'Invalid User ID'

    $todo = $_POST['todo'];
    if (empty($todo))
         $errors[] = 'Invalid todo';

    $description = $_POST['description'];
    if (empty($description))
        $errors[] = 'Invalid description';

    $date = $_POST['date'];
    if (empty($date))
        $errors[] = 'Invalid date';

    $priority = $_POST['priority'];
    if (empty($priority))
        $errors[] = 'Invalid priority';

    $username = $_SESSION['username'];
    if (empty($todo))
        $errors[] = 'Invalid username';

    // Only do the query when there are no errors    
    if (count($errors) <= 0) {
        $get_product = mysql_query("SELECT * FROM inlog WHERE userid = '".$userid."' ORDER BY id DESC"); // See how I changed $_SESSION['userid'] to $userid
    } else {
        echo implode('<br />', $errors); // or return is also a possibility
    }
} 
```

# database - 给定任务的 JPA 查询

> ID：10230405
> 
> 赞同：1
> 
> 时间：2012-04-19T14:34:25.103
> 
> 标签：database, jpa, jpql, criteria-api

我正在做一些学术任务，但我被困住了。情况如下：
我有三个简单的数据库表和从它们生成的Java @Entity 类。

表标记：
STUDENT_ID (PK)
SUBJECT_ID (PK)
MARK

```
public class Mark implements Serializable {
    private BigDecimal mark;
    @Id
    @Column(name = "STUDENT_ID", nullable = false, insertable = false, updatable = false)
    private BigDecimal studentId;
    @Id
    @Column(name = "SUBJECT_ID", nullable = false, insertable = false, updatable = false)
    private BigDecimal subjectId;
    @ManyToOne
    @JoinColumn(name = "SUBJECT_ID")
    private Subject subject;
    @ManyToOne
    @JoinColumn(name = "STUDENT_ID")
    private Student student;
(...)
} 
```

表学生：
INDEX_NO (PK)
FNAME
LNAME
FACULTY_ID

```
public class Student implements Serializable {
    @Column(name = "FACULTY_ID", nullable = false)
    private BigDecimal facultyId;
    @Column(nullable = false, length = 20)
    private String fname;
    @Id
    @Column(name = "INDEX_NO", nullable = false)
    private BigDecimal indexNo;
    @Column(nullable = false, length = 20)
    private String lname;
    @OneToMany(mappedBy = "student")
    private List<Mark> marksList1;
(...)
} 
```

表学生：
ID (PK)
NAME

```
public class Subject implements Serializable {
    @Id
    @Column(nullable = false)
    private BigDecimal id;
    @Column(nullable = false, length = 60)
    private String name;
    @OneToMany(mappedBy = "subject")
    private List<Mark> marksList;
(...)
} 
```

任务是获得两个列表：
1\. 尚未获得所有科目分数的学生列表。
2\. 特定学生不得分的科目清单。

我不太擅长 SQL，所以查询构造有问题。它可以通过任何类似 JPA 的方式来解决，即 JPQL、Criteria API。

所以我请你帮忙。
感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:37:09.407

我不确定这是否正确，但也许这可以帮助您解决问题。JPQL 中的 size() 函数可以统计一个集合。

这些是 2 个 JPQL 查询

1)

```
select m.student
from Mark m
where size(m.subject) <> 
    size(select s from Subject s) 
```

2)

```
select s
from Subject s
where s not in 
    (select m.s from Mark m where m.student.indexNo = :indexNo) 
```

:indexNo 是应使用参数设置的学生 ID。

# sql - 删除加载后重新创建索引

> ID：10230410
> 
> 赞同：0
> 
> 时间：2012-04-19T14:34:47.817
> 
> 标签：sql, oracle10g, indexing

我有一个表，我在其中创建了一个索引以获得更好的查询性能。有时会从该表中删除一些行并加载一些新行。我的问题是：

1.  如果我有索引，然后从文件中删除并加载一些数据，我应该重新创建索引吗？
2.  如果是这样，我该如何重新创建该索引？我应该放弃它并创建一个新的吗？

**更新**

系统从文件中加载数据（通过 SqlLoader），在表中我有一个名为的列``idFile`，我们正在执行的查询基于该 ID。检查加载的行后，我们进行一些处理，得到一些结果并且不再需要这些行（我们删除它们）。有时该表大约有 1000 万行，因此优化查询的索引是更符合逻辑的想法（对我和我的团队而言）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:20:03.627

无需重新创建索引。

由于您一次加载 1000 万行，因此通过删除索引、加载数据然后重新创建索引来执行加载可能会更有效。

# seo - SEO：允许爬虫在一次只有少数可见页面时索引所有页面

> ID：10230411
> 
> 赞同：0
> 
> 时间：2012-04-19T14:34:58.030
> 
> 标签：seo

我正在为 SEO 目的改进网站并遇到了一个有趣的问题。除其他外，该站点包括一个包含单个项目的大型目录（它们是什么并不重要）。每个项目都有自己的详细信息页面，可通过以下方式访问

```
http://www.mysite.com/item.php?id=item_id 
```

或者

```
http://www.mysite.com/item.php/id/title 
```

该目录很大——其中包含大约 100,000 个项目。自然，在任何页面上都只列出了几个项目。例如，在主站点主页上，有大约 5 或 6 个项目的链接，从其他页面有大约十几个不同项目的链接，等等。

当真正的用户访问该站点时，他们可以使用搜索表单按关键字或位置查找项目 - 因此会生成一个与他们的搜索条件相匹配的列表。但是，例如，当 google 爬虫访问该站点时，它甚至不会尝试将文本放入关键字搜索字段并提交表单。因此，就机器人而言，在索引整个站点之后，它最多只覆盖了几十个项目。自然，我希望它单独索引每个单独的项目。我在这里有什么选择？

我考虑的一件事是检查用户代理和 IP 范围，如果请求者是机器人（我可以说是最好的），然后在最相关页面的末尾添加一个 div，其中包含指向每个单独项目的链接。是的，这将是一个巨大的页面加载 - 我不确定谷歌机器人会如何对此做出反应。

还有什么我可以做的吗？这里有哪些最佳实践？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:41:01.440

> 我考虑的一件事是检查用户代理和 IP 范围，如果请求者是机器人（我可以说是最好的），然后在最相关页面的末尾添加一个 div，其中包含指向每个单独项目的链接。是的，这将是一个巨大的页面加载 - 我不确定谷歌机器人会如何对此做出反应。

那将是一件**非常**糟糕的事情。专门为了搜索引擎的利益而向搜索引擎提供不同的内容被称为[伪装](http://en.wikipedia.org/wiki/Cloaking)，是让您的网站被禁止的好方法。甚至不考虑它。

每当网站管理员担心他们的页面被索引时，使用 XML 站点地图是确保搜索引擎了解您网站内容的一种简单方法。如果您的站点是数据库驱动的，它们也很容易创建和更新。XML 文件不必是静态的，因此您可以在搜索引擎请求时动态生成它（Google、Yahoo 和 Bing 都支持 XML 站点地图）。您可以在[sitemaps.org](http://www.sitemaps.org/)找到有关 XML 站点地图的更多信息。

如果您想让您的内容可供搜索引擎使用并希望从语义标记（即 HTML）中受益，您还应该确保您的所有内容都可以通过超链接访问（换句话说，不能通过表单提交或 JavaScript）。原因有两个：

1.  您的项目链接中的锚文本将包含您想要获得良好排名的关键字。这是权重更大的排名因素之一。
2.  链接算作“投票”，尤其是对 Google 而言。来自外部网站的链接，尤其是相关网站的链接，是您听到人们推荐最多且有充分理由的内容。拥有它们很有价值。但是内部链接也很重要，并且可以成为支撑内部项目页面的好方法。
3.  （奖励）谷歌有 PageRank，它曾经是他们排名算法的重要组成部分，但现在只占很小的一部分。但它仍然具有价值，并且链接“传递”PageRank 到它们链接的每个页面，以增加该页面的 PageRank。当您拥有尽可能多的页面时，就会有很多潜在的 PageRank 可以传递。如果您的网站建设得很好，您可能仅通过内部链接就可以让您的主页达到 6 的 PageRank。

拥有以某种方式链接到所有产品的 HTML 站点地图是确保搜索引擎和用户可以轻松找到所有产品的好方法。还建议您构建您的网站，使更重要的页面更接近您网站的根（主页），然后随着您的分支进入子页面（类别），然后是特定项目。这让搜索引擎了解哪些页面是重要的，并帮助他们组织它们（这有助于他们对它们进行排名）。它还可以帮助他们从上到下跟踪这些链接并找到您的所有内容。

> 每个项目都有自己的详细信息页面，可通过以下方式访问
> 
> [http://www.mysite.com/item.php?id=item_id](http://www.mysite.com/item.php?id=item_id)
> 
> 或者
> 
> [http://www.mysite.com/item.php/id/title](http://www.mysite.com/item.php/id/title)

这对SEO也不利。当您可以使用两个不同的 URL 拉出同一页面时，您的网站上有重复的内容。谷歌正在努力提高其索引的质量，他们认为重复的内容质量低下。他们臭名昭著的熊猫算法部分用于查找和惩罚内容质量低下的网站。考虑到您拥有多少产品，因此受到处罚只是时间问题。幸运的是，解决方案很简单。您只需要为您的产品页面[指定一个规范的 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。我推荐第二种格式，因为它对搜索引擎更友好。

阅读[我在 Pro Webmaster 网站上对 SEO 问题的回答，](https://webmasters.stackexchange.com/questions/12960/seo-how-to-separate-fact-from-fiction/13007#13007)了解有关 SEO 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:58:24.620

我建议初学者有一个 xml 站点地图。生成所有页面的列表，并通过网站管理员工具将其提交给 Google。拥有一个“友好”的站点地图也没有什么坏处——从首页链接到，其中列出了所有这些页面，最好也按类别列出。

如果您关心 SEO，那么拥有指向您页面的链接非常重要。Google 可以看到您的页面并认为“哇，太棒了！” 并给你很多权限——这个权限（有些人喜欢称之为链接汁”然后传递给从它链接的页面。你应该建立一个文件层次结构，更重要的文件更接近顶部和/或使其宽而不是深。

此外，在某些情况下，向 Google 爬虫显示与“正常”访问者不同的内容可能是有害的，如果 Google 认为您正试图欺骗它。

抱歉——这里对谷歌有点偏见——但其他引擎是相似的。

# css - 是否可以使用当前浏览器使用伪类来检测某个类的第一个和最后一个？

> ID：10230416
> 
> 赞同：3
> 
> 时间：2012-04-19T14:35:10.367
> 
> 标签：css, css-selectors, pseudo-class

如果您有 HTML：

```
<section class="column">
  <p> Some Test </p>
  <p> Some Test </p>
  <p> Some Test </p>
</section>

<section class="column">
  <p> Some More Test </p>
  <p> Some More Test </p>
  <p> Some More Test </p>
</section>

<section class="someotherclass">
  <p> Some More Test </p>
  <p> Some More Test </p>
  <p> Some More Test </p>
</section> 
```

和 CSS：

```
.column:last-child { background:red; } 
```

[http://jsfiddle.net/WYu24/](http://jsfiddle.net/WYu24/)

有没有办法让`:last-child`选择器选择最后一次出现的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:37:22.503

目前在 CSS 中没有用于查找具有特定类的第一个或最后一个子级的快捷语法或伪类。¹

我使用一种压倒一切的技术来为具有某个类的第一个孩子设置样式，我在[这个答案](https://stackoverflow.com/a/8539107/106224)中详细描述了它。但是，由于兄弟组合器的工作方式，这种技术[不能应用于具有特定 class 的最后一个孩子](https://stackoverflow.com/posts/comments/8894122)。

我不知道有什么纯 CSS 方法可以针对最后一个拥有某个班级的孩子。您必须使用 JavaScript 或重组您的标记才能做到这一点。如果确实有一个这样的元素，那么使用 jQuery，您可以简单地使用`:last`选择器添加一个类，然后您可以使用 CSS 设置样式：

```
$('.column:last').addClass('last'); 
```

```
.column.last { background:red; } 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/WYu24/1)

* * *

^(1 Selectors 4 中提出了) [一些[新的伪类，](http://www.w3.org/TR/selectors4/#nth-last-match)它们可以满足要求，但是浏览器要再过几个月或规范更稳定才会开始实现它，即使那样我们也不知道这些伪类是否-classes 会坚持下去，因为当前的语法看起来很尴尬：]

```
:nth-last-match(1 of .column) { background:red; } 
```

# debugging - 使用 SOSEX 和 dlk 命令检测死锁时遇到问题

> ID：10230427
> 
> 赞同：1
> 
> 时间：2012-04-19T14:35:52.053
> 
> 标签：debugging

我已经组合了一个简单的控制台应用程序，该应用程序使用 Monitor 死锁，我正在尝试使用 SOSEX 调试扩展来检测死锁。使用 dlk 命令时收到以下消息。

*正在检查 SyncBlocks... 无法检索同步块数据。错误 = 0x80070057。正在扫描 ReaderWriterLock 实例... 无法加载 App Domain 商店数据。错误 = 0x80070057 未能检索堆数据。错误 = 0x80070057。正在扫描 ReaderWriterLock 锁的持有者... 无法加载 App Domain 存储数据。错误 = 0x80070057 扫描 ReaderWriterLockSlim 实例...扫描 ReaderWriterLockSlim 锁的持有者...检查 CriticalSections...未检测到死锁。*

关于错误意味着什么以及如何解决它的任何想法？谢谢

# c# - Code First 导航属性被保留但未加载

> ID：10230430
> 
> 赞同：2
> 
> 时间：2012-04-19T14:35:55.607
> 
> 标签：c#, entity-framework

我一直在开发一个数据库的框架，它将支持在 EF 4.3.1 中使用 Code First 对数据进行版本控制。

几天前，我让模型持续存在并正确加载，但从那以后我破坏了一些东西，我不知道出了什么问题。所有的类都被映射并创建了表，数据也被持久化了。所以在存储方向上，一切正常！但是，当我尝试加载`Registration`实体时，这些值都是默认构造函数设置的值。我在想也许在`Registration`调用构造函数后数据没有被加载，但我现在已经无法弄清楚发生了什么！

基础是这两个类，我的verion-able类派生自...

```
public abstract class VersionBase<T> {
    [Key]
    public Int64 Id { get; protected set; }
    public DateTime CreationDateTime { get; protected set; }

    // Value is virtual to support overriding to let deriving classes specify attributes for the property, such as [Required] to specify a non-nullable System.String
    public virtual T Value { get; internal set; }

    protected VersionBase() {
        CreationDateTime = DateTime.Now;
    }

    protected VersionBase(T value)
        : this() {
        Value = value;
    }
}

public abstract class VersionedBase<TVersion, TBase>
    where TVersion : VersionBase<TBase>, new() {
    [Key]
    public Int64 Id { get; protected set; }
    public virtual ICollection<TVersion> Versions { get; protected set; }

    protected VersionedBase() {
        Versions = new List<TVersion>();
    }

    [NotMapped]
    public Boolean HasValue {
        get {
            return Versions.Any();
        }
    }

    [NotMapped]
    public TBase Value {
        get {
            if (HasValue)
                return Versions.OrderByDescending(x => x.CreationDateTime).First().Value;
            throw new InvalidOperationException(this.GetType().Name + " has no value");
        }
        set {
            Versions.Add(new TVersion { Value = value });
        }
    }
} 
```

派生类的例子...

```
public class VersionedInt32 : VersionedBase<VersionedInt32Version, Int32> { }

public class VersionedInt32Version : VersionBase<Int32> {
    public VersionedInt32Version() : base() { }
    public VersionedInt32Version(Int32 value) : base(value) { }
    public static implicit operator VersionedInt32Version(Int32 value) {
        return new VersionedInt32Version { Value = value };
    }
} 
```

...和...

```
public class VersionedString : VersionedBase<VersionedStringVersion, String> { }

public class VersionedStringVersion : VersionBase<String> {
    public VersionedStringVersion() : base() { }
    public VersionedStringVersion(String value) : base(value) { }
    public static implicit operator VersionedStringVersion(String value) {
        return new VersionedStringVersion { Value = value };
    }

    /// <summary>
    /// The [Required] attribute tells Entity Framework that we want this column to be non-nullable
    /// </summary>
    [Required]
    public override String Value { get; internal set; }
} 
```

我的调用代码是这样的......

```
static void Main(String[] args) {
    using (var db = new VersionedFieldsContext()) {
        Registration registration = new Registration();
        registration.FirstName.Value = "Test";
        registration.FirstName.Versions.Add("Derp");
        db.Registration.Add(registration);
        db.SaveChanges();
    }
    using (var db = new VersionedFieldsContext()) {
        Registration registration = db.Registration.First();
        // InvalidOperationException at next line: "VersionedString has no value"
        String asdf = registration.FirstName.Value;
    }
}

public class Registration {
    [Key]
    public Int64 Id { get; set; }
    public DateTime CreationDateTime { get; set; }
    public VersionedString FirstName { get; set; }

    public Registration() {
        CreationDateTime = DateTime.Now;
        FirstName = new VersionedString();
    }
}

public class VersionedFieldsContext : DbContext {
    public DbSet<Registration> Registration { get; set; }

    public VersionedFieldsContext() {
        Database.SetInitializer<VersionedFieldsContext>(new DropCreateDatabaseIfModelChanges<VersionedFieldsContext>());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:33:11.540

您需要进行两项更改：

*   `FirstName`从构造函数中删除实例化，`Registration`以便构造函数只有：

    ```
    public Registration() {
        CreationDateTime = DateTime.Now;
    } 
    ```

    在实体的默认构造函数中创建导航*引用（不是集合）的实例会导致已知问题：*[什么会导致实体框架在现有数据上保存未加载（但可延迟加载）的引用？](https://stackoverflow.com/questions/6779226/what-would-cause-the-entity-framework-to-save-an-unloaded-but-lazy-loadable-re/6780912#6780912)

*   如果您已修复第一点，您的自定义异常将更改为`NullReferenceException`. 要解决此问题，请使用`FirstName`属性，`Registration` `virtual`因为第二个`using`块中的代码需要延迟加载：

    ```
    public virtual VersionedString FirstName { get; set; } 
    ```

**编辑**

创建注册并自动实例化的解决方法`FirstName`可能是工厂方法：

```
public class Registration {
    [Key]
    public Int64 Id { get; set; }
    public DateTime CreationDateTime { get; set; }
    public VersionedString FirstName { get; set; }

    public Registration() {
        CreationDateTime = DateTime.Now;
    }

    public static Registration Create() {
        return new Registration {
            FirstName = new VersionedString()
        }
    }
} 
```

EF 在具体化对象时使用默认构造`Registration`函数。在您的自定义代码中，您可以在需要创建以下实例时使用工厂方法`Registration`：

```
var registration = Registration.Create(); 
```

当您使用更改跟踪或延迟加载代理并希望手动创建代理实例时，它可能不太有用：

```
var registration = db.Registration.Create(); 
```

这将再次调用默认构造函数，您必须在`FirstName`创建对象后实例化。

# visual-c++ - 直接展示示例中的视频捕获 (AMCap)

> ID：10230431
> 
> 赞同：0
> 
> 时间：2012-04-19T14:35:59.503
> 
> 标签：visual-c++, directshow

我正在使用 Direct show samples (AMCap) 来捕获实时视频流。视频似乎很完美，但它没有在其中捕获音频。我无法找出原因。谁能帮我解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:07:06.140

早期的 SDK，例如[Microsoft® DirectX® 9.0 SDK 更新（2004 年 10 月）](http://www.microsoft.com/download/en/details.aspx?id=19320)，包含更多示例，包括音频捕获，例如：

\DirectShow\Samples\C++\DirectShow\Capture\AudioCap

> **AudioCap** 注意：为了将 .WAV 文件写入您的磁盘，您必须首先在 Samples\Multimedia\DirectShow\Filters\WAVDest 目录中构建和注册 WavDest 过滤器。如果没有此过滤器，您可以试听音频输入，但无法将其写入磁盘。

# sharepoint-2010 - 用于填充新表单的 SharePoint 2010 BCS URL 操作的语法

> ID：10230432
> 
> 赞同：0
> 
> 时间：2012-04-19T14:36:00.697
> 
> 标签：sharepoint-2010, query-string, bcs

看过几篇关于本机 SharePoint 列表解决方案的帖子，包括非常有用的 SPUtility.js（仅适用于本机 SharePoint 列表）。但是没有什么可以将值从 BCS 列表传递到新的 BCS 列表。查询字符串过滤器不会在新表单上连接（没有 Web 部件可以连接到它），并且在列表页面上对我没有好处（已经可以使用）。

“为一切编写自定义代码”对我来说不是解决方案。

应该有一种方法来 1) 传递 URL 中的值（理想 - 语法是什么？）或 2) 进行一些其他简单的更改，也许是对项目的选择列表 - 我只是找不到它。看过不少类似问题的帖子。Microsoft 文档没有用，关于“社交”主题的问题多于答案。

这是我所拥有的：

我有一个与 BCS 相关列表（接收项目）绑定的 BCS 列表（发送项目）。

我在相关列表 (ECT) 上有一个操作来创建一个新项目。没有参数就可以正常工作。我得到一个空白的新表格。新表格允许我输入两个项目并选择两个项目（完全符合预期）。

我想要的是必要的 ?something=something 字符串，这样我的用户就不必选择其中一个选项（MNumber - 设置为键/必需值）

用户从操作中选择“新建”。Form Opens MNumber 是根据 BCS 相关列表中显示的当前项目的 MNumber 自动填写的。

1.  我提供的字符串被接受。什么也没做。/intake/Lists/ContactsList/NewForm.aspx /intake/Lists/ContactsList/NewForm.aspx?MNumber=1234

2.  我提供的字符串被拒绝 - 无法保存或值不足。/intake/Lists/ContactsList/NewForm.aspx?MHICNumber={$MHICNumber}

还尝试将字符串传递给文本字段之一（而不是选择字段）。也不能让它工作。我在各种板子上花了好几个小时。没什么帮助。

如果我可以将 New 表单设置为在弹出窗口中显示（就像我从列表视图中选择 New 时那样），那也会更好。打开一个新的浏览器窗口是很笨拙的，而替换现有的浏览器窗口对用户来说是一种导航痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:26:23.510

有这个工作......感谢Kit Menke！

在 BCS 中的外部内容类型上创建了一个操作......

```
/intake/Lists/ContactsList/NewForm.aspx?IDnumber={0}&Source=/intake/scheduling.aspx 
```

在哪里

参数属性 0 是来自 ECT 的 IDNumber

对 NewForm.aspx 进行了编辑，以添加一个隐藏的内容编辑器 Web 部件，其中包含对 Kit 编写的三个脚本的引用——两个支持，一个设置值。

```
http://site/list/NewForm.aspx?toolpaneview=2 
```

1.  用户在显示的 ECT 列表上选择操作
2.  操作使用 URL 转到包含数据的新页面
3.  Kit 的脚本将数据添加到表单中并输入日期和时间。

注意：ID 字段需要是文本字段。不能是选择列表。

# javascript - Javascript：getElementsByTag DOM，动态 src 引用

> ID：10230434
> 
> 赞同：1
> 
> 时间：2012-04-19T14:36:04.877
> 
> 标签：javascript, dom, dynamic, getelementsbytagname

过去一周我一直在做这方面的工作，但我不知道为什么这不起作用。

我正在尝试使用外部 javascript 文件来提取 html 页面上的所有 img 标签，并在用户将鼠标悬停在图像上时动态地换出图像（通过更改 src）。当用户将鼠标悬停在图像上时，我可以更改图像，但是当它变回时，它不会与正确的图像协调（图像 1、2、3、4 将全部更改为图像 5）。

这是html。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
            <html>
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <script src="JS1.js" type="text/javascript" /></script> 
            <title>main</title>
            </head>

            <body>
                <div id="divCont"> 
                    <img src="images/button1_out.gif" id="button1" /> <br /> 
                    <img src="images/button2_out.gif" id="button2" /> <br /> 
                    <img src="images/button3_out.gif" id="button3" /> <br /> 
                    <img src="images/button4_out.gif" id="button4" /> <br /> 
                    <img src="images/button5_out.gif" id="button5" /> <br /> 
                </div> 
            </body>
            </html> 
```

这是javascript：

```
window.onload = function()
{
    var arrImgs = document.getElementsByTagName("img");
    for(var i = 0; i < arrImgs.length; i++)     {
            var elemImg = arrImgs[i]; 
            //alert(elemImg.id);

            elemImg.onmouseover = function()    {
                    //alert(this.src);
                    //var targetId = this.src;
                    this.src = "images/" + elemImg.id + "_over.gif";
                    //alert(this.src);
                }
            elemImg.onmouseout = function()     {
                    //alert(this.src);

                    this.src = "images/" + elemImg.id + "_out.gif";
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:02:55.020

这就是发生这种情况的原因 - 在您创建了事件处理程序之后，它们仍然引用 elemImg 变量。在循环结束时，该变量等于您将其设置为的最后一个值（第 5 个元素）。因此，稍后执行的任何对 elemImg 的引用都将引用第 5 个元素。

以下是解决方法：在 mouseout/mouseover 函数中，使用“this.id”而不是“elemImg.id”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:02:41.727

在您的代码中尝试使用`this.id`而不是`elemImg.id`.

# php - 用于编写多步骤订单表格的理想语言

> ID：10230435
> 
> 赞同：0
> 
> 时间：2012-04-19T14:36:05.120
> 
> 标签：php, forms, html, dynamic, webforms

我需要创建一个多步骤动态订单表格。会有3-4页的问题。当有人做出选择时，最后会有一个 div 摘要，其中包含所有选择。然后，客户端可以通过单击该条目编辑链接来编辑选择。该表格将包含文本框、项目符号和动态谷歌地图。在这个过程结束时，我想收到一封包含谷歌地图以及选择的电子邮件。

我不是在找人来帮我做这件事，我只是在找人给我指出正确的方向，这样我就可以研究完成这项工作所需的适当技术。我将使用 Google Static Maps Api v2 和 jquery。宁愿将其保留为 html5 文档，但 php 也可以。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:29:12.200

这听起来像是一个非常标准的动态订单表格。您可以将 html5 用于输入类型，但除此之外，我不会使用任何特定的 html5 技术（除非您真的想要本地存储，以防有人意外离开并回来或其他情况）。如果您了解 PHP，它可以作为带有`_SESSION`.

这不是一个极端的项目，因此不难找到有关如何使用 HTML/PHP 执行此操作的资源。为什么不从更简单的形式开始并从那里构建呢？

# c# - 如何针对一组可变的值范围进行验证？

> ID：10230437
> 
> 赞同：2
> 
> 时间：2012-04-19T14:36:19.730
> 
> 标签：c#, wpf, oop, validation

我目前正在开发一个允许用户读取和配置设备的应用程序。配置存储为 XML。

我面临的问题是如何为应用程序定义验证。例如，我存储在 XML 文件中的大多数值必须在不同的范围内，例如 0 - 2、1 - 50、10 个字符或 20 个字符等。

我必须验证很多这些约束，并且我不想对范围进行硬编码，因为当设备的第 2 版发布时，配置文件将具有不同的范围集。例如，不是 0 - 2，而是 0 - 4，现在允许使用 40，而不是 20 个字符。

我应该如何处理这个？我应该将验证规则存储在单独的 XML 文件中吗？我是否应该为此设备定义一个具有硬编码配置范围的类，并为该设备的第 2 版及其配置范围创建一个新类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:48:59.173

它*可以*在`XML`一种声明式编程中完成，在其中`XML`定义一种行为。但它并不灵活，您可以轻松地跳入相当复杂的场景。

我个人更愿意做的是维护代码内部的逻辑，但是必须检查源 XML 中的数据的参数范围是否存储在一些`MatchData.xml`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:53:35.967

在这种情况下，我几乎总是更喜欢外部配置文件。您可以定义一个执行验证的对象（验证器）。当验证器对象被实例化时，它会实例化一个包含各种验证项的所有范围的验证规则对象。我将使用 XML 文件序列化/反序列化此对象，并且该文件将包含在您的应用程序分发中。

# mysql - MySQL - 加入 2 个表

> ID：10230438
> 
> 赞同：6
> 
> 时间：2012-04-19T14:36:20.100
> 
> 标签：mysql, select, join, max

我有 2 张桌子：用户和余额。

我想将用户表中的所有详细信息（所有元组的所有字段）与余额表中的最新条目（由用户 ID 链接的 1 个字段）连接起来。

这是表的结构：

平衡：

```
+---------+
| Field   |
+---------+
| dbid    |
| userId  |
| date    |
| balance |
+---------+ 
```

用户：

```
+-------------+
| Field       |
+-------------+
| dbid        |
| id          |
| fName       |
| sName       |
| schedName   |
| flexiLeave  |
| clockStatus |
+-------------+ 
```

我已经尝试了几个小时来做​​到这一点，我能得到的最接近的是为单个用户返回一行：

```
SELECT u.*, b.balance, b.date 
FROM users u, balance b 
WHERE
    u.id = b.userId AND
    b.date = (SELECT MAX(date) FROM balance WHERE userId = 'A8126982'); 
```

或者我可以选择所有用户，但不选择余额表中的最新条目：

```
SELECT u.*, b.balance, b.date 
FROM users u, balance b 
WHERE u.id = b.userId GROUP BY u.id; 
```

我尝试了许多不同的查询，似乎越来越近了，但我就是无法到达我想去的地方。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T14:40:44.563

您可以使用您编写的第一个 SQL，但适用于所有用户：

```
SELECT u.*, b.balance, b.date
FROM users u JOIN balance b ON u.id = b.userId
WHERE b.date = (SELECT MAX(date) FROM balance WHERE userId = u.id); 
```

这可能不是获得结果的最快方法，但它会给你你所需要的。我在我的应用程序的很多地方都使用了类似的查询。

# ios - iOS：没有 iTunes 的文件共享？

> ID：10230443
> 
> 赞同：8
> 
> 时间：2012-04-19T14:36:23.597
> 
> 标签：ios, itunes, file-sharing

我为 iOS 开发了一个企业应用程序，用户应该能够将文件从桌面添加到应用程序。

我使用文件共享实现了这一点，效果很好。

现在这家公司想从他们的机器中删除 iTunes（这是可以理解的，iTunes 是一个非常具有侵入性的过程）。

问题是，是否仍然可以在没有 iTunes 的情况下以某种方式使用文件共享？也许与另一个应用程序？

或者还有什么其他方式可以将文件发送到应用程序（最好不需要互联网连接）

//编辑：必须在 Windows 7 上运行，并且必须不需要安装 iTunes（还有一些其他工具允许访问 iPad 文件系统，但它们通过 iTunes 安装的驱动程序）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:28:23.350

您可以通过本地无线网络交换数据（不需要连接到互联网，只需 iOS 设备和 Windows 计算机需要在同一网络上）。

* * *

一种选择：

然后，您可以在 iOS 应用程序和 Windows 应用程序之间通过套接字创建简单的 TCP/IP 连接，并交换所需的数据。

但是，您可能需要实现一个合适的简单 Windows 应用程序来执行此操作。

* * *

另一个可能更简单的解决方案：

您可以在您的 iOS 应用程序中启动一个网络服务器并在屏幕上显示它的 IP。通过在台式计算机上的浏览器中输入此 IP，您可以访问 iOS 设备上的网站，这可以使文档可供下载或接收上传。

如何做到这一点，看看[这个](https://stackoverflow.com/questions/8417321/run-a-webserver-on-an-ios-device)问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:34:38.280

There are a number of ways to achieve this, ranging from trivial to sophisticated.

Your question says that you would prefer to avoid an internet connection. Simple solutions may require it - if you want to abstract the difficult parts, you're going to have to let somebody do the dirty work, and that's probably going to be someone(thing) on the internet. Midrange solutions may require a network but not internet connection. A sophisticated solution could probably be whatever you want - but one thing I would say, is that trying to tap into the USB connector is either going to result in a hacktastic or very complicated solution to implement.

One method would be to integrate a third party framework that basically does what your looking for. Look at the Dropbox development kit, for example - allowing Windows (or any platform) users to drop files on their desktops into a shared dropbox, and this can then be read by an iOS application which includes the iOS drobox API.

Another method would be to setup a simple WebDAV server in your office. Host it on a windows box, or a cheap linux box. Give users desktop's access to the share via whatever protocol you want (eg, Windows File Sharing). Then you'd implement a WebDAV client in your app (eg, WTClient) to pull files.

Finally, you could build your own transmission system. A sophisticated example might involve Bonjour and TCP/IP, a simpler-but-custom solution may involve a simple JSON web service running off a local (or remote) server.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:45:15.370

我有建议，但这需要互联网。我建议您在 Windows 和 iPhone 中都使用 DropBox API。使用起来非常棒，文件共享也非常简单。现在每天每个人都有保管箱帐户并在其中共享文件。因此，除了一点实现之外，不应该花费任何成本（这种学习也可以用于其他文件共享应用程序）。以下是一些指导：

[iOS](https://www.dropbox.com/developers/start/setup#ios)

[REST API](https://www.dropbox.com/developers/reference/api)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:19:26.477

您可以使用安装在 PC 上的简单 Ftp 服务器，这样您就可以从 Ios 连接到服务器并从 iOS 上传/下载文件到 PC....

[http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html)

所有工作都由 PC 完成，您的应用程序将使用 PC 的 IP（Intranet 或 Internet）来共享所有文件。

您可以从 Ios 读取 FTP 服务器中的所有文件并使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:15:56.593

我使用 FileBrowser 应用程序通过 WiFi 访问网络共享，并允许您将支持的文件加载到设备。负责的公司正在创建一个 API，以允许您在自己的应用程序中执行此操作：[https ://twitter.com/#!/Stratospherix/status/193114857271336960](https://twitter.com/#!/Stratospherix/status/193114857271336960)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T15:44:42.993

[您可以使用Apple Configurator](http://itunes.apple.com/app/apple-configurator/id434433123?mt=12%20Apple%20Configurator)将应用程序和文档添加到 USB 连接的设备

# javascript - 未捕获的 TypeError 对象没有方法“禁用”

> ID：10230451
> 
> 赞同：0
> 
> 时间：2012-04-19T14:36:50.757
> 
> 标签：javascript, jquery

在我以前版本的应用程序中，这段代码运行良好：

```
form.find('input').disable(); 
```

对于新环境（Rails 3.3 和新版本的 JQuery），这不再起作用。

我得到的错误是：

> 未捕获的 TypeError 对象 [对象对象] 没有方法“禁用”。

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:49:49.113

```
[].forEach.call( form.elements, function ( el ) { el.disabled = true } ) 
```

或者在 jQuery 中可能...

```
$(document.forms['form_name'].elements).each(function() {
   this.disabled = true;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:38:44.280

不要使用`disable()`而是`prop("disabled", true)`代替。

据我所知，`disable()`jQuery 中从来没有方法

# c# - 从空表 SQL 中获取最新的身份，例如 ID

> ID：10230458
> 
> 赞同：2
> 
> 时间：2012-04-19T14:37:03.247
> 
> 标签：c#, sql, database

我注意到 SQL 会跟踪最新的身份（每次创建新记录时它都会自动增加字段）。我想使用 C# 从表中检索最新的身份。不幸的是，大多数时候表是空的（记录会在一段时间后被写入和删除，所以表经常是空的）。这是否可以在 C# SQL API 的范围内执行此操作，还是我必须创建一个存储过程来检索它？

![在此处输入图像描述](../Images/74f58408f2052fa4989734dbe1a14379.png)

为了更好地解释。如果上面的行被删除，下一条记录的下一个 ID 号将是 32。我想在写入记录之前检索 32，在表为空的情况下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:40:44.060

```
SELECT IDENT_CURRENT('table_name')+1; 
```

* * *

> IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的最后一个标识值。

[http://msdn.microsoft.com/en-us/library/ms175098.aspx](http://msdn.microsoft.com/en-us/library/ms175098.aspx)

* * *

然而，虽然这显示了下一个 ID 将是什么，但这并不总是意味着它将是您输入的下一个 ID。别人可以`INSERT`在你之前创造新的记录。

简而言之，没有办法返回您接下来将插入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:41:12.547

那将是以下查询

> DBCC CHECKIDENT ('[TableName]', NORESEED )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:49:38.440

以防增量不是常规的“1”：

```
SELECT IDENT_CURRENT('mytable') + IDENT_INCR('mytable') 
```

当然，所有这些都依赖于已一致填充的标识列，即不会干扰手动插入或重新播种。并且 Curt 提到了如果您要直接使用此 ID 进行插入，可能会出现并发问题。

# c++ - 使用 C++ 的模板

> ID：10230464
> 
> 赞同：-1
> 
> 时间：2012-04-19T14:37:17.077
> 
> 标签：c++, templates, object

我尝试在以下代码中使用模板，但我在 main 函数的第一行遇到了问题！

```
{
  #include <iostream>
  using namespace std;
  template <class T>
  struct node
  {
        T inf;
         node<T> * next;
 };
 template <class S>
 class String
{
     private :
            int Slength;
          node<S> * SS;
   public :
         void get_String()
         {
              SS = new node<S>;
              SS -> next = NULL;
              node<S> * now = SS; 
              char input;
              while(input = getchar())
              {
                          if((input =='\n') || (input == ' ') || (input == '\t'))
                                    break;
                          now -> inf = input;
                          now -> next = new node<S>;
                          now = now -> next;
                          now -> next = NULL;
                          ++Slength;
              }
         }
         void show()
         {
              node<S> * now = SS;
              while(now -> next != NULL)
              {
                        cout << now -> inf ;
                        now = now -> next;
              }
              cout << endl;
         }
 };
 int main()
 {
 String a;
 a.get_String();
 a.show();
 cout << char(0) << " " << int(' ') << " " <<endl;  
 system("pause");
 return 0; 
 } 
```

我通过添加解决了问题

```
<char> 
```

在那之后！有没有其他好的和有效的方法。你知道任何可靠且可读的模板参考吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:39:37.870

由于`String`是一个模板类，它应该是：

```
String<char> a; 
```

# java - 具有简单数据库的 Android 应用程序架构

> ID：10230465
> 
> 赞同：2
> 
> 时间：2012-04-19T14:37:20.093
> 
> 标签：java, android, database, sqlite, architecture

我想构建一个相当简单的 Android 应用程序。我的应用程序的基本数据模型由几个基本元素组成，它们之间存在关系。

我希望数据是持久的，所以我正在考虑使用 sqlite DB。我查看了 Android 开发者网站，发现与我的问题最接近的是“NotePad 教程”，它使用 sqlite DB 来存储笔记。

我想现在我已经掌握了基础知识，但我仍然有一些问题：

1.  在本教程中，他们在数据库中只有一个表。如果我的应用程序需要更复杂的方案 - 我是否仍应使用相同的方法？那就是 - 把所有东西都放在一个子类中`SQLiteOpenHelper`？还是有更“结构化”的方式？
2.  我应该为存储在我的数据库中的所有数据元素创建类吗？我的意思是这是我学到的我**应该**做的，但在文档中没有任何暗示。
3.  如果我应该创建类 - 我应该如何正确使用它们？我的意思是，由于查询的结果是一个`Cursor`对象，而不是行的集合，我应该/可以将其解析为对象吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:51:45.303

1.  在同一个子类中定义所有表，这样可以很容易地在一个地方查看所有表，并可能为升级等编写 SQL

2.  是的，这将更容易在 java 端进行操作并使代码更干净

3.  从光标中读取并一一初始化对象的arraylist。

# php - 可以传递到特殊输出流 php://output 的数据量是否有限制？

> ID：10230467
> 
> 赞同：0
> 
> 时间：2012-04-19T14:37:22.783
> 
> 标签：php, csv, symfony1, http-headers

我目前正在测试通过 webapp 生成的报告的新导出到 CSV 功能。相关代码如下所示：

```
$my_report_data = ReportDAO::runCampaignAnalysis($campaign_id, $start_date, $end_date);

$this->getResponse()->clearHttpHeaders();
$this->getResponse()->setHttpHeader('Content-Type', 'application/vnd.ms-excel');
$this->getResponse()->setHttpHeader('Content-Disposition', 'attachment; filename='export.csv');

$outstream = fopen("php://output", "w");

function __outputCSV(&$vals, $key, $filehandler) {
     $retval = fputcsv($filehandler, $tempArray);
     if($retval == FALSE) {
         error_log('Uh oh, spaghetti o!');
         error_log('The current line being processed is: ' . join('|', $vals));
     }
 }

 array_walk($my_report_data, "__outputCSV", $outstream);
 fclose($outstream);

 return sfView::HEADER_ONLY; 
```

[$my_report_data 只是此处所示](http://www.php.net/manual/en/function.fputcsv.php#100033)形式的多维数组。

该代码完美地适用于小型数据集，例如 100 行及以下（不幸的是，不太确定截止点在哪里）。拥有更大的数据集；但是，当我尝试导出为 CSV 时，我的浏览器并没有显示文件打开/保存对话框，而是在网页上显示原始报告内容。

我使用 Firefox 的“Live HTTP Headers”插件检查了 HTTP 标头，发现对于较大的数据集，标头设置不正确并显示为“text/html”；charset=utf-8' 而不是 'application/vnd.ms-excel'。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:44:12.000

奇怪：您可能想尝试定期刷新输出缓冲区。我发现我需要这样做以防止类似的错误。类似于以下内容：

```
if($len > 250){ $len = 0; if(ob_get_length()) ob_flush(); } 
```

哪里`$len`是行数。将其放入您的中很麻烦`array_walk`，但这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:45:23.707

我相信我已经找到了一个可能的解决方案。不完全确定它为什么起作用；但确实如此。我只是在调用 clearHttpHeaders 之前添加了以下内容：

```
ob_start('ob_gzhandler'); 
```

像魅力一样工作。

# git - 临时将工作副本切换到特定的 Git 提交

> ID：10230469
> 
> 赞同：294
> 
> 时间：2012-04-19T14:37:24.463
> 
> 标签：git, commit, temporary

如何切换到特定的 Git 提交**而不丢失之后所做的所有提交**？

我希望本地文件将被更改，但提交的数据库将保持不变，只有当前位置指针设置为当前选定的提交。

我想将文件的状态更改为特定的提交，运行项目，并在完成后将文件恢复到上次提交。

如何在不压缩整个项目文件夹的情况下做到这一点？

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-04-19T14:38:44.283

如果您在某个分店`mybranch`，请继续前进`git checkout commit_hash`。然后您可以通过`git checkout mybranch`. 我今天有同样的游戏将错误一分为二 :) 另外，您应该了解[git bisect](https://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git#_binary_search)。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-04-19T14:39:22.533

首先，使用`git log`查看日志，选择您想要的提交，记下用于识别提交的 sha1 哈希。接下来，运行`git checkout hash`. 完成后，`git checkout original_branch`. 这具有不移动 HEAD 的优点，它只是将工作副本切换到特定的提交。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-09-17T07:21:38.387

除了此处向您展示的其他答案之外，`git checkout <the-hash-you-want>`值得知道您可以切换回您使用的位置：

```
git checkout @{-1} 
```

这通常比：

```
git checkout what-was-that-original-branch-called-again-question-mark 
```

如您所料，`git checkout @{-2}`将带您回到您在 2 `git checkout`s 前所在的分支，对于其他号码也是如此。如果你能记住你在哪里获得更大的数字，你应该为此获得某种奖牌。

* * *

可悲的是，对于生产力来说，`git checkout @{1}`它没有带你去你将来会去的分支，这是一种耻辱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-25T05:07:27.137

我曾经实现过 git checkout @{10} 并且工作正常，然后我的大杯焦糖咖啡突然掉到了电脑上，然后......

# asp.net-mvc - 在页面加载时填充部分视图

> ID：10230472
> 
> 赞同：0
> 
> 时间：2012-04-19T14:37:34.433
> 
> 标签：asp.net-mvc, asp.net-ajax, partial-views

我正在开发一个 MVC 项目并使用 Ajax 来显示班次列表。

这是我的父页面 shifts.c​​html：

```
@model UI.ViewModels.ViewModelShiftList

<h2>Shifts</h2>

 @Ajax.ActionLink("View All Shifts", "AllShifts", "Shifts",
                                    new AjaxOptions
                                    {
                                        UpdateTargetId="searchResults",
                                        HttpMethod="GET", //default
                                        InsertionMode= InsertionMode.Replace, //replace
                                        LoadingElementId="progress"
                                    })

   <div id="searchResults">

     @Html.RenderPartial("_ShiftList",model)

    </div> 
```

继承上述页面的控制器操作：

```
public ActionResult Shifts()
    {
        ViewModelShiftList viewModel = new ViewModelShiftList
        {
            Shifts = _shiftService.GetShifts().ToList()
        };
        return View(viewModel);
    } 
```

我是否应该无法将此处生成的视图模型发送到局部视图中？还是我必须为局部视图创建另一个动作？如果是这样，将动作发送到局部视图的控制器的正确方法是什么？

即时错误是在这一点上：

```
@Html.RenderPartial("_ShiftList",model) 
```

// 不能将类型 void 隐式转换为对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:24:48.580

这是一个简单的修复......我需要像这样添加大括号......

```
@{Html.RenderPartial("_shiftlist", Model);} 
```

# c# - showDialog() 无需调用即可显示结果

> ID：10230474
> 
> 赞同：0
> 
> 时间：2012-04-19T14:38:05.477
> 
> 标签：c#, .net, wpf, messagebox, showdialog

我有以下代码行来在 MessageBox 中显示一个窗口：

```
MessageBox.Show(new ElbaKostenstellen(titel, loginid).ShowDialog().ToString()); 
```

问题是，当我关闭它时，另一个 MessageBox 以`true`or开头`false`，但我从未告诉它这样做。我该如何解决？

**这是更相关的代码：**

```
 string ganzes = sr.ReadToEnd();
                    string[] allezeilen = ganzes.Split('\n');

                    for (int i = 0; i < allezeilen.Length - 1; i++)
                    {
                        string[] separated = allezeilen[i].Split(';');

                        String datum = separated[0];
                        String titel = separated[1];
                        if (titel.Contains('"'))
                        {
                            titel = titel.Replace('"', ' ');
                        }
                        String betrag = separated[3];
                        buchrep.bookFromElbaCSV(datum, titel, betrag, loginid);
                        //ElbaKostenstellen ek = new ElbaKostenstellen(titel, loginid);
                        //ek.Show();
                       MessageBox.Show(new ElbaKostenstellen(titel, loginid).ShowDialog().ToString());
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:43:28.000

为了显示调用`ShowDialog`它的表单就足够了，调用 to`MessageBox.Show`是不必要的。尝试;

```
new ElbaKostenstellen(titel, loginid).ShowDialog(); 
```

代替

```
MessageBox.Show(new ElbaKostenstellen(titel, loginid).ShowDialog().ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:48:26.387

让我们看看

```
MessageBox.Show(new ElbaKostenstellen(titel, loginid).ShowDialog().ToString()); 
```

被评估的第一位是

```
new ElbaKostenstellen(titel, loginid).ShowDialog() 
```

这显示了对话框，并且代码的执行被阻止，直到对话框关闭。

然后

```
MessageBox.Show(...) 
```

被执行并显示上一个对话框结果的字符串表示。

`MessageBox.Show(..)`我怀疑你不需要`new ElbaKostenstellen(titel, loginid).ShowDialog()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:44:31.317

你在写这个字符串的时候告诉过它

```
MessageBox.Show(new ElbaKostenstellen(titel, loginid).ShowDialog().ToString()); 
```

因此，您需要在不调用 ShowDialog() 的情况下从 ElbaKostenstellen 获取消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:43:34.980

这是因为 ShowDialog 的返回值是 true 或 false。

如此处所写 - [http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)

> 返回值
> 
> 类型：System.Nullable 布尔类型的 Nullable 值，指定活动是被接受 (true) 还是被取消 (false)。返回值是窗口关闭前 DialogResult 属性的值。

# http-live-streaming - 我应该如何使用 HLS 对 Google TV 的内容进行编码？

> ID：10230476
> 
> 赞同：15
> 
> 时间：2012-04-19T14:38:08.373
> 
> 标签：http-live-streaming, google-tv

HLS 是 Google TV 3.2 的一项功能，对我的内容进行编码以在 Google TV 上观看的最佳方式是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T14:58:31.553

## 如何为 Google TV 实施 HLS

[Http Live Streaming](https://en.wikipedia.org/wiki/HTTP_Live_Streaming)又名[HLS](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08)是 Google TV 支持的流媒体多媒体内容（音频和视频）的标准。

HLS 附带了许多很酷的功能。主要有：

1.  自适应流 - 自动适应拥塞或带宽可用性。
2.  对瞬态网络故障的恢复能力。
3.  您的服务器、路由器或防火墙没有特殊配置。这只是 HTTP 1.1
4.  内容交付网络轻松支持
5.  支持实时流式传输（更多内容见较长文章）
6.  Chrome for Google TV 中的 HTML5 视频标签支持。
7.  可选的 AES 加密（更多内容在更长的文章中）。

在 Google TV 上，HLS 是一个标准协议，您只需将您的 url 放入任何媒体播放 API，例如 MediaPlayer、VideoView 等。它就可以工作。

## HLS 文件的组成部分

.m3u8 - 基于文本的清单或播放列表文件（可能会针对实时内容进行更新） - 变体播放列表通常指向也以 .m3u8 结尾的单个清单 MIME 类型：vnd.apple.mpegURL 或 application/x-mpegURL

.ts - MPEG 2 传输流 - 通常为 5-10 秒长的视频和音频数据。MIME 类型：视频/MP2T

## 为 HLS 创建内容

创建 HLS 内容的最简单方法是使用[Apple 的工具](https://developer.apple.com/streaming/)、最新版本的 Sorenson Squeeze、Telestream 的 Episode 和许多云编码提供商。您从以多种比特率编码的内容开始。对于 Google TV，.m3u8 文件中的第一行是我们开始的速度。最好选择 1.2mbps 流。

自 Google TV 固件版本 3.2 起，Google TV 支持 HLS 协议版本 3。

您的内容 URL 必须在 URL 中包含字符“.m3u8”。如果 URL 不以“.m3u8”结尾，系统将在播放前至少发出 2 次请求，并且播放列表的 MIME 类型必须是“application/vnd.apple.mpegurl”或“application/x-mpegurl”之一”。

注意 - Google TV 目前不支持编解码器切换 - 因此广告片段必须使用与主要内容相同的编码。当然，开发者可以暂停 HLS 播放，播放一些其他内容，然后再次恢复 HLS 播放来解决这个问题。

## 编码

编码内容既是一门艺术，也是一门科学。最佳选择在很大程度上取决于您的内容、对象在背景中移动的速度，以及许多其他项目太多，无法放入[简单的帖子](https://developer.apple.com/library/archive/technotes/tn2218/_index.html)中。它还取决于您定位的设备。以下设置旨在针对 Google TV 进行优化。 [较旧的设备](https://developer.apple.com/documentation/http_live_streaming/hls_authoring_specification_for_apple_devices)可能需要不同/额外的编码。请注意，出于商业目的的某些类型的编码可能需要许可和/或支付版税。

音频编码应该在所有流中保持一致。HE-AACv1、HE-AACv2、高达 48kHz 的 AAC-LC、立体声音频都是可以接受的选择。

```
16:9 Aspect Ratio**
             Total  Video
Dimensions Bitrate Bitrate Encoding
640x360        640     600 HiP, 4.1
640x360       1240    1200 HiP, 4.1
960x540       1840    1800 HiP, 4.1
1280x720      2540    2500 HiP, 4.1
1280x720      4540    4500 HiP, 4.1
1920x1080     6040    6000 HiP, 4.1
1920x1080     8196    8156 HiP, 4.1

4:3 Aspect Ratio
             Total  Video
Dimensions Bitrate Bitrate Encoding
640x480        640     600 HiP, 4.1
640x480       1240    1200 HiP, 4.1
960x720       1840    1800 HiP, 4.1
1280x960      2540    2500 HiP, 4.1
1280x960      4540    4500 HiP, 4.1 
```

## 关键帧

当前的 Google TV 实施仅在每个片段的开头使用关键帧（对于 30fps 的 10 秒片段，这将是每 300 帧）。Apple 的建议是每 90 帧有一个关键帧。（或以 30fps 的速度每 3 秒） 注意 -[帧率](https://en.wikipedia.org/wiki/Frame_rate)是一个复杂的主题。

** 改编自[https://developer.apple.com/documentation/http_live_streaming/hls_authoring_specification_for_apple_devices](https://developer.apple.com/documentation/http_live_streaming/hls_authoring_specification_for_apple_devices)

# html - How to make the iframe shrank and row according to the content size?

> ID：10230478
> 
> 赞同：0
> 
> 时间：2012-04-19T14:35:30.383
> 
> 标签：html, css

i have an iframe and need it ti shrank and grow according to the contents height in the run time

```
<iframe src='demo-frame.php' >Your browser doesn't support iFrames.</iframe> 
```

any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:07:37.003

Maybe try the following with some jQuery...

```
$('#iframeID').load(function () {
    $(this).height($(this).contents().height());
    $(this).width($(this).contents().width());
}); 
```

# javascript - 自动将所有文件下载到机器上的用户首选位置

> ID：10230483
> 
> 赞同：0
> 
> 时间：2012-04-19T14:38:19.697
> 
> 标签：javascript, jquery, json, download

在我的 Web 应用程序中，客户端从服务器接收一组文件 url 作为 json。在客户端，我需要自动下载所有文件并将它们保存到用户首选位置。有没有办法使用 javascript 或 jquery 做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:41:47.523

不会。如果任何网站都可以在您的计算机上下载任何文件，这将是一个巨大的安全漏洞。您只需将用户重定向到不同的文件位置，他将不得不手动选择要保存它们的位置。

您还可以使用脚本语言（php、sh...）在服务器端创建存档并发送此存档，这样用户只需下载一个文件，但他必须在他的计算机上解压缩存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:41:36.777

出于安全原因，您将*永远*无法做到这一点。

# jquery - 向文本区域添加值。文本区域不可编辑

> ID：10230488
> 
> 赞同：0
> 
> 时间：2012-04-19T14:38:42.940
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有以下问题：

尝试从用户列表添加到具有 id 的 TextArea：“To”列表“#sortable1”中该元素的名称。

![](../Images/cb4ad9c7cc1de34d856f5b50fde50fec.png)

虽然功能就像一个魅力，但我有以下问题：

1）Textarea不可编辑（虽然我不使用只读选项）任何ideea为什么？

```
 @Html.TextArea("To", new { id = "To", @style = "height: 40px; width:100%", @class = ".connectedSortable" }) 
```

和 JQuery 函数

```
function LoadToUserIdListScripts() {
        $("#sortable1, #To").sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
var dlistTo = [];
        $("#To").droppable({
            drop: function (event, ui) {
                var a = $(ui.draggable).attr('id');
                ovalue = $("#To").val();
                ts = "";
                if (dlistTo.length > 0)
                    ts = ","
                $("#To").val(ovalue + ts + $.trim($(ui.draggable).text()).replace(/\s(?=\s)/g, ''));
                dlistTo.push(a);
                To = dlistTo;
                NamesTo = ovalue + ts + $.trim($(ui.draggable).text()).replace(/\s(?=\s)/g, '');
            }

        }); 
```

编辑：![在此处输入图像描述](../Images/39d9defb50c1c96a15401ce28cc0e649.png)

# php - 随机字符串生成器 (PHP)

> ID：10230492
> 
> 赞同：0
> 
> 时间：2012-04-19T14:38:45.833
> 
> 标签：php, random

我正在尝试编写一个返回给定长度的随机字符串的 PHP 函数。我写了这个：

```
<?
function generate_string($lenght) {
    $ret = "";
    for ($i = 0; $i < $lenght; $i++) {
        $ret .= chr(mt_rand(32,126));
    }
    return $ret;
}

echo generate_string(150);
?> 
```

上面的函数生成了一个随机字符串，但是字符串的长度不是恒定的，即：一次是30个字符，一次是60个（显然我每次都以与输入相同的长度调用它）。我搜索了随机字符串生成器的其他示例，但它们都使用基本字符串来选择字母。我想知道为什么这种方法不能正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:50:55.823

有根据的猜测：您尝试将纯文本字符串显示为 HTML。浏览器在被告知它是 HTML 之后，就这样处理它。`<`生成字符后，以下字符会立即呈现为（未知）HTML 标记，并且不会按照 HTML 标准要求显示。

使固定：

```
echo htmlspecialchars(generate_string(150)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:51:37.193

这是我测试一段时间后得出的结论：您的功能正常工作。这取决于您如何处理随机生成的字符串。如果您只是简单地回显它，那么它可能会生成`<ck1ask`类似标签的东西。尝试消除连接到字符串的某些字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-20T15:09:39.880

此函数将用于在 PHP 中生成随机字符串

```
function getRandomString($maxlength=12, $isSpecialChar=false)
{
    $randomString=null;
   //initalise the string include lower case, upper case and numbers
   $charSet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

   //if required special character to include, please set $isSpecialchar= 1 or true
  if ($isSpecialChar) $charSet .= "~@#$%^*()_±={}|][";

  //loop for get specify length character with random characters
  for ($i=0; $i<$maxlength; $i++) $randomString .= $charSet[(mt_rand(0,   (strlen($charSet)-1)))];

   //return the random string
   return $randomString;
}
//call the function set value you required to string length default:12
$random8char=getRandomString(8);
echo $random8char; 
```

来源：[在php中生成随机字符串](https://rameshkotkar.com/programming-languages/php/generate-random-string-php)

# ruby-on-rails - 预构建嵌套模型实例时，Railsnested_form link_to_add 不起作用

> ID：10230496
> 
> 赞同：9
> 
> 时间：2012-04-19T14:38:57.163
> 
> 标签：ruby-on-rails, jquery-plugins, ruby-on-rails-3.1, partial-views, nested-attributes

我正在艰难地将 ryanb 令人敬畏的 nested_form gem 集成到我的 rails 3.1.3 应用程序中。恐怕我的 Javascript 技能太有限，无法知道是我的代码（可能）还是需要更改的 gem。也许这里有人可以提供帮助。

设置：我有一个“：households”类：accepts_nested_attributes_for“：成员（人）”。我正在运行开发服务器。我将 nested_form.js 移动到 /app/assets/javascripts 目录。我几乎可以肯定它只被采购一次。

问题：如果在家庭控制器“新”方法中，我这样做：

```
@household = Household.new 
```

我在视图中只看到家庭原生字段（预期），并且“link_to_remove”和“link_to_add”链接呈现/删除部分成员字段（预期）。但是，如果我这样做：

```
@household = Household.new
@household.members.build 
```

我在视图中看到家庭本地字段（预期），成员本地字段的一个呈现部分（预期），但“link_to_remove”和“link_to_add”什么都不做（意外）。那时我不能添加另一个 :members 部分，也不能删除已经显示的 :members 部分。

我难住了。以下是看起来相关的精简源文件。我正在从 git 存储库（最后捆绑 2012.04.18）中获取 nested_form 插件...

* * *

**/app/models/household.rb**

```
class Household < ActiveRecord::Base
  has_many :members, :class_name => "Person"
  accepts_nested_attributes_for :members
  attr_accessible :id, :name, :member_ids
  attr_accessible :members_attributes
end #class 
```

* * *

**/app/models/person.rb**

```
class Person < ActiveRecord::Base
  belongs_to :household  
  attr_accessible :id, :name_given, :name_middle, :name_family, :household_id 
end #class 
```

* * *

**/app/controllers/households_controller.rb**

```
 <snip>
  # GET /households/new
  # GET /households/new.json
  def new
    @household = Household.new
    @household.members.build     # <---- Removing this changes the behavior

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @household }
    end
  end 
```

* * *

**/app/views/households/new.html.haml**

```
.headbg
  .pad
    %h2 Enter a New Household
= render 'form' 
```

* * *

**/app/views/households/_form.html.haml**

```
= nested_form_for @household, :html => { :class => "form-horizontal"} do |f|

  %fieldset 
    %legend Household

    .control-group
      = f.label( :name, { :class => 'control-label'} )
      .controls
        = f.text_field( :name, { :class => 'span5', :placeholder => '[household name]'} )

  %fieldset 
    %legend Household Members
    = f.fields_for :members, :html => { :class => "form-inline"} do |nested_f|
      = render :partial => 'people/nested_person_form', :locals => { :f => nested_f }
      = yield :nested_person_form
    %p
      = f.link_to_add "New Household Member", :members 

  .form-actions
    = button_tag( :class => "btn btn-primary", :disable_with => "Saving..."  ) do
      %i.icon-ok.icon-white
      Save
    = link_to households_path do
      .btn.btn-info
        %i.icon-arrow-left.icon-white
        Back to Households 
```

* * *

**/app/views/people/_nested_person_form.html.haml**

```
- content_for :nested_person_form do

  .nested-fields
    .row
      .span8 
        .control-group
          = f.label( "Name", { :class => 'control-label'} )
          .controls
            = f.text_field( :name_given, { :class => 'span2', :placeholder => '[first]'} )
            = f.text_field( :name_middle, { :class => 'span2', :placeholder => '[middle]'} )
            = f.text_field( :name_family, { :class => 'span2', :placeholder => '[last]'} ) 
      .span1
        = f.link_to_remove "Remove" 
```

* * *

**/app/assets/javascripts/nested_form/nested_form.js**

```
jQuery(function($) {
  window.NestedFormEvents = function() {
    this.addFields = $.proxy(this.addFields, this);
    this.removeFields = $.proxy(this.removeFields, this);
  };

  NestedFormEvents.prototype = {
    addFields: function(e) {
      // Setup
      var link    = e.currentTarget;
      var assoc   = $(link).attr('data-association');            // Name of child
      var content = $('#' + assoc + '_fields_blueprint').html(); // Fields template

      // Make the context correct by replacing new_<parents> with the generated ID
      // of each of the parent objects
      var context = ($(link).closest('.fields').find('input:first').attr('name') || '').replace(new RegExp('\[[a-z]+\]$'), '');

      // context will be something like this for a brand new form:
      // project[tasks_attributes][new_1255929127459][assignments_attributes][new_1255929128105]
      // or for an edit form:
      // project[tasks_attributes][0][assignments_attributes][1]
      if (context) {
        var parentNames = context.match(/[a-z_]+_attributes/g) || [];
        var parentIds   = context.match(/(new_)?[0-9]+/g) || [];

        for(var i = 0; i < parentNames.length; i++) {
          if(parentIds[i]) {
            content = content.replace(
              new RegExp('(_' + parentNames[i] + ')_.+?_', 'g'),
              '$1_' + parentIds[i] + '_');

            content = content.replace(
              new RegExp('(\\[' + parentNames[i] + '\\])\\[.+?\\]', 'g'),
              '$1[' + parentIds[i] + ']');
          }
        }
      }

      // Make a unique ID for the new child
      var regexp  = new RegExp('new_' + assoc, 'g');
      var new_id  = new Date().getTime();
      content     = content.replace(regexp, "new_" + new_id);

      var field = this.insertFields(content, assoc, link);
      $(link).closest("form")
        .trigger({ type: 'nested:fieldAdded', field: field })
        .trigger({ type: 'nested:fieldAdded:' + assoc, field: field });
      return false;
    },
    insertFields: function(content, assoc, link) {
      return $(content).insertBefore(link);
    },
    removeFields: function(e) {
      var link = e.currentTarget;
      var hiddenField = $(link).prev('input[type=hidden]');
      hiddenField.val('1');
      // if (hiddenField) {
      //   $(link).v
      //   hiddenField.value = '1';
      // }
      var field = $(link).closest('.fields');
      field.hide();
      $(link).closest("form").trigger({ type: 'nested:fieldRemoved', field: field });
      return false;
    }
  };

  window.nestedFormEvents = new NestedFormEvents();
  $('form a.add_nested_fields').live('click', nestedFormEvents.addFields);
  $('form a.remove_nested_fields').live('click', nestedFormEvents.removeFields);
}); 
```

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T17:46:20.720

确保您的脑海中链接了最新的 jQuery.js 文件之一。一旦加载，不要使用`nested_form.js`从 gem 安装的文件。而是使用`jquery_nested_form.js`.

只要您在`jquery_nested_form`文件之前有 jquery 链接，这是一个可以正常工作的解决方案：

```
<%= javascript_include_tag :defaults, 'jquery_nested_form' %> 
```

这是该`jquery_nested_form.js`文件的代码：

```
 jQuery(function($) {
  window.NestedFormEvents = function() {
    this.addFields = $.proxy(this.addFields, this);
    this.removeFields = $.proxy(this.removeFields, this);
  };

  NestedFormEvents.prototype = {
    addFields: function(e) {
      // Setup
      var link    = e.currentTarget;
      var assoc   = $(link).attr('data-association');            // Name of child
      var content = $('#' + assoc + '_fields_blueprint').html(); // Fields template

      // Make the context correct by replacing new_<parents> with the generated ID
      // of each of the parent objects
      var context = ($(link).closest('.fields').closestChild('input, textarea').eq(0).attr('name') || '').replace(new RegExp('\[[a-z]+\]$'), '');

      // context will be something like this for a brand new form:
      // project[tasks_attributes][new_1255929127459][assignments_attributes][new_1255929128105]
      // or for an edit form:
      // project[tasks_attributes][0][assignments_attributes][1]
      if (context) {
        var parentNames = context.match(/[a-z_]+_attributes/g) || [];
        var parentIds   = context.match(/(new_)?[0-9]+/g) || [];

        for(var i = 0; i < parentNames.length; i++) {
          if(parentIds[i]) {
            content = content.replace(
              new RegExp('(_' + parentNames[i] + ')_.+?_', 'g'),
              '$1_' + parentIds[i] + '_');

            content = content.replace(
              new RegExp('(\\[' + parentNames[i] + '\\])\\[.+?\\]', 'g'),
              '$1[' + parentIds[i] + ']');
          }
        }
      }

      // Make a unique ID for the new child
      var regexp  = new RegExp('new_' + assoc, 'g');
      var new_id  = new Date().getTime();
      content     = content.replace(regexp, "new_" + new_id);

      var field = this.insertFields(content, assoc, link);
      // bubble up event upto document (through form)
      field
        .trigger({ type: 'nested:fieldAdded', field: field })
        .trigger({ type: 'nested:fieldAdded:' + assoc, field: field });
      return false;
    },
    insertFields: function(content, assoc, link) {
      return $(content).insertBefore(link);
    },
    removeFields: function(e) {
      var $link = $(e.currentTarget),
          assoc = $link.data('association'); // Name of child to be removed

      var hiddenField = $link.prev('input[type=hidden]');
      hiddenField.val('1');

      var field = $link.closest('.fields');
      field.hide();

      field
        .trigger({ type: 'nested:fieldRemoved', field: field })
        .trigger({ type: 'nested:fieldRemoved:' + assoc, field: field });
      return false;
    }
  };

  window.nestedFormEvents = new NestedFormEvents();
  $('form a.add_nested_fields').live('click', nestedFormEvents.addFields);
  $('form a.remove_nested_fields').live('click', nestedFormEvents.removeFields);
});
// http://plugins.jquery.com/project/closestChild
/*
 * Copyright 2011, Tobias Lindig
 *
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 */
(function($) {
        $.fn.closestChild = function(selector) {
                // breadth first search for the first matched node
                if (selector && selector != '') {
                        var queue = [];
                        queue.push(this);
                        while(queue.length > 0) {
                                var node = queue.shift();
                                var children = node.children();
                                for(var i = 0; i < children.length; ++i) {
                                        var child = $(children[i]);
                                        if (child.is(selector)) {
                                                return child; //well, we found one
                                        }
                                        queue.push(child);
                                }
                        }
                }
                return $();//nothing found
        };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-21T14:43:11.557

我通过在以下行中添加以下行来解决该错误`application.html.erb`：

```
<%= javascript_include_tag :defaults, "nested_form" %> 
```

# android - 替代（谷歌地图）开源地图 API，提供道路节点和弧的数据库

> ID：10230502
> 
> 赞同：2
> 
> 时间：2012-04-19T14:39:14.470
> 
> 标签：android, api, google-maps, geolocation, maps

我需要一个适用于 Android 的 Map API，它可以为我提供构成道路网络的索引节点和索引。主要思想是确定两个 GPS 设备是否在同一条道路上。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:52:50.667

Map API 本身不会有这些信息。无论如何，您可以从[OpenStreetMap](http://www.openstreetmap.org/)自由获取它。你可以从[这里](http://wiki.openstreetmap.org/wiki/Downloading_data)下载。

如果您打算在地图上显示结果，我不明白您的问题。如果是这样，并且您想要一个不错且免费的地图 API，我建议您使用[Leaflet](http://leaflet.cloudmade.com/)。它不像[OpenLayers](http://openlayers.org/)之类的那样成熟，但是，正如你用“android”标记这篇文章，Leaflet 只是在移动部门踢屁股。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:31:52.020

对于此类项目，OpenStreetMap 绝对是一个很好的数据来源。与谷歌地图不同，它允许开发人员访问地图的底层矢量数据（完全开放）。这允许使用谷歌地图根本不可能的有趣的新用例，并且像这样涉及几何计算的东西肯定适合该类别。您要么需要 OpenStreetMap 或其他一些“矢量”地图数据源，而且在 OpenStreetMap 之外，这可能会很昂贵。

不幸的是，这不是您问题的完整答案。*要以您想要的方式使用*数据，您还有很多工作要做。您需要计算两个点（来自两个设备的 GPS 读数？）与附近道路的接近程度，并找出该点离哪条道路最近。这是一种强大的地理计算，您可以使用 GIS 包（如 QGIS）或地理感知数据库系统 PostGIS 的功能进行。

但这不是您问题的答案，因为您需要在设备上进行这些计算。我不知道有一个现成的库可以在 android 上执行此操作。我想你必须自己动手。

但另一个挑战是首先以合适的格式将矢量数据放到设备上，这是首先要解决的问题。您可能希望将矢量数据作为整个国家或较小区域的大型下载，也许在此应用程序中具有即时下载功能。在使用矢量形式的地图时，整个国家并非不可行（曾经尝试过很棒的[MayDroyd](http://www.mapdroyd.com/)应用程序吗？），但需要一些紧凑的格式。令人高兴的是，其中一些问题开始在开源的现成库中得到解决。例如，您可以尝试在[MapsForge](http://code.google.com/p/mapsforge/)之上构建。

因此，您又回到了编写设备上代码以在这些数据中四处寻找并进行您想做的计算的挑战。我想如果像 MapsForge 这样的项目包含通用的 PostGIS 风格的地理功能来使这更容易，那可能会很好。可能要向 mapsforge 开发人员询问一些事情。

# windows-phone-7 - SOAP Windows 电话 7 贝宝

> ID：10230511
> 
> 赞同：0
> 
> 时间：2012-04-19T14:39:35.013
> 
> 标签：windows-phone-7, soap, paypal

谁在 Windows Phone 7 中使用过 paypal soap api？请给我一个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:20:25.030

所以去NVP？[https://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/index.html](https://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/index.html) 据我了解，这里不需要 SSL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:29:31.330

PayPal 在这里有一套相当完整的文档：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_code](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_code)

# java - JVM 是否能够为相同的 String 对象重用拆分结果？

> ID：10230525
> 
> 赞同：2
> 
> 时间：2012-04-19T14:40:13.937
> 
> 标签：java, optimization, jvm

我的问题是针对同一个 String 对象多次调用 split 或其他 String 方法的情况。

是否有任何流行的 JVM 实现通过将结果存储在内存中以供以后重用来优化此类调用？

它可以这样工作：由于字符串不可变的性质和字符串池的存在，一个表达式

```
String resource = "A:B:C";
String[] resourceArr = resource.split(":"); 
```

每次使用时都会对“A:B:C”和“:”使用相同的字符串对象引用。JVM 可以使用这些引用匹配存储的结果，并在不执行实际解析的情况下提供它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:45:46.900

它确实以与优化相同的方式进行`substring`优化，因为`split`正在使用`substring`：

```
public String substring (int start, int end) {
    if (start == 0 && end == count)
        return this;
    // NOTE last character not copied!
    // Fast range check.
    if (0 <= start && start <= end && end <= count) {
        return new String (offset + start, end - start, value);
    }
    throw new StringIndexOutOfBoundsException();
} 
```

请注意，如何`substring`返回同一字符串的 offset+start 和 end-start 之间的字符范围。换句话说，拆分子字符串实际上是指向原始字符串分配的相同内存的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:44:35.543

不，这会极大地浪费内存——相同的拆分结果需要被重用是非常罕见的，更不用说基于每个字符串的开销了——程序员有选择地进行选择会好得多决定何时以“正常方式”缓存此类结果。

# ruby-on-rails - Ajax 不能与 Rails3.2.1 一起使用

> ID：10230526
> 
> 赞同：1
> 
> 时间：2012-04-19T14:40:14.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的表格

```
<%= form_tag load_link_path, :remote => true, :html => { :'data-type' => 'html', :id => 'load_link_form' } do %>
<fieldset> 
    <%= url_field_tag(:url) %>
    <div class="validation-error"></div>
    <%= submit_tag %>
</fieldset>
<% end %> 
```

我的行动

```
def load
  format.js 
end 
```

我的 js 视图（load.js.erb）

```
alert(0); 
```

提交表单时，警报不会触发。控制台输出：

```
Processing by LinksController#load as JS
  Parameters: {"utf8"=>"✓", "commit"=>"Save changes", "url"=>"http://www.alfajango.com/blog/rails-3-remote-links-and-forms/", "authenticity_token"=>"KWwfZH+sivCrWdlVBUPM0MBRPHzcDhmbB96ckLQ82Dg="}
  Rendered links/load.js.erb (0.4ms)
Completed 200 OK in 2822ms (Views: 9.9ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:20:22.230

尝试`respond_to`在控制器顶部添加，然后将 format.js 调用包装在一个`respond_with`块中

```
class LinksController < ApplicationController
  respond_to :html, :js

  def load
    respond_with do |format|
      format.js
    end
  end
end 
```

我建议阅读[这篇文章](http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)，它是使用 rails3 imo 进行 ajax 的最佳指南。

**更新：**

在做了一些小改动后，我让它工作了：

rails 中 ajax 调用的默认方法是“GET”，所以如果你想做一个“POST”，你需要在`:data-method=>"post"`. 我还从您的表单标签中删除了 html 哈希并将**数据类型**设置为*script*，见下文：

```
<%= form_tag load_link_path, :remote => true, :id => 'create_link_form', :data => {:type=>"script", :"method"=>"post"} do %> 
```

此外，您需要从 js.erb 文件中取消注释警报，因此更改为：

```
//alert(0);
$('#message').val('ok'); 
```

到：

```
alert(0);
//$('#message').val('ok'); 
```

希望这会有所帮助，如果没有，请告诉我，我会将我的代码推送到 github :)

# android - 调用 REST wcf 服务时 Http GET 方法出错

> ID：10230527
> 
> 赞同：0
> 
> 时间：2012-04-19T14:40:21.473
> 
> 标签：android, wcf, http, execute, http-get

```
public void callService()
    {  
        HttpPost postMethod = new HttpPost(url);
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("latitude",latitude));
        nameValuePairs.add(new BasicNameValuePair("longitude",longitude));
        try {
            postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        DefaultHttpClient hc = new DefaultHttpClient();

        HttpResponse response = null;
        try {
            response = hc.execute(postMethod);  // not able to execute the statement.
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HttpEntity entity = response.getEntity();

        if (entity != null) 
        {
                InputStream inStream = null;
                try {
                    inStream = entity.getContent();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                result= convertStreamToString(inStream);
                Log.i("---------------- Result",result);
        }
    } // end callService() 
```

我们正在尝试从我的 android 设备调用 WCF Rest 服务，上面是相同的代码，我发现代码在代码中的此语句之后终止：**response = hc.execute(postMethod);** 在这方面的任何帮助都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:54:20.907

根据您的帖子标题：

您是否将 POST 发送到仅允许 GET 的 REST 服务？

# javascript - javascript沙箱模块以防止引用Window

> ID：10230532
> 
> 赞同：0
> 
> 时间：2012-04-19T14:40:38.573
> 
> 标签：javascript, sandbox

我试图创建一个沙盒模块，该模块可以获取一个对象并防止该对象的代码引用 window。

这是它在概念上的工作方式。

```
var sand = function(window) {
var module = {
    say: function() {
        console.log(window.location);
    }   
};
return module;
}
sand({}).say(); // window.location is undefine 
```

如果对象是传入的，这不起作用

```
var $sand = (function(){
return function(obj, context) {
    return (function(obj, window) {
        window.module = {};
        // doesn't work even copy object
        for (p in obj) {
            window.module[p] = obj[p];
        }
        console.log(window.location); // undefine
        return window.module;
    }(obj, context));
};
}());

var module = {
say: function() {
    console.log(window.location);
}
};

$sand(module, {}).say(); // still reference to window.location 
```

我怎样才能使这种模式起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:03:49.083

只要`window`您的函数范围内没有变量阴影，该函数就可以访问`window`. 即使您有一个名为 的变量`window`，代码仍然可以通过简单地省略来访问属性`window.`。

```
(function(window) {
    console.log(window.location); //undefined
    console.log(location); //this will still work
})({ }); 
```

换句话说，在浏览器环境中沙箱化 JavaScript 是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:05:14.153

在您的第一个示例中， window 的唯一原因`undefined`是因为您传入了一个空对象并调用了参数`window`，所以它隐藏了真实的`window`.

此外，您始终可以通过`this`在闭包内提升变量来访问窗口对象，如下所示：

```
console.log ( ( function () { return this; } )() ); 
```

因此，即使您以某种方式设法阻止`window`，再次将其取回也是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:05:09.763

如果您在沙箱之外定义函数，则上下文将是当前上下文，否则您将无法真正做到。

如果你真的想做一些沙盒，那么你应该使用 iframe 来实现。看看[https://github.com/substack/vm-browserify](https://github.com/substack/vm-browserify)它是`vm`node 模块的浏览器版本，你应该能够提取一些好的工作，并避免`eval`哪些对你来说不是很干净想要做。

# scala - 在没有堆栈溢出的情况下减少大流

> ID：10230535
> 
> 赞同：9
> 
> 时间：2012-04-19T14:40:47.867
> 
> 标签：scala, stream, range, stack-overflow, reduce

1我正在尝试制作一个无限制的阶乘函数（只是出于好奇。）这适用于大型`n`（尝试高达 100000 并且它似乎有效，尽管我无法检查输出值的正确性，因为它是大的！）

```
(BigInt(1) to n).reduceRight(_*_) 
```

但我担心整个`BigInt(1) to n`范围可能都在内存中，而我只需要一个元素一个元素的`reduceRight`. 看看 Scala 的标准库代码，它看起来`BigInt(1) to n`实际上输出了整个`Range`而不是懒惰`Stream`，但我发现`Stream.range`我可以像这样使用它（注意`n+1`，流范围是专有的）

```
Stream.range[BigInt](BigInt(1), BigInt(n+1)).reduceRight(_*_) 
```

它适用于`n=10000`（由于某种原因它需要更长的时间！这让我认为正常范围实际上可能也是`Stream`如此？）但是因为`n=100000`我得到了这个堆栈溢出

```
java.lang.StackOverflowError
    at java.math.BigInteger.add(Unknown Source)
    at scala.math.BigInt.$plus(BigInt.scala:161)
    at scala.math.Numeric$BigIntIsIntegral$class.plus(Numeric.scala:28)
    at scala.math.Numeric$BigIntIsIntegral$.plus(Numeric.scala:40)
    at scala.math.Numeric$BigIntIsIntegral$.plus(Numeric.scala:40)
    at scala.math.Numeric$Ops.$plus(Numeric.scala:208)
    at scala.collection.immutable.Stream$$anonfun$range$1.apply(Stream.scala:695)
    at scala.collection.immutable.Stream$$anonfun$range$1.apply(Stream.scala:695)
    at scala.collection.immutable.Stream$Cons.tail(Stream.scala:634)
    at scala.collection.immutable.Stream$Cons.tail(Stream.scala:626)
    at scala.collection.LinearSeqOptimized$class.reduceRight(LinearSeqOptimized.scala:130)
    at scala.collection.immutable.Stream.reduceRight(Stream.scala:47)
    at scala.collection.LinearSeqOptimized$class.reduceRight(LinearSeqOptimized.scala:131)
    at scala.collection.immutable.Stream.reduceRight(Stream.scala:47)
    at scala.collection.LinearSeqOptimized$class.reduceRight(LinearSeqOptimized.scala:131)
    at scala.collection.immutable.Stream.reduceRight(Stream.scala:47)
    ... 
```

很明显`reduceRight`是这样称呼自己的

```
reduceRight(reduceRight(first, second, op), third, op)... 
```

因此堆栈溢出。我认为它不是尾调用优化的，因为它首先减少然后在返回值之前运行，所以它不能被优化。那我怎么能解决这个问题呢？我应该放弃函数式方法并以自定义命令式代码为目标来减少吗？

令我印象深刻的是一件非常奇怪的事情，`(BigInt(1) to n).reduceRight(_*_)`它不会大量溢出，`n`而使用流几乎相同......这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T14:58:27.903

您是正确的，您的第一个解决方案[将在内存中创建一个列表](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableOnce.scala#L167)来存储相反的序列。您可以简单地使用`reduceLeft`（在范围上没有这个问题），但这将通过相反方向的范围。如果出于某种原因你想从大端开始但保持 的懒惰`reduceLeft`，你可以创建一个倒退`Range`：

```
def fact(n: Int) = (BigInt(n) to 1 by -1).reduceLeft(_ * _) 
```

您可能还有[其他方法](https://stackoverflow.com/a/7863859/334519)可以轻松优化此功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T14:53:09.313

`reduceLeft`被实现为在流上进行计算（并按顺序调用）。您可以进行如下验证：

```
Stream.range(1,10).map(i => print(i)).reduceLeft((a,b) => println("r")) 
```

或者您可以使用尾递归：

```
final def fac(n: BigInt, prod: BigInt = BigInt(1)): BigInt = {
  if (n<2) prod else fac(n-1,prod*n)
} 
```

（正如 Travis 指出的那样，首先将小数相乘会更快，这将需要额外的一行）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T14:53:18.830

尝试`reduceLeft`改用。`reduceRight`从流的末尾开始，因此强制评估每个元素——这正是你想要避免的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:05:39.243

```
def fac (n: BigInt=1, m:BigInt=1): Stream[BigInt] = 
  Stream.cons (n, fac (n * m, m+1))

fac().take (10).toList
res27: List[BigInt] = List(1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880) 
```

也很好用`take(10000).toList`。

# mysql - MySQL返回同名同表的连接

> ID：10230542
> 
> 赞同：1
> 
> 时间：2012-04-19T14:41:03.673
> 
> 标签：mysql, sql, inner-join

我正在使用mysql。

我有两张桌子

```
Students:
stud_num 
prof1
prof2

Prof
prof_id
first_name
last_name 
```

Prof Id 是学生表中的外键。

我想将 stud_num 和 prof1 作为名字和姓氏，将 prof2 作为名字和姓氏

这是我的查询不起作用：

```
select s.stud_num, CONCAT(p.first_name, " ", p.last_name) as PROF1, CONCAT(p.first_name, " ", p.last_name) as PROF2
from students s
inner join prof p
on s.prof1 = p.prof
and s.prof2 = p.prof 
```

这不起作用。是否有捷径可寻？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:47:36.210

加入 TWICE 到教授表，但我建议 LEFT 加入，以防没有提供教授的 ID 之一

```
select 
      s.stud_num, 
      CONCAT(p1.first_name, " ", p1.last_name) as PROF1, 
      CONCAT(p2.first_name, " ", p2.last_name) as PROF2
   from 
      students s
         LEFT join prof p1
            on s.prof1 = p1.prof
         LEFT join prof p2
            on s.prof2 = p2.prof 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:48:37.327

Prof 表需要以两个不同的名称连接两次。尝试这个：

```
select s.stud_num,
       CONCAT(p1.first_name, " ", p1.last_name) as PROF1,
       CONCAT(p2.first_name, " ", p2.last_name) as PROF2
from   students s,
       prof p1,
       prof p2
where  s.prof1 = p1.prof_id
and    s.prof2 = p2.prof_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:45:55.917

请尝试以下方法：

```
SELECT s.stud_num, 
       CONCAT(p1.first_name, " ", p1.last_name) as PROF1, 
       CONCAT(p2.first_name, " ", p2.last_name) as PROF2
FROM students s, prof p1, prof p2
WHERE s.prof1 = p1.prof
      AND s.prof2 = p2.prof 
```

# c++ - 我们可以创建临时传入`std::vector `参数？

> ID：10230545
> 
> 赞同：14
> 
> 时间：2012-04-19T14:41:07.800
> 
> 标签：c++

```
void PrintNow(const std::vector<int> &v)
{
    std::cout << v[0] << std::endl;
}

std::vector<int>().push_back(20); // this line generates no complains
PrintNow(std::vector<int>().push_back(20)); // error 
```

从 VS2010 Sp1:

> 错误 C2664：“PrintNow”：无法将参数 1 从“void”转换为“const std::vector<_Ty> &”

Q> 是否可以将临时向量传递给函数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T14:48:01.087

在 C++11 中，你可以这样做：

```
void PrintNow(const std::vector<int> &v)
{
    std::cout << v[0] << std::endl;
}

PrintNow({20}); 
```

不过，VS2010 还不支持 C++11 的这一部分。（gcc 4.4 和 clang 3.1 可以）

如果您只需要一个元素，那么在 C++03 中您可以执行以下操作：

```
PrintNow(std::vector<int>(1,20)); 
```

如果您需要多个元素，那么我认为没有任何一种解决方案。你可以这样做：

```
{ // introduce scope to limit array lifetime
    int arr[] = {20,1,2,3};
    PrintNow(std::vector<int>(arr,arr+sizeof(arr)/sizeof(*arr));
} 
```

或者你可以编写一个可变参数函数，它接受一个整数列表并返回一个向量。除非你经常使用它，但我不知道它是否值得。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T14:42:50.973

问题在于`std::vector::push_back()`返回`void`，而不是您不能将临时值传递给函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T14:46:13.407

产生错误是因为`std::vector::push_back`函数的返回类型是`void`：

```
void push_back ( const T& x ); 
```

尝试以下操作：

```
PrintNow(std::vector<int>(1, 20)); 
```

上面的代码使用了类的可用构造函数之一`std::vector`：

```
explicit vector ( size_type n, const T& value= T(), const Allocator& = Allocator() ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-03-12T09:05:28.423

Yes we can.

```
points.push_back(vector<int>{1, 2, 3, ....}); 
```

I'm initialising the vector like array and not giving it a name. Pretty simple for single or multiple elements.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-19T14:45:16.727

如果所有元素都具有相同的值，则您有一个适合您需要的构造函数：

```
PrintNow(std::vector<int>(1,20)); 
```

# c - 当我在写入时删除文件时，为什么 write() 不会失败？

> ID：10230547
> 
> 赞同：2
> 
> 时间：2012-04-19T14:41:14.453
> 
> 标签：c, linux

我有一个问题，为什么 write() 系统调用在我从 shell 中删除目标文件后仍然可以成功写入内容？

当我在前几次成功写入后删除文件时，我期待看到 write() 失败，但它没有，我不知道它写入哪里。

谁能给我解释一下，谢谢！！

## 这是我的测试示例代码：

```
int fd = open ("./test.txt", O_CREAT | O_RDWR | O_APPEND, 0666);
if (fd == -1)
    error_and_exit ("open() failed");

ssize_t written = 0;
char buf[] = "apple\n";

while (true)
{
    printf ("perform write...\n");
    written = write (fd, buf, sizeof(buf));
    if (written <= 0)
        error_and_exit ("write failed");
    printf ("=> wrote %d bytes\n", written);
    printf ("sleep %d...\n\n", SLEEP_TIME);
    sleep (SLEEP_TIME);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T14:44:18.833

直到最后一个打开的文件描述符在文件上关闭之前，文件不会被物理删除（在 inode 级别，如果文件系统具有 inode），即使文件没有留下任何名称引用（因为它的姓已被取消链接，又名删除）。这就是为 POSIX (Unix) 系统创建临时但匿名文件的方式，方法是创建文件然后删除其名称。

请注意，如果您有一个保持日志文件打开的守护进程，则守护进程可能会继续写入旧文件（而不是新文件），并且在守护进程终止之前不会释放空间（或者，更准确地说，关闭旧日志文件的文件描述符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:46:19.877

Linux 为所有文件保留一个计数器。如果你打开一个文件，那么它就会增加。当您删除一个文件时，计数器减一，如果计数器为零，则该文件实际上被视为已删除。

因此，当您的程序打开文件时，计数器从 1 增加到 2，然后当您删除文件时，计数器再次减少到 1。在您关闭文件之前，它不会再次减少，当您关闭文件时，计数器将为零，实际文件将被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:48:52.610

如果您 rm'd 文件，随后尝试“查找”该文件（打开它以供阅读等）将失败。您现有的进程将继续有权访问该文件，直到它终止或关闭该文件。在此之前，您的进程将可以访问写入文件的信息。之后，无法访问该信息（通过“特殊”方式除外 - 搜索“在 linux unix 中恢复已删除文件”以获取详细信息）。

# .net - 为什么必须有一个委托来桥接线程及其方法？

> ID：10230549
> 
> 赞同：1
> 
> 时间：2012-04-19T14:41:17.103
> 
> 标签：.net, multithreading, delegates

下面的代码很常见：

```
Work w = new Work();
w.Data = 42;
threadDelegate = new ThreadStart(w.DoMoreWork);
newThread = new Thread(threadDelegate);
newThread.Start(); 
```

我只是想知道，为什么必须有一个委托来**桥接**线程和在该线程上执行的方法？

我们可以直接将方法名称发送到 Thread 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:42:51.840

> 我们可以直接将方法名称发送到 Thread 吗？

作为字符串？万维网。如果不是作为字符串，您将如何建议告诉线程要执行什么？委托是在 .NET 中表示“使用特定签名执行的东西”的*惯用方式。*

请注意，您不需要使用`new ThreadStart`或使用单独的变量。使用方法组转换可以正常工作：

```
newThread = new Thread(w.DoMoreWork);
newThread.Start(); 
```

或者，如果您不需要所有这些变量：

```
new Thread(new Work { Data = 42 }.DoWork).Start(); 
```

编辑：请注意，从 .NET 4 开始，将[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)用于此类事情*通常*是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:21:06.617

委托代表一种数据类型，就像 Integer 或 Double 代表它们各自的数据类型一样。委托定义了由其签名（返回类型和参数）标识的一类函数。就像 Integer 方法参数指定期望的 Integer 值一样，委托指定期望具有特定签名的方法。您需要指定预期的函数类型，原因与使用原始数据类型的原因相同。当你传入你的函数时，它传递了一个指向你想要调用的函数或对象方法的指针，即在内存中定义该函数的位置。如果您只是将函数名称作为字符串传入，它将不知道该名称的函数在哪里；除非您以某种方式定义了包含您要调用的函数的定义的类。

有关代表的更多信息，请参阅以下内容：

[来自 Microsoft 的 C# 代表信息](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.100%29.aspx)

[stackoverflow 问题 - 为什么我们需要 c-sharp-delegates](https://stackoverflow.com/questions/4284493/why-do-we-need-c-sharp-delegates)

以下链接是在 Java 中使用反射按名称调用方法的示例。如您所见，您需要指定哪个类包含您要调用的方法。委托的实际参数是直接指向方法的指针，这就是签名必须匹配的原因。

[Java 反射](http://docs.oracle.com/javase/tutorial/reflect/member/methodInvocation.html)

# ios - 我可以从其他应用程序将曲目添加到 iPhone 的音乐播放器吗？

> ID：10230550
> 
> 赞同：3
> 
> 时间：2012-04-19T14:41:28.837
> 
> 标签：ios, mpmusicplayercontroller

我知道这个问题的答案可能是否定的，但是有没有办法从另一个应用程序将 AAC 文件添加到 iPhone 的音乐库中？Apple 的 iPod 库 API 允许应用程序使用库中的曲目，但我找不到任何建议可以添加它们的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:10:02.213

不幸的是，这是一个单向过程。看看[关于 iPod 库访问](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html)。

> iPod 库访问是用于从设备 iPod 库中检索和播放项目的 iOS 界面。iPod 库是用户从桌面上的 iTunes 同步的设备上的一组媒体项目。

没有越狱设备，我认为这是不可能的。

# ruby-on-rails - 为什么默认情况下 Rails Gemfiles 中省略了 JavaScript 运行时？

> ID：10230553
> 
> 赞同：1
> 
> 时间：2012-04-19T14:41:36.940
> 
> 标签：ruby-on-rails

运行时有很多关于可怕`Could not find a JavaScript runtime`错误的问题`rails`或`rake`. 虽然解决方案很明确，但***为什么*将 JavaScript 框架排除在 Gemfile 之外是标准的？**

我能想到的唯一原因是：

*   使用不同 JS 框架的应用程序测试的模糊众包。
*   在使用 Rails 做任何有用的事情之前，强制新手学习 Gemfile。

这两者似乎对 Rails 的声誉弊大于利。Rails 的重点不是尽快启动并运行吗？在我看来[，最少惊讶](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)和[约定优于配置](https://en.wikipedia.org/wiki/Convention_over_Configuration)的原则将决定开发人员（尤其是新手）

1.  与 SQLite 与 PostgreSQL 相比，在开始工作之前不必关心（更不用说比较）JS 框架，
2.  ~~在运行~~每个应用程序之前不必进行更多配置，总而言之
3.  应该只*下载、安装和运行*，就像现在几乎所有其他语言的主流应用程序一样。

# jquery - 将 Struts2-Jquery 插件 Datepicker 与 Netbeans 7.1 集成时出现运行时错误

> ID：10230556
> 
> 赞同：0
> 
> 时间：2012-04-19T14:41:42.110
> 
> 标签：jquery, netbeans, struts2, struts

我使用 Netbeans IDE v7.1 + Struts 2/XWork 插件与 Struts 2.2.3 库和 Glassfish Server v3 [http://plugins.netbeans.org/plugin/39218](http://plugins.netbeans.org/plugin/39218)

我还从这里集成了 Struts2-Jquery 插件： [Google Code 的插件页面](http://code.google.com/p/struts2-jquery/wiki/DatePickerTag)

我下载的文件是：struts2-jquery-plugin-3.3.0.jar

首先，我将它作为 JAR/文件夹库添加到项目中。

接下来，我将示例代码复制到一个 JSP 页面中，结构如下：

```
 <%-- 
                Document   : calendarDemo
                Created on : 18-abr-2012, 17:48:08
                Author     : David32
            --%>

            <%@ taglib prefix="s" uri="/struts-tags"%>
            <%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
            <html>
              <head>
                <sj:head locale="es" jquerytheme="lightness"/>
                <title>Datepicker Demo</title>
              </head>
              <body>
                <s:form id="form" theme="xhtml">
                  <sj:datepicker id="date0" name="date0" label="With Button Panel" showButtonPanel="true"/>
                  <sj:datepicker id="date1" name="date1" label="Change Month and Year" changeMonth="true" changeYear="true"/>
                  <sj:datepicker id="date2" name="date2" label="Custom Button Text" showOn="both" buttonText="Select a Date"/>
                  <sj:datepicker id="date3" name="date3" label="Show only on Button Click" showOn="button"/>
                  <sj:datepicker id="date4" name="date4" label="Text after selection" appendText=" (dd.MM.yy)" displayFormat="dd.MM.yy"/>
                  <sj:datepicker id="date5" name="date5" label="With fast slideDown Animation" showAnim="slideDown" duration="fast"/>
                  <sj:datepicker id="date6" name="date6" label="With slow fadeIn Animation" showAnim="fadeIn" showOptions="{direction: 'up' }" duration="slow" />
                  <sj:datepicker id="date7" name="date7" label="Show 3 Months" numberOfMonths="3"/>
                  <sj:datepicker id="date8" name="date8" label="Show Month Array" numberOfMonths="[2,3]"/>
                  <sj:datepicker id="date9" name="date9" label="Show Years only from 2008 until 2012" yearRange="2008:2012" changeYear="true"/>
                  <sj:datepicker id="date10" name="date10" label="Button Only" buttonImageOnly="true"/>
                  <sj:datepicker id="date11" name="date11" label="Without Button" showOn="focus"/>
                  <sj:datepicker id="date12" name="date12" label="With Close Event" onClose="onClose"/>
                </s:form>
              </body>
            </html> 
```

web.xml中配置的起始页当然是[b]calendars/calendarDemo.jsp[/b]

Netbeans 未检测到任何错误，因为正确检测并检查了 Datepicker 标记。另一方面，在部署后它只给出一个错误 500 页面，并带有以下通知：

```
 org.apache.jasper.JasperException: The Struts dispatcher cannot be found.  This is usually caused by using Struts tags without the associated filter. Struts tags are only usable when the request has passed through its servlet filter, which initializes the Struts dispatcher needed for this tag. - [unknown location] 
```

有人知道我是否缺少配置此插件的任何东西吗？任何帮助都感激不尽 ！

我很乐意将整个异常日志粘贴到另一篇文章中，因为当前的文章已经太长了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:03:49.967

正如用户@Umesh Awasthi 所评论的，这是[插件](http://code.google.com/p/struts2-jquery/issues/detail?id=238)的一个已知问题。

一种解决方法是降级到插件的 3.2.1 版本。

# macos - 将 GTK+ 应用程序移植到 Mac OSX

> ID：10230557
> 
> 赞同：10
> 
> 时间：2012-04-19T14:41:44.030
> 
> 标签：macos, gtk, porting

我有一个在我的 Linux 机器上开发的 GTK+ 应用程序（准备好 Autotools）。现在我需要将这个移植到 OSX。我已经成功安装了 jhbuild，它又在 Mac (10.5.8) 上安装了 GTK+ 和东西

我只是不知道下一步该怎么做。尝试 ./configure && make && make install （在复制到 Mac 的我的应用程序上）失败，因为 pkg-config 未安装在 Mac 上。

我真的需要编写一个 jhbuild 模块集来编译这个应用程序吗？我还需要两个库：libxml2 和 libsoup-2.4。jhbuild tae 会关心整合它们吗...？！

我现在的问题是：将 GTK+ 应用程序移植到 OSX 的最简单方法是什么，是否有教程或操作方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T19:09:30.997

我建议安装[Homebrew](http://mxcl.github.com/homebrew/)，它是 mac 的命令行包管理器。安装后打开终端并运行`brew install pkg-config`以安装 pkg-config 然后`brew install gtk+`和/或`brew install gtk+3`分别安装 gtk+ 2 或 3。完成后，您应该能够使用您的 makefile 进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:15:22.187

你确定 jhbuild 安装了 GTK 吗？你有没有

```
jhbuild bootstrap
jhbuild build meta-gtk-osx-bootstrap
jhbuild build meta-gtk-osx-core 
```

按照[“GTK OSX Building”](http://live.gnome.org/GTK%2B/OSX/Building)页面的说明？如果你这样做了，那么*肯定会*安装 pkg-config，因为没有它就不会构建这些包。

您是在 jhbuild 环境中构建您的应用程序吗？即你做了吗

```
jhbuild shell 
```

在尝试构建您的应用程序之前？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:58:39.733

使用 jhbuild 是不是有点矫枉过正？[来自 gtk.org](http://www.gtk.org/download/macos.php)的Mac OS X GTK 捆绑包还不够吗？我认为它提供了 pkg-config，因为 Win32 版本提供了它。如果您有大量依赖项要构建，或者想自己构建 GTK，Jhbuild 很有趣，但据我了解，您只想移植一个 GTK 应用程序......

# php - MYSQL：如果行值相同，如何设置为相同的位置？

> ID：10230559
> 
> 赞同：1
> 
> 时间：2012-04-19T14:42:07.713
> 
> 标签：php, mysql

```
position    | Average |   gpmp

1             70.60         2.0     
2             60.20         2.3    
3             59.80         4.8    
4             59.80         4.8     
5             45.70         5.6 
```

大家好，

如上表，我需要按照最低gpmp和最高平均值来排列位置。但是当平均值和 gmp 相同时，我需要有相同的位置。

例如，位置 3 和 4 具有相同的平均值和 gpmp。如何生成 mysql 查询或使用 php 函数，以便在他们检测到相同的平均值和 gpmp 并将位置 4 更改为 3 之后。

这意味着生成函数后，它将如下表所示。

```
position    | Average |   gpmp

1             70.60         2.0     
2             60.20         2.3    
3             59.80         4.8    
3             59.80         4.8     
5             45.70         5.6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:57:38.873

这是您在帖子中描述的更新表格的简单方法 - 获取顺序位置并相应地更新它们。它不计算位置或任何东西，只是使用已经存在的数据：

```
UPDATE `table` t SET position = (
    SELECT MIN(position) FROM (SELECT * FROM `table`) t2 WHERE t.Average = t2.Average AND t.gpmp = t2.gpmp
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:55:32.857

（伪代码） select * from table
get output into php var
foreach （php 数据行）
是行等于前一行吗？
是 - 不增加行计数器，增加重复计数器
no - 用重复数增加行计数器并重置重复计数器
将当前行保存为“上一行”
下一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:55:43.883

我会尝试以下类似的方法，因为它确实假设此表上有一个主键。如果没有主键，您将在轻松更新特定行时遇到问题/您将有很多重复项。

所以对于这个例子，我假设表格如下

```
someTable (
    pkID (Primary Key),
    position,
    Average,
    gpm
) 
```

所以下面的 INSERT 会做我期望的工作

```
INSERT INTO someTable (
    pkID,
    position
)
SELECT
    someTable.pkID,
    calcTable.position
FROM someTable
INNER JOIN (
    SELECT 
        MIN(c.position) AS position,
        c.Average,
        c.gpm
    FROM (
        // Calculate the position for each Average/gpm combination
        SELECT
            @p = @p + 1 AS position,
            someTable.Average,
            someTable.gpm
        FROM (
            SELECT @p:=0
        ) v,someTable
        ORDER BY 
            someTable.Average DESC, 
            someTable.gpmp ASC
    ) c
    // Now regroup to get 1 position for each combination (the lowest position)
    GROUP BY c.Average,c.gpm
) AS calcTable

// And then join this calculated table back onto the original
ON (calcTable.Average,calcTable.gpm) = (someTable.Average,someTable.gpm)

// And rely on the PK IDs clashing to allow update
ON DUPLICATE KEY UPDATE position = VALUES(position) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:56:38.860

你可以在php中尝试这样的事情：

```
$d= mysql_query('select distinct gpmp from tablename order by gpmp');

pos= 1;

while($r= mysql_fetch_array($d)){

   mysql_query('update tablename set position='.$pos.' where gpmp='.$r['gpmp']);

   $pos++;
} 
```

你只需要“扩展”这个想法来考虑平均。

# objective-c - 如何直接从 zip 中读取图像文件而不解压到磁盘？

> ID：10230561
> 
> 赞同：6
> 
> 时间：2012-04-19T14:42:11.630
> 
> 标签：objective-c, macos, cocoa

我想做的是在运行时将图像分配给 ui 元素（想想 Winamp 风格），但我不知道如何在不存储到磁盘的情况下从 zip 中读取。或者如何将每个图像分配给一个 ui 元素

我正在使用可可和目标 c 的 mac

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:48:11.273

使用[objective-c zip（iOS/Mac zlib 包装器）](http://github.com/flyingdolphinstudio/Objective-Zip)

然后你可以这样做：

```
ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:@"test.zip" mode:ZipFileModeUnzip];
[unzipFile goToFirstFileInZip];

ZipReadStream *read= [unzipFile readCurrentFileInZip];
NSMutableData *data= [[NSMutableData alloc] initWithLength:256];
int bytesRead= [read readDataWithBuffer:data];

[read finishedReading]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T00:55:49.117

zipzap[版本](https://github.com/pixelglow/zipzap)：

```
ZZArchive* archive = [ZZArchive archiveWithContentsOfURL:[NSURL fileURLWithPath:@"test.zip"]];
NSData* data = [archive.entries[0] newDataWithError:nil]; 
```

或者，如果您正在寻找特定条目：

```
ZZArchive* archive = [ZZArchive archiveWithContentsOfURL:[NSURL fileURLWithPath:@"test.zip"]];
NSData* data = nil;
for (ZZArchiveEntry* entry in archive.entries)
  if ([entry.fileName isEqualToString:@"test.txt"])
  {
    data = [entry newDataWithError:nil];
    break;
  } 
```

扫描这样的文件非常理想。扫描仅使用 zip 中央目录，直到`-[entry newDataWithError:]`.

# haskell - 对“Learn you a Haskell”的 State Monad 代码感到困惑

> ID：10230562
> 
> 赞同：23
> 
> 时间：2012-04-19T14:42:15.297
> 
> 标签：haskell, monads, state-monad

我正在尝试使用在线书籍[Learn you a Haskell for great Good](http://learnyouahaskell.com)来掌握 Haskell 。

据我所知，到目前为止，我已经能够理解 Monad，直到我读到介绍[State Monad](http://learnyouahaskell.com/for-a-few-monads-more#state)的章节。

然而，呈现并声称是 State 类型的 Monad 实现的代码（我无法在 Hoogle 中找到它）似乎对我来说太难处理了。

*   首先，我不明白它背后的逻辑，即为什么它应该起作用以及作者如何考虑这种技术。（也许可以建议相关文章或白皮书？）

*   在第 4 行，建议函数 f 采用 1 个参数。
    然而，接下来的几行我们看到了 pop，它不带参数！

*   为了扩展第 1 点，作者试图用一个函数来代表国家来完成什么。

非常感谢任何有助于理解正在发生的事情。

## 编辑

敬启者，

下面的答案彻底涵盖了我的问题。
不过我想补充一件事：

在阅读了下面建议的文章后，我找到了上面第二点的答案：一直以来，我都*认为*pop 函数会像这样使用：
`stuff >>= pop`因为在绑定类型中，第二个参数是函数，而正确的用法是 this `pop >>= stuff`，在再次阅读 do-notation 如何转换为普通的 bind-lambdas 后，我意识到这一点。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T15:44:58.843

`State`monad 表示*有状态*的计算，即使用来自某些外部状态的值，并且可能修改某些外部状态的计算。当您将有状态的计算排序在一起时，后面的计算可能会给出不同的结果，具体取决于先前的计算如何修改状态。

由于 Haskell 中的函数必须是纯函数（即没有副作用），我们通过要求每个函数接受一个表示当前世界状态的附加参数并返回一个表示修改后状态的附加值来模拟外部状态的影响。实际上，外部状态是通过一系列计算线程化的，就像我刚刚在 MSPaint 中绘制的这张可憎的图表一样：

![在此处输入图像描述](../Images/a5670820f3c7350bf41b54a55b480c20.png)

请注意每个框（表示计算）如何具有一个输入和两个输出。

如果您查看`Monad`实例，`State`您会发现 的定义`(>>=)`告诉您如何执行此线程。它说要将有状态计算绑定`c0`到一个函数，该函数`f`接受有状态计算的结果并返回另一个有状态计算，我们执行以下操作：

1.  `c0`使用初始状态运行`s0`以获得结果和新状态：`(val, s1)`
2.  输入`val`函数`f`以获得新的有状态计算，`c1`
3.  `c1`使用修改后的状态运行新计算`s1`

* * *

这如何与已经接受`n`参数的函数一起工作？因为 Haskell 中的每个函数默认都是柯里化的，所以我们只需在末尾添加一个额外的参数（用于状态），而不是正常的返回值，该函数现在返回一个对，其第二个元素是新修改的状态。所以而不是

```
f :: a -> b 
```

我们现在有

```
f :: a -> s -> (b, s) 
```

您可能会选择将其视为

```
f :: a -> ( s -> (b, s) ) 
```

这在 Haskell 中是一样的（因为函数组合是右关联的），它读取“`f`是一个接受类型参数`a`并返回有状态计算的函数”。这就是`State`monad的全部内容。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-19T15:05:54.953

**简短的回答：**

1.  `State`旨在利用 monad 的特性来模拟带有局部变量的命令式系统状态。基本思想是在 monad 中隐藏获取当前状态并在每一步返回新状态以及中间结果的活动（这里我们有`s -> (a,s)`.
2.  不要将任意函数与包含在`State`. 前者可能有你想要的任何类型（前提是`State a`如果你想在 state monad 中使用它们，它们最终会产生一些）。后者拥有 type 的函数`s -> (a,s)`：这​​是由 monad 管理的状态传递层。
3.  正如我所说，包含在其中的函数`State`实际上是通过为实例定义的`(>>=)`并`return`通过它们生成的。`Monad (State s)`它的作用是通过代码调用传递状态。

第 3 点也是 state 参数从 state monad 中实际使用的函数中消失的原因。

**长答案：**

State Monad 已经在不同的论文中进行了研究，并且也存在于 Haskell 框架中（我现在不记得好的参考资料，我会尽快添加它们）。

这就是它遵循的想法：考虑一个`data MyState = ...`其值保持系统当前状态的类型。

如果你想通过一堆函数传递它，你应该以这样的方式编写每个函数，它至少将当前状态作为参数并返回一对及其结果（取决于状态和其他输入参数）和新的（可能修改的）状态。嗯，这正是 state monad 的类型告诉你的`s -> (a, s)`：在我们的示例中，`s`is`MyState`并且旨在传递系统的状态。

包裹在 中的函数`State`不接受参数，除了来自当前状态，这是生成新状态和中间结果所必需的。您在示例中看到的具有更多参数的函数不是问题，因为当您`do`在 monad 中的 -notation 中使用它们时，您会将它们应用于所有“额外”需要的参数，这意味着它们中的每一个都会产生在一个部分应用的函数中，其唯一的剩余参数是状态；monad 实例`State`将完成其余的工作。

如果您查看可能在 monad 中使用的函数的类型（实际上，在 monad 中它们通常称为操作），您会看到它们的结果类型被装箱在 monad 中：这就是告诉您的点一旦你给了它们所有的参数，它们实际上不会返回结果，而是（在这种情况下）一个`s -> (a,s)`符合 monad 组合法则的函数。

计算将通过将系统的第一/初始状态传递给整个块/组合来执行。

最后，不带参数的函数将具有类似`State a`where`a`的返回类型的类型：如果您查看 的值构造函数`State`，您会再次看到这实际上是一个函数`s -> (a,s)`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-26T15:00:07.170

我完全是 Haskell 的新手，我也不能很好地理解那本书中的 State Monad 代码。但是让我在这里添加我的答案以帮助将来的人。

## 答案：

*   ### 他们想用 State Monad 完成什么？

    **组合处理有状态计算的**函数。**
    例如`push 3 >>= \_ -> push 5 >>= \_ -> pop`** 

***   ### 为什么`pop`不带参数，而建议函数`f`带 1 个参数？

    `pop`不接受任何参数，因为它被`State`.
    类型为 unwapped 的函数`s -> (a, s)`接受一个参数。也是如此`push`。
    你可以用`runState`.

    ```
    runState pop :: Stack -> (Int, Stack)
    runState (push 3) :: Stack -> ((), Stack)

    ```

    `>>=`如果您指的是“函数`f`”的右侧，`f`则将类似于`\a -> pop`or `\a -> push 3`，而不仅仅是`pop`.** 

 **## 长解释：

这三件事帮助我更多地理解了 State Monad 和 Stack 的例子。

*   ### 考虑绑定运算符（`>>=`）的参数类型

    Monad 类型类中绑定运算符的定义是这样的

    ```
    (>>=) :: (Monad m) => ma -> (a -> mb) -> mb

    ```

    在堆栈示例中，`m`是`State Stack`.
    如果我们在心理上用 替换`m`，`State Stack`定义可以是这样的。

    ```
    (>>=) :: 状态栈 a -> (a -> 状态栈 b) -> 状态栈 b
    ```

    因此，绑定运算符左侧参数的类型将是`State Stack a`.
    而右边的将是`a -> State Stack b`。

*   ### 将 do 表示法转换为绑定运算符

    这是书中使用 do 表示法的示例代码。

    ```
    stackManip :: 状态堆栈整数  
    stackManip = 做  
         推 3  
         流行音乐  
         流行音乐  

    ```

    可以使用绑定运算符将其翻译为以下代码。

    ```
    stackManip :: 状态堆栈整数  
    stackManip = push 3 >>= \_ -> pop >>= \_ -> pop

    ```

    现在我们可以看到绑定运算符的右侧是什么。
    它们的类型是`a -> State Stack b`.

    ```
    (\_ -> pop) :: a -> State Stack Int
    (\_ -> push 3) :: a -> 状态栈 ()

    ```

*   ### 识别实例声明之间`(State s)`和中的区别`(State h)`

    这是书中State的实例声明。

    ```
    实例 Monad (State s) 其中  
        返回 x = 状态 $ \s -> (x,s)  
        (状态 h) >>= f = 状态 $ \s -> 让 (a, newState) = hs  
                                            (状态 g) = fa  
                                        在新状态

    ```

    考虑堆栈示例的类型，类型`(State s)`将是

    ```
    (State s) :: 状态栈
    s :: 堆栈

    ```

    的类型`(State h)`将是

    ```
    (状态 h):: 状态堆栈 a
    h :: 堆栈 -> (a, 堆栈)

    ```

    `(State h)`是绑定运算符的左侧参数，其类型`State Stack a`如上所述。

    那为什么`h`变成`Stack -> (a, Stack)`?
    它是与 newtype 包装器中定义的 State 值构造函数进行模式匹配的结果。对于`(State g)`.

    ```
    新类型状态 sa = 状态 { runState :: s -> (a,s) }

    ```

    一般来说，type of`h`是`s ->(a, s)`有状态计算的表示。以下任何一项都可能是`h`堆栈示例中的。

    ```
    runState pop :: Stack -> (Int, Stack)
    runState (push 3) :: Stack -> ((), Stack)
    runState stackManip :: Stack -> (Int, Stack)

    ```

    就是这样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-19T15:03:50.637

`State`monad本质上是

```
type State s a = s -> (a,s) 
```

从一个状态 ( `s`) 到一对期望结果 ( `a`) 和一个新状态的函数。该实现使状态的线程化并为您处理状态传递和更新，因此不会有意外将错误状态传递给下一个函数的风险。

因此，一个接受`k > 0`参数的函数，其中一个是状态并返回一对东西和一个新状态，在`State s`monad 中变成了一个接受`k-1`参数并返回一个单子动作的函数（它基本上是一个接受*一个*参数的函数，状态，这里）。

在非状态设置中，`pop`接受一个参数，堆栈，即状态。所以在单子设置中，`pop`变成了一个`State Stack Int`没有明确参数的动作。

使用`State`monad 而不是显式的状态传递可以使代码更简洁，出错的机会更少，这就是`State`monad 所完成的。没有它一切都可以完成，它只会更麻烦且容易出错。**

# windows - 获取智能卡的驱动器名称

> ID：10230564
> 
> 赞同：-1
> 
> 时间：2012-04-19T14:42:20.893
> 
> 标签：windows, visual-c++

我正在 Windows MFC 中编写一个 java 智能卡应用程序。如何找到连接的智能卡的驱动器名称（名称显示在“我的电脑”中）。例如。一旦我连接了智能卡（即使它是智能卡，它也可以用作存储卡），它将以“**可移动磁盘（F:)**”的形式出现。我可以使用 SCardConnect 功能连接到智能卡。从 SCardConnect 函数的句柄返回，我可以得到驱动器名称。

或者有什么方法可以查明某个驱动器是否是智能卡。IE。我们可以很容易地找出机器中的可移动磁盘，从中可以确定它是否是智能卡。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T15:58:04.050

我用 C 编写了枚举 SmartCard 设备的代码；这是我使用的代码；

干杯，骗局

```
int findDevice(){
hContext = NULL;

log("\nSearching for the following device: XXX eKrypto Pinpad\n");

//Get a context to the resource manager 
lReturn = SCardEstablishContext(SCARD_SCOPE_USER,NULL,NULL,&hContext);
log("Context established.\n");
if(lReturn != SCARD_S_SUCCESS){
  logBytes("SCardEstablishContext failed with error: ", (byte *)&lReturn, sizeof(LONG));
  return 0;
}

contextEstablished = true;

//Get the readers list
DWORD chReaders = 250;
lReturn = SCardListReaders(hContext,NULL,readerNames,&chReaders);
log("Reader List obtained.\n");
if(lReturn != SCARD_S_SUCCESS){
    logBytes("  SCardListReaders failed with error: \n", (byte *)&lReturn, sizeof(LONG));
    return 0;
}

//Search for device
char *pReaders = readerNames;
log(pReaders);
while(strlen(pReaders) != 0 && deviceFound == false){
    if(!memcmp(pReaders, "ETS eKrypto Pinpad", 18)){
        deviceFound = true;
        memcpy(currentReader, pReaders, strlen(pReaders));
    }
    pReaders += strlen (pReaders)+1;
}
if(deviceFound == false){
    log("  Specified ETS device not found\n");
    return 0;
}

log("  Successful\n");
return 1;
} 
```

# java - 在构建 WAR 之前在 Maven 中重命名生成的文件

> ID：10230566
> 
> 赞同：3
> 
> 时间：2012-04-19T14:42:33.400
> 
> 标签：java, maven, css-sprites

祈祷你能帮助我！

我正在使用[SmartSprites](http://csssprites.org/)将登录页面上的 PNG 合并为一个，以便加载更快。

SmartSprite 将检查您的 CSS 文件，生成 CSS Sprite 图像，并创建一个新的 CSS 文件，该文件将使用此 sprite 图像而不是原始图像。我想要做的是在我的 Maven WAR 构建期间自动将原始 CSS 文件替换为 SmartSprite 文件。

所以这就是我想要发生的事情：

1.  SmartSprite 扫描我的 CSS 文件：*mystyle.css*
2.  SmartSprite 创建一个精灵图像，并创建一个新*的 mystyle-sprite.css*文件，该文件引用新的精灵图像。
3.  **我想在构建 WAR 之前将*mystyle-sprite.css*复制到*mystyle.css*上，这样我就不必更改 JSP 文件中的任何引用。**

这两个文件都位于输出目录（target/myproj/css）中。SmartSprite 中似乎没有任何标志来覆盖原始文件，所以我想它必须进行后处理。

下面是我用于 SmartSprite 的 maven 插件配置。

```
 <plugin>
            <groupId>org.carrot2.labs</groupId>
            <artifactId>smartsprites-maven-plugin</artifactId>
            <version>1.0</version>
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>spritify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T14:59:18.823

恐怕你找不到比 Maven AntRun 插件更简单或更优雅的东西了：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-antrun-plugin</artifactId>
      <version>1.7</version>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <configuration>
            <target>
              <copy file="${project.build.directory}/mystyle-sprite.css"
                tofile="${project.build.directory}/mystyle.css" />
            </target>
          </configuration>
          <goals>
            <goal>run</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:49:26.993

您可以使用[Maven WAR 插件](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <webResources>
            <resource>
                <directory><!-- Your output directory --></directory>
                <targetPath><!-- The target location of the files below --></targetPath>
                <includes>
                    <include><!-- file pattern --></include>
                    <include><!-- file pattern --></include>
                </includes>
            </resource>
        </webResources>
    </configuration>
</plugin> 
```

您还应该将 SmartSprites 配置为使用不同的输出目录来保留原始 CSS 文件名。尝试`output-dir-path`使用空`css-file-suffix`值的选项。

# jsf - 如何在jsf页面中插入标签？

> ID：10230568
> 
> 赞同：1
> 
> 时间：2012-04-19T14:42:39.833
> 
> 标签：jsf, tabs

如何在 jsf 页面中插入选项卡？

```
<h:outputText class="text" value="#{BackingBean.line1}" /> 
```

这不起作用：

```
String line1 = "Scale \t: " + vss.getScale(); 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:40:09.123

默认情况下，空格在 HTML 中，不作为演示文稿的一部分。您需要使用 HTML 元素，例如`<br/>`换行符`<ul><li>`、列表或`<dl><dt><dd>`定义。最有可能`<dl><dt><dd>`最适合您。

如果你有一个顽固的头脑，你总是可以`white-space`将父元素的 CSS 属性设置为`pre`.

例如

```
<h:outputText ... styleClass="preformatted" /> 
```

*（请注意`class`属性无效。应该是`styleClass`）*

和

```
.preformatted {
    white-space: pre;
} 
```

# php - 需要检查两个表之间哪一行最喜欢

> ID：10230574
> 
> 赞同：0
> 
> 时间：2012-04-19T14:42:55.310
> 
> 标签：php, mysql, sql

我对 MYSQL 相当陌生！

我需要做一个 SQL 查询来检查一行有多少喜欢（在两个表之间）

我发现了另一个看起来像我的问题，但我无法让它返回任何东西（即使它不会产生错误。

询问：

```
SELECT *
  FROM likes
INNER JOIN (SELECT likes.like_id,
                   COUNT(*) AS likes
              FROM likes
        INNER JOIN uploads ON likes.upload_id=uploads.upload_id
             WHERE uploads.upload_date >= DATE_SUB(CURDATE(), INTERVAL 8 DAY)
          GROUP BY uploads.upload_id) x ON x.like_id = likes.like_id
  ORDER BY x.likes DESC 
```

链接到原始问题： [MySQL，需要选择在另一个表中具有最频繁值的行](https://stackoverflow.com/questions/4222616/mysql-need-to-select-rows-that-has-the-most-frequent-values-in-another-table)

非常感谢帮助

亲切的问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:11:33.773

由于您没有发布您的表格结构，我不得不猜测..

```
select someid, count(*) cnt from
(
   select * from table1 t1 join table2 t2 on t1.someid = t2.someid
) as q0 group by someid order by cnt desc; 
```

它需要调整以适应您的架构。

# jquery - 如何缓慢地将div内的图像连续移动到不同的坐标

> ID：10230575
> 
> 赞同：0
> 
> 时间：2012-04-19T14:42:55.980
> 
> 标签：jquery, html, dhtml

我在`div`. 我想使用某种计时器将图像移动到`div`.

示例 html：

```
<div id="Container" width="200" height="100"><img src="..."></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:17:26.247

我用jQuery做了一些事情。有趣的是，我从动画`top`和`left`同时开始，经过一些努力和三角学，我意识到如果你将 x 和 y 组件分开，在 div 中弹跳的动画会变得容易得多。

演示：http: [//jsfiddle.net/jtbowden/DcgwR/](http://jsfiddle.net/jtbowden/DcgwR/)

这是一个可以处理多个元素的版本：

演示：http: [//jsfiddle.net/jtbowden/DcgwR/2/](http://jsfiddle.net/jtbowden/DcgwR/2/)

关键代码是：

```
// Parameters
// img: jQuery element (not necessarily img)
// speed: in px/millisecond
// max: maximum distance to travel
// dir: 'left' or 'top'

function bounce(img, speed, max, dir) {
    speed += ((Math.random() * varSpeed) - (varSpeed / 2));
    speed = speed < minSpeed ? minSpeed : (speed > maxSpeed ? maxSpeed : speed)
    var time = max / speed;
    var position = img.position();
    var target = (position[dir] < 2) ? max : 0;

    var style = {
        queue: false
    };
    style[dir] = target;
    img.animate(style, {
        duration: time,
        queue: false,
        easing: "linear",
        complete: function() {
            bounce(img, time, max, dir);
        }
    });
} 
```

`maxSpeed`, `minSpeed`,`varSpeed`是全局定义的（以 px/ms 为单位），`varSpeed`表示每次反弹时速度的变化幅度。我有一个单独的函数`startBounce`，它调用`bounce`两次，一次 for`left`和一次 for `top`。因为动画没有排队，所以它们是独立动画的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:05:41.850

让我们假设您有以下 HTML：

```
<div id="container" style="width:500px;height:500px">
  <img src="foo.gif" width="50" height="50">
</div> 
```

现在使用 jQuery 你可以这样做：

```
<script>
  ;(function() {
    var img = $("#container img");
    img.css({ position: "absolute" });
    img.animate({ left: 50, top: 50 });
    img.animate({ left: 100, top: 100 });
    // and so on

    // or if you just want to position it without animation
    img.css({ left: 50, top: 50 });
    // some timeout or similar
    img.css({ left: 100, top: 100 });
    // and so on
  })(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:09:03.003

像这样的东西：

```
<script>
function moveit()
{
  var animatedImg = document.getElementById( "animate" );
  var top = animatedImg.offsetTop;
  var left = animatedImg.offsetLeft;
  top++;
  left++;
  if ( top > 100 )
  {
    top = 0;
  }
  if ( left > 200 )
  {
    left = 0;
  }
  animatedImg.setAttribute( "style", "position: relative; top: " + top + "px; left: " + left + "px;" );
  setTimeout( moveIt, 1000 );
}
</script>
...
<body onload="moveIt()">
<div>
  <img src="imageSource" id="animate" />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:47:27.163

我想您不只是希望我们为您编写代码并希望得到答案：

您在正确的轨道上，使用计时器（查找`setTimeout`：），您可以在其上更改位置（使用 CSS；查找属性`position`，，`left`以及`right`可能`margin`，可能`width`和`height`）。

如果是我，我会使用 jQuery，在这种情况下你应该查找`animate`，`.offset()`...

# macos - OS X - 确定给定 PID 的环境？

> ID：10230576
> 
> 赞同：2
> 
> 时间：2012-04-19T14:43:01.987
> 
> 标签：macos, environment, pid

对于给定的进程 ID，确定环境变量（例如 PATH）的最佳/最直接方法是什么？必须能够查询任意环境变量。PATH 只是第一个例子。

```
'lsof -a -p $PID -d cwd -F' gets some of it. 
```

但是，我看不到使用 lsof 获取给定 PID 的 PATH 的方法。

```
'ps -Ep $PID' gets some of it. 
```

但是，再次，'不全面。它似乎只回馈了该过程的一部分“环境”。

在许多其他 Linux/UNIX 变体上，您可以查看“/proc//environ”。但是，OS X 显然没有使用这种机制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:54:39.813

你应该得到这个信息（和一些额外的）`ps -Eww $PID`

您只看到部分环境的原因是 ps 将修剪输出以适合您的窗口（如果转到标准输出）。在标志中添加“ww”告诉 ps 不要关心窗口大小。

# c# - 使用 .NET 4 将程序最小化到系统托盘的最简单方法

> ID：10230579
> 
> 赞同：41
> 
> 时间：2012-04-19T14:43:08.953
> 
> 标签：c#, wpf, .net-4.0, system-tray, minimize

我正在制作一个新的 WPF 应用程序，我需要能够最小化该应用程序，并在时钟旁边（或该一般区域）的系统托盘中拥有漂亮而舒适的位置。

这必须在 Windows XP、Vista 和 7 上工作。我不必支持旧版本的 Windows。

如果我使用 .NET 4，实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-19T14:47:59.783

[MSDN 论坛中的示例](https://social.msdn.microsoft.com/Forums/en-US/21992d0b-a02c-4042-a188-47b0a2b99b0b/wpf-system-tray-application?forum=wpf)

这是一个快速示例，展示如何最小化通知区域。您需要添加对`System.Window.Forms`和`System.Drawing`程序集的引用。

```
public partial class Window1 : System.Windows.Window
{

    public Window1()
    {
        InitializeComponent();

        System.Windows.Forms.NotifyIcon ni = new System.Windows.Forms.NotifyIcon();
        ni.Icon = new System.Drawing.Icon("Main.ico");
        ni.Visible = true;
        ni.DoubleClick += 
            delegate(object sender, EventArgs args)
            {
                this.Show();
                this.WindowState = WindowState.Normal;
            };
    }

    protected override void OnStateChanged(EventArgs e)
    {
        if (WindowState == System.Windows.WindowState.Minimized)
            this.Hide();

        base.OnStateChanged(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-19T14:46:57.093

我在 WPF 中使用这个免费的通知图标实现取得了成功。

[http://www.hardcodet.net/projects/wpf-notifyicon](http://www.hardcodet.net/projects/wpf-notifyicon)

设置非常简单，并且提供了源代码。它不依赖于 Windows 窗体，因此它是“纯”WPF 并且非常可定制。

[您可以在CodeProject](http://www.codeproject.com/KB/WPF/wpf_notifyicon.aspx)上找到有关如何使用它的教程。
这是[Nuget 包](https://www.nuget.org/packages/Hardcodet.NotifyIcon.Wpf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T16:27:29.623

`notifyIcon`从工具箱添加到您的应用程序。
选择您的主要`form`>>转到`Properties`>>选择`Events`图标>>在`FromClosing event`类型`MainForm_FormClosing`>>按Enter。

[![在此处输入图像描述](../Images/71c88206b4ed85bf8380180dae2c4783.png)](https://i.stack.imgur.com/YZskN.jpg)

在打开的`.cs`文件中输入以下事件操作：

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
     this.Hide();
     notifyIcon.Visible = true;
     ShowInTaskbar = false;
     e.Cancel = true;
} 
```

现在，当您单击 X 按钮时，您的主 FORM 窗口将最小化到系统托盘。下一步是让 FORM 恢复正常状态。
转到`Properties`您的`notifyIcon`>> 查找`DoubleClick event`>> 类型`NotifyIcon_DoubleClick`并按 Enter 以获取为您创建的事件函数。

[![在此处输入图像描述](../Images/286106beef04df23582c28d7470608d4.png)](https://i.stack.imgur.com/2KQ03.jpg)

将此代码放入您的活动中：

```
private void NotifyIcon_DoubleClick(object sender, EventArgs e)
{
    this.Show();
    notifyIcon.Visible = false;
} 
```

现在，如果你想以**花哨的风格制作通知图标，**你可以添加上下文菜单并将其链接到通知图标，这样你就会得到类似的东西：

[![在此处输入图像描述](../Images/3a78078d5cad96f83d57bbd7c244eb76.png)](https://i.stack.imgur.com/9RmNR.jpg)

这里是将 contextMenuStrip 链接到 NotifyIcon 的地方：

[![在此处输入图像描述](../Images/9a9d19eda4bdb92d65456de35b903d36.png)](https://i.stack.imgur.com/TSZva.jpg)

祝你好运！

# c# - 写入 C# 变量的不安全 JavaScript 错误

> ID：10230580
> 
> 赞同：2
> 
> 时间：2012-04-19T14:43:09.430
> 
> 标签：c#, javascript, asp.net

我在页面中有一些 JavaScript，它获取模块 Window 传递的值并将其分配给 C# 变量，因此可以在后面的代码中使用它。所以我的 JavaScript 看起来像：

**JavaScript**

```
<script type="text/javascript">

       function openSecure(args) {
           var manager = $find("<%= rwmSecure.ClientID %>");
           var domain = '<%=ConfigurationManager.AppSettings("CPCDomain").ToString %>';
           var URL;

           if (domain == 'localhost') {
               URL = 'http://localhost';
           }

           URL += "/WindowPage.aspx?args=" + args;
           manager.open(URL, "rwSecure");
       }
       function OnClientCloseSecure(oWnd, args) {
           var arg = args.get_argument();

           if (arg) {

               var ResultCode = arg.ResultCode;
               document.getElementById("hdnResultCode").value = ResultCode;
               var AuthCode = arg.AuthCode;
               var ReferenceNumber = arg.ReferenceNumber;
               var TransactionID = arg.TransactionID;
               var ErrorCode = arg.ErrorCode;
               var ErrorDescription = arg.ErrorDescription;
               var CardNumber = arg.CardNumber;
               var PONumber = arg.PONumber;
               //document.getElementById('<%=btn.ClientID %>').click();

               __doPostBack('pnlComplete', '');
           }
       }       
</script> 
```

并进一步澄清这一点。Module 窗口正在从 localhost 中拉入一个页面，但 Module 窗口是从 localhost:61156 上的页面调用的。因此，一旦 javascript 设置了 variavle，它还会在 asp.net 按钮上发出一个单击命令来运行一些代码：

**C# 代码**

```
protected void btn_Click(object sender, EventArgs e)
{
    if (string.IsNullOrEmpty(hdnResultCode.Value)) {
        dspConfirm();
        pnlComplete.Visible = false;
        pnlConfirm.Visible = true;
    } else {
        dspComplete();
        pnlComplete.Visible = true;
        pnlConfirm.Visible = false;
    }

} 
```

所以当我运行它时，我得到一个 javascript 错误，上面写着：

```
Unsafe JavaScript attempt to access frame with URL http://localhost/SecurePayment.aspx?args=H4sIAAAAAAAEAOy9B2AcSZYlJi9tynt%2fSvVK1%2bB0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcplVmVdZhZAzO2dvPfee%2b%2b999577733ujudTif33%2f8%2fXGZkAWz2zkrayZ4hgKrIHz9%2bfB8%2fIr578jMnL09%2b5k3etG%2fqbNlk07aolj%2bzi%2bdndsY7u%2f9PAAAA%2f%2f8VkT5ZIQAAAA%3d%3d&rwndrnd=0.23641548841260374 from frame with URL http://localhost:65116/ShoppingCart.aspx. Domains, protocols and ports must match.
b.RadWindow._registerChildPageHandlersScriptResource.axd?d=vMihE91hOtu6KBE47c3D9AjqD9Il5YI4LpCLhSvp5YZn6p98cl2a_AbJJmNWVZfnmjtLnCnYEoaBHBC919OsikIEmKq8TGOzWNWN_HUBLLo8fW7DdN4EuN3Q076lAa_FOwh_Yk2b3DL-W2Fv0&t=38ec0598:1125
b.RadWindow._onIframeLoadScriptResource.axd?d=vMihE91hOtu6KBE47c3D9AjqD9Il5YI4LpCLhSvp5YZn6p98cl2a_AbJJmNWVZfnmjtLnCnYEoaBHBC919OsikIEmKq8TGOzWNWN_HUBLLo8fW7DdN4EuN3Q076lAa_FOwh_Yk2b3DL-W2Fv0&t=38ec0598:1143
(anonymous function)ScriptResource.axd:47
Sys$UI$DomEvent$addHandler.browserHandlerScriptResource.axd:4048 
```

那么有没有办法解决这个问题或解决这个问题？这两天我一直在挠头，我准备扔键盘了。：） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:50:41.513

您的 javascript 错误信息量很大。

> 不安全的 JavaScript 尝试从 URL http:// **localhost: 65116 /ShoppingCart.aspx 的框架访问具有 URL http://** **localhost** /SecurePayment.aspx?args=... 的框架。域、协议和 **端口必须匹配**。

 ****这听起来像是[同源策略的一个例外](https://en.wikipedia.org/wiki/Same_origin_policy)

> 该策略允许在来自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。 [1]

和

> 术语“来源”是使用运行脚本的 HTML 文档的域名、应用层协议和（在大多数浏览器中）端口号来定义的。当且仅当所有这些值完全相同时，才认为两个资源具有相同的来源。

您的脚本在特定端口的站点中的本地计算机上运行，​​但尝试在不同端口访问本地计算机上的页面。我会从那里开始。****

# php - Mysql结果设置会话变量

> ID：10230581
> 
> 赞同：2
> 
> 时间：2012-04-19T14:43:11.360
> 
> 标签：php, mysql, session-variables

我想使用 mysql 查询的结果来设置会话变量，但是目前我正在努力设置它。

我的代码是：

```
<?php

ob_start("ob_gzhandler");

?>
<?php 
// Include required MySQL configuration file and functions 
require_once('config.inc.php'); 
require_once('functions.inc.php'); 

// Start session 
session_start(); 

// Check if user is already logged in 
if ($_SESSION['logged_in'] == true) { 
          // If user is already logged in, redirect to main page 
          redirect('../index.php'); 
} else { 
          // Make sure that user submitted a username/password and username only consists of alphanumeric chars 
          if ( (!isset($_POST['username'])) || (!isset($_POST['password'])) OR 
               (!ctype_alnum($_POST['username'])) ) { 
                        redirect('../login.php'); 
          } 

          // Connect to database 
          $mysqli = @new mysqli(DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);
// Check connection 
          if (mysqli_connect_errno()) { 
                        printf("Unable to connect to database: %s", mysqli_connect_error()); 
                        exit(); 
          } 

          // Escape any unsafe characters before querying database 
          $username = $mysqli->real_escape_string($_POST['username']); 
          $password = $mysqli->real_escape_string($_POST['password']); 

          // Construct SQL statement for query & execute 
          $sql              = "SELECT * FROM users WHERE username = '" . $username . "' AND password = '" . md5($password) . "'"; 
          $result = $mysqli->query($sql); 

// If one row is returned, username and password are valid 
          if (is_object($result) && $result->num_rows == 1) { 
                        // Set session variable for login status to true 

                        $_SESSION['auth_lvl'] = $Auth_lvl;
                        $_SESSION['logged_in'] = true;

                        redirect('../index.php'); 
          } else { 
                        // If number of rows returned is not one, redirect back to login screen 
                        redirect('../login.php'); 
          } 
} 
?> 
```

然后我正在测试会话变量：

```
<?php 
session_start(); 
echo "Login Status is:".$_SESSION['logged_in'];
echo "<br/>";
echo "Auth status is level:".$_SESSION['auth_lvl'];
?> 
```

在我的测试页面上，登录的会话可以正常显示正确的信息，但是 auth lvl 变量什么也不显示。

我只能假设我没有正确调用我首先设置变量的信息。

任何帮助，将不胜感激。

艾伦。

我注意到并且我一直在尝试的建议是，如果我设置一个定义而不是尝试从数据库中检索一个值，那么该值将返回到我的测试页面上。IE

```
$_SESSION['auth_lvl'] = 'test'; 
```

这告诉我这是我从数据库中提取数据并尝试将其设置为 $_SESSION['auth_lvl'] 的方式导致了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:00:13.823

发现了问题。

代码如下：

```
$result = $mysqli->query($sql); 

// If one row is returned, username and password are valid 
if (is_object($result) && $result->num_rows == 1) { 

// ADD THIS SET OF LINES
$data = mysql_fetch_assoc( $result );

// Replace auth_lvl with the name of your database column name
$Auth_lvl = $data['Auth_lvl'];

// Set session variable for login status to true 
$_SESSION['auth_lvl'] = $Auth_lvl;
$_SESSION['logged_in'] = true; 
```

因为我在这段代码上使用了 mysqli，所以我没有注意到在 //ADD THIS SET OF LINES 代码中缺少“i”。当我将代码更改为：

```
$data = mysqli_fetch_assoc( $result ); 
```

一切都在生活中燃烧。

谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:54:15.630

我看不到您为 $Auth_lvl 分配了值的任何地方，所以当您这样做时：

```
$_SESSION['auth_lvl'] = $Auth_lvl; 
```

它可能被分配为null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:54:02.160

我没有看到你在哪里设置 $Auth_lvl。在检查结果和行之后，您将直接针对空变量设置会话变量。

```
 if (is_object($result) && $result->num_rows == 1) { 
                    // ADD THIS SET OF LINES
                    $data = mysql_fetch_assoc( $result );

                    // Replace auth_lvl with the name of your database column name
                    $Auth_lvl = $data['auth_lvl']'

                    // Set session variable for login status to true 

                    $_SESSION['auth_lvl'] = $Auth_lvl;
                    $_SESSION['logged_in'] = true;

                    redirect('../index.php'); 
```

然后使用您的 logged_in 会话变量，将其设置为布尔值 true，然后尝试将其作为普通文本回显。

```
if ( $_SESSION['logged_in'] ) { echo "Login status is: True"; } 
```

我希望这会有所帮助。

-担

# opengl - 在 Borland 5.02 中使用 glew

> ID：10230582
> 
> 赞同：0
> 
> 时间：2012-04-19T14:43:11.707
> 
> 标签：opengl, glew, turbo-c

我必须在 Boldand 5.02 制作的非常旧的 OpenGL 程序中实现 VBO，但是当我尝试包含 GL/glew.h 时出现以下错误：

```
Info :Compiling C:\fontesusr\vertexbuffer.cpp
Error:  glew.h(269,25):Too many types in declaration
Error:  glew.h(270,27):Too many types in declaration
Error:  glew.h(13275,185):Multiple declaration for 'PFNGLREPLACEMENTCODEUITEXCOORD2FCOLOR4FNORMAL3FVERTEX3F'
Error:  glew.h(13274,185):Earlier declaration of 'PFNGLREPLACEMENTCODEUITEXCOORD2FCOLOR4FNORMAL3FVERTEX3F' 
```

问题出现在以下 glew 代码中：

```
#elif defined(_MSC_VER) || defined(__BORLANDC__)
    typedef signed long long GLint64EXT;
    typedef unsigned long long GLuint64EXT;
#else 
```

我认为这是因为 borland 5.02 是一个 32 位编译器...

有人可以给我一个建议，我可以做些什么来解决这个问题？或另一种在不使用 glew 库的情况下实现 VBO 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:53:08.247

我 99% 确定 Borland C++ 5 没有 64 位整数类型。它似乎被解释`long long`为“多种类型”并且对此感到厌烦。

您使用的 glew 版本不是为支持旧版本的 Borland C++ 而编写的。

您可以尝试破解 glew 头文件以删除对 64 位类型和函数的引用。

这也可能有效，但我不确定：

```
#undefine __BORLANDC__
#include <glew.h> 
```

# oracle - 在 Oracle 中获取调用包/过程

> ID：10230584
> 
> 赞同：2
> 
> 时间：2012-04-19T14:43:14.763
> 
> 标签：oracle, plsql

我在 Oracle 10g 中编写了一个日志记录过程，它使用以下插入写入表：

```
INSERT INTO EXEC_LOG VALUES (
  (SELECT SYS_CONTEXT('USERENV','SESSIONID') sessionid FROM dual),
  strPackage, strProcedure, strEventType, strEventLevel, SYSDATE, strMessage
); 
```

这个过程在多个不同的包/过程中重复使用，但是现在的方式是，程序员必须将他们的包/过程名称传递给日志记录过程（`strPackage`和`strProcedure`）。

我想知道 Oracle 中是否有 av$ 视图或其他东西可以告诉我这个过程是从哪个包/过程中调用的，从而消除了程序员传入`strPackage`and的需要`strProcedure`。

例子：

如果我调用这两个程序：

```
BEGIN
  log_test.testproc1;
  log_test.testproc2;
END; 
```

从这个包：

```
CREATE OR REPLACE PACKAGE BODY log_test IS
  PROCEDURE TestProc1 IS
    BEGIN
      write_exec_log( ... );    
    END TestProc1;
  PROCEDURE TestProc2 IS
    BEGIN
      write_exec_log( ... );     
    END TestProc2;  
 END log_test; 
```

我希望能够评估`log_test`/`TestProc1`和`log_test`/`TestProc2`从 insdie`write_exec_log`方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-16T12:52:37.390

从 Oracle 12c 开始，您可以使用内置包 UTL_CALL_STACK ( [http://docs.oracle.com/database/121/ARPLS/u_call_stack.htm](http://docs.oracle.com/database/121/ARPLS/u_call_stack.htm) )。

如果您只对调用过程感兴趣，则简短示例： `DBMS_OUTPUT.PUT_LINE(UTL_Call_Stack.Concatenate_Subprogram(UTL_Call_Stack.Subprogram(2)));`

或者打印完整的调用堆栈：

```
FOR j IN REVERSE 1..UTL_Call_Stack.Dynamic_Depth() LOOP 
  DBMS_OUTPUT.PUT_LINE(UTL_Call_Stack.Concatenate_Subprogram(UTL_Call_Stack.Subprogram(j)));
END LOOP; 
```

您的包裹示例：

```
CREATE OR REPLACE PACKAGE  log_test IS
 PROCEDURE write_exec_log(msg VARCHAR2);
 PROCEDURE TestProc1;
 PROCEDURE TestProc2;  
 PROCEDURE TestProc3;
END log_test; 
/

CREATE OR REPLACE PACKAGE BODY log_test IS
 PROCEDURE write_exec_log(msg VARCHAR2) IS
  BEGIN
   DBMS_OUTPUT.PUT_LINE(msg);
   DBMS_OUTPUT.PUT_LINE('-- ');
   DBMS_OUTPUT.PUT_LINE('calling procedure/function: '
                      ||UTL_Call_Stack.Concatenate_Subprogram(
                                                              UTL_Call_Stack.Subprogram(2)
                                                             )
                       );
   DBMS_OUTPUT.PUT_LINE('-- ');
   DBMS_OUTPUT.PUT_LINE('Call Stack');
   FOR j IN REVERSE 1..UTL_Call_Stack.Dynamic_Depth() LOOP
    DBMS_OUTPUT.PUT_LINE(UTL_Call_Stack.Concatenate_Subprogram(
                                                               UTL_Call_Stack.Subprogram(j)
                                                              )
                        );
   END LOOP;
  END write_exec_log;
 PROCEDURE TestProc1 IS
  BEGIN
   write_exec_log( 'msg TestProc1' );    
  END TestProc1;
 PROCEDURE TestProc2 IS
  BEGIN
   write_exec_log( 'msg TestProc2' );     
  END TestProc2;  
 PROCEDURE TestProc3 IS
  BEGIN
   TestProc2;
  END TestProc3;  
END log_test; 
/

exec log_test.TestProc1
exec log_test.TestProc2
exec log_test.TestProc3 
```

（抱歉，在撰写本文时没有 sqlfiddle，没有可用的 12c）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:51:56.323

[Tom Kyte 的 Who_Called_Me 应该可以工作。](http://tkyte.blogspot.com/2009/10/httpasktomoraclecomtkytewhocalledme.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T12:33:59.520

[这](https://github.com/Qualtagh/OracleDBUtils/blob/master/utl_call_stack.9.sql)是`utl_call_stack`Oracle 9 和 Oracle [10 和 11](https://github.com/Qualtagh/OracleDBUtils/blob/master/utl_call_stack.sql)的实现（反向移植） 。

另一种解决方案（使用[p_stack](https://github.com/Qualtagh/OracleDBUtils/blob/master/p_stack.sql)包）：

```
dbms_output.put_line( p_stack.getConcatenatedSubprograms( p_stack.whoCalledMe ) ); 
```

使用[GWu 的示例](https://stackoverflow.com/a/31454722/4540645)，它将输出：

```
LOG_TEST.TESTPROC1
LOG_TEST.TESTPROC2
LOG_TEST.TESTPROC2 
```

这些只是最后的电话。或者，如果您需要完整的堆栈：

```
dbms_output.put_line( p_stack.getCallStack );
dbms_output.put_line( '' ); 
```

这将输出：

```
493: YOUR_SCHEMA.PACKAGE BODY P_STACK.FUNCTION GETCALLSTACK.FUNCTION GETCALLSTACK
4: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE WRITE_EXEC_LOG
9: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE TESTPROC1
2: YOUR_SCHEMA.ANONYMOUS BLOCK

493: YOUR_SCHEMA.PACKAGE BODY P_STACK.FUNCTION GETCALLSTACK.FUNCTION GETCALLSTACK
4: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE WRITE_EXEC_LOG
13: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE TESTPROC2
3: YOUR_SCHEMA.ANONYMOUS BLOCK

493: YOUR_SCHEMA.PACKAGE BODY P_STACK.FUNCTION GETCALLSTACK.FUNCTION GETCALLSTACK
4: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE WRITE_EXEC_LOG
13: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE TESTPROC2
17: YOUR_SCHEMA.PACKAGE BODY LOG_TEST.PROCEDURE TESTPROC3
4: YOUR_SCHEMA.ANONYMOUS BLOCK 
```

它适用于从 9 到 12 的 Oracle 版本。

# ios - 如何在非 UI 线程上将 PDF 页面的图像预览存储到磁盘？

> ID：10230585
> 
> 赞同：1
> 
> 时间：2012-04-19T14:43:15.527
> 
> 标签：ios, cocoa-touch, pdf, xamarin.ios, core-graphics

我正在尝试创建 PDF 页面的缩略图预览并将它们作为 PNG 存储在磁盘上。这应该在单独的线程中运行，而不是在 UI 线程中运行。

为了实现这一点，我`CGContextRef`用来绘制 PDF 页面，然后从中获取 a `CGImage`，将其转换为 a `UIImage`，从中获取 PNG（将是`NSData`）并将其保存`NSData`到磁盘。到目前为止一切都清楚了。

但是`CGImage`，and`UIImage`是一个 UI 元素，不应该在另一个线程上使用 - 但我不想将该图像带到屏幕上。在这种情况下可以在另一个线程上使用它们吗？还是有另一种方法可以将 PDF 页面预览直接呈现到磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:17:58.843

UIKit*通常*不是线程安全的（有些调用是线程安全的，但它的文档记录非常糟糕）。OTOH CoreGraphics 是线程安全的。因此，避免`UIImage`和仅使用`CGImage`是在后台线程中进行图像处理的最安全方法。

请参阅[将 CGImageRef 保存到 png 文件？](https://stackoverflow.com/questions/1320988/saving-cgimageref-to-a-png-file)保存`CGImageRef`为 PNG 文件。

# opengl-es - OpenGL ES：组合两个帧缓冲区对象

> ID：10230586
> 
> 赞同：2
> 
> 时间：2012-04-19T14:43:16.310
> 
> 标签：opengl-es, framebuffer

我在屏幕外画了两个 FBO。现在我想根据深度缓冲区值覆盖它们。我怎样才能做到这一点？

我找到了一个解决方案：首先，我在附加到 FBO 的纹理中渲染深度缓冲区。其次，我将其加载到 FragmentShader 中以比较两个 deptbuffer。我的 Fragmentshader 看起来像这样。

```
precision mediump float;
varying vec2 v_texCoord;
uniform sampler2D s_texture1;
uniform sampler2D s_texture2;
uniform sampler2D s_depth1;
uniform sampler2D s_depth2;
void main(){
  vec4 tex1;
  vec4 tex2;
  vec4 depth1;
  vec4 depth2;

  depth1 = texture2D( s_depth1, v_texCoord);
  depth2 = texture2D( s_depth2, v_texCoord);

  tex1 = texture2D( s_texture1, v_texCoord );
  tex2 = texture2D( s_texture2, v_texCoord );
  if ( depth1.r < depth2.r ){
      gl_FragColor = tex1;
  }else{
      gl_FragColor = tex2;
  }
} 
```

但这似乎不是那么高性能。

是否可以像我现在一样在 FBO 中使用附加的渲染缓冲区并访问片段着色器中渲染缓冲区的数据？这会提高我的表现吗？

非常感谢。

雷格斯垫。

# php - 如何显示特定的 json 值而不是打印或转储函数

> ID：10230595
> 
> 赞同：2
> 
> 时间：2012-04-19T14:44:06.383
> 
> 标签：php, json

使用以下内容，我可以将所有信息显示为两种格式的数组，但是我希望为变量分配一个值并使用例如名称而不是完整的屏幕转储。

> $url = 'http://myurl';
> 
> $json = file_get_contents($url);
> 
> $dump=(var_dump(json_decode($json, true)));
> 
> $json_output = json_decode($json); print_r($json_output)

这可能很容易，我很抱歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T14:47:41.033

您可以使用：

```
$object = json_decode($json); 
```

这将创建一个对象，然后您可以访问类似的属性..

```
echo $object->whatever; 
```

或者您可以像这样使用 json_decode：

```
$array = json_decode($json, TRUE); 
```

这将创建一个数组，您可以像这样访问单个键..

```
echo $array['whatever']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:59:33.723

使用 PHP 的 json_decode() 函数应该可以满足这一点。在您的第一次调用中，您将 TRUE 作为第二个参数传递，因此该函数返回一个关联数组。PHP 手册页说明了这种差异：

```
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';
var_dump(json_decode($json));
var_dump(json_decode($json, true)); 
```

这两个对 var_dump 的调用将输出：

```
object(stdClass)#1 (5) {
["a"] => int(1)
["b"] => int(2)
["c"] => int(3)
["d"] => int(4)
["e"] => int(5)
}

array(5) {
["a"] => int(1)
["b"] => int(2)
["c"] => int(3)
["d"] => int(4)
["e"] => int(5)
} 
```

在任何一种情况下，您都可以访问各个元素：

```
$json       = '{"url":"stackoverflow.com","rating":"useful"}';

$jsonAsObject   = json_decode($json);
$jsonAsArray    = json_decode($json, TRUE);

echo $jsonAsObject->url . " is " . $jsonAsArray['rating']; 
```

这将输出：

```
stackoverflow.com is useful 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:51:11.110

您使用面向对象的 dot.notation 来访问变量名称。尝试这样的事情：

```
alert($json_output->varName);
alert($json_output['varName']); 
```

# mysql - 使用自制软件安装 mysql 5.5.20 的问题

> ID：10230596
> 
> 赞同：3
> 
> 时间：2012-04-19T14:44:09.000
> 
> 标签：mysql, macos, osx-lion, homebrew

我在 Mac Osx Lion 上使用命令行工具安装了 homebrew 和 Xcode 4.3.2，当我现在尝试使用以下命令安装 mysql 时：

```
brew install mysql -v 
```

我得到错误：

```
Error: #<BuildError: Failed executing: cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/mysql/5.5.20 -DMYSQL_DATADIR=/usr/local/var/mysql -DINSTALL_MANDIR=/usr/local/Cellar/mysql/5.5.20/share/man -DINSTALL_DOCDIR=/usr/local/Cellar/mysql/5.5.20/share/doc/mysql -DINSTALL_INFODIR=/usr/local/Cellar/mysql/5.5.20/share/info -DINSTALL_MYSQLSHAREDIR=share/mysql -DWITH_SSL=yes -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DSYSCONFDIR=/usr/local/etc -DWITH_UNIT_TESTS=OFF -DWITH_READLINE=yes> 
```

在这里你可以找到完整的日志：

[https://gist.github.com/2421381](https://gist.github.com/2421381)

我检查了日志，但目前没有什么可以帮助我。Brew医生也很干净，没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:24:05.627

感谢 visoft 在我的 gist 帖子上的回复找到了解决方案。这个解决方案对我有用。问题来自 Cmake，我需要版本 2.8.7 而不是 2.8.8，运行此代码以使其工作：

```
cd /usr/local
brew uninstall cmake
git checkout 948c2769 Library/Formula/cmake.rb
brew install mysql 
```

之后，mysql就安装成功了。

# vb.net - 带有连字符的适当大小写函数

> ID：10230599
> 
> 赞同：0
> 
> 时间：2012-04-19T14:44:12.173
> 
> 标签：vb.net, casing

`ProperCase`我的.Net 代码中有一个函数，如下所示

```
Public Function ProperCase(ByVal strValue As String) As String
    Dim outString As String = ""
    Dim badWords As String = "and, at, do, de, du, USA, UK"
    Dim splitter(1) As Char
    splitter(0) = " "
    Dim splitString As String() = strValue.Split(splitter)
    For Each s As String In splitString
        If badWords.Contains(s) Then
            outString = outString & s & " "
        Else
            outString = outString & StrConv(s, VbStrConv.ProperCase) & " "
        End If
    Next
    Return Trim(outString)
End Function 
```

我需要对双桶名称进行适当的转换`Taylor-Smith`，但它的出现就像`Taylor-smith`因为拆分器是一个空格，所以我像这样修改了代码。

```
Public Function ProperCase(ByVal strValue As String) As String
    Dim outString As String = ""
    Dim badWords As String = "and, at, do, de, du, USA, UK"
    Dim splitter(2) As Char
    splitter(0) = " "
    splitter(1) = "-"
    Dim splitString As String() = strValue.Split(splitter)
    For Each s As String In splitString
        If badWords.Contains(s) Then
            outString = outString & s
        Else
            outString = outString & StrConv(s, VbStrConv.ProperCase)
        End If
    Next
    Return Trim(outString)
End Function 
```

所以我在函数中添加了一个额外的拆分器，但现在它没有返回带有连字符的值。我`& " "`从 outString 的末尾删除了，但我不确定我可以用什么替换它。

我尝试添加`& splitter`，但即使分隔符是空格，它也总是返回连字符。

目前我正在用我修改过的代码得到这个

`Mr TomHart` `Mr JamieTaylorSmith`

有了第一个版本的代码，我得到了这个

`Mr Tom Hart` `Mr Jamie Taylor-smith`

我的预期输出是这样的......

`Mr Tom Hart` `Mr Jamie Taylor-Smith`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:23:21.593

我根本不会改变 split 方法来捕捉连字符。相反，我会看看外线。由您更改之前的第一种方法引起的。可能在循环内部的 If 中。

这是一个非常快速的想法，它基于......不一定是最干净的版本，但应该给你这个想法：

```
 Dim outstring As String = "Michael James-smith"
    Dim indexOfCharToCheck As Integer = outstring.LastIndexOf("-"c) + 1
    Dim finalString As String = outstring.Substring(0, indexOfCharToCheck) & UCase(outstring(indexOfCharToCheck).ToString) & outstring.Substring(indexOfCharToCheck + 1)
    MsgBox(finalString) 
```

# video - 如何获得只弹出一次的 div？

> ID：10230601
> 
> 赞同：0
> 
> 时间：2012-04-19T14:44:12.920
> 
> 标签：video, html, hide

我找了这个，但没有看到它已经问过，所以如果这是重复的，我很抱歉。

我有三个页面，其中一个 div 立即弹出，播放一个视频，然后你可以关闭它。我意识到，如果您每次使用该页面时都继续观看视频，那会很烦人。我已经看到代码只在第一次访问时播放视频，但是 div 仍然存在。

有没有办法让该 div 仅在第一次访问页面时自动显示？

真的很挣扎......这是我到目前为止的代码。

```
 <script type="text/javascript"> 
document.onclick = function check(e){ 
    var target = (e && e.target) || (event && event.srcElement); 
    var obj = document.getElementById('mydiv'); 
    if(target != obj){
        obj.style.display='none';
        document.getElementById('myvideoelement').pause();

    } 

<div id="mydiv">
<a id="displayText" href="javascript:toggle();"><img src="images/x2.png" id="x"></a>

    <video id='myvideoelement' autoplay>
        <source src="agoraphobiafinal2.mp4">
    </video>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:46:51.910

您可以拥有一个 cookie 或会话，其中包含一个 bool 标志，指示是否已经看到。这将在启动时初始化一次。

在c#中

```
if(!Page.IsPostBack){
    Session["SeenYet"] = true;
} 
```

# python - int 子类的非确定性行为

> ID：10230604
> 
> 赞同：10
> 
> 时间：2012-04-19T14:44:20.560
> 
> 标签：python, python-3.x, int, subclass, built-in

我已经子类化`int`以添加一个额外的属性：

```
class Integer(int):
    def __new__(cls, value, base=10, indirect=False):
        try:
            obj = int.__new__(cls, value, base)
        except TypeError:
            obj = int.__new__(cls, value)
        return obj

    def __init__(self, value, base=10, indirect=False):
        self.indirect = indirect 
```

在我的应用程序中使用此类，`int(Integer(b'0'))` **有时会**返回值 48 (= `ord('0')`!) 或 192，而不是正确的值 0。`str(Integer(b'0'))`总是返回`'0'`. 这似乎只发生在值 0 上。首先解码`b'0'`为字符串，或传递`int(b'0')`给`Integer`没有区别。问题在于将 an 转换`Integer(0)`为`int`with `int()`。

此外，这以随机方式发生。随后的运行将在应用程序（解析器）的不同点产生 48 或 192。Python 3.2.2 和 3.2.3 的行为相同（32 位，Windows XP）。

我似乎无法在一个简单的测试程序中重现这一点。以下不产生输出：

```
for i in range(100000):
    integer = int(Integer(b'0'))
    if integer > 0:
        print(integer) 
```

检查`int(Integer()) > 0`我的应用程序中的条件（当我知道 is 的参数时`Integer`）`b'0'`并有条件地打印`int(Integer(b'0'))`多次，结果 48 和 192 不时出现。

发生什么了？

**编辑**- 由于我无法在简短的测试程序中重现该问题，因此我在[此处](http://dl.dropbox.com/u/22669353/pdf.py)提供了相关代码。它基本上是一个 PDF 解析器。[此 PDF 文件](http://www.gust.org.pl/projects/e-foundry/math-support/vieth2008.pdf)的输出产生，例如：

```
b'0' 0 Integer(0) 192 0 b'0' 16853712
b'0' 0 Integer(0) 48 0 b'0' 16938088
b'0' 0 Integer(0) 192 0 b'0' 17421696
b'0' 0 Integer(0) 48 0 b'0' 23144888
b'0' 0 Integer(0) 48 0 b'0' 23185408
b'0' 0 Integer(0) 48 0 b'0' 23323272 
```

在代码中搜索 print 函数调用，看看它代表什么。

# django - Django Virtualenv 生产权衡

> ID：10230610
> 
> 赞同：6
> 
> 时间：2012-04-19T14:44:32.483
> 
> 标签：django, virtualenv

使用 virtualenv 在生产环境中部署 Django 时是否有任何权衡（内存、性能等）？

我喜欢这一切都是沙盒和干净的，但似乎找不到任何性能信息。

任何方向都会很好。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:00:59.060

由 Virtualenv 管理的 env 和不使用它的 env 之间没有自然的区别：只是不同的文件系统目录和 Python 路径。此外，Virtualenv 通过提供您提到的沙箱环境节省了我们的开发人员的时间，允许灵活配置环境并在单个节点上切换它们，免除 sudo 的要求......这在 IMO 中是很大的“性能”增益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:00:51.057

没有，我想。我总是使用 virtualenv。无论包在磁盘上的位置如何，它们都必须加载到内存中以供 Django 进程使用。当您需要重新编译python时，困难的部分是重建virtualenv，但我根本看不到任何性能问题。

# asp.net-mvc-3 - EF Code First，删除表似乎非常激烈

> ID：10230618
> 
> 赞同：1
> 
> 时间：2012-04-19T14:45:00.190
> 
> 标签：asp.net-mvc-3, linq, entity-framework, linq-to-entities

我正在调查 EF Codefirst。虽然我喜欢 Code/SB 同步的好处，但表被删除和数据丢失确实让我很困扰。实际上，我的开发数据库可能有相​​当多的测试数据。有没有像使用“Alter Table”等这样的“表删除”的替代方法？

它让我远离 EF Code First。

谢谢，

埃德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:01:59.240

显然你没有做太多调查。除了有很多方法可以在不删除表的情况下先执行代码（例如手动进行更改）之外，Code First 迁移已经存在了很长一段时间。

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

这与任何其他做事方式没有任何不同。在使用 Database first 时，您也必须手动更改数据库，并且您必须删除表以在 Model First 中重新生成数据库。

这并不是关于代码的任何具体或奇怪的事情。这是它适用于每一种 orm 技术的方式。

# flash - Microsoft Media Foundation 的 RTMP 接收器

> ID：10230620
> 
> 赞同：4
> 
> 时间：2012-04-19T14:45:08.303
> 
> 标签：flash, streaming, rtmp, ms-media-foundation

我是 Microsoft Media Foundation 的新手，我想让我的应用程序通过 Flash Media Streaming Server 支持实时流式传输。我正在为 Media Foundation 搜索第三方 MFT，但不幸的是，我找不到任何提供 MFT 的公司。更准确地说，我需要一个 RTMP 接收器 MFT。你知道任何好的第三方 RTMP 接收器（商业或免费）还是我必须坚持使用 DirectShow？

# iphone - iOS 会在后台杀死应用程序吗？

> ID：10230623
> 
> 赞同：1
> 
> 时间：2012-04-19T14:45:14.427
> 
> 标签：iphone, ios, uiapplicationdelegate

设备开机时，iOS 是否可以`applicationWillTerminate:`在后台自动终止我的应用程序（调用）？

我也很好奇另外两种情况会发生什么，总共三个：

1.  设备已开机
2.  设备已关机
3.  设备没电了

我问是因为我想知道多久`applicationWillTerminate:`可能会被调用一次。我想知道这一点，因为那是我注册远程通知的地方。如果将设备令牌发送到服务器失败，我想知道该方法再次被调用的可能性有多大（即重试将设备令牌发送到服务器）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:52:04.057

如果您的应用程序支持多任务处理（任何与 iOS 4.0+ 相关联的默认设置），则该方法几乎不会被调用。文档说它*可能*会在应用程序在后台运行并且系统想要终止的情况下被调用。但是，根据我的经验，我只在运行一个在后台积极播放音乐并且系统正在抛弃所有内容的音乐应用程序时才真正看到过这个。在我运行后台任务（不是音乐，而是短期后台任务）的情况下，我看到应用程序在没有调用此方法的情况下终止。

我永远不会依赖这个被调用并尝试在您的委托方法中执行您需要做的所有清理工作以转换到后台和您的后台任务完成块（至少在几秒钟之前执行该应用程序被抛弃）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T14:52:56.850

iOS 不仅可以自动终止您的应用程序，而且用户可以手动终止它。事实上，用户*唯一*可以杀死你的应用程序的时间是它在后台时。此外，当您的应用程序处于“后台”时，它更有可能被挂起而不是实际运行，因此当您不是前台应用程序时，不要指望进行大量处理。

至于您获得的*可能性*`-applicationWillTerminate:`有多大，这取决于用户以及他们如何使用他们的设备。拿到的时候就应该妥善处理，否则就去做自己的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T14:47:38.057

当内存不足时，iOS*可以*关闭您的应用程序，调用`applicationWillTerminate`.

[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786)是这样说的：

> ...但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:05:59.547

查看[iOS 开发人员库：iOS 应用程序编程指南：应用程序终止](http://j.mp/J9DfiK)。

# ajax - 开始一个自动完成的小项目

> ID：10230626
> 
> 赞同：0
> 
> 时间：2012-04-19T14:45:23.187
> 
> 标签：ajax, autocomplete

我在这个领域没有经验。

我有一个包含客户姓名表的数据库。例如 CUSTOMER_T 包含“customer1”、“Nick”、“Test”等...我有一个与数据库连接的 Web 服务器，让我们说一个获取“客户名称”的方法。我还有一个带有文本框的小型 WEB GUI，客户在其中键入一个字符串并调用返回数据库结果的 get 方法。

我想通过自动完成功能来增强此功能，例如 google 建议。我需要在服务器和 GUI 中安装什么？请注意，客户列表是动态的。

服务器是否需要一个特殊的能力——库？客户是否需要一种特殊的能力——图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:54:14.553

用户 JQuery、JQuery UI 和 JQuery UI 自动完成插件。从[自动完成插件页面](http://jqueryui.com/demos/autocomplete/)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T19:22:47.293

您可以使用 ajax 进行自动完成，也可以将其用作为文本字段带回数据的查询

# java - 如何读取 blob 的内容并写入 GAE 数据存储 (Java)

> ID：10230631
> 
> 赞同：0
> 
> 时间：2012-04-19T14:45:48.297
> 
> 标签：java, google-app-engine, blobstore, datastore

如何在 java 中读取 blob 的内容并写入 GAE 数据存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:26:24.580

获得要读取的 blob的[BlobKey后，就可以构造一个](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobKey)[BlobstoreInputStream](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreInputStream)：

```
BlobKey blobKey = ...;
InputStream is = new BlobstoreInputStream(blobKey) 
```

然后，您可以使用任何 InputStream 读取方法读取 blob 内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:12:39.240

您可以使用[`FileService`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService)API 在 Blobstore 中创建/写入/读取文件。当您从文件中读取字节数组时，您可以轻松地将其作为属性添加到 Datastore 实体并保存。

# macos - 如何将 Wireshark Lua 解析器脚本移植到 Mac OSX？

> ID：10230632
> 
> 赞同：2
> 
> 时间：2012-04-19T14:45:49.957
> 
> 标签：macos, lua, wireshark, tshark

是否需要为wireshark 配置任何初始设置才能在Mac OSX 环境中正确处理lua 脚本？

尝试移植 Lua 回答问题“如何找出数据包的 HTTP 标头长度？” [https://stackoverflow.com/a/5794357/1217670](https://stackoverflow.com/a/5794357/1217670)

无法让解决方案在 Mac 上运行。

该解决方案在带有 Wireshark 1.6.7、Lua 5.1 的 Windows XP 平台上运行良好。

在带有 Wireshark 1.6.5、Lua 5.1 的 Mac OSX 10.7.3 上运行 http_extra.lua 脚本。[Header Length (bytes): 917] 标头字段不出现。
我确实在自定义 HTTP 标头字段中输入了 http.hdr_len。

过滤 http.hdr_len 不显示任何内容。

http_extra.lua 脚本放置在 /Applications/Wireshark.app/Contents/Resources/lib/wireshark/plugins 目录中。
如果将脚本移动到个人插件文件夹，结果相同。

这是在 Windows XP 系统上完美运行的确切脚本文件。

About Wireshark Plugins 选项卡将 http_extra.lua 列为类型 lua 脚本。

测试脚本以创建错误可验证wireshark 知道该脚本。

我确实看到了一条注释，您需要将 LUA_PATH 设置为全局插件目录。这没有效果。

感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:53:37.023

您在 OSX 上的个人 Wireshark 插件目录是：

```
~/.config/wireshark/plugins 
```

对于较旧的 Wireshark 版本，它可能是：

```
~/.wireshark/plugins 
```

在您的情况下，将 Lua 脚本放入：

```
~/.config/wireshark/plugins/http_extra.lua 
```

有关 Lua 初始化路径的更多信息，请参阅这些帖子：

*   [http://ask.wireshark.org/questions/5726/newbie-trying-to-get-lua-scripts-to-execute](http://ask.wireshark.org/questions/5726/newbie-trying-to-get-lua-scripts-to-execute)
*   [http://ask.wireshark.org/questions/8328/order-of-entries-in-dissector-tables-at-startup-and-lua/8387](http://ask.wireshark.org/questions/8328/order-of-entries-in-dissector-tables-at-startup-and-lua/8387)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:34:53.363

Wireshark - 首选项 - 协议 - HTTP 面板必须选中所有四个框：

1.  重新组装跨越多个 TCP 段的 HTTP 标头
2.  重新组装跨越多个 TCP 段的 HTTP 主体
3.  重新组装分块传输代码体
4.  解压缩实体。

Mac 环境现在与 Windows 配置匹配，并且产生相同的结果，显示 [Header Length (bytes): 917]。

结果相同，而不是将插件放在全局或本地插件目录中。

Mac osx Lua 插件目录路径位置记录在 About Wireshark 面板 - 文件夹选项卡中。

# eclipse - Eclipse CDT 全局设置（用于多个项目）

> ID：10230635
> 
> 赞同：2
> 
> 时间：2012-04-19T14:45:54.840
> 
> 标签：eclipse, eclipse-cdt

我想使用 Eclipse CDT 进行 C++ 开发。我在一个小团队工作。我们的项目由多个共享库和可执行文件组成。我知道我必须为每个库/可执行文件创建一个项目。但是有些东西是多个项目共有的（比如包含目录、二进制文件目录等......）。我也想与团队分享这些设置。实现这一目标的最佳方法是什么？

# django - Django - DateTime 小部件格式

> ID：10230647
> 
> 赞同：2
> 
> 时间：2012-04-19T14:46:25.183
> 
> 标签：django, django-forms, django-templates, django-widget

我正在尝试实现一个[DateTimePicker](http://trentrichardson.com/examples/timepicker/)小部件。

**小部件**

```
class DateTimeWidget(forms.DateTimeInput):
  class Media:
    js = ('js/jquery-ui-timepicker-addon.js',)
  def __init__(self, attrs=None):
    if attrs is not None:
      self.attrs = attrs.copy()
    else:
      self.attrs = {'class': 'datetimepicker'} 
```

**形式**

```
class SessionForm(forms.ModelForm):
  class Meta:
    model = Event
    widgets = {'start_time': DateTimeWidget(),
               'end_time': DateTimeWidget()} 
```

**模板**

```
{{ form.media }}
<form action="/event/post" method="post">{% csrf_token %}
{{ form.as_p }}
</form>
<script type="text/javascript">
  $('.datetimepicker').datetimepicker({
    dateFormat: 'yy-mm-dd'
  });
</script> 
```

DateTimePicker 渲染得很好，但格式是默认的*%Y-%m-%d %H:%M:%S*

我怎样才能删除秒（有*%Y-%m-%d %H:%M*）？

* * *

**编辑**

我试图得到

```
<input type="text" class="datetimepicker" value="2012-04-18 11:01" /> 
```

代替

```
<input type="text" class="datetimepicker" value="2012-04-18 11:01:05" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:57:20.663

`format`为您的`DateTimeInput`实例提供参数：

```
class DateTimeWidget(forms.DateTimeInput):
  class Media:
    js = ('js/jquery-ui-timepicker-addon.js',)
  def __init__(self, attrs=None):
    if attrs is not None:
      self.attrs = attrs.copy()
    else:
      self.attrs = {'class': 'datetimepicker'}

    if not 'format' in self.attrs:
        self.attrs['format'] = '%Y-%m-%d %H:%M' 
```

如果字典中没有给出规范，这将默认为您想要的`format`字符串：`format``attrs`

```
In [1]: dw = DateTimeWidget()

In [2]: dw.render("foo", "bar")
Out[1]: u'<input value="bar" type="text" class="datetimepicker" \
  name="foo" format="%Y-%m-%d %H:%M" />' 
```

如果需要，您可以覆盖格式，例如`%Y-%m-%d`：

```
In [3]: dw = DateTimeWidget({'format': "%Y-%m-%d"})

In [4]: dw.render("foo", "bar")
Out[4]: u'<input type="text" name="foo" value="bar" format="%Y-%m-%d" />' 
```

要操作方法`value`内部`.render()`，您可以使用：

```
In [5]: dw = DateTimeWidget()

In [6]: now = datetime.now()

In [7]: dw.render("foo", now.strftime('%Y-%m-%d %H:%M'))
Out[7]: u'<input value="2012-04-19 17:17" type="text" class="datetimepicker" \
  name="foo" format="%Y-%m-%d %H:%M" />' 
```

`render`或者您可以像这样覆盖`DateTimeWidget`：

```
 def render(self, name, value, attrs=None):
    value = value.strftime(self.attrs['format'])
    return super(forms.DateTimeInput, self).render(name, value, attrs) 
```

这将给出以下输出（无需调用`.strftime()`）：

```
In [8]: dw = DateTimeWidget()

In [9]: dw.render("foo", datetime.now())
Out[9]: u'<input value="2012-04-19 17:27" type="text" class="datetimepicker" \
  name="foo" format="%Y-%m-%d %H:%M" />' 
```

希望有帮助。

# c# - 如何使异步任务同步

> ID：10230650
> 
> 赞同：0
> 
> 时间：2012-04-19T14:46:32.243
> 
> 标签：c#, windows-phone-7

我正在尝试从两个不同的网站获取两种类型的数据并将其绑定到一个列表，但我遇到了异步问题，我想要做的是从 rss 获取信息将其添加到列表中，然后获取信息从另一个网站将其添加到列表中，然后将两者添加到绑定的可观察集合中。但是 DownloadStringAsync 相互运行过度，应用程序崩溃。你能帮我吗？

我的代码是

```
private static ObservableCollection<Top> top= new ObservableCollection<Top>();
    private static ObservableCollection<string> place= new ObservableCollection<string>();
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        if (NetworkInterface.GetIsNetworkAvailable())
        {
            LoadSiteContent_A(url1);

           LoadSiteContent_B(url2);

        }
        else
            MessageBox.Show("No Internet Connection, please connect to use this applacation");

        listBox.ItemsSource = top; //trying to bind listbox after web calls
    }

    public void LoadSiteContent_A(string url)
    {

            //create a new WebClient object
            WebClient clientC = new WebClient();

            clientC.DownloadStringCompleted += new DownloadStringCompletedEventHandler(a_DownloadStringCompleted);
            clientC.DownloadStringAsync(new Uri(url));

    }

     public void LoadSiteContent_B(string url)
    {
            //create a new WebClient object
            WebClient clientC = new WebClient();

            clientC.DownloadStringCompleted += new DownloadStringCompletedEventHandler(b_DownloadStringCompleted);
            clientC.DownloadStringAsync(new Uri(url));

    }

     public void a_DownloadStringCompleted(Object sender, DownloadStringCompletedEventArgs e)
     {
         string testString = "";

         if (!e.Cancelled && e.Error == null)
         {
             string str;

             str = (string)e.Result;

             //Various operations and parsing

                     place.Add(testString);

          }

             }

     }
    public void b_DownloadStringCompleted(Object sender, DownloadStringCompletedEventArgs e)
    {

        string testMatch = "";

        if (!e.Cancelled && e.Error == null)
        {
            string str;
            // Size the control to fill the form with a margin
            str = (string)e.Result;

               //Various operations and parsing

                top.Add(new Top(testMatch,(place.Count+1)));

            }

    }

public class TopUsers
{
    public string TopUsername { get; set; }
    public int Place { get; set; }

    public TopUsers(string topusername, int place)
    {
        this.TopUsername = topusername;
        this.Place = place;

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:33:04.567

这更像是一个替代答案（AlexTheo 的解决方案应该有效）。

当他们为我们（WP 开发人员）提供新的 Async 内容时，这一切都会变得容易得多。

你的代码可以这样写：

```
public async MainPage()
{
    InitializeComponent();
    DoAsyncLoad();
}
private async Task DoAsyncLoad()  // note use of "async" keyword
{
   if (NetworkInterface.GetIsNetworkAvailable())
   {
        await LoadSiteContent_A("");
        await LoadSiteContent_B("");
   }
   else
        MessageBox.Show("No Internet Connection, please connect to use this applacation");

   listBox.ItemsSource = top; //trying to bind listbox after web calls
}

public async Task LoadSiteContent_A(string url)
{
     //create a new WebClient object
     WebClient clientC = new WebClient();

     var result = await clientC.DownloadStringTaskAsync(new Uri(url));
     // No need for a Lambda or setting up an event

     var testString = result; // result is the string you were waiting for (will be empty of canceled or errored) 
}
public async Task LoadSiteContent_B(string url)
{
     //create a new WebClient object
     WebClient clientC = new WebClient();

     var result = await clientC.DownloadStringTaskAsync(new Uri(url));
     // Again, no need for a Lambda or setting up an event (code is simpler as a result)
     top.Add(new Top(testMatch, place.Count + 1));
 } 
```

您必须进行更多代码更改（使用 Http 调用的异步版本并将 LoadSiteContent_A/B 标记为异步——并设置任务的返回）。

顺便说一句，您实际上可以加载最新的 Async-CTP3 并发布以这种方式编写的 WP 代码。大多数人都对 CTP 有点害怕。

我为此写了一篇博文，你可以在这里查看——http: [//www.jaykimble.net/metro-nuggets-async-is-your-friend.aspx](http://www.jaykimble.net/metro-nuggets-async-is-your-friend.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:57:13.480

我不会尝试像那样一个接一个地制作它们。通过像这样一个接一个地“堆叠”它们，您首先失去了异步调用的所有优势。不仅如此，在像 Windows Phone 这样的移动平台上，您必须记住网络呼叫需要排队才能有效使用天线。当您同时拨打这两个电话时，它们在同一天线连接期间被执行的机会要高得多，这是一件“好事”。

接下来，您的每个回调实际上都在更新完全独立的集合。`A`正在更新`place`集合并且`B`正在更新`top`集合。所以这不是这两个人以任何方式互相踩踏的问题。

我在这里看到的唯一真正的问题是您正在更新`top`设置为`listBox.ItemsSource`. 您需要编组更新以将绑定数据返回到 UI 线程（又名`Dispatcher`线程），以便绑定到它们的控件将在正确的线程上更新。

因此，您应该对任何代码进行的唯一更改是将添加到`top`集合中的新项目编组回回调中的`Dispatcher`线程`B`。看起来像这样：

```
public void b_DownloadStringCompleted(Object sender, DownloadStringCompletedEventArgs e) 
{ 
    string testMatch = ""; 

    if(!e.Cancelled && e.Error == null) 
    { 
        string str; 
        // Size the control to fill the form with a margin 
        str = (string)e.Result; 

        //Various operations and parsing 

        Top newTop = new Top(testMatch,(place.Count+1));

        Dispatcher.Invoke(() =>
        {
            top.Add(newTop);
        });
    } 
} 
```

`top`有了这个，您的所有工作都保持异步/并发，除了您将项目添加到集合中的一小部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:55:52.230

首先，我相信 lamdba 会比你的情况下的回调更好。为了同步下载，您必须在 LoadSiteContent_A 的完成事件中调用 LoadSiteContent_B。

```
private static ObservableCollection<Top> top= new ObservableCollection<Top>();
    private static ObservableCollection<string> place= new ObservableCollection<string>();
    private string _url1;
    private string _url2;
    // Constructor
    public MainPage(string url1, string url2)
    {
        InitializeComponent();
        if (NetworkInterface.GetIsNetworkAvailable())
        {
            _url1 = url1;
            _url2 = url2;
            LoadSiteContent_A(url1);
        }
        else
            MessageBox.Show("No Internet Connection, please connect to use this applacation");
        listBox.ItemsSource = top; //trying to bind listbox after web calls
    }

    public void LoadSiteContent_A(string url)
    {
            //create a new WebClient object
            WebClient clientC = new WebClient();
            clientC.DownloadStringCompleted += (sender, e) => { 
             string testString = "";
             if (!e.Cancelled && e.Error == null)
             {
                 string str;
                 str = (string)e.Result;
                 //Various operations and parsing
                place.Add(testString);
                LoadSiteContent_B(_url2);
              }
            };

            clientC.DownloadStringAsync(new Uri(url));
    }

    public void LoadSiteContent_B(string url)
    {
            //create a new WebClient object
            WebClient clientC = new WebClient();
            clientC.DownloadStringCompleted += (sender, e) => {/*do whatever you need*/};
            clientC.DownloadStringAsync(new Uri(url));
    }

public class TopUsers
{
    public string TopUsername { get; set; }
    public int Place { get; set; }

    public TopUsers(string topusername, int place)
    {
        this.TopUsername = topusername;
        this.Place = place;

    }
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:16:50.787

即使使用 lambda，也有一个更优雅的解决方案 - 使用自定义 Action，其中 T 是数据类型。

例如：

```
public void LoadSiteContent_A(string url, Action<string> onCompletion)
{
        //create a new WebClient object
        WebClient clientC = new WebClient();

        clientC.DownloadStringCompleted += (s,e) =>
        {
             onCompletion(e.Result);
        };
        clientC.DownloadStringAsync(new Uri(url));
} 
```

当您调用此方法时，您可以传递如下操作：

```
LoadSiteContent_a(yourUrlWhatever, data =>
{
   // DO SOMETHING WITH DATA
}); 
```

# c# - 转换器 --> 将 DateTime 转换为 HH:mm:ss 格式

> ID：10230652
> 
> 赞同：0
> 
> 时间：2012-04-19T14:46:39.957
> 
> 标签：c#, wpf

我正在尝试显示 hh:mm:ss 格式，但我总是显示完整的日期。

我的转换器类/依赖属性有什么问题/缺少吗？我只收到 Datetime.now 显示，如何将其更改为 00:00:00？

我真正想要的是显示 00:00:00 作为初始化。后来它增加了槽计时器。

**XAML：**

```
<ListBox.ItemTemplate>
<DataTemplate>
    DownTime="{Binding DownTime, Converter={StaticResource  DateTimeConverter}, 
    ConverterParameter=\{0:hh:mm:ss\}}
</DataTemplate>
</ListBox.ItemTemplate> 
```

**依赖属性：**

```
public static readonly DependencyProperty DownTimeProperty =
    DependencyProperty.Register("DownTime", typeof(DateTime), typeof(RegistrationButton), new UIPropertyMetadata(DateTime.Now));

public DateTime DownTime
    {
        get { return (DateTime)GetValue(DownTimestandProperty); }
        set { SetValue(DownTimeProperty, value); }
    } 
```

**转换器类：**

```
 [ValueConversion(typeof(DateTime), typeof(String))]
public class DateTimeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        DateTime dt = (DateTime)value;
        return dt;

    }

    // No need to implement converting back on a one-way binding 
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string strValue = value as string;
        DateTime resultDateTime;
        if (DateTime.TryParse(strValue, out resultDateTime))
        {
            return resultDateTime;
        }
        return DependencyProperty.UnsetValue;
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:51:54.027

你可以只使用 StringFormat

```
<TextBlock Text="{Binding DownTime, StringFormat={}{0:"hh:mm:ss"}}" /> 
```

**编辑**

[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)表示时间的瞬间，通常表示为日期和时间。

[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)表示时间间隔。

他们有许多类似的方法，尤其是添加或删除小时/分钟/秒的方法，我认为这就是你想要的这种情况。

# java - SwingWorker 结束，PropertyChangeListener 监听，但我如何回到 EDT？

> ID：10230659
> 
> 赞同：2
> 
> 时间：2012-04-19T14:46:59.257
> 
> 标签：java, multithreading, swing, swingworker

我已经浏览了很多关于这个主题的主题，但似乎没有什么适合我的具体情况。

我有一个 Swing 应用程序，它分析 QR 码、提取找到的登录名并进行数据库调用以获取该用户的数据。为了确保可以取消 QR 码的捕获，并且在捕获时我的应用程序仍然可以访问，我为此使用了 SwingWorker。到目前为止一切正常，我已经包含了一个 PropertyChangeListener，所以应用程序知道我的 SwingWorker 何时成功读取代码。但是由于我不想将 PropertyChangeListener 作为我的 mainClass 中的嵌套类（以保持其结构良好），因此我在外面为它创建了一个新类。现在我想从这个 PropertyChangeListener 类返回到我的主类，以切换到显示提取数据的适当面板。我有不同的代码可以读取，所以根据代码，我有不同的面板可以切换（所以我不能一遍又一遍地静态切换到同一个面板）。那么如何委托 PropertyChangeListener 将控制权交还给我的 EDT 呢？我尝试使用 wait() 和 notify() 让我的 EDT 知道 SwingWorker 已完成。但显然 wait() 阻塞了我的 EDT，并且 SwingWorker 的使用毫无意义。

我希望我能足够详细地解释我的问题，并且你们中的一些人有一个好主意来解决这个问题。对于任何代码片段，请询问，然后我将添加必要的代码片段。但由于我的项目有点复杂，我只会发布要求的内容。

在此先感谢您的帮助:)

编辑：这是一个代码摘录来说明我的 SwingWorker 正在做什么。

**SwingWorker 类：**

```
public class CodeDetector extends SwingWorker<byte[], String> {

String s;                     // read String
byte[] completeCode;          // byte[] which is returned by doInBackground()
BufferedImage resizedImg;
IplImage img;
JLabel labelForStream;
JLabel result;
FrameGrabber grabber = new VideoInputFrameGrabber();     // using JavaCV.

public CodeDetector(JLabel labelForStream, JLabel result) {
    this.labelForStream = labelForStream;
    this.resultLabel = result;
}

@Override
protected byte[] doInBackground() throws Exception {
    try {
        grabber.start();         // 
        while (true) {
            // End if current thread was canceled.
            if (Thread.currentThread().isInterrupted()) {
                return null;
            }

            // Grab each image, save it, scan for code and display it.  
            img = grabber.grab();
            resizedImg = //  resizing image to fit labelForStream.
                            // save resizedImg to file
            // read barcode from saved file
                    if (isBadgeCode(tmp) || isDeviceCode(tmp)) {
                        s = tmp;
                    } else {
                        continue;
                    }
                    break;
                } catch (NotFoundException e) {
                    // Code could not be encoded yet.
                }
                ...

                    // end worker after timeout

        // show image on window
                if (img != null) {
                    labelForStream.setIcon(new ImageIcon(resizedImg));
                }
            }
        }
    } catch (Exception e) { 
        System.err.println("Error: " + e.getMessage() + " - " + e.getStackTrace() + " - " +  e.getClass());
    }
    return s != null ? s.getBytes() : null;
}

@Override
protected void done() {
    try {
        completeCode = get();
        if (completeCode != null) {
            String code = new String(completeCode);
            if (isOtherCode(code)) {
                resultLabel.setText(code);
            } else if (isUsernameCode(code)) {
                // Cut userName from read code (if previously verified) and set label text.
                resultLabel.setText(verify(code, true) ? code.split(":")[0] : null);
            }
        } else {
            resultLabel.setText(null);
        }
        resultLabel.setVisible(true);
        resultLabel.updateUI();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } catch (CancellationException e) {
        return;
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

由于这个 SwingWorker 没有对任何面板的引用，即使在 EDT 中完成了 done() 方法，我也需要以某种方式通知我的 mainClass 代码已成功读取并且它现在可以根据具体代码。

希望这能澄清一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:50:38.737

我认为您误解了，出于什么原因[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)，请阅读[SwingWorker 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，其中的实现非常保证方法的输出：

*   完毕（）

*   过程（）

*   发布（）

*   设置进度（）

应该在[EDT上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:51:59.343

简单的摇摆工人答案是覆盖该`done()`方法。这是在 EDT 上执行的 - SwingWorker 会为您处理这些。

你可以自己做，使用 SwingUtilities.invokeLater。

对于您提出问题的方式，我怀疑您没有完全掌握线程问题以及如何在线程之间切换。[因此，可能需要对本教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)（如果您还没有）进行一次很好的回顾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T16:17:43.667

这是错误的：

```
protected byte[] doInBackground() throws Exception {

  // ....
  if (img != null) {
     labelForStream.setIcon(new ImageIcon(resizedImg));
  }
  // ....
} 
```

正如这表明您在 doInBackground 方法中进行了关键的 Swing 调用，这是永远不应该做的事情。而是考虑发布 Image 或 ImageIcon，并从 process 方法覆盖设置 JLabel 的 Icon。

正如我在评论中指出的那样，如果减少代码耦合，有时将 PropertyChangeListener 与 SwingWorker 一起使用是个好主意。这是 SwingWorker 拥有自己的 PropertyChangeSupport 和自己的状态枚举的原因之一。

# python - 将 UTC Timestamp 转换为 datetime 对象，考虑夏令时

> ID：10230664
> 
> 赞同：2
> 
> 时间：2012-04-19T14:47:28.977
> 
> 标签：python, datetime, pytz

使用：

```
 time.mktime(datetime.datetime.now(pytz.timezone("UTC")).timetuple()) 
```

2012 年 4 月 19 日纽约 10:00 后不久的时间戳为 1334840917。鉴于此时间戳，我如何将其转换回考虑夏令时的日期时间对象？

如果我做：

```
 >>>eastern = pytz.timezone("Us/Eastern")
   >>>dt = datetime.datetime.fromtimestamp(1334840917,eastern)
   >>>dt.hour 
```

输出为：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:14:27.977

`dt = datetime.datetime.fromtimestamp(1334840917 + time.daylight*3600)`

# ruby - Mac Lion 上的 ODBC 和 Ruby Sequel

> ID：10230665
> 
> 赞同：0
> 
> 时间：2012-04-19T14:47:29.830
> 
> 标签：ruby, macos, odbc

我在让 Sequel 连接到 MS SQL 数据库时遇到问题。我已经安装了以下内容：

*   UnixODBC
*   免费TDS

我已经配置了这两个软件包，以下命令允许我毫无问题地连接到我的数据库：

*   isql
*   tsql
*   osql

但是，当我使用 Sequel.odbc 命令从 Ruby 代码中尝试它时，我收到以下错误：

**ODBC::Error: IM003 (0) [iODBC][Driver Manager]无法加载指定的驱动程序。**

这是我所能得到的。我曾经首先收到另一个错误，但通过重做配置部分设法解决了这个问题。我想我错过了那里的东西。

**编辑**

这是我的基础谈话者类的代码。它基本上像 rails 一样加载一个 YAML 文件，保存数据库设置并建立与数据库的连接。这似乎有效，尝试手动从续集中返回一个 DB 对象：

```
module Talkers
  require 'yaml'
  require 'sequel'

  class BaseTalker
    # This function will load the desired settings as a hash from the database.yml file
    # in the config folder. The data will be returned as a hash following the standard
    # YAML structure.
    def self.load_config(name)
      cfg = YAML::load(File.open(File.join(ENV['API_ROOT'], 'config', 'database.yml')))
      cfg.key?(name) ? cfg[name] : nil
    end

    # This function will establish a connection with the Florensia User database and return
    # the Sequel database object, so that queries can be executed against the database.
    def self.connect_to_user_db
      settings = self.load_config("florensia_user_#{ENV['RACK_ENV']}")
      Sequel.odbc settings['dsn'], :db_type => settings['adapter'], :user => settings['user'], :password => settings['password']
    end
  end
end 
```

下面的类继承自 talker 并为 User 执行某些操作。它包含特定于游戏的数据库逻辑。当我调用这个逻辑时，我收到错误：

```
module Talkers
  require 'yaml'
  require 'sequel'

  class LoginDbTalker < BaseTalker
    #
    # Bans the specified User from the game. The function requires the following information
    # to be supplied in order for the ban to be properly set:
    # - id : The identifier of the account.
    # - gm_name : The name of the GM setting the ban.
    # - punish_code : The punishment code being applied on the account.
    # - days : The duration of the ban in days, starting from today.
    #
    # The function will return true if the ban has been properly set; otherwise the function
    # will return false.
    def self.ban_user(options = {})
      return false if options.empty?
      db = self.connect_to_user_db
      ds = db[:tbl_User].filter(:id => options[:id])
      ps = ds.prepare(:update, :apply_ban)
      ps.call(
          :punishcode => options[:punish_code],
          :punishstory => "Banned by #{options[:gm_name]}",
          :punishdate => Date.today,
          :punishfreedate => (options[:days].to_i == -1) ? (Date.today + (30 * 265)) : (Date.today + options[:days].to_i))
      true
    rescue Exception => e
      puts "Exception caught in ban_user: #{e.to_s}"
      puts "Provided variables: id=#{options[:id]}, gm_name=#{options[:gm_name]}, punish_code=#{options[:punish_code]}, days=#{options[:days]}"
      false
    end
    #
    # Unbans the specified User from the game. The function requires the following information
    # to be supplied in order for the ban to be properly lifted:
    # - id : The identifier of the account.
    # - gm_name : The name of the GM removing the ban.
    #
    # The function will return true if the ban has been properly lifted; otherwise the function
    # will return false.
    def self.unban_user(options = {})
      db = self.connect_to_user_db
      ds = db[:tbl_User].filter(:id => options[:id])
      ps = ds.prepare(:update, :lift_ban)
      ps.call(
          :punishcode => '0',
          :punishstory => "Ban removed by #{options[:gm_name]}",
          :punishdate => Date.today,
          :punishfreedate => Date.today
      )
      true
    rescue Exception => e
      puts "Exception caught in unban_user: #{e.to_s}"
      puts "Provided variables: id=#{options[:id]}, gm_name=#{options[:gm_name]}"
      false
    end
    #
    # Kicks the specified User from the game, regardless on the server or character he currently is on.
    # This requires a direct connection to the game servers so a specialized command can be sent that
    # instruct the server to close the connection with the offending player.
    # The function returns true if the kick succeeded; otherwise false.
    def self.kick_player(id)
      false
    end
  end
end 
```

调用任何禁止/取消禁止函数都会导致错误消息。

**编辑2**

我添加了文件夹 /Library/ODBC 并将所有配置文件链接到那里以用于 iODBC。这消除了我之前遇到的错误，现在给我带来了这个错误：

**ODBC::Error: 01000 (20002) [FreeTDS][SQL Server]自适应服务器连接失败**

所以看来我又取得了一些进展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:59:12.610

如果您从 OS X 连接到 Microsoft SQL Server，我建议您使用 tinytds 适配器而不是 odbc 适配器。我知道有些人在非 Windows 机器上运行 Sequel/ODBC，但我只有 Sequel/经验Windows 上的 ODBC。

# silverlight - Silverlight：业务应用程序需要访问文件才能打印和移动

> ID：10230668
> 
> 赞同：1
> 
> 时间：2012-04-19T14:47:38.210
> 
> 标签：silverlight, mvvm, printing

我对业务应用程序有以下要求：

（所有这些都可以在本地或服务器上）

*   允许用户选择文件夹位置
*   显示文件夹内容
*   打印文件夹中的选定项目 (*.pdf)
*   显示已打印的文件
*   可能将打印的文件移动到新位置（打印的子文件夹）

如何在 Silverlight 中实现这一点？

亲切的问候，

下流的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:29:11.533

首先，除了最后一项之外的所有项目都可以完成（按照您期望的方式）。由于安全协议，silverlight 无法访问用户的驱动器并对其进行操作。您可以获得的最接近的方法是访问 silverlight 的应用程序存储，在这种情况下这对您没有任何帮助。我将重点介绍如何执行前 4 项。

*   允许用户选择文件夹位置并显示文件夹内容

    ```
    public void OnSelectPDF(object sender)
    {
    //create the open file dialog
    OpenFileDialog ofg = new OpenFileDialog();
        //filter to show only pdf files
    ofg.Filter = "PDF Files|*.pdf";
    ofg.ShowDialog();
    byte[] _import_file = new byte[0];
    //once a file is selected proceed
    if (!object.ReferenceEquals(ofg.File, null))
    {

        try
        {
            fs = ofg.File.OpenRead();
            _import_file = new byte[fs.Length];
            fs.Read(_import_file, 0, (int)fs.Length);
        }
        catch (Exception ex)
        {
        }
        finally
        {
            if (!object.ReferenceEquals(fs, null))
                fs.Close();
        }
        //do stuff with file - such as upload the file to the server
    };
    } 
    ```

    如果您注意到，在我的示例中，一旦文件被检索到，我建议将其上传到网络服务器或具有临时公共访问权限的地方。我建议通过 Web 服务执行此操作。例如

    ```
    //configure the system file (customn class)
    TSystemFile objFile = new TNetworkFile().Initialize();
    //get the file description from the Open File Dialog (ofg)
    objFile.Description = ofg.File.Extension.Contains(".") ? ofg.File.Extension : "." +  ofg.File.Extension;
    objFile.FileData = _import_file;
    objFile.FileName = ofg.File.Name;
    //upload the file
    MasterService.ToolingInterface.UploadTemporaryFileAsync(objFile); 
    ```

上传此文件后，在异步结果中，很可能会返回临时文件名和上传位置，我会在浏览器中转发对某些 javascript 方法的调用，以使用通用的“download.aspx?fileName=givenFileName”技术强制在用户系统上下载，这将负责**保存到新位置**和**打印**。这就是你所寻求的。

javascript 技术的示例（记得包括 System.Windows.Browser）：

```
public void OnInvokeDownload(string _destination)
{
    //call the browser method/jquery method 
    //(I use constants to centralize the names of the respective browser methods)
    try
    {
        HtmlWindow window = HtmlPage.Window;
        //where BM_INVOKE_DOWNLOAD is something like "invokeDownload"
        window.Invoke(Constants.TBrowserMethods.BM_INVOKE_DOWNLOAD, new object[] { _destination});
    }
    catch (Exception ex) { System.Diagnostics.Debug.WriteLine(ex.ToString()); }
} 
```

确保您的 javascript 方法存在于包含的 javaScript 文件或与您的 silverlight 应用程序相同的托管页面中。例如：

```
function invokeDownload(_destination) {
//some fancy jquery or just the traditional document.location change here
//open a popup window to http://www.myurl.com/downloads/download.aspx?    fileName=_destination
} 
```

download.aspx 的代码超出了我的回答范围，因为它因需要而异，并且只会延长这篇文章（更多）。但是从我给出的内容来看，它会为你正在寻找的东西“工作”，但可能并不完全符合你的预期。但是，请记住，这主要是由于 Silverlight 的限制。这种方法的作用不是强迫您需要插件才能在应用程序中查看 pdf 文件，而是允许用户计算机通过使用现有的 adobe pdf 阅读器来播放它的一部分。在silverlight 中，至少据我所知，大多数印刷都是使用您所称的和作为UIElement 的“ImageVisual”完成的。要直接从 silverlight 打印 pdf，您需要在 silverlight 控件中查看该 PDF，或要求 Web 服务将 PDF 呈现为图像，然后将该图像放在控件中。只有这样你才能直接打印。我将这种方法介绍为更干净和直接的方法。

注意 - 对于临时目录，我建议每次添加文件时对服务器端的文件进行一些时间跨度的清理。节省您定期运行某些任务以检查文件夹并删除旧文件的工作。;)

# c# - 有没有办法根据类定义在 SQLite 中动态生成表？

> ID：10230679
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:19.303
> 
> 标签：c#, system.data.sqlite

我正在使用 c# 和 System.Data.SQLite 我有一些类我想在运行时在 SQLite 中生成为表，但我不想为每个类硬编码 SQL 字符串。我想知道，最好的方法是什么？我尝试向我的类和类属性添加属性，希望有一些东西可以为我创建 SQL 字符串，但是......这是一个例子：

```
 [Table(Name = "tblDocument")]
  public class Document
  {
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public long DocumentId { get; set; }

    [Column(CanBeNull = true)]
    public string File { get; set; }
  } 
```

要在 SQLite 中将其创建为表，我需要生成如下内容：

```
 string CreateSqlString =
    @"CREATE TABLE [tblDocument] (" +
    @"[DocumentId] INTEGER  PRIMARY KEY NOT NULL," +
    @"[File] TEXT  NOT NULL)"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:00:25.947

您是否正在寻找类似[SubSonic](http://github.com/subsonic)的东西。它可以在打开迁移的情况下运行，这将为您的类生成表。

假设您已经引用了 Castle.Core.dll、SubSonic.Core.dll 和 System.Data.SQLite.DLL

```
class Program
{
    private const string ConnectionString = @"Data Source=c:\subsonic.db";
    private const string ProviderString = @"System.Data.SQLite";
    private static IDataProvider provider = ProviderFactory.GetProvider(ConnectionString, ProviderString);
    private static SimpleRepository repo = new SimpleRepository(provider, SimpleRepositoryOptions.RunMigrations);

    static void Main(string[] args)
    {
        var demo = new Demo { Name = "Test Demo", LaunchDate = DateTime.Now };
        repo.Add(demo);
    }

    class Demo
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public DateTime LaunchDate { get; set; }
    }
} 
```

App.config 应该是

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.data>
        <DbProviderFactories>
            <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
        </DbProviderFactories>
    </system.data>
</configuration> 
```

# jpa - 条件查询 - 使用“like”搜索整数

> ID：10230680
> 
> 赞同：21
> 
> 时间：2012-04-19T14:48:20.063
> 
> 标签：jpa, integer

如何将整数转换为条件查询的字符串？

IE：

```
Predicate predicate = criteriaBuilder.like((Expression) root.get(filterKey),
                    "%" + filterValue + "%"); 
```

我想为 dataTable 组件创建过滤器.... 即对于 ID 值我想得到这样的过滤器：

*如果我输入“1”，我将获得 ID 包含“1”的所有项目（223122 ID 仍然正确）*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T14:56:52.350

我自己没有使用过这个，但是另一个问题：

[使用 JPA 2.0 Criteria API 和 cast 导致生成的 JPQL 在 Hibernate 中失败](https://stackoverflow.com/questions/4269389/using-jpa-2-0-criteria-api-and-cast-causes-generated-jpql-to-fail-in-hibernate)

建议使用`.as(String.class)`after`root.get(filterKey)`来完成你想要的。

如果您使用的是 Hibernate，请注意[报告的](https://hibernate.onjira.com/browse/HHH-5755) [错误](https://issues.jboss.org/browse/JBPAPP-8075?_sscc=t)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-07-23T10:06:39.310

试试看

```
Predicate predicate = criteriaBuilder.like(root.get(filterKey).as(String.class),
                    "%" + filterValue + "%"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-16T09:53:24.420

这为我解决了问题：

```
Expression<String> filterKeyExp = root.get(filterKey).as(String.class);
filterKeyExp = criteriaBuilder.lower(filterKeyExp);

Predicate predicate = criteriaBuilder.like(filterKeyExp ,"%" + filterValue.trim().toLowerCase() + "%"); 
```

# android - 制作流媒体应用程序时需要一些建议

> ID：10230681
> 
> 赞同：1
> 
> 时间：2012-04-19T14:48:25.030
> 
> 标签：android

我正在 android 上开发一个应用程序，它可以播放从服务器（我的电脑）流式传输的视频，比如 youtube。我是新手，我需要一些建议来获得正确的方法。首先，我在 android 上的应用程序应该有能力寻找已经玩过的位置。那么，在服务器端（我的 PC），我应该使用什么流媒体服务器？我是否需要将流数据包合并到一个临时文件中并在该文件上播放以获得回溯？

# actionscript-3 - 相机跟随物体

> ID：10230683
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:26.493
> 
> 标签：actionscript-3, camera, flash-cs5

我对编码相当陌生。我想知道是否有一种方法，当我用键移动我的对象时，我可以让相机保持在我的对象上，这样我就可以在一个更大的世界中移动，而不仅仅是我的视口。

我试图移动世界而不是我的对象，但是对于我正在做的事情，这使我的编码变得更加困难

这是我的代码。

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, keydown );

function keydown (event:KeyboardEvent):void{

  switch (event.keyCode){

    case Keyboard.LEFT :
    ball.x -= 10;
    break ;

    case Keyboard.RIGHT :
    ball.x += 10;
    break;

    case Keyboard.UP :
    ball.y -= 10;
    break;

    case Keyboard.DOWN :
    ball.y += 10;
    break;

    default :
    break;

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:01:47.173

你可以在一个控股精灵/电影剪辑中拥有世界和角色

然后当你移动角色时，你可以将持有人的位置设置在相反的方向。

您可以使用全局到局部来获取球的位置，然后甚至可以应用一些运动平滑

* * *

这是一些应该很容易工作的代码

你需要一个名为`holder`里面的movieclip `ball`，持有者也将拥有你的世界和世界资产。只要没有缩放，您就不需要使用`globalToLocal`

```
var middlePt:Point = new Point(stage.stageWidth/2, stage.stageHeight/2);
var pt:Point = new Point(holder.ball.x, holder.ball.y);
var destPoint:Point = new Point(-pt.x + middlePt.x,  -pt.y + middlePt.y);

addEventListener(Event.ENTER_FRAME,enterFrame);
function enterFrame(e:Event):void{
    holder.x = holder.x*0.5 + destPoint.x*0.5;
    holder.y = holder.y*0.5 + destPoint.y*0.5;
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, keydown );

function keydown (event:KeyboardEvent):void{
  switch (event.keyCode){

    case Keyboard.LEFT :
    holder.ball.x -= 10;
    break ;

    case Keyboard.RIGHT :
    holder.ball.x += 10;
    break;

    case Keyboard.UP :
    holder.ball.y -= 10;
    break;

    case Keyboard.DOWN :
    holder.ball.y += 10;
    break;

    default :
    break;

  }
    middlePt = new Point(stage.stageWidth/2, stage.stageHeight/2);
    pt = new Point(holder.ball.x, holder.ball.y);
    destPoint = new Point(-pt.x + middlePt.x,  -pt.y + middlePt.y);
} 
```

# html - 如何让我的 TextBox 在 MVC 3 中传递日期值？

> ID：10230684
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:32.593
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, date, textbox

当我提交数据时，即使我输入 2012 年 3 月 15 日，模型总是填充 1/1/0001。我错过了什么？

```
<p>
    @Html.LabelFor(m => m.EventDate, "Date of Event")<br />
    @Html.TextBoxFor(m =>  m.EventDate)
</p>
<p>
    @using (Html.BeginForm("Create", "Event", FormMethod.Post))
    {
        <input id="create" type="submit" value="Submit New Event" />
    }
</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:52:25.973

您需要将文本框放在表单中。
否则，它永远不会被发送到服务器。

# html - DIVS 在自定义 ASP:Menu 中使用时不验证

> ID：10230687
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:47.367
> 
> 标签：html, w3c-validation, aspmenu, aspmenu-control

下面的代码是从 ASP:Menu 中的 StaticItemTemplate 生成的。

代码和链接随心所欲，但验证失败。

输出代码如下

```
<li>
    <a class="level1 StaticMenuItemStyle" href="/Services.aspx">
    <div class="StaticMenuItemStyle"
         onmouseover="style.backgroundColor=&#39;#0088CB&#39;;style.color=white;"
         onmouseout="style.backgroundColor='';"
         style="color:Color [Blue];width:180px;">
         <a href="/Services.aspx" class="StaticMenuItemStyle">Services</a>
         <br />
         <div style="background-color: Blue; width: 180px;height: 5px;"></div>
    </div>
    </a>
</li> 
```

但是 W3Validator 上的这个错误

```
 Line 84, Column 63: document type does not allow element "div" here; missing one of  
  "object", "ins", "del", "map", "button" start-tag
  style="color:Color [Blue];width:180px;">

  The mentioned element is not allowed to appear in the context in which you've placed
  it; the other mentioned elements are the only ones that are both allowed there and 
  can contain the element mentioned. This might mean that you need a containing      
  element, or possibly that you've forgotten to close a previous element.

  One possible cause for this message is that you have attempted to put a block-level
  element (such as "<p>" or "<table>") inside an inline element (such as "<a>", 
  "<span>", or "<font>"). 
```

但是，如果我用它验证的跨度替换 DIV。但看起来不对。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:29:50.030

在“a”标签内，div 是不验证的，因为 div 基本上是一个块部分，默认样式是部分块。[http://webdesign.about.com/od/htmltags/a/aa011000a.htm。](http://webdesign.about.com/od/htmltags/a/aa011000a.htm)但是对于锚标签，它与跨度相同。您可以在 div 属性上使用 onclick 属性，也可以通过 jquery 使用 .click 函数。你可以像下面这样使用它：

```
<li>
    <a class="level1 StaticMenuItemStyle" href="/Services.aspx">
    <span class="StaticMenuItemStyle" style="display:block;" 
         onmouseover="style.backgroundColor=&#39;#0088CB&#39;;style.color=white;"
         onmouseout="style.backgroundColor='';"
         style="color:Color [Blue];width:180px;">
         <a href="/Services.aspx" class="StaticMenuItemStyle">Services</a>
         <br />
         <div style="background-color: Blue; width: 180px;height: 5px;"></div>
    </span>
    </a> </li> 
```

提到jquery是在脚本之前初始化的

# android - 如何以编程方式在 Android 中打开“接入点名称”屏幕？

> ID：10230689
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:50.400
> 
> 标签：android

怎么打开那个页面？无线和网络 -> 移动网络 -> 接入点名称

请为此提供示例代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:59:01.350

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setClassName("com.android.settings", "com.android.settings.ApnSettings");
startActivity(intent); 
```

# java - 用 Java 测试基于客户端-服务器的应用程序

> ID：10230691
> 
> 赞同：0
> 
> 时间：2012-04-19T14:48:53.310
> 
> 标签：java, swing, testing, client-server

我用 Java 编写了一个基于客户端服务器的应用程序，其中客户端不断（每 30 秒后）发送一些数据，并根据来自客户端的传入消息重新绘制服务器上的面板。服务器上运行着多个线程（一个用于重绘，一个用于读取传入消息，一个用于传出消息）。对于 GUI，我使用了 Swing。

现在我是一个完全的测试新手，我想知道测试我的应用程序的各种方法、技巧和陷阱。任何网络资源或相同的好文本都会非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:59:34.423

查看[Maveryx](http://www.maveryx.com)测试自动化框架及其文档。它包含几个示例来创建和运行用于测试 Java（基于 Swing）应用程序的自动化脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:05:03.570

至少，您必须在两个级别上进行测试。

1.  您需要首先在服务器和客户端上对您的 java 代码进行单元测试，例如编写[JUnit](http://en.wikipedia.org/wiki/JUnit)测试。
2.  然后，您应该通过模拟另一端来分别测试服务器和客户端组件。[JMock](http://www.jmock.org/)之类的东西可能能够帮助您模拟您未测试的代码部分。为了测试您的 GUI，您可以参考[What is the best testing tool for Swing-based applications？](https://stackoverflow.com/questions/79891/what-is-the-best-testing-tool-for-swing-based-applications)

网上有很多关于这个主题的好材料！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T15:07:23.983

如果您希望进行单元测试，在 Java 中执行此操作的最常见方法之一是使用 JUnit。JUnit Cookbook 提供了一些不错的信息，可以帮助您开始编写单元测试。

[JUnit 食谱](http://junit.sourceforge.net/doc/cookbook/cookbook.htm)

# iphone - 将多个整数保存到数组并在标签中显示总值

> ID：10230693
> 
> 赞同：1
> 
> 时间：2012-04-19T14:49:00.593
> 
> 标签：iphone, objective-c, nsmutablearray, nsfilemanager

我喜欢做什么：

*   用户输入 10`UITextField`并点击`UIButton`。
*   `UILabel`显示 10 并`UITextField`变为空白。
*   用户输入 5`UITextField`并点击`UIButton`。
*   `UILable`显示 15 并`UITextField`再次变为空白。

使用以下代码，我可以将输入的数字保存并显示在标签中，但是如何告诉数组添加并显示总数，而不仅仅是我输入的第一个数字？

H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (nonatomic, strong) IBOutlet UILabel *label;
@property (nonatomic, strong) IBOutlet UITextField *field;

@property (nonatomic, strong) NSString *dataFilePath;
@property (nonatomic, strong) NSString *docsDir;
@property (nonatomic, strong) NSArray *dirPaths;

@property (nonatomic, strong) NSFileManager *fileMgr;
@property (nonatomic, strong) NSMutableArray *array;

- (IBAction)saveNumber:(id)sender;

@end 
```

米

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize label, field, dataFilePath, docsDir, fileMgr, dirPaths, array;

- (void)viewDidLoad
{
    [super viewDidLoad];

    fileMgr = [NSFileManager defaultManager];
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    dataFilePath = [[NSString alloc]initWithString:[docsDir stringByAppendingPathComponent:@"data.archive"]];

    if ([fileMgr fileExistsAtPath:dataFilePath])
    {
       array = [NSKeyedUnarchiver unarchiveObjectWithFile:dataFilePath];
        self.label.text = [array objectAtIndex:0];
    }
    else 
    {
        array = [[NSMutableArray alloc] init];
    }

}

- (IBAction)saveNumber:(id)sender
{
    [array addObject:self.field.text];
    [NSKeyedArchiver archiveRootObject:array toFile:dataFilePath];
    [field setText:@""];
    [label setText:[array objectAtIndex:0]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:00:42.410

遍历数组，将所有值作为数字使用`[string intValue]`并将它们汇总到另一个变量中。然后使用格式化字符串（如`[NSString stringWithFormat: @"%d"]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:08:04.487

您需要遍历所有值并将它们添加到运行总计中。看看这个：-

```
 - (IBAction)saveNumber:(id)sender
{
    [array addObject:self.field.text];
    [NSKeyedArchiver archiveRootObject:array toFile:dataFilePath];
    [field setText:@""];

    // Create an enumerator from the array to easily iterate
    NSEnumerator *e = [array objectEnumerator];

    // Create a running total and temp string
    int total = 0;
    NSString stringNumber;

    // Enumerate through all elements of the array
    while (stringNumber = [e nextObject]) {
        // Add current number to the running total
        total += [stringNumber intValue];
    }

    // Now set the label to the total of all numbers
    [label setText:[NSString stringWithFormat:@"%d",total];
} 
```

我已经评论了代码的可读性。

# xml - 使用 XSL 计算重复项并输出到表

> ID：10230694
> 
> 赞同：1
> 
> 时间：2012-04-19T14:49:00.243
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

嗨，我是 XSL 的新手，我试图输出一个表格，显示客户 ID 和购买的汽车数量，以及根据我的 XML 文件购买超过 1 辆汽车的客户。一个示例输出是：

客户
3
4

汽车数量
3
2

但我现在得到的是：

客户
3
3
3
4
4
9

车数
null
null
null
null
null
null

这是我的 XML 文件。

```
<cars>

<car>
    <carID>
            3
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8723059
        </number>

    </mobileNumber>

    <customerID>
                3
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>

<car>
    <carID>
            4
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8723099
        </number>

    </mobileNumber>

    <customerID>
                3
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>

<car>
    <carID>
            5
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8723777
        </number>

    </mobileNumber>

    <customerID>
                3
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>

<car>
    <carID>
            16
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8721777
        </number>

    </mobileNumber>

    <customerID>
                4
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>

<car>
    <carID>
            166
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8722777
        </number>

    </mobileNumber>

    <customerID>
                4
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>

<car>
    <carID>
            169
    </carID>

    <mobileNumber>

        <areaCode>
                00353
        </areaCode>

        <number>
                8721787
        </number>

    </mobileNumber>

    <customerID>
                9
    </customerID>

    <purchaseDate>

            <dayPurchased>
                        6
            </dayPurchased>

            <monthPurchased>
                        April
            </monthPurchased>

            <yearPurchased>
                        2011
            </yearPurchased>

    </purchaseDate>

</car>
</cars> 
```

这是我的 XSL 文件。

```
<?xml version="1.0"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">

<html> <head><title>Customers</title></head> <body> <table rules="all">
<thead><tr><th>Customer</th><th>Number of Cars Purchased</th></tr></thead> 
  <xsl:for-each select="cars/car">
  <tr><td>  <xsl:apply-templates select="customerID"/> </td>
  </xsl:for-each>
</table></body></html>

</xsl:template>
</xsl:transform> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:37:36.473

有很多方法可以做这些事情，但不确定你想在那里做什么。如果你想做一个基于客户的表格，你不能从迭代汽车开始。您希望每条线路有一个客户，因此您必须遍历客户计数。

像这样的东西

```
<?xml version="1.0"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">

        <html> <head>
            <title>Customers</title></head> <body> 
                <table rules="all">
                    <thead>
                        <tr><th>Customer</th><th>Number of Cars Purchased</th>                            </tr>
                    </thead> 
                    <xsl:for-each select=".//customerID">
                        <xsl:variable name="customerId" select="text()"/>
                        <xsl:if test="not(preceding::customerID) or $customerId != preceding::customerID[1]">
                       <tr>
                           <td>  <xsl:value-of select="."/></td>
                           <td><xsl:value-of select="count(following::customerID[text()=$customerId])+1"/></td>
                       </tr>
                        </xsl:if>
                   </xsl:for-each>
                </table>
            </body>
        </html>
    </xsl:template>
</xsl:transform> 
```

虽然这有点凌乱并且可以精炼很多（我必须用完！）

# qt - 如何正确使用 QGraphicsLinearLayout 和 QGraphicsScene 来定位 QGraphicsItems？

> ID：10230696
> 
> 赞同：3
> 
> 时间：2012-04-19T14:49:16.697
> 
> 标签：qt, layout, qgraphicsscene

我正在努力与一组s`QGraphicsLinearLayout`一起工作，以便在场景中以线性方式定位。我尝试使用以下方法：`QGraphicsScene``QGraphicsItem`

```
#include <QApplication>
#include <QBrush>
#include <QGraphicsItem>
#include <QGraphicsLayoutItem>
#include <QGraphicsLinearLayout>
#include <QGraphicsRectItem>
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsWidget>
#include <QPen>

class MyShape : public QGraphicsRectItem, public QGraphicsLayoutItem {
  public:
    MyShape(void) {
        setPen(QPen(QBrush(Qt::black), 1));
        setBrush(QBrush(Qt::green));
        setRect(0, 0, 20, 20);
    }

    virtual QSizeF sizeHint(Qt::SizeHint which,
                            const QSizeF& constraint = QSizeF()) const {
        Q_UNUSED(which);
        Q_UNUSED(constraint);
        return boundingRect().size();
    }
};

int main(int argc, char** argv) {
    QApplication app(argc, argv);

    QGraphicsScene scene;
    MyShape* shape1 = new MyShape;
    MyShape* shape2 = new MyShape;
    MyShape* shape3 = new MyShape;
    scene.addItem(shape1);
    scene.addItem(shape2);
    scene.addItem(shape3);

    QGraphicsLinearLayout* layout = new QGraphicsLinearLayout;
    layout->addItem(shape1);
    layout->addItem(shape2);
    layout->addItem(shape3);

    QGraphicsWidget* container = new QGraphicsWidget;
    container->setLayout(layout);
    scene.addItem(container);

    QGraphicsView view;
    view.setScene(&scene);
    view.show();

    return app.exec();
} 
```

这不起作用，因为所有项目仍然彼此叠放，而不是彼此相邻（根据线性布局规定的布局）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:06:30.340

啊，我忘了重写这个`setGeometry`函数！

所以`MyShape`类的实现应该是这样的：

```
class MyShape : public QGraphicsRectItem, public QGraphicsLayoutItem {
  public:
    MyShape(void) {
        setPen(QPen(QBrush(Qt::black), 1));
        setBrush(QBrush(Qt::green));
        setRect(0, 0, 20, 20);
    }

    virtual QSizeF sizeHint(Qt::SizeHint which,
                            const QSizeF& constraint = QSizeF()) const {
        Q_UNUSED(which);
        Q_UNUSED(constraint);
        return boundingRect().size();
    }

    virtual void setGeometry(const QRectF& rect) {
        setPos(rect.topLeft());
    }
}; 
```

*现在*它按预期工作。=)

# java - 将插件面板添加到我的 NetBeans 平台应用程序

> ID：10230706
> 
> 赞同：1
> 
> 时间：2012-04-19T14:49:38.690
> 
> 标签：java, netbeans6.8, netbeans-platform

默认情况下，我的 NetBeans 平台应用程序在工具菜单中没有“插件”项。但我想用插件扩展我的应用程序。如何将其添加到我的应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:14:47.310

您需要将“自动更新服务”和“自动更新 UI”模块添加到您的应用程序中。

为此，请右键单击您的 NetBeans 应用程序项目节点并选择`Properties`菜单项。在属性面板中选择`Libraries`类别。在 Platform Modules 列表中展开`platform`并选中“Auto Update Services”和“Auto Update UI”节点。这将添加“插件”菜单项和相应的 UI 元素（插件面板）。

完成上述操作后，您需要将更新中心添加到您的模块之一。更新中心只是一个图层文件条目，它指向`updates.xml`文件的 URL（例如[http://example.com/updates.xml](http://example.com/updates.xml)）。将更新中心添加到应用程序后，更新 > 可用插件面板将显示更新中心中注册的所有模块。

# sql - 应该返回相似结果的两个查询，SQL

> ID：10230707
> 
> 赞同：1
> 
> 时间：2012-04-19T14:49:41.187
> 
> 标签：sql, tsql, sql-server-2005, case

在 SQL Server 2005 上运行 2 个查询有点麻烦。第一个返回一个像这样的表：

```
姓名 PAstDUe DueTomorr 今日到期 MONd 逾期
客户 23 10 8 13 32

```

第二个返回相同信息的列表，当我在 excel 中的数据透视表中运行时，这些信息不会添加到相同的表/数据中。我将这些用于 Visual Studio 中的一个项目的两个不同的数据源/目的，所以我不能不使用一个。我不知道出了什么问题，但我正在以不同的方式计算结果，所以我不知道我的数学是否关闭或类似的东西。这真的很重要，因为我需要这些数据每天都是准确的。如果您想知道 dbo.TruncateDate 在做什么，它指的是我们系统中订单的订单号，当运行涉及日期的内容时，这可以确保查询的部分忽略基于我们系统中包含所有的表的所有周末和节假日这些日期。希望这是有道理的。让我知道我是否可以提供更多信息。

查询1：

```
with cte AS (SELECT cl.Name,    
     SUM(CASE WHEN CURRENT_TIMESTAMP > oi.RequiredByDate THEN 1 ELSE 0 END) as PastDue
    ,SUM(CASE WHEN DATEADD(dd, DATEDIFF(dd, 0, oi.RequiredByDate), 0) = dateadd(day, datediff(day, '19000101',CURRENT_TIMESTAMP),'19000102') then 1 ELSE 0 END) as DueTomorrow
    ,SUM(CASE WHEN dbo.TruncateDate(CURRENT_TIMESTAMP) = dbo.TruncateDate(oi.RequiredByDate) THEN 1 Else 0 END) as DueToday
    ,SUM(CASE WHEN DateDiff(day, getdate(), RequiredByDate) BETWEEN 2 and 7 AND DateName(weekday, RequiredByDate) = 'Monday' Then 1 ELSE 0 END) as DueMonday
    ,SUM(CASE WHEN DATEADD(DAY, 2,dbo.TruncateDate(CURRENT_TIMESTAMP)) <=       dbo.TruncateDate(oi.RequiredByDate) THEN 1 ELSE 0 END) as DueBeyond  

     FROM OrderItems oi
     JOIN Orders o ON o.OrderID = oi.OrderID
     JOIN Counties c ON c.FIPS = o.FIPS
     JOIN Clients cl ON cl.ClientID = o.ClientID
     JOIN Milestones m ON m.MilestoneID = oi.LastMilestoneID
     JOIN Products p ON p.ProductID = oi.ProductID
     JOIN Vendors v ON v.VendorID = oi.VendorID
     LEFT JOIN ClientBranches clb ON clb.ClientID = o.ClientID
     WHERE QueueID > 0 AND cl.Name NOT LIKE 'TES%'
     AND cl.NAME LIKE 'HLC%'
     GROUP BY cl.Name)

     Select * FROM cte 
```

查询 2：

```
SELECT cl.Name as Client, clb.Name as ClientBranch
  ,
CASE 
    WHEN CURRENT_TIMESTAMP > oi.RequiredByDate THEN 'Past Due'
    WHEN dbo.TruncateDate(CURRENT_TIMESTAMP) = dbo.TruncateDate    (oi.RequiredByDate) THEN 'Due Today'
    WHEN DATEADD(dd, DATEDIFF(dd, 0, oi.RequiredByDate), 0) = dateadd(day, datediff(day, '19000101',CURRENT_TIMESTAMP),'19000102') then 'Due Tomorrow'
    WHEN DateDiff(day, getdate(), RequiredByDate) BETWEEN 2 and 7 AND DateName(weekday, RequiredByDate) = 'Monday' Then 'Due Monday'
    WHEN DATEADD(DAY, 2,dbo.TruncateDate(CURRENT_TIMESTAMP)) <= dbo.TruncateDate(oi.RequiredByDate) THEN 'Due Beyond'  
    ELSE 'WRONG' end
    as DeliveryStatus

 FROM OrderItems oi
 JOIN Orders o ON o.OrderID = oi.OrderID
 JOIN Counties c ON c.FIPS = o.FIPS
 JOIN Clients cl ON cl.ClientID = o.ClientID
 JOIN Milestones m ON m.MilestoneID = oi.LastMilestoneID
 JOIN Products p ON p.ProductID = oi.ProductID
 JOIN Vendors v ON v.VendorID = oi.VendorID
 LEFT JOIN ClientBranches clb ON clb.ClientID = o.ClientID

 WHERE QueueID > 0
and cl.Name not like ('Tes%')
and cl.Name Like 'HLC%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:59:58.863

你能运行这个吗：

```
with cte AS (SELECT cl.Name,    
     SUM(CASE WHEN CURRENT_TIMESTAMP > oi.RequiredByDate THEN 1 ELSE 0 END) as PastDue
    ,SUM(CASE WHEN DATEADD(dd, DATEDIFF(dd, 0, oi.RequiredByDate), 0) = dateadd(day, datediff(day, '19000101',CURRENT_TIMESTAMP),'19000102') then 1 ELSE 0 END) as DueTomorrow
    ,SUM(CASE WHEN dbo.TruncateDate(CURRENT_TIMESTAMP) = dbo.TruncateDate(oi.RequiredByDate) THEN 1 Else 0 END) as DueToday
    ,SUM(CASE WHEN DateDiff(day, getdate(), RequiredByDate) BETWEEN 2 and 7 AND DateName(weekday, RequiredByDate) = 'Monday' Then 1 ELSE 0 END) as DueMonday
    ,SUM(CASE WHEN DATEADD(DAY, 2,dbo.TruncateDate(CURRENT_TIMESTAMP)) <=       dbo.TruncateDate(oi.RequiredByDate) THEN 1 ELSE 0 END) as DueBeyond,
     COUNT(*) AS cnt

     FROM OrderItems oi
     JOIN Orders o ON o.OrderID = oi.OrderID
     JOIN Counties c ON c.FIPS = o.FIPS
     JOIN Clients cl ON cl.ClientID = o.ClientID
     JOIN Milestones m ON m.MilestoneID = oi.LastMilestoneID
     JOIN Products p ON p.ProductID = oi.ProductID
     JOIN Vendors v ON v.VendorID = oi.VendorID
     LEFT JOIN ClientBranches clb ON clb.ClientID = o.ClientID
     WHERE QueueID > 0 AND cl.Name NOT LIKE 'TES%'
     AND cl.NAME LIKE 'HLC%'
     GROUP BY cl.Name) 
```

并确保`cnt`等于所有其他字段的总和？

**更新：**

请运行这个

```
SELECT  *
FROM    (
SELECT cl.Name,    
    CASE WHEN CURRENT_TIMESTAMP > oi.RequiredByDate THEN 1 ELSE 0 END as PastDue,
    CASE WHEN DATEADD(dd, DATEDIFF(dd, 0, oi.RequiredByDate), 0) = dateadd(day, datediff(day, '19000101',CURRENT_TIMESTAMP),'19000102') then 1 ELSE 0 END as DueTomorrow,
    CASE WHEN dbo.TruncateDate(CURRENT_TIMESTAMP) = dbo.TruncateDate(oi.RequiredByDate) THEN 1 Else 0 END as DueToday,
    CASE WHEN DateDiff(day, getdate(), RequiredByDate) BETWEEN 2 and 7 AND DateName(weekday, RequiredByDate) = 'Monday' Then 1 ELSE 0 END as DueMonday,
    CASE WHEN DATEADD(DAY, 2,dbo.TruncateDate(CURRENT_TIMESTAMP)) <=       dbo.TruncateDate(oi.RequiredByDate) THEN 1 ELSE 0 END as DueBeyond,
     FROM OrderItems oi
     JOIN Orders o ON o.OrderID = oi.OrderID
     JOIN Counties c ON c.FIPS = o.FIPS
     JOIN Clients cl ON cl.ClientID = o.ClientID
     JOIN Milestones m ON m.MilestoneID = oi.LastMilestoneID
     JOIN Products p ON p.ProductID = oi.ProductID
     JOIN Vendors v ON v.VendorID = oi.VendorID
     LEFT JOIN ClientBranches clb ON clb.ClientID = o.ClientID
     WHERE QueueID > 0 AND cl.Name NOT LIKE 'TES%'
     AND cl.NAME LIKE 'HLC%'
     ) q
  WHERE PastDue + DueTomorrow + DueToday + DueMonday + DueBeyond > 1 
```

并查看多次计数的记录。

# java - 在远程服务器上使用 Arquillian 时，@BeforeClass 注释调用方法两次

> ID：10230710
> 
> 赞同：7
> 
> 时间：2012-04-19T14:49:53.713
> 
> 标签：java, jboss, testng, jboss-arquillian

我们正在从使用带有嵌入式 JBoss 的 TestNG 过渡到使用带有远程服务器的 Arquillian。

我们正在运行一个简单的测试，该测试有一个用 @BeforeClass 注释的方法来进行一些测试设置。经过大量挖掘后，该 setup 方法似乎被调用了两次：一次是在控制台上执行 Maven 命令以运行测试，另一次是在将测试战部署到我们的远程服务器并运行测试时。这是两个独立的 JVM——一个在容器外运行，另一个在容器内运行。我的偏好是让后者运行。

这是我应该期待的行为还是我可能遗漏了什么？

现在，我们实际上是在检查我们是否在容器中，如果是，我们运行我们的设置代码。这可行，但我想知道是否有更好的方法。

我们代码的一些片段（请忽略代码的简单性以及此处确实不需要 setupComponents 方法这一事实，我们正在迁移的更复杂的测试需要此功能）：

```
public class BaseTest extends Arquillian
{
    private static Log log = LogFactory.getLog( SeamTest.class );

    @Deployment
    public static Archive<?> createDeployment()
    {
        // snip... basically, we create a test war here
    }

    /**
     * todo - there might be a better way to do this
     */
    private boolean runningInContainer()
    {
        try
        {
            new InitialContext(  ).lookup( "java:comp/env" );
            return true;
        }
        catch (NamingException ex)
        {
            return false;
        }
    }

    @BeforeClass
    public void setupOnce() throws Exception
    {
        getLog().debug( "in setupOnce(): " + runningInContainer() );
        if ( runningInContainer() )
        {
            new ComponentTest()
            {
                protected void testComponents() throws Exception
                {
                    setupComponents();
                }
            }.run();
        }
    }

    public User createUser()
    {
        // ...
    }

    public Log getLog()
    {
        // snip...
    }

    public UserDao getUserDao()
    {
        // ...
    }

    public abstract class ComponentTest
    {
        protected abstract void testComponents() throws Exception;

        public void run() throws Exception
        {
            try {
                testComponents();
            } finally {

            }
        }
    }

}

public class UserDaoTest extends BaseTest
{
    UserDao userDao;

    @Override
    protected void setupComponents()
    {
        getLog().debug( "in setupComponents: " + runningInContainer() );
        userDao = getUserDao();
    }

    @Test
    public void testGetUser() throws Exception
    {
        getLog().debug( "in testGetUser: " + runningInContainer() );

        new ComponentTest()
        {
            protected void testComponents() throws Exception
            {
                User user0 = createUser();
                user0.setName( "frank" );

                userDao.merge( user0 );

                User retrievedUser = userDao.findByName( "frank" );
                assertNotNull( retrievedUser );
            }

        }.run();
    }

} 
```

这基本上给了我如下所示的输出：

从正在执行 mvn 的控制台：

```
in setupOnce(): false 
```

从 jboss 服务器：

```
in setupOnce(): true
in setupComponents: true
in testGetUser: true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-11T03:52:07.740

这是“预期的”行为。不是很好，但这就是 Arqullian 的工作方式。

**JUnit**

*   @BeforeClass / @AfterClass 只在客户端执行
*   测试类的状态在@Test 之间丢失，在容器中，每个测试都重复整个生命周期
*   @Before / @After 根据运行模式（客户端/服务器）执行

**测试NG**

*   一切都在服务器和客户端上运行

# android - 安卓。未找到 KeyFactory RSA 实现

> ID：10230714
> 
> 赞同：3
> 
> 时间：2012-04-19T14:50:04.613
> 
> 标签：android

我有一个扩展应用程序的类。在 onCreate() 方法中，我启动了一些线程，它调用：

```
KeyFactory.getInstance("RSA") 
```

通常它工作得很好，但有时（非常罕见）我会遇到这样的异常：

```
W/System.err(24537): java.security.NoSuchAlgorithmException: KeyFactory RSA implementation not found
W/System.err(24537):    at org.apache.harmony.security.fortress.Engine.notFound(Engine.java:177)
W/System.err(24537):    at org.apache.harmony.security.fortress.Engine.getInstance(Engine.java:151)
W/System.err(24537):    at java.security.KeyFactory.getInstance(KeyFactory.java:81) 
```

看起来像一场比赛......我认为在我的线程调用“RSA”时安全系统没有初始化。

这是一个已知的问题？谁能给我一些提示？

我在 4.0.3 设备上遇到了这个问题（不知道其他版本）。

**更多细节：**

我试过这样的代码：

```
Provider providers[] = Security.getProviders();

try {
    k1 = KeyFactory.getInstance("RSA");
}
catch(Exception e) {
    e1 = e;
}

try {
    k2 = KeyFactory.getInstance("RSA", "BC");
}
catch(Exception e) {
    e2 = e;
}

try {
    k3 = KeyFactory.getInstance("RSA");
}
catch(Exception e) {
    e3 = e;
}

if(k1 == null || k2 == null || k3 == null) {
    if(e1 != null)
        e1.printStackTrace();

    if(e2 != null)
        e2.printStackTrace();

    if(e3 != null)
        e3.printStackTrace();
}

for(Provider provider : providers) {
    System.out.println(provider.getName());
} 
```

这是我不时得到的：

```
k1 is null
k2 is <key>
k3 is null

e1.printStackTrace();

    04-20 22:09:33.322: W/System.err(17249): java.security.NoSuchAlgorithmException: KeyFactory RSA implementation not found
    04-20 22:09:33.322: W/System.err(17249):    at org.apache.harmony.security.fortress.Engine.notFound(Engine.java:177)
    04-20 22:09:33.322: W/System.err(17249):    at org.apache.harmony.security.fortress.Engine.getInstance(Engine.java:151)
    04-20 22:09:33.322: W/System.err(17249):    at java.security.KeyFactory.getInstance(KeyFactory.java:81)
    ...

e2 
    null

e3.printStackTrace();
    04-20 22:10:08.512: W/System.err(17249): java.security.NoSuchAlgorithmException: KeyFactory RSA implementation not found
    04-20 22:10:08.532: W/System.err(17249):    at org.apache.harmony.security.fortress.Engine.notFound(Engine.java:177)
    04-20 22:10:08.532: W/System.err(17249):    at org.apache.harmony.security.fortress.Engine.getInstance(Engine.java:151)
    04-20 22:10:08.542: W/System.err(17249):    at java.security.KeyFactory.getInstance(KeyFactory.java:81)
    ...

providers

    AndroidOpenSSL
    DRLCertFactory
    BC
    Crypto
    HarmonyJSSE
    MyProvider 
```

虽然大多数时候我都初始化了所有 k1、k2、k3 ......

听起来 getInstance("RSA", "BC") 是一个解决方案（虽然我不明白为什么），但问题是 BouncyCastle 在某些 Android 设备上可能会丢失（据我所知），所以我应该不要在这个电话中指定“BC”......所以我又遇到了一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:27:32.530

这是什么设备？这不是一场竞赛，Harmony 提供者根本没有 RSA 实现。BouncyCastle 提供者确实如此，所以它应该能够从那里得到它。尝试明确指定提供者名称：

```
KeyFactory kf = KeyFactory.getInstance("RSA", "BC"); 
```

# javascript - 为什么 getBoundingClientRect 在 IE 和 Firefox 中给出不同的值

> ID：10230715
> 
> 赞同：12
> 
> 时间：2012-04-19T14:50:09.800
> 
> 标签：javascript, html

我有一个图像控件，我需要在图像控件顶部放置一些元素。当我使用 getBoundingClientRect() 时，它在 IE（7,8 和 9）中工作，但它在 Firefox 和 Chrome 中给出不同的值。是否有任何其他函数可用于获取元素的边界矩形？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T15:14:23.943

来自旧 IE 文档的引用`getBoundingClientRect`：“在 Microsoft® Internet Explorer 5 中，相对于真正的客户端，窗口的左上角为 2,2（像素）。” 这似乎仍然有效。

在 IE9 中使用`<meta http-equiv="x-ua-compatible" content="ie=edge"/>`“设置”左上角到它的右侧位置 (0,0)。

正如 d4rkpr1nc3 回答的那样，您可以通过其他方法获取这些值，但结果也取决于使用的浏览器。我认为你需要一种稍微不同的方法来解决这个问题。检查下面的代码，它可能会给你一些想法。

```
<DIV id="imagecontrol" style="position:absolute;width:200px;height:200px;">
  <DIV id="topleft" style="position:absolute;width:100px;height:100px;left:0px;top:0px;"></DIV>
  <DIV id="topright" style="position:absolute;width:100px;height:100px;right:0px;top:0px;"></DIV>
  <DIV id="bottomleft" style="position:absolute;width:100px;height:100px;left:0px;bottom:0px;"></DIV>
  <DIV id="bottomright" style="position:absolute;width:100px;height:100px;right:0px;bottom:0px;"></DIV>
</DIV> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T15:07:17.413

这些值在不同的浏览器中可能略有不同，但`getBoundingClientRect()`仍然是性能和准确性的最佳选择。但是，它返回的坐标是相对于视口而不是文档的，因此您需要使用窗口/文档上的滚动值来考虑这一点。

这是一篇很好的博客文章：

[http://weblogs.asp.net/bleroy/archive/2008/01/29/getting-absolute-coordinates-from-a-dom-element.aspx](http://weblogs.asp.net/bleroy/archive/2008/01/29/getting-absolute-coordinates-from-a-dom-element.aspx)

大卫马克在这方面很擅长。这是他来自[comp.lang.javascript](https://groups.google.com/forum/?fromgroups#!forum/comp.lang.javascript)的提示：

[https://groups.google.com/forum/?fromgroups#!topic/comp.lang.javascript/zWJaFM5gMIQ](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.javascript/zWJaFM5gMIQ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T15:06:02.943

您可以使用偏移量来做到这一点，如下所示：

```
var top = element.offsetTop;
var left = element.offsetLeft;
var width = element.offsetWidth;
var height = element.offsetHeight;
var bottom = top + height;
var right = left + width; 
```

# jquery - 菜单关闭时向上滑动多个 div

> ID：10230717
> 
> 赞同：0
> 
> 时间：2012-04-19T14:50:20.207
> 
> 标签：jquery, html, css

我试图在 JQ 中创建一个菜单，您单击一个链接并滑动切换菜单的显示。在菜单中，您可以直接链接到页面，然后展开显示另一个菜单的链接。到目前为止，我已经完成了这项工作：

[http://www.eadata.co.uk/testing/test.html#](http://www.eadata.co.uk/testing/test.html#)

我现在想做的是，当您单击顶部的链接并重新切换时，我需要关闭所有展开的菜单。它目前部分有​​效，并且在切换时仅隐藏顶部子菜单。因此，当您将其向下切换时，菜单全部关闭。

我一直在努力解决这个问题，但我仍在学习 JQ。PHP是我的事！:)

如果鼠标离开了菜单区域，这个菜单是否可以在设定的时间后切换回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:19:32.797

首先试试这个（版本一）：

给你所有的 nav-level-2 一个类而不是一个 ID（不要忘记你的 CSS）。

```
$(".nav-level-2").slideUp('slow'); 
```

如果这没有帮助，请使用：

您可以`$('#nav-container').find('.nav-level-2')`在 jQuery 中使用该类获取所有元素。有了这个，你可以使用这个：

```
for(var i = 0; i < $('#nav-container').find('.nav-level-2').length; i++) {
    $('#nav-container').find('.nav-level-2').eq(i).slideUp('slow');
} 
```

如果这没有帮助，请使用：

提供所有 nav-level-2 唯一 ID 并将它们全部存储在一个数组中，并使用 for 循环关闭所有级别。如果它们关闭，它们将不会动画：

```
var levelarray = new Array('nav-level-2-a', 'nav-level-2-b', 'nav-level-2-c');
for(var i = 0; i < levelarray.length; i++) {
    $('#' + levelarray[i]).slideUp('slow');
} 
```

# php - 将单选按钮值传输到会话变量中

> ID：10230718
> 
> 赞同：0
> 
> 时间：2012-04-19T14:50:24.727
> 
> 标签：php, session, radio-button

我正在创建几个通过 POST 在 PHP 中提交并存储在会话中的表单。但是我无法获得单选按钮来将值存储到会话中。我正在尝试将单选按钮的值存储在会话中，但无法显示。任何帮助将不胜感激。

以下是我正在使用的代码示例；

HTML：

```
<form method="POST" action="testform2.php">
<input type="radio" id="age" name="age" value="yes"/>Yes<br/>
<input type="radio" id="age" name="age" value="no"/>No<br/>
If no, please tell us your date of birth:<br/>
<textarea id="age" name="age" rows="5" cols="40"></textarea><br/><br/>
<input type="submit" value="Next"></br>
</form> 
```

PHP：在下一个表单的开头（testform2.php）

```
<?php
session_start();

$age=$_POST['age'];

$_SESSION['age']=$age;

echo $_SESSION['age'];
?> 
```

有了这个，尽管点击了单选按钮，我没有从回声中得到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:56:48.697

首先确保您已在两个页面上开始会话，以及您用作页面第一行的任何其他页面（在

你可以通过做调试

```
print_r($_POST); 
```

这将在 POST 中打印所有内容，然后对会话执行相同操作。如果它不在后期打印中，那么您的表单存在问题，如果它在后期打印中但不在会话打印中，那么设置它会出现问题。

# ruby-on-rails - 如何将base 64编码的图像数据转换为图像

> ID：10230721
> 
> 赞同：1
> 
> 时间：2012-04-19T14:50:33.543
> 
> 标签：ruby-on-rails, image-processing

嗨，我正在使用[https://www.stormondemand.com/manage/server/7SA43U.html#network](https://www.stormondemand.com/manage/server/7SA43U.html#network)创建 serevrs。我以 base 64 编码图像的形式接收服务器图形数据。如下面的哈希格式

```
{"content_type"=>"image/png", "content"=>"iVBORw0KGgoAAAANSUhEUgAAAg0AAADcCAIAAAB8hwVgAAAaEElEQVR4nO3deXBUZbrH8aeX7Cud\nBFkMGEGQAVkEgwIyClgqm8LgAi5DguWoowMDghvl1VQhFI7eDP8YuDBuXC/CVVApcKoww0UgBDAJ\nW9jJsCaY0GTp7Ok+948Tm9DdebM2nQ7fT1FUn3Pefs/znKT6l3NO0m3QNE0AAGiE0dcFAAA6NHIC\nAKBCTgAAVMgJAIAKOQEAUCEnAMA/2Gy2RYsWzZkzZ+HChWVlZc3ZZLVan3rqqTbul5wAAP+wZs2a\nxMRE/f/PPvusyU25ubnz588vKipq437JCQDwD5mZmQ8++KCIjB8/PiMjo8lNGzdufPPNN00mUxv3\na27j8wHAfxkMuzRttK+raC6r1RoTEyMiFovFarU2uemdd95pl/22LCcMBkO77BUAOogb/6rmd++C\n0eLzifLycm/UoZafn9+9e/cbv98bhgb9HQ36qbCwrPLyu+UGNhgWFtbq58bExFitVv2MwWKxNHNT\n23F/AsDNa+vWO3xdQgskJiamp6eLSHp6+siRI5u5qe3ICQDwD7Nnz969e3dSUlJmZmZycrK+8uWX\nX25sU3sxtOhKmcFg4LqTN9Cgv6NBP7VjR9nYsRFyY687+d39Cc4nAAAq5AQAQIWcAACotMPf2Rk3\nbzZUV9v/8IeWPa2iwvQ//2OfM0dEpLjY9N13YjZrISGOiRMlOLh+zKVLpn/+UxyOgP79pUsX03ff\nSU2NmM32xx6T0FDXSX4b7BgzRuvfv+19AQCkHXKirs5w9aqYzVJRUf/a3RwXLph++kkqKvQl09at\njgce0Hr3lkuXjNu2OSZPrl//88/2adMkNDR4xQqjzeYYMULr08dw8qRx+3bHxImuk/w22PT553Zy\nAgDaSVuvOxmOHtX69HHceafx4EF9jemTT0zffGNas8Zw/nz94oYNxvT0656lafannpLAwPrl4mKt\nd28RkR49DPn5zmH2KVMkOlpExGg0nD+v9ekjItoddxguXnSf"} 
```

我如何将这些数据转换为图像并显示为图像形式..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:53:22.650

只需对其进行 base-64 解码并输出即可。

```
require "base64"

image_data = Base64.decode64("iVBORw0KGgoAAAANSUhEUgAAAg0AAADcCAIAAAB8hwVgAAAaEElEQVR4nO3deXBUZbrH8aeX7Cud\nBFkMGEGQAVkEgwIyClgqm8LgAi5DguWoowMDghvl1VQhFI7eDP8YuDBuXC/CVVApcKoww0UgBDAJ\nW9jJsCaY0GTp7Ok+948Tm9DdebM2nQ7fT1FUn3Pefs/znKT6l3NO0m3QNE0AAGiE0dcFAAA6NHIC\nAKBCTgAAVMgJAIAKOQEAUCEnAMA/2Gy2RYsWzZkzZ+HChWVlZc3ZZLVan3rqqTbul5wAAP+wZs2a\nxMRE/f/PPvusyU25ubnz588vKipq437JCQDwD5mZmQ8++KCIjB8/PiMjo8lNGzdufPPNN00mUxv3\na27j8wHAfxkMuzRttK+raC6r1RoTEyMiFovFarU2uemdd95pl/22LCcMBkO77BUAOogb/6rmd++C\n0eLzifLycm/UoZafn9+9e/cbv98bhgb9HQ36qbCwrPLyu+UGNhgWFtbq58bExFitVv2MwWKxNHNT\n23F/AsDNa+vWO3xdQgskJiamp6eLSHp6+siRI5u5qe3ICQDwD7Nnz969e3dSUlJmZmZycrK+8uWX\nX25sU3sxtOhKmcFg4LqTN9Cgv6NBP7VjR9nYsRFyY687+d39Cc4nAAAq5AQAQIWcAACotMPf2Rk3\nbzZUV9v/8IeWPa2iwvQ//2OfM0dEpLjY9N13YjZrISGOiRMlOLh+zKVLpn/+UxyOgP79pUsX03ff\nSU2NmM32xx6T0FDXSX4b7BgzRuvfv+19AQCkHXKirs5w9aqYzVJRUf/a3RwXLph++kkqKvQl09at\njgce0Hr3lkuXjNu2OSZPrl//88/2adMkNDR4xQqjzeYYMULr08dw8qRx+3bHxImuk/w22PT553Zy\nAgDaSVuvOxmOHtX69HHceafx4EF9jemTT0zffGNas8Zw/nz94oYNxvT0656lafannpLAwPrl4mKt\nd28RkR49DPn5zmH2KVMkOlpExGg0nD+v9ekjItoddxguXnSf") 
```

# java - 静态 Util 方法与实例 Util 方法 - 哪个好？

> ID：10230726
> 
> 赞同：0
> 
> 时间：2012-04-19T14:50:45.027
> 
> 标签：java, methods, static

保持 Util 类方法静态是一个好习惯还是实例方法好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T14:52:26.587

如果方法是实用方法，那么它与对象的实例关联没有任何意义，因此没有理由将其设为实例方法。

实例方法应该是对特定类的特定实例有意义的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:53:26.003

通常，您有一个带有静态方法的 Util 类，因此您不需要创建 Util 类的实例。

我看不出有一个 Util 类的实例有什么意义，所以我想说保持方法是静态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:02:56.203

如果您的方法不依赖于其他非静态成员。你的方法应该是静态的。我想你在这里制作实用程序包。如果方法不依赖于非静态成员，则它应该是静态的:)

通常 util 没有 util 类的实例

# c# - 使用用户会话 ID 在数据库中保存用户创建的变量

> ID：10230735
> 
> 赞同：0
> 
> 时间：2012-04-19T14:51:31.903
> 
> 标签：c#, asp.net, sql, session-variables

我正在构建一个使用 Web 表单身份验证并允许用户登录并从 sql 数据库创建人员列表的应用程序。用户可以通过从多个下拉菜单中进行选择来创建列表。然后，后端的代码从选定的下拉列表中创建一个字符串，该字符串作为选择语句传递到 sql 数据源中。我需要为用户找到一种方法来保存创建的 sql 字符串变量，这样当他们再次登录时，他们可以查看他们保存的列表。我的想法是获取会话变量或用户 ID 并将其与变量一起插入到数据库中，但我无法找出最好的方法来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:44:33.517

我知道这是一篇较旧的帖子，但您似乎没有找到满意的答案。另外，我不能对讨论线程发表评论，所以我必须以这种方式提交我的想法。

您是否考虑过将变量存储在 XML 中，并将 XML 保存到数据库中的列（例如 user_pref 表）？

当您的数据库对用户进行身份验证时，我假设您有一个存储过程执行部分操作。为什么不让存储的 proc 提取 XML 并将其传递给 Web 表单进行解析？XML 在 Web 界面中得到广泛支持，因此这可能是一个相当容易实现的解决方案。

# reporting-services - 使用报表数据导出为 XML 时如何在 SSRS 中呈现空属性

> ID：10230736
> 
> 赞同：3
> 
> 时间：2012-04-19T14:51:32.540
> 
> 标签：reporting-services

我正在研究以 XML 格式为某人导出 SSRS 报告，我们遇到了这样一种情况，即呈现的表 XML 包含详细信息行的每个实例的元素，但任何单元格为空，属性未添加到元素.

我更喜欢使用 ATOM 数据馈送输出，因为它更加健壮，但是他们坚持使用 XML 输出。

示例输出：

```
<Details DateStamp="2012-01-01" Customers="56703" Sales="624" />
<Details DateStamp="2012-02-01" />
<Details DateStamp="2012-03-01" Customers="107271" Sales="3195" /> 
```

有谁知道强制显示输出属性的任何方法，即使它们没有价值？或者这在 XML 格式中是不可能的？

理想情况下是这样的：

```
<Details DateStamp="2012-01-01" Customers="56703" Sales="624" />
<Details DateStamp="2012-02-01" Customer="" Sales="" />
<Details DateStamp="2012-03-01" Customers="107271" Sales="3195" /> 
```

试试这个查询数据集的例子：

```
 SELECT
    '2012-01-01' as [DateStamp]
    ,56703 as [Customers]
    ,624 as [Sales]

UNION ALL

SELECT
    '2012-02-01' as [DateStamp]
    ,NULL as [Customers]
    ,NULL as [Sales]

UNION ALL

SELECT
    '2012-03-01' as [DateStamp]
    ,107271 as [Customers]
    ,3195 as [Sales] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:25:05.897

对于 Details 行中的每个字段，将属性“DataElementOutput”设置为“Output”。（选择该字段时，此属性在属性窗格中可用。）

[在报表生成器和 SSRS 中呈现数据](http://msdn.microsoft.com/en-us/library/dd255251%28v=sql.105%29.aspx)

在数据集查询中，如果您使用 ISNULL([ColName],0) 或 ISNULL([ColName],'') 替换 NULL 值并将其与 DataElementOutput=Output 组合，这将包括 xml 中所有行的所有属性。渲染器似乎将 NULL 视为不存在的元素，而不是空元素。

# c++ - C++ 追加字符串指针

> ID：10230738
> 
> 赞同：1
> 
> 时间：2012-04-19T14:51:38.300
> 
> 标签：c++, string, pointers, iterator

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:56:36.327

```
CurToken.append(&*Pointer); 
```

Assuming `Pointer` is a pointer, that's equivalent to

```
CurToken.append(Pointer); 
```

and will append the entire tail of the string onto `CurToken` (assuming it points to a C-style zero-terminated string; if there's no terminator then anything might happen). It looks like you just want to append the current character:

```
CurToken.append(*Pointer); 
```

UPDATE: you say that `Pointer` is `std::string::iterator`. In that case, `&*Pointer` is still a pointer to the character; and `append` will still interpret it as a pointer to a C-style string. Since the characters in a string aren't necessarily terminated (although in practice they almost certainly will be, especially in a C++11 library), you've got undefined behaviour.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:02:47.680

What are the types of `CurToken` and `Pointer`? `CurToken` looks like a `std::string`. Is `Pointer` a `std::string*`? `append` has quite a few overloads. One of them is:

```
string& append ( const string& str ); 
```

If you want to hit that one you should get rid of the '&' to give you just the dereferenced pointer:

```
CurToken.append(*Pointer); 
```

That should work, but remember that it'll append the whole string not just the character. If it doesn't you probably need to figure out which overload of `append()` it's hitting. If you want the first character only, try:

```
CurToken.append(1, (*Pointer)[0]); 
```

# wpf - 为什么 ListBoxItem 没有应用 Style？

> ID：10230739
> 
> 赞同：0
> 
> 时间：2012-04-19T14:51:38.663
> 
> 标签：wpf

```
<ListBox>
<ListBox.Resources>
<Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="ListBoxItem.IsSelected" Value="True"/>
                    </Style>
</ListBox.Resources>
<ListBox> 
```

未选择项目。 [http://www.11011.net/archives/000692.html](http://www.11011.net/archives/000692.html)这篇文章给出了一些提示，但 ListBoxItem 属于 Control 类的继承树。

我知道 ItemContainerStyle 属性。我只是好奇为什么不应用样式。

**更新1：**

它确实适用于 ListBox，但不适用于具有默认样式的派生类：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:wcl="clr-namespace:SecurityFramework.UI.WpfControlsLibrary">
    <Style TargetType="{x:Type wcl:ListBoxEx}">
        <Setter Property="SelectAllToggleStyle">
            <Setter.Value>
                <Style TargetType="ToggleButton">
                    <Setter Property="Content" Value="Select All"/>
                    <Setter Property="Focusable" Value="True"/>
                    <Setter Property="Margin" Value="2,0,0,0"/>
                    <Setter Property="IsThreeState" Value="False"/>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type wcl:ListBoxEx}">
                    <Border 
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="true"
                            Padding="{TemplateBinding Padding}"
                            VerticalAlignment="{TemplateBinding VerticalAlignment}"
                            HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                            Height="{TemplateBinding Height}"
                            Width="{TemplateBinding Width}">
                        <DockPanel VerticalAlignment="Top" HorizontalAlignment="Stretch" LastChildFill="True">
                            <CheckBox Name="PART_SelectAllToggle" DockPanel.Dock="Top"/>
                            <Separator Margin="4" Visibility="{Binding Path=Visibility, ElementName=PART_SelectAllToggle}" DockPanel.Dock="Top"/>
                            <ScrollViewer>
                                <ItemsPresenter DockPanel.Dock="Top"/>
                            </ScrollViewer>
                        </DockPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style>
                    <Setter Property="ListBoxItem.Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                <Border
                                SnapsToDevicePixels="true" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="0"
                                VerticalAlignment="{TemplateBinding VerticalAlignment}"
                                HorizontalAlignment="Stretch"
                                Height="{TemplateBinding Height}"
                                Width="{TemplateBinding Width}">

                                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                              />

                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=wcl:ListBoxEx, Mode=FindAncestor}, Path=ItemBackground}"/>
                                        <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType=wcl:ListBoxEx, Mode=FindAncestor}, Path=ItemForeground}"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{x:Static SystemColors.HighlightBrush}"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=wcl:ListBoxEx, Mode=FindAncestor}, Path=SelectedItemBackground}"/>
                                        <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType=wcl:ListBoxEx, Mode=FindAncestor}, Path=SelectedItemForeground}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Control.VerticalAlignment" Value="Center"/>
                    <Setter Property="Control.FocusVisualStyle">
                        <Setter.Value>
                            <Style TargetType="Control">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Rectangle Margin="0" StrokeThickness="2"  Stroke="Black" SnapsToDevicePixels="true"/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Padding" Value="4"/>
        <Setter Property="SelectedItemBackground" Value="{x:Static SystemColors.HighlightBrush}"/>
        <Setter Property="SelectedItemForeground" Value="White"/>
        <Setter Property="ItemBackground" Value="Transparent"/>
        <Setter Property="ItemForeground" Value="Black"/>
        <Setter Property="MouseOverItemBackground" Value="LightGray"/>
        <Setter Property="MouseOverItemForeground" Value="Black"/>
    </Style>
</ResourceDictionary> 
```

**更新2：**

并行线程：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f7f0558b-c041-492e-bd96-896f97a7b07e/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f7f0558b-c041-492e-bd96-896f97a7b07e/)

# mysql - 来自 MySQL 的大脑沸腾 - 如何从多个表中进行复杂的选择？

> ID：10230741
> 
> 赞同：0
> 
> 时间：2012-04-19T14:51:41.187
> 
> 标签：mysql, database

我有两个表：用户和组

在我的“用户”表中，所有用户 ID 都有一个名为“ID”的列。

在我的表“组”中有一个名为“参与者”的列，该列中的字段填充了所有用户 ID，例如“PID_134，PID_489，PID_4784” - 并且有一列“ID”标识特定组.

现在我想要做的是，我想创建一个菜单来显示所有尚未在此特定组中的用户。

所以我需要获取所有用户 ID，这些用户 ID 尚未在具有特定 ID 的组的“参与者”列中。

如果有一个单独的 mysql 查询会很酷 - 但是任何 PHP + MySQL 解决方案也可以。

这是如何运作的？有什么猜测吗？

**更新：**
我知道，这不是代码，但是有没有办法我可以做这样的事情来返回所有用户的列表？

```
SELECT * 
FROM users, groups 
WHERE groups.participants NOT LIKE '%PID_'users.id'%' AND groups.id = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:56:32.310

您可以从多个表中进行选择，如下所示：

```
SELECT * from users, groups WHERE users.id != groups.participants AND groups.id = 1; 
```

这将列出所有不在组 id 1 中的用户；使用连接可以找到更优雅的解决方案，但这很简单并且可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:37:34.287

我相信这样的事情应该会有所帮助：

```
SELECT * FROM users WHERE users.id NOT IN (SELECT groups.participants FROM groups) 
```

但这仅在您的数据库已标准化时才有效。因此，对于您的情况，我只看到 PHP + MySQL 解决方案。不是很优雅，但它可以完成工作。

```
<?php
$participants_array = mysql_query("SELECT participants FROM groups");
$ids = array();
while ($participant = mysql_fetch_assoc($participants_array))
{
  $id = explode(',', $participant['participant']);
  foreach ($id as $instance)
  {
    if (!in_array($instance, $ids)) $ids[] = $instance;
  }
}
$participants = implode(',', $ids);
$result = mysql_query("SELECT * FROM users WHERE id NOT IN ( $participants )"); 
```

但我强烈建议规范化数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:08:11.530

像这样的东西。您只需摆脱 ID 的“PID_”部分。

```
SELECT * FROM [users] WHERE [id] NOT IN 
(SELECT replace(id,'PID_','') FROM groups WHERE group_name='group1') 
```

Group1 将是您的变量 - 您打开的菜单的组 ID/名称。

# android - R.id 无法解析。安卓。

> ID：10230750
> 
> 赞同：1
> 
> 时间：2012-04-19T14:52:07.630
> 
> 标签：android, android-tabhost, android-xml

我有代码：

```
package com.finalyearproject.cookmefood;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.TextView;

public class SearchActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        ListView recipes = (ListView)findViewById(R.id.recipes);
    }
} 
```

这给了我错误“id无法解决”。

我已尝试清理项目，但这导致我在文件中创建当前正常的错误。

我的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" >
            <LinearLayout
                android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
                android:padding="5dp">
                <ListView 
                    android:id="@+id/recipes"
                    android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:entries="@array.recipes"/>
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

任何帮助将不胜感激，我可以从这里去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:55:13.130

`@array.recipes`在 xml 中应该是`@array/recipes`.
像这样一个简单的错字会阻止您的`R`课程构建，这意味着您找不到任何 id 或其他资源。
您还应该确保在`R`同时使用`android.R`和您的`R`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:08:38.260

尝试清理和重建您的代码。我不知道为什么，但它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T11:45:22.680

***使用这个 com.finalyearproject.cookmefood.R.id.recipes。***

# fullcalendar - 将附加 HREF 链接附加到 jQuery fullcalendar

> ID：10230756
> 
> 赞同：1
> 
> 时间：2012-04-19T14:52:33.213
> 
> 标签：fullcalendar

我试图在我的 jQuery fullcalendar 实现中为每个“事件”附加一个附加链接。但是，下面的代码基本上没有结果：

```
eventRender: function(event, element) {
    $(element).find("a.fc-event").after($('<a href="/TEST">link</a>').html("link"));
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:12:15.663

您可能需要将其附加到`.fc-event-title`。

像这样的东西：

```
eventRender: function(event, element) {
    var eventText = element.find('span.fc-event-title').text() + "<a href='/TEST'>link</a>";
    element.find('span.fc-event-title').html(eventText);
} 
```

希望有帮助！

# c# - 从不同的类统一访问数据

> ID：10230758
> 
> 赞同：0
> 
> 时间：2012-04-19T14:52:42.637
> 
> 标签：c#, unity-container, getter

嘿伙计们，我是 Unity 的新手，发现很难适应事物的概念。我的问题是我有一个返回 string 的方法，以及另一个类中的另一个方法，该方法调用该方法以获取该字符串，只要我尝试实现这个，就不会从其他类访问该字符串。

这是返回字符串的方法

```
public string getString(){

 string hi  = "why hello";

 return hi;

} 
```

这是单击按钮时打印上述字符串的方法

```
void OnMouseUp(){

firstScript log = (firstScript)FindObjectOfType(typeof(firstScript));

  string hello = log.getString()

print (hello);  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:26:24.287

您需要引用您拥有该类的 GameObject：

```
firstScript log =GameObject.find("NameOfGameObject").GetComponent<firstScript>();
Debug.Log(log.GetString()); 
```

# java - 将 JNDI 用于我的数据源和属性文件的位置

> ID：10230759
> 
> 赞同：2
> 
> 时间：2012-04-19T14:52:42.790
> 
> 标签：java, spring, maven, jndi

我想在我的 spring mvc 应用程序中使用 jndi 来做两件事：

1.  数据源设置
2.  存储我的属性文件的位置，以便我可以在我的代码中进行查找

我实际上有 2 个应用程序，1 个是 spring mvc，另一个是 spring，所以我计划对两者使用相同的 jndi 设置。

此外，这两个应用程序在不同的包含（tomcat 和码头）上运行，我以前从未使用过 jndi，所以我希望我可以在一个位置定义它并让两个应用程序都指向同一个 jndi 文件（假设它是一个文件）。

至于#1，我的spring上下文文件中的数据源设置目前是：

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost/mydb_development"/>
        <property name="username" value="devuser1"/>
        <property name="password" value="123"/>

        <property name="maxActive" value="100"/>
        <property name="maxIdle" value="30"/>
        <property name="maxWait" value="1000"/>
        <property name="defaultAutoCommit" value="true"/>
        <property name="removeAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="60"/>

        <property name="testOnBorrow" value="true"/>
        <property name="validationQuery" value="SELECT 1"/>

    </bean> 
```

**有人可以告诉我如何将其提取出来以使用 JNDI，很困惑，它是一个必须在我的类加载器中的单独文件，还是我在我的 spring 上下文文件中硬编码路径？**

至于＃2，在我的代码中，我目前正在加载我的类路径中的属性文件，例如：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
InputStream is = classLoader.getResourceAsStream("test.properties"); 
```

现在 test.properties 文件在我的类路径中，所以它可以开箱即用，但我想知道/理解的是我是否可以以某种方式使用 jndi 来查找属性文件的位置（如果这有意义？）而不是可能在我的类路径中有这个文件。

我在谷歌周围搜索了一下，我知道在春天我可以使用以下方法引入 jndi：

```
<jee:jndi-lookup id="dataSource" jndi-name="jdbc/mysqlDataSource" /> 
```

但我不明白的是，具有设置的实际文件在哪里？它可以在我的 web.xml 文件以外的位置吗？（我的另一个应用程序再次使用 spring，但它是一个守护进程，因此它没有 web.xml 文件）。

我的目标是能够更改 jndi 文件的值（如用户名、密码、文件路径），而不是将这些嵌入到 jar 中。我希望能够在生产服务器或开发服务器上手动编辑这些文件，然后重新启动容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:17:53.583

我对春天有点生疏，但我记得使用了 PropertyPlaceHolderConfigurer，比如：

```
<bean id="propertyPlaceholderConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreResourceNotFound">
            <value>true</value>
        </property>
        <property name="ignoreUnresolvablePlaceholders">
            <value>true</value>
        </property>
        <property name="locations">
            <list>
                <value>file:path to your file
                </value>
                <value>file:path to another file if needed
                </value>
            </list>
        </property>
    </bean> 
```

然后，您可以直接使用列表中定义的 .properties 上的值。即如果你有一个像

```
db.driver=com.mysql.jdbc.Driver 
```

你可以像这样使用它

```
bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="${db.driver}"/> 
```

当你想定义一个值时。

如果您想进一步控制文件，可以在您的服务器上注册文件本身的路径，您可以通过 JNDI 查找它，更改

```
file:path to your file 
```

进入

```
file:${propertiesFilePath} 
```

我很确定您也可以通过普通的 JNDI 查找通过代码查找这些配置属性。

# c# - 与 C# 中的现有列表相比，如何对列表进行排序？

> ID：10230764
> 
> 赞同：4
> 
> 时间：2012-04-19T14:53:05.697
> 
> 标签：c#, linq, list, sorting

我有一个`List<int> allIDs`包含原始顺序的 ID 列表。我正在创建一个元素选择器，它允许用户将此列表中的 ID 添加和删除到另一个`List<int> selectedIDs`. 现在，我已经完成了所有工作，但每当用户删除并稍后添加相同的元素时，它就会被添加到列表的末尾 ( `selectedIDs.Add( id )`)。

我想将元素插入到它的原始位置，`allIDs`用作它曾经所在位置的参考。

以下是列表的一些摘录，以将其全部放在上下文中：

```
List<int> allIDs = new List<int> {10, 11, 9, 155, 12, 299, 15...};
List<int> selectedIDs = new List<int> { 10, 9, 155, 299, 15... } 
```

现在假设我从`selectedIDs`-list 中删除了 id=299，以便稍后尝试再次添加它。如何在`155`和之间插入它`15`？我知道我可以使用该方法在列表中的任何位置插入`list.Insert(obj, index)`，但是如何以最简单的方式以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:57:37.030

如果我正确理解了您的要求：

```
var ordered = selectedIDs.OrderBy(sID => allIDs.IndexOf(sID)); 
```

这将按照原始完整列表中每个 id 的索引对所选 ID 的列表进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:58:33.020

在伪代码中：

在第一个列表中查找您的元素的索引。

如果此索引为 0，请将您的元素添加到列表的开头。

否则索引 = x;

取 index = x - 1 的元素；

如果索引为 x - 1 的元素在您的列表中，请在之后添加新元素。

否则，如果 x - 2 >= 0，则使用索引 x - 2 处的元素再次循环。

您最终将获得之前已包含在列表中的元素的索引，并且您将在此索引 + 1 处插入新元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:01:01.947

如果您使用[SortedDictionary](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)而不是 List 怎么样？键是索引，值是 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:05:02.600

一种选择是使用 a`List<MyClass>`而不是 a `List<int>`。MyClass 将有两个属性， an`int`和`bool shouldDisplay`。您可以将它们标记为隐藏或不显示，而不是从第一个列表中删除项目。要取消删除它们，只需将它们再次设置为“可见”即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T15:07:11.297

蒂姆的答案非常紧凑和酷，但有一个非常令人讨厌的复杂性。以下应该在更大的列表上更快，更有用，虽然不是那么紧凑。

```
public class IdWithFlag
{
     public int Id { get; set; }
     public bool Selected { get; set; }
}

Dictionary<int, IdWithFlag> allIDs = ... // populate somehow, perhaps a custom cast operator would help 
```

现在每次添加/删除选定的 ID 时，重新生成另一个列表，如下所示：

```
allIDs[currentlyChangedId].Selected = ... // added or removed?

List<int> selectedIDs = allIDs.Values
    .Where(id => id.Selected)
    .Select(id => id.Id)
    .ToList(); 
```

复杂得多，但计算复杂度更高。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T15:08:48.487

这不是最有效的答案，但我认为这是最容易编码的答案：

```
List<int> allIDs = new List<int> { 10, 11, 9, 155, 12, 299, 15 };
List<int> selectedIDs = new List<int> { 299, 10, 9, 15, 11 };

// this will ensure the sort order...
var newSel = (from a in allIDs
    join s in selectedIDs on a equals s
    select a).ToList();

selectedIDs = newSel; 
```

结果输出将始终根据`allIDs`数字的顺序进行排序。

# javascript - 如果在移动设备上运行 jQuery

> ID：10230766
> 
> 赞同：0
> 
> 时间：2012-04-19T14:53:16.740
> 
> 标签：javascript, jquery, css, mobile

我的网站上每个 sae 都有一个幻灯片框`display: none`，不幸的是，我们使用媒体查询来包含一个移动样式表，它做了很多。滑动框就是其中之一，`display:none`直到我们认为它是网站的一个非常重要的部分（显示最新的热门内容等），所以我决定重新添加它。

无论如何，长话短说，它使用标签在每张幻灯片之间跳转，标签内是内容的标题，即。'Big Event' 或 'Sign Up Here' 等。在移动设备上，这些都太长了，所以我习惯了一些 jQuery 来根据屏幕将文本更改为 1、2、3、4... 等宽度，节省了很多空间。

```
<!-- This is only for the mobile site -->
<script>
$(document).ready(function() {
if ($(window).width() < 500) {
    $('#newsTabsControl li:nth-child(1) a').text('1');
    $('#newsTabsControl li:nth-child(2) a').text('2');
    $('#newsTabsControl li:nth-child(3) a').text('3');
    $('#newsTabsControl li:nth-child(4) a').text('4');
    $('#newsTabsControl li:nth-child(5) a').text('5');
}
});
</script> 
```

这是我想到的唯一方法。当我在我的移动设备 (iPhone) 上查看它时，它大多数时候都能正常工作，但有时根本不工作 - 有点不一致。

关于如何使这更容易的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:00:28.170

您可以为此使用 CSS 媒体查询。

更多信息可以在这里看到：[http ://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

我想到了这样的事情：

> HTML

```
<div class="desktop-menu"><!-- HTML FOR DESKTOP --></div>

<div class="mobile-menu"><!-- HTML FOR MOBILE --></div> 
```

> CSS

```
.mobile-menu  {display:none}

@media only screen and (max-width: 500px) {

.desktop-menu {display:none}
.mobile-menu  {display:inline}

} 
```

# .net - .net 中的字符串是否被更改？有什么错误吗？

> ID：10230772
> 
> 赞同：1
> 
> 时间：2012-04-19T14:53:32.823
> 
> 标签：.net, string, pointers, unsafe

我编写了一个函数 Reverse 来使用不安全上下文中的指针来反转 .net 中的字符串。我喜欢这样。

我分配“greet”和“x”相同的值。我惊讶地向我打招呼，x 也被逆转了。

```
using System;

class Test{

    private unsafe static void Reverse(string text){
        fixed(char* pStr = text){
            char* pBegin = pStr;
            char* pEnd = pStr + text.Length - 1;
            while(pBegin < pEnd){
                char t = *pBegin;
                *pBegin++ = *pEnd;
                *pEnd-- = t; 
            }
        }
    }

    public static void Main(){
        string greet = "Hello World";
        string x = "Hello World";
        Reverse(greet);
        Console.WriteLine(greet);
        Console.WriteLine(x);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T14:55:27.070

这没什么奇怪的。你在看*实习*。如果你写：

```
Console.WriteLine(object.ReferenceEquals(greet, x)); 
```

在声明之后，您会立即看到您只有*一个字符串对象*。您的两个变量都引用同一个对象，因此很明显，如果您通过一个变量对对象进行修改，您稍后通过另一个变量访问它时会看到相同的更改。

从 C# 4 规范，第 2.4.4.5 节：

> 每个字符串文字不一定会产生一个新的字符串实例。当根据字符串相等运算符等效的两个或多个字符串文字出现在同一程序中时，这些字符串文字引用相同的字符串实例。

哦，我希望在真正的代码中你*实际上*并没有使用不安全的操作来修改字符串......

# php - php curl 使用 GET 奇怪的结果发送 vars

> ID：10230774
> 
> 赞同：2
> 
> 时间：2012-04-19T14:53:36.393
> 
> 标签：php, curl, get

我正在尝试在远程站点的页面中调用 url。决定使用 curl。在远程站点上，url vars 显示为：

```
$_REQUEST   Array
(
    [var1] => val1
    [amp;var2] => val2
    [amp;var3] => val3
) 
```

被调用的网址是：

```
http://site.com/controller/action.php?var1=val1&var2=val2&var3=val3 
```

请注意，我没有`&amp;`在 url 中使用，但请求全局有它，或者几乎 - 它有`amp;`而`&amp;`不是`&`像我使用的那样！！！并不是说它应该有任何一个。

curl 对象已经登录到一个表单，设置了 cookie，在另一个页面上发布了一个表单，现在这是我必须遵循的最后一个链接。

这是我正在使用的 php：

```
 curl_setopt($this->ch, CURLOPT_URL, "http://site.com/controller/action.php?var1=val1&var2=val2&var3=val3");
    curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($this->ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($this->ch, CURLOPT_REFERER, "http://site.com/");
    curl_setopt($this->ch, CURLOPT_VERBOSE, 1);
    curl_setopt($this->ch, CURLOPT_COOKIEJAR, $this->cookie);
    curl_setopt($this->ch, CURLOPT_COOKIEFILE, $this->cookie);
    curl_setopt($this->ch, CURLOPT_POST, 0);
    curl_setopt($this->ch, CURLOPT_HTTPGET, 1);
    $output = curl_exec($this->ch);
    $info = curl_getinfo($this->ch); 
```

在此之后我运行了另一个 curl 请求，但我仍然登录，所以问题不是 cookie。因为使用 $_POST 的最后一个请求（登录表单）已将 CURLOPT_POST 设置为 0，将 CURLOPT_HTTPGET 设置为 1。这是 $info 的输出：

```
info    Array
(
    [url] => http://site.com/controller/action.php?var1=val1&var2=val2&var3=val3
    [content_type] => text/html; charset=utf-8
    [http_code] => 403
    [header_size] => 403
    [request_size] => 541
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.781186
    [namelookup_time] => 3.7E-5
    [connect_time] => 3.7E-5
    [pretransfer_time] => 4.2E-5
    [size_upload] => 1093
    [size_download] => 3264
    [speed_download] => 4178
    [speed_upload] => 1399
    [download_content_length] => 3264
    [upload_content_length] => 0
    [starttransfer_time] => 0.781078
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

) 
```

如果我将 $info['url'] 复制并粘贴到浏览器中，它就可以工作。完全丢失了，时钟丢失了几个小时，任何帮助将不胜感激；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:06:31.467

尝试如下修改您的代码：

```
$data = array('val1'=>"val1", 'val2'=>"val2", 'val3'=>"val3");
curl_setopt($this->ch, CURLOPT_URL, "http://site.com/controller/action.php");
curl_setopt($this->ch, CURLOPT_POSTFIELDS, http_build_query($data));
curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($this->ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($this->ch, CURLOPT_REFERER, "http://site.com/");
curl_setopt($this->ch, CURLOPT_VERBOSE, 1);
curl_setopt($this->ch, CURLOPT_COOKIEJAR, $this->cookie);
curl_setopt($this->ch, CURLOPT_COOKIEFILE, $this->cookie);
curl_setopt($this->ch, CURLOPT_POST, 0);
curl_setopt($this->ch, CURLOPT_HTTPGET, 1);
$output = curl_exec($this->ch);
$info = curl_getinfo($this->ch); 
```

**编辑**

根据 Brad 的评论删除了自定义编码函数 - 你不需要它，因为 PHP 有一个内置函数可以做同样的事情。

# android - 在 android webview 中使用 JS 发起的对话框

> ID：10230776
> 
> 赞同：1
> 
> 时间：2012-04-19T14:53:38.527
> 
> 标签：android, mobile

我试图让我的 webview 显示一个 javascript 'confirm' 框，并且我得到以下异常（来自 logcat）：

```
E/AndroidRuntime(  387): android.view.WindowManager$BadTokenException: Unable to add         window -- token android.os.BinderProxy@40
5113d8 is not valid; is your activity running?
E/AndroidRuntime(  387):        at android.view.ViewRoot.setView(ViewRoot.java:527)
E/AndroidRuntime(  387):        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
E/AndroidRuntime(  387):        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
E/AndroidRuntime(  387):        at android.view.Window$LocalWindowManager.addView(Window.java:424)
E/AndroidRuntime(  387):        at android.app.Dialog.show(Dialog.java:241)
E/AndroidRuntime(  387):        at com.playfish.our.app.activity.App$1.onJsConfirm(App.java:55)
E/AndroidRuntime(  387):        at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:526)
E/AndroidRuntime(  387):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  387):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  387):        at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(  387):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  387):        at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  387):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(  387):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(  387):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(   60):   Force finishing activity com.playfish.our.app/.activity.App
W/ActivityManager(   60): Activity pause timeout for HistoryRecord{4071cfc0 com.playfish.our.app/.activity.App} 
```

我的对话框的代码是：

```
 webview.setWebChromeClient(new WebChromeClient() {
          public boolean onConsoleMessage(ConsoleMessage cm) {
            Log.d(getClass().getName(), cm.message() + " -- From line "
                    + cm.lineNumber() + " of "
                    + cm.sourceId());
            return true;
        }

          @Override
          public void onReachedMaxAppCacheSize(long spaceNeeded, long totalUsedQuota,    WebStorage.QuotaUpdater quotaUpdater)
          {
                quotaUpdater.updateQuota(spaceNeeded * 2);
          }

         @Override
         public boolean onJsConfirm(WebView view, String url, String message, final JsResult result) {

             new AlertDialog.Builder(App.this)
            .setTitle("Update")
            .setMessage(message)
            .setPositiveButton(android.R.string.yes,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            result.confirm();
                        }
                    })
            .setNegativeButton(android.R.string.no,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            result.cancel();
                        }
                    })
            .create()
            .show();

            return true;
        }
     }); 
```

代码目前组织得不是很好（或很好），所以请不要纠缠于此；我会在它工作后重构:)

我认为这与传递给对话框的上下文错误有关，我在网上找到了几个类似问题的答案，但没有一个对我有用。我已经为上下文使用了其他值，但它们都不起作用，例如 getApplicationContext()、webview.getContext() 等......任何帮助将不胜感激。

顺便说一句，我很有可能正在做一些非常愚蠢的事情，因为我是一个几乎没有 java 经验的 JS 开发人员。

# android - 未重新加载活动时复选框刷新不起作用 - Android

> ID：10230777
> 
> 赞同：0
> 
> 时间：2012-04-19T14:53:39.403
> 
> 标签：android, database, android-activity

我创建了一个在用户单击按钮时刷新引号的活动。在同一活动中，有一个复选框，如果用户喜欢该报价，则可以单击该复选框。

除了复选框之外，一切都完美无缺。当用户单击他们喜欢的报价时，我希望选中该复选框。这只发生在用户离开活动并在稍后阶段返回时。

但是，当用户停留在活动中并返回报价时，将显示旧状态而不是用户偏好。

该复选框是从数据库中的值配置的，如果值为1，则应勾选该复选框，否则应清除该复选框。

代码如下所示：

当用户单击下一步按钮时，将执行以下代码：

```
Button nextGenerateButton = (Button) findViewById(R.id.btn_next_quotes);
nextGenerateButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        String nextQuote = myDbHelper.getnextQuote();
        setQuoteDisplay(nextQuote);
        btn_favorite.setChecked(myDbHelper.getFavouriteCheckBoxValue());

    }
}); 
```

该按钮检索下一个报价，getFavouriteCheckBoxValue() 确认收藏列是否在数据库中被标记，或者返回 true 或 false 设置复选框值。

```
public boolean getFavouriteCheckBoxValue()
    {
        int laballedFavourite = cursor.getInt(0);

        if(laballedFavourite == 0)
        {
            return false;
        }
        else
        {
            return true;
        }
    } 
```

如果用户喜欢这句话，代码会执行 addFavourite() ，它会更新将在其中修改收藏列的表。

```
btn_favorite.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub              
        if(isChecked == true)
        {
            myDbHelper.addFavourite();
        }

        if(isChecked == false)
        {
            myDbHelper.removeFavourite();
        }
    }
});

public void addFavourite()
{
    ContentValues vals = new ContentValues();
    vals.put("favouriteQuote", 1);
    db.update(TABLE_NAME, vals, "columnId = " + cursor.getInt(1), null);
} 
```

同样，这仅在我恢复报价活动时才完美工作，而不是当我当前处于报价活动中时。

希望这是有道理的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:33:01.460

刷新光标解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:59:27.817

您需要刷新复选框才能看到更改，因为您在数据库中进行了更改，但在 UI 上没有。您需要观察数据库并在修改后刷新复选框。

# playframework - 播放框架下载文件

> ID：10230786
> 
> 赞同：0
> 
> 时间：2012-04-19T14:54:03.557
> 
> 标签：playframework, playframework-1.x

我是新的游戏框架我想通过以下方式下载文件：

*   从数据库中带来文件路径。
*   单击路径应以 Web 表单打开文件。

可以在游戏框架中做吗？如果是的话，请给我一些想法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-09-06T09:44:33.870

使用播放控制器可以轻松下载文件，如下所示，

```
public Result downloadFile(){
    File fileToDownload = new File("/path/fileToDownload.pdf"):

    response().setContentType("application/x-download");
    response().setHeader("Content-disposition", "attachment; filename=fileToDownload.pdf");

    return ok(fileToDownload);
} 
```

**斯卡拉之道**

```
def downloadFile = Action {
  Ok.sendFile(
  content = new java.io.File("/path/fileToDownload.pdf"),
  fileName = _ => "fileToDownload.pdf"
  )
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T18:17:01.877

如果您的意思是服务器上的文件路径，那么这很简单。只需使用`renderBinary`方法。这可以采用输入流或 File 对象，所以...

```
renderBinary(new File(filepath)); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-09T14:36:07.857

一个例子

在 JPA 模型中

```
@Lob
@Column(name="NY_FILE",length=100000, nullable=false)
private byte[] myFile;

@Column(name="MIME_TYPE", nullable=false)
private String mimeType; 
```

控制器

```
@play.db.jpa.Transactional(readOnly=true)
public Result download(Long id){
    myPOJO = arquivo.findByid(JPAapi.em(), id);
    return ok(MyPOJO.getMyFile()).as(myPOJO.getMimeType());
} 
```

路线文件

```
GET     /download/:id   @controllers.MyController.download(id:Long) 
```

HTML 链接

```
<a id="linkDownload" href="/download/@myPOJO.getMyFile.getId" target="_blank">
   @myPOJO.getMyFile.getName
</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-12T04:38:51.757

```
File file = new File("file pathfr");
return ok(file); 
```

# javascript - 下拉值上的 Jquery 选择器不区分大小写

> ID：10230788
> 
> 赞同：0
> 
> 时间：2012-04-19T14:54:04.290
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试在下拉列表中设置选定的值。但在我这样做之前，我会检查所选值是否存在于控件中。为此，我使用以下代码：

```
var exists = 0 != $('#comp option[value="'+ value +'"]').length; 
```

其中 value 可以是大写、小写或混合大小写。我怎样才能重写这段代码，使其适用于各种套管？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:56:03.703

与其选择全部，不如在检查时将值设为小写。

```
value.toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:03:30.323

```
$('#comp option').each(function() {
   if(this.value.toLowerCase() === value.toLowerCase() ) { 
      // do something
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T07:44:58.337

您也可以使用这种方法。

```
var matchingValue = $('#select option').filter(function () { 
     return this.value.toLowerCase() == 'stackoverflow'; 
     } ).attr('value');    
$('#select').val(matchingValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:09:18.930

```
var myvalue = 'ONE';
$('select option').filter(function() {
    if(new RegExp(this.value, 'ig').test(myvalue))
        $(this).attr('selected', true);
}); 
```

# wpf - Datagrid 行的静态数据是否可以纯粹在 XAML 中定义，即没有代码？

> ID：10230790
> 
> 赞同：16
> 
> 时间：2012-04-19T14:54:12.630
> 
> 标签：wpf, xaml, datagrid, wpfdatagrid

我有想要以 Datagrid 格式显示的静态数据。这些值仅用于显示目的，不会更改。是否可以将其添加为 Datagrid 控件的某种子标签，以便我可以避免代码隐藏中的任何内容？

它必须是 Datagrid 控件，因为其目的是试验和演示某些带有虚拟内容的 Datagrid UI 功能。

如果纯 XAML 内容是不可能的，那么为数据网格设置虚拟内容的最佳（快速和肮脏）方法是什么？可以在不编写课程等的情况下完成吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-12T15:09:40.820

这是绑定在数据网格上的纯 XAML 静态数据：

```
<Window x:Class="WpfStaticDataBinding.XMLWindows"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="XMLWindows" Height="152" Width="294">
<Window.Resources>
    <XmlDataProvider x:Key="MockList"   XPath="/MockObjects/*" >
        <x:XData >
            <MockObjects xmlns="">
                <MockObject  Name="Louis" Type="TTTT" Number="1" />
                <MockObject Name="Joseph" Type="TTTT" Number="2" />
                <MockObject Name="Papineau" Type="ZZZZ" Number="3" />
            </MockObjects>
        </x:XData>
    </XmlDataProvider>
</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource MockList}}">
    <DataGrid HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch" 
              ItemsSource="{Binding Mode=Default, XPath=/MockObjects/MockObject}" 
              AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" Binding="{Binding XPath=@Name}" ></DataGridTextColumn>
            <DataGridTextColumn Header="Type" Binding="{Binding XPath=@Type}"></DataGridTextColumn>
            <DataGridTextColumn Header="Number" Binding="{Binding XPath=@Number}"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

结果：

![在此处输入图像描述](../Images/5145616fed0e9baf356cbfe74b373ba9.png)

我无法使用 XmlDataProvider 自动生成列（我可能遗漏了一些东西）：

```
<Grid DataContext="{Binding Source={StaticResource MockList}}">
    <DataGrid HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch" 
              ItemsSource="{Binding Mode=Default, XPath=/MockObjects/MockObject}">
    </DataGrid>
</Grid> 
```

![在此处输入图像描述](../Images/abf791aa358f4d6a103f39d255e5af18.png)

但是使用像 Dave Suggestion 这样的代码后面的类允许 AutoBinding 工作，并且在我看来要简单得多（`ResourceDictionary`虽然我更喜欢这种方法）：

代码：

```
namespace WpfStaticDataBinding
{
    public class MockRecord
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }
    }
} 
```

XAML

```
<Window x:Class="WpfStaticDataBinding.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:local="clr-namespace:WpfStaticDataBinding"
    Title="MainWindow" Height="157" Width="302">
<Window.Resources>
    <ResourceDictionary>
        <x:Array x:Key="MyDumbMockedList" Type="local:MockRecord">
            <local:MockRecord FirstName="Fred" LastName="Flintstone" Email="fred@noemail.org" />
            <local:MockRecord FirstName="Wilma" LastName="Flintstone" Email="wilma@noemail.org" />
            <local:MockRecord FirstName="Barney" LastName="Rubble" Email="barney@noemail.org" />
        </x:Array>
    </ResourceDictionary>
</Window.Resources>
<Grid>
    <DataGrid  Margin="10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
               ItemsSource="{Binding Source={StaticResource MyDumbMockedList}}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-06T20:45:04.323

您可以在 XAML 中处理静态数据，是的，但是您需要为记录格式创建一个简单的类。例如，您可以创建这个类文件：

```
namespace TestNamespace
{
    public class MockRecord
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }
    }
} 
```

现在在您的 XAML DataGrid 中，您可以执行以下操作：

```
<DataGrid xmlns:local="clr-namespace:TestNamespace">

    <DataGrid.Columns>
        <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" />
        <DataGridTextColumn Header="Rate" Binding="{Binding LastName}" />
        <DataGridTextColumn Header="Cost" Binding="{Binding Email}" />
    </DataGrid.Columns>

     <!-- Static Data which will automatically go in the datagrid -->
     <local:MockRecord FirstName="Fred" LastName="Flintstone" Email="fred@noemail.org" />
     <local:MockRecord FirstName="Wilma" LastName="Flintstone" Email="wilma@noemail.org" />
     <local:MockRecord FirstName="Barney" LastName="Rubble" Email="barney@noemail.org" />
</DataGrid> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T01:34:32.827

检查此[MSDN 页面上的示例部分](https://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath(v=vs.100).aspx)

由于datagrid使用了类似于Combobox或ListBox的ItemsControl，所以datagrid应该是相同的逻辑。在该示例中，他们基本上在纯 XAML 中创建了一个完整的对象集合。

```
<XmlDataProvider x:Key="Employees" XPath="/Employees/*">
  <x:XData>
    <Employees xmlns="">
      <Employee Name="Terry Adams" Type="FTE" EmployeeNumber="1" />
      <Employee Name="Claire O&apos;Donnell" Type="FTE" EmployeeNumber="12345" />
      <Employee Name="Palle Peterson" Type="FTE" EmployeeNumber="5678" />
      <Employee Name="Amy E. Alberts" Type="CSG" EmployeeNumber="99222" />
      <Employee Name="Stefan Hesse" Type="Vendor" EmployeeNumber="-" />
    </Employees>
  </x:XData>
</XmlDataProvider>

<DataTemplate x:Key="EmployeeItemTemplate">
  <TextBlock Text="{Binding XPath=@Name}" />
</DataTemplate>

...

<ListBox Name="employeeListBox"
         ItemsSource="{Binding Source={StaticResource Employees}}"
         ItemTemplate="{StaticResource EmployeeItemTemplate}"
         SelectedValue="12345"
         SelectedValuePath="@EmployeeNumber"/>

<TextBlock Text="{Binding ElementName=employeeListBox, 
                  Path=SelectedValue}"/> 
```

# python - 如何从 Pymongo 执行 JS 脚本文件？

> ID：10230794
> 
> 赞同：2
> 
> 时间：2012-04-19T14:54:17.097
> 
> 标签：python, mongodb, pymongo

我在 Javascript 脚本文件中实现了我的 MongoDB 数据库的 MapReduce 作业。我已经从命令行和 Mongo shell ( `load("MR_stack.js")`) 对其进行了测试。现在我在一个更大的应用程序中使用 Pymongo 来访问 Mongo 数据库。如何`MR_stack.js`从 Pymongo 中执行我的脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:33:01.080

数据库对象有一个`eval`方法：

[http://api.mongodb.org/python/current/api/pymongo/database.html](http://api.mongodb.org/python/current/api/pymongo/database.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:59:07.777

好吧，您最喜欢的选择是阅读现有文档：

[http://api.mongodb.org/python/2.1/examples/map_reduce.html](http://api.mongodb.org/python/2.1/examples/map_reduce.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-30T09:06:34.090

从 bson 导入二进制，代码

您可以使用此库来运行您的 javascript mapreduce 代码，如下所示

```
map = code("""your mapreduce code""")

reducer = code("""your mapreduce code""")

emp = db.orders.map_reduce(mapper, reducer, "moid_details") 
```

# bash - 使用 awk 解析 CSV 文件时，为什么会忽略空单元格？

> ID：10230795
> 
> 赞同：2
> 
> 时间：2012-04-19T14:54:17.270
> 
> 标签：bash, csv, awk

我有一些`awk`用于解析 CSV 文件的脚本。我注意到，如果一个单元格是空的，`awk`只需移动到下一个单元格。这意味着，如果我要求它读取第 4 列，但该单元格为空，它会打印第 5 列中的数据，例如：

```
echo "1@2@3@@5" | awk -F "@*" '{print $4}' 
```

我的预期结果是它不会打印任何内容，因为第 4 列是空的。

*   为什么要`awk`跳过第 4 列？
*   我怎样才能`awk`不忽略空列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T14:57:51.493

问题不是你想的那样。awk 没有忽略空单元格；它将该行解析为 4 个字段而不是 5 个。

```
[me@home]$ echo "1@2@3@@5" | awk -F "@*" '{print NF}'
4 
```

那是因为您将`@*`其用作字段分隔符，它允许一个或多个连续`@`的字段分隔符（`@`, `@@`, `@@@`, ... 都是有效的字段分隔符）。

尝试`-F "@"`改用。

```
[me@home]$ echo "1@2@3@@5" | awk -F "@" '{print NF}'
5
[me@home]$ echo "1@2@3@@5" | awk -F "@" '{print $4}'

[me@home]$ echo "1@2@3@@5" | awk -F "@" '{print $5}'
5 
```

# iphone - iphone模拟器的亮度可调吗？

> ID：10230796
> 
> 赞同：14
> 
> 时间：2012-04-19T14:54:20.543
> 
> 标签：iphone, ios-simulator, brightness, screen-brightness

我尝试使用用户建议的大多数正确答案来调整 iphone 的亮度（即`[[UIScreen mainScreen]setBrightness:0.0];`），但模拟器没有改变它的亮度。iphone模拟器的亮度可调吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-19T15:00:53.287

iPhone模拟器亮度不可调，必须在真机上试试！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T15:02:00.977

iPhone 模拟器不是硬件模拟器。它模拟了一些硬件功能，但主要是 iOS 模拟器。您需要注册一个设备并进行测试，以确认您的代码是否正常工作。

# r - R：使用 nls 将高斯峰拟合到密度图数据

> ID：10230801
> 
> 赞同：1
> 
> 时间：2012-04-19T14:54:44.750
> 
> 标签：r

我正在尝试使用以下代码将两个高斯峰值拟合到我的密度图数据中：

```
model <- function(coeffs,x)
{
    (coeffs[1] * exp( - ((x-coeffs[2])/coeffs[3])**2 ))

}

y_axis <- data.matrix(den.PA$y)
x_axis <- data.matrix(den.PA$x)
peak1 <- c(1.12e-2,1075,2) # guess for peak 1
peak2 <- c(1.15e-2,1110,2) # guess for peak 2

peak1_fit <- model(peak1,den.PA$x)
peak2_fit <- model(peak2,den.PA$x)

total_peaks <- peak1_fit + peak2_fit
err <- den.PA$y - total_peaks

fit <- nls(y_axis~coeffs2 * exp( - ((x_axis-coeffs3)/coeffs4)**2 ),start=list(coeffs2=1.12e-2, coeffs3=1075, coeffs4=2))
fit2<- nls(y_axis~coeffs2 * exp( - ((x_axis-coeffs3)/coeffs4)**2 ),start=list(coeffs2=1.15e-2, coeffs3=1110, coeffs4=2))

fit_coeffs = coef(fit)
fit2_coeffs = coef(fit2)

a <- model(fit_coeffs,den.PA$x)
b <- model(fit2_coeffs,den.PA$x)

plot(den.PA, main="Cytochome C PA", xlab= expression(paste("Collision Cross-Section (", Å^2, ")")))
lines(results2,a, col="red")
lines(results2,b, col="blue") 
```

这给了我以下情节：

![在此处输入图像描述](../Images/4eaf655089e9937db299203c78400e31.png)

这就是我的问题所在。我相互独立地计算拟合，并且高斯峰相互叠加。我需要`err`输入应该返回 6 个系数的变量`nls`，然后我可以从中重新建模高斯峰以适应绘图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:23:55.603

我一发布问题，答案就来了。改变适合这个：

```
fit <- nls(y_axis~(coeffs2 * exp( - ((x_axis-coeffs3)/coeffs4)**2)) + (coeffs5 * exp( - ((x_axis-coeffs6)/coeffs7)**2)), start=list(coeffs2=1.12e-2, coeffs3=1075, coeffs4=2,coeffs5=1.15e-2, coeffs6=1110, coeffs7=2)) 
```

给出：

![在此处输入图像描述](../Images/d89bdf79d642c520f160b654af4056fc.png)

一个不优雅的解决方案，但它确实完成了工作。

# jquery - 编辑时出现路由错误（Rails 3.2）

> ID：10230802
> 
> 赞同：0
> 
> 时间：2012-04-19T14:54:45.893
> 
> 标签：jquery, ruby-on-rails-3, routes, edit

我正在制作物品，它们属于特定用户。我正在做不同的操作，一切正常（项目使用正确的用户 ID、图像上传等制作）。

现在对于编辑操作，一切正常，页面被渲染，当前项目信息被填写。如果我然后点击“更新”按钮，我会收到一个路由错误。（没有路线匹配 [POST] "/items/6"）

我的控制器 items_controller.rb

```
# items_controller.rb
#-------------------  
class ItemsController < ApplicationController
  before_filter :signed_in_user
  respond_to :html, :js

  def edit
   @item = current_user.items.find(params[:id])
   @categorys = current_user.items.group(:category)
  end

  def update
    if @item.update_attributes(params[:item])
       redirect_to items_path
    else
      render 'edit'
    end
  end
end 
```

@item 变量从 ID 中获取当前项目，然后 @categorys 将显示用户可以从中选择的已使用类别。

现在我的**edit.html.erb 文件**（它很长我使用引导程序）

```
<%= provide(:title, 'Edit Item') %>
<h1>Edit Item</h1>
<div class="row">
  <div class="span7">
    <%= form_for(@item, html: {class: "form-vertical"}) do |f| %>
        <fieldset>
          <span class="legend">Please pick a logo that represents the item.</span>
          <%= render 'error_messages' %>
          <div class="control-group">
            <label class="control-label" for="name">1\. Give your item a name. Please don't include the volume of the
              item.</label>

            <div class="controls">
              <%= f.text_field :name, size: nil, class: 'input-xlarge', id: 'name' %>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="logo">2\. Select a Logo for the item (this will help identifying the
              item)</label>

            <div class="controls">
              <%= image_tag @item.logo.url(:original), alt: @item.name %>
              <%= f.file_field :logo, size: nil, id: 'logo', 'accept' => 'image/*' %>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="category">3\. Type the name of a new category or click on an
              existing</label>
            <ul class="breadcrumb category-select">
              <% @categorys.each do |c| %>
                  <li><a href="#"><%= c.category %></a></li>
              <% end %>
            </ul>
            <div class="controls">
              <%= f.text_field :category, size: nil, class: 'input-xlarge', id: 'category' %>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">4.Specify how much 1 quantity is and how many items you have in stock at this
              moment.<strong>Don't use this for updating the stock, please go to stock!</strong><br>
              For example: a bottle of coke 0.25l and I have 24 of them.</label>

            <div class="form-horizontal category-stock">
              <div class="control-group">
                <label class="control-label" for="quantity">Quantity (l)</label>

                <div class="controls">
                  <div class="input-append">
                    <input class="span1" id="quantity" name="quantity" type="text">
                    <span class="add-on">l</span>
                  </div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="amount">Amount (#)</label>

                <div class="controls">
                  <div class="input-append">
                    <input class="span1" id="amount" name="amount" type="text">
                    <span class="add-on">#</span>
                  </div>
                </div>

              </div>
            </div>

            <%= f.text_field :stock, size: nil, type: 'hidden' %>

            <div class="form-actions category-stock">
              <%= f.submit "Edit Item", class: "btn btn-large btn-primary" %>
            </div>
          </div>

        </fieldset>

    <% end %>
  </div>
</div> 
```

我的 routes.rb 文件

```
root to: 'sessions#new'

  resources :items do
    member do
      get :category
    end
  end
  resources :events

  resources :ei_relationships, only: [:create, :destroy]

  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  match '/signup', to: 'users#new'
  match '/signout', to: 'sessions#destroy', via: :delete 
```

我在服务器中获得的日志：

```
Started GET "/items/6/edit" for 127.0.0.1 at 2012-04-20 00:34:34 +0200
Processing by ItemsController#edit as HTML
  Parameters: {"id"=>"6"}
  User Load (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = '5le_BlKtwTQWeS15pzlCGQ' LIMIT 1
  Item Load (0.0ms)  SELECT "items".* FROM "items" WHERE "items"."user_id" = 1 AND "items"."id" = ? LIMIT 1  [["id", "6"]]
  Rendered shared/_error_messages.html.erb (0.0ms)
  Item Load (1.0ms)  SELECT "items".* FROM "items" WHERE "items"."user_id" = 1 GROUP BY category
  Rendered items/edit.html.erb within layouts/application (8.0ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 77ms (Views: 73.0ms | ActiveRecord: 1.0ms)

Started POST "/items/6" for 127.0.0.1 at 2012-04-20 00:34:47 +0200

ActionController::RoutingError (No route matches [POST] "/items/6"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms) 
```

我认为这就是所有文件。就像我说的一切正常，但按下编辑按钮时似乎只有编辑功能被破坏。

谢谢！

* * *

# 编辑

好吧，经过一番挖掘，我发现了问题。我使用 jquery 来更新隐藏输入，该输入是 2 个输入字段的乘积。代码如下。真的不明白为什么这段代码会弄乱rails路由..

```
// Calculate the stock from the 2 fields and insert it in the hidden field
        $('.category-stock').find('input').on("click select change", function () {
            $.calculateStock();
        });
        $.calculateStock = function () {
            var quantity = parseFloat($('input[name="quantity"]').val());
            var amount = parseFloat($('input[name="amount"]').val());

            var result = quantity * amount;
            if (isNaN(result)) {
                result = 0;
            }

            $('input[type="hidden"]').val(result);
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:26:13.387

我没有看到您的更新按钮标记，但听起来好像您正在尝试通过发送帖子进行更新。您的 ItemsController#update 操作不响应 post，而是响应 put。

因此，与您的更新按钮关联的 form_for 需要看起来像这样：

```
<%= form_for(@item, html: {class: "form-vertical", method: "put"}) do |f| %> 
```

# android - gridview 上的手势并不总是有效

> ID：10230803
> 
> 赞同：2
> 
> 时间：2012-04-19T14:54:49.157
> 
> 标签：android, gridview, calendar, gesture

我有一个带有gridview 的日历，并且更改月份应该使用gridview 上的手势（甩动）。从左到右一甩到上个月，从右到左一甩到下个月。第一个有效，第二个并不总是有效，它检测到从左到右的翻转（40-50％）。我正在使用标准的联机功能，并且我还有另外两个带有箭头的按钮，表示更改月份的另一个选项。这些按钮工作得很好，如果我在 imageview 或 textview 或任何不是 gridview 的东西上使用 onfling 功能，它工作得很好。

```
 class MyGestureDetector extends SimpleOnGestureListener
    {
        private static final int SWIPE_MIN_DISTANCE = 40;
        private static final int SWIPE_MAX_OFF_PATH = 250;
        private static final int SWIPE_THRESHOLD_VELOCITY = 200;

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
        {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;

            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
            {
                //Log.i("Swipe", "Right to Left");
                //Log.i("Swipe", "Swipe rowid2" + selected_row_id2 + "set to true");
                gestureDirection = "rtl";
                Toast toast = Toast.makeText(getApplicationContext(), "RTL", 3500);
                toast.show();
                return true;
            }
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
            {
                //Log.i("Swipe", "Left to Right");
                //Log.i("Swipe", "Swipe rowid" + selected_row_id2 + "set to false");
                gestureDirection = "ltr";
                Toast toast2 = Toast.makeText(getApplicationContext(), "LTR", 3500);
                toast2.show();
                return true;
            }
            return false;
        }
    } 
```

正如我所提到的，它是一个标准的 onFLing 函数，但是从右到左的弹跳有时表现得好像我从左到右弹跳一样，而不是更改到下个月，而是回到上个月。这应该是不可能的，因为`(e1.getX() - e2.getX())`不应该允许这样做。我注意到如果我从右到左的投掷很短（但当然比 SWIPE_MIN_DISTANCE 大）它总是可以工作，但是例如如果我的投掷的大小几乎是 3/4 屏幕，它有时会表现不正确。另一个有趣的事情，它总是在模拟器上工作，在手机上检测到问题。有人遇到过这个问题吗？

# ruby-on-rails - 如何在 Rails 上将服务器时间更改为客户端时间？

> ID：10230810
> 
> 赞同：0
> 
> 时间：2012-04-19T14:55:27.310
> 
> 标签：ruby-on-rails, heroku

所以我的最终目标是让 Heroku 服务器的 Time.now 与您从 JavaScript 执行 new Date.now() 的时间相同。到目前为止，我所做的是从 JavaScript 中捕获时区偏移，并在 Rails 上设置 Time.zone 并使用适当的客户端时区，所以现在 Time.zone 是正确的时区。但是，Time.now 仍然反映实际时区，而不是输入 Time.zone 的时区。我想这不是我一开始就应该做的。

所以再一次，我想要的只是服务器时间来反映客户端时间，所以任何诸如 Time.now 或 DateTime.now 或 Date.today 之类的操作都将与客户端时间一起显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:05:07.023

*您应该在显示*时间时应用 UTC 偏移量。

所有服务器端时间计算或存储都应以 UTC 完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T07:53:07.823

检查这个

```
1.8.7 :001 > Time.zone
 => #<ActiveSupport::TimeZone:0xb740d1b8 @tzinfo=#<TZInfo::TimezoneProxy: Etc/UTC>, @utc_offset=nil, @name="UTC", @current_period=nil> 
1.8.7 :002 > Time.now
 => Fri Apr 20 13:13:53 +0530 2012 
1.8.7 :003 > Time.zone.now
 => Fri, 20 Apr 2012 07:43:59 UTC +00:00 
1.8.7 :004 > Time.zone = "Helsinki"
 => "Helsinki" 
1.8.7 :005 > Time.zone
 => #<ActiveSupport::TimeZone:0xb70ab830 @tzinfo=#<TZInfo::TimezoneProxy: Europe/Helsinki>, @utc_offset=nil, @name="Helsinki", @current_period=nil> 
1.8.7 :006 > Time.now
 => Fri Apr 20 13:14:48 +0530 2012 
1.8.7 :007 > Time.zone.now
 => Fri, 20 Apr 2012 10:45:10 EEST +03:00 
1.8.7 :008 > Time.zone.now.to_time.strftime("%c").to_datetime
 => Fri, 20 Apr 2012 10:47:01 +0000 
1.8.7 :009 > 
```

所以`Time.zone.now.to_time.strftime("%c").to_datetime`会给你用户时区的当前时间作为UTC

[Time.now](http://apidock.com/ruby/Time/now/class)总是在你的服务器的时区给出时间。[Time.zone.now](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-now)给出指定时区的时间。

谢谢，阿米特帕特尔

# ruby - 如何从ruby中的哈希映射中提取值并存储在数组中？

> ID：10230811
> 
> 赞同：0
> 
> 时间：2012-04-19T14:55:28.470
> 
> 标签：ruby, arrays, hash

我已经有一个学校的哈希图，其中键是学生的名字。我想提取所有信息并以学生`School_ID`作为主键创建哈希映射。我收到错误

> main:object 的未定义局部变量或方法“key1”

```
key1 = Array.new
array2 = Array.new

def print_info(school_hash)         
  school_hash.each do |student|     #school_hash  has key as first name
                                    #student[0] contains First Name student[1] all info
    key1.push(student[1].School_ID) #save school_id separately to use as a key
    array2.push(student[1])         # all infos including Address, Grade, School_ID, Sports
  end
  new_hash = Hash[key1.zip(array2)]
  printf("%s",new_hash)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:01:12.007

将 key1 和 array2 移动到 def 块中或将它们作为参数传入。Ruby def 块不是闭包——它们不能访问在它们之外定义的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:02:11.710

当您在 ruby​​ 中定义一个新方法时，将创建一个新范围，请参阅：[元编程访问局部变量](https://stackoverflow.com/questions/4008009/metaprogramming-access-local-variables/10056669#10056669)以获取更多详细信息。

`def print_info(school_hash)`例如，您可以使用 lambda而不是

```
school_hash = lambda do |school_hash|
  # ..your method body
end

school_hash.call(hash) 
```

其他解决方案 - 只需输入：

```
key1=Array.new
array2=Array.new 
```

在方法的主体中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:39:14.430

您可以更改`key1`为`@key1`和。`array2``@array2`

# ios - 在 Core Data 中存储 NSURL 的正确方法是什么？

> ID：10230816
> 
> 赞同：5
> 
> 时间：2012-04-19T14:55:44.580
> 
> 标签：ios, cocoa, core-data, foundation, nsvaluetransformer

我正在尝试在 Core Data 对象中存档/取消存档 NSManagedObjectID，以便下次我的应用程序启动时，我可以检索这些 ID 并使用它们来获取特定对象。

我尝试像这样“归档”ID：

```
//defaultConfiguration is an NSManagedObject defined elsewhere and it works just fine...    
// and newObject is also properly initialized, bound to a context,etc...

ArchivedID* newID = [NSEntityDescription insertNewObjectForEntityForName:@"ArchivedID" inManagedObjectContext:managedObjectContext];
[self.defaultConfiguration addArchiveIDObject:newID];
newID.idURI = [[newObject objectID] URIRepresentation];
[managedObjectContext save:&error]; 
```

然后像这样取消归档（我只是去 [anyObject] 因为我正在测试，此时只有一个）：

```
NSManagedObjectID* ID = [managedObjectContext.persistentStoreCoordinator managedObjectIDForURIRepresentation:[defaultConfiguration.archiveID anyObject]]; 
```

但是当我尝试像上面那样获取 URL 时，我得到以下异常：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ArchivedID relativeString]: unrecognized selector sent to instance 0x7f59f20' 
```

实体中的属性是通过 Xcode 设置为“可转换”的，我将 Xcode 中的转换器值字段留空，因为核心数据文档似乎暗示如果为空则使用默认转换器。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:01:06.690

您可以在不存储 URL 的情况下解决此问题。考虑在模型中添加一个布尔标志并将您希望检索的对象标记为真，然后在您的应用程序下次启动时获取标记的对象。

但是，您可以尝试获取 URL 的字符串版本`-absoluteString`并将其存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:10:58.563

好的......编码已经连续 14 小时......我是一个......呃......白痴：

我忘记访问 ArchivedID 对象中的属性。那是：

```
NSManagedObjectID* ID = [managedObjectContext.persistentStoreCoordinator managedObjectIDForURIRepresentation:[defaultConfiguration.archiveID anyObject]]; 
```

应该

```
NSManagedObjectID* ID = [managedObjectContext.persistentStoreCoordinator managedObjectIDForURIRepresentation:[[defaultConfiguration.archiveID anyObject] idURI]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:14:34.460

嗯。似乎有一种更简单的方法可以使用 CoreData 执行此操作。请记住，CoreData 是一个对象图。它擅长跟踪关系。

为什么不在 CoreData 中拥有一个与您喜欢的对象保持一对多关系的实体呢？然后，您可以在对象集合上插入/删除/搜索/迭代/任何内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T15:20:01.690

我喜欢@kevboh 的建议。您也可以考虑将`objectID`特定`NSManagedObject`s 的 s 存储在`NSUserDefaults`. 例如：

```
[[NSUserDefaults standardUserDefaults] setObject:featuredNSManagedObjectIDArray
                                          forKey:@"FeaturedNSManagedObjectIDs"]; 
```

# javascript - ie9 的 Javascript 错误 - flickrshow 画廊

> ID：10230819
> 
> 赞同：0
> 
> 时间：2012-04-19T14:55:50.077
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9

我有一个页面，上面有两个 flickrshow 画廊。它们在 FF、Chrome、Safari、ie6+ 中都可以正常工作，但在 ie9 中则不行。我正在通过使用解决各种 js 问题

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

模仿ie8。问题是js仍然有一个错误，即每次加载都会抛出“网页错误，你想调试”消息。

使用调试器，错误是：

```
SCRIPT5007: Unable to get value of the property 'removeChild': object is null or undefined 
flickrshow-7.2.min.js, line 11 character 4468 
```

flickrshow js 的行突出显示错误：

```
a.elements.script.parentNode.removeChild(a.elements.script) 
```

请给点建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:17:44.420

由于您没有为代码提供太多上下文。尝试记录`a.elements.script.parentNode`并查看您是否真的得到了您期望的元素`a.elements.script`。`a`从我假设的错误来看，因为它与 IE 没有正确获取 HTML 元素有关。但是，`a`我假设它可能是某事的变量，但我不确定是什么。

# python - 将多行代码段粘贴到 IPython

> ID：10230820
> 
> 赞同：12
> 
> 时间：2012-04-19T14:55:51.153
> 
> 标签：python, ipython, multiline, paste

我过去使用过 IPython，我曾经能够复制和粘贴多行命令，例如`for`IPython 中的循环。*在安装 Python(x,y) 2.7.2.1 后在我的新 PC 中工作时，我可以使用右键单击 → 编辑 → 粘贴*来粘贴多行代码段，但不能像以前那样使用`CTRL`+ `P`。使用`CTRL`+时，`P`仅粘贴多行代码段的第一行。有人可以帮忙吗？我查看了设置和文档无济于事。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-09T18:50:25.297

在 IPython 命令行中键入 %paste。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-02-09T17:07:47.893

您可以使用`%cpaste`IPython shell（这也是 Django 的管理 shell 使用的）。如果您想了解更多功能，请键入`%quickref`。

# jquery - Fancybox 2 是否适用于早期版本的 jquery？

> ID：10230823
> 
> 赞同：0
> 
> 时间：2012-04-19T14:55:57.370
> 
> 标签：jquery, fancybox

我在安装 Fancybox 2 的说明中看到了对 jQuery 1.7 的引用。有谁知道是否可以使用早期版本的 jQuery，特别是 v1.3.2？

我在其他网站上使用最新版本的 jQuery。但是，我有一个站点正在使用带有旧版本 jQuery 的旧 CMS；当然，更换版本并不容易。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:56:18.660

fancyBox2 使用“delegate”（从 jQuery 1.4.2 开始），如果使用 jQuery 1.6 之前的版本，这个错误 - [http://bugs.jquery.com/ticket/6913](http://bugs.jquery.com/ticket/6913) - 会破坏幻灯片。

始终建议您使用最新版本的 jQuery。

# ruby-on-rails - 如何将 simple_form 与普通的 Ruby 类一起使用？

> ID：10230825
> 
> 赞同：1
> 
> 时间：2012-04-19T14:55:59.667
> 
> 标签：ruby-on-rails, simple-form

我有一个信用卡类，我想在各种属性上使用 simple_form f.input 方法以用于验证等，但我收到有关 model_name 的错误。有没有一种简单的方法可以做到这一点？

```
= simple_form_for @credit_card, url: join_network_path do |f|
    .payment-errors
  = f.input :card_number
  = f.input :cvc
  = f.input :expiry_month
  = f.input :expiry_year
  = f.submit 'Join Network' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:03:23.567

您需要符合 ActiveModel API...

有效地：

```
class CreditCard
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end
end 
```

一些背景：

1.  [http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)
2.  [http://railscasts.com/episodes/219-active-model](http://railscasts.com/episodes/219-active-model)

# java - 如何将应用程序/用户数据传递给 ChannelHandler Netty

> ID：10230830
> 
> 赞同：1
> 
> 时间：2012-04-19T14:56:04.857
> 
> 标签：java, netty

当您设计一个将连接到许多服务器的客户端时，例如爬虫。

您将编写类似的代码：

```
// the pipeline
public class CrawlerPipelineFactory  implements ChannelPipelineFactory {
    public ChannelPipeline getPipeline() throws Exception {
        return Channels.pipeline(new CrawlerHandler());
    }
}

// the channel handler
public class CrawlerHandler extends SimpleChannelHandler {
    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        // ...
    }
}

// the main :
public static void main(){
    ChannelFactory factory = new NioClientSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool());

    ClientBootstrap scannerBootstrap = new ClientBootstrap(factory);
    scannerBootstrap.setPipelineFactory(new CrawlerPipelineFactory());

    while(true){
        MyURL url = stack.pop();
        ChannelFuture connect = scannerBootstrap.connect(url.getSocketAddress()); 
    }
} 
```

现在，当您在 ApplicationHandler 中时，实现您的 SimpleChannelHandler 或 WhatEverStreamHandler 的东西（在示例中为 CrawlerHander）您获得的唯一信息是您正在连接的 socketAdress，您可以在“public void channelConnected()”函数中恢复.

好的，但是如果我想恢复一些用户数据，比如您在我的代码示例中看到的 MyURL 对象，该怎么办？

我使用了一个肮脏的黑客，我使用了 Map<"ip:port",MyURL> 所以我可以在 channelConnected 中检索相关数据，因为我知道我连接的 ip:port 。

这个 hack 真的很脏，如果你同时连接到同一个服务器，它就行不通（或者你必须绑定到本地端口并使用像“localport:ip:remoteport”这样的键，但它太脏了）。

所以我正在寻找将数据传递给 CrawlerHander 的好方法是什么？

如果我们可以通过引导程序的 connect() 方法传递这些数据，那就太酷了。我知道我可以在我的 ChannelPipelineFactory.getPipeline() 中传递参数，因为它是通过 connect() 调用的。但现在我们不能，所以这是我使用的另一个肮脏的黑客：

编辑：

```
// the main
while(!targets.isEmpty()){
    client.connect("localhost",111); // we will never connect to localhost, it's a hack
}

// the pipleline
public ChannelPipeline getPipeline() throws Exception {
    return Channels.pipeline(
        new CrawlerHandler(targets.pop()) // I specify each new host to connect here
    );
}

// in my channel handler
// Now I have the data I want in the constructor, so I m sure I get them before everything is called
public class CrawlerHandler extends SimpleChannelHandler {
    ExtraParameter target;
    public CrawlerHandler(ExtraParameter target) {
        this.target =  target;

// but, and it's the most dirty part, I have to abort the connection to localhost, and reinit a new connection to the real target
    boolean bFirstConnect=true;
    @Override
    public void connectRequested(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        if(bFirstConnect){
            bFirstConnect = false;
            ctx.getChannel().connect(target.getSocketAddr());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-26T15:14:29.483

您可以通过 Bootstrap 将变量传递给 Channel。

[Netty.io 4.1](https://netty.io/4.1/api/io/netty/bootstrap/AbstractBootstrap.html#attr-io.netty.util.AttributeKey-T-) & [SO - 在创建之前向通道添加属性](https://stackoverflow.com/questions/53845884/adding-an-attribute-to-a-channel-before-creation)

很晚才更新到这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:33:46.613

您可以使用 ChannelLocal 或在 ChannelHandlerContext 中（或在最新的 Netty 3.x 中的自己的 Channel 中）使用连接未来侦听器将数据传递给新连接的通道/通道处理程序。在下面的示例中，使用了 ChannelLocal。

```
public class ChannelDataHolder {
  public final static ChannelLocal<String> CHANNEL_URL = new ChannelLocal<String>(true);
}

  // for each url in bootstrap

  MyURL url = ....; 
  ChannelFuture cf = scannerBootstrap.connect(url.getSocketAddress());

  final String urlString = url.getUrl();

  cf.addListener(new ChannelFutureListener() {
            @Override
            public void operationComplete(ChannelFuture future) throws Exception {
                ChannelDataHolder.CHANNEL_URL.set(future.getChannel(), urlString);
            }
   });

  //In the handler

 public class CrawlerHandler extends SimpleChannelHandler {
   @Override
   public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
      String urlString = ChannelDataHolder.CHANNEL_URL.get(ctx.getChannel()); 
      // ...use the data here
   }
 } 
```

注意：代替 ChannelLocal，您可以使用设置和获取数据

*   ChannelHandlerContext.setAttachment()/getAttachment()

*   最新 3.x 版 Netty 中的 Channel.setAttachment()/getAttachment()

但是这两种方法都不支持类型安全。

# asp.net-mvc-3 - 未使用 OutputCache 属性缓存的 MVC 3 子操作

> ID：10230831
> 
> 赞同：1
> 
> 时间：2012-04-19T14:56:06.060
> 
> 标签：asp.net-mvc-3, outputcache

我的子操作没有被缓存。我不知道为什么。

我的母版页调用子操作：

```
@Html.Action("Header", "Layout", new { selectedMarket = Model.SelectedMarket })

    [ChildActionOnly]
    [OutputCache(Duration=60)]
    public PartialViewResult Header(Guid selectedMarket)
    {
        var model = _marketService.GetHeaderViewModel(selectedMarket);
        return PartialView(model);
    } 
```

执行此子操作，并在每个请求上重新呈现部分操作。

注意：我可以使用 OutputCache 成功缓存整个页面。只是甜甜圈洞缓存对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:18:22.220

Try setting the OutputCacheAttribute in the following manner:

```
[OutputCache(Duration=3660, VaryByParam="selectedMarket")] 
```

This will create a separate cache for each selectedMarket (I suppose that is what you need). Let me know if that helps.

# java - java.lang.NullPointerException 未显示错误在哪里

> ID：10230834
> 
> 赞同：0
> 
> 时间：2012-04-19T14:56:07.893
> 
> 标签：java, nullpointerexception

我正在使用他们给我的代码来尝试解决错误，但直到现在，抛出的异常只会将我发送到

```
log.error("Error saving data: " + e.toString()); 
```

是。我不知道如何找出正确的行，因为 e.printStackTrace() 不输出任何内容。该功能具有以下部分：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {...

try {...
} catch (Exception e) {

       e.printStackTrace();
       log.error("Error al almacenar los datos de usuario: " + e.toString());
    } 
```

但在中间我找不到任何对异常的引用。我怎样才能让“catch”部分告诉我错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:58:41.507

您需要将异常 stackTrace 传递给您的记录器。如果您键入 e.printStackTrace() 它会将堆栈跟踪放到 System.err

正确的方法是写东西，

log.error("你的消息",e);

log4j 将处理对象 e，并在您的记录器中打印 stackTrace。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:02:06.493

你找错地方了。

堆栈跟踪将写入标准错误所在的文件中。

您没有说您使用的是哪个 AS（如果有的话），但它们中的大多数都有某种 stderr.out 文件。

此外，您可以使用记录器记录异常，如 zaga250 所说：

```
log.error("errrr", e ); 
```

# c# - 设计异常、用法和定义

> ID：10230837
> 
> 赞同：0
> 
> 时间：2012-04-19T14:56:22.417
> 
> 标签：c#, exception, design-patterns

我只是想知道你对在哪里定义、抛出和捕获异常有什么看法，看看是否有关于考虑的共识。

让我举一个例子。假设我有解决方案，在该解决方案中我有 2 个项目：`DomainProject`和`ControllerProject`.

1.  在 DomainProject 中，我有一个用于执行某些查询的存储库，例如，`RepositoryClass`我有以下方法：

    ```
    GetObjectById(int id) { ... } 
    ```

    我在这个项目中定义了一些异常，比如`ObjectNotFoundException`.

2.  在`ControllerProject`我想查询我的存储库中，所以我做了一些看起来像这样的事情：

    ```
    MyObject obj = repo.GetObjectById(11); 
    ```

现在的问题是谁应该负责检查 id 是否确实存在。如果您选择 ControllerProject 应该检查 id 的存在，您最终会得到如下代码：

```
MyObject obj = repo.GetObjectById(11);
if (obj == null) {throw new ObjectNotFoundException();} 
```

但不利的一面是它往往在使用的地方都是重复的`GetObjectById`。当然，在某些情况下，您不会关心是否获得空值，因此不直接在 DomainProject 中抛出异常以某种方式是合法的。但我首先不喜欢重复 if 测试，其次，与我的问题更相关，我不喜欢在当前项目之外使用异常定义。

我觉得应该只在定义它的项目中抛出异常，而其他项目应该只捕获它们。

回到我的例子，我将如何解决这种情况。一个简单的想法是在我的域项目中定义 2 方法。一个抛出异常，一个不抛出异常。我唯一不确定的是我必须使用哪种命名约定：`GetObjectByIdThrowsIfNotFound()`和`GetObjectById()`. 或者我可以只添加一个可选参数`GetObjectById(int id, bool isExceptionThrow = true)`。

您如何看待异常？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:21:34.243

我认为您正在考虑如何让您的设计正确传达意图，这很好。我同意你的疑虑：唯一抛出异常的层应该是定义异常的层。

也就是说，如果 null 返回值不明确，如果将键与`null`. 如果不是（这应该在您的 XML 注释中注明！），那么 null 返回总是意味着相同的事情（未找到值），您可以在域层中为自己节省代码和处理异常的开销。如果“未找到值”是控制器层中真正的异常事件，请在此处定义并抛出异常。

如果 'stored `null`'*有效*`IDictionary<T>`，我使用由:建立的语义模式`bool TryGetObjectById(int id, out object value)`，并且如果 key-not-found 确实异常，我只包含一个抛出异常的`GetObjectById(int key)`变体，并且我想保存调用`Try...`变体所涉及的击键马路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:02:20.573

我经常看到两种模式：

1) 存储库本身应该抛出异常，如果你想处理获取项目的失败，你的调用方法应该包含在 try / catch 块中。我认为这种模式将是您的应用程序的主要候选者，因为处理异常是调用者的责任。我会假设您的存储库没有捕获`SqlException`或抛出任何持久层异常对吗？如果是这样，那么您应该让存储库抛出异常并让它在堆栈中冒泡。

如果不....

2）您暴露包装在容器中的对象以告诉您失败或成功：

```
public class RepositoryItemContainer<DataType>
{
    public DataType Object { get; set; }
    public bool WasFound { get; set; }
} 
```

然后，不只是返回值，而是返回这个包装器，然后代码可以决定它想要做什么：

```
var repoItem = _repo.GetObjectById(11);

if(repoItem.WasFound)
   var item = repoItem.Object;

else
   throw new ApplicationSpecificException("Wasnt found yo!") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:03:13.297

这里只是几个考虑因素：

1.  `Exceptions`用于*特殊* 情况。因此，如果您认为 DB 中没有对象是一种*特殊*情况，我会说按照您现在实现它的方式进行。

2.  如果不是例外情况，请以不引发 and`Exception`而是返回的方式实现一个方法`null`，以防`id`我们查询丢失，自然。对于将使用您实现的 repo 类的开发人员来说，这似乎很自然并保持预期的行为。

3.  您可以添加一种`ContainsId(long id)`方法，首先检查`id`DB 中是否存在所需的。也可能是一个不错的选择，但我个人更喜欢第二点。

希望这可以帮助。

# javascript - 如何在javascript中禁用调整html页面的大小

> ID：10230842
> 
> 赞同：-6
> 
> 时间：2012-04-19T14:56:38.767
> 
> 标签：javascript, html

如何能够在onLoad方法中禁用javascript中html页面的调整大小请尽快提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:19:52.203

使用模式对话框而不是弹出窗口。作为 HTML 元素，您将能够根据需要控制样式。

# android - Android：小部件和服务

> ID：10230854
> 
> 赞同：0
> 
> 时间：2012-04-19T14:57:20.777
> 
> 标签：android, service, widget

我有一个以 onUpdate 方法开始的小部件，该服务从 Web 读取相同的数据并将其保存到首选项中，然后此服务必须调用小部件的 onUpdate 方法以使用此数据对其进行更新。我使用服务中的此代码

```
Intent i = new Intent();
i.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), 0, i, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarm = (AlarmManager)getApplicationContext().getSystemService(Context.ALARM_SERVICE);
alarm.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(), 5000, pi); 
```

但是这段代码没有调用小部件的 onUpdate 方法……为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:28:13.057

这是更新小部件的代码

```
ComponentName thisWidget = new ComponentName(context, YourAppWidgetprovider.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(context);           manager.updateAppWidget(thisWidget, updateViews); 
```

updateViews 是 RemoteViews 对象。在调用更新之前使用您的数据更新此远程视图。

# java - Web 服务客户端/消费者 - 浏览器或 Webstart/JNLP 或 Swing

> ID：10230856
> 
> 赞同：2
> 
> 时间：2012-04-19T14:57:31.023
> 
> 标签：java, web-services, spring, security, soap

我有一个做很多事情的网络服务。它可以做的事情的一个简单示例（请注意示例）：

*   退货产品清单
*   更新产品价格
*   添加新产品
*   更新现有产品
*   退货商品价格
*   返回产品手册+图片
*   添加产品手册+图片

前 5 个服务非常简单，因为向 SOAP Web 服务发送了一个请求，它要么返回一个列表，要么更新数据库中的现有行或创建一个新行。

最后两个有点棘手，因为它们涉及将二进制文件发送到服务并从服务接收二进制文件。

在服务端实现 SOAP 服务是没有问题的。我已经有了一个框架，我现在只需要实现这些服务。我遇到的问题是如何实现将使用这些服务的客户端。

我一直在阅读有关 SOAP 客户端的信息，并且知道我可以将文件作为 SOAP 附件发送，但我不太明白如何将其转换为 HTTP 请求。

问题：

*   我希望客户端成为 Web 门户，但我不太确定如何从 Web 浏览器调用 Web 服务。这可能吗？
*   浏览器中的 Web 服务调用如何工作？这是一个正常的 HTTP 调用吗？
*   最重要的是，二进制文件的上传/下载如何工作？
*   在保护请求方面，哪个更安全？基于 Web 门户的客户端还是基于胖客户端的客户端？
*   使用 Java Web Start/JNLP 代替 Web 门户或胖客户端有什么优势吗？
*   是否可以在 Web 门户和 Web 启动之间混合和匹配以进行二进制数据传输？
*   从 Web 门户（即从 Web 浏览器）调用 Web 服务是常见的做法吗？

我认为另一种选择是将客户端实现为胖客户端（桌面应用程序）。问题是我在基于 GUI Swing 的应用程序方面经验不足。

该解决方案的一个重要方面是它必须是安全的，因此无论我使用哪种方法都需要使用证书进行保护。大多数服务将使用 Spring 技术实现。我正在为 Web 服务使用 Spring-WS，如果它可以用作 Web 门户，我可能会使用 Spring-MVC。

Web 服务和 Web 应用程序都将在同一个应用程序服务器中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:28:51.657

> “我希望客户端成为 Web 门户，但我不太确定如何从 Web 浏览器调用 Web 服务。这可能吗？”

好吧，如果您的 ws 支持 HTTP（见下文），理论上您可以从浏览器向服务发送请求，但是它将如何处理您的服务方法返回的非原始类型呢？也许你也应该看看 RESTfull 服务。

> “从浏览器调用 Web 服务是如何工作的？它是普通的 HTTP 调用吗？”

这取决于您使用的 Web 服务实现。一些 web 服务，例如 Hessian & Burlap 或 Spring HttpInvoker，支持 http 传输，有些可能不支持。调用将是具有附加参数和附件的普通 http url（我猜 http 的 post 方法是访问 http web 服务的常用方法）。

> “最重要的是，二进制文件的上传/下载如何工作？”

这也取决于。我最近尝试使用[Hessian](http://hessian.caucho.com/#IntroductiontoHessian)上传文件，但是当文件大小达到一定限制（大约 30MB 左右）时它失败了。一个论坛条目告诉我这是由Hessians序列化策略引起的，但我没有找到解决方案。检查您的 ws 是否支持[MTOM](http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism)，就像[CXF](http://cxf.apache.org/)一样，这使我的上传工作正常。在 cxf 主页上也有一个上传图片的示例。

> “在保护请求方面，哪个更安全？基于 Web 门户的客户端还是基于胖客户端的客户端？”

两种客户端类型都从服务器发送/接收数据，因此必须保护连接。使用胖客户端（除了安全令牌和信任策略），您可能还需要自定义登录功能来验证您的客户。所以最后，正确使用技术很重要，正如您所知，如果实施不当，标准的 http 登录也可能非常不安全。

> “使用 Java Web Start/JNLP 代替 Web 门户或胖客户端有什么优势吗？”

使用 WebStart，您将需要构建一个自定义客户端和至少一个页面或 servlet。这是一种自动下载/安装/升级您的自定义客户端的技术。

> “对于二进制数据传输，是否可以在 Web 门户和 Web 启动之间混合和匹配？”

是的。如果您使用的是 Spring，那么很容易让您的客户访问相同的功能。只需将您的普通逻辑添加到服务外观 (@Service)。然后使用 MVC 控制器 (@Controller) 添加浏览器支持，并使用[ServiceExporter](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/remoting.html)添加 ws 支持，例如。

> “从 Web 门户（即从 Web 浏览器）调用 Web 服务是常见的做法吗？”

猜不出来，请参阅 REST 服务及以上。

> “...问题是我在基于 GUI Swing 的应用程序方面经验不足。”

这可能是个问题，但是可以使用 NetBeans 的图形编辑器轻松构建 Swing 应用程序。

> “......无论我使用哪种方法，都需要使用证书进行保护。大部分服务将使用 Spring 技术实现。”

为此，请查看[Spring Security](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity.html)。这很好地集成了您的许多需求。

希望我能帮上忙。

# c++ - 稍后设置 wxTE_PASSWORD

> ID：10230865
> 
> 赞同：1
> 
> 时间：2012-04-19T14:57:56.893
> 
> 标签：c++, wxwidgets

我创建了两个 wxTextCtrl。一个用于登录（loginTxt），另一个用于密码（pwdTxt），两者都有可读的默认消息。

我还安装了 wxEVT_LEFT_DOWN 事件，这样当用户单击 loginTxt 或 pwdTxt 时，默认消息将设置为空字符串

以后可以将 wxTE_PASSWORD 样式设置为 pwdTxt 吗？如果可能，我该怎么做？

我读了 wx.chm 它说，

“请注意，对齐样式​​（wxTE_LEFT、wxTE_CENTRE 和 wxTE_RIGHT）可以在 wxMSW 和 wxGTK 上创建控件后动态更改。wxTE_READONLY、wxTE_PASSWORD 和环绕样式可以在 wxGTK 下动态更改，但不能在 wxMSW 下动态更改。其他样式只能在控件创建期间设置."。

我正在使用 wxWidgets 2.9.3 在 MS Windows 上编写我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:13:48.990

您以后无法在 Windows 上更改它，因为 Microsoft 的控件不支持它。如果您确实需要，我建议创建 2 个不同的控件并显示/隐藏相应的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:39:59.967

仅限 Windows 的解决方案，可能会有用：

```
void Sample::OnBUTTONClick( wxCommandEvent& event )
{
#if defined(__WXMSW__)
    HWND hWnd = (HWND)m_Text->GetHandle();
    SendMessage(hWnd, EM_SETPASSWORDCHAR, 0x25cf, 0); // 0x25cf is ● character
    m_Text->Update();
#endif
} 
```

# wordpress - wordpress 图像附件元数据而不生成缩略图

> ID：10230866
> 
> 赞同：0
> 
> 时间：2012-04-19T14:57:57.660
> 
> 标签：wordpress

我想处理所有附件，但不重新生成缩略图。现在我正在使用 wp_generate_attachment_metadata()..但是由于缩略图创建，这需要很长时间来执行所有帖子附件。我只想序列化元数据数组以加快执行速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:13:11.390

您可以编写自己的此功能版本而无需生成拇指，请看这里： [http ://core.trac.wordpress.org/browser/tags/3.3.1/wp-admin/includes/image.php#L80](http://core.trac.wordpress.org/browser/tags/3.3.1/wp-admin/includes/image.php#L80)

例如 ：

```
function my_generate_attachment_metadata( $attachment_id, $file ) {
    $attachment = get_post( $attachment_id );

    $metadata = array();
    if ( preg_match('!^image/!', get_post_mime_type( $attachment )) && file_is_displayable_image($file) ) {
        $imagesize = getimagesize( $file );
        $metadata['width'] = $imagesize[0];
        $metadata['height'] = $imagesize[1];
        list($uwidth, $uheight) = wp_constrain_dimensions($metadata['width'], $metadata['height'], 128, 96);
        $metadata['hwstring_small'] = "height='$uheight' width='$uwidth'";

        // Make the file path relative to the upload dir
        $metadata['file'] = _wp_relative_upload_path($file);

        // fetch additional metadata from exif/iptc
        $image_meta = wp_read_image_metadata( $file );
        if ( $image_meta )
            $metadata['image_meta'] = $image_meta;
    }

    return apply_filters( 'wp_generate_attachment_metadata', $metadata, $attachment_id );
} 
```

# python - 保存函数以供重复使用而无需重新执行

> ID：10230869
> 
> 赞同：0
> 
> 时间：2012-04-19T14:58:14.397
> 
> 标签：python, function, memory-management

我试图找到一些允许“保存函数”的东西，例如：一旦运行程序（包括一些函数），我们会将函数的地址保存在内存中，我们可以重复使用这些函数而不再执行。你能给我一些想法吗（一般或特别是在 Python、C/C++、...）。我已经用谷歌搜索了这个，但我没有得到它:(。我正在考虑某种内存管理（分配，内存自由，常驻内存......我猜）例如：我有一个地址为“在“（即程序运行时生成）我怎样才能重用它们？！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:01:40.697

嗯，在 Python 中，函数是对象，所以你可以传递它们，分配它们，并从你用来给它们起别名的任何标签中调用它们。您还可以获得 id（内存位置/guid 等价物）。如果您的意思是数据的记忆化/延迟加载，那么在 SO 上和通过 Google 可以使用许多资源来做这类事情。它们通常看起来像：

```
class Foo(object):
    @staticmethod
    def get_val():
        try:
            return Foo.__val
        except AttributeError:
            #do run-once logic here, assign to Foo.__val
            return Foo.__val 
```

# c# - 在 asp.net 中序列化会话状态

> ID：10230880
> 
> 赞同：4
> 
> 时间：2012-04-19T14:58:37.470
> 
> 标签：c#, asp.net, serialization, session-state, nopcommerce

我试图在我们的 nopcommerce 1.9 安装中将会话状态存储在 SQL 而不是 InProc 中。当我对 web.config 进行必要的更改时，我收到此错误：

> “/”应用程序中的服务器错误。
> 
> 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SerializationException：在程序集'Nop.BusinessLogic，Version = 1.9.0.0，Culture = Neutral，PublicKeyToken = null'中键入'NopSolutions.NopCommerce.BusinessLogic.Categories.Category'未标记为可序列化。]
> System.Runtime.Serialization.FormatterServices .InternalGetSerializableMembers(RuntimeType type) +9449041
> System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context) +247
> System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo() +160 System.Runtime.Serialization.Formatters .Binary.WriteObjectInfo.InitSerialize(Type objectType, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter 转换器, SerializationBinder binder) +371
> System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteArray(WriteObjectInfo objectInfo, NameInfo memberNameInfo, WriteObjectInfo memberObjectInfo) +205 System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo) +651
> System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck) +444 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] 标头，布尔 fCheck）+133 System.Web.Util.AltSerialization.WriteValueToStream（对象值，BinaryWriter writer）+1762
> 
> [HttpException (0x80004005): 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则同样的限制也适用。]
> System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1847
> System.Web.SessionState.SessionStateItemCollection.WriteValueToStreamWithAssert(对象值，BinaryWriter writer) +34
> System.Web.SessionState.SessionStateItemCollection.Serialize(BinaryWriter writer) +638
> System.Web.SessionState.SessionStateUtility.Serialize(SessionStateStoreData item,
> System.Web.SessionState.SessionStateUtility.SerializeStoreData(SessionStateStoreData item, Int32 initialStreamSize, Byte[]& buf, Int32& length, Boolean compressionEnabled) +67
> System.Web.SessionState.SqlSessionStateStore.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem) +140
> System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs) +807
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148 System.Web.HttpApplication. ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

有人请告诉我，我不需要序列化 ​​Nopcommerce 中的每个对象来执行此操作！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T15:02:09.310

正如例外所说，您的类型

`NopSolutions.NopCommerce.BusinessLogic.Categories.Category`

不可序列化。我不知道该类型的实现，但您可以尝试使用`[Serializable]`属性来装饰该类型。

**如果你不能这样做，你可以简单地将对象的 id 写入你的会话。**

如果您希望会话存储在 sql server 中，则写入会话的每个对象都需要可序列化。

### 更多信息

*   [Session InProc Mode 到 Session StateServer 的步骤](http://dotnetguts.blogspot.de/2009/06/steps-for-session-inproc-mode-to.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T09:47:00.913

添加`[Serializable]`属性（`<Serializable()>`在 VB 中）会自动使您的类可序列化。您班级中的所有成员也需要可序列化。所以假设你的类中有对象引用。那么这些对象所属的类也需要具有`[Serializable]`属性。基本类型是自动序列化的。

# junit - 冒名顶替者的目的是什么？

> ID：10230882
> 
> 赞同：0
> 
> 时间：2012-04-19T14:58:44.797
> 
> 标签：junit, jmock

我正在关注本教程：http: [//jeantessier.com/SoftwareEngineering/Mocking.html#jMock](http://jeantessier.com/SoftwareEngineering/Mocking.html#jMock)

我正在尝试模拟一堂课。

我不明白冒名顶替者是做什么的？[http://www.jmock.org/javadoc/2.5.1/org/jmock/api/Imposteriser.html](http://www.jmock.org/javadoc/2.5.1/org/jmock/api/Imposteriser.html)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:28:55.657

这在[MockObjectTestCase JavaDoc](http://jmock.org/javadoc/jmock-2.6.0/doc/org/jmock/Mockery.html#setImposteriser%28org.jmock.api.Imposteriser%29)中有描述。本质上，Imposteriser 是一种创建模拟对象的策略。

默认情况下，`MockObjectTestCase`只允许您为接口创建模拟，而不是类。如果你想模拟接口*和*类，你需要告诉`MockObjectTestCase`使用不同的策略来创建模拟：

```
setImposteriser(ClassImposteriser.INSTANCE); 
```

# algorithm - 耐心差异 - 在最后阶段对非唯一行做了什么？

> ID：10230883
> 
> 赞同：2
> 
> 时间：2012-04-19T14:58:49.883
> 
> 标签：algorithm, diff

我有一个基于最长递增子序列的算法，当每个集合中的对象都是唯一的时，它可以很好地解决相关的业务问题，但是当两个集合中存在许多非唯一对象时往往会给出奇怪的结果。

当存在非唯一对象时，使用 Patience Diff 算法（也基于最长递增子序列）的方法似乎可以提供我想要的结果。但是，在我弄清楚 Patience Diff 是否合适之前，如果合适的话，为了将其应用于我的问题，我需要更好地理解算法。

我了解步骤 1 到 3 中会发生什么，但我不清楚步骤 4 中会发生什么。在 1 到 3 之后，现在仍然存在无法匹配的唯一行块和非唯一行。那么接下来会发生什么——假设与文档剩余的第一行/最后一行不匹配，肯定它还没有终止（因为没有更多的唯一行）？或者它是否将一个文档中的每个非唯一块与另一个文档中的每个非唯一块进行比较，并以某种方式选择最佳匹配？

[http://bramcohen.livejournal.com/73318.html](http://bramcohen.livejournal.com/73318.html)

1.  如果它们相同，则匹配两者的第一行，然后匹配第二、第三等，直到一对不匹配。
2.  如果它们相同，则匹配两者的最后一行，然后匹配倒数第二行，倒数第二行等，直到一对不匹配。
3.  找到两边恰好出现一次的所有行，然后在这些行上做最长的公共子序列，将它们匹配起来。
4.  在匹配行之间的每个部分执行步骤 1-2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:50:05.610

一旦你用完了独特的线条，你需要回退到不同的对齐算法。Git 在那时使用标准的 diff 算法（Eugene Myers 的 O(ND) 算法）。

例如，如果这两个文件是：

```
a 12121 e 1212 b ee c x d
a 21212 e 2121 b ye c d 
```

首先，耐心算法对齐两个文件中唯一且存在的任何行：

```
a b c d
a b c d 
```

然后递归地对齐这些行之间的每个子范围，首先再次执行耐心算法，然后如果耐心算法不匹配任何内容，则执行 LCS 算法。

```
1212 e 121    |  ee  |    x
2121 e 2      |  ye  | 
```

在第一个子范围中，`e`现在两者都是唯一的，因此第二个耐心差异传递将对齐它，将其分成两个新的子范围。新的第一个子范围（12121 与 21212）没有任何唯一行，因此它将与 LCS 算法对齐。第二个新子范围（1212 与 2121）是通过 LCS 算法的第二次通过完成的。

上面的第二组（ee vs ye）没有任何独特的线条，因此它们也将使用 LCS 算法对齐。

最后的分组（x vs nothing）只是输出 x 作为删除，而不做耐心或 LCS 算法。

# mysql - mysql join，分组数据和比较？

> ID：10230886
> 
> 赞同：0
> 
> 时间：2012-04-19T14:58:58.370
> 
> 标签：mysql, join, subquery

我有一个项目表。

还有第二张变化表。

每个项目可以有多个变体。

我正在尝试类似的事情：

```
SELECT items.*, variations.id from items
JOIN variations
ON variations.item_id = items.id
WHERE variations.id IN (23,25,29)
GROUP BY items.id 
```

这将返回具有上述所有变体 23、25 和 29 的任何项目。

我还需要返回返回的 item.ids 的所有变体.id 值。

我尝试了一堆不同的加入解决方案，但不认为这是要走的路。子查询是答案吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:16:33.357

```
SELECT  i.*, v.id
FROM    items i
JOIN    variations v
ON      v.item_id = i.id
WHERE   (
        SELECT  COUNT(DISTINCT vi.id)
        FROM    variations vi
        WHERE   vi.item_id = i.id
                AND vi.id IN (23, 25, 29)
        ) = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:13:33.047

也许 GROUP_CONCAT(variations.item_id) 将是您的正确选择（参考：[http](http://dev.mysql.com/doc/refman/5.1/de/group-by-functions.html) ://dev.mysql.com/doc/refman/5.1/de/group-by-functions.html ）？

但我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:19:28.803

您可以通过使用 count(*) 和 HAVING 来完成，或者在这种情况下，因为只有 3 个条目，可以明确地 JOIN TWICE 以获得预期的变化......

这使用了有/计数并且比使用 WHERE IN ( SUBSELECT ) 更有效。它首先使用 ONE 查询对所有项目进行预限定，然后将该结果连接到项目。

```
select i.*
   from
      ( select v.item_id
           from variations v
           where v.id in ( 23, 25, 29 )
           group by v.item_id
           having count(*) = 3 ) PreQualified
      JOIN Items i
         on PreQualified.Item_ID = i.id 
```

# android - ViewFlipper 的 onTouch 事件不会被触发，而其子 Button 的 onClick 事件是

> ID：10230887
> 
> 赞同：3
> 
> 时间：2012-04-19T14:58:59.207
> 
> 标签：android, onclick

我一直在努力在 StackOverflow 或其他地方寻找解决方案，但我找不到任何直接谈论这个特定问题的帖子，也许除了我再也找不到的可能最接近的帖子。但是，如果这仅仅是因为我忽略了某些东西或者我只是一个大菜鸟，请提前道歉。

无论如何，我正在尝试将 OnTouchListener 设置为 ViewFlipper （父母），并将 setOnClickListener 设置为 Button （子），它会填充父布局。我希望首先调用 ViewFlipper 的 onTouch() 事件。想如果 ViewFlipper 的 onTouch() 返回 false，Button 的 onClick() 就会被触发。但是，只调用了 Button 的 onClick()。为什么？有没有明确的优先级？

或者，我可以为 Button 设置一个 onTouchListener，因为 Button 具有 'match_parent' 属性，因此触摸此 viewflipper 与触摸此按钮几乎相同，即使我这样做了，它只会使 Button 的 onClick() 事件未触发。 ...

以下是我的简化活动；

```
public class TestActivity extends Activity implements OnTouchListener, View.OnClickListener {
@Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ViewFlipper vf = (ViewFlipper) findViewById(R.id.viewFlipper1);
    Button btn = (Button) this.findViewById(R.id.btnTest1);
    vf.setOnTouchListener(this);
    btn.setOnClickListener(this);

} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ViewFlipper
    android:id="@+id/viewFlipper1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <include
        android:id="@+id/button"
        layout="@layout/test" />
</ViewFlipper>
</LinearLayout> 
```

测试.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/testLinear"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:baselineAligned="false"
android:orientation="vertical" >
<Button
    android:id="@+id/btnTest1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:26:37.950

我仍然不明白为什么没有首先调用 ViewFlipper 的 onTouch 事件，但我找到了一种方法来逃避这个问题。我们可以将 onClickListener 和 onTouchListener 都设置为按钮。

```
btn.setOnClickListener(this);
btn.setOnTouchListener(this); 
```

正如在原始帖子中所说，它可以防止 onClick() 事件发生，但无论如何？如果不是android系统调用的，那么我们应该手动调用它。

```
@Override public boolean onTouch (View v, MotionEvent event) {

// walls of codes 

this.onClick(v); 
```

我知道我需要一些调整。如果用户花费超过 0.5 秒的时间将手指从屏幕上移开，我不会将其称为“点击”。

# sql - 如何将 SQLite 查询中的 LIMIT 语句应用于联接的特定侧？

> ID：10230891
> 
> 赞同：0
> 
> 时间：2012-04-19T14:59:05.843
> 
> 标签：sql, sqlite

这是我的要求：

我有 2 张桌子，`orders`并且`orderContents`. 对于`orders`表中的每一行，都有一定数量的包含订单描述的行。`id`列用作外键。

我想要的是获取每个订单的所有详细信息（来自的详细信息`orderContents`，包括表中`id`的列`orders`）表，但限制没有。基于公共列的结果（外键，`id`）

问题是它限制`orderContents`行，而不是限制`order`行。

我怎样才能达到预期的效果？

**编辑：**更新表和所需的结果集

**订单**表：

![在此处输入图像描述](../Images/b231e23b891334648f33e970091c0f8e.png)

**订单内容**表：

![在此处输入图像描述](../Images/e9ab3e5739ba19bcbe73ca8e4d231c95.png)

**将记录数限制为 2 的**预期结果：****

 **![在此处输入图像描述](../Images/20ec1849453d7424af84d8b841f96707.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:06:01.477

我假设你想说你想要两个表的结果，但只需要前 X 个订单。如果是这样，试试这个：

```
SELECT OC.*, O.* FROM OrderContents OC
INNER JOIN  (SELECT * 
             FROM Orders 
             ORDER BY ID 
             LIMIT 2) O ON O.ID=OC.ID 
```**

# java - ColdFusion JVM：奇怪的内存行为

> ID：10230895
> 
> 赞同：2
> 
> 时间：2012-04-19T14:59:14.250
> 
> 标签：java, coldfusion, garbage-collection, jvm, jconsole

从上个月开始，我们公司的服务器（Win2008ServerStd + IIS7 + CF enterprise 9.0.1 (hotfix2)）出现问题。

我使用 jConsole 来监控 Coldfusion JVM (1.6.0_24) 活动，这是我看到的：

![曲线1](../Images/83de2b42c4e2b34f0b26a62b13590b9c.png)

![曲线2](../Images/bf24c2b907ea6deb6c13cae172e39d2c.png)

请注意 14:10 到 14:15 之间的奇怪“曲线”！那是什么？

显然这不是标准行为，当它发生时，我的应用程序会挂起 30 到 70 秒！

你知道什么会导致内存问题吗？似乎 GC 没有正确运行，或者自己挂起。

我不希望得到一个快速的答案，我想知道可能有很多根本问题导致了这个问题，但是....我可以从哪里开始调查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:27:59.430

使用 cfstat、perfmon、fusionreactor 或 cf 性能监视器查看正在运行的请求并在出现问题时排队。您可能会看到正在运行的请求超出了同时请求的设置（在 cf admin 中）。然后请求将开始排队。最终队列将被清除（如果您的服务器正在自行恢复）。

这种事情可能是由很多事情引起的。例如，如果您的数据库服务器速度变慢或出现问题，如果您的网络出现问题，或者如果网络端口正在重新同步，如果您的磁盘有 I/O 问题等。

我的猜测是，你会试图通过监控你的堆来解决这个问题。看看您是否可以在其中一个监视器上查看可能是罪魁祸首的某些特定脚本。

其他评论（关于一些索引代理）也是一种可能性。一连串的索引肯定会导致行为。如果是这种情况，您可以查看同时请求设置。如果它设置为默认值，您可能有足够的空间来增加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:22:41.837

法比奥，几个月前我遇到了同样的问题，我定期出现峰值，服务器占用了大约 50% 的 CPU 使用率。[我在 URL http://www.isummation.com/blog/strange-coldfusion-issue-jrun-eating-up-to-50-of-cpu/](http://www.isummation.com/blog/strange-coldfusion-issue-jrun-eating-up-to-50-of-cpu/)下写了完整的故事 ，这可能对你有帮助（抱歉这么久）。

我发现存储在注册表中的客户端变量导致了问题，我能够在 VisualVM 的帮助下捕捉到，我首先找出导致问题的线程并查看确切找到解决方案的跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:02:13.753

它可能是蜘蛛在爬取网站时创建了大量会话，这会在一段时间内耗尽内存。一旦蜘蛛停止爬行，这些会话就会超时并被垃圾收集。

我会将您的 HTTP 服务器日志与 JVM 日志进行比较。比较该时间范围，看看是否有来自搜索引擎蜘蛛（Googlebot、msnbot 等）的大量请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:46:15.117

IMO 唯一真正奇怪的是拥有这么多线程的突然飙升。定期捕获线程转储（jstack 等是您的朋友），然后将这些线程转储与显示峰值的监控相关联。

一旦你了解了所有额外线程在做什么，根本问题就会变得更加明显。也许是更多的线程处理事务，但它可能完全是另外一回事。

# regex - 递归搜索文件并获取与模式匹配的值

> ID：10230896
> 
> 赞同：0
> 
> 时间：2012-04-19T14:59:16.050
> 
> 标签：regex, grep

所以，我需要一些控制台工具（没有异国情调）或执行以下操作的 php 函数。（我不想编写自己的递归函数，例如使用 file_get_contents()）

我有一个包含几个子目录的目录。一些文件包含类似的东西，`<?php ech $this->translate('string'); ?>`而字符串总是不同的。

如何制作与上述函数匹配的模式并返回字符串？Atm，我会选择 grep 和 exec(); 以及用于获取我的字符串的第二个正则表达式。但也许，我可以做得更好。

我的 grep 示例：`grep -r "$this[->]translate('.*')" dir`

除了小问题：这有什么不同：`grep -r foo dir`和`grep -r foo dir/*`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:00:43.800

您可以通过前瞻和后瞻断言获得“字符串”： `grep -rhoP "(?<=this->translate\(')[^']*(?='\))" dir`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:05:32.837

从你的小问题开始：

> 这有什么不同：`grep -r foo dir`和`grep -r foo dir/*`？

第二个示例不会在`dir`以 a 开头的子目录中搜索`.`（因为它们不会被 glob 匹配）。因此，如果您的目录如下所示：

```
dir/
  .a_dotted_dir/
  a_visible_dir/ 
```

第一个示例将在内部搜索，`.a_dotted_dir`而第二个示例不会。

> 如何制作与上述函数匹配的模式并返回字符串？

你不能，用 grep 本身。Grep 只匹配模式，但不对它们执行任何类型的处理。您可以通过列出与您的搜索模式匹配的文件并使用 sed 处理它们来完成您想要的操作，例如：

```
grep -rl "this->translate('.*')" dir |
  xargs sed -n "s/.*this->translate('\([^']*\)').*/\1/p" 
```

另外，请注意，我对您的正则表达式进行了一些更改。 `[->]`不匹配`->`，并且放在`$this`双引号内最终会用空字符串替换 shell `$this`。您需要删除`$`、 转义它或使用单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:12:15.053

1.  使用方括号定义字符类，而美元符号将被 shell 解释为变量。您必须逃避它们才能使您的意思正确。我可能会这样做：

    ```
    echo "<?php echo \$this->translate('string'); ?>" \
      | grep -ho "\$this\s*->\s*translate('.*?')" 
      | sed "s/\$this->translate('\(.*\)')/\1/" 
    ```

    在哪里`\s`代表

2.  `grep -r <pattern> dir`和之间的区别`grep -r <pattern> dir/*`有些微妙。

    当您`grep -r <pattern> dir/*`在命令行上运行时，实际发生的情况是**shell**会将`dir/*`参数展开到目录列表中。

    在本质上：

    ```
    grep -rho <pat> dir/* 
    ```

    相当于：

    ```
    grep -rho <pat> dir/a dir/b dir/c [etc...] 
    ```

    其中“a”、“b”和“c”是目录/文件。因此 grep 将递归到**其中的每个目录**和所有文件`dir`，但不会递归到 dotfiles 或 dotted 目录。

    最好使用`grep -rho <pat> dir`，它将所有文件都考虑在内。

# jquery - 在每个图像上滑动菜单

> ID：10230899
> 
> 赞同：0
> 
> 时间：2012-04-19T14:59:25.330
> 
> 标签：jquery, image, slide

我正在开发一个存储图像并将它们显示在一个页面上的应用程序。如果您悬停图像，菜单应向上滑动，其中包含图像信息（标题、描述、标签等）。

下面是我的代码，但它不起作用。CSS中有什么问题吗，或者它可能是什么？

提前致谢！

html:

```
<div class="post">
    <img src="image.png" />
    <div class="postDesc">
        content goes here...
    </div>
</div> 
```

jQuery：

```
$('.post').hover(function () {
  $('postDesc').slideToggle('fast');
}); 
```

CSS：

```
.post {
    background: white;
    border: 1px solid black;
    width: 200px;
    height: 200px;
    margin: 0px auto;
    float: left;
    margin-left: 30px;
    margin-bottom: 30px;
    position: relative;
}

.postDesc { 
    background:#de9a44;
    width:200px; 
    height:200px; 
    display:none; 
    position:absolute;
    left: 0;
    bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:03:30.603

```
$(function(){
    $('.post').hover(function () {
     $('.postDesc').slideDown('fast');
    },function(){
             $('.postDesc').slideUp('fast');        
    });
}); 
```

[http://jsfiddle.net/mwcef/](http://jsfiddle.net/mwcef/) ​</p>

# jquery - 从两个列表中为 TextArea 添加值。这两个列表不应该能够在它们自己之间添加值

> ID：10230900
> 
> 赞同：0
> 
> 时间：2012-04-19T14:59:27.303
> 
> 标签：jquery, asp.net-mvc-3, model-view-controller

我有以下内容：

1) id="To" 的文本区域

```
@Html.TextArea("To", new { id = "To", @style = "height: 40px; width:100%;border:1px solid black", @class = ".connectedSortable" }) 
```

2) id 为“sortable1”的用户列表

```
<ul id="sortable1" class="connectedSortable"> 
```

3) id 为“sortable2”的组列表

```
<ul id="sortable2" class="connectedSortable"> 
```

![在此处输入图像描述](../Images/d13251d5323beae97b8d22673970aac6.png)

当我尝试将值从“sortable1”添加到“To”时，它可以正常工作。当我尝试将值从“sortable2”添加到“To”时，它工作正常。
当我尝试将值从“sortable1”添加到“sortable2”时，它可以正常工作，尽管它不应该。考虑到我需要两个列表都具有与“To”相同的类这一事实，我怎样才能避免它们交易元素？

这是元素之间连接的 JQuery 代码：

```
 $("#sortable1, #To").sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();

        $("#sortable2, #To").sortable({
            connectWith: ".connectedSortable"
        }).disableSelection(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:48:51.477

为什么这2个列表需要使用connectedSortable？你不能做一个他们使用的新课程吗？

# maven - Maven“版本”插件 - 如何从响应中排除 alpha/beta 版本？

> ID：10230903
> 
> 赞同：33
> 
> 时间：2012-04-19T14:59:30.107
> 
> 标签：maven, version, maven-plugin, dependency-management

我有一个关于插件版本的问题。

当它生成带有目标的报告时：

```
mvn versions:display-dependency-updates 
```

它建议有很多带有 beta 或 alpha 版本的库。

```
 org.hibernate:hibernate-validator ......... 4.2.0.Final -> 4.3.0.Beta1 
```

问题是，如果这个插件的目标是显示每个依赖项的最新版本，我不想将 beta/alpha 版本用于生产代码。但我也不想手动搜索最后一个稳定版本。

我试过'comparisonMethod'选项：数字，Maven等。没有任何成功。

插件“版本”有什么想法可以显示最新可用版本的依赖项，但不包括 beta/alpha？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-03-04T14:34:14.110

您可以像这样配置版本插件：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>versions-maven-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <rulesUri>someUrl</rulesUri>
    </configuration>
</plugin> 
```

`someUrl`也可以是文件 URL。规则文件的语法在[http://www.mojohaus.org/versions-maven-plugin/version-rules.html](http://www.mojohaus.org/versions-maven-plugin/version-rules.html)中给出，它可能包含如下内容：

```
<ruleset comparisonMethod="maven"
  xmlns="http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0 http://mojo.codehaus.org/versions-maven-plugin/xsd/rule-2.0.0.xsd">
  <ignoreVersions>
    <ignoreVersion type="regex">.*-beta.</ignoreVersion>
    <ignoreVersion type="regex">.*_ALPHA</ignoreVersion>
  </ignoreVersions>
</ruleset> 
```

# jquery-mobile - jQuery 移动列表分隔符 - 跨越到不是分隔符的 li 分组

> ID：10230907
> 
> 赞同：0
> 
> 时间：2012-04-19T14:59:37.120
> 
> 标签：jquery-mobile

我使用带有分隔符的 jQuery Mobile 列表：http: [//jquerymobile.com/test/docs/lists/lists-divider.html](http://jquerymobile.com/test/docs/lists/lists-divider.html)

目前的结构是这样的（A和B是分隔符）：

```
<li>A</li>
<li>Adam</li>
<li>Alex</li>
<li>B</li>
<li>Bob</li>
<li>Barbara</li> 
```

我怎样才能像这样在 li 的那个 arnt 分隔符周围放置一个跨度？：

```
<li>A</li>
  <span class="myspan">
    <li>Adam</li>
    <li>Alex</li>
  </span>
<li>B</li>
  <span class="myspan">
    <li>Bob</li>
    <li>Barbara</li>
  </span> 
```

我可以在添加这些跨度的页面加载时运行一些 javascript，但这对我来说似乎有点混乱。这样做有什么实际的缺点吗？谢谢

更新 - 我想要一个跨度的原因是我需要它，所以当您单击标题时，它下面的 li 会像手风琴一样折叠：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:07:20.547

你想达到什么目的？

而不是使用列表分隔符，将您的显示分成单独的列表视图是否有意义，即

```
<h3>A</h3>
  <ul data-role="listview" >
    <li>Adam</li>
    <li>Alex</li>
  </ul>
<h3>B</h3>
  <ul data-role="listview" >
    <li>Bob</li>
    <li>Barbara</li>
</ul> 
```

这样您就不会破坏列表的 HTML。

*编辑*另一种方法是将类添加到单个列表项中，以直观地表明它们被组合在一起。例如：

```
<ul data-role="listview" >
     <li class="group-a">Adam</li>
     <li class="group-a">Alex</li>
     <li class="group-b">Bob</li>
     <li class="group-b">Barbara</li>
 </ul> 
```

# django - 是否可以为管理员覆盖 django 中的数据库设置

> ID：10230909
> 
> 赞同：1
> 
> 时间：2012-04-19T14:59:39.777
> 
> 标签：django

是否可以覆盖管理部分的数据库设置？（使用 django 管理员）

我想为我的网站使用只读数据库用户，但能够在管理部分使用读/写用户，而不必处理两个设置文件和两个不同的 wsgi 进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:00:54.940

没有办法用单个实例来做到这一点。但是，您可以运行应用程序的两个实例。一方面，您只传送对主站点的请求，而另一个只传送给管理员的请求。或者，您可以在站点的子域上为管理员提供服务（所有这些都将通过您的反向代理服务器完成：nginx、Apache 等）

由于您正在运行两个实例，因此您可以自定义每个实例的设置，因此您还可以自定义正在使用的数据库用户。

# java - 取消订阅 Google Docs Api 中的集合

> ID：10230912
> 
> 赞同：1
> 
> 时间：2012-04-19T14:59:58.240
> 
> 标签：java, google-docs, google-docs-api

我正在尝试取消订阅共享集合，但不确定如何实现这一点。

我试图获取 acl 提要和要删除的条目但不工作

```
AclFeed aclFeed =entry.getAclFeed(); 
 for (AclEntry entryP : aclFeed.getEntries()) {
 entryP.Delete();
} 
```

不确定是否使用正确的 uri 来获取集合

[https://docs.google.com/feeds/default/private/full/folder:12345/acl](https://docs.google.com/feeds/default/private/full/folder:12345/acl)

这是正确的吗？

# git - 在`git pull`之后我需要`git checkout`吗？

> ID：10230918
> 
> 赞同：0
> 
> 时间：2012-04-19T15:00:16.170
> 
> 标签：git

在拉取其他开发人员提交和推送的更改之后`git pull`，我是否需要运行`git checkout`或其他方式让我的本地工作副本与所有文件的最新版本“完全同步”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:02:11.617

No. `git pull`执行 a `git fetch`--使用来自远程存储*库*的更改更新您的本地存储库 -- 和`git merge`，它更新您的本地*工作副本*（签出文件）。

操作后`git pull`，您的工作副本应该完全同步，除非您进行任何本地修改。

# c# - 如何按比例调整表格大小？C＃

> ID：10230920
> 
> 赞同：2
> 
> 时间：2012-04-19T15:00:26.627
> 
> 标签：c#, winforms, resize, scale

我需要在我的表单中宽度是高度的两倍（1：2）**，当我调整大小时我** 该怎么做？感谢您的帮助，对不起我的英语:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:14:57.457

查看这篇文章：[在保持纵横比的同时调整表单大小](https://web.archive.org/web/20120212181616/http://www.stoyanoff.info/blog/2010/06/27/resizing-forms-while-keeping-aspect-ratio/)。

关键是响应[`WM_SIZING`](https://docs.microsoft.com/en-gb/windows/win32/winmsg/wm-sizing)消息，它允许你改变窗口矩形。

```
public partial class MyForm : Form
{
    public MyForm()
    {
        InitializeComponent();

        // Necessary to take the window frame width/height into account
        this.chromeWidth = this.Width - this.ClientSize.Width;
        this.chromeHeight = this.Height - this.ClientSize.Height;
        this.ClientSize = new System.Drawing.Size(400, 200);
    }

    // ...

    #region Resizer
    private float constantWidth = 2;
    private float constantHeight = 1;

    private int chromeWidth;
    private int chromeHeight;

    // From Windows SDK
    private const int WM_SIZING = 0x214;

    private const int WMSZ_LEFT = 1;
    private const int WMSZ_RIGHT = 2;
    private const int WMSZ_TOP = 3;
    private const int WMSZ_BOTTOM = 6;

    struct RECT
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;
    }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_SIZING)
        {
            RECT rc = (RECT)Marshal.PtrToStructure(m.LParam, typeof(RECT));

            int w = rc.Right - rc.Left - chromeWidth;
            int h = rc.Bottom - rc.Top - chromeHeight;

            switch (m.WParam.ToInt32()) // Resize handle
            {
                case WMSZ_LEFT:
                case WMSZ_RIGHT:
                    // Left or right handles, adjust height
                    rc.Bottom = rc.Top + chromeHeight + (int)(constantHeight * w / constantWidth);
                    break;

                case WMSZ_TOP:
                case WMSZ_BOTTOM:
                    // Top or bottom handles, adjust width
                    rc.Right = rc.Left + chromeWidth + (int)(constantWidth * h / constantHeight);
                    break;

                case WMSZ_LEFT + WMSZ_TOP:
                case WMSZ_LEFT + WMSZ_BOTTOM:
                    // Top-left or bottom-left handles, adjust width
                    rc.Left = rc.Right - chromeWidth - (int)(constantWidth * h / constantHeight);
                    break;

                case WMSZ_RIGHT + WMSZ_TOP:
                    // Top-right handle, adjust height
                    rc.Top = rc.Bottom - chromeHeight - (int)(constantHeight * w / constantWidth);
                    break;

                case WMSZ_RIGHT + WMSZ_BOTTOM:
                    // Bottom-right handle, adjust height
                    rc.Bottom = rc.Top + chromeHeight + (int)(constantHeight * w / constantWidth);
                    break;
            }

            Marshal.StructureToPtr(rc, m.LParam, true);
        }

        base.WndProc(ref m);
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:34:05.663

使用**TableLayoutControl**来承载您的其他控件。这与 HTML 表的工作方式类似。

您将控件添加到表格中的单元格，然后您可以添加 ColumnStyles 和 RowStyles，您可以在其中设置单元格的宽度和高度。测量可以指定为自动、绝对或百分比。百分比是您在这里真正需要的百分比。

然后，您将此**TableLayoutControl**的停靠栏设置为与您的窗口一起调整大小，并且单元格将根据您之前设置的百分比*按比例*调整大小。

要使实际组件也调整大小，您必须设置它们的**Dock**或**Anchor**属性。任何指定控件应如何调整其所在单元格大小的配置都将起作用，例如，您可能希望控件仅在单元格中垂直调整大小，并且通过将控件的 Anchor 属性设置为仍保持相同的宽度

```
AnchorStyle.Top | AnchorStyle.Bottom 
```

简而言之：

*   设置控件相对于其单元格的大小调整方式
*   设置如何根据 TableLayoutControl 调整单元格的大小（使用 ColumnStyles 和 RowStyles）
*   设置 TableLayoutControl 将如何根据表单调整大小

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/vstudio/bb798032.aspx](http://msdn.microsoft.com/en-us/vstudio/bb798032.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T03:51:15.657

调整下面的表格是更好的一个

[http://niravdaraniya.blogspot.in/2013/07/how-to-resize-form-in-cnet.html](http://niravdaraniya.blogspot.in/2013/07/how-to-resize-form-in-cnet.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:03:17.107

注册到 resize 事件并按字面意思执行此操作：

```
this.ClientSize.Width = this.ClientSize.Height * 2; 
```

或完整的表格尺寸（包括边框）

```
this.Size.Width = this.Size.Height * 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:04:18.647

检查[Control.Resize 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resize.aspx)——也

```
private void Form1_Resize(object sender, System.EventArgs e)
{   
    Control control = (Control)sender;
    control.Width = control.Height * 2; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T15:11:29.923

您可以使用 onLoad、onClick 等事件在特定条件下调整大小。所以基本上它取决于你。

有一些标准的表单属性高度和宽度，因此您可以调整这些属性。

例如：

```
private void frmMain_Load(object sender, EventArgs e)
    {
        int height = 500;
        frmMain.ActiveForm.Height = height;
        frmMain.ActiveForm.Width = height / 2;
    } 
```

# oracle - 以表格形式嵌套 PLSQL

> ID：10230921
> 
> 赞同：0
> 
> 时间：2012-04-19T15:00:28.140
> 
> 标签：oracle, oracle10g, oracle9i, plsqldeveloper

我正在尝试实现以下结果（第一行是标题）

```
Level 1    | Level 2     |  Level 3 |   Level 4   | Person
Technicals | Development | Software | Team leader | Eric
Technicals | Development | Software | Team leader | Steven
Technicals | Development | Software | Team leader | Jana 
```

我该怎么做？我尝试使用以下代码。第一部分是创建工作正常的层次结构。第二部分是在上面提到的表格中有日期是相当痛苦的。

```
SELECT * FROM (  /* level2 */ 
   SELECT * FROM (  /* level1 */
          SELECT * FROM arc.localnode   /*create hierarchy */
                 WHERE tree_id = 2408362  
                 CONNECT BY PRIOR node_id = parent_id
                 START WITH parent_id IS NULL ) l1node
          LEFT JOIN names on l1node.prent_id  = names.name_id ) l2node 
```

在这一点上，我很失落。一些指导和建议会很有帮助:-)

有两张桌子。第一个表有这样的数据：

```
NODE_ID | PREV_ID  | NEXT_ID |  PARENT_ID 
1421864             3482917 1421768         
3482981 3482917     1421866 1421768     
3482911 3060402     3482913 1421768         
3482917 1421864     3482981 1421768 
```

这很复杂，因为它处于层次结构中。所以很明显，一个 PARENT_ID 可以是其他一些 PARENT_ID 的 NODE_ID。同样，parent_ID 可以是 PREV_ID 和 NEXT_ID。

这些名称与 name_id 位于单独的表中。此表中的名称 ID 类似于层次结构中主表的 NODE_ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:20:21.893

您可以在以下链接中使用 AskTom 中提到的 Stragg 包

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2196162600402](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2196162600402)

您也可以参考 oracle 论坛中的以下链接

[https://forums.oracle.com/forums/thread.jspa?threadID=2258996](https://forums.oracle.com/forums/thread.jspa?threadID=2258996)

请根据您的要求发布创建和插入语句，以便我们对其进行测试和确认

# iframe - 有效的类似 iframe 的技术

> ID：10230926
> 
> 赞同：1
> 
> 时间：2012-04-19T15:00:31.493
> 
> 标签：iframe, html

我最近在周末发现 iframe 在严格的 XHTML 中无效。那么刷新某些内容的正确方法是什么？一位朋友说只使用 div 并让 JavaScript 刷新它们，这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:02:45.733

Javascript很好。查看 jQuery (http://jquery.com/) 以更轻松地进行 DOM 操作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:07:45.653

你的朋友在某种意义上是对的。您可以通过使用 AJAX 将页面加载到`<div>`容器中来实现与 iframe 类似的效果。问题是 AJAX 请求通常被限制在同一个域内，因此您将无法加载其他网站。不过，您可以从自己的域中加载其他页面。

AJAX 使用 jQuery 非常简单。看看这个功能：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
<div id="externalcontent">This text will be replaced.</div>
<script type="text/javascript">
$('#externalcontent').load('separate_pages/page2.html');
</script> 
```

这有点毫无意义，因为您可以使用服务器端方法加载内容，但它显示了使用 jQuery 加载另一个页面是多么容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:01:51.757

使用 XHTML 框架集

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

[http://www.jonasjohn.de/snippets/html4strict/frameset-example.htm](http://www.jonasjohn.de/snippets/html4strict/frameset-example.htm)

# java - 如何将 String[] 转换为 ArrayList

> ID：10230929
> 
> 赞同：139
> 
> 时间：2012-04-19T15:00:39.400
> 
> 标签：java, android, string, arraylist

> **可能重复：**
> [在 Java 中将数组分配给 ArrayList](https://stackoverflow.com/questions/3746639/assigning-an-array-to-an-arraylist-in-java)

我需要将 a 转换`String[]`为 an`ArrayList<String>`但我不知道如何

```
File dir = new File(Environment.getExternalStorageDirectory() + "/dir/");
String[] filesOrig = dir.list(); 
```

基本上我想`filesOrig`变成一个`ArrayList`.

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2012-04-19T15:05:18.443

您可以执行以下操作：

```
String [] strings = new String [] {"1", "2" };
List<String> stringList = new ArrayList<String>(Arrays.asList(strings)); //new ArrayList is only needed if you absolutely need an ArrayList 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-19T15:03:44.980

像这样 ：

```
String[] words = {"000", "aaa", "bbb", "ccc", "ddd"};
List<String> wordList = new ArrayList<String>(Arrays.asList(words)); 
```

或者

```
List myList = new ArrayList();
String[] words = {"000", "aaa", "bbb", "ccc", "ddd"};
Collections.addAll(myList, words); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-19T15:03:45.960

```
List<String> list = Arrays.asList(array); 
```

返回的列表将由数组支持，它就像一座桥梁，因此它是固定大小的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-19T15:03:53.490

```
List myList = new ArrayList();
Collections.addAll(myList, filesOrig); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-19T15:02:27.327

您可以循环所有数组并添加到 ArrayList 中：

```
ArrayList<String> files = new ArrayList<String>(filesOrig.length);
for(String file: filesOrig) {
    files.add(file);
} 
```

或者`Arrays.asList(T... a)`按照发表的评论使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-19T15:04:09.987

你可以做类似的事情

> MyClass[] arr = myList.toArray(new MyClass[myList.size()]);

# mysql - MySql 性能问题

> ID：10230931
> 
> 赞同：0
> 
> 时间：2012-04-19T15:00:42.957
> 
> 标签：mysql, performance

我的这个查询需要 45 秒才能执行。我对正在搜索的所有字段都有索引。

```
SELECT SQL_CALC_FOUND_ROWS g.app_group_id, g.id as g_id, p.`id` as form_id, 
       a.`user`   as activity_user,a.`activity` as app_act ,a.* 
FROM grouped g 
INNER JOIN 
(SELECT max(id) as id, app_group_id FROM grouped GROUP BY app_group_id) g1 
ON g1.app_group_id = g.app_group_id AND g.id = g1.id 
INNER JOIN form p 
on p.id = g.id 
    INNER JOIN 
    (SELECT a.id, a.date_time, a.user, a.activity FROM log a) a 
    ON g.id = a.id 
WHERE p.agname like '%blahblah%' and p.`save4later` != 'y' 
      and a.activity = 'APP       Submitted' or a.activity = 'InstaQUOTE' 
ORDER BY app_group_id DESC limit 0, 100 
```

在我的解释中，它显示我正在使用临时使用；使用文件排序

索引是：

活动表：PRIMARY activity_id INDEX date_time INDEX id INDEX 活动 INDEX 用户

表格：PRIMARY id INDEX id_md5 INDEX dateadd INDEX dateu INDEX agent_or_underwriter INDEX

分组表：UNIQUE id INDEX app_group_id INDEX agent_or_underwriter save4later

非常感谢任何建议

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:19:13.347

To start with, try this one:

```
SELECT
  g.app_group_id,
  g.id AS g_id,
  p.id AS form_id,
  a.user AS activity_user,
  a.activity AS app_act,
  a.id,
  a.date_time
FROM grouped g 
INNER JOIN 
  (SELECT MAX(id) AS id, app_group_id FROM grouped GROUP BY app_group_id) g1 
  ON g1.app_group_id = g.app_group_id AND g.id = g1.id 
INNER JOIN form p 
  ON p.id = g.id 
INNER JOIN log a 
  ON g.id = a.id 
WHERE p.agname LIKE '%blahblah%'
  AND p.save4later != 'y'
  AND a.activity IN('APP       Submitted', 'InstaQUOTE')
LIMIT 0, 100 
```

I removed an unnecessary subquery. Also removed `ORDER BY`. I guess you could do without sorting, and that must speed the query up a lot.

I also removed `SQL_CALC_FOUND_ROWS`, because, as I mentioned earlier, it should be faster to issue a separate `COUNT(*)` query.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:36:17.537

您的 where 子句在“a.Activity”上有一个“或”。如果没有 ( ) 围绕这两个活动，它会经历一切，所有 P、G、G1 别名。我猜这可能是你更大的问题。

此外，我会确保您在“表单”表上有一个索引，其中 ( Save4Later ) 列已编入索引

我会像这样更新查询：

```
SELECT STRAIGHT_JOIN SQL_CALC_FOUND_ROWS 
      g.app_group_id, 
      g.id as g_id, 
      QualifyPages.Form_id, 
      a.`user` as activity_user,
      a.`activity` as app_act,
      a.* 
   FROM
      ( select p.ID as Form_ID
           from  FORM p
           WHERE p.`save4later` != 'y' 
             AND p.agname like '%blahblah%' ) QualifyPages

         JOIN Grouped g
            on QualifyPages.Form_ID = g.ID

            INNER JOIN 
            ( SELECT app_group_id,
                     max(id) as MaxIDPerGroup
                 FROM 
                    grouped 
                 GROUP BY 
                    app_group_id ) g1 
             ON g.app_group_id = g1.app_group_id
            AND g.id = g1.MaxIDPerGroup 

           INNER JOIN 
            ( SELECT a.id, a.date_time, a.user, a.activity 
                 FROM log a
                 WHERE a.activity = 'APP       Submitted' 
                    or a.activity = 'InstaQUOTE' ) a 
               ON g.id = a.id 
   ORDER BY 
      g.app_group_id DESC 
   limit 
      0, 100 
```

# facebook - FaceBook 身份验证和签名请求

> ID：10230944
> 
> 赞同：0
> 
> 时间：2012-04-19T15:01:06.860
> 
> 标签：facebook, flash, authentication, facebook-graph-api, oauth

在客户端，我使用 Flash API 登录并验证客户端

```
Facebook.init(MyFaceBooyKey, faceBookInit); 
```

然后脸书将签名请求和其他内容发送回客户端。

然后我的客户端将此签名请求发送到我的服务器。

在我的服务器上，我处理签名请求并弹出一个 FaceBook 用户 ID (UID)

所以现在我假设：

发送有效签名请求的客户端是其中包含的 Facebook UID 的所有者，客户端必须知道该 UID 的密码，并且他们已登录 facebook ？

这个系统安全吗？

我怎样才能安全地使用用户客户端 facebook 身份验证，然后将身份验证到第二个服务器，例如 sepreak facebook 游戏服务器。

我怎样才能让签名的请求在网络上的传输过程中没有得到处理，然后由第三方发送给我，他们现在以 Uiffrent UID 登录到我的服务器

如何对所有基于 theas flash 的 Facebook 游戏进行用户身份验证？

我还注意到，同一本书的身份验证通过桌面应用程序不会发送签名请求？那么在这种情况下如何对我的服务器进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:32:29.380

facebook 的所有身份验证流程都使用 SLL (https)，​​因此您发送/获取的数据是安全的。所有图形 api 请求也是如此，如果您尝试在 http 中发出 api 请求同时包含访问令牌，您将收到以下响应：

```
{
   "error": {
      "message": "You must use https:// when passing an access token",
      "type": "OAuthException",
      "code": 1
   }
} 
```

如果您将签名的请求和/或访问令牌发送到您的服务器，那么您也应该通过 https 进行操作，这样通信也将得到保护。

客户端（我假设您的意思是 Flash 客户端）不是访问令牌/签名请求的“所有者”，您的应用程序是“所有者”。

如果您需要服务器端的访问令牌，我建议您使用[服务器端身份验证流程](http://developers.facebook.com/docs/authentication/server-side/)来获取它。如果您随后需要客户端的访问令牌，那么您可以使用客户端身份验证，因为用户已经授权应用程序并确定（通过服务器端流程）进行身份验证，客户端进程应该对用户完全不可见，最后，您还将在客户端拥有一个访问令牌（与服务器上的不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T02:17:19.593

```
 "message": "You must use https:// when passing an access token",
      "type": "OAuthException",
      "code": 1
   }
} "message": "You must use https:// when passing an access token",
      "type": "OAuthException",
      "code": 1
   }
} "message": "You must use https:// when passing an access token",
      "type": "OAuthException",
      "code": 1
   }
} 
```

# jquery - Jquery .ajax 以错误的顺序加载脚本

> ID：10230945
> 
> 赞同：0
> 
> 时间：2012-04-19T15:01:11.420
> 
> 标签：jquery, ajax

目前的设置如下：

单击链接时，将执行以下代码：

```
$("#main-content").load(url); 
```

我们加载到 main-content 中的 url 主要是 html，顶部有 3 个脚本标签，底部有 3 个脚本标签（已加载）。

代码本身运行良好，本地没有问题，但是一旦我们将网站上线并添加了 CDN，Javascript 就开始失败。经过进一步检查，JQuery 似乎没有串行加载脚本。即使我们已经定义了如下脚本：

```
<script type="text/javascript" src="a.js"></script>
<script type="text/javascript" src="b.js"></script>
<script type="text/javascript" src="c.js"></script> 
```

a.js 比 b.js 有更大的延迟，并在稍后进行评估，从而产生 JS 错误。

我知道 JQuery 解析出 JS 文件并将它们附加到 dom 本身，但我认为它是串行执行的。有没有人遇到过这个问题或者对如何解决它有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:04:06.783

我找到了原因。JQuery 解析出所有脚本标签，通过 AJAX 请求获取源并对其进行评估。这导致无论哪个 AJAX 请求首先完成，都将首先被评估。由于 CDN 在 a.js 之前返回 b.js，因此代码中断。

作为一种解决方法，使用 yepnope.js 并行加载但串行执行。或者使用requirejs。

# c# - 获取用户在 ASP CheckBoxList 中取消选择的项目

> ID：10230948
> 
> 赞同：3
> 
> 时间：2012-04-19T15:01:20.730
> 
> 标签：c#, asp.net

我希望这相当简单，但我找不到/想出一个简单/智能的解决方案。

我有一个 CheckBoxList，它有一个 OnSelectedIndexChanged 事件。如果用户选择（检查）框中的项目，则触发该事件并执行后面的代码。简单的。

现在，如果用户取消选中一个框，我需要在后台做一些工作，但问题是当用户然后取消选择列表中的一个项目时，它会触发事件，但在事件的代码中，列表不保留指向哪个项目的指针用户刚刚取消选择。我觉得这很奇怪，并且认为我一定遗漏了一些明显的东西，尽管各种搜索都没有产生任何具体的结果。

我想我可以在检查的项目后面的代码中维护一个列表，并且每次触发事件时找出已删除的内容，但如果有更简单的解决方案，这似乎有点矫枉过正。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:18:02.793

是的，没有直接的方法来找到取消选中的项目，即使是通过投射发件人

以下是一个棘手的代码，它为您提供导致事件触发的项目索引

```
protected void checkboxlist_SelectedIndexChanged(object sender, EventArgs e)
{
        CheckBoxList list = (CheckBoxList)sender;
        string[] control = Request.Form.Get("__EVENTTARGET").Split('$');
        int idx = control.Length - 1;
        string sel = list.Items[Int32.Parse(control[idx])].Value;  
} 
```

获得索引后，您可以选择项目并编写代码。

# excel - 仅当下面的单元格不为空时才求和值

> ID：10230949
> 
> 赞同：1
> 
> 时间：2012-04-19T15:01:21.603
> 
> 标签：excel

我在 Excel 中有两行和以下命令：

```
IF(COUNT(H2:U2)>0;SUMPRODUCT(H2:U2;H1:U1)/SUM(H1:U1);"") 
```

现在我只想除以第 1 行中这些数字的总和，如果下面的行有一个实际值。因此，如果 J2 没有价值，例如，我只想将 SUMPRODUCT 除以 H1 直到没有 J1 的 U1。

有什么好办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:59:59.017

```
=IF(ISEMPTY(J2),"",IF(COUNT(H2:U2)>0,SUMPRODUCT(H2:U2,H1:U1)/SUM(H1:U1),"")) 
```

你可以用分号代替我的逗号。让我知道这个是否奏效。从您的帖子中不清楚您实际上是指行还是列（也许您可以显示实际表格的一部分）。我不确定你想做什么。当您说“下面的行”时，您指的是“H3”而不是“J2”-所以也许您的意思是列？

# haskell - 小型命令式语言的解释器

> ID：10230950
> 
> 赞同：3
> 
> 时间：2012-04-19T15:01:22.720
> 
> 标签：haskell, interpreter, monads, monad-transformers

嗨，我正在用 Haskell 编写类似 C 的静态类型语言的解释器。我想在执行代码之前执行类型检查，但是我遇到了一些问题。首先，下面有一些来自我的抽象语法的类型定义：

```
newtype Ident = Ident String deriving (Eq,Ord,Show)
data Exp = {-- some other value constructors --} | EFuncWithParams Ident [Exp]
data Type = TInt | TDouble | {-- some other value constructors --} | TFunction [Exp]
type TCM a = ErrorT String (Reader Env) a 
```

TCM 用于报告错误和传递环境，例如：

```
typeof (EVar v) = do
env <- ask
case M.lookup v env of
    Nothing -> throwError $ "undefined variable" ++ v ++ "\n"
    Just t - > return t 
```

现在我想检查表达式的类型，所以我有以下执行检查的函数：

```
typeof Exp :: Exp -> TCM Type 
```

它适用于所有情况，但一种情况除外：

```
typeof (EFuncWithParams f l) 
```

我被困在这里。我认为我应该做的是检查 f 的类型（我的意思是首先检查它是否真的是一个函数）并查看 f 定义中记录的参数类型是否与实际传递的参数类型匹配。不幸的是，我是一个 haskell 新手，不知道如何以正确的方式表达它。任何建议将不胜感激:)

编辑：好的，我之前在这里写的内容可能没有暗示，但 EFuncWithParams Ident [Exp] 实际上是一个函数调用（是的，我知道这有点误导），我希望能够调用像 f(2 + 3, a, b[0]) 这就是我使用 TFunction [Exp] 的原因。函数声明和定义是一条语句，定义如下：

```
data Function_def =
   Func Type_specifier Declarator Compound_stm
   deriving (Eq,Ord,Show) 
```

声明者在哪里：

```
data Declarator =  FuncDec Ident Parameter_declarations 
```

参数声明是 Type_specifiers 和 Idents 的列表

我认为我应该做的是在检查其声明时将函数类型保存在地图中，然后在此处获取它。我的意思是我也有：

```
typeof_stm :: Stm -> TCM Type -- Function_def is a statement 
```

问题是我有一个用于类型检查语句的单独函数，我怀疑一个函数（例如 typeof_stm）使用的映射是否自动传递给另一个函数（例如 typeof）。我认为这不会发生，但也许我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:53:38.363

我认为你的函数类型是错误的。你有它`TFunction [Exp]`，它应该是`TFunction [Type] Type`（参数类型列表和返回类型）。

函数调用的类型检查代码看起来像

```
case ... of ...
  EFuncWithParams ident args -> do
     t <- typeof (EVar ident)
     ts <- mapM typeof args
     case t of
         TFunction ps r -> if ts == ps
                               then return r
                               else throwError $ "parameter types do not match"
         _ -> throwError $ "called id " ++ ident ++ " which is not a function" 
```

这个伪代码可能不正确地进出 monad，请多多包涵，我没有你的所有代码，所以我无法真正检查我所做的事情。但整体方案是这样的。如果参数类型不匹配（哪些不匹配，或者参数数量错误），您可能需要提供更详细的错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:18:57.700

I'm not practical with Haskell, I just did it in OCaml and in C++ but what you are going to do is to call the type checker function recursively on each parameter and check if they do correspond.

What I mean is that you'll have to type check something that is like

```
FunCall ident, exp list 
```

Now you'll have in the environment an entry for the function with the types of parameters associated so what you need to ensure in order is that:

*   function named `ident` does exist in the environment
*   the number of parameters is equal to the definition (this can be done implicitly by the param checking function, see below)
*   for every parameter you call `typeof (exp1)` and you check that the returned `TCM Type` is the same of the corresponding parameter

This is how it should work. In OCaml (which is somewhat similar to Haskell) I would do something like:

```
match exp with
    | FunCall ident, (param list) ->
      (* get fundecl from ident *)
      (* call check_params list_of_parameters, list_of_type_of_parameters *)
      (* if check params return true then type check value of the function is the return value *)

let check_params list decl_list =
  match list, decl_list with
    | [], [] -> true
    | p :: rp, d :: rd -> typeof(p) = d && check_params rp rd
    | _ -> false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:29:39.773

```
EFuncWithParams Ident [Exp] 
```

像您这样的语言通常需要在输入上使用类型注释，并且可能还需要在输出上使用类型注释。因此，如果您将此信息添加到该构造函数

```
EFuncWithparams { inType, outType :: Type
                , funcInput :: Ident
                , funcBody :: [Expr] } 
```

现在要对它进行类型检查，您只需：

1.  将 to的绑定添加`funcInput`到`inType`您的类型环境
2.  `funcBody`用新的类型环境确定类型
3.  确保它与`outType`.

您还应该检查函数应用程序以确保输入与函数的 匹配`inType`，并且根据其正确使用结果`outType`。

# makefile - 如何检查变量是否在 Makefile 中包含空格？

> ID：10230953
> 
> 赞同：2
> 
> 时间：2012-04-19T15:01:30.947
> 
> 标签：makefile

我想知道变量 CHAPTER 是否包含空格。我尝试使用 findstring 没有成功：

```
CHAPTER=default
new:
ifeq (" ",$(findstring " ",$(CHAPTER)))
    $(error Variable contains space)
else
    echo "variable ok"
endif 
```

这段代码说“变量正常”，而我期望相反。

我究竟做错了什么 ？

我应该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:13:48.740

[`words`只需使用函数](http://www.gnu.org/software/make/manual/make.html#Text-Functions)测试变量值是否为单个单词：

```
ifneq (1,$(words [$(CHAPTER)]))
# Things are bad...
endif 
```

注意方括号，它也有助于检测前导/尾随空格。

## UPD。

另一种选择是定义一个变量，其值中包含一个空格，并搜索目标变量的出现次数。

```
space :=
space +=

ifneq (,$(findstring,$(space),$(CHAPTER)))
# Things are bad...
endif 
```

# sql - 使用默认值连接两个关系

> ID：10230959
> 
> 赞同：0
> 
> 时间：2012-04-19T15:01:47.930
> 
> 标签：sql, oracle, join, sqlplus

我有两种看法：

```
view1   view2
obj    obj attribute
+-+     +-+--+
|A|     |C|27|
+-+     +-+--+
|B|
+-+
|C|
+-+ 
```

如何组合这些值并返回输出，

```
obj attribute
 +-+--+
 |A| 0|
 +-+--+
 |B| 0|
 +-+--+
 |C|27|
 +-+--+ 
```

用 0 作为 SQL 中的默认值？我不想使用 PL/SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:04:49.590

```
SELECT v1.obj, NVL(v2.attribute, 0)
FROM view1 v1
LEFT JOIN view2 v2 on v1.obj = v2.obj 
```

# jsf - JSF 转换器实现

> ID：10230971
> 
> 赞同：0
> 
> 时间：2012-04-19T15:02:17.763
> 
> 标签：jsf, primefaces, converter

我已经在维护屏幕中实现了 Autoconverter（使用 forceSelection=false）。要编辑现有记录，用户将从自动完成列表中选择 ID。

要添加新记录，用户将在同一框中输入新 ID。

在转换器中，应用程序将尝试使用 ID 搜索数据库中的记录。
如果未找到，则使用提供的 ID 创建新的空对象，并为避免重复，将此对象添加到 Converter 中维护的数组列表中。

这在单个浏览器会话上按预期工作。但是在使用多个浏览器进行测试时，我发现数组列表在所有实例之间共享。

我不确定我采取的方法是否正确？如果不能，请建议我另一种方法。

```
private List<SchoolMasterDetails> schoolMasterDetailsDB = new ArrayList<SchoolMasterDetails>();

@Override
public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue) {
SchoolMasterDetails selectedObject = null;  

System.out.println("getAsObject ==> Entering.");
System.out.println("getAsObject ==> '" + submittedValue + "'");

if (!submittedValue.trim().equals("")) {
    selectedObject = (SchoolMasterDetails) getMasterService().getSchoolbyCode(submittedValue);

    if (selectedObject == null) {
        // search Object on localDB
        for (SchoolMasterDetails p : schoolMasterDetailsDB) {
            if (p.getSchoolCode().equalsIgnoreCase(submittedValue.trim())) {
                System.out.println("getAsObject from ArrayList ==> " + p);
                return p;   // return selectedObject from list of created objects
            }
        }

        System.out.println("getAsObject ==> selectedObject is null, Hence Creating new Object");
        selectedObject = new SchoolMasterDetails();
        selectedObject.setSchoolCode(submittedValue.trim());
        selectedObject.setSchoolName("TEST TEST TEST");
        schoolMasterDetailsDB.add(selectedObject);
    }
    else {
        System.out.println("getAsObject from Database ==> " + selectedObject);
    }
}
System.out.println("getAsObject ==> " + selectedObject);
}
System.out.println("getAsObject ==> Exiting.");     
return selectedObject;
} 
```

问候，

希里什语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:07:13.347

据我了解（仍在学习自己），转换器仅实现一个目的：它准备您的自定义对象以在视图中使用（getAsString）并将字符串转换回对象（getAsObject）。只要输入（单选列表、文本字段、自动完成）与自定义对象类型的支持 bean 中的变量相关联，就会使用它。您可以自由决定应该使用什么字符串来表示您的对象以及如何使用此字符串来查找对象。

考虑到这一点，我不会使用转换器来存储本地对象列表，也不会让它自己处理创建过程。相反，我假设某处有一个支持 bean，它保存您的数据对象并处理您的所有逻辑。这个 bean 可以有一个可以查询它包含的对象的 schoolMasters 列表（类似于您所做的）。然后，您可以在那里实现查找以处理未找到的情况并始终返回有效对象（可能是新对象），或者您可以在转换器中捕获未找到的情况，然后触发a`createNew()`从 bean 中获取一个新实例。

恕我直言，这更清楚地将实例的管理与转换器的翻译目的分开。此外，从您的代码来看，您似乎有两个地方可以查找对象 - 通过`getMasterService()`（本地方法？）和在您存储的`ArrayList`. 我不太明白这个...

* * *

至于您的浏览器共享实例的问题：这听起来像是一个范围问题。如果应该存储和管理数据的支持 bean 在应用程序范围内，那么只要应用程序运行，相同的数据集就可用。这些数据将可跨浏览器以及跨用户使用。

另一方面，如果将 bean 放在会话范围内，每个会话将创建自己的 bean 实例并存储唯一数据。类似地，只要单个视图和请求 bean 被丢弃并为每个 http 请求重新生成，视图范围 bean 就会存在。您可以在此处阅读更多信息：[如何选择合适的范围](https://stackoverflow.com/q/7031885/840977)

那里的答案是关于 bean 的（这是您的数据通常所在的位置）。我不确定转换器，我将它们视为在应用程序范围内可用的类，因此每个会话和视图都可以使用它们进行翻译 - 如果您在那里维护一个列表，它很可能是全球可用的。

# c++ - 仅在发布模式下使用 glGenBuffer 的未处理异常 - QT

> ID：10230976
> 
> 赞同：3
> 
> 时间：2012-04-19T15:02:30.377
> 
> 标签：c++, qt, opengl, qt4

在发布模式下使用 Qt 4.8 在 Windows 7 上编译我的项目时遇到了一些麻烦。调试时一切正常，但在发布时我得到一个未处理的异常：0xC0000005：访问冲突。

我把它缩小到发生这种情况的那一行，也就是我生成像素缓冲区的时候。我的第一个猜测是加载了错误的 DLL，但我使用 Dependency Walker 检查了可执行文件，并且加载的每个 DLL 都是正确的。

这是我的一些代码：

```
class CameraView : public QGLWidget, protected QGLFunctions;
void CameraView::initializeGL()
{

    initializeGLFunctions(this->context());

    glGenBuffers(1, &pbo_); //<<<<<  This is where I get the unhandled exception on Release mode
        glBindBuffer(QGLBuffer::PixelUnpackBuffer, pbo_);
        glBufferData(QGLBuffer::PixelUnpackBuffer, 3 * sizeof(BYTE) * image_width_ * image_height_, NULL, GL_STREAM_DRAW);
        ...
} 
```

同样，这在调试时效果很好。为什么这只会在发布时发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T23:12:44.513

我得到了它。似乎这个问题与这个问题有关： [https ://forum.qt.io/topic/12492/qt-4-8-qglfunctions-functions-crash-in-release-build](https://forum.qt.io/topic/12492/qt-4-8-qglfunctions-functions-crash-in-release-build)

还有一个*可能*相关的错误报告： [https ://bugreports.qt.io/browse/QTBUG-5729](https://bugreports.qt.io/browse/QTBUG-5729)

也许 initializeGLFunctions() 方法没有获得 GL 扩展函数的所有函数指针，我真的不知道为什么，但这似乎是它。

我的解决方案是停止使用 Qt 的 GL 扩展并开始使用 glew。

所以，这对我有用：

```
#include <QtGui/QtGui>
#include <gl/glew.h>
#include <QtOpenGL/QGLWidget>

class CameraView : public QGLWidget;
void CameraView::initializeGL()
{

   //initializeGLFunctions(this->context());
   GLenum init = glewInit();

   // Create buffers
   glGenBuffers(1, &pbo_);

   glBindBuffer(GL_PIXEL_UNPACK_BUFFER, pbo_);
   glBufferData(GL_PIXEL_UNPACK_BUFFER, 3 * sizeof(BYTE) * image_width_ * image_height_, NULL, GL_STREAM_DRAW);

   // Set matrixes
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();

   glOrtho(0, this->width(), 0, this->height(), 0, 1);
   glClearColor(0.0, 0.0, 0.0, 0.0);
   glShadeModel(GL_FLAT);
   glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
} 
```

确保 glew.h 包含在任何 QTOpenGL 头文件之前，否则会出现编译错误。

# windows-phone-7 - 将 FontFamily 定义为 Windows Phone 中的资源

> ID：10230984
> 
> 赞同：0
> 
> 时间：2012-04-19T15:02:43.067
> 
> 标签：windows-phone-7, resources, textbox, font-family

有点奇怪的是，在 App.xaml 中为 TextBox 定义 FontFamily 之后，什么都没有改变。代码是

```
<Style TargetType="TextBox">
        <Setter Property="FontFamily" Value="Fonts/WenQuanYiMicroHei.ttf#WenQuanYiMicroHei"/>
    </Style> 
```

将 TargetType 更改为“TextBlock”时，TextBlock 将更改其 fontfamily。

此外，我还为 TextBock 定义了一种样式，例如：

```
<Style x:Key="TextBoxStyle4FF" TargetType="TextBox">
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="BorderBrush" Value="White"/>
        <Setter Property="SelectionBackground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="SelectionForeground" Value="{StaticResource PhoneTextBoxSelectionForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="2"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="CaretBrush" Value="White"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                </VisualState>
                                <VisualState x:Name="ReadOnly">
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="EnabledBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="EnabledBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="EnabledBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="0">
                            <ContentControl x:Name="ContentElement" BorderThickness="0" HorizontalContentAlignment="Stretch" Margin="{StaticResource PhoneTextBoxInnerMargin}" Padding="0" VerticalContentAlignment="Stretch" FontFamily="{TemplateBinding FontFamily}"/>
                        </Border>
                        <Border x:Name="DisabledOrReadonlyBorder" BorderBrush="{StaticResource PhoneDisabledBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" Margin="{StaticResource PhoneTouchTargetOverhang}" Visibility="Collapsed">
                            <TextBox x:Name="DisabledOrReadonlyContent" Background="Transparent" Foreground="{StaticResource PhoneDisabledBrush}" FontWeight="{TemplateBinding FontWeight}" FontStyle="{TemplateBinding FontStyle}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" IsReadOnly="True" SelectionForeground="{TemplateBinding SelectionForeground}" SelectionBackground="{TemplateBinding SelectionBackground}" TextAlignment="{TemplateBinding TextAlignment}" TextWrapping="{TemplateBinding TextWrapping}" Text="{TemplateBinding Text}" Template="{StaticResource PhoneDisabledTextBoxTemplate}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

是因为 TextBox 的样式定义吗？

所以我决定为TextBox定义一个FontFamily Resource，但是找不到定义FontFamily的方法。好像 FontFamily 是在`System.Windows.Media`命名空间中，但是添加这个命名空间 `xmlns:media="clr-namespace:System.Windows.Media;assembly=System.Windows"`是没有用的。

任何答复表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:49:53.743

基于此模式：

```
<FontFamily x:Key="CantarellFontFamily" >Fonts/Cantarell-Regular.ttf#Cantarell</FontFamily> 
```

我创建了这个：

```
<FontFamily x:Key="CantarellFontFamily" >Fonts/Cantarell-Regular.ttf#Cantarell</FontFamily> 
```

我通过以下方式在 Windows Phone 7.1 上为我工作：

```
<TextBlock FontFamily="{StaticResource CantarellFontFamily}" /> 
```

[您可以在http://msdn.microsoft.com/en-us/library/system.windows.media.fontfamily(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.fontfamily(v=vs.95).aspx)查看文档

问候，赫伯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:52:34.903

您必须将新样式基于已定义的样式：

```
<Style TargetType="TextBox" x:Key="baseStyle>
    <Setter Property="FontFamily" 
            Value="Fonts/WenQuanYiMicroHei.ttf#WenQuanYiMicroHei"/>
</Style>

<Style x:Key="TextBoxStyle4FF" TargetType="TextBox" 
      BasedOn={StaticResource baseStyle}> <!-- based on defined style --> 
```

如您所见，您必须为原始样式提供密钥才能这样做。

# java - 如何获取除一个以外的所有目录的列表？

> ID：10230985
> 
> 赞同：0
> 
> 时间：2012-04-19T15:02:44.153
> 
> 标签：java, android, directory

由于特殊目的，我想列出 SDCARD 目录中的所有目录，但具有特定名称的目录除外。

假设我在父母 one **mom中有四个目录****dir1, dir2, dir3, dir4**。现在我只想列出**dir1、dir2**和**dir4**，而不是**dir3**，所以在列表中，有：

 *******   目录1
*   目录2
*   目录4

我怎样才能以编程方式做到这一点？请在下面查看我的代码。非常感谢你。

```
public class DatabaseFileList {
static final private String FILELIST_TAG = "[DatabaseFileList]";

public ArrayList<DatabaseFile> items;

public DatabaseFileList(String dbPath, String dbExtension)
{       
    items = new ArrayList<DatabaseFile>();

    getDatabaseFileList(dbPath,dbExtension);
}

private void getDatabaseFileList(String dbPath, String dbExtension)   
{
    items.clear();

    File dataDirectory = new File(dbPath);
    if (!dataDirectory.exists()) //Data directory doesn't exist, create it
    {
        if (!dataDirectory.mkdirs())
        {
            Log.i(FILELIST_TAG, "Cannot create directory on sdcard"); 
        }
        else
        {
            Log.i(FILELIST_TAG, "Data directory was created on sdcard");
        }
    }

    File dataDirectoryAV = new File(dbPath + "dir1");
    if (!dataDirectoryAV.exists()) //Data directory doesn't exist, create it
    {
        if (!dataDirectoryAV.mkdirs())
        {
            Log.i(FILELIST_TAG, "Cannot create dir1 on sdcard"); 
        }
        else
        {
            Log.i(FILELIST_TAG, "dir1 was created on sdcard");
        }
    }

    File dataDirectoryVA = new File(dbPath + "dir2");
    if (!dataDirectoryVA.exists()) //Data directory doesn't exist, create it
    {
        if (!dataDirectoryVA.mkdirs())
        {
            Log.i(FILELIST_TAG, "Cannot create dir2 on sdcard"); 
        }
        else
        {
            Log.i(FILELIST_TAG, "dir2 was created on sdcard");
        }
    }

    File dataDirectoryVAkd = new File(dbPath + "dir3");
    if (!dataDirectoryVAkd.exists()) //Data directory doesn't exist, create it
    {
        if (!dataDirectoryVAkd.mkdirs())
        {
            Log.i(FILELIST_TAG, "Cannot create dir3 on sdcard"); 
        }
        else
        {
            Log.i(FILELIST_TAG, "dir3 was created on sdcard");
        }
    }

    File dataDirectoryVAkd = new File(dbPath + "dir4");
    if (!dataDirectoryVAkd.exists()) //Data directory doesn't exist, create it
    {
        if (!dataDirectoryVAkd.mkdirs())
        {
            Log.i(FILELIST_TAG, "Cannot create dir4 on sdcard"); 
        }
        else
        {
            Log.i(FILELIST_TAG, "dir4 was created on sdcard");
        }
    }

    FileFilter ffDir = new FileFilter()
    {
        public boolean accept(File f)
        {
            return f.isDirectory();
        }
    };

    File[] lstDirectory = dataDirectory.listFiles(ffDir);

    if (lstDirectory != null && lstDirectory.length > 0)
    {
        for (File currentDirectory : lstDirectory)
        {
            DatabaseFile db = new DatabaseFile();
            String path = currentDirectory.getAbsolutePath() + "/" + currentDirectory.getName();
            //Log.i(FILELIST_TAG,"Filelist path = " + path);

            db.fileName = currentDirectory.getName();
            db.path = currentDirectory.getPath();

            File ifoFile = new File(path + ".ifo");

            if (ifoFile.exists())   
            {

                String data;
                String arrData[] = null; 
                try
                {
                    BufferedReader brIfoFile = new BufferedReader(new FileReader(ifoFile));
                    while (brIfoFile.ready())
                    {
                        data = brIfoFile.readLine(); 
                        arrData = data.split("=");
                        arrData[0] = arrData[0].trim();
                        if (arrData[0].equals("name"))
                        {
                            db.dictionaryName = arrData[1].trim();

                        }
                        else if (arrData[0].equals("from"))
                        {
                            db.sourceLanguage = arrData[1].trim();
                            //Log.i(FILELIST_TAG, "from = " + arrData[1]);
                        }
                        else if (arrData[0].equals("to"))
                        {
                            db.destinationLanguage= arrData[1].trim();
                            //Log.i(FILELIST_TAG, "to = " + arrData[1]);
                        }
                        else if (arrData[0].equals("style"))
                        {
                            db.style= arrData[1].trim();
                            //Log.i(FILELIST_TAG, "style = " + arrData[1]); 
                        }
                    }
                }
                catch (Exception ex){
                    db.dictionaryName = db.fileName + " File not read!";
                    Log.e(FILELIST_TAG, "Can not read ifo file!");
                }
            }
            else
            {
                db.dictionaryName = db.fileName + " - No DB in sdcard/mom/";
                Log.i(FILELIST_TAG, "No ifo file found, set db name to file name");
            }
            //add to list
            items.add(db);
        }
        Log.i(FILELIST_TAG,"Found " + items.size() + " dictionaries");
    }
    else
    {
        Log.i(FILELIST_TAG,"Do not find any valid db");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:07:51.503

实现 java.io.FilenameFilter ？或者您对结果运行过滤器（排除列表）。******

# css - IE9 随机 CSS 问题

> ID：10230997
> 
> 赞同：0
> 
> 时间：2012-04-19T15:03:09.527
> 
> 标签：css, internet-explorer, internet-explorer-9

我目前在 IE9 中调试我的网站，我遇到了一个视图怪癖，主要与网站顶部的导航栏有关，

当您查看[http://mensclothingroom.factoryagency.co.uk](http://mensclothingroom.factoryagency.co.uk)时，导航很好，但是如果您再查看[http://mensclothingroom.factoryagency.co.uk/category/socks](http://mensclothingroom.factoryagency.co.uk/category/socks)导航部分堆叠，这确实令人困惑因为它们运行相同的 CSS 以及特定的样式表。

**CSS**

```
.navigation {
    position:absolute;
    top:69px;
    left:5px;
    padding:0px 0px 0px 4px;
    border-bottom:1px solid #ccc;
}

    .navigation .site_navigation {
        padding:7px 0px 7px 0px;
        clear:both;
    }

        .navigation .site_navigation ul {
            height: 34px;
            line-height: 34px;

        }

            .navigation .site_navigation li {
                float: left;
                height: 16px;
                margin-right: 15px;
                position: relative;
            }

                .navigation .site_navigation li > ul {
                    display:none;
                    width:165px;
                    position:absolute;
                    left:0px;
                    top:34px;
                    background:#fff;
                    border:1px solid #aaa;
                    z-index:999;
                    height:auto;
                    padding:2px 0px
                }

                    .navigation .site_navigation li:hover > ul {
                        display:block;
                        box-shadow: 2px 2px 2px #999999;
                    }

                    .navigation .site_navigation li:hover > ul li > ul {
                        display:none;
                    }

                        .navigation .site_navigation li:hover > ul li,
                        .sidebar_navigation li {
                            line-height:11px;
                            clear:both;
                            display:block;
                            margin-bottom:2px;
                            width:140px;
                        }

                            .navigation .site_navigation li:hover > ul li {
                                height: auto !important;
                                line-height: normal;
                            }

                            .navigation .site_navigation li:hover > ul a,
                            .sidebar_navigation a {
                                font-size:10px;
                                padding:6px 0 6px 10px;
                                width:130px;
                                display:block;
                            }

                                .navigation .site_navigation li:hover > ul a {
                                    width:155px;
                                }

                                .navigation .site_navigation li > ul a:hover,
                                .navigation .site_navigation li:hover > a,
                                .sidebar_navigation a:hover {
                                    font-size:10px;
                                    background:#999;
                                    color:#fff;
                                }

                                    .navigation .site_navigation li:hover > a {
                                        font-size:12px;
                                    }

                .navigation .site_navigation li.sale {
                    float: right;
                    height: 25px;
                    line-height: 25px;
                    margin-right: 4px;
                }

                    .navigation .site_navigation li.sale a {
                        background:#BE1E2D;
                        height:16px;
                        color:#fff;
                        padding:4px 18px;
                    }

                        .navigation .site_navigation li a.sale {
                            display:block;
                            height:25px;
                        }

                        .navigation .site_navigation li.current a.sale {
                            background:#9C1925;
                        }

                .navigation .site_navigation li  a,
                .sidebar_navigation a {
                    color: #666666;
                    font-family: Georgia,Times,"Times New Roman",sans-serif;
                    font-size: 12px;
                    letter-spacing: 0.05em;
                    text-decoration: none;
                    text-transform: uppercase;
                }

                    .navigation .site_navigation li a {
                        display: block;
                        padding: 0 10px;
                    }

                        .navigation .site_navigation li > ul a {
                            padding:0px 0px 0px 12px;
                        }

                        .navigation .site_navigation li a:hover,
                        .navigation .site_navigation li.current a {
                            background:#aaa;
                            color:#fff;
                        } 
```

**浏览器 CSS**

```
 .navigation .site_navigation {
    padding:10px 0px 0px 0px;
}

.navigation .site_navigation li {
    list-style:none outside none;
    margin-right:15px;
    float:left;
    height:auto;
} 
```

任何人都可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:20:02.520

在[W3C HTML Validator](http://validator.w3.org)中查看它...

您的[第一个链接](http://validator.w3.org/check?uri=http://mensclothingroom.factoryagency.co.uk/&charset=%28detect%20automatically%29&doctype=Inline&group=0)没有杂散的 HTML 标记。

您的[第二个链接有很多杂散/缺失的标签](http://validator.w3.org/check?uri=http://mensclothingroom.factoryagency.co.uk/category/socks/&charset=%28detect%20automatically%29&doctype=Inline&group=0)，这可能会导致某些浏览器出现渲染问题。

*   第 124 行，第 9 列：杂散结束标记 ul。

*   第 302 行，第 11 列：范围内没有 li 元素，但看到了 li 结束标记。

*   第 319 行，第 7 列：看到正文的结束标签，但有未闭合的元素。

*   第 31 行，第 34 列：未闭合元素 div。