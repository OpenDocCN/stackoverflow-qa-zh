# StackOverflow 问答 11225000-11225999

# javascript - 使用 Node.js 实时读取文件

> ID：11225001
> 
> 赞同：16
> 
> 时间：2012-06-27T11:18:01.780
> 
> 标签：javascript, node.js, real-time, fifo, unix-socket

我需要找出使用 node.js 实时读取写入文件的数据的最佳方法。麻烦的是，Node 是一艘快速移动的船，这使得找到解决问题的最佳方法变得困难。

**我想要做什么**
我有一个 java 进程正在做某事，然后将它所做的事情的结果写入一个文本文件。它通常需要 5 分钟到 5 小时来运行，数据一直在写入，并且可以达到相当高的吞吐率（大约 1000 行/秒）。

我想实时读取这个文件，然后使用节点聚合数据并将其写入可以在客户端上绘制图形的套接字。

客户端、图形、套接字和聚合逻辑都已完成，但我对读取文件的最佳方法感到困惑。

**我尝试过（或至少玩过）**
`FIFO` - 我可以告诉我的 Java 进程写入 fifo 并使用节点读取它，这实际上是我们目前使用 Perl 实现的方式，但是因为其他一切都在节点中运行将代码移植过来是有意义的。

`Unix Sockets`- 如上。

`fs.watchFile`- 这能满足我们的需要吗？

`fs.createReadStream`- 这比 watchFile 好吗？

`fs`& `tail -f`- 似乎是一个黑客。

**实际上，我**
倾向于使用 Unix 套接字的问题是什么，这似乎是最快的选择。但是 node 是否有更好的内置功能来实时从 fs 读取文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T18:47:44.317

如果您想将文件保留为数据的持久存储以防止在系统崩溃或正在运行的进程网络中的一个成员死亡的情况下丢失流，您仍然可以继续写入文件并读取从中。

如果您不需要此文件作为 Java 进程生成的结果的持久存储，那么使用 Unix 套接字在易用性和性能方面都要好得多。

`fs.watchFile()`这不是您所需要的，因为它在文件系统报告它时适用于文件统计信息，并且由于您想读取已经写入的文件，所以这不是您想要的。

**简短更新：**我很遗憾地意识到，虽然我`fs.watchFile()`在上一段中指责使用文件统计信息，但我自己在下面的示例代码中做了同样的事情！虽然我已经警告读者“小心！” 因为我只用了几分钟就写好了，甚至没有测试好；不过，如果底层系统支持它，它可以通过使用`fs.watch()`而不是做得更好。`watchFile``fstatSync`

为了从文件中读取/写入，我刚刚在下面写了一些有趣的东西：

**test-fs-writer.js** : [你不需要这个，因为你在你的 Java 进程中写文件]

```
var fs = require('fs'),
    lineno=0;

var stream = fs.createWriteStream('test-read-write.txt', {flags:'a'});

stream.on('open', function() {
    console.log('Stream opened, will start writing in 2 secs');
    setInterval(function() { stream.write((++lineno)+' oi!\n'); }, 2000);
}); 
```

**test-fs-reader.js** : [注意，这只是演示，检查 err 对象！]

```
var fs = require('fs'),
    bite_size = 256,
    readbytes = 0,
    file;

fs.open('test-read-write.txt', 'r', function(err, fd) { file = fd; readsome(); });

function readsome() {
    var stats = fs.fstatSync(file); // yes sometimes async does not make sense!
    if(stats.size<readbytes+1) {
        console.log('Hehe I am much faster than your writer..! I will sleep for a while, I deserve it!');
        setTimeout(readsome, 3000);
    }
    else {
        fs.read(file, new Buffer(bite_size), 0, bite_size, readbytes, processsome);
    }
}

function processsome(err, bytecount, buff) {
    console.log('Read', bytecount, 'and will process it now.');

    // Here we will process our incoming data:
        // Do whatever you need. Just be careful about not using beyond the bytecount in buff.
        console.log(buff.toString('utf-8', 0, bytecount));

    // So we continue reading from where we left:
    readbytes+=bytecount;
    process.nextTick(readsome);
} 
```

您可以安全地避免使用`nextTick`并`readsome()`直接调用。由于我们仍在此处进行同步，因此在任何意义上都没有必要。我只是喜欢它。:p

**[奥利弗·劳埃德](https://stackoverflow.com/users/1233018/oliver-lloyd)编辑**

以上面的例子为例，但将其扩展为读取 CSV 数据给出：

```
var lastLineFeed,
    lineArray;
function processsome(err, bytecount, buff) {
    lastLineFeed = buff.toString('utf-8', 0, bytecount).lastIndexOf('\n');

    if(lastLineFeed > -1){

        // Split the buffer by line
        lineArray = buff.toString('utf-8', 0, bytecount).slice(0,lastLineFeed).split('\n');

        // Then split each line by comma
        for(i=0;i<lineArray.length;i++){
            // Add read rows to an array for use elsewhere
            valueArray.push(lineArray[i].split(','));
        }   

        // Set a new position to read from
        readbytes+=lastLineFeed+1;
    } else {
        // No complete lines were read
        readbytes+=bytecount;
    }
    process.nextTick(readFile);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T18:05:14.540

为什么你认为`tail -f`是黑客？

在弄清楚我找到了一个很好的例子时，我会做类似的事情。使用 node.js 和 WebSocket 的实时在线活动监控示例：http:
[//blog.new-bamboo.co.uk/2009/12/7/real-time-online-activity-monitor-example-with-node-js -and-websocket](http://blog.new-bamboo.co.uk/2009/12/7/real-time-online-activity-monitor-example-with-node-js-and-websocket)

只是为了使这个答案完整，我给你写了一个示例代码，它可以在 0.8.0 下运行 - （http 服务器可能是一个 hack）。

一个子进程是用 tail 产生的，因为子进程是一个带有三个流的 EventEmitter（我们在我们的例子中使用 stdout），你可以添加一个监听器`on`

文件名：**tailServer.js**

用法：`node tailServer /var/log/filename.log`

```
var http = require("http");
var filename = process.argv[2];

if (!filename)
    return console.log("Usage: node tailServer filename");

var spawn = require('child_process').spawn;
var tail = spawn('tail', ['-f', filename]);

http.createServer(function (request, response) {
    console.log('request starting...');

    response.writeHead(200, {'Content-Type': 'text/plain' });

    tail.stdout.on('data', function (data) {
      response.write('' + data);                
    });
}).listen(8088);

console.log('Server running at http://127.0.0.1:8088/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T00:12:20.627

这个模块是@hasanyasin 建议的原则的实现：

[https://github.com/felixge/node-growth-file](https://github.com/felixge/node-growing-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T05:55:47.753

我从@hasanyasin 那里得到了答案，并将其包装成一个模块化的承诺。基本思想是传递一个文件和一个处理函数，该函数对从文件中读取的字符串化缓冲区执行某些操作。如果处理函数返回 true，则文件将停止读取。您还可以设置一个超时，如果处理程序没有足够快地返回 true，它将终止读取。

如果 resolve() 由于超时而被调用，则 promiser 将返回 true，否则将返回 false。

使用示例见底部。

```
// https://stackoverflow.com/a/11233045

var fs = require('fs');
var Promise = require('promise');

class liveReaderPromiseMe {
    constructor(file, buffStringHandler, opts) {
        /*
            var opts = {
                starting_position: 0,
                byte_size: 256,
                check_for_bytes_every_ms: 3000,
                no_handler_resolution_timeout_ms: null
            };
        */

        if (file == null) {
            throw new Error("file arg must be present");
        } else {
            this.file = file;
        }

        if (buffStringHandler == null) {
            throw new Error("buffStringHandler arg must be present");
        } else {
            this.buffStringHandler = buffStringHandler;
        }

        if (opts == null) {
            opts = {};
        }

        if (opts.starting_position == null) {
            this.current_position = 0;
        } else {
            this.current_position = opts.starting_position;
        }

        if (opts.byte_size == null) {
            this.byte_size = 256;
        } else {
            this.byte_size = opts.byte_size;
        }

        if (opts.check_for_bytes_every_ms == null) {
            this.check_for_bytes_every_ms = 3000;
        } else {
            this.check_for_bytes_every_ms = opts.check_for_bytes_every_ms;
        }

        if (opts.no_handler_resolution_timeout_ms == null) {
            this.no_handler_resolution_timeout_ms = null;
        } else {
            this.no_handler_resolution_timeout_ms = opts.no_handler_resolution_timeout_ms;
        }
    }

    startHandlerTimeout() {
        if (this.no_handler_resolution_timeout_ms && (this._handlerTimer == null)) {
            var that = this;
            this._handlerTimer = setTimeout(
                function() {
                    that._is_handler_timed_out = true;
                },
                this.no_handler_resolution_timeout_ms
            );
        }
    }

    clearHandlerTimeout() {
        if (this._handlerTimer != null) {
            clearTimeout(this._handlerTimer);
            this._handlerTimer = null;
        }
        this._is_handler_timed_out = false;
    }

    isHandlerTimedOut() {
        return !!this._is_handler_timed_out;
    }

    fsReadCallback(err, bytecount, buff) {
        try {
            if (err) {
                throw err;
            } else {
                this.current_position += bytecount;
                var buff_str = buff.toString('utf-8', 0, bytecount);

                var that = this;

                Promise.resolve().then(function() {
                    return that.buffStringHandler(buff_str);
                }).then(function(is_handler_resolved) {
                    if (is_handler_resolved) {
                        that.resolve(false);
                    } else {
                        process.nextTick(that.doReading.bind(that));
                    }
                }).catch(function(err) {
                    that.reject(err);
                });
            }
        } catch(err) {
            this.reject(err);
        }
    }

    fsRead(bytecount) {
        fs.read(
            this.file,
            new Buffer(bytecount),
            0,
            bytecount,
            this.current_position,
            this.fsReadCallback.bind(this)
        );
    }

    doReading() {
        if (this.isHandlerTimedOut()) {
            return this.resolve(true);
        } 

        var max_next_bytes = fs.fstatSync(this.file).size - this.current_position;
        if (max_next_bytes) {
            this.fsRead( (this.byte_size > max_next_bytes) ? max_next_bytes : this.byte_size );
        } else {
            setTimeout(this.doReading.bind(this), this.check_for_bytes_every_ms);
        }
    }

    promiser() {
        var that = this;
        return new Promise(function(resolve, reject) {
            that.resolve = resolve;
            that.reject = reject;
            that.doReading();
            that.startHandlerTimeout();
        }).then(function(was_resolved_by_timeout) {
            that.clearHandlerTimeout();
            return was_resolved_by_timeout;
        });
    }
}

module.exports = function(file, buffStringHandler, opts) {
    try {
        var live_reader = new liveReaderPromiseMe(file, buffStringHandler, opts);
        return live_reader.promiser();
    } catch(err) {
        return Promise.reject(err);
    }
}; 
```

然后像这样使用上面的代码：

```
var fs = require('fs');
var path = require('path');
var Promise = require('promise');
var liveReadAppendingFilePromiser = require('./path/to/liveReadAppendingFilePromiser');

var ending_str = '_THIS_IS_THE_END_';
var test_path = path.join('E:/tmp/test.txt');

var s_list = [];
var buffStringHandler = function(s) {
    s_list.push(s);
    var tmp = s_list.join('');
    if (-1 !== tmp.indexOf(ending_str)) {
        // if this return never occurs, then the file will be read until no_handler_resolution_timeout_ms
        // by default, no_handler_resolution_timeout_ms is null, so read will continue forever until this function returns something that evaluates to true
        return true;
        // you can also return a promise:
        //  return Promise.resolve().then(function() { return true; } );
    }
};

var appender = fs.openSync(test_path, 'a');
try {
    var reader = fs.openSync(test_path, 'r');
    try {
        var options = {
            starting_position: 0,
            byte_size: 256,
            check_for_bytes_every_ms: 3000,
            no_handler_resolution_timeout_ms: 10000,
        };

        liveReadAppendingFilePromiser(reader, buffStringHandler, options)
        .then(function(did_reader_time_out) {
            console.log('reader timed out: ', did_reader_time_out);
            console.log(s_list.join(''));
        }).catch(function(err) {
            console.error('bad stuff: ', err);
        }).then(function() {
            fs.closeSync(appender);
            fs.closeSync(reader);
        });

        fs.write(appender, '\ncheck it out, I am a string');
        fs.write(appender, '\nwho killed kenny');
        //fs.write(appender, ending_str);
    } catch(err) {
        fs.closeSync(reader);
        console.log('err1');
        throw err;
    }
} catch(err) {
    fs.closeSync(appender);
        console.log('err2');
    throw err;
} 
```

# c# - 在通知图标上显示文本鼠标悬停

> ID：11225004
> 
> 赞同：11
> 
> 时间：2012-06-27T11:18:27.973
> 
> 标签：c#, notifyicon

如何在 c# 中的 notifyicon 鼠标悬停时显示文本。由于 ShowBalloonTip 显示关于超时，我如何在 Notify Icon 的鼠标悬停时显示文本？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T11:23:45.483

[NotifyIcon 类的 Text 属性是你需要的](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.text%28v=vs.100%29.aspx "NotifyIcon.Text 属性")

当您将鼠标悬停在图标上时，.Text 将呈现为工具提示。

```
public string Text { get; set; } 
```

# javascript - twitter-bootstrap 按钮 javascript 不起作用

> ID：11225010
> 
> 赞同：2
> 
> 时间：2012-06-27T11:18:36.990
> 
> 标签：javascript, twitter-bootstrap

我有一个带有按钮组的控制组作为复选框，如下所示：

```
<div class="control-group" id="cyb3r" >
            <label class="control-label" for="c">C</label>
            <div class="btn-group navs controls" data-toggle="buttons-checkbox">
                <button class="btn" type="button">1</button>
                <button class="btn" type="button">2</button>
                <button class="btn" type="button">3</button>
            </div>

</div> 
```

我包括这些：

```
<link rel="stylesheet"
    href="<?php echo base_url('assets/style/style.css');?>">
<link rel="stylesheet"
    href="<?php echo base_url('assets/style/bootstrap.min.css');?>">
<script
    type="text/javascript"
    src="<?php echo base_url('assets/script/jquery.js')?>"></script>
<script
    type="text/javascript"
    src="<?php echo base_url('assets/script/bootstrap.min.js')?>"></script>
<script
    type="text/javascript"
    src="<?php echo base_url('assets/script/bootstrap-button.js')?>">
    </script>
<script
    type="text/javascript"
    src="<?php echo base_url('assets/script/js.js')?>"></script> 
```

和 js.js ：

```
$(function(){
    $('#cyb3r').button();  
}); 
```

我也试过这些：

```
$(function(){
    $('.navs').button();  
});

$(function(){
    $('.control-group').button();  
}); 
```

但它们都不适用于该复选框组。但为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:26:13.200

`bootstrap.min.js`已经包括`bootstrap-button.js`

你可以删除

```
<script
type="text/javascript"
src="<?php echo base_url('assets/script/bootstrap-button.js')?>">
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:53:47.210

您确定所有库都正确包含吗？因为对我来说它工作正常：http: [//jsfiddle.net/QchpT/](http://jsfiddle.net/QchpT/)

# postgresql - 函数 to_char(unknown, unknown) 不是唯一的

> ID：11225011
> 
> 赞同：7
> 
> 时间：2012-06-27T11:18:37.903
> 
> 标签：postgresql

运行以下查询时。`select * from surgicals where to_char(dt_surgery ,'DD-MM-YYYY' ) = to_char('12-02-2012','DD-MM-YYYY');`

出现的错误为“SQL 状态 42725：错误：函数 to_char（未知，未知）不是唯一的”

如何在选择查询之上运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:20:46.287

你可能的意思是`to_char('12-02-2012'::date, 'DD-MM-YYYY')`。`to_char`无法将纯字符串转换为字符串。尽管如此，这似乎没有意义，您需要这两者之一，具体取决于您的日期常量的格式（无法从您提供的实际示例日期确定）：

```
select * from surgicals where to_char(dt_surgery ,'DD-MM-YYYY' ) = '12-02-2012';
select * from surgicals where to_char(dt_surgery ,'MM-DD-YYYY' ) = '12-02-2012'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:27:07.030

这里的错误是您正在对日期进行字符串比较。使用日期/时间数学，它可以考虑到时区等有趣的事情，并且仍然正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T12:23:51.090

也许这就是你需要的：

```
SELECT *
FROM surgicals 
WHERE date_trunc('day', dt_surgery) = '2012-02-12'
    ; 
```

# ruby-on-rails - Sinatra 路由正则表达式约束？

> ID：11225012
> 
> 赞同：3
> 
> 时间：2012-06-27T11:18:39.533
> 
> 标签：ruby-on-rails, routes, sinatra

我在 sinatra 中重建了一个小 Rails（太矫枉过正）应用程序。我有这样的路线：

```
match 'verify/:name/:bundle/:license' => 'verify#index', :constraints => { :bundle => /.*/ } 
```

就约束属性而言，我如何在 sinatra 中对其进行重构？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:33:35.737

您可以这样做：（取自[Sinatra 的文档](http://www.sinatrarb.com/intro#Routes)）

```
get %r{/hello/([\w]+)} do
  "Hello, #{params[:captures].first}!"
end 
```

或者在块本身内部：

```
get '/hello/:name' do
  raise Sinatra::NotFound unless params[:name].match /\w+/
  "Hello, #{params[:name]}!"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:54:42.823

如果您使用的是 ruby​​ 1.9，则可以在正则表达式路由中使用命名捕获，如下所示：

```
require 'sinatra'

get %r{verify/(?<name>\w+)/(?<bundle>.*)/(?<license>\w+)} do |name, bundle, license|
  # do stuff
end 
```

# php - 如何解决这个“Hybriauth 配置错误”？

> ID：11225018
> 
> 赞同：0
> 
> 时间：2012-06-27T11:18:48.170
> 
> 标签：php, hybridauth

我正在使用 hybridauth 从社交网站（如 facebook、twitter 等）获取用户信息。[PHP lib 连接](http://hybridauth.sourceforge.net/) 我使用 install.php 配置，它在 hybridauth 文件夹本身中可用。

当我尝试使用我自己的应用程序中可用的一些示例时，我收到以下错误

```
Hybriauth configuration error.

Original error message: Hybriauth config does not exist on the given path. 
```

这是我的完整代码：（index.php）

```
<?php
    // start a new session (required for Hybridauth)
    session_start();

    // change the following paths if necessary

    //require_once( str_replace('//','/',dirname(__FILE__).'/') .'folder/sub.php'); 

    $config = dirname(__FILE__).'hybridauth/config.php';
    require_once( "hybridauth/Hybrid/Auth.php" );
    try{
    // create an instance for Hybridauth with the configuration file path as parameter
    $hybridauth = new Hybrid_Auth( $config );
    // try to authenticate the user with twitter,
    // user will be redirected to Twitter for authentication,
    // if he already did, then Hybridauth will ignore this step and return an instance of the adapter
    $twitter = $hybridauth->authenticate( "Twitter" );

    // get the user profile
    $twitter_user_profile = $twitter->getUserProfile();
    echo "Ohai there! U are connected with: <b>{$twitter->id}</b><br />";
    echo "As: <b>{$twitter_user_profile->displayName}</b><br />";
    echo "And your provider user identifier is: <b>{$twitter_user_profile->identifier}</b><br />";

    // debug the user profile
    print_r( $twitter_user_profile );

    // exp of using the twitter social api: return users count of friends, followers, updates etc.
    $account_totals = $twitter->api()->get( 'account/totals.json' );

    // print recived stats
    echo "Here some of yours stats on twitter: " . print_r( $account_totals, true );

    // disconnect the user ONLY form twitter
    // this will not disconnect the user from others providers if any used nor from your application
    echo "Logging out..";
    $twitter->logout();
    }
    catch( Exception $e ){
    // Display the recived error,
    // to know more please refer to Exceptions handling section on the userguide
    switch( $e->getCode() ){
    case 0 : echo "Unspecified error."; break;
    case 1 : echo "Hybriauth configuration error."; break;
    case 2 : echo "Provider not properly configured."; break;
    case 3 : echo "Unknown or disabled provider."; break;
    case 4 : echo "Missing provider application credentials."; break;
    case 5 : echo "Authentification failed. "
    . "The user has canceled the authentication or the provider refused the connection.";
    break;
    case 6 : echo "User profile request failed. Most likely the user is not connected "
    . "to the provider and he should authenticate again.";
    $twitter->logout();
    break;
    case 7 : echo "User not connected to the provider.";
    $twitter->logout();
    break;
    case 8 : echo "Provider does not support this feature."; break;
    }

    // well, basically your should not display this to the end user, just give him a hint and move on..
    echo "<br /><br /><b>Original error message:</b> " . $e->getMessage();
    } 
```

我的文件夹结构如下：

```
project folder : 
 slingshare
   --hybridauth
       -- Hybrid
            --Auth.php
   --config.php
index.php 
```

因为我对此很陌生，所以`PHP`我无法找到它，请帮我找到它。

问候托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:21:02.523

`dirname`会给你一些`/my/website/scripts`没有结尾斜线的东西。

因此您需要将代码更改为：

```
$config = dirname(__FILE__).'/hybridauth/config.php'; 
```

顺便说一句，考虑为你的 require()s 和 include()s 使用绝对路径

# playframework-2.0 - Ebean Play框架2多对多关联加载

> ID：11225019
> 
> 赞同：2
> 
> 时间：2012-06-27T11:18:53.137
> 
> 标签：playframework-2.0, ebean

Play Framework 2 在这里遇到了一些麻烦。有两个类：

```
@Entity
public class User extends Domain {

    @Id
    public Long id;
    public String name;
    public String surname;
    public String phoneNumber;

    @Lob
    public String comment;

    @ManyToMany
    public Set<Band> groups = new HashSet();
}

@Entity
public class Band extends Domain {

    @Id
    public Long id;

    public String name;

    @Lob
    public String comment;

    @ManyToMany(mappedBy="groups")
    public Set<User> users = new HashSet();
} 
```

以及访问 User.groups 的问题。正在做

```
System.out.println(user.groups); 
```

返回以下内容：

> 延迟的 BeanSet

就像在[这个](https://stackoverflow.com/questions/11176013/avaje-ebean-manytomany-deferred-beanset)问题中一样。所以问题是我应该做些什么来让它加载吗？

但是运行此代码会使一切都按预期进行。

```
Band.find.all();
System.out.println(user.groups); 
```

这种行为的原因是什么？

PS Domain 类是模型继承者，它保留了很少的静态方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:22:41.160

这是MM关系`user.groups`，`Set<Band>`不仅仅是`Band`类型。你需要遍历它......

首先，您需要`Finder`在您的课程中创建一个（如果您还没有）：

`User:`

```
public static Finder<Long, User> find 
        = new Finder<Long, User>(Long.class, User.class); 
```

`Band:`

```
public static Finder<Long, Band> find 
        = new Finder<Long, Band>(Long.class, Band.class); 
```

接下来，您需要获取并迭代 allUsers 作为`List<User>`AND 内部迭代`Set<Band>`（可用 as `user.groups`）：

```
List<User> allUsers = User.find.all();
for (User user : allUsers) {
    Logger.info("User's name is " + user.name);
    for (Band group : user.groups) {
        Logger.info(user.name + " in group " + group.name);
    }
} 
```

当然，当你会找到单一的`Band`即。`Band.find.byId(1L)`你不需要迭代它。

不要忘记导入`Logger`：

```
import play.Logger; 
```

这比`System.out.println()`

# python - 将变量传递给对话框

> ID：11225021
> 
> 赞同：1
> 
> 时间：2012-06-27T11:19:02.820
> 
> 标签：python, gtk, python-2.7, pygtk, canonical-quickly

我需要将消息传递给错误对话框，以将其显示给用户。

## 第一次尝试

*首选项对话框.py*

```
dlgError = ErrorDialog ('Have you been messing with the configuration files?')
dlgError.run () 
```

*错误对话框.py*

```
global message = None

def __new__(cls, msg):
    builder = get_builder('ErrorDialog')
    new_object = builder.get_object('error_dialog')
    new_object.finish_initializing(builder)

    global message
    message = msg

    return new_object

def finish_initializing(self, builder):

    # Get a reference to the builder and set up the signals.
    self.builder = builder
    self.ui = builder.get_ui(self)

    global message
    self.builder.get_object ('lblMessage').set_text (message) 
```

## 第二次尝试

*首选项对话框.py*

```
dlgError = ErrorDialog ()
dlgError.message = 'Have you been messing with the configuration files?'
dlgError.run () 
```

*错误对话框.py*

```
global message = None

def __new__(cls):
    builder = get_builder('ErrorDialog')
    new_object = builder.get_object('error_dialog')
    new_object.finish_initializing(builder)

    return new_object

def finish_initializing(self, builder):

    # Get a reference to the builder and set up the signals.
    self.builder = builder
    self.ui = builder.get_ui(self)

    global message
    self.builder.get_object ('lblMessage').set_text (message) 
```

两者都抛出相同的异常；

```
self.builder.get_object ('lblMessage').set_text (message)
NameError: global name 'message' is not defined 
```

请协助。我正在使用 Quickly、GTK 3 和 Python 2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:25:35.110

Why not make the `message` a member of the class instance, by setting it in `__init__`?

```
def __init__(self, msg):
  self._message = msg

def finish_initializing(self, builder):
  self.builder.get_object("lblMessage").set_text(self._message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:58:48.413

我设置了一个对话框，在其中我向对话框传递了一个变量以将文本放入输入框中。诀窍是将变量传递给**new**，然后在调用 finish.initializing() 时将其放入其中。这是代码：

```
class QuerynameDialog(Gtk.Dialog):
    __gtype_name__ = "QuerynameDialog"

    def __new__(cls, name):
        """Special static method that's automatically called by Python when 
        constructing a new instance of this class.

        Returns a fully instantiated QuerynameDialog object.
        """
        builder = get_builder('QuerynameDialog')
        new_object = builder.get_object('queryname_dialog')
        new_object.finish_initializing(builder,name)
        return new_object

    def finish_initializing(self, builder,name):
        """Called when we're finished initializing.

        finish_initalizing should be called after parsing the ui definition
        and creating a QuerynameDialog object with it in order to
        finish initializing the start of the new QuerynameDialog
        instance.
        """
        # Get a reference to the builder and set up the signals.
        self.builder = builder
        self.ui = builder.get_ui(self)
        self.builder.get_object('name_entry').set_text(name) 
```

# spring - Spring中的MessageInterpolator

> ID：11225023
> 
> 赞同：5
> 
> 时间：2012-06-27T11:19:07.723
> 
> 标签：spring, hibernate-validator

我使用 Spring 3.1.1 和 Hibernate-validator 4.3.0.Final 并且在更改默认 MessageInterpolator 时遇到问题，它从 ValidationMessages（在类路径中）获取验证消息。

我想使用 ResourceBundleMessageInterpolator 从我的 spring messageSource 中获取消息

我在 application-context.xml 中做了这样的事情：

```
<bean id="resourceBundleMessageInterpolator"
      class="org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator">
    <constructor-arg index="0">
        <bean class="org.springframework.validation.beanvalidation.MessageSourceResourceBundleLocator">
            <constructor-arg index="0" ref="messageSource"/>
        </bean>
    </constructor-arg>
</bean>
<bean id="validator"
      class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="messageInterpolator" ref="resourceBundleMessageInterpolator"/>
</bean> 
```

当我在日志中启动我的 Web 应用程序时，我看到：

```
11:04:07,402 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] - 
Setting custom MessageInterpolator of type
 org.springframework.validation.beanvalidation.LocaleContextMessageInterpolator 
11:04:07,402 DEBUG [org.hibernate.validator.internal.engine.ConfigurationImpl] - 
Setting custom ConstraintValidatorFactory of type org.springframework .validation.beanvalidation.SpringConstraintValidatorFactory 
```

如您所见，这不是我想要的 ResourceBundleMessageInterpolator。这是 LocaleContextMessageInterpolator

后来，当我尝试验证某些内容时，我只是从 ValidationMessages.properties 中获取消息，而不是从 spring 消息源中获取消息：

```
11:08:09,397 DEBUG [org.hibernate.validator.resourceloading.PlatformResourceBundleLocator] - 
ValidationMessages not found.
11:08:09,413 DEBUG [org.hibernate.validator.resourceloading.PlatformResourceBundleLocator] - 
org.hibernate.validator.ValidationMessages found. 
```

从application-context.xml可以看到我想用MessageSourceResourceBundleLocator，但是用了，不知道为什么是PlatformResourceBundleLocator

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T12:54:30.950

您不必自己声明`ResourceBundleMessageInterpolator`和`MessageSourceResourceBundleLocator`bean（除非您必须），它们是`LocalValidatorFactoryBean`在您提供时创建的`messageSource`：

```
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource" ref="messageSource"/>
 </bean> 
```

（它在引擎盖下做到了这一点：）

```
public void setValidationMessageSource(MessageSource messageSource) {
    this.messageInterpolator = HibernateValidatorDelegate.buildMessageInterpolator(messageSource);
}

// (...)

private static class HibernateValidatorDelegate {

    public static MessageInterpolator buildMessageInterpolator(MessageSource messageSource) {
        return new ResourceBundleMessageInterpolator(new MessageSourceResourceBundleLocator(messageSource));
    }
} 
```

那么通过简化的 bean 定义，你会得到相同的调试输出吗？您在哪里使用“验证器”参考？例如，您可能必须使用`<mvc:annotation-driven validator="validator">`。

# asp.net - 如何使用输入控件在 asp.net 中添加日期选择器？

> ID：11225026
> 
> 赞同：0
> 
> 时间：2012-06-27T11:19:11.697
> 
> 标签：asp.net

我正在使用 datapicker jquery，但它不起作用。任何人都可以帮助我，我是 Dnn 的新手。如何使用输入控件在 asp.net 中添加日期选择器？任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:27:02.880

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>

<div class="demo">

<p>Date: <input id="datepicker" type="text"></p>

</div> 
```

Jquery 网站上有一些很好的示例，说明如何使用控件以及您可以应用的不同选项。你想做一些特别的事情吗？ [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

# gwt - 如何获取 Google Chrome 扩展的 DOM 窗口参考？

> ID：11225027
> 
> 赞同：0
> 
> 时间：2012-06-27T11:19:15.917
> 
> 标签：gwt, google-chrome, google-chrome-extension, firefox-addon

我正在将 Firefox 扩展移植到使用 GWT 构建的 google chrome。

在***链接器***中，我需要指定**$wnd**和**$doc**变量。

Firefox中的等价物如下：

```
var $wnd = Cc["@mozilla.org/appshell/appShellService;1"].getService(Ci.nsIAppShellService).hiddenDOMWindow;
var $doc = $wnd.document; 
```

[此处](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIAppShellService)解释的属性 hiddenDOMWindow返回（单例）应用程序隐藏窗口，由该 AppShellService 自动创建和维护，并且是只读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:11:02.127

Chrome 扩展程序中的后台脚本总是在一个窗口（背景窗口）内运行。所以你可以从后台脚本访问你自己的窗口：

```
var $wnd = window;
var $doc = $wnd.document; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:10:05.577

chrome.extension API 中有[getViews()](http://code.google.com/chrome/extensions/extension.html#method-getViews)方法。您可以使用此方法获取窗口的文档。

# php - 如何从其他网页获取内容并存储在数据库中

> ID：11225029
> 
> 赞同：0
> 
> 时间：2012-06-27T11:19:30.113
> 
> 标签：php, curl

地狱之友

我需要从这里获取比赛结果

```
"http://www.drf.com/race-results/BHP/USA/2012-06-23/D" 
```

并想存储在我的数据库中，我需要获取比赛 1、比赛 2、比赛 3 等的所有记录

请建议我使用此代码，但它向我显示整页我只需要特定信息

```
 <?php
       $ch = curl_init();   
      //Fetch the timeline
         curl_setopt($ch, CURLOPT_URL, 'http://www.drf.com/race-results/BHP/USA/2012-06-24/D');
 //send data via $_GET
 //curl_setopt($ch, CURLOPT_GET, 0);

//do not return the header information
      curl_setopt($ch, CURLOPT_HEADER, 0);
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE);

//If SSL verification is needed. Delete if not needed
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE);

    //Give me the data back as a string... Don't echo it.
      //curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

        //Warp 9, Engage!

       $content = curl_exec($ch);

       //Close CURL connection & free the used memory.

       curl_close($ch);
         ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:39:39.720

我建议使用[Goutte](https://github.com/fabpot/Goutte)库。它可以让您使用文档齐全的 API 抓取和解析远程站点。您甚至可以点击链接并提交表格。

文档中的示例用法：

```
use Goutte\Client;

$client = new Client(); 
```

使用 request() 方法发出请求：

```
$crawler = $client->request('GET', 'http://www.symfony-project.org/'); 
```

该方法返回一个 Crawler 对象 (Symfony\Component\DomCrawler\Crawler)。

点击链接：

```
$link = $crawler->selectLink('Plugins')->link();
$crawler = $client->click($link); 
```

根据 CSS 类提取数据并输出文本：

```
$nodes = $crawler->filter('.error_list');
if ($nodes->count())
{
  die(sprintf("Authentification error: %s\n", $nodes->text()));
}

printf("Nb tasks: %d\n", $crawler->filter('#nb_tasks')->text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:21:20.213

您应该查看 PHP dom 解析器。[关联](http://php.net/manual/en/book.dom.php)

解析 HTML 页面以获取所需的数据并将其保存到数据库中。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:28:24.977

Curl 将返回该站点的页面 HTML 代码，这是预期的。

转到实际站点，确定显示结果的 div。然后使用 PHP dom 解析器提取特定部分的数据，甚至可以提取字符串（简单但效率低，不推荐）。

从部分中去除 HTML 标签并保存所需的数据，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T12:49:32.770

使用 PHP simplehtmldom 解析器从 HTML [http://simplehtmldom.sourceforge.net/中提取内容](http://simplehtmldom.sourceforge.net/)

# symfony - 在 symfony-2 中更新实体

> ID：11225031
> 
> 赞同：0
> 
> 时间：2012-06-27T11:19:34.223
> 
> 标签：symfony, doctrine

我使用以下命令从我的数据库中创建了实体

```
#1 php app/console doctrine:mapping:convert xml ./src/Acme/DemoBundle/Resources/config/ doctrine/metadata/orm --from-database --force

#2 php app/console doctrine:mapping:import AcmeDemoBundle yml

#3 php app/console doctrine:generate:entities AcmeDemoBundle 
```

之后我可能会更改数据库中的一些表。

我应该遵循哪些步骤来反映 symfony 框架的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:36:17.433

你不应该在 Symfony2 之外改变你的数据库。现在您应该手动更新 YML 配置文件并再次运行 #3 命令或[直接从数据库模式覆盖您的实体](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

# php - 带有希腊字符的 substr

> ID：11225034
> 
> 赞同：5
> 
> 时间：2012-06-27T11:19:50.110
> 
> 标签：php, character-encoding, substr

我在一个字符串中有 5 个希腊字符。在我在 php 中使用 substr 之后，输出类似于 α�。应该是αβγ。关于编码的任何建议？我试过了

header ('内容类型: text/html; charset=utf-8');

没有结果。

```
 <?php
          $string = "αβγδε";
          $thedoc = substr($string, 0, 3); 
          echo $thedoc."<br/>";
        ?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T12:07:34.083

```
$thedoc = mb_substr($string, 0, 3, 'UTF-8'); 
```

您需要使用[`mb_substr`](http://php.net/manual/en/function.mb-substr.php)而不是`substr`，并且您需要将在此上下文中使用的 PHP 的内部编码设置为 UTF-8。

该`substr`函数基于一个简单的字符模型，其中每个字符都是一个 8 位字节。使用 just `substr($string, 0, 3)`，您将获得字符串的前 3 个字节。UTF-8 编码中的希腊字母需要两个字节，因此您会得到 alpha (α) 和 beta 的“一半”，这是其内部表示中的第一个字节，这不是有效的 UTF-8 数据，因此使用“替换”显示字符” �（表示字符级数据错误）。

在实践中，您也可以使用`substr($string, 0, 6)`，获取前 6 个字节（3 个字符），但这是一种丑陋的方式，并且依赖于文本是专门用字母表示的，每个字母在 UTF-8 中占用 2 个字节，因此它不适用于例如混合拉丁文和希腊文。使用可以处理任何 UTF-8 数据的方法要好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-11T08:45:40.110

请试试这个，你会解决你的问题。

iconv_substr($string, 0, 1, 'utf-8');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:28:24.123

当您在 PHP 代码中写出字符时，请务必检查 PHP 文件本身的编码。为了在浏览器中显示 UTF-8 字符，您还应该在 中包含 content-type META 标签，如下所示：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:29:45.437

您也可以尝试将值强制为 utf8 字符串

```
echo utf8_encode( $thedoc ) . '<br />'; 
```

# iphone - 如何在单击 tableview 单元格时将弹出视图用作可折叠视图

> ID：11225037
> 
> 赞同：1
> 
> 时间：2012-06-27T11:19:52.813
> 
> 标签：iphone, uitableview, uipopovercontroller

我希望单击 tableview 单元格时会出现一个弹出视图，并且所有单元格都应该在 popover 下方移动。就像可折叠视图的情况一样。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:49:29.550

[此示例项目在表格视图单元格中包含弹出视图。](https://github.com/werner77/WEPopover)

添加`[self.yourView removefromsuperView ];`

# c# - 使用实体框架进行投影

> ID：11225039
> 
> 赞同：4
> 
> 时间：2012-06-27T11:19:59.607
> 
> 标签：c#, entity-framework, projection, navigation-properties

我有一个关于使用实体框架进行预测的问题。

我有三张表：简介、传记和传记翻译

我想做以下预测：（传记 = IQueryable）

```
return biographies.Select(b => new ProfileBiography
                               {
                                 Id = b.BiographieID,
                                 OwnerId = b.Profile.ProfileID,
                                 Translations = 
                              b.Translations.Select(t => new DocumentTranslation()
                                           {
                                             DocumentId = b.BiographieID,
                                             FileName = t.BiographyTextFile,
                                             Title = t.Title,
                                             Text = t.Text,
                                             LanguageId = t.LanguageID
                                           })
                                } 
```

我的问题： OwnerId 投影正确，但翻译次数始终为 0。

投影不适用于集合属性吗？

我也试过 biographies.Inlcude("Translations")，但结果是一样的。

## 更新

我创建了一个小型测试项目，您可以在这里找到：

[测试项目.zip](https://dl.dropbox.com/u/33207311/TestProject.zip)

只有 3 个表（包括创建和插入语句）、一个 EDMX 文件和一个用于加载传记的类。我仍然无法使用它来投影集合导航属性，简单的导航属性可以正常工作。也许有人可以从测试项目中看到我做错了什么......

## 更新

我尝试了一种新方法，但仍然没有运气：

```
using (var context = new DatabaseEntities())
        {
            return context.BiographySets
                .Where(bio => bio.ProfileId == profileId)
                .Select(bio => new DocumentModel()
                {
                    Id = bio.Id,
                    OwnerId = bio.Profile.Id,
                    Translations = context.BiographyTranslationSets.Where(t => t.BiographyId == bio.Id)
                        .Select(t => new DocumentTranslation()
                        {
                            DocumentId = bio.Id,
                            LanguageId = t.LanguageId,
                            Text = t.Text
                        })
                }).ToList();
        } 
```

## 更新

如果我使用匿名类型，它会出人意料地工作......

```
using (var context = new DatabaseEntities())
        {
            return context.BiographySets
                .Where(bio => bio.ProfileId == profileId)
                .Select(bio => new 
                {
                    Id = bio.Id,
                    OwnerId = bio.Profile.Id,
                    Translations = bio.Translations
                                           .Select(t => new 
                                           {
                                               DocumentId = bio.Id,
                                               LanguageId = t.LanguageId,
                                               Text = t.Text
                                           })
                }).ToList();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:06:47.370

好的，我发现了问题：

这是我的 DocumentModel 课程：

```
public class DocumentModel
{
    public DocumentModel()
    {
        _translations = new List<DocumentTranslation>();
    }

    public int Id { get; set; }

    public int OwnerId { get; set; }

    private List<DocumentTranslation> _translations;
    public IEnumerable<DocumentTranslation> Translations
    {
        get { return _translations; }
        set { _translations = value.ToList(); }
    }
} 
```

这就是问题所在：

```
set { _translations = value.ToList(); } 
```

我不能在我的 Setter 中调用 ToList()，因为它会破坏查询。

# sql-server - T-SQL SET 语法是否存在性能差异？

> ID：11225043
> 
> 赞同：0
> 
> 时间：2012-06-27T11:20:29.357
> 
> 标签：sql-server, tsql

> **可能重复：**
> [T-SQL 中 SELECT 与 SET 的速度](https://stackoverflow.com/questions/189588/speed-of-select-vs-set-in-t-sql)

我正在使用 SQL Server 2008 R2

当我使用

```
DECLARE @out INT 
```

哪个更快：

```
SELECT TOP 1 @out = myCol FROM myTable 
```

或者

```
SET @out = (SELECT TOP 1 myCol FROM myTable) 
```

如果 myCol 是主键、索引或常规列怎么办？

* * *

编辑：（至于mark-schultheiss评论）

问题是，我正在寻找延误的原因。

例如：

3x`SET = (SELECT .. FROM .. WHERE)`比具有 3 个任务的 1 SELECT 慢，例如：

```
SELECT TOP 1 @out1 = myCol1, @out2 = myCol2, @out3 = myCol3 
FROM myHugeTable WHERE myCol4 = 7 
```

其中 myCol1 是 PK，myCol2 是 IX，myCol3 是常规列，myCol4 是非唯一索引

那么，是否存在可以避免的导致延迟的已知问题？

# javascript - 如何在javascript中生成浅色阴影

> ID：11225050
> 
> 赞同：2
> 
> 时间：2012-06-27T11:20:50.260
> 
> 标签：javascript

大家好，我正在使用 JavaScript 并想为我的图表生成颜色。我希望每条线都有一种新颜色，而且颜色应该是浅色的。

我已阅读有关 java 脚本中颜色生成的问题

[JavaScript 中的随机颜色生成器](https://stackoverflow.com/questions/1484506/random-color-generator-in-javascript)

因为我想要我的线有新的颜色，所以随机数生成在我的情况下不起作用而且颜色应该很浅

我已阅读有关颜色 RGB 值的信息，但我没有发现它们遵循任何模式来选择浅色

所以任何人都可以请指导我，因为有没有一种方法可以按顺序生成颜色（避免随机）并只选择浅色或任何其他功能以使深色更亮

谢谢

[http://cloford.com/resources/colours/500col.htm](http://cloford.com/resources/colours/500col.htm)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T11:46:52.693

你可以这样试试：

```
var new_light_color = 'rgb(' + (Math.floor((256-229)*Math.random()) + 230) + ',' + 
                                    (Math.floor((256-229)*Math.random()) + 230) + ',' + 
                                    (Math.floor((256-229)*Math.random()) + 230) + ')'; 
```

这样，您生成的颜色在 230 - 256 范围内具有红色、绿色和蓝色，这是一种浅色。您可以通过更改数字来降低颜色，以获得更深的颜色。

# c# - 如何在 C# 中读取 XML 文件？

> ID：11225051
> 
> 赞同：5
> 
> 时间：2012-06-27T11:20:56.543
> 
> 标签：c#, xml, linq, linq-to-xml

我有以下 XML 文件，我想知道阅读此 XML 文件的最佳方法

```
<MyFile> 
  <Companies> 
    <Company>123</Company> 
    <Company>456</Company>
    <Company>789</Company> 
  </Companies> 
</MyFile> 
```

作为输出，我需要像“123,456,789”这样的值的集合，或者它可以是字符串数组[]

我们可以使用 Linq to xml 吗？如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T11:25:12.617

```
var xdoc = XDocument.Load(PATH_TO_FILE);
var companies = xdoc.Descendants("Company").Select(c => (string)c).ToArray(); 
```

This will give you a `string[]`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T11:25:45.720

使用 LINQ to XML，包括`using System.Xml.Linq;`

```
 XDocument xmlDoc = XDocument.Load("yourfile.xml");
   var test = xmlDoc.Descendants("Companies").Elements("Company").Select(r => r.Value).ToArray();
   string result = string.Join(",", test); 
```

输出将是：

> 123,456,789

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T12:01:22.343

在数据集中，您可以读取 xml 文件

以下是在 DataSet 中读取 XML 文件的代码行

```
DataSet dsMenu = new DataSet(); //Create Dataset Object

dsMenu.ReadXml("XMLFILENAME.XML"); // Read XML file in Dataset

DataTable dtXMLFILE// Create DatyaTable object

dtXMLFILE= dsMenu.Tables[0]; // Store XML Data in Data Table 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T11:24:41.880

```
var xmlStr=@"<MyFile> 
  <Companies> 
    <Company>123</Company> 
    <Company>456</Company>
    <Company>789</Company> 
  </Companies> 
</MyFile>";

var xDoc = XDocument.Parse(xmlStr);
var companyIds = xDoc.Descendants("Company").Select(e => (int)e); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-15T06:53:36.003

```
string pathToXmlFile = @"C:\test.xml";
XElement patternDoc = XElement.Load(pathToXmlFile);
List<string> values = new List<string>();
foreach (var element in patternDoc.Elements("Companies").Elements("Company"))
{
   values.Add(element.Value);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-27T17:18:31.047

In the past, I have used an `XmlReader` and had no difficulties.

MSDN Documentation: [http://msdn.microsoft.com/en-us/library/system.xml.xmlreader(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader(v=vs.110).aspx)

It is very straightforward and the documentation is pretty well written. A quick demonstration of how to use it:

```
XmlReader reader = XmlReader.Create(targetFile);

while (reader.Read())
{
    switch (reader.NodeType)
    {
        case XmlNodeType.Element:
            if (reader.Name.Equals("Company")
            {
                // Read the XML Node's attributes and add to string
            }
            break;
    }
} 
```

# asp.net - 文件处理程序下载中断+会话消失

> ID：11225052
> 
> 赞同：0
> 
> 时间：2012-06-27T11:20:58.753
> 
> 标签：asp.net, ashx

我编写了一个 ashx 处理程序，它以安全的方式将文件流式传输到浏览器，我希望授权用户访问这些文件。

问题是当我处理大文件（+40 MB）时，会话消失了+浏览器下载在约 40 MB 后突然中断。

我已将 web.config 配置为在 240 分钟之前不超时。

在本地测试它不会给我同样的问题，在我的共享主机上测试它会。

任何人都可以指出我正确的方向吗？

我尝试了有无 Reponse.Clear()

```
public void ProcessRequest(HttpContext context)
    {
        int id;

        if (new Core.SecurityManager().CurrentUser != null)
        {

            try
            {
                id = Convert.ToInt32(context.Request.QueryString["id"]);
            }
            catch
            {
                throw new ApplicationException("id could not  be parsed.");
            }

            string filename = new DocumentFactory().SelectDocumentById(id).Filename;

            string filePath = context.Server.MapPath("~/uploads/" + filename);

            //context.Response.Clear();

            context.Response.AddHeader("content-disposition", "attachment; filename=" + filename);

            context.Response.ContentType = "application/octet-stream";

            context.Response.WriteFile(filePath);

            //context.Response.Flush();

            //context.Response.End();
        }
        else
        {
            throw  new AuthenticationException();
        }

    } 
```

网络配置：

```
 <sessionState mode="InProc" cookieless="false" timeout="240"></sessionState> 
```

编辑尝试以下，但仍然下载中断：

FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);

```
 byte[] byteArray = new byte[fs.Length];

            using (MemoryStream ms = new MemoryStream(byteArray))
            {
                long dataLengthToRead = ms.Length;
                int blockSize = dataLengthToRead >= 5000 ? 5000 : (int)dataLengthToRead;
                byte[] buffer = new byte[dataLengthToRead];
                context.Response.Clear();

                // Clear the content of the response
                context.Response.ClearContent();
                context.Response.ClearHeaders();

                // Buffer response so that page is sent
                // after processing is complete.
                context.Response.BufferOutput = true;

                // Add the file name and attachment,
                // which will force the open/cance/save dialog to show, to the header
                context.Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

                // bypass the Open/Save/Cancel dialog
                //Response.AddHeader("Content-Disposition", "inline; filename=" + doc.FileName);

                // Add the file size into the response header
                context.Response.AddHeader("Content-Length", fs.Length.ToString());

                // Set the ContentType
                context.Response.ContentType = "application/octet-stream";

                // Write the document into the response
                while (dataLengthToRead > 0 && context.Response.IsClientConnected)
                {
                    Int32 lengthRead = ms.Read(buffer, 0, blockSize);
                    context.Response.OutputStream.Write(buffer, 0, lengthRead);
                    //Response.Flush();
                    dataLengthToRead = dataLengthToRead - lengthRead;
                }

                context.Response.Flush();
                context.Response.Close();
            }

            // End the response
            context.Response.End(); 
```

通过添加完整路径通过浏览器直接访问文件时，下载什么都没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:32:49.960

虽然在 IIS 中传递大文件的正确方法是以下选项，

1.  在 WebLimits 中将 MinBytesPerSecond 设置为零（这肯定有助于提高性能，因为 IIS 会选择关闭持有 KeepAlive 连接的客户端，并进行较小的传输）

2.  Allocate More Worker Process to Application Pool，我设置为 8，现在只有当你的服务器分发更大的文件时才应该这样做。这肯定会导致其他站点的运行速度变慢，但这将确保更好的交付。我们设置为 8，因为该服务器只有一个网站，它只提供大量文件。

3.  关闭应用程序池回收

4.  关闭会话

5.  保持缓冲开启

6.  在以下每个步骤之前，检查 Response.IsClientConnected 是否为真，否则放弃并且不发送任何内容。

7.  发送文件前设置 Content-Length

8.  刷新响应

9.  写入输出流，并定期刷新

# java - 计算文件中的行数

> ID：11225058
> 
> 赞同：2
> 
> 时间：2012-06-27T11:21:10.780
> 
> 标签：java

我正在尝试用java开发一个程序，它将计算给定文件夹中的文件数以及每个单独文件中的代码行。我目前的代码只能从文件夹中提取一个文件并计算该特定文件的代码行数。请帮助我了解如何从这里开始。

我当前的代码：

```
public class FileCountLine {

    public static void main(String[] args) throws FileNotFoundException {

        File file = new File("E:/WalgreensRewardsPosLogSupport.java"); 
        Scanner scanner = new Scanner(file);    
        int count = 0;               
        while (scanner.hasNextLine()) { 
            String line = scanner.nextLine();   
        count++;              
        }           
        System.out.println("Lines in the file: " + count);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T11:23:24.143

利用

```
String dir ="/home/directory";
File[] dirContents = dir.listFiles(); 
```

列出每个文件并在每个文件上应用您的代码。将文件名和行数存储在 Map 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:37:24.780

@Akhil 的想法，实现了：

```
Map<String, Integer> result = new HashMap<String, Integer>();

File directory = new File("E:/");
File[] files = directory.listFiles();
for (File file : files) {
    if (file.isFile()) {
        Scanner scanner = new Scanner(new FileReader(file));
        int lineCount = 0;
        try {
            for (lineCount = 0; scanner.nextLine() != null; lineCount++);
        } catch (NoSuchElementException e) {
            result.put(file.getName(), lineCount);
        }

    }
}

System.out.println(result); 
```

# ruby-on-rails - 没有嵌套资源时出现“ActionController::RoutingError: No route matches”错误

> ID：11225060
> 
> 赞同：0
> 
> 时间：2012-06-27T11:21:16.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在将一个项目从一个代码库迁移到另一个代码库，以清理大量积累的垃圾，转移到新的表示层等。

其中一种关系是规范的`User has_many Order`，我已将其表示为嵌套资源`routes.rb`：

```
resources :users do
  resources :orders
end 
```

所以我有命名路线`user_orders_path(@user)`。如果用户有订单，它工作得很好，但如果用户没有订单，尝试渲染路由会出现以下错误：

```
ActionController::RoutingError (No route matches {:controller=>"orders", 
:user_id=>#<User id: 472, account_id: nil, first_name: "Denis", last_name: 
"Haskin", ...etc... , last_sign_in_ip: "127.0.0.1">})
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:532:in `raise_routing_error'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:528:in `rescue in generate'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:520:in `generate'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:561:in `generate'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:586:in `url_for'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/url_for.rb:148:in `url_for'
from /Users/dwhsix/.rvm/gems/ruby-1.9.3-p0@zmx2/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:213:in `user_orders_path'
from (irb):24 
```

（我在 中提供了完整的堆栈跟踪`rails console`；由于某种原因，我没有在服务器日志中获得此错误的完整堆栈跟踪。）

我有点不知所措来解释（和解决）这个问题，我希望这可能会给某人敲响警钟。我在一个新的空项目中对此进行了测试，当然它工作正常。我想接下来我会尝试尽可能多地剥离这些模型和控制器，然后开始添加部分，直到错误再次出现。因为我正在迁移现有代码，所以很难将其隔离为一小段示例代码。

（冒着可能混淆问题的风险，我已经开始在这个项目中使用 Ryan Bates 的[cancan](https://github.com/ryanb/cancan/)，我有点怀疑它可能在这里发挥作用，但我确实把它去掉并在没有它的情况下进行测试，没有改变这种不正确的行为。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:35:14.117

事实证明，用户/订单关系完全是一条红鲱鱼。 `user.rb`有一个`to_param`方法：

```
def to_param
  login
end 
```

对于某些用户来说，它返回 nil。这就是导致命名路由助手失败的原因。只是碰巧没有订单的用户和`to_param`返回 nil 的用户之间存在高度相关性，当我开始尝试为用户集成订单显示时，首先出现了这个错误。

# batch-file - NSIS 编译器和参数

> ID：11225063
> 
> 赞同：0
> 
> 时间：2012-06-27T11:21:25.143
> 
> 标签：batch-file, installation, nsis

如何在编译时在我的 nsis 脚本中设置一些变量？例如：

```
makensis.exe myscript.nsi "buildversion" 
```

我想在编译期间在我的脚本中设置 buildversion。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:54:16.850

```
makensis -Dbuildversion=1.2.3.4 myscript.nsi 
```

-D 设置一个 !define，而不是变量（`${adefine}`, `$avariable`），你必须得到 -D 的顺序和正确的脚本......

# save - 如何使用 red5 记录器保存为不是 *.flv 而是 ts 格式？

> ID：11225065
> 
> 赞同：0
> 
> 时间：2012-06-27T11:21:38.800
> 
> 标签：save, flv, red5

我使用 Red5 Media Server 成功录制了直播流。但是录制的视频保存为 *.flv，我希望它保存为 ts 格式。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:46:59.257

Red5 Media Server 始终将流保存为 flv 格式。如果要将文件转换为任何其他格式，可以使用 FFMPEG。检查[http://ffmpeg.org/](http://ffmpeg.org/)

希望这会有所帮助。干杯

# f# - 在不使用 List 的情况下获取列表列表 > 在 F# 中

> ID：11225068
> 
> 赞同：4
> 
> 时间：2012-06-27T11:21:50.883
> 
> 标签：f#

我这里有这个功能：

```
let ProcessFile (allLines: string list) = 
    let list = new List<List<string>>()

    let rec SplitFile (input: string list) =
        if input.Length <> 0 then
            list.Add(new List<string>(input.TakeWhile(fun x -> x <> "")))
            let nextGroup = input.SkipWhile(fun x -> x <> "").SkipWhile(fun x -> x = "")
            SplitFile (Seq.toList nextGroup)

    SplitFile allLines |> ignore
    list 
```

它以字符串列表的形式给出文件的内容，并将由空行分隔的每个组作为单独的列表，给我一个列表列表。

我的问题是，有没有更好的方法来做这个，它给我一个类似于字符串列表列表的东西，而不是我不得不使用 new List< List< string>>？因为这对我来说似乎不是特别整洁。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:16:49.390

更惯用的解决方案可能是：

```
let processFile xs =
  let rec nonEmpties n = function
    | [] as xs | ""::xs -> n, xs
    | _::xs -> nonEmpties (n+1) xs
  let rec loop xs =
    seq { match xs with
          | [] -> ()
          | ""::xs -> yield! loop xs
          | xs ->
              let n, ys = nonEmpties 0 xs
              yield Seq.take n xs
              yield! loop ys }
  loop xs 
```

其中嵌套`nonEmpties`函数计算给定列表前面有多少非空元素，并在最后一个非空元素之后返回计数和尾部列表，该`loop`函数跳过空元素并产生非空元素序列.

该解决方案的一些有趣特征：

*   完全尾递归，因此它可以处理任意长的非空字符串序列和非空字符串序列序列。

*   通过返回输入列表来避免复制。

在测试输入 1,000 个 1,000 个字符串的序列时，这个解决方案比 yamen 的快 8 倍，比 Tomas 的快 50%。

这是一个更快的解决方案，它首先将输入列表转换为数组，然后作用于数组索引：

```
let processFile xs =
  let xs = Array.ofSeq xs
  let rec nonEmpties i =
    if i=xs.Length || xs.[i]="" then i else
      nonEmpties (i+1)
  let rec loop i =
    seq { if i < xs.Length then
            if xs.[i] = "" then
              yield! loop (i+1)
            else
              let j = nonEmpties i
              yield Array.sub xs i (j - i)
              yield! loop j }
  loop 0 
```

On test input of 1,000 sequences of 1,000 strings this solution is 34x faster than yamen's and 6x faster than Tomas'.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:37:41.053

您的代码对我来说非常易读，但是递归地使用`TakeWhile`和使用`SkipWhile`效率相当低。这是一个简单的函数递归解决方案：

```
let ProcessFile (allLines: string list) =
  // Recursively processes 'input' and keeps the list of 'groups' collected
  // so far. We keep elements of the currently generated group in 'current'  
  let rec SplitFile input groups current = 
    match input with 
    // Current line is empty and there was some previous group
    // Add the current group to the list of groups and continue with empty current
    | ""::xs when current <> [] -> SplitFile xs ((List.rev current)::groups) []
    // Current line is empty, but there was no previous group - skip & continue
    | ""::xs -> SplitFile xs groups []
    // Current line is non-empty - add it to the current group
    | x::xs -> SplitFile xs groups (x::current)
    // We reached the end - add current group if it is not empty
    | [] when current <> [] -> List.rev ((List.rev current)::groups)
    | [] -> List.rev groups

  SplitFile allLines  [] []

ProcessFile ["a"; "b"; ""; ""; "c"; ""; "d"] 
```

`seq { ... }`基本上可以使用如下方式编写相同的代码。我们仍然需要使用`current`累加器`yield`（`yield!`

```
let ProcessFile (allLines: string list) =  
  let rec SplitFile input current = seq {
    match input with 
    | ""::xs when current <> [] -> 
        yield List.rev current
        yield! SplitFile xs []
    | ""::xs -> 
        yield! SplitFile xs []
    | x::xs -> 
        yield! SplitFile xs (x::current)
    | [] when current <> [] -> 
        yield List.rev current
    | [] -> () }

  SplitFile allLines [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:53:44.497

就个人而言，我喜欢一个班轮：

```
let source = ["a"; "b"; ""; ""; "c"; ""; "d"]

source                                                                       // can be any enumerable or seq
|> Seq.scan (fun (i, _) e -> if e = "" then (i + 1, e) else (i, e)) (0, "")  // add the 'index'
|> Seq.filter (fun (_, e) -> e <> "")                                        // remove the empty entries
|> Seq.groupBy fst                                                           // group by the index
|> Seq.map (fun (_, l) -> l |> Seq.map snd |> List.ofSeq)                    // extract the list only from each group (discard the index)
|> List.ofSeq                                                                // turn back into a list 
```

这里最大的问题是`Seq.groupBy`将整个列表读入内存，但无论如何你都在这样做。有一些实现`groupBy`只会查看相邻的条目，这就足够了，并且可以让您将文件输入为 a`Seq`而不是（例如，使用`File.ReadLines`而不是`File.ReadAllLines`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:08:03.493

How about using plain old List.fold

```
let processFile lines =
([], lines) ||>
List.fold(fun acc l -> 
    match acc with
        | [] when l = "" -> acc        // filter empty lines at the start of the file
        | [] -> [[l]]                  // start the first group
        | []::xss when l = "" -> acc   // filter continous empty lines
        | xs::xss when l = "" ->       // found an empty line, start a new group
            let rxs = List.rev xs      // reverse the current group before starting a new one
            []::rxs::xss
        | xs::xss -> (l::xs)::xss)     // continue adding to the current group
|> List.rev 
```

# c# - CA1051 适用于 windows phone 7,5

> ID：11225069
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:21:52.037
> 
> 标签：c#, .net, windows-phone-7

```
public class TestDB : DataContext
{
    public TestDB (string connectionString) : base(connectionString)
    {
    }

    public Table<MyClass> TableName;
}

[Table(Name = "TableName")]
public class MyClass
{
} 
```

因为字段“TestDB .TableName”在其声明类型之外可见，将其可访问性更改为私有并添加一个与该字段当前具有相同可访问性的属性以提供对其的访问

在执行 fxcop 所说的操作时，该值未插入到表中，而是给出了错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:12:48.043

我希望：

```
public Table<MyClass> TableName; 
```

看起来更像：

```
public Table<MyClass> TableName
{
    get
    {
        return GetTable<MyClass>();
    }
} 
```

# android - ViewPager 页面中设置图像的问题

> ID：11225071
> 
> 赞同：0
> 
> 时间：2012-06-27T11:21:55.693
> 
> 标签：android, resources, android-imageview

尝试在 ViewPager 中为我的 ImageView 设置图像资源时出现“找不到源”错误。但是如果我在 XML 中设置图像，我没有错误。但是，如果我在 XML 中设置图像，则在运行应用程序时不会显示它。我正在使用[viewpagerindictor](http://viewpagerindicator.com/)库和 android-support-v13.jar。活动代码

```
public class DataActivity extends Activity {

/** Called when the activity is first created. */
int obj_id, type_id, node_id;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page);

    Bundle ex = getIntent().getExtras();
    if (ex != null) {
        obj_id = ex.getInt("obj");
        type_id = ex.getInt("type");
        node_id = ex.getInt("node");
    }

    LayoutInflater inf = LayoutInflater.from(this);
    List<View> pages = new ArrayList<View>();

    View page = inf.inflate(R.layout.page, null);
    ImageView im = (ImageView)page.findViewById(R.id.im_v_obj1);
    im.setImageDrawable(getResources().getDrawable(R.drawable.obj1));
    pages.add(page);

    PageAdapter pa = new PageAdapter(pages);
    ViewPager vp = (ViewPager)findViewById(R.id.viewpager);
    TitlePageIndicator tpi = (TitlePageIndicator)findViewById(R.id.indicator);
    vp.setAdapter(pa);
    tpi.setViewPager(vp);

    }

} 
```

页面适配器代码

```
public class PageAdapter extends PagerAdapter {

List<View> pages = null;

private static String[] titles = new String[]
        {
            "Object 1"
        };

public PageAdapter(List<View> pages) {
    this.pages = pages;
}

public String getPageTitle( int position )
{
    return titles[ position ];
}

@Override
public Object instantiateItem(View collection, int pos) {
    View v = pages.get(pos);
    ((ViewPager)collection).addView(v, 0);
    return v;
}

@Override
public void destroyItem (View collection, int pos, Object view) {
    ((ViewPager)collection).removeView((View)view);
}

@Override
public int getCount() {
    return pages.size();
}

@Override
public boolean isViewFromObject(View v, Object obj) {
    return v.equals(obj);
} 
```

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/indicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:08:27.200

我有一个可能对您有用的非片段适配器解决方案。请看[我的帖子](https://stackoverflow.com/questions/13664155/dynamically-add-and-remove-view-to-viewpager)。

# api - Asana API 获取所有标签

> ID：11225076
> 
> 赞同：0
> 
> 时间：2012-06-27T11:22:02.137
> 
> 标签：api, tags, asana

我是 Asana API [https://github.com/ajimix/asana-api-php-class这个 PHP 类包装器的开发者](https://github.com/ajimix/asana-api-php-class)

在上次 Asana API 更新中，添加了标签支持。我将所有端点添加到我的班级，但我发现一个不起作用。这个： [https ://app.asana.com/api/1.0/tags](https://app.asana.com/api/1.0/tags)

它返回给我 HTTP 代码 0 ...

这也失败了：

```
curl -u API_KEY: https://app.asana.com/api/1.0/tags 
```

一切正常，按工作区获取标签，将标签添加到任务等。

但事实并非如此，文档说它应该可以工作。

![API 标签文档](../Images/9ce7c211f6170042e8d93ed5ade98731.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:20:01.390

（我在 Asana 工作）

这似乎适用于 Asana 的目的。如果您已登录 Asana，请尝试将该 URL 放入您的浏览器。

HTTP 状态代码 0 不是从 API 返回的内容。这很可能只是您的 HTTP 客户端上的一个代码，表明服务器从未返回响应。您可能有大量标签，因此响应时间过长或过大，但我们已经看到此特定请求成功返回数百个标签。

也许您的超时时间很短或其他一些连接问题？

# php - curl 获取源代码 GETparams

> ID：11225077
> 
> 赞同：0
> 
> 时间：2012-06-27T11:22:03.987
> 
> 标签：php, curl

我想从该页面获取 html 源代码： [http ://bahn.ltur.com/index/search/?lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Leipzig+Hbf&start_datum=01.07.2012&start_time= 23%3A49&end_datum=01.07.2012&end_time=23%3A51&SEA_adults=1&trainclass_spar=2](http://bahn.ltur.com/index/search/?lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Leipzig+Hbf&start_datum=01.07.2012&start_time=23%3A49&end_datum=01.07.2012&end_time=23%3A51&SEA_adults=1&trainclass_spar=2)

当我转到该网址时，我可以访问该网站。我无法通过 curl 获取源代码。不是在 bash "curl -iL url > site.html" 中，也不是在那个 php 脚本中：我得到了起始页 (bahn.ltur.com)。

发送 GET 请求的代码

```
$ch=curl_init();

curl_setopt($ch,CURLOPT_URL,'http://bahn.ltur.com/index/search/?lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Leipzig+Hbf&start_datum=01.07.2012&start_time=23%3A49&end_datum=01.07.2012&end_time=23%3A51&SEA_adults=1&trainclass_spar=2');
curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_exec($ch); 
```

我还尝试将 POST 参数发送到该特定页面 - 但没有运气。表格在该页面上： http: [//bahn.ltur.com/](http://bahn.ltur.com/) 带有 [...] 当您点击“搜索”时，您会在短时间内看到上面的网址（blah/index/search/?params[... ]）。

有什么帮助吗？

///////编辑：

///////回答：

第一个：从页面获取 cookie（w/GET-params） 第二个：转到详细信息页面并发送 cookie。

感谢@Daniel Stenberg 的提示！给他点名声！

```
/* get cookie */
$ckfile = tempnam ("/tmp", "CURLCOOKIE");
$ch=curl_init();
curl_setopt($ch,CURLOPT_URL,'http://bahn.ltur.com/index/search/?lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Leipzig+Hbf&start_datum=01.07.2012&start_time=23%3A49&end_datum=01.07.2012&end_time=23%3A51&SEA_adults=1&trainclass_spar=2');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
$html = curl_exec($ch);
/* get page */
$ch = curl_init("http://bahn.ltur.com/details");
curl_setopt($ch, CURLOPT_COOKIEFILE, $ckfile);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

echo $html;
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:25:32.697

Have you tried adding:

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

$html = curl_exec($ch); 
```

without the first option, curl will simply output whatever it's fetching. And for strict "goodness", you should check the return value from curl_exec as well:

```
if ($html === false) {
   die("Curl error: " . curl_error($ch));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:02:20.927

尝试在您的 cUrl 代码中添加以下内容

`curl_setopt($ch, CURLOPT_BINARYTRANSFER, true); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);`

SSL_VERIFYER 部分意味着如果它没有 SSL 证书，它不会注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:05:15.647

这很可能是因为搜索表单所在的页面设置了 cookie，所以当您发送搜索请求时，您也应该在那里传递 cookie。搜索页面似乎也设置/更新了 BAHNSESSID cookie。

# java - Apache PDFBox：将最后一页移动到第一页

> ID：11225080
> 
> 赞同：4
> 
> 时间：2012-06-27T11:22:07.003
> 
> 标签：java, apache, pdf

我正在用 Apache PDFBox 编写一个简单的 Java 应用程序。我有几个 PDF，其中最后一页是前几页内容的索引。

我需要将索引（最后一页）变成 PDF 文件的第一页。

可能吗？

我还发现了听起来比 Apache PDFBox 更好的[http://itextpdf.com/](http://itextpdf.com/)库，但在这种情况下，我不知道我是否可以做我需要的事情

或者我可以使用这个：[http ://saaspose.com/docs/display/pdf/How+to+Move+Page+within+a+Pdf+Document+%28Java+SDK%29](http://saaspose.com/docs/display/pdf/How+to+Move+Page+within+a+Pdf+Document+%28Java+SDK%29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T16:07:46.563

使用 PDFBox，您可以将原始 PDF 打开为 PDDocument，然后使用 getDocumentCatalog().getAllPages() 获取页面列表。按照您想要的顺序重新排列列表，并将每一页写到新文档中。

```
 PDDocument newDoc = new PDDocument();
        PDDocument oldDoc = PDDocument.load (args[0]);
        List allPages = oldDoc.getDocumentCatalog().getAllPages();

        // Code to rearrange the list goes here

        for ( int curPageCnt = 0; curPageCnt < allPages.size(); curPageCnt++ )
        {
            newDoc.addPage( ( PDPage )allPages.get ( curPageCnt ) );
        } // end for 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-15T18:02:49.683

我正在使用 PDFBox 2.0.0 版。这是我将最后一页移动到第一个位置的方法：

```
public static PDDocument moveLastPageToFirst(PDDocument documentToRearrangePages) {
    PDPageTree allPages = documentToRearrangePages.getDocumentCatalog().getPages();
    if (allPages.getCount() > 1) {
        PDPage lastPage = allPages.get(allPages.getCount() - 1);
        allPages.remove(allPages.getCount() - 1);
        PDPage firstPage = allPages.get(0);
        allPages.insertBefore(lastPage, firstPage);
    }
    return documentToRearrangePages;
} 
```

# mysql - 从一个表中选择行，只连接另一个表的一行

> ID：11225082
> 
> 赞同：3
> 
> 时间：2012-06-27T11:22:09.650
> 
> 标签：mysql, sql, select, join

我有两个表：Home(ID, name) 和 Photos(ID, homeid, filename, splash)

Home 主键是 ID，Photos 主键是 ID。一个主页可以有多张照片。Splash 可以是 0 或 1，对于每个 HomeID，最多一张照片的 splash=1。

现在我想 SELECT * FROM Home 合并每个家庭的启动画面，如果存在，否则启动画面返回 null。

我能怎么做？

这是表格的示例：

```
Home
ID     name
1      home1
2      home3252
3      home5326

Photos
ID     homeid       filename       splash
1      1            asda.jpg       0
2      1            aspg.jpg       1
3      2            nasf.jpg       0
4      2            qfqj.jpg       1
5      3            vnas.jpg       0
6      3            nfao.jpg       0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:25:11.137

```
select h.name, p.filename
from Home h
left join Photos p on (h.id = p.homeid and p.splash = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:25:28.540

The answer is in your question, use `LEFT OUTER JOIN` MySQL syntax...

# iphone - 如何在 iPhone 中创建 ipa 并运行应用程序

> ID：11225084
> 
> 赞同：0
> 
> 时间：2012-06-27T11:22:15.783
> 
> 标签：iphone, ios, ipad, ipa

我有我的新 macbook air。我创建了一个测试应用程序。现在我想为我的应用程序创建 ipa 文件。但产品菜单中的存档按钮未启用。如何为此创建ipa？另一件事是我想在我的 iPhone 而不是模拟器中运行这个应用程序。我该怎么做？？请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:34:34.267

要制作 .ipa 文件，请阅读此[创建 .ipa 文件](http://www.codepo.st/2012/04/18/how-to-create-ipa.html)。

您需要拥有 Apple 的开发者帐户，这将花费您 99 美元。然后，您将能够制作证书并使用它们来检查您手机上的应用程序。

如何制作证书，[请阅读此处](http://www.idev101.com/code/Distribution/checklist.html)

这将对您有很大帮助....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:24:41.100

您将需要从苹果购买许可证，然后按照他们网站上的教程进行操作，一切都会好起来的

如果没有许可证、证书和密钥，您将无法在 iPhone/iPad 上运行该应用程序

[iOS 开发者计划](https://developer.apple.com/programs/ios/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:39:38.953

要在产品菜单中启用存档按钮，请在方案中选择 iOS 设备而不是 iOS 模拟器。

# c# - 如果缺少配置文件，log4net 后备附加程序配置？

> ID：11225086
> 
> 赞同：1
> 
> 时间：2012-06-27T11:22:22.783
> 
> 标签：c#, log4net, config

我有一个广泛使用 log4net 的 C# (.NET 3.5) 应用程序。log4net 配置位于该`app.config`文件中。

使用`[assembly: XmlConfigurator(Watch = true)]`在`AssemlyInfo.cs` App 中使用单个应用程序范围的记录器实例完成配置，在记录器包装类的静态构造函数中实例化：

```
public class Logger{
    //....
    private static readonly ILog logger;
    static Logger()
    {
        logger = LogManager.GetLogger(Assembly.GetEntryAssembly().GetName().Name);

        AppDomain.CurrentDomain.UnhandledException += OnUnhandledException;
    }
    //....
} 
```

该应用程序旨在由调度程序在远程服务器上运行，无需人工，独自在黑暗中。:) 问题是，如果缺少配置文件，它只会默默地崩溃（没有 log4net 配置 => 没有日志记录）。

有没有办法检查配置中是否有任何附加程序，如果没有 - 以编程方式添加某种后备附加程序。

我对 log4X 记录器家族还很陌生，所以，如果我要问一些琐碎的问题 - 请善待，log4net 文档真的很糟糕。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:29:55.853

好的，这个问题已经在谷歌上，我已经找到了答案，所以我就把它留在这里。:)

操作 appender 的关键是`IAppenderAttachable`接口，因为它实现`AddAppender`了`removeAppender`方法。

返回的`LogManager.GetLogger()`是 的实例`ILog`，该实例又包含属性`Logger`。返回的对象`ILog.Logger`是一个`Logger`类实例。`Logger`类实现`IAppenderAttachable`接口并包含`Repository`用于提取记录器存储库的属性。存储库具有`GetAppenders`返回`AppenderCollection`类实例（实现`ICollection`、、、`IList`等`Ienumerable`）的方法以及记录器的所有活动附加器。

总结一下：

```
//no need to put it in the static constructor, but in my case it is so
static Logger() 
{
    logger = LogManager.GetLogger(...);
    if (logger.Logger.Repository.GetAppenders().Length == 0) {
        (logger.Logger as IAppenderAttachable).AddAppender(CreateConsoleAppender());
    }
}

private static ConsoleAppender CreateConsoleAppender()
{
    var appender = new ConsoleAppender();
    appender.Layout = CreateDefaultLayout();
    appender.AddFilter(CreateDefaultFilter());
    appender.ActivateOptions(); // if omitted - throws an excpetion
    log4net.Config.BasicConfigurator.Configure(appender); //if omitted - no errors, but logging does not work
    return appender;
}

private static ILayout CreateDefaultLayout()
{
    PatternLayout layout = new PatternLayout();
    layout.ConversionPattern = "%d{yyyy-MM-dd hh:mm:ss} - %level %m%n";
    layout.ActivateOptions();
    return layout;
}

private static IFilter CreateDefaultFilter()
{
    LevelRangeFilter filter = new LevelRangeFilter { LevelMin = Level.Info };
    filter.ActivateOptions();
    return filter;
} 
```

请注意，如果文件丢失或损坏`log4net`，则不会抛出任何异常（至少开箱即用），但不会将附加程序附加到记录器。

# facebook - Facebook oauth display=wap 旧手机

> ID：11225089
> 
> 赞同：2
> 
> 时间：2012-06-27T11:22:32.940
> 
> 标签：facebook

Facebook[路线图](http://developers.facebook.com/roadmap/)指出，2012 年 7 月 1 日“将删除 wap 对话框显示模式。”。我查看了[对话框概述](http://developers.facebook.com/docs/reference/dialogs/)，可用的显示方法是页面、弹出窗口、iframe 或触摸。它们都不适用于旧手机的 wap 使用（不支持触摸）。

问题是如何让 wap 访问者在 Facebook 上看到 wap 版本的身份验证对话框？

# sql-server - 在 Analysis Services Cube 中实现全文搜索

> ID：11225092
> 
> 赞同：1
> 
> 时间：2012-06-27T11:22:42.630
> 
> 标签：sql-server, full-text-search, ssas, sql-server-2012

我正在创建一个 SSAS 多维数据集（SQL 2012），其目的之一是将数据公开给包含许多过滤器/搜索功能的 .NET UI，允许用户查询数据。在现有的 SQL Server 数据库中，我们使用全文搜索来帮助进行基于文本的过滤器/搜索。

我四处寻找有关在 SSAS 多维数据集上实现 FTS 的更多信息，特别是搜索 Dimension 成员并按 Measure 值过滤，但它似乎非常薄。

FTS 可以在 SSAS 多维数据集上实现吗？如果是这样，是否推荐或有更好的方法来实现这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:52:48.303

在维度成员和度量值被编入索引以支持 FTS 的意义上，没有对全文搜索的开箱即用支持。一般来说，过滤器是在查询时应用的。有几种方法可以使用 MDX 执行此操作，这些方法对性能有不同程度的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:11:47.880

我不这么认为。

在维度中组织成员的最佳方法是将它们排列在层次结构中。

您还可以使用 MDX 搜索属性。也许您可以在您的应用程序上显示一个搜索字段，并根据估算值，在维度上运行 MDX 查询

# php - 文件上传失败

> ID：11225099
> 
> 赞同：1
> 
> 时间：2012-06-27T11:23:16.780
> 
> 标签：php, file-upload

我有一个最简单、最愚蠢的脚本，用于上传文件并在操作后返回成功真假。不知道为什么，突然脚本停止工作给我一个`failed to open stream: No such file or directory`错误`move_uploaded_file`。这很奇怪，因为我没有更改任何路径、权限，基本上什么都没有。任何提示如何解决这个问题？我是 php 的新手。我的脚本如下：

```
if(isset($_FILES)){
    $file_tmp  = $_FILES['mpp-file']['tmp_name'];
    $file_name = $_FILES['mpp-file']['name'];

    if(is_uploaded_file($file_tmp)) {
        if(move_uploaded_file($file_tmp, "tmp/$file_name")){               
            echo '{"success": true}';
            unlink("tmp/$file_name");
        } else {
            echo '{"success": false}';
        }    
    }  else{
        echo '{success: false}';
    }
} 
```

以及来自 stacktrace 的页面：

```
<html>
<head></head>
<body>
<font size="1"><table class="xdebug-error" dir="ltr" border="1" cellspacing="0" cellpadding="1">
<tbody><tr><th align="left" bgcolor="#f57900" colspan="5"><span style="background-color: #cc0000; color: #fce94f; font-size: x-large;">( ! )</span> Warning: move_uploaded_file(tmp/MSP1.mpp) [<a href="function.move-uploaded-file">function.move-uploaded-file</a>]: failed to open stream: No such file or directory in K:\LAMP\www\project\msp-load.php on line <i>7</i></th></tr>
<tr><th align="left" bgcolor="#e9b96e" colspan="5">Call Stack</th></tr>
<tr><th align="center" bgcolor="#eeeeec">#</th><th align="left" bgcolor="#eeeeec">Time</th><th align="left" bgcolor="#eeeeec">Memory</th><th align="left" bgcolor="#eeeeec">Function</th><th align="left" bgcolor="#eeeeec">Location</th></tr>
<tr><td bgcolor="#eeeeec" align="center">1</td><td bgcolor="#eeeeec" align="center">0.0034</td><td bgcolor="#eeeeec" align="right">677944</td><td bgcolor="#eeeeec">{main}(  )</td><td title="K:\LAMP\www\gantt_latest\examples\MSProject_import\msp-load.php" bgcolor="#eeeeec">..\msp-load.php<b>:</b>0</td></tr>
<tr><td bgcolor="#eeeeec" align="center">2</td><td bgcolor="#eeeeec" align="center">0.0034</td><td bgcolor="#eeeeec" align="right">678256</td><td bgcolor="#eeeeec"><a href="http://www.php.net/move_uploaded_file" target="_new">move_uploaded_file</a>
(  )</td><td title="K:\LAMP\www\project\msp-load.php" bgcolor="#eeeeec">..\msp-load.php<b>:</b>7</td></tr>
</tbody></table></font>
<br>
<font size="1"><table class="xdebug-error" dir="ltr" border="1" cellspacing="0" cellpadding="1">
<tbody><tr><th align="left" bgcolor="#f57900" colspan="5"><span style="background-color: #cc0000; color: #fce94f; font-size: x-large;">( ! )</span> Warning: move_uploaded_file() [<a href="function.move-uploaded-file">function.move-uploaded-file</a>]: Unable to move 'K:\LAMP\tmp\phpC7A5.tmp' to 'tmp/MSP1.mpp' in K:\LAMP\www\project\msp-load.php on line <i>7</i></th></tr>
<tr><th align="left" bgcolor="#e9b96e" colspan="5">Call Stack</th></tr>
<tr><th align="center" bgcolor="#eeeeec">#</th><th align="left" bgcolor="#eeeeec">Time</th><th align="left" bgcolor="#eeeeec">Memory</th><th align="left" bgcolor="#eeeeec">Function</th><th align="left" bgcolor="#eeeeec">Location</th></tr>
<tr><td bgcolor="#eeeeec" align="center">1</td><td bgcolor="#eeeeec" align="center">0.0034</td><td bgcolor="#eeeeec" align="right">677944</td><td bgcolor="#eeeeec">{main}(  )</td><td title="K:\LAMP\www\gantt_latest\examples\MSProject_import\msp-load.php" bgcolor="#eeeeec">..\msp-load.php<b>:</b>0</td></tr>
<tr><td bgcolor="#eeeeec" align="center">2</td><td bgcolor="#eeeeec" align="center">0.0034</td><td bgcolor="#eeeeec" align="right">678256</td><td bgcolor="#eeeeec"><a href="http://www.php.net/move_uploaded_file" target="_new">move_uploaded_file</a>
(  )</td><td title="K:\LAMP\www\project\msp-load.php" bgcolor="#eeeeec">..\msp-load.php<b>:</b>7</td></tr>
</tbody></table></font>
</body>
</html> 
```

我在 Win7 上使用 WAMP 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:30:36.473

您需要检查 tmp 目录是否存在。当您尝试移动文件的位置不存在时，会显示此错误。

```
if(isset($_FILES)){
    $file_tmp  = $_FILES['mpp-file']['tmp_name'];
    $file_name = $_FILES['mpp-file']['name'];
$directory_path = $_SERVER["DOCUMENT_ROOT"]."/tmp/$file_name";

    if(is_uploaded_file($file_tmp)) {
if(is_dir($directory_path))
{

        if(move_uploaded_file($file_tmp, "tmp/$file_name")){               
            echo '{"success": true}';
            unlink("tmp/$file_name");
        } else {
            echo '{"success": false}';
        }
}else
{
echo "No such directory exists";
}    
    }  else{
        echo '{success: false}';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:29:45.047

不要这样做：

```
if(isset($_FILES)){ 
```

失败的上传仍然会产生一个 $_FILES 数组。您需要检查错误参数：

```
if ($_FILES['mpp-file']['error'] !== UPLOAD_ERR_OK) {
     die("Upload failed with error code " . $_FILES['mpp-file']['error']);
} 
```

错误代码/常量在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

同样，**不要**使用该`['name']`参数来存储文件。该字段由远程用户控制，他们可以轻松破解上传数据`../../../../../../../etc/passwwd`，您的脚本将很乐意覆盖用户想要的服务器上的任何文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:03:05.787

我有一个类似的问题，但坦率地说，我的问题是文件名中的管道字符。请检查您的文件名是否有任何特殊字符。

# c# - 在 Fluent Nhibernate 中使用多个数据库，System.TypeInitializationException 未处理

> ID：11225101
> 
> 赞同：4
> 
> 时间：2012-06-27T11:23:26.810
> 
> 标签：c#, nhibernate, fluent-nhibernate

我试图实现[Multiple DB connected Fluent NHibernate sample Application](http://codebetter.com/karlseguin/2009/03/30/using-nhibernate-with-multiple-databases/)。

我的 Fluent NHibernate[存储库](http://code.google.com/p/nhibernate-repository-example/)如下：

```
namespace RepositoryExample.Repository.NHibernate {
    public class NHibernateRepository<T> : IRepository<T> where T : class
    {
        protected static Configuration config;
        private static readonly ISessionFactory _globalSessionFactory = new Configuration().Configure().BuildSessionFactory();

    protected static IDictionary<string, ISessionFactory> _allFactories;
    public NHibernateRepository()
    {
        IDictionary<string, string> dataBases = new Dictionary<string, string>();
        dataBases.Add("Monkey", @"Data Source=.\SQLEXPRESS;AttachDbFilename='MonkeyDB.mdf';Integrated Security=True;User Instance=True");
        dataBases.Add("Banana", @"Data Source=.\SQLEXPRESS;AttachDbFilename='Banana.mdf';Integrated Security=True;User Instance=True");
        // Error at below line (See stack trace for deatils below)
        _allFactories = new Dictionary<string, ISessionFactory>(dataBases.Count);
        foreach (var dataBase in dataBases)
        {
            config = Fluently.Configure()
                .Database(
                MsSqlConfiguration.MsSql2008.ConnectionString(dataBase.Value))
                .Mappings(m => m.FluentMappings.AddFromAssemblyOf<NHibernateRepository<T>>())
                .BuildConfiguration();
            _allFactories.Add(dataBase.Key, config.BuildSessionFactory());
        }
    }
    public ISession GetSession()
    {
        var currentIdentifier = GetCurrentIdentifier();
        return _allFactories[currentIdentifier].OpenSession();
    }

    private string GetCurrentIdentifier()
    {
        if (typeof(T).ToString().Contains("Banana"))
        {
            return "Banana";
        }
        else
        {
            return "Monkey";
        }
    }
    public void Save(T value)
    {
        var sessioned = GetSession();
        using (var transaction = sessioned.BeginTransaction())
        {
            sessioned.Save(value);
            transaction.Commit();
        }
    }
    public void GenerateSchema(SanityCheck AreYouSure)
    {
        new SchemaExport(config).Create(true,true);
    } }

} 
```

我打电话如下：

```
public class NHibernateIntegrationTest
    {

        static void Main(string[] args)
        {
            var repo = new NHibernateRepository<NHibernateIntegrationTest>();
            repo.GenerateSchema(SanityCheck.ThisWillDropMyDatabase);
        }
    } 
```

错误：

```
_allFactories = new Dictionary<string, ISessionFactory>(dataBases.Count); 
```

它在 NHibernateRepository 类的默认构造函数中。

```
StackTrace:
System.TypeInitializationException was unhandled
  Message=The type initializer for 'RepositoryExample.Repository.NHibernate.NHibernateRepository`1' threw an exception.
  Source=RepositoryExample
  TypeName=RepositoryExample.Repository.NHibernate.NHibernateRepository`1
  StackTrace:
       at RepositoryExample.Repository.NHibernate.NHibernateRepository`1..ctor() in C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\RepositoryExample\Repository\NHibernate\NHibernateRepository.cs:line 44
       at Test.NHibernateIntegrationTest.Main(String[] args) in C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\Test\NHibernateIntegrationTest.cs:line 17
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: NHibernate.Cfg.HibernateConfigException
       Message=An exception occurred during configuration of persistence layer.
       Source=NHibernate
       StackTrace:
            at NHibernate.Cfg.ConfigurationSchema.HibernateConfiguration..ctor(XmlReader hbConfigurationReader, Boolean fromAppSetting)
            at NHibernate.Cfg.ConfigurationSchema.HibernateConfiguration..ctor(XmlReader hbConfigurationReader)
            at NHibernate.Cfg.Configuration.Configure(XmlReader textReader)
            at NHibernate.Cfg.Configuration.Configure(String fileName, Boolean ignoreSessionFactoryConfig)
            at NHibernate.Cfg.Configuration.Configure(String fileName)
            at NHibernate.Cfg.Configuration.Configure()
            at RepositoryExample.Repository.NHibernate.NHibernateRepository`1..cctor() in C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\RepositoryExample\Repository\NHibernate\NHibernateRepository.cs:line 17
       InnerException: System.IO.FileNotFoundException
            Message=Could not find file 'C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\Test\bin\Debug\hibernate.cfg.xml'.
            Source=mscorlib
            FileName=C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\Test\bin\Debug\hibernate.cfg.xml
            StackTrace:
                 at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
                 at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
                 at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
                 at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials)
                 at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
                 at System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver)
                 at System.Threading.CompressedStack.runTryCode(Object userData)
                 at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
                 at System.Threading.CompressedStack.Run(CompressedStack compressedStack, ContextCallback callback, Object state)
                 at System.Xml.XmlTextReaderImpl.OpenUrl()
                 at System.Xml.XmlTextReaderImpl.Read()
                 at System.Xml.XmlTextReader.Read()
                 at System.Xml.XmlCharCheckingReader.Read()
                 at System.Xml.XsdValidatingReader.Read()
                 at System.Xml.XPath.XPathDocument.LoadFromReader(XmlReader reader, XmlSpace space)
                 at System.Xml.XPath.XPathDocument..ctor(XmlReader reader, XmlSpace space)
                 at System.Xml.XPath.XPathDocument..ctor(XmlReader reader)
                 at NHibernate.Cfg.ConfigurationSchema.HibernateConfiguration..ctor(XmlReader hbConfigurationReader, Boolean fromAppSetting)
            InnerException: 
```

我没有使用 hibernate.cfg.xml，因为我正在流畅地配置会话工厂。但是内部堆栈跟踪显示找不到 hibernate.cfg.xml 文件。请参阅下面的屏幕截图。 ![在此处输入图像描述](../Images/f37d5c994f96c581d74f53859620080f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T23:28:46.057

您在最内部的异常中有非常明确的错误消息：

> 找不到文件“C:\Documents and Settings\pavankumarn\My Documents\Downloads\nhibernate-repository-example\Test\bin\Debug\hibernate.cfg.xml”。

您的测试项目中可能有该文件。将其设置`Build Action`为`None`和。`Copy to Output Directory``Copy if newer`

* * *

**编辑：**

实际上，问题不在于构造函数本身，而在于它上面的一行：

```
private static readonly ISessionFactory _globalSessionFactory = new Configuration().Configure().BuildSessionFactory(); 
```

在这里，您正在使用默认值创建另一个 NHibernate 配置。默认情况下，当您创建一个 时`new Configuration()`，它会尝试从`app.config`或加载`hibernate.cfg.xml`。

删除该行。我没有看到在`_globaSessionFactory`任何地方使用过。

# git - 是否可以在 git 中的第一次提交时指定分支名称？

> ID：11225105
> 
> 赞同：27
> 
> 时间：2012-06-27T11:23:36.750
> 
> 标签：git, branch

是否可以使用与“master”不同的分支名称在新存储库上执行第一次提交？谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-27T11:29:15.487

是的。在你做出任何承诺之前，你可以做`git symbolic-ref HEAD refs/heads/not-master`. 这会更改您所在的分支的名称（没有提交）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T11:28:43.587

当然 - 当 git 存储库为空时，没有分支。只是 HEAD 指向`refs/heads/master`哪个将是第一次提交创建的第一个分支。如果您使用的是 git >= 1.7.10，您可以在第一次提交之前创建一个分支，而不是 master ( `git checkout -b dev`)，并且您不会创建 master 分支。

# python - obj_create 在美味派中不起作用

> ID：11225110
> 
> 赞同：1
> 
> 时间：2012-06-27T11:23:47.030
> 
> 标签：python, django, rest, tastypie

我正在尝试使用tastepie实现用户注册，一切正常，但是当我尝试使用obj_create方法检查用户是否已经存在时，什么都没有发生......如何在tastepie中调用它，它会自动调用吗？

```
from _mysql_exceptions import IntegrityError
from django.db.models.query_utils import Q
from tastypie.authorization import Authorization
from django.contrib.auth.models import User
from tastypie.authentication import BasicAuthentication
from tastypie import fields
from tastypie.exceptions import BadRequest
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from tastypie.validation import Validation
from apps.eUser.models import  UserProfile

class ProfileResource(ModelResource):
    username = fields.CharField(attribute='user__username', readonly=True)
    id = fields.CharField(attribute='id')
    class Meta:
             queryset =UserProfile.objects.select_related('User')
             resource_name = 'profile'
             fields = ['id']

class UserResource(ModelResource):
    class Meta:
        object_class = User
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['get', 'post', 'delete', 'put']
        #excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
        filtering = {
        }

class CreateUserResource(ModelResource):
    class Meta:
        allowed_methods = ['post']
        object_class = User
        #authentication = Authentication()
        authorization = Authorization()
        resource_name = 'register'

        include_resource_uri = False
        fields = ['username','password','email']

    def obj_create(self, bundle, request=None, **kwargs):
     try:
        bundle = super(CreateUserResource, self).obj_create(bundle, request, **kwargs)
    except IntegrityError:
        raise BadRequest('That username already exists')
    return bundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:05:40.473

我通过`UserResource`只创建来做同样的事情。

```
class UserResource(ModelResource):
   class Meta:
       queryset = User.objects.all()
       resource_name = 'user'
       excludes = ['id','email', 'password', 'is_active', 'is_staff', 'is_superuser']
       list_allowed_methods = ['post']
       detail_allowed_methods = ['get']
       default_format = "application/json"
       filtering = {
           'username': ALL,
       }
       authorization= Authorization()

def obj_create(self, bundle, request = None, **kwargs):
    bundle.obj = self._meta.object_class()
    for key, value in kwargs.items():
        setattr(bundle.obj, key, value)
    bundle = self.full_hydrate(bundle)

    self.is_valid(bundle,request)

    if bundle.errors:
        self.error_response(bundle.errors, request)

    # Save FKs just in case.
    self.save_related(bundle)

    obj = None
    try:
        obj = self.obj_get(request, username=bundle.obj.username) # here it checks withe username is already exists or not
    except self._meta.object_class.DoesNotExist:
        pass

    # if user already found then just build the bundle else it will create the new user
    if obj:
        bundle = self.build_bundle(obj=obj, request=request)
    else:
        # Save parent
        bundle.obj.save()
        # Now pick up the M2M bits.
        m2m_bundle = self.hydrate_m2m(bundle)
        self.save_m2m(m2m_bundle)

    return bundle 
```

希望它也适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:17:08.010

您可以使用验证，而不是在 object_create 中进行[验证](http://django-tastypie.readthedocs.org/en/v0.9.9/validation.html#validation)。[FormValidation](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/validation.py)将根据模型表单验证您的输入。例如

```
class UserResource(ModelResource):
    class Meta:
        object_class = User
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['get', 'post', 'delete', 'put']
        #excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
        filtering = {}
        validation = FormValidation(form_class=AddUser) 
```

# java - Change screen resolution in Java

> ID：11225113
> 
> 赞同：2
> 
> 时间：2012-06-27T11:24:06.380
> 
> 标签：java, swing, screen-resolution, sikuli

I have a program that uses visual scripting ([sikuli-script](http://sikuli.org/)) to allow the users to create their own visual scripts. The program needs to work across multiple systems that could have different screen resolutions.

Sikuli matches highlighted images on a pixel-by-pixel basis, so on systems with different resolutions will fail to find images.

Therefore is there a way that I can change the resolution settings in windows through java code?

Going full-screen is not an option as images that need to be captured come from different software packages, i.e. my software package sits above where the images need to come from (and is minimized when a capture is taking place)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:48:22.560

> 因此，有没有办法可以通过 java 代码更改 Windows 中的分辨率设置？

1.是可能的，为什么不

```
import java.awt.Color;
import java.awt.DisplayMode;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Rectangle;
import java.awt.image.BufferStrategy;

public class MultiBufferTest {

    private Frame mainFrame;
    private static Color[] COLORS = new Color[]{
        Color.red, Color.blue, Color.green, Color.white, Color.black,
        Color.yellow, Color.gray, Color.cyan, Color.pink, Color.lightGray,
        Color.magenta, Color.orange, Color.darkGray};
    private static DisplayMode[] BEST_DISPLAY_MODES = new DisplayMode[]{
        new DisplayMode(640, 480, 32, 0),
        new DisplayMode(640, 480, 16, 0),
        new DisplayMode(640, 480, 8, 0)};

    public MultiBufferTest(int numBuffers, GraphicsDevice device) {
        try {
            GraphicsConfiguration gc = device.getDefaultConfiguration();
            mainFrame = new Frame(gc);
            mainFrame.setUndecorated(true);
            mainFrame.setIgnoreRepaint(true);
            device.setFullScreenWindow(mainFrame);
            if (device.isDisplayChangeSupported()) {
                chooseBestDisplayMode(device);
            }
            Rectangle bounds = mainFrame.getBounds();
            mainFrame.createBufferStrategy(numBuffers);
            BufferStrategy bufferStrategy = mainFrame.getBufferStrategy();
            for (float lag = 2000.0f; lag > 0.00000006f; lag = lag / 1.33f) {
                for (int i = 0; i < numBuffers; i++) {
                    Graphics g = bufferStrategy.getDrawGraphics();
                    if (!bufferStrategy.contentsLost()) {
                        g.setColor(COLORS[i]);
                        g.fillRect(0, 0, bounds.width, bounds.height);
                        bufferStrategy.show();
                        g.dispose();
                    }
                    try {
                        Thread.sleep((int) lag);
                    } catch (InterruptedException e) {
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            device.setFullScreenWindow(null);
        }
    }

    private static DisplayMode getBestDisplayMode(GraphicsDevice device) {
        for (int x = 0; x < BEST_DISPLAY_MODES.length; x++) {
            DisplayMode[] modes = device.getDisplayModes();
            for (int i = 0; i < modes.length; i++) {
                if (modes[i].getWidth() == BEST_DISPLAY_MODES[x].getWidth()
                        && modes[i].getHeight() == BEST_DISPLAY_MODES[x].getHeight()
                        && modes[i].getBitDepth() == BEST_DISPLAY_MODES[x].getBitDepth()) {
                    return BEST_DISPLAY_MODES[x];
                }
            }
        }
        return null;
    }

    public static void chooseBestDisplayMode(GraphicsDevice device) {
        DisplayMode best = getBestDisplayMode(device);
        if (best != null) {
            device.setDisplayMode(best);
        }
    }

    public static void main(String[] args) {
        try {
            int numBuffers = 2;
            if (args != null && args.length > 0) {
                numBuffers = Integer.parseInt(args[0]);
                if (numBuffers < 2 || numBuffers > COLORS.length) {
                    System.err.println("Must specify between 2 and " + COLORS.length + " buffers");
                    System.exit(1);
                }
            }
            GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice device = env.getDefaultScreenDevice();
            MultiBufferTest test = new MultiBufferTest(numBuffers, device);
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.exit(0);
    }
} 
```

2.不要那样做，可能会惹恼用户，并且在缺少代码的情况下可以更改分辨率`Native OS`（我的同事在三个屏幕上有超过 100 个快捷方式，任何更改分辨率都可以更改快照`size`，`location`结果很简单）

3.`JLabel`使用 for `Icons`（放入容器中`LayoutManager`），或放入or ，然后你永远/不关心某事`Icons``JList``JTable`

4.只使用`LayoutManager`而不是定位或更改屏幕分辨率，您可以将屏幕上设置为较小`Size`（for `JFrame`）`Apps start_up`，让用户决定`Dimmension`她/他的屏幕上的最终

# python - Regular expression for version and software name

> ID：11225114
> 
> 赞同：1
> 
> 时间：2012-06-27T11:24:07.653
> 
> 标签：python, regex

I have:

```
TYPO3 4.2 is installed on machine ...
Winamp is installed on machine ...
Winrar 3.20 is installed on machine ... 
```

How can i make a regular expression for separating the software package name in a sentence. Above there is an example for a software\version, but the sentence is not always the same, and also there are times where the version is not displayed. Any hints how can the re be? I found this topic but it is just for version: [Regular expression for version numbers](https://stackoverflow.com/questions/6618868/regular-expression-for-version-numbers)

As i read some comments i forgot to put some stuff like:

*   Software version hasn't got a standard form, but it is dot separated

*   The name of the software is before the version

*   It could happen that i have the software name, but is there a way to find it's version in some text that hasn't got the same structure as the sentences mention above?
*   The above sentence is not standard !

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T11:27:45.017

对于您显示的数据：

```
version = sentence.partition(" is installed on")[0] 
```

不需要正则表达式，只需在“安装”之前获取所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:31:26.040

请提供有关数据的更多信息（请参阅我的评论）

如果程序名称始终是一个单词：
`m = re.search(r'(?P<name>\S+?) (?P<version>([\d.]+ )?)', text)`

如果句子以“is”或“installed”开头：
`m = re.search(r'(?P<name>(\S\s)+?)(?P<version>([\d.]+ )?)(is|installed)', text)`

```
name = m.group('name').strip()
version = m.group('version').strip() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:30:00.303

好吧，我们可以使用以下启发式方法：

1.  “已安装”是软件名称和版本结束的标记
2.  该版本不包含空格，仅包含数字或点
3.  版本之前的一切都是软件的名字

然后我们可以使用类似下面的东西：

```
(.*?) ([\d.]+ )?is installed 
```

第一组是软件名称，第二组是版本（如果存在）。

快速 PowerShell 测试：

```
PS> $strings = 'TYPO3 4.2 is installed on machine ...','Winamp is installed on machine ...', 'Winrar 3.20 is installed on machine ...'
PS> $strings | %{ $null = $_ -match '(.*?) ([\d.]+ )?is installed'; "Software: " + $Matches[1] + ", version: " + $Matches[2] }
Software: TYPO3, version: 4.2
Software: Winamp, version:
Software: Winrar, version: 3.20 
```

# c++ - makefile 错误：未定义对 main 的引用

> ID：11225118
> 
> 赞同：9
> 
> 时间：2012-06-27T11:24:18.200
> 
> 标签：c++, makefile

我正在尝试使用 make 编译我的一段代码。通常我编译我的代码是这样的：

```
mipsisa32r2el-timesys-linux-gnu-g++ -o testing -I/usr/include/libxml2 -L/develop/xc4/rootfs/parsecpp/lib -L/develop/xc4/rootfs/parsecpp/sqlite-mips2/lib -I/develop/xc4/rootfs/parsecpp/sqlite-mips2/include db.cpp main.cpp networkinterfacemodule.cpp network.cpp multiplex.cpp program.cpp service.cpp -lsqlite3 -lxml2 
```

为了摆脱这个长命令，我尝试编写一个 makefile：

```
CC= mipsisa32r2el-timesys-linux-gnu-g++

export LD_LIBRARY_PATH=:/parsecpp/sqlite-mips2/lib:/parsecpp/lib:/tmp/vixs_temp/DirectFB/single_core/lib

CFLAGS=-I/usr/include/libxml2 -I/develop/xc4/rootfs/parsecpp/sqlite-mips2/include

LDFLAGS=-L/develop/xc4/rootfs/parsecpp/lib -L/develop/xc4/rootfs/parsecpp/sqlite-mips2/lib

LIBS = -lsqlite3 -lxml2

PROG=testing

all: main.o db.o mod.o multiplex.o network.o networkinterfacemodule.o program.o service.o
    $(CC) -o $(PROG) $(CFLAGS) $(LDFLAGS)  main.o db.o mod.o multiplex.o network.o networkinterfacemodule.o program.o service.o $(LIBS) 

main.o: main.cpp 
    $(CC) $(CFLAGS) $(LDFLAGS) main.cpp db.cpp networkinterfacemodule.cpp mod.cpp multiplex.cpp network.cpp program.cpp service.cpp $(LIBS)

db.o: db.cpp 
    $(CC) $(CFLAGS) $(LDFLAGS) db.cpp $(LIBS)

mod.o: mod.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) mod.cpp $(LIBS)

multiplex.o: multiplex.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) multiplex.cpp $(LIBS)

network.o: network.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) network.cpp $(LIBS)

networkmoduleinterface.o: networkinterfacemodule.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) networkinterfacemodule.cpp $(LIBS)

program.o: program.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) program.cpp $(LIBS)

service.o: service.cpp
    $(CC) $(CFLAGS) $(LDFLAGS) service.cpp $(LIBS)

clean:
    rm -rf *o testing 
```

然后我得到这个错误：

```
/opt/timesys/linux-gnu/toolchain/bin/../../toolchain/lib/crt1.o: In function `__start':
(.text+0xc): undefined reference to `main'
/opt/timesys/linux-gnu/toolchain/bin/../../toolchain/lib/crt1.o: In function `__start':
(.text+0x10): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [db.o] Error 1 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T11:30:20.373

每当您只是编译文件而不链接它时，请使用“-c”标志。

例如 ：-

```
db.o: db.cpp 
$(CC) -c $(CFLAGS) $(LDFLAGS) db.cpp $(LIBS) 
```

此外，在编译时，*无需*向编译器提供“$(LIBS)”，只需在链接时提供。您也不需要链接器标志，因为使用“-c”标志时不会调用链接器。

所以你可以写，

```
 db.o: db.cpp 
 $(CC) -c $(CFLAGS) db.cpp 
```

* * *

更新（基于评论）： -

链接文件时，链接器需要一个且只有一个`main`函数。在上述情况下，主函数未定义`db.cpp`，因此尽管编译成功，但链接器会抛出错误，因为它找不到该`main`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T11:38:06.363

当您在没有 -c 标志的情况下进行编译时，gcc 会尝试链接程序。由于 main 函数很可能在 main.c 而不是 db.c 中，因此在 db.c 中搜索 main 函数时，链接器会失败。这意味着您需要告诉编译器您只想要尚未链接但翻译成目标文件的输出，这正是 -c 标志所做的。

这导致了 rajatkhanduja 所说的：

```
db.o: db.cpp 
$(CC) -c $(CFLAGS) db.cpp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:41:40.420

我猜你错过了链接规则。

你应该有第一条规则告诉 make 如何链接：

```
testing_OBJECTS = main.o db.o mod.o multiplex.o network.o networkinterfacemodule.o program.o service.o

testing$(EXEEXT): $(testing_OBJECTS)
    ld $(testing_OBJECTS) $(LDFLAGS) $(LIBS) 
```

并且*此*规则必须是以下条件的先决条件`all`：

```
all: testing$(EXEEXT) 
```

此外，由于您所有的“*.o: *.cpp”规则都是相同的，您可以指定一个规则并让`make`您替换文件名。询问您是否需要更多数据。

# objective-c - force NSDictionary to release memory

> ID：11225123
> 
> 赞同：0
> 
> 时间：2012-06-27T11:24:43.473
> 
> 标签：objective-c, ios, ios5

Somewhere in an ARC project, I have:

```
//Class1.h
@interface Class1 {
    NSDictionary * dict;
} 
```

@end

```
//Class1.m
@implementation Class1

-(void)loadDict {
    NSDictionary * dict = [[NSDictionary alloc] init];
    // Now load couple of (NSString *, NSString *) pairs into the dictionary
    ...
}

-(void)releaseAllMemoryUsedByDict {
    //TODO
}

@end 
```

How do I release all the memory occupied by dict, on demand? I guess if I had an NSMutableDictionary, I could call its removeAllObjects method. How would I do it for NSDictionary? Would setting dict = NULL work?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:27:31.840

假设`nil`没有其他对象持有（***强烈***引用）`NSDictionary`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T11:28:36.733

如果您设置`NSDictionary`to`nil`或任何对象，它将被释放，假设没有其他对象持有对它的引用（**这在 ARC 环境中**）。

# c# - 为什么 C# 的重载解析在 Func 之间不起作用 和行动 ?

> ID：11225125
> 
> 赞同：12
> 
> 时间：2012-06-27T11:24:54.783
> 
> 标签：c#, linq

所以，一个相当常见的 IEnumerable 扩展方法，运行：

```
public static IEnumerable<T> Run<T>(this IEnumerable<T> source, Action<T> action)
{
    foreach (var item in source)
    {
        action(item);
        yield return item;
    }
} 
```

例如，当我尝试将它与 DbSet.Add 一起使用时：

```
invoice.Items.Run(db.InvoiceItems.Add);
// NB: Add method signature is
// public T Add(T item) { ... } 
```

...编译器抱怨它有错误的返回类型，因为它需要一个 void 方法。因此，为 Run 添加一个使用 Func 而不是 Action 的重载：

```
public static IEnumerable<T> Run<T>(this IEnumerable<T> source, Func<T, T> action)
{
    return source.Select(action).ToList().AsEnumerable();
} 
```

现在编译器抱怨“以下方法之间的调用不明确......”

所以我的问题是，当 Run 方法的 Action 重载对方法组无效时，它怎么会导致歧义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:24:23.853

[Eric 和 Jon 在回答这个问题](https://stackoverflow.com/questions/2057146/compiler-ambiguous-invocation-error-anonymous-method-and-method-group-with-fun)时已经解释了这一点。长话短说——这就是 C# 编译器的工作原理；确切地说，在处理方法组转换时，决定将其转换为哪个委托时会利用重载决议，它**不考虑返回类型**：

> 这里的原则是确定方法组可转换性需要使用重载决议从方法组中选择一个方法，而重载决议不考虑返回类型。

在您的示例中，编译器将*和*`Action<T>`都`Func<T, T>`视为. 这增加了两种可能的选择，并且由于它需要一个 - 发出适当的错误。*`Add`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:29:37.497

以正确的方式尝试超载：

```
public static IEnumerable<TDest> Run<TSource, TDest>(this IEnumerable<TSource> source, 
    Func<TSource, TDest> action) 
{ 
 return source.Select(action).ToList(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:43:21.473

我无法回答*为什么*，但要解决歧义，您可以显式转换您的函数：

```
invoice.Items.Run((Func<T,T>)db.InvoiceItems.Add); 
```

或使用 lambda

```
invoice.Items.Run(x => db.InvoiceItems.Add(x)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:45:00.127

我不知道为什么它不能自动解决它，但这里有两个解决方法：

```
// with T replaced with the actual type:
invoice.Items.Run((Func<T, T>)db.InvoiceItems.Add);
invoice.Items.Run(new Func<T, T>(db.InvoiceItems.Add)); 
```

为什么你仍然需要这些方法？有什么问题：

```
foreach (var item in invoice.Items)
    db.InvoiceItems.Add(item); 
```

这个的可读性要好得多。除非您有充分的理由需要该`Run`方法，否则我建议您不要使用它。据我所见，没有这样的原因，至少对于`Action<T>`过载而言。*

# c# - 用c#“没有为一个或多个参数给出值”

> ID：11225127
> 
> 赞同：2
> 
> 时间：2012-06-27T11:25:02.697
> 
> 标签：c#, ms-access, ms-access-2010

**当我想从 access 中检索日期时，我在cmd1.ExecuteReader**收到异常错误“No Value given for a or more parameters” 。这是我的代码

```
void checking_fields()
    {

        OleDbCommand cmd = new OleDbCommand("select movie_id from event", oc);
        OleDbDataReader ol = cmd.ExecuteReader();
        OleDbCommand cmd1 = new OleDbCommand("select [open date],[close date] from event", oc);
        OleDbDataReader ol1 = cmd1.ExecuteReader();
        while (ol1.Read())
        {
            if (ol1.GetValue(0).ToString() == dateTimePicker1.Value.ToString("MM/dd/yyyy") || 
                ol1.GetValue(1).ToString() == dateTimePicker2.Value.ToString("MM/dd/yyyy"))
                goto abc;
        }
        ol.Read();

        if (textBox1.Text.Equals(ol.GetString(0)))
            label8.Text = "ID already exists";
        else
        {
            insert_database();
            clear();
            this.Close();
        }
        abc:  label8.Text = "Open date or Close date already assigned";
        } 
```

这些是打开日期和关闭日期的属性

必需：否，索引：是（无重复），ime_mode：no_control，text_align：center，show_date_picker：for_dates

因为我是 C# 新手，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:29:52.610

您的查询中没有任何参数。
这意味着您的一个或多个字段名称
`Open Date`或`Close Date`
在您的表事件中不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:55:19.033

似乎您还没有打开连接：

```
void checking_fields()
{

    OleDbCommand cmd = new OleDbCommand("select movie_id from event", oc);
oc.open();

    OleDbDataReader ol1 = cmd1.ExecuteReader();
    while (ol1.Read())
    {
        if (ol1.GetValue(0).ToString() == dateTimePicker1.Value.ToString("MM/dd/yyyy") || 
            ol1.GetValue(1).ToString() == dateTimePicker2.Value.ToString("MM/dd/yyyy"))
            goto abc;
    }
oc.close();

    OleDbCommand cmd1 = new OleDbCommand("select [open date],[close date] from event", oc);
    oc.open();
    OleDbDataReader ol = cmd.ExecuteReader();
    ol.Read(); // consider revising that section

    if (textBox1.Text.Equals(ol.GetString(0)))
        label8.Text = "ID already exists";
    else
    {
        insert_database();
        clear();
        this.Close();
    }
    abc:  label8.Text = "Open date or Close date already assigned";
    } 
```

我做了一些修改，我执行了一个阅读器，关闭它，然后再执行第二个。

# iphone - Splash Screen using webservice

> ID：11225128
> 
> 赞同：0
> 
> 时间：2012-06-27T11:25:11.273
> 
> 标签：iphone, dynamic-splash-screen

I have to display a splash screen which resides on a server. Using a web service, I have to get it displayed in my SplashScreenViewController. So it's obvious that when my app launches, it will display a blank screen (img is being downloaded) and after a few seconds, it will show my splash screen.

I know that the splash screen image should have to be in the main bundle, and locally it should be seen as a splash image. But the client wants us to get it loaded from a server.

So can I use an activity indicator in that duration until my splash screen gets loaded?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:29:53.810

这是一个非常糟糕的启动画面实现，但没有其他方法，您将需要使用指示器视图，直到图像下载完毕，

还要考虑添加一个默认图像，它比白色视图好得多

您将不得不处理一些问题，例如如果互联网连接非常慢或您没有连接，您会怎么做，如果您出于任何原因没有收到您要求的图像，您会怎么做

# java - Java setResizable(false) 改变窗口大小(swing)

> ID：11225144
> 
> 赞同：17
> 
> 时间：2012-06-27T11:25:35.700
> 
> 标签：java, swing, window

我有一个奇怪的问题。我正在为窗口使用空布局（= JFrame 和在窗口上），如果我使用 setResizable (false)，窗口大小会变大（在右侧和底部，我会说大约 10 个像素）。我不知道为什么。

两个 println 的返回大小相同，奇怪的是，还...

```
mainWnd.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
mainWnd.setTitle(wndTitle);
mainWnd.setBounds(wndPosX, wndPosY, wndWidth, wndHeight);
System.out.println(mainWnd.getHeight() + mainWnd.getWidth());
mainWnd.setResizable(false);
System.out.println(mainWnd.getHeight() + mainWnd.getWidth()); 
```

有人有想法吗？为什么窗口会调整大小？

更新：同样的事情（编译它有和没有 setResizable 并且你可以看到它，如果你重叠窗口）：

```
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main
{
    private static JFrame mainWnd = null;

    public static void main(String[] args)
    {
        mainWnd = new JFrame();

        mainWnd.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainWnd.setTitle("asda");
        mainWnd.setBounds(50, 50, 300, 300);

        mainWnd.setResizable(false);

        mainWnd.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T11:33:55.803

它在我的示例中没有改变，因此您必须有其他原因导致您的问题：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Test4 {

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        frame.setBounds(0, 0, 300, 200);
        frame.setVisible(true);
        System.err.println(frame.getSize());
        frame.setResizable(false);
        System.err.println(frame.getSize());
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

编辑/更新：

当您将 resizable 设置为 false 时（至少在 Windows 7 和 JDK 6 上），插入不正确。尽管边框（由操作系统绘制）实际上保持不变，但它们以某种方式从 30、8、8、8 变为 25、3、3、3。由于插图是框架边界的一部分，因此当框架不可调整大小时，它实际上太大（视觉上）。对我来说，当框架不可调整大小时，计算的插图中似乎存在错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-02T17:22:20.300

如果在设置边界之前设置 setResizable false，则不会出现问题。正如 Gergely Szilagyi 之前所说，您正在摆脱滚动条，但窗口的大小被锁定，因此您最终会在框架中获得 9 或 10 像素的额外空间。我只是有同样的问题。谢谢您的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:44:58.963

根据 L&F 设置，resizable(false/true) 可能会更改窗口边框装饰。没有最大化，没有调整大小箭头。这本身可以改变大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-11T21:30:53.543

代替：

```
frame.setResizable(false); 
```

到：

```
 SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            frame.setResizable(false);
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-01T17:19:46.040

好吧，我遇到了这个问题，这是一个外观问题......

为什么可调整大小的框架具有 (5, 5, 5, 5) 的插图？它让我认为**让它可调整大小会在框架周围添加一些额外的组件，比如......某种“处理程序”来拖动以调整大小**？

然后我发现如果我们使用默认的 Java Metal l&f 和 set `setDefaultLookAndFeelDecorated(true)`，处理程序将被绘制，因此框架不会改变大小。但是在 Nimbus、Motif 和 Windows L&F 中，这一点没有实现，所以这是一个 bug。我会报告的。

我自己的问题和我对 GIF 的回答在这里：

[Swing - setResizable(true) 使 JFrame 标题栏更高，窗口尺寸更小](https://stackoverflow.com/questions/44303746/swing-setresizabletrue-make-jframe-title-bar-higher-and-window-size-smaller/44313182#44313182)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T18:46:06.893

到目前为止，解决这个烦人问题的最佳补丁如下。调用方法的位置无关紧要`setResizable(false)`。只需在您之后添加这段代码`setVisible(true)`。

```
private void sizeBugPatch() {
    while (frame.getWidth() > yourWidth) {
        frame.pack();
    }
} 
```

您以任何可能的方式设置`yourWidth`的*宽度*在哪里，无论是手动还是通过覆盖`setPreferredSize`方法。解释很简单，`frame.pack()`似乎以`frame.setResizable(boolean b)`某种方式重置。您可以使用 an`if`而不是`while`循环，但我更愿意`while`排除即使在 second 之后窗口仍然会超大的情况`pack()`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-19T01:41:47.470

我定义了 2 个 JFrame 子类。如果我在独立应用程序中运行问题框架，则框架大小是正确的。如果我在独立应用程序中运行两个框架，问题框架仍然更大。我在打包之前做了 setResizable(false) ，但我仍然遇到问题。我的解决方法是将布局更改为 BorderLayout 并将（图像）面板放在中心，然后执行 setResizable。

# php - 调整网站上的图像大小以提高效率。

> ID：11225147
> 
> 赞同：3
> 
> 时间：2012-06-27T11:25:42.817
> 
> 标签：php, javascript, jquery, html, image

我目前有一个聚合图像的网站，问题是这些图像非常大，当我以较小的尺寸显示它们时，它们仍然会消耗大量计算。

我很好奇如何实际强制减小尺寸/质量而不只是将其放入`<div>`元素中。

这是我的网站，您可以看到制作图像时它变得多么“滞后”：http: [//newgameplus.nikuai.net/TEST/index.html](http://newgameplus.nikuai.net/TEST/index.html)

我正在使用 timthumb.php 来调整图像大小，但由于某种原因主机不允许该脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:05:28.387

最好的方法是使用某种图像重构服务。

我已经编写了自己的一个，它使用 ffmpeg 和 imagemagik 动态调整图像大小并从视频中生成任意大小的缩略图。我将结果缓存起来以使后续请求变得超级快速，并添加了一些有趣的附加功能，例如使用人脸检测和图像熵的自动兴趣点检测，目的是“无论大小都可以很好的缩略图”

*src.sencha.io*是此类服务的一个示例——该服务的文档在[这里，](http://www.sencha.com/learn/how-to-use-src-sencha-io/)但我在下面包含了重要的部分。

**指定图像尺寸**

```
<img src='http://src.sencha.io/320/200/http://yourdomain.com/path/to/image.jpg'
     alt='My constrained image'
     width='320'
     height='200' /> 
```

这将获取您的图像 (http://yourdomain.com/path/to/image.jpg) 并通过调整大小服务运行，返回 320x200 版本的图像。但是，您无法使用此服务设置重力/兴趣点（据我所知）。

* * *

您还可以使用此服务更改格式、调整 dataurl 的大小、进行百分比调整大小并使用调整大小服务来检测请求图像的用户代理的宽度/高度。

网上有很多这样的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:36:12.560

我同意斜线：这取决于如何调整图像大小。我为网站做的一件事是使用 Photoshop（或 GIMP）将图像调整为我使用图像的页面所需的确切尺寸。然后我还在图像本身的宽度-高度属性中包含相同的尺寸。

此外，如果您要使用不同的文件扩展名保存图像，您可以使用照片编辑软件检查图像的大小，并且（特别是 jpeg 和 png 文件）photoshop 会让您降低质量，从而降低文件大小和加快页面加载速度。

# macos - 如何将自定义 NSView 添加到窗口

> ID：11225151
> 
> 赞同：4
> 
> 时间：2012-06-27T11:25:55.237
> 
> 标签：macos, cocoa, nsview

我知道如何在 iOS 中做到这一点，但不知道如何在 Cocoa 中做到这一点。

我想捕获键盘事件，我想我需要重写acceptsFirstResponder 方法来完成它（keyDown 方法被触发）。所以我创建了一个扩展 NSCustomView 的类，并试图将它添加到主窗口中，但我就是不明白该怎么做。到目前为止，我向主视图添加了一个自定义视图，然后尝试以编程方式添加它，例如：

```
TestView *view = [[TestView alloc] init];
[[_window contentView] addSubview:view]; 
```

但这不起作用。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:42:23.377

要查看视图是否已添加到窗口，您可以覆盖视图的`viewDidMoveToWindow`方法并记录`[self window]`要检查的值（如果是，`nil`则视图已从窗口中删除）：

```
- (void)viewDidMoveToWindow
{
    NSLog(@"window=%p", [self window]);
    [super viewDidMoveToWindow];
} 
```

你应该是子类化`NSView`，不是`NSCustomView`，并且`initWithFrame`是指定的初始化器`NSView`，不是`init`。

尝试：

```
TestView *view = [[TestView alloc] initWithFrame:NSMakeRect(0, 0, 100, 200)];
[[_window contentView] addSubview:view]; 
```

# html - 我在灯箱中有 HTML5 视频。为什么会播放多个视频，我该如何阻止它们？

> ID：11225153
> 
> 赞同：2
> 
> 时间：2012-06-27T11:26:12.977
> 
> 标签：html, video, fancybox, mediaelement.js, fancybox-2

我弹出了一个 Fancybox2 窗口，其中包含以下代码：

```
var mediaElementPlayers = [];

$("#video_list_widget a.video_link").fancybox({
    padding : 0,
    width:500,
    height: 360,
    closeBtn: false,
    content: '<video width="500" height="360" controls="controls" autoplay="autoplay" preload="auto">
    <source type="video/mp4" src="http://pathtomyvideo.mp4" />

    <source type="video/webm" src="http://pathtomyvideo.webm" />

</video>',
    afterShow: function() {
        var mediaElementPlayers = [];
        $('video,audio').each(function(){
            mediaElementPlayers.push(new MediaElementPlayer(this));
            console.log(mediaElementPlayers);
        });
    },

    beforeClose: function(){
        for (var i=0; i<mediaElementPlayers.length; i++){
            console.log(mediaElementPlayers);
            mediaElementPlayers[i].pause(); // pause
            mediaElementPlayers[i].setCurrentTime(0); // rewind
        }
        $('.fancybox-inner').empty();
    },
    afterClose: function (){
        $('video').remove();
    }

}); 
```

我第一次单击时`a.video_link`，它会弹出并播放得很好。让我们将此称为视频 1。如果我在不停止视频的情况下关闭灯箱，它就会停止并被杀死。没问题。

如果我再次单击`a.video_link`它，它会弹出并从头开始（我们称之为视频 2），但视频 1 的音频也在其顶部播放。如果我现在关闭视频 2 的灯箱，视频 1 的音频会继续播放。如果我第三次打开灯箱，视频 2 的音频也会开始播放。这一直持续下去，所以我可以有很多层的音频。

任何人都可以提出解决方案吗？

**更新：**我可以告诉你，当 autoplay 属性被删除时它不会发生，这向我表明原始`<video>`对象在它可以被包含在 mediaplayer js 东西中之前正在播放。如果可能的话，我真的很喜欢自动播放功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:52:29.710

这只是一个猜测，但我想这与您的选择器有关。

当您打开/播放视频时，它似乎也触发了页面上的其他视频 - 我认为自动播放属性实际上通过向您展示您的某些代码针对页面上的其他播放器来帮助您不想惹。

我想这就是问题所在，因为它在页面上全局作用于页面上的所有音频和视频标签，而不仅仅是特定元素中的音频/视频标签：

```
$('video,audio').each(function(){ 
```

我将更改此行，使其仅针对特定的音频/视频标签-您可以通过提供音频/视频标签和 id 属性或使用 jQuery 进行搜索来执行此操作-我无权访问您的代码，因此这可能不会t 工作，但它应该接近你需要的：

```
$(this).find('video,audio').each(function(){ 
```

希望这可以帮助！

# reference - Drupal 7 程序化字段定义

> ID：11225158
> 
> 赞同：0
> 
> 时间：2012-06-27T11:26:49.367
> 
> 标签：reference, drupal-7, drupal-modules

我需要帮助以编程方式设置**节点引用**字段。

我的模块成功创建了一个并将一对“CCK”字段与我的节点相关联。这些字段之一是**node_reference**字段。我的代码如下：

```
$field_ref_name = 'field_custom_reference';
$field = field_info_field($field_ref_name);

if (empty($field)) {
    $field = array(
        "field_name"=>$field_ref_name,
        "label"=>"Custom Reference",
        "type"=>"node_reference",
        "cardinality"=>"1",
        'locked' => TRUE,
    );
    field_create_field($field);
}

$instance = array(
    "field_name"=>$field_ref_name,
    "label"=>"Sequence Reference",
    "type"=>"node_reference",
    "widget"=>array(
        "type"=>"node_reference_autocomplete"
    ),
    "description" => "text describing purpose of this field",
);

$instance["entity_type"] = "node";
$instance["bundle"] = $type;

if( !in_array($type, $field['bundles']['node']) )
    field_create_instance($instance); 
```

现在，代码可以工作，但是当我编辑一个节点，在节点引用字段中输入一个有效值并尝试保存时，我收到以下错误：

> ...：这个帖子不能被引用。

我意识到错误的原因是因为节点引用字段设置没有任何选定的节点作为“**可以引用的内容类型**”。

有谁知道我可以如何调整我的代码以设置可引用的内容类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:37:22.370

可引用类型是字段设置。所以它应该放在字段定义中的“设置”数组下。就像是 -

```
$field = array(
        "field_name"=>$field_ref_name,
        "label"=>"Custom Reference",
        "type"=>"node_reference",
        "cardinality"=>"1",
        'locked' => TRUE,
        'settings' => array(
          'referenceable_types' => array('article'),
        ),
    ); 
```

# django - 如何在 Django 的管理员中动态更改“站点管理”字符串？

> ID：11225163
> 
> 赞同：4
> 
> 时间：2012-06-27T11:27:10.683
> 
> 标签：django, admin

我想用我的管理员中的自定义字符串动态替换“站点管理”。我已经出于其他目的重写了“base.html”，但是现在我需要将一个变量传递给这个模板来`{{ title }}`替换

```
{% block content_title %}{% if title %}<h1>{{ title }}</h1>{% endif %}{% endblock %} 
```

我从[这个问题](https://stackoverflow.com/questions/9220042/django-how-to-pass-custom-variables-to-context-to-use-in-custom-admin-template)中看到，可以通过在模型管理员中覆盖`changelist_view`和添加一个变量来将变量传递给更改列表模板`extra_context`，但是如何将额外的上下文传递给管理员的“主”页面”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:16:29.933

该`index()`视图在`django.contrib.admin.site.AdminSite`类内部并且也支持`extra_context`，您可以覆盖它，例如：

```
def index(self, *args, **kwargs):
     return admin.site.__class__.index(self, extra_context={'title':'customized title'}, *args, **kwargs)
admin.site.index = index.__get__(admin.site, admin.site.__class__) 
```

您也可以`AdminSite`直接覆盖并使用`customized_site`而不是`admin.site`：

```
class CustomizedAdminSite(AdminSite):
    def index(self, *args, **kwargs):
        return super(CustomizedAdminSite, self).index(extra_context={...}, *args, **kwargs)
customized_site = CustomizedAdminSite() 
```

如果您想`title`在所有管理页面中都有，最好使用[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)或如果可以自定义一些模板标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:30:35.497

您覆盖“admin/base_site.html”模板：

```
{% extends "admin/base.html" %}
{% load i18n %}

{% block title %} {{ title }} | {% trans 'YOUR TITLE HERE' %} {% endblock %}

{% block branding %}
<h1 id="site-name">{% trans 'STUFF HERE PERHAPS' %} </h1>
{% endblock %}

{% block nav-global %}

{% endblock %} 
```

# android - Android：选择器中禁用按钮的 textColor 未显示？

> ID：11225166
> 
> 赞同：111
> 
> 时间：2012-06-27T11:27:33.353
> 
> 标签：android, xml, button, selector, background-image

我正在尝试使用选择器制作一个按钮，我的按钮可以具有以下状态：

*   启用/禁用
*   按下/未按下

根据上述状态。我需要操纵按钮的：

*   文字颜色
*   背景图片

该按钮从我被禁用开始，因此它应该具有禁用的 textColor 和禁用的按钮背景。但我可以看到默认的 textColor（在样式中指定）并且没有背景图片！

这是我的选择器 button_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="false"
        android:state_enabled="false"
        android:textColor="#9D9FA2"
        android:drawable="@drawable/button" />    

    <item android:state_pressed="true"
        android:state_enabled="true"
        android:drawable="@drawable/button_pressed"/>

    <item android:state_pressed="true"
        android:state_enabled="false"
        android:textColor="#9D9FA2"
        android:drawable="@drawable/button"/>

    <item android:state_pressed="false"
        android:state_enabled="true"
        android:drawable="@drawable/button"/>    

</selector> 
```

这是我的 layout.xml 中的按钮声明

```
 <Button android:id="@+id/reserve_button"
        android:text="@string/reserve_button"
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:paddingRight="15dp"
        android:layout_gravity="left"
        style="@style/buttonStyle"
        android:background="@drawable/button_selector" /> 
```

最后这是我的风格（我的默认 textColor 设置）

```
<?xml version="1.0" encoding="utf-8"?>

 <resources>

     <style name="buttonStyle">
      <item name="android:textStyle">bold</item>
      <item name="android:textColor">#282780</item>
      <item name="android:textSize">18sp</item>
     </style>

</resources> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-06-27T11:50:15.087

您还需要为[`ColorStateList`](https://developer.android.com/guide/topics/resources/color-list-resource.html)标识不同状态的文本颜色创建一个。

请执行下列操作：

1.  `res\color`创建另一个名为 .xml的 XML 文件`text_color.xml`。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
      <!-- disabled state -->
      <item android:state_enabled="false" android:color="#9D9FA2" /> 
      <item android:color="#000"/>
    </selector> 
    ```

2.  在您的 中，按如下`style.xml`方式对该文件进行引用：`text_color.xml`

    ```
    <style name="buttonStyle" parent="@android:style/Widget.Button">
      <item name="android:textStyle">bold</item>
      <item name="android:textColor">@color/text_color</item>
      <item name="android:textSize">18sp</item>
    </style> 
    ```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-09T10:30:55.517

1.在 /res/ 文件夹中创建一个颜色文件夹，并在 xml 上创建颜色文件夹：

text_color_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <!-- disabled state --> 
<item android:state_enabled="false" android:color="#776678" /> 
 <item android:color="#ffffff"/>
</selector> 
```

2.现在创建一个xml布局：-

```
 <Button

        android:id="@+id/button_search"

        android:layout_width="652dp"

        android:layout_height="48dp"

        android:layout_alignParentLeft="true"

        android:layout_alignParentTop="true"

        android:layout_marginTop="18dp"

        android:background="@android:color/transparent"

        android:text="Hello Bhaskar"

        android:textColor="@color/text_color_selector"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-29T18:34:00.017

最简单的解决方案是将滤色器设置为我在[这里看到的按钮的背景图像](https://stackoverflow.com/a/3485854/1918752)

您可以执行以下操作：

```
if ('need to set button disable')
    button.getBackground().setColorFilter(Color.GRAY, PorterDuff.Mode.MULTIPLY);
else
    button.getBackground().setColorFilter(null); 
```

希望我帮助了某人...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T05:56:51.413

您可以创建一个颜色列表

**文件位置：**

```
res/color/filename.xml 
```

文件名将用作资源 ID。

**资源参考：**

在 Java 中：`R.color.filename`

在 XML 中：`@[package:]color/filename`

**句法：**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:color="hex_color"
        android:state_pressed=["true" | "false"]
        android:state_focused=["true" | "false"]
        android:state_selected=["true" | "false"]
        android:state_checkable=["true" | "false"]
        android:state_checked=["true" | "false"]
        android:state_enabled=["true" | "false"]
        android:state_window_focused=["true" | "false"] />
</selector> 
```

**例子：**

XML 文件保存在`res/color/button_text.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="#ffff0000"/> <!-- pressed -->
    <item android:state_focused="true"
          android:color="#ff0000ff"/> <!-- focused -->
    <item android:color="#ff000000"/> <!-- default -->
</selector> 
```

此布局 XML 会将颜色列表应用于视图：

```
<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_text"
    android:textColor="@color/button_text" /> 
```

参考：[颜色列表参考](https://developer.android.com/guide/topics/resources/color-list-resource)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T11:40:01.887

```
<Button android:id="@+id/reserve_button"
        android:text="@string/reserve_button"
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:paddingRight="15dp"
        android:layout_gravity="left"
        style="@style/buttonStyle"
        android:background="@drawable/button_selector" /> 
```

我在您的布局 xml 中看不到您的按钮的 diabling。将此添加到您的按钮布局中。

```
android:enabled="false" 
```

所以你的按钮布局将是，

```
<Button android:id="@+id/reserve_button"
        android:text="@string/reserve_button"
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:enabled="false"
        android:paddingRight="15dp"
        android:layout_gravity="left"
        style="@style/buttonStyle"
        android:background="@drawable/button_selector" /> 
```

# jsf-2 - Primefaces LightBox 减慢 LightBox 中打开的页面的加载速度

> ID：11225168
> 
> 赞同：0
> 
> 时间：2012-06-27T11:27:49.557
> 
> 标签：jsf-2, primefaces

我在我的应用程序中使用 Primefaces LightBox 弹出窗口。我面临的问题是当我点击链接打开相应页面时，通过LightBox显示页面太慢了。加载需要更多时间。我该如何解决？

灯箱链接：

```
<p:lightBox style="display:inline">
    <a href="login.xhtml">Login&nbsp;&nbsp;</a>
</p:lightBox> 
```

当我点击链接时，对应的页面`login.xhtml`是通过LightBox打开的。我正在使用 PrimeFaces 3.0 和 JSF 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:18:45.973

查看 Dialog 组件以替代您的场景中的 LightBox。Dialog 可以复制 Lightbox 的弹出功能，并具有使登录页面模式化的附加功能（例如，您可以强制用户完成登录过程或关闭登录弹出窗口）。此外，与 LightBox 不同的是，Dialog 能够预渲染其内容，因此当 Dialog 弹出时，用户不会因为弹出框获取其内容而遇到任何 UI 延迟。注意，如果要将登录页面保存在单独的 xhtml 文件中，可以使用 Facelets 包含将其包含在 Dialog 组件中。

# visual-studio-2010 - 从 TFS2010 中删除警报

> ID：11225178
> 
> 赞同：3
> 
> 时间：2012-06-27T11:28:33.627
> 
> 标签：visual-studio-2010, alert

我向 TFS2010 添加了一个警报，每当有人签入特定项目中的文件时，它就会发送一封电子邮件。警报有效 - 我从服务器收到大量电子邮件。我想删除警报，但找不到任何地方可以这样做。这是我使用 VS2010 尝试过的：

*   在团队资源管理器中，右键单击团队项目集合 -> 警报资源管理器。它显示一个空列表。单击刷新没有任何区别。我正在做的截图：

![右键单击团队项目集合](../Images/5cb76a5b8952a9423c86da2ad230282f.png)

![在此处输入图像描述](../Images/40554b624f5cc4116a2ee40cd07f3808.png)

刷新后：

![在此处输入图像描述](../Images/c5cabfee1bdd6ee3303debbaa3bd49f0.png)

*   在团队菜单中，单击警报资源管理器。结果与上述相同。

*   在团队资源管理器中，右键单击团队项目-> 项目警报...它显示“检查您要创建的警报”。我不想创建警报。没有检查任何项目。

*   在 Team 菜单中单击 Project Alerts... 与上面相同的结果。

*   在源代码管理资源管理器中，右键单击团队项目集合-> 更改警报...它显示“向文件夹添加警报”。那不是我想做的。右键单击项目时也会发生同样的情况。

*   在 Source Control Explorer 中，右键单击团队项目 -> Alert on Change... 结果与上面相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:17:11.363

事实证明，幻影团队警报是一个已知问题。解决方案：

在 tbl_EventSubscription 中查找 id

运行 BisSubscribe.exe：

```
C:\Program Files\Microsoft Team Foundation Server 2010\Tools>bissubscribe /unsubscribe /collection http://mytfsservername:8080/Tfs/DefaultCollection /id 51 
```

# jquery - 如何禁用 jQuery 简单模式弹出插件的覆盖？

> ID：11225182
> 
> 赞同：3
> 
> 时间：2012-06-27T11:28:43.537
> 
> 标签：jquery, jquery-plugins, simplemodal

我正在使用插件 [简单模式](http://www.ericmmartin.com/projects/simplemodal/)在我的站点中显示弹出窗口。我需要禁用与弹出窗口一起显示的覆盖。有什么解决方法吗？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T11:33:43.973

在你的CSS中添加这个。它将隐藏覆盖

```
#simplemodal-overlay{
   display: none !important;
} 
```

为确保它始终适用于您网站中的所有简单模式`overlayId`。`simplemodal-overlay`喜欢

```
$("#element-id").modal({
    overlayId : 'simplemodal-overlay'
}); 
```

然后覆盖的 id 将永远是`simplemodal-overlay`，上面的 css 将适用于所有人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:33:51.170

编辑：

```
// Change overlay color and opacity
$("#sample").modal({
opacity:0,
overlayCss: {backgroundColor:"#fff"}
}); 
```

**摘自：** [http ://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

或者

**见演示：http:** [//jsfiddle.net/rathoreahsan/CzPQG/](http://jsfiddle.net/rathoreahsan/CzPQG/)

```
$('#basic-modal .basic').click(function (e) {
    $('#basic-modal-content').modal();        
    $('#simplemodal-overlay').css('display','none'); /* Overlay Div's display = none */
    return false;
}); 
```

**见演示：http:** [//jsfiddle.net/rathoreahsan/Q2LHW/](http://jsfiddle.net/rathoreahsan/Q2LHW/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:33:54.430

尝试 -

```
$('#simplemodal-overlay').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:34:05.547

禁用覆盖将终止使用模式窗口/对话框的目的。无论如何，您可以将不透明度选项设置为 0。

# jquery - jquery mobile 防止多个处理程序从单个事件触发

> ID：11225187
> 
> 赞同：0
> 
> 时间：2012-06-27T11:29:02.683
> 
> 标签：jquery, jquery-mobile

我已经设置了一个多页 html 文档，当用户在页面的左侧或右侧滑动标签时，页面之间的滑动转换会被触发。标签应该滑动到哪些页面的信息嵌入在每个页面 div 顶部的属性中。

最初的滑动一次可以正常工作，但每次连续的滑动似乎都会增加，因此下一次擦除向上移动两页，接下来是四页，依此类推。据我所知，每个页面都正确调用了 Init 函数一次，但是滑动次数正在成倍增加。

环顾四周，我怀疑答案是在滑动事件触发一次时解除绑定，并在页面转换完成后重新绑定它，但我一生无法弄清楚如何......我是新手无论如何，所以一个简单的解释会很棒！

这是相关的HTML：

```
<div data-role="page" id="intro1" class="page" data-rightTarget= "#intro2" data-
leftTarget= "#intro1">

        <script>
        $("body").on('pageshow', "#intro1", function() {
                          InitIntroSliders ();
                          });
        </script>
...

</div><!-- /intro1 -->  

<div data-role="page" id="intro2" class="page" data-rightTarget= "#intro3" data-     
leftTarget= "#intro1">

        <script>
        $("body").on('pageshow', "#intro2", function() {
                        InitIntroSliders ();
                        });
        </script>
...

 </div><!-- /intro2 --> 
```

...等等（似乎我必须将脚本放在每个页面的 div 中，而不是整个 Head 中，以便让它们在每个新页面上重新加载初始化脚本）。

这是jQuery：

```
function InitIntroSliders (){

$(document).on("swipeleft","#righttab", function(){
                var rightTarget = $.mobile.activePage.attr("data-rightTarget");
                $.mobile.changePage($(rightTarget), {transition: 'slide'});
//$(document).off("swipeleft", "#righttab", function());
                });

$(document).on("swiperight","#lefttab", function(){
                var leftTarget = $.mobile.activePage.attr("data-leftTarget");
                $.mobile.changePage($(leftTarget), {transition: 'slide', reverse: 
                'true'});
//$(document).off("swiperight", "#lefttab", function());
                });
} 
```

我尝试添加注释掉的行来关闭绑定，但似乎所做的只是让整个事情停下来。任何想法都非常感谢！贾尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:34:47.467

您不需要在每个`pageShow`.

# java - 将xml从jsp传输到servlet的技术

> ID：11225190
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:29:10.063
> 
> 标签：java, web-services, jsp, web

我正在制作一个将使用某个 Web 服务的 Web 应用程序（标准 JSP 和 servlet）。用户将提供给 Web 服务的数据采用 xml 文件 (data.xml) 的形式。假设用户、Web 应用服务器和 Web 服务服务器分别位于不同的 PC1、PC2 和 PC3 中。用户在 PC3 中有 data.xml 从 PC2 (jsp) 访问网页。我的问题是传输 XML 的更好方法是什么？场景一：从jsp -> servlet -> web service -> servlet -> jsp以filestream的形式传输（文件上传）

场景2：jsp访问data.xml，读取内容，存储在string对象中，然后将xml字符串传递给servlet -> web service -> servlet，最后将response作为对象返回给jsp（不是xml，不是string，而是目的）。

哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:38:52.473

首先您确定，您将如何读取 XML 文件？如果文件在您的应用程序部署在另一台机器上的某台机器上，那么您应该需要将文件上传到您的应用程序，然后您开始读取文件以进行进一步处理。任何情况下您都需要将文件上传到服务器，它将从指定路径读取，然后连接到 web 服务发送数据，处理完成后将响应返回给 JSP。

# sql - Oracle SQL - 匹配电话格式

> ID：11225195
> 
> 赞同：0
> 
> 时间：2012-06-27T11:29:35.933
> 
> 标签：sql, regex, oracle, select

我想查找与以下模式**不匹配的数据：**

*   任意数量的分隔符
*   2个号码
*   任意数量的分隔符
*   2个号码
*   任意数量的分隔符
*   2个号码
*   任意数量的分隔符
*   2个号码
*   任意数量的分隔符
*   2个号码
*   任意数量的分隔符

为此，我使用了这个查询，但它似乎不起作用：

```
select distinct regexp_replace(phonenumber, '[0-9]', '') 
from coord 
where REGEXP_LIKE(phonenumber, '^[ ./]{*}[0-9]{2}[ ./]{*}[0-9]{2}[ ./]{*}[0-9]{2}[ ./]{*}[0-9]{2}[ ./]{*}[0-9]{2}[ ./]{*}$') 
```

我做错什么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:46:07.340

假设您要搜索与您的模式匹配的记录，只需将您**的**`{*}`替换为`*`：

```
SELECT DISTINCT regexp_replace(phonenumber, '[0-9]', '')
  FROM coord 
 WHERE regexp_like(phonenumber,
                   '^[ ./]*[0-9]{2}[ ./]*[0-9]{2}[ ./]*[0-9]{2}[ ./]*'
                   ||'[0-9]{2}[ ./]*[0-9]{2}[ ./]*$') 
```

如果要选择与此模式**不匹配的记录：**

```
SELECT DISTINCT regexp_replace(phonenumber, '[0-9]', '')
  FROM coord 
 WHERE NOT regexp_like(phonenumber,
                       '^[ ./]*[0-9]{2}[ ./]*[0-9]{2}[ ./]*[0-9]{2}[ ./]*'
                       ||'[0-9]{2}[ ./]*[0-9]{2}[ ./]*$') 
```

# objective-c - 视图控制器委托

> ID：11225203
> 
> 赞同：0
> 
> 时间：2012-06-27T11:30:04.613
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uiapplicationdelegate

是否可以从 appDelegate 访问 ViewController 的方法，就像可以与以下代码相反：？

```
AppDelegate *ad = (AppDelegate *) [[UIApplication sharedApplication] delegate]; 
```

当我尝试

```
ViewController *vc = (ViewController *) [[UIApplication sharedApplication] delegate]; 
```

我收到一个错误...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:56:37.503

在您的`AppDelegate`中，假设`viewController`是您的`rootViewController`，您可以通过以下方式获取堆栈上所有视图控制器的列表：

```
NSLog(@"List of current active view controllers:%@", self.viewController.navController.viewControllers); 
```

要访问 viewControllers 中的特定视图控制器：

```
[[self.viewController.navController.viewControllers objectAtIndex:i] someMethodOfThatViewController]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:43:05.340

```
ViewController *vc = (ViewController *)[UIApplication sharedApplication].keyWindow.rootViewController; 
```

或者如果您的代表有属性

```
YourAppDelegate *ad = (YourAppDelegate*)[UIApplication sharedApplication].delegate;
ViewController *vc = ad.yourViewControllerProperty; 
```

# awk - awk 将整数拆分成几个部分

> ID：11225206
> 
> 赞同：-3
> 
> 时间：2012-06-27T11:30:13.753
> 
> 标签：awk, split, integer

我有这个整数`20120305193821`，我想把它分成几个部分`2012-03-05-19:38:21`，以便在 awk 中进一步使用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:48:32.770

如果您使用的是 gawk，则可以使用 FIELDWIDTHS：

```
echo 20120305193821 | gawk '{printf "%s-%s-%s-%s:%s:%s\n",
      $1, $2, $3, $4, $5, $6}' FIELDWIDTHS="4 2 2 2 2 2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:19:09.080

为什么不使用子字符串？写起来很无聊，但正如你暗示的那样，你有索引？

```
echo "20120305193821" | awk '{printf "%s-%s-%s-%s:%s:%s\n",substr($1,1,4),substr($1,5,2),substr($1,7,2),substr($1,9,2),substr($1,11,2),substr($1,13,2)}' 
```

输出：

2012-03-05-19:38:21

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:39:04.147

我知道你没有标记漂亮`sed`所以只是在这里发布以供参考 -

```
$ echo 20120305193821 | sed 's/\(....\)\(..\)\(..\)\(..\)\(..\)\(..\)/\1-\2-\3-\4:\5:\6/'
2012-03-05-19:38:21 
```

# java - 线程以未捕获的异常退出：没有堆栈跟踪

> ID：11225209
> 
> 赞同：11
> 
> 时间：2012-06-27T11:30:29.150
> 
> 标签：java, android, stack-overflow, stack-trace, uncaught-exception

我的应用程序在某处导致强制关闭，但我没有在我的 LogCat 中使用通常的（并且信息量很大的）堆栈跟踪获得 FATAL EXCEPTION，我只收到以下 4 行：

```
06-27 07:08:54.546: D/dalvikvm(14351): GC_FOR_MALLOC freed 9923 objects / 657416 bytes in 21ms
06-27 07:08:54.769: W/dalvikvm(14351): threadid=20: thread exiting with uncaught exception (group=0x4001d7f0)
06-27 07:08:54.796: W/dalvikvm(14351): threadid=21: thread exiting with uncaught exception (group=0x4001d7f0)
06-27 07:08:54.796: I/Process(14351): Sending signal. PID: 14351 SIG: 9 
```

这是在调试模式下，LogCat 上没有应用任何过滤器！

*   什么可能导致这种行为？
*   有没有办法告诉是什么导致了这个异常？

**更新：**感谢下面的@assylias，我已经能够实现：

```
final UncaughtExceptionHandler subclass = Thread.currentThread().getUncaughtExceptionHandler();
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
    @Override
    public void uncaughtException(Thread paramThread, Throwable paramThrowable) {
    Log.getStackTraceString(paramThrowable);

    subclass.uncaughtException(paramThread, paramThrowable);
    }
}); 
```

这产生了这些添加的行：

```
06-27 08:24:47.105: D/dalvikvm(15475): GC_FOR_MALLOC freed 13865 objects / 1435952 bytes in 45ms
06-27 08:24:47.136: I/dalvikvm(15475): threadid=15: stack overflow on call to Ljava/lang/AbstractStringBuilder;.enlargeBuffer:VI
06-27 08:24:47.136: I/dalvikvm(15475):   method requires 28+20+20=68 bytes, fp is 0x45209338 (56 left)
06-27 08:24:47.140: I/dalvikvm(15475):   expanding stack end (0x45209300 to 0x45209000)
06-27 08:24:47.140: I/dalvikvm(15475): Shrank stack (to 0x45209300, curFrame is 0x4520937c)
06-27 08:24:47.159: I/dalvikvm(15475): threadid=16: stack overflow on call to Ljava/lang/AbstractStringBuilder;.enlargeBuffer:VI
06-27 08:24:47.159: I/dalvikvm(15475):   method requires 28+20+20=68 bytes, fp is 0x4520c338 (56 left)
06-27 08:24:47.167: I/dalvikvm(15475):   expanding stack end (0x4520c300 to 0x4520c000)
06-27 08:24:47.167: I/dalvikvm(15475): Shrank stack (to 0x4520c300, curFrame is 0x4520c37c)
06-27 08:24:47.175: I/dalvikvm(15475): threadid=17: stack overflow on call to Ljava/lang/AbstractStringBuilder;.enlargeBuffer:VI
06-27 08:24:47.175: I/dalvikvm(15475):   method requires 28+20+20=68 bytes, fp is 0x4520f338 (56 left)
06-27 08:24:47.175: I/dalvikvm(15475):   expanding stack end (0x4520f300 to 0x4520f000)
06-27 08:24:47.175: I/dalvikvm(15475): Shrank stack (to 0x4520f300, curFrame is 0x4520f37c) 
```

这当然是更有用的信息，但现在我正在努力解决以下问题：

*   尽管调用了`subclass.uncaughtException()`. 为什么？
*   所有这些堆栈溢出的含义是什么？我能在我糟糕的 Android 测试设备上做些什么？
*   我怎样才能知道我的代码中的哪个部分导致了这种情况？

**更新：** `Log.getStackTraceString(paramThrowable);`实际上并没有打印任何东西。我收到的额外打印来自[伪造](https://stackoverflow.com/a/9050990/562776)的subclass.uncaughtException(paramThread, paramThrowable); 记录完整堆栈跟踪的正确方法是使用[Log.e(TAG, "uncaughtException", throwable)](https://stackoverflow.com/a/7841300/562776)。

现在剩下的唯一问题是如何重新抛出异常？只做一个`throw paramThrowable`？

回答我的最后一个问题：Eclipse 不会让我在没有 try/catch 的情况下抛出，这让我明白我想要的不是重新抛出，而是`killProcess()`. 问题解决了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T11:46:05.000

您可以在应用程序的开头设置默认的未捕获异常处理程序并在其中记录一些数据（下面的示例使用 java 记录器，但很容易转置到 Android）：

```
private static void setDefaultUncaughtExceptionHandler() {
    try {
        Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {

            @Override
            public void uncaughtException(Thread t, Throwable e) {
                logger.error("Uncaught Exception detected in thread {}", t, e);
            }
        });
    } catch (SecurityException e) {
        logger.error("Could not set the Default Uncaught Exception Handler", e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:42:29.123

这将是乏味的，但我会单步执行，直到它与调试器中断。那么你可以添加一个更一般的捕获

捕获（异常 e）{ }

所有异常都从 Exception 扩展，因此可以帮助您进一步诊断您的问题。

还有一个想法，也许你的应用程序正在运行设备内存。由于 JVM 因内存错误而关闭，JVM 可能会在不告诉您的情况下杀死您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T13:34:22.257

我知道这是旧的，但如果其他人想知道在处理未捕获的异常后正常退出：

```
final Thread.UncaughtExceptionHandler androidDefaultUEH = Thread.getDefaultUncaughtExceptionHandler();

Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
            @Override
            public void uncaughtException(final Thread thread, final Throwable ex) {
                // Handle exception however you want, then:
                androidDefaultUEH.uncaughtException(thread, ex);
            }
        }); 
```

# objective-c - Objective-C 索引

> ID：11225211
> 
> 赞同：0
> 
> 时间：2012-06-27T11:30:35.390
> 
> 标签：objective-c, indexing

我目前正在尝试在我的程序中实现某种搜索系统，并想使用索引，但我在 Objective-C 方面还很新。主要思想是有一个“搜索”命令或文本框，当我输入一个单词时，它会显示包含该单词的所有项目。所有这些“项目”将按字母顺序列在 .txt 文件中（希望如此）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:35:20.007

您需要将 .txt 文件读入一个`NSSet`或其他一些集合类，然后您可以使用以下内容进行搜索：

```
[words filterUsingPredicate:[NSPredicate predicateWithFormat:@"SELF contains[c] 'word'"]]; 
```

（有关详细信息，请参阅[谓词指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSpotlightComparison.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:13:22.350

理想的情况是，如果文本文件很大并且您想按每个条目的前导字符进行索引，则创建一个“涂料向量”，其中涂料矢量中的每个条目都包含该行的前几个字符，后跟该行开始的文件偏移量。请注意，一个涂料向量条目可以覆盖许多文件行，因为它就像字典中的索引选项卡一样。

*但是，如果您想在*文件的一行中搜索单词，最好使用 SQL 数据库或某些[KWIC](http://en.wikipedia.org/wiki/Key_Word_in_Context)方案。

# java - Android 自定义画笔颜色

> ID：11225215
> 
> 赞同：2
> 
> 时间：2012-06-27T11:30:46.077
> 
> 标签：java, android, graphic, brush, colormatrixfilter

我正在尝试为我的 Android 绘画应用程序制作自定义画笔。我从 Michael 的代码（[在此处找到](https://stackoverflow.com/questions/8428874/how-to-make-custom-brush-for-canvas-in-android/8700065#8700065)）开始，我设法获得了 .png 画笔并将其用作位图并重绘它。它工作正常，但我不能改变颜色。尝试使用`setcolorfilter`and`colormatrixfilter`但它似乎不起作用。任何人都知道我该怎么做？

```
private Bitmap mBitmapBrush;
   private Vector2 mBitmapBrushDimensions;
   private List<Vector2> mPositions = new ArrayList<Vector2>(100);
private Paint mPanit;

    public MyView(Context c) {
        super(c);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        mBitmapBrush = BitmapFactory.decodeResource(c.getResources(),R.drawable.brush1);
        mBitmapBrushDimensions = new Vector2(mBitmapBrush.getWidth(), mBitmapBrush.getHeight());

    }

 @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        for (Vector2 pos : mPositions) {

            canvas.drawBitmap(mBitmapBrush, pos.a, pos.b, mPanit);

        }

    invalidate();
    } 
```

当我尝试使用 Colormatrixfilter 时，.set 函数出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-18T17:11:37.983

我遇到过同样的问题。为了更改位图颜色，您需要将颜色添加到您的绘画对象并将其应用到位图中。请参阅此处的工作示例，

```
 for (Vector2 pos : customBrushMap.get(p)) {
        Paint paint = new Paint();
        ColorFilter filter = new PorterDuffColorFilter(R.Color.GREEN, PorterDuff.Mode.SRC_IN);
        paint.setColorFilter(filter);
        canvas.drawBitmap(mBitmapBrush, pos.x, pos.y, paint);
} 
```

结果，

[![在此处输入图像描述](../Images/34e2e281042959a1882ed2d44605bb44.png)](https://i.stack.imgur.com/l9rbh.png)

# php - PHP SQL Server 2005 标准版连接超时

> ID：11225222
> 
> 赞同：0
> 
> 时间：2012-06-27T11:32:05.047
> 
> 标签：php, sql-server-2005, database-connection

对于 PHP 和 SQL Server 2005 的连接问题，我已经搜索了无数的解决方案，但仍然没有运气。我正在使用 SQL Server 2005 标准版。
这是代码：

```
$server = "MYLAP01\\SQLEXPRESS";
$options = array("Database" => "test1");
$conn = sqlsrv_connect($server, $options);

if ($conn === false) die("<pre>".print_r(sqlsrv_errors(), true));echo "Successfully connected!";

sqlsrv_close($conn); 
```

和输出：

```
大批
(
    [0] => 数组
        (
            [0] => 08001
            [SQLSTATE] => 08001
            [1] => -1
            [代码] => -1
            [2] => [Microsoft][SQL Server Native Client 11.0]SQL Server 网络接口：查找指定的服务器/实例时出错 [xFFFFFFFF]。
            [消息] => [Microsoft][SQL Server Native Client 11.0]SQL Server 网络接口：查找指定的服务器/实例时出错 [xFFFFFFFF]。
        )

    [1] => 数组
        (
            [0] => HYT00
            [SQLSTATE] => HYT00
            [1] => 0
            [代码] => 0
            [2] => [Microsoft][SQL Server Native Client 11.0]登录超时过期
            [消息] => [Microsoft][SQL Server Native Client 11.0]登录超时已过期
        )

    [2] => 数组
        (
            [0] => 08001
            [SQLSTATE] => 08001
            [1] => -1
            [代码] => -1
            [2] => [Microsoft][SQL Server Native Client 11.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
            [消息] => [Microsoft][SQL Server Native Client 11.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
        )

)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:02:55.467

通过添加端口号修复此问题： $server = "MYLAP01\SQLEXPRESS,1433";

# jquery - jQuery动态添加css样式到链接列表

> ID：11225223
> 
> 赞同：1
> 
> 时间：2012-06-27T11:32:08.993
> 
> 标签：jquery

链接列表。当我们点击它时需要改变它的颜色，即突出显示活动链接......我不能使用css，因为这个页面没有刷新。想要突出显示当前链接。

**HTML**

```
<table border="0">
    <tr style=" width: 100px;">
        <td>
            <div class="overMe">
                <a href="javascript:void(0);" class="leftList">link 1</a>
            </div>
        </td>
    </tr>
    <tr style=" width: 100px;">
        <td>
            <div class="overMe">
                <a href="javascript:void(0);" class="leftList">link 2</a>
            </div>
        </td>
    </tr>
    <tr style=" width: 100px;">
        <td>
            <div class="overMe">
                <a href="javascript:void(0);" class="leftList">link 3</a>
            </div>
        </td>
    </tr> </table> 
```

**​CSS**

```
a {
    color: darkgreen;   
}

.selected {
     color: red;   
} 
```

**jQuery 代码**

```
$(document).ready(function(){
    $('.overMe a').click(function(){
        $(this).addClass('selected');
        $('.overMe a').siblings().removeClass('selected');
    });
}) 
```

​示例：http: [//jsfiddle.net/TL9rh/](http://jsfiddle.net/TL9rh/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:33:32.570

使用[`.not(this)`](http://api.jquery.com/not/)：

```
$('.overMe a').not(this).removeClass('selected'); 
```

示例：http: [//jsfiddle.net/Curt/TL9rh/65/](http://jsfiddle.net/Curt/TL9rh/65/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T11:37:54.600

你可以简化事情

```
$(document).ready(function(){
    $('.overMe a').click(function(){
        $('.overMe a').removeClass('selected');
        $(this).addClass('selected');
    });
}); 
```

# php - PHP表单代码维护

> ID：11225225
> 
> 赞同：0
> 
> 时间：2012-06-27T11:32:15.513
> 
> 标签：php, mysql, forms

我正在使用 mysql 中的数据库，我需要制作一个面向用户的页面，允许我为每个字段输入文本，然后提交记录。我已经能够轻松地做到这一点，但是每次我决定添加/删除一个字段时，不得不更新 input.html 和 save.php 就变得烦人了。

似乎真的应该有某种程序可以为我自动维护代码并让我只关注数据库结构。有谁知道这样做的？我觉得我做错了。

提前致谢。

PS 我意识到我可以只使用 phpmyadmin，但我不想让我的数据输入人员完全访问数据库；再加上他们不是技术类型，我不想恐吓他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:40:16.903

最后，我决定自己编写脚本，使用 INFORMATION_SCHEMA 获取字段名称，然后进行递归循环以添加每条记录。这并不难，但似乎仍然应该有更好的方法。

# json - 将 JSON 字符串传递到 Jstree

> ID：11225226
> 
> 赞同：2
> 
> 时间：2012-06-27T11:32:28.073
> 
> 标签：json, jsp, jstree

我在将 JSON 数据传递到 Jstree 时遇到问题。

以下是我的 Jstree

```
 $("#tree")
       .bind("open_node.jstree", function (event, data) {   
            console.log(data.rslt.obj.attr("id"));     

        }) 
       .jstree({
        "plugins" : ["themes", "json_data", "ui"],
    "json_data" : {
        "data":    [{"data":'Top Level - ',"state":'closed',"attr":{"seq_no":341386}}], 
        "state" : "open",
         "ajax": {   
            "type": 'POST', 
            "dataType": 'json',
            "data": {"action": 'getChildren'},  
            "url": function (node) { 
            var nodeId = node.attr('seq_no');         
                 return 'ajax/test.jsp?seq_no=' + 341386;       
            }, 
            "success": function (new_data) {

                return new_data;
            }
        }
    }
}); 
```

## test.jsp 看起来像这样：

```
RecordCollection result=null;
PlsqlSelectCommand selCmd =  null;

String sErrorMsg = "";
String sqlSelect;

OutputFormat    format  = new OutputFormat( doc );   //Serialize DOM
StringWriter    xmlOut = new StringWriter();        //Writer will be a String
XMLSerializer   serial = new XMLSerializer( xmlOut, format ); 
serial.serialize(doc);

JSONObject jsonObject = XML.toJSONObject(xmlOut.toString());
<%=jsonObject%> 
```

* * *

问题是 JSON 数据没有传递到 jstree。因此我无法设置我的子节点。我已经很努力了，但无法让它发挥作用。

为了将这个 JSON 字符串传递到 jstree 中，我还需要做些什么吗？当数据馈送被硬编码时，我的 jstree 工作。任何帮助深表感谢。

# extjs - 面板内的面板：自动滚动不起作用

> ID：11225227
> 
> 赞同：3
> 
> 时间：2012-06-27T11:32:36.967
> 
> 标签：extjs, view, scroll, extjs4, scrollbar

我有这个视图（DetailsContainer，这个问题的代码部分中的第一类），里面有两个项目（MetaDataPanel，预览），但是自动滚动在 MetaDataPanel 中不起作用（按照代码）。因此，当我将一些项目放入 MetaDataPanel 时，自动滚动不起作用... PS：MetaDataPanel 的内容是动态生成的，将元素添加到此面板...有什么建议吗？

```
Ext.define('DP.view.DetailsContainer' ,{ 
id: 'DetailsContainer',
extend: 'Ext.Panel',
alias : 'widget.DetailsContainer',
collapsible: true,
// margins:'5 0 5 5',
split:true,
layout: {
    type: 'accordion',
    align: 'stretch',
    pack  : 'start'
},

initComponent: function() {

    Ext.apply(this, {

        items: [{
            xtype: 'MetaDataPanel',
            flex:1
        },{
            xtype: 'Preview',
            flex:2     
        }]
    });

    this.callParent(arguments);
}
});

Ext.define('DP.view.MetaDataPanel' ,{
id: 'MetaDataPanel',
extend: 'Ext.Panel',
alias : 'widget.MetaDataPanel',
title : 'MetaDati', 
layout: 'fit',
autoScroll:true, //TODO: autoscroll not working
initComponent: function() {
    Ext.apply(this, {
        items: [{
            xtype: 'component' ,
            html: 'Nessun File o Cartella selezionata. Selezionare un elemento per visualizzare i metadati!',
            margin: 5,
            style: {
                color: '#000000'
            }
        }]
    });
    this.callParent(arguments);
}
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T11:28:53.663

在具有合适布局的容器上指定 autoScroll 是没有意义的。孩子总是适合容器的大小，它永远不会变大，所以你永远不能滚动。您想要内部组件上的 autoScroll 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:03:06.180

我认为手风琴面板滚动没有意义。您应该做的是将内部组件设置为滚动。看看你的代码略有改变以反映这个想法：http: [//jsfiddle.net/dbrin/jmHEj/](http://jsfiddle.net/dbrin/jmHEj/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T22:50:52.820

最简单（或懒惰）的是将 config 设置`autoScroll`为默认值 - 这样它将被继承：

```
defaults: {autoScroll: true}, 
```

# python - 在 Python 中找出可导入的模块

> ID：11225235
> 
> 赞同：1
> 
> 时间：2012-06-27T11:33:10.123
> 
> 标签：python, autocomplete, ipython

iPython 具有能够自动完成模块的出色功能，并且在其中运行得非常好。

很长一段时间以来，我都有一个 shell 函数，它允许我将目录更改为给定模块所在的位置。它通过尝试从第一个参数导入模块的名称并查看其`__file__`.

我想做的是找出可用的可导入模块，这样我就可以为这个小助手编写一个自动完成功能。

我知道对于给定模块，我可以做类似的事情`dir(module_name)`，这会给我该模块所需的东西，但我不确定该怎么做才能找出我可以导入的内容，就像 iPython 当你做类似的事情时：

```
import [TAB] 
```

或者

```
import St[TAB] 
```

这将自动完成所有以 . 开头的可导入模块`St`。

我知道如何编写自动完成功能，我对找到知道我可以导入什么的方法很感兴趣。

**编辑：**

通过挖掘 IPython 代码，我设法找到了为给定环境获取所有当前模块的确切部分：

```
from IPython.core.completerlib import module_completion

for module in module_completion('import '): 
    print module 
```

我打印结果的原因是因为我实际上使用它来完成 ZSH，所以我需要处理输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:36:46.353

作为起点，您可以遍历`sys.path`查找 python 模块的路径，因为这正是这样`import`做的。除此之外，Python 不会为所有模块提供索引或其他内容，因为导入在运行时被请求时解析。您可以轻松地为内置模块提供索引，并且可能为以前导入的模块提供缓存或其他东西。

# javascript - 如何在 javascript 函数中将参数传递给 Ruby 'send' 方法？

> ID：11225236
> 
> 赞同：0
> 
> 时间：2012-06-27T11:33:17.107
> 
> 标签：javascript, ruby-on-rails

我的 erb 模板中有一个 javascript 函数：

```
function replaceNew(field_name){
  var el = document.getElementById('registrierung_' + field_name)
  el.value = <%= @abholstelle.send(field_name) %>
} 
```

并得到错误：

```
undefined local variable or method 'field_name' 
```

我怎样才能通过那个'field_name'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:42:00.197

你不能。ruby 在服务器上运行，早在 javascript 在连接另一端的客户端上运行之前。您将不得不使用 AJAX 发送`field_name`到服务器。顺便说一句，你正在用那种随心所欲的方式挖一个安全漏洞`#send`。

# oracle - Hibernate `assigned` 策略返回 0 与序列和触发器

> ID：11225240
> 
> 赞同：0
> 
> 时间：2012-06-27T11:33:29.883
> 
> 标签：oracle, hibernate, sequence

我有表使用触发器和序列来设置它的 PK 列。

其 Pk 的 Hibernate 映射策略是`assigned`..

这会在`session.save(obj)`返回对象中产生`id=0`

如何使其返回正确分配的 PK 值。

`session.getIdentifier()`不工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:29:57.083

`assigned`表示：没有人生成 ID，ID 在实体中明确设置，然后再持久化。

你想做的事是不可能的。Hibernate 必须在不知道其 ID 的情况下插入实体，然后数据库将生成 ID，而 Hibernate 必须从数据库中重新加载实体以知道其 ID。但是它如何在不知道实体 ID 的情况下重新加载实体？

本机生成器做同样的事情，它之所以有效，是因为数据库提供了`getLastGeneratedId()`一种允许获取数据库生成的 IOD 的方法。但是你不能用 Oracle 和触发器来做到这一点。

从数据库中删除触发器，使用序列生成器，一切都会好起来的。

# sql-server - SQL Server 和模型之间的手动连接

> ID：11225241
> 
> 赞同：-6
> 
> 时间：2012-06-27T11:33:30.320
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3

我在 ASP.Net 中创建了一个空项目，然后手动添加它视图、控制器和模型。现在我想将 SQL Server 连接到 Model 类。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:38:50.933

```
try with this code, this code contain select query for just example    

    // Is your string connection to your database and server
    string connectionString = ""; //connection to your database

        //Create a connection to your database
        //using bloc , in order to destruct connection object in the end of treatment
        using (SqlConnection connection = new SqlConnection(connectionString))
        {

            //Create object command who contain your query sql, permit you to get data or       //insert on update or delete data
            using (SqlCommand command= connection.CreateCommand())

                {
                    //for example a query, who select data from table in your databse, 
                    command.CommandText = "SELECT * FROM Table where col = @ParameterTest";
                    //for exxample a parameter for your query
                    command.Parameters.Add("@ParameterTest", 123); //your test value

                    //after create connection you must open this  
                    command.Connection.Open();
                    //get data in reader, structure for readin datas
                    var reader = command.ExecuteDataReader();

                }
        } 
```

# php - 如何使下载链接通过代理？PHP

> ID：11225243
> 
> 赞同：0
> 
> 时间：2012-06-27T11:33:31.083
> 
> 标签：php, file, proxy, download

我有一个代理（IP + 端口）和一个位于不同服务器上的文件。

我需要人们通过我的代理下载这个文件。问题是，我不希望人们需要在浏览器上做事......

我怎么做？

谢谢！如果您有不明白的地方，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:40:21.670

只需这样做：

获取链接：

```
$contents=file_get_contents("link-to-file"); 
```

放内容：

```
file_put_contents("a temp path-with-file-type",$contents); 
```

将用户带到文件：

```
header("location:your-temp-path-here"); 
```

可能不是最好的方法，但它有效......

`$_GET`此外，如果您打算通过使用或链接使其稍微动态`$_POST`化，您应该注意；这会打开一个严重的安全漏洞，你不应该这样做。

# ruby-on-rails - 在 Rails 中从模型中查找特定属性的值

> ID：11225246
> 
> 赞同：0
> 
> 时间：2012-06-27T11:33:38.900
> 
> 标签：ruby-on-rails, find, modelattribute

我试图在 rails 中找到特定模型属性的值。这是我在用户控制器的“创建”方法中的代码：

```
@user = User.find(1, :select => :money)
existing_money = @user
puts "#{existing_money}" 
```

在我的 Heroku 日志中，我将看到以下输出的变体，而不是该特定用户的 :money 整数（使用 :id 1）

```
#<User:0x00000004e7cbc0> 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:53:46.043

```
@user = User.find(1, :select => :money) 
```

您正在`@user`使用只有一个值的对象设置实例变量，即`money`值。目前，这一切只是为您节省了几个字节，省去了诸如`id`,`email`和该表中的任何其他列之类的内容。然而它仍然返回一个带有属性的对象，唯一的区别是你的对象只有一个属性可以调用。

```
existing_money = @user 
```

鉴于它`@user`仍然是一个具有单个属性的对象，您现在将该对象保存在`existing_money`局部变量中。您可能想要做的是*仅将`money`属性存储在此变量中。

所以你需要这个：

```
existing_money = @user.money

puts "#{existing_money}" 
```

经过上述更改后，该`puts`语句应该返回属性值，而不是封装属性的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:35:29.243

由于 existing_money 只是您看到的对象 ID 的对象。
当你想要钱属性时，你也必须引用它。

```
puts "#{existing_money.money}" 
```

# css - jquerymobile双滑块，高亮范围

> ID：11225250
> 
> 赞同：1
> 
> 时间：2012-06-27T11:33:53.410
> 
> 标签：css, jquery-mobile, slider

[如果这个双滑块http://jsfiddle.net/NkjQr/314/](http://jsfiddle.net/NkjQr/314/)那就太好了

只能突出显示其最小/最大范围（两个滑块手柄之间的范围）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:32:46.810

对你来说是个好消息。虽然，我很确定你知道这一点：

[http://view.jquerymobile.com/docs/widgets/sliders/rangeslider.php](http://view.jquerymobile.com/docs/widgets/sliders/rangeslider.php)

# opencv - 如何用opencv模拟摇晃的凸轮？

> ID：11225256
> 
> 赞同：5
> 
> 时间：2012-06-27T11:34:01.507
> 
> 标签：opencv

我正在尝试在静态视频中模拟摇晃的凸轮。我可以随机选择几个点，然后使用缓动进行平移/缩放/扭曲，但我想知道是否有更好、更标准的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:12:35.307

摇晃的相机通常不包括变焦。图像旋转分量也非常小，可以忽略不计。仅使用 2D 翻译可能就可以获得足够的结果。

您可能应该做的是及时定义*抖动路径*- 每帧原始静态视频的图像运动量 - 然后将每帧移动这个量。
您可能需要稍微裁剪视频以隐藏图像边框附近的任何空白部分，剩余的空白区域可能会使用绘画来填充。由于您正在模拟物理手部运动，因此该路径应该相对平滑且不完全随机抖动。

为了使效果更有说服力，您还应该添加运动模糊。
这种模糊的方向与抖动路径相同，并且量基于当前的抖动速度。

# java - 如何从 JNI 返回枚举

> ID：11225261
> 
> 赞同：18
> 
> 时间：2012-06-27T11:34:26.670
> 
> 标签：java, enums, java-native-interface

在java中我有：

```
public class MyClass{

    public enum STATUS {
        ZERO,
        ONE ,
        TWO
    }

    public native STATUS nativeGetStatus();

    ...

    private STATUS state = nativeGetStatus(); //returns enum
    private STATUS state2 = nativeGetStatus(); //returns enum 

} 
```

我希望本机方法“nativeGetStatus”返回此枚举值。

JNI 返回整数并与 java 中的枚举值进行比较是一种选择，但想知道是否可以通过 jobject 返回值并将其直接分配给 state ？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-07-03T06:30:32.207

我为接受的答案而苦苦挣扎，因为我有一段时间无法弄清楚静态字段的签名。所以这里的 JNI 实现应该适用于上面的例子（未测试）：

```
jclass clSTATUS    = env->FindClass("MyClass$STATUS");
jfieldID fidONE    = env->GetStaticFieldID(clSTATUS , "ONE", "LMyClass$STATUS;");
jobject STATUS_ONE = env->GetStaticObjectField(clSTATUS, fidONE);

return STATUS_ONE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:38:37.377

当然，你可以做到。Enum 值是 Enum 类的公共静态字段，因此您可以使用[此](http://web.archive.org/web/20120626131057/http://java.sun.com/docs/books/jni/html/fldmeth.html)官方手册编写代码。只需从 JNI 获取字段并将其作为作业返回即可。

# iphone - 重复代码与容易合并

> ID：11225262
> 
> 赞同：1
> 
> 时间：2012-06-27T11:34:29.710
> 
> 标签：iphone, git

我在master中有工作代码。我需要创建一个新的应用程序作为一个新的分支，它具有额外的功能，这与 master 中已有的功能相似。我还需要不时合并从主分支到新分支的更改。

我尝试了以下方法：

> 1.  单独创建新类，尽管它们具有相似的功能 + git merge master 没有问题
>     *   有重复的代码
> 2.  为通用功能创建抽象类，然后从它继承旧的主类和新的分支类+没有重复的代码
>     *   git merge master 存在永​​久性问题
> 3.  它是 #2 的修改 - 将抽象类移动到 master 分支 - 解决了上述两个问题，但是
>     *   master 中有不必要的（抽象）代码

那么首选哪种方式呢？还是有正确的（另一种）解决方案？

**更新：**
添加了#3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:37:54.167

**[理想的解决方案是隔离子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**中的抽象类，并使父仓库（具有 master 和您的新应用程序分支的仓库）使用所述子模块。
即在子模块（它本身是一个单独的 git repo）所在的子目录中查找公共类。

这样，您就可以分开：

*   master和app的合并
*   通用类的演变（在他们自己的 git repo 中完成，在你的主 repo 中作为子模块导入）

# iphone - 如何以编程方式从属性列表中获取数据到 NSArray？

> ID：11225263
> 
> 赞同：0
> 
> 时间：2012-06-27T11:34:31.163
> 
> 标签：iphone

我生成了一个属性列表，其中保存了一些医院名称。现在我想从该 plist 中将名称放入一个数组中。请帮我。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:35:38.713

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"plist"];
contentArray = [NSArray arrayWithContentsOfFile:plistPath]; 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:45:50.157

尝试这个

```
NSMutableDictionary* dictionary = [[[NSMutableDictionary alloc] init] autorelease];

NSError *error;
// Look in Documents for an existing plist file
NSArray *paths = NSSearchPathForDirectoriesInDomains(
NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString* metadataPlistPath = [documentsDirectory stringByAppendingPathComponent:
[NSString stringWithFormat: @"Metadata.plist"]];
[metadataPlistPath retain];

// If it's not there, copy it from the bundle
NSFileManager *fileManger = [NSFileManager defaultManager];
if ( ![fileManger fileExistsAtPath:metadataPlistPath] ) {
NSString *pathToSettingsInBundle = [[NSBundle mainBundle]
pathForResource:@"Metadata" ofType:@"plist"];
[fileManger copyItemAtPath:pathToSettingsInBundle toPath:metadataPlistPath error:&amp;error];
}
//Now read the plist file from Documents
NSString* myPlistPath = [documentsDirectory stringByAppendingPathComponent:
[NSString stringWithFormat: @"Metadata.plist"] ];

dictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:myPlistPath];

return dictionary;
}

//fetch the data based on key
- (NSMutableArray*) fetchMetadataArrayForKey:(NSString*)aKey {
NSMutableArray* arrCategories = [[[NSMutableArray alloc] init] autorelease];
NSMutableDictionary* dictionary = [self fetchMetadata];

arrCategories = [dictionary valueForKey:aKey];

return arrCategories;

} 
```

# nunit - Nant 不启动 nunit2 任务

> ID：11225266
> 
> 赞同：0
> 
> 时间：2012-06-27T11:34:36.817
> 
> 标签：nunit, nant

我有一个非常简单的 Watin 测试类，它是从 Visual Studio 构建和运行的。现在我想用 Nant 构建它并启动它。我编写了以下 nant .build 文件：

```
<?xml version="1.0"?>
<project name="WatinTests" default="build">
  <property name="build.dir" value="c:WatinTests\bin\" />
  <property name="project.rootdirectory" value="." />
  <property name="solution.dir" value="."/>
  <property name="solution.file" value="${solution.dir}/WatinTests.csproj"/>
  <property name="build.configuration" value="debug" />
  <property name="nant.settings.currentframework" value="net-4.0" />
  <mkdir dir="${build.dir}" />
  <target name="build">
    <exec
      program="${framework::get-framework-directory(framework::get-target-framework())}\msbuild.exe"
      commandline="${solution.file} /t:Clean /p:Configuration=${build.configuration} /v:q"
      workingdir="."
      output="${build.dir}/WatinTests.dll" />
  </target>
  <target name="test" depends="build">
    <nunit2>
      <formatter type="Plain" />
      <test assemblyname="${build.dir}WatinTests.dll" />
    </nunit2>
  </target>
</project> 
```

第一个任务成功执行 - WatinTests.dll 文件进入 \bin 目录。但是测试没有启动。这是输出：

> 构建文件：file:///c:/WatinTests/nant.build 目标框架：Microsoft .NET Framework 4.0 指定目标：构建测试
> 
> 建造：
> 
> 测试：
> 
> 构建失败
> 
> c:\WatinTests\nant.build(14,6)：执行测试失败。如果您的程序集不是使用 NUnit 版本 2.6.0.12051 构建的，请确保您已重定向 ass embly 绑定。有关更多信息，请参阅任务文档。无法加载文件或程序集“WatinTests.dll”或其依赖项之一。试图加载格式不正确的程序。无法加载文件或程序集“WatinTests.dll”或其依赖项之一。试图加载格式不正确的程序。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:55:00.250

如[Nant 文档](http://nant.sourceforge.net/release/0.92/help/tasks/nunit2.html)中所述，您是否将程序集绑定重定向添加到您的 app.config 中：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="nunit.framework" publicKeyToken="96d09a1eb7f44a77" culture="Neutral" />
      <bindingRedirect oldVersion="0.0.0.0-2.2.8.0" newVersion="2.2.8.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

# android - Android ListFragmentIssue

> ID：11225267
> 
> 赞同：0
> 
> 时间：2012-06-27T11:34:39.400
> 
> 标签：android

我有一个带有 2 个 ListFragments 的 FragmentActivity，每次我在它们之间滑动时，都会开始布局进度并导致适配器上所有可见项目的 getView。我怎样才能避免这种行为？

我的列表中有 7 个可见项目，并且 getView 出现了太多次......（应用程序启动时 400 次）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:39:30.777

如果您维护其他人的代码并且他正在使用 ListFragment 确保他没有覆盖 onCreateViewRoot 方法！！！

# plone - 是否有用于灵巧的多个上传参考小部件（用于灵巧内容类型的快速上传小部件）

> ID：11225268
> 
> 赞同：4
> 
> 时间：2012-06-27T11:34:46.340
> 
> 标签：plone, dexterity

我正在研究一种应该能够支持多次上传图像的灵巧内容类型。我想要的是能够使用类似于[`collective.plonefinder`referencewidgets](http://svn.plone.org/svn/collective/collective.plonefinder/trunk/collective/plonefinder/widgets/referencewidget.py)之一的东西。

我查看了记录的示例，`collective.plonefinder`但它们的小​​部件似乎只与原型兼容。

我还查看了`collective.quickupload`（它提供了上传能力`collective.plonefinder`），虽然我可以创建一个将敏捷内容类型标记为的行为，但`IQuickUploadCapable`我无法将快速上传小部件添加到敏捷内容类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:48:28.990

本周我遇到了[https://github.com/plone/plone.formwidget.multifile ，从未使用过它，但是当我阅读您的问题时我不得不想到它，也许值得一试...](https://github.com/plone/plone.formwidget.multifile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T01:47:08.997

我很确定[https://github.com/collective/collective.upload](https://github.com/collective/collective.upload)是针对这个用例的，尽管我不是 100% 确定有一个记录良好的例子来说明如何将它用作小部件。Héctor Velarde 在这里可能有一些答案。

# javascript - 我怎样才能给下一个功能 100 毫秒？

> ID：11225269
> 
> 赞同：1
> 
> 时间：2012-06-27T11:34:51.600
> 
> 标签：javascript, extjs

我的 js 文件中有这个函数。我需要给 doTimerA 时间。我想在 100 毫秒后启动 doTimerA。此时在此功能中两者都是同时选择的。

```
function ReLoadBuy(){
    if (myclick == "2")
    {
        ReLoadBuygo();
    }
    else
    {
        StartBuy();
        doTimerA();
    }
} 
```

有什么我必须补充的吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:36:17.280

尝试这个：

```
setTimeout( doTimerA, 100); 
```

除此之外：

```
doTimerA(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:42:54.283

`window.setTimeout (doTimerA, 100)`应该做的伎俩。尽管您可能想检查与所有浏览器的兼容性。我认为不会有问题，但请仔细检查以确保！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:36:46.267

如果您想延迟`doTimerA()`100 毫秒的执行，请使用以下调用：

```
window.setTimeout( doTimerA, 100 ); 
```

# cookies - jstree - 覆盖依赖于当前 url 的 cookie

> ID：11225275
> 
> 赞同：0
> 
> 时间：2012-06-27T11:35:32.850
> 
> 标签：cookies, navigation, href, jstree

我正在使用带有html UL的jstree，每个节点都是一个用于导航的href，它通过php包含在每个html页面上。

Jstree代码是：

```
$(function(){
$("#treeview").jstree({
    "themes" : {
        "theme" : "default",
        "dots" : false,
        "icons" : false
    },
    "ui" : {
            "selected_parent_close" : "false",
            "select_multiple_modifier" : "false",
    },
    "core": { 
                "animation": 500
            },
    "plugins" : [ "themes", "html_data", "ui", "cookies" ]

});
$("#treeview").bind("reselect.jstree", function () {
    $("#treeview").bind("select_node.jstree", function (e, data) {
        document.location = data.rslt.obj.children("a").attr("href");
    });

}); 
}); 
```

cookie 工作正常，但问题在于如何覆盖 cookie 选择节点，何时（且仅当）导航 url 是根节点之一？如果它是一个根节点，我希望它是打开的。当从外部源导航到树页面或站点中没有树的另一个页面时会发生这种情况，因此 cookie 设置不正确。

我正在使用 jquery 1.7.2，jstree 1.0。所有 li id 都与页面名称相同，即对于 href“page1”，相关的 li id 是“page1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:42:25.390

答案（或者更确切地说是“一个”答案）是 1）通过在 UI 插件中设置 "save_selected" : false 来更改 cookie 功能；2）将initial_select设置为页面的id；3) 手动设置选择的节点作为最后一步使用： $('#tree').jstree("select_node", $('body').attr('id'));

# windows-phone-7 - 如何将子窗口用户控件页面值传递到另一个页面

> ID：11225277
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:35:49.117
> 
> 标签：windows-phone-7

我为忘记密码页面设计了用户控件。然后我需要在子窗口页面中单击按钮时将一些文本框值发送到另一个页面。请帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:19:56.657

有多种方法可以做到这一点。

您实际上可以在 App.cs 中声明一个全局变量并将值分配给全局变量，然后在另一个页面中将其取回。

否则你也可以做 NavigationService.Navigate(new Uri("/YourPage.xaml?yourValue=" + yourTextBox.Text, UriKind.Relative));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:08:19.687

如上所述，当您调用新页面时，您需要在 Uri 中传递参数。此页面上有几个很好的解释和示例，还有 Stack Overflow：[在 Windows Phone 7 中将值从一种形式传递到另一种形式](https://stackoverflow.com/questions/5216049/passing-values-from-one-form-to-another-in-windows-phone-7)

# c++ - 使用 makefile 将 C++ 文件编译为 Objective-C++

> ID：11225278
> 
> 赞同：2
> 
> 时间：2012-06-27T11:35:49.510
> 
> 标签：c++, makefile, objective-c++

我正在尝试使用makefile将.cpp文件编译为objective-c++，因为我的cpp文件中很少有目标代码。我添加了 -x objective-c++ 作为编译器选项，并开始在程序错误中出现 /327 杂散（以及 / 之后具有不同数字的许多类似错误）。错误大约是 200。但是当我将文件的编码从 unicode-8 更改为 16 时，错误会减少到 23。目前 .cpp 文件中没有 Objective-C++ 代码，但计划将来添加。当我从编译器选项中删除 -x objective-c++ 时，一切正常。并生成 .out。如果有人能告诉我为什么会发生这种情况，甚至是相同的解决方案，我会很有帮助提前谢谢

我的makefile的例子

```
MACHINE= $(shell uname -s)

CFLAGS?=-w -framework CoreServices -framework ApplicationServices -framework CoreFoundation -framework CoreWLAN -framework Cocoa -framework Foundation

ifeq ($(MACHINE),Darwin)
  CCLINK?= -lpthread 
else
 CCLINK?= -lpthread -lrt 
endif   

DEBUG?= -g -rdynamic -ggdb 
CCOPT= $(CFLAGS)  $(ARCH) $(PROF)
CC =g++ -x objective-c++
AR = ar rcs
#lib name
SLIB_NAME=myapplib
EXENAME = myapp.out
OBJDIR = build

OBJLIB := $(addprefix $(OBJDIR)/... all .o files)

SS_OBJ := $(addprefix $(OBJDIR)/,myapp.o  )

vpath %.cpp path to my .cpp files

INC  = include files

subsystem:

     make all

$(OBJLIB) : |$(OBJDIR)
$(OBJDIR):
     mkdir $(OBJDIR) 

$(OBJDIR)/%.o:%.cpp 
    $(CC) -c  $(INC) $(CCOPT) $(DEBUG) $(CCLINK) $< -o $@

all:  $(OBJLIB) $(CLI_OBJ) $(SS_OBJ)
    $(AR)  lib$(SLIB_NAME).a $(OBJLIB)
    $(CC)  $(INC) $(CCOPT) $(SS_OBJ) $(DEBUG) $(CCLINK) -l$(SLIB_NAME) -L ./ -o $(OBJDIR)/$(EXENAME) 

clean:
    rm -rf $(OBJDIR)/*
dep:
    $(CC) -MM *.cpp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:12:45.093

您在带引号的字符串之外有一个杂散的 ×（乘号）。所有 C/C++ 都必须是 ASCII，字符串中的内容除外。

注意：转换为 UTF-8 的 ASCII 是 ASCII。如果 utf-16 则未引用的字符串必须是 ASCII 等效的，假设编译器支持 utf-16。此外，to 文件格式可能会产生不同的代码，产生的字符串也不同。

# java - 在 java 中存储地图的哪个内存效率最高？

> ID：11225280
> 
> 赞同：1
> 
> 时间：2012-06-27T11:36:08.400
> 
> 标签：java, memory, guava

我必须将键值对存储在 java 中，哪个内存效率更高，在文件中直接读写时哪个更省时？

1.  番石榴表 `<string,double,double>`
2.  番石榴中的地图，`<string,object>`其中对象包含两个双精度值。
3.  java中的Hashmap，`<string,object>`其中对象包含两个双精度值。

你也可以建议一些其他的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T11:38:10.693

最有效的可能是`Map<String, double[]>`您是否使用番石榴我不认为会有太大的不同。

# c# - 基于另一个组合框的选定项绑定组合框 - MVVM WPF

> ID：11225286
> 
> 赞同：2
> 
> 时间：2012-06-27T11:36:22.917
> 
> 标签：c#, wpf, mvvm

我目前有一个组合框，其中填充了艺术家姓名，一旦选择了艺术家，我需要将其绑定到另一个。在我看来，这些设置如下：

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="65,81,0,0" Name="comboBox1" ItemsSource="{Binding Artists}" SelectedItem="{Binding SelectedArtist}" VerticalAlignment="Top" Width="120" />
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="65,115,0,0" Name="comboBox2" VerticalAlignment="Top" ItemsSource="{Binding Albums}" SelectedItem="{Binding SelectedAlbums}" Width="120" /> 
```

在我的 ViewModel 中，我有以下内容：

```
private void initialiseArtists()
    {
        MusicDataClassesDataContext dataClasses = new MusicDataClassesDataContext();

        artistList = (from m in dataClasses.tblArtists select m.ArtistName).ToList();
    }

    public List<String> Artists
    {
        get
        {
            return this.artistList;
        }
    }

    public string SelectedArtist
    {
        set
        {
            this.selectedArtist = value;
            initialiseAlbums();
        }
    }

    private void initialiseAlbums()
    {
        if (selectedArtist != null)
        {
            MusicDataClassesDataContext dataClasses = new MusicDataClassesDataContext();

            var getArtist = dataClasses.tblArtists.FirstOrDefault(band => band.ArtistName == selectedArtist);
            albumList = (from album in dataClasses.tblAlbums
                         where album.ArtistID == getArtist.ArtistID
                         select album.AlbumName).ToList();

            //dataClasses.tblAlbums.SelectMany(album => album.ArtistID == getArtist.ArtistID).ToList();
        }
    }

    public List<String> Albums
    {
        set
        {
            initialiseAlbums();
        }
        get
        {
            return this.albumList;
        }
    } 
```

我假设 Selected Item 事件将填充第二个 Combo Box，但我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:50:41.510

您必须通知视图 Albums 属性已更改。这就是为什么您必须实现 INotifyPropertyChanged 接口并在构建专辑列表后调用 PropertyChanged 事件。

**例如**

```
public class Musics : INotifyPropertyChanged
{
   public event PropertyChangedEventHandler PropertyChanged;

   private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

   private void initialiseAlbums()
   {
       if (selectedArtist != null)
       {
            //Your code
            OnPropertyChanged("Albums");
       }
    }
} 
```

使用 ObservableCollection<> 而不是 List<> 是一种很好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:39:16.640

将其更改为`SelectedItem="{Binding SelectedArtist, Mode=TwoWay}"`.

**编辑：**`SelectedArtist`并向属性 添加一个吸气剂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:51:17.413

> 我假设 Selected Item 事件将填充第二个组合框，但我错了

没有 selecteditem 事件。你所拥有的是一个 SelectedItem 绑定。如果您希望您的视图对视图模型中的操作做出反应，您必须提高 INotifyPropertyChanged。

所以在你的 initialiseAlbums(); 你必须调用 OnPropertyChanged("Albums"); 至少。

ps：你也可以创建parentchildrelationobjects，让这些东西更容易。

```
public class MyArtist
{
   public string Name{get;set;}
   public IList<Album> Albums {get;set}
} 
```

# macos - Dylib 在链接时可以，但在运行时不行

> ID：11225287
> 
> 赞同：0
> 
> 时间：2012-06-27T11:36:35.873
> 
> 标签：macos, dylib

我在正确链接我的项目时遇到问题。该项目是用 CMAKE 构建的。链接似乎很好，但在运行时会引发错误。

这是用于链接的命令：

```
$ /usr/bin/clang -Wl,-search_paths_first -Wl,-headerpad_max_install_names  \
      CMakeFiles/project.dir/src/conf.c.o CMakeFiles/project.dir/src/tun-compat.c.o \
      CMakeFiles/project.dir/src/compress.c.o CMakeFiles/project.dir/src/mc.c.o \
      CMakeFiles/project.dir/src/hexdump.c.o CMakeFiles/project.dir/src/server.c.o \
      CMakeFiles/project.dir/sys/unix/log.c.o CMakeFiles/project.dir/sys/unix/imsg.c.o \
      CMakeFiles/project.dir/ sys/unix/imsg-buffer.c.o CMakeFiles/project.dir/sys/unix/toto.c.o \
      CMakeFiles/project.dir/sys/unix/toto.c.o CMakeFiles/project.dir/sys/unix/util.c.o \
      CMakeFiles/project.dir/sys/unix/conf.c.o CMakeFiles/project.dir/sys/unix/tntsocket.c.o \
      -o bin/project/opt/local/lib/libevent_openssl.dylib /opt/local/lib/libevent_core.dylib \
      /usr/lib/libz.dylib /opt/local/lib/libyajl.dylib /opt/local/lib/libtapcfg.dylib 
```

我得到的错误：

```
$ ./bin/project                                                                                                                                                                                             
dyld: Library not loaded: build/libtapcfg.dylib                                                                                                                                                             
  Referenced from: /Users/Antoine/project/./bin/project                                                                                                                                                     
  Reason: image not found                                                                                                                                                                                   
zsh: trace trap  ./bin/project 
```

附加信息：

```
 $ dyldinfo -dylibs bin/projectattributes                                                                                                                                                            
         dependent dylibs                                                                                                                                                                                        
                        /opt/local/lib/libevent_openssl-2.0.5.dylib                                                                                                                                         
                        /opt/local/lib/libevent_core-2.0.5.dylib                                                                                                                                                                    
                        /usr/lib/libz.1.dylib                                                                                                                                                               
                        /opt/local/lib/libyajl.2.dylib                                                                                                                                                      
                        build/libtapcfg.dylib                                                                                                                                                               
                        /usr/lib/libSystem.B.dylib 
```

在我看来，这就像黑魔法。链接器能够找到符号，但最终会更改库的路径，即使我看不到在链接命令中处理它的方式有任何区别......

库位置是 /opt/local/lib/libtapcfg.dylib

```
$ ls -lhF /opt/local/lib/libtapcfg.dylib                                                                                                                                                                    
-rwxr-xr-x  1 root  admin    20K 14 jui 18:05 /opt/local/lib/libtapcfg.dylib* 
```

问题可能来自我链接到的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:19:49.420

问题在于您如何构建和安装 libtapcfg。

您似乎已将其从本地目录复制到 /opt/local/lib，因此其文件系统路径与库中存储的内容不匹配。

要么将 lib 留在本地路径中，要么在构建它时告诉链接器它将在哪里结束，或者复制到 /usr/local/lib 中，这是在链接器中硬编码的。请参阅[Apple 开发人员关于动态库的说明](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/UsingDynamicLibraries.html#//apple_ref/doc/uid/TP40002182-SW10)

当通过端口使用 macports 时，您应该只将东西放在 /opt/local 中。在这种情况下，创建一个不需要做太多事情的本地端口文件，macports 标准工作会将正确的信息放入库中以使其从 /opt/local/lib 工作

# git - “git reset”与“git rebase”有什么区别？

> ID：11225293
> 
> 赞同：72
> 
> 时间：2012-06-27T11:37:01.550
> 
> 标签：git

我一直在玩 git（仍然很菜鸟），我想知道“reset”和“rebase”之间的区别。一个比另一个更强大吗？

假设我想从历史记录中删除 3 个粗体提交，哪个更好用，或者我应该标记它然后用 删除它`git tag -d <tagname>`？

> 17a64df 2012-06-21 | 你好使用 style.css (HEAD, origin/style, master),
> a6792e4 2012-06-21 | 添加 css 样式表
> 801e13e 2012-06-21 | 添加自述
> 文件 5854339 2012-06-21 | 添加 index.html
> 0b1dd4c 2012-06-21 | 将 hello.html 移至 lib
> 55649c3 2012-06-21 | 添加作者/电子邮件评论
> 9b2f3ce 2012-06-21 | 添加了作者评论
> cdb39b0 2012-06-21 | 提交带有文本的 p 标签 (v1.1)
> **b7b5fce 2012-06-21 | 这将恢复提交 a6faf60631b5fbc6ee79b52a1bdac4c971b69ef8。**
> **a6faf60 2012-06-21 | 还原“糟糕，我们不想要这个提交”**
> **a006669 2012-06-21 | 糟糕，我们不想要这个提交**
> 262d1f7 2012-06-21 | 添加了 HTML 标头 (v1)
> b1846e5 2012-06-21 | 添加了标准 HTML 页面标签 (v1-beta)
> bf1131e 2012-06-21 | 添加 HI TAG
> 02b86d0 2012-06-21 | 第一次提交

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-27T11:45:12.443

它们完全不同。[`git-reset`](http://git-scm.com/docs/git-reset)在您的工作目录和索引上与 refs 一起使用，而无需触及任何提交对象（或其他对象）。[`git-rebase`](http://git-scm.com/docs/git-rebase)另一方面用于重写以前提交的对象。

所以如果你想改写历史，`git-rebase`就是你想要的。请注意，您**永远不**应该重写已推送并可供其他人使用的历史记录，因为 rebase 会重写对象，使它们与旧对象不兼容，从而导致其他相关人员陷入混乱。

话虽如此，您想要做的是[交互式变基](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)。使用它调用它`git rebase -i 262d1f7`，你应该会得到一个如下所示的提示：

```
pick 262d1f7 Added HTML header (v1)
pick a006669 Oops, we didn't want this commit
pick a6faf60 Revert "Oops, we didn't want this commit"
pick b7b5fce This reverts commit a6faf60631b5fbc6ee79b52a1bdac4c971b69ef8.
pick cdb39b0 Commit p tags with text (v1.1)
pick 9b2f3ce Added an author comment
pick 55649c3 Add an author/email comment
pick 0b1dd4c Moved hello.html to lib
pick 5854339 Added index.html
pick 801e13e Added README
pick a6792e4 Added css stylesheet
pick 17a64df Hello uses style.css (HEAD, origin/style, master), 
```

在那里，只需删除您要删除的提交的行，保存并退出编辑器，Git 就会重写您的历史记录。同样，如果您已经推送了更改，**请不要这样做。**一般来说，在历史记录中有这样的提交是非常好的。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-08-27T17:03:05.307

我希望这个外行的解释是正确的。

git reset 和 git rebase 都会影响你的本地分支。他们将强制您的本地分支与某个提交同步。不同之处在于：

1.  "git reset --hard {commit-id}" 将使用本地历史中的提交。
2.  “git rebase origin/{branch-name}” 将使用 repo 中的最新提交

**附加信息**

*何时使用重置？*

假设您完成工作并在本地提交。然后你的猫走过键盘，不知何故你不小心提交了你的猫的工作。使用复位。

*什么时候使用变基？*

假设您重构了函数/类的名称，并且此更改会影响许多文件。当您提交并尝试推送到原点时，您意识到您的同事已经进行了一些重要的更改并且已经将其推送到了原点。假设您认为再次重构名称（使用 IDE）比浏览所有冲突文件更容易，您可以选择 rebase，这将删除您的工作并保持您同事的工作不变。

*为什么每个答案/教程都包含如此多的技术免责声明？*

因为 reset 和 rebase 都可以永久删除本地更改。所以用户需要知道如何使用策略（例如创建一个备份分支）来保持他们的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T13:53:45.793

虽然“git reset”绝对不是用于从历史记录中*仅删除 3 次提交*的工具，但我发现它至少在一种情况下非常有用，这似乎没有足够的文档记录并且仍然与所提出的问题相关：

假设您有一个“环境-X”分支，用于部署到特定环境，除了一些明确定义的更改外，它应该（大多数）反映“主”分支。如果该分支的历史记录由于不正确的 git 使用或其他原因而出现乱码，那么将其重新设置在 master 之上并将其*所有*非 master 提交压缩为一个可能是一个不错的选择。

在这种情况下，交互式 rebase 可能会很困难，并且会导致很多冲突，需要一个一个地手动修复。

A simpler operation is to

1.  find the common ancestor commit: `git merge-base master environment-X`
2.  reset to it: `git reset $commit` (this will leave the files on disk unchanged)
3.  add and commit the modified files - as a bonus this gives you the chance of verifying that there are no unexpected changes
4.  force push

# ios - 为什么不推荐使用 MonoTouch 进 行 iPhone 开发？

> ID：11225294
> 
> 赞同：12
> 
> 时间：2012-06-27T11:37:03.563
> 
> 标签：ios, xamarin.ios

我们想为 iOS 和 Android 智能手机开发一个应用程序。我们主要使用 Microsoft 技术来开发我们的应用程序。我们认为，如果我们在 Android 上使用 MonoTouch 和 Mono，我们只需要维护一个代码库，每个设备只有一个不同的 UI 层。

因为目前我们的小团队中没有人开发过智能手机应用程序，我们很快就需要它，我们想外包它。我们询问了其他公司是否更喜欢 MonoTouch 或 Objective C 进行 iPhone 开发。他们中的大多数人说，他们会选择Objective C。他们说Objective C提供了更多的功能和可能性，它更快，对于MonoTouch，Apple将来有可能不再支持它。所有这些都是真的还是有其他理由更喜欢Objective C？我知道周围还有其他类似的话题，但他们没有回答我的问题，尤其是关于 Apple 对 MonoTouch 的支持的问题。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-27T15:11:24.713

> 应用程序。我们认为，如果我们在 Android 上使用 MonoTouch 和 Mono，我们只需要维护一个代码库，每个设备只有一个不同的 UI 层。

如果您正确构建应用程序，这是一种可能性。如果没有：没有。

*如果您使用 Java+ ObjC* +C#（用于 WP7/Win8 Metro 等），那么这根本不是一个选项

 *> 因为目前我们的小团队中没有人开发过智能手机应用程序，我们很快就需要它，我们想外包它。我们询问了其他公司是否更喜欢 MonoTouch 或 Objective C 进行 iPhone 开发。他们中的大多数人说，他们会选择Objective C。

如果您将其外包，您当然应该指定您想要写的内容吗？如果您需要在内部支持它，并且您只有 C# 技能，那么 MonoTouch 等对您（支付账单的人）更有意义！

> 他们说Objective C提供了更多的功能和可能性，

FUD，也不对。Monotouch 提供完整的 API。如果它不存在，作为 Xamarin 绑定它（他们以前经常这样做）

> 它更快

我很想看到基准。是的，从技术上讲，它在某些情况下*可能*更快，但在一般使用中，MonoTouch 相同或更快。

程序员错误是 iOS 应用程序性能问题的更常见原因。例如，不让事情脱离 UI 线程（这在 MonoTouch 中比在 ObjC 中更容易做到，这些块有很大帮助），或者花费太长时间才能退出 FinishedLaunching（如果你愿意，可以使用“main”方法）真的不是……）

垃圾收集和诸如 linq、xml/json 解析、泛型和集合之类的东西也非常有价值，而且速度非常快。

> 而对于 MonoTouch，Apple 将来可能不再支持它。

是的，有机会。蒂姆库克也有可能用苹果的数十亿美元跑掉并购买整个夏威夷（而不是拉里埃里森的“我将拥有这个岛”购买）。但现在机会相当渺茫。

> 所有这些都是真的还是有其他理由更喜欢Objective C？我知道周围还有其他类似的话题，但他们没有回答我的问题，尤其是关于 Apple 对 MonoTouch 的支持的问题。

Apple 不支持 MonoTouch。Xamarin 做到了，而且他们做得非常好。除了他们的产品 XCode，Apple 不支持任何东西。

Apple 确实*允许*MonoTouch 应用程序（有很多）。另一种看待它的方式：通常，前 100 名游戏中有 95% 是使用 Unity3D 编写的，它基于相同的技术（C# 代码的提前编译和嵌入 Mono/.NET 框架的缩减版本）。

有理由更喜欢 ObjC，这将是：

*   你已经知道 ObjC 和 CocoaTouch 并且喜欢它。
*   你的团队已经知道 ObjC 和 CocoaTouch，或者你可以轻松雇佣懂的人（注意：目前，据我所知，iOS 开发人员的招聘成本非常高，如果你能找到他们的话）
*   您需要在测试版发布之日使用它们。请记住，您可以使用当前的 MonoTouch 并将其部署到您的 iOS[已编辑] 设备上并安装测试版。你只是不能使用 iOS6 YET 中的新东西（Xamarin 说“大约 2 周”，现在应该是……）。另外请记住，您不能将应用程序部署到使用 beta SDK 构建的商店，即使您不使用其中的任何东西。您甚至不能在产品描述中提及 iOS[已编辑]（我已经尝试过）
*   你喜欢 [squareBrackets andTheOccasional:@"strange syntax things"];

现在，构建一个跨平台、共享代码的应用程序会是一件容易的事吗？一定不行。对于一个非平凡的应用程序来说，这是一个非常复杂的开发。但这就是软件开发的乐趣所在：如果它很容易，那就太无聊了！抓住 Greg Shackles 的书 ( [http://www.amazon.com/dp/1449320236](https://rads.stackoverflow.com/amzn/click/com/1449320236) ) 了解 iOS+WinPhone+Android 风格开发需要什么。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-27T12:13:08.680

我的预感是，与您交谈的公司只是习惯于使用 Objective-C。这就是他们的技能所在，这也是他们不愿偏离自己道路的最大原因。其他原因可以两种方式争论。

确实没有人能预测苹果会做什么，但苹果会像 2010 年夏天那样禁止第三方工具包和 API 的可能性很小。那只是很短的一段时间，他们完全逆转*了*那个决定。他们目前的重点是使应用程序开发更容易，这意味着该领域对替代开发方法保持开放。我认为 MonoTouch 是安全的。

至于速度，C# 通常会产生非常快的可执行文件。它们可能*不如*Objective-C 快，但我怀疑你会注意到差异。我记得在某处看到一个网站显示 C# 在某些测试中优于 C/C++，但那是在 .NET 环境中，而不是 Mono ......不幸的是，我再也找不到参考了。我会继续寻找。但速度的底线是 C# 速度非常好。这不像 BASIC vs C。更像是 Java/JIT vs C。

与 Objective-C 相比，C# 为您提供了很多*很多（！）*的优势，并且它们已在其他 Stack Overflow 答案中进行了列举，因此我不会在这里重复它们。你可以很容易地找到它们。

我显然是 MonoTouch 的粉丝，但我必须说一件事：我认为公司认为因为他们精通 C#/.NET 就可以轻松开发和/或维护 iOS 是错误的使用 MonoTouch 的应用程序。这不是真的，因为 MonoTouch 基本上是 CocoaTouch API 之上的 C# 层，这意味着您必须学习 Apple 的做事方式。你有应用程序委托和视图控制器以及所有 UIKit 的东西。那里有一个真正的学习曲线。但是，如果您精通 C#，MonoTouch 将是一个巨大的帮助。

**更新：**
我找到了关于 C# 速度的文章：[头对头基准测试：C++ vs .NET](http://www.codeproject.com/Articles/212856/Head-to-head-benchmark-Csharp-vs-NET)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T12:02:23.843

实际上，我已经为我开发过的每一个应用程序都使用了 MonoTouch。性能从来都不是问题，我无法想象使用 Objective-C 对我来说会有多糟糕。我在美国应用商店中拥有 2 个排名前 10 的应用：“Draw A Stickman”和“Draw A Stickman: Episode 2”（别担心，我们正在开发更多）。

如果您了解 C# 和 .Net，那么与尝试学习 Objective-C 相比，您在生产力方面的收获将是巨大的。在进行 iOS 开发之前，我是一名 C# .Net 开发人员（仅限 Windows），向 MonoTouch 的过渡非常棒。

如果您喜欢 Linq、不到 100 行解析 XML、垃圾收集、泛型、简单的多线程以及没有奇怪的方括号，那么 MonoTouch 适合您。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-12T08:48:34.577

我同时使用 Objective-C 和 c# (MonoTouch & Droid)，我都非常喜欢。当我在 c# 中编码时，有很多我喜欢在 Obj-C 中使用的功能，例如 Linq，而当我在 Obj-C 中编码时，我希望在 c# 中拥有很多东西，但我很快就适应了我正在编码的任何东西。关于性能，我根本没有发现任何差异，即使是相当图形密集的东西，所以我不会用它作为不使用 c# 的理由。

我认为这最终取决于你对编码的习惯，当然，如果你有一个设计良好的跨平台项目，如果你使用 Mono，你可以拥有完全跨平台的核心代码，你只需要做 UI以特定于平台的方式的东西——当涉及到这一点时，显然你需要了解本机的东西才能让你的 UI 以适合平台和用户熟悉的方式工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-30T21:20:15.577

我们有一个使用 MS SQL 作为数据存储的业务线应用程序，并且有 WinForms 和 Web UI。它与我们的 windows mobile 6.5 和带有网络服务的平板电脑应用程序集成。所有c#。

在对 Objective-C 和 HTML-5 进行了一些实验之后，我们完全致力于 MonoTouch（我们有工作原型）：我们可以重用我们的业务逻辑，并且我们很乐意用 c# 开发新代码。

我们的业务逻辑不断得到增强，这些增强对移动应用程序立即可见——无需在 Objective-C 或 C++ 中复制逻辑。

我们的主要问题是找到熟悉 iPhone 和 iPad UI 的 ac# 程序员。

MonoTouch 是稳定的，我们没有遇到任何限制（我们绑定到与 Objective-C 绑定的同一个 iOS API）。在我们的学习过程中，我们遇到了问题、遇到了错误并产生了一些误解 - 但 Xamarin 的支持非常出色。

性能一直不是问题——我们的应用程序很活泼，尽管它在幕后做了很多事情。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-27T11:39:56.117

没有人可以肯定地告诉你苹果会支持什么，将来不会支持什么，但是苹果过去在单声道方面存在一些问题，而且由于历史往往会重演，那么这种情况可能会发生再次

话虽如此，始终配合原生应用开发SDKS和环境，会更加灵活，并且会实时更新，性能总是在原生更好*

# android - 如何在android中设置webview的文本颜色

> ID：11225296
> 
> 赞同：5
> 
> 时间：2012-06-27T11:37:06.410
> 
> 标签：android, webview

我正在尝试使用此代码更改 webview 的文本颜色

```
String message ="<font color='white'>"+"<u>"+
"text in white"+ "<br>" +
"<font color='cyan'>"+"<font size='2'>"+
" text in blue color "+"</font>";
webview.loadData(message, "text/html", "utf8"); 
```

但我有一些 html 页面。存储在我的 SD 卡中，然后我该如何更改文本颜色..

我用

```
webViewRead.loadUrl(url); 
```

url 是我的文件的路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T11:43:02.733

您必须像这样提供该文件的路径。

```
String extStorageDirectory = Environment.getExternalStorageDirectory()
                .toString() + "/folder_name";

File directory = new File(extStorageDirectory);
File fileInDirectory = new File(directory,file_name.html);

//Read text from file
StringBuilder html_text = new StringBuilder();

try {
    BufferedReader br = new BufferedReader(new FileReader(fileInDirectory));
    String line;

    while ((line = br.readLine()) != null) {
        html_text.append(line);
        html_text.append('\n');
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
} 
```

然后使用此 html 代码进行编辑

```
String message ="<font color='white'>"+"<u>"+"text in white"+ "<br>" +"<font color='cyan'>"+"<font size='2'>"+" text in blue color "+"</font>"; 
 webview.loadData(message, "text/html", "utf8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-24T08:04:00.173

```
htmlDetail = dbValues.getContent(3);
        tvDescription3.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

        String finalHtml = "<html><head>"
                  + "<style type=\"text/css\">li{color: #00f} span {color: #000}"
                  + "</style></head>"
                  + "<body>"                          
                  + htmlDetail
                  + "</body></html>";

    tvDescription3.loadData(finalHtml, "text/html; charset=UTF-8", null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:59:37.910

把你的文件路径作为

```
String htmlPath = "file:///mnt/sdcard/test/11.html"; 
String baseUrl = "file:///mnt/sdcard/test/"; 
webView.loadDataWithBaseURL(baseUrl, message, "text/html", "utf-8", null); 
webView.loadUrl(htmlPath); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-09T17:09:51.557

为了改变 WebView 的背景颜色，有一个标准的方法：

```
mWebView.setBackgroundColor(Color.Black); 
```

为了更改 WebView 的文本字体颜色，没有标准方法：要么通过 html 代码更改字体，要么执行以下操作：

```
htmlData="<font color='black'>" + htmlData + "</font>";
mWebView.loadDataWithBaseURL(null, htmlData, "text/html", "UTF-8", null); 
```

# android - 条码读取器 Zxing

> ID：11225298
> 
> 赞同：0
> 
> 时间：2012-06-27T11:37:23.320
> 
> 标签：android

我想扫描按钮单击上的二维码，问题是当我在设备上运行代码时，活动结果意图变量总是返回 0。

我如何知道条形码阅读器是否工作？我目前在设备的屏幕上看到黄点。

这是我的代码：

```
private OnClickListener scanner = new OnClickListener() {
    public void onClick(View v) {
        IntentIntegrator.initiateScan(BarCodeScannerActivity.this);
    }
}; 

protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
     IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
     if (scanResult != null) {
           // handle scan result
           String s = "http://www.google.com/search?q=";
           s += scanResult.getContents();

           Intent myIntent1 = new Intent(Intent.ACTION_VIEW, Uri.parse(s));
           startActivity(myIntent1);
     } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:08:48.787

你的代码有错误

你应该有

```
@Override
  public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult result = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
    if (result != null) {
      String contents = result.getContents();
      if (contents != null) {
        showDialog(R.string.result_succeeded, result.toString());
      } else {
        showDialog(R.string.result_failed, getString(R.string.result_failed_why));
      }
    }
  } 
```

您没有覆盖`onActivityResult`类似`onCreate`或`onStart`

而是像普通方法一样编写 onActivityResult ，这是最常见的错误。

另外，如果您可以提及`integrator.initiateScan(IntentIntegrator.QR_CODE_TYPES);`，或者`integrator.initiateScan(IntentIntegrator.PRODUCT_CODE_TYPES);`它会很棒。

# jquery - 为 JQuery toggleClass 显示 div

> ID：11225301
> 
> 赞同：0
> 
> 时间：2012-06-27T11:37:34.097
> 
> 标签：jquery

我正在尝试一些非常简单的事情。在页面加载时，内容 div 中的数据被显示，菜单（ul 元素）被隐藏。单击通过 css 创建的菜单按钮后，菜单加载并且内容 div 被隐藏。当我再次单击菜单按钮时，它使用 toggleClass() 隐藏菜单。此时它的意思是在内容 div 中显示数据，但这并没有按预期工作。

希望你能告诉我我做错了什么。

安卓.js：

```
// JavaScript Document
if (window.innerWidth && window.innerWidth <= 480){
    //when the document is ready run this code. wait for the page to load completely. otherwise javascript will run and because the uls don't exist
    //yet it will fail. because the js has failed the uls will load (not good)
    $(document).ready(function() {

        $('#header ul').addClass('hide');   //hide ul elements which is the menu on page load (see android.css #header ul.hide..)
        $('#header').append('<div class="leftButton" onclick="toggleMenu()">Menu</div>');

    });

    //currently the menu (ul) elements are hidden as set on page load
    //toggleClass() works by checking what class its set to. if its already set to that class it changes it to the other.   
    function toggleMenu(){

        if($('#header ul').toggleClass('hide')){//adding hide class to the object
            $('#content').show();

        }

        if ($('#header .leftButton').toggleClass('pressed')){
            $('#content').hide();   

        }

    }

} 
```

CSS 文件：

```
#header ul.hide{

    display:none;
}

#header div.leftButton{
    position:absolute;
    top:8.5px;
    left:6px;
    height:30px; /*set hight to 30px so its big enought to tap*/
    font-weight:bold;
    text-align:center;
    color:white;
    text-shadow:rgba(0,0,0,0.6) 0px -1px 1px;
    line-height:28px; /*centers it within the div so its not up against the top border*/
    /*placing the button*/
    border-width:0 8px 0 8px;
    -webkit-border-image:url(images/button.png) 0 8 0 8;

}

#header div.pressed{
    position:absolute;
    top:8.5px;
    left:6px;
    height:30px; /*set hight to 30px so its big enought to tap*/
    font-weight:bold;
    text-align:center;
    color:white;
    text-shadow:rgba(0,0,0,0.6) 0px -1px 1px;
    line-height:28px; /*centers it within the div so its not up against the top border*/
    /*placing the button*/
    border-width:0 8px 0 8px;
    -webkit-border-image:url(images/button_clicked.png) 0 8 0 8;
}

#content.hide{
    display:none;

} 
```

希望以上内容足以确定它为什么不起作用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:53:49.803

好吧，我不确定你是否对`display:none`元素使用 css，但我会说你调用了两次隐藏/显示。

```
// JavaScript Document
if (window.innerWidth && window.innerWidth <= 480){
//when the document is ready run this code. wait for the page to load completely. otherwise javascript will run and because the uls don't exist
//yet it will fail. because the js has failed the uls will load (not good)
$(document).ready(function() {

    $('#header ul').addClass('hide');   //hide ul elements which is the menu on page load (see android.css #header ul.hide..)
    $('#header').append('<div class="leftButton" onclick="toggleMenu()">Menu</div>');

    //currently the menu (ul) elements are hidden as set on page load
    //toggleClass() works by checking what class its set to. if its already set to that class it changes it to the other.   
    function toggleMenu(){
       $('#header ul').toggleClass('hide')   
    }        

});

} 
```

使用 jquery 的另一种方法`toggle()`：

```
if (window.innerWidth && window.innerWidth <= 480){
$(document).ready(function() {
    $('#header ul').css('display:none');
    $('#header').append('<div class="leftButton" onclick="toggleMenu()">Menu</div>');
    function toggleMenu(){
       $('#header ul').toggle()   
    }        

});

} 
```

**更新**

好吧，我冒昧地修改了一点你的 html 结构，消除了 div 上的 onclick 并使用纯 jquery。这是javascript：

```
 $(function(){

     $('#header ul').addClass('hide');   //hide ul elements which is the menu on page load (see android.css #header ul.hide..)
     $('#header').append('<div class="leftButton">Menu</div>');

     $('#header').delegate('.leftButton','click',function (){
        $('#header ul').toggleClass('hide')   
     })        
 }); 
```

这是一个工作的[jsfiddle](http://jsfiddle.net/JqMYK/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:30:39.570

我想我设法通过执行以下操作来解决它：

```
function toggleMenu(){

        //$('#header ul').toggleClass('hide');//adding hide class to the object

        //$('#header .leftButton').toggleClass('pressed');
        $('#header ul').toggleClass('hide');
        $('.leftButton').toggleClass('pressed');

        if ($('#content').is(':visible')){
                $('#content').hide();

            }
        else{
            $('#content').show();

        }

    } 
```

# jquery - 下面的代码在其他浏览器中运行良好，但在 IE 中运行良好。请帮助我解决这个问题

> ID：11225310
> 
> 赞同：-3
> 
> 时间：2012-06-27T11:38:03.843
> 
> 标签：jquery, internet-explorer

```
$(document).ready(function() {
    $("div.panel_button").click(function() {
        $("div#panel").animate({
            height: "223px",
        }, "fast");

        $("div.panel_button").toggle();
    });

    $("div#hide_button").click(function() {
        $("div#panel").animate({
            height: "0px",
        }, "slow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:44:15.137

您的对象文字中有尾随逗号。改变：

```
{height: "223px",}
// and
{height: "0px",} 
```

至：

```
{height: "223px"}
// and
{height: "0px"} 
```

（当然，属性*之间*的逗号一直是必需的，但是尽管其他浏览器已经接受了尾随逗号一段时间，而且 IE9 很酷，但旧的 IE 不喜欢它。）

# c++ - C ++ WINAPI设置窗口背景图像不起作用

> ID：11225311
> 
> 赞同：1
> 
> 时间：2012-06-27T11:38:04.527
> 
> 标签：c++, winapi, background, window

我讨厌我以前做过，我觉得我错过了一些东西，我不知道它是什么。所以，我正在尝试在 C++ WinAPI 中设置窗口的背景图像。

我的资源.rc

```
#include "Resources.h"

BACKGROUND BITMAP "background.bmp" 
```

我的资源.h

```
#define BACKGROUND 200 
```

我的 Main.cpp

```
....
WNDCLASSEX wcls;
wcls.cbSize         = sizeof(WNDCLASSEX);
wcls.style          = CS_PARENTDC|CS_HREDRAW|CS_VREDRAW|CS_DBLCLKS;
wcls.lpfnWndProc    = WndProc;
wcls.cbClsExtra     = 0;
wcls.cbWndExtra     = 0;
wcls.hInstance      = hInstance;
wcls.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(HICON));
wcls.hCursor        = LoadCursor(NULL, IDC_ARROW);
wcls.hbrBackground  = HBRUSH(COLOR_WINDOW + 1);
wcls.lpszClassName  = L"WndClass";
wcls.hIconSm        = LoadIcon(hInstance, MAKEINTRESOURCE(HICON));

HWND Window = CreateWindowEx (
                             WS_EX_LAYERED|WS_EX_TOOLWINDOW,
                             wcls.lpszClassName,
                             L"Window Title",
                             WS_VISIBLE|WS_POPUP|WS_CLIPCHILDREN,
                             CW_USEDEFAULT,
                             CW_USEDEFAULT,
                             384,
                             128,
                             NULL,
                             NULL,
                             hInstance,
                             NULL
                             );

if (!Window ) return 0;

SetLayeredWindowAttributes(
                           Window,
                           RGB(35, 35, 35),
                           85,
                           LWA_ALPHA|LWA_COLORKEY
                           );

SetWindowPos(
             Window,
             HWND_TOPMOST,
             0,
             0,
             0,
             0,
             SWP_NOMOVE|SWP_NOREDRAW|SWP_NOSIZE
             );

ShowWindow(Window, SW_SHOWNORMAL);
UpdateWindow(Window);

LRESULT CALLBACK WndProc(HWND hWnd, UINT Msg, WPARAM Wpar, LPARAM Lpar) {
HBITMAP Background = NULL;
BITMAP BgImg;
HDC DeviceContext, BgContext;
PAINTSTRUCT PaintStruct;

switch (Msg) {
    case WM_PAINT:  
         ContextLansator = BeginPaint(hWnd, &PaintStruct);
         Fundal = LoadBitmap(hInstance, MAKEINTRESOURCE(BACKGROUND)); 
         FundalLansator = CreateCompatibleDC(DeviceContext);
         SelectObject(DeviceContext, Background);
         GetObject(Background, sizeof(BgImg), &BgImg);
         BitBlt(DeviceContext, 0, 0, 384, 128, BgContext, 0, 0, SRCAND);
         DeleteObject(Background);
         DeleteDC(BgContext);
         EndPaint(hWnd, &PaintStruct);
    break;
..... 
```

我正在使用代码::块。资源已正确嵌入，窗口启动但只是一个白色背景，图像未绘制。WM_PAINT 消息在开始时被调用一次。我觉得 BgImg 出了点问题，但我不知道是什么。需要一些帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:55:28.790

在注册类之前创建一个 PatternBrush 并将其设置为背景。例如：

```
ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_WINAPIBACKGROUND));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = CreatePatternBrush(LoadBitmap( hInstance, MAKEINTRESOURCE( IDB_BITMAP1 ) ) );
    wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_WINAPIBACKGROUND);
    wcex.lpszClassName  = szWindowClass;
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
} 
```

它看起来像这样： ![在此处输入图像描述](../Images/027e981b52511027911c87f59ad7d77f.png)

位图深度无关紧要。但是看看你的实现中的样式。

![在此处输入图像描述](../Images/0c8425e5e7258838b133354937c8bf71.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-16T11:40:11.170

在处理我认为类似的症状 20 小时后，我找到了解决方案。

我的问题是`bitmap`没有加载。我验证了该文件是真实的`bitmap`并且代码正确。我更正并重新编译但`Code::Blocks`不会加载它（`return = 0`）。尝试删除两个文件夹`BIN`和`OBJ`两个文件`xxx.depend`和`xxx.layout`. 然后重新编译运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T22:59:18.590

我使用这段代码，它对我来说很好。我也使用代码块 4.7。

```
case WM_PAINT:
{
    PAINTSTRUCT     ps;
    HDC             hdc;
    BITMAP          bitmap;
    HDC             hdcMem;
    HGDIOBJ         oldBitmap;
    hBitmap01 = (HBITMAP)LoadImage(NULL, "c:\\energy.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

    hdc = BeginPaint(wnd01, &ps);

    hdcMem = CreateCompatibleDC(hdc);
    oldBitmap = SelectObject(hdcMem, hBitmap01);

    GetObject(hBitmap01, sizeof(bitmap), &bitmap);
    BitBlt(hdc, 0, 0, bitmap.bmWidth, bitmap.bmHeight, hdcMem, 0, 0, SRCCOPY);

    SelectObject(hdcMem, oldBitmap);
    DeleteDC(hdcMem);

    EndPaint(wnd01, &ps);
    } 
```

# c# - 奇怪但真实 - 手动工作正常，但在 QTP 等自动化工具中失败

> ID：11225316
> 
> 赞同：0
> 
> 时间：2012-06-27T11:38:20.480
> 
> 标签：c#, qtp

如果我手动单击按钮，我有 Windows 文件导入方法和应用程序工作正常，但如果我使用 QTP（快速测试专业）等工具运行我的应用程序，相同的代码将失败

我用粗体突出了失败的行。 **[ remoteStream.Write(buffer, 0, bytesRead);]**

```
 using (FileStream localStream = File.OpenRead(filePath))
            {

                RemoteFile remoteFile = this.serverComponent.GetUploadFileHandle(filePath);
                if (remoteFile == null)
                {
                    stopWatch.Stop();

                }

                using (RemoteFileStream remoteStream = new RemoteFileStream(remoteFile))
                {

                    long localFileSize = localStream.Length;
                    long readSoFar = 0;
                    int bytesRead = 0;
                    byte[] buffer = new byte[bufferSize];
                    while ((bytesRead = localStream.Read(buffer, 0, bufferSize)) > 0)
                    {

                        remoteStream.Write(buffer, 0, bytesRead);
                        readSoFar += bytesRead;

                        progressListener.UpdateFileProgress(firmwareID, readSoFar, localFileSize);
                    } 
                }

                uploadSuccess = this.server.UploadFileDone(remoteFile);
            }
            stopWatch.Stop();                
            progressListener.UpdateFileStatus(firmwareID, uploadSuccess ? FirmwareImportStatus.ImportSuccessful : FirmwareImportStatus.ImportFailed);
        } 
```

**触发导入的 QTP 代码。** SwfWindow("Swfname:=ImportFWImagesWF").SwfButton("Swfname:=btnNext","text:=Import").Click

我正在覆盖**Stream** c# 类。我最终遇到了套接字异常 **“System.Net.Sockets.SocketException：现有连接被远程主机强行关闭”**

我正在覆盖 Stream c# 类。我的班级名称是**RemoteFileStream**

**服务器代码**

```
 public override void Write(byte[] buffer, int offset, int count)
    {
        #region Check Args
        if (buffer == null)
        {
            throw (new ArgumentNullException("The buffer is null"));
        }
        if (offset < 0 || count < 0)
        {
            throw (new ArgumentOutOfRangeException("The offset or count is negative."));
        }
        if (offset + count > buffer.Length)
        {
            throw (new ArgumentException("The sum of offset and count is larger than the buffer length."));
        }
        #endregion

        _rf.Write(buffer, offset, count);//Exception comes from here
    } 
```

注意：只有当我从 QTP 工具访问我的应用程序时才会出现异常。如果我手动运行我的应用程序，则没有问题。是因为权限问题吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:01:42.240

当 QTP 运行步骤时，它可以选择在应用程序中使用模拟事件（在 .NET 的情况下触发 .NET 事件）或模拟设备操作。判断 QTP 将哪个选项用于单击步骤的方法可以是查看在该步骤发生时鼠标光标是否移动到按钮上。

如果 QTP 使用事件运行，则可能是它没有运行应用程序期望的确切事件，因此给出的结果与手动测试期间不同。在这种情况下，您可以尝试使用该`DeviceReplay`对象（如此[处所述](http://hpquicktestprofessional.wordpress.com/2010/03/29/how-to-use-device-replay-method/)）。

# tsql - 如何在从 select 语句生成的存储过程中“运行”命令？

> ID：11225317
> 
> 赞同：0
> 
> 时间：2012-06-27T11:38:21.970
> 
> 标签：tsql, stored-procedures, foreign-keys, truncate

我正在使用此脚本[https://stackoverflow.com/a/9452317/449156](https://stackoverflow.com/a/9452317/449156)来生成语句以删除并重新创建所有外键约束，以便截断特定的数据库表。

这非常有效，但是我想知道如何将其合并到存储过程中。目前所发生的只是它生成命令但不“调用或运行”它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:49:39.733

你必须执行语句

如果语句存储在 var 中`@ddlStatement`

```
Exec sp_executesql @ddlStatement 
```

# git - git svn init 可以处理应该作为基本结帐一部分的主干/分支/标签的同级目录吗

> ID：11225320
> 
> 赞同：3
> 
> 时间：2012-06-27T11:38:30.297
> 
> 标签：git, import, git-svn, svn-trunk

macports svn 存储库如下所示：

```
 branches/
  contrib/
  distfiles/
  downloads/
  tags/
  trunk/
  users/ 
```

我想使用 git svn 导入它并使用标准功能来正确解释分支和标签。

我想看到的是一个包含目录的 git repo

```
 trunk/ 
  contrib/
  distfiles/
  downloads/
  users/ 
```

换句话说，我想将分支目录中的分支保留为分支（我认为是主干），并将标签保留为 git 标签。但是，我希望能够在不切换分支的情况下同时查看trunk、contrib、distfiles、下载和用户的内容。

这与[这个问题](https://stackoverflow.com/questions/898568/multiple-svn-projects-into-one-git-repository?lq=1)类似，但不同之处在于这些额外的目录（contrib、distfiles、downloads、users）没有自己的标签或分支。在我看来，它们应该是主干的子目录，因此另一种解决方案是以某种方式检查主干，这些额外的子目录出现在主干下。但是，由于原因，这可能是不可能的。

如果没有任何建议如何轻松处理此问题，以便我可以轻松地同时浏览 contrib 和 trunk 而无需做任何真正困难的事情？我可以陪审团用子模块来装配它，但这似乎是在自找麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:16:13.800

当然：

```
git svn clone http://repo_hostname/top_level_dir_above_those 
```

没有任何选项， git svn 不会寻找分支，而只是按照你的意愿检查整个事情。

**更新：**

在进一步澄清之后，无法在同一修订版的所有分支中查看 git 存储库的某些部分...... git 版本整个目录树结构。

但是，您可以使用上述命令将每个顶级目录签出到其自己的存储库中，然后为您的分支、标签和主干使用标准布局的 git svn 存储库。让它们保持最新会很痛苦，但是为了方便起见，shell 脚本可以为每个 repo 执行 fetch。

# php - php最大执行时间忽略php.ini

> ID：11225321
> 
> 赞同：0
> 
> 时间：2012-06-27T11:38:31.030
> 
> 标签：php, phpmyadmin

我正在尝试通过 phpMyAdmin 导出大型数据库。我收到一个错误，脚本停止，因为达到了 600 秒的最大执行时间（或类似的东西）。我尝试设置`max_execution_time`为`php.ini`0和-1。正如我在 中看到的那样，更改生效`phpinfo()`，但我仍然收到错误消息。另一个奇怪的事情是最初（在我将其更改为 0 之前）它也不是 600。是180！这个600集在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:31:10.763

看看它是否在某个地方手动设置。假设您在 UNIX 类型的平台上：

```
find /path/to/root/of/phpmyadmin -name "*.php" -print0 | xargs -0 grep "max_execution_time" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:45:12.123

您的 Web 服务器可以有其他可能会中断 PHP 执行的超时配置。Apache 有一个 Timeout 指令，而 IIS 有一个 CGI 超时功能。有关特定详细信息，请参阅您的 Web 服务器文档。

不要使用 phpMyAdmin 导入大文件。尝试使用 mysql CLI 导入数据库的转储。将 SQL 文件传输到服务器并使用 PHP 脚本（如 shell_exec 或 system）在服务器上执行以下命令

> mysql --user=user --password=password 数据库 < database_dump.sql。

当然数据库必须存在，并且您提供的用户应该具有更新数据库的必要权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T11:44:42.603

默认情况下，PHP 使用以下三个指令对所有 php 脚本设置资源限制： => `max_execution_time`：每个脚本的最大执行时间，以秒为单位（默认为 30 秒）

=> `max_input_time`: 每个脚本可能花费在解析请求数据上的最长时间（60 秒）

=> `memory_limit`: 脚本可能消耗的最大内存量（默认 8MB）

您的 php 脚本超时可能是由于资源限制。您需要做的就是设置新的资源限制，以便执行脚本。

如果这也不起作用，您可以使用`set_time_limit(N)`函数设置它，该函数以秒为单位设置时间限制。

# c# - 温莎城堡传递参数

> ID：11225323
> 
> 赞同：2
> 
> 时间：2012-06-27T11:38:37.593
> 
> 标签：c#, castle-windsor

我有一个 DI 容器，我想通过 DI 容器将参数传递给构造函数。

IE，

```
public interface IPerson { }

public class Person : IPerson {
    private int _personId;

    Person() { _personId = 0; }
    Person(int id) { _personId = id; }
}
...
Container.Register(Component.For<IPerson>().ImplementedBy<Person>().Lifestyle.Transient);
...
//Person is already available
Container.Resolve<Person>(55);

//Person is not available
Container.Resolve<Person>(); 
```

这基本上是我想做的。有时我需要创建一个新类，有时我已经有了可用的类。请问我该如何实现？

我曾认为我可以使用动态参数，但我不确定如何使用。

先感谢您。

* * *

工厂模式将使解决方案变得优雅，然而，这给我的应用程序增加了一堆复杂性，而所需要的只是一个非常简单的解决方案，它也可以正常工作。

在我自己中传递一个整数比编写整个工厂来完成同样的工作要容易得多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:47:07.030

您可以将匿名类型传递给`Resolve`指定要使用的参数值的方法：

```
container.Resolve<IPerson>(new { id = 5 }); 
```

但是，如果您`Person`在应用程序的各个点创建实例，那么您不想引用容器，因此您应该使用`PersonFactory`通过容器解析的代替。看看[Typed Factory Facility](http://stw.castleproject.org/Windsor.Typed-Factory-Facility.ashx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:49:03.997

这是我如何将参数传递给构造函数的示例（DI 容器是统一的）：

```
 static void Main(string[] args)
 {
     IUnityContainer container = new UnityContainer();

     container.RegisterType<ILogger, FileLogger>(new InjectionConstructor(new[] { "c:\\myLog.txt" }));
     ILogger logger = container.Resolve<FileLogger>();
     logger.Write("My message");
     Console.ReadLine();
 } 
```

根据“有时我需要创建一个新课程，有时我已经有了可用的课程。请问我该如何实现？” - 尝试实现[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)模式

# regex - 不考虑空格和点的正则表达式限制为 100 个字符

> ID：11225325
> 
> 赞同：1
> 
> 时间：2012-06-27T11:38:42.613
> 
> 标签：regex

有没有办法将字符长度限制为 100，而不考虑使用正则表达式的空格和点？

`^\s*([^\s]\s*){0,100}$`我有一个只排除空格的表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:42:53.460

您可以稍微修改您的正则表达式以使其工作：

```
^[\s.]*([^\s.][\s.]*){0,100}$ 
```

我假设您想拒绝任何超过 100 个字符的消息，因为您包含`$`在您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:44:49.390

*使用正则表达式* `^([\s.]*([^\s.][\s.]*){0,100})` *，您将获得最多 100 个字符的匹配项（不包括空格和点）。*

*如果要验证输入是否最多 100 个字符（不包括空格和点），则不要使用分组`( ... )`并`$`在末尾添加：* `^[\s.]*([^\s.][\s.]*){0,100}$`*.*

# java - 如何在 JSP 中显示标签消息

> ID：11225330
> 
> 赞同：0
> 
> 时间：2012-06-27T11:39:01.937
> 
> 标签：java, jsp

你能帮我在完成某些工作后显示消息吗，比如从数据库中删除数据后删除了 1 条记录。在 JFrame 中有一个类似 setVisible(true) 的方法，同样在 JSP 中有什么方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:07:03.223

JSP 只是一个 HTML 代码生成器。您需要做的就是确保它以您想要的方式生成 HTML。您可以使用[JSTL 核心标签](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html)来控制 HTML 代码生成的流程。

例如，假设您有一个设置如下消息的 servlet，

```
request.setAttribute("message", "Record successfully deleted"); 
```

然后您可以在 JSTL 的帮助下有条件地在 JSP 中显示它，如下所示`<c:if>`。

```
<c:if test="${not empty message}">
    <span class="message">${message}</span>
</c:if> 
```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含具有类似验证/消息传递方法的 Hello World 示例
*   [我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)- 包含如何安装和使用 JSTL 的信息

# java - 如何使用正则表达式操作给定的字符串以获取 2 个不同的字符串？

> ID：11225331
> 
> 赞同：0
> 
> 时间：2012-06-27T11:39:08.143
> 
> 标签：java, regex, string

我需要对字符串进行操作。最初，我将获得如下之一的图像路径：

```
image = images/registration/student.gif
image = images/registration/student_selected.gif
image = images/registration/student_highlighted.gif 
```

我需要操纵字符串图像路径以获得2个不同的图像路径。

一种是获取路径：

```
image1 = images/registration/student.gif 
```

为此，我使用了以下功能：

```
private String getImage1(final String image) {
    String image1 = image;
    image1 = image.replace("_highlight", "");
    image1 = image.replace("_selected", "");
    return image1;
} 
```

我需要的第二个图像路径是获取路径：

```
image2 = image = images/registration/student_selected.gif 
```

我用来获取`image2`输出的函数是：

```
private String getImage2(final String image) {
    String image2 = image;
    boolean hasUndersore = image2.matches("_");
    if (hasUndersore) {
        image2 = image2.replace("highlight", "selected");
    } else {
        String[] words = image2.split("\\.");
        image2 = words[0].concat("_selected.") + words[1];
    }
    return image2;
} 
```

但上述方法并没有给我预期的结果。有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:53:26.883

您可以使用 indexOf(...) 而不是 match()。match 将根据正则表达式检查整个字符串。

```
for (final String image : new String[] { "images/registration/student.gif", "images/registration/student_highlight.gif",
                "images/registration/student_selected.gif" }) {

            String image2 = image;
            final boolean hasUndersore = image2.indexOf("_") > 0;
            if (hasUndersore) {
                image2 = image2.replaceAll("_highlight(\\.[^\\.]+)$", "_selected$1");
            } else {
                final String[] words = image2.split("\\.");
                image2 = words[0].concat("_selected.") + words[1];
            }
            System.out.println(image2);
        } 
```

这会给你预期的输出。

顺便说一句，我更改了 replaceAll(..) 正则表达式，因为图像文件名也可以有字符串“highlight”。例如`stuhighlight_highlight.jpg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:08:20.167

如果我理解正确，您需要以下各个功能的输出

```
"images/registration/student.gif"-> getImage1(String) 
"images/registration/student_selected.gif" -> getImage2(String) 
```

假设上面的输出，两个函数 getImage1()-> 几乎没有错误

*   在第二次替换中，您需要使用 image1 变量，它是第一次替换的输出。
*   您需要替换“_highlighted”而不是“_highlight”

getImage2()->

*   如果您需要搜索“_”，请使用 indexOf 函数。
*   您需要替换“突出显示”而不是“突出显示”

我修改了以下功能，提供了所需的输出

```
private static String getImage1(final String image) {
    return image.replace("_highlighted", "").replace("_selected", "");
}
private static String getImage2(final String image) {
    if (image.indexOf("_")!=-1) {
        return image.replace("highlighted", "selected");
    } else {
        return image.replace(".", "_selected.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:58:19.307

首先， getImage1() 可能没有做你想做的事。您正在为变量 image1 赋值 3 次。显然最后分配的值被返回。

其次，`image2.matches("_")`不会告诉您 image2*是否*包含下划线（我认为这是您在这里尝试做的）。

我建议先自己做更多的测试/调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:07:37.707

1.

```
private String getImage1(final String image) {
  return image.replaceAll("_(highlighted|selected)", "");
} 
```

2.

```
private String getImage2(final String image) {
  return image.replaceAll(getImage1(image).replaceAll("(?=.gif)", "_selected");
} 
```

# java - 通用返回类型上的 Javac 错误

> ID：11225333
> 
> 赞同：2
> 
> 时间：2012-06-27T11:39:18.423
> 
> 标签：java, generics

这听起来像是轮子的再发明，但我正在尝试实现一个地图，（如`Map<K,V>`）。该类有一个调用的函数`sortedKey()`，它返回一个`ArrayList<K>`我的代码的精简版本如下。我已将我对内联调试的尝试作为注释包含在内。

```
import java.util.ArrayList;
import java.util.Collections;

public class Map<K,V> {
    private ArrayList<Pair<K,V> > array; //Pair<K,V> is a class defined in another file.

    //returns an ArrayList(of proper type) of keys (ie, the desired function)
    public ArrayList<K> sortedKeys(){
        ArrayList<K> ret = keys(); //another method defined inside same class

        K s = ""; // error: no suitable method found for sort(ArrayList<K>)
        Collections.sort(new ArrayList<String>()); //Works just fine..
        Collections.sort(ret); //Same error here..
        return ret;
    }
} 
```

关于为什么会出现该错误的任何想法？根据创建类时使用的类型变量，我可以没有通用返回类型吗？还是我必须做其他事情才能达到预期的效果？

如果这个问题已经被问过，谢谢并道歉

卡杰坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:45:26.340

看一下签名[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

所以这个错误虽然可能令人困惑，但它是正确的——你**不能**在任意类型的列表上调用 sort；元素类型必须实现 Comparable。

如果您将泛型参数限制为具有可比性，例如：

```
public class Map<K extends Comparable<K>,V> {
    ... 
```

然后调用`Collections.sort(ret)`将按您的预期成功。

如果没有对泛型参数的这种限制，有人可以创建一个`Map`具有不可比拟的键类型的`Exception`—— 然后你希望穷人`Collections.sort`如何处理它？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:43:28.327

编译器告诉你这`K`可能不是一个有顺序的类型。您应该将类​​声明为

```
public class Map<K extends Comparable<K>, V> { 
```

以保证`K`可以将值与其他`K`值进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:42:43.613

嗯......你应该提供一个**比较器**或实现你的 K（无论它可能是）类可比较的**。**

在实现可比较的情况下，还要声明这样的类参数以将其限制为仅包含可比较的对象。

```
public class Map<K extends Comparable<K>, V> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:43:01.547

从[Collection.sort()](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)的 Javadoc 中，类型必须是

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

换句话说，`K`必须声明为`Comparable<K>`或`Comparable<? super K>`

# apache-flex - 以 flex 为网站居中

> ID：11225340
> 
> 赞同：0
> 
> 时间：2012-06-27T11:39:56.317
> 
> 标签：apache-flex, flexbuilder

我正在尝试制作一个`websites in flex`. 我面临的问题是我的网站页面未居中。我已经搜索`google`但还没有成功。

我试图以`<s:Application>`我的网络浏览器为中心，而不是从左手开始我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:42:21.753

据我了解：-

1) 您试图将 swf 嵌入到 HTML 中，如果您希望您的 swf 位于 HTML 的中心，您必须将 swf 嵌入到 HTML 端的一个容器中。通过为其提供 x、y、高度和宽度，将您的容器位置放在中心。

如果您使用的是 HTML，您可以通过以下方式执行此操作： - 将您的 Flex 应用程序 swf 宽度和高度设为 width="400" height="300" 或保持 swf width="100%" height="100%" 您可以用您的 swf 名称替换 AreaChart.swf。

我认为这可以解决您的问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>Tittle Here</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

        <style type="text/css" media="screen">
            html, body { height: 100%; margin:0; padding:0; text-align: center; }
            div#centered { border:0; height: 50%; width: 50%; position: absolute; left: 25%; top: 25%; color: black; }
        </style>        
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
        swfobject.registerObject("myId", "8.0.0", "expressInstall.swf");
        </script>
    </head>
    <body>
        <div id="centered">    
            <object id="myId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="400" height="300">
            <param name="movie" value="AreaChart.swf" />
            <param name="scaleMode" value="showAll" />
            <param name-"quality" value="best" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="AreaChart.swf" width="400" height="300">
                <!--<![endif]-->
                <div id="altContent">
                    <h1>You need to upgrade your Flash player.</h1>
                    <p>
                    <a href="http://www.adobe.com/go/getflashplayer">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                    </a>
                    </p>
                </div>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </body>
</html> 
```

别的

2) 如果您尝试将 Flex 内容集中在 Flex 应用程序内部，则必须创建一个容器，并且必须在其中移植所有逻辑，包括可视组件等。

前任： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*"
               width="800" height="600" >
    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;

            private function creationComp():void
            {
                mainContainer.x = FlexGlobals.topLevelApplication.width/2 - mainContainer.width/2;
                mainContainer.y = FlexGlobals.topLevelApplication.height/2 - mainContainer.height/2;
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <local:MainContainer id="mainContainer" width="50%" height="50%" creationComplete="creationComp()"/>

</s:Application> 
```

MainContainer.mxml 将包含所有可视组件/元素。

这可能会对您有所帮助。

可能有更好的解决方案。

# vhdl - VHDL IEEE 标准库与组件

> ID：11225342
> 
> 赞同：0
> 
> 时间：2012-06-27T11:40:07.670
> 
> 标签：vhdl, hdl

我正在为 Xilinx FPGA 开发一个 VHDL 项目，发现自己处于十字路口。

例如，我需要添加两个信号 (C=A+B)，并发现 Xilinx 具有可以生成可以完成这项工作的组件的工具。

但这也可以在标准 VHDL 中实现：C <= A + B

如果我使用标准 VHDL 代码应该是可移植的，但这是否具有较低的吞吐量？

我的意思是，特殊组件是否使用 FPGA 等内部的 DSP 功能，这使得它们更快，或者合成器通常可以处理这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:23:52.017

任何时候你都可以推断出一些事情。

性能很少受到影响，尤其是在加法器和乘法器等简单事物的情况下。甚至 RAM 块也很容易出于多种目的进行推断 - 如果我需要非常具体的供应商块行为，我只会实例化供应商组件。

如果您为适当宽度（或更小）的加法器和乘法器编写 VHDL 代码，并使用与块内可用内容相匹配的流水线，则可以很好地使用 DSP 块。如果您想更高级并使用（例如）Xilinx 的 DSP 模块的操作码输入，那么您将必须实例化一个模块。

# r - 如何在 R 中创建一个填写特定国家的世界地图？

> ID：11225343
> 
> 赞同：25
> 
> 时间：2012-06-27T11:40:08.917
> 
> 标签：r, maps, maptools, rworldmap

我想使用 R 生成一个非常基本的世界地图，其中包含一组特定的国家，这些国家用红色填充，表示它们是疟疾流行国家。

我在数据框中列出了这些国家/地区，但我很难将它们覆盖在世界地图上。

I have tried using the `wrld_simpl` object and also the `joinCountryData2Map` method in the `rworldmap` package.

I would comment on this answer to prevent addition of a possibly redundant question but I do not have enough reputation at the moment, apologies for this.

[https://stackoverflow.com/a/9102797/1470099](https://stackoverflow.com/a/9102797/1470099)

I am having difficulty understanding the arguments given to the `plot()` command - I wondered if there was just an easy way to tell R to plot all of the country NAMEs in my list on the `wrld_simpl` map instead of using `grepl()` etc. etc.

```
plot(wrld_simpl, 
     col = c(gray(.80), "red")[grepl("^U", wrld_simpl@data$NAME) + 1]) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-27T18:45:14.397

使用该`rworldmap`软件包，您可以使用以下内容：

```
library(rworldmap)

theCountries <- c("DEU", "COD", "BFA")
# These are the ISO3 names of the countries you'd like to plot in red

malDF <- data.frame(country = c("DEU", "COD", "BFA"),
  malaria = c(1, 1, 1))
# malDF is a data.frame with the ISO3 country names plus a variable to
# merge to the map data

malMap <- joinCountryData2Map(malDF, joinCode = "ISO3",
  nameJoinColumn = "country")
# This will join your malDF data.frame to the country map data

mapCountryData(malMap, nameColumnToPlot="malaria", catMethod = "categorical",
  missingCountryCol = gray(.8))
# And this will plot it, with the trick that the color palette's first
# color is red 
```

编辑：添加其他颜色并包含图片

```
## Create multiple color codes, with Burkina Faso in its own group
malDF <- data.frame(country = c("DEU", "COD", "BFA"),
  malaria = c(1, 1, 2))

## Re-merge
malMap <- joinCountryData2Map(malDF, joinCode = "ISO3",
  nameJoinColumn = "country")

## Specify the colourPalette argument
mapCountryData(malMap, nameColumnToPlot="malaria", catMethod = "categorical",
  missingCountryCol = gray(.8), colourPalette = c("red", "blue")) 
```

[![在此处输入图像描述](../Images/6595a381e803e49b6c8be76948a214d5.png)](https://i.stack.imgur.com/BWzlV.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-27T13:19:07.907

尝试使用 googleVis 包并使用 gvisGeoMap 函数

例如

```
G1 <- gvisGeoMap(Exports,locationvar='Country',numvar='Profit',options=list(dataMode='regions'))

plot(G1) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-12T10:03:13.873

```
 library(maptools)
    data(wrld_simpl)
    myCountries = wrld_simpl@data$NAME %in% c("Australia", "United Kingdom", "Germany", "United States", "Sweden", "Netherlands", "New Zealand")
    plot(wrld_simpl, col = c(gray(.80), "red")[myCountries+1]) 
```

[![在此处输入图像描述](../Images/a41acfc43bd289de69c354a692b47ba2.png)](https://i.stack.imgur.com/7mpIK.png)

# c# - 将 DirectShow 与 WPF 一起使用时出现零星错误窗口

> ID：11225345
> 
> 赞同：1
> 
> 时间：2012-06-27T11:40:11.403
> 
> 标签：c#, wpf, directshow, directshow.net

我已经构建了一个应用程序，它可以并行显示两个直接显示图。此应用程序使用 WPF，因此我评估了不同的解决方案，例如 WPFMediaKit ( [http://wpfmediakit.codeplex.com/](http://wpfmediakit.codeplex.com/) ) 和 AVCapWPF ( [https://wpfcap.codeplex.com/](https://wpfcap.codeplex.com/) )。

两种解决方案通常都可以正常工作。但有时我会得到一个灰色的错误窗口（看起来很像 Windows 2000），其中包含一些关于 CPU 的信息（但旧的 CPU 信息，在设计此错误消息时似乎不知道实际的 CPU）并加载了 Dll，但没有错误信息。窗口的标题只是“错误”。

问题是错误偶尔发生，所以我不确定我是否知道所有出现的情况，但已知以下错误情况：

1.  构建直接显示图时发生错误，导致仅加载并显示一个图
2.  在构建两个图表之前发生错误，这导致两个图表都加载并显示
3.  错误不取决于图中使用的过滤器。对于渲染框架使用不同的渲染器和切换的源过滤器，主要使用Montivision DemoSource。

我只能在渲染两个图形时产生错误，但也找不到定期产生它的可能性。

当错误窗口关闭时，整个应用程序完成（崩溃）。在 .Net 中无法捕捉到错误。它似乎来自系统库。

错误窗口文本：

```
OS:  Workstation, SP1
CPU: GenuineIntel, Intel Pentium III Xeon, MMX @ 2490 MHz

Module name: D:\[...]\bin\Debug\TestApp.exe

Application data:
VmVyc2lvbjogV2t4dGJIZHFVbTEyYkdsb0oxRmhiR3htS2xwaWUya3N
TMlJpZW1wOVRUd3hTaU0rTXlJNE5DTTVOaVpLT3pnVkUwSXJOQzRxUE
... (a base64 encoded list of loaded dlls) 
```

我希望有人知道这个错误以及避免它的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:07:30.053

您是否尝试在干净的 Windows 安装且不使用 Montivision 等的情况下运行应用程序？

另外，请显示使用的 DLL 列表和图形屏幕截图。

# javascript - 如何恢复嵌套的 JSON 日期/时间

> ID：11225350
> 
> 赞同：2
> 
> 时间：2012-06-27T11:40:31.090
> 
> 标签：javascript, json, internet-explorer

我有一个像这样的 JSON 字符串：（数据是伪造的，我的公司非常严格......）

```
{
    "people" : {
        "101" : {
            "name" : "Strub, Thomas Reto",
            "birthdate" : "/Date(690595200000)/"
        }
    },
    "generated" : "/Date(1340755200000)/"
} 
```

我在解析时使用这个 reviver：

```
var jsonMSDateTime = new RegExp('^\\/Date\\([0-9]{13}\\)\\/$');
function jsonReviver(key, value) {
    if (jsonMSDateTime.test(value)) return new Date(value.substr(6, 13) * 1);
    else return value;
} 
```

我的问题如下：如果我在 IE 中运行这个脚本，生成的日期会被解析，但生日不会。（但是，它适用于 chrome。）

我犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:28:27.557

这绝对是 IE 中的一个错误（至少在 IE9 中）。考虑这个例子：

```
var js = {
    "test" : "test",
    "test2" : {
        "a" : "1"
    }, 
    "1" : { 
        "b" : "2" 
    }
};
var json = JSON.stringify(js); /* <---- all fine here */

function jsonReviver(key, value) {
    return value;
}

var jsonParsed = JSON.parse(json, jsonReviver);
jsonParsed["1"] /* <---- undefined */ 
```

问题是，如果您将密钥更改`"1"`为非数字密钥（例如`"a1"`），它会起作用。所以似乎解析器不能很好地处理数字键（不知道为什么）。数值虽然很好。

请注意，即使您使用`JSON.parse(json);`结果仍然会不正确。我已经用 jQuery 对其进行了测试，但`$.parseJSON`效果不佳。

因此，您的问题有（至少）三种解决方案：

1.  停止支持 IE。:)
2.  使用 JavaScript 的`eval("("+json+")");`. 毕竟 JSON**是**一个有效的 JavaScript。不过我不建议这样做，这可能很危险。
3.  更改 JSON 中的键，使它们永远不是数字。

# c# - MDI 子项在最大化时显示图标

> ID：11225352
> 
> 赞同：1
> 
> 时间：2012-06-27T11:40:36.263
> 
> 标签：c#, windows-forms-designer, mdichild, controlbox

我有一个 MDI 父母和 MDI 孩子。我想以最大化状态隐藏子窗体的图标，所以我尝试了以下方法：

```
g.WindowState = FormWindowState.Normal;
g.ShowIcon = false;
g.Show();
g.WindowState = FormWindowState.Maximized; 
```

子窗体的`showicon`值设置为`false`，但是当它最大化时，它仍然显示一个图标：

![在此处输入图像描述](../Images/3a1303ac2e288a054246121ada2d7610.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:40:22.460

MDI 要求这些框架装饰存在，当您尝试隐藏它们时，它会以各种方式出现异常。一个简单的解决方法是创建一个完全透明的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-09T20:39:59.597

在`ItemAdded`事件中：

```
if (e.item.Text == "" )
{

    e.item.Visible = false;

} 
```

# python - 我可以同时使用 Python 的 curses 和 cmd 库吗？

> ID：11225356
> 
> 赞同：6
> 
> 时间：2012-06-27T11:40:47.143
> 
> 标签：python, cmd, curses

在 Python 中，我想同时使用 cmd 和 curses 编写一个终端程序，即。使用 cmd 接受和解码完整的输入行，但使用 curses 定位输出。

像这样将 curses 和 cmd 的示例混合在一起：

```
import curses 
import cmd

class HelloWorld(cmd.Cmd):
    """Simple command processor example."""

    def do_greet(self, line):
        screen.clear()
        screen.addstr(1,1,"hello "+line)
        screen.addstr(0,1,">")
        screen.refresh()

    def do_q(self, line):
        curses.endwin()
        return True

if __name__ == '__main__':
    screen = curses.initscr()   
    HelloWorld().cmdloop() 
```

我发现我在打字时什么都看不到。curses 大概是在屏幕上显示任何内容之前等待刷新。我可以切换到使用 getch() 但是我会失去 cmd 的值。

有没有办法让这些一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-03T14:02:48.210

这个问题似乎很老了......但它引起了足够的关注，所以我想把我的答案抛在脑后..你可以在[这里](https://gist.github.com/interstar/3005137)查看该网站并清除你的疑虑..

更新：这个答案链接到原始提问者的要点。只是为了节省必须点击链接的人......这是完整的代码：

```
#!/usr/bin/env python 
# -*- coding: utf-8 -*- 

import curses 
import curses.textpad
import cmd

def maketextbox(h,w,y,x,value="",deco=None,textColorpair=0,decoColorpair=0):
    # thanks to http://stackoverflow.com/a/5326195/8482 for this
    nw = curses.newwin(h,w,y,x)
    txtbox = curses.textpad.Textbox(nw,insert_mode=True)
    if deco=="frame":
        screen.attron(decoColorpair)
        curses.textpad.rectangle(screen,y-1,x-1,y+h,x+w)
        screen.attroff(decoColorpair)
    elif deco=="underline":
        screen.hline(y+1,x,underlineChr,w,decoColorpair)

    nw.addstr(0,0,value,textColorpair)
    nw.attron(textColorpair)
    screen.refresh()
    return nw,txtbox

class Commands(cmd.Cmd):
    """Simple command processor example."""

    def __init__(self):
        cmd.Cmd.__init__(self)
        self.prompt = "> "
        self.intro  = "Welcome to console!"  ## defaults to None

    def do_greet(self, line):
        self.write("hello "+line)

    def default(self,line) :
        self.write("Don't understand '" + line + "'")

    def do_quit(self, line):
        curses.endwin()
        return True

    def write(self,text) :
        screen.clear()
        textwin.clear()
        screen.addstr(3,0,text)
        screen.refresh()

if __name__ == '__main__':
    screen = curses.initscr()   
    curses.noecho()
    textwin,textbox = maketextbox(1,40, 1,1,"")
    flag = False
    while not flag :
        text = textbox.edit()
    curses.beep()
    flag = Commands().onecmd(text) 
```

# windows-installer - NSIS 可以用来打包 MSI 安装程序吗？

> ID：11225357
> 
> 赞同：3
> 
> 时间：2012-06-27T11:40:54.953
> 
> 标签：windows-installer, package, nsis

我有两个适用于 32 位和 64 位平台的 MSI 安装程序，我想创建一个单独的安装程序来发布，它将根据正在运行的平台运行适当的 MSI。我很欣赏这仅靠 MSI 是不可能的。

所需的软件包非常简单，只需检查它运行的平台的位数并启动适当的 MSI，但我还没有找到任何可以做到这一点的*免费工具。*我遇到了 NSIS，它看起来很有希望，有谁知道它是否适合这项任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T11:50:06.150

使用[x64.nsh](http://nsis.sourceforge.net/Include/x64.nsh)检测平台，然后提取并执行。像这样的东西：

```
!include x64.nsh
Section
Initpluginsdir
${If} ${RunningX64}
  File "/oname=$pluginsdir\inst.msi" "myfiles\amd64.msi"
${Else}
  File "/oname=$pluginsdir\inst.msi" "myfiles\x86.msi"
${EndIf}
ExecWait '"msiexec" /i "$pluginsdir\inst.msi"'
SectionEnd 
```

# html - 切换特定的 div 并更改 img jquery

> ID：11225358
> 
> 赞同：0
> 
> 时间：2012-06-27T11:40:56.027
> 
> 标签：html, toggle, switch-statement, image, selected

我在此列表上切换时遇到问题：

```
<div id="list">

    <div id="segment">      // <--- when clicked, toggle segm_content and opener
          <div id="opener">
              <img src="images/open.png" />   // changes when toggled
          </div>
          <div id="segm_content">
              // content to hide/show
          </div>
    </div>

    <div id="segment">      // <--- when clicked, toggle segm_content and opener
          <div id="opener">
              <img src="images/open.png" />   // changes when toggled
          </div>
          <div id="segm_content">
              // content to hide/show
          </div>
    </div>

    ... //and so on

</div> 
```

我想单击*"#segment"*来切换子 *"#segm_content"* 并在*"#opener"*中更改 img 。

我使它使用以下代码：

```
$('#segment').toggle(function() {
    $('#opener').html('<img src="images/open.png"/>');
    $('#segm_content').hide(500);
}, function() {
    $('#opener').html('<img src="images/close.png"/>');
    $('#segm_content').show(500);
}); 
```

但我不知道如何一次只为一个*“#segment”*做这件事。
这段代码切换了我不想要的一切。

我被困在这一点上，请问有什么建议吗？
非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T06:46:16.373

常规主题设置 背景颜色 文本颜色

```
 <div class="Settings" id="GTSettings">
            <h3 class="SettingsTitle"><a class="toggle" ><img src="${appThemePath}/images/toggle-collapse-light.gif" alt="" /></a>Content Theme Settings</h3>
            <div class="options">
                <table>
                    <tr>
                        <td><h4>Back-Ground Color</h4></td>
                        <td><input type="text" id="body-backGroundColor" class="themeselector" readonly="readonly"></td>
                    </tr>
                    <tr>
                        <td><h4>Text Color</h4></td>
                        <td><input type="text" id="body-fontColor" class="themeselector" readonly="readonly"></td>
                    </tr>
                </table>
            </div>
        </div> 
```

$(文档).ready(函数(){

```
 $(".options").hide(); 
```

$(".SettingsTitle").click(function(e) { var appThemePath = $("#appThemePath").text();

```
 var closeMenuImg = appThemePath+'/images/toggle-collapse-light.gif';
                var openMenuImg = appThemePath+'/images/toggle-collapse-dark.gif';

                var elem = $(this).next('.options');
                $('.options').not(elem).hide('fast');
                $('.SettingsTitle').not($(this)).parent().children("h3").children("a.toggle").children("img").attr('src', closeMenuImg);
                elem.toggle('fast');
                var targetImg  =  $(this).parent().children("h3").children("a.toggle").children("img").attr('src') === closeMenuImg ?  openMenuImg :  closeMenuImg;
                $(this).parent().children("h3").children("a.toggle").children("img").attr('src', targetImg);

            }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:26:16.423

我真的不推荐这个。an 的要点`id`是引用一个独特的元素。如果你想选择多个元素，你应该定义一个`class`而不是让 jQuery 调用它。多个`id`s 是无效的 HTML。但是，您*可以*通过将 jQuery 代码更改为以下内容来做到这一点。

（这是我的 jsFiddle：http: [//jsfiddle.net/KzVmK/](http://jsfiddle.net/KzVmK/)）

```
$('[id="segment"]').toggle(
 function(){
  $(this).find('[id="opener"]').html('<img src="open.png" alt="Close" />');
  $(this).find('[id="segm_content"]').hide(500);
 },
 function(){
  $(this).find('[id="opener"]').html('<img src="close.png" alt="Open" />');
  $(this).find('[id="segm_content"]').show(500);
 }
);​ 
```

再次强调，这是一个坏主意，因为您`id`的文档中不会有唯一的选择器。这是非常糟糕的做法。有时您会想要在 DOM 中选择一个单独的元素，而这几乎是不可能的。我强烈建议您`class`为元素定义 a （您仍然可以定义 CSS `class`es，例如`<div class="opener my-class" />`or `<div class="segm_content my-class" />`）。

（此外，此代码的一个有用提示：不要使用同样在 jQuery 代码中的相同图像填充 HTML 元素 [这是多余的]，将`<div id="opener" />`元素留空。然后，在定义`toggle`函数之后，立即运行`click`事件，就像这样：http: `$('[id="$segment"]').toggle(...).click();` [//jsfiddle.net/XPXBv/](http://jsfiddle.net/XPXBv/)）。

# jquery - 颜色框框架大小计算错误（30px）

> ID：11225360
> 
> 赞同：0
> 
> 时间：2012-06-27T11:41:18.517
> 
> 标签：jquery, colorbox

如您在此处看到的： [http](http://wakawaka.reh-kendermann.df-kunde.de/media/media) : //wakawaka.reh-kendermann.df-kunde.de/media/media 颜色框内容包装器“cboxContent”高度太短了 30 像素。我们可以说内容“cboxLoadedContent”/“cboxContent”太大了 30px。事实上，当我将内容修正 30px 时，dsplay 是对的，但内容自然有一个特定的高度，不可更改。

所以：整个计算是错误的。我正在使用 Drupal 7.14 和 colorbox 7.x-1.3 ；用于 jQuery 1.4.3+ 的轻量级、可定制的灯箱插件。和 jQuery 更新 7.x-2.2 ；将 jQuery 更新到 jQuery 1.5.2 和 jQuery UI 1.8.11。

感谢帮助

拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:52:43.990

好的，我相信这是由于您使用的 box-sizing 方法。这里使用的 colorbox.css 文件有点过时了。尝试添加以下行，看看它是否解决了您的问题：

```
#colorbox, #cboxContent, #cboxLoadedContent{box-sizing:content-box;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:09:24.850

Colorbox 在应用 css 后真正计算尺寸。 `#cboxContent, #cboxLoadedContent {padding-bottom:15px;}` 做到了。问候拉尔斯

# c - ruby 如何在内部表示字符串？

> ID：11225362
> 
> 赞同：2
> 
> 时间：2012-06-27T11:41:32.703
> 
> 标签：c, ruby, encoding, character-encoding, ruby-c-extension

我在为 ruby​​ 创建 C-Extension 时遇到了一些麻烦，这让我开始思考。我想知道 Ruby (1.9.1) 如何在内部处理字符串（以及所有编码的东西）？

如果我有一个类似 的字符串`"o"`，并将该字符串传递给一个 C-Function (as )，我可以使用和宏`VALUE`很容易地处理它。但是，如果我制作字符串（德语变音符号），会给我.`RSTRING_PTR()``RSTRING_LEN()``ö``RSTRING_LEN()``2`

在那种情况下，我对 的内容有点困惑`RSTRING_PTR()`，这两个字节是`0xA4`和`0xC3`。这是什么编码？在将字符串传递给 C 函数之前，我尝试使用`"ö".force_encoding( ... )`不同的编码，但这根本不影响的内容`RSTRING_PTR`。

我需要的是一种在我的 C 函数中将字符串表示为`WCHAR*`编码`UTF-16`（在 的情况下为..`"ö"``0x00F6`

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:54:22.003

ruby 1.9 中的字符串内部依赖于`__ENCODING__`常量和`Encoding.default_internal`设置。

在您的情况下，它看起来像 UTF-8（默认），但`ö`实际上`c3 b6`是 UTF-8，并且`c3 a4`是`ä`

# android - 为什么 .apk 文件不在真机上运行

> ID：11225364
> 
> 赞同：2
> 
> 时间：2012-06-27T11:41:38.240
> 
> 标签：android

我开发了一个安卓应用程序。该应用程序在模拟器上完美运行。我的应用程序从 Web 服务获取数据。当我在真实设备上运行应用程序时，我会强制关闭。我不明白这是什么原因。我开始知道我们可以通过在真实设备上运行来调试我们的应用程序。我不知道该怎么做。
我找到了一些使用真实设备调试[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)的链接。但在此链接中，需要使用 USB 驱动程序将设备连接到 PC。我正在使用三星 Galaxy y。我没有找到该型号（GT-S5360）的任何驱动程序。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:46:25.223

除了设备调试，您还可以查看设备生成的日志。有许多应用程序可以让您做事，[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&hl=en)就是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:58:09.980

你应该有**Android SDK**。

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

在您的设备上激活**USB 调试**`adb logcat`并在主机上的命令行中运行。

[http://www.groovypost.com/howto/mobile/how-to-enable-usb-debugging-android-phone/](http://www.groovypost.com/howto/mobile/how-to-enable-usb-debugging-android-phone/)

如果你使用 eclipse，你可以像在模拟器上一样做这一切。

[http://developer.android.com/tools/building/building-eclipse.html](http://developer.android.com/tools/building/building-eclipse.html)

# python - 在 Win7 x64 上安装 HG 审查板

> ID：11225371
> 
> 赞同：0
> 
> 时间：2012-06-27T11:42:01.290
> 
> 标签：python, apache, mercurial, mod-wsgi, review-board

虽然有人说在 windows 环境中为 mercurial 设立一个审查委员会并不是最好的主意，但我还是试了一下。到目前为止，我还没有成功。因此，我正在寻求帮助。

我正在运行 Windows 7 x64 并遵循官方[在 Windows 上安装](http://www.reviewboard.org/docs/manual/dev/admin/installation/windows/)指南。

在这里我没有问题，当我选择wsgi时出现问题。现在我正在使用 Apache 2.2 32 位，python 2.5.4 32 位，并且我已经从以下位置下载了一个 apache wsgi 模块：[http ://code.google.com/p/modwsgi/wiki/InstallationOnWindows](http://code.google.com/p/modwsgi/wiki/InstallationOnWindows)

奇怪的是，他们没有这个特定组合的模块（Apache 2.2|python 2.5）所以我抓住了最接近的东西：mod_wsgi-win32-ap22py26-3.3.so - Apache 2.2 / Python 2.6

还是我不认为win32对win64有什么问题吧？

好吧，在我将 httpd.conf 中的 Apache2.2 告诉我放入模块文件夹中的“LoadModule wsgi_module modules/mod_wsgi.so”之后，它告诉我的是：

```
httpd.exe: Syntax error on line 129 of G:/tools/Apache2/conf/httpd.conf: 
Cannot load G:/tools/Apache2/modules/mod_wsgi.so into server: %1 is not 
a valid Win32 application. 
```

这是因为我使用 python 2.5 而不是 2.6 AND/OR windows 7 64 吗？如果它与 python 版本有任何关系——我找不到 2.5 的 wsgi mod 至少不是可下载的版本，只有需要编译的源代码，然后是一些。

有没有人遇到过类似的问题，可以建议或提示如何加载那些 wsgi 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:36:04.997

我很确定 mod_wsgi 必须针对正确的 Python 版本进行编译，因此您不能将 mod_wsgi-win32-ap22py26-3.3.so 与 2.5.4 一起使用。

（顺便说一句，不知道你为什么还在使用 2.5？）

# httprequest - http请求中的负端口号

> ID：11225373
> 
> 赞同：3
> 
> 时间：2012-06-27T11:42:08.870
> 
> 标签：httprequest

如果 http 请求的端口号为负，会发生什么情况。

任何人都可以帮助我实现这一点。

我需要这个用于一些测试目的。

# eclipse - Eclipse Maven Web 项目 Servlet 映射

> ID：11225375
> 
> 赞同：0
> 
> 时间：2012-06-27T11:42:15.600
> 
> 标签：eclipse, servlets, tomcat7, web.xml, m2e

我已经使用 eclipse indigo 中的 m2e 插件设置了我的 maven 项目，并使用`mvn eclipse:eclipse -Dwtpversion=1.5`. 我已经设法让项目在 tomcat7 中启动并运行，除了我的 servlet，我无法为其创建 servlet 映射。

我曾尝试修改 web.xml 文件，但它会引发 ClassNotFoundException。目录结构和 web.xml ：

```
(ROOT)
    +src
       +main
          +resources
              +DrawInitialMap.java
          +webapp
               (WebContent here)

<web-app>
   <servlet>
      <servlet-name>DrawInitialMap</servlet-name>
      <servlet-class>(groupId).(artifactId).src.main.resources.DrawInitialMap</servlet-class>
   </servlet>
   <servlet-mapping>
      <servlet-name>DrawInitialMap</servlet-name>
      <url-pattern>/drawInitialMap.do</url-pattern>
   </servlet-mapping>
  (...)
</web-app> 
```

虽然 @WebServlet 注释也无法映射 servlet ：

```
@WebServlet(name="drawInitialMap", description="visualizes ttrp on html5 canvas", urlPatterns={"/drawInitialMap.do"}) 
```

提前感谢您，如果您需要更多代码，请通知您。

PS：请记住，servlet 在动态 Web 项目模式下完美运行，没有 Maven

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:42:08.197

有几个问题。

1.  你应该停止使用 eclipse:eclipse。相反，从 Eclipse Marketplace[为 M2E 安装 WTP 集成](https://www.eclipse.org/m2e-wtp/)
2.  在 Maven 项目中，您的 DrawInitialMap 应该在 /src/main/classes 文件夹中。因此，它将按照默认的 Maven 项目约定进行编译
3.  web.xml 中的servlet-class 元素需要完整的类名，即没有(groupId).(artifactId).src.main.resources 之类的东西。

# android - 为 ListView 设置适配器时出现 NullPointer 异常

> ID：11225376
> 
> 赞同：-2
> 
> 时间：2012-06-27T11:42:21.097
> 
> 标签：android, listview, adapter

```
 `Adapter class :::

    public class YAdapter extends ArrayAdapter<String> {

        ArrayList<String> items;
        Context context;
        private LayoutInflater mInflater;

        static class ViewHolder {
            TextView yName;
        }

        public YAdapter(Context context,ArrayList<String> items) {
            super(context, R.layout.single_item_list_row, items);
            this.context=context;
            mInflater = LayoutInflater.from(context);
            this.items = items;
        }

        @Override
        public int getCount() {
            return items.size();
        }

        @Override
        public String getItem(int arg0) {
            return items.get(arg0);
        }

        @Override
        public long getItemId(int arg0) {
            return arg0;
        }

    @Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if(convertView == null) {
        convertView = Inflater.inflate(R.layout.single_item_list_row,null);
        holder = new ViewHolder();
        holder.yName=(TextView)convertView.findViewById(R.id.text1);
        convertView.setTag(holder);
           } 
                else {
                    holder = (ViewHolder) convertView.getTag();
                }
                try
                {
                    if(items.get(position) != null)
                        holder.yName.setText(items.get(position));  
                }
                catch (Exception e) {
                      Log.e("ERROR","Adapter error in generating view);
                }
                return convertView;
            }

        }

        Activity Class ::

        public class DemoActivity extends Activity {

            ListView listView;
            ArrayList<String> temp = new ArrayList<String>();
            YAdapter adapter;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
    listView = (ListView) findViewById(R.id.list);

            }
                @Override
            public void onResume() {
                super.onResume();
                temp.add("one");
                temp.add("two");
                temp.add("three");
                temp.add("four");
                adapter = new YAdapter(DemoActivity.this , temp);

                **listView.setAdapter(adapter);**  -- exception

            }
            }

    listView.setAdapter(adapter);

this line causes an exception. 
```

当我尝试将适配器设置为列表时，如果我删除此行，则不会显示错误，并且屏幕上也没有显示任何组件，只会出现黑屏。

我编码的内容如下所示bt我得到空指针异常。请告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:45:04.643

看看这一行，你的活动名称，

```
public class Activity extends Activity { 
```

在适配器线上，

```
 adapter = new YAdapter(YellowPagesActivity.this , temp); 
```

那么**YellowPagesActivity.this**是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:45:21.953

作为使用 `@ViewById(R.id.list) so no need to findViewById`......

问题到期

```
adapter = new YAdapter(YellowPagesActivity.this , temp); 
```

# sql-server - 通过 SQL Server Management Studio 禁用对 SQL Server 数据库的访问

> ID：11225379
> 
> 赞同：1
> 
> 时间：2012-06-27T11:42:30.080
> 
> 标签：sql-server, ssms

提前为长篇道歉，我试图尽可能清楚。有没有办法禁用通过 SQL Server Management Studio (SSMS) 访问数据库的用户/Windows AD 组？

我有一个使用 SQL Server 2005 数据库的桌面应用程序。应用程序在用户登录机器时运行（不幸的是，我们无法更改，否则这会很简单）。数据库获得组的许可（但它也适用于用户），以授予对用户需要的适当模式和对象的访问权限。用户有（并且需要）选择、插入、更新和删除数据以完成他们的过程的能力。

该应用程序对用户输入执行一系列验证和审计步骤，以确保他们输入了正确的数据（以及一些额外的业务处理）。用户可以打开 SSMS 并通过查询编辑器进行这些更改，从而完全避免应用程序，这是我们试图避免的。我正在寻找的是一种阻止用户通过提供的应用程序以外的任何工具更新数据库的方法。

我发现了一些类似的帖子（包括[How to disable SQL Server Management Studio for a user](https://stackoverflow.com/questions/898380/how-to-disable-sql-server-management-studio-for-a-user)），但这些帖子并没有完全涵盖这个问题，因为它们致力于限制用户访问或使用不同的登录名。

目前我能想到的唯一解决方案是拥有一组表，其中用户数据最初进入，然后另一个进程选择它，运行应用程序进程，然后将数据放入主/源表中。然后我可以限制用户访问主表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:07:45.127

[对于应用程序角色](http://msdn.microsoft.com/en-us/library/ms190998%28v=sql.90%29.aspx)来说，这似乎是一个很好的场景。

# facebook - 应用程序被视为垃圾邮件。110.000 次浏览中只有 4 次垃圾邮件报告

> ID：11225385
> 
> 赞同：2
> 
> 时间：2012-06-27T11:42:48.747
> 
> 标签：facebook, facebook-apps, status, spam

所以我们的应用程序已经运行了 3 天了。已经进行了大约 1300 次“播放”，每次播放（每天最多 3 次）都会向用户流发布更新（如果他们允许的话）。该消息基本上是通常的“我玩过这个游戏并得到了这个分数”。

Facebook 用户总共查看了所有这些更新 110.000 次，其中只有 4 人将其报告为“垃圾邮件”。尽管我们应用统计信息的“负面反馈”部分表明我们的应用被认为是“垃圾邮件”，并且我们面临立即受到限制的危险。

完整消息：“红色警告级别：您的应用程序被视为垃圾邮件，并有立即受到限制的危险。查看您的 Insights 指标以了解可能导致此问题的原因。”

现在，至少对我来说，每 100K 次观看得到 4 个垃圾邮件报告似乎并不多。我可以安全地忽略此消息还是要对此采取行动？即使我应该采取行动，我还能做什么？我不能阻止人们考虑更新“垃圾邮件”并且发布它的用户明确允许我们这样做。

我是否错过了另一个我应该查看的统计数据？

# mysql - SQL 无法正常工作

> ID：11225389
> 
> 赞同：0
> 
> 时间：2012-06-27T11:42:59.640
> 
> 标签：mysql

我有这个查询，但这显示列不存在

```
SELECT 
p.content,
(select count(*) from share_member WHERE username='pratik' AND share_id=share) as allow 
FROM posts p WHERE allow >="1" 
```

我得到了这个错误

'where 子句'中的未知列'allow'

**编辑：** 此编辑已完成以改进我使用的 sql 查询

```
SELECT 
p.content,
CASE share_type 
WHEN 'public' then "1"
when 'lsit' then 
    (select count(*) from share_member WHERE username='pratik' AND share_id=share)
end as allow
FROM posts p WHERE allow=>1 
```

**错误代码 1064，SQL 状态 42000**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:46:48.967

您不能在子句中使用**列别名。**`WHERE`

但是，您可以改用`HAVING`子句，在那里您可以使用别名。差异`WHERE`是在构建结果集时执行的，并`HAVING`在整个集合匹配后应用（这通常意味着`HAVING`更重）。

```
SELECT 
p.content,
(select count(*) from share_member WHERE username='pratik' AND share_id=share) as allow 
FROM posts p
HAVING allow >= 1 
```

编辑：您的第二个查询应如下所示：

```
SELECT p.content,
  CASE
    WHEN share_type='public' THEN "1"
    WHEN share_type='list' THEN (SELECT COUNT(*) FROM share_member WHERE username='pratik' AND share_id=share)
    END AS `allow`
FROM posts p
HAVING `allow` >= 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:45:29.370

它应该是

```
SELECT p.content,
    (select count(*) 
     from share_member 
     WHERE username='pratik' AND share_id=share) as allow 
FROM posts p 
WHERE (select count(*) 
      from share_member 
      WHERE username='pratik' AND share_id=share) >=1 
```

或者

```
(select count(*) 
 from share_member 
 WHERE username='pratik' AND share_id=share) 
```

应该是 from 子句，作为另一个结果集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:53:52.167

您的查询修改为

```
SELECT 
p.content,
(select count(*) from share_member WHERE username='pratik' AND share_id='share') as allow 
FROM posts p WHERE allow >=1 
```

## 或者

```
SELECT 
p.content,
(select count(*) from share_member WHERE username='pratik' AND share_id='share') as allow 
FROM posts p WHERE allow >='1' 
```

# c# - Websphere MQ .NET API 版本冲突

> ID：11225394
> 
> 赞同：0
> 
> 时间：2012-06-27T11:43:11.293
> 
> 标签：c#, .net, websphere, ibm-mq, mq

全部，

我设法使用 IBM 的两个 DLL 从 C# 连接 MQ Websphere 版本 6：

```
amqmdnet.dll (assembly version: 1.0.0.3)
amqmdxcs.dll (assembly version: 6.0.0.0) 
```

上面的程序集与我的应用程序一起在本地部署。

但是，如果尝试在 GAC 中已安装 MQ Websphere 版本 7 的服务器中尝试，那么我有一个大问题。

基本上上述两个 DLL 都在 GAC 中，但它们与我在版本 7 中使用的非常不同。但是程序集版本是相同的。因此，我的应用程序失败，因为它选择了版本 7 程序集，因为它们具有相同的程序集版本和相同的公钥令牌。

一种解决方案显然是从 GAC 中删除版本 7 DLL。还有其他选择吗？

谢谢 MK

# java - MS SQL Server 和 JDBC：关闭连接

> ID：11225398
> 
> 赞同：9
> 
> 时间：2012-06-27T11:43:22.780
> 
> 标签：java, sql-server-2008

我越来越

> **I/O 错误：数据库服务器已关闭连接。**

从 java 代码连接到 MS SQL server 2008 时。

* * *

SQL 服务器处于混合模式，它在本地机器上。我的连接字符串是 **jTDS**

> **jdbc:jtds:sqlserver://machineName:1433;databaseName=DB;integratedSecurity=true**

* * *

堆栈跟踪是

> java.sql.SQLException：I/O 错误：数据库服务器关闭连接。在 net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2311) 在 net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:610) 在 net.sourceforge.jtds.jdbc.ConnectionJDBC2.( ConnectionJDBC2.java:345) 在 net.sourceforge.jtds.jdbc.ConnectionJDBC3.(ConnectionJDBC3.java:50) 在 net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184) 在 java.sql.DriverManager。 getConnection(Unknown Source) at java.sql.DriverManager.getConnection(Unknown Source) at com.app.hibernate.test.(test.java:22) at com.app.hibernate.test.main(test.java:53)引起：java.io.IOException：数据库服务器关闭连接。在 net.sourceforge.jtds.jdbc.SharedSocket.readPacket(SharedSocket.java:848) 在 net.sourceforge.jtds.jdbc.SharedSocket。

**JDBC 驱动程序**

> 字符串 url ="jdbc:sqlserver://machine:1433;instance=SQLEXPRESS;databaseName=db";

堆栈跟踪

> com.microsoft.sqlserver.jdbc.SQLServerException：用户“用户名”登录失败。在 com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:156) 在 com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:240) 在 com.microsoft.sqlserver.jdbc.TDSParser.parse (tdsparser.java:78) 在 com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:2636) 在 com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:2046) 在 com.microsoft。 com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:2034) 在 com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer) 的 sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41) .java:4003) 在 com.microsoft。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-05T02:28:30.393

您的连接字符串和身份验证有错误。如果是混合模式，请不要使用**SQL 身份验证**

尝试这个

PC 名称 **：janaka-pc** SQL 用户名**：sa** SQL 密码
**：1234**数据库 **：Janak_DB**

**JDBC中的sql连接代码**

Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
连接连接 = DriverManager.getConnection("jdbc:sqlserver://janaka-PC;user=sa;password=1234;database=Janak_DB");

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:20:25.813

您的连接字符串有问题

对于 jTDS：

jdbc:jtds:sqlserver://machineName:1433;databaseName=DB; **使用NTLMv2=tru‌​e;域=工作组**

您可以阅读[http://jtds.sourceforge.net/faq.html#windowsAuth](http://jtds.sourceforge.net/faq.html#windowsAuth)以了解 NTLM 工作所需的单点登录库。

您为 jdts 提供的“integratedSecurity=true”在使用 JDBC 驱动程序时有效

jdbc:sqlserver://machine:1433;instance=SQLEXPRESS;databaseName=db; **综合安全=真**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:44:37.293

您在 MS SQL 端出现身份验证错误。

如果您无法控制如何获取连接（即，您使用的是数据源或连接池），则连接 URL 必须包含要使用的登录名和密码，例如：

```
jdbc:sqlserver://machine:1433;instance=SQLEXPRESS;databaseName=db;user=USERNAME;password=PASSWORD"; 
```

如果应用程序在 Windows 机器上运行并且您想要使用登录用户的凭据，那么您可以`domain`使用或不使用 指定参数`useNTLMv2`。

最后，如果您在一台 Windows 机器上但您想针对域对用户进行身份验证，那么您必须提供用户名、密码和域参数。您可以在[jtds FAQ](http://jtds.sourceforge.net/faq.html)中阅读所有相关信息，特别是[URL 格式](http://jtds.sourceforge.net/faq.html#urlFormat)部分。

# php - Recaptcha 错误时显示错误页面

> ID：11225403
> 
> 赞同：0
> 
> 时间：2012-06-27T11:43:43.337
> 
> 标签：php, recaptcha, die

是否可以使用“die”标签链接到错误站点，而不是默认显示的文本？

```
require_once('recaptchalib.php');
$privatekey = "*******";
$resp = recaptcha_check_answer ($privatekey,
$_SERVER["REMOTE_ADDR"],
$_POST["recaptcha_challenge_field"],
$_POST["recaptcha_response_field"]);
if (!$resp->is_valid) {
die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
"(reCAPTCHA said: " . $resp->error . ")");
} 
```

像：

```
die ('error.php'); 
```

当然，这是行不通的。但我不知道如何使用 die 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:58:57.037

`die()`除了打印传递的值并停止脚本之外，不能做任何事情，但是您的代码已经具有执行您想要的结构的结构：

```
if (!$resp->is_valid) {
    header('Location: http://example.com');
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
        "(reCAPTCHA said: " . $resp->error . ")");
} 
```

请注意，如果您在此代码之前输出了任何内容，则必须使用不同的方法来重定向，因为`header()`在发送标头后（通过启动输出）将不起作用。

值得注意的是，如果验证码不匹配，您最好更改程序的流程，而不是重定向和停止执行。如果您重定向（按原样）您会丢失与当前请求关联的所有数据，而如果您设置类似`$captcha_error = true`的内容并继续程序（根据 更改适当的流程`$captcha_error`），您最终会获得更好的用户体验，因为您没有重置一个完整的表格，因为验证码是错误的。

# java - Java 3d API：旋转 BoundingBox 可提供体积更大的新 Box

> ID：11225407
> 
> 赞同：2
> 
> 时间：2012-06-27T11:43:54.507
> 
> 标签：java, 3d, java-3d

我正在用 Java 3D API 编写一个小游戏，我使用 javax.media.j3d.BoundingBox 的对象来存储模型的边界。

BoundingBox 的构造函数如下：

```
public BoundingBox(Point3d lower, Point3d upper) {
    boundId = BOUNDING_BOX;
    this.lower = new Point3d(lower);
    this.upper = new Point3d(upper);
    updateBoundsStates();
} 
```

现在我想平移和旋转 BoundingBox，因为模型本身会这样做，并且我使用以下 BoundingBox 方法：

```
/** 
 * Transforms this bounding box by the given matrix.
 * @param matrix a transformation matrix
 */
public void transform(Transform3D matrix) {
    if(boundsIsInfinite)
        return;

    if (tmpP3d == null) 
        tmpP3d = new Point3d();

    double ux, uy, uz, lx, ly, lz;
    ux = upper.x; 
    uy = upper.y; 
    uz = upper.z;

    lx = lower.x; 
    ly = lower.y; 
    lz = lower.z;

    tmpP3d.set(ux, uy, uz);
    matrix.transform( tmpP3d );

    upper.x = tmpP3d.x;
    upper.y = tmpP3d.y;
    upper.z = tmpP3d.z;

    lower.x = tmpP3d.x;
    lower.y = tmpP3d.y;
    lower.z = tmpP3d.z;

    tmpP3d.set(lx, uy, uz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x  > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y  > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z  > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x  < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y  < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z  < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(lx, ly, uz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x  > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y  > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z  > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x  < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y  < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z  < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(ux, ly, uz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(lx, uy, lz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(ux, uy, lz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(lx, ly, lz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z < lower.z ) lower.z = tmpP3d.z;

    tmpP3d.set(ux, ly, lz);
    matrix.transform( tmpP3d );

    if ( tmpP3d.x > upper.x ) upper.x = tmpP3d.x;
    if ( tmpP3d.y > upper.y ) upper.y = tmpP3d.y;
    if ( tmpP3d.z > upper.z ) upper.z = tmpP3d.z;

    if ( tmpP3d.x < lower.x ) lower.x = tmpP3d.x;
    if ( tmpP3d.y < lower.y ) lower.y = tmpP3d.y;
    if ( tmpP3d.z < lower.z ) lower.z = tmpP3d.z;

    if (VirtualUniverse.mc.releaseBoundingBoxMemory) {
        // Free memory
        tmpP3d = null;
    }
} 
```

但是：如果您使用此方法旋转 BoundingBox，它会生成一个新的 BoundingBox，它的体积可能比旧的要大。如果您精确旋转 90、180、270 或 360 度，它只会提供相同的音量。

附加信息：我必须手动计算 BoundingBox，因为我通过在模型上调用 setAutoComputeBounds(false) 和 setBounds(XYZ) 来使用手动边界（而不是自动计算的太大的边界）（在这种情况下，它实际上是 javax. media.j3d 指向 javax.media.j3d.SharedGroup），并且似乎 Java 3d 引擎（至少在这种情况下）在相应模型的平移/旋转的情况下不会自动重新计算您的手动边界。

我的问题是：我必须如何（重新）实现上面显示的方法 transform() 以获得始终具有相同体积的边界框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:29:57.537

BoundingBox 实际上总是与轴对齐，无论它的两个点在哪里。两点不能定义任意立方体。无论你如何重写变换函数，它都不起作用。

You might consider the BoundingPolytope class. It provides more general bounds, formed from planes, though it does have a constructor which accepts another Bounds object, so you need not actually define the planes yourself.

# php - 如果字符串包含正斜杠

> ID：11225413
> 
> 赞同：12
> 
> 时间：2012-06-27T11:44:17.330
> 
> 标签：php, string, if-statement

我如何制作一个 if 语句来检查字符串是否包含正斜杠？

```
$string = "Test/Test";   
if($string .......)
{
    mysql_query(""); 
} 
else 
{
    echo "the value contains a invalid character"; 
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T11:46:22.160

您可以使用 strpos，这将确保字符串中有一个正斜杠，但您需要通过一个等式运行它以确保它不是假的。在这里你可以使用[strstr()](http://php.net/manual/en/function.strstr.php)。它的代码简短而简单，可以完成工作！

```
if(strstr($string, '/')){
    //....
} 
```

对于那些靠说明书生死存亡的人来说，当草垛很大，或者针很小的时候`strstr()`，不管说明书上说什么，用起来都更快。

例子：

使用`strpos()`：0.00043487548828125

使用`strstr()`：0.00023317337036133

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T11:46:18.833

```
if(strpos($string, '/') !== false) {
  // string contains /
} 
```

来自[strstr](http://php.net/manual/en/function.strstr.php)的 PHP 手册：

> 笔记：
> 
> 如果您只想确定某个特定的针是否出现在 haystack 中，请改用更快且内存占用更少的函数 strpos()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:47:25.850

采用[`strpos()`](http://php.net/manual/en/function.strpos.php)

如果它不返回 false，则该字符已匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-20T21:57:59.573

我将 strpos() 结果与 0 进行了比较。不知何故，与 false 的比较对我不起作用。

```
if (strpos($t, '/') !== 0) {
  echo "No forward slash!";
} 
```

# android - Android：EditText TextChangedListener 上的堆栈溢出错误

> ID：11225416
> 
> 赞同：2
> 
> 时间：2012-06-27T11:44:30.917
> 
> 标签：android, android-edittext, stack-overflow

运行此特定代码时出现 StackOverflow 错误：

```
litera.addTextChangedListener(new TextWatcher(){
            public void afterTextChanged(Editable s) {}
            public void beforeTextChanged(CharSequence s, int start, int count, int after){}
            public void onTextChanged(CharSequence s, int start, int before, int count){
                String ghici = litera.getText().toString();
                System.out.println(ghici);
                litera.setText("");
            }

        }); 
```

我一次评论每一行，我发现罪魁祸首是 litera.setText(""); 线，其他工作正常。我以前用过它，它让我感到困惑为什么一个特别简单的指令会导致如此严重的错误......其余的错误消息是关于“android.view.ViewGroup.addFocusables(ViewGroup.java:637)”和其他的，但我怀疑它们是决定性的。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:54:20.863

如果您`TextView`从同一个`TextView`'s中设置 's 文本`TextWatcher`，那么您已经设置了一个无限循环，这会导致`StackOverflowException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:01:13.473

你必须用这种方式

```
 litera.addTextChangedListener(new TextWatcher(){
        public void afterTextChanged(Editable s) {}
        public void beforeTextChanged(CharSequence s, int start, int count, int after){}
        public void onTextChanged(CharSequence s, int start, int before, int count){
            String strEnteredVal = litera.getText().toString();
            if(!strEnteredVal.equals("")){
            System.out.println(strEnteredVal);
            litera.setText("");
            }
        }

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:55:29.940

您遇到此问题是因为您正在更改 onChange 侦听器中的文本。发生的情况是用户更改了文本，这会调用您的`onTextChange`方法，这反过来会更改文本并再次调用`onTextChange`侦听器 - 等等。如果您需要更改侦听器的文本，那么您需要以某种方式忽略代码中的文本更改，只处理来自用户的文本更改。例如，您可以尝试这样的事情：

```
litera.addTextChangedListener(new TextWatcher(){
        public void afterTextChanged(Editable s) {}
        public void beforeTextChanged(CharSequence s, int start, int count, int after){}
        public void onTextChanged(CharSequence s, int start, int before, int count){
            if(count > 0) {
                String ghici = litera.getText().toString();
                System.out.println(ghici);
                litera.setText("");
            }
        }
    }); 
```

这将忽略所有已删除 edittext 内容的更改（通过您的代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:55:53.763

您正在 onTextChanged 侦听器中调用 settext 方法。这将导致侦听器一次又一次地触发 onTextChanged 方法。这导致stackOverflow错误

# css - 更复杂的选择

> ID：11225417
> 
> 赞同：0
> 
> 时间：2012-06-27T11:44:35.030
> 
> 标签：css, css-selectors

不久前，我发现您可以在 css 中执行此操作（使用“>”）：

```
#viewCounterFix > .hourMinSec > .hour > .devider ,
#viewCounterFix > .hourMinSec > .min > .devider ,
#viewCounterFix > .hourMinSec > .sec > .devider{
    left: 24px;
} 
```

现在，在上面的示例中，如您所见，我需要完全相同的东西，唯一的区别是 .hour、.min、.sec。

我想知道是否有更短的方法可以做到这一点？也许是这样的：

```
#viewCounterFix > .hourMinSec > [.sec or .min or .hour] > .devider{
    left: 24px;
} 
```

那么这样的语法存在吗？

编辑：这是完整的结构

```
<div class="hourMinSec">
    <div class="hour">
        <span class="leftHour">1</span><div class="devider"></div><span class="rightHour">1</span>
    </div>
    <img class="leftClockDots" src="/bids/images/dots.png">
    <div class="min">
        <span class="leftMin">3</span><div class="devider"></div><span class="rightMin">5</span>
    </div>
    <img class="rightClockDots" src="/bids/images/dots.png">
    <div class="sec">
        <span class="leftSec">0</span><div class="devider"></div><span class="rightSec">1</span>
    </div>
    <span class="time"><span class="hourText">hour</span><span class="minText">min</span><span class="secText">sec</span></span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:46:49.690

使用标准 CSS，您的方法是最佳选择。

在 CSS 规则的中间不可能有不同的类。

然而，如果`.sec`, `.min`,`.hour`是唯一会出现在 中的元素`.hourMinSec`，你可以从你的 CSS 规则中省略这个：

```
#viewCounterFix > .hourMinSec .devider {
    left: 24px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:47:32.170

不幸的是，这种语法在 css 中不存在，但您可以向您的`.hour` `.min`和`.sec`元素添加另一个类，例如`.foo`

然后有

```
#viewCounterFix > .hourMinSec > .foo > .devider {
    left: 24px;
} 
```

如果您不需要这种特殊性，您可以省略一个选择器：

```
#viewCounterFix > .hourMinSec .devider {
    left: 24px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:50:36.370

这样的语法将存在于 CSS4 中，并且现在存在于某些浏览器中：

`:-moz-any()`/选择器`:-webkit-any()`：

*   [https://developer.mozilla.org/en/CSS/%3A-moz-any](https://developer.mozilla.org/en/CSS/%3A-moz-any)
*   [http://hacks.mozilla.org/2010/05/moz-any-selector-grouping/](http://hacks.mozilla.org/2010/05/moz-any-selector-grouping/)

CSS4 的`:matches()`选择器

*   [http://dev.w3.org/csswg/selectors4/#matches](http://dev.w3.org/csswg/selectors4/#matches)

顺便说一句，如果不`.hourMinSec`包含其他任何内容，仅包含这三个数字，那么您可以使用`*`：

```
#viewCounterFix > .hourMinSec > * > .devider {
    left: 24px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T11:47:39.330

它不存在，但您可以在`.sec`,`.min`和上添加一个类`.hour`，让我们说`.time`和 bo 这个：

```
#viewCounterFix > .hourMinSec > .time > .devider{
    left: 24px;
} 
```

# php - Sql 选择查询返回资源 id #4

> ID：11225423
> 
> 赞同：-2
> 
> 时间：2012-06-27T11:44:53.060
> 
> 标签：php, sql

我编写了以下代码来从数据库中选择文本，但是当我回显输出时，它给出的输出为 Resource id #4

```
mysql_select_db("xxxxx", $link);
$q = "SELECT start_of FROM `qr_table` WHERE id_qr =1";
$result = mysql_query ($q, $link);
echo $result; 
```

我是 sql 新手，如果它是一个愚蠢的问题，请原谅我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:48:29.547

我建议您*至少阅读* [有关 Mysql 查询功能的 PHP 文档](http://us3.php.net/manual/en/function.mysql-query.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:47:53.270

你正在呼应连接。你需要对结果做一些事情，比如遍历它们，请检查[http://www.php.net/manual/en/function.mysql-query.php](http://www.php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:01:20.780

您不能直接从 MySQL 打印结果。尝试 mysql_fetch_assoc()，它将每列的值加载到关联数组中。如果你返回了多行，每次调用它都会移动到下一行，当没有更多时返回false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:22:56.443

这对你的帮助

```
<?php 
            $link=mysql_pconnect("localhost","root","")or die("Not connected".mysql_error());
            mysql_select_db("test");
            $query="select * from qr_table";
            $result=mysql_query($query,$link)or die("Query failed".mysql_error());

            print "<center><table border=1>\n";
            while($line=mysql_fetch_array($result,MYSQL_ASSOC)){
            print "\t<tr>\n";
            foreach($line as $col_value){
                        print "\t\t<td>$col_value</td>\n";
                    } 
                    print "\t</tr>\n";
            }
            print "</table>\n</center>";

?> 
```

# symfony - 对 FOSUser SonataUser 和我的扩展感到困惑

> ID：11225430
> 
> 赞同：1
> 
> 时间：2012-06-27T11:45:11.327
> 
> 标签：symfony, fosuserbundle, symfony-sonata

我按照官方教程安装 FOSUser，然后安装 SonataUser 包和我的 app/Application/Sonata/UserBundle/Entity 扩展。

现在我有 4 个表：fos_user、fos_user_group、fos_user_user 和 fos_user_user_group。

**我的安全.yml**

```
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager 
```

**我的 config.yml**

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Me\UserBundle\Entity\User
#    user_class: Application\Sonata\UserBundle\Entity\User 
```

**我的 /app/Application/Sonata/UserBundle/Resources/config/doctrine/User.orm.xml**

```
...
<entity name="Application\Sonata\UserBundle\Entity\User" table="fos_user_user">
    <id name="id" column="id" type="integer">
        <generator strategy="AUTO" />
    </id>
</entity>
... 
```

我还创建了我的 UserBundle，就像它编写的 fosuser 文档一样。

因此用户使用 fos_user 进行身份验证，但奏鸣曲管理员显示来自 fos_user_user 的用户

我的配置可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:50:13.423

我花了几个小时发现 fos_user 和 sonata_user 都应该在 config.yml 中注册：

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: App\UserBundle\Entity\User
    group:
        group_class: App\UserBundle\Entity\Group

sonata_user:
    class:
        user:  Me\UserBundle\Entity\User
        group: Me\UserBundle\Entity\Group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:39:15.610

[我终于按照这个好的教程](http://blog.quadspot.de/wordpress/symfony2/setting-up-a-symfony2-project-with-fosuserbundle-sonatauserbundle-and-sonataadminbundle)一步一步地重新启动了整个 FOSUser 和 SonataUser/Admin 安装。

我认为我的错误是使用我的包扩展 FOSUser，而 Sonata 已经通过轻松扩展扩展了它。

所以我完全删除了我的 UserBundle。

# iphone - NSArray 中索引处的对象

> ID：11225433
> 
> 赞同：8
> 
> 时间：2012-06-27T11:45:13.763
> 
> 标签：iphone, ios, arrays

我有一个数组。我想检查特定索引中是否存在对象。这个怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T11:47:53.277

如果您只想检查是否有对象

```
if (myIndex < [array count]) 
```

如果你想找到一个特定的对象

```
[array indexOfObject:myObject]; 
```

如果您想知道某个索引处的对象是否属于某个类

```
[[array objectAtIndex:myIndex] isKindOfClass:[TheClassToCompareTo class]]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T11:48:27.683

`BOOL exists = index < [array count] ? YES : NO;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T11:54:40.810

您可以使用`containsObject`方法来检查您的数组是否包含特定对象的天气。`indexOfObject`如果包含，则通过方法获取其索引

```
if ([yourArrayArray containsObject:yourObject]) 
{
    NSLog(@"Found");
    int index = [yourArray indexOfObject:yourObject];     
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-14T14:50:05.347

我知道这是旧线程，但只是想提供帮助。

您可以将类别添加到`NSArray`这样的内容

```
@implementation NSArray (Safe)

- (id)safeObjectAtIndex:(NSUInteger)index {
    if (index >= [self count]) return nil;
    return [self objectAtIndex:index];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T11:48:19.690

像这样检查

```
if([array objectAtIndex:i]!= nil)
{
NSLog("Object present");
}
else{
NSLog("Object Not Present")
} 
```

修改：你应该这样

```
if(i<=[array count]){
    if([array objectAtIndex:i]!= nil)
    {
    NSLog("Object present");
    }
    else{
    NSLog("Object Not Present")
    }
} 
```

这不会引发异常，并且数组中的对象应与 nil 值进行比较

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T11:48:33.590

您应该检查数组的长度（使用该`count`方法）并给出`NSArray`不能包含`nil`它因此必须包含*一些东西*：

```
- (BOOL)arrayContainsSomethingAtIndex:(NSUInteger) index
{
    return [_myArray count] > index;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T11:51:15.843

首先，您必须检查该对象的索引是否小于数组的大小，然后查询该索引处的数组。

```
if (index < [array count] && [array objetAtIndex:index]){
/* Your code*/
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T11:56:55.507

使用[indexOfObject:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)方法。

```
if ([Array indexOfObject:object]==index) {
        //code
    } 
```

# sql-server-2008 - MSSQL 2008。我找不到特定数据库用户的登录名

> ID：11225434
> 
> 赞同：0
> 
> 时间：2012-06-27T11:45:16.657
> 
> 标签：sql-server-2008, authentication, login

我在 mssql 2008 数据库中找到了一个用户 - domain\testuser2 登录域 \testuser2。

但我无法通过使用 Mssql Management Studio 或在系统表（sys.server_principals、sys.syslogins、sys.linked_logins、sys.remote_logins）中找到此登录名。

当我尝试使用此登录名创建另一个用户时（CREATE USER _test FOR login [domain\testuser2]），错误如下：登录名已经有一个使用不同用户名的帐户。

所以，这个登录是存在的。我在哪里可以找到它？是否有一些系统表或视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:47:30.520

我已经解决了这个问题。

在 MSSQL 中，您可以使用 Windows 身份验证创建数据库用户*而无需*登录。

比如你可以成功执行下面的sql-query（即使你没有sql-login [MyDomainName\myWinLogin]）

```
CREATE USER [MyDomainName\myWinLogin] 
```

# extjs - EXTJS X模板

> ID：11225435
> 
> 赞同：1
> 
> 时间：2012-06-27T11:45:19.623
> 
> 标签：extjs

我有一个方法如下：

```
createTip : function() {
    var eventTip = new Ext.XTemplate(
        '<tpl if="EventType == \'ONE\'">', 
        '<p> This is event one </p>',
        '</tpl>',
        '<tpl if="EventType == \'Two\'">', 
          return null;
        '</tpl>' 
    );

    return eventTip;

} 
```

我想要做的是，如果 EventType 是“TWO”，则使该方法返回 null。这可能吗？

就像上面的代码一样。我知道这是不可能的，但无论如何都可以这样做。如果 EventType 是两个，我不希望创建 xtemplate。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:41:33.570

```
applyDataToMyTemplate: function(data){
  if (data.EventType === 'Two'){
    return null; //or '', or false, or whatever you need
  } else {
     return this.createTip().apply(data); //or some such hackery
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:16:48.507

如果您确实需要返回 null，似乎您可能需要 XTemplate 以外的其他东西。我不知道使用模板执行此操作的任何用例，如果 xtemplate 返回的不是它应该返回的 html 片段，它应该会破坏大多数小部件。如果您只需要它在 EventType 为 Two 时不显示任何内容，那么您可以使用模板函数来调整生成的 HTML 或通过构建字符串来执行您想做的任何其他事情。这样做会放弃提前创建部分 dom 元素以供重用的好处，但 XTemplate 应该提供：

```
new Ext.XTemplate(
    '{[this.buildTemplate(values)]}',
    {
        buildTemplate: function (values) {
            if (values.EventType === "One") {
                return "<p> This is event one </p>";
            } else {
                return '';
            }
        }
    }
) 
```

# c# - 我应该将公钥放在独立应用程序中的哪个位置

> ID：11225439
> 
> 赞同：2
> 
> 时间：2012-06-27T11:45:22.850
> 
> 标签：c#, .net, rsa, public-key-encryption

我编写了一个 C# WPF 应用程序，它使用标准的 .Net SignedXml 类对许可证 xml 文件进行签名。我能够将公钥和私钥提取为 xml 字符串。我可以安全地将我的私钥藏在本地用于签名应用程序，但是远程签名检查应用程序（库）中所需的公钥呢？考虑的选项：

*   KeyContainer：不好，因为签名和检查发生在两个不同的环境中
*   硬编码：在我的检查库中将公钥硬编码为 xml 字符串。我知道公钥不是秘密的，但是如何防止黑客用自己的密钥替换密钥？我可以签署图书馆，但随后他们可以使用图书馆篡改应用程序....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:50:07.823

将公钥放入随应用分发的标准数字证书中。然后，Windows 将保证证书的完整性，您可以判断它是否已更改。

当然，硬件和 Windows 本身都处于任何潜在攻击者的控制之下，因此您无法真正阻止特定机器​​的入侵。

这是我曾经分发的程序中的一个示例。从许可证的角度激活该程序时，它会将硬件哈希发送到 Web 服务。这返回了一个包含硬件哈希的自签名证书，然后我的程序在启动时对其进行检查。如果证书以任何方式被更改，程序将停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:50:00.207

我将公钥放在 inetpub 目录之外的目录中，如果您将私钥移出计算机，那么最糟糕的情况就是替换公钥并且它不再可以解密，但您可能会被告知当它无法解密知道发生了什么事情时。

但是，如果有人能够更改您的文件，那么您将遇到更大的问题，即仅更改此文件。

**更新：**

糟糕，我错过了这是一个 WPF 程序。不幸的是，您能做的最好的事情就是将私钥与公钥分开，这样您就可以解密，但如果黑客更改了公钥，应用程序将无法正常运行。

这是使用公钥/私钥的优势之一，可以验证只有您可以进行加密。

另一种选择是从网络服务器获取公钥，但是你有同样的问题，有人可能会欺骗应用程序去错误的服务器，所以它不是完全证明的，它会要求用户具有 Internet 连接，并由您唯一标识他们。

# android - 滚动列表视图

> ID：11225443
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:45:31.117
> 
> 标签：android, listview, scroll

我想滚动列表视图。但列表视图仅在列表视图的项目超过屏幕长度时滚动。但我想滚动列表视图是否列表视图有一项或十项。我使用过此代码但它不起作用，也搜索了很多但没有找到关于这个的教程。所以请建议我如何做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="10dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="100" >

        <EditText
            android:id="@+id/etSearch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="98"
            android:background="@drawable/search_shape"
            android:cursorVisible="false"
            android:gravity="center"
            android:imeOptions="actionSearch"
            android:singleLine="true" >
        </EditText>

        <Button
            android:id="@+id/SearchBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:background="@drawable/search_selector" />
    </LinearLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ListView
            android:id="@+id/listView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/moreBtn"
            android:layout_below="@+id/etSearch"
            android:scrollbarStyle="outsideInset"
            android:layout_marginTop="10dp" >
        </ListView>

        <Button
            android:id="@+id/moreBtn"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="@drawable/more_selector"
            android:visibility="gone" />

        <ProgressBar
            android:id="@+id/progressBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:visibility="invisible" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:50:33.660

我找到了 1 个解决方案，它被称为**Pull-To-Referesh**

[如何实现Android Pull-to-Refresh](https://stackoverflow.com/questions/4583484/how-to-implement-android-pull-to-refresh)

您可以从以下 [https://github.com/erikwt/PullToRefresh-ListView](https://github.com/erikwt/PullToRefresh-ListView)下载（感谢 Erik Wallentinsen），但它无法正常工作。

因此，我对其进行了一些必要的更改并准备了一个适当的工作演示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T11:54:03.937

你可以试试这个 XML 代码。

```
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
   <ListView
   android:id="@+id/listView"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_above="@+id/moreBtn"
   android:layout_below="@+id/etSearch"
   android:scrollbarStyle="outsideInset"
   android:layout_marginTop="10dp" >
   </ListView>
</ScrollView> 
```

# animation - 在 Three.js 中使用来自 COLLADA 文件的解析数据的骨骼动画

> ID：11225445
> 
> 赞同：4
> 
> 时间：2012-06-27T11:45:47.787
> 
> 标签：animation, webgl, three.js, collada

我已经尝试使用示例 COLLADA 解析器 colladaloader.js 并使用从[http://collada.org/owl/browse.php?sess=0&parent=131&expand=0&order=name&curview=0](http://collada.org/owl/browse.php?sess=0&parent=131&expand=0&order=name&curview=0)导入骨骼动画 collada 模型“Seymour_anim2.dae”以 mrdoob.github.com/three.js/examples/webgl_loader_collada.html 和[http://mrdoob.github.com/three.js/examples/webgl_animation_skinning.html](http://mrdoob.github.com/three.js/examples/webgl_animation_skinning.html)为例。加载器似乎在 collada.animations 或 collada.dae.animations 中解析和存储骨架结构和一些骨架动画数据。问题是我无法使用示例中的方法让骨骼动画工作。

现在，我想知道 COLLADA 解析器是否有问题，或者 Three.js 中是否有其他方法/技巧可用于播放我的模型的骨骼动画？我很想听听您是否知道如何在 Three.js 中巧妙地完成这项工作，或者这是否可能。

**编辑：**我现在还使用 GLGE 框架测试了模型，它可以正确加载、渲染和动画。但是，在 Three.js 中为 COLLADA 模型制作骨骼动画会非常好，因为使用 GLGE 开发太耗时且麻烦，而且与 Three.js 相比，GLGE 是相当不活跃的项目。骨骼动画对于增加对虚拟世界的沉浸感非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T22:55:32.510

我自己已经放弃了 Collada 并继续使用附带的 OBJ 加载器。但是在进行到一半时，我发现了一件事可能值得测试。这里似乎有一个替代的 Collada 加载器：[github ColladaLoader2.coffee](https://github.com/rmx/threejs-collada/blob/master/ColladaLoader2.coffee)

希望它工作得更好一些。请告诉我 ：）

# ruby-on-rails - 如何使用 url 参数保持安静

> ID：11225449
> 
> 赞同：0
> 
> 时间：2012-06-27T11:45:59.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在构建 rails 应用程序时遇到问题。假设我有一个 Style 模型，我想在我的页面根 (/) 上列出 5 个特色模型，并在浏览选项中设置列表从最旧到最新，反之亦然。

> [http://example.com/](http://example.com/) - 五个精选 [http://example.com/styles/newest](http://example.com/styles/newest) - 所有最新[http://example.com/styles/oldest](http://example.com/styles/oldest) - 所有最旧

如何编码控制器和路由？我已经为五个特色和所有带有 if 语句的控制器尝试了单独的控制器（类似于 if params[:order] == 'oldest' then @styles = Style.oldest），但这似乎既不工作也不合乎逻辑.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:24:37.997

添加两条自定义路线。路由.rb

```
resources :styles do
  collection do
    get :newest
    get :oldest
  end
end

root :to => 'styles#index' 
```

样式控制器.rb

```
def index
   @styles = Style.last(5)
end

def newest
   @styles = Style.order("created_at desc")
  ...
end

def oldest
  ...
end 
```

建议：保持简单。

# .net - 错误报告工具

> ID：11225452
> 
> 赞同：0
> 
> 时间：2012-06-27T11:46:07.080
> 
> 标签：.net

我正在寻找可以连接到应用程序并跟踪用户一直在做的事情的工具或库：在应用程序的上下文中打开的窗口、执行的操作等等。像 log4j 或 log4net 或......

目的是将该信息附加到堆栈跟踪、平台有用信息等所有内容，并帮助我们修复错误。

有这样的应用吗？

我想要的不是错误跟踪器；我知道很多：Jira、Mantis、Bugzilla、OnTime、VersionOne、Rally……

我真正想要的是一些以某种方式“附加”到我的应用程序的软件与 VisualStudio 2010 Ultimate IntelliTrace 功能或类似 Firefox、Thunderbird 或甚至出现问题时的 Windows。

例如向用户显示一个对话框以发送崩溃或最终错误报告，包括消息和堆栈跟踪（当然），以及导致这种情况的后续步骤的描述。

那真是太好了。

当然我们可以在我们的应用程序中开发它，但是如果那里已经完成并且工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:49:35.367

我知道[Snoop](http://snoopwpf.codeplex.com/)设法将自己附加到正在运行的进程以调试（wpf）绑定和事件。虽然不完全是您正在寻找的工具，但也许您可以查看源代码它是如何工作的并从中做出一些事情？

您没有指定这是针对 WinForms 还是 WPF，所以我假设后者。

# iphone - iPhone/Objective - C - 如何在 UILabel 中显示长字符串的整个文本

> ID：11225460
> 
> 赞同：2
> 
> 时间：2012-06-27T11:46:27.443
> 
> 标签：iphone, objective-c, xcode, nsstring, uilabel

我有一个很长的字符串，如下所示...

```
[[sqrt(221)-10,-sqrt(221)-10],[11,11]],[[rootof([[474368400,237184200,-125944810200,258530778000],[1,0,-472,884,42215 ]])/(sqrt(221)*782707860000)+rootof([[409681800,9099248400,-99876110400,-1875803589000],[1,0,-472,884,42215]])/(sqrt(22100)*782707860 3，rootof（[[[ -  3439170900，-5063826700,864180632700,9670592794500]]，[1,0，-472,884,42215]） -4442729593500],[1,0,-472,884,42215]])/(sqrt(221)*782707860000)*3],[rootof([[474368400,237184200,-125944810200,258530778000],[1,0- 472,884,42215]])/(sqrt(221)*782707860000)*2+rootof([[409681800,9099248400,-99876110400,-1875803589000],[1,0,-472,884,42215]])/(sqrt )*782707860000)*4,rootof([[-3439170900,-50638826700,864180632700,9670592794500],[1,0,-472,884,42215]])/(sqrt(221)*782707(860000)*2+rootof 1477010700,22974524100,-369910322100,-4442729593500],[1,0,-472,884,42215]])/(sqrt(221)*782707860000)*4]],[sqrt(sqrt(221)+15),sqrt(-sqrt(221)+15 )]

```

如何在 UILabel 中显示超过一行 (0) 的整个内容？

此外，虽然字符串中没有换行符（“\n”），但结果显示如下......

```
[[sqrt(221)-10,-sqrt(221)- 
10],[11,11]],[[rootof([[474368400,2 
37184200,- 
125944810200,258530778000],[1, 
0,- 
472,884, 42215]])/(sqrt(221)*78270

```

有什么帮助吗？

PS我可以上传图片但我不允许因为我是新用户...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:49:11.140

```
 textLabel.lineBreakMode = UILineBreakModeWordWrap;
 textLabel.numberOfLines = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:08:54.877

将 UILabel 设置为多行

```
MyLbl.numberOfLines = xxx; 
```

如果您没有足够的空间来设置 UIlabel，那么还将 textView 设置为不可编辑的属性：

```
Mytxt = [[UITextView alloc]initWithFrame:CGRectMake(xx.0, x.0, xx.0,xx.0)];
Mytxt.transform = transform;
Mytxt.adjustsFontSizeToFitWidth = YES;
Mytxt.textColor = [UIColor blackColor];
Mytxt.autoresizingMask=UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

[Mytxt setFont:[UIFont fontWithName:@"Arial" size:xx.0]];
Mytxt.backgroundColor = [UIColor clearColor];
Mytxt.delegate = self;
Mytxt.userInteractionEnabled=YES;
Mytxt.editable=NO; 
```

我希望你能得到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:45:39.953

如果您希望`UILineBreakModeCharacterWrap`您的文本沿多行均匀分布（因此它不会尝试在工作边界处中断），则需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:50:21.857

您可以使用具有不可编辑模式的自动大小的 UITextView 而不是 UILabel （或）

```
CGSize labelSize = yourString sizeWithFont:cellFont     
constrainedToSize:CGSizeMake(190.0f, MAXFLOAT); lineBreakMode:UILineBreakModeWordWrap]; 
```

此标签大小将动态定义您可以分配给标签的标签高度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T11:50:40.260

```
 try this code
    NSString *yourString = @"[[sqrt(221)-10,-sqrt(221)-10],[11,11]],[[rootof([[474368400,237184200,-125944810200,258530778000],[1,0,-472,884,42215]])/(sqrt(221)*782707860000)+rootof([[409681800,9099248400,-99876110400,-1875803589000],[1,0,-472,884,42215]])";
    UILabel *lblNameDesc=[[UILabel alloc] initWithFrame:CGRectMake(55, 10, 250, 21)];
    [lblNameDesc setNumberOfLines:0];
    lblNameDesc.text=yourString;

    [lblNameDesc setBackgroundColor:[UIColor clearColor]];
    [lblNameDesc setTextColor:[UIColor colorWithRed:64.0/255.0 green:64.0/255.0 blue:64.0/255.0 alpha:1.0f]];

    [self.view addSubview:lblNameDesc];
  //  [lblNameDesc release];
    [lblNameDesc sizeToFit]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T11:54:45.230

假设你的字符串是。让您的喜爱和宽度随心所欲：-

```
NSString longString = @"dsjkghsdkjnfgvsdjgsl,v.........................";

CGSize maximumLabelSize = CGSizeMake(200,MAXFLOAT);

CGSize expectedLabelSize = [longString  sizeWithFont:[UIFont fontWithName:@"Aial-BoldMT" size:15.0] constrainedToSize:maximumLabelSize   
                              lineBreakMode:UILineBreakModeWordWrap];

UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, expectedLabelSize.height)];
myLabel.lineBreakMode = UILineBreakModeWordWrap;
myLabel.numberOfLines = 0; 
myLabel.text = longString ; 
```

这可能会帮助你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T12:21:21.920

尝试这个...

```
textLabel.lineBreakMode = YES;
 textLabel.numberOfLines = 10; // or many that you need... 
```

# php - 如何使用 javascript 将数据加载到表单中？

> ID：11225462
> 
> 赞同：0
> 
> 时间：2012-06-27T11:46:29.563
> 
> 标签：php, javascript, ajax, json

我想将数据从 MySql 数据库加载到 HTTP 表单当我在文本中键入时，它应该加载人的姓名

```
<html>
<head>
    <script type="text/javascript">
    function FetchUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    var data = JSON.parse(xmlhttp.responseText);
  }
  }
xmlhttp.open("GET","finduser.php?q="+str,true);
xmlhttp.send();
}
this.form.name.value=data.name;
this.form.age.value=data.age;
</script>
</head>
<body>
<form method="post" >
Id<input type="text"  name="id" size="5" />    </br>
Name<input type="text" id="name" name="name"  onclick="Fetchuser(this.form.id.value)" ></br>
Age<input type="text" id="age" name="" size="2" /></br>
</form>
</body>
</html> 
```

用于此的 PHP 代码。

```
<?php
$q=$_GET["q"];
$con = mysql_connect('localhost', 'root', '125');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("test", $con);

$sql="SELECT * FROM wow WHERE id = '".$q."'";
$resul = json_encode(mysql_query($sql));
echo $resul;
?> 
```

我的问题是如何在文本框中同时获取姓名和年龄。我试过了，但我仍然无法加载数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:52:55.017

您可以使用 json_encode 返回一个包含所有相关字段的 json，并在 javascript 中将每个字段放在它所属的位置。

```
$result = json_encode(mysql_query($sql));
echo $result; // don't forget to push the output or responseText is null. 
```

在javascript中：

```
var data = JSON.parse(xmlhttp.responseText); 
```

然后您使用 data.name_of_the_field 访问您的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:05:50.880

```
 <?php
 $rs=mysql_fetch_object($result );
 $name=$rs->name;
 $age=$rs->age;
 ?>
  Name<input type="text" name="name"  value="<?php echo $name;?>" />
  Age<input type="text" name="" size="2" value="<?php echo $age;?>"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:57:17.600

在您的文本框中放一个赞，`id`这样您就可以通过,`<input id="name"``<input id="age"``document.getElementById("name")``document.getElementById("age")`

# video - 使用 Media Foundation H.264 视频解码器延迟输出

> ID：11225464
> 
> 赞同：3
> 
> 时间：2012-06-27T11:46:43.607
> 
> 标签：video, h.264, ms-media-foundation

我正在使用 H.264 编码器流式传输我的内容，并希望使用 H.264 解码器对内容进行解码。编码拓扑就像

源 --> H.264 编码器 --> NetDump

解码拓扑就像

NetSource --> H.264 解码器 --> EVR

我们能够制作解码拓扑，但输出视频会产生大约 1 秒以上的延迟。请针对该延迟提出一些解决方案。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T09:17:50.587

根据 MSFT 媒体基金会团队的 Matt Andrews 的说法，这是由于 Microsoft [H.264 解码器 MFT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797815%28v=vs.85%29.aspx)中的内部缓冲造成的（请参阅[使用 h264 解码器时的渲染延迟](http://social.msdn.microsoft.com/Forums/en/mediafoundationdevelopment/thread/0d9cd54f-2435-4867-bf15-4c6a0532520f)）。

使用 Windows 8 时，有一种[低延迟模式](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447590%28v=vs.85%29.aspx)可以帮助您。我遇到了同样的问题，完全跳过了 MSFT H.264 Decoder MFT。

# java - Java Swing 递归布局

> ID：11225465
> 
> 赞同：1
> 
> 时间：2012-06-27T11:46:44.593
> 
> 标签：java, swing, layout

我知道这可能看起来像是重复的，但是通过尝试无效/验证/重新验证/重绘我没有得到任何结果，所以请多多包涵。我的面板结构如下所示：

```
JPanel/GridBagLayout (1)
+-- JPanel/BorderLayout
    +-- JPanel/GridBagLayout (2)
    |   +-- JTextField (3)
    |   +-- JComboBox
    +-- JPanel/WhateverLayout
    ... 
```

……等等。在我的子面板`(2)`中，我更改了插图（右侧和底部），并且我想布局整个顶部面板`(1)`。是否有一些简单的方法来布局所有内容（最好从顶部面板`(1)`向下，但任何可行的方法都可以）。现在我已经在所有级别上尝试了无效/验证/重新验证/重新绘制的组合，但似乎没有任何效果（实际上根本没有任何变化）。谢谢！

**编辑：**我发现`GridBagLayout`克隆了`GridBagConstraints`as 组件，所以我的代码无法通过运行 revalidate 和朋友工作的原因是我更新了错误的约束。我在下面找到并添加了解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:37:26.980

`GridBagLayout`克隆`GridBagConstraints`as 组件被添加（这就是为什么改变我原来的一次对布局没有影响），所以我扩展`GridBagLayout`以能够更新实际的约束运行时。下面的代码根据组件的类型设置布局边距，如果“扩展”，这是我用来在两种模式之间切换的方法：

```
public class ExpandableGridBagLayout extends GridBagLayout {

    public void setExpand(boolean expanded) {
        for (Map.Entry<Component, GridBagConstraints> entry : comptable.entrySet()) {
            setExpandedMargin(entry.getKey(), entry.getValue(), expanded);
        }
    }

    private void setExpandedMargin(Component component, GridBagConstraints constraints, boolean expanded) {
        constraints.insets.right = 2;
        if (component instanceof JLabel) {
            constraints.insets.top = expanded ? 3 : 0;
            constraints.insets.bottom = expanded ? 3 : 0;
        } else {
            constraints.insets.bottom = expanded ? 8 : 5;
        }
    }
} 
```

然后我所要做的就是按预期调用`panel.revalidate()`和`(1)`布局工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:29:43.570

仍然不完全确定您的确切上下文，但从您的“答案”来看，您似乎正在动态更改组件约束。要触发受影响部分的重新布局，您需要

*   使约束已更改的子/人无效（注意：使父无效是*不够*的），这将根据需要使层次结构冒泡
*   验证层次结构中的适当容器

片段：

```
ExpandableGridBagLayout bag = panel2.getLayout();
bag.setExpand(true);
for(Component child: panel2.getComponents())
    child.invalidate();
panel1.validate(); 
```

没有公共 api 可以递归地使给定容器下的所有内容无效（invalidateTree 是包私有的）。一个快速的技巧是临时切换父容器的字体（内部消息 invalidateTree）

```
/**
 * Invalidates the component hierarchy below the given container.<p>
 * 
 * This implementation hacks around package private scope of invalidateTree by 
 * exploiting the implementation detail that the method is internally 
 * used by setFont, so we temporary change the font of the given container to trigger
 * its internal call.<p>
 * 
 * @param parent
 */
protected void invalidateTree(Container parent) {
    Font font = parent.getFont();
    parent.setFont(null); 
    parent.setFont(font);
} 
```

**编辑**

不知道这个答案的哪一部分是*不正确*的——显然，如果没有任何详细的知识，我就无法解决你的问题；-)

好奇的我想知道层次结构中的重新验证如何导致有效大/子的重新布局：验证/树显然停在一个有效的组件上。下面是一个代码片段

*   这是一个两级层次结构，一个有两个孩子的父母
*   该动作改变了它脚下姐妹的布局影响属性（我们改变了布局的 v/hgap）并重新验证了父级

结果会有所不同，具体取决于父级的 LayoutManager

*   使用 FlowLayout 什么都不会发生，
*   使用 BoxLayout 它可能会被验证，具体取决于
    *   水平或垂直间隙是否发生了变化*，以及*
    *   盒子的方向

看起来一个有效孩子的重新布局可能是（或不是）更高层重新布局的副作用 - 没有任何保证会发生并且难以预测。我不想依赖任何东西;-)

```
final JComponent sister = new JPanel();
final Border subBorder = BorderFactory.createLineBorder(Color.RED);
sister.setBorder(subBorder);
sister.add(new JTextField(20));
sister.add(new JButton("dummy - do nothing"));

JComponent brother = new JPanel();
brother.setBorder(BorderFactory.createLineBorder(Color.GREEN));
brother.add(new JTextField(20));
// vary the parent's LayoutManager
final JComponent parent = Box.createVerticalBox();
// final JComponent parent = Box.createHorizontalBox();
// final JComponent parent = new JPanel();
parent.add(sister);
parent.add(brother);

// action to simulate a change of child constraints 
Action action = new AbstractAction("change sub constraints") {

    @Override
    public void actionPerformed(ActionEvent e) {
        FlowLayout layout = (FlowLayout) sister.getLayout();
        layout.setHgap(layout.getHgap() * 2);
      //  layout.setVgap(layout.getVgap() * 2);
      //  sister.invalidate();
        parent.revalidate();
    }
};
brother.add(new JButton(action));

JFrame frame = new JFrame("play with validation");
frame.add(parent);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:53:33.090

*   整个 re_layout `JFrame`( `JDialog`ei) 在那里`JFrame#pack()`

*   用于填充容器中的可用区域（在`remove`/之后`add`）在那里`revalidate()`并且`repaint()`

*   您必须决定`Components hierarchy`

`pack()`关于& `(re)validate()`&的代码示例`repaint()`

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class AddComponentsAtRuntime {

    private JFrame f;
    private JPanel panel;
    private JCheckBox checkValidate, checkReValidate, checkRepaint, checkPack;

    public AddComponentsAtRuntime() {
        JButton b = new JButton();
        b.setBackground(Color.red);
        b.setBorder(new LineBorder(Color.black, 2));
        b.setPreferredSize(new Dimension(600, 10));
        panel = new JPanel(new GridLayout(0, 1));
        panel.add(b);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, "Center");
        f.add(getCheckBoxPanel(), "South");
        f.setLocation(200, 200);
        f.pack();
        f.setVisible(true);
    }

    private JPanel getCheckBoxPanel() {
        checkValidate = new JCheckBox("validate");
        checkValidate.setSelected(false);
        checkReValidate = new JCheckBox("revalidate");
        checkReValidate.setSelected(false);
        checkRepaint = new JCheckBox("repaint");
        checkRepaint.setSelected(false);
        checkPack = new JCheckBox("pack");
        checkPack.setSelected(false);
        JButton addComp = new JButton("Add New One");
        addComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton b = new JButton();
                b.setBackground(Color.red);
                b.setBorder(new LineBorder(Color.black, 2));
                b.setPreferredSize(new Dimension(600, 10));
                panel.add(b);
                makeChange();
                System.out.println(" Components Count after Adds :" + panel.getComponentCount());
            }
        });
        JButton removeComp = new JButton("Remove One");
        removeComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int count = panel.getComponentCount();
                if (count > 0) {
                    panel.remove(0);
                }
                makeChange();
                System.out.println(" Components Count after Removes :" + panel.getComponentCount());
            }
        });
        JPanel panel2 = new JPanel();
        panel2.add(checkValidate);
        panel2.add(checkReValidate);
        panel2.add(checkRepaint);
        panel2.add(checkPack);
        panel2.add(addComp);
        panel2.add(removeComp);
        return panel2;
    }

    private void makeChange() {
        if (checkValidate.isSelected()) {
            panel.validate();
        }
        if (checkReValidate.isSelected()) {
            panel.revalidate();
        }
        if (checkRepaint.isSelected()) {
            panel.repaint();
        }
        if (checkPack.isSelected()) {
            f.pack();
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                AddComponentsAtRuntime makingChanges = new AddComponentsAtRuntime();
            }
        });
    }
} 
```

# java - 在将 xml 写入输出文件时想要避免额外的东西

> ID：11225466
> 
> 赞同：0
> 
> 时间：2012-06-27T11:46:45.010
> 
> 标签：java, xml, parsing, jdom

我的问题是，在修改我的 XML 文件后，我使用 JDOM 的 XMLOutputter 将其写入输出 XML 文件时，它会在输出 XML 文件中写入很多额外的内容。我想避免这种情况。

我原来的 xml 片段是：

```
<?xml version="1.0" encoding="ISO-8859-1"?><!DOCTYPE COMMENTARYDOC PUBLIC "-//LEXISNEXIS//DTD GLP Commentarydoc v006//EN" "commentarydoc-norm.dtd"><COMMENTARYDOC xmlns:lnvxe="http://www.lexis-nexis.com/lnvxe" xmlns:lnvx="http://www.lexis-nexis.com/lnvx" xmlns:lnv="http://www.lexis-nexis.com/lnv" xmlns:lnvni="http://www.lexis-nexis.com/lnvni" xmlns:lnci="http://www.lexis-nexis.com/lnci" xmlns:lnlit="http://www.lexis-nexis.com/lnlit" xmlns:lnclx="http://www.lexis-nexis.com/lnclx" xmlns:lncle="http://www.lexis-nexis.com/lncle" xmlns:lndel="http://www.lexis-nexis.com/lndel" xmlns:lngntxt="http://www.lexis-nexis.com/lngntxt" xmlns:lndocmeta="http://www.lexis-nexis.com/lndocmeta" xmlns:glp="http://www.lexis-nexis.com/glp" xmlns:case="http://www.lexis-nexis.com/glp/case" xmlns:leg="http://www.lexis-nexis.com/glp/leg" xmlns:ci="http://www.lexis-nexis.com/ci" xmlns:in="http://www.lexis-nexis.com/glp/in" xmlns:dig="http://www.lexis-nexis.com/glp/dig" xmlns:cttr="http://www.lexis-nexis.com/glp/cttr" xmlns:comm="http://www.lexis-nexis.com/glp/comm" xmlns:frm="http://www.lexis-nexis.com/glp/frm" xmlns:admt="http://www.lexis-nexis.com/glp/admt" xmlns:dict="http://www.lexis-nexis.com/glp/dict" xmlns:jrnl="http://www.lexis-nexis.com/glp/jrnl" xmlns:op="http://www.lexis-nexis.com/glp/op" xmlns:xhtml="http://www.w3c.org/1999/xhtml" xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo" xmlns:nitf="urn:nitf:iptc.org.20010418.NITF"><docinfo partitionnum="COMM1" browseprev="true" browsenext="true"><docinfo:doc-heading>S. 9\. INTERIM MEASURES, ETC. BY COURT</docinfo:doc-heading><docinfo:doc-id>dlac_p01_c02_s09</docinfo:doc-id><docinfo:doc-lang lang="en"/><docinfo:doc-country iso-cc="IN"/><docinfo:hier><docinfo:hierlev role="ancestor"><heading><title>THE ARBITRATION AND CONCILIATION ACT, 1996</title></heading><docinfo:hierlev role="ancestor"><heading><title>PART I ARBITRATION</title></heading><docinfo:hierlev role="ancestor"><heading><title>CHAPTER 2 ARBITRATION AGREEMENT</title></heading><docinfo:hierlev role="ancestor"><heading><title>POWER OF JUDICIAL AUTHORITY TO REFER PARTIES TO ARBITRATION</title></heading><docinfo:hierlev role="me"><heading><title>S. 9\. Interim measures, etc. by court</title></heading></docinfo:hierlev></docinfo:hierlev></docinfo:hierlev></docinfo:hierlev></docinfo:hierlev></docinfo:hier><docinfo:bookseqnum>1100</docinfo:bookseqnum><docinfo:lbu-meta><docinfo:metaitem name="lbu-sourcename" value="Law of Arbitration &#x0026; Conciliation"/></docinfo:lbu-meta><docinfo:selector>Commentary</docinfo:selector></docinfo><comm:info><publication>C R Datta Law of Arbitration &#x0026; Conciliation</publication><pubdate><date year="2007">2007</date> 2007</pubdate><edition>1 Edition 2007</edition><isbn>9788180382505</isbn><copyright>Copyright 2007 LexisNexis Butterworths Wadhwa Nagpur</copyright><contrib><person><name.detail><name.family>Datta</name.family></name.detail></person></contrib></comm:info><comm:body><level leveltype="comm1"><bodytext searchtype="LEGISLATION"><legfragment><leg:level><leg:level-vrnt leveltype="section"><leg:heading inline="true"><desig searchtype="SEC-NUM"><desiglabel>S.</desiglabel><designum>9.</designum></desig><title searchtype="FORM-TITLE"><refpt id="dlacs009" type="ext"/>Interim measures, etc. by court.</title></leg:heading><leg:levelbody><leg:bodytext><pgrp><p><text>&#x2014;A party may, before, or during arbitral proceedings or at any time after the making of the arbitral award but before it is enforced in accordance with <ci:cite searchtype="LEG-REF"><ci:sesslaw><ci:sesslawinfo><ci:jurisinfo><ci:in/></ci:jurisinfo><ci:hier><ci:hierlev label="section" num="36"/></ci:hier></ci:sesslawinfo><ci:sesslawref><ci:standardname normpubcode="IN1996AACA01"/></ci:sesslawref></ci:sesslaw><ci:content>section 36</ci:content></ci:cite>, apply to a court&#x2014;</text></p><l><li><lilabel>&#x0028; <emph typestyle="it">i</emph>&#x0029;</lilabel><p><text>for the appointment of a guardian for a minor or a person of unsound mind for the purposes of arbitral proceedings; or</text></p></li><li><lilabel>&#x0028; <emph typestyle="it">ii</emph>&#x0029;</lilabel><p><text>for an interim measure of protection in respect of any of the following matters, namely :&#x2014;</text><l><li><lilabel>&#x0028; <emph typestyle="it">a</emph>&#x0029;</lilabel><p><text>the preservation, interim custody or sale of any goods which are the subject-matter of the arbitration agreement;</text></p></li><li><lilabel>&#x0028; <emph typestyle="it">b</emph>&#x0029;</lilabel><p><text>securing the amount in dispute in the arbitration;</text></p></li><li><lilabel>&#x0028; <emph typestyle="it">c</emph>&#x0029;</lilabel><p><text>the detention, preservation or inspection of any property or thing which is the subject-matter of the dispute in arbitration, or as to which any question may arise therein and authorising for any of the aforesaid purposes any person to enter upon any land or building in the possession of any party, or authorising any samples to be taken or any observation to be made, or experiment to be tried, which may be necessary or expedient for the purpose of obtaining full information or evidence;</text></p></li><li><lilabel>&#x0028; <emph typestyle="it">d</emph>&#x0029;</lilabel><p><text>interim injunction or the appointment of a receiver;</text></p></li><li><lilabel>&#x0028; <emph typestyle="it">e</emph>&#x0029;</lilabel><p><text>such other interim measure of protection as may appear to the court to be just and convenient,</text></p></li></l></p></li></l><p><text>and the Court shall have the same power for making orders as it has for the purpose of, and in relation to, any proceedings before it.</text></p></pgrp></leg:bodytext></leg:levelbody></leg:level-vrnt></leg:level></legfragment></bodytext><bodytext searchtype="COMMENTARY"><pgrp><p><text><emph typestyle="bf">UNCITRAL Model Law</emph></text></p><p><text>For the text of the related UNCITRAL Model Law, Analytical Commentary on Draft Model Law and UNCITRAL Report on Adoption of Model Laws, see <emph typestyle="it">Appendix 1</emph>.</text></p></pgrp><pgrp><p><text><emph typestyle="bf">COMMENTS</emph></text></p></pgrp><pgrp><p><text><emph typestyle="bf">1\. Interim order by court</emph></text></p><p><text>A party to an Arbitration may apply to Court for Interim Orders. Such an application may be made before, during, or after the proceedings, but before enforcement of the Award. Such a prayer may be made for the appointment of a Guardian of a Minor child or for a person of unsound mind for an interim order for protection, interim custody, sale of goods, securing amount in dispute, detention, preservation or inspection of any property. An order may be made for inspection of the disputed goods or the property or for anything to obtain requisite evidence. Interim injunction may be issued or a receiver may be appointed. Any other relevant orders may be made for protection and preservation of the interests of the parties concerned. Further and other orders may be made as the Court may think it fit and proper.</text></p></pgrp><pgrp><p><text><emph typestyle="bf">2\. Interim measure by court</emph></text></p><p><text><ci:cite searchtype="LEG-REF"><ci:sesslaw><ci:sesslawinfo><ci:jurisinfo><ci:in/></ci:jurisinfo><ci:hier><ci:hierlev label="section" num="9"/></ci:hier></ci:sesslawinfo><ci:sesslawref><ci:standardname normpubcode="IN1996AACA01"/></ci:sesslawref></ci:sesslaw><ci:content>Section 9</ci:content></ci:cite> of the Arbitration &#x0026; Conciliation Act, 1996 vests power upon a Court to pass orders with regard to interim measures for the purpose of safeguarding the interest of the parties to the arbitration proceedings so that the award when made is not frustrated. Clause 6 of the agreement imposed a clear restriction on sale, transfer, charge or to encumber any of their shares or any interest in any such shares from the date of agreement without prior written consent of the appellant. Unless the lis was protected during <emph typestyle="it">lis pendens</emph> it would not only cause great prejudice but also irreparable loss to the appellant. It is the inherent duty of the Court to protect the lis so as to prevent any overt act by any of the parties. The dispute <emph typestyle="it">inter se</emph> the parties having been referred to international arbitration respondent No. 1 and all others deriving right, title and interest in respect of shares, its agents and subsidiaries were restrained from alienating any of the shares till passing of the award in the international arbitration. <emph typestyle="it"> Grid Corporation of Orissa Ltd. v. AES Corporation, </emph><ci:cite searchtype="CASE-REF"><ci:case><ci:caseinfo><ci:casename><ci:party1 name="Grid Corporation of Orissa Ltd."/><ci:procphrase txt="v."/><ci:party2 name="AES Corporation,"/></ci:casename></ci:caseinfo><ci:caseref><ci:reporter value="INCOMCAS"/><ci:volume num="134"/><ci:edition><ci:date year="2006"/></ci:edition><ci:page num="305"/></ci:caseref></ci:case><ci:content>&#x0028;2006&#x0029; 134 Comp Case 305 &#x0028;Ori&#x0029;</ci:content></ci:cite>.</text></p><p><text>If there is an arbitration agreement and a party intends to settle his disputes through arbitration then he may apply to Court for interim orders for the preservation and protection of the subject-matter of the dispute. Such application for interim order can be made before commencement of arbitration proceeding and also when the arbitration proceeding is going on before the Arbitrator. A party may apply to the Arbitrator also for an interim order. The right to make application to the Court for interim order can also be exercised even after the award is given but before its execution.</text></p><p><text>Interim order prayed for may be &#x0028;a&#x0029; for the appointment of a guardian of a minor or a person of unsound mind for the purpose of arbitral proceedings, &#x0028;b&#x0029; for the protection, preservation, interim custody or sale of goods being the subject-matter of the dispute, &#x0028;c&#x0029; directing to secure the amounts in dispute. This may be by directing to furnish bank guarantee or deposit the amount in a bank in a separate account withdrawable only on the order of the Arbitrator, &#x0028;d&#x0029; directing detention, preservation or inspection of the subject-matter of the dispute and, if required, to authorise any person to enter upon or into any land or building in possession of any of the parties or authorise samples to be taken, any experiment to be tried, observations to be obtained which may be necessary or expedient for obtaining full information or evidence to decide the dispute, &#x0028;e&#x0029; interim injunction may be issued in the form which is required in the facts and circumstances of the case and if required a Receiver may be appointed over the disputed subject-matter; &#x0028;f&#x0029; the Arbitrator will have the power to make any other order for the protection of the disputed property as the Court may think just and convenient.</text></p><p><text>In effect, the Court shall have the same power to make orders under <ci:cite searchtype="LEG-REF"><ci:sesslaw><ci:sesslawinfo><ci:jurisinfo><ci:in/></ci:jurisinfo><ci:hier><ci:hierlev label="section" num="9"/></ci:hier></ci:sesslawinfo><ci:sesslawref><ci:standardname normpubcode="IN1996AACA01"/></ci:sesslawref></ci:sesslaw><ci:content>section 9</ci:content></ci:cite> as it has in any other proceedings before the court. In other words, the Court has all the powers under the Code of Civil Procedure and can make orders as the circumstances may require when an application under <ci:cite searchtype="LEG-REF"><ci:sesslaw><ci:sesslawinfo><ci:jurisinfo><ci:in/></ci:jurisinfo><ci:hier><ci:hierlev label="section" num="9"/></ci:hier></ci:sesslawinfo><ci:sesslawref><ci:standardname normpubcode="IN1996AACA01"/></ci:sesslawref></ci:sesslaw><ci:content>Section 9</ci:content></ci:cite> 
```

我的输出 XML 片段是：

```
<level leveltype="comm1" subdoc="false" ln.type="seg" ln.segname="TEXT-1" ln.nsprefix="lnv:">
  <bodytext searchtype="LEGISLATION" ln.nsprefix="lnvxe:">
    <legfragment ln.nsprefix="lnvxe:">
      <leg:level subdoc="false" ln.type="seg" ln.segname="LEG-TEXT-1" ln.nsprefix="lnv:">
        <leg:level-vrnt leveltype="section" subdoc="false" ln.nsprefix="lnvxe:">
          <leg:heading inline="true" subdoc="false" ln.nsprefix="lnvxe:">
            <desig searchtype="SEC-NUM" ln.nsprefix="lnvxe:">
              <desiglabel ln.nsprefix="lnvxe:">S.</desiglabel>
              <designum ln.nsprefix="lnvxe:">9.</designum>
            </desig>
            <title searchtype="FORM-TITLE" ln.nsprefix="lnvxe:">
              <refpt id="dlacs009" type="ext" ln.nsprefix="NONE" />
              Interim measures, etc. by court.
            </title>
          </leg:heading>
          <leg:levelbody ln.nsprefix="lnvxe:">
            <leg:bodytext ln.nsprefix="lnvxe:">
              <pgrp subdoc="false" ln.nsprefix="lnvxe:">
                <p ln.nsprefix="NONE">
                  <text ln.nsprefix="lnvxe:">
                    â€”A party may, before, or during arbitral proceedings or at any time after the making of the arbitral award but before it is enforced in accordance with
                    <ci:cite searchtype="LEG-REF" srcstatus="normal" impcit="main" pub="none" pub-status="none" loadable="1" historycite="0" validate="1" xlink.show="replace" xlink.actuate="user" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                      <ci:sesslaw status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                        <ci:sesslawinfo status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                          <ci:jurisinfo status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                            <ci:in status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
                          </ci:jurisinfo>
                          <ci:hier status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                            <ci:hierlev label="section" num="36" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
                          </ci:hier>
                        </ci:sesslawinfo>
                        <ci:sesslawref official="0" regional="0" publicdomain="0" xlink.show="replace" xlink.actuate="user" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                          <ci:standardname normpubcode="IN1996AACA01" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
                        </ci:sesslawref>
                      </ci:sesslaw>
                      <ci:content popname="0" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">section 36</ci:content>
                    </ci:cite>
                    , apply to a courtâ€”
                  </text>
                </p>
                <l ln.nsprefix="lnvxe:" type="def">
                  <li ln.nsprefix="lnvxe:">
                    <lilabel ln.nsprefix="lnvxe:">
                      (
                      <emph typestyle="it" ln.nsprefix="NONE">i</emph>
                      )
                    </lilabel>
                    <p ln.nsprefix="NONE">
                      <text ln.nsprefix="lnvxe:">for the appointment of a guardian for a minor or a person of unsound mind for the purposes of arbitral proceedings; or</text>
                    </p>
                  </li>
                  <li ln.nsprefix="lnvxe:">
                    <lilabel ln.nsprefix="lnvxe:">
                      (
                      <emph typestyle="it" ln.nsprefix="NONE">ii</emph>
                      )
                    </lilabel>
                    <p ln.nsprefix="NONE">
                      <text ln.nsprefix="lnvxe:">for an interim measure of protection in respect of any of the following matters, namely :â€”&lt;/text>
                      <l ln.nsprefix="lnvxe:" type="def">
                        <li ln.nsprefix="lnvxe:">
                          <lilabel ln.nsprefix="lnvxe:">
                            (
                            <emph typestyle="it" ln.nsprefix="NONE">a</emph>
                            )
                          </lilabel>
                          <p ln.nsprefix="NONE">
                            <text ln.nsprefix="lnvxe:">the preservation, interim custody or sale of any goods which are the subject-matter of the arbitration agreement;</text>
                          </p>
                        </li>
                        <li ln.nsprefix="lnvxe:">
                          <lilabel ln.nsprefix="lnvxe:">
                            (
                            <emph typestyle="it" ln.nsprefix="NONE">b</emph>
                            )
                          </lilabel>
                          <p ln.nsprefix="NONE">
                            <text ln.nsprefix="lnvxe:">securing the amount in dispute in the arbitration;</text>
                          </p>
                        </li>
                        <li ln.nsprefix="lnvxe:">
                          <lilabel ln.nsprefix="lnvxe:">
                            (
                            <emph typestyle="it" ln.nsprefix="NONE">c</emph>
                            )
                          </lilabel>
                          <p ln.nsprefix="NONE">
                            <text ln.nsprefix="lnvxe:">the detention, preservation or inspection of any property or thing which is the subject-matter of the dispute in arbitration, or as to which any question may arise therein and authorising for any of the aforesaid purposes any person to enter upon any land or building in the possession of any party, or authorising any samples to be taken or any observation to be made, or experiment to be tried, which may be necessary or expedient for the purpose of obtaining full information or evidence;</text>
                          </p>
                        </li>
                        <li ln.nsprefix="lnvxe:">
                          <lilabel ln.nsprefix="lnvxe:">
                            (
                            <emph typestyle="it" ln.nsprefix="NONE">d</emph>
                            )
                          </lilabel>
                          <p ln.nsprefix="NONE">
                            <text ln.nsprefix="lnvxe:">interim injunction or the appointment of a receiver;</text>
                          </p>
                        </li>
                        <li ln.nsprefix="lnvxe:">
                          <lilabel ln.nsprefix="lnvxe:">
                            (
                            <emph typestyle="it" ln.nsprefix="NONE">e</emph>
                            )
                          </lilabel>
                          <p ln.nsprefix="NONE">
                            <text ln.nsprefix="lnvxe:">such other interim measure of protection as may appear to the court to be just and convenient,</text>
                          </p>
                        </li>
                      </l>
                    </p>
                  </li>
                </l>
                <p ln.nsprefix="NONE">
                  <text ln.nsprefix="lnvxe:">and the Court shall have the same power for making orders as it has for the purpose of, and in relation to, any proceedings before it.</text>
                </p>
              </pgrp>
            </leg:bodytext>
          </leg:levelbody>
        </leg:level-vrnt>
      </leg:level>
    </legfragment>
  </bodytext>
  <bodytext searchtype="COMMENTARY" ln.nsprefix="lnvxe:">
    <pgrp subdoc="false" ln.nsprefix="lnvxe:">
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          <emph typestyle="bf" ln.nsprefix="NONE">UNCITRAL Model Law</emph>
        </text>
      </p>
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          For the text of the related UNCITRAL Model Law, Analytical Commentary on Draft Model Law and UNCITRAL Report on Adoption of Model Laws, see
          <emph typestyle="it" ln.nsprefix="NONE">Appendix 1</emph>
          .
        </text>
      </p>
    </pgrp>
    <pgrp subdoc="false" ln.nsprefix="lnvxe:">
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          <emph typestyle="bf" ln.nsprefix="NONE">COMMENTS</emph>
        </text>
      </p>
    </pgrp>
    <pgrp subdoc="false" ln.nsprefix="lnvxe:">
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          <emph typestyle="bf" ln.nsprefix="NONE">1\. Interim order by court</emph>
        </text>
      </p>
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">A party to an Arbitration may apply to Court for Interim Orders. Such an application may be made before, during, or after the proceedings, but before enforcement of the Award. Such a prayer may be made for the appointment of a Guardian of a Minor child or for a person of unsound mind for an interim order for protection, interim custody, sale of goods, securing amount in dispute, detention, preservation or inspection of any property. An order may be made for inspection of the disputed goods or the property or for anything to obtain requisite evidence. Interim injunction may be issued or a receiver may be appointed. Any other relevant orders may be made for protection and preservation of the interests of the parties concerned. Further and other orders may be made as the Court may think it fit and proper.</text>
      </p>
    </pgrp>
    <pgrp subdoc="false" ln.nsprefix="lnvxe:">
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          <emph typestyle="bf" ln.nsprefix="NONE">2\. Interim measure by court</emph>
        </text>
      </p>
      <p ln.nsprefix="NONE">
        <text ln.nsprefix="lnvxe:">
          <ci:cite searchtype="LEG-REF" srcstatus="normal" impcit="main" pub="none" pub-status="none" loadable="1" historycite="0" validate="1" xlink.show="replace" xlink.actuate="user" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
            <ci:sesslaw status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
              <ci:sesslawinfo status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                <ci:jurisinfo status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                  <ci:in status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
                </ci:jurisinfo>
                <ci:hier status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                  <ci:hierlev label="section" num="9" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
                </ci:hier>
              </ci:sesslawinfo>
              <ci:sesslawref official="0" regional="0" publicdomain="0" xlink.show="replace" xlink.actuate="user" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">
                <ci:standardname normpubcode="IN1996AACA01" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:" />
              </ci:sesslawref>
            </ci:sesslaw>
            <ci:content popname="0" status="valid" generated="0" attreq="0" ln.nsprefix="lnci:">Section 9</ci:content>
          </ci:cite> 
```

我的代码是：

```
SAXBuilder builder = new SAXBuilder();
    builder.setExpandEntities(false);
    File xmlFile = new File("dlac_p01_c02_s09.xml");

    try {

        Document document = (Document) builder.build(xmlFile);
        Element rootNode = document.getRootElement();

        listChildren(rootNode, 0);

        XMLOutputter xmlOutput = new XMLOutputter();
        xmlOutput.setFormat(Format.getPrettyFormat());
        xmlOutput.output(document, new FileOutputStream(
                "dlac_p01_c02_s09_output.xml"));

    } catch (IOException io) {
        System.out.println(io.getMessage());
    } catch (JDOMException jdomex) {
        System.out.println(jdomex.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:43:08.230

只需摆脱以下行： xmlOutput.setFormat(Format.getPrettyFormat());

该行告诉 JDOM 将输出重新格式化为漂亮。您需要默认的“原始”格式，因此不需要该行。

编辑：嗯，你没有给我们完整的输入......你的“原始”XML 示例不完整。还必须有一个 DTD 或 XMLSchema，并且有很多缺少的命名空间声明。因此，您必须拥有比您在问题描述中提供的更多的数据......

再次编辑：使用 JDOM 2.0.2 并阅读 setSpecifiedAttributesOnly(boolean)：

[http://www.jdom.org/docs/apidocs/org/jdom2/output/Format.html#setSpecifiedAttributesOnly(boolean](http://www.jdom.org/docs/apidocs/org/jdom2/output/Format.html#setSpecifiedAttributesOnly(boolean) )

另请参阅[https://github.com/hunterhacker/jdom/issues/5](https://github.com/hunterhacker/jdom/issues/5)和[https://github.com/hunterhacker/jdom/issues/66](https://github.com/hunterhacker/jdom/issues/66)

罗尔夫

# php - phpinfo 字段的来源

> ID：11225475
> 
> 赞同：3
> 
> 时间：2012-06-27T11:47:05.383
> 
> 标签：php

有没有办法知道给定的 PHP 配置属性在哪里设置？

当我运行时，`phpinfo()`我得到一个带有值的属性列表，例如：

`max_input_time 60 120`

这里我知道**max_input_time**的实际值为120。

有没有办法知道这个值是在哪里设置的？全局 php.ini？本地 php.ini？硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:51:36.167

它就在输出的顶部。查找“加载的配置文件”和“已解析的其他 .ini 文件”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:27:37.847

无法区分选项是通过 ini_set、.htaccess php_value 还是 php.ini 设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:57:23.477

主设置来自 PHP 配置文件 (php.ini)。您可以在“加载的配置文件”部分的顶部附近找到此文件的源（将显示为“/etc/php5/cgi/php.ini”或“c:\Program Files\php5\php.ini” （在 PHP 5.2 之前，该值显示在“配置文件（php.ini）路径”中）

本地设置来自三个地方；apache 配置中的指令（httpd.conf 或 vhosts.conf 等）、.htaccess 中的指令或 pho_info() 调用之前的 ini_set()。

另一个要查看的地方在 php_info - 顶部表“已解析的其他 .ini 文件”中声明 - 也可以在那里检查。

# hadoop - Hadoop MR 应用程序中的 Reducer 动态数量

> ID：11225477
> 
> 赞同：1
> 
> 时间：2012-06-27T11:47:15.493
> 
> 标签：hadoop, mapreduce

提交作业后，是否有任何方法可以设置减少任务的数量？比如我需要根据起始字母来收集英文单词，我可以直接将reduce任务的数量设置为26。但是万一出现我无法预先确定所需reducer数量的情况，有什么方法可以完成要求？这里的要求与集群上的节点数量无关，它只取决于正在处理的密钥。例如，每次遇到新键时，reducer 的数量都会增加 1。提前感谢您的任何支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:19:42.627

> 提交作业后，是否有任何方法可以设置减少任务的数量？

不

> 比如我需要根据起始字母来收集英文单词，我可以直接设置reduce任务数为26。

即使在上述场景中，您也不需要 26 个减速器，而只需 1 个减速器。Hadoop 框架为每个键一次又一次地调用reduce 函数。[MultipleOutputFormat](http://hadoop.apache.org/mapreduce/docs/r0.21.0/api/org/apache/hadoop/mapred/lib/MultipleOutputFormat.html)可用于根据键/值对（第一个字母表）将单词写入不同的文件。

作业的 reducer 数量的标准应该是它正在处理的数据量。另外，请记住，花费最多时间的减速器将决定完成工作的时间。

# python - python中的任何语音到文本转换库或api？

> ID：11225478
> 
> 赞同：2
> 
> 时间：2012-06-27T11:47:17.713
> 
> 标签：python, speech-recognition, speech-to-text

我正在为我正在开发的应用程序将语音转换为文本。

我可以使用任何语音到文本转换的开源库或 api 吗？

寻找答案:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:03:51.250

Pocketsphinx [http://cmusphinx.sourceforge.net](http://cmusphinx.sourceforge.net)有 python 绑定。有关更多详细信息，请参阅示例

[http://cmusphinx.sourceforge.net/wiki/gstreamer](http://cmusphinx.sourceforge.net/wiki/gstreamer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:50:39.943

你可以试试蜻蜓-

[http://code.google.com/p/dragonfly/](http://code.google.com/p/dragonfly/)

# tridion - DCP - 缺少组件

> ID：11225484
> 
> 赞同：4
> 
> 时间：2012-06-27T11:47:38.330
> 
> 标签：tridion

不要问我怎么做，但我的情况是，我发布的 DCP 的组件 ID 不再存在于 Tridion 中！

我知道 GUI 会阻止你删除一个组件，如果它已发布但不知何故（也许取消发布失败但 CM 仍然删除了该组件？？？），它们已从 CM 中删除，现在我在代理中有大量 DCP我摆脱不了！

有人经历过吗？除了手动更新数据库之外，无论如何要纠正？

这是 Tridion 2011 设置，单一部署者，单一代理数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T11:58:43.093

解决此问题的最常见**支持**方法是手动创建一个传输包以删除有问题的 DCP。

所以：

1.  在 cd_deployer_conf.xml 中将 Cleanup 设置为 False
2.  取消发布任何 DCP
3.  捕获传输 zip 文件
4.  打开 zip 中的 instructions.xml
5.  将其更改为指向您的 DCP
6.  将更新的 zip 文件拖放到部署者的传入文件夹中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T20:05:01.220

赞美 Puf 的创造力。我通过 Tridion 客户支持检查了他的方法 - 尽管他们说这是一个灰色区域 - 他们会允许这样做。

唯一的选择是创建一个新的代理数据库并发布已经发布的所有内容。然后您可以将其与实时数据库交换。

# visual-studio-2010 - 如何将按钮添加到杀死进程的 Visual Studio

> ID：11225486
> 
> 赞同：0
> 
> 时间：2012-06-27T11:47:46.257
> 
> 标签：visual-studio-2010, process, kill

我必须经常杀死我的开发人员机器上的几个进程（服务）来释放它使用的内存。而且我无法关闭它们。目前我在 ProcessExplorer 中手动执行此操作，但我认为应该有更自动的方式。
我认为最好的方法是向 Visual Studio 添加工具按钮（我已经添加了回收 IIS 的按钮）。

如何添加将按名称杀死少数进程的工具按钮（例如 owstimer.exe 和 w3wp.exe）。或者也许你知道一个可以帮助我的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:12:19.677

最简单的方法是在 Visual Studio 中创建一个宏，它枚举进程并杀死与您的要求相对应的进程。

另一种解决方案是创建一个自定义 .bat 文件，并调用`taskkill /im thexe.exe /f`. 然后在 Visual Studio 中添加自定义工具中的条目。

除了 taskkill，你还可以做一个清洁器`net stop OWSTIMER`或`iisreset /stop`.

这将避免杀死应用程序，并正确关闭服务。

最后一句话，一些 Visual Studio 扩展（我认为是 WSPBuilder 和/或 CKSDev）添加了回收 SharePoint 进程的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:19:00.817

如果您想从任务管理器中终止进程，请尝试以下代码：

```
 foreach (Process p in System.Diagnostics.Process.GetProcessesByName("yourprocess name"))
 { 
    try 
    {    
       p.Kill(); 
       p.WaitForExit(); // possibly with a timeout 
    } 
    catch (Win32Exception winException) 
    { 
       // process was terminating or can't be terminated - deal with it 
    } 

    catch (InvalidOperationException invalidException) 
    { 
      // process has already exited - might be able to let this one go 
    } 
 } 
```

并添加这两个命名空间：

```
using System.Diagnostics; 
using System.ComponentModel; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:22:20.877

您还可以编写一个 kill bat/cmd 文件，您可以从 Visual Studio 的工具菜单中执行该文件。

[Sysinternals-Microsofts Process Explorer](http://technet.microsoft.com/de-de/sysinternals/bb896653)有一个命令行 exe pskill.exe，可以通过命令行参数完成这项工作......

# database - 进行 DB 转储时的损坏

> ID：11225487
> 
> 赞同：0
> 
> 时间：2012-06-27T11:47:48.923
> 
> 标签：database, sybase, dump, corruption

当用户同时使用数据库时，从 sybase 服务器获取数据库转储时是否可能出现损坏？
假设我发出

```
dump database MyDB to "compress::MyDB.dmp" 
```

数据库大小很大，因此转储可能需要几分钟才能完成。
在转储期间，用户发出：

```
insert data into table X
insert data into table Y 
```

因此，当在表 X 和 Y 中插入新数据时，表 X 可能已经被转储。因此，转储可能包含先前的表 X 和新的表 Y，这是损坏的。
这是可能的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:22:29.457

我找到了几个链接供您查看：

*   [http://www.sybaseteam.com/showthread.php?tid=506](http://www.sybaseteam.com/showthread.php?tid=506)
*   [http://sybaseadmin.blogspot.com/2011/01/dump-database-three-phases.html](http://sybaseadmin.blogspot.com/2011/01/dump-database-three-phases.html)

您应该能够在实时数据库上运行 sybase 转储，即使在插入和更新仍在继续时也是如此。所有更改都应在转储的最后同步以获取最新更改。

# python - Numpy/Python：Meshgrid除法运算：MemoryError

> ID：11225488
> 
> 赞同：2
> 
> 时间：2012-06-27T11:47:50.780
> 
> 标签：python, numpy, division

我正在用 numpy 编程一个神经域，对于 100*100 个神经元的映射，我需要管理一个 10000*10000 连接映射。

所以我用meshgrid创建了我的连接图，并尝试应用墨西哥帽子功能的改编。在这里，你有你可以尝试的代码：如果你输入`taille = 60`or `taille = 70`（神经图的宽度），它会工作（在我的电脑上，没问题）但是，如果你尝试使用`taille = 100`，你会得到一个 MemoryError。

```
import numpy as np

def connection_map4(width, se1, se2, K, inh):
    x = np.arange(0, width**2, 1)
    y = np.arange(0, width**2, 1)
    X,Y = np.meshgrid(x, y)
    print "Meshgrid cree"
    A1 = 1.0 + inh
    A2 = inh
    # exp(|x-xc|/b + |y-yc|) -> Mexican Hat equation
    # 2D/1D transformation relation: i = width.y + x
    # ligne = (X/witdh - Y/width)**2
    ligne = (X-Y)/width ## empirically, it's the division that doesn't pass.
    print "avant carre"
    ligne *= ligne
    print "ligne"
    colonne = (X%width-Y%width)**2

    print "colonne"
    M1 = A1*np.exp(-(  (colonne)/(2*se1**2) + (ligne)/(2*se2**2) ) )
    print "Premiere operation finie"
    M2 = -A2*np.exp(-(  (colonne)/(2*(K*se1)**2) + (ligne)/(2*(K*se2)**2) ) )
    print "Seconde operation finie"
    return(M1+M2)

taille = 100    
connection_map4(taille, 7.5, 4.0, 2.0, 2.0) 
```

根据经验，经过一些尝试调试，我已经将meshgrid上的每个操作分开了，似乎是除法和取模没有通过。

有没有解决方案来进行这种划分？我真的不想使用循环并减慢计算速度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T13:24:31.393

numpy 数组的基本算术运算会生成副本。

```
>>> a = numpy.arange(10)
>>> b = a + 1
>>> c = b + 1
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> b
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10])
>>> c
array([ 2,  3,  4,  5,  6,  7,  8,  9, 10, 11]) 
```

在我的机器上，一个 10000x10000 的整数数组占用了 800 MB——几乎是一个千兆字节。你有两个，`X`和`Y`，减法运算产生另一个。然后这个部门又做了一个......我想你可以看到这是怎么回事。

我的建议是尝试就地进行操作。您可以通过使用相应的`numpy`内置函数并指定一个`out`值来执行此操作。

```
>>> d = numpy.subtract(c, 1, out=c)
>>> c
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10])
>>> d[0] = 5
>>> c
array([ 5,  2,  3,  4,  5,  6,  7,  8,  9, 10]) 
```

如您所见，`d`并`c`引用相同的数据。当然，实现相同效果的更简单方法是使用就地操作。

```
>>> c -= 1
>>> c
array([4, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> d
array([4, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

由于您没有创建副本，因此这种方法应该较少占用内存。创建尽可能少的 800 MB 数组 - 您已经有两个 (`X`和`Y`)，因此您可能已经在推动计算机内存容量的上限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:50:42.540

因此，即使我使用就地操作，我也使用了超过 2GB 的空间。事实上，我记得 32 位应用程序在 Windows 上使用的 RAM 不能超过 2GB。所以我下载了 64 位的 Python 和 64 位的 Numpy（可在[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)找到）。请注意，Numpy 在 64 位中不存在，这对于计算库来说很奇怪。它现在有效！我希望这对其他人有用。

# sql - 根据条件从sql中的多行中选择一行

> ID：11225491
> 
> 赞同：2
> 
> 时间：2012-06-27T11:47:59.550
> 
> 标签：sql, sql-server, sql-server-2008

我在 sql 2008 中有一个名为 tblEmployeeAttendance 的表 ![在此处输入图像描述](../Images/04f882d204a5d1c85405828f06c99755.png)

这是员工一日出勤的一些虚拟数据，例如

![在此处输入图像描述](../Images/843f64589926472ba3a6fef617f30e40.png)

这里AI指出勤，AO指出勤，BO指BreakIn，BI指BreakOut。员工一天可以有多行。第一行应该是AI，最后一行应该是AO，其他行将是BreakIn，BreakOut顺序（即表示 BreakIn-BreakOut-BreakIn.....)。

我的预期输出是这样的

![在此处输入图像描述](../Images/77c151bc14854ce6ec15d4c4dab035b5.png)

我需要一个 sql 查询，它将每个日期返回一行，并返回必须包含 AttendanceIn 和 AttendanceOut 时间的数据取决于 strRemark（AI 和 AO）。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:55:30.890

```
SELECT 
 intEmployeeeId,
 dteAttendanceDate as 'Attendance Date'
 min(dteAttendanceTime) as 'Attendance In'
 max(dteAttendanceTime) as 'Attendance Out'
FROM
 tblEmployeeAttendance
GROUP BY
 intEmployeeeId,
 dteAttendanceDate 
```

您可能不需要 AI 和 AO 检查，因为时间总是在一天的另一端。

# symfony - symfony2 中的双重翻译

> ID：11225497
> 
> 赞同：3
> 
> 时间：2012-06-27T11:48:23.263
> 
> 标签：symfony, translation, twig

我尝试使用简单的验证器翻译。我的文件：

验证.yml：

```
Some\UserBundle\Entity\Address:
    properties:
        name:
            - MaxLength:  {limit: 2, message: "some_user.max_length" } 
```

和验证器.pl.yml：

```
some_user:
    max_length: Wartość jest zbyt długa 
```

在 ajax 加载的树枝文件中，我有这个：

```
{{ form_error(form) }} 
```

当我尝试我的验证器时，应用程序会抛出这个：

```
An exception has been thrown during the rendering of a template ("Unable to choose a translation for "Wartość jest zbyt długa" with locale "pl".") 
```

好像是双重翻译？有任何想法吗？

我在行动中找到了解决方法：

```
$errorList = $this->get('validator')->validate($address);
$errors = "";
if (count($errorList) > 0) {
    foreach ($errorList as $err) {
        $errors.= $this->get('translator')
                    ->trans($err->getMessage(), array(), 'validators') . "\n";
    }

} 
```

但我认为它的方式很糟糕。

好像在树枝上翻译了两次……但是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:05:33.093

这是“多元化”的问题

validators.pl.yml 应该如下所示：

```
Some\UserBundle\Entity\Address:
properties:
    name:
        - MaxLength:  {limit: 2, message: "some_user.max_length|some_user.max_length_s" } 
```

但现在，树枝只渲染：

```
<ul><li>some_user.max_length_s</li></ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:53:20.957

我知道自从你问这个问题以来已经很久了，但我刚刚遇到了同样的问题，所以希望这对其他人有用：

您的**validators.pl.yml**应如下所示：

```
Some\UserBundle\Entity\Address:
properties:
    name:
        - MaxLength:  {limit: 2, message: "some_user.max_length" } 
```

然后管理翻译的文件，假设**validators.pl.xliff**应该如下所示：

```
...

<trans-unit id="1">
    <source>some_user.max_length</source>
    <target>Your text|Your plural text</target>
</trans-unit>

... 
```

现在将正确渲染树枝中的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T08:21:42.300

你应该检查一下`PluralizationRules.php`你的语言是如何定义复数的。根据[unicode](http://unicode.org/cldr/charts/supplemental/language_plural_rules.html#pl)，您应该提供 3 个转换选项，而不是 2。因为您提供了 2 并且数据需要第三个，所以抛出了异常（`InvalidArgumentException`）。我发现异常消息有点误导:)

# html - 网址在打印中显示，为什么？

> ID：11225499
> 
> 赞同：0
> 
> 时间：2012-06-27T11:48:25.963
> 
> 标签：html, css

打印页面时，显示链接的url，有人可以告诉我为什么吗？

它是一个链接，它应该只像往常一样输出链接文本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:13:02.340

如果您正在使用 HTML5 Boilerplate，请查找以下行：

```
a[href]:after { content: " (" attr(href) ")"; } 
```

导致 URL 打印

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:49:17.900

那是打印机设置。您可以在打印时在打印属性中将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:32:55.880

我不太确定，但也许这个媒体查询会起作用：

```
@media print {
    a:after {
        content: "";
        }
    } 
```

# html - CSS无序列表项未完全占据无序列表

> ID：11225501
> 
> 赞同：-2
> 
> 时间：2012-06-27T11:48:29.267
> 
> 标签：html, css

我基本上创建了一个下拉菜单，使用`<ul>`和垂直排列`<li>`的项目。`<li>`然而，这些`<li>`项目并没有完全占据`<ul>`，左侧有一个未占用空间的垂直条。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:49:49.817

`margin`,`padding`和`border`, 盒模型性质。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:50:20.997

这可能是 .css 边距或填充`li`。发布您的代码示例，以便我们查看问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:56:51.303

它可能是元素的边距和填充。

尝试：

```
ul, li{
    margin: 0;
    padding: 0;
} 
```

**编辑**

或尝试：

```
ul{
    display: inline;
} 
```

# javascript - 在 window.location.hash 中使用斜线

> ID：11225506
> 
> 赞同：6
> 
> 时间：2012-06-27T11:48:48.637
> 
> 标签：javascript, jquery-mobile, hash

如果我像这样更改哈希：`window.location.hash = "main/0/sub/1/na/false";`. 浏览器中的地址更改为`http://mysite.com/#main/0/sub/1/na/false`。Page 的 onhashchange 函数触发，一切正常。

但是，在 Firebug 中，我可以看到我也在发送一个请求到：`http://mysite.com/main/0/sub/1/na/false`... URL without hash，这导致控制台中出现静默 404。

当我调试时，我发现它发生在这`window.location.hash`一点上。

但是，如果我像这样更改哈希：`window.location.hash = "main=0&sub=1&na=false";`不会发送额外的请求。

为什么在第一个示例中发送附加请求？

**更新：** 我注意到它`window.location.hash`在（期间？）之后和之前发送请求`$(window).bind('hashchange')`。例如，如果我有...

```
window.location.hash = 'main/0/sub/1/na/false'; // Breakpoint 1 in Firebug

$(window).bind('hashchange', function(e) {
    e.preventDefault();   // Breakpoint 2 in Firebug
    e.stopPropagation();
}); 
```

当它在断点 1 处停止时，不会发送任何请求。当它在断点 2 处停止时，请求已经发送。

我可以在 Apache Tomcat 中看到请求也正在发送。

我要补充一点，我已经插入了 jQuery 和 jQuery Mobile。

**更新 2：** 删除 jQuery Mobile 解决了这个问题。但是，我需要它：/

**更新 3**

如果有人感兴趣：使用 jQuery Mobile：http: [//jsfiddle.net/pioSko/hz5PU/3/](http://jsfiddle.net/pioSko/hz5PU/3/)

没有 jQuery Mobile：http: [//jsfiddle.net/pioSko/hz5PU/4/](http://jsfiddle.net/pioSko/hz5PU/4/)

打开 Firebug 或其他调试应用程序并测试链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:05:13.947

我在使用[History.js](https://github.com/balupton/History.js/)时遇到了类似的问题。我认为这是该脚本的预期行为，因为它旨在使 URL 漂亮（非散列），同时也不重新加载页面。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-27T11:52:52.233

我在这里赌一把。我很确定在散列后使用斜杠是无效的 URL，而 Firefox 可能正试图通过删除散列来弥补这一点，使之成为有效的 URL。

# css - IE8 嵌入字体在刷新时消失

> ID：11225508
> 
> 赞同：0
> 
> 时间：2012-06-27T11:48:51.750
> 
> 标签：css, internet-explorer, fonts, refresh, font-face

我正在使用嵌入式字体`@font-face`，它工作正常......**直到**在 IE8 上（没有尝试过更新版本），当你做一些疯狂的事情，比如刷新或使用向后和向前按钮重新加载页面。

更糟糕的是，它甚至没有默认为我的字体堆栈中的字体，它似乎直接进入 Arial（有一些严重的间距问题）。

可以在这里看到一个活生生的例子：

[http://rcnhca.org.uk/sites/first_steps/](http://rcnhca.org.uk/sites/first_steps/)

为了您的观赏乐趣的图像比较：

![图像比较](../Images/f9f8f198b4b6218e4b960914d7c090a9.png)

相关的 CSS 供您阅读：

```
@font-face {
    font-family: 'DroidSerifRegular';
    src: url('DroidSerif-Regular-webfont.eot');
    src: url('DroidSerif-Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('DroidSerif-Regular-webfont.woff') format('woff'),
         url('DroidSerif-Regular-webfont.ttf') format('truetype'),
         url('DroidSerif-Regular-webfont.svg#DroidSerifRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

**一个有趣的注释：**

不知何故，[谷歌网络字体](http://www.google.com/webfonts/)似乎不受这个问题的影响。这让我相信，虽然这可能是一个浏览器错误，但肯定有一个解决方法。

如果您想知道为什么我不只是使用他们的服务；我不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:05:11.307

如果您不能使用 Google 字体，那么可能是您的问题的不同解决方案。[请参阅此处](http://cufon.shoqolate.com/generate/)的CUFON 库。它将常规 TTF 字体转换为 javascript 文件，您可以下载并嵌入到 HTML 代码中，然后将特定的 DOM 元素（由您选择）替换为`canvas`标签。

# java - Java GridBag 布局无法正常工作

> ID：11225511
> 
> 赞同：3
> 
> 时间：2012-06-27T11:48:56.830
> 
> 标签：java, swing, user-interface, gridbaglayout

我有两张桌子和两个按钮。我希望 table-1 位于第一列并且宽度为 3 个单位，然后我希望表格右侧的两个按钮更窄（宽度为 1 个单位），我希望按钮一个在顶部，按钮 2 在底端。现在在这些按钮的右侧，我希望另一个表（表 2）再次宽 3 个单位。为此，我使用了以下约束：

```
 //table1
        c = new GridBagConstraints(0, 0, 3, 2, 1, 1,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL,
                new Insets(0, 0, 0, 0), 0, 0);
        c.fill = GridBagConstraints.BOTH;
        outerPanel.add(all_app_scrollpane, c);

        //button1
        c = new GridBagConstraints(3, 0, 1, 1, 1, 1,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL,
                new Insets(0, 0, 0, 0), 0, 0);
        outerPanel.add(addButton, c);

        //button2
        c = new GridBagConstraints(3, 1, 1, 1, 1, 1,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL,
                new Insets(0, 0, 0, 0), 0, 0);
        outerPanel.add(removeButton, c);

        //table2
        c = new GridBagConstraints(4, 0, 3, 2, 1, 1,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL,
                new Insets(0, 0, 0, 0), 0, 0);
        c.fill = GridBagConstraints.BOTH;
        outerPanel.add(curr_app_scrollpane, c); 
```

让我们看一下table1的GridBagCONstraints。据我所知，第一个参数声明它将从 0\. 列开始，宽度为 3 列（第三个参数）。然后 button1 将从第三列开始，宽度为一列。但我想我知道错了，因为结果与我预期的非常不同。

![在此处输入图像描述](../Images/12161c948b9c65d494e8fe5891a98d78.png)

我希望这些按钮更窄，表格更宽。我怎样才能做到这一点？我想使用 GridBag 来完成这个，因为这个小面板只是一个非常复杂的 gui 的一小部分，而整个 gui 是使用 gridbag 设计的。所以我不想改变编码风格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:07:23.633

在 button1 和 button2 上，将它们的 weightx 减少到 0.0。像这样的东西：

```
import java.awt.Component;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

public class Test4 {

    protected void initUI() {
        JFrame frame = new JFrame("test");
        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 0.5;
        gbc.weighty = 1.0;
        gbc.gridheight = 2;
        panel.add(getTable(), gbc);
        gbc.gridx = 2;
        panel.add(getTable(), gbc);

        GridBagConstraints gbc2 = new GridBagConstraints();
        gbc2.fill = GridBagConstraints.NONE;
        gbc2.anchor = GridBagConstraints.CENTER;
        gbc2.gridx = 1;
        gbc2.weighty = 1.0;
        panel.add(new JButton("Button 1"), gbc2);
        gbc2.gridy = 1;
        panel.add(new JButton("Button 2"), gbc2);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    private Component getTable() {
        Vector<Vector<String>> data = new Vector<Vector<String>>();
        for (int i = 0; i < 10; i++) {
            Vector<String> row = new Vector<String>();
            for (int j = 0; j < 3; j++) {
                row.add("Cell (" + i + "," + j + ")");
            }
            data.add(row);
        }
        Vector<String> columns = new Vector<String>();
        columns.add("Column 1");
        columns.add("Column 2");
        columns.add("Column 3");
        DefaultTableModel model = new DefaultTableModel(data, columns);
        JTable table = new JTable(model);
        JScrollPane scroll = new JScrollPane(table);
        scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        return scroll;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test4().initUI();
            }
        });
    }
} 
```

*很抱歉约束重用，它不利于可读性。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:13:37.450

您必须设置布局的增长设置 (weightx)，以便只有左右列在增长。

像这样：

```
 contentPane.setLayout(new GridBagLayout());
    ((GridBagLayout)contentPane.getLayout()).columnWidths = new int[] {0, 0, 0, 0};
    ((GridBagLayout)contentPane.getLayout()).rowHeights = new int[] {0, 0, 10, 0, 0, 0};
    ((GridBagLayout)contentPane.getLayout()).columnWeights = new double[] {1.0, 0.0, 1.0, 1.0E-4};
    ((GridBagLayout)contentPane.getLayout()).rowWeights = new double[] {1.0, 0.0, 0.0, 0.0, 1.0, 1.0E-4};

    //---- leftBtn ----
    leftBtn.setText("left Button");
    contentPane.add(leftBtn, new GridBagConstraints(0, 0, 1, 5, 0.0, 0.0,
        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
        new Insets(0, 0, 0, 0), 0, 0));

    //---- rightBtn ----
    rightBtn.setText("right Button");
    contentPane.add(rightBtn, new GridBagConstraints(2, 0, 1, 5, 0.0, 0.0,
        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
        new Insets(0, 0, 0, 0), 0, 0));

    //---- addBtn ----
    addBtn.setText("add Button");
    contentPane.add(addBtn, new GridBagConstraints(1, 1, 1, 1, 0.0, 0.0,
        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
        new Insets(0, 0, 0, 0), 0, 0));

    //---- remBtn ----
    remBtn.setText("rem Button");
    contentPane.add(remBtn, new GridBagConstraints(1, 3, 1, 1, 0.0, 0.0,
        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
        new Insets(0, 0, 0, 0), 0, 0)); 
```

所以它给出了： ![演示](../Images/81ba70d6ba20c7676298313cbda571de.png)

问候弗洛里安

编辑：这里是 IDE 的屏幕截图，按钮之间有额外的空间：![演示2](../Images/1690c933d296a929573bc405c7d175c9.png)

# java - 记录遗留 Java 应用程序的带宽使用情况

> ID：11225515
> 
> 赞同：1
> 
> 时间：2012-06-27T11:49:22.473
> 
> 标签：java, networking, cloud, bandwidth

我知道有很多关于监控和/或限制网络带宽使用的线程，但没有一个能提供令人满意的答案。这是我的问题：

我有一个与不同服务器（如 HTTP 和 JMS）通信的遗留 Java 应用程序。我的应用程序也可以接收传入的 HTTP 请求。现在，这个应用程序现在应该部署在云基础设施中以提供 SaaS 模型。消费者的定价模型应该基于进出应用程序的带宽流量。

因此，我们需要一种方法来计算通过所有源（基本上是所有创建的套接字）流入和流出应用程序的字节数。代码库很大，并且在某些情况下使用第三方通信库，因此不可能在任何地方进行主动代码更改。此外，该应用程序是所有平台都支持的遗留 Java 应用程序，该解决方案也应该适用于所有平台。我不想使用第三方外部监控工具来完成这项工作。相反，需要找到一种可以**被动地**融入系统的解决方案来完成工作。

完成这项工作的方法/选项/解决方案是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:07:28.587

您可以创建一个位于您的应用程序和系统其余部分之间的 TCP 代理服务器。只要通过配置使用此代理服务器，它就会看到进出应用程序的每个字节。这种方式可以根据您的喜好计算或限制它。

# sql - Sql 按日期分组，然后找到 avg

> ID：11225519
> 
> 赞同：1
> 
> 时间：2012-06-27T11:49:37.770
> 
> 标签：sql, date, group-by, wildcard, average

我有一个数据库，包括表单的“日期”字段，例如“2012-06-13 23:34:52+00”和“情绪”字段，包括-1和1之间的双符号值。我想要什么是计算平均情绪，按一天中的每个小时分组。例如，我希望得到下表：

```
小时......平均情绪   
00 ...... 0.5  
01 .... -0.2  
...  
24 ...... 0.7  

```

我想我必须使用 group by、avg 函数和一些通配符来从“Date”中提取小时。如果有人更有经验，请帮助我找到最有效的查询方式。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:56:15.487

如果我知道您的 DBMS，答案应该会更好。`<functionToGetHour>`将取决于您的 DBMS。

AVG 是（如果我没记错的话）ANSI SQL。

这个想法是这样的。

如果你想要每个小时的结果，即使那个小时没有“情绪”，这是可能的，但有点复杂。

```
SELECT t1.<functionToGetHour>(Date), AVG(t1.Sentiment)
FROM <YOURTABLE> t1
GROUP BY t1.<functionToGetHour>(Date) 
```

**编辑**

使用 Google API（如果我们谈论的是[https://developers.google.com/chart/interactive/docs/querylanguage?hl=fr](https://developers.google.com/chart/interactive/docs/querylanguage?hl=fr)）

```
select hour(datetime  `Date`), avg(sentiment) group by hour(datetime  `Date`) 
```

date 是保留关键字，因此将其用作字段是一个相当糟糕的主意。不知道 google API 是否区分大小写...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:55:27.323

```
select to_char(date_field, 'YYYY MM DD HH'), average(sentiment) # to_char= oracle
from sentimemt_table
group by to_char(date_field, 'YYYY MM DD HH')

# mySQL: DATE_FORMAT(date_field, '%Y %M %D %H') instead of to_char
# Postgres: to_char(date_field, 'YYYY:MM:DD:HH24')
# SQLServer: CONVERT(VARCHAR(20), date_field(), 120) 
```

# xsd - XSD 元素仅作为根节点

> ID：11225520
> 
> 赞同：1
> 
> 时间：2012-06-27T11:49:37.683
> 
> 标签：xsd

基本上有编写 XSD 的方法：

1.) 使用具有匿名类型的单个元素（根节点）。仅使用匿名或显式类型描述文档的其余部分

2.) 将每个标签描述为具有匿名类型的元素并仅使用显式类型以避免冗余（例如继承或当两个元素使用相同类型时）

一开始，我使用（1）。我不时地转向方法 (2)，现在我所有的 XSD 都是用这种方式编写的。

现在我遇到的问题是每个元素都可以作为文档的根节点出现！但我仍然希望只将一个特定元素定义为根节点，并从这里开始描述文档结构。

有没有办法避免这种情况而不回到 (1) ？

无论如何，编写 XSD 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:59:40.990

[在https://stackoverflow.com/a/3672295/1145103](https://stackoverflow.com/a/3672295/1145103)上提出（并回答）了一个类似的问题 本质上，您需要恢复到 (1)

# c#-4.0 - 使用命令提示符在 c# 中运行 dll 文件

> ID：11225523
> 
> 赞同：-4
> 
> 时间：2012-06-27T11:49:46.043
> 
> 标签：c#-4.0

如何通过命令提示符编译c#创建的.dll文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:54:25.903

用于`/target:library`构建 DLL：

```
csc /target:library Foo.cs 
```

或者

```
csc /target:library /out:MyLibrary.dll Foo.cs 
```

有关更多信息，请参阅[csc 的文档。](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:52:52.817

假设您要将源代码文件编译为程序集 (DLL)，请调用[csc.exe](http://msdn.microsoft.com/en-us/library/78f4aasd%28v=vs.80%29.aspx)，它是 C# 的命令行编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:56:36.090

DLL 不是可执行文件，而是类库。没有定义入口点，因此您不能“执行”它们。

但是，您可以将输出类型更改为可执行文件 (.exe) 或创建另一个项目（将输出类型设置为可执行文件），引用您的 .dll 并从新项目中调用入口方法。

# c++ - 在 c++ 中存储对象以确保唯一名称并能够在以后有效地检索它们的最佳策略是什么？

> ID：11225535
> 
> 赞同：2
> 
> 时间：2012-06-27T11:50:28.990
> 
> 标签：c++, containers, std, replace

我正在编写一个 Composite 类（类似于`QObject`Qt），目前我将孩子存储在`std::vector`. 每个 Composite 实例都有一个名称，并且该名称在作为该实例的兄弟的所有其他实例之间必须是唯一的，或者更好地说，在共享同一父级的实例之间必须是唯一的。

每次在 中推入一个新实例时`vector`，我必须查看它的名称是否已被 中的一个实例使用`vector`，如果是，我必须更改其名称并添加一个数字。

当孩子的数量变得一致时，我提出的代码非常愚蠢而且非常缓慢。

这是课程：

```
class Composite
{
public:
    Composite(const std::string &name, Composite *ancestor=NULL);
    ~Composite();

private:
    std::string name;
    Composite *ancestor;
    std::vector<Composite*> descendants;

public:
    void setName(const std::string &name);
}; 
```

这是构造函数和`setName`实现：

```
Composite::Composite(const std::string &name, Composite *ancestor)
{
    this->ancestor = ancestor;
setName(name);
if (ancestor!=NULL)
    ancestor->descendants.push_back(this);

} 
```

.

```
void Composite::setName(const std::string &name)
{
    this->name = name;

    if (ancestor!=NULL)
    {
        CompositeList::iterator dIt;
        for( dIt=ancestor->descendants.begin(); dIt!=ancestor->descendants.end(); dIt++)
        {
            if ((*dIt)==this)
            {
                continue;
            }
            else if (this->name == (*dIt)->getName())
            {
                 int trailingNumber = stringToInt(getTrailingNumber(this->name));
                 std::string cleanName = removeTrailingNumber(this->name);
                 this->name = cleanName+intToString(trailingNumber+1);
            }
        }
    }
} 
```

这对于很少的孩子来说可能很好，但是当他们变成数百人时，`setName`功能真的变得很慢。想象一下这种情况：

```
Composite *parent = new Composite("pippo");

for (int i=0; i<10000; i++)
{
    Composite("ClashingName", parent);
} 
```

第一次很好，第二次在 ClashingName0 中更改名称，第三次首先将名称更改为 ClashingName0，然后找到与第二个实例的冲突并将名称设置为 ClashingName1 ...你明白了，它是指数级的，当它到达该循环的末尾时，会经过一段不可接受的时间。

所以这里真正的问题是如何有效地找到冲突的名称并有效地分配一个尚未使用的新名称？任何标准容器对我来说都很好，我的编译器支持 C++11，但我不能/不想使用 Boost，因为我正在处理的项目非常小（基本上就是这个类）

我不是 C++ 的经验丰富的用户，我正在考虑使用`map`，或者`unordered_map`但我真的很想在这里获得专家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:01:04.080

IMO，您需要更改对象的存储方式。类似于以下内容：

```
std::map<std::string, std::vector<Composite> > 
```

映射的键是前缀，向量中的索引是第 n 个`Composite`对象。您需要提供一个自定义查找函数来拆分传入的名称.. 例如

```
std::string query = "pipo_10"; 
```

在您的查找功能中，

```
Composite* lookup(std::string const& key)
{
  // split the key to get the prefix and the index
  // lookup in the map using the prefix
  // return the index
} 
```

编辑 1：要保存所有字符串操作，您可以定义自己的*自定义键*，它只是一对（例如，`std::pair<std::string, int>`它是前缀和索引），并且您的查找将简单地使用来自该*键*的值。

~~编辑2：多考虑一下，最好有一张地图，例如~~

 ~~```
std::map<std::string, std::map<int, Composite> > 
```~~ 

~~现在，索引不再是向量中的索引，而是在第二张地图中的查找。这可以更好地处理删除，键将是我之前所说的复合键（对）。~~

归功于@Steves 的建议..

```
std::map<std::pair<std::string, int>, Composite> 
```

使用`lower_bound()`技巧来定位给定的最后一个索引`Composite`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:06:09.227

要么 要么`map`将`unordered_map`完成这项工作，使用`count`函数来测试名称是否在地图中，以及`find`函数或`operator[]`访问它。

`unordered_map`总体上可能会快一些。

`map`可以更好地处理您讨厌的`"ClashingName"`示例，因为您可以使用`lower_bound`or在单个查找中找到最后一个冲突的名称，而不是依次`upper_bound`查找每个`ClashingName0`...。`ClashingName9999`

请注意，`map`默认情况下按字典顺序排序，所以`ClashingName10`在`ClashingName9`. 当有人为您提供一个包含数字的名字时，尤其是在结尾处，也会出现问题。

用 Nim 的建议解决这个问题——使用一对`string, int`作为映射键，并根据需要从该对构造名称。同样，当有人为您提供以数字结尾的名称时，您必须做一些特别的事情。确保名称`"Clash10"`不能出现两次，一次`("Clash", 10)`和一次`("Clash1", 0)`。一个简单的选项是从提供的名称中禁止一个字符，并将其用作分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:15:20.090

如果您不介意每个对象有一个额外的地图，您可以执行以下操作：

```
// inside Composite definiton
std::map<std::string, int> names_of_descendants; 
```

然后简单地说：

```
void Composite::setName(const std::string &name)
{
    if (ancestor)
    {
        // for the first usage of certain name, map's operator[]
        // will insert default constructed int (0) in the map
        this->name = name + ancestor->names_of_descendants[name];

        // increment the value for this name, for the next call of setName
        ++names_of_descendants[name];
    }
} 
```

您可以保留用于存储后代的向量。

# css - 如何用盒子阴影部分圆角给定块的角，并用不圆的盒子阴影（webkit和壁虎）保持不圆角？

> ID：11225541
> 
> 赞同：7
> 
> 时间：2012-06-27T11:50:44.937
> 
> 标签：css

我有一个`div`带有多个边框的边框，我正在使用一个边框`box-shadow`。我希望它`div`有几个圆角和一个方角。但是，只要一个角`border-radius`添加了一个（除了`0`），其他角`box-shadow`也会变成圆角（半径与 的任何指定值不同`border-radius`）。有没有办法`border-radius`为某些角落设置，但不是全部，并且`box-shadow`使用与所有角落相同的半径`border`？

这种行为存在于 Chrome 19、Firefox 13 和 Safari 5 中，但*不*存在于 Internet Explorer 9 或 Opera 12 中，它们都`box-shadow`按预期显示 -`box-shadow`当`border`' 的角也是正方形时，会显示正方形的角。

## 代码（[示例](http://jsfiddle.net/3CRLk/)）：

### CSS

```
.block1 {
    padding: 18px 14px;
    margin: 5px;
    background: #fff;
    border: 1px solid red;
    -webkit-box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
    -moz-box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
    box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
    -webkit-border-radius: 10px 0 10px 10px;
    -moz-border-radius: 10px 0 10px 10px;
    border-radius: 10px 0 10px 10px;
}
.block2 {
    padding: 18px 14px;
    margin: 5px;
    background: #fff;
    border: 1px solid red;
    -webkit-box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
    -moz-box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
    box-shadow: 0 0 0 5px rgba(0, 57, 47, .32);
}
.outer {
    border: 1px solid green;
} 
```

### HTML

```
<p>Top-right block corner is not rounded, but box-shadow is:</p>
<div class="outer">
    <div class="block1">
        foo
    </div>
</div>

<p>Box-shadow on block without border-radius:</p>
<div class="outer">
    <div class="block2">
        bar
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:11:35.343

`inset`在外部 div 上使用阴影。镀铬看起来不错。

小提琴更新：http: [//jsfiddle.net/G2bvw/1/](http://jsfiddle.net/G2bvw/1/)

**更新**：如果你想要一个实心阴影，你不想在外部 div 上插入阴影，红色边框是必须的，这应该适合你：

[http://jsfiddle.net/G2bvw/3/](http://jsfiddle.net/G2bvw/3/)

诀窍是使用边框作为阴影和阴影作为边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:03:23.147

请改用此 CSS（[示例](http://jsfiddle.net/3CRLk/4/)、[比较](http://jsfiddle.net/3CRLk/3/)）：

```
.block-fixed {

    background: #fff;

    /* Have to increase padding by 1px for inset box-shadow */
    padding: 19px 15px;

    /* Use border for outer border */
    border: 5px solid rgba(0, 57, 47, .32);

    /* Use box-shadow for inner border */
    -webkit-box-shadow: inset 0 0 0 1px red;
    -moz-box-shadow:inset 0 0 0 1px red;
    box-shadow:inset 0 0 0 1px red;

    /* Have to adjust border-radius due to switching shadow/border */
    -webkit-border-radius: 15px 0 15px 15px;
    -moz-border-radius: 15px 0 15px 15px;
    border-radius: 15px 0 15px 15px;

} 
```

# php - 同一页面上的 PHP 表单验证显示到早期

> ID：11225544
> 
> 赞同：0
> 
> 时间：2012-06-27T11:51:03.847
> 
> 标签：php, mysql, sql, forms, validation

我想要做的是将表单的验证放在同一页面上。现在的问题是，如果您访问该页面，它已经显示错误。必须是在您填写表格后显示错误，而不是之前。

这是我的代码：

```
<html>
<head>
  <title>Westpop</title>
  <link rel="stylesheet" href="opmaak.css">
</head>
<body>
    <fblack>
    <div id="header"><a href="Index.php"></a></div>

    <div id="registreer">
        <table cellpadding="5" align="center">
            <th colspan="2" align="left">Registeren</th>
            <form name="registreren"  method="post" action="registreer.php">
                <tr>
                    <td><fblackbold>Inloggegevens:<fblackbold></td>
                </tr>

                <tr>
                    <td>Email</td>
                    <td><input type="text" size="50" placeholder="email@provider.com" name="email"></td>
                </tr>
                <tr>
                    <td>Wachtwoord</td>
                    <td><input type="password" size="50" placeholder="min. 8 tekens, één hoofdletter, één cijfer" name="wachtwoord"></td>
                </tr>
                <tr>
                    <td><fblackbold>Persoonlijke gegevens:<fblackbold></td>
                </tr>
                <tr>
                    <td>Voornaam</td>
                    <td><input type="text" size="50" placeholder="" name="voornaam" ></td>
                </tr>
                <tr>
                    <td>Achternaam</td>
                    <td><input type="text" size="50" placeholder="" name="achternaam"></td>
                </tr>
                <tr>
                    <td>Geboorte Datum</td>
                    <td><input type="text" size="50" placeholder="jjjj-mm-dd" name="geboortedatum"></td>
                </tr>
                <tr>
                    <td>Geslacht</td>
                    <td>
                        M <input type="radio" size="50" value="m" name="geslacht">
                        V <input type="radio" size="50" value="v" name="geslacht">
                    </td>

                </tr>
                <tr>
                    <td>Adres</td>
                    <td><input type="text" size="50" placeholder="Straat 00" name="adres"></td>
                </tr>
                <tr>
                    <td>Woonplaats</td>
                    <td><input type="text" size="50" placeholder="" name="woonplaats"></td>
                </tr>

                <tr>
                    <td>Telefoonnummer</td>
                    <td><input type="text" size="50" placeholder="min. 9 tekens" name="telefoonnummer"></td>
                </tr>
                <tr>
                    <td>Functie</td>
                    <td>
                        <select name="functie">
                            <option value="catering">Catering</option>
                            <option value="muziekpodia">Muziek en podia</option>
                            <option value="vervoerovernachten">Vervoer en overnachten</option>
                            <option value="logistiekbeveiliging">Logistiek en beveiliging</option>
                            <option value="diversen">Diversen</option>
                        </select>
                    </td>
                </tr>
                <tr align="right">
                    <td></td>
                    <td><input type="reset" value="Wissen"><input type="submit" name="verzenden" value="Verzenden"></td>
                </tr>
            </form>
        </table>

        <?php 

            $host = "localhost";
            $gebruikersnaam = "root";
            $wachtwoord = "";
            mysql_connect($host, $gebruikersnaam, $wachtwoord);

            $demooistedatabase = "c5g4westpopintranet";
            mysql_select_db($demooistedatabase);

            $achternaam = $_POST["achternaam"];
            $voornaam = $_POST["voornaam"];
            $gbdatum = $_POST["geboortedatum"];
            $email = $_POST["email"];
            $geslacht = $_POST["geslacht"];
            $wachtwoord = $_POST["wachtwoord"];
            $woonplaats = $_POST["woonplaats"];
            $adres = $_POST["adres"];
            $telefoonnummer = $_POST["telefoonnummer"];
            $functie = $_POST["functie"];

            $achternaam = stripslashes($achternaam);
            $voornaam = stripslashes($voornaam);
            $gbdatum = stripslashes($gbdatum);
            $email = stripslashes($email);
            $geslacht = stripslashes($geslacht);
            $wachtwoord = stripslashes($wachtwoord);
            $woonplaats = stripslashes($woonplaats);
            $adres = stripslashes($adres);
            $telefoonnummer = stripslashes($telefoonnummer);
            $functie = stripslashes($functie);

            $query = "INSERT INTO 
                        vrijwilliger ( voornaam, achternaam, gbdatum, geslacht, wachtwoord, woonplaats, adres, telefoonnummer, functie, activiteitID, groepID, email )
                      VALUES
                        ( '$voornaam', '$achternaam', '$gbdatum', '$geslacht', '$wachtwoord', '$woonplaats', '$adres', '$telefoonnummer', '$functie', null, null, '$email' )";

            $foutloos=true;

            if( preg_match("/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $wachtwoord) === 0 ) {
                echo '<fblack>Wachtwoord moet minstens 8 tekens lang zijn, een kleine letter, grote letter én cijfer bevatten.<br><fblack>';
                $foutloos = false; 
            }

            if( preg_match("/^[0-9]{10}+$/", $telefoonnummer) === 0 ) {
                echo '<fblack>Het telefoonnummer moet 10 cijfers bevatten.<br><fblack>';
                $foutloos = false; 
            }  

            if( preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $gbdatum) === 0 ) {
                echo '<fblack>Geboorte datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><fblack>';
                $foutloos = false; 
            }

            if( preg_match("/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i", $email) === 0 )
            {
                echo '<fblack>Email moet hier op lijken: email@provider.com<br><fblack>';
                $foutloos = false; 
            }   

            if( preg_match("/^[A-Z][a-zA-Z -]+$/", $voornaam) === 0 ) {
                echo '<fblack>Voornaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
                $foutloos = false; 
            } 

            if( preg_match( "/^[A-Z][a-zA-Z -]+$/", $achternaam ) === 0 )
            {
                echo '<fblack>Achternaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
                $foutloos = false; 
            } 

            if( $geslacht == '' ) {
                echo '<fblack>U heeft uw geslacht niet aangegeven.<br><fblack>';
                $foutloos = false; 
            }

            if( preg_match( "/^[a-zA-Z]+\ +[0-9]+$/", $adres ) === 0 ) {
                echo '<fblack>Het adres is verkeerd ingevoerd.<br><fblack>';
                $foutloos = false; 
            }

            if( preg_match("/^[a-zA-Z\s]+$/", $woonplaats ) === 0) {
                echo '<fblack>De woonplaats is verkeerd ingevoerd.<br><fblack>';
                $foutloos = false; 
            }

            if( $foutloos == true ) {
                mysql_query($query) or die( '<fblack>U staat al in ons systeem<A HREF="javascript:javascript:history.go(-1)"><br><br>Klik hier om terug te gaan</A><fblack>' );
                echo "<fblack>Uw registratie is succesvol verwerkt!<br>Log <a href='login.php' MEDIA=screen>hier</a> in<fblack>";
            }
        ?>
    </div>
<?php
    include ("html_end.php");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:58:28.063

最简单的方法就是在 HTML 中添加一个隐藏字段，然后测试该字段是否存在，是否具有预期值。我倾向于使用这样的东西......

```
<input type="hidden" size="8" name="action" value="submitform" /> 
```

然后在PHP中你可以做......

```
if (isset($_POST['action']) && $_POST['action']=='submitform') {
   ... do form validation and submission ...
} 
```

使用隐藏字段很好，因为您不必担心字段不显示，因为它们是空的/未设置。例如，如果您的表单只有一个单选按钮并且没有设置任何选项，那么浏览器根本不会传递该表单参数。这样您就不必担心任何类似的问题。

此外，如果您的页面包含多个表单，则可以使用 action 参数将它们区分开并适当地处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:57:24.730

您可以将 PHP 代码包装在：

```
if( $_SERVER['REQUEST_METHOD'] == 'POST'){
  //handle form
} 
```

# java - 使用htmlunit访问hotmail的垃圾文件夹

> ID：11225545
> 
> 赞同：1
> 
> 时间：2012-06-27T11:51:10.163
> 
> 标签：java, htmlunit, hotmail

我想在java中使用htmlUnit访问hotmail帐户的垃圾文件夹，因为htmlunit似乎支持javascript。使用以下代码，我可以访问收件箱文件夹，但我想从中获取垃圾文件夹。我发现页面左侧显示的“垃圾”是一个标签。所以我试图访问标签，然后想点击它。但我无法从 HtmlPage 访问“垃圾”标签。垃圾标签的 HTML 代码如下所示。

```
<span class="FolderLabel">
Junk
<span style="display:none;">
(
<span class="count"></span>
)
</span>
</span>
</span> 
```

以下是我用来获取垃圾文件夹的代码：

```
 import java.io.IOException;
    import java.net.URL;

    import org.w3c.dom.Node;

    import com.gargoylesoftware.htmlunit.WebClient;
    import com.gargoylesoftware.htmlunit.html.DomNodeList;
    import com.gargoylesoftware.htmlunit.html.HtmlAnchor;
    import com.gargoylesoftware.htmlunit.html.HtmlElement;

import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlLabel;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlPasswordInput;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;
import com.gargoylesoftware.htmlunit.html.HtmlTextInput;

public class TesthtmlUnit {
     public static void main(String[] args) throws IOException
     {
         final WebClient webClient = new WebClient();

            // Get the first page
            final HtmlPage page1 = webClient.getPage("https://login.live.com/ppsecure/post.srf");
            webClient.setThrowExceptionOnScriptError(false);

            final HtmlForm form = page1.getFormByName("f1");

            final HtmlSubmitInput button = form.getInputByName("SI");
            final HtmlTextInput uname = form.getInputByName("login");
            final HtmlPasswordInput pwd = form.getInputByName("passwd");
            // Change the value of the text field
            uname.setValueAttribute("emailid@hotmail.com");
            pwd.setValueAttribute("pwd");

            HtmlPage page2 = button.click();
            //System.out.println(page2.asXml());

            HtmlAnchor inbox = (HtmlAnchor) page2.getAnchorByHref("http://mail.live.com/?rru=inbox");
            page2 = (HtmlPage) inbox.click();
            //System.out.println(page2.asXml());

            //CLICK ON JUNK LABEL
          //here I want access label "junk" from page2 

            webClient.closeAllWindows();
     }

} 
```

有人知道如何点击垃圾文件夹吗？我经历了 htmlpage 提供的方法，但找不到方法。

我将不胜感激有关此的任何帮助。

谢谢。

# android - Android：忽略 4.0.x 版本中的无效文本正则表达式

> ID：11225549
> 
> 赞同：0
> 
> 时间：2012-06-27T11:51:18.433
> 
> 标签：android, android-emulator, ddms, android-4.0-ice-cream-sandwich

我在 DDMS 中遇到错误，当我单击 logcat 错误时，它会移动到 DDMS 屏幕并显示此错误 -

```
 [2012-06-27 17:17:12 - LogCatFilter] Ignoring invalid text regex.
 [2012-06-27 17:17:12 - LogCatFilter] Unexpected internal error near index 14
 java.util.com\
          ^ 
```

为什么我会收到此错误，尝试了谷歌但无法获得正确的信息。我该怎么办。请任何人都可以说或给我一些解决方案我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:45:43.697

谢谢大家..解决了问题..重新启动eclipse和模拟器后，错误消失了..可能adb.exe运行不正常..所以出现了这个问题..

**“如果我们从中吸取教训，失败就是成功”**

# wordpress - 自定义帖子类型破坏了 wordpress 本身

> ID：11225550
> 
> 赞同：1
> 
> 时间：2012-06-27T11:51:22.443
> 
> 标签：wordpress, custom-post-type

我正在尝试向 Wordpress 添加自定义帖子类型。我可以使用以下代码注册自定义帖子类型，以便它在左侧的菜单栏上可见。

```
add_action( 'init', 'add_member');

function add_member() {

$args = array(
    'label' => __('Members'),
    'singular_label' => __('Member'),
    'public' => true,
    'show_ui' => true,
    'capability_type' => 'post',
    'hierarhical' => false,
    'rewrite' => true,
    'supports' => array('title', 'editor', 'thumbnail')
);

register_post_type( 'member', $args );

} 
```

但问题是，当我尝试添加自定义元框时，它会破坏网站。

```
add_action("admin_init", "admin_init");

function admin_init() {

add_meta_box("memberInfo-meta", "Member Options", "meta_options", "member", "side", "low");

}

add_action('save_post', 'save_member');

function meta_options() {

global $post;
$custom = get_post_custom($post->ID);
$member = $custom["member"][0];

}

<label>Member:</label><input name="member" value="<?php echo $member; ?>" />

function save_member() {

global $post;
update_post_meta( $post->ID, "member", $_POST["member"] );

} 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:55:58.613

不确定您需要如何/需要完成什么，但有一个非常漂亮、小巧、整洁的插件，称为“custom-post-type-ui”，功能强大。很久以前我和你一样在挣扎，但是这个插件让我的生活更轻松。见[这里](http://wordpress.org/extend/plugins/custom-post-type-ui/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:05:35.483

只是浏览一下您的代码，但是。您正在尝试将名为“admin_init”的函数挂钩到挂钩 admin_init。这显然行不通。尝试将您的功能“admin_init”更改为其他内容。

您可以在 wp_config 中激活 DEBUG（或检查您的 error_log），以实际找出导致它中断的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T08:32:22.330

您应该将您的功能挂钩到**“add_meta_boxes”**操作。

**代替：**

```
add_action("admin_init", "admin_init"); 
```

**利用：**

```
add_action("add_meta_boxes", "admin_init"); 
```

我也建议你为你的函数使用前缀：而不是调用你的`function admin_init`你可以调用它`myplugin_admin_init`。这将帮助您避免因函数命名而导致的错误。

# lucene - Lucene 休眠搜索 NumericRangeQuery 不适用于使用 @NumericField 定义的字段

> ID：11225552
> 
> 赞同：0
> 
> 时间：2012-06-27T11:51:34.890
> 
> 标签：lucene, numeric, hibernate-search, range

除了这个问题，我使用休眠搜索 4.1.0 的结果很好。我正在尝试在定义的列中执行范围搜索：

```
@Field(name = "startTime", store = Store.YES)
@NumericField
public Float startTime; 
```

我用 startTime = 0.0f 存储了一个项目；

然后我尝试执行范围查询：

```
NumericRangeQuery<Float> rangeQuery = NumericRangeQuery.newFloatRange(
                "startDate", -100000.0f, +100000.0f, true, true);
FullTextQuery fullTextQuery = fullTextEntityManager
                .createFullTextQuery(rangeQuery, Item.class);
results = fullTextQuery.getResultList(); 
```

**第一**：我没有结果。

**第二**：用lukeall检查索引，我看到只是存储了似乎是toString（）的东西[也从其他实验来看]，这看起来不正常......

我觉得我错过了一些东西，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:23:56.163

[先在Hibernate 论坛上](https://forum.hibernate.org/viewtopic.php?p=2456729#p2456729 "休眠论坛")回复，为了其他读者，在此转贴：

**第一**：我认为你定位错误的字段名称；字段名称是`startTime`，不是`startDate`。在这种情况下，由于您直接包装 Lucene 查询，我们无法检查它的有效性。

**第二**：你在路加看到的是结果`Store.YES`

# visual-c++ - 使用 Capture 的 Directshow Redering 预览 被绞死

> ID：11225554
> 
> 赞同：0
> 
> 时间：2012-06-27T11:51:44.983
> 
> 标签：visual-c++, directshow, video-capture, preview

我有一个 Directshow 应用程序，它可以捕获视频并将其保存为 Mp4 文件格式，此外……它还捕获视频的隐藏式字幕，效果很好……

现在我编码以在捕获运行时预览图形，但几秒钟后我的应用程序停止响应并被挂起，任何人都可以知道这种行为。

谢谢梅加娜

# clojure - 使用 clojure 习惯性地将映射合并到值集的映射中

> ID：11225562
> 
> 赞同：5
> 
> 时间：2012-06-27T11:52:04.907
> 
> 标签：clojure, idioms

我正在尝试使用 clojure 惯用地将多个地图合并到一个地图中。

输入

```
{:a 1 :b "a"}
{:a 2 :b "b"}
{:a 3 :b "c"}
{:a 4 :b "a"} 
```

预期的

```
{:a #{1,2,3,4}, :b #{"a" "b" "c"}} 
```

每个键的值都转换为原始映射中的一组值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:48:52.203

我会使用`merge-with`，使用包含空集的预构建结构：

```
(def data [{:a 1 :b "a"}
           {:a 2 :b "b"}
           {:a 3 :b "c"}
           {:a 4 :b "a"}])

(let [base {:a #{} :b #{}}]
  (apply merge-with conj base data))

=> {:a #{1 2 3 4}, :b #{"a" "b" "c"}} 
```

在基本地图中使用空集的技巧是`conj`有一个具体的对象可以处理，因此可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T12:18:24.640

`merge-with`可以用于这样的：

```
(def d [{:a 1 :b "a"}
        {:a 2 :b "b"}
        {:a 3 :b "c"}
        {:a 4 :b "a"}])

(def initial (into {} (map #(vector  %1 [])  (keys (apply merge d)))))

(into {} (map (fn [[a b]] [a (set b)]) 
           (apply merge-with (fn [a b] (conj a b)) initial  d))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T18:44:00.353

```
(defn value-sets [& maps]
  (reduce (fn [acc map]
            (reduce (fn [m [k v]]
                      (update-in m [k] (fnil conj #{}) v))
                    acc
                    map))
          {} maps)) 
```

*编辑*或也许

```
(defn value-sets [& maps]
  (reduce (fn [acc [k v]]
            (update-in acc [k] (fnil conj #{}) v))
          {}
          (apply concat maps))) 
```

* * *

多年后的进一步编辑：我现在会以不同的方式写这个：

```
(defn value-sets [maps]
  (apply merge-with into (for [m maps, [k v] m] 
                           {k #{v}}))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T19:24:58.633

看到 amalloy 的解决方案`reduce`向我建议了这个：

```
(def maps [{:a 1 :b 2}
           {:a 11 :b 22 :c 5}
           {:c 6 :a 7}])

(defn my-merge-maps
  [maps]
  (reduce (fn [accum [k v]]
            (if (accum k)
              (assoc accum k (conj (accum k) v))
              (assoc accum k #{v})))
          {}
          (apply concat maps)))

(defn -main
  []
  (println (my-merge-maps maps))) 
```

结果是：`{:c #{5 6}, :b #{2 22}, :a #{1 7 11}}`

（感谢 gfredericks 指出我不小心使用了可变参数。:)）

**编辑：**这是另一种方式，使用`merge-with`：

```
(def maps [{:a 1 :b 2}
           {:a 11 :b 22 :c 5}
           {:c 6 :a 7}])

(defn build-up-set
  [curr-val new-val]
  (if (set? curr-val)
    (conj curr-val new-val)
    #{curr-val new-val}))

(defn my-merge-maps
  [maps]
  (apply merge-with build-up-set maps))

(defn -main
  []
  (println (my-merge-maps maps))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T16:00:00.813

这是一个流水线方法：

```
(defn my-merge-maps [stuff]
  (->> stuff
       (apply concat)
       (group-by first)
       (map (fn [[k vs]] [k (set (map second vs))]))
       (into {}))) 
```

如果我们有正确的核心函数来操作它们，这可以在地图中完成吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-19T08:47:33.570

```
(def data [{:a 1 :b "a"}
           {:a 2 :b "b"}
           {:a 3 :b "c"}
           {:a 4 :b "a"}])

(apply
  merge-with
  clojure.set/union
  (map #(zipmap (keys %) (map hash-set (vals %))) data))
;{:b #{"a" "b" "c"}, :a #{1 2 3 4}} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-30T08:37:55.857

Amalloy 昨天在 IRC 上针对同一问题放弃了以下解决方案：

```
(defn value-sets [& maps]                                                      
  (apply merge-with into (for [m maps, [k v] m] {k #{v}}))) 
```

# html - 如何在Jquerymobile的右侧列表中放置图标，图片

> ID：11225563
> 
> 赞同：2
> 
> 时间：2012-06-27T11:52:12.733
> 
> 标签：html, jquery-mobile

我正在使用 jquerymobile，并试图显示一个列表，图标或其他图片的默认位置是左侧！我怎样才能把它改成正确的？

```
<ul data-role="listview" data-theme="a">
            <li>
                <p><strong>text</strong></p>
                <p class="ui-li-aside"><img src="images/album-bb.jpg"/></p>
            </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:05:09.613

这对你有用吗？

*   [http://jsfiddle.net/wfa9M/1/](http://jsfiddle.net/wfa9M/1/)

CSS（新类）

```
.ui-li-icon-right {
    max-height: 40px;
    max-width: 40px;
    right: 10px;
    top: .9em;
}​ 
```

HTML（将新类应用于图像）

```
<ul data-role="listview" data-theme="a">
    <li>
         <h3>Title</h3>
        <p><strong>Albums</strong></p>
        <p class="ui-li-aside">
            <img src="http://a.vimeocdn.com/images_v6/icon_albums_md.png" class="ui-li-icon-right"/>
        </p>
    </li>
</ul>
<br />
<br />
<ul data-role="listview" data-theme="a">
    <li>
        <a>
            <h3>Title</h3>
            <p><strong>is this what you wanted?</strong></p>
            <p>Look Ma, more text</p>
            <p class="ui-li-aside">
                <img src="http://a.vimeocdn.com/images_v6/icon_albums_md.png" class="ui-li-icon-right"/>
            </p>
        </a>
    </li>
</ul> 
```

# jsp - 基本身份验证：是否可以像 getRemoteUser() 一样设置远程用户

> ID：11225564
> 
> 赞同：3
> 
> 时间：2012-06-27T11:52:14.373
> 
> 标签：jsp, servlets, security

嗨，我正在使用基本身份验证方法来保护我的 Webapp 中的某些页面。其中有一个指定的 url 模式，如下所示：

```
<url-pattern>/Important/*</url-pattern>
<auth-method>BASIC</auth-method> 
```

现在的问题是，如果用户使用登录表单以正常方式登录。数据将发布到我的 servlet，该 servlet 验证用户名和密码，然后继续进行。有没有办法我可以在这个 servlet 中设置远程用户，因为一旦用户尝试访问重要文件夹中的页面，身份验证输入就会再次出现。有没有一种方法可以通知用户已经登录的身份验证机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:36:18.233

这是不可能的。如果您实际上有一个`<form>`用于登录的 HTML，那么您应该将身份验证方法从 更改`BASIC`为`FORM`。

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

您还需要确保您的 HTML`<form>`以`j_security_check`用户名和密码作为预定义参数`j_username`和`j_password`.

```
<form action="j_security_check" method="post">
    <input type="text" name="j_username" />
    <input type="password" name="j_password" />
    <input type="submit" value="login" />
</form> 
```

这样，容器将以您需要的方式设置登录名，并且用户名将由`getRemoteUser()`. 此外，任何直接访问受限 URL 的未经身份验证的用户都将被自动转发到登录页面。成功登录后，它会自动转发回最初请求的页面。

此外，`FORM`在与 Servlet 3.0 兼容的容器（Tomcat 7、Glassfish 3 等）上使用身份验证方法时，您将能够通过 Servlet 3.0[`HttpServletRequest#login()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29)在 servlet 中引入的方法以编程方式登录用户。这允许对过程和验证进行更细粒度的控制。这对于身份验证是不可能的`BASIC`。

`BASIC`身份验证是完全不同的事情。它显示了一个带有用户名/密码输入的纯 JavaScript 外观对话框。这不需要/使用 HTML`<form>`或其他东西。它还将身份验证信息存储在客户端，这些信息在每个后续请求中作为请求标头发送。它不会像`FORM`身份验证那样将身份验证信息存储在服务器端会话中。

### 也可以看看：

*   [Java EE 6 教程 - 开始保护 Web 应用程序](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:56:57.830

如果用户尚未登录，该方法 `HttpServletRequest.getRemoteUser()` 将返回。`null`

这适用于所有类型的身份验证。

以下是 API 文档所说的：

```
java.lang.String getRemoteUser()

Returns the login of the user making this request, if the user has been 
authenticated, or null if the user has not been authenticated. Whether the user 
name is sent with each subsequent request depends on the browser and type of      
authentication. Same as the value of the CGI variable REMOTE_USER.

Returns:
    a String specifying the login of the user making this request, 
   or null if the user login is not known 
```

# gwt - 使用 GWT 绘制可点击的六边形

> ID：11225568
> 
> 赞同：0
> 
> 时间：2012-06-27T11:52:37.027
> 
> 标签：gwt, canvas

在 GWT 中绘制六边形的最佳技术是什么？我希望它是可点击的，所以在这个形状上有一些点击监听器会很棒。我想一些基于画布的解决方案？

是否有内置机制，或者我应该使用一些 3rd 方库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:50:34.500

要在 GWT 中绘制 2D 原始形状，请查看 GXT3。他们在版本 3 中添加了一个不错的绘图 API，基于 Raphael 中的技术。它使用回退机制，根据所使用的浏览器选择性能最高或最合适的技术。它甚至适用于 IE6，尽管有一些小的显示/动画差异。

它还可以为对象设置动画，并显示基于 SVG 的数据。请参阅演示的绘图部分中的徽标示例，并尝试缩放窗口。

[Sencha GXT 示例](http://www.sencha.com/products/gxt/examples/)

# ruby-on-rails - 无法将负载“部署/资产”添加到我的 capistrano 部署

> ID：11225570
> 
> 赞同：0
> 
> 时间：2012-06-27T11:52:45.280
> 
> 标签：ruby-on-rails, capistrano, asset-pipeline

当我尝试使用以下命令部署我的 rails 应用程序时，`cap deploy`它失败了：

> ./config/deploy.rb:31:in `load': 没有要加载的文件 -- deploy/assets (LoadError)

这是由于 `load 'deploy/assets'`
我的 capistrano deployment.rb 文件中的行。该行应该在部署期间触发资产预编译。

根据捆绑显示我正在使用：

*   捆绑器 (1.1.4)
*   capistrano (2.12.0)
*   导轨 (3.1.3)

为什么它不工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:09:34.310

尝试将`load 'deploy/assets'`行从您的`deploy.rb`文件移动到您的`Capfile`.

有关更多信息，请参阅有关[Capistrano with Rails](https://gist.github.com/2161449)的本教程。虽然看起来其他人把它放在deploy.rb中没有任何错误，所以YMMV。

此外，您可能想查看其他类似这样的 SO 问题：[Capistrano no such file to load -- deploy](https://stackoverflow.com/questions/9370920/capistrano-no-such-file-to-load-deploy)

# mysql - 如何加密mysql表中的现有列？

> ID：11225574
> 
> 赞同：1
> 
> 时间：2012-06-27T11:53:02.457
> 
> 标签：mysql

我有一个带有密码字段的表，它是纯文本。现在，我想加密该字段。怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:09:23.340

MySQL 具有广泛的内置加密功能，您可以[在此处](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)找到详细概述。

您可能想看看例如 AES_DECRYPT() 和 AES_ENCRYPT()。

```
INSERT INTO table (mycolumn) VALUES(AES_ENCRYPT('Hello!', 'encryption_key'));
SELECT AES_DECRYPT(mycolumn, 'encryption_key') FROM table; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-19T19:46:07.587

```
alter table tableName  modify columnNameToBeEncrypted varbinary(200);
update tableName 
set columnNameToBeEncrypted = aes_encrypt(tableName.columnNameToBeEncrypted, 'secretyKey'); 
```

首先将要加密的列更新为`varbinary`类型。这将启用加密值的保存。
然后更新表以将加密值存储在适当的位置，如上所示。这会将加密的值保存在表中。

要查看此值，请使用以下查询：

```
select *, CAST(aes_decrypt(columnNameToBeEncrypted, 'secretyKey') AS CHAR(40)) from tableName; 
```

以上`SQL`查询已在`MySQL`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:40:17.783

将您的数据库（仅数据）备份为 csv 文件。使用以下查询使用键更新现有字段：

```
LOAD DATA INFILE 'C:/Sample.csv' INTO TABLE myTable(myname,@mypass) SET mypass=AES_ENCRYPT(@mypass,'key:test'); 
```

希望它能解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:56:01.347

对密码字段进行更新以更改要散列的密码。您可以为此使用 SHA1。您想对密码进行哈希处理，而不是加密。

检查提供的密码是否正确时，您需要对用户提供的值进行哈希处理，并将其与数据库字段中的值进行比较。

在对密码进行哈希处理时，您想使用某种盐。理想情况下，这对于每个用户来说应该是不同的。一个类似的问题包含很好的答案是：[Secure hash and salt for PHP passwords](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:10:35.777

您可以使用 md5 或密码，但要小心[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)

```
mysql> select md5('a');
+----------------------------------+
| md5('a')                         |
+----------------------------------+
| 0cc175b9c0f1b6a831c399e269772661 |
+----------------------------------+
1 row in set (0.00 sec)

mysql> select password('a');
+-------------------------------------------+
| password('a')                             |
+-------------------------------------------+
| *667F407DE7C6AD07358FA38DAED7828A72014B4E |
+-------------------------------------------+
1 row in set (0.00 sec) 
```

有些人只是以一种方式加密密码并添加一些愚蠢的文本，IE

假设您要加密“Hello”并且您将使用 MD5，您将执行以下操作：

```
mysql> select password('dumbtext Hello');
+-------------------------------------------+
| password('dumbtext Hello')                |
+-------------------------------------------+
| *1F2CE4EA3F6F689369453F090A660A9D0314AD90 |
+-------------------------------------------+
1 row in set (0.00 sec) 
```

然后，如果您想验证会话，您只需在用户在表单输入字段中使用的密码之间进行匹配：

if (md5("dumptext".user(password_input))== 数据库中的字段，然后 Session ON!. if not Reject

这是Mysql密码[加密信息](http://dev.mysql.com/doc//refman/5.5/en/encryption-functions.html)，有不同的选项，这取决于你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-31T10:20:47.763

让我偶然发现您的帖子是因为我遇到了与您相同的问题，但不知何故我想通了。我最初创建了一个表并将数据插入其中，但没有对其进行加密：后来我发现在 mysql 中有一种加密数据的方法，但它只能使用查询和 md5()、sha()、sha1 ()、sha2() 甚至**更多**。

这就是我所做的。

您必须创建另一个与当前表相同的表（但当然使用不同的表名）。

```
INSERT INTO users_new(userID, password) SELECT userID, sha1(password) FROM users; 
```

现在请注意，这是两个不同的表（users 和 users_new），这些表具有相同的列名和特征。该命令将 userID 的值和加密（使用 sha1() 函数）密码复制到表 users 中。

请记住将列密码设置为 VARCHAR(40) 类型，因为解密后的字符长度为 40 字节（字符）长。

希望这会有所帮助。发表您的评论或留下回复。

给你更多的恩典。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-31T11:29:27.667

加密数据有两种哲学：

*   **1-way 哲学** 使用算法加密或散列数据，以便无法获取原始字符串。这可以使用 MD5 或 SHA1 来完成。

    插入用户（用户，密码）值（'userLogin'，md5（'myPassword'））；

    更新用户设置密码 = sha1('myOtherPassword') where user='userLogin';

验证这一点的方法是对用户提供的密码应用方法（sha1 或 md5），并将生成的哈希值与存储在数据库中的哈希值进行比较。

```
select id from users where user='userLogin' and password = sha1('passwordFromUser') 
```

*   **双向哲学** 使用可编码或解码的算法加密数据。这可以通过 AES_ENCRYPT() 和 AES_DECRYPT() 来完成。

    插入用户（用户，密码）值（'userLogin'，AES_ENCRYPT（'myDecodeablePass'，'myEncryptionKey'））；

验证这一点的方法是对存储的字符串使用解密方法并将结果与​​用户提供的密码进行比较

```
select AES_DECRYPT(password, 'myEncryptionKey') as myDecodedPassword from users 
where user='userLogin'; 
```

请注意，以这种方式，中间人攻击可能会破坏加密密钥并因此冒着所有密码的风险，除非它是每个用户的密钥。

**注意：** 为了避免彩虹表（或预先计算的哈希表），建议在要加密的字符串中插入一个随机的非字典词......因为很多用户倾向于使用简单的密码，如“密码”或“123456”

# ruby-on-rails - 根据日期发送电子邮件

> ID：11225575
> 
> 赞同：-2
> 
> 时间：2012-06-27T11:53:21.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

如何根据用户插入的日期向用户发送电子邮件？使用 if 语句，不使用 gems。

用户插入姓名、电子邮件和日期。然后根据他们插入的日期，系统检查日期，如果今天 = 他们插入的日期 + 7 天然后发送电子邮件？我应该在哪里输入这个？是在 usermailer 还是“Dop”控制器中？？？

用户邮件：

```
 class UserMailer < ActionMailer::Base
  default from: "bla bla bla"
   def welcome_email(dop)
    @dop = dop
    @url  = "blah blah"
    mail(:to => dop.mail, :subject => "Welcome to My Awesome Site")
  end
 end 
```

* * *

“Dop”是指怀孕日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:04:31.830

在我看来，UserMailer 应该只关心电子邮件的实际创建和发送。如果调用 UserMailer，您应该已经决定要发送电子邮件。

因此，在您的情况下，我假设您在控制器中有一个 create 操作，它指示 Mailer 发送电子邮件。在这里，您只需将此操作封装在 if 语句中。

```
date = Date.civil(params[:date][:year].to_i, params[:date][:month].to_i, params[:date][:day].to_i)

if date + 7.days == Date.today 
  UserMailer.welcome_email(@dop).deliver
end 
```

这假设您在表单中使用类似这样的内容：

```
<%= select_date Date.today, prefix: :date %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:03:53.383

在您的邮件中：

```
class UserMailer < ActionMailer::Base
  default :from => "blah@blah.com"

  def welcome_email(dop)
    @dop = dop
    @date = dop.date + 7.days
    @url = "http://www.myurl.com"
    mail(:to => dop.mail, :subject => "Welcome to My Awesome Site")
  end
end 
```

然后只需将@date 插入您的邮件视图

```
<h1>Welcome to example.com, <%= @user.name %></h1>
<p>
  Something about pregnancy on <%= @date %>!
</p>
<p>
  Check out our <%= link_to "awesome url", @url %>!
</p> 
```

# php - JQuery加载功能不同的结果到URL

> ID：11225577
> 
> 赞同：0
> 
> 时间：2012-06-27T11:53:28.630
> 
> 标签：php, jquery, load

以下函数触发搜索函数并将其结果加载到容器中。出于某种未知原因，与在浏览器栏中键入 URL 和查询不同，它只有在搜索中有 5 个或更多字符时才会起作用。？？？？

```
function searchelectors(q){
    t=$(q).val().replace(" ","+");
    $('.searchelectors').load('<?php echo 'http://'.$site_url.$site_uri;?>?q=' + t + ' .searchelectors',function(){
        $('.searchelectors .wheel').slideUp(200);   
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:56:08.003

编码您的查询字符串值并发送它。你可以使用[`encodeURIComponent`](http://xkr.us/articles/javascript/encode-compare/)方法。

```
function searchelectors(q){
    t=$(q).val().replace(" ","+");
    t = encodeURIComponent(t);
    $('.searchelectors').load('<?php echo 'http://'.$site_url.$site_uri;?>?q=' + t + ' .searchelectors',function(){
        $('.searchelectors .wheel').slideUp(200);   
    });
} 
```

# iphone - 几秒钟后翻转 iPhone viewController 以显示数据变化

> ID：11225578
> 
> 赞同：1
> 
> 时间：2012-06-27T11:53:31.233
> 
> 标签：iphone, uiviewcontroller, uiviewanimation, uiviewanimationtransition

我想在按钮单击时翻转视图动画，这样我就可以在同一个视图控制器上更改文本和图像，它可以在我的 iPhone 应用程序中提供很酷的动画。我以前曾使用此代码进行翻转过渡：-

```
[self.navigationController pushViewController: viewControllerName animated:NO]; 
[UIView setAnimationDuration: 0.7];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view    cache:NO]; 
[UIView commitAnimations]; 
```

但它会推送一个我不想要的新视图控制器。 ***我想在同一个视图上翻转这个动画***

***请帮忙。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:01:03.657

这就是你所需要的。这将翻转您的视图，而无需第二个视图。它提供了在动画期间和之后进行更改的地方。

```
[UIView transitionWithView:MYVIEW duration:0.7 options:UIViewAnimationOptionTransitionFlipFromRight animations:^{
    // Make your changes to the view here.
} completion:^(BOOL finished) {
    // Do any cleanup necessary here.
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:57:36.367

你试过了`[yourViewController.view setNeedsDisplay]`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:18:20.017

你可以试试这个代码......这对我来说很好。

```
flipView=[[FlipMyGuideViewController alloc]init];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                           forView:[self view]
                             cache:YES];

    [self.view addSubview:flipView.view];

    [UIView commitAnimations]; 
```

# g++ - Freepascal 真的比 gcc 使用 *far* 更少的内存吗

> ID：11225580
> 
> 赞同：9
> 
> 时间：2012-06-27T11:53:41.110
> 
> 标签：g++, freepascal, fpc

[http://benchmarksgame.alioth.debian.org/](http://benchmarksgame.alioth.debian.org/)上的语言测试基准表明 FPC 程序使用的内存大约是使用 g++ 的同类程序使用的内存的 1/50 **。***这些基准测试是否无意中偏向 fpc，或者 FPC是否*真的比 g++ 好得多？我一直认为这些基准是一系列体面的微基准，所以我对这些结果感到惊讶，因为 50 倍是非常重要的恕我直言。

参考：

[http://benchmarksgame.alioth.debian.org/u32/pascal.php](http://benchmarksgame.alioth.debian.org/u32/pascal.php) [http://benchmarksgame.alioth.debian.org/u64q/pascal.html](http://benchmarksgame.alioth.debian.org/u64q/pascal.html)

**编辑：** 这变得更加有趣，因为[这个](http://benchmarksgame.alioth.debian.org/u64q/program.php?test=spectralnorm&lang=fpascal&id=1)页面声称帕斯卡在某些程序中只使用了 8KB，这看起来非常低

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T19:15:44.590

请注意，启动时间是 IIRC 另一个 FPC 达到峰值的基准

我想答案主要是因为Free Pascal默认静态链接程序，避免使用libc等辅助库

这有几个后果：

*   对于进行基准测试的简单程序，FPC 程序是静态的，仅使用自己的 RTL（没有 libc 的静态副本）并且没有动态链接开销（时间和内存）。包括映射可能被误认为应用程序内存使用的共享 glibc 段（是这样吗？）。
*   libc 可能会做一些可能不需要但涉及 FPC 对这些简单程序不做的初始化。（如初始化 zoneinfo）
*   由于 FPC 使用完全独立的内存管理器，堆子分配器的初始块可能具有不同的大小。可能 FPC 系统地更小。
*   对于线程，新线程堆栈的大小可能会导致各种差异（大小以及它是否（部分）仅是保留或提交的内存，或者与 *nix 等效的任何内容）

总而言之，我认为这种观察到的行为**与 FPC 无关，而更多地与其他基准开发系统之间缺乏变化有关**。FPC 只是脱颖而出，因为几乎所有其他东西都是建立在 gcc/glibc 技术之上的（或者因为它们是直接的 gcc 衍生产品，或者因为它们的 VM/解释器是建立在 gcc 之上的），因此它们都共享 libc 的一般待遇。FPC 的不同仅仅突出了 (g?)libc 对简单程序的不良扩展。(*)

从某种意义上说，枪战可能存在偏差，即计算共享地址空间而不是实际*使用的*私有字节，或者因为它没有充分区分子分配器分配的私有字节和进程实际使用的私有字节。然而，它可能需要一个 libc/libmalloc 核心开发来解决这个问题，并且由于枪战是开源的，因此是否可以提供更好的测量的问题是开放的。

要么，要么 (g)libc 存在根本性的问题。（我不是这方面的专家）。获得更多相关信息的可能解决方案是在 FreeBSD 或带有 uclibc 的 Linux 上运行基准测试。简而言之，除了 glibc 之外的其他任何东西。

正如 Igouy 的帖子所述，当链接到 libc 时，FPC 获得了其他开发系统的（坏）特性。这是另一个指标，表明问题应该是**“为什么使用二进制文件的 glibc 在枪战内存基准测试中表现不佳”**而不是“为什么 FPC 在枪战基准测试中表现良好”

请注意，FPC 最初避免使用 libc 是出于跨发行版兼容性的考虑，而不是性能或文件大小。

因此，对于所有假设这是测量 FPC 的内存使用情况的侥幸，是否认为这是 glibc 内存使用或测量的问题？或者更确切地说，*高*glibc 数是错误的，而不是低 FPC 数....

.... FPC 开发人员 ....

(*) 并且在您说它只是为“大型”应用程序高效而开发之前，请记住 Unix*哲学*是将小型工具链接在一起，并且许多 Unix 进程是短暂的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:01:52.353

**是的， unix 实用程序[top](http://manpages.ubuntu.com/manpages/lucid/man1/top.1.html)**确实**报告说那些 Pascal 程序使用那么多内存，而那些 C++ 程序使用那么多内存。**

 **例如，在 x64 上，运行[Free Pascal n-body 程序](http://benchmarksgame.alioth.debian.org/u64/benchmark.php?test=nbody&lang=fpascal)和运行[C++ n-body 程序](http://benchmarksgame.alioth.debian.org/u64/program.php?test=nbody&lang=gpp&id=1)时，**top**会报告这些测量值——

```
VIRT        RES       SHR
 608          4         0 FPC
7208        420       332 C++ 
```

Free Pascal 程序的内存使用量**最高**报告是基准测试游戏报告的 Free Pascal 程序***的*** [内存使用](http://benchmarksgame.alioth.debian.org/play.html#memory)量。

* * *

**现在看看[x64 四核对比](http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&lang=fpascal&lang2=gpp#faster-programs-measurements)**

我们可以看到两种不同的情况：

1.  Pascal 和 C++ 程序都使用多个 MB，并且内存使用非常相似，相差不到 ~ 2 倍。当分配额外的内存来解决任务时，程序之间没有太大区别。

2.  C++ 程序使用几百 KB，而 Pascal 程序使用几 KB。当没有分配额外的内存来解决任务时，Pascal 程序会少用几百 KB。

* * *

这个问题提出了两种选择，但通常还有第三种选择——***我误解了发生了什么吗？***

C++ mandelbrot 程序可以使用比 Pascal mandelbrot 程序多 4000 倍的内存这一事实让 OP 无法相信，*这对 OP 来说似乎是不可能的*——但有一个足够简单的解释，**时间/空间权衡**。

[C++ 程序是多线程](http://benchmarksgame.alioth.debian.org/u32/program.php?test=mandelbrot&lang=gpp&id=7)的，编写为使用多核；但是[Pascal 程序是单线程](http://benchmarksgame.alioth.debian.org/u32/program.php?test=mandelbrot&lang=fpascal&id=3)的，编写为使用单核。

[Pascal 多线程 mandelbrot 程序](http://benchmarksgame.alioth.debian.org/u32/program.php?test=mandelbrot&lang=fpascal&id=2)的内存使用与 C++ 多线程程序的内存使用非常相似。

* * ***

# windows - 如何在批处理中检查文件是否为空

> ID：11225581
> 
> 赞同：20
> 
> 时间：2012-06-27T11:53:42.670
> 
> 标签：windows, batch-file

谷歌有几种方法可以检查文件是否为空，但我需要做相反的事情。

```
If (file is NOT empty)

do things 
```

我将如何批量执行此操作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T12:04:41.693

```
for /f %%i in ("file.txt") do set size=%%~zi
if %size% gtr 0 echo Not empty 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T12:04:08.310

这应该工作：

```
for %%R in (test.dat) do if not %%~zR lss 1 echo not empty 
```

`help if`表示您可以`NOT`直接在之后添加`if`以反转比较语句

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T12:03:53.553

```
set "filter=*.txt"
for %%A in (%filter%) do if %%~zA==0 echo."%%A" is empty 
```

键入`help for`命令行以获取有关 ~zA 部分的说明

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-05T02:10:30.463

您可以利用子例程/外部批处理文件来获得有用的[参数修饰符](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)来解决这个确切的问题

```
@Echo OFF
(Call :notEmpty file.txt && (
    Echo the file is not empty
)) || (
    Echo the file is empty
)
::exit script, you can `goto :eof` if you prefer that
Exit /B

::subroutine
:notEmpty
If %~z1 EQU 0 (Exit /B 1) Else (Exit /B 0) 
```

* * *

或者

notEmpty.bat

```
@Echo OFF
If %~z1 EQU 0 (Exit /B 1) Else (Exit /B 0) 
```

yourScript.bat

```
Call notEmpty.bat file.txt
If %errorlevel% EQU 0 (
    Echo the file is not empty
) Else (
    Echo the file is empty
) 
```

# javascript - 带有敲除的 HTML 实体

> ID：11225583
> 
> 赞同：14
> 
> 时间：2012-06-27T11:53:45.827
> 
> 标签：javascript, html, knockout.js

如何在绑定到 viewModel 中的变量的字段中输出 HTML 实体？我想`&larr;`在绑定到 HTML 中的 a 的字段中显示类似 ← ( )的 HTML 实体`span`。不幸的是，HTML 被转义了，所以浏览器显示 ← 而不是符号。

摆弄一个例子：http: [//jsfiddle.net/nwinkler/KES2j/](http://jsfiddle.net/nwinkler/KES2j/)

JavaScript：

```
var data = { value : '&larr;'};

var viewModel = {
    field: ko.mapping.fromJS(data)
};

ko.applyBindings(viewModel); 
```

HTML：

```
<p>HTML: &larr;</p>
<p>Knockout: <span data-bind='text: field.value'></span></p> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T13:11:46.320

您可以将`html`绑定用于类似这样的内容。它看起来像：

```
<p>Knockout: <span data-bind='html: field.value'></span></p> 
```

示例：http: [//jsfiddle.net/rniemeyer/KES2j/1/](http://jsfiddle.net/rniemeyer/KES2j/1/)

# ruby - 在 Jekyll 中生成 _site 文件的问题

> ID：11225589
> 
> 赞同：1
> 
> 时间：2012-06-27T11:53:56.727
> 
> 标签：ruby, jekyll

我刚刚迁移到另一台计算机并安装了 Jekyll。现在我似乎无法让 Jekyll 生成我的网站。当我跑步时，`jekyll --no-server`我得到：

```
/Users/sb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': iconv will be deprecated in the future, use String#encode instead.
Configuration from /Users/sb/Sites/drb/_config.yml
Building site: /Users/sb/Sites/drb -> ./_site
/Users/sb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): did not find expected ',' or ']' while parsing a flow sequence at line 6 column 13 (Psych::SyntaxError)
    from /Users/sb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/sb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/sb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/convertible.rb:33:in `read_yaml'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/post.rb:39:in `initialize'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:163:in `new'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:163:in `block in read_posts'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:161:in `each'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:161:in `read_posts'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:128:in `read_directories'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:98:in `read'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:38:in `process'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/bin/jekyll:250:in `<top (required)>'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/bin/jekyll:19:in `load'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/bin/jekyll:19:in `<main>'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/sb/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

Jekyll 似乎工作正常，但我的 markdown 文件`_posts`似乎没有转换为 HTML，因为我在`_site`. 删除`_site`目录然后重新生成我的站点会创建一个新的`_site`，但文件夹内没有内容。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:27:04.340

解决了。原来是在 YAML 前端问题中使用了问号。

# hadoop - 使用 log4j 的 Hadoop Yarn 任务级日志记录

> ID：11225590
> 
> 赞同：2
> 
> 时间：2012-06-27T11:53:58.760
> 
> 标签：hadoop, log4j, mapreduce, task

我一直在尝试在任务级别设置 Hadoop 日志记录，但到目前为止没有成功。

我已修改 log4j.properties 并将许多参数设置为 DEBUG 级别：

*   log4j.logger.org.apache.hadoop.mapred.Task=DEBUG
*   log4j.logger.org.apache.hadoop.mapred.MapTask=DEBUG
*   log4j.logger.org.apache.hadoop.mapred.ReduceTask=DEBUG
*   log4j.logger.org.apache.hadoop = 调试

但是，我从正在记录的任务中看不到任何 LOG.info 或 LOG.debug 消息。这是启用了 Yarn。

我不确定我在配置中遗漏了什么以使其正常工作。我想我最终应该在 nodemanage.out 日志文件中得到这些消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T23:50:56.177

您应该能够从 Yarn 控制台看到您的应用程序日志消息，但到达那里的路径有几个步骤。

1.) 转到 Yarn 控制台，通常是[http://yourserver:8088](http://yourserver:8088) 2.) 转到 Tools->Local Logs 3.) 找到“userlogs”链接并选择它 4.) 找到您的应用程序，例如 MapReduce 作业使用“应用程序”前缀而不是“工作”前缀命名并选择它。5.) 然后在容器日志通常是“syslog”下，您应该找到您的作业级别日志记录。

完整的示例路径如下。 [http://yourserver:8088/logs/userlogs/application_1427820474064_0003/container_1427820474064_0003_01_000019/syslog](http://yourserver:8088/logs/userlogs/application_1427820474064_0003/container_1427820474064_0003_01_000019/syslog)

# gwt - 托管模式和开发模式的区别

> ID：11225592
> 
> 赞同：0
> 
> 时间：2012-06-27T11:54:01.940
> 
> 标签：gwt

GWT 中的托管模式和开发模式有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:00:37.170

托管模式是开发模式的旧名称，它们是相同的。

有两种模式，目前称为开发模式和生产模式

开发模式运行 Java，而生产模式编译为 JavaScript。

这意味着在开发模式下，您使用的是真正的 java.lang.String 或 java.util.ArrayList 例如，而在生产模式下，它是正在使用的模拟版本。

有时会导致不同的结果（Java 的 Date 与 JavaScript 的完全不同）

# mysql - 如果连接表中不存在 SQL 命令显示 0

> ID：11225594
> 
> 赞同：3
> 
> 时间：2012-06-27T11:54:11.770
> 
> 标签：mysql, sql

我在 SQL 命令中遇到问题。

我有一张桌子，上面有问题，其他的有问题的可能答案，还有用户的回复。

想象以下示例：

**问题1**：谁将赢得半决赛？
**Aswners** : A) 葡萄牙 B) 西班牙
**回复**: 10 人投票 B) 西班牙, 0 人投票 A) 葡萄牙

```
SELECT a.answer, COUNT(r.id) as total
FROM replies r
LEFT JOIN answers a ON a.id = r.id_answer
LEFT JOIN questions q ON q.id = a.id_question
WHERE q.id = 1
GROUP BY r.id_answer 
```

我的意思是从
`SELECT`结果中得出：
**西班牙 10
葡萄牙 0** 

但我不能，我不知道该怎么做，因为我这样做的方式，我总是只从回复表中得到回复的结果。像这样：
**西班牙 10** 

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T11:59:42.557

你必须从你的问题和`LEFT JOIN`答复开始。

```
SELECT a.answer, COUNT(r.id_answer) AS total
FROM questions q
JOIN answers a ON ( a.id_question = q.id )
LEFT JOIN replies r ON ( r.id_answer = a.id )
WHERE q.id = 1
GROUP BY a.id, a.answer 
```

使用您当前的查询，您甚至不需要`question`：

```
SELECT a.answer, COUNT(r.id_answer) AS total
FROM answers a
LEFT JOIN replies r ON ( r.id_answer = a.id )
WHERE a.id_question = 1
GROUP BY a.id, a.answer 
```

有关SQL Fiddle 上的第二个查询，[请参阅此示例，该查询返回：](http://sqlfiddle.com/#!2/4b50a/2)

```
ANSWER      TOTAL
Spain       10
Portugal    0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:57:34.793

```
SELECT a.answer, COUNT(r.id) as total
FROM questions q
INNER JOIN answers a ON a.id_question  = q.id
LEFT JOIN replies r ON r.id_answer = a.id
WHERE q.id = 1
GROUP BY a.id; 
```

使用左连接而不是内连接。

**编辑**：加入更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:38:10.227

你的查询应该是这样的 -

```
SELECT a.answer, COUNT(r.id) as total 
FROM questions q 
INNER JOIN JOIN answers a ON q.id = a.id_question
LEFT JOIN REPLIES r ON a.id = r.id_answer
WHERE
q.id=1
GROUP BY 
a.answer 
```

这里重要的是 `count(r.id)`得到 `Portugal 0`

# comments - 你写简单评论的方式

> ID：11225602
> 
> 赞同：0
> 
> 时间：2012-06-27T11:54:32.837
> 
> 标签：comments

你们如何在一些只为自己使用的简单代码上写评论？

我主要编写 JavaScript 和 PHP 代码，但我真的找不到写评论的好方法。

如果我有一小段代码，我通常会这样做：

```
x = doThis(getSomeValueFromSomewhere());  // This is a short line of code 
```

我认为这看起来真的很好，但是当线路变长或多行时它并没有真正起作用，

```
 // Dont really like this since it's not clear if it describes only line 1, or all lines.
 aLongerVariableName = (getSomeValueFromSomewhere() == "this is what I want") ? "true value" : "false value";
 x = doThis(aLongerVariableName); 
```

你是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:29:04.107

改进 javascript 中的注释/注释块的一种简单方法，它在编程时非常容易和快速。

当您想在 javascript 中创建注释块时，您需要添加这种众所周知的方式：

```
/*
...
*/ 
```

所以当你需要decomment时你需要改变开始/*和结束*/，但我是这样使用的：

```
/*
...
//*/ 
```

这样，将开头的 /* 更改为 //* 您将取消整个块的注释，只添加一个字符，而无需搜索注释的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:58:31.853

```
(*
 * For blocks of comments that serve as important documentation
 * e.g descriptions of functions.
 *) 
```

也许重新格式化为

```
 (* For blocks of comments thet serve as important documentation
  * e.g descriptions of functions. *) 
```

和 // 用于像您一样的简短内联注释。不要忘记 Ctrl-/ 是你的朋友 ;-)

# javascript - 模板应用后敲除执行代码

> ID：11225603
> 
> 赞同：2
> 
> 时间：2012-06-27T11:54:35.290
> 
> 标签：javascript, dom, knockout.js

在与更改 observable 值相关的所有正常处理完成后（最重要的是对 DOM 的更改），我如何执行我的自定义代码？

我尝试订阅 observable 的方法，但该函数执行得太早（DOM 尚未修改）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:19:40.060

模板绑定有一个 afterRender 函数：

请参阅注释 3，大约在页面的一半处：http: [//knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:55:32.087

使用计算出的 observable 和[Knockout "throttle" 扩展器](http://knockoutjs.com/documentation/throttle-extender.html)。

基本思想是：

1.  创建一个计算的 observable，它取决于您要跟踪的实际 observable。
2.  使用 Knockout 油门扩展器来延迟计算 observable 的更新。即使是 0 毫秒的延迟也足以让 DOM 在重新计算计算的 observable 之前完成更新。
3.  订阅受限制的*计算 observable*。

上面引用的 Knockout 油门扩展器文档页面上的“示例 2：当用户停止键入时做某事”使用了这种技术。

# tfs - 特定用户的 TFS 查看历史记录

> ID：11225606
> 
> 赞同：0
> 
> 时间：2012-06-27T11:54:44.203
> 
> 标签：tfs

我正在使用 TFS 2010 并且想知道是否有一种简单的方法可以通过 IDE（或通过命令行）来查看给定用户的签入历史记录，按时间过滤。基本上，我想查看给定用户（或只是当前用户）的所有变更集列表，并能够指定日期范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:52:12.703

在命令提示符下，您可以使用“tf hist”将用户名和日期间隔作为参数传递。

```
tf hist path /user:username /version:D06/01/2012~D06/30/2012 
```

**有关tf 历史**的更多信息，请访问[http://msdn.microsoft.com/en-us/library/yxtbh4yh.aspx](http://msdn.microsoft.com/en-us/library/yxtbh4yh.aspx)

有关定义版本规范的更多信息，请访问[http://msdn.microsoft.com/en-us/library/56f7w6be.aspx](http://msdn.microsoft.com/en-us/library/56f7w6be.aspx)

版本规范是定义要应用的过滤器的部分。

# c# - URI 格式化 URL

> ID：11225609
> 
> 赞同：1
> 
> 时间：2012-06-27T11:55:02.697
> 
> 标签：c#, .net, .net-3.5

全部

我有以下代码行...（.net 3.5）

```
string URL = "http://api.linkedin.com/v1/people/url=http%3a%2f%2fuk.linkedin.com%2fpub%2fjulian-welby-everard%2f0%2fb97%2f416";
UriBuilder uri = new UriBuilder(URL); 
```

[这会在http://api.linkedin.com/v1/people/url=http://uk.linkedin.com/pub/julian-welby-everard/0/b97/416](http://api.linkedin.com/v1/people/url=http://uk.linkedin.com/pub/julian-welby-everard/0/b97/416)的 URI 对象中返回一个 URL， 它是被解码了，我不知道会发生什么

所以我尝试对数据进行两次编码

```
string URL = "http://api.linkedin.com/v1/people/url=http%253a%252f%252fuk.linkedin.com%252fpub%252fjulian-welby-everard%252f0%252fb97%252f416";
UriBuilder uri = new UriBuilder(URL); 
```

现在返回如下 URL [http://api.linkedin.com/v1/people/url=http%253a%252f%252fuk.linkedin.com%252fpub%252fjulian-welby-everard%252f0%252fb97%252f416](http://api.linkedin.com/v1/people/url=http%253a%252f%252fuk.linkedin.com%252fpub%252fjulian-welby-everard%252f0%252fb97%252f416)注意这次它没有解码任何东西，我希望它会像第一次尝试一样解码，但由于它已经过双重编码，它会以正确的格式返回字符串。

所以问题如下，我可以阻止 URI 对象对提供的 URL 进行解码，这样我就可以将正确的数据传递给 HttpWebRequest。

朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:08:37.277

我相信您正在寻找返回 http%3a%2f%2fwww.google.com%2f 的 HttpUtility.UrlEncode("http://www.google.com/")。

# javascript - Fusion Tables 查询速度

> ID：11225616
> 
> 赞同：1
> 
> 时间：2012-06-27T11:55:18.160
> 
> 标签：javascript, caching, google-fusion-tables

我正在尝试仅使用客户端 JavaScript 来实现 Fusion Tables 界面中可用的自动完成逻辑：

![在此处输入图像描述](../Images/96fa6a6425e81f1d1604817fdd043649.png)

到目前为止，我发现这个效果很好：[https ://developers.google.com/fusiontables/docs/samples/autocomplete](https://developers.google.com/fusiontables/docs/samples/autocomplete)

它允许我检索属性的所有值，组合在一起，以便我可以自动完成它们。问题是它**非常**慢。查询

```
"SELECT 'Store Name', COUNT() " +
            'FROM ' + tableId + " GROUP BY 'Store Name' 
```

每次运行最多需要 10 秒。这是因为我的表很大，超过 15 万行。

但是，上面屏幕截图中的*本机*界面非常**快**。我尝试查看代码并查看他们正在进行的查询类型（也许他们有这些结果的缓存），但我找不到任何可以引导我找到解决方案的东西。

有任何想法吗？我的想法是，如果谷歌原生界面正在这样做，那么我肯定也有办法这样做......我想避免不得不使用第三方服务器来缓存这些结果，那将是很容易解决，这不是我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:20:10.940

我认为他们在服务器端使用嵌套集和 trie 数据结构之类的东西。嵌套集查询速度快，但插入速度快，而 trie 数据结构的文本检索速度也快。我认为您可以将两者结合起来进行快速查找。

# c# - 无法在 Winform 中的 ListView 中设置图像（c#）

> ID：11225623
> 
> 赞同：0
> 
> 时间：2012-06-27T11:55:32.310
> 
> 标签：c#

我正在使用 WinMobile 并在模拟器上运行我的代码。我设置图像的代码是：

```
ImageList il = new ImageList();
if (File.Exists(@"online1.BMP"))
    il.Images.Add((Image)new Bitmap(@"c:\online1.BMP")); 
```

出于某种原因，尽管该文件存在于文件夹中，但条件始终为 FALSE。“File.Exists”函数是指手机的库吗？还是计算机的（我假设）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:58:12.683

尝试使用完整路径作为 File.Exists() 的参数

# jquery - 我如何获得用户结束拖动的最后一个单元格

> ID：11225633
> 
> 赞同：1
> 
> 时间：2012-06-27T11:56:09.170
> 
> 标签：jquery

我拖着细胞。使用下面的代码，我得到开始拖动的单元格文本。我如何获得用户停止拖动的最后一个单元格文本。

```
var firstcell= $('td.csstdhighlight:first').text(); 
```

在拖动即时通讯向单元格添加类

```
$(".csstablelisttd").mousedown(function (e)
            {
                //This line gets the index of the first clicked row.
                lastRow = $(this).closest("tr")[0].rowIndex;
                $(".csstdhighlight").removeClass("csstdhighlight");
                $(this).children(":not(:first)").addClass("csstdhighlight");
                e.preventDefault();
                flag = true;
                return false;
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:22:26.810

```
var endRow = $('td.csstdhighlight:last').parent();
                alert("lastchild" + endRow.text()); 
```

# algorithm - 合适的树数据结构

> ID：11225635
> 
> 赞同：1
> 
> 时间：2012-06-27T11:56:11.957
> 
> 标签：algorithm, data-structures, tree, go, binary-tree

这是最适合对分层（包含关系）内容建模的树数据结构。我的语言有点不正式，因为我没有太多关于这些的理论背景

1.  父节点可以有多个子节点。
2.  唯一父级
3.  树结构很少更改，重新创建比添加/重新排列节点还可以。
4.  双向遍历
5.  主要感兴趣，找父母，找孩子，找一个唯一id的节点
6.  每个节点都有一个唯一的 id
7.  可能总共只有几百个节点，所以性能影响可能不大
8.  持久性可能很好，但不是必需的，因为我计划在从数据库读取数据后在内存中使用它。

我选择的语言是 go (golang)，所以可用的库是有限的。请在不考虑最符合上述要求的语言的情况下给出建议。

[http://godashboard.appspot.com/](http://godashboard.appspot.com/)列出了一些可用的树库。不确定质量和它们的活跃程度。我读过上帝

1.  [https://github.com/petar/GoLLRB](https://github.com/petar/GoLLRB)
2.  [http://www.stathat.com/src/treap](http://www.stathat.com/src/treap)

请告知所需的任何其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:11:08.253

由于只有数百个节点，因此只需将结构与您描述的相同。

*   每个节点都有一个对父节点的唯一引用。

*   每个节点都有一个子节点列表。

*   每个节点都有一个id

*   有一个来自 id --> 节点的（外部）映射。甚至可能没有必要。

2 路遍历是可能的，因为父节点和子节点是已知的。查找父母和查找孩子也是如此。
如果没有地图，则可以通过遍历整个树来查找 id。或者您可以使用地图快速找到节点。

添加节点很容易，因为每个节点都有一个列表。重新排列也很容易，因为您可以自由地从子节点列表中添加/删除并重新分配父节点。

我从与语言无关的方面回答这个问题。这是一个没有任何限制的树形结构，因此实现并不那么流行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:11:34.900

我认为 B-Tree 可以满足您的要求。[http://en.wikipedia.org/wiki/B-tree](http://en.wikipedia.org/wiki/B-tree)

第 1,2,3 点：B-Tree 天生就支持这一点。（多个孩子，唯一的父母，允许插入/删除元素

第 4,5 点：默认情况下，每个节点都有指向其子节点的指针。此外，您可以维护每个节点的父级指针。您可以借助这些指针使用 BFS/DFS 实现搜索/遍历操作

Pomit 6：如果您不允许重复记录，则取决于您的插入方法的实现

Pont 7,8：这不是问题，因为您提到您只有数百条记录。虽然 B-Trees 对于外部磁盘存储也是非常好的数据结构。

# asp.net-mvc - ASP.NET MVC 两个文件上传，不同的目的地

> ID：11225636
> 
> 赞同：2
> 
> 时间：2012-06-27T11:56:12.493
> 
> 标签：asp.net-mvc, file-upload

我正在尝试将两个不同的文件上传到同一表单上的两个不同的数据库字段中。

```
------------------------------------
reportid | name | image | template |
------------------------------------ 
```

这是表格外观。所以我想将文件上传到图像和模板。我的模型：

```
public class Report
{
    [Key]
    public int ReportID { get; set; }

    [Required]
    public string Name { get; set; }

    public byte[] Image { get; set; }

    public byte[] Template { get; set; }

} 
```

我在控制器中的 Create 方法：

```
public ActionResult Create(Report report, HttpPostedFileBase file, HttpPostedFileBase temp)
    {
        if (ModelState.IsValid)
        {
            if (file != null && file.ContentLength > 0)
            {
                using (MemoryStream ms = new MemoryStream())
                {
                    file.InputStream.CopyTo(ms);
                    report.Image = ms.GetBuffer();
                }
            }

            if (temp != null && temp.ContentLength > 0)
            {
                using (MemoryStream ms1 = new MemoryStream())
                {
                    temp.InputStream.CopyTo(ms1);
                    report.Template = ms1.GetBuffer();
                }
            }
            db.Reports.Add(report);
            db.SaveChanges();
            db.Configuration.ValidateOnSaveEnabled = true;
            return RedirectToAction("Index");  
        } 
```

关于上传的部分观点：

```
<div class="editor-label">
   <%:Html.LabelFor(model => model.Image) %>
</div>
<div class="editor-field">
   <input type="file" id="fuImage" name="file" />
</div>
<div class="editor-label">
   <%:Html.Label("Template") %>
</div>
<div class="editor-field"> 
   <input type="file" id="temp" name="temp"/>
</div>
<p>
   <input type="submit" value="Create" />
</p> 
```

我很困惑，因为我不能将`IEnumerable<HttpPostedFileBase> files`其用作方法中的参数，`Create`因为我需要将其保存在不同的字段中，或者可以吗？我应该如何处理这个？请帮助：S

注意：图片上传工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:12:01.227

为什么不使用`IEnumerable<HttpPostedFileBase>`？你可以像这样使用它。

```
[HttpPost] 
public ActionResult Create(Report report, IEnumerable<HttpPostedFileBase> files)
{
  if (ModelState.IsValid)
  {
    //Let's take first file
     if(files.ElementAt(0)!=null)
     { 
       var file1=files.ElementAt(0);
       if (file1!= null && file1.ContentLength > 0)
       {
          //do processing of first file
       }
     }

     //Let's take the second one now.
     if(files.ElementAt(1)!=null)
     {
       var temp =files.ElementAt(1);
       if (temp!= null && temp.ContentLength > 0)
       {
          //do processing of second file here
       }
     }
  }
  //Do your code for saving the data. 
  return RedirectToAction("Index");
} 
```

**编辑：在您的编辑中看到您的视图标记后。**

文件输入元素的名称应与您的操作方法中的参数名称相同。（`files`在这个例子中）

```
@using (Html.BeginForm("Create", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  <b>File 1</b>   
  <input type="file" name="files" id="file1" />
  <b>File 2</b>
  <input type="file" name="files" id="file2" />
  <input type="submit"  />
} 
```

此代码假定仅读取集合中的前 2 个条目。由于您只需要 2 个文件，因此我对索引进行了硬编码。

Phil 有一篇很好的博客[文章](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)很好地解释了它。

# ios - 核心情节：如何隐藏情节、轴和标签？

> ID：11225638
> 
> 赞同：8
> 
> 时间：2012-06-27T11:56:17.753
> 
> 标签：ios, core-plot

我有一个带有 Y 轴和 X 轴的图形，在默认绘图空间以及主绘图上绘制，然后我有单独的绘图空间用于辅助绘图，每个绘图空间都有自己的 Y 轴（所有绘图的 X 轴都相同） .

我正在实现按钮来打开和关闭辅助图，我希望它基本上包括整个绘图空间（绘图、自定义 y 轴和自定义 y 轴的标签）。绘图空间似乎没有任何“隐藏”属性，而且绘图和轴都具有“隐藏”属性，将这些设置为“是”会使轴标签可见。

*   完全隐藏绘图空间内容而不会导致不必要的重绘的最佳方法是什么？

我想一种方法可能是完全删除绘图空间并从图中绘图，但这感觉不直观。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-23T20:22:15.267

您可以在axisSet级别将所有轴设置为隐藏，也可以通过为轴分配CPTAxisLabelingPolicyNone的标签策略来隐藏标签。这个解决方案对我很有效：

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.graphHostingView.hostedGraph.axisSet;
axisSet.hidden = YES;

CPTAxis *y = axisSet.yAxis;
y.labelingPolicy = CPTAxisLabelingPolicyNone;

CPTXYAxis *x = axisSet.xAxis;
x.labelingPolicy = CPTAxisLabelingPolicyNone; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T20:52:30.693

设置在`hidden`要`YES`隐藏的轴上。如果您使用自定义标签（标签策略`CPTAxisLabelingPolicyNone`），只需`axisLabels`将`nil`. 当您希望它们重新出现时设置新标签。对于其他标签策略，将 设置`labelFormatter`为`nil`隐藏标签并在您希望它们可见时分配有效的格式化程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-25T19:49:07.860

您还可以将所有标签设置为隐藏

```
CPTAxis *axis = someAxis;
hidden = YES;

axis.hidden = hidden;
for (CPTAxisLabel *axisLabel in axis.axisLabels) {
    axisLabel.contentLayer.hidden = hidden;
} 
```

# javascript - jQuery中的表单标签值

> ID：11225643
> 
> 赞同：1
> 
> 时间：2012-06-27T11:56:38.113
> 
> 标签：javascript, jquery, validation

```
document.forms["regform"]["fname"].value; 
```

在 java 脚本中，我通过使用上述语句获取具有名称（“fname”）的输入值，该值采用具有名称（“regform”）的形式。我怎样才能在 jQuery 中得到它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:10:23.277

```
var $form = $('form[name="regform"]'),
    $fname = form.find('[name="fname"]');

alert($fname.val());

// or you can just do wrap the native DOM version:

var $input = $(document.forms["regform"]["fname"]);

alert($fname.val()); 
```

# python - SQLite 和 Python。值写入没有错误，但在程序终止后不在数据库中

> ID：11225644
> 
> 赞同：3
> 
> 时间：2012-06-27T11:56:39.653
> 
> 标签：python, sqlite

我在一个脚本中遇到了 Python 和 SQLite 的问题，该脚本从 Internet 下载数据并将它们放入 SQLite 数据库。在执行开始时，我打开连接并分配光标。然后将该游标发送到下载数据并将其写入数据库的方法。到目前为止，我知道 create_schema 方法正在工作，因为数据库是使用正确的结构创建的，其他方法似乎失败了，但在脚本中执行时不会引发错误。我尝试使用 sqlite3 终端工具进入数据库并从表中选择值，但 select * 返回一个空结果。我不太确定光标如何与方法一起使用，但希望将其发布在这里将帮助我更好地理解。提前感谢您的帮助。

（PS：对缩进感到抱歉。我没有找到一种很好的方法来一次性对所有文本进行缩进。关于如何做到这一点的任何提示？）

脚本：

```
# -*- coding: UTF-8 -*-
import sqlite3
import httplib
import urllib2
import os
from xml.dom import minidom, Node
from xml.etree import ElementTree

SITE = "http://data.stortinget.no/eksport/"
DATA = "data.db"

def get_perioder(cur):
    DOK = "stortingsperioder"
    try:
        page = urllib2.urlopen(SITE+DOK)
    except:
        print "Failed to fetch item "+DOK
   if page:
    tree = ElementTree.parse(page)
    root = tree.getroot()
    top = list(root)[2]
    elements = list(top)
    for el in elements:
        fra = el.find('{http://data.stortinget.no}fra').text
        per_id = el.find('{http://data.stortinget.no}id').text
        til = el.find('{http://data.stortinget.no}til').text
        print "id: %s fra: %s til: %s" % (per_id, fra, til)
        cur.execute("""INSERT INTO perioder(fra, id, til) VALUES('%s','%s','%s')""" % (fra, per_id, til))
else:
    print "Could not load page: "+DOK
return cur

def get_sesjoner(cur):
DOK = "sesjoner"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK
if page:
    tree = ElementTree.parse(page)
    root = tree.getroot()
    top = list(root)[2]
    elements = list(top)
    for el in elements:
        fra = el.find('{http://data.stortinget.no}fra').text
        ses_id = el.find('{http://data.stortinget.no}id').text
        til = el.find('{http://data.stortinget.no}til').text
        assert attribute in (fra, ses_id, til)
        print "id: %s fra: %s til: %s" % (ses_id, fra, til)
        cur.execute("""INSERT INTO sesjoner(fra, id, til) VALUES(%s, %s, %s)""" % (fra, ses_id, til))
else:
    print "Could not load page: "+DOK
return cur

def get_emner(cur):
DOK = "emner"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK

if not page:
    print "Could not load page:!! "+DOK
    return
tree = ElementTree.parse(page)
root = tree.getroot()
top = list(root)[1]
elements = list(top)
for el in elements:
    navn = el.find('{http://data.stortinget.no}navn').text
    main_emne_id = el.find("{http://data.stortinget.no}id").text
    print "HOVED: %s %s" % (navn, main_emne_id)
    cur.execute("""INSERT INTO hovedemner(id, navn) VALUES('%s','%s');""" % (main_emne_id, navn))
    if("true" in el.find("{http://data.stortinget.no}er_hovedemne").text):
        for uel in el.find("{http://data.stortinget.no}underemne_liste"):
            navn = uel.find("{http://data.stortinget.no}navn").text
            emne_id = uel.find("{http://data.stortinget.no}id").text
            print "UNDER: %s %s, horer til: %s" % (navn, emne_id, main_emne_id)
            cur.execute("""INSERT INTO underemner(id, navn, hovedemne_id) VALUES('%s', '%s', '%s');""" % (emne_id, navn, main_emne_id))
return cur

def get_fylker(cur):
DOK = "fylker"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK

tree = ElementTree.parse(page)
root = tree.getroot()
top = list(root)[1]
elements = list(top)
for el in elements:
    fylke_id = el.find("{http://data.stortinget.no}id").text
    navn =  el.find("{http://data.stortinget.no}navn").text
    print ("id: %s, navn: %s") % (fylke_id, navn)
    cur.execute("""INSERT INTO fylker(id, navn) VALUES('%s','%s');""" % (fylke_id, navn))

return cur

def get_partier(cur):
DOK = "allepartier"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK

tree = ElementTree.parse(page)
root = tree.getroot()
top = list(root)[1]
elements = list(top)
for el in elements:
    parti_id = el.find("{http://data.stortinget.no}id").text
    navn =  el.find("{http://data.stortinget.no}navn").text
    print ("id: %s, navn: %s") % (parti_id, navn)
    cur.execute("""INSERT INTO partier(id, navn) VALUES('%s','%s');""" % (parti_id, navn))

return cur

def get_komiteer(cur):
DOK = "allekomiteer"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK

tree = ElementTree.parse(page)
root = tree.getroot()
top = list(root)[1]
elements = list(top)
for el in elements:
    kom_id = el.find("{http://data.stortinget.no}id").text
    navn = el.find("{http://data.stortinget.no}navn").text
    print "id: %s navn: %s" % (kom_id, navn)
    cur.execute("""INSERT INTO partier(id, navn) VALUES('%s','%s');""" % (kom_id, navn))
return cur

def get_representanter(cur):
DOK = "dagensrepresentanter"
try:
     page = urllib2.urlopen(SITE+DOK)
except:
    print "Failed to fetch item "+DOK

tree = ElementTree.parse(page)
root = tree.getroot()
top = list(root)[1]
elements = list(top)
for el in elements:
    doedsdato = el.find("{http://data.stortinget.no}doedsdato").text
    etternavn = el.find("{http://data.stortinget.no}etternavn").text
    foedselsdato = el.find("{http://data.stortinget.no}foedselsdato").text
    fornavn = el.find("{http://data.stortinget.no}fornavn").text
    repr_id = el.find("{http://data.stortinget.no}id").text
    kjoenn = el.find("{http://data.stortinget.no}kjoenn").text
    fylke = el.find("{http://data.stortinget.no}fylke/{http://data.stortinget.no}id").text
    parti = el.find("{http://data.stortinget.no}parti/{http://data.stortinget.no}id").text
    #komiteer = el.find("{http://data.stortinget.no}komiteer_liste/{http://data.stortinget.no}komite/{http://data.stortinget.no}id").text
    print "repr: %s, %s %s, parti: %s, fylke: %s" % (repr_id, fornavn, etternavn, parti, fylke)
    cur.execute("""INSERT INTO representanter(doedsdato, etternavn, foedselsdato, fornavn, id, kjoenn, fylke, parti) VALUES('%s','%s','%s','%s','%s','%s','%s','%s');""" % (doedsdato, etternavn, foedselsdato, fornavn, repr_id, kjoenn, fylke, parti))

return cur

def create_schema(cur):
cur.execute("DROP TABLE IF EXISTS perioder")
perioder = "CREATE TABLE  perioder(fra varchar(255), id varchar(255), til varchar(255))"
cur.execute("DROP TABLE IF EXISTS sesjoner")
sesjoner = "CREATE TABLE sesjoner(fra varchar(255), id varchar(255), til varchar(255))"
cur.execute("DROP TABLE IF EXISTS hovedemner")
hovedemner = "CREATE TABLE hovedemner(id int, navn varchar(255));"
cur.execute("DROP TABLE IF EXISTS underemner")
underemner = "CREATE TABLE underemner(id int, navn varchar(255), hovedemne_id int)"
cur.execute("DROP TABLE IF EXISTS fylker")
fylker = "CREATE TABLE fylker(id varchar(255), navn varchar(255));"
cur.execute("DROP TABLE IF EXISTS partier")
partier = "CREATE TABLE partier(id varchar(255), navn varchar(255));"
cur.execute("DROP TABLE IF EXISTS komiteer")
komiteer = "CREATE TABLE komiteer(id varchar(255), navn varchar(255));"
cur.execute("DROP TABLE IF EXISTS representanter")
representanter = "CREATE TABLE representanter(doedsdato varchar(255), etternavn varchar(500), foedselsdato varchar(255), fornavn varchar(500), id varchar(255), kjoenn varchar(255), fylke varchar(255), parti varchar(255));"
cur.execute(perioder)
cur.execute(sesjoner)
cur.execute(hovedemner)
cur.execute(underemner)
cur.execute(fylker)
cur.execute(partier)
cur.execute(komiteer)
cur.execute(representanter)
return cur

if __name__ == "__main__":
conn = sqlite3.connect(DATA)
cur = conn.cursor()
cur = create_schema(cur) 
cur = get_perioder(cur)
cur = get_sesjoner(cur)
cur = get_emner(cur)
cur = get_fylker(cur)
cur = get_partier(cur)
cur = get_komiteer(cur)
cur = get_representanter(cur)
conn.close 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T12:00:25.820

据我所知，您最后不会调用 commit() 。不过，这可能不会将任何数据写入数据库。来自 SQLITE3 文档：

> 连接.commit()
> 
> 此方法提交当前事务。如果您不调用此方法，则自上次调用 commit() 以来所做的任何事情都不会从其他数据库连接中看到。如果您想知道为什么看不到已写入数据库的数据，请检查您是否忘记调用此方法。

# linq - NHibernate Linq 按条件分组

> ID：11225646
> 
> 赞同：2
> 
> 时间：2012-06-27T11:56:44.703
> 
> 标签：linq, nhibernate

似乎 NHibernate Linq 不理解分组的 .Where 方法条件。我得到以下代码：

```
 var q = from o in session.Query<OrdreLinjeVerdier>()
     where o.OrdreLinjeReserve > 0
     group o by o.ProduktLager.ProduktLagerID into g
     select new 
     { 
         ProduktLagerID = g.Key,
         OrdreRes = g.Sum(x => x.OrdreLinjeReserve),
         OrdreResUtenSpesial = 
           g.Where(x => x.LeveringsType.LeveringsTypeID == 1)
            .Sum(x => (double?)x.OrdreLinjeReserve)
     }; 
```

它就像这样进入数据库：

```
select ordrelinje0_.ProduktLagerID as col_0_0_, 
    cast(sum(ordrelinje0_.OrdreLinjeReserve) as DECIMAL(19,5)) as col_1_0_,
    cast(sum(ordrelinje0_.OrdreLinjeReserve) as DOUBLE PRECISION) as col_2_0_ 
  from OrdreLinjeVerdier ordrelinje0_ 
  where ordrelinje0_.OrdreLinjeReserve>@p0 
  group by ordrelinje0_.ProduktLagerID;

  @p0 = 0 
```

所以基本上 g.Where 的条件对 SQL 查询没有影响。

看起来像错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:51:49.843

对我来说它看起来像一个错误。

在确保最新的稳定版本（截至今天为 3.3.1）发生这种情况后，请在[https://nhibernate.jira.com上创建问题](https://nhibernate.jira.com)

# jquery - 悬停链接时更改内容div

> ID：11225647
> 
> 赞同：1
> 
> 时间：2012-06-27T11:56:48.613
> 
> 标签：jquery, css, hover

对于一个商业网站，我试图实现以下目标： - 一个带有客户推荐的 div。- 包含这些客户徽标的列表。

当用户将鼠标悬停在徽标上时，应在 div 中显示正确的推荐。

我有以下标记：

```
<div id="testimonial-container"><div class="testimonial">Here comes a testimonial</div>
    <div class="testimonial">Here comes another testimonial</div>
    <div class="testimonial">And another one</div>
    <ul class="testimonial-logos">
       <li><a><img src="logo-1.jpg" /></a></li>
       <li><a><img src="logo-2.jpg" /></a></li>
       <li><a><img src="logo-3.jpg" /></a></li>
    </ul>
</div> 
```

悬停效果将使用 CSS（不透明度：0 和 1）完成，因此它不是真正的滑块。

要将类添加到活动推荐中，我使用以下代码：

```
jQuery('#testimonial-container .testimonial-logos a').hover(function(){
    jQuery('#testimonial-container .testimonial, #testimonial-container .testimonial-logos a').addClass('active');
}); 
```

任何想法如何切换 div 中的推荐？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:01:30.127

例如，我会给您的每个推荐书一个 ID，`<div class"testimonial" id="logo-1.jpg">`然后将鼠标悬停在您的徽标上，它可以找到正确的推荐书并显示它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:07:04.983

假设推荐与相应徽标的顺序相同，那么这样的事情将起作用（放置在文档就绪处理程序或正文末尾的脚本块中）：

```
var $container = $("#testimonial-container"),
    $testimonials = $(".testimonial", $container).hide();

$(".testimonial-logos li", $container).hover(function() {
    $testimonials.eq( $(this).addClass("active").index() ).show();
}, function() {
    $testimonials.eq( $(this).removeClass("active").index() ).hide();
}); 
```

**演示：http:** [//jsfiddle.net/YG5aV/3](http://jsfiddle.net/YG5aV/3)

这会缓存一个包含推荐 div 的 jQuery 对象，并立即将它们全部隐藏。然后在悬停处理程序中，在鼠标*输入*时，它会显示与被悬停的徽标相对应的那个，而在鼠标*离开*时，它会再次隐藏它。

*更新：如果打算只在鼠标进入而不是鼠标进入和*离开时做某事，那么我建议`.mouseenter()`而不是`.hover()`因为后者是分配进入处理程序和离开处理程序的快捷方式。以下内容执行您在评论中描述的内容 - 请注意`.eq(0).mouseenter()`最后的 li 元素，它会触发第一个 li 元素的 mouseenter ，以便它成为开始的活动元素。

```
var $container = $("#testimonial-container"),
    $testimonials = $(".testimonial", $container).hide(),
    $prev;

$(".testimonial-logos li", $container).mouseenter(function() {
    if ($prev)
       $testimonials.eq( $prev.removeClass("active").index() ).hide();
    $testimonials.eq( ($prev = $(this).addClass("active")).index() ).show();
}).eq(0).mouseenter(); 
```

演示：http: [//jsfiddle.net/YG5aV/4/](http://jsfiddle.net/YG5aV/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:11:24.983

您可以使用 .index() 和 .eq() 选择器来确定您悬停的链接。

```
$('#testimonial-container .testimonial-logos a').hover(function(){
    var index = $('#testimonial-container .testimonial-logos a').index(this);
    $('#testimonial-container .testimonial, #testimonial-container .testimonial-logos a').removeClass('active');
    $('#testimonial-container .testimonial, #testimonial-container .testimonial-logos a').eq(index).addClass('active');
}); 
```

jsfiddle 链接：http: [//jsfiddle.net/8EgB4/](http://jsfiddle.net/8EgB4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:11:04.190

[您可以使用index](https://stackoverflow.com/questions/4654028/getting-the-element-number-in-jquery)获取悬停子项的序号，然后使用[nth-child 选择器](http://api.jquery.com/nth-child-selector/)访问相关推荐。nth-child 选择器使用序数，因此您需要将 1 添加到索引值才能获得正确的推荐。您还需要确保以相同的顺序列出您的徽标和推荐。

# spotify - 曲目不显示在 Spotify-播放列表-视图中

> ID：11225649
> 
> 赞同：0
> 
> 时间：2012-06-27T11:56:53.647
> 
> 标签：spotify

我正在使用 JS-Spotify 库中的默认播放列表对象并构建一个播放列表。

然后我使用这个代码：

```
 var playlistList = new views.List(pl);
                playlistList.node.classList.add('sp-light');

                $(".favAlbums").append(playlistList.node); 
```

但是当我第一次用这个视图加载页面时，曲目没有显示在播放列表 DIV 中。播放列表 DIV 本身可以。是什么原因造成的？（我在不同的地方使用完全相同的代码，它工作得很好）

更新：/这似乎是一个渲染问题，因为当我调整 Spotify 应用程序的大小时，会出现曲目条目。但是在调整大小之前，检查器中的 DIV 是空的。

# objective-c - Xcode - 如何将 XIB 连接到 ViewController 类

> ID：11225654
> 
> 赞同：59
> 
> 时间：2012-06-27T11:57:06.227
> 
> 标签：objective-c, xcode, viewcontroller

我首先创建了我的 TestViewController.h 和 *.m。之后是我的 TestView.xib。

现在我需要告诉我的 xib：“是的，请将 TestViewController 类作为我的文件所有者”。

我打开我的 xib，转到其 fileOwner 的身份检查器并在“自定义类”TestViewController 下选择。

但这似乎还不够——当我打开 TestView.xib，然后选择“辅助编辑器视图”时，它应该会在分屏的右侧显示相应的 ViewController——在我的例子中是“TestViewController.h” . 但事实并非如此！

是否有必要通过将行拖到文件中以任何方式将 xib 绑定​​到其视图控制器，就像您使用插座和操作一样？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-27T12:09:04.570

单击以选择 xib。现在，选择文件的所有者。在右侧的属性面板中，选择第三个选项卡“Identity Inspector”。有一个名为**Custom Class**的标题。在那里给出您的视图控制器的名称。在此之后，您可以将元素与文件的所有者联系起来。

![在此处输入图像描述](../Images/eca75834cd071abbfed0926de2272897.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-08-01T20:30:06.623

我想我在创建 UIViewController 子类时确实遇到了这种情况，但在我这样做时忘记检查“使用 .xib for UI”。后来，我回去单独创建了.xib。

这是关联新 UIViewController 和 .xib 的更一步一步的方法。

1.  在 IB 左侧窗格的占位符下选择文件的所有者。在 Property Inspector（IB 的右窗格）中，选择第三个选项卡并编辑“Custom Class”下的“Class”作为新 UIViewController 子类的名称。

2.  然后在左窗格中按住 ctrl 单击或右键单击 File's Owner，然后在左窗格的 Objects 部分中的顶层视图中画一条线。选择“查看”插座，您就完成了。

您现在应该能够设置其他出口和操作。您已准备好在代码中实例化您的视图控制器并使用 initWithNibName 和您的 nib 名称来加载它。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-27T12:11:34.873

在视图控制器中创建一个“视图”出口（UIView）并将其标记为 IBOutlet。（当您在 xcode 中创建文件时使用正确的默认值/模式时，该属性应该已经存在。）在 Interface Builder 中，在主视图和视图控制器/文件所有者的视图属性/出口之间创建一个链接。只是为了全貌：在创建/分配视图控制器时，您应该使用适当的 XIB 文件对其进行初始化。这正是视图控制器对象绑定到从 XIB 文件生成的视图的时刻。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-05T04:51:20.407

1）首先就像每个人所说的在文件所有者类中给出视图控制器名称

2）选择文件的所有者从那里拖一条线来查看这连接了两者

3）创建一个视图控制器的实例并将其添加到窗口中，代码片段如下，

```
MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyView" bundle:nil]; 
```

4）最后将视图控制器的视图作为子视图添加到窗口中。要做到这一点，编码如下，

```
[window addSubview:[controller view]]; 
```

在 appdelegate 上尝试以下代码段

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after application launch
    [window makeKeyAndVisible];

    MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyView" bundle:nil];
    [window addSubview:[controller view]];
 } 
```

5）使用以下代码片段最大化视图到窗口的大小，以便不会出现间隙

```
[controller.view setFrame:[[UIScreen mainScreen] applicationFrame]]; 
```

现在您将看到您预期的视图控制器...

我希望这有帮助....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:03:42.483

是的，您必须从界面生成器将视图属性添加到该视图控制器的文件所有者：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T12:07:22.340

选择您的文件所有者转到身份检查器窗口，并将文件所有者的类名更改为您的视图 .h 文件，这将连接。

# c - 我无法使用 SHFileOperation 删除文件

> ID：11225667
> 
> 赞同：2
> 
> 时间：2012-06-27T11:58:08.390
> 
> 标签：c, windows, winapi

我想删除一个文件到回收站。我使用这段代码。

```
 SHFILEOPSTRUCT FileOp;
    FileOp.hwnd = NULL;
    FileOp.wFunc=FO_DELETE; 
    FileOp.pFrom= lpFileName; //it's my value  \\?\C:\WorkFolder\qweqw.docx
    FileOp.pTo = NULL;
    FileOp.fFlags=FOF_ALLOWUNDO|FOF_NOCONFIRMATION;
    FileOp.hNameMappings=NULL;      
    int t_res = SHFileOperation(&FileOp); // t_res = 124
    return t_res; 
```

我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:01:50.310

1.  是什么`t_res`，它应该给出错误代码并提示原因
2.  请注意，`pFrom`需要文件，而不是单个文件，因此您应该用两个零终止缓冲区，请参阅[MSDN 的文档摘录](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759795%28v=vs.85%29.aspx)：

> 尽管此成员被声明为单个以空字符结尾的字符串，但它实际上是一个可以保存多个以空字符分隔的文件名的缓冲区。每个文件名都以单个 NULL 字符结尾。最后一个文件名以双 NULL 字符 ("\0\0") 结束，表示缓冲区结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:03:21.817

[根据文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)，错误代码是：

> DE_INVALIDFILES 0x7C 源或目标或两者中的路径无效。

您没有提及对此的任何分析，因此我的建议是深入研究文件名的表示方式。它是正确的编码吗？

# iphone - 带有标签栏控制器的多个拆分视图控制器

> ID：11225671
> 
> 赞同：0
> 
> 时间：2012-06-27T11:58:19.353
> 
> 标签：iphone, ios, uisplitviewcontroller, ipad

我在选项卡栏中有五个视图，单击选项卡栏的每个项目都会打开一个视图控制器。我的视图层次结构类似于 window-->uiviewcontroller-->uitabbar 控制器 其中两个标签栏包含 splitview 控制器。所以在这里我必须生成两个不同的拆分视图控制器并且我知道我可以从窗口添加拆分视图但是我如何生成多个拆分视图控制器？

# android - 下载图片并存储在 sdcard 文件夹中

> ID：11225675
> 
> 赞同：2
> 
> 时间：2012-06-27T11:58:36.240
> 
> 标签：android, android-sdcard, filenotfoundexception

我想从 url 下载图像并存储在 sdcard 的文件夹中。
如果文件夹不存在，则制作文件夹并保存。
但它给出了以下例外：

```
java.io.FileNotFoundException: /mnt/sdcard (Is a directory) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:15:08.800

信息很明确。**/mnt/sdcard**是目录而不是文件。您需要创建写入**非目录**路径的**FileOutputStream 。**

 **例如：

```
//Setting up cache directory to store the image
File cacheDir=new File(context.getCacheDir(),"cache_folder");

// Check if cache folder exists, otherwise create folder. 
if(!cacheDir.exists())cacheDir.mkdirs();

// Setting up file to write the image to. 
File f=new File(cacheDir, "img.png");

// Open InputStream to download the image. 
InputStream is=new URL(url).openStream();

// Set up OutputStream to write data into image file. 
OutputStream os = new FileOutputStream(f);

HelperUtil.CopyStream(is, os);

...

/**
 * Copy all data from InputStream and write using OutputStream
 * @param is InputStream
 * @param os OutputStream
 */
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:24:45.757

尝试这样的事情

```
String image_URL="http://chart.apis.google.com/chart?chs=200x200&cht=qr&chl=http%3A%2F%2Fandroid-er.blogspot.com%2F";

String extStorageDirectory;
File file;
Bitmap bm;
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)){
        file=new File(android.os.Environment.getExternalStorageDirectory(),"Your FolderName");
        extStorageDirectory = Environment.getExternalStorageDirectory().toString();
  }else{
        file=YourActivity.this.getCacheDir();
 }
if(!file.exists())
  file.mkdirs();

  extStorageDirectory+="Your FolderName/yourimagename.PNG";
  File imageFile = new File(extStorageDirectory);

  Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath());
  if(bitmap!=null){
  imageview.setImageBitmap(bitmap);
  }else{
    extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    BitmapFactory.Options bmOptions;
    bmOptions = new BitmapFactory.Options();
    bmOptions.inSampleSize = 1;
    bm = LoadImage(image_URL, bmOptions);
    imageview.setImageBitmap(bm);

    OutputStream outStream = null;
    file=new File(android.os.Environment.getExternalStorageDirectory(),"Your FolderName");

    file=new File(extStorageDirectory, "Your FolderName/yourimagename.PNG");
     try {
        outStream = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
        outStream.flush();
        outStream.close();

      } catch (FileNotFoundException e) {
         // TODO Auto-generated catch block
       e.printStackTrace();

      } catch (IOException e) {
         // TODO Auto-generated catch block
        e.printStackTrace();

      }
  } 
```

方法如下

```
private Bitmap LoadImage(String URL, BitmapFactory.Options options)
 {      
  Bitmap bitmap = null;
  InputStream in = null;      
    try {
      in = OpenHttpConnection(URL);
      bitmap = BitmapFactory.decodeStream(in, null, options);
      in.close();
    } catch (IOException e1) {
   }
  return bitmap;              
}

 private InputStream OpenHttpConnection(String strURL) throws IOException{
    InputStream inputStream = null;
    URL url = new URL(strURL);
    URLConnection conn = url.openConnection();

  try{
   HttpURLConnection httpConn = (HttpURLConnection)conn;
   httpConn.setRequestMethod("GET");
   httpConn.connect();

    if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
       inputStream = httpConn.getInputStream();
      }
  }catch (Exception ex){ 
       Log.e("error",ex.toString());
       }
  return inputStream;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:03:08.627

尝试保存图片时，您给出了错误的路径。它似乎你使用“/mnt/sdcard”，而它应该是“/mnt/sdcard/image.jpg”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:17:47.990

```
BitmapFactory.Options bmOptions;
        bmOptions = new BitmapFactory.Options();
        bmOptions.inSampleSize = 1;
        bm = LoadImage(image_url, bmOptions);
        extStorageDirectory = Environment.getExternalStorageDirectory()
                .toString() + "/image_folder";

        OutputStream outStream = null;

        File wallpaperDirectory = new File(extStorageDirectory);
        wallpaperDirectory.mkdirs();
        File outputFile = new File(wallpaperDirectory, "image.PNG");

        try {
            outStream = new FileOutputStream(outputFile);
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        try {
            bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
            outStream.flush();
            outStream.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();
        }
  private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
Bitmap bitmap = null;
InputStream in = null;
try {
    in = OpenHttpConnection(URL);
    bitmap = BitmapFactory.decodeStream(in, null, options);
    in.close();
} catch (IOException e1) {
}
return bitmap;
 }

  private InputStream OpenHttpConnection(String strURL) throws IOException {
InputStream inputStream = null;
URL url = new URL(strURL);
URLConnection conn = url.openConnection();

try {
    HttpURLConnection httpConn = (HttpURLConnection) conn;
    httpConn.setRequestMethod("GET");
    httpConn.connect();

    if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
        inputStream = httpConn.getInputStream();
    }
} catch (Exception ex) {
}
return inputStream;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:26:17.833

试试这个，如果存在则返回External memory，否则返回手机内存目录。构造函数将 Context 和您要创建的文件夹的名称作为参数。还可以试试这个链接，它关于你需要的东西非常好。[图像加载器](https://github.com/thest1/LazyList/tree/master/src/com/fedorvlasov/lazylist)

```
public class FileCache {

private File cacheDir;
private String applicationDirectory = Config.applicationMainFolder;

public FileCache(Context context, String folderName){
    //Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(context.getExternalFilesDir(null), applicationDirectory + folderName);
    else
        cacheDir = new File(context.getCacheDir(), applicationDirectory + folderName);
    if(!cacheDir.exists())
        cacheDir.mkdirs();
}

public File getFile(String url){
    String filename=String.valueOf(url.hashCode());
    File f = new File(cacheDir, filename);
    return f;
}

public void clear(){
    File[] files=cacheDir.listFiles();
    if(files==null)
        return;
    for(File f:files)
        f.delete();
}
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T12:27:33.823

用这个

```
if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
        File file=new File(Environment.getExternalStorageDirectory()+path);  

        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG,100, bytes);
        byte b[] = bytes.toByteArray();
        try
        {
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(b);
            fos.flush();
            fos.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

路径将是您在 sdcard 中的文件夹，而 bitamp 是图像的对象**

# java - 将 java war 文件部署到 IBM Web Sphere 门户

> ID：11225680
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:59:00.150
> 
> 标签：java, websphere, war, websphere-7, websphere-portal

我有 java war 文件，我想部署到 IBM web sphere 门户中。

请告诉我部署java war文件的步骤

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:51:00.580

Portal 在 WAS 实例之上运行 - 您可以像在任何标准 WebSphere 环境中一样使用 WAS 管理控制台来安装 WAR。访问管理控制台的链接取决于主机、管理控制台绑定的端口以及您正在运行的 WAS 版本——所以我无法告诉您它是什么。在 WAS7 + Portal 上，它通常类似于：

```
https://myhost:10032/ibm/console/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:24:38.750

正如 Malcolm Smith 在之前的回答[https://stackoverflow.com/a/11249364/762913](https://stackoverflow.com/a/11249364/762913)中所建议的那样，最简单的方法是使用管理控制台（如果您有网络部署，则在本地或部署管理器上）。

不过要注意一点——Websphere Portal 的“标准”许可**不允许**您部署非门户/portlet 应用程序。您拥有运行 Websphere **Portal**的许可证，而不是 Websphere Application Server (WAS) 本身的许可证。因此，如果您正在考虑将独立应用程序（Web 应用程序、Web 服务等）部署到 Websphere Portal 安装上，我会仔细检查您的许可证，以便您实际上拥有 WAS 和 Portal 的许可证。否则，如果 IBM 对您的公司进行审计并发现，他们可能会向您收取 WAS 许可证费用和罚款，这并不便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:01:08.400

那是一个带有 portlet 的 WAR 文件吗？

试试这个链接： [http](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Export_the_WAR_file_and_install_the_portlet_wp7) ://www-10.lotus.com/ldd/portalwiki.nsf/dx/Export_the_WAR_file_and_install_the_portlet_wp7 - 从第 2 步开始。

# networking - Arista EOS 中的接口配置

> ID：11225681
> 
> 赞同：2
> 
> 时间：2012-06-27T11:59:04.087
> 
> 标签：networking, configuration, interface, switch-statement, router

我正在尝试在 vm 上运行的 Arista 交换机中配置以太网接口（使用 vmware 工作站）。我可以根据给定的用户 guid 配置管理接口，但是在使用相同的过程配置以太网接口期间，我收到以下错误：

```
localhost(config-if-Eth1)# ip address 172.16.204.4/24
! IP configuration will be ignored while interface Ethernet1 is not a routed port. 
```

如果有人可以在这方面提供一些帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:24:11.163

接口处于交换机端口模式。在以太网 1 上运行`no switchport`解决了这个问题。

# windows - 将数字写入文本文件 - 批处理文件

> ID：11225683
> 
> 赞同：11
> 
> 时间：2012-06-27T11:59:15.627
> 
> 标签：windows, batch-file

这应该是一个简单的，我对自己感到失望，但我无法为我的生活找到解决方案！我正在尝试将数字 1 写入 BAT 脚本中的文本文件。如果我执行以下操作，它可以工作，但在我不能拥有的数字之后留下一个尾随空格。我知道您可以通过删除 1 和 > 之间的空格（这适用于字母）来删除尾随空格，但是突然之间我收到一条消息 - ECHO 已关闭。

```
ECHO 1 > mytextfile.txt
*This works but leaves a trailing space*

ECHO 1> mytextfile.txt
*This gives me an error saying ECHO is OFF* 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T12:46:26.280

问题是它`echo 1> myTextFile.txt`不会回`1`显，而是回显命令为空，并且重定向到流 1。

您可以简单地将重定向移动到前面。

```
>mytextfile.txt echo 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T12:08:08.803

`1>`是一个特殊的命令。改为使用`(ECHO 1) > mytextfile.txt`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:10:04.937

`echo.1>mytextfile.txt`应该也可以。

# java - 无需重新启动活动即可接收自定义意图

> ID：11225687
> 
> 赞同：3
> 
> 时间：2012-06-27T11:59:22.993
> 
> 标签：java, android, xml, android-intent, linkify

我有`TextView`一些链接（推特风格）：

```
Pattern pattern1 = Pattern.compile("@\\w+");
Linkify.addLinks(textView, pattern1, "my_activity://one=");
Pattern pattern2 = Pattern.compile("#\\w+");
Linkify.addLinks(textView, pattern2, "my_activity://two="); 
```

在清单中声明的​​活动具有以下意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />

    <data android:scheme="my_activity" />
</intent-filter> 
```

意图被捕获在活动的`onNewIntent`方法中，但活动在此之前被重新启动（我认为这是默认行为）。

有没有办法在不重新启动活动的情况下接收这种意图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:53:57.120

看起来`launchMode`是问题所在。您不应该使用`singleInstance`，因为这仅用于主屏幕替换。你应该试试`singleTop`。这对于您正在尝试做的事情应该足够了。

# javascript - 为什么 onkeyup 事件不会在 Javascript 游戏中触发

> ID：11225694
> 
> 赞同：5
> 
> 时间：2012-06-27T12:00:01.570
> 
> 标签：javascript, dom-events, onkeydown, onkeyup

我有一个 2d Javascript 游戏的开始 - 目前玩家可以使用箭头键在屏幕上驱动一个三角形。

问题是有时三角形会卡在一个方向旋转或向前移动，直到再次按下相应的控制键并再次`onkeyup`触发事件。这通常发生在同时按下多个控制键时。

我无法弄清楚为什么它首先会被卡住，除非`onkeyup`事件由于某种原因没有被触发。任何帮助将不胜感激，谢谢。

这是一些代码，您可以[在 JSFiddle 上找到一个完整的示例](http://jsfiddle.net/6dMpF/)：

```
...

function init(){
    var canvas = document.getElementById('canvas');
    if(canvas.getContext){
        setInterval(play, 50);
    }
}

function play(){
    printTriState();
    updateTriAcceleration();
    applyTriVelocity();
    updateTriRotation();
    draw();
}

document.onkeydown = function(event){

if(!event.keyCode){
    keycode = window.event.keyCode;
} else {
    keycode = event.keyCode;
}
console.log(event.keyCode);
switch(keycode){
    //left
    case 37:
    tri.rotation = -1;
    break;

    //up
    case 38:
    tri.throttle = true;
    break;

    //right
    case 39:
    tri.rotation = 1;
    break;

    //down
    case 40:
    tri.currentSpeed = 0;
    break;

    default:
    break;
}
};

document.onkeyup = function(event){

if(!event.keyCode){
    keycode = window.event.keyCode;
} else {
    keycode = event.keyCode;
}
console.log(event.keyCode);
switch(keycode){
    //left
    case 37:
    tri.rotation = 0;
    break;

    //up
    case 38:
    tri.throttle = false;
    break;

    //right
    case 39:
    tri.rotation = 0;
    break;

    //down
    case 40:

    break;

    default:
    break;
}
};

function updateTriRotation(){
    if(tri.rotation == 1){
        tri.orientation += tri.rotationSpeed;
    } else if (tri.rotation == -1){
        tri.orientation -= tri.rotationSpeed;
    } else {
        tri.orientation += 0;
    }
}

... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T13:50:17.023

## 问题描述

事件*被*触发，但有时最终`keyup`事件直接在. 奇怪的？是的。*`keydown``keyup`*

 *问题在于如何`keydown`实现对持有的键的事件的重复：
最后`keydown`持有的键的事件被重复触发。由于优化的 JavaScript 代码执行的异步、单线程特性，有时可能会在触发相应事件*后*`keydown`触发此类重复事件。*`keyup`*

 *看看当我[在我的 JSFiddle 示例中](http://jsfiddle.net/pTPYL/)同时按住并释放键 [UP] 和 [RIGHT] 时会发生什么。

[在 Windows 7 上使用 Firefox 13.0.1 观察到](http://jsfiddle.net/pTPYL/)：

```
rotation: 1 key down: 39
rotation: 1 key down: 38
rotation: 1 key down: 38
rotation: 1 key down: 38
rotation: 1 key up: 38
rotation: 0 key up: 39
rotation: 1 key down: 38 
```

您可以在此示例控制台输出中看到三件事：

1.  只有`keydown`[RIGHT] (38) 的事件被重复触发。
2.  `keyup`当我释放键时，[RIGHT] (38)的事件**被**触发。
3.  在执行完**之后**`keydown`，会触发最后一个计划的事件。**`keyup`**

 **这就是即使没有按下任何键，您的`rotation`状态也会“卡住”价值的原因。`1`

* * *

## 解决方案

为避免这种情况，您可以在释放键时跟踪微秒。当 keydown 事件发生*在几微秒*前时，我们会默默地忽略它。

`Key`我在您的代码中引入了一个辅助对象。[在这个 JSFiddle 示例中查看它的工作原理。](http://jsfiddle.net/pTPYL/1/)

现在控制台输出如下所示：

```
rotation: 1 key down: 40 time: 1340805132040
rotation: 1 key down: 40 time: 1340805132071
rotation: 1 key down: 40 time: 1340805132109
rotation: 1 key up: 40 time: 1340805132138
rotation: 0 key up: 39 time: 1340805132153
key down: 40 release time: 1340804109335
keydown fired after keyup .. nothing to do.
rotation: 0 key down: 39 time: 1340805132191 
```

我的解决方案受到[这篇博客文章](http://nokarma.org/2011/02/27/javascript-game-development-keyboard-input/index.html)的启发，这篇文章更进一步，解释了如何避免在使用 JavaScript 键事件进行游戏开发时遇到的草率和“单向”问题。这绝对值得一读。

忽略延迟事件的解决方法`keydown`基本上如下所示：

```
var Key = {
    _pressed: {},
    _release_time: {},

    MAX_KEY_DELAY: 100,

    onKeydown: function(event) {

        // avoid firing of the keydown event when a keyup occured
        // just +/- 100ms before or after a the keydown event.
        // due to the asynchronous nature of JS it may happen that the
        // timestamp of keydown is before the timestamp of keyup, but 
        // the actual execution of the keydown event happens *after* 
        // the keyup.   Weird? Yes. Confusing!

        var time = new Date().getTime();
        if ( this._release_time[event.keyCode] &&
             time < this._release_time[event.keyCode] + this.MAX_KEY_DELAY ) {
            console.log('keydown fired after keyup .. nothing to do.');
            return false;
        }

        this._pressed[event.keyCode] = true;

        // LOGIC FOR ACTUAL KEY CODE HANDLING GOES HERE
    },

    onKeyup: function(event) {
        delete this._pressed[event.keyCode];
        this._release_time[event.keyCode] = new Date().getTime();

        // LOGIC FOR ACTUAL KEY CODE HANDLING GOES HERE
    }
};

document.onkeydown = function(event) { return Key.onKeydown(event); };
document.onkeyup = function(event) { return Key.onKeyup(event); }; 
```

* * *

**更新 #1** [在 JSFiddle 上找到您的代码的更新（固定）版本](http://jsfiddle.net/6dMpF/2/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-18T18:48:10.497

这个问题已经有将近 8 年的历史了，但我遇到了类似的问题并偶然发现了这个页面，所以以防万一它对其他人有帮助：

我在我的代码中遇到了干扰问题，它在 keydown 上使用`Set`到`add`键盘事件，`delete`在 keyup 上使用它们。我觉得使用`event.key`字段来区分按键而不是 ,`keyCode`来维护用户键盘上写的内容和我的代码解释的内容之间的语义映射是一种很好的做法。（例如，我相信 QWERTY 键盘的 W 会与`keyCode`AZERTY 键盘的 Z 报告相同，但没有法式键盘可供验证。）

这工作正常（我没有看到其他人报告的乱序事件的问题），直到修改器出现在图片中。我发现这些有两个问题：

*   ...举行 Shift 的地方。如果用户击键的顺序是（hold-shift、hold-R、release-shift、release-R），那么JS事件的顺序就是wrt。会`event.key`去（keydown-shift，keydown-R，keyup-shift，keyup-r）。换句话说， an`R`被按下，但 an`r`被释放，所以 my`Set`被`R`卡住了。我对此的解决方案是将`Set`变成`Map`，其中键是`event.keyCode`'，值是`event.key`在 keydown 事件发生时报告的 '。这样，当我得到一个 keyup 事件时，我只是`delete`对应于`keyCode`和 键的映射键不会卡住。我希望 option/alt 需要相同的处理。
*   ... Meta 键所在的位置（我的 Mac 上的命令；我猜是 Windows 上的控制？）。在这种情况下，一个序列（hold-meta、hold-K、release-meta、release-K）将生成事件（keydown-meta、keydown-k、keyup-meta）。所以 - K 的 keyup 事件确实丢失了，即使我确定这样做`event.preventDefault`是为了防止系统窃取我的事件。我希望我有一个更好的解决方案，但是当我看到 Meta 关键事件时，我现在正在做的是对整个地图进行核对。我应该郑重声明，我的代码实际上并没有使用 Meta 作为修饰符；我只是想确保它是安全的，并且当用户快速键入时，我的密钥处理程序似乎很容易卡住。

哦，还有，关于模糊——我正在对地图进行核弹。那么所有的赌注都取消了...****

# android - Android：按钮单击上的覆盖窗口

> ID：11225695
> 
> 赞同：1
> 
> 时间：2012-06-27T12:00:03.143
> 
> 标签：android, button, click, overlay

单击 Android 上的按钮时，我想打开一个覆盖窗口。

我不知道我应该从哪里开始。请问有什么提示吗？

**编辑：** 单击表情按钮时，我想要的是像 WhatsApp 应用程序这样的覆盖窗口。

# ios - 当 hidesBottomBarWhenPushed 为“TRUE”时如何隐藏自定义标签栏按钮

> ID：11225696
> 
> 赞同：9
> 
> 时间：2012-06-27T12:00:04.713
> 
> 标签：ios, ios5, uitabbarcontroller

我正在使用 Tito 的代码片段向我的标签栏添加自定义按钮： [https ://github.com/tciuro/CustomTabBar](https://github.com/tciuro/CustomTabBar)

（继承 UITabbarController 并使用添加自定义按钮

```
// .. created a UIButton *button
[self.view addSubview:button]; 
```

)

这适用于我的基于故事板的应用程序，除了导航控制器中的子视图启用了“在推送时隐藏底栏”选项的情况。这会按承诺隐藏标签栏，但不会隐藏自定义按钮。似乎按钮应该作为子视图添加到标签栏本身？我尝试了这个丑陋的代码，它甚至没有让按钮出现：

```
for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UITabBar class]])
    {
        [view addSubview:button];
        break;
    }
} 
```

有任何想法吗？

**更新：** 我的解决方案：在我的 ApplicationDelegate 中，我定义了以下方法，只要需要，我就会在 viewWillAppear 或 viewWillDisappear 方法中调用它们：

```
-(void)hideCenterButton:(BOOL)animated
{
    if(animated){

    [UIView animateWithDuration:0.3
                          delay:0.0f
                        options:UIViewAnimationCurveLinear
                     animations:^{
                         CGRect frame = self.centerButton.frame;
                         frame.origin.x = -100;
                         self.centerButton.frame = frame;
                     }
                     completion:^(BOOL finished){
                     }];
    }
}

-(void)showCenterButton:(BOOL)animated
{
    if(animated){

    [UIView animateWithDuration:0.35
                          delay:0.0f
                        options:UIViewAnimationCurveLinear
                     animations:^{
                         CGRect frame = self.centerButton.frame;
                         frame.origin.x = (self.view.superview.frame.size.width / 2) - (self.centerButton.frame.size.width / 2);
                         self.centerButton.frame = frame;
                     }
                     completion:^(BOOL finished){
                     }];
    }
} 
```

我必须将动画的持续时间设置为 0.35 秒才能获得与标签栏一致的平滑效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-20T01:21:20.283

你为什么不让按钮成为你的标签栏的一部分。

```
tabBarController.tabBar.addSubView(yourButton) 
```

一切都会解决。干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:54:53.313

处理此问题的一种简单方法是在文件的 .h 中创建按钮的实例。

```
UIButton *customTabButton; 
```

在按下时调用隐藏底栏时，将按钮属性设置为隐藏，如果底栏可见，则在其他视图中再次将其重置。

```
 shareFbButton.hidden=YES; 
```

您可以检查这是所有文件的 viewDidLoad 并在需要时放置这行代码，以确保您正在显示按钮并在您需要的所有页面上隐藏按钮。

```
 if(self.tabBarController.tabBar.isHidden){

 // set or reset the custom button visibility here 
} 
```

这是一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:08:07.993

选中[此项](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)以在 上放置一个按钮`UITabBar`。看看它是否在 with 之后有效`hidesBottoBarWhenPushed`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:44:32.850

我认为有两种方法可以解决这个问题。

1）尝试将按钮放入旧顶视图控制器上方的视图和被推送的新顶视图控制器下方的选项卡栏。

2）当新的视图控制器被按下时，动画离开按钮。

第一个将需要处理未记录、不受支持且随时可能更改的 iOS 专有视图层次结构。

第二个问题是让动画看起来足够流畅，让您的用户不会注意到。这不完全是表现完美的问题，只是表现得恰到好处。

我个人建议按钮消失的动画（将其设置为 0 的 alpha 动画）并根据您在标签栏上的视图控制器是否出现或消失而重新出现。

导航的动画（我相信）是 0.3 秒。如果按钮位于选项卡栏的中间，您可能希望它在视图控制器中的动画到达它时不可见（如果不是更早的话），因此可以使用 0.1 到 0.15 秒之间的时间对其进行动画处理。

现在这不会使按钮的行为与标签栏完全相同，但是由于过渡的速度如此之短，因此用户不会真正注意到它。

现在只是提供一个问题供您问自己。为什么需要推送一个与标签栏重叠的视图控制器？为什么这比呈现模态视图控制器更可取/必要？如果您可以强烈支持它，请坚持下去并祝您好运，如果没有必要，您可以使用模态视图控制器获得您想要的体验。

# php - 这两种输出 html 内容的方式在 php 性能方面有什么区别吗？

> ID：11225697
> 
> 赞同：2
> 
> 时间：2012-06-27T12:00:13.270
> 
> 标签：php, performance

```
<?php
            foreach($pricelistline as $value) {
                $e = explode(",",$value);
                if ($e[0]) {
                    echo "<li>\n<img width=\"24\" height=\"24\" src=\"features_icons/" . $e[0] . ".png\" alt=\"\" class=\"\" />\n<span>" . str_replace("-", " ", ucfirst($e[0])) . "</span>\n</li>\n";
                }
            }
?> 
```

还有这个_

```
<?php
            foreach($pricelistline as $value) {
                $e = explode(",",$value);
                if ($e[0]) {
?>
                    <li>
                        <img width="24" height="24" src="features_icons<?php echo $e[0]; ?>.png" alt="" class="" />
                        <span><?php echo str_replace("-", " ", ucfirst($e[0])); ?></span>
                    </li>
<?php
                }
            }
?> 
```

一般来说，性能方面有什么不同吗？速度和负载有区别吗？

多次退出和进入php会降低性能吗？`<?php >`

哪一个被认为是更好的做法？

1 个 echo 实例与 2 个实例之间有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:06:54.123

与回显字符串相反，进入和退出 PHP 的优点是文本编辑器可以语法高亮 HTML。如果它在 PHP 字符串中，则不能。

在性能方面，我认为差异完全微不足道，因此无关紧要。这是过早进行微优化的情况。无论您选择哪种方法，它肯定*不会*成为您应用程序的瓶颈。如果您的应用程序没有充分执行，那么进行分析以确定实际花费的时间太长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:12:04.360

PHP 编译器可能会将两者解析为几乎相同的内容，而不会产生显着的性能差异。一般来说，您在 PHP 中的输出方式并不是主要的性能问题。

`$e[0]`通过放入它自己的变量，优化逻辑的其他一些部分或使用`ob_start('gz_handler')`压缩输出以加快传输速度，您可能会节省更多的性能。

话虽如此，为什么不使用`microtime()`和迭代该特定代码几千次呢？在性能方面，衡量总是比某人的意见（包括我的意见）要好。更好的是，使用 XDebug 或真正的分析器来找出处理时间花费在哪里。

# java - 运行 Selenium 2 测试套件的 Cron 作业

> ID：11225698
> 
> 赞同：3
> 
> 时间：2012-06-27T12:00:13.557
> 
> 标签：java, cron, webdriver, selenium-webdriver

我有一个 ant 脚本，可以从 SVN 中检出我们所有的项目，然后构建项目、部署 WAR 文件并运行 Selenium 测试。不幸的是，当通过 运行 shell 脚本时`cron`，它不会打开浏览器。

抛出错误：

```
org.openqa.selenium.WebDriverException: Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: /opt/google/chrome/google-chrome (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 6.88 seconds
Build info: version: &apos;2.21.0&apos;, revision: &apos;16552&apos;, time: &apos;2012-04-11 19:09:00&apos;
System info: os.name: &apos;Linux&apos;, os.arch: &apos;amd64&apos;, os.version: &apos;2.6.37.6-0.9-desktop&apos;, java.version: &apos;1.6.0_26&apos;
Driver info: driver.version: ChromeDriver
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:175)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:128)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:459)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:140)
    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:95)
    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:133)
    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:110)
    at com.integration.SetUp.testLogin(SetUp.java:52)
</error> 
```

我确实添加`export DISPLAY=:0`了正在使用的 shell 脚本。

```
export ANT_HOME=/home/user/CCBuild/apache-ant-1.8.2

export PATH=$PATH:$ANT_HOME/bin
export JAVA_HOME=/usr/java/jdk1.6.0_26
export PATH=$PATH:$JAVA_HOME/bin/java
export DISPLAY=:0
echo $ANT_HOME
cd CCBuild
ant -v -f build-all.xml 
```

即使那样，它也会抛出错误。截至目前，我不能使用 Jenkins 来运行该套件，我需要让这项`cron`工作正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T22:46:26.063

我知道这很旧......但我遇到了同样的问题。我通过在 crontab 中设置变量解决了这个问题...添加到 cron DISPLAY=:0 的顶部

# java - 为什么通过 Apache FTPClient 上传的文件比本地的原始文件小？

> ID：11225699
> 
> 赞同：2
> 
> 时间：2012-06-27T12:00:14.907
> 
> 标签：java, apache, file-io, network-programming, ftp-client

我正在将文件（.cvs、.zip、.rar、.doc、.png、.jpg...）上传到 ftp 服务器。奇怪的是一切都成功了，但我错过了一些数据。

**有没有人知道它为什么会发生以及如何解决它？**

```
 public static void uploadWithCommonsFTP(File fileToBeUpload) {
        FTPClient f = new FTPClient();
        try {
            f.connect(server.getServer());
            f.login(server.getUsername(), server.getPassword());
            f.changeWorkingDirectory("user");
            f.setFileType(FTP.BINARY_FILE_TYPE);
            f.setFileTransferMode(FTP.BINARY_FILE_TYPE);//this is part of Mohammad Adil's solutions
            f.enterLocalPassiveMode();
            ByteArrayInputStream in = new ByteArrayInputStream(FileUtils.readFileToByteArray(fileToBeUpload));
            boolean reply = f.storeFile(fileToBeUpload.getName(), in);
            if(!f.completePendingCommand()) {
                    f.logout();
                    f.disconnect();
                    System.err.println("File transfer failed.");
                    System.exit(1);
                }
                if(reply){
                    JOptionPane.showMessageDialog(null,"uploaded successfully.");
                }else{
                    JOptionPane.showMessageDialog(null,"Upload failed.");
                }
            }
            //Logout and disconnect from server
            in.close();//this is part of Mohammad Adil's solutions
            f.logout();
            f.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:46:29.553

人们经常忘记 FTP 有两种操作模式——一种用于文本文件，另一种用于二进制（jpg、csv、pdf、zip）文件。

您的代码不起作用，因为默认传输模式`FTPClient`是`FTP.ASCII_FILE_TYPE`. 您只需更新配置即可以二进制模式传输。

在你的代码中添加这个：

```
f.setFileTransferMode(FTP.BINARY_FILE_TYPE); 
```

只需将那条线放在后面`f.setFileType(FTP.BINARY_FILE_TYPE);` ，它就可以工作了。

**编辑：**

你没有关闭`inputStream`你的代码，只是在调用`in.close()`之前调用`logout()`

# iphone - iphone数据库更新问题

> ID：11225702
> 
> 赞同：5
> 
> 时间：2012-06-27T12:00:29.603
> 
> 标签：iphone, sqlite

我正在开发 iPhone 应用程序并在单击按钮时调用以下代码，它仅在第一次单击时更新我的​​数据库表。当我第二次单击它时，它给了我成功消息，但数据库表没有得到更新。

代码是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Games.sqlite"];

NSMutableArray *arrayRandomLevel = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",nil];
for (int i = 0; i< 5; i++)
{
    NSUInteger randomIndex = arc4random() % 5;
    [arrayRandomLevel  exchangeObjectAtIndex:i withObjectAtIndex:randomIndex];
    //firstObject +=1;       
}
NSLog(@"arrayRandomLevel = %@",arrayRandomLevel);

for (int level = 0; level < 5; level++)
{
    NSString *strLevel = [@"" stringByAppendingFormat:@"%d",level+1];
    int finalLevel = [[arrayRandomLevel objectAtIndex:level] intValue];

    NSLog(@"Static level = %@, Changed level = %d",strLevel,finalLevel);

    sqlite3 *database;
    if(sqlite3_open([path UTF8String], &database) == SQLITE_OK)
    {

        NSString *cmd = [NSString stringWithFormat:@"UPDATE zquestionsdata SET zdifficultylevel = %d WHERE zanswertype = '%@' AND zquestiontype = '%@';",finalLevel,strLevel,@"Geni"];

        const char * sql = [cmd UTF8String];

        sqlite3_stmt *compiledStatement;

        if(sqlite3_prepare_v2(database, sql, -1, &compiledStatement, NULL) == SQLITE_OK)
        {
            sqlite3_step(compiledStatement); // Here is the added step.
            NSLog(@"update SUCCESS - executed command %@",cmd);
        }
        else {
            NSLog(@"update FAILED - failed to execute command %@",cmd);
        }

        sqlite3_finalize(compiledStatement);

    }
    else {
        NSLog(@"pdateContact FAILED - failed to open database");
    }

    sqlite3_close(database);

} 
```

请帮助我或提供任何其他解决方案来每次更新表。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:55:29.000

更新过程将发生在

> 如果（sqlite3_step（语句）== SQLITE_DONE）

在那里分配的值将存储在数据库中，语句如下所示。

来自 Prepare 语句的代码如下所示

```
if(sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL) == SQLITE_OK)   
    {
        if(sqlite3_step(statement) == SQLITE_DONE)
        {
          //assign new values here

         }
     } 
```

# django - 如何将记录的编辑限制为登录用户？

> ID：11225704
> 
> 赞同：1
> 
> 时间：2012-06-27T12:00:43.970
> 
> 标签：django

抱歉，我还是 Django 的新手，希望这个问题不会不合适。

当我的模板中有以下内容时：

```
<td><a href="/contact/edit/?id{{ item.id }}">{{ item.last_name }}</a></td> 
```

通过单击姓氏，用户将被重定向到以下链接以进行编辑。

```
http://127.0.0.1:8000/contact/edit/?id=1 
```

但是，是什么阻止了任何登录用户在浏览器中注入不同的 id 并编辑不属于他的记录？

**更新**

当我阅读下面的评论和答案时，我有了一个想法。我不能只为每个用户创建一个 UserProfile 并附加一个唯一的公司范围的 uuid.uuid1()，而不是使用第三方应用程序。每次登录用户尝试编辑某些内容时，他唯一的公司 uuid 也将作为附加参数在链接中传递。

在编辑方面，它会收集这个 guid 并将其与登录用户进行比较，看看它们是否匹配。如果他们匹配，他被授权继续编辑，否则他将被重定向。

你怎么看？有什么弱点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:41:41.517

如果您使用 Django 新[的基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views//)，例如通用的[UpdateView](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#updateview)，您可以扩展`dispatch`处理程序。

```
def dispatch(self, request, *args, **kwargs):
    handler = super(MyEditView, self).dispatch(request, *args, **kwargs)
    # Only allow editing if current user is owner
    if self.object.author != request.user:
        return HttpResponseForbidden(u"Can't touch this.")
    return handler 
```

`author`在这种情况下，代码会在处理请求的其余部分之前验证模型对象的字段是否对应于当前登录的用户。

[你可以在我的一个项目中](https://github.com/studentenportal/web/blob/5a3cb53d032175c354ed05cea604be4dd9325ef7/apps/front/views.py#L84)看到一个真实的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:14:39.507

有一些第三方应用程序可以做你想做的事，它称为“行级权限”，您可以在其中为不同的用户授予对特定对象的不同访问权限，“行级”来自 SQL，其中每个对象都是数据库中的一行

我使用[django-guardian](https://github.com/lukaszb/django-guardian/)来完成这项工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:29:44.857

在处理数据保存的函数中，检查正在编辑的对象是否与当前登录的用户具有相同的 ID。

例如，如果有问题的对象名为 EmailPrefs，并且它有一个名为 user_id 的字段：

1.  使用正在编辑的对象的 ID 加载 EmailPrefs 对象
2.  如果 user_id 与当前用户不匹配，则停止进一步处理
3.  修改 EmailPrefs 对象
4.  将 EmailPrefs 对象保存到数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:53:38.330

当您使用 Django`auth`时，始终依赖于`session`识别用户的机制，而不是制作其他一些 id，例如`uuid1()`（例如，当您需要在电子商务站点中的额外会话时除外`HTTPS`）。

对于权限部分，您可以直接检查所有权，主要如[Koliber Services](https://stackoverflow.com/a/11226230/165603)所述。和之间`Company`的关系对于权限检查的逻辑至关重要。有很多方法可以对关系进行建模，因此代码会有很大差异。例如：`User``Contact`

```
# a modeling way
User.company -> Company : an user belongs to a company
Contact.contributor -> User : a contact is contributed by an user, would be invalid is user is leaving the company
# could check accessibility by 
can_view = contact.contributor.company_id == current_user.company_id

# another modeling way
User.company -> Company : an user belongs to a company
Contact.company -> Company : a contact info is owned by a company, does not share globally
# could check accessibility by
can_view = contact.company_id == current_user.company_id 
```

`can_view`什么时候`False`，用户应该因为他的未经授权的尝试而得到一个 403 并被记录。

通常，上述方法足以保护内容（在 Django Admin 中还没有）。但是，当您有许多不同类型的权限检查甚至行权限检查时，最好使用一些统一的权限 API。

以 Django-guardian 为例，您可以简单地将公司映射到组，并`assign` `can_view`允许代表用户公司的组的联系人。或者，使用信号或芹菜任务创建联系人时对公司所有用户`assign`的权限。`can_view`

此外，您可以使用`/contact/1/edit/`而不是`/contact/edit/?id=1`. 通过这种方式，该`int(request.GET('id'))`部分被移动到 urlconf 之类`r'^contact/(?P<pk>\d+)/$'`的，更少的代码，更清晰。

# xml - Extjs 4 将 xml 嵌套到树形面板中

> ID：11225724
> 
> 赞同：2
> 
> 时间：2012-06-27T12:01:55.647
> 
> 标签：xml, extjs, extjs4

我有一个无法修改的 java web 服务。它产生像这样的xml：

```
<query>
    <entity TYPE="Location">
        <value TYPE="Id"/>
        <value TYPE="Class"/>
        <value TYPE="Name"/>
    </entity>
    <entity TYPE="Activity">
        <value TYPE="Id"/>
        <value TYPE="Date"/>
        <value TYPE="Duration"/>
    </entity>
</query> 
```

我需要将 xml 放入树存储中，实体将是文件夹，值将作为叶子。我试图用关系描述 2 个模型：

```
Ext.define( 'modelEntity' , {
    extend : 'Ext.data.Model' ,
        proxy: {
        type: 'ajax',
        url: 'query.xml', //just for tests
        reader: { type: 'xml' , root: 'query' , record: 'entity' } ,
    },
    fields: [
        {  name: 'leaf' ,  type: 'boolean', defaultValue: true} ,
        {  name: 'text' ,  type: 'string', mapping: '@TYPE'}
    ],
    hasMany: { model: "modelValue", name: "value",  }
});

Ext.define( 'modelValue' , {
    extend : 'Ext.data.Model' ,
    fields: [
        {  name: 'leaf' ,  type: 'boolean', defaultValue: true} ,
        {  name: 'text' ,  type: 'string', mapping: '@TYPE'}
    ],
    belongsTo: "modelEntity"
}); 
```

有一个树店和一个树形面板：

```
Ext.define('storeQuery' , {
    extend: 'Ext.data.TreeStore',   
    model: 'modelEntity',
    root: {
        expanded: true,
        leaf: false,
        children: []
    },
    autoLoad: false
});

Ext.create('Ext.tree.Panel', {
    store: Ext.create('storeQuery'),
    rootVisible: false
    ......
}); 
```

显然它不起作用，只显示实体，它们的子节点不显示。请帮帮我 ！=)

# php - tan(deg2rad()) 返回 180 到 360 度之间的奇数值

> ID：11225725
> 
> 赞同：1
> 
> 时间：2012-06-27T12:02:03.837
> 
> 标签：php, geometry

```
$degree = 179;
$aX = $valueB + ($valueA - $aY)/tan(deg2rad($degree)); 
```

返回 742.710038369 作为 $aX

但是当 $degree 是 180 时；

```
$degree = 180;
$aX = $valueB + ($valueA - $aY)/tan(deg2rad($degree)); 
```

返回 -8.1656196766E+15 作为 $aX

当它完成一个完整的转弯并再次返回 857.289961631 作为 $aX 时，类似的值一直到 361。

我该如何解决这个问题，我是否需要转换不同的值或更改其他内容？

提前感谢您的回答！

编辑;

```
$degree = 180;
$valueA = 800;
$valueB = 800;

$aY = ($valueB/64) * (64) -1;
$aX = $valueB + ($valueA - $aY)/tan(deg2rad($degree));

$aY = round($aY/64,0);
$aX = round($aX/64,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:22:30.267

正如其他评论指出的那样，当结果应该是普通数字时，除以 0 会给出或应该给出错误。目前的代码片段，如果确实有可能的动机，看起来像[齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates)的应用程序，它表示投影几何中的方向。仅当斜率不垂直时，使用线性表达式将方向表示为直线的斜率。在齐次坐标中，您可以轻松地表示这些方向，并且您可以在这些方向附近获得数值稳定性以启动。

也就是说，我无法弄清楚当前代码片段可能属于哪个应用程序，以及这个答案是否相关。

# python - 使用该列表上的连续函数调用构建列表的惯用方法

> ID：11225726
> 
> 赞同：2
> 
> 时间：2012-06-27T12:02:06.387
> 
> 标签：python

用简洁的标题来解释我的要求有点困难，所以这里是解释。我有一个类列表，这些对象都包含它们自己的数据集。我遇到的问题是我尝试遍历这些对象并过滤掉列表中当前对象之前的对象之一中使用的数据。代码片段如下所示：

```
objs = [list-of-objects]
used = set([])
for obj in objs:
    used = used.union(obj.callSomeFunc(used)) 
```

该 callSomeFunc 成员返回一组与当前使用的集合不相交的数据。

这段代码有效，但我不太喜欢它，我不敢相信没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:05:44.163

我唯一要改变的是使用`set.update()`而不是`set.union()`：

```
objs = [list-of-objects]
used = set()
for obj in objs:
    used.update(obj.callSomeFunc(used)) 
```

您*可以*使用`reduce()`，但我认为这会损害可读性。

**编辑**：这是使用的代码`reduce()`：

```
used = reduce(lambda used, obj: used.union(obj.callSomeFunc(used)), objs, set()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:10:49.663

如果我理解你的问题，那么我猜你正在寻找这样的东西：

```
objs=[1,19,4,3,1,3,5,1,5,6,7,8,9,18,8,6]
used=[]

for x in objs:
  if x not in used: #only choose that data that is not present in used
    used.append(x)
print(used) 
```

输出：

```
[1, 19, 4, 3, 5, 6, 7, 8, 9, 18] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:30:18.157

您还可以递归地表达问题 - 这对某些人来说可能更具可读性。:-)

```
def filter_list(used, remaining):
    if len(remaining) == 0:
        return used
    obj = remaining[0]
    return filter_list(used.append(obj.someFunc(used)), remaining[1:]) 
```

# php - Netbeans：我可以配置标记对不存在的函数和无效签名的调用吗？(PHP)

> ID：11225727
> 
> 赞同：2
> 
> 时间：2012-06-27T12:02:13.673
> 
> 标签：php, netbeans, configuration, signature

*A级*

```
class A {
    public foo( Apple $apple )
    {
      //whatever
    }
} 
```

*YetAnotherFile.php*（在同一个项目中）

```
$a = new A;

$a->foo( 42 );  // I really would like a little warning flag here
$a->foo( new Apple(), 'howdy' );  // I really would like...
$a->bar();  // I really would like... 
```

我希望我自己的例子是对的，无论如何我希望你明白我的意思。

谢谢...

# c# - 转换使用反射创建的泛型类型实例

> ID：11225728
> 
> 赞同：9
> 
> 时间：2012-06-27T12:02:15.250
> 
> 标签：c#, reflection

我正在使用反射创建泛型类型的实例：

```
public interface IModelBuilder<TModel>
{
    TModel BuildModel();
}

public class MyModel
{
    public string Name { get; set; }
}

public class MyModelBuilder : IModelBuilder<MyModel>
{
    public MyModel BuildModel()
    {
        throw new NotImplementedException();
    }
} 
```

在运行时，我们只知道模型的类型，例如`MyModel`。我可以像这样找到相关模型构建器的实例：

```
var modelBuilders = from t in Assembly.GetExecutingAssembly().GetTypes()
                from i in t.GetInterfaces()
                where i.IsGenericType
                        && i.GetGenericTypeDefinition() == typeof(IModelBuilder<>)
                        && i.GetGenericArguments()[0] == modelType
                select t;

var builder = Activator.CreateInstance(modelBuilders.First()); 
```

但我不确定我如何才能转换实例，`IModelBuilder<TModel>`以便我可以调用并使用`BuildModel()`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T12:07:10.480

由于`modelType`只是一个`Type`实例，因此您无法自动执行此操作，因为没有可用的非通用 API。各种选项：

1：使用反射，例如（未经测试）

```
object builder = Activator.CreateInstance(...);
var model=builder.GetType().GetMethod("BuildModel").Invoke(builder,null); 
```

2：欺骗`dynamic`：

```
dynamic builder = Activator.CreateInstance(...);
var model = builder.BuildModel(); 
```

3：制作一个非通用版本`IModelBuilder`，并使用它

请注意，1 和 2 依赖于接口的**公共实现**，并且对于（完全合法的）显式接口实现将失败。对于“1”，您可以通过以下方式解决此问题：

```
var model = typeof(IModelBuilder<>).MakeGenericType(modelType)
       .GetMethod("BuildModel").Invoke(builder); 
```

最后一个偷偷摸摸的选择是从非泛型方法转换为泛型方法，因此在泛型方法中您可以直接使用所有成员。有一种懒惰的方法可以通过`dynamic`：

```
interface ISneaky<T>
{
    T Foo { get; }
}
class Sneaky<T> : ISneaky<T>
{
    T ISneaky<T>.Foo { get { return default(T); } }
}
class Program
{
    static void Main()
    {
        Execute(typeof(int));
    }
    static void Execute(Type t)
    {
        dynamic obj = Activator.CreateInstance(
            typeof(Sneaky<>).MakeGenericType(t));
        // crafy hack to flip from non-generic code into generic code:
        Evil(obj);
    }
    static void Evil<T>(ISneaky<T> sneaky)
    {   // in here, life is simple; no more reflection
        Console.WriteLine("{0}: {1}", typeof(T).Name, sneaky.Foo);
    }
} 
```

# android - Android：网络关系图

> ID：11225735
> 
> 赞同：0
> 
> 时间：2012-06-27T12:02:33.260
> 
> 标签：android, networking, gridview, graph, background

我将首先解释我想要实现的目标，然后再解释我目前解决它的方法。我感谢任何有用的输入，即使这意味着从头开始。如果需要，我会添加更多代码或解释。

这将成为更大的 Android 应用程序的一部分。这部分应该在一个可滚动的视图/布局中显示先前选择的网络中的所有节点以及节点之间的关系。这些关系应该用节点之间的箭头来描绘，显示每个节点在特定时间间隔内可以“听到”哪些节点。遗憾的是，节点必须是可点击的，因为您必须已经能够在该视图中为应用程序的其他部分设置一些选项。实际数据（节点、邻域关系）最终应该通过 Web 服务从数据库返回，但除了节点数量不是静态的事实之外，这还不是完全相关的。

我目前的方法是创建 GridView 用自定义 ButtonAdapter 填充它，这样我就可以使用非静态数量的自定义（透明）按钮。

```
GridView gridview = (GridView) findViewById(R.id.gridview);
gridview.setAdapter(new ButtonAdapter(this)); 
```

我已经创建了可以在 Bitmap 上绘制箭头的方法，并且我还可以通过将其转换为 Drawable 来轻松地将其设置为 GridView 的背景。

```
protected Bitmap drawArrow(float startX, float startY, float endX, float endY, Bitmap bitmap) {
....
}

Drawable d = new BitmapDrawable(bitmap);
gridview.setBackgroundDrawable(d); 
```

我对这种方法的问题是，我需要知道 GridView 的位图的确切大小和按钮的位置，或者总高度和宽度，即 1 个按钮将使用。由于在 onCreate 中创建它，但此时我没有得到实际尺寸。这个问题有解决方案吗？

即使这样可行，我也不确定是否可以将背景设置为与 GridView 以 1:1 滚动而不是缩放的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:35:29.023

解决了`SurfaceView`使用自定义线程和每个按钮的额外类的自定义问题，这些按钮在表面上简单地与它们之间的线一起绘制。滚动也必须单独实现。

# visual-studio-2008 - 将 sql 报告存储在 sqlce 文本字段中？

> ID：11225736
> 
> 赞同：0
> 
> 时间：2012-06-27T12:02:39.447
> 
> 标签：visual-studio-2008, .net-3.5, sql-server-ce

好的，以上内容可能看起来有些奇怪，但请多多包涵……

我正在构建一个报告应用程序。在 .NET3.5 上的 C# 中，它包含一个 SQLCE 3.5 sp1 数据库。我想使用数据库来存储可供用户使用的各种报告的 sql（因此他们不必知道有关脏位的任何信息......）。

当他们希望运行报告时，他们只需在 UI 上选择适当的按钮，然后它就会离开并从数据库中获取相关的 sql 并将其插入一段代码以运行报告，随后将返回的数据呈现给他们。

我有一个这样结构的表格 -

*   ReportIdx 数字，
*   报告名称 varchar(120),
*   SQL_Txt varchar(MAX),
*   评论 varchar(120)

运行以下 -

> INSERT INTO
> SqlLib (ReportIdx, ReportName, SQL_Txt, Comments)
> VALUES (3, 'TestRowInsert02', 'select * from test_table where testid in('1', '2','3') ', '想知道这是否可行？ ')<

我收到以下错误消息 -

*INSERT INTO 子句中的值列表错误。无法解析查询文本。错误来源：SQL Server Compact ADO.NET 数据提供程序错误消息：解析查询时出错。[令牌行号 = 3，令牌行偏移量 = 90，错误令牌 = 1]*

我尝试在 sql_txt 值内的逗号前插入正斜杠（\），但上述错误再次出现，sql insert 语句更改如下 -

> INSERT INTO
> SqlLib (ReportIdx, ReportName, SQL_Txt, Comments)
> VALUES (3, 'TestRowInsert02', 'select * from test_table where testid in(\' 1 \ ', \' 2 \ ',\' 3 \ ') ', '想知道这是否可行？'）<

我想我真正需要知道的是'我可以将报告的 sql 存储在 SQLCE 列中，以便可以简单地检索并随后在另一段代码中运行？我是否可以格式化内容，以便在 SQL 报告中使用它们之前不需要进一步处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:18:07.910

有关在 SQLCE 中使用抽象的想法，请参阅此[链接](http://blogs.msdn.com/b/stevelasker/archive/2008/02/11/stored-procedures-and-sql-server-compact-the-great-debate.aspx)。（一种封装一组 SQL 语句以将底层存储与编程模型隔离的方法）

# powershell - Citrix XenServer Powershell cmdlet 的参考或文档

> ID：11225737
> 
> 赞同：0
> 
> 时间：2012-06-27T12:02:42.613
> 
> 标签：powershell, virtual-machine, citrix, cmdlets, hypervisor

我刚开始为 Citrix XenServer 编写 powershell 脚本。但是，我只能在 Internet 上找到代码片段和此[cmdlet 海报。](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http%3A%2F%2Fwww.x-tech.at%2Fdownload_file.php%3Ffile%3D%252Ffiles%252FCitrix_XenServer_6.0_CmdLet_Poster.pdf&ei=KfXqT-27IoPIsga4r_3zBQ&usg=AFQjCNFQQ0EmfJLoZSLCzDZoguJW11Sitw)

在哪里可以直接从 Citrix 找到包含说明和可能参数的完整文档？所有可用的 API 和参考仅对命令行有效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:16:05.530

我能找到的最好的是底层 SDK 的参考。这些 cmdlet 显然是使用原始 XenServer 管理 API 实现的，并且该 API 已记录在案。你可以在这里找到它的参考：

[http://support.citrix.com/article/CTX130426](http://support.citrix.com/article/CTX130426)

但是，除了 cmdlet 的参考海报之外，我找不到任何其他内容。

这并不理想，但您可以使用 .NET Reflector 查看 cmdlet 的底层代码，了解它们如何使用 XenServer 管理 API，然后交叉引用该 API 的文档。

# php - 使用 DOMDocument 通过 id 提取和打印 html 元素

> ID：11225739
> 
> 赞同：2
> 
> 时间：2012-06-27T12:02:53.830
> 
> 标签：php, domdocument

我想从网页中提取几个表格并在我的页面中显示它们

我打算使用正则表达式来提取它们，但后来我看到了 DOMDocument 类，我在 stackoverflow 中查看它看起来更干净，似乎所有的问题都是关于获取内部文本或使用循环来获取元素的内部节点。我现在想知道如何通过它的 id 提取和打印 html 元素。

```
$html = file_get_contents("www.site.com");
$xml = new DOMDocument();
$xml->loadHTML($html);
$xpath = new DOMXPath($xml);
$table =$xpath->query("//*[@id='myid']");
$table->saveHTML(); // this obviously doesn't work 
```

如何在我的页面上将 $table 显示或回显为实际的 html 表格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T12:20:02.937

首先，`DOMDocument`有一个[`getElementById()`](http://php.net/manual/en/domdocument.getelementbyid.php)方法，所以你的 XPath 是不必要的——尽管我怀疑它在下面是如何工作的。

其次，为了获得标记片段而不是整个文档，您使用[`DOMNode::C41N()`](http://php.net/manual/en/domnode.c14n.php)，因此您的代码如下所示：

```
<?php

    // Load the HTML into a DOMDocument
    // Don't forget you could just pass the URL to loadHTML()
    $html = file_get_contents("www.site.com");
    $dom = new DOMDocument('1.0');
    $dom->loadHTML($html);

    // Get the target element
    $element = $dom->getElementById('myid');

    // Get the HTML as a string
    $string = $element->C14N(); 
```

请参阅一个[工作示例](http://codepad.viper-7.com/hOE29i)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:35:28.653

您可以使用 DOMElement::C14N() 来获取 DOMElement 的规范化 HTML(XML) 表示，或者如果您喜欢更多控制以便可以过滤某些元素和属性，您可以使用如下内容：

```
function toHTML($nodeList, $tagsToStrip=array('script','object','noscript','form','style'),$attributesToSkip=array('on*')) {
$html = '';
foreach($nodeList as $subIndex => $values) {
    if(!in_array(strtolower($values->nodeName), $tagsToStrip)) {
        if(substr($values->nodeName,0,1) != '#') {
            $html .= ' <'.$values->nodeName;
            if($values->attributes) {
                for($i=0;$values->attributes->item($i);$i++) {
                    if( !in_array( strtolower($values->attributes->item($i)->nodeName) , $attributesToSkip ) && (in_array('on*',$attributesToSkip) && substr( strtolower($values->attributes->item($i)->nodeName) ,0 , 2) != 'on') ) {
                        $vvv = $values->attributes->item($i)->nodeValue;
                        if( in_array( strtolower($values->attributes->item($i)->nodeName) , array('src','href') ) ) {
                            $vvv = resolve_href( $this->url , $vvv );
                        }
                        $html .= ' '.$values->attributes->item($i)->nodeName.'="'.$vvv.'"';
                    }
                }
            }
            if(in_array(strtolower($values->nodeName), array('br','img'))) {
                $html .= ' />';
            } else {
                $html .= '> ';
                if(!$values->firstChild) {
                    $html .= htmlspecialchars( $values->textContent , ENT_COMPAT , 'UTF-8' , true );
                } else {
                    $html .= toHTML($values->childNodes,$tagsToStrip,$attributesToSkip);
                }
                $html .= ' </'.$values->nodeName.'> '; 
            }
        } elseif(substr($values->nodeName,1,1) == 't') {
            $inner = htmlspecialchars( $values->textContent , ENT_COMPAT , 'UTF-8' , true );
            $html .= $inner;
        }
    }
}
return $html;
}

echo toHTML($table); 
```

# r - 如何将图像插入 .rnw 文档

> ID：11225743
> 
> 赞同：5
> 
> 时间：2012-06-27T11:36:27.783
> 
> 标签：r, sweave, latex

我在 R 中工作并使用 Sweave 交付 PDF 文件，`sweave(.rnw document)`. 我需要在我的文本中放入一个 JPEG 图像。我没有在网上找到任何功能，也不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:12:32.147

就像在任何其他 LaTeX 文档中包含图像一样包含它：

[http://amath.colorado.edu/documentation/LaTeX/reference/figures.html#pdf](http://amath.colorado.edu/documentation/LaTeX/reference/figures.html#pdf)

```
\includegraphics{myimage.jpg} 
```

将它放在 LaTeX 块中，而不是 R 代码块中。正如链接指出的那样，您需要使用`pdflatex`.

# .net - BadFormatException 安装 64 位服务

> ID：11225745
> 
> 赞同：1
> 
> 时间：2012-06-27T12:03:21.240
> 
> 标签：.net, 64-bit, installation, setup-project, badimageformatexception

.NET 4.0、Windows 7、VS 2010：

尝试使用安装项目安装 64 位服务会导致错误 1001。初始化安装时发生异常：System.BadImageFormatException。

安装项目是使用[这个](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.100%29.aspx)创建的。[我还按照此处](http://msdn.microsoft.com/en-us/library/cd7a85k9%28v=vs.80%29.aspx)的说明将目标平台设置为 64 位。

如果我将服务平台切换到 32 位，一切正常。

你知道如何解决这个 System.BadImageFormatException 异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:06:50.310

如果安装程序的目标平台设置正确，那么剩下的就是服务项目本身是否以 x86 为目标。

为“任何 CPU”（或 x64 - 因为任何 CPU 的 .Net 应用程序将在 64 位机器上以 64 位运行）添加新的解决方案配置（如果您还没有），同时创建项目配置.

在项目属性的“构建”选项卡上检查 exe 的目标平台是否为“任何 CPU”（或 x64）（在属性页上大约 4 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-07T07:33:12.570

将项目的目标平台设置为 AnyCPU，但您必须取消选中首选 32 位。然后将安装程序项目设置 targePlatform 设置为 x64，然后构建项目。

# vba - 保存/加载用户首选项配置文件

> ID：11225759
> 
> 赞同：0
> 
> 时间：2012-06-27T12:04:12.120
> 
> 标签：vba, excel, synchronization, save

我想将保存/打开功能添加到我编写的一个小 Excel 程序中。要使用该程序，用户必须在几张纸上填写数据并调整设置。我想将其保存到配置文件中，以便以后能够加载它。

*我应该如何构建这个 SAVE/OPEN 功能？*

`Entries`我的想法是通过简单的“链接”（`=Sheet1!A1`例如）将输入的数据和配置分组在一张纸上（让我们命名）。此工作表将被导出。

我以这种方式将条目保存到新的 .xls 工作簿中：

```
ActiveWorkbook.Sheets("Entries").Columns("A:B").copy
Workbooks.Add
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False 'Paste only values 
```

*但是，当加载数据时，挑战就来了……*

网上有几个例子（见[这里](http://www.excelforum.com/excel-programming/629768-macro-to-grab-external-data-and-paste-values-into-a-master-spreadsheet.html)和[那里](http://www.excelforum.com/excel-programming/839708-importing-a-csv-file.html)）展示了如何做，但总是有同样的问题。也就是说：如果我只是将数据从保存的工作簿（仅限值）复制到工作`Entries`表，我所有的“链接”都将被删除。有没有办法*同步*数据？

或者是在 VBA 中手动输入所有单元格值并进行数百个范围复制的唯一解决方案，从导出的工作簿直接到用户使用的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:01:20.520

这是找到的**解决方案**。非常感谢您的帮助！

保存条目...

```
Set CurSheet = ActiveWorkbook.Sheets("Entries")
    maxEntries = 150
    CurSheet.copy 'a new workbook is created

    Set wbDest = ActiveWorkbook
    wbDest.Sheets(1).Range("A1:B" & maxEntries).Value = CurSheet.Range("A1:B" & maxEntries).Value
    wbDest.Sheets(1).Range("C1:C" & maxEntries).Value = CurSheet.Range("B1:B" & maxEntries).Formula

    For i = 1 To maxEntries

        'Removes the leading "=" from the formula
        tempCell = ActiveWorkbook.Sheets(1).Range("C" & i).Formula
        If Len(tempCell) > 1 Then
            wbDest.Sheets(1).Range("C" & i).Value = Right(tempCell, Len(tempCell) - 1)
        End If

        'For empty cells
        If wbDest.Sheets(1).Range("B" & i).Value = 0 Then
            wbDest.Sheets(1).Range("B" & i).Value = ""
        End If

    Next i 
```

...并加载它们。

```
fullFileName = Application.GetOpenFilename("Excel files (*.xls),*.xls", _
        1, "Projekt öffnen", , False)

    Workbooks.Open fullFileName
    Set wbSaved = ActiveWorkbook      

    'Data copy
    maxEntries = 150

    For i = 4 To maxEntries

        If Not wbSaved.Sheets(1).Range("C" & i) = "" Then 'Skip the empty lines

            'Parsing
            c = wbSaved.Sheets(1).Range("C" & i).Value
            l = Len(c)
            p = InStr(1, c, "!", vbTextCompare) 'position of the !, that separates the sheet name from the cell number
            cDestSheet = Mid(c, 1, p - 1)
            cDestCell = Mid(c, p + 1, -(p - l))

            'Copy
            wbMain.Sheets(cDestSheet).Range(cDestCell).Value = wbSaved.Sheets(1).Range("B" & i).Value
        End If
    Next i

    wbSaved.Close False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:45:39.593

我有一个想法，可能还不是一个完整的答案，但如果这听起来不错，我会详细说明一些......使用你的例子：

```
ActiveWorkbook.Sheets("Entries").Columns("A:B").copy
Workbooks.Add
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False 'Paste only values 
```

我会改成这个（不完整且未经测试的代码，但你应该明白）：

```
Dim CurSheet As WorkSheet

Set CurSheet = ActiveWorkbook.Sheets("Entries")

With Workbooks.Add
    Sheets(1).Range("A:B").value = CurSheet.Range("A:B").value
    Sheets(2).Range("A:B").value = "'" & CurSheet.Range("A:B").formula
End With 
```

我在这里所做的是获取您已有的值并将它们插入新工作簿的第一张表（参见`With`块中的第一行），然后还获取公式的文本值并将其放入第二张表中，相同的位置（见第二行）。通过这种方式，您可以保留这些值并查看它们的来源。但是，这并没有像您要求的那样真正同步，因为您仍然必须操作新书第 2 页中的数据才能对这些链接做任何有意义的事情。

这是否有助于/让您朝着正确的方向开始？

# git - 向暂存区添加文件时，git 是否保存目录信息？

> ID：11225760
> 
> 赞同：1
> 
> 时间：2012-06-27T12:04:20.670
> 
> 标签：git, git-checkout, git-add

我对 git add 操作很好奇，所以我做了一些测试。

创建索引

```
1\. git init
2\. mkdir mydir
3\. echo "hello" > mydir/hello
4\. find .git/objects  ==> nothing 
5\. git add .
6\. find .git/objects ==> only find one file ,by cat-file,  I am sure it is hello 
```

做一些改变

```
7\. rm mydir/hello 
```

取回文件

```
8\. git checkout mydir/hello
9\. ls mydir/hello ==> hello is back 
```

我的疑问是：当我这样做时`'git add .'`，只会创建一个 blob，而不是创建一棵树来记录直接的“mydir”。那么，如何`git checkout mydir/hello`才能找到 blob 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:35:03.520

`git`索引不会在内部或外部创建树对象。目录结构在它们包含的 blob 的文件名中表示，直到提交（及其关联的树对象）。

因此，在您的示例中，文件名按字面意思表示为`mydir/hello`并与您看到的 blob 相关联。

（[来源](https://github.com/git/git/blob/9bea2b5896701cf952f75c8f6756656cd3c40af0/Documentation/technical/index-format.txt)）

# iphone - 使用远程 Plist 填充 UITableView

> ID：11225763
> 
> 赞同：0
> 
> 时间：2012-06-27T12:04:25.590
> 
> 标签：iphone, objective-c, uitableview, plist

我在服务器上上传了一个 plist。当我使用以下命令记录数组时：

```
NSLog(@"My Array: %@", topModsArray); 
```

它显示：

```
 "New item 0",
    {
    curVersion = "1.2.5";
    description = "This mod enables you to install other mods, does not modify the gameplay itself, helps other mods to.";
    maker = Risugami;
    mcVersion = "1.2.5";
    name = ModLoader;
    rating = 5;
    requires = Nothing;
},
"New item 1",
    {
    curVersion = "3.3.8.153";
    description = "This mod is like ModLoader, it allows other mods to be installed and work properly. This adds more capability for developers when making their mods.";
    maker = SpaceToad;
    mcVersion = "1.2.5";
    name = "Minecraft Forge";
    rating = 5;
    requires = ModLoader;
},
"New item 2",
    {
    curVersion = "1.2.5";
    description = "This mod gives capability for clients to use certain mods and for servers to be modded.";
    maker = Flan;
    mcVersion = "1.2.5";
    name = ModLoaderMP;
    rating = 5;
    requires = ModLoader;
},
"New item 3",
    {
    curVersion = "3.6.2";
    description = "This mod adds much more mobs to minecraft, making the game more fun and enjoyable. (Be warned it adds much more hostile mobs, and in the water)";
    maker = DrZhark;
    mcVersion = "1.2.5";
    name = "Mo' Creatures";
    rating = 5;
    requires = "ModLoader, Minecraft Forge, GUI API and CustomMobSpawner";
},
"New item 4",
    {
    curVersion = "3.1.5";
    description = "This mod makes minecraft more realistic with pipes, quarrys, machines, and much more. If you want your minecraft to be more realistic, this is a must have mod.";
    maker = "SirSengir (Now Opensource)";
    mcVersion = "1.2.5";
    name = Buildcraft;
    rating = 5;
    requires = "ModLoader and Minecraft Forge";
} 
```

这是我希望它显示的内容，但是当我尝试将名称键添加到 UITableView 时：

```
cell.textLabel.text = [[topModsArray objectAtIndex:indexPath.row] objectForKey:@"name"]; 
```

我的应用程序因 SIGABRT 崩溃：

```
2012-06-27 12:54:37.765 MinePedia[72019:f803] -[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6c8bad0
2012-06-27 12:54:37.766 MinePedia[72019:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6c8bad0'
*** First throw call stack:
(0x13bd052 0x154ed0a 0x13beced 0x1323f00 0x1323ce2 0x3424 0xade0f 0xae589 0x99dfd 0xa8851 0x53301 0x13bee72 0x1d6792d 0x1d71827 0x1cf7fa7 0x1cf9ea6 0x1d8530c 0x25530 0x13919ce 0x1328670 0x12f44f6 0x12f3db4 0x12f3ccb 0x12a6879 0x12a693e 0x14a9b 0x2868 0x27c5)
terminate called throwing an exceptionsharedlibrary apply-load-rules all
Current language:  auto; currently objective-c
(gdb) 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:13:52.930

看到在你的.h中创建一个数组并在视图中分配它确实加载并使用它来显示你的表格，让你的数组像这样......

```
for(int i =0 ;i <topModsArray.count ; i++ ){
    id object = [topModsArray objectAtIndex:i];
if([object isKindOfClass:[NSMutableDictionary class]] || [object isKindOfClass:[NSDictionary class]]){
     NSMutableDictionary  *dict = (NSMutableDictionary *)object;
     [yourArray addObject:dict];
 } 
```

现在返回的行数是 yourArray.count 并且在你的 cellForRowAtIndexPath 中：

```
 NSMutableDictionary  *dict = [yourArray objectAtIndexPath:indexPath.row];
 cell.titleLabel.text = [dict objectForKey:@"name"]; 
```

使用这个可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:10:02.527

您的数组由交替的字符串和字典组成。偏移量为零的对象是“New item 0”，它没有`objectForKey:`方法。您需要从数组中选择您实际想要显示的项目（...或使用类似的东西对它们进行索引`indexPath.row * 2 + 1`）。

# asp.net-mvc - .NET 代理 Web 服务如何在 app.config 中设置 MaxItemsInObjectGraph

> ID：11225764
> 
> 赞同：0
> 
> 时间：2012-06-27T12:04:26.753
> 
> 标签：asp.net-mvc, webservice-client

设想：

.Net 应用程序具有 Web 服务引用并具有代理类。Web 服务是 Java Web 服务。有效负载非常大，我已经将 maxBufferSize、MessageSize 等提高到 2147483647 。

完成上述操作后，我仍然遇到以下异常：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 urn:ConsumptionProcessWSVi:Response 时出错。InnerException 消息是“对象图中可以序列化或反序列化的最大项目数为“65536”。更改对象图或增加 MaxItemsInObjectGraph 配额。'。

谁能建议在 web.config 中还需要配置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:23:36.397

设法通过以下配置解决了这个问题：

```
 <behaviors>
      <endpointBehaviors>
        <behavior name="maxItemsInObjectGraph">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

 <endpoint address="http://xxx"
                binding="basicHttpBinding" bindingConfiguration="bidingname" behaviorConfiguration="maxItemsInObjectGraph"
                contract="Yourcontract" name="ConfigPort" /> 
```

# jquery - 如何纠正ie 8中的这个错误？

> ID：11225765
> 
> 赞同：0
> 
> 时间：2012-06-27T12:04:29.623
> 
> 标签：jquery, internet-explorer-8

我正在使用 jquery autosuggest 在文本框中填充数据。当我尝试在 ie8 中使用该功能时，出现错误：控制台未定义

显示错误的jquery代码是：

```
function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            // post data to our php processing page and if there is a return greater than zero
            // show the suggestions box
            $.post("string_search.php", {mysearchString: ""+inputString+""}, function(data){

                **console.log(data.length)**
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }else{
                $('#suggestions').hide();
                }
            });
        }
    } //end 
```

请帮我解决错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:22:19.973

与流行的看法相反，控制台也存在于 IE 中。但是`console`，直到打开开发人员工具（按 F12）后才定义。因此，除非在加载页面时开发者工具已经打开，否则它将失败。

一种解决方案是将以下内容添加到文件顶部（即在使用控制台之前）：

```
<script>
    try {
        console.log('Hello console!');
    } catch(e) {
        console = {log: function(){}};
    }
</script> 
```

这确保它`console.log`始终可用，即使它是无操作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:48:24.530

```
if(window.console && window.console.log)
     console.log(data.length)
else
    alert(data.length); 
```

# c# - AttributeUsage C# 的 Java 等效项

> ID：11225775
> 
> 赞同：3
> 
> 时间：2012-06-27T12:04:44.857
> 
> 标签：c#, java, attributes, equivalent

我必须将一些代码从 C# 转换为 Java，并且我有以下代码：

```
 [AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = true)]
    public class PVAResponseAttribute : XmlRootAttribute
    {
        private const string ROOT_ELEMENT_NAME = "data";

        public PVAResponseAttribute()
            : base(ROOT_ELEMENT_NAME)
        {

        } 
```

Java 中的等价物是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:15:16.573

这个[http://java.net/downloads/opends/promoted-builds/2.2.1/javadoc/org/opends/server/types/AttributeUsage.html](http://java.net/downloads/opends/promoted-builds/2.2.1/javadoc/org/opends/server/types/AttributeUsage.html)链接可以帮助你。

如果您想将项目直接转换为 java，请尝试[http://codeporting.com/apps/csharp-2-java](http://codeporting.com/apps/csharp-2-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:03:33.327

虽然 Java 的注释确实与 C# 属性有很多共同之处，但 OP 提出了一个特定的问题。

**[Java 中没有C# AttributesUsage 属性](http://msdn.microsoft.com/en-us/library/tw5zxet9%28v=vs.100%29.aspx)的直接等效项。** 这是您在创建自己的自定义属性时应用的 C# 核心属性。它用于控制属性的行为。

你用它来：

*   限制属性的可能目标。有关各种选项，请参阅[AttributeTargets 枚举](http://msdn.microsoft.com/en-us/library/system.attributetargets.aspx)。
*   决定属性是否适用于继承的成员
*   决定是否允许您在同一成员上多次使用此属性

在这种情况下，C# 代码的作者坚持使用默认值。他们编写的自定义属性可以应用于任何类，并且对于继承成员没有有趣的行为（它适用于继承的成员），如果它可以在成员上多次使用（它不能）。

要将此代码移植到 Java，您需要创建与作者的 C# PVAResponseAttribute 属性相同的 Java 注释。

但是，在这种情况下**，您不必担心没有与 C# AttributesUsage 属性直接等效的 Java 注释。**

# file - 刷新工作区或将文件上传到 Tomcat 服务器？如何

> ID：11225778
> 
> 赞同：0
> 
> 时间：2012-06-27T12:05:19.047
> 
> 标签：file, jsp, tomcat, refresh, workspace

我在 Eclipse 上有一个在 tomcat 服务器上运行的动态 Web 项目 (JSP)。我使用 GraphViz 代码创建文件，然后使用 DOT 系统调用创建图像，并将它们放在项目的子目录中。

所有这些都有效，但现在的问题是在 JSP 页面中显示创建的图像。

由于图像是动态创建的，因此它们不在服务器中，也不在项目子目录中，直到我在工作区手动刷新项目。

为了解决这个问题，我尝试使用包含 IWorkspace、IProject、IFile 类的 aspectj 库，但似乎只有在开发 Eclipse 插件时才有用。

我正在考虑另一种方式来动态刷新工作区或将图像上传到 tomcat 服务器。

所以问题是：

*   如何使用 Java (JSP) 将文件（图像）上传到 tomcat 服务器？
*   如何在非 Eclipse（或 Eclipse 插件）项目中动态刷新工作区？
*   如何在 JSP 页面中显示既不在项目工作区也不在 tomcat 服务器中的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:33:22.497

看看[Eclipse 的 Tomcat 插件](http://struts.apache.org/2.0.6/docs/setting-up-eclipse-with-tomcat.html)。它可能应该可以帮助您解决问题的根源。

# jquery - 通过电线将画布复制到画布

> ID：11225780
> 
> 赞同：2
> 
> 时间：2012-06-27T12:05:24.880
> 
> 标签：jquery, html, node.js, canvas

将一个画布（一台机器）复制到另一个画布（另一台机器）的优化方法是什么。

我知道下面的方法，但我认为当画布信息以很短的间隔发送时会产生性能问题。

```
canvas.toDataURL("image/png"); 
```

我听说过发送坐标信息。各位大神能不能给点光明？或者如果有更好的方法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:35:38.600

我的建议是将绘制到画布上的东西作为 java 脚本对象保留一个单独的模型（为您绘制的每个矩形保留一个“矩形对象”等）。比这些“模型对象”中的每一个都具有版本属性或更新标志。保持您的“模型对象”和画布同步并更新版本或在您触摸“模型对象”时设置更新的标志。同步时，仅传输更新的“模型对象”。这基本上就是人们谈论更新“坐标”时的意思。

当然，这取决于您绘制了多少项目、更新了多少项目以及您的画布有多大。在某些时候，发送图片可能更有效。您还可以通过将图片切成碎片并仅发送更新的部分来优化它，但我想您必须自己解码获得的结果`.toDataURL()`。

# javascript - 通过变量的值调用函数并保持 this 指针的范围

> ID：11225781
> 
> 赞同：2
> 
> 时间：2012-06-27T12:05:28.280
> 
> 标签：javascript, this, function-pointers

我一直在摆弄代码来调用具有变量值名称的函数，然后在调用时保持 this 范围，但是 this 指针似乎在我使用 jQuery 的 bind 方法的元素的上下文中，而不是我可能正在调用的函数所在的对象。为了澄清这里的一些代码来说明问题：

```
classname.prototype = {
    bindElementToFunction: function(element, functionToCall){
        $(element).bind("click", 
                        {realThis: this, functionToCall: functionToCall}, 
                        this.callFunction);
    },

    // I had hoped I could change the this pointer back to the object by running 
    // it through this function, I have tried using .apply and .call but I can't 
    // seem to get them to work with function pointers
    callFunction: function(event){
        var realThis = event.data.realThis;
        var functionToCall = event.data.functionToCall;
        functionToCall = realThis[functionToCall];
        // I have tried .apply and .call in several different ways but can't seem 
        // to get them to work in this context
        functionToCall(); 
    },
    abitraryFunction: function(){
        this.test();
    },
}; 
```

这里的问题是一切正常，直到 abitraryFunction 仍然引用绑定函数中的元素。我尝试使用适当的 this 指针执行 .apply() ，但它们似乎不起作用。

那么问题来了，如何结合函数指针更改“this”指针的上下文？随意放弃我编写的所有代码，只要我能够对元素执行绑定函数，然后在“this”引用该方法所在的对象的对象中运行方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:04:32.987

我认为 jQuery 绑定使您的代码变得比它需要的更复杂。[JavaScript`bind()`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)完美运行：

[http://jsfiddle.net/bQGWS/](http://jsfiddle.net/bQGWS/)

通过简单地将函数分配给元素的 onclick（或任何其他事件挂钩），`this`从元素的角度进行评估，因此指向元素本身。

当您使用 bind 时，您最终会得到一个函数的副本，其中`this`有效地替换为您传入的 var `bind()`。

```
classname = function(){}

classname.prototype = {
    method: function(){
        try {
            alert( this.othermethod() );
        } catch(e) {
            // Method doesn't exist in scope
            alert( 'Wrong scope :(');
        }
    },

    othermethod: function(){
        return 'hello desired scope!';
    },

    referenceToElement: function(elementId, functionname){
        var el = document.getElementById(elementId);

        // Just assigning the function as is
        el.onclick = this[functionname];
    },

    bindToElement: function(elementId, functionname){
        var el = document.getElementById(elementId);

        // Using the bind function to create a copy in the
        // scope of this (within the prototype)
        el.onclick = this[functionname].bind(this);
    }
}

var instance = new classname();
instance.referenceToElement('reference', 'method');
instance.bindToElement('bound', 'method'); 
```

# c# - 将文本传递给 Dropdownlist 时 ASP.net C# 错误，它使用枚举作为其数据源列表

> ID：11225783
> 
> 赞同：0
> 
> 时间：2012-06-27T12:05:30.303
> 
> 标签：c#, asp.net

(Asp.net/C# VS2008)
我有一个由数据库填充的数据网格，当按下编辑时，会打开一个表单并从该数据网格行填充字段/控件。
我的问题在于尝试填充下拉列表框，该框具有来自 ENum 列表的数据源。
我只是无法从数据网格单元格中获取文本以显示在 ddL 中，它也应该等于枚举项之一并自动选择它。
我
从数据网格单元格中提取的代码给了我“低”<br> ddl_reg.Text = e.Item.Cells[25].Text;

```
 public void Populate_regstatus_dropdownlist()
{
    //if (!IsPostBack)
    //{
    //    ddl_reg.DataSource = Enum.GetNames(typeof(regstatus));
    //    ddl_reg.DataBind();
    //}
    //if (!IsPostBack)
    //{
    //    foreach (int value in Enum.GetValues(typeof(regstatus)))
    //    {
    //        ddl_reg.Items.Add(new ListItem(Enum.GetName(typeof(regstatus), value), value.ToString()));
    //    }
    //}
    ddl_reg.DataSource = Enum.GetNames(typeof(regstatus ));
    //ddl_reg.DataValueField = regstatus;
    //ddl_reg.DataTextField = "Low";
    //ddl_reg .SelectedItem = Enum.GetName(typeof (regstatus ));
    ddl_reg.DataBind();
    //ddl_reg.SelectedIndex = ddl_reg.Items.IndexOf(ddl_reg.Items.FindByText("Low"));

}
public enum regstatus
{
    NotSelected,
    Low,
    Medium,
    High
} 
```

收到的错误是；

ddl_reg' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

我是 C# 的新手，但通过搜索您的网站，我意识到这意味着看不到或未提取该值，并且真的会获得一些帮助，或者指向正确的方向，干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:36:52.733

I believe the problem is that the drop down list doesn't contain the item you are passing. You may check it before changing the selected value. Other chances are that the value you are getting from `e.Item.Cells[25].Text` may contain spaces, so you may trim before setting it to the drop down.

```
 if (ddl_reg.Items.FindByText("Low") != null)
            {

                ddl_reg.Text = e.Item.Cells[25].Text;
            }
            else
            {
                //Not found
            } 
```

# c# - 我可以把我的清单放在哪里？

> ID：11225789
> 
> 赞同：0
> 
> 时间：2012-06-27T12:05:44.000
> 
> 标签：c#

目前我有这个清单：

```
List<Car> cars = new List<Car>()
              {
                new Car()
                { 
                    CarId = 1, 
                    CarName = "BMW", 
                    CarMod = "M6",                   
                }, 
              } 
```

在 Form1.cs 下。我希望它在一个可能称为 MyCars.cs 的类中，并且能够使用位于 Form1.cs 下的这个 linq 调用它。

```
private void btn_Click(object sender, EventArgs e)
        {
            string entered = txtBox.Text;

            var q = from car in cars
                        where car.CarMod.Contains(entered)
                        select cars;

            dataGridView1.DataSource = query.ToList();      
        } 
```

我如何调用它而不得到“当前上下文中存在的名称汽车”？

放在课堂上不是更好更优雅吗？我正在考虑创建一个名为 MyCars.cs 的课程

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:16:12.727

除非我弄错了，否则您的目标不是创建新的类类型，而是将您的汽车逻辑放在单独的文件中？只要类名相同，您就可以将其放在另一个文件中。如果表单是以“正常”方式制作的，从 .net 2.0 及更高版本开始，它们应该属于部分类

```
//Form1.cs
namespace A
{
   public partial class Form1
   {
       public Form1()
       {
           InitalizeComponent();
       }
   }
} 
```

只要您在另一个文件中使用相同的名称空间和部分类，就可以了

```
//MyCars.cs
namespace A
{
   partial class Form1
   {
       List<Car> cars = ..... /etc
   }
} 
```

# magento - Magento 类别导入手动指定 ID

> ID：11225794
> 
> 赞同：2
> 
> 时间：2012-06-27T12:05:56.797
> 
> 标签：magento, csv, import, categories

我目前正在尝试设置一个导入脚本，该脚本将从 CSV 文件中读取带有 ID 号的类别列表，我想做的是将类别插入到默认网站的根类别中，但具有特定的 ID，以便我可以通过 ID 号将产品插入类别。

[http://www.sonassi.com/knowledge-base/quick-script-batch-create-magento-categories/](http://www.sonassi.com/knowledge-base/quick-script-batch-create-magento-categories/)

我目前正在使用上面链接中的脚本，想知道是否有人能告诉我我在哪里插入 setId() 代码，我已经在几个地方尝试过，它只是取消了 parentId，所以所有类别都是在系统的根目录而不是默认存储的根文件夹中。

我已手动将 parentId 设置为默认站点的主根文件夹，因此它们都应该在同一个位置创建，如果我不手动设置 ID，它确实会在正确的位置创建它们，所以我认为问题只是语法，如果我在正确的位置创建它们时没有设置根文件夹，那么唯一的问题是它们具有动态类别 ID，而不是所需的静态 ID。

提前致谢。布拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:25:18.340

只需在 CSV 文件中添加第三列：

> 3、子猫、2700

然后将带有 entity_id 的行添加到您的脚本中。

```
$data['general']['path'] = $line[0];
$data['general']['name'] = $line[1];
$data['general']['entity_id'] = $line[2];
$data['general']['meta_title'] = ""; 
```

如果您想将类别添加到正确的位置，您还应该查看 parent_id、位置、级别和路径。

根据您拥有的类别数量，我会或多或少手动执行此操作，在 csv 中再添加一列并添加如下行：

```
$data['general']['path'] = $line[3]; 
```

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:54:53.017

我遇到了完全相同的问题，如果我使用该`setId()`方法（或其他设置 ID 的方式），我的类别将永远不会嵌套在其定义的父类别/路径下。我发现我必须将其分为两部分：首先设置 ID 并保存类别，然后设置路径并重新保存类别。

```
$categoryID = 999;  //Your category ID
$categoryName = 'Category Name';  //Your category name

$parentCategory = Mage::getModel('catalog/category')->load(888); //Your parent category's ID

//1st save with initial category information (inc. ID)
$category = new Mage_Catalog_Model_Category();
$category->setName($categoryName);
$category->setId($categoryID);
$category->setPath($parentCategory->getPath()); //Shouldn't be needed here
$category->save();

//2nd save with correct path underneath the parent category
$category->setPath($parentCategory->getPath() . '/' . $categoryID);
$category->save(); 
```

看起来有点像黑客，但我遇到的其他建议都没有帮助，所以我希望这对某人有所帮助！

# magento - 新属性在 magento 中不起作用

> ID：11225798
> 
> 赞同：1
> 
> 时间：2012-06-27T12:06:17.213
> 
> 标签：magento, attributes

我在 magento 中创建了一个新属性 Catalog -> Attributes -> Manage Attributes COLOR 我已经设置了它的值 ad 必需的，可见的，可搜索的，与 yes 相当

但它没有显示在我的产品下。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:32:01.780

您是否已将属性添加到相关产品的属性集中？

目录 > 属性 > 管理属性集

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T14:14:36.383

除了 Drews 的回答之外，您是否重新索引了该站点：系统 > 索引管理？

# javascript - 使用 javascript/jQuery 构建 JSON 字符串

> ID：11225800
> 
> 赞同：2
> 
> 时间：2012-06-27T12:06:29.337
> 
> 标签：javascript, jquery, ajax, json, stringify

我正在使用 jQuery 中的 $.post() 函数使用 JSON 字符串进行 Ajax 调用。调用如下所示：

```
$.post(
    urlVar,
    jsonVar,
    function(data){
        //do stuff
    },
    'json'
)
.complete(function(){
    //do other stuff
}); 
```

要创建*jsonVar*，我正在使用此代码

```
var1 = {};
var1.id = fooId;
var1.amount = fooAmount;
var1.zoom = fooZoom;
jsonVar = JSON.stringify(var1); 
```

为了使调用工作，*jsonVar*应该是这样的

```
{id:fooId, amount:fooAmount, zoom:fooZoom} 
```

但它看起来像这样

```
{"id":fooId, "amount":fooAmount, "zoom":fooZoom} 
```

现在我的代码将无法工作，因为双引号。我不知道如何摆脱这些。谁能帮我吗？

重要的：

`$.post()`如果我像这样放置函数，代码确实可以工作：

```
$.post(
    urlVar,
    {id: fooId, amount: fooAmount, zoom: fooZoom},
    function(data){
        //do stuff
    },
    'json'
)
.complete(function(){
    //do other stuff
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:12:58.310

[JSON 规范](http://www.json.org/)声明键必须有双引号。

你的意思是你的代码因为双引号而不能工作？**使用JSON.parse**将 JSON 解析回对象；它内置在许多现代浏览器中，或者您可以使用[json2](https://github.com/douglascrockford/JSON-js/)库对其进行填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:24:03.963

鉴于此代码：

```
var fooId = 'foodyfood';
var fooAmount = 10.20;
var fooZoom = 'zoomer';
var var2 = {};

var var1 = {}; 
var1.id = fooId; 
var1.amount = fooAmount; 
var2.zoom = fooZoom; 
jsonVar = JSON.stringify(var1); 
$('#showme').text(jsonVar); 
```

showme 中显示的值将是：

```
{"id":"foodyfood","amount":10.2} 
```

所以你的例子似乎有缺陷，实际上不是指定双引号的 JSON 标准。

编辑：现在您对帖子的使用相当于：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

除了它在编辑后将对象作为第二个示例中的对象处理。

请参阅此处文档中的示例：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

使用这种形式：

```
$.post("test.php", { name: "John", time: "2pm" },   function(data) {
     alert("Data Loaded: " + data);   
}); 
```

所以如果你有：

```
var mytest =  { name: "John", time: "2pm" }; 
```

它变成：在字符串化

```
{"name":"John","time":"2pm"} 
```

在这里查看工作示例：http: [//jsfiddle.net/v4NHv/](http://jsfiddle.net/v4NHv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:24:25.160

像这样改变`post`通话

```
$.post(
    urlVar,
    {var1:jsonVar},
    function(data){
      //do stuff
   },
   'json'
)
.complete(function(){
   //do other stuff
}); 
```

然后当然你需要为你的接收应用程序做一个小周

# xml - XML 合并节点

> ID：11225801
> 
> 赞同：2
> 
> 时间：2012-06-27T12:06:34.570
> 
> 标签：xml, xslt

我有以下xml：

```
<Root>    
        <Item>
          <CityCode>ALV</CityCode>
          <AirportCode>ALV</AirportCode>
          <CityName>ANDORRA LA VELLA</CityName>
          <AirportName>Andorra La Vella Hlpt</AirportName>
          <StateCode></StateCode>
          <CountryCode>AD</CountryCode>
          <AirportTypeCode>8</AirportTypeCode>
          <AirportTypeName>Heliport, not scheduled</AirportTypeName>    
       </Item>       
</Root> 
```

我需要一个 xslt 来得到这个：

```
<Root>
   <Item>
     <CityCode>ALV</CityCode>
     <CityName>ANDORRA LA VELLA</CityName>
     <CityNameComplete> ANDORRA LA VELLA (ALV) - Andorra La Vella Hlpt </CityNameComplete>
   <Item>
<Root> 
```

我知道如何获得前 2 个节点，我不知道如何“插入”最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:14:41.470

有多种方法可以将它嵌入到您的完整 XSLT 中，但假设您将元素视为原始 Xml 文档`<CityNameComplete>`中元素的替换。`<AirportName>`

然后，关键是 XSLT 的`<value-of>`元素：

```
<xsl:template match="/Root/Item/AirportName">
    <CityNameComplete><xsl:value-of select="../CityName"/> (<xsl:value-of select="../AirportCode"/>) - <xsl:value-of select="."/></CityNameComplete>
</xsl:template> 
```

这将产生一个

```
<CityNameComplete>ANDORRA LA VELLA (ALV) - Andorra La Vella Hlpt</CityNameComplete> 
```

结果中的元素。

**更新：**如果您真的想要完整城市名称周围的空格，请将其添加`<xsl:text> </xsl:text>`到样式表中：

```
<xsl:template match="/Root/Item/AirportName">
    <CityNameComplete><xsl:text> </xsl:text><xsl:value-of select="../CityName"/> (<xsl:value-of select="../AirportCode"/>) - <xsl:value-of select="."/><xsl:text> </xsl:text></CityNameComplete>
</xsl:template> 
```

结果：

```
<CityNameComplete> ANDORRA LA VELLA (ALV) - Andorra La Vella Hlpt </CityNameComplete> 
```

**更新 2：**包括 IATA 代码。

**更新 3：**插入节点的另一种解决方案是将其添加到`<Item>`元素的模板中：

```
<xsl:template match="/Root/Item">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
        <CityNameComplete><xsl:text> </xsl:text><xsl:value-of select="CityName"/> (<xsl:value-of select="AirportCode"/>) - <xsl:value-of select="AirportName"/><xsl:text> </xsl:text></CityNameComplete>
    </xsl:copy>
</xsl:template> 
```

请注意，您必须删除您不想完全获得输出的节点 - 因为您没有要求这样做，而且我不想弄乱答案，所以我没有包含任何关于如何这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:18:22.953

一种方法是在标识模板的基础上构建，并有一个额外的模板来匹配**item**元素，然后使用**concat**函数在其中输出**CityNameComplete元素：**

 **```
<xsl:template match="Item">
  <Item>
     <xsl:apply-templates select="@*|node()"/>
     <CityNameComplete>
        <xsl:value-of select="concat(CityName, ' (', AirportCode, ') ', AirportName)"/>
     </CityNameComplete>
  </Item>
</xsl:template> 
```

您还需要一个模板来忽略您不想输出的所有元素。在这种情况下，除**CityCode**和**CityName**元素之外的所有内容

```
<xsl:template match="Item/*[not(self::CityCode|self::CityName)]"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="Item/*[not(self::CityCode|self::CityName)]"/>

   <xsl:template match="Item">
      <Item>
         <xsl:apply-templates select="@*|node()"/>
         <CityNameComplete>
            <xsl:value-of select="concat(CityName, ' (', AirportCode, ') ', AirportName)"/>
         </CityNameComplete>
      </Item>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的输入 XML 时，将输出以下内容

```
<Root>
   <Item>
     <CityCode>ALV</CityCode>
     <CityName>ANDORRA LA VELLA</CityName>
     <CityNameComplete>ANDORRA LA VELLA (ALV) Andorra La Vella Hlpt</CityNameComplete>
   </Item>
</Root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:15:25.250

这是一个可以处理缺失`<AirportCode>`和/或的版本`<AirportName>`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!--Identity template. Matches everything that isn't matched
        by another template and copies it without modification.-->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Item">
        <!--Copy the current element (Item) to the output.-->
        <xsl:copy>
            <!--Apply templates to attributes of Item and also the
            CityCode and CityName elements. All other nodes of
            Item will not be processed.-->
            <xsl:apply-templates select="CityCode|CityName|@*"/>
            <CityNameComplete>
                <!--Output the value of CityName.-->
                <xsl:value-of select="CityName"/>
                <!--Apply the template for AirportCode. If it doesn't exist,
                nothing will be output.-->
                <xsl:apply-templates select="AirportCode"/>
                <!--Apply the template for AirportName. If it doesn't exist,
                nothing will be output.-->
                <xsl:apply-templates select="AirportName"/>
            </CityNameComplete>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="AirportCode">
        <!--Output the value of AirportCode, surrounded by parenthesis and
        preceded by a space.-->
        <xsl:value-of select="concat(' (',.,')')"/>
    </xsl:template>

    <xsl:template match="AirportName">
        <!--Output the value of AirportName, preceded by a "space dash space".-->
        <xsl:value-of select="concat(' - ',.)"/>
    </xsl:template>

</xsl:stylesheet> 
```**

# sql-server - 如何使用 newid() 为存储过程变量赋值？

> ID：11225804
> 
> 赞同：4
> 
> 时间：2012-06-27T12:06:48.063
> 
> 标签：sql-server, tsql, newid

我正在尝试生成一个新的 GUID 并将该值分配给`NewReportID`. 但是，我不确定如果我替换`@NewReportID`过程中的任何地方`newid()`，它将为每一行生成一个新的 GUID。

我必须生成一个 GUID 并为 NewReportID 分配 GUID 的值？

我在变量声明中尝试过：`@NewReportID varchar(50)=newid()`但这给了我很多错误。

```
ALTER PROCEDURE [dbo].[AmendInsertDuplicateFields] (@ReportID varchar(50), @NewReportID varchar(50))
AS

    Begin           

INSERT INTO [MVCOmar].[dbo].[PrideMVCCollisionBegin]
  ([ReportID], [LocalIncidentNum], [version], [MTOReferenceNo], [Submitted])
SELECT @NewReportID, [LocalIncidentNum], [version], [MTOReferenceNo], [Submitted]
FROM [MVCOmar].[dbo].[PrideMVCCollisionBegin] WHERE [ReportID]=@ReportID;

INSERT INTO [MVCOmar].[dbo].[PrideMVCCollisionDetails] ([Classification]      ,
    [ReportType]      ,[CollisionDate]      ,[CollisionDay]      ,
    [CollisionTime]      ,[CollisionLoc]      ,[ImpactLoc]      ,[ThruLaneNo]      ,
    [Weather1]      ,[Weather2]      ,[Light]      ,[TrafficControl]      ,
    [TrafficControlCond]      ,[RoadChar1]      ,[RoadChar2]      ,
    [RoadSurface1]      ,[RoadSurface2]      ,[RoadCond1]      ,[RoadCond2]      ,
    [RoadSurfaceCond1]      ,[RoadSurfaceCond2]      ,[RoadAlignment1]      ,
    [RoadAlignment2]      ,[RoadPavementMarking1]      ,[RoadPavementMarking2]      ,
    [OtherCollisionLoc]      ,[OtherImpactLoc]      ,[OtherWeather1]      ,
    [OtherWeather2]      ,[OtherLight]      ,[OtherTraffic]      ,
    [OtherRoadSurface1]      ,[OtherRoadSurface2]      ,[OtherRoadSurfaceCond1]      ,
    [OtherRoadSurfaceCond2]      ,[OtherClassification]      ,
    [DiagramDescription]      ,[R1NumLanes]      ,[R1MaxSpeed]      ,
    [R1AdviseSpeed]      ,[R2NumLanes]      ,[R2MaxSpeed]      ,[R2AdviseSpeed]      ,
    [NumInvolved]      ,[OfficerID]      ,[Checked]      ,[LastModified]      ,
    [LastModifiedBy]      ,[StartTime]      ,[EndTime]      ,[Display]      ,
    [ReportID]      ,[InitialImpactType]      ,[OtherInitialImpactType]      ,
    [SelfReported])
SELECT [Classification]      ,[ReportType]      ,[CollisionDate]      ,
    [CollisionDay]      ,[CollisionTime]      ,[CollisionLoc]      ,[ImpactLoc]      ,
    [ThruLaneNo]      ,[Weather1]      ,[Weather2]      ,[Light]      ,
    [TrafficControl]      ,[TrafficControlCond]      ,[RoadChar1]      ,
    [RoadChar2]      ,[RoadSurface1]      ,[RoadSurface2]      ,[RoadCond1]      ,
    [RoadCond2]      ,[RoadSurfaceCond1]      ,[RoadSurfaceCond2]      ,
    [RoadAlignment1]      ,[RoadAlignment2]      ,[RoadPavementMarking1]      ,
    [RoadPavementMarking2]      ,[OtherCollisionLoc]      ,[OtherImpactLoc]      ,
    [OtherWeather1]      ,[OtherWeather2]      ,[OtherLight]      ,
    [OtherTraffic]      ,[OtherRoadSurface1]      ,[OtherRoadSurface2]      ,
    [OtherRoadSurfaceCond1]      ,[OtherRoadSurfaceCond2]      ,
    [OtherClassification]      ,[DiagramDescription]      ,[R1NumLanes]      ,
    [R1MaxSpeed]      ,[R1AdviseSpeed]      ,[R2NumLanes]      ,[R2MaxSpeed]      ,
    [R2AdviseSpeed]      ,[NumInvolved]      ,[OfficerID]      ,[Checked]      ,
    [LastModified]      ,[LastModifiedBy]      ,[StartTime]       

    End 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:14:02.500

使用正确的数据类型？`uniqueidentifier`

```
declare @NewReportID uniqueidentifier 
set @NewReportID = NEWID() 
```

您使用的是什么风格的 sql-server？我试过你说的错误：

> 我在变量声明中尝试过：@NewReportID varchar(50)=newid() 但这给了我很多错误。

但这对我有用

![在此处输入图像描述](../Images/f08c936eeabf9fa74c76a01f69252ee7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:15:28.920

您使用 a 有什么原因`VARCHAR()`吗？

理想情况下，您应该使用该`uniqueidentifier`类型。

```
DECLARE
  @myGUID    uniqueidentifier
SELECT
  @myGUID    = NewID() 
```

**编辑**

由于您对 a*很*感兴趣`VARCHAR()`，因此您*可以*将其转换为字符串。这比任何真正的技术问题都更浪费空间......

```
DECLARE
  @myGUID    VARCHAR(50)
SELECT
  @myGUID    = CONVERT(varchar(50), @myid) 
```

在您的 SP 中，@newReportID 是一个输入参数。因此，您可以将 SP 更改为不需要输入，也可以在输入之前设置它

使用当前的 SP...

```
DECLARE
  @myGUID    VARCHAR(50)
SELECT
  @myGUID    = CONVERT(varchar(50), @myid)

EXEC [dbo].[AmendInsertDuplicateFields] @reportID, @myGUID 
```

改变 SP...

```
ALTER PROCEDURE [dbo].[AmendInsertDuplicateFields] (@ReportID varchar(50))
AS
BEGIN

DECLARE
  @NewReportID VARCHAR(50)
SELECT
  @NewReportID = CONVERT(varchar(50), @myid)

-- Then use @NewReportID onwards in the SP 
```

并且只用一个参数调用 SP...

```
EXEC [dbo].[AmendInsertDuplicateFields] @reportID 
```

[http://msdn.microsoft.com/en-us/library/ms190348.aspx](http://msdn.microsoft.com/en-us/library/ms190348.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T12:10:38.177

```
 DECLARE @NewReportID VARCHAR(50)
   SET @NewReportID = cast(NEWID() AS VARCHAR(50)) 
```

# c# - 从 catch 块向客户端发送格式化的错误消息

> ID：11225806
> 
> 赞同：6
> 
> 时间：2012-06-27T12:06:53.287
> 
> 标签：c#, asp.net-web-api

我正在使用以下代码从过滤器（ActionFilterAttribute）向客户端发送错误消息。

```
catch (Exception)
 {
    var response = context.Request.CreateResponse(httpStatusCode.Unauthorized);
    response.Content = new StringContent("User with api key is not valid");
    context.Response = response;
 } 
```

但问题是它仅以纯文本形式发送。我想将它作为当前格式化程序的格式发送。像 json 或 xml 的形式。

在这里我知道这是因为我使用的是 StringContent()。但是我们如何使用自定义的 Error 对象来编写呢？像，以下也不起作用：

```
response.Content = new Error({Message = "User with api key is not valid"}); 
```

我们如何为此编写代码？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T13:07:39.507

是的，我找到了正确的写作语法。我们可以这样写：

```
catch (Exception)
{
    var response = context.Request.CreateResponse(HttpStatusCode.NotFound, 
                        new Error { Message = "User with api key is not valid"});
    context.Response = response; 
} 
```

# node.js - Heroku 不尊重 npm-shrinkwrap.json

> ID：11225809
> 
> 赞同：3
> 
> 时间：2012-06-27T12:06:55.940
> 
> 标签：node.js, heroku, npm

我有一个`npm-shrinkwrap.json`签入的 Node.js 应用程序。当我在`npm install`本地运行时，它会安装 中指定的版本`npm-shrinkwrap.json`，但是当我将它推送到 Heroku（在 Cedar 堆栈上）时，它似乎忽略了收缩包装，只是安装了最新版本。

难道我做错了什么？我不需要办理登机手续`node_modules`，是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:33:38.117

正如您在回答中所说，当 Heroku 编写 Nodejs buildpack 时，该功能`npm shrinkwrap`不存在。

但是，从 1.1.2 版本开始，首先`npm install`尝试`npm-shrinkwrap.json`，然后回退到`package.json`. 这意味着 Heroku 尊重它（即使 Heroku 编写代码时还没有构思该功能）。艾萨克真棒。

所以只需添加到您的`package.json`：

```
"engines": {
  "node": "0.8.x",
  "npm": ">=1.1.2"
} 
```

然后运行`npm shrinkwrap`​​, 和`git add npm-shrinkwrap.json`. 然后正常提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:33:57.020

事实证明，Heroku 目前使用 npm 1.0.106，但`shrinkwrap`根据[changelog](https://github.com/isaacs/npm/blob/master/doc/cli/changelog.md)仅在 npm 1.1.2 中添加。

添加`node_modules`解决了我的问题，直到 Heroku 升级他们的 npm。

# .htaccess - CakePHP HTAccess 500 内部服务器错误，404 Page Not Found 错误

> ID：11225811
> 
> 赞同：2
> 
> 时间：2012-06-27T12:06:59.217
> 
> 标签：.htaccess, cakephp

我正在使用`CakePHP 1.2`版本，当我在 Live Server 上上传我的网站时，它给了我`500 Internal Server Error`

当我签`mod_rewrite`入`phpinfo`功能时，它不可见，但是在同一台服务器上，另一个 Joomla 站点运行得非常好，没有任何 htaccess 问题或 Joomla 的 AceSEF 组件用于 htaccess 页面/路径的路径重写问题，所以我相信`Shared server`它必须是那样。

我尝试了不同的选项，例如在根 .htaccess 文件中添加“RewriteBase /”或在 app/webroot/.htaccess 文件中尝试相同的选项，但没有解决方案适合我。

即使我在根 .htaccess 和 app/.htaccess 文件中写入“RewriteBase /”，错误也会更改为`400 Page Not Found`. 我不知道为什么。

下面是 .htaccess 代码：

根 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteRule    ^$ app/webroot/    [L]
RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序/.htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteRule    ^$    webroot/    [L]
RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

应用程序/webroot/.htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php?url=$1 [QSA,L]
</IfModule> 
```

我已经阅读了一些链接，例如：[Apache-and-mod_rewrite-and-htaccess](http://book.cakephp.org/view/917/Apache-and-mod_rewrite-and-htaccess)虽然没有多大帮助

此错误的任何答案或解决方案？非常感激 ！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T09:41:58.777

检查重写模块是否链接在apache的启用模块中。就像你说它没有在 phpinfo() 中列出，所以模块可能没有启用，joomla 有一些解决方法。

（使用以下命令需要您自担风险，您需要 root 访问权限）在 debian/ubuntu 下；apache2这样启用模块

```
cd /etc/apache2/mods-enabled/
ln -s ../mods-available/rewrite.load rewrite.load 
```

你必须重新启动apache2

```
service apache2 restart 
```

然后应该启用该模块！所以再试一次。

或者，告诉您尝试打开的网址！

# c# - Scala 和 C# 中的隐式转换

> ID：11225813
> 
> 赞同：4
> 
> 时间：2012-06-27T12:07:03.173
> 
> 标签：c#, scala, implicit, explicit

隐式转换似乎是 Scala 的一个主要且有争议的特性，而它们在 C# 中的重要性似乎要小得多。**这两种语言有什么区别？是否有任何地方我被迫在 Scala 中使用隐式，或者我总是可以选择我希望转换是隐式的还是显式的，就像在 C# 中一样？**通常在 C# 中，我喜欢显式地进行转换，以保持对程序员意图的类型检查，即使消费者是我自己也是如此。

**我是否正确地说 C# 或 Scala 都不能隐式拆分或组合方法/函数参数？**如 def myMethod(v1: Int, v2: Int) 将不接受 Tuple2[Int, Int] 作为其参数列表，而 def yourMethod(v1: Tuple2[Int, Int]) 将不接受两个整数作为其参数列表. 据推测，语言设计者必须考虑隐式/显式参数拆分/组合。当使用多个但相似的图形库的点结构时，我确实发现此功能是可取的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T13:20:57.153

Scala 和 C# 隐式转换之间的主要区别在于 Scala 中更灵活的作用域规则，它允许您定义哪些隐式转换在哪些作用域中可用。

虽然在 C# 中，隐式转换是一种表示您的一个类可以被视为另一个类的方式，但在 Scala 中，它允许您仅在特定上下文中添加特定功能来装饰您的类。

此外，虽然 C# 中的隐式转换需要在类本身中定义，但在 Scala 中，您可以在外部添加隐式转换，这是装饰预先存在的类的强大工具：Scala 带有一组预定义的显式转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:24:30.047

> 主要和有争议的功能

我不知何故错过了这场争议，所以我怀疑这是一个主要的争议。

隐式转换是可用的，但根据具体情况，经验丰富的 Scala 开发人员通常不赞成。

当存在通过“扩展”类将方法添加到类型的隐式转换时，它就会被接受。此扩展类不是用作参数、定义或变量的类型的类型，其方法也不返回自身，而是在适用的情况下返回原始类型。

当隐式转换在程序中通常使用的两种类型之间进行转换时，它被认为是一件坏事。事实上，Scala 2.10 会针对这种用法发出警告。

在可用于在 Java 和 Scala 集合之间转换的两个包中可以清楚地看到区别：scala.collection.JavaConversions 和 scala.collection.JavaConverters。后者的存在正是因为前者使用的隐式转换风格被认为是不好的。

Scala 确实允许您进行在特定范围内不可用的隐式转换，但我很少看到它使用过。另一方面，该标志`-Xlog-implicit-conversions`允许您跟踪隐式转换发生的位置。

在 Scala 的默认范围内没有很多隐式类型转换。A`String`可以被视为 a `Seq[Char]`，“原始”数字类型具有类型扩展——也就是说，较小的类型可以被视为较大的类型。可能还有其他我现在不记得了，但是，一般来说，你必须导入一个隐式转换才能使用它。

# c# - 带有 HTML 表格的 OnClick 事件

> ID：11225814
> 
> 赞同：0
> 
> 时间：2012-06-27T12:07:03.237
> 
> 标签：c#, asp.net

当我单击 HTML 表中的特定单元格时，我想打开一个新的 aspx 页面。这可能吗？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:10:12.903

解决方案 1：将此添加到表格单元格 onclick="redirectpage()"

```
function redirectpage()
{
window.location="www.google.com";//page location
} 
```

解决方案 2：最好在表格单元格内使用超链接。它是一个更优雅的解决方案。

解决方案 3：将其添加到您的 javascript

```
window.onload=setclickevent;
function setclickevent()
{
var myTab=document.getElementById('table');//Replace with your table id.
myTab.rows[0/*Row*/].cells[0/*Row's cell*/].onclick=function(){alert('event added');};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:14:10.113

有可能的。

通过标签名称获取元素并为其分配点击事件。一个简单的匿名函数就可以了。

Javascript：

```
var tablecell = document.getElementsByTagName("TD"):

for( index = 0; index < tablecell.length ; index++)
{
  tablecell[i].onclick = function(){
  window.open( 'newpage.aspx');
  };
} 
```

这将通过 dom 向所有 td 元素添加点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:21:23.420

你的表格单元格会有类似的东西

<td> 测试单元 </td> 您可以将其更改为具有超链接

<td onclick='window.location="www.google.com"'> 测试单元</td>

如果您想在新窗口中打开，请使用 window.open('www.google.com')。

希望这对您有所帮助。

快乐编码！！！

# ios - IOS 多点触控序列与 touchesBegan 和 touchesEnded

> ID：11225818
> 
> 赞同：0
> 
> 时间：2012-06-27T12:07:11.783
> 
> 标签：ios, touchesbegan

这是一个音乐应用程序

用户任务是用手指 1、2 和 3 触摸并按住屏幕，触摸之间的时间很短。

如果用户随后按照向下的顺序（1、2、3）抬起手指，那么一切都会按预期进行。所以看起来 multitpletouchenable、userinteractionenable 等标志必须是正确的。

这是一份报告（n 是返回的触摸次数，x 和 y 是位置）（我编辑了输出文件以识别手指 1、2、3

```
 2012-06-27 07:22:36.589 Bowing[757:907]  finger 1 Began n=0,x=190, y=860
    2012-06-27 07:22:37.207 Bowing[757:907]  finger 2 Began n=0,x=346, y=704
    2012-06-27 07:22:37.875 Bowing[757:907]  finger 3 Began n=0,x=580, y=708

    2012-06-27 07:22:38.587 Bowing[757:907]  finger 1 Ended n=0,x=191, y=854
    2012-06-27 07:22:39.252 Bowing[757:907]  finger 2 Ended n=0,x=346, y=722
    2012-06-27 07:22:40.019 Bowing[757:907]  finder 3 Ended n=0,x=585, y=712 
```

生活很好

如果用户以相反的顺序 (3,2,1) 抬起手指，则在手指 1 抬起之前不会发送消息；然后发送所有三个手指的消息

```
 2012-06-27 07:22:36.589 Bowing[757:907] finger 1 Began n=0,x=190, y=860
    2012-06-27 07:22:37.207 Bowing[757:907] finger 2 Began n=0,x=346, y=704
    2012-06-27 07:22:37.875 Bowing[757:907] finger 3 Began n=0,x=580, y=708

    2012-06-27 07:22:38.587 Bowing[757:907] finger 1 Ended n=0,x=191, y=854
    2012-06-27 07:22:39.252 Bowing[757:907] finger 2 Ended n=0,x=346, y=722
    2012-06-27 07:22:40.019 Bowing[757:907] finger 3 Ended n=0,x=585, y=712 
```

生活没有那么美好。为了反映屏幕上发生的情况，消息应该按手指 3、手指 2 和手指 1 的顺序到达

这是响应者；无论发送给 super 的消息是否存在，都一样工作

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
//    [super touchesBegan:touches withEvent:event];
    NSEnumerator *enumerator = [touches objectEnumerator];
    UITouch  *aTouch;
    int counter=0;
    while ((aTouch = [enumerator nextObject])) {
        /* code that acts on the set’s values */
        CGPoint  where=[aTouch locationInView:nil];
        NSLog(@"Began n=%i,x=%3.0f, y=%3.0f",counter,where.x,where.y);
        counter++;
    }

}
// Sent to the receiver when a system event (such as a low-memory warning) cancels a touch   event.
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event{

//    [super touchesCancelled:touches withEvent:event];
    NSEnumerator *enumerator = [touches objectEnumerator];
    UITouch  *aTouch;
    int counter=0;
    while ((aTouch = [enumerator nextObject])) {
        /* code that acts on the set’s values */
        CGPoint  where=[aTouch locationInView:nil];
        NSLog(@"Cancelled n=%i,x=%3.0f, y=%3.0f",counter,where.x,where.y);
        counter++;
    }

} 
```

// 当一根或多根手指从视图或窗口中抬起时通知接收器。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
//    [super touchesEnded:touches withEvent:event];
    NSEnumerator *enumerator = [touches objectEnumerator];
    UITouch  *aTouch;
    int counter=0;
    while ((aTouch = [enumerator nextObject])) {
        /* code that acts on the set’s values */
        CGPoint  where=[aTouch locationInView:nil];
        NSLog(@"Ended n=%i,x=%3.0f, y=%3.0f",counter,where.x,where.y);
        counter++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:21:00.203

问题是：Touchesended 正在等待所有的touches 完成，这就是为什么当它结束时所有三个touches 都被发送。一个解决方案可能是一个 nstimer，它`[touch count];`以 1/32 的时间间隔检测，并检测它是增加还是减少。

# sql - 查询选择数据不变的行

> ID：11225821
> 
> 赞同：4
> 
> 时间：2012-06-27T12:07:25.450
> 
> 标签：sql, ms-access

我有一张从 Betfair 可下载的 CSV 历史数据文件中获取的高尔夫比赛表。它们看起来像这样：

```
event         selection
S. Garcia     Garcia
S. Garcia     Woods
P. Mickelson  Mickelson
P. Mickelson  Donald
E. Els        McIlroy
E. Els        Els 
```

我需要一个提供以下输出的查询：

```
event         selection_a  selection_b
S. Garcia     Garcia       Woods
S. Garcia     Woods        Garcia
P. Mickelson  Mickelson    Donald
P. Mickelson  Donald       Mickelson
E. Els        McIlroy      Els
E. Els        Els          McIlroy 
```

总而言之，赛事名称只是比赛中的一名球员。在每场比赛中会有两名球员，我如何编写一个查询来识别加西亚打伍兹，米克尔森打唐纳德，埃尔斯打麦克罗伊？

帮助！:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:42:16.373

```
SELECT
    g.event,
    Min(g.selection) AS selection_a,
    Max(g.selection) AS selection_b
FROM Golf_matches AS g
GROUP BY g.event
UNION ALL
SELECT
    g.event,
    Max(g.selection),
    Min(g.selection)
FROM Golf_matches AS g
GROUP BY g.event
ORDER BY 1, 2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:09:03.483

相当肯定一些 SQL Ninja 会出现并指出这种方法有多糟糕，但我只是在玩弄它。到目前为止我的方法是（包括我的声明，但在你的情况下只是忽略它并用你的表名替换@Match）

```
DECLARE @Match TABLE (
    eventName NVARCHAR(MAX),
    selection NVARCHAR(MAX)
)

INSERT INTO @Match(eventName, selection)
VALUES ('S. Garcia', 'Garcia'),
       ('S. Garcia', 'Woods'),
       ('P. Mickelson', 'Mickelson'),
       ('P. Mickelson', 'Donald'),
       ('E. Els', 'McIlroy'),
       ('E. Els', 'Els')

SELECT M1.eventName, M1.selection AS SelectionA, M2.selection AS SelectionB 
    FROM @Match M1 
        INNER JOIN @Match M2 
          ON M1.eventName = M2.eventName
WHERE M1.selection <> M2.selection 
```

# c#-4.0 - 如何使用 IWizard 在运行时添加“Using”语句

> ID：11225831
> 
> 赞同：1
> 
> 时间：2012-06-27T12:07:59.950
> 
> 标签：c#-4.0, visual-studio-2012, vsix, visual-studio-extensions

在编译时我们有

```
using MyNamespace; 
```

这一直有效，但最近需求发生了变化，它需要在运行时根据用户选择的应用程序类型进行处理。

那么，如何在 IWizard 中使用 c# 代码添加“Using”命名空间语句？

我知道如何在运行时添加引用

```
 var appProject = project.Object as VSProject;
 appProject.References.Add(Mydll); 
```

我想要的是在运行时

```
using System.IO;
using MyNamespace-> should come at runtime based on the application selected 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:44:57.023

我刚刚遇到了一个类似的问题，虽然它在运行时并没有完全改变命名空间，但它可以让你在运行时从不同的命名空间获取对象等。如果您想更改名称空间，那么您有可能拥有具有相同名称和接口但实现不同的类，否则您的代码将需要更改。如果创建一个仅包含您要使用的所有类的接口的新库和命名空间，您需要做什么。然后，您使不同命名空间中的类继承这些接口，以便您可以对类进行编码以仅使用接口而不是特定实现。然后选择在运行时使用的实现，您使用“依赖注入” 选择正确的实现以通过配置文件插入或让应用程序的其他部分配置注入。依赖注入可能有点难以开始，但一旦你了解它，它会让你的生活变得更轻松。Ninject 是一个很好的简单依赖注入框架。

# regex - 正则表达式@生成

> ID：11225832
> 
> 赞同：0
> 
> 时间：2012-06-27T12:08:05.013
> 
> 标签：regex, expression

我有以下代码：

```
/**
* @generated
*/
public class foo ...

/**
* @generated
*/
public class bar...

public class interesting 
```

我对那些没有@generated 标签的签名感兴趣。因此我试图写一个正则表达式。但我无法让它工作......你能帮帮我吗？

```
([\^*][/]\r\n)p 
```

匹配所有带有@generated 标签的元素，但是我怎样才能得到那些没有@generated 标签的元素呢？！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:39:47.270

您应该从 regex 开始`(?<!@generated\n\*\/\n)(public class .*)`，如果需要添加一些`\s`到否定的 lookbehind `(?<! ... )`。Lookbehind 必须是固定模式，因此您需要在没有`\s*`或其他可变长度模式的情况下完全调整它。

# node.js - 在 Node.js（在 Windows 上运行）如何获取域名

> ID：11225833
> 
> 赞同：1
> 
> 时间：2012-06-27T12:08:07.593
> 
> 标签：node.js, dns

我有一个要求，我的 NodeJS http 服务器（在 Windows 上）必须监听主机名而不是 localhost/127.0.0.1。

为此，我需要我的 Windows 机器的完整主机名（包括域名），但我无法获得完整的主机名。

我尝试使用

```
require('os').hostname() 
```

但它没有给我完整的主机名。

所以我尝试了以下方法：

```
var dns = require('dns');    
var os = require('os');    
var hostname = os.hostname();   
console.log("Short hostname = ", hostname);     

dns.lookup(hostname, function (err, add, fam) {       
    if (err)    
    {    
             console.log("The error = ", JSON.stringify(err));    
             return;    
    }    
    console.log('addr: '+add);     
    console.log('family: ' + fam);    
    dns.reverse(add, function(err, domains){    
    if (err)    
    {    
        console.log("The reverse lookup error = ", JSON.stringify(err));    
        return;    
    }    
    console.log("The full domain name ", domains);    
});    
}) 
```

上面的代码工作正常，当我在企业的以太网上时得到以下输出

```
C:\>node getFullHostname.js    
Short hostname  =  SPANUGANTI    
addr: 16.190.58.214    
family: 4    
The full domain name  [ 'spanuganti.abc.xyz.net' ] 
```

但是当我连接到企业的无线网络时，相同的代码不起作用

```
C:\>node getFullHostname.js    
Short hostname  =  SPANUGANTI    
addr: 16.183.204.47    
family: 4    
The reverse lookup error =    
{"code":"ENOTFOUND","errno":"ENOTFOUND","syscall":"getHostByAddr"} 
```

所以需要以下帮助

1.  有没有一种简单的方法可以在 Node.js 中获取完整的机器名称（Windows）
2.  或者请让我知道我上面的代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:11:05.763

服务器不监听主机名，它们监听 IP 地址。您永远不应依赖外部 DNS 的内容来确定绑定的位置。

最简单的解决方案是将其绑定到`INADDR_ANY`地址，该地址在数字上等同于`0.0.0.0`.

这将允许在*任何*接口上进行查询，包括环回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:10:43.463

您不需要完整的主机名来监听，您实际上需要您的 IP 地址。查看[`os.networkInterfaces()`](http://nodejs.org/api/os.html#os_os_networkinterfaces)功能。

# java - 显示获取表格中的下一个值

> ID：11225836
> 
> 赞同：0
> 
> 时间：2012-06-27T12:08:10.053
> 
> 标签：java, jsp, displaytag

我需要提示来获取我的表 displayTag 中的下一个值。实际上我正在使用显示标签来显示合同信息

`<display:table id="tabCnt" name="listCnt" defaultsort="1" defaultorder = "ascending" pagesize="8" export="true" > <display:column property="numCnt" title="NumCnt" sortable="true" sortName="denomination" decorator="com.dev.taglib.MyDecorator" /> <display:column property="description" title="Description" /> <display:column property="duree" title="Date end cnt" sortable="true" sortName="duree"/> </display:table>`

现在我想为每一行提供一个链接，将我重定向到合同。但我希望在此重定向中获取当前行和下一行的属性 numCnt 并将其放入 URL 中，如下所示？

`http://mysite.com/madirection.do?numCnt="cnt1"&numCnt="cnt2"></a>`

因为我必须让用户点击新页面上的链接才能移动到下一个合同。

我怎么能做到这一点？你能帮我吗 ！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:31:57.347

首先，您不能在 url 中有 2 个具有相同名称的参数

```
numCnt="cnt1"&numCnt="cnt2" 
```

对于您的 url 查询：您可以从服务器端创建它：您必须创建 url 以填充链接的 href 属性。您可以为此修改逻辑以在此处附加下一个 cnt

或在客户端：您可以使用 onlick 功能将值附加到您的网址并提交

# ruby - 在 Ruby 中，如何从套接字读取 UTF-8？

> ID：11225841
> 
> 赞同：5
> 
> 时间：2012-06-27T12:08:25.657
> 
> 标签：ruby, sockets, utf-8

当服务器发送 UTF-8 字节时，如何在字符不变成纯字节的情况下读取它们？（\x40 等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:04:55.500

您可以使用[IO#set_encoding](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-set_encoding)将套接字的外部编码设置为 UTF-8。

```
#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

require 'socket'

server_socket = TCPServer.new('localhost', 0)
Thread.new do
  loop do
    session_socket = server_socket.accept
    session_socket.set_encoding 'ASCII-8BIT'  
    session_socket.puts "  ᚁ ᚂ ᚃ ᚄ ᚅ ᚆ ᚇ ᚈ ᚉ ᚊ ᚋ ᚌ ᚍ"
    session_socket.close
  end
end

client_socket = TCPSocket.new('localhost', server_socket.addr[1])
client_socket.set_encoding 'UTF-8'
p client_socket.gets
# => "|  ᚁ ᚂ ᚃ ᚄ ᚅ ᚆ ᚇ ᚈ ᚉ ᚊ ᚋ ᚌ ᚍ\n" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T06:04:47.797

我相信`read_nonblock`uses [`read`](http://rubydoc.info/stdlib/core/IO#read-instance_method)，这反过来又说：

> 结果字符串始终为 ASCII-8BIT 编码。

这意味着您不需要指定`IO#set_encoding`，但是您可以在读取**整个**字符串后，将其编码（使用`String#force_encoding!`）强制为`UTF-8`.

我强调了“整体”，因为您需要确保在字符串末尾读取整个 Unicode 字符，就好像只读取了其中的一部分一样，您将得到无效的 UTF-8 字符，Ruby 可能会进一步抱怨它线。

# python - logging.info 和 logging.getLogger().info 有什么区别？

> ID：11225846
> 
> 赞同：12
> 
> 时间：2012-06-27T12:08:55.220
> 
> 标签：python, logging

我是python的新手。

如果`logging.info()`足够记录日志，为什么我们必须用`getLogger()`方法实例化记录器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T12:13:21.673

`getLogger()`不带名称调用[会返回根记录器](http://docs.python.org/library/logging.html#logging.getLogger)：

> 返回具有指定名称的记录器，或者，**如果未指定名称，则返回作为层次结构的根记录器的记录器**。

调用模块级`info()`函数[直接记录到根记录器](http://docs.python.org/library/logging.html#logging.info)：

> **在根 logger 上记录**级别为 INFO 的消息。

如果您没有使用专门命名的记录器（例如为了识别日志的发出模块），那么这两个调用是完全等价的。

# android - 如何使 TabHost 全屏（Android 2.3）

> ID：11225847
> 
> 赞同：0
> 
> 时间：2012-06-27T12:08:56.047
> 
> 标签：android, android-tabhost, fullscreen

`TabHost`Android 2.3 可以全屏**吗**？
通常，我使用

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在设置内容视图之前的活动中，但由于某种原因，似乎不适用于`TabHost`.

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:19:48.987

这应该有效。你应该这样做。

```
public class ActivityName extends TabActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // remove title
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
    }
} 
```

确保。你已经给出了`requestWindowFeature`方法并`flag`在调用之前设置了`setContentView`希望这会对你有所帮助。它对我来说很好。

或者你可以这样做`Manifest.xml`

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

# c# - 让 VS 在编辑器中跳转到第 x 行

> ID：11225848
> 
> 赞同：0
> 
> 时间：2012-06-27T12:08:57.580
> 
> 标签：c#, visual-studio-sdk, checkin-policy

我正在为 VS 编写一个策略插件，它检查代码的几个问题。如果出现问题，它将显示在策略警告选项卡中。现在，当我在策略警告选项卡中双击它时，我想跳到编辑器中出现问题的那一行。我怎样才能做到这一点？

```
namespace PolicyPlugin
{
    [Serializable]
    public class MyPolicyPlugin : PolicyBase
    {
        //...

        //called if the user clicks on a policy warning
        public override void Activate(PolicyFailure failure)
        {
            // make jump to line x
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:25:58.383

您可以先尝试获取[DTE 自动化对象](http://msdn.microsoft.com/en-us/library/envdte.dte.aspx)：

```
EnvDTE.DTE dte = (EnvDTE.DTE)Package.GetGlobalService(typeof(EnvDTE.DTE)); 
```

或使用[其他方法](http://msdn.microsoft.com/en-us/library/68shb4dw.aspx)来获取它。

然后执行标准命令（在 Visual Studio 中按 CTRL+G 时会发生这种情况）

```
DTE.ExecuteCommand("Edit.Goto", "1234") 
```

注意：我不确定确切的[ExecuteCommand](http://msdn.microsoft.com/en-us/library/envdte._dte.executecommand.aspx)方法签名。[您也可以对其他命令](http://skysigal.xact-solutions.com/Blog/tabid/427/entryid/1550/Visual-Studio-Macros-Where-to-find-the-full-list-of-commands-available-for-DTE-ExecuteCommand.aspx)以相同的方式操作 IDE 。

# python - 无法在 subproces.call 中运行 ffmpeg

> ID：11225849
> 
> 赞同：1
> 
> 时间：2012-06-27T12:08:59.027
> 
> 标签：python, ffmpeg, subprocess

所以，我有一个简单的类，我试图将来自终端 ffmpeg 命令的字符串响应保存到对象属性中：

```
import os
import subprocess

class Movie(object):

    absolute_path = None
    movie_info = None

    def __init__(self, path):
        self.absolute_path = "%s/%s" % (os.getcwd(), path)
        if(os.path.exists(self.absolute_path) is False):
            raise IOError("File does not exist")

    def get_movie_info(self):
        ffmpeg_command = "ffmpeg -i %s" % self.absolute_path
        self.movie_info = subprocess.call(ffmpeg_command)
        print self.movie_info 
```

然后当我在 cmd 中运行此命令时：

```
import os
import sys
sys.path.append(os.getcwd())

from Encode.Movie import Movie

try:
    movie = Movie("tests/test_1.mpg")
    movie.get_movie_info()
except IOError as e:
    print e 
```

我得到这个例外：

```
richard@richard-desktop:~/projects/hello-python$ python main.py 
Traceback (most recent call last):
  File "main.py", line 9, in <module>
    movie.get_movie_info()
  File "/home/richard/projects/hello-python/Encode/Movie.py", line 16, in get_movie_info
    self.movie_info = subprocess.call(ffmpeg_command)
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

路径是正确的，因为当我在 subprocess.call() 之前打印 self.absolute_path 时，我得到：

```
/home/richard/projects/hello-python/tests/test_1.mpg 
```

并且这个文件存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:20:54.550

问题是

```
ffmpeg_command = "ffmpeg -i %s" % self.absolute_path
self.movie_info = subprocess.call(ffmpeg_command) 
```

*   你给一个字符串作为命令行，但你省略了参数`shell=True`。

但是，推荐的方法是

```
ffmpeg_command = ["ffmpeg", "-i", self.absolute_path]
self.movie_info = subprocess.call(ffmpeg_command) 
```

为了分别给出命令和参数。这样，您在引用等方面没有问题，并且您省略了不必要的 shell 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:31:26.677

顺便说一句，如果要将命令的输出存储在变量中，则应使用`check_output`而不是`call`

[http://docs.python.org/library/subprocess.html#subprocess.check_output](http://docs.python.org/library/subprocess.html#subprocess.check_output)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:23:29.760

我实际上使用了这种从 ffmpeg 获取输出的方式，因为它是一个错误输出：

```
 ffmpeg_command = ["avconv", "-i", self.absolute_path]
    p = Popen(ffmpeg_command, stdout=PIPE, stderr=PIPE)
    stdout, stderr = p.communicate() 
```

# android - android：使用 textAppearance 属性设置 textColor

> ID：11225851
> 
> 赞同：7
> 
> 时间：2012-06-27T12:09:16.863
> 
> 标签：android, text

我在我的应用程序中创建了几种字体样式。

如何将这些样式添加到视图中？- 1) 使用样式属性 2) 使用 textAppearance。

使用样式不是一个选项，因为视图可能具有其他属性（边距、填充、最小宽度等 - 我不能为视图指定 2 种样式），所以我需要单独指定与文本相关的属性，但`android:textColor`在这里不起作用：

样式.xml：

```
<style name="TextAppearance.baseText" parent="@android:style/TextAppearance">
    <item name="android:textAppearance">?android:textAppearanceSmall</item>
    <item name="android:typeface">sans</item>
    <item name="android:textColor">@android:color/white</item>
    <item name="android:textSize">15sp</item> 
</style> 
```

布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="65dp"
      android:orientation="horizontal" >

      <Button
           android:id="@+id/backButton"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="@string/sometext"
           android:textAppearance="@style/TextAppearance.baseText"/>
</RelativeLayout> 
```

为什么它不起作用？如何在 textappearance 中指定 textcolor？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-14T00:46:35.307

`textColor`正如 Oderik 在评论中提到的，Button 视图的属性有一个默认值。此值覆盖通过属性`textColor`设置的任何值。`textAppearance`因此，您有两种选择：

*   将样式中的 textColor 设置为 @null：

    ```
    <style name="Application.Button">   
      <item name="android:textAppearance">@style/Application.Text.Medium.White</item>
      <item name="android:textColor">@null</item> 
    </style>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/Application.Button" /> 
    ```

*   在 Button XML 中将 textColor 设置为 @null：

    ```
    <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    style="@style/Application.Button"   
    android:textColor="@null" /> 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T12:49:25.950

有用。您的文本颜色为白色 - 与默认颜色相同。放在那里任何其他颜色`<item name="android:textColor">#AA6699</item>`，你会看到不同。第二件事是您正在尝试在文本外观中设置文本外观 - 这很有意义。如果您想设置小写字母，请使用 parent`parent="@android:style/TextAppearance.Small`并删除行`<item name="android:textAppearance">?android:textAppearanceSmall</item>` 第三件事是您想要小写字母并放置额外的 textSize - 没有意义。试试这个，对我有用：

```
<style name="BaseText" parent="@android:style/TextAppearance.Small">
        <item name="android:typeface">sans</item>
        <item name="android:textColor">#AA7755</item>
  </style> 
```

如果您想设置所有样式：

```
<style name="BaseText" parent="@android:style/TextAppearance.Large">
        <item name="android:typeface">sans</item>
        <item name="android:textColor">#AA7755</item>
    </style>

   <style name="BaseText.Margins">
       <item name="android:layout_margin">10dip</item>
   </style> 
```

BaseText.Margins 从 BaseText 继承。然后你可以使用：

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        style="@style/BaseText.Margins" /> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-18T14:17:05.300

如果你想使用`android:TextAppearance`而不是`style:`设置你的`android:textColor`，你需要设置`android:textColor=@null`你的`TextView`。

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:textAppearance="@style/TextAppearance.AppCompat.Medium.MySubheader"
    android:textColor="@null"
    tools:text="Section" /> 
```

然后它将正确地从您的`android:TextAppearance`

```
<style name="TextAppearance.AppCompat.Medium.MySubheader">
    <item name="android:fontFamily">sans-serif-medium</item>
    <item name="android:textSize">16sp</item>
    <item name="android:textColor">@color/black_54</item>
</style> 
```

# php - 从一个自定义字符串替换为另一个自定义字符串

> ID：11225852
> 
> 赞同：0
> 
> 时间：2012-06-27T12:09:19.973
> 
> 标签：php, regex

如何替换以“a”开头并以“z”结尾的字符串？

基本上我希望能够做与 str_replace 相同的事情，但对“干草堆”中两个字符串之间的值无动于衷。

是否有内置功能？如果没有，我将如何有效地制作完成它的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:15:57.433

这可以通过正则表达式（简称RegEx）来完成。这是一个简单的例子：

```
$string = 'coolAfrackZInLife';
$replacement = 'Stuff';
$result = preg_replace('/A.*Z/', $replacement, $string);
echo $result; 
```

上面的例子将返回`coolStuffInLife`

**给定正则表达式的一点解释** `/A.*Z/`：
     - 斜线表示正则表达式的开始和结束；
     - A 和 Z 是您需要替换的开始和结束字符；
     -`.`匹配任何单个字符
     -`*`零个或多个给定字符（在我们的例子中 - 所有字符）
     - 您可以选择使用`+` 而不是`*`仅当两者之间存在某些内容时才匹配

查看[Rubular.com](http://rubular.com/)，了解测试 RegEx 的简单方法。它还提供简短的 RegEx 参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:15:06.633

```
$string = "I really want to replace aFGHJKz with booo";
$new_string = preg_replace('/a[a-zA-z]+z/', 'boo', $string);
echo $new_string; 
```

小心正则表达式，你想找到第一个 z 还是最后一个 z？是否只有字母可以介于两者之间？字母数字？在我扩展正则表达式之前，您需要解释各种场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:11:50.630

使用[preg_replace](http://php.net/preg_replace)以便您可以使用正则表达式模式。

# mysql - Mysql Auto Increment 增加 2 和 1？

> ID：11225858
> 
> 赞同：0
> 
> 时间：2012-06-27T12:09:58.100
> 
> 标签：mysql, insert, auto-increment, partitioning

如果我使用以下语法创建一个表，

```
CREATE TABLE IF NOT EXISTS `hashes` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`hash` binary(20) NOT NULL,
PRIMARY KEY (`id`,`hash`),
UNIQUE KEY (`hash`)
) ENGINE=InnoDB ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE = 4 AUTO_INCREMENT=1
PARTITION BY KEY(`hash`)
PARTITIONS 10; 
```

并使用以下语法插入查询

```
INSERT INTO hashes (hash) VALUES ($value) ON DUPLICATE KEY UPDATE hash = hash 
```

然后，如果插入或更新行，自动增量列将按预期工作。

尽管创建没有如下分区的表并使用高于自动增量值的查询插入将在每次更新或插入时增加 1，导致`A_I`列到处都是，因为查询可以执行 10 次更新，然后 1 次插入导致列价值跃升10位。

```
CREATE TABLE IF NOT EXISTS `hashes` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`hash` binary(20) NOT NULL,
PRIMARY KEY (`id`,`hash`),
UNIQUE KEY (`hash`)
) ENGINE=InnoDB AUTO_INCREMENT=1; 
```

我理解为什么在更新时价值会增加，`INNO_DB`但我不明白为什么当表被分区时它不会增加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:22:48.147

你无法改变它，但你可以尝试这样的事情：

```
mysql> set @a:= (select max(id) + 2 from hashes); 

mysql> insert into hashes (id) values ($value) on duplicate key update id=@a; 
```

注意：mysql 5.6 之后分区有一点变化，你有哪个版本？

# ios - 是否可以在 iOS 中自定义文本字段？

> ID：11225859
> 
> 赞同：0
> 
> 时间：2012-06-27T12:10:00.610
> 
> 标签：ios, text, field

我需要在我的应用程序中使用文本字段，但 XCode 提供的文本字段只有 1 行长，您只能更改宽度但不能更改高度。我想知道是否有可能让它看起来更长的线条？是否只有通过定制才能实现，如果是的话，有什么好的教程吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:17:58.363

首先，您实际上可以更改 a 的高度`UITextField`。只需将 Attributes Inspector 中的边框样式更改为默认的“圆角”以外的任何样式。然后，您可以在 Interface Builder 中调整它的大小。如果你真的想要，你甚至可以`viewDidLoad`像这样在你的方法中改变它：

```
self.myTextField.borderStyle = UITextBorderStyleRoundedRect; 
```

但是，要拥有多行，您必须使用`UITextView`. 默认情况下它是多行的，但有关更多信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:11:37.120

您可以使用`UITextView`. 关于它的文件在[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)。如果您需要其他东西，请发布您想要实现的图像。

# objective-c - ParseKit的PKTokenizer类如何分离各类符号

> ID：11225866
> 
> 赞同：1
> 
> 时间：2012-06-27T12:10:31.873
> 
> 标签：objective-c, ios, xcode, cocoa, parsekit

我正在尝试使用 ParseKit 解析 PGN 文件。我想识别令牌的类型并采取后续答案

```
PKTokenizer *t = [PKTokenizer tokenizerWithString:moveString];
[t.symbolState add:@"..."];
[t setTokenizerState:t.commentState from:'{' to:'{'];
[t.commentState addMultiLineStartMarker:@"{" endMarker:@"}"];
[t setTokenizerState:t.wordState from:'$' to:'$'];    
t.commentState.reportsCommentTokens = YES;
PKToken *eof = [PKToken EOFToken];
PKToken *tok = nil;

while ((tok = [t nextToken]) != eof) {
    NSLog(@" %@", [tok debugDescription]);
} 
```

`(`我只想在收到符号时才将单词类型添加到数组中。

任何有关使用 ParseKit 的文档都会有很大帮助 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:10:27.420

[ParseKit](http://parsekit.com)的开发者在这里。

这是在括号内捕获标记的简单方法：

```
BOOL inParens = NO;
PKToken *openParen = [PKToken tokenWithTokenType:PKTokenTypeSymbol stringValue:@"(" floatValue:0.0];
PKToken *closeParen = [PKToken tokenWithTokenType:PKTokenTypeSymbol stringValue:@")" floatValue:0.0];
NSMutableArray *cache = [NSMutableArray array];

PKTokenizer *t = [PKTokenizer tokenizerWithString:@"foo (bar) baz"];

PKToken *eof = [PKToken EOFToken];
PKToken *tok = nil;
while ((tok = [t nextToken]) != eof) {
    if ([openParen isEqual:tok]) {
        inParens = YES;
    } else if (inParens) {
        if ([closeParen isEqual:tok]) {
            inParens = NO;
        } else {
            [cache addObject:tok];
        }
    }
}

NSLog(@"%@", cache); 
```

印刷：

```
(
    bar
) 
```

# android - 如何在 MAC 中从 android 手机中提取数据库？

> ID：11225871
> 
> 赞同：0
> 
> 时间：2012-06-27T12:10:45.260
> 
> 标签：android, database, macos

我正在开发一个安卓应用程序。我已经在移动设备中测试了该应用程序，现在我需要查看我的应用程序的数据库（即移动数据库）。我正在使用 Mac 并且对如何从手机中提取数据库并在 SQLite 浏览器中查看它感到困惑。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:21:30.310

您将无法在真实设备上使用（除非它已植根）。数据目录受到保护，不被拥有应用程序以外的任何人访问。

要将其从设备中取出，您需要在应用程序中设置一种方法，将数据库复制到可访问的位置（如 SD 卡）。以下是我以前用来执行此操作的代码：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "yourDB.bak");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        File data = Environment.getDataDirectory();
        File inputFile = new File(data,
                "data/your.package.name/databases/yourDB");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

# r - 子集 data.table 更改因子级别之间的子集限制

> ID：11225873
> 
> 赞同：3
> 
> 时间：2012-06-27T12:10:55.633
> 
> 标签：r, subset, data.table

我很难尝试`data.table`在 R 中对（包）进行子集化。给出以下示例

```
library(data.table)

x = c(rep("a", 6), rep("b", 5))
y = c(0,2,1,0,1,2, 0,1,0,2,1)
z = c(1:6,1:5) + rnorm(11, 0.02, 0.1)

DT = data.table(ind = x, cond = y, dist = z)

      ind cond     dist
 [1,]   a    0 1.078966
 [2,]   a    2 1.987159
 [3,]   a    1 3.143391
 [4,]   a    0 3.937058
 [5,]   a    1 5.037681
 [6,]   a    2 6.036432
 [7,]   b    0 1.057809
 [8,]   b    1 2.144755
 [9,]   b    0 3.010903
[10,]   b    2 3.937765
[11,]   b    1 4.976273 
```

我想对列中第一个之后的所有内容进行子集`1`化`cond`。换句话说，所有大于`3.143391`for`a`和`2.144755`for 的东西`b`（在这个例子中）。

```
DT.sub <- DT[cond == "1",] # Please, combine this row
DT.sub[,.SD[dist==min(dist)],by=ind] # With this to make the code shorter, if you can.

  ind cond     dist
[1,]   a    1 3.143391
[2,]   b    1 2.144755 
```

结果应如下所示：

```
 ind cond     dist
 [1,]   a    0 3.937058
 [2,]   a    1 5.037681
 [3,]   a    2 6.036432
 [4,]   b    0 3.010903
 [5,]   b    2 3.937765
 [6,]   b    1 4.976273 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:55:14.320

怎么样 ：

```
DT[,.SD[seq(match(1,cond)+1,.N)],by=ind]
     ind cond     dist 
[1,]   a    0 3.937058 
[2,]   a    1 5.037681 
[3,]   a    2 6.036432 
[4,]   b    0 3.010903 
[5,]   b    2 3.937765 
[6,]   b    1 4.976273 
```

顺便说一句，最好`set.seed(1)`先这样我们可以使用相同的随机数据。

# java - 如何获得具体日期？

> ID：11225875
> 
> 赞同：0
> 
> 时间：2012-06-27T12:11:00.010
> 
> 标签：java, javascript, jquery

我必须在我的 jsp 上显示日期，该日期将是一周中即将到来的星期三日期。例如，如果今天是“2012 年 6 月 3 日星期五”并且客户今天登录，那么我必须向他展示您的订单将在星期三“约会”。该“日期”将是即将到来的星期三的实时日期，即 2012 年 6 月 8 日星期三。我如何使用 Jquery 获得我的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:19:22.590

有了这个，你可以得到今天的工作日：

```
var d = new Date();
var n = d.getDay(); 
```

3 表示星期三，因此创建一个循环：

```
var d = new Date();
while (d.getDay() != 3) {
    d = new Date(d.getFullYear(), d.getMonth(), d.getDate()+1);
} 
```

**更新**

工作解决方案：http: [//jsfiddle.net/mavrick3/3UEAZ/1/](http://jsfiddle.net/mavrick3/3UEAZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:32:06.980

您可以使用以下内容：

```
var DateCalc = (function () {
    var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        getNextWed = function () {
            var d = new Date();
            while (d.getDay() != 3) {
                d.setDate(d.getDate() + 1);
            }
            return d;
        },
        formatDate = function (d) {
            var str = [];

            str.push(days[d.getDay(days)]);
            str.push(d.getDate());    
            str.push(months[d.getMonth()]);
            str.push(d.getFullYear());

            return str.join(' ');
        };           
    return {
        getNextWedStr: function () {
            return formatDate(getNextWed());
        }
    };
})();

console.log(DateCalc.getNextWedStr()); // "Wednesday 27 June 2012 " 
```

这是一个[工作示例](http://jsfiddle.net/9hqLE/)。

如果是星期三，这将匹配当前日期。如果它总是必须是**下一个**星期三，那么就这样做：

```
...
var d = new Date();
d.setDate(d.getDate() + 1); // <-- this
while (d.getDay() != 3) {
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:41:42.400

在 JSP 页面中使用**Java**，您可以通过以下方式进行操作。

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
import java.util.Calendar;
import java.util.GregorianCalendar;

/**
*
* @author fahim
*/
public class DateExample {

    public static void main(String[] args) {
        Calendar cal = new GregorianCalendar();

        System.out.println("" + cal.getTime());
        int i = cal.get(7);
        if (i == 1) { // sunday
            cal.add(Calendar.DAY_OF_WEEK, 3);
        } else if (i == 2) { // monday
            cal.add(Calendar.DAY_OF_WEEK, 2);
        } else if (i == 3) { // tuesdat
            cal.add(Calendar.DAY_OF_WEEK, 1);
        } else if (i == 4) { // wednesday
            cal.add(Calendar.DAY_OF_WEEK, 7);
        } else if (i == 5) { // hursday
            cal.add(Calendar.DAY_OF_WEEK, 6);
        } else if (i == 6) { // friday
            cal.add(Calendar.DAY_OF_WEEK, 5);
        } else if (i == 7) { // saturday
            cal.add(Calendar.DAY_OF_WEEK, 4);
        }        

        System.out.println("" + cal.getTime());
    }
} 
```

我得到的输出

```
Wed Jun 27 15:39:44 AST 2012
Wed Jul 04 15:39:44 AST 2012 
```

## [www.ideone.com 上的演示](http://ideone.com/XZWfQ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:15:41.783

您必须在当前日期进行计算

```
var currentTime = new Date() 
```

只需找出添加当前日期的日期并根据您的需要进行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:20:19.117

```
 <h4>It is now  
   <script type="text/javascript">
    <!--
     var currentTime = new Date()
      var hours = currentTime.getHours()
         var minutes = currentTime.getMinutes()
           if (minutes < 10){
           minutes = "0" + minutes
                  }
             document.write(hours + ":" + minutes + " ")
           f(hours > 11){
               document.write("PM")
                 } else {
           document.write("AM")
            }
               //-->
            </script>
               </h4> 
```

马奇参考这个

# drupal - 如何对复选框列表的值求和并显示总金额？

> ID：11225882
> 
> 赞同：1
> 
> 时间：2012-06-27T12:11:12.893
> 
> 标签：drupal, checkboxlist

我创建了一个带有新页面的 Drupal 网站，用于注册。我想要一个我提供的服务（例如备份用户文件）的复选框列表，每个服务旁边都有相应的价格。

检查多个复选框时，值（在这种情况下，价格）需要总结到总金额。然后这个金额应该显示在页面上。

如何汇总与复选框相关的金额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:59:47.220

查看[Computed Field](http://drupal.org/project/computed_field)模块。

> Computed Field 是一个非常强大的 CCK 字段模块，可让您将自定义“计算字段”添加到您的内容类型。这些计算字段由您通过 PHP 代码定义的值填充。您可以利用 Drupal 可用的任何内容，包括其他字段、当前用户、数据库表，等等。（感觉到力量了吗？:)）您还可以选择是否将计算字段值与其他内容字段一起存储在数据库中，或者在节点视图期间动态“计算”它们。（尽管您应该注意视图的使用需要数据库存储的值。）这个字段实际上是 CCK 字段的瑞士军刀。所以开始制作你的基于 PHP 的值吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T06:12:22.643

您有复选框值属性来将价格金额附加到复选框？在提交/处理时使用 js/php 逻辑来添加选中的复选框。

更新：选项数组应该是[这样的](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/6#options)

```
array('return_value1' => t('Display Value 1'), 'return_value2' => t('Display Value 2')) 
```

# jquery-mobile - ListView 中的复选框与 Jquery mobile

> ID：11225883
> 
> 赞同：3
> 
> 时间：2012-06-27T12:11:17.340
> 
> 标签：jquery-mobile

我开始学习 HTML5 和 CSS（使用 Jquery Mobile），因为我在这方面没有太多背景，所以我被困在一些非常简单的事情上。我想在列表视图中放置一个复选框（在每个 li 处）。我该怎么做才能看起来像这样： [http](http://a4.mzstatic.com/us/r1000/095/Purple/ff/1d/33/mzl.ecpvufek.320x480-75.jpg) ://a4.mzstatic.com/us/r1000/095/Purple/ff/1d/33/mzl.ecpvufek.320x480-75.jpg （我的意思是复选框位于其他文本和所有文本的左侧）。

目前，我的代码是：http: [//jsfiddle.net/AzN7S/](http://jsfiddle.net/AzN7S/) 正如您所见，复选框位于文本上方，即使在第二个 li 中有一个带有 float:left 的 div，它也不起作用:(

你能帮我吗 ？非常感谢您的回答，对不起我的英语^^

祝你有美好的一天。

奥利维尔。

**编辑 ：**

我终于成功在右侧部分的左侧添加了一个复选框。我更新了我的示例： http: [//jsfiddle.net/AzN7S/2/](http://jsfiddle.net/AzN7S/2/) 我不知道这是否是正确的方法，但它有效:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T11:25:52.433

我重新考虑了我的旧答案并重新做了这个问题，特别是为了适应 mvc 4 框架，但客户端都是一样的。
所以让我们开始吧：
如果你只想要 html，你可以在这里得到它
这个链接是一个 3 部分的复选框列表、复选框、项目的链接和信息弹出窗口：

[这是带有复选框和图标的工作列表视图的 jsfiddle 的链接](http://jsfiddle.net/yakirmanor/PBQ3P/)

iv 在最后添加了一些 2 部分列表框和一个部分，如有任何问题，请告诉我。

现在对于控制器，您需要做的就是

```
[Authorize]
public ActionResult Items(string act, 
    string tab, string search_by, string search, string sort, string sortdir, int? page, int? resultsPerPage,
    List<int> selected, int? projectId, string username)
{
    if (act == "AddItemsToUser")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Added:";
            foreach (var item in selected)
            {
                try
                {
                    if (username != null)
                        if (UserItemRecordModel.InsertUserItem(username, item, null, null, 0, null, null))
                            response += item + " - inserted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "AddItemsToProject")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Added:";
            foreach (var item in selected)
            {
                try
                {
                    if (projectId != null)
                        if (ProjectItemRecordModel.InsertProjectItem(projectId.ToString(), item, null, null, 0, null, null))
                            response += item + " - inserted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "RemoveItemsFromUser")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Removed:";
            foreach (var item in selected)
            {
                try
                {
                    if (UserItemRecordModel.DeleteUserItem(username, item))
                        response += item + " - deleted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "RemoveItemsFromProject")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Removed:";
            foreach (var item in selected)
            {
                if (ProjectItemRecordModel.DeleteProjectItem(projectId.ToString(), item))
                    response += item + " - deleted, ";
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }

    List<ItemRecordModel> items = ItemRecordModel.GetSensors(search_by, search, sort, sortdir);
    return View("Items", new AdminRecordsViewModel() { Records = items });
} 
```

这是我的旧答案：
我解决了您的问题，您需要更改一些内容，但是您可以使用复选框完成可搜索的列表视图，如下所示：

jsfiddle 示例：

* * *

基本： [基本 jsfiddle 版本](http://jsfiddle.net/yakirmanor/SSgxM/)

更好的版本： [更好的版本](http://jsfiddle.net/d8KNF/3/)

[带有复选框和图标或图像的jQuery移动列表视图](http://jsfiddle.net/yakirmanor/d8KNF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T19:00:32.237

```
here is a listView of checkBox and a search bar. you should add this js code 

 $("li").on("tap",function(){
                     $(this).find('label').click();
   });    in the button somewhere in your page.

the js code crete a click on the check box when the user clicks on the li

 <div class="ui-content" data-role="main">  
    <div data-role="main" class="ui-content">
         <h2 class="settings-h2">Select category</h2>
         <h5 lass="settings-h2">You will get articles on those subject,you can change your selection at any time.</h5>
        <form class="ui-filterable">
            <input id="myFilter-settings" data-type="search">
        </form>
         <ul data-role="listview" id="ScheduleList-settings" data-filter="true" data-input="#myFilter-settings"  data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">

             <li  data-icon="false">
                 <form>
                <fieldset class="myhover" data-role="controlgroup" data-iconpos="right" >
                    <input type="checkbox" name="checkbox-h-6a" id="checkbox-Sports" >
                    <label  for="checkbox-Sports">Sports</label>
                </fieldset>
                </form>

            </li>

             <li data-icon="false" >

                 <form>
                <fieldset data-role="controlgroup" data-iconpos="right" >
                    <input type="checkbox" name="checkbox-h-6a" id="ccheckbox-Food" >
                    <label  for="ccheckbox-Food">Food</label>
                </fieldset>
                </form>

            </li>

             <li data-icon="false" >

                 <form>
                <fieldset data-role="controlgroup" data-iconpos="right" >
                    <input type="checkbox" name="checkbox-h-6a" id="checkbox-Politics" >
                    <label  for="checkbox-Politics">Politics </label>
                </fieldset>
                </form>

             </li>

             <li data-icon="false"  >

                 <form>
                <fieldset data-role="controlgroup" data-iconpos="right" >
                    <input type="checkbox" name="checkbox-h-6a" id="checkbox-Fashion" >
                    <label  for="checkbox-Fashion">Fashion</label>
                </fieldset>
                </form>

             </li>

            </ul>
     </div>

</div> 
```

# c++ - std::vector 的内容消失

> ID：11225886
> 
> 赞同：0
> 
> 时间：2012-06-27T12:11:22.270
> 
> 标签：c++, multithreading, stdvector, stringstream, stdstring

我有一个字符串向量，它们无缘无故地改变了它的内容。无法真正解释发生了什么。很抱歉列出了很长的清单，但这真的让我很烦。

我有一个 GUI 应用程序，它加载一些文件并使用可以通过使用`parse(int argc, char* argv[])`方法设置状态的读取器对象。通过选中各种框并输入值，可以在对话框中设置参数。这是我用来保存对话框数据的结构：

```
struct PointFilter
{
    PointFilter(): argc(0) {};
    ~PointFilter() {};
    int argc;
    std::vector<std::string> args;
}; 
```

该结构是对话框类的成员，在按下确定按钮后，它会填充适当的值。这些值从对话框上的文本框中获取到字符串流中，然后推回 std::vector：

```
class AdvancedLoadDialog
{
public:
    AdvancedLoadDialog(const Glib::RefPtr<Gtk::Builder>&);
    ~AdvancedLoadDialog();

    PointFilter get_point_filter()
    {
        return this->point_filter;
    }

private:
    PointFilter point_filter;
    void on_ok_btn_clicked();

void AdvancedLoadDialog::on_ok_btn_clicked()
{
    std::stringstream filter_stream;
        // filter_stream << some_values_from_textboxes ...

    std::vector<std::string> args;
    std::string arg;

    // we need a dummy first argument to emulate the command line
    args.push_back("filter");

    while (filter_stream >> arg)
    {
        args.push_back(arg);
    }       

    point_filter.argc = args.size() > 1 ? args.size() : 0;
    point_filter.args = args;

    advanced_load_dialog->hide_all();
} 
```

到目前为止一切正常，我们有一个`AdvancedLoadDialog`带有`point_filter`成员的对象来保存我们的论点。现在在一个单独的窗口中，我获取 point_filter 对象并将其传递给`LoadWorker`类的构造函数，该构造函数加载文件并且还有一个`PointFilter`成员。

```
load_worker = new LoadWorker(..., advanced_load_dialog->get_point_filter()) 
```

进而：

```
LoadWorker::LoadWorker(..., PointFilter pf) :
    point_filter    (pf) 
```

一切都很好。现在在`LoadWorker::run()`函数中，我从 point_filter 获取参数，将它们转换为 std::vector 并将它们传递给我需要的 `parse(int argc, char* argv[]) 函数。

```
void LoadWorker::run()
{
    std::cout << "LoadWorker::file_filter contents: \n"
            << "point_filter.argc: " << point_filter.argc << "\n"
            << "point_filter.args: " << std::endl;
    for (int i = 0; i < point_filter.argc; ++i)
        std::cout << point_filter.args[i] << std::endl;

        // ...

    if (point_filter.argc != 0)
    {
        std::cout << "Using filter: " << std::endl;

        std::vector<char*> argv;

        for (std::vector<std::string>::const_iterator it = point_filter.args.begin();
                it != point_filter.args.end(); ++it)
        {
            argv.push_back(const_cast<char*>(it->c_str()));
        }
        argv.push_back(0);

        for (int i = 0; i < point_filter.argc; ++i)
        {
            std::cout << argv[i] << std::endl;
        }

        if (!lasreadopener.parse(point_filter.argc, &argv[0]))
        {
            send_message("Error parsing filter parameters.");
            sig_fail();
            return;
        }
    }
} 
```

现在这个工作......一次。您会注意到参数被打印了两次，首先是作为`LoadWorker::point_filter.args`vector 的元素，然后是作为`vector<char*> argv`. 如果我设置过滤器，然后按下加载按钮，一切正常。如果我然后尝试加载另一个文件，`AdvancedLoadDialog::point_filter`根本不改变，参数就会消失。这是一个尝试连续加载两个文件的示例输出。

> LoadWorker::file_filter 内容: point_filter.argc: 6 point_filter.args: filter -clip_z_above 12 -keep_intensity 11 222 使用过滤器: filter -clip_z_above 12 -keep_intensity 11 222 LoadWorker::file_filter 内容: point_filter.argc: 6 point_filter.args: filter clip_z_above 2 keep_intensity 1 22 使用过滤器：过滤器
> 
> // 这里有 6 个空行

更奇怪的是，在第二次运行期间，除了第一个字符串之外的每个字符串都`point_filter.args`缺少第一个字符，并且`argv`它们都是空的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:15:04.730

`std::string::c_str`在做涉及到你在这里做的事情时要非常非常谨慎：

```
argv.push_back(const_cast<char*>(it->c_str())); 
```

如果要保留 提供的值`c_str`，应先将它们复制到新容器中。

如果要信任[cplusplus.com](http://www.cplusplus.com/reference/string/string/c_str/)（并非总是如此），

> 此数组中的值不应在程序中修改，仅保证在下一次调用字符串对象的非常量成员函数之前保持不变

虽然我不能立即从其他来源获得任何更有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:36:45.990

在 AdvancedLoadDialog 中，尝试推送分配的 arg 版本而不是自动版本。您似乎正在推送对在离开 AdvancedDialogLoad 时将被破坏的变量的引用。

# cakephp - 如何让 Mailchimp 的 Springest CakePHP 数据源工作？

> ID：11225906
> 
> 赞同：0
> 
> 时间：2012-06-27T12:12:49.807
> 
> 标签：cakephp, mailchimp

我正在尝试[从 Springest 获取 Mailchimp 数据源，](http://devblog.springest.com/mailchimp-datasource-cakephp)但我遇到了问题。我不得不修改一些代码以消除 CakePHP 错误。现在它没有错误地发生，但没有向 Mailchimp 发出实际的 API 请求。

模型、数据源和控制器功能代码与从 Springest 下载的完全相同。

我的 database.php 文件中的代码是：

```
public $mailchimp = array(
    'datasource' => 'MailchimpSubscriber',
    'apiKey' => '<my mailchimp API key>',
    'defaultListId' => '<my list identifier>',
    'baseUrl' => 'http://us1.api.mailchimp.com/1.2/'
); 
```

我在 Macbook Pro 上的 XAMPP 上运行 CakePHP 2.1.0。

有人有任何线索吗？

==更新==

我在这里上传了一个剥离的控制器：[https ://gist.github.com/3011716](https://gist.github.com/3011716)

这是我的观点的代码：

```
<h2>Subscribe to Mailchimp</h2>
<?php
    echo $this->Form->create('People', array('action' => 'subscribe'));

    echo $this->Form->input('id');
    echo $this->Form->input('emailaddress');
    echo $this->Form->input('FNAME');
    echo $this->Form->input('LNAME');
    echo $this->Form->input('GENDER');

    echo $this->Form->end('Submit');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:17:09.247

感谢您试用我们的 Mailchimp 数据源。其中一个问题可能是它是为 CakePHP 1.2+ 编写的，并且自 2.0 版本以来，CakePHP 中发生了很多变化。

请注意，我们仍在使用 Cake 1.3 和数据源，并且没有遇到任何错误。

您是否查看了[从 CakePHP 1.3 到 2.0 的迁移指南](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)？在底部有一些提到对 DataSources 所做的更改，因此错误可能与此有关。

我们将尝试在 Cake 2.0 中试一试，看看出了什么问题，但与此同时，这可能会有所帮助。

**==更新==**

是的，不兼容的是 CakePHP 2.0。我已移植数据源以支持 CakePHP 2.0，请检查[更新的存储库](https://github.com/Springest/CakePHP-Mailchimp-datasource)。

**== 第二次更新==**

您在视图中犯了一个错误：因为您已经创建了表单，表单`$this->Form->create('People', array('action' => 'subscribe'));`的数据将在`$this->data`带有 key 的数组中，`People`而它应该有 key `MailchimpSubscriber`。`$this->data`因为MailchimpSubscriber 模型中没有具有该名称的键将忽略保存操作。您需要更改提交表单，以使提交的数据具有正确的模型名称作为键。

另一个注意事项：您现在加载`MailchimpSubscriber`模型两次。第一次在`$uses`控制器中的数组中，第二次通过`$this->loadModel()`控制器动作中的方法。我只会使用后者。

# c# - 组合框中的 ItemsSource

> ID：11225909
> 
> 赞同：0
> 
> 时间：2012-06-27T12:12:59.413
> 
> 标签：c#, wpf

一个简单的xml：

```
<ComboBox
    Height="23" Name="status"
    IsReadOnly="False"
    ItemsSource="?"
    Width="120">
</ComboBox> 
```

您需要写到 С# 的内容，将项目粘贴在此处的下拉列表中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:19:27.117

你`ItemsSource`是一个简单的绑定到 [something] 的集合，它将填写组合列表，这是一个快速示例：

```
public class MyDataSource
{
    public IEnumerable<string> ComboItems 
    {
        get
        {
            return new string[] { "Test 1", "Test 2" };
        }
    }
}

<ComboBox
    Height="23" Name="status"
    IsReadOnly="False"
    ItemsSource="{Binding Path=ComboItems}"
    Width="120">
</ComboBox> 
```

这不是一个完整的示例，但它为您提供了想法。

还值得注意的是，您**不必使用**该`ItemsSource`属性，这也是可以接受的：

```
<ComboBox
    Height="23" Name="status"
    IsReadOnly="False"
    Width="120">
    <ComboBox.Items>
        <ComboBoxItem>Test 1</ComboBoxItem>
        <ComboBoxItem>Test 2</ComboBoxItem>
    </ComboBox.Items>
</ComboBox> 
```

# html - 让 div (height) 占据父级剩余高度

> ID：11225912
> 
> 赞同：138
> 
> 时间：2012-06-27T12:13:14.703
> 
> 标签：html, css, height, parent

[http://jsfiddle.net/S8g4E/](http://jsfiddle.net/S8g4E/)

我有一个`div`有两个孩子的容器。第一个孩子有一个给定的身高。如何在`div`不给出特定高度的情况下让第二个孩子占据容器的“空闲空间”？

在这个例子中，粉红色`div`也应该占据白色空间。

* * *

类似于这个问题：[如何让 div 占据剩余高度？](https://stackoverflow.com/questions/7198282/how-to-make-div-occupy-remaining-height)

但我不想给出**绝对位置**。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-06-27T12:19:14.870

根据您希望实现的浏览器支持以及是否具有定义的高度，可以通过各种方式扩展`#down`子项以填充剩余空间。`#container``#up`

**样品**

```
.container {
  width: 100px;
  height: 300px;
  border: 1px solid red;
  float: left;
}
.up {
  background: green;
}
.down {
  background: pink;
}
.grid.container {
  display: grid;
  grid-template-rows: 100px;
}
.flexbox.container {
  display: flex;
  flex-direction: column;
}
.flexbox.container .down {
  flex-grow: 1;
}
.calc .up {
  height: 100px;
}
.calc .down {
  height: calc(100% - 100px);
}
.overflow.container {
  overflow: hidden;
}
.overflow .down {
  height: 100%;
}
```

```
<div class="grid container">
  <div class="up">grid
    <br />grid
    <br />grid
    <br />
  </div>
  <div class="down">grid
    <br />grid
    <br />grid
    <br />
  </div>
</div>
<div class="flexbox container">
  <div class="up">flexbox
    <br />flexbox
    <br />flexbox
    <br />
  </div>
  <div class="down">flexbox
    <br />flexbox
    <br />flexbox
    <br />
  </div>
</div>
<div class="calc container">
  <div class="up">calc
    <br />calc
    <br />calc
    <br />
  </div>
  <div class="down">calc
    <br />calc
    <br />calc
    <br />
  </div>
</div>
<div class="overflow container">
  <div class="up">overflow
    <br />overflow
    <br />overflow
    <br />
  </div>
  <div class="down">overflow
    <br />overflow
    <br />overflow
    <br />
  </div>
</div>
```

**网格**

CSS 的`grid`布局提供了另一种选择，尽管它可能不像 Flexbox 模型那样简单。但是，它只需要设置容器元素的样式：

```
.container { display: grid; grid-template-rows: 100px } 
```

将`grid-template-rows`第一行定义为固定的 100px 高度，其余行将自动拉伸以填充剩余空间。

我很确定 IE11 需要`-ms-`前缀，因此请确保验证您希望支持的浏览器中的功能。

**弹性盒**

CSS3 的[灵活框布局模块 ( `flexbox`)](http://www.w3.org/TR/css-flexbox-1/)现在得到了很好的支持并且可以很容易地实现。因为它很灵活，它甚至可以在`#up`没有定义高度的情况下工作。

```
#container { display: flex; flex-direction: column; }
#down { flex-grow: 1; } 
```

需要注意的是，IE10 和 IE11 对某些 flexbox 属性的支持可能有问题，而 IE9 或更低版本则根本不支持。

**计算高度**

另一个简单的解决方案是使用[CSS3`calc`](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)功能单元，[正如 Alvaro 在他的回答中指出的那样](https://stackoverflow.com/a/21899764/1028949)，但它要求第一个孩子的高度是一个已知值：

```
#up { height: 100px; }
#down { height: calc( 100% - 100px ); } 
```

它得到了相当广泛的支持，唯一值得注意的例外是 <= IE8 或 Safari 5（不支持）和 IE9（部分支持）。其他一些问题包括将*calc*与*transform*或*box-shadow*结合使用，因此如果您担心，请务必在多个浏览器中进行测试。

**其他选择**

如果需要较旧的支持，您可以添加`height:100%;`以`#down`使粉红色 div 全高，但有一点需要注意。它将导致容器溢出，因为`#up`将其向下推。

因此，您可以添加`overflow: hidden;`到容器中来解决这个问题。

或者，如果 的高度`#up`是固定的，您可以将其绝对定位在容器内，并添加一个 padding-top 到`#down`.

而且，另一种选择是使用表格显示：

```
#container { width: 300px; height: 300px; border: 1px solid red; display: table;}
#up { background: green; display: table-row; height: 0; }
#down { background: pink; display: table-row;}​ 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-20T06:19:02.283

我问这个问题已经快两年了。我刚刚提出了解决我遇到的这个问题的 css calc()，并认为添加它会很好，以防有人遇到同样的问题。（顺便说一句，我最终使用了绝对位置）。

[http://jsfiddle.net/S8g4E/955/](http://jsfiddle.net/S8g4E/955/)

这是CSS

```
#up { height:80px;}
#down {
    height: calc(100% - 80px);//The upper div needs to have a fixed height, 80px in this case.
} 
```

以及有关它的更多信息：http: [//css-tricks.com/a-couple-of-use-cases-for-calc/](http://css-tricks.com/a-couple-of-use-cases-for-calc/)

浏览器支持：[http ://caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-05-16T23:15:05.620

## 抽象的

我没有找到一个完全令人满意的答案，所以我不得不自己找出答案。

我的要求：

*   当元素的**内容大小**小于**或大于**剩余**空间大小**时（在第二种情况下应**显示****滚动条**），该元素应**完全**占用剩余空间；
*******   该解决方案应在**计算父高度**且未**指定**时起作用；*   **`calc()`不应该被使用**，因为剩下的元素*不应该知道*其他元素的大小；*   **应该使用**现代**和**熟悉的布局技术**，例如**flexbox 。**********

 ***** * *

## 解决方案

*   将*所有具有计算高度（如果有）的直接父*级和*指定高度的下一个父*级变成弹性框；
*   指定*具有计算高度（如果有）*和*元素*`flex-grow: 1`的所有直接父级，以便当元素内容大小较小时它们将占用所有剩余空间；
***   指定*所有固定高度的弹性项目，*`flex-shrink: 0`这样当元素内容大小大于剩余空间大小时它们不会变小；**   指定*所有具有计算高度（如果有）的直接父级*`overflow: hidden`以禁用滚动并禁止显示溢出内容；**   指定*元素*`overflow: auto`以在其中启用滚动。****

 **** * *

**[JSFiddle（元素具有计算高度的直接父级）](http://jsfiddle.net/06okteqL/)**

**[JSFiddle（简单案例：没有计算高度的直接父母）](http://jsfiddle.net/eaoxvwqj/)**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-04T22:07:40.233

我的答案只使用 CSS，它不使用溢出：隐藏或显示：表行。它要求第一个孩子确实有一个给定的高度，但是在你的问题中你说只有第二个孩子需要没有指定它的高度，所以我相信你应该觉得这是可以接受的。

```
#container {
  width: 300px;
  height: 300px;
  border: 1px solid red;
}

#up {
  background: green;
  height: 63px;
  float: left;
  width: 100%
}

#down {
  background: pink;
  padding-top: 63px;
  height: 100%;
  box-sizing: border-box;
}
```

```
<div id="container">
  <div id="up">Text<br />Text<br />Text<br /></div>
  <div id="down">Text<br />Text<br />Text<br /></div>
</div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T12:16:07.193

除非我有误解，否则您可以添加`height: 100%;`and`overflow:hidden;`到`#down`.

```
#down { 
    background:pink; 
    height:100%; 
    overflow:hidden;
}​ 
```

[现场演示](http://jsfiddle.net/S8g4E/7/)

编辑：由于您不想使用`overflow:hidden;`，因此可以`display: table;`用于这种情况；但是，在 IE 8 之前不支持它。（[`display: table;`支持](http://caniuse.com/css-table)）

```
#container { 
    width: 300px; 
    height: 300px; 
    border:1px solid red;
    display:table;
}

#up { 
    background: green;
    display:table-row;
    height:0; 
}

#down { 
    background:pink;
    display:table-row;
}​ 
```

[现场演示](http://jsfiddle.net/S8g4E/11/)

注意：您说过您希望`#down`高度为`#container`高度减去`#up`高度。该`display:table;`解决方案正是这样做的，[这个 jsfiddle](http://jsfiddle.net/S8g4E/15/)将非常清楚地描述这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-27T12:20:22.673

检查演示 - [http://jsfiddle.net/S8g4E/6/](http://jsfiddle.net/S8g4E/6/)

使用 CSS -

```
#container { width: 300px; height: 300px; border:1px solid red; display: table;}
#up { background: green; display: table-row; }
#down { background:pink; display: table-row;} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-27T12:22:13.567

您可以使用浮动来下推内容：

[http://jsfiddle.net/S8g4E/5/](http://jsfiddle.net/S8g4E/5/)

你有一个固定大小的容器：

```
#container {
    width: 300px; height: 300px;
} 
```

允许内容在浮动旁边流动。除非我们将浮动设置为全宽：

```
#up {
    float: left;
    width: 100%;
} 
```

While`#up`和`#down`share top position,`#down`的内容只能在浮动的底部之后开始`#up`：

```
#down {
    height:100%;
}​ 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-27T12:19:57.693

我不确定它是否可以纯粹用 CSS 来完成，除非你愿意用幻觉来伪装它。也许使用 Josh Mein 的答案，并设置`#container`为`overflow:hidden`.

对于它的价值，这是一个 jQuery 解决方案：

```
var contH = $('#container').height(),
upH = $('#up').height();
$('#down').css('height' , contH - upH); 
```*******

# spring - 是否可以拆分 ehcache 配置文件？

> ID：11225914
> 
> 赞同：3
> 
> 时间：2012-06-27T12:13:15.140
> 
> 标签：spring, configuration, ehcache

我正在编写一个旨在与 Spring 和 Ehcache 一起使用的 jar。Spring 要求为每个元素定义一个缓存，因此我计划为 jar 定义一个 Ehcache，最好作为 jar 中的资源，可以导入到应用程序的主 Ehcache 配置中。但是，我对[示例 Ehcache 配置文件](http://www.ehcache.org/ehcache.xml)的阅读和我的 Google 搜索并没有找到任何导入子 Ehcache 配置文件的方法。

有没有办法导入一个子 Ehcache 配置文件，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:56:14.460

我做了类似的事情（替换我的 Ehcache xml 文件中的一些占位符 - 如果您愿意，导入语句或多或少是一个占位符）是从 Springs 扩展（或多或少的副本）[`EhCacheManagerFactoryBean`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/cache/ehcache/EhCacheManagerFactoryBean.html)并创建最终的 Ehcache xml即时配置文件。

要在您中创建 `CacheManager`实例，`afterPropertiesSet()`只需交出`InputStream`指向您的配置的 a。

```
@Override
public void afterPropertiesSet() throws IOException, CacheException {
    if (this.configLocation != null) {
        InputStreamSource finalConfig = new YourResourceWrapper(this.configLocation); // put your custom logic here
        InputStream is = finalConfig.getInputStream();
        try {
            this.cacheManager = (this.shared ? CacheManager.create(is) : new CacheManager(is));
        } finally {
            IOUtils.closeQuietly(is);
        }
    } else {
        // ...
    }
    // ...
} 
```

对于我的过滤内容，我在内部使用 a`ByteArrayResource`来保留最终配置。

```
data = IOUtils.toString(source.getInputStream()); // get the original config (configLocation) as string
// do your string manipulation here
Resource finalConfigResource =  new ByteArrayResource(data.getBytes()); 
```

对于“真正的”模板，人们还可以考虑使用像 FreeMarker（Spring 支持）这样的真正模板引擎来做更多花哨的事情。

# c# - 在 WCF 或基于 ASMX 的 Web 服务中使用计时器？

> ID：11225919
> 
> 赞同：0
> 
> 时间：2012-06-27T12:13:26.407
> 
> 标签：c#, asp.net, wcf, web-services, asmx

我有一个场景，我想监控数据库（SQL Server）表，如果在其中插入记录，我的 web 服务应该通过一条消息发送到手机。

我已经编写了向手机发送消息的功能，但我不知道如何使用计时器在几个间隔后点击数据库以使用 Web 服务监控该表。

有人帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:17:48.483

也许我不明白这个问题，但对我来说听起来很直截了当。在 WCF 服务的启动代码中，您启动 System.Timers.Timer。在计时器滴答事件中，您调用 StoredProc 或读取数据库中当前可用记录并将它们返回给服务的东西。在那里您处理它们，然后删除数据库中的记录（或将它们标记为已处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:38:57.940

为什么你想要webservice，一个windows服务或通过windows scheduler运行的应用程序会是更好的选择。

# matlab - 如何在 MATLAB 中返回符号多项式的实部/虚部？

> ID：11225922
> 
> 赞同：0
> 
> 时间：2012-06-27T12:13:41.947
> 
> 标签：matlab, symbols, polynomial-math, complex-numbers, symbolic-math

给定一个多项式如`(a+b*i)*c+i`, 其中`a`, `b`,`c`被定义为符号元素来表示三个实数值并且`i`是虚数单位，如何返回这个多项式的实部和虚部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:28:52.293

```
a = sym('a','real');
b = sym('b','real');
c = sym('c','real');
expand(real((a+b*1i)*c+1i)) 
```

# jquery - jQuery 多事件处理程序

> ID：11225923
> 
> 赞同：5
> 
> 时间：2012-06-27T12:13:42.840
> 
> 标签：jquery

末尾的 keyup() 是什么意思？

```
$("input").keyup(function () {
      var value = $(this).val();
      $("p").text(value);
    }).keyup(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:14:34.483

谢谢***[@nnnnnn](https://stackoverflow.com/users/615754/nnnnnn)***先生。

代码将一个`keyup`事件绑定到所有`inputs`已经属于 DOM 的事件，并立即为这些输入触发它。

现在，

```
$("input").keyup(function () {
  var value = $(this).val();
  $("p").text(value);
}); 
```

上面的代码将`keyup` 事件绑定到`input`最后`.keyup()`一个初始触发器到`keyup`.

您也可以重写上面的代码，如下所示：

```
$("input").keyup(function () {
      var value = $(this).val();
      $("p").text(value);
    })

$('input').keyup(); // or $('input').trigger('keyup'); 
```

* * *

## 它会创建一个无限循环吗？

**不**，它只会在页面加载时触发一次。看[**这里**](http://jsfiddle.net/QStkd/506/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:16:10.220

第一个 .keyup 是绑定方法，第二个是触发方法：

```
$("input")
    .keyup(function () { // Bind on keyup
        var value = $(this).val();
        $("p").text(value);
    })
    .keyup(); // Trigger keyup 
```

# java - 尽管两个证书都是由经过验证的 CA 颁发的，但获得 ssl 异常？

> ID：11225924
> 
> 赞同：1
> 
> 时间：2012-06-27T12:13:42.967
> 
> 标签：java, https, ssl-certificate

我在 prrduction 有两个 web 应用程序，比如 app1 和 app2。两者都在不同的网络服务器上。app1 是经过验证的安全信托公司，app2 是由 TrustWave Holdings,Inc 验证的。所以两者都是经过验证的 CA。App2 尝试将 HttpsURLConnection 设置为 app1 并获得一些 SSLException。我的问题是，如果两个证书都是经过验证的，我们还需要在 jre\lib\security 文件夹中创建任何证书条目吗？根据我的理解，如果证书经过​​验证，我们就不需要这个。任何指针都会有很大帮助。

**编辑：-**

我在jdk1.6上。我不确定这些证书（即安全信托公司和 TrustWave Holdings,Inc）是否已经存在于 jre\lib\security 下的 cacerts 文件中。我可以在网上找到这些包含在 mozzila 和其他浏览器中，但不确定 jdk 1.6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:36:56.617

提供商需要付出一些努力才能将其根 CA 证书包含在所有浏览器、iphone、平板电脑和诸如此类的东西中。通常情况下，他们不会费心让他们的证书随 oracle 或 openjdk 一起提供。这就是我们从 Godaddy 转移到 Comodo 的确切原因......如果服务器证书未捆绑，您可以使用颁发者证书和您的证书创建一个密钥库，并告诉 java 通过命令行使用它：

> -Djavax.net.ssl.trustStore=yourkeystorefile.jks -Djavax.net.ssl.keyStore=yourkeystorefile.jks

*从技术上讲，您可以将服务器 cert+key 放在密钥库和从颁发者到信任库的证书链中，但是如果将两者混合在一个密钥库文件中，这对 java 来说很好*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:40:41.213

您可能需要将这些添加到 /security/cacerts。默认情况下，Java 确实信任某些证书颁发机构。我不确定 TrustWave 是其中之一。

使用以下命令查看密钥库并查看 TrustWave 是否在其中。

```
keytool -list -keystore /usr/java/jdk1.6.0_14/jre/lib/security/cacerts 
```

# android - HTML5 视频不会在 Android 设备上循环播放

> ID：11225927
> 
> 赞同：8
> 
> 时间：2012-06-27T12:13:58.010
> 
> 标签：android, html, video, loops

经过几个小时的尝试，我想问一下如何使用 HTML5 视频标签在 Android 设备上循环播放视频。

为了独立于某种浏览器，我包含了 video.js 来播放视频。在 Firefox 和 Chrome 上一切正常，但在我的 Android 设备（带有 Android 4.0.4 的 SSG3）上，视频无法启动或循环播放。

```
<video id="model_video" autoplay loop preload="auto" data-setup="{}" width="90%"  height="90%" poster="images/black.jpg"> 
```

没有开始视频。但这很容易通过在 JS 中调用 video.start() 来解决。但是循环不适用于此。即使似乎支持循环属性，它也会导致问题。使用属性 loop=false 或者即使缺少 loop 属性，它仍然设置为 true。

有几个网站指出需要添加事件监听器。但不幸的是，它没有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T18:53:05.677

解决方法是使用JS将loop属性设置为false。即使将 loop=false 作为视频标签的属性或缺少循环属性，video.loop 也会返回 true。所以为了完成循环，下面的代码片段起到了作用：

```
 var video = document.getElementById("model_video"); 
    //this did the trick
    video.loop = false; 
    video.addEventListener('ended', function() { 
      video.currentTime=0.1; video.play(); }, false);
    video.play(); 
```

干杯!

# php - 脚本在返回标头之前超时：php.fastcgi

> ID：11225932
> 
> 赞同：4
> 
> 时间：2012-06-27T12:14:13.833
> 
> 标签：php, performance, fastcgi

大约 90 秒后，我在我的 apache 错误日志中看到了这个错误。我假设我需要在 PHP 中增加一个设置，但我不确定要更改哪一个。

我可以增加一个设置来清除此错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:17:22.517

在您的`php.ini`文件中查找如下内容：

```
; Maximum execution time of each script, in seconds
; http://php.net/max-execution-time
; Note: This directive is hardcoded to 0 for the CLI SAPI
max_execution_time = 600    

; Maximum amount of time each script may spend parsing request data. It's a good
; idea to limit this time on productions servers in order to eliminate unexpectedly
; long running scripts. 
; Note: This directive is hardcoded to -1 for the CLI SAPI
; Default Value: -1 (Unlimited)
; Development Value: 60 (60 seconds)
; Production Value: 60 (60 seconds)
; http://php.net/max-input-time
max_input_time = 600 
```

编辑值，重新启动 apache，你就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:16:23.357

您可以在 PHP 脚本中调用`set_time_limit(0);`无限时间限制。

# javascript - 从像素坐标中选择 FF 和 Google Chrome

> ID：11225933
> 
> 赞同：2
> 
> 时间：2012-06-27T12:14:16.120
> 
> 标签：javascript, firefox, google-chrome, selection

我已经可以像在这个小提琴中那样为 safari 和 IE 做到这一点：http: [//jsfiddle.net/cyk8y/](http://jsfiddle.net/cyk8y/)（代码有点复杂或/和混乱，但它只是为了让你可以看到我想要的最终结果）。

我从这里获取了主要代码：[Set a selection range from A to B in absolute position](https://stackoverflow.com/questions/11191136/set-a-selection-range-from-a-to-b-in-absolute-position)

在答案的评论中，[Tim Down](https://stackoverflow.com/questions/11191136/set-a-selection-range-from-a-to-b-in-absolute-position)给了我这些链接：[How to get a word under cursor using JavaScript](https://stackoverflow.com/questions/2444430/how-to-get-a-word-under-cursor-using-javascript) and [Creating a collapsed range from a pixel position in FF/Webkit](https://stackoverflow.com/questions/3189812/creating-a-collapsed-range-from-a-pixel-position-in-ff-webkit)以帮助我使我的代码在 FF 和 Google Chrome 中工作。

我试过了，但我没有成功。

有人可以给我一个例子，从在 FF 和/或 Google Chrome（和 Opera？）中工作的像素坐标中进行选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T23:47:10.137

这是我的最新尝试。从表面上看似乎可以工作，但我不能保证：这是一段不平凡的代码，我还没有彻底测试过。

一旦我整理和测试了它，它很可能会以某种形式出现在我的[Rangy库中。](http://code.google.com/p/rangy)

现场演示：http: [//jsfiddle.net/timdown/ABjQP/8/](http://jsfiddle.net/timdown/ABjQP/8/)

代码摘录（Firefox 和 Opera 位）：

```
function getNodeIndex(node) {
    var i = 0;
    while( (node = node.previousSibling) ) {
        i++;
    }
    return i;
}

function getLastRangeRect(range) {
    var rects = range.getClientRects();
    return (rects.length > 0) ? rects[rects.length - 1] : null;
}

function pointIsInOrAboveRect(x, y, rect) {
    return y < rect.bottom && x >= rect.left && x <= rect.right;
}

function positionFromPoint(doc, x, y, favourPrecedingPosition) {
    var el = doc.elementFromPoint(x, y);

    var range = doc.createRange();
    range.selectNodeContents(el);
    range.collapse(true);

    var offsetNode = el.firstChild, offset, position, rect;

    if (!offsetNode) {
        offsetNode = el.parentNode;
        offset = getNodeIndex(el);
        if (!favourPrecedingPosition) {
            ++offset;
        }
    } else {
        // Search through the text node children of el
        main: while (offsetNode) {
            if (offsetNode.nodeType == 3) {
                // Go through the text node character by character
                for (offset = 0, textLen = offsetNode.length; offset <= textLen; ++offset) {
                    range.setEnd(offsetNode, offset);
                    rect = getLastRangeRect(range);
                    if (rect && pointIsInOrAboveRect(x, y, rect)) {
                        // We've gone past the point. Now we check which side
                        // (left or right) of the character the point is nearer to
                        if (rect.right - x > x - rect.left) {
                            --offset;
                        }
                        break main;
                    }
                }
            } else {
                // Handle elements
                range.setEndAfter(offsetNode);
                rect = getLastRangeRect(range);
                if (rect && pointIsInOrAboveRect(x, y, rect)) {
                    offset = getNodeIndex(offsetNode);
                    offsetNode = el.parentNode;
                    if (!favourPrecedingPosition) {
                        ++offset;
                    }
                    break main;
                }
            }

            offsetNode = offsetNode.nextSibling;
        }
        if (!offsetNode) {
            offsetNode = el;
            offset = el.childNodes.length;
        }
    }

    return {
        offsetNode: offsetNode,
        offset: offset
    };
} 
```

# java - JBOSS7不会加载部署结构xml

> ID：11225939
> 
> 赞同：2
> 
> 时间：2012-06-27T12:14:35.620
> 
> 标签：java, java-ee-6, jboss7.x

我正在开发一些应用程序，并且在某些时候我已经有使用 xmlsec 1.4.3 的代码，但是 JBoss 7 默认加载 xmlsec 1.5.1，所以我的代码爆炸了。我一直在阅读文档并在此处结束：[https ://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-JBossDeploymentStructureFile](https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-JBossDeploymentStructureFile)

因此，理论上，如果我将 jboss-deployment-structure.xml 放在我的 WEB-INF 文件夹中（它正在读取 XML，因为我未能正确写入 xsd 和 JBOSS 崩溃，现在没有 xsd 它什么也没说）具有以下内容：

```
<jboss-deployment-structure>
    <ear-subdeployments-isolated>true</ear-subdeployments-isolated>
    <deployment>
        <!-- Exclusions allow you to prevent the server from automatically adding some dependencies     -->
        <exclusions>
            <module name="org.apache.santuario.xmlsec" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

然后我就可以使用我的 xmlsec 1.4.3 并且 JBOSS 的模块将被禁用。

但是，这是行不通的。

我在这里缺少什么？这应该有效吗？

# c# - MongoDB 上的唯一列表

> ID：11225945
> 
> 赞同：0
> 
> 时间：2012-06-27T12:14:45.903
> 
> 标签：c#, .net, mongodb, nosql

我在 MongoDB 中有很多公司，像这样

```
{
   "ID" : "123456",
   "NAME" : "10GEN"
} 
```

如果公司名称是唯一的，我想要一个原子操作来插入一个新的公司文档，否则报告插入失败。不确定如何使用官方 Mongo c# 驱动程序执行此操作？

一种方法是定义唯一索引并在 try/catch 中执行常规插入，但这是使用异常处理来控制流程。我希望的是一个复合命令，比如 FindAndModify。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:26:01.560

在 上创建[唯一索引](http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue)`NAME`。

# php - PHP自带logfile函数来检查例程中的值和变量

> ID：11225947
> 
> 赞同：-1
> 
> 时间：2012-06-27T12:14:57.257
> 
> 标签：php, logging

我仍然在关注这个[错误](https://stackoverflow.com/questions/11211127/sporadic-unwanted-null-entries-in-database-get)，但现在我（第二天）被一个日志文件功能困住了。

```
function errorlog($text) {
    $datelog=date("d.m.Y",time());
    $entry=$datelog.": ".$text."\n";
    $filename= $_SERVER['DOCUMENT_ROOT']."../../log/errorlog.txt";
    $handler = fopen($filename , "a+") or die ("can't open file"); 
    fwrite($handler , $entry);
    fclose($handler);
  } 
```

**它没有加载语法 T_String 异常，我根本找不到。** 我知道用如此卑鄙的错误来打扰你们是很糟糕的，但我在这里。

它位于 function.ini 中，应该像这样调用：

```
 errorlog("Pre-IF: ".$_GET['tempA']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:23:04.267

```
function errorlog($text) {
  $date=date("d.m.Y - H:m:s",time());
  $entry=$date.": ".$text."\n";
  $dateiname = $_SERVER['DOCUMENT_ROOT']."log/errorlog.txt";
  $handler = fOpen($dateiname , "a+");   
  fWrite($handler , $entry);
  fClose($handler);
 } 
```

好吧，似乎缺少 H:m:s 并且路径有问题：文档根目录是 /var/www/。

# symfony - Doctrine2 symfony2 多重多对多关系

> ID：11225950
> 
> 赞同：3
> 
> 时间：2012-06-27T12:15:06.683
> 
> 标签：symfony, doctrine-orm

我有一个`Gift`实体，这个实体有一个发送者和一个接收者……这两个实体都来自该实体`User` ，用户可以成为向其他用户**发送**许多礼物的发送者。也是许多用户的许多礼物的**接收者**

在我看来，我的`Gift`实体内部的解决方案是这样的：

```
/**
 * @ORM\ManyToMany(targetEntity="Tracker\UserBundle\Entity\User")
 * @ORM\JoinTable(name="gift_user",
 *      joinColumns={@ORM\JoinColumn(name="sender_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="gift_id", referencedColumnName="id")}
 *      )
 */
protected $senders;

/**
 * @ORM\ManyToMany(targetEntity="Tracker\UserBundle\Entity\User")
 * @ORM\JoinTable(name="gift_user",
 *      joinColumns={@ORM\JoinColumn(name="receiver_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="gift_id", referencedColumnName="id")}
 *      )
 */
protected $receivers; 
```

但是当我跑步时，`php app/console doctrine:schema:update --dump-sql`我得到：

```
 [Doctrine\DBAL\Schema\SchemaException]                          
  The table with name 'finaldb.gift_user' already exists. 
```

我该如何更改我的语法、配置，所以我最终得到了这样的表格？

```
gift_id | sender_id | receiver_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:26:07.217

如果没有两个连接表，您想要实现的目标是不可能的。

每个`@ManyToMany`关联都需要不同的连接表。那是因为连接表只知道两个链接实体（不知道关联的方向）。此外，由 Doctrine ORM 生成的连接表没有任何自动增量标识符，因为这两个引用已经代表了表的主键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:30:35.650

这是东西：您可以使用 joinTable 来指定连接表名称

```
/**
     * @ORM\ManyToMany(targetEntity="Tracker\UserBundle\Entity\User")
     * @ORM\JoinTable(name="gift_user",joinTable="myprefix_mytable_senders",
     *      joinColumns={@ORM\JoinColumn(name="sender_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="gift_id", referencedColumnName="id")}
     *      )
     */
    protected $senders;

    /**
     * @ORM\ManyToMany(targetEntity="Tracker\UserBundle\Entity\User")
     * @ORM\JoinTable(name="gift_user",joinTable="myprefix_mytable_receivers"
     *      joinColumns={@ORM\JoinColumn(name="receiver_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="gift_id", referencedColumnName="id")}
     *      )
     */
    protected $receivers; 
```

# yql - 通过 id 获取公共事件（即将到来）

> ID：11225952
> 
> 赞同：0
> 
> 时间：2012-06-27T12:15:09.067
> 
> 标签：yql, yahoo-api

我知道公共 yql 事件的 id。为什么我不能通过简单地在 WHERE 子句中提到 id 来得到它，如下所示：

[点击这里查看我的yql控制台](http://developer.yahoo.com/yql/console/#h=SELECT%20%2a%20FROM%20upcoming.events%20WHERE%20id%20=%20%229236524%22%20%7C%20sort%28field=%27start_date%27%29%20)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:12:48.577

你非常接近 - 而不是`id`你想要使用参数`event_id`。这是您的搜索的修改版本，它有效：

[`SELECT * FROM upcoming.events WHERE event_id = "9236524" | sort(field='start_date')`](http://developer.yahoo.com/yql/console/?q=SELECT%20%2a%20FROM%20upcoming.events%20WHERE%20event_id%20%3D%20%229236524%22%20%7C%20sort%28field%3D%27start_date%27%29%20)

对于 Community YQL 表格，如`upcoming.events`，您可以通过单击最右侧的“desc”链接查看允许的参数。在这种情况下，它表明搜索依据`event_id`是选项之一：

```
<select>
    <key name="event_id" required="true" type="xs:string"/>
</select>
```

# c# - 如何证明列表框中的字符串是合理的？

> ID：11225956
> 
> 赞同：2
> 
> 时间：2012-06-27T12:15:22.840
> 
> 标签：c#, vb.net, c#-3.0

我将值绑定到列表框，但字符串没有以正确的格式显示。

前我的弦喜欢

```
abc               10
abcd              20
asdfas            30 
```

我使用填充将第一个字符串设为 30 的固定长度

```
str1.PadRight(30) + str2.PadRight(2) 
```

然后我也得到了这样的价值观

```
abc     10
abcd        20
asdfas            30 
```

请建议我如何在字符串之间放置相同的空格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:50:55.153

Windows 用户界面通常使用可变宽度字体，因此您不能只在给定的列中填充空格以使文本对齐。

您将需要将 ListBox 设置为使用等宽字体（例如 Courier 或 Lucida Console），使用支持列的 ListView（或类似的），或实现所有者绘制的项目，以便您可以控制项目的显示方式，拆分文本以在列中绘制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:59:38.863

Windows 窗体`ListBox`支持多列。[在构造函数](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.listbox%28v=vs.85%29.aspx)的文档中有一个示例。

尽管这可能不适用于数据绑定。在这种情况下，您可能需要使用 a[`ListView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:05:01.187

我会创建一个包装文本和数字的 ViewModel：

```
class MyViewModel
{
    public string Text { get; set; }
    public int Number { get; set; }
} 
```

然后给出进行布局的`ListBox`an `ItemTemplate`：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <DockPanel>
                <TextBlock DockPanel.Dock="Left"
                           Text="{Binding Text}"/>
                <TextBlock DockPanel.Dock="Right"
                           Text="{Binding Number}"/>
            </DockPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# android - 如何关闭活动并通过单击通知再次显示相同的活动

> ID：11225957
> 
> 赞同：0
> 
> 时间：2012-06-27T12:15:26.423
> 
> 标签：android

我正在使用 FTP 上传视频。我也为此显示通知。如果我单击通知，它将带我进入应用程序屏幕。所以同一个屏幕会运行两次。所以我需要点击两次后退按钮。我想避免这种情况。请帮我...

```
public class loadVideo extends AsyncTask<Void, Void, Void> {
        String status = null;
        FTPClient ftp = new FTPClient();
        InputStream in = null;
        int progress = 2;
        String dbftpserver, dbftpusername, dbftpPassword, dbftpPort,
                dbftpDirPath = null;
        String hostName, username, password = null;
        NotificationManager notificationManager = (NotificationManager) getApplicationContext()
                .getSystemService(Context.NOTIFICATION_SERVICE);

        int id = 10;

        @Override
        protected Void doInBackground(Void... arg0) {
            UUID uniqueKey = UUID.randomUUID();
            fname = uniqueKey.toString();
            Log.e("UNIQUE NAME", fname);
            String strquery1 = "SELECT FTP_Server,FTP_Username,FTP_Password,FTP_PORT,FTP_Directory_Path FROM hwd_settings WHERE ID = 1 ";
            Cursor mCursor = (MainscreenActivity.JEEMAHWDroidDB).rawQuery(
                    strquery1, null);
            if (mCursor.getCount() != 0) {
                mCursor.moveToLast();
                for (int i = mCursor.getCount() - 1; i >= 0; i--) {
                    dbftpserver = mCursor.getString(0);
                    dbftpusername = mCursor.getString(1);
                    dbftpPassword = mCursor.getString(2);
                    dbftpPort = mCursor.getString(3);
                    dbftpDirPath = mCursor.getString(4);
                }
            }
            hostName = dbftpserver;
            username = dbftpusername;
            password = dbftpPassword;
            try {
                ftp.connect(hostName);
                ftp.login(username, password);
                ftp.setFileType(FTP.BINARY_FILE_TYPE);
                ftp.enterLocalPassiveMode();
                ftp.changeWorkingDirectory(dbftpDirPath + "uploads");
                int reply = ftp.getReplyCode();
                System.out.println("Received Reply from FTP Connection:"
                        + reply);
                if (FTPReply.isPositiveCompletion(reply)) {
                    System.out.println("Connected Success");                    
                    doftpVideo();
                } else {
                    Log.e("FTP", "CONNECTION ERROR");
                    finish();
                    Toast.makeText(getApplicationContext(),
                            "Unable to connect FTP", Toast.LENGTH_LONG).show();
                }
                return null;
            } catch (Exception i) {
                i.printStackTrace();
                String temp = i.toString();
                if (temp.equalsIgnoreCase("java.net.UnknownHostException: "
                        + hostName)) {
                    showAlert();
                }

            }
            return null;
        }

        private void showAlert() {
            AlertDialog.Builder alert = new AlertDialog.Builder(
                    NewVideoActivity.this);
            alert.setMessage("Unable to connect FTP");
            alert.setPositiveButton(getResources().getString(R.string.ok),
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            dialog.cancel();
                        }
                    }).show();
        }

        public void doftpVideo() {
            Intent intent1 = new Intent(NewVideoActivity.this,
                    MainscreenActivity.class);
            final PendingIntent pendingIntent = PendingIntent.getActivity(
                    getApplicationContext(), 0, intent1, 0);
            Notification notification = new Notification();
            final String location = selectedPath;
            final SharedPreferences prefs = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());
            SharedPreferences.Editor prefsEditor = prefs.edit();
            try {
                int icon = R.drawable.video_upload; // icon from resources
                CharSequence tickerText = "Starting Video Upload"; // ticker-text
                long when = System.currentTimeMillis(); // notification time
                Context context = getApplicationContext(); // application
                                                            // Context
                CharSequence contentTitle = "JEEMAHWDroid"; // expanded message
                                                            // title
                CharSequence contentText = "Uploading " + strTitle; // expanded
                                                                    // message
                                                                    // text
                notification = new Notification(icon, tickerText, when);
                notification.flags = notification.flags
                        | Notification.FLAG_ONLY_ALERT_ONCE
                        | Notification.FLAG_NO_CLEAR;
                notification.setLatestEventInfo(context, contentTitle,
                        contentText, pendingIntent);
                notificationManager.notify(id, notification);
                File f1 = new File(location);
                in = new FileInputStream(f1);
                ftp.storeFile(fname + "." + extension, in);
                System.out.println("SUCCESS");
                System.out.println("Video Title:" + strTitle
                        + " is uploaded successfully");
                System.out.println("Video Name:" + fname
                        + " is uploaded successfully");
                status = "completed";
                prefsEditor.putString("status", status);
                prefsEditor.commit();
                String tempStatus = prefs.getString("status", null);
                System.out.println("tempSTATUS-->>>" + tempStatus);
                strUserName = prefs.getString(
                        getResources().getString(R.string.username), null);
                strToken = prefs.getString(
                        getResources().getString(R.string.token), null);
                url = prefs.getString("VALUE", null);
                doftpImage();
                doCreateRecord();
            } catch (Exception i) {
                i.printStackTrace();
            }
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:18:18.130

尝试`android:launchMode="singleInstance"`在 AndroidManifest.xml 中设置 MainscreenActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:19:48.160

将`FLAG_ACTIVITY_SINGLE_TOP`标志设置为`intent1`.

# slickgrid - Slickgrid突出显示没有发生

> ID：11225960
> 
> 赞同：0
> 
> 时间：2012-06-27T12:15:33.437
> 
> 标签：slickgrid

我在 html 页面上使用 slickgrid 制作了一个网格。我想突出显示某些单元格。

我在 html 的头部添加了这个

```
 <style>
  .changed{ background: yellow } 

  </style> 
```

我有这个选项：

```
var options = {
                    enableCellNavigation: true,
                    enableColumnReorder: false,
                    cellHighlightCssClass: "changed",
                }; 
```

这就是网格的生成方式

```
grid = new Slick.Grid("#sgrid", rows, columns, options);
grid.setCellCssStyles("highlight", cell_info_to_be_highlighted);
grid.render(); 
```

这是输出`console.log(JSON.stringify(cell_info_to_be_highlighted));`

```
{"29":{"column_3":"changed"},"33":{"column_3":"changed"},"34":{"column_3":"changed"},"35":{"column_3":"changed"},"36":{"column_3":"changed"},"37":{"column_3":"changed"},"38":{"column_3":"changed"},"39":{"column_3":"changed"}} 
```

现在网格已正确显示，但根本没有突出显示。我究竟做错了什么？

**更新**

问题出在其他地方

我没有正确设置列的 ID。因此，所有的问题都发生了。列的 id 应该与您在 cell_info_to_be_highlighted 中给出的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:10:23.817

我的猜测是“更改”的 CSS 类正在正确应用，但背景属性被忽略，因为默认值具有更高级别的特异性。尝试将其更改为 `background: yellow!important`.

# javascript - 如何在显示弹出窗口时播放弹出声音

> ID：11225963
> 
> 赞同：0
> 
> 时间：2012-06-27T12:15:45.260
> 
> 标签：javascript, popup, popupwindow

我正在使用以下代码显示弹出窗口：

```
var left = (screen.width/2)-(400/2);
var top = (screen.height/2)-(400/2);
targetWin2 = window.open ('', 'popup', 'toolbar=no,location=no,directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=400, height=10,     top='+top+', left='+left); 
```

有用; 但是如何在显示此窗口时播放弹出声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:18:50.877

你可以这样做：

```
<script langauge="javascript">

var popup="http://www.yahoo.com"
var alertMessage="This is an alert hehehe"

function userAlert(){

alert(alertMessage)
document.jukebox.play()
window.open(popup,"def")

}
</script>

<a href="javascript:userAlert();">Click Here</a>

<embed src='SoundURLHere' autostart='true' hidden='true' loop='true' name="jukebox"> 
```

`popurl`= 您要弹出的页面

`alertMessage`= 你想让警报说什么

`SoundURLHere`= 声音目录

还有可能使用 vbscript 弹出不同类型的警报框，但我不知道您是否可以与 javascript 交互。

# c# - 代码合同不检查空条件。为什么？

> ID：11225964
> 
> 赞同：3
> 
> 时间：2012-06-27T12:15:56.227
> 
> 标签：c#, .net, code-contracts

为什么 .NET 的合同不抱怨此代码？

```
private static User GetUser()
{
    var sFirstName = Console.ReadLine();
    var sLastName = Console.ReadLine();
    if (sLastName == "NULL")
    {
        return null;
    }
    else
    {
        return new User(sLastName, sFirstName);
    }
}
public static int Main(string[] args)
{
        var oUser = GetUser();
        DisplayUser(oUser);
        Console.ReadLine();
        return 0;
}
private static void DisplayUser(User user)
{
    Contract.Requires(user != null);
    Console.WriteLine(user.ToString());
} 
```

GetUser 可以返回 null，但合同从来没有说我必须在将返回值传递给 DisplayUser 之前检查它。为什么？

* * *

**AutoAnswer：**代码合同配置中有警告级别。我应该把它从低到嗨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:20:14.887

根据[这个 msdn](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contract.aspx)页面，如果您没有在 Visual Studio 中安装正确的插件，则不会强制执行合同。你安装了那个插件吗？

> 您必须安装 Visual Studio 加载项才能强制执行合同。Code Contracts Premium Edition 加载项允许您在项目属性页面上指定代码合同的静态和运行时检查。如果您不启用运行时检查，则 Contract.Ensures 等合约在违反合约的情况下不会在运行时抛出异常。Visual Studio 加载项不随 Visual Studio 2010 或 Windows SDK 一起提供。

# php - 会话变量不再工作

> ID：11225967
> 
> 赞同：0
> 
> 时间：2012-06-27T12:16:02.913
> 
> 标签：php, forms, session-variables

我想知道是否有人可以帮助我。

我觉得我需要一双全新的眼睛来看待我无法解决的问题。

下面的表格用于列出`Location records`保存在 MySQL 数据库中的内容。

```
 <form name="locationsconsole" id="locationsconsole" method="post" action="locationsaction.php">

                                    <?php

                                        $query = "SELECT * FROM `table` WHERE `userid` = '$idnum' ORDER BY locationname";
                                        $result = mysql_query($query) or die('error');
                                        $num = mysql_numrows($result);
                                        mysql_close($connect);                  
                                        $i=0;
                                        while ($i < $num) {
                                        $lid=mysql_result($result,$i,"locationid");
                                        $lname=mysql_result($result,$i,"locationname");
                                        $laddress=mysql_result($result,$i,"returnedaddress");

                             <tr>
                                <td><input type="text" id="lid" name="lid" value="<?=$lid?>"/></td>
                                <td><div align="center"><?php echo $lname;?></div></td>
                                <td><div align="left"><?php echo $laddress;?></div></td>
                                <td><div align="center"><?php echo $findscount?></div></td>
                                <td><div align="center"><input name="type" type="submit" value="View Details"/></div></td>
                                <td><div align="center"><input name="type" type="submit" value="Add Finds"/></div></td>
                                <td><div align="center"><input name="type" type="submit" value="Add Images"/></div></td>
                                <td><div align="left"><input name="type" type="submit" value="View Location Finds"/></div></td>
                            </tr>

    </form> 
```

使用下面的代码，我表单末尾的四个按钮将用户带到四个单独的屏幕，所有屏幕都链接回`Location record`通过`$lid variable`.

```
<?php session_start();
$_SESSION['lid'] = $_POST['lid'];
if (isset($_POST['type'])) {
    $urls = array(
        'View Details' => 'viewlocation.php',
        'Add Finds' => 'addfinds.php',
        'Add Images' => 'addimages.php',
        'View Location Finds' => 'locationfinds.php'
    );
    $url = $urls[$_POST['type']];
    header("Location: " . $url);
}
?> 
```

因此，所有四种接收表格都`$lid = $_SESSION['lid'];`在每一页的顶部都有这个来捕获这个变量。

这种架构直到几天前都运行良好，现在一切都出错了，我不知道为什么。我知道`<input type="text" id="lid" name="lid" value="<?=$lid?>"/>`我表单中的这个字段的值是正确的。

但是，无论有多少`Locations records`，如果我点击任何按钮，我都会被带到正确的接收屏幕，但它总是针对列表中的最后一个“位置”记录。

我似乎无法找到我在这里做错了什么，或者理解为什么它现在开始给我带来问题。我检查了 Chrome 中的 JavaScript 控制台，也没有显示任何错误。

我只是想知道是否有人可以看看这个请让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:21:49.223

你有一个错字：

'mysql_numrows'

应该：

'mysql_num_rows'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:24:17.123

您所有的“盖子”输入都采用相同的形式。当您提交表单时，会发送所有值，并且只有最后一个值会进入您的 $_POST 数组。将表单标签移动到循环内部（这意味着生成许多表单）它应该可以正常工作。

```
<?php

$query = "SELECT * FROM `table` WHERE `userid` = '$idnum' ORDER BY locationname";
$result = mysql_query($query) or die('error');
$num = mysql_num_rows($result);
mysql_close($connect);
$i = 0;
while ($i < $num) {
    $lid=mysql_result($result,$i,"locationid");
    $lname=mysql_result($result,$i,"locationname");
    $laddress=mysql_result($result,$i,"returnedaddress");

    ?><form name="locationsconsole" id="locationsconsole" method="post" action="locationsaction.php">
        <table>
            <tr>
                <td><input type="text" id="lid" name="lid" value="<?=$lid?>"/></td>
                <td><div align="center"><?php echo $lname;?></div></td>
                <td><div align="left"><?php echo $laddress;?></div></td>
                <td><div align="center"><?php echo $findscount?></div></td>
                <td><div align="center"><input name="type" type="submit" value="View Details"/></div></td>
                <td><div align="center"><input name="type" type="submit" value="Add Finds"/></div></td>
                <td><div align="center"><input name="type" type="submit" value="Add Images"/></div></td>
                <td><div align="left"><input name="type" type="submit" value="View Location Finds"/></div></td>
            </tr>
        </table>
    </form><?php
} 
```

# c# - 在方法中将抽象类作为参数传递

> ID：11225970
> 
> 赞同：3
> 
> 时间：2012-06-27T12:16:09.070
> 
> 标签：c#, abstract

我最近开始学习 c# 并遇到了一个问题。我对抽象/接口类不是很熟悉，但了解基本原理和应用。

我目前正在研究 C# 的 OOP，我已经知道 OOP 的机制，已经在 J​​ava 中完成过，但也从未在那里使用过抽象类或接口类。

我的代码的目的是传入对象的 ArrayList（公共父类的两个子类）并仅打印出属于该特定类的那些对象。这行得通，但我很想知道是否可以使用相同的方法打印出父类的所有子对象，如果父类是抽象的。

家长班

```
abstract class Person
{
    protected string Name { get; set; }
    protected int Age { get; set; }

    public override string ToString() { return "Person:" + Name + ", " + this.Age; }
} 
```

儿童班

```
class Student : Person
{
    private int studID { get; set; }
    private string school { get; set; }
    public Student() { }
    public Student(string name, int age, int studID, string school)
    {
        this.Name = name;
        this.Age = age;
        this.studID = studID;
        this.school = school;
    }

    public override string ToString()
    {
        string s = "Student:" + Name + ", " + Age + ", " + studID + ", " + school;
        return s;
    }
} 
```

方法调用

```
 private static void StudentDetails(object type)
    {
        ArrayList tmp = new ArrayList();
            //display all
            //foreach (Person p in people) tmp.Add(p);
            foreach (Person p in people)
            {
                if (type.GetType() == p.GetType())
                {
                    tmp.Add(p);
                }
            }
            //etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:23:06.390

如果您在编译时知道类型，则可以使用：

```
private static void StudentDetails<T>()
{
    ArrayList tmp = new ArrayList();
    foreach (Person p in people)
    {
        if (p is T)
        {
            tmp.Add(p);
        }
    }            
} 
```

并打电话

```
StudentDetails<Student>(); 
```

一些想法：

1.  您应该更改`ArrayList`为更强类型的内容，例如`List<T>`. 在你的情况下`List<Person>`。

2.  给`StudentDetails`一个更好的命名。方法名应该是动词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:29:53.150

如果您在编译时知道类型，则可以这样做：

```
var students = people.OfType<Student>().ToList(); 
```

并彻底摆脱该`StudentDetails`方法。`OfType<T>`文档可以在[这里](http://msdn.microsoft.com/en-us/library/bb360913.aspx)找到。

我不确定，但这也可能获得派生自的类型`T`（在我的示例中，派生自`Student`）。仅当`ToList()`您需要 a`List<T>`而不是. 时才需要调用`IEnumerable<T>`。

如果`Type`参数是在运行时确定的，则此解决方案将***不起作用***，因为泛型需要像这样编码的类型的编译时解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:20:44.520

不要比较 GetType() 因为它不检查继承和东西。检查 IsAssignableFrom 方法 -> [http://msdn.microsoft.com/de-de/library/system.type.isassignablefrom.aspx](http://msdn.microsoft.com/de-de/library/system.type.isassignablefrom.aspx)，这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:31:34.857

您可以使用您的基类（即使它是抽象的）很好地做到这一点：

```
class Program
{
    static void Main(string[] args)
    {
        List<Person> persons = new List<Person>();

        persons.Add(new Student("John", 18, 1, "Stanford"));
        persons.Add(new Student("Matt", 20, 2, "Stanford"));
        persons.Add(new Teacher("Alice", 30));

        StudentDetails(persons);
    }

    private static void StudentDetails(List<Person> people)
    {
        foreach (Person p in people)
        {
            try
            {
                Student s = (Student)p;
                Console.WriteLine(s.ToString());
            }
            catch(InvalidCastException e)
            {
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:20:37.967

你可以做的*可能是*这样的：

不要使用`ArrayList`，但`IEnumerable<Person>`在这种情况下使用，因为所有对象都派生自`Person`抽象类。

```
private static void StudentDetails(Type filter)
{
   var filteredTypes = people.Where(p=>p.GetType() == filter);               
    ....
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-27T13:03:15.140

**首先：**

接口和抽象类之间的主要区别在于您可以在基类中编写方法来为您的代码提供默认行为。众所周知，这在接口中是不可能的，因为在这里你只提供方法签名。

您提供的示例有点可疑，对于这样的实现，您确实使用简单的基类而没有抽象类。要提供基类型的集合或字段，您需要使用可以实例化的基，这是抽象类所不允许的。

**现在你的问题：**

让我们考虑一下。你想要一个不能被实例化的基础对象，但是你想提供这个类的一个集合......你看到了问题。如果您真的想这样做，将有一种方法可以通过许多强制转换和类型检查，但是这样整个想法就没有意义了。更好的方法是实现一个接口，但是这样你就不能提供任何默认行为！

**我的建议：**

对于您的示例，请使用普通类 Person 并让 Student 继承它。您仍然在基础中获得默认的 ToString 方法，并在 Student 类中覆盖它。对于未来的代码。想想你是否：需要你的基础实例（集合、模式等）-> 简单基础或接口

需要默认行为和实例 -> 简单基础

需要实例 没有默认行为 -> 接口

需要默认行为 NO 实例 -> 抽象

当我需要决定如何实现我的课程时，这就是我曾经考虑过的事情。

hth

克里斯托夫

# mysql - 如何将 iso-8601 时间戳转换为 MySQL DATETIME

> ID：11225973
> 
> 赞同：2
> 
> 时间：2012-06-27T12:16:10.803
> 
> 标签：mysql, facebook, datetime, timestamp

我搜索了这种转换并找到了相反的结果。

我正在使用图形 api 提取 facebook 页面提要，它提供的日期格式是 iso-8601。

我需要将其转换为 mysql 时间戳以将其添加到我的数据库中。大多数搜索结果都提供了 mysql 到 iso。

我可以直接转换还是必须转换为 unix 然后 mysql 或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T13:41:44.287

`STR_TO_DATE(str,format)`在更新语句中使用 mysql 函数：

```
 UPDATE [table] SET [field] = STR_TO_DATE([your input date], '%Y-%m-%dT%H:%i:%s+0000'); 
```

该`STR_TO_DATE`函数采用 2 个参数 1) 您的日期字符串和 2) 输出格式，其格式与`mysql DATE_FORMAT()`参见： [http ://dev.mysql.com/doc/refman/5.5/en/date-and -time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date) [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:34:23.307

```
SELECT STR_TO_DATE( '2012-06-25T20:05:13+0000', '%Y-%m-%dT%H:%i:%s+0000' ) 
```

这适用于时区设置为 +0000 的日期（FB Graph API 通常返回什么）。

我需要使用 +0000 以外的时区转换日期*时间*，您可以先拆分该日期字符串，`STR_TO_DATE`在第一部分执行，然后用于`DATE_ADD`添加在第二部分中指定的偏移量。

# ruby-on-rails - PDFkit Gem 在 Rails 中不起作用

> ID：11225975
> 
> 赞同：0
> 
> 时间：2012-06-27T12:16:13.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pdfkit

我已经安装了 PDFKit 和 wkhtmltopdf。我为 wkhtmltopdf 使用了 brew install，对于 PDFkit，我将它添加到我的 gem 文件中并创建了以下内容：

```
# config/initializers/pdfkit.rb
PDFKit.configure do |config|
  config.wkhtmltopdf = '/usr/local/bin/wkhtmltopdf'
  config.default_options = {
    # :page_size => 'Legal',
    # :print_media_type => true
  }
  # config.root_url = "http://localhost" # Use only if your external hostname is unavailable on the server.
end 
```

以及将以下内容添加到 application.rb

```
require 'pdfkit'
config.middleware.use PDFKit::Middleware 
```

当我跑步时，`which wkhtmltopdf`我得到：`/usr/local/bin/wkhtmltopdf`

我也可以运行`wkhtmltopdf google.com google.pdf`，它会正确拉下文件。

我什至可以做类似的事情`wkhtmltopdf http://localhost:3000/about google.pdf`，而且效果很好。

但是，如果我尝试这样做：`http://localhost:3000/about.pdf`并且只是在我的浏览器中去那里，整个网站只会尝试加载并且永远不会完成。但是，我得到以下信息：

```
RuntimeError (command failed: "/usr/local/bin/wkhtmltopdf" "--quiet" "-" "-"):
  pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:71:in `to_pdf'
  pdfkit (0.5.2) lib/pdfkit/middleware.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__1600846312864942852__call__3683691454379641054__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

只是为了确认它在中间件中。

```
rake middleware
use ActionDispatch::Static
use Rack::Lock
use #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x007fc11b9c4a30>
use Rack::Runtime
use Rack::MethodOverride
use ActionDispatch::RequestId
use Rails::Rack::Logger
use ActionDispatch::ShowExceptions
use ActionDispatch::DebugExceptions
use ActionDispatch::RemoteIp
use ActionDispatch::Reloader
use ActionDispatch::Callbacks
use ActiveRecord::ConnectionAdapters::ConnectionManagement
use ActiveRecord::QueryCache
use ActionDispatch::Cookies
use ActionDispatch::Session::CookieStore
use ActionDispatch::Flash
use ActionDispatch::ParamsParser
use ActionDispatch::Head
use Rack::ConditionalGet
use Rack::ETag
use ActionDispatch::BestStandardsSupport
use PDFKit::Middleware
run Teacherjoy::Application.routes 
```

为了让这个工作，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:44:04.967

如果您在系统中使用 rvm，则 pdfkit /usr/local/bin/wkhtmltopdf 的路径不正确。我的本地开发环境系统就是这种情况。

我检查了哪个 wkhtmltopdf 这个命令在我的应用程序目录中返回 2 个路径，如果我使用了我的 gemset，那么我得到一个这样的路径

```
 which wkhtmltopdf
/home/re10/.rvm/gems/ruby-1.8.7-p358@lmft/bin/wkhtmltopdf  (path to the gemset in server) 
```

我在根目录中尝试了相同的命令，然后我得到了一个路径

```
which wkhtmltopdf
/usr/local/bin/wkhtmltopdf 
```

因此，在进入您的项目目录并使用 gemset 之后，尝试安装软件包，该命令的路径 wkhtmltopdf 应该位于您的 rvm 内以及该 gemset 的所有 gem 存储位置内。

请参考这个 stackoverflow 的例子。这对我有用。 **[https://stackoverflow.com/a/5764290/1304966](https://stackoverflow.com/a/5764290/1304966)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:42:13.110

我今天早上尝试了 PDFKit，遇到了同样的无限页面加载问题。我通过添加“config.threadsafe！”来修复它。到我的 application.rb

[此外，我在此 stackoverflow 答案](https://stackoverflow.com/questions/5399458/render-to-string-does-not-find-partials-pdfkit-controller-response)的解决方案的指导下更改了我的代码

# api - 为什么我的 Google Maps API 密钥无效？

> ID：11225980
> 
> 赞同：3
> 
> 时间：2012-06-27T12:16:19.217
> 
> 标签：api, google-maps, key

这是我在这里的第一个问题，我在研究中没有找到答案。

我在一个旧网站（不是我的）上的谷歌地图 API 密钥有问题。tao-yin.com（法国气功协会）。有 2 个月，我为这个网站做了一张地图（在 2 个地方）。

这里：[http ://www.tao-yin.com/arts_classiques_tao/liste_associations.html](http://www.tao-yin.com/arts_classiques_tao/liste_associations.html)

在这里：[http ://www.tao-yin.com/pratique-qi-gong/Cours_stages.htm](http://www.tao-yin.com/pratique-qi-gong/Cours_stages.htm)

一切都很好，有一段时间。这是一张在 UI 事件中访问参数的地图。现在，我了解到，（如您所见）因为密钥无效，所以 2 地图已失效。英文错误信息：

> Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v3。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥： [https ://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key](https://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key)

我很惊讶。为什么密钥不再有效但以前可以？我读到 v2 自 19 日起不再有效，但它是 v3key（已激活）。对于代码（我不是专家），我在互联网上以 v3 为例。

1.  我试图更改密钥并删除旧的：同样的问题
2.  我尝试了 2 个键（一个用于地图）：同样的问题
3.  我试图用另一个（谷歌示例）更改代码 javascript：同样的问题
4.  我试图制作更好的 html 代码：同样的问题

我不知道发生了什么。我想我违反了一条规则，但是哪一条呢？这是为了朋友，为了协会。它是免费的。

有人有想法吗？

我不知道该做什么：我怎样才能在这个网站上放一个 googlemap ？我读到可以直接使用 googlemap 和 iframe，但我需要特定的事件。不仅仅是一个地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:19:52.940

我找到了解决方案，很简单：

问题出在 API 密钥中网站的声明中。

在声明的窗口中，我们在底部有这个例子。

> 示例：*.example.com/*。

但是，在这里： [https](https://developers.google.com/console/help/?hl=fr#restrictingusage) ://developers.google.com/console/help/?hl=fr#restrictingusage URL 模式：不错的选择。这是逻辑。

在我有：“.tao-yin.com/”之前它正在工作（所以我不问更多）但这不合逻辑，因为它不在子域上。

现在一切正常：“www.tao-yin.com”

所以：不要按照谷歌的例子;-) 只是按照说明。谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:54:28.370

Google 地图密钥与引用 URL 主机名相关联。您可能希望自己成为发展的钥匙；他们是免费的。

他们可能（但不太可能）杀死了您朋友的密钥，因为他的站点非常繁忙并且生成的地图请求超出了允许的范围。在这种情况下，我认为他们不会杀死密钥，而只是拒绝请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T18:56:05.343

这个链接也有帮助。它显示了一个表格，其中列出了哪些谷歌地图产品/API 以及使用它们所需的相关键：

[https://developers.google.com/maps/faq#keysystem](https://developers.google.com/maps/faq#keysystem)

# c# - 正则表达式只有几小时或几小时和几分钟

> ID：11225981
> 
> 赞同：2
> 
> 时间：2012-06-27T12:16:22.233
> 
> 标签：c#, java, javascript, .net

我正在使用正则表达式`^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$`来获取时间。这是一个非常好的正则表达式，但是当用户只想输入没有冒号和分钟的 8 或 12 小时时，它是不允许的。任何人都可以建议哪些正则表达式只适合小时或小时：分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:19:30.860

```
^(([0-9])|([0-1][0-9])|([2][0-3]))(:(([0-9])|([0-5][0-9])))?$ 
```

通过放入`()`并添加`?`量词使“：mm”部分成为可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:20:03.543

只需将最后一部分设为可选，如下所示：

```
 ^(([0-9])|([0-1][0-9])|([2][0-3]))(:(([0-9])|([0-5][0-9])))?$ 
```

# javascript - 在同一端口上运行多个 Node (Express) 应用程序

> ID：11225983
> 
> 赞同：59
> 
> 时间：2012-06-27T12:16:25.837
> 
> 标签：javascript, node.js, express

我有多个 Node 应用程序（基于 Express 框架构建）。

现在我把它们像这样放置 -

*   `/var/www/app1`
*   `/var/www/app2`
*   `/var/www/app3`

现在我想在同一个端口（比如 8080）上运行这 3 个应用程序。那可能吗 ？

需要注意的一件事是，每个应用程序都有这样的共同路线 -

*   `app.get('/', func...);`
*   `app.get('/about', func...);`
*   `app.post('/foo', func...);`
*   `app.post('/bar', func...);`

基本上我想像使用 Apache/PHP 设置那样做。

因此，当您拥有 LAMP 堆栈时 -

*   `/var/www/app1`
*   `/var/www/app2`
*   `/var/www/app3`

您可以从以下位置轻松访问它们作为不同的应用程序 -

*   `localhost/app1`
*   `localhost/app2`
*   `localhost/app3`

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-27T14:44:02.170

您可以使用[`app.use()`](http://expressjs.com/en/api.html#app.use)：

```
app
  .use('/app1', require('./app1/index').app)
  .use('/app2', require('./app2/index').app)
  .listen(8080); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-06-27T12:30:48.050

您可以将它们作为单独的应用程序运行，监听不同的端口，然后根据请求的 URL使用代理（如[https://github.com/nodejitsu/node-http-proxy/ ）为 8080 上的所有内容提供服务。](https://github.com/nodejitsu/node-http-proxy/)

喜欢：

```
var options = {
  router: {
    'foo.com/baz': '127.0.0.1:8001',
    'foo.com/buz': '127.0.0.1:8002',
    'bar.com/buz': '127.0.0.1:8003'
  }
}; 
```

对我来说就像魅力一样（[http://nerdpress.org/2012/04/20/hosting-multiple-express-node-js-apps-on-port-80/](http://nerdpress.org/2012/04/20/hosting-multiple-express-node-js-apps-on-port-80/)）。正如评论中所建议的那样，我并不热衷于将它们安装为子应用程序，因为我希望它们独立运行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-28T14:26:39.137

您可以创建一个与您的应用程序并行的主应用程序（例如应用程序），并使用它初始化辅助应用程序（在您的情况下为 app1、app2、app3）

```
app.use('<the_context_you_need>', require('./app1/yourApp.js') 
```

您所有的应用程序（app1、app2、app3）都需要创建应用程序并使用

```
var app = module.exports = express(); 
```

您无需在所有子应用中创建服务器实例或调用 app.listen；所有子应用程序都可以通过主应用程序侦听端口提供服务。

# iphone - 在抓取屏幕截图之前将 UIView 与 UIImageView 合并

> ID：11225987
> 
> 赞同：0
> 
> 时间：2012-06-27T12:16:45.793
> 
> 标签：iphone

我希望将背景（UIImageView）与上层的 UIView（MyView）结合起来，然后对合并后的图像进行截图。我正在使用下面的代码，但背景完全覆盖了我的 UIView ......请问有什么建议吗？

```
UIImageView *ViewToBeAddedAsBackground = BackgroundImageView;    
ViewToBeAddedAsBackground.frame = CGRectMake(0,0,770,410); 
[MyView addSubview:ViewToBeAddedAsBackground];    

UIGraphicsBeginImageContext(MyView.frame.size);
[MyView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *MyView_IMAGE = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(MyView_IMAGE, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:20:42.423

发生这种情况是因为您添加`ViewToBeAddedAsBackground`为`subView`of `yourView`，所以它通常会覆盖它，您应该做的是相反，添加`yourView`为子视图`ViewToBeAddedAsBackground`

接着

```
[insertSubview:ViewToBeAddedAsBackground.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

您可以尝试以下方法，具体取决于您当前的视图继承性，它可以工作

```
[MyView.superview insertSubview:ViewToBeAddedAsBackground belowSubview:MyView];
UIGraphicsBeginImageContext(MyView.frame.size);
[MyView.superview.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

# java - Bitmap.decodeStream 在特定的现有（和工作）图像上返回 null

> ID：11225988
> 
> 赞同：0
> 
> 时间：2012-06-27T12:16:47.477
> 
> 标签：java, android, bitmap

**更新：**

经过一番搜索后，我似乎并不孤单：

[http://code.google.com/p/android/issues/detail?id=6066](http://code.google.com/p/android/issues/detail?id=6066)

[https://groups.google.com/forum/?fromgroups#!topic/android-beginners/dDnHEacrpCE](https://groups.google.com/forum/?fromgroups#!topic/android-beginners/dDnHEacrpCE)

ATM有两种解决方案：

1.（仅在某些情况下有效）在调用静态 decodeStream() 方法之前，实现一个 Thread.sleep(300) （可能睡眠持续时间值必须更高，但 300 ms 对我有用）

2\. 替换以下内容：

```
URL pictureurl = new URL("http://www.somewebsite.com/picture15.jpg");
URLConnection urlConn = pictureurl.openConnection();
urlConn.connect();
InputStream urlStream = urlConn.getInputStream(); 
```

使用以下内容（如 imran khan 建议的那样）：

```
HttpGet httpRequest = new HttpGet();
httpRequest.setURI(new URI("http://www.somewebsite.com/picture15.jpg"));
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
Bitmap bm = BitmapFactory.decodeStream(bufHttpEntity.getContent());
httpRequest.abort(); 
```

因此，我接受 imran khan 的回答，因为它是这篇文章中所有答案中唯一有效的答案。

* * *

我的 Android 应用程序中有以下代码：

```
URL pictureurl = new URL("http://www.somewebsite.com/picture15.jpg");

URLConnection urlConn = pictureurl.openConnection(); // NOT NULL
urlConn.setRequestProperty("Referer", "http://www.somewebsite.com/");
urlConn.connect();
InputStream urlStream = urlConn.getInputStream(); // NOT NULL

Bitmap bm = BitmapFactory.decodeStream(urlStream);
Bitmap bm2 = Bitmap.createScaledBitmap(bm, 100, 100, true);

imageView.setImageBitmap(bm2); 
```

方法“decodeStream()”返回null，当我使用来自某个网​​站的某个图像**但当我在浏览器中加载图像时它显示得很好。我可以使用来自其他网站的其他图像，这些图像会导致方法“decodeStream()”返回预期的位图实例。**

我注意到“decodeStream()”方法的方法解释中有以下文字：

“*如果输入流为空，或者不能用于解码位图，则函数返回空*” - 我的输入流**不为空**！

下图导致方法“decodeStream()”返回 null：

[http://i45.tinypic.com/eah2d2.jpg](http://i45.tinypic.com/eah2d2.jpg)

下图导致方法“decodeStream()”返回预期的位图实例：

[https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Wiktionary_small.svg/350px-Wiktionary_small.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Wiktionary_small.svg/350px-Wiktionary_small.svg.png)

我使用的是安卓 1.5。

这是 Android/Java 环境中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:30:13.003

尝试以下：

```
HttpGet httpRequest = new HttpGet();
httpRequest.setURI(new URI("http://www.somewebsite.com/picture15.jpg"));
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
Bitmap bm = BitmapFactory.decodeStream(bufHttpEntity.getContent());
httpRequest.abort(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:32:43.343

```
You need to pass BufferedInputStream.

BufferedInputStream bis = new BufferedInputStream( is );
bmp = BitmapFactory.decodeStream( bis ); 
```

所以你的解码流的代码将是。

InputStream urlStream = urlConn.getInputStream(); // 非空

```
BufferedInputStream bis = new BufferedInputStream( urlStream );
Bitmap bm = BitmapFactory.decodeStream(bis);
Bitmap bm2 = Bitmap.createScaledBitmap(bm, 100, 100, true); 
```

# html - HTML5 元素类别术语

> ID：11225992
> 
> 赞同：0
> 
> 时间：2012-06-27T12:17:04.403
> 
> 标签：html

在 HTML5 中不再存在内联、块和替换元素之间的区别，但还有其他类别，例如：流、短语等，有时会重叠。

那么我怎么知道一个 HTML5 元素是内联的、阻塞的还是替换的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:15:41.040

这取决于你的 CSS，哪个元素的样式是什么。每个浏览器供应商都包含一个默认样式表，可以被其他几个样式表覆盖。尝试查找浏览器默认 CSS 以大致了解哪些元素被设置为块元素。

# ruby - 我可以在我的 Rspec 测试中设置“it”的值吗？

> ID：11225994
> 
> 赞同：2
> 
> 时间：2012-06-27T12:17:12.547
> 
> 标签：ruby, validation, rspec

在一些 Rspec 模型规范中，我们有几个这样的测试：

```
it { should have_many(:labels) } 
```

不幸的是，我们还有一个在验证之前运行的钩子，当对象尚未设置时会导致错误。

我可以为这些测试设置“它”的值吗？我想给它一个正确初始化的对象，这样我的预验证钩子就不会引起问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:25:09.763

像这样？

```
describe "#validations" do
    subject { Factory.build :some_model }
    it { should have_many(:labels) }
end 
```

# javascript - 如何使用 html5 和 javascript 在鼠标单击事件上创建图像

> ID：11225997
> 
> 赞同：0
> 
> 时间：2012-06-27T12:17:27.833
> 
> 标签：javascript, html, canvas

我是 html5 的新手，我想在点击事件上创建一个点状图像。我尝试使用上下文，但不幸的是没有工作。我正在使用的代码是

```
 document.addEventListener("DOMContentLoaded", init, false);

      function init()
      {
        var canvas = document.getElementById("options");
        canvas.addEventListener("mousedown", getPosition, false);
      }

      function getPosition(event)
      {
        var x = new Number();
        var y = new Number();
        var canvas = document.getElementById("options");

        if (event.x != undefined && event.y != undefined)
        {
          x = event.x;
          y = event.y;
        }
        else // Firefox method to get the position
        {
          x = event.clientX + document.body.scrollLeft +
              document.documentElement.scrollLeft;
          y = event.clientY + document.body.scrollTop +
              document.documentElement.scrollTop;
        }

        x -= canvas.offsetLeft;
        y -= canvas.offsetTop;

        alert("x: " + x + "  y: " + y);
           var b_canvas = document.getElementById("b");
    var b_context = b_canvas.getContext("2d");
    b_context.fillRect(50, 25, 150, 100); 
```

请建议我在哪里做错了。提出你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:00:17.937

不确定这是否是问题所在，但要在画布上绘制一个点，您可以开始一条路径，绘制一个完全闭合的弧（从 0 rad 到 2pi rad）并填充它：

```
 b_context.beginPath();
     b_context.arc(x, y, 5 , 0,  2 * Math.PI,true);
     b_context.fillStyle = "blue";
     b_context.fill(); 
```

此外，重要的是直接在画布上设置宽度和高度，而不是在 css 中以防止失真。（我自己发现了；））完整的小提琴示例：http: [//jsfiddle.net/wHsMJ/](http://jsfiddle.net/wHsMJ/) （单击右侧的矩形内进行测试）