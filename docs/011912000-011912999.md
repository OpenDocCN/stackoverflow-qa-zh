# StackOverflow 问答 11912000-11912999

# iphone - 我如何知道 nsoperation queue 何时完成所有请求以便我可以重新加载我的 tableview？

> ID：11912000
> 
> 赞同：4
> 
> 时间：2012-08-11T04:50:40.697
> 
> 标签：iphone, objective-c, ios5, asihttprequest, nsoperationqueue

我正在使用 ASIHTTPRequest 和 NSOperationQueue 从不同的链接下载数据

在后台线程中下载。当请求完成时，我使用 requestFinished 解析

ASIHTTPRequest 的委托方法。当所有请求都在时，我想更新 tableview 中的数据

队列已完成。有什么方法可以知道 NSOperationQueue 何时处理了所有

要求？我的意思是队列有任何变量，如“isEmpty”或任何委托方法，如“queueDidCompletedAllOperation”？

请帮忙。

这是代码：

```
//source

@interface SourceModel : NSObject

@property (nonatomic, retain) NSString * link;

@property (nonatomic, retain) NSString * name;

@end

//for rssGroup

@interface CompleteRSSDataModel : NSObject

@property (nonatomic,strong) SourceModel * source;

@property (nonatomic,strong) KissXMLParser * parser;

@property (nonatomic,strong) NSArray * rssArticles;

@end

- (void)viewDidLoad
{
       for (int index=0; index<[rssGroups count]; index++) {

            NSString * urlString = [[[rssGroups objectAtIndex:index] source] link];

            NSURL *url = [NSURL URLWithString:urlString];

            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url]; [request setDelegate:self];

            //set this request's tag to group index of this source(link). See requestFinished for use of this :)
            [request setTag:index];

            [self.queue addOperation:request];
        }

}

- (void)requestFinished:(ASIHTTPRequest *)request {

    NSLog(@"%@",@"RSS Data got from internet successfully :))");

    int groupIndex = [request tag];

    CompleteRSSDataModel * group = [rssGroups objectAtIndex:groupIndex];

    group.parser = [[KissXMLParser alloc]initWithData:[request responseData]];

    if (group.parser == nil) {

        NSLog(@"%@",@"Failed - Error in parsing data :((");
    }

    else {
        NSLog(@"%@",@"Data Parsed successfully :))");

        group.rssArticles = [group.parser itemsInRss];

        //So i want to check here that queue is empty, reload data, but as my information, i don't know any method like hasCompletedAllRequested 

        //if(self.queue hasCompletedAllRequests) {

        //     [self.tableview reloadData];
        //}

    }
}

- (void)requestFailed:(ASIHTTPRequest *)request {

    NSLog(@"%@",@"Error in Getting RSS Data from internet:((");

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T05:27:17.480

如果所有操作都已完成，则`operations`数组计数将为零。

要检查这一点，您可以使用键值观察编码来`operations`观察`NSOperationQueue`

为键设置观察者`opertions`如下：

```
[self.queue addObserver:self forKeyPath:@"operations" options:0 context:NULL]; 
```

然后在您的 observeValueForKeyPath 中执行此操作，如下所示：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object 
                         change:(NSDictionary *)change context:(void *)context
{
    if (object == self.queue && [keyPath isEqualToString:@"operations"]) {
        if ([self.queue.operations count] == 0) {
            // Do something here when all operations has completed
            NSLog(@"queue has completed");
        }
    }
    else {
        [super observeValueForKeyPath:keyPath ofObject:object 
                               change:change context:context];
    }
} 
```

在 iOS 4.0 之后，您可以使用属性`operationCount`like`self.queue.operationCount == 0`而不是像这样检查`[self.queue.operations count] == 0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:15:35.317

我知道这已经得到解答，但是对于未来的读者，如果您使用的是**AFNetworking**，更具体地说是**AFHTTPRequestOperation** ，您可以执行以下操作：

```
NSString *urlPath = [NSString stringWithFormat:@"%@%@", baseUrl, file];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlPath]];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:
 ^(AFHTTPRequestOperation *operation, id responseObject) {
   if ([[queue operations] count] ==0) {
       NSNotification * success = [NSNotification notificationWithName:@"TotalDone" object:[NSNumber numberWithBool: YES]];
      [[NSNotificationCenter defaultCenter] postNotification:success];
      queueSize = 0;
   } else {

       //get total queue size by the first success and add 1 back
       if (queueSize ==0) {
           queueSize = [[queue operations] count] +1.0;
       }
       float progress = (float)(queueSize-[[queue operations] count])/queueSize;
       NSNumber * totProgress = [NSNumber numberWithFloat:progress];
       NSNotification * totalProgressNotification = [NSNotification notificationWithName:@"TotalProgress"
                                                                                           object:totProgress];
       [[NSNotificationCenter defaultCenter] postNotification:totalProgressNotification];
   }

} failure:^(AFHTTPRequestOperation *operation, NSError *error) 
        NSLog(@"Error: %@", error);
        }]; 
```

这适用于将下载添加到 NSOperationQueue 的下载器，然后通知两个进度条：1 个用于文件进度，1 个用于总进度。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:13:01.453

我有几个选择：

1.  改用`ASINetworkQueue`和 set `queueDidFinishSelector`，所以它会告诉你什么时候完成。这也使您有机会不仅更新`UIProgressView`单个行的视图，还可以更新整个下载过程的另一个视图。

2.  你能添加一些东西来`NSOperationQueue`简单地调用一个方法来更新你的 UI（当然是在主队列中）吗？通过将它添加到队列中，它不会到达它，直到它清除队列。或者在另一个队列中调用`waitUntilFinished`，此时您可以更新您的 UI。

3.  查看您的评论，您似乎正在更新您的 UI `requestFinished`，但不满意，因为您认为等待所有更新发生可能会更好。就个人而言，我更喜欢逐个请求更新 UI，这样如果速度很慢，你会得到临时反馈，而不是等待一切。这必须优雅地完成，但我喜欢在进行过程中更新 UI。诚然，有些流程不适合这样做。

关于最后一点，我认为诀窍是进行这些更新，以免分散注意力。具体来说，如果您的 UI 是 a `UITableView`，您可能*不想*执行 a `tableView.reloadData`，这将重新加载整个表格。相反，您可能想检查单元格是否仍在加载（通过方法`cellForRowAtIndexPath`，不要与方法`UITableView`混淆），如果是，则更新该行，例如：`UITableViewController``tableView:cellForRowAtIndexPath`

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
if (cell)
{
    // you can either update the controls in the cell directly, or alternatively, just
    // call reloadRowsAtIndexPaths to have the tableView use your data source:

    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                          withRowAnimation:UITableViewRowAnimationFade];
} 
```

# java - Java EE 6、EJB 3.1、JPA 2.0 - 在数据库中插入记录时出错

> ID：11912002
> 
> 赞同：0
> 
> 时间：2012-08-11T04:51:34.923
> 
> 标签：java, jpa-2.0, java-ee-6, ejb-3.1

我正在尝试在数据库中插入一条记录（使用 Java EE 6、EJB 3.1、JPA 2.0）。我收到 accountTypeId 字段为空的错误，但我已将其设置为自动生成。谁能建议我做错了什么？

以下是创建表查询：

```
create table example.account_type(
    account_type_id INT NOT null PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
    account_type_desc varchar(20)
); 
```

以下是实体类：

编辑：更新了 NetBeans 生成的实体类，但它不起作用。我还添加了 @GeneratedValue 注释，但它仍然没有工作。

```
@Entity
@Table(name = "ACCOUNT_TYPE")
@NamedQueries({
    @NamedQuery(name = "AccountType.findAll", query = "SELECT a FROM AccountType a"),
    @NamedQuery(name = "AccountType.findByAccountTypeId", query = "SELECT a FROM AccountType a WHERE a.accountTypeId = :accountTypeId"),
    @NamedQuery(name = "AccountType.findByAccountTypeDesc", query = "SELECT a FROM AccountType a WHERE a.accountTypeDesc = :accountTypeDesc")})
public class AccountType implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ADDED THIS LINE
    @Basic(optional = false)
    @NotNull
    @Column(name = "ACCOUNT_TYPE_ID")
    private Integer accountTypeId;
    @Size(max = 50)
    @Column(name = "ACCOUNT_TYPE_DESC")
    private String accountTypeDesc;

    public AccountType() {
    }

    public AccountType(Integer accountTypeId) {
        this.accountTypeId = accountTypeId;
    }

    public Integer getAccountTypeId() {
        return accountTypeId;
    }

    public void setAccountTypeId(Integer accountTypeId) {
        this.accountTypeId = accountTypeId;
    }

    public String getAccountTypeDesc() {
        return accountTypeDesc;
    }

    public void setAccountTypeDesc(String accountTypeDesc) {
        this.accountTypeDesc = accountTypeDesc;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (accountTypeId != null ? accountTypeId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof AccountType)) {
            return false;
        }
        AccountType other = (AccountType) object;
        if ((this.accountTypeId == null && other.accountTypeId != null) || (this.accountTypeId != null && !this.accountTypeId.equals(other.accountTypeId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "Entities.AccountType[ accountTypeId=" + accountTypeId + " ]";
    }

} 
```

以下是会话 bean 接口：

```
@Remote
public interface AccountTypeSessionBeanRemote {
    public void createAccountType();
    public void createAccountType(String accDesc);
} 
```

以下是会话 bean 实现类：

```
@Stateless
public class AccountTypeSessionBean implements AccountTypeSessionBeanRemote {
    @PersistenceContext(unitName="ExamplePU")
    private EntityManager em;

    @Override
    public void createAccountType(String accDesc) {
        AccountType emp = new AccountType(accDsc);
       try {
           this.em.persist(emp);
           System.out.println("after persist");
       } catch(Exception ex) {
           System.out.println("ex: " + ex.getMessage());
       }
    }
} 
```

以下是主类：

```
public class Main {
    @EJB
    private static AccountTypeSessionBeanRemote accountTypeSessionBean;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        accountTypeSessionBean.createAccountType("test");
    }
} 
```

以下是错误：

```
INFO: ex: Object: Entities.AccountType[ accountTypeId=null ] is not a known entity type. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:09:51.033

由于“accountTypeId 字段为空”，您没有收到错误消息。正如错误消息所述，发生错误是因为“Entities.AccountType[accountTypeId=null] 不是已知的实体类型”。

最可能的原因是没有用[@Entity](http://docs.oracle.com/javaee/6/api/javax/persistence/Entity.html)`AccountType`注释。这个问题很可能通过添加它来解决。此外，使用它是有意义的

```
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

而不是自动。自动意味着提供者根据目标数据库的能力选择策略。根据表定义，显然首选策略是 IDENTITY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:14:48.613

我改变了我`create table query`的如下：

```
create table example.account_type(
    account_type_id INT NOT null PRIMARY KEY,
    account_type_desc varchar(20)
); 
```

然后必须将以下行添加到实体类（Netbeans 没有添加）：

```
@GeneratedValue(strategy = GenerationType.AUTO) 
```

# javascript - Twitter Bootstrap - 带有动态变化插入的工具提示

> ID：11912004
> 
> 赞同：0
> 
> 时间：2012-08-11T04:52:00.463
> 
> 标签：javascript, jquery, twitter-bootstrap, tooltip, tipsy

也许我试图最大限度地利用工具提示功能，但我喜欢工具提示的风格，并且不希望添加另一个 JS 库。

[Fiddle](http://jsfiddle.net/nosfan1019/kZLPR/2/)应该很容易解释，但我试图让它在工具提示显示时插入元素可以随 JS 更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:03:45.350

这是一个委托问题。Twitter 引导工具提示使用动态元素进入 DOM，并离开 DOM。这意味着该元素在 DOM 准备就绪时不可用。

这就是 jQuery 的事件委托大放异彩的地方。

```
$(document).on('click', '.insert', function() {
    $(this).css('height', '200px');
}); 
```

这个想法是将点击处理程序附加到静态父元素。这样，我们可以确保在选择器范围内的所有当前和未来元素上调用方法，在这种情况下是`'.insert'`

# vb.net - Visual Basic 文本框行数

> ID：11912005
> 
> 赞同：1
> 
> 时间：2012-08-11T04:52:23.860
> 
> 标签：vb.net

在 VB.NET 中，我想找出在多行文本框中可以容纳多少整行文本。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T06:52:33.857

考虑到 WPF TextBox 控件没有 Multiline 属性，这大概适用于 WinForms 应用程序。

要确定给定大小（TextBox 控件的尺寸）可以容纳多少文本，我建议使用[TextRenderer.MeasureText](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.measuretext.aspx)方法来确定单个字符的高度。将 TextBox 控件的高度除以字符的高度以获得一次可见的行数。

请记住，字符的测量值可能会有很大差异，以至于星号 (*) 的测量值可能非常小，而八角形 (#) 的测量值可能要大得多。然而，MSDN 页面似乎声明，只要您使用`MeasureText(String, Font)`而不是任何其他重载，这不是问题。

# forms - 在 Dojo 中不惜一切代价阻止表单提交

> ID：11912009
> 
> 赞同：0
> 
> 时间：2012-08-11T04:53:13.903
> 
> 标签：forms, dojo

我正在开发一个简单的 Dojo 应用程序。我的表格有点问题。我有这样的表格：

```
<form data-dojo-type="dijit.form.Form" data-dojo-attach-point="loginForm" method="POST">
      <label for="${id}_login">Login</label>
      <input name="login" id="${id}_login" data-dojo-attach-point="login" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required:true"/>
      <label for="${id}_password">Password</label>
      <input name="password" id="${id}_password0" data-dojo-attach-point="password" data-dojo-type="app.ValidationPassword" />
      <input type="submit" data-dojo-attach-point="loginButton" data-dojo-type="app.BusyButton" label="Login!" />
</form> 
```

在我的应用程序中：

```
 this.loginForm.onSubmit = function(e){

   // Do Ajax calls etc.
   // ..

   // Prevents actual submission
   return false;
 } 
```

但是，如果在“返回 false”之前 Javascript 出现*任何*问题，则表单*实际上*已提交，这会导致错误（我的节点应用程序将返回`Cannot POST /login`，因为没有为该 URL 定义 POST 操作）。

我怎样才能 1000% 确保表格在**任何**情况下都不会被提交？我知道我*可以*完全摆脱这个标签，因为我用 Ajax 做所有事情，但是......那么我就不会得到很好`data = that.loginForm.getValues();`的例子。（我的意思是，它毕竟*是一种形式）*

（注意：我真的对非 javascript 降级不感兴趣。该应用程序是一个 1 页的 ajax 应用程序，如果用户没有 AJAX，那么让它工作毫无意义））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:55:37.583

`preventDefault`将阻止浏览器执行默认操作（即：提交）。

```
this.loginForm.onSubmit = function(e){
  e.preventDefault();

  // Do Ajax calls etc.
  // ..
} 
```

请参阅[此处](http://dojotoolkit.org/reference-guide/1.7/quickstart/events.html#the-event-object)了解更多信息。

# php - 解析到一个新的 url

> ID：11912011
> 
> 赞同：0
> 
> 时间：2012-08-11T04:53:48.267
> 
> 标签：php, term

我在阅读文档时得到了这个词。..这个方法的作用是它会**解析**为我们的主题文件夹所在的相对路径。我在在线词典上找到了resolve的定义，发现它们都没有结构：“resolve to + noun”，有人可以告诉我这个上下文中的“resolve to”是什么意思吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:58:59.233

在这种情况下，将“解决”视为“翻译为”。

# java - SmartFoxServer 2x 使用 sfsApi，NullPointerException

> ID：11912013
> 
> 赞同：0
> 
> 时间：2012-08-11T04:54:01.460
> 
> 标签：java, smartfoxserver

我只是想在我的 UserJoinedRoomHandler 中设置一个房间变量（将用户名添加到房间变量）：来自我的 JAVA 扩展：

```
public class UserJoinedRoomHandler extends BaseServerEventHandler
{
    @Override
    public void handleServerEvent(ISFSEvent arg0) throws SFSException
    {
        User user = (User) arg0.getParameter(SFSEventParam.USER);
        Room room = (Room) arg0.getParameter(SFSEventParam.ROOM);
        trace("add p1 = " + user.getName() + " to room=" + room.getId());
        List<RoomVariable> listOfVars = new ArrayList<RoomVariable>();
        listOfVars.add( new SFSRoomVariable("player1Name", user.getName()) );
        ((MyExtension) getParentExtension()).sfsApi.setRoomVariables(user, room, listOfVars);   // NullPointerException here :(
    }
} 
```

注意，我在 MyExtention init() 函数中获取 sfsAPI：

```
ISFSApi sfsApi = SmartFoxServer.getInstance().getAPIManager().getSFSApi(); 
```

对我来说这应该可行，我唯一能想到的是房间可能没有完全初始化（用户在触发此事件之前刚刚创建了房间）。但无论如何，我认为这应该是一个微不足道的场景，但它已经花费了我好几个小时。

为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:38:42.620

解决方案是直接使用 Api：

((MyExtension) getParentExtension()).getApi().setRoomVariables(user, room, listOfVars);

PS：不幸的是，没有办法发布 1 个房间变量。您必须提交一个列表，即使它只有 1 个长度。

# java - 在 JPA 中创建外键 ON UPDATE CASCADE (eclipselink)

> ID：11912014
> 
> 赞同：2
> 
> 时间：2012-08-11T04:54:07.883
> 
> 标签：java, database, jpa, jpa-2.0, eclipselink

我正在使用 CascadeType.MERGE 但生成的 sql 在外键中不包含任何 ON UPDATE 。这是我的代码

```
@Entity
public class Address {
    @Id
    private int id;

    private String address;
}

@Entity
public class Employee {
    @Id
    private int empId;

    @OneToOne(cascade = CascadeType.MERGE)
    private Address address;
} 
```

这里有什么遗漏吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:27:43.487

CascadeType.MERGE 是一个 JPA 构造，它告诉提供者当您在 Employee 上调用 merge 以及在引用的 Address 上调用 merge 时会发生什么。

ON UPDATE CASCADE 是一个似乎与 CascadeType.merge 没有任何关系的数据库设置。如果引用的主键更改，它会导致数据库更新外键。由于不允许在 JPA 中更改主键，因此此设置没有意义。如果您有可能需要更改的自然 pk，建议您对唯一标识符使用测序。

# menu - 何时使用 CCScene 与 CCLayer？

> ID：11912015
> 
> 赞同：0
> 
> 时间：2012-08-11T04:54:39.867
> 
> 标签：menu, cocos2d-iphone, cclayer, ccmenuitem

我是一个 UI 爱好者——我游戏中的每个“屏幕”都应该在它出现或消失时转换进/出。因为我的游戏在资源方面很简单，所以我想我只需让每个“屏幕”成为 CCLayer 并为转换定义一个函数，将所有内容留在内存中。结果比我预想的要复杂。

我想我现在有两个主要问题：

1）每个“屏幕”都是一个CCLayer。这看起来不错，但我似乎无法停止接收触摸事件，即使它们处于非活动状态。子精灵似乎不尊重 isTouchEnabled 属性，所以我一直在点击不可见的按钮。

2）我写了一个自定义按钮类，它基本上是一个带有一些单独的状态纹理的精灵。它使用 CCTargetedTouchDelegate 协议。我认为这是上述问题的很大一部分。

我不太清楚 CCMenu 的东西。是否有教程或文档可以更好地解释其设计目的以及如何使用它？cocos2d 的文档根本没有讨论每个类的作用，这使得正确使用该库变得更加困难。另外，我什么时候应该使用场景而不是图层？我可以编写自定义过渡吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:08:51.720

我发现，如果您在单个场景中有多个菜单层，例如主菜单（对于加载游戏、新游戏等，比整个场景更简单），如果您将所有按钮添加为该层的孩子；然后要阻止它们接收触摸，只需在不使用时将图层移出屏幕即可。这是一个例子。

```
[loadLayer setPosition:CGPointMake(-1000,-1000)];
[settingsLayer setPosition:CGPointMake(-1000,-1000)];
[menuLayer setPosition:CGPointMake(0,0)]; 
```

每次你选择一个按钮，让你说加载游戏层，只需将其反转为正确的层。

```
[loadLayer setPosition:CGPointMake(0,0)];
[settingsLayer setPosition:CGPointMake(-1000,-1000)];
[menuLayer setPosition:CGPointMake(-1000,-1000)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:45:02.757

使用 CCScenes 做菜单更方便。非活动 CCScene 的所有子节点都不会收到触摸事件，因此您不必管理该行为。CCScenes 也有内置的过渡，比如交叉淡入淡出，但如果你像我一样，你可能只想运行一个动作来使场景过渡出来，然后调用 CCDirector:replaceScene。

# iis-6 - IIS6：不允许某些 URL 模式

> ID：11912021
> 
> 赞同：1
> 
> 时间：2012-08-11T04:55:42.133
> 
> 标签：iis-6, urlscan

我们的旧版 ASP.NET 2.0 网站在 Windows 2003 Server 上的 IIS6 中运行，接受大量用户上传和用户可下载的文件。不是页面内容；主要是 PDF 和 PNG 等资产文件。但是，当然建议不要让顽皮的虫子上传 ASPX 文件并突然能够在我们的服务器上执行代码。

所以......你会认为我们可以在用户上传文件结束的适当文件夹中设置“执行权限：无”，这就是它的结束。唉。

用户上传的文件最终保存在以下列模式命名的文件夹中：（nnnn、kkkk 和 llll 代表不同长度的数字字符串）

```
/sites/nnnn/files/ftp
/sites/nnnn/files/orders/kkkk/llll
/sites/nnnn/files/proofs
/sites/nnnn/files/webFiles 
```

但是......还有一些 CSS 文件存储在如下文件夹中：

```
/sites/nnnn/files/skins/kkkk/*.css 
```

CSS 文件实际上被解释为 ASPX 代码，因此可以在查询字符串中传递调色板替换，如下所示：

```
/sites/2132/skins/83/layout.css?palette=cc33dd,aa22bb,1155ff 
```

因此，“执行权限：无”在 /sites 级别是禁止的。而且我真的宁愿不在 /sites/nnnn/files 中单独为几千 nnnn 执行此操作。

所以有人告诉我 URLScan 3.1 是票，但是在盯着文档一两个小时后，我比以往任何时候都更加困惑。

有任何想法吗？

# c++ - 区分函数重载和函数覆盖

> ID：11912022
> 
> 赞同：51
> 
> 时间：2012-08-11T04:56:22.560
> 
> 标签：c++, overloading, overriding

区分 C++ 中的函数重载和函数覆盖？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-11T04:59:47.643

在 C++ 中重载方法（或函数）是定义同名函数的能力，只要这些方法具有不同的签名（不同的参数集）。方法重写是继承类重写基类的虚方法的能力。

a）在重载中，同一类中可用的方法之间存在关系，而在覆盖中，超类方法和子类方法之间存在关系。

(b) 重载不会阻止从超类继承，而重写会阻止从超类继承。

(c) 在重载中，不同的方法共享相同的名称，而在重写中，子类方法替换超类。

(d) 重载必须有不同的方法签名，而重写必须有相同的签名。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-11T05:02:25.287

当您想要具有不同参数的**相同函数时，会完成函数重载**

```
void Print(string s);//Print string
void Print(int i);//Print integer 
```

函数重写是为了给基类中的函数赋予不同的含义

```
class Stream//A stream of bytes
{
public virtual void Read();//read bytes
}

class FileStream:Stream//derived class
{
public override void Read();//read bytes from a file
}
class NetworkStream:Stream//derived class
{
public override void Read();//read bytes from a network
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-11T05:19:11.103

当您更改方法签名中参数的原始类型时，您正在实施重载。

当您更改派生类中方法的原始实现时，您正在放置一个覆盖。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-03-16T16:49:30.623

重载意味着对具有相同参数的现有函数给出不同的定义，而重载意味着对具有不同参数的现有函数添加不同的定义。

例子：

```
#include <iostream>

class base{
    public:
    //this needs to be virtual to be overridden in derived class
    virtual void show(){std::cout<<"I am base";}
    //this is overloaded function of the previous one
    void show(int x){std::cout<<"\nI am overloaded";} 
};

class derived:public base{
    public:
    //the base version of this function is being overridden
    void show(){std::cout<<"I am derived (overridden)";}
};

int main(){
    base* b;
    derived d;
    b=&d;
    b->show();  //this will call the derived overriden version
    b->show(6); // this will call the base overloaded function
} 
```

输出：

```
I am derived (overridden)
I am overloaded 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-04-24T18:37:33.747

1.函数重载是当一个类中存在多个同名函数时。函数覆盖是指函数在基类和派生类中具有相同的原型。

2.函数重载可以在没有继承的情况下发生。当一个类继承自另一个类时，就会发生函数覆盖。

3.重载的函数要么参数数量不同，要么参数类型不同。在重写的函数参数必须相同。

有关更多详细信息，您可以访问下面的链接，您可以在其中获得有关 c++ 中的函数重载和覆盖的更多信息 [https://googleweblight.com/i?u=https://www.geeksforgeeks.org/function-overloading-vs-function-覆盖-in-cpp/&hl=en-IN](https://googleweblight.com/i?u=https://www.geeksforgeeks.org/function-overloading-vs-function-overriding-in-cpp/&hl=en-IN)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-15T19:44:53.553

函数重载是同名函数，但参数不同。函数覆盖意味着同名函数和参数相同

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-13T16:21:17.883

`Function overloading`- 具有相同名称但参数数量不同的函数

`Function overriding`- 继承的概念。具有相同名称和相同数量参数的函数。据说第二个函数覆盖了第一个函数

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-22T08:39:52.250

在重载具有不同参数的具有相同名称的函数中，而在具有相同名称和相同参数的覆盖函数中，将基类替换为派生类（继承类）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-31T10:35:08.943

函数重载可能具有不同的返回类型，而函数覆盖必须具有相同或匹配的返回类型。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-08T09:20:40.067

重载意味着拥有相同名称但不同签名的方法覆盖意味着重写基类的虚拟方法......

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-10-08T02:32:57.180

除了现有的答案之外，覆盖的函数在不同的范围内；而重载的函数在同一范围内。

# c# - 如何在不使用 MEF 导入的情况下将参数传递给构造函数？

> ID：11912023
> 
> 赞同：0
> 
> 时间：2012-08-11T04:56:22.737
> 
> 标签：c#, export, prism, mef, factory

我正在与 MEF 合作。我正在观看来自 PRISM 的名为 MVVM RI 的演示，该程序的一部分具有以下代码：

```
 /// <summary>
    /// Factory class to create a question view model for a given question object.
    /// </summary>
    private static class QuestionViewModelFactory
    {
        private static Dictionary<Type, Func<Question, QuestionViewModel>> maps = new Dictionary<Type, Func<Question, QuestionViewModel>>()
        {
            { typeof(OpenQuestion), (q) => new OpenQuestionViewModel((OpenQuestion)q) },
            { typeof(MultipleSelectionQuestion), (q) => new MultipleSelectionQuestionViewModel((MultipleSelectionQuestion)q) },
            { typeof(NumericQuestion), (q) => new NumericQuestionViewModel((NumericQuestion)q) }
        };

        public static QuestionViewModel GetViewModelForQuestion(Question question)
        {
            Func<Question, QuestionViewModel> viewModelInstanceFactory = null;
            if (maps.TryGetValue(question.GetType(), out viewModelInstanceFactory))
            {
                return viewModelInstanceFactory(question);
            }
            else
            {
                throw new ArgumentOutOfRangeException("Could not locate a view model for question type");
            }
        }
    }

    // Note that each class derived QuestionViewModel needs a constructor parameter to be created.
public abstract class QuestionViewModel : NotificationObject 
{ 
    protected QuestionViewModel() { ... } 
} 

public abstract class QuestionViewModel<T> : QuestionViewModel 
    where T : Question 
{ 
    protected QuestionViewModel(T question) { ... } 
} 
```

在我的软件中，我需要这个功能，但现在我想通过发现来完成。

一开始，我正在考虑创建一个自定义导出以仅存储`QuestionViewModel`并存储为`contractName`问题类型模型。检查这个。

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class ExportViewModelForProblemAttribute : ExportAttribute
{
    public ExportViewModelForProblemAttribute(Type viewModelType, Type questionType)
        : base(questionType.ToString(), typeof(QuestionViewModel))
    {
    }
} 
```

但是后来我说，我怎样才能通过构造函数传递对象？`q`这个想法是在不使用 Import的情况下传递对象。但我在这部分迷路了。

```
public class ProblemViewModelFactory
{
    private readonly CompositionContainer container;

    [ImportingConstructor]
    public ProblemViewModelFactory(CompositionContainer container)
    {
        this.container = container;
    }

    public QuestionViewModelFactory GetQuestionViewModelFactory(Question question)
    {
        // what can I do to return the correspond view model with the question inside?
    }
} 
```

我能做些什么来实现这个映射并传递参数？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:17:30.337

使用 MEF 的 Silverlight 变体，我们可以包含一个名为`ExportFactory<T, TMetadata>`. 这种类型的作用是在我们每次调用`CreateExport()`它时启动该类型的一个新实例，但它还包含有关该部件的一些附加信息（元数据）。

现在，您当前正在做的是使用问题名称作为合同名称导出问题视图模型。这不会使获取所有`QuestionViewModel`类型的实例变得容易，因此，您应该继续导出为`QuestionViewModel`并将一些元数据附加到类型，因此在这种情况下，您需要一个 name 属性，因此我们可以定义我们的元数据合同为：

```
public interface INameMetadata
{
  string Name { get; }
} 
```

现在，让我们对导出属性进行修改：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
[MetadataAttribute]
public class ExportQuestionAttribute : ExportAttribute, INameMetadata
{
  public ExportQuestionAttribute(string name)
    : base(typeof(QuestionViewModel))
  {
    this.Name = name;
  }

  public string Name { get; private set; }
} 
```

我已将导出属性类型更改为仅使用`type`参数调用基本构造函数，而是将 的值存储`name`在 property`Name`中。您实际上不需要使用我们的元数据合约来装饰您的导出属性`INameMetadata`，但我更喜欢这样做，因为它可以确保在我导出时，我会在编译时检查我是否提供了所有必需的元数据。

接下来，我们可以对我们的消费者类型进行修改：

```
[Export]
public class ProblemViewModelFactory
{
  private readonly IEnumerable<ExportFactory<Question, INameMetadata>> _questionFactories;

  [ImportingConstructor]
  public ProblemViewModelFactory(
    [ImportMany] IEnumerable<ExportFactory<Question, INameMetadata>> questionFactories)
  {
    if (questionFactories == null)
      throw new ArgumentNullException("questionFactories");

    _questionFactories = questionFactories;
  }

  public QuestionViewModel GetQuestionViewModel(string name)
  {
    return _questionFactories
      // Get matching question factories
      .Where(q => q.Metadata.Name == name)
      // Select the exported value
      .Select(q => q.CreateExport().Value)
      // First or default - what if the question doesn't exist?
      .FirstOrDefault();
  }
} 
```

现在，我们以几种方式修改了这部分。

首先，我们只接受 an 的一个实例`IEnumerable<ExportFactory<QuestionViewModel, INameMetata>>`，它是我们的零件工厂集合。这应该包含已导出的每种类型问题的工厂。导入部分是`GetQuestionViewModel`方法（我假设您想要返回`QuestionViewModel`，而不是`QuestionViewModelFactory`）。该`ExportFactory`类型负责启动一个新实例，并且因为它属于 type `ExportFactory<QuestionViewModel, INameMetadata>`，所以它有一个属于 type 的`Metadata`属性，`INameMetadata`我们可以在创建零件之前查询该属性。

最后一个方法将查询可用工厂的集合，检查`Name`每个`INameMetadata`实例的属性，并返回匹配的问题，或者`null`如果找不到一个问题。它还将忽略多个同名问题，并仅选择第一个（此设计决定将由您决定）。

我希望这能为您指明正确的方向。

# model-view-controller - Sencha touch - 使用 MVC 提交表单

> ID：11912024
> 
> 赞同：0
> 
> 时间：2012-08-11T04:56:24.583
> 
> 标签：model-view-controller, sencha-touch-2

我的表单上有一个按钮，这一行是我尝试从表单创建记录并提交到服务器的地方：

```
var record = Ext.ModelManager.create(form, 'LoginModel');//'Login' wont work as well 
```

我得到了例外 ![在此处输入图像描述](../Images/b1eeb2ca714594fb68857c3791fe556f.png)

这是整个控制器：

```
Ext.define('TA.controller.LoginController', {
    extend: 'Ext.app.Controller',
    config: {
        models: [
            'LoginModel'
        ],
        stores: [
            'LoginStore'
        ],
        views: [
            'LoginPanel'
        ],

        refs: {
            LoginForm: '#loginform'
        },

        control: {
            "#Submit": {
                tap: 'onSubmitTap'
            }
        }
    },

    onSubmitTap: function(button, e, options) {
        var form = this.getLoginForm().getValues();
        console.log(form);
        var record = Ext.ModelManager.create(form, 'LoginModel');///////////the problem
        store.add(record);
        store.sync();
    }

}); 
```

这是模型：

```
Ext.define('TA.model.LoginModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {
                name: 'UserName'
            },
            {
                name: 'Password'
            }
        ],
        proxy: {
            type: 'jsonp'
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:25:03.093

```
var record = Ext.create('TA.model.LoginModel', form); 
```

# android - 为日期选择器设置日期

> ID：11912026
> 
> 赞同：0
> 
> 时间：2012-08-11T04:56:26.740
> 
> 标签：android, datepicker

在我的应用程序中，我正在从数据库中获取数据，因为我也在获取日期。因此，如果用户单击任何特定项目意味着我也会获取该开始日期，并且我必须将其设置为屏幕中 dat 选择器中的默认日期。现在获取数据是正确的，如果我单击设置，则会出现 1 个对话框，其中包含 2 个选项“SET”和“CANCEL”的获取数据意味着获取的日期不是默认日期，只有当前日期是默认日期。帮助我..提前谢谢。

我的编码：

```
 c = Calendar.getInstance();               
               SimpleDateFormat sdf=new SimpleDateFormat("yyyy/MM/dd");
               System.out.println("After format");
               Date pickdefdate=null;
               String pickdefdatepar=null;
               try {
                   System.out.println("Inside try="+date);
              pickdefdate=sdf.parse(date);
              System.out.println("dddddddd="+pickdefdate);

              c.setTime(pickdefdate);
              System.out.println("After parse");
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
               System.out.println("B4 setting");

               mYear = c.get(Calendar.YEAR);
               mMonth = c.get(Calendar.MONTH);
               mDay = c.get(Calendar.DAY_OF_MONTH);           
               showDialog(DATE_DIALOG_ID);

protected Dialog onCreateDialog(int id) 
     {
            switch (id) {
            case DATE_DIALOG_ID:
                System.out.println("in dia="+mDay);
                return new DatePickerDialog(this, mDateSetListener, mYear, mMonth, mDay);
            }
            return null;
        }

     private DatePickerDialog.OnDateSetListener mDateSetListener =
                new DatePickerDialog.OnDateSetListener() {
                    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                        System.out.println("Inside dia");
                        mYear = year;
                        mMonth = monthOfYear;
                        mDay = dayOfMonth;
                    }
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:10:15.540

You have to extend onPrepareDialog function

```
 @Override 
```

`protected void onPrepareDialog(int id, Dialog dialog) {`
`switch (id) {`
`case date_picker_dialog_show:`
`((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);`
`break;`
`}}`

this will update the date picker date when it show

# algorithm - (emacs) lisp: 搜索 ((嵌套) 列表中的任何内容)

> ID：11912027
> 
> 赞同：6
> 
> 时间：2012-08-11T04:56:45.037
> 
> 标签：algorithm, emacs, lisp, elisp

我需要找到一个可以隐藏在深度嵌套列表中的特定值，并且永远不会在同一个地方。甚至同样的深度；这是列表的一种形式：

```
(setq my-list '(((partnum . 1) (type (TEXT . plain)) (body (charset UTF-8))
                 (disposition nil) (transfer-encoding QUOTED-PRINTABLE))
                ((partnum . 2) (type (TEXT . html)) (body (charset UTF-8))
                 (disposition nil) (transfer-encoding QUOTED-PRINTABLE)))) 
```

现在我需要检索 "charset" 的值；如果有的话，第一个。在这个非常配置中，很容易：

```
(car (cdr (cadr (third (car my-list)))))
   => UTF-8 
```

但这是我确切知道“身体”细胞在哪里的时候。

我尝试像这样递归地使用 mapcar：

```
(defun search-rec (list)
  (mapcar
     (lambda (x)
       (if (listp x)
           (search-rec x)
         (message "OY %s" x)))
     list)) 
```

但是每次，`(wrong-type-argument listp 1)`当递归到达第一个 cons 单元的第一个原子时，我都会收到错误。我想我的问题真的是它是什么：

如何在列表中搜索？

编辑现在列表看起来像这样，“charset”仍然在 (body) 中（告诉你那是唯一不变的东西）并且它不再被发现:(

```
(setq my-list '(((partnum . 1)
                (1.1 (type (TEXT . plain)) (body (charset UTF-8))
                     (disposition nil) (transfer-encoding 7BIT))
                (1.2 (type (TEXT . html)) (body (charset UTF-8))
                     (disposition nil) (transfer-encoding 7BIT))
                (type . alternative) (body (boundary e89a8fb2067eba300404c63c5f7f))
                (disposition nil) (transfer-encoding nil))
               ((partnum . 1.1) (type (TEXT . plain)) (body (charset UTF-8))
                (disposition nil) (transfer-encoding 7BIT))
               ((partnum . 1.2) (type (TEXT . html)) (body (charset UTF-8))
                (disposition nil) (transfer-encoding 7BIT))
               ((partnum . 2) (type (IMAGE . x-xpixmap)) (body (name ladybug.xpm))
                (disposition nil) (transfer-encoding BASE64)))) 
```

编辑这里是一些更多的 IRL 示例：

```
 (setq my-list haystack-list)
    (setq my-needle (tree-assoc 'charset my-list))
    (message "
-------------\n
- my-list: %s\n
- my-needle: %s\n
-------------\n" my-list my-needle) 
```

产生：

* * *

*   my-list: ((TEXT plain (charset UTF-8) nil nil 7BIT 260 18 nil nil nil) (TEXT html (charset UTF-8) nil nil QUOTED-PRINTABLE 738 17 nil nil nil) Alternative (boundary e89a8fb1f8061a6be404c70a24a0) nil nil )

*   我的针：无

* * *

另一方面，当：

```
(tree-assoc 'charset '((TEXT plain (charset UTF-8) nil nil 7BIT 260 18 nil nil nil)
(TEXT html (charset UTF-8) nil nil QUOTED-PRINTABLE 738 17 nil nil nil) 
alternative (boundary e89a8fb1f8061a6be404c70a24a0) nil nil))
  =>(charset UTF-8) 
```

所以真的，我不知道这里发生了什么：有人可能会争论“这个干草堆列表是什么，它来自哪里？” 但它是否相关？我正在制作这个 haystack-list 的副本（我的列表），那么是什么给出了这些不同的结果？列表的引用？伙计们，我真的迷路了

注意（此行为（在直接评估中有效，但在 defun/let 生产情况下无效）发生在所有给出的解决方案中）

编辑：我最终提取了找到的第一个列表，然后从该列表中提取（而不是搜索）元素。我证明更快；当然这是你可以说“我的元素总是在找到的第一个列表中）；感谢大家，通过这一切我学到了很多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T12:10:02.603

看起来您想要[Association Lists](http://www.gnu.org/software/emacs/manual/html_node/elisp/Association-Lists.html)的树模拟。通过遵循`assoc`函数的约定，它检索包含给定键作为其头部的列表元素，这是一个适用于树的 assoc 版本：

```
(defun tree-assoc (key tree)
  (when (consp tree)
    (destructuring-bind (x . y)  tree
      (if (eql x key) tree
        (or (tree-assoc key x) (tree-assoc key y)))))) 
```

例子：

```
(let ((my-list '(((partnum . 1)
                  (1.1 (type (TEXT . plain)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  (1.2 (type (TEXT . html)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  (type . alternative) (body (boundary e89a8fb2067eba300404c63c5f7f))
                  (disposition nil) (transfer-encoding nil))
                 ((partnum . 1.1) (type (TEXT . plain)) (body (charset UTF-8))
                  (disposition nil) (transfer-encoding 7BIT))
                 ((partnum . 1.2) (type (TEXT . html)) (body (charset UTF-8))
                  (disposition nil) (transfer-encoding 7BIT))
                 ((partnum . 2) (type (IMAGE . x-xpixmap)) (body (name ladybug.xpm))
                  (disposition nil) (transfer-encoding BASE64)))))
  (tree-assoc 'charset my-list))

=> (charset UTF-8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T06:41:13.860

这取决于您想要做什么以及列表结构的相似程度（也就是说，您是否总是有一个 HTML 部分列表？字符集是否总是在 body 元素中？）

第一步可能是：

```
(defun list-query (list-of-keys data)
  (let ((data data))
    (while (and data list-of-keys)
      (setq data (assoc (car list-of-keys) data))
      (setq list-of-keys (cdr list-of-keys)))
    data)) 
```

`(list-query '(body charset) (car my-list))`结果是调用`(charset UTF-8)`。遍历 my-list 以查找正文列表中的第一个（或所有）字符集应该相对容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T09:06:15.413

这是我对这个问题的看法，也许你会发现它很有用：

```
(defun depth-first-search (tree searched &optional comparator)
  "TREE is the nested list of elements to search, SEARCHED
is the element to search for, COMPARATOR is the function used
to compare elements of the tree to the searched element, if
you don't provide any, then `equal' is used.
Returns a list of subscripts to be used with `nth' to find the
searched element. If the result is `nil', the list itself
is the searched element. If the result is not a list,
the `not-found' symbol, then the element was not found."
  (unless comparator (setq comparator #'equal))
  (let ((operations 'not-found))
    (labels ((%df-search
              (item ops)
              (if (funcall comparator item searched)
                  (setq operations (reverse ops))
                (let ((offset 0))
                  (when (consp item)
                    (dolist (i item)
                      (%df-search i (cons offset ops))
                      (unless (eq operations 'not-found)
                        (return))
                      (incf offset)))))))
      (%df-search tree nil)
      operations)))

(defun nth-repeat (subscripts tree)
  "Given the list of SUBSCRIPTS, will subsequently evaluate
`nth' with every subscript on the result of the previous evaluation
 such as to find the element in the TREE."
  (let ((result tree))
    (dolist (i subscripts result)
      (setq result (nth i result)))))

(nth-repeat 
 (depth-first-search '(1 (1 1 2) (1 1 1 3)) 3)
 '(1 (1 1 2) (1 1 1 3))) 
```

它需要您使用`cl`，但这很常见，您可能甚至不会注意到，您很可能已经拥有它。

**编辑：**好的，这样你可以避免完全查看不正确列表的最后一个元素，但是，这意味着你也不能在那里搜索：

```
(defun depth-first-search (tree searched &optional comparator)
  "TREE is the nested list of elements to search, SEARCHED
is the element to search for, COMPARATOR is the function used
to compare elements of the tree to the searched element, if
you don't provide any, then `equal' is used.
Returns a list of subscripts to be used with `nth' to find the
searched element. If the result is `nil', the list itself
is the searched element. If the result is not a list,
the `not-found' symbol, then the element was not found."
  (unless comparator (setq comparator #'equal))
  (let ((operations 'not-found))
    (labels ((%df-search
              (item ops)
              (if (funcall comparator item searched)
                  (setq operations (reverse ops))
                (let ((offset 0))
                  (when (consp item)
                    (block outer
                      (maplist
                       (lambda (x)
                         (%df-search (car x) (cons offset ops))
                         (when (or (not (eq operations 'not-found))
                                   (not (listp (cdr x))))
                           (return-from outer))
                         (incf offset))
                       item)))))))
      (%df-search tree nil)
      operations)))

(defun nth-repeat (subscripts tree)
  "Given the list of SUBSCRIPTS, will subsequently evaluate
`nth' with every subscript on the result of the previous evaluation
 such as to fint the element in the TREE."
  (let ((result tree))
    (dolist (i subscripts result)
      (setq result (nth i result)))))

(defvar my-list '(((partnum . 1)
                   (1.1 (type (TEXT . plain)) (body (charset UTF-8))
                        (disposition nil) (transfer-encoding 7BIT))
                   (1.2 (type (TEXT . html)) (body (charset UTF-8))
                        (disposition nil) (transfer-encoding 7BIT))
                   (type . alternative) (body (boundary e89a8fb2067eba300404c63c5f7f))
                   (disposition nil) (transfer-encoding nil))
                  ((partnum . 1.1) (type (TEXT . plain)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  ((partnum . 1.2) (type (TEXT . html)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  ((partnum . 2) (type (IMAGE . x-xpixmap)) (body (name ladybug.xpm))
                   (disposition nil) (transfer-encoding BASE64))))

(depth-first-search
 my-list '(charset UTF-8))              ; (0 1 2 1)

(nth-repeat
 (depth-first-search
  my-list '(charset UTF-8)) my-list)    ; (charset UTF-8) 
```

可能，这不是解决问题的最佳方法，但更好的解决方案需要更改算法以记录`car`s 和`cdr`s 的序列，从而将您带到有问题的元素。在这种情况下，您还可以在列表的“不当”部分进行搜索。但现在为时已晚:) 也许明天。

**编辑 2**：

```
(defun tree-to-proper-tree (tree)
  (cond
   ((null tree) nil)
   ((consp tree)
    (let ((head
           (if (consp (car tree))
               (tree-to-proper-tree (car tree))
             (car tree))))
    (cons head
          (tree-to-proper-tree (cdr tree)))))
   (t (list tree))))

(defun find-path-to (tree node &optional comparator)
  (unless comparator (setq comparator #'equal))
  (let ((operations 'not-found))
    (labels ((%df-search
              (item ops)
              (if (funcall comparator item node)
                  (setq operations (reverse ops))
                (when (consp item)
                      (%df-search (car item) (cons 'car ops))
                      (%df-search (cdr item) (cons 'cdr ops))))))
      (%df-search tree nil)
      operations)))

(defun c*r-path (path tree)
  (dolist (i path tree)
    (setq tree (funcall i tree))))

(defvar my-list '(((partnum . 1)
                   (1.1 (type (TEXT . plain)) (body (charset UTF-8))
                        (disposition nil) (transfer-encoding 7BIT))
                   (1.2 (type (TEXT . html)) (body (charset UTF-8))
                        (disposition nil) (transfer-encoding 7BIT))
                   (type . alternative) (body (boundary e89a8fb2067eba300404c63c5f7f))
                   (disposition nil) (transfer-encoding nil))
                  ((partnum . 1.1) (type (TEXT . plain)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  ((partnum . 1.2) (type (TEXT . html)) (body (charset UTF-8))
                   (disposition nil) (transfer-encoding 7BIT))
                  ((partnum . 2) (type (IMAGE . x-xpixmap)) (body (name ladybug.xpm))
                   (disposition nil) (transfer-encoding BASE64))))

(tree-to-proper-tree my-list) ; the same lists as above but made into a proper lists

(c*r-path (find-path-to my-list 'UTF-8) my-list) ; UTF-8
(c*r-path (find-path-to my-list 'plain) my-list) ; plain 
```

好的，所以，在这里`tree-to-proper-tree`，如果您选择它，它将以所有不正确的子树都将成为正确树的方式转换树。或者，您可以使用`find-path-to`查找什么序列`car`并将`cdr`您带到您搜索的元素，`c*r-path`并将评估该序列以返回以这种方式记录的元素。

请注意，以这种方式搜索相同节点的重复出现将非常具有挑战性。您必须提供一些比较器功能来计算找到该项目的次数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T02:06:32.677

正如 Rainer 的回答暗示的那样，您遇到的问题是 cons 单元格的 cdr 可能指向一个列表，或者它可能指向某种其他类型的对象；您的`search-rec`功能不能防止后一种可能性。

这是您正在寻找的 Elisp 版本（未经彻底测试；适用于您的示例数据）：

```
(defun find-charset (l)
  (catch 'my-result
    (find-charset-do l)))

(defun find-charset-do (l)
  (when (and (consp l) 
             (listp (cdr l)))
    (if (and (eq (car l) 'charset)
             (symbolp (cadr l)))
        (throw 'my-result (cadr l))
      (dolist (e l)
        (find-charset-do e))))) 
```

# php - PHP 自定义会话处理程序 - 数据库连接变为 NULL

> ID：11912034
> 
> 赞同：0
> 
> 时间：2012-08-11T04:58:46.790
> 
> 标签：php

我调试和搜索了很长一段时间，但我无法弄清楚发生了什么。这是我第一次做 a `custom session handler`，所以我担心我忽略了一些非常明显的东西。我想实现一个自定义会话处理程序，以便我可以在会话中存储其他信息，并能够暂时禁用某些用户组对站点受保护区域的访问。

我的登录页面（在基本的基于文​​件的 php 会话中运行良好）包括一个 php 文件，其中包含许多功能，包括会话处理程序函数和我的错误处理程序。该包含的文件包括执行数据库连接的第三个文件。使用建立连接`mysqli_connect()`并将生成的链接存储在变量中`$dbc`。整个站点都使用相同的连接来记录错误、加载/编辑站点内容等。我决定使用相同的数据库连接，因为它已经在每个页面上使用，并且我的会话处理程序几乎需要在每个页面上使用也是。在我的代码中，我没有手动关闭数据库连接，但我认为它可能会以某种方式自动关闭。

我的函数使用全局语句访问数据库连接 ($dbc)。前任：

```
function sess_write($id, $data)
{
    global $dbc;
    ... 
```

我`open`的`read`, 和`write`函数应该以这种方式使用变量。我在打开和读取函数中检查了数据库连接变量，它如预期的那样非空，但在我的写入函数中它突然显示为空。PHP 是否在读写之间做一些可能会关闭该连接的事情？我在创建数据库连接的同一个包含文件中创建了一个测试变量，并`global $test;`在 write 函数中使用了相同的语句，并且该变量看起来很好，所以我猜它与关闭数据库有关。我尝试使用第二个变量来存储数据库连接（仅供会话处理程序使用），但这也不起作用。有任何想法吗？我只是像往常一样愚蠢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:19:34.397

根据您的说明，这是正确的——对象将在写入和关闭之前被处理掉。传统的解决方法是使用[register_shutdown_function](http://www.php.net/manual/en/function.register-shutdown-function.php)。PHP 5.4 现在有[一个接口](http://www.php.net/manual/en/class.sessionhandlerinterface.php)，您可以使用它来编写一个会话处理程序类来简化这个过程。如果您在会话类中实现该接口，则当您将其传递给 session_set_save_handler() 时，它默认设置为您注册关闭调用。

# php - 将文件从远程 URL 复制到我的服务器

> ID：11912035
> 
> 赞同：3
> 
> 时间：2012-08-11T04:58:49.553
> 
> 标签：php, curl, copy

我有这段代码，它可以工作，但有一个限制，只能复制 4.0mb 的文件，有人可以帮助我增加该大小以复制更大的文件。谢谢

```
<? 
  $archivo_origen=$_POST["origen"]; 
  $archivo_destino=$_POST["destino"];

  function descarga_archivo ($archivo_origen,$archivo_destino){ 
    $mi_curl = curl_init ($archivo_origen);  
    $fs_archivo = fopen ($archivo_destino, "w");  
    curl_setopt ($mi_curl, CURLOPT_FILE, $fs_archivo);  
    curl_setopt ($mi_curl, CURLOPT_HEADER, 0);  
    curl_exec ($mi_curl);  
    curl_close ($mi_curl);  
    fclose ($fs_archivo);  
  } 
  descarga_archivo($archivo_origen,$archivo_destino);
    header("location: index.php");

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:59:35.040

```
$fs_origen = fopen($archivo_origen, 'r');
$fs_destino = fopen($archivo_destino, 'w');
while($data = fread($fs_origen, 4096)) fwrite($fs_destino, $data);
fclose($fs_origen);
fclose($fs_destino); 
```

编辑：`stream_copy_to_stream`用循环替换。

# python - 简单的布尔不等式运算符错误

> ID：11912037
> 
> 赞同：2
> 
> 时间：2012-08-11T04:59:11.237
> 
> 标签：python, return, boolean, inequality

使用不等式运算符，我必须定义一个`weekend`将字符串作为输入的过程，`True`如果它是“星期六”或“星期日”，则返回布尔值，`False`否则。

这是我的代码

```
def weekend(day):
    if day != 'Saturday' or day != 'Sunday':
        return False
    else:
        return True 
```

这似乎`False`每天都在返回，我不知道为什么，从逻辑上讲它会起作用......有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T05:01:56.450

***固定版本：***

```
if day != 'Saturday' and day != 'Sunday' 
```

***更好的版本：***

```
return day in ['Saturday', 'Sunday'] 
```

***为什么`or`不起作用：***

当您使用 时`or`，您的条件将显示为“如果今天不是星期六或今天不是星期天”。现在将“今天”替换为“星期六”：

> 如果星期六不是星期六或星期六不是星期日

“星期六不是星期六”这句话显然是假的，而“星期六不是星期天”显然是真的，所以整个陈述就变成了“如果是假的或真的”，这总是真的。

将“今天”替换为任何其他日期，您会发现该句子总是评估为以下句子之一，这始终是正确的：

```
if True or False  # day = Sunday
if False or True  # day = Saturday
if True or True   # any other day 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T05:03:19.513

处理这个问题的最好方法是使用这样的东西：

```
return day.lower() in ['saturday','sunday'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T05:02:28.983

你的意思是`and`

```
def weekend(day):
    if day != 'Saturday' and day != 'Sunday':
        return False
    else:
        return True 
```

或更清晰的版本（仅将 De Morgan 应用于上述）：

```
def weekend(day):
    if day == 'Saturday' or day == 'Sunday':
        return True
    else:
        return False 
```

这一天总是与这两天中的**一天**不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T05:38:19.713

**未来提示：**仔细考虑您的代码，就好像您是计算机一样*，非常详细*。例如，我真的会和自己进行这样的对话：

嗯，什么时候`day = 'Saturday'`，代码正在返回`False`，即使我认为它不应该。让我们逐行看看发生了什么。

`def weekend(day):`

*   好的，从现在开始看起来不错，我会在任何时候替换`day`它`'Saturday'`...

`if day != 'Saturday' or day != 'Sunday':`

*   好的，我会在心里把它翻译成`if 'Saturday' != 'Saturday' or 'Saturday' != 'Sunday':`.
*   现在我将通过评估比较来简化它。
    *   `'Saturday' != 'Saturday'`变成`False`
    *   `'Saturday' != 'Sunday':`变成`True`
*   将它们插入，我看到`if`语句说的是`if False or True`，这与`if True`. 所以这意味着这`day = Saturday`会导致返回值`False`.

啊哈，现在我明白了这个`day = 'Saturday'`案子出了什么问题；`day != 'Sunday'`条件意味着`if`评估为`True`.

所以虽然下面的代码会返回`True`，`day = 'Saturday'`

```
def weekend(day):
    if day != 'Saturday':
        return False
    else:
        return True 
```

这段代码适用于`day = 'Sunday'`，

```
def weekend(day):
    if day != 'Sunday':
        return False
    else:
        return True 
```

两者不能与 a 结合使用`or`。

所以以后试着像这样对自己说话——这对调试非常有用，尤其是当布尔逻辑混乱时。

（为了记录，我认为这`return day.lower() in ['saturday','sunday']`是解决这个问题的最佳方法。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-03T13:09:40.833

```
def weekend(day):
    # your code here
    if day == 'Saturday' or day == 'Sunday':
        return True
    else:
        return False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T04:17:11.830

[我为Can not get “while” statement to progress](https://stackoverflow.com/questions/53587268/can-not-get-while-statement-to-progress)写了这个答案，但在我提交之前它被标记为重复。它是一个精确的逻辑重复（`x != foo or y != bar`），所以我在这里发布这个，希望我的回答可能对某人有所帮助。

答案是逐字复制的。

* * *

你的问题在这里：

```
while username != logindata.user1 or username != logindata.user2:
...
while password != logindata.passw1 or password != logindata.passw2: 
```

The username loop in English is something like, "Keep looping if the provided `username` is either not equal to `user1`, or not equal to `user2`." Unless `user1` and `user2` are the same, no string will ever let that evaluate to `False`. If 'username' is equal to `user1`, it cannot be equal to `user2` (again, assuming `user1 != user2`, which is the case here).

The quick fix is to change the `or` to `and`. That way, you're checking whether `username` is not either of the available options. A better way to write that would be:

```
while not (username == logindata.user1 or username == logindata.user2): 
```

But I would say that the correct way to write it, given what you're trying to do, is this:

```
while username not in [logindata.user1, logindata.user2]: 
```

In English, something like, "Keep looping while the username is not in this list of usernames."

P.S. I was going to use a set instead of a list, for pedantic correctness, but it really doesn't matter for this, so I figured a list would be easier for a beginner. Just mentioning it before someone else does :).

# asp.net - 以编程方式将数据键添加到现有的数据键集

> ID：11912040
> 
> 赞同：0
> 
> 时间：2012-08-11T04:59:48.263
> 
> 标签：asp.net, gridview, datakey

我有一个有几个数据键的 GridView。在一组特定的情况下，我需要在页面的 Load 事件期间从后面的代码中添加一个额外的数据键。

如何以编程方式将数据键添加到 GridView 中的现有数据键集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T05:20:37.597

最简单的方法是将 DataKeyNames 的 String 数组转换为 ArrayList，添加新的 DataKeyName，然后将此 ArrayList 转换回 String() 数组，然后使用此设置 Gridview 的 DataKeyNames 属性。这是一个例子：

```
Dim arr As New ArrayList()
Dim keys As String() = GridView1.DataKeyNames

//Convert to an ArrayList and add the new key.
arr.AddRange(keys)
arr.Add("New Key")

//Convert back to a string array and set the property.
Dim newkeys As String() = CType(arr.ToArray(Type.GetType("System.String")), String())
GridView1.DataKeyNames = newkeys 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T05:24:53.187

尝试这个

```
 //get length of existing keys
 int keyLength = MyGrid.DataKeyNames.Length;

 //create newkeys array with an extra space to take the new key
 string[] newkeys = new string[keyLength+1];

 //copy the old keys to the newkeys array
 for (int i = 0; i < keyLength; i++)
    newkeys[i] = MyGrid.DataKeyNames[i];

 //add the new key in the last location
 newkeys[keyLength] = "MyNewKey";

 //update your datakeys
 MyGrid.DataKeyNames = newkeys; 
```

# python - 我应该通过视图功能呈现每个页面吗？

> ID：11912042
> 
> 赞同：0
> 
> 时间：2012-08-11T05:00:23.583
> 
> 标签：python, django

我有一个简单的静态页面，显示有关该网站的一些信息。我应该通过 render_to_response() 呈现这个页面，即使它是静态的，还是应该简单地将它显示为普通的 html 文件？

我唯一担心的是在服务器上增加额外的负载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:43:45.740

听起来您并不是在以 Django 开发人员通常的方式（Javascript、CSS、图像*等*）谈论“静态内容”。

您说您需要 Django 模板，但暗示这些页面上的内容不需要更改。这听起来像是内置 Django 的绝佳机会`TemplateView`（`urls.py` [来自 docs 的](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#simple-usage)示例）：

```
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^about/', TemplateView.as_view(template_name="about.html")),
) 
```

正如 gnibbler 所说，如果您非常担心性能，那么可以使用某种缓存——Django 实际上[内置了缓存，您可以使用](https://docs.djangoproject.com/en/1.4/topics/cache/)[`@cache_page`decorator](https://docs.djangoproject.com/en/1.4/topics/cache/#setting-up-the-cache)为特定视图启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T17:59:41.383

您可能想查看[Hyde](http://ringce.com/hyde)，它使用 Django 并专门研究静态内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:04:39.790

如果你担心服务器负载，你应该设置一个像[squid](http://en.wikipedia.org/wiki/Squid_%28software%29)或[varnish](http://en.wikipedia.org/wiki/Varnish_%28software%29)这样的代理。代理可以缓存静态内容，因此您的服务器每次缓存到期时只会收到一个以上的请求

# wpf - 使用 PRISM 和 MVVM 的 ViewModel 的参数化构造函数

> ID：11912045
> 
> 赞同：2
> 
> 时间：2012-08-11T05:00:38.440
> 
> 标签：wpf, mvvm, ninject, prism

我试图在 PRISM 模块上使用 MVVM。我的模块中有一个带有参数化构造函数的 ViewModel，它接受将使用 Ninject 注入的 IOutputService 对象。

```
namespace HelloWorld.ViewModels
{
    public class HelloWorldViewModel : ViewModelBase
    {
        private IOutputService outputService;

        public HelloWorldViewModel(IOutputService outputService)
        {
            this.outputService = outputService;
        }
    }
} 
```

在 HelloWorldModule.cs 文件中，我将 IOutputService 注册到一个实现它的类。

```
public class HelloWorldModule : IModule
{
    private IKernel kernel;
    private IRegionManager regionManager;

    public HelloWorldModule(IKernel kernel, IRegionManager regionManager)
    {
        this.kernel = kernel;
        this.regionManager = regionManager;
    }

    public void Initialize()
    {
        kernel.Bind<IOutputService>().To<MessageBoxOutputService>();
        regionManager.RegisterViewWithRegion("Region1", typeof(HelloWorldView));
    }
} 
```

您还可以注意到我正在将 HelloWorldView 注册到 Region1。HelloWorldView 使用 HelloWorldViewModel。现在的问题是我无法在 View 的 XAML 中初始化 HelloWorldViewModel，因为我的 ViewModel 没有无参数构造函数。

```
<UserControl x:Class="HelloWorld.Views.HelloWorldView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:HelloWorld.ViewModels"
             mc:Ignorable="d">
    <UserControl.DataContext>
        <vm:HelloWorldViewModel />
    </UserControl.DataContext>
    <Grid>

    </Grid>
</UserControl> 
```

当我运行它时，视图的 InitializeComponent() 方法会引发 NullReferenceException。有什么合适的方法来完成这项工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:18:08.057

在视图的代码隐藏中，在构造函数中注入视图模型。

```
public partial class HelloWorldView : UserControl
{
    public HelloWorldView(HelloWorldViewModel vm)
    {
        InitializeComponent();
        DataContext = vm;
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:35:39.840

好吧，您不必在 xaml 中设置 View 的 DataContext。它可以简单地在 CodeBehind 中完成。将以下属性添加到 HelloWorldView.xaml.cs

```
 /// <summary>
    /// Gets or sets ViewModel.
    /// </summary>
    [Inject]
    public HelloWorldViewModel ViewModel
    {
        get { return this.DataContext as HelloWorldViewModel; }
        set { this.DataContext = value; }
    } 
```

当您调用 RegisterViewWithRegion 时，将解析该视图的一个实例，并且由于 InjectAttribute，Ninject 将为该视图提供 DataContext。所以你不必担心这个。构造函数注入也应该起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T05:25:50.583

尝试使用*[ObjectDataProvider](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)*。

示例（来自 MSDN）：

```
<ObjectDataProvider x:Key="myDataSource" ObjectType="{x:Type src:Person}">
  <ObjectDataProvider.ConstructorParameters>
    <system:String>Joe</system:String>
  </ObjectDataProvider.ConstructorParameters>
</ObjectDataProvider> 
```

这是**[Bea Stollnitz](http://bea.stollnitz.com/)**的一个很好的例子：

## [为什么要使用 ObjectDataProvider？](http://bea.stollnitz.com/blog/?p=22)

# ruby-on-rails-3 - 禁用 i18n 短语的缓存 rails 3

> ID：11912046
> 
> 赞同：2
> 
> 时间：2012-08-11T05:01:03.150
> 
> 标签：ruby-on-rails-3, caching, activerecord, internationalization

我是构建具有多语言支持的 rails 3 应用程序的新手。该产品要求翻译团队应该能够从**Web 界面****更新短语**并查看其**对刷新**的影响。他们并不关心这个模型带来的性能影响。

 ****所以我使用 gem **i18n-active_record**及其后端与 i18n。问题是，存储在数据库中的翻译并不是在每个请求上都被获取。我希望系统在每次收到渲染请求时查询每个键的翻译表。

我们稍后会在网站足够成熟时禁用此功能，但目前这是一项必不可少的功能。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:46:42.803

您可以在 ApplicationController 中添加：

```
before_filter { I18n.reload! } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:05:16.580

恐怕我无法真正评论使用 i18n-active_record，但我们运行一个登台服务器，`localeapp`gem 以守护程序模式运行。这意味着翻译可以由翻译人员通过 GUI 进行编辑，并且它们会立即出现在登台服务器上。可能是值得你研究的东西。

披露：我是 Locale 的开发人员****

# php - 在 nusoap 中调用方法 return bool(false)

> ID：11912047
> 
> 赞同：1
> 
> 时间：2012-08-11T05:01:06.673
> 
> 标签：php, web-services, wsdl, nusoap

当我调用一个方法和 var_dump($result) 然后显示 bool(false) 为什么？我将参数更改为示例和 1234，以便在此处编写：

```
require_once('../class/nusoap.class.php');
// Create the client instance
$client = new soapclient('sample?wsdl' ,'wsdl', '', '', '', '');
$soapClient->soap_defencoding = 'UTF-8';
$soapClient->debug_flag = false;

// Check for an error
$err = $client->getError();
if ($err) {
    // Display the error
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
    // At this point, you know the call that follows will fail
}
// Call the SOAP method
$result = $client->call('enqueue', array('from' => '+12345',
'rcpt_array' => '123456',
'msg' => 'hi',
'uname' => 'example1',
'pass' => 'example2'));
var_dump($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:17:25.770

根据 PHP [SoapClient](http://www.php.net/manual/en/soapclient.soapclient.php)文档，SoapClient 构造函数的第二个参数应该是`array`

```
public SoapClient::SoapClient ( mixed $wsdl [, array $options ] ) 
```

但是在您的情况下，您正在传递一系列论点。我不确定这是否可行。

其次，在使用 Soap 调用时，`wsdl`我们可以根据您的示例使用参数直接调用 wsdl 方法。

```
$client->enqueue(array('from' => '+12345',
'rcpt_array' => '123456',
'msg' => 'hi',
'uname' => 'example1',
'pass' => 'example2')); 
```

这是一个简单的 PHP 肥皂调用[示例](http://www.vankouteren.eu/blog/2009/03/simple-php-soap-example/)

# python - 安装多个 python 时将库保存在正确的位置

> ID：11912049
> 
> 赞同：1
> 
> 时间：2012-08-11T05:01:49.090
> 
> 标签：python, opencv

QUESTION1：我的 Mac 中安装了 3 个版本的 python。

1.Apple 提供了一个 (2.7.1) (/usr/local/bin)

2.Macports安装一（2.7.3）（/opt/local/bin）

3.和一个来自 python.org (2.7.3) (/Library/Frameworks/Python.framework/Versions/2.7/bin)

我想添加像opencv，pygame这样的外部模块。我不知道安装的二进制文件在哪里，当我尝试导入它们时，我得到这个“找不到模块”错误。如何安装macports python和python.org python 使用 opencv 模块或其他一些外部模块。

QUESTION2：如何在eclipse中将外部库添加到pydev

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:08:47.540

当您在 eclipe 中配置解释器时（第一次，或通过首选项菜单），您需要选择一个解释器（不要使用自动配置）。

Ecipe 将使用该解释器，以及与之相关的库。如果您安装新库，只需返回 prefrences>pydev>interpreter，然后在选择解释器的屏幕上单击“应用”（您无需更改任何内容，但将扫描新库）。

如果可能，我建议使用端口，因为您很可能会在那里找到所需的一切，并且不必处理任何手动安装模块。

# spring - 如何编写一个搜索类来接受任何类型的参数？

> ID：11912051
> 
> 赞同：0
> 
> 时间：2012-08-11T05:02:05.973
> 
> 标签：spring

我正在使用 spring mvc 并创建了 CRUD 功能。但我想创建一个搜索功能，允许我通过任何参数（变量）作为“用户 ID”或“用户名”或“姓氏”或“社会保险号”或其他任何参数来查找用户。

我的用户 ID 是整数类型。

我怎样才能做到这一点？对此的 SQL 查询是什么？

如何检查输入是整数还是字符串，然后通过给定参数遍历数据库并搜索用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:27:02.830

如果您使用 Hibernate 进行数据访问，您可以使用标准 API 轻松创建通用查找器：

抽象 DAO 类：

```
public abstract class AbstractHibernateDAO<T> {

    private static final String PARAM_VALUE_PARAMETER = "paramValue";

    private final Class<T> clazz;

    @Autowired
    private SessionFactory sessionFactory;

    public AbstractHibernateDAO(Class<T> clazz) {
        this.clazz = clazz;
    }

    public T findOne(String paramName, Object paramValue) {
        Session session = sessionFactory.getCurrentSession();

        @SuppressWarnings("unchecked")
        T fetchedObject = (T) session.createCriteria(clazz).add(Restrictions.eq(paramName, paramValue)).uniqueResult();

        return fetchedObject;
    }

    // Other CRUD methods.

} 
```

实体的具体 DAO 类：

```
@Repository
@Transactional
public class ProductHibernateDAO extends AbstractHibernateDAO<Product> {

    public ProductHibernateDAO() {
        super(Product.class);
    }

} 
```

或者，如果您更喜欢使用 HQL 而不是 Criteria API，您可以将搜索方法重写为：

```
public T findOne(String paramName, Object paramValue) {
    Session session = sessionFactory.getCurrentSession();

    StringBuilder queryText = new StringBuilder();

    queryText.append("from ");
    queryText.append(clazz.getSimpleName());
    queryText.append(" where ");
    queryText.append(paramName);
    queryText.append("=:");
    queryText.append(PARAM_VALUE_PARAMETER);

    @SuppressWarnings("unchecked")
    T fetchedObject = (T) session.createQuery(queryText.toString()).setParameter(PARAM_VALUE_PARAMETER, paramValue).uniqueResult();

    return fetchedObject;
} 
```

[在本文中](http://www.baeldung.com/2011/12/08/simplifying-the-data-access-layer-with-spring-and-java-generics/)，您可以找到很好的描述如何使用 hibernate 创建通用 DAO（或者，如果您更喜欢 JPA，还描述了如何使用 JPA 执行此操作）。

或者，如果您更喜欢使用 JDBC 进行数据访问，我建议您查看 Spring 的 JdbcTemplate。它大大简化了开发。在这里，您如何使用 JdbcTemplate 实现通用查找器：

```
@Repository
@Transactional
public class ProductJDBCDAO implements DAO<Product> {

    private static final String TABLE_NAME = "product";

    @Autowired
    private JdbcTemplate jdbcTemplate;

    public Product findOne(String paramName, Object paramValue) {
        RowMapper<Product> rowMapper = new RowMapper<Product>(){

            public Product mapRow(ResultSet rs, int rowNum) throws SQLException {

                long productId = rs.getLong("product_id");
                // Other properties

                Product product = new Product(...);

                return product;
            }

        };

        StringBuilder queryText = new StringBuilder();
        queryText.append("select * from ");
        queryText.append(TABLE_NAME);
        queryText.append(" where ");
        queryText.append(paramName);
        queryText.append("=?");

        Product fetchedObject = jdbcTemplate.queryForObject(queryText.toString(), rowMapper, paramValue);

        return fetchedObject;
    }

    // Other CRUD methods
} 
```

正如您在所有示例中看到的那样，您不需要显式指定参数类型，只需将其添加为 Object 参数。

如果您在这种情况下使用直接 JDBC，我建议您使用*PreparedStatement*及其*setObject(..)*方法。查询文本将类似于 JdbcTemplate 示例中所示。

# sql - 如何在sql中添加2个varchar列

> ID：11912052
> 
> 赞同：-3
> 
> 时间：2012-08-11T05:02:07.470
> 
> 标签：sql

我有 timediff 字段`varchar`

我想找到这个字段的总和，但它给出的错误是

`"Syntax error converting the varchar value '02:00' to a column of data type int."`

我的时间差就像

```
02:00
03:00
04:00 
```

我想添加并应该`9`在 sql 中显示

请帮我

谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:22:59.537

您不能`SUM`在 varchar 列上使用。看看[这里](http://msdn.microsoft.com/en-us/library/ms187810.aspx)的文档。

您没有向我们提供有关您存储的内容或您希望它如何求和的太多信息，但您最好的选择可能是解析冒号之前的数字，将其转换为 int 并将其相加。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:31:13.513

如果您在谈论**MS SQL**

你可以做这样的事情

首先通过这个将你的小时表示转换为分钟

```
select (CONVERT(int,SUBSTRING('02:00',1,2))*60) +
         CONVERT(int,SUBSTRING('02:00',4,2)) 
```

* * *

然后使用该分钟表示来执行这样的加法

```
select 
DATEADD(
    minute,
    (select (CONVERT(int,SUBSTRING('02:00',1,2))*60) +
     CONVERT(int,SUBSTRING('02:00',4,2))),
    getdate()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:45:55.310

如果您的最终目标是获取所有 datadiff 记录的总和，`hh:mm`那么首先以分钟为单位存储 datediff，而不是`hh:mm`您在此处询问[的。](https://stackoverflow.com/questions/11900730/find-the-difference-between-2-times-of-type-char-in-sql)

如何在几分钟内存储 DateDiff：

```
SELECT DATEDIFF(second,CAST(<timepart> AS DATETIME) 
, CAST(<timepart> AS DATETIME))/60.0 AS MIN_DIFF; 
```

例如

```
SELECT DATEDIFF(second,CAST('10:00 AM' AS DATETIME) 
, CAST('11:15 AM' AS DATETIME))/60.0 AS MIN_DIFF; 
```

如何计算所有分钟的总和`hh:mm`

```
SELECT CAST((<total minutes> / 60) AS VARCHAR(8)) + ':' 
+ CAST((<total minutes> % 60) AS VARCHAR(2)) 
```

例如

```
SELECT CAST((390 / 60) AS VARCHAR(8)) + ':' 
+ CAST((390 % 60) AS VARCHAR(2)) 
```

[请参阅此小提琴以获取所有答案。](http://www.sqlfiddle.com/#!3/9dd39/38)

# php - 在php中打开文件（pdf，word，excel）（使用mysql数据库）

> ID：11912063
> 
> 赞同：-1
> 
> 时间：2012-08-11T05:04:39.047
> 
> 标签：php, mysql

我是 php 和 mysql 的新手。我创建了一个用于上传文件的 php 页面，这些文件保存到我的本地驱动器。在另一个页面中，当用户选择一个选项时，与该选项相关的文件以表格格式显示。一列将链接到本地​​驱动器中的文件。在这里我成功了。问题是当单击文件超链接时没有显示任何内容。但是当我复制文件的地址链接并粘贴到新窗口中时，它正在打开。请帮助我，我被困了 2 周。为了进行实验，我创建了简单的 php 文件只是为了查看超链接的工作。但没有成功。我将在这里粘贴我使用过的路径

```
<?php echo "<a href=`file:///C|/Inetpub/wwwroot/help.gif' >hi</a>";?>-----not worked
<?php echo "<a href=http://www.google.com>hi</a>";?> ------ working. 
```

如果文件保存为 php 文件，即使“”标签也不起作用.....我正在使用 ISp 服务器。我的 php 文件保存在“C:\Inetpub\wwwroot\phpsample”路径中，请帮我找到解决方案

----我的原始代码----

```
<form  action="http://localhost/phpsample/upload/upload2.php" method='post'enctype='multipart/form-data'>
Instrument:<select name="flist">
  <option>select</option> 
  <option>gt1</option>
  <option>gt2</option>
  <option>gt3</option>
  <option>gt4</option>
</select>
</br>
Date: <input type="date" name="fdate" /></br>
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" />
</form>
<?php

global $dest;
global $name;

$dest='E:\divya';
$name=$_FILES["file"]["name"];
echo $dest;

move_uploaded_file($_FILES["file"]["tmp_name"],"$dest/$name");

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("upload_db", $con);

mysql_query("INSERT INTO upload_tb (Instrument, date_upload, filename)
VALUES('$_POST[flist]','$_POST[fdate]','$name')");
mysql_close($con);
?>
</body>
</html> 
```

----我从表中下载文件的原始代码----

```
<form  action="http://localhost/phpsample/display/display.php" method='post'enctype='multipart/form-data'>
Instrument:
  <select name="flist">
    <option>select</option>
    <option>gt1</option>
    <option>gt2</option>
    <option>gt3</option>
    <option>gt4</option>
  </select>
</br>
Date: 
<input type="date" name="fdate" /></br>

<input type="submit" />
</form>
<?php

echo $_POST['fdate'];
echo $_POST['flist'];

$path='file:\\\C:\\Inetpub\\wwwroot\\phpsample\\display\\NewTextDocument.txt';

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("upload_db", $con);

$result = mysql_query("SELECT * FROM upload_tb  WHERE Instrument='$_POST[flist]'");
echo "<table border='1'>
<tr>
<th>Slno</th>
<th>Name</th>
<th>comment</th>
</tr>";
fopen("c:\Inetpub\wwwroot\phpsample\display\NewTextDocument.txt","r");
while($row = mysql_fetch_array($result))
  {
    $filename=$row['filename'];
echo $filename;
  echo "<tr>";
  echo "<td>" . $row['Instrument'] . "</td>";
  echo "<td>" . $row['date_upload'] . "</td>";
  echo "<td>"."<a href= $path>". $row['filename'] ."</a>"."</td>";

  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:33:16.903

将此脚本放入与upload2.php相同的文件夹中的download.php中，然后调用它

```
http://localhost/phpsample/upload/download.php?file=FILE 
```

`FILE`上传的文件名在哪里。

```
<?php
$con = mysqli_connect("localhost","root","", "upload_db");
if (!$con) die('Could not connect: ' . mysqli_connect_error());

$name = $_GET['file'];
$query_filename = mysqli_real_escape_string($dbh, $name);

$src = 'E:\divya';

$data = mysqli_query($con, "select filename from upload_tb where filename = '$query_filename'");
if (mysqli_num_rows($data) ! 1) die ('File not uploaded: ' . htmlentities($name));

$path = "$src/$name";
http_send_content_disposition($name);
$type = mime_content_type($path);
http_send_content_type($type);
http_send_file($path);
exit;
?> 
```

# android - Android 在 ListFragment 中实现搜索

> ID：11912066
> 
> 赞同：3
> 
> 时间：2012-08-11T05:05:00.617
> 
> 标签：android, listview, search, android-edittext, fragment

我正在尝试在我的 ListFragment 中添加搜索功能。我已经在标准活动中完成了它，但我试图将它移植到片段中。我目前正在做的是这样的：

1.  我有一个承载片段的 Main.java。

2.  我有一个 ListFrag.java，它使用 R.id.frag_list 托管列表数组 List.TERM

我的 Main.java 像这样实现 addTextChangedListener：

```
et.addTextChangedListener(new TextWatcher()
    {
    public void afterTextChanged(Editable s)
    {
                                                                    // Abstract Method of TextWatcher Interface.
    }
    public void beforeTextChanged(CharSequence s,
    int start, int count, int after)
    {
    // Abstract Method of TextWatcher Interface.
    }
    public void onTextChanged(CharSequence s,
    int start, int before, int count)
    {
    textlength = et.getText().length();
    array_sort.clear();
    for (int i = 0; i < List.TERM.length; i++)
    {
    if (textlength <= List.TERM[i].length())
    {
    if(et.getText().toString().equalsIgnoreCase(
    (String)
    List.TERM[i].subSequence(0,
    textlength)))
    {array_sort.add(List.TERM[i]);
    }
    }
    }
    lv.setAdapter(new ArrayAdapter<String>
    (Main.this,
            R.layout.main,R.id.frag_list, array_sort));
    }
    }); 
```

我的 main.xml 是这样的：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:background="@drawable/searchbar"
    android:layout_height="60dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    >
    <EditText android:id="@+id/EditText01"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:hint="@string/prompt">
    </EditText>
    </LinearLayout>

<fragment
    android:id="@+id/frag_list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
android:layout_marginLeft="50dp"
android:layout_marginTop="90dp"
android:layout_marginBottom="40dp"
    class="com.bernard.ListFrag" /> 
```

当我运行应用程序时，我单击editText。在我尝试输入字母的那一刻，应用程序崩溃并显示错误日志：

```
08-11 12:59:57.090: E/AndroidRuntime(20220): FATAL EXCEPTION: main
08-11 12:59:57.090: E/AndroidRuntime(20220): java.lang.NullPointerException
08-11 12:59:57.090: E/AndroidRuntime(20220):    at com.bernard.Main$1.onTextChanged(Main.java:54)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.widget.TextView.sendOnTextChanged(TextView.java:8105)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.widget.TextView.handleTextChanged(TextView.java:8152)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8532)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:892)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:266)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:443)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:420)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:29)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:669)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.view.inputmethod.BaseInputConnection.setComposingText(BaseInputConnection.java:431)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:369)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:85)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.os.Looper.loop(Looper.java:156)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at android.app.ActivityThread.main(ActivityThread.java:5025)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at java.lang.reflect.Method.invokeNative(Native Method)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at java.lang.reflect.Method.invoke(Method.java:511)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-11 12:59:57.090: E/AndroidRuntime(20220):    at dalvik.system.NativeStart.main(Native Method) 
```

我对这种错误的猜测是：

1.  我应该在片段而不是 Main.java 下实现 editText 和文本侦听器。
2.  我不是从 Main.java 调用新列表，因此是 NullPointerException。

有人有解决此问题的建议吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:46:40.057

尝试更换：

```
for (int i = 0; i < List.TERM.length; i++)
    {
    if (textlength <= List.TERM[i].length())
    {
    if(et.getText().toString().equalsIgnoreCase(
    (String)
    List.TERM[i].subSequence(0,
    textlength)))
    {array_sort.add(List.TERM[i]);
    }
    }
    }
    lv.setAdapter(new ArrayAdapter<String>
    (Main.this,
            R.layout.main,R.id.frag_list, array_sort));
    }
    }); 
```

和：

```
 // reuse the existing adapter instead of creating a new one:
           ArrayAdapter<String> ad = (ArrayAdapter<String>) getListView().getAdapter();
           ad.clear();
           for (int i = 0; i < List.TERM.length; i++) {
              if (textlength <= List.TERM[i].length()) {
                 if (et.getText().toString().equalsIgnoreCase(
                       (String)
                             List.TERM[i].subSequence(0,
                                   textlength))) {
                    ad.add(List.TERM[i]);
                 }
              }
           }
           ad.notifyDataSetChanged(); // tell the ListView to update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:13:02.283

发现如何自己做！也感谢尼克的帮助：D

这有点粗糙，但它有效。如果您认为您有更好的解决方案，请分享！

[所以我所做的是根据http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)中的示例创建一个片段视图列表片段视图

诀窍是，在 ListFrag.java 中，我只是在 onCreateView 下的原始活动中实现了所有内容。重要部分如下：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    final View V = inflater.inflate(R.layout.list_fragment, container, false);

    lv = (ListView) V.findViewById(R.id.ListView01);
    final ArrayList <String>ar = new ArrayList<String>();
    et = (EditText) V.findViewById(R.id.EditText01);
    final String[] words = list.TERM;
    // Populate list with our static array of titles.
    lv.setAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_activated_1, list.TERM));
    lv.setTextFilterEnabled(true); 

    et.addTextChangedListener(new TextWatcher()
    {
    public void afterTextChanged(Editable s)
    {
                                                                    // Abstract Method of TextWatcher Interface.
    }
    public void beforeTextChanged(CharSequence s,
    int start, int count, int after)
    {
    // Abstract Method of TextWatcher Interface.
    }
    public void onTextChanged(CharSequence s,
    int start, int before, int count)
    {
    textlength = et.getText().length();
    array_sort.clear();
    for (int i = 0; i < words.length; i++)
    {
    if (textlength <= words[i].length())
    {
    if(et.getText().toString().equalsIgnoreCase(
    (String)
    words[i].subSequence(0,
    textlength)))
    {array_sort.add(words[i]);
    }
    }
    }
    lv.setAdapter(new ArrayAdapter<String>
    (getActivity(),
            android.R.layout.simple_list_item_activated_1, array_sort));
    }
    });

    //Intent after selection is made
    lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            String name = lv.getItemAtPosition(position).toString();
            for (int index = 0; index < words.length; index++)
            {
                if (name.equals(words[index]))
                {
                    position = index;
                    break;
                }
            }
            String d1  = words[position];
            ar.add(d1.toString()); 

            showDetails(position);

        }
    });

    return V;
} 
```

有了它，在片段内的列表视图上进行完整搜索。

# sql - oracle数据库架构的可视化工具

> ID：11912069
> 
> 赞同：0
> 
> 时间：2012-08-11T05:05:35.353
> 
> 标签：sql, oracle, database-design

任何人都可以向我推荐一个用于 Oracle 数据库架构的可视化工具。我已经将 mysql 工作台用于 mysql 服务器。我正在尝试为 oracle 数据库找到相同类型的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:38:54.667

如果您指的是包含图形查询构建器的工具，您应该查看以下工具：

*   [Toad（有一个免费软件版本，但我不确定它是否包含足够的内容）](http://toadfororacle.com/index.jspa)
*   [SQL 开发人员（免费）](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html)

还有其他选择，但我会说这两个是迄今为止你可以为 Oracle 开发获得的最好的选择。

如果您的意思是创建数据库的工具（即显示数据库图表并从中生成 SQL 脚本的图形工具），您应该查看：

*   [蟾蜍数据建模器](http://www.quest.com/toad-data-modeler/)
*   [设计](http://www.datanamic.com/dezign/)
*   [SQL Developer 数据建模器](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)

# vb.net - 使用带有字符串的 Visual Basic 字典

> ID：11912071
> 
> 赞同：0
> 
> 时间：2012-08-11T05:05:37.130
> 
> 标签：vb.net, dictionary

我在 Visual Basic 中有一个字典对象，我想用字符串键访问它。问题是，Visual Basic 存储的是对字符串的引用，而不是字符串本身。所以当我用一个键索引字典时，它总是失败，因为对象引用不相等。我无法索引的字典有什么意义？我该如何解决这个问题？

编辑：

更清楚地说，我希望能够更像 Python 字典那样使用它，其中字符串键是不可变类型，因此比较内容而不是对象引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T05:14:00.937

.Net 中的字符串**是**不可变的。并且 Dictionary**确实**可以按您希望的方式工作：

```
Dim Store As New Dictionary(Of String, Object)

Store("Key1") = New Form()
Store("Key2") = New Exception()
Store("Key3") = 10
Store("Key4") = "Test"

MessageBox.Show(Store("Key1").GetType().FullName) ' System.Windows.Forms.Form
MessageBox.Show(Store("Key2").GetType().FullName) ' System.Exception
MessageBox.Show(Store("Key3").GetType().FullName) ' System.Int32
MessageBox.Show(Store("Key4").GetType().FullName) ' System.String 
```

# jquery - 将备用 CSS 应用于 jQueryUI 对话框？

> ID：11912074
> 
> 赞同：0
> 
> 时间：2012-08-11T05:05:57.233
> 
> 标签：jquery, css, jquery-ui, themes

有没有一种直接的方法可以将一整套 CSS 应用于 DOM 树的一部分？例如，我有一个使用 jQuery 和 jQueryUI 来显示对话框的文档。对话框内容是通过 AJAX 加载的，因此它作为一个新的/单独的 HTML 元素树出现，我将其插入到对话框的 <div> 中。

本质上，我想做的是将不同的 jQueryUI 主题应用于对话框内容。因此，例如，对话框标题栏和按钮将根据一个主题设置样式，但对话框内容（按钮、输入字段、滚动条、文本等）将根据不同主题设置样式。

我想我可以为对话框内容中的所有类应用一个前缀，并为备用 CSS 选择器应用相同的前缀。有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:08:57.020

[http://jqueryui.com/download](http://jqueryui.com/download)

在右侧，有一个列表菜单，在该菜单中是一个选项

```
Advanced Theme Settings 
```

深入研究，你会得到一个带有两个输入的下拉菜单。第一个允许您附加一个“css 范围”，这实际上是您想要的。请随意命名。

**还**

如果您单击输入字段右侧的问号，它将或多或少准确地描述您在说什么。

`This field allows you to specify a CSS scope to limit your theme to a particular portion of a page. This is helpful when using multiple themes on a page. If you don't provide a CSS scope, your theme will apply to all UI elements on a page.`

进行中...

`In most situations, you won't need to specify a CSS scope. Please Note: If you provide a CSS scope, you will not get an example page included in your download.`

# java - 在 Android MapView 上的两个 GeoPoints 之间绘制路线时出错？

> ID：11912075
> 
> 赞同：1
> 
> 时间：2012-08-11T05:06:05.983
> 
> 标签：java, android, android-mapview, android-maps

我正在使用这种方法在我的应用程序中的地图上的两点之间绘制路线

```
 private void DrawPath(GeoPoint src, GeoPoint dest, int color,
          MapView mMapView01) {

        // connect to map web service
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");//from
        urlString.append( Double.toString((double)src.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)src.getLongitudeE6()/1.0E6 ));
        urlString.append("&daddr=");//to
        urlString.append( Double.toString((double)dest.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)dest.getLongitudeE6()/1.0E6 ));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        Log.d("xxx","URL="+urlString.toString());

        try
        {
          URL url = new URL(urlString.toString());
          urlString = null;
          HttpURLConnection urlConnection=(HttpURLConnection)url.openConnection();
          urlConnection.setRequestMethod("GET");
          urlConnection.setDoOutput(true);
          urlConnection.setDoInput(true);
          urlConnection.connect();

          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          Document doc = db.parse(urlConnection.getInputStream());

          if(doc.getElementsByTagName("GeometryCollection").getLength()>0)
          {

            String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue() ;
            Log.d("xxx","path="+ path);
            String [] pairs = path.split(" ");
            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height
            // src
            GeoPoint startGP = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));

            GeoPoint gp1;
            GeoPoint gp2 = startGP;

            for(int i=1;i<pairs.length;i++) // the last one would be crash
            {
              lngLat = pairs[i].split(",");
              gp1 = gp2;
              // watch out! For GeoPoint, first:latitude, second:longitude
              gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));

              mapRouteOverlay = new MapRouteOverlay(gp1,gp2,2,color);

              mMapView01.getOverlays().add(mapRouteOverlay);
              Log.d("xxx","pair:" + pairs[i]);
              Log.e("Check  ","Draw  " + mapRouteOverlay);
            }

          }
        }
        catch (MalformedURLException e)
        {
          e.printStackTrace();
        }
        catch (IOException e)
        {
          e.printStackTrace();
        }
        catch (ParserConfigurationException e)
        {
          e.printStackTrace();
        }
        catch (SAXException e)
        {
          e.printStackTrace();
        }

      } 
```

这种方法工作正常（从过去三个月开始）绘制路径但形成大约 15 天它会产生问题并且不显示/绘制路径。

我的 logcat 输出是

```
 08-11 10:15:47.363: W/System.err(401): org.xml.sax.SAXParseException: unterminated entity ref (position:ENTITY_REF &@1:808 in java.io.InputStreamReader@44f9cde8) 
 08-11 10:15:47.373: W/System.err(401):     at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:153)
 08-11 10:15:47.373: W/System.err(401):     at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:110)
 08-11 10:15:47.373: W/System.err(401):     at com.map.MapMainActivity.DrawPath(MapMainActivity.java:621)
 08-11 10:15:47.373: W/System.err(401):     at com.map.MapMainActivity.getDirection(MapMainActivity.java:582)
 08-11 10:15:47.373: W/System.err(401):     at com.map.MapMainActivity$DownloadWebPageTask.onPostExecute(MapMainActivity.java:1318)
 08-11 10:15:47.373: W/System.err(401):     at com.map.MapMainActivity$DownloadWebPageTask.onPostExecute(MapMainActivity.java:1)
 08-11 10:15:47.373: W/System.err(401):     at android.os.AsyncTask.finish(AsyncTask.java:417)
 08-11 10:15:47.373: W/System.err(401):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
 08-11 10:15:47.373: W/System.err(401):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
 08-11 10:15:47.373: W/System.err(401):     at android.os.Handler.dispatchMessage(Handler.java:99)
 08-11 10:15:47.373: W/System.err(401):     at android.os.Looper.loop(Looper.java:123)
 08-11 10:15:47.383: W/System.err(401):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 08-11 10:15:47.383: W/System.err(401):     at java.lang.reflect.Method.invokeNative(Native Method)
 08-11 10:15:47.383: W/System.err(401):     at java.lang.reflect.Method.invoke(Method.java:521)
 08-11 10:15:47.383: W/System.err(401):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 08-11 10:15:47.383: W/System.err(401):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 08-11 10:15:47.383: W/System.err(401):     at dalvik.system.NativeStart.main(Native Method) 
```

我不明白是什么问题？有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:48:41.260

看到这个[链接](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)肯定对你有帮助。因为自 2012 年 7 月 27 日起，通过解析 KML 文件从 Google 获取的 Google 路线不再可用（因为 Google 更改了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 获取），是时候迁移您的代码了到 JSON 而不是 KML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T05:15:14.230

如果您的目的只是绘制两个地理点之间的路径，那么您可以使用 android 内部地图活动。它很容易，没有错误的开销。

```
String uri = "http://maps.google.com/maps?saddr=" + currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T06:33:22.733

好吧，根据异常，`unterminated entity ref`您正在阅读的某些 XML 中有一个错误 ()。我猜你想画的点是从那个 XML 中读取的，显然那个 XML 中有一个错误（可能是大约 15 天）。如果可能，在编辑器中打开 XML 并查找`<ref>`没有匹配的`</ref>`.

然后你有两个选择：

1.  修复程序生成XML的问题
2.  尝试在您的应用程序中捕获 SAXParserException 并跳过错误点。

# php - 为什么即使我设置了 alpha 混合设置，使用 imagegif() 的 GIF 图像也会失去透明度？

> ID：11912077
> 
> 赞同：3
> 
> 时间：2012-08-11T05:07:36.870
> 
> 标签：php, image, gd

我正在尝试允许在我的网站上上传透明的个人资料图片（PNG 和 GIF），因为有时用户上传透明的个人资料图片会很烦人，并且透明区域会变黑。问题是即使使用了这些`imagealpha*()`功能，透明度仍然会丢失。

我确实意识到对此还有其他问题，但它们的答案对我不起作用。

这是我的代码：

```
// [...]

switch(strtolower($_FILES['picture']['type'])) {
   case 'image/jpeg':
      $image = imagecreatefromjpeg($_FILES['picture']['tmp_name']);
   break;
   case 'image/png':
      $image = imagecreatefrompng($_FILES['picture']['tmp_name']);
   break;
   case 'image/gif':
      $image = imagecreatefromgif($_FILES['picture']['tmp_name']);
   break;
   default:
      msg('Sorry, but the type of file that you selected is not allowed. We only allow JPEG, PNG, and GIF.','error');
      header("Location: /settings/profile");
      exit;
}

// Target dimensions
$max_width = 143;
$max_height = 143;

// Get current dimensions
$old_width  = imagesx($image);
$old_height = imagesy($image);

// Calculate the scaling we need to do to fit the image inside our frame
$scale      = min($max_width/$old_width, $max_height/$old_height);

// Get the new dimensions
$new_width  = ceil($scale*$old_width);
$new_height = ceil($scale*$old_height);

// Create new empty image
$new = imagecreatetruecolor($new_width, $new_height);

// Resize old image into new
imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);
$file_name = 'avatar_'.randString(20).mt_rand(111,999).'.'.str_replace('image/','',$_FILES['picture']['type']);

switch(strtolower($_FILES['picture']['type'])) {
   case 'image/jpeg':
      $img = imagejpeg($new, 'user/uploads/'.$file_name, 95);
   break;
   case 'image/png':
      imagealphablending($new, false);
      imagesavealpha($new, true);
      $img = imagepng($new, 'user/uploads/'.$file_name, 95);
   break;
   case 'image/gif':
      imagealphablending($new, false);
      imagesavealpha($new, true);
      $img = imagegif($new, 'user/uploads/'.$file_name);
   break;
}

imagedestroy($image);
imagedestroy($new);

if($img) {
   $dbUpdate = mysql_query("UPDATE users SET user_pic = '$file_name' WHERE uid = $userid");
}

if($img && $dbUpdate) {
   msg("Your profile picture has been changed successfully.","success");
   header("Location: /settings/profile");
   exit;
}

// [...] 
```

我尝试上传这个 GIF 只是为了测试：

![](../Images/e6c975a625c713df504b8434b108b80c.png)

但上传后就失去了透明度：

![在此处输入图像描述](../Images/e2d741e91b1056ed8e0b41f5941a8d54.png)

**我试图保留透明度信息，但它似乎不起作用。我做的不对吗？**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:18:29.713

`$new`在复制之前创建一个透明颜色并用该颜色填充图像。如果不这样做，新图像的背景颜色将默认为黑色。

```
$new = imagecreatetruecolor($new_width, $new_height); 
$transparent = imagecolorallocatealpha($new, 0, 0, 0, 127);
imagefill($new, 0, 0, $transparent);
imagealphablending($new, true); 
```

你也可以检查这个[问题](https://stackoverflow.com/questions/11620462/why-does-this-transparent-png-cause-borders-when-combined-using-gd/11620667)

# c++ - 如何在 C++ 中使用逻辑和

> ID：11912087
> 
> 赞同：0
> 
> 时间：2012-08-11T05:08:59.750
> 
> 标签：c++

```
if (age > 40 && age < 60) 
```

或者

```
if (age > 40  & age < 60) 
```

如您所见，我不确定 C++ 是使用两个和符号还是一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T05:11:09.113

第一个是正确的逻辑与`if (age > 40 && age < 60)`

*   `&&`是[逻辑与](http://en.wikipedia.org/wiki/Logical_conjunction)运算符
*   `&`- 可以是[引用（“地址”）运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Member_and_pointer_operators)或[`Bitwise AND`](http://en.wikipedia.org/wiki/Bitwise_operation#AND)运算符（在您的第二个示例中就是这种情况），具体取决于它在表达式中出现的位置。另请参阅[C 和 C++ 中的运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:16:27.373

使用它来获得正确的结果：

```
if ((age > 40) && (age < 60)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:11:25.143

它是&&，单与号是按位和函数。在很多情况下，如果您使用整数，结果可能相同，但也会有其他数据类型导致问题。

# java - 带有通配符的java泛型映射

> ID：11912090
> 
> 赞同：1
> 
> 时间：2012-08-11T05:09:25.727
> 
> 标签：java, generics, map, wildcard

我正在尝试构建一个地图，它的值可以是班级人员、动物或字符串的列表，然后我在最后阅读它。

我有以下问题：

```
Map<String,List<? extends Object>> someDataMap = 
new LinkedHashMap<String,List<? extends Object>>();

Person p = new Person();
Animals a = new Animals();

List<Person> personList  = p.getPersonList();
List<Animals> animalsList  = a.getAnimalsList();

List<String> someStrings = new ArrayList<String>();

someStrings.add("Employe123");
someStrings.add("Pet-Cat");

// putting lists into map
someDataMap.put("person",personList);
someDataMap.put("animals",animalsList);
someDataMap.put("listsOfData",someStrings);

// now reading the values.

   Map<String,List<? extends Object>> datMap  = 
   (Map<String,List<? extends Object>>)model.get("datMap");

List<Person> dataList = (List<Person>) datMap.get("person");

List<Animals> nodalList = (List<Animals>)datMap.get("animals");

List<String> listsOfData = (List<String>) datMap.get("listsOfData"); 
```

1.  这种方法是否正确，我的意思是放置这些值并阅读它们。
2.  为什么不使用没有参数的 Map，为什么使用泛型和带通配符的泛型，我确实读过它，但仍然不清楚

我想在没有 pojo 的情况下尝试这种方法。或 pojo 是必要的。

请帮助，您的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:38:44.193

如果您使用泛型，则无需显式转换从列表中读取的对象

假设`Map<String, Animal> map...`then`map.get("someKey");`将返回一个`Animal`.

在您的一些更复杂的示例中也是如此。

当您将不同类型的对象放入`Map`s 时，就会出现问题。听起来您需要 POJO 而不是`Map`;

```
class Stuff {

  private List<Person> people;
  private List<Animal> animals;
  private List<String> data;

 // Getters and setters

} 
```

这将更清洁，并且根据我对您问题的理解，似乎符合您的需要。只是传递`Stuff`而不是 a `Map`，在这种情况下它似乎不适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:58:52.800

这种方法不好，因为演员表不安全。强制转换`List<Person>`不会检查列表中的所有项目是否都是 type `Person`。`ClassCastException`当您尝试检索不是 a 的元素时，您会得到a `Person`。

您应该 1) 考虑是否真的需要将这些列表放入`Map`. 2）如果这样做，您可以在从地图中获取列表后复制列表（如果它们不是很大）：

```
List<Person> dataList = new ArrayList<Person>(datMap.get("person")); 
```

但是，当然不会在源列表中完成对列表的更新。

# jquery - 如何复制{光标：手；光标：指针}在jQuery中

> ID：11912091
> 
> 赞同：1
> 
> 时间：2012-08-11T05:09:30.917
> 
> 标签：jquery, css

`{cursor: hand; cursor: pointer}`出于跨浏览器的原因，使用 CSS 是一种常见的做法。你将如何使用 jQuery 实现相同的效果？如果你这样做，`$('#foo').css({cursor: 'hand', cursor:'pointer'});`它们是对象键并且会互相破坏。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T05:16:34.273

为什么不直接使用[`addClass`](http://api.jquery.com/addClass/)？

```
.pointer {
    cursor: hand;
    cursor: pointer;
}

$('#foo').addClass('pointer'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T05:37:39.093

```
if ($.browser.msie && $.browser.version < '6.0') {
    $('#foo').css('cursor','hand');
} else {
    $('#foo').css('cursor','pointer');
} 
```

或者

```
var cursor = ($.browser.msie && $.browser.version < '6.0') ? 'hand' : 'pointer';
$('#foo').css('cursor',cursor); 
```

# redirect - 将所有 HTTP 流量重定向到 localhost

> ID：11912092
> 
> 赞同：0
> 
> 时间：2012-08-11T05:09:37.197
> 
> 标签：redirect

这里太多了，我已经花了几个小时试图找到我的答案，但无济于事。

我经营一个小型 ISP。我们不使用任何形式的 PPP。但是，我控制客户的路由器。客户端路由器的默认网关通常设置为使用我的网络网关。但是，如果我将客户端的默认网关更改为指向我的服务器的别名，那么每当他们尝试去互联网上的任何地方时，即使是*google.com*，我也希望他们去*myserver/YouHaveNotPaidYourBill.php*。

我在服务器上使用 Debian 和 Lighttpd。

我已经尝试了我能想到的一切，服务器只是将数据包重定向到真正的网关。这不是我想要的。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:19:50.917

您最好的机会是毒化您客户端的 DNS，并让任何 DNS 请求指向您的服务器。

请注意，非 http 流量将静默失败，因此不浏览的客户端（即：用于洪流、VoIP 或简单地说，聊天但不浏览的人的线路）只会看到互联网静默失败，并且**会看**不到对话框。

此外，您也将无法获取 HTTPS 流量。例如，因为默认情况下，firefox 使用 HTTPS 进行 google 搜索，所以普通 joe 将尝试访问[https://www.google.com](https://www.google.com)，您无法拦截以显示您自己的消息。没有办法；如果在那里，您将能够拦截任何其他 https 网站（即：银行）以显示您自己的内容。

最后：这种事情也是拦截包裹和/或 MITM，并且**可能**是非法的，这取决于你住在哪里。放弃通信（当他不付款时）和像这样拦截它是不一样的。

# php - 如何使用php的push_array给二维数组添加时间戳和值

> ID：11912093
> 
> 赞同：0
> 
> 时间：2012-08-11T05:09:42.570
> 
> 标签：php, multidimensional-array, timestamp, push, square-bracket

如何使用方括号语法**向二维**数组`array_push`添加时间戳和值？

 **我成功地获得了行，每行都有一个时间戳和`mysql`数据库中的相关值。在检索结果时，我将这些时间和值添加到一个数组中，如下所示：

```
while($row=mysqli_fetch_array($r, MYSQLI_ASSOC)){   
$q1_array[$i][0]= $row["time"];             
$q1_array[$i][1]= $row["val"]; // the value ("val") will either be 1 or 0 (ON or OFF)
$i++;
} 
```

我需要最终的数组包含偶数个元素（这将在 30 分钟的时间间隔内），因此我对此进行了测试：

如果 LAST 数组元素具有时间戳和关联值`1`，我想在数组末尾附加结束半小时时间戳以及`0`.

```
if ($q1_array[sizeof($q1_array)-1][1] == 1){ 
//here I want to append a timestamp and value                       
} 
```

另一方面，如果 FIRST 元素具有关联值为 的时间戳`1`，我想在数组的开头附加起始半小时时间戳以及`0`.

```
else if ($q1_array[0][1]== 1){ 
//here I want to append a timestamp and value
} 
```

真的很感激帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:48:34.193

对于您的具体问题：

```
//process first element
if($q1_array[0][1] == 1){
    $time = roundTime($q1_array[0][0], 'start');
    $newElement = array( $time, 0 );
    array_unshift($q1_array, $newElement);
}

//process last element
$len = count($q1_array) - 1;
if($q1_array[$len][1] == 1){
    $time = roundTime($q1_array[$len][0], 'end');
    $newElement = array( $time, 0 );
    array_push($q1_array, $newElement);
}

//rounding function
//$timeIn = unix timestamp, $direction = 'start' or 'end'
function roundTime($timeIn , $direction){
    $tUnit = 1800; //seconds in half-hour
    if ($direction == 'start'){
        $output = floor($timeIn / $tUnit) * $tUnit;
    } else {
        $output = ceil($timeIn / $tUnit) * $tUnit;
    }
    return $output;
} 
```

这适用于 Unix 时间戳格式。如果使用 MySQL 日期时间，您需要进行相应的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:42:17.777

要将新行添加到数组的末尾，请编写：

```
$new_row = array($timestamp, 0);
$q1_array[] = array($timestamp, 0); 
```

要在数组的开头插入，请使用`array_splice`：

```
array_splice($q1_array, 0, 0, $new_row); 
```**

# printing - 使用标记和多边形在 Google Map API v3 中打印当前视图

> ID：11912094
> 
> 赞同：2
> 
> 时间：2012-08-11T05:09:50.063
> 
> 标签：printing, map, polygon, marker

我在 google map v3 API 中遇到问题 我正在尝试打印我的地图的当前视图，包括标记和多边形形状

我想有一个链接，它允许我打印地图的当前视图，包括标记和多边形形状

**目前我正在使用这种方式**

```
<a href="javascript:void(0);" onclick="myPrint('map');">Print Map</a> 
```

**这就是功能**

```
function myPrint(id){
    w=window.open();
    w.document.write($('#'+id).html());
    w.print();
} 
```

但它只打印当前视图但没有标记和多边形

请帮我找到解决方案

非常感谢 ：）

# python - 删除python列表字典中的最后一个元素

> ID：11912097
> 
> 赞同：6
> 
> 时间：2012-08-11T05:10:42.797
> 
> 标签：python, dictionary

在列表字典中删除每个列表的最后一个元素的更pythonic或更有效的方法是什么？

例如，采取这个：

```
listDict = {'tom': [-2,10,2,-8], 'sam': [-9,-10,-10,-7]} 
```

并将其转换为：

```
listDict = {'tom': [-2,10,2], 'sam': [-9,-10,-10]} 
```

这就是我目前正在做的事情：

```
new = {}
for t,item in listDict.iteritems():
    new[t] = [item[0], item[1], item[2]]
listDict= new 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T05:12:09.017

我会使用字典理解：

```
new_dict = {key: value[:-1] for key, value in listDict.items()} 
```

对于较旧的 Python 版本，您必须使用`dict()`构造函数：

```
new_dict = dict((key, value[:-1]) for key, value in listDict.items()) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-11T05:38:08.093

与此解决方案相比，随着列表长度的增加，Blender 的答案变得非常低效：

```
for k, v in listDict.items():
    v.pop() 
```

对于您的示例`listDict`，差异不大，只有 27%。但是使用具有 100 个键和长度从 50 到 100 的列表并弹出 50 个的 dict，dict 理解方法花费的时间超过 12 倍。这是因为此解决方案会修改现有列表，而不是每次都创建每个列表的副本。

恐怕没有这样的单行版本，除非你在[*作弊*](https://stackoverflow.com/q/5753597/566644)。我之所以提到这一点，是为了防止某些 dofus 不得不在评论中指出这一点。*请*不要将 dict/list 理解用于副作用。

当然，您可以按如下方式在一行中执行此操作，但[PEP8](http://www.python.org/dev/peps/pep-0008/)说“而不是”：

```
for k, v in listDict.items(): v.pop() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T05:43:59.757

如果您想就地修改，则此替代方法不需要创建新字典或任何其他重新分配。

```
listDict = {'tom': [-2,10,2,-8], 'sam': [-9,-10,-10,-7]}
for i in listDict.values():
    i.pop() 
```

它不需要创建新列表。记住列表是可变的。

如果您确实想要新的字典和列表，那么之前的响应会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T05:54:35.313

只是为了保持分数：

```
def f1():
    listDict = {'tom': [-2,10,2,-8], 'sam': [-9,-10,-10,-7]}
    return {key: value[:-1] for key, value in listDict.items()}

def f2():
    listDict = {'tom': [-2,10,2,-8], 'sam': [-9,-10,-10,-7]}
    for k, v in listDict.items():
        v.pop()    

    return listDict    

cmpthese.cmpthese([f1,f2]) 
```

印刷：

```
 rate/sec    f1     f2
f1  571,487    -- -23.5%
f2  746,966 30.7%     -- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-02T14:54:22.630

如果您能够使用`pandas`，请给出`dict`：

```
listDict = {'tom': [-2,10,2,-8], 'sam': [-9,-10,-10,-7]} 
```

像这样删除最后一个元素：

```
import pandas 
df = pandas.DataFrame(data=listDict)
new = df[:-1]
print(new) 
```

产生：

```
 tom  sam
0   -2   -9
1   10  -10
2    2  -10 
```

如果你想要它作为`dict`然后：

```
print(new.to_dict('list')) 
```

产生：

```
{'tom': [-2, 10, 2], 'sam': [-9, -10, -10]} 
```

# java - 如何在 Jlist 中添加两列？

> ID：11912100
> 
> 赞同：1
> 
> 时间：2012-08-11T05:11:22.510
> 
> 标签：java, swing, jtable, jlist, listcellrenderer

我找到了 Dual`JList`示例代码，但我需要在`Jlist`. 如何在a中添加两列`Jlist`？

我尝试使用`ListCellRenderer`，但未能向模型中添加元素。

[这是](http://www.java2s.com/Code/Java/Swing-JFC/DualJListwithbuttonsinbetween.htm)带有图像的网页中显示的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T05:59:59.120

你的意思是这样的？

![双持桌](../Images/3227b2415808a3edd69a0b7e4a8d3dc3.png)

我会先阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

主框架...

```
public class DualTableFrame extends JFrame {

    private JTable leftTable;
    private JTable rightTable;
    private JButton addButton;
    private JButton removeButton;

    public DualTableFrame() {

        setTitle("Dual wielding tables");
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        setLayout(new GridBagLayout());

        leftTable = new JTable(new SimpleColorTableModel());
        rightTable = new JTable(new SimpleColorTableModel());

        setupTable(leftTable);
        setupTable(rightTable);

        populate((SimpleColorTableModel) leftTable.getModel());

        addButton = new JButton("Add >>");
        removeButton = new JButton("<< Remove");

        JPanel pnlActions = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        pnlActions.add(addButton, gbc);

        gbc.gridy++;
        pnlActions.add(removeButton, gbc);

        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 0.33;
        gbc.fill = GridBagConstraints.HORIZONTAL;

        add(new JLabel("Available Choices"), gbc);
        gbc.gridx++;
        add(new JPanel(), gbc);
        gbc.gridx++;
        add(new JLabel("Your Choices"), gbc);

        gbc.gridy++;
        gbc.gridx = 0;
        gbc.weighty++;
        gbc.fill = GridBagConstraints.BOTH;

        add(new JScrollPane(leftTable), gbc);
        gbc.gridx++;
        add(pnlActions, gbc);
        gbc.gridx++;
        add(new JScrollPane(rightTable), gbc);

        setSize(400, 600);

        addButton.setEnabled(false);
        removeButton.setEnabled(false);

        leftTable.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {

                int count = leftTable.getSelectedRowCount();
                addButton.setEnabled(count > 0);

            }
        });
        rightTable.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {

                int count = rightTable.getSelectedRowCount();
                removeButton.setEnabled(count > 0);

            }
        });

        addButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                moveSelectedRow(leftTable, rightTable);

            }
        });

        removeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                moveSelectedRow(rightTable, leftTable);

            }
        });

    }

    protected void moveSelectedRow(JTable from, JTable to) {

        SimpleColorTableModel fromModel = (SimpleColorTableModel) from.getModel();
        SimpleColorTableModel toModel = (SimpleColorTableModel) to.getModel();

        for (int index : from.getSelectedRows()) {

            Vector rowValue = (Vector) fromModel.getDataVector().get(index);

            toModel.addRow(rowValue);

        }

        int selectedRow = -1;
        while ((selectedRow = from.getSelectedRow()) != -1) {

            fromModel.removeRow(selectedRow);

        }

        from.clearSelection();

    }

    protected void populate(SimpleColorTableModel model) {

        model.addRow(new Object[]{"Black", Color.BLACK});
        model.addRow(new Object[]{"Blue", Color.BLUE});
        model.addRow(new Object[]{"Cyan", Color.CYAN});
        model.addRow(new Object[]{"Dark Gray", Color.DARK_GRAY});
        model.addRow(new Object[]{"Gray", Color.GRAY});
        model.addRow(new Object[]{"Green", Color.GREEN});
        model.addRow(new Object[]{"Light Gary", Color.LIGHT_GRAY});
        model.addRow(new Object[]{"Mangenta", Color.MAGENTA});
        model.addRow(new Object[]{"Orange", Color.ORANGE});
        model.addRow(new Object[]{"Pink", Color.PINK});
        model.addRow(new Object[]{"Red", Color.RED});
        model.addRow(new Object[]{"White", Color.WHITE});
        model.addRow(new Object[]{"Yellow", Color.YELLOW});

    }

    protected void setupTable(JTable table) {

        table.setFillsViewportHeight(true);

        table.setDefaultRenderer(Color.class, new ColorTableCellRenderer());

    }
} 
```

表格单元格渲染器

```
public class ColorTableCellRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        setText(null);
        if (value instanceof Color) {

            setOpaque(true);
            setBackground((Color)value);

        }

        return this;

    }

} 
```

表模型

```
public class SimpleColorTableModel extends DefaultTableModel {

    public SimpleColorTableModel() {

        addColumn("Name");
        addColumn("Color");

    }

    @Override
    public Class<?> getColumnClass(int columnIndex) {

        Class clazz = String.class;

        switch (columnIndex) {

            case 1:
                clazz = Color.class;
                break;

        }

        return clazz;

    }

} 
```

# javascript - 仅滚动 div 和 div 溢出问题

> ID：11912108
> 
> 赞同：1
> 
> 时间：2012-08-11T05:12:43.853
> 
> 标签：javascript, jquery, css

我正在尝试将滚动事件应用于元素之一

```
<div style="position: fixed;width: 30px;height: 300px;overflow: hidden;left: 50%;margin-left: -15px;text-align: center" id="chars_con">
    <?php
    for($i = 97; $i <= 122; $i++){
    ?>
    <div class="chars" ch_to="<?php echo "chars$i"; ?>"><?php echo strtoupper(chr($i));?><div class="chars_a" id="<?php echo "chars$i"; ?>"><?php echo strtoupper(chr($i));?></div></div>
        <?php }
    ?>
</div> 
```

**我的 javascript**

```
window.onload=function(){
        $(".chars").hover(function(){
            $("#"+$(this).attr("ch_to")).show();
        },function(){
            $("#"+$(this).attr("ch_to")).hide();
        });
        $("#chars_con").hover(function(){
            $("#chars_con").css({marginTop:$("#chars_con").scrollTop()});
        },function(){

        });
    } 
```

**css**

```
div.chars{background-color: #66ccff;padding: 3px 7px;font-weight: bold;cursor: pointer}
    div.chars:hover{background-color: #990099;color: #ffffff}
    div.chars_a{background-color: #0000ff;color: #ffffff;border: 1px solid #ffff00;font-weight: bold;cursor: pointer;text-align: center;position: absolute;padding: 10px 15px;display: none;margin-left: -13px;margin-top: -25px;overflow: visible} 
```

溢出问题：我无法解释这一点，所以请删除溢出：隐藏形式 div：#chars_con 并查看效果.. 我想做extaly，就像我们没有溢出：隐藏一样。但我想保留此属性，因为我想对此应用滚动效果

滚动问题：当我将鼠标悬停并滚动时，我想滚动这个 div

请提出任何问题，因为我无法解释，但你可以从我在这里提到的代码中得到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:53:06.957

这是触摸屏式滚动的粗略示例：

**JavaScript/jQuery：**

```
var last_pos = 0;
$(document).ready(function() {
    $('#scroll').mousemove(function(e) {
        if(e.clientY > last_pos) {
            $('#scroll').scrollTop($('#scroll').scrollTop() - 5);
        } else {
            $('#scroll').scrollTop($('#scroll').scrollTop() + 5);
        }
        last_pos = e.clientY;
    });
}); 
```

**HTML：**

```
<div id="scroll">
    This text will scroll.<br />
    Line 2<br />
    Line 3<br />
    Blah blah<br />
    This text will scroll.<br />
    This text will scroll.<br />
    This text will scroll.<br />
    Line ?<br />
    Line ?++<br />
    This text will scroll.<br />
    This text will scroll.<br />
</div> 
```

**CSS：**

```
#scroll {
    width: 200px;
    height: 100px;
    overflow: hidden;
    background: #eee
} 
```

**示例：http: [//jsfiddle.net/wEKhG/1/](http://jsfiddle.net/wEKhG/1/)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-11T05:39:02.643

根据我对您的问题的理解，我认为您想要一个隐藏滚动的 div，并且只想在将鼠标悬停在滚动条上时显示滚动条。如果是这种情况，您可以通过以下简单方式进行操作

```
<div id="division_to_scroll" style='{overflow:hidden}'/> 
```

然后在 mouseover 上附加一个 jquery 事件

```
$('#division_to_scroll').mouseenter(function(){
$('#division_to_scroll').css("overflow", "scroll");}).mouseleave(function(){$('#division_to_scroll').css("overflow", "hidden");});​ 
```

[这是一个jsfiddle](http://jsfiddle.net/bLw4u/)

# c# - 拆分 XML 文档，从重复元素创建多个输出文件

> ID：11912109
> 
> 赞同：4
> 
> 时间：2012-08-11T05:12:44.683
> 
> 标签：c#, xml, .net-2.0, xmldocument

我需要获取一个 XML 文件并从输入文件的重复节点创建多个输出 xml 文件。源文件“AnimalBatch.xml”如下所示：

`<?xml version="1.0" encoding="utf-8" ?>`
`<Animals>`
`<Animal id="1001">`
`<Quantity>One</Quantity>`
`<Adjective>Red</Adjective>`
`<Name>Rooster</Name>`
`</Animal>`
`<Animal id="1002">`
`<Quantity>Two</Quantity>`
`<Adjective>Stubborn</Adjective>`
`<Name>Donkeys</Name>`
`</Animal>`
`<Animal id="1003">`
`<Quantity>Three</Quantity>`
`<Color>Blind</Color>`
`<Name>Mice</Name>`
`</Animal>`
`</Animals>`

程序需要对重复的“Animal”进行拆分，生成3个文件，分别命名为：Animal_1001.xml、Animal_1002.xml、Animal_1003.xml

每个输出文件应该只包含它们各自的元素（这将是根）。AnimalsBatch.xml 中的 id 属性将提供 Animal_xxxx.xml 文件名的序列号。id 属性不需要在输出文件中。

* * *

Animal_1001.xml：
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>One</Quantity>`
`<Adjective>Red</Adjective>`
`<Name>Rooster</Name>`
`</Animal>`

* * *

Animal_1002.xml
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Two</Quantity>`
`<Adjective>Stubborn</Adjective>`
`<Name>Donkeys</Name>`
`</Animal>`

* * *

Animal_1003.xml>
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Three</Quantity>`
`<Adjective>Blind</Adjective>`
`<Name>Mice</Name>`
`</Animal>`

我想用 XmlDocument 来做这件事，因为它需要能够在 .Net 2.0 上运行。

我的程序如下所示：

```
 static void Main(string[] args)
    {
        string strFileName;    
        string strSeq;                    

        XmlDocument doc = new XmlDocument(); 
        doc.Load("D:\\Rick\\Computer\\XML\\AnimalBatch.xml");

        XmlNodeList nl = doc.DocumentElement.SelectNodes("Animal");

        foreach (XmlNode n in nl)
        {
            strSeq = n.Attributes["id"].Value;

            XmlDocument outdoc = new XmlDocument();
            XmlNode rootnode = outdoc.CreateNode("element", "Animal", "");

            outdoc.AppendChild(rootnode); // Put the wrapper element into outdoc

            outdoc.ImportNode(n, true);   // place the node n into outdoc
            outdoc.AppendChild(n);        // This statement errors:
            // "The node to be inserted is from a different document context."

            strFileName = "Animal_" + strSeq + ".xml";

            outdoc.Save(Console.Out);
            Console.WriteLine();
        }
        Console.WriteLine("END OF PROGRAM:  Press <ENTER>");
        Console.ReadLine();
    } 
```

我想我有2个问题。

A）在将节点 n 上的 ImportNode 导入 o​​utdoc 之后，我调用 outdoc.AppendChild(n) 抱怨：“要插入的节点来自不同的文档上下文。” 我不知道这是否是在 ForEach 循环中引用节点 n 的范围问题 - 或者我是否以某种方式没有正确使用 ImportNode() 或 AppendChild。ImportNode() 的第二个参数设置为 true，因为我希望 Animal 的子元素（3 个任意命名为 Quantity、Adjective 和 Name 的字段）最终出现在目标文件中。

B）第二个问题是将 Animal 元素放入 outdoc 中。我得到 '' 但我需要 ' ' 所以我可以将节点 n 放在里面。我认为我的问题是我在做什么： outdoc.AppendChild(rootnode);

为了显示 xml，我正在做： outdoc.Save(Console.Out); 我确实有将 save() 保存到输出文件的代码——只要我能正确组装 outdoc，它就可以工作。

有一个类似的问题： [Split XML in Multiple XML files](https://stackoverflow.com/questions/2056910/split-xml-in-multiple-xml-files)，但我还不明白解决方案代码。我认为我非常接近这种方法，并将感谢您提供的任何帮助。

我将使用 XmlReader 执行相同的任务，因为我需要能够处理大型输入文件，并且我知道 XmlDocument 会读取整个内容并可能导致内存问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:08:14.847

这是一个简单的方法，看起来你正在寻找什么

```
public void test_xml_split()
{
    XmlDocument doc = new XmlDocument();
    doc.Load("C:\\animals.xml");
    XmlDocument newXmlDoc = null;

    foreach (XmlNode animalNode in doc.SelectNodes("//Animals/Animal"))
    {
        newXmlDoc = new XmlDocument();
        var targetNode = newXmlDoc.ImportNode(animalNode, true);
        newXmlDoc.AppendChild(targetNode);
        newXmlDoc.Save(Console.Out);
        Console.WriteLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T02:11:48.407

这种方法似乎可以在不使用“var targetnode”语句的情况下工作。它从 ForEach 循环中 outdoc 的“Animal”元素创建一个名为 targetNode 的 XmlNode 对象。我认为我的原始代码中存在的主要问题是：A）我错误地获取了 nodelist nl。B）我无法“导入”节点 n，我认为是因为它专门与 doc 相关联。它必须创建为自己的节点。

先前提出的解决方案的问题是使用“var”关键字。我的程序必须假设为 2.0 并且随 v3.0 一起提供。我喜欢 Rogers 的解决方案，因为它简洁。对我来说——我想把每件事都作为一个单独的陈述来做。

```
 static void SplitXMLDocument() 
    {
        string strFileName;
        string strSeq;
        XmlDocument doc = new XmlDocument();             // The input file
        doc.Load("D:\\Rick\\Computer\\XML\\AnimalBatch.xml");
        XmlNodeList nl = doc.DocumentElement.SelectNodes("//Animals/Animal");

        foreach (XmlNode n in nl)
        {
            strSeq = n.Attributes["id"].Value;           // Animal nodes have an id attribute

            XmlDocument outdoc = new XmlDocument();      // Create the outdoc xml document
            XmlNode targetNode = outdoc.CreateElement("Animal"); // Create a separate node to hold the Animal element

            targetNode = outdoc.ImportNode(n, true);     // Bring over that Animal
            targetNode.Attributes.RemoveAll();           // Remove the id attribute in <Animal id="1001">

            outdoc.ImportNode(targetNode, true);         // place the node n into outdoc
            outdoc.AppendChild(targetNode);              // AppendChild to make it stick

            strFileName = "Animal_" + strSeq + ".xml";                
            outdoc.Save(Console.Out); Console.WriteLine();
            outdoc.Save("D:\\Rick\\Computer\\XML\\" + strFileName);
            Console.WriteLine();
        }
    } 
```

# google-maps - 谷歌地图 - 在 Chrome 21 中放大时不显示图块 - IE9/FF11 OK

> ID：11912115
> 
> 赞同：0
> 
> 时间：2012-08-11T05:13:44.353
> 
> 标签：google-maps, google-maps-api-3

如果您导航[到此页面](http://www.stockland.com.au/residential/house-land-finder.aspx)并切换到 Chrome 21 中的地图视图，然后平移和缩放，则图块似乎没有绘制。对开发工具的更深入调查表明，根本没有尝试下载磁贴。奇怪的是，也没有错误或记录的消息。

更奇怪的是 - 此页面在 IE9 和 FF11 & 14 中完美运行。

想法？

编辑：也许有一些额外的细节——当我四处寻找时，“资源”选项卡中添加了一些图像，其中包含[http://maps.googleapis.com/maps/gen_204](http://maps.googleapis.com/maps/gen_204)之类的 URL ？...据我所知这些都返回 204 的 HTTP 状态 - 无内容。在其中一个正常运行的浏览器中会发生同样的事情，但紧随其后的是从[http://mt0.googleapis.com/vt?lyrs=m@182176386&src=apiv3&hl=en-AU&x=472&y等 URL 加载平铺数据=293&z=9&s=Galil&style=api%7Csmartmaps](http://mt0.googleapis.com/vt?lyrs=m@182176386&src=apiv3&hl=en-AU&x=472&y=293&z=9&s=Galil&style=api%7Csmartmaps) - 除了在 Chrome 中不会发生。

IE 的开发工具说，该图像的发起者（mt0 之一）是 img.src 属性更改 - 表明某些 JS 已正确设置 img 元素的 src 以获取图块。那么为什么在 Chrome 中不会发生这种情况——也许某些事件没有被引发或悄悄地发生异常？我设置了“暂停所有异常”以及“未捕获”，但这并没有产生任何结果。

环顾四周，我看到了许多类似的请求，但似乎没有什么相关的，所以再次感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:51:39.717

作为记录，我们发现问题在于添加了“假”标记。

我们使用的 InfoBox 插件需要对构造函数的标记引用。我们在正确的“位置”创建该标记，并将“图标”分配给位置为 (0,0)、大小为 (0,0) 且 url 为空字符串的 MarkerImage。

虽然这种方法在 IE/FF 中似乎可以正常工作，但在 Chrome 中似乎效果不佳。在这个阶段，我们还没有试图找出原因。

只需从发送到 google.maps.Marker 的构造函数的 MarkerOptions 对象中省略“icon”属性就可以了；IE

```
var mkr = new google.maps.Marker(
    {
        map: this.googleMap,
        position: this.position,
        clickable: false
    }
); 
```

代替

```
var mkr = new google.maps.Marker(
    {
        map: this.googleMap,
        position: this.position,
        clickable: false,
        icon: new google.maps.MarkerImage(
                '',
                new google.maps.Size(0,0),
                new google.maps.Point(0,0),
                new google.maps.Point(0,0)
        )
    }
); 
```

# ruby-on-rails - 在控制器和模型中编码的最佳实践？

> ID：11912116
> 
> 赞同：0
> 
> 时间：2012-08-11T05:13:44.987
> 
> 标签：ruby-on-rails, model-view-controller

我有这个简短的代码，用于在有人评论他的帖子时向用户发送电子邮件通知。我关心的是这个片段的位置。

```
if user.settings.enabled_notifications && some_other_conditions
    NotificationMailer.notify_topic_owner(comment,owner)
end 
```

`notify_topic_owner()`只是根据传递给它的参数发送一封邮件。

基本上，`some_other_conditions`包含一些 3-4 个条件被评估为 true 以便发送邮件。很明显，控制器不是此代码的正确位置（我在某处读到控制器代码应该轻巧干净）。我不认为我可以将此代码段移至助手，因为助手包含视图代码。同样，模型看起来也不正确，因为代码实际上与模型无关（或者是吗？）。

我要为这个简短的片段制作一个新模块吗？展望未来，如果您还可以讲述最佳实践或针对此类沉闷困惑的一些参考，我将不胜感激。我发现自己经常为此苦苦挣扎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:28:11.233

你在问正确的问题。为什么不更进一步，尝试做一些 OOP：（**下面的代码并不理想**，但它应该让您对如何处理它有一个很好的了解）。我没有考虑“some_other_conditions”，因为这些可能是您最了解的东西，它适合您的域逻辑。

```
# A class for notification. I usually avoid depending directly on xxxMailer and similar
class Notifier

  # Inject the recipient
  def initialize(recipient)
    @recipient = recipient
  end

  def topic_commented(comment)
    # Only let Notifier know that NotificationMailer exists. (not perfect OOP. could inject this too)
    NotificationMailer.notify_topic_owner(comment,@recipient) if @recipient.notifications_enabled? # Ideally should be telling, not asking. Oh well.
  end

end

class User
  # Sprinkling of Law of Demeter
  def notifications_enabled?
    settings.enabled_notifications
  end
end 
```

你打电话`Notifier.new(current_user).topic_commented("Hello World")`。将来，`topic_commented`可以发送短信、烟雾信号、打印、写入数据库等，而无需您`NotificationMailer.xxxx`在许多地方更改调用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:31:14.453

我用来思考的惯例是：“是否应该在**每次**添加评论时发送邮件，无论采取什么行动？”。考虑一下，如果将来您实施了一个添加评论的自动化系统，那么在这种情况下是否应该发送邮件。如果是这样，它可能是模型代码；否则，它与添加注释的方式有关，它是控制器代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T06:26:49.473

我看不出把它放在控制器中会有什么问题。如果它与控制器中的方法有关，它肯定可以去那里。如果在保存或其他操作后调用它，您可能可以将其移动到模型中。

一般来说，我认为最佳实践是尝试将尽可能多的东西放入模型和类中。将控制器保存为特定于控制器的代码，助手应该只包含与在视图中呈现内容相关的代码。很多时候，我会在我的控制器中获取代码并在重构时将其移动到模型中。无论如何我的意见:)

# c# - 如何为wp7动态更改应用程序栏背景颜色

> ID：11912121
> 
> 赞同：0
> 
> 时间：2012-08-11T05:14:31.797
> 
> 标签：c#, windows-phone-7

我已经通过代码（在 xaml.cs 中）创建了一个应用程序栏，但是如果我尝试更改应用程序栏的背景颜色，则会引发错误。我认为以下代码对于应用栏不正确。

```
ApplicationBar.BackgroundColor = new SolidColorBrush(Colors.Black); 
```

有人可以帮我吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T05:17:57.457

[BackgroundColor](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.applicationbar.backgroundcolor%28v=VS.92%29.aspx)属性类型是*Color*而不是*Brush*：

```
public Color BackgroundColor { get; set; } 
```

所以，以下应该工作：

```
ApplicationBar.BackgroundColor = Colors.Black; 
```

PS。大多数时候，阅读编译时错误消息可以让您更加清晰。

# iphone - 如何获取表格视图单元格上按钮动态按钮的按钮单击事件

> ID：11912123
> 
> 赞同：-1
> 
> 时间：2012-08-11T05:14:36.493
> 
> 标签：iphone, ios, uitableview

我正在开发在每个表格视图单元格中具有动态按钮数量功能的应用程序。按钮的数量随行而变化。

我想给图像一个按钮来点击。但我无法得到它，所以任何人都可以帮助我改变所选按钮的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:35:29.297

您应该将标签添加到 yourButton 并在方法中分配`indexPath.row`给它。`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

```
UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [yourButton setTitle:@"Button" forState:UIControlStateNormal];
    [yourButton addTarget:self action:@selector(buttonSelected:) forControlEvents:UIControlEventTouchUpInside]; 
    yourButton.tag=indexPath.row;
    yourButton.frame = CGRectMake(5, 5, 100, 30);     
    [cell addSubview:yourButton]; 
```

之后，定义`buttonSelected:`方法。

```
-(void)buttonSelected:(id)sender{

    UIButton *button = (UIButton *)sender;
    NSLog(@"buttonSelectd: %d",button.tag);
   //implement your code what you want.

} 
```

我想这会对你有所帮助。

# asp.net-mvc - 如何在 ASP.NET MVC 中为自定义用户对象实现 IIdentity？

> ID：11912125
> 
> 赞同：4
> 
> 时间：2012-08-11T05:14:58.800
> 
> 标签：asp.net-mvc, forms-authentication

在我的 ASP.NET MVC 应用程序中，我正在尝试创建一个自定义 HttpContent.User 对象。我首先创建了一个实现 IPrincioal 的 Member 类。

```
public class Member : IPrincipal
{
    public string Id { get; set; }
    public IIdentity Identity { get; set; }
    public bool IsInRole(string role) { throw new NotImplementedException(); }
    ...
} 
```

然后在身份验证时，我将 HttpContext.User 设置为 Member 类的实例：

```
FormsAuthentication.SetAuthCookie(email, false);
HttpContext.User = member; 
```

然后稍后我想检查用户是否经过身份验证，如下所示：

```
if (User.Identity.IsAuthenticated) { ... } 
```

这就是我卡住的地方。**我不确定我需要为`public IIdentity Identity`成员实例上的属性做什么。**这样我就可以使用 HttpContext.User 对象，如下所示：

```
IsAuthenticated = HttpContext.User.Identity.IsAuthenticated;
ViewBag.IsAuthenticated = IsAuthenticated;

if (IsAuthenticated) {
    CurrentMember = (Member)HttpContext.User;
    ViewBag.CurrentMember = CurrentMember;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T10:44:44.010

Principal 不是你可以在编写 auth cookie 时设置一次然后忘记的东西。在后续请求期间，将读取 auth cookie 并在执行操作方法之前重建`IPrincipal`/ 。`IIdentity`发生这种情况时，尝试将`HttpContext.User`转换为您的自定义`Member`类型将引发异常。

一种选择是在 中截取`ActionFilter`，然后只包装标准实现。

```
public class UsesCustomPrincipalAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var systemPrincipal = filterContext.HttpContext.User;
        var customPrincipal = new Member(systemPrincipal)
        {
            Id = "not sure where this comes from",
        };
        filterContext.HttpContext.User = customPrincipal;
    }
}

public class Member : IPrincipal
{
    private readonly IPrincipal _systemPrincipal;

    public Member(IPrincipal principal)
    {
        if (principal == null) throw new ArgumentNullException("principal");
        _systemPrincipal = principal;
    }

    public string Id { get; set; }

    public IIdentity Identity { get { return _systemPrincipal.Identity; } }

    public bool IsInRole(string role)
    {
        return _systemPrincipal.IsInRole(role);
    }
} 
```

`IPrincipal`这样，您就不会丢失默认和`IIdentity`实现的任何开箱即用的东西。您仍然可以`IsAuthenticated`在 上调用`IIdentity`，甚至`IsInRole(string)`在 上调用`IPrincipal`。您唯一获得的是`Id`自定义实现的额外属性`IPrincipal`（尽管我不确定它来自哪里或为什么需要它）。

# mongodb - 了解 Mongoose 中的关系和外键

> ID：11912127
> 
> 赞同：20
> 
> 时间：2012-08-11T05:15:22.700
> 
> 标签：mongodb, join, foreign-keys, mongoose

在 MongoDB/Mongoose 中，如何定义关系？我认为我见过几种方法，但我不确定我是否理解其中的差异或何时使用哪种方法。我正在使用猫鼬 3

我已经定义`Todo`和`TodoList`建模，关系很明显。因此，按照文档[http://mongoosejs.com/docs/documents.html](http://mongoosejs.com/docs/documents.html)，我定义了如下类：

```
# Todo.coffee
mongoose = require "mongoose"

todoSchema = mongoose.Schema
    name: String
    desc: String
    dueOn: Date
    completedOn: Date

module.exports = mongoose.model "Todo", todoSchema

# TodoList.coffee

mongoose = require "mongoose"
Todo = require "./Todo"

todoListSchema = mongoose.Schema
    name: String
    todos: [Todo.schema]

module.exports = mongoose.model "TodoList", todoListSchema 
```

然后我尝试测试这些类：

```
list = new TodoList
    name: "List 1"
    todos: [
        { name: "Todo 1", desc: "Hello", dueOn: new Date(2012,10,1), completedOn: new Date(2012,10,2) }
        { name: "Todo 2" }
        { name: "Todo 3", desc: "Hello 2", dueOn: new Date(2012,10,6), completedOn: new Date(2012,10,2) }
        { name: "Todo 4" }
    ]
#list.todos.push { name: "Todo 5" }
console.log "List", list
list.save (err) ->
    if !err
        TodoList.find {}, (err, lists) ->
            console.log "TODOS"
            console.log lists.length, lists
            done(err)
    else 
        console.log "ERROR!!!"
        done err 
```

当我尝试做任何事情时`Todo.find()`，我什么也得不到，所以 Model ( `Todo.coffee`) 有点多余？看起来`Todo`存储在 中`TodoList`，作为用户我可能不在乎，但我想知道这意味着什么？例如。文档会变得太大吗？1 待办事项过多的待办事项列表？这有关系吗？如果我允许嵌套的 Todos 怎么办（不是我想这样做只是为了理解），那么单独存储文档会更好吗？如果我愿意，我该怎么做？我什么时候做？

我实际上在 Mongoose 2 中看到了另一种方法。我不知道，在 3 中是否有可能。使用`ObjectId`而不是嵌套文档之类的东西。也许那是分开存放？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-12T07:19:29.383

我对 Node、Mongoose 和 Mongo 还很陌生，但我想我至少可以解决您的部分问题。:)

您当前的方法与我最初尝试的方法相同。基本上，它最终以非常相似的方式存储它（用 JS 编写，因为我不知道 CoffeeScript）：

```
var todoListSchema = new mongoose.Schema({
    name: String,
    todos: [{
        name: String,
        desc: String,
        dueOn: Date,
        completedOn: Date
    }]
}); 
```

后来我找到了这种方法，这就是我一直在寻找的方法，并且我认为您的意图是：

```
var todoListSchema = new mongoose.Schema({
    name: String,
    todos: [{
        type: mongoose.Schema.Types.ObjectId,
        ref: 'Todo' //Edit: I'd put the schema. Silly me.
    }]
}); 
```

这存储了一个 ObjectIds 数组，然后您可以`Query#populate`在 Mongoose 中使用它来加载它。

我不知道技术含义，但如果我将它们分开，在我的大脑中会更有意义，所以这就是我正在做的事情。:)

编辑：这是一些可能有用的官方文档：http: [//mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

# android - OpenGL ES 2.0 的 Matrix.setLookAtM 问题

> ID：11912130
> 
> 赞同：3
> 
> 时间：2012-08-11T05:16:36.943
> 
> 标签：android, eclipse, opengl-es

我在尝试获取触摸输入并沿 x 和 y 轴移动相机时遇到问题。我假设会发生的是，我会用手指在场景上滑动，场景会随着我手指的运动而移动。

[http://imgur.com/a/GTlAe](http://imgur.com/a/GTlAe) //现场图片

这就是它的开始方式，我希望能够将手指从顶部移动到底部，并让彩色方块向下移动。不幸的是，它被歪曲了，我似乎无法弄清楚为什么。

这是我用来设置相机的代码。

```
public void onDrawFrame(GL10 unused)
{

    // Draw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, m_pos_x, m_pos_y,  -100, m_pos_x, m_pos_y, 0, 0.0f, 1.0f, 0.0f);
    PrintMatrix(mVMatrix);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);        

    // Draw triangle
    mTriangle.draw(mMVPMatrix);
    //Draw the square grids
    for(int i = 0; i < row_size; i++)
    {
        for(int j = 0; j < row_size; j++)
        {
            // Draw square
            mSquare[i*row_size + j].draw(mMVPMatrix);
        }
    }
} 
```

m_pos_x 和 m_pos_y 都在另一个类中设置，并且基于帧与帧之间的触摸输入差异。

任何想法我做错了什么？

# c++ - C++ 构造函数存储在哪里？

> ID：11912138
> 
> 赞同：1
> 
> 时间：2012-08-11T05:18:12.157
> 
> 标签：c++, visual-c++

我需要研究类的构造函数如何初始化其对象。

我拥有的关于构造函数行为的关键信息是：

1.  构造函数填充对象的 vtable。
2.  构造函数没有名称，因此没有函数指针。

我怎样才能编写代码：

1.  给我构造函数的地址？
2.  跟踪对象的初始化？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:54:13.817

获取构造函数地址的更好方法是编写一个包装模板函数`new`（使用 C++11 完美转发，您只需要一个）并获取它的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T05:42:29.323

> 1.  给我构造函数的地址？

不幸的是，这将是特定于平台的，并且需要使用汇编语言。您可以使用的基本技术是调用一个函数，该函数返回来自调用者的下一条指令的地址。从那里，您可以通过查看编译器生成的构造函数的汇编语言源代码，确定构造函数代码在内存中的实际地址。这个想法是查看调用函数的地址，然后从该地址中减去构成构造函数的任何先前命令使用的字节数。之所以需要使用汇编语言源代码，是因为您无法从原始 C++ 代码中确定机器语言命令的内存占用量。如前所述，这将是高度平台和编译器特定的，

例如，在 x86_64 上，您可以执行以下操作来获取调用者中下一条指令的地址：

在`get_next_instruction_address.h`

```
extern "C" unsigned long get_return_address(); 
```

在`get_next_instruction_address.S`

```
.section .text

.global get_next_instruction_address

get_next_instruction_address:
    movq (%rsp), %rax
    ret 
```

现在，当您调用 时`get_next_instruction_address()`，返回的值将是函数调用完成后下一条指令（在汇编中）的值。使用在构造函数的汇编代码中发生函数调用的位置将允许您回溯并查看构造函数开头的地址值是什么。

# javascript - 使用多个画布是否比使用一个慢？

> ID：11912140
> 
> 赞同：6
> 
> 时间：2012-08-11T05:18:30.747
> 
> 标签：javascript, html, css

如果我要使用 fps，使用一个较大的画布并不断重绘会更快，还是有一堆小画布并不太频繁地重绘但使用 css3 来制作这样的动画？

```
<canvas id="1" width="60px" height="60px"></canvas>
<canvas id="2" width="60px" height="60px"></canvas>
<canvas id="3" width="60px" height="60px"></canvas>
<canvas id="4" width="60px" height="60px"></canvas> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:42:25.313

理论上，一个画布实际上会更快，假设您要编写一个算法，只重绘需要重绘的内容，并且重绘方法一次发生*。重绘方法可能是浏览器可以完成的最苛刻的操作之一。越少越好。

然而，完成这样一个系统所需的代码量最终可能不值得付出努力。为了可维护性和可扩展性的目的，我会坚持使用多个画布。

这是我学到的其他一些优化技巧：

*   清除整个画布似乎并不比清除特定区域花费更多时间，而且实际上比遍历所有对象并单独清除它们要快。

*   `setTimeout`最适合看到每一帧都很重要的动画。`requestAnimationFrame`可以在功能较弱的机器上跳过帧。

*   在尝试绘制元素之前检查元素是否在范围内可以节省 CPU 周期，即使画布 API 无论如何都会这样做。

*要调用单个重绘，您可以将画布设置`display`为`none`，然后`block`在更改上下文后返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:46:36.167

多个画布会带来更好的性能，因为只有一个画布，浏览器在同一个画布上重复绘制比拥有多个画布并同时完成绘制工作慢。假设您必须在同一画布上重绘，每次绘制新内容时都必须更新表面。显然，如果您有多个画布，则情况并非如此，因为无论其他画布在做什么，您都可以随时绘制。

[帆布性能](http://www.html5rocks.com/en/tutorials/canvas/performance/)

# javascript - 如果第二次调用 jQuery 插件会中断

> ID：11912150
> 
> 赞同：1
> 
> 时间：2012-08-11T05:20:05.493
> 
> 标签：javascript, jquery, jquery-plugins, tabs

为 jQuery 写了一个小标签插件：

```
(function ($) {
var d = {
        panelSelector   : '.tab-panel',
        navSelector     : '.tab-nav',
        fromAttr        : 'href',
        toAttr          : 'id',
        startIndex      : 0,
        classActive     : 'on',
        onEvent         : 'click',
        stripHash       : true
    };

var methods = {

    init: function (options) {

        $.extend(d, options);

        return this.each(function () {

            var parent = $(this);

            parent.tabs('showTab', d.startIndex);

            $(d.navSelector + ' a', parent).on(d.onEvent, function (e) {
                e.preventDefault();
                parent.tabs('showTab', $(this).attr(d.fromAttr));
            });
        });         

    },

    showTab: function (tab, parent, options) {

        $.extend(d, options);

        return this.each(function () {

            var element = '',
                hash = '=';

            if (tab === parseInt(tab)) {
                element = $(d.panelSelector + ':eq(' + tab + ')', $(this));
            } else {

                if (d.stripHash) {
                    tab = tab.replace('#', '');
                }
                element = $(d.panelSelector + "[" + d.toAttr + "=" + tab + "]", $(this));

            }

            if (d.stripHash) {
                hash = '=#';
            }

            $(d.navSelector + " a[" + d.fromAttr + hash + element.attr(d.toAttr) + "]", $(this)).addClass(d.classActive).siblings().removeClass(d.classActive);
            element.show().siblings(d.panelSelector).hide();

        });

    }
}

$.fn.tabs = function (method) {

    if ( methods[method] ) {
        return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {      
        return methods.init.apply( this, arguments );
    } else {
        $.error( 'Method ' +  method + ' does not exist.' );
    }
}

})(jQuery); 
```

它工作得很好，即使在同一页面上有多个元素。但是当我尝试再次运行它时（例如，对于 2 个不同的选项集），一切都会中断。有什么提示吗？

即使有多个`.tabs`元素，这也可以正常工作：

```
$(".tabs").tabs(); 
```

这打破了一切：

```
$(".tabs").tabs();
$(".alt-tab").tabs(); 
```

谢谢！

# python - 为什么我的 csv 排序功能不起作用？

> ID：11912155
> 
> 赞同：1
> 
> 时间：2012-08-11T05:21:18.287
> 
> 标签：python, sorting, csv

我正在获取一个带有标题行（称为`aggregate_file`）的 csv 文件，按列对其进行排序，然后将其重新写入另一个 csv 文件（称为`sorted_file`）。我要排序的列标题由`variable_names`.

```
def sortbyCounty(aggregate_file, sorted_file, *variable_names): 
    f = open(aggregate_file, 'r')
    readit = csv.reader(f) 
    headers = readit.next()
    col_indices = []
    for var in variable_names: 
         col_indices.append(headers.index(var))
    print col_indices
    thedata = list(readit)
    thedata.sort(key=operator.itemgetter(col_indices))
    fx = open(sorted_file, 'w') 
    writeit = csv.writer(fx)
    writeit.writerow(headers)
    writeit.writerows(thedata)
    writeit.close()
    return sorted_file 
```

接下来，我在以下几行中调用此函数：

```
aggregate_file = "Aggregate_test90.csv"
sorted_file = "County_test90.csv"
variable_names = 'CTYCODE90'
test = sortbyCounty(aggregate_file, sorted_file, *variable_names) 
```

这是我的错误信息：

```
col_indices.append(headers.index(var))
ValueError: list.index(x): x not in list 
```

但是，当我列出`print`我的`headers`列表时，我可以清楚地看到我的变量存在：

```
['_STATE90', 'HEIGHT90', 'WEIGHT90', '_BMI90', 'AGE90', 'CTYCODE90', 'IYEAR90', 'SEX90', '_RFOBESE90'] 
```

所以我完全不明白为什么我会收到此错误消息。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:36:15.973

`variable_names`应该是一个`list`或`tuple`字符串。由于字符串的行为也类似于序列，因此`*`on`variable_names`将您的函数调用变为：

```
sortbyCounty(aggregate_file, sorted_file, 'C', 'T', 'Y', 'C', 'O', 'D', 'E', '9', '0') 
```

当您明确希望函数调用如下时：

```
sortbyCounty(aggregate_file, sorted_file, 'CTYCODE90') 
```

制作`variable_names`一个字符串列表或元组应该这样做。

# android - SQL查询和强制关闭挑战

> ID：11912157
> 
> 赞同：0
> 
> 时间：2012-08-11T05:21:51.757
> 
> 标签：android, nullpointerexception, android-sqlite

在这里，如果用户已经有一个帐户，我尝试从数据库中获取名称和密码，或者通过输入他的数据来注册他。

这是第一个通过单击第一个按钮登录数据库来强制关闭的活动

```
public class SelesMeter2Activity extends Activity implements OnClickListener {
    EditText ed1;
    EditText ed2;
    Button b1;
    Button b2;
    SQLiteDatabase sql;
    Cursor c;
    Intent in;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ed1 = (EditText) findViewById(R.id.ed1);
        ed2 = (EditText) findViewById(R.id.ed2);
        b1 = (Button) findViewById(R.id.bt1);
        b2 = (Button) findViewById(R.id.bt2);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        sql = openOrCreateDatabase("db", 0, null);
        sql.execSQL("CREATE TABLE if not exists "
                + "Employee2 (password integer NOT NULL PRIMARY KEY,name text NOT NULL)");
    }

    @Override
    public void onClick(View arg0) {
        // log in
        if (arg0.getId() == R.id.bt1) {
            int p = 0;
            String name = ed1.getText().toString();
            String sp = ed2.getText().toString();
            try {
                // Attempt to parse the number as an integer
                p = Integer.parseInt(sp);
            } catch (NumberFormatException nfe) {
                // parseInt failed, so tell the user it's not a number
                Toast.makeText(this,
                        "Sorry, " + sp + " is not a number. Please try again.",
                        Toast.LENGTH_LONG).show();
            }
            if (c.getCount() != 0) {
                c = sql.rawQuery("select * from Employee", null);
                while (c.moveToNext()) {
                    if (name.equals("c.getString(1)") && p == c.getInt(0)) {
                        in = new Intent(this, secondview.class);
                        startActivity(in);
                        break;
                    }
                }
            }

            else {
                Toast.makeText(this,
                        "please sign up first or enter " + "correct data", 2000)
                        .show();
            }

        } else if (arg0.getId() == R.id.bt2) {
            // sign up
            Intent in2 = new Intent(this, signup.class);

            startActivity(in2);

        }
    }
} 
```

进入新用户的第二个类没有按预期工作，吐司不起作用：

```
public class signup extends Activity implements OnClickListener {
    EditText e1;
    EditText e2;
    SQLiteDatabase sql;
    Button b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.singupx);
        Intent in = getIntent();
        e1 = (EditText) findViewById(R.id.ed1s);
        e2 = (EditText) findViewById(R.id.ed2s);
        b = (Button) findViewById(R.id.bt1s);
        b.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        String n = e1.getText().toString();
        String sp = e2.getText().toString();
        try {
            // Attempt to parse the number as an integer
            int p = Integer.parseInt(sp);
            // This insertion will *only* execute if the parseInt was successful
            // sql.execSQL("insert into Employee2(password,name)values('"+n+"',"+p+")");
            ContentValues values = new ContentValues();
            values.put("password", p);
            values.put("name", n);
            sql.insert("Employee2", null, values);
            Toast.makeText(this, "Data inserted", Toast.LENGTH_LONG).show();
            Intent in2 = new Intent(this, secondview.class);
            startActivity(in2);
        } catch (NumberFormatException nfe) {
            // parseInt failed, so tell the user it's not a number
            Toast.makeText(this,
                    "Sorry, " + sp + " is not a number. Please try again.",
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:58:34.490

这就是您收到错误的原因

```
// you are calling the `c.getCount();` before you are assigning
// It will throw null pointer exception
if (c.getCount() != 0) {
    c = sql.rawQuery("select * from Employee", null);
    while (c.moveToNext()) {
        if (name.equals(c.getString(1)) && p == c.getInt(0)) {
            in = new Intent(this, secondview.class);
            startActivity(in);
            break;
        }
    }
} 
```

改变逻辑，如

```
c = sql.rawQuery("select * from Employee", null);
c.moveToFirst();
if(!c.isAfterLast()) {
    do {
        if (name.equals(c.getString(1)) && p == c.getInt(0)) {
            in = new Intent(this, secondview.class);
            startActivity(in);
            break;
        }
    } while (c.moveToNext());
} 
```

并且`name.equals("c.getString(1)")`应该是`name.equals(c.getString(1))`

**编辑**

插入方法示例

```
ContentValues values = new ContentValues();
values.put("password", n);
values.put("name", p);
database.insert("Employee2", null, values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:58:54.767

在`SelesMeter2Activity`您将有一个`NullPointerException`在线：

```
if (c.getCount() != 0) { 
```

因为您没有`Cursor`在该行之前初始化。将查询移到上述行之前：

```
c = sql.rawQuery("select * from Employee", null);
if (c.getCount() != 0) {
     // ... 
```

您应该发布从 logcat 获得的异常。

另外关于您的`signup`活动，请不要实例化第一个活动以从中访问字段。在活动中再次打开数据库`second`并插入值。

# objective-c - 当 nsnotification 发送到非活动视图控制器时会发生什么？

> ID：11912159
> 
> 赞同：0
> 
> 时间：2012-08-11T05:21:58.030
> 
> 标签：objective-c, ios, nsnotificationcenter

在我的`applicationWillEnterForeground`中，如果需要刷新数据，我会检查并发送通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"refreshModelNotification" object:nil]; 
```

该特定通知的唯一观察者是特定的视图控制器：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshData:) name:@"refreshModelNotification" object:nil]; 
```

该视图控制器是`UITabBarController`.

我的问题是：如果在发送通知时该视图控制器不是活动选项卡会发生什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:46:46.757

如果仍然为视图控制器设置了观察者，则视图控制器仍将收到通知并正常运行，除非视图控制器视图的任何视觉更改都不会被看到

# c++ - 使用 boost 生成正常随机数的问题

> ID：11912161
> 
> 赞同：2
> 
> 时间：2012-08-11T05:22:17.343
> 
> 标签：c++, boost, distribution

[当我看到这篇文章](https://stackoverflow.com/questions/2078474/how-to-use-boost-normal-distribution-classes)时，我希望学习如何在 C++ 中从正态分布生成数字。它给出了一个很好的例子，但我仍然不确定`&`in是什么`boost::variate_generator<boost::mt19937&, boost::normal_distribution<> > var_nor(rng, nd);`意思。如果我不在`&`这里包含它会产生什么影响？

另外，在阅读[Boost官网](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_random/tutorial.html#boost_random.tutorial.generating_integers_in_a_range)的教程时，我发现用 生成分布对象后`boost::random::uniform_int_distribution<> dist(1, 6)`，他们可以通过调用`dist(gen)`（这里的gen是随机引擎）直接用它生成随机数，而无需调用“variate_generator”对象。当然，这是为了生成统一的随机数，但我很好奇我是否可以对正态分布做同样的事情，作为调用“variate_generator”的另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T16:14:40.580

### 简短的背景信息

例如，生成具有特定分布的随机数的一种方法是从区间 [0, 1) 生成均匀分布的随机数，然后对这些数字应用一些数学运算以将它们塑造成所需的分布。所以你有两个对象：一个来自 [0, 1) 的随机数生成器和一个分布对象，它采用均匀分布的随机数并在所需（例如正态）分布中吐出随机数。

### 为什么通过引用传递生成器

代码中的`var_nor`对象将生成器`rnd`与正态分布耦合`nd`。您必须通过引用传递您的生成器，这是`&`模板参数中的。这真的很重要，因为随机数生成器有一个内部状态，它可以从中计算下一个（伪）随机数。如果您不通过引用传递生成器，您将创建它的副本，这可能会导致代码始终创建相同的随机数。请参阅[此博客文章](http://www.bnikolic.co.uk/blog/cpp-boost-rand-normal.html)作为示例。

### 为什么`variate_generator`是必要的

现在到了部分，为什么不直接使用生成器的分布。如果您尝试以下代码

```
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/normal_distribution.hpp>
#include <iostream>

int main()
{
    boost::mt19937 generator;    
    boost::normal_distribution<> distribution(0.0, 1.0);

    // WARNING: THIS DOES NOT WORK AS MIGHT BE EXPECTED!!
    for (int i = 0; i < 100; ++i)
        std::cout << distribution(generator) << std::endl;
    return 0;
} 
```

你会看到，它只输出`NaN`s（我已经用 Boost 1.46 测试过）。原因是梅森扭曲器返回一个均匀分布的**整数**随机数。但是，大多数（甚至可能是所有）连续分布都需要[0, 1) 范围内的**浮点随机数。**Boost 文档中给出的示例之所以有效，是因为`uniform_int_distribution`它是一个离散分布，因此可以处理整数 RNG。

**注意：**我还没有尝试过使用更新版本的 Boost 的代码。当然，如果将离散 RNG 与连续分布一起使用，编译器会抛出错误会很好。

# bash - shell脚本多选

> ID：11912167
> 
> 赞同：2
> 
> 时间：2012-08-11T05:23:12.677
> 
> 标签：bash, shell

我有一个显示动态文件列表（$list）的选择语句。我希望能够输入“1、2、3”，它将选择文件 1、文件 2 和文件 3。如何修改此选择（甚至可能需要不同的结构）以允许选择多个选项？

```
select option in $list; do
        case $option in
            * )
                if [ "$option" ]; then
                    echo "Selected: " $option
                    break
                else
                    echo "Invalid input. Try again."
                fi;
        esac
    done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T03:47:38.050

此代码不使用`select`，但几乎可以满足您的需求-

```
#! /bin/bash
files=("file1" "file2" "file3" "file4" "Quit")

menuitems() {
    echo "Avaliable options:"
    for i in ${!files[@]}; do
        printf "%3d%s) %s\n" $((i+1)) "${choices[i]:- }" "${files[i]}"
    done
    [[ "$msg" ]] && echo "$msg"; :
}

prompt="Enter an option (enter again to uncheck, press RETURN when done): "
while menuitems && read -rp "$prompt" num && [[ "$num" ]]; do
    [[ "$num" != *[![:digit:]]* ]] && (( num > 0 && num <= ${#files[@]} )) || {
        msg="Invalid option: $num"; continue
    }
    if [ $num == ${#files[@]} ];then
      exit
    fi
    ((num--)); msg="${files[num]} was ${choices[num]:+un-}selected"
    [[ "${choices[num]}" ]] && choices[num]="" || choices[num]="x"
done

printf "You selected"; msg=" nothing"
for i in ${!files[@]}; do
    [[ "${choices[i]}" ]] && { printf " %s" "${files[i]}"; msg=""; }
done
echo "$msg" 
```

演示-

```
$ ./test.sh
Avaliable options:
  1 ) file1
  2 ) file2
  3 ) file3
  4 ) file4
  5 ) Quit
Enter an option (enter again to uncheck, press RETURN when done): 1
Avaliable options:
  1x) file1
  2 ) file2
  3 ) file3
  4 ) file4
  5 ) Quit
file1 was selected
Enter an option (enter again to uncheck, press RETURN when done): 2
Avaliable options:
  1x) file1
  2x) file2
  3 ) file3
  4 ) file4
  5 ) Quit
file2 was selected
Enter an option (enter again to uncheck, press RETURN when done): 3
Avaliable options:
  1x) file1
  2x) file2
  3x) file3
  4 ) file4
  5 ) Quit
file3 was selected
Enter an option (enter again to uncheck, press RETURN when done): 1
Avaliable options:
  1 ) file1
  2x) file2
  3x) file3
  4 ) file4
  5 ) Quit
file1 was un-selected
Enter an option (enter again to uncheck, press RETURN when done): 
You selected file2 file3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T14:03:48.530

与`select`往常一样填充变量 REPLY，您可以在`$list`之后循环。（`VAR in $list`$VAR 仅填充，单选。）例如：

```
select ITEMS in $list; do
    case $ITEMS in
        * )
            break
    esac
done

# it $ITEMS is empty, but $REPLY not, we got multi selection
if [ -z "$ITEMS" ] && [ -n "$REPLY" ]; then
    # add some spaces to begin and end for simpler checking below, regarding multi digit REPLY entries
    REPLY_LIST=" $REPLY "
    CNT=1
    for ITEM in $list; do
        if [[ "$REPLY_LIST" =~ " $CNT " ]]; then
            ITEMS="$ITEMS $ITEM"
        fi
        CNT=$((CNT+1))
    done
elif [ -z "$ITEMS" ]; then
    echo nothing selected
    exit
fi
echo "Selected: $ITEMS ($REPLY)" 
```

# android - 在单声道中为 android 引用 iTextSharp Dll 时出现编译错误

> ID：11912169
> 
> 赞同：6
> 
> 时间：2012-08-11T05:23:44.653
> 
> 标签：android, mono, xamarin.android, monodevelop

引用 iTextSharp dll 时出现以下错误

> C:\Program Files\MSBuild\Novell\Novell.MonoDroid.Common.targets(2,2)：错误：加载程序集时出现异常：System.IO.FileNotFoundException：无法加载程序集'System.Drawing，版本 = 2.0.0.0 ，文化=中性，PublicKeyToken=b03f5f7f11d50a3a'。也许它在 Mono for Android 配置文件中不存在？
> 
> 文件名：'System.Drawing.dll'
> 
> 在 Monodroid.Tuner.MonoDroidResolver.Resolve（AssemblyNameReference 参考，ReaderParameters 参数）
> 
> 在 Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences（列出`1 个程序集，AssemblyDefinition 程序集）
> 
> 在 Xamarin.Android.Tasks.ResolveAssemblies.Execute() (Dashmate)

我也尝试添加 System.Drawing.dll ，但仍然没有解决错误。

猜测 Mono.Android.dll 中的 System.Drawing 与 iTextSharp 引用的 System.Drawing.dll 冲突

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:00:11.583

我收到了 Xamarin 开发团队的回复

> 您不能使用仅在完整的 .NET 配置文件中可用的 System.Drawing.dll。Mono for Android 仅支持其基于移动设备的配置文件，与 Silverlight 几乎相同

**所以，我想我们不能使用具有“System.Drawing”类**的第三方 dll :(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T01:58:54.910

该错误告诉您（托管）链接器无法加载程序集。需要此程序集来满足您链接的代码所需的一些引用。没有它，链接器将无法重写较小的有效（即工作）程序集。

在这种情况下，它看起来像是针对*桌面*`iTextSharp`框架程序集编译的（即提示为 2.0.0.0 版本，Android 版本的 Mono 为 2.1.x）。

 *通常，此类问题的解决方案是针对 Mono for Android 提供的程序集重新编译项目（在本例中为 iTextSharp）。这样，所有引用都将针对 M4A 程序集，并且链接器将能够处理它们（因为它们不会丢失任何内容，否则它将在编译时失败）。

请注意，如果 iTextSharp 依赖于太多来自`System.Drawing.dll`.

> 我也尝试添加 System.Drawing.dll ，但仍然没有解决错误。

使用*桌面*程序集不太可能工作（因为它们依赖于不同的程序集，具有不同的类型......）。

此外`System.Drawing.dll`，Windows（或 Mono）附带的 Android 版 Mono 无法与 Mono 一起使用，因为它们依赖于 GDI+（或 Mono 版的 libgdiplus），这不是 Android 的一部分。

> 猜测 Mono.Android.dll 中的 System.Drawing 与 iTextSharp 引用的 System.Drawing.dll 冲突

由于 Mono for Android 不附带程序集，因此不存在程序**集**冲突`System.Drawing.dll`。但是，某些类型（例如`Rectangle[F]`和）包含在（在另一个程序集中）使用名称空间，因为它们对 .NET 开发人员很有帮助（并且众所周知）。`Point[F]``Size[F]``System.Drawing.*`*

# java - 如何*不*使用 runOnUiThread

> ID：11912176
> 
> 赞同：0
> 
> 时间：2012-08-11T05:24:56.173
> 
> 标签：java, android, multithreading

正如您在标题中看到的那样，我每次需要时都尝试不使用 runOnUiThread。我稍后会解释我的意思，但首先，这是我当前的代码（部分）：

```
private void filePaste()
{
  final File src = new File(FileClip); //Source file (as a string)
  final File dest = new File(myPath.getText()+"/"+src.getName()); //Destination file
  final ProgressDialog dlg = new ProgressDialog(AppContext);

  final Thread copythread = new Thread(new Runnable() {
    public void run() {
      if(FileClip==null)
        Main.this.runOnUiThread(new Runnable() {
          public void run(){
            toast(getString(R.string.msg_EmptyClip));
          }
        });
      else
      {
        if(src.canRead()){
          if(!src.isDirectory())
          {
            try{
              BufferedInputStream in = new BufferedInputStream(new FileInputStream(src), 8192);
              BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(dest));

              long pos = 0;
              long read = 8192;
              byte[] data = new byte[(int)read];

              while(pos<src.length()){
                int bytes = in.read(data, 0, (int)read);
                if(bytes>-1) {
                  out.write(data,0,bytes);
                  in.skip(read);
                  in.mark((int)pos+bytes);
                  in.reset();
                  dlg.incrementProgressBy(bytes);
                  pos+=bytes;
                }
              }

              Main.this.runOnUiThread(new Runnable() {
                public void run(){
                  dlg.dismiss();
                }
              });
              in.close();
              out.close();
            }catch(final Exception e)
            {
              Main.this.runOnUiThread(new Runnable() {
                public void run(){
                  alert("filePaste():\n"+e);
                }
              });
            }

            if(Moving==true) {
              boolean q = src.delete();

              if(q==true)
                Main.this.runOnUiThread(new Runnable() {
                  public void run(){
                    toast(getString(R.string.msg_MoveOK,src.getName()));
                  }
                });
              else
                Main.this.runOnUiThread(new Runnable() {
                  public void run(){
                    toast(getString(R.string.msg_MoveNO,src.getName()),1);
                  }
                });

              Moving = false;
            }
            else {
              Main.this.runOnUiThread(new Runnable() {
                public void run(){
                  toast(getString(R.string.msg_CopyOK,src.getName()));
                }
              });
            }
          }
        }
        else
          Main.this.runOnUiThread(new Runnable() {
            public void run(){
              toast(getString(R.string.msg_CopyNO,src.getName()));
            }
          });
        FileClip = null;
        Main.this.runOnUiThread(new Runnable() {
          public void run(){
            getDir(myPath.getText().toString());
          }
        });
      }
    }
  });

  dlg.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
  dlg.setTitle(Moving?getString(R.string.moving):getString(R.string.copying));
  dlg.setMessage(src.getName());
  dlg.setCancelable(true);
  dlg.setButton(DialogInterface.BUTTON_NEGATIVE, getString(android.R.string.cancel), new DialogInterface.OnClickListener()
  {
    @Override
    public void onClick(DialogInterface dialog, int which) {
      dlg.cancel();
    }
  });
  dlg.setOnCancelListener(new DialogInterface.OnCancelListener()
  {
    @Override
    public void onCancel(DialogInterface dialog) {
      copythread.interrupt();
      if(dest.exists())
        dest.delete();
    }
  });
  dlg.setMax((int)src.length());
  dlg.show();

  copythread.start();
} 
```

此代码所做的是尝试复制给定文件（在 FileClip 中存储为字符串）。

如您所见，代码相当长，因为过度使用了runOnUiThread。我想知道如何移动所有的

```
Main.this.runOnUiThread(new Thread(new Runnable()
  public void run()
  {
    //Simple stuff for 6 lines
  }
)); 
```

上课什么的。我在想

```
public class runAtUI implements Runnable 
```

但是我停在那一点上，我不知道如何制作构造函数。我希望你知道我的意思；就像是：

```
new runAtUI()
{
  //This makes less lines IMO, and could be executed
} 
```

*注意：我寻找有关此的主题，但都说相同，使用 runOnUiThread。我知道这没关系，但对于一些简短的事情（比如显示吐司 - 使用 toast() 具有相同目的 - 或再次提醒，但使用 alert()- ）这是没有意义的。

PS：这是我正在做的一个简单的文件管理器，由于缺钱，不会在Google Play上发布，我也不想使用广告（破坏名称中的“简单性”）。是的，我知道有免费和无广告（这个词存在吗？）和更好的应用程序，但我想学习如何制作一个 n_n;

任何信息、想法或指南将不胜感激。

* * *

编辑＃2：感谢所有快速回答的人！您提供的示例现在可以使用，但我希望它更灵活。就像`eval("code as string")`在 javascript 中一样（代码不是字符串）。我会考虑回答这个问题，但请保持开放，让人们提供更多想法；D

* * *

编辑＃3：好的，首先，很抱歉很长时间没有回复。其次，我正在添加指向当前代码的链接，从 123 行（这一行）到[pastebin](http://pastebin.com/ih2hNuDi)的 77 行代码。我还添加了[*uithread*](http://pastebin.com/70qdDZbF)的代码。关于该应用程序：如果您想对其进行测试，请查看它现在的情况或其他任何情况，给我发邮件，我会发送给您；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:36:33.987

您可以创建一个实用程序类来封装创建由 UI 线程运行的可运行对象并调用 Toast 的步骤。这是一个简单的实现：

```
public abstract class ToastUtils {
      /**
       * Displays a toast message, making sure that the toast is always invoked from the main (ui) thread.
       * @param act Calling Activity
       * @param text Toast text
       * @param duration Toast duration
       */
      public static void showToast(final Activity act, final String text, final int duration) {
         act.runOnUiThread(new Runnable() {
            public void run() {
               Toast.makeText(act, text, duration).show();
            }
         });
      }
   } 
```

使用此类，您可以在必要时这样做：

ToastUtils.showToast(this, "一些文本", Toast.LENGTH_SHORT);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:38:24.750

您可以创建一个`Handler`活动：

```
Handler handler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch (msg.what) {
        case R.string.cancel:
            //show toast
            break;
        default:
            break;
        }
    }
}; 
```

并从您的线程中使用它，例如：

```
handler.sendEmptyMessage(R.string.cancel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:42:46.843

从[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)：

> 但是，随着操作复杂性的增加，这种代码会变得复杂且难以维护。要处理与工作线程更复杂的交互，您可能会考虑在工作线程中使用 Handler 来处理从 UI 线程传递的消息。不过，也许最好的解决方案是扩展 AsyncTask 类，它可以简化需要与 UI 交互的工作线程任务的执行。

...跳过...

> 您可以随时在 doInBackground() 中调用 publishProgress() 以在 UI 线程上执行 onProgressUpdate()

在我看来，这就是你想要做的。

关于您的另一个问题（您应该尝试每个主题只问一个问题），用 Java 复制文件是一种已解决的问题。在 SO 上的线程中，我认为这个有一些很好的答案：[Standard concise way to copy a file in Java？](https://stackoverflow.com/q/106770/517561)

# php - 循环嵌套菜单

> ID：11912180
> 
> 赞同：1
> 
> 时间：2012-08-11T05:25:22.787
> 
> 标签：php, mysql, arrays, menu, nested-loops

我有一个类似下面的菜单表（请参阅 HTML 部分）：

[http://jsfiddle.net/6YZzb/](http://jsfiddle.net/6YZzb/)

我想将数据转换为循环嵌套菜单。我希望它像：

[http://jsfiddle.net/aRSsZ/](http://jsfiddle.net/aRSsZ/)

这会将其输出为 HTML：

```
<ul>
    <?php echo $renderProductMenuItemLv1; ?>
</ul>​ 
```

和相关的PHP代码：

```
if($result = $mysqli->query("SELECT * FROM myTable WHERE type='Business_Line_Product_Level_1' AND parent='37' ORDER BY order_id ASC"))
{
    while($row = $result->fetch_array())
    {
        $productLv1Title = $row["title"];
        $productLv1Body = $row["body"];
        $productLv1OriId = $row["id"];

        if($result2 = $mysqli->query("SELECT * FROM page WHERE type='Business_Line_Product_Level_2' AND parent='$productLv1OriId' ORDER BY order_id ASC"))
        {
            while($row = $result2->fetch_array())
            {        
                $productLv2Title = $row["title"];
                $productLv2Body = $row["body"];
                $productLv2OriId = $row["id"];

                $renderProductMenuItemLv2 .= '
                <li>
                    <a href="businessLineProductLv2.php?p='. $productLv2Id .'">
                        '. $productLv2Title .'
                    </a>
                </li>
                ';
            } // eof while row
        } // eof if result

        $renderProductMenuItemLv1 .= '
        <li>
            <a href="businessLineProductLv1.php?p='. $productLv1Id .'">
                '. $productLv1Title .'
            </a>
            <ul>
                '. $renderProductMenuItemLv2 .'
            </ul>
        </li>
        ';
    } // eof while row
} // eof if result
$result->free_result(); 
```

​但结果是我在每个菜单项上都获得了额外的子菜单项。

如何修复我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:46:45.497

似乎您可能总是在`$renderProductMenuItemLv2`实际需要在每次外循环迭代时重置字符串时追加。也许你需要的只是一个

```
$renderProductMenuItemLv2 = ''; 
```

线上`if($result2 = $mysqli->query("SELECT * FROM page ...`？

# sql - 使用 T-SQL 获取上周五的日期，除非今天是周五

> ID：11912181
> 
> 赞同：19
> 
> 时间：2012-08-11T05:25:42.003
> 
> 标签：sql, sql-server, tsql, dayofweek

我正在尝试获取正确的 SQL 代码以获取上周五的日期。几天前，我认为我的代码是正确的。但只是注意到它得到了上周的星期五日期，而不是最后一个星期五。我写这个问题的那天是星期六，8/11/2012 @ 12:23am。在 SQL Server 中，此代码将在 2012 年 8 月 3 日星期五返回。但是，我希望它在 2012 年 8 月 10 日星期五返回。如何修复此代码？由于我们在这里讨论细节，如果当前日期是星期五，那么我想返回今天的日期。因此，如果是昨天（2012 年 8 月 10 日）并且我昨天运行了这段代码，那么我希望这段代码返回 2012 年 8 月 10 日，而不是 2012 年 8 月 3 日。

```
SELECT DATEADD(DAY, -3, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 0)) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T05:53:40.593

尝试这个：

```
declare @date datetime;
set @date='2012-08-09'
SELECT case when datepart(weekday, @date) >5 then
 DATEADD(DAY, +4, DATEADD(WEEK, DATEDIFF(WEEK, 0, @date), 0)) 
else DATEADD(DAY, -3, DATEADD(WEEK, DATEDIFF(WEEK, 0, @date), 0)) end 
```

**结果**：

```
2012-08-03 
```

示例 2：

```
declare @date datetime;
set @date='2012-08-10'
SELECT case when datepart(weekday, @date) >5 then
 DATEADD(DAY, +4, DATEADD(WEEK, DATEDIFF(WEEK, 0, @date), 0)) 
else DATEADD(DAY, -3, DATEADD(WEEK, DATEDIFF(WEEK, 0, @date), 0)) end 
```

**结果**：

```
 2012-08-10 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-28T11:33:44.283

模数运算是最直接的方法，运算顺序决定了星期五的处理方式：

```
DECLARE @test_date DATETIME = '2012-09-28'

SELECT DATEADD(d,-1-(DATEPART(dw,@test_date) % 7),@test_date) AS Last_Friday
      ,DATEADD(d,-(DATEPART(dw,@test_date+1) % 7),@test_date) AS This_Friday 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-11T06:18:51.470

用这个 ：

```
SELECT DATEADD(day, (DATEDIFF (day, '19800104', CURRENT_TIMESTAMP) / 7) * 7, '19800104') as Last_Friday 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-06T16:14:05.347

都不是？尝试这个：

```
DECLARE @D DATE = GETDATE()
SELECT DATEADD(D,-(DATEPART(W,@D)+1)%7,@D) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-30T20:29:33.377

一个经过测试的函数，无论 @@DATEFIRST 设置为什么都有效。

```
-- ==============
-- fn_Get_Week_Ending_forDate
-- Author:      Shawn C. Teague
-- Create date: 2017
-- Modified date:  
-- Description:   Returns the Week Ending Date on DayOfWeek for a given stop date
-- Parameters: DayOfWeek varchar(10) i.e. Monday,Tues,Wed,Friday,Sat,Su,1-7
--             DateInWeek DATE
-- ==============
CREATE FUNCTION [dbo].[fn_Get_Week_Ending_forDate] (
                   @DayOfWeek VARCHAR(10),@DateInWeek DATE)
RETURNS DATE
AS
BEGIN
   DECLARE @End_Date DATE
          ,@DoW TINYINT
   SET @DoW = CASE WHEN ISNUMERIC(@DayOfWeek) = 1 
                     THEN CAST(@DayOfWeek AS TINYINT)
                  WHEN @DayOfWeek like 'Su%' THEN 1
                  WHEN @DayOfWeek like 'M%'  THEN 2
                     WHEN @DayOfWeek like 'Tu%' THEN 3
                  WHEN @DayOfWeek like 'W%'  THEN 4
                  WHEN @DayOfWeek like 'Th%' THEN 5
                  WHEN @DayOfWeek like 'F%'  THEN 6
                  ELSE  7
               END

   select @End_Date = 
          CAST(DATEADD(DAY,
               CASE WHEN (@DoW - (((@@datefirst) + datepart(weekday, @DateInWeek)) % 7)) = 7
                        THEN 0 
                    WHEN (@DoW - (((@@datefirst) + datepart(weekday, @DateInWeek)) % 7)) < 0 
                        THEN 7 - ABS(@DoW - (((@@datefirst) + datepart(weekday, @DateInWeek)) % 7))
                    ELSE (@DoW - (((@@datefirst) + datepart(weekday, @DateInWeek)) % 7) ) 
               END
               ,@DateInWeek) AS DATE)

   RETURN @End_Date
END 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-11T05:43:10.430

这将为您提供上周的星期五。

```
SELECT DATEADD(day, -3 - (DATEPART(dw, GETDATE()) + @@DATEFIRST - 2) % 7, GETDATE()) AS LastWeekFriday 
```

这将为您提供上周五的日期。

```
SELECT DATEADD(day, +4 - (DATEPART(dw, GETDATE()) + @@DATEFIRST-2) % 7, GETDATE()) AS LastFriday 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-08T15:55:24.900

```
select convert(varchar(10),dateadd(d, -((datepart(weekday, getdate()) + 1 + @@DATEFIRST) % 7), getdate()),101) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-30T16:47:14.497

通过替换@dw_wk，可以使用以下代码返回任何最后一天，下面的测试用例使用原始问题中提出的星期五

```
DECLARE @date SMALLDATETIME
,@dw_wk INT --last day of week required - its integer representation
,@dw_day int --current day integer reprsentation
SELECT @date='8/11/2012'
SELECT @dw_day=DATEPART(dw,@date)
SELECT @dw_wk=DATEPART(dw,'1/2/2015') --Just trying not to hard code 5 for friday, here we can substitute with any date which is friday
SELECT case when @dw_day<@dw_wk then DATEADD(DAY, @dw_wk-7-@dw_day,@date) else DATEADD(DAY,@dw_wk-@dw_day, @date) END 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-11T23:13:35.403

我遇到了同样的问题，并创建了以下示例来展示如何执行此操作并使其灵活地使用您想要的一周中的任何一天。我在`SELECT`声明中有不同的行，只是为了说明这是在做什么，但你只需要这`[Results]`行来得到答案。我还为当前日期和一周中的目标日期使用了变量，以便更轻松地查看需要更改的内容。

最后，当您想将当前日期作为可能的示例或当您总是想回到前一周时，还有一个结果示例。

```
DECLARE @GetDate AS DATETIME = GETDATE();
DECLARE @Target INT = 6 -- 6 = Friday

SELECT
        @GetDate                                                                                                                                AS [Current Date]       ,
        DATEPART(dw, @GetDate)                                                                                                                  AS [Current Day of Week],
        @Target                                                                                                                                 AS [Target Day of Week] ,
             IIF(@Target = DATEPART(dw, @GetDate), 'Yes'   , 'No')                                                                              AS [IsMatch]            ,
             IIF(@Target = DATEPART(dw, @GetDate), 0       ,               ((7 + @Target - DATEPART(dw, @GetDate)) % 7) - 7)                    AS [DateAdjust]         ,
      ------------------------------------------------------------------------------------------------------------------------------------------------
        CAST(IIF(@Target = DATEPART(dw, @GetDate), @GetDate, DATEADD(d, (((7 + @Target - DATEPART(dw, @GetDate)) % 7) - 7), @GetDate)) AS DATE) AS [Result]
      ------------------------------------------------------------------------------------------------------------------------------------------------
;
SELECT
        @GetDate                                                                               AS [Current Date]       ,
        DATEPART(dw, @GetDate)                                                                 AS [Current Day of Week],
        @Target                                                                                AS [Target Day of Week] ,
                           ((7 + @Target - DATEPART(dw, @GetDate)) % 7) - 7                    AS [DateAdjust]         ,
      ------------------------------------------------------------------------------------------------------------------------------------------------
        CAST(DATEADD(d, (((7 + @Target - DATEPART(dw, @GetDate)) % 7) - 7), @GetDate) AS DATE) AS [NOTIncludeCurrent]
      ------------------------------------------------------------------------------------------------------------------------------------------------
; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-07T19:20:44.630

[这是我在这里](http://www.joellipman.com/articles/sql/mysql/mysql-day-of-week-ending-on-friday.html)找到的一个答案，它从 MySQL 改编为 T-SQL，它是一个使用所有基本算术（无除法或模数）的单行代码：

```
SELECT DATEADD(d, 1 - datepart(weekday, dateadd(d, 2, GETDATE())), GETDATE()) 
```

* * *

您可以对此进行各种组合，例如获取下周五的日期，除非今天是星期五，或者获取上周四的日期，除非今天是星期四，只需更改命令中的 1 和 2 文字：

**获取下周五的日期，除非今天是周五**

```
SELECT DATEADD(d, 7 - datepart(weekday, dateadd(d, 1, GETDATE())), GETDATE()) 
```

**获取上周四的日期，除非今天是周四**

```
SELECT DATEADD(d, 1 - datepart(weekday, dateadd(d, 3, GETDATE())), GETDATE()) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-27T09:42:10.167

```
SELECT DECODE(TO_CHAR(SYSDATE,'DY'),'FRI',SYSDATE,NEXT_DAY(SYSDATE, 'FRI')-7) FROM dual; 
```

# c - 如何将指向数组的指针传递给函数？

> ID：11912183
> 
> 赞同：0
> 
> 时间：2012-08-11T05:25:56.497
> 
> 标签：c, arrays, pointers, parameter-passing

您如何将数组传递给该函数可以编辑其内容的函数？

喜欢做的时候

```
function(int *x)
 {*x = 10;}

main()
  {int x;
   function(&x);} 
```

我怎么能用字符数组做同样的事情？

每当我这样做

```
 function(char *array[], int *num)
   { int x = *num;
     *array[x] = 'A'; }

   main()
   { char this[5] = "00000"; //not a string
     int x = 3;
     function(&this, &x); } 
```

开发 C++ 说

```
[Warning] passing arg 1 of `function' from incompatible pointer type 
```

显然我做错了什么，所以请告诉我如何解决这个问题。感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:29:21.313

你应该写：

```
void function(char array[], int *num)
{
   int x = *num;
   array[x] = 'A';
}

void main()
{
   char my_array[5] = "00000";
   int x = 3;
   function(my_array, &x);
} 
```

Notation`char *array[]`是一个在这里不需要的指针数组。

当你在某处传递一个数组时，你不应该获取它的地址。数组默认调整为指针。

编辑：

函数原型：

```
void function(char array[], int *num);
void function(char *array, int *num); 
```

是完全一样的。它们之间甚至没有细微的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T05:31:08.380

由于数组只能通过地址传递，所以这里不需要 char * 数组，只需要一个 char 数组：

```
rettype function(char *array, int *num)
{
    array[*num] = 'A';
}

int main()
{
    char arr[] = "1234567890";
    int i = 2;
    function(arr, &i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:29:31.657

~~首先不要`this`用作变量名，它是 C++ 关键字~~。抱歉没有意识到这是一个 C 问题。

```
main()
{ 
  char foo[5] = "00000"; //not a string
  int x = 3;
  function(foo, &x); 
} 
```

你不取的内存地址`foo`。`foo`在接受指针的上下文中使用时会降级为指向第一个元素的指针。`*foo`是`foo[0]`一样的`*(foo + 0)`

![在此处输入图像描述](../Images/bb5b00ca2378cc910613692109e5ebb9.png)

like wise`foo[3]`与`*(foo + 3)`（编译器负责乘以元素大小）相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T05:29:33.897

好的，首先要记住的是，没有“指向数组”的指针之类的东西，尽管您会经常听到这种说法。这是马虎。

*（正如下面所指出的，术语“指向数组的指针”确实具有严格的含义——但我认为你已经被它弄糊涂了。真正发生的是每个指针都包含一个地址。根据声明，编译器可以识别它是否在上下文中正确使用，这就是您的错误消息真正告诉您的内容：您在函数中声明的是指向字符数组的指针，也就是说与 a 相同`char **`，而不是 a `char *`, 这就是你要传递的内容。但是`char *`, or `char **`, or `char ******`, 重要的一点是你让它太复杂了——你已经有了你需要的由数组名称标识的地址。）*

指针是指针，它们是地址。

C 中的数组只是分配的一块内存，它的名称表示第一个元素的地址。所以

```
char a[42]; 
```

是一块 42 字符长的内存块，a 是它的地址。

您可以将第二个函数重写为

```
void foo(char* a, int num){ // (3)
     // notice that you don't need the word function and 
     // for lots of reasons I wouldn't use it  as a function name.
     a[num] = 'A'; // (4)
}

int main(){
      // Sadly "00000" IS a string no matter what your comment
      // says.  Use an array initializer instead.

      char arry[5] = {'0','0','0','0','0' } ; // (1)
      foo(arry,3); // (2)
} 
```

这就是我相信你的代码要做的事情。注意

(1) 由于“00000”确实是一个字符串，它实际上是在创建一个长度为*6 个*元素的数组，该数组可以使用数组初始值设定项进行初始化

```
{'0','0','0','0','0', 0 } 
```

(2) 数组（我将其命名为 'arry' 而不是 'this'，因为 'this' 通常是类 C 语言中的关键字，为什么会有混淆的风险？）已经是一个地址（但*不是*指针。它可以在指针赋值的右侧，但不在左侧。）

所以当我打电话时

```
foo(arry,3); 
```

我`foo`用 arry 的第一个元素的地址和数字 3 调用（您不需要为此声明变量。）

现在，我*也可以*把它写成

```
foo(&arry[0],3); 
```

您可以将其理解为“找到 的第 0 个元素`arry`，获取其地址”。它是 C 中的一个标识，对于任何数组

```
char c[len]; 
```

表达式`c`和`&c[0]`引用相同的地址。

(3) 也可以定义为`foo(char arry[], int num)`。这些是等价的。

(4) 当您引用时，`a[num]`您直接引用指向`num`的内存的 -th 元素，该元素`a`位于数组的开头地址`arry`。你不需要所有的取消引用。

不要因为这有点难以理解而感到不安——每个人在开始 C 时都很难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T05:30:17.460

在 C 中，数组名称“转移”为指向数组头部的指针，通过传递“&array”，您将传递一个指向数组头部指针的指针，从而发出警告。

```
char array[512];

myfunc(array, foo); 
```

是做你想做的事情的正确方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T05:49:32.500

实际上你已经采用了一维数组。所以你可以用两种方式定义函数......

（一世）

```
 function(char array[], int *num)
       { int x = *num;
         *array[x] = 'A'; }

       main()
       { char this[5] = "00000"; //not a string
         int x = 3;
         function(this, &x); } 
```

和

(二)

```
function(char *array, int *num)
       { int x = *num;
         *array[x] = 'A'; }

       main()
       { char this[5] = "00000"; //not a string
         int x = 3;
         function(this, &x); } 
```

但是在您的函数定义中，您写`*array[]`为参数，这意味着数组是二维数组。所以你应该将数组声明为二维数组。

```
function(char *array[], int *num)
       { int x = *num;
        //implement your code }

       main()
       { char this[5][10];
         // you can initialize this array.
         int x = 3;
         function(this, &x); } 
```

我想这会对你有所帮助。

# android - Android 应用程序页面不显示任何内容

> ID：11912185
> 
> 赞同：0
> 
> 时间：2012-08-11T05:26:53.267
> 
> 标签：android, facebook

> **可能重复：**
> [facebook android 应用程序上的空白页面](https://stackoverflow.com/questions/11912609/blank-page-on-facebook-android-app)

我制作了一个 android 应用程序并在 facebook 上注册。

[https://apps.facebook.com/norway_eid_greetings/](https://apps.facebook.com/norway_eid_greetings/)

应用程序页面显示与其他应用程序页面不同..

帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:29:55.793

您正在尝试嵌入由于 X-Frame-Options 而无法嵌入的页面。（检查您的 JavaScript 控制台）。不允许将一个 Facebook 页面嵌入另一个页面。

```
Refused to display document because display forbidden by X-Frame-Options. 
```

# internet-explorer-9 - IE9 中不尊重最小宽度

> ID：11912187
> 
> 赞同：0
> 
> 时间：2012-08-11T05:27:19.650
> 
> 标签：internet-explorer-9, css

我有一个以 px 为单位的最小宽度的外部容器，以及一个具有最大宽度和少量填充的内部容器（两个 px 也是）。
在 IE 9 中，页面最初显示正确，但是当我放大或重新缩小尺寸时，外部容器似乎拒绝缩小到最小宽度，而是保持在当前宽度并抛出水平滚动条。但是，如果您刷新页面，之后它似乎可以正常工作。据我所知，它只在 IE9 中执行此操作。Chrome、FF、Opera 和 IE6-8 都可以正常工作。*没错，IETester 甚至还展示了令人讨厌的 IE6 正确渲染它！*仅供参考，我有一个严格的 XHTML 1.0 文档类型，我的 IE9 似乎在 Internet Explorer 9 标准模式下显示该页面。

无需发布我的所有代码，有人有建议吗？

不幸的是，据我所知，似乎没有人遇到过这个问题。另一个花絮，让它变得更奇怪（或者它可能是一个线索），IE9 似乎只在查看服务器上的页面时（上传到我的网站或使用 EasyPHP）时这样做。在本地查看它的行为应如此。
任何信息都会有所帮助，甚至是获得我想要的效果的更好方法。澄清一下，我希望我的页面具有最小和最大宽度，以像素为单位。如果视口大于最大宽度，则需要相等的边距（居中的页面）。如果视口在最小和最大宽度范围内，我希望有少量背景一直可见，以便页面的左右边缘更加明显（而不是仅仅萌芽到边缘浏览器——这是我在内部容器上的填充的地方）。最后，如果视口小于页面的最小宽度（内部容器），我仍然想要填充（填充的小边缘）以及水平滚动条。任何帮助是极大的赞赏，

附加信息：正如我所说，我并不热衷于浏览整个网站的代码并挑选相关材料，但我已经继续写了一个简洁的例子，因为有人否决了我的问题（这并不酷顺便说一句，但业力会得到那个家伙）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IE9 Min-Width Problem</title>
</head>
<body style=" width:100%; height:100%; margin:0; border:0; padding:0;">
<div style=" position:relative; min-width:500px; max-width:100%; margin:auto; background:red; ">
<div style=" position:relative; min-width:0; max-width:1000px; margin:auto; padding:10px; ">
<div style=" position:relative; width:100%; height:500px; background:blue; ">
This is page content
</div><!-- closes content -->
</div><!-- closes inner-wrapper -->
</div><!-- closes outer-wrapper -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:29:36.090

由于您说这仅在您上传页面时发生，而不是在本地发生，您确定 CSS 文件加载正确吗？如果您“查看源代码”并点击指向 CSS 的链接，它是否正确加载？CSS 文件可能尚未上传，或者您在加载它时可能会遇到一些错误。

# sql - 智能 SQL 合并 - n 行，合并

> ID：11912188
> 
> 赞同：1
> 
> 时间：2012-08-11T05:27:28.447
> 
> 标签：sql, sql-server, tsql

任何人都可以帮助解决我遇到的 SQL 问题，我需要将 n 行合并到一条记录中。个别记录可能会或可能不会填充其他人所做的字段。

基本上我有一个问题，在 SQL 中创建了重复记录。有些包含其他不包含的信息。我需要合并它们（我可以对它们进行排名），如果前一个记录中不存在该值，则更新一个字段（从排名最高的第一开始）。

例如，如果我有两条用户记录，一条填写了姓氏，另一条填写了名字。这些是重复的，需要合并到一个记录中，就像合并一样。但是，有 n 行。

它本质上是将许多记录转置为一个，其中仅当排名较低的重复记录填充了该字段并且该字段不存在于排名较高的行中时才更新字段。

这是该问题的一个非常简化的版本。如您所见，使用 SQL Fiddle 脚本创建了 6 条记录。这些记录应合并为 2 条记录并填写所有字段。

问题是，可能有 x 行。我不能使用合并语句，因为行数存在差异。

希望这有意义吗？

```
CREATE TABLE [dbo].[Employee]([EmployeeId] varchar(10) NULL,
[First Name] [varchar](30) NULL,
[Middle Name] [varchar](30) NOT NULL,
[Last Name] [varchar](30) NOT NULL,
[E-Mail] [varchar](80) NOT NULL)

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('BOB1','Bob','','','bob@hotmail.com');

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('BOB1','','John','','bob@hotmail.com');

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('BOB1','','','Smith','bob@hotmail.com');

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('MARK1','','Peter','','mark@hotmail.com');

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('MARK1','Mark','','','mark@hotmail.com');

insert into Employee(EmployeeId,[First Name],[Middle Name],[Last Name],[E-Mail])
values('MARK1','','','Davis','mark@hotmail.com');

select * from [Employee] 
```

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:02:01.737

如果性能足够重要，足以证明几个小时的编码是合理的，**并且**您可以使用 SQLCLR，那么您可以使用多参数用户定义的聚合在单个表扫描中计算所有值。

以下是返回排名最低的非`NULL`字符串的聚合示例：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using System.IO;
using Microsoft.SqlServer.Server;

[Serializable]
[SqlUserDefinedAggregate(Format.UserDefined, MaxByteSize = -1, IsNullIfEmpty = true)]
public struct LowestRankString : IBinarySerialize
{
    public int currentRank;
    public SqlString currentValue;

    public void Init()
    {
        currentRank = int.MaxValue;
        currentValue = SqlString.Null;
    }

    public void Accumulate(int Rank, SqlString Value)
    {
        if (!Value.IsNull)
        {
            if (Rank <= currentRank)
            {
                currentRank = Rank;
                currentValue = Value;
            }
        }
    }

    public void Merge(LowestRankString Group)
    {
        Accumulate(Group.currentRank, Group.currentValue);
    }

    public SqlString Terminate()
    {
        return currentValue;
    }

    public void Read(BinaryReader r)
    {
        currentRank = r.ReadInt32();
        bool hasValue = r.ReadBoolean();
        if (hasValue)
        {
            currentValue = new SqlString(r.ReadString());
        }
        else
        {
            currentValue = SqlString.Null;
        }
    }

    public void Write(BinaryWriter w)
    {
        w.Write(currentRank);

        bool hasValue = !currentValue.IsNull;
        w.Write(hasValue);
        if (hasValue)
        {
            w.Write(currentValue.Value);
        }
    }
} 
```

假设您的表看起来像这样：

CREATE TABLE TopNonNullRank (Id INT NOT NULL, UserId NVARCHAR (32) NOT NULL, Value1 NVARCHAR (128) NULL, Value2 NVARCHAR (128) NULL, Value3 NVARCHAR (128) NULL, Value4 NVARCHAR (128) NULL, PRIMARY KEY CLUSTERED (Id ASC));

```
INSERT INTO TopNonNullRank (Id, UserId, Value1, Value2, Value3, Value4) VALUES 
    (1, N'Ada', NULL, N'Top value 2 for A', N'Top value 3 for A', NULL),
    (2, N'Ada', N'Top value 1 for A', NULL, N'Other value 3', N'Top value 4 for A'),
    (3, N'Ada', N'Other value 1 for A', N'Other value 2 for A', N'Other value 3 for A', NULL),
    (4, N'Bob', N'Top value 1 for B', NULL, NULL, NULL),
    (5, N'Bob', NULL, NULL, NULL, N'Top value 4 for B'),
    (6, N'Bob', N'Other value 1 for B', N'Top value 2 for B', NULL, N'Other value 4'); 
```

以下简单查询返回`NULL`每列的最高非值。

```
SELECT 
    UserId,
    dbo.LowestRankString(Id, Value1) AS TopValue1,
    dbo.LowestRankString(Id, Value2) AS TopValue2,
    dbo.LowestRankString(Id, Value3) AS TopValue3,
    dbo.LowestRankString(Id, Value4) AS TopValue4
FROM TopNonNullRank
GROUP BY UserId 
```

唯一剩下的就是将结果合并回原始表。最简单的方法是这样的：

```
WITH TopValuesPerUser AS
(
    SELECT 
        UserId,
        dbo.LowestRankString(Id, Value1) AS TopValue1,
        dbo.LowestRankString(Id, Value2) AS TopValue2,
        dbo.LowestRankString(Id, Value3) AS TopValue3,
        dbo.LowestRankString(Id, Value4) AS TopValue4
    FROM TopNonNullRank
    GROUP BY UserId
)
UPDATE TopNonNullRank
SET
    Value1 = TopValue1,
    Value2 = TopValue2,
    Value3 = TopValue3,
    Value4 = TopValue4
FROM TopNonNullRank AS OriginalTable
LEFT JOIN TopValuesPerUser ON TopValuesPerUser.UserId = OriginalTable.UserId; 
```

请注意，此更新仍然会给您留下重复的行，您需要摆脱它们。

你也可以花点心思，把这个查询的结果存储到一个临时表中，然后使用`MERGE`语句将它们应用到原始表中。

另一种选择是将结果存储在新表中，然后使用`sp_rename`存储过程将其与原始表交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:16:43.107

如果没有您正在处理的数据示例，就很难准确地解释这个问题。[你可以在这里](http://sqlfiddle.com/)创建一个活生生的例子供我们玩。

因此，如果没有示例，如果我假设 myTable1 和 myTable2 两个表中有数字字段 [N] 和 [M]，那么为什么不直接使用带有 FULL OUTER JOIN 的 COALESCE..

```
SELECT
  fieldx = COALESCE(a.fieldx, b.fieldx),
  fieldy = COALESCE(a.fieldy, b.fieldy),
  fieldz = COALESCE(a.fieldz, b.fieldz),
  [N]=SUM(ISNULL(a.[N],0.0)),
  [M]=SUM(ISNULL(b.[M],0.0))
FROM
  myTable1 a
  FULL OUTER JOIN myTable2 b
     ON a.fieldx = b.fieldx 
        a.fieldy = b.fieldy 
        a.fieldz = b.fieldz 
GROUP BY
   COALESCE(a.fieldx, b.fieldx),
   COALESCE(a.fieldy, b.fieldy),
   COALESCE(a.fieldz, b.fieldz) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:52:13.030

这应该可以将特定字段的每一行的值设置为该组重复行的排名最高的非 NULL 值。

GroupingKey 是一个字段或一些逻辑，用于确定需要合并为一个的一组行。排名是你的排名功能。

```
UPDATE SomeTable SET
    Field1 =
    (
        SELECT TOP 1 t2.Field1
        FROM SomeTable t2
        WHERE
            t2.Field1 IS NOT NULL
            AND
            t2.GroupingKey = SomeTable.GroupingKey
        ORDER BY Ranking DESC
    )
FROM SomeTable 
```

您可以对需要更新的每个字段重复此操作，或者只更新查询以将它们全部设置，只需复制粘贴即可。更新完所有字段后，唯一剩下的就是删除重复记录，您可以使用相同的 GroupingKey 和 Ranking 删除特定 GroupingKey 的除最高排名行之外的所有行。

```
DELETE SomeTable
FROM SomeTable
INNER JOIN
(
    SELECT 
        GroupingKey, 
        MAX(Ranking) as MaxRanking
    FROM SomeTable
) t2 ON
    SomeTable.GroupingKey = t2.GroupingKey
    AND
    SomeTable.Ranking < t2.MaxRanking 
```

# actionscript-3 - 如何将文件保存在剧本的照片文件夹中

> ID：11912193
> 
> 赞同：0
> 
> 时间：2012-08-11T05:28:45.437
> 
> 标签：actionscript-3, blackberry-playbook, playbook

我有兴趣将图像文件保存到 Playbook 照片文件夹。通过使用documentsDirectory，我可以将我的文件保存到文档中。但是剧本的本机图片应用程序不显示文档目录中的图像，我需要在图片目录中显示我的图像，例如剪贴簿将图像保存在照片中。照片->剪贴簿->（在剪贴簿中创建的所有图像）通过它可以显示在剧本的本机图片应用程序中。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:35:04.900

我认为您想使用[CameraRoll](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraRoll.html)类。从文档：

> CameraRoll.addBitmapData() 方法将图像添加到设备的专用媒体库。要在运行时检查您的应用程序是否支持 CameraRoll.addBitmapData() 方法，请检查 CameraRoll.supportsAddBitmapData 属性。
> 
> CameraRoll.browseForImage() 方法打开一个图像选择对话框，允许用户在媒体库中选择图像。当用户选择图像时，CameraRoll 对象会调度一个选择事件。使用为此事件调度的 MediaEvent 对象来访问所选图像。要在运行时检查您的应用程序是否支持 CameraRoll.browseForImage() 方法，请检查 CameraRoll.supportsBrowseForImage 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:54:46.597

我做的...

```
var imgStr : String = title + ".jpg";
var imgFile : File = new File("/accounts/1000/shared/photos/Custom folder/" + imgStr); 
```

它将允许您将图像保存在照片目录中。

感谢大家的支持。

# ruby-on-rails - Paperclip S3 - 可以上传图像但无法查看它们

> ID：11912201
> 
> 赞同：16
> 
> 时间：2012-08-11T05:29:53.903
> 
> 标签：ruby-on-rails, heroku, amazon-s3, paperclip, amazon

我使用 Paperclip 和 S3 创建了一个在 Heroku 上运行的 Rails 应用程序。我已经设法通过该站点将图像上传到我的 S3 存储桶（我可以在亚马逊控制面板的存储桶中看到它们出现）。

但是当我添加一个图像标记即 <%= image_tag x.photo.url %> 时，我得到以下 html（这里省略了标记），没有显示图像！

img alt="Test_tree" src="http://s3.amazonaws.com/hiphotos/ads/photos/000/000/015/original/test_tree.jpg?1344661020"

请帮忙！为什么我看不到图像，即使它们在存储桶中？

非常感谢你们

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-30T18:53:29.757

创建一个名为回形针初始化程序的文件：

```
# config/initializers/paperclip.rb 
# We are actually setting this to 's3_domain_url', 
# so it's not a placeholder for something else. 
Paperclip::Attachment.default_options[:url] = ':s3_domain_url'
Paperclip::Attachment.default_options[:path] = '/:class/:attachment/:id_partition/:style/:filename' 
```

或者你也可以把它放在里面`production.rb`：

```
config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
        :bucket => ENV['S3_BUCKET_NAME'],
        :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
        :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    },
    :url =>':s3_domain_url',
    :path => '/:class/:attachment/:id_partition/:style/:filename',
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-11T06:38:25.313

首先，您尝试在代码中使用的 url 是这样的：

```
http://s3.amazonaws.com/hiphotos/ads/photos/000/000/015/original/test_tree.jpg 
```

当您在浏览器中访问该链接时，您会看到以下内容：

```
<message>
  The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
</Message>
<RequestId>810A6AE1D141304C</RequestId>
<Bucket>hiphotos</Bucket>
<HostId>
  XXZ+s+slgZLsRWy5NiU/G0yAKBLftw0oT2dDKpas532qXJEPSrISVPqfZsEgpb2J
</HostId>
<Endpoint>hiphotos.s3.amazonaws.com</Endpoint> 
```

因此，如果我们使用正确的端点修改 url，我们会得到：

```
http://hiphotos.s3.amazonaws.com/ads/photos/000/000/015/original/test_tree.jpg 
```

哪个确实返回正确的图像。

如果您使用的是欧洲存储桶，则可能会发生这种情况，这可能是您用来将内容推送到 s3 的 gem 的错误。

有很多文章介绍了如何让 Paperclip、S3 和欧洲水桶很好地协同工作。

不过我发现，自从我开始使用使用 Fog 而不是 aws-s3 gem 的[asset_sync](https://github.com/rumblelabs/asset_sync) gem 以来，我对回形针和 S3 不再有任何麻烦。

所以我怀疑雾与让这个问题对我消失有关。如果您正在使用其他东西，我建议您切换到它。

# iphone - iPhone中的Sqlite数据库保护

> ID：11912218
> 
> 赞同：0
> 
> 时间：2012-08-11T05:33:25.853
> 
> 标签：iphone, ios5, sqlite, xcode4.3

我正在开发一个在 sqlite 数据库中存储大量数据的应用程序。但我想保证数据的安全，以免有人入侵我的数据库并查看我数据库中的数据。

现在如何加密和解密我的 sqlite 数据库？

请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:23:21.013

我开发了一个需要的应用程序，并且我已经使用这种方式

首先，我发起了一个类，叫它`ConstantMethods.h+m`

常量方法.h

```
#import <Foundation/Foundation.h>
#import <CommonCrypto/CommonCryptor.h>

static NSString *keyEncryption = @"YourPrivateKey";
@interface ConstantMethods : NSObject {

}
+ (NSData*) encryptString:(NSString*)plaintext withKey:(NSString*)key;
+ (NSString*) decryptData:(NSData*)ciphertext withKey:(NSString*)key;

@end 
```

常量方法.m

```
#import "ConstantMethods.h"

@implementation NSData (AES256)

- (NSData *)AES256EncryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

@end

@implementation ConstantMethods

+ (NSData*) encryptString:(NSString*)plaintext withKey:(NSString*)key {
    return [[plaintext dataUsingEncoding:NSUTF8StringEncoding] AES256EncryptWithKey:key];
}

+ (NSString*) decryptData:(NSData*)ciphertext withKey:(NSString*)key {
    return [[[NSString alloc] initWithData:[ciphertext AES256DecryptWithKey:key]
                              encoding:NSUTF8StringEncoding] autorelease];
}

@end 
```

然后，在您的类中，导入`ConstantMethods.h`并使用该类，如下所示：

```
[ConstantMethods encryptString:@"yourString"]; 
```

当您要解密时，请使用以下命令：

```
[ConstantMethods decryptData:@"yourString" withKey:keyEncryption]; 
```

加密后，将加密后的数据插入数据库，从数据库中取出数据时，解密。

我希望这可以帮助你。

# mysql - MySQL 按最新时间戳选择

> ID：11912221
> 
> 赞同：37
> 
> 时间：2012-08-11T05:34:21.990
> 
> 标签：mysql, select, timestamp

我在 SO 上看到了一些类似类型的问题，但是，我无法找到解决我的具体问题的方法。（仅供参考，这些不是我真正的专栏，只是一个简短的例子）。

我有一个基本表 `my_table`：

| 用户_1 | 用户_2 | 时间戳 | 注意（不是表格的一部分） |
| --- | --- | --- | --- |
| 23 | 25 | 2012-08-10 22:00:00 |  |
| 24 | 22 | 2012-08-10 19:00:00 | <=== 我想返回这一行 |
| 24 | 22 | 2012-08-10 17:00:00 |  |
| 21 | 17 | 2012-08-10 15:00:00 |  |

所以，我想做的是能够：

```
 1) Select the "newest" row, based on timestamp AND 
 2) Select the 'user_2' column when given a value. 
```

我试过类似的东西：

```
 SELECT *
 FROM my_table
 WHERE user_2 = 22
 AND timestamp = (
 SELECT MAX( timestamp )
 FROM my_table )
 LIMIT 1 
```

但这不会返回我正在寻找的行。修复此查询的任何帮助都会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-11T05:38:19.810

```
SELECT * FROM my_table -- standard stuff
   WHERE user_2 = 22 -- predicate
   ORDER BY timestamp DESC -- this means highest number (most recent) first
   LIMIT 1; -- just want the first row 
```

* * *

*编辑：*

顺便说一句，如果你好奇为什么你的原始查询不起作用，让我们分解一下：

*   `my_table`从...中选择一些东西
*   其中`user_2`= 22
*   和`timestamp`= *（一些价值，让我们暂时把它放在一边）*
*   限制 1

现在，回到那个`timestamp`值，它来自您的子查询：

```
SELECT MAX( timestamp ) FROM my_table 
```

请注意，此子查询不限制任何基于的行`user_2`——它询问*整个表中*的最大时间戳是多少。该最大时间戳是上表中的第一个：（user_1 = 23，user_2 = 25，timestamp = 2012-08-10 22:00:00）。

所以，让我们把它插回顶级查询：

*   `my_table`从...中选择一些东西
*   其中 user_2 = 22
*   和时间戳 = **2012-08-10 22:00:00**
*   限制 1

...你可以看到没有这样的行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-25T02:33:09.390

如果有人在 SQL Server 中遇到类似问题，这对你有用（上一篇文章中建议的 MySQL 查询在 SQL Server 中不起作用）：

```
SELECT * FROM my_table 
WHERE    timestamp =  ( SELECT MAX( timestamp ) FROM my_table 
                        WHERE user_2 = 22 ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-11T22:19:14.160

另一种方法是`GROUP BY`按`user_2`列计算`MAX(timestamp)`。这样做不会`MAX(timestamp)`计算整个表中的最新日期，而是计算**每组**具有相同`user_2`值的记录的最新时间戳。

因此，例如，您的查询可能是：

```
SELECT * FROM my_table
WHERE user_2 = 22
AND timestamp =
  (SELECT MAX(timestamp) FROM my_table
   WHERE user_2 = 22
   GROUP BY user_2)
LIMIT 1; 
```

此查询改编自我在[此出色答案中找到的答案](https://stackoverflow.com/a/14544472/473792)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T05:45:37.917

这就是我所得到的。

```
SELECT timestamp 
       FROM my_table 
       WHERE user_22 = '22' 
       ORDER BY timestamp DESC /*or ASC*/ 
```

当您查询它时，代码将是

```
while($row = mysql_fetch_array(the sql query)){
$timestamp = $row['timestamp']
} 
```

# c# - 如何指定 BinaryReader 解释为大端

> ID：11912226
> 
> 赞同：1
> 
> 时间：2012-08-11T05:35:29.463
> 
> 标签：c#

有没有办法告诉 BinaryReader 解释为大端？就像只是说“解释所有大字节序”，所以我不必编写额外的代码来手动读取字节、反转它们，然后将其转换为 int 或 float 或任何我需要的东西。

更新

环顾四周，好像不能。

这有点奇怪；我想这是你在编写一个从任意文件读取二进制数据的类时自然会做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:42:44.523

~~尝试使用[Encoding.BigEndianUnicode](http://msdn.microsoft.com/en-us/library/system.text.encoding.bigendianunicode.aspx)属性创建 BinaryReader [BinaryReader(stream,encoding)](http://msdn.microsoft.com/en-us/library/663y489y.aspx)~~

由于有人指出这仅适用于文本，因此您必须创建自己的代码来手动转换它，或者您可以使用本[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/a9ef76e2-42a4-4e9e-baf8-52508fd6d3a4)末尾的 Scott Chamberlain 的示例。

# objective-c - Objective-C - iOS - 类方法行为不正常

> ID：11912229
> 
> 赞同：1
> 
> 时间：2012-08-11T05:36:10.990
> 
> 标签：objective-c, ios, singleton, class-method

我是一个相对较新的 iPhone/objective-c 程序员，我遇到了一个让我感觉很不适应的问题。

我正在尝试使用一个类方法来创建我尝试在其他方法中访问的字典。但是字典是……因为没有更好的词——trippin'。

这是我在 DynamoDBManager.m 中的代码（我认为重要的部分）：

```
 static NSMutableDictionary *voiceMap = nil;

    @implementation DynamoDBManager

    +(NSMutableDictionary *)createVoiceMap{
    NSLog(@"creating voice map...");
    if (voiceMap == nil){
        NSLog(@"Voice Map was nil");
        voiceMap = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:
        @"piano", @"trumpet", @"hi_hat1", @"p", @"t", @"h", 
        @"acquitar", @"bass_drum1", @"clarinet", @"hi_tom", @"mid_tom", @"low_tom", @"crash_cymbal1", @"ride_cymbal1", @"snare_drum1", @"snare_drum2", @"violin", 
        @"g", @"b", @"c", @"i", @"m", @"l", @"y", @"r", @"s", @"a", @"v", nil] 
        forKeys:[NSArray arrayWithObjects:
        @"p", @"t", @"h", @"piano", @"trumpet", @"hi_hat1", 
        @"g", @"b", @"c", @"i", @"m", @"l", @"y", @"r", @"s", @"a", @"v", 
        @"acquitar", @"bass_drum1", @"clarinet", @"hi_tom", @"low_tom", @"mid_tom", @"crash_cymbal1", @"ride_cymbal1", @"snare_drum1", @"snare_drum2", @"violin", nil]];
    }
    NSLog(@"done creating voice map");
    return voiceMap;}

    +(NSString *)generateNoteCipherGivenX:(int)x Y:(int)y andNote:(id)theNote{
    NSLog(@"%@ -- voiceMap", voiceMap);
    NSString *voiceCipherString = [[DynamoDBManager createVoiceMap] objectForKey:[theNote getVoice]];
    if ([theNote isKindOfClass:[PitchedNote class]]) {
        int duration2 = [theNote getDuration];
        NSString *cipher = [NSString stringWithFormat:@"%@%i%i%i,", voiceCipherString, y+10, duration2, x];
        return cipher;
    }
    else{
        NSString *cipher = [NSString stringWithFormat:@"%@%i%i%i,", voiceCipherString, y, 0, x];
        return cipher;
    }
} 
```

在 DynamoDBManager 的另一种方法中，我调用

```
 [DynamoDBManager generateNoteCipherGivenX:curX Y:curY andNote:curNote]; 
```

它记录了一些奇怪的错误，包括应用程序的三种不同运行：

```
2012-08-10 21:53:48.090 createAccount[537:207] __NSCFDictionary -- type
2012-08-10 21:53:48.091 createAccount[537:207] {
IOProviderClass = IOFireWireUnit;
"Unit_SW_Version" = 16;
"Unit_Spec_ID" = 2599;
} -- voiceMap

2012-08-10 21:57:55.635 createAccount[580:207] __NSMallocBlock__ -- type
2012-08-10 21:57:55.636 createAccount[580:207] <__NSMallocBlock__: 0x810cb50> -- voiceMap

2012-08-10 22:38:10.044 createAccount[1188:207] -[__NSMallocBlock__ objectForKey:]: unrecognized selector sent to instance 0x77700e0
2012-08-10 22:38:10.044 createAccount[1188:207] Exception: -[__NSMallocBlock__ objectForKey:]: unrecognized selector sent to instance 0x77700e0 
```

我必须做*一些*非常错误的事情才能得到这种不稳定的行为。它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:00:30.913

我打赌你没有使用 ARC（自动引用计数），所以你应该保留你的字典：

```
 voiceMap = [[NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:
    @"piano", @"trumpet", @"hi_hat1", @"p", @"t", @"h", 
    @"acquitar", @"bass_drum1", @"clarinet", @"hi_tom", @"mid_tom", @"low_tom", @"crash_cymbal1", @"ride_cymbal1", @"snare_drum1", @"snare_drum2", @"violin", 
    @"g", @"b", @"c", @"i", @"m", @"l", @"y", @"r", @"s", @"a", @"v", nil] 
    forKeys:[NSArray arrayWithObjects:
    @"p", @"t", @"h", @"piano", @"trumpet", @"hi_hat1", 
    @"g", @"b", @"c", @"i", @"m", @"l", @"y", @"r", @"s", @"a", @"v", 
    @"acquitar", @"bass_drum1", @"clarinet", @"hi_tom", @"low_tom", @"mid_tom", @"crash_cymbal1", @"ride_cymbal1", @"snare_drum1", @"snare_drum2", @"violin", nil]] retain]; 
```

由于您不保留字典，因此它很快就会被释放，并且`voiceMap`指向的内存很可能会被其他对象重用。

# c# - 使用正则表达式从字符串中提取特定数据

> ID：11912231
> 
> 赞同：1
> 
> 时间：2012-08-11T05:36:27.823
> 
> 标签：c#, regex

我有一堆以下格式的字符串 -

“-（用户名）在（国家）的（日期）为（部门）”

例子 -

```
- user.001 on July 15, 2012 in Africa for Human Resources \r\n\t\t\tEdit
- someusername on January 01, 2012 in United States for HR \r\n\t\t\tEdit
- userid on August 15, 2012 in Asia for Whatever\r\n\t\t\tEdit
- 100100.user on May 21, 2002 in New England for ABC \r\n\t\t\tEdit 
```

如何使用正则表达式和 C# 提取用户名、日期、国家和部门？

谢谢您的帮助！

编辑1：我发现一些输入字符串没有部门。它是可选的。例如`"- user.001 on July 15, 2012 in Africa\r\n\t\t\tEdit"`。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:46:42.840

你可以试试这个：

```
- (.+) on (.+) in (.+) for (.+)\\r\\n\\t\\t\\tEdit 
```

我得到的比赛（1 美元、2 美元、3 美元、4 美元）

```
Match 1
1\.  user.001
2\.  July 15, 2012
3\.  Africa
4\.  Human Resources
Match 2
1\.  someusername
2\.  January 01, 2012
3\.  United States
4\.  HR
Match 3
1\.  userid
2\.  August 15, 2012
3\.  Asia
4\.  Whatever
Match 4
1\.  100100.user
2\.  May 21, 2002
3\.  New England
4\.  ABC 
```

**编辑：**

万一部门 部分是可选的，你可以试试这个（使最后一个匹配部分可选，并使其旁边的一个非贪婪匹配：

```
- (.+) on (.+) in (.+?)(?: for (.+))?\\r\\n\\t\\t\\tEdit

Match 5
1\.  user.001
2\.  July 15, 2012
3\.  Africa
4\. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T05:47:24.140

您似乎需要的正则表达式是：

```
"- (.*) on (.*) in (.*) for (.*) \\r\\n\\t\\t\\t(.*)" 
```

注意空格。然后你只需要从你的比赛中得到正确的组。 `group(1)`将是用户名，`group(2)`日期等。

`group(1)`将返回与正则表达式中括在括号中的第一部分匹配的子字符串，第二部分`group(2)`，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:57:39.370

```
Regex r=new Regex(@"(.*?)on(.*?)in(.*?)for(.*)\s");
Match m=r.Match(s);
m.Groups[1].Value;//UserName
m.Groups[2].Value;//Date
m.Groups[3].Value;//Country
m.Groups[4].Value;//Department 
```

# php - PHP 数组语法解析错误左方括号“[”

> ID：11912233
> 
> 赞同：14
> 
> 时间：2012-08-11T05:37:05.503
> 
> 标签：php, arrays, function, reference

我有一个返回数组的函数。我有另一个函数只返回第一行，但由于某种原因，它让我使用了一个中间变量，即失败：

```
function f1(/*some args*/) {
    return /*an array*/;
}
function f2(/*some args*/) {
    return f1(/*some args*/)[0];
} 
```

. . . 和：

> 解析错误：语法错误，第 10 行的 util.php 中出现意外的“[”

但是，这有效：

```
function f1(/*some args*/) {
    return /*an array*/;
}
function f2(/*some args*/) {
    $temp = f1(/*some args*/);
    return $temp[0];
} 
```

我无法在网上找到任何相关的内容（我的搜索一直被人们用“？”、“{”、“<”等混淆）。

我是自学 PHP 的 - 有什么原因我不能直接做我错过的吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-11T05:40:35.300

您不能使用函数数组取消引用

```
return f1(/*some args*/)[0]; 
```

直到[PHP 5.4.0](http://php.net/manual/en/migration54.new-features.php)及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T05:42:35.623

这种行为的原因是 PHP 函数不能像 JavaScript 函数那样被链接。就像`document.getElementsByTagNames('a')[0]`是可能的。

对于 PHP 版本 < 5.4，您必须坚持第二种方法

> 添加了函数数组解引用，例如 foo()[0]。

[http://php.net/manual/en/migration54.new-features.php](http://php.net/manual/en/migration54.new-features.php)

# php - PHP登录脚本问题

> ID：11912242
> 
> 赞同：1
> 
> 时间：2012-08-11T05:38:04.503
> 
> 标签：php, mysql

我的登录脚本有几个问题。它只是将我引导到一个没有错误的空白页面。

*   如果我使用`mysqli`，是否需要在查询中使用`?`or`$username`和`$password`？
*   我不明白发生了什么`$stmt -> fetch()`；我用对了吗？
*   `$result=mysqli_query($stmt);`: 这个`$result`变量是否包含用户名和密码？
*   如果是这样，它是如何`mysqli_num_rows($result)`工作的？

* * *

```
 <?php 
    function clean($str)
       {
            $str = @trim($str);
            if(get_magic_quotes_gpc()) {
                $str = stripslashes($str);
            }
            return mysql_real_escape_string($str);
        }

        //Sanitize the POST values

    $username = clean($_POST['username']);
    $password = clean($_POST['password']);

    /* Create a new mysqli object with database connection parameters */
    $mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

    if(mysqli_connect_errno()) 
    {
          echo "Connection Failed: " . mysqli_connect_errno();
          exit();
    }
       /* Create a prepared statement */
    if($stmt = $mysqli -> prepare("SELECT Login_ID, Login_PW,
    FROM login  
    WHERE Login_ID='$username' AND Login_PW ='".md5($_POST['password'])."'"))
     {

          /* Bind parameters
             s - string, b - boolean, i - int, etc */
          $stmt -> bind_param("ss", $username, $password);

          /* Execute it */
          $stmt -> execute();

          /* Bind results */
          $stmt -> bind_result($username, $password);

          /* Fetch the value */

         while ($stmt->fetch()) 
         { 
              $result=mysqli_query($stmt);

        //Check whether the query was successful or not
        if($result)
         {//main if
            if(mysqli_num_rows($result) == 1) 
            {
                //Login Successful
                session_regenerate_id();
                $login = mysqli_fetch_assoc($result);
                $_SESSION['SESS_MEMBER_ID'] = $login['Login_ID'];
                //$_SESSION['SESS_FIRST_NAME'] = $login['firstname'];
                //$_SESSION['SESS_LAST_NAME'] = $login['lastname'];
                session_write_close();
                header("location: member-index.php");
                exit();
            }
            else {
                //Login failed
                header("location: login-failed.php");
                exit();
                 }
            }
            else 
            {
            die("Query failed");
            }

         }//main if close

          /* Close statement */
          $stmt -> close();
       }

       /* Close connection */
       $mysqli -> close();
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:22:31.800

1.  当您使用准备好的语句时，通常不应将变量替换到语句中。你把 ？占位符，然后使用`$stmt->bind_param()`将这些占位符与变量相关联。

2.  使用后`$stmt->fetch()`，您可以引用您绑定的变量`$stmt->bind_result`来访问 SELECT 的结果。

3.  `mysqli_query`如果您使用的是准备好的语句，则根本不应该使用。要回答您有关其工作原理的问题，`$result`不包含实际数据。您调用类似`$row = mysqli_fetch_assoc($result)`将用户名和密码放入 $row 的方法。

4.  你应该使用`$stmt->num_rows()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:42:34.107

我试图解决你的每一个问题，但是它们变得如此复杂，以至于我不能只给你一个答案。所以我冒昧地修改了你发布的脚本，我相信它会让它工作。也许仍然需要一些额外的调整。请查看我添加的内联评论。此外，查看以下 php 文档页面以获取有关以面向对象形式使用 mysqli 函数的更多信息：

[http://www.php.net/manual/en/mysqli-stmt.num-rows.php](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)

[http://www.php.net/manual/en/mysqli-stmt.execute.php](http://www.php.net/manual/en/mysqli-stmt.execute.php)

[http://www.php.net/manual/en/mysqli-stmt.bind-result.php](http://www.php.net/manual/en/mysqli-stmt.bind-result.php)

[http://www.php.net/manual/en/mysqli-stmt.bind-param.php](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)

我还没有测试过，我可能有一两个错字，但这是我改进脚本的尝试。让我知道你的想法：

```
<?php 
function clean($str)
{
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//Sanitize the POST values

$username = clean($_POST['username']);
$password = clean($_POST['password']);

/* Create a new mysqli object with database connection parameters */
$mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

if(mysqli_connect_errno()) 
{
    echo "Connection Failed: " . mysqli_connect_errno();
    exit();
}

/* Is your username the same as the login_id? If not you need to change this query's where to use the username column not the login_id. */

/* Create a prepared statement */
if($stmt = $mysqli -> prepare("
    SELECT Login_ID, firstname, lastname
    FROM login  
    WHERE Login_ID=? AND Login_PW=?
"))
{
    /* Bind parameters
         s - string, b - boolean, i - int, etc */
    $stmt -> bind_param("ss", $username, md5($password));

    /* Execute it */
    $result = $stmt -> execute();

    //Check whether the query was successful or not
    if ($result === false) {
        die("Query failed");
    }

    /* Bind results to variables that will be used within the fetch() loop. */
    $stmt -> bind_result($login_id, $firstname, $lastname);

    /* Check the number of rows returned. */
    if ($stmt->num_rows !== 1) {
        //Login failed
        header("location: login-failed.php");
        exit();
    }

    /* Iterate over the results of the query. */
    while ($stmt->fetch()) 
    { 
        //Login Successful
        session_regenerate_id();
        /* We can use $login_id, $firstname and $lastname cause we binded the result to those variables above. */
        $_SESSION['SESS_MEMBER_ID'] = $login_id;
        //$_SESSION['SESS_FIRST_NAME'] = $firstname;
        //$_SESSION['SESS_LAST_NAME'] = $lastname;
        session_write_close();
        header("location: member-index.php");
        exit();
     }//main if close

      /* Close statement */
      $stmt -> close();
   }

   /* Close connection */
   $mysqli -> close();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:16:44.857

我认为，问题在于您的这部分代码

```
 while ($stmt->fetch()) 
     { 
          $result=mysqli_query($stmt); 
```

您已经执行了该语句，并获取了它；无需您再次查询。. . . 我不熟悉 mysqli，因为我使用 PDO，但我认为由于您将结果绑定到 $username, $password 您可以使用这些绑定变量访问返回的值。

```
while ($result = $stmt->fetch()) 
 { 
if($result->num_rows == 1) 
        {
$_SESSION['SESS_MEMBER_ID'] = $result['LOGIN_ID']
//////or $_SESSION['SESS_MEMBER_ID'] = $username 
```

你可以这样进行，我想。. .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T06:26:12.217

对不起，我对mysqli不太了解的朋友。但是如果你愿意，这可以用 mysql 轻松完成。

顺便说一句，对于您的第三个问题， `$result=mysqli_query($stmt);`如果您的搜索条件有任何匹配记录，则仅返回资源 ID。并将`mysqli_num_rows($result);`返回有多少资源 ID 可用于该条件。用户名和密码只会在此之后返回，`mysqli_fetch_array($result);`这将使数据库将记录作为这些资源 ID 的数组获取。

希望你能理解...：））

# android - 通过数组适配器以编程方式添加视图

> ID：11912250
> 
> 赞同：1
> 
> 时间：2012-08-11T05:38:49.293
> 
> 标签：android, android-layout, android-arrayadapter

我正在使用 arrayadapter 显示列表视图。对于每个列表项，我都会膨胀相同的 xml 文件。我能够很好地显示列表视图。但现在我有另一个要求。我想以编程方式将更多视图添加到我为每个列表项膨胀的同一个 xml 文件中。但是当我尝试这样做时，我没有收到任何错误。但不知何故，我以编程方式添加的视图没有显示出来......谁能帮助我。下面是 xml 布局和 arrayadapter 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/placeholder"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="@color/listitemcolor"
android:padding="10dip">

<LinearLayout
    android:layout_weight="1.0"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:textColor="@android:color/black"
            android:id="@+id/locationitem_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textSize="16dp"
            android:textStyle="bold" />

        <LinearLayout
            android:layout_marginTop="5dip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:drawableLeft="@drawable/like"
                android:textColor="#008000"
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Likes"
                android:textSize="12dp"
                android:textStyle="bold" />

            <TextView
                android:textColor="#008000"
                android:layout_marginLeft="5dip"
                android:id="@+id/number_of_likes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="15"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <TextView
                android:drawableLeft="@drawable/dislike"
                android:textColor="#FF0000"
                android:layout_marginLeft="10dip"
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Dislikes"
                android:textSize="12dp"
                android:textStyle="bold" />

            <TextView
                android:textColor="#FF0000"
                android:layout_marginLeft="5dip"
                android:id="@+id/number_of_dislikes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="8"
                android:textAppearance="?android:attr/textAppearanceSmall" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

这是arrayadapter的代码：

```
 public class LocationItemAdapter extends ArrayAdapter<LocationItem> {

private Context context;
private ArrayList<LocationItem> items;

public LocationItemAdapter(Context context,
        List<LocationItem> objects) {
    super(context, R.layout.locationitem_listview_element, objects);

    this.context = context;
    items = (ArrayList<LocationItem>) objects;

}

/* (non-Javadoc)
 * @see android.widget.ArrayAdapter#getView(int, android.view.View, android.view.ViewGroup)
 */
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View rowview = null;
    if(convertView == null)
    {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowview = inflater.inflate(R.layout.locationitem_listview_element, null);

    }
    else
    {
        rowview = convertView;
    }

    ((TextView)rowview.findViewById(R.id.locationitem_name)).setText(items.get(position).getName());
    ((TextView)rowview.findViewById(R.id.number_of_likes)).setText(String.valueOf(items.get(position).getLikes()));
    ((TextView)rowview.findViewById(R.id.number_of_dislikes)).setText(String.valueOf(items.get(position).getDislikes()));
    LayoutInflater inflater1 = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    TextView tv = new TextView(context);
    //TextView tv = (TextView)inflater1.inflate(R.layout.sample, null);
    tv.setText("My name is blah");
    tv.setTextColor(R.color.black);
    tv.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.MATCH_PARENT));

    //tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    LinearLayout ll = (LinearLayout)rowview.findViewById(R.id.placeholder);
    //((LinearLayout)rowview.findViewById(R.id.placeholder)).addView(tv);
    ll.addView(tv);
    rowview.setTag(items.get(position));
    return rowview;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:10:48.010

这在我看来是正确的。也许嵌入成功但不会占用屏幕空间？您可以通过将其背景颜色设置为粉红色或其他东西来验证占位符在屏幕上占用了一些可见空间吗？

# c# - 在 C# 中打开文件后锁定文件

> ID：11912251
> 
> 赞同：0
> 
> 时间：2012-08-11T05:38:50.450
> 
> 标签：c#, .net

我想在 Web 浏览器控件中打开一个**MS Word 文档**，打开该文件后，我想锁定该文件，直到我关闭我的程序，任何人都无法打开或使用该文件。可能吗？请帮助...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:46:08.500

如果不使用本机 Windows/NTFS API，就没有明确的方法来锁定文件。

简单的解决方案是[打开一个写流](http://msdn.microsoft.com/en-us/library/system.io.file.openwrite.aspx)，直到你想释放它才关闭它。

不过，我不确定它有多“优雅”。如果您忘记关闭流，这将阻止其他人打开文件，包括我们的应用程序。

希望这可以帮助。

# jquery - 使用外部链接打开 jquery 手风琴

> ID：11912255
> 
> 赞同：0
> 
> 时间：2012-08-11T05:39:14.767
> 
> 标签：jquery, hyperlink, accordion, slidedown

我使用`slideUp`and`slideDown`函数来生成一个 jQuery 手风琴。但是如何使用外部链接打开手风琴，如下所示的链接：*http://www.example.com/page.html# **index-number***，其中 index-number 与手风琴面板中的标题编号匹配。

例如：*http://www.example.com/page.html# **1***，将向下滑动/打开第一个面板，*http://www.example.com/page.html# **3***，将打开第三个面板。

这是我的html：

```
<div id="leftCol-3">
    <div class="csc-header">
        <h1>Header-1</h1>
    </div>
    <div class="accordionTrigger" id="link-1">body Text-1</div>
    <div class="csc-header">
        <h1>Header-2</h1>
    </div>
    <div class="accordionTrigger" id="link-2">body Text-2</div>
    <div class="csc-header">
        <h1>Header-3</h1>
    </div>
    <div class="accordionTrigger" id="link-3">body Text-3</div>
</div> 
```

这是我的js：

```
$(document).ready(function()  {
    //From http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/

    // hide the divs on page load   
    $('#leftCol-3 div > .accordionTrigger').hide(); 

    //ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
    $('#leftCol-3 div .csc-header').click(function() {

        //REMOVE THE ON CLASS FROM ALL BUTTONS
        $('#leftCol-3 div .csc-header').removeClass('active');

        //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
        $('.accordionTrigger').slideUp('normal');

        //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
        if($(this).next().is(':hidden') == true) {

            //ADD THE ON CLASS TO THE BUTTON
            $(this).addClass('active');

            //OPEN THE SLIDE
            $(this).next().slideDown('normal');
         } 

     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:44:15.333

您需要将“活动”类动态添加到 URL 触发的任何 ID。您需要为每个 div.accordionTrigger 添加一个 ID 才能执行此操作。

因此，要使“body Text-1”可见：

```
<div id="leftCol-3">
    <div class="csc-header">
        <h1>Header-1</h1>
    </div>
    <div class="accordionTrigger active" id="text1">body Text-1</div>
    <div class="csc-header">
        <h1>Header-2</h1>
    </div>
    <div class="accordionTrigger" id="text2">body Text-2</div>
    <div class="csc-header">
        <h1>Header-3</h1>
    </div>
    <div class="accordionTrigger" id="text3">body Text-3</div>
</div> 
```

您是否有权访问服务器端脚本，例如 PHP？如果是这样，我会这样做，否则我确信也有一个 jQuery 解决方案。

# lex - 如何链接多个lex生成的c文件？

> ID：11912256
> 
> 赞同：0
> 
> 时间：2012-08-11T05:39:17.420
> 
> 标签：lex

我为 3 种不同格式的文件解析编写了 3 个 .lex 文件，在生成扫描仪 c 代码后，我需要将这 3 个文件构建为单个可执行文件，但由于“＇yy_switch_to_buffer（...）＇ 的多重定义”等原因而失败， “＇yytext＇的多重定义”, ...

这个怎么解决？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T15:05:49.170

# android - 在android中以编程方式制作菜单

> ID：11912258
> 
> 赞同：0
> 
> 时间：2012-08-11T05:40:25.217
> 
> 标签：android, android-layout

我正在尝试从代码中制作菜单。我想知道**android:showAsAction**的编程等价物是什么。我知道我们可以在 XML 中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:58:15.623

使用您想要的常量之一调用[setShowAsActionFlags](http://developer.android.com/reference/android/view/MenuItem.html#setShowAsActionFlags%28int%29)。

[有关可以传递的常量，](http://developer.android.com/reference/android/view/MenuItem.html#SHOW_AS_ACTION_ALWAYS)请参阅**常量**部分。

# python - Python多继承问题

> ID：11912261
> 
> 赞同：2
> 
> 时间：2012-08-11T05:41:32.397
> 
> 标签：python, multiple-inheritance, tornado, mixins

我正在尝试运行具有如下继承模式的python代码：

```
A Object
|   /\
|  B C
|  | |
|  D E
 \ | /
  \|/
   F
A = Base Handler
B = OAuth2 Mixin
C = OAuth Mixin
D = Facebook Graph Mixin
E = Twitter Mixin 
```

B、C、D、E 中的函数名称重叠。D 和 E 是 mixin，所以它们不应该独立产生。我该如何解决这个问题，以便 F 类可以调用特定的 mixin？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:53:19.780

如果您提前知道它们的名称，则可以调用它们的方法并`C`显式传递：`D``self`

```
class E(C, D):
    def do_c_thing(self):
        # Call C's version
        C.some_method(self, ...)

    def do_d_thing(self):
        # Call D's version
        D.some_method(self, ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:10:21.363

重新考虑从两者继承是否*真的*是你想要做的。如果你只从 A 和 C 继承，并且只保留一个 D 的实例，就像这样：

```
class E(A, C):
   def __init__(self):
      self.d = D() 
```

, 然后`self.foo()`上 mro 到`B.foo`. 打电话`D.foo`，你会的`self.d.foo()`。您还需要显式包装`D`您想要的任何其他方法`E`- 如果您使用的是 Python 3，则非常简单：

```
def __init__(self):
    self.d = D()
    self.bar = d.bar 
```

在 Python 2 中，这是行不通的，最简单的方法是像这样编写包装器：

```
def bar(self):
   return self.d.bar() 
```

# mysql - 每日核对/任务列表的数据库结构

> ID：11912262
> 
> 赞同：0
> 
> 时间：2012-08-11T05:41:45.157
> 
> 标签：mysql, database-design, relational-database, entity-relationship, database-schema

我的消防部门要求我构建一个应用程序，将我们的每日和每周卡车检查记录移动到数据库并集成到现有的会员网站。我正在尝试找出构建它的最佳方法。

有 10 辆卡车，每辆卡车都有自己的每周检查程序。

这里有一个供参考--->

![在此处输入图像描述](../Images/1849eadfc616ba87147624547750872f.png)

*   所有字段都是布尔值（注释字段除外）。
*   这些字段偶尔会发生变化（新设备等）。

我们的两个“先出”引擎也每天进行一次检查。这基本上只是上述每周检查的较短版本。

每日结账表格--->

![在此处输入图像描述](../Images/b7e1ba78b78c364b3a544fc02fd93199.png)

你将如何构建这个数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:32:01.657

如果我没记错的话，您的问题与一般的“表格/问卷”非常相似。

因此，我建议以[其他答案](https://dba.stackexchange.com/a/11970)作为起点（当然，您最好阅读同一问题的其他答案）。

您的案例“更简单”，因为显然您只有两种类型的答案：布尔值和文本注释。

基本上每辆不同的卡车都会是一份问卷，并注意正确建模（并维护）版本的概念（这样，如果您添加一些新设备或检查卡车，您只需将问题/步骤添加到主问卷和从那时起，用户可以使用正确的问题/答案集。

# php - 通过 PHP 剥离 HTML

> ID：11912264
> 
> 赞同：2
> 
> 时间：2012-08-11T05:42:13.050
> 
> 标签：php, html, forms, codeigniter

我有一个函数，它通过将请求的变量放入数组中来创建 HTML 表单行[视图，以生成以下内容：](https://gist.github.com/3321459)

`<input type=\"text\" name=\"name\" value=\"\" id=\"name\" class=\"\" />`

我现在要做的是创建一种通过与添加相同的表单编辑特定字段的方法，但我不确定如何获取当前：

*   姓名
*   价值
*   班级
*   占位符 - 如果选择“是”，则由带有输入字段的下拉框设置
*   type - 设置输入类型

我怎样才能提取这些数据？

我的数据库结构如下所示，我想我可以拥有它，因此每个参数都有一行，然后是标签和字段行，然后我可以对其进行任何更改进行编辑。

![在此处输入图像描述](../Images/904e3940fb692eb661c33df12c33c551.png)

我绑定了以下内容：

```
$testLabel = $field_info->label;
$testPrint = preg_replace("/\([^\)]+\)/","",$testLabel);
$data['test'] = $testPrint; 
```

标签 =`<label for=\"name\">Name</label>\n`

这给了我`Name/n`，但我不确定如何构建一个函数来获取我需要的特定数据并设置下拉框。

**$field_info：**

```
private function fieldInformation($id)
{
    $id = $this->uri->segment(4);

    $information = $this->form_model->showFieldInformation($id);

    return $information[0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:52:39.907

codeiginter[表单验证类](http://codeigniter.com/user_guide/libraries/form_validation.html)是您所需要的。

使用那里的功能，您可以使用数据库中的数据预先填写表单，同时确保每个字段的验证。

# python - 如何在我的桌面上读取文本文件并希望在 Python 中获取终端上的数据

> ID：11912268
> 
> 赞同：-6
> 
> 时间：2012-08-11T05:42:26.203
> 
> 标签：python

我有一个名为“mylist.txt”的文本文件。我想阅读这个文件，并想在我的终端上显示文件中的每一个数据。你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T05:50:01.713

```
with open('mylist.txt') as f:
    for line in f:
        print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:23:29.707

```
with open('/home/acer/Desktop/mylist.txt') as f:    #path to the file
    print f.read() 
```

[在此处](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)了解有关文件的更多信息`read/write`

# jquery - 如何在jquery中返回元素的先前宽度？

> ID：11912272
> 
> 赞同：0
> 
> 时间：2012-08-11T05:42:47.667
> 
> 标签：jquery, animation

我正在尝试一个简单的动画效果。我想要做的是，我试图让文本的背景（带颜色）扩展到 MouseOver 上容器的整个宽度，并在 mouseout 上返回它的默认宽度。但是，考虑到具有不同默认宽度的文本数量，有没有办法只设置 mouseout 事件，以便背景宽度恢复到以前的状态/宽度？而不是为每个设置一个特定的宽度？（鼠标悬停之前）

请在下面找到代码：

html：

```
<div class="div4" style="border:solid 1px #CCC; height:180px; width:200px; text-align:left; background-color:#CCC; padding-top:3px; padding-bottom:3px; outline:1px solid #999;">
<ul id="boombox" style="margin:0px; padding:0px; list-style:none;">
<li><span style="background-color:yellow;">Yellow</span></li>
<li><span style="background-color:red;">Red</span></li>
<li><span style="background-color:green;">Green</span></li>
<li><span style="background-color:blue;">Blue</span></li>
<li><span style="background-color:#333;">Gray</span></li>
<li><span style="background-color:orange;">Orange</span></li>
<li><span style="background-color:brown;">Brown</span></li>
<li><span style="background-color:black;">Black</span></li>
<li><span style="background-color:violet;">Violet</span></li>
</ul>
</div> 
```

jQuery：

```
$("span").hover(function(){
$(this).animate({width:"100%"},"fast");
},function(){
$(this).animate({width:'....'},"slow"); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:46:56.393

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/H2M8Z/)**

```
$("span").hover(function() {
    $(this).attr('prevWidth', $(this).width())
    $(this).animate({
        width: "100%"
    }, "fast");
}, function() {
    $(this).animate({
        width: $(this).attr('prevWidth')
    }, "slow");
});​ 
```

# c++ - 用于在 boost 中访问 c df 和 pdf 的内置对象？

> ID：11912276
> 
> 赞同：-1
> 
> 时间：2012-08-11T05:43:23.603
> 
> 标签：c++, boost, distribution

我想知道是否有内置设备可以访问 C++ 中的概率密度函数和累积分布函数，尤其是在 Boost 中。

当然，对于许多 pdf 来说，可以简单地输入公式并进行计算，但是对于累积函数来说就不太方便了，因为大多数时候你必须做一个积分。所以我想有时还是最好简单地插入一些参数并立即获得密度或分布。

C++ 中是否有这样的对象类允许您这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:24:55.813

您是否看过： http: [//www.boost.org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/stat_tut/dist_params.html](http://www.boost.org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/stat_tut/dist_params.html)，特别是 [http://www.boost。 org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/nmp.html#math.dist.cdf](http://www.boost.org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/nmp.html#math.dist.cdf) ？

# android - 在android中的更改活动上滑动xml动画

> ID：11912277
> 
> 赞同：19
> 
> 时间：2012-08-11T05:43:28.150
> 
> 标签：android, android-layout, android-activity, android-animation, slideup

在发布此内容之前，我阅读了以下链接。

[如何在 Android 中的两个活动之间应用幻灯片动画？](https://stackoverflow.com/questions/10243557/how-to-slide-animation-between-two-activity-in-android)

我需要知道如何制作活动幻灯片 xml 动画。就像他们为淡入淡出所做的那样。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-02T06:11:58.157

接受的答案不是问题所要求的，即从底部向上滑动并从顶部滑出的动画。

`pull_up_from_bottom.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime" 
    android:fromYDelta="100%"
    android:toYDelta="0%" /> 
```

`push_out_to_bottom.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="0%"
    android:toYDelta="100%" /> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-11T06:13:43.357

对于幻灯片输入 xml：

```
<translate 
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:duration="250" 
      android:fromXDelta="-100%p" 
      android:toXDelta="0%p">
</translate> 
```

对于幻灯片输出 xml：

```
<translate
      xmlns:android="http://schemas.android.com/apk/res/android" 
      android:duration="200" 
      android:fromXDelta="0" 
      android:toXDelta="100%p">
</translate> 
```

Java代码：

```
Intent intent = new Intent(this, newActivity.class);
startActivity(intent);
overridePendingTransition(R.anim.slide_in, R.anim.slide_out); 
```

将两个 xml 文件放在 res/anim 文件夹中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-27T09:01:46.000

这就是我所追求的：

**res/anim/slide_up.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="@android:integer/config_longAnimTime"
android:fromYDelta="100%"
android:toYDelta="0%" /> 
```

**res/anim/slide_down.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="@android:integer/config_longAnimTime"
android:fromYDelta="0%"
android:toYDelta="0%" /> 
```

**res/anim/slide_down_reverse.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="@android:integer/config_longAnimTime"
android:fromYDelta="0%"
android:toYDelta="0%" /> 
```

**res/anim/slide_up_reverse.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="@android:integer/config_longAnimTime"
android:fromYDelta="0%"
android:toYDelta="100%" /> 
```

**你的活动.kt**

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    setContentView(R.layout.your_layout)

    overridePendingTransition(R.anim.slide_up, R.anim.slide_down)
}

override fun finish() {
    super.finish()

    overridePendingTransition(R.anim.slide_down_reverse, R.anim.slide_up_reverse)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-24T11:15:10.103

您可以将以下代码用于上滑活动过渡动画。

```
startActivity(new Intent(MainActivity.this, DataSetActivity.class));
overridePendingTransition(R.anim.slide_out_bottom, R.anim.slide_in_bottom); 
```

**R.anim.slide_out_bottom**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">
    <translate
        android:duration="250"
        android:fromXDelta="0%"
        android:fromYDelta="100%"
        android:toXDelta="0%"
        android:toYDelta="0%" />
</set> 
```

**R.anim.slide_in_bottom**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">
    <translate
        android:duration="200"
        android:fromXDelta="0%"
        android:fromYDelta="0%"
        android:toXDelta="0%"
        android:toYDelta="100%" />
</set> 
```

*   [根据谷歌素材动画](https://material.io/design/motion/speed.html#)，进出过渡动画的动画速度不同

# matrix - 对二进制代码的无前缀和唯一可解码感到困惑

> ID：11912282
> 
> 赞同：0
> 
> 时间：2012-08-11T05:44:11.193
> 
> 标签：matrix, binary, decode, prefix

**代码**是将唯一的字符串（代码字）分配给字母表中的每个字符。

代码字只包含零和一的代码称为**二进制代码。**

所有 ASCII 码字具有相同的长度。这确保了一个称为**前缀属性**的重要属性适用于 ASCII 代码。

来自字母表（明文）的字符串的编码是与明文字符相对应的码字从左到右按顺序串联。如果使用该代码的每个可能的明文的编码都是唯一的，则该代码是**唯一可解码的。**

基于上述信息，我试图做一些练习：

考虑以下矩阵：

```
 Code1   Code2  Code3  Code4

A  0       0        1      1

B  100     1       01     01

C  10      00     001    001

D  11      11    0001    000 
```

**困惑：**

1.  是否所有上述分配都被认为是`codes`因为它们具有唯一的字符串？？？
2.  我知道它们`code 1 and code 2`是无前缀的，因为它们的长度不相等。话虽如此，如果您查看`code 4`字母表`D and C`，它包含 3 位数字。`code 4`也会被认为是无前缀的吗？
3.  是`code 3`唯一可解码的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:15:23.980

我认为您误解了[前缀属性](http://en.wikipedia.org/wiki/Prefix_code)-它主要与长度无关（但`n`在每个代码点上强制使用相同的长度将使代码无前缀-否则您不能拥有唯一代码）。

相反，它是关于能够唯一地识别每个代码点，以便解码器可以贪婪地获取第一个匹配的翻译。在固定长度的情况下，解码器知道它必须读取`n`数字。

在[可变长度代码](http://en.wikipedia.org/wiki/Variable-length_code)（如）的情况下`Code1`，您在阅读时不知道它`10`是否可以翻译成，`C`或者它是否是三位数字的前两位数字`B`-`10`是`100`. 这同样适用于`Code2`:`0`是 的前缀`00`并且`1`是 的前缀`11`。

考虑一次读取`100` *一个数字*的序列：

```
Code1:
Read 1
; "1" does not match any code -  Remember the 1 and continue.
Read 0
; "10" matches reduction "C" - or is this the beginning of a "B"? Darn!
Read 0
; Ok, this was either "CA" or "B" - but there is no way of knowing which one. 
```

希望这可以帮助您前进！

# java - Mbrola.base 未定义

> ID：11912285
> 
> 赞同：3
> 
> 时间：2012-08-11T05:45:16.853
> 
> 标签：java, freetts, mbrola

我正在尝试使用 Freetts 文本到语音 api。我已将所有 jar 文件包含到我的项目中。我还将 Speech.properties 文件复制到主文件夹中。但我收到
错误**System property mbrola.base undefined.Will不使用 mbrola 声音。**.Plus 当我运行示例 jar 文件时，同样的错误没有语音输出。

我该如何排序？

# c++ - 使用 /O2 与 /Ox 进行编译——哪个更快（根据经验）？

> ID：11912289
> 
> 赞同：3
> 
> 时间：2012-08-11T05:46:13.647
> 
> 标签：c++, visual-studio, visual-c++, compiler-optimization, compiler-options

[这个问题](https://stackoverflow.com/questions/5063334/what-is-the-difference-between-the-ox-and-o2-compiler-options)和[MSDN](http://msdn.microsoft.com/en-us/library/59a3b321)似乎暗示 /O2 会更快，但是如果您查看 Microsoft 自己的[SafeInt](http://safeint.codeplex.com/)类，您会注意到它说：

> 1）编译优化代码 -`/Ox`最好，`/O2`也表现良好。有趣`/O1` 的是，（优化大小）也不起作用。

如果差异真的`/GF /Gy`像上面的问题所说的那样，那么就我想像的那样`/GF`，（字符串池）和`/Gy`（省略帧指针）不会真正*伤害到你。*

有什么我想念的吗？`/Ox`一般更快吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:50:57.047

`/Gy`不是帧指针遗漏，即`/Oy`, 至少在`/Ox`, `/O1`,下启用`/O2`。

`/Gy`是 COMDAT 生成（函数级链接），它倾向于减少工作集的大小，但不应该真正影响代码质量。在模板和内联代码（例如 SafeInt）上，可能根本没有明显的区别。

您链接的 MSDN 页面也说使用`/O2`而不是`/Ox`，所以我认为“`/Ox`一般更快”的想法没有任何优点。

# jquery - 从下拉列表中删除样式

> ID：11912291
> 
> 赞同：1
> 
> 时间：2012-08-11T05:46:28.500
> 
> 标签：jquery, drop-down-menu, checkbox

我正在[将此](http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html)下拉清单用于我的一个应用程序。这对我来说效果很好，但我的问题是，它的 Look(jquery UI) 与我的应用程序 UI 不匹配。有什么办法可以改变上面的风格。我更喜欢删除麦粒肿，看起来像正常的下拉列表。我也经历过[这个](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/)。但它有同样的问题。是否有任何看起来像普通下拉列表并具有此功能的下拉清单？

我的代码

```
 <script type="text/javascript">
        $(document).ready(function() {
            $("#s1").dropdownchecklist(); 
        });
    </script>

            <select id="s1" multiple="multiple" tabindex='8'>
                <option>Low</option>
                <option>Medium</option>
                <option>High</option>
            </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:49:06.173

您可以尝试删除已分配的类和样式或任何有效的方法，删除这些属性后将新类添加到下拉列表

```
$('#dropdownid').removeClass();       
$('#dropdownid').removeAttr('class');
$('#dropdownid').removeAttr('style');    
$('#dropdownid').attr('class', 'newclass'); 
```

尝试更改 ui.dropdownchecklist.standalone、ui.dropdownchecklist.themeroller 中提供的此下拉列表的 css

# cakephp - 是否可以根据主模型的数据进行关联？

> ID：11912294
> 
> 赞同：3
> 
> 时间：2012-08-11T05:46:44.287
> 
> 标签：cakephp, database-design, associations, cakephp-2.1

我有一个节点表（`Node`模型）。我希望它与不同的数据类型相关联，但前提是它的字段设置为`1`.

**例子：**

我的`nodes`表有一个`data_article`字段 ( `tinyint 1`)。我只希望节点`$hasMany Article`如果该字段为 1。

我试过这个：

```
public $hasMany = array(
    'Article' => array(
        'conditions' => array('Node.data_articles' => '1')
    ),
); 
```

但我收到一个错误：

> 未找到列：1054 'where 子句'中的未知列'Node.data_articles'

因为该协会正在自己的查询中查找文章：

```
SELECT `Article`.`id`, `Article`.`title`, `Article`.`node_id`, ...more fields...
FROM `mydatabase`.`articles` AS `Article`
WHERE `Node`.`data_artiles` = '1'
AND `Article`.`node_id` = ('501991c2-ae30-404a-ae03-2ca44314735d') 
```

显然这不起作用，因为在此查询中根本没有加入节点表。

**TLDR：**

是否可以基于主模型中的字段进行关联？如果没有，我还能如何在多个表中保留不同的数据类型，而不必每次都查询它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:17:06.017

我认为使用 CakePHP 没有标准的方法来做到这一点（至少我无法想象一种方法）。绝对可能的是[动态绑定相关模型](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)。

因此，您可以通过将`recursive`参数传递`-1`给`find()`方法并根据结果动态地[解除](http://api20.cakephp.org/class/model#method-ModelunbindModel)关联模型来查询没有关联的模型。之后，您肯定会再次查询。您可能会基于此构建一个[行为](http://book.cakephp.org/2.0/en/models/behaviors.html)以使其可重用。

[如果 Cake 可以在查询主模型之后但在查询关联模型之前使用回调](http://book.cakephp.org/2.0/en/models/callback-methods.html)进行两步查询，那么一个非常优雅的解决方案将是可能的，但目前这是不可能的。

编辑：可能有一种非蛋糕的方式可以使用包括[IF-statements](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_if)的自定义查询来更高效地归档它，但我不是这里的 SQL 专家。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-11T08:21:19.580

你应该从另一边做：

```
public $belongsTo = array(
'Node' => array(
    'conditions' => array('Node.data_articles' => '1')
  ),
); 
```

# json - JSON程序中的空指针异常

> ID：11912303
> 
> 赞同：-1
> 
> 时间：2012-08-11T05:48:02.820
> 
> 标签：json, nullpointerexception

如代码所示，我在两行中得到一个空指针异常，带有三颗星。请注意。我是android的初学者。提前致谢。我尝试实例化瓦片 JSONarray 但即使这样也行不通。

```
package pack.assignment;            ***
import java.net.URL;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import java.io.InputStream;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.Toast;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import java.io.IOException;
import android.widget.ImageView;
import java.net.MalformedURLException;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.app.ProgressDialog;

public class Landing extends Activity {
    // url to make request
    private static String url = "http://playup-jo.s3.amazonaws.com/dev/config.json";
    private ProgressDialog pDialog;
    JSONParser jParser = new JSONParser();
    // tiles JSONArray
    JSONArray tiles=null;
    ImageView img;
    // JSON Node names
    private static final String TAG_TILES = "tiles";
    private static final String TAG_IMAGE = "image";
    private static final String TAG_URL = "url";
    private static final String TAG_MDPI = "mdpi";
    private static final String TAG_NAME = "name";

  //  Intent go = new Intent(this, Google.class);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Loading JSON in Background Thread
        new LoadJSON().execute(); 
      img = (ImageView)findViewById(R.id.image);

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);
    }
    /**
     * Background Async Task to Load all INBOX messages by making HTTP Request
     * */
    class LoadJSON extends AsyncTask<String, String, Bitmap> {
        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Landing.this);
            pDialog.setMessage("Loading ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting JSON
         * */
        protected Bitmap doInBackground(String... args) {

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);
            Bitmap bitmap=null;
            // Check your log cat for JSON reponse
        //    Log.d("JSONNN: ", json.toString());

            try {
                // Getting Array of Tiles
                tiles= new JSONArray();
                tiles = json.getJSONArray(TAG_TILES);            ***

                // looping through All Tiles
                for(int i = 0; i < 1; i++){
                    JSONObject c = tiles.getJSONObject(i);
                    // Storing json item in variable 
                    String name = c.getString(TAG_NAME);
                    // mdpi is again JSONObject
                    JSONObject mdpi= c.getJSONObject(TAG_MDPI);
                    String image=mdpi.getString(TAG_IMAGE);
                    String url=mdpi.getString(TAG_URL);
                    // Using the variable to get the bitmap
                    try {
                          bitmap = BitmapFactory.decodeStream((InputStream)new URL(image).getContent());              
                        } 
                    catch (MalformedURLException e) {
                          e.printStackTrace();
                        } 
                    catch (IOException e) {
                          e.printStackTrace();
                        }
                }
            } 
            catch (JSONException e) {
                e.printStackTrace();
         }
            return bitmap;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(final Bitmap result) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data 
                     * */
                      img.setImageBitmap(result);       // Rule:2 Always access UI toolkit for UI thread not worker thread
                      MyEventHandler myEvHandler = new MyEventHandler(); 
                      // making the downloaded image clickable 
                      img.setOnClickListener(myEvHandler);
                }
            });

        }

 } 

    class MyEventHandler implements OnClickListener
    {
        public void onClick(View v)
        {
            if (v instanceof ImageView)
            {
     //           startActivity(go);
            }       
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:34:18.760

错误出现在 JSONParser 类中，我使用的是 httpPost 并获得了 405 而不是 200 的状态代码。我使用了 httpGet 并得到了解决。

# c# - 如何根据数据库中的项目列表将图像添加到 aspx 站点

> ID：11912304
> 
> 赞同：0
> 
> 时间：2012-08-11T05:48:03.170
> 
> 标签：c#, asp.net, sql, sql-server, vb.net

我正在尝试创建一个商店页面，对于店面页面，我需要创建一些可以

1.  列出数据库中的项目，
2.  获取数据库中保存的ID+图片URL
3.  为查询中的每个项目创建一个超链接图像。

关于如何做到这一点的任何建议？

超链接图像将是产品图像，并基于 ID 链接到商店页面。并且将显示它们的列表供该人单击。

提前谢谢你，这个项目对我来说是第一个（以及我在 asp.net 中的第一个 Web 应用程序），我希望看到它做得对！

并且该站点是用 C# 完成的，尽管如果有必要我可以移植到 VB，此时，还没有编写太多实际的代码，而且我对两者都很满意，可以将我拥有的任何代码移植到它上面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:59:51.493

一种简单的方法是使用 ASP.NET 中继器。

类文档在这里：http: [//msdn.microsoft.com/en-us/library/w9283stf](http://msdn.microsoft.com/en-us/library/w9283stf)

我通过快速搜索找到的一篇详细（尽管可能已过时）文章是[http://msdn.microsoft.com/en-us/magazine/cc163780.aspx](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)

（但还有很多其他“如何使用中继器控制”文章）。

祝你好运。

# php - 拆分字符串 For ex: "test 12.45" into test and 12.45?

> ID：11912306
> 
> 赞同：-1
> 
> 时间：2012-08-11T05:48:31.983
> 
> 标签：php, string, split

> **可能重复：**
> [在字符串中分隔以空格分隔的单词](https://stackoverflow.com/questions/1481141/separate-space-delimited-words-in-a-string)

如何拆分字符串例如：“test 12.45”作为测试和 12.45 使用 php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:50:49.923

你试过这个[`explode()`](http://us2.php.net/manual/en/function.explode.php)功能吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T05:51:16.723

```
$text = "test 12.45";

$words = explode(" ",$text);

echo $words[0]; 
echo $words[1]; 
```

# iphone - Inapppurchase 无效的产品 ID - iPhone StoreKit

> ID：11912315
> 
> 赞同：0
> 
> 时间：2012-08-11T05:50:47.483
> 
> 标签：iphone, xcode, in-app-purchase

我正在构建一个 iPhone 应用程序，并且很难测试我对使用 StoreKit 的应用程序内购买的支持。具体来说，我无法使用 SKProductRequest 检索产品 ID，因此我什至无法尝试购买。

以下是我到目前为止所做的： - 在 iTunes Connect 中创建了一个应用程序 - 在 Provisioning Portal 中创建了一个有效的 Bundle ID 的应用程序 ID，并将其配置为启用应用程序内购买（我看到此应用程序 ID 的绿球） - 使用上面的 App ID 为我用于开发的 iPhone 3GS 创建了一个配置文件（iPhone 已使用最新的当前固件更新）并将其导入 XCode - 在 Info.plist 中为我的应用程序设置 Bundle ID 以匹配 Bundle ID（完整的 Bundle ID，如“com.company.myapp”） - 创建了一个与上面我的 iPhone 应用关联的应用内购买，将其 ProductID 设置为“com.company.app.feature”，将类型设置为 Consumable 并标记它是“清盘出售”。当前状态为“等待开发者批准”

当我从商店发出对产品的请求时，将调用 productsRequest:didReceiveResponse: 委托，但我请求的 productID 显示为无效。

接下来，我还尝试为我的应用程序上传一个二进制文件，看看是否有所作为，但没有。我的二进制文件的当前状态是“Developer Rejected”，如果重要的话。自从我创建应用/应用内购买以来已经超过 24 小时

考虑到这可能与我的设备有关，我将 iPod touch 重置为使用最新固件更新的出厂设置。我为 iPod touch 创建了一个配置文件，并使用 XCode 将应用程序部署到它。这也无济于事——我看到了同样的“invalidProduct”问题。

关于我接下来应该做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:42:55.087

[在这里，您有](http://troybrant.net/blog/2010/01/invalid-product-ids/)许多可能导致无效产品 ID 的原因

# html - 带有自动边距的 IE 中的 HTML 页面布局受到干扰

> ID：11912318
> 
> 赞同：0
> 
> 时间：2012-08-11T05:51:08.177
> 
> 标签：html, css, utf-8, multilingual

我有一个多语言的网站，我的页面编码是`utf-8`，当我使用编码时`utf-8`，它会显示所有语言，但页面会向左移动并且自动边距不起作用。当我关闭时`utf-8`，它会在中间显示页面（我想要的），但所有语言都会变成框。

这是我的页面编码

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

我在文本编辑器中打开页面并保存为编码`utf-8`

当我保存为编码时，`ANSI`它的布局可以正常工作，就像我在下面提到的`utf-8`那样

我该如何解决这个问题？

这个问题出现在 IE 中，我使用的是 IE9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:03:57.620

仅使用以下内容是否会遇到相同的问题：

```
<meta charset="utf-8"> 
```

# c++ - Qt4配置参数和库大小

> ID：11912321
> 
> 赞同：0
> 
> 时间：2012-08-11T05:52:29.027
> 
> 标签：c++, qt4

我将构建一个极简主义的静态 qt4 库，我想知道是否使用,`-no-ssse3`或代替会减少库的大小？`-no-mmx``-no-3dnow``-qt-libpng``-system-libpng`

**更新：** 谁能解释我的`-no-incredibuild-xge`参数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:55:46.540

[http://doc.qt.nokia.com/4.7-snapshot/configure-options.html](http://doc.qt.nokia.com/4.7-snapshot/configure-options.html)

我引用

> 不要将 IncrediBuild XGE 分发命令添加到自定义构建步骤中。

# php - 用户从地图中选择位置以获取纬度和经度

> ID：11912322
> 
> 赞同：1
> 
> 时间：2012-08-11T05:52:44.190
> 
> 标签：php, google-maps, google-maps-api-3

> **可能重复：**
> [如何通过 Google Maps API 检索纬度和经度？](https://stackoverflow.com/questions/2770421/how-retrieve-latitude-and-longitude-via-google-maps-api)

我想在我的网站上添加一张地图，以我们所在的城镇为位置。它用于在我们的网站上列出镇上的商店。用户需要在地图中定位他们的店铺位置。我们需要得到他们的经纬度位置。可以使用谷歌地图api吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:39:25.300

将此添加到`head`：

```
<script type="text/javascript" src="http://www.google.com/jsapi?autoload={'modules':[{name:'maps',version:3,other_params:'sensor=false'}]}"></script> 
```

这在一个`script`标签中：

```
var geo;
function init() {
    var map_elem = document.getElementById('map-canvas');
    var map = new google.maps.Map(map_elem, {
        center: new google.maps.LatLng(0, 174.8859710),
        zoom: 2,
        minZoom: 2,
        maxZoom: 4,
        mapTypeId: google.maps.MapTypeId.HYBRID
    });
    geo = new google.maps.Geocoder();
    geo.geocode({
        address: 'New Zealand'
    }, function(e) {
        alert(e[0].geometry.location);
    });
}
google.maps.event.addDomListener(window, 'load', init); 
```

根据需要进行调整。

请参阅[地理编码服务 - Google Maps JavaScript API v3 - Google Developers](https://developers.google.com/maps/documentation/javascript/geocoding)。

# php - CakePHP 和 MongoDB

> ID：11912323
> 
> 赞同：2
> 
> 时间：2012-08-11T05:52:58.217
> 
> 标签：php, mongodb, cakephp, database

我是 cakePHP 和 MongoDB 的新手。我在尝试使用 CakePHP 的 MongoDB 插件时遇到了一些问题。

我在尝试在我的服务器上运行应用程序时遇到了这些错误消息。

> 错误：应用程序正在尝试从 Mongodb 插件加载文件
> 
> 错误：确保您的插件 Mongodb 位于 app\Plugin 目录中并已加载
> 
> `<?php CakePlugin::load('Mongodb');`

我尝试查看 app/plugin 文件夹，但它是空的。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:18:15.593

希望您已经完成了其中的一些步骤，但以防万一……以下是完整列表：

第 1 步：安装[MongoDB 服务器](http://docs.mongodb.org/manual/installation/#installation-guides)并确保可以与[`mongo`shell连接](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)

第 2 步：安装[PHP mongo 驱动程序](http://www.php.net/manual/en/mongo.installation.php)

第三步：下载[cakephp-mongodb 插件](https://github.com/ichikaway/cakephp-mongodb/)

```
cd my/app/plugins
git clone git://github.com/ichikaway/cakephp-mongodb.git mongodb 
```

# animation - 高级动画电子书或教程

> ID：11912324
> 
> 赞同：2
> 
> 时间：2012-08-11T05:52:59.143
> 
> 标签：animation, directx

谁能帮我找到一些关于高级动画技术的电子书或教程？我正在寻找涵盖分层动画、混合、混合、程序动画、变形等主题的东西。像 Jim Adams 的 DirectX 8 高级动画。

# html - html head 中的条件渲染 css

> ID：11912330
> 
> 赞同：18
> 
> 时间：2012-08-11T05:53:35.897
> 
> 标签：html, css, angularjs

我正在尝试使用 Angular js 将 css 动态添加到我的 html 头中。这是示例代码

```
<div ng-repeat="stylesheet in stylesheets">
        <link href="/myapp/{{stylesheet.href}}" type="{{stylesheet.type}}" rel="stylesheet" media="{{stylesheet.media}}" title="{{stylesheet.title}}" />
</div> 
```

此代码按预期工作，但是当浏览器加载页面时，它会尝试使用原始 angularjs 模板获取 css 资源，并且我在 firebug 的网络选项卡中看到“404 not found error”。

```
Eg: request http://localhost:8080/myapp/%7B%7Bstylesheet.href%7D%7D, status 404 
```

当页面完全加载时，它会替换模板值并加载适当的 css。

有没有办法避免 404 错误并使其在 angularjs 处理后加载 css？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-11T08:22:37.647

您应该使用[ng-href](http://docs.angularjs.org/api/ng.directive:ngHref)而不是 href。

```
<link ng-repeat="stylesheet in stylesheets" ng-href="{{stylesheet.href}}" type="{{stylesheet.type}}" rel="stylesheet" /> 
```

[例子](http://plnkr.co/edit/KzjIMN)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-16T13:31:44.510

我制作了一个 AngularJS 服务，以便轻松使用 @Artem 解决方案。

[它在 GitHub 上](https://github.com/Yappli/angularDynamicStylesheets)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-30T19:06:20.310

还有一个使用 $route.resolve 和 promises 的选项。这将等到 CSS 实际加载后，不仅添加到头部（之后浏览器才开始检索文件，并且根据 CSS 大小可能会导致页面重排）。

```
// Routing setup
.config(function ($routeProvider) {
  $routeProvider
  .when('/home', {
      controller: 'homeCtrl', 
      templateUrl: 'home.tpl.html'
  }).when('/users', {
      controller: 'usersCtrl', 
      controllerAs: 'vm',
      templateUrl: 'users.tpl.html',
      resolve: {
        load: ['injectCSS', function (injectCSS) {
          return injectCSS.set("users", "users.css");
        }]
      }
  }).otherwise({
      // default page
      redirectTo: '/home'
  });
}) 
```

服务实施

```
.factory("injectCSS", ['$q', '$http', 'MeasurementsService', function($q, $http, MeasurementsService){
  var injectCSS = {};

  var createLink = function(id, url) {
    var link = document.createElement('link');
    link.id = id;
    link.rel = "stylesheet";
    link.type = "text/css";
    link.href = url;
    return link;
  }

  var checkLoaded = function (url, deferred, tries) {
    for (var i in document.styleSheets) {
      var href = document.styleSheets[i].href || "";
      if (href.split("/").slice(-1).join() === url) {
        deferred.resolve();
        return;
      }
    }
    tries++;
    setTimeout(function(){checkLoaded(url, deferred, tries);}, 50); 
  };

  injectCSS.set = function(id, url){
    var tries = 0,
      deferred = $q.defer(),
      link;

    if(!angular.element('link#' + id).length) {
      link = createLink(id, url);
      link.onload = deferred.resolve;
      angular.element('head').append(link);
    }
    checkLoaded(url, deferred, tries);

    return deferred.promise;
  };

  return injectCSS;
}]) 
```

如果这是您想要包含的内容，您可以使用尝试添加超时。

查看这篇文章了解更多详情：[https ://medium.com/angularjs-meetup-south-london/angular-dynamically-injecting-css-file-using-route-resolve-and-promises-7bfcb8ccd05b](https://medium.com/angularjs-meetup-south-london/angular-dynamically-injecting-css-file-using-route-resolve-and-promises-7bfcb8ccd05b)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-23T12:45:41.440

我创建了一个非常简单的示例，说明如何进行有条件的 CSS 添加

```
<link rel="stylesheet" ng-if="lang_direction == 'rtl'" ng-href="{{lang_direction == 'rtl' ? 'css/rtl.css' : ''}}" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-15T15:26:32.960

对于任何希望在运行时使用 AngularJS 创建真正动态的 CSS 的人来说，这就是我所使用的。

**索引.html**

`<head> <style type="text/css" ng-bind-html="styles"></style> </head>`

**css服务**

`this.$rootScope.myStyles = ".test { color : red; }";`

这只是一个例子，如果你有一个 indexController 并保持它远离，最好将样式放入 indexController`$rootScope`

# javascript - 你能改进我的路由和 ajax 请求吗？(php/laravel)

> ID：11912332
> 
> 赞同：0
> 
> 时间：2012-08-11T05:53:45.380
> 
> 标签：javascript, php, jquery, ajax, laravel

我是一个新手 laravel 用户，并尝试使用教程和文档编写我的代码。当我尝试打开网站时，会出现加载动画，然后菜单和内容会分成页面的任一侧。我只想在单击菜单按钮时更改内容划分。

这些是我的 routes.php：

```
Route::controller(Controller::detect());
Route::get('articles', array('uses'=>'articles@index'));
Route::get('articles/(:any)', array('as'=>'article','uses'=>'articles@view'));
Route::get('abouts', array('as'=>'abouts','uses'=>'abouts@index')); 
```

这是我的 default.blade.php 菜单部分：

```
<div id="sidebar-content">
   <ul id="menu">
       <li class="current"><a href="<?php echo URL::to('articles'); ?>">ANASAYFA</a></li>
       <li><a href="<?php echo URL::to('abouts'); ?>">HAKKIMIZDA</a></li>
   </ul>
</div> 
```

这里的链接正确吗？

我的 ajax.js

```
$(document).ready( function() {
    $("#sidebar-content ul li a").click( function(e){
        e.preventDefault();
        $('#content').load(this.href);
        console.log('This href =='+this.href);
        return false;
    });
}); 
```

当我点击链接时，我得到一个加载动画并且内容没有显示。
这是我的文章控制器：

```
class Articles_Controller extends Base_Controller {
    public $restful = true;
    public $layout = 'layouts.default';

    public function get_index(){
        $this->layout->title = "Anasayfa";
        $this->layout->content = View::make('articles.index')->with('articles',Article::order_by('id')->get());
    }
} 
```

这些是 console.logs ：

```
GET http://localhost/~ytsejam/laravel/public/index.php/abouts  jquery.min.js (line 4)
This href ==http://localhost/~ytsejam/laravel/public/index.php/abouts   ajax.js (line 6)
GET http://localhost/~ytsejam/laravel/public/js/basic.js?_=13446   jquery.min.js (line 4)
GET http://localhost/~ytsejam/laravel/public/index.php/abouts jquery.min.js (line 5)
This href ==http://localhost/~ytsejam/laravel/public/index.php/abouts ajax.js (line 6)
GET http://localhost/~ytsejam/laravel/public/index.php/abouts jquery.min.js (line 5)
This href ==http://localhost/~ytsejam/laravel/public/index.php/abouts jquery.min.js (line 7) 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:39:13.087

我找不到您的菜单和内容分裂的原因。可能您可以重新阅读您的 Javascript，因为在我看来，拆分问题就在那里。

至于你的链接。如果我阅读文档[http://laravel.com/docs/routing](http://laravel.com/docs/routing)，我希望链接是`URL::to_route('abouts')`and `URL::to_route('articles')`，因为您使用命名路由。

*而且您正在使用刀片*引擎（因为您的文件名为default.blade .php）。因此你可以写`{{ URL::to_route('abouts') }}`而不是`<?php echo URL::to_route('abouts'); ?>`

希望这对您有帮助，Hendrik Jan

# php - MYSQL - 请帮帮我

> ID：11912335
> 
> 赞同：-5
> 
> 时间：2012-08-11T05:54:32.730
> 
> 标签：php, mysql

我有 2 张桌子

1.  用户
2.  用户朋友

**USERS**表有字段（我想选择）：

1.  uid（主要）
2.  姓名
3.  性别
4.  国家
5.  城市
6.  出生日期

**USERS_FRIENDS**有字段：

1.  id（主要）
2.  用户（包含用户 uid）
3.  朋友（包含用户的朋友uid）

用户`session`存储在**$uid**中。

我想从**USERS**表中选择**所有**用户，除了那些*已经*在**USERS_FRIENDS** *中的**朋友***。****`$uid`****

 *******注意：**在 USERS_FRIENDS 表**中甚至不可能有用户的一个朋友（就像他是新注册的一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:05:15.143

这应该可以做到，只需找到所有用户的朋友并将它们包装在一个`NOT IN`.

```
SELECT * FROM Users WHERE uid NOT IN (
  SELECT Friend FROM Users_Friends WHERE User=$uid
) 
```*******

# java - 计算下载速度

> ID：11912338
> 
> 赞同：5
> 
> 时间：2012-08-11T05:55:25.053
> 
> 标签：java, stream

我正在下载一个文件，但也试图确定以 KBps 为单位的下载速度。我想出了一个方程，但它给出了奇怪的结果。

```
 try (BufferedInputStream in = new BufferedInputStream(url.openStream());
        FileOutputStream out = new FileOutputStream(file)) {
        byte[] buffer = new byte[4096];
        int read = 0;
        while (true) {
            long start = System.nanoTime();
            if ((read = in.read(buffer)) != -1) {
                out.write(buffer, 0, read);
            } else {
                break;
            }
            int speed = (int) ((read * 1000000000.0) / ((System.nanoTime() - start) * 1024.0));
        }
    } 
```

它给了我100到300,000之间的任何地方。我怎样才能让它给出正确的下载速度？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:01:36.513

您没有检查您的 currentAmmount 和 previousAmount 文件下载量。

例子

```
int currentAmount = 0;//set this during each loop of the download
/***/
int previousAmount = 0;
int firingTime = 1000;//in milliseconds, here fire every second
public synchronyzed void run(){
    int bytesPerSecond = (currentAmount-previousAmount)/(firingTime/1000);
    //update GUI using bytesPerSecond
    previousAmount = currentAmount;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:28:16.150

首先，您以非常短的间隔计算`read()`时间 +`write()`时间，结果将根据 writes() 的（磁盘缓存）刷新而有所不同。将计算放在`read()`

第二个之后，您的缓冲区大小（4096）可能与 tcp 缓冲区大小不匹配（您的最终较小），因此某些读取会非常快（因为它是从本地 TCP 缓冲区读取的） . 相应地使用`Socket.getReceiveBufferSize()` 并设置缓冲区的大小（假设是 TCP recv buf 大小的 2*）并将其填充到*嵌套循环中，直到*在计算之前填满。

# javascript - 使用谷歌地图获取 lon 和 lan

> ID：11912339
> 
> 赞同：0
> 
> 时间：2012-08-11T05:55:40.270
> 
> 标签：javascript, google-maps

我应该为用户提供使用 gmap 或其他带有指向箭头的地图来获取 lon 和 lan 的选项，并将该值存储在变量中以进一步处理。

任何想法，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:07:29.207

您应该阅读本教程，它适合您的需求。

[http://blog.bobcravens.com/2010/06/a-google-maps-version-3-jquery-plugin/](http://blog.bobcravens.com/2010/06/a-google-maps-version-3-jquery-plugin/)

# javascript - Chrome 扩展 cookies.getAll 不起作用

> ID：11912345
> 
> 赞同：1
> 
> 时间：2012-08-11T05:57:00.420
> 
> 标签：javascript, google-chrome, cookies, google-chrome-extension

我为快速 cookie 管理做了一个扩展。在清单 v.2 更改后，我遇到了一些奇怪的错误。这是我的代码的一部分

```
console.log('start');
...
var initer = function(i){
    console.log('get cookies');
    chrome.cookies.getAll({domain:nets[tinuse]['cookies'][i]}, function (f){
        console.log(f);
        ....
    });
}
console.log('get cookies');
chrome.cookies.getAll({domain:nets[tinuse]['cookies'][0]}, function (f){
    console.log(f);
    ....
    initer(i);
}); 
```

在控制台中我得到：

```
start
get cookies

get cookies 
```

对于第二个电话，我什至没有收到空的控制台日志消息。如果我从控制台手动进行相同的调用以弹出窗口，则一切正常。

```
chrome.cookies.getAll({domain:nets[tinuse]['cookies'][0]}, function (f){
    console.log(f);});
undefined
[Object, Object, Object, Object, Object, Object, Object, ...] 
```

所有权限都可以。这些方法是从点击事件监听器中调用的，除了获取 cookie 之外，一切都正常。而且我无法完成进程，因为第二个回调（在**initer**主体中根本没有被触发）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:17:48.100

您需要获得使用 cookie API 的权限。在您的扩展清单中请求许可。参考[这个](http://developer.chrome.com/extensions/cookies.html)

# jquery - 如何在不影响正文的情况下从大于屏幕宽度的动画图像中隐藏滚动条？

> ID：11912351
> 
> 赞同：0
> 
> 时间：2012-08-11T05:58:15.223
> 
> 标签：jquery

因此，例如，如果我有一个宽度为 2000 像素的图像，它大于屏幕宽度，则从左到右进行动画处理。[这里。](http://jsfiddle.net/x2YGX/)我如何对其进行编码，以便在动画时不会出现滚动条？它也不会影响我的身体，例如当我恢复窗口时，滚动条只会出现在我的身体上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:05:48.370

您必须将元素包装在基本上“吃掉”多余宽度的包装器中：

**JavaScript**：

```
$('#a').wrap($('<div />', {'class': 'wrapper'})); 
```

**CSS**：

```
.wrapper {
    position: relative;
    overflow: hidden;

    height: 200px;  /* .wrapper collapses if there is no height
                       and your elements are absolutely positioned */
}​ 
```

**演示：http: [//jsfiddle.net/x2YGX/3/](http://jsfiddle.net/x2YGX/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:06:32.610

使用 CSS`overflow`

```
.animation
{
/*other properties*/
overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:08:15.480

只是改成`position`也会`fixed`做

```
#a {
    width: 2000px;
    position: fixed;
 } 
```

[演示](http://jsfiddle.net/x2YGX/4/)

# php - wordpress博客中的mixpanel分析不起作用

> ID：11912352
> 
> 赞同：1
> 
> 时间：2012-08-11T05:58:32.723
> 
> 标签：php, javascript, analytics, mixpanel

我正在尝试在我的 Wordpress 博客中使用**mixpanel**进行分析（仅用于学习）。

我的博客全是 php。

我从 mixpanel 的网站获取代码并将其放入我的`header.php`文件中。

```
<!-- start Mixpanel --><script type="text/javascript">(function(c,a){window.mixpanel=a;var b,d,h,e;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"===c.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.0.min.js';d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d);a._i=[];a.init=function(b,c,f){function d(a,b){var c=b.split(".");2==c.length&&(a=a[c[0]],b=c[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}var g=a;"undefined"!==
typeof f?g=a[f]=[]:f="mixpanel";g.people=g.people||[];h="disable track track_pageview track_links track_forms register register_once unregister identify name_tag set_config people.set people.increment".split(" ");for(e=0;e<h.length;e++)d(g,h[e]);a._i.push([b,c,f])};a.__SV=1.1})(document,window.mixpanel||[]);
mixpanel.init("MYKEY");</script><!-- end Mixpanel --> 
```

这`MYKEY`是我真正的钥匙。

现在，我想查看我的每篇博文的页面浏览量。我将以下代码放入`page.php`，每次查看帖子时都会调用它（afaik）。

```
 <script type="php">
      mixpanel.track("Viewed Post")
    </script> 
```

但我没有得到任何数据。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:17:07.273

我在我的博客上使用 Mixpanel（沿着谷歌分析）。一些建议

*   确保您已将 mixpanel 代码放在 head 结束语句之前`</head>`。在许多主题中，您会在下面找到很多代码`</head>`，例如`<body class="<?php hybrid_body_class(); ?>">`在基于混合的主题的情况下
*   我不确定你为什么使用`<script type="php">`通常是`<script type="text/javascript">`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T15:07:54.873

在我所有的 wordpress 网站中，我想删除这个 mixpanel，有人可以告诉我该怎么做吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:21:30.750

MixPanel 不适用于 Wordpress 博客。我会使用谷歌分析。

# wpf - 如何确定 MVVM 中的 DataGrid 行是否已更改？

> ID：11912354
> 
> 赞同：0
> 
> 时间：2012-08-11T05:58:38.563
> 
> 标签：wpf, mvvm, binding, wpfdatagrid

我想将 WpfDatagrid 行绑定到 ViewModel 中的布尔属性，这表明行是否已更改。事实上，我有一个绑定到模型中的类的数据网格，并且在 ViewModel 中有一个属性 IsRowChanged，并且不要不知道如何将数据网格绑定到 IsRowChanged ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:57:11.553

```
 <DataGrid ItemsSource="{Binding Produts}" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridTemplateColumn IsReadOnly="True" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding IsRowChanged}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

如果您使用实体框架，您可以使用此行直接扩展您的实体部分类

```
public bool IsRowChanged { get { return myEntity.EntityState == EntityState.Modified; } } 
```

# php - 根据父模型查找具有条件的查询

> ID：11912358
> 
> 赞同：0
> 
> 时间：2012-08-11T05:59:37.653
> 
> 标签：php, mysql, cakephp, associations

对于这个问题，这是关联树（所有`->`手段`hasMany`），所有数据库结构代码都遵守 CakePHP 约定。

```
Forum -> Section (forum_id) -> Topic (section_id) -> Reply (topic_id) 
```

我想在`$this->Reply->find`某些条件下运行查询，并且我希望返回的`$data["Reply"]`数组只返回它们所属的回复`forum_id=X`。

例如，我在`$this->Reply->find`某些条件下运行 a （这些无关紧要），它返回两个不同父级的结果，当你向上向上直到到达`Forum.id`(or `Section.forum_id`) 时，它们在`forum_id`.

我想要的是过滤结果，使它们属于某个`forum_id`. 由于`forum_id`不是`Reply`模型本身的字段，而是在`Section`（这是两个“层”上），我不能使用`conditions`条目来过滤结果。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:22:53.827

就这么简单：

```
<?php
$this->Reply->find('all', array(
    'joins' => array(
        Reply::joinLeft('Topic'),
        Topic::joinLeft('Section'),
        Section::joinLeft('Forum'),
    ),
    'conditions' => array('Forum.id' => $forumId),
)); 
```

[https://github.com/tigrang/EasyJoin](https://github.com/tigrang/EasyJoin) - 这将确定模型之间的关系并为您创建连接数组。

如果您不想使用该插件，则必须手动指定连接数组或重新绑定模型才能使用 Containable，因为它当前会创建多个查询而不是连接。

# javascript - 持久的 html 输入占位符

> ID：11912362
> 
> 赞同：2
> 
> 时间：2012-08-11T05:59:54.397
> 
> 标签：javascript, css

有点奇怪......我想要的是我的输入占位符文本执行以下操作：

```
::-webkit-input-placeholder {
    text-align:right;
    opacity:.3;
} 
```

当用户输入文本而不是完全消失时。如果没有巨大的 javascript hack，这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:00:41.373

如果您不打算对很多输入框执行此操作，则使用背景图像（带有占位符文本）会有所帮助

```
 input {
    background:white url(bgtextimage.png) no-repeat; /* image with your placeholder text*/
    }
    input:focus {
    background:white url(bgtextimage_3.png) no-repeat; /* placeholder text image with an opacity if 0.3 */
background-position: right 0px; /* if you want to align text to right */
    } 
```

现在您需要在元素失焦时阻止背景图像向左移动。我为此目的使用 jQuery

```
$('.myinputfield').blur(function()
{
    if( $(this).val().length === 0 ) {
        $(this).css('background','left 0px'); //keep it to left if the element is empty
    }
    else {
        $(this).css('background-position','right 0px'); //move to right if there's some text
    }
});​ 
```

示例 - [http://jsfiddle.net/QuHen/1/](http://jsfiddle.net/QuHen/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T21:11:56.227

So, it looks like there is no way to get this behavior purely through CSS.

I've come up with a quick jQuery plugin that will do it for me. Here's the code: [http://jsfiddle.net/puTM3/](http://jsfiddle.net/puTM3/)

A quick:

```
$("input[placeholder]").placeholder(); 
```

once the dom is loaded should take care of 90% of your use cases.

What sucks is if you edit the dom dynamically, any new/modified inputs need to be re`.placeholder()`ed.

Anyone have any better ideas?

# objective-c - 拍照时进行模式识别并识别模式并相应地对图像进行操作

> ID：11912367
> 
> 赞同：2
> 
> 时间：2012-08-11T06:01:18.127
> 
> 标签：objective-c, ios5, image-processing, design-patterns, image-recognition

> **可能重复：**
> [识别图像 ios 中的一些模式](https://stackoverflow.com/questions/11913911/recognize-some-patterns-in-image-ios)

我的问题是我正在创建一个要扫描页面的应用程序。页面是纯白色的，纸的四个角上都有黑色图案。我想识别纸上的黑色图案，并且图像应该像所有超出该图案的东西一样进行调整。请就如何实现这种方法提供一些建议。我在网上阅读并找到了opencv，但我对此一无所知。

下面是定义模式的图像：- ![在此处输入图像描述](../Images/1f794669501891d50d7d28f76508e7d2.png)

图像由纯白色背景和角落中的四个黑色图案组成。我需要识别所有四个角落中的这些黑色图案，然后对图像进行处理。以椭圆形显示的一个角落以突出显示它。

提前致谢！

# wordpress - 列出未链接的 WordPress 术语

> ID：11912374
> 
> 赞同：0
> 
> 时间：2012-08-11T06:02:43.080
> 
> 标签：wordpress, taxonomy

在 WordPress 主题中，您如何列出与帖子相关联的所有术语以及某个分类的术语，并且仅显示属于固定术语的子项的术语。并设置自定义分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:02:43.080

把它放在你的functions.php中：

```
/*
 * Get Terms as a list
 */     
    function get_term_list_not_linked($postID, $tax, $parentTermID, $sep) {
        $terms = get_the_terms( $postID, $taxonomy);

        if ( $terms && ! is_wp_error( $terms ) ) { 

            $termList = array();

            foreach ( $terms as $term ) {
                if($term->parent == $parentTermID) {
                    $term_list[] = $term->name;                
                }
            }

            $termList = join( $separator, $termList);

            return $termList;

        } else {
            return null;
        }   

    } 
```

然后在主题文件中，你可以这样称呼它：

```
<?php echo get_term_list_not_linked($postID, $taxonomy, $parentTermID, $separator); ?> 
```

这是一个获取“视频类型”分类中的所有术语的示例，它们是 ID 为 5 的术语的直接子项，并用逗号和空格分隔术语：

```
<?php echo get_term_list_not_linked($post->ID, 'video-type', 5, ', '); ?> 
```

# php - 需要帮助才能访问 MySQL 数据库

> ID：11912380
> 
> 赞同：-1
> 
> 时间：2012-08-11T06:04:45.433
> 
> 标签：php, mysql, html

我是 HTML5 的新手。我想使用 HTML5 构建一个可以在 Android 和 iPhone 中使用的网站。我花了几天的时间找到解决方案，但失败了。下面是我的场景：

1.  MySQL 数据库有一个表 ( `userinfo`) 存储用户信息，例如姓名、年龄、性别、职业、爱好、地址等。
2.  我有一个 HTML5 设计 ( `category.html`)，其中 3 个选项（age<5,age>5 和 age<20,age>20）作为带有锚标记的列表存在。
3.  如果我触摸`age<5`，它将显示所有年龄小于 5 英寸的姓名和性别的用户列表`list.html`。接下来，我将从该列表中触摸一个名称，它将显示该用户的详细信息`details.html`

查询很简单：`select name,sex from userinfo where age<5/age>20 etc.`

我正在使用 PHP 连接到数据库。当我使用按钮在表单中分配操作（`GET/POST`PHP 中的方法）时，这对我来说很容易，但在这里它不是按钮。它是一个带有锚链接的列表。我该怎么做？上述方案适用于 Android 和 iPhone。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:31:29.307

这就是我要做的：使按钮*显示*为链接，如下所示：

```
.link {
    background: none;
    border: none;
    text-decoration: underline;
    color: blue;
    cursor: pointer
} 
```

**[例子](http://jsfiddle.net/5cfjn/)**

然后您所要做的就是将类分配给`link`您希望显示为链接的所有按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:44:30.627

为了提交 POST 数据，必须将数据发送到服务器。单独的超链接无法做到这一点 - 但是使用一点 JS 魔法，您可以轻松完成此操作。

如果您使用 jQuery 之类的东西，您可以捕获点击事件——根据点击事件从链接中收集数据，并通过 $.post/$.ajax 提交给服务器。

HTML：

```
<a href="javascript:void(0);" class="age-less-then-five">age<5</a> 
```

Javascript：

```
$('a.classname').click(function(){
            var that = $(this), value = that.text().trim(); 
            //you can optionally store a value in the classname, or ID which is what I would do.. in this scenario.. I think XD

            $.post('yoururl.com/phpscript.php',{postName: value}, function(data){
                //load whatever data you want, or redirect to list.html now that you've gathered desired data
            }
        }); 
```

* * *

为了澄清上述答案， var that = $(this); 指被点击的链接。因此，您可以通过以下方式从锚中获取类名： that.attr('class') // 这将等于 age-less-then-5 或简单地按照上述方式进行操作，并使用 .text 获取锚标记之间的文本()。我们在这里修剪，这确实不是最好的方法......但它是一种方法。当我使用链接向服务器执行任何类型的发布时，如果 ID 包含唯一值或类名，我通常会使用它。

# java-me - ResourceEditor LWUIT NoClassDefFoundError: com/app/XMLMidlet: com/sun/lwuit/events/ActionListener

> ID：11912381
> 
> 赞同：1
> 
> 时间：2012-08-11T06:04:47.597
> 
> 标签：java-me, lwuit

我使用 ResourceEditor 开发了 Rss App LWUIT 项目。

我在 Netbeans IDE 中打开了该项目，我点击了开发人员诺基亚网站上的链接在*资源编辑器中生成 NetBeans 项目*-[将 GUI 资源文件手动添加到您的项目](https://projects.developer.nokia.com/LWUIT_for_Series_40/wiki/UsingTheResourceEditorToGenerateAproject#BAddingGUIresourcefilemanuallyintoyourproject)中。

在运行我的应用程序时，我面临未捕获的异常

```
 java/lang/NoClassDefFoundError: com/app/XMLMidlet: com/sun/lwuit/events/ActionListener 
```

我可以做任何额外的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:02:04.087

将 res 文件复制到您的包文件夹，然后，

```
Display.init(this);  
    try {
        Resources r = Resources.open("/resource.res");

        UIManager.getInstance().setThemeProps(r.getTheme(
            r.getThemeResourceNames()[0])
        );
    } catch (java.io.IOException e) {
    } 
```

# c# - How to remove sorting glyph in datagridview without removing Sorting facility

> ID：11912382
> 
> 赞同：3
> 
> 时间：2012-08-11T06:04:50.307
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn, columnsorting

How can i remove sorting glyph from column headers in DataGridView without removing its sorting functionality.

I am working on windows form application in C#, i want to generate report from a datagridview, where datagridview column width will assign in report column, where as the DataGridView column include the with of sorting glyph, that is unnecessary space in my case, i want to exclude it from ColumnHeader.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:17:22.347

This is actually quite easy to do using custom cell painting.

All you need to do is handle the `DataGridView` `CellPainting` event:

```
dataGridView1.CellPainting += new DataGridViewCellPaintingEventHandler(dataGridView1_CellPainting); 
```

And in the handler do something like this:

```
void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    if (e.RowIndex == -1)
    {
        e.Paint(e.CellBounds, DataGridViewPaintParts.All &~DataGridViewPaintParts.ContentBackground);

        e.Handled = true;
    }
} 
```

The code above is very simple - just check if the current cell is in a header row (has a -1 index) then paint everything except the `ContentBackground`.

I've only checked this on my Windows 7 machine and it looks fine, it appears that the content background is only used for the sort glyph - you will want to test it on the target environment to make sure you don't need to do any more involved custom painting to keep the ContentBackground without the glyph.

* * *

The width of the header cell will still include the space for the glyph. I would generally accept that since changing this becomes a bit messy, but if you must have the width fit the text then something like the following will work.

First set the width in the `DataBindingComplete` event of the `DataGridView`:

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{        
    if (dataGridView1.AutoSizeColumnsMode == DataGridViewAutoSizeColumnsMode.AllCells)
    {
        // Loop over all the columns
        foreach (DataGridViewColumn c in dataGridView1.Columns)
        {
            // Work out the size of the header text
            Size s = TextRenderer.MeasureText(c.HeaderText, dataGridView1.Font);

            // Change the autosize mode to allow us to see if the header cell has the 
            // longest text
            c.AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCellsExceptHeader;
            if (s.Width + 10 > c.Width)
            {
                // If the header cell is longest we set the column width
                c.AutoSizeMode = DataGridViewAutoSizeColumnMode.None;
                c.Width = s.Width + 10;
            }
            else
            {
                // If the header cell is not longest, reset the autosize mode
                c.AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
            }
        }
    }
} 
```

Once you have done that you then need to still allow the column to autosize when the cell text is longer than the header.

For that I used the `CellValueChanged` event:

```
void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    DataGridViewColumn c = dataGridView1.Columns[e.ColumnIndex];

    if (c.AutoSizeMode == DataGridViewAutoSizeColumnMode.None)
    {
        Size s = TextRenderer.MeasureText(dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString(), dataGridView1.Font);
        if (s.Width > c.Width)
        {
            c.AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCellsExceptHeader;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:11:16.087

You can't do it in WinForms, unless you write a custom data grid view to cater for your need, which I'd say an overkill for your requirement.

**UPDATE**

I've created custom progress bars to buttons, to canvas controls, but didn't do a custom data grid view. That said, here's my idea of doing this...

You essentially create a new `UserControl`, and add a normal DataGridView to it, and remove the headers. Now add panel above the DataGridControl that 'acts' at the column headers. You'll have to handle all the events like, clicking the headers to sort, resizing them to resize the columns and call methods on the DataGridView to do the same.

If you want the effect of hiding column headers when the user scrolls down, you'll have to do it manually as well.

Sorry, I can't give you a solid starting point than this. If you're new to creating custom controls, try creating a custom button, (ex: that has an image on the left) or a progress bar, that also display the progress percentage in the middle of it. You'll get a feeling about what you can do.

If you're using WPF, I think things like this can be easily accomplished.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:50:15.380

I hit the same problem when trying to get right aligned header text to line up with the cell content (looks silly in a row of numbers that the header text is not also fully right aligned.) I noticed in other dgv's that it was possible to squeeze out the glyph.

Anyway real simple solution, fill out the header text with leading spaces, and set the header cell wrap mode to false. example:

```
 dgv.Columns["Width"].HeaderText = "        Width";
    dgv["Width"].HeaderCell.Style.WrapMode = DataGridViewTriState.False; 
```

might take a bit of playing around to get the number of leading spaces correct, but the result is pleasing. (Dunno if it works with trailing spaces, too late at night to try.)

# javascript - 如何遍历 JSON 对象以适合 JavaScript 数组？

> ID：11912383
> 
> 赞同：0
> 
> 时间：2012-08-11T06:05:05.713
> 
> 标签：javascript, json, google-maps

我正在尝试以适合 GoMap 声明的方式转换带有谷歌地图标记（由 CMS 中的数据生成）的 JSON 对象。我正在尝试从我的 CMS 中获取多个标记以将它们放置在地图上。

我将尝试在下面详细解释它：

我遍历标记并创建一个编码为 json 的数组：

```
echo "<script>var googlePlaces = " . json_encode($googlePlaces) . ";</script>"; 
```

然后我得到以下对象：

```
[Object { title="Est. Avenida de Mayo",  lat="-34.60844234174374",  lon="-58.37414860725403"}, Object { title="Café Tortoni",  lat="-34.60871608361115",  lon="-58.378823697566986"}] 
```

我需要的只是把它放在这里：

```
$(document).ready(function() {

    $("#map").goMap({ 
        latitude: config.location_lat, 
        longitude: config.location_lon, 
        zoom: 15,
        mapTypeControl: false, 
        maptype: 'ROADMAP',
        navigationControl: true, 
        navigationControlOptions: { 
            position: 'TOP_LEFT', 
            style: 'SMALL' 
        },
       markers: [{  
                    // Multiple markers here!
            latitude: XXXXXX, 
            longitude: XXXXXXX, 
            html: { 
                content: 'XXXXXXX'
            },
        }]
    });     
} 
}); // end 
```

我有点卡在这里，我知道我需要以某种方式循环遍历 JSON 对象并将其放置在 GoMap 脚本中的标记属性中。这个对吗？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:28:22.973

尝试这样的事情来迭代您的 JSON 对象元素并将其推送到数组中。

```
 var markersArray = new Array();

 $.each(googlePlaces, function(i, itemPlace) {
     var obj = { 
                 latitude: itemPlace.lat, 
                 longitude: itemPlace.lon,
                 html: { content: itemPlace.title }
               };        

     markesArray.push(obj);

 });​ 
```

之后在**gomap**代码中使用**markersArray**这样

```
$("#map").goMap({ 
   // your existing stuff
   markers: markersArray 
}); 
```

祝你好运 ！！

# c++ - endl 是一种方法，如果是，它可以带参数吗？

> ID：11912386
> 
> 赞同：3
> 
> 时间：2012-08-11T06:05:24.220
> 
> 标签：c++, methods

当我遇到一些奇怪的事情时，我正在使用我的 code::blocks v10.05 编译器。它在我正要加回车的时候，提示endl，然后自动放这个：

```
 cout << "The age of " + age + " isn't that bad. Embrace it" << endl(); 
```

endl 方法可以带参数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T06:10:13.620

[`endl`](http://www.cplusplus.com/reference/iostream/manipulators/endl/)是一个操纵器函数：

```
ostream& endl ( ostream& os ); 
```

您可以将其连接到流：

```
cout << endl; 
```

或者将流作为参数传递给函数：

```
endl(cout); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T06:10:35.157

我不知道，但显然我们可以将输出流传递给它，这是我在网上找到的:)

[http://www.cplusplus.com/reference/iostream/manipulators/endl/](http://www.cplusplus.com/reference/iostream/manipulators/endl/)

# methods - 当方法之间只有三个字符不同时，我怎么能用查询重构这个“几乎”重复的代码？

> ID：11912387
> 
> 赞同：1
> 
> 时间：2012-08-11T06:05:27.660
> 
> 标签：methods, refactoring, duplicates

我认为枚举可能是要走的路，并且根据操作（创建、删除）它会替换字符？然后我必须为“--”、“++”、“>=”和“>”hrrmm 存储一个变量。任何简单的建议都会很棒，我可以将其用作将来如何解决此类问题的参考！

```
public void ArrangeCategoriesOrderOnCreate(Category category)
{
    var tx = _session.BeginTransaction();
    var categories = _session.QueryOver<Category>()
        .Where(c => c.Parent.Id == category.Parent.Id && c.OrderInList >= category.OrderInList) // the >= category.OrderInList here
        .List<Category>();

    foreach(var item in categories)
    {
        item.OrderInList++; // The ++ here.
        _session.SaveOrUpdate(item);
    }
    tx.Commit();
}

public void ArrangeCategoriesOrderOnDelete(Category category)
{
    var tx = _session.BeginTransaction();
    var categories = _session.QueryOver<Category>()
        .Where(c => c.Parent.Id == category.Parent.Id && c.OrderInList > category.OrderInList) // the > category.OrderInList here
        .List<Category>();

    foreach(var item in categories)
    {
        item.OrderInList--; // the -- here.
        _session.SaveOrUpdate(item);
    }
    tx.Commit();
} 
```

**编辑 1**

> 无法从 Invoke 确定成员类型，Invoke(value(CumbriaMD.Infrastructure.DataServices.CategoryDataServices+<> *c_DisplayClass8).orderComparer, c.OrderInList, value(CumbriaMD.Infrastructure.DataServices.CategoryDataServices+<>c* _DisplayClass8).category.OrderInList) , System.Linq.Expressions.InvocationExpression

**痕迹：**

> [异常：无法从 Invoke 确定成员类型，Invoke(value(CumbriaMD.Infrastructure.DataServices.CategoryDataServices+<>c_ *DisplayClass8).orderComparer, c.OrderInList, value(CumbriaMD.Infrastructure.DataServices.CategoryDataServices+<>c*_DisplayClass8).category.OrderInList), System.Linq.Expressions.InvocationExpression] NHibernate.Impl.ExpressionProcessor.ProcessBooleanExpression(表达式表达式) +1113 NHibernate.Impl.ExpressionProcessor.ProcessExpression(表达式表达式) +114 NHibernate.Impl.ExpressionProcessor.ProcessAndExpression( BinaryExpression 表达式）+85 NHibernate.Impl.ExpressionProcessor.ProcessBinaryExpression（BinaryExpression 表达式）+124 NHibernate.Impl.ExpressionProcessor.ProcessExpression（表达式表达式）+95 NHibernate.Impl.ExpressionProcessor.ProcessLambdaExpression（LambdaExpression 表达式）+52 NHibernate.Impl.ExpressionProcessor。 ProcessExpression（表达式`1 expression) +39 NHibernate.Criterion.QueryOver`2.Add （表达式 2.Where（`1 expression) +107 NHibernate.Criterion.QueryOver`表达式`1 expression) +42 NHibernate.Criterion.QueryOver`2.NHibernate.IQueryOver.Where（表达式`1 表达式）+42

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:23:56.960

一种简单的开始方法是使用 a`Func`来区分常用功能并消除大部分重复。

```
public void ArrangeCategoriesOrderOnCreate(Category category)
{
    ArrangeCategoriesOrderOnAction(category, (a,b) => a>=b, x => x + 1);
}

public void ArrangeCategoriesOrderOnDelete(Category category)
{
    ArrangeCategoriesOrderOnAction(category, (a,b) => a>b, x => x - 1);
}

public void ArrangeCategoriesOrderOnAction(Category category, 
                               Expression<Func<int, int, bool>> orderComparer,
                               Func<int, int> orderUpdateCalculator)
{
    var tx = _session.BeginTransaction();
    var categories = _session.QueryOver<Category>()
        .Where(c => c.Parent.Id == category.Parent.Id 
               && orderComparer(c.OrderInList, category.OrderInList))
        .List<Category>();

    foreach (var item in categories)
    {
        item.OrderInList = orderUpdateCalculator(item.OrderInList);
        _session.SaveOrUpdate(item);
    }
    tx.Commit();
} 
```

# jquery - 如何在我的表格的 x 轴上应用水平滚动条？

> ID：11912388
> 
> 赞同：0
> 
> 时间：2012-08-11T06:05:40.860
> 
> 标签：jquery, html, css

我注意到有一些不同的方法可以做到这一点，以及与 IE8 浏览器的一些差异。我有一个`<table>`包含表格的表格。表格的宽度可能为 500 像素或 1500 像素，具体取决于列。

我怎样才能做到这一点，当表格宽度大于 div 外部容器时，滚动条会出现在底部。我还需要将此表包含在 DIV 中以使其工作吗？

```
<table id="dataTable">
 xxx
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:10:47.603

您可以尝试[`overflow-x`](https://developer.mozilla.org/en-US/docs/CSS/overflow-x)属性：

```
<div id='wrapper'>
   <table id="dataTable">
     ...
   </table>
</div> 
```

```
#wrapper {
    overflow-x: scroll;
    width: 800px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:19:13.710

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/TjH2B/)**

```
<div id="div1" class="div-scroll">
<table style="width:300px">
    <tr>
        <td > col1 </td>
        <td > col2</td>
        <td > col3</td>
    </tr>    
</table>    
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:12:53.683

CSS：

```
table {
    width: 200px;
}
div {
    width: 100px;
    overflow-x: scroll;
} 
```

html:

```
<div>
    <table id="test">
    <tr>
        <td>Hello</td>
        <td>Hello2</td>
    </tr>
    </table>
</div>​ 
```

jsfiddle：http: [//jsfiddle.net/pXx7K/1/](http://jsfiddle.net/pXx7K/1/)

​</p>

# android - 获取当前Android视图并强制重绘

> ID：11912390
> 
> 赞同：2
> 
> 时间：2012-08-11T06:05:52.763
> 
> 标签：android, android-layout, invalidation

当显示已更新的数据并强制重绘时，如何获取当前的 Android 视图？我完成了 Android 的[记事本教程](http://developer.android.com/training/notepad/index.html)并完成了第三课，没有任何问题——毕竟提供了解决方案——但我被困在我的第一个不平凡的修改上。

**我在“添加注释**”按钮旁边的菜单中添加了一个新按钮。当按下该按钮时，该按钮会在系统中每个笔记的标题中添加一个字母。但是，无论我等待多长时间，新标题都不会出现在笔记列表中。我知道更新程序有效，因为如果我关闭应用程序并将其重新启动，更改*确实会出现。*

到目前为止，我发现我必须使用某种失效方法来使程序用新值重绘自身。我知道这`invalidate()`是从 UI 线程`postInvalidate()`使用的，并且是从非 UI 线程^(1, 2)使用的，但我什至不知道我在哪个线程中。此外，这两种方法都必须从`View`需要的对象中调用绘图，我不知道如何获得该对象。我尝试的一切都会返回`null`。

我的主要课程：

```
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch(item.getItemId()) {
        case INSERT_ID:
            createNote();
            return true;
        case NEW_BUTTON:
            expandTitles();
            return true;
        default:
            // Intentionally empty
    }
    return super.onMenuItemSelected(featureId, item);
}

private void expandTitles() {
    View noteListView = null;

    // noteListView = findViewById(R.layout.notes_list); // null

    // noteListView =
    //   getWindow().getDecorView().findViewById(android.R.id.content);
    // From SO question 4486034

    noteListView = findViewById(R.id.body); // Fails

    mDbHelper.expandNoteTitles(noteListView);
} 
```

我的 DAO 课程：

```
public void expandNoteTitles(View noteListView) {
    Cursor notes = fetchAllNotes();
    for(int i = 1; i <= notes.getCount(); i++) {
        expandNoteTitle(i);
    }

    // NPE here when attempt to redraw is not commented out
    noteListView.invalidate(); // Analogous to AWT's repaint(). Not working.
    // noteListView.postInvalidate(); // Like repaint(). Not working.
}

public void expandNoteTitle(int i) {
    Cursor note = fetchNote(i);
    long rowId =
      note.getLong(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_ROWID));
    String title =
      note.getString(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_TITLE)) + "W";
    String body =
      note.getString(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_BODY));
    updateNote(rowId, title, body);
} 
```

按下按钮后，我该怎么做才能显示更新的笔记标题？

*显然，我是 Android 的新手。我指出这一点是为了鼓励您使用小词并解释甚至是显而易见的事情。我知道这是第 10 万个“Android 不重绘”问题，但我已经阅读了数十篇现有帖子，它们要么不适用，要么对我没有意义。*

^(1：[postInvalidate() 是做什么的？](https://stackoverflow.com/questions/5521596/what-does-postinvalidate-do))
^(2：[Android的invalidate()和postInvalidate()方法有什么区别？](https://stackoverflow.com/questions/7596370/query-on-invalidate-and-postinvalidate-in-android))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:12:41.377

根据教程，现有笔记列表显示在 ListView 中。这是一个基于适配器的视图，因此它显示的项目来自扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)类的适配器。[在这些情况下，您应该通过调用其notifyDatasetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)方法来通知适配器内容已更改。这将通知 ListView 更新和重绘其行。

**编辑：**

抱歉，我现在意识到这个例子使用了 CursorAdapters。这些从从数据库查询获得的 Cursor 对象中获取要显示的项目。现在，notifyDatasetChanged() 告诉适配器的是，支持适配器的数据已更改，因此基于此适配器显示内容的视图需要重绘其内容。对于 CursorAdapter，此数据来自游标。因此，您还需要重新查询该游标，从数据库中刷新它，如下所示：

```
private void expandTitles() {
        mDbHelper.expandNoteTitles();

        CursorAdapter adapter = (CursorAdapter)getListAdapter();
        adapter.getCursor().requery();
    } 
```

在这种情况下，requery() 方法会自动调用 notifyDatasetChanged()，因此您无需担心，列表会自行更新。另请参阅此线程：[https](https://groups.google.com/forum/?fromgroups#!topic/android-developers/_FrDcy0KC-w%5B1-25%5D) ://groups.google.com/forum/?fromgroups#!topic/android-developers/_FrDcy0KC-w%5B1-25%5D 。

# iphone - 奇怪的行为：消息发送到解除分配的实例

> ID：11912394
> 
> 赞同：0
> 
> 时间：2012-08-11T06:06:56.733
> 
> 标签：iphone, objective-c, ios

在我看来，我有一个按钮，它与此方法挂钩：

```
-(IBAction)showStore:(id)sender
{
    storeSinglePlayer *ssp = [[storeSinglePlayer alloc] init];
    ssp.imageH = self.imageURLH;
    ssp.imageV = self.imageURLV;
    CATransition* transition = [CATransition animation];
    transition.duration = 0.5;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush; 
    transition.subtype = kCATransitionFromTop;
    [self.navigationController.view.layer addAnimation:transition forKey:nil];
    [self.navigationController pushViewController:ssp animated:NO];
 } 
```

当我单击此按钮时，它会显示“存储单人游戏”视图控制器。此外，“存储单人游戏”视图控制器有一个后退按钮，该按钮与以下方法挂钩：

```
-(IBAction)didPressBack:(id)sender
{
    CATransition* transition = [CATransition animation];
    transition.duration = 0.5;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush; 
    transition.subtype = kCATransitionFromBottom;
    [self.navigationController.view.layer addAnimation:transition forKey:nil];
    [self.navigationController popViewControllerAnimated:NO];

} 
```

单击后退按钮也会让我回到以前的视图。

但现在这是一个奇怪的问题。如果我重复这 10 次，即单击按钮显示“storeSinglePlayer”，然后单击“storeSinglePlayer”上的后退按钮，我会收到错误消息：

```
[storeSinglePlayer respondsToSelector:]: message sent to deallocated instance 0xe5f6160 
```

而且，这不仅在我的多次尝试中，而且只是随机崩溃。它会工作一段时间，有时不会。

**我启用了 ARC。**

仅仅这个简单的代码就无法理解有什么问题。阅读了很多关于堆栈溢出的问题，但没有一个能解决我的问题。

编辑：堆栈跟踪

```
2012-08-11 11:55:56.353 Magic Buzz[2088:707] (
    0   Magic Buzz                          0x000c7e19 -[gameOverScreen showStore:] + 700
    1   CoreFoundation                      0x3769c3fd -[NSObject performSelector:withObject:withObject:] + 52
    2   UIKit                               0x30891e07 -[UIApplication sendAction:to:from:forEvent:] + 62
    3   UIKit                               0x30891dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
    4   UIKit                               0x30891da1 -[UIControl sendAction:to:forEvent:] + 44
    5   UIKit                               0x30891b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
    6   UIKit                               0x30892449 -[UIControl touchesEnded:withEvent:] + 476
    7   UIKit                               0x3089092b -[UIWindow _sendTouchesForEvent:] + 318
    8   UIKit                               0x30890319 -[UIWindow sendEvent:] + 380
    9   UIKit                               0x30876695 -[UIApplication sendEvent:] + 356
    10  UIKit                               0x30875f3b _UIApplicationHandleEvent + 5826
    11  GraphicsServices                    0x3789222b PurpleEventCallback + 882
    12  CoreFoundation                      0x37716523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
    13  CoreFoundation                      0x377164c5 __CFRunLoopDoSource1 + 140
    14  CoreFoundation                      0x37715313 __CFRunLoopRun + 1370
    15  CoreFoundation                      0x376984a5 CFRunLoopRunSpecific + 300
    16  CoreFoundation                      0x3769836d CFRunLoopRunInMode + 104
    17  GraphicsServices                    0x37891439 GSEventRunModal + 136
    18  UIKit                               0x308a4cd5 UIApplicationMain + 1080
    19  Magic Buzz                          0x000b094d main + 96
    20  Magic Buzz                          0x000b08e8 start + 40
)
2012-08-11 11:55:56.554 Magic Buzz[2088:707] *** -[storeSinglePlayer respondsToSelector:]: message sent to deallocated instance 0xf6cde30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:25:14.910

一些异步方法在释放后调用 storeSinglePlayer 对象，尝试在 ViewDidUnload/ViewWillDisappear 中将所有委托删除为 nil。如果您将一些查询发送到服务器并且没有等待它您按下后退按钮那么它也会崩溃，因为在完成请求后它将调用 storeSinglePlayer 对象。希望这可以帮助

# objective-c - 更改 UIDocumentInteractionController 图标

> ID：11912401
> 
> 赞同：0
> 
> 时间：2012-08-11T06:08:11.637
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我想知道如何更改表格视图中显示的图标。

我查看了 apple.com 上的文档，`UIDocumentInteractionController`但**没有**成功编辑我的 plist。如果有人知道如何做到这一点，请提供帮助。

谢谢 ![UITableView 图标](../Images/df8e8806bd639b38983793aab3b4a93e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:21:41.357

[注册您的应用程序支持的文件类型](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html)描述了如何在应用程序中注册自定义文件类型及其图标。

因此，如果您在 plist 的*LSItemContentTypes*数组中使用“com.example.myformat”作为 UTI 类型，并将`UTI`文档交互控制器的属性设置为相同的字符串“com.example.myformat”，那么应该使用您的图标。

# c++ - 将infile读取到xcode

> ID：11912404
> 
> 赞同：1
> 
> 时间：2012-08-11T06:08:29.923
> 
> 标签：c++, xcode

如何从我调用数据的文件中读取值 x

我把文件放在程序文件中，但一直给我

文件未找到..

```
#include <iostream>
#include <cstdlib>
#include <fstream>
#include <string>

using namespace std;

double const NUMB=10;

int main ()
{
double x;

  ifstream infile;
  infile.open("data");

  if (!infile.is_open()){
    cout<<"NOT OPEN"<<endl;
    system ("PAUSE");
    exit (1);
  }

  infile >>x;

  while (infile>0){
    cout<<x<<endl;
  infile>>x;
  }

  infile.close();
  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:54:35.587

在 Xcode 中，名为“data”的文件必须放在构建产品目录中。也就是说，它需要在构建后由 Xcode 放置可执行文件的相同位置。默认情况下，这不是源代码所在的目录。对于像这样的命令行应用程序来说，处理这个问题的最简单方法就是在项目中包含文件“数据”，然后告诉 Xcode 在构建时将文件复制到构建产品目录。您可以通过单击项目然后单击您正在构建的目标来执行此操作。在目标设置的顶部，转到“构建阶段”。最后一个阶段应该是“复制文件”。单击“复制文件”中的“+”并选择您的“数据”文件，只要您将其添加到项目中就会列出。

# android - View.onDraw() --- 它什么时候被调用？

> ID：11912406
> 
> 赞同：35
> 
> 时间：2012-08-11T06:08:47.117
> 
> 标签：android, graphics, ondraw

我将 Log.d() 调用放入扩展视图的 onDraw() 中，这样我就可以看到它被调用的频率和时间。它在视图的实例化时被调用，这并不奇怪。但后来我注意到，它会在 onTouchEvent() 处理的每个点击上被调用，即使我的代码没有做任何与图形远程相关的事情。但是，在 Views 的[文档](http://developer.android.com/reference/android/view/View.html)中，我似乎找不到任何关于何时实际调用 onDraw() 的信息。我并不真正关心我在这里的特定项目（这对我来说不会造成问题），我只想知道某处是否有一个列表或显示视图操作顺序的东西，特别是什么原因onDraw() 被调用。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-11T06:23:20.073

AFAIK，视图的 onDraw() 在以下情况下被调用：

1.  最初绘制视图
2.  每当在视图上调用[invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)

您或系统可以在需要时调用 Invalidate。例如，许多 View 会改变它们在 Touch 上的外观，例如 EditText 获得轮廓和光标，或者按钮处于按下状态。因此，视图会在触摸时重绘。

我同意拥有一份详细说明 Views 工作的文档会很好，如果存在并且有人知道在哪里可以找到它，请告诉我们。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-12-19T04:14:31.263

`onDraw()`被调用时`invalidate()`被调用。

**但是你应该知道 ViewGroups:`onDraw()`不会**像你期望的那样被调用。而是，`onDispatchDraw()`。

但是，在 ViewGroup 中，您可以`setWillNotDraw(false)`在构造函数中调用 make `onDraw()`to be called on `invalidate()`。

看看[这个答案](https://stackoverflow.com/a/13056400/1642079)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-11T06:43:17.437

> *   如果您为 View 设置了背景可绘制对象，则 View 将在回调其 onDraw() 方法之前为您绘制它。
>     
>     
> *   onAttachedToWindow () 在视图附加到窗口时调用。此时它有一个 Surface 并将开始绘制。请注意，保证在 onDraw(android.graphics.Canvas) 之前调用此函数，但是它可以在第一个 onDraw 之前的任何时间调用——包括在 onMeasure(int, int) 之前或之后。
>     
>     
> *   invalidate() 将dirty定义的区域标记为需要绘制。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-18T07:10:52.867

要记住的一件重要事情是，尽量减少不带参数的 invalidate() 函数的调用。而是尝试使用四个参数最大化 invalidate() 函数。因为绘制整个视图非常昂贵。第二个变体仅刷新视图的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-01T08:02:25.177

除上述内容外：软键盘在调整窗口大小以合理地适应“键盘”后会导致**View.invalidate()-->View.onDraw()序列。**自定义**View.onDraw()**必须让自己处于预期这种可能性的状态。
这样的现象解释了为什么您在带有蓝牙键盘的平板电脑上开发和测试的应用程序一旦到达现实世界就会被狗追捕（-：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-06T09:36:37.600

何时调用 onDraw（查看[此](http://cogitolearning.co.uk/2015/02/android-custom-views-the-ondraw-method-2/#:%7E:text=The%20onDraw%20method%20is%20called%20whenever%20android%20thinks%20that%20your,re%2Dpositioned%20on%20the%20screen.)以获取更多详细信息）

> 每当 android 认为您的视图应该重绘时，就会调用 onDraw 方法。这可能是您的视图动画时的情况，在这种情况下，动画中的每一帧都会调用 onDraw。当布局更改并且您的视图在屏幕上重新定位时也会调用它。
> 
> 但是，如果您的视图中的某些数据发生了更改，并且您想确保重新绘制视图，该怎么办。你不能直接调用 onDraw 。相反，您应该调用 invalidate 来告诉视图它需要重绘自身。

# sql-server-2008 - SQL Server 行号和数据表

> ID：11912410
> 
> 赞同：1
> 
> 时间：2012-08-11T06:09:37.787
> 
> 标签：sql-server-2008

我在 PHP 环境中使用 SQL Server 和 Datatables；我研究了一下，发现通过使用 row_number 我可以实现分页结果，但我得到：

> 无法绑定多部分标识符“Flags.FlagValue”。

```
SELECT dbo.PlayingCharacters.PlayerName,dbo.PlayingCharacters.CurrentLevel,dbo.PlayingCharacters.XP,(SELECT CASE WHEN dbo.PlayingCharacters.Karma >= 1 THEN 2 WHEN dbo.PlayingCharacters.Karma <= -1 THEN 1 ELSE 0 END) as Karma,ISNULL(Flags.FlagValue,0) AS Remort FROM ( SELECT row_number() OVER (ORDER BY dbo.PlayingCharacters.XP desc) AS CI_offset_row_number, dbo.PlayingCharacters.PlayerName, dbo.PlayingCharacters.CurrentLevel, dbo.PlayingCharacters.XP, (SELECT CASE WHEN dbo.PlayingCharacters.Karma >= 1 THEN 2 WHEN dbo.PlayingCharacters.Karma <= -1 THEN 1 ELSE 0 END) as Karma, ISNULL(Flags.FlagValue, 0) AS Remort FROM dbo.PlayingCharacters LEFT JOIN dbo.Flags ON dbo.Flags.OwnerID = dbo.PlayingCharacters.UserID AND Flags.FlagID = 30419 WHERE dbo.PlayingCharacters.AccountName NOT IN (SELECT DISTINCT AccountName FROM UserFlags WHERE FlagBitPosition BETWEEN 0 AND 40) AND PlayingCharacters.AccountName NOT LIKE 'DeletedFrom:%' ) AS A WHERE A.CI_offset_row_number BETWEEN (141) AND (150) 
```

在检查查询和进一步研究后，我发现查询末尾附近的“AS A”可能是罪魁祸首。但我不确定。我在一定程度上熟悉 SQL，但这样看来我是一条出水的鱼。我似乎无法弄清楚如何修复这个查询。

如果之前可能有人问过这个问题，我深表歉意，我发现了一些关于我的错误的结果，但无法将任何成功的答案组合在一起。

作为旁注，这是我在尝试添加限制/偏移之前的查询`row_number()`

```
SELECT  TOP 30 dbo.PlayingCharacters.PlayerName, dbo.PlayingCharacters.CurrentLevel, dbo.PlayingCharacters.XP, (SELECT CASE WHEN dbo.PlayingCharacters.Karma >= 1 THEN 2 WHEN dbo.PlayingCharacters.Karma <= -1 THEN 1 ELSE 0 END) as Karma, ISNULL(Flags.FlagValue, 0) AS Remort
FROM dbo.PlayingCharacters
LEFT JOIN dbo.Flags ON dbo.Flags.OwnerID = dbo.PlayingCharacters.UserID AND Flags.FlagID = 30419
WHERE dbo.PlayingCharacters.AccountName NOT IN (SELECT DISTINCT AccountName FROM UserFlags WHERE FlagBitPosition BETWEEN 0 AND 40) AND PlayingCharacters.AccountName NOT LIKE 'DeletedFrom:%'
ORDER BY dbo.PlayingCharacters.XP desc 
```

哪个有效，但显然没有执行所需的限制/偏移。我用来生成相关查询的代码来自：[http ://codeigniter.com/forums/viewthread/160626/P10/#985759](http://codeigniter.com/forums/viewthread/160626/P10/#985759)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:42:20.927

试试这个

> SELECT temp.PlayerName,temp.CurrentLevel,temp.XP, temp.Karma,temp.Remort FROM (SELECT row_number() OVER (ORDER BY dbo.PlayingCharacters.XP desc) AS CI_offset_row_number, dbo.PlayingCharacters.PlayerName, dbo.PlayingCharacters。 CurrentLevel, dbo.PlayingCharacters.XP, (SELECT CASE WHEN dbo.PlayingCharacters.Karma >= 1 THEN 2 WHEN dbo.PlayingCharacters.Karma <= -1 THEN 1 ELSE 0 END) 作为 Karma, ISNULL(Flags.FlagValue, 0) AS Remort FROM dbo.PlayingCharacters LEFT JOIN dbo.Flags ON dbo.Flags.OwnerID = dbo.PlayingCharacters.UserID AND Flags.FlagID = 30419 WHERE dbo.PlayingCharacters.AccountName 不在（从 UserFlags 选择 DISTINCT AccountName WHERE FlagBitPosition BETWEEN 0 AND 40）和PlayingCharacters.AccountName NOT LIKE 'DeletedFrom:%' ) temp WHERE temp.CI_offset_row_number BETWEEN (141) AND (150)

# c# - 在将字符串插入数据库期间单引号转义

> ID：11912412
> 
> 赞同：30
> 
> 时间：2012-08-11T06:10:13.183
> 
> 标签：c#, database, insert, special-characters

使用“'”时插入失败。示例字符串是：He's is a boy。我尝试使用转义符号跳过“'”，但我相信这不是正确的方法。

```
textBox3.Text.Replace("'", " \'");
string sql= "insert into gtable (1text,1memo) values ('"+textBox3.Text+"',null)";
        OleDbCommand cmd = new OleDbCommand(sql, con);

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close(); 
```

我确实可以选择用“`”替换“'”，但这也会改变数据库中的文本。我希望将“'”保留为相同，并将其插入到数据库中。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-11T06:14:45.007

试试这个

```
 string sql= "insert into gtable (1text,1memo) values (@col1,NULL)";
    OleDbCommand cmd = new OleDbCommand(sql, con);
    cmd.Parameters.AddWithValue("@col1",textBox3.Text);
    con.Open(); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-11T06:12:44.857

尝试

```
string sql= "insert into gtable (1text, 1memo) " + 
            "values ('" + textBox3.Text.Replace("'", "''") + "', null)"; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-11T06:13:26.007

要在数据库中插入单引号，请替换`'`为`''`. 在数据库中只有单引号会去。

用这个

```
string sql= "insert into gtable (1text,1memo) values ('" 
            + textBox3.Text.Replace("'", "''") + "', null)"; 
```

其余代码相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T06:26:24.617

在[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)的 MSDN 文章中，它说：

> **返回一个新字符串**，其中当前字符串中出现的所有指定 Unicode 字符或字符串都替换为另一个指定的 Unicode 字符或字符串。

在第一行，您没有将 textBox3.Text 的值分配给该方法调用的结果，这意味着绝对没有任何反应。

此外，要在 SQL Server 中转义引号，您只需使用两个单引号（注意：与双引号不同）。

这应该会给您预期的结果：

```
textBox3.Text = textBox3.Text.Replace("'", "''"); 
```

此外，您可能希望查看[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)以满足您的字符串连接需求。

```
String escapedInput = textBox3.Text.Replace("'", "''");
String sql = String.Format("insert into gtable (1text,1memo) values ('{0}',null)", escapedInput); 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2014-09-12T11:10:02.447

最好的方法是：

```
string Name = Server.HtmlEncode(txtName.Text); 
```

# gamekit - CoreBluetooth：同时作为中央和外围设备运行

> ID：11912420
> 
> 赞同：2
> 
> 时间：2012-08-11T06:11:39.710
> 
> 标签：gamekit, ios6, core-bluetooth, bluetooth-lowenergy, peripherals

在 GameKit 中，我可以建立点对点连接。我想知道在 iOS 6 中我是否能够通过低功耗蓝牙实现类似的功能，即同时拥有一个外围管理器广告和一个中央管理器扫描对等点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:55:18.707

不幸的是，GKSessions 和蓝牙 LE 之间没有连接，即 GameKit 不会在 BLE 状态中查找更新。不过，这可能是一件好事，让我们希望苹果能睁大眼睛。

# iphone - 将值添加到 uitableview iphone 的预定义数组

> ID：11912421
> 
> 赞同：0
> 
> 时间：2012-08-11T06:11:39.763
> 
> 标签：iphone, ios, uitableview, nsmutablearray

单击添加按钮时，如何向 uitableview 的预定义数组添加新值？

```
-(IBAction)addNewBreed:(id)sender
{
    UIAlertView *addAlert=[[UIAlertView alloc]initWithTitle:@"Add New Item" message:@"\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add",nil];
    UITextField *addTextField=[[UITextField alloc]initWithFrame:CGRectMake(12,45,260,25)];
    [addTextField becomeFirstResponder];
    [addTextField setBackgroundColor:[UIColor whiteColor]];
    addTextField.clearButtonMode=UITextFieldViewModeWhileEditing;
    [addAlert addSubview:addTextField];

    [addAlert show];

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

    if ([buttonTitle isEqualToString:@"Add"]) 
    {

         //HERE WHAT CODE SHOULD I ADD,MY ARRAY NAME 'ar'       
    }
    else
        return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:16:26.983

如果您的数组是 a `NSMutableArray`，那么您可以使用以下代码：

```
[ar addObject: addTextField.text];//you may also enter any string here
  [yourTableView reloadData]; 
```

# c - 无法从可执行共享库中打印浮点数

> ID：11912423
> 
> 赞同：10
> 
> 时间：2012-08-11T06:11:57.090
> 
> 标签：c, linux, gcc, shared-libraries

我正在开发一个可以独立执行以打印它自己的版本号的共享库。

我已将自定义入口点定义为：

```
const char my_interp[] __attribute__((section(".interp"))) = "/lib64/ld-linux-x86-64.so.2";

void my_main() {
   printf("VERSION: %d\n", 0);
   _exit(0);
} 
```

我编译

```
gcc -o list.os -c -g -Wall -fPIC list.c
gcc -o liblist.so -g -Wl,-e,my_main -shared list.os -lc 
```

该代码可以完美**编译**并**运行。**

我的问题是当我将 printf 的参数更改为浮点数或双精度数（%f 或 %lf）时。然后该库将编译，但**运行**时会出现段错误。

有人有想法么？

***编辑1：***

这是段错误的代码：

```
const char my_interp[] __attribute__((section(".interp"))) = "/lib64/ld-linux-x86-64.so.2"; 

void my_main() { 
    printf("VERSION: %f\n", 0.1f); 
    _exit(0); 
} 
```

***编辑2：***

其他环境细节：

```
uname -a 
```

Linux mjolnir.site 3.1.10-1.16-desktop #1 SMP PREEMPT Wed Jun 27 05:21:40 UTC 2012 (d016078) x86_64 x86_64 x86_64 GNU/Linux

```
gcc --version 
```

gcc (SUSE Linux) 4.6.2

```
/lib64/libc.so.6 
```

为 x86_64-suse-linux 配置。由 GNU CC 版本 4.6.2 编译。于 2012 年 3 月 30 日在 Linux 3.1.0 系统上编译。

***编辑3：***

段错误时在 /var/log/messages 中的输出：

8 月 11 日 08:27:45 mjolnir 内核：[10560.068741] liblist.so[11222] 一般保护 ip:7fc2b3cb2314 sp:7fff4f5c7de8 error:0 in libc-2.14.1.so[7fc2b3c63000+187000]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T09:54:23.237

弄清楚了。:)

x86_64 上的浮点运算使用 xmm 向量寄存器。对这些的访问必须在 16 字节边界上对齐。这就解释了为什么 32 位平台不受影响并且整数和字符打印工作正常。

我已经将我的代码编译为：

```
gcc -W list.c -o list.S -shared -Wl,-e,my_main -S -fPIC 
```

然后将“my_main”函数更改为拥有更多堆栈空间。

**前：**

```
my_main:
 .LFB6:
 .cfi_startproc
 pushq   %rbp
 .cfi_def_cfa_offset 16
 .cfi_offset 6, -16
 movq    %rsp, %rbp
 .cfi_def_cfa_register 6
 movl    $.LC0, %eax
 movsd   .LC1(%rip), %xmm0
 movq    %rax, %rdi
 movl    $1, %eax
 call    printf
 movl    $0, %edi
 call    _exit
 .cfi_endproc 
```

**后：**

```
my_main:
 .LFB6:
 .cfi_startproc
 pushq   %rbp
 .cfi_def_cfa_offset 16
 .cfi_offset 6, -16
 subq    $8, %rsp ;;;;;;;;;;;;;;; ADDED THIS LINE
 movq    %rsp, %rbp
 .cfi_def_cfa_register 6
 movl    $.LC0, %eax
 movsd   .LC1(%rip), %xmm0
 movq    %rax, %rdi
 movl    $1, %eax
 call    printf
 movl    $0, %edi
 call    _exit
 .cfi_endproc 
```

然后我通过以下方式编译了这个 .S 文件：

```
gcc list.S -o liblist.so -Wl,-e,my_main -shared 
```

这解决了这个问题，但我会将此线程转发到 GCC 和 GLIBC 邮件列表，因为它看起来像一个错误。

**编辑1：**

根据gcc irc 中的*noshadow*，这是一种非标准的方法。他说如果要使用 gcc -e 选项，要么手动初始化 C 运行时，要么不使用 libc 函数。说得通。

# javascript - 在移动设备中绑定的事件

> ID：11912424
> 
> 赞同：0
> 
> 时间：2012-08-11T06:12:01.673
> 
> 标签：javascript, javascript-events, jquery

我有一个简单的查询：

我的 Web 应用程序允许用户使用诸​​如`Ctrl-X`等之类的键盘快捷键来调用需要快速输入和操作的事件，例如中止快速执行的操作。

我知道在 js 中绑定到桌面的事件。

但是，虽然我知道`tap`桌面和移动浏览器（等）都可用的事件和事件`keypress`，但我想询问您对可以在移动浏览器中专门绑定哪些事件的意见，例如静音、音量增大/减小. 我在谷歌中找到的答案是陈旧的，不是很符合跨浏览器的

所以简单地说，如果使用点击和点击事件太慢或太麻烦，是否有任何事件，用于用户的操作，特别是可以绑定到移动设备上的浏览器？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:25:24.120

JQM 本身无法访问手机上的按钮，如果您想这样做，您必须编写额外的 Java 代码才能通过原始 Android API 访问按钮。

或者，您可以使用 Phonegap：[http ://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#Events](http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#Events)

检查一下，您可以使用“volumeup”或“volumedown”事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:24:04.550

据我所知，你能得到的最好的就是触摸事件。

看看[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html) for iOS，不确定是否存在适用于 android/BB 的相同文档。

Web 应用程序覆盖设备上大量涉及操作系统的物理按钮（如音量/电源/主页按钮）的默认行为似乎很奇怪，因为用户会遇到异常行为，这会让普通用户感到困惑。我怀疑是否有可能在网络应用程序中拦截它们。

编辑：此特定链接有一个 iOS Web 事件列表，您可以在底部的表格中收听：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents。 html#//apple_ref/doc/uid/TP40006511-SW1](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW1)

# joomla - JModuleHelper::getModules 仅在启用 SEF 时返回一个空数组

> ID：11912425
> 
> 赞同：1
> 
> 时间：2012-08-11T06:12:22.127
> 
> 标签：joomla, module, joomla1.5, joomla-extensions

我正在使用 joomla 1.5。在这我必须包含一个模块，所以我正在使用代码

```
 $modules =& JModuleHelper::getModules('left1');
  foreach ($modules as $module)
       {
        echo JModuleHelper::renderModule($module);
       } 
```

当 SEF 被禁用时，它返回一个数组值。但是在启用 SEF 时返回一个空数组。我对此完全感到困惑。谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:31:18.653

如果您想渲染在 left1 位置加载的模块，请使用以下代码

```
$position = 'left1';
jimport( 'joomla.application.module.helper' );
if(JModuleHelper::getModules($position)) {
  $document = JFactory::getDocument();
  $renderer = $document->loadRenderer('modules');
  $options = array('style' => 'xhtml');

  return $renderer->render($position, $options, null);
} 
```

# android - 绘制过多多边形后，Android Mapview 变慢？

> ID：11912427
> 
> 赞同：1
> 
> 时间：2012-08-11T06:12:40.700
> 
> 标签：android, android-mapview

我有这个自定义类，它扩展了添加到我的地图视图中的叠加层。我只有一个将我所有的多边形和文本添加到这个覆盖类中的类。但是，这会导致地图视图非常缓慢。我添加了一个绘图整数并测试了每次调用 ondraw 函数时这个类将绘制 84 次。是否有任何解决方案有助于降低地图视图的加载速度？现在地图视图很慢，每次我左右移动甚至缩放都会很慢。查看android catlog，在我看来，覆盖类ondraw 每秒都被调用一次？我应该查看另一种类型的图层而不是使用叠加层吗？

```
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) 
{
    shadow=false;
    int numberofdraw= 0;

    //outline 
    Paint paint = new Paint();
    paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setStrokeWidth(2);
    //paint.setColor(0x10000000);    
    paint.setColor(Color.BLACK); 
    paint.setStyle(Paint.Style.STROKE);
    paint.setAntiAlias(true);
    Point point1_draw = new Point();     

    for (int i =0;i<data.getCustomPolygonList().size();i++)
    {

        CustomPolygon customPolygon= data.getCustomPolygonList().get(i);
        Path path = new Path();
        path.setFillType(Path.FillType.EVEN_ODD);
        for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
        {

            GeoPoint sector1 = new GeoPoint((int)(customPolygon.getCorrdinateList().get(n).getLatitude()*1e6), (int)((customPolygon.getCorrdinateList().get(n).getLongitude())*1e6));
            if(n==0){
                mapView.getProjection().toPixels(sector1, point1_draw);
                path.moveTo(point1_draw.x,point1_draw.y);
            }else
            {
                mapView.getProjection().toPixels(sector1, point1_draw);
                path.lineTo(point1_draw.x,point1_draw.y);
            }
        }

        path.close();
        canvas.drawPath(path, paint);
        numberofdraw++;
        //  canvas.clipPath(path, Op.DIFFERENCE);

    }

    //inside sector color
    for (int i =0;i<data.getCustomPolygonList().size();i++)
    {
        CustomPolygon customPolygon= data.getCustomPolygonList().get(i);
        paint = new Paint();
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStrokeWidth(2);
        paint.setColor(0x186666ff);    
        //paint.setColor(customPolygon.getColor()); 
        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        paint.setAntiAlias(true);
        point1_draw = new Point();     
        Path path = new Path();
        path.setFillType(Path.FillType.EVEN_ODD);
        for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
        {

            GeoPoint sector1 = new GeoPoint((int)(customPolygon.getCorrdinateList().get(n).getLatitude()*1e6), (int)((customPolygon.getCorrdinateList().get(n).getLongitude())*1e6));
            if(n==0){
                mapView.getProjection().toPixels(sector1, point1_draw);
                path.moveTo(point1_draw.x,point1_draw.y);
            }else
            {
                mapView.getProjection().toPixels(sector1, point1_draw);
                path.lineTo(point1_draw.x,point1_draw.y);
            }
        }

        path.close();
        numberofdraw++;
        canvas.drawPath(path, paint);

    }

    //inside sector text
    for (int i =0;i<data.getCustomPolygonList().size();i++)
    {
        CustomPolygon customPolygon= data.getCustomPolygonList().get(i);
        TextPaint paintText = new TextPaint();
        Point   point1 = new Point();     
        String text=customPolygon.getName();

        for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
        {
            if(customPolygon.getTextLocation()!=null)
            {
                paintText.setTextSize(24);
                Rect rect = new Rect();
                paintText.getTextBounds(text, 0, text.length(), rect);
                paintText.setTextAlign(Paint.Align.CENTER);

                paintText.setTypeface(Typeface.DEFAULT_BOLD); 

                paintText.setColor(Color.BLACK);

                GeoPoint sector1 = new GeoPoint((int)(customPolygon.getTextLocation().getLatitude()*1e6), (int)((customPolygon.getTextLocation().getLongitude())*1e6));

                mapView.getProjection().toPixels(sector1, point1);

            }
        }

        numberofdraw++;
        canvas.drawText(text, point1.x, point1.y, paintText);
    }

    Log.e(Config.log_id,"draw no. "+    numberofdraw+"");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:19:30.563

有很多方法可以改进它，我会建议你一种。

**缓冲：** 为每个多边形创建一个新的画布和一个新的位图

```
Canvas myBufferCanvas;
Bitmap myBufferBitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
myBufferCanvas = new Canvas(myBufferBitmap); 
```

然后只在多边形改变时调用draw，调用draw，`myBufferCanvas`然后在真实画布上调用drawBitmap。

这种方法的优点是性能，它会非常快！缺点是内存，如果你有很多多边形，你可以杀死设备。试着在家里重复使用它们，你会没事的。请记住，您可以对缓冲图像应用任何转换，而无需重绘它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:41:12.700

我认为您应该使用自定义 ItemizedOverlay 来管理 MapView 上的绘图项。除此之外，您可以对现有代码进行一些更改，我相信这会加快速度。在您的 draw() 方法中，您每次都在创建新的 Paint 对象，设置它们的属性，然后处理它们。更糟糕的是，在 draw() 方法中，您循环遍历多边形列表两次，创建更多的 Paint 对象或 TextPaint 对象。相反，您可以在 Overlay 初始化时创建每个 Paint 对象之一，然后在循环中重新使用它们。您也可以在一个循环中完成所有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:26:37.477

处理数据，然后构建路径，最后在地图上绘制路径，请参阅本文中 TWiStErRob 的[响应](https://stackoverflow.com/questions/10792349/drawing-shapes-in-android-mapview-independent-of-the-zoom-level)。

# nginx - 一个 Nginx，2 个应用程序/域

> ID：11912430
> 
> 赞同：0
> 
> 时间：2012-08-11T06:13:06.277
> 
> 标签：nginx

我有 2 个 Rails 应用程序在同一台服务器上运行。我希望对 domain1.com 的请求转发到我的 Rails1 应用程序，并将 domain2.com 请求转发到我的 Rails2 应用程序。我像这样配置了我的 nginx.conf：

```
upstream thin1 {
    server 0.0.0.0:3000;
    server 0.0.0.0:3001;
    server 0.0.0.0:3002;
}

upstream thin2 {
    server 0.0.0.0:3003;
    server 0.0.0.0:3004;
    server 0.0.0.0:3005;
}

server {
    listen          80;
    server_name     *.domain1.com;
    root            /path1/;        

    location / {
        try_files $uri/index.html $uri.html $uri @backend;
    }

    location @backend {
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://thin1;
    }   
}

server {
    listen                  80;
    server_name             *.domain2.com;
    root                    /path2/;

    location / {
        try_files $uri/index.html $uri.html $uri @backend;
    }

    location @backend {
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://thin2;
    }   
} 
```

但是所有请求（domain1.com 和 domain2.com）都会转发到我的 Rails1 应用程序。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:49:06.007

为每个主机名设置单独的服务器配置并转发到每个主机的适当后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:39:29.733

为您的命名位置使用 2 个不同的名称应该可以解决它：

```
location @backend1 {
  proxy_set_header  X-Real-IP  $remote_addr;
  proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  proxy_pass http://thin1;
}

location @backend2 {
  proxy_set_header  X-Real-IP  $remote_addr;
  proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  proxy_pass http://thin2;
} 
```

（不要忘记相应地更改每个服务器的 try_files 指令）

# iphone - 奇怪的事情，应用程序在 iphone 4s 和 ipad 上运行良好，但在 iphone 4 上崩溃了

> ID：11912436
> 
> 赞同：3
> 
> 时间：2012-08-11T06:14:06.503
> 
> 标签：iphone, crash, app-store

我已将我的应用提交给 appstore 进行审核，但被拒绝如下：

> 我们发现您的应用在运行 iOS 5.1.1 的 iPhone 4 上崩溃，这不符合 App Store Review Guidelines。您的应用在 Wi-Fi 和蜂窝网络上启动时崩溃。

这是附加的崩溃日志：

```
Incident Identifier: 65E8D233-2F02-4545-85C9-74CA4A346051
CrashReporter Key:   5f5257827e93649c799893055b12d3d61c937314
Hardware Model:      iPhone3,1
Process:         iman360 [42785]
Path:            /var/mobile/Applications/EA2B491A-194D-4669-ADF7-721593D2B14F/iman360.app/iman360
Identifier:      iman360
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]
Date/Time:       2012-08-09 13:41:37.107 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x2fdfe6e0
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   ???                             0x2fdfe6e0 0 + 803202784
1   iman360                         0x00036ba2 -[ComicCatController     refreshWithActionHandlerExeced:] (ComicCatController.m:216)
2   iman360                         0x00036b0c -[ComicCatController refresh] (ComicCatController.m:207)
3   iman360                         0x0002e682 -[TabComicCityViewController showSegTabView:] (TabComicCityViewController.m:312)
4   iman360                         0x0002dcbc -[TabComicCityViewController segmentedViewValueChanged:] (TabComicCityViewController.m:96)
5   CoreFoundation                  0x372ee3f6 -[NSObject performSelector:withObject:withObject:] + 46
6   UIKit                           0x31083e00 -[UIApplication sendAction:to:from:forEvent:] + 56
7   UIKit                           0x31083dbc -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24
8   UIKit                           0x31083d9a -[UIControl sendAction:to:forEvent:] + 38
9   UIKit                           0x31083b0a -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 486
10  iman360                         0x00019598 -[Iman360SegmentedView moveThumbToIndex:animate:] (Iman360SegmentedView.m:360)
11  iman360                         0x00017ab4 -[Iman360SegmentedView willMoveToSuperview:] (Iman360SegmentedView.m:117)
12  UIKit                           0x3106b502 -[UIView(Internal) _addSubview:positioned:relativeTo:] + 390
13  UIKit                           0x3106b370 -[UIView(Hierarchy) addSubview:] + 24
14  iman360                         0x0002d996 -[TabComicCityViewController viewDidLoad] (TabComicCityViewController.m:49)
15  UIKit                           0x310a1c84 -[UIViewController view] + 160
16  iman360                         0x0001c86a +[ViewControllerManager initGlobalContentBgImgForViewController:] (ViewControllerManager.m:43)
17  iman360                         0x0000422c -[Iman360ViewControllerBase init] (Iman360ViewControllerBase.m:25)
18  iman360                         0x0002b8ce -[IndexTabViewControllerBase initWithIndexViewController:] (IndexTabViewControllerBase.m:19)
19  iman360                         0x00004706 -[IndexViewController viewDidLoad] (IndexViewController.m:58)
20  UIKit                           0x310a1c84 -[UIViewController view] + 160
21  UIKit                           0x310a045a -[UIWindow addRootViewControllerViewIfPossible] + 38
22  UIKit                           0x31224774 -[UIWindow setRootViewController:] + 332
23  iman360                         0x0001c7da +[ViewControllerManager switchToViewController:] (ViewControllerManager.m:32)
24  iman360                         0x0001c60a -[LoadingViewController onBackgroundJobFinishedWithUpdateInfo:] (LoadingViewController.m:165)
25  CoreFoundation                  0x372f31f4 -[NSObject performSelector:withObject:] +   36
26  Foundation                      0x37c0e740 __NSThreadPerformPerform + 344
27  CoreFoundation                  0x37368acc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
28  CoreFoundation                  0x37368298 __CFRunLoopDoSources0 + 208
29  CoreFoundation                  0x3736703e __CFRunLoopRun + 646
30  CoreFoundation                  0x372ea49e CFRunLoopRunSpecific + 294
31  CoreFoundation                  0x372ea366 CFRunLoopRunInMode + 98
32  GraphicsServices                0x33aa9432 GSEventRunModal + 130
33  UIKit                           0x31096cce UIApplicationMain + 1074
34  iman360                         0x00004d5c main (main.m:23)
35  iman360                         0x00002e60 0x1000 + 7776

Thread 0 crashed with ARM Thread State:
r0: 0x2fdfe6bc    r1: 0x2fdfe6bc      r2: 0x2fdfe6e0      r3: 0x00000000
r4: 0x0015d980    r5: 0x00000001      r6: 0x00059384      r7: 0x2fdfe6e0
r8: 0x00059388    r9: 0x0000000e     r10: 0x00153da0     r11: 0x314490ab
ip: 0x000249a1    sp: 0x2fdfe6e0      lr: 0x000249c1      pc: 0x2fdfe6e0
cpsr: 0x200f0010 
```

但我已经在我的 iphone 4s 和 ipad 上对其进行了测试，并且在那里运行良好。起初我以为我可能正在取消引用一个空指针，但**0x2fdfe6e0 处的 KERN_PROTECTION_FAILURE**表明事实并非如此。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:27:34.393

> 我进行了静态代码分析，并得到了一些东西。那是愚蠢的。我忘了用我的一些类初始化程序调用 [super init] 方法。但是有人可以帮忙分析一下这是否是问题所在吗？不确定这是否是问题所在，因为该应用仍在 Appstore 审核中。

幸运的是，我的应用这次通过了。这是因为我没有为我的自定义类对象初始化调用[super init]。我只是很好奇为什么会发生这种情况，它有时效果很好。

# java - 为什么编译器将 long 转换为 int？

> ID：11912437
> 
> 赞同：1
> 
> 时间：2012-08-11T06:14:14.903
> 
> 标签：java, long-integer

```
1 public class Foo {
2   public static void main(String[]a){
3       foo(1000000000); // output: 1000000000
4       foo(1000000000 * 10); // output: 1410065408
5       foo((long)1000000000 * 10); // output: 10000000000
6       
7       long l = 1000000000 * 10;
8       foo(l); // output: 1410065408
9       //long m = 10000000000; // compile error
10  }

    static void foo(long l){
        System.out.println(l);
    }
} 
```

为什么第 4 行输出：141006540​​8 而不是 10000000000？

为什么第 9 行是编译错误？编译器不能创建 a`Long`因为预期的类型是 a`Long`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T06:17:06.877

默认情况下，整数文字是`int`s - 这意味着它们遵守 int 算术，并且它们不能表示大于`int`可以容纳的数字。请注意，在您的第 4 行中，首先将两个整数相乘（使用 int 算术），然后才将结果转换为 a `long`-- 但到那时为时已晚，溢出已经发生。

要输入`long`文字，只需附加`L`到它：

```
long m = 10000000000L; 
```

（小写的 'l' 也可以编译，但它看起来像一个数字 '1'，所以你应该避免它；使用大写的 'L' 以便它突出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:25:52.127

当您在 java 中执行任何操作时，编译器会尝试对操作数进行隐式强制转换，将它们都转换为更大的数据类型。（int / int = 结果总是 int）。

`int`如其他答案所示，为您的文字添加显式转换（默认为）：

```
long l = 1000000000L * 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:18:41.250

除非另有说明，否则文字默认为 int。`(long)`您可以在文字的末尾添加而不是强制转换，`L`以注意它应该是 type `long`，就像`1.1`a`double`和`1.1f`is a一样`float`。

```
foo(1000000000L * 10); // output: 10000000000 
```

和

```
long m = 10000000000L; 
```

# nhibernate - 如何使用 Fluent NHibernate ReferencesAny 映射？

> ID：11912439
> 
> 赞同：1
> 
> 时间：2012-08-11T06:15:04.203
> 
> 标签：nhibernate, polymorphic-associations, fluent, automapping

我已经阅读了很多关于 Fluent NHibernate 的 ReferencesAny 的内容，但我还没有看到完整的示例。我想我大部分都明白，但有一部分我不明白。在类中，映射`ReferencesAny(x => x.MemberName)`用于定义与一个或多个引用类的关系。是什么`MemberName`？它是如何定义的以及如何用于在数据库中创建数据。

我有三张表，一张表中的记录可以引用另外两张表之一中的记录。前两个是自动映射的，所以没有具体定义Id字段。

```
public class Household
{
    public virtual string Name { get; set; }

    public virtual IList<AddressXref> AddressXrefs { get; set; }
}

public class Client
{
    public virtual string Name { get; set; }

    public virtual IList<AddressXref> AddressXrefs { get; set; }
} 
```

我不确定`AddressXref`表格是否可以自动映射。如果是这样，我也需要找出如何做到这一点。现在，我将使用 Fluent 以传统方式进行操作。

```
public class AddressXref
{
    public virtual int id { get; set; }
    public virtual string TableName { get; set; }
    public virtual Int32 Table_id { get; set; }
    public virtual string Street { get; set; }
    public virtual string City { get; set; }
}

class AddressXrefMap : ClassMap<AddressXref>
{
    public AddressXrefMap()
    {
        Table("AddressXref");
        Id(x => x.id);
        Map(x => x.TableName);
        Map(x => x.Table_id);
        Map(x => x.Street);
        Map(x => x.City);

        ReferencesAny(x => x.TableRef)
            .AddMetaValue<Household>(typeof(Household).Name)
            .AddMetaValue<Client>(typeof(Client).Name)
            .EntityTypeColumn("TableName")
            .EntityIdentifierColumn("Table_id")
            .IdentityType<int>();
    }
} 
```

我需要帮助的部分是在类中定义的成员是如何`TableRef`定义`ReferencesAny()`的`AddressXref`？

另外，在创建数据记录时如何在代码中使用它？我想象它会类似于这样：

```
Household Household = new Household();
Household.Name      = "Household #1";

AddressXref AddrXref = new AddressXref();
AddrXref.Street1   = "123 Popular Street";
AddrXref.City      = "MyTown";
AddrXref.TableRef  = Household;

Session.SaveOrUpdate(AddrXref); 
```

我喜欢在 NHibernate 中使用 Fluent，但我仍然对学习曲线感到惊讶。:)

谢谢，拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:21:23.123

由于 Household 和 Client 不共享对象以外的基类，因此您必须将其声明为：

```
public class AddressXref
{
    public virtual int Id { get; set; }
    public virtual object TableRef { get; set; }
    public virtual string Street { get; set; }
    public virtual string City { get; set; }
} 
```

并像这样测试它

```
if (addrXref.TableRef is HouseHold)
    // it's a household 
```

# jquery - 基于滚动鼠标位置的功能

> ID：11912445
> 
> 赞同：0
> 
> 时间：2012-08-11T06:15:31.650
> 
> 标签：jquery, scroll

基本上，我正在尝试为我的网站设置一个“自动滚动”选项，我已经有了它工作的基础，尽管如果您将鼠标移回左侧而不是右侧，它不会重新回滚。

我已经在这里待了三个多小时了，没有运气，所以在网上搜索过！

这是我所拥有的：

```
 $(document).mousemove(function(e){
    window.mouseXPos = e.pageX;
    window.mouseYPos = e.pageY; 
       var height = $(window).height() /2;
       if (window.mouseYPos < height){
        $('body,html').stop().animate({     
            scrollTop: window.mouseYPos
        },10 );
       }
       else{
        $('body,html').stop().animate({     
            scrollTop: -window.mouseYPos
        },10 );
       }    
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:21:57.563

有可能当鼠标向左移动时，它正在离开窗口，所以它不会触发事件。您可能希望滚动到鼠标在窗口内的位置。尝试

```
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
   $('body,html').stop().animate({
    scrollTop: window.mouseYPos-$('window').height()/2,
    scrollLeft: window.mouseXPos-$('window').width()/2
   },1000 );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:29:54.233

尝试在鼠标不移动的 100 毫秒后延迟动画，以避免在每个鼠标像素移动后开始新动画

```
scrollDelayTimer = null;
$(document).mousemove(function(e){
       window.mouseXPos = e.pageX;
       window.mouseYPos = e.pageY;

       clearTimeout(scrollDelayTimer);
       scrollDelayTimer = setTimeout(function () {
          scrollDelayTimer = null;
          $('body,html').stop().animate({
              scrollTop: window.mouseYPos,
              scrollLeft: window.mouseXPos
          },1000 );
       },100);
}); 
```

# web-applications - 内容类型 json 返回 http 404

> ID：11912446
> 
> 赞同：0
> 
> 时间：2012-08-11T06:15:53.910
> 
> 标签：web-applications, extjs, struts2, tomcat7

在第 3 方服务器中，当带有 EXt-JS 4 的 Web 应用程序（服务器端 Struts 2）发出**内容类型为 application/json 的 ajax 请求时；charset=utf-8** webserver 返回 page not found http 404/403 状态码。但是，如果我们通过浏览器 url 栏使用纯文本/html 发出相同的请求，则会收到响应。会有什么问题。

有什么方法可以通过发送不同的内容类型来模拟请求，我试过下面的 html 表单，但它只发送**Content-Type:application/x-www-form-urlencoded**

```
<html>
<body>
<form action="http://abc.com/abc?" method="post" enctype="application/json; charset=utf-8">

<input type='submit'/>
</form>
</body>
</html> 
```

服务器或 tomcat 可以单独限制特定的内容类型吗？

```
<action name="abc" class="com.stutzen.rhs.abc.Abc" method="abc">
        <interceptor-ref name="json">
            <!--param name="contentType">application/json</param-->
        </interceptor-ref>
        <result type="json">
            <param name="excludeProperties">
                data,model
            </param>
        </result>
    </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:30:25.183

使用 Ext.Ajax.request 发出请求时，您可以在 Ext 端设置任意标头：

```
Ext.Ajax.request({
    url: '/foo',
    headers: {
        'Content-Type': 'text/html'
    }
}); 
```

然而，它看起来更像是一个黑客而不是真正的解决方案；您需要找出服务器期望的内容并相应地进行。

# vb.net - VB.NET - 使用类进一步封装 StreamWriter/Reader；实现这一目标的最有效方法？

> ID：11912447
> 
> 赞同：0
> 
> 时间：2012-08-11T06:16:01.837
> 
> 标签：vb.net

我的想法是通过封装 StreamReader 和 StreamWriter 类让我的生活更轻松，这里的目标是让这个类提供静态方法，我可以调用这些方法来从文件中写入和读取，而不必实例化 StreamWriter/Reader 类型的对象等等。

到目前为止，我的班级有以下代码：

```
Option Strict On

    Imports System.IO
    Imports System.IO.StreamReader 
    Imports System.IO.StreamWriter 

    Public Class ReadWrite
        Enum WriteType
            Append = 0
            WriteLine = 1
            Write = 2
        End Enum

        Enum ReadType
            Readline = 0
            Read = 1
        End Enum

        Shared Function Write (ByVal FilePath As String, ByVal _WriteType As WriteType, ByVal Content As String) As Boolean 

             Select Case _WriteType
                Case WriteType.Append
                    Using _append As StreamWriter = New StreamWriter(FilePath,True)
                        _append.WriteLine (Content)
                    End Using
                Case WriteType.Write 
                    Using _write As StreamWriter = New StreamWriter(FilePath, False)
                        _write.Write (Content)
                    End Using
                Case WriteType.WriteLine 
                      Using _writeline As StreamWriter = New StreamWriter(FilePath, False)
                        _writeline.Writeline (Content)
                    End Using
             End Select

            Return false
        End Function

         Shared Function Read (ByVal FilePath As String, ByVal _ReadType As ReadType) As Boolean 

             Select Case _ReadType
                Case ReadType.ReadLine
                Case ReadType.Read 
             End Select

            Return false
        End Function
    End Class 
```

**问题：** 这是完成此类任务的好方法吗？我可以使用哪些技术来产生良好的结果，同时保持代码的可重用性和简单性；我的目标是让它足够灵活，以便在其他应用程序中轻松使用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:48:07.967

该类已经为您提供了大部分功能`System.IO.File`：

*   [File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx)
*   [File.WriteAllText](http://msdn.microsoft.com/en-us/library/ms143375.aspx)
*   [文件.ReadAllText](http://msdn.microsoft.com/en-us/library/ms143368.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:29:48.320

一般来说，编写小辅助方法以使您的生活更轻松并没有错。但不幸的是，你选择了一个非常糟糕的例子。

这里出现的问题是您为读取或写入文件的每一点数据打开和关闭文件。打开文件是一项昂贵的操作，在最常见的硬件上花费大约 50 毫秒。而且它非常容易发生随机故障，通过关闭一个文件，您可以让另一个进程有机会打开该文件。这很可能会将您锁定，您的下一次读/写很容易因“拒绝访问”异常而失败。无法调试，因为它是如此随机并且由您看不到的另一个进程引起。

一个简单的解决方法是为辅助方法提供 TextReader 或 TextWriter 的参数类型，而不是字符串。或者通过利用扩展方法。

# asp.net-mvc - 如何避免在 IIS 7.5 的子路径中部署 ASP.NET MVC3 应用程序

> ID：11912449
> 
> 赞同：0
> 
> 时间：2012-08-11T06:16:31.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, deployment, iis-7.5

当我将 ASP.NET MVC3 应用程序部署到 WindowsServer 8RC2 上的 IIS 7.5 时，只能在以下 url 下访问它：mydomain.com/mvcsite 而不仅仅是 mydomain.com

我正在使用 MSDeploy 从 Visual Studio 中内置的部署包安装应用程序。

在 IIS 上，我配置了一个网站，其中有一个名为“mvcsite”的应用程序。

我是否需要重写 Url 才能完成这项工作，或者是否可以在 IIS 7.5 中配置一些默认根路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:52:00.883

在站点的**高级设置**中（右键单击站点 ->**管理网站**->**高级设置...**），您可以将**物理路径**更改为您的`mvcsite`应用程序所在的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:36:25.997

事实证明，我只需要创建一个网站，而无需在下面创建应用程序。

# google-apps-script - 谷歌应用脚 本的onclick事件不起作用

> ID：11912450
> 
> 赞同：1
> 
> 时间：2012-08-11T06:16:38.790
> 
> 标签：google-apps-script

在我的代码正常工作前几天

`"onclick='google.script.run.processForm(this.parentNode)"`但突然它停止工作而没有任何代码更改。

***我的代码：***

**.html 文件：-**

```
<form id='addnewForm' action='myurl' method="post"> 
     <input name='name' type="text" >
     <input name='age' type='text'> 

<input type='submit'  value="submit" name="submit" onclick='google.script.run.processForm(this.parentNode)' >

 </form> 
```

**code.js 文件：**

```
 function processForm(value) {

      var  name= value.name;
      var  age= value.age;

 Logger.log('name is: ' + name);
  Logger.log('age is:' + age);

    } 
```

在 processForm 函数给出输出之前，但现在它既没有给出任何输出，也没有给出它的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:47:24.927

这是一个已知问题，请对此[问题报告加注](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1660)*星*标以跟踪更新。

# django - 在哪里放置 django 信号接收器代码？

> ID：11912451
> 
> 赞同：9
> 
> 时间：2012-08-11T06:16:41.103
> 
> 标签：django

嗨，我正在定义自己的信号和接收器。我只想知道我应该在哪里放置我的代码。它在models.py 或views.py 中。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-13T07:39:28.373

将您的信号功能放入`signals.py`并且不要忘记将应用程序配置放入`__init__.py`文件中，并将准备好的方法放入`apps.py`文件中。

`apps.py`：

```
from django.apps import AppConfig

class AppNameConfig(AppConfig):
    name = 'app_name'

    def ready(self):
        import app_name.signals 
```

`__init__.py`（应用程序文件夹）：

```
default_app_config = 'app_name.apps.AppNameConfig' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T15:45:05.990

1.  在您的应用程序中创建 python 文件`signals.py`。
2.  `__init__.py`在您的应用程序中添加这一行。

    `import signals`

3.  重启django项目。

解决它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-23T14:40:54.793

您可以创建`signals.py`文件。但不能添加`import signals`到`__init__.py`文件中。因为信号相关的模型还没有加载。因此，在apps.py 文件中，您可以找到从类继承的`AppConfig`类，并且该类具有方法`ready(self)`方法。您应该在此函数中导入信号：

```
from django.apps import AppConfig

class MainConfig(AppConfig):
    name = 'main'

    def ready(self):
        import main.signals 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T22:48:08.307

给定一个名为“app”的应用程序来处理名为“Model”的模型的 pre_save 信号

应用程序.py

```
from django import apps
from django.db.models import signals
class AppConfig(apps.AppConfig):
    name = 'app'
    def ready(self):
        # import here to avoid circular imports
        from app import signals as app_signals
        signals.pre_save.connect(app_signals.model_pre_save, sender=self.get_model('Model')) 
```

信号.py

```
def model_pre_save(sender, instance, **kwargs):
    if kwargs.get('raw', False):
        return  # raw implies fixture, ignore
    # add code here to handle signal 
```

# c# - 将查询中的多个项目加载到组合框中

> ID：11912453
> 
> 赞同：1
> 
> 时间：2012-08-11T06:16:48.087
> 
> 标签：c#, .net, wpf, class, ado.net

我在 .Net 框架 4.0 中有一个 WPF 表单。我想要做的是用查询结果填充组合框。我可以这样做，但为了防止重复代码，我试图有一个可以为每个我想填充的组合框使用/调用的类（多个组合框将共享来自同一查询的结果）。

我已经构建了我的类，如下所示：

```
 internal class DatabaseHandle
    {
        private string _connectionString =
            "Data Source=FINALLYWINDOWS7\\TESTING;Initial Catalog=Testing;Integrated Security=true";

        public string PopulateTeamMembers()
        {
            string queryString = "select    setting_main"
                                 + " from     [marlin].[support_config]"
                                 + " where  config_code = 30"
                                 + "         and setting_active = 1"
                                 + " order by setting_main";

            using (var connection = new SqlConnection(_connectionString))
            {
                var command = new SqlCommand(queryString, connection);

                try
                {
                    connection.Open();
                    SqlDataReader reader = command.ExecuteReader();
                    while (reader.Read())
                    {
                        return reader[0].ToString();
                    }

                    reader.Close();
                }
                catch (Exception ex)
                {
                    return "Error, unable to load";
                }
            }
            return null;
        }
    } 
```

然后在另一个类中，我有以下方法：

```
private void LoadInterface()
{
    DatabaseHandle testing = new DatabaseHandle();
    string teammembers = testing.PopulateTeamMembers();

    comboBoxResolvedBy.Items.Add(teammembers);
} 
```

这会填充我的组合框，只是它只使用查询中的第一个值填充它。我检查了数据，这方面的一切都是正确的，但我似乎无法弄清楚如何从 LoadInterface 方法枚举查询结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:32:16.247

请注意，当函数命中`return`关键字时，它会从您的函数中退出。这就是为什么它只返回一个值。它也不叫`reader.close`。

您应该以 a 的形式返回多个值`IEnumerable<string>`，而不是 a `string`。

解决此问题的一种方法是填充列表。

```
 public IEnumerable<string> PopulateTeamMembers()
    {
        List<string> returnList = new List<string>();
        string queryString = "select    setting_main"
                             + " from     [marlin].[support_config]"
                             + " where  config_code = 30"
                             + "         and setting_active = 1"
                             + " order by setting_main";

        using (var connection = new SqlConnection(_connectionString))
        {
            var command = new SqlCommand(queryString, connection);

            try
            {
                connection.Open();
                using(SqlDataReader reader = command.ExecuteReader())
                {
                   while (reader.Read())
                   {
                       returnList.Add(reader[0].ToString());
                   }

                   reader.Close();
                }
            }
            catch (Exception ex)
            {
                // Just let the calling class handle the exception
                throw;
            }
        }
        return returnList;
    } 
```

然后你可以这样称呼它：

```
 private void LoadInterface()
   {
       DatabaseHandle testing = new DatabaseHandle();
       IEnumerable<string> teammembers = testing.PopulateTeamMembers();
       foreach(string value in teammembers)
       {
           comboBoxResolvedBy.Items.Add(value);
       }
   } 
```

# java - 更新 primefaces 数据表中的记录

> ID：11912454
> 
> 赞同：2
> 
> 时间：2012-08-11T06:17:01.947
> 
> 标签：java, hibernate, jsf, jakarta-ee, primefaces

我正在使用 jsf hibernate spring primefaces 的集成。我想更新一条记录。但我的代码不起作用。插入和删除效果很好。我没有错误。请帮我写正确的代码。个人道.java

```
public class PersonelDao implements IPersonelDao {
private SessionFactory sessionFactory;

public SessionFactory getSessionFactory() {
    return sessionFactory;
}

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
public void updatePersonel(Personel personel) {

    getSessionFactory().getCurrentSession().update(personel);
    }
public void deletePersonel(Personel personel) {
    getSessionFactory().getCurrentSession().delete(personel);

} 
```

个人服务.java

```
@Transactional(readOnly=true)
public class PersonelService implements IPersonelService{
    IPersonelDao personeldao;
    public IPersonelDao getPersoneldao() {
        return personeldao;
    }

    public void setPersoneldao(IPersonelDao personeldao) {
        this.personeldao = personeldao;
    }

    @Transactional(readOnly=true)
    public void updatePersonel(Personel personel){
    getPersoneldao().updatePersonel(personel);
}
    @Transactional(readOnly=false)

    public void deletePersonel(Personel personel) {
        getPersoneldao().deletePersonel(personel);

    } 
```

PersonelBean.java

```
@ManagedBean(name="personelMB")
@RequestScoped
public class PersonelBean implements Serializable{
    private static final long serialVersionUID = 1L;

    @ManagedProperty(value="#{PersonelService}")
    IPersonelService personelservice;
    List<Personel> personelList;

    private int personel_id;
    private String pname;
    private String pfamily;
    private String paddress;
    private String pphone;
//getter and setter
public void deletePersonel(int personel_id){
        Personel personel=(Personel)personelservice.getPersonelId(personel_id);
        getPersonelservice().deletePersonel(personel);

    }

    public void updatePersonel(RowEditEvent event){
    Personel personel = (Personel)event.getObject();
    getPersonelservice().updatePersonel(personel);
        //getDataFromDatabase();
    }

} 
```

个人资料.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="rtl" 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:fn="http://java.sun.com/jsp/jstl/functions"
>
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اطلاعات پرسنلی</title>
</h:head>
<h:body>
<h1>اضافه کردن پرسنل جدید</h1>
        <h:form>

            <h:panelGrid columns="4" >
              شماره پرسنلی : 
                <h:inputText id="id" value="#{personelMB.personel_id}" 
                    size="20" required="true"
                    label="id" >
                </h:inputText>
                <br></br>
                نام : 
                <h:inputText id="name" value="#{personelMB.pname}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                 نام خانوادگی: 
                <h:inputText id="family" value="#{personelMB.pfamily}" 
                    size="20" required="true"
                    label="family" >
                </h:inputText> 

                آدرس : 
                <h:inputTextarea id="address" value="#{personelMB.paddress}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

          تلفن:  
                <h:inputText id="tel" value="#{personelMB.pphone}" 
                    size="20" required="true"
                    label="tel" >
                </h:inputText> 
            </h:panelGrid>

            <h:commandButton value="درج اطلاعات" action="#{personelMB.addPersonel()}" />

        </h:form>
 <h2>مشاهده اطلاعات پرسنل</h2>  
 <h:form  prependId="false">  

    <p:dataTable id="pdataTable" var="personel" value="#{personelMB.personelList}" rowKey="#{personelMB.personel_id}" editable="true"
    >  
  <p:ajax event="rowEdit" update="@form" listener="#{personelMB.updatePersonel}"/>
        <f:facet name="header">  
            اطلاعات پرسنل 
        </f:facet>  

        <p:column> 

            <f:facet name="header">  
               شماره پرسنلی  
            </f:facet>  

            <h:outputText value="#{personel.personel_id}" />  

            <f:facet name="footer">  
                کدملی 
            </f:facet>  
        </p:column>  

        <p:column headerText="نام">
        <p:cellEditor>
        <f:facet name="output">  
            <h:outputText value="#{personel.pname}" />
            </f:facet>
            <f:facet name="input">
              <p:inputText value="#{personel.pname}" />
              </f:facet>
            </p:cellEditor> 
        </p:column>  

        <p:column headerText="نام خانوادگی"> 
         <p:cellEditor> 
         <f:facet name="output">
            <h:outputText value="#{personel.pfamily}" /> 
            </f:facet>
            <f:facet name="input">
            <p:inputText value="#{personel.pfamily}" />
            </f:facet> 
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="آدرس"> 
         <p:cellEditor> 
         <f:facet name="output">
            <h:outputText value="#{personel.paddress}" />  
            </f:facet>
            <f:facet name="input">
            <p:inputText value="#{personel.paddress}" />
            </f:facet>
            </p:cellEditor> 
        </p:column>  
   <p:column headerText="تلفن"> 
   <p:cellEditor> 
   <f:facet name="output">
            <h:outputText value="#{personel.pphone}" />
            </f:facet> 
            <f:facet name="input">
            <p:inputText value="#{personel.pphone}" /> 
            </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="حذف">
      <f:facet name="حذف">
         <h:outputText value="" />
      </f:facet>
      <p:commandButton icon="ui-icon-trash" title="حذف"
                       actionListener="#{personelMB.deletePersonel(personel.personel_id)}"  update="@form" ajax="true"/>
   </p:column>
   <p:column headerText="ويرايش">

         <p:rowEditor /> 

   </p:column>
        <f:facet name="footer">  
            تعداد رکورد#{fn:length(personelMB.getPersonelList())} میباشد.  
        </f:facet>  

    </p:dataTable>  

</h:form>  

</h:body>
</html> 
```

个人资料.java

```
@Entity
@Table(name="TBLPERSONEL")
public class Personel {
@Id
@Column(name="PERSONEL_ID")
private int personel_id;
@Column(name="PNAME")
private String pname;
@Column(name="PFAMILY")
private String pfamily;
@Column(name="PADDRESS")
private String paddress;
@Column(name="PPHONE")
private String pphone;
@OneToOne
@PrimaryKeyJoinColumn
private Manager manager;
@OneToMany(mappedBy="personel")
private Set<Stufftransfer> stufftransfers;
public Personel(){

}
public Set<Stufftransfer> getStufftransfers() {
    return stufftransfers;
}
public void setStufftransfers(Set<Stufftransfer> stufftransfers) {
    this.stufftransfers = stufftransfers;
}
public Personel(int personel_id, String pname, String pfamily, String paddress,
        String pphone) {
    super();
    this.personel_id = personel_id;
    this.pname = pname;
    this.pfamily = pfamily;
    this.paddress = paddress;
    this.pphone = pphone;
}
//getter and setter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:07:55.857

1.  使用`p:commandButton`而不是`h:commandButton`
2.  设置更新属性`p:commandButton`

请记住，在更新属性中找到正确的 id 可能有点棘手

* * *

抱歉，我误解了这个问题正确的答案是：将您的更新方法更改为：

```
public void updatePersonel(RowEditEvent event){
Personel updated = (Pesonel)event.getObject();
//this is the updated value from the dataTable, get the entity from db and do the update 
```

}

还有一件事：不要更新 ajax 事件上的行，因为您没有更新`personelList`update 方法中的 。这意味着`rowEdit`ajax 事件必须是这样的：

```
<p:ajax event="rowEdit" listener="#{personelMB.updatePersonel}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:33:09.953

像这样更改 ManagedBean 的 updatePersonel() 方法

```
 public void updatePersonel(int personel_id,String pname,String pfamily,String paddress,String pphone){
    Personel personel = new Personel();
    personel=(Personel)personelservice.getPersonelId(personel_id);
    if(personal != null) {
       personel.setPaddress(getPaddress());
       personel.setPersonel_id(getPersonel_id());
       personel.setPfamily(getPfamily());
       personel.setPname(getPname());
       personel.setPphone(getPphone());
       getPersonelservice().updatePersonel(personel_id, pname, pfamily, paddress, pphone);
    }
} 
```

# c - 解码专有的 H.264 网络视频流？

> ID：11912457
> 
> 赞同：4
> 
> 时间：2012-08-11T06:17:12.040
> 
> 标签：c, video-streaming, h.264, mpeg-4, ip-camera

我正在尝试查看我从 eBay 上下来的这个 IP 摄像机（是的，是的，我知道）。型号 BL-5720IPW-L4MM。

无论如何，他们带有非常糟糕的基于Windows的应用程序，主要是中文，功能很差。我已经问过供应商我是否可以拥有视频流的格式，以便我可以为他们提供 Linux 替代方案 - 但他们拒绝了......无论如何，它们非常昂贵，我需要从我的 Linux 读取视频流服务器（No X）并计划将流集成到 linux 应用程序“运动”中。但我无法弄清楚原始视频从哪里开始，以及它正在流式传输的确切格式。

```
From what I can gather (in byte offset/length - desc - example):
0/4 Firmware Version - 8.4.4.5
5/2 H-res - 1280
7/2 V-res - 720

And what I know about the stream:
* 264/MPEG4 based codec
* 25fps 
```

下面是从 TCP 9001 捕获的原始数据（一连接就开始流式传输）。如果有人能够帮助我掌握这种格式，将不胜感激。完整的 24MB（约 60 秒）捕获可[在此处](http://www.brosoft.com.au/files/camera.raw)获得，如果解码正确，应该会显示我非常凌乱的办公桌。

```
hexdump -n 1024 -C camera-capture.raw
00000000  08 04 04 05 00 05 d0 02  b0 01 f0 00 00 00 00 00  |................|
00000010  00 00 00 00 42 66 00 00  00 f7 0e 0f ff ff ff ff  |....Bf..........|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 01 b6 3f f0  18 54 61 a5 b6 4b c6 db  |......?..Ta..K..|
00000040  7f 1b 6d f8 8c 6d bf 8d  b6 fe 36 db f8 db 6f e3  |..m..m....6...o.|
00000050  6d bf 8d b6 fe 36 db f8  db 6f e3 6d bf 8d b6 fe  |m....6...o.m....|
00000060  36 db f8 db 6f e3 6d bf  8d b6 fe 36 db f8 db 6f  |6...o.m....6...o|
00000070  e3 6d bf 8d b6 fe 36 db  f8 db 6f e3 6d bf 8d b6  |.m....6...o.m...|
00000080  fe 36 db f8 db 6f e3 6d  bf 8d b6 fd 1d 89 01 48  |.6...o.m.......H|
00000090  da 81 fd f2 06 fc 2f 73  19 0f 1b 10 0b d5 7c d7  |....../s......|.|
000000a0  e0 bc e1 ec ce b5 a5 1d  04 65 c2 68 86 14 db 77  |.........e.h...w|
000000b0  06 ce 31 b1 d8 97 8a 13  f4 39 92 8c 0e 2a 60 a8  |..1......9...*`.|
000000c0  87 81 e6 7c 38 bc 1a 8c  85 81 66 5e e6 14 70 60  |...|8.....f^..p`|
000000d0  70 f7 ca 9b 93 ee ea f4  43 93 77 ee e4 48 8e ef  |p.......C.w..H..|
000000e0  f1 b7 9f c7 b3 7d 87 32  ea 8b 1b 40 c1 48 76 cc  |.....}.2...@.Hv.|
000000f0  5f 88 86 0c 96 e8 f3 49  98 5c 7f d6 96 37 fe e4  |_......I.\...7..|
00000100  3f ea ee fe 56 cc a2 78  bf cf 9f 91 ae a8 cd 33  |?...V..x.......3|
00000110  1d 7b f9 d7 1a b3 ae 26  46 8f f0 f3 2d 99 ca 59  |.{.....&F...-..Y|
00000120  fe 0d 05 d2 f4 ea 1f f7  43 37 1a 61 b4 14 4f 2a  |........C7.a..O*|
00000130  46 3c 7d 3b 02 2c 13 94  21 5d 65 3d 12 ce a2 d3  |F<};.,..!]e=....|
00000140  77 c2 83 ec a6 11 70 66  e3 67 85 c8 d9 20 8e 33  |w.....pf.g... .3|
00000150  9a 84 6a 99 f1 94 9f 30  2c 81 12 57 7f 0c 1c da  |..j....0,..W....|
00000160  16 f6 b1 dc 5b fe 33 14  bd 5a 52 aa a1 0a 08 43  |....[.3..ZR....C|
00000170  92 7a 45 9e cd 2b b7 bc  41 93 b4 66 12 7d ab 75  |.zE..+..A..f.}.u|
00000180  48 a0 cc 46 dd 13 5a 99  25 5f a8 91 0a e7 8a 1a  |H..F..Z.%_......|
00000190  06 14 ae cf 46 5b 30 aa  1f 81 22 c5 9f 5f 19 8d  |....F[0...".._..|
000001a0  3c 48 f8 f3 7b 91 ee dd  e3 cd bb c6 db 7f 1b ef  |<H..{...........|
000001b0  4b 1e 6d de 36 db b2 3c  fe f8 df 6f e3 6d bf 8d  |K.m.6..<...o.m..|
000001c0  b6 fe 3c db bc 6e 5f b2  3d a5 da 9a 6e 24 9b 78  |..<..n_.=...n$.x|
000001d0  66 9c 60 58 6d 72 a5 8b  83 22 5f 0e 1b d7 57 af  |f.`Xmr..."_...W.|
000001e0  71 c2 f1 1d a5 a7 c4 c6  7a a0 27 2e 33 4c 73 c9  |q.......z.'.3Ls.|
000001f0  78 f7 fa f1 e6 dd e3 6d  bb 23 6d b9 c7 9f df 0f  |x......m.#m.....|
00000200  4b 9b 69 4d 3c 7e 66 c4  38 ef 8d b6 fe 36 db f8  |K.iM<~f.8....6..|
00000210  db 6f e3 6d bf 8d b6 fe  36 db f8 db 6f e3 6d bf  |.o.m....6...o.m.|
00000220  8d b6 fe 36 db f8 db 6f  c4 63 6d fc 6d b7 f1 b6  |...6...o.cm.m...|
00000230  df c6 db 7f 1b 6d fc 6d  b7 f1 b6 df c6 db 7f 1b  |.....m.m........|
00000240  6d fc 6d b7 f1 b6 df c6  db 7f 1b 6d fc 6d b7 f1  |m.m........m.m..|
00000250  b6 df c6 db 7f 1b 6d fc  6d b7 f1 b3 2d 91 51 57  |......m.m...-.QW|
00000260  2e 6c 41 2e 54 d9 bf 41  aa 03 10 51 36 5a 3e df  |.lA.T..A...Q6Z>.|
00000270  03 07 1f 17 53 a2 81 e6  16 ee 07 16 e0 d2 36 54  |....S.........6T|
00000280  bf 0b 53 37 09 3a 30 3b  7e 7a 08 dc f6 16 37 b8  |..S7.:0;~z....7.|
00000290  6b 6b 8c 61 15 86 82 78  66 ae ef 4e a7 12 b3 d5  |kk.a...xf..N....|
000002a0  39 3e e8 d0 6d df b7 5e  39 6f 72 36 df f8 df cd  |9>..m..^9or6....|
000002b0  76 e9 ca 7a 9d ee b3 05  bd cf 91 5b a8 87 46 0d  |v..z.......[..F.|
000002c0  53 88 8f d3 9b 3d 8f 31  51 ff 54 ad 1b dd f4 a1  |S....=.1Q.T.....|
000002d0  2f c3 8b 35 78 66 2c 89  73 f6 a6 3c bd 87 d5 ca  |/..5xf,.s..<....|
000002e0  b3 8b c7 9c 55 99 b0 f2  bf 68 45 84 65 ac 3e b7  |....U....hE.e.>.|
000002f0  0f 48 99 c9 b7 11 0c f0  24 47 c9 fd 56 ef 05 2a  |.H......$G..V..*|
00000300  eb 5d 5e 11 9c 6d 89 f2  47 a1 1d 4c 82 cf 5b ea  |.]^..m..G..L..[.|
00000310  b3 45 26 5a 69 3b 5f 0f  1b a8 43 ca 2a 17 aa 2f  |.E&Zi;_...C.*../|
00000320  9f a5 9f 2a f9 30 c2 f0  56 a1 22 37 55 6c 15 ab  |...*.0..V."7Ul..|
00000330  ca 4c 2d a3 c8 16 d4 bc  f8 fa 51 09 b9 ea 16 e8  |.L-.......Q.....|
00000340  c9 62 aa 42 5a 61 e6 7b  1a 7d 63 8d ff 6b 69 ec  |.b.BZa.{.}c..ki.|
00000350  0f 5f 22 9b 6f eb de 0d  df c9 8c 28 9f fc 91 16  |._".o......(....|
00000360  23 3c 9b 35 7e 13 17 cc  10 3d da 46 69 b8 f6 6f  |#<.5~....=.Fi..o|
00000370  8c b0 dc 3a a9 76 71 18  d4 e9 98 bb 96 91 c7 b3  |...:.vq.........|
00000380  c8 d1 ed f4 91 b6 dd b1  b6 dd e3 6d bb c6 db 7f  |...........m....|
00000390  1b 6d fc 6d bf 38 de df  e3 7f 3f 8d e7 ef 1b 79  |.m.m.8....?....y|
000003a0  fc 6d bf 2c 7d cb bc f2  a1 8f 4e 2d 99 8c 24 d2  |.m.,}.....N-..$.|
000003b0  01 7a bf 16 fb 4c 1a 63  79 5c 2a 1b ab 3f 74 b3  |.z...L.cy\*..?t.|
000003c0  b3 96 c2 6a 24 25 b4 58  df 50 3c fc e3 6d b6 e3  |...j$%.X.P<..m..|
000003d0  6d b9 23 6d bb c6 de f7  8f 36 fe 3f 4f cb 24 ac  |m.#m.....6.?O.$.|
000003e0  fa 3d 4e f1 b6 df c6 db  7f 1b 6d fc 6d b7 f1 b6  |.=N.......m.m...|
000003f0  df c6 db 7f 1b 6d fc 6d  b7 f1 b6 df c6 db 7f 1b  |.....m.m........| 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T00:59:23.743

前 16 个字节是文件头。我相信您对固件版本的阅读。之后是两对 16 位 little-endian 数字。除了实际的 MPEG ES，文件中的所有内容都是 little-endian。它们是宽度和高度，首先是主要高分辨率视频流，然后是次要低分辨率视频流。最后 4 个字节为 0。也许这是流列表的终结符，或者它们可能是音频参数，您有一个 1280x720 的主流和一个 432x240 的辅助流。

文件的其余部分是一系列数据包。每个数据包都有一个 16 字节的标头。

数据包头中的第一个 32 位字是一个标签，用于标识数据包所属的流，以及数据包是否包含关键帧。（除了 2 个视频流之外，还有一个元数据流，或者可能是 2 个元数据流，我还没弄清楚。）

包头中的第二个字是包有效载荷的长度。

包头中的第三个字可能是时间戳。它在视频流中单调增加，并且总是`0xffffffff`在元数据流中。

包头中的第四个字仍然是一个完全的谜。

16 字节的数据包头紧跟在数据包有效载荷之后，紧接着是下一个数据包的头。

文件中存在的标记值是：

0：主要视频流关键帧
1：神秘元数据
2：次要视频流关键帧
0x80：主要视频流非关键帧
0x82：次要视频流非关键帧
0xc6821001：神秘元数据

在视频流中，每个数据包都包含一个 MPEG4 VOP（帧）。其中一些在开头有额外的 0 字节，但那些是无害的。VOP 以 4 字节序列 0x00 0x00 0x01 0xb6 开始。

当所有 0 和 0x80 数据包有效负载或 2 和 0x82 连接时，结果几乎是一个有效的 MPEG4 视频流。关键帧有些奇怪。vop_time_increment 字段之前应该有一个 1 位（“标记”），但关键帧都有一个 0 使它们无效。那是小问题。

主要问题是流没有 VOL 标头。这就是 MPEG4 存储有关视频的基本信息的地方，例如宽度、高度、滴答率、隔行标志……除了宽度和高度之外，所有这些东西都不见了，而且这些只包含在专有文件头中。

但是当你足够绝望的时候，你可以猜测所有的标志，然后编一个假的 VOL 标头。我从一个完全不相关的 MPEG4 视频中获取了 VOL 标头，将宽度和高度更改为 1280x720，并从您的相机中附加了 0 和 0x80 数据包。视频播放了！

有一些不完善之处。开始显示阻塞，最终清除。通常我会说这是一个流不是以关键帧开头的结果，但这个是这样的，所以我不知道为什么它是块状的。并且偶尔会出现不适当的亮度闪烁。考虑到 vop_time_increment 字段附近的语法错误，帧速率很差，这并不奇怪。好消息是画面整体非常清晰。

如果糟糕的 Windows 软件可以导出为任何标准格式，我们也许可以通过研究导出的文件头来稍微改进我们的假头。

这是我在解码这个东西时一起破解的工具。 `./streamget < camera.raw | mplayer -demuxer mpeg4es -`为我工作。

## mkvol：将 MPEG4 VOL 标头写入标准输出

```
#!/usr/bin/perl -W
use strict;

@ARGV==2 or die "Usage: $0 width height\n";

my $bits = '';
$bits .= '00000000000000000000000100000000'; # video_object_start_code(0)
$bits .= '00000000000000000000000100100000'; # video_object_layer_start_code(0)
$bits .= '0'; # random_accessible_vol
$bits .= '00010001'; # video_object_type: Advanced Simple Object
$bits .= '1'; # is_object_layer_identifier
$bits .= '0010'; # video_object_layer_verid: 2
$bits .= '000'; # video_object_layer_priority: 0
$bits .= '0001'; # pixel_aspect_ratio: square
$bits .= '0'; # vol_control_parameters
$bits .= '00'; # video_object_layer_shape: rectangular
$bits .= '1'; # marker
$bits .= sprintf '%016b', 30; # ticks_per_sec
$bits .= '1'; # marker
$bits .= '0'; # fixed_vop_rate
$bits .= '1'; # marker
$bits .= sprintf '%013b', $ARGV[0]; # width
$bits .= '1'; # marker
$bits .= sprintf '%013b', $ARGV[1]; # height
$bits .= '1'; # marker
$bits .= '0'; # interlaced
$bits .= '1'; # obmc_disable
$bits .= '00'; # sprite_enable: none # for verid!=1
#$bits .= '0'; # sprite_enable: none # for verid==1
$bits .= '0'; # not_8_bit
$bits .= '0'; # quant_type: second inverse quantization method
$bits .= '0'; # quarter_sample # for verid!=1
$bits .= '1'; # complexity_estimation_disable
$bits .= '1'; # resync_marker_disable
$bits .= '0'; # data_partitioned
$bits .= '0'; # newpred_enable # for verid!=1
$bits .= '0'; # reduced_resolution_vop_enable # for verid!=1
$bits .= '0'; # scalability
$bits .='0'; $bits .= '1' while length($bits)%8; # pad to byte
print pack "B*", $bits; 
```

## streamget：从摄像机中提取视频流并添加 VOL

```
#!/usr/bin/perl -W
use strict;

sub fullread;

@ARGV==0 || "@ARGV" eq 'secondary' or die "Usage: $0 [secondary] < camera.raw";

my @wanted = (0,0x80);
@wanted = (2,0x82) if @ARGV;

fullread(my $fileheader, 16, 1);
my ($version, $width, $height, $swidth, $sheight, @mysterystuff) =
  unpack "Nv4C4", $fileheader;
if(!@ARGV) {
  system("./mkvol $width $height");
} else {
  system("./mkvol $swidth $sheight");
}

while(fullread(my $buf, 16)) {
  my ($tag, $plen, $mystery1, $mystery1) = unpack "VVVV", $buf;
  fullread(my $pbuf, $plen, 1);
  if($tag ~~ @wanted) {
    # Uncomment to remove extra 0's between VOPs. They're harmless.
    #$pbuf =~ s/^\x00*(\x00\x00\x01)/$1/;

    # Uncomment this block to fix the bogus marker bits before
    # vop_time_increment. mplayer complains about them but plays the stream
    # anyway. Other players may need this fix.
    #if($pbuf =~ /^\x00\x00\x01\xb6/) {
    #  my $fixit = unpack "B*", substr($pbuf, 4, 32);
    #  $fixit =~ s/(..1*0)0/${1}1/;
    #  substr($pbuf, 4, 32) = pack "B*", $fixit;
    #}
    print $pbuf;
  }
}

# Return false if !$mandatory and EOF was seen immediately.
# Return true if the full amount was read.
# Otherwise die.
sub fullread
{
  my ($buf, $len, $mandatory) = @_;
  my $n = read(STDIN, $_[0], $len);
  if(!defined($n)) {
    die "stdin: $!\n";
  }
  if($n==0) {
    return 0 if !$mandatory;
    die "stdin: unexpected EOF\n"
  }
  if($n<$len) {
    die "stdin: unexpected EOF\n"
  }
  return 1;
} 
```

# java - 如何将 Java 类转换为 JarEntry？

> ID：11912458
> 
> 赞同：0
> 
> 时间：2012-08-11T06:17:16.547
> 
> 标签：java, jar

我读取了一个 jar 文件并加载类并更改了一些类。
然后我想将这些类保存到 Jar 文件中。
如何将 Java 类转换为 JarEntry 以保存到 jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:34:52.960

你想操纵字节码；研究[Apache BCEL](http://commons.apache.org/bcel/)或[ASM](http://asm.ow2.org/)之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:54:45.633

您可以使用 JarOutputStream 这里是一个示例[http://www.roseindia.net/tutorial/java/io/createJarFile.html](http://www.roseindia.net/tutorial/java/io/createJarFile.html)动态创建 jar 文件并将其与文件一起加载

# objective-c - 指针类，但尚未分配？

> ID：11912474
> 
> 赞同：0
> 
> 时间：2012-08-11T06:19:18.240
> 
> 标签：objective-c, memory, pointers, instance

我一直在回顾 Kochan 的优秀 Objc-C 书中的一些基本 Objective C 笔记，我注意到其中一个指针是从一个类创建的，但不是手动分配的代码，例如：

```
//...

int main (int argc, char *argv[])
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSNumber *myNumber, *floatNumber, *intNumber;
NSInteger *myInt; 

//integer value

intNumber = [NSNumber numberWithInteger: 100];
myInt = [intNumber integerValue];
NSLog (@"%li", (long) myInt);

//... 
```

请注意在没有“[[class allocate] init]”的情况下创建的所有实例，那么如何在不为它们分配内存的情况下创建指针呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:49:07.287

不知道您的困惑在哪里，我将从简单的*框*开始，通常称为*变量*，如果这太基本了，请道歉。

当你写：

```
NSInteger someNumber; 
```

您正在分配一个适合存储 an的*盒子*`NSINteger`，并要求通过名称引用该盒子`someNumber`- 该盒子还有另一个名称，通常称为其*地址*或*指针*。所以你已经为一个整数分配了空间。

同样，当你写：

```
NSNumber *intNumber; 
```

您正在分配一个适合存储的*框*`NSNumber *`- 这是指定您希望此框包含其他框的名称（地址）的方式 - 并要求此框由名称引用`intNumber`。所以你已经为指针分配了空间，你没有分配的是一个盒子，它存储一个`NSNumber`（注意 no `*`），你可以存储它的*名字*（或*地址*或*指针*`intNumber`） 。

现在这一行：

```
releasePool *pool = [[NSAutoreleasePool alloc] init]; 
```

做两件事。左边和前两个例子完全一样，它分配了一个盒子，给它一个方便的名字`pool`，这个盒子适合存放保存`NSAutoreleasePool`值的盒子的名字。

现在右边的大小是一个表达式，它使用 分配`alloc`一个适合保存`NSAutoreleasePool`值的盒子；`init`使用;将值放入该框中 然后返回框的*名称*。

最后，分配采用 RHS 返回的名称并将其放入 LHS 创建的框中。

因此，总体而言，该声明创建了*两个*框。

这让我们了解您的：

```
intNumber = [NSNumber numberWithInteger: 100]; 
```

此处 LHS 指定了一个已创建的框。RHS 是一个返回框名的表达式。RHS 方返回其名称的框是在哪里创建的？我们只能真正猜测（`numberWithInteger`当然，除非我们有来源），这没关系 - 盒子是由某人在某个时候创建​​的，表达式返回它的名称。分配将我们没有分配的盒子的名称放入我们分配的`intNumber`盒子中。这就是你需要知道的一切......

差不多吧。如果您使用的是 ARC 或 GC，您可以在此处停止。如果您使用的是 MRC，您需要知道是否使用`retain`该框，但这是另一个问题......

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:44:34.093

诸如为对象`[NSNumber numberWithInteger: 100]`分配内存的方法`NSNumber`。按照惯例，这种类方法等价于`[[[NSNumber alloc] initWithInteger: 100] autorelease]`. 与普通 alloc/init 习惯用法的不同之处在于它返回了一个您不拥有的对象。下次通过运行循环时，它将自动为您释放。请注意，仅当您不使用自动引用计数 (ARC) 时才会出现这种差异。在手动引用计数环境中，以这种方式创建临时对象通常非常方便，以便仅在您创建它们的例程中使用，而无需`release`稍后记住它们。[您可以在 Apple 的内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)中阅读更多关于 Objective C 内存管理的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:47:17.397

声明`NSInteger *myInt;`_`NSInteger myInt;`

# jsf - 如何找出 JSF 组件的组件族和渲染器类型

> ID：11912476
> 
> 赞同：4
> 
> 时间：2012-08-11T06:19:24.730
> 
> 标签：jsf, renderer

如何找出 JSF 组件的组件系列和（默认）渲染器类型？

当（覆盖自定义渲染器）使用以下注释时，这些信息是必需的：

```
@FacesRenderer(componentFamily="",rendererType="") 
```

我用谷歌搜索，浏览了 JSF 规范和 Ed Burn 的书，但找不到我想要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T12:08:59.560

以编程方式，您只需打印[`UIComponent#getFamily()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getFamily%28%29)和[`UIComponent#getRendererType()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getRendererType%28%29).

纪录片，你可以通过查看组件实现的 javadoc 找到它们。例如，`<h:inputText>`由[`HtmlInputText`](http://docs.oracle.com/javaee/6/api/javax/faces/component/html/HtmlInputText.html)类表示。可以在 javadoc 介绍性文本的最后一段中找到渲染器类型：

> 默认情况下，该`rendererType`属性必须设置为“ `javax.faces.Text`”。

可以通过检查`COMPONENT_FAMILY`常量字段值（继承自[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)）的值来找到组件族。单击[从类继承的字段`javax.faces.component.UIInput`-`COMPONENT_FAMILY`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#COMPONENT_FAMILY) -[常量字段值](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.component.UIInput.COMPONENT_FAMILY)

> `COMPONENT_FAMILY` " `javax.faces.Input`"

* * *

**与具体问题**无关：您***不能通过*`@FacesRenderer`注释覆盖默认的 JSF 渲染器。默认渲染器总是优先。这是设计使然，另请参阅[issue 1748](https://github.com/eclipse-ee4j/mojarra/issues/1752)。您确实需要以 JSF 1.x 的方式显式注册`<renderer>`它们`faces-config.xml`。**

 **```
<render-kit>
    <renderer>
        <component-family>javax.faces.Input</component-family>
        <renderer-type>javax.faces.Text</renderer-type>
        <renderer-class>com.example.CustomTextRenderer</renderer-class>
    </renderer>
</render-kit> 
```**

# java - 使用 emacs 进行 java 编程

> ID：11912477
> 
> 赞同：18
> 
> 时间：2012-08-11T06:19:29.553
> 
> 标签：java, emacs

有没有人在为 Java 开发配置 emacs 方面取得过任何成功？我安装了 cedet 和 malabar 模式，但无法成功使用它。是否值得花更多时间设置 emacs 或者我应该切换到 Eclipse？我是 Emacs 的长期用户。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T06:26:51.500

您可以尝试具有 Emacs 界面的[eclim 。](http://eclim.org/)它使用 Eclipse 作为后端为 Emacs 提供智能 Java 完成功能。这样您就可以在 Emacs 中拥有 Eclipse 的强大功能，而无需完全切换到它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T09:18:24.923

I've been using the Java Development Environment for Emacs for a decade now. You can get it at [http://jdee.sourceforge.net/](http://jdee.sourceforge.net/)

It was last updated in 2010, and it's definitely not as powerful as Eclipse, but if you're addicted to Emacs, it provides a lot of great features, including creation of code from templates.

The dependencies are also available for download from the same SourceForge site.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T09:45:47.860

实际上，Eclipse 是我所知道的唯一可以配置为使用类似 Emacs 的导航和键入的 IDE。但是这种支持太可怕了！Eclipse 缺少很多 Emacs 特性，所以这甚至不是正确映射的问题——很多东西没有实现（或者，也许，不可能实现）。此外，这种支持通常未经测试并且与可访问性热键重叠，即每当您尝试使用时，`M-g g`您可能会激活 GUI 中具有访问键 g 和下一个访问键 g 的某个按钮，再次类似`Alt`+ 调试**g**配置>>**配置**。最糟糕的是，这是不可预测的，因为访问键可能会根据布局而改变。

好的，我发明了上面的例子，但这是因为现实生活中的案例更多。然而，它们确实存在。此外，在 Eclipse 中，您必须经常使用鼠标。例如，没有它就不可能在其中的窗口之间切换。实际上，您甚至无法使用鼠标创建文件。

前段时间我尝试过 JDEE，但到目前为止，我可以理解，该项目不再积极开展工作。但是，Debian 提供了 jde 包，它可以加载并且似乎可以工作，它以 elc 文件的形式出现（无源）。我想使用更新的 CEDET（更新的 eioei 附带），但它们不能一起工作。我在配置或使用调试器时也遇到了问题——据我所知，它一直断开连接，也许无法使用较新的 JRE。我没有进一步研究它，但我经常使用某些东西，例如 Maven 和 Ant 构建 - 但是它们看起来有点过时，运行良好，不记得有任何问题。

我相信，如果有人修补 JDEE，那将是那些在 CEDET 工作的人。所以，在他们的邮件列表上询问项目的状态可能是有意义的，也许他们知道更多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-09T07:18:23.507

好的。这是一个非常古老的问题，但我想添加答案。

对于所有想要使用 emacs 键绑定但需要一个好的 IDE 进行 java 开发的人，请使用**Intellij**。我最近从 eclipse 搬到了 Intellij，而 Intellij 比 eclipse 好得多。它具有默认的 emacs 键绑定，其工作方式与 emacs 完全相同。您也可以在控制台和其他地方使用它！试试看。

**使用 emacs 键绑定进行 java 开发的最佳选择当然是 Intellij**

# ios - 以编程方式向 UITableView 添加导航栏

> ID：11912479
> 
> 赞同：0
> 
> 时间：2012-08-11T06:19:40.330
> 
> 标签：ios, uitableview, uinavigationbar

我是IOS新手..

我想要的是在 a 上有一个导航栏`UITableView`，我在里面创建`-(void) loadView`

我的代码是这样的......

```
(void)loadView {
    [super loadView];       

    CGRect  frame = CGRectMake(0, 0, 320, 480); //define size and position of view
    tableView1= [[UITableView alloc]initWithFrame:frame style:UITableViewStylePlain ];
    tableView1.editing=YES;
    tableView1.dataSource=self;
    tableView1.delegate=self;

    //navigationItem= [[UIBarButtonItem alloc]initWithTitle:@"Names" style:UIBarButtonItemStyleBordered target:self action:@selector(first:) ];
    //self.navigationItem.leftBarButtonItem=btnBarItem;

    [self.view addSubview:tableView1];
} 
```

我想要导航栏在我分配的表格视图上，以便我可以插入一个添加按钮..

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:49:04.790

[以编程方式将 NavigationBar 添加到 UITableViewController？](https://stackoverflow.com/questions/2700990/adding-a-navigationbar-to-uitableviewcontroller-programmatically)

首先检查一下，这是完全相同的问题。另外，@anka 是对的。只需将 UITableViewController 推送为 NavigationController 中的根视图。如果您不知道如何操作，请单击`Editor -> Embed in -> Navigation Controller`，这是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:41:00.157

因为您是 iOS 开发的新手，所以我不知道您是否熟悉 iOS 中的导航模式。

查看[Navigation Controllers](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2-SW1)的文档，然后您应该使用 a`UINavigationViewController`和 a `UITableViewController`。按下按钮，`UITableViewController`您`UINavigationViewController`的导航栏就在顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T10:17:50.117

只需输入此代码

必须删除它，因为它只会导致错误:)

**编辑 1**

抱歉错过理解。这是有效的解决方案。

您需要将 UINavigationController 作为 appDelegate 中的主容器，并将您的第一个 viewController 分配给它的根 viewController，就像我之前在代码中所做的那样

```
UINavigationController *ePicker = [[UINavigationController alloc] initWithRootViewController:firstViewController]; 
```

然后你会在你的tableview上看到导航栏

快乐编码:)

**编辑 2**

如果你只想要一个导航栏而不是一个 navigationViewController 那么就放这几行

```
UINavigationBar *navBar = [[UINavigationBar alloc]init];
    [self.view addSubview:navBar]; 
```

在 viewDidLoad 方法中，导航栏将显示在 tabelView 上方

快乐编码:)

# jquery - 如何隐藏从另一个域加载的 iframe 中元素的背景颜色？

> ID：11912482
> 
> 赞同：1
> 
> 时间：2012-08-11T06:20:20.253
> 
> 标签：jquery, html, css

由于同源策略，从父窗口访问 iframe 元素受到限制。是否有 CSS hack 或解决方法可以让我们隐藏背景颜色或至少让它看起来透明？

**编辑 ：**

iframe 有 id`ulBlock`并且它包含一个带有 id 的 div`listgroup`

```
#listgroup {
background: none repeat scroll 0 0 #F4F4F4;
border-color: #FDF6E5;
border-left: 1px solid #FDF6E5;
border-right: 1px solid #FDF6E5;
border-style: solid;
border-width: 1px;
margin: 0;
padding: 0;
}

#ulBlock {
height: 321px;
visibility: visible;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:19:40.670

`.contents()`显然，由于同源策略，如果 iframe 与主机位于不同的域中，则无法在 iframe 上运行 JavaScript 。所以我首先假设这`$("#ulBlock").contents()`是`null`或不可访问的。否则，您可以只`find()`使用所需的 div 并使用 jQuery 更改其 css。

您的问题是否存在 CSS 技巧的简短回答是否定的。虽然没有 CSS 技巧，但有几种方法可以完成您想要的：

*   刷新 iframe 并在[查询字符串](http://en.wikipedia.org/wiki/Query_string)中传递一些信息，以便在 iframe 中重新加载的页面知道隐藏或透明您所指的任何 div。

*   利用[CORS](http://www.w3.org/TR/cors/)。虽然一些较旧的浏览器仍然不支持它，而且我读到 CORS 被认为是一个轻微的安全漏洞，但它允许您访问 iframe 内容并运行脚本来更改 iframe 的内容。简而言之，它涉及包含一个名为`Access-Control-Allow`. 这可能值得一看。

*   *将浏览器消息传递*回来和第四。我认为 Daniel Park 在编写允许向 iframe 发送浏览器消息和从 iframe 发送浏览器消息的插件方面做得很好。大多数现代浏览器都支持此功能。访问他的网站：http: [//postmessage.freebaseapps.com/](http://postmessage.freebaseapps.com/)。向下滚动到它说示例的地方。他专门编写了该插件来使用 iframe。我在我们的一个商业应用程序中使用了他的代码。

请记住，在上述所有情况下，您都必须有权访问 iframe 的主机和正在嵌入的页面的源。

# objective-c - cocos2d中如何制作和正确更新进度条？

> ID：11912484
> 
> 赞同：6
> 
> 时间：2012-08-11T06:20:41.207
> 
> 标签：objective-c, cocos2d-iphone

我有一个游戏，它使用进度条来通知玩家玩家某些统计数据的级别。例如饥饿，当它从零开始并慢慢增加到最大栏时。当他吃东西时，饥饿感会减少。

我尝试实现为progressBar，但它工作错误，因为栏会双向扩展，我需要它只向一侧增长。我也很难设置标准，因为它使用动作。

有没有简单的方法来做到这一点？

我有一个类宠物，它有饥饿感（0-100）。我希望酒吧显示饥饿感。

```
hungerBar = [CCSprite spriteWithFile:@"redbar.png"];
    CCLabelTTF *hungerLabel = [CCLabelTTF labelWithString:@"Hunger:" fontName:@"Helvetica" fontSize:25];
    [hungerLabel setColor:ccc3(255, 255, 255)];

//    CGPoint temp = ccp(250, 300);
//    hungerBar.position = temp;
 //   [self addChild:hungerBar];
    CGPoint temp2 = ccp(250, 320);
    [hungerLabel setPosition:temp2];
    [self addChild:hungerLabel];

    CCSprite *bar = [CCSprite spriteWithFile:@"redbar.png"];
    powerBar= [CCProgressTimer progressWithSprite:bar];
    powerBar.type = kCCProgressTimerTypeBar;
    powerBar.position = ccp(-30, -10);
    powerBar.anchorPoint = ccp(0, 0);
    powerBar.percentage = 20; // (0 - 100)
    [hungerLabel addChild:powerBar]; 
```

添加源。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T07:19:12.487

在 cocos2d 2.0 之前，您应该可以只使用 CCProgressTimer 类型：*kCCProgressTimerTypeHorizo​​ntalBarLR*。

```
CCProgressTimer* powerBar= [CCProgressTimer progressWithFile:@"fullbar.png"];
powerBar.type = kCCProgressTimerTypeHorizontalBarLR;
powerBar.percentage = 0; // (0 - 100) 
```

要改变您的饥饿程度，只需设置条的*百分比*属性。

**编辑：**

好的，用cocos2d 2.0，好像没有这种类型了。要获得从左到右的条形图，您需要设置新的但有些令人困惑的*midpoint*和*barChangeRate*属性（[cocos2D 2.0 文档链接](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_progress_timer.html#a9244a39378508fe0da6436e7db1c3724)）：

```
CCProgressTimer* powerBar= [CCProgressTimer progressWithSprite:[CCSprite spriteWithFile:@"fullbar.png"]];
powerBar.type = kCCProgressTimerTypeBar;
powerBar.midpoint = ccp(0,0); // starts from left
powerBar.barChangeRate = ccp(1,0); // grow only in the "x"-horizontal direction
powerBar.percentage = 0; // (0 - 100) 
```

看看这些有没有帮助！

# windows-8 - WinJS 应用程序在挂起时仍在运行

> ID：11912498
> 
> 赞同：2
> 
> 时间：2012-08-11T06:23:30.330
> 
> 标签：windows-8, winjs

我有一个 WinJS 应用程序，其中包含一个计时器对象。我从 msdn 文档中了解到，我的应用程序将在用户导航到另一个应用程序 5 秒后暂停，之后我的应用程序将停止运行。

但是，在暂停状态下测试应用程序时，我注意到计时器一直在运行。我尝试通过以下方式暂停应用程序

1.  单击 VS2012 调试窗口中的“暂停”按钮，然后
2.  手动运行我的应用程序，导航到另一个应用程序并等待一段时间（10 分钟）使其暂停。

但在这两种情况下，计时器都会继续运行。我预计它会在暂停点停止并在恢复时同时恢复，但它正确显示了经过的时间。

如果有人能解释这种行为，我将不胜感激。我正在运行 Windows 8 Release Preview。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:30:38.277

当应用程序暂停时，所有计时器都会暂停。我刚刚用这段代码验证了它：

```
function timerFired() {
    var container = document.getElementById("timeroutput");
    var content = document.createElement("div");
    content.textContent = Date.now();

    container.appendChild(content);
}

setInterval(timerFired, 1000); 
```

当应用程序进入后台并暂停时（在暂停之前大约需要 15 秒），文本将停止附加。

注意：

*   在调试器下，应用程序*不会*自动暂停，您必须单击暂停按钮（正如您所说的那样）。
*   如果您在暂停后激活应用程序（例如单击它，或切换回它），如果它被暂停的*时间长于*定时器间隔，定时器将立即执行
*   如果您正确播放背景音频，那么您的计时器仍将运行，因为您在播放背景音频时**不会**暂停

# c#-4.0 - 通过 c# 中的通信器进行视频通话

> ID：11912499
> 
> 赞同：0
> 
> 时间：2012-08-11T06:23:35.443
> 
> 标签：c#-4.0

我是 c# 应用程序的新手。我想使用 c# 表单应用程序从办公室通信器进行视频通话。我听说过通信器 sdk 和 Lync。但不确定该选择什么。我能得到任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:32:40.133

Office Communicator 现在称为 Microsoft Lync。

要快速开始，您可以[下载 Lync SDK](http://www.microsoft.com/en-nz/download/details.aspx?id=18898)。

我认为这个[视频](http://channel9.msdn.com/Events/TechEd/Europe/2010/UNC306)也将帮助你开始。（无法为我加载，所以，请注意）

作为激励，请查看[Scott Hanselman](https://stackoverflow.com/users/6380/scott-hanselman) (Microsoft SVP)关于他如何设计的[博客](http://www.hanselman.com/blog/IntroducingLync2010SuperSimpleAutoAnswerVideoKioskWithFullScreen.aspx)`Super Simple Auto Answer Video Kiosk with Full Screen Capability`文章。

希望这可以帮助。

# java - 在不同的jvm实例中序列化和反序列化对象

> ID：11912500
> 
> 赞同：0
> 
> 时间：2012-08-11T06:23:37.517
> 
> 标签：java, serialization

我有疑问，我正在 java 中进行序列化如果我打开两个 JVM 实例，请告诉我，假设我在两个不同的位置打开了两个不同的 eclipse 工作空间，并且在一个工作空间中我创建了序列化程序具有 .ser 扩展名的文件中的对象并通过另一个工作区我创建了程序以通过读取该 .ser 文件来反序列化对象。

现在请告知该对象会在不同的 JVM 实例中反序列化吗？问题围绕着这样一个事实，即在同一 JVM 实例中对对象进行序列化和反序列化是强制性的……！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:28:36.297

序列化是我们可以将对象的状态存储到任何存储介质中的过程。我们可以将对象的状态存储到文件、数据库表等中。反序列化是序列化的相反过程，我们从存储介质中检索对象。

Eg1：假设您有一个 Java bean 对象并且它的变量有一些值。现在您想将此对象存储到文件或数据库表中。这可以使用序列化来实现。现在，您可以在需要时随时从文件或数据库中再次检索该对象。这可以使用反序列化来实现。

```
**Serialization Example:**

Employee e = new Employee();
      e.name = "Reyan Ali";
      e.address = "Phokka Kuan, Ambehta Peer";

          e.SSN = 11122333;
          e.number = 101;
          try
          {
             FileOutputStream fileOut =
             new FileOutputStream("employee.ser");
             ObjectOutputStream out =
                                new ObjectOutputStream(fileOut);
             out.writeObject(e);
             out.close();
              fileOut.close();
          }catch(IOException i)
          {
              i.printStackTrace();
          }

**Deserializing an Object:**
The following DeserializeDemo program deserializes the Employee object created in the SerializeDemo program. Study the program and try to determine its output:

Employee e = null;
         try
         {
            FileInputStream fileIn =
                          new FileInputStream("employee.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            e = (Employee) in.readObject();
            in.close();
            fileIn.close();
        }catch(IOException i)
        {
            i.printStackTrace();
            return;
        }catch(ClassNotFoundException c)
        {
            System.out.println(.Employee class not found.);
            c.printStackTrace();
            return;
        }
        System.out.println("Deserialized Employee...");
        System.out.println("Name: " + e.name);
        System.out.println("Address: " + e.address);
        System.out.println("SSN: " + e.SSN);
        System.out.println("Number: " + e.number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T08:24:07.253

[Java 序列化格式是标准化](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serialTOC.html)的。任何 JVM 都可以读写它。

字节流可能略有不同（例如，序列化程序可能以不同的顺序写入某些对象；如果您`int`在一个类中有两个字段，则它们的写入顺序无关紧要）。

但反序列化的结果将始终相同，除非您更改了存储在字节流中的类的 Java 代码。

# image-processing - 如何识别不直接相互分离的轮廓？

> ID：11912503
> 
> 赞同：4
> 
> 时间：2012-08-11T06:23:51.933
> 
> 标签：image-processing, opencv, javacv

请有人解释如何识别彼此不完全分开的方形轮廓。例如，我需要确定下图中的正方形数量以及它们边缘的 x,y 坐标。我尝试解决[这个](https://stackoverflow.com/questions/11093654/how-to-identify-square-or-rectangle-with-variable-lengths-and-width-by-using-jav)问题，但它对我不起作用。

![在此处输入图像描述](../Images/70e470676d308f0109fb91074ce12cd6.png)

所以请有人可以使用简单的代码示例来解释这一点。

这是我可以生成的图像，请您解释一下如何识别该图像中的上述方块。

![在此处输入图像描述](../Images/fb67d2604478540ec79881d8139f2b36.png)

所以请善意地解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T07:01:35.200

你必须使用事实，每个正方形的红色分量等于 255，并做阈值。这是我所做的：

1.  进行红色分割： ![在此处输入图像描述](../Images/dd49e5e8661ee2b1b78dfc9b89e03e2f.png)

2.  做扩张（去除洞）： ![在此处输入图像描述](../Images/75cd794cebfd98f0c74d6b508c28a409.png)

3.  （可选）检查每个轮廓是否为正方形。

代码：

```
Mat src = imread("input.png"), red;
extractChannel(src, red, 2);

threshold(red, red, 254, 255, THRESH_BINARY);

Mat element = getStructuringElement(MORPH_RECT, Size( 2, 2 ), Point( 1, 1 ));
dilate(red, red, element); 
```

# javascript - 如何在单击功能区中的按钮时调用 javascript 函数

> ID：11912506
> 
> 赞同：0
> 
> 时间：2012-08-11T06:24:10.153
> 
> 标签：javascript, html

我在功能区中有一个按钮。它有ID。

我试过了

```
var mybtn= document.getElementById('btnId');
mybtn.onclick=myfun;

function myfun()
{
 ---------
 ---------
} 
```

但它没有用。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:40:08.693

试试这个。

```
jQuery("#btnId").click(function(){

myfun();

});

function myfun()
{
    //Here is your code...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:44:30.657

1.  最简单的方法是将鼠标事件添加`onclick="myfun()"`到具有`id: "btnId"`
2.  通过使用 jQuery：

    `$("#btnId").click(function(){ //do the code here });`

# asp.net - Asp.net 本地化不适用于 MasterPage

> ID：11912510
> 
> 赞同：0
> 
> 时间：2012-08-11T06:25:07.937
> 
> 标签：asp.net, localization

我已经阅读了很多关于此的文章，但我做不到。当我的 aspx 页面没有母版页时，本地化工作正常。但是，当我的 aspx 页面带有母版页时，本地化不起作用。

aspx 页面代码

```
protected override void InitializeCulture()
{
    GeneralHelper.GeneralHelperC.SetCulture();
    String selectedLanguage = GeneralHelperC.GetCulture();
    UICulture = selectedLanguage;
    Culture = selectedLanguage;

    Thread.CurrentThread.CurrentCulture =
        CultureInfo.CreateSpecificCulture(selectedLanguage);
    Thread.CurrentThread.CurrentUICulture = new
        CultureInfo(selectedLanguage);

    base.InitializeCulture();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:44:02.020

其实看起来是我的错。在将资源文件名 Default.aspx.resx 更改为 Default.aspx.en.resx 之后，我使用“生成本地资源”创建了 resx 文件，但它看起来有问题。无法更改为默认名称。

# facebook - CSRF 状态令牌与提供的不匹配

> ID：11912515
> 
> 赞同：0
> 
> 时间：2012-08-11T06:26:17.237
> 
> 标签：facebook, facebook-graph-api, csrf

使用此代码获取服务器错误日志.. 并且此代码只给了我 81 个朋友，但我的朋友列表中有 87 个朋友..

给我一个建议。。

```
 <?php

     require_once('facebook-php-sdk/src/facebook.php');

     $config = array('appId' => 'Your app id','secret' => 'Your app secret',);     

      $facebook = new Facebook($config);

      $user_id = $facebook->getUser();

        if($user_id) {

          // We have a user ID, so probably a logged in user.
          // If not, we'll get an exception, which we handle below.
                try {
                $access_token = $facebook->getAccessToken();

                $usrFrnd_data = array();
                $offset = 0;
                $limit = 5000;  

                //fetch events from Facebook API

                $user  = null;      

                $c = curl_init();
                curl_setopt($c, CURLOPT_URL, "https://graph.facebook.com/me/friends/?limit=$limit&offset=$offset&access_token=".$access_token);
                curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
                curl_setopt($c, CURLOPT_SSL_VERIFYHOST, false);
                $user = json_decode(curl_exec($c));
                curl_close($c);
                $tmpVar = object2Array($user);
                $usrFrnd_data = array_merge($usrFrnd_data, $tmpVar["data"]);

                //loop through pages to return all results

                while(array_key_exists("next", $tmpVar["paging"])) {

                    $offset += $limit;
                    $c = curl_init();
                    curl_setopt($c, CURLOPT_URL, "https://graph.facebook.com/me/friends/?limit=$limit&offset=$offset&access_token=".$access_token);
                    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
                    curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
                    curl_setopt($c, CURLOPT_SSL_VERIFYHOST, false);
                    $user = json_decode(curl_exec($c));
                    curl_close($c);

                    $tmpVar = object2Array($user);
                    // make sure we do not merge with an empty array
                    if (count($tmpVar["data"]) > 0){
                        $usrFrnd_data = array_merge($usrFrnd_data, $tmpVar["data"]);
                    } else {
                        // if the user entry is empty, we have reached the end, exit the while loop
                        break;
                    }
                }

                echo "<pre>";
                print_r($usrFrnd_data);

            }catch(FacebookApiException $e) {
                // If the user is logged out, you can have a 
                // user ID even though the access token is invalid.
                // In this case, we'll get an exception, so we'll
                // just ask the user to login again here.
                $login_url = $facebook->getLoginUrl(); 
                echo 'Please <a href="' . $login_url . '">login.</a>';
                error_log($e->getType());
                error_log($e->getMessage());
            }   
        } else {
          // No user, so print a link for the user to login
          $login_url = $facebook->getLoginUrl();
          echo 'Please <a href="' . $login_url . '">login.</a>';
        }

        function object2Array($d){
            if (is_object($d)){
                $d = get_object_vars($d);
            }

            if (is_array($d))
            {
                return array_map(__FUNCTION__, $d);
            }
            else
            { 
                return $d;
            }
        }   
      ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:47:07.500

不确定这是否有帮助。

我认为您需要先在 getloginurl() 过程中向用户询问扩展权限以获取朋友数据。通常facebook只会在正常许可下给你基本信息。

# algorithm - 重新排列红色、蓝色和绿色球的阵列

> ID：11912520
> 
> 赞同：6
> 
> 时间：2012-08-11T06:26:49.393
> 
> 标签：algorithm, sorting

在我的一次采访中，面试官问我 - 一些大小的数组包含随机混合的红色、蓝色和绿色球。像 RGBBBRRGGG，其中 RGB 代表红色、绿色和蓝色。

以RRRRGGGGBBBB 之类的数组结束的最佳方式是什么，即所有R、所有G 和所有B 一起。

我建议将所有红色、蓝色、绿色转换为它们的 ASCII 值，然后在其上运行最有效的排序算法。但他不为所动。这个问题还有其他更有效的解决方案吗？具有最低的空间和时间复杂度 ?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T06:31:30.240

只需遍历数组并分别计算 和 的出现`R`次数。然后，输出字符串。线性时间。`G``B`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-11T08:05:25.160

面试官可能想知道你是否熟悉[荷兰国旗问题](http://en.wikipedia.org/wiki/Dutch_national_flag_problem)。它有一个简单的线性解决方案。`C++`维基百科页面上有`Java`示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:33:22.213

**编辑**我可能误解了你的问题

您希望将 RGB 值转换为 HSL 值。然后，您将知道色调会告诉您它最接近的颜色，从而确定它属于哪个 R/G/B 部分。然后您可以更进一步，考虑色调、饱和度和照明来确定它们的确切顺序彼此之间，相对于整个阵列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T06:33:53.127

此外，如果您可以像“4R4G4B”那样保存，则可以有效地保存它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-11T19:14:33.557

这个问题很容易在线性时间内完成。为了进一步改进算法，您可以创建一个计数器数组 int[3]，并让 counter[0]、counter[1] 和 counter[2] 分别计算红色、绿色和蓝色。因此，您只需遍历数组一次。

另一个最小化空间复杂度的解决方案是使用 3 个指针：current、rg 和 gb。指针 current 表示您当前正在查看的数组位置， rg 和 gb 分别是 red / green 和 green / blue 之间的边界。初始化 current = 0，rg = -1，gb = n，其中 n = A 的大小。

而 gb>current - 如果 A[i] == R，将 rg 向右移动 1，并将 current 替换为 rg - 否则，如果 A[i] == blue，将 fb 向左移动 1，将 current 替换为 gb - 否则，什么都不做

空间复杂度 = O(n)，因为您没有使用任何额外的数组时间复杂度 = O(n)，每个元素最多交换一次

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-11T12:49:06.397

## Python 解决方案

```
input = [1, 0, 2, 2, 1, 0, 1, 2, 0, 0, 2, 1, 2, 0, 0]

output = []
for i in input:
    if i == 0:
        output.insert(0, i)
    elif i == 2:
        output.append(i)
    else:
        if output.count(2) > 0:
            index = output.insert(output.index(2), i)
        else:
            output.append(i)

print(output) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-03T16:07:58.590

此解决方案需要 O(n)：

```
def sort_Colors(arr):
    first = 0
    mid = 0
    last = len(arr)-1
    while mid <= last:
        if arr[mid] == 0:
            arr[first] , arr[mid] = arr[mid], arr[first]
            first += 1
            mid += 1
        elif arr[mid] == 1:
            mid += 1
        else:
            arr[mid], arr[last] = arr[last], arr[mid]
            last -= 1
    return arr 
```

输入 = [1, 2, 0, 1, 0, 1, 2, 0, 0, 0, 0]

输出 = [0, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2]

# mysql - SQL 模式创建（头脑风暴帮助？）

> ID：11912523
> 
> 赞同：0
> 
> 时间：2012-08-11T06:27:36.400
> 
> 标签：mysql, sql, postgresql, database-schema

我试图找出我的 SQL 数据库的表/字段的最佳组织。

让我解释一下产品的功能。我的组织每周安排 5 天的志愿者服务，每天的不同时间。我正在制作一个程序，允许用户登录，选择志愿服务的日期/时间，并在选定的时间注册成为志愿者。用户将选择他们携带的志愿者数量以及他们携带的汽车数量。每次志愿者郊游至少有 2 辆车和 3 人。用户必须在批准的列表中。

我不知道如何最好地组织所有这些数据。我无法在用户表中添加汽车编号和他们带来的志愿者数量的字段，因为这可能会根据他们注册的日期而改变。

我目前的想法（坏）：

义工郊游表

```
- DateTime time
- Array of userIds (will be used to access CarVolunteerInfo) 
```

用户表

```
- int userId
- varchar email
- varchar pass 
```

CarVolunteer信息表

```
- DateTime time
- int userId
- int car #
- int volunteer # 
```

多人可以报名参加一次郊游，我希望能够看到谁报名参加了每次郊游以及他们带来了什么。此外，我希望能够运行报告以查看他们注册的所有过去和未来的郊游。

如果这个问题太模糊或太理论，我很抱歉。我很高兴应您的要求改进我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:04:32.000

三个经验法则：

1.  把它分解成简单的元素
2.  从用户的角度检查示例工作流程
3.  确保您没有重复信息

所以 - 我们显然有这样的东西：用户，郊游，车辆，也许还有项目（对于多次郊游正在进行的事情）。然后，您将拥有链接表（参加者 = 郊游、用户等）。

然后你进入细节。这些车辆 - 是否由一位用户负责携带？它们有多大？我们是否需要确保有足够的座位供 # 名用户参加？我们是否关心每辆车上都有谁？

最后，确保您没有重复信息。可以从他的用户 ID 中查找 Dave 的名字，并且他的车中的座位数量可能不会因外出而改变（直到他换车......哎呀 - 将其添加到工作流程中）。

您的样本在初稿中看起来不错，只是希望通过该过程对其进行几次改进。哦 - 如果可能的话，有一些脚本：

1.  生成表定义
2.  添加一些测试数据
3.  对数据库运行基本测试

这会有很多帮助。如果您使用的是 PostgreSQL，像[pgtap这样的东西可以帮助测试。](http://pgtap.org/)

# jquery - 如何通过c#在jquery json中加载arraylist

> ID：11912525
> 
> 赞同：2
> 
> 时间：2012-08-11T06:28:12.230
> 
> 标签：jquery

我正在尝试通过 jquery 自动完成组合框的 jquery/json ajax 方法从数据表中加载数据，但它不起作用这是我的代码：

我的脚本：

```
<script type='text/javascript'>//<![CDATA[ 
 $(function() {
    // filter
    $.widget("ui.combobox", {
        _create: function() {
            var self = this,
                select = this.element.hide(),
                selected = select.children(":selected"),
                value = selected.val() ? selected.text() : "";
            var input = this.input = $("<input>").insertAfter(select).val(value).autocomplete({
                delay: 0,
                minLength: 0,
                source: function(request, response) {
                    $.ajax({
                        url: "InventoryDetails_new.aspx/BindHostDetails('SIU')",
                        type: "POST",
                        dataType: "jsonp",
                        data: {
                            featureClass: "P",
                            style: "full",
                            maxRows: 12,
                            name_startsWith: request.term
                        },
                        success: function(data) {
                            response($.map(data.geonames, function(item) {
                                return {
                                    label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                                    value: item.name
                                }
                            }));
                        }
                    })
                },
                select: function(event, ui) {

                },

            }).addClass("ui-widget ui-widget-content ui-corner-left");

            input.data("autocomplete")._renderItem = function(ul, item) {
                return $("<li></li>").data("item.autocomplete", item).append("<a>" + item.label + "</a>").appendTo(ul);
            };

            this.button = $("<button type='button'>&nbsp;</button>").attr("tabIndex", -1).attr("title", "Show All Items").insertAfter(input).button({
                icons: {
                    primary: "ui-icon-triangle-1-s"
                },
                text: false
            }).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function() {
                // close if already visible
                if (input.autocomplete("widget").is(":visible")) {
                    input.autocomplete("close");
                    return;
                }

                // work around a bug (likely same cause as #5265)
                $(this).blur();

                // pass empty string as value to search for, displaying all results
                input.autocomplete("search", "");
                input.focus();
            });
        },

        destroy: function() {
            this.input.remove();
            this.button.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });

    $("#cbCity").combobox({
        source: "InventoryDetails_new.aspx/BindHostDetails('SIU')",
        dataType: "jsonp",
        minLength: 2,
        select: function(event, ui) {
            log(ui.item ? "Selected: " + ui.item.value + " aka " + ui.item.id : "Nothing selected, input was " + this.value);
        }

    });
}); //]]> 
</script> 
```

```
 [WebMethod]
    public ArrayList BindHostDetails(string strStockCategory)
    {
        string strSql = "";
        if (strStockCategory == "SIU")
        {
            strSql = "select distinct(nvrHostName) from tblInventoryDetails where  intStatus =1  and nvrStockCategory = '" + strStockCategory.ToString() + "'";
        }
        else
        {
            strSql = "select distinct(nvrHostName) from tblInventoryDetails where  intStatus = 0  and nvrStockCategory = '" + strStockCategory.ToString() + "'";
        }
        DataTable objDT = new DataTable();
        objDT = objDataLayer.GetDataStoreInTable(strSql);
        DataSet ds = new DataSet();
        ds.Tables.Add(objDT);
        ArrayList arrlst = new ArrayList();
        foreach (DataRow row in ds.Tables[0].Rows)
        {
            arrlst.Add(row);
        }
        return arrlst;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:51:54.090

您使用错误的方式调用 webmwthod。它可以帮助你

[在 ajax 工具包模式弹出扩展器上回发](https://stackoverflow.com/questions/11756923/doing-post-back-on-an-ajax-toolkit-modal-popup-extender/11757238#11757238)

# css - CSS：具有 3 列的布局和带有浮动元素的主要内容

> ID：11912530
> 
> 赞同：1
> 
> 时间：2012-08-11T06:28:35.853
> 
> 标签：css, layout, css-float

我希望这个[小提琴](http://jsfiddle.net/klodenet/b3NS7/2/)可以解释我想要什么。当我有一个 3 列的布局（一左一右，最后一列在中心（CSS 上没有设置浮点数）时，布局是完美的！但是，如果我想在 CSS 中设置浮点数在中心空间中添加一些元素，如果我设置一个“clear:left;”，我会在左列内容的末尾得到新元素......这是令人讨厌的结果！

但是，如果您看到我的小提琴，您可以更好地理解我想要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:05:07.120

如果我理解正确，你不能在中心添加元素`clear:left;`，没有理由这样做。给所有元素，`display: inline-block;vertical-align:top;`然后像这样设置你的html。它们将是一个左、一个右和最后一个在中心，以及一个不需要的元素。

```
<div class="width:200px;/* you can set if you want */">fist elem</div>
<div>content</div>
<div>some elements</div>
<div class="width:200px;/* you can set if you want */">last elem</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:57:33.620

确保小心使用宽度、最小宽度、最大宽度 css 属性，并非常小心使用 position:relative 和 display:block。

在使用上述 css 属性后，在最后使用边距，不要在没有**BORDERS**的css 中工作如果您不为元素添加边框，请查看设计从哪里开始中断。

使用浮动时要记住的另一点是，确保浮动元素具有相同的高度，因为

```
|  |
|  |    | | 
```

当这些 div 中的每一个（左一个高度为 100 像素，右一个高度为 50 像素）向右浮动时，会导致右 div 低于左 div。

# android - 从 android 手机到 vlc 流媒体服务器的实时视频流，最后到终端客户端，例如。网络浏览器

> ID：11912532
> 
> 赞同：0
> 
> 时间：2012-08-11T06:28:41.857
> 
> 标签：android, iis, vlc, live-streaming, smooth-streaming

我想**从安卓手机进行直播**。我创建了移动部分并能够以字节格式将视频数据发送到服务器。

在服务器端，我可以阅读它，但想使用 vlc 服务器广播它以结束客户端浏览器。

我能够为屏幕捕获器配置**vlc 流**，并能够使用 ogg/thoera 格式在浏览器中显示。

我坚持将接收到的字节作为输入流链接到 vlc。

如果您能提出其他适当的方法来实现同样的目标，我将不胜感激。

我怎样才能将相同的蒸汽流到 IIS Live 视频平滑流**发布点**。

谢谢，
**希瓦姆**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T05:56:34.977

也许你应该试试这个 Android 应用 [http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/)

# c# - 如何控制线程？

> ID：11912535
> 
> 赞同：1
> 
> 时间：2012-08-11T06:28:57.793
> 
> 标签：c#, multithreading, visual-studio-2010

该程序是一个消息海报应用程序，可以将行发布到站点，因为它应该很快，所以我不得不使用多线程。但问题是线程数可以从 10 到 100，所以如果线程数很高2 个线程占用同一行的可能性成为可能。我怎样才能避免它？我只是想看看用相同 ID 发布的最多 11 行，这是不可能的，除了我上面假设的......

我采取行的方式如下：

1- 从数据库创建数据集....

2-创建计数器，rowCounter = 0

```
 while (rowCounter < allPostingRows.Tables[0].Rows.Count)
            {

           //  Take rows, and increment rowcounter++
           //  Takes row according to row counter....
          //   get the value from the fields in dataset and run the function:
               postFunction(userName, pass, postUrl, rowCounter, worker, postTitle, postText, postTxtSnippet, groupID, dbID, postON, groupName, groupUrl);
             } 
```

因此，如果在开始时我说 100 个线程来运行它，则 100 个线程进入此代码，每个线程占用一行并发布，当一个线程发布并且空闲时，检查`rowcounter`, 并占用另一行。

所以我正在使用上述逻辑为线程提供不同的行。这种方法是否不好，因为我想不出任何其他方法！还假设多个线程占用相同的行，我该如何解决？

> 更新

我能想到的一种解决方案是在所有工作完成后随机延迟，线程去获取可能有帮助的新行？

> 用户回答后更新如下：

所以我的代码应该是这样的：

```
private Object thisLock = new Object();

   lock (thisLock)
            {
    while (rowCounter < allPostingRows.Tables[0].Rows.Count)
            {

           //  Take rows, and increment rowcounter++
           //  Takes row according to row counter....
          //   get the value from the fields in dataset and run the function:
               postFunction(userName, pass, postUrl, rowCounter, worker, postTitle, postText, postTxtSnippet, groupID, dbID, postON, groupName, groupUrl);
             }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:40:07.933

是的，这种方法“不好”，您将遇到您描述的有问题的线程情况。事实上，您可以让所有 100 个线程在递增计数器之前获得相同的行。

> 我能想到的一种解决方案是在所有工作完成后随机延迟，线程去获取可能有帮助的新行？

不要批评，但你认为这是一个解决方案吗？我建议您[阅读](http://msdn.microsoft.com/en-us/library/hyz69czz%28v=vs.110%29.aspx)C# 文档中的线程和同步，以更加熟悉这些主题。

这里有几个建议。

1）反转工作流程。与其先创建线程，然后让它们来获取数据，不如让主进程在创建线程时将工作分配给线程。这样，线程在尝试访问共享资源时永远不会发生冲突，它们在完成时可能会死掉，并且可以在那时创建新的。

2) 如果 #1 对您不起作用，那么您需要将上面代码中的 while 循环视为“关键部分”，并将其放在[锁定块内。](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx) 这将确保只有一个线程在给定时间获取一行并递增计数器。但是，根据线程工作的速度，这可能会降低进程的效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:42:03.590

很明显，2 个或更多线程读取同一行的可能性；但是，我确信您可以使用锁定机制来保护关键部分。此外，ADO.NET 将支持[异步任务](http://msdn.microsoft.com/en-us/library/hh211418%28v=vs.110%29.aspx)以提高性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:21:52.843

正如 LB 指出的那样，我认为这`Parallel.ForEach`是你最好的选择。

有些事情要注意*为什么*以及如何确保你不滥用 ForEach。

执行线程使用特定的 CPU 或核心。Windows 支持任意数量的执行线程。线程数可以远远超过内核数。如果每个线程都不是 CPU 绑定的，这通常不是问题，因为通常有很多马力可以解决。CPU Bound 线程基本上是利用 100% 的核心运行。每次 Windows 从一个线程中取出一个核心以让另一个线程运行时，称为上下文切换。上下文切换非常耗时，它必须暂停一个线程，为当前线程保存所有寄存器和其他状态信息，为另一个线程加载保存的寄存器和状态信息，然后启动另一个线程。据说这本身需要多达 1000 个周期。当线程不受 CPU 限制时，上下文切换的可能性较小；但是，即使它确实发生了，通常也有很多 CPU 周期来处理它。当您有多个 CPU 绑定线程时，它们会使用所有可以使用的周期。当您开始仅仅为了在线程之间切换而取消周期时，您可能会开始注意到实际花费的时间更长。如果你的 CPU Bound 线程多于核心（即你想一次运行“100”个线程），你实际上会采取**如果您按顺序而不是并行运行所有工作，则可以有**更多时间来执行相同数量的工作。****

 **`Parallel.ForEach`自动执行此操作。它知道拥有比内核更多的 CPU 绑定线程是一件坏事，并且只会启动与它认为合适的数量一样多的线程来执行并行工作。（通常基于核心数；但是，它对 TPL 中的其他内容有更好的了解，因此它可能具有其他使用标准）。您*可以*强制 ForEach 使用特定数量的线程，但您将违背并行性的目的*并*降低性能。

如果您有 4 个内核（甚至 8 个内核）并且运行 100 个 CPU 绑定线程，则用于上下文切换的 CPU 时间量将是巨大的，并且可能会使系统陷入几乎无法使用的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T16:07:15.130

同意其他评论者关于使用更智能的分区，例如 Parallel.ForEachr 提供的分区。但是，如果您仍想使用您的代码，请考虑将计数器增量放在关键区域内，或使用 CAS 增量。在 while 循环内部而不是外部执行它。例如：

```
while (rowCounter < allPostingRows.Tables[0].Rows.Count)
                {
                    Interlocked.Increment(ref rowCounter);
                    //  Take rows, and increment rowcounter++            
                    //  Takes row according to row counter....           
                    //   get the value from the fields in dataset and run the function:                
                    postFunction(userName, pass, postUrl, rowCounter, worker, postTitle, postText, postTxtSnippet, groupID, dbID, postON, groupName, groupUrl);              
                } 
```**

# java - Java计算问题

> ID：11912538
> 
> 赞同：-3
> 
> 时间：2012-08-11T06:29:44.580
> 
> 标签：java

我被困在下面描述的问题上

假设我们有一个类似 的字符串`42932-5`，它有 6 个数字

我想计算**总和**为

```
4*6+2*5+9*4+3*3+2*2 
```

我们如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:40:22.233

以与数学和几乎任何其他语言相同的方式计算它

```
4*10000 + 2*1000 + 9*100 + 3*10 + 2*1 - 5*1 
```

适用于 Fortran、C、C++、C#、Scala 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:41:09.177

好吧，首先，如果您要求总和，则没有理由将其设为 String ... )，以便自己访问整数的最右边的数字。之后，将整数除以 10 以删除最右边的数字，然后再次使用 % 运算符以访问下一个数字。如果您将这个想法放入一个循环中并进行一些小的修改，它应该完全符合您的要求。

基本上，您尝试将每个数字分别添加到总数中。在您的情况下，您希望将每个数字乘以另一个数字，然后再将其添加到总数中。应该不难弄清楚。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:54:27.297

我不能说这很有效，我敢肯定有更好的方法来解决它，但是干草，这很有趣：P

您需要做的第一件事是丢弃不需要的`String`部分

```
int sum = 0;
String test = "42932-5";
List<Integer> listValues = new ArrayList<Integer>(test.length());
for (int index = 0; index < test.length(); index++) {

    char value = test.charAt(index);
    if (Character.isDigit(value)) {

        listValues.add(Integer.parseInt(Character.toString(value)));

    }

} 
```

现在，您可以使用 a`StringBuilder`而不是 a `List`，但这就是我的想法。

接下来，您需要对它们求和

```
for (int index = 0; index < listValues.size(); index++) {

    sum += (listValues.get(index) * (test.length() - index - 1));

} 
```

最后我得到了类似的东西

```
(4 * 6) + (2 * 5) + (9 * 4) + (3 * 3) + (2 * 2) + (5 * 1)
= 88 
```

# arrays - 无法从 C 中的大型数组打印数据？

> ID：11912540
> 
> 赞同：-1
> 
> 时间：2012-08-11T06:30:07.643
> 
> 标签：arrays

我在 Visual express 2010 中工作，在我的练习项目中，我有一个六列和大约 1350 行的数组。这个想法是检查数组中重复出现的数字并打印整行。当我尝试阅读和打印它时，我认为它只检查前五行。它不会识别出现在这五行之后的数字。请帮助我，我在这里添加了一个用于验证的行数较少的代码。

```
#include <stdio.h>
#include <conio.h>
#include <malloc.h>

unsigned const int arr[][6];

void main()
{
    unsigned int flag = 0;

    unsigned int i,j,col=5,row=5,input,k;
    printf("\nPlease enter the number to be checked: \n");
    scanf("%d",&input);

    for(i=0;i<=row;i++)
    {
    for(j=0;j<=col;j++)
    {
        if(input==arr[i][j])
        {
            flag = 1;
            for(k=0;k<=col;k++)
            printf("%d \t",arr[i][k]);
            printf("\n");
            //break;
        }
    }//if(flag==1)
        //break;
    }

    if(flag==0)
            printf("oops...\n");
    else
        flag=0;

        getch();
}

unsigned int arr[][6]={ 
                        9,  16, 22, 33, 4,  37, 
                        4,  12, 27, 28, 29, 30, 
                        7,  15, 19, 21, 25, 41, 
                        8,  18, 19, 25, 26, 29, 
                        5,  7,  10, 26, 29, 32, 
                        2,  4,  7,  19, 25, 27, 
                        2,  10, 14, 22, 23, 34, 
                        1,  8,  16, 31, 40, 43,
                        3,  8,  15, 16, 23, 25,
                        5,  24, 31, 36, 40, 44,
                        3,  9,  20, 29, 36, 44,
                        18, 21, 24, 25, 26, 44,
                        2,  8,  12, 15, 22, 35,
                        4,  9,  28, 32, 35, 39,
                        18, 19, 20, 29, 32, 40,
                        14, 16, 29, 41, 42, 43,
                        2,  6,  27, 35, 41, 44,
                        7,  9,  11, 20, 28, 36,
                        10, 16, 22, 23, 27, 37,
                        8,  10, 14, 29, 35, 38,
                        2,  10, 18, 27, 28, 36,
                        2,  11, 17, 29, 32, 40,
                        4,  7,  17, 23, 33, 37,
                        7,  26, 29, 31, 33, 38,
                        2,  8,  18, 33, 35, 41,
                        1,  5,  14, 36, 41, 44,
                        9,  12, 17, 24, 30, 44,
                        8,  12, 16, 33, 38, 40,
                        4,  6,  12, 13, 25, 32,
                        7,  15, 31, 32, 38, 43,
                        9,  14, 15, 18, 19, 25,
                        7,  11, 21, 32, 40, 45,
                        2,  3,  29, 30, 35, 43,
                        1,  4,  14, 16, 30, 45,
                        18, 19, 20, 28, 33, 36,
                        1,  12, 18, 20, 26, 42,
                        1,  6,  8,  30, 32, 41,
                        1,  2,  12, 15, 38, 39,
                        11, 23, 31, 33, 40, 42,
                        3,  8,  13, 17, 31, 39,
                        23, 33, 34, 37, 38, 39,
                        1,  6,  8,  27, 33, 39,
                        7,  22, 23, 35, 37, 45,
                        12, 14, 24, 32, 37, 40,
                        4,  6,  7,  25, 29, 42,
                        2,  11, 15, 19, 27, 31,
                        6,  11, 20, 31, 35, 44,
                        3,  12, 26, 33, 41, 44,
                        7,  9,  14, 20, 35, 41,
                        13, 16, 19, 40, 41, 44,
                        17, 23, 25, 36, 39, 43,
                        7,  10, 11, 16, 32, 33,
                        4,  16, 17, 27, 41, 42,
                        12, 13, 18, 34, 40, 45,
                        26, 29, 38, 41, 43, 44,
                        9,  12, 24, 25, 26, 43,
                        1,  2,  16, 24, 32, 38,
                        23, 26, 27, 36, 38, 44,
                        19, 21, 25, 27, 42, 45,
                        5,  10, 21, 22, 25, 27,
                        8,  19, 21, 31, 33, 42,
                        5,  7,  8,  13, 39, 45,
                        2,  10, 11, 14, 43, 44,
                        3,  8,  9,  24, 31, 39,
                        2,  3,  17, 26, 29, 44,
                        10, 14, 27, 28, 41, 43,
                        9,  21, 25, 27, 34, 37,
                        10, 17, 25, 27, 41, 42,
                        11, 12, 15, 25, 34, 35,
                        13, 26, 38, 41, 43, 44,
                        17, 20, 25, 30, 32, 40,
                        1,  2,  8,  12, 16, 20,
                        1,  12, 13, 34, 36, 39,
                        29, 32, 34, 37, 41, 42,
                        19, 20, 23, 31, 35, 36,
                        4,  6,  8,  12, 17, 18,
                        4,  11, 12, 18, 19, 23,
                        6,  8,  14, 15, 19, 44,
                        3,  11, 14, 22, 32, 40,
                        13, 21, 25, 31, 41, 42,
                        7,  10, 16, 17, 26, 28,
                        6,  7,  8,  11, 21, 29,
                        3,  8,  27, 33, 34, 38,
                        5,  11, 15, 18, 36, 42,
                        4,  10, 15, 19, 24, 34,
                        3,  6,  12, 28, 41, 42,
                        3,  8,  26, 27, 36, 42,
                        5,  9,  15, 24, 30, 44,
                        2,  5,  22, 25, 37, 43,
                        3,  10, 16, 26, 28, 31,
                        8,  9,  21, 23, 35, 44,
                        7,  10, 16, 20, 22, 42,
                        2,  6,  8,  11, 37, 40,
                        6,  14, 16, 26, 33, 45,
                        2,  5,  6,  20, 22, 40,
                        2,  3,  7,  15, 16, 26,
                        5,  6,  7,  22, 26, 34,
                        3,  18, 31, 36, 39, 44,
                        9,  22, 25, 26, 31, 35,
                        1,  18, 20, 37, 42, 43,
                        2,  3,  5,  24, 25, 42,
                        6,  15, 22, 33, 35, 45,
                        4,  18, 21, 30, 32, 33,
                        20, 27, 33, 34, 38, 41,
                        15, 20, 22, 25, 40, 43,
                        3,  22, 26, 31, 36, 40,
                        26, 33, 35, 40, 41, 45,
                        21, 26, 32, 36, 42, 43,
                        5,  13, 21, 31, 38, 45,
                        3,  9,  20, 28, 29, 32,
                        10, 20, 21, 23, 25, 38,
                        11, 13, 16, 19, 24, 43,
                        1,  5,  9,  18, 33, 34,

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:45:11.643

只需将行变量大小修改为该数组中的总行数，而不是 5，然后循环可以扫描您的总数组，然后它会打印您的答案。

我希望你能得到这个。

问候 [c-codeWorld](http://www.ccodeworld.blogspot.com)

# java - 方法函数的数组

> ID：11912543
> 
> 赞同：2
> 
> 时间：2012-08-11T06:30:57.090
> 
> 标签：java, android

是否可以将函数存储在java中的数组中？比如说..

```
public void getMyname(){

// do something here;

}

public void getLastname(){

//do something here;
}

Array arr = {getLastName,getMyname}; 
```

像那样？如果是这样，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:42:02.040

嗯，你可以这样做..

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String[] arrwow = {wow(),wow2()};
    Toast.makeText(this, arrwow[1], Toast.LENGTH_SHORT).show();

}

public String wow(){

    String wow = "wow";
    return wow;
}
public String wow2(){
    String wow2 = "wow2";
    return wow2;
} 
```

对我有用.. ^_^ 祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:34:15.860

您不能在 Java 中将方法存储在数组中，因为方法不是 Java 中的一等对象。这是一些人更喜欢使用 Python、Scheme 等其他语言的原因。

解决方法是创建一个包含一个方法的接口，然后创建四个实现该接口的类 - MoveRight、MoveLeft 等......类。然后，您可以将这些类的实例存储在数组中并以相同的方式调用它们。

```
public enum Level1 implements Explorable{
    ROOM1 {
        public void explore() {
            // fight monster
        }
    }, ROOM2 {
        public void explore() {
            // solve riddle
        }
    }, ROOM3 {
        public void explore() {
            // rescue maiden
        }
    };

}

public interface Explorable{
    public abstract void explore();    
}

public static void move(Explorable[] adjacentNodes, int index)
{
    adjacentNodes[index].explore();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:48:48.300

不，您不能在 Java 中存储函数。一些面向对象怎么样？创建一个`Person`封装名称信息的类：

```
public class Person {
    private String firstName;
    private String lastName;

    public String getFullName() {
        return firstName + " " + lastName;
    }

    public String getFirstName() {
        return firstName;
    }        

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
} 
```

实例化它：

```
Person person = new Person();
person.setFirstName("John");
person.setLastName("Doe"); 
```

既然您有一个可以使用的对象，我建议您`Person`尽可能长时间地传递 of 的实例，因为这意味着类型信息将被保留。与取消引用人名到字符串数组相比，您正在处理什么样的数据（名称、颜色、国家代码等的数组，？）不太明显。

也就是说，如果您坚持取消引用名称数据，则创建`String`数组并不难，或者`List<String>`如果您选择这样做：

```
String[] nameArray = {person.getFirstName(), person.getLastName()};

// or

List<String> nameList = new ArrayList<String>();
nameList.add(person.getFirstName());
nameList.add(person.getLastName()); 
```

# javascript - javascript不改变html属性

> ID：11912544
> 
> 赞同：0
> 
> 时间：2012-08-11T06:30:59.780
> 
> 标签：javascript, html

我试图通过`hspace`根据屏幕分辨率更改属性来更改小程序的水平定位。下面的 Javascript 似乎没有改变任何东西：

```
<html>
<body>

<applet 
    id="clientApplet"
    archive="client.jar" 
    code="Client.class" 
    width="500" height="530"
    hspace="100">
</applet>

<br />

<script type="text/javascript">
    var leftMargin = (screen.width-500)/2;

    document.getElementById("clientApplet").setAttribute(hspace, leftMargin);

    window.location.reload()
</script>

</body>
</html> 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:33:58.027

`hspace`需要是一个字符串：

```
document.getElementById("clientApplet").setAttribute("hspace", leftMargin); 
```

# perl - 查找节点之间的最近距离

> ID：11912545
> 
> 赞同：-2
> 
> 时间：2012-08-11T06:31:00.913
> 
> 标签：perl

我想找到节点之间的最近距离。

这是我的示例数据：

节点，x，y

```
1、3、5
2、6、9
3、13、15
4、16、20
5、30、50

```

例如，从节点 1 到节点 2 的最近距离为 5。我想找到与所有节点的最近距离为节点 2、3、4、5。

我如何在 Perl 中实现这一点？

这是我到目前为止所拥有的：

```
use strict;
use warnings;
use Data::Dumper;

open(IN , "<" , "sample.txt" ) or die "Can't open this file.";

my @two_dimentional_array;
while (my $line=<IN>)
{
    my @arr_line=split (" *, *" , $line);
        my @one_dimentional_array;
        push @one_dimentional_array , @arr_line;
        push @two_dimentional_array, [@arr_line];
}

for(my $i=0 ; $i<=$#two_dimentional_array ; $i++)
{
    my ($n_1 , $X_1 , $y_1)=@{$two_dimentional_array[$i]};
    for (my $j=0 ; $j<=$#two_dimentional_array ; $j++)
    {
        my ($n_2 , $X_2 , $y_2)=@{$two_dimentional_array[$j]};

        chomp($y_1);
        chomp($y_2);
        if($n_1 != $n_2)
        {
            my $distance=sqrt(($X_2-$X_1)**2 + ($y_2-$y_1)**2);
            print "Distance ".$distance." from node ".$n_1." to node ".$n_2."\n";
        }
    }
}
#print Dumper(\@two_dimentional_array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:37:02.930

此代码将找到距离最小的第一对。

```
use strict;
use warnings;

# @data contains (node number, x, y) from the file
#
my @data;

open my $fh, '<', 'sample.data' or die $!;

while (<$fh>) {
  my @node = /\d+/g;
  push @data, \@node if @node;
}

# @min contains (first node number, second node number, distance)
# for the most recently-found minimum distance
#
my @min;

for my $node1 (0 .. $#data-1) {
  for my $node2 ($node1+1 .. $#data-1) {
    my $dist;
    $dist += ( $data[$node2][$_] - $data[$node1][$_] ) ** 2 for 1, 2;
    $dist = sqrt $dist;
    @min = ( $data[$node1][0], $data[$node2][0], $dist ) unless @min and $min[2] <= $dist;
  }
}

printf "%d to %d = %f\n", @min; 
```

**输出**

```
1 to 2 = 5.000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:44:09.977

```
#!/usr/bin/perl

use strict;
use warnings;

my (@data, @temp, @result);

sub calc {
    my ($a, $b) = @_;
    my $dat = 0;
    $dat += ($a->[$_] - $b->[$_]) ** 2 for (1,2);
    return sqrt $dat;
}

while (<DATA>) {
    push @data, [split /,?\s+/];
}

for my $x (@data) {
    for my $y (@data) {
        push @temp, [calc($x, $y), $x, $y] if ($x->[0] > $y->[0]);
    }
}

@result = sort { $a->[0] <=> $b->[0]; } @temp;
printf "%-18s => [%s], [%s]\n", $_->[0],
    join(', ', @{$_->[1]}), join(', ', @{$_->[2]}) for @result;

__DATA__
1,  3,  5
2,  6,  9
3,  13, 15
4,  16, 20
5,  30, 50 
```

输出：

```
5                  => [2, 6, 9], [1, 3, 5]
5.8309518948453    => [4, 16, 20], [3, 13, 15]
9.21954445729289   => [3, 13, 15], [2, 6, 9]
14.142135623731    => [3, 13, 15], [1, 3, 5]
14.8660687473185   => [4, 16, 20], [2, 6, 9]
19.8494332412792   => [4, 16, 20], [1, 3, 5]
33.1058907144937   => [5, 30, 50], [4, 16, 20]
38.9101529166874   => [5, 30, 50], [3, 13, 15]
47.5078940808788   => [5, 30, 50], [2, 6, 9]
52.4785670536077   => [5, 30, 50], [1, 3, 5] 
```

# php - jQuery-e.target || e.srcElement 在课堂上不起作用

> ID：11912546
> 
> 赞同：2
> 
> 时间：2012-08-11T06:31:06.257
> 
> 标签：php, jquery, html, search

我有一个即时搜索，其中结果进入“*即时搜索*”div。还有另一个 div “ *search-radio* ”，我在其中保留了选择搜索类别的选项。

我已经设置了一个删除结果的文档单击事件，但是在单击“*即时搜索*”div 时结果也会消失。

我设置了一些**e.target || e.srcElement**事件以防止结果在“*即时搜索*”div 单击时消失。

这在 Firefox 中完美运行，但在任何其他浏览器中都不起作用。

**我完整的 jQuery 代码：**

```
$(document).ready(function () {
 $('#search-radio').css('display', 'block');
 $('#search-input').keyup(function()
    {
     var searchIn = $("input:radio:checked").val();
     var keyword=$(this).val();
     $.get('../search/instant-search.php', {keyword: keyword, searchIn:searchIn}, function(data)
        {
        $('#instant-search').html(data);
         });
         $('#search-result').fadeIn(250);
     });

  $('#search-input').attr('autocomplete','off');
  $('#search-input').attr('placeholder','Search');

  $('#search-input').mouseenter(function(){$('#search-result').fadeIn(250);});
  $('#search-input').mouseleave(function(){$('#search-result').fadeOut(250);});

  $('#search-result').on('mouseenter mouseleave', function()
  { 
      $('#search-result').stop();

      $(document).on('click', function(e) 
       {
        if(
           ((e.target.id || e.srcElement.id) != 'instant-search') 
        && ((e.target.id || e.srcElement.id) != 'search-input') 
        && ((e.target.id || e.srcElement.id) != 'search-result')
        && ((e.target.id || e.srcElement.id) != 'search-radio') 
        && ((e.target.id || e.srcElement.id) !='instant-search-container') 
        && ((e.target || e.srcElement).hasclass != 'instant-search') 
        && ((e.target.id || e.srcElement.id) !='check-all')) 
          {
          $('#search-result').fadeOut(250);
          }
       });

   });

}); 
```

**我的 HTML 代码：**

```
 <div id="search-wrapper">
<form action="" method="get" id="search-form" >
<div id="search">
<input name="keyword" type="text" size="50"  id="search-input"  />
</div><!--end of search-->

<div id="search-result">
<div id="instant-search"></div><!--end of instant-search-->
<div id="search-radio">
<p>Search In:</p>
  <ul>
      <li><label><input name="search" type="radio" value="all" checked="checked" id="check-all" >All</label></li>
      <li><label><input name="search" type="radio" value="Category2" >Category2</label></li>
      <li><label><input name="search" type="radio" value="Category3" >Category3</label></li>
      <li><label><input name="search" type="radio" value="Category4" >Category4</label></li>
      <li><label><input name="search" type="radio" value="Category5" >Category5</label></li>
  </ul>
</div><!--end of search-radio-->
</div><!--end of search-result-->
</form>
</div><!--end of search-wrapper--> 
```

**编辑：**请参阅**e.target || e.srcElement**不能在**ul li**上工作，而**无线电输入**只能在其他地方工作。

我希望这适用于所有浏览器。

请查看并建议任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:09:25.507

试试这个：

```
$(function() {
    $('#search-radio').css('display', 'block');

    $('#search-input').on({
        keyup: function() {
            var searchIn = $("input:radio:checked").val();
            var keyword = this.value;
            $.get('../search/instant-search.php', {
                keyword: keyword,
                searchIn: searchIn
            }, function(data) {
                $('#instant-search').html(data);
            });
            $('#search-result').stop().fadeIn(250);
        },
        mouseenter: function() {
            $('#search-result').stop().fadeIn(250);
        },
        mouseleave: function() {
            $('#search-result').stop().fadeOut(250);
        }
    }).attr('autocomplete', 'off').attr('placeholder', 'Search');

    $('#search-result').on('mouseenter mouseleave', function() {
        $('#search-result').stop();
    });

    $(document).on('click', function(e) {
        var flag = true;
        $.each($('*','#search-wrapper'), function(i,elm) {
            if (e.target===elm) flag=false;
        });
        if (flag) $('#search-result').fadeOut(250);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/Ljsey/1/)

# java - 如何使用 smslib 创建短信服务器

> ID：11912551
> 
> 赞同：0
> 
> 时间：2012-08-11T06:31:31.380
> 
> 标签：java, windows, sms-gateway, smslib

伙计们，我目前正在研究通过 GSM 调制解调器发送和接收 SMS 的 SMSlib。我能够通过它成功接收和发送短信。但我需要做的是不断地收听短信并做出相应的回应。所以我想我需要建立一个短信服务器。但我不知道如何使用 SMSlib 的 SMSServer。我阅读了 SMSlib 附带的文档，但没有帮助。（它使用 ANT 和其他我不知道的东西）伙计们有什么帮助！！！！有点详细的答案......提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:00:48.417

阅读文档并从以下链接下载示例代码。

[http://smslib.org/](http://smslib.org/)

[http://code.google.com/p/smslib/downloads/list](http://code.google.com/p/smslib/downloads/list)

# multithreading - 一个进程中有两个暗黑破坏神 III 实例？

> ID：11912553
> 
> 赞同：-5
> 
> 时间：2012-08-11T06:31:58.767
> 
> 标签：multithreading, virtual-machine

如果有可能（甚至从未实现过）在一个进程中启动暗黑破坏神 III 的两个实例，我正在徘徊。这是一道考试题：举个例子，当你可以使用线程或进程打开一个应用程序时，你选择进程。我回答如果我想打开两个暗黑破坏神III，我会使用进程，因为它更稳定。但是，教练说不可能通过线程启动暗黑破坏神III。我只是怀疑他的说法，为什么不可能？甚至不在虚拟机上？我认为至少在理论上应该是可行的。答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:27:12.157

暗黑破坏神 III 的一个实例*是*一个进程。一个进程不能*在*另一个进程中运行。一个进程可以产生另一个进程（并等待终止），但它们都将在不同的内存空间中运行。“无法通过线程启动”没有任何意义。线程可以调用诸如`ProcessCreate`启动进程之类的东西；但这会在该进程中创建一个单独的进程和单独的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:53:25.040

线程只存在于单个进程中。虽然您可以启动多个线程并分别等待一个进程，但这些进程本身将是完全独立的。

# python - PyQt: QTabbleWidget with Undo and Redo Actions

> ID：11912562
> 
> 赞同：1
> 
> 时间：2012-08-11T06:33:35.373
> 
> 标签：python, pyqt, qtablewidget, undo-redo

So, I'm using Python with PyQt. In my application, I have a QTableWidget. What I notice is that it doesn't keep some sort of "history" for undo and redo. How can I achieve that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:15:52.377

You have to track the history yourself. Qt has [Undo Framework](http://doc.qt.nokia.com/4.7-snapshot/qundo.html) for that.

# java - 使用 Classname.this.methodname

> ID：11912569
> 
> 赞同：0
> 
> 时间：2012-08-11T06:34:11.430
> 
> 标签：java, function

我看到了以下代码：

```
 mActionMode = OverviewActivity.this
        .startActionMode(mActionModeCallback); 
```

[我在 Android Dev 中](http://www.vogella.com/articles/Android/article.html)看到了这个。[教程](http://www.vogella.com/articles/Android/article.html)

像这样调用函数有什么好处？我已将代码更改为：

```
mActionMode = startActionMode(mActionModeCallback); 
```

但是，我没有看到任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:37:57.447

区别（如果有的话）是它调用了外部类方法。

```
class Outer {
   void methodA() { }

   class Inner {
       void methodA() { }

       void method() {
            methodA(); // call my methodA();
            Outer.this.methodA(); // calls the Outer.methodA();
       }
   }
} 
```

即使他/sge 不需要，开发人员也可能喜欢具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:37:25.173

当您有一个外部类的成员与嵌套类成员同名时，这很有用：

```
public class Test {

    public static void main(String[] args) {
        new Test().new Inner().run();
    }

    class Inner {
        public void run() {
            foo(); // Prints Inner.foo
            Test.this.foo(); // Prints Test.foo
        }

        public void foo() {
            System.out.println("Inner.foo");
        }
    }

    public void foo() {
        System.out.println("Test.foo");
    }
} 
```

# iphone - ios 应用程序中的 Facebook 集成

> ID：11912572
> 
> 赞同：0
> 
> 时间：2012-08-11T06:34:28.153
> 
> 标签：iphone, facebook

如何将 Facebook 集成到 iOS 应用程序中？

我试过一次，但我不明白**如何从开发者帐户生成密钥**。

如果可能的话，请向我提供一份详细描述所有内容的文件

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:40:43.270

您可以使用 FBGraph 方法集成 facebook。在这里，您必须首先导入 JSON 和 FBGraph 框架。之后编写以下代码：-

```
NSString *client_id = @"130902823636657";
self.fbGraph =[[FbGraph alloc] initWithFbClientID:client_id];

[fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];

- (void)fbGraphCallback:(id)sender
{
if ((fbGraph.accessToken==nil)||([fbGraph.accessToken length]==0)) {

    [fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];            }    
else
{
    NSMutableDictionary *Variables=[[NSMutableDictionary alloc] initWithCapacity:2];
    FbGraphFile *graph_File=[[FbGraphFile alloc] initWithImage:imageCollage.image];
    [Variables setObject:graph_File forKey:@"file"];
    [Variables setObject:@"" forKey:@"message"]; 
```

# javascript - Node.js 延迟承诺 + 猫鼬

> ID：11912573
> 
> 赞同：0
> 
> 时间：2012-08-11T06:34:49.073
> 
> 标签：javascript, node.js, mongoose, deferred

有没有人使用过nodejs模块'deferred'和'mongoose'？我试图让 deferred.promisify 方法处理猫鼬模型的功能，这样我就可以轻松地将它们链接起来，但遇到了一些麻烦。具体来说，我想承诺`find`and`findById`函数，以便我可以通过 ObjectID 链接查找另一个文档引用的一个文档。

这就是我所拥有的：[https ://gist.github.com/3321827](https://gist.github.com/3321827)

然而，这似乎不太理想，因为`getAppPermissions`and`getApplication`函数似乎只是 mongoose 模型的`find`and`findById`方法的包装器。

我尝试仅将函数传递给 promisify，但我得到一个错误，`Object #<Object> has no method '_applyNamedScope'`这似乎是由于`this`不再绑定到正确的对象而导致的。也许我需要使用 underscore.bind？有没有人在这方面取得任何成功，还是我应该坚持现在的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:40:04.233

Mariusz 的回答非常接近。在这种特殊情况下，这最终对我有用，希望其他人可以从中学习：

```
// I put this in my model file so I didn't have to worry about repeating it
var userProto = mongoose.model('User');

userProto.pFind = deferred.promisify(userProto.find);
userProto.pFindOne = deferred.promisify(userProto.findOne); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:53:45.857

您可能没有正确地将上下文传递给方法，正确的方法是直接在 Mongoose 原型上提供方法的承诺版本：

```
// I assume that methods you're using are set on mongoose.Model,
// but be sure to check, maybe, they're using some other prototype (!)
var promisify = require('deferred').promisify;
var modelProto = mongoose.Model.prototype;
modelProto.pFind = promisify(modelProto.find);
modelProto.pFindById = promisify(modelProto.findById);

// After that you may use promisified methods directly:
app.get('/apps', requireLogin, function (req, res) {    
  AppPermissions.pFind({ user: req.user.id, valid: true })
    .map(function (permission) {
      return ApplicationRecord.pFindById(permission.application)(
        function (application) {
          application.permission = permisson;
          return application;
        }
      );
    }).end(function (applications) {
      res.render('applist', { applications: applications });
    }, null);
}); 
```

您还可以避免污染原型，并间接使用方法：

```
var promisify = require('deferred').promisify;
var modelProto = mongoose.Model.prototype;
var pFind = promisify(modelProto.find);
var pFindById = promisify(modelProto.findById);

app.get('/apps', requireLogin, function (req, res) {    
  pFind.call(AppPermissions, { user: req.user.id, valid: true })
    .map(function (permission) {
      return pFindById.call(ApplicationRecord, permission.application)(
        function (application) {
          application.permission = permisson;
          return application;
        }
      );
    }).end(function (applications) {
      res.render('applist', { applications: applications });
    }, null);
}); 
```

# android - ANT 因库项目失败（ActionBarSherlock，HoloEverywhere）

> ID：11912574
> 
> 赞同：0
> 
> 时间：2012-08-11T06:34:51.913
> 
> 标签：android, ant, build, actionbarsherlock, library-project

昨天我能够解决我以前的所有问题，并且简单的 android 应用程序正在运行，没有任何问题。

在为他们设置完所有内容后，我尝试为我的 3 个更复杂的应用程序做同样的事情。所有这些应用程序都使用 ActionBarSherlock 和 ViewPagerIndicator。

第一个问题是，如果我有一个项目（没有 holoeverywhere）ant 无法编译，因为它试图添加一个已经添加的类。我知道哪个库导致了这个问题 - > android-support-v4.jar 但我无法删除它。ViewPagerIndicator 和 ActionBarSherlock 需要它。

第二个更烦人的问题是，只要我添加 HoloEverywhere（它需要 ActionBarSherlock 作为依赖项），它就会给我以下错误：

```
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Generating resource IDs...
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values-v14/styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:26: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values-v14/styles.xml:14: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:46: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light.DarkActionBar'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:66: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.ForceOverflow'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:86: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light.ForceOverflow'.
     [aapt] /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/res/values/styles.xml:106: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light.DarkActionBar.ForceOverflow'. 
```

我知道它说缺少对 ActionBarSherlock 样式的引用，但为什么呢？我使用原始的 ant 脚本，即使我能够修复库的所有路径（ant 忽略库项目的 build.xml 中定义的 project.properties），它也无法构建。

任何提示或想法？

上面的一切似乎都很好。

```
Buildfile: /Users/**/Zuzzle/build.xml

-set-mode-check:

-set-release-mode:

-release-obfuscation-check:
     [echo] proguard.config is ${proguard.config}

-check-env:
 [checkenv] Android SDK Tools Revision 20
 [checkenv] Installed at /Entwicklung/android-sdk

-setup:
     [echo] Project Name: SplashscreenActivity
  [gettype] Project Type: Application
     [echo] Switching between debug and non debug build: Deleting previous compilation output...
   [delete] Deleting directory /Users/**/Zuzzle/bin/classes

-build-setup:
     [echo] Resolving Build Target for SplashscreenActivity...
[gettarget] Project Target:   Android 4.1
[gettarget] API level:        16
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: /Users/**/Zuzzle/bin/classes
     [echo] ----------
     [echo] Resolving Dependencies for SplashscreenActivity...
[dependency] Library dependencies:
[dependency] 
[dependency] ------------------
[dependency] Ordered libraries:
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.
     [echo] ----------
     [echo] Building Libraries with 'release'...

nodeps:

-set-mode-check:

-set-release-mode:

-release-obfuscation-check:
     [echo] proguard.config is ${proguard.config}

-check-env:
 [checkenv] Android SDK Tools Revision 20
 [checkenv] Installed at /Entwicklung/android-sdk

-setup:
     [echo] Project Name: library
  [gettype] Project Type: Android Library
     [echo] Switching between debug and non debug build: Deleting previous compilation output...
   [delete] Deleting directory /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/classes

-build-setup:
     [echo] Resolving Build Target for library...
[gettarget] Project Target:   Android 4.1
[gettarget] API level:        16
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/classes
     [echo] ----------
     [echo] Resolving Dependencies for library...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.

-pre-build:

-code-gen:
[mergemanifest] Found Deleted Target File
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] No need to generate new BuildConfig.

-pre-compile:

-compile:
    [javac] Compiling 8 source files to /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/classes
     [echo] Creating library output jar file...
      [jar] Building jar: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/classes.jar

-post-compile:

-obfuscate:

-dex:
     [echo] Library project: do not convert bytecode...

-crunch:
   [crunch] Crunching PNG Files in source dir: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/res
   [crunch] To destination dir: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/res
   [crunch] Crunched 0 PNG files to update cache

-package-resources:
     [echo] Library project: do not package resources...

-package:
     [echo] Library project: do not package apk...

-post-package:

-release-prompt-for-password:

-release-nosign:
     [echo] 
[propertyfile] Updating property file: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/Android-ViewPagerIndicator/library/bin/build.prop

-release-sign:

-post-build:

release:

nodeps:

-set-mode-check:

-set-release-mode:

-release-obfuscation-check:
     [echo] proguard.config is ${proguard.config}

-check-env:
 [checkenv] Android SDK Tools Revision 20
 [checkenv] Installed at /Entwicklung/android-sdk

-setup:
     [echo] Project Name: library
  [gettype] Project Type: Android Library
     [echo] Switching between debug and non debug build: Deleting previous compilation output...
   [delete] Deleting directory /Users/**/Project Librarys/ActionBarSherlock/library/bin/classes

-build-setup:
     [echo] Resolving Build Target for library...
[gettarget] Project Target:   Android 4.1
[gettarget] API level:        16
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: /Users/**/Project Librarys/ActionBarSherlock/library/bin/classes
     [echo] ----------
     [echo] Resolving Dependencies for library...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.

-pre-build:

-code-gen:
[mergemanifest] Found Deleted Target File
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] No need to generate new BuildConfig.

-pre-compile:

-compile:
    [javac] Compiling 82 source files to /Users/**/Project Librarys/ActionBarSherlock/library/bin/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
     [echo] Creating library output jar file...
      [jar] Building jar: /Users/**/Project Librarys/ActionBarSherlock/library/bin/classes.jar

-post-compile:

-obfuscate:

-dex:
     [echo] Library project: do not convert bytecode...

-crunch:
   [crunch] Crunching PNG Files in source dir: /Users/**/Project Librarys/ActionBarSherlock/library/res
   [crunch] To destination dir: /Users/**/Project Librarys/ActionBarSherlock/library/bin/res
   [crunch] Crunched 0 PNG files to update cache

-package-resources:
     [echo] Library project: do not package resources...

-package:
     [echo] Library project: do not package apk...

-post-package:

-release-prompt-for-password:

-release-nosign:
     [echo] 
[propertyfile] Updating property file: /Users/**/Project Librarys/ActionBarSherlock/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/ActionBarSherlock/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/ActionBarSherlock/library/bin/build.prop
[propertyfile] Updating property file: /Users/**/Project Librarys/ActionBarSherlock/library/bin/build.prop

-release-sign:

-post-build:

release:

nodeps:

-set-mode-check:

-set-release-mode:

-release-obfuscation-check:
     [echo] proguard.config is ${proguard.config}

-check-env:
 [checkenv] Android SDK Tools Revision 20
 [checkenv] Installed at /Entwicklung/android-sdk

-setup:
     [echo] Project Name: library
  [gettype] Project Type: Android Library
     [echo] Switching between debug and non debug build: Deleting previous compilation output...
   [delete] Deleting directory /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/bin/classes

-build-setup:
     [echo] Resolving Build Target for library...
[gettarget] Project Target:   Android 4.1
[gettarget] API level:        16
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: /Users/**/Project Librarys/HoloEverywhere/HoloEverywhereLib/bin/classes
     [echo] ----------
     [echo] Resolving Dependencies for library...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.

-pre-build:

-code-gen:
[mergemanifest] Found Deleted Target File
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files... 
```

路径中的 ** 只是为了隐藏真实路径。脚本知道正确的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:51:30.703

我现在能够解决我的问题。看来我的 build.xml 已损坏，并且出现了任何问题。

如果有人想重命名他的应用程序包，这是我在网上找到的解决方案：

```
<target name="-package-resources" depends="-crunch">
        <!-- only package resources if *not* a library project -->
        <do-only-if-not-library elseText="Library project: do not package resources..." >
            <aapt executable="${aapt}"
                    command="package"
                    versioncode="${package.manifest.version.code}"
                    versionname="${package.manifest.version.name}"
                    debug="${build.is.packaging.debug}"
                    manifest="${out.manifest.abs.file}"
                    assets="${asset.absolute.dir}"
                    androidjar="${project.target.android.jar}"
                    apkfolder="${out.absolute.dir}"
                    nocrunch="${build.packaging.nocrunch}"
                    resourcefilename="${resource.package.file.name}"
                    resourcefilter="${aapt.resource.filter}"
                    libraryResFolderPathRefid="project.library.res.folder.path"
                    libraryPackagesRefid="project.library.packages"
                    previousBuildType="${build.last.target}"
                    buildType="${build.target}"
                    ignoreAssets="${aapt.ignore.assets}"
                    manifestpackage="${package.manifest.name}">
                <res path="${out.res.absolute.dir}" />
                <res path="${resource.absolute.dir}" />
                <!-- <nocompress /> forces no compression on any files in assets or res/raw -->
                <!-- <nocompress extension="xml" /> forces no compression on specific file extensions in assets and res/raw -->
            </aapt>
        </do-only-if-not-library>
    </target> 
```

这是我认为最干净的变体。

# reporting-services - 打印打印按钮中的所有超链接记录单击

> ID：11912577
> 
> 赞同：0
> 
> 时间：2012-08-11T06:35:00.800
> 
> 标签：reporting-services, reportingservices-2005

我目前正在使用 SQL Server Reporting Services 2005。我在报告管理器上有一个显示记录的报告，其中一个列是 HyperLink 列，当我单击任何 HyperLink 列时，它将在浏览器中打开一个 PDF 文件。

现在我收到了更新，报告上有 PRINT 按钮，如果用户单击 PRINT 按钮，报告应单击打印所有 HyperLink 文件，是否可以在 SSRS 2005 中执行，如果是，任何人都可以提供给我要遵循的步骤。

下面是前任的截图：

提前致谢

问候，丹妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:31:52.540

您无法通过单击按钮添加开箱即用的任何内容来打印任何内容。如果你想打印一些东西，你将不得不编写自定义代码。请参阅：[报告服务：打印所有页面](https://stackoverflow.com/questions/2085498/reporting-services-print-all-pages)

# android - 如何在 JUNIT 中模拟 WiFi 连接？

> ID：11912579
> 
> 赞同：3
> 
> 时间：2012-08-11T06:35:47.493
> 
> 标签：android, junit, mocking, wifi

使用 Android 并在设备上进行测试，我使用它来检查 WiFI 是否已连接：

```
 ConnectivityManager manager = (ConnectivityManager) MyApplication.getMyApplication().getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    return info.isConnectedOrConnecting(); 
```

效果很好。有没有办法为 JUnit 模拟这个？

提前谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:44:05.817

如果您将代码移动到您自己的 WifiServiceClass 中并让您的应用程序依赖于接口，您可以模拟此功能：

```
public class MyClassThatRequiresWifi {
    private IWifiService wifiService;
    public MyClassThatRequiresWifi(IWifiService wifiService) {
        this.wifiService = wifiService;
    }

    public void someMethodThatNeedsWifi() {
        if (this.wifiService.isConnectedOrConnecting())
            ...
    }
}

public IWifiService {
    boolean isConnectedOrConnecting();
}

public WifiService implements IWifiService {
    boolean isConnectedOrConnecting() {..}
} 
```

# python - 映射要在 django 中显示的多词表达式

> ID：11912580
> 
> 赞同：1
> 
> 时间：2012-08-11T06:35:52.147
> 
> 标签：python, nlp

我正在尝试创建带注释的文本以在 Django 中显示。为此，我将要标记的现有多词表达式列表映射到文本并得到类似这样的内容，其中前两个元素是起点和终点，第三个是包含有关短语的一些信息的字典：

```
[[2,5,{phrase: 'contains important information', foo: 'bar'}],
 [...]] 
```

将结构更改为这样的最合理（也是最快）的方法是什么：

```
[['This'],
 ['list'],
 ['contains important information',{foo:'bar'}],
 [...]] 
```

或者我可能是从错误的方向接近？

# encryption - 初始化向量 (IV) - 更新频率

> ID：11912582
> 
> 赞同：2
> 
> 时间：2012-08-11T06:36:16.417
> 
> 标签：encryption, cryptography, encryption-symmetric

当使用对称加密（例如 AES）和 CBC 时，这是一个非常简单的问题，涉及初始化向量（IV）。

我的问题：IV 应该为每个新的明文更改还是为每个新会话创建一个就足够了？

目前我使用 java 作为我的实现和密码类，我注意到它确实第一次创建了一个新的 IV，但是同样的 IV 也用于以后的明文。

也许有一些关于这个主题的阅读资源？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T10:38:54.700

在 CBC 中，为了获得最大的安全性，IV 必须是不可预测的。

```
Should the IV change for each new plaintext or
does it suffice to create one for each new session? 
```

我对“*纯文本*”和“*会话*”的含义并不完全清楚。

如果您的意思是对于每个会话都有一个新的、新鲜的密钥，并且交换的数据被切碎然后加密，那么 CBC 通常将应用于整个片段链，这意味着片段 P 的密文块[n-1]可用作 P [n]的 IV 。因此，整个会话只需要一个 IV。

```
Perhaps there is some reading resources about this topic? 
```

当然，[NIST SP 800-38A](http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf)，第 6.2 节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T10:56:04.983

*注意：此答案仅与 CBC 模式加密中的 IV 有关。*

您需要使用相同的密钥为每个单独的加密“会话”创建一个新的 IV。对于加密安全的 IV，它应该与攻击者无法区分的随机数。Java 默认使用零 IV，这意味着您不应重复使用密钥来创建其他密文。

所以不，您不应该在不设置新 IV 的情况下重用会话。基本上，对于任何协议来说，唯一安全的就是下面的源代码。有一些方法可以使用协议中的其他信息创建安全 IV，但我不会深入讨论。

```
Cipher aes = Cipher.getInstance("AES/CBC/PKCS5Padding");

// repeat this for each cipher text
byte[] ivBytes = new byte[aes.getBlockSize()];
SecureRandom rnd = new SecureRandom();
rnd.nextBytes(ivBytes);
aes.init(Cipher.ENCRYPT_MODE, sk, new IvParameterSpec(ivBytes));

// now prepend the ivBytes to the output, e.g. by writing it to a stream first
// remove and use as IV at the receiving side 
```

[编辑]：忘记了这个的简写符号：

```
aes.init(Cipher.ENCRYPT_MODE, sk, new SecureRandom());
byte[] ivBytes = aes.getIV(); 
```

请注意，上面的代码不提供完整性保护。

# mysql - MySQL - 如何使用左连接从 on 子句中的连接表中准确获取一行？

> ID：11912583
> 
> 赞同：0
> 
> 时间：2012-08-11T06:36:53.473
> 
> 标签：mysql, sql, left-join

我希望这个问题足够清楚。

这是我的查询：

```
SELECT
    'Total Complete' AS name, count(c.id) AS amnt
FROM
    lanes AS c
      LEFT JOIN leads AS l
        ON ((c.carrier_mcn = l.authority_number
              AND l.authority_type = 'mc')
          OR c.carrier_mcn = l.mcn
          OR c.carrier_mcn = CONCAT('MC', l.authority_number))
          AND c.carrier_mcn <> 0
  LEFT JOIN lanes_emails AS cem1
    ON cem1.cid = c.id AND cem1.deleted = 0
  LEFT JOIN lanes_emails AS cem2
    ON cem1.cid = cem2.cid AND cem2.deleted = 0 AND cem2.id < cem1.id
  LEFT JOIN lanes_equipment AS ceq1
    ON ceq1.cid = c.id AND ceq1.deleted = 0
  LEFT JOIN lanes_equipment AS ceq2
    ON ceq1.cid = ceq2.cid AND ceq1.deleted = 0 AND ceq2.id < ceq1.id
  LEFT JOIN lanes_service_area AS csa1
    ON csa1.cid = c.id AND AND flag = 2 csa1.deleted = 0
  LEFT JOIN lanes_service_area AS csa2
    ON csa1.cid = csa2.cid AND AND flag = 2 csa1.deleted = 0 AND csa2.id < csa1.id
WHERE
    c.carrier_mcn IS NOT NULL and c.carrier_mcn <> ''
    AND c.broker_mcn IS NOT NULL and c.broker_mcn <> ''
    AND c.fax IS NOT NULL and c.fax <> ''
    AND cem2.id IS NOT NULL
    AND ceq2.id IS NOT NULL
    AND csa2.id IS NOT NULL 
```

现在我在这里要做的是从“通道”中获取总行数，其中至少有一个电子邮件、设备、服务区域、mc 号码或传真号码。有两个 MC 编号，但它们都在同一张桌子上；主要问题是可以有无限的电子邮件、设备和服务区域。

在这种情况下，我开始写一篇关于这个问题的文章，并发现了另一个类似的问题：

[MySQL：我可以进行左连接并从连接表中仅拉出一行吗？](https://stackoverflow.com/questions/11131237/mysql-can-i-do-a-left-join-and-pull-only-one-row-from-the-join-table)

所以我尝试了它并将其实现到我的查询中。不幸的是，它并没有按照我的计划进行。

如果我有不止一排，它会很好用；它会得到正确的计数，忽略我有多封电子邮件或诸如此类的事实，但如果只有一封，它就行不通。相反，它没有返回任何结果。

不，我不能使用 GROUP BY 来获得我需要的结果；我尝试过 GROUP BY，我喜欢在返回完整结果列表时使用它，但如果我试图返回计数 GROUP BY 会反复弄乱我。

有什么方法可以强制在 mysql 中加入只返回一行而不使用子查询？我只需要知道这些其他表中是否有一个项目，我不需要返回所有内容，而且我不知道如何通过 WHERE 子句对其进行编程。

我需要这个查询来获取条形图。我实际上有几个这样的查询；这个是需要所有结果的，但我有其他没有要求的，至少一封电子邮件，至少一个 mc 号码等，但如果我能得到这个工作，我可以让其余的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:32:12.587

你可以使用一个`exists`子句：

```
where   exists 
        (
        select  *
        from    lanes_emails AS cem1
        where   cem1.cid = c.id 
                and cem1.deleted = 0
        )
        and exists
        ... 
```

# php - PHP循环没有完成？

> ID：11912584
> 
> 赞同：1
> 
> 时间：2012-08-11T06:37:08.663
> 
> 标签：php, loops

我正在检查我们的系统是否有死产品。由于物品的数量（100.000 多件衣服），我循环遍历整个 DB-Table 100。

检查一组 100 个项目后，我输出一条消息，显示已过去的时间。

**问题**：不知何故，它总是停在 2400-2500（见下文）。 

你知道问题可能出在哪里吗？

也许增量是问题？

这是代码：

```
// get the amount of all rows to enable pagination later
$AllRowsResponse = mysql_query("SELECT COUNT(*) AS Count FROM ".$targettablename." WHERE 1") or die ("Error #111231".mysql_error());
mysql_close($conn);

// write amount of rows into variable
$AllRows = mysql_fetch_array($AllRowsResponse) or die (mysql_error());
$RowCount = $AllRows["Count"];
//print "<br>all rows in table: " . $RowCount ;flush();
print "<br><h1>CHECKING ".$TargetTable." FOR DEAD PRODUCTS</h1><br>";

$deletedprods = 0; // set up counter for deleted product
$i = 0; // counter
$increment = 100; // increment steps 
$timetotalstart = microtime(true); // variable to measure each requests time. this is the beginning time
$md5deadimage1 = md5(file_get_contents("www.mydomain.com/dead1.jpg")); // get md5 of "not available" pic ONCE
$RowsMinusDeleted = $RowCount - $deletedprods; // when deleting a prod, dont look for rows that arent there anymore

while ( $i <= $RowsMinusDeleted) { // as long as the counter is below the rowcount, there are still rows to check

    $limitstart = $i;
    $limitend = $i + $increment; //MAYBE PROBLEM IS HERE???

    $conn = ConnectToDB();

    $ProductIds = mysql_query("SELECT ProductId,Image,Deeplink FROM ".$targettablename." WHERE 1 LIMIT " . $limitstart . "," . $limitend) or die ("Error #11124".mysql_error());
    mysql_close($conn);     

    $i = $i + $increment; // increase the counter by the above defined increment

    //print " DEAD-MD5:" & $md5deadimage1;flush();

    print "<br>(Checking items " . $limitstart . "-" . $limitend . "(of ". $RowCount . " total))";flush();
    //$rowCount = mysql_num_rows($ProductIds);
    //print "<br>amount of ids etc in array: " . count($rowCount) ;flush();
    $timeloopstart = microtime(true);
    // write every productId into an array
    while ( $row = mysql_fetch_array ( $ProductIds ) ) {

        // get md5 of current product image
        $md5deadimage2 = md5(file_get_contents($row['Image']));
        if ($md5deadimage1 == $md5deadimage2) { // if current file md5 is equal to any "dead picture", show it/delete it 

            $deletedprods++;
            $conn = ConnectToDB();

            print "<a href=\"".$row['Deeplink']."\" target='_blank'><img src=\"".$row['Image']."\"></a>";flush();

            mysql_query("DELETE FROM ".$targettablename." WHERE `ProductId`=".$row['ProductId']."") or die ("Error #11125".mysql_error());

            mysql_close($conn);
        }   
        //} // end if
        $RowsMinusDeleted = $RowCount - $deletedprods;
    } // end while
    $timeloopend = microtime(true);
    $timelooptotal = $timeloopend - $timeloopstart;
    print "<-- above took " . floor($timelooptotal) . " seconds";
}

$timetotalend = microtime(true);
$timetotal = $timetotalend - $timetotalstart;
print "<h2> whole request took " . floor($timelooptotal / 60 ) . " minutes";
print "\n<h2>Updated ".$TargetTable.". Deleted <b>".$deletedprods."</b> old products</h2>"; 
```

这是我的脚本的作用：

```
CHECKING dresses FOR DEAD PRODUCTS

(Checking items 0-100(of 134902 total))<-- above took 17 seconds

(Checking items 100-200(of 134902 total))<-- above took 34 seconds

(Checking items 200-300(of 134902 total))<-- above took 48 seconds

(Checking items 300-400(of 134902 total))<-- above took 68 seconds

(Checking items 400-500(of 134902 total))<-- above took 82 seconds

(Checking items 500-600(of 134902 total))<-- above took 94 seconds

(Checking items 600-700(of 134902 total))<-- above took 109 seconds

(Checking items 700-800(of 134902 total))<-- above took 125 seconds

(Checking items 800-900(of 134902 total))<-- above took 136 seconds

(Checking items 900-1000(of 134902 total))<-- above took 146 seconds

(Checking items 1000-1100(of 134902 total))<-- above took 162 seconds

(Checking items 1100-1200(of 134902 total))<-- above took 185 seconds

(Checking items 1200-1300(of 134902 tota l))<-- above took 199 seconds

(Checking items 1300-1400(of 134902 total))<-- above took 212 seconds

(Checking items 1400-1500(of 134902 total))<-- above took 237 seconds

(Checking items 1500-1600(of 134902 total))<-- above took 277 seconds

(Checking items 1600-1700(of 134902 total))<-- above took 287 seconds

(Checking items 1700-1800(of 134902 total))<-- above took 292 seconds

(Checking items 1800-1900(of 134902 total))<-- above took 304 seconds

(Checking items 1900-2000(of 134902 total))<-- above took 305 seconds

(Checking items 2000-2100(of 134902 total))<-- above took 337 seconds

(Checking items 2100-2200(of 134902 total))<-- above took 393 seconds

(Checking items 2200-2300(of 134902 total))<-- above took 368 seconds

(Checking items 2300-2400(of 134902 total))<-- above took 375 seconds

(Checking items 2400-2500(of 134902 total)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:14:03.057

使用“ `set_time_limit(0)`”

更多信息在这里： [http ://ca2.php.net/manual/en/function.set-time-limit.php](http://ca2.php.net/manual/en/function.set-time-limit.php)

另外，为什么每次迭代都创建与数据库的新连接？这不是必需的，只需创建一个连接并使用它。

还有一个提示，用于将来自己排除故障，请使用`error_reporting(E_ALL);`

# xpages - 如何引用文档中的图像

> ID：11912586
> 
> 赞同：0
> 
> 时间：2012-08-11T06:37:46.547
> 
> 标签：xpages

我有一个存储在数据库文档中的图像。以下 url 将在图像控件中从 Web 客户端打开图像

/file/winter/$file/winter.jpg

但它不适用于notes客户端。我应该如何更改 url 以使其在 Notes 客户端中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:19:17.900

您的图像实际上是一个附件。您需要 /xsp 方法：

```
 http(s)://[yourserver]/[application.nsf] /xsp/.ibmmodres/domino/OpenAttachment/ [application.nsf]/[UNID|/$File/[AttachmentName]?Open 
```

检查[完整的细节](http://www.wissel.net/blog/d6plinks/SHWL-86QKNM)。您很可能可以跳过服务器和应用程序部分

# iphone - iPhone向后播放caf音频

> ID：11912594
> 
> 赞同：0
> 
> 时间：2012-08-11T06:39:19.963
> 
> 标签：iphone, objective-c, ios, audio, caf

我正在编写一个应用程序，我需要在其中录制音频并向后播放。我已经使用 AVAudioRecorder 将音频录制到一个 caf 文件中，并且我已经能够使用 AVAudioPlayer 和 MPMoviePlayerController 向前播放它。我尝试将 MPMoviePlayerController.currentPlaybackRate 设置为 -1，但它不会产生任何噪音。通过研究，我发现我需要逐字节反转音频文件，但我不知道该怎么做。有没有办法将caf文件读取到数组并从数组中写入？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:56:12.640

我开发了一个示例应用程序，它记录用户所说的内容并向后播放。我已经使用 CoreAudio 来实现这一点。[链接到应用程序代码](https://github.com/kiranb/iReversePlay)。

由于每个样本的大小为 16 位（2 字节）（单声道）（这取决于您用于记录的属性）。您可以通过从记录结束开始并向后读取将其复制到不同的缓冲区来一次加载每个样本。当您到达数据的开头时，您已经反转了数据并且播放将被反转。

```
// set up output file
AudioFileID outputAudioFile;

AudioStreamBasicDescription myPCMFormat;
myPCMFormat.mSampleRate = 16000.00;
myPCMFormat.mFormatID = kAudioFormatLinearPCM ;
myPCMFormat.mFormatFlags =  kAudioFormatFlagsCanonical;
myPCMFormat.mChannelsPerFrame = 1;
myPCMFormat.mFramesPerPacket = 1;
myPCMFormat.mBitsPerChannel = 16;
myPCMFormat.mBytesPerPacket = 2;
myPCMFormat.mBytesPerFrame = 2;

AudioFileCreateWithURL((__bridge CFURLRef)self.flippedAudioUrl,
                       kAudioFileCAFType,
                       &myPCMFormat,
                       kAudioFileFlags_EraseFile,
                       &outputAudioFile);
// set up input file
AudioFileID inputAudioFile;
OSStatus theErr = noErr;
UInt64 fileDataSize = 0;

AudioStreamBasicDescription theFileFormat;
UInt32 thePropertySize = sizeof(theFileFormat);

theErr = AudioFileOpenURL((__bridge CFURLRef)self.recordedAudioUrl, kAudioFileReadPermission, 0, &inputAudioFile);

thePropertySize = sizeof(fileDataSize);
theErr = AudioFileGetProperty(inputAudioFile, kAudioFilePropertyAudioDataByteCount, &thePropertySize, &fileDataSize);

UInt32 dataSize = fileDataSize;
void* theData = malloc(dataSize);

//Read data into buffer
UInt32 readPoint  = dataSize;
UInt32 writePoint = 0;
while( readPoint > 0 )
{
    UInt32 bytesToRead = 2;

    AudioFileReadBytes( inputAudioFile, false, readPoint, &bytesToRead, theData );
    AudioFileWriteBytes( outputAudioFile, false, writePoint, &bytesToRead, theData );

    writePoint += 2;
    readPoint -= 2;
}

free(theData);
AudioFileClose(inputAudioFile);
AudioFileClose(outputAudioFile); 
```

希望这可以帮助。

# c++ - Qt4.8构建mysql、odbc和sqlite2问题

> ID：11912596
> 
> 赞同：0
> 
> 时间：2012-08-11T06:39:28.117
> 
> 标签：c++, visual-studio-2010, qt4

我正在使用 VS2010 构建一个小型静态 qt 库，不幸的是，mysql 得到了这个错误：`c:\qtstatic\src\sql\kernel\../drivers/mysql/qsql_mysql.h(52) : fatal error C1083 : Cannot open include file: 'mysql.h': No such file or directory`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:40:57.500

你有安装mysql吗？如果是，请检查它的头文件在哪里。

# javascript - Javascript矩阵和距离计算

> ID：11912598
> 
> 赞同：0
> 
> 时间：2012-08-11T06:40:00.283
> 
> 标签：javascript, matrix, distance

我有一个问题，也许有人可以帮助我。这是我的代码：当我试图计算距离时，我可以将我的函数用于我给它的普通变量： `document.write(getDistance(45,35,41,35));` 但是当我从我的矩阵调用时不起作用你知道有什么问题吗？ `document.write(getDistance(parseFloat($m.rows[0][3]),parseFloat($m.rows[1][3]),parseFloat($m.rows[0][4]),parseFloat($m.rows[1][4])));`

tnx

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
</head>
<script type="text/javascript">
function Matrix() {
    this.rows = new Array();
}
var $m = new Matrix();
$m.rows[0] = new Array(1, 10, 45,41 );
$m.rows[1] = new Array(2, 5, 35,35 );
$m.rows[2] = new Array(3, 8, 41,40 );

alert($m.rows[1][2]);

//Calculate the shortest distance based on lat and long
function getDistance(lat1, lat2, lon1, lon2){
    var R = 6371; //KM
    var d = Math.acos(Math.sin(lat1) * Math.sin(lat2) +
            Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1)) * R
        return d    
};

document.write(getDistance(parseFloat($m.rows[0][3]),parseFloat($m.rows[1][3]),parseFloat($m.rows[0][4]),parseFloat($m.rows[1][4])));
document.write(getDistance(45,35,41,35));

    </SCRIPT>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:45:02.867

您正在访问矩阵中的无效元素：

```
parseFloat($m.rows[1][4]) 
```

您的矩阵是 4x4，但您正在访问第二行中的第五个值。

# javascript - 尝试验证表单

> ID：11912608
> 
> 赞同：0
> 
> 时间：2012-08-11T06:41:16.367
> 
> 标签：javascript, forms, validation

尝试学习 JavaScript，我想取得了不错的进步，但我一直在验证表单，试图查看是否有人有同样的问题，搜索没有出现任何问题。那你能帮帮我吗？

```
 var minlength = 6;
var pwlength = document.getElementById('psswrd');
var invalid = " ";

function validate() {

    if (pwlength.length < minlength && pwlength == invalid) {
        alert("Password not valid");

    else { 
        alert("Password okay!");
    }
}

submitbtn.onClick = validate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:55:02.200

*   您在哪里称呼它并不明显-我已将其包装在 window.onload
*   您没有正确访问按钮。取决于您如何命名或标识按钮，其中一个或将起作用但是不要将 onclick 处理程序分配给提交按钮，而是将提交处理程序分配给 `document.forms[0].submitbtn` `document.getElementById("submitbtn")`表单 `document.getElementsByName("submitbtn")[0]`
*   没有必要对单个空格进行测试，因为无论如何它都少于 6 个字符。
*   && 是 AND，你的意思是 || 或者
*   onclick 必须全部小写。
*   您将 onclick 分配给 validate 而不是 validate 的结果
*   你不停止提交

我已经从[这里](https://stackoverflow.com/a/2308157/295783)进行了修剪 ，我假设表单具有 ID="form1"

```
window.onload=function()
  document.getElementById("form1").onsubmit = validate;
}

if(typeof String.prototype.trim !== 'function') { // let's help older IEs
  String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, ''); 
  }
}

function validate() {
  var minlength = 6;
  var pw = document.getElementById('psswrd');
  if (pw.value.length < minlength || pw.value.trim() == "") {
    alert("Password not valid");
    pw.focus();
    return false;
  }
  return true; // allow submission  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:45:35.340

```
var minlength = 6;

var pwlength = document.getElementById('psswrd');

var invalid = " ";

function validate() {

    if (pwlength.length < minlength && pwlength == invalid) {
        alert("Password not valid");
}

    else { 
        alert("Password okay!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:51:38.547

你在这里有几个问题。

1）**`pwlength.length`**不会让你走得很远。`pwlength`等于 html 对象，而不是 html 对象的值。将实际变量更改为以下内容，您应该会得到正确的结果：

```
var pwlength = document.getElementById('psswrd').value; 
```

2) 在语句`else`部分之前`if ... else`，您需要`if`用大括号 ( `}`) 结束语句来结束语句。将该部分更改为以下内容：

```
} else { 
```

3）您的验证以检查长度`== invalid`是否为奇数。仔细检查并摆脱它。

4) 您的 onclick 事件需要如下所示：

```
submitbtn.onclick = function(){ validate() }; 
```

**注意：小写 event 关键字并`function() { ... };`包裹您要运行的函数。**

# android - facebook android 应用程序上的空白页面

> ID：11912609
> 
> 赞同：0
> 
> 时间：2012-08-11T06:41:44.747
> 
> 标签：android, facebook

[https://apps.facebook.com/norway_eid_greetings/](https://apps.facebook.com/norway_eid_greetings/)

我制作了这个 android 应用程序并在 facebook 上注册。

我给了

画布网址为[http://apps.facebook.com/norway_eid_greetings/](http://apps.facebook.com/norway_eid_greetings/)

受保护的画布 URL 为[https://apps.facebook.com/norway_eid_greetings/](https://apps.facebook.com/norway_eid_greetings/)

移动网址为[http://www.facebook.com/apps/application.php?id=352658298145952](http://www.facebook.com/apps/application.php?id=352658298145952)

现在该应用程序说它遇到了问题

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:07:29.727

你不能设置：

```
canvas url: http://apps.facebook.com/norway_eid_greetings/

secured canvas url: https://apps.facebook.com/norway_eid_greetings/

mobile web url: http://www.facebook.com/apps/application.php?id=352658298145952 
```

因为您无法编辑这些页面。

您必须有一个网站并设置：

```
canvas url: http://myweb.com/norway_eid_greetings/

secured canvas url: https://myweb.com/norway_eid_greetings/

mobile web url: http://www.myweb.com/norway_eid_greetings/mobile/ 
```

现在您必须在您的网站中开发这些页面，当您连接到[http://apps.facebook.com/norway_eid_greetings/](http://apps.facebook.com/norway_eid_greetings/)时，您会看到您开发的内容就像您网站上的一个窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:10:23.660

您应该遵循这些教程 [fb-developer](https://developers.facebook.com/docs/mobile/android/build/)和 [fb-implemetation](http://ericosgood.com/prog/facebook-android-sdk-tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:04:28.413

您必须使用作为画布 url，安全.......您托管应用程序的 url，例如[http://www.domain.com/myapp](http://www.domain.com/myapp)而不是画布页面

# javascript - 这是javascript中基本/简单高阶函数的示例吗？

> ID：11912621
> 
> 赞同：1
> 
> 时间：2012-08-11T06:44:27.110
> 
> 标签：javascript

在阅读[Eloquent Javascript（第 6 章）](http://eloquentjavascript.net/chapter6.html)时，我试图掌握基本概念。有关于 Javascript 中的高阶函数的讨论。下面代码中的函数 processNumbers() 是高阶函数吗？

```
function addNumbers(number1, number2) {
  return (number1 + number2);   
}

function processNumbers(action, number1, number2) {
  return action(number1, number2);
}

document.write(processNumbers(addNumbers, 2, 10));​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:51:01.793

来自维基百科：

> 在数学和计算机科学中，高阶函数（也称为函数形式、泛函或函子）是至少执行以下操作之一的函数：
> 
> *   将一个或多个函数作为输入
> *   输出一个函数

所以是的，是一个更高级别的函数，因为它通过参数`processNumbers`将函数作为输入。`action`

# java - 如何共同处理原语和对象

> ID：11912626
> 
> 赞同：0
> 
> 时间：2012-08-11T06:44:44.937
> 
> 标签：java, reflection, primitive, autoboxing

这是我拥有的实用方法：

```
public static Class<?>[] getTypes(Object[] objects){
    Class<?>[] types = new Class<?>[objects.length];

    for (int i = 0; i < objects.length; i++) {
        types[i] = objects[i].getClass();
    }

    return types;
} 
```

**这是一个失败**的测试用例：

```
@Test
public void getTypesTest() {
    Object[] objects = {"String", new StringBuilder(), new Integer(5), 5};

    Class<?>[] classes = ReflectionUtils.getTypes(objects);
    assertTrue(classes[0].equals(String.class));
    assertTrue(classes[1].equals(StringBuilder.class));
    assertTrue(classes[2].equals(Integer.class));
    assertTrue(classes[3].equals(int.class)); // Fails here
} 
```

我意识到，**当我通过`5`内部时`Object[]`，这是 Boxed to`new Integer(5)`**。

我怎样才能得到我期望的行为？

**编辑**

我的期望：在我的测试中失败的断言将通过。我应该如何使用被测方法来实现这一目标？：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:04:20.180

您不能将原语视为对象，因为这是将原语定义为与对象不同的原因。通过拥有一个对象数组，您可以确保其中的所有内容都是对象，而不是原始对象。

* * *

An`int`不是对象，因此您不能将其放入 an 中，`Object[]`因此编译器将生成代码以自动将您的值设置为 5。即它调用`Integer.valueOf(5)`比对象更有效`new Integer(5)`但仍然是对象。

你不能调用`.equals()`一个原语，所以这个编译的事实告诉你它不是。

顺便说一句，您可以使用`int.class`来获取`int`.

> 我怎样才能得到我期望的行为？

你能用英语准确地说出你的期望吗？

* * *

对于那些感兴趣的人，Java 6 和 7 中 Integer.valueOf(int) 的代码

```
public static Integer valueOf(int i) {
    assert IntegerCache.high >= 127;
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:00:45.387

它失败的原因是你有一个对象数组。原始类型的值`int`被[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，`Integer`因此数组`Integer`在第三个位置包含一个实例。您可以通过替换使测试通过

```
assertTrue(classes[3].equals(int.class)); // Fails here 
```

和

```
assertTrue(classes[3].equals(Integer.class)); 
```

# android - 在 ContentResolver 的公共构造函数调用中应该做什么？

> ID：11912627
> 
> 赞同：0
> 
> 时间：2012-08-11T06:44:51.470
> 
> 标签：android, android-contentprovider

在`ContentResolver`类中，可以使用公共构造函数。`getContentResolver()`通常我们过去通过调用方法来调用所有方法`Context`，一切正常。当我调用它的公共构造函数时，`ContentResolver`它需要实现为内部类型。那么那里应该做些什么呢？如果不需要，是否需要任何配置，那么为什么它是内部类型。

```
 ContentResolver cr = new ContentResolver(this) {} ; 
```

我不能直接调用构造函数

```
 ContentResolver cr = new ContentResolver(this); 
```

为什么会这样？

提前致谢

# java - 关于shutdownhook的理解

> ID：11912628
> 
> 赞同：0
> 
> 时间：2012-08-11T06:44:52.857
> 
> 标签：java

我正在通过java的关闭挂钩功能，我的分析是..shutdownhook允许注册一个将立即创建但仅在JVM结束时启动的线程！所以它是某种“全局 jvm 终结器”，您可以在这个线程中制作有用的东西（例如关闭 java 资源，如嵌入式 hsqldb 服务器）。这适用于 System.exit() 或 CTRL-C / kill -15（当然不适用于 unix 上的 kill -9）。

请告知更多实际用途，如果可能的话，请提供一个小例子将有助于使理解更清晰..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:54:39.390

当关闭钩子添加到运行时实例时，它会添加到线程列表中，以便在 JVM 干净终止时启动。

示例：使用关闭挂钩确保`java.awt.TrayIcon`从系统托盘中删除 a。

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    public void run() {
        try {
            if (SystemTray.isSupported()) {
                SystemTray.getSystemTray().remove(yourTrayIcon);
            }
        } catch (Exception e) {
            // failed to remove
            e.printStackTrace();
        }
    }
}); 
```

更多可以在[官方文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)中阅读。

# dotcloud - 点云多种服务

> ID：11912631
> 
> 赞同：1
> 
> 时间：2012-08-11T06:45:06.633
> 
> 标签：dotcloud

我是 dotcloud 的新手，对多种服务如何协同工作感到困惑。

我的 yaml 构建文件是：

```
www:
  type: python
db:
  type: postgresql
worker:
  type: python-worker
broker:
  type: rabbitmq 
```

我的 supervisord 文件包含启动 django celery 和 celerycam 的命令。

当我将代码推送到我的应用程序时，我可以看到 www 和 worker 服务都启动了它们自己的 celery 和 celery cam 实例，例如日志文件也会有所不同。这是有道理的（尽管在 IMO 的 dotcloud 文档中并没有说得很清楚 - 文档讨论了设置工作服务，但没有讨论如何将其与其他服务结合起来），但确实提出了如何配置应用程序的问题其中 python 服务主要服务于网页，而 python worker 服务用于后台任务，例如：celery。

dotcloud[文档守护进程](http://docs.dotcloud.com/guides/daemons/)提到了这一点：

> “但是，您应该知道，当您扩展应用程序时，cron 任务将安排在所有扩展的实例中——这可能不是您所需要的！因此，在许多情况下，使用单独的服务仍然会更好。
> 
> 同样，许多（非工作）服务已经运行了 Supervisor，因此您可以在这些服务中运行额外的后台作业。再说一次，请记住，如果您扩展应用程序，这些后台作业将在多个实例中运行。此外，如果您将后台作业添加到您的 Web 服务，它将获得更少的资源来服务页面，并且您的性能将受到重大影响。”

您如何配置 dotcloud 和您的应用程序以仅在一项服务上运行网络服务器，并在工作人员服务上运行后台任务？您会通过增加 celery 中的并发设置（并垂直扩展一项服务）、添加额外的工作人员服务或两者兼而有之来扩展工作人员吗？

您是否会这样做，首先 webserver 服务不必在处理后台任务时使用资源，其次您可以独立于 webserver 服务扩展工作服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:40:16.867

有两个技巧。首先，您可以为您的 www 和 worker 服务使用不同的[approot](http://docs.dotcloud.com/guides/build-file/#specifying-the-root-directory-of-a-service)来分离它们将运行的代码：

```
www:
  type: python
  approot: frontend
# ...
worker:
  type: python-worker
  approot: backend
# ... 
```

其次，由于每个[approot](http://docs.dotcloud.com/guides/hooks/#post-install)的安装后脚本都不同，因此您可以复制一个文件以成为该特定服务的正确 supervisord.conf。

您可能还想查看 dotCloud 教程和 django-celery 的示例代码。

/安迪

# c - VC++ 2010 中的内联汇编错误

> ID：11912635
> 
> 赞同：1
> 
> 时间：2012-08-11T06:45:15.847
> 
> 标签：c, visual-studio-2010, assembly, x86

我正在尝试在 VC++ 2010 中创建一些内联程序集，以将 RGB 字节缓冲区解压缩到 RGBA 字节缓冲区中，这就是我想出的：

但我得到了错误

```
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(28):     error C2414: illegal number of operands
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(28):     error C2400: inline assembler syntax error in 'first operand'; found ':'
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(29):     error C2400: inline assembler syntax error in 'opcode'; found ':'
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(29):     warning C4405: 'MOV' : identifier is reserved word
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(30):     error C2415: improper operand type
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(31):     error C2415: improper operand type
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(37): warning C4405: 'loop' : identifier is reserved word
1>c:\users\tom\documents\visual studio 2010\projects\source\engine\image_load.c(71): warning C4018: '<' : signed/unsigned mismatch 
```

我不确定它有什么问题，这是我的代码：

```
void RGBtoRGBA (byte *rgba, const byte *rgb, int pixelCount) {
    __asm { 
        MOV EDX, pixelCount
        MOV EBX, rgba
        MOV ECX, rgb
        loop:
            MOV [EBX], ECX
            MOV [EBX+1], [ECX+1]
            MOV [EBX+2], [ECX+2] 
            MOV [EBX+3], 255
            ADD EBX, 4
            ADD ECX, 3
            DEC EDX
            JNZ loop
    }
} 
```

原谅我，我是组装新手:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:53:14.227

没有通用指令支持你写的 2 个内存操作数：

```
MOV [EBX+1], [ECX+1]
MOV [EBX+2], [ECX+2] 
```

通用指令通常只能有以下两种操作数组合：

*   寄存器 + 常数
*   寄存器+内存
*   注册+注册
*   记忆+常数

您必须重写代码以使用有效的操作数组合。开始阅读 CPU 手册，了解指令的详细信息。

另外，`loop`是指令名称。您不应该将它用于标签名称。

# python - 将 2 个或更多变量传递给 django 模板

> ID：11912637
> 
> 赞同：0
> 
> 时间：2012-08-11T06:45:32.080
> 
> 标签：python, django-templates

我想将 2 个列表传递给 django 模板，但只有第一个被渲染，这是 index.html：

```
enter code here
{% if latest_poll_list %}
<ul>
{% for poll in latest_poll_list %}
    <li>{{ poll.question }}</li>
{% endfor %}
</ul>
{% else %}
<p>No polls are available.</p>
{% endif %}

{% if menu_items_list %}
    <table id="menu_items_list">
<tr>
    {% for item_url, item_name in menu_items_list %}
    <td><a href="item_url">item_name</a>
    {% endfor %}
    </tr>
</table>
 {% endif %}
<h3>{{ index_name }}</h3> 
```

这是urlconf：

```
urlpatterns = patterns('zzz.polls.views',
url(r'^$',
    ListView.as_view(
    queryset=Poll.objects.order_by('pub_date')[:5],
    context_object_name='latest_poll_list',
    template_name='index.html')), 
```

和观点：

```
def index(request):
    latest_poll_list = Poll.objects.all().order_by('pub_date')[:5]
    index_name = 'INDEX PAGE'
    menu_items_list = ['somesite.com', 'Googy') for x in xrange(5)]
    return render_to_response('index.html', {'latest_poll_list': latest_poll_list,
                                             'menu_items_list' : menu_items_list,
                                             'index_name': index_name}) 
```

我在哪里犯错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:49:23.607

LC 的语法是错误的。

```
>>> ['somesite.com', 'Googy' for x in xrange(5)]
  File "<stdin>", line 1
    ['somesite.com', 'Googy' for x in xrange(5)]
                               ^
SyntaxError: invalid syntax
>>> [('somesite.com', 'Googy') for x in xrange(5)]
[('somesite.com', 'Googy'), ('somesite.com', 'Googy'), ('somesite.com', 'Googy'), ('somesite.com', 'Googy'), ('somesite.com', 'Googy')] 
```

# c++ - 从目标c转换时如何在c中编写变量的属性

> ID：11912641
> 
> 赞同：2
> 
> 时间：2012-08-11T06:46:12.013
> 
> 标签：c++, objective-c, visual-c++, cocos2d-iphone, cocos2d-x

我正在移植一个名为sneakyness / SneakyInput 的项目，该项目托管在[https://github.com/sneakyness/SneakyInput](https://github.com/sneakyness/SneakyInput)的github 上。它在 cocos2d-iphone 的 objective-c 中。我想将它移植到 c++ 以在 cocos2d-x 中使用。在 SneakyJoystick.h 中 where 等属性 `@property (nonatomic, readonly) CGPoint stickPosition;`是 `CGPoint stickPosition`一个已经定义好的变量。我通常将这个变量定义为`CCPoint stickPosition;`但是我很困惑 `@property (nonatomic, readonly) CGPoint stickPosition;` 我应该用 C++ 代码编写它还是保留它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:30:53.380

如果你有 C++ 代码，你可以保持原样（C++）并与 Objective-C 交互而不会出现问题。

相反，如果您的意图是将所有内容重写为 Objective-C，则应将目标 C 属性替换为 C++ 中的属性：

## C++ 中的属性

```
private: 
    int x; 
public:  
    int getX()
    {
        return x;
    }
    void setX(int value) 
    {
        x = value;
    } 
```

## Objective-C 中的属性

```
@property(nonatomic) int x;

@synthesize x; 
```

请记住，Objective-C 中的属性声明分为两个文件：`@property`进入头文件（.h），`@synthesize`进入实现文件（.m）。

要更好地了解如何`@property`和`@synthesize`工作，请查看[苹果声明的属性文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)和/或[其他问题](https://stackoverflow.com/questions/10799015/use-of-property-and-synthesise)。

# solr - 如何将方面添加到 pysolr 查询

> ID：11912642
> 
> 赞同：2
> 
> 时间：2012-08-11T06:47:07.127
> 
> 标签：solr, python-2.7, pysolr

我是 solr 的新手，正在使用 pysolr，我有一个非常基本的问题。

```
How can I add a facet to the pysolr query?
my solr query is: ip:8983/solr....q=...&facet=on&facet.field=xyz 
```

我希望它在浏览器中工作。

我想知道如何在下面的代码中实现它，

> 在 pysolr(facet=on&facet.field=xyz) 中添加构面的语法是什么

**

```
solrquery = "(.................. )" 
 solr.search([solrquery],) 
```

**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T10:48:22.877

采用

```
solrquery = "(.................. )" 
solr.search([solrquery],facet = 'on' ,** {'facet.field' : ['fieldname']}) 
```

# css - CSS：带有提交按钮样式的输入字段

> ID：11912647
> 
> 赞同：2
> 
> 时间：2012-08-11T06:48:37.707
> 
> 标签：css

我目前正在使用一个输入字段来搜索我的页面。但我正在经历一些 CSS 样式问题。我在输入字段中放置了提交按钮，它是放大镜的图像。问题是该按钮不会通过跨浏览器留在其位置。在火狐浏览器中看起来不错，但在其他浏览器中看起来很糟糕。

如何让提交按钮始终保持在输入字段内？[例子](http://webprolearner2346.zxq.net/css-test2/)

谢谢你！

**与对象相关的 CSS**

```
<style>
.search-input {
    padding: 0 5px 0 22px;
    border: 2px solid #DADADA;
    height: 30px;
    font-size: 12px;
    line-height: 30px;
    border-radius: 25px;
    -moz-border-radius: 25px;
    -webkit-border-radius: 25px;

    background: #FFF; /* old browsers */

}

.search-input li {
list-style: none outside none;
}

.search-submit {
    width: 13px;
    height: 13px;
    border: none;
    background: url(http://webprolearner2346.zxq.net/css-test2/images/mag-glass.png) no-repeat;
    display: block;
    position: absolute;
     right: 170px;
    text-indent: -9999em;
    top: 60px;
}

.search{
    float: right;
    margin-right: 30px;
    margin-top: 35px;
}
</style> 
```

**HTML**

```
<div id="header">
<div class="search"><input type="text" class="search-input" name="search" value="Search"/><input type="submit" class="search-submit" /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:31:44.193

使用我遇到的这种更好的方法。它运行良好，并通过 Web 开发人员工具进行了测试。干杯@！！！

**HTML**

```
<div id="header">
    <form id="search">
        <input id="searchField" type="text" />
        <input id="searchSubmit" type="submit" value="" />
    </form>
</div> 
```

**CSS**

```
#search{
    float: right;
    margin-right: 30px;
    margin-top: 35px;
}

#searchField{
    border: 1px solid #FFEDE8;
    float: left;
    height: 20px;
    padding-right: 25px;
    width: 140px;}

#searchSubmit{
    background: url("http://webprolearner2346.zxq.net/css-test2/images/mag-glass.png") no-repeat scroll 0 0 transparent;
    border: medium none;
    cursor: pointer;
    height: 20px;
    margin-left: -22px;
    margin-top: 5px;
    width: 20px;
} 
```

# java - android - 运行简单的墙纸应用程序时出错

> ID：11912655
> 
> 赞同：1
> 
> 时间：2012-08-11T06:50:05.880
> 
> 标签：java, android

我对android编程很陌生。我试图通过创建一个设置墙纸背景的简单应用程序来学习 android。我承认android开发中有很多基本概念我仍然不了解和理解，所以请对我好一点。

我使用 Android SDK 4.1，Eclipse Indigo。

我设置了我的 AVD 规格：

```
CPU/ABI: ARM (armeabi-v7a)
Target: Android 4.1 (API level 16)
Skin: WVGA800 
SD Card: 512 
```

每次运行应用程序时都会出错。

错误：

```
 08-11 14:11:51.733: E/Trace(696): error opening trace file: No such file or directory (2)
08-11 14:11:52.383: D/dalvikvm(696): GC_FOR_ALLOC freed 44K, 3% free 8054K/8259K, paused 44ms, total 45ms
08-11 14:11:52.443: I/dalvikvm-heap(696): Grow heap (frag case) to 14.643MB for 7056016-byte allocation
08-11 14:11:52.534: D/dalvikvm(696): GC_CONCURRENT freed 1K, 2% free 14943K/15175K, paused 25ms+5ms, total 85ms
08-11 14:11:53.093: D/dalvikvm(696): GC_FOR_ALLOC freed (ImageView.java:120)
08-11 14:11:53.724: I/dalvikvm(696):   at android.widget.ImageView.(ImageView.java:110)
08-11 14:11:53.724: I/dalvikvm(696):   at java.lang.reflect.Constructor.constructNative(Native Method)
08-11 14:11:53.724: I/dalvikvm(696):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
08-11 14:11:53.763: I/dalvikvm(696):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-11 14:11:53.763: I/dalvikvm(696):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-11 14:11:53.763: I/dalvikvm(696):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
08-11 14:11:53.763: I/dalvikvm(696):   at android.app.Activity.setContentView(Activity.java:1867)
08-11 14:11:53.763: I/dalvikvm(696):   at com.example.androidwallpaper.MainActivity.onCreate(MainActivity.java:12)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.Activity.performCreate(Activity.java:5008)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-11 14:11:53.773: I/dalvikvm(696):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-11 14:11:53.773: I/dalvikvm(696):   at android.os.Looper.loop(Looper.java:137)
08-11 14:11:53.773: I/dalvikvm(696):   at android.app.ActivityThread.main(ActivityThread.java:4745)
08-11 14:11:53.773: I/dalvikvm(696):   at java.lang.reflect.Method.invokeNative(Native Method)
08-11 14:11:53.773: I/dalvikvm(696):   at java.lang.reflect.Method.invoke(Method.java:511)
08-11 14:11:53.773: I/dalvikvm(696):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-11 14:11:53.773: I/dalvikvm(696):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-11 14:11:53.773: I/dalvikvm(696):   at dalvik.system.NativeStart.main(Native Method)
08-11 14:11:53.804: D/skia(696): --- decoder->decode returned false
08-11 14:11:53.804: D/AndroidRuntime(696): Shutting down VM
08-11 14:11:53.804: W/dalvikvm(696): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-11 14:11:53.823: E/AndroidRuntime(696): FATAL EXCEPTION: main
08-11 14:11:53.823: E/AndroidRuntime(696): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidwallpaper/com.example.androidwallpaper.MainActivity}: android.view.InflateException: Binary XML file line #43: Error inflating class 
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.os.Looper.loop(Looper.java:137)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-11 14:11:53.823: E/AndroidRuntime(696):  at java.lang.reflect.Method.invokeNative(Native Method)
08-11 14:11:53.823: E/AndroidRuntime(696):  at java.lang.reflect.Method.invoke(Method.java:511)
08-11 14:11:53.823: E/AndroidRuntime(696):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-11 14:11:53.823: E/AndroidRuntime(696):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-11 14:11:53.823: E/AndroidRuntime(696):  at dalvik.system.NativeStart.main(Native Method)
08-11 14:11:53.823: E/AndroidRuntime(696): Caused by: android.view.InflateException: Binary XML file line #43: Error inflating class 
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
08-11 14:11:53.823: E/AndroidRuntime(696):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-11 14:11:53.823: E/AndroidRuntime(696):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.Activity.setContentView(Activity.java:1867)
08-11 14:11:53.823: E/AndroidRuntime(696):  at com.example.androidwallpaper.MainActivity.onCreate(MainActivity.java:12)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.Activity.performCreate(Activity.java:5008)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-11 14:11:53.823: E/AndroidRuntime(696):  ... 11 more
08-11 14:11:53.823: E/AndroidRuntime(696): Caused by: java.lang.reflect.InvocationTargetException
08-11 14:11:53.823: E/AndroidRuntime(696):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-11 14:11:53.823: E/AndroidRuntime(696):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
08-11 14:11:53.823: E/AndroidRuntime(696):  ... 26 more
08-11 14:11:53.823: E/AndroidRuntime(696): Caused by: java.lang.OutOfMemoryError
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.content.res.Resources.loadDrawable(Resources.java:1930)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.widget.ImageView.(ImageView.java:120)
08-11 14:11:53.823: E/AndroidRuntime(696):  at android.widget.ImageView.(ImageView.java:110)
08-11 14:11:53.823: E/AndroidRuntime(696):  ... 29 more
08-11 14:11:59.383: I/Process(696): Sending signal. PID: 696 SIG: 9 

```

我的代码如下：

**`activity_main.xml`**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/IVDisplay"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/wp1" />

<Button
    android:id="@+id/bSetWallPaper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Set Wallpaper" />

<HorizontalScrollView
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/IVimage1"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp1" />

        <ImageView
            android:id="@+id/IVimage2"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp2" />

        <ImageView
            android:id="@+id/IVimage3"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp3" />

        <ImageView
            android:id="@+id/IVimage4"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp4" />

        <ImageView
            android:id="@+id/IVimage5"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp5" />

        <ImageView
            android:id="@+id/IVimage6"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp6" />

        <ImageView
            android:id="@+id/IVimage7"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp7" />

        <ImageView
            android:id="@+id/IVimage8"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/wp8" />
    </LinearLayout>
</HorizontalScrollView>

</RelativeLayout> 
```

**`MainActivity.java`**

```
package com.example.androidwallpaper;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void setWallPaper (View view) {
        new AlertDialog.Builder(this).setTitle("Codes").setMessage("Put codes here later!").
        setNeutralButton("Close", null).show();  
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**`AndroidManifest.xml`**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.androidwallpaper"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

下面是错误的屏幕截图。

![在此处输入图像描述](../Images/8af14a784ba338ccd2ba92cd561d0261.png)

下面是图形布局的屏幕截图。

![在此处输入图像描述](../Images/66d1c06978c5651f648a116f80411cd3.png)

请帮忙。我真的很需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:34:42.030

**1.**首先请看你给设置壁纸的正确路径。

**2.**如果您是 Android 或任何编程语言或框架的新手，请将其分解为多个部分，当您拥有所有功能部分后，将它们组合在一起......

您已经使用过警报对话框、菜单等……但是您是否尝试过将墙纸放在首位，在这种情况下，这是您的主要目标。

`OOAD`在编写程序时，无论是小程序还是大程序，您都应该应用原则......

这是应用墙纸的 2 行代码，试试这个..然后尝试围绕它构建

```
WallpaperManager wpm = WallpaperManager.getInstance(Your_Activity.this);
wpm.setBitmap(bit_map_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:08:49.860

尝试将您的 java 文件更改为此，看看它是如何工作的。不确定这是否正是您想要的，但我认为它应该对您有所帮助。

```
package com.example.androidwallpaper;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    AlertDialog.Builder builder;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        builder = new AlertDialog.Builder(this);
        builder.setTitle("Codes");
        builder.setMessage("Put codes here later!");
        builder.show();
    }
    /*
    public void setWallPaper (View view) {
        new AlertDialog.Builder(this).setTitle("Codes").setMessage("Put codes here later!").
        setNeutralButton("Close", null).show();  
    }*/

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

你也应该可以说`builder.setNeutralButton()`

# java - 在 android 中使用 twitter api

> ID：11912657
> 
> 赞同：-1
> 
> 时间：2012-08-11T06:50:19.753
> 
> 标签：java, android

我的时间主要是作为图形/网页设计师。我意识到没有真正设计精美的 android twitter 客户端。所以，我自己设计了 UI，我不得不说它的安静令人印象深刻。问题是，我从来没有通过开发者网站上的 android 教程，因为我即将开始上大学并且没有时间继续学习它的所有内容。我只是想知道是否有一个完整的教程，关于如何用我现在拥有的东西为 android 构建一个 twitter 客户端。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:57:40.513

您可能会使用[JTwitter](http://www.winterwell.com/software/jtwitter.php)，这是一个用于 Java 的 Twitter 客户端库。另请参阅[此博客](http://www.mobisoftinfotech.com/blog/android/1089/)并[遵循本教程](http://abhinavasblog.blogspot.com/2011/06/for-all-my-code-thirsty-friends-twitter.html)

# java - 你能在 Java 中重复执行一个任务吗？

> ID：11912659
> 
> 赞同：1
> 
> 时间：2012-08-11T06:50:38.740
> 
> 标签：java, scheduled-tasks

是否可以每天、每分钟、每秒、每年重复执行一项任务？我希望它像守护进程一样运行。

我需要一个定时任务来连续搜索数据库；如果它找到某个值，那么它应该执行进一步的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:56:53.147

> 我想问是否可以重复

您可以使用循环、ScheduleExecutorService、Timer 或 Quartz。

> 每一天每一分钟每一秒每一年

所以每秒一次。

> 我希望它像守护进程一样运行。

那我就让它成为一个守护线程。不需要让它“像”一个守护进程。

> 如果它找到正确的值，那么它应该完成剩余的任务。

很简单。

读取数据，检查值，如果它是你想要的，其余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T07:07:58.057

java.util.Timer 和 java.util.TimerTask 类，我将它们统称为 Java 计时器框架，使程序员可以轻松地安排简单的任务。

```
public class Reminder {
    Timer timer;

    public Reminder(int seconds) {
        timer = new Timer();
        timer.schedule(new RemindTask(), seconds*1000);
    }

    class RemindTask extends TimerTask {
        public void run() {
            System.out.format("Time's up!%n");
            timer.cancel(); //Terminate the timer thread
        }
    }

    public static void main(String args[]) {
        new Reminder(5);
        System.out.format("Task scheduled.%n");
    }
} 
```

或 **安排定时器任务重复运行**

```
int delay = 5000;   // delay for 5 sec.
int period = 1000;  // repeat every sec.
Timer timer = new Timer();

timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            // Task here ...
        }
    }, delay, period); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T06:56:14.370

也许看看[java.util.Timer](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)或[Quartz Scheduler](http://quartz-scheduler.org/)会有所帮助。

[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)也可能会有所帮助。查看他们的示例代码，您应该能够做到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T06:56:27.473

为了根据时间执行任务，您需要使用线程。查看此链接以了解有关它们的更多信息：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/threads.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/threads.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T06:56:36.093

嗯，所以程序将一直运行？可能想研究[Java Timer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html#Timer(boolean))

# jquery - 在基于下拉值的文本框值 0 或大于 0 的 jquery 验证中

> ID：11912661
> 
> 赞同：0
> 
> 时间：2012-08-11T06:50:43.200
> 
> 标签：jquery, validation, plugins

这里我使用 jquery validate 插件。在我的表单中有一个下拉选择和一个输入文本框。当我选择下拉值 0 时，文本框应该接受大于 0 否则必须通过错误。如果我选择下拉值 1 或 2 那么文本框应该只接受 0，不超过 0，必须通过错误。这是我的要求。请帮助解决这个问题。

参考：http: [//jsfiddle.net/ssthil/vqnpy/11/](http://jsfiddle.net/ssthil/vqnpy/11/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:18:19.383

您必须为文本框添加自定义验证规则。它检查复选框值和下拉值。

在您的表单验证中

```
textbox: {
      required: true,
      custom_rule : true
       } 
```

然后

```
$.validator.addMethod("custom_rule", function(value, element) {

var dropdown_val = $("#dropdown").val();

if((dropdown_val==0 && value>0) || (dropdown_val==1 || dropdown_val==2 ) && value==0))
{
   return true;
}
else
{
   return false;
}

}, "if drop down 0 , input should greater than 0 , else input should be 0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-18T11:30:58.513

以防万一其他人被丢到这个帖子上。kanishka 的帖子也解决了我的问题，但我也需要根据值的自定义消息。所以需要做的是以下几点：

在表单验证中：

```
rules: {
    textbox: {
      required: true,
      custom_rule : true
       }
}, messages {
    textbox: {
       required: mymessageprocessor //this is a function that returns custom messages
    } 
```

然后在最后添加这个javascript：

```
$.validator.addMethod("custom_rule", function(value, element) {

var dropdown_val = $("#dropdown").val();

if((dropdown_val==0 && value>0) || (dropdown_val==1 || dropdown_val==2 ) && value==0))
{
   return true;
}
else
{
   return false;
}

}, "");

function mymessageprocessor() {
    var dropdown_val = $("#dropdown").val();
    if (dropdown_val == 0) {
        return "value is zero";
    } else {
        return "value is greater than zero";
    } 
```

# qt - 如何使用 QTcpServer 监听知名的 tcp 端口

> ID：11912663
> 
> 赞同：0
> 
> 时间：2012-08-11T06:50:46.753
> 
> 标签：qt, qtnetwork, tcp-port

我想听一个著名的 tcp 端口，比如 80 或 25 。如何在 Qt 中执行此操作并使用 QTcpServer 类？或者更一般地说，一个被其他人使用的端口？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:23:34.983

除非他们停止，否则您无法在其他人侦听的端口上打开服务器。低于 1025 的端口属于特权范围，根据您的操作系统，您的程序可能需要提升权限

好吧，您可以选择不同的网络接口，但也许这不是您所追求的

# java - AndroidPlot 和 RectRegion

> ID：11912666
> 
> 赞同：0
> 
> 时间：2012-08-11T06:51:19.530
> 
> 标签：java, android, androidplot

我正在使用 Androidplot (v0.5.0)，我希望我绘制的系列的片段是不同的颜色。我想我需要使用 RectRegion 但该区域从不显示。

```
XYSeries series = new SimpleXYSeries(timestamps, item.getValues(), "");  
LineAndPointFormatter seriesFmt = new LineAndPointFormatter(
        Color.rgb(0, 200, 0),
        Color.rgb(0, 100, 0),
        Color.rgb(150, 190, 150));

XYRegionFormatter regionFmter = new XYRegionFormatter(Color.RED);
RectRegion region = new RectRegion(0, 10, 0, 10);
seriesFmt.addRegion(region, regionFmter); 
```

我再也找不到 doco 了，但我可以从我试图实现的旧教程中找到旧图像。 [http://androidplot.com/w/images/thumb/1/12/RectRegions_final.jpg/398px-RectRegions_final.jpg](http://androidplot.com/w/images/thumb/1/12/RectRegions_final.jpg/398px-RectRegions_final.jpg)![在此处输入图像描述](../Images/2c339087390b653c50a6f7efa8e25948.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:03:22.577

这是生成您发布的图形的完整源代码的链接 - 希望能提供您正在寻找的答案:)

[https://androidplot.jira.com/source/browse/ANDROIDPLOT/trunk/Examples/DemoApp/src/com/androidplot/demos/XYRegionExampleActivity.java?hb=true](https://androidplot.jira.com/source/browse/ANDROIDPLOT/trunk/Examples/DemoApp/src/com/androidplot/demos/XYRegionExampleActivity.java?hb=true)

# javascript - 谷歌地图 API V3 Over_Query_Limit

> ID：11912668
> 
> 赞同：2
> 
> 时间：2012-08-11T06:51:34.773
> 
> 标签：javascript, google-maps-api-3, geolocation

我正在尝试使用循环显示一些标记（大约 10 到 15）并显示它们之间的方向（路线）。但是在执行代码时，会发生“Over_Query_Limit 错误”并通过网页上的警报框显示。地图显示正确，但未显示标记。我认为这是由于超出了对 DirectionsService 的请求，而 Google 不允许这样做。

但是，如果有人想打印方向，是否真的可以这样做，如果可以，那么可能的实现方法是什么。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:55:44.173

除了每日绝对限制（每六小时 625 次）外，还有一个速率限制。

解决此问题的一种方法是将您的请求链接起来，仅在前一个请求完成时才进行下一个请求。您*可能*能够使用`setTimeout`并找到一个有效的间隔，但这可能不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:48:38.243

你每天可以做 2500 个方向请求。阅读此链接[https://developers.google.com/maps/documentation/directions/#Limits](https://developers.google.com/maps/documentation/directions/#Limits)

为了减少请求的数量，您可以在您的请求中放置航点。如果您在每个航路点都需要一个标记，则航路点的活动中途停留属性

# imagemagick - ImageMagick 在 HSL 上的合成（不是 HSB 也不是 HSV）

> ID：11912670
> 
> 赞同：0
> 
> 时间：2012-08-11T06:51:39.410
> 
> 标签：imagemagick, photoshop, color-space, hsl, hsb

我只想通过编写一个 CUI 工具来替换 Photoshop 基于 HSL 的混合模式（颜色/色调/饱和度/亮度）。如果我可以通过 RMagick 做到这一点，那就更好了。

ImageMagick 可以管理 HSL 颜色空间，但 ImageMagick 的复合运算符 Colorize/Hue/Saturation/Luminize 被硬编码为基于 HSB 颜色空间。

有没有不编写逐像素处理代码的解决方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:01:51.433

我尝试了分离和组合的方法。然后一个故事开始了。

ImageMagick-6.6.9-7 有一个 rgb<->hsl 计算的精确错误。Ubuntu 12.04 LTS 的软件包存储库提供了它... grrrr（ImageMagick 本身，固定在 r4431 并且适用于 >= 6.6.9-9）

然后我坐下来做数学运算，得到一个简单的 -fx 表达式。

colorize_hsl.fx：

```
ul = u.lightness; vl = v.lightness;
bias = (ul < .5 ? ul : 1 - ul)/(vl < .5 ? vl : 1 - vl);
(v - vl)*bias + ul 
```

这是一个基于 rgb 的公式，用于设置新的亮度并保持其色调和饱和度。要获得 luminize_hsl，请交换 u 和 v。

临时变量（ul、vl 和 bias）在所有通道中都很常见，但 -fx 引擎可能会尝试 3 次。这不够...

# javascript - 确定表格宽度/高度的Javascript

> ID：11912673
> 
> 赞同：6
> 
> 时间：2012-08-11T06:52:45.037
> 
> 标签：javascript, html-table, width

我有一些 JavaScript 试图用来定义我的表格宽度/高度，以使其在不同的分辨率下流畅。它似乎适用于宽度，但我无法让它适用于高度。它将正确的数字设置为正确的变量，只是没有设置表格的高度。这就是我得到的..

```
<html>
<head>
<script type="text/javascript">
 var viewportwidth;
 var viewportheight;
 var tablewidth;
 var tableheight;
 if (typeof window.innerWidth != 'undefined'){ //set's viewport width/height into respective variables
              viewportwidth = window.innerWidth,
              viewportheight = window.innerHeight
         }else if (typeof document.documentElement != 'undefined'
             && typeof document.documentElement.clientWidth !=
             'undefined' && document.documentElement.clientWidth != 0){
               viewportwidth = document.documentElement.clientWidth,
               viewportheight = document.documentElement.clientHeight
         }else{
               viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
               viewportheight = document.getElementsByTagName('body')[0].clientHeight
         } 
 function asdf(){
 tablewidth = Math.round(viewportwidth/100*70);  //sets table width to 70% of viewport width
 tableheight = Math.round(tablewidth/100*74);    //sets table height to 74% of table width, this number is ambigous
 document.getElementById('poop').innerHTML = tableheight+', '+tablewidth+', viewport width is '+viewportwidth+'x'+viewportheight;
 document.getElementById('container').width = tablewidth;
 document.getElementById('container').height = tableheight;
}
</script>
</head>
<body onload="asdf();">
<span id="poop"></span>
    <table id="container" cellpadding="0" border="1" cellspacing="0" width="" height="">
        <tr><td colspan="5"></td></tr>
        <tr>
            <td width="38%"></td>
            <td width="12%"></td>
            <td width="21%"></td>
            <td width="14%"></td>
            <td width="15%"></td>
        </tr>
    </table>
</body>
</html> 
```

有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T09:30:02.060

试试这个可能这个工作

```
 var width = document.getElementById('container').style.offsetWidth;
    var height = document.getElementById('container').style.offsetheight; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T07:06:57.743

事实证明，Javascript 没有任何问题。我没有意识到你不能把 height 属性放在`<table>`元素中，它必须放在`<td>`元素中。

我确认，在 PhoneGap 中，高度 = 100% 的简单表格的大小不适合屏幕尺寸、HTML、CSS、DIV 内部或外部等...

我的解决方案受到这篇文章的启发：我有计算通过身体高度来计算桌子的高度，并以像素为单位分配给我的每个桌子的尺寸。

/* 此代码之前已记录，工作正常，在这里只是为了完成演示 */

```
var body = document.body,
    html = document.documentElement;

var height = Math.max( body.scrollHeight, body.offsetHeight, 
                       html.clientHeight, html.scrollHeight, html.offsetHeight );

/* this is a Topcoat navigation bar and I get its height via offsetHeight of the surrounding <div> */
var hTopBar = document.getElementById("pgTopBar").offsetHeight; 

var sH = Math.floor((height - hTopBar) / 3);

document.getElementById("td1").height = sH;
document.getElementById("td2").height = sH;
document.getElementById("td3").height = sH;
document.getElementById("td4").height = sH;
document.getElementById("td5").height = sH;
document.getElementById("td6").height = sH; 
```

在我的例子中，每行 2 个单元格，表格中有 3 行，所以高度是表格所需高度的 33%。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T07:02:17.333

为什么不直接使用 CSS？

```
#container {
  width: 70%;
  height: 74%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T07:31:58.343

工作的javascript代码是

```
//With small change, which you are missing
document.getElementById('container').style.width = tablewidth+"px";
document.getElementById('container').style.height = tableheight+"px"; 
```

您可以查看[小提琴演示](http://jsfiddle.net/tbNBw/1/)

# javascript - jQuery 向下滑动隐藏元素 onclick

> ID：11912678
> 
> 赞同：1
> 
> 时间：2012-08-11T06:53:48.863
> 
> 标签：javascript, jquery, html

我有一个这样的 hmtl 结构，可以无限重复

```
 <div class='rr'>
  <div class='rrclk'>
   Click Me
  </div>
  <div class='rrshow'>
    I am now shown
   </div> 
```

有没有办法只在被点击的 rrclk 的父级中显示 rrshow ？因此，如果您单击一个 rrclk，则只会显示同一 rr 中的 rrshow，如果这有意义的话。

谢谢

编辑：

谢谢，有什么办法可以用 AJAX 做同样的事情，像这样：

```
$('.rrclk').click(function () {
    $.ajax({
        type: "POST",
        url: 'getdata.php',
        data: {
            uid: this.id
        },
        success: function (data) {
   $(this).parent().find(".rrshow").html(data);
   $(this).parent().find(".rrshow").fadeToggle("fast");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:58:53.953

希望这是你想要的

```
$(".rrclk").click(function(){
   //hide all rrshow
   $(".rrshow").hide();

   //show only required rrshow
   $(this).parent().find(".rrshow").show();
}); 
```

这是一个**[演示](http://jsfiddle.net/uttara/qEJza/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:58:22.643

```
$('.rrclk').click(function() {
    $(this).next().show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:00:19.733

```
$('.rr .rrclk').click(function(){
   $(this).siblings('.rrshow').toggle();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T07:03:19.050

通过使用 jQuery show() 和 hide() 方法，您可以解决此问题，首先为 div 设置一个 id

```
$("# place rrshow id here").show();
$("# place rrshow id here").hide();

$("#place rrclk id here").click(function(){
//$("# place rrshow id here").show(); or $("# place rrshow id here").hide(); whatever you want
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T07:03:52.293

```
$('.rrclk').click(function(){
$(this).siblings('.rrshow').show();
}); 
```

如果我理解正确，你可以使用这个 jquery，

这是一个 JSFIDDLE [http://jsfiddle.net/fb4gr/](http://jsfiddle.net/fb4gr/)

​</p>

# jquery - Struts2 Jquery Grid Column中的Struts 2 Select标签

> ID：11912679
> 
> 赞同：0
> 
> 时间：2012-08-11T06:53:57.723
> 
> 标签：jquery, jquery-plugins, struts2, struts2-jquery

在 Struts2 Jquery Grid Column 中使用 Struts2 选择标签的方法是什么？我在插件网站上找不到任何有用的信息，他们只是谈论使用 javascript 函数的自定义格式化程序，我已经能够成功地使用它来满足其他需求，但是我不能使用 Struts2 选择标签来做到这一点，因为使用 javascript 动态创建 Struts2 标记是没有意义的。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:54:36.490

也许你看错地方了。查看[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules)，您将了解如何`select`在 jquery 网格中使用标签。

# ruby-on-rails - rails 3.1：如何跨多个模型进行查询，例如 (user.email = 'foo') OR (user_profile.name = 'foo')

> ID：11912680
> 
> 赞同：0
> 
> 时间：2012-08-11T06:53:59.253
> 
> 标签：ruby-on-rails, activerecord, left-join

给定一个简单的文本字符串 search_for，它类似于“%mike%”，我想找到所有“user.email LIKE search_for”或“user_profile.name LIKE search_for”的用户

用户 has_one UserProfile

用户有一个 :email 字段

UserProfile 有一个 :name 字段

user.user_profile 可能不存在（例如，用户可能还没有名字）

我假设我首先需要一个 LEFT JOIN （所以我有所有用户，如果它存在，则与他们的 user_profile 一起加入），然后我需要能够指定 user.email 和 user_profile.name 作为 .where 子句的一部分，但我不能相当破解语法以使其工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:16:24.900

找到它@found_all = User.joins("LEFT OUTER JOIN user_profiles ON user_profiles.user_id = users.id").where("(LOWER(users.email) LIKE ?) OR (LOWER(user_profiles.name) LIKE ?)" , srchterm, srchterm)

# list - 如何在 Vim 脚本中展平嵌套列表？

> ID：11912688
> 
> 赞同：3
> 
> 时间：2012-08-11T06:55:03.097
> 
> 标签：list, nested, vim, expand

我发现一些 Vim 列表函数不能像我想象的那样工作。例如：

```
let list0 = [1, [1, 2]]
echo count(list0, 1) 
```

它返回`1`，但我希望它返回`2`。所以我认为这些函数不能深入嵌套列表，只能在第一级工作。

我想在这里我应该将嵌套列表扩展为一个普通的列表，如下所示：

```
list0 = [1, 1, 2] 
```

如何展平嵌套列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T08:23:09.700

```
" 代码来自 bairu@#vim.freenode
" https://gist.github.com/3322468
功能！展平（列表）
  让 val = []
  对于 a:list 中的元素
    如果类型（元素）== 类型（[]）
      调用extend(val, Flatten(elem))
    别的
      调用 add(val, elem)
    万一
    不让元素
  结束
  返回值
结束功能

```

这里`unlet elem`是必要的。因为`elem`变量在**变化**，它是一个列表项，或者说是一个列表，而 VimL 不支持将一个列表项赋值给一个列表，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-25T06:42:46.960

您可以[`reduce()`](https://vimhelp.org/eval.txt.html#reduce%28%29)从 8.2.0878 开始使用：

```
let mylist = [[1, 2], [3, 4], 5]
echo reduce(mylist, { acc, val -> type(val) == 3 ? extend(acc, val) : add(acc, val)}) 
```

输出：

```
[1, 2, 3, 4, 5] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-30T00:46:30.420

我建议vital.vim 的Data.List.flatten 作为另一个答案；D

[https://github.com/vim-jp/vital.vim](https://github.com/vim-jp/vital.vim)

# php - 如何发送多行值提交按钮？

> ID：11912689
> 
> 赞同：-1
> 
> 时间：2012-08-11T06:55:10.653
> 
> 标签：php, mysql, html

我从同一行获取值，但有很多值`fetch array`。我做到了，但是使用按钮，有多少个值。如果我有 5 行，那么我应该有五个提交，但我想要一个提交按钮。

这是我的代码：

```
$result2 = mysql_query ("select * from price  where dom='$cat'",$db);
        $myrow2= mysql_fetch_array($result2);

<form action="priceupdatetes.php" method="post">
<?php

do {
    echo <<<here

   <td><input name="etiket[$myrow2[id]]" type="text" value="$myrow2[etiket]"/></td>
   <td><input name="pricestandart[$myrow2[id]]"  type="text" value="$myrow2[pricestandart]"/></td>
   <td><input name="number[$myrow2[id]]" type="text" value="$myrow2[number]"/></td>
   <td><input name="totalunper[$myrow2[id]]" type="text" value="$myrow2[totalunper]"  disabled="disabled"/></td>
   <td><input name="discount[$myrow2[id]]" type="text" value="$myrow2[discount]"/></td>
   <td><input name="totalwithper[$myrow2[id]]" type="text" value="$myrow2[totalwithper]" disabled="disabled"/></td>

  </tr>

here;

}

while($myrow2= mysql_fetch_array($result2)) ;

?>

<input NAME="id[]" TYPE=hidden value="<?php foreach($myrow2[id] as $mid) {print $mid;} ?> "/>   

<input name="submit" type="submit" value="Submit"/><br> 
</form> 
```

这里是**UPDATEPAGE.php**：

```
if (isset($_POST['etiket'])) {$etiket = $_POST['etiket']; }
if (isset($_POST['pricestandart'])) {$pricestandart = $_POST['pricestandart'];}
if (isset($_POST['number'])) {$number = $_POST['number']; }
if (isset($_POST['discount'])) {$discount = $_POST['discount']; }
if (isset($_POST['id'])) {$id = $_POST['id']; }

$totalunper=$pricestandart*$number;
$percent=$discount/100;
$totalwithper1=$totalunper*$percent;
$totalwithper=$totalunper-$totalwithper1;

foreach($id as $team_id)
{

$result = mysql_query("UPDATE price SET etiket='$etiket[$team_id]',pricestandart='$pricestandart[$team_id]',number='$number[$team_id]',totalunper='$totalunper[$team_id]',discount='$discount[$team_id]',totalwithper='$totalwithper[$team_id]' WHERE id='$team_id'");  } 
```

如何获取具有不同`id`' 的值并更新它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:06:14.010

```
<input NAME="id[]" TYPE=hidden value="<?php foreach($myrow2[id] as $mid) {print $mid;} ?> "/> 
```

是错的。$myrow2[id] 不是数组。在您的 while 循环中，您应该添加：

```
<input NAME="id[]" TYPE="hidden" value="$myrow2[id]"/> 
```

# c# - 如何从串口读取数据并在c#中写入文件

> ID：11912690
> 
> 赞同：-2
> 
> 时间：2012-08-11T06:55:11.463
> 
> 标签：c#, serial-port

我需要打开一个串口发送命令 00 00 F0 00 00 然后从端口接收数据，如果他收到的命令是 F1 并且收到的数据是 F1 D6 我需要打开一个文件并写入数据。然后再次发送命令 F1，如果收到的命令是 F2，我需要关闭文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T06:58:39.387

您可以使用 .NET 中的[SerialPort 类](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)来完成此操作。使用`Read(...)`和`Write(...)`方法来完成你的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T07:16:11.057

首先，您在表单中添加 serialPort1 工具，然后使用

```
if (!sensport.IsOpen)
            {
                foreach (string port in SerialPort.GetPortNames())
                {
                    sensport.PortName = port;
                    sensport.BaudRate = 9600;
                    MessageBox.Show(port + " is open");
                }
                label1.Text = "";
                try
                {
                    sensport.Open();
                }
                catch (Exception)
                {

                    MessageBox.Show("Please control your connection");
                }               
            } 
```

那个代码来打开你的端口。

之后，您需要 serialPort1 中的 Write() 和 Read() 方法。

# linq - 在 LINQ 中生成序号

> ID：11912702
> 
> 赞同：0
> 
> 时间：2012-08-11T06:57:02.910
> 
> 标签：linq, c#-4.0

我有一个包含以下记录的列表：

```
name:apple
category:fruit

name:choysum
category:vegetable

name:chicken
category: poultry

name: lamb
category: meat

... 
```

我需要按以下类别订购此列表：

```
vegetable
fruit
poultry
meat.. 
```

有人可以帮助我如何使用 LINQ。我正在考虑为上述类别创建另一个名为 ordinal 的属性并标记为 1,2,3,4。然后按序号排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T07:00:56.837

是的，您可以执行以下操作：

```
var orderedCategories = new List<string> { "fruit", "vegetable", "poulty", "meat" };
var ordered = list.OrderBy(x => orderedCategories.IndexOf(x.Category))
                  .ToList(); 
```

如果您有很多类别，您可能想要使用 a `Dictionary<string, int>`（或者`Dictionary<Category, int>`如果您有单独的类别类）。

# performance - 如何评估 CUDA 性能？

> ID：11912703
> 
> 赞同：5
> 
> 时间：2012-08-11T06:57:31.007
> 
> 标签：performance, cuda

我自己编写了 CUDA 内核。与 CPU 代码相比，我的内核代码比 CPU 快 10 倍。

但我对我的实验有疑问。

我的程序是否使用所有 GPU 内核、适当的共享内存使用、足够的寄存器数量、足够的占用率进行了充分优化？

如何评估我的内核代码的性能？

理论上如何计算CUDA的最大吞吐量？

我对 CPU 的 GFLOPS 和 GPU 的 GFLOPS 和 GFLOPS 速率之间的比较是它们的透明理论性能是对的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T00:22:59.193

> 我的程序是否使用所有 GPU 内核、适当的共享内存使用、足够的寄存器数量、足够的占用率进行了充分优化？

要找出这一点，您可以使用其中一个 CUDA 分析器。查看[您如何分析和优化 CUDA 内核？](https://stackoverflow.com/questions/2204527/how-do-you-profile-optimize-cuda-kernels)

> 理论上如何计算CUDA的最大吞吐量？

这个数学有点复杂，每个架构都不同，很容易出错。最好在芯片规格中查找数字。Wikipedia 上有针对 GTX500 卡的表格，例如[这张表格](http://en.wikipedia.org/wiki/GeForce_500_Series)。例如，从表中可以看出，GTX580 的理论峰值带宽为 192.4GB/s，计算吞吐量为 1581.1GFLOPs。

> 我对 CPU 的 GFLOPS 和 GPU 的 GFLOPS 和 GFLOPS 速率之间的比较是它们的透明理论性能是对的吗？

如果我理解正确，您是在询问 GPU 上的理论峰值 GFLOP 数量是否可以直接与 CPU 上的相应数量进行比较。比较这些数字时需要考虑一些事项：

*   较旧的 GPU 不支持双精度 (DP) 浮点，仅支持单精度 (SP)。

*   与 SP 相比，支持 DP 的 GPU 会显着降低性能。我上面引用的 GFLOPs 数字是针对 SP 的。另一方面，为 CPU 引用的数字通常是针对 DP 的，在 CPU 上 SP 和 DP 的性能差异较小。

*   CPU 报价可以用于仅在使用 SIMD（单指令，多数据）矢量化指令时才能实现的速率，并且通常很难编写可以接近理论最大值的算法（并且它们可能必须以汇编形式编写）。有时，CPU 报价是针对通过不同类型指令可用的所有计算资源的组合，并且通常几乎不可能编写可以同时利用它们的程序。

*   为 GPU 引用的速率假设您有足够的并行工作使 GPU 饱和，并且您的算法不受带宽限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T03:34:00.137

性能的首选度量是经过的时间。GFLOP 可以用作比较方法，但由于指令集、编译器代码生成和计算 FLOP 的方法的差异，通常难以在编译器和体系结构之间进行比较。

最好的方法是对应用程序的性能进行计时。对于 CUDA 代码，您应该对每次启动将发生的所有代码进行计时。这包括内存副本和同步。

Nsight Visual Studio Edition 和 Visual Profiler 为每个操作提供最准确的测量。Nsight Visual Studio Edition 为每个设备提供理论带宽和 FLOPs 值。此外，Achieved FLOPs 实验可用于捕获单精度和双精度的 FLOP 计数。

# php - 从两个连接的表中检索所有投票

> ID：11912708
> 
> 赞同：1
> 
> 时间：2012-08-11T06:58:22.543
> 
> 标签：php, cakephp, cakephp-model

所以我将我的两个模型链接在一起，它返回的内容如下：

```
Array
(
    [Submission] => Array
        (
            [id] => 47
            [user_id] => 0
            [title] => asdfasdfsa dfasdf asdfa sfa fadf
            [source] => http://www.aol.com
            [slug] => 
            [category] => health
            [created] => 2012-06-25 11:30:16
        )

    [User] => Array
        (
            [id] => 2
            [username] => john
        )

    [SubmissionsVote] => Array
        (
            [0] => Array
                (
                    [id] => 247
                    [user_id] => 2
                    [submission_id] => 47
                    [vote_type] => up
                )

        )

) 
```

但是，有时投票数会在 [0] - [n] 之间。这是给我的`$newestSubmissions`。我正在做的查询是：

```
public function newestSubmissions() {
    $this->unBindModel(
            array('hasMany' => array('Comment')));
    return $this->find('all', array(
                'fields' => array(
                    'Submission.id',
                    'Submission.user_id',
                    'Submission.title',
                    'Submission.source',
                    'Submission.slug',
                    'Submission.category',
                    'Submission.created',
                    'User.id',
                    'User.username'
                ),
                'order' => 'Submission.created DESC'
            ));
} 
```

我想要做的是检索整个`$newestSubmissions`数组对象的所有投票以及每个投票的所有投票（下面的查询）`$newestSubmissions`以计算实际分数，这样我就可以将调用的单个数组对象发送`$newestSubmissions`到我的视图，而不是的`$newestSubmissions`和`$submissionScore`

```
public function getVoteType($userId, $submissionId) {
    $voteType = $this->find('all', array(
        'conditions' => array(
            'User.id' => $userId,
            'Submission.id' => $submissionId),
        'fields' => array(
            'SubmissionsVote.vote_type'),
        'limit' => '1'
            ));
    return $voteType[0]['SubmissionsVote']['vote_type'];
} 
```

基本上我想将一个分数连同数组对象中的所有其他信息一起发送到我的视图，而不是必须在我的父数组对象中发送一个内部索引数组对象（这是我目前得到的）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:36:41.730

好的...我试图将其发布为评论，但它太长了。这不是一个真正的答案。

你知道可包含的行为吗？检查一下 - 这有助于确定您返回的数据：http: [//book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

此外，如果您要将您的提交投票表分成两个表 - 赞成票和反对票，那么您还可以使用 Cake 的 counterCache 行为直接在您的“提交”表中跟踪赞成/反对票的数量（您需要将 upvote_count 和 downvote_count 列添加到您的提交表中）。

这将使计算提交分数更容易——而且您不必每次都从数据库中获取所有选票。对于 doco，请在此页面上搜索 counterCache：http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html[这](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)可能值得考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:17:01.003

```
 return $this->find('all', array(
                'fields' => array(
                    'Submission.id',
                    'Submission.user_id',
                    'Submission.title',
                    'Submission.source',
                    'Submission.slug',
                    'Submission.category',
                    'Submission.created',
                    'User.id',
                    'User.username',
                    'submissionsvotes.vote_type'
                ),
                'joins' => array(
                            array(
                            'table' => 'SubmissionsVote',
                            'alias' => 'submissionsvotes',
                            'type' => 'LEFT', 
                            'conditions' => array
                            ('User.id = SubmissionsVotes.user_id','Submission.id'=>'SubmissionsVotes.submission_id')
                            ),
                        )

               'group'=>'submissionsvotes.vote_type',
               'order' => 'Submission.created DESC'
            )
    ); 
```

# android - 更改网络浏览器中的默认搜索引擎

> ID：11912720
> 
> 赞同：1
> 
> 时间：2012-08-11T07:01:16.477
> 
> 标签：android, search, browser, default

有没有办法将 Android 默认浏览器搜索引擎更改为另一个搜索引擎？

如果有人尝试过，请提供详细信息或您的操作方式。

我会非常感谢回复的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T04:37:50.633

转到设置>高级>设置搜索引擎。对于我的 android 4.0.x，它是第一个。他们会给你一个列表供你选择，但现在如果你不想编写代码，我不知道添加你自己的任何选项。如果你这样做，这是一个可能的来源：http: [//hoelz.ro/blog/adding-duckduckgo-as-an-android-browser-search-engine](http://hoelz.ro/blog/adding-duckduckgo-as-an-android-browser-search-engine)

我想只要用你想要的任何东西替换duckduckgo。

# jquery - 使用 twitter bootstrap 添加 ajax 验证结果的更简单/更好的方法

> ID：11912723
> 
> 赞同：0
> 
> 时间：2012-08-11T07:01:37.800
> 
> 标签：jquery, twitter-bootstrap

> **可能重复：**
> [如何使用 Twitter Bootstrap 弹出框进行 jQuery 验证通知？](https://stackoverflow.com/questions/8439490/how-to-use-twitter-bootstrap-popovers-for-jquery-validation-notifications)

一段时间以来，我一直在我的项目中使用 twitter bootstrap。在我当前的所有用例中，表单提交导致到服务器的完整往返......即没有ajax。因此，在 div 和 'help-inline' spans 及其文本上插入 'error' 类对我来说相当简单。

现在我正在重构以尽可能支持 ajax。

现在，当提交表单时，根据服务器的响应，我必须添加“错误”并为跨度设置文本。我创建了一个 jsfiddle ( [http://jsfiddle.net/kinjal/ja9gA/35/](http://jsfiddle.net/kinjal/ja9gA/35/) ) 来展示这一点。

重复单击注册按钮会随机点亮电子邮件和/或密码 div。这是有效的……至少它看起来有效。随机部分是模拟向服务器提交并从那里接收错误。

代码结构如下：

```
clear the state (remove error class, reset help text, hide help)
send data to server
if any errors show the errors (add error class, add help text, show help) 
```

这里的一个问题是，当字段数增加时，这段代码会变长。

是否还有其他问题，是否有更好的方法来做到这一点？

建议*可以*包括来自服务器的响应格式，以使解析/处理更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:15:35.400

我强烈建议您使用[jquery validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来完成您的工作。您说得对，您拥有的代码字段越多，您当前处理它的方式可能会变得混乱。

包含 jquery validate 后，您可以简单地添加基于类名的规则。例如你可以拥有。

```
<input name="email" class="required" /> 
```

在您的提交按钮上，在将其发送到服务器之前，您只需执行以下操作即可检查表单是否有效

```
if($('#registerform').valid()) //returns true/false 
```

jquery validate 带有一些基本的验证方法（电子邮件验证就是其中之一）

所以你可以做

```
<input name="email" class="required email" /> 
```

这将确保该字段不为空，并且在将其提交到服务器之前它是有效的电子邮件地址。

如果您需要创建更多自定义方法，您可以选择基于类添加更多验证。

在密码强度的情况下，看起来[jquery validate 也有一个你可以添加的方法来处理它](http://bassistance.de/jquery-plugins/jquery-plugin-password-validation/)。

# html - 我们可以将 html css 应用于 LWUIT 文本区域吗

> ID：11912726
> 
> 赞同：0
> 
> 时间：2012-08-11T07:01:54.680
> 
> 标签：html, java-me, lwuit

我使用过TextArea，但我无法减少字体。这是我的代码：

```
TextArea big = new TextArea(detailNews.getDescription());
Font createSystemFont = Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_PLAIN,                        Font.SIZE_SMALL); 
big.getStyle().setFont(createSystemFont); 
big.setEditable(false);, 
```

我怎样才能减少字体？

我想将 html css 应用于 LWUIT 文本区域以减少文本的字体。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:47:02.430

采用：

```
big.getUnselectedStyle().setFont(createSystemFont); 
big.getSelectedStyle().setFont(createSystemFont); 
```

您将获得可以合理使用的最小字体。否则，您将需要使用不推荐的位图字体。

# ruby-on-rails - rails 3 表连接 - 作业、活动、学生

> ID：11912729
> 
> 赞同：0
> 
> 时间：2012-08-11T07:02:42.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
assignment (id, name, date)
activity (id, name, desc)
student (id, name, email) 
```

一个作业可以有很多活动，一个作业可以分配给许多学生。需要跟踪学生的每项活动的状态。

所以有一个三主键表：

```
assignments_activities_students (assignment_id, activity_id, student_id, status) 
```

在下面设置关联，但它不起作用。有人知道怎么做吗？

```
assignment
  has_many :assignments_activities_students
  has_many :students, :through => :assignments_activities_students
  has_many :activities, :through => :assignments_activities_students

activity
  has_many :assignments_activities_students
  has_many :assignments, :through => :assignments_activities_students
  has_many :students, :through => :assignments_activities_students

student
  has_many :assignments_activities_students
  has_many :assignments, :through => :assignments_activities_students
  has_many :activities, :through => :assignments_activities_students

assignments_activities_students 
  belongs_to :assignment
  belongs_to :activity
  belongs_to :student 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:13:11.407

你有一个`Student`模型，但你正在添加关系

```
has_many :users, :through => :assignments_activities_students 
```

`Assignment`您应该在您的和`Activity`模型中将其更改为以下内容。

```
has_many :students, :through => :assignments_activites_students 
```

# objective-c - RestKit 动态嵌套映射

> ID：11912731
> 
> 赞同：2
> 
> 时间：2012-08-11T07:03:19.697
> 
> 标签：objective-c, cocoa-touch, core-data, restkit

我看到 restkit 文档非常好，并且有各种关于对象建模的示例。还有一个嵌套映射的示例，但我发现我的场景与此略有不同。RestKit 文档提供了嵌套属性的示例映射，具有以下 json 格式。

**RestKit 文档中的示例 JSON 结构：**

```
{
  "blake": {        
    "email": "blake@restkit.org",        
    "favorite_animal": "Monkey"    
  },    
  "sarah": {
    "email": "sarah@restkit.org",   
    "favorite_animal": "Cat"
  }
} 
```

假设我的 json 和这个有点不同；

**我的 JSON 结构：**

```
{ 
  "id" : 1,
  "author" : "RestKit",
  "blake": {        
    "email": "blake@restkit.org",        
    "favorite_animal": "Monkey"    
  },    
  "sarah": {
    "email": "sarah@restkit.org",   
    "favorite_animal": "Cat"
  }
} 
```

我创建了两个不同的托管对象模型，它们具有以下属性和许多关系。

我的结构产品和创建者有两个不同的实体来映射上述 JSON 对象。

```
Product                                           Creator 

identifier          <------------------- >>       name
author                                            email
                                                  favouriteAnimal 
```

现在，对于 Product 模型，我的映射看起来像这样；

这就是我映射产品实体的方式，[映射 mapKeyPath:"id" toAttribute:"identifier"]; [映射mapKeyPath：“作者”到属性：“作者”]；

但请注意，映射嵌套字典属性对我不起作用。// [映射 mapKeyOfNestedDictionaryToAttribute:@"creators"];

现在，在作者课上。

我想不出映射上述 JSON 结构的常用方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T20:03:05.357

如果您可以控制 Web 服务，我强烈建议您像这样重新组织您的响应数据：

```
{
  product: 
  {
    id: 1,
    author: 'RestKit',
    creators: [
      {
        id: 1,
        name: 'Blake',
        email: '...',
        favorite_animal: 'Monkey'
      },
      {
        id: 2,
        name: 'Sarah',
        email: '...',
        favorite_animal: 'Cat'
      }
    ]
  }
} 
```

按照这种结构，您将能够使用 RestKit 的嵌套映射功能，并且该关系将正确地反映在对象加载器委托接收的反序列化对象中。RestKit 依靠命名和结构标准来简化实现任务所需的代码。您的示例偏离了键值编码标准，因此 RK 没有提供与您的数据格式交互的简单方法。

如果您无权访问或无法更改它，我认为您需要使用映射映射已知的键值对，并使用自定义评估器执行剩余的分配。您需要假设未知键实际上是关联创建者的名称值，并且它们的关联值包含每个的属性哈希。使用它，您将手动重建每个对象。

# android - OnTouchScreen 在 android 中不起作用

> ID：11912734
> 
> 赞同：0
> 
> 时间：2012-08-11T07:03:30.403
> 
> 标签：android

我在 android application 中关注 OnTouchListner 的示例。我写了以下代码。我正在为 ontouchlistner 执行一项活动，并为上下移动的动作创建祝酒词，但它没有显示任何内容......

这是活动代码：

```
public class GameActivity extends Activity
    implements OnTouchListener  {
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Intent intent = getIntent();
    setContentView(R.layout.layout_game);

    //create grid view
    splitImage(); 
    GridView gridView = new GridView(this);
    gridView = (GridView)findViewById(R.id.grid_view);   
    final ImageAdapter images = new ImageAdapter(this,chunkedImages);
    final GridView gV = gridView;
     gridView.setAdapter(images);
} 
....
public boolean onTouch(View v, MotionEvent me) {

    switch(me.getAction())
    {
    case MotionEvent.ACTION_DOWN :
        Toast.makeText(GameActivity.this, "down" , Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_UP :
        Toast.makeText(GameActivity.this, "up", Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_MOVE :
        Toast.makeText(GameActivity.this, "move", Toast.LENGTH_SHORT).show();
        break;
    }
    return true;
}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:11:09.460

您还需要将您的听众设置为某些东西。现在，它能够接收触摸事件，但它不会。

将以下行添加到您的 onCreate() 中：

```
gridView.setOnTouchListener(this); 
```

# c++ - C++ A-star 实现——判断一个节点是否已经在未清项的优先队列中

> ID：11912736
> 
> 赞同：2
> 
> 时间：2012-08-11T07:04:05.243
> 
> 标签：c++, algorithm, stl, path-finding, a-star

A* 寻路算法中的一个步骤需要在打开节点列表中搜索您当前正在与之交互的节点，如果该节点尚不存在，则将该节点添加到列表中，或者更新其值和父节点（如果存在）但权重高于当前版本的节点。

STL priority_queue 结构不支持这些行为。我应该如何实施该步骤？

**更新**，因为这个问题得到了很多意见：

*   std::priority_queue 看起来可能是一个不错的选择，但事实并非如此。

*   自己实现 A* 可以极大地增强信心，但是在完成之后，您应该尝试切换到使用 boost 提供的那个。当我问这个问题时，我对安装它感到紧张，但安装非常容易，不会产生任何并发症；A* 并不是 boost 提供的唯一有用的功能。（特别是，如果你不使用他们的字符串处理功能，你最终会编写自己的副本；我是根据个人经验说的......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:18:28.710

STL`priority_queue`不适合 A* 实现。您需要一个堆结构来支持`increase`更改已插入项的优先级的操作。使用[Boost.Heap](http://www.boost.org/doc/libs/1_50_0/doc/html/heap.html)来实现许多经典堆。

**编辑：** Boost.Graph 库也有[A* 搜索的实现](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/astar_search.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T08:04:59.903

如果您仅限于 STL，则可以使用 STL Set 并不断擦除和重新插入元素（具有新的优先级）。

```
Set< pair<int,int> > s; // < priority,value >
s.insert( make_pair(0,5) );

// Decrease Key operation //
s.erase( s.find( make_pair(0,5) ) );
s.insert( make_pair(1,5) ); 
```

时间复杂度仍然是 O(log N)，但对于大型集合可能需要更多时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-04T21:53:22.030

如果您真的想使用 std::priority_queue，这是我用于此的解决方案：

当您需要更新已经在优先级队列中的节点时，只需将具有相同状态和新成本值和父节点的新节点插入队列中即可。该节点的最新更新副本将首先退出队列并添加到您访问的集合中。要处理较旧的重复项，请在处理之前检查任何从队列中出来的节点与您访问的集合。如果它在访问集中，则已经看到通过该节点的最低成本路径，因此忽略它并处理下一个节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T08:15:27.307

您可以使用普通向量或数组来存储元素，然后使用、`std::make_heap`、`std::push_heap`、`std::pop_heap`和`std::sort_heap`来管理它。`std::is_heap``std::is_heap_until`

这允许您打破限制并在优先级队列上实施自定义操作，而无需自己实施标准操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T07:04:05.243

对此有三种可能的解决方案：

1.  独立于优先级队列跟踪当前打开的节点列表。尝试以与封闭节点相同的方式创建节点列表。

2.  创建节点映射（按坐标）到开闭状态。

3.  安装 Boost 库，其中包括 A* 的模板实现（我认为在 中`<graph>`）。

# sql - 将列分组为多行并像 SQL Server 中的 MySQL 一样进行 Group_concate

> ID：11912740
> 
> 赞同：1
> 
> 时间：2012-08-11T07:04:21.623
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我一直在寻找一种在多行、一个单元格中显示一列的方法。它的内容用逗号分隔。

例如，而不是：

```
ProjectID 名称计数
-------------------------------------
   2 技术服务 31
   1 安全服务 32
   7 技术服务 32

```

我希望我的查询结果如下所示：

```
名称标签
--------------------------
技术服务 31,2
技术服务 32,7
安全服务 32,1

```

我还希望我的查询结果看起来像这样：（就像`Group_Concate`在 MySQL 中一样）

```
名称标签
-------------------------------------------
安全服务 32,1
技术服务 31,2: 32,7

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:19:23.293

尝试这个：

```
SELECT  Name, 
CAST(count AS VARCHAR(10)) + ',' + CAST(ProjectID AS VARCHAR(10))
AS Label FROM table1 
```

**结果**

```
名称标签
----------------------------
安全服务 32,1
技术服务 32,7
技术服务 31,2

```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!3/ef547/2)

如果你想按`Name`（类似于`Group_Concate`MySQL 的东西）进行分组，SQL Server 中没有任何方法。这只是它背后的逻辑。
所以试试这个：

```
SELECT  * FROM    (
    SELECT  DISTINCT Name
    FROM    table1
    ) table2
CROSS APPLY
    (SELECT  CASE ROW_NUMBER() 
      OVER(ORDER BY ProjectId) 
      WHEN 1 THEN '' ELSE ': ' END + 
      (CAST(table3.count AS VARCHAR(10)) + ',' 
      + CAST(table3.ProjectID AS VARCHAR(10)) )
    FROM    table1 table3
    WHERE   table3.Name = table2.Name
    ORDER BY ProjectID
    FOR XML PATH ('')
    ) table3(Label) 
```

所以结果将是

```
名称标签
--------------------------------
安全服务 32,1
技术服务 31,2: 32,7

```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!3/ef547/32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:16:02.377

```
select  Name, 
        cast(count as varchar(5))+','+cast(ProjectID as varchar(5)) as label
from <table> 
```

# java - Java Map 为当前键返回 null

> ID：11912744
> 
> 赞同：6
> 
> 时间：2012-08-11T07:05:15.653
> 
> 标签：java, string, dictionary, map, null

我有一个非常不寻常的问题。
基本上，我试图从字符串映射到字符串中获取与键关联的值。
我知道我正在使用的密钥存在；我使用的是我用来放入它的相同字符串！

我已经在我的代码中打印了语句，这是我的情况......
这是我的字典***characterDictionary***

```
{thusChar=∴, spaceChar= , plusChar=+, equalsIndent=#, multiplyChar=×, equalsChar==, newlineChar=\n, divideChar=÷, subjectChar=:, variableIndent=@} 
```

最后一个键“variableIndent”很麻烦！
这是代码...

```
System.out.println  (   characterDictionary.get("variableIndent") ); 
```

不恰当地输出： `null`

我已经检查、仔细检查和三重检查了我的代码。***键“variableIndent”***和 的字符串参数
之间绝对没有区别，但它的行为就好像这个键不存在一样。*`characterDictionary.get("variableIndent")`*

 *我绝对可以保证这个键是存在的，并且两个字符串是相同的。
字典的所有其他元素（我检查过的元素；到目前为止大约 3 个）都正常检索。为什么带有“@”值的“variableIndent”会出现？

您可能会注意到字典包含非 ASCII 字符，例如“thusChar”。这可能有关系吗？

谢谢
（这似乎是一个非常简单和微不足道的问题，好像我犯了一些可怜的愚蠢错误，但我就是无法解决它！）

**编辑：**

好的，这必须与编码有关。
我从字典中取出字符串键并将其与我的 get 参数进行比较。
打印时，它们是相同的，但 java 说它们不相等。
密钥字符串来自 UTF-8 编码的文本文件，而参数字符串来自 java Eclipse 文字。
但是字符是相同的。
问题是什么，我该如何解决？

谢谢！

**编辑：**

嗯，这就是幕后实际发生的事情。
我有一个 UTF-8 文本文件，其中包含以下内容...

```
variableIndent,@
equalsIndent,#
spaceChar, 
newlineChar,\n
multiplyChar,×
divideChar,÷
plusChar,+
equalsChar,=
subjectChar,:
thusChar,∴ 
```

我通过将文件的每一行作为一个`ArrayList<String>`元素读取，通过传递文件的目录来“加载”这个文件：

```
private static ArrayList<String> readLinesFile(String ResourceFile)  {
    ArrayList<String> Lines = new ArrayList<String>();
        try{
            InputStream fstream = FileManager.class.getResourceAsStream(ResourceFile);
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            String strLine;
            while ((strLine = br.readLine()) != null)  {
                Lines.add(strLine);  } 
            in.close();  }
        catch (Exception e)  {
            System.out.println("Error: " + e.getMessage());  } 
        return Lines;  } 
```

到这里为止一切都很好。
然后我将这个 ArrayList 传递给一个函数，该函数通过“，”字符分割每个元素（使用个人包中的函数；这绝对不是问题），并将第一部分作为键添加到新的第二部分字典。

```
private static Map<String, String> generateBaseUnits_Characters_Prefixes(ArrayList<String> FileContent)  {
    Map<String, String> BaseUnitsCache = new HashMap<String, String>();
    ArrayList<String> currentLine;
    for (int i=0; i<FileContent.size(); i++)  {
        currentLine = MiscellaneousFunctions.splitString(FileContent.get(i), ",");
        BaseUnitsCache.put(currentLine.get(0), currentLine.get(1)); }
    return BaseUnitsCache;  } 
```

这会产生导致所有麻烦的字典。
我有一组与文本文件中的字符名称相对应的关键文字，我用它们来访问程序中的字典。

```
public static String variableIndentKey = "variableIndent";
public static String equalsIndentKey = "equalsIndent";
public static String spaceCharKey = "spaceChar";  
public static String newlineCharKey = "newlineChar";
public static String multiplyCharKey = "multiplyChar";
public static String divideCharKey = "divideChar";  
public static String plusCharKey = "plusChar";
public static String equalsCharKey = "equalsChar";  
public static String subjectCharKey = "subjectChar";
public static String thusCharKey = "thusChar"; 
```

***这是问题：***

字典中文本文件的第一行“拧紧”。它被添加到字典中，并在 keySet 和字典的打印格式中正确显示，但尝试访问它会返回“null”。
（在这种情况下，它是 variableIndent。如果我将 variableIndent 放在文本文件中的其他位置，equalsIndent 搞砸了，等等）

这是怎么回事！？
我有一个狡猾的功能吗？
他们在其他所有方面都运作良好。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T08:24:53.063

将包含键和值的 UTF-8 文本文件更改为没有 BOM 的 UTF-8。有三个字节（UTF-8 BOM 0xEF,0xBB,0xBF 在“variableIndent”之前）见[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T08:28:38.927

如果你害怕编码问题（这似乎是这里的问题），你必须确保你的项目的编码设置为`UTF-8`. 要检查它，请转到**Project**菜单，然后选择**Properties**。可能需要将**文本文件编码**从更改`Inherited from container`为`Oher: UTF-8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:08:20.397

我建议您在调试器中查看您的代码。我怀疑地图不是你想象的那样。

```
String data = "{thusChar=∴, spaceChar= , plusChar=+, equalsIndent=#, multiplyChar=×, equalsChar==, newlineChar=\\n, divideChar=÷, subjectChar=:, variableIndent=@}";
Map<String, String> map = new LinkedHashMap<String, String>();
for (String keyValue : data.substring(1, data.length() - 1).split(", ")) {
    String[] parts = keyValue.split("=", 2);
    map.put(parts[0], parts[1]);
}
System.out.println("variableIndent is " + map.get("variableIndent")); 
```

印刷

```
variableIndent is @ 
```

* * *

你能试一下吗

```
for(String key: map.keySet())
   System.out.println("'"+key+"'= "+map.get(key)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T07:15:28.027

嗯，试试这段代码，让我们知道输出

```
for (String key : characterDictionary.keySet() ) {
System.out.println(key);
}

for ( String value :  characterDictionary.values() ) {
System.out.println(value);
} 
```

PS：可能想要更改键和值的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T09:10:38.240

如果您认为这是编码问题，请尝试使用以下方法来比较实际内容，无论它看起来如何。

用于`getBytes()`从两个字符串中获取所有字节（地图中的键，以及代码中的字符串），然后打印

1.  字节数组的长度
2.  每个字节为整数

然后用于`getChars()`从两个字符串中获取所有字符或`charAt()`读取每个字符，然后打印

1.  每个 char 作为一个整数。

在这两个检查之间，您应该能够找出两个字符串在字节级别上的不同之处。保存文件的字符集是什么？

**编辑**

我怀疑您对 DataInputStream 的使用导致正在读取的字节出现问题。

```
InputStream fstream = FileManager.class.getResourceAsStream(ResourceFile);
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

DataInputStream 的 Java 文档说“数据输入流允许应用程序以与机器无关的方式从底层输入流中读取原始 Java 数据类型。应用程序使用数据输出流来写入数据，这些数据以后可以由数据输入读取溪流。” 您在这里不是从 DataOutputStream 中读取，而是从常规文件中读取。此外，您已经有一个 InputStream 供 InputStreamReader 使用。将您的代码更改为：

```
InputStream fstream = FileManager.class.getResourceAsStream(ResourceFile);
BufferedReader br = new BufferedReader(new InputStreamReader(fstream)); 
```

**编辑 2**

另一件值得做的事情，因为你的文本文件中的字符串长了 3 个字节，所以改变了这个

```
BaseUnitsCache.put(currentLine.get(0), currentLine.get(1)); 
```

到

```
BaseUnitsCache.put(currentLine.get(0).trim(), currentLine.get(1).trim()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T09:21:00.727

试试这个方法...

```
Map<String, String> map = new LinkedHashMap<String, String>();

for (Map.Entry<String, String> mp : map.entrySet()){

  System.out.println("Key: "+mp.key()+"::"+"Value: "+mp.value());

} 
```*

# php - 如何从另一个变量构造变量名？

> ID：11912745
> 
> 赞同：-1
> 
> 时间：2012-08-11T07:05:28.003
> 
> 标签：php

> **可能重复：**
> [根据其他变量值和静态文本构造 PHP 变量名](https://stackoverflow.com/questions/1817922/construct-a-php-variable-name-based-on-other-variable-values-and-static-text)

```
$value = '200';
$_200 = 'other'; 
```

如何回显第二个变量的内容，从第一个变量中获取其名称？所以基本上读取 的值`$value`，在前面加上一个`_`并将其用作变量名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:09:01.163

一如往常。

```
echo ${'_'.$value}; 
```

# git - 带有接收后挂钩的 Git 部署

> ID：11912747
> 
> 赞同：1
> 
> 时间：2012-08-11T07:06:01.873
> 
> 标签：git, bash, deployment, githooks

我想根据 git 开发我的网站，但我遇到了某种先有鸡还是先有蛋的问题。有一台服务器带有 git --bare 存储库（主存储库；/var/dev.git），一个克隆用于 apache 网络服务器的 doc-root (var/www)，每个用户都有一个本地存储库。

好的，这真的很好用，但现在我想添加一个“特殊”功能。如果有人添加 .less 文件并将其推送到主存储库，则应将其“编译”为 css 文件并添加到存储库中。此外，www-clone 应该将所有新文件（包括新的 css 样式）拉回 main-repo。

**我的第一次尝试**

首先，我强制 www-root-repo 拉取最新的更改，然后我尝试找到所有 less 文件并启动 less 编译器。

```
lessc [input] [output] 
```

问题是 git 似乎在拉取和推送时触发了后接收，并以无限循环的方式自行召回（它以 a 停止`error building trees`）

```
#!/bin/sh

git --git-dir /var/www/.git reset --hard HEAD
git --git-dir /var/www/.git pull /var/dev.git master

echo "###### fire LESS Compiler #####"
find /var/www -name *.less -exec sh -c 'lessc {} $(dirname {})/
    $(echo $( basename {} .less)$( echo ".css" )) >> $(dirname {})
    /less_error.log 2>&1 ' \;

echo "###### add new less-out files to repo #####"
git --git-dir /var/www/.git add .
git --git-dir /var/www/.git commit -am "css style added"
git --git-dir /var/www/.git push /var/dev.git master

echo "########### END #############" 
```

为了获得更少的错误消息，我将 stderr 传送到 stdout（因为 AFAIK 无法使用 stderr-pipe-redirection 附加）并将其附加到 error_less 文件。（第二个问题：）只有在发生错误时，我才能创建文件？（目前它在每个lessc-call上创建）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T05:27:49.740

为清楚起见，我们将 /var/dev 存储库称为 DEV 和 /var/www 存储库 WWW。使 DEV 存储库非裸露，因此它有一个工作树，您可以在其中编译。DEV 现在位于 /var/dev 中，所有用户都必须更新他们的远程 URL：

```
git remote set-url dev foo@bar:/var/dev  # Assuming SSH access 
```

DEV 的 post-receive 挂钩将编译、提交并推送到 WWW。

```
#!/bin/sh
# Go to worktree, check out new commit
export GIT_DIR=`pwd`; cd ..; export GIT_WORK_TREE=`pwd`
git reset --hard HEAD
# fire LESS Compiler
find . -name *.less -exec sh -c 'lessc {} $(dirname {})/
    $(echo $( basename {} .less)$( echo ".css" )) >> $(dirname {})
    /less_error.log 2>&1 ' \;
# add new less-out files to repo
git add .
git commit -am "css style added"
# Push to WWW
git push /var/www master 
```

WWW post-receive 钩子只会检查新的提交

```
#!/bin/sh
# Go to worktree, check out new commit
export GIT_DIR=`pwd`; cd ..; export GIT_WORK_TREE=`pwd`
git reset --hard HEAD 
```

# python - 循环中 a 和 a[:] 的区别

> ID：11912749
> 
> 赞同：2
> 
> 时间：2012-08-11T07:06:51.217
> 
> 标签：python, for-loop

以下代码片段在 Python 中生成不同的输出：

```
a = ['b','c']
for x in a:
   a.insert(0,'d') 
```

循环没有终止，python shell 挂起。尽管，

```
a = ['b','c']
for x in a[:]:
   a.insert(0,'d')
print a 
```

生成以下内容：`['d','d','b','c']`

对于 python 2.6.6

谁能解释一下上述行为的区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T07:08:54.333

在第一个示例中，您在迭代列表时添加到列表中。它永远不会停止，因为你会不断地让列表变得更长，所以它永远不会走到尽头。

在第二个示例`a[:]`中是列表的副本。您可以在附加到原始文件的同时迭代副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T07:20:43.280

`a[:]`等效于`list(a)`，因此在第二个循环中，您将循环遍历`a`并插入 original的浅表副本`a`。由于 的长度`a[:]`为 2，因此它仅插入两个元素。

在第一个循环中，您正在迭代`a`ans 并插入元素，`a`因此`a`继续增加并且循环永远不会停止。

# ruby - Ruby 大数组和内存

> ID：11912750
> 
> 赞同：5
> 
> 时间：2012-08-11T07:06:55.210
> 
> 标签：ruby, memory, memory-management

我创建了一个大数组`a`，其内存增长到 ~500 MB：

```
a = []

t = Thread.new do 
  loop do
    sleep 1
    print "#{a.size} "
  end
end

5_000_000.times do
  a << [rand(36**10).to_s(36)]
end

puts "\n size is #{a.size}"
a = []

t.join 
```

之后，我“清除”`a`了，但分配的内存在我终止进程之前没有改变。`a`我需要做一些特别的事情来从内存中删除所有这些分配给的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T20:16:14.913

如果我在稍微修改过的代码版本上使用[Ruby Garbage Collection Profiler ：](http://www.ruby-doc.org/core-1.9.3/GC/Profiler.html)

```
GC::Profiler.enable
GC::Profiler.clear

a = []
5_000_000.times do
  a << [rand(36**10).to_s(36)]
end

puts "\n size is #{a.size}"
a = []

GC::Profiler.report 
```

我得到以下输出（在 Ruby 1.9.3 上）（删除了一些列和行）：

```
GC 60 invokes.
Index    Invoke Time(sec)       Use Size(byte)     Total Size(byte)     ...
    1               0.109               131136               409200     ...
    2               0.125               192528               409200     ...
  ...
   58              33.484            199150344            260938656     ...
   59              36.000            211394640            260955024     ... 
```

配置文件以使用的 131 136 字节开始，以使用的 211 394 640 字节结束，在运行中的任何地方都没有减少大小，我们可以假设没有发生垃圾收集。

如果我然后添加一行代码，将单个元素添加到数组 a 中，放置在 a 增长到 500 万个元素之后，然后分配一个空数组：

```
GC::Profiler.enable
GC::Profiler.clear

a = []
5_000_000.times do
  a << [rand(36**10).to_s(36)]
end

puts "\n size is #{a.size}"
a = []

# the only change is to add one element to the (now) empty array a
a << [rand(36**10).to_s(36)]

GC::Profiler.report 
```

这会将分析器输出更改为（删除了一些列和行）：

```
GC 62 invokes.
Index    Invoke Time(sec)       Use Size(byte)     Total Size(byte)     ...
    1               0.156               131376               409200     ...
    2               0.172               192792               409200     ...
  ...
   59              35.375            211187736            260955024     ...
   60              36.625            211395000            469679760     ...
   61              41.891              2280168            307832976     ... 
```

此分析器运行现在以使用的 131 376 字节开始，这与之前的运行类似，但会增长，但以使用的 2 280 168 字节结束，显着低于之前以使用 211 394 640 字节结束的分析器运行，我们可以假设垃圾收集在此运行期间发生，可能是由我们向 a 添加元素的新代码行触发的。

简短的回答是否定的，您不需要做任何特别的事情来删除分配给 a 的数据，但希望这可以为您提供证明它的工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T07:14:23.550

你可以打电话`GC.start()`，但你可能不想。例如，请参阅：[Ruby 垃圾收集](https://stackoverflow.com/questions/6067139/ruby-garbage-collect)，在 Stack Overflow 上进行讨论。基本上，我会让垃圾收集器自己决定何时运行，除非你有令人信服的理由强制它。

# java - 如何使 JTable 单元格（链接）可点击

> ID：11912752
> 
> 赞同：3
> 
> 时间：2012-08-11T07:06:58.560
> 
> 标签：java, sql-server, swing, jtable

我正在用 Java 制作一个医院项目，我制作了一个从 SQL 数据库`JTable`获取医院名称和医院图像链接的项目。`"Click to see more"`我的问题是数据已成功从数据库提取到表中，但我无法单击表单元格中的链接。

如何使链接处于活动状态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T07:44:21.683

[考虑使用 JXTable（ SwingX](http://swingx.java.net/)的一个类）：它支持超链接渲染器，可以配置为根据单元格值执行任何操作

```
JXTable table = new JXTable(myModel);
AbstractHyperlinkAction<Object> simpleAction = new AbstractHyperlinkAction<Object>(null) {

    public void actionPerformed(ActionEvent e) {
        // here goes what you want to do on activating the hyperlink
        //LOG.info("hit: " + getTarget());
    }

};
TableCellRenderer renderer = new DefaultTableRenderer(
    new HyperlinkProvider(simpleAction));
table.getColumnExt(0).setEditable(false);
table.getColumnExt(0).setCellRenderer(renderer); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T07:27:35.367

您可以创建一个可用于通过单击鼠标来激活`TableCellEditor`的方法。`isCellEditable`坦率地说，这只会变得一团糟。

或者，您可以`MouseListener`直接将 a 附加到表并监视`mouseClicked`事件。

在单击事件上，您可能需要[getSelectedColumn](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedColumn%28%29)和[getSelectedRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedRow%28%29)来确定他们是否单击了您想要的列并使用[getValueAt从所选单元格中获取链接值](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getValueAt%28int,%20int%29)

您需要考虑表格可能已排序或列不再按照您开始它们的顺序（用户可能已移动它们）。

然后你需要[convertColumnIndexToView](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToModel%28int%29)和[convertRowIndexToModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertRowIndexToModel%28int%29)

简单：D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-26T20:39:46.463

我认为避免使用外部库是 MadProgrammer 建议的更好方法，但我猜 Swingx 仍然是纯 Java。无论如何，我会使用 mouseClicked 侦听器，然后按照这个问题[如何在 JLabel 中添加超链接中](https://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)描述的方式打开 uri 。

```
JTable table = new JTable();

table.addMouseListener(new MouseAdapter() {
  public void mouseClicked(MouseEvent e) {

        int row = table.getSelectedRow();
        int col = table.getSelectedColumn();

        //build your address / link

        URI uri = new URI("http: your link here");

        //see below
        open(uri);
      }
    });

//Then elsewhere as from the McDowell answer
private static void open(URI uri) {
  if (Desktop.isDesktopSupported()) {
    try {
       Desktop.getDesktop().browse(uri);
      } catch (IOException e) { /* TODO: error handling */ }
   } else { /* TODO: error handling */ }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T12:44:07.107

我解决了在可点击的单元格内添加一个按钮的问题，我按照Rob Camick 的本教程[Table Button Column进行操作：](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

```
String[] columnNames = {"First Name", "Last Name", ""};
Object[][] data =
{
    {"Homer", "Simpson", "delete Homer"},
    {"Madge", "Simpson", "delete Madge"},
    {"Bart",  "Simpson", "delete Bart"},
    {"Lisa",  "Simpson", "delete Lisa"},
};

DefaultTableModel model = new DefaultTableModel(data, columnNames);
JTable table = new JTable( model ); 
```

然后：

```
Action delete = new AbstractAction()
{
    public void actionPerformed(ActionEvent e)
    {
        JTable table = (JTable)e.getSource();
        int modelRow = Integer.valueOf( e.getActionCommand() );
        ((DefaultTableModel)table.getModel()).removeRow(modelRow);
    }
};

ButtonColumn buttonColumn = new ButtonColumn(table, delete, 2);
buttonColumn.setMnemonic(KeyEvent.VK_D); 
```

ButtonColumn 类在哪里：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

/**
 *  The ButtonColumn class provides a renderer and an editor that looks like a
 *  JButton. The renderer and editor will then be used for a specified column
 *  in the table. The TableModel will contain the String to be displayed on
 *  the button.
 *
 *  The button can be invoked by a mouse click or by pressing the space bar
 *  when the cell has focus. Optionally a mnemonic can be set to invoke the
 *  button. When the button is invoked the provided Action is invoked. The
 *  source of the Action will be the table. The action command will contain
 *  the model row number of the button that was clicked.
 *
 */
public class ButtonColumn extends AbstractCellEditor
    implements TableCellRenderer, TableCellEditor, ActionListener, MouseListener
{
    private JTable table;
    private Action action;
    private int mnemonic;
    private Border originalBorder;
    private Border focusBorder;

    private JButton renderButton;
    private JButton editButton;
    private Object editorValue;
    private boolean isButtonColumnEditor;

    /**
     *  Create the ButtonColumn to be used as a renderer and editor. The
     *  renderer and editor will automatically be installed on the TableColumn
     *  of the specified column.
     *
     *  @param table the table containing the button renderer/editor
     *  @param action the Action to be invoked when the button is invoked
     *  @param column the column to which the button renderer/editor is added
     */
    public ButtonColumn(JTable table, Action action, int column)
    {
        this.table = table;
        this.action = action;

        renderButton = new JButton();
        editButton = new JButton();
        editButton.setFocusPainted( false );
        editButton.addActionListener( this );
        originalBorder = editButton.getBorder();
        setFocusBorder( new LineBorder(Color.BLUE) );

        TableColumnModel columnModel = table.getColumnModel();
        columnModel.getColumn(column).setCellRenderer( this );
        columnModel.getColumn(column).setCellEditor( this );
        table.addMouseListener( this );
    }

    /**
     *  Get foreground color of the button when the cell has focus
     *
     *  @return the foreground color
     */
    public Border getFocusBorder()
    {
        return focusBorder;
    }

    /**
     *  The foreground color of the button when the cell has focus
     *
     *  @param focusBorder the foreground color
     */
    public void setFocusBorder(Border focusBorder)
    {
        this.focusBorder = focusBorder;
        editButton.setBorder( focusBorder );
    }

    public int getMnemonic()
    {
        return mnemonic;
    }

    /**
     *  The mnemonic to activate the button when the cell has focus
     *
     *  @param mnemonic the mnemonic
     */
    public void setMnemonic(int mnemonic)
    {
        this.mnemonic = mnemonic;
        renderButton.setMnemonic(mnemonic);
        editButton.setMnemonic(mnemonic);
    }

    @Override
    public Component getTableCellEditorComponent(
        JTable table, Object value, boolean isSelected, int row, int column)
    {
        if (value == null)
        {
            editButton.setText( "" );
            editButton.setIcon( null );
        }
        else if (value instanceof Icon)
        {
            editButton.setText( "" );
            editButton.setIcon( (Icon)value );
        }
        else
        {
            editButton.setText( value.toString() );
            editButton.setIcon( null );
        }

        this.editorValue = value;
        return editButton;
    }

    @Override
    public Object getCellEditorValue()
    {
        return editorValue;
    }

//
//  Implement TableCellRenderer interface
//
    public Component getTableCellRendererComponent(
        JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        if (isSelected)
        {
            renderButton.setForeground(table.getSelectionForeground());
            renderButton.setBackground(table.getSelectionBackground());
        }
        else
        {
            renderButton.setForeground(table.getForeground());
            renderButton.setBackground(UIManager.getColor("Button.background"));
        }

        if (hasFocus)
        {
            renderButton.setBorder( focusBorder );
        }
        else
        {
            renderButton.setBorder( originalBorder );
        }

//      renderButton.setText( (value == null) ? "" : value.toString() );
        if (value == null)
        {
            renderButton.setText( "" );
            renderButton.setIcon( null );
        }
        else if (value instanceof Icon)
        {
            renderButton.setText( "" );
            renderButton.setIcon( (Icon)value );
        }
        else
        {
            renderButton.setText( value.toString() );
            renderButton.setIcon( null );
        }

        return renderButton;
    }

//
//  Implement ActionListener interface
//
    /*
     *  The button has been pressed. Stop editing and invoke the custom Action
     */
    public void actionPerformed(ActionEvent e)
    {
        int row = table.convertRowIndexToModel( table.getEditingRow() );
        fireEditingStopped();

        //  Invoke the Action

        ActionEvent event = new ActionEvent(
            table,
            ActionEvent.ACTION_PERFORMED,
            "" + row);
        action.actionPerformed(event);
    }

//
//  Implement MouseListener interface
//
    /*
     *  When the mouse is pressed the editor is invoked. If you then then drag
     *  the mouse to another cell before releasing it, the editor is still
     *  active. Make sure editing is stopped when the mouse is released.
     */
    public void mousePressed(MouseEvent e)
    {
        if (table.isEditing()
        &&  table.getCellEditor() == this)
            isButtonColumnEditor = true;
    }

    public void mouseReleased(MouseEvent e)
    {
        if (isButtonColumnEditor
        &&  table.isEditing())
            table.getCellEditor().stopCellEditing();

        isButtonColumnEditor = false;
    }

    public void mouseClicked(MouseEvent e) {}
    public void mouseEntered(MouseEvent e) {}
    public void mouseExited(MouseEvent e) {}
} 
```

# android - Android Phonegap

> ID：11912754
> 
> 赞同：0
> 
> 时间：2012-08-11T07:07:19.610
> 
> 标签：android, cordova

我终于让示例 phonegap 项目运行了，但是因为我想更改 index.html 中的某些内容，所以它给了我这个错误。

```
 [2012-08-11 17:04:46 - s] W/ResourceType( 9484): Bad XML block: header size 60 or total size 0 is larger than data size 0
    [2012-08-11 17:04:46 - s] C:\Users\TOomo\workspace\s\res\layout\activity_test.xml:6: error: Error: No resource found that matches the given name (at 'text' with value '@string/hello_world').
    [2012-08-11 17:04:46 - s] C:\Users\TOomo\workspace\s\res\menu\activity_test.xml:2: error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings'). 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:16:27.853

您必须在值中定义字符串 new_game

你的字符串你的字符串参考[这个](http://developer.android.com/guide/topics/resources/string-resource.html)

您可以创建值 xml 文件 - 如果您使用的是 eclipse 然后右键单击项目并选择其他并选择 android xml 文件，然后给定窗口选择资源类型作为值，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:33:06.973

单击“res”文件夹并转到“values”。打开名为“字符串”的文件。确保在其中设置了一个名为“hello_world”的字符串和另一个名为“menu_settings”的字符串。

# facebook - 如何删除应用程序的新 Facebook 身份验证对话框？

> ID：11912757
> 
> 赞同：0
> 
> 时间：2012-08-11T07:07:40.420
> 
> 标签：facebook, authentication

我想知道如何删除新的身份验证对话框。

我的意思是，我希望我的应用程序是这样的：

![在此处输入图像描述](../Images/cd2da1d1f8ace8f8428e373da0395c83.png)

不像这样：

![在此处输入图像描述](../Images/3276a0aea4a6c7ddcbdf3195c8832120.png)

我尝试了高级设置，但没有任何选项可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:27:20.190

您无法决定对话框接收哪种布局，因为 Facebook 保留调整此选项以最大化转化/用户情绪。

我想问题是，你*为什么*想要其他布局？为什么你觉得这会更适合？您是否有数据表明这种转换比另一种更好？

# java - blobStoreService.serve() 没有提供下载文件

> ID：11912759
> 
> 赞同：0
> 
> 时间：2012-08-11T07:08:02.360
> 
> 标签：java, google-app-engine, blobstore

我有一个 servlet，我首先从[http://www.cbwe.gov.in/htmleditor1/pdf/sample.pdf](http://www.cbwe.gov.in/htmleditor1/pdf/sample.pdf)下载一个 pdf，将其内容上传到我的 blobstore，当用户在浏览器中发送获取请求时，一个 blob将在浏览器中下载，但不是下载，而是以其他格式显示数据。这是我的servlet代码：

```
package org.ritesh;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.ByteBuffer;

import javax.servlet.http.*;

import org.apache.commons.io.IOUtils;

import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;
import com.google.appengine.api.files.AppEngineFile;
import com.google.appengine.api.files.FileServiceFactory;
import com.google.appengine.api.files.FileService;
import com.google.appengine.api.files.FileWriteChannel;

@SuppressWarnings("serial")
public class BlobURLServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");

         FileService fileService = FileServiceFactory.getFileService();

          // Create a new Blob file with mime-type "text/plain"

          String url="http://www.cbwe.gov.in/htmleditor1/pdf/sample.pdf";
          URL url1=new URL(url);
          HttpURLConnection conn=(HttpURLConnection) url1.openConnection();
          String content_type=conn.getContentType();
          InputStream stream =conn.getInputStream();
          AppEngineFile file = fileService.createNewBlobFile("application/pdf");
          file=new AppEngineFile(file.getFullPath());
         Boolean lock = true;
          FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);

          // This time we write to the channel directly
          String s1="";
          String s2="";

          byte[] bytes = IOUtils.toByteArray(stream);

          writeChannel.write(ByteBuffer.wrap(bytes));
          writeChannel.closeFinally();
          BlobKey blobKey = fileService.getBlobKey(file);
          BlobstoreService blobStoreService = BlobstoreServiceFactory.getBlobstoreService();
          blobStoreService.serve(blobKey, resp);

    }
} 
```

我在 onemoredemo1.appspot.com 上部署了这个 servlet。请打开此 url 并注意当您单击 BlobURL servlet 时它正在显示内容而不是显示下载对话框。我应该在我的代码中进行哪些修改，以便在浏览器中显示下载对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:13:27.467

看这里：

```
resp.setContentType("text/plain"); 
```

您说过内容是纯文本，但实际上不是。您需要将`Content-Disposition`标题适当地设置为附件，并将内容类型设置为`application/pdf`.

此外，如果您要提供二进制内容，则不应*同时*使用编写器（您正在使用它编写`"Hello, world"`）。

如果您将前几行更改为：

```
resp.setContentType("application/pdf");
resp.setHeader("Content-Disposition", "attachment;filename=sample.pdf"); 
```

你可能会发现这就是所有需要的。

# c# - 客户端和服务器端调用 asp 按钮的问题

> ID：11912767
> 
> 赞同：0
> 
> 时间：2012-08-11T07:09:42.943
> 
> 标签：c#, javascript, asp.net, image, file-upload

我想使用客户端代码设置图像控件的图像 URL，并使用 C# 代码将图像保存到服务器。这是我已经实现的：

```
<asp:Button ID="btnImageUpload" OnClick="btnImageUpload_Click"  runat="server" Text="Preview" CausesValidation="false" OnClientClick="Image_View();"/> 
```

**C#代码：**

```
protected void btnImageUpload_Click(object sender, EventArgs e)
{
    if (Directory.Exists(@"C:\\Images"))
        SaveImage_Server();
    else
    {
        Directory.CreateDirectory(@"C:\\Images");
        SaveImage_Server();
    }
}
    public void SaveImage_Server()
    {
        try
        {
            if (FlUpldImage.PostedFile.ContentLength > 0)
            {
                String fn = Convert.ToString(DateTime.Now) + Path.GetFileName(FlUpldImage.FileName);
                if (fn.Contains('/'))
                {
                    fn = fn.Replace("/", "");
                }
                if (fn.Contains(':'))
                {
                    fn = fn.Replace(":", "");
                }
                if (fn.Contains(" "))
                {
                    fn = fn.Replace(" ", "");
                }
                String Saved_ImagePath = @"C://Images/" + fn; // making the path with created dynamically folder name
                FlUpldImage.SaveAs(Saved_ImagePath);
                HidnLocalImageURL.Value = Saved_ImagePath;

            }
        }
        catch (Exception re)
        { 
        }
    } 
```

**JavaScript**

```
 function Image_View() {
//        __doPostBack('<%= btnImageUpload.ClientID %>', '');

//        var clickButton = document.getElementById("<%= btnImageUpload.ClientID %>");
//        clickButton.click()

        var idFlUpload = '<%= FlUpldImage.ClientID %>';
        var fu1 = document.getElementById(idFlUpload);
        var idImgCntrl = '<%= imgCorrect.ClientID %>';
        var ImgCntrl = document.getElementById(idImgCntrl);

        alert("You selected " + fu1.value);
        ImgCntrl.setAttribute('src', fu1.value);
    } 
```

现在我的问题是，一旦执行服务器端代码，页面就会刷新，并且使用 JS 设置为图像控件的链接会重置为默认值。

我怎样才能得到这个工作，其中图像也被保存，图像 URL 属性也通过 JS 设置。

如果有任何其他方法可以实现这一点，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:17:44.120

您也必须在服务器上设置它。您可以使用隐藏字段保存 url 并访问服务器上的隐藏字段以获取设置 mgCntrl.ImageUrl 的 url

**在 html 中**

```
<input type="hidden" runat="server" id="hdnImageSrc" /> 
```

**在客户端 javascript**

```
hdnImageSrc = document.getElementById('<%= hdnImageSrc.ClientID %>');
mgCntrl.setAttribute('src', fu1.value);
hdnImageSrc.value = fu1.value; 
```

**在服务器端代码**

```
mgCntrl.ImageUrl = hdnImageSrc.Value; 
```

# python - 部署 f-droid 服务器

> ID：11912778
> 
> 赞同：1
> 
> 时间：2012-08-11T07:11:36.077
> 
> 标签：python, deployment, webserver, fdroid

我正在尝试按照[手册](http://f-droid.org/manual/fdroid.html#System-Requirements)中的说明在 f-droid 服务器中部署一个简单的二进制存储库。

作为一个完整的python新手，我无法弄清楚这个过程。这是我到目前为止所做的：

*   在我的 Mac 上通过 VirtualBox 安装了 Ubuntu。
*   下载 android SDK 并将其保存在 ~/tools/android-sdk 中。NDK也是如此。
*   克隆 fdroidserver 和 fdroiddata 存储库并将 fdroidserver 的路径添加到 $PATH。
*   将 fdroiddata 复制到 /var/www/ （不确定这是否正确）
*   编辑 config.py 以反映 SDK n NDK 路径，将 repo URL 设置为 localhost/fdroiddata
*   在 fdroiddata 中创建了 repo 目录，在其中复制了一个 APK 并尝试运行 fdroid update.py（这会引发错误）

我无法让服务器运行。我的另一个疑问：是否可以通过 localhost 查看服务器中的某些数据，或者服务器仅对从 fdroid android 客户端提出的请求正确响应？

有人可以指导我正确的方向吗？

*   谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:02:49.023

[在f-droid官方论坛](http://f-droid.org/forums/topic/deploying-f-droid-server-how-to/)版主的帮助下，我终于弄明白了:-)

只需要 fdroidserver 工具来生成 repo 文件，并且更新 repo 的命令 is`fdroid update`和 not `fdroid update.py`。他们现在在手册中修复了它。

在我的博客中写了一篇关于设置一个简单的二进制 repo的[教程。](http://www.gethugames.in/blog/2012/08/fdroid-binary-repo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-06T09:19:58.203

We've recently revamped the [F-Droid docs](https://f-droid.org/docs) so things should be easier to find and follow. The instructions for setting up your own repo are now here: [https://f-droid.org/docs/Setup_an_F-Droid_App_Repo](https://f-droid.org/docs/Setup_an_F-Droid_App_Repo)

# oracle11g - Oracle 11g 语句创建新用户并授予权限？

> ID：11912781
> 
> 赞同：9
> 
> 时间：2012-08-11T07:11:57.413
> 
> 标签：oracle11g

我想在 oracle 11g 中创建一个用户/模式并将所有权限授予用户。我怎样才能用一个简单的脚本做到这一点。我查看了以下链接，但我不确定使用哪一个或者这些语句是否是最好的方法。

[http://ss64.com/ora/grant.html](http://ss64.com/ora/grant.html)

你能建议我如何以最简单的方式安全地做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T18:03:27.307

要创建新用户，请使用“ *create user* ”命令。所以一个典型的创建用户命令是：

```
create user test identified by test default tablespace mytbsp. 
```

当然，您需要将用户、密码和表空间的值替换为不同的值。但是，我建议您查看 Oracle 的文档[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8003.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8003.htm)。

下一步是授予用户相应的权限。授予用户所有权限是一种非常糟糕的方法，因为您还会授予他 dba 权限。相反，您给他的连接权限和对他的默认表空间的权限。此外，最好使用角色而不是直接授予权限。因此，如果您必须再次授予权限，您只需授予角色。第一步是创建角色：

```
GRANT CREATE session, CREATE table, CREATE view, 
      CREATE procedure,CREATE synonym,
      ALTER table, ALTER view, ALTER procedure,ALTER synonym,
      DROP table, DROP view, DROP procedure,DROP synonym
      TO MyRole; 
```

此声明不完整，您可能需要额外的权限（例如索引维护），但请查看在线 oracle 文档。

之后，您将角色授予新创建的用户。

```
GRANT myrole to test; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-24T06:53:01.833

创建用户：

```
create user user_name identified by password ; 
```

授予权限：

```
grant all privilege to user_name; 
```

如果要查看权限数量：

```
select * from system_privilege_map where neme like '%PRIV%'; 
```

如果要查看分配给用户的权限：

```
select count (*) , grantee
from dba_sys_privs 
where grantee in ('user1','user2')
group by grantee ; 
```

# c# - 在 C# 中解析和上传 >1GB 的数据

> ID：11912782
> 
> 赞同：3
> 
> 时间：2012-08-11T07:12:19.783
> 
> 标签：c#, sql-server, performance, parsing, file-upload

我编写了一个程序来解析大量数据并将其上传到数据库。问题是解析太慢了。我的程序的工作方式是我有 Parser 类，它解析（使用并行化）每个文件，并为它在每个文件中解析的每个条目引发一个事件：

```
Parallel.ForEach<FileInfo>(
    files,
    new ParallelOptions { MaxDegreeOfParallelism = maxParallelism },
    (inputFile, args) =>
    {
        // Using underlying FileStream to allow concurrent Read/Write access.
        using (var input = new StreamReader(inputFile.FullName))
        {
            while (!input.EndOfStream)
            {
                RaiseEntryParsed(ParseCity(input.ReadLine()));
            }
            ParsedFiles++;
            RaiseFileParsed(inputFile);
        }
    });
RaiseDirectoryParsed(Directory); 
```

“主”程序订阅此事件，并将条目添加到 DataTable 以执行 SqlBulkCopy；SqlBulkCopy 仅在解析器类引发 FileParsed 事件时提交（每次解析文件时）：

```
using (SqlBulkCopy bulkCopy = new SqlBulkCopy(_connectionString))
{
    DataTable cityTable = DataContext.CreateCityDataTable();
    parser.EntryParsed +=
        (s, e) =>
        {
            DataRow cityRow = cityTable.NewRow();
            City parsedCity = (City)e.DatabaseEntry;

            cityRow["id"] = parsedCity.Id;
            ...
            ...

            cityTable.Rows.Add(cityRow);
        };

    parser.FileParsed +=
        (s, e) =>
        {
            bulkCopy.WriteToServer(cityTable);
            Dispatcher.BeginInvoke((Action)UpdateProgress);
            cityTable.Rows.Clear();
        };

    parser.DirectoryParsed +=
        (s, e) =>
        {
            bulkCopy.WriteToServer(cityTable);
            Dispatcher.BeginInvoke((Action)UpdateProgress);
        };

    parser.BeginParsing();
} 
```

每次提交后清除表的行的原因是为了节省内存并防止内存中存在这么多实体的 OutOfMemoryException ...

我怎样才能让它更快，它目前慢得令人无法接受。我分析了应用程序，它指出大部分时间都花在了 Entryparsed 事件上。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:43:43.677

我做了一个简短的测试项目，并尝试了几种不同的方法。我的目标是使用顺序代码尽快构建一个包含 27 列和 (id,A,B,C,...,Z) 和 NumOfRows 约 300,000 的 DataTable。

（每行填充一个 id，其余列填充随机 5 个字母的单词）。

在我的第四次尝试中，我偶然发现了一种基于 Object 类型值数组将行添加到表中的不同语法。（见[这里](http://msdn.microsoft.com/en-us/library/z16c79x4.aspx)）。

在您的情况下，它将类似于：

```
cityTable.Rows.Add( new Object[] {

  ((City)e.DatabaseEntry).Id ,

  ObjectThatGoesInColumn2    ,

  ObjectThatGoesInColumn3    ,

  ObjectThatGoesInLastColumn

} 
```

代替：

```
DataRow row = cityTable.NewRow();

row[0] = 100;
row["City Name"] = Anaheim;
row["Column 7"] = ...
...
row["Column 26"] = checksum;

workTable.Rows.Add( row ); 
```

这将加快您的速度，因为您不会一次单独设置每一列，并且根据您的分析器图片，您至少有 12 个单独设置的列。

这也避免了对列名字符串进行散列以查看您正在处理的数组位置，然后再次检查数据类型是否正确。

如果您有兴趣，这是我的测试项目：

```
class Program
{
    public static System.Data.DataSet dataSet;
    public static System.Data.DataSet dataSet2;
    public static System.Data.DataSet dataSet3;
    public static System.Data.DataSet dataSet4;

    public static Random rand = new Random();

    public static int NumOfRows = 300000;

    static void Main(string[] args)
    {

        #region test1

        Console.WriteLine("Starting");

        Console.WriteLine("");

        Stopwatch watch = new Stopwatch();

        watch.Start();

        MakeTable();

        watch.Stop();

        Console.WriteLine("Elapsed Time was: " + watch.ElapsedMilliseconds + " milliseconds.");
        dataSet = null;

        Console.WriteLine("");

        Console.WriteLine("Completed.");

        Console.WriteLine("");

        #endregion

        /*

        #region test2

        Console.WriteLine("Starting Test 2");

        Console.WriteLine("");

        watch.Reset();

        watch.Start();

        MakeTable2();

        watch.Stop();

        Console.WriteLine("Elapsed Time was: " + watch.ElapsedMilliseconds + " milliseconds.");
        dataSet2 = null;

        Console.WriteLine("");

        Console.WriteLine("Completed Test 2.");

        #endregion

        #region test3
        Console.WriteLine("");

        Console.WriteLine("Starting Test 3");

        Console.WriteLine("");

        watch.Reset();

        watch.Start();

        MakeTable3();

        watch.Stop();

        Console.WriteLine("Elapsed Time was: " + watch.ElapsedMilliseconds + " milliseconds.");
        dataSet3 = null;

        Console.WriteLine("");

        Console.WriteLine("Completed Test 3.");

        #endregion

         */ 

        #region test4
        Console.WriteLine("Starting Test 4");

        Console.WriteLine("");

        watch.Reset();

        watch.Start();

        MakeTable4();

        watch.Stop();

        Console.WriteLine("Elapsed Time was: " + watch.ElapsedMilliseconds + " milliseconds.");
        dataSet4 = null;

        Console.WriteLine("");

        Console.WriteLine("Completed Test 4.");

        #endregion

        //printTable();

        Console.WriteLine("");
        Console.WriteLine("Press Enter to Exit...");

        Console.ReadLine();
    }

    private static void MakeTable()
    {
        DataTable table = new DataTable("Table 1");

        DataColumn column;
        DataRow row;

        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "id";
        column.ReadOnly = true;
        column.Unique = true;

        table.Columns.Add(column);

        for (int i = 65; i <= 90; i++)
        {
            column = new DataColumn();
            column.DataType = System.Type.GetType("System.String");
            column.ColumnName = "5-Letter Word " + (char)i;
            column.AutoIncrement = false;
            column.Caption = "Random Word " + (char)i;
            column.ReadOnly = false;
            column.Unique = false;
            // Add the column to the table.
            table.Columns.Add(column);
        }

        DataColumn[] PrimaryKeyColumns = new DataColumn[1];
        PrimaryKeyColumns[0] = table.Columns["id"];
        table.PrimaryKey = PrimaryKeyColumns;

        // Instantiate the DataSet variable.
        dataSet = new DataSet();
        // Add the new DataTable to the DataSet.
        dataSet.Tables.Add(table);

        // Create three new DataRow objects and add 
        // them to the DataTable
        for (int i = 0; i < NumOfRows; i++)
        {
            row = table.NewRow();
            row["id"] = i;

            for (int j = 65; j <= 90; j++)
            {
                row["5-Letter Word " + (char)j] = getRandomWord();
            }

            table.Rows.Add(row);
        }

    }

    private static void MakeTable2()
    {
        DataTable table = new DataTable("Table 2");

        DataColumn column;
        DataRow row;

        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "id";
        column.ReadOnly = true;
        column.Unique = true;

        table.Columns.Add(column);

        for (int i = 65; i <= 90; i++)
        {
            column = new DataColumn();
            column.DataType = System.Type.GetType("System.String");
            column.ColumnName = "5-Letter Word " + (char)i;
            column.AutoIncrement = false;
            column.Caption = "Random Word " + (char)i;
            column.ReadOnly = false;
            column.Unique = false;
            // Add the column to the table.
            table.Columns.Add(column);
        }

        DataColumn[] PrimaryKeyColumns = new DataColumn[1];
        PrimaryKeyColumns[0] = table.Columns["id"];
        table.PrimaryKey = PrimaryKeyColumns;

        // Instantiate the DataSet variable.
        dataSet2 = new DataSet();
        // Add the new DataTable to the DataSet.
        dataSet2.Tables.Add(table);

        // Create three new DataRow objects and add 
        // them to the DataTable
        for (int i = 0; i < NumOfRows; i++)
        {
            row = table.NewRow();

            row.BeginEdit();

            row["id"] = i;

            for (int j = 65; j <= 90; j++)
            {
                row["5-Letter Word " + (char)j] = getRandomWord();
            }

            row.EndEdit();

            table.Rows.Add(row);
        }

    }

    private static void MakeTable3()
    {
        DataTable table = new DataTable("Table 3");

        DataColumn column;

        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "id";
        column.ReadOnly = true;
        column.Unique = true;

        table.Columns.Add(column);

        for (int i = 65; i <= 90; i++)
        {
            column = new DataColumn();
            column.DataType = System.Type.GetType("System.String");
            column.ColumnName = "5-Letter Word " + (char)i;
            column.AutoIncrement = false;
            column.Caption = "Random Word " + (char)i;
            column.ReadOnly = false;
            column.Unique = false;
            // Add the column to the table.
            table.Columns.Add(column);
        }

        DataColumn[] PrimaryKeyColumns = new DataColumn[1];
        PrimaryKeyColumns[0] = table.Columns["id"];
        table.PrimaryKey = PrimaryKeyColumns;

        // Instantiate the DataSet variable.
        dataSet3 = new DataSet();
        // Add the new DataTable to the DataSet.
        dataSet3.Tables.Add(table);

        DataRow[] newRows = new DataRow[NumOfRows];

        for (int i = 0; i < NumOfRows; i++)
        {
            newRows[i] = table.NewRow();
        }

        // Create three new DataRow objects and add 
        // them to the DataTable
        for (int i = 0; i < NumOfRows; i++)
        {

            newRows[i]["id"] = i;

            for (int j = 65; j <= 90; j++)
            {
                newRows[i]["5-Letter Word " + (char)j] = getRandomWord();
            }

            table.Rows.Add(newRows[i]);
        }

    }

    private static void MakeTable4()
    {
        DataTable table = new DataTable("Table 2");

        DataColumn column;

        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "id";
        column.ReadOnly = true;
        column.Unique = true;

        table.Columns.Add(column);

        for (int i = 65; i <= 90; i++)
        {
            column = new DataColumn();
            column.DataType = System.Type.GetType("System.String");
            column.ColumnName = "5-Letter Word " + (char)i;
            column.AutoIncrement = false;
            column.Caption = "Random Word " + (char)i;
            column.ReadOnly = false;
            column.Unique = false;
            // Add the column to the table.
            table.Columns.Add(column);
        }

        DataColumn[] PrimaryKeyColumns = new DataColumn[1];
        PrimaryKeyColumns[0] = table.Columns["id"];
        table.PrimaryKey = PrimaryKeyColumns;

        // Instantiate the DataSet variable.
        dataSet4 = new DataSet();
        // Add the new DataTable to the DataSet.
        dataSet4.Tables.Add(table);

        // Create three new DataRow objects and add 
        // them to the DataTable
        for (int i = 0; i < NumOfRows; i++)
        {

            table.Rows.Add( 

                new Object[] {

                    i,

                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord(),
                    getRandomWord()

                } 

            );
        }

    }

    private static string getRandomWord()
    {

        char c0 = (char)rand.Next(65, 90);
        char c1 = (char)rand.Next(65, 90);
        char c2 = (char)rand.Next(65, 90);
        char c3 = (char)rand.Next(65, 90);
        char c4 = (char)rand.Next(65, 90);

        return "" + c0 + c1 + c2 + c3 + c4;
    }

    private static void printTable()
    {
        foreach (DataRow row in dataSet.Tables[0].Rows)
        {
            Console.WriteLine( row["id"] + "--" + row["5-Letter Word A"] + " - " + row["5-Letter Word Z"] );
        }
    }

} 
```

我还没有真正看过你的并行性，但有几件事。

首先，更改“ParsedFiles++;” 到“Interlocked.Increment(ref ParsedFiles);”，或者通过锁定它。

其次，我建议不要使用复杂的事件驱动并行性，而是使用非常适合这种情况的流水线模式。

使用来自并发集合的并发队列（或阻塞集合）来保存阶段。

第一阶段将保存要处理的文件列表。

工作任务将从该工作列表中取出一个文件，对其进行解析，然后将其添加到第二阶段。

在第二阶段，工作任务将从第二阶段队列（刚刚完成的数据表块）中取出项目，并在它们准备好上传时将它们上传到数据库。

* * *

编辑：

我写了一个[流水线](http://msdn.microsoft.com/en-us/library/ff963548.aspx)版本的代码，它应该可以帮助你：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.Concurrent;
using System.Threading.Tasks;
using System.IO;
using System.Data;

namespace dataTableTesting2
{
    class Program
    {          
        private static const int BufferSize = 20; //Each buffer can only contain this many elements at a time
                                                  //This limits the total amount of memory 

        private static const int MaxBlockSize = 100;

        private static BlockingCollection<string> buffer1 = new BlockingCollection<string>(BufferSize);

        private static BlockingCollection<string[]> buffer2 = new BlockingCollection<string[]>(BufferSize);

        private static BlockingCollection<Object[][]> buffer3 = new BlockingCollection<Object[][]>(BufferSize);

        /// <summary>
        /// Start Pipelines and wait for them to finish.
        /// </summary>
        static void Main(string[] args)
        {
            TaskFactory f = new TaskFactory(TaskCreationOptions.LongRunning, TaskContinuationOptions.None);

            Task stage0 = f.StartNew(() => PopulateFilesList(buffer1));
            Task stage1 = f.StartNew(() => ReadFiles(buffer1, buffer2));
            Task stage2 = f.StartNew(() => ParseStringBlocks(buffer2, buffer3));
            Task stage3 = f.StartNew(() => UploadBlocks(buffer3) );

            Task.WaitAll(stage0, stage1, stage2, stage3);

            /*
            // Note for more workers on particular stages you can make more tasks for each stage, like the following
            //    which populates the file list in 1 task, reads the files into string[] blocks in 1 task,
            //    then parses the string[] blocks in 4 concurrent tasks
            //    and lastly uploads the info in 2 tasks

            TaskFactory f = new TaskFactory(TaskCreationOptions.LongRunning, TaskContinuationOptions.None);

            Task stage0 = f.StartNew(() => PopulateFilesList(buffer1));
            Task stage1 = f.StartNew(() => ReadFiles(buffer1, buffer2));

            Task stage2a = f.StartNew(() => ParseStringBlocks(buffer2, buffer3));
            Task stage2b = f.StartNew(() => ParseStringBlocks(buffer2, buffer3));
            Task stage2c = f.StartNew(() => ParseStringBlocks(buffer2, buffer3));
            Task stage2d = f.StartNew(() => ParseStringBlocks(buffer2, buffer3));

            Task stage3a = f.StartNew(() => UploadBlocks(buffer3) );
            Task stage3b = f.StartNew(() => UploadBlocks(buffer3) );

            Task.WaitAll(stage0, stage1, stage2a, stage2b, stage2c, stage2d, stage3a, stage3b);

            */
        }

        /// <summary>
        /// Adds the filenames to process into the first pipeline
        /// </summary>
        /// <param name="output"></param>
        private static void PopulateFilesList( BlockingCollection<string> output )
        {
            try
            {
                buffer1.Add("file1.txt");
                buffer1.Add("file2.txt");
                //...
                buffer1.Add("lastFile.txt");
            }
            finally
            {
                output.CompleteAdding();
            }
        }

        /// <summary>
        /// Takes filnames out of the first pipeline, reads them into string[] blocks, and puts them in the second pipeline
        /// </summary>
        private static void ReadFiles( BlockingCollection<string> input, BlockingCollection<string[]> output)
        {
            try
            {
                foreach (string file in input.GetConsumingEnumerable())
                {
                    List<string> list = new List<string>(MaxBlockSize);

                    using (StreamReader sr = new StreamReader(file))
                    {
                        int countLines = 0;

                        while (!sr.EndOfStream)
                        {
                            list.Add( sr.ReadLine() );
                            countLines++;

                            if (countLines > MaxBlockSize)
                            {
                                output.Add(list.ToArray());
                                countLines = 0;
                                list = new List<string>(MaxBlockSize);
                            }
                        }

                        if (list.Count > 0)
                        {
                            output.Add(list.ToArray());
                        }
                    }
                }
            }

            finally
            {
                output.CompleteAdding();
            }
        }

        /// <summary>
        /// Takes string[] blocks from the second pipeline, for each line, splits them by tabs, and parses
        /// the data, storing each line as an object array into the third pipline.
        /// </summary>
        private static void ParseStringBlocks( BlockingCollection<string[]> input, BlockingCollection< Object[][] > output)
        {
            try
            {
                List<Object[]> result = new List<object[]>(MaxBlockSize);

                foreach (string[] block in input.GetConsumingEnumerable())
                {
                    foreach (string line in block)
                    {
                        string[] splitLine = line.Split('\t'); //split line on tab

                        string cityName = splitLine[0];
                        int cityPop = Int32.Parse( splitLine[1] );
                        int cityElevation = Int32.Parse(splitLine[2]);
                        //...

                        result.Add(new Object[] { cityName, cityPop, cityElevation });
                    }

                    output.Add( result.ToArray() );
                }
            }

            finally
            {
                output.CompleteAdding();
            }
        }

        /// <summary>
        /// Takes the data blocks from the third pipeline, and uploads each row to SQL Database
        /// </summary>
        private static void UploadBlocks(BlockingCollection<Object[][]> input)
        {
            /*
             * At this point 'block' is an array of object arrays.
             * 
             * The block contains MaxBlockSize number of cities.
             * 
             * There is one object array for each city.
             * 
             * The object array for the city is in the pre-defined order from pipeline stage2
             * 
             * You could do a couple of things at this point:
             * 
             * 1\. declare and initialize a DataTable with the correct column types
             *    then, do the  dataTable.Rows.Add( rowValues )
             *    then, use a Bulk Copy Operation to upload the dataTable to SQL
             *    http://msdn.microsoft.com/en-us/library/7ek5da1a
             * 
             * 2\. Manually perform the sql commands/transactions similar to what 
             *    Kevin recommends in this suggestion:
             *    http://stackoverflow.com/questions/1024123/sql-insert-one-row-or-multiple-rows-data/1024195#1024195
             * 
             * I've demonstrated the first approach with this code.
             * 
             * */

            DataTable dataTable = new DataTable();

            //set up columns of dataTable here.

            foreach (Object[][] block in input.GetConsumingEnumerable())
            {
                foreach (Object[] rowValues in block)
                {

                    dataTable.Rows.Add(rowValues);
                }

                //do bulkCopy to upload table containing MaxBlockSize number of cities right here.

                dataTable.Rows.Clear(); //Remove the rows when you are done uploading, but not the dataTable.
            }
        }

    }
} 
```

它将工作分为 4 个部分，可以由不同的任务完成：

1.  列出要处理的文件

2.  从该列表中获取文件并将它们读入字符串 []

3.  从上一部分获取字符串 [] 并解析它们，创建包含表中每一行的值的对象 []

4.  将行上传到数据库

为每个阶段分配多个任务也很容易，如果需要，允许多个工作人员执行相同的管道阶段。

（我怀疑从文件中读取超过 1 个任务是否有用，除非您使用的是固态驱动器，因为在内存中跳转非常慢）。

此外，您可以通过执行程序来限制内存中的数据量。

每个缓冲区都是一个使用最大大小初始化的 BlockingCollection，这意味着如果缓冲区已满，并且另一个任务尝试添加另一个元素，它将阻塞该任务。

幸运的是，Task Parallel Library 很聪明，如果一个任务被阻塞，它会安排另一个未被阻塞的任务，然后检查第一个任务是否已经停止被阻塞。

目前每个buffer只能容纳20个item，每个item只有100大，也就是说：

*   buffer1 将随时包含多达 20 个文件名。

*   buffer2 将随时包含来自这些文件的多达 20 个字符串块（由 100 行组成）。

*   buffer3 将随时包含多达 20 项数据块（100 个城市的对象值）。

所以这需要足够的内存来保存 20 个文件名、文件中的 2000 行和 2000 个城市信息。（对于局部变量等有一些额外的东西）。

您可能希望增加 BufferSize 和 MaxBlockSize 以提高效率，尽管这应该可以工作。

请注意，我没有对此进行测试，因为我没有任何输入文件，因此可能存在一些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:33:40.477

虽然我同意其他一些评论和答案，但您是否尝试过：

```
cityTable.Rows.BeginEdit() 
```

在第一项添加到城市表之前。

然后调用：

```
cityTable.Rows.EndEdit() 
```

在 FileParased 事件处理程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T13:43:25.027

如果您正在寻找原始性能，那么这样的东西不是最好的选择吗？它完全绕过了数据表代码，这似乎是一个不必要的步骤。

```
void BulkInsertFile(string fileName, string tableName)
    {
        FileInfo info = new FileInfo(fileName);
        string name = info.Name;
        string shareDirectory = ""; //the path of the share: \\servername\shareName\
        string serverDirectory = ""; //the local path of the share on the server: C:\shareName\

        File.Copy(fileName, shareDirectory + name);
        // or you could call your method to parse the file and write it to the share directory.

        using (SqlConnection cnn = new SqlConnection("connectionString"))
        {
            cnn.Open();
            using (SqlCommand cmd = cnn.CreateCommand())
            {
                cmd.CommandText = string.Format("bulk insert {0} from '{1}' with (fieldterminator = ',', rowterminator = '\n')", tableName, serverDirectory + name);

                try
                {
                    cmd.ExecuteScalar();
                }
                catch (SqlException ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        }
    } 
```

[以下](http://msdn.microsoft.com/en-us/library/ms188365.aspx "这里")`bulk insert`是有关该命令的一些信息。

# python - wxpython - 多个 TextEntryDialog 窗口

> ID：11912784
> 
> 赞同：0
> 
> 时间：2012-08-11T07:12:49.580
> 
> 标签：python, wxpython

我正在尝试做一个TextEntryDialog，然后是另一个TextEntryDialog。我只能让第一个出现，然后在我点击确定后第二个不出现。我敢肯定这很容易，有人有什么建议吗？谢谢。

```
#! /usr/bin/env python

import wx

class bucky(wx.Frame):    
    def __init__(self,parent,id):   
      wx.Frame.__init__(self,parent,id,'Frame aka window', size=(300,200))  
      panel = wx.Panel(self)   

      user = wx.TextEntryDialog(None, "Login", "Username", "")

      if user.ShowModal() == wx.ID_OK:   
        username = user.GetValue()   
        user.Destroy()   
        password = wx.TextEntryDialog(None, "Password", "Password", "")

if __name__ =='__main__':   
    app = wx.PySimpleApp()   
    frame = bucky(parent=None, id=-1)   
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:19:49.267

您需要`ShowModal`再次查看您的条目：

```
user = wx.TextEntryDialog(None, "Login", "Username", "")
if user.ShowModal() == wx.ID_OK:
    print 'here'   
    password = wx.TextEntryDialog(None, "Password", "Password", "")
    if password.ShowModal() == wx.ID_OK:   
        print 'there' 
```

请注意，您不需要`destroy`对话框

# jquery - jQuery 的大小是否有害？

> ID：11912785
> 
> 赞同：8
> 
> 时间：2012-08-11T07:12:52.193
> 
> 标签：jquery, performance, browser

在我开始学习如何使用[jQuery 库](http://jquery.com)之前，我想向自己保证一些与文件大小有关的事情......

我很清楚浏览器和服务器会缓存诸如 jQuery 之类的文件——理论上，这意味着该文件应该只下载一次，因此提高了后续使用的速度。

我的问题更多的是关于浏览器如何处理 javascript 文件，以及每次加载页面时浏览器处理 32k 代码文件是否会产生不利影响？这不仅是文件的大小，还包括文件的复杂性。

还是我的理解不正确，浏览器不仅缓存了javascript文件，而且还缓存了该文件的某种“编译”版本？（是的，我*知道*javascript 实际上并没有“编译”，但希望你知道我的意思。）

我想大多数浏览器都能够足够快地处理文件，以至于几乎没有什么区别，而使用 jQuery 来处理*更少的*代码所带来的速度优势弥补了这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T01:38:06.190

您对资产大小和 js 引擎性能的担忧有一些您需要考虑的重叠因素。最终，只有*您*能够确定什么适合您的项目/可以接受。

# 尺寸

可能说明显而易见，但我们将从这里开始。

您必须减少页面消耗的资产大小的任何机会都是一件好事。保持你的标记、样式和 js 精简。避免采用这样的心态，即您的用户群将始终拥有可供他们使用的高速连接。例如，考虑移动受众以及他们的连接速度将如何波动。快速加载的页面是获得出色用户体验的第一步。

修剪脂肪并确保您已验证将 jQuery 包含到您的项目中。

# 为什么选择 jQuery？

您的陈述*“在我开始学习如何使用 jQuery 库之前”*让我相信您可能是 Web 开发和 js 开发的新手。不是为了挖掘你或你的问题的有效性，但这个假设将推动我去这里的地方。

总体而言，将自己暴露于 jQuery 库将是一件好事，即使它不是您项目的正确选择。

多年来，jQuery 库已经成熟为非常出色的东西，并为每天的跨浏览器 js 问题提供了一些优雅的解决方案。浏览源代码并了解一些实现的概念只会对您有所帮助。

此外，jQuery 无处不在。无论您可能形成任何个人意见，jQuery 都是开发人员工具箱中最流行的库之一，而且似乎不会出现在任何地方。即使您从未在从头开始开发的项目中使用 jQuery，您也一定会在此过程中遇到某个地方。熟悉库只会使您的开发工作受益。

最终，您需要评估为什么要考虑将 jQuery 引入您的项目。它只是您最常使用的选择器引擎吗？如果您正在执行基本的 DOM 操作并且只需要一个好的选择器引擎，请考虑直接使用[Sizzle](http://sizzlejs.com/)，它只有 4KB（压缩和 gzip 压缩）。

也许 jQuery 是您想要包含的一个很酷的插件的依赖项。您可以自己重写它以将其精简吗？调整工作大小并检查努力是否值得节省可能的文件大小。如果您只节省几 KB，但需要 40 小时来完成工作，是否值得？

# 浏览器支持矩阵

创建浏览器支持矩阵。您支持的浏览器不仅会直接影响速度，还会直接影响资产的大小。

## 性能/速度

检查支持的 js 引擎的性能差异。这将允许您预测页面上 js 的速度，从那里您可以对您认为可以接受的内容做出任何让步。

请记住 js 的质量和完整性（包括你的和 jQuery 等库的）也会极大地影响性能。更快的 js 引擎（例如Chrome 的[V8](http://code.google.com/p/v8/)）可能会更宽容编写糟糕的 js，因为IE7 的[JScript](http://en.wikipedia.org/wiki/JScript)可能会暴露缺陷并大大降低性能。

jQuery 是一个库，它肯定会在为核心编写的 js 中考虑性能。您可能会发现大多数性能受到挑战的 jQuery 都来自可能无法进行广泛的跨浏览器基准测试的 3rd 方插件。

## 尺寸注意事项

如上所述，jQuery 打包了许多跨浏览器修复，以解决 DOM API 支持中的各种差距。这可能会为您节省大量精力或增加一些可能不需要的膨胀。检查您的支持矩阵倾向于哪种方式（旧浏览器与现代浏览器）并确定这可能如何影响您的项目。如果您发现自己只针对最新最好的浏览器，可以想象您可以编写自己的 jQuery 建模库，仅添加项目所需的功能。不要忘记调整工作的大小，看看它如何影响底线。

# 使用 jQuery

底线是，如果您的项目严重依赖 js 来辅助功能和用户体验，那么很难说使用 jQuery 将是一个糟糕的选择。当您考虑所需的工作量时，您可能没有可用的工时来编写更精简/更高效的代码。想想不仅要编写一个等效的库（即使删减了特性），还要考虑维护它所需的努力。您需要与一大群开发人员保持一致的编码能力才能跟上步伐。

不管你决定什么，祝你好运！

# python - ImportError：没有名为 flask.ext.security.datastore.SQLAlchemyUserDatastore 的模块

> ID：11912788
> 
> 赞同：3
> 
> 时间：2012-08-11T07:13:02.413
> 
> 标签：python, flask, flask-sqlalchemy

我在哪里可以找到这个模块？

```
ImportError: No module named flask.ext.security.datastore.SQLAlchemyUserDatastore 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T08:21:52.330

它在 Flask-Security 中。

```
pip install Flask-Security 
```

此外，您尝试运行的示例似乎是错误的，可能编码为旧版本 Flask-Security 的 API。

在 app.py 中找到该行：

```
from flask.ext.security.datastore import SQLAlchemyUserDatastore, \
    MongoEngineUserDatastore 
```

并将其更改为：

```
from flask.ext.security.datastore.sqlalchemy import SQLAlchemyUserDatastore
from flask.ext.security.datastore.mongoengine import MongoEngineUserDatastore 
```

我已经为此问题提交了[拉取请求。](https://github.com/mattupstate/flask-security/pull/31)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-08T07:49:24.587

我知道这是非常老的线程，但即使使用 1.7.4 版本（使用 pip 安装）我自己也遇到了这个错误

解决方法是改变这个

```
from flask.ext.security import Security, SQLAlchemyUserDatastore, \
    UserMixin, RoleMixin, login_required 
```

对此

```
from flask_security import Security, SQLAlchemyUserDatastore, \
    UserMixin, RoleMixin, login_required 
```

本质上 - 将“flask.ext.security”更改为“flask_security”

我去的时候发现了这个：http: [//simplectic.com/blog/2014/flask-todomvc-login/](http://simplectic.com/blog/2014/flask-todomvc-login/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-11T16:37:51.950

这真的很老，但我遇到了类似的问题，对我来说问题是没有正确安装包。我不得不改变`pip3 install -r requirements.txt`它`pip3 install -r requirements.txt --ignore-installed`，它开始为我工作。

# django - 几天前设置日期字段

> ID：11912789
> 
> 赞同：0
> 
> 时间：2012-08-11T07:13:08.880
> 
> 标签：django

在我的 models.py 中，我有两个日期字段，我想将一个日期设置为相对于用户从另一个表单中输入的内容。如何获取存储的值并将其设置为几天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:15:13.503

在该`save()`方法中，从其中一个中添加或减去a [`datetime.timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects)，并在保存之前插入另一个。

# ruby - 我如何使用 Devise 来保护 delay_job_web 界面？

> ID：11912794
> 
> 赞同：8
> 
> 时间：2012-08-11T07:13:33.923
> 
> 标签：ruby, ruby-on-rails-3, devise, delayed-job

我正在使用delayed_job_web gem 来监控延迟的工作。[https://github.com/ejschmitt/delayed_job_web](https://github.com/ejschmitt/delayed_job_web)

可以使用我的 routes.rb 中的这一行来访问它：

```
match "/delayed_job" => DelayedJobWeb, :anchor => false 
```

我网站的所有其他区域都需要使用 Devise gem 登录。我如何使这也需要登录？

在自述文件中，他们建议将以下内容添加到 config.rb：

```
if Rails.env.production?
  DelayedJobWeb.use Rack::Auth::Basic do |username, password|
    username == 'username'
    password == 'password'
  end
end 
```

但这只是使用纯文本浏览器身份验证。

更新：我在 resque 上尝试了类似于 railscast 的东西，我认为它即将开始工作，但现在给了我一个重定向循环：

```
 authenticate :admin do
    mount DelayedJobWeb, :at => "/delayed_job"
  end 
```

关于为什么会给出重定向循环的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:34:51.377

使用这里描述`authenticated`的代替：http: [//excid3.com/blog/rails-tip-5-authenticated-root-and-dashboard-routes-with-devise/](http://excid3.com/blog/rails-tip-5-authenticated-root-and-dashboard-routes-with-devise/)`authenticate`

为我工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:45:31.017

你可以做这样的事情来定义这个内部`config/routes.rb`文件

```
 authenticate_user = lambda do |request|   
     request.env['warden'].authenticate?
  end

  constraints authenticate_user do
    mount DelayedJobWeb, :at => "/delayed_job"
  end 
```

或者，如果您有任何其他角色管理库的 cancan，您可以这样[做](http://blog.arcath.net/2011/06/resque-cancan/)

我在我的应用程序中使用了这两种方法来控制对 resque-web 的访问，具体取决于应用程序的需要

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T17:00:21.650

现在是 2017 年，我尝试了其他解决方案，但它们没有用，但以下管理员检查确实有效：

```
authenticated :user, -> user { user.admin? }  do
  mount DelayedJobWeb, at: "/delayed_job"
end 
```

# wcf - WCF - 作为单个查询的实例化模式

> ID：11912796
> 
> 赞同：0
> 
> 时间：2012-08-11T07:13:43.387
> 
> 标签：wcf

当我们将 Instancing Mode 用作 Single 时，只有单个实例将服务于所有客户端。现在我们有一个由 1 个客户端使用的资源，而其他一些客户端也请求前一个客户端使用的相同资源...

如何在 WCF 中处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:34:01.990

简单的答案是不要使用 WCF 的单个实例，而是使用 PEr Session 或 Per Call 但是如果你想使用 Single 模式，那么使用线程概念来检查资源是否被其他客户端消耗，如果是，则等待线程完成，然后为等待的客户端使用资源。或者即使需要，您也可以使用标志来查看该资源是否被其他客户端消耗。

# tridion - 如何在 tridion 中启用通过 usercontrol 创建的按钮

> ID：11912798
> 
> 赞同：0
> 
> 时间：2012-08-11T07:14:02.797
> 
> 标签：tridion, tridion-2011

我用两个功能区项创建了用户控件，但它们出现在禁用模式下。

我试图通过在我的 js 文件中放置 isAvailable 和 isEnabled 函数的警报来检查。

```
Extensions.DynamicControls.prototype.isAvailable = 
            function DynamicControls$isAvailable(selection) 
{
  alert('Inside DynamicControls isAvailable');
  return true;
} 
```

在这种情况下，我在 isAvailable 函数中没有收到任何警报。

```
Extensions.DynamicControls.prototype.isEnabled = 
            function DynamicControls$isEnabled(selection) 
{
  alert('Inside DynamicControls isEnabled');
  return true;
} 
```

我能够在 isEnabled 函数中获得警报。

请让我知道我需要什么来启用它们。

除此之外，我还看到了使用 firebug 的页面源——在选择这两个创建的按钮用户控件按钮时，我发现为什么默认应用该类？如果我尝试删除它，则按钮已启用。

截至目前，这些仅作为功能区中的标签可见。是否还需要任何 css 才能使这些看起来像任何其他按钮？请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T10:18:47.450

正如我[对您上一个问题的回答中](https://stackoverflow.com/questions/11897324/how-to-enable-the-button-which-is-created-using-custom-control#answer-11898168)所指出的那样，这些方法应该被调用`_isAvailable`并且`_isEnabled`在它们前面带有下划线，这就是我对您的方法没有被解雇的原因的猜测。

因此，请尝试在您的 JavaScript 中使用以下代码：

```
Extensions.DynamicControls.prototype._isAvailable = 
                      function DynamicControls$_isAvailable(selection, pipeline) 
{
    alert('Inside DynamicControls isAvailable');
    if (pipeline) {
        pipeline.stop = false;
    }
    return true;
}   
Extensions.DynamicControls.prototype._isEnabled = 
                      function DynamicControls$_isEnabled(selection, pipeline) 
{
    alert('Inside DynamicControls isEnabled');
    if (pipeline) {
        pipeline.stop = false;
    }
    return true;
} 
```

顺便说一下，看看你的命名空间，`Extensions.DynamicControls`我想知道你是否做出了正确的引用，Javascript 不适合你的 ItemsGroup，它应该用于特定的按钮，每个命令（或按钮，如果你愿意的话）都有自己的位JavaScript 启用它并有一个`_execute`方法。有关更多详细信息，请参阅我[对您其他问题的回答](https://stackoverflow.com/questions/11911933/creating-buttons-using-usercontrol-in-tridion-ribbon#answer-11921558)。

CSS 仅用于按钮的布局，这实际上不会启用或禁用它们。尽管如果您将禁用图像分配给启用状态，那么外观可能具有欺骗性。

按钮的 CSS 看起来像：

```
/* large ribbon button image */
.tridion .ribbontoolbar .button.MyBtn .image, 
.tridion .ribbontoolbar .button.MyBtn.ribbonitem .image
{
    background-image: url({ThemePath}Images/my-btn-img.32x32.png);
}
.tridion .ribbontoolbar .button.MyBtn.ribbonitem.disabled .image
{
    background-image: url({ThemePath}Images/my-btn-img.32x32.gray.png);
}
/* small ribbon button image */
.tridion .contextmenu .item.MyBtn .image, 
.tridion .ribbontoolbar.minimized .button.MyBtn .image, 
.tridion .ribbontoolbar.minimized .button.MyBtn.ribbonitem .image
{
    background-image: url({ThemePath}Images/my-btn-img.16x16.png);
}
.tridion .ribbontoolbar.minimized .button.MyBtn.ribbonitem.disabled .image
{
    background-image: url({ThemePath}Images/my-btn-img.16x16.gray.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:28:00.223

您只需要返回 true，您已经在执行此操作。当然，您的命令需要通过配置与按钮相关联。

isAvailable 函数仅对某些选项卡上的工具栏按钮调用，例如创建。他们中的大多数人假设您的按钮应该始终可用，但可以禁用（因此他们只调用 isEnabled）。

但是，对于上下文菜单选项，每次右键单击时都会调用 isAvailable。理想情况下，您会为上下文菜单选项使用与工具栏相同的命令。

# file-io - 是否应该将“file://~”路由到“file://Users/userName”

> ID：11912801
> 
> 赞同：0
> 
> 时间：2012-08-11T07:14:31.257
> 
> 标签：file-io, url-routing

我编写了一个统一资源定位器 (URL) 类，它还能够检索 url 的内容。我的问题是它应该如何处理`~`文件 url 中的波浪号字符。简而言之：我必须`file://~`指出`file:///Users/userName`还是仅与系统的常规路径有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:21:57.057

如果我这样做：`Start > Run > "file://~" (without quotes) > [OK]`

我收到以下错误消息：

> [窗口标题] file://~
> 
> [内容] Windows 找不到 'file://~'。请确保您输入了正确的名称，然后重试。
> 
> [好的]

也就是说：波浪号`~`是 Windows 下文件名的有效字符。我不明白为什么它应该得到任何特殊待遇。

# java - Android中的保留字列表

> ID：11912802
> 
> 赞同：9
> 
> 时间：2012-08-11T07:14:32.597
> 
> 标签：java, android, resources, reserved-words

我目前正在开发另一个 Android 应用程序的界面设计过程，我似乎再次尝试使用保留字来表示资源（无论是可绘制对象和布局）。据我所知，您需要了解一组规则：

*   不允许大写。
*   除下划线外无符号。
*   ~~没有数字~~

Appart from those（如果我错了，请纠正我）我*认为*你不能使用任何来自 JAVA 的保留词，经过一番谷歌搜索后，它似乎如下：

![在此处输入图像描述](../Images/ecfb777c92b0a829322ff14d75ad8b2c.png)

所以我的问题是，如果文档中有我未能找到的地方，它详细解释了我们可以和**不能**用于资源名称的内容。这是在阅读有关资源的页面之后，所以我可能根本没有阅读价值。

[保留字的来源](http://java.about.com/od/javasyntax/a/reservedwords.htm)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T00:10:21.440

> 据我所知，您需要了解一组规则：
> 
> 不允许大写。

AFAIK，这不是规则。约定是全部使用小写，但混合大小写有效。

**注意：**在布局中，您只能使用小写字母 (az)、数字 (0-9) 和下划线 (_)。

> 除下划线外无符号

正确的。更准确地说，名称必须是有效的 Java 数据成员名称，这将限制您使用字母、数字和下划线，并且不能以数字开头。

> 没有数字

这不是一个规则，尽管您的名字不能以数字开头，如上所述。

> Appart from those（如果我错了，请纠正我）我认为你不能使用任何来自 JAVA 的保留词，经过一番谷歌搜索后似乎如下：

这是因为保留字不是有效的 Java 数据成员名称。

> 所以我的问题是，如果文档中有我找不到的地方，它详细解释了我们可以和不能用于资源名称的内容

显然不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:18:58.260

好吧，我的答案将是一些页面的混合，您可以在其中找到所需的内容。

1.- 首先，我建议您阅读[Oracle 为 java 推荐的约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

**注意：**尤其是“[命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)”部分（这是大多数其他答案都有的），之后我建议您阅读“ [Java 语言关键字](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)”，因为您不能使用这些词中的任何一个，但请记住JAVA 是**区分大小写的**，所以如果你写“Abstract”而不是“abstract”那么没关系，但当然这可能会让后来的人（也许是你自己）感到困惑。

2.- 最后但同样重要的是，您可以阅读“[代码样式指南](http://source.android.com/source/code-style.html#follow-field-naming-conventions)”，这是 android 源代码的贡献者需要应用到他们的代码才能被接受的约定。

如果您遵循此规则，您的代码不仅有效（当然这很重要），而且对您和其他人来说更具可读性，并且如果其他人稍后需要进行一些修改，那将是一项更容易的任务如果您只是开始输入随机名称，例如“x1、x2、X1、_x1 等……”

**其他有用的文章**：

如果您正在启动您的应用程序，那么[本文](http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html?page=1)将对您非常有用，它解释了为什么以夸张的方式使用 setter 和 getter 是一种非常糟糕的做法，它们仅在需要时才需要，而不仅仅是设置并获取对象中的每个变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T13:42:39.177

如果您使用的标识符是有效的 Java 变量名（这意味着仅由 az、AZ、0-9 和下划线字符组成），则不会有任何问题。实际的命名空间可能更大，但这对我有用。

[文件](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#34851)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T11:17:41.913

我会插话说：

你不能使用关键字，但管理android资源也不是很容易......例如，你不能有不同的drawable文件夹，他们需要去drawable-xxxx文件夹......

因此，请尝试为您的可绘制对象和选择器提供合理的前缀。

Android 接受所有有效的 Java 变量名，所以我真的不明白这个问题来自哪里。

# java - 从 JSP 页面定向到 servlet 并返回到 JSP 会导致不同的 JSP 页面

> ID：11912804
> 
> 赞同：1
> 
> 时间：2012-08-11T07:14:51.337
> 
> 标签：java, html, jsp, web-applications, servlets

在我的银行里，我既有经理也有员工。

经理是雇员，因此他（或她）拥有与雇员相同的权限。

我从这里开始： ![在此处输入图像描述](../Images/7eeef8903a455e4cf575f2cba2d380c7.png)

Jacky 选择了这一点——员工行动：

![在此处输入图像描述](../Images/81b42f5e18c29ae6044fd36b2494d035.png)

然后我执行任何员工都会做的常规注册 - 作为经理：

![在此处输入图像描述](../Images/5a78d5c64603c289df818407d2106131.png)

然后我到达这里：

![在此处输入图像描述](../Images/d30cb6f906c3eba2c186bd6ebfe3825d.png) ![在此处输入图像描述](../Images/df20e8916356dcedc623b2ad4c5c84bf.png)

意思是，这次我作为经理返回到**员工页面（！）**而不是我自己的页面 - 经理页面。

那么，问题是，我如何才能记住或知道谁点击了“开设新账户”按钮，是经理还是员工？

请注意，这里的问题不是“正常”重定向，我可以处理：问题是我不知道谁点击了“打开新帐户”按钮，因为`2`人们拥有该权限 - 经理**和**员工。

我可以附上所有的代码，如果需要请说出来。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:39:41.403

您可以在 html 代码中包含隐藏标签。在各自页面中为员工或经理设置 itz 值。然后在 servlet 中，您可以将隐藏字段的值保存在会话变量中。这就是你如何记住谁点击了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:29:44.457

如果没有什么可以区分经理用户和员工用户，那么您可以在交易页面上单击“按此处继续”在会话中保存一个值（例如，经理的“经理”和“员工”雇员）。并使用该信息在 Congratulations 页面上呈现链接。

# java - 如何将字符串值存储到数组字符串并可以在另一个类中调用该数组以在单行中打印为字符串

> ID：11912805
> 
> 赞同：0
> 
> 时间：2012-08-11T07:15:06.853
> 
> 标签：java, android

我正在尝试在移动应用程序上做一些工作。我有解析器`class: A`

```
for (int i = 0; i < jArray3.length(); i++) {
    news_id = Integer.parseInt((json_data.getString("news_id")));
    news_title = json_data.getString("news_title");
} 
```

我必须解析并获取 id 和 title 的值。现在我想将此标题存储在数组中并调用另一个类。在那个类中，我们必须将该数组转换为`String`，以便我可以在单行中打印该标题值。

我该如何实现这个你可以为我发布一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:13:45.313

```
 news_title = json_data.getString("news_title");

 Add line after the above line to add parse value  int0 string array 
```

String[] newRow = new String[] {news_id ,news_title};

**//Convert array to String**

```
 String asString = Arrays.toString(newRow ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:05:46.887

**1.**我假设您**要存储多个标题。**

我正在**使用**`ArrayList<String>`比. **`Array`**

 **创建一个 ArrayList 并存储所有标题值：

```
ArrayList<String> titleArr = new ArrayList<String>();

for (int i = 0; i < jArray3.length(); i++) {
    news_id = Integer.parseInt((json_data.getString("news_id")));
    news_title = json_data.getString("news_title");

    titleArr.add(news_title);
} 
```

**2.**现在**将其发送到** `another class`，您需要在单行中显示所有标题。

```
new AnotherClass().alistToString(titleArr);  

// This line should be after the for-loop
// alistToString() is a method in another class 
```

**3.**另一种类结构。

```
 public class AnotherClass{

      //.................. Your code...........

       StringBuilder sb = new StringBuilder();
       String titleStr = new String();

    public void alistToString(ArrayList<String> arr){

    for (String s : arr){

     sb.append(s+"\n");   // Appending each value to StrinBuilder with a space.

          }

    titleStr = sb.toString();  // Now here you have the TITLE STRING....ENJOY !!

      }

    //.................. Your code.............

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:25:39.717

根据我对您的问题的理解，我假设以下代码段只有您正在寻找。

```
String[] parsedData = new String[2];
for (int i = 0; i < jArray3.length(); i++) {
    news_id = Integer.parseInt((json_data.getString("news_id")));
news_title = json_data.getString("news_title");
}

parsedData[0] = news_id;
parsedData[1] = news_title;

DifferentCls diffCls = new DifferentCls(data);
System.out.println(diffCls.toString()); 
```

不同的Cls.java

```
private String[] data = null;

public DifferentCls(String[] data) {
 this.data = data;
}

public String toString() {
 return data[1];
} 
```**

# macos - 使用 CoreServices.h 在 Mac OS X 上编译 pulseaudio

> ID：11912815
> 
> 赞同：2
> 
> 时间：2012-08-11T07:16:34.700
> 
> 标签：macos, llvm, clang, pulseaudio

我正在尝试在 Mac OS X 上编译 pulseaudio，但是默认情况下，我会收到很多关于找不到标准文件的错误，例如`inttypes.h`,`errno.h`或`stdio.h`. 修复这些错误`-isystem/usr/include`，`CPPFLAGS`但后来我得到`fatal error: 'CoreServices/CoreServices.h' file not found`.

我也尝试过添加`-framework CoreServices`和/或 `-I/System/Library/Frameworks/CoreServices.framework/Headers`但都不起作用。

让编译器找到它的正确方法是什么？我想我正在使用 clang，gcc 会产生更多错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:56:49.990

您走在正确的轨道上，这些是框架和包含标志，但是如果您使用正确的配置选项，您会发现甚至系统包含也被正确拾取。

Makefile 将尝试根据`--with-mac-sysroot`和`--with-mac-version-min`属性适当地设置框架。

用于指定 SDK 位置的示例配置选项：

```
--with-mac-sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/ 
--with-mac-version-min=10.7 
```

如果您在 Mountain lion (10.8) 上构建，您仍然需要使用 10.7 最低兼容性，因为 PulseAudio 引用的 10.8 SDK 中缺少标头。

您可以将配置选项传递给`autogen.sh`将在`configure`autoconf 完成后运行的选项。您可以尝试以下已在 master 分支上测试过的命令：

```
./autogen.sh --prefix=/usr/local --disable-jack --disable-hal --disable-bluez --disable-avahi --with-mac-sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/ --with-mac-version-min=10.7 --disable-dbus 
```

如果遇到 m4 宏错误，请将 m4 宏从 aclocal 复制到 m4 子目录中，然后重试。

还有一些其他问题，但这些问题必将得到解决，可能很快就会过时。在此处添加它，因为它可能会帮助尝试构建它的人。

**错误：找不到 Multiprocessing.h：** 这已在 10.7 中被弃用，但标头仍包含在 CoreServices 中，并且将构建只需更改文件中的包含指令`src/pulsecore/semaphore-osx.c`。

```
-#include <Multiprocessing.h>
+#include <CoreServices/CoreServices.h> 
```

**错误：'lt_ *PROGRAM* _LTX_preloaded_symbols' 未声明。** 这可能是编译的问题`src/daemon/dumpmodules.c`，可以通过声明外部宏来解决。

```
extern const lt_dlsymlist lt_preloaded_symbols[]; 
```

**错误：gdbm.h：没有这样的文件或目录** 由于某种原因，编译器不考虑默认包含目录，您可以将路径添加到`src/Makefile`查找并设置变量`GDBM_CFLAGS`。

```
GDBM_CFLAGS=-I/usr/local/include 
```

开心！

# c# - 如何排序一个 c# 中的类？

> ID：11912822
> 
> 赞同：2
> 
> 时间：2012-08-11T07:18:10.813
> 
> 标签：c#, asp.net, list

我有一个这样的类的列表：

```
 public class CityCodeInfo
 {
    public string CityName;
    public string Province;
    public string Code; 
  }

  List<CityCodeInfo> lstCityt = new List<CityCodeInfo>(); 
```

我如何按任何变量（城市名、省和代码）对该列表进行排序

我试过这段代码：

```
 lstCityt.Sort((x, y) => string.Compare(x.CityName, y.CityName)); 
```

但它不起作用......

任何的想法？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T07:25:01.327

您可以为此使用 LINQ。

**升序**

```
var result = lstCityt.OrderBy(C=> C.CityName).ThenBy(C=> C.Province).ThenBy(C=> C.Code); 
```

**降序**

```
var result = lstCityt.OrderByDescending(C=> C.CityName).ThenByDescending(C=> C.Province).ThenByDescending(C=> C.Code); 
```

**两个都**

```
var result = lstCityt.OrderBy(C=> C.CityName).ThenByDescending(C=> C.Province).ThenByDescending(C=> C.Code); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T08:00:17.803

您已经拥有的内容已经完整且正确：

```
lstCityt.Sort((x, y) => string.Compare(x.CityName, y.CityName)); 
```

这确实对一个类的列表进行了排序。听起来您看到了与中继器有关的一些*次要*问题，但您没有为此提供上下文。我要看的主要是时间安排，即您是在排序列表*之前*还是*之后绑定。*

# c# - C# - 关于变量名重复的 If 语句查询

> ID：11912828
> 
> 赞同：1
> 
> 时间：2012-08-11T07:19:06.247
> 
> 标签：c#, variables, if-statement, repeat

有没有更简洁的方法来检查 x 是“a”、“b”、“c”、“d”还是“e”？

```
if (x == "a" | x == "b" | x == "c" | x == "d" | x == "e"){//do something} 
```

基本上我想知道是否可以在不重复变量名 x 的情况下表达相同的 if 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T07:21:34.307

怎么样：

```
string[] whiteList = { "a", "b", "c", "d", "e" };

if(whiteList.Contains(x))
{
    ...
} 
```

您可以考虑使用`HashSet<string>`或类似的并在字段中缓存对它的引用以提高性能（为您提供`O(1)`Contains 操作并避免分配、填充集合）。

```
//Field
HashSet<string> _whiteList = new HashSet<string> { "a", "b", "c", "d", "e" };

....

// In a method:
if(_whiteList.Contains(x))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:23:36.647

您可以在“广告”数组上使用[Exists 。](http://msdn.microsoft.com/en-us/library/yw84x8be.aspx)

`new string[]{"a","b",...}.Exists(x)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:21:37.283

假设您只需要检查字符，比较字符的 ascii 代码可以如下所示。

```
if(x >= 'a' && x <= 'e')
{

} 
```

# mysql - ON 子句中的另一个未知列名错误

> ID：11912840
> 
> 赞同：0
> 
> 时间：2012-08-11T07:20:41.767
> 
> 标签：mysql, join

询问：

```
SELECT  c.title AS title
            , c.introtext AS body
            , c.state AS state
            , c.created AS created
            , c.created_by AS uid
            , c.modified AS modified
            , c.modified_by AS modified_uid
            , c.published AS published
            , c.published_by AS published_uid
            , jos_categories.title AS category
FROM
          jos_content AS c, jos_categories
INNER JOIN jos_categories AS jc
ON c.sectionid = jc.section
WHERE c.sectionid = 7 
```

我确定 sectionid 列存在，但出现错误：

> 错误代码：1054。“on 子句”中的未知列“c.sectionid”0.000 秒

我看到了这个主题：[ON 子句中的 MySQL 未知列，](https://stackoverflow.com/questions/4065985/mysql-unknown-column-in-on-clause)但我也无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:32:05.897

将您的 FROM 子句更改为：

```
FROM   jos_content AS c
INNER JOIN jos_categories AS jc 
ON c.sectionid = jc.section 
WHERE c.sectionid = 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:23:20.327

您执行和之间的`jos_categories`连接`jos_categories AS jc`：

```
jos_content AS c, jos_categories
INNER JOIN jos_categories AS jc
ON c.sectionid = jc.section 
```

但是`c`是`jos_content`...

# unit-testing - MIME 解析器测试数据

> ID：11912842
> 
> 赞同：4
> 
> 时间：2012-08-11T07:20:42.547
> 
> 标签：unit-testing, mime, mime-message

我刚刚编写了 MIME 解析器并在收件箱中的 1000 多条消息上对其进行了测试，所以看起来它运行良好。但是，这些消息中的大多数都是私有的，我不能在公共单元测试中使用它们或将它们添加到 VCS。

是否有任何已知/公共的邮件消息集可用于 MIME 解析器单元测试？

我曾考虑通过 HTTP 从公共邮件列表中提取原始 MIME 消息，但这会使测试变得非常缓慢且不可重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:03:47.667

[http://www.imc.org/mimetest/](http://www.imc.org/mimetest/)是一组这样的测试消息的存储库。与页面详细信息一样，此类集合过去一直是垃圾邮件发送者的目标，因此这可能是它们难以找到的原因之一。

# python - python：如何将查询字符串转换为 json 字符串？

> ID：11912843
> 
> 赞同：16
> 
> 时间：2012-08-11T07:21:06.543
> 
> 标签：python, json

我想转换这样的查询字符串：

```
a=1&b=2 
```

到 json 字符串

```
{"a":1, "b":2} 
```

任何现有的解决方案？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-11T07:31:40.727

```
import json
import urlparse

json.dumps(urlparse.parse_qs("a=1&b=2")) 
```

产量

```
'{"a": ["1"], "b": ["2"]}' 
```

这实际上比你的更好`{"a":1, "b":2}`，因为 URL 查询字符串可以合法地多次包含相同的键，即每个键有多个值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-30T20:36:36.087

### Python 3.x

```
from json import dumps
from urllib.parse import parse_qs

dumps(parse_qs("a=1&b=2")) 
```

产量

```
{"b": ["2"], "a": ["1"]} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-11T07:26:15.523

```
>>> strs="a=1&b=2"

>>> {x.split('=')[0]:int(x.split('=')[1]) for x in strs.split("&")}
{'a': 1, 'b': 2} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-14T11:56:46.377

```
dict((itm.split('=')[0],itm.split('=')[1]) for itm in qstring.split('&')) 
```

# solr - 如何在 solr 中搜索 html 标签？

> ID：11912846
> 
> 赞同：1
> 
> 时间：2012-08-11T07:21:40.490
> 
> 标签：solr, lucene

我用 apache nutch 抓取网站并将其索引到 Apache Solr。我不知道如何在 solr 的网站中搜索字符串和 html 标签？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:16:45.530

最简单的方法是从 HTML 中提取数据并索引提取的数据。您可以使用[HTMLStripCharFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.HTMLStripCharFilterFactory)从输入流中去除 HTML。

```
<analyzer>
  <charFilter class="solr.HTMLStripCharFilterFactory"/>
  <tokenizer class="solr.StandardTokenizerFactory"/>
</analyzer> 
```

# php - symfony2 形式和多对多关系

> ID：11912850
> 
> 赞同：0
> 
> 时间：2012-08-11T07:22:49.927
> 
> 标签：php, forms, symfony, doctrine

我想我会看看是否有人可以在这里为我指明正确的方向 - 我有一个用户表和一个内容表，我想跟踪哪些用户有权编辑哪些内容。以关系数据库的方式思考，多对多关系表是解决方案，为每个授权添加行 user_id 和 content_id。

许多用户可以被授权编辑一个内容片段，并且一个用户当然也能够访问多个内容片段。

现在，我看到的最大问题（作为 Symfony2 新手）是管理员表单，管理员必须能够设置这些权限，最好在它们旁边有一个内容列表和复选框，并让表单处理器负责添加/删除该关系表的行。

收集表单字段是否正确？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:09:17.277

我认为关于*多对多关系的*[Doctrine2 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)已经为您提供了有关如何映射数据的问题的答案。

 *表单问题已在[另一个 SO question](https://stackoverflow.com/questions/10581177/symfony2-form-widgets-for-many-to-many-relations)中进行了解释。*

# xcode - UIButton 事件没有触发，即使我通过 xib 连接它

> ID：11912854
> 
> 赞同：0
> 
> 时间：2012-08-11T07:23:18.037
> 
> 标签：xcode, uikit

我正在创建一个计算器游戏，我必须在其中弹出一个`UIAlertView`，我自定义`UIAlertView`并以`UITableView`编程方式将一个放入其中，当用户点击它的任何单元格时，我`UIView`在顶部显示一个`UITableView`，这个视图有一个按钮，当我点击那个按钮事件没有触发，我也手动安装了它，但是它不起作用，以前带有按钮的事件附件会产生错误，因为我在 dealloc 中卸载了事件，并修复了问题，但是之后它仍然没有触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:42:33.967

我有这样的情况，我必须在.h声明中务实地添加它

```
UIButton *btn; 
```

在 .m 中将其添加到 UIView

```
 UIView *TempView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
    if (btn) {
        [btn removeFromSuperview];
//        [btn release]; // for not using arc
    }
    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10, 10, 25, 25)];
    [btn addTarget:self action:@selector(ClickMe:) forControlEvents:UIControlEventTouchUpInside];
    [TempView addSubview:btn];

    [self.view addSubview:TempView]; 
```

并且动作是

```
-(void)ClickMe:(id)sender{
        //here is an action
} 
```

它对我有用

# iphone - 如何在 ios 中将 sendSynchronousRequest 更改为 sendASynchronousRequest？

> ID：11912860
> 
> 赞同：0
> 
> 时间：2012-08-11T07:23:58.503
> 
> 标签：iphone, objective-c, ios, web-services, ios5

我在服务器上上传图像。如何将同步请求更改为 A同步请求。因为我想在上传图片时使用进度条..

我的代码是。

```
+(NSDictionary *)UploadPhoto :(UIImage *)image{

    NSString *DeviceId;
    NSString *TokenValue=tokenTemp;

    DeviceId = DevID;

    NSString *Nonce=[self generateRandomString];
    NSString *currentTimeStamp = [self GetTimeStamp];

    NSString *Cipher=[NSString stringWithFormat:@"%@%@%@%@%@",mySecret,DeviceId,Nonce,currentTimeStamp,TokenValue];
    Cipher=[Cipher URLDecodedString];
    Cipher=[self GetCipher:Cipher];
    UIImage *TempPicture=image;//[UIImage imageNamed:imageName];

    NSData *PictureData=UIImageJPEGRepresentation(TempPicture, 1.0);
    NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"%@Messages.php",WebServiceUrl]];
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setTimeoutInterval:20.0f];
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"multipart/form-data; boundary=*****" forHTTPHeaderField:@"Content-Type"];

    NSMutableData *postBody = [NSMutableData data];
    NSString *stringBoundary = [NSString stringWithString:@"*****"];

    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"method\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",@"Upload"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"Type\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",@"0"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"Name\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",@"XYZ ****************"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"MessageImage\"; filename=\"c.png\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
    [postBody appendData:[NSData dataWithData:PictureData]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSASCIIStringEncoding]];
    [request setHTTPBody: postBody];

    [request setValue:Cipher forHTTPHeaderField:@"Cipher"];
    [request setValue:DeviceId forHTTPHeaderField:@"Deviceid"];
    [request setValue:Nonce forHTTPHeaderField:@"Nonce"];
    [request setValue:currentTimeStamp forHTTPHeaderField:@"Timestamp"];
    [request setValue:TokenValue forHTTPHeaderField:@"Token"];

    [request setHTTPBody:postBody];
    NSError *error;
    NSHTTPURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

    if (!data) {
          NSLog(@"nil");
    }
    NSDictionary *temp= [response allHeaderFields];

    NSString *temp2= [temp objectForKey:@"Responsecode"];
    if(temp2!=nil && [temp2 length]>0)
    {

    }
    else
    {

    }
    return temp;
} 
```

谢谢。。请帮忙。。

如何调用 `- (void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite` 此代码..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:50:58.527

如果要跟踪上传进度，则必须使用

```
NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self] 
```

并实现所有`NSURLConnectionDelegate`方法。[这在此 Apple 文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)有所描述。

特别是`connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:`委托方法会通知您上传进度。

此方法的另一个优点是您可以*取消*`sendSynchronousRequest`请求，而使用or则无法做到这一点`sendASynchronousRequest`。

# c++ - Boost 是否使用合法的 C++ 预处理指令语法？

> ID：11912861
> 
> 赞同：13
> 
> 时间：2012-08-11T07:24:24.470
> 
> 标签：c++, boost, syntax, c-preprocessor, boost-preprocessor

我的（相对较旧的）C++ 编译器在 Boost 中被[这个文件阻塞，它的开头是：](http://www.boost.org/doc/libs/1_50_0/boost/preprocessor/tuple/eat.hpp)

```
# /* Copyright (C) 2001
#  * Housemarque Oy
#  * http://www.housemarque.com
#  *
#  * Distributed under the Boost Software License, Version 1.0\. (See
#  * accompanying file LICENSE_1_0.txt or copy at
#  * http://www.boost.org/LICENSE_1_0.txt)
#  */
# 
```

这真的是合法的 C++ 吗？预处理器标记的语法规则是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-11T07:28:42.730

是`#`的，标准 §16 [cpp] 明确允许仅包含空格的行：

> control-line:
>    `# include`pp-tokens 换行
>    `# define`标识符替换列表换行
>    `# define`标识符 lparen 标识符列表[opt]`)`替换列表换行
>    `# define`标识符 lparen`... )`替换列表换行
>    `# define`标识符 lparen 标识符列表`, ... )`替换列表换行
>    `# undef`标识符 new -line
>    `# line`pp-tokens new-line
>    `# error`pp-tokens [opt] new-line
>    `# pragma`pp-tokens [opt] new-line
>    **`#`new-line**

请注意，在翻译阶段 3，即在预处理器之前，注释被空格替换。

# javascript - 将函数指针传递给 JavaScript 中的事件

> ID：11912863
> 
> 赞同：0
> 
> 时间：2012-08-11T07:24:57.193
> 
> 标签：javascript, events, javascript-events, event-handling

我了解将函数指针传递给事件处理程序时，您不能使用括号调用功能块，否则该函数的返回值将分配给事件处理程序。我试过这个，我对它是如何工作的感到困惑？

```
window.onload = alert("Hello, World."); 
```

我可以看到这是如何工作的......

```
window.onload = function () { alert("Hello, World!"); }; 
```

文字函数不会自调用导致没有返回值，并且仅在调用 onclick 事件后才调用。

**编辑1：**我不想用这个实现任何目标。我只是想了解 window.onload = alert("Hello, World."); 完美运行以及如何 window.onload = show_message("Hello, World."); 不起作用？...考虑到 show_message 实际上是一个函数。

**编辑 2：**一些用户声称 onload 事件处理程序可以在任何函数上使用括号。我认为这不会像它应该的那样工作，因为调用该函数时忽略了事件处理程序，并且该函数的返回值被分配给了事件处理程序。大多数函数不返回任何内容，因此（未定义或 null）将分配给事件处理程序。

看看下面的代码。

```
var button = document.getElementById("button");

function test() {
    str = "works";
    console.log(str);
}

button.onclick = test;​ 
```

假设有一个按钮元素，其按钮的 id 分配给它。这仅在未使用括号调用测试 (button.onclick = test();) 时才有效。测试只会运行一次，undefined 将被分配给 onclick。

**编辑 3：**如果调用函数，看起来返回值没有分配给事件处理程序。当我使用 console.log 时，它总是将 null 写入控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:47:49.220

好问题。实际上它并没有像你期望的那样工作。它只是以这种方式工作的错觉。当你运行时：

```
window.onload = alert("Hello, World."); 
```

语句的右侧部分被执行并显示警报，但加载处理程序的窗口未设置为某些功能，`null`将分配给它，因为这是警报返回的内容。

顺便说一句，即使您使用括号调用该方法，您也可以从中返回函数以分配给事件处理程序：

```
var button = document.getElementById("button");

function test() {
    str = "works";
    console.log(str);
    return function(){console.log('button clicked');}
}

button.onclick = test(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T07:48:06.343

`window.onload = alert("Hello, World.");`，您看到警报有效，只是因为它在执行时发出警报，并将结果（未定义）分配给`window.onload`.

# javascript - 在 rails 3 中为 button_to 提供图像

> ID：11912866
> 
> 赞同：0
> 
> 时间：2012-08-11T07:25:25.407
> 
> 标签：javascript, ruby-on-rails-3.1

有什么方法可以更改以下代码中按钮的提供图像

```
<%= button_to 'Edit treatment', edit_treatment_path(@treatment), :type => "submit", :class => "style3", :method => "get" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:15:48.797

如果您尝试通过单击图像提交表单（假设您的类型是“提交”），您可以使用

```
image_submit_tag("your_image.png", :class => "style3") 
```

如果您的意思是标准按钮，您可以使用

```
link_to image_tag("your_image.png"), edit_treatment_path(@treatment), :class => "style3" 
```

# c# - 如何在Windows应用程序中使用c#在for循环中插入命令或更新命令时提交和回滚

> ID：11912870
> 
> 赞同：1
> 
> 时间：2012-08-11T07:25:46.970
> 
> 标签：c#, winforms, sql-server-2008

任何人都可以解释这种情况..

我知道使用一个插入或更新或任何没有 for 循环的命令，如果数据中有任何错误，我们可以进行提交和回滚。

但我怀疑我是否在 for 循环中有插入命令或更新命令，那么何时提交或回滚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:35:30.620

你可以写这样的东西

```
//Start transaction here
bool isSuccess = true;
for (int i = 0; i < 100; i++)
{
    try
    {
        //your Insert/update Query
    }
    catch (Exception ex)
    {
        isSuccess = false;
        break;
    }
}

if (isSuccess)
{
    //Commit transaction 
}
else
{
   //Roll back transaction
} 
```

但我的建议是使用不同的方法

```
for (int i = 0; i < 100; i++)
{
    //Build your Insert/Update query here
    //Note : do not execute it yet
}

//Start transaction
try
{
    //Execute the query here
    //Commit transaction 
}
catch(Exception ex)
{
   //Roll back transaction
} 
```

在第一种情况下，您将锁定表，直到您的整个 for 循环完成，这也可能包含业务逻辑，但在第二种情况下，您将在事务中仅针对所需的部分（插入/更新部分）

# html - Firefox 在透视元素内呈现错误

> ID：11912871
> 
> 赞同：0
> 
> 时间：2012-08-11T07:26:00.140
> 
> 标签：html, css

我在 Firefox 中遇到错误，元素在悬停时翻转。（错误可以在随附的屏幕截图中看到）。

元素只有 css，使用盒子阴影、边框半径和类似的东西

```
(*-)transform-style: preserve-3d;                   
(*-)transition: all .5s cubic-bezier(.8,.1,.3,.9);
(*-)perspective: 600px;
(*-)transform: rotateY( 0deg ); 
```

我不知道为什么会发生这个错误，有什么想法吗？

![错误，可翻转卡片](../Images/027caeff8d6a561b422ae33c2d82f1b7.png)

此外，有时阴影会出现错误。

![在此处输入图像描述](../Images/a2b646ab3e34595f09addeadbe528339.png)

干杯，卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:06:54.140

它似乎已在新的 Firefox 版本中得到修复。

# php - 如何在 URL 中使用 UTF-8 字符

> ID：11912872
> 
> 赞同：1
> 
> 时间：2012-08-11T07:26:03.680
> 
> 标签：php, url, encoding

我阅读了一些关于此的问题，他们使用`rawurlencode`or`percent encoding`对 utf-8 字符进行编码，但我发现了一些不同的示例，例如：`xn--pbt1by64f.lofter.com`并且`http://xn--wgv71a.com/`，这也将在浏览器地址栏中转换为 utf-8 字符串（例如`温家宝.lofter.com`，`日本.com`）。这显然不是百分比编码或简单`urlencode`的结果，这种编码方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:34:37.767

它被称为“Punycode”：

> 在计算中，Punycode 是通用编码语法 (Bootstring) 的一个实例，通过它可以将一串 Unicode 字符唯一且可逆地转换为较小的受限字符集。
> 
> Punycode 旨在对应用程序中的国际化域名 (IDNA) 框架中的标签进行编码，以便这些域名可以用 Internet 域名系统中允许的 ASCII 字符集表示。编码语法在 IETF 文档 RFC 3492 中定义。 [1]

来自[http://en.wikipedia.org/wiki/Punycode](http://en.wikipedia.org/wiki/Punycode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:35:50.177

这称为[国际化域名](http://en.wikipedia.org/wiki/Internationalized_domain_name)。

并检查 php 的[IDN Functions](http://www.php.net/manual/en/ref.intl.idn.php)

# linux - 基于 32 位 linux 的 eclipse 在 Fedora 12 中启动时出错

> ID：11912876
> 
> 赞同：1
> 
> 时间：2012-08-11T07:26:25.037
> 
> 标签：linux, eclipse, fedora

我为我的 32 位 Fedora 12 下载了 32 位 eclipse。我解压缩了 tar.gz，没有任何错误。但是当我点击 eclipse 可执行文件时，我得到了错误：

"无法加载 JNI 共享库 "/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/bin/../lib/i386/client/libjvm.so" "

我无法解决此错误。请告知如何进行。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:34:56.963

转到您的eclipse文件夹
打开`eclipse.ini`文件并检查是否有`-vm`正确设置选项
Else设置`-vm`在一行中，然后是您`jdk`安装的`bin`文件夹。
希望这可以帮助您解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:47:16.873

我建议避免使用 OpenJDK，因为 Eclipse 会一直抱怨它。因此，导航到[http://java.com/en/download/manual.jsp](http://java.com/en/download/manual.jsp)并下载适当的 Sun 的 Java 包（32 位或 64 位，取决于您当前的安装）。由于 Fedora 使用 RPM 进行包管理，我建议使用该方法。

然后，安装后，在终端中运行 java -version ，你应该会得到类似的东西：

```
$ java -version
java version "1.6.0_22"
Java(TM) SE Runtime Environment (build 1.6.0_22-b04)
Java HotSpot(TM) Client VM (build 17.1-b03, mixed mode, sharing) 
```

# vb6 - 远程处理 vb6 项目

> ID：11912877
> 
> 赞同：1
> 
> 时间：2012-08-11T07:26:32.947
> 
> 标签：vb6

我不知道这是否可能.. 我只是想远程处理一个 vb6 项目。例如，我的朋友正在做一个 vb6 项目。我想从我的电脑上处理那个项目。但我们只是通过互联网相互联系。是否可以从本地计算机和远程访问处理相同的 vb6 项目文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T07:58:45.713

同一个项目文件？不，它不能同时在两个地方打开。

但是您可以像世界上所有其他开发人员一样使用版本控制系统。网上有很多免费的选择，比如[Bitbucket](https://bitbucket.org/)、[GitHub](https://github.com/)和[Assembla](http://www.assembla.com/home)。

您所做的是在其中一个站点上创建一个帐户，将您的代码上传到该网站，然后您和您的同事可以各自检查源的副本。每当您进行重大更改时，您将更改上传回网站，您的同事可以使用新更改更新他的本地副本（反之亦然）。

当然，版本控制系统有很多不同的选项：Git、Mercurial (Hg) 和 Subversion (SVN) 等等。你需要在网上做一些研究来比较每种方法的优缺点，看看你更喜欢哪一种。

我相信我链接到的所有网站都有一个“如何”或“入门”指南，您可能会发现它们相当有用。

# gcc - Gcc错误：gcc：尝试执行'cc1'时出错：execvp：没有这样的文件或目录

> ID：11912878
> 
> 赞同：141
> 
> 时间：2012-08-11T07:26:41.013
> 
> 标签：gcc

我已经在 Linux Mint 12 上成功使用 gcc。现在我遇到了一个错误。我最近一直在做一些 .so 构建并在不久前安装了 Clang，但是自从这两个事件以来已经成功编译，所以不确定发生了什么变化。我使用 GUI 软件管理器删除然后重新安装 gcc，但结果是一样的：

```
~/code/c/ut: which gcc                                                                                                     
/usr/bin/gcc

~/code/c/ut: gcc -std=c99 -Wall -Wextra -g -c object.c                                                                      
gcc: error trying to exec 'cc1': execvp: No such file or directory 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2017-06-22T20:00:34.687

## 解释

错误消息告诉我们，未找到构建时依赖项（在本例中为`cc1`），因此我们只需要 - 将适当的包安装到系统（使用包管理器 // 从源代码 // 另一种方式）

什么是`cc1`：

> `cc1`是一个内部命令，它接受预处理的 C 语言文件并将它们转换为汇编。它是编译 C 的实际部分。对于 C++，有 cc1plus 和其他用于不同语言的内部命令。

^([取自](https://unix.stackexchange.com/a/77781/144260)[Alan Shutko](https://unix.stackexchange.com/users/25945/alan-shutko)的这个答案。)

## 解决方案：Ubuntu / Linux Mint

```
sudo apt-get update
sudo apt-get install --reinstall build-essential 
```

## 解决方案：Docker-alpine 环境

如果您在**docker-alpine**环境中，请通过将以下内容添加到您的安装[build-base](https://pkgs.alpinelinux.org/packages?name=build-base)`Dockerfile`包：

```
RUN apk add build-base 
```

^(更好的包名由[Pablo Castellano](https://stackoverflow.com/users/9829892/pablo-castellano)提供。更多[细节在这里](https://stackoverflow.com/a/54751376/1115187)。)

如果您需要更多软件包用于构建目的，请考虑添加[alpine-sdk](https://pkgs.alpinelinux.org/packages?name=alpine-sdk)软件包：

```
RUN apk add alpine-sdk 
```

^(取自[github](https://github.com/gliderlabs/docker-alpine/issues/24#issuecomment-89771871 "GitHub.com 上的原始答案"))

## 解决方案：CentOS/Fedora

[此答案](https://stackoverflow.com/a/45403093/1115187)包含 CentOS 和 Fedora Linux 的说明

## 解决方案：亚马逊 Linux

```
sudo yum install gcc72-c++ 
```

^(取自[CoderChris](https://stackoverflow.com/users/208266/coderchris)的[评论](https://stackoverflow.com/questions/11912878/gcc-error-gcc-error-trying-to-exec-cc1-execvp-no-such-file-or-directory/44708372#comment90819578_48076977))

您也可以尝试通过此安装缺少的依赖项（*尽管据说不能解决问题*）：

```
sudo yum install gcc-c++.noarch 
```

^(取自[这个答案](https://stackoverflow.com/a/48076977/1115187))

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2017-07-30T18:14:02.400

在 CentOS 或 Fedora 上

```
yum install gcc-c++ 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2016-08-03T03:33:38.657

在 debian / ubuntu 我通过重新安装解决了这个问题`build-essential`：

```
sudo apt-get update
sudo apt-get install --reinstall build-essential 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-08-11T07:40:13.610

这是因为`gcc`调用了许多其他可执行文件来完成输入的处理，并且`cc1`不在包含的路径中。

在壳型`whereis cc1`上。如果`cc1`找到，最好在`gcc`; 的目录下创建一个软链接。否则，`cc1`未安装，您必须使用包管理器安装*gcc-c++ 。*

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-01-03T12:00:49.370

> # Amazon Linux：修复 GCC 问题

由于这是在 Google 上出现的第一个结果，因此我只想记录下我使用 Amazon Linux 的经验。安装`gcc-c++.noarch`解决了问题：

`sudo yum install gcc-c++.noarch`

有些人还报告了这种替代方案作为解决方案：

`sudo yum install gcc72-c++`

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-03-15T16:02:23.473

我通过显式安装 g++ 解决了这个问题：

```
sudo apt-get install g++ 
```

安装 pandas 时在 Ubuntu 12.04 上遇到问题。（感谢 perilbrain。）

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-03-07T04:07:43.050

我今天遇到了类似的问题 - 一位同事无法构建他的软件，但我可以构建它。他跑的`gcc`时候也找不到`cc1`。

他的可执行路径看起来很合理，但我无法轻易复制失败的事实表明他的环境中存在某些原因。

最终，我们发现`GCC_EXEC_PREFIX`在他的环境中定义了这是罪魁祸首，并且`gcc`在搜索`cc1`. 这是他的 shell 启动脚本的一部分，旨在解决不再使用的 SPARC/Solaris 系统的限制。通过不设置此环境变量解决了该问题。

[http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html](http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-02-15T09:17:14.330

`yum install gcc-c++` 做了修复。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-03-31T21:07:45.953

确保您`GCC_EXEC_PREFIX(env)`的未导出并且您`PATH`已导出到正确的工具链。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-07-06T21:53:40.233

我在 RHEL 7 上编译和安装了一个闪亮的新 GCC（8.1 版）后不久就遇到了这种情况。最后，它最终成为了权限问题；我的根 umask 是罪魁祸首。我最终发现`cc1`隐藏在`/usr/local/libexec`：

```
[root@nacelle gdb-8.1]# ls -l /usr/local/libexec/gcc/x86_64-pc-linux-gnu/8.1.0/ | grep cc1
-rwxr-xr-x 1 root root 196481344 Jul  2 13:53 cc1 
```

但是，指向那里的目录的权限不允许我的标准用户帐户：

```
[root@nacelle gdb-8.1]# ls -l /usr/local/libexec/
total 4
drwxr-x--- 3 root root 4096 Jul  2 13:53 gcc
[root@nacelle gdb-8.1]# ls -l /usr/local/libexec/gcc/
total 4
drwxr-x--- 3 root root 4096 Jul  2 13:53 x86_64-pc-linux-gnu
[root@nacelle gdb-8.1]# ls -l /usr/local/libexec/gcc/x86_64-pc-linux-gnu/
total 4
drwxr-x--- 4 root root 4096 Jul  2 13:53 8.1.0 
```

添加世界读取/执行权限的快速递归`chmod`将其修复：

```
[root@nacelle 8.1.0]# cd /usr/local/libexec
[root@nacelle lib]# ls -l | grep gcc
drwxr-x---  3 root root     4096 Jul  2 13:53 gcc
[root@nacelle lib]# chmod -R o+rx gcc
[root@nacelle lib]# ls -l | grep gcc
drwxr-xr-x  3 root root     4096 Jul  2 13:53 gcc 
```

现在`gcc`可以找到`cc1`当我要求它编译的东西了！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-18T16:17:16.293

只是为了补充@maxkoryukov 关于高山的回答。

`build-essential`在 Alpine 中相当于 Debian 的是`build-base`. 事实上，上面提到的`alpine-sdk`依赖于`build-base`.

```
/ # apk info -R build-base
build-base-0.5-r1 depends on:
binutils
file
gcc
g++
make
libc-dev
fortify-headers

/ # apk info -R alpine-sdk
alpine-sdk-1.0-r0 depends on:
abuild
build-base
git 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-29T12:56:45.447

如果您尝试在 64 位操作系统上运行 32 位 gcc 二进制文件并且缺少 32 位 glibc，这也可能是显示的错误消息。根据这个[自述](https://launchpadlibrarian.net/174121181/readme.txt)文件：“对于 64 位系统，运行工具需要 32 位 libc 和 libncurses。”。在这种情况下，路径没有问题，实际上找到了 cc1，但[报告为缺少](https://stackoverflow.com/questions/2716702/no-such-file-or-directory-error-when-executing-a-binary)32 位 glibc。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-01-24T22:17:21.823

我在相当全新的 Fedora 27 安装中遇到了这个问题。我尝试了所有其他建议或它们的等价物；安装各种软件包要么说“已经安装”，要么安装了一些没有帮助的新东西。

固定与

```
# dnf remove gcc
# dnf install gcc gcc-c++ 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-04-09T14:07:17.710

只是为了记录我在这个问题上遇到的麻烦，即使它似乎只是其他答案的一个具体例子；作为一个相对新手，我觉得这可能对其他人有所帮助。

解决方案：

我将 '/usr/bin' 添加到 PATH 的开头以使用单个会话，`PATH='/usr/path/:$PATH'`并且一切都开始正常工作。

在确保它不会破坏我的常规工具链之后，我使用 gedit 永久更新 PATH。

解释：

我在 Ubuntu 14.04LTS 上安装了多个工具链，我只定期使用几个。当我尝试从命令行使用 gcc 时，我遇到了 OP 描述的问题。'/usr/bin' 在 PATH 中，但它位于其他工具链位置的后面。原来那些其他工具链的 cc1 与 gcc 不兼容。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-07-29T17:20:56.237

对我有帮助的是`llvm-gcc`改用：

```
ln -s $(which llvm-gcc) /usr/local/bin/gcc 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-09T04:07:26.840

记录在 Amazon Linux 2 上从源代码安装 gcc-10 的另一个错误源。

运行`sudo make install`然后测试后，`gcc-10`我得到了这个错误：

```
gcc-10: fatal error: cannot execute ‘cc1’: execvp: No such file or directory 
```

原因是新的 g++ 目录`/usr/local/`是由`sudo make install`拥有`700`权限创建的，因此非 root 用户无法看到目录内容。

我通过运行修复它

```
sudo find /usr/local/ -type d -exec chmod 755 {} \; 
```

请注意，我遵循了这个片段[https://gist.github.com/nchaigne/ad06bc867f911a3c0d32939f1e930a11](https://gist.github.com/nchaigne/ad06bc867f911a3c0d32939f1e930a11)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-02T12:03:57.910

在我罕见的情况下，是`color wrapper`谁宠坏了`gcc`。通过禁用从环境变量中`cw`排除其目录来解决。`/usr/libexec/cw``PATH`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-02-20T02:44:31.273

它在这个包中（Ubuntu 19.04）：

```
 sudo apt install g++-6 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-08-20T20:24:00.020

在我的罕见情况下，PATH 变量已设置但未导出。简单地导出 PATH 变量就可以解决这个问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-02-22T11:03:49.907

在 Scientific Linux 6（类似于 CentOS 6——SL 现在被 CentOS、AIUI 取代）上，我不得不使用我在[https://stelfox.net/blog/2014/08/dependency-prelink-issues/](https://stelfox.net/blog/2014/08/dependency-prelink-issues/)`/usr/sbin/prelink -av -mR`上发现的建议

在我这样做之前，我在`gcc: error trying to exec 'cc1': execvp: No such file or directory`尝试编译时遇到了 cc1 错误，并且 gcc --version 报告了 4.2.2 而不是 4.4.7，尽管 yum 报告了该版本。

它可能相关也可能不相关，但系统已用完 /var 上的空间

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-07-02T09:52:13.623

为什么会这样？当您安装新的 linux 副本时，gcc 编译器会预先打包。它只包含用于运行 linux 的文件和二进制文件（显然是为了节省空间和时间）。

如何解决这个错误？您所需要的只是通过包管理器更新您的包并重新安装构建必需的包。不同内核上的命令可能不同。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-18T07:05:31.330

我想添加一些额外的答案，对于那些最喜欢的答案没有帮助的人。

我不小心删除了其中的一些文件，`/usr/lib`因此`/usr/local/bin`无法`apt`正确重新安装`gcc`和`build-essential`打包。我几乎尝试了所有方法，但最后只有恢复整个依赖树才有帮助。在 Ubuntu 20.04 上，我运行了以下命令：

```
sudo apt install --reinstall \
    binutils \
    binutils-common \
    binutils-x86-64-linux-gnu \
    cpp \
    cpp-9 \
    gcc \
    gcc-10-base \
    gcc-9 \
    gcc-9-base \
    libasan5 \
    libatomic1 \
    libbinutils \
    libc-dev-bin \
    libc6 \
    libc6-dev \
    libcc1-0 \
    libcrypt-dev \
    libcrypt1 \
    libctf-nobfd0 \
    libctf0 \
    libgcc-9-dev \
    libgcc-s1 \
    libgmp10 \
    libgomp1 \
    libidn2-0 \
    libisl22 \
    libitm1 \
    liblsan0 \
    libmpc3 \
    libmpfr6 \
    libquadmath0 \
    libstdc++6 \
    libtsan0 \
    libubsan1 \
    libunistring2 \
    linux-libc-dev \
    manpages \
    manpages-dev \
    zlib1g 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-05-23T03:02:02.220

添加我的**Amazon Linux**解决方案- 2021 年工作：

```
sudo yum install gcc 
```

接着：

```
sudo yum install gcc-c++ 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-11-11T22:01:09.620

对于**Amazon Linux Release 2**这将解决问题：

```
sudo yum install gcc-c++ 
```

（这不起作用`sudo yum install gcc72-c++`：）

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-07-19T18:30:55.493

你可以通过运行这个来解决这个问题： 在 Fedora 上：

```
sudo dnf install redhat-rpm-config 
```

# java - 在内存对象缓存中开发

> ID：11912883
> 
> 赞同：2
> 
> 时间：2012-08-11T07:27:56.130
> 
> 标签：java, jakarta-ee, caching

我正在开发一个基于 Web 的医疗应用程序，需要创建一个小的内存对象缓存。这是我的用例。

我们需要显示需要某些东西（血液、肾脏等）的人提交的请求列表，并且它不会是一个巨大的列表，因为在给定的一天请求血液或其他任何东西都是有限的。请考虑到我们不想使用任何缓存 API，因为它会是一个矫枉过正。这个想法是创建一个 Map 并将其放置在 ApplicationContext 中。

任何人发出新请求的那一刻，我们将在应用程序上下文中更新该 Map，并且在请求过期的那一刻，我们将从 Map 中删除它们。我们还需要研究以下几点。

1.  需要设置最大元素限制。
2.  如果达到最大限制，我们应该删除最先添加的条目。
3.  处理任何同步问题。

请建议应该使用什么数据结构以及在实施时要注意什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:35:52.667

谷歌的番石榴缓存怎么样？它实现起来非常简单，而且非常易于使用：

[番石榴缓存](http://code.google.com/p/guava-libraries/wiki/CachesExplained)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:40:15.417

对于 OmniFaces 项目，我们有类似的要求，我们选择了[concurrentlinkedhashmap](http://code.google.com/p/concurrentlinkedhashmap)，它带有一个小型[包装器](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/output/cache/TimeToLiveCache.java)，用于跟踪缓存项的有效时间，并在请求该项时从缓存中懒惰地清除它们。

另请参阅：[如何在 Java 中实现 LRU 缓存？](https://stackoverflow.com/questions/221525/how-would-you-implement-an-lru-cache-in-java-6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T07:40:19.763

如果您不想添加第三方库，您可以在[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)之上自己实现一个。LinkedHashMap 非常适合用作缓存，您可以配置策略（删除最近最少使用或最旧的条目）如果您进行相应配置，它将根据需要删除最旧的条目。
为了线程安全，您始终可以使用[Collections#synchronizedMap()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)。

这是一个小[例子](http://www.java-blog.com/creating-simple-cache-java-linkedhashmap-anonymous-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T07:56:25.603

我相信[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)正是您所需要的。您只需要覆盖[removeEldestEntry(...)](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)方法，如果达到最大容量，它将自动为您删除旧条目。就像是：

```
import java.util.*;

class CacheMap<K,V> extends LinkedHashMap<K,V> {
    protected final int maxCapacity;
    public CacheMap(int maxCapacity) {
        this.maxCapacity = maxCapacity;
    }

    @Override
    protected boolean removeEldestEntry(Map.Entry eldest) {
        return size() > maxCapacity;
    }
} 
```

您可以实现更复杂的逻辑，例如删除非常旧的条目，即使最大值。容量未达到。

如果同步原子映射操作对您来说已经足够了，您可以将映射包装到[Collections.synchronizedMap(...) 中](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)：

```
Map<K,V> map = Collections.synchronizedMap(new CacheMap<K,V>(capacity)); 
```

如果您需要更准确的同步，例如读取地图并在一个同步块中更新它，您需要自己[同步与地图一起使用的](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html) *（所有）*代码块。

# mysql - 在mysql查询中结合左和右连接

> ID：11912884
> 
> 赞同：13
> 
> 时间：2012-08-11T07:28:12.683
> 
> 标签：mysql, join, left-join

我要加入 2 个表 -tbl1 和 tbl2。左连接给出来自 tbl1 的所有数据，这些数据在 tbl2 中或仅在 tbl1 上。右连接给出了 tbl2 中不存在于 tbl1 中的数据。

我想结合这两个结果。

这样做的最佳方法是什么，以便我从 tbl1 和 tbl2 获取所有数据？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-11T08:26:38.370

唯一可以做到的就是使用`UNION`. MySQL`FULL JOIN`不像 MSSQL 那样支持。

```
SELECT * 
FROM tbl1 t1 
       LEFT JOIN tbl2 t2
          ON t1.col = t2.col
UNION 
SELECT * 
FROM tbl1 t1 
       RIGHT JOIN tbl2 t2 
          ON t1.col>= t2.<col 
```

**[在这里查看：在 MYSQL 中模拟 FULL JOIN](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)**

顺便说一句，`UNION`有可选关键字`ALL`，当`ALL`省略时，会`UNION`自动`DISTINCT`从结果集中选择行。

示例：

```
SELECT *
FROM   tableA
UNION ALL
SELECT *
FROM   tableA 
```

这可能导致重复行

```
ColA    ColB
==================
1       John
2       Jade
2       Jade
3       Hello 
```

但是如果你省略这个词`ALL`

```
SELECT *
FROM   tableA
UNION
SELECT *
FROM   tableA 
```

这只能导致不同的行

```
ColA    ColB
==================
1       John
2       Jade
3       Hello 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-11T07:36:49.477

你想要的是`FULL JOIN`

> `LEFT JOIN`+ `RIGHT JOIN`=`FULL JOIN`

所以试试这个：

```
SELECT * FROM tbl1
LEFT JOIN tbl2 ON tbl1.id = tbl2.id
UNION
SELECT * FROM tbl1
RIGHT JOIN tbl2 ON tbl1.id = tbl2.id 
```

该`UNION`子句将两个 SQL 查询的结果组合到一个包含所有匹配行的表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T09:14:32.713

如果您有超过 2 个表的完全连接，则可以轻松扩展以下替代方法：

```
SELECT t1*, t2.* 
FROM 
    ( SELECT col
      FROM tbl1
    UNION
      SELECT col
      FROM tbl2
    ) AS d
  LEFT JOIN tbl1 AS t1 
    ON t1.col = d.col
  LEFT JOIN tbl2 AS t2
    ON t2.col = d.col ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T07:37:33.413

你必须使用 FULL OUTER JOIN，但 mysql 不支持它。你可以这样做以获得结果：

```
 SELECT * 
FROM tbl1 t1 LEFT JOIN tbl2 t2
ON t1.<col> = t2.<col>
UNION 
SELECT * 
FROM tbl1 t1 RIGHT JOIN tbl2 t2 
ON t1.<col>= t2.<col> 
```

# python - 为视图可调用对象设置 sqlalchemy 连接的推荐方法是什么？

> ID：11912890
> 
> 赞同：7
> 
> 时间：2012-08-11T07:29:50.603
> 
> 标签：python, sqlalchemy, pyramid

我正在使用 sqlalchemy 表达式语言的表示法和连接池来创建 dao 对象以与持久层进行通信。我想就如何设置元数据和引擎获得一些意见，以便它们可用于应用程序视图可调用对象。根据 sqlalchemy 的文档[http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html)，它们通常是绑定并声明为全局的，但是我没有这个或单例方法都不是好主意。任何想法将不胜感激...

这是我的`__init__.py`文件在项目目录中的样子：

```
from pyramid.config import Configurator
from sqlalchemy import engine_from_config, MetaData, create_engine
from pyramid_beaker import session_factory_from_settings

db_url = 'postgresql://user:password@localhost/dbname'
engine = create_engine(db_url)
meta = MetaData()

def main(global_config, **settings):
    meta.bind = engine
    .
    .
    .
    [other configuration settings] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T07:51:15.457

Pyramid 文档包括[有关将 Pyramid 与 SQLAlchemy 集成的教程](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/wiki2/index.html)。

有两个特殊的包将 SQLAlchemy 事务和会话管理与 Pyramid 集成在一起，[`pyramid_tm`](https://pypi.python.org/pypi/pyramid_tm)以及[`zope.sqlalchemy`](https://pypi.python.org/pypi/zope.sqlalchemy). 这些共同处理您的会话：

```
from sqlalchemy import engine_from_config

from .models import DBSession

def main(global_config, **settings):
    """This function returns a Pyramid WSGI application."""

    engine = engine_from_config(settings, 'sqlalchemy.')
    DBSession.configure(bind=engine)
    # Configuration setup 
```

在这里，我们从您的`.ini`配置文件中获取配置设置；并在`models.py`：

```
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import (
    scoped_session,
    sessionmaker,
    )

from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
Base = declarative_base()

class YourModel(Base):
    # Define your model 
```

注意[`scoped_session`](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#sqlalchemy.orm.scoped_session)那里的使用，使用事务扩展与 Pyramid 集成。

然后在视图中，您需要做的就是使用`DBSession`会话工厂来获取您的会话：

```
from pyramid.view import view_config
from .models import (
    DBSession,
    YourModel,
    )

@view_config(...)
def aview(request):
    result = DBSession.query(YourModel).filter(...).first() 
```

提交和回滚将与请求集成；例如，在 2xx 和 3xx 上提交，在异常时回滚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T07:41:15.750

我认为 sqlalchemy 文档示例为了简洁而将它们声明为全局，而不是表示它们建议这样做。

我认为您真正想要传递给应用程序不同部分的唯一东西是 Session 对象。更简单的选择是使用[范围会话](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#sqlalchemy.orm.scoped_session)（我似乎记得 O'Reilly sqlalchemy 书实际上建议用于更简单的基于 Web 的应用程序；您的代码表明它是一个 Web 应用程序）。我认为除了实例化数据库连接之外，几乎没有应用程序需要在任何位置使用引擎或元数据。

范围会话也将在创建引擎和元数据时创建，在应用程序启动时（在金字塔的情况下，在[此处的](http://pyramid.readthedocs.org/en/1.3-branch/narr/introduction.html#single-file-applications)**main**函数中）。然后，您将其作为参数传递给应用程序中需要访问数据库的各个部分。

# excel - Microsoft Excel：基于依赖关系的下拉列表

> ID：11912891
> 
> 赞同：0
> 
> 时间：2012-08-11T07:29:56.047
> 
> 标签：excel, html.dropdownlistfor

我想创建一个 Excel 表，其中数据应输入到 Row-* - Column-A 中。

在将数据输入 Row-N::Column-A 后，我想将输入的数据与从 Column-B 的下拉列表中选择的条目相关联。

现在，Column-B 列表中的每个项目实际上都有一个专用列表。如果我在 Column-B 中选择了 Item-X，我应该可以在 Column-C 中从专用于 Item-X 的列表中选择一个项目。

这要怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:13:45.367

下面的代码将帮助您通过简单地将数据粘贴到源列中来创建依赖列表。为简单起见，我们将上面的列表复制并粘贴到 Excel 工作表的 A 列和 B 列中，例如`Sheet1`. 但是在我们这样做之前，我们必须将以下代码粘贴到工作表代码区域中。通过在主工作表中按`Alt`+可以访问工作表代码区域。`F11`

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long, LastRow As Long, n As Long
    Dim MyCol As Collection
    Dim SearchString As String, TempList As String

    Application.EnableEvents = False

    On Error GoTo Whoa

    '~~> Find LastRow in Col A
    LastRow = Range("A" & Rows.Count).End(xlUp).Row

    If Not Intersect(Target, Columns(1)) Is Nothing Then
        Set MyCol = New Collection

        '~~> Get the data from Col A into a collection
        For i = 1 To LastRow
            If Len(Trim(Range("A" & i).Value)) <> 0 Then
                On Error Resume Next
                MyCol.Add CStr(Range("A" & i).Value), CStr(Range("A" & i).Value)
                On Error GoTo 0
            End If
        Next i

        '~~> Create a list for the DV List
        For n = 1 To MyCol.Count
            TempList = TempList & "," & MyCol(n)
        Next

        TempList = Mid(TempList, 2)

        Range("D1").ClearContents: Range("D1").Validation.Delete

        '~~> Create the DV List
        If Len(Trim(TempList)) <> 0 Then
            With Range("D1").Validation
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:=TempList
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True
            End With
        End If
    '~~> Capturing change in cell D1
    ElseIf Not Intersect(Target, Range("D1")) Is Nothing Then
        SearchString = Range("D1").Value

        TempList = FindRange(Range("A1:A" & LastRow), SearchString)

        Range("E1").ClearContents: Range("E1").Validation.Delete

        If Len(Trim(TempList)) <> 0 Then
            '~~> Create the DV List
            With Range("E1").Validation
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:=TempList
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True
            End With
        End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub

'~~> Function required to find the list from Col B
Function FindRange(FirstRange As Range, StrSearch As String) As String
    Dim aCell As Range, bCell As Range, oRange As Range
    Dim ExitLoop As Boolean
    Dim strTemp As String

    Set aCell = FirstRange.Find(what:=StrSearch, LookIn:=xlValues, _
    lookat:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    ExitLoop = False

    If Not aCell Is Nothing Then
        Set bCell = aCell
        strTemp = strTemp & "," & aCell.Offset(, 1).Value
        Do While ExitLoop = False
            Set aCell = FirstRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                strTemp = strTemp & "," & aCell.Offset(, 1).Value
            Else
                ExitLoop = True
            End If
        Loop
        FindRange = Mid(strTemp, 2)
    End If
End Function 
```

[您可以在此处](http://www.siddharthrout.com/2011/07/29/excel-data-validationcreate-dynamic-dependent-lists-vba/)获得有关上述内容的更多详细信息。

# objective-c - 使用X关闭Mac桌面应用程序后如何重新打开它？

> ID：11912893
> 
> 赞同：0
> 
> 时间：2012-08-11T07:30:31.133
> 
> 标签：objective-c, xcode, cocoa

我已经为 Mac 桌面创建了一个应用程序，它正在运行，但 Apple 拒绝了它，因为当我们运行该应用程序并使用“X”关闭它时，尽管应用程序图标仍然存在，但我们无法从 Dock 重新打开它但它没有再次打开应用程序，我正在努力的主要问题是“如果我们关闭应用程序，那么在菜单栏中没有打开它的选项”我见过的其他应用程序就是这样做的。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-24T07:21:17.727

这是 Swift 3 的答案：

符合视图控制器类中的 NSWindowDelegate 。然后通过覆盖以下方法隐藏窗口而不是关闭它。

```
self.view.window?.delegate = self

func windowShouldClose(_ sender: Any) -> Bool {
    NSApplication.shared().hide(self)
    return false
} 
```

然后在停靠栏中单击应用程序图标时取消隐藏应用程序。

```
func applicationDidBecomeActive(_ notification: Notification) {
    NSApplication.shared().unhide(self)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:01:05.537

要为红色 (x) 按钮实现简单的显示/隐藏功能，请将您的 App Delegate 类也设为主窗口的窗口代理。

然后在其中添加以下代码：

```
- (BOOL)windowShouldClose:(id)sender {
    [[NSApplication sharedApplication] hide:self];

    return NO;
}

- (void)applicationDidBecomeActive:(NSNotification *)notification {
    [[NSApplication sharedApplication] unhide:self];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-18T05:31:02.690

我为 swift 5/Xcode 10 准备的 2 个证书

注意：您也可以在 ViewController 中调用这些方法（如果有用），以防止在 NASWindow/NSView-Controller 之间拆分代码。在这种情况下：

```
class ViewController: NSViewController, **NSWindowDelegate**
{ 
```

...

```
override func viewWillAppear() {
    // we choose to delegate ourselves. must be done here, in viewDidLoad window is nil
    let window = self.view.window
    window!.delegate = self
} 
```

...

不需要通过自我.. :（根据上面的其他人。）

```
 func windowShouldClose(_ sender: NSWindow) -> Bool {

        NSApplication.shared.hide(nil)

        return false // prevent closing.
    }

    func applicationDidBecomeActive(_ notification: Notification) {
        NSApplication.shared.unhide(nil)
    } 
```

# c# - 单击鼠标时更改面板的颜色？

> ID：11912895
> 
> 赞同：0
> 
> 时间：2012-08-11T07:31:21.897
> 
> 标签：c#, .net, winforms, panel

我对视觉 C# 很陌生

我想做一个订票系统（比如电影院），我用面板创建了座位，每个座位都是`40 * 40`

这是我的代码：

```
private void panel2_Paint(object sender, PaintEventArgs e)
{
    int a, b;

    for (a = 0; a <= 1; a++)
    {
        for (b = 0; b < 12; b++)
        {

            Graphics g = e.Graphics;
            g.FillRectangle(new SolidBrush(Color.White), b * 40, a * 40, 40, 40);
            g.DrawRectangle(new Pen(Color.Black), b * 40, a * 40, 40, 40);

        }
    }
} 
```

现在我想通过鼠标点击更改每个座位的颜色，以显示已选择的座位；但到目前为止还没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:41:48.747

[当OnMouseClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onmouseclick.aspx)事件触发时`Graphics`，您可以通过简单地设置与所选座位相对应的控件的[BackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backcolor.aspx)属性，而不是使用对象并直接绘制到窗体上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:11:05.083

您最好为每个选定的座位创建单独的控件并处理它们的 Click 事件。在此示例中，我将 24 添加`PictureBox's`到`Panel`. 然后我将它们的索引放在`Tag`控件的属性中，并附加了一个常见的单击事件处理程序。我还使用一个`Bool`数组来跟踪选定的状态。

```
public partial class Form1 : Form
{
    bool[] selected = new bool[24];
    public Form1()
    {
        InitializeComponent();
        foreach (PictureBox  pb in panel1.Controls)
        {
            pb.Click += new EventHandler(pictureBox_Click);
        }
    }

    private void pictureBox_Click(object sender, EventArgs e)
    {
        PictureBox pb = (PictureBox)sender;
        int index ;
        if (int.TryParse(pb.Tag.ToString(), out index))
        {
            if (selected[index])
            {
                selected[index] = false;
                pb.BackColor = Color.White;
            }
            else
            {
                selected[index] = true;
                pb.BackColor = Color.Red;
            }
        }
    }
} 
```

如果您创建一个布尔数组来存储座椅的状态，您可以使用您所拥有的，使用面板的 MouseDown 事件来设置变量并使与您的座椅相关的屏幕矩形无效。

像这样的东西。

```
public partial class Form1 : Form
{
    bool[,] selected = new bool[2,12];
    public Form1()
    {
        InitializeComponent();
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        int a, b;

        for (a = 0; a <= 1; a++)
        {
            for (b = 0; b < 12; b++)
            {

                if (selected[a, b])
                {
                    e.Graphics.FillRectangle(new SolidBrush(Color.Red), b * 40, a * 40, 40, 40);

                }
                else
                {
                    e.Graphics.FillRectangle(new SolidBrush(Color.White ), b * 40, a * 40, 40, 40);
                }
                e.Graphics.DrawRectangle(new Pen(Color.Black), b * 40, a * 40, 40, 40);

            }
        } 

    }

    private void panel1_MouseDown(object sender, MouseEventArgs e)
    {
        int xPos, yPos;
        xPos = e.X / 40;
        yPos = e.Y / 40;

        if ((xPos > 11) || (yPos > 1)) return;

        if(selected[yPos,xPos])
            selected[yPos, xPos] = false;
        else
            selected[yPos, xPos] = true;

        ((Panel)sender).Invalidate(new Rectangle(xPos * 40,yPos *40,40,40)) ;
    }
} 
```

# node.js - 快递，jade布局文件渲染body但不渲染head

> ID：11912904
> 
> 赞同：7
> 
> 时间：2012-08-11T07:32:06.593
> 
> 标签：node.js, express, pug

我的问题是我的翡翠布局文件没有正确渲染。渲染了正文，但生成的 html 中的 head 标签为空。我尝试单独渲染 layout.jade 文件，并且效果很好。

这是我的 layout.jade 文件

```
!!!
html
    head
        title= title
        link(rel='stylesheet', href='stylesheets/style.css')
        script(type='text/javascript', src='javascripts/jquery-1.7.2.js')
        link(rel='stylesheet', href='stylesheets/pictogram-button.css')
body
    header(style='padding-bottom:50px;')
        include partials/header
    section(style='min-height:600px;') 
        div!= body
    footer.footer
        include partials/footer 
```

这是我的 index.jade 文件

```
.line_h100t
.column_wrap800
    .round_box1_w800
        .list_fl10
            ul.line_h40
                li(style='margin-left:20px;')
                    ul
                        li
                            img(src='/images/icon/whiteWithoutCircle/check.png')
                            img(src='/images/login/loginTxt.png')
                    ul.line_h40t
                        li(style='margin-left:50px;')
                            p 로그인이 필요하신 분은
                            p Oopa Roopa 관리팀으로 문의해 주세요!
                li(style='border-left:1px solid #999; padding:0 0 0 20px;')
                    ul
                        li
                            span.text_yellow ID
                    ul
                        li
                            input.login_input(type='text')
                    ul.line_h35t
                        li
                            span.text_yellow PASSWORD
                    ul
                        li
                            input.login_input(type='password')
                li
                    ul.line_h10t
                        a.button-bevel.transparency(href='#')
                            .line_h35
                                span.lock
                                p(style='width:100px;') LOGIN 
```

这是我的快速应用程序中呈现索引文件的函数。

```
 adminLogin : function (req,res) {
    res.render( 'index', {
        title: 'Admin Login',
        pageCategory: 'Admin Login',
        pageName : 'index'
    });
}, 
```

预先感谢您给我的任何帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-11T08:04:34.317

在 express 3 中，删除了布局以支持模板继承，如此[处](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)所述。玉[自述文件](https://github.com/visionmedia/jade#a11)描述了它是如何工作的，[这里](http://www.devthought.com/code/use-jade-blocks-not-layouts/)还有一个额外的例子。

您将需要替换`div!= body`为`block body`（或类似的）。然后在顶部`index.jade`，您需要添加`extends layout`. 最后将 的内容`index.jade`放在 a `block body`（或您在 中使用的任何名称`layout.jade`）下。

# javascript - 如何加载脚本文件并执行？

> ID：11912906
> 
> 赞同：1
> 
> 时间：2012-08-11T07:32:19.120
> 
> 标签：javascript, jquery, html

我有显示提要的 feedburner 脚本，它看起来像这样：

```
<script src="http://feeds.feedburner.com/cnn/HIkg?format=sigpro" type="text/javascript" ></script> 
```

我想加载这个位于不同 html 页面上的脚本，所以基本上我正在使用以下脚本加载 html 文件：

```
$('#' + items[i]).load('content/' + items[i] + '.html'); 
```

这段代码确实加载了 html 页面，但脚本没有执行（工作）。加载后如何让脚本工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:57:05.903

根据[**文档**](http://api.jquery.com/load/)：

> **脚本执行**
> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

如果您的 url 只是一个没有指定选择器的普通 url，那么脚本应该在删除之前执行。

检查的值`items[i]`并检查它是否是没有选择器的普通 url。

如果 url 看起来不错，您可能会遇到跨端脚本问题。该文档还提到：

> 由于浏览器安全限制，大多数“Ajax”请求都受[**同源策略**](http://en.wikipedia.org/wiki/Same_origin_policy)的约束；请求无法从不同的域、子域或协议成功检索数据。

如果可能的话，尽管我仍然建议将任何脚本放在外部文件中，因为这是一种很好的做法并且不会弄乱 html。然后您可以按照**Raminson**`.getScript()`的建议使用。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:41:37.023

您可以使用[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)实用功能：

> 使用 GET HTTP 请求从服务器加载 JavaScript 文件，然后执行它。

```
$.getScript("/test.js") 
```**

# php - 如何在 PHP 中使用 javascript 变量

> ID：11912908
> 
> 赞同：2
> 
> 时间：2012-08-11T07:32:35.843
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JavaScript 变量用作 PHP 变量？](https://stackoverflow.com/questions/2379224/how-can-i-use-a-javascript-variable-as-a-php-variable)

我需要在 PHP 中使用 javascipt 变量，我该怎么做？

例如：

```
<script>
var abc = 'this is text';
</script> 
```

如何`abc`在 php 中读取变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T07:43:31.807

一种方法是使用隐藏的文本/输入框。

```
<input type="text" style="display:none" id="hiddenVal" /> 
```

在 Javascript 中将变量分配给输入框。

```
<script>
function loadValues()
{
var abc = 'this is text';
document.getElementById("hiddenVal").value = abc;
//alert(document.getElementById("hiddenVal").value);
}
</script>

<body onload="loadValues();">

<form action="processing.php" method="post">
  <input type="text" style="display:none" id="hiddenVal" />
  <input type="submit" name="submit" id="submit" value="Submit" />
</form>
</body> 
```

这是一种允许您使用 Javascript 变量并将其发布到后端的方法。或者，如果您想显示这些值，只需删除

> 样式=“显示：无”

在控件上。

现在，在帖子发生后，应该能够使用**processing.php获取变量**

```
<?php
echo $_POST["hiddenVal"];
?> 
```

这样做的方式非常肮脏，但可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T07:50:04.350

无论如何，我不确定这会对您有所帮助。但是通过这种方式，您可以在服务器端使用 javascript。

```
<script type="text/javascript">
var abc= 'this is text';
<?php $abc = "<script>document.write(abc)</script>"?>   
</script>
<?php echo $abc;?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T07:34:26.870

您将想尝试使用 AJAX。jQuery 有一个不错的[AJAX 库](http://api.jquery.com/jQuery.ajax)，如果纯粹做它听起来对您不太有吸引力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T07:40:06.063

它可能的方式是：

重定向到 php 脚本

或者

对 PHP 脚本的 AJAX 调用

# android - 圆形可滚动布局

> ID：11912916
> 
> 赞同：0
> 
> 时间：2012-08-11T07:33:56.283
> 
> 标签：android, android-layout

我需要为圆形可滚动布局编写代码。（见附图）。我想知道，我可以使用哪种布局来实现这一目标？请提出一些方法或链接。

干杯...![在此处输入图像描述](../Images/dd3f9d07ff1777c4bf11c84af892bfef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:22:07.817

这与您正在寻找的内容相似。它是圆形 Path-App 菜单的 android 实现：

[https://github.com/daCapricorn/ArcMenu](https://github.com/daCapricorn/ArcMenu) - Apache 2.0

[https://github.com/siyamed/android-satellite-menu/](https://github.com/siyamed/android-satellite-menu/) - LGPL

它应该类似于左角的菜单： ![小路](../Images/ae0205b4f4bc77cf29e8621381a57a81.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:41:18.610

我建议根本不使用布局。

请改用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)。

SurfaceView 非常易于使用。请参阅官方月球着陆器[代码示例](http://developer.android.com/resources/samples/LunarLander/index.html)。查看 SurfaceView 的实际效果。

# c# - 如何在 C# 中查找数据表中存在的列？

> ID：11912920
> 
> 赞同：1
> 
> 时间：2012-08-11T07:34:20.447
> 
> 标签：c#

我有问题。我在存储过程中有 2 个查询。如果条件为真，则两者都在特定条件下运行，查询一个执行并从 3 个表中返回 7 列。如果条件失败，第二个查询返回 4 列。

在前端，我使用数据表来存储查询结果。我从数据表中为文本框赋值。

像

dt 是数据表名

```
Txt_name.Text=dt.Rows[0][6].ToString(); 
```

问题是当第二个查询执行时发生错误。6 处不存在列。

我如何找到 dt 在索引 6 处有列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T10:27:45.760

试试这个代码

```
 int indx = 6;
 if(dt != null and dt.Columns.Count > indx)
 {
     Txt_name.Text=dt.Rows[0][indx].ToString();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T07:48:23.193

您可以检查列数，如下所示：

```
int index = 6;
Txt_name.Text = dt.Columns.Count > index ? dt.Rows[0][index].ToString() : String.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T08:15:05.073

您是否有权修改存储过程？并且还要管理所有使用这个存储过程的资源？我建议无论结果如何，它都返回相同的结构。

如果结果不正确，只需将其他字段留空即可。您可以使用运算符实现此目的，如果存在 NULL（即连接表中没有记录）`COALESCE`，则返回给定值（如空字符串的情况）。`''`

> 一个基于字段计数表现不同的函数几乎可以作为一种保险来破坏未来的代码。会有一个神奇的数字“6”，它可以使 if-else-clause 的行为反转或总是评估相同的结果。如果存储过程必须返回不同的结构，请先评估真/假，然后调用适当的存储过程。

# ios - 从 IMAP 服务器检索邮件？

> ID：11912922
> 
> 赞同：1
> 
> 时间：2012-08-11T07:34:31.347
> 
> 标签：ios, cocoa, email, imap, mailcore

我正在尝试使用 MailCore API 从 gmail IMAP 服务器读取消息。我两天以来一直在研究这个问题，但无法解决。帮助我如何从收件箱文件夹中检索我的第一封电子邮件并将其显示为字符串。我的代码是：

```
 CTCoreFolder *inbox=[[CTCoreFolder alloc]initWithPath:@"INBOX" inAccount:account];
    NSArray *messageSet=[inbox messagesFromSequenceNumber:1 to:0    withFetchAttributes:CTFetchAttrEnvelope];
    NSString *s=[[messageSet objectAtIndex:0] body]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:14:51.537

GMail 根文件夹的调用方式`"[Gmail]"`并不`"INBOX"`常见。

# class - 根据上下文仅返回对象中所需数据的最佳模式是什么？

> ID：11912924
> 
> 赞同：3
> 
> 时间：2012-08-11T07:34:43.253
> 
> 标签：class, design-patterns

我将通过例子来问这个问题。假设我正在设计 StackOverflow，并且我拥有我的用户发布的所有这些帖子。对于每篇文章，我都会跟踪大量内容（标题、标签、作者、时间戳、评论、历史记录等）。

所以我设计了一个名为 Post 的类来处理这个问题。

当我点击 StackOverflow 的主页时 - 我必须列出一些帖子。现在我有一个帖子结构的集合（也许是列表）。

问题是，每当我必须得到一个列表时，我不需要帖子本身中存在的很多细节。例如，在列表页面上我不需要历史记录。

所以，问题是，实现这样的东西的最佳模式是什么。目前我们所做的是我们有一个更轻的 Post 类版本（比如 PostLight），这是在这种情况下使用的 - 但这似乎很俗气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T07:43:18.610

我建议使用[`LazyLoading`](http://en.wikipedia.org/wiki/Lazy_loading)which 可以满足您的需求，并且通常与数据库查询一起使用。

假设您有一个`Post`从数据库加载的类，其中只有一些*常用*字段。仅在请求时才加载所有其他详细信息。

可以使用这样的东西：

```
public class Post
{
    private String title;
    private String text;
    private List<Post> history;

    public String getTitle() {
        return title;
    }

    public String getText() {
        return text;
    }

    public List<Post> getHistory() {
        if (null == history) {
            history = loadHistory();
        }
        return history;
    }
} 
```

因此，在您列出几篇没有详细信息的帖子的首页上，历史不会被加载。

`DataLoader`您可以在实例化对象时注入自定义，`Post`然后在*延迟加载*其他数据时调用该加载器。

作为替代方案，您也可以使用[`ProxyPattern`](http://en.wikipedia.org/wiki/Proxy_pattern)which 给您一些类似的行为。

# java - 打开 Ms-Dos 编辑器并保存文件的批处理文件

> ID：11912925
> 
> 赞同：1
> 
> 时间：2012-08-11T07:34:49.383
> 
> 标签：java, character-encoding, dos

当我需要打开一个`*.dat`文件并通过 MS-DOS 编辑器将其保存回来时，我遇到了这种情况。我正在考虑创建一个`*.bat`文件，然后`*.bat`使用我的 java 应用程序执行该文件，但它不起作用。

**在 DOS 编辑器中再次保存的原因是：**

由于某种原因`*.dat`，我创建的文件与特定软件不兼容，当我使用 MS-DOS 编辑器保存它时，它可以正常工作。

那么如何创建一个`*.bat`文件来执行此操作，或者是否有其他更好的方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:14:05.813

可能是您的行尾字符不兼容。一些应用程序需要换行符（ascii 10），一些应用程序需要回车符（ascii 13），而回车符后跟换行符可能是 DOS 文本文件（ascii 13 和 10）中最常见的。大多数应用程序将接受其中任何一个，但有些应用程序只会将这三个中的一个识别为行尾。

# java - 在无限滚动 2D 游戏中检测碰撞的最佳方法是什么？

> ID：11912926
> 
> 赞同：1
> 
> 时间：2012-08-11T07:34:50.570
> 
> 标签：java, android, collision

我正在开发一个 android 2D 游戏，其中涉及无限运行和跳跃到很高的高度。我正在尝试实现一个修改后的哈希网格来回收它的单元格，但是我越深入它，我就越觉得它会很慢。我还使用哈希网格来参考要渲染和生成的内容。我的问题是，是否有任何系统可以满足我的需求？或者也许是一些有效使用网格的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:10:14.273

You might want to have a look to [Box2D](http://box2d.org/) I had to take care of a game with some collisions in the past, but it was in Java so I could work perfectly with awt.geom library, which is not available in Android.

Another approach would be to work with [Rect](http://developer.android.com/reference/android/graphics/Rect.html) and detecting collisions with "contains" and "intersect".

# iphone - 使用 Cocos2D 进行黑白（像素）检查

> ID：11912932
> 
> 赞同：0
> 
> 时间：2012-08-11T07:35:14.413
> 
> 标签：iphone, cocos2d-iphone

我正在尝试使用 Cocos2D 创建一个可破坏的世界，并且我对该主题进行了一些阅读，但我真的不知道如何让它正常工作。

我目前有一个非常简单的测试；屏幕为黑色，触摸将使用 CCRenderTexture 在触摸位置绘制一个白色圆圈。

这是我的测试：

```
// Get the black background

- (CCSprite *)sprite
{
    CGSize winSize = [CCDirector sharedDirector].winSize;
    self.renderTexture = [CCRenderTexture renderTextureWithWidth:winSize.width height:winSize.height];
    [self.renderTexture beginWithClear:0.0 g:0.0 b:0.0 a:1.0];
    [self.renderTexture end];
    return [CCSprite spriteWithTexture:self.renderTexture.sprite.texture];
}

- (void)generateBackground
{
    background = [self sprite];

    CGSize winSize = [CCDirector sharedDirector].winSize;
    background.position = ccp(winSize.width/2, winSize.height/2);

    [self addChild:background z:-1];
}

// Draw the white circle

- (void)generateExplosionWithTouch:(UITouch *)touch
{
    [self.renderTexture begin];

    CGPoint location = [touch locationInView:touch.view];
    location = [self convertToNodeSpace:location];

    ccDrawCircle(location, 30.0, 5.0, 360, NO);

    [self.renderTexture end];
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch * touch = [touches anyObject];
    [self generateExplosionWithTouch:touch];
} 
```

添加黑色背景后，我添加了一个精灵：

```
CGSize winSize = [CCDirector sharedDirector].winSize;
self.icon = [CCSprite spriteWithFile:@"Icon.png"];
self.icon.position = ccp(winSize.width / 2, winSize.height / 2);
[self addChild:self.icon]; 
```

有没有一种简单的方法可以通过某种像素碰撞检查来检查精灵是否在黑/白区域上？

我以前见过这个问题，但答案总是类似于：“只需检查一个简单的黑白图像，如果它在黑色或白色区域上”，好的，但是如何？:P

谢谢，

瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:17:11.373

如果您想进行像素碰撞检查，您可以在此处找到[包含代码和参考的两部分教程](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)。

一种替代方法可能是：

1.  您使用 CCRenderTexture 进行渲染（就像您现在所做的那样）；

2.  您无需将 CCRenderTexture 添加到您的图层/父节点，而是从中创建一个精灵：

    ```
     return [CCSprite spriteWithTexture:renderTexture.sprite.texture]; 
    ```

    并将这个添加到您的图层/父级。

通过这样做，您将拥有由精灵表示的所有爆炸，然后您可以进行碰撞检查。

顺便说一句，在我建议的方法中，您为每次爆炸创建一个新的 CCRenderTexture。

另一种方法就像您现在所做的那样，即使用一个 CCRenderTexture 并在其中绘制所有内容，同时还保留一个爆炸 CCNode 列表（即，您还向您的图层/父级添加一个 CCNode每次爆炸）。然后你会在 CCNodes 上进行碰撞检测。

# android - Android清单文件中的错误

> ID：11912939
> 
> 赞同：2
> 
> 时间：2012-08-11T07:36:25.853
> 
> 标签：android

我的清单文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.Smsr"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<uses-permission android:name="android.permission.RECEIVE_SMS" />

<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:label="@string/app_name"
    android:targetPackage="com.example.Smsr" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SmsrActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".SimpleSmsReciever" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>
   </application>

 </manifest> 
```

错误是：**smsr 没有指定 android.test.InstrumentationTestRunner 工具或没有在其 AndroidManifest.xml 中声明使用库 android.test.runner** 我这里有两个类，第一个是主要活动，即 smsrActivity，另一个是 simplesmsreciever 类，求助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:39:59.403

您`<uses-library android:name="android.test.runner" />`在应用程序标记中丢失。

有关更多原因和详细知识，请查看上一个问题 [Android Eclipse Plugin: Instrumentation Test Runner not specified](https://stackoverflow.com/questions/1009970/android-eclipse-plugin-instrumentation-test-runner-not-specified)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T09:48:17.520

我想可能是你的问题是你必须设置 minsdk 版本和目标版本。然后它会工作

```
 <uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="20" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T15:57:37.933

尝试将您的应用程序作为 android 应用程序运行。右键单击您的应用程序文件夹并向下运行 --> android 应用程序。

我不知道如何或为什么，但这对我有用:)

# html - img 可见但已禁用

> ID：11912945
> 
> 赞同：0
> 
> 时间：2012-08-11T07:38:01.033
> 
> 标签：html, css, animation, hover

这是我的 HTML 代码：

```
<div class="mitcsinaltunk" style="position:absolute;left:5px;top:3px;text-align: left">
    <div class="triangle"><img src="images/triangle.png"></div>
    <img id="kep1" src="mitcsinaltunk/img1_s.jpg"  class="mitcsinaltunk">
</div> 
```

on`#kep1.hover()`开始一个动画和fadeIn triangle.png。三角形.png 已打开`#kep1`。当我将鼠标放在 triangle.png 上时，会停止`#kep1.hover()`动画。

我可以使三角形可见但禁用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:59:54.480

尝试将您的事件绑定`.hover()`到`.mitcsinaltunk`容器。您的问题有点难以理解（请发布您的 JS），但我的猜测是，当鼠标悬停在 triangle.png 上时，鼠标对原始图像的焦点会丢失，从而停止动画的淡入淡出。绑定到包含元素将解决这个问题。

# c - c中的函数指针（地址和引用运算符对函数的影响）

> ID：11912959
> 
> 赞同：4
> 
> 时间：2012-08-11T07:40:24.417
> 
> 标签：c, types, function-pointers

> **可能重复：**
> [具有不同语义的函数调用](https://stackoverflow.com/questions/11179689/function-call-with-different-semantics)

我正在阅读 C 中的函数指针。我尝试了这个程序：

```
#include <stdio.h>

int foo(void)
{
    printf("At foo.");
    return 0;
}

int main (void)
{
    printf("%p\t%p\t%p\n", &foo, foo, *foo);
    return 0;
} 
```

该程序的输出是：

```
0040138C    0040138C    0040138C 
```

在一维数组`<datatype> <identifier>[N]`中，`identifier`和`&identifier`指向相同的值，但值的性质不同。一个是类型`datatype*`，另一个是指向一维数组的类型指针。类似地，对于函数，`foo`和`&foo`是相同的。但是`*foo`，它的本质是`&foo, foo, *foo`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T07:53:21.560

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:01:52.150

在 C/C++ 中，函数只能以两种方式使用：您可以获取它的地址并且可以调用它。你不能用它做任何其他事情。

所以，`foo`是一个函数本身。C++ 有一个标准转换`4.3 Function-to-pointer conversion`。这意味着`foo`将自动转换为`&foo`. 表示法`&&&&foo`会导致语法错误。

在 C++`5.3.1.1 Unary operators`中，有一种措辞允许使用函数本身的结果来取消引用函数指针。这意味着`*`不应允许多个 '。尽管如此，它们至少在 MSVC 和 GCC 中工作。也许是这样，因为编译器`Function-to-pointer conversion`在取消引用之后立即应用，然后再处理下一个操作。

我没有看到允许多个`*`'s 和不允许多个`&`'s 功能的充分理由。出于某种原因，为`*`和`&`操作实现了不同的逻辑。

You can try to cast `foo` to `char*` and dereference this pointer. It will contain bytes of the machine code. The length of these bytes is unknown. Read/write protection of this address is unknown too. Many CPU architectures allow setting execute bit without setting read and write bits. So, you can call the function but an attempt to read at this address may result in a crash.

# sql-server - 必须在 SQL Server 存储过程中声明标量变量

> ID：11912973
> 
> 赞同：0
> 
> 时间：2012-08-11T07:42:54.717
> 
> 标签：sql-server, stored-procedures

我有一个存储过程，它检索多行 3 列项目。我正在以 DataTable 的格式检索。当我调试它时，它给了我错误

> 必须声明标量变量@Ticket。

但我已经宣布了。

存储过程：

```
BEGIN

Declare @Ticket Numeric(28,0)
Declare @SQL VarChar(Max)
Declare @SQLUpdate VarChar(Max)

 Set @SQL='Select @Ticket=Ticket,VendorTicket[Vendor Ticket],Comments From dbo.VendorTickets Where NotifyOn <= GetDate() And IsNull(NotifyOn,0)<>0 '
 Exec(@SQL)

 Set @SQLUpdate='Update dbo.VendorTicket Set NotifyOn=0 Where Ticket=@Ticket'
 Exec(@SQLUpdate)

END 
```

调用存储过程的代码

```
SqlConnection oConn = null;
DataTable dtReturn = null;
try
{
getConnection(ref oConn, 1);
using (SqlStoredProcedure sspObj = new SqlStoredProcedure("dbo.usp_checkNotification", oConn, CommandType.StoredProcedure))
{
dtReturn = sspObj.ExecuteDataTable();
sspObj.Dispose();
}
closeConnection(ref oConn);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:57:03.257

为什么要使用动态 SQL？

就这样做

```
 Update dbo.VendorTickets
 Set NotifyOn=0 
 Where NotifyOn <= GetDate() 
 And NotifyOn IS NOT NULL 
```

请注意，将日期时间 (NotifyOn) 设置为 0 会将其设置为 1900-01-01。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:17:51.257

```
Select @Ticket=Ticket,VendorTicket[Vendor Ticket],Comments From dbo.VendorTickets Where NotifyOn <= GetDate() And IsNull(NotifyOn,0)<>0 
```

意味着您选择的结果将写入变量@Ticket，因此@Ticket 必须是表变量，但您声明@Ticket Numeric(28,0)。你可以通过下一个 sql 脚本做你想做的事：

```
Update dbo.VendorTicket 
Set NotifyOn=0 
Where Ticket in (
      Select Ticket 
      from dbo.VendorTickets 
      Where NotifyOn <= GetDate() And IsNull(NotifyOn,0)<>0
      ) 
```

# oracle - 如何使用查找

> ID：11912978
> 
> 赞同：1
> 
> 时间：2012-08-11T07:43:58.907
> 
> 标签：oracle

查找表：-

```
FROM_METER  TO_METER    COST
1             5         0.004
6             10        0.006
11            20        0.012 
```

需要的输出：-（这里对于 15 和 7，例如成本输出将来自查找主机）

```
METER  COST
15     0.012
7      0.006 
etc.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:18:33.073

查找表通常用于为常规数据提供代码或参考值。假设您的业务表是您称为 MASTER 的表，您可以将其记录加入到您的查找中，如下所示：

```
select m.meter
       , l.cost
from master m
      join lookup l
            on ( m.meter between l.meter_from and l.meter_to) 
```

* * *

您的数据模型似乎有问题：它不能保证 MASTER 表中的每个 METER 都会在查找表中找到匹配的记录。这就是为什么更常见的方法是使用类型或类别（比如“便宜”、“合理”、“昂贵”）。

显然，在不了解您的业务规则的情况下，我很难说您的模型是否正确，但您可能应该考虑如果 MASTER 表没有匹配的行该怎么办。也许这种关系是在应用程序中强制执行的，但根据我的经验，这种方法很难做到万无一失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T08:11:23.740

```
select ? Meter, cost from Lookup 
where ? > = FROM_METER  
and  ? < = TO_METER 
```

`?`用您的参数替换。

# excel - 如何根据 SPSS 或 excel 中的计数器批量复制行

> ID：11912987
> 
> 赞同：0
> 
> 时间：2012-08-11T07:45:41.903
> 
> 标签：excel, spss

我遇到的问题是这样的：

我有一个数据库，其中包含一长串患者的 X 光片和相关信息，按患者 ID 排序。我想做的是找到每个患者进行第一次 X 光检查的时间，我想为这些患者的每张 X 光片填写这个时间。问题是每个患者经常有多个 X 射线，我不确定如何将数据从另一列复制到我的 timeOfFirstXray 列中。

例如; （对不起我的格式很差）

**ptid** ...dateandtimeofxray ..... **dateandtimeof1stXRAY**

**4** ........2011 年 1 月 21 日 4:30 ...... 2011 年 1**月 21 日 4:30**

**4** .......2011 年 2 月 22 日 5:11 ...... **2011 年 1 月 21 日 4:30**

**4** .......25/5/2011 5:00 ...... **21/1/2011 4:30**

**5** .......2000 年 7 月 29 日 3:00 ...... 2000 年**7 月 29 日 3:00**

**5** .........2000 年 7 月 30 日 4:00 ...... **2000 年 7 月 29 日 3:00**

**5** ........ 2000 年 7 月 31 日 5:00 ...... **2000 年 7 月 29 日 3:00**

**5** .........2000 年 1 月 8 日 1:00 ...... **2000 年 7 月 29 日 3:00**

**6** .........2002 年 1 月 9 日 2:00 ...... 2002 年 1**月 9 日 2:00**

**8** ........ 2008 年 3 月 10 日 3:23 ...... 2008 年 3 月**10 日 3:23**

**8** .........2008 年 4 月 10 日 5:00 ...... 2008 年 3 月**10 日 3:23**

**8** ........ 2008 年 5 月 10 日 9:00 ...... 2008 年 3 月**10 日 3:23**

我的伪代码是：

将计数器设置为 0，将每行的日期变量初始化为第一行的日期值，如果 counter < patientID，counter++ 直到与 id 相等，则将日期变量设置为该行中的日期值，并将该值设置为该行的 timeOfFirstXray。否则，如果计数器 == 患者 ID，则将日期变量中的现有值复制到该行的 timeOfFirstXray

我以前从未使用过 SPSS 或 excel 来处理这类东西，所以基本上我要找的是上面的翻译。

谢谢你的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:29:27.730

这是一个 SPSS 选项。

```
`do if (missing(lag(ptid)) 或 ptid ne lag(ptid))。
计算 1stxray 的日期和时间 = xray 的日期和时间。
万一。
离开 1stxray 的日期和时间。`

```

这假定输入数据集中不存在 dateandtimeof1stxray。

HTH，乔恩·派克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:23:15.900

这是一个 Excel 选项。假设您的数据从第 2 行开始，请在 C2 中输入此公式并向下复制。请注意，这是一个数组公式，必须使用 Ctrl-Shift-Enter 输入。（如果操作正确，您会在公式周围看到花括号。）然后根据需要向下复制：

```
=MIN(IF(($A$2:$A$12=A2)*($B$2:$B$12),$B$2:$B$12)) 
```

![在此处输入图像描述](../Images/a7f2ebf5bd6a4ee2a37c16b629d7ab99.png)

调整您的范围以适合您的数据。请注意，即使它们在源数据中未按时间顺序排列，它也会获取最早的日期。

如果您对公式背后的逻辑感兴趣，请参阅我博客上的这篇文章[。](http://yoursumbuddy.com/the-best-min-function-i-think/)

如果您只想显示最小值，您可以通过使用 Excel 中的数据透视表（此处显示 Excel 2010）来完成类似于 Andy W 上述评论的操作。关键是“将值显示为”Min：

![在此处输入图像描述](../Images/3534604c3e07be5bb034bc2d7e1afcc2.png)

# jquery-ui - 将 jquery 插件绑定到 ajax 加载的内容

> ID：11912988
> 
> 赞同：1
> 
> 时间：2012-08-11T07:45:56.223
> 
> 标签：jquery-ui, jquery

我在我的网站上使用了 sortable/portlet jquery ui 插件。在通过 ajax 加载页面后，我加载了一些框。但它们看起来不像是在页面加载时出现的框。我知道通过 ajax 加载和绑定问题的问题。但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:21:55.457

您的 ajax 调用有一个成功方法，您可以使用该方法绑定到已动态添加的元素。

例如你可以做

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
   $(".column").sortable({ connectWith: ".column", cursor: 'crosshair' });
  }
}); 
```

# spring - ObjectMapper 没有正确处理 UTF-8？

> ID：11912990
> 
> 赞同：3
> 
> 时间：2012-08-11T07:46:53.440
> 
> 标签：spring, character-encoding, jackson

我正在使用 ObjectMapper 将系统中的帖子序列化为 json。这些帖子包含来自世界各地的条目并包含 utf-8 字符。问题是 ObjectMapper 似乎没有正确处理这些字符。例如，字符串“Musée d'Orsay”被序列化为“Mus?©e d'Orsay”。

这是我正在执行序列化的代码：

```
public static String toJson(List<Post> posts) {
        ObjectMapper objectMapper = new ObjectMapper()
            .configure(Feature.USE_ANNOTATIONS, true);
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try {
            objectMapper.writeValue(out, posts);
        } catch (JsonGenerationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JsonMappingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return new String(out.toByteArray());
    } 
```

`List<Post> posts`有趣的是，当我使用@ResponseBody 使用以下配置通过请求处理程序返回它时，完全相同的序列化得很好：

```
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    ObjectMapper m = new ObjectMapper()
        .enable(Feature.USE_ANNOTATIONS)
        .disable(Feature.FAIL_ON_UNKNOWN_PROPERTIES);
    MappingJacksonHttpMessageConverter c = new MappingJacksonHttpMessageConverter();
    c.setObjectMapper(m);
    converters.add(c);
    super.configureMessageConverters(converters);
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:30:56.573

除了转换之外，如何将流程简化为：

```
return objectMapper.writeValueAsString(posts); 
```

这加快了流程（无需从 POJO 到字节到数组再到解码到 char 以构建字符串）以及（更重要的是）缩短代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T08:12:01.837

不到10分钟后，我发现了问题。问题不在于 ObjectMapper，而在于我如何将 ByteArrayOutputStream 转换为字符串。我将代码更改如下，一切都开始工作：

```
try {
        return out.toString("utf-8");
    } catch (UnsupportedEncodingException e) {
        return out.toString();
    } 
```

# c# - 如何从另一个类的面板中隐藏表单？

> ID：11912993
> 
> 赞同：0
> 
> 时间：2012-08-11T07:47:18.377
> 
> 标签：c#, .net, winforms, panel

我想使用以下代码在 panel1（表单内容）中隐藏一个表单：

```
frmChangePassword frmChangePassword = new frmChangePassword();
frmChangePassword.Hide(); 
```

没有运气。这是我在面板中显示的代码：

```
//SHOW CHANGEPASSWORD FORM
if (isChangePasswordActive == false)
{
     isChangePasswordActive = true;
     frmChangePassword frmChangePassword = new frmChangePassword();
     frmChangePassword.TopLevel = false;
     frmChangePassword.Parent = this.panel1;
     frmChangePassword.Show();   
} 
```

有没有办法清除面板中的内容并在同一面板中显示新表单？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:17:49.983

您正在创建密码表单的新实例。您需要获取当前实例，然后将其隐藏。我能想到的方法有两种：

1.  保留您创建的 frmChangePassword 对象以显示表单并在该对象上调用 hide 方法。您可能必须更改该对象的范围。

2.  使用 Application.OpenForms 集合获取打开的密码表单实例并将其隐藏。

我会采用第一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:08:15.030

好吧，问题是您正在创建一个*新*表单，然后将面板隐藏在该表单上。您可以判断，因为您使用了`new`关键字：

```
frmChangePassword frmChangePassword = new frmChangePassword();
frmChangePassword.Hide();  // affects the ^^ NEW instance ^^ you just created!! 
```

所以代码实际上工作得很好，因为它完全按照它应该做的事情，它只是没有产生你想要的结果，即隐藏表单的*现有实例*上的面板。

这有点棘手，因为您必须找到一种方法来获取对表单现有实例的引用。为了告诉您如何重新设计代码来做到这一点，我必须查看更多代码。通常，您编写此代码的方法（需要进行隐藏的方法）将采用类型`Form`（甚至`frmChangePassword`）的参数，调用者将传入要修改的表单的当前实例。

# javascript - 绘制许多六边形并扭曲它们

> ID：11912997
> 
> 赞同：1
> 
> 时间：2012-08-11T07:47:43.930
> 
> 标签：javascript, html, canvas

我正在开始一个网页游戏，我想知道最好的方法。

游戏是从上面看到的六边形区域，可以旋转/倾斜。

最好的方法是什么？我要做的是使用画布并使用 2d 变换来模拟 3d 旋转，问题是：

1.  游戏必须在智能手机上运行
2.  每次旋转我都必须重绘所有画布，屏幕上可能有 200 个六边形要重绘多次，所以我认为画布在资源方面太贵了......

![六边形](../Images/f316a91c2add58dd86426d5cca2ca02d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:34:26.740

我能想到的方法有两种：

*   仅使用画布。这意味着相当广泛的浏览器支持，很少有怪癖并且通常“正常工作”。潜在问题：像你提到的低端机器上的性能。但是轮换游戏对游戏玩法至关重要吗？如果没有，您可以考虑在速度较慢的智能手机上将其关闭。如果它对游戏玩法不重要，用户很可能不会错过该功能。

*   画布和 CSS3 变换的组合（[旋转立方体示例](http://www.paulrhayes.com/experiments/cube-3d/)）。可以为您提供比纯画布解决方案更好的性能。潜在问题：需要“混合”技术，这总是意味着遇到意外问题或怪癖的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:47:49.630

你应该看看 www.kineticjs.com

Canvas 是绘制 100 种形状的方法，因为它不会像 SVG 那样为每条路径写入 DOM。

它有几个示例，其中以编程方式绘制了 1000 多个形状。我最近在这里将它用于类似的动画：

[http://movable.pagodabox.com](http://movable.pagodabox.com)

# macos - 在 OS X 上编译 fsevent 时找不到 stdio.h

> ID：11912998
> 
> 赞同：2
> 
> 时间：2012-08-11T07:47:47.873
> 
> 标签：macos, gem

尝试安装 rb-fsevent gem 时得到这个：

```
fsevent/fsevent_watch.c:1:10: fatal error: 'stdio.h' file not found
#include <stdio.h>
         ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:47:47.873

运行此命令：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/ 
```

然后编译将起作用。