# StackOverflow 问答 10920000-10920999

# php - 根据用户输入的 ghost/unghost 字段

> ID：10920003
> 
> 赞同：1
> 
> 时间：2012-06-06T18:29:38.350
> 
> 标签：php, javascript, jquery, forms, user-interface

所以这是我的问题：我正在创建一个非常简单的用户输入表单，除了某些字段并不总是相关的。例如，如果用户正在添加临时员工，则用户需要输入到期日期（员工离开的日期）。否则，如果工作人员是常客，则存在该字段是不合逻辑的。或者该字段可能存在，并且只是“幻影”（不确定这是否是实际术语）。问题是......我绝对不知道 jquery 或 javascript！如果有人对此问题有解决方案，他们介意发布我可以遵循的模板/示例吗？这对我很有帮助！如果没有，任何关于如何在 PHP/html 中做的提示（如果可能的话）也会很好。我非常感谢任何建议，谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:40:34.047

感谢您的建议，但这并不是我想要的。我自己做了一些谷歌搜索，并想出了一段简单的代码。

因此，对于不懂 Javascript 但想要创建这种效果的人来说，这里有一个简单的解决方案：

第一位由 Jcubed 贡献（见下文）。它创建一个简单的下拉菜单，根据用户输入的内容“锁定”文本框

```
</td> <td><select name="employee_type" onchange="document.getElementById('otherField').disabled=(this.value == 0)">
<option value=1>Option 1</option>
<option value=0>Option 2</option> 
```

最后一点是创建在用户单击文本框时消失的不透明字母的部分：

```
<input id="otherField" type="text" name="date_expires" value="What you want to appear in the text..." style="color:#aaa; font-style:italic;" onclick="this.value=''; this.style.color='#000'; this.style.fontStyle='normal';" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:51:09.673

您需要`onchange`在字段中添加一个来确定是否要禁用另一个字段。

例子：

```
<select onchange="document.getElementById('otherField').disabled=(this.value == 0)">
    <option value=1>Enable other field</option>
    <option value=0>Disable other field</option>
</select>

<input id='otherField' />​​​​​​​​​ 
```

[http://jsfiddle.net/xB8CP/](http://jsfiddle.net/xB8CP/)

# java - HttpInvokerProxyFactoryBean中的spring动态域

> ID：10920004
> 
> 赞同：0
> 
> 时间：2012-06-06T18:29:46.290
> 
> 标签：java, spring

我是 Spring 及其 bean 注入框架的新手，我需要有关如何使用它们的建议。目前我有以下，

```
<beans>   
    <bean id="citationService" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
        <property name="serviceUrl" value="http://localhost:8080/PPDFWeb/hello.htm"/>
        <property name="serviceInterface" value="test_client.HelloService"/>
        <property name="httpInvokerRequestExecutor">
            <bean class="org.springframework.security.remoting.httpinvoker.AuthenticationSimpleHttpInvokerRequestExecutor">
             </bean>
        </property>
    </bean>

</beans> 
```

现在我需要服务 url 的域名是动态的，所以我可以在我的代码中以编程方式设置它。有没有办法让 bean 在 xml 中保持原样并更改 bean 的 serviceUrl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:37:45.407

只需将其标记为：

```
<property name="serviceUrl" value="{serviceURL}"/> 
```

编辑：

SO上有太多可用的解决方案，我之前没有好好搜索：

1.  [将动态属性列表读入 Spring 托管 bean](https://stackoverflow.com/questions/5274362/reading-a-dynamic-property-list-into-a-spring-managed-bean)

2.  [HttpInvokerProxyFactoryBean-set-url-动态](http://forum.springsource.org/showthread.php?25269-HttpInvokerProxyFactoryBean-set-url-dynamically)

# forms - 将自定义选项传递给 symfony2 表单

> ID：10920006
> 
> 赞同：27
> 
> 时间：2012-06-06T18:29:47.833
> 
> 标签：forms, symfony

在 symfony 1.4 中，可以通过表单的选项参数化表单类定义。有没有办法将自定义选项传递给我的自定义表单类型？？？我尝试使用该`buildForm`方法的 options 参数，但我不太确定这个数组是什么，显然它不是我想要的......谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-11T22:44:38.777

解决方案很简单，如果您希望您的自定义选项也可以在 Twig 模板中使用，您也必须使用 方法`$builder->setAttribute()`中的`buildForm`方法和 `$view->set()`方法中的`buildView()`方法。

```
<?php

namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType as FormAbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;

// For Symfony 2.1 and higher:
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

/**
 * ImagePreviewType
 *
 */
class ImagePreviewType extends FormAbstractType
{

    /**
     * {@inheritDoc}
     * For Symfony 2.0
     */
    //public function getDefaultOptions(array $options)
    //{
    //    $options = parent::getDefaultOptions($options);
    //    $options['base_path'] = 'path/to/default/dir/';
    //
    //    return $options;
    //}

    /**
     * {@inheritDoc}
     * For Symfony 2.1 and higher
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'base_path'         => '',
        ));
    }

    /**
     * {@inheritDoc}
     */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        // For Symfony 2.0:
        // $view->set('base_path', $form->getAttribute('base_path'));

        // For Symfony 2.1 and higher:
        $view->vars['base_path'] = $options['base_path'];
    }

    /**
     * {@inheritDoc}
     */
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->setAttribute('base_path', $options['base_path'])
        ;
    }

    /**
     * {@inheritDoc}
     */
    public function getName()
    {
        return 'image_preview';
    }

    public function getParent(array $options)
    {
        // for Symfony 2.0:
        // return 'field';

        // for Symfony 2.1 and higher:
        return 'form';
    }
} 
```

自定义表单类型的模板（文件 ...Acme/DemoBundle/Resources/views/Form/fields.html.twig）：

```
{% block image_preview_widget %}
{% spaceless %}
<img src="{{ base_path ~ value }}" alt=""  {{ block('widget_container_attributes') }} />
{% endspaceless %}
{% endblock %} 
```

在 app/config/config.yml 中为自定义表单类型注册您的模板

```
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    form:
        resources:
            - 'AcmeDemoAdminBundle:Form:fields.html.twig' 
```

用法：在编辑他的个人资料时显示用户图像的预览：

```
// src/Acme/DemoBundle/Form/Type/UserType.php
namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class UserType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('user_profile_image_file_name', new ImagePreviewType(), array(
            'base_path' => 'some/other/dir',
        ));
    }
} 
```

**2014-08-18：为 Symfony 2.1 或更高版本更新**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-06T21:47:59.917

**更新：**请注意，此解决方案仅适用于 Symfony 2.0.x，它已过时，使用`setDefaultOptions`而不是`getDefaultOptions`.

* * *

恰如其分，Symfony 2 表单类型接受选项，您可以在表单类型中使用您想要的任何内容。您需要覆盖`getDefaultOptions`方法来指定您的类型选项。

例如，我有一个`MyCustomType`接受的类型`my_option`，这个选项有一个默认值`false`，的实现`MyCustomType`可以是这样的。

```
class MyCustomType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        if($options['my_option']){
            //do something
        } else {
            //do another thing
        }
        ...
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'my_option' => false
        );
    }

    public function getName()
    {
        return 'mycustomtype';
    }
} 
```

稍后，您将需要在控制器中创建表单时指定选项，使用的第三个参数`buildForm`：

```
$form = $this->buildForm(new MyCustomType(), null, array(
    'my_option' => true
)); 
```

如果您未指定该`my_option`选项，则它采用默认值 ( `false`)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-05T20:07:40.067

使用 symfony 2.8，我成功地使用了扩展该`configureOptions()`方法的建议解决方案。

```
class ElementType extends AbstractType
{
    // ...

    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'my_custom_option_parameter' => null,
        ));
    }
} 
```

我需要使用`ElementType`, 作为集合和嵌入式表单。我认识到不可能将 传递`my_custom_option_parameter`给`CollectionType`，因为我不是自定义`configureOptions()`的`CollectionType`，而是我的`ElementType`. 如果您需要`my_custom_option_parameter`通过. `CollectionType`_ [_](http://symfony.com/doc/current/reference/forms/types/collection.html#basic-usage) _`my_custom_option_parameter``entry_options``CollectionType`

`my_custom_option_parameter`通过 a 的示例`CollectionType`：

```
class OuterFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    { 
        //...
        $builder->add('elements', CollectionType::class, array(
            'entry_type' => ElementType::class,
            // ...
            'entry_options' => array(
                'my_custom_option_parameter' => 'value is now set!'
            )
        ));
        //...
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-28T21:55:57.210

基于@pulzarraider 的回答，我为 Symfony 3 创建了带有更改的代码。

你需要改变

`OptionsResolverInterface`为了`OptionsResolver`

`FormBuilder`为了`FormBuilderInterface`

就我而言：

```
namespace MediaBundle\Form;

use Symfony\Component\Form\AbstractType as FormAbstractType;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\Extension\Core\Type\TextareaType;
use Symfony\Component\Form\FormBuilderInterface;

class ImageType extends FormAbstractType {

    public function configureOptions(OptionsResolver $resolver) {
        $resolver->setDefaults(array(
            'max_images' => ''
        ));
    }

    public function buildView(FormView $view, FormInterface $form, array $options) {

        $view->vars['max_images'] = $options['max_images'];
    }

    public function buildForm(FormBuilderInterface $builder, array $options) {

        $builder
                ->setAttribute('max_images', $options['max_images'])
        ;
    }

    public function getName() {
        return 'image_preview';
    }

    public function getParent() {
        return TextareaType::class;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-20T19:07:15.597

使用 Symfony 3，我可以通过在注入到我的表单类型类的 configureOptions 方法中的 OptionsResolver 中设置默认选项来将自定义选项传递给表单：

在控制器中：

```
//Compile whatever your options are here. Assume an array is returned
$customOptions = $this->getMyCustomOptions($args);
//Build the form:
$form = $this->createForm(MyCustomFormType::class, array('my_custom_options' => $customOptions)); 
```

MyCustomFormType.php：

```
public function configureOptions(OptionsResolver $resolver)
{
    $resolver->setDefaults([
        'data_class' => DataModel::class,
        'my_custom_options' => []
    ]);
}
//custom options is now set in "$options" array:
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder->add('my_custom_fields', Type\ChoiceType::class, [
       'choices' => $options['my_custom_options'],
       'mapped' => false //if not part of the data model.
       . . . 
```

因此，看起来您可以与表单和数据提供者定义合同以在表单上设置任意数据。

我刚刚成功实施了这个程序。请注意，在回程中，由于您已`'mapped' => false,`在 formBuilder 中设置，`$form->getData()`因此不会返回选择。要获取选定的值：

```
$mySelectedValue = $form->get('my_custom_options')->getViewData(); 
```

在您的控制器中。为什么这是我无法理解的。. .

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-06T21:17:09.993

我尝试使用该选项`array`但没有成功，因为它似乎只能携带少量的预定义键子集。无论如何，这对我来说是不可接受的......

但是，您可以通过 forms`__construct`方法传递所有选项并将其存储在类属性中以供以后使用。然后，`buildForm`您可以使用`$this->"propertyName"`...访问它

由您决定是否要将单个`array`或几个变量传递给`__construct`...

这只是一个粗略的例子：

```
class Foobar{
    private $update = false;

    public function __construct($update = false){
        $this->update = $update;
    }

    public function buildForm(FormBuilder builder, array options){
        if ( $update ){
            // something
        }else{
            // well, this is not an update - do something else
        }
    }
} 
```

# php - PHP unix时间戳到UTC zend框架

> ID：10920007
> 
> 赞同：0
> 
> 时间：2012-06-06T18:29:53.090
> 
> 标签：php, datetime, cookies, timestamp, session-cookies

好的，这可能是一个简单的问题，也许我在想这一切都错了。谁知道。

无论如何，我正在使用 Zend Framework，并且我第一次尝试在其中使用 cookie。因此，据我了解，Zend 中的 cookie 使用如下格式：

> 2005 年 2 月 28 日星期三 20:41:22 UTC

为过期。因此，我试图弄清楚如何`time()`将其转换为上述类似`date()`的变体，即未来 2 小时和 UTC。但就像我说的，我想我想多了，所以我需要确认。

我的想法是

```
$cookie_expire = time()+7200;
$cookie_expire = date('l, d-M-y H:i:s Z', $cookie_expire); 
```

我想说这是正确的，但是我脑海中的某些东西并不适合这个概念，所以希望有人能告诉我我是否同意这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:45:14.810

[http://php.net/manual/en/function.gmdate.php](http://php.net/manual/en/function.gmdate.php)

请参阅 Glen @ 2007 年 12 月 4 日 04:32 的评论：

```
This routine can help obtain a UTC timestamp:

<?php
$utc_str = gmdate("M d Y H:i:s", time());
$utc = strtotime($utc_str);
?> 
```

将 替换为`time()`您要转换的时间戳。

# android - 不幸的是，Android WebService 已停止

> ID：10920009
> 
> 赞同：0
> 
> 时间：2012-06-06T18:29:57.537
> 
> 标签：android, eclipse

我是 android 编程新手，并且开发了这个应用程序，它接受 Kg 中的参数并使用 Web 服务将其转换为克，但是在模拟器上运行时，应用程序显示“不幸的是 Android WebService 已停止”，并且显示 logcat 中的主要问题“找不到 org.ksoap2.serialization.SoapObjectare” 虽然我已经包含了“ksoap2-android-assembly-2.5.4-jar-with-dependencies” jar 文件...请帮助

这是我的代码：

```
package com.sencide;

private final String NAMESPACE = "http://www.webserviceX.NET/";
private final String URL = "http://www.webservicex.net/ConvertWeight.asmx";
private final String SOAP_ACTION = "http://www.webserviceX.NET/ConvertWeight";
private final String METHOD_NAME = "ConvertWeight";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    String weight = "3700";
    String fromUnit = "Grams";
    String toUnit = "Kilograms";

    PropertyInfo weightProp =new PropertyInfo();
    weightProp.setName("Weight");
    weightProp.setValue(weight);
    weightProp.setType(double.class);
    request.addProperty(weightProp);

    PropertyInfo fromProp =new PropertyInfo();
    fromProp.setName("FromUnit");
    fromProp.setValue(fromUnit);
    fromProp.setType(String.class);
    request.addProperty(fromProp);

    PropertyInfo toProp =new PropertyInfo();
    toProp.setName("ToUnit");
    toProp.setValue(toUnit);
    toProp.setType(String.class);
    request.addProperty(toProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try 
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        Log.i("myApp", response.toString());

        TextView tv = new TextView(this);
        tv.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);
        setContentView(tv);

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:57:47.960

将 jar 添加到“libs”文件夹而不是 lib 文件夹，然后添加到构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:43:08.540

您是否已将 JAR 添加到您的构建路径中？

在您的包资源管理器中，右键单击 JAR 文件并选择：构建路径 > 添加到构建路径

另外，如果你只是做一个简单的转换，你为什么要使用 WebService？这可以在不连接到互联网的情况下更快地完成......只需我额外的两美分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:14:48.210

我做了同样的事情并解决了 Java Build Path 选项，Order And Export 选项卡中 kosoap2 库上的问题检查复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T02:00:56.063

我做了如下：

1.  将 jar 添加到“libs”文件夹，然后添加到构建路径。
2.  在 Java Build Path 选项，Order And Export 选项卡中选中 kosoap2 库上的复选框。

问题就解决了。

# asp.net-mvc-3 - 用于我的 ASP.NET MVC 应用程序和性能问题的 WCF 或简单库类

> ID：10920012
> 
> 赞同：1
> 
> 时间：2012-06-06T18:30:06.550
> 
> 标签：asp.net-mvc-3, wcf, iis, n-tier-architecture

我在我的应用程序架构中工作，我想知道是否应该使用 WCF。UI 将是一个用 ASP.NET MVC 3 编写的公共网站，但将来可能是 Iphone/Android 应用程序......所以现在我有一个数据层（实体框架 + 存储库）、业务层（类库）和 UI（ASP .NET MVC）通过 ViewModel 进行通信。

我知道在一个好的 SOA 应用程序中，业务层应该作为 Web 服务公开，但我想知道性能问题，因为我的网站流量会很高，并且在同一台机器上托管 WCF 和 IIS 中的网站是浪费时间以及性能，因为要进行通信，它们必须序列化/反序列化对象。

将我的业务层保存在 dll（类库）中并将其部署在 ASP.NET 应用程序中比在 wcf 服务中加热它更好吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:40:59.780

[http://geekswithblogs.net/BlackRabbitCoder/archive/2010/06/13/premature-optimization-and-performance-anxiety.aspx](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/06/13/premature-optimization-and-performance-anxiety.aspx)

我认为，在您确定对 iphone/android 解决方案的要求之前，现在将其保留为 dll 将是最简单的解决方案。我们在我工作的地方广泛使用 WCF，而且速度非常快。

也就是说，如果您以后可能需要它来创建 WCF 服务似乎还为时过早，而且以后添加 Web 引用并删除 dll 总是很容易。您无法轻松地收回花费在 WCF 服务上的时间（以及在应用程序及其数据之间不必要地添加另一层的风险）。

# jquery - 滚动到#id + 100 像素

> ID：10920014
> 
> 赞同：6
> 
> 时间：2012-06-06T18:30:13.497
> 
> 标签：jquery, html

我在浏览器顶部有一个静态菜单，当有人点击链接时，菜单位于文本上方。

我这样做了，但`scrollTop`不起作用：

```
jQuery(document).ready(function () {
    $('a[href^="#"]').click(function()
    {
        var sHref = this.href.split("#"); 
        $("#"+sHref[1]).scrollTop($("#"+sHref[1]).scrollTop() + 100); // <- does not work
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-31T03:53:02.657

您不需要拆分`href`属性，因为它已经包含`#`（您在选择器中检查）。

```
$(function() {
    // Desired offset, in pixels
    var offset = 100;
    // Desired time to scroll, in milliseconds
    var scrollTime = 500;

    $('a[href^="#"]').click(function() {
        // Need both `html` and `body` for full browser support
        $("html, body").animate({
            scrollTop: $( $(this).attr("href") ).offset().top + offset 
        }, scrollTime);

        // Prevent the jump/flash
        return false;
    });
}); 
```

此外，为了使编辑更容易，您可以将偏移量从 更改`100`为`$('menu_element').height()`。如果您更改了菜单，则无需编辑 JS 即可使用。

# java - Eclipse 崩溃：“发生错误。请参阅日志文件”

> ID：10920016
> 
> 赞同：1
> 
> 时间：2012-06-06T18:30:21.737
> 
> 标签：java, eclipse, ide

当我启动 Eclipse 时，它​​会崩溃并显示以下消息。

```
An error has occurred.  See the log file
/home/binoy/.eclipse/org.eclipse.platform_3.7.0_155965261/configuration/1339005865980.log 
```

这是`1339005865980.log`：

```
$ cat /home/binoy/.eclipse/org.eclipse.platform_3.7.0_155965261/configuration/1339005865980.log
!SESSION Wed Jun 06 23:34:25 IST 2012 ------------------------------------------
!ENTRY org.eclipse.equinox.launcher 4 0 2012-06-06 23:34:25.991
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.InternalError: internal error: SHA-1 not available.
    at sun.security.provider.SecureRandom.init(SecureRandom.java:105)
    at sun.security.provider.SecureRandom.<init>(SecureRandom.java:84)
    at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:186)
    at java.security.SecureRandom.<init>(SecureRandom.java:150)
    at java.io.File$LazyInitialization.<clinit>(File.java:1681)
    at java.io.File.generateFile(File.java:1694)
    at java.io.File.createTempFile(File.java:1803)
    at org.eclipse.equinox.launcher.Main.canWrite(Main.java:1290)
    at org.eclipse.equinox.launcher.Main.checkConfigurationLocation(Main.java:691)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:568)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

这里有什么问题？任何想法？我正在使用 Ubuntu 12.04 和 OpenJDK 1.7.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T23:46:53.033

我通过卸载并重新安装 OpenJDK 来修复它。

```
sudo apt-get purge openjdk-6-jre
sudo apt-get install openjdk-6-jre 
```

# java - 为什么这段代码不能正常工作？

> ID：10920019
> 
> 赞同：1
> 
> 时间：2012-06-06T18:30:31.890
> 
> 标签：java, regex, pattern-matching, substring, matcher

为什么这个代码：

```
String keyword = "pattern";
String text    = "sometextpatternsometext";
String patternStr = "^.*" + keyword + ".*$"; //
Pattern pattern = Pattern.compile(patternStr, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(text);
while (matcher.find()) {
    int start = matcher.start();
    int end = matcher.end();
    System.out.println("start = " + start + ", end = " + end);
} 
```

> 开始 = 0，结束 = 23

不能正常工作。

但是，这段代码：

```
String keyword = "pattern";
String text    = "sometext pattern sometext";
String patternStr = "\\b" + keyword + "\\b"; //
Pattern pattern = Pattern.compile(patternStr, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(text);
while (matcher.find()) {
    int start = matcher.start();
    int end = matcher.end();
    System.out.println("start = " + start + ", end = " + end);
} 
```

> 开始 = 9，结束 = 16

工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T18:33:07.693

它*确实*有效。你的图案

```
^.*pattern.*$ 
```

说匹配：

1.  从头开始
2.  接受任意数量的字符
3.  后跟字符串`pattern`
4.  后跟任意数量的字符
5.  直到字符串的结尾

结果是整个输入字符串。如果您只想找到单词`pattern`，那么正则表达式将只是单词本身，或者如您所见，用单词边界元字符括起来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T18:34:03.313

并不是第一个示例不起作用，而是您无意中要求它匹配的内容超出了您的预期。

表达式扩展为包含“pattern”之前的`.*`所有字符和pattern 之后的所有字符，因此整个表达式匹配整行。

在您的第二个示例中，您只指定它匹配“模式”之前和之后的空格，因此表达式*主要*匹配模式，加上几个空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:36:13.993

问题出在您的正则表达式中：`"^.*" + keyword + ".*$"`

表达式`.*`匹配字符串中的字符数。这意味着它实际上匹配整个字符串。在整个字符串之后，它找不到您的关键字。

为了让它工作，你必须让它变得贪婪，即在后面添加问号`.*`：

`"^.*?" + keyword + ".*$"`

这次`.*?`匹配最少字符数，后跟您的关键字。

# git - 替换git中的master分支并防止快进

> ID：10920023
> 
> 赞同：2
> 
> 时间：2012-06-06T18:30:56.773
> 
> 标签：git

我在 github 上有一个库，大约一年前，我完全重写了不向后兼容的应用程序。它位于一个名为“结构化”的分支上。现在大多数安装图书馆的人都在使用该分支，我想让它成为主人并将当前主人移动到“旧版”。

我不希望旧主人的人能够快进到新主人，因为这肯定会破坏他们的应用程序。是否可以将它们转移到遗留分支，或者至少抛出异常并显示一条消息告诉他们签出遗留分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:54:28.233

除非你实现一个钩子，否则我认为这是不可能的，但这可能不值得。

我想我只是在我的服务器上克隆存储库，保留旧存储库原样，如果需要，拉错误修复并为新的“结构化”库创建另一个存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:55:41.163

没有办法转移它们，因为 Git 分支只是标签：没有办法判断新`master`分支与旧分支有什么不同。

`master`我认为如果客户不希望它破坏它们，那么从分支克隆是一个坏主意。为此，您应该有发布分支或标签，然后人们可以从中克隆，他们会知道他们有一个稳定的分支，该分支只能获得向后兼容的更新（如果是分支）或永远不会更改（如果一个标签）。

至于警告，这也是不可能的，因为当有人从服务器上获取数据时，没有任何钩子可以放在服务器上运行（仅用于推送）。你必须在你的 GitHub 页面上清楚地写出来。

另一个想法是修改最后一次提交`master`，使其不再是旧的快进`master`；并以引起冲突的方式进行。这样，每当有人与老主人拉扯时，他们就会发生冲突，并且必须检查发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:06:44.403

至于你问题的“转移”部分，你总是可以做这样的事情作为新主人的第一次提交：

```
#ifndef IMPLEMENTED_STRUCTURED
#error "The master branch of project x has been completely rewritten and will break legacy applications.  If you are unable to update your application, switch to the legacy branch of this project and your code should continue working as before.  If you want to use the new structured code, simply add a preprocessor definition for IMPLEMENTED_STRUCTURED to get rid of this error message."
#endif 
```

这将阻止任何人的代码成功编译，直到他们阅读消息并决定他们想要采取的行动方案。

希望如果您不使用 C/C++，您的语言具有可以实现类似行为的功能。

# mysql - 有效删除重复行

> ID：10920025
> 
> 赞同：1
> 
> 时间：2012-06-06T18:31:02.280
> 
> 标签：mysql, sql

我有一个包含 2800 万条记录的表，但现在它有 5600 万条记录，因为我假设该`load local infile`命令会忽略表中已经存在的行。不，我需要一种有效删除重复行的方法。解决这个问题的最佳方法是什么？

如果我不想碰我的桌子，我可以通过这个语句选择唯一的行：

```
select distinct (l1.lat, l2.lon) from A, B; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:35:23.310

将原件选择到新/临时表中，删除 5600 万条记录，插入您的原件。

示例： INSERT INTO new_fresh_table SELECT a, b, c, d FROM table_with_dupes GROUP BY a, b, c, d

如果您以某种方式丢失了您的 ID（不确定如何使用 PK），您需要`GROUP BY`在每一列上使用。写一个`SELECT`反对元数据来`SELECT`为你写你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:40:07.620

您没有指定记录是如何被欺骗的。是主键吗？姓名？什么？

来自 O'Reily 的[SQL Cookbook](http://shop.oreilly.com/product/9780596009762.do)（强烈推荐，即使对于 SQL 专业人士也是如此）：

```
delete from dupes
  where id not in ( select min(id) from dupes group by name ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:03:47.057

如果您不能触摸表格，而不得不使用它，为什么不创建一个只显示不同记录的视图呢？

# python - 输出不同步之前的Python / Pexpect

> ID：10920035
> 
> 赞同：0
> 
> 时间：2012-06-06T18:31:36.163
> 
> 标签：python, pexpect

我正在使用 Python/Pexpect 向多个路由器生成 SSH 会话。该代码适用于一个路由器，但 session.before 的输出将与某些路由器不同步，因此它将返回前一个发送线路的输出。发送空行 (sendline()) 时尤其如此。有人有什么想法吗？任何见解将不胜感激。

以下是我所看到的示例：

```
ssh_session.sendline('sh version')
while (iresult==2):
    iresult = ssh_session.expect(['>','#','--More--'],timeout=SESSION_TIMEOUT)
    debug_print("execute_1 " + str(iresult))
    debug_print("execute_bef " + ssh_session.before)
    debug_print("execute_af " + ssh_session.after)

    thisoutput = ssh_session.before
    output += thisoutput

    if(iresult==2):
        debug_print("exec MORE")
        ssh_session.send(" ")
    else:
        debug_print("exec: end loop")

for cmd in config_commands:
    debug_print("------------------------------------------------\n")
    debug_print ("running command " + cmd.strip() + "\n")
    iresult=2
    ssh_session.sendline(cmd.strip())
    while (iresult==2):
        iresult = ssh_session.expect([prompt+">",prompt+"#"," --More-- "],timeout=SESSION_TIMEOUT)
        thisoutput = ssh_session.before
        debug_print("execute_1 " + str(iresult))
        debug_print("execute_af " + ssh_session.after)
        debug_print("execute_bef " + thisoutput)
        thisoutput = ssh_session.before
        output += thisoutput

        if(iresult==2):
           debug_print("exec MORE")
           ssh_session.send(" ")
        else:
           debug_print("exec: end loop")

I get this:

logged in
exec: sh version
execute_1 1
execute_bef 
R9
execute_af #
exec: end loop
------------------------------------------------

running command config t

execute_1 1
execute_af #
execute_bef sh version
Cisco IOS Software, 1841 Software (C1841-IPBASEK9-M), Version 15.1(4)M4, RELEASE SOFTWARE (fc1)
Technical Support: http://www.cisco.com/techsupport... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T07:42:51.113

我遇到了类似的问题。我尝试等待命令打印在屏幕上并发送输入。

我你想执行说命令'cmd'，然后你做：

```
 session.send(cmd)
    index = session.expect([cmd, pexpect.TIMEOUT], 1)
    session.send('\n')
    index = session.expect([whatever you expect]) 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:43:54.097

我以前用 pexpect 遇到过这个问题（我试图记住我是如何解决它的）。

您可以通过发送返回然后在循环中等待提示来重新与终端会话同步。当期望超时时，您就知道您已同步。

根本原因可能是您是：

*   在没有匹配期望的情况下调用发送（因为您不关心输出）

*   运行一个产生输出的命令，但期望在该输出中间有一个模式，然后不到输出末尾的下一个提示。解决此问题的一种方法是将您的期望模式更改为“(.+)PROMPT” - 这将一直期待到下一个提示并捕获发送的命令的所有输出（您可以在下一步中解析）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T19:43:25.417

我不确定这是您问题的根源，但可能值得一试。

我遇到的情况是，当您生成一个以 shell 开头或将您置于 shell 中的会话时，您必须处理 TERM 类型的怪癖（vt220、color-xterm 等）。您将看到用于移动光标或更改颜色的字符。几乎可以保证问题会随着提示出现；由于颜色更改的处理方式，您正在寻找用于识别提示的字符串出现两次（发送提示，然后编码退格，更改颜色，然后再次发送提示......但期望看到两个实例迅速的）。

这是处理这个问题的东西，保证是丑陋的，hacky，不是很 Pythonic 和功能：

```
import pexpect

# wait_for_prompt: handle terminal prompt craziness
#   returns either the pexpect.before contents that occurred before the 
#   first sighting of the prompt, or returns False if we had a timeout
#
def wait_for_prompt(session, wait_for_this, wait_timeout=30):
    status = session.expect([wait_for_this, pexpect.TIMEOUT, pexpect.EOF], timeout=wait_timeout)
    if status != 0:
        print 'ERROR : timeout waiting for "' + wait_for_this + '"'
        return False
    before = session.before # this is what we will want to return
    # now look for and handle any additional sightings of the prompt
    while True:
        try:
            session.expect(wait_for_this, timeout=0.1)
        except:
            # we expect a timeout here. All is normal. Move along, Citizen.
            break # get out of the while loop
        return before

s = pexpect.spawn('ssh me@myserver.local')
s.expect('password') # yes, we assume that the SSH key is already there
                     # and that we will successfully connect. I'm bad.
s.sendline('mypasswordisverysecure') # Also assuming the right password
prompt = 'me$'
wait_for_prompt(s, prompt)
s.sendline('df -h') # how full are my disks?
results = wait_for_prompt(s, prompt)
if results:
    print results
    sys.exit(0)
else:
    print 'Misery. You lose.'
    sys.exit(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T13:44:42.420

我知道这是一个旧线程，但我在网上没有找到太多关于这个的信息，我只是通过自己的快速和肮脏的解决方法解决了这个问题。我还使用 pexpect 来运行网络设备列表并记录统计信息等，而且我的 pexpect.spawn.before 有时也会不同步。由于某种原因，这种情况经常发生在更快、更现代的设备上。

我的解决方案是在每个命令之间写一个空回车，并检查 .before 变量的 len() 。如果它太小，则意味着它只捕获了提示，这意味着它必须至少是实际 ssh 会话后面的一个命令。如果是这种情况，程序会发送另一个空行来将我想要的实际数据移动到 .before 变量中：

```
def new_line(this, iteration):
    if iteration > 4:
        return data
    else:
        iteration+=1
        this.expect(":")
        this.sendline(" \r")
        data = this.before
        if len(data) < 50:
        # The numer 50 was chosen because it should be longer than just the hostname and prompt of the device, but shorter than any actual output
            data = new_line(this, iteration)
        return data

def login(hostname):
    this = pexpect.spawn("ssh %s" % hostname)
    stop = this.expect([pexpect.TIMEOUT,pexpect.EOF,":"], timeout=20)
    if stop == 2:
        try:
            this.sendline("\r")
            this.expect(":")
            this.sendline("show version\r")
            version = new_line(this,0)
            this.expect(":")
            this.sendline("quit\r")
            return version
        except:
            print 'failed to execute commands'
            this.kill(0)
    else:
        print 'failed to login'
        this.kill(0) 
```

我通过一个递归命令来完成此操作，该命令将调用自身，直到 .before 变量最终捕获命令的输出，或者直到它调用自身 5 次，在这种情况下它只是放弃了。

# php - PHP 表单处理和浏览器行为

> ID：10920041
> 
> 赞同：2
> 
> 时间：2012-06-06T18:31:55.290
> 
> 标签：php, mysql, html

我在 php 页面上有一个表单，一旦提交、处理并且用户转到另一个页面，然后返回到表单所在的页面（通过点击浏览器上的“返回”按钮）或刷新页面，浏览器告诉用户请求的页面已过时，并提示下载页面的新副本并重新提交信息，因为浏览器不缓存敏感信息......类似的东西。表单的操作属性设置为它在同一页面上。那么，如果没有这种浏览器行为，如何完成刷新页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:34:52.427

提交表单后，您应该通过重定向清除 $_POST 数据，例如

```
header('Location: http://www.example.com/'); 
```

这将防止再次发送相同的数据，称为[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# javascript - 通过 JS (PhoneGap) 存储来自 GET 请求的数据

> ID：10920042
> 
> 赞同：1
> 
> 时间：2012-06-06T18:31:56.290
> 
> 标签：javascript, cordova, get

我想从 Amazon S3 服务器获取数据（音频文件），并将其存储在便携式设备的本机文件系统中。

我将使用 PhoneGap ( [PhoneGap - Wiki - Filesystem](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html) ) 来存储数据，但我如何发出 GET 请求并处理返回的文件并将其保存到文件系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:15:01.853

以下一组函数可能会有所帮助：

```
function onDeviceReady() {
    console.log("device is ready");
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function fail() {
    console.log("failed to get filesystem");
}

function gotFS(fileSystem) {
    console.log("got filesystem");

    // for later use
    window.fileSystem = fileSystem;

    // Create your app specific dir here
    fileSystem.root.getDirectory(".myapp", {
        create: true,
        exclusive: false
    },
    dirReady, fail);
}

function dirReady(entry) {
    // for later use
    window.appRootDir = entry;
    console.log(JSON.stringify(window.appRootDir));

    var fileToDownload = "http://....";
    var fileName = "file name";
    downloadToAppRoot(fileToDownload, fileName,
    function() {},
    function() {});
}

function downloadToAppRoot(url, name, success, failure) {
    var fileTransfer = new FileTransfer();
    var filePath = window.appRootDir.fullPath + "/" +  name;
    fileTransfer.download(
    url,
    filePath,
    function(entry) {
        console.log("download complete: " + entry.fullPath);
        success(entry);
    },
    function(error) {
        console.log("download error source " + error.source);
        if (failure) failure(error);
    }
    );
} 
```

PhoneGap 具有广泛的文件系统 API 来创建目录和文件。[有关更多详细信息，您可以在此处](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer)查看 PhoneGap 文档

# javascript - Javascript 选择框样式示例（无 Javascript 框架依赖）

> ID：10920052
> 
> 赞同：0
> 
> 时间：2012-06-06T18:32:57.903
> 
> 标签：javascript

我真的很喜欢这样的项目：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)但他们使用 jQuery，这不是我所在项目的选项。我只需要一个样式选择框的常规 Javascript 示例，但我找不到。有谁知道不依赖于 Javascript 框架的？

编辑：既然有人认为他们应该关闭这个问题，那么这个问题如何：您能否提供一个示例，说明如何使用 Javascript 来模拟带有 html/css 的选择框并仍然从选择框中获取表单值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:21:35.620

如果您的网站是 HTML5，您可以使用与 jQuery 选择的插件（ HTML5 规范中[的 datalist 元素](http://www.w3.org/TR/html5/the-datalist-element.html#the-datalist-element)`<datalist>`）基本相同的元素。

问题是它远未在所有现代浏览器中实现，而且我知道没有不依赖 jQuery 的 polyfill（但你总是可以使用这个[后备解决方案](http://adactio.com/journal/4272/)让它优雅地降级）。

# jquery - 对象函数 (a,b){return new e.fn.init(a,b,h)} 没有方法 'cookie'

> ID：10920055
> 
> 赞同：11
> 
> 时间：2012-06-06T18:33:07.600
> 
> 标签：jquery, cookies

尝试获取 a 的值（如果它的集合）并用该值`cookie`更新 a ，否则生成一个介于 80-100 之间的随机数，将其设置为，然后更新.`div``cookie``cookie``div`

我收到错误：

```
Object function (a,b){return new e.fn.init(a,b,h)} has no method 'cookie' 
```

这是我的代码：

```
$(document).ready(function(){

    var thecounter = '';

    if ($.cookie('thecounter') == null)
    {
        thecounter = $.randomBetween(80, 100);
        $.cookie('thecounter', thecounter, { path: '/' });
    }
    else
    {
        thecounter = $.cookie('thecounter');
    }

    $('dd-counter-num').html(thecounter);

    setTimeout(newtime, 5000);

});

function newtime () {

    var newtime = $.cookie('thecounter') + $.randomBetween(1, 2);
    $.cookie('thecounter', newtime, { path: '/' }); 
    $('dd-counter-num').html(newtime);
    setTimeout(newtime, 5000);

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T18:37:15.540

*标准*[jQuery](http://docs.jquery.com/Main_Page)中没有`cookie`方法。

 *也许代码需要[jquery-cookie](http://archive.plugins.jquery.com/project/Cookie)或其他插件？

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T15:47:46.997

确保在任何标准 jquery 引用之后引用 jquery.cookie.js。

> *[我在使用Foundation](http://foundation.zurb.com/)编辑页面时遇到了这个错误。它首先加载 jquery，然后是 jquery.cookie.js，然后是foundation.min.js 文件。我没有意识到自定义的foundation.min.js 文件已经内置了jquery，所以再次执行JQuery 会导致cookie javascript 失败。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T03:40:58.987

1）从GitHub下载这个插件：[https ://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)

2）把它放在你的脚本文件夹中。

3）将其包含在您的网站上：

`<script src="~/Scripts/jquery.cookie.js" type="text/javascript"></script>`

为我工作。*

# javascript - 复杂的javascript代码，我可以删除它吗？或者它有什么作用？

> ID：10920057
> 
> 赞同：0
> 
> 时间：2012-06-06T18:33:11.157
> 
> 标签：javascript, magento

在我的网站 www.theprinterdepo.com 中，您可以查看页面源代码，我的 seo 咨询建议我将代码移至外部文件。

它是一个建立在 magento 上的电子商务网站。它是一个免费的开源工具，所以我没有开发它，我只是安装了它。

我需要知道代码的作用。

```
window.HDUSeed='c7025284683262a8eb81056c48968d74';
window.HDUSeedIntId = setInterval(function(){
    if (document.observe) {
        document.observe('dom:loaded', function(){
            for (var i = 0; i < document.forms.length; i++) {
                if (document.forms[i].getAttribute('action') &&  document.forms[i].getAttribute('action').match('contacts/index/post')) {
                    var el = document.createElement('input');
                    el.type = ('hidden');
                    el.name = 'hdu_seed';
                    el.value = window.HDUSeed;
                    document.forms[i].appendChild(el);
                }
            }
        });
        clearInterval(window.HDUSeedIntId)
    }
}, 100); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:47:52.577

# 简单来说

[该脚本每隔](https://developer.mozilla.org/en/DOM/window.setInterval)100 毫秒左右调用一个函数（[因为不能保证](https://stackoverflow.com/questions/985670/will-setinterval-drift)），以尝试验证 DOM 的加载状态以在其上添加一个钩子。

如果加载，它会处理页面中存在的所有表单，寻找具有“动作”属性的表单（通常在某个地方提交，这里`contacts/index/post`）。

对于找到的所有此类表单，它添加了一个包含“种子”值的新隐藏输入元素，但如果不了解代码库的更多信息，我们无法告诉您它的用途。

# 详细的代码审查

```
// seed value, purpose unknown
window.HDUSeed='c7025284683262a8eb81056c48968d74';

// invoke this function every 100ms
//   see: https://developer.mozilla.org/en/DOM/window.setInterval
window.HDUSeedIntId = setInterval(function(){
    // checks if document.observe method exists (added by the Prototype
    // JavaScript library, so we use this here to check its presence or
    // that it's been already loaded)
    if (document.observe) {
        // hook on load status (when the page's DOM has finished loading)
        //   see: http://www.prototypejs.org/api/document/observe
        document.observe('dom:loaded', function(){
            // process all forms contained within the page's context
            //   see: https://developer.mozilla.org/en/DOM/document.forms
            for (var i = 0; i < document.forms.length; i++) {
                // only act on forms with the 'contacts/index/post/' action attribute
                //   see: https://developer.mozilla.org/en/DOM/document.forms
                //   and: https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match
                if (document.forms[i].getAttribute('action') && 
                    document.forms[i].getAttribute('action').match('contacts/index/post')) {
                    // create an element...
                    //   see: https://developer.mozilla.org/en/DOM/document.createElement
                    var el = document.createElement('input');
                    el.type = ('hidden');              // ... that is hidden
                    el.name = 'hdu_seed';              // w/ name 'hdu_seed'
                    el.value = window.HDUSeed;         // and the seed value
                    document.forms[i].appendChild(el); // and add it to the end of the form
                }
            }
        });
        // Remove the interval to not call this stub again,
        // as you've done what you want.
        // To do this, you call clearInterval with the ID of the
        // interval callback you created earlier.
        //   see: https://developer.mozilla.org/en/DOM/window.clearInterval
        clearInterval(window.HDUSeedIntId)
    }
}, 100); // 100ms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:48:00.087

看起来像是对外部事物的某种澄清。我的意思是像谷歌分析这样的服务。请记住，如果您为您的网站使用任何第三方服务。如果不是，我建议您删除它，看看会发生什么。如果出现问题或其他问题，只需将代码恢复到文档中即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T18:48:26.367

该代码查找其操作为联系人/索引/发布的表单，并尝试添加一个名为“hdu_seed”的隐藏字段。它看起来像是一种**反垃圾邮件措施**，可能服务器希望收到它，如果它不存在，则忽略它。这样，不使用 javascript 的机器人将不会包含此字段，并且表单可能会失败。

编辑：实际上一点也不复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T18:48:08.653

不知道`setInterval`,`clearInterval`和`observe`函数在这里做什么是逻辑的粗略轮廓

`setInterval`使用函数和整数调用`100` 该函数检查`observe`函数是否已在 this 中加载，`document` 如果已加载，则`observe`使用`dom:loaded`参数和函数调用该函数并调用该`clearInterval`函数，否则不执行任何操作

内部函数循环遍历`form`文档中的每一个。循环检查`action`属性的形式。如果它存在并包含字符串，`contacts/index/post`那么它会使用of和 a创建一个隐藏`input`元素，然后 将此元素附加到.`name``hdu_seed``value``window.HDUSeed``form`

# iis-7 - url 重定向工作，但重写显示空白页

> ID：10920059
> 
> 赞同：0
> 
> 时间：2012-06-06T18:33:16.287
> 
> 标签：iis-7, iis-7.5

我创建了一个规则来重写这个“http://192.111.111.111:8020/1B3KC46K48N6228671/20120524/1B3KC46K48N62286711_l1.jpg”

至

“http://192.111.111.111:8020/1B3KC46K48N62286711_l1.jpg?vin=1B3KC46K48N6228671&dt=20120524”

规则是：

```
 <rule name="Redirect VIN">
      <match url="^(\w*)/(\d*)/(\w*.jpg)$" />
      <action type="Rewrite" url="{R:3}?vin={R:1}&amp;dt={R:2}" />
 </rule> 
```

当将上述规则应用为**“重定向”时，它的工作绝对正常**。但是当应用为**“重写”时，它不起作用并显示空白页。**

任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:48:06.940

这是我的建议。它未经测试，因为我目前无法访问测试机器：

```
<rule name="Redirect VIN">
     <match url="^(\w+)/(\d+)/(\w+\.jpg)$" />
     <action type="Rewrite" url="/{R:3}?vin={UrlEncode:{R:1}}&amp;dt={UrlEncode:{R:2}}" />
</rule> 
```

我已经用 and 替换了你的and ，`\w*`使它至少需要一个字符（次要的东西）。我还进行了更改以使其与点字面意思匹配，否则点将被解释为正则表达式字符，这意味着匹配任何字符。`\d*``\w+``\d+``.jpg``\.jpg`

我认为您的主要问题是重写 URL 应该以`/`. 此外，我添加了`{UrlEncode{...}}`正确编码参数（不是您的示例的问题，但以防万一）。我认为这应该可行，尽管正如我所说，我无法对其进行测试。

# asp.net-mvc - 如何将相同 url 的 PUT 和 DELETE 请求路由到不同的控制器方法

> ID：10920061
> 
> 赞同：0
> 
> 时间：2012-06-06T18:33:20.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url-routing, asp.net-mvc-routing

我正在寻找这个问题的答案，发现[这个问题](https://stackoverflow.com/q/2143884/304832)确实非常相似。但是，那里发布的解决方案似乎对我不起作用……我想知道这是否与问题的年龄有关。

给定以下网址：

```
/my/items/6 
```

我希望此 URL 的 HTTP PUT 请求由一种操作方法处理，而 HTTP DELETE 请求由另一种操作方法处理。以下是我定义的路线（请注意，这些路线是基于一个区域，如果重要的话，`context`也是一个实例）：`AreaRegistrationContext`

```
context.MapRoute(null,
    "my/items/{id}",
    new { area = "AreaName", controller = "ControllerName", action = "Replace" },
    new
    {
        httpMethod = new HttpMethodConstraint("POST", "PUT"),
    }
);

context.MapRoute(null,
    "my/items/{id}",
    new { area = "AreaName", controller = "ControllerName", action = "Destroy" },
    new
    {
        httpMethod = new HttpMethodConstraint("POST", "DELETE"),
    }
); 
```

URL 生成适用于这两种路由，但是在路由传入请求时会出现问题。只有第一个声明的路由正确映射到其各自的操作。

我深入研究了`HttpMethodConstraint`源代码，发现它不关心`"X-HTTP-Method-Override"`参数，只关心`HttpContext.Request.HttpMethod`.

我能够使用以下自定义路由约束类解决此问题：

```
public class HttpMethodOverrideConstraint : HttpMethodConstraint
{
    public HttpMethodOverrideConstraint(params string[] allowedMethods) 
        : base(allowedMethods) { }

    protected override bool Match(HttpContextBase httpContext, Route route, 
        string parameterName, RouteValueDictionary values, 
        RouteDirection routeDirection)
    {
        var methodOverride = httpContext.Request
            .Unvalidated().Form["X-HTTP-Method-Override"];

        if (methodOverride == null)
            return base.Match(httpContext, route, parameterName, 
                values, routeDirection);

        return 
            AllowedMethods.Any(m => 
                string.Equals(m, httpContext.Request.HttpMethod, 
                    StringComparison.OrdinalIgnoreCase))
            &&
            AllowedMethods.Any(m => 
                string.Equals(m, methodOverride, 
                    StringComparison.OrdinalIgnoreCase))
        ;
    }
} 
```

...以及这些路线定义：

```
context.MapRoute(null,
    "my/items/{id}",
    new { area = "AreaName", controller = "ControllerName", action = "Replace" },
    new
    {
        httpMethod = new HttpMethodOverrideConstraint("POST", "PUT"),
    }
);

context.MapRoute(null,
    "my/items/{id}",
    new { area = "AreaName", controller = "ControllerName", action = "Destroy" },
    new
    {
        httpMethod = new HttpMethodOverrideConstraint("POST", "DELETE"),
    }
); 
```

**我的问题：真的有必要有一个自定义路由约束来完成这个吗？**或者有什么方法可以使其与标准 MVC 和路由类开箱即用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:41:34.257

动作过滤器是你的朋友...

[HttpDeleteAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpdeleteattribute.aspx)、[HttpPutAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpputattribute.aspx)、[HttpPostAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute.aspx)、[HttpGetAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpgetattribute.aspx)

# python - 通过 crontab 调度 python 脚本

> ID：10920062
> 
> 赞同：1
> 
> 时间：2012-06-06T18:33:27.603
> 
> 标签：python, unix, cron, crontab

我正在尝试使用以下几行将 python 脚本添加到 crontab：

```
0 * * * * /pathtoexecutable/file.py
0 0 1 * 1 /pathtoexecutable/file2.py 
```

文件是可执行的 python 脚本。

`file.py`进一步启动大约 15 个子进程，这些子进程将信息存储在 MySQL 数据库中。

`file2.py`显然，也可以通过 crontab 执行。

由于某种原因`file.py`不能通过 crontab 工作，但如果我通过命令行运行它，它就可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:37:26.513

1）捕捉你的脚本的输出和错误：。

```
0 * * * * /pathtoexecutable/file.py &>> /path/some/log.txt
0 0 1 * 1 /pathtoexecutable/file2.py &>> /path/some/log2.txt 
```

2) 确保每个 python 文件都以 shebang 开头：#! /usr/bin/env 蟒蛇

3) 还要确保每个 python 文件都有一个 exec 模式 (chmod +x file.py)

# objective-c - 使用数字代码 (JSON) 比较项目

> ID：10920069
> 
> 赞同：0
> 
> 时间：2012-06-06T18:34:14.923
> 
> 标签：objective-c, xcode, json, dropbox

在我的应用程序中，用户可以创建组。当用户创建组时，会在 Dropbox 上上传一个新文件夹，其中有一个 JSON 文件，如下所示：

```
{"group":"0864798478"} 
```

您看到的代码是通过以下方式随机生成的：

```
NSString *randomKey = [NSString stringWithFormat:@"%0.10u", arc4random()]; 
```

然后我有一个显示所有文件夹（组）的表格视图。但我希望 UITableView 只显示与 iPad 保存的代码匹配的组。

所以如果我有：

```
{"group a":"0864797073"}
{"group b":"0764898478"}
{"group c":"2864758479"} 
```

在 iPad 上有一个包含代码的文件：

```
0864797073 (group a) 
```

表视图仅显示该组，而不是全部。

我怎样才能做到这一点？？

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:04:42.993

您可以使用 JSONKit 或 SBJson 来解析 JSON 文件并获取带有数据的 NSDictionaries。然后你可以创建一个 NSDictionary，你可以保存比较以前字典的结果，然后使用 tableView:cellForRowAtIndexPath 方法在表中显示结果。或者，在方法 tableView:cellForRowAtIndexPath 中进行比较。祝你好运！

编辑：

如果文件显示：

```
{"group a":"0864797073"} 
```

你解析它并得到一个字典，其中“组 a”将是 KEY，NSString“0864797073”将是值。因此，要将包含 a 组的字典与包含 b 组的字典进行比较，您必须这样做：

```
if([[firstParsedJson objectForKey:@"group a"] isEqualToString:[secondParsedJson objectForKey:@"group b"]])
{
   //Do some stuff...
} 
```

其中 firstParsedJson 和 secondParsedJason 是 NSDictionaries，它们表示已解析的 json，例如 SBJson。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:00:02.590

正如 Luis 所提到的，SBJson 是允许您使用 Objective-C 解析 JSON 的最简单的框架。您可以解析 JSON 并通过 UITableView 的 CellForRowAtIndexPath 委托方法来显示所有值。如果您在查看 JSON 时遇到任何问题，那么此[链接](http://chris.photobooks.com/json/default.htm)将帮助您更好地了解 JSON 的创建方式。

# ios - iOS 滚动视图子视图

> ID：10920070
> 
> 赞同：0
> 
> 时间：2012-06-06T18:34:18.763
> 
> 标签：ios, uiscrollview, uiimageview

我在 IB 中添加了 3 个滚动视图，然后在我的 viewDidLoad 中调用了一个将 UIImageView 添加到每个子视图的方法。我想放大每个子视图，所以我使用

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{

return [scrollView.subviews objectAtIndex:0];
} 
```

但是在将图像视图添加到子视图之前会调用 viewForZoomingInScrollView。如何解决这个问题？

这是 loadImages 方法：

```
-(void) loadImages{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *imageData1 = [defaults dataForKey:@"image1"];
NSData *imageData2 = [defaults dataForKey:@"image2"];
NSData *imageData3 = [defaults dataForKey:@"image3"];
UIImage *img1 = [UIImage imageWithData:imageData1];
UIImage *img2 = [UIImage imageWithData:imageData2];
UIImage *img3 = [UIImage imageWithData:imageData3];

[self loadImage:img1 toScrollView:scrollViewTop];
[self loadImage:img2 toScrollView:scrollViewLeft];
[self loadImage:img3 toScrollView:scrollViewRight];
}

-(void) loadImage:(UIImage *)image toScrollView:(UIScrollView *)scrollView
{
//scale and rotate image to default
UIImage *scaledImage = scaleAndRotateImage(image);

//create imageview and add image to the view
UIImageView *imageView = [[UIImageView alloc]initWithImage:scaledImage];

CGFloat imageWidth = scaledImage.size.width;
CGFloat imageHeight = scaledImage.size.height;

int scrollWidth = scrollView.frame.size.width;
int scrollHeight = scrollView.frame.size.height;

//Limit by width or height, depending on which is smaller in relation to
//the scrollview dimension.
float scaleX = scrollWidth / imageWidth;
float scaleY = scrollHeight / imageHeight;
float scaleScroll =  (scaleX < scaleY ? scaleY : scaleX);

// scrollView.bounds = CGRectMake(0, 0,imageWidth , imageHeight );
//scrollView.frame = CGRectMake(0, 0, scrollWidth, scrollHeight);

scrollView.delegate = self;

scrollView.contentSize = imageView.frame.size;
scrollView.pagingEnabled = NO;
scrollView.maximumZoomScale = scaleScroll*3;
scrollView.minimumZoomScale = scaleScroll;
scrollView.zoomScale = scaleScroll;

[scrollView addSubview:imageView];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:14:53.613

在配置缩放之前尝试将图像视图添加为子视图。说，在委托分配之前。

`viewForZoomingInScrollView:`被滚动视图的设置器之一调用；从那里查看堆栈跟踪应该会告诉您是哪一个。

# jquery - jquery.json.js 和 Json2.js 可以同时使用吗？

> ID：10920073
> 
> 赞同：1
> 
> 时间：2012-06-06T18:34:36.190
> 
> 标签：jquery, json, internet-explorer

我正在查看其他人制作的应用程序，它是使用“jquery.json.js”插件制作的。

但是我在 IE 7 中遇到这样的错误

> SCRIPT5009：“JSON”未定义

这导致我看到像[json 之类的帖子未定义](https://stackoverflow.com/questions/8332362/script5009-json-is-undefined)使用 json2.js 的说法。

我添加了这个脚本，它确实解决了我的问题。然而，我想知道这两个脚本是否会发生冲突。

jquery.json.js 似乎是我阅读的 json2 的一个端口，但它并没有明显地支持 IE 7。

jquery.json.js 似乎也有额外的方法，因为当我删除它并只使用 json2 时，我得到了一大堆错误，因为该应用程序依赖于 jquery.json.js 中的一些方法，例如`$.secureEvalJSON is not a function`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:40:05.770

是的，他们可以而且应该。json2.js 只是创建了一个全局 JSON 对象，该对象可在除 IE7 之外的大多数现代浏览器上本地使用。首先导入 json2.js **，**因为您的其他脚本需要 JSON 对象。

# java - 范围问题，因此我无法计算百分比。

> ID：10920075
> 
> 赞同：-2
> 
> 时间：2012-06-06T18:34:41.690
> 
> 标签：java, scope

```
import java.util.Random;
import java.util.Scanner; 

public class Carpim {
    Scanner input = new Scanner(System.in); 
    Random myRandom = new Random(); 

    public void determine(){ 

    int trueNumber = 0; 
    int wrongNumber = 0; 
    int total = 0; 
    int answer = 0;

    for (int i = 0; i < 5; ++i){
    int num1 = 1 + myRandom.nextInt(11);
    int num2 = 1 + myRandom.nextInt(11);
    int correctResult = num1 * num2;

    System.out.println( num1 + "*" + num2 + " What is the answer?");
    answer = input.nextInt();

    if (answer == correctResult){ 
        ++trueNumber; 
        ++total;
    }else if (answer != trueNumber){ 
        ++total; 
        ++wrongNumber; 
    }//end if statement

    }//end for loop 

    percentage(total, wrongNumber); 

    }//end method 
    private int percentage(int total, int wrongNumber){ 
        int percentage = (total - wrongNumber)/total; 

        System.out.println(total + " " + wrongNumber + " " + percentage ); 

        return percentage; 
    }//end private method. 

}//End Class 
```

这是我的代码，当我运行此代码时，最后无法计算百分比。但是，它可以计算出 wrongNumber 和总数。你能帮我看看这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T18:36:17.257

用整数除法整数在java中产生整数而不是浮点数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:37:29.703

首先，除以整数将产生一个整数结果 - 丢弃数字的小数部分。您可以通过将代码更改为此来解决此问题：

```
double percentage = (double)(total - wrongNumber)/total; 
```

...然后返回`double`.

此外，您正在丢弃`percentage()`. 我不认为您打算这样做，因此您希望将其保存在方法内部的某种变量中，然后打印或返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:38:52.740

您的私有方法应注意数据类型：

```
private double percentage(int total, int wrongNumber){ 
    double percentage = (double)(total - wrongNumber)/total; 

    System.out.println(total + " " + wrongNumber + " " + percentage ); 

    return percentage; 
}//end private method. 
```

您应该使用浮点数据类型将十进制值保留为 % 值。

如果您想要一种快速将百分比精确到小数点后 2 位的方法，您可以这样做：

```
double percentage = 56.4332893723;
percentage = ((int)(percentage*100))/100.0;    // instant 2-decimal conversion 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:38:10.080

在你的百分比函数中，你有**int**百分比。整数不能包含十进制值和 (total - wrongNumber) / total < 0;

# html - 准备使用 CSS 模板或框架

> ID：10920079
> 
> 赞同：5
> 
> 时间：2012-06-06T18:35:01.127
> 
> 标签：html, css, forms, css-tables

你知道纯 CSS 模板的来源吗？建立一个简单的 Web 项目后，我总是希望有一个 CSS 文件来：

*   为段落和标题设置合理的字体设置
*   擦亮我的锚标签
*   为我的表单设置样式（如果我必须为此触摸 HTML - 没问题）
*   使用偶数和奇数设置我的表格样式（我使用页眉和页脚等）
*   也许给我一些方便的错误框类等。

因此，如果我用 Google 搜索这样的 CSS 文件，我会发现带有 HTML 结构和大量 CSS 的 CSS 主页模板，如果不做太多更改，我就无法使用。我找到了完美表格的 CSS 示例和其他完美表格的示例，但我没有找到单个 CSS 文件，当加载到格式正确的 HTML 网站中时，它看起来“不错”，而不是纯 HTML 外观。

你明白我的意思吗？有人对我有提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:37:12.007

[Twitter Bootstrap](http://twitter.github.com/bootstrap/)可能会让你感兴趣，但我相信它也有一些 javascript。

*编辑：正如评论中提到的，您可以在不使用任何 javascript 的情况下使用许多 Bootstrap 功能。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T18:40:07.573

或许可以试试[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html)的 CSS 。除了一些更花哨的元素行为外，还提供各种简单而优雅的一致样式。

**更新：**

添加到 Yonix 的相关列表中，以下是可选的 CSS 预处理器，这使得使用 CSS 更容易理解：

*   [罗盘](http://compass-style.org/)
*   [手写笔](http://learnboost.github.com/stylus/)

自学 CSS 时会有一些学习曲线，但一些基本的 CSS 比你想象的要容易。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T18:49:25.193

我个人使用过引导程序，我喜欢它。在带宽允许的情况下，我还为其他几个人添加了书签。

*   [引导程序](http://twitter.github.com/bootstrap/)
*   [蓝图](http://blueprintcss.org/)
*   [960格](http://960.gs/)

**更新**：在相关问题上，我还会检查 CSS 预处理器，例如[Sass](http://sass-lang.com/)和[LESS](http://lesscss.org/)，它们可以帮助编写更好的 CSS 并建立一个自定义库以跨项目使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T18:36:52.083

与 Twitter Bootstrap 相比，我使用[Zurb Foundation](http://foundation.zurb.com)进行快速原型设计/线框图和预制 HTML 模板。我的建议是熟悉他们的在线文档并深入研究主要的 CSS 文件（foundation.css）。您可以使用提供的 app.css 文件在该 CSS 文件的基础上进行构建。

它带有许多预制样式（按钮、表单等），并且一切都是响应式的（适合任何尺寸的屏幕）。您可以选择包含所有插件，或仅包含 HTML 和 CSS。它还可以选择下载 HTML 模板，这些模板带有各种布局，例如博客或基本结构。我非常喜欢它！

# ios - 在后台线程上解析来自 WebService 的 JSON 数据

> ID：10920080
> 
> 赞同：2
> 
> 时间：2012-06-06T18:35:01.220
> 
> 标签：ios, multithreading, background

我有一个方法可以构建一个包，将其发送到 Web 服务，取回一个包，打开它并返回一个 nsdictionary。如何在后台队列中调用它以便在请求数据时显示 HUD？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:41:15.187

你可以像下面这样分离一个新线程

```
- (void) fetchData
{
     //Show Hud

    //Start thread
    [NSThread detachNewThreadSelector:@selector(getDataThreaded) 
    toTarget:self  
    withObject:nil];
}

- (void) getDataThreaded
{    
   //Start Fetching data

   //Hide hud from main UI thread
   dispatch_async(dispatch_get_main_queue(), ^{
        //Update UI if you have to
        //Hide Hud
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:28:42.993

大中央调度 (gcd) 为您提出的要求提供了极大的支持。使用 gcd 在后台运行一些东西很简单：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_NORMAL, 0) ^{
   NSDictionary* data = [self fetchAndParseData];

   dispatch_async(dispatch_get_main_queue(), ^{
      [self dataRetrieved:data];
   });
}); 
```

此调用将立即返回（因此您的 UI 将继续响应）并`dataRetrieved`在数据准备好时调用。

现在，根据 fetchAndParse 数据的工作方式，它可能需要更复杂一些。如果您使用 NSURLConnection 或类似的东西，您可能需要创建一个 NSRunLoop 来处理 gcd 线程上的数据回调。NSURLConnection 在大多数情况下无论如何都是异步的（尽管像 didReceiveData 这样的回调将通过 UI 线程进行路由），因此您只能在检索到所有数据后使用 gcd 来解析数据。这取决于您想要的异步程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:25:40.553

除了之前的回复，为什么不用`NSOperation`and`NSOperationQueue`类呢？这些类是 GCD 下的抽象，使用起来非常简单。

我喜欢`NSOperation`类，因为它允许在我通常开发的应用程序中模块化代码。

要设置一个`NSOperation`，你可以像这样子类化它

```
//.h
@interface MyOperation : NSOperation

@end

//.m
@implementation MyOperation()

// override the main method to perform the operation in a different thread...
- (void)main
{
    // long running operation here...
} 
```

现在在主线程中，您可以将该操作提供给队列，如下所示：

```
MyOperation *op = [[MyOperation alloc] initWithDocument:[self document]];
[[self someQueue] addOperation:op]; 
```

PS 你不能在`main`a 的方法中启动异步操作`NSOperation`。完成`main`后，将不会调用与该操作关联的委托。说实话，你可以，但这涉及到处理运行循环或并发行为。

这里有一些关于如何使用它们的链接。

*   [http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)
*   [https://developer.apple.com/cocoa/managingconcurrency.html](https://developer.apple.com/cocoa/managingconcurrency.html)

显然是类[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)`NSOperation`

# python - 在数据库中缓存大型非 unicode 字典？

> ID：10920082
> 
> 赞同：3
> 
> 时间：2012-06-06T18:35:09.963
> 
> 标签：python, mongodb, dictionary, data-dictionary, database

我有一个大字典（输出为 366MB 中的字符串，~383764153 行文件文本文件），我想将其存储在数据库中以便快速访问并跳过填充字典所涉及的计算时间。

我的字典由文件名/内容对字典组成。小子集：

```
{
    'Reuters/19960916': {
        '54826newsML': '<?xml version="1.0"
encoding="iso-8859-1" ?>\r\n<newsitem itemid="54826" id="root"
date="1996-09-16" xml:lang="en">\r\n<title>USA: RESEARCH ALERT -
Crestar Financial cut.</title>\r\n<headline>RESEARCH ALERT - Crestar
Financial cut.</headline>\r\n<text>\n<p>-- Salomon Brothers analyst
Carole Berger said she cut her rating on Crestar Financial Corp to
hold from buy, at the same time lowering her 1997 earnings per share
view to $5.40 from $5.85.</p>\n<p>-- Crestar said it would buy
Citizens Bancorp in a $774 million stock swap.</p>\n<p>-- Crestar
shares were down 2-1/2 at 58-7/8\. Citizens Bancorp soared 14-5/8 to
46-7/8.</p>\n</text>\r\n<copyright>(c) Reuters Limited',
        '55964newsML': '<?xml version="1.0" encoding="iso-8859-1"
?>\r\n<newsitem itemid="55964" id="root" date="1996-09-16"
xml:lang="en">\r\n<title>USA: Nebraska cattle sales thin at
$114/dressed-feedlot.</title>\r\n'
    }
} 
```

我认为[MongoDB](http://www.mongodb.org/)会很合适，但看起来它要求键和值都必须是 Unicode，并且由于我从上面获取文件名，`namelist()`因此`ZipFile`不能保证是 Unicode。

**您如何建议我将这本字典序列化到数据库中？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:59:23.517

pymongo*不需要*字符串是 unicode，它实际上按原样发送 ascii 字符串并将 unicode 编码为 UTF8。从 pymongo 检索数据时，您总是得到 unicode。@@ [http://api.mongodb.org/python/2.0/tutorial.html#a-note-on-unicode-strings](http://api.mongodb.org/python/2.0/tutorial.html#a-note-on-unicode-strings)

如果您的输入包含具有高位字节（如`ab\xC3cd`）的“国际”字节字符串，您需要将这些字符串转换为 unicode 或将它们编码为 UTF-8。这是一个处理任意嵌套字典的简单递归转换器：

```
def unicode_all(s):
    if isinstance(s, dict):
        return dict((unicode(k), unicode_all(v)) for k, v in s.items())
    if isinstance(s, list):
        return [unicode_all(v) for v in s]
    return unicode(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:40:46.117

如果你有内存（你显然有，因为你填充了字典开始）-- `cPickle`。或者，如果您想要一些需要更少 RAM 但会更慢的东西 - `shelve`。

# android - 广播接收器错误自定义意图

> ID：10920086
> 
> 赞同：0
> 
> 时间：2012-06-06T18:35:18.420
> 
> 标签：android, android-intent, broadcastreceiver

我正在做一些我认为很简单的事情，就像过去在 2.3.4 机器人上做过广播接收器一样。我现在在这个小程序中使用 4.x。

这是主要的架构/流程。我希望/有一个接收器来监听自定义广播/意图。我创建了这个作为项目/apk的立场

```
public class FileIntegrityMonitor extends BroadcastReceiver 
{
public String CLASS_NAME = "FileIntegrityMonitor";

@Override
public void onReceive(Context context, Intent intent) 
{
    Log.d(CLASS_NAME, "Entered onReceive: got broadcast from startFIM");

    String actionReceived = intent.getAction();
    Log.d(CLASS_NAME, "Action received=" + actionReceived);

    if (actionReceived.equals(StartFIMActivity.CUSTOM_INTENT))
    {
        //start service to perform the file integrity check
        Log.d(CLASS_NAME, "start service to perform file integrity check");  

    }

} 
```

然后我创建了一个活动作为一个单独的项目/应用程序作为驱动程序，以启动广播接收器。以后可能会用其他东西代替，但现在想把机制/通讯搞定。public class StartFIMActivity extends Activity { /** 首次创建活动时调用。*/ public static final String CUSTOM_INTENT = "com.kdms2.StartFIM.intent.action.start"; 公共字符串 CLASS_NAME = "StartFIMActivity";

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    Log.d(CLASS_NAME, "Entered onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Intent i = new Intent();
    i.addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES); //api  3.1+
    i.setAction(CUSTOM_INTENT);
    Log.d(CLASS_NAME, "send  brodcast to monitor");
    this.sendBroadcast(i);

}
} 
```

现在在跟踪中，我确实在 FileIntegrityMonitor 中得到了意图，但是一条奇怪的消息表明它正在尝试运行某些方法，但我不知道为什么。错误是：E/AndroidRuntime(979): java.lang.RuntimeException: 无法实例化接收器 com.kdms2.FileIntegrityMonitor.StartFIMActivity: java.lang.ClassNotFoundException: com.kdms2.FileIntegrityMonitor.StartFIMActivity

为什么它将广播动作的活动的类名添加到广播接收器？

它是清单（接收者）中的东西吗？

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name=".StartFIMActivity" android:enabled="true">
        <intent-filter android:priority="99999999999">
            <action android:name="com.kdms2.StartFIM.intent.action.start"/>
        </intent-filter>
    </receiver>

</application>

<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>

</manifest> 
```

活动清单

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".StartFIMActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>  

</application>

</manifest> 
```

v/r，弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:40:10.327

您的接收者的名字是`FileIntegrityMonitor`，但在清单中您尝试注册`StartFIMActivity`为`<activity>`and`<receiver>`元素。大概应该是：

```
<receiver android:name=".FileIntegrityMonitor" android:enabled="true">
    <intent-filter android:priority="99999999999">
        <action android:name="com.kdms2.StartFIM.intent.action.start"/>
    </intent-filter>
</receiver> 
```

或者类似的东西。

高温高压

# wcf - Silverlight 和 WCF

> ID：10920087
> 
> 赞同：0
> 
> 时间：2012-06-06T18:35:19.813
> 
> 标签：wcf, silverlight

我有 WCF 查询一个表，从中我得到一个我在数据网格中显示的记录。

如何将该一条记录的列值设置为变量，并使这些变量可用于 Silverlight 应用程序的其余部分？

我正在尝试做的事情：让 WCF 查询一个 SQL 表，将这些结果设置为变量，让图表对这些变量做出反应

请帮忙！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:38:49.550

您的 WCF 调用也应返回当前 DataGrid 正在绑定的类型。您可以使用相同的类型传递给您的图表。换句话说，您不必从 DataGrid 中读回值，您已经拥有从中填充 DataGrid 的值。

# ms-access - 从两种不同的形式添加数字

> ID：10920091
> 
> 赞同：0
> 
> 时间：2012-06-06T18:35:41.657
> 
> 标签：ms-access, vba, ms-access-2003

我想从不同的形式获取数字，将它们相加并以不同的形式显示输出。

例如，有两种表格：表格1和表格2。我需要的信息位于表格1中。所以我从表格1中获取数字，将它们相加并在表格2中显示结果。

我不知道如何在这里进行。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:21:25.597

选择要输出答案的文本框，转到属性>转到数据>控制源>单击“...”并键入以下代码：

Forms!Form_3!Text_3.Value=(Val(Forms!Form_1!Text_1.Value)) / (Val(Forms!Form_2!Text_2.Value))

# html - CSS 背景图像/按钮 - 替代文本 SEO？

> ID：10920094
> 
> 赞同：2
> 
> 时间：2012-06-06T18:35:49.823
> 
> 标签：html, css, seo

我正在努力改进一个糟糕的开发人员编码的旧网站上的 SEO。它由许多通过 CSS 显示的图像`background:`以及按钮组成。我想知道是否有任何包含“ `alt / title`”文本或**其他 SEO 选项来保存此站点**- 无需整个重建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:42:53.390

你也可以使用这个：

```
a {
    background: url('image.png') no-repeat center center transparent;
    display: block;
    text-indent: -9999em;
    overflow: hidden;
} 
```

并将 HTML 编写为：

```
<a href="/">Welcome</a> 
```

由于您将“欢迎”放在`<a>`标签中，因此您可以对 SEO 友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:39:49.743

如果图像未显示，则不能使用图像标签上的传统“alt/title”。

但是您可以向正在设置样式的 div 添加一个“标题”属性。我不确定它会承载多少 SEO 权重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:38:09.360

最好使用真正的 img 标签，而不是依赖 CSS background-image 属性。既然我确定你已经知道了，这里有一些其他的建议！

图像 alt 标签对 SEO 有好处，但仅作为更大策略的一部分。通过创建有价值的内容，您将获得更大的 SEO 提升：博客、在相关论坛和博客上发布链接、更新您的网站副本。

定期更新的博客对您的 SEO 的作用远远超过重建整个网站以向您的图像添加 alt 和标题标签。

您也可以考虑将图像重命名为对 SEO 更友好的名称。例如，像“flapjack.png”这样的东西比“image_01.png”更好。这不会花费太多时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:38:20.250

查看您的元标记、描述和标题属性。让他们更富有

为每个重要的图像添加 alt，为每个 的标题添加标题`<a>`，并尽可能多地添加文本。如果它是 100% 由图像组成的，将很难保存它。

# ruby-on-rails - Ruby on Rails 模型保存 rest_client 没有本地数据库

> ID：10920095
> 
> 赞同：0
> 
> 时间：2012-06-06T18:35:50.503
> 
> 标签：ruby-on-rails, crud, rest-client

我想知道是否有一种“正确”的方式来使用 RoR 的 MVC 通过诸如 rest_client 之类的东西来执行所有 CRUD 操作。我将无权访问数据库，而是休息请求以执行所有 CRUD 操作。

有什么方法可以定义一个模型，该模型包含将在获取时返回的所有 json 数据，并将其放入可以像常规 RoR 应用程序一样使用 Model.Save、Model.Create 等的模型中？

在 ApplicationController 中创建新方法 def save、def create 是否适用？

编辑：rest_client 不是必需的，只是能够在 post、get、delete 和 put 中同时发送基本身份验证。

编辑 2：我唯一的另一个想法是使用 Active Model，但那些没有保存、删除等方法。是否会创建以某种方式与 ActionController::Base 绑定以进行布线的那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:03:10.293

看看activeresource [http://api.rubyonrails.org/classes/ActiveResource/Base.html](http://api.rubyonrails.org/classes/ActiveResource/Base.html)

# cookies - 煎茶碰饼干课

> ID：10920099
> 
> 赞同：1
> 
> 时间：2012-06-06T18:36:09.063
> 
> 标签：cookies, sencha-touch, extjs

在 Ext js 4.0 中，有一个“Cookies”类，我们可以使用它来设置和获取 cookie

在 Sencha 2.0 中，没有这样的类。

我的问题是如何在 Sencha touch 2.0 中设置 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:24:12.133

Ext.util.Cookies 非常简单。它看起来没有任何依赖关系。如果你有 Ext 的许可证或者你的项目是 GPL，那么我想你可以把它复制到你的 Touch 项目中。

# security - 限制 OFbiz 中的 Web 工具访问

> ID：10920102
> 
> 赞同：1
> 
> 时间：2012-06-06T18:36:16.897
> 
> 标签：security, ofbiz

目前，我的 Web 工具前端在 OFBiz 中运行，并且可以从整个世界 (www) 访问，就像电子商务商店一样。我有点不喜欢。虽然它受强密码保护。

我可以限制该应用程序访问某些 IP 地址或仅来自本地主机吗？

如果该应用程序可以完全在不同的端口上运行或仅在 127.0.0.1 接口上侦听，那将是最好的。或两者 ：）

请问有这方面的经验吗？

亲切的问候，鲍里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:57:43.143

我是 Ofbiz 的新手，并且（主要）在 opentaps 环境中工作。从我所看到的情况来看，我不确定您是否可以实现这一点，但也许可以更改 webapp 的挂载点以增加安全性，这样显然无法通过默认的 OOTB 名称访问它。当我自己研究这个问题时，我会在以后回复。顺便说一句，+1。

# visual-studio-2010 - 无法将 Window.NextDocumentWindow 从 Ctrl-F6 重新映射到 Ctrl-PgDn

> ID：10920106
> 
> 赞同：2
> 
> 时间：2012-06-06T18:36:44.540
> 
> 标签：visual-studio-2010, visual-studio

正如标题所说，我做不到。当我这样做时，我按`CTRL`+ `PAGEDOWN`，它只是在源文件中向上/向下翻页。

有谁知道为什么会这样？

# c# - 使用 nhibernate 按日期获取记录，仅进行日部分比较

> ID：10920108
> 
> 赞同：6
> 
> 时间：2012-06-06T18:36:50.347
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我想从特定日期获取所有记录，无论这些记录是什么时间。到目前为止，我有这样的方法：

```
public IQueryable<Record> QueryByDay(DateTime day)
{
    DateTime from = day.Date;
    DateTime to = day.Date.AddDays(1);

    return repository.Table
        .Where(t => t.MyDate >= from && t.MyDate < to);
    } 
```

但是在 linq-to-object 我们可以做（假设 Table 现在是一些集合）：

```
public IEnumerable<Record> QueryByDay(DateTime day)
{
    return repository.Table
        .Where(t => t.MyDate.Date == day.Date);
} 
```

这显然更具可读性，感觉更干净。我想知道是否有更好的方法来编写使用数据库存储和休眠的第一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T12:57:23.403

正如评论中所说，您的 LINQ 查询适用于 NH 3.3。

在早期版本中，您可以使用 HQL：

```
return session.CreateQuery("from MyClass where date(MyDate) = :day")
              .SetParameter("day", day.Date)
              .List<MyClass>(); //executes 
```

您还可以`date`通过 SqlFunction 使用 Criteria 中的函数。这更令人费解，但允许构建更多动态查询：

```
return session.CreateCriteria<Foo>()
              .Add(Restrictions.Eq(
                       Projections.SqlFunction("date",
                                               NHibernateUtil.Date,
                                               Projections.Property("MyDate")),
                       day.Date))
                .List<MyClass>(); //executes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:44:24.593

```
public IEnumerable<Record> QueryByDay(DateTime day)
{
    return repository.Table
        .Where(t => t.MyDate.Day == day.Day && t.MyDate.Month == day.Month && t.MyDate.Year == day.Year );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:52:03.277

这取决于 LINQ 提供程序。我不确定 NHibernate LINQ 提供程序是否支持该`item.SomeDateProperty.Date == x`语法，我对此表示怀疑。但是，您可以像这样制作自己的扩展方法：

```
public static IQueryable<T> FilterByDate(this IQueryable<T> This, Expression<Func<T, DateTime>> getProperty, DateTime date)
{
  DateTime from = day.Date;
  DateTime to = day.Date.AddDays(1);
  return This.Where(x=> 
    Expression.And(
      Expression.GreaterThan(getProperty, Expression.Variable(from)),
      Expression.LessThan(getProperty, Expression.Variable(to)));

} 
```

这不会以现在的方式构建 - 我只是想让你知道该怎么做。

然后你可以像这样使用它：

```
var result = repository.Table.FilterByDate(x=>x.MyDate, new DateTime(2012, 6,6)); 
```

# c++ - 同一基类的两个派生对象如何通信？

> ID：10920120
> 
> 赞同：2
> 
> 时间：2012-06-06T18:37:59.473
> 
> 标签：c++, design-patterns, derived-class

我有以下情况

```
class B {
public:
    B() {};
    virtual ~B() {};
    virtual void seti( int x ) { i = x; };
    virtual void setj( int x ) { j = x; };
    virtual void add() =0;

protected:
    int i;
    int j;
};
class D :  public B {
public:
 virtual void add() { cout << "D-add:" << i + j << endl; }; 
};

class E: public B {
public:
    void seti( int x ) { i = x; };
    void add() { cout << "E-add:" << i + j << endl; }; 
    void mult() { cout << "E-mult:" << i * j << endl; }; 
};

int _tmain(int argc, _TCHAR* argv[])
{
    D *d = new D();
    d->seti(4); d->setj(5); d->add();
    E*e = d;
    e->seti(8); e->add(); e->mult();
    return 0;
} 
```

```
我收到以下错误
1>.\CallBack.cpp(38)：错误 C2440：“正在初始化”：无法从“D *”转换为“E *”
1> 指向的类型不相关；转换需要 reinterpret_cast、C-style cast 或 function-styl`在此处输入代码`e cast

```

我想做的是当我实例化 E 时，我使用了 D 的所有信息/成员并用它做更多的事情。我应该像上面那样使用分层继承还是应该使用多级继承，或者还有其他更好的方法。请指教。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:43:14.967

你可以改变

```
class E: public B { 
```

到

```
class E: public D { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:42:11.973

我认为你想要的是一个“转换 ctor”——E 上的一个构造函数，它将指向 D 的引用/指针作为参数并根据 D 的值填充自身。要复制 B 上定义的字段，您可以执行以下操作：

```
class B {
public:
....
  B(B& source) { this->i = source.i; this->j = source.j; }
....
}
class E {
public:
....
  E(D& source) : B(source) { // no need to do anything about i,j
  }
....
} 
```

此外，您可以编写一个转换器类（DtoEConverter），它具有执行此操作的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:44:13.937

```
D *d = new D();
d->seti(4); d->setj(5); d->add();
E*e = d; 
```

`d`是一个指向的指针`D`。您不能将指针分配给接受指针`D`的变量，`E`因为类型不直接相关。

它们在基类中相关，但`d` **不是`E`**，这就是您遇到的问题。

你可以这样做：

```
B* e = d; 
```

因为`d` **是一个`B`**。

顺便说一句，你的问题标题问：

> 同一基类的**两个**派生对象如何通信？

强调我的。你没有两个派生对象——你只有一个。有两个类，但你只实例化一个实际对象，在这里：

```
 D *d = new D(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T09:19:00.130

但是，我不是 C++ 程序员，我希望尝试并根据我们在 C sharp 中可能做的事情提供替代方案

您可以潜在地将接口添加到 D 类......比如说接口 IAdd，然后将 D 类传递给 E 类。

因此，在 E 类的构造函数中，您可以使用以下内容： public E(Interface x) .... 传入 D 类而不是 X。

请让我知道这可不可以帮你 ：）

问候

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T18:15:47.117

与其通过班级间的交流来污染你的主要班级，不如引入一个新班级。

```
class DECommunicator
{
public:
  DECommunicator(D* dPtr, E* ePtr)
  {
    mDPtr = dPtr;
    mEPtr = ePtr;
  }

  void DSetI(int x)
  {
    mDPtr->setI(x);
  }

  // add additional methods to allow D to "talk" to E and vice versa

private:
  D* mDPtr;
  E* mEPtr;
} 
```

很难给出代码，因为我不确定你想要实现什么，给出你的例子。

# ios - 动画块 - 完成立即触发

> ID：10920126
> 
> 赞同：2
> 
> 时间：2012-06-06T18:38:16.247
> 
> 标签：ios, animation, uiview, uiviewcontroller

为什么以下代码在触发后立即记录“完成”？

```
[UIView animateWithDuration:0.3 
                 animations:^{
                        NSLog(@"Start");
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"done");
                 }
 ]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T18:42:47.680

因为您实际上并没有为任何东西设置动画（不能为 NSLog 设置动画）。您需要为对象设置动画，否则将立即调用完成块。如果没有任何动画，0.3 秒的持续时间将被忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:41:45.060

因为你没有动画任何东西。如果您在动画块中更改某些 UIView 的值，您将在 0.3 秒延迟后正确看到“完成”输出。

我完全使用您的代码测试了 5 秒的延迟，只添加了一些动画来确认。

# c - 从线程中断 main 中的 while 循环。（C 编程）

> ID：10920131
> 
> 赞同：0
> 
> 时间：2012-06-06T18:38:41.893
> 
> 标签：c, multithreading, while-loop

我目前正在用 C 编写一个基本客户端服务器消息传递程序。我遇到的问题是服务器端代码。代码的主要部分是一个 while 循环，用于检查来自客户端的新传入套接字连接。如果客户端连接，则会产生一个新线程来处理传入消息。我使用的这个功能`tcp_wait_for_connection( server );`是阻塞的。

所以我的问题是是否可以从这些线程之一**中断**while循环而不必使用 Exit() 以便我可以关闭套接字

（我是 Stack Overflow 的新手，所以我不知道是否应该在此处发布我的完整代码，我将最相关的部分放在下面，如果您需要更多我会编辑帖子。

谢谢

代码如下：

```
while(1) {

    client = (Socket *) malloc( sizeof(Socket) ); //allocate memory for the new client socket
    if ( client == NULL ){
        perror("Allocation of memory for the new client has failed");
        return 1;
    }
    //wait for a client to connect
    *client = tcp_wait_for_connection( server );
    printf("Incoming client connection\n");
    //get the socket descriptor for the new client socket
    sd = get_socket_descriptor(client);
    //insert the new client socket into the client list with the sd as ID
    InsertElement(&cl, (Element)client, sd);

    p_thread = (pthread_t *) malloc( sizeof(pthread_t) ); //allocate memory for the new thread handler
    if ( p_thread == NULL ){
        perror("Allocation of memory for the new thread has failed");
        return 1;
    }
    //insert the new thread handler into the thread handler list
    //with the sd of the corressponding client socket as ID
    InsertElement(&tl, (Element)p_thread, sd);
    //create the new thread
    pthread_create(p_thread, NULL, HandleClient, (void*)p_thread);

}
tcp_close( *client );
tcp_close( server ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:48:05.260

不，你不能那样做。我建议您只调用从子线程关闭套接字的函数。使用 a`pthread_mutex`确保您一次只从一个线程执行此操作。此外，在`main`, 中处理`tcp_wait_for_connection`由于套接字正确关闭而发生的错误。

# android - 增强现实应用强制关闭

> ID：10920132
> 
> 赞同：0
> 
> 时间：2012-06-06T18:38:46.707
> 
> 标签：android, augmented-reality

我基于增强现实概念创建了一个简单的应用程序。这是下面的java代码。

```
package com.kddi.satch.tutorialactivity;                                        

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Bundle;
import android.os.Handler;
import android.view.KeyEvent;
import android.view.View;
import android.widget.FrameLayout;

import com.kddi.satch.ARViewer;
import com.kddi.satch.LoadScenarioStatus;

public abstract class TutorialActivity_simple extends Activity                                      
{                                       
protected abstract String getSampleScenarioName();                                  
protected abstract String getSampleLogTag();                                    

protected boolean _isInitializedCorrectly;                                  
protected ARViewer _kddiComponent;                                  
protected FrameLayout _frameLayout;                                 

private static final int DIALOG_EXIT = 0;                                   

private void resetMembers()                                 
 {                                  
        _isInitializedCorrectly = false;                                
        _frameLayout = null;                                
        _kddiComponent = null;                              
 }                                  

public void initComponent()                                 
{                                   

        _isInitializedCorrectly = false;                                

        _kddiComponent = new ARViewer(this);                                

        // This FrameLayout must be empty (but initialized) when you pass it to the kddiComponent.initialize() method.                              
        _frameLayout = new FrameLayout(this);                               
        _kddiComponent.initialize(_frameLayout);                                

        _isInitializedCorrectly = true;                             
}                                   

@Override                                  
public void onCreate(Bundle savedInstanceState) {                                   
        super.onCreate(savedInstanceState);                             

        // Add null to AR Viewer Library compornent's reference.                                
        resetMembers();                             
}                                   

@Override                                  
 public void onRestart() {                                  
        super.onRestart();                              
 }                                  

 @Override                                 
public void onStart() {                                 
    super.onStart();                                
    // Create AR Viewer Library compornent.                             

    initComponent();                                

        postInitComponent();                                

    initContentView();                              

    if (_isInitializedCorrectly) {                              
                // Do authorize and madia is loaded.                            
                // You must call loadScenario() method.                         
                loadScenario();                         
    }                               
 }                                  

@Override                                  
public void onResume(){                                 
        super.onResume();                               

        if (_isInitializedCorrectly) {                              
            // GL context is recreated and media is reloaded.                           
            _kddiComponent.onResume();                          
            reservePlayScenario();                          
        }                               
}                                   

 @Override                                 
public void onPause() {                                 
        // When the activity is paused the GL context is destroyed, so all media is unloaded.                               
        if (_isInitializedCorrectly) {                              
            cancelReservePlayScenario();                            
            if (_kddiComponent.checkLoadScenarioStatus() == LoadScenarioStatus.COMPLETE) {                          
                _kddiComponent.pauseScenario();                         
            }                           
            _kddiComponent.onPause();                           
        }                               

        super.onPause();                                
}                                   

@Override                                  
public void onStop() {                                  
        releaseContentView();                               

        // Destroy AR Viewer Library Objects.                               
        if (_isInitializedCorrectly)                                
        {                               
            _kddiComponent.terminate();                         
            _kddiComponent = null;                          
            _frameLayout = null;                            
        }                               

        super.onStop();                             
}                                   

@Override                                  
public void onDestroy() {                                   
        // Destroy AR Viewer Library Objects.                               
        if (_isInitializedCorrectly)                                
        {                               
            _frameLayout = null;                            
            _kddiComponent = null;                          
        }                               

        super.onDestroy();                              

        resetMembers(); // forced clean                             
}                                   

@Override                                  
public boolean onKeyDown(int keyCode, KeyEvent msg)                                 
{                                   
        switch(keyCode){                                
                case android.view.KeyEvent.KEYCODE_BACK :                           
                showDialog( DIALOG_EXIT );                          
                return true;                            
    }                               
        return false;                               
}                                       

public void postInitComponent()                                 
{                                   
        // override this if you need to do some special handling on the component after standard initialization                             

        if (_isInitializedCorrectly) {                              
            _kddiComponent.activateAutoFocusOnDownEvent(true);                          
        }                               
}                                   

public void initContentView()                                   
{                                   
        // override this if you need to do some special handling on the component after standard initialization                             

        if (_isInitializedCorrectly) {                              

            // you'll probably use some other UI object as the content view that itself will embed the component's frame layout -- here you can change all this                         

            // by default, the frame layout containing DFusion will be the activity content view                            
            setContentView(_frameLayout);                           
        }                               
}                                   

public void releaseContentView()                                    
{                                   
        // override this if you need to do some special handling on the component after standard initialization                             

        if (_isInitializedCorrectly) {                              
            // do here the release of the your UI instances (if customized)                         
        }                               
}                                   

public void loadScenario()                                  
{                                   
        ApplicationInfo appInfo = null;                             
        PackageManager packMgmr = getApplicationContext().getPackageManager();                              
        try {                               
            appInfo = packMgmr.getApplicationInfo(getPackageName(), 0);                         
        } catch (NameNotFoundException e) {                             
            e.printStackTrace();                            
            throw new RuntimeException("Unable to locate assets, aborting...");                         
        }                               
        String dpdfile = appInfo.sourceDir + getSampleScenarioName();                               
        _kddiComponent.loadScenario(dpdfile);                               
}                                   

// Set polling rate for loading the media.                                  
private final int REPEAT_INTERVAL = 100;                                    
private Handler handler = new Handler();                                    
private Runnable runnable = null;                                   

private void reservePlayScenario()                                  
{                                   
        if (runnable == null)                               
        {                               
        runnable = new Runnable()                           
         {                          
            @Override                      
            public void run()                       
             {                      
                                LoadScenarioStatus status = _kddiComponent.checkLoadScenarioStatus();                   
                                if (status == LoadScenarioStatus.CANCEL)                    
                                {                   
                                    // cancel(appli suspend)                
                                }                   
                                else if (status == LoadScenarioStatus.COMPLETE)                 
                                {                   
                                    // Ready to play scenario               
                                    _frameLayout.setVisibility(View.VISIBLE);               
                                    _kddiComponent.playScenario();              
                                }                   
                                else if (                   
                                    status == LoadScenarioStatus.ERROR_NETWORK_UNUSABLE ||              
                                    // faild to load a media becase of no network connection.               
                                    status == LoadScenarioStatus.ERROR_NETWORK ||               
                                    // faild to load a media becase of network error.               
                                    status == LoadScenarioStatus.ERROR_SOFTWAREKEY ||               
                                    // faild to load a media becase software key has not be found on server.                
                                    status == LoadScenarioStatus.ERROR_CONTENT_STOPPED ||               
                                    // faild to load a media becase content has stopped.                
                                    status == LoadScenarioStatus.ERROR_SERVER ||                
                                    // faild to load a media becase of server error.                
                                    status == LoadScenarioStatus.ERROR_ETC              
                                    // faild to load a media becase of another error.               
                                )                   
                                {                   
                                    // error                
                                }                   
                                else                   
                                {                   
                    handler.postDelayed(this, REPEAT_INTERVAL);             
                                }                   
            }                       
        };                          
        handler.postDelayed(runnable, REPEAT_INTERVAL);                         
        }                               
}                                   

private void cancelReservePlayScenario()                                    
{                                   
        if (handler != null && runnable != null)                                
        {                               
                handler.removeCallbacks(runnable);                          
                runnable = null;                            
        }                               
}                                   

protected Dialog onCreateDialog(int id) {                                   
    Dialog dialog;                              
    switch(id) {                                
        case DIALOG_EXIT:                           
        {                           
                    AlertDialog.Builder builder = new AlertDialog.Builder(this);                        
                    builder.setMessage(                     
                        "Really want to quit the sample?"                  
                )                       
                .setCancelable(true)                        
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() {                       
                    public void onClick(DialogInterface dialog, int id) {                   
                                finish();               
                    }})                 
                    .setNegativeButton("No", new DialogInterface.OnClickListener() {                        
                        public void onClick(DialogInterface dialog, int id) {                   
                                dialog.cancel();                
                        }});                    
                    dialog = builder.create();                      
                    break;                      
        }                           

        default:                            
        dialog = null;                          
    }                               
    return dialog;                              
}                                   
}                                       
//-- end of file -- 
```

应用程序的 manifest.xml 文件如下所示

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:versionCode="1"
android:versionName="1.0" package="com.kddi.satch.tutorial">
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name"
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:debuggable="false">
<!-- configChanges setting -->
    <activity android:name=".Tutorial"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
            android:configChanges="orientation|keyboard|keyboardHidden"
            >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
<!-- define the resolution -->
<supports-screens
    android:anyDensity="false"
    android:normalScreens="true"
    android:largeScreens="true"
    android:smallScreens="true"
    android:resizeable="true">
</supports-screens>
<!-- permit camera usage if authorized -->
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<!-- define Autofocus -->
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-sdk android:minSdkVersion="8" /> 
```

现在，每当我在模拟器上运行应用程序时，第一次加载时应用程序强制关闭，并出现以下错误。

```
06-06 22:55:00.157: A /libc(19290): Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1)
06-06 22:55:00.173: E /ti.dfusionmobile.tiComponent(19290): ON SURFACE CREATED 
```

任何关于我出错的地方和地方的指导都是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:41:28.063

实际上，增强现实 sdk 使用手机 GPU 执行 opengl 命令。模拟器不支持此功能，因此您只能在手机上运行该应用程序。

最好的

# php - Doctrine 试图分配 4GB？

> ID：10920138
> 
> 赞同：3
> 
> 时间：2012-06-06T18:39:06.607
> 
> 标签：php, mysql, wordpress, doctrine-orm

我将一个带有 Doctrine 的 Post 对象映射到`wp_posts`Wordpress 使用的表。`post_content`此表中调用的列是`LONGTEXT`可以包含 4GB 的列。

当我尝试从这些表中加载对象时，我收到以下消息：

> 致命错误：第 165 行 /home/rdinhani/renato/php-lib/DoctrineORM-2.2.2/Doctrine/DBAL/Driver/Mysqli/MysqliStatement.php 中允许的内存大小为 268435456 字节（试图分配**4294967296字节）**

这发生在执行查询以加载对象时（目前，只会返回一行）。

因此，Doctrine 试图分配 4GB 来加载该列内的值，但这会溢出内存。**我在此列中没有大值，只有一些文本。**

Doctrine 或 PHP 中有一些配置可以避免尝试将 4GB 分配给列，或者可能将 MySQL 列中的最大限制设置为较小的值，如 2MB、10MB 等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:34:58.780

Mysqli 驱动程序[有一个错误](https://bugs.php.net/bug.php?id=46808)。

当尝试选择 mediumtext 或 longtext 字段时，它会尝试分配整个字段大小 2^32 字节 = 4294967296。

**解决方案**：更改为 PDO_Mysql 或将 medium/longtext 字段更改为 text 字段。

# java - 如何配置 Maven 以构建工件的两个版本，每个版本用于不同的目标 JRE

> ID：10920142
> 
> 赞同：9
> 
> 时间：2012-06-06T18:39:46.167
> 
> 标签：java, maven, target

我有一个需要在 J2ME 客户端和 EJB 服务器中使用的 maven 模块。在客户端中，我需要为 target 1.1 编译它，在服务器中为 target 1.6 编译它。

我还需要将 1.6 版本部署到 Nexus 存储库，因此从事服务器项目的成员可以包含此依赖项，而无需下载源代码。

我在[http://java.dzone.com/articles/maven-profile-best-practices](http://java.dzone.com/articles/maven-profile-best-practices)读到使用配置文件不是最好的方法，但作者没有说最好的方法是什么。

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>proj-parent</artifactId>
        <groupId>br.com.comp.proj</groupId>
        <version>0.0.4-SNAPSHOT</version>
    </parent>

    <artifactId>proj-cryptolib</artifactId>
    <name>proj - Cryto Lib</name>

    <dependencies>
        <dependency>
            <groupId>br.com.comp</groupId>
            <artifactId>comp-proj-mobile-messages</artifactId>
            <version>0.0.2-SNAPSHOT</version>
        </dependency>
    </dependencies>

    <build>

        <plugins>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.3</source>
                    <target>1.1</target>
                    <fork>true</fork>
                </configuration>
            </plugin>

        </plugins>

    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-26T17:33:03.107

正如 Haylem 所建议的那样，您需要分两步完成，一个用于编译，另一个用于 jar。

对于编译器

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5</version>
    <executions>
      <execution>
        <configuration>
          <source>1.3</source>
          <target>1.5</target>
          <fork>true</fork>
          <outputDirectory>${project.build.outputDirectory}_jdk5</outputDirectory>
        </configuration>
      </execution>
      <execution>
        <configuration>
          <source>1.3</source>
          <target>1.6</target>
          <fork>true</fork>
          <outputDirectory>${project.build.outputDirectory}_jdk6</outputDirectory>
        </configuration>
      </execution>
    </executions>
 </plugin> 
```

然后对于 jar 插件

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <goals>
              <goal>jar</goal>
            </goals>
            <configuration>
              <classesDirectory>${project.build.outputDirectory}_jdk5</classesDirectory>
              <classifier>jdk5</classifier>
            </configuration>
          </execution>
          <execution>
            <goals>
              <goal>jar</goal>
            </goals>
            <configuration>
              <classesDirectory>${project.build.outputDirectory}_jdk6</classesDirectory>
              <classifier>jdk6</classifier>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

`<classifier>`然后，您可以通过向依赖项中添加元素来引用所需的 jar 。例如

```
<dependency>
    <groupId>br.com.comp.proj</groupId>
    <artifactId>proj-cryptolib</artifactId>
    <version>0.0.4-SNAPSHOT</version>
    <classifier>jdk5</classifier>
</dependency> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T18:42:12.190

您可以通过 Maven 编译器插件进行配置。

查看[Maven 编译器插件文档](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)。

例如，您可以通过不同的配置文件启用此功能。

如果您只想拥有不同的目标版本，您可以简单地使用可变目标。像这样的东西：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.3</source>
        <target>${TARGET_VERSION}</target>
        <fork>true</fork>
    </configuration>
 </plugin> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:58:29.330

*为了补充我对 wjans 回答的评论，因为您要求提供更多详细信息。*

下面将执行编译器插件**两次**以生成两组不同的类文件，由所谓的`classifier`a 标识（基本上，当单个项目可以生成多个工件时，Maven 知道您指的是什么的标记）。

粗略地说，类似：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5</version>
    <executions>
      <execution>
        <configuration>
          <source>1.3</source>
          <target>1.5</target>
          <fork>true</fork>
          <classifier>jdk5</classifier>
        </configuration>
      </execution>
      <execution>
        <configuration>
          <source>1.3</source>
          <target>1.6</target>
          <fork>true</fork>
          <classifier>jdk6</classifier>
        </configuration>
      </execution>
    </executions>
 </plugin> 
```

请注意，人们有时会像使用 s 一样对使用`classifier`s皱眉`profiles`，因为它们可能意味着您的项目应该在多个项目中拆分，或者您正在损害构建的可移植性。

# entity-framework - 数据库集 .Include() 在扩展方法中使用时会导致 SELECT N+1

> ID：10920153
> 
> 赞同：5
> 
> 时间：2012-06-06T18:40:18.463
> 
> 标签：entity-framework, linq-to-entities, dynamic-linq, objectquery

我在 IQueryable 上有一个扩展，它允许传入带分隔符的属性名称字符串，使用时会导致查询不构造 JOIN 并有效地导致 SELECT N+1 问题。

我注意到的是，如果我直接从 DbSet 调用本机 EF 扩展 .Include("property") 一切正常。但是如果我使用我的扩展（我什至将它简化为只调用 .Include("property") SELECT N+1 发生......

我的问题是为什么？我究竟做错了什么？

这是调用方法（来自服务）

```
public MyModel[] GetAll(int page, out int total, int pageSize, string sort, string filter)
{
    return _myModelRepository
        .Get(page, out total, pageSize, sort, filter, "PropertyOnMyModelToInclude")
        .ToArray();
} 
```

这是使用扩展的存储库方法

```
public virtual IQueryable<T> Get(int page, out int total, int pageSize, string sort, string filter = null, string includes = null)
{
    IQueryable<T> query = DatabaseSet;
    if (!String.IsNullOrWhiteSpace(includes))
    {
        //query.IncludeMany(includes); // BAD: SELECT N+1
        //query.Include(includes); // BAD: SELECT N+1
    }
    if (!String.IsNullOrWhiteSpace(filter))
    {
        query.Where(filter);
    }
    total = query.Count(); // needed for pagination
    var order = String.IsNullOrWhiteSpace(sort) ? DefaultOrderBy : sort;
    var perPage = pageSize < 1 ? DefaultPageSize : pageSize;

    //return query.OrderBy(order).Paginate(page, total, perPage); // BAD: SELECT N+1 (in both variations above)
    //return query.IncludeMany(includes).OrderBy(order).Paginate(page, total, perPage); // BAD: SELECT N+1
    return query.Include(includes).OrderBy(order).Paginate(page, total, perPage);     // WORKS!
} 
```

这是扩展名（简化为调用 Include() 来说明问题）

```
public static IQueryable<T> IncludeMany<T>(this IQueryable<T> query, string includes, char delimiter = ',') where T : class
{
    // OPTION 1
    //var propertiesToInclude = String.IsNullOrWhiteSpace(includes)
    //                              ? new string[0]
    //                              : includes.Split(new[] {delimiter}, StringSplitOptions.RemoveEmptyEntries).Select(p => p.Trim()).ToArray();
    //foreach (var includeProperty in propertiesToInclude)
    //{
    //    query.Include(includeProperty);
    //}
    // OPTION 2
    //if (!String.IsNullOrWhiteSpace(includes))
    //{
    //    var propertiesToInclude = includes.Split(new[] { delimiter }, StringSplitOptions.RemoveEmptyEntries).AsEnumerable(); //.Select(p => p.Trim());
    //    propertiesToInclude.Aggregate(query, (current, include) => current.Include(include));
    //}

    // OPTION 3 - for testing
    query.Include(includes);

    return query;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T01:21:24.470

我认为这里的根本问题在于您使用 Include 方法的方式，顺便说一下，使用 Where 方法。这些方法与 LINQ 扩展方法一样，不会修改调用它们的对象。相反，它们返回一个新对象，该对象表示应用运算符后的查询。因此，例如，在此代码中：

```
var query = SomeQuery();
query.Include(q => q.Bing);
return query; 
```

Include 方法基本上什么都不做，因为 Include 返回的新查询被丢弃了。另一方面，这是：

```
var query = SomeQuery();
query = query.Include(q => q.Bing);
return query; 
```

将 Include 应用于查询，然后使用从 Include 返回的新查询对象更新查询变量。

它不在您发布的代码中，但我认为您的代码仍然看到 N+1，因为 Include 被忽略，因此相关集合仍在使用延迟加载加载。

# ruby-on-rails-3 - 如何为 Rails 3 生产预编译 jQuery Mobile？

> ID：10920154
> 
> 赞同：0
> 
> 时间：2012-06-06T18:40:30.383
> 
> 标签：ruby-on-rails-3, jquery-mobile, asset-pipeline

我正在尝试部署一个包含 jQuery Mobile 的 Rails 3 应用程序。它在开发中运行良好，我知道它需要预编译 JS 和 CSS 以用于生产。我收到以下错误：

```
Started GET "/orders/mobile" for 127.0.0.1 at Wed Jun 06 14:22:40 -0400 2012
Processing by OrdersController#mobile as HTML
  Rendered orders/mobile.html.erb within layouts/mobile (642.9ms)
Completed 500 Internal Server Error in 1122ms

ActionView::Template::Error (jquery.mobile isn't precompiled):
5: <head>
6:   <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
7:   <title>Company Orders</title>
8:   <%= stylesheet_link_tag 'jquery.mobile' %>
9:   <%= stylesheet_link_tag 'jquery.mobile.structure' %>
10:   <%= stylesheet_link_tag 'jquery.mobile.theme' %>
11:     <%= stylesheet_link_tag 'http://fonts.googleapis.com/css?family=Ubuntu' %>
app/views/layouts/mobile.html.erb:8:in `_app_views_layouts_mobile_html_erb__605278794_69818059003840'
app/controllers/orders_controller.rb:330:in `mobile'
app/controllers/orders_controller.rb:329:in `mobile' 
```

我已经阅读了[通常](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)的东西，但是这里有很多错误，我几乎不知道从哪里开始：

1.  我在应用程序/资产中有 JQM 的东西，但后来将它们移到了供应商/资产中。它们被预编译器看到——我知道，因为它会在各种尝试中抱怨它们——但它们似乎从未被预编译（在任何一个位置）。
2.  我已经`*= require_tree ../../../vendor/assets/stylesheets`在 application.css 中尝试过。我真的不希望它包含在每个页面点击中，所以我想将它包含在布局中，但我只是想以某种方式对其进行预编译。
3.  我已经`*= require jquery.mobile[[.css].erb]`在 application.css 中尝试过。
4.  我`config.assets.precompile += %w( [[./]vendor/assets/stylesheets/]jquery.mobile.* )`在 config/environments/production.rb 中尝试过。

作为最后的努力，我从 jquery.mobile.css.erb 中删除了“.erb”，并删除了`<% asset_data_uri %>`标签以查看它是否可以编译。它通过了`rake assets:precompile`命令，但*仍然*给我同样的错误。

我不想关闭 JQM 的预编译；我*想让*它工作。（我真的需要加快这个页面的速度。）但是，我找不到任何关于如何将 JQM 优雅地插入 Rails 3 应用程序（带有预编译）的指南，而且我已经用尽了我在试用中能想到的所有途径和错误。肯定有人这样做了，并且知道正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:04:31.843

我的基本问题是我需要为生产预编译一些资产，但不包括在每个页面点击中。这是我想出的：

如果我不介意每个页面都提供 JQM，我可以将文件放在 app/assets 中并让它`require_tree .`发挥作用，或者将这些文件放在 vendor/assets 中，然后`require`将它们单独放在 application.js 中。如果我想将它们放在供应商/资产中，而不是在 application.js 中特别需要它们，我可以`config.assets.paths << "#{Rails.root}/vendor/assets"`在 production.rb 中使用，并且（显然）`require_tree`在 application.js 中也会处理这个树。这仍然会将它们汇总到已编译的应用程序 JS“球”中，但会使它们在文件系统上不同。

*为特定*页面合并 jQuery Mobile并将其文件在供应商/资产中*分开的正确方法**似乎*是同时使用`config.assets.paths << "#{Rails.root}/vendor/assets"`指令*和*`config.assets.precompile += %w( jquery.mobile.* )`指令。这将使 JQM 文件预编译，但不会汇总到 application-(hash).js 和 application-(hash).css 中。（它们将是公共/资产中的单个文件。）然后您可以在专门针对移动视图的布局中执行特定`javascript_include_tag`的 ' 和`stylesheet_link_tag`' 。

大结局：我已经升级到 Rails 3.2.5，因为我看到了一些关于 3.2.3 的安全报告。我回滚到 3.2.3 并且 - 结合我在上面学到的东西 - 我终于能够让它工作。我也试过3.2.4。显然，> 3.2.3 中的回归会干扰预编译。

# apache - Apache 在 Internet Explorer 中出现 400 错误

> ID：10920156
> 
> 赞同：1
> 
> 时间：2012-06-06T18:40:41.500
> 
> 标签：apache, http-status-code-400

我在 Ubuntu 12.04 上托管并在 Internet Explorer 中收到 400 错误。

但是，我在 Chrome 或 Firefox 中没有收到任何错误。

我以前从未见过这种类型的错误，并且不确定如何进行调试。这可能是什么原因造成的？

# android - 状态栏颜色和资源

> ID：10920158
> 
> 赞同：1
> 
> 时间：2012-06-06T18:40:50.787
> 
> 标签：android

我正在为状态栏（通知中心）创建自己的远程视图。我希望远程视图具有与其他通​​知相同的背景颜色，并且我希望它在设备之间保持一致，例如三星和股票 Android。

我设法找到的唯一布局信息位于 \android-sdk\platforms\android-14\data\res\layout\status_bar_latest_event_content.xml 此外，我找到了[图标指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)，但我找不到与背景颜色相关的任何内容。

我使用 Photoshop 并找到了 Stock Android (#111111) 的默认颜色，但我不想硬编码它。

当不使用任何背景颜色时，我得到的默认值是灰色的（见附件）

![在此处输入图像描述](../Images/9f7ad2da1cae128fb8cdec7b5d69c425.png)

有什么建议么 ？

# mongodb - mongodb 收集计数返回 1000 但应该更高

> ID：10920162
> 
> 赞同：0
> 
> 时间：2012-06-06T18:41:03.377
> 
> 标签：mongodb, pymongo

我将几百万条记录批量导入 mongodb，但在检查文档数量时它保持在 1000 条。

```
> db.records.count()
1000
> db.records.distinct('hash').length
1000 
```

但是我的脚本认为它已经插入了 512K（并且还在增加）记录而没有抛出任何异常（我正在使用 pymongo）。集合是否有隐含的最大大小？

### 更新：内容`db.records.stats()`

```
> db.records.stats()
{
    "ns" : "test2.records",
    "count" : 2000,
    "size" : 152012,
    "avgObjSize" : 76.006,
    "storageSize" : 696320,
    "numExtents" : 4,
    "nindexes" : 1,
    "lastExtentSize" : 524288,
    "paddingFactor" : 1,
    "flags" : 1,
    "totalIndexSize" : 73584,
    "indexSizes" : {
        "_id_" : 73584
    },
    "ok" : 1
}
> db.records.count()
2000 
```

# .net - 如何启动接受参数并返回值的任务？

> ID：10920174
> 
> 赞同：3
> 
> 时间：2012-06-06T18:41:42.653
> 
> 标签：.net, c#-4.0, task-parallel-library

我正在尝试在 C# 中启动一个既接受参数又返回值的任务，但我似乎无法获得正确的语法。

这是我得到的最接近的结果：这是一个预期返回 int 的任务。我是我的 lambda，我还展示了它采用单个参数，o：

```
Task<int> task1 = Task.Factory.StartNew<int>((o) => { return 2 ; }, 3);
Console.WriteLine(task1.Result);  // prints 2 
```

上面的行有效（它返回一个硬编码值 2，但你可以看到它对参数 o 没有做任何事情，使其无用。如果我对参数 o 做一些事情，如下所示：

```
Task<int> task1 = Task.Factory.StartNew<int>((o) => { return (2 * o) ; }, 3); 
```

我收到一条语法消息，说明 Delegate 'System.Func' 不接受 1 个参数。

关于如何从任务中实现这两件事（传递参数和检索值）的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:50:59.280

a 的输入（ state ）参数`Task`只能是 type `object`，所以它实际上不是类型安全的。

泛型类型参数 on`Task<T>`是`Task`.

最好的选择是使用闭包：

```
int i = 3;
Task<int> task1 = Task.Factory.StartNew( () => 2 * i ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:54:32.690

`o`是对象状态，在您的情况下，是您传入的值，或 3。您可以将其转换为`int`.

```
Task<int> task = Task.Factory.StartNew<int>(o => {
    return 2 * (int)o;
}, 3);

Console.WriteLine(task.Result); // prints 6 
```

请参阅 msdn 关于[TaskFactory](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory)的文档。[StartNew](http://msdn.microsoft.com/en-us/library/dd321394)其中指出：

> **状态**
> 
> 类型：System.Object
> 
> 包含函数委托使用的数据的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:46:17.570

你`Task<t>`可以使用（看[这里](http://msdn.microsoft.com/en-us/library/dd321424.aspx)） T 是返回值，当然。至于参数 - 您可以只在匿名委托中使用 ur 变量，因此如果您`int o`在任务之外定义了变量，则可以在任务匿名委托范围内使用它。[你可以在这里](https://stackoverflow.com/a/8127421/1394380)看到一个样本

# opencv - 将图像放入轮廓（OpenCV）

> ID：10920178
> 
> 赞同：1
> 
> 时间：2012-06-06T18:41:51.373
> 
> 标签：opencv, computer-vision

我教 OpenCV，我想写一个小测试应用程序。还有一个问题。你会建议什么算法用图像填充轮廓（接近矩形）？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:59:18.823

[warp](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html#cv-warpperspective)的组合使 src 图像变形以匹配轮廓的形状和[addWeighted](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html?highlight=addweighted)以用新形状中的源替换目标图像像素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:11:27.973

假设您知道要填充的矩形的位置，您可以简单地设置一个 ROI（感兴趣区域）并对该区域执行一些处理（可能是灰度转换），或者甚至将另一个图像复制到该位置。我已经演示[了如何设置 ROI 并对该区域执行一些处理](https://stackoverflow.com/questions/10881397/setting-roi-with-mouse-from-a-rectangle-on-a-video/10883266#10883266)。

如果你想添加 2 张图片，我建议你查看[官方教程](http://opencv.itseez.com/doc/tutorials/core/adding_images/adding_images.html)、[这篇文章](http://www.developerstation.org/2011/02/adding-two-images-in-opencv.html)和[这个演示](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut2.html)：魔术是通过`cvSetImageROI()`和发生的`cvAddWeighted()`。

# jquery - 第一次单击 div 时，如何使事件冒泡起作用？

> ID：10920179
> 
> 赞同：0
> 
> 时间：2012-06-06T18:41:52.707
> 
> 标签：jquery, jquery-events, event-bubbling

我正在制作日历。我希望用户能够单击特定日期（表格单元格）内的任何地方并且发生​​了一些事情。那天可能有事件，这些事件包含在表格单元格内的 div 中。如果用户单击 div，则会发生其他事情。当用户单击时，我已设法防止事件冒泡`doSomethingElse()`，但它在第一次单击时不起作用。它仅适用于后续点击，而不适用于第一次点击。为什么取消事件冒泡在第一次点击时不起作用，而只对所有后续点击起作用？

HTML：

```
<table>
    <tr>
        <td onclick="doSomething()">
            <div class="view" onclick="doSomethingElse()">Text</div>
        </td>
    </tr>
</table> 
```

Javascript：

```
function doSomethingElse() {
    $('.view').click(function(e){
        e.cancelBubble = true;
        e.returnValue = false;

        if (e.stopPropagation)
        {
            e.stopPropagation();
        }
    });

    $('#myID').load('myFile.php');
} 
```

更新：我把这个放在我的页面上：

```
<script>
$(document).ready(function() { 
    $('.view').click(function(e){
        e.cancelBubble = true;
        e.returnValue = false;

        if (e.stopPropagation)
        {
            e.stopPropagation();
        }
    });
});
</script> 
```

然后，`onclick="doSomethingElse()"`只包含我的脚本的其余部分。问题是`doSomethingElse()`有参数，所以看起来我仍然需要以下内容：

```
<div class="view" onclick="doSomethingElse(id1,id2)">Text</div> 
```

它仍然只适用于第 2 次、第 3 次……点击，但不是第一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:45:33.447

因为您已经在 onclick 处理程序中有效地编写了绑定代码。将您的点击绑定（$('.view').click 部分）放入您的文档中。另外，为什么负载在处理程序之外？

# python - 是否有一种 Python 的方式来支持 Python 中 memoize 装饰器的关键字参数？

> ID：10920180
> 
> 赞同：11
> 
> 时间：2012-06-06T18:41:58.180
> 
> 标签：python, caching, decorator, memoization

所以我最近问了一个关于记忆的问题并得到了一些很好的答案，现在我想把它提升到一个新的水平。经过一番谷歌搜索，我找不到能够缓存接受关键字参数的函数的 memoize 装饰器的参考实现。事实上，它们中的大多数只是用作`*args`缓存查找的键，这意味着如果你想记住一个接受列表或字典作为参数的函数，它也会中断。

在我的例子中，函数的第一个参数本身就是一个唯一标识符，适合用作缓存查找的字典键，但是我希望能够使用关键字参数并仍然访问相同的缓存。我的意思是，`my_func('unique_id', 10)`两者`my_func(foo=10, func_id='unique_id')`都应该返回相同的缓存结果。

为了做到这一点，我们需要一种简洁且 Python 式的方式来表达“检查 kwargs 以获取与第一个参数相对应的关键字）”。这就是我想出的：

```
class memoize(object):
    def __init__(self, cls):
        if type(cls) is FunctionType:
            # Let's just pretend that the function you gave us is a class.
            cls.instances = {}
            cls.__init__ = cls
        self.cls = cls
        self.__dict__.update(cls.__dict__)

    def __call__(self, *args, **kwargs):
        """Return a cached instance of the appropriate class if it exists."""
        # This is some dark magic we're using here, but it's how we discover
        # that the first argument to Photograph.__init__ is 'filename', but the
        # first argument to Camera.__init__ is 'camera_id' in a general way.
        delta = 2 if type(self.cls) is FunctionType else 1
        first_keyword_arg = [k
            for k, v in inspect.getcallargs(
                self.cls.__init__,
                'self',
                'first argument',
                *['subsequent args'] * (len(args) + len(kwargs) - delta)).items()
                    if v == 'first argument'][0]
        key = kwargs.get(first_keyword_arg) or args[0]
        print key
        if key not in self.cls.instances:
            self.cls.instances[key] = self.cls(*args, **kwargs)
        return self.cls.instances[key] 
```

疯狂的是，这确实有效。例如，如果你这样装饰：

```
@memoize
class FooBar:
    instances = {}

    def __init__(self, unique_id, irrelevant=None):
        print id(self) 
```

然后从您的代码中，您可以调用`FooBar('12345', 20)`或*实际获取 FooBar 的相同实例*。然后，您可以为第一个参数定义一个具有不同名称的不同类，因为它以一般方式工作（即，装饰器不需要知道任何关于它正在装饰的类的特定信息才能使其工作）。`FooBar(irrelevant=20, unique_id='12345')`

 *问题是，这是一团糟；-)

它之所以有效，是因为`inspect.getcallargs`返回了一个将定义的关键字映射到您提供的参数的字典，所以我提供了一些虚假参数，然后检查字典是否有传递的第一个参数。

如果这样的事情甚至存在，那会更好的是，它类似于`inspect.getcallargs`返回统一为参数列表而不是关键字参数的字典的两种参数。这将允许这样的事情：

```
def __call__(self, *args, **kwargs):
    key = inspect.getcallargsaslist(self.cls.__init__, None, *args, **kwargs)[1]
    if key not in self.cls.instances:
        self.cls.instances[key] = self.cls(*args, **kwargs)
    return self.cls.instances[key] 
```

我可以看到解决此问题的另一种方法是直接使用提供的 dict`inspect.getcallargs`作为查找缓存键，但这需要一种可重复的方式来从相同的哈希中生成相同的字符串，这是我听说的不能依赖的上（我想我必须在对键进行排序后自己构造字符串）。

有人对此有任何想法吗？想要使用关键字参数调用函数并缓存结果是错误的吗？或者只是非常困难？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T20:06:55.813

我建议如下：

```
import inspect

class key_memoized(object):
    def __init__(self, func):
       self.func = func
       self.cache = {}

    def __call__(self, *args, **kwargs):
        key = self.key(args, kwargs)
        if key not in self.cache:
            self.cache[key] = self.func(*args, **kwargs)
        return self.cache[key]

    def normalize_args(self, args, kwargs):
        spec = inspect.getargs(self.func.__code__).args
        return dict(kwargs.items() + zip(spec, args))

    def key(self, args, kwargs):
        a = self.normalize_args(args, kwargs)
        return tuple(sorted(a.items())) 
```

例子：

```
@key_memoized
def foo(bar, baz, spam):
    print 'calling foo: bar=%r baz=%r spam=%r' % (bar, baz, spam)
    return bar + baz + spam

print foo(1, 2, 3)
print foo(1, 2, spam=3)         #memoized
print foo(spam=3, baz=2, bar=1) #memoized 
```

请注意，您还可以扩展`key_memoized`和覆盖其`key()`方法以提供更具体的记忆策略，例如忽略一些参数：

```
class memoize_by_bar(key_memoized):
    def key(self, args, kwargs):
        return self.normalize_args(args, kwargs)['bar']

@memoize_by_bar
def foo(bar, baz, spam):
    print 'calling foo: bar=%r baz=%r spam=%r' % (bar, baz, spam)
    return bar

print foo('x', 'ignore1', 'ignore2')
print foo('x', 'ignore3', 'ignore4') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:47:42.917

尝试[lru_cache](http://docs.python.org/dev/library/functools.html#functools.lru_cache)：

`@functools.lru_cache(maxsize=128, typed=False)`

> 装饰器用一个可保存最多 maxsize 最近调用的记忆可调用函数来包装函数。当使用相同的参数定期调用昂贵的或 I/O 绑定的函数时，它可以节省时间。

lru_cache 在 python 3.2 中添加，但可以向后移植到 2.x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-26T15:07:37.580

你可以看看我的包：[https](https://github.com/Yiling-J/cacheme) ://github.com/Yiling-J/cacheme ，实际上我使用一个容器来存放所有的 args/kwargs：

```
@cacheme(key=lambda c: 'cat:{name}'.format(name=c.cat.name))
def get_cat(self, cat):
    return some_function(cat) 
```*

# coffeescript - 如何在没有 for 循环的情况下从对象中获取键和值？

> ID：10920186
> 
> 赞同：3
> 
> 时间：2012-06-06T18:42:25.973
> 
> 标签：coffeescript

有没有更好的方法来获取对象的键和值？我试图在没有`for`循环的情况下做到这一点。

```
obj = { collection: 'foo' }

for key, value of obj
  console.log key, value 
```

如果一个对象有一个键和一个值，我认为可能有一种更有效的方法来做到这一点。不过我可能是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:44:18.110

如果您只想检查一个对象是否只有一个键，那么您可以使用短路循环：

```
exactly_one = (obj) ->
    return false if(!obj)
    how_many = 0
    for own key of obj
        break if(++how_many == 2)
    how_many == 1 
```

基本思想是使用`for ... of`（即 JavaScript 的`for ... in`）循环来开始计算对象中键的数量。我们只关心三种情况：

1.  少于一个键（即`null`或没有键）。初始`null`检查和`how_many = 0`初始化会处理这个问题。
2.  只有一把钥匙。在这种情况下，循环将通过一次，`++how_many`一旦离开就会被击中`how_many == 1`。
3.  有不止一个键。在这种情况下，由于`break`. 我们知道只要`false`遇到第二个键就会得到结果，因此无需继续计数。

该函数将最多进行两次循环迭代。这仍然是一个循环，但没有规则强制您在不需要时运行整个循环，您总是`break`可以早点退出。

演示：http: [//jsfiddle.net/ambiguous/qsNMA/](http://jsfiddle.net/ambiguous/qsNMA/)

对逻辑的细微调整会给你“最多一个”、“至少一个”等。

如果您不是天生的 C 程序员，那么您可以稍微展开逻辑：

```
for own key of obj
    ++how_many
    break if(how_many == 2) 
```

你也可以这样写：

```
(break if(++how_many == 2)) for own key of obj 
```

但这正在推动它IMO。

这些`own`东西只是添加了[`hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)检查以避免意外地从原型中抓取东西。你可能不需要那个，但既然他们真的要抓到我，我宁愿谨慎行事。

还有[`Object.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)，但这不是普遍支持的，当你只关心它的长度是否为 1 时，它必须构建一个完整的数组：

```
exactly_one = (obj) ->
    return false if(!obj)
    Object.keys(obj).length == 1 
```

演示：http: [//jsfiddle.net/ambiguous/aH8wA/](http://jsfiddle.net/ambiguous/aH8wA/)

# php - 从闭包中调用当前闭包

> ID：10920187
> 
> 赞同：4
> 
> 时间：2012-06-06T18:42:28.353
> 
> 标签：php, closures, anonymous-function

在javascript中，你可以做这样的事情

```
arr.map(function(val) {
    return typeof val == 'array' ? val.map(arguments.callee) : val.doSomething();
}); 
```

这将递归迭代`arr`并应用于`doSomething`每个值。

**PHP 中是否有与 JavaScript 的 arguments.callee 等价的东西？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:01:07.283

> PHP 中是否有与 JavaScript 的 arguments.callee 等价的东西？

您必须将函数传递给自身：

```
$func = function($a = 0) use (&$func) {
    echo "$a\n";
    if ($a == 1) {
        return;
    }
    $func(1);
};

$func();

/* output:
0
1
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:48:28.787

我不相信arguments.callee 有等价物。如果你真的想要 php 中的递归 lambda，总是有 y 组合模式：[http ://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator](http://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:49:07.113

不完全按照要求，但可能更合适：

```
array_walk_recursive($arr, function (&$val) {
    $val = doSomething($val);
}); 
```

# ios - iOS 上的 dijkstra 算法

> ID：10920192
> 
> 赞同：8
> 
> 时间：2012-06-06T18:42:46.683
> 
> 标签：ios, graph, dijkstra

我正在跟踪位置及其与其他位置的连接。
我将位置保存在 NSArray 中，而每个位置都表示为字典。每个位置都有 Dictionary 具有属性（locationName、Connections、纬度、经度），其中 Connections 是该位置连接到（而不是从）的其他位置的数组。我使用 lat/lon 和 Haversine 算法来确定两点之间的距离。

NEXT，我想使用dijkstra的最短路径算法找到源位置和目标位置之间的最短路径（源和目标由用户选择）

这不是商业用途，不需要支持成百上千的位置。

我正在寻找一些将执行此搜索的客观 C 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:40:35.277

[一个快速的谷歌在snyderp / PESGraph](https://github.com/snyderp/PESGraph)找到了一些objective-c代码，上面写着

> PESGraph 是 Foundation.kit 的一个简单图形实现，它允许构建节点和路径的结构，然后找到它们之间的最短路径。它包括单元测试，还提供了一些如何使用代码的示例。

这个问题也曾在 SO [theres-an-easy-way-to-apply-a-shortest-path-alghoritm-in-objective-c](https://stackoverflow.com/questions/10737580/theres-an-easy-way-to-apply-a-shortest-path-alghoritm-in-objective-c)上被问过，该解决方案指向了我通过谷歌找到的同一个 git 存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-25T14:18:34.673

我不得不编写自己的示例代码，因为我找不到任何好的和有效的示例。你可以在这里查看：

[https://github.com/aolszak/AOShortestPath](https://github.com/aolszak/AOShortestPath)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T05:09:48.893

无耻插件：[mj-dijkstra](https://github.com/dmitrikozlov/mj-dijkstra) 图形表示是一个 NSDictionary 或行为类似于字典的对象。

# wpf - WPF Grid 允许内部控件自动调整宽度/高度

> ID：10920196
> 
> 赞同：1
> 
> 时间：2012-06-06T18:43:04.000
> 
> 标签：wpf, vb.net, wpf-controls, resize, autosize

嘿，我一直在尝试寻找如何在用户屏幕大于默认大小时自动调整网格控件中的控件大小的示例。

目前，当我放大表单时，我无法调整控件的大小。当前是否有任何代码可以找到网格内的所有控件并在调整表单大小时即时调整它们的大小？

我目前的代码是：

```
<Window x:Class="Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="768" Width="1024">
    <Grid>
        <Grid Height="115" Margin="190,0,195,145" Name="Grid1" VerticalAlignment="Bottom" Background="Cyan">
            <Button Height="45" HorizontalAlignment="Left" Margin="10,10,0,0" Name="Button4" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Left" Margin="101,10,0,0" Name="Button5" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Left" Margin="192,10,0,0" Name="Button6" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="280,10,257,0" Name="Button7" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="0,10,166,0" Name="Button8" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="0,10,75,0" Name="Button9" VerticalAlignment="Top">Button</Button>
            <Button Height="45" HorizontalAlignment="Left" Margin="10,0,0,9" Name="Button10" VerticalAlignment="Bottom">Button</Button>
            <Button Height="45" HorizontalAlignment="Left" Margin="101,0,0,9" Name="Button11" VerticalAlignment="Bottom">Button</Button>
            <Button Height="45" HorizontalAlignment="Left" Margin="192,0,0,9" Name="Button12" VerticalAlignment="Bottom">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="280,0,257,9" Name="Button13" VerticalAlignment="Bottom">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="0,0,166,9" Name="Button14" VerticalAlignment="Bottom">Button</Button>
            <Button Height="45" HorizontalAlignment="Right" Margin="0,0,75,9" Name="Button15" VerticalAlignment="Bottom">Button</Button>
        </Grid>
    </Grid>
</Window> 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:51:08.053

看起来您没有按照预期的方式使用网格。

如果您希望您的 UI 随窗口动态调整大小，您不应该有任何（或至少最小化）硬编码宽度和高度的数量。我看到的第一个问题是内部网格的硬编码高度为 127，因此无论窗口大小如何，网格始终是该高度。去除那个高度是一个很好的第一步。

我也不确定为什么有两个网格 - 所有按钮都不能只是外部网格的子级吗？

最后，您没有在网格中定义任何行或列。我认为您试图使用各个按钮上的`VerticalAlignment`and`HorizontalAlignment`属性来控制它们在窗口上的位置。最好根据您希望按钮的位置来定义行和列。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)有一个如何使用具有多行和多列的网格的示例。

# python - 推荐系统 - 使用不同的指标

> ID：10920199
> 
> 赞同：0
> 
> 时间：2012-06-06T18:43:18.950
> 
> 标签：python, metrics, recommendation-engine, personalization, cosine-similarity

我正在寻找实现基于项目的新闻推荐系统。有几种方法我想跟踪用户对新闻项目的兴趣；它们包括：评分 (1-5)、收藏夹、点击率和花在新闻项目上的时间。

我的问题：有哪些好的方法可以将这些不同的指标用于推荐系统？也许以某种方式合并和规范化它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:43:38.037

研究领域的推荐系统通常以 1 到 5 的等级工作。从用户那里获得如此明确的信号非常好。但是我想现实是，您系统的大多数用户实际上永远不会给出评分，在这种情况下，您没有什么可使用的。

因此，我会跟踪页面浏览量，但也会尝试并结合一些明确的反馈机制（1-5，竖起大拇指或向下等）

您的算法必须考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:10:04.737

对于推荐系统，有两个问题：

1.  如何根据你收集到的数字量化用户对某个项目的兴趣

2.  如何使用量化的兴趣数据向用户推荐新商品

我猜你对第一个问题更感兴趣。

要解决第一个问题，您需要线性组合或其他一些花哨的函数来组合所有数字。确实没有适用于所有系统的单一通用功能。这在很大程度上取决于您的用户和项目的类型。如果你想要一个高质量的推荐系统，你需要有一些数据来做机器学习来训练你的功能。

对于第二个问题，它在某种程度上是同一件事，而且您需要分析所有项目以抽象出彼此之间的一些关系。您可以在 Google 上搜索“Netflix 奖”以获取一些有趣的信息。

# jquery - 使用 jQuery 对基于 Grandchild DIVS 的 DIV 进行排序

> ID：10920201
> 
> 赞同：0
> 
> 时间：2012-06-06T18:43:23.860
> 
> 标签：jquery, sorting, html

我花了最后一天搜索 Stack 并没有找到这个问题的答案，即使有非常相似的解决方案。这是我正在使用的 HTML 代码：

```
<div class="titles">
    <div class="filename" id="sfilename"><strong>Name</strong></div>
    <div class="filesize" id="sfilesize"><strong>Size</strong></div>
    <div class="filetype" id="sfiletype"><strong>Type</strong></div>
    <div class="filedate" id="sfiledate"><strong>Last Modified</strong></div>
</div>

<div id="sort">
    <div class="folder">
        <div class="filename">Folder 1</div>
    <div class="filesize">&nbsp;</div>
        <div class="filetype">&nbsp;</div>
        <div class="filedate">May 12 2012 11:24:44 AM</div>
    </div>
    <div class="folder">
        <div class="filename">Folder 2</div>
    <div class="filesize">&nbsp;</div>
        <div class="filetype">&nbsp;</div>
        <div class="filedate">May 15 2012 09:24:44 AM</div>
    </div>
    <div class="folder">
        <div class="filename">Folder 3</div>
    <div class="filesize">&nbsp;</div>
        <div class="filetype">&nbsp;</div>
        <div class="filedate">May 18 2012 12:24:44 AM</div>
    </div>

    <div class="file">
        <div class="filename">File 1</div>
    <div class="filesize">7.38 Kb</div>
        <div class="filetype">png</div>
        <div class="filedate">May 18 2012 08:24:44 AM</div>
    </div>
    <div class="file">
        <div class="filename">File 2</div>
    <div class="filesize">58.2 Kb</div>
        <div class="filetype">jpg</div>
        <div class="filedate">May 16 2012 07:24:44 AM</div>
    </div>
    <div class="file">
        <div class="filename">File 3</div>
    <div class="filesize">135.87 Kb</div>
        <div class="filetype">mov</div>
        <div class="filedate">May 10 2012 05:24:44 AM</div>
    </div>

</div> 
```

我希望能够根据#filename、#filesize、#filetype 或#filedate div 的内容在#sort div 中进行排序。

我已经用 Javascript 试过了，但没有用：

```
<script type="text/javascript">
function sortUsingNestedText(parent, childSelector, keySelector) {
    var items = parent.children(childSelector).sort(function(a, b) {
        var vA = $(keySelector, a).text();
        var vB = $(keySelector, b).text();
        return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
    });
    parent.append(items);
}

$('#sfilename').data("sortKey", "#filename");
$('#sfilesize').data("sortKey", "#filesize");
$('#sfiletype').data("sortKey", "#filetype");
$('#sfiledate').data("sortKey", "#filedate");

$("#sfilename").click(function() {
   sortUsingNestedText($('#sort'), "div", $("#sfilename").data("sortKey"));
});

$("#sfilesize").click(function() {
   sortUsingNestedText($('#sort'), "div", $("#sfilesize").data("sortKey"));
});

$("#sfiletype").click(function() {
   sortUsingNestedText($('#sort'), "div", $("#sfiletype").data("sortKey"));
});

$("#sfiledate").click(function() {
   sortUsingNestedText($('#sort'), "div", $("#sfiledate").data("sortKey"));
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:28:49.063

用于[`.data()`](http://api.jquery.com/data/)在调用者中存储一个开关`data`，然后拆分您的`folder`/ `file`jQuery 对象以按照您想要的方式组织它。

[**小提琴**](http://jsfiddle.net/ult_combo/K9qNm/14/)- 我使用 data 属性存储`order_by`为单击时将应用于排序的下一个顺序。我也比上一条评论更简化了小提琴。=]

# javascript - PDF JavaScript deletePages

> ID：10920202
> 
> 赞同：2
> 
> 时间：2012-06-06T18:43:24.517
> 
> 标签：javascript, pdf, adobe

我正在研究一个愚蠢的 hack，让我的组织中的用户在浏览器窗口中加载某些 pdf 文件时更难“保存”它们。我能想到的最好的方法（除了使用证书加密，现在不是一个选项）是创建一个“将保存”事件并在保存之前删除文档中的所有页面。

基于[PDF Javascript API](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)，这应该很容易。

```
//-------------------------------------------------------------
//-----------------Do not edit the XML tags--------------------
//-------------------------------------------------------------

//<Document-Actions>
//<ACRO_source>Document Will Save</ACRO_source>
//<ACRO_script>
/*********** belongs to: Document-Actions:Document Will Save ***********/
this.deletePages(0, this.numPages - 1);
//</ACRO_script>
//</Document-Actions> 
```

但是，当我点击保存时，我收到以下错误。即使我只是这样做`this.deletePages(0, 0)`或任何其他数字组合也会发生这种情况。有谁知道我可能会犯什么愚蠢的错误？

```
TypeError: Invalid argument type.
Doc.deletePages:1:Document-Actions:Document Will Save
 ===> Parameter nEnd. 
```

旁注，我找到了另一种“解决”这个问题的方法，即调用`this.closeDoc()`Will Save 事件。这会导致浏览器和 adobe 崩溃（它可以工作！但代价是什么？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:56:03.973

这类似于“防止”用户右键单击图像并保存它们的“技术”。

也许您想退后一步，检查一下您*为什么*不希望用户使用 PDF 进行操作。您是否尝试将技术答案应用于非技术问题？

您正在尝试阻止 Web 浏览器的正常行为，因此您将花费大量时间来尝试正确处理此问题，并且您无法保证您的方法不会因下一个浏览器版本而中断。精通技术的用户会在短时间内绕过您提出的任何技术。

基本上，您是在说，“我想阻止用户使用他们已经下载到计算机的文件做某事（打开/查看/打印）。”

# javascript - 给定一个日期/时间字符串，w javascript/jquery，你如何确定它是否是今天？

> ID：10920203
> 
> 赞同：2
> 
> 时间：2012-06-06T18:43:30.777
> 
> 标签：javascript, jquery

给定一个日期/时间字符串，例如：

```
2010-12-12 19:27:00Z 
```

使用 JS/jQuery 如何轻松确定是否是今天？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:47:54.837

如果您的日期始终采用这种格式：

```
YYYY-MM-DD HH:mm:SSZ 
```

然后应该这样做：

```
var input = '2010-12-12 19:27:00Z';
var year  = parseInt(input.substring(0, 4),  10);
var month = parseInt(input.substring(5, 7),  10);
var day   = parseInt(input.substring(8, 10), 10);
var d     = new Date();

if(d.getUTCFullYear() === year && d.getUTCMonth() + 1 === month && d.getUTCDate() === day) {
    // It's today
} else {
    // It's not
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:54:34.393

您可以使用~~`Date.parse`将字符串转换为时间戳~~ `new Date`以将字符串解析为`Date`对象。

```
var date = '2010-12-12 19:27:00Z',
    // then = new Date(Date.parse(date)),
    then = new Date(date),
    // Firefox doesn't support dates in this format
    // you can covert it to an accepted format like this:
    // then = new Date(date.replace(/(.*) (.*)Z/,'$1T$2'))
    now = new Date; 
```

然后你可以比较日期。

```
if(then.toDateString() === now.toDateString()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:52:20.850

像这样的东西应该可以工作，尽管这假设月份和日期字段将始终为 2 位数字。

```
 var dateInput = "2010-12-12 19:27:00Z"
    var date = dateInput.substring(0, 10); //"2010-12-12"
    var d = new Date();
    var today = d.getFullYear() + "-" + ( d.getMonth() + 1 ) + "-" + d.getDate();

    if( date == today )
        match = true;
    else
        match = false; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T18:56:21.200

```
var input = new Date('2012-06-07 19:27:00Z');
var curr = new Date();
var iDate = input.getDate+'-'+input.getMonth()+'-'+input.getFullYear();
var currDate = curr.getDate+'-'+curr.getMonth()+'-'+curr.getFullYear();
if(iDate== currDate){
    console.log("today");
}else{
    console.log("not");
} 
```

这是[演示](http://jsfiddle.net/XJ4kn/)

# unit-testing - 如何区分 Buildr 中的单元测试和集成测试？

> ID：10920205
> 
> 赞同：0
> 
> 时间：2012-06-06T18:43:37.773
> 
> 标签：unit-testing, buildr, integration-testing

[Buildr 快速入门文档](http://buildr.apache.org/testing.html#integration)有一个关于应该编写集成测试的部分。它简要地说您可以“以与编写单元测试相同的方式编写集成测试”。

但是，它并没有说明 Buildr 如何确定哪些测试（无论是 JUnit4、scalatest 还是其他）只能作为集成测试调用（在 之后执行`package`），哪些被简单地视为单元测试（在之后执行`build`）。

从长远来看，我尝试将（Java）JUnit4 测试源放入`src/it/java`（在未来版本的 Maven 中进行集成测试的建议位置），但 Buildr 没有选择这些测试。

**有人可以澄清我必须在 Buildr 项目中做什么才能让测试不在之后运行，`build`而是在之后`package`**运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:09:28.220

buildr 中的任何给定子项目只能具有单元测试或集成测试。无论是单元测试还是集成测试，项目中测试的位置都是相同的。对于 JUnit4，位置为`[subproject_root]/src/test/java`.

单元测试是默认设置。您通过指令指示子项目的测试是集成测试`test.using`：

```
define 'foo' do
  # ...
  test.using :integration
  # ...
end 
```

# javascript - getLoginStatus on arbitrary site?

> ID：10920209
> 
> 赞同：0
> 
> 时间：2012-06-06T18:44:09.377
> 
> 标签：javascript, facebook, login

My app is displays share buttons for various social media services. Sorta similar to ShareThis, if that helps. It is available for download and installation on customer's websites.

I'd like to prominently feature the share buttons that the user is logged in to. For example, I want to show the FB share button at the top if they are logged in to FB.

When I install my app on the same domain as my app's Site URL, a call to getLoginStatus works great. I can determine if the user has logged in regardless of whether they've given my app permissions.

But when I install my app on a customer's site -- one that's not listed in my app's settings -- getLoginStatus returns this error:

```
Given URL is not allowed by the Application configuration.
One or more of the given URLs is not allowed by the Application configuration
It must match one of the Connect or Canvas URLs or domain must be the same
as or a subdomain of one of the Application&#039;s base domains. 
```

That's not really practical for me, since my app could be installed on thousands of domains, many of which I won't even be aware of.

Is there any way around this? Can I get the user's login status even if I'm running my app on an arbitrary domain?

Thanks a ton for any help you can provide...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:48:45.020

No, I don’t think that’s at all possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:37:19.450

Is there any way around this? Can I get the user's login status even if I'm running my app on an arbitrary domain?

**NO**

Just think about the security and privacy issues related with it :) *What damage those annoying pop ups/ ads can do to the web if they can know you are online on facebook :)*

But yes, there's a hack to know login status but its not recommended if you building an app depending on it.

[Check if someone is online on fb/twitter/gmail](https://grepular.com/Abusing_HTTP_Status_Codes_to_Expose_Private_Information)

# wcf - PhoneGap 文件上传到 WCF

> ID：10920210
> 
> 赞同：0
> 
> 时间：2012-06-06T18:44:12.230
> 
> 标签：wcf, file-upload, cordova

如何将图像从移动设备上传到我的外部数据库？

这是我当前的 WCF 服务：

界面：

```
[WebInvoke(UriTemplate = "/Upload", Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped), CorsEnabled]
string UploadProfileImage(string image); 
```

上课方法：

```
public string UploadProfileImage(string image)    
{ 
    // Upload code needs to go here. 
} 
```

我可以很好地使用 ajax 发布，我只是迷失了如何使用图像来做到这一点。

这是我如何发布帖子的 jQuery 示例。

```
// This is the success function that gets called after selecting an image from my device
function uploadSuccess(imageURI) {
    uploadImage(imageURI);
}

function uploadImage(imageURI)
{
    var data = '{"image":"' + imageURI + '"}'
    $.ajax({
        url: "http://192.168.101.55:8848/api/Upload",
        type: "POST",
        contentType: "application/json",
        data: data,
        success: function (result) {

        },
        error: function (jqXHR, textStatus, errorThrown) {

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:45:46.523

我认为由于跨域发布限制，您无法使用 jquery 实现此目的。
您必须创建表单并将表单“action”指向服务方法的 url，将 enctype="multipart/form-data" 添加到表单标签。
不要忘记将服务输入参数类型更改为“流”

# javascript - 使用 Teechart HTML5/Javascript 在多个图表上同时缩放/滚动

> ID：10920213
> 
> 赞同：0
> 
> 时间：2012-06-06T18:44:19.870
> 
> 标签：javascript, html, scroll, zooming, teechart

我在一个页面中显示多个图表。我使用以下代码在每个图表上启用了缩放和滚动。

```
Chart1.zoom.enabled = true;
Chart1.scroll.enabled = true; 
```

当我在其中一个图表上缩放/滚动时，我希望所有图表同时缩放/滚动。我可以使用 TeeCharts 的 HTML5/Java 脚本版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:54:51.010

我认为它应该像其他 TeeChart 版本一样工作：使用 OnZoom 和 OnUndoZoom 事件并设置其他图表的垂直轴和水平轴最小值。和最大。(SetMinMax) 根据缩放的图表轴比例。

我们将尝试在演示中添加一个示例。

Steema 支持中心。

# amazon-ec2 - 您可以创建自己的 EC2 自动缩放触发器吗？

> ID：10920214
> 
> 赞同：5
> 
> 时间：2012-06-06T18:44:19.963
> 
> 标签：amazon-ec2, amazon-web-services, scalability, infrastructure

当在 EC2 上使用自动扩展组时，文档说您可以根据 cloudwatch 指标触发新服务器。是否可以自己启动新实例？

例如，一个应用程序有一个内部项目队列，一旦该队列达到阈值，它就会向 EC2 发送通知以向组中添加更多服务器。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-29T07:01:57.313

为了将来访问此答案的用户的利益，这里有一个更详细的解释：

EC2 允许您根据计划或根据需求手动设置/更改 Auto Scaling 组的容量，如[文档中所述](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/scaling_typesof.html)。

然而，手动扩展这个术语可能有点误导，因为就像 AWS 的几乎所有方面一样，您可以手动执行的所有操作都可以通过 CLI 或 SDK 编写脚本。

在 EC2 自动伸缩组的情况下，容量是可配置的，并且可以在运行时动态更改 - 容量的更改将导致实例自动添加或删除。

因此，在这种情况下，一种解决方案是在您的应用程序代码中检测特定于您的应用程序的生命周期事件，并使用相关的 AWS 开发工具包来响应这些事件来更改您的自动扩展组的容量。

在 ruby​​ 中，这可以按如下方式完成（示例取自[AWS API 文档](http://docs.aws.amazon.com/sdkforruby/api/Aws/AutoScaling/Client.html)）：

```
autoscaling = Aws::AutoScaling::Client.new(
  region: region_name,
  credentials: credentials
)

resp = autoscaling.set_desired_capacity(
  # required
  auto_scaling_group_name: "ResourceName",
  # required
  desired_capacity: 1,
  honor_cooldown: true,
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T20:31:15.437

我发现答案是肯定的，相关文档在这里：[http ://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/scaling_typesof.html](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/scaling_typesof.html)

# css - CSS 渐变 - 更少的 Mixins

> ID：10920216
> 
> 赞同：6
> 
> 时间：2012-06-06T18:44:25.467
> 
> 标签：css, less

我只是想知道是否可以通过对 CSS 代码应用变亮或变暗来改变 Less mixin 渐变的颜色？

这是较少的混合：

```
.css-gradient(@from: #20416A, @to: #3D69A5) {
    background-color: @to;
    background-image: -webkit-gradient(linear, left top, left bottom, from(@from),  to(@to));
    background-image: -webkit-linear-gradient(top, @from, @to);
    background-image: -moz-linear-gradient(top, @from, @to);
    background-image: -o-linear-gradient(top, @from, @to);
    background-image: -ms-linear-gradient(top, @from, @to);
    background-image: linear-gradient(top, @from, @to);
} 
```

在 Less 文件中，我想做这样的事情：

```
#div {
    width:100px;
    height:100px;
    .css-gradient (darken, 10%);
} 
```

不知道这是否可能，或者是否有其他方法我应该这样做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T20:40:51.687

我会这样做：

```
.css-gradient(darken(#20416A,10%),darken(#3D69A5,10%)) 
```

当然你也可以这样做：

```
.css-gradient(@from: #20416A, @to: #3D69A5) {
    background-color: @to;
    background-image: -webkit-gradient(linear, left top, left bottom, from(@from),  to(@to));
    background-image: -webkit-linear-gradient(top, @from, @to);
    background-image: -moz-linear-gradient(top, @from, @to);
    background-image: -o-linear-gradient(top, @from, @to);
    background-image: -ms-linear-gradient(top, @from, @to);
    background-image: linear-gradient(top, @from, @to);
}
.css-gradient(darken,@amount: 10%, @from: #20416A, @to: #3D69A5){
    .css-gradient(darken(@from,@amount),darken(@to,@amount));
} 
```

然后就叫它：

```
.css-gradient(darken,10%); 
```

或者：

```
.css-gradient(#20416A, #3D69A5); 
```

或者：

```
.css-gradient(darken,5%,#00ff00,#ff0000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T17:49:24.120

少混合：

```
.gradient(@dir: 0deg; @colors; @prefixes: webkit, moz, ms, o; @index: length(@prefixes)) when (@index > 0) {
    .gradient(@dir; @colors; @prefixes; (@index - 1));

    @prefix : extract(@prefixes, @index);
    @dir-old: 90 - (@dir);

    background-image: ~"-@{prefix}-linear-gradient(@{dir-old}, @{colors})";
    & when ( @index = length(@prefixes) ) {
        background-image: ~"linear-gradient(@{dir}, @{colors})";
    }
} 
```

使用：.gradient(90deg, #FFAA64, #FFCD73);

# algorithm - 折叠一张纸（计算机视觉）

> ID：10920221
> 
> 赞同：6
> 
> 时间：2012-06-06T18:44:49.257
> 
> 标签：algorithm, geometry, linear-algebra

我正在尝试将带有折叠折痕的 2D 草图转换为完整的 3D 表示。**红线将是山谷和蓝山/顶部**。我想计算转换/映射坐标 {P1'...P8'}。我还没有找到任何可以自动执行此操作的好软件，但希望得到提示。

![折叠图案](../Images/f184837bef2c612801bb7540fdcc71d9.png)

*   **a** - 折叠角
*   **P** - 坐标
*   **E-**元素
*   蓝线——折山
*   红线——折谷

**[折叠](http://i50.tinypic.com/21mx643.png)**a1 = a2 = a3 = 90 度 (pi/2 rad)（折叠角）和箭头作为表面法线

我正在使用 Matlab，但我正在寻找解决这个问题的通用算法。

假设点**P0**固定在 origo 并且元素**E1**不会改变其坐标，我应该如何最好地描述转换？我应该使用非齐次坐标还是齐次坐标，极坐标？

例如，点 P8 取决于取决于角度的其他坐标。

我想我可以为点（节点）和/或将每个元素与其节点配对的矩阵使用某种邻接矩阵。例如：[E1 P0 P4 P5 P1 ; E2 P1 P5 P6 P2 ; ...]

每个坐标的变换是变换+旋转，变换取决于坐标/元素。但是连接几个元素会变得很棘手......

如何将带有折叠图案的 2D“纸”巧妙地转换为 3D 坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:10:42.307

您可以遍历每个折叠折痕，并计算位于折痕一侧的所有像素的变换。

您可以使用变换矩阵来计算折叠点的坐标。查看[描述变换矩阵的维基百科文章](http://en.wikipedia.org/wiki/Transformation_matrix)。

首先，平移所有点，使折痕与轴对齐，然后根据折痕的方向旋转折痕一侧的所有点。然后，您可以反转第一个平移，使图形回到原来的位置。用下一个折痕重复这个过程，直到你完全折叠了图形。

使用matlab，矩阵计算很容易进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:10:17.003

您也许可以使用用于描述具有多个旋转关节的机器人的技术；比您的问题可以描述为[正向运动学](http://en.wikipedia.org/wiki/Forward_kinematics)问题。另一个有趣的阅读可能是[这个](http://www4.cs.umanitoba.ca/~jacky/Robotics/Papers/spong_kinematics.pdf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:15:05.487

您只想对线一侧的每个点应用线性变换。

变换是围绕轴的旋转，其变换矩阵[由下式给出](http://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle)

![在此处输入图像描述](../Images/037c3965b2b6320b7c7997ec5b0bf9a4.png)

由于轴不以原点为中心，因此您需要先对原点应用平移，然后进行旋转，然后再平移回来。

# jquery - 如何使用 jQuery replaceWith 替换不同数量的元素

> ID：10920224
> 
> 赞同：0
> 
> 时间：2012-06-06T18:44:59.990
> 
> 标签：jquery, replacewith

我有不同数量的具有相同类名的元素：

```
<p class="test"></p>
<p class="test"></p> 
```

我想用一组具有相同类名的新元素替换其中的每一个，但可能会有更多或更少的元素：

```
<p class="test"></p> 
```

或者

```
<p class="test"></p>
<p class="test"></p>
<p class="test"></p> 
```

如果我使用`$('p.test').replaceWith('new content')`，它将用内容替换每个元素，所以我不能这样做。

实现这一目标的最佳方法是什么？

编辑（另一种解释）：

所以我在页面上有这些元素：

```
<p class="test"></p>
<p class="test"></p>
<p class="test"></p> 
```

然后，我动态检索一组具有相同类名（可能还有其他一些类名）的新元素（数量不等）。例如：

```
<p class="test classa"></p>
<p class="test classb"></p> 
```

在上面的示例中，我希望前三个`<p>`元素消失。取而代之的是 2 个动态检索的`<p>`元素。

请记住，任一集合的元素数量可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:05:14.083

$('p.test') 是一个数组，你可以在其中循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:45:46.667

更新：

假设你有你`<p>'s`的容器

```
<div id="container">
    <p class="test"></p>
    <p class="test"></p>
    <p class="test"></p>
    <p class="test"></p>
</div> 
```

您可以删除它们，并附加（或预先添加）新元素

```
$('p.test').remove(); //Will remove all <p>'s with class test 
```

我假设您的新元素集在**数据**数组中

```
var data= { 
  '1': '<p class="newclass">Hello</p>', 
  '2': '<p class="newclass2">Hello2</p>' 
  '3': '<p class="newclass3">Hello3</p>' 
  }; //Could have 100 rows, it wouldn't matter

$.each(data, function(i,val){   
        //Do some stuff
        $('#container').append(val);
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T21:17:07.530

我会有一个环境`<div>`，每次都用你的新元素集替换那个 div。所以：

```
<div id="surround">
  <p class="test"></p>
  <p class="test"></p>
  <p class="test"></p>
</div> 
```

然后是 jQuery：

```
$("#surround").replaceWith('new content'); 
```

# android - Android Activity 消失 - Activity 生命周期

> ID：10920226
> 
> 赞同：0
> 
> 时间：2012-06-06T18:45:05.593
> 
> 标签：android, android-activity, lifecycle

我从来没有遇到过这种情况，怎么回事？

我有一个启动 Activity A，它启动另一个 Activity B (forResult)。然后当我点击主页按钮时，两者都继续暂停。当我通过 Android 应用程序选择器（或任何所谓的，当你长按主页按钮时）返回我的应用程序时，活动 B 被破坏。

我怎样才能恢复活动 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:06:51.103

我可能是错的，但听起来您遇到了一个已知问题：[从 Eclipse 启动时，在应用程序的第一次运行期间，活动堆栈的行为不正确](http://code.google.com/p/android/issues/detail?id=2373)。

还要检查这个问题（这实际上是同一个问题，但由另一个用户报告）：[当应用程序通过浏览器、市场安装或市场更新启动时，应用程序启动从根本上被破坏](http://code.google.com/p/android/issues/detail?id=26658)。

# c# - 在运行时从 XML 检索和处理服务器端值

> ID：10920232
> 
> 赞同：0
> 
> 时间：2012-06-06T18:45:36.823
> 
> 标签：c#, xml

我正在尝试实施一种解决方案来更新用户控件显示的内容，而无需重新发布用户控件本身。UC 从外部文件获取 xml 作为其内容，而不是将内容存储在控件中，因此 xml 是重新发布的内容，而不是 UC。

问题是我还需要内容包含内联变量，例如 <% =myvariable %>。有没有办法检索 xml，然后在运行时也运行它而不是将其视为文本？

以下只是一个基本示例，仅包含与此问题相关的基础知识，而不是页面上代码的全部范围，但希望它足以阐明我的要求。而不仅仅是“Response.Write(xmlcontent);” 有什么方法可以让检索 xml 的值像运行时页面的“本机”一样运行并处理该内联变量？

用户控制：

```
<script runat="server">
string xmlcontent = "";
protected override void OnLoad(EventArgs e)
{
    try
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(Server.MapPath("/usercontrols/xml/test.xml"));
        xmlcontent = doc.SelectSingleNode("content").InnerText;
    }

    catch
    {

    }
}

</script>

<%if (!string.IsNullOrEmpty(xmlcontent))

 {
     Response.Write(xmlcontent);
 } %> 
```

XML:

```
<content>
<![CDATA[<div>This is the content. The next word is a C# variable <% =variabletest %>.</div>]]>
</content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:59:31.080

尝试这个 ：

```
<script runat="server">
        string xmlcontent = "";
        protected override void OnLoad(EventArgs e)
        {
            try
            {
                System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
                doc.Load(Server.MapPath("/usercontrols/xml/test.xml"));
                ltrl.Text = String.Format(doc.SelectSingleNode("content").InnerText, variabletest);
            }

            catch (Exception ex)
            {
                ltrl.Text = ex.Message;
            }
        }
 </script>

<div>
    <asp:Literal runat="server" ID="ltrl" />
</div> 
```

您可以使用 String.Format 传递 var 值并将其与 xml 内容合并。定义一个文字控件以将内容写入页面。

# sql - 根据值插入表格

> ID：10920233
> 
> 赞同：-1
> 
> 时间：2012-06-06T18:45:44.750
> 
> 标签：sql, oracle, insert

下面是表`UPI_ATTRIBUTE_TABLE`和列的名称是`UPI_ATTRIBUTE_ID`, `USER_PROFILING_ID`, `USER_PROFILING_NAME`, `SITE_INCLUSION`,`SITE_EXCLUSION`值在那里。

**问题陈述：-**

我需要在`SITE_INCLUSION`和`SITE_EXCLUSION`列中插入值`CAR_EXPLICIT (USER_PROFILING_NAME)`和`CAR_IMPLICIT (USER_PROFILING_NAME)`值。但目前`SITE_INCLUSION`and`SITE_EXCLUSION`对应于`CAR_EXPLICIT`and是空的`CAR_IMPLICIT`。我现在需要在 SITE_INCLUSION 前面添加“0”。SITE_INCLUSION 和 SITE_EXCLUSION 的数据类型是 varchar2(200)。在 SITE_INCLUSION 列的 CAR_EXPLICIT 和 CAR_IMPLICT 前面添加“0”后，应如下表所示。目前 SITE_INCLUSION 和 SITE_EXCLUSION 在 CAR_EXPLICIT 和 CAR_IMPLICIT 前面为空（null）。

而且，如果我需要将相同的值从“0”更新为“0;100”，那我该怎么做。

```
**UPI_ATTRIBUTE_TABLE**

UPI_ATTRIBUTE_ID       USER_PROFILING_ID    USER_PROFILING_NAME          SITE_INCLUSION     SITE_EXCLUSION
5000000000              1                   LAST_QUERIES_USED
5000000001              11                  LAST_CATEGORIES_ACCESSED
5000000002              4                   LAST_PRODUCTS_VIEWED
----                    ----                ----           
----                    ----                ----
----                    ----                ----
----                   ----                 ----
5000000094             156                  CAR_EXPLICIT                    0
5000000095             155                  CAR_IMPLICIT                    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:06:08.893

```
UPDATE UPI_ATTRIBUTE_TABLE 
   SET SITE_INCLUSION = '0' + USER_PROFILING_NAME
 WHERE USER_PROFILING_NAME IN ('CAR_EXPLICIT','CAR_IMPLICIT') ; 
```

?

# database - NHibernate IDataBaseSchema.GetTableMetadata 方法获取一个数据行。我怎样才能使用这种方法？

> ID：10920235
> 
> 赞同：0
> 
> 时间：2012-06-06T18:45:52.163
> 
> 标签：database, sqlite, nhibernate, schema, hbm2ddl

我正在尝试验证已创建表。我正在使用 SQLite 和 NHibernate。

```
new SchemaExport(_configuration)
            .Execute(true, true, false, _session.Connection, Console.Out);

IDataBaseSchema dbMeta = new SQLiteDataBaseMetaData((DbConnection) _session.Connection);
ITableMetadata tbMeta = dbMeta.GetTableMetadata(//where do I get the datarow this method needs?, and what are the extras args?); 
```

如何正确使用此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:52:46.883

我建议您验证您的映射和数据库模式是否同步（请参阅[SchemaValidator](http://nhforge.org/blogs/nhibernate/archive/2008/11/22/nhibernate-schemavalidator.aspx)）；这应该够了吧。

# javascript - JQuery 函数突然停止工作，错误转换 Javascript 参数

> ID：10920238
> 
> 赞同：2
> 
> 时间：2012-06-06T18:46:12.343
> 
> 标签：javascript, jquery

大约一年前，我编写了一个 JQuery/Javascript 脚本，该脚本对 PHP 页面进行 ajax 调用以更改用户密码，从那时起它一直运行良好。今天早些时候，我开始抱怨 ajax 调用不再有效。当我去提交密码更改表单时，我收到以下错误：

> 无法转换 JavaScript 参数 arg 0 [nsIDOMDocumentFragment.appendChild] [http://www.site.com/js/jquery-1.4.4.min.js](http://www.site.com/js/jquery-1.4.4.min.js) 第 124 行

即使发生此错误，用户的密码也会更改，并且 PHP 的输出与应有的完全一样......格式正确的 json 字符串：

```
{"Authenticated":{"0":"false"},"MessageString":{"0":"Your User Password Was Changed Successfully."},"PasswordChanged":{"0":"true"}} 
```

与该项目相关的文件在几个月内都没有更改，并且该表单每天至少使用几次，所以我不确定它为什么突然停止工作。

这是我正在运行的脚本，我正在使用 JQuery 1.4.4 运行它：

```
function makePasswordRequest() {
    email = jQuery("#email").val();
    currentPassword = jQuery("#currentPassword").val();
    newPassword = jQuery("#newPassword").val();
    newPasswordRetype = jQuery("#newPasswordRetype").val();
    jQuery.post("../changeUserPassword.php", { 
            email: email, 
            currentPassword: currentPassword, 
            newPassword: newPassword, 
            newPasswordRetype: newPasswordRetype 
        },
         function(data){
           if(data.PasswordChanged[0] == true || data.PasswordChanged[0] == "true"){
                jQuery("#notificationArea").removeClass("failure");
                jQuery("#notificationArea").addClass("success");
           }
           else{
                jQuery("#notificationArea").removeClass("success");
                jQuery("#notificationArea").addClass("failure");
           }
           jQuery("#notificationArea").html(data.MessageString);
         }, "json");
};
function resetPasswordRequest() {
    email = jQuery("#email2").val();
    jQuery.post("../resetUserPassword.php", { 
            email: email,  
        },
         function(data){
           if(data.PasswordChanged[0] == true || data.PasswordChanged[0] == "true"){
                jQuery("#notificationArea2").removeClass("failure");
                jQuery("#notificationArea2").addClass("success");
           }
           else{
                jQuery("#notificationArea2").removeClass("success");
                jQuery("#notificationArea2").addClass("failure");
           }
           jQuery("#notificationArea2").html(data.MessageString);
         }, "json");
};
jQuery(document).ready(function(){
    jQuery("#passwordChangeForm").submit(function(e){
        e.preventDefault();
        makePasswordRequest();
    });
    jQuery("#passwordResetForm").submit(function(e){
        e.preventDefault();
        resetPasswordRequest();
    });
}); 
```

我无法弄清楚问题是什么，特别是因为去年这一直运作良好。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:55:20.243

我不知道这是否会成为问题，但是当您使用以下内容设置一个元素的内部 HTML 时：

```
jQuery("#notificationArea").html(data.MessageString); 
```

data.MessageString 是{“0”：“您的用户密码已成功更改。”}，所以我想知道这是否有问题？你不想要 data.MessageString[0] 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:58:22.557

我很确定问题在于 jquery 没有检测到它的 JSON 并且没有正确转换 JSON。尝试在输出之前发送正确的标题。

```
header('Content-Type: application/json'); 
```

必须改变的是您的服务器的配置。这并不取决于你

# eclipse - Eclipse 上的颠覆边缘

> ID：10920241
> 
> 赞同：1
> 
> 时间：2012-06-06T18:46:36.557
> 
> 标签：eclipse, svn, subversion-edge

如何在 Eclipse 上配置颠覆边缘。我没有这方面的经验。如果有人能告诉我步骤，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:03:29.170

了解如何做到这一点。刚刚为 Eclipse 安装了 CollabNet 桌面。就这么简单！

# linux - NASM 中的输出数据寄存器值

> ID：10920242
> 
> 赞同：5
> 
> 时间：2012-06-06T18:46:49.800
> 
> 标签：linux, assembly, nasm

新人来了，我已经有一个问题了。

我正在修改 Jeff Duntemann 汇编书中使用的示例代码，并且我想将存储在数据寄存器中的整数值打印到终端？

下面的代码所做的是它可以打印出字符串，可以在 ECX 中推送值，但是当它到达以下内容时：

```
 pop ecx
                mov eax,4                          
                mov ebx,1                          
                mov edx, ecx

                int 80h 
```

它不会在终端上显示 edx 的内容，尽管我想我是用 mov eax,4 等告诉它的。

谁能给我任何“指针”（双关语）？

参考代码（自 2012 年 6 月 17 日起修订）：

```
SECTION .data
    submessage: db "I am subtracting 5 from 10!", 10
    msglen: equ $-submessage

    ansmsg: db "Answer is:", 10
    msglen2: equ $-ansmsg
    EOL: db 10

SECTION .bss
    msg: resd 2                                         ; reserve space for 2 dwords

SECTION .text

global _start

_start: nop

;Displays test on shell
                    mov eax,4                           ;print to terminal     
                    mov ebx,1                                      
                    mov ecx, submessage
                    mov edx, msglen
                    int 80h                             ;"I am subtracting 5 from 10!"

                    mov eax,4                           ;print to terminal   
                    mov ebx,1                                            
                    mov ecx, ansmsg
                    mov edx, msglen2
                    int 80h                             ;"Answer is..."

;Subtraction operation below:                  
                            mov edx, 10
                            sub edx, 5
                            mov [msg], edx                ; store 5 in msg

; now we need to print  msg to terminal                            

                            mov eax, 4                  ;print to terminal 
                            mov ebx, 1
                            mov dword [msg+1], 0xa      ;helps prints something out! 

                    ;Encountered problem here= prints out 'Answe' instead of integer '5'

                            push dword 2                ; store size of msg
                            push dword [msg]            ; push to stack contents of msg 
                            int 80h                    

                            add esp, 3                  ;clean stack (2 push calls *4)
                            int 80h

; I like labels :)

sys_exit:                            mov eax,1                   ;exit status
                                    mov ebx,0                        
                                    int 80h  
                                        nop 
```

PS-如果我的行缩进很糟糕，我想知道如何改进它；恕我直言，一旦您克服了最初的学习“驼峰”，学习大会就会变得更有吸引力:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T01:02:30.783

首先，感谢这个问题——它促使我学习 int 80h，这是我以前不熟悉的东西。

您的程序以当前形式做什么？它打印任何东西吗？如果我在脑海中正确执行它，我希望它打印第一条消息然后崩溃。由于缓冲，它甚至可能不会显示可疑崩溃之前的第一条消息。

int 80h/eax=4 映射到 write() 函数。运行“man 2 write”以获取完整文档。函数原型为：

```
ssize_t write(int fd, const void *buf, size_t count); 
```

所以，eax = 4，ebx = fd，ecx = buf，edx = count。如果您想对代码注释更加迂腐，“mov eax,4”表示“将字符串写入文件”，而“mov ebx,1”表示“指定文件#1，映射到 STDOUT（终端）” .

我希望第一个 int 80h 调用打印一些东西。第二个 int 80h 调用是可疑的。此时 eax 和 ebx 不变。但是， edx 也没有改变，它保存第一个字符串的字符串长度。更大的问题是您将值 5 放入 ecx。ecx 保存*指向*要写入的字符串的指针，而不是要写入的值。因此，当您将 5 放在那里并调用中断时，int 将尝试打印从地址 0x00000005 开始的字符串。这几乎肯定会导致段错误（崩溃）。

此外，如果我正确阅读了 int 80h 文档，那么您示例中的推送/弹出堆栈操作没有任何相关性。

在 ASM 中将数字打印为字符串有点麻烦。您需要将数字转换为字符串，然后您可以使用 int 80h 打印它。如果您只想打印一个数字，可以使用以下方法作弊：

*   在 .data 部分中，声明一个名为 int2char: 'int2char: db 0' 的新字节
*   从 ecx 中减去 5 后，通过添加 48 将数字转换为 ASCII（这会给你 '5' 而不是 5）
*   将 ecx 存储到 int2char
*   将 int2char 的地址移入 ecx
*   将 edx 设置为 1 因为您只想打印 1 个字符

一旦你得到这个工作，转换多于一位的数字将作为练习留给你。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:26:46.497

我认为推送消息是相关的。这是“hello world”程序的另一个示例。

```
section     .text
    global _start                       ;must be declared for linker (ld)

_syscall:           
    int     0x80            ;system call
    ret

_start:                         ;tell linker entry point

    push    dword len       ;message length
    push    dword msg       ;message to write
    push    dword 1         ;file descriptor (stdout)
    mov     eax,0x4         ;system call number (sys_write)
    call    _syscall        ;call kernel

                         ;the alternate way to call kernel:
                         ;push   eax
                         ;call   7:0

    add     esp,12          ;clean stack (3 arguments * 4)

    push    dword 0         ;exit code
    mov     eax,0x1         ;system call number (sys_exit)
    call    _syscall        ;call kernel

                         ;we do not return from sys_exit,
                         ;there's no need to clean stack
section .data

    msg     db      "Hello, world!",0xa     ;our dear string
    len     equ     $ - msg                 ;length of our dear string 
```

现在，我没有编写上面的代码，它来自这里：

[http://www.cin.ufpe.br/~if817/arquivos/asmtut/index.html#helloworld](http://www.cin.ufpe.br/~if817/arquivos/asmtut/index.html#helloworld)

所以你可以看到这个作者能够将值移动到堆栈上并调用内核例程，该例程将从堆栈中取出参数。这实际上对我来说更有意义，因为我认为这就是将参数传递给 c 函数的方式。通过特定寄存器传递参数是没有意义的。如果一个方法有 30 个参数，你将如何通过寄存器传递呢？

无论如何，我已经编译了上面的代码，链接它并在我的 macbook pro 上运行它，它运行良好。

不管怎样，和上面的例子一样好，它并没有教给你太多东西。我认为，这里是一个更好的例子，说明如何从寄存器中打印出任意值。

所以我想要的不是预定义的字符串，而是真正的编程构造；一个变量。

很简单，您可以通过执行以下操作来定义一个 32 位变量：

```
section .bss
    msg:     resd 2 
```

这给了我一个名为“msg”的变量（或内存位置），我可以将内容存储到其中。通过用 resd 声明它，我定义了我想要保留的双字的数量。双字是 32 位，所以我声明我要保留 2 个双字。为什么是2？我一会儿告诉你。

到现在为止还挺好。

现在我需要做的就是将一个值移动到该内存位置并按照 hello, world 中的示例进行操作，对吗？所以我编码了这个：

```
section     .text
    global _start                       ;must be declared for linker (ld)

_syscall:           
    int     0x80            ;system call
    ret

_start:                     ;tell linker entry point
    mov dword [msg], 'h'    ;move the letter h into my memory location
    mov dword [msg+1], 0xa  ;this is so important, but other author's gloss over it
                            ; the line terminator is essential in order to
                            ; print something out
    push    dword 2         ;message length
    push    dword msg       ;message to write
    push    dword 1         ;file descriptor (stdout)
    mov     eax,0x4         ;system call number (sys_write)
    call    _syscall        ;call kernel

                         ;the alternate way to call kernel:
                         ;push   eax
                         ;call   7:0

    add     esp,12          ;clean stack (3 arguments * 4)

    push    dword 0         ;exit code
    mov     eax,0x1         ;system call number (sys_exit)
    call    _syscall        ;call kernel

                         ;we do not return from sys_exit,
                         ;there's no need to clean stack
section .bss
    msg:     resd 1 
```

所以没有太大的变化。我添加了 .bss 部分，用于未初始化的数据。比静态字符串有用得多。我们正在将一个静态值（字母 h）移动到我的 msg 内存位置，但是您可以像这样轻松地移动一个寄存器

```
mov [msg], eax 
```

下一行非常重要，但每个“hello world”作者都忽略了它。那 0xa 是标准输出需要的行终止符，否则它不会显示您的值。这让我发疯了很长一段时间，试图弄清楚为什么我的任何东西都不会打印出来。你需要那个行终止符。这也是为什么我们需要定义我们的变量来保存两个值而不是一个。我们需要存储该行终止符。

其余的很简单，将参数扔到堆栈上并调用内核。现在您有了一个真实示例，说明如何从实际的可变数据位置打印出一些任意数据。享受！

# facebook - 如何使用 facebook API 获取最新帖子的列表？

> ID：10920245
> 
> 赞同：0
> 
> 时间：2012-06-06T18:47:27.387
> 
> 标签：facebook, facebook-graph-api

当我登录 facebook.com 时，我可以看到我所有朋友按时间顺序发布的帖子列表。

使用 facebook API，如何获取此帖子列表？如果我做 $facebook->api('me/posts') 它只返回我发布的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:04:40.770

也许您正在寻找 $facebook->api('me/home')？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:07:56.783

你应该使用`$facebook->api('me/feed')`.

# javascript - 拉斐尔没有运行回调参数

> ID：10920247
> 
> 赞同：1
> 
> 时间：2012-06-06T18:47:34.940
> 
> 标签：javascript, callback, raphael, incompatibility, yepnope

使用 yepnope 加载 Raphael 后，我尝试使用回调参数运行 Raphael - 根据以下部分：

[http://raphaeljs.com/reference.html#Raphael](http://raphaeljs.com/reference.html#Raphael)

示例代码：

```
 yepnope({
        load: 'lib/raphael.js',
        complete: function () {
            Raphael('idm', 10, 10, function () {alert('callback run!')});
        }
    }); 
```

不幸的是，回调不能在 Firefox 和 IE 中运行。它确实在 Chrome 中运行。我该怎么做才能使回调在所有浏览器中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:42:49.147

我也有这个问题。通过 YepNope 加载异步脚本时，回调函数不会在 IE 8 ,9 中运行。但是firefox和chrome都很好。所以我决定通过'script'标签包含js文件。虽然它使加载时间变慢。

# javascript - 使用 Cakephp 动作的 HTML 样式输入

> ID：10920249
> 
> 赞同：1
> 
> 时间：2012-06-06T18:47:47.747
> 
> 标签：javascript, jquery, cakephp, button, formhelper

在我的 index.ctp 中，我正在创建一个表格，表格的最后一列将有 3 个按钮来对该特定行执行操作。按钮将是查看、编辑和删除。

我试图决定什么会更容易，使用 cakephp 的表单助手创建一个按钮并将该按钮与相应的控制器操作链接，或者使用 javascript 创建输入，但是我将如何将 onclick 链接到控制器操作。

我是 cakephp 的菜鸟，所以任何帮助都会很棒。

这是使用表单的按钮的代码：

```
<td><input type="button" id="viewButton" value="View"/><input type="button" id="editButton" value="Edit"/><input type="button" id="deleteButton" value="Delete"/></td> 
```

（我在按钮上没有任何事件，因为我不知道如何将事件链接到控制器）

这是同样的事情，但用 cakephp 的表单助手编写：

```
<td><?php echo $this->Form->button('View', array('type' => 'button', 'action' => 'view'), $LocalClock['LocalClock']['id']);
echo $this->Form->button('Edit', array('type' => 'button', 'action' => 'edit', $LocalClock['LocalClock']['id']));
echo $this->Form->button('Delete', array('type' => 'button', 'action' => 'delete', $LocalClock['LocalClock']['id']));?>
</td> 
```

我需要帮助让按钮与他们的操作进行交流。最终，我将尝试打开一个模式窗口，其中包含窗口中的一个视图。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:23:51.420

我找到了自己问题的答案。

我可以使用这样的按钮

```
<button onclick="location.href='<?php echo $html->url('/controller/ 
action'); ?>';">Click me</button> 
```

当调整以适合我的特定程序时，我得到了

```
<td> <input type="button" class="viewButton" value="View" onclick="location.href='<?php echo $this->Html->url(array('controller' => 'localClocks', 'action' => 'view', $LocalClock['LocalClock']['id'])); ?>';"/>
    <input type="button" class="editButton" value="Edit" onclick="location.href='<?php echo $this->Html->url(array('controller' => 'localClocks', 'action' => 'edit', $LocalClock['LocalClock']['id'])); ?>';"/> 
```

Html->url(array('controller' => 'localClocks', 'action' => 'delete', $LocalClock['LocalClock']['id'])); ?>';"/>

我只是想我会分享我的发现。谢谢

# c# - C#确定父窗体上自定义字符串的值

> ID：10920255
> 
> 赞同：0
> 
> 时间：2012-06-06T18:48:01.210
> 
> 标签：c#

我在标准 Windows 窗体上有一个自定义文本框。在 TextBox 的 OnLeave() 中，我试图找出在其构造函数中添加到表单的特定自定义字符串属性的值；

表单构造函数；

```
public partial class FormName : Form
{
    public string psTableName { get; set; } 
```

文本框 OnLeave 方法；

```
 protected override void OnLeave(EventArgs e)
    {
        try
        {
            if (!Convert.ToDouble(this.Text).Equals(this.rnOrigValue))
            { 
```

在上面的 if 语句中，我试图找到；

```
This.FindForm().psTableName 
```

我试过循环控制；

```
foreach (Control loObject in this.FindForm().Controls)
{
// Code here
} 
```

但这仅检索文本框、标签等。但是我可以找到 psTableName 的值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:53:07.547

首先，字符串不是控件，因此不会被返回`FindForm().Controls`

既然它是一个公共成员，你不能这样做：

`(this.FindForm() as FormName).psTablename`

我会首先检查 null，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:53:12.380

你可以这样做：

```
FormName form = this.FindForm() as FormName;
if (form != null)
{
    string psTableName = form.psTablename;
} 
```

但是，这通常是不好的做法。通常，您不希望 UserControl 假定它的父窗体属于特定类型。最好在控件上创建一个可以由表单设置的公共表名属性。

Controls 集合包含表单的所有子控件的列表。除非您的代码专门通过调用将其添加到该集合中，否则该集合中不会出现任何内容`Controls.Add`。通过查看设计器生成的代码文件，您可以查看所有控件的代码。

您提到了表单的构造函数，但您没有显示它。

此外，`this`除非您有命名冲突，否则您会继续使用不必要的关键字。当没有命名冲突时，使用`this`关键字是可选的。例如，您可以简单地说`FindForm().Controls`or `Convert.ToDouble(Text).Equals(rnOrigValue)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:07:08.707

正如 Devin 所建议的，这种代码可以解决您的问题：

```
(this.FindForm() as FormName).psTablename 
```

但我认为这不是你真正想要的。实际上，这仅在您的自定义 TextBox 用于 FormName 或从 FormName 派生的 Form 时才有效，因为`this.FindForm() as FormName`在所有其他情况下都会返回 null。这对控件来说是一个很大的限制，我会尽量避免它。

例如，您可以将 psTableName 属性添加到可以由表单传递的控件，但您应该小心地在每次表单中的属性更改时更新它（可能是临时事件）。

否则，您应该以这种方式使用反射：

```
string s;
Form parentForm = FindForm();
PropertyInfo pi = parentForm.GetType().GetProperty("psTableName");
if (pi != null)
    s = (string)pi.GetValue(parentForm, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:56:53.400

这是否实现了您正在寻找的东西？

```
protected override void OnLeave(EventArgs e)
{
    string x = this.psTableName;
} 
```

# zend-framework - 教义中的分页

> ID：10920262
> 
> 赞同：1
> 
> 时间：2012-06-06T18:48:12.050
> 
> 标签：zend-framework, extjs, doctrine

我在我的项目中使用 Doctrine 1.2.4、Zend Framework 11 和 ExtJS 3.4。所以我的数据库中有数千条记录的表，比如学生。所以我使用 DQL 语言检索这些数据，然后我需要对这些数据进行分页并使用 Doctrine_Pager。在大多数情况下，我在检索数据时没有任何问题，但是当我在 DQL 中添加 where 子句并使用类似这样的东西时

```
where("st.name ~* 'a'") 
```

并返回一个 Doctrine 错误。我该如何解决？

```
SQLSTATE[42883]: Undefined function: 7 ERROR: el operador no existe: text ~* st_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:50:48.773

您的 where 语句是错误的，您不应该使用`where st.name like '*a'`吗？

# mysql - 触发器中的语法不正确

> ID：10920272
> 
> 赞同：2
> 
> 时间：2012-06-06T18:48:49.830
> 
> 标签：mysql, sql

我有两个表，称为帐户和交易。帐户插入数据时，我需要自动将数据插入事务。我在 MySQL 中创建了这个触发器。它给出错误 1064（语法错误）。问题是什么？

```
CREATE TRIGGER upTransaction AFTER INSERT ON account FOR EACH ROW
BEGIN
  INSERT INTO transaction VALUES (2,account.openDate,CURTIME(),
    account.deposit,account.accNo,
    "Teller","Cash","Deposit");
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:53:37.313

MySQL 与 BEGIN END 块内的分号混淆，因此您必须使用 DELIMITER 临时强制 MySQL 使用不同的分隔符。
文档：[http ://dev.mysql.com/doc/refman/5.5/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)

```
DELIMITER //
CREATE TRIGGER upTransaction AFTER INSERT ON account FOR EACH ROW
BEGIN
  INSERT INTO transaction VALUES (2,account.openDate,CURTIME(),account.deposit,account.accNo,"Teller","Cash","Deposit");
END//
DELIMITER ; 
```

您可能需要更换：

```
 INSERT INTO transaction VALUES (2,account.openDate,CURTIME(),account.deposit,account.accNo,"Teller","Cash","Deposit"); 
```

和：

```
 INSERT INTO transaction VALUES (2,NEW.openDate,CURTIME(),NEW.deposit,NEW.accNo,"Teller","Cash","Deposit"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:06:04.567

这是你原来的触发器

```
CREATE TRIGGER upTransaction AFTER INSERT ON account FOR EACH ROW
BEGIN
  INSERT INTO transaction VALUES (2,account.openDate,CURTIME(),
    account.deposit,account.accNo,
    "Teller","Cash","Deposit");
END 
```

替换`account.`为`NEW.`（可选：替换`"`为`'`）

```
DELIMITER $$
CREATE TRIGGER upTransaction AFTER INSERT ON account FOR EACH ROW
BEGIN
  INSERT INTO transaction VALUES (2,NEW.openDate,CURTIME(),
    NEW.deposit,NEW.accNo,
    'Teller','Cash','Deposit');
END $$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:58:14.107

```
CREATE
TRIGGER `event_name` AFTER INSERT
ON `database`.`table`
FOR EACH ROW BEGIN
    -- trigger body
    -- this code is applied to every
    -- inserted/updated/deleted row
END; 
```

好像您在“帐户”之后缺少表名。（编辑：或帐户之前的数据库名称，我不确定帐户属于什么）

# iphone - 将视图添加到 uinavigationcontroller 后将其调整到正确的高度

> ID：10920274
> 
> 赞同：2
> 
> 时间：2012-06-06T18:48:59.720
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, resize

所以我去了一个我以编程方式创建的uiviewcontroller（带有它的默认视图）

```
TestViewController *aVC = [[MJImageCropViewController alloc] init];
[[self navigationController] pushViewController:aVC animated:YES]; 
```

在里面有这样的东西在 viewDidLoad

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

问题是，pushViewController 的视图高度保持 460 像素，但可见只有 416 像素（因为现有的 navigationController.

有没有办法让推送的视图控制器的 uiview 以正确的方式调整大小而不将框架显式设置为 416（因为旋转等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:56:25.717

你可能想尝试这样的事情`-viewDidLoad:`

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // Resize view to account for nav bar
    CGFloat navBarHeight = self.navigationController.navigationBar.bounds.size.height;
    CGRect frame = self.view.frame;
    frame.size.height = frame.size.height - navBarHeight;
    self.view.frame = frame;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:53:20.283

我的猜测是视图正在正确调整大小，但它的子视图的自动调整大小掩码设置不正确。此外，将您发布的自动调整大小代码放在 loadView（如果您以编程方式创建视图）或 XIB 文件中会更有意义。

尝试通过在 viewDidLoad 结束时注销视图控制器的框架

```
NSLog(@"%@",NSStringFromCGRect(self.view.frame)); 
```

看看那告诉你什么。

# ruby-on-rails - 为 response_with(@object) 的模型实现特定操作

> ID：10920275
> 
> 赞同：0
> 
> 时间：2012-06-06T18:49:00.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Subscription`用户可以创建的模型。用户需要在创建后验证发送给他们的 PIN 以确认订阅。我在试图找出实现这一点的最佳方法时遇到了一些麻烦。

我实现了一个`confirms`带有两个`new`和`create`动作的控制器。

```
def new
  @confirm = Subscription.new
end

def create
  @keyword = Keyword.joins(:shortcode).where("shortcodes.shortcode = ? and shortcodes.country = ?",params[:subscription][:shortcode],params[:subscription]   [:country]).find_or_create_by_keyword(params[:subscription][:keyword])
  if @confirm = Subscription.where(:phone => params[:subscription][:phone], :country => params[:subscription][:country], :keyword_id => @keyword.id).last
    @confirm.check_subscription_pin(params[:subscription][:pin])
    respond_with(@confirm)
  elsif @confirm && @confirm.errors.any?
    flash[:notice] = @confirm.errors
    render :action => :new      
  else
    flash[:notice] = "Subscription not found."
    render :action => :new
  end
end 
```

这个解决方案看起来不是很有说服力，因为我总是 `respond_with(@confirm)`希望允许 REST`POST`通过`JSON`.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T18:56:55.897

当您拨打 curl 电话时，没有收到 params[:subscription] 。Phone 和 Pin 嵌套在订阅中，因此出现错误。

```
<pre>undefined method `[]' for nil:NilClass</pre> 
```

顺便说一句，我不知道如何使用嵌套参数进行 curl 调用。

# nhibernate - NServiceBus 3.2 和子容器

> ID：10920277
> 
> 赞同：0
> 
> 时间：2012-06-06T18:49:02.623
> 
> 标签：nhibernate, isession, nservicebus3

我有 NServiceBus (3.2.2) 设置，使用 Castle Windsor 作为它的构建器，我也在使用 NHibernate。我遇到的问题是，在我的处理程序中，如果我有多个需要 NHibernate 会话的存储库，它们最终会得到*不同的*会话！

NServiceBus 文档指出容器内的任何**瞬态**实例都将被视为**单例**实例。我的 NHibernate 会话也包含在一个工作抽象单元中。

下面是使用 NHibernate 设置 NServiceBus 的代码：

```
IWindsorContainer container = new WindsorContainer(new XmlInterpreter());
container.Install(new ContainerInstaller());
container.Install(new UnitOfWorkInstaller(AppDomain.CurrentDomain.BaseDirectory, LifestyleType.Transient));
container.Install(new FactoryInstaller(AppDomain.CurrentDomain.BaseDirectory, LifestyleType.Transient));
container.Install(new RepositoryInstaller(AppDomain.CurrentDomain.BaseDirectory, LifestyleType.Transient));

Configure.With()
    .CastleWindsorBuilder(container)
    .FileShareDataBus(Properties.Settings.Default.DataBusFileSharePath)
    .MsmqTransport()
        .IsTransactional(true)
        .PurgeOnStartup(false)
    .UnicastBus()
         .LoadMessageHandlers()
         .ImpersonateSender(false)
     .JsonSerializer(); 
```

`UnitOfWorkInstaller`有点像：

```
var fromAssemblyDescriptor = AllTypes.FromAssemblyInDirectory(new AssemblyFilter(_installationPath));
container.Register(fromAssemblyDescriptor
    .IncludeNonPublicTypes()
    .Pick()
    .If(t => t.GetInterfaces().Any(i => i == typeof(IUnitOfWork)) && t.Namespace.StartsWith("Magma"))
    .WithService.AllInterfaces()
    .Configure(con => con.LifeStyle.Is(_lifeStyleType).UsingFactoryMethod(k => k.Resolve<IUnitOfWorkFactory>().Create()))); 
```

因此，当需要 NHibernate 会话时，它会使用`UnitOfWorkFactory`. 我尝试将 'current_session_context_class' 属性放在 NHibernate 配置中的 'thread_static' 中，但它不起作用。

为什么我的 NServiceBus 处理程序中有不同的工作单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:51:25.583

我通过使用 Castle 的`LifestyleType.Scoped`生活方式让它发挥作用。但是，由于现在显而易见的原因，我的处理程序被一次又一次地调用，直到消息被扔到错误队列中。我之前遇到过这个问题，它与在处理程序中回滚或提交事务有关。在我的工作单元中，我正在重新回滚该`Dispose`方法中任何未提交的更改。我唯一要做的就是处理会话并删除`Rollback`呼叫。

# c# - Aspose.Words - 邮件合并图片

> ID：10920279
> 
> 赞同：2
> 
> 时间：2012-06-06T18:49:05.343
> 
> 标签：c#, ms-word, mailmerge, aspose

我正在尝试遍历一个`Dataset`，使用 Aspose.Words Mail-Merge 功能为每个项目创建一个页面。下面的代码循环通过`Dataset`- 并将一些值传递给 Mail-Merge Execute 函数。

```
var blankDocument = new Document();
var pageDocument = new Document(sFilename);
...
foreach (DataRow row in ds.Tables[0].Rows){
    var sBarCode = row["BarCode"].ToString();
    var imageFilePath = HttpContext.Current.Server.MapPath("\\_temp\\") + sBarCode + ".png";

    var tempDoc = (Document)pageDocument.Clone(true);

    var fieldNames = new string[] { "Test", "Barcode" };
    var fieldData = new object[] { imageFilePath, imageFilePath };

    tempDoc.MailMerge.Execute(fieldNames, fieldData);

    blankDocument.AppendDocument(tempDoc, ImportFormatMode.KeepSourceFormatting);
}
var stream = new MemoryStream();
blankDocument.Save(stream, SaveFormat.Docx);
// I then output this stream using headers, 
// to cause the browser to download the document. 
```

邮件合并项`{ MERGEFIELD Test }`从`Dataset`. 但是，实际图像使用以下方法在所有页面上显示第 1 页的图像：

```
{ INCLUDEPICTURE "{MERGEFIELD Barcode }" \* MERGEFORMAT \d } 
```

假设这是我的“条形码”字段数据：

```
c:\img1.png
c:\img2.png
c:\img3.png 
```

本文档的第一页，`c:\img1.png`以文本形式显示“测试”字段。显示的图像是`img1.png`。

但是第 2 页显示`c:\img2.png`为文本，但显示`img1.png`为实际图像。

有人对此有任何见解吗？

编辑：这似乎更像是一个Word问题。当我在 Word 中的`Alt`+`F9`模式之间切换时，图像实际上显示`c:\img1.png`为源。这就是为什么它会显示在每一页上的原因。

我已将其简化为：

```
{ INCLUDEPICTURE "{MERGEFIELD Barcode }" \d } 
```

此外，在 Word 的邮件收件人列表中添加了该字段的测试数据。当我预览时，它不会拉入数据，改变图像。所以，这是根本问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-10-22T11:06:39.547

我知道这是个老问题。但是我还是想回答一下。

使用 Aspose.Words 很容易在执行邮件合并时插入图像。为此，您应该简单地使用具有特殊名称的合并字段，例如 Image:MyImageFieldName。 [https://docs.aspose.com/words/net/insert-checkboxes-html-or-images-during-mail-merge/#how-to-insert-images-from-a-database](https://docs.aspose.com/words/net/insert-checkboxes-html-or-images-during-mail-merge/#how-to-insert-images-from-a-database)

此外，不需要遍历数据集中的行并为每一行执行邮件合并。只需将整个数据传递给 MailMerge.Execute 方法，Aspose.Words 将为数据中的每条记录复制模板。这是此类模板的简单示例 [![模板截图](../Images/c4755cf047d2386e5020a11865574c84.png)](https://i.stack.imgur.com/FCvxY.png)

使用以下代码执行邮件合并后：

```
// Create dummy data.
DataTable dt = new DataTable();
dt.Columns.Add("FirstName");
dt.Columns.Add("LastName");
dt.Columns.Add("MyImage");
dt.Rows.Add("John", "Smith", @"C:\Temp\1.png");
dt.Rows.Add("Jane", "Smith", @"C:\Temp\2.png");

// Open template, execute mail merge and save the result.
Document doc = new Document(@"C:\Temp\in.docx");
doc.MailMerge.Execute(dt);
doc.Save(@"C:\Temp\out.docx"); 
```

结果将如下所示： [![结果截图](../Images/7e30e090e23da9fc0a2808baab5154c7.png)](https://i.stack.imgur.com/wD4hM.png)

披露：我在 Aspose.Words 团队工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:36:27.057

如果这是 Word 进行输出（不确定 Aspose），这里可能会出现两个问题。

1.  `INCLUDEPICTURE`期望反斜杠加倍，例如，或（有点不太可靠）在该平台上`"c\\img2.png"`使用正斜杠或 Mac分隔符。`":"`不过，如果数据像您在此处所做的那样通过字段结果输入，则可能没问题。

2.  `INCLUDEPICTURE`自从微软在大约 10 年前出于安全原因修改了一堆字段行为以来，结果并没有“按设计”自动更新。如果您要合并到输出文档，您可能可以通过使用以下嵌套字段来解决这个问题：

    ```
    { INCLUDEPICTURE { IF TRUE "{ MERGEFIELD Barcode }" } } 
    ```

    或删除结果文档中的字段，

    ```
    { IF { INCLUDEPICTURE { IF TRUE "{ MERGEFIELD Barcode }" } } {
    INCLUDEPICTURE { IF TRUE "{ MERGEFIELD Barcode }" } } } 
    ```

所有需要以通常的方式`{ }`用`Ctrl`+插入。 （不要问我在哪里记录了“TRUE”的这种用法 - 据我所知，它不是。）`F9`

# spring - 如何在 Spring Roo 的 finder 页面上禁用字段验证

> ID：10920283
> 
> 赞同：1
> 
> 时间：2012-06-06T18:49:25.810
> 
> 标签：spring, dojo, spring-roo

所以我创建了一个自定义搜索页面，允许我按任何字段搜索客户，并且所有字段都是可选的。为此，我必须创建一个自定义`<form:find>`标签并注释掉这一行：

```
<!-- <script type="text/javascript">Spring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));</script> --> 
```

这允许我提交表格。但问题是：如果我在字段内部单击并在其外部单击，而不输入任何文本，则会弹出“此字段为必填项”验证错误。

我仍然可以提交表单，并且搜索页面可以正常工作，但我想修复这个烦人的不正确错误。

这是.jspx

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:field="urn:jsptagdir:/WEB-INF/tags/form/fields" xmlns:form="urn:jsptagdir:/WEB-INF/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <jsp:output omit-xml-declaration="yes"/>
    <form:find_without_validation finderName="ByOutputFormatAndStorageDeviceAndWorkOrderAndServiceOffering" id="ff_com_eg_egmedia_bizapp_model_ServiceItem" path="/serviceitems" z="b0NZUow+hQ11Ruy9n/4oyBOWOBs=">
        <field:select_optional disableFormBinding="true" field="outputFormat" id="f_com_eg_egmedia_bizapp_model_ServiceItem_outputFormat" items="${outputformatenums}" path="/outputformatenums" required="false" z="user-managed"/>
        <field:select_optional disableFormBinding="true" field="storageDevice" id="f_com_eg_egmedia_bizapp_model_ServiceItem_storageDevice" items="${storagedeviceenums}" path="/storagedeviceenums" required="false" z="user-managed"/>
        <field:select_optional disableFormBinding="true" field="workOrder" id="f_com_eg_egmedia_bizapp_model_ServiceItem_workOrder" itemValue="id" items="${workorders}" path="/workorders" required="false" z="user-managed"/>
        <field:select_optional disableFormBinding="true" field="serviceOffering" id="f_com_eg_egmedia_bizapp_model_ServiceItem_serviceOffering" itemValue="id" items="${serviceofferings}" path="/serviceofferings" required="false" z="user-managed"/>
    </form:find_without_validation>
</div> 
```

我的`<field:select_optional>`标签只是`<field:select>`带有额外标签的默认标签`<option value="" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:47:17.907

在您的项目中找到`select.tagx`并在此文件中找到以下行：

```
<script type="text/javascript">Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType: 'dijit.form.FilteringSelect', widgetAttrs : {hasDownArrow : true}})); </script> 
```

内部装饰器`widgetAttrs`添加了一个新选项：

```
required: ${required} 
```

So that the edited line looks like:

```
<script type="text/javascript">Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType: 'dijit.form.FilteringSelect', widgetAttrs : {hasDownArrow : true, required: ${required}}})); </script> 
```

After this modification the `required` attribute in `field:select` tag will work well.

# installation - Advanced Installer 的可靠性如何？

> ID：10920285
> 
> 赞同：5
> 
> 时间：2012-06-06T18:49:38.623
> 
> 标签：installation, windows-installer, auto-update, advanced-installer

我正在尝试使用[Advanced Installer](http://www.advancedinstaller.com/download.html)作为应用程序安装程序和自动更新程序。大多数资源仅在 Advanced Installer 网站上提供。

以前有人用过吗？如果有，我想了解更多关于错误/稳定性问题的信息，尤其是自动更新功能

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T14:05:11.433

关于错误/稳定性问题，您可以从[发布历史记录](http://www.advancedinstaller.com/version-history.html)中看到自动更新程序错误修复的频率（今年 6 个 - v9.2 中有 4 个，v9.1.1、v9.0.1 和 v9.0 各有一个）。

我注意到的是，出现的问题很快得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:35:34.840

我之前发布了以下内容：

我使用了免费版本的 Advanced Installer，包括它的自动更新功能，我没有遇到任何问题。

请注意，我说的是高级安装程序 MSI 脚本在升级到较新版本的程序时自动删除旧文件的能力。我不是在谈论应用程序自动检查更新的能力。这可能不在免费功能集中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-13T11:48:03.447

我使用了高级安装程序，非常好。如果您正在为 Web 应用程序开发 msi 设置文件，我建议使用它。它甚至与其他几个用于开发的工具集成，例如 wix、inno setuo 等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T04:11:17.607

我没有使用 Advanced Installer，但是，只是想参考 InstallJammer，它是一个多平台安装程序[http://www.installjammer.com/](http://www.installjammer.com/)，我一直在使用它来创建应用程序安装程序，并且易于使用和配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-03T13:56:29.753

我每天都在使用 Advanced Installer 进行工作。我可以说他们的手册没有足够的帮助，特别是对于那些没有任何使用这些工具经验的人。但是，如果您支付支持费用，他们几乎可以立即为您提供帮助。当然，这个工具有一些限制，特别是如果你希望你的构建是 MSI，UI 不会像 exe 一样响应 - 但我知道他们正在尝试解决这个问题。如果您了解如何使用它，您肯定会喜欢它。

高级安装程序的好处在于他们收集分析（您必须为此功能付费），他们可以向您显示每天有多少下载，或者有多少用户选择了选项 1 而不是选项 2。或者您可以将这些统计信息发送到您的网络服务器和 POST 可以随心所欲地进行操作 - 这是免费的！

# c# - C# LINQ 过滤

> ID：10920288
> 
> 赞同：1
> 
> 时间：2012-06-06T18:49:49.797
> 
> 标签：c#, linq, filtering

我有这段代码

```
 var tblGrouped = dtCSV.AsEnumerable()
                .GroupBy(r => new
                {
                    product_id   = r.Field<String>("product_id"),
                    owner_org_id = r.Field<String>("owner_org_id"),
                }); 
```

但我想添加一个额外的列来过滤。基本上如果 course_type_id = 1 例如。dtCSV 是填充 course_type_id 的源。我尝试了以下但没有奏效：

```
 var tblGrouped = dtCSV.AsEnumerable()
                .GroupBy(r => new
                {
                    product_id   = r.Field<String>("product_id"),
                    owner_org_id = r.Field<String>("owner_org_id"),
                    course_type_id = "1",
                }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T18:52:13.153

如果我正确理解您的要求，您想对 a`course_type_id`为 1 的行进行分组？

```
var tblGrouped = dtCSV.AsEnumerable()
    .Where(r => r.Field<String>("course_type_id") == "1")
    .GroupBy(r => new
        {
            product_id   = r.Field<String>("product_id"),
            owner_org_id = r.Field<String>("owner_org_id"),
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:51:39.373

您需要先添加条件。您可以使用`.Where`：

```
var tblGrouped = dtCSV.AsEnumerable()
    .Where(r => r.Field<String>("course_type_id") == "1")
    .GroupBy(r => new
    {
        product_id   = r.Field<String>("product_id"),
        owner_org_id = r.Field<String>("owner_org_id"),
        course_type_id = "1"
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:52:58.387

按使用`Where`语法过滤。`.Where(a=>a.Field<String>("course_type_id") == "1")`

# jquery - jQuery UI 滑块 - 添加

> ID：10920289
> 
> 赞同：0
> 
> 时间：2012-06-06T18:49:50.597
> 
> 标签：jquery, jquery-ui, input, slider, addition

我正在尝试创建两个滑块，每个滑块都有自己的值，并让 jQuery 在输入字段中将这两个滑块相互添加。

当谈到 jQuery 时，我是一个完全的新手，我只能通过遵循[http://jqueryui.com/demos/slider/上的代码来做到这一点](http://jqueryui.com/demos/slider/)

```
$(function() {
    $( "#slider1" ).slider({
        value: 500,
        min: 500,
        max: 4000,
        step: 500,
        slide: function( event, ui ) {
            $( "#amount1" ).val( ui.value + " kr." );
        }
    });
    $( "#slider2" ).slider({
        value: 2700,
        min: 2700,
        max: 27000,
        step: 2700,
        slide: function( event, ui ) {
            $( "#amount2" ).val( ui.value + " kr." );
        }
    });
    $( '#amount' ).val(( '#amount1' ) + ( '#amount2' ));
}); 
```

**HTML：**

```
 <label for="amount1">Hours (500 kr. increments):</label>
    <input type="text" id="amount1" style="border:0; color:#f6931f; font-weight:bold;" />

<div id="slider1"></div>

    <label for="amount2">Camera (500 kr. increments):</label>
    <input type="text" id="amount2" style="border:0; color:#f6931f; font-weight:bold;" />

<div id="slider2"></div>

    <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" /> 
```

我想要输入字段“金额”中显示的滑块 1 和滑块 2 的金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:04:03.133

添加 updateTotal 函数并在滑块的幻灯片事件处理程序中调用它：

```
$("#slider1").slider({
    value: 500,
    min: 500,
    max: 4000,
    step: 500,
    slide: function(event, ui) {
        $("#amount1").val(ui.value + " kr.");
        updateTotal();
    }
});
$("#slider2").slider({
    value: 2700,
    min: 2700,
    max: 27000,
    step: 2700,
    slide: function(event, ui) {
        $("#amount2").val(ui.value + " kr.");
        updateTotal();
    }
});

function updateTotal() {
    var total = $("#slider1").slider("value") + $("#slider2").slider("value");
    $('#amount').val(total);
}​ 
```

# memory-leaks - CUDA 事件和流应该总是被销毁吗？

> ID：10920290
> 
> 赞同：6
> 
> 时间：2012-06-06T18:49:53.633
> 
> 标签：memory-leaks, cuda

我正在阅读 CUDA By Example，我发现当他们引入事件时，他们会调用`cudaEventDestroy`他们创建的每个事件。

但是我注意到后来的一些例子忽略了这个清理功能。忘记销毁创建的事件和流是否有任何不良副作用（例如，当您忘记释放分配的内存时会发生内存泄漏）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:30:02.850

应用程序在退出时仍持有的任何资源都将由操作系统/驱动程序自动释放。因此，如果应用程序仅创建有限数量的事件，则不必手动释放它们。尽管如此，让应用程序退出而不故意释放所有资源是不好的做法，因为很难区分真正的泄漏和“故意”泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:28:33.017

您已经在本书的示例代码中发现了错误。

CUDA 事件是轻量级的，但资源泄漏就是资源泄漏。随着时间的推移，如果你泄漏了足够多的它们，你将无法再创建它们。

# java - 我的 Java 应用程序的这个对象模型可以改进吗？

> ID：10920293
> 
> 赞同：4
> 
> 时间：2012-06-06T18:50:08.063
> 
> 标签：java, object, model

我正在设计一个 Java 应用程序，承包商将使用它来绘制住宅图表。目前，我处于建模阶段并正在创建 UML 类图。我的问题是我不确定为我的一些对象建模的理想方法。用户将“绘制”房屋的元素，如墙壁、灯光、门、窗等……每个元素都有一组初始的必需属性。基于这组初始所需属性，该元素将需要一组不同属性的子集。

我将以我的 Structure 类为例。用户将在图表上“绘制”的一件事是结构。结构的两个主要属性是结构类型和组合。组成很简单。客户端提供了用户将选择的可能组合列表，因此我将这些数据放在组合框中，然后从下拉列表中进行选择。但是，根据结构类型，将需要其他属性。

IE) 如果 StructureType = Wall，则需要长度和高度。如果 StructureType = Ceiling，则长度、宽度和高度都是必需的。

这个例子被简化了，可能看起来微不足道，但是子属性可以比这更复杂，而且有很多。其中一些会产生更多的子属性。然而，尽管过度简化，它给出了我试图解决的问题的一个非常具体的想法。

我的想法是我应该有扩展结构的子类，每个子类都有一组每个子类独有的属性。IE) 类 Wall 扩展类 Structure，并包含一组 Walls 独有的成员变量。

一些关于我是否清楚地考虑这一点的建议将不胜感激，如果我不在基地，我们将不胜感激。同样，如果我在决策中遗漏了一些考虑，欢迎提出一些建设性的批评。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:03:21.970

我会进一步扩展您的想法。

而不是 Properties 是 Structure 的一部分，我会把它们放在一边，有一个接口`StrucutreProperties`，它具有所有常见的属性，如`getLength()`, `getWidth()`。

然后就像你说的那样`Wall extends Structure`，在这种情况下`Wall`会有`WallProperties extends StructureProperties` 接口。

在的情况下`Ceiling extend StructureProperties`，将有`CeilingProperties extends StructureProperties`并添加`getBreadth()`到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:53:44.900

是的，你的想法是正确的。

子类化是一种定义子类中唯一属性的方法，同时继承父类的属性。

# jquery - 侧边栏在悬停时更改类别背景颜色（jsFiddle）

> ID：10920297
> 
> 赞同：0
> 
> 时间：2012-06-06T18:50:57.793
> 
> 标签：jquery, css

我正在为我的网站制作侧边栏。当用户将鼠标悬停在某个类别上时，会打开一个子菜单，当用户将鼠标悬停在该子菜单上时，我希望相应的类别背景颜色发生变化。我创建了一个 jsfiddle 来帮助说明我的问题。我感谢在这方面的任何帮助。

我在想一些事情：

```
$(".sidemenu").hover(function(){
    $("category").closest().parent().css("background-color","red");
}); 
```

这是 JSFiddle

[http://jsfiddle.net/ahren/BGcDc/8/](http://jsfiddle.net/ahren/BGcDc/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:56:57.373

我刚刚编辑了您的 CSS 以将父级更改`background colour`为`white`. 编辑后的代码在这里：

```
$(".category").hover(function() {
    $(".submenu").hide();
    $(this).find(".submenu").show().parent().css('background', '#fff');
    $(this).find(".submenu li:eq(0)").css("border-top", "1px solid blue");
    $(this).find(".submenu li:last").css("border-bottom", "1px solid blue");
    $(this).find(".submenu li:first").css("border-left", "none");
    $(this).css("border-bottom", "none");
    $(this).css("width", "205px");
    $(this).css("border", "1px solid blue");
    $(this).css("border-top", "1px solid blue");
    $(this).css("border-right", "none");
});
$(".category:last").css("border-bottom", "1px solid grey");
$(".category").mouseleave(function() {
    $(this).css("background-color", "#eee");
    $(this).css("border", "1px solid grey");
    $(this).css("border-bottom", "none");
    $(this).css("width", "180px");
    $(".category:last").css("border-bottom", "1px solid grey");
});
$(".submenu,#sidebar").mouseleave(function() {
    $(".submenu").hide();
    $(".category").css("width", "180px");
});​ 
```

还可以在下面找到相同的 CSS：

```
.category{text-decoration:none; border:1px solid grey; border-bottom:none; width:180px; padding:3px 8px 4px 30px; background-color:#eee;}
.submenu{list-style-type:none; background-color:#eee; width:200px; position:absolute; display:none; margin-left:189px; margin-top:-24px; box-shadow:4px 4px 9px #333;}
.submenu li{padding:3px 8px 4px 10px;  border-left:1px solid blue; border-right:1px solid blue; border-top:1px solid #bbb; border-bottom:none; margin-left:0px; background: #fff;} 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:58:36.340

这应该这样做

```
$(".submenu li").mouseenter(function() {
    $(this).parent().parent().css("background-color","yellow");

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:59:45.960

尝试`$(this).css('background-color','red');`在你的`$(".category").hover();`函数中添加它。由于您使用`$(this)`了很多次，因此您应该尝试将其缓存在变量中以获得最佳实践。

# javascript - 消息对话框中的用户输入

> ID：10920302
> 
> 赞同：6
> 
> 时间：2012-06-06T18:51:08.657
> 
> 标签：javascript, windows-8, microsoft-metro

我正在尝试在消息对话框中添加自定义用户输入字段，例如 Bing Sports 应用程序中的以下字段。但是，您似乎只能添加命令，即按钮。有什么帮助吗？

（我正在使用 HTML/JavaScript）

通常，对消息对话框的控制如下所示：

```
var dialogMessage = 'This is the dialog text';
var dialog = new Windows.UI.Popups.MessageDialog( dialogMessage );
dialog.commands.append(new Windows.UI.Popups.UICommand("Button", function (command) {
    /* Action goes here */
}));
dialog.showAsync(); 
```

如您所见，您只能以可操作按钮的形式将命令附加到 dialogMessage...

![在此处输入图像描述](../Images/2be5627550bcf6cdadb12059eb677f63.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T14:03:24.947

几天来，我一直遇到同样的问题，经过数小时的搜索，我仍然没有找到任何可以让您将输入文本字段添加到 MessageDialog 的内容。请注意，尽管我确实有几年的 JavaScript 经验，但我对 Windows 8 开发还很陌生。

我不确定这是否相关，但由于我想要登录的输入字段，所以我从 MSDN 的博客中看到了[这篇博文。](http://blogs.msdn.com/b/jfox/archive/2012/07/05/windows-8-leveraging-the-credentialpicker.aspx)它解释了 CredentialPicker 类，它在视觉样式方面与 MessageDialog 有点相似，但顾名思义，它仅用于从用户那里收集凭据。

如果这不是您要查找的内容，您可以查看 Microsoft 开发中心上的 MessageDialog 使用[指南和 MessageDialog 快速入门指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh738364.aspx)（如果您还没有的话）。很抱歉，由于 StackOverflow 对新用户的限制，我无法同时提供这两个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:36:40.893

您需要使用 Popup 类 [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh872190.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh872190.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:37:49.680

我认为您需要创建自己的 MessageDialog 框：一个在所有屏幕上展开并包含用户输入框的框。

您可以从以下代码开始：http: [//blog.thomaslebrun.net/2012/03/winjs-a-childwindow-control-to-use-in-your-applications/](http://blog.thomaslebrun.net/2012/03/winjs-a-childwindow-control-to-use-in-your-applications/)

# c# - MVC3：在视图中访问对象的属性

> ID：10920304
> 
> 赞同：0
> 
> 时间：2012-06-06T18:51:10.070
> 
> 标签：c#, asp.net-mvc-3, razor

在 ASP.NET MVC3 Web 应用程序中。

我有一个看法。该视图有一个 IEnumerable 模型。

我需要遍历所有模型的项目并显示 item.Name

**风景：**

```
@model IEnumerable<Object> 
@{
    ViewBag.Title = "Home";
}

@foreach (var item in Model)
{ 
    <div class="itemName">@item.Name</div>
} 
```

在控制器中，我使用 Linq to entity 从数据库中获取对象列表。

**控制器：**

```
public ActionResult Index()
{
    IEnumerable<Object> AllPersons = GetAllPersons();
    return View(AllSurveys);
}

public IEnumerable<Object> GetAllPersons()
{
    var Context = new DataModel.PrototypeDBEntities();
    var query = from p in Context.Persons
                select new
                {
                    id = p.PersonsId,
                    Name = p.Name,
                    CreatedDate = p.CreatedDate
                };
    return query.ToList();
} 
```

当我运行时，我收到此错误：

```
 'object' does not contain a definition for 'Name' and no extension method 'Name' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

如何访问模型项的“名称”属性？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:54:42.317

为您的方法返回创建一个强类型。

```
public class MyObject {
    public int id {get;set;}
    public string Name {get;set;}
    public DateTime CreatedDate {get;set;}
}

public IQueryable<MyObject> GetAllPersons() 
{ 
    var Context = new DataModel.PrototypeDBEntities(); 
    var query = from p in Context.Persons 
                select new MyObject
                { 
                    id = p.PersonsId, 
                    Name = p.Name, 
                    CreatedDate = p.CreatedDate 
                }; 
    return query;
} 
```

...然后更新您的视图以反映新模型...

```
@model IQueryable<MyObject> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:54:43.743

最简单的方法是定义一个类`Person`，并更改您的模型/控制器以使用`IEnumerable<Person>`而不是对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:55:03.433

你可能需要做一个明确的`Casting`

```
@(string) item.Name 
```

或使用`dynamic`类型。

在视图中，改变

```
@model IEnumerable<Object> 
```

至

```
@model IEnumerable<dynamic> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:53:55.580

我可能是错的，但你可能会尝试使用`IEnumerable<dynamic>`而不是`IEnumerable<Object>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:54:12.590

您的模型类型是`IEnumerable<Object>`，将其更改为`IEnumerable<Person>`以便您可以访问`Person`属性。

# ios - 通过 iphone 上的应用程序创建日历（在 ios 原生日历中）

> ID：10920316
> 
> 赞同：0
> 
> 时间：2012-06-06T18:52:22.847
> 
> 标签：ios, objective-c, iphone

我想知道是否可以通过应用程序为您的 iphone 创建一个新日历。我知道您可以使用应用程序设置事件，但我可以通过该应用程序制作另一个日历来放置所有事件。

编辑：

如果不可能，最好的解决方法是制作日历和事件存储，并使用 nscoding 保存该信息？然后再取回？

如果有可能创建一个新日历以与现有日历集成，这就是我想要做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:53:03.497

这就是我这样做的方式：

```
-(NSString*)createCal:(NSString*)myCalId;{
// Instantiate eventstore object
   EKEventStore *store = [[EKEventStore alloc] init];

   EKSource *localSource = nil;
   for (EKSource *source in store.sources)
       if (source.sourceType == EKSourceTypeLocal){
           localSource = source;
            break;
       }

//this is you creating your calendar
EKCalendar *cal;
    cal = [EKCalendar calendarWithEventStore:store];
    cal.title = @"Name of calendar";
    cal.source = localSource;
    [store saveCalendar:cal commit:YES error:nil];
    NSLog(@"cal id = %@", cal.calendarIdentifier);
return cal.calendarIdentifier;} 
```

您将需要导入`<EventKit/EventKit.h>` 这很强大，因此您需要小心并进行大量验证，例如日历是否已经存在等等。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:57:15.797

[查看 EventKit](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/calendars)的文档，似乎无法以编程方式创建新日历。但是，您可以获得现有日历的列表并找出默认日历。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T10:59:30.763

你不能再使用标准的 init 方法了；它已被弃用。这里引用来自 EKEventStore 类参考：

“在 iOS 5 及更高版本上，使用默认的 init 方法初始化事件存储对象。在 iOS 6 及更高版本上，您必须在使用 requestAccessToEntityType:completion: 初始化事件存储后请求访问实体类型才能返回数据。

在 OS X 上，使用 initWithAccessToEntityTypes: 而不是默认的 init 方法。可接受的实体类型是事件的 EKEntityMaskEvent 和提醒的 EKEntityMaskReminder。”

因此，如果您使用 iOS6，则类似于：

> ```
>  EKEventStore *store = [[EKEventStore alloc] initWithAccessToEntityTypes:completion:]; 
> ```

和

> ```
>  cal = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:store]; 
> ```

我的 MacOSX 应用程序需要它。所以我必须使用这个：

所以在我的案例（MacOSX）中就是这个解决方案。这是 Sparqs 代码；只需使用新的 init 而不是标准的 init 进行修改：

> ```
> -(NSString*)createCal:(NSString*)myCalId;{
> // Instantiate eventstore object
>    EKEventStore *store = [[EKEventStore alloc] initWithAccessToEntityTypes:EKEntityMaskEvent];
> 
>    EKSource *localSource = nil;
>    for (EKSource *source in store.sources)
>        if (source.sourceType == EKSourceTypeLocal){
>            localSource = source;
>             break;
>        }
> 
> //this is you creating your calendar
> EKCalendar *cal;
>     cal = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:store];
>     cal.title = @"Name of calendar";
>     cal.source = localSource;
>     [store saveCalendar:cal commit:YES error:nil];
>     NSLog(@"cal id = %@", cal.calendarIdentifier);
> return cal.calendarIdentifier;} 
> ```

# python - numpy 初学者：使用 numpy.savetxt 编写数组

> ID：10920318
> 
> 赞同：4
> 
> 时间：2012-06-06T18:52:32.030
> 
> 标签：python, numpy, histogram, tsv

我有一个 numpy 直方图，我想将其输出为制表符分隔的文本文件。我的代码如下：

```
targethist = np.histogram(targetlist, bins=ilist)
print targethist
np.savetxt('ChrI_dens.txt',targethist,delimiter='\t') 
```

targetlist 和 ilist 是很长的整数列表。我得到以下输出：

> (array([0, 0, 0, ..., 0, 0, 0]), array([ 1, 10000, 20000, ..., 15060000, 15070000, 15072422])) Traceback (最近一次通话最后一次) ：文件“target_dens_np.py”，第 62 行，在 np.savetxt('ChrI_dens.txt',targethist,delimiter='\t') 文件“/Library/Frameworks/Python.framework/Versions/7.3/lib/python2\. 7/site-packages/numpy/lib/npyio.py"，第 979 行，在 savetxt fh.write(asbytes(format % tuple(row) + newline)) 类型错误：需要浮点参数，而不是 numpy.ndarray

似乎已经创建了直方图数组，但是我在 np.savetxt() 行中做错了。我已阅读文档，但不明白为什么此函数中的任何参数都需要浮点数。我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:06:02.173

我认为问题在于第二个参数`savetxt`必须是“类数组”。您的输入不是“类似数组的”。例如

```
print (len(targethist[0]))
print (len(targethist[1])) 
```

注意长度不一样？如果长度相同，numpy 可以将其转换为单个二维数组，一切都会好起来的，但它不能进行转换，所以它失败了。

这有效

```
np.savetxt('stuff.dat',(targethist[0],targethist[1][1:]),delimiter='\t') 
```

但我已经截断了你的数据；）。你需要决定你想做什么来解决这个问题。

我必须承认，这里的错误信息非常神秘。

# javascript - 遍历 rss 提要中的节点子节点？

> ID：10920319
> 
> 赞同：0
> 
> 时间：2012-06-06T18:52:36.817
> 
> 标签：javascript, jquery, rss

所以我不太确定如何做到这一点，这似乎很简单，但我得到了一个 rss 反馈，我想做的就是遍历一组有孩子的每个元素，但我似乎无法弄清楚如何获取值。我的 xml 看起来像这样：

```
<rss>
    <item>
        <title>Test</title>
        <picture>Test</picture>
    </item>
    <item>
        <title>Test 1</title>
        <picture>Test 1</picture>
    </item>
</rss> 
```

我的 jquery 看起来像这样：

```
$(document).ready(function() {
    var FEED_URL = "myFeedUrl";
    $.ajax({
        url : FEED_URL,
        type : "GET",
        success : function(xml) {
            var item = $(xml).find('item').children();
            $(item).children().each(function() {
                var title = $(item).children().find('title').text();
                            //do something
            });

        }
    });
}); 
```

我能够遍历它并获得“项目”元素。但我想循环遍历子元素，但我不确定如何获得实际值！我想我可以找到诸如：

```
var title = $(item).children().find('title').text(); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:44:48.897

这应该这样做。

```
 var item = $(xml).find('item');
        $(item).each(function(index, value) {
            var title = $(value).children('title').text();
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:41:58.233

您可能需要删除对孩子的呼叫。

```
var item = $(xml).find('item');
item.each(function() {
    var title = $(item).find('title').text();
    //do something
}); 
```

# sql - 从oracle中的数字确定月份（书面）

> ID：10920320
> 
> 赞同：1
> 
> 时间：2012-06-06T18:52:36.873
> 
> 标签：sql, oracle, monthcalendar

我在表的一列中有以下值：一年中的月份为 1、2、3、4、5 ... 12。这些只是数字，而不是日期，或源自日期或类似的东西。

我如何从这些数字中得到月份（写出）？所以如果我这样做

```
SELECT TO_NUMBER(TO_CHAR(TO_DATE('December', 'Month'), 'MM')) MONTH_NUM FROM DUAL; 
```

我可以得到这个月的号码。但是我如何从数字中得到月份（相反）？如果值为 1，则输出应为一月。如果值为 2，则输出应为二月。依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:55:39.093

```
to_char( to_date( <<the number>>, 
                  'MM' ),
         'fmMonth' ) 
```

应该给你你正在寻找的东西。

```
 1* select to_char( to_date( 1, 'MM' ), 'fmMonth' ) from dual
SQL> /

TO_CHAR(TO_DATE(1,'MM'),'FMMONTH')
------------------------------------
January 
```

# entity-framework - Entity Framework 4.2 代码中的参考数据查找优先

> ID：10920322
> 
> 赞同：1
> 
> 时间：2012-06-06T18:52:42.623
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我正在整理一个包含大量参考数据的代码优先模型。该模型基于应用程序、服务器和构建部署。因此，有很多多对多的关系。我感到的痛苦是新记录被放置在我试图用作参考数据的实体表中。例如，我们有一个服务器列表。我只想在表中看到一个服务器 ONCE。对于引用该服务器的所有实体，我希望他们使用该行。我的 ServerRoles 和 Applications 表也是如此。这些表包含我正在播种的静态数据，应该很少更改。

我知道我可以通过查找和手动接线来解决这个问题，但我认为 EF 会理解这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:09:42.220

使用实体框架代码优先，您可以创建一个具有*受保护的无参数构造函数*和*私有集*属性的**不可变对象。**

 **它肯定适用于 EF 5 Beta。

[更新]

还使用 EF 4.3.1 进行了测试，它可以工作。

```
public class Nation
{
    protected Nation() {}

    public Nation(Guid id, string name)
    {
        Id = id;
        Name = name;
    }

    public Guid Id { get; private set; }

    public string Name { get; private set; }
} 
```**

# pdf - 压缩pdf文件的最大范围是多少？

> ID：10920325
> 
> 赞同：0
> 
> 时间：2012-06-06T18:53:00.653
> 
> 标签：pdf, pdf-generation

每当我尝试使用 ghostscript 或 pdftk 或 pdfopt 将 PDF 文件压缩到尽可能小的大小时，我最终都会得到一个接近原始大小一半的文件。但最近，我得到了 1000 MB 范围内的文件，这些文件被压缩到几百个。我们可以进一步减少它们吗？

pdf是由分辨率更高的jpg图像制成的，我们不能减小这些图像的大小并进一步减小尺寸吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:29:06.767

据我所知，在不降低 jpeg 流和丢失质量的情况下，您可以尝试提供的特殊功能

**多价**

*   [https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html](https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html)

```
java -cp path/to.../multivalent.jar tool.pdf.Compress -compact file.pdf 
```

结果输出将以特殊方式压缩。生成的文件需要再次读取多价浏览器

无法预测您可以节省多少空间（很多时候您无法节省更多空间）

# jquery - jQuery - 在 toggle() 中启用/禁用选择框；

> ID：10920333
> 
> 赞同：1
> 
> 时间：2012-06-06T18:53:37.697
> 
> 标签：jquery, toggle

我有一个实例，我想根据单击更改选择框的文本和状态。

```
$("#foo").click(function(){

 $("#mytext").toggle();
 $(this).text($(this.text() == 'on' ? 'off' : 'on');
 // here i also want to enable and disable a select box, not sure how to do this other   then checking if the value of (this).text is on or off.

}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:57:26.030

```
var status = $(this).text();

$('#dropdownId').prop('disabled',status != 'on'); 
```

# iphone - 重启一个uitouch

> ID：10920337
> 
> 赞同：-1
> 
> 时间：2012-06-06T18:53:55.607
> 
> 标签：iphone, ios, cocoa-touch, uiview, uitouch

我已经尝试了整个上午，并开始认为这是不可能的。

因此，您在屏幕上进行了触摸，它进入了响应链，并且可能做了一些事情。然后你在屏幕上移动它，它调用了 touchesMoved: 方法（与触摸相关的 uiResponder 方法），也许还做了其他的事情。在这一点上，无论如何，触摸继续在屏幕中移动，当它进入其他一些uiView时，uiTouch被重新初始化（我的意思是，在第一个uiView中调用touchEnded，然后在新的uiView调用touchesBegan，然后如果继续移动调用 touchesMoved)。

我试图 resignFirstResponder 并手动调用这些方法，但我不能。我一直认为应该有一个非常简单的答案。就像是

```
UITouch *touch = [touches anyObject];
CGPoint location = [touch locationInView:self.superview];
if (!CGRectContainsPoint(self.frame, location)) {
    [touch restart];
} 
```

或者

```
[[touch phase] restart]; 
```

（但文档中的任何内容）：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:58:01.303

我的建议是拥有您想要转换以接收触摸的所有视图的超级视图，然后对 touchesMoved/Began/Ended 方法中的子视图进行命中测试（可能通过 CGRectContainsPoint(...)），并且相应地传递触摸（在子视图上调用相应的 touchesBegan/Moved/Ended 方法）。

# php - 使用 PHP 的多人游戏。我的机会是什么？

> ID：10920338
> 
> 赞同：3
> 
> 时间：2012-06-06T18:53:55.747
> 
> 标签：php, comet

首先，我需要这些信息来制作实时多人浏览器游戏。现在，我几乎可以编写所有代码，但有一个例外——必须将服务器端事件推送到客户端。所以我需要一个真正的解决方案（不像长轮询）。

我一直在阅读所有的论坛，所有的文章，但这让我感到困惑。

我想问一些问题，但如果可能的话，我需要一个深入的答复。

1.  HTML5 为我们带来了 WebSockets 功能。起初浏览器几乎不支持它，但现在，几乎所有最新的浏览器都支持它。它会成为未来的彗星解决方案吗？它可以杀死 node.js 和其他解决方案吗？

2.  有很多选择可供选择。Node.js、socket.io、APE，使用第三方网站的 API。（如 pusher.com）什么对我最有利？我想用 PHP 编写服务器端代码。我相信如果我们使用 node.js，我也应该使用 javascript 编写服务器端代码。这是对的吗？如果没有，我如何在这些框架中使用 PHP？

3.  我要编写多人游戏，所以性能/可扩展性是必不可少的。我认为我一开始不会有超过 100 名并发玩家，但没人知道未来会发生什么，所以我希望它能够以将来支持几千名并发玩家的方式编写代码。我有哪些选择？

4.  PHP，尽管我很喜欢这种语言本身，但它只是在这方面缺乏......我不想编写像 Travian 这样的游戏，它们很无聊。我希望它们是实时的。如有必要，我可以为这项任务学习一门新语言。您对此有何看法？

5.  我目前正在使用 Apache 作为本地 Web 服务器。过去使用 IIS 和 Nginx。是否有专为这项工作设计的 PHP Web 服务器？据我所知，某些语言具有为并发设计的特殊 Web 服务器。（例如龙卷风网络）

在这种情况下，将 max_execution_time 设置为 0 并在无限循环中将新数据刷新到客户端不是一种选择，它甚至根本没有效果。

任何答案都非常感谢。

谢谢你。

附言。我也会用它来做其他事情，比如实时通知，但主要是我的 2D 游戏本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:02:03.253

PHP 不是为此而设计的。我建议您选择一种专为此类应用程序设计的语言。

要回答您的问题：

1.  Web 套接字的想法是编写一个可以与游戏服务器交互的游戏客户端。如果您正在寻找构建使用套接字的游戏，PHP 将不适合这种模式。您需要可以连续运行并且很可能是多线程的东西。您正在查看 C#、C++、Java 等。它不会使用 node.js，因为 node.js 是一个服务器。在浏览器中，您正在编写客户端。

2.  我不确定如何对此做出回应，因为 node.js != PHP。node.js 被设计成一个 Web 服务器。这意味着服务器接受 Web 请求并发送回正确的响应（就像 Apache 的 HTTPD 一样）。PHP 是一种与 apache 交互的脚本语言，能够进行更多的动态 html 处理。

3.  使用 C++、Java、C# 等

4.  学习 C++、Java、C# 或任何其他支持套接字的语言。

5.  不，假设 Web 服务器接受请求、处理它并返回结果。如果您正在寻找客户端和服务器之间的持续通信，那么 Web 服务器不是您想要的。

有些产品已经完成了大量的基础工作。我建议你看看像[Photon](http://photon.exitgames.com/)或[Smart Fox Server这样的东西](http://www.smartfoxserver.com/)

# php - 新闻报道安装错误

> ID：10920339
> 
> 赞同：3
> 
> 时间：2012-06-06T18:54:06.963
> 
> 标签：php, zend-framework, newscoop

尝试在我的网站上安装 Newscoop 4 Script 时...我收到此错误：

```
Warning: Unexpected character in input: '\' (ASCII=92) state=1 in /home/content/24/8222924/html/newscoop4/application.php on line 65

Parse error: syntax error, unexpected T_FUNCTION in /home/content/24/8222924/html/newscoop4/application.php on line 68 
```

它显示错误的文件是这样的，我认为它与反斜杠有关，因为 php 无法完全呈现它，但我的 php 版本希望是 5.3：

```
 <?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', __DIR__ . '/application');

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// goes to install process if configuration files does not exist yet
if (!defined('INSTALL') && (!file_exists(APPLICATION_PATH . '/../conf/configuration.php')
    || !file_exists(APPLICATION_PATH . '/../conf/database_conf.php'))) {
    $subdir = substr($_SERVER['SCRIPT_NAME'], 0, strrpos($_SERVER['SCRIPT_NAME'], '/', -2));

    if (strpos($subdir, 'install') === false) { 
        header("Location: $subdir/install/");
        exit;
    }
}

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    realpath(APPLICATION_PATH . '/../include'),
    get_include_path(),
)));

if (!function_exists('stream_resolve_include_paths')) {
    function stream_resolve_include_paths($filename) {
        foreach (explode(PATH_SEPARATOR, get_include_path()) as $include_path) {
            $realpath = realpath("{$include_path}/{$filename}");
            if ($realpath !== false) {
                return $realpath;
            }
        }

        return false;
    }
}

if (!stream_resolve_include_paths('Zend/Application.php')) {
    // include libzend if we don't have zend_application
    set_include_path(implode(PATH_SEPARATOR, array(
        '/usr/share/php/libzend-framework-php',
        get_include_path(),
    )));
}

/** Zend_Application */
require_once 'Zend/Application.php';

if (defined('INSTALL')) {
    $oldErrorReporting = error_reporting();
    error_reporting(0);

    if (!class_exists('Zend_Application', FALSE)) {
        die('Missing dependency! Please install Zend Framework library!');
    }

    error_reporting($oldErrorReporting);
}

// Create application, bootstrap, and run
$application = new \Zend_Application(APPLICATION_ENV);

// Set config
$setConfig = function(Zend_Application $application) {
    require_once 'Zend/Config/Ini.php';
    $defaultConfig = new \Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini-dist', APPLICATION_ENV);
    $config = $defaultConfig->toArray();
    if (is_readable(APPLICATION_PATH . '/configs/application.ini')) {
        try {
            $userConfig = new \Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini', APPLICATION_ENV);
            $config = $application->mergeOptions($config, $userConfig->toArray());
        } catch (\Zend_Config_Exception $e) { // ignore missing section
        }
    }
    $application->setOptions($config);
};

$setConfig($application);
unset($setConfig);

> 
```

# perl - Perl 或 VBscript：Wow64DisableWow64FsRedirection

> ID：10920343
> 
> 赞同：1
> 
> 时间：2012-06-06T18:54:28.653
> 
> 标签：perl, vbscript

我如何制作两个简单的脚本来做到这一点：

[Wow64DisableWow64Fs 重定向](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx)

我想禁用文件夹重定向，安装一个程序，然后重新激活它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:18:55.647

如果它不是毫无意义的，因为它只影响调用该函数的线程，那么可以使用[Inline::C](http://search.cpan.org/perldoc?Inline%3a%3aC)、[Win32::API](http://search.cpan.org/perldoc?Win32%3a%3aAPI)或 XS 模块。

`script.pl`：

```
use Win32API::Wow64FsRedirection qw( :ALL );

my $saved = Wow64Disable()
   or die("Wow64Disable: $^E\n");

# ...

Wow64Revert($saved)
   or die("Wow64Revert: $^E\n"); 
```

`Win32API/Wow64FsRedirection.pm`：

```
package Win32API::Wow64FsRedirection;

use strict;
use warnings;
use feature qw( state );

use Exporter   qw( import );
use Win32::API qw( );

our @EXPORT_OK = qw( Wow64Disable Wow64Revert );
our %EXPORT_TAGS = ( ALL => \@EXPORT_OK );

# On success, returns value to pass to Wow64Revert. This value will be true.
# On error, returns false and sets $^E.
sub Wow64Disable {
   state $Wow64DisableWow64FsRedirection = Win32::API->new(
      'kernel32', 'Wow64DisableWow64FsRedirection', 'P', 'L',
   );

   my $OldValue_buf = pack('L', 0);

   $Wow64DisableWow64FsRedirection->Call($OldValue_buf)
      or return undef;

   return unpack('L', $OldValue_buf) || "0 but true";
}

# On success, returns true.
# On error, returns false and sets $^E.
sub Wow64Revert {
   my ($OldValue) = @_;

   state $Wow64RevertWow64FsRedirection = Win32::API->new(
      'kernel32', 'Wow64RevertWow64FsRedirection', 'N', 'L',
   );

   return $Wow64RevertWow64FsRedirection->Call($OldValue);
}

1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:56:12.783

从脚本中执行此操作毫无意义，因为它只会影响调用该函数的线程。它在脚本之外没有任何影响。

# jquery - jQuery 交叉淡入淡出幻灯片错误

> ID：10920348
> 
> 赞同：0
> 
> 时间：2012-06-06T18:54:39.523
> 
> 标签：jquery

嗨，我创建了一个交叉淡入淡出幻灯片女巫，我已经尝试创建一段时间了，现在作为初学者，它花费的时间比我预期的要多，当我庆祝它终于完成时，我意识到滑块有一个错误，代码如下：

[幻灯片代码](http://jsfiddle.net/ESBVV/3/)

如果我单击按钮`NEXT`或`PREV`幻灯片在每次单击它们时更改图像时开始加快速度。谁能看看我的代码并告诉我我做错了什么？

**编辑**：我添加了图像。代码的问题是每次单击下一个或上一个图像时，图像开始滑动的速度越来越快，默认情况下它应该每 4 秒更改一次图像，但是在您单击下一个或上一个上几次后图像变化的速度增加了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:10:25.833

[http://jsfiddle.net/qve6z/](http://jsfiddle.net/qve6z/) 这是一个工作代码！我曾是：

1.  将你的下一个和上一个函数移到 $(function(){...}); 身体
2.  添加 ; 到缺少的语句结束
3.  更改了函数的顺序，首先声明，然后调用它
4.  将 setIntervals 从更改`setInterval("functionname()",1000)`为`setInterval(functionname,1000)`
5.  在函数声明之后移动了第一个 setInterval。

我已将您的图像更改为文本（1,2,3,4），仅用于测试。

# c# - 更改用户控件的属性

> ID：10920354
> 
> 赞同：0
> 
> 时间：2012-06-06T18:54:57.750
> 
> 标签：c#, asp.net

我更改了 Web 用户控件中的公共属性，但客户端看不到该更改，直到我删除用户控件并重新添加它，然后它才看到更改。

我在想，如果在很多地方都使用了用户控件，我是否必须对所有页面都这样做？当然，我错过了什么？

这是我的 webusercontrol 的代码隐藏：

```
public partial class ReportExporter : System.Web.UI.UserControl
{
    public IEnumerable<object> DataSource { get; set; }

    public String ExportFilename { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void BtnExportCsv_Click(object sender, EventArgs e)
    {
        //Client needs to subscribe to this event and set the
        //DataSource property with IEnumerable. 
        //Todo: Find other ways to show this as a requirement.
        OnExportEvent(e);
        if (String.IsNullOrEmpty(ExportFilename))
            ExportFilename = "NeedToOverrideThisName";
        Response.Clear();
        Response.ContentType = "text/csv";
        Response.AddHeader("Content-Disposition", "attachment; filename=" + ExportFilename + ".csv");

        byte[] csvData = Utility.ToCsv(",", DataSource.ToList());
        Response.OutputStream.Write(csvData, 0, csvData.Length);
        HttpContext.Current.Response.End();
    }

    protected void BtnExportPdf_Click(object sender, EventArgs e)
    {

    }

    public event EventHandler ExportEvent;

    protected void OnExportEvent(EventArgs e)
    {
        if (ExportEvent != null)
        {
            ExportEvent(this, e);
        }
    }

} 
```

我所做的只是更改 DataSource 的属性名称，它是 AnyList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:17:21.690

如果我理解，您可以将属性的值保存在 ViewState 上，例如：

```
public String ExportFileName 
{ 
   get 
   {
       if (ViewState["ExportFileName_" + this.Id] == null) 
          return "default_name";

       return ViewState["ExportFileName_" + this.Id].ToString();
   }
   set
   {
       ViewState["ExportFileName_" + this.Id] = value;
   }
} 
```

如果您这样做，您的页面上可以有多个用户控件实例而不会出现问题，因为 ViewState Key 是由用户控件的 Id 属性索引的。

# javascript - 将单击事件附加到尚未添加到 DOM 的 JQuery 对象

> ID：10920355
> 
> 赞同：184
> 
> 时间：2012-06-06T18:55:02.087
> 
> 标签：javascript, jquery, onclick, jquery-events

在将单击事件添加到 DOM 之前，我一直在将单击事件附加到 JQuery 对象时遇到很多麻烦。

基本上我有我的函数返回的这个按钮，然后我将它附加到 DOM。我想要的是用自己的点击处理程序返回按钮。我不想从 DOM 中选择它来附加处理程序。

我的代码是这样的：

```
createMyButton = function(data) {

  var button = $('<div id="my-button"></div>')
    .css({
       'display' : 'inline',
       'padding' : '0px 2px 2px 0px',
       'cursor' : 'pointer'
     }).append($('<a>').attr({
       //'href' : Share.serializeJson(data),
       'target' : '_blank',
       'rel' : 'nofollow'
     }).append($('<image src="css/images/Facebook-icon.png">').css({
       "padding-top" : "0px",
       "margin-top" : "0px",
       "margin-bottom" : "0px"
     })));

     button.click(function () {
        console.log("asdfasdf");
     });

     return button;     
} 
```

返回的按钮无法捕获点击事件。但是，如果我这样做（在按钮添加到 DOM 之后）：

```
$('#my-button').click(function () {
    console.log("yeahhhh!!! but this doesn't work for me :(");
}); 
```

它有效......但不适合我，不是我想要的。

这似乎与该对象还不是 DOM 的一部分这一事实有关。

哦！顺便说一句，我正在使用 OpenLayers，我将按钮附加到的 DOM 对象是一个 OpenLayers.FramedCloud （它还不是 DOM 的一部分，但一旦触发了几个事件，它将是。）

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-06-06T19:01:28.253

用这个。您可以将 body 替换为 dom 就绪上存在的任何父元素

```
$('body').on('click', '#my-button', function () {
     console.log("yeahhhh!!! but this doesn't work for me :(");
}); 
```

看这里[http://api.jquery.com/on/](http://api.jquery.com/on/)有关如何使用 on() 的更多信息，因为它从 1.7+ 开始替换 live()。

下面列出了您应该使用的版本

> $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> 
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> 
> $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-10-08T14:07:10.380

我真的很惊讶没有人发布这个

```
$(document).on('click','#my-butt', function(){
   console.log('document is always there');
}) 
```

如果您不确定当时该页面上将包含哪些元素，只需将其附加到`document`.

**注意：**从性能角度来看，这是次优的 - 为了获得最大速度，应该尝试附加到要插入的元素的最近父级。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-06T18:59:25.410

试试这个......用父选择器替换正文

```
$('body').on('click', '#my-button', function () {
    console.log("yeahhhh!!! but this doesn't work for me :(");
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-06T19:02:57.493

尝试：

```
$('body').on({
    hover: function() {
        console.log("yeahhhh!!! but this doesn't work for me :(");
    },
    click: function() {
        console.log("yeahhhh!!! but this doesn't work for me :(");
    }
},'#my-button'); 
```

**[jsfiddle 示例](http://jsfiddle.net/j08691/aCs8g/)**。

使用 .on() 并绑定到动态元素时，您需要引用页面上已经存在的元素（如示例中的 body）。如果您可以使用更具体的元素来提高性能。

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

源：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-15T18:58:20.993

你必须附加它。使用以下命令创建元素：

```
var $div = $("<div>my div</div>");
$div.click(function(){alert("clicked")})
return $div; 
```

然后，如果您附加它将起作用。

看看你的例子[在这里](http://jsfiddle.net/yxs95bd3/)和一个简单的版本[在这里](http://jsfiddle.net/cn7y2mwb/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-11T04:41:48.557

为那些使用 .on() 侦听绑定在最近加载的表格单元格内的输入上的事件的人补充信息；我设法使用delegate() 将事件处理程序绑定到此类表格单元格，但.on() 不起作用。

我将表 ID 绑定到 .delegate() 并使用描述输入的选择器。

例如

**HTML**

```
<table id="#mytable">
  <!-- These three lines below were loaded post-DOM creation time, using a live callback for example -->
  <tr><td><input name="qty_001" /></td></tr>
  <tr><td><input name="qty_002" /></td></tr>
  <tr><td><input name="qty_003" /></td></tr>
</table> 
```

**jQuery**

```
$('#mytable').delegate('click', 'name^=["qty_"]', function() {
    console.log("you clicked cell #" . $(this).attr("name"));
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T18:58:03.550

使用 .live 对您有用吗？

```
$("#my-button").live("click", function(){ alert("yay!"); }); 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

**编辑**

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-06T19:01:50.090

活动现场

```
$('#my-button').on('click', function () {
    console.log("yeahhhh!!! but this doesn't work for me :(");
}); 
```

或在追加后添加事件

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-06T19:09:25.460

jQuery .on 方法用于绑定事件，即使页面加载时不存在元素。这是[链接](http://api.jquery.com/on/) 它是这样使用的：

```
 $("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
 }); 
```

在 jquery 1.7 之前，. [使用了live()](http://api.jquery.com/live/)方法，但现在已弃用。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-06-06T19:02:46.370

也许 bind() 会有所帮助：

```
button.bind('click', function() {
  alert('User clicked');
}); 
```

# linq - 寻找在 LINQ 中对三个表执行左外连接的更好方法

> ID：10920362
> 
> 赞同：0
> 
> 时间：2012-06-06T18:55:31.023
> 
> 标签：linq, linq-to-sql

我正在尝试在三个表上进行左外连接。我知道有一种方法可以在一个变量中做到这一点，但我无法弄清楚。相反，我执行了两个单独的左外连接，然后对它们进行了左外连接。这是我的代码：

```
var outerJoin1 =    

    (from h in resultHours  
    join u in results on new {h.PhysicalUnitId, h.MonthNum} equals new {u.PhysicalUnitId, u.MonthNum} into outer
    from grouping in outer.DefaultIfEmpty() 
    select new {timeKey = h, Key = grouping});

var outerJoin2 =    

    (from h in resultHours
    join s in serviceHrsResults on new {h.PhysicalUnitId, h.MonthNum} equals new {s.PhysicalUnitId, s.MonthNum} into outer2
    from grouping in outer2.DefaultIfEmpty()
    select new {timeKey = h, Key = grouping});

var outerJoin = 

    (from a in outerJoin1
    join b in outerJoin2 on new {a.timeKey.PlantId, a.timeKey.MonthNum} equals new {b.timeKey.PlantId, b.timeKey.MonthNum} into outer
    from grouping in outer.DefaultIfEmpty()
    select new{timeKey = a, Key = grouping}).Distinct(); 
```

我尝试将上述内容放在一个变量中，但无法使其正常工作。这是我尝试过的：

```
var outerjoin =

    from h in resultHours
    join u in results on new {h.PhysicalUnitId, h.MonthNum} equals new {u.PhysicalUnitId, u.MonthNum} into outer
    from grouping in outer.DefaultIfEmpty()
    from hr in resultHours
    join s in serviceHrsResults on new {hr.PhysicalUnitId, hr.MonthNum} equals new {s.PhysicalUnitId, s.MonthNum} into outer2
    from grouping in outer2.DefaultIfEmpty()
    select new {timeKey = h && timeKey = hr, Key = grouping}; 
```

这个问题是两个分组冲突。我很确定我只需要在选择之前进行一个分组，但无法弄清楚如何使用“分组”并包括outer.DefaultIfEmpty（）和outer2.DefaultIfEmpty（）。

如果有人能启发我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:14:14.790

您正在使用重复的范围变量 id - 您有 2x `grouping`。
- 您想要在结果集中进行哪个分组？- 这条生产线的预期目标是什么？ `timeKey = h && timeKey = hr`- 你想如何在投影中组合它们？

我会尝试下面的查询，但我已经改变了`select`它的一部分，因为你的组合版本对我来说没有意义。

让我知道它是否对您有用，因为没有数据很难测试它，所以我不能确定新版本是否正常。

```
var outerjoin =
    from h in resultHours
    join u in results on new {h.PhysicalUnitId, h.MonthNum} equals new {u.PhysicalUnitId, u.MonthNum} into outer
    from grouping1 in outer.DefaultIfEmpty()
    //from hr in resultHours
    join s in serviceHrsResults on new {grouping1.PhysicalUnitId, grouping1.MonthNum} equals new {s.PhysicalUnitId, s.MonthNum} into outer2
    from grouping2 in outer2.DefaultIfEmpty()
    select new {timeKey = h, Key1 = grouping1, Key2 = grouping2}; 
```

# php - 登录系统哈希盐

> ID：10920365
> 
> 赞同：0
> 
> 时间：2012-06-06T18:55:36.433
> 
> 标签：php, security, login, hash, salt

我正在重写一个 PHP 登录系统，而我刚刚遇到了这个问题

```
function createSalt()
{
    $string = md5(uniqid(rand(), true));
    return substr($string, 0, 3);
}
$salt = createSalt();
$hash = hash('sha256', $salt . $hash); 
```

实际上我以前从未使用过盐渍，我搜索了一下，发现它很有用。但我的回答是，这是处理盐的好方法吗？不会`$string = sha1(uniqid(mt_rand(), true))`更好吗？

如果只返回 3 个字符的哈希值呢？我真的不明白。

你认为呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:06:53.520

考虑使用 PHP 的[crypt()](http://php.net/manual/en/function.crypt.php)而不是重新发明轮子。它专为密码散列而设计，并提供适合该目的的散列算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:28:21.893

我更喜欢 sha1 或 sha256，md5 超级过时，sha 功能要好得多。但这是我的意见，选择你想要的。

在这种情况下，真正重要的是盐。盐总是与散列一起以明文形式存储，用于提高密码的长度（如果你想散列密码，当然可能是别的东西）以防止基于彩虹/查找表的攻击。这不能防止使用暴力破解密码（它对 md5 非常有效，所以使用更难破解的 sha256）。

因此，如果您使用 32 个随机字符作为散列，或者类似 md5(mt_rand()) 之类的东西，这完全不重要——重要的是长度。我会使用类似的东西

```
$hash = md5(mt_rand()) . md5(mt_rand()); 
```

md5() 基于随机数生成 32 个字节的字符串（mt_rand() 优于 uniqueid()）。使用这条简单的线，您将获得一个非常“强”的哈希，它应该保护每个密码免受彩虹表的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:05:26.077

我不是 PHP 程序员，但我一直在为登录系统编写相同的哈希脚本。

我将它存储在 GitHub 上 - [https://github.com/revitalagency/PHP5-Salt-Super-Admin](https://github.com/revitalagency/PHP5-Salt-Super-Admin)

我使用...创建了我的哈希

```
hash_hmac('sha256', $_POST['pass'], GLOBAL_SALT); 
```

GLOBAL_SALT 在配置文件中定义，而不是在数据库中以提供额外保护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:03:32.743

我不同意给定的功能`createSalt()`-主要出于与您相同的原因。

我的方法是

```
define(SALT_LENGTH,32);

function createSalt()
{
  $string='';
  for ($i=0;$i<SALT_LENGTH;$i++) $string.=chr(rand(0,255));
  return $string;
} 
```

一个好的盐是一个随机的字节序列——没有 MD5 或 SHA1 没有任何意义，因为没有什么可以散列！

# openrasta - OpenRasta：我可以使用通用处理程序优雅地对资源进行版本控制吗？

> ID：10920366
> 
> 赞同：0
> 
> 时间：2012-06-06T18:55:37.403
> 
> 标签：openrasta

我们有一个 OpenRasta 服务，我们希望使用媒体类型来对我们的资源进行版本控制。对于每个新版本，我们将有一组不同的 DTO，可以通过命名空间进行区分。对于每个版本的 DTO，我们都有相应的媒体类型。

所以 DTO 将被映射到这样的媒体类型：

```
Namespace.Dto.V1.MyResource -> application/vnd.Namespace.Dto.V1.MyResource+json    
Namespace.Dto.V2.MyResource -> application/vnd.Namespace.Dto.V2.MyResource+json 
```

存储库实现将特定于 DTO 的版本，但接口是通用的。我希望我的处理程序和编解码器也是通用的，所以我不需要为每个版本的 DTO 复制/粘贴它们。所以我希望我的路线看起来像这样：

```
ResourceSpace.Has.ResourcesOfType<V1.MyResource>()
  .AtUri("MyResource/{resourceID}")
  .HandledBy<MyResourceHandler<Dto.V1.MyResource>>()
  .TranscodedBy<MyResourceCodec<Dto.V1.MyResource>>()
  .ForMediaType(mediaTypeMapper.GetMediaType(typeof(Dto.V1.MyResource)));

//V2 of DTOs
ResourceSpace.Has.ResourcesOfType<V2.MyResource>()
  .AtUri("MyResource/{resourceID}")
  .HandledBy<MyResourceHandler<Dto.V2.MyResource>>()
  .TranscodedBy<MyResourceCodec<Dto.V2.MyResource>>()
  .ForMediaType(mediaTypeMapper.GetMediaType(typeof(Dto.V2.MyResource))); 
```

这应该工作吗？例如，现在，我的服务似乎正在处理与`MyResourceHandler<Dto.V1.MyResource>`GET 请求上的 Accept 标头无关的请求。

有什么想法吗？我们可以更改我们的方案以使用 URI，`/v1/MyResource/`而不是使用接受标头，但是让它工作会很棒。

**编辑：** 我应该补充一点，我们使用媒体类型进行版本控制的部分原因是因为这是一项供内部使用的服务，并不意味着可以在公共网络上访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:04:04.957

您在同一个 URI 上注册了两种资源类型，只会选择一种，无法在请求时进行区分。

我不认为 URI 或媒体类型中的版本控制在网络上是一个好主意。也就是说，对于您想要的（不同的媒体类型），然后使用相同的资源类型并使用您的编解码器从传入/传出数据中填充相同的类型。这是 OR 中编解码器的职责，在 DTO 和媒体类型格式之间建立连接。

对于传入的请求，我们需要根据 URI 知道您想要什么资源类型。如果你有两种不同的类型，它应该是不同的资源。*也就是说，*如果您执行以下操作也可以：

```
ResourceSpace.Has.ResourcesNamed("myResource").AtUri("/myResource").HandledBy<ResourceV1Handler>().And.HandledBy<ResourceV2Handler>();
ResourceSpace.Has.ResourcesOfType<MyV1Resource>().WithoutUri.TranscodedBy<V1Codec>();
ResourceSpace.Has.ResourcesOfType<MyV2Resource>().WithoutUri.TranscodedBy<V2Codec>(); 
```

然后你可以写

```
public class handler {
  public object Post(MyV1Resource resource) {}
  public object Post(MyV2Resource resource) {}
} 
```

那会奏效的。您将无法以这种方式实现 get，因为在大多数情况下，OR 假定一种资源类型 == 一个 URI。

至于泛型，如果您使用 IoC 容器，则可以以泛型方式注册您的处理程序（也就是注册 typeof(IHandler<>) 和 typeof(Handler<>)）。这意味着任何 IHandler 都会被解析为 Handler。然后，您只需在注册中注册 HandledBy>() 即可。这同样适用于编解码器（但话又说回来，OR 中的编解码器用于处理媒体类型问题，而不仅仅是作为序列化机制，因为序列化本身对 Web 来说是邪恶的，应该很少使用）。

# entity-framework-4.1 - 停止 DefaultMembershipProvider 的 EF 数据库初始化

> ID：10920370
> 
> 赞同：5
> 
> 时间：2012-06-06T18:55:42.090
> 
> 标签：entity-framework-4.1, asp.net-mvc-4, membership-provider

团队，我有一个正在部署的 ASP.NET MVC 应用程序。当我部署它时，应用程序工作正常，但是当我调用它时`Membership.CreateUser`，它最终会尝试创建数据库，即使它已经存在。`CreateMembershipEntities`由于数据库已经存在，我需要做什么才能使其不会尝试调用？

我试过`Database.SetInitializer`一个什么都不做的初始化程序，我试过删除`defaultConnectionFactory`Web.config 中的 - 我目前没有选择。

我期待您的帮助！

**更新**

我昨天才发现它试图创建数据库的原因是因为主机服务器不允许连接查询`sysdatabases`，因此数据库**永远不**存在，因此总是试图创建它。看来我可能不得不回到老式的 AspNet 会员提供程序，并且也离开 EF 代码优先模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:45:42.483

看看这里：[http](https://web.archive.org/web/20120520145119/http://www.qualitydata.com/learn/web-config-membership-provider-settings) ://www.qualitydata.com/learn/web-config-membership-provider-settings 它显示了 web.config 的成员资格配置部分。您必须编写一个类似的部分并将 connectionStringName="Your Connection String"。在您的连接字符串中，您指定现有数据库的信息。

# three.js - 将加载的 JSON 文件与名称关联以供以后访问

> ID：10920372
> 
> 赞同：2
> 
> 时间：2012-06-06T18:55:49.543
> 
> 标签：three.js

我想加载多个 JSON 文件并控制其网格的可见性。为此，我将它们与它们的 JSON 文件名相关联。我得到了它的工作，但解决方案并不让我满意。

我修改了 THREE.JSONLoader 并将一个新参数传递给回调函数。因此，对于 three.js 的每个新版本，我都必须再次修补 three.js 文件。

这是我的工作解决方案（客户端）。请参阅 loader.load(filename, callback, meshname) 的新第三个参数。

有没有更好的解决方案，不需要打补丁的three.js 库？

谢谢

```
// Load the JSON files
var meshes = new Object();
var jsonFileNames = ['assembly/part1.json', 'assembly/part2.json', 'assembly/part3.json'];
for(var i = 0; i < jsonFileNames.length; i++){
    var loader = new THREE.JSONLoader();
    var meshName = jsonFileNames[i].split("/")[1].split(".")[0];
    loader.load(jsonFileNames[i], function(geometry, meshName){
        mesh = new THREE.Mesh(geometry, new THREE.MeshPhongMaterial({vertexColors: THREE.FaceColors}));
        mesh.scale.set(0.2, 0.2, 0.2);
        mesh.doubleSided = true;
        scene.add(mesh);
        meshes[meshName] = mesh;
    }, meshName);
}

// ....

// Access their meshes
meshes[meshName].visible = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:52:53.473

您可以创建一个如下所示的回调工厂。[当在循环内创建时](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures#Creating_closures_in_loops.3A_A_common_mistake)，它将解决闭包问题。

```
function makeHandler(meshName) {
    return function(geometry) {
        mesh = new THREE.Mesh(geometry, new THREE.MeshPhongMaterial({vertexColors: THREE.FaceColors}));
        mesh.scale.set(0.2, 0.2, 0.2);
        mesh.doubleSided = true;
        scene.add(mesh);
        meshes[meshName] = mesh;
    };
}

// Load the JSON files
var meshes = new Object();
var jsonFileNames = ['assembly/part1.json', 'assembly/part2.json', 'assembly/part3.json'];
for(var i = 0; i < jsonFileNames.length; i++){
    var loader = new THREE.JSONLoader();
    var meshName = jsonFileNames[i].split("/")[1].split(".")[0];
    loader.load(jsonFileNames[i], makeHandler(meshName));
}

// ....

// Access their meshes
meshes[meshName].visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T14:24:10.833

Tapio 出色答案的变体。这种变体避免了创建和管理`meshes`对象的需要。它通过直接在制作的处理程序函数中创建具有所需对象名称的每个新网格对象来做到这一点。和以前一样，每个网格所需的名称`meshName`由用户定义并传递给处理程序。但随后使用 javascript`eval`函数以所需名称创建新网格。

```
function makeHandler(meshName) {
    return function(geometry) {
        material = new THREE.MeshPhongMaterial({vertexColors: THREE.FaceColors})
        eval (meshName + "= new THREE.Mesh(geometry, material);" );  //***NEW ***
        eval ( "var mesh = " + meshName +";" ); //*** NEW ***
        mesh.scale.set(0.2, 0.2, 0.2);
        mesh.doubleSided = true;
        scene.add(mesh);
        //*** NOT REQUIRED *** meshes[meshName] = mesh;
    };
}

// Load the JSON files
var meshes = new Object();
var jsonFileNames = ['assembly/part1.json', 'assembly/part2.json', 'assembly/part3.json'];
for(var i = 0; i < jsonFileNames.length; i++){
    var loader = new THREE.JSONLoader();
    var meshName = jsonFileNames[i].split("/")[1].split(".")[0];
    loader.load(jsonFileNames[i], makeHandler(meshName));
}

// .... 
```

随后（加载完成时）可以通过其对象名称引用各种网格：-

```
// Access the meshes
    //*** OLD *** meshes["part1"].visible = true;
    //*** OLD *** meshes["part2"].visible = true;
    //*** OLD *** meshes["part3"].visible = true;
    part1.visible = true;//*** NEW ***
    part2.visible = true;//*** NEW ***
    part3.visible = true;//*** NEW *** 
```

# ruby-on-rails - Ruby require 指令导致错误

> ID：10920375
> 
> 赞同：1
> 
> 时间：2012-06-06T18:56:04.893
> 
> 标签：ruby-on-rails, flickr

尝试使用 Ruby on Rails 3.2.3 创建一个简单的 flickr 应用程序时，我遇到了一个问题。首先我安装了一个名为`flickraw`

```
sudo gem install flickraw 
```

然后我尝试使用它

```
require 'rubygems'
require 'flickraw'

class HomeController < ApplicationController
  def index
  end

  def index2
  end

  def index3
  end
end 
```

我得到一个错误：

**HomeController中的LoadError#index**

```
cannot load such file -- flickraw 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:01:18.030

您不应该要求控制器提供宝石。您应该将 flickraw 添加到您的 Gemfile

```
gem "flickraw" 
```

# weka - 如何在 Weka 中读取数据集？

> ID：10920378
> 
> 赞同：2
> 
> 时间：2012-06-06T18:56:19.150
> 
> 标签：weka

我想使用 Weka 网站上提供的一些数据集来使用神经网络进行一些实验。

我必须做什么才能读取数据？

我下载了数据集并将它们保存为 .arff.txt，因此我删除了 .txt 的扩展名，使其只有 .arff。所以我用这个文件作为一个ipnut，但是出现了错误。哪种是读取数据的正确方法？我必须写代码吗？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:12:01.313

我正在使用 Weka 3.6.6，并且 coc81.arff 可以正常打开。您正在使用 Weka 3.7.x，它是 Weka 的开发分支。我建议你[下载](http://www.cs.waikato.ac.nz/ml/weka/)3.6.6 或 3.6.7（最新的稳定版本）并尝试再次打开文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T21:02:27.993

还有另一个简单的抛出......在我的例子中打开你的数据集文件 MS Excel2010，格式化字段 intype。并保存为“csv”，然后在 weka 资源管理器中重新加载该 csv 文件并以 arff 格式保存在本地驱动器上。可能是这个帮助。

# php - 双重小于和管道运算符做什么？

> ID：10920379
> 
> 赞同：4
> 
> 时间：2012-06-06T18:56:19.530
> 
> 标签：php, operators

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

这条线有什么作用？

```
$theVal = ((($theR << 8) | $theG) << 8) | $theB; 
```

`<<`和做什么`|`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:59:56.200

这些是位运算符，允许对整数中的特定位进行评估和操作。

$一个 | $b 或 $a 或 $b 中设置的位被设置。

$a << $b 左移 $a $b 的位向左移动（每一步的意思是“乘以二”）

$a >> $b 右移 将 $a $b 的位向右移动一步（每一步意味着“除以二”）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:00:38.057

字面上的答案可以通过阅读有关[位运算符](http://php.net/manual/en/language.operators.bitwise.php)找到。

实际上，它将红色、蓝色和绿色字节的 3 个值转换为单个 24 位 RGB 值。

# c# - 触发自定义组合的 ondrawitem 事件

> ID：10920383
> 
> 赞同：1
> 
> 时间：2012-06-06T18:56:33.193
> 
> 标签：c#

如何引发 ondraw 事件场景：我在表单中使用带有 onDrawItem 的自定义组合框。drawitem是这样的

```
 protected override void OnDrawItem(DrawItemEventArgs e)
        {...

        }
Question: How do I make the custom combobox ComboLineStyle redraw 
```

selectedindex 上的自身已更改为另一个 cmbBoxLineColor。最终，我需要一种方法来在每个 selectedindex changed 上重绘组合框的所有行。

```
 private void cmbBoxLineColor_SelectedIndexChanged(object sender, EventArgs e)
        {
Here I want the custom combobox-ComboLineStyle  control to redraw itself 

} 
```

编辑当另一个 linecolorcombo 中的颜色发生变化时，我需要下拉菜单再次绘制自己。颜色

```
 lineColorSel = cmbBoxLineColor.SelectedValue;
ComboBoxItemLineStyle itemSolid = new ComboBoxItemLineStyle ("Solid Line", lineColorSel); 
```

我的 linestylecomboboxitem 中的 color 属性将具有 linecolor 组合的 selectedvalue。所以线型组合应该刷新/无效自己并用这个 lineColorSel 重新绘制自己。

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:43:48.797

您可以在继承 System.Windows.Forms.Control 的任何东西上调用 Invalidate() 以强制它重绘

我将如何为选定项目进行自定义绘制的继承人和示例

```
 protected override void OnDrawItem(DrawItemEventArgs e)
    {

        if (e.State == DrawItemState.Selected)
        {
            ...
        }
        else
        {
            ...
        }

        //or you could do it like this
        //if(e.Index == this.SelectedIndex)
        //{
        //}

        ...

    }

    protected override void OnSelectedIndexChanged(EventArgs e)
    {
        base.OnSelectedIndexChanged(e);
        base.Invalidate();
    } 
```

# nsstring - 将 nsarray 转换为 nsdata 到 nsstring 以在标签中使用

> ID：10920389
> 
> 赞同：1
> 
> 时间：2012-06-06T18:57:00.217
> 
> 标签：nsstring, nsdata, nskeyedarchiver

非常感谢更有经验的 Obj C 编码人员的帮助，因为我已经坚持了几天，我相信代码是“接近”的。

我正在从用户联系人创建一个名称列表，然后将此列表传递回标签。我的问题（我认为）来自我使用 NSKeyedArchiver 将列表存档到 NSString 的 NSData 格式。我已经阅读了我能找到的所有内容，但我怀疑我作为一个 NOOB 正在阻止我破译其他一些例子。

这是我的 *.m 文件的一部分，我在其中创建了一个人员列表到一个名为“_objects”的数组中，然后我归档了“_objects”（NSKeyArchiver）制作了一个 NSData（数据），然后我尝试创建一个 NSString（ guestListString) 来自。似乎一切顺利，除了“guestListString”在我的人名列表中包含一堆额外的 gobblygook 字符（是的，一个高科技术语）。我尝试过其他格式，但它们要么返回（null），要么返回一堆外来字符。我怀疑我还没有学会一些需要插入的步骤，以摆脱逗号分隔名称列表周围的这些“gobbly gook”字符。

这是代码：

```
// now grab the 'person' property from the Addressbook, pass it as a string back to 'tableview cell', inserting it at 'row 0' and update display
- (void)displayPerson:(ABRecordRef)person {

    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    } 

    NSString *selectedPerson = (__bridge NSString *)ABRecordCopyCompositeName(person);
    //NSString *firstname =(__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonFirstNameProperty); 
    //NSString *lastname =(__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonLastNameProperty);
#ifdef DEBUG
    NSLog(@"displayPerson insertRowsAtIndexPath selectedPerson = "@"%@",selectedPerson); // shows last added name
#endif
    [_objects insertObject:selectedPerson atIndex:0];
    //[_objects insertObject:firstname atIndex:0];
    //[_objects insertObject:lastname atIndex:0];
#ifdef DEBUG
    NSLog(@"displayPerson insertRowsAtIndexPath _objects = "@"%@",_objects); // shows 'list' of all names currently in list
    //NSLog(@"displayPerson insertRowsAtIndexPath stringWithFormat _objects = "@"%@",[NSString stringWithFormat:@"%@",_objects]);
#endif
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];    
    //
    // (Code to Archive an array) Given that "_objects" contains an array of 'selectedPerson' objects
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:_objects];
    // Now save to NSUser defaults
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"_objects"];
    // Now let's see what is in 'data'
    NSLog(@"archive of 'data' from key _objects = "@"%@",data); // shows long list of 8 bit numbers
    //
    // (Code to unarchive an array) Now to unarchive: 
    // I'm doing this code example here just so I understand unarchive procedure; not needed in actual app code
    NSData *_objectsData = [[NSUserDefaults standardUserDefaults] objectForKey:@"_objects"];
    NSArray *backIntoArray = [NSKeyedUnarchiver unarchiveObjectWithData:_objectsData];
    //
    // Now lets see what is in "backIntoArray"
    NSLog(@"unarchive of _objectsData = "@"%@",_objectsData); // shows long list of 8 bit numbers
    NSLog(@"unarchive of NSArray to backIntoArray = "@"%@",backIntoArray); // shows 'list' of all names currently in list
    //
    // Now convert NSData (data) to NSString so I can pass it to other elecments like 'labels'
    //NSString *guestListString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; // this is equivalent code to next two lines
    NSString *guestListString;
    guestListString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; // returns extra characters around list of names instead of list of names ???
    // other potential format options that could exist
    //guestListString = [[NSString alloc] initWithData:data encoding:NSNEXTSTEPStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSJapaneseEUCStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSNEXTSTEPStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; // returns (null) ???
    //guestListString = [[NSString alloc] initWithData:data encoding:NSISOLatin1StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSSymbolStringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSNonLossyASCIIStringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSShiftJISStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSISOLatin2StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUnicodeStringEncoding]; // returns string of japanese looking characters??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSWindowsCP1251StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSWindowsCP1252StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSWindowsCP1253StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSWindowsCP1254StringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSWindowsCP1250StringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSISO2022JPStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSMacOSRomanStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF16StringEncoding]; // returns string of japanese looking characters??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF16BigEndianStringEncoding]; // shows 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF16LittleEndianStringEncoding]; // returns string of japanese looking characters??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF32StringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF32BigEndianStringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSUTF32LittleEndianStringEncoding]; // returns (null) ??? 
    //guestListString = [[NSString alloc] initWithData:data encoding:NSProprietaryStringEncoding]; // shows 
    //
    // show me what is stored in NSString 'guestListString' 
    NSLog(@"displayPerson NSString conversion of 'data' to 'guestListString' = "@"%@",guestListString); // 
    //
    // Pass the required text back to 'guestsListLabel.text' on ViewController screen
    //((InitialViewController *)self.presentingViewController).guestListLabel.text=selectedPerson; // This WORKS passing back the last selectedPerson 1 name
    ((InitialViewController *)self.presentingViewController).guestListLabel.text=guestListString; // Not working yet; trying to pass back full list of names
    //
    // add code here to handle saving of guestlist before leavig this 'insertRowsAtIndexPath' section
    // Archiving is simple, using the following code:
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    // This next line archives objects correctly so they can be reloaded later and be editable (mutable) 
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:_objects] forKey:@"guestListTable"];
    // This next line writes the value loaded into 'guestListLabel.text' into variable 'kGuestListText' which is used in InitialViewController to display in all 3 field types
    [userDefaults setValue:((InitialViewController *)self.presentingViewController).guestListLabel.text forKey:kGuestsListText];
    // update with all userDefaults variables
    [userDefaults synchronize];
    //
} 
```

# php - 表单在文本框中提交会话值

> ID：10920391
> 
> 赞同：0
> 
> 时间：2012-06-06T18:57:04.113
> 
> 标签：php

我在这里使用会话在文本框中保存值时遇到问题。

我在其中一个文本框中输入了一个值，而另一个没有，我提交了它。该值将出现在第一个文本框上并将禁用该文本框，但是当我在第二个文本框上输入一个值并提交时，第一个文本框上的值已经消失。谁能帮我解决这个问题？

**PHP**

```
<?php
session_start();
@$two = $_POST['two'];
@$four = $_POST['four'];
if(isset($_POST['submit'])){
    $_SESSION['two'] = $two;
    $_SESSION['four'] = $four;
}
?> 
```

**HTML**

```
<form method="POST">
Textbox One:  <input type="text" value="<?=@$_SESSION['two']; ?>" name="two" class="inputborder" size="20" <?phpif(@$_SESSION['two']){ echo"disabled=disabled";} else{echo ""; }?> />
<br>    
Textbox Two:  <input type="text" value="<?=@$_SESSION['four']; ?>" name="four" class="inputborder" size="20" <?php if(@$_SESSION['four']){ echo"disabled=disabled";}else{ echo ""; }?> />
<br>        
<input type="submit" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:11:05.060

为什么在检查提交之前尝试获取 $2 和 $4 的变量？

```
<?php
session_start();

if(isset($_POST['submit'])){

  if(isset($_POST['two'])){
      $two = $_POST['two'];
  }

  if(isset($_POST['four'])){
      $four = $_POST['four'];
  }

   $_SESSION['two'] = $two;
   $_SESSION['four'] = $four;
}
?> 
```

这应该消除 PHP 中对“@”符号的需求。（尽管进一步的错误处理是合适的）。但是你到处都在压制错误，你应该如何获得反馈？

# android - 保存 Facebook 个人资料图片和用户名 Android

> ID：10920396
> 
> 赞同：0
> 
> 时间：2012-06-06T18:57:27.043
> 
> 标签：android, facebook

我一直在为 android 开发一个简单的应用程序 - 我正在尝试使用 Facebook Android SDK 使用 Single Sign-On 登录。

我正在尝试保存个人资料图片和用户名。我不太确定出了什么问题 - 但我在 Facebook 上登录后似乎什么也没发生。

这是我的代码：

```
public class fbLogin extends Activity {
 Facebook facebook = new Facebook("MY-APP-ID");
 private SharedPreferences mPrefs;
 public boolean flag=false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fblogin_screen);
        mPrefs=getPreferences(MODE_PRIVATE);
        String acces_token=mPrefs.getString("acces_token",null);
        long expires=mPrefs.getLong("acces_expires", 0);

        if(acces_token!=null)
        {
            facebook.setAccessToken(acces_token);
        }
        if(expires!=0)
        {
            facebook.setAccessExpires(expires);
        }

        if(!facebook.isSessionValid())
        {
        facebook.authorize(this, new DialogListener() {

            public void onComplete(Bundle values) {
                flag=true;
                 SharedPreferences.Editor editor = mPrefs.edit();
                 editor.putString("access_token", facebook.getAccessToken());
                 editor.putLong("access_expires", facebook.getAccessExpires());
                 editor.commit();

            }

            public void onFacebookError(FacebookError error) {}

            public void onError(DialogError e) {}

            public void onCancel() {}
        });
    } else{
        flag=true;
        }

        if(flag==true)
        {
            try {
                JSONObject me = new JSONObject(facebook.request("me"));
                String id=me.getString("id");
                String userName=me.getString("username");
                ImageView picture;
                TextView usr = (TextView)findViewById(R.id.userName);
                picture = (ImageView) findViewById(R.id.profilePicture);
                URL image_value= new URL("http://graph.facebook.com/" + userName + "/pictures" );
                Bitmap profPict=BitmapFactory.decodeStream(image_value.openConnection().getInputStream());
                picture.setImageBitmap(profPict);
                usr.setText(userName);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:36:19.807

更改此 URL image_value= new URL("http://graph.facebook.com/" + userName + "/pictures" ); 到这个 URL image_value= new URL("http://graph.facebook.com/" + userName + "/picture" );

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:05:01.743

把这个：

```
if(flag==true)
        {
            try {
                JSONObject me = new JSONObject(facebook.request("me"));
                String id=me.getString("id");
                String userName=me.getString("username");
                ImageView picture;
                TextView usr = (TextView)findViewById(R.id.userName);
                picture = (ImageView) findViewById(R.id.profilePicture);
                URL image_value= new URL("http://graph.facebook.com/" + userName + "/pictures" );
                Bitmap profPict=BitmapFactory.decodeStream(image_value.openConnection().getInputStream());
                picture.setImageBitmap(profPict);
                usr.setText(userName);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

在它自己的名为 getInfo() 的方法中，然后在您的对话框侦听器中调用 getInfo() 像这样

```
facebook.authorize(this, new DialogListener() {

            public void onComplete(Bundle values) {
                flag=true;
                 SharedPreferences.Editor editor = mPrefs.edit();
                 editor.putString("access_token", facebook.getAccessToken());
                 editor.putLong("access_expires", facebook.getAccessExpires());
                 editor.commit();
                 //We're authorized so getInfo();
                 getInfo();
            }

            public void onFacebookError(FacebookError error) {}

            public void onError(DialogError e) {}

            public void onCancel() {}
        }); 
```

现在，在 Facebook SDK 中，有一个名为 Utility 的类。设置 LOGGING = true。再试一次，看看日志。来自 facebook 的日志可能会显示您的应用程序哈希和 facebook 应用程序之间存在不匹配。复制日志中的哈希值，转到您的 Facebook 应用程序，选中 android 应用程序框并将哈希值粘贴到相应的字段中。

# c# - Find 方法返回实体框架中的缓存数据

> ID：10920397
> 
> 赞同：0
> 
> 时间：2012-06-06T18:57:29.303
> 
> 标签：c#, caching, orm, entity-framework-4.1

有没有区别

```
var c = context.users.Find(100) 
```

和

```
var c = context.users.FirstOrDefault(o=>o.id = 100) 
```

我不知道为什么`Find`方法返回缓存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:15:14.630

如果具有指定键的对象已附加到数据上下文，则 Find() 将避免访问数据库。

# asp.net - 仅包含数字的字符串

> ID：10920399
> 
> 赞同：-4
> 
> 时间：2012-06-06T18:57:36.840
> 
> 标签：asp.net, regex

> **可能重复：**
> [仅用于数字](https://stackoverflow.com/questions/8502357/regex-for-just-only-numbers)
> [的正则表达式 用于仅允许正数的 Javascript 正则表达式](https://stackoverflow.com/questions/9523521/javascript-regex-for-allowing-only-positive-digits)

如何检查字符串是否仅包含数字并且它不是空字符串？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:58:46.220

匹配 1 个或多个数字，在开头和结尾锚定正则表达式：

```
/^\d+$/ 
```

*   `^`- 锚点在字符串的开头
*   `\d`- 匹配数字（别名为`[0-9]`
*   `+`- 匹配上述一项或多项
*   `$`- 锚点在字符串的末尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:17:19.040

尝试使用[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator%28v=vs.71%29.aspx)（不允许该字段为空）而不是 RegularExpressionValidator （允许。）

# c - 替换许多字符串常量的宏

> ID：10920402
> 
> 赞同：1
> 
> 时间：2012-06-06T18:57:46.933
> 
> 标签：c, macros, constants

我有几个相机对象的标签，我正在尝试节省内存（非常吝啬的内存环境）。这是我当前的版本，使用静态常量数组和宏：

在标题中：

```
#define NUM_CAMERAS         6        
static const char* CAM_LABELS[NUM_CAMERAS] = {  "Camera1",
                                                "Camera2",
                                                "Camera3",
                                                "752x480_cam",
                                                "std_cam",
                                                "wide_cam" };
#define CAM_LABEL(id)           id<=NUM_CAMERAS?CAM_LABELS[id-1]:"cam id error" 
```

程序中的用法：

```
int cam = 3;     
pritnf("Configuring camera id [%d], label: [%s]\n",cam, CAM_LABEL(cam) ); 
```

以上工作，但我想使用宏来替换静态 const 数组，所以我会在标题中更像是：

```
#define NUM_CAMERAS       6
#define CAM_LABEL1        "Camera1"
#define CAM_LABEL2        "Camera2"
#define CAM_LABEL3        "Camera3"
#define CAM_LABEL4        "752x480_cam"
#define CAM_LABEL5        "std_cam"
#define CAM_LABEL6        "wide_cam"
#define CAM_LABEL(id)     /* myster code */ 
```

有没有办法将一个整数值作为上面的“id”传递，然后重新创建一个已知的 CAM_LABEL## 值？我尝试了## 粘合宏的一些组合，但它会放入“cam”或任何传递给宏的变量名，而不是那个变量值。我可能错过了一些非常明显的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:18:49.063

不确定我是否理解您的问题，但这对我来说非常有效：

```
#include <stdio.h> 

#define CAM_LABEL1        "Camera1"
#define CAM_LABEL2        "Camera2"
#define CAM_LABEL3        "Camera3"
#define CAM_LABEL4        "752x480_cam"
#define CAM_LABEL5        "std_cam"
#define CAM_LABEL6        "wide_cam"

#define CAM(n) CAM_LABEL##n

int main(int argc, const char *argv[])
{
  printf("CAM: [%s], [%s]\n",CAM(2),CAM(3));
} 
```

但是，我认为这不会有效节省内存（这似乎是您主要关心的问题）。您指望编译器将折叠相同的常量字符串这一事实，以便“Camera1”的每个实例都被相同的指针替换（并且字符串本身只存储一次）。这不能保证；在：

```
printf("%s, %s\n","Camera1","Camera1"); 
```

编译器创建两个独立的字符串是合法的。

我建议您创建一个字符串和一个偏移向量：

```
const char *cam_labels="Camera1\0Camera2\0Camera3";
const char *cam_labels_offset = "\x00\x08\x10";

#define CAM(x)    (cam_labels+cam_labels_offset[x])
int main(int argc, const char *argv[])
{
  printf("CAM: [%s], [%s]\n",CAM(0),CAM(2));
} 
```

您应该添加一些控制以避免发生令人讨厌的事情（但要冒双重评估的风险），如果字符串的总长度超过 255，您将需要用两个字节表示偏移量。

您还应该编写一个小例程来获取偏移量，手动计算它们太容易出错。

设 p 是系统中 a (char *) 的大小，n 是标签的数量，s 是字符串长度的总和（包括结尾的 \0）。

您的第一种方法（带有指向字符串的指针数组的方法）将需要 n*p+s 字节来存储，您的第二种方法（使用宏）实际上取决于编译器，我建议的那个需要 2p+s+n。

# c# - Metro App 开发和远程数据库连接

> ID：10920404
> 
> 赞同：1
> 
> 时间：2012-06-06T18:57:48.850
> 
> 标签：c#, .net, sql, microsoft-metro, winrt-xaml

我最初创建了一个基于 Web 矩阵的站点，然后在 Visual Studio Ultimate 中继续开发。现在网站已经完成，我正在为 Windows 8 发布预览版制作 Metro 应用程序。

我需要 Metro 应用程序来连接到远程 SQL 数据库 - 但在 Metro 应用程序中连接到远程（或任何类型的）数据库似乎是不可能的。有什么方法可以在不使用服务或 Azure 的情况下从 Metro 应用程序中连接到远程数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:11:30.787

> 有什么方法可以在不使用服务或 Azure 的情况下连接到 Metro 应用程序中的远程数据库？

我将假设“服务”是指 Web 服务。在这种情况下，真的没有其他选择。您必须使用 WCF 或以其他方式创建某种 Web 服务来访问数据库。WinRT 在这方面与 Silverlight 处于相同的情况。

# entity-framework - 工作单元相关的存储库

> ID：10920409
> 
> 赞同：2
> 
> 时间：2012-06-06T18:57:58.900
> 
> 标签：entity-framework, c#-4.0, repository-pattern, unit-of-work

我有 10 节 POCO 课。我正在使用带有 IRespoitory 接口和 UnitOf 工作类的工作单元的简单存储库模式。

是否正确（正常）将我所有的 IRepository 放在一个 UnitOfWork 实例中？

即：10 个 POCO 类 - 10 个 IRepository 实例 - 只有一个 UnitOfWork 类包含所有 10 个存储库

```
UnitOfWork
{
IRepository<Customer> CustomerRepository {get; set;}
IRepository<Customer> CustomerRepository {get; set;}
IRepository<Customer> CustomerRepository {get; set;}
// the same for all others 7 POCo class
// ..other stff
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:00:16.077

它有点像**EF DataContext**。

**EntityFramework 的 DataContext**是一个**工作单元，**有点像**存储库**（或存储库的集合**）**。

我更喜欢将这些东西分开并使用依赖注入框架（如结构映射）。

您可以询问**结构**图，`IRepository<Customer>`它会为您提供实例。

**将UoW**从您的**存储库**中分离出来。

您可以拥有一个**UoW**类（使用类似的方法：） `SubmitChanges`，然后是 Your **Repositories**（每个使用类似的方法`Add, Delete, ...`：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-14T13:24:41.967

是的，您的方法是正确的（正常），一个工作单元类/实例包含所有（POCO 类的）存储库。

UoW 为我带来了 2 个重要的事情/优势；

1.  显而易见的一个是 ACID（原子、一致性、隔离、持久性）事务，因为只有一个 dbcontext 跟踪和更新所有 db 更改。

2.  [Unit of Work 减少了很多依赖注入。](https://stackoverflow.com/questions/52439226/net-core-unit-of-work-generic-repository-pattern)

这是将 UoW 与存储库一起使用的完整示例；

```
public interface IUnitOfWork
{
    IRepository<Customer> Customers { get; }
    IRepository<Order> Orders { get; }
    // the same for all others 8 POCO class

    Task<int> SaveAsync();
} 
```

==================================================== ===========

```
public class UnitOfWork : IUnitOfWork
{
    public IRepository<Customer> Customers { get; private set; }
    public IRepository<Order> Orders { get; private set; }
    // the same for all others 8 POCO class

    private readonly MyDBContext _Context;

    public UnitOfWork(MyDBContext context)
    {
        _dbContext       = context;
        Customers        = new Repository<Customer>(_dbContext);
        Orders           = new Repository<Order>(_dbContext);
        // the same for all others 8 POCO class
    }

    public async Task<int> SaveAsync()
    {
        return await _dbContext.SaveChangesAsync();
    }
} 
```

正如您在上面的实现中看到的那样，一个 dbContext 已用于生成所有存储库。这将带来 ACID 功能。

在您的服务/控制器（或您想要使用存储库的任何地方）中，您只需要注入 1 UoW 并且可以访问所有存储库：

```
 _uow.Customers.Add(new Customer());
    _uow.Ordres.Update(order);
    _uow.SaveAsync(); 
```

# android - Android：管理两个按钮

> ID：10920415
> 
> 赞同：0
> 
> 时间：2012-06-06T18:58:14.083
> 
> 标签：android, button, onclick

我有一个关于设置一个侦听器的问题，该侦听器将根据单击的按钮执行不同的操作。

编译器没有检测到任何语法错误，但问题是当我在模拟器上模拟我的应用程序时，它会弹出窗口询问“强制关闭”。

这是我的 Java 文件：

```
package tp.imc.namespace;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class IMCCalculatorActivity extends Activity {
   EditText poids,taille;
   Button boutton1,boutton2;
   TextView text1;
   Boolean k=true;
@Override

public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
    poids=(EditText) findViewById(R.id.poids);
    taille=(EditText) findViewById(R.id.taille);
    boutton1 =(Button) findViewById(R.id.boutton1);
    text1=(TextView) findViewById(R.id.text1);
    boutton1.setOnClickListener(clicker);
    boutton2.setOnClickListener(clicker);
}

// declare a OnClickListener that will execute different actions
// depending on the view that was clicked
View.OnClickListener clicker = new View.OnClickListener(){
    public void  onClick  (View  v){
        if( v == boutton1 )
{
            String a,b;
    Double r;
    a=poids.getText().toString();
    b=taille.getText().toString();
    Double zero=Double.parseDouble(b);

    a=poids.getText().toString();
    b=taille.getText().toString();

    if (zero==0)
     {
    text1.setText("Erreur ! Division par 0.");

     }
    else {
        r=(Double.parseDouble(a))/(Double.parseDouble(b)*Double.parseDouble(b));
        if (r<16.5) text1.setText("Famine.");
        else if (r>16.5 && r<18.5) text1.setText("Maigreur.");
        else if (r>=18.5 && r<25) text1.setText("Coplulence nomrale.");
        else if (r>=25 && r<30) text1.setText("Surpoids.");
        else if (r>=30 && r<35) text1.setText("Obésité modérée.");
        else if (r>=35 && r<40) text1.setText("Obésité sévère.");
        else if (r>=40) text1.setText("Obésité morbide ou massive.");

         }

}           
        else if( v == boutton2 )

        {
             poids.setText("");
     taille.setText("");
     text1.setText("");
        }                          
}
 };
} 
```

这是我的 XML 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/poids"
    android:textColor="#FF0000"
    android:gravity="center"

    />

<EditText
    android:id="@+id/poids"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/poids"
    android:lines="1"
    />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/taille"
    android:textColor="#FF0000"
    android:gravity="center"
   />

<EditText
    android:id="@+id/taille"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/taille"
    android:lines="1" 
     />

<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
<RadioButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    android:checked="true" 
    android:text="@string/metre"
    />
<RadioButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/centimetre"
     />

</RadioGroup>

<CheckBox 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/mega"
    android:checked="false"

    />

<Button
    android:id="@+id/boutton1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/compute" />

<Button
    android:id="@+id/boutton2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/raz" />
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/resultat"
    />
<TextView  
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/text"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:01:21.667

你没有定义`boutton2`，它是空的。添加这个：

```
boutton2 = (Button) findViewById(R.id.boutton2);
boutton2.setOnClickListener(clicker); 
```

由于它们`boutton1`之间`boutton2`没有通用代码，因此您可以简单地创建两个不同的侦听器。

最后，这条线看起来不正确。

```
if( v == boutton1 ) 
```

您正在尝试将 View 与可能不起作用的 Button 进行比较。试试这个：

```
if( v.getId() == boutton1.getId() ) 
```

# sencha-touch - 如何用煎茶做一个隐藏的领域？

> ID：10920417
> 
> 赞同：2
> 
> 时间：2012-06-06T18:58:16.103
> 
> 标签：sencha-touch, extjs, javascript-framework, sencha-architect

我正在尝试使用 ST 1.1 在我的代码上创建一个隐藏字段，但我在控制台日志中出错。

我有这个代码：

```
var hddNumClient = new Ext.form.Hidden({
xtype : 'textfield',
name : 'hddNumClient',
id : 'hddNumClient',
value : ''
}) 
```

我需要创建一个隐藏字段并运行环境来传递另一个值响应。**请帮帮我**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:51:50.887

```
 var hddNumClient = new Ext.form.Hidden({

name : 'hddNumClient',
id : 'hddNumClient',
value : ''
}) 
```

您不能将一个元素添加到另一个元素中，因此您必须删除`xtype:'textfield'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:25:58.330

Sencha 使用 javascript，因此您可以简单地声明一个全局变量并将其用作隐藏字段...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:15:32.807

我正在尝试使用 html 代码添加隐藏字段

```
var myvar = new Ext.Container({
items : [ 
      {
      xtype : 'component', 
      html  :'<input type="hidden" name="" value="" id="" >'
     }]
}); 
```

# apache-camel - 用 apache camel 复制相关文件

> ID：10920418
> 
> 赞同：1
> 
> 时间：2012-06-06T18:58:16.717
> 
> 标签：apache-camel

首先：我是骆驼新手:-)

我想查看 xml 文件的目录，然后我想将该 xml 文件移动到另一个目录并将具有相同文件名（但其他扩展名）的 pdf 文件移动到同一目录，然后做一些 java 的东西。

移动该pdf文件的最佳方法是什么？

这是我目前拥有的路线：

```
from("file://C:/temp/camel/in?delete=true").filter(new Predicate() {

        @Override
    public boolean matches(final Exchange exchange) {
                String filename = (String) exchange.getIn().getHeader("CamelFileRelativePath");
        return "xml".equals(FilenameUtils.getExtension(filename));
    }
})
.to("file://C:/temp/camel/out").bean(ServiceBean.class, "callWebservice") 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T10:41:35.540

您可以在不使用过滤器但使用正则表达式来仅过滤 2 个扩展名 .xml 和 .pdf 的情况下实现此目的

```
from("file://C:/temp/camel/in?delete=true&?include=.*.xml|.*.zip")                      
    .to("file://C:/temp/camel/out").bean(ServiceBean.class, "callWebservice"); 
```

如果您使用过滤器，它将删除您不感兴趣的文件，这可能不是您想要的，此解决方案会将它们留在该目录中

# sql-server - SQL 表 - 插入和删除超时，选择确定

> ID：10920419
> 
> 赞同：4
> 
> 时间：2012-06-06T18:58:17.670
> 
> 标签：sql-server, sql-server-2008-r2

我在 SQL Server 2008 R2 中有一个数据库，其中所有表似乎都正常运行，除了一个表。

在此表中，我无法删除一行或插入一行，因为它持续了 30 多分钟并超时。

我的插入看起来像这样：

```
INSERT INTO [dbo].[brokenTable] ([Change], [Date], [ProdId], [IntCol]) 
VALUES ('test', getdate(), null, '99999') 
```

但是，我可以选择。选择前 200,000 名需要 33 秒。表中只有约 260,000 行。有五列（一个 int 主键、一个日期、另一个 int 列和 2 个 varchar 列。）

这张桌子过去工作得很好而且很快，我根本没有做任何结构改变。

有谁知道为什么会发生这种情况，以及如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T23:29:02.063

对于未来可能有同样问题的人。

我认为查询进行得很慢，事实并非如此。它被另一个会话锁定。如果您关注 Martin Smith 的评论，他会帮助我找到要修复的问题。

首先，我跑了

```
select * from sys.dm_os_waiting_tasks 
```

在运行一个无法完成的查询时，以及在不运行它时再次查找 LCK_M_IX。我使用了该行中的会话 ID，并将其与来自的行匹配

```
select * from sys.dm_exec_sessions 
```

并找到了阻止我查询的违规会话！

因为我知道这是一个安全的会议结束，所以我结束了它

```
Kill [sessionId] 
```

# asp.net-mvc - MVC Bundles：如何在视图中添加资源并将它们与主布局页面包结合呈现

> ID：10920421
> 
> 赞同：1
> 
> 时间：2012-06-06T18:58:30.960
> 
> 标签：asp.net-mvc

在telerik scriptregistrar 和cassette 包中，您可以从视图和部分添加脚本，并将它们注册并与主布局页面中的其余脚本**组合**，并让它们在页面末尾正确呈现。这可以在 MVC 4 中以相同的方式完成吗？到目前为止，我还没有看到如何将视图中的附加包添加到主包中以进行组合和最小化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:58:44.700

不能在 MVC4 中开箱即用。坚持使用磁带

# python - 当 Django 或 python 与 Mercurial 一起使用时，如何处理 pyc 文件？

> ID：10920423
> 
> 赞同：7
> 
> 时间：2012-06-06T18:58:42.580
> 
> 标签：python, django, mercurial, pyc

刚开始使用 Mercurial。哇，不错的应用。我将我的数据库文件移出代码目录，但我想知道这些`.pyc`文件。我没有将它们包含在初始提交中。有关该`.hgignore`文件的文档包含一个要 exclude 的示例`*.pyc`，因此我认为我走在正确的轨道上。

我想知道当我决定回滚到旧文件集时会发生什么。那我需要删除所有`.pyc`文件吗？我在 Stack Overflow 上看到了一些关于这个问题的问题，包括一位发现旧`.pyc`文件正在被使用的绅士。解决这个问题的标准方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T20:49:26.933

正如 ms4py 的回答中提到的， *.pyc 是已编译的文件，将即时重新生成。在分发项目时，您不希望包含这些内容。

但是，如果您在回滚更改之前存在模块并且 *.pyc 文件仍然存在，那么即使原始 python 文件不再存在，也可能会出现奇怪的错误，因为 pyc 文件可以执行。当在项目中添加和删除应用程序以及使用 git 切换分支时，这让我在 Django 中被咬了几次。

要清理这些内容，您可以通过在项目目录中运行以下 shell 命令来删除项目目录中的每个已编译文件：

```
find . -name '*.pyc' -exec rm {} \; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T19:31:48.990

通常您是安全的，因为`*.pyc`如果相应`*.py`更改其内容，则会重新生成。

如果您删除一个`*.py`文件并且您仍然从另一个文件中导入它，则会出现问题。`*.pyc`在这种情况下，如果文件存在，您将从文件中导入。但这将是您的代码中的一个错误，并且与您的反复无常的工作流程没有真正的关系。

**结论**：每个著名的 Python 库都忽略了他们的`*.pyc`文件，就去做吧；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T21:50:02.027

对于更通用的解决方案，请询问**Mercurial 自己**忽略哪些文件：

```
$ hg status --ignored 
```

您可以使输出安全`xargs`消费：

```
$ hg status --ignored --no-status -0 | xargs -0 -delete 
```

（`-0`处理名称中带有空格的文件很重要。）您可以将其安装为更新后挂钩：

```
[hooks]
post-update = hg status --ignored --no-status -0 | xargs -0 -delete 
```

最后，Mercurial 带有一个[清除扩展](http://mercurial.selenic.com/wiki/PurgeExtension)，它执行类似的操作：

```
$ hg purge --all 
```

将删除未跟踪和忽略的文件。如果您对丢失未跟踪的文件感到满意，那么该命令对您来说可能是最简单的，特别是因为它也适用于`xargs`可能难以获得的 Windows。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:05:02.590

当然，如果您有`.pyc`来自同一模块的旧版本的文件，python 会使用它。很多时候我想知道为什么我的程序没有反映我所做的更改，并意识到这是因为我有旧的 pyc 文件。

如果这意味着`.pyc`不反映您当前的版本，那么是的，您将不得不删除所有`.pyc`文件。

如果你在linux上，你可以`find . -name *.pyc -delete`

# c# - 在 CodeBehind 中获取 ListViewItem 控件

> ID：10920430
> 
> 赞同：2
> 
> 时间：2012-06-06T18:59:37.163
> 
> 标签：c#, wpf, xaml, code-behind

我有一个列表视图，每个项目都有一个 CheckBox 控件作为其 ItemTemplate 的一部分。

```
<ListView x:Name="taskListView" Grid.Row="2" BorderThickness="0" Margin="30,0,0,0" ItemsSource="{Binding ChildItems}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="25"/>
                        <ColumnDefinition Width="290"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <CheckBox Grid.Column="0" HorizontalAlignment="Center"></CheckBox>
                    <TextBlock Text="{Binding Name}" MaxWidth="270" Grid.Column="1" Margin="0,0,10,0"/>
                    <ComboBox SelectedItem="{Binding DependentTask, Mode=TwoWay}" 
                              Grid.Column="2"
                              Margin="0,3,0,3"
                              ItemsSource="{Binding DependentTasks, Converter={StaticResource addEmptyItemConverter}}" 
                              HorizontalAlignment="Left"
                              MinWidth="150"
                              DisplayMemberPath="ProjectionTaskLink.Name"/>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

此 ListView 的父级也有一个复选框。检查该父复选框后，我想检查ListViewItems中的所有复选框。如何在 Codebehind 中获取这些内容，以便我可以根据父条件将它们设置为 Checked 或 Unchecked？

谢谢。

编辑：这是完整的 XAML：

```
<Grid Margin="0,10,0,0">
    <Grid.RowDefinitions>
        <RowDefinition Height="25"/>
        <RowDefinition Height="20"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="25"/>
            <ColumnDefinition Width="400"/>
            <ColumnDefinition Width="35"/>
            <ColumnDefinition Width="35"/>
        </Grid.ColumnDefinitions>
        <CheckBox HorizontalAlignment="Center" Grid.Column="0" Checked="CheckBox_Checked"/>
        <TextBlock Text="{Binding Name}" Grid.Column="1"/>
        <TextBlock Text="Loops " Grid.Column="2" TextAlignment="Center"/>
        <TextBox Text="{Binding Scenarios}" Grid.Column="3"/>
    </Grid>
    <TextBlock Visibility="{Binding ContainsProjectionTasks, Converter={StaticResource boolToVisibilityConverter}}" 
                   HorizontalAlignment="Left" 
                   Width="450" 
                   TextAlignment="Right" 
                   VerticalAlignment="Bottom" 
                   Grid.Row="1" 
                   Text="Task Dependencies" 
                   Background="White"/>
    <ListView x:Name="taskListView" Grid.Row="2" BorderThickness="0" Margin="30,0,0,0" ItemsSource="{Binding ChildItems}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="25"/>
                        <ColumnDefinition Width="290"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <CheckBox Grid.Column="0" HorizontalAlignment="Center"></CheckBox>
                    <TextBlock Text="{Binding Name}" MaxWidth="270" Grid.Column="1" Margin="0,0,10,0"/>
                    <ComboBox SelectedItem="{Binding DependentTask, Mode=TwoWay}" 
                              Grid.Column="2"
                              Margin="0,3,0,3"
                              ItemsSource="{Binding DependentTasks, Converter={StaticResource addEmptyItemConverter}}" 
                              HorizontalAlignment="Left"
                              MinWidth="150"
                              DisplayMemberPath="ProjectionTaskLink.Name"/>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:09:57.050

让 ChildItems 的元素实现 INotifyPropertyChanged。

向这些元素添加一个名为 IsChecked 的属性，这会在 setter 中引发 NotifyPropertyChangedEvent。

将 ListViewItem 的复选框绑定到 IsChecked 属性

我假设您已经在处理父复选框上的选中事件。因此，您现在需要做的就是将其添加到代码隐藏方法中：

```
(foreach YourType item in ChildItems)
    item.IsChecked = parentCheckbox.IsChecked; 
```

或者您可以尝试（其中 parentCheckboxName 是主复选框的 x:Name 。

```
<CheckBox IsChecked="{Binding Path=IsChecked, ElementName=parentCheckboxName}" Grid.Column="0" HorizontalAlignment="Center" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:14:19.893

在您的列表视图项目源中，为列表视图中的复选框创建一个属性，并将其绑定到该属性。

然后您可以在父复选框的 Checked 和 UnChecked 事件中编写此代码：

```
foreach(var item in myItemsSource)
   item.IsChecked=ParentCheckBox.IsChecked.GetValueOrDefault(); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:09:48.260

在标记中绑定这两个复选框：

```
<CheckBox IsChecked="{Binding Path=IsChecked, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type YourAncestorType}}}" Grid.Column="0" HorizontalAlignment="Center" /> 
```

这里不需要使用代码隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:51:31.120

我最终只是在我的 ViewModel 中更改了父复选框 IsChecked 属性的设置器中的 ListView ItemsSource 集合。这消除了对代码隐藏的任何需求。再加上 NotifyPropertyChanged，它现在可以工作了。

# java - 为什么使用十六进制常量？

> ID：10920432
> 
> 赞同：64
> 
> 时间：2012-06-06T18:59:46.083
> 
> 标签：java, opengl, decimal, hex

有时我会看到以十六进制而不是十进制数字定义的整数常量。这是我从 GL10 课程中学到的一小部分：

```
public static final int GL_STACK_UNDERFLOW = 0x0504;
public static final int GL_OUT_OF_MEMORY = 0x0505;
public static final int GL_EXP = 0x0800;
public static final int GL_EXP2 = 0x0801;
public static final int GL_FOG_DENSITY = 0x0B62;
public static final int GL_FOG_START = 0x0B63;
public static final int GL_FOG_END = 0x0B64;
public static final int GL_FOG_MODE = 0x0B65; 
```

它显然比定义更简单`2914`，`0x0B62`所以可能会有一些性能提升吗？我真的不这么认为，从那时起改变它应该是编译器的工作。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-06T19:07:41.467

这可能是为了组织和视觉清洁。16 进制与二进制的关系比 10 进制简单得多，因为在 16 进制中，每个数字正好对应 4 位。

请注意，在上面，常量是如何与许多共同的数字分组的。如果它们用十进制表示，共同的位就不太清楚了。如果它们具有相同的十进制数字，则位模式将不会具有相同程度的相似性。

此外，在许多情况下，希望能够将常量按位或一起创建标志组合。如果每个常数的值被限制为只有一个非零位的子集，那么这可以通过一种可以重新分离的方式来完成。使用十六进制常量可以清楚地知道每个值中哪些位是非零的。

还有另外两种合理的可能性：八进制或以 8 为基数仅对每个数字 3 位进行编码。然后是二进制编码的十进制，其中每个数字需要四位，但禁止超过 9 的数字值 - 这将是不利的，因为它不能代表二进制可以代表的所有可能性。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-06T19:09:23.263

“定义 2914 而不是 0x0B62 显然更简单”

我不知道那个具体案例，但通常情况并非如此。

出了这两个问题：

*   A) 2914 的位值是多少？
*   B) 0x0B62 的位值是多少？

很多开发者会更快更正确地回答 B。（这也适用于类似的问题）

* * *

0x0B62（它是 4 个十六进制数字长，因此它表示一个 16 位数字）

*   0 = 0000 的位
*   B 的位 = 1011
*   6 的位 = 0110
*   2 的位 = 0010

->

0000101101100010

（我敢让你对 2914 做同样的事情。）

* * *

这是使用十六进制值的一个原因，另一个是值的来源可能使用十六进制（例如规范的标准）。

有时我只是觉得它很愚蠢，例如：

```
public static final int NUMBER_OF_TIMES_TO_ASK_FOR_CONFIRMATION = ...; 
```

用十六进制写几乎总是很愚蠢，我敢肯定在某些情况下它不会。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-06T19:03:15.260

[例如，应用十六进制掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)时的可读性。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-06T19:04:03.860

十进制数和十六进制数之间不会有性能提升，因为将编译代码以移动表示数字的字节常量。

计算机不做十进制，它们（充其量）做二进制。十六进制映射到二进制非常干净，但是将十进制数转换为二进制需要一些工作。

十六进制发光的一个地方是当你有许多相关的项目时，其中许多相似，但略有不同。

```
// These error flags tend to indicate that error flags probably
// all start with 0x05..
public static final int GL_STACK_UNDERFLOW = 0x0504;
public static final int GL_OUT_OF_MEMORY = 0x0505;

// These EXP flags tend to indicate that EXP flags probably
// all start with 0x08..
public static final int GL_EXP = 0x0800;
public static final int GL_EXP2 = 0x0801;

// These FOG flags tend to indicate that FOG flags probably
// all start with 0x0B.., or maybe 0x0B^.
public static final int GL_FOG_DENSITY = 0x0B62;
public static final int GL_FOG_START = 0x0B63;
public static final int GL_FOG_END = 0x0B64;
public static final int GL_FOG_MODE = 0x0B65; 
```

对于十进制数，人们很难“注意到”大量不同但相关的项目中的恒定位区域。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-06T19:04:44.003

当涉及到大数字时，以十六进制表示它们会使它们更具可读性，因为它们更紧凑。

此外，有时转换为二进制也很重要：十六进制数可以很容易地转换为二进制。一些程序员喜欢这样做，这有助于对数字进行位运算。

至于性能增益：不，没有。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-06T19:59:33.323

你宁愿写`0xFFFFFFFF`还是`4294967295`？

第一个更清楚地表示全为 1 的 32 位数据类型。当然，许多经验丰富的程序员会认出后一种模式，并暗中怀疑它的真正含义。但是，即使在这种情况下，它也更容易出现打字错误等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-06T19:04:25.193

十六进制是最接近二进制格式的可读格式。这简化了很多位操作，例如

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-06T19:05:28.763

0xB62 等于 2914 :-)

对于开发人员来说，以十六进制表示的常量比以 10 为基数的整数表示时更容易在脑海中描绘常量的位模式。

这一事实使得十六进制表示更适合 API 中使用的常量，其中位及其位置（例如用作单独的标志）是相关的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-14T21:17:45.373

啊，但是 0xDECAFF 既是素数（1460959），又是一种令人愉悦的紫色（RGB）。

对于颜色十六进制更方便。

FF FF FF 是白色 00 00 FF 是蓝色 FF 00 00 是红色 00 FF 00 是绿色 很容易将颜色关系视为数字（虽然人眼的伽马和保真度往往会丢掉东西，但我们会忽略为了纯粹的数学精度，那些不方便的物理事实！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-06T19:03:55.957

没有性能增益。

但是，如果这些常量对应于下面的某些位，则大多数程序员更喜欢十六进制（甚至二进制）以使其清晰易读。

例如，可以很容易地看到 GL_EXP2 有 2 位打开，1 位和 0x0800 位（十进制为 2048）。2049 的十进制值不太清楚。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-03T15:13:41.120

有时使用与位相关的算法会更容易。其他时候，它处理位比较，正如我在评论中的陈述，4 位（二进制数字）转换为 1 个十六进制字母，因此，A3 = 10100011。

其他时候，它要么很有趣，要么打破单调，尽管不熟悉 hex 的人可能会认为你是在用指针做事

```
int data = 0xF00D;
if ( val != 0xC0FFEE )
{
   data = 0xDECAF;
} 
```

我有时用它来检查整数之类的东西的边界。例如，您可以使用 0x7FFFFFFF（0x80000000 在许多情况下有效，但 0x7F... 更安全）来获得最大 int 边界。如果您没有具有 MAX_INT 之类的语言，那么设置非常高的错误常数会很方便。该技术也可以扩展，因为对于 64 位，您可以使用 0x7FFFFFFFFFFFFFFF。您可能会注意到 Android 使用 0x7_ **__**进行 R.id 表查找。

我敢打赌，他们这样做是为了清楚起见。您可以轻松地使用整数，但如果您熟悉十六进制，那也不错。看起来他们正在为某些函数保留 x 值。在十进制中，你会做类似 0-99 是错误的事情，100-199 是其他的事情，等等。他们如何做到这一点是不同的。

性能方面，您在运行时一无所获，因为编译器（甚至很多汇编程序）最终会将任何格式转换为二进制，无论是十进制、八进制、十六进制、浮点、双精度等。

# android - 无法使用两个表面视图连接到相机服务

> ID：10920436
> 
> 赞同：0
> 
> 时间：2012-06-06T19:00:05.577
> 
> 标签：android, camera, surfaceview

我正在开发一个相机应用程序，其中需要在相机视图前放置图像。所以基本上需要在表面视图之上有一个表面视图。

当我尝试运行该应用程序时，我收到以下错误：java.lang.RuntimeException：无法连接到相机服务

**图片演示.java**

```
package com.commonsware.android.picture;

import java.io.File;
import java.io.FileOutputStream;

import com.commonsware.android.picture.R;
import android.app.Activity;
import android.graphics.ImageFormat;
import android.hardware.Camera;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.Toast;

public class PictureDemo extends Activity {
  private SurfaceView preview=null;
  private SurfaceHolder previewHolder=null;
  private Camera camera=null;
  private boolean inPreview=false;
  private boolean cameraConfigured=false;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    preview=(SurfaceView)findViewById(R.id.preview);
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  }

  @Override
  public void onResume() {
    super.onResume();

  //  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
  //   Camera.CameraInfo info=new Camera.CameraInfo();
  //    for (int i=0; i < Camera.getNumberOfCameras(); i++) {
  //      Camera.getCameraInfo(i, info);

  //      if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
  //        camera=Camera.open(i);
  //      }
  //   }
  //  }

    if (camera == null) {
      camera=Camera.open();
    }

    startPreview();
  }

  @Override
  public void onPause() {
    if (inPreview) {
      camera.stopPreview();
    }

    camera.release();
    camera=null;
    inPreview=false;

    super.onPause();
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.options, menu);

    return(super.onCreateOptionsMenu(menu));
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.camera) {
      if (inPreview) {
        camera.takePicture(null, null, photoCallback);
        inPreview=false;
      }
    }

    return(super.onOptionsItemSelected(item));
  }

  private Camera.Size getBestPreviewSize(int width, int height,
                                         Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
      if (size.width <= width && size.height <= height) {
        if (result == null) {
          result=size;
        }
        else {
          int resultArea=result.width * result.height;
          int newArea=size.width * size.height;

          if (newArea > resultArea) {
            result=size;
          }
        }
      }
    }

    return(result);
  }

  private Camera.Size getSmallestPictureSize(Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPictureSizes()) {
      if (result == null) {
        result=size;
      }
      else {
        int resultArea=result.width * result.height;
        int newArea=size.width * size.height;

        if (newArea < resultArea) {
          result=size;
        }
      }
    }

    return(result);
  }

  private void initPreview(int width, int height) {
    if (camera != null && previewHolder.getSurface() != null) {
      try {
        camera.setPreviewDisplay(previewHolder);
      }
      catch (Throwable t) {
        Log.e("PreviewDemo-surfaceCallback",
              "Exception in setPreviewDisplay()", t);
        Toast.makeText(PictureDemo.this, t.getMessage(),
                       Toast.LENGTH_LONG).show();
      }

      if (!cameraConfigured) {
        Camera.Parameters parameters=camera.getParameters();
        Camera.Size size=getBestPreviewSize(width, height, parameters);
        Camera.Size pictureSize=getSmallestPictureSize(parameters);

        if (size != null && pictureSize != null) {
          parameters.setPreviewSize(size.width, size.height);
          parameters.setPictureSize(pictureSize.width,
                                    pictureSize.height);
          parameters.setPictureFormat(ImageFormat.JPEG);
          camera.setParameters(parameters);
          cameraConfigured=true;
        }
      }
    }
  }

  private void startPreview() {
    if (cameraConfigured && camera != null) {
      camera.startPreview();
      inPreview=true;
    }
  }

  SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
      // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder, int format,
                               int width, int height) {
      initPreview(width, height);
      startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
      // no-op
    }
  };

  Camera.PictureCallback photoCallback=new Camera.PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
      new SavePhotoTask().execute(data);
      camera.startPreview();
      inPreview=true;
    }
  };

  class SavePhotoTask extends AsyncTask<byte[], String, String> {
    @Override
    protected String doInBackground(byte[]... jpeg) {
      File photo=
          new File(Environment.getExternalStorageDirectory(),
                   "/photo.jpg");

      if (photo.exists()) {
        photo.delete();
      }

      try {
        FileOutputStream fos=new FileOutputStream(photo.getPath());

        fos.write(jpeg[0]);
        fos.close();
      }
      catch (java.io.IOException e) {
        Log.e("PictureDemo", "Exception in photoCallback", e);
      }

      return(null);
    }
  }
} 
```

**MySurfaceView.java**

```
package com.commonsware.android.picture;

import java.io.IOException;
import java.nio.Buffer;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.hardware.Camera;
import android.util.AttributeSet;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;

public class MySurfaceView extends SurfaceView implements Callback,
    Camera.PreviewCallback {

    private SurfaceHolder mHolder;

    private Camera mCamera;
    private boolean isPreviewRunning = false;
    private byte [] rgbbuffer = new byte[256 * 256];
    private int [] rgbints = new int[256 * 256];

    protected final Paint rectanglePaint = new Paint();

    public MySurfaceView(Context context, AttributeSet attrs) {
    super(context, attrs);
        rectanglePaint.setARGB(100, 200, 0, 0);
        rectanglePaint.setStyle(Paint.Style.FILL);
        rectanglePaint.setStrokeWidth(2);

        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_NORMAL);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawRect(new Rect((int) Math.random() * 100,
            (int) Math.random() * 100, 200, 200), rectanglePaint);
        Log.w(this.getClass().getName(), "On Draw Called");
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    public void surfaceCreated(SurfaceHolder holder) {
        synchronized (this) {
            this.setWillNotDraw(false); // This allows us to make our own draw
                                    // calls to this canvas

            mCamera = Camera.open();

            Camera.Parameters p = mCamera.getParameters();
            p.setPreviewSize(240, 160);
            mCamera.setParameters(p);

            //try { mCamera.setPreviewDisplay(holder); } catch (IOException e)
            //  { Log.e("Camera", "mCamera.setPreviewDisplay(holder);"); }

            mCamera.startPreview();
            mCamera.setPreviewCallback(this);

        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        synchronized (this) {
            try {
                if (mCamera != null) {
                    mCamera.stopPreview();
                    isPreviewRunning = false;
                    mCamera.release();
                }
            } catch (Exception e) {
                Log.e("Camera", e.getMessage());
            }
        }
    }

    public void onPreviewFrame(byte[] data, Camera camera) {
        Log.d("Camera", "Got a camera frame");

        Canvas c = null;

        if(mHolder == null){
            return;
        }

        try {
            synchronized (mHolder) {
                c = mHolder.lockCanvas(null);

                // Do your drawing here
                // So this data value you're getting back is formatted in YUV format and you can't do much
                // with it until you convert it to rgb
                int bwCounter=0;
                int yuvsCounter=0;
                for (int y=0;y<160;y++) {
                    System.arraycopy(data, yuvsCounter, rgbbuffer, bwCounter, 240);
                    yuvsCounter=yuvsCounter+240;
                    bwCounter=bwCounter+256;
                }

                for(int i = 0; i < rgbints.length; i++){
                    rgbints[i] = (int)rgbbuffer[i];
                }

                //decodeYUV(rgbbuffer, data, 100, 100);
                c.drawBitmap(rgbints, 0, 256, 0, 0, 256, 256, false, new Paint());

                Log.d("SOMETHING", "Got Bitmap");

            }
        } finally {
            // do this in a finally so that if an exception is thrown
            // during the above, we don't leave the Surface in an
            // inconsistent state
            if (c != null) {
                mHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="1"
          android:versionName="1.0"
          package="com.commonsware.android.picture"
          xmlns:android="http://schemas.android.com/apk/res/android">

  <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="11"/>
  <supports-screens android:largeScreens="false"
                    android:normalScreens="true"
                    android:smallScreens="false" android:xlargeScreens="true"/>
  <uses-feature android:name="android.hardware.camera" />
  <uses-feature android:name="android.hardware.camera.front"
                android:required="false" />
  <uses-permission android:name="android.permission.CAMERA" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

  <application android:icon="@drawable/cw"
               android:label="@string/app_name">
    <activity android:configChanges="keyboardHidden|orientation"
              android:label="@string/app_name"
              android:name=".PictureDemo"
              android:screenOrientation="landscape">

      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>    
    </activity>

  </application>
</manifest> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent" 
        android:layout_width="match_parent"> 
    <android.view.SurfaceView 
            android:id="@+id/preview"
            android:layout_width="match_parent"
            android:layout_height="match_parent">   
        </android.view.SurfaceView>
    <com.commonsware.android.picture.MySurfaceView 
            android:id="@+id/surface_camera"
            android:layout_width="fill_parent" android:layout_height="10dip"
            android:layout_weight="1">
        </com.commonsware.android.picture.MySurfaceView>
</RelativeLayout> 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:05:45.253

问题是我认为相机是一个共享的全局资源，在任何给定时间只能连接一次。具体来说，来自 Camera.open 调用的文档：

> 对于特定的硬件摄像头，您的应用程序一次应该只有一个处于活动状态的摄像头对象。

# android - 我应该将字体文件放在 Android 资源中的什么位置？

> ID：10920438
> 
> 赞同：19
> 
> 时间：2012-06-06T19:00:16.410
> 
> 标签：android, fonts

我应该将我的字体文件 (TTF) 放在 res 文件夹的哪个位置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T19:21:36.023

**使用自定义字体**

第一步是选择您要使用的字体。

其次在您的资产目录中创建一个 Fonts 文件夹并将您的字体复制到那里。

![在此处输入图像描述](../Images/a0a741e2bd7fa1130be6c29145b4e7e2.png)

**注意：**你可以把你的字体放在assets文件夹的任何地方，但我就是这样做的！！

这就是设置，现在进入代码。

要访问您的自定义字体，您必须使用 Android SDK 中的 Typeface 类来创建 Android 可以使用的字体，然后设置需要适当使用您的自定义字体的任何显示元素。例如，您可以在主屏幕上创建两个文本视图，一个使用默认的 Android Sans 字体，另一个使用您的自定义字体。布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/DefaultFontText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:text="Here is some text." />
    <TextView
        android:id="@+id/CustomFontText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:text="Here is some text.">
        </TextView>
</LinearLayout> 
```

加载和设置自定义字体的代码也很简单，如下所示。

```
public class Main extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Typeface tf = Typeface.createFromAsset(getAssets(),
                "fonts/BPreplay.otf");
        TextView tv = (TextView) findViewById(R.id.CustomFontText);
        tv.setTypeface(tf);
    }
} 
```

你可以看到结果：

![在此处输入图像描述](../Images/08318404bb8407252081dec0dd10d8d8.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-06T19:12:32.700

您可以在资产文件夹（即资产/字体/roboto.ttf）中创建字体。

然后，为您的 TextView 创建一个适当的类：

```
// RobotoFont class
package com.my.font;
public class RobotoFont  extends TextView {
    public RobotoFont(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public RobotoFont(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public RobotoFont(Context context) {
        super(context);
    }
    public void setTypeface(Typeface tf, int style) {
        if (style == Typeface.BOLD) {
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(),    "fonts/Roboto-Bold.ttf"));
        }
        else if(style == Typeface.ITALIC)
        {
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Italic.ttf"));
        }
        else
        {
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Regular.ttf"));
        }
    }
} 
```

最后，更新您的布局：

```
//main.xml
//replace textview with package name com.my.font.RobotoFont
<com.my.font.RobotoFont
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:paddingBottom="2dip" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-06T19:02:35.893

不在*res*文件夹中，而是在*assets*文件夹中的任何位置。然后您可以使用以下`createFromAsset`静态方法`Typeface`：

[http://developer.android.com/reference/android/graphics/Typeface.html#createFromAsset%28android.content.res.AssetManager,%20java.lang.String%29](http://developer.android.com/reference/android/graphics/Typeface.html#createFromAsset%28android.content.res.AssetManager,%20java.lang.String%29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-28T15:49:25.290

[从Android O](https://developer.android.com/preview/index.html)开始，您可以在 xml中创建`fonts`文件夹并直接使用它。 查看新的[Android O](https://developer.android.com/preview/index.html) - **[字体功能](https://developer.android.com/preview/features/working-with-fonts.html)**。`resources`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-11T23:59:22.277

从**Android Studio 1.5.1**开始，您可以：

1.  右键单击您的`app`目录
2.  `New`> `Folder`（这在列表的底部附近，很容易错过）>`Assets Folder`
3.  在大多数情况下，您可以将文件夹位置保留为默认值 > 单击完成
4.  将文件移动到新创建的`assets`文件夹中

# windows-phone-7 - 提交 xap 包时出现“静态验证完成但出现错误”

> ID：10920441
> 
> 赞同：0
> 
> 时间：2012-06-06T19:00:32.633
> 
> 标签：windows-phone-7

当我尝试提交 xap 包时，“静态验证完成但出现错误”并显示“未知错误 5000”。我相信问题与汇编信息中的自然语言选择有关，因为如果我将其设置为英语、丹麦语或德语，错误就消失了。如果我尝试使用塞尔维亚语或克罗地亚语，我会收到我提到的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:43:49.563

您的应用程序必须以至少一种 Windows Phone 当前支持的显示语言为目标（[此处](http://msdn.microsoft.com/en-us/library/hh184844%28v=vs.92%29.aspx)的第 4.4 节）。如果您的应用程序没有针对除中性资源语言之外的任何其他语言，那么它将显示为仅支持中性资源语言。塞尔维亚语和克罗地亚语目前不是支持的显示语言之一（请参阅[此处](http://msdn.microsoft.com/en-us/library/hh202918%28v=VS.92%29.aspx)的当前列表）。

在您的情况下，这意味着您的应用程序在提交应用程序中显示为仅支持塞尔维亚语或克罗地亚语，而不支持任何受支持的显示语言，这违反了提交指南。我想这就是导致您的应用程序提交过程失败的原因。

# linux - 如何在linux中调试网络堆栈

> ID：10920443
> 
> 赞同：0
> 
> 时间：2012-06-06T19:00:41.683
> 
> 标签：linux, network-programming

我正在尝试使用原始套接字将数据包注入网络，但似乎无法让接收器捕获此数据包。如何检查数据包是否被 linux 网络堆栈丢弃？有人可以指出一些这样做的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:06:11.790

我不知道直接访问网络堆栈（不是说不可能，只是如果可以的话我不知道该怎么做），但是您可能可以使用 Wireshark 或类似的东西来查看接收端的 NIC端正在接收数据包。您还可以在发送端使用它来检查数据包是否正确发送（或者实际上是否首先发送，如果这是问题的话），因为它允许您检查字段/等。单个数据包。非常有用的工具，真的。

[http://www.wireshark.org/](http://www.wireshark.org/)

请注意，该网站没有 Linux 版本的直接下载，但列出了各种 Linux 发行版的第三方软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:15:37.323

选项包括wireshark 和tcpdump，或tcpdump 到pcap 文件，然后使用wireshark 分析。一种选择可能也是使用 strace 或类似工具来跟踪执行发送的系统调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-28T10:48:54.083

另一种选择是使用[BPF](https://en.wikipedia.org/wiki/Berkeley_Packet_Filter)来检测内核中的 TCP 堆栈。您可以查看一些已经存在的 TCP 脚本，例如 tcplife：

*   [https://github.com/iovisor/bcc/blob/master/tools/tcplife.py](https://github.com/iovisor/bcc/blob/master/tools/tcplife.py)
*   [http://manpages.ubuntu.com/manpages/bionic/man8/tcplife-bpfcc.8.html](http://manpages.ubuntu.com/manpages/bionic/man8/tcplife-bpfcc.8.html)
*   [http://www.brendangregg.com/blog/2016-11-30/linux-bcc-tcplife.html](http://www.brendangregg.com/blog/2016-11-30/linux-bcc-tcplife.html)

# ubuntu - 在 Ubuntu Server 12.04 上设置静态 IP 会导致外部连接丢失

> ID：10920444
> 
> 赞同：8
> 
> 时间：2012-06-06T19:00:55.570
> 
> 标签：ubuntu, static, ip

我在 Ubuntu 12.04 下遇到静态 IP 问题。

使用 DHCP 我没有问题，但是当我设置（在`/etc/network/interfaces`）静态地址、网关、子网掩码和 dns-nameservers 时，我发现服务器无法连接到外部世界。

它只能连接到本地 IP 主机。

我试图在其中插入名称服务器，`/etc/resolv.conf`但每次我重新启动机器时，更改都会被取消。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T10:06:15.250

Ubuntu 12.04 使用 resolvconf（一组脚本和挂钩）而不是 resolv.conf 来管理 DNS 服务器。对用户来说最显着的区别是任何手动对 /etc/resolv.conf 所做的更改都将丢失，因为下次触发 resolvconf 时它会被覆盖。

要在 resolv.conf 文件中添加静态 dns 条目，请编辑`/etc/resolvconf/resolv.conf.d/base`：

添加这些行（下面的示例是 OpenDNS 的公共名称服务器）：

```
nameserver 208.67.222.222
nameserver 208.67.220.220 
```

运行此命令以刷新 resolvconf 设置：

```
sudo service resolvconf restart 
```

要查看您的 DNS 服务器地址，请使用以下命令：

```
cat /etc/resolv.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:34:58.963

首先：检查您是否有正确的配置： - 尝试 ping 您的网关，是否有效？如果没有，请检查您的网关 IP。- 尝试 ping 8.8.8.8（Google 的 DNS） - 可以吗？如果不是，请使用以下之一检查您的路由：

```
mtr 8.8.8.8 
```

或者

```
tracepath -n 8.8.8.8 
```

并检查路由在哪一跳停止。

关于 DNS 名称：请添加到 /etc/network/interfaces 行：

```
dns-nameservers Your_DNS_IP_address 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T02:26:28.250

I dunno about you, but I don't like using the `resolv.conf` file. I prefer to set the nameserver to read my routers and typically I'll use Google's 8.8.8.8 or 8.8.4.4 name servers.

Here's a small guide I found if anyone is interested.

[http://ubuntuserverhelp.com/setting-up-a-static-ip/](http://ubuntuserverhelp.com/setting-up-a-static-ip/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T23:35:29.063

尝试这个：

```
sudo vim /etc/NetworkManager/NetworkManager.conf 
```

并评论该`dns=dnsmasq`行，然后执行：

```
sudo restart network-manager 
```

这个问题有一个线程在这里：

[https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/989900](https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/989900)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T20:27:05.593

各种进程会覆盖 /etc/resolv.conf（dhcpd、networkmanager 等）。我怀疑这是你看到的问题。我建议几个选项：

1.  不要将名称服务器添加到“/etc/resolv.conf”，而是将它们添加到“/etc/resolv.conf.head”。“/etc/resolv.conf.head”的内容将自动添加到自动生成的内容之前。根据您的选项，您可能希望使用“/etc/resolv.conf.tail”在文件末尾添加您的设置。无论哪种方式，这都应该用您的固定设置覆盖任何自动生成的设置。

2.  写保护 /etc/resolv.conf 以防止您的更改被另一个守护程序覆盖（在您进行更改之后）：

    `$ sudo chattr +i /etc/resolv.conf`

3.  很可能是 dhcpd 正在修改 /etc/resolv.conf，而您忘记禁用它。删除（或禁用）dhcpd，使其不会修改 /etc/resolv.conf。去除：

    `$ sudo apt-get remove isc-dhcp-client`

4.  使用 auditd 确定哪个守护进程正在修改 /etc/resolv.conf：

    `$ sudo auditctl -w /etc/resolv.conf -p w`

日志位于 /var/log/audit/audit.log 中。您可以看到文件被修改的日期/时间以及修改它的程序（采取纠正措施）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T08:33:44.393

我们在旧的 HP 终端和 Ubuntu 12.04 上遇到了同样的问题，要使用静态 IP，我们必须在 /etc/network/interfaces 中使用“手动”标志并模拟 ifconfig-input。

```
auto eth1
iface eth1 inet manual
 up ifconfig eth1 <IP> netmask <IP> broadcast <IP> up
 up route add default gw <IP> 
```

一个奇怪的解决方案，但使用最少的巫毒来解决这个问题。

# perl - Perl If Else 语句

> ID：10920451
> 
> 赞同：0
> 
> 时间：2012-06-06T19:01:35.483
> 
> 标签：perl, if-statement

好吧，这就是我所拥有的：

```
#!/usr/local/bin/perl

my $argument1 = $ARGV[0];
open (LOGFILE, "<$argument1") or die "Can't find file";

open FILE, ">>output.txt" or die $!;

while(<LOGFILE>){
if (/UNSUCCESSFUL/){
    print FILE "ERROR in line $.\n" if (/Error/);
    print "script unsuccessful \n";
    else:
print "script successful \n";   } 
```

}

```
close FILE;
close LOGFILE; 
```

我认为，问题在于我的 if else 语句。如果读入的文本中没有“不成功”一词，则应简单地打印出“脚本成功”。但是，如果读入文件确实包含“不成功”，那么它应该记录文件中出现“错误”一词的位置并将其写入文件。帮助？！

样本输入：

bar foo bar bar bar
错误：不会编译
bar bar bar bar bar
尝试不成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:04:41.180

你的语法有点偏离：

```
if (/UNSUCCESSFUL/){
    print FILE "ERROR in line $.\n" if (/Error/);
    # Print to your file
    print FILE "script unsuccessful \n";
    #print to screen
    print "script unsuccessful \n";
} else {
    # Print to your file
    print FILE "script successful \n";
    #print to screen
    print "script successful \n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:11:56.083

我假设您不希望打印`"script successful"`输入中不包含单词的所有行`"UNSUCCESSFUL"`。相反，将打印保存到最后，如果没有错误，则打印成功消息。

```
my @errors;
while(<LOGFILE>) {
    if (/UNSUCCESSFUL/) {
        push(@errors, "ERROR in line $.\n") if (/Error/);
    }
}

if (@errors) {
    print for @errors;
} else {
    print "script successful\n";
} 
```

# cdi - 如果我的对象是由生产者方法生成的，它的初始化方法会被自动调用吗？

> ID：10920455
> 
> 赞同：2
> 
> 时间：2012-06-06T19:01:51.790
> 
> 标签：cdi, jsr299

我有一个生产者方法，可以创建实例——比如说——<code>Person。

此方法创建的实例是类型的`PersonBean`，并且很明显实现了`Person`.

这个类中有一个初始化方法：

```
@Inject
public void setSomething(final Something something) {
  // whatever
} 
```

bean 存档中的类路径上还有一个`Something`实现，应该是此处注入的候选对象。

我观察到这个实现被注入到另一个非生产者方法产生的对象的适当注释字段中，所以我知道 Weld 正在找到它，它是有效的，等等。

规范不清楚（对我来说）我的生产者方法的返回值是否*也会*应用焊接/容器提供的依赖注入。

我当然注意到这个初始化方法不会自动调用。

归结起来，我的问题是：如果我正在生成一个对象，那么这是否意味着我的生产者方法必须处理该对象的*所有*初始化，或者（我所期望的）我的生产者方法*只*负责实例化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:20:21.657

> 如果我正在生成一个对象，那么这是否意味着我的生产者方法必须处理该对象的所有初始化，或者（我所期望的）我的生产者方法只负责实例化？

[从规范：](http://docs.jboss.org/cdi/spec/1.0/html_single/#producermethod)

```
3.3\. Producer methods
    A producer method acts as a source of objects to be injected, where:
    - the objects to be injected are not required to be instances of beans, 
```

这应该回答您的问题：如果您正在实例化**一个新对象**（使用`new`），您将不得不处理初始化。

（生产者方法的一个可能更常见的用例是将**现有 bean**配置和生产到某个范围内......）

# java - 如何使用 Htmlunit 对财务表进行数据挖掘？

> ID：10920460
> 
> 赞同：0
> 
> 时间：2012-06-06T19:02:09.490
> 
> 标签：java, web-scraping, htmlunit

使用 java/htmlunit 我想挖掘（网络抓取）一堆对冲基金 SEC 13F 文件。我不知道如何对 SEC 的 .txt 文件进行数据挖掘，例如[This Table](http://www.sec.gov/Archives/edgar/data/1047644/000104746912006072/a2209520z13f-hr.txt)。表格布局看起来干净而有条理，但我如何抓住`< Table >`相应的`< S >`and `< C >`？此外，我怎样才能只获取公司名称和`< C >`价值（在第 3 列中）和`< C >`Shares Amt（在第 4 列中）。

不确定我是否走在正确的轨道上，但我使用了 Bufferedreader，不知道下一步该做什么来获取数据中的数据`< Table >`......这是我目前所拥有的：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;

public class BufferedReaderExample {

public static void main(String[] args) {

    try {
        // Create a URL for the desired page
        URL url = new URL("http://www.sec.gov/Archives/edgar/data/1047644/000104746912006072/a2209520z13f-hr.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str;

        while ((str = in.readLine()) != null) {
            System.out.println(str);
        }
        in.close();
    } catch (MalformedURLException e) {
    } catch (IOException e) {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:58:05.927

我不知道这个文档有什么样的格式，但 HTMLUnit 最多允许你从网上下载它。您必须自己进行解析。

现在，格式似乎不是 XML、HTML 或任何标准格式（至少从我所知道的少量来看）......所以，我首先想到的是正则表达式，但经过第二次思考，我意识到你有由短划线数量表示的列的长度`(-)`。

您可以使用正则表达式来获取`<table>`标记之间的所有内容，然后使用任何编程语言将虚线拆分为字符串数组，然后将下面每行的文本剪切为每个字符串的字符数。

就是这样:)

# javascript - 在不使用 div 的情况下使用 javascript 放置文本字符

> ID：10920462
> 
> 赞同：1
> 
> 时间：2012-06-06T19:02:34.067
> 
> 标签：javascript, css, html

我将使用绝对定位在网页上放置大量字符和单词。我可以将每个字符放在它自己的 div 中，然后设置它的位置。有没有其他方法可以在页面上放置单个单词或字符而不将其放入 div 中（以节省内存）。我认为不是（这很好），但如果有另一种方式我想探索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:07:13.320

尝试使用 html 画布。它将允许您在所需的任何位置向其绘制文本。[https://developer.mozilla.org/en/Drawing_text_using_a_canvas](https://developer.mozilla.org/en/Drawing_text_using_a_canvas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:05:58.250

您可以使用类似标签`<b>`并将其设置`css`为`font-weight: normal;`.

如果您担心 DOM 树的大小，您可以继续使用这种实现方式。但是实现这个有什么用呢？有很多可用的 jQuery 和 JavaScript 代码片段吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:06:04.877

您将需要某种类型的 html 标记围绕文本，否则您将无法应用 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:06:11.167

这不能以你想象的方式完成。匿名盒子不能被操纵，一般来说，不带有传统属性。您将不得不使用包装标签。

你可以在这里阅读更多：http: [//www.w3.org/TR/CSS2/visuren.html#anonymous-block-level](http://www.w3.org/TR/CSS2/visuren.html#anonymous-block-level)

# facebook - rails beta 请求注册并获得社交媒体分享奖励

> ID：10920466
> 
> 赞同：0
> 
> 时间：2012-06-06T19:02:43.157
> 
> 标签：facebook, ruby-on-rails-3, twitter

我想构建一个简单的 beta 请求注册页面，当用户尽可能多地共享应用程序的链接时，他会获得较早的奖励。

在 trenvy.com 上可以看到这样的解决方案

*   用户输入电子邮件
*   用户通过其唯一代码获得唯一链接
*   用户在每次注册时分享此链接，对他 +1 计数
*   管理员方法会丢弃共享链接并吸引最多人加入的用户电子邮件。我想使用此电子邮件列表在 CampaignMonitor 中使用。

任何人都知道什么是实现这一目标的好方法？或者有人写了这样的东西，或者知道一个实现了这个功能的 git repo 来看看和学习？我已经为应用程序编写了一个唯一的代码生成器，它可以生成 10 个字符的唯一代码。现在只有这个社交媒体分享对我来说有点不清楚如何在 Rails 中解决这个问题，对此有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:33:08.633

这样的事情可以在任何框架中很容易地实现，所以我想我会先提供一个一般性的答案，如果我遇到任何特定的宝石，我会提到它们：

1）唯一代码部分很简单，它只是控制器中的一个参数，用于检查代码的有效性——这将是添加到用户模型中以便于验证并在用户首次输入他的电子邮件地址时创建的唯一代码.

2）每次访问链接时，控制器都会对其进行解析并保存一个事件（如果您希望从交互中获得最大数据，请不要只增加一个字段，您可以为原产国保存IP，页面点击时间等），只需计算该用户的 +1 的点击事件

3) 只需编写一个快速管理站点（我最近为此使用了 twitter 引导程序），它可以让您查看与系统交互的用户并按共享排序，您可以使用 createend gem 将它们添加到您喜欢的任何列表中.

我想不出任何特定的 gem 可以加快这个过程，Devise 太过分了，你并不需要一个活动监视器 gem，因为你没有存储太多信息，绝对是 twitter_bootstrap 来加速构建管理界面。Heroku 允许您将 Sendgrid 添加为插件，因此您可以在那里进行邮件发送。

我是否遗漏了您的要求中的任何内容？说真的，虽然这应该是 2-4 天的开发工作，但这里没有什么特别的。

# iphone - 高级 iOS 原型设计工具

> ID：10920470
> 
> 赞同：2
> 
> 时间：2012-06-06T19:03:05.010
> 
> 标签：iphone, objective-c, ios, ipad, prototyping

我正在寻找一种先进的 iOS 原型设计工具。以下是我使用其中一项所必需的一些要求：

1.  应该能够在设备上运行并像真正的应用程序一样响应。我不介意原型是否在容器中运行。
2.  应该能够水平旋转 UITableView（就像在 Pulse/BBC 中一样）并且还支持桌面上的手势。

我见过一些原型设计工具，但它们似乎都不支持我上面的第二个要求。我唯一的选择似乎是编码，在这个阶段我不想这样做，因为有很多其他细节最终会使原型变得难以处理。任何指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:21:34.367

我认为您在原型上投入了太多精力（我假设）一旦您开始实施真正的交易就会被丢弃。

问问自己你想用原型完成什么。

是不是和用户一起测试你的导航和设计，看是否直观、完整？在这种情况下，我建议您根本不编写代码，并在 Keynote 之类的东西中制作原型。您甚至可以使用它来制作可点击的 PDF，您可以在设备上全屏查看，让用户点击按钮等。[在此处查看 Keynotopia 上的教学视频](http://keynotopia.com/)，了解我正在谈论的示例。我什至买了他们很棒的模板，并喜欢用这种方式制作原型。

是看具体的技术事情能不能真正做到吗？在这种情况下，做最少的 UI 并真正编写您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:24:27.877

我发现的最好的原型设计工具在[这里](http://itunes.apple.com/us/app/blueprint-lite/id407188253?mt=8&ign-mpt=uo=4)。它也是免费的。但我 100% 同意上述@Heiberg - 不要浪费时间完善原型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T19:11:24.840

如果你只是想开发一个线框，你可以在 Xcode 的 Storyboard 中使用控制拖放界面。如果你想做其他事情，你至少需要在它后面添加一些代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T23:57:26.813

蓝图最近已被 Apple 删除。使用名为 App Taster 的免费查看器，App Cooker 将是您的最佳选择。大更新即将到来，价格将上涨。现在是加入的最佳时机。www.appcooker.com

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T20:23:13.653

我同意@Heiberg 的观点，即长期参与的原型制作过程是不值得的。我构建的[iOS 原型设计工具 Flinto](https://www.flinto.com)将其铭记于心。我们将大量精力集中在快速创建原型的过程上。

手势支持即将推出。旋转由原型的专用纵向和横向版本处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T20:35:31.840

我对[适用于 iPad 的 AppCooker](https://itunes.apple.com/ru/app/appcooker-mockup-prototype/id418861662?mt=8)很满意。它还有免费的阅读器，叫做 AppTaster，所以其他人可以尝试你的原型。

它不是 100% 完美的，而且更新周期很少，但我喜欢它。它支持手势，但不支持旋转。

# c# - 需要创建存储过程但有问题

> ID：10920471
> 
> 赞同：1
> 
> 时间：2012-06-06T19:03:08.373
> 
> 标签：c#, sql, sql-server, stored-procedures

我不确定为什么在我尝试创建存储过程时下面的代码会出错。我对SP相对缺乏经验。

```
CREATE PROCEDURE [dbo].[InsertDuplicateFields] 
    (@UniqueColID varchar(50), @IndividualID varchar(50) = null)
AS
Begin           
    INSERT INTO TableCollisionBegin 
        SELECT * FROM TableCollisionBegin 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableCollisionDetails 
        SELECT * FROM TableCollisionDetails 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableCollisionLocation 
        SELECT * FROM TableCollisionLocation 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableDriver 
        SELECT * FROM TableDriver 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableFollowUp 
        SELECT * FROM TableFollowUp 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableOfficerLogs 
        SELECT * FROM TableOfficerLogs 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TablePolice 
        SELECT * FROM TablePolice 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableRecVerified 
        SELECT * FROM TableRecVerified 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableSignature 
        SELECT * FROM TableSignature 
        WHERE [IndividualID] = @IndividualID;

    INSERT INTO TableTrailer 
        SELECT * FROM TableTrailer 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableValidateLog 
        SELECT * FROM TableValidateLog 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableVehicle 
        SELECT * FROM TableVehicle 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableWitness 
        SELECT * FROM TableWitness 
        WHERE [UniqueColID] = @UniqueColID;

    INSERT INTO TableInvolvedPerson 
        SELECT * FROM TableInvolvedPerson 
        WHERE [IndividualID] = @IndividualID;

    INSERT INTO TableStatement 
        SELECT * FROM TableStatement 
        WHERE [UniqueColID] = @UniqueColID; 

    INSERT INTO TableCollisionDiagram 
        SELECT * FROM TableCollisionDiagram 
        WHERE [UniqueColID] = @UniqueColID;
END 
```

我得到的错误是：

> 第 21 行无效的列名“IndividualID”。

如果我删除插入的代码行，`individualID`那么它会给出关于`UniqueColID`

这很奇怪，因为在给定的表中有一个列`IndividualID`，所以我不知道为什么它无法识别它....我在 MS Excel 中输入了这段代码，然后将其复制粘贴到记事本中，这可能是代码不正确的原因吗？不工作？

我从该表中复制了一行，如您所见，它确实有`IndividualID`：

```
IndividualID
059D1263-F0F3-4D19-8C56-0FC7D2B5266E 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:07:37.757

为什么在参数周围使用单引号？这两个参数都是 varchar，你不需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:11:20.013

仔细检查您的表格`TableInvolvedPerson`并确保该列`IndividualID`的拼写相同。

**更新**

当您更新您的问题时，您为 . 添加了一个值`IndividualID`。您添加的值是一个 Guid，它可以作为`UNIQUEIDENTIFIER`列存储在 SQL Server 中。但是您在存储过程中声明的类型是`VARCHAR`. 你能仔细检查你的类型吗？原始表和要复制到的表上的 IndividualID 类型是什么？他们匹配吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:18:35.113

仔细检查您在某处没有奇怪的 Unicode 字符，*看起来*像您所期望的，但不是。

我还会在每个语句之后添加错误检查，这样如果其中一个语句失败，您可以获得合理的错误消息；如果需要进行全有或全无更新，您还可以回滚事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:16:14.977

请记住，这样的查询

```
INSERT INTO `a` SELECT * FROM `a` WHERE `c`=null 
```

无论值是什么，都不会插入任何内容。如果 in 中的数据`c`为 null，则必须使用`IS NULL`and **never** `=null`。

# python - 搜索多个目录，删除重复文件

> ID：10920488
> 
> 赞同：2
> 
> 时间：2012-06-06T19:03:55.007
> 
> 标签：python, duplicate-removal

我有一个包含记录文件的文件目录。我刚刚访问了一个新目录，该目录具有相同的记录但也有其他文件，但其他文件深埋在其他文件夹中，我找不到它们。所以我的解决方案是让一个python程序运行并删除两个不同目录（和子目录）中重复的所有文件，并保持其他文件不变，这将为我提供我正在寻找的“新文件”。

我见过几个找到重复项的程序，但我不确定它们是如何真正运行的，而且它们没有帮助。

有什么办法可以完成我正在寻找的东西？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:09:35.640

可能的方法：

1.  从您的原始文件夹创建一组 MD5 哈希。
2.  递归 MD5 散列新文件夹中的文件，删除任何生成散列的文件，这些文件已经存在于您的集合中。

需要注意的是，两个不同的文件有可能生成相同的哈希。文件有何不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:10:20.230

使用 fslint 或一些类似的软件。例如，Fslint 能够为您提供不同文件的列表并将副本硬链接在一起，或删除重复项。如果目录的内部结构相同，一种选择也是仅使用类似 diff 的程序来区分目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T21:49:35.570

他们是否在两个目录中重复的文件具有相同的名称/路径？如果我理解正确，您想查找重复的文件名而不是文件内容？如果是这样，在两棵树中对 os.walk 的“同步”调用可能会有所帮助。

# java - 字符串替换方法不起作用

> ID：10920491
> 
> 赞同：0
> 
> 时间：2012-06-06T19:04:07.833
> 
> 标签：java, replace

我尝试用浮点值替换表达式中的字符。在第一种情况下一切正常，在第二种情况下没有任何反应。这是我的代码：

```
expr = expressions.get(i)[0];
for (int j = 0; j < valsListArray.length; j++) {
    String selection = (String) valsListArray[j].getSelectedItem(); 
    Float valueFloat = segmentAreas.get(j);                      
    String valueString = "" + valueFloat;
    expr = expr.replace(selection, valueString);
}
for (int jj = 0; jj < koefsLabelsArray.size(); jj++) {
    String selection1 = (String) koefsLabelsArray.get(jj).getText();                
    String valueString1 = valsOfKoefs.get(jj).getText();
    expr = expr.replace(selection1, valueString1); //here nothing happens
    System.out.println(expr);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:06:19.220

代替

```
expr = expr.replace(valueString1, selection1); 
```

我猜你应该使用以下内容：

```
expr = expr.replace(selection1, valueString1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:09:40.170

编辑：

您可能想要调用`replaceAll`method 而不是`replace`. 尝试

`expr = expr.replaceAll(selection1, valueString1);`

* * *

编辑：

这对我来说很有效，而且由于我对您的变量一无所知，也许问题出在那儿？

```
 String var = "abcbdbebfb";
    float f = 1.0f;
    String toFind = "b";
    var = var.replaceAll(toFind,(String.valueOf(f)));
    System.out.println(var); 
```

输出：

```
a1.0c1.0d1.0e1.0f1.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:42:36.767

所以我知道问题出现是因为我从 JLabel 得到了第一个字符串“selection1”（但我不明白为什么），在另一种情况下一切正常。

# java - 追加到 JTextArea

> ID：10920493
> 
> 赞同：2
> 
> 时间：2012-06-06T19:04:10.537
> 
> 标签：java, swing, jtextarea, serversocket, event-dispatching

我正在制作服务器端应用程序，但是当我尝试将文本附加到 时`JTextarea`，它不起作用。但是，它会打印到控制台。

在我添加该行之前它工作正常`serverSocket.accept()`。

这是我的代码：

```
try { 
    serverSocket=new ServerSocket(4545); 
    LogOutput.append("Seccessfuly connected\n" );  
    System.out.println("Seccessfuly connected\n" );              

    StartButon.setEnabled(false);

    while(true){
        LogOutput.append("waiting for client\n" );
        System.out.println("waiting for client\n" ); 

        serverSocket.accept();
        LogOutput.append("Client connected to server\n" );               
    }
}
catch(Exception e){
    LogOutput.append("cannot establish connection : "+ e +"\n" );
    StartButon.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:07:31.113

从给定的代码片段和您的问题看来，您正在寻找

> 客户端连接到服务器\n

要添加到您的 textArea。

```
serverSocket.accept();
LogOutput.append("Client connected to server\n" ); 
```

一旦你说 serverSocket.accept() 现在它会等待客户端连接到达，除非有一些客户端你的下一行代码不会被执行。serverSocket.accept 是阻塞方法，启动您的客户端程序，您的服务器将开始处理下一行代码。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#accept%28%29)

> ```
> public Socket accept() throws IOException 
> ```
> 
> 侦听要与此套接字建立的连接并接受它。该方法阻塞，直到建立连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T19:15:21.523

You're completely blocking the Swing event thread or EDT. Get most of that code, starting with the `while (true)` block onto a background thread if you want your Swing GUI to function in conjunction with a long-running process. Please read the [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/) tutorial to see why this matters, and how to solve this issue with a [SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html) object.

# vim - 从 Vim 的另一行复制缩进

> ID：10920494
> 
> 赞同：3
> 
> 时间：2012-06-06T19:04:13.417
> 
> 标签：vim

我有以下内容：

```
 line1
   line2
     line3
       line4
         line5
           line6<cursor> 
```

将光标移至与 line3 相同的缩进以便我可以输入 line7 的最佳方法是什么？

```
 line1
   line2
     line3
       line4
         line5
           line6
     line7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:33:51.417

这部分取决于您在 Vim 中的模式和设置。我有`filetype on`并`syntax enable`设置在我的 .vimrc 中，我发现自己在插入模式下，一直在你的确切情况下编辑一个 python 文件。我点击`ctrl-d`删除一级缩进并保持插入模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:26:44.520

根据您的配置，只需按`Enter`（或`o`取决于您的模式）和`TAB`/即可`Backspace`。

另一种方法是简单地创建一个新行并添加`line7`光标（缩进）所在的位置，具体取决于您的配置，离开插入模式并使用和修复`<`缩进`>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:05:35.587

可以使用适当的缩进级别复制该行

```
:-3t. 
```

然后通过键入`^C`或`S`正常模式命令来编辑复制的文本或完全重写它。

也可以在插入模式下更改当前行的缩进级别，而无需使用 `Ctrl`+`T`和`Ctrl`+移动光标`D`。（见`:help i_^T`和`:help i_^D`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:38:05.533

要在新的空白行上自动进入缩进模式，只需按：

**`S`**

之后只需编写代码，进入正常模式，然后执行

**`shift-v` `4<`**

这里 4 是你的缩进级别。随心所欲地使用。

# javascript - 在 jQuery Mobile 中更改大选择菜单时重定向

> ID：10920495
> 
> 赞同：2
> 
> 时间：2012-06-06T19:04:15.213
> 
> 标签：javascript, jquery, html, jquery-mobile, jquery-events

[当用户从jQuery Mobile](http://jquerymobile.com/)`<select>`的菜单中选择一个选项时，我在尝试重定向到另一个页面时遇到问题。

下面是一个非常小的示例，类似于我正在尝试做的事情，它展示了我遇到的问题。The problem is that when the list of options is too big to fit on the screen, the redirect does **not** work. It works fine when the options fit on the screen. （您可以通过将窗口设置得非常小，在桌面浏览器中重现这一点。）

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery Mobile Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css">
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
  <script>
    $(function () {
      $('#mySelect').bind('change', function () {
        // The actual logic for building the URL is more complicated, obviously.
        // This is just an example.
        var url = 'jquery-mobile-test.html?param=' + this.value;
        location.href = url;
      });
    });
  </script>
</head>
<body>
  <div data-role="page" class="type-home">
    <div data-role="content">
      <div data-role="fieldcontain">
        <select data-native-menu="false" name="param" id="mySelect">
          <option>Select an Option...</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five</option>
          <option value="6">Six</option>
          <option value="7">Seven</option>
          <option value="8">Eight</option>
          <option value="9">Nine</option>
          <option value="10">Ten</option>
        </select>
      </div>
    </div>
  </div>
</body>
</html> 
```

[jQuery Mobile Docs](http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html)的一些背景：

> 当`select`设备屏幕上有少量选项时，菜单将显示为带有弹出过渡的小叠加层。[...] 当设备屏幕上显示的选项太多时，框架将自动创建一个新的“页面”，其中填充了选项的标准[列表视图](http://jquerymobile.com/lists/docs-lists.html)。这允许我们使用设备中包含的本机滚动来移动长列表。标签内的文本用作此页面的标题。

当它创建新的“页面”时，它会添加`#&ui-state=dialog`到URL的末尾，然后选择选项时，它会更改URL。我认为这是干扰我正在尝试执行的重定向的原因。

有关解决此问题的最佳方法的任何建议？

**编辑#1：**我应该提到我无法使用`$.mobile.changePage()`，因为我重定向到的页面做了一些奇怪的重定向，它自己的重定向弄乱了转换。很抱歉，示例中没有表示这一点。

**编辑#2：**我在上面粘贴了我的代码（而不是使用要点），以便人们可以通过搜索更轻松地找到这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:12:14.937

我想通了，所以我正在回答我自己的问题。

这是为我修复它的代码：

```
var url = 'redirect-to-this-page.html',
    $dialog = $('div.ui-page.ui-dialog.ui-page-active');

if ($dialog.length > 0) {
    $dialog.bind('pagebeforehide', function () {
        location.href = url;
    });
} else {
    location.href = url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:34:22.347

不妨让 jQuery Mobile 完成它的小魔术表演，用 jQuery Mobile 的实现替换你的`location.href`重定向：

```
 $.mobile.changePage( 'jquery-mobile-test.html?param=' + this.value ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T13:34:07.950

这是一个肮脏的修复，但您可以使用*setTimeout*函数包围*window.location ：*

 *```
setTimeout(function() {
   window.location.href = '/some-url.html';
}, 0); 
```*

# objective-c - Cocoa 2D 图形：Quartz、Core Image 还是 Core Animation？

> ID：10920498
> 
> 赞同：5
> 
> 时间：2012-06-06T19:04:19.143
> 
> 标签：objective-c, cocoa, core-animation, core-graphics, quartz-graphics

我已经阅读了几个小时关于在 Objective-C 可可应用程序中绘制二维图形的[文档。](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/GS_GraphicsImaging/_index.html)似乎有几种不同的技术都特定于某些任务。我的理解是，以下技术会做以下事情。如果我错了，请纠正我。

*   Quartz 2D：用于在屏幕上绘制形状、文本和图像的主要库。
*   Core Graphics：这是包含 Quartz 的框架的名称。这可以用作 Quartz 的同义词。
*   QuartzGL：Quartz 的一种 GPU 加速模式，默认情况下未启用，在屏幕上绘图[不一定更快](http://cocoawithlove.com/2011/03/mac-quartzgl-2d-drawing-on-graphics.html)。
*   OpenGL：最底层的库，以更多代码行为代价直接与显卡对话。更适合 3D 图形。
*   核心图像：一个用于显示图像和文本的库，但不是用于绘制形状图元。
*   核心动画：用于自动动画对象的库。显然不适合[移动大量物体](http://www.evanmiller.org/notes-on-2d-graphics-mac.html)。也不用于[对象的连续动画](http://cocoawithlove.com/2009/03/asteroids-style-game-in-coreanimation_08.html)。
*   QuickTime：一个显然除了视频之外还可以处理图像和文本的库，但可能不适合绘制原始形状。

我想做的是为某些特定类型的数据创建一个浏览器。该视图不会很复杂，并且将包括在特定位置绘制矩形。但是，用户应该能够通过向左或向右拖动视图来四处移动，并且这种移动应该是流畅的。这是一个非常接近我想要做的例子：

[http://jbrowse.org/ucsc/hg19/](http://jbrowse.org/ucsc/hg19/)

你会推荐我用什么绘图技术开始编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:08:44.493

你想要石英。除非您绘制大量数据，否则任何 Mac（我假设 Mac 不是 iOS）都应该轻松处理它。它简单、高效，并且可能会将您带到您需要去的地方。对于拖动运动，您可能会使用 Core Animation 层来管理它。

注意：最终一切都由 AppKit (Mac) 或 UIKit (iOS) 处理，最终由 Core Animation 处理。如果你在做图形，你会在某个时候遇到 Core Animation，因为它管理所有显示的内容。

注意：如果您要绘制*这么*多数据，您可以使用 OpenGL，但即便如此，在您开始显示之前不需要太多，可能是数百万个顶点或复杂的可视化。

# python - 获取内置方法签名 - Python

> ID：10920499
> 
> 赞同：12
> 
> 时间：2012-06-06T19:04:20.543
> 
> 标签：python, function, arguments

如何获得内置方法的签名？示例：dict().get(k)

```
>> a = dict().get
>> a
<built-in method get of dict object at 0x1003aafd0>
>> a.__doc__
'D.get(k[,d]) -> D[k] if k in D, else d.  d defaults to None.'
>> import inspect
>> inspect.getargspec(a)
TypeError: <built-in method get of dict object at 0x100377250> is not a Python function 
```

我想看到这样的结果

```
>> a.some_function()
('key', 'default'=None) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:15:03.057

我认为这对于在 C 中实现的 python 中的内置函数是不可能的。有关更多详细信息，请参阅[此](http://bugs.python.org/issue1748064)错误讨论。

# r - 我应该使用什么来代替 R 中的传递引用？

> ID：10920505
> 
> 赞同：1
> 
> 时间：2012-06-06T19:04:42.880
> 
> 标签：r, design-patterns, pass-by-reference

我在 R 中编写了一个函数，如果我可以通过引用传递，它将按我的意图工作。它涉及嵌套`sapply`调用并在其中执行分配。由于 R 不使用按引用传递，因此这些函数不起作用。

我知道有诸如 R.oo 之类的软件包可以通过引用-y 方面为 R 带来传递，但我想了解是否有更好的方法。如果按引用传递不可用，传递数据的“R”方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:29:56.267

如果您不修改参数，那么它实际上不会复制它，因此做任何特殊的事情可能毫无意义：

```
> gc() # using 6.2 MB of Vcells
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 560642 15.0     984024 26.3   984024 26.3
Vcells 809878  6.2    2670432 20.4  2310055 17.7
> x <- as.numeric(1:1000000)
> gc() # now we are using 13.9 MB
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  560640 15.0     984024 26.3   984024 26.3
Vcells 1809867 13.9    2883953 22.1  2310055 17.7
> f0 <- function(x) { s <- sum(x); print(gc()); s }
> f0(x) # f0 did not use appreciably more despite using a huge vector
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  560655 15.0     984024 26.3   984024 26.3
Vcells 1809872 13.9    2883953 22.1  2310055 17.7
[1] 500000500000 
```

编辑：对示例的细微更改

# python - Python：数据传输对象

> ID：10920508
> 
> 赞同：4
> 
> 时间：2012-06-06T19:04:46.767
> 
> 标签：python, ironpython, html-agility-pack

## 问题

我有各种需要从客户网页解析/访问的 html 表，其中的数据可能因表（列的长度）而异。

所以，我所做的是为每个表创建一个类，但是这个任务变得很荒谬，因为有很多表需要随着数据的变化而解析。

## 问题

除了为要传输的每个数据创建一个类之外，还有什么方法可以在 python 中实现 DTO？

## 例子

### 班级

```
class HoldItem():

    @property
    def none1(self):
        return self

    @property
    def none2(self):
        return self

    @property
    def item(self):
        return self

    @property
    def plant(self):
        return self

    @property
    def location(self):
        return self

    @property
    def material(self):
        return self

    @none1.setter
    def none1(self, value):
        self.none1 = value 
```

### 填充实例

```
items = []
for tds in trs:
    item = HoldItem()

    if (x == PROP_A):
        item.prop_a = tds.InnerText

    ...
    ...
    ...

    items.append(item)

return items 
```

### 传输到 SQLServer 数据库

```
 for item in items:
        command.AddWithValue("@prop_a", item.prop_a) 
```

## 事实

*   我正在使用 Iron Python
*   我正在将信息传输到表中（SQL Server）
*   我正在使用 HtmlAgilityPack 来解析 html 表
*   我正在网页抓取页面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:18:01.840

[该`Messenger`对象](http://python-3-patterns-idioms-test.readthedocs.org/en/latest/Messenger.html)似乎对您的目的有意义。它被设计为一种传递数据的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:18:36.723

Python 是动态的。

覆盖`__get__`并将`__set__`“字段值”存储在类（实例）内部的字典中。

# c# - 从触发器或轮询调用 SQLCLR？

> ID：10920512
> 
> 赞同：0
> 
> 时间：2012-06-06T19:05:05.447
> 
> 标签：c#, sql-server, sqlclr

我有一个可以接收来自 3rd 方软件的消息的表，我需要一个触发机制来调用我的 dotnet 代码。触发器调用 SQLCLR 的优缺点是什么，然后它可以调用 Web 服务，例如让我的代码轮询表以进行更改。怀疑表的平均负载会很少，可能每天几千个事务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:31:17.500

我个人*永远不会*在触发器中调用 Web 服务。我会编写一个服务来轮询表中的新数据并异步调用 Web 服务。

主要问题是，如果您在触发器中调用 Web 服务，那么您可能会遇到长时间保持锁打开的情况。如果该锁已升级为表锁，那么您将在此期间阻塞表上的所有操作。

如果您对 Web 服务的调用因任何原因失败，它也不会为您提供非常好的重试策略。您是否希望您的触发器以某种方式标记行以便稍后重试？什么会触发重试？

使用基于服务的方法，您可以让它变得更加简单，并且遇到锁定问题的可能性要小得多——这在最好的时候很难诊断——特别是如果它们是暂时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:52:02.867

你没有说你使用的是什么版本的 SQL Server，但如果是 2005+，[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx "服务经纪人")就是为此而设计的。在您的触发器中，在队列中放置一条（短）消息。让您的服务在队列上执行 WAITFOR，然后触发 RECIEVE 来获取消息。比旋转循环更好，看看是否无事可做。

# android - 在 view-page-indicator 中使用 Map Fragment

> ID：10920513
> 
> 赞同：1
> 
> 时间：2012-06-06T19:05:07.023
> 
> 标签：android, google-maps, android-mapview, android-viewpager, viewpagerindicator

我正在尝试使用 android-support-v4-googlemaps： [https](https://github.com/petedoyle/android-support-v4-googlemaps) ://github.com/petedoyle/android-support-v4-googlemaps 和 view-pager-indicator： [https ://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

可悲的是，当我插入地图片段时，我收到了一个异常（粘贴在此消息的末尾），我无法推断出原因是什么。我从 android-support-v4-googlemaps 运行示例项目，一切正常。

当我从 FragmentLayoutMaps（来自 android-support-v4-googlemaps 的示例项目的名称）导入类时，我可以将 TitlesFragment 添加到我的项目中并且一切运行顺利，但是添加 MapFragment 会引发此异常：

```
06-06 17:24:21.306: E/AndroidRuntime(6279): FATAL EXCEPTION: main
06-06 17:24:21.306: E/AndroidRuntime(6279):
java.lang.ClassCastException:
com.viewpagerindicator.sample.MappaTabsActivity
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
com.example.android.apis.app.FragmentLayout
$MapFragment.onCreateView(FragmentLayout.java:245)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:
870)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:
1080)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:
1416)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:
431)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:
139)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.view.ViewPager.populate(ViewPager.java:804)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:
433)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:
405)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:386)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
com.viewpagerindicator.TabPageIndicator.setCurrentItem(TabPageIndicator.java:
230)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
com.viewpagerindicator.TabPageIndicator.onMeasure(TabPageIndicator.java:
115)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.View.measure(View.java:8322)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:
1017)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.View.measure(View.java:8322)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.View.measure(View.java:8322)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.View.measure(View.java:8322)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.View.measure(View.java:8322)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.ViewRoot.performTraversals(ViewRoot.java:842)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.view.ViewRoot.handleMessage(ViewRoot.java:1862)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.os.Handler.dispatchMessage(Handler.java:99)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.os.Looper.loop(Looper.java:130)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
android.app.ActivityThread.main(ActivityThread.java:3806)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
java.lang.reflect.Method.invokeNative(Native Method)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
java.lang.reflect.Method.invoke(Method.java:507)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
com.android.internal.os.ZygoteInit
$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-06 17:24:21.306: E/AndroidRuntime(6279):     at
dalvik.system.NativeStart.main(Native Method) 
```

有谁知道问题可能是什么？

谢谢，罗伯特

# php - 使用 AJAX / jQuery 刷新图像

> ID：10920514
> 
> 赞同：3
> 
> 时间：2012-06-06T19:05:13.777
> 
> 标签：php, jquery, html, ajax

这可能是一个简单的问题，但我很困惑，只是不知道从哪里开始。

我有一个返回图像 URL 的 PHP 脚本 (image_feed.php)。每次调用此 URl 时，它都会返回可用的最新图像（图像每几秒钟更改一次）。

我想要发生的是，当页面加载时，有一个对 image_feed.php 的 AJAX 调用，它返回最新的 url。然后将该 URl 插入到 HTMl 中，替换适当的图像 src。

5 秒后，我希望重复该过程，并更新图像。但是，我不希望图像在完成加载之前被交换，并且我想避免在新图像加载之前出现空白。

目前我有以下jQuery，它只是将image_feed.php的返回值直接加载到一个名为#image1的div中。image_feed.php 的格式正确，可提供 html 图像标记。

```
 $(document).ready(function(){
    var $container = $("#image1");
    $container.load('image_feed.php?CAMERA_URI=<?=$camera_uri;?>')
    var refreshId = setInterval(function()
    {
        $container.load('image_feed.php?CAMERA_URI=<?=$camera_uri;?>');
    }, 5000);

}); 
```

这行得通，但有一个问题。每次图像刷新时，我都会在 IE 和 Firefox 中得到一个与图像大小相同的空白，因为下载图像需要一段时间。

我知道我需要让 image_feed.php 将纯 URL 返回到图像。然后我使用一些 jQuery 来请求这个 URL，预加载它，然后用现有的图像交换它。

然而，我仍然在努力去任何地方。有人可以给我一些指示/帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:30:50.383

```
$(document).ready(function() {
    var $img = $('#image1');
    setInterval(function() {
        $.get('image_feed.php?CAMERA_URI=<?=$camera_uri;?>', function(data) {
            var $loader = $(document.createElement('img'));
            $loader.one('load', function() {
                $img.attr('src', $loader.attr('src'));
            });
            $loader.attr('src', data);
            if($loader.complete) {
                $loader.trigger('load');
            }
        });
    }, 5000);
}); 
```

未经测试。上面的代码应该在后台加载新图像，然后在加载时设置旧图像的 src 属性。

load 的事件处理程序将只执行一次。`.complete`对于可能缓存了要加载的图像的浏览器，该检查是必要的。在这种情况下，这些浏览器可能会也可能不会触发`load`事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:09:41.013

你可以。当您想重新加载某些内容时，您只需附加一个搜索查询，以便它刷新源。

例如，当有一个经常变化的图像（比如验证码）并且你想再次加载它而不刷新浏览器时，你可以这样做：

初始代码：

```
<img src="captcha.png" alt="captcha" /> 
```

刷新代码：

```
<img src="captcha.png?1" alt="captcha" /> 
```

这里使用的脚本只是：

```
var d = new Date();
$('img').attr('src', $('img').attr('src') + '?_=' + d.getMilliseconds()); 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:27:54.030

考虑一下，如果您必须再次从服务器获取 URL，对于新的图像 URL，您可以这样做：

```
$.ajax({
  url: 'getnewimageurl.php',
  success: function(data) {
    $('img').attr('src', data);
  }
}); 
```

服务器应该只返回一个新的图像名称。例如，`PHP`代码应该是这样的：

```
<?php
    $images = array("jifhdfg", "jklduou", "yuerkgh", "uirthjk", "xcjhrii");
    die($images[date('u') % count($images)] . ".png"); // Get the random milliseconds mod by length of images.
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:34:57.090

我建议你使用[jQuery 'onImagesLoad' 插件](http://archive.plugins.jquery.com/project/onImagesLoad) 这会在图像完成加载时为你提供回调。

当您从服务器接收到新的图像 URL 时，您会创建一个新`<img`对象`src="new_url_from_server"`并将`'onImagesLoad'`回调附加到它。当您的回调被调用时，您的图像已完成下载。

现在您可以用 new_url_from_server 替换旧 img 对象的 'src' 属性。由于新图像已经在缓存中可用，因此不会再次下载并立即显示！

Aletrnatively，您可以隐藏旧图像并将此新图像添加到 DOM（如果上述工作正常，则不需要）

一些裸骨样本可能是这样的：

```
<!DOCTYPE html> 
<html> 
<body> 
<img id='bla' src="10.jpg" />

<script type="text/javascript" src="jquery.min.js"></script> 
<script type="text/javascript" src="jquery.onImagesLoad.js"></script> 
<script type="text/javascript"> 
    $(function(){ 
        var img = $('<div><img src="http://myserverbla/images/verybig.jpg"></img></div>');
        img.onImagesLoad({ 
                all : allImgsLoaded 
            });

        function allImgsLoaded($selector){ 
            var allLoaded = ""; //build a string of all items within the selector 
            $selector.each(function(){ 
                $('#bla').attr('src','http://myserverbla/images/verybig.jpg');
            }) 
        } 
    }); 
</script> 

</body> 
</html> 
```

# mysql - SQL 表设计

> ID：10920516
> 
> 赞同：0
> 
> 时间：2012-06-06T19:05:14.323
> 
> 标签：mysql, sql, database, database-design, foreign-keys

我有一个名为 Project 的表。为简单起见，假设它有一个名为 projectId 的列。

```
项目
---------
项目 ID PK

```

我还有一张桌子。它被称为子项目。它有两列，一列称为projectId，另一列称为subProjectId。两列构成主键。

```
子项目
--------
项目 ID PK
子项目 ID PK

```

他们的工作方式是您在项目表中列出了一堆项目。其中一些项目可以是项目的子项目。例如，如果项目表有 3 行这样

```
项目
--------
项目编号
    1
    2
    3

```

项目 2 和 3 可以被认为是项目 1 的子项目。这是子项目表的来源。为了表示这一点，子项目看起来像这样

```
子项目
--------
1 ,2
1 ,3

```

这意味着项目 2 和项目 3 是项目 1 的子项目。

我在为此创建模型时遇到问题。在 SubProjects 表中，我需要 projectId 和 subProjectId 来引用 Projects 表中的 projectId。但是，关键是他们可以引用不同的项目。我想我应该使用外键来做到这一点？这有意义吗？这是允许的吗？有一个更好的方法吗？

我正在使用 MySql 和 MySql 工作台，但似乎无法解决这个问题。有任何想法吗？

编辑一个项目可以是多个表的子项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:09:39.337

这样做应该没问题。您能否更具体地说明为什么无法设置？

如果一个项目只是一个项目的子项目，另一种方法是在项目表中添加一个“父项目”列，其中一个 FK 指向“自身”。我认为如果你这样做，你的查询很可能最终会变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:10:15.173

我将使用列创建一个具有层次结构的表，例如：

```
project_id    parent_project_id
-------------------------------
1             null
2             1
3             1 
```

然后你可以说如果一个项目`parent_project_id`是空的，它不是任何其他项目的子项目。否则，该项目是 中所列项目的子项目`parent_project_id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:10:42.870

为什么不在表 Projects 中添加一个名为 ParentProjectID 的新字段。对于项目，它将为空，对于子项目，它将在那里有其父项目 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:13:33.290

您如何考虑创建一个具有层次结构的表？使用您的示例，它将类似于

```
Projects
----------

ProjectID | ParentID
----------|----------
   1      |   NULL
   2      |   1
   3      |   1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T09:49:16.523

您可以将外键约束添加到“子项目”中的两个列，参考“项目”表中的 ProjectId 列。这样做不会强制两列在“子项目”中的行上具有相同的值。当您将新行插入“子项目”（比如说 2,3）时，服务器将检查：

*   Projects 表中有一行的 ProjectId 值为 2
*   Projects 表中有一行的 ProjectId 值为 3
*   “子项目”中还没有相同的行

这种模型可以工作，但不能保证项目层次结构是“健全的”。数据库本身没有任何内容可以阻止您将 (2,3) 和 (3,2) 都插入“子项目”表中。或 (1,1) 就此而言。因此，您将不得不在您的应用程序逻辑中强制执行这一点。

# asp.net-mvc - 返回修改后的 viewModel 以查看

> ID：10920517
> 
> 赞同：5
> 
> 时间：2012-06-06T19:05:25.993
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想做这样的事情：

```
[HttpPost]
public ActionResult Index(Foo foo)
{
    foo.Name = "modified";

    return View(foo);
} 
```

但是当我的视图被渲染时，它总是具有旧值！如何修改和返回？我必须每次都清除 ModelState 吗？

* * *

我的观点：

```
@model MvcApplication1.Models.Foo

@using (Html.BeginForm())
{
    @Html.TextBoxFor(m => m.Name)
    @Html.TextBoxFor(m => m.Description)

    <input type="submit" value="Send" />
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:35:09.663

我认为这可能是预期的行为，因为将相同模型发送回视图的“正常”场景是模型出现错误时。

请参阅：http: [//blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-15T23:31:09.427

MVC 在回发时使用 ModelState 来填充视图，而不是传递的模型。要在返回视图之前更新单个字段，请尝试以下操作：

```
var newVal = new ValueProviderResult("updated value", "updated value", CultureInfo.InvariantCulture);
ModelState.SetModelValue("MyFieldName", newVal); 
```

更多信息：[ModelStateDictionary.SetModelValue()](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelstatedictionary.setmodelvalue?view=aspnetcore-1.0)

# cordova - NSURLErrorDomain 错误 -999 - iOS 中的链接失败

> ID：10920518
> 
> 赞同：0
> 
> 时间：2012-06-06T19:05:28.643
> 
> 标签：cordova

我有一个运行一堆内部 HTML 页面的 iOS 应用程序，这些页面都来自一个 HTML 主菜单

我正在使用 Hype 来构建页面。

菜单不可靠，有时能识别鼠标点击，有时不能

成功并且页面加载时 - 我的 xcode 输出控制台在子页面加载时给我以下消息

无法加载网页并出现错误：操作无法完成。（NSURLErrorDomain 错误 -999。）

有问题的页面每个都有 2 个 iFrame（一个用于附加内容，1 个用于音频播放器）

取出 iFrame 可以治愈它，但它们是应用程序的核心

我一直在检查，发现有些人建议插入这个

```
if ([error code] != NSURLErrorCancelled) {
//show error alert, etc.
} 
```

进入我的项目，但作为 xcode 的菜鸟，我不确定将它放在哪里

谢谢大家 - 它的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:58:42.470

通常在 MainViewController.m

```
- (void) webView:(UIWebView*)theWebView didFailLoadWithError:(NSError*)error 
{
    NSLog(@"Error %i", error.code);
    if (error.code == NSURLErrorCancelled) { 
        return; // this is Error -999
    }
    return [super webView:theWebView didFailLoadWithError:error];
} 
```

# c# - 如何使用 C# 在 Excel 电子表格中重新定位 X 轴标签

> ID：10920520
> 
> 赞同：1
> 
> 时间：2012-06-06T19:05:30.583
> 
> 标签：c#, visual-studio-2010, excel

我已经在 MS 论坛上发布了这个问题，但唯一的回应（创建一个宏并从 VBA 代码推断）没有帮助。我得到的唯一模糊提示是使用 TickLabelPosition - 这显然只有在您使用 VB 时才有用，而我正在使用 C#

我正在尝试做的应该是世界上最简单和最常见的事情：我只想将 X Axes 标签移动到图表的底部。那能有多难？好吧，我承认我在 C# 或 Excel 互操作方面都没有过多的经验，但目前这似乎是不可能的。

我正在编写一个 C# 程序（VS2010）来从导入的数据创建 Excel 电子表格。实际上，我没有问题创建具有所有正确数据和范围的电子表格。我不知道如何移动 X 轴的标签。我错过了一些简单的东西，但它总是出现在零线上，而且由于我的值变为负数，这意味着它就在图表的中间。现在，如果我使用模板，我可以将它放到我想要的位置，但我不想那样做。

这是一个代码片段：

```
 const string topLeft = "A9";
        const string bottomRight = "B18";
        const string graphTitle = "Graph Title";
        const string xAxis = "Time";
        const string yAxis = "Value";
        string chartTabName;

        var range = workSheet.get_Range(topLeft, bottomRight);    

// Add chart.
var charts = workSheet.ChartObjects() as
    Microsoft.Office.Interop.Excel.ChartObjects;

var chartObject = charts.Add(20, 20, 750, 500) as
    Microsoft.Office.Interop.Excel.ChartObject;
var chart = chartObject.Chart;

// Set chart range.

chart.SetSourceData(range);

chart.ChartType = Microsoft.Office.Interop.Excel.XlChartType.xlXYScatterSmooth; 
```

// chart.ApplyChartTemplate(@"Chart1.crtx"); (<- 模板)

```
chart.ChartWizard(Source: range,
    Title: graphTitle,
    CategoryTitle: xAxis,
    ValueTitle: yAxis); 
```

使用它会将水平值轴置于图表的中间，因为 x 轴变为负数。现在我可以手动移动它，或者使用图表模板（就像我一样），但这不是最好的计划。最好的计划是以编程方式移动它，但我找不到办法。我可以找到一种方法来移动 LEGEND（chart.Legend）而不是 Value。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:57:12.537

虽然它完全没有记录，但这个命令可以工作：chart.Axes(2).CrossesAt = chart.Axes(2).MinimumScale;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:41:24.210

If you want to move the X Axis labels to the "Low" position, here is the code in VBA which might help:

```
chart.Axes(xlCategory).TickLabelPosition = xlLow 
```

And the constants are defined as:

```
Const xlCategory = 1
Const xlLow = -4134 (&HFFFFEFDA) 
```

If you want to move the whole X Axis (labels and ticks), here the VBA code for that:

```
chart.Axes(xlValue).CrossesAt = -15 
```

where -15 is the minimum number in the Y range. Notice the we're actually modifying the Y Axis here:

```
Const xlValue = 2 
```

I realized you asked for C# code, but this should be easy to translate to C# (and I didn't have a Visual Studio project handy to test Excel Interop).

# php - 使用 twilio.api 通过短信将音频文件发送到手机

> ID：10920530
> 
> 赞同：1
> 
> 时间：2012-06-06T19:06:03.273
> 
> 标签：php, twilio

我正在使用 twilio 作为发送短信 usnig php

我如何使用 twilio.api 通过短信将音频文件发送到手机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:13:32.323

您可能需要先查看 Twillio 论坛。他们[在这里发布了答案](http://forum.twilio.com/twilio/topics/can_we_sent_audio_files_via_sms_using_twilio_api?from_gsfn=true)。他们不支持彩信，因此您无法在他们的平台上通过短信发送音频。

# c# - 通过托管代码 (.NET)/命令行启用 Windows 事件日志

> ID：10920543
> 
> 赞同：3
> 
> 时间：2012-06-06T19:06:54.820
> 
> 标签：c#, .net, event-log

如果默认情况下禁用事件[日志](http://msdn.microsoft.com/en-us/library/34xfdz6a)，是否有一种编程方式允许我启用它？简而言之，我只需要知道我是否可以启用特定的 EventLog，以便我可以以编程方式使用这些事件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:29:48.900

要启用 Windows 事件日志，请使用[wevtutil](http://technet.microsoft.com/en-us/library/cc732848%28v=WS.10%29.aspx)

特别是要启用写字板日志，请执行以下操作：

```
wevtutil sl "Microsoft-Windows-Wordpad/Admin" /e:true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:37:14.323

假设您正在谈论启用/禁用系统日志（应用程序、安全性、设置、系统），我认为这是不可能的。

这是 Windows 开发中心的事件日志（需要更深入的戳才能找到有用的信息） [http://msdn.microsoft.com/en-us/library/windows/desktop/aa964766%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa964766%28v=vs.85%29.aspx)

这是有关注册表设置的部分：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363648%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363648%28v=vs.85%29.aspx)

组策略设置：http: [//blogs.technet.com/b/askds/archive/2008/08/12/event-logging-policy-settings-in-windows-server-2008-and-vista.aspx](http://blogs.technet.com/b/askds/archive/2008/08/12/event-logging-policy-settings-in-windows-server-2008-and-vista.aspx)

有趣的是，它允许您启用或禁用安装日志，但没有其他默认日志。

我只是认为，如果您不能通过注册表或组策略来做到这一点，那么它就无法做到。

**编辑：**

无法通过 API 以编程方式启用/禁用事件日志。我唯一的证据就是它不存在。所以我检查了其他方式：PowerShell、WMI、注册表、组策略——你可以从代码中控制的东西。没有喜悦。但是，禁用事件日志的唯一方法是停止服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T07:00:45.867

这应该以编程方式启用事件日志。它使用 EventLogSession 参数

```
 var elSession = new EventLogSession("computername", "domain", "username", password, SessionAuthentication.Default);
    var elConfig = new EventLogConfiguration("Microsoft-Windows-Wordpad/Admin", elSession);
    if (!elConfig.IsEnabled)
    {
        elConfig.IsEnabled = true;
        elConfig.SaveChanges();
    } 
```

# objective-c - Xcode HTTP GET 请求

> ID：10920545
> 
> 赞同：-2
> 
> 时间：2012-06-06T19:07:06.853
> 
> 标签：objective-c, ios, xcode, get, request

我正在制作一个应用程序，您可以在其中在文本框中键入一个值，然后该应用程序向我的网络服务器发送一个 HTTP GET 请求，即`www.mywebserver.server.com/ihiuahdiuehfiuseh?' + textbox variable'`但是，我不知道如何使用 Xcode。我在基本的 PHP 和 HTML 以及高级 C++ 方面经验丰富，但我对这些 Xcode 的东西感到很困惑。在我使用过的所有其他语言中，您可以查找诸如“如何以（语言）播放声音文件”之类的内容，您会得到类似“哦，是的，只是播放（mp3url）。但是，使用 Xcode，您必须启动连接，启动变量等。我买了 2 本 30 美元的书，但我还是很困惑。所以，回到正题，我只需要在 URl 中的 ? 之后解析文本框数字即可被解析为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T10:30:39.960

这是一个非 http 获取同步的示例

你可以找到更多

* * *

```
-(void)aget:(NSString *)iurl{  
NSURL*url = [NSURL URLWithString:iurl];  
NSURLRequest *res = [NSURLRequest requestWithURL:url];  
NSOperationQueue*que=[NSOperationQueue new];  

[NSURLConnection sendAsynchronousRequest:res queue:que completionHandler:^(NSURLResponse*rep,NSData*data,NSError*err){  
    if ([data length]> 0 && err == nil) {  
        NSString* rel=[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];  
        NSLog(@"%@",rel);  
    }else{  
        NSLog(@"isnull");  
    }  

}  
 ]; 
```

}

* * *

## 通过这次发射他

```
NSString * str = [self getDataFrom: @ "your url"]; 
```

     NSLog(@"%@", str);

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:11:02.700

如果您有`UITextFiled`，您将执行以下操作

```
NSString baseUrl = @"www.mywebserver.server.com/ihiuahdiuehfiuseh?"
NSString variable = textField.text;

NSString absoluteURL = [NSString stringWithFormat:@"%@%@", baseUrl, variable];

//Send the absolute variable now to the server 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:19:26.140

如果您寻求 Omar Abdelhafith 建议的解决方案，请不要忘记对您的“查询字符串”进行 url 编码。字符串类中有一个方法：“stringByAddingPercentEscapesUsingEncoding”，但它并不完美。

我最近使用了这里建议的解决方案：http: [//simonwoodside.com/weblog/2009/4/22/how_to_really_url_encode/](http://simonwoodside.com/weblog/2009/4/22/how_to_really_url_encode/)。

# sql - 选择所有列，其中一列具有不同的值

> ID：10920549
> 
> 赞同：7
> 
> 时间：2012-06-06T19:07:29.247
> 
> 标签：sql, sql-server

在我的表中，一些记录的所有列值都相同，除了一个。我需要编写一个查询来获取这些记录。最好的方法是什么？表格是这样的：

```
 colA  colB colC
   a     b    c
   a     b    d
   a     b    e 
```

获取所有列的所有记录的最佳方法是什么？感谢大家的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T19:41:10.790

假设您知道 column3 总是不同的，以获取具有多个值的行：

```
SELECT Col1, Col2
FROM Table t
GROUP BY Col1, Col2
HAVING COUNT(distinct col3) > 1 
```

如果您需要三列中的所有值，则可以将其连接回原始表：

```
SELECT t.*
FROM table t join
     (SELECT Col1, Col2
      FROM Table t
      GROUP BY Col1, Col2
      HAVING COUNT(distinct col3) > 1
     ) cols
     on t.col1 = cols.col1 and t.col2 = cols.col2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:10:08.300

只需选择那些具有不同值的行：

```
SELECT col1, col2
FROM myTable
WHERE colWanted != knownValue 
```

如果这不是您要查找的内容，请在表中发布数据示例和所需输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:28:31.987

像这样的东西怎么样

```
SELECT Col1, Col2
FROM Table
GROUP BY Col1, Col2
HAVING COUNT(*) = 1 
```

这将为您提供具有唯一数据的 Col1、Col2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:00:06.473

假设 col3 有差异

```
SELECT Col1, Col2
FROM Table
GROUP BY Col1, Col2
HAVING COUNT(*) > 1 
```

或显示所有 3 个 COLS

```
SELECT Col1, Col2, Col3
FROM Table1
GROUP BY Col1, Col2, Col3
HAVING COUNT(Col3) > 1 
```

# iphone - “.?123”键上的 UIKeyboard 委托

> ID：10920550
> 
> 赞同：1
> 
> 时间：2012-06-06T19:07:29.580
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikeyboard

有没有人知道当“.?123”按钮被点击时我们是否从键盘上得到一个代表回调？我们在文本键盘上放置了一个自定义数字键盘，一旦用户点击“.?123”按钮，我们希望将其删除以避免重复键。

有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:27:41.500

没有任何通知会给你你想要的。事实上，没有任何公共 API 可以让您访问该级别的键盘。我能想到的唯一方法是在 .?123 键上方放置一个透明按钮，并检测到它，然后将触摸传递给底层按钮。按钮视图深埋在视图层次结构中。我使用此代码首先找到键盘，然后记录包含该按钮的视图 (UIKBKeyViews)。下面日志中的五个视图似乎是大写、退格、.?123、空格键和返回视图。

```
-(void) keyboardUp: (NSNotification*) notification { // called from UIKeyboardDidShowNotification
    UIWindow *tempWindow = [[[UIApplication sharedApplication] windows]objectAtIndex:1]; 
    UIView *keyboard;
    for(int i = 0; i < [tempWindow.subviews count]; i++) {
        keyboard = [tempWindow.subviews objectAtIndex:i];
        if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES) {
           // NSLog(@"Keyboard subviews are: %@",keyboard.subviews);
            NSLog(@"%@",[[[[[[[[[[[[[UIApplication sharedApplication] windows]objectAtIndex:1] contentView]subviews]lastObject]subviews]lastObject]subviews]lastObject]subviews]lastObject]subviews]);
        }
    }
} 
```

# c# - 在 DatagridViewCell 中显示用户控件

> ID：10920555
> 
> 赞同：11
> 
> 时间：2012-06-06T19:07:54.837
> 
> 标签：c#, winforms

Winforms .NET 3.5 (C#)

我有一个 DataGridView (DGView)，并创建了要在 DGView 中显示的 CustomColumn 和 CustomCell。我创建了一个我想在 CustomCell 中显示的 CustomUserControl。

问题：我没有在列中看到用户控件。我想我需要在 CustomCell 中覆盖 Paint() 方法 - 我该怎么做？

注意 - 托管用户控件的 MSDN 示例用于编辑单元格值 - 您可以在其中使您的用户控件在您正在编辑单元格的位置可见。我希望我的用户控件呈现为普通的 winform 控件。此用户控件显示行的通知 .. 并且每行可以有不同的通知。我希望用户能够单击通知并获取有关它的更多详细信息。..但现在我被困在“如何显示这个用户控件”

任何指针将不胜感激。

```
 public class CustomColumn : DataGridViewColumn {
    public CustomColumn() : base(new CustomeCell()) { }
    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a CalendarCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(CustomeCell)))
            {
                throw new InvalidCastException("It should be a custom Cell");
            }
            base.CellTemplate = value;
        }
    }
}
public class CustomeCell : DataGridViewTextBoxCell
{
    public CustomeCell() : base() { }
    public override Type ValueType
    {
        get
        {
            return typeof(CustomUserControl);
        }
    }
    public override Type FormattedValueType
    {
        get
        {
            return typeof(CustomUserControl);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:46:26.840

**第一次尝试**：我试图在我需要的网格上放置一个用户控件。问题：滚动数据网格视图需要重新排列所有这些用户控件。**结果**- 拒绝。

**第二次尝试**：我构建了一个用户控件并将其绘制在适当的单元格中。**结果**- 到目前为止有效。

我只是覆盖了类中`Paint`的`OnClick`方法。`DataGridViewCell``CustomCell`

```
public class CustomeCell : DataGridViewCell
{
    public override Type ValueType
    {
        get { return typeof(CustomUserControl); } 
    }

    protected override void Paint(Graphics graphics, Rectangle clipBounds, Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState, object value, object formattedValue, string errorText, DataGridViewCellStyle cellStyle, DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
    {
        var ctrl = (CustomUserControl) value;
        var img = new Bitmap(cellBounds.Width, cellBounds.Height);
        ctrl.DrawToBitmap(img, new Rectangle(0, 0, ctrl.Width, ctrl.Height));
        graphics.DrawImage(img, cellBounds.Location);
    }

    protected override void OnClick(DataGridViewCellEventArgs e)
    {
        List<InfoObject> objs = DataGridView.DataSource as List<InfoObject>;
        if (objs == null)
            return;
        if (e.RowIndex < 0 || e.RowIndex >= objs.Count)
            return;

        CustomUserControl ctrl = objs[e.RowIndex].Ctrl;
        // Take any action - I will just change the color for now.
        ctrl.BackColor = Color.Red;
        ctrl.Refresh();
        DataGridView.InvalidateCell(e.ColumnIndex, e.RowIndex);
    }
} 
```

该示例`CustomControl`在;)`CustomCell`中呈现。`CustomColumn`当用户点击单元格时，`CustomCell`'`OnClick`处理点击。理想情况下，我想将该点击委托给自定义用户控件`CustomControl`——它应该处理事件，就好像它是对自身的点击（自定义用户控件可以在内部托管多个控件）——所以它在那里并不复杂。

```
public class CustomColumn : DataGridViewColumn
{
    public CustomColumn() : base(new CustomeCell()) { }

    public override DataGridViewCell CellTemplate
    {
        get { return base.CellTemplate; }
        set
        {
            if (value != null && !value.GetType()
                .IsAssignableFrom(typeof (CustomeCell)))
                throw new InvalidCastException("It should be a custom Cell");
            base.CellTemplate = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:02:30.823

DataGridView 控件仅支持在单元格处于编辑模式时显示实际控件。DataGridView 控件不是为显示多个控件或每行重复一组控件而设计的。DataGridView 控件在未编辑单元格时绘制控件的表示形式。该表示可以根据需要进行详细说明。例如，无论单元格是否处于编辑状态，DataGridViewButtonCell 都会绘制一个按钮。

但是，您可以通过 DataGridView.Controls.Add() 方法添加控件，并设置它们的位置和大小以使它们托管在单元格中，`but showing controls in all cells regardless of editing make no sense.`

**[在这里](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/a44622c0-74e1-463b-97b9-27b87513747e#faq16)阅读**

**[更新 - 来自 MS DataGridView 团队的 Prog Mgr]**

[http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/394e04a8-d918-4fdd-be03-dfa13f6a1e66?persist=True](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/394e04a8-d918-4fdd-be03-dfa13f6a1e66?persist=True)

# ruby - 点击没有ID的提交密钥？

> ID：10920557
> 
> 赞同：0
> 
> 时间：2012-06-06T19:08:01.077
> 
> 标签：ruby, selenium, webdriver

我正在尝试测试我的代码，并且必须单击一个提交按钮，但是此提交按钮会获取动态 ID 名称。如何在不使用 ID 的情况下使用我的 selenium 脚本单击此键。

```
<td>
  <button type="submit" value="Allow All" class="btn btnC bglb mfss touchable" 
   id="xhp647364382646" role="button" data-meta="0_3" 
   data-sigil="extra-perms-button blocking-touchable"> Allow All </button>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:15:03.777

WebElement 有一个**提交**方法。如果您可以获取表单内的 webelement，那么您可以调用 webelement.submit()。这是在 JAVA 中。你应该在红宝石中有类似的东西

> 无效提交（）
> 
> 如果这个当前元素是一个表单，或者是表单中的一个元素，那么这将被提交到远程服务器。如果这导致当前页面发生更改，则此方法将阻塞，直到加载新页面。抛出：NoSuchElementException - 如果给定元素不在表单内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:14:21.827

我不确定您的所有代码是什么样的以及另一个提交按钮在哪里，但如果有 2 个提交按钮，您可以尝试这样做

`buttons = browser.find_elements_by_css_selector("button[type='submit']")`

或类似的东西，这将返回所有提交按钮。注意`elements`是函数名中的复数，还有一个是`find_element_by_css_selector`（未复数的）。然后，您可以使用

`buttons[0]`

那么你可以提交

`buttons[0].click()`

# android - 智能卡异常 内部传输执行

> ID：10920559
> 
> 赞同：0
> 
> 时间：2012-06-06T19:08:28.050
> 
> 标签：android, smartcard, open-mobile-api

在我的 android 应用程序中，我使用了使用 OpenMobileAPI 的智能卡。

创建通道后，当我发送命令 APDU 时，经常会收到如下异常：

```
Exception plugin internal error:internalTransmit()
execution:java.lang.IllegalStateException:internal error. 
```

这个例外是什么意思？我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:36:55.290

您可以在[SEEK for Android](http://code.google.com/p/seek-for-android/)项目页面上找到支持。我建议您分享更多详细信息，主要是您正在使用的手机和您首先选择的智能卡读卡器（UICC 或 micro SD？）。也许一些代码会有所帮助。

# emacs - ipython emacs 缩进错误

> ID：10920562
> 
> 赞同：4
> 
> 时间：2012-06-06T19:08:36.520
> 
> 标签：emacs, ipython

emacs 中 ipython 提示符中真正令人讨厌的问题：

```
In [128]: if 1==1:
   .....:     print "yes"
   .....: else:    
   .....:     print "no"
   .....:     
IndentationError: unindent does not match any outer indentation level 
```

它看起来与我完全一致，不确定是什么触发了错误。当我在终端中执行此操作时没有这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:02:16.937

您可以尝试切换自动缩进

`%autoindent`

因为我认为这曾经给我造成了问题。

您可以使用[ipython 的自定义](http://ipython.org/ipython-doc/rel-0.10.2/html/config/customization.html)永久更改此设置。正确导入后（请参阅链接），以下内容应在 ipy_user_conf.py 中起作用：

```
# Emacs sets the term to dumb so we can distinguish that way
if os.environ['TERM'] == 'dumb':
    ip.options.autoindent = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:00:47.400

是的，这很奇怪。就我而言，`python`在评估代码时，在 emacs shell 中使用标准解释器可以正常工作，但使用`ipython`失败。如果您正在使用该`python-mode.el`软件包，您可能需要安装`ipython.el`以获得适当的`ipython`支持。OTOH，如果您使用`python.el`通常随 emacs 提供的，您可能必须切换到标准`python`解释器（我相信`ipython.el`仅适用于第三方`python-mode.el`包，而不是`python.el`emacs 默认使用的）。

# ios - 将xml转换为plist

> ID：10920565
> 
> 赞同：2
> 
> 时间：2012-06-06T19:08:55.547
> 
> 标签：ios, xml, xcode, plist

我有一个 XML 文件，我必须将其转换为属性列表文件 (plist)。我从终端尝试了“plutil”命令，但效果不佳。我怎样才能转换？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T07:46:00.717

我通过在 excel 中编写一个公式来为您创建 plist 文件的文本来实现这一点。它很容易。

**1）（可选）**在 XCode 中，创建一个 plist，它最终具有您想要的格式。保存，然后在查找器中转到此。在 textWrangler 或文本编辑中打开它，以便您可以查看 plist 中每个元素的标签。

例如，您应该找到类似的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">

<dict>

    <key>First Key Name</key>
    <array>
        <string>Before God we are all equally wise</string>
        <string></string>
        <string>Albert Einstein</string>
        <integer>0</integer>
    </array>

    <key>Second Key Name</key>
    <array>
        <string>Do not worry about your troubles.</string>
        <string></string>
        <string>Albert Einstein</string>
        <integer>0</integer>
    </array>

</dict>
</plist> 
```

**2）我会假设：** - 您的电子表格代表了许多行/对象/级别的相同 4 个属性的描述 - 您将每个数组作为电子表格中的单独行 - 以相同的顺序为每一行描述相同的属性. - 您将能够通过知道它们存储在哪个索引来访问数组中的项目。即，我将通过查看索引 2 处的第二个数组来获得第二个作者。

您的电子表格应如下所示：

```
 A                B            C             D                E            F

     /--(Key Names)--\/-------------------(Properties of Each)-----------------\

1    Level Name      |   Quote        |  Notes  |   Author        |  Favorited  | 
     ____________________________________________________________________________
2    First Key Name  |  Before God... |         | Albert Einstein |      0      |
3    Second Key Name |  Do not wor... |         | Albert Einstein |      0      |
.
.
. 
```

所以我的每个对象都会在我的字典中获得自己的键，每个对象由 3 个字符串和一个整数描述。

**3) 公式**

在我的电子表格最后一列的右侧，我将编写一个公式来为该行生成 xml 代码：

```
(F2) = CONCATENATE ("<key>",A2,"</key> <array> <string>",B2,"</string> <string>",C2,"</string> <string>",D2,"</string> <integer>",E2,"</integer> </array>") 
```

将此单元格的右下角向下拖动到所有其他行中，它们将自动填充每一行的信息。

同样，在电子表格底部的所有行下，您可以使用另一个公式来连接行。假设您有 300 行：

```
(F4) = CONCATENATE (F2:F300) 
```

现在将此数据复制到一个文本文件中，并添加最后几个标签和文档类型信息，您可以从上面复制这些信息。使用扩展名 .plist 保存，一切顺利！将文件添加回您的 xcode 项目并像任何其他 plist 一样加载它。

# .net - PrincipalContext.ValidateCredentials 非常慢

> ID：10920567
> 
> 赞同：9
> 
> 时间：2012-06-06T19:09:10.310
> 
> 标签：.net, directoryservices

首先，我查看了关于 SO 的大多数问题，但似乎都不是完全相同的问题。[这](https://stackoverflow.com/questions/5044243/principalcontext-validatecredentials-slow-with-trusted-domain-using-netbios-name)是一个类似的问题，但并不完全相同。在我的情况下，我正在创建一个 PrincipalContext ：

```
Dim pctx As PrincipalContext = New PrincipalContext(ContextType.Domain, fullyqualifieddomain, container, ADUserID, ADPassword)

   If pctx.ValidateCredentials(userName, password) Then 
```

ADUserID 是一个服务帐户。

此方法有效，但需要 6-10 秒以上。

我也尝试过直接检索底层目录条目和绑定。这要快得多，并且可以在我的机器（域外）上工作，但不能在 Web 服务器（域内）上工作。它在 DirectoryEntry.NativeObject 调用时失败。我不知道为什么。不幸的是，我处于这样一种情况，即唯一可行的方法太慢而无法实现。有没有办法加快这个速度？

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T19:27:23.353

试试下面的代码。它可能不会更快，但很高兴看看它是否有效。

用户名应该不包括域。对于域，我的测试只使用了短名称“DOMAIN”，而不是 DN 甚至完全限定（您的里程可能会有所不同）。

添加对 System.DirectoryServices.Protocols 的引用。

```
using System.DirectoryServices.Protocols;

public static bool Authenticate(string username, string password, string domain)
{
    try
    {
        //string userdn;
        using (LdapConnection lconn = new LdapConnection(new LdapDirectoryIdentifier(domain)))
        {
            lconn.Bind(new System.Net.NetworkCredential(username, password, domain));
            return true;
        }
    }
    catch (LdapException e)
    {
        return false;  
    }
}  

if (Authenticate("username", "password", "domain")) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-03T07:29:47.957

如果您的域使用 NetBIOS 名称，请尝试将其更改为 DNS 名称（如果有）。

例如，从“域：abc”=>“域：abc.com”

我的代码：

```
PrincipalContext dc = new PrincipalContext(ContextType.Domain, domain, dn, user, password);
bool authenticated = dc.ValidateCredentials(user, password);
if (authenticated) var info = UserPrincipal.FindByIdentity(dc, IdentityType.SamAccountName, $"{domain}\\{user}"); 
```

前

```
2018/04/03 14:54:32[Info]PrincipalContext time:00:00:04.7638888
2018/04/03 14:54:41[Info]authenticated time:00:00:09.1260688
2018/04/03 14:54:46[Info]info time:00:00:04.7254238 
```

后

```
2018/04/03 15:16:30[Info]PrincipalContext time:00:00:00.1557923
2018/04/03 15:16:30[Info]authenticated time:00:00:00.0373904
2018/04/03 15:16:30[Info]info time:00:00:00.0915680 
```

从 NetBIOS 名称获取 IP 需要花费大量时间，这就是为什么如果使用 NetBIOS 名称作为域，PrincipalContext 会很慢。

# linux - 如何从命令行从 Linux 服务器下载文件？

> ID：10920568
> 
> 赞同：0
> 
> 时间：2012-06-06T19:09:19.000
> 
> 标签：linux, download

我想开始使用我的本地主机进行开发。我正在尝试找出将本地文件夹与远程 Web 服务器上的文件目录同步的最佳方法。在某些情况下，会有 10,000 多个文件。

这不适用于 php、css、javascript 等组件文件。这是用于我不希望使用 git/svn 的内容和媒体文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:10:50.747

我建议使用 rsync。它专为远程同步任务而构建。看看压缩和差分模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:11:02.843

总是有rsync

[http://linux.about.com/library/cmd/blcmdl1_rsync.htm](http://linux.about.com/library/cmd/blcmdl1_rsync.htm)

它专为此类任务而构建，并针对大文件集存在小增量时的同步进行了优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T21:37:52.773

如果 rsync 是不可能的，你可以尝试[wget](http://www.gnu.org/software/wget/)，它有一些漂亮的 fetuers。

# c# - 按列表分组并返回前 1 行

> ID：10920581
> 
> 赞同：0
> 
> 时间：2012-06-06T19:09:49.297
> 
> 标签：c#, linq, list, c#-4.0, dictionary

我有一个带有键值对的列表 acd。

```
 var acd = zebra.Where(v => v.Key.StartsWith("alpha")); 
```

核心价值

1.  alphaABC, TOP323
2.  alphaBCD, BIG456
3.  alphaDEF, TOP323

我想要的是从具有相同值的多个键中仅获取一个键（任意）。在这种情况下，1 和 3 具有相同的值。

我想得到一个如下的新列表：

1.  alphaABC, TOP323
2.  alphaBCD, BIG456

基本上只有唯一值。任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:24:47.147

```
 List<KeyValuePair<string, string>> data = new List<KeyValuePair<string, string>>() 
{ new KeyValuePair<string, string>("ABC", "TOP323"), 
new KeyValuePair<string, string>("BCD", "BIG456"), 
new KeyValuePair<string, string>("DEF", "TOP323") };

        var result = (from d in data
                     group d by d.Value
                     into g
                     select new
                                {
                                    row = g.FirstOrDefault()
                                }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:09:16.830

```
var items = zebra
 .Where(v => v.Key.StartsWith("alpha"))
 .GroupBy(pair => pair.Value)
 .Select(group => group.First())
 .ToArray();

 foreach(var item in items)
   Console.WriteLine("{0}, {1}", item.Key, item.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:04:57.470

用一个`Dictionary<TKey,TValue>`

```
var dict = new Dictionary<string,string>(zebra.Count);
foreach (KeyValuePair pair in zebra) {
    if (!dict.ContainsKey(pair.Value)) {
        dict.Add(pair.Value, pair.Key);
    }
} 
```

请注意，我们在这里颠倒了键和值的含义。我们`pair.Value`在 中用作键`dict`，因为我们想要唯一的值。

作为替代方案，您还可以将字典声明为`Dictionary<string,KeyValuePair<string,string>>`并像这样添加

```
dict.Add(pair.Value, pair); 
```

# wordpress - .htaccess 与 SilverStripe 和 WordPress

> ID：10920593
> 
> 赞同：2
> 
> 时间：2012-06-06T19:10:26.380
> 
> 标签：wordpress, .htaccess, silverstripe

好的，基本上我需要能够设置我的 .htaccess 以便它适用于根目录中的 SilverStripe 安装和 /blogs 目录中安装的博客。这是我所拥有的：

```
### SILVERSTRIPE START ###
<Files *.ss>
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Files>

<Files web.config>
    Order deny,allow
    Deny from all
</Files>

ErrorDocument 404 /assets/error-404.html
ErrorDocument 500 /assets/error-500.html

<IfModule mod_alias.c>
    RedirectMatch 403 /silverstripe-cache(/|$)
</IfModule>

<IfModule mod_rewrite.c>
    SetEnv HTTP_MOD_REWRITE On
    RewriteEngine On

    # BEGIN Silverstripe
    RewriteBase /
    RewriteCond %{REQUEST_URI} ^(.*)$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule .* sapphire/main.php?url=%1&%{QUERY_STRING} [L]
    # END Silverstripe

    # BEGIN WordPress
    RewriteBase /blogs/aquiman/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /blogs/aquiman/index.php [L]

    RewriteBase /blogs/aquipad/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /blogs/aquipad/index.php [L]
    # END WordPress

</IfModule>
### SILVERSTRIPE END ### 
```

这当然行不通。我知道这是错误的，但我知道的还不够多，无法修复它。请帮助我更正此问题以使其正常工作。

谢谢，JH

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:24:09.997

一个简单的建议，`keep it separate`即

*   `SilverStripe`将相关代码保存`$DOCUMENT_ROOT/.htaccess`在`RewriteBase /`
*   `Wordpress`将相关代码保存`$DOCUMENT_ROOT/blog/.htaccess`在`RewriteBase /blog/`

这是您应该使用的修改后的重写代码`$DOCUMENT_ROOT/.htaccess:`

```
# BEGIN Silverstripe
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule (?!^blog/)^.*$ sapphire/main.php?url=$1 [L,QSA,NC]
# END Silverstripe 
```

# php - 访问 PHP 生成的 XML

> ID：10920597
> 
> 赞同：-1
> 
> 时间：2012-06-06T19:10:42.653
> 
> 标签：php, xml

我正在以 XML 格式从 MySQL 数据库输出数据，所以我制作了一个 php 文件，在页面上以 XML 格式显示数据库中的数据。

```
<?php
// Return all existing nid in array (Different types of form);
function nid(){
    $query = "SELECT w.nid 
                FROM webform w";
    $result = mysql_query($query);
    $table = array();
    while ($row = mysql_fetch_row($result)){
        $table[] = $row[0];
    }
    return $table;
}

// Return existing rows of corresponding nid
function sid($nid){
    $query = "SELECT ws.sid 
                FROM webform_submissions ws 
                WHERE ws.nid = $nid";
    $result = mysql_query($query);
    $table = array();
    while ($row = mysql_fetch_row($result)){
        $table[] = $row[0];
    }
    return $table;  
}
// Return corresponding components of nid;
function cid($nid){
    $query = "SELECT wc.form_key 
                FROM webform_component wc 
                WHERE wc.nid = $nid
                ORDER BY wc.cid ASC";
    $result = mysql_query($query);
    $table = array();
    while ($row = mysql_fetch_row($result)){
        $table[] = $row[0];
    }
    return $table;  
}

// Return values of fields corresponding to nid and sid
function data($nid, $sid){
    $query = "SELECT wsd.data 
                FROM webform_submitted_data wsd 
                WHERE wsd.nid = $nid AND wsd.sid = $sid
                ORDER BY wsd.sid ASC";
    $result = mysql_query($query);
    $table = array();
    while ($row = mysql_fetch_row($result)){
        $table[] = $row[0];
    }
    return $table;      
}
// Define Constants
DEFINE("DB_SERVER", "localhost");
DEFINE("DB_USER", "root");
DEFINE("DB_PASS", "");
DEFINE("DB_NAME", "drupal7");

//Establish Connection
mysql_connect(DB_SERVER, DB_USER, DB_PASS)
    or die("Unable to connect to MySQL");

//Select Database
mysql_select_db(DB_NAME)
    or die("Could not connect to the database");

$xml_output = "<?xml version=\"1.0\" ?>\n";
$xml_output .= "<schema>";

foreach (nid() as $nid){
    $xml_output .= "<form fid=\"$nid\">\n";
    foreach (sid($nid) as $sid){
        $xml_output .= "<row rid=\"$sid\">\n";
        for ($i = 0; $i < count(cid($nid)); $i++){
            $tag_array = cid($nid);
            $value_array = data($nid, $sid);
            $tag_row = $tag_array[$i];
            $value_row = $value_array[$i];
            $xml_output .= "<$tag_row>\n";
            $xml_output .= "$value_row\n";
            $xml_output .= "</$tag_row>\n";
        }
        $xml_output .= "</row>\n";
    }
    $xml_output .= "</form>\n";
}
$xml_output .= "</schema>";

header("Content-type: text/xml");
echo $xml_output;
mysql_close();

?> 
```

但我无法找到访问 XML 数据或将其下载为 XML 文件的方法。

这是我运行它时输出的样子。 ![在此处输入图像描述](../Images/605153e33a41e502ac95ba94fb91d804.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:19:30.987

不要使用字符串来构建您的 xml 数据。你应该使用类似 SimpleXMLElement 的东西

请参阅[如何使用 PHP 动态生成 XML 文件？](https://stackoverflow.com/questions/486757/how-to-generate-xml-file-dynamically-using-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:23:55.817

代替：

```
$table[] = $row[0]; 
```

尝试使用 array_push 函数：

```
array_push($table,$row[0]); 
```

# c# - 使用多线程处理一组数据库记录的选项？

> ID：10920601
> 
> 赞同：7
> 
> 时间：2012-06-06T19:10:50.673
> 
> 标签：c#, .net, multithreading, windows-services

我有一个数据库表，其中包含一些要处理的记录。该表有一个标志列，表示以下状态值。1 - 准备好处理，2 - 成功处理，3 - 处理失败。

.net 代码（重复过程 - 控制台/服务）将获取准备好处理的记录列表，并遍历它们并尝试处理它们（不是很长），根据成功或失败更新状态。

为了获得更好的性能，我想为此进程启用多线程。我正在考虑产生 6 个线程，每个线程抓取一个子集。

显然我想避免让不同的线程处理相同的记录。我不想在数据库中有一个“正在处理”标志来处理线程崩溃导致记录挂起的情况。

我看到这样做的唯一方法是获取可用记录的完整列表并为每个线程分配一个组（可能是 id）。如果一个单独的线程失败，它的未处理记录将在下一次进程运行时被拾取。

在将组分配给线程之前，是否有其他替代方法可以划分组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:16:47.423

实现此要求的最直接方法是使用任务并行库的

[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)（或[Parallel.For](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for)）。

允许它管理单个工作线程。

根据经验，我建议如下：

*   有一个附加状态“处理中”
*   在数据库中有一个列，指示何时选择记录进行处理，以及定期运行的清理任务/进程，以查找“正在处理”时间过长的记录（将状态重置为“准备处理”）。
*   即使您不希望它，“正在处理”对于崩溃恢复方案也是必不可少的（除非您可以容忍同一记录被处理两次）。

**或者**

考虑使用事务队列（想到 MSMQ 或 Rabbit MQ）。它们针对这个问题进行了优化。

那将是我明确的选择，因为两者都大规模完成。

**优化**

[如果从数据库中检索数据需要花费大量时间，您可以考虑使用生产者/消费者模式，使用BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)实现该模式非常简单。该模式允许一个线程（生产者）使用要处理的数据库记录填充队列，并允许多个其他线程（消费者）处理该队列中的项目。

**一种新的选择**

鉴于在记录被认为完成之前有几个处理步骤会触及记录，请查看[Windows Workflow Foundation](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)作为可能的替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:20:08.777

我记得做了类似你描述的事情......一个线程不时检查数据库中是否有需要处理的新内容。它只会加载新的 id，所以如果在 x 时最后一次读取的 id 为 1000，则在 x+1 时将从 id 1001 读取。

它读取的所有内容都进入线程安全队列。将项目添加到此队列时，您会通知工作线程（可能使用自动重置事件，或在此处生成线程）。每个线程将一次从该线程安全队列中读取一项，直到队列被清空。

您不应该在 foreach 线程工作之前分配（除非您知道 foreach 文件的进程需要相同的时间）。如果一个线程完成了工作，那么它应该从剩下的其他线程那里承担负载。使用这个线程安全队列，您可以确保这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:46:11.650

这是一种不依赖/使用额外的数据库列（但请参见#4）或要求进程内队列的方法。这种方法的*前提是根据一些一致的值在工作人员之间“分片”记录*，就像分布式缓存一样。

以下是我的假设：

1.  再加工不会造成不必要的副作用；最多一些工作“被浪费了”。
2.  线程数在启动时是固定的。这不是必需的，但它确实简化了实现，并允许我在下面的简单描述中跳过暂时的细节。
3.  只有一个“工作进程”（但参见#1）控制“工作线程”。这简化了如何在工作人员之间拆分记录的处理。
4.  有一些[不可变的]“ID”列“分布良好”。这是必需的，因此搜索工作者可以获得大约相同数量的工作。
5.  只要“最终完成”，工作就可以“乱序”完成。此外，工作人员可能并不总是“100%”运行，因为每个工作人员都有效地在不同的队列上工作。

从 为每个线程分配一个唯一`bucket`值`[0, thread_count)`。如果一个线程死亡/重新启动，它将占用与它腾出的相同的存储桶。

然后，每次线程需要一条新记录时，它都会从数据库中获取：

```
SELECT *
FROM record
WHERE state = 'unprocessed'
AND (id % $thread_count) = $bucket
ORDER BY date 
```

当然，对于批量读取“此线程任务”并将它们存储在本地，可能还有其他假设。但是，本地队列将是*每个线程*的（因此在新线程启动时重新加载），因此它只会处理与给定`bucket`.

当线程完成处理记录时，应使用适当的隔离级别和/或乐观并发将记录标记为已处理，然后继续处理下一条记录。

# c - 让编译器声明并定位调试指针变量

> ID：10920608
> 
> 赞同：2
> 
> 时间：2012-06-06T19:11:15.477
> 
> 标签：c, unit-testing, pointers, initialization

假设我有两个功能，如下所示：

```
unsigned char PlusTwo(unsigned char value)
{
    return (value + 2);
}
unsigned char PlusTwoUsingPtr(unsigned char *value)
{
    return (*value + 2);
} 
```

如果我想在开发时测试第一个函数，没问题，我要做的就是：

```
PlusTwo(8); 
```

编译器会自动为我在内存中的某处放置一个常量。但是，要测试第二个功能，它会变得更加复杂。首先我必须声明一个变量，然后将变量的地址传递给函数：

```
unsigned char eight = 8;
PlusTwoUsingPtr(&eight); 
```

这不是非常耗时，但很烦人（特别是在 C89/ANSI 中，[变量必须在](https://stackoverflow.com/q/288441/316857)功能块的开头声明）。是否有一些技巧可以让我在一行代码中测试这个函数，让编译器声明并放置一个常量供我指向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:17:52.470

您可以将复合文字与标量类型一起使用：

```
 PlusTwoUsingPtr(&((unsigned char){8})); 
```

复合文字是 C99 中引入的一个特性。有关信息，对象是可变的（具有静态存储持续时间），您也可以在函数中对其进行修改。

# selenium - 我应该如何使用 webdriver 处理 html 占位符属性场景自动化

> ID：10920614
> 
> 赞同：2
> 
> 时间：2012-06-06T19:11:29.173
> 
> 标签：selenium, webdriver

嗨，我需要自动化一个场景，其中有一个文本输入字段，其中显示一个文本 - “在此处输入”。

```
<input class="textbox" type="text" value="" placeholder="type here" name="q"> 
```

我需要验证 1) 显示文本 - “在此处输入” 2) 当焦点移动到此文本字段时，文本输入字段不显示 - “在此处输入”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:21:40.067

您可以通过简单的 JavaScript 测试浏览器是否支持元素的`placeholder`属性。`<input>`这是一个间接测试，但据我所知，您无法通过 Selenium 测试占位符文本。但这应该是绝对足够的：

```
function supportsInputPlaceholder() {
    var input = document.createElement('input');
    return 'placeholder' in input;
} 
```

（取自[http://diveinto.html5doctor.com/detect.html#input-placeholder](http://diveinto.html5doctor.com/detect.html#input-placeholder)）

所以：

```
// only if your driver supports JS
JavascriptExecutor js = (JavascriptExecutor)driver;
String placeholderTest = "return 'placeholder' in document.createElement('input')";
assertTrue(js.executeScript(placeholderTest)); 
```

# cryptography - 参数 3 在调用系统任务 $fwrite 时不是常量

> ID：10920620
> 
> 赞同：0
> 
> 时间：2012-06-06T19:12:10.110
> 
> 标签：cryptography, hardware, verilog, xilinx

我正在使用 Xilinx ISE 10.1 运行一些 verilog 代码。在代码中，我想将 3 个寄存器的寄存器值写入文件 cipher.txt 中。以下是代码片段：

```
if (clk_count==528) begin
  f1 = $fopen("cipher.txt", "w");
  $fwrite(f1, "clk: %d", clk_count[11:0]);
  $fwrite(f1, "plain: %h",  plain[31:0]);
  $fwrite(f1, "cipher: %h",  cipher[31:0]);
  $fclose(f1);
end 
```

执行结束，发现cipher.txt的内容为：

```
clk: %dplain: %hcipher: %h 
```

没有遇到其他错误，但出现了与 3 个 fwrite 对应的警告：

```
Parameter 3 is not constant in call of system task $fwrite.
Parameter 3 is not constant in call of system task $fwrite.
Parameter 3 is not constant in call of system task $fwrite. 
```

寄存器 clk_count 和 cipher 的值在每个时钟周期发生变化（寄存器 plain 的值始终保持不变），当 clk_count 等于 528 时将值写入 cipher.txt（由 if 语句指示）

任何人都可以提供一些见解和/或帮助我克服这个障碍吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:23:19.390

ISE 似乎希望这些参数`$fwrite`保持不变。警告指的是`clk_count[11:0], plain[31:0], and cipher[31:0]`，它们不是恒定的。根据定义，它们在每个周期都在更改，因此在编译时它们是未知的。这也解释了为什么它们没有打印并且您在输出中看到`%d`和`%h`。

据我所知，Verilog 规范中没有任何内容要求参数`$fwrite`保持不变。与 Cadence Incisive 相同的代码可以正常工作。我的猜测是这是 ISE 的限制，因此您可能需要与 Xilinx 核实。

可能的解决方法：

1)`$swrite`用于创建具有正确格式的字符串。然后将字符串写入文件。

2）尝试在调用中使用中间变量`$fwrite`。也许部分选择正在抛弃它。例如

```
integer foo;
foo = clk_count[11:0];
$fwrite(... , foo , ...); 
```

其中任何一个都*可能*有效，也可能无效。

出于好奇，如果您删除部分选择，并尝试在`clk_count`没有 的情况下打印`[11:0]`，您会收到相同的警告吗？

# ruby - 如何让 MongoMapper 使用短的、自动递增的整数 ID，而不是那些可笑的长默认 ID？

> ID：10920621
> 
> 赞同：1
> 
> 时间：2012-06-06T19:12:18.380
> 
> 标签：ruby, mongodb, mongomapper

我正在使用 Sinatra 和 MongoMapper 在 Ruby 中编写错误跟踪软件。问题是票证 ID 对用户不是很友好。它们由 24 个十六进制数字组成（例如`4fcfa9e1c3e7f20bc2000004`）。我希望票证 ID 从 1 开始并自动递增（即 1、2、3……）。在 MySQL 中，这将使用`AUTO_INCREMENT`.

但是，我正在使用 MongoMapper。有没有办法让 ID 从 1 开始然后自动递增，还是我需要*单独*存储它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:29:11.383

[MongoDB 文档](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)列出了一些自动递增 ID的策略。

一般来说，自动递增 ID 的问题在于它们无法扩展。使用自动增量，您需要一个实体来提供密钥，这成为了瓶颈。所以默认是使用对象 ID。

也就是说，您的创作速度可能没有那么快，您可以利用链接文档中的想法。此外，您可能希望查看类似 JIRA 的内容，其中 ID 是以某种合理的方式生成的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:08:47.417

如果您创建了很多很多对象，它可能无法扩展 b/c，您必须为每个新对象访问数据库。

如果您不需要这种缩放，那么有几个宝石可以允许增量 id。

Pablo Cantero 的宝石[mongomapper_id2](https://github.com/phstc/mongomapper_id2)。

我的宝石，[mongo_sequence](https://github.com/brianhempel/mongo_sequence#why)。

请注意，可能有几个地方 MongoMapper 对`ObjectID`'s 有特殊行为，但不适用于整数。我至少知道，在一年半之前，所有基本的东西都适用于整数 id。

# magento - Magento 1.7 主题问题

> ID：10920623
> 
> 赞同：0
> 
> 时间：2012-06-06T19:12:29.857
> 
> 标签：magento

尝试在 magento 1.7 中更改主题。编辑 page.xml 文件，但没有看到效果。更改 page.xml 中的标签，但没有任何更改出现在站点上。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:35:21.957

所有布局文件都将被缓存（除非您禁用了此功能） - 首先尝试清除您的布局缓存。通过登录管理区域并转到系统>缓存管理并刷新布局缓存类型（标准安装中的第二个选项）来执行此操作。

如果您仍在开发中，关闭缓存可能是一个想法。

如果您所做的更新仍未生效，请通过确保您使用正确的包和主题来仔细检查您正在编辑正确的文件。

顺便说一句，还要考虑将 local.xml 文件用于所有核心布局覆盖，而不是将核心文件复制到主题中并进行编辑。它提供了更好/更快的工作流程和更简洁的更容易出错的升级路径（尽管在某些情况下它不是最佳选择）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:32:30.950

*   清除缓存（页面布局更新 XML 树是缓存项）

*   确保您正在编辑正确的 page.xml 文件（尝试在同一布局目录中的 local.xml 中进行更改，以确保您在正确的主题中）

# sql-server-2008 - 报告模型数据

> ID：10920626
> 
> 赞同：1
> 
> 时间：2012-06-06T19:12:37.327
> 
> 标签：sql-server-2008, ssrs-2008, data-modeling

我正在研究 ssrs 2008 r2，我正在使用关系数据库作为源构建报表模型。我有很多数据库，它们都具有相同的结构（相同的表和相同的表字段）。从报表模型的第一眼看，所有实体都是从数据源视图生成的。因此，它不允许一个报表模型与多个数据库一起使用。是否有多个数据库使用相同的报告模型？Ps：我的报表模型有这么多实体，对于每一个，我都必须对其进行编辑。所以你可以看到我需要的是自动化这个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:32:27.120

我很想看到这个问题的答案，因为我对继承的产品有同样的要求。但是由于您没有任何其他答案，如果我描述我们拥有的设置，这可能会有所帮助。

**初始部署**

在本地，我们有**一个**Visual Studio 2008 (BIDS) 报表模型项目，其中包含一个数据源、多个数据源视图和报表模型。每次新数据库上线时，我们都会更改数据源的连接字符串，并更新项目的部署配置，以针对不同的报表服务器文件夹，格式为`/Models/<databaseName>`. 然后使用 BIDS 部署模型。这种情况的频率很低，每两个月才发生一次。如果我们必须同时设置很多数据库，这将是一个缓慢而痛苦的过程。作为旁注，我们通过配置每个报告文件夹（即`<databaseName>`文件夹）的安全性来限制对每个已部署模型的访问。

**模型更新**

由于我们最初的部署是手动的，以同样的方式更新模型会非常痛苦。所以我写了一个工具，它利用 SSRS 提供的 Web 服务来刷新我们部署的模型。在高层次上，这是如何工作的；在对 BIDS 项目中的报告模型进行更改后（请记住，我们只有一个项目，而不是每个已部署模型的项目），工具循环每个数据库并调用[SetModelDefinition](http://msdn.microsoft.com/en-US/library/microsoft.wssux.reportingserviceswebservice.rsmanagementservice2005.reportingservice2005.setmodeldefinition%28v=sql.90%29) Web 服务方法，传入我们更新的模型文件。我们不会更改数据源，因此报表服务器上的更新模型将继续使用其配置的数据源。同样，这仅有效，因为每个数据库的数据源名称都不会更改。

作为参考，这里是该工具`bulk`上传模型的示例 C# 代码

```
// prepare the model for upload

string pathToSmdlFile = "c:\ReportModel.smdl";
string pathToDataSourceViewFile = "c:\ReportModel.dsv";

string semanticModel = System.IO.File.ReadAllText(pathToSmdlFile);
string dataSourceView = System.IO.File.ReadAllText(pathToDataSourceViewFile);

// combine the semanticModel and dataSourceView, BIDS does when you use the `deploy` action
// because we're doing this in code we have to combine
byte[] model = Encoding.UTF8.GetBytes(semanticModel.Replace("</SemanticModel>", dataSourceView + "\n</SemanticModel>"));

// upload model using web service

using (var rs = new ReportingService2005WS.ReportingService2005())
{
    rs.Url = "http://yourserver/ReportServer/ReportService2005.asmx";
    rs.Credentials = new System.Net.NetworkCredential("admin", "password"); 

    foreach (string databaseName in GetDatabaseNames())
    {
        string fullpath = string.Format("/Models/{0}/ReportModel", databaseName);

        rs.SetModelDefinition(fullpath, model);
    }
} 
```

我并不是说这是完美的设置——我实际上认为我应该可以一次上传报告模型，并在使用报告时更改数据源。也许可以根据使用的 SSRS 登录配置不同数据源的使用。未能报告本身应该以某种方式传递要使用的正确数据源的详细信息（或连接字符串）。另一方面，这确实意味着我们的用户不必知道与数据库的连接的详细信息。我们只是给他们 SSRS 登录名并允许他们使用报告生成器进行构建；由于应用于每个数据库文件夹的安全性，它们被限制在数据库中......

# php - Google 的 OpenID 实现.. 400 错误请求

> ID：10920627
> 
> 赞同：2
> 
> 时间：2012-06-06T19:12:49.610
> 
> 标签：php, openid

所以我试图掌握 OpenID，我觉得我理解了这个理论，等等......现在它来实现它了。我有一个非常基本的设置，可以向谷歌提供者地址发送一个 curl 请求。

```
https://www.google.com/accounts/o8/id 
```

解析返回的 XRDS xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<xrds:XRDS xmlns:xrds="xri://$xrds" xmlns="xri://$xrd*($v*2.0)">
  <XRD>
    <Service priority="0">
      <Type>http://specs.openid.net/auth/2.0/server</Type>
      <Type>http://openid.net/srv/ax/1.0</Type>
      <Type>http://specs.openid.net/extensions/ui/1.0/mode/popup</Type>
      <Type>http://specs.openid.net/extensions/ui/1.0/icon</Type>
      <Type>http://specs.openid.net/extensions/pape/1.0</Type>
      <URI>https://www.google.com/accounts/o8/ud</URI>
    </Service>
  </XRD>
</xrds:XRDS> 
```

从他们的 XRDS 文档中检索到 google 的实际提供程序后，我使用此功能重定向...

```
public function RedirectToEndpoint() {
    $params = array();
    $params['openid.mode'] = 'checkid_setup';
    $params['openid.ns'] = 'http://specs.openid.net/auth/2.0';
    $params['openid.claimed_id'] = 'http://specs.openid.net/auth/2.0/identifier_select';
    $params['openid.identity'] = 'http://specs.openid.net/auth/2.0/identifier_select';
    $params['openid.return_to'] = $this->URLs['return_to'];
    $params['openid.realm'] = $this->URLs['realm'];

    $join = stripos($this->URLs['openid_server'], '?') ? '&' : '?';
    $redirect_to = $this->URLs['openid_server'] . $join . $this->array2url($params);
    if (headers_sent()){ // Use JavaScript to redirect if content has been previously sent (not recommended, but safe)
        echo '<script language="JavaScript" type="text/javascript">window.location=\'';
        echo $redirect_to;
        echo '\';</script>';
    }else{  // Default Header Redirect
        header('Location: ' . $redirect_to);
    }
} 
```

array2url 是一个简单的函数，它将 assoc 数组 $params 转换为追加到查询字符串。

生成的url是这样的...

```
https://www.google.com/accounts/o8/ud?openid.mode=checkid_setup&openid.ns=http://specs.openid.net/auth/2.0&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.return_to=http://learn.local/openid/return.php&openid.realm=http://learn.local/openid/index.html& 
```

然而，你最终在一个页面请求是无效的。还有一个不错的 400 Bad Request.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:51:56.547

总而言之，我觉得自己愚蠢到了极点！它归结为正确设置我的领域。可以说，我有一个领域导致我的退货地址超出了可用的“范围”。对于以后遇到 400 错误的人来说，可能是..

```
$openid->SetReturnAddress(('http://learn.local/openid/return.php')); //.return_to
$openid->SetDomain(('http://learn.local/openid/index.html')); //Realm 
```

配置不当的领域.. *facepalm*

就是现在...

```
$openid->SetDomain(('http://learn.local')); //Realm 
```

# c++ - OpenGL 核心和兼容性

> ID：10920629
> 
> 赞同：9
> 
> 时间：2012-06-06T19:12:54.660
> 
> 标签：c++, c, opengl, glsl

我正在尝试学习 OpenGL。我有使用 C 和 C++、设置构建环境以及所有这些爵士乐的经验，但我正试图找出一个好的起点。

我知道 OpenGL <= 2.1 中突出的固定功能管道，而且它似乎相对容易上手。但是，OpenGL 在 OpenGL >= 3.1 中推送的核心配置文件让我因为弃用而想要远离 FFP。但我对它在 3.1 及更高版本中的工作方式感到困惑。在 2.1 及以下版本中，当您绘制形状时，您有 glBegin(GL_WHATEVER) 和 glEnd()。在查看核心配置文件 API 时，我注意到的第一件事是这两个函数调用消失了。我意识到可能有一个简单的替换，但是看到从这样一个基本任务中取出的东西（看似有用）是非常令人震惊的。似乎从 c 标准库中弃用 printf() 。当我阅读最新的红皮书时，

在阅读类似问题的各种答案时，我会看到典型的“基于着色器”或“全部由着色器完成”等。如果我想在黑色背景上绘制一个简单的白色方块（最新红皮书中的第一个示例） ，我根本不明白着色器与绘制盒子有什么关系。他们不应该做......好吧......阴影？我已经考虑购买橙皮书和蓝皮书，但我不想再花钱购买将其全部隐藏在图书馆（蓝皮书）或将谈论编程着色器的东西在 3D 环境中执行一些照明任务（橙皮书）。

那么我从哪里开始呢？我如何只使用核心轮廓绘制一个盒子（或立方体或金字塔或其他任何东西）。我不是在这里要求代码片段，我正在寻找一个广泛的教程或一本书或有人可以指出我的东西。如果之前已经回答过，但我没有找到，请重定向我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T17:58:20.330

核心配置文件中突然出现“复杂性”的原因是固定功能管道并不能代表 GPU 实际为您所做的事情。大部分功能是在 CPU 上完成的，只有实际的绘图发生在 GPU 上。固定管道的另一个问题是这是一场失败的战斗。固定管道有很多旋钮和开关！因此，它不仅已经非常复杂，而且永远无法满足对新场景绘制方法的无尽需求。输入 GLSL，你就可以准确地告诉 GPU 你想如何绘制你的场景。这将权力转移给了开发人员，并使每个人都不必等待新开关/旋钮的 OpenGL 更新。

现在，关于您对突然丢失 glBegin 和 glEnd 的挫败感......有一些简单的框架可以模仿它们在新核心配置文件上的行为，这是一件好事。再次，它将权力转移给开发人员选择他们如何处理管道。但是，在 FFP 上练习 3D 并没有错。无论如何，您首先需要学习 3D 数学和概念。这些概念适用于任何 API。（矩阵数学将在 OpenGL 和 Direct3D 中拯救你的生命。）所以，首先你练习简单的三角形和颜色。然后你移动到纹理（带有纹理坐标）。然后添加法线（带照明）。然后，在你理解了所有这些概念之后，你停止使用 glBegin/glEnd，你开始将大量的顶点数据批处理到缓冲区中。如果您不理解 glBegin/glEnd，您将无法完全理解 glDrawElements。所以，学习这些工具是可以的。

# azure - 在 Azure 中将类型化对象添加到 MessageQueue

> ID：10920632
> 
> 赞同：1
> 
> 时间：2012-06-06T19:12:56.363
> 
> 标签：azure, queue, azure-queues

我想在将它添加到 QueueStorage 之前将一个类添加到 MessageQueue 的 MessageContent。

例子

```
class udpates
{
    public int userId {get; set; }
    public Datetime UpdateTime {get; set; }
}

queue.addMessage("instance of updates class") 
```

我怎样才能做到这一点 ？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:48:52.170

队列消息是字符串或二进制的。您可以自己序列化对象，然后将结果排入队列。

就个人而言，我更喜欢基于字符串的队列消息，因为我可以通过从队列中提取消息并查看它们而无需解码来轻松调试问题。此外，当队列消息是字符串时，很容易更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:09:06.453

序列化为 XML 字符串是一个不错的选择。

# haskell - let绑定中的不明确类型变量

> ID：10920634
> 
> 赞同：2
> 
> 时间：2012-06-06T19:13:25.347
> 
> 标签：haskell, types

我是来自 C++ 和 Java 背景的 Haskell 新手。有时，我对 Haskell 的类型系统有疑问。我当前的错误是这段代码：

```
countIf :: (Integral b) => [a] -> (a -> Bool) -> b
countIf [] p = 0
countIf (x:xs) p
  | p x = 1 + countIf xs p
  | otherwise = countIf xs p

isRelativelyPrime :: (Integral a) => a -> a -> Bool
isRelativelyPrime m n = gcd m n == 1

phi :: (Integral a, Integral b) => a -> b
phi n = countIf [1..(n - 1)] (isRelativelyPrime n)

main = print [(n, phi n, ratio) | n <- [1..10], let ratio = (fromIntegral (phi n)) / n] 
```

错误信息是

```
prog.hs:13:60:
    Ambiguous type variable `b' in the constraints:
      `Fractional b' arising from a use of `/' at prog.hs:13:60-85
      `Integral b' arising from a use of `phi' at prog.hs:13:75-79
    Probable fix: add a type signature that fixes these type variable(s) 
```

13:60 就在我在 main 的列表理解中的 let 绑定中使用 fromIntegral 之前。我仍在尝试习惯 ghc 的错误消息。我无法破译这个特定的内容，以便弄清楚我需要更改哪些内容才能编译我的代码。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T20:11:32.560

这是一个常见的初学者错误示例：*过度多态的代码*。

您已使代码尽可能通用，例如

```
phi :: (Integral a, Integral b) => a -> b 
```

这将通过转换将*任何*整数类型转换为任何其他整数类型`phi`。

这种多态代码非常适合库，但不适合类型推断。我会投入资金，你只是想让它在整数上工作，所以我们可以继续给出更准确的类型，

```
countIf :: [Integer] -> (Integer -> Bool) -> Integer
countIf [] p = 0
countIf (x:xs) p
  | p x       = 1 + countIf xs p
  | otherwise = countIf xs p

isRelativelyPrime :: Integer -> Integer -> Bool
isRelativelyPrime m n = gcd m n == 1

phi :: Integer -> Integer
phi n = countIf [1..(n - 1)] (isRelativelyPrime n)

main = print [ (n, phi n, ratio)
             | n <- [1..10], let ratio = (fromIntegral (phi n)) ] 
```

并且类型错误就消失了。

您甚至可能会看到性能改进（特别是如果您专注于`Int`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:19:14.447

您还需要在 n 上调用 fromIntegral，因为 Haskell 不会自动从整数类型转换，自从您调用 fromIntegral (phi n) 以来，您似乎已经知道这一点。我经常犯这个错误，没什么大不了的！

# facebook - REST Web 服务基本身份验证 + 客户端 Facebook 应用身份验证 = 双重身份验证？

> ID：10920636
> 
> 赞同：2
> 
> 时间：2012-06-06T19:13:32.377
> 
> 标签：facebook, web-services, rest, basic-authentication

1.  我已经构建了一个基于 REST 设计的 Web 服务。当然，某些对资源可用的操作需要身份验证（例如删除用户）。我使用基本身份验证，到目前为止一切都很好。

2.  我已经构建了一个客户端来使用 Web 服务：一组 Ajax 函数。同样，一切都很好（也适用于基本身份验证）。

3.  我现在想创建一个完整的 Web 应用程序，它将使用上面的一组 Ajax 函数与 Web 服务进行交互。但是，为了增强用户体验，一些 Web 应用程序功能将需要 Facebook 身份验证。

所以这是我的问题。Web 应用程序需要用户名和密码才能通过基本身份验证调用 Web 服务。但它还需要 Facebook 凭据才能使用 Facebook API，并且用户必须登录两次。而且，每次我都必须检查Facebook用户（当前登录Facebook）是否对应于Web服务的用户，这很麻烦。

有没有人有简化流程的想法？

[这与 post authentication-scheme-for-multi-tiered-web-application-utilizing-rest-api](https://stackoverflow.com/questions/6462863/authentication-scheme-for-multi-tiered-web-application-utilizing-rest-api/6463357#6463357)有点相关，但我没有找到任何我能理解的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:14:20.200

在这种情况下，我只使用 Facebook 身份验证。如果用户通过 JS SDK 登录 Facebook，您可以简单地通过 FB.getAuthResponse().accessToken 获取 accessToken。然后，您可以将其传递给 webservice 并使用它在服务器端进行身份验证。

首先，使用 JS SDK 进行客户端认证：

```
/* assumed, that you alredy called FB.login() and stuff */
var accessToken = FB.getAuthResponse().accessToken;
$.ajax({
    'url' : 'rest.php',
    'type' : 'get',
    'dataType' : 'json',
    'data' : { accessToken : accessToken },
    'success' : function(response) {
        /* some fancy code, blah blah blah */
    }
}); 
```

我使用 PHP SDK，所以我将展示 PHP 中的示例。

```
<?php
require 'facebook.php';

$accessToken = $_GET['accessToken'];
$facebook = new Facebook(array(
    'appId' => 'xxxxx',
    'secret' => 'xxxxx'
));     
$facebook->setAccessToken($accessToken);

if ($facebook->getUser()) {
    // yaay, user is authenticated
    echo json_encode($mySuperDuperSecretContentForLoggedUserOnly);
} else {
    // authentication failed
    echo json_encode(null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:13:10.557

如果您的主要设计使用基本身份验证，但您希望在某些情况下能够与 facebook 连接，那么我建议您在服务器上使用适配器/桥接器，它能够获取 facebook 身份验证数据，然后处理基本身份验证身份验证本身。

这样，facebook 用户就不必经过 2 个身份验证过程，并且您不会破坏原始流程中的任何内容。

实施起来应该不难，当用户注册时，只需将他的 fb 帐户与您系统中的用户关联，然后当他使用 facebook 登录时，获取他的 id 并使用基本身份验证将他登录到系统。

不过有一件事，如果您想使用客户端实现 facebook 身份验证，那么您应该在 https 中发送身份验证数据。

# asp.net - 使用 JOIN 与 Linq to SQL ExecuteQuery 问题

> ID：10920638
> 
> 赞同：3
> 
> 时间：2012-06-06T19:13:38.577
> 
> 标签：asp.net, sql, linq-to-sql

我已经在我的一个网站上使用 Linq to SQL 一段时间了，随着时间的推移，我用来查询数据库的代码变得有点乱，所以我决定重写，最初我的查询都是由 Linq 专门处理的但最近出现了对更高级搜索功能的需求，这导致我更倾向于使用 ExecuteQuery 和手写我的 SQL 语句，问题是我无法让 Join 语句正常工作。

我的数据库中有两个表，t_events 和 t_clients。两个表之间唯一相似的是它们都有一个 clientid 字段（事件所针对的客户端的 id）。我需要做的是将所有事件拉到页面中（效果很好），但我不想在需要显示客户端名称的页面上显示 clientid。最初我有一个连接子句可以很好地处理这个问题：

```
 var eve = from p in db.t_events
                          join c in db.Clients on p.clientid equals c.clientid
                          where p.datedue <= thisDay && p.status != "complete"
                          select new { p.eventname, p.datedue, p.details, p.eventid,         p.status, c.clientname }; 
```

但是，随着页面的重新设计，我在重新创建 linq 在这里通过加入所做的事情时遇到了问题。我当前的代码：

```
 StringBuilder sqlQuery = new StringBuilder("SELECT * FROM dbo.t_events JOIN dbo.t_clients ON dbo.t_events.clientid=dbo.t_clients.clientid");
    var query = db.ExecuteQuery<t_events>(sqlQuery.ToString());
    foreach (var c in query)
    {       
            counter = counter + 1;
            MyStringBuilder.Append("<tr class='"+c.status+"'><td><a href='searchdetails.aspx?id="+c.eventid+"'>"+c.eventname+"</a></td><td>" +c.clientname+ "</td></tr>");
    } 
```

在 foreach 循环中我有你可以看到我正在尝试拉入 c.clientname （这不起作用），因为它不在 t_events 数据库中，将其更改为 c.clientid 使代码工作，我不确定是什么问题就像使用相同的 SQL 并直接从 sql 管理工具中运行查询一样，效果很好。关于这个问题的任何想法将不胜感激！

固定的！

DaveMarkle 建议使用视图，这是一种更简单的方法。我创建了一个视图，将两个表与我需要的字段连接在一起，并针对它运行查询，简单有效，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:39:49.707

呃 - 所以也许我们应该在这里有一个答案，所以这个问题会从“未回答”列表中删除。

正如戴夫马克尔所说。

使用视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T01:03:14.430

另外一个选项！

执行查询两次：一次使用 db.ExecuteQuery< **t_events** >，一次使用 db.ExecuteQuery< **t_clients** >。现在您拥有事件和客户端，您可以通过匹配 client_id 在客户端重新加入它们。

# android - android 应用程序静音和取消静音 MediaPlayer

> ID：10920639
> 
> 赞同：2
> 
> 时间：2012-06-06T19:13:47.687
> 
> 标签：android, android-activity, media-player, mute

我为此苦苦挣扎了一天，但问题仍然存在。

我的活动中有 2 个功能，即静音和取消静音，如下所示：

```
private void mute() {
    AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    am.setStreamMute(AudioManager.STREAM_MUSIC, true);
}

public void unmute() {
      AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
      am.setStreamMute(AudioManager.STREAM_MUSIC, false);
    } 
```

在活动本身内，这 2 个功能可以正常工作。但是，当它在第一个活动中静音并且我想为下一个活动取消静音时，该活动保持静音。我想知道为什么？谁能给我一些建议？非常感谢！

更新：这是代码的一部分：

```
 ImagePlay.setOnClickListener(new View.OnClickListener() 
                        {
                            // Perform button logic
                            @Override
                            public void onClick(View v)
                            {
                                unmute();
                                onResume();
                                Speaker = (ImageView)findViewById(R.id.ImageSpeaker);    
                                Speaker.setImageBitmap(mAudioImageArray[0]);
                                closeDialog.dismiss();
                                play(DOSParseActivity.this,introAudioPath);
                                isMute = false;
                            }
                        });

                        ImageMute.setOnClickListener(new View.OnClickListener() 
                        {
                            // Perform button logic
                            @Override
                            public void onClick(View v)
                            {
                                Speaker = (ImageView)findViewById(R.id.ImageSpeaker);    
                                Speaker.setImageBitmap(mAudioImageArray[1]);
                                closeDialog.dismiss();
                                mute();
                                onPause();
                                isMute = true;
                            }
                        });

                        ImageStop.setOnClickListener(new View.OnClickListener() 
                        {
                            // Perform button logic
                            @Override
                            public void onClick(View v)
                            {
                                Speaker = (ImageView)findViewById(R.id.ImageSpeaker);    
                                Speaker.setImageBitmap(mAudioImageArray[2]);
                                closeDialog.dismiss();
                                stop();
                                isMute = false;
                            }
                        });

            /////////////////////////////////////Navigation Button////////////////////////////
                        imageNext = new ImageButton(this);
                        InputStream toNextInput = mngr.open(toNextImage);
                        final Bitmap bitmaptoNext = BitmapFactory.decodeStream(toNextInput);
                        imageNext = (ImageButton)findViewById(R.id.ImageNext);
                        imageNext.setImageBitmap(bitmaptoNext);
                        imageNext.setOnClickListener(new View.OnClickListener() 
                        {
                            public void onClick(View v) 
                            {
                                stop();
                                Bitmap resizedBitmap = Bitmap.createScaledBitmap(bitmaptoNext, 54, 54, true);
                                imageNext.setImageBitmap(resizedBitmap);

                                Intent intent = new Intent(v.getContext(), Characteristic.class);

                                intent.putExtra("checkMute", "mute" );
                                intent.putExtra("languageSelection", languageSelected );
                                startActivity(intent);

                            }
                        });

private void play(Context context, String file) {

    try {
        if (IntroPlayer == null) 
        {
            this.IntroPlayer = new MediaPlayer();           
        }
        else
        {
            IntroPlayer.stop();
            IntroPlayer.reset();
        }

        AssetFileDescriptor afd = context.getAssets().openFd(file);
        IntroPlayer.setDataSource(
                afd.getFileDescriptor(),
                afd.getStartOffset(),
                afd.getLength()
            );
        afd.close();
        IntroPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        IntroPlayer.setOnPreparedListener(this);
        IntroPlayer.prepareAsync();

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    }

 @Override
     public void onSwipe(int direction) {
      Intent intent = new Intent();

  switch (direction) {
  case SimpleGestureFilter.SWIPE_RIGHT :
      if (IntroPlayer != null) 
        {
             stop();  
        }
      intent.setClass(this,LocalizationAppActivity.class);
         intent.putExtra("languageSelection", languageSelected );
         break;

  case SimpleGestureFilter.SWIPE_LEFT :  
    if (IntroPlayer != null) 
    {
        stop();   
    }
      intent.setClass(this,Characteristic.class);
      intent.putExtra("languageSelection", languageSelected );

      break;

  }
   startActivity(intent);

 }

@Override
public void onPrepared(MediaPlayer mp) {
    // TODO Auto-generated method stub
     mp.start();
}

private void stop() {
    IntroPlayer.stop();
}

private void mute() {
    am.setStreamMute(AudioManager.STREAM_MUSIC, true);
}

public void unmute() {
      int maxVolume = am.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
      am.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);
      am.setStreamMute(AudioManager.STREAM_MUSIC, false);
    }

@Override
public void onDestroy() {
     super.onDestroy();
     stop();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:57:48.703

拿`public static AudioManager am`; 在一个中`Global.java`，您可以使用和设置属性尝试它将为您工作。

```
private void mute() {
    Global.am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    am.setStreamMute(AudioManager.STREAM_MUSIC, true);
}

public void unmute() {
      Global.am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
      am.setStreamMute(AudioManager.STREAM_MUSIC, false);
    } 
```

# php - 每个客户端多个数据库与一个数据库的实用性

> ID：10920642
> 
> 赞同：1
> 
> 时间：2012-06-06T19:14:04.960
> 
> 标签：php, mysql

在涵盖所有要点的同时，我将尝试使其尽可能简短——我目前是一名 PHP/MySQL 开发人员。我和朋友有一个移动应用程序的想法，我们将开始开发它。

我并不是说它会很棒，但如果它流行起来，我们将拥有大量数据。

例如，由于没有更好的术语，我们会有“客户”，他们会列出 100-250,000 种“产品”。假设最好，我们可以有数百个客户。

客户端将通过 Web 界面编辑数据，移动界面只需调用 Web 服务器并返回 JSON（可能）。

我是一个低级的 cms 开发者，所以我不知道如何处理这个问题。我的问题或多或少是关于性能的。我在 MySQL 表中见过的最多的是 340k，而且它已经有点慢（当然它也不是最好的服务器）。

我只是无法理解一个有 4000 万行（并且有可能持续增长）运行良好的表。

我的计划是有一个“核心”数据库，其中包含“真实”数据库的名称，因此用户会进来并尝试访问客户的数据，它会转到核心数据库并确定要获取哪个数据库来自的信息。我不关心数据分离或数据安全（这不是私人信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:34:32.023

是的，这是可能的，我的公司就是这样做的。不过，我当然不会说它很聪明。我们有一个 SAAS 营销自动化系统。一些客户的数据库有超过 100 万条记录。我们处理第二个“通用”数据库，它有一个“履行”表，用于跟踪超过 400 万条记录的电子邮件、信件、电话等，以及许多其他非常大的共享表。通过适当的索引、优化、维护单独的仅 DB 服务器，以及可能的集群（我们还不需要这样做），您可以处理大量数据......在许多情况下，那些认为可以只处理几十万条唱片，以竞品为生。如果您仍然怀疑它是否有效，请考虑根据 MySQL 的集群指标，一个 8 服务器集群可以处理 2 个。每秒 500 万次更新。一点都不寒碜。。。。。。

使用两个数据库的问题在于处理多个连接。难吗？不，不是。您可以根据所需的数据库创建不同的对象并引用连接类。在我们的例子中，我们点击主数据库的公司类来推断客户端数据库名称，然后基于该名称构建第二个连接。但是，当您来回处理这些连接时，您可能会遇到需要额外调试的错误。这不仅仅是“我的查询有效吗？” 但是“我真的得到了正确的数据库连接吗？” 在我们的例子中，丢弃的会话会导致各种 PDO 错误触发，因为系统不再能够跟踪要访问的客户端数据库。另外，从可维护性的角度来看，它' 一个可怕的过程，试图将表结构更新推送到 100 个不同的实时数据库。是的，它可以自动化。但是一个失误，你已经击倒了很多人，并为自己做了很多额外的工作。现在，计算处理连接和推送更新所需的额外开发和测试......这将是你衡量它是否值得的标准。

我的推荐？找到一个允许您将两台机器放在同一个本地网络上的主机。我们选择了 Linode，但您使用的是谁无关紧要。从您的专用数据库服务器开始，提前计划在必要时进行集群。将所有内容保存在一个数据库中，认真地索引和优化。最后，找到一个非常好的数据库人并善待他。有了这么多数据，优秀的 DBA 将是必须的。

# android - Android 2.3：如何从 SCO 切换到 A2DP 以获得功能强大的蓝牙扬声器？

> ID：10920643
> 
> 赞同：1
> 
> 时间：2012-06-06T19:14:08.610
> 
> 标签：android, audio, bluetooth, android-2.3-gingerbread

现在我可以让应用程序开始通过 A2DP 播放音频并成功切换到 SCO，但是当我尝试切换回来时，它会通过手机的扬声器播放。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    layout = (RelativeLayout) findViewById(R.id.layout);
    text = (TextView) findViewById(R.id.editText1);
    scoSwitch = (ToggleButton) findViewById(R.id.switch1);
    try {
        mp1 = MediaPlayer.create(this, R.raw.jc_cm);
        mp2 = MediaPlayer.create(this, R.raw.rp);
        amanager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        //amanager.setBluetoothA2dpOn(true);
                } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void onSCOswitch(View view){
    if (scoSwitch.isChecked()){
        amanager.setBluetoothScoOn(true);
        amanager.startBluetoothSco();
        Log.d("Bluetooth", "SCO on");
        amanager.setMode(AudioManager.MODE_IN_COMMUNICATION);
    }
    else{
        amanager.stopBluetoothSco();
        amanager.setBluetoothScoOn(false);
        amanager.setBluetoothA2dpOn(true);
        Log.d("Bluetooth", "SCO off");
        amanager.setMode(AudioManager.MODE_NORMAL);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:05:48.883

我只能通过建议您尽量远离 BT 音频路径路由来提供帮助。这是一个非常难以解决的问题，这就是为什么很少有应用程序（除了电话应用程序本身）路由 BT 音频路径，而少数尝试它的应用程序可能都有一些不良结果。

根据[http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothA2dpOn(boolean](http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothA2dpOn(boolean) )：

> 公共无效 setBluetoothA2dpOn（布尔值）
> 
> 此方法已弃用。不使用。

# java - GSON 可以使用 LinkedList 作为 java.util.List 接口的默认反序列化吗？

> ID：10920644
> 
> 赞同：1
> 
> 时间：2012-06-06T19:14:13.523
> 
> 标签：java, arraylist, linked-list, deserialization, gson

当 GSON 反序列化具有 java.util.List 类型的类中的字段时，它似乎倾向于使用 ArrayList 作为要使用的列表实现。有没有办法默认它使用 LinkedList （除了实际将其定义为字段的类型）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-29T11:04:54.670

简短的回答是不！
但你仍然可以使用这种结构：

```
LinkedList<Foo> list = new LinkedList<>(
    (ArrayList<Foo>) new Gson().fromJson(
        gsonString, new TypeToken<List<Foo>>(){}.getType()
    )
); 
```

# matlab - UTC 时间到字符串转换

> ID：10920646
> 
> 赞同：3
> 
> 时间：2012-06-06T19:14:16.877
> 
> 标签：matlab, datetime, time, utc

我正在寻找帮助使用 MATLAB 从 UTC 时间到字符串的时间转换。

我正在尝试从 2010 年 10 月末收集的数据文件中提取时间。数据文件说它以 UTC 时间报告，并且该字段是以毫秒为单位的整数字符串值，大约为 3.02e11。我想将其转换为字符串，但遇到了一些麻烦。

我发现这些单位绝对是毫秒，所以我将其转换为天数以与 datenum 格式兼容。

如果数据是在 10 月底（比如 2010 年 10 月 31 日）收集的，那么我可以猜测我可能会得到什么样的数字。我认为 2001 年 1 月 1 日将是一个很好的时期，并计算了我可能得到的数字（以天为单位）：

```
suspectedDate = datenum('October 31, 2010')
suspectedEpoch = datenum('January 1, 2001')

suspectedTimeInDays = suspectedDate - suspectedEpoch 
```

结果为*3590*。

但是，我的实际时间（以天为单位）得出以下代码

```
actualTime = 3.02e11
actualTimeInDays = 3.02e11/1000/24/3600 
```

作为*3495.4*。

这令人不安，因为差异仅为 94.6——不是一整年。这意味着文件的文档有误，或者时代接近 2001 年 4 月 1 日至 5 日：

```
calculatedEpoch = suspectedDate - actualTimeInDays
calculatedEpochStr = datestr(calculatedEpoch) 
```

或者，如果纪元是 2001 年 1 月 1 日，那么文件中的实际日期是从 7 月底开始。

```
ifEpochIsJanuaryDate = suspectedEpoch + actualTimeInDays
ifEpochIsJanuaryDateStr = datestr(ifEpochIsJanuaryDate) 
```

这是一种已知的 UTC 格式吗？任何人都可以就如何从 3.02e11 震级数获得 10 月日期提供建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:06:52.747

今天的 Unix 时间大约是 13e11，自 1970 年以来以毫秒为单位。

如果你的时间是~3e11，那么它可能是从 2000 年开始的。

```
>> time_unix = 1339116554872; % example time
>> time_reference = datenum('1970', 'yyyy'); 
>> time_matlab = time_reference + time_unix / 8.64e7;
>> time_matlab_string = datestr(time_matlab, 'yyyymmdd HH:MM:SS.FFF')

    time_matlab_string =

    20120608 00:49:14.872 
```

笔记：

1）如果你的时间是2000年以后，把1970年改成2000年；

2）见matlab的时间定义。

3) 8.64e7 是一天中的毫秒数。

4) Matlab 不应用任何时区偏移，因此结果是相同的 UTC 时间。

5）后向变换示例：

```
>> matlab_time = now;
>> unix_time = round(8.64e7 * (matlab_time - datenum('1970', 'yyyy')))

unix_time =

             1339118367664 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:01:36.557

你不能只是编造你自己的时代。也`datenum`可以在几天内返回东西。因此，您与做数学的亲密关系只是一个巧合。

结果是

```
>> datenum('Jan-1-0000')

ans =

     1 
```

和

```
>> datenum('Jan-1-0001')

ans =

   367 
```

因此，自 0000 年 1 月 1 日以来，Matlab 应该会在几天内返回东西。（不是错字）

但是，我会仔细查看这个`3.02e11`数字并找出它的确切含义。我很确定它不是标准的 Unix UTC，它应该是[自 January 1, 1970 以来的](http://www.epochconverter.com/)[*秒数*](http://www.epochconverter.com/)。它太大了。它接近格林威治标准时间：11540 年 1 月 1 日星期一 08:53:20 UTC。

# c# - 无法在画布中绘制形状

> ID：10920649
> 
> 赞同：1
> 
> 时间：2012-06-06T19:14:21.957
> 
> 标签：c#, wpf, xaml

我在 xaml 中有一个画布，定义如下。但是，在其中添加一个矩形不会显示任何内容。

```
<lib:DrawingCanvas x:Name="drawingCanvas" Background="White" AllowDrop="True">
    <Rectangle Margin="20,20,20,20"  Fill="Black" Stroke="White" Width="100" Height="100">
    </Rectangle>
</lib:DrawingCanvas> 
```

你能在这里给我一些提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:21:23.933

你没有使用 Canvas，你使用的是“DrawingCanvas”，所以我不能说任何差异。但假设它来自 Canvas：

您需要设置矩形的附加属性。除了*Canvas.Top****或****Canvas.Bottom*之外，这些是*Canvas.Left**或**Canvas.Right*。

 **例如：

```
<Rectangle Canvas.Left="50" Canvas.Top="100" Width="100" Height="100" Fill="Black" /> 
```**

# mongodb - 从 mongodb 集合中获取最新记录

> ID：10920651
> 
> 赞同：124
> 
> 时间：2012-06-06T19:14:48.407
> 
> 标签：mongodb, mongodb-query

我想知道集合中的最新记录。怎么做？

注意：我知道以下命令行查询有效：

```
1\. db.test.find().sort({"idate":-1}).limit(1).forEach(printjson);
2\. db.test.find().skip(db.test.count()-1).forEach(printjson) 
```

其中 idate 添加了时间戳。

问题是收集时间更长，是取回数据的时间，而我的“测试”收集真的非常庞大。我需要一个具有恒定时间响应的查询。

如果有更好的 mongodb 命令行查询，请告诉我。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2014-08-31T00:53:22.400

这是对先前答案的重新哈希，但它更有可能在不同的 mongodb 版本上工作。

```
db.collection.find().limit(1).sort({$natural:-1}) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-02-02T21:28:31.143

这将为您提供最后一份文件`collection`

```
db.collectionName.findOne({}, {sort:{$natural:-1}}) 
```

`$natural:-1`表示与插入记录的顺序相反的顺序。

**编辑**：对于所有反对者，上面是 Mongoose 语法，mongo CLI 语法是：`db.collectionName.find({}).sort({$natural:-1}).limit(1)`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-06T20:24:09.327

> 我需要一个具有恒定时间响应的查询

默认情况下，MongoDB 中的索引是 B 树。搜索 B-Tree 是一个 O(logN) 操作，因此即使`find({_id:...})`不会提供恒定时间，O(1) 响应。

也就是说，`_id`如果您使用`ObjectId`的是您的 ID，您也可以按 排序。[详情请看这里](https://stackoverflow.com/questions/5125521/)。当然，即使这样也只好到最后一秒。

你可以诉诸“写两次”。一次写入主集合，然后再次写入“最后更新”集合。如果没有事务，这不会是完美的，但是“最后更新”集合中只有一个项目，它总是很快的。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-11-26T03:35:32.417

从 MongoDB 集合中获取最后一项的另一种方法（不要介意这些示例）：

```
> db.collection.find().sort({'_id':-1}).limit(1) 
```

**法线投影**

```
> db.Sports.find()
{ "_id" : ObjectId("5bfb5f82dea65504b456ab12"), "Type" : "NFL", "Head" : "Patriots Won SuperBowl 2017", "Body" : "Again, the Pats won the Super Bowl." }
{ "_id" : ObjectId("5bfb6011dea65504b456ab13"), "Type" : "World Cup 2018", "Head" : "Brazil Qualified for Round of 16", "Body" : "The Brazilians are happy today, due to the qualification of the Brazilian Team for the Round of 16 for the World Cup 2018." }
{ "_id" : ObjectId("5bfb60b1dea65504b456ab14"), "Type" : "F1", "Head" : "Ferrari Lost Championship", "Body" : "By two positions, Ferrari loses the F1 Championship, leaving the Italians in tears." } 
```

**排序投影（_id：逆序）**

```
> db.Sports.find().sort({'_id':-1})
{ "_id" : ObjectId("5bfb60b1dea65504b456ab14"), "Type" : "F1", "Head" : "Ferrari Lost Championship", "Body" : "By two positions, Ferrari loses the F1 Championship, leaving the Italians in tears." }
{ "_id" : ObjectId("5bfb6011dea65504b456ab13"), "Type" : "World Cup 2018", "Head" : "Brazil Qualified for Round of 16", "Body" : "The Brazilians are happy today, due to the qualification of the Brazilian Team for the Round of 16 for the World Cup 2018." }
{ "_id" : ObjectId("5bfb5f82dea65504b456ab12"), "Type" : "NFL", "Head" : "Patriots Won SuperBowl 2018", "Body" : "Again, the Pats won the Super Bowl" } 
```

`sort({'_id':-1})``_id`, 根据它们的 s定义所有文档的降序投影。

**排序投影（_id：reverse order）：**从集合中获取最新（最后）文档。

```
> db.Sports.find().sort({'_id':-1}).limit(1)
{ "_id" : ObjectId("5bfb60b1dea65504b456ab14"), "Type" : "F1", "Head" : "Ferrari Lost Championship", "Body" : "By two positions, Ferrari loses the F1 Championship, leaving the Italians in tears." } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-07T07:45:19.027

我的解决方案：

`db.collection("name of collection").find({}, {limit: 1}).sort({$natural: -1})`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-13T04:01:24.020

php7.1 mongoDB：
`$data = $collection->findOne([],['sort' => ['_id' => -1],'projection' => ['_id' => 1]]);`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-07T14:46:11.843

这是如何从“foo”集合中获取所有 MongoDB 文档的**最后一条**记录。（更改 foo、x、y 等）

```
db.foo.aggregate([{$sort:{ x : 1, date : 1 } },{$group: { _id: "$x" ,y: {$last:"$y"},yz: {$last:"$yz"},date: { $last : "$date" }}} ],{   allowDiskUse:true  }) 
```

您可以从组中添加或删除

帮助文章：[https ://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group](https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group)

[https://docs.mongodb.com/manual/reference/operator/aggregation/last/](https://docs.mongodb.com/manual/reference/operator/aggregation/last/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-28T08:59:50.387

如果您在文档中使用自动生成的 Mongo 对象 ID，它会在其中包含时间戳作为前 4 个字节，使用该时间戳可以找到插入到集合中的最新文档。我知道这是一个老问题，但如果有人仍然在这里寻找另一种选择。

```
db.collectionName.aggregate(
[{$group: {_id: null, latestDocId: { $max: "$_id"}}}, {$project: {_id: 0, latestDocId: 1}}]) 
```

上面的查询将为插入到集合中的最新文档提供*_id*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-12T03:24:35.083

Mongo CLI 语法：

```
db.collectionName.find({}).sort({$natural:-1}).limit(1) 
```

# asp.net - 使用 Linq 左连接多个表

> ID：10920653
> 
> 赞同：9
> 
> 时间：2012-06-06T19:14:51.713
> 
> 标签：asp.net, linq

我知道 Linq 的左连接是这样的：

```
var q=from e in db.Employes　　　 
      join o in db.Orders on e equals o.Emoloyee into ords　　
      from on in ords.DefautIfEmpty()
      select new
      {　　　　　　
         e.FirstName,　　　　　
         e.LastName　　　
　     }; 
```

那么多重连接呢？这是我的代码

```
var personalInfoQuery = from t in crnnsupContext.Tombstones
                        join p in crnnsupContext.ProvStates on t.ProvinceState equals p.ProvinceStateID 
                        join n in crnnsupContext.NursingSchools on t.NursingSchool equals n.SchoolID 
                        join i in crnnsupContext.InitialEducations on t.InitialEducation equals SqlFunctions.StringConvert((double)i.InitalEducationID, 1)
                        join g in crnnsupContext.tbl_GraduatedProvCountry on t.GradPovCountry equals g.id
                        where t.RegNumber == _username
                        select new CPersonalInfo
                        {
                            ProvState = p,
                            Tombstone = t,
                            NursingSchool = n,
                            InitialEducation = i,
                            GraduatedProvCountry = g,
                         }; 
```

每个连接表都可以有“空”字段。有什么可以帮助我的，谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T20:18:25.453

多连接应该看起来非常相似 - 它变得非常冗长，但我会尝试一下。您可能还需要在最后`where`一行进行一些空值检查。

```
var personalInfoQuery = from t in crnnsupContext.Tombstones
                        join p in crnnsupContext.ProvStates on t.ProvinceState equals p.ProvinceStateID into group1
                        from g1 ini group1.DefaultIfEmpty()
                        join n in crnnsupContext.NursingSchools on g1.NursingSchool equals n.SchoolID into group2
                        from g2 in group2.DefaultIfEmpty()
                        join i in crnnsupContext.InitialEducations on g2.InitialEducation equals SqlFunctions.StringConvert((double)i.InitalEducationID, 1) into group3
                        from g3 in group3.DefaultIfEmpty()
                        join g in crnnsupContext.tbl_GraduatedProvCountry on g3.GradPovCountry equals g.id into group4
                        from g4 in group4.DefaultIfEmpty()
                        where g4 == null || g4.RegNumber == _username
                        select new CPersonalInfo
                        {
                            ProvState = p,
                            Tombstone = t,
                            NursingSchool = n,
                            InitialEducation = i,
                            GraduatedProvCountry = g,
                         }; 
```

似乎还有另一种进行外部连接的方法，但是没有东西可以测试它我什至不确定在这种情况下是否可以使用它 - 如果您有兴趣，请查看这篇文章的答案： [outer加入linq](https://stackoverflow.com/questions/10773362/outer-join-in-linq)

# c# - 用事件检查文本框中的字符串？

> ID：10920655
> 
> 赞同：0
> 
> 时间：2012-06-06T19:14:56.330
> 
> 标签：c#, winforms

我想知道在用户单击“确定”按钮之前，是否有一种方法可以使用事件来检查 Windows 窗体中文本框中的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:16:31.123

您可以使用 KeyDown、KeyPress 或 KeyUp 事件。

可以在此处找到完整的事件列表：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.textbox_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox_events.aspx)

这都是按字母顺序排列的，所以向下滚动到 Key....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:24:39.847

更好的方法是使用文本框的验证事件。这样，当用户尝试离开文本框时，您的验证例程就会运行。

# c# - C#：读取 XML 属性

> ID：10920656
> 
> 赞同：4
> 
> 时间：2012-06-06T19:14:57.020
> 
> 标签：c#, xml, visual-studio-2005, c#-2.0

### 使用 C#2.0 和 VIsualStudio2005

我正在尝试从如下 XML 文件访问“MonitorResponseRecord”中的“DisplayName”：

```
 <Magellan xsi:schemaLocation="http://tempuri.org/XMLSchema.xsd ..\Schema\Configuration.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
      <SchemaVersion>1.0</SchemaVersion>
          <MonitorScope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="CleanStationChemicalManifoldFeed5" xmlns="http://tempuri.org/XMLSchema.xsd">
            <PersonalSafety>
              <MonitorResponseRecord Enabled="true" DisplayName="ChemicalManifoldFeed5ControllerFault">
                <ExpressionMonitor>
                  <Expression>(ChemicalManifold.Feed5.DispenseValve = Open) and ((ChemicalManifold.Feed5.ViolatedRegion = HighProcess) or (ChemicalManifold.Feed5.ViolatedRegion = LowProcess) or (ChemicalManifold.Feed5.ViolatedRegion = Minimum))</Expression>
                  <TestInterval>0.1</TestInterval>
                  <MinimumTimeBetweenResponses>5</MinimumTimeBetweenResponses>
                </ExpressionMonitor>
                <Response>
                  <PostAlarm>
                    <AlarmName>ChemicalManifold_Feed5_ControllerFault</AlarmName>
                    <Parameter1 />
                    <Parameter2>Alarm Region = {ChemicalManifold.Feed5.ViolatedRegion}</Parameter2>
                    <Parameter3>{RecipeName}-{StepName}</Parameter3>
                    <Parameter4>FlowSetpoint = {ChemicalManifold.Feed5.Setpoint}-LPM, ActualFlow = {ChemicalManifold.Feed5.FlowMeter}-LPM</Parameter4>
                  </PostAlarm>
                  <ResponseEvent>
                    <TargetResource />
                    <Event>PA</Event>
                    <Reason>ChemicalSupply</Reason>
                  </ResponseEvent>
                </Response>
              </MonitorResponseRecord>
            </PersonalSafety>
            <PersonalSafety>
              <MonitorResponseRecord Enabled="true" DisplayName = "PressureValveFailure">
           ...
            ...                
             ...and soon 
```

我当前的 C# 尝试如下，但是当我尝试时它总是挂断`XmlDocument.Load("");`

```
 XmlDocument doc = new XmlDocument();
                doc.Load("../UMC0009.Configuration.Root.xml");
                string attrVal = doc.SelectSingleNode("MonitorResponseRecord/@DisplayName").Value; 
```

BUUUUT 不起作用：/ 有什么帮助吗？

### 更新：

我收到的异常如下，发生在 doc.Load("...") 行：

`{"Namespace Manager or XsltContext needed. This query has a prefix, variable, or user-defined function."} System.Exception {System.Xml.XPath.XPathException}`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:05:53.327

您的 XPath 查询将与文档根目录相关：

```
doc.SelectSingleNode("MonitorResponseRecord/@DisplayName") 
```

要使其在文档中的任何位置搜索，请使用双斜杠为其添加前缀：

```
doc.SelectSingleNode("//MonitorResponseRecord/@DisplayName") 
```

如果这仍然不起作用，我会在删除两个根节点上的所有命名空间声明后尝试上面的示例。

否则，通过命名空间声明，您可能会发现需要定义 XML 命名空间映射并在 XPath 中使用前缀，例如：

```
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("x", "http://tempuri.org/XMLSchema.xsd");

doc.SelectSingleNode("//x:MonitorResponseRecord/@DisplayName") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:15:47.477

关于什么：

```
 XmlDocument doc = new XmlDocument();
    doc.Load("UMC0009.Configuration.Root.xml");

    XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
    nsmgr.AddNamespace("ns", "http://tempuri.org/XMLSchema.xsd");
    string attrVal = doc.SelectSingleNode("//ns:MonitorResponseRecord/@DisplayName", nsmgr).Value; 
```

使用命名空间管理器，指定命名空间 URI 并在 XPath 中使用它。这个对我有用。

# html - IE 中旋转 div 的样式和 js 事件问题？

> ID：10920663
> 
> 赞同：1
> 
> 时间：2012-06-06T19:15:29.023
> 
> 标签：html, css, internet-explorer, text-rotation

我旋转了一个 div，它在 Chrome 和 Firefox 中看起来很好并且功能正常。但是在 IE (v9.0.8112.16421) 中，样式和单击事件似乎只应用于 div 的区域，该区域与 div 在旋转之前的位置相交。

请注意，在我的示例代码中，当您将鼠标悬停时，光标仅显示在 div 顶部附近。另请注意，当您单击 div 的底部时没有任何反应，但是当您单击顶部附近时会触发该事件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <style>
        #myExpander
        {
            position:absolute;
            padding: 5px;
            top: 100px;
            cursor: pointer;
            border: 1px solid black;
            -webkit-transform-origin: 0 0;
            -moz-transform-origin:    0 0;
            -ms-transform-origin:     0 0;
            -webkit-transform: rotate(-90deg); 
            -moz-transform: rotate(-90deg); 
            -ms-transform: rotate(-90deg);
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("#myExpander").click(function () {
                alert("Clicked");
            });
        });
    </script>
</head>
<body>
    <div id="myExpander">
        click me
    </div>
</body>
</html> 
```

任何人都可以阐明我所缺少的东西吗？

**编辑（解决方案）：**这是根据下面的 Posicoln[答案](https://stackoverflow.com/a/10924436/29043)的最终解决方案。请注意 -X-transform-origin 样式已更改，因为此解决方案在 Chrome 和 FF 中显示不同。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <style>
        #myExpanderOuter
        {
            position:absolute;
            padding: 5px;
            top: 100px;
            height: 80px;
            width: 31px;
            margin: 0 0 0 0;
            padding: 0 0 0 0;
            cursor: pointer;
            border: 1px solid black;
        }

        #myExpanderInner
        {
            height: 30px;
            width: 79px;
            text-align: center;
        }

        .rotated270degrees
        {
            -webkit-transform-origin: 40 40;
            -moz-transform-origin:    40 40;
            -ms-transform-origin:     0 0;
            -webkit-transform: rotate(-90deg); 
            -moz-transform: rotate(-90deg); 
            -ms-transform: rotate(-90deg);
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("#myExpanderOuter").click(function () {
                alert("Clicked");
            });
        });
    </script>
</head>
<body>
    <div id="myExpanderOuter">
        <div id="myExpanderInner" class="rotated270degrees">
            Click me
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:12:21.120

一种解决方案可能是将旋转的 div 放在具有旋转尺寸的普通 div 中并旋转它。所以

```
<div id="myExpander">
click me
</div> 
```

会转向

```
<div id="myExpanderContainer">
<div id="myExpander">
    click me
</div>
</div> 
```

你可以添加到你的 CSS

```
#myExpanderContainer
 {
  width: ...px; //~12px depends on browser settings, a value which could be inherited
  height: ...px; //depends on length of link, 
  cursor: pointer;
 } 
```

用你的脚本作为

```
$(document).ready(function () {
     $("#myExpanderContainer").click(function () {
alert("Clicked");
       });
    }); 
```

但是，这需要 javascript 为不同长度的文本设置尺寸，如果链接正在更改，或者如果它们是静态的，那就没问题了。这可能不是最优雅的解决方案，但它会起作用

# javascript - 使用触摸事件在 HTML5 画布上绘制正方形

> ID：10920665
> 
> 赞同：4
> 
> 时间：2012-06-06T19:15:32.607
> 
> 标签：javascript, html, canvas, touch

我有一个问题，我正在尝试使用触摸事件在画布上绘制一个正方形，但它不起作用，有人可以帮我找出原因吗？

* * *

到目前为止，这是我的代码：

JAVASCRIPT：

```
// "Draw Rectangle" Button
function rect(){
var canvas = document.getElementById('canvasSignature'), ctx = canvas.getContext('2d'), rect = {}, drag = false;

function init() {
  canvas.addEventListener("touchstart", touchHandler, false);
  canvas.addEventListener("touchmove", touchHandler, false);
  canvas.addEventListener("touchend", touchHandler, false);
}

function touchHandler(event) {
  if (event.targetTouches.length == 1) { //one finger touche
    var touch = event.targetTouches[0];

    if (event.type == "touchstart") {
      rect.startX = touch.pageX;
      rect.startY = touch.pageY;
      drag = true;
    } else if (event.type == "touchmove") {
      if (drag) {
        rect.w = touch.pageX - rect.startX;
        rect.h = touch.pageY - rect.startY ;
        draw();
      }
    } else if (event.type == "touchend" || event.type == "touchcancel") {
      drag = false;
    }
  }
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
}

init();
} 
```

* * *

HTML5：

```
 <div id="canvasDiv">
    <canvas id="canvasSignature" width="580px" height="788px" style="border:2px solid #000; background: #FFF;"></canvas>
</div>

<div id="rect">  
    <p><button onclick="rect();">Rectangle</button></p>
</div> 
```

* * *

再次感谢，沃登克里夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:12:00.413

使用模拟触摸事件在 Chrome 中测试适用于这个[jsFiddle](http://jsfiddle.net/thomas_peklak/A4R82/)问题似乎是你绑定点击事件的方式。我刚刚使用了 jQuery。

或者没有 jQuery：[只是一个普通的 addEventListener](http://jsfiddle.net/thomas_peklak/A4R82/2/)

# php - PHP PDO 自定义类返回一个对象而不是它应该返回的对象

> ID：10920666
> 
> 赞同：1
> 
> 时间：2012-06-06T19:15:34.290
> 
> 标签：php, mysql, database, pdo

所以我创建了一个数据库类来处理我所有的数据库请求。一切都通过构造函数，它应该返回值。

课是这样的

```
<?php

class Database {

    /**
     * This array holds all of the configuration settings for the database
     * @var array
     */
    private $config = array(
        'username'  =>  '',
        'password'  =>  '',
        'host'      =>  '',
        'database'  =>  ''
    );

    /**
     * Holds the parameters passed to the class
     * @var mixed
     */
    private $parameters;

    /**
     * Database Handler
     * @var [type]
     */
    private $DBH;

    /**
     * Class constructor
     * @param [type] $action     [description]
     * @param [type] $parameters [description]
     */
    public function __construct($action, $parameters){
        $this->parameters = $parameters;

        $this->DBH = new PDO("mysql:host=".$this->config['host'].";dbname=".$this->config['database'], $this->config['username'], $this->config['password']); 

        return $this->$action();
    }

    private function query(){
        $STH = $this->DBH->prepare($this->parameters);
        $STH->execute();
        $result = $STH->fetchColumn();
        echo "<br><br>RESULT:".$result."<br><br><br>";
        echo "<br><br>RESULT:".empty($result)."<br><br><br>";

        return (empty($result)) ? FALSE : TRUE;
    }
} 
```

我删除了所有问题的功能。它旨在返回真或假。相反，我调用时的返回值`$result = new Database('query', $query);`是一个包含大量数据的对象

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:20:33.040

PHP 会忽略您在`__construct`. 如果您创建一个新对象，`new`则返回新对象，而不是`return`in`__construct`所说的。

要实现您想要的，您必须创建一个新函数，该函数在构造函数之外为您执行操作 - 就像这样：

```
class Database {
    // your code...

    public function __construct($parameters) {
        $this->parameters = $parameters;

        $this->DBH = new PDO("mysql:host=".$this->config['host'].
            ";dbname=".$this->config['database'],
            $this->config['username'],
            $this->config['password']); 
    }

    public function perform($action) {
        return $this->$action();
    }

    // rest of your code...
}

// usage:
$db = new Database($query);
$result = $db->perform('query'); // result should be a boolean. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:23:18.537

`__construct`应该返回新创建的对象。无法覆盖此行为。见[用法](http://php.net/manual/en/language.oop5.decon.php)。

顺便说一句，当涉及操作员时，这是大多数 OOP 语言的行为`new`。

# asp.net-mvc - SessionAuthenticationModule 有时不会反序列化来自 cookie 的所有声明

> ID：10920669
> 
> 赞同：0
> 
> 时间：2012-06-06T19:15:40.683
> 
> 标签：asp.net-mvc, wif, claims-based-identity, claims

我在 MVC 应用程序和自定义逻辑中使用 WIF 和基于声明的安全性，在验证后使用适当的声明创建 ClaimsPrincipal。我将一些标准声明（例如角色和名称）分配给委托人，但也会在适用的情况下分配自定义声明。

例如，我使用 URI 在标准化角色和名称声明之后建模了我的自定义声明

新声明（“http://schemas.acme.com/2012/04/identity/claims/create”、“http://schemas.acme.com/2012/04/identity/resources/customer”）

一切都运作良好。我使用 SessionAuthenticationModule 将用户会话存储在 cookie 中，并在每次请求时对其进行补充。

我今天注意到，在有人使用相同的用户类型登录后，我的自定义声明没有从 cookie 中反序列化。标准声明（名称/角色）存在，但自定义声明不存在。

有没有其他人见过这个或知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:12:54.470

原来我正在添加通过引用消失的声明。我有一个预定义了静态声明的类，我会根据需要添加到 ClaimsPrincipal 中。我以这种方式添加的任何声明后来在该类型的另一个用户登录时被删除。我的解决方案是将静态属性更改为 KeyValuePairs 并为每个用户创建新声明。

# sql-server - 如何处理 SQL Server 中列名中的空格？

> ID：10920671
> 
> 赞同：25
> 
> 时间：2012-06-06T19:15:53.507
> 
> 标签：sql-server, database

假设我想使用这样的代码：

```
select 'Response Status Code', 'Client Response Status Code' 
from TC_Sessions (NOLOCK)
WHERE StartDate BETWEEN '05-15-2012' AND '06-01-2012'
AND SupplyID = 3367 
```

您如何在 SQL Server 中执行此操作？

谢谢你！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-06T19:22:52.910

```
select [Response Status Code], [Client Response Status Code]
from TC_Sessions (NOLOCK) 
WHERE StartDate BETWEEN '05-15-2012' AND '06-01-2012' 
AND SupplyID = 3367 
```

将名称括在方括号中。

但是，如果可能，最好避免名称中的空格。它只会为你创造更多的工作......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-20T13:16:06.223

我了解创建带有空格的列的必要性，特别是对于用户将与之交互的报告，将列标题标记为“Client_Response_Status_Code”并不是很友好。

当然，以前的答案在技术上都是正确的，但是我建议不要在名称中创建带有空格的列，而是创建视图并在那里更改列名......

例如：

```
create view TC_Sessions_Report as
select response_status_code AS [Response State Code], 
       client_response_status_code as [Client Response Status Code] 
```

...

这样您就不必在代码中的任何地方处理那些“友好”的列名，但是在您确实需要使用友好的列名的地方，您可以使用视图来代替......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-06T19:22:57.017

```
select
   [Response Status Code],
   [Client Response Status Code] 
from TC_Sessions (NOLOCK)
WHERE StartDate BETWEEN '05-15-2012' AND '06-01-2012'
AND SupplyID = 3367 
```

这也适用于表名称，如果您的字段名称是保留字或类似名称，这也是一个很好的做法，例如`[Order]`或`[Month]`

更好的做法是完全避免这些......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T19:19:40.143

通常在sql中你不这样做。你做 response_status_code ，如果你必须使用空格，我会尝试用 \ 或使用 [Response Status Code] 或其他东西来转义它们

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T19:23:03.310

您可以使用带有空格的列，但通常会避免使用。您需要将列括在括号中以选择它：

```
select [Response Status Code], [Client Response Status Code] 
```

# python - POST.getlist() 处理

> ID：10920672
> 
> 赞同：0
> 
> 时间：2012-06-06T19:15:56.260
> 
> 标签：python, django, forms

我在处理自定义表单数据时遇到问题...

```
<input type="text" name="client[]" value="client1" />
<input type="text" name="address[]" value="address1" />
<input type="text" name="post[]" value="post1" />
...
<input type="text" name="client[]" value="clientn" />
<input type="text" name="address[]" value="addressn" />
<input type="text" name="post[]" value="postn" /> 
```

...（这重复了几次...）

如果我做

```
request.POST.getlist('client[]')
request.POST.getlist('address[]')
request.POST.getlist('post[]') 
```

我明白了

```
{u'client:[client1,client2,clientn,...]}
{u'address:[address1,address2,addressn,...]}
{u'post:[post1,post2,postn,...]} 
```

但我需要这样的东西

```
{
    {0:{client1,address1,post1}}
    {1:{client2,address2,post2}}
    {2:{client3,address3,post3}}
    ...
} 
```

这样我就可以将这些数据保存到模型中。这可能是非常基本的，但我遇到了问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:55:42.727

首先，请删除`[]`字段名称。那是在 Django 中没有位置的 PHP 主义。

其次，如果您希望将相关项目组合在一起，则需要更改表单。您需要给每个字段一个单独的名称：

```
<input type="text" name="client_1" value="client1" />
<input type="text" name="address_1" value="address1" />
<input type="text" name="post_1" value="post1" />
...
<input type="text" name="client_n" value="clientn" />
<input type="text" name="address_n" value="addressn" />
<input type="text" name="post_n" value="postn" /> 
```

现在 request.POST 将为每个字段包含一个单独的条目，您可以遍历：

```
for i in range(1, n+1):
    client = request.POST['client_%s' % i]
    address = request.POST['address_%s' % i]
    post = request.POST['post_%s' % i]
    ... do something with these values ... 
```

现在，您可能想查看[模型 formsets](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#model-formsets)，它可以准确地生成这组表单并从 POST 创建相关对象。

# firefox - TinyMCE 未捕获空格键/空格键

> ID：10920675
> 
> 赞同：3
> 
> 时间：2012-06-06T19:16:05.517
> 
> 标签：firefox, tinymce, whitespace, space

我遇到了一个关于 tinyMCE 的奇怪问题，我无法在我的完整框架之外进行复制。整个事情只在 FireFox 中运行，因为它只支持 FF，因此问题仅限于 FF。

我使用 AJAX 调用来动态加载一个或多个 tinyMCE 实例。

但是，当输入/编辑文本时，空格键在文本编辑器中不起作用。所有其他键都有效，但空格键无效。相反，它会触发浏览器窗口本身的页面跳转。

此问题仅在 FF 12.0 下的 Windows 上出现

在 OSX 下的 FF 上一切正常。

我无法找出为什么会发生这种情况。也许有人可以提供建设性的意见。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:39:21.007

此问题是 TinyMCE 输入处理中的一个错误，并且在某些情况下会在将 TinyMCE 动态引入文档时发生。

# jquery - 从 div 中动态选择文本并使用 mouseenter 和 mouseleave 进行设置

> ID：10920676
> 
> 赞同：0
> 
> 时间：2012-06-06T19:16:05.983
> 
> 标签：jquery, html

我觉得我的逻辑是有道理的；不幸的是，它没有:(？
更新：[livecode](http://www.designobvio.us/ie/) **问题：**
*如何在 mouseenter 上抓取`$(this).attr.('title')`并将该文本设置为`('HGROUP h1')`'s 文本？*

**jQuery**

```
$("div.box").on('mouseenter', function () { //select the box create mouseenter function
    var headerText = $(this).attr('title'); //get selected title and set to headerText
    $('HGROUP h1').text(headerText); //set hgroupd h1 text to headerText
});

$("div.box").on('mouseleave', function () { //select the box create mouseleave function
    $('HGROUP h1').text('DESIGNOBVIO.US'); //set the orginal text back in place on mouseleave
}); 
```

**HTML**

```
<div class="box">
<h1 title="can i haz it?2"></h1>
<div class="innerbox">
    <figure></figure>
    <ul class="categorySelect">
        <li class="misc"></li>
        <li class="print"></li>
        <li class="video"></li>
        <li class="web"></li>
    </ul>
</div> 
```

**Hgroup HTML**

```
<HGROUP>
 <h1>designobvio.us</h1>
 <h2>the colors duke, the colors!7</h2>
</HGROUP> 
```

任何关于我哪里出错的进一步解释都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:18:49.610

看起来你需要使用：

```
var headerText = $(this).find('h1:first').attr('title'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:19:07.613

改变这个：

```
var headerText = $(this).attr('title'); 
```

至：

```
var headerText = $(this).find('h1').attr('title'); 
```

您的代码正在尝试获取 div 而不是`<h1>`child 的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:22:55.093

您应该使用 find 来获取标题。

```
var headerText = $(this).find('h1').attr('title'); 
```

尝试这个 ：

```
 $("div.box").on('mouseenter', function () { 
 //select the box create mouseenter function
  var headerText = $(this).find('h1').attr('title'); 
  //get selected title and set to headerText
   console.log(headerText);
    $('HGROUP h1').text(headerText); //set hgroupd h1 text to headerText
 });

 $("div.box").on('mouseleave', function () { 
       //select the box create mouseleave function
     $('HGROUP h1').text('DESIGNOBVIO.US'); 
     //set the orginal text back in place on mouseleave
 });​ 
```

这是[演示](http://jsfiddle.net/9UfUy/)

# objective-c - iOS 相当于 MacOS NSAttributedString initWithRTF

> ID：10920678
> 
> 赞同：1
> 
> 时间：2012-06-06T19:16:22.013
> 
> 标签：objective-c, ios, macos, nsattributedstring

什么是 iOS 等效于 MacOS NSAttributedString initWithRTF ？

Application Kit 扩展了 Foundation 的 NSAttributedString 类，增加了对 RTF、RTFD 和 HTML（带或不带附件）、图形属性（包括字体和标尺属性）、绘制属性字符串的方法以及计算重要语言单位的方法的支持。

```
- (id)initWithRTF:(NSData *)rtfData documentAttributes:(NSDictionary **)docAttributes 
```

我需要在 iOS 应用程序中处理一小段 RTF 数据。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:37:54.523

iOS 中没有等价物。iOS版`NSAttributedString`只有CoreText需要的功能，CoreText本身也只有UI类需要的功能，不包括RTF处理。

据我所知，至少从 5.0 开始，`UIWebView`是处理 RTF 的唯一方法。请参阅[https://developer.apple.com/library/ios/#qa/qa1630/_index.html](https://developer.apple.com/library/ios/#qa/qa1630/_index.html)。这可能在 5.1 中发生了变化，因为 Apple 的其他一些应用程序现在似乎可以处理富文本（但话又说回来，这些应用程序可能刚刚从`UITextView`变为`UIWebView`……）。

* * *

`UIWebView`没有给您任何从 RTF 访问属性文本的方法，因为 Web 视图从不*构建*属性文本，而是构建 HTML 和 CSS。

好消息是这些 HTML 和 CSS 在 DOM 中可用。至少对于某些类型来说，这是不正确的——你所看到的只是一个不透明的包装器，它被 WebKit 中的一些你无法访问的魔术代码呈现——但 RTF 不是这些类型之一。

使用[Safari Web Inspector](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html#//apple_ref/doc/uid/TP40006515)，我在 iPhone 上打开了[一个示例 RTF 文件](http://thewalter.net/stef/software/rtfx/sample.rtf)，并查看了 DOM。它充满了这样的节点：

```
<span class="s2"><span class="bumpedFont16">m a test file. This is some </span></span>
<span class="s3"><span class="bumpedFont16">bold</span></span> 
```

…这些类是`<style>`在它们第一次使用的标记之前用内联标记定义的。

因此，如果遍历具有文本的节点，该文本就像一个属性字符范围（尽管如果你真的想要开始和结束索引，你需要自己计算它们......），它的计算样式大致就像一个属性字典。当然，“大致相似”不是“相同”；计算样式如下所示：

```
direction: ltr; display: inline; font-family: 'Times New Roman'; font-size: 22px;
font-weight: bold; height: auto; margin-bottom: 0px; margin-top: 0px;
padding-right: 0px; text-align: left; width: auto; 
```

所以，实际上与 NSAttributedString 不兼容，也没有那么好（当然，除非你的最终目标是创建 HTML）……但至少你可以使用一些东西。

# php - 测试 PHP 变量是否包含 Nowdoc 字符串

> ID：10920682
> 
> 赞同：0
> 
> 时间：2012-06-06T19:16:47.040
> 
> 标签：php

有没有办法判断 PHP 变量是否包含 nowdoc 字符串？

我最近发布了[这个](https://stackoverflow.com/questions/10918924/escaped-backslash-characters-in-php-single-quoted-strings)问题。

我的目标是完全按原样输出 PHP 字符串，我发现使用 nowdoc 字符串最接近 PHP 中的逐字字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:19:14.683

`Nowdoc`不是字符串类型，而是引用类型。无论您决定使用哪种引用类型，变量内容都是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:18:34.157

这不可能。字符串是字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T19:18:57.473

一旦将字符串分配给变量，PHP 就没有它是如何到达那里的历史记录。

# mysql - MySQL：如何像亚马逊一样通过“新品和畅销品”获取？

> ID：10920686
> 
> 赞同：0
> 
> 时间：2012-06-06T19:16:57.160
> 
> 标签：mysql, sorting

在 amazon.com 中，用户可以立即按“新品和畅销品”对产品进行排序。

我有一个“项目”表，其中包含每个项目的“上传日期”列和“视图”列。如何结合上传日期和浏览量按“新品和畅销品”对商品进行排序？

如何修改此查询以结合上传日期和视图以将项目获取为“新品和畅销品”？

```
select * from items order by uploaddate desc, views desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:55:03.020

我能想到的三种方法都可能是有效的方法。

1）将查询限制在最近 7 天（或者您定义“新”），并仅按视图排序。这只会向您显示新项目，但它是最简单的。

2) 添加一个字段，该字段对应于添加项目的几周前，并使用 CASE 语句确定。就像`SELECT CASE(WHEN DATEDIFF(CURDATE()-uploaddate) < 7 THEN 1 ELSE 0 END AS relative week`然后按周排序。

3）就像你建议的那样，作为选择语句的一部分，使用公式根据视图和上传日期字段生成排名数字，然后按此排序。这更加困难，因为理想情况下，您希望您的排名基于最大观看次数并严重惩罚旧商品，这样您就不会在“新品和畅销”图表顶部拥有 2 年前非常受欢迎的商品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:21:47.380

我会做两个 SELECT 语句，一个按上传日期排序，一个按视图排序，然后使用 UNION 合并它们，然后用另一个 SELECT 语句包装它们并将它们分组以防止重复。

# eclipse - Eclipse 格式化程序：注释/公共后的新行？

> ID：10920687
> 
> 赞同：4
> 
> 时间：2012-06-06T19:17:03.860
> 
> 标签：eclipse, formatting

IntelliJ 有一些这样的设施和选项。例如，我希望它的格式如下：

```
@Override public
void foo()
{  ...  } 
```

更好的是能够像这样缩进注释和可见性

```
 @Override public
void foo()
{ ... } 
```

但我不想贪婪。

Eclipse 中是否存在这样的格式化选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:48:01.210

Java -> 代码样式 -> 格式化程序 -> 编辑 -> 新行 -> 注释：

取消单击在方法注释后插入新行

不要认为你可以做你的第二个选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-14T21:36:58.047

如果您在 Eclipse 2018 (Oxygen.3a, 4.7.3a) 中仍然存在注释格式问题，请尝试以下操作：

在首选项中转到：**Java -> 代码样式 -> 格式化程序 -> 编辑 -> 新行 -> 注释：**

[![eclipse 氧气注解格式化](../Images/3a41ff30d2f353e2aa188b6c22d70c3a.png)](https://i.stack.imgur.com/5jGTB.png)

您必须选择 Annotations，然后**将“换行策略”设置为“Wrap ...”设置**。如果没有此设置，任何复杂的注释集都会在 Eclipse 中格式化为很长的行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-07T07:25:17.487

**转到设置-> 编辑器-> 代码样式-> Java**

选择您的代码格式化程序并选择选项卡**包装和大括号**（如果使用不同的 Intellij 版本，请尝试查找选项卡包装）。

查找选项 Class Annotation 和 Method Annotation 并选择选项**“Wrap Always”**

[![在此处输入图像描述](../Images/b6722d9faad70b032cab95d0feec78b4.png)](https://i.stack.imgur.com/8AHmZ.jpg)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-06T19:23:55.020

打开首选项对话框。转到“Java”->“代码样式”->“格式化程序”。

检查许多选项:-)

# java - 如何将给定的纬度经度映射到美国的州际公路

> ID：10920688
> 
> 赞同：0
> 
> 时间：2012-06-06T19:17:14.140
> 
> 标签：java, reverse-geocoding

Java 的任何类型的信息都会有所帮助，例如 API 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:18:34.990

尝试[地名](http://www.geonames.org)。请记住，您感兴趣的过程称为反向地理编码。他们执行的一个这样的选项是返回与您需要的纬度/经度对关联的最近街道。您提供一个编码的网址。您可以选择返回 JSON 结果或 XML 结果。这在 Java 中应该很简单。让您入门的示例网址是尝试以下操作：

[例子](http://api.geonames.org/findNearbyStreets?lat=38.999&lng=-77.1462&username=demo)

# google-analytics - Google Analytics（分析）配置文件过滤与电子商务

> ID：10920690
> 
> 赞同：1
> 
> 时间：2012-06-06T19:17:26.163
> 
> 标签：google-analytics

我有两个不同的网站在同一个电子商务网站上结帐。有sitea.com、siteb.com 和checkout.com。它们是这样设置的：

```
 siteb.com --> sitea.com --> checkout.com 
```

大多数流量都在 stiea.com 上，客户直接从那里结帐到 checkout.com。那些使用siteb 购物并在siteb 上建立购物车的人，然后在结帐时去sitea，然后将他们带到checkout.com。我有跨域和电子商务跟踪，并且可以完美地为 sitea.com 和 checkout.com 工作，因此为 siteb.com 设置它不是问题。这个问题出现的地方是我希望能够查看 siteb.com 上的流量以及 siteb 的电子商务和仅 siteb 的流量，基本上不包括来自 stiea 的所有电子商务。当我测试它时，我得到了 sitea 和 siteb 的所有流量。我到处寻找，但找不到任何解决方案。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:29:41.040

据我所知，无法设置仅包含首页位于 siteb.com 上的页面的分段或过滤器。一个想法是在访问的第一页上设置一个会话/访问范围的自定义变量，如果从 siteb.com 开始，其值为例如“siteb”，如果在 sitea.com 上，则为“sitea”。然后你应该能够转到您的自定义变量报告并转到 siteb.com 条目并按所有页面细分。

# c# - C#解析文本文件

> ID：10920692
> 
> 赞同：0
> 
> 时间：2012-06-06T19:17:27.437
> 
> 标签：c#, json, linq, parsing

我正在尝试解析 MVC C# 中的文件，请参阅下面的格式。由于它不在 JSON 中，我无法使用 Javascript 序列化程序反序列化为对象。另一个选项是使用 LINQ 并逐行读取并检索所需的值。任何人都可以推荐一种更有效的方法来做到这一点。

我需要检索的第一个字段是来自 ASSAYS 的 ASSAY NUMBER（例如值 877），然后是来自 TEST_REPLICATE 的 ASSAY_STATUS 字段，它可能是多个节点。谢谢

```
LOAD_HEADER
{
    EXPERIMENT_FILE_NAME      "xyz.json"
    EXPERIMENT_START_DATE_TIME  05.21.2012 03:44:01
    OPERATOR_ID     "Q_SI"
}
ASSAYS
{
    ASSAY_NUMBER            877
    ASSAY_VERSION           4
    ASSAY_CALIBRATION_VERSION   1
}

TEST_REPLICATE
{
    REPLICATE_ID            1985
    ASSAY_NUMBER            877
    ASSAY_VERSION           4
    ASSAY_STATUS            Research
}
TEST_REPLICATE
{
    REPLICATE_ID            1985
    ASSAY_NUMBER            877
    ASSAY_VERSION           4
    ASSAY_STATUS            Research
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:12:05.107

我更喜欢使用解析器组合器（一种使用解析器构建块构建解析器的工具）而不是解析器生成器。我对[Piglet](https://github.com/dervall/Piglet)有过良好的经验，它是用 C# 编写的，非常易于使用，并且对[FParsec](http://www.quanttec.com/fparsec/)有惊人的体验，但它是为 F# 编写的。

就解析器生成器而言，有 stmax 建议的，还有[TinyPG](http://www.codeproject.com/Articles/28294/a-Tiny-Parser-Generator-v1-2)，曾经有人推荐过我。

你也可以滚动你自己的解析器。我建议将其基于某种状态机模型，尽管在这个简单的情况下，就像 Kirk Woll 建议的那样，您可能可以通过一些简单的旧字符串操作来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:34:40.273

你可以一起破解一些东西，或者使用像[ANTLR](http://www.antlr.org/)或[Coco/R](http://www.ssw.uni-linz.ac.at/coco/)这样的解析器生成器。两者都可以在 C# 中生成解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T13:25:25.060

我认为这个问题的答案取决于文件中是否会有多个 ASSAY_NUMBER 值。如果是这样，我知道的最简单和最可靠的方法是逐行读取文件并获取所需的数据。

但是，如果您知道每个文件对于特定的 ASSY_NUMBER 都是唯一的，那么您有一个更简单的答案：将文件作为一个字符串读取并使用 REGEX 提取您想要的信息。我不是 REGEX 方面的专家，但网上有足够多的示例，您应该能够创建一个有效的示例。

# php - PHP - 在变量中查找某些字符串

> ID：10920693
> 
> 赞同：3
> 
> 时间：2012-06-06T19:17:31.277
> 
> 标签：php, string, variables

我的最新问题涉及尝试在变量中查找“http://”。此变量包含客户网站上评论部分的内容。我见过各种各样的答案，但似乎没有一个有效。我在这里查看了其他一些帖子，但我还没有得到最好的答案。这是我到目前为止所拥有的：

```
if(strpos($comments, 'http://') == true) {
  // Does stuff here
} 
```

我注意到其他人使用 preg_match 并且有人说要在数组中进行。我很困惑，太多的选择。只是在开玩笑。不过，我希望得到一些澄清，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T19:20:58.153

你需要说：

```
if(strpos($comments, 'http://') !== false) { 
```

...因为如果`http://`它位于字符串的开头，它可以返回 0（这是错误的）。

注意：这只会`http://`在字符串中找到第一次出现的 。

仔细看看参考： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T19:29:59.853

您需要像这样更改代码：

```
if(strpos($comments, 'http://') === false) { 
```

//没有链接 }

因为 strpos 返回整数，它是您的字符串的位置。

示例：完整字符串：“http://stackoverflow.com hello” 你发现：“http”

自然返回 0。

但完整的字符串：“ahttp://stackoverflow.com”你发现：“http”

它返回 1。

所以你必须使用 === 运算符来检查是否真的是“布尔假”。

如果您尝试使用 == 运算符进行检查，您可能会失败，因为它将 0 视为错误。

更多细节： http: [//php.net/strpos](http://php.net/strpos)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T11:35:34.560

我发现这是一个更好的匹配：（由 phpstorm ide 推荐）

```
if(str_contains($e, '1062 Duplicate entry')) {

} 
```

# c# - 在对象初始化器中使用“this”

> ID：10920702
> 
> 赞同：1
> 
> 时间：2012-06-06T19:18:09.767
> 
> 标签：c#, initialization

我有以下问题：

```
public class ChildClass{
   public Object Parent = null;
}
public class ParentClass{
   public ChildClass CreateChild(){
        return new ChildClass{ Parent = this; }
   }
} 
```

我对对象初始化器的理解有点困难。在`CreateChild()`方法中，是否`this`指`ParentClass`或`ChildClass`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:19:30.557

`this`将引用它所在的班级。

在示例中，`this`将是 的实例`ParentClass`，因为它是*在*的主体中声明的`ParentClass`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:21:11.580

它始终指代文本嵌入的类。在这种情况下`ParentClass`。

* * *

**更新**

对象初始化器不在内部，`ChildClass`而是在`ParentClass`. Therfore`this`指的是 的当前实例`ParentClass`。对象初始值设定项不属于，`ChildClass`而是属于 的方法`CreateChild`的代码`ParentClass`。“public class ParentClass{”和最终的“}”之间的所有内容都属于`ParentClass`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:21:39.770

到执行 CreateChild 的 ParentClass 的实例（尽管以当前的方式，您的代码可能无法编译）。this = 当前类的实例，在这种情况下是父类

# javascript - 在 AJAX 调用期间 UI 无响应

> ID：10920707
> 
> 赞同：2
> 
> 时间：2012-06-06T19:18:24.973
> 
> 标签：javascript, ajax, user-interface

我有一个仪表板屏幕，需要在加载时发出大约 20 个 AJAX 请求，每个请求返回不同的统计信息。总的来说，所有请求返回大约需要 10 秒。然而，在那 10 秒内，用户界面几乎被锁定。

我记得读过 Nick Zakas 的一本 JS 书，其中描述了在密集操作期间保持 UI 响应性的技术（使用计时器）。我想知道是否有类似的技术来处理我的情况？

**出于多种原因，我试图避免组合 AJAX 调用*

```
$(".report").each(function(){
        var container = $(this)
        var stat = $(this).attr('id')
        var cache = db.getItem(stat)

        if(cache != null && cacheOn)
        {
          container.find(".value").html(cache)
        }
        else
        {
          $.ajax({
            url: "/admin/" + stat,
            cache: false,
            success: function(value){
              container.find(".value").html(value.stat)
                db.setItem(stat, value.stat);
                db.setItem("lastUpdate", new Date().getTime())
            }
          });
        }

    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:33:38.603

如果您有权访问 jQuery，则可以利用该`$.Deferred`对象同时进行多个异步调用，并在它们全部解析时执行回调。

[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

[http://api.jquery.com/deferred.promise/](http://api.jquery.com/deferred.promise/)

如果这些回调中的每一个都在对 DOM 进行修改，则应将更改存储在某个临时位置（例如内存中的 DOM 对象），然后一次将它们全部追加。DOM 操作调用非常耗时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:21:47.887

我在大量使用 SharePoint Web 服务时遇到过类似的问题——您经常需要从多个源中提取数据以生成单个进程的输入。

为了解决这个问题，我将这种功能嵌入到我的 AJAX 抽象库中。您可以轻松定义一个请求，该请求将在完成时触发一组处理程序。但是，每个请求都可以使用多个 http 调用来定义。这是组件（和详细文档）：

[DepressedPress.com 上的 DPAJAX](http://depressedpress.com/javascript-extensions/dp_ajax/)

这个简单的示例使用三个调用创建一个请求，然后按照调用顺序将该信息传递给单个处理程序：

```
 // The handler function 
function AddUp(Nums) { alert(Nums[1] + Nums[2] + Nums[3]) }; 

    // Create the pool 
myPool = DP_AJAX.createPool(); 

    // Create the request 
myRequest = DP_AJAX.createRequest(AddUp); 

    // Add the calls to the request 
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [5,10]); 
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [4,6]); 
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [7,13]); 

    // Add the request to the pool 
myPool.addRequest(myRequest); 
```

请注意，与提供此方法的许多其他解决方案不同，此方法不会强制进行调用的单线程 - 每个仍将在环境允许的范围内尽可能快（或尽可能慢）运行，但只有在全部完成后才会调用单个处理程序。如果您的服务有点不稳定，它还支持设置超时值和重试尝试。

在您的情况下，您可以发出单个请求（或组相关请求 - 例如快速的“最需要”请求和运行时间较长的“很高兴”请求）来调用所有数据并同时显示所有数据（或者如果有多个请求，则以块为单位）完成时。您还可以专门设置要使用的背景对象/线程的数量，这可能有助于解决您的性能问题。

我发现它非常有用（并且从代码的角度来看非常容易理解）。不再有链接，不再计算调用和保存输出。只需“设置并忘记它”。

哦-关于您的锁定-您是否有机会在本地开发平台上进行测试（针对与浏览器在同一台机器上的服务器运行请求）？如果是这样，可能只是机器本身正在处理您的请求，而不是表示实际的浏览器问题。

# c# - 我将如何返回具有重复键的特定 json 值

> ID：10920712
> 
> 赞同：1
> 
> 时间：2012-06-06T19:18:38.563
> 
> 标签：c#, json, json.net

我有以下 JSON

```
{
  "nest1" : {
    "attributes" : {
      "type" : "irrelevant",
      "url" : "irrelevant"
    },
    "key" : "value1"
  },
  "nest2" : {
    "attributes" : {
      "type" : "irrelevant",
      "url" : "irrelevant"
    },
    "key" : "value2"
  }
} 
```

我已经尝试过类似下面的方法来获取第二个的值`key`，但这会抛出一个`InvalidOperationException`. 带有以下错误消息：

> 无法访问 Newtonsoft.Json.Linq.JProperty 上的子值。

```
string value = getJson(json, "key"); 
```

该方法看起来像

```
public string getJson(string json, string name)
    {
       JObject token = JObject.Parse(json);
       JToken jtoken = token.Last.ToString();
       return jtoken[name].toString();
    } 
```

我猜我可能忘记了一些简单的事情，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:41:23.617

```
dynamic dynObj = JsonConvert.DeserializeObject(json);
foreach (var item in dynObj)
{
    foreach (var subitem in item)
    {
        Console.WriteLine("url:" + subitem.attributes.url);
        Console.WriteLine("key:" + subitem.key);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:04:48.133

您的代码有两个问题：

1.  你使用`ToString()`不正确。如果您像您一样将 a 隐式转换为`string`，`JToken`则结果`JToken`包含*text*，而不是字符串表示的对象。所以你应该摆脱对`ToString()`.
2.  `Last`不返回 的值`nest2`，而是返回整个属性。要获取最后一个属性的值，您可以使用类似`token.PropertyValues().Last()`.

因此，您的代码可能如下所示：

```
public static string GetJson(string json, string name)
{
    JObject obj = JObject.Parse(json);
    JToken lastValue = obj.PropertyValues().Last();
    return lastValue[name].Value<string>();
} 
```

我也将最后一个更改`ToString()`为`Value<string>()`，因为我认为它在这里更有意义，即使它不会改变结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:32:52.267

也许你有一个误解。在这种情况下，有两个具有两个属性的主体对象：

```
Principal {
  var1;
  var2
} 
```

属性也一样。你需要一个对象数组吗？

```
[ { "objects" :
   [ 
    {
      "attributes" : {
         "type" : "irrelevant",
         "url" : "irrelevant"
      },
      "key" : "value1"
    },
    {
      "attributes" : {
      "type" : "irrelevant",
      "url" : "irrelevant"
       },
      "key" : "value2"
     }
  ]
} ] 
```

# wix - 如何在wix中有条件地运行sql脚本

> ID：10920713
> 
> 赞同：4
> 
> 时间：2012-06-06T19:18:47.720
> 
> 标签：wix

我有 2 个 sql 脚本，一个用于全新安装，另一个用于更新。我希望这个安装程序自动检查数据库是否存在。

伪代码：

```
IF (database exists)
{
    call 'UpdateDatabase' script
}
ELSE
{
    call 'CreateDatabase' script
} 
```

产品.wxs

```
<sql:SqlDatabase Id='SqlDatabase' Database='master' Server='.'
  CreateOnInstall='yes' DropOnUninstall='no' ContinueOnError='yes'>
  <sql:SqlScript Id='CreateDatabase' BinaryKey='CreateDatabase' ExecuteOnInstall='yes' />
  <sql:SqlScript Id='UpdateDatabase' BinaryKey='UpdateDatabase' ExecuteOnInstall='yes' />
</sql:SqlDatabase> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:43:28.557

我得到了它。是`ExecuteOnReinstall`。按预期工作。

```
<sql:SqlDatabase Id='SqlDatabase' Database='master' Server='.'
  CreateOnInstall='yes' DropOnUninstall='no' ContinueOnError='yes'>
  <sql:SqlScript Id='CreateDatabase' BinaryKey='CreateDatabase' ExecuteOnInstall='yes' />
  <sql:SqlScript Id='UpdateDatabase' BinaryKey='UpdateDatabase' ExecuteOnReinstall='yes' />
</sql:SqlDatabase> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:32:35.177

目前没有我知道的内置设施。您需要构建一个自定义操作。

如果数据库存在或不存在，您可以在自定义操作中设置属性，并根据其值进行条件检查，相应地调用脚本。

# ajax - 如何在 Django 模板中使用 Ajax 加载数据？

> ID：10920720
> 
> 赞同：0
> 
> 时间：2012-06-06T19:19:01.983
> 
> 标签：ajax, django, django-templates, django-views

在 Django 中使用 Ajax 是一个未解决的问题。我试图通过阅读博客和论坛来理解它，但它对我不起作用。我发布了一个与之相关的非常简单的问题。

views.py 中定义的方法：（只是一个示例）

```
def widget_data(request):
    ####
    extra_context = {
        'data': username
        'part': company
        }
    return direct_to_template(request,'test/widgets.html',
                              extra_context) 
```

我想`extra_context`使用`Ajax`.

`widget.html`模板中会发生以下事情，即

当版主在地址栏键入 URL 以打开页面时，它将加载两个小部件，即一个用于加载所有注册的用户名，另一个用于加载他们的公司名称。用户不断注册到网站并将公司名称添加到他们的个人资料中。当新用户注册到站点时，两个小部件都应该使用 Ajax 自动加载。

我对 Ajax 的话题一无所知。这个怎么做？我什至应该如何开始呢？

我已阅读以下链接： [教程 1](http://www.b-list.org/weblog/2006/jul/31/django-tips-simple-ajax-example-part-1/) [教程 2](http://webcloud.se/log/AJAX-in-Django-with-jQuery/)

我知道答案会太长太乱，但任何帮助都会不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:28:22.277

如果您使用 jQuery，您可以执行以下操作

```
$.get('/url/of/widget_data/view', success(data, textStatus, jqXHR) {
  $('#idofdivtoupdate').html(data);
}); 
```

这可能是最简单的方法。

# asp.net-mvc-2 - 不能隐式转换类型“双”？“加倍”

> ID：10920723
> 
> 赞同：1
> 
> 时间：2012-06-06T19:19:08.140
> 
> 标签：asp.net-mvc-2

我正在使用 asp.net MVC2，并且在以下代码行中出现错误

```
<% double RunningTotal = 0; %>
<%foreach (var item in Model)
       {%>
      <%var allowedHours = item.tblPerson.tblPersonAllowedHours.Where(x=>x.Semester == item.Semester).Sum(x=>x.AllowedHoursPerWeek);  %>         
            <tr>
                <td><%: item.Semester %></td>
                <td><%: allowedHours.ToString() %></td>
                <td><%: item.tblPerson.tblCourseWantedHours.Where(x => x.Semester == item.Semester).Sum(x => x.WantedHoursPerWeek+x.UL+x.UT) %></td>
                <td><%: item.tblPerson.tblCourseWantedHours.Where(x => x.Semester == item.Semester).Sum(x => x.WantedHoursPerWeek+x.UL+x.UT) - allowedHours %></td>
                <%: RunningTotal += (item.tblPerson.tblCourseWantedHours.Where(x => x.Semester == item.Semester).Sum(x => x.WantedHoursPerWeek + x.UL + x.UT) - allowedHours) %>

                <td></td> 
```

我得到的错误就在这条线上

```
<%: RunningTotal += (item.tblPerson.tblCourseWantedHours.Where(x => x.Semester == item.Semester).Sum(x => x.WantedHoursPerWeek + x.UL + x.UT) - allowedHours) %> 
```

错误描述是

```
CS0266: Cannot implicitly convert type 'double?' to 'double'. An explicit conversion exists (are you missing a cast?) 
```

知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:23:30.500

看起来您尝试添加的其中一件事可能是`Nullable<Double>`

去你`double?`需要`double`做的

```
double? nullableDouble = 3.0;
if (nullableDouble.HasValue)
    double notNullableDouble = nullableDouble.Value; 
```

有关 Nullables 的更多信息：http: [//msdn.microsoft.com/en-us/library/b3h38hb0.aspx](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

# ruby-on-rails - rails 3 has_many - 在视图中使用

> ID：10920725
> 
> 赞同：2
> 
> 时间：2012-06-06T19:19:13.967
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, has-many, many-to-one

我的 Rails 应用程序中存在一对多关系：

*   我有一个可以有许多设备的用户类
*   我有一个属于用户的设备类

我的模型是这样设计的：

```
class User < ActiveRecord::Base
  has_many :devices
end

class Device < ActiveRecord::Base
  belongs_to :user
end 
```

关于视图，当我想显示所有用户并列出他们关联的设备时，我使用以下代码：

```
<%= user.devices.each do |device| %>
  <%= device.id %>
<% end %> 
```

输出是：（现在只有 1 个设备）

```
1 #<Device:0x101f45e50> 
```

我不明白为什么

```
#<Device:0x101f45e50> 
```

出现在 id 之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:32:32.097

替换等号

```
<% user.devices.each do |device| %>
  <%= device.id %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:41:33.847

为了提供更多上下文以便您知道发生这种情况的原因，`=`解析输出并在生成的 HTML 中显示语句的结果，其中`-`解析行但不显示结果 - 因为 ruby​​ 在每个新语句都会传递一个结果，你必须把你的`=`和`-`放在正确的位置。

[Documentation is your friend (this is for HAML, but is still a good explanation)](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#inserting_ruby_)

# javascript - 使用 innerHTML 重新加载页面的中心窗格

> ID：10920732
> 
> 赞同：4
> 
> 时间：2012-06-06T19:19:31.263
> 
> 标签：javascript, html, innerhtml

我想使用以下方法来更新页面的中心窗格，而不是使用 iframe。

我想在以下方面获得一些帮助。如果有另一个 HTML 页面我想加载到中心窗格中，它的正确语法是什么？

```
document.getElementById( 'centerPane' ).innerHTML.??? = 'SampleHTML.htm' ; 
```

在 innerHTML 之后我需要获得什么属性？

或者我应该使用其他一些电话来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:22:15.807

如果你有机会使用 jQuery，它可以很简单：

$('#centerPage').load('SampleHTML.htm');

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:43:25.307

如果您没有使用 jQuery 或其他内置 ajax 方法的库：

```
var setHtml = function (element, url) {

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            element.innerHTML = xhr.responseText;
        }
    };

    xhr.timeout = 10000;
    xhr.open('GET', url, true);
    xhr.send();
}; 
```

然后像这样简单地调用 setHtml 函数：

```
setHtml(document.getElementById('centerPane'), 'SampleHTML.htm'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:26:29.893

您必须使用 ajax 来执行此操作。示例：http: [//jsfiddle.net/wGw9X/1/](http://jsfiddle.net/wGw9X/1/)

您也可以（应该）使用 jQuery 来简化它并使其更适合跨浏览器编译。在 jquery 中，它只是一行代码。

编辑：更新 jsfiddle 链接以使用更好的示例加载文件。

# android - Ignition RemoteImageView 给出“创建磁盘缓存目录失败”警告

> ID：10920734
> 
> 赞同：2
> 
> 时间：2012-06-06T19:19:40.457
> 
> 标签：android, droid-fu

我正在使用 Ignition（以前称为 DroidFu）在后台下载图像并在它们准备好时更新相关的 ImageView。我还希望图像被缓存，这样就不必每次用户重新访问该活动时都重新下载它们。我在日志中注意到这些错误：

```
06-06 12:28:10.254: W/Droid-Fu[CacheFu](7567): Failed creating disk cache directory /mnt/sdcard/Android/data/my.package.name/cache/cachefu/image_cache
06-06 12:28:10.489: W/Droid-Fu[CacheFu](7567): Failed creating disk cache directory /mnt/sdcard/Android/data/my.package.name/cache/cachefu/image_cache 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:19:41.563

我发现我的包的目录没有在 SD 卡上的 Android/data 中创建。我需要将 WRITE_EXTERNAL_STORAGE 权限添加到我的 AndroidManifest.xml；因为我在应用程序的其他地方不需要它，所以我不知道我需要它来使用 RemoteImageViews 和 RemoteImageLoaders。

# java - XSL - 匹配节点的文本并将另一个节点附加为兄弟节点

> ID：10920736
> 
> 赞同：0
> 
> 时间：2012-06-06T19:19:46.067
> 
> 标签：java, xslt, xslt-2.0

我有这样的 XML：

```
<a>
  <b>
    <c>some text here</c>
  </b>
</a>
<a>
  <b>
    <c>another cool text</c>
  </b>
</a> 
```

我需要在 //a/b/c/text() 中匹配单词“cool”并像这样转换 XML

```
<a>
  <b>
    <c>some text here</c>
  </b>
</a>
<x>
  <y> prepend to cool text </y>
</x>
<a>
  <b>
    <c>another cool text</c>
  </b>
</a> 
```

我试过这个：

```
<xsl:template
        match="//a/b/c/matches(text(),'\.*cool\*.')">
...
</xsl:template> 
```

但没有运气：

```
XTSE0340: XSLT Pattern syntax error at char 153 on line 30 in {...\.*cool\*...}:
  Function call may appear only at the start of a pattern 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:39:31.607

您的匹配不正确，它应该在括号内进行测试`[]`：

```
<xsl:template
        match="//a/b/c[matches(text(), '.*cool.*')]">
...
</xsl:template> 
```

此外，如果您的正则表达式很简单，那么您可以使用 XPath 方法`contains()`。

# c# - C# TreeView 中的奇怪标签

> ID：10920737
> 
> 赞同：0
> 
> 时间：2012-06-06T19:19:48.907
> 
> 标签：c#, winforms, treeview

我在使用 C# 的 TreeView 时遇到问题。

*   如果我在节点上放置文本，例如“Hello World”，树会显示正确的标签
*   如果我将文本放在节点上，例如“1-Hello World”或“1Hello World”，也会显示正常。

但是，如果我使用 someNumber(s)[space]someWord 输入文本，如“1 Hello World”或“1323 Hello World”，则在树视图中显示为“HelloWorld 1”或“Hello World 1323”。

[图 1，命令行（工具提示位于“node.Text”上方）](http://s2.subirimagenes.com/imagen/previo/thump_7752478commandline.png)

[Image2，树视图：](http://s2.subirimagenes.com/imagen/previo/thump_7752502treeview.png)

（对不起，我是新手，不能发图）

我什至尝试从直接窗口发送命令行，例如 node.Text="123 Hello World" 并且节点仍然向我显示“Hello World 123”。

我在 W7 中使用 VS2010。

有任何想法吗？我要疯了……

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:25:09.103

您的 FlowDirection 是否设置为 RightToLeft？尝试将其设置为 LeftToRight。

# actionscript-3 - 如何识别是否在 mx textinput flex 中选择了文本

> ID：10920738
> 
> 赞同：1
> 
> 时间：2012-06-06T19:19:51.923
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

谁能告诉我如何检查 mx textinput 控件中的文本是否被选中。我有一些控件，如 mx textinput、mx textara 和richtexteditor。选择来自当用户拖动它或双击任何控件时选择突出显示当时我想知道选择了哪个控件。我已经看到了在 stackoverflow 中发布的 spark textinput 的解决方案 [How to access selected text in a Flex TextInput 控件](https://stackoverflow.com/questions/3047150/how-to-access-the-selected-text-in-a-flex-textinput-control) ，但我想要 mx 组件。请告诉我如何知道为 textinput、textarea 和richtexteditor 控件选择了哪个控件文本。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:51:45.913

对于`TextInput`和`TextArea`：

```
// to check for any selected text:
var hasSelection:Boolean = (component.selectionBeginIndex!=component.selectionEndIndex);
// to get the selected text:
var selection:String = component.text.substring(component.selectionBeginIndex,component.selectionEndIndex); 
```

对于`RichTextEditor`：

```
// to check for any selected text:
var hasSelection:Boolean = (component.selection.beginIndex!=component.selection.endIndex);
// to get the selected text:
var selection:String = component.selection.text; 
```

这将检查组件是否有任何选定的文本，但不检查组件是否被选中；*即使组件失去焦点*，文本选择也会保持不变。检查组件是否真正具有焦点的简单方法是在组件`focusIn`和`focusOut`事件中设置一个布尔标志。您还可以取消选择事件中的文本`focusOut`：

```
component.selectionEndIndex = 0; // clear selection 
```

# ios - 无法弄清楚如何在同一 ScrollView 中的 WebView 上方添加自定义视图

> ID：10920739
> 
> 赞同：1
> 
> 时间：2012-06-06T19:19:54.560
> 
> 标签：ios, cocoa-touch, storyboard

我正在尝试创建一个界面类似于 iPhone 上的邮件应用程序的应用程序。当您在内置邮件应用程序上查看电子邮件时，它会在邮件前的区域显示发件人/收件人信息以及主题。我正在考虑将 WebView 用于消息部分，但我想不出一种方法让一些自定义视图出现在 WebView 上方，同时仍在同一个 ScrollView 中。

实现这一点的最佳方法是什么？对我来说，最好的选择似乎是在 HTML/CSS 的顶部生成“自定义视图”，然后简单地附加消息的 HTML。我曾考虑尝试将带有另一个视图的 WebView 放在 ScrollView 中，但这似乎违反了 Apple 的设计准则。

任何想法或建议都会很棒。

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:41:05.250

我不认为这违反了苹果的指导方针。

在您的情况下，我会做以下事情。

首先创建滚动视图

在其中放置您的固定高度标题（带有主题等......）

然后在滚动视图中放置一个带有标题高度 y 偏移量的 webView。

在 webView 完成加载调用后`[webView sizeToFit];`（调整视图的大小试图不裁剪子视图）

也许您必须再次设置 y 偏移量 ( `frame.origin.y=offset`)

然后将滚动视图内容大小设置为两个高度之和：

```
scrollView.contentSize=CGSizeMake(width, headerView.frame.size.height + webview.frame.size.height); 
```

我对接下来`[webView sizeToFit]`要做的事情不是很有信心。我读过你也可以使用`[webView sizeThatFits:CGSizeZero];`. 它显然会返回 webView 所需的大小。

您只需将 webviews 帧大小更改为该函数的返回值，并使用与以前相同的 contentsize 语句。

希望这有帮助

PS：我认为使用 html 作为视图的替代品是一个坏主意。它要慢得多，并且需要初始时间才能加载。我发现它的唯一用途是显示格式化文本。

# windows - 活动目录和 Powershell

> ID：10920742
> 
> 赞同：0
> 
> 时间：2012-06-06T19:20:07.410
> 
> 标签：windows, powershell, vbscript, active-directory

我目前正在将 VB 中的脚本重写为 Powershell 脚本。

该脚本的作用是根据 script-users 输入在我们的 Active Directory 中搜索用户。

```
Function PromptForName{
    $nameInput = "*"
    $nameInput += Read-Host ("Please enter a full or partial name.")
    $nameInput += "*"
    return $nameInput
}

Function FindUsers{
    param ([string]$n)
    $usersArray = Get-ADUser -f {DisplayName -like $n} | Select-Object Name
    return $usersArray
} 
```

此代码将打印出正确的名称列表。然后我想做的是允许用户选择其中一个名称，并获得有关该人的更多信息。我坚持允许脚本用户选择其中一个名称。

我如何提示另一个输入；该框将显示 FindUsers 提供的所有名称的编号列表，然后根据他们选择的用户返回一个数字？我完全迷路了。

这就是我目前正在尝试的方式，尽管我很确定这是完全错误的。

```
Function PrintUsers{
    param $a
    [int]$i, $j
    [string]$userList
    $j = 1
    foreach($object in $array){
        $userList += ($j + $array[$i])
        $j++
    }
    return $userList
} 

Function SelectUser{
    param $list
    $user = Read-Host ($list)
} 
```

**编辑：**

我已将我的功能更新为以下内容：

```
Function FindUsers{
    param ([string]$n)
    $usersArray = @(Get-ADUser -f {DisplayName -like $n} | Select-Object Name| Format-List)
    return $usersArray
}

Function PrintUsers{
    param ([String[]]$array)
    $i
    for($i = 1; $i -lt $usersArray.length; $i++){
        Write-Host "$i. $($usersArray[$i-1].Name)"
    }
} 
```

FindUsers 之后的输出是这样的： Name : xxxxx yyyyy Name : xxxxx zzzzz etc.

所以 $usersArray 的返回是打印所有这些。在 PrintUsers 函数之前我不希望进行任何打印，并且我希望它采用如下编号的列表类型格式：1\. xxxx yyyy 2\. xxxx zzzz 等。

我很难弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:16:38.010

```
# get all users
$usersArray = @(Get-ADUser -f {DisplayName -like $n} )

# create menu
for($i=1; $i -le $usersArray.count; $i++){
    Write-Host "$i. $($usersArray[$i-1].Name)"
}

# prompt for user number
$user = Read-Host Enter the user number to get more info

# display full info for selected user
$usersArray[$user-1] | Format-List * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:39:52.070

使用 Add-Member 为每个用户添加一个唯一标识符。让我们将进程视为用户对象，例如：

```
$procs = gps;
$procs = $procs | % { $i=0; } {
    Add-Member -MemberType NoteProperty -InputObject $_ -Name Number -Value $i -PassThru;
    $i++;
};
$procs | select Number,Name;
$procid = Read-Host -Prompt 'Enter the number of the process you would like to operate on';
$proc = $procs | ? { $_.Number -eq $procid };
Write-Host -Object ('Operating on proc: {0}' -f $proc.Name); 
```

# android - Android CPU ARM 架构

> ID：10920747
> 
> 赞同：8
> 
> 时间：2012-06-06T19:20:42.407
> 
> 标签：android, arm, neon, tegra

我们有一个 Android CPU 依赖代码，我想看看客户使用的设备有多少是 ARMv6/ARMv7，如果还有 ARM v5，有多少 ARMv6 有 VFP，Tegra 或 Neon 百分比是多少。可以找到此类统计数据的任何提示？

BR 斯坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:22:03.723

如果您想收集此类数据，只需执行“cat /proc/cpuinfo”并将此数据提供给 googleanalytics 帐户 :)（我正在以这种方式进行大量研究）。

如果您正在寻找已经制作的统计数据，我认为其中任何一个都已过时 :) 普通智能手机用户每两年更换一次手机，这取决于他的运营商政策，我会忘记 armv6/armv7 和霓虹灯在你的位置，armv6 是目前只在一些中国的垃圾电话中销售:)，霓虹灯非常好，但例如 tegra 2 与它不兼容，另一方面是 tegra2 拥有大约 0.05% 的市场份额，每个 armv7 都支持 vfp，arm v7 是约 95% 的市场份额或更多。我怀疑任何使用 google play 或实际为应用付费的人都使用 armv6 或更早版本，大多数 google play 用户都使用三星 Galaxy，例如，我的应用总下载量的 20% 是在 Galaxy s2 上下载的，10% 是在 nexus 上下载的，并且看起来支持所有/旧设备根本不是一个好主意，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:54:03.903

最后我不认为这种数据可以改变你编写应用程序的方式，因为无论报告说什么情况都是：

*   Play 商店应用程序不检查此类功能
*   考虑到前面的陈述，正确运行您的应用程序的唯一方法是在运行时检查对该技术的支持，例如您必须检查设备是否支持 NEON，而作为程序员，Play Store 这样做是您的问题不检查那个。
*   如果您没有使用特定的指令集，则没有此问题，因此应在 3、2、1 ... 中删除此问题！

另一个考虑因素是 ARM 是一种可以有多种形式的架构，我的意思是，如果您选择 2 个商业产品，如 Tegra 2 和 OMAP 4430，它们都是 ARMv7 设备，但 Tegra 2 不支持NEON 虽然整个 OMAP 4 系列都支持这种注册表，所以即使是关于指令集的标签也无法真正告诉您设备本身的真正潜力。

最后，所有值得知道的是，Play 商店对此一无所知，了解最常用的平台也无济于事，最后你总是必须做同样的任务并检查此类功能取决于您。

# function - 在 Excel 中使用 OR 函数

> ID：10920748
> 
> 赞同：0
> 
> 时间：2012-06-06T19:20:42.547
> 
> 标签：function, excel-formula

我只是想使用`OR`Excel 中的函数来分析一些字符串变量。我不想使用字符数来验证某人是否正确回答，而是使用 or 函数来接受多个正确答案。

例如，`return 1 if cell = "she was always there" or "she was there always"`.

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:24:46.127

```
=IF(OR(A1="this",A1="that"),1,0) 
```

IF 取三个值：

1.  逻辑测试
2.  值为真
3.  如果为 false 的值

每个值都可以将其他函数作为它的参数。在这种情况下，我们使用 OR 函数作为逻辑测试。OR 可以接受任意数量的参数（我确信有一个限制，但我从未见过）。每个 OR 参数都采用逻辑测试的形式，如果任何逻辑测试为 TRUE，则 OR 的结果为 TRUE。

附带说明一下，您可以嵌套许多函数来创建复杂的测试。但是嵌套限制似乎设置为 7。虽然您可以使用一些技巧来解决这个问题，但这使得以后阅读该函数非常困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:44:07.953

如果您可以接受“TRUE”或“FALSE”返回，那么您不需要 IF 函数。只是：

```
=OR(A1="she was always there",A1="she was there always") 
```

我通过谷歌搜索“EXCEL OR FUNCTION”发现了这一点

*   [http://office.microsoft.com/en-us/excel-help/or-function-HP010062403.aspx](http://office.microsoft.com/en-us/excel-help/or-function-HP010062403.aspx)

# android - 在不单击的情况下更改 android listview 中的背景颜色的问题

> ID：10920752
> 
> 赞同：0
> 
> 时间：2012-06-06T19:21:07.560
> 
> 标签：android, android-listview

当我的应用程序加载时，我需要列表视图中的一些（不一定是全部）项目来更改它们的背景，而无需单击我需要的那些。我知道改变背景的方法，但我不知道如何从 ListView 中提取视图来做到这一点。

我看了这个问题，答案没有用： [https ://stackoverflow.com/questions/10650692/how-to-change-background-color-list-view-item-without-click-on-any-of-他们](https://stackoverflow.com/questions/10650692/how-to-change-background-color-list-view-item-without-click-on-any-of-them)

这是我的一些代码：

```
 mApprovalList = new ArrayList<String>(Arrays.asList(getResources().getStringArray(R.array.approvals_array)));
    mAdapter = new ArrayAdapter<String>(this, 
                                        R.layout.approvals_list, 
                                        immApprovalList);       
    setListAdapter(mAdapter);       
    ListView lv = getListView();
    Log.v(String.valueOf(lv.getChildCount()), "count"); 
```

此外，该“日志”返回 0。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:29:25.700

您应该编写一个自定义适配器并将背景设置为您想要的任何颜色。见[https://stackoverflow.com/a/5561813/458968](https://stackoverflow.com/a/5561813/458968)

然后使用

```
MyCustomAdapter customAdapter = new MyCustomAdapter(this, mApprovalList);

setListAdapter(customAdapter); 
```

在您的 onCreate 方法中。

# java - Android - 扩展的 WebView 类在初始化时导致 ClassCastException

> ID：10920757
> 
> 赞同：4
> 
> 时间：2012-06-06T19:21:17.903
> 
> 标签：java, android, webview

我的问题真的很简单。我似乎无法弄清楚为什么它会抛出这种错误（补充一点，我从来没有真正使用过 Java，但现在必须使用一个简单的 android 应用程序）。

在我的活动课中，我声明：

```
private MyWebView web; 
```

在“onCreate”方法中，我这样做：

```
try {
    web = (MyWebView)findViewById(R.id.webview);
}
catch(Exception e) {
    Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT);
} 
```

“MyWebView”类如下所示：

```
import android.app.AlertDialog;
import android.content.Context;
import android.util.AttributeSet;
import android.webkit.WebView;

public class MyWebView extends WebView {
    public MyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onScrollChanged(int l, int t, int oldl, int oldt) {
    }
} 
```

这会引发一个带有 detailMessage = "android.webkit.WebView.

我真的很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T10:23:52.363

布局中的名称是错误的一件事。在我再次尝试后，它再次出错，但这次它触发了“MethodNotFoundException”。看来您必须实现此构造函数

```
MyWebView(Context context, AttributeSet attrs) 
```

而不是这个

```
MyWebView(Context context, AttributeSet attrs, int defStyle) 
```

就像日食所暗示的......

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-06T19:55:33.950

您必须在布局中像这样命名您的自定义 WebView：

```
<yourpackagename.MyWebView
  android:id="@+id/webview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
 /> 
```

yourpackagename: 是你贴花 MyWebView 类的包的名称

# javascript - jQuery 表单在 IE 中的文件输入更改时自动提交

> ID：10920762
> 
> 赞同：3
> 
> 时间：2012-06-06T19:21:29.113
> 
> 标签：javascript, jquery, html, forms, file-upload

这个主题已经在这个论坛上讨论过，但我还没有找到一个有效的 IE 解决方案（测试 7、8 和 9）。在其他浏览器中运行良好。我希望有人有解决方案。提前致谢！

**这是关于什么的：**

我想摆脱标准文件输入元素，所以我添加了一个图像。单击它会显示浏览窗口。选择文件后，将提交表单。由于浏览器安全性，我暂时显示文件输入元素、焦点和隐藏它。

**问题：**

IE 显示*“访问被拒绝”。jquery.1.7.2.js 第 3241 行，字符 6*。如果没有显示/隐藏技巧，问题仍然存在。当我单击浏览按钮并选择一个文件时，表单确实被提交。问题似乎是文件浏览操作是由另一个元素触发的：

完整代码：

```
 $('#fakeupload').click(function(){
        $('#form').show();
        $('#realupload').focus().trigger('click');
        $('#form').hide();          
    });

    $('#realupload').change(function(){
        $('#form').show();
        $('#form').submit();
        $('#form').hide();          
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:12:28.297

Internet Explorer 8 以“拒绝访问”来阻止您，因为微软的一群不那么聪明的人做出了这个决定。

如果您尝试在输入类型文件中触发 click 方法，那么稍后您将在提交中遇到问题。

这是唯一做这种事情的浏览器。

再次感谢微软，你的浏览器是一个“作品”>:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:13:31.913

您是否尝试为浏览器访问文件分配权限？你清除缓存了吗？试试设置有效期？尝试用 css("display","block")/css("display","none") 替换 show()/hide()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:16:16.697

这仍然是一个无法解决的问题。为了使其工作，用户必须单击浏览按钮。这里的技巧是修改浏览按钮，使其适合图像。

# html - 下拉菜单中的选定值在提交后不会更改？

> ID：10920770
> 
> 赞同：1
> 
> 时间：2012-06-06T19:21:49.840
> 
> 标签：html, forms, html-select

```
<form  method="post">
            <select name="for">
            <option value="-1">A</option>
            ....
            </select>

            <input type="submit" value="Submit" />
    </form> 
```

单击提交按钮时，所选值将返回默认值。提交后选择的值是否可以保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:27:55.623

只有使用 HTML 我认为这是不可能的，您应该以某种方式维护选定的值并在 html 渲染中再次选择它，或者，您可以使用带有 ajax 的回发。

# sass - 在 Compass Sass 渐变中包含后备纯色？

> ID：10920776
> 
> 赞同：1
> 
> 时间：2012-06-06T19:22:31.500
> 
> 标签：sass, compass-sass

我在我的网站上使用指南针，并创建了一种样式，例如：

```
@include background-image(linear-gradient(top, #C9C9C9, #FFF)); 
```

问题是，这不包括旧 IE 的纯色回退。我是否只需要包含一行

```
background-color: #c9c9c9; 
```

或者有没有办法让 Compass 自动为我处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:11:23.310

据我所知，Compass 无法从背景图像声明中自动计算背景颜色，因为它的构建方式：您可以在其中有多个渐变，而 Compass 无法真正知道哪个所有这些颜色都应该是基础颜色。

我建议的一种方法是创建一个渐变包装器，如下所示：

```
=gradient-horizontal($startColor: #555555, $endColor: #333333)
    background-color: $endColor
    background-color: mix($startColor, $endColor) // Second possibility
    +filter-gradient($startColor, $endColor, horizontal)
    +background-image(linear-gradient(left, $startColor, $endColor)) 
```

# ant - ant中的propertiesFile任务怎么会改变文件中属性的顺序呢？

> ID：10920780
> 
> 赞同：0
> 
> 时间：2012-06-06T19:22:50.590
> 
> 标签：ant, properties, properties-file

取一个属性文件，如

```
#文件一
#第一节
sect1.number=测试1
sect1.sample=Test2
sect1.test=Test3

#第二节
sect2.number=测试1
sect2.sample=Test2
sect2.test=Test3

运行此蚂蚁后：
 <property file="sample1.properties"/>
<propertyfile file="sample1.properties">
   <entry key="sect1.number" value="ABC"/>
   <entry key="sect1.sample" value="B"/>
   <entry key="sect1.test" value="ABC"/>
   <entry key="sect2.number" value="B"/>                    
   <entry key="sect2.sample" value="ABC"/>
   <entry key="sect2.test" value="B"/>
</propertyfile> 

属性文件将结束为：
#更新到废话
sect2.sample=ABC
sect2.test=B
sect1.sample=B
sect1.number=ABC
sect2.number=B
sect1.test=ABC

```

请注意，评论消失了，顺序不同。

我在做什么啊，有解决办法吗？

格雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:53:28.500

我猜你使用的 Ant 版本早于 1.8。

从 1.8 开始，[propertyfile 任务](http://ant.apache.org/manual/Tasks/propertyfile.html)默认为保留注释的“布局保留”模式（并且可能保留属性顺序，但我不确定）。

在该版本中，您可以通过指定`jdkproperties=true`

**原始文件**

```
$ cat sample1.properties.original
#File One
#Section One
sect1.number=Test1
sect1.sample=Test2
sect1.test=Test3

#Section Two
sect2.number=Test1
sect2.sample=Test2
sect2.test=Test3 
```

**在我的 Ant 1.8.2 环境中使用您的构建文件创建的版本**

```
$ cat sample1.properties.default
#Mon, 11 Jun 2012 14:39:08 +0000
#File One
#Section One
sect1.number=ABC
sect1.sample=B
sect1.test=ABC

#Section Two
sect2.number=B
sect2.sample=ABC
sect2.test=B 
```

**在我的 Ant 1.8.2 环境中使用您的构建文件创建的版本，但指定 jdkproperties="true"**

```
$ mv sample1.properties sample1.properties.jdk
$ cat !$
cat sample1.properties.jdk
#Mon Jun 11 14:41:01 GMT 2012
sect2.test=B
sect1.test=ABC
sect2.sample=ABC
sect2.number=B
sect1.sample=B
sect1.number=ABC 
```

**我的蚂蚁环境**

```
$ ant -version
Apache Ant(TM) version 1.8.2 compiled on December 20 2010 
```

# objective-c - Objective-C 对象 typedef 产生奇怪的@encode 并破坏 KVC

> ID：10920781
> 
> 赞同：8
> 
> 时间：2012-06-06T19:22:52.310
> 
> 标签：objective-c, typedef

考虑以下代码：

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

typedef NSString* MyStringRef;
typedef NSString MyString;

@interface ClassA : NSObject
@property (nonatomic, copy) MyStringRef stringA;
@property (nonatomic, copy) MyString *stringB;
@end

@implementation ClassA
@synthesize stringA = _stringA;
@synthesize stringB = _stringB;
@end

int main() {
    unsigned int count = 0;
    Ivar *ivars = class_copyIvarList([ClassA class], &count);
    for (unsigned int i = 0; i < count; i++) {
        Ivar thisIvar = ivars[i];
        NSLog(@"thisIvar = %s, %s", ivar_getName(thisIvar), ivar_getTypeEncoding(thisIvar));
    }

    ClassA *a = [[ClassA alloc] init];
    NSLog(@"Out: %@", [a valueForKey:@"stringA"]);
    NSLog(@"Out: %@", [a valueForKey:@"stringB"]);
} 
```

这是输出：

```
$ clang --version
Apple clang version 3.1 (tags/Apple/clang-318.0.58) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix

$ clang -o typedef -fobjc-arc -framework Foundation typedef.m && ./typedef
2012-06-06 20:14:15.881 typedef[37282:707] thisIvar = _stringA, @"NSString"
2012-06-06 20:14:15.884 typedef[37282:707] thisIvar = _stringB, ^{NSString=#}
2012-06-06 20:14:15.885 typedef[37282:707] Out: (null)
2012-06-06 20:14:15.888 typedef[37282:707] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ClassA 0x7fabe0501480> valueForUndefinedKey:]: this class is not key value coding-compliant for the key stringB.'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff835fef56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff878e5d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff836891b9 -[NSException raise] + 9
    3   Foundation                          0x00007fff83e77703 -[NSObject(NSKeyValueCoding) valueForUndefinedKey:] + 240
    4   Foundation                          0x00007fff83dae38e _NSGetUsingKeyValueGetter + 108
    5   Foundation                          0x00007fff83dae315 -[NSObject(NSKeyValueCoding) valueForKey:] + 392
    6   typedef                             0x000000010e84bc6d main + 317
    7   typedef                             0x000000010e84b9c4 start + 52
) 
```

我在这里遇到的问题是，Objective-C 是什么导致`typedef NSString MyString`有效地创建一个包含一个类型变量的结构，`Class`然后在我使用的地方使用它`MyString`。例如结构看起来像这样（在咨询后[）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)：

```
struct NSString {
    Class a;
}; 
```

这有点道理，但会导致`valueForKey:`失败，大概是因为它现在是一个结构，所以它不能以与对象相同的方式返回它。[或者更准确地说，它属于docs 中描述](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/SearchImplementation.html#//apple_ref/doc/uid/20000955-138234-BAJCAJGJ)的搜索顺序的“抛出异常”部分。

我只是想了解导致这种情况发生的语言是什么，以及为什么它不能以同样的方式对待我的 2 个 typedef。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:07:37.377

我在 WWDC 2012 上得到了答案。事实证明，这种行为是预期的，因为它与 GCC 的二进制兼容性也是如此。

对我来说似乎很奇怪，他们会有效地引入我认为与旧 GCC 二进制兼容的错误。我希望这种事情最终会被淘汰，有利于正确的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:21:35.560

我可以重现这个，但只能使用 gcc。随着铿锵声，我得到：

```
$ clang --version
Apple clang version 1.7 (tags/Apple/clang-77) (based on LLVM 2.9svn)
Target: x86_64-apple-darwin10
Thread model: posix
$ ./a.out
2012-06-06 15:16:37.947 a.out[61063:903] thisIvar = _stringA, @"NSString"
2012-06-06 15:16:37.949 a.out[61063:903] thisIvar = _stringB, @"NSString"
2012-06-06 15:16:37.949 a.out[61063:903] Out: (null)
2012-06-06 15:16:37.950 a.out[61063:903] Out: (null) 
```

因此，clang 开发人员似乎同意你关于它应该如何工作的观点。

（我也试过 Apple clang 3.0 版。同样的好结果。）

# c++ - 如何使用链表设置显式值构造函数？

> ID：10920788
> 
> 赞同：0
> 
> 时间：2012-06-06T19:23:28.137
> 
> 标签：c++, linked-list, explicit-constructor

对于一个项目，我试图设置一个链表对象，以便可以使用显式值构造函数对其进行初始化。我希望它看起来像这样：

```
WORD you("you");//where the object you's linked list now contains y o u; 
```

但是当我打印出你的对象时，我看到的只是这个符号“=”，当我打印出你的长度时，我得到 -858993459

这是我的显式值构造函数，有人可以告诉我我做错了什么吗？

```
WORD::WORD(string s)
{
front = 0;
int i = 0;
int len = s.length();

if(front == 0)
{   
    front = new alpha_numeric;
    alpha_numeric *p = front;

    while(s[i] <= len)
    {
        p -> symbol = s[i];
        p -> next = new alpha_numeric;
        p = p -> next;
        p -> symbol = s[i++];
    }
    p -> next = 0;
}
} 
```

如果有帮助，这是类声明文件

```
#include <iostream>
#include <string>

using namespace std;
#pragma once

class alpha_numeric //node
{
public:
char symbol; //data in node
alpha_numeric *next;//points to next node
};

class WORD
{
public:
WORD(); //front of list initially set to Null
WORD(const WORD& other);
WORD(string s); //***EXPLICIT VALUE CONSTRUCTOR
bool IsEmpty(); //done
int Length();
void Add(char); //done
//void Insert(WORD bword, int position);
//void operator=(char *s);

friend ostream & operator<<(ostream & out, const WORD& w);//done

private:
alpha_numeric *front; //points to the front node of a list
int length;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:34:57.650

您已经初始化`std::string s`为. 然后你已经初始化并且你想要遍历这个字符串：`int i``0``int len``s.length();`

```
while(s[i] <= len) <----------------- THIS IS WRONG
{
    ...
    p -> symbol = s[i++];
} 
```

另请注意，复杂度[`std::basic_string::length()`](http://en.cppreference.com/w/cpp/string/basic_string/length)为 O(1)。使用临时变量没有意义`len`。你还做了很多多余的事情，比如分配`0`给`front`然后检查`if (front == 0)`。它可能看起来像这样：

```
WORD::WORD(std::string s)
{
    length = s.length();
    if (length == 0)
    {
        front = NULL
        return;
    }

    front = new alpha_numeric;
    alpha_numeric *p = front;

    int i = 0;
    while(i < length - 1)
    {
        p->symbol = s[i++];
        p->next = new alpha_numeric;
        p = p->next;
    }
    p->symbol = s[i];
    p->next = NULL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:35:36.887

你从来没有设置长度，所以这就是为什么它是垃圾。正如 luthien256 ahd LihO 指出的那样，您的 while 循环也是错误的，并且 if (front == 0) 测试没有任何意义。

最后，`p -> symbol = s[i++];`不需要。只需增加 i。

试试这个：

```
class alpha_numeric //node
{
public:
char symbol; //data in node
alpha_numeric *next;//points to next node
};

class WORD
{
public:
WORD(); //front of list initially set to Null
WORD(const WORD& other);
WORD(string s); //***EXPLICIT VALUE CONSTRUCTOR
bool IsEmpty(); //done
int Length() { return length; }
alpha_numeric *Front() { return front; }
void Add(char); //done
//void Insert(WORD bword, int position);
//void operator=(char *s);

friend ostream & operator<<(ostream & out, const WORD& w);//done

private:
alpha_numeric *front; //points to the front node of a list
int length;
};

WORD::WORD(string s)
{
  front = 0;
  int i = 0;
  int len = s.length();
  length = len;
  if (length == 0) {
    front = NULL;
    return;
  }
  front = new alpha_numeric;
  alpha_numeric *p = front;

  while(i < len)
  {
      p -> symbol = s[i];
      if (i != len - 1) {
        p -> next = new alpha_numeric;
        p = p -> next;
      }
      else
        p -> next = NULL;
      ++i;
  }
}

int main() {
  WORD you("you");
  alpha_numeric* front = you.Front();
  while(front != NULL) {
    cout<<(front->symbol)<<endl;
    front = front->next;
  }
  cout<<you.Length()<<endl;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:34:28.370

您的 while 循环不太可能正在执行。我相信：

`while(s[i] <= len)`

应该

`while(i < len)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:41:13.487

试试这个：

```
WORD::WORD(string s)
{
  int i;
  int len = s.length();

  front = new alpha_numeric;
  alpha_numeric *p = front;

  for(i = 0; i < len; i++)
  {
        p -> symbol = s[i];
        p -> next = (i == len - 1) ? 0 : new alpha_numeric;
        p = p -> next;
  }
} 
```

# c++ - 使用水平滚动条手动设置 MFC CComboBox 下拉高度

> ID：10920790
> 
> 赞同：2
> 
> 时间：2012-06-06T19:23:35.037
> 
> 标签：c++, drop-down-menu, mfc, height, ccombobox

我有一个 C++ MFC CComboBox (VS 2010)，用户可以输入文本并单击“保存”按钮，将其文本插入下拉列表以供以后调用/使用。当文本对于框来说太长时，我需要一个滚动条，所以我在资源文件中设置了 WS_HSCROLL 并使用 m_Combo.SetHorizo​​ntalExtent(x)，它工作得很好。

我遇到的问题是，在有水平滚动的地方，一条线被它覆盖，并且垂直滚动条似乎滚动到该项目。我努力了

```
m_Combo.MoveWindow(&rctDropDown) //rctDropDown was first pulled out and modified
::SetWindowPos() //called after modifying values from ::GetWindowRect()
r.OffsetRect() //where r is from m_Combo.GetDroppedControlRect(&r) 
```

过去几天可能更多，但似乎没有什么可以覆盖不考虑水平滚动的下拉菜单的自动调整大小。我是 MFC 的新手，在绝望的谷歌搜索中发现了这些建议。

简而言之，有没有办法覆盖自动高度或扩展它？我知道如何在资源编辑器中调整它的大小，但我想在运行时调整代码的大小，一切似乎都被忽略了。这是我在重现错误的测试项目中的函数：

```
void CtestDlg::StoreClicked()
{
    CString l;
    m_Combo.GetWindowText(l);
    m_Combo.InsertString(0, l);
    m_Combo.SetCurSel(0);
    UpdateList();
}

void CtestDlg::UpdateList()
{
    // Find the longest string in the list box.
    CString     str;
    CSize       sz;
    TEXTMETRIC  tm;
    CDC*        pDC = m_Combo.GetDC();
    CFont*      pFont = m_Combo.GetFont();

    int         x = 0;
    int         y = 0;

    // Select the listbox font, save the old font
    CFont* pOldFont = pDC->SelectObject(pFont);
    // Get the text metrics for avg char width
    pDC->GetTextMetrics(&tm); 

    for(int i = 0; i < m_Combo.GetCount(); i++)
    {
        m_Combo.GetLBText(i, str);
        sz = pDC->GetTextExtent(str);

        // Add the avg width to prevent clipping
        sz.cx += tm.tmMaxCharWidth;

        m_Combo.SetItemHeight(i, sz.cy);

        if (sz.cx > x)
            x = sz.cx;

        y += sz.cy;
    }
    // Select the old font back into the DC
    pDC->SelectObject(pOldFont);
    m_Combo.ReleaseDC(pDC);
    m_Combo.SetHorizontalExtent(x);

    ////////////////////////////////
    //manually change height here?//
    ////////////////////////////////
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:09:53.097

如果放置的列表框不够宽，则不要添加水平滚动条并允许滚动，您可以相应地设置放置的列表框的宽度。

代替

```
m_Combo.SetHorizontalExtent(x); 
```

和

```
m_Combo.SetDroppedWidth(x); 
```

# javascript - jQuery 动画运行一次

> ID：10920792
> 
> 赞同：0
> 
> 时间：2012-06-06T19:23:43.237
> 
> 标签：javascript, jquery, jquery-animate

我有一个像这样的简单代码：

```
<input id="Button1" type="button" value="button" />    
<table border="1" cellpadding="0" cellspacing="0" width="400px">
    <tr id="tr1">
        <td>
            1
        </td>
        <td>
            nima
        </td>
    </tr>
    <tr id="tr2">
        <td>
            2
        </td>
        <td>
            agha
        </td>
    </tr>
    <tr id="tr3">
        <td>
            3
        </td>
        <td>
            ligha
        </td>
    </tr>
</table> 
```

我写这段代码来改变第一行的背景

```
 $(document).ready(function () {
        $('#Button1').on('click', function () {
            $('#tr1').stop()
                     .animate({ backgroundColor: "aqua" },800)
                     .stop()
                     .animate({backgroundColor: "white"},800);
        });
    }); 
```

但它只运行一次，当我再次点击时`Button1`没有任何改变。哪里有问题？

（我使用[jQuery.Color](https://github.com/jquery/jquery-color)插件）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:32:27.560

```
$(document).ready(function () {
    $('#Button1').bind('click', function () {
       $('#tr1').animate({ backgroundColor: "aqua" },800)
             .animate({backgroundColor: "white"},800);
     });
});​ 
```

这适用于谷歌浏览器......试试看

# java - java jlist有时不完全显示其中一项

> ID：10920798
> 
> 赞同：0
> 
> 时间：2012-06-06T19:23:57.637
> 
> 标签：java, swing, jscrollpane, jlist

我在使用 Jlist 时遇到问题。我有 ScrollPane，并在其中添加了 Jlist。有时我看不到列表中的第一项。（我也看到列表中其他项目的这种行为）

我很感激任何帮助。

谢谢，![在此处输入图像描述](../Images/bcb49ddbbc3ffe06e5a3011b797d3e00.png)

这是代码片段

-JList 创建：

```
 jAllScrollPane = new JScrollPane();
    jAllScrollPane.getViewport().add(allNetLayer);
    allNetLayer.setVisibleRowCount(3); 
```

*   我通过以下方法将项目添加到 JList

    ```
     void addItemToList(String lay)
     {
            layerInit =1;
            if(lay.compareTo("All") ==0)
            {
                 listData.clear();
            }
            if(lay.compareTo("DONE") == 0)
            {
                 allLay.setListData(listData);
                 jAllScrollPane.updateUI();
            }
            else
            {
                 listData.addElement(lay);
            }
            layerInit =0;
      } 
    ```

*   图形用户界面创建：

    ```
     javax.swing.GroupLayout jLogPanelLayout = new javax.swing.GroupLayout(jLogPanel);
    jLogPanel.setLayout(jLogPanelLayout);
    jLogPanelLayout.setHorizontalGroup(
                ....
                ....
                .addComponent(jAllScrollPane, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 200, javax.swing.GroupLayout.DEFAULT_SIZE))
                ....
                ....
            .addContainerGap())
    );
         jLogPanelLayout.setVerticalGroup(
            ....
            ....
             .addComponent(jAllScrollPane, javax.swing.GroupLayout.PREFERRED_SIZE, 190, javax.swing.GroupLayout.PREFERRED_SIZE)
             ....
             ....
            .addGap(20,20,20))))

    );
    jTabbedPane1.addTab("All", jLogPanel); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:23:45.863

您发布的代码非常混乱。编译它也非常困难。

我唯一能为你做的就是

*   建议 - 阅读@mKorbel 评论并将其铭记于心
*   使用更简单的布局 - `BorderLayout`,`GridLayout`等或`MigLayout`
*   `fire*(data changed)`在 Swing 模型上使用方法，repaint()
*   您可以使用`new JScrollPane(<panel inside>)`
*   `addItemToList`应该有[单一的责任](http://www.codinghorror.com/blog/2007/03/curlys-law-do-one-thing.html)- 将项目添加到列表中 - 条件不应该存在
*   您不应重置整个列表模型数据以添加一项
*   你可以做`import`- 而不是每次都写`javax.swing.GroupLayout`
*   创建 GUI 时不应创建状态 -`layerInit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:45:06.683

而不是使用：

```
jAllScrollPane = new JScrollPane();
jAllScrollPane.getViewport().add(allNetLayer); 
```

要添加组件，请使用[JScrollPane.html#setViewportView(java.awt.Component)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)方法（如果您不想使用带参数的 JScrollPane 构造函数）。

> 不直接向 JScrollPane 构造函数提供视图的应用程序应使用此方法来指定将在滚动窗格中显示的可滚动子项。

# android - 如何在 Android 的自定义 DialogPreference 中隐藏取消按钮？

> ID：10920799
> 
> 赞同：9
> 
> 时间：2012-06-06T19:23:59.197
> 
> 标签：android, android-dialog

如何在 Android 的自定义 DialogPreference 中隐藏取消按钮？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T19:23:59.587

覆盖 onPrepareDialogBu​​ilder 并将其设置为 null 那里。

```
/** Hide the cancel button */
@Override
protected void onPrepareDialogBuilder(Builder builder) {
    super.onPrepareDialogBuilder(builder);
    builder.setNegativeButton(null, null);
} 
```

# php - 如何使用 PHP 从 AD (LDAP) 获取所有专有名称 (DN) 的列表？

> ID：10920803
> 
> 赞同：1
> 
> 时间：2012-06-06T19:24:05.243
> 
> 标签：php, active-directory, ldap, distinguishedname

我想获取 Active Directory 中所有 DN 的列表，同时只有基本 DN。

还有所有组和组成员的列表。

使用的语言是 PHP。

如果 PHP 不适合这项任务，您会推荐哪种语言？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:33:30.497

PHP 有一个[LDAP 扩展](http://www.php.net/manual/en/book.ldap.php)。只要您的 PHP 安装启用了该扩展，您就应该能够毫不费力地连接到 AD 服务器并执行您的查询。

之后，只需[执行基本的函数调用](http://php.net/manual/en/ldap.examples-basic.php): `ldap_connect()`, `ldap_bind()`, `ldap_search()`，`ldap_get_entries()`然后遍历结果集。

请记住，如果您希望对 AD 执行更改（这里似乎不是这种情况），您必须通过 SSL 连接，这[可能有一些问题](http://www.php.net/manual/en/function.ldap-connect.php#36156)涉及让 PHP 将您的 AD 的 SSL 证书视为可信.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:43:28.010

利用：

*   为基础对象使用空字符串或您的基础 DN
*   `(objectClass=*)`对于过滤器
*   `wholeSubtree`或`2`或`sub`用于搜索范围
*   `1.1`对于请求的属性列表。

`1.1`是一个不匹配任何属性类型的 OID，服务器应该只返回可分辨的名称（无属性）。`(objectClass=*)`是一个*存在*过滤器 - 所有 LDAP 条目都至少具有该`objectClass`属性。

这将返回所有可分辨名称的列表——假设目录服务器管理员允许 LDAP 客户端搜索目录服务器数据库（一些管理员不允许这样做）。

组专有名称也将被返回。哪些条目是组的成员将取决于用于命名成员的属性。

# clang - （clang）如何自己解析宏，尽可能获得 ast？

> ID：10920809
> 
> 赞同：12
> 
> 时间：2012-06-06T19:24:37.860
> 
> 标签：clang

嗨，我正在使用 clang 从 c 文件中提取信息。我正在尝试提取宏的值。

例如，我想要值'13'或ast（+（* 3 4）1）：

```
#define SOME_CONSTANT 3*4+1 
```

或从宏函数，我想要一个 ast 例如 (SOME_MACROFUNC (xy) (+ (add4 x) (* y 9))) ：

```
int add4(int q) {return q+4;}
#define SOME_MACROFUNC(x,y) add4(x)+y*9 
```

到目前为止，我已经设法通过“预处理器”类的 macro_begin() 和 macro_end() 函数遍历所有宏。

然后我得到了宏名称，并且从“MacroInfo”类中我能够得到宏是否是函数式的（包括参数名称）。我还可以访问宏中的标记，但我只能获取标记类型，例如：string_literal、标识符、逗号、l_paren、r_paren 等。

所以有两件事：

1.  我如何访问代币的实际价值，而不仅仅是它们的种类。

2.  有没有办法从给定令牌的宏中生成 ast？我认为的一种方法是解析我的源代码，然后提取宏，并使用它们的名称，将包括这些宏的代码添加到我的源代码中，然后重新解析它以获得 ast。

例如：

```
char *tempSOME_CONSTANT = SOME_CONSTANT;    
void tempSOME_MACROFUNC(char *x, char *y) {SOME_MACROFUNC(x,y);} 
```

虽然这种方法看起来真的很hacky，并且可能会遇到不是语句或表达式的宏的问题。

谢谢。

编辑：澄清我主要想要每个宏的扩展主体（直到没有宏，只有非宏标记）。

edit2 解决了一些问题：

如果有人感兴趣，我打算手动扩展宏的主体。

"preprocessor.getSpelling(token)" 获取令牌值。

“preprocessor.getIdentifierTable().get(StringRef(spelling))”获取令牌的 identinfo。

并使用“clang\lib\Lex\PPMacroExpansion.cpp”作为参考。

仍在考虑如何在不重新解析整个源代码树的情况下将其传递给解析器，但这应该不难弄清楚。

感谢 Ira Baxter 的讨论，它帮助我解决了这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T00:31:19.030

我正在做一些非常相似的事情。我使用 clang 前端来收集定义宏的上下文（wrt 类、函数等），然后使用（伪）表达式解析器来确定宏体是否是有效的表达式。最终目标是将宏转换为 C++ 声明。最近，我们收到了一篇被[ICSM](http://selab.fbk.eu/icsm2012/) -2012 接受的论文，解释了我们如何实现这一目标。

用于摆脱宏的工具 - demacrofier- 托管[在这里](https://github.com/hiraditya/cpp2cxx)

Ira Baxter 的示例在宏的使用方式上非常有见地。但是，这些宏的百分比非常少 \ref（Ernst 等人对 C 预处理器使用的实证分析）。目前，我更多地关注常见案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T03:09:20.113

一种可能有用也可能没用的技巧是将所有类似函数的宏暂时重新定义为函数。在你的情况下：

`#define SOME_MACROFUNC(x,y) add4(x)+y*9`

会变成

`extern int SOME_MACROFUNC(int x, int y);`

然后，您可以通过常规的 AST Matcher 或访问者运行它，并执行您需要的任何处理（包括重构，如果合适）。这不能很好地扩展，但如果宏的数量是众所周知且有限的，它可能是一个可以接受的解决方案。

为了使这个更清晰，您可以创建一个仅由 clang 使用的单独头文件，并确保在运行分析时 clang 首先找到它，这样您就不需要修改原始源库。

# linux - Linux 中时钟之间的差异（CLOCK_MONOTONIC、CLOCK_REALTIME、CLOCK_SGI_CYCLE 等）

> ID：10920818
> 
> 赞同：0
> 
> 时间：2012-06-06T19:25:10.080
> 
> 标签：linux, performance, time

我在哪里可以找到这方面的文档？哪个精度更高？哪个性能更好？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:38:53.943

这是一个很好的测试程序，用于研究各种系统时钟的差异：

[http://lwn.net/Articles/105582/](http://lwn.net/Articles/105582/)

它们的分辨率相同，但它们各自测量不同的事物。

# jquery-ui - jqGrid 在 Razor 视图中表现怪异

> ID：10920819
> 
> 赞同：0
> 
> 时间：2012-06-06T19:25:10.640
> 
> 标签：jquery-ui, jqgrid

使用 jquery 时，我从我的剃刀视图中遇到了奇怪的行为。加载某些模态窗口时，似乎我的视图发生了 css 更改？ ![原始 CSS](../Images/cf60c50b9afffef067f588023e37f373.png)

![字符串更大，你能看到吗](../Images/8f2c568f9ec25d803e8bf8363c93da10.png)

我无法开始告诉你为什么会这样。我基本上使用 MVC 2 创建了相同的视图，并且在 CSS 重载方面没有遇到什么问题。你们有没有遇到过类似的问题？特别是在您的应用程序中加载 Jquery UI 和 jqGrid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:32:05.333

[可能您遇到的问题与答案](https://stackoverflow.com/a/10936623/315935)中描述的问题相同（或非常接近的问题）。所以我建议你添加你的 CSS

```
.ui-jqgrid { font-size: 11px !important; } 
```

或者以下CSS

```
.ui-jqgrid .ui-jqgrid-view { font-size: 11px; }
.ui-jqgrid .ui-jqgrid-pager { font-size: 11px; }
.ui-jqgrid .loading { font-size: 11px; } 
```

# scala - 从 Manifest[T] 创建 Class[T] 而不进行强制转换

> ID：10920820
> 
> 赞同：1
> 
> 时间：2012-06-06T19:25:17.957
> 
> 标签：scala, type-erasure, raw-types

给定一个`ev: Manifest[T]`我可以得到一个`Class[T]`using `ev.erasure.asInstanceOf[Class[T]]`。很遗憾，`ev.erasure`仅返回静态类型的`Class[_]`.

我可以`Class[T]`从清单中获得一个而不进行强制转换吗？如果不是，那么有福的 Scala 创造者在方法中选择原始返回类型是有原因的`erasure`吗？

我知道这可能对大多数代码的影响可以忽略不计，但我在一段可以说是非惯用的 Scala 代码中遇到了这个问题，并且比其他任何事情都好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:38:31.650

返回已擦除类型的原因是它`Manifest`几乎总是用在您*实际上*没有类型的泛型代码中。这迫使您明确声明您的意图，而不是错误地假设它实际上检查了类型是否是您想要的类型。

您当然可以使用丰富我的库模式来添加您自己的保留类型的方法：

```
class ClassFriendlyManifester[T](m: Manifest[T]) {
  def toClass = m.erasure.asInstanceOf[Class[T]]
}
implicit def manifests_like_classes[T](m: Manifest[T]) = new ClassFriendlyManifester(m)

def example[T: Manifest] = implicitly[Manifest[T]].toClass

scala> example[String]
res2: Class[String] = class java.lang.String

def example2[T](implicit ev: Manifest[T]) = ev.toClass

scala> example2[String]
res5: Class[String] = class java.lang.String 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T21:42:12.523

No, you have to do the cast yourself — and it should be so. This cast is potentially unsafe, depending on what you want to do with the returned `Class` instance. Imagine I want to roll in my own version of a cast:

```
def cast[T](obj: Any)(implicit m: Manifest[T]) =
  m.erasure.asInstanceOf[Class[T]].cast(obj) 
```

This is dangerous — as indicated by the unchecked `asInstanceOf`. Why? Because this code runs fine with such nonsense, for instance:

```
val listInt = List(1, 2, 3)
val listString = cast[List[String]](listInt) 
```

There, a `List[Int]` typed as a `List[String]`. And this compiles and runs fine, but you'll probably get a `ClassCastException` later in your code at an unexpected line. That's why you cannot directly get a `Class[T]` from a `Manifest[T]` — because it is unsafe.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T21:49:38.310

Scala 的类型系统没有足够的表现力来为`erasure`. 正确的类型类似于[`getClass()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29):

> 实际结果类型是`Class<? extends |X|>`|X| 是调用 getClass 的表达式的静态类型的擦除。

在这种情况下，我认为正确的类型应该是`Class[|X|]`（因为`Manifest[T]`它的类型参数是不变的）。这与 不同`Object.getClass()`，因为在这种情况下静态类型和运行时类型可能不同：

```
Number n = 0; 
Class<? extends Number> c = n.getClass(); 
```

在这里，运行时类型`c`是`Class<Integer>`，而不是`Class<Number>`。

# php - 根据数组值设置复选框选中状态

> ID：10920821
> 
> 赞同：2
> 
> 时间：2012-06-06T19:25:36.600
> 
> 标签：php, html, php-5.3

假设我最初在这样的页面上有一堆复选框输入：

```
<input type="checkbox" name="vehicle" value="Car" /> Car<br />
<input type="checkbox" name="vehicle" value="Bike" /> Bike<br />
<input type="checkbox" name="vehicle" value="Motorcycle" /> Motorcycle<br />
<input type="checkbox" name="vehicle" value="Bus" /> Bus<br />
<input type="checkbox" name="vehicle" value="Car" /> Train<br /> 
```

现在假设我有一个这样的数组：

```
$my_array = array(
    'first' => 'Bike', 
    'second' => 'Car', 
    'third' => 'Train'
); 
```

如您所见，我的数组包含与我的复选框的值相对应的值。

现在，如何根据我的数组的值设置每个复选框输入的状态，并使复选框即使在使用 php 刷新页面时也保持选中状态？换句话说，我想在我的页面上显示所有复选框，但只有那些值与我的数组中的值匹配的复选框才应该在页面上检查。这可能只使用直接的 PHP 还是我需要 javascript？

请问有什么想法吗？我几乎尝试了一切都没有成功

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:34:24.450

当然，你可以用 PHP 做到这一点......

```
<input type="checkbox" name="vehicle" value="Car" <?php if(in_array('Car', $my_array)) echo( 'selected = "selected"'); ?>/> Car<br /> 
```

冲洗并重复所有复选框。

但是，如果您还保留一个包含所有可能选项的数组，那会更聪明。然后您可以遍历该数组并检查该数组中的每个条目以查看它是否也存在于您的“选定”数组中。

# javascript - 始终使用 jQuery 激活特定 id 的第一个 ul 列表和第一个 div

> ID：10920824
> 
> 赞同：1
> 
> 时间：2012-06-06T19:25:56.067
> 
> 标签：javascript, jquery, html, tabs, navigation

**问题：**

我有可以在选项卡之间完美切换的 jQuery 代码。但是，我想知道如何扩展它，以便它也激活 each 的第一个子元素`id`。

**HTML 选项卡导航代码：**

```
<div id="navtabs">
    <div>
        <a href="#tab1" class="active btn btn-info" data-toggle="tab"><i class="icon-home"></i>Start</a>
        <a href="#tab2" class="btn btn-info" data-toggle="tab"><i class="icon-book"></i>Essay</a>
        <a href="#tab3" class="btn btn-info" data-toggle="tab"><i class="icon-ok-sign"></i>Criteria</a>
        <a href="#tab4" class="btn btn-info" data-toggle="tab"><i class="icon-time"></i>Time</a>
    </div>
</div> 
```

**例如选项卡的代码：**

```
<div class="tab-pane" id="tab2">

    <ul id="myTab" class="nav nav-tabs">
        <li class="active"><a href="#participants" data-toggle="tab">Participants</a></li>
        <li><a href="#gradevalues" data-toggle="tab">Criteria</a></li>
    </ul>

    <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade in active" id="participants">Text</div>
        <div class="tab-pane fade" id="gradevalues">Text</div>
    </div>

</div> 
```

**jQuery代码：**

```
$('#navtabs a[data-toggle="tab"]').on('shown', function () {
    $('#navtabs a[data-toggle="tab"]').attr('class','btn btn-info');
    $(this).attr('class','active btn btn-info');
}) 
```

**设想：**

当***`#tab2`***我点击第二
个`li`标签`#myTab`
（`div``#myTabContent`

也就是说，始终确保`"class=active"`第一个`li`元素和`"class=tab-pane fade in active"`第一个元素都有一个`div`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:34:13.653

尝试这个：

```
$('#navtabs a[data-toggle="tab"]').on('shown', function () {
    $('#navtabs a[data-toggle="tab"]').attr('class','btn btn-info');
    $(this).attr('class','active btn btn-info');

    var tabID = $(this).attr('href');
    var lis = $(tabID).find('#myTab li');//Get collection of li's
    $.each(lis, function(){
        $(this).removeClass('active'); //Remove the active class from each li
    });   
    $(tabID).find('#myTab li:eq(0)').addClass('active');//Add active class 

    //Same process for divs
    var divs = $(tabID).find('#myTabContent div');
    $.each(divs, function(){
        $(this).removeClass('in active');
    });
    $(tabID).find('#myTabContent div:eq(0)').addClass('in active');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:04:40.840

这就是我想出的，它工作得很好。我只需要获取它使用的是哪个选项卡：

```
$(this).attr('href') 
```

最终代码如下所示：

```
$('#navtabs a[data-toggle="tab"]').on('shown', function () 
{
    $('#navtabs a[data-toggle="tab"]').attr('class','btn btn-info');
    $(this).attr('class','active btn btn-info');

    var lis = $($(this).attr('href')).find('#myTab li');

    $.each(lis, function(){
        $(this).removeClass('active');
    });

    $($(this).attr('href')).find('#myTab li:eq(0)').addClass('active');

    var divs = $($(this).attr('href')).find('#myTabContent div');

    $.each(divs, function(){
        $(this).removeClass('in active');
    });

    $($(this).attr('href')).find('#myTabContent div:eq(0)').addClass('in active');

}); 
```

# maven - Maven 编译正常，但是 jar 中生成的 cxf toString 失败并出现 NoClassDefFoundError

> ID：10920825
> 
> 赞同：0
> 
> 时间：2012-06-06T19:25:58.297
> 
> 标签：maven, cxf

我添加了一个 cxf 插件来在所有创建的类上生成 toString()。该方法已添加并编译正常，但是当我将 maven 打包的 jar 添加到另一个项目的构建路径并将对象添加到我的 toString 时，我收到：

```
java.lang.NoClassDefFoundError: org/apache/cxf/xjc/runtime/JAXBToStringStyle
    at com.resx.services.Profile.toString(Profile.java:420)
    at java.lang.String.valueOf(String.java:2826)
    ...
Caused by: java.lang.ClassNotFoundException: org.apache.cxf.xjc.runtime.JAXBToStringStyle 
```

我假设我的 pom 设置错误，但我不确定。这是 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.trx</groupId>
  <artifactId>resxWebservices</artifactId>
  <version>10.4.1</version>

  <name>resxWebservices</name>
  <packaging>jar</packaging>

  <build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
      <plugin>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-codegen-plugin</artifactId>
        <version>2.6.0</version>
        <executions>
          <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
              <sourceRoot>src</sourceRoot>
              <wsdlOptions>
                <wsdlOption>
                  <wsdl>./resxWebservices.wsdl</wsdl>
                  <extraargs>
                    <extraarg>-xjc-Xts</extraarg>
                  </extraargs>
                </wsdlOption>
              </wsdlOptions>
            </configuration>
            <goals>
              <goal>wsdl2java</goal>
            </goals>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>org.apache.cxf.xjc-utils</groupId>
            <artifactId>cxf-xjc-runtime</artifactId>
            <version>2.6.0</version>
          </dependency>
          <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
          </dependency>
          <dependency>
            <groupId>org.apache.cxf.xjcplugins</groupId>
            <artifactId>cxf-xjc-ts</artifactId>
            <version>2.6.0</version>
          </dependency>
        </dependencies>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <verbose>true</verbose>
          <fork>true</fork>
          <executable>${JAVA_HOME}/bin/javac</executable>
          <compilerVersion>1.6</compilerVersion>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <dependencies>
    <dependency>
      <groupId>org.apache.cxf.xjc-utils</groupId>
      <artifactId>cxf-xjc-runtime</artifactId>
      <version>2.6.0</version>
    </dependency>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.6</version>
    </dependency>
    <dependency>
      <groupId>org.apache.cxf.xjcplugins</groupId>
      <artifactId>cxf-xjc-ts</artifactId>
      <version>2.6.0</version>
    </dependency>
  </dependencies>
</project> 
```

我也尝试过添加

```
<scope>compile</scope> 
```

到具有相同问题的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:31:24.403

当您运行另一个项目时，您还需要确保 cxf jar 在类路径中可用。

您应该将您的第一个项目列为第二个项目的依赖项，以确保传递正确的依赖项（而不是仅将 jar 本身添加到构建路径）

或者，为第一个项目创建一个包含 cxf jar 的 jar-with-dependencies，并将其添加到第二个项目的 duild/runtime 类路径

# ruby - 使用 Mustache Ruby API 提取键名？

> ID：10920826
> 
> 赞同：2
> 
> 时间：2012-06-06T19:26:05.280
> 
> 标签：ruby, mustache

Ruby Mustache API 是否有办法从模板返回键名？

举个例子：

```
require 'mustache'
m = Mustache.new
m.template = "Hello {{first_name}} {{last_name}}" 
```

我想做一个 API 调用——但我不知道它是什么——它返回键名：

```
[:first_name, :last_name] 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:48:17.140

巧合的是，我已经这样做了。

IIRC 我需要做的就是实现这样的`tokens`方法：

```
class Mustache::Template
  def tokens(src = @source)
    p = ::Mustache::Parser.new
    p.otag = PMustache::DEFAULT_MUSTACHE_OTAG
    p.ctag = PMustache::DEFAULT_MUSTACHE_CTAG
    p.compile(src)
  end
end 
```

（您可以忽略`PMustache::DEFAULT_MUSTACHE_xTAG`s，它们用于设置默认分隔符。）

像这样给它提供一个模板：

```
[1] pry(main)> require 'pmustache'
=> true
[2] pry(main)> f = Mustache.new
=> #<Mustache:0x007fce2192b520>
[3] pry(main)> f.template = "this is {{a}} test"
=> "this is {{a}} test" 
```

允许访问令牌：

```
[5] pry(main)> f.template.tokens
=> [:multi,
 [:static, "this is "],
 [:mustache, :etag, [:mustache, :fetch, ["a"]]],
 [:static, " test"]] 
```

从那里我认为你基本上想要`:mustache`标签：

```
[6] pry(main)> p_toks = lambda { |tok| (tok.instance_of? Array) && (tok[0] == :mustache) }      
=> #<Proc:0x007fce228b0b08@(pry):6 (lambda)>
[7] pry(main)> f.template.tokens.find_all(&p_toks)      
=> [[:mustache, :etag, [:mustache, :fetch, ["a"]]]] 
```

我那里还有一些其他的黑客；我们有点分隔的模板变量并将它们呈现在用户界面上（可能或多或少你在做什么）所以我们可以按功能对它们进行分组，从 JSON 对象加载它们，等等等等。

您可能只需要某些令牌类型；从编译后的模板中提取标记是直截了当的，所以一旦你向它扔了一些模板，你就会看到你需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:17:57.653

没有专门的方法可以做到这一点，但作为开始，您可以考虑以下事项：

```
>> pp Mustache::Template.new('Hello {{first_name}} {{person.last_name}}').tokens
[:multi,
 [:static, "Hello "],
 [:mustache, :etag, [:mustache, :fetch, ["first_name"]]],
 [:static, " "],
 [:mustache, :etag, [:mustache, :fetch, ["person", "last_name"]]]] 
```

编写提取相关键的遍历应该相当容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-27T16:22:22.677

利用[`Mustache::Template#tags`](https://github.com/mustache/mustache/blob/02050f4d06e2d6fcd43a9ded6d197ad235ef96b4/lib/mustache/template.rb#L61)

```
>> Mustache::Template.new('Hello {{first_name} {{last_name}}').tags
[
    [0] "first_name",
    [1] "last_name"
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T18:48:59.060

当您只有简单的键名时，这样的一些看起来可以正常工作：

```
tokens = Mustache::Template.new('Hello {{first_name}} {{person.last_name}}').tokens
pp tokens.find_all{|token| token.is_a?(Array) && token[0] == :mustache }.map{|token| token[2][2]} 
```

对于您的确切愿望，您可能需要以下内容：

```
pp tokens.find_all{|token| token.is_a?(Array) && token[0] == :mustache }.map{|token| token[2][2].last.to_sym}.flatten 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T19:33:11.110

在这一点上，我认为 API 不支持这一点。我搜索了 mustache 0.99.4 版本的源代码。我发现的最接近的是[context.rb](https://github.com/defunkt/mustache/blob/master/lib/mustache/context.rb)`has_key?`中的and`fetch`方法。在阅读了这些方法之后，似乎密钥没有被缓存。

# c# - 在删除文件之前“关闭”IsolatedStorage 中的文件

> ID：10920828
> 
> 赞同：-1
> 
> 时间：2012-06-06T19:26:15.493
> 
> 标签：c#, silverlight, windows-phone-7

我正在为 Windows Phone 7 编写一个应用程序，其中我将图像保存到独立存储。当我加载它们时，我无法关闭打开的图像流，因为我的程序的其他部分需要能够读取它们才能正确显示图像。当我准备好删除/更改隔离存储中的文件本身时，我只想关闭这些流。

但是，当我准备好删除这些图像时，我不再能够访问我在打开它们时使用的本地 IsolatedStorageFileStream 变量。

此时有没有办法以某种方式“关闭”这些文件（除了重新启动我的应用程序）？否则我似乎无法删除它们。

这就是我将图像写入独立存储的方式：

```
 Dictionary<string, Stream> imageDict = (Dictionary<string, Stream>)Globals.CNState["ATTACHMENT"];
    foreach (string pic in imageDict.Keys)
    {
      Stream input = imageDict[pic];
      input.Position = 0;
      byte[] buffer = new byte[16*1024];

      using (FileStream thisStream = myISF.OpenFile(thisDirectory + pic, FileMode.Create))
      {
        int read = input.Read(buffer, 0, buffer.Length);
        while (read > 0)
        {
          thisStream.Write(buffer, 0, read);
          read = input.Read(buffer, 0, buffer.Length);
        }
      }
    } 
```

这就是我稍后加载它们的方式（如您所见，我保持它们打开）：

```
 string[] storedImages = myISF.GetFileNames(thisDirectory);
  if(storedImages.Length > 0)
  {
    foreach(string pic in storedImages)
    {
      IsolatedStorageFileStream imageStream = myISF.OpenFile(thisDirectory + pic, FileMode.Open, FileAccess.Read, FileShare.Read);
      imageDict.Add(pic, imageStream);
    }
  }

  Globals.CNState["ATTACHMENT"] = imageDict; 
```

我无法关闭这些，因为我的应用程序的另一部分需要从它们的文件流中创建图像（这可能需要多次发生）：

```
 if (Globals.CNState != null && Globals.CNState.ContainsKey("ATTACHMENT"))
  {
    imageDict = (Dictionary<string, Stream>)Globals.CNState["ATTACHMENT"];
    foreach (string key in imageDict.Keys)
    {
      Stream imageStream = imageDict[key];

      Image pic = new Image();
      pic.Tag = key;
      BitmapImage bmp = new BitmapImage();
      bmp.SetSource(imageStream);
      pic.Source = bmp;
      pic.Margin = new Thickness(0, 0, 0, 15);
      pic.MouseLeftButtonUp += new MouseButtonEventHandler(pic_MouseLeftButtonUp);
      DisplayPanel.Children.Add(pic);
    }
  } 
```

我还需要保持流打开，因为我的程序的另一部分将这些图像发送到服务器，据我所知，我只能发送字节流，而不是 UIElement。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:05:27.110

除非您正在处理大量数据大小，否则您应该在将文件流加载到内存后立即关闭它们。例如，如果您正在加载图像，则应在创建图像对象后关闭流。

# ruby-on-rails - 大礼包自定义菜单

> ID：10920832
> 
> 赞同：0
> 
> 时间：2012-06-06T19:26:36.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spree

我需要自定义 Spree (v1.1.1) 菜单，因为它实际上只有“主页”链接。

我尝试通过创建覆盖作为

```
Deface::Override.new(:virtual_path => "spree/shared/_main_nav_bar",
                 :name => "home-link",
                 :remove => "#home-link") 
```

在这里，我只是想删除“Home”以查看它是否有效。而且我还尝试创建一个视图`/app/views/spree/shared/_main_nav_bar.html.erb`，但什么也没有，我无法让它工作。

我能怎么做？那么，为什么有时它会覆盖模板，而有时我确实需要覆盖来改变基本布局？我已经阅读了该指南，但我找不到任何关于此的解释。它不应该只适用于我的覆盖/自定义视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:09:24.493

我刚遇到和你类似的问题。结果，我创建了 gem 来管理 spree 中的菜单栏：[spree_essential_menus](http://blog.brzezinka.eu/projects/spree-essential-menus-menu-management-plugin-for-spree-ecommerce?utm_source=rss&utm_medium=rss&utm_campaign=spree-essential-menus-menu-management-plugin-for-spree-ecommerce)。

我认为它可以帮助你:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:41:39.410

您正在匹配一个不存在的文件。您要查找的文件位于[https://github.com/spree/spree/blob/1-1-stable/core/app/views/spree/shared/_store_menu.html.erb](https://github.com/spree/spree/blob/1-1-stable/core/app/views/spree/shared/_store_menu.html.erb)

所以你希望你的代码看起来像这样：

```
Deface::Override.new(:virtual_path => "spree/shared/_store_menu",
             :name => "home-link",
             :remove => "#home-link") 
```

当您浏览 github 上的 spree 视图时，请确保您正在查看您正在使用的版本的分支。“_main_bar_nav.html.erb”在 1.1.stable 分支上不存在，但在 master 上存在。

至于什么时候用哪个，那要看你想换多少了。如果你正在做小的调整，我会使用 deface。如果您正在检修整个视图系统（通常在大型构建中推荐），那么您想要替换视图。

# c# - 服务不会部署在服务器上

> ID：10920834
> 
> 赞同：0
> 
> 时间：2012-06-06T19:26:44.360
> 
> 标签：c#, windows-services

尝试将服务安装到当前在 .Net Framework 2.0 下运行的服务器上。当我从安装项目运行 .MSI 文件时，所有内容都会被复制，但是当我在 SMC 下检查时，该服务不存在。此外，当我尝试使用 InstallUtil 安装服务时，系统会提示我在程序集中找不到具有 RunInstallerAtrribute.Yes 属性的公共安装程序。当我检查我的 ProjectInstaller.cs 时，一切看起来都很好。此外，我可以在我的计算机上正常安装，并且我在服务器和我的盒子上都拥有管理员权限。

这是 ProjectInstaller.cs 文件

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Configuration.Install;

namespace MyService
{
    [RunInstaller(true)]
    public partial class ProjectInstaller : Installer
    {
        public ProjectInstaller()
        {
            InitializeComponent();
        }
    }
} 
```

编辑：服务器当前运行的是 Windows 2003 R2 Service pack 2。个人计算机正在运行 Windows 7 和 Visual Studios 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:54:35.713

下面是一些安装服务的代码示例：

```
[RunInstaller(true)]
public class InstallMyService : Installer
{
    public InstallMyService()
    {
        var svc = new ServiceInstaller();

        svc.ServiceName = "MyService";
        svc.Description = "This is a service";
        svc.DisplayName = "My Service";
        svc.StartType = ServiceStartMode.Automatic;

        var svcContext = new ServiceProcessInstaller();
        svcContext.Account = ServiceAccount.LocalSystem;

        Installers.Add(svc);
        Installers.Add(svcContext);
    }
} 
```

# objective-c - 无法识别的选择器发送到实例，原因

> ID：10920836
> 
> 赞同：1
> 
> 时间：2012-06-06T19:27:01.577
> 
> 标签：objective-c, ios, xcode, exception

每当我打电话

```
self.gLViewController = [[GLViewController alloc] initWithNibName:@"GLViewController" bundle:nil];
       [self.navigationController pushViewController:self.gLViewController animated:YES]; 
```

我收到以下错误：

```
2012-06-06 15:22:50.329 NavApp[5357:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MiniGamesViewController setGLViewController:]: unrecognized selector sent to instance 0x1f6aa730'
*** First throw call stack:
(0x353b788f 0x3775e259 0x353baa9b 0x353b9915 0x35314650 0xb14cf 0x353113fd 0x32e06e07 0x32e06dc3 0x32e06da1 0x32e06b11 0x32e07449 0x32e0592b 0x32e05319 0x32deb695 0x32deaf3b 0x36faa22b 0x3538b523 0x3538b4c5 0x3538a313 0x3530d4a5 0x3530d36d 0x36fa9439 0x32e19cd5 0xaeae5 0x60ce4)
terminate called throwing an exception(lldb) 
```

谁能帮我准确地告诉我这是在说什么？我已经为此工作了整整一个小时，但一无所获。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:30:04.793

您必须在`MiniGamesViewController`.m中合成该属性

```
//After the implementation
@implementation MiniGamesViewController
//Add this line
@synthesize gLViewController; 
```

# mysql - 如何基于explain优化mysql查询。（类型：全部

> ID：10920838
> 
> 赞同：5
> 
> 时间：2012-06-06T19:27:04.967
> 
> 标签：mysql, optimization, sql-execution-plan

我运行以下 mysql 查询并将第一个查询的类型视为 ALL。

```
 mysql> EXPLAIN  
           SELECT one.language_id as filter_id, 
                  one.language_name as filter_name, 
                  two.count as count 
           FROM   books_f9_languages one 
           INNER JOIN (SELECT language_id, 
                       count(*) as count 
                       FROM link_f9_books_lists 
                       WHERE books_list_id IN (1691,1,2,3,4,6,7,8,9,10,11,12,13,14,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,43,44,47,51,54,57,58,59,68,71,76,77,86,88,93,94,99,120,125,126,127,133,146,147,148,257,260,261,262,263,264,266,267,268,269,270,271,272,275,276,286,767,768,769,771,772,774,777,779,783,785,786,790,792,799,808,811,813,814,815,819,825,828,829,847,850,852,853,855,856,857,858,862,863,866,869,873,875,882,891,900,907,917,925,930,935,1092,1531,1532,1533,1534,1535,1536,1537,1538,1540,1541,1542,1543,1544,1545,1546,1547,1548,1549,1550,1551,1552,1553,1554,1556,1557,1558,1560,1561,1563,1564,1565,1567,1568,1569,1570,1571,1572,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1586,1588,1589,1590,1591,1592,1595,1597,1599,1600,1601,1603,1604,1605,1606,1607,1608,1609,1610,1612,1613,1614,1615,1616,1617,1620,1621,1622,1623,1624,1625,1627,1628,1629,1630,1632,1636,1637,1638,1639,1640,1642,1643,1644,1645,1646,1648,1649,1651,1652,1653,1654,1659,1660,1662,1665,1675,1677,1679,1680,1689,1692,1693,1696,1698,1699,1702,1703,1705,1711,1713,1714,1716,1717,1719,1720,1726,1728,1729,1732,1734,1735,1736,1738,1743,1744,1753,1754,1755,1756,1759,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1797,1837,827) GROUP BY language_id) two 
          WHERE one.language_id = two.language_id 
          ORDER BY filter_name; 
```

这是输出，

```
+----+-------------+---------------------+--------+---------------+---------------+---------+-----------------+------+-----------------------------------------------------------+
| id | select_type | table               | type   | possible_keys | key           | key_len | ref             | rows | Extra                                                     |
+----+-------------+---------------------+--------+---------------+---------------+---------+-----------------+------+-----------------------------------------------------------+
|  1 | PRIMARY     | <derived2>          | ALL    | NULL          | NULL          | NULL    | NULL            |    5 | Using temporary; Using filesort                           |
|  1 | PRIMARY     | one                 | eq_ref | PRIMARY       | PRIMARY       | 4       | two.language_id |    1 |                                                           |
|  2 | DERIVED     | link_f9_books_lists | range  | books_list_id | books_list_id | 4       | NULL            |  273 | Using where; Using index; Using temporary; Using filesort |
+----+-------------+---------------------+--------+---------------+---------------+---------+-----------------+------+-----------------------------------------------------------+
3 rows in set (0.01 sec) 
```

我必须索引哪一列才能生成所有内容，请使用索引。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:17:45.250

派生的临时表不能使用索引。

删除 ORDER BY 子句或按 language_id 排序应该可以解决这个问题。

或者，您可以尝试在 books_f9_languages 表上的 language_id 和 language_name 上添加复合索引。

要改进内部查询，请在 link_f9_books_lists 表的 book_list_id 和 language_id 上添加复合索引。

# google-apps-script - 我不明白为什么这段代码在 encodeURIComponent 前面使用“a=”、“&b=”、“&u=1”、“&p=”

> ID：10920839
> 
> 赞同：0
> 
> 时间：2012-06-06T19:27:25.490
> 
> 标签：google-apps-script

我正在尝试从“凯文培根六度计算器”中了解此功能的工作原理。具体来说，我不明白“a=”、“&b=”、“&u=1”、“&p=”的用途。我正在自学 javascript，同时还阅读了 Google App Script 教程，希望学习如何开发小工具并将 xml 数据解析为 google 电子表格。任何有助于我理解的学习建议也值得赞赏。谢谢你！

函数 kb（从，到）{

```
 if (!to) {
     to = "Kevin Bacon";
   }
  var parameters = {
     method : "post",
     payload :
     "a=" + encodeURIComponent(from) +
     "&b=" + encodeURIComponent(to) +
     "&u=1" +  // movies only. Use "3" to include TV
     "&p=" + encodeURIComponent('google-apps')
  };

  var text = UrlFetchApp.fetch("http://oracleofbacon.org/cgi-bin/xml",
                            parameters).getContentText();
  return parse(text); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:49:55.337

这些参数在[Parsing an XML Document](https://developers.google.com/apps-script/articles/XML_tutorial#HowItWorks)教程中进行了解释。它们是 Oracle of Bacon 服务的参数，而不是特定于 Apps 脚本本身的参数。

# php - 数组唯一性的问题

> ID：10920840
> 
> 赞同：-1
> 
> 时间：2012-06-06T19:27:26.027
> 
> 标签：php

我试图弄清楚如何检查数组中的重复项，但以下代码没有给出预期的结果：

```
for ($i = 0; $i < 10; $i++) {
              for ($j = 0; $j < count($ships[$i][0]); $j++) {
                        if ($hitX.$hitY === $ships[$i][1][$j].$ships[$i][0][$j]) {
                            echo("hit");
                            array_push( $ships[$i]["hits"], array($hitX,$hitY));
                            $ships[$i]["hits"] = array_unique($ships[$i]["hits"]) 
```

例如，我想减少以下数组，使其仅包含唯一值：

```
[hits] => Array
    (
        [0] => Array
            (
                [0] => k
                [1] => 6
            )

        [1] => Array
            (
                [0] => j
                [1] => 6
            )

        [2] => Array
            (
                [0] => j
                [1] => 6
            )

        [3] => Array
            (
                [0] => j
                [1] => 6
            )

        [4] => Array
            (
                [0] => j
                [1] => 6
            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:34:52.213

利用：

```
$ships[$i]["hits"] = array_unique($ships[$i]["hits"], SORT_REGULAR); 
```

# android - 索尼 Xperia Mini Pro 对同一个 apk 有不同的行为

> ID：10920841
> 
> 赞同：0
> 
> 时间：2012-06-06T19:27:33.030
> 
> 标签：android, device

在我的应用程序中，我正在创建日记。在所有设备中都正常运行，但是该设备日要重复，在同一天出现两次。

代码很长，要在这里公开。

我了解设备之间的布局可能会有所不同，但是设备之间的编程级别可能会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:40:38.740

我在使用 Xperia 时遇到了一些问题，我不知道我是否正确，但我认为我使用的 Xperia 有 Android 2.1，其他设备至少有 2.3。

您的代码是否使用 webView 和图像？那是我的问题，我解决了将图像添加到 /asset 文件夹的问题，但我丢失了 hdpi、mdpi、ldpi 密度。

希望这可以帮助。问候

# php - Kohana ORM 数据透视表数据错误

> ID：10920842
> 
> 赞同：0
> 
> 时间：2012-06-06T19:27:36.810
> 
> 标签：php, orm, kohana, pivot-table

我有用户、类别和帖子。用户有很多帖子，类别有很多帖子，帖子属于一个类别和一个用户。

我需要帮助以正确的帖子显示正确的用户。

表

```
categories{category_id, category_title}
posts{post_id, post_title}
users{user_id, user_title}
categories_posts{category_id, post_id}
users_posts{user_id, post_id} 
```

楷模

```
class Model_User extends ORM {

protected $_primary_key = 'user_id';

protected $_has_many = array(
    'posts'=> array(
        'model' => 'post',                
        'through' => 'users_posts',   
        'far_key' => 'post_id'        
    ),
  );
}

class Model_Category extends ORM {

    protected $_primary_key = 'category_id';

    protected $_has_many = array(
    'posts'=> array(
        'model' => 'post',                
        'through' => 'categories_posts',   
        'far_key' => 'post_id'           
    )
  );
}

class Model_Post extends ORM {

    protected $_primary_key = 'post_id';

    protected $_belongs_to = array(
    'categories'=> array(
        'model' => 'category',               
        'through' => 'categories_forums',  
        'far_key' => 'category_id'  
    ),

    'users'=> array(
        'model' => 'user',                
        'through' => 'users_posts',    
        'far_key' => 'user_id'   
    )
  );
} 
```

展示

```
$categories = ORM::factory('category')->find_all(); 
foreach ($categories as $category) :
echo $category->category_title;
foreach ($category->posts->find_all() as $post) :
echo $post->post_title;
echo $post->users->user_title;
endforeach;
endforeach; 
```

类别和帖子正确回显，但用户没有。

假设 users_posts 具有以下内容：

```
user_id post_id
1      1
1      2
1      3
2      4 
```

上面的代码将回显用户一、用户二、NULL、NULL，而不是用户一、用户一、用户一、用户二。由于某种原因，它将帖子一与用户一匹配，将帖子二与用户二匹配，因为它们具有相同的 ID 号。

我究竟做错了什么？

这是假设要回显的内容：

```
Category One
Post One
User One
Post Two
User One

Category Two
Post Three
User One
Post Four
User Two 
```

这是代码的回声：

```
Category One
Post One
User One
Post Two
User Two

Category Two
Post Three
NULL
Post Four
NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:52:23.893

只有在需要跟踪多对多关系时才真正需要使用数据透视表，并且在这种情况下没有要跟踪的多对多关系（只有一对多关系）。

首先，Post 模型应该具有字段`user_id`和`category_id`作为外键来跟踪一对多关系。该文档解释了您应该如何构建模型，以及用户、类别、帖子示例（几乎与您要实现的目标完全相同）： http: [//kohanaframework.org/3.2/guide/orm/relationships](http://kohanaframework.org/3.2/guide/orm/relationships)

# html - HTML 电子邮件中图像之间的空格

> ID：10920844
> 
> 赞同：0
> 
> 时间：2012-06-06T19:27:41.573
> 
> 标签：html, email, templates, whitespace

我正在开发一个 HTML 电子邮件模板。由于某种原因，outlook 中的图像左侧有空格，而 gmail 中的图像下方有空格。

我已经尝试了这里列出的许多建议，但都没有成功。

这是我也提到的一些代码：

```
<tr>
    <td colspan="12">
        <img src="http://www.antequera-inland.com/email-template/images/_01.gif" width="600" height="172" alt=""/></td>
</tr>
<tr>
    <td colspan="4" rowspan="4">
        <img src="http://www.antequera-inland.com/email-template/images/_02.gif" width="348" height="120" alt=""/></td>
    <td colspan="7">
        <a href="http://www.skype.com" title="Chat or call us via Skype" target="_blank"
            onmouseover="window.status='Chat or call us via Skype';  return true;"
            onmouseout="window.status='';  return true;">
            <img src="http://www.antequera-inland.com/email-template/images/skype-link.gif" alt="Chat or call us via Skype" name="Chat-or-call-us-via-Skype" width="233" height="26" border="0" /></a></td>
    <td rowspan="12">
        <img src="http://www.antequera-inland.com/email-template/images/_04.gif" width="19" height="591" alt=""/></td>
</tr>
<tr>
    <td colspan="7">
        <a href="mailto:steve@antequera-inland.com" title="Send us as email" target="_blank"
            onmouseover="window.status='Send us as email';  return true;"
            onmouseout="window.status='';  return true;">
            <img src="http://www.antequera-inland.com/email-template/images/Email-Steve.gif" alt="Send us as email" name="Send-us-as-email" width="233" height="22" border="0" /></a></td>
</tr>
<tr>
    <td colspan="7">
        <a href="http://www.antequera-inland.com" title="Visit Antequera Inland website" target="_blank"
            onmouseover="window.status='Visit Antequera Inland website';  return true;"
            onmouseout="window.status='';  return true;">
            <img src="http://www.antequera-inland.com/email-template/images/www.antequera-inland.com.gif" alt="Visit Antequera Inland website" name="Visit-Antequera-Inland-website" width="233" height="23" border="0" /></a></td>
</tr> 
```

非常感谢任何帮助。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T19:50:26.053

试试这些：

标签内：img{display: block;}

标签上：

和提示：如果您有可编辑的文本，请尝试使用 line-height 并输入一个小于字体大小的数字。行高可能会弄乱表格并创建白线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T12:33:11.953

Try using display:block; as an inline style for all the images.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T15:42:16.320

有时将“显示：块”单独添加到 img 标签并不总是有效的。尝试移除填充并在 img 的容器周围设置较低的行高。如：

```
<td style="background-color: #a3a5a8; padding: 0; line-height: 10px;">
 <img src="http://www.example.com/images/header.png" style="width: 600px; height: 274px; display: block;" alt="header logo">
</td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:36:44.777

尝试从标签周围删除所有空白区域，以便获得如下内容：

```
<tr>
    <td colspan="7"><a href="http://www.antequera-inland.com" title="Visit Antequera Inland website" target="_blank" onmouseover="window.status='Visit Antequera Inland website';  return true;" onmouseout="window.status='';  return true;"><img src="http://www.antequera-inland.com/email-template/images/www.antequera-inland.com.gif" alt="Visit Antequera Inland website" name="Visit-Antequera-Inland-website" width="233" height="23" border="0" /></a></td>
</tr> 
```

还将 style="display: block" 添加到每个图像。

# java - 这是通过jdbc连接和断开mysql的安全方法吗？

> ID：10920856
> 
> 赞同：0
> 
> 时间：2012-06-06T19:28:26.930
> 
> 标签：java, mysql, jdbc, connection-pooling

我有一个 REST 服务架构，它使用这种方法将请求路由到一个类。此方法打开数据库连接，查询值，最后关闭数据库连接。之后，从数据库值构造 JSON 并通过 REST 返回。

```
 public HashMap<Integer, Artifact> queryDBValues(String userNo) {

    DAO dao = getDAO(DB1);
    Connection connection = dao.instantiateConnection();

    ResultSet resultSet = null;
    Statement statement = null;

    HashMap<Integer, Artifact> artifacts = new HashMap<Integer, Artifact>();

    try {
        statement = connection.createStatement();

        String stmntStr = "select * from myTable";

        resultSet = statement.executeQuery(stmntStr);
        int i = 0;
        while (resultSet.next()) {

            Artifact artifact = new Artifact();
            artifact.setArtifactId(resultSet.getString("id"));

            artifacts.put(i, artifact);

        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        dao.closeSQLComponents(resultSet, connection);
    }

    return artifacts;
} 
```

DAO 是一个抽象类，它基于 getDAO() 中传递的值进行实例化。我这样做是因为我连接到多个数据库，并且与扩展此类的类连接和断开连接。

连接后我从 mysql 数据库收到错误消息：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：数据源拒绝建立连接，来自服务器的消息：“连接太多”

连接最终被关闭。从长远来看，我计划使用 c3p0 连接池。这是否足以在使用率低的情况下暂时回收连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:23:34.093

我认为您的代码没有任何根本性的错误，除了关闭结果集和连接有点奇怪，但不是语句。

另一个奇怪的事情是，DAO 应该是一个封装数据访问代码的对象。应该包含 JDBC 逻辑的是 DAO。

也就是说，你为什么不现在做正确的事情，而不是等待有 100,000 行代码来重构？尽快使用连接池。它将有两个巨大的优势：

*   打开连接的成本非常高。通过避免不断打开和关闭连接，您将节省大量时间
*   在使用高峰的情况下，池还允许将连接数限制在合理的最大值。它允许避免打开过多的连接，并使数据库陷入瘫痪。

# authentication - 管理backbone.js应用程序中的身份验证（会话）和授权的最佳设计/架构实践是什么

> ID：10920860
> 
> 赞同：9
> 
> 时间：2012-06-06T19:28:44.653
> 
> 标签：authentication, backbone.js, authorization

我在任何地方都找不到太多。大多数示例应用程序只是不谈论安全性等。假设将使用基于休息的 API 调用对用户进行身份验证。应如何构建应用程序以处理身份验证 [还有授权]。指向示例应用程序的指针会很棒。请按单页应用和普通应用添加视图。[我相信每个视图都应该照顾它]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T20:27:02.537

您绝对正确，大多数示例根本没有解决安全问题。因此，我没有一个很好的样本可以指给你看。我只能告诉你我们是如何构建我们自己的东西的：

1.  就像您建议的那样，我们进行 API 调用来验证用户身份。在我们的例子中，只要用户点击第一页（甚至在登录之前），Java 服务器就会创建一个会话 ID，并存储在 cookie 客户端中。由于该 cookie 会随着对服务器的每个 HTTPS 请求（甚至是 AJAX 调用以获取数据或执行命令）一起传播，因此一旦用户通过身份验证，它就会与特定的帐户服务器端相关联。

2.  假设您到服务器的传输是 HTTPS 并且 cookie 永远不会通过开放的 Internet 传输，那么没有人可以窃听该值并假装是登录用户。

3.  在我们的例子中，服务器是基于 Java 的，servlet 过滤器位于所有不可公开访问的 API 函数（即需要登录的函数）之前。它在将请求传递给服务之前检查会话并确保它代表登录用户，并保持服务代码不受身份验证检查的影响。然而，授权代码和参数验证目前确实位于服务层中。

4.  对 API 的 AJAX 调用可能无法通过身份验证，即使由于各种原因（会话已过期、服务器必须重新启动并且忘记了用户的会话、管理员强制注销了用户、 ETC。）。在我们看来，重要的是服务器仍然返回一些东西（即，不是空响应），并且它不应该是重定向到登录页面（这对 AJAX 请求无用）。所以我们总是返回[JSend 协议](http://labs.omniti.com/labs/jsend)来自我们所有函数的响应，如果用户没有登录，则 servlet 过滤器返回带有特定代码的标准 JSend“错误”响应。这使我们能够让我们的客户端代码（您可以将其放入自定义同步）通知用户未登录并提示登录。您甚至可以在他们登录后自动重试该功能，但这比我们得到的更复杂。

5.  通过让同步通知用户未登录或违反安全规定，您不必在视图中添加任何特殊内容。他们只是提出他们认为合适的任何要求，要么成功，要么不成功。如果需要重新登录，则会在较低级别触发。

6.  只要服务器将给定会话标记为不再登录或丢弃会话记录，注销实际上并不需要您终止本地 cookie。

我有点不同意 Derick 的说法，即客户不应该了解安全性。我认为它需要知道何时提示登录，如何告诉服务器何时执行注销，并且我一直认为在客户端进行额外检查以避免意外原则是个好主意。例如，如果我不能使用它们，我宁愿客户端禁止向我显示管理功能，而不是允许我尝试调用它们然后得到错误响应。

最终，服务器绝对必须对每个请求再次检查用户的权限（因为回避客户端安全性非常容易），但良好的 UX 要求客户端知道我不是管理员，因此它可以呈现最佳的代表我的用户界面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T21:03:28.853

几个月前在做一个使用基于 REST 的 api 的单页应用程序时遇到了同样的问题。搜索答案后我想出的是使用 HTTP 现有的 401 和 403 错误。我让我的 api 返回这些错误。然后通过使用扩展的错误处理模型来处理这些错误并通过路由器[导航](http://backbonejs.org/#Router-navigate)功能将它们路由到我的登录来捕获异常。

```
var ErrorHandlerModel = Backbone.Model.extend({

    initialize: function(attributes, options) {
        options || (options = {});
        this.on("error", this.errorHandler);
        this.init && this.init(attributes, options);
    },

    errorHandler: function(model, error) {
        if (error.status == 401 || error.status == 403) {
          app.history.navigate('login', true);
        }
    }

}); 
```

事后看来，虽然我认为只使用全局 jquery [ajaxError](http://api.jquery.com/ajaxError/)函数会更好。上面的片段是基于几个月前[在此处发布的一个类似问题。](https://stackoverflow.com/questions/6150514/global-error-handler-for-backbone-js-ajax-requests)

我还必须覆盖主干的默认获取行为，以便我可以触发 ogin 的错误以捕获 api 的 json 响应中包含的响应变量。

```
var Login = Backbone.Model.extend({  

    urlRoot: '/login',

    parse: function(resp,xhr) {
        if (resp.response == 'success') {
            app.history.navigate('dashboard', true);
        }
        else {
            this.trigger('loginError');     
        }
    return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:11:35.220

我同意穆的评论。在身份验证方面几乎没有什么可谈的。

您如何处理回传到服务器的标准 HTML 应用程序的身份验证？这样做是因为应该这样做。

对于授权，还有一点要谈，但不多。本质上，您只向用户发送他们被允许看到的内容。除非绝对需要，否则您不会在浏览器中执行授权或身份验证代码。根据我的经验，它从来都不是绝对必要的。

浏览器中的 JavaScript 并不安全，因此不要做依赖于浏览器中的身份验证和授权的事情。

我在这里写了一篇关于其中一些的小文章：http: [//lostechies.com/derickbailey/2012/01/26/modularity-and-security-in-composite-javascript-apps/](http://lostechies.com/derickbailey/2012/01/26/modularity-and-security-in-composite-javascript-apps/)

# java - 如何在 Rally Rest takeit for Java 中查询测试文件夹？

> ID：10920861
> 
> 赞同：2
> 
> 时间：2012-06-06T19:28:49.043
> 
> 标签：java, rally

这是我尝试使用的基本代码：

```
 //create new QueryRequest
  QueryRequest tests = new QueryRequest("Test Case");

  //Gets the information from QueryFilter
  tests.setFetch(new Fetch("FormattedID","Name","Owner","Test Folder"));

  //checks to see if the test Case's test folder matches the given one
  testFolderFilter =  new QueryFilter("Test Folder", "=", testFolder);

  // set query filter
  tests.setQueryFilter(testFolderFilter); 

  // Query Rally
  QueryResponse queryResponse = restApi.query(tests); 
```

我已经成功地使用`Name`and`FormattedID`代替了它，`Test Folder`所以我假设我只需要为`Test Folder`. 欢迎任何建议。

示例对我没有帮助，但可以在以下位置找到：[http ://www.rallydev.com/developer/java-toolkit-rally-rest-api](http://www.rallydev.com/developer/java-toolkit-rally-rest-api)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:47:11.530

您的代码看起来很棒，这应该对您的查询语法进行以下细微更改后对您有用：

```
 testFolderFilter = new QueryFilter("TestFolder.Name", "=", testFolder); 
```

在代码中运行之前以交互方式测试查询语法的一个方便的地方是 Rally webservices API 文档：

[https://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

每个工件都有一个方便的“查询”对话框，可让您运行示例查询语法以查看哪些有效，哪些无效。

# wordpress - Wordpress：根据帖子计数有条件地改变角色

> ID：10920862
> 
> 赞同：0
> 
> 时间：2012-06-06T19:29:02.040
> 
> 标签：wordpress, post, conditional, role

自从将近 4-5 个月以来，我一直在尝试解决这个问题，即用户角色会随着一定数量的帖子计数而自动更改。假设 x 用户有 <= 10 个帖子，如果 <=20 作者角色，则他/她处于贡献者角色，依此类推..

在你们所有人的帮助下，我可以实现此代码。

```
<?php

add_action( 'save_post', 'update_roles' );
    function update_roles( $post_id ) {

        if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )
            return $post_id;

        // Get the author
        $author = wp_get_current_user();

        // Set variables for current user information
        $count = count_user_posts( $author->ID );
        $current_role = (array) get_user_meta( $author->ID, 'wp_capabilities' );

        get_currentuserinfo(); 
        global $user_level;

        // Do the checks to see if they have the roles and if not update them.
        if ( ($user_level != 10) && ( $count > 3 && $count <= 5 ) && ( array_key_exists( 'contributor', $current_role[0] ) ) ) {
            $user_id_role = new WP_User( $author->ID );
            $user_id_role->set_role( 'author' );

        } elseif ( ($user_level != 10) && ( $count > 5 && $count <= 9 ) && ( array_key_exists( 'author', $current_role[0] ) ) ) {

            $user_id_role = new WP_User( $author->ID );
            $user_id_role->set_role( 'editor' );

        } elseif ($user_level != 10){

            $user_id_role = new WP_User( $author->ID );
            $user_id_role->set_role( 'contributor' );

        } return $post_id;

    }

?> 
```

这段代码工作了一段时间，有时根本没有反应。这段代码有问题，如果曾经以某种方式自动更改角色，并且如果我再次将角色更改回向下，那么它将永远不会根据帖子计数自动更改。如果我删除帖子而不是它根本不影响，则相同。但是，它应该始终考虑帖子数量，并且立即应该影响帖子数量。

我真的对此感到厌倦，但我的整个网站仅基于此代码。所以我真的需要你们伟大的人的帮助。

非常感谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:08:57.413

我认为启动用户角色存在错误，因为：

```
if ( ($user_level != 10) && ( $count > 3 && $count <= 5 ) && ( array_key_exists(     'contributor', $current_role[0] ) ) ) {
        $user_id_role = new WP_User( $author->ID );
        $user_id_role->set_role( 'author' ); 
```

如果用户级别为 10 且帖子数大于 3 且次要或等于 5，则将用户角色设置为作者

但在第二个

```
} elseif ( ($user_level != 10) && ( $count > 5 && $count <= 9 ) && ( array_key_exists( 'author', $current_role[0] ) ) ) {

        $user_id_role = new WP_User( $author->ID );
        $user_id_role->set_role( 'editor' ); 
```

你再说一遍，条件标签只有在用户角色为 10 时才开始......所以，例如，如果用户发布了 4 个帖子，并且它的角色是作者，则条件标签将不起作用

# .htaccess - 使用 mod_rewrite 获取 404

> ID：10920863
> 
> 赞同：0
> 
> 时间：2012-06-06T19:29:02.003
> 
> 标签：.htaccess, mod-rewrite, apache2

我正在尝试使用 mod_rewrite 来清理我拥有的一些动态 URL。

我在站点根目录中的 .htaccess 如下：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^equipment/AlarisSystem/([^/]*)/([^/]*)$ /equipment/AlarisSystem/?manu=$1&model=$2 [L] 
```

我想从 to`http://www.mysite.com/equipment/AlarisSystem/?manu=test1&model=test2`重写`http://www.mysite.com/equipment/AlarisSystem/test1/test2`

如果我输入上面的“干净”地址，我会收到 404 错误。我已经进行了研究，但找不到我要去哪里错了。是的，mod_rewrite 已启用。谢谢你的帮助。

**编辑** 我知道我的 .htaccess 文件正在被读取。我这样做是为了检查：

`Redirect /google.html http://www.google.com`并且这条规则可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:42:21.477

您的规则似乎正确，但您可能没有重写到正确的位置。您要重写的脚本在哪里？看来您正在重写目录。

也许你有额外的重写规则需要进一步应用，在这种情况下，你应该去掉[最后一个规则](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)[L] 标志。让它在那里使 mod_rewrite 停止应用规则。

如果你想检查你的查询是否被捕获，你可以设置[RewriteLog](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#RewriteLog)和[RewriteLogLevel](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#RewriteLogLevel)指令来帮助你。

为了快速检查，您还可以设置 [R] 标志，然后您将能够在浏览器中看到 mod_rewrite 将您发送到的位置。

**更新：** 你原来的规则适用于我目录中的 index.php 文件，但也许你可以[尝试使用 RewriteBase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)来解决这个问题：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteBase /equipment/AlarisSystem/
RewriteRule /([^/]*)/([^/]*)$ index.php?manu=$1&model=$2 [L] 
```

我认为该规则没有理由不起作用。您得到的原始错误可能与您在哪里进行重写有关。这是来自根目录中的 .htaccess 文件。

# css - 是什么推动了这个 Facebook 小部件？

> ID：10920865
> 
> 赞同：0
> 
> 时间：2012-06-06T19:29:12.713
> 
> 标签：css, facebook, wordpress, widget

快把我逼疯了！！！我什么都玩过！

这是小部件 css

```
.fan_box a:hover{text-decoration: none;}
.fan_box .full_widget{height: 298px; border: 0 !important;background: none !important;position: relative;padding-left:10px !important;margin-left:0px !important;}
.fan_box .connect_top{background: none !important;padding: 0!important;}
.fan_box .name_block{color:#fff !important;}
.fan_box .connect_action{padding: 0 !important;overflow:hidden !important;color:#fff !important;}
.fan_box .connections{padding: 0 0 0 0px !important;border: 0 !important;font-family: Arial, Helvetica, sans-serif;font-size: 12px;font-weight: bold;color: #fafafa;margin-left:0px !important;}
span.total{color: #eee;font-weight: bold;}
.fan_box .connections .connections_grid {padding-top: 10px !important;}
.fan_box .connections_grid .grid_item{padding: 0 7px 10px 0 !important;}
.fan_box .connections_grid .grid_item .name{font-family: "lucida grande",tahoma,verdana,arial,sans-serif;font-weight: normal;color: #fff !important;padding-top: 1px !important;}
.fan_box .connect_widget{margin: 0 !important;}
.fan_box .connect_widget .connect_widget_interactive_area {margin: 0 !important;}
.fan_box .connect_widget td.connect_widget_vertical_center {padding: 0 !important;}
.fan_box .profileimage {padding-left:0px !important;}
.fan_box .connect_action .name{color:#fff !important;} 
```

这是PHP

```
<div class="col-wrapper facebook">
    <h3 class="tab"><?php echo $title;?></h3>
        <div class="col">
            <div style="overflow:hidden; width:208px; height:265px;margin:0 auto;padding-left:10px;">
            <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2F<?php echo $profile_id;?>&amp;width=244&amp;colorscheme=light&amp;show_faces=true&amp;border_color=%23fff&amp;stream=false&amp;header=false&amp;height=272" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:244px; height:418px;margin:-8px auto 0 -20px!important;"  allowTransparency="true">
            </iframe>
        </div>
    </div>
</div> 
```

任何帮助是极大的赞赏。我被困住了！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:37:06.433

Facebook iframe 小部件出了名的不好用，检查 iframe 上的内联样式，你会注意到：

```
width:244px; height:418px; 
```

Iframe 的 URL 中还定义了高度/宽度。

`src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2F<?php echo $profile_id;?>&amp;width=244&amp;colorscheme=light&amp;show_faces=true&amp;border_color=%23fff&amp;stream=false&amp;header=false&amp;height=272"`

改变这些可能会有所帮助。

# java - Java - 将 ArrayList 向上转换层次结构

> ID：10920877
> 
> 赞同：3
> 
> 时间：2012-06-06T19:30:37.547
> 
> 标签：java, casting, polymorphism

我有一个简单的类结构：

`class BaseModel {}`

`class Performer extends BaseModel {}`

我有一个集合`Performer`：

`ArrayList<Performer> list = loadPerformerList();`

为什么我不能这样做？

`functionThatNeedsArrayOfBase( (ArrayList<BaseModel>)list );`

或者，我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T19:35:47.667

子集合*不是*基集合。否则，您可以将基础对象添加到您的子集合中，从而打破假设（反之亦然）。

您可以将函数的参数指定为包含 base 的导数的列表：

```
void functionThatNeedsArrayOfBase(ArrayList<? extends BaseModel> list) {
  //...
} 
```

然后你可以直接通过`list`而不施放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:36:35.673

试试这个：`<? extends BaseModel>`，它并没有说 BaseModel 的哪个子类，只是它是一个特定的。另请参阅`<? super BaseModel>`根据您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:34:56.310

列表是一个`ArrayList`表演者。如果 java 允许您将其转换为`ArrayList<BaseModel>`，那么即使当时的列表也仅包含 BaseModel(s)，当将 Performer 添加到不是 BaseModel 的列表时会发生什么？如果我们允许，我们就会失去类型安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T19:38:32.283

问题是 ArrayList 的类型安全。[您可以在此StackOverflow Post](https://stackoverflow.com/questions/6179638/java-casting-to-generic-with-interface-pointers)上找到更详细的解释。简而言之，解决这个问题的方法是让方法接受 type 的类`<? extends/super Performer>`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T19:44:19.670

这不起作用的原因是它允许`functionThatNeedsAnArrayOfBase()`向列表添加不同的 BaseModel 子类并破坏原始列表引用。

进一步解释的一个很好的例子是[这个](https://stackoverflow.com/questions/7690684/java-cast-from-listb-to-lista-where-b-extends-a)堆栈溢出问题。

另一个很好的参考资料是 Josh Bloch 对 Essential Java 中的泛型的报道。

# php - 使用 $_POST 条件

> ID：10920878
> 
> 赞同：0
> 
> 时间：2012-06-06T19:30:38.390
> 
> 标签：php, forms

我有一个文本框。它的名字是例子。

```
<input type="text" name="example"/> 
```

我想检查一下，任何数据是否来自示例。我尝试使用如下代码：

```
<?php
if(empty($_POST["example"]))
{
      echo "You need to enter any text to example box.";
}
?> 
```

但是这段代码正在打印，当我进入页面时是第一个。我想看到打印的数据，只有当点击提交时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:32:37.187

检查

```
if(!isset($_POST["submitButtonName"]))
{
   // validation logic here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:39:18.413

`isset`在这里是正确的选择 -`empty`仅用于检查已知变量以查看它是否“空”。根据[文档](http://php.net/manual/en/function.empty.php)

> 以下内容被认为是空的：
> 
> ```
> "" (an empty string)
> 0 (0 as an integer)
> 0.0 (0 as a float)
> "0" (0 as a string)
> NULL
> FALSE
> array() (an empty array)
> var $var; (a variable declared, but without a value in a class) 
> ```

它没有说的是它如何处理未定义的数组成员。文档页面上的评论让我们从测试中获得了一些见解：[http ://www.php.net/manual/en/function.empty.php#105722](http://www.php.net/manual/en/function.empty.php#105722)

> 请注意，当子项不存在但父项存在并且是字符串时检查数组的子项是否存在，将返回 false 为空。

而`isset`（[docs](http://php.net/manual/en/function.isset.php)）旨在“确定变量是否已设置且不为 NULL。” - 正是您所追求的。因此，您的代码最终看起来像这样：

```
// check the length, too, to avoid zero-length strings
if(!isset($_POST["example"]) || strlen(trim($_POST["example"])) < 1) {
     echo "You need to enter any text to example box.";
} else {
    // handle form submission
} 
```

**文档**

PHP `isset`- [http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

PHP `empty`- [http://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)

更多阅读 - [http://virendrachandak.wordpress.com/2012/01/21/php-isset-vs-empty-vs-is_null/](http://virendrachandak.wordpress.com/2012/01/21/php-isset-vs-empty-vs-is_null/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:32:39.743

```
<?php
if(isset($_POST['example']) && empty($_POST['example']))
{
      echo "You need to enter any text to example box.";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:34:07.450

它是一个更好的选择：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if(empty($_POST["example"]))
       {
          echo "You need to enter any text to example box.";
       }
} 
```

这将检查是否有`POST`服务器，然后您将拥有您的条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T19:36:47.213

```
if (!empty ($_POST))
{
    // Validation logic here
    if ((!isset ($_POST ['example'])) || (empty ($_POST ["example"])))
    {
        echo "You need to enter any text to example box.";
    }
}
else
{
    // No need to do any validation logic, the form hasn't been submitted yet. 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T19:41:44.650

首先检查 $_POST 变量，因为它仅在提交页面时可用。

```
<?php
    if(!empty($_POST)){
      if(isset($_POST['example']) && empty($_POST['example'])){
         echo "You need to enter any text to example box.";
      }         
   }
 ?> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-06T19:37:26.463

首先检查`submit`按钮。

```
<input type="text" name="example" value="" />
<input type="submit" name="submit" value="submit" />

<?php 
    if (isset($_POST['submit'])) {

        if (empty($_POST['example'])) {
            echo "You need to enter any text to example box.";
        }
?> 
```

# ruby-on-rails - Shopify_api gem install 403 ActiveResource::ForbiddenAccess in HomeController#index

> ID：10920880
> 
> 赞同：2
> 
> 时间：2012-06-06T19:30:59.980
> 
> 标签：ruby-on-rails, ruby, gem, shopify

我刚刚安装`shopify_api gem`并生成了一个占位符应用程序。

一旦我访问`localhost:3000`并输入我的商店网址，我就会`HomeController#index`错误地得到以下信息：

```
ActiveResource::ForbiddenAccess . 
```

我已经确定它来自这条线`home_controller.rb`

```
@orders   = ShopifyAPI::Order.find(:all) 
```

注释掉这个问题就解决了。看起来某种许可不适用于订单。

我的应用设置中的域匹配`localhost:3000`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:16:56.150

您是否按照shopify_api gem 的 README 中的[入门](https://github.com/Shopify/shopify_api#getting-started)步骤进行操作，因为在您执行 ShopifyAPI::Base.activate_session(session) 之前，您的请求不会获得所需的身份验证。这就是您收到 403（即 ForbiddenAccess）错误响应的原因。

在这种情况下，您要列出订单，在这种情况下，如果您使用 oauth2 身份验证，则需要 read_orders 范围。有关范围列表以及需要它们的位置，请参阅 API 文档中的[身份验证页面。](http://api.shopify.com/authentication.html)

编辑：意识到 403 响应是针对缺少访问（即范围），而不是 401 将是身份验证。

# javascript - 提交表单时自动选中复选框

> ID：10920882
> 
> 赞同：1
> 
> 时间：2012-06-06T19:31:10.760
> 
> 标签：javascript, jquery

我有一个带有复选框和提交按钮的表单。我希望在提交表单时自动选中复选框。

我怎样才能用 jquery 或 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:34:45.520

假设你有这样的 HTML

```
<form>
    Are you sure ?<input type="checkbox" id="chk1" value="1" />
    <input type="submit" value="submit" />
</form> 
```

脚本

```
$(function(){

    $("form").submit(function(){
        $("#chk1").prop("checked", true);
        alert("going to submit now");
    });        

}); 
```

示例[http://jsfiddle.net/TCaUk/1/](http://jsfiddle.net/TCaUk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:33:57.187

```
$('#formId').submit(function(){
   $('#checkboxId').prop('checked', true);
   return true;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:34:21.367

虽然我不确定目的是什么，但您可以使用 jQuery 选择器。

[http://api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T19:35:26.580

```
$('#formid').submit(function(){
  $(this).find('input[type="checkbox"]').attr('checked', 'checked');
}) 
```

在这里查看小提琴[http://jsfiddle.net/sedcv](http://jsfiddle.net/sedcv)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T19:37:27.370

**HTML：**

```
​&lt;input name="foo" type="checkbox">
<input type="button" id="button" value="check checkbox">​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**查询：**

```
​$("#button").bind('click', function(){
    $('input[name=foo]').attr('checked', true);
});​​​​​​ 
```

**JSFIDDLE 演示：**

[http://jsfiddle.net/ycqZa/](http://jsfiddle.net/ycqZa/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T19:40:05.070

相反，如果您希望复选框已经被选中，您可以禁用它，以防止用户取消选中它并自动选中它。

```
<input type="checkbox" name="uniquename" disabled="disabled" checked="checked"/> 
```

# objective-c - 如何在 UIButton 的子层上绘图？

> ID：10920884
> 
> 赞同：0
> 
> 时间：2012-06-06T19:31:14.270
> 
> 标签：objective-c, ios, uibutton, core-animation, quartz-graphics

我正在尝试使用 CoreGraphics 和 CALayers 在 UIButton 上绘制一些精美的图形，但我无法在子层上显示任何内容。

这是我设置子图层的方式：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        CALayer *buttonLayer = self.layer;
        buttonLayer.masksToBounds = YES;
        buttonLayer.backgroundColor = [[UIColor clearColor] CGColor];
        self.myDelegate =  [[PlayerButtonLayerDelegate alloc] init];

        CALayer *customDrawn = [CALayer layer];
        customDrawn.delegate = self.myDelegate;
        customDrawn.frame = buttonLayer.frame;
        customDrawn.masksToBounds = YES;
        [buttonLayer insertSublayer:customDrawn atIndex:0];
        [customDrawn setNeedsDisplay];
    }
    return self;
} 
```

PlayerButtonLayerDelegate 只是`drawLayer: inContext:`这样实现：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context {
    CGRect rectangleFrame = layer.bounds;
    UIGraphicsPushContext(context);
    UIBezierPath* rectanglePath = 
        [UIBezierPath bezierPathWithRect: rectangleFrame];
    [[UIColor redColor] setFill];
    [rectanglePath fill];
    UIGraphicsPopContext();
} 
```

代码被调用（我可以设置断点或输出到 NSLog），但没有显示任何内容：我只有一个透明按钮（如主层所示），有或没有任何按钮文本。

我必须改变什么才能在子图层上“绘制”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:22:06.780

```
 [customDrawn setFrame:buttonLayer.bounds]; 
```

# c++ - 在没有通道数据包丢失的情况下传输中未收到数据包的原因？

> ID：10920885
> 
> 赞同：0
> 
> 时间：2012-06-06T19:31:19.677
> 
> 标签：c++, pthreads, mutex

我有一个程序可以在 UDP 套接字上接收数据包。

这是接收数据包的循环：

```
clientfd = bind(client_s,(const sockaddr*) &client_addr, sizeof(client_addr));

    /*---Forever... ---*/
    while (1)
    {   
        addrlen=sizeof(client_addr);
            bufferWithPacketData = new char [headerSizeTot+symbol_size];
        int n = recvfrom (client_s, bufferWithPacketData, symbol_size + headerSizeTot, 0,(struct sockaddr*)&addrSenderOfVideo, &fromlen);
        if (n >= 0  ) //n=-1 => nothing receieved.. 
        {
        pthread_create(&threadID , NULL, &ProcessDataOfPacketInThread, (void*) bufferWithPacketData );
        }

    } //end of while 
```

处理数据包的线程代码：

```
void* ProcessDataOfPacketInThread (void* ptr) 
 {
 char* bufferWithPacketData = (char*) ptr;
    pthread_t threadID;

                 //todo remove fprint messages..in the listener thread..
        //first byte containing which fec-session,etcetera..

        //todo remove print outs here

        unsigned int curr_fec_session = extract_value_from_header (bufferWithPacketData,POSITION_OF_FEC_SESSION);
   unsigned int fecSessionModuloNr = curr_fec_session % SIZE_OF_MAX_FEC_SESSIONS_AT_SAME_TIME;
        assert ( fecSessionModuloNr < SIZE_OF_MAX_FEC_SESSIONS_AT_SAME_TIME );

        //todo remove print outs here
            //i can do modulo elsewhere also...easiest..
        //   int fecSessionNrModulo = curr_fec_session % SIZE_OF_MAX_FEC_SESSIONS_AT_SAME_TIME;
        //one more symbol for this fec-session...
        //todo remove this if we are missing packets..

                int nrOfPktReceivedForCurrentSession;
                int nrOfPacketLossesForCurrentSession;
                float currentLostRate;

                unsigned int curr_symbol_nr = extract_value_from_header (bufferWithPacketData,POSITION_OF_SYMBOL_NR);

                  pthread_mutex_lock (&mutexForAccessSymbolAndEncodingAndNrReceivedVector[fecSessionModuloNr]);          
                  vectorOfNumberOfReceivedSymbolsForFecUnit [fecSessionModuloNr]++;
          nrOfPktReceivedForCurrentSession = vectorOfNumberOfReceivedSymbolsForFecUnit [fecSessionModuloNr];
               pthread_mutex_unlock (&mutexForAccessSymbolAndEncodingAndNrReceivedVector[fecSessionModuloNr]);  
      //curr_fec_session == 0 &&
        //Do this in new threads all of the time to ensure that we are not blocked receiving new packets...

    //Run InitParameters-function, which will store parameters for the current fec-session in an array---necessary to use when decoding.Here we can also measure time...

           unsigned int session_sequence_nr = extract_value_from_header (bufferWithPacketData,POSITION_OF_SESSION_SEQUENCE_NR);

               fprintf (stderr, "\nProccessData; curr_fec_session %d; nrOfPktReceivedForCurrentSession %d; session_sequence_nr  %d; curr_symbol_nr %d",curr_fec_session,  nrOfPktReceivedForCurrentSession, session_sequence_nr, curr_symbol_nr  ); 

    //size vectorOfVetorWithEncodingSymbols == 0 in the beginning, so is curr_fec_session; check if curr_fec_session <
        //todo vectorOfvectorOfEncodingS0ymbolsTab ..decide order.
        //vectorOfvectorOfSymbolReceiveOrder contains receiver order..
        //i can have the same order for vectorOfvectorOfEncodingSymbolsTab ?
        //We need to expand!!! session=2, means we want size==3 to fit it..
        // curr_fec_session == 4 means we have expanded it ENOUGH!!

    //First packet of NEW SESSION!!!
                //only done one because of numberOfHighestFecSessionReceived =curr_fec_session below..
           if (curr_fec_session > numberOfHighestFecSessionReceived || ( nrOfPktReceivedForCurrentSession == 1  && curr_fec_session == 0 ) ) //First received packet. 
         {
                 pthread_mutex_lock (&mutexForAccessToHighestFecSessionNrReceived);
         numberOfHighestFecSessionReceived =curr_fec_session;
                 pthread_mutex_unlock (&mutexForAccessToHighestFecSessionNrReceived);
                 fprintf (stderr, "CALLING INIT-PARAM");
                 InitParametersAndArraysForNewFecSession (bufferWithPacketData );
            //Erase old for the fec-session three sessions before current..

            if (curr_fec_session >= SIZE_OF_MAX_FEC_SESSIONS_AT_SAME_TIME -1  )
            {
            EraseVectorsForFecSessionModuloNr ( curr_fec_session);
                        fprintf (stderr, "Calling EraseVectors");
            }

            //Received packet of new session-> time to decode old session..Check that all threads performing insertion-elements to vector are finished inside of decoding....       
            //We are decoding the previous session !!
                        if ( curr_fec_session != 0 )
                        {
            DecodeFECSession( curr_fec_session -1);     
                        fprintf (stderr, "Calling Decode FEC-session");
                        }
         } //end of if.

        //Will always take place afte we have inited arrays..
    //Do this for all of the packets received.  
    InsertElementAtCertainPositionOfEncodingSymbolsVector ( bufferWithPacketData );
        fprintf (stderr, "Calling Insert element");

//lastLostRateSentToReceiverFloat

 } //end of method--called for each packet received.. 
```

上述方法中调用的一种方法：

```
void InsertElementAtCertainPositionOfEncodingSymbolsVector (char* bufferWithDataAndHeader ) 
        {
        vector<char*>::iterator it;
        unsigned int curr_fec_session = extract_value_from_header (bufferWithDataAndHeader,POSITION_OF_FEC_SESSION);
       unsigned int fecSessionModuloNr = curr_fec_session % SIZE_OF_MAX_FEC_SESSIONS_AT_SAME_TIME;

        unsigned int session_sequence_nr = extract_value_from_header (bufferWithDataAndHeader,POSITION_OF_SESSION_SEQUENCE_NR);                             
        unsigned int curr_symbol_nr = extract_value_from_header (bufferWithDataAndHeader,POSITION_OF_SYMBOL_NR);

        unsigned int nrOfSrcSymbolsSent = extract_value_from_header (bufferWithDataAndHeader,POSITION_OF_NR_SRC_SYMBOLS);

        unsigned int nrOfRepairSymbolsSent = extract_value_from_header (bufferWithDataAndHeader,POSITION_OF_NR_REPAIR_SYMBOLS); 

        unsigned int totNrOfSymbols =  nrOfSrcSymbolsSent+nrOfRepairSymbolsSent;
        fprintf (stderr, "\nINSERT:curr_fec_session %d; session_sequence_nr %d",curr_fec_session, session_sequence_nr);
        //change the address of the buffer...
        bufferWithDataAndHeader += headerSizeTot;
        fprintf (stderr, "\nINSERT:first symbol of buffer data %d; second %d:", bufferWithDataAndHeader[0], bufferWithDataAndHeader[1] ) ;
        //strcpy (destination, source)         
        strcpy (charArrayofCharArrayOfEncodingSymbolsTab [fecSessionModuloNr][curr_symbol_nr ],
bufferWithDataAndHeader );
        fprintf (stderr, "after doing strcpy..........");
    //just commented out to do some testing how the code works without it...
      //   pthread_mutex_lock (&mutexForAccessSymbolAndEncodingAndNrReceivedVector[fecSessionModuloNr]); 

//          fprintf (stderr, "inside of mutex: adding symbol to SymbolReceiveOrder");

    //    vectorOfvectorOfSymbolReceiveOrder[fecSessionModuloNr].push_back (curr_symbol_nr);         
  //      fprintf (stderr, "releasing lock for encoding sectioN");
// pthread_mutex_unlock (&mutexForAccessSymbolAndEncodingAndNrReceivedVector[fecSessionModuloNr]);    
    //   fprintf (stderr, "INSERT:after releasing lock!!");      
 } 
```

测试程序的运行之一：发送方发送超过 512 个数据包。接收器接收到大约 100 个第一个数据包。之后，大约有 200 个数据包丢失。额外收到 30 个数据包，其序列号彼此接近；然后程序终止。

修改代码以测试没有互斥体的行为，表明仍然有很多丢失的数据包。

该程序接收具有以下代码的所有数据包：

```
while (1)
{   
    addrlen=sizeof(client_addr);
        bufferWithPacketData = new char [headerSizeTot+symbol_size];
    int n = recvfrom (client_s, bufferWithPacketData, symbol_size + headerSizeTot, 0,(struct sockaddr*)&addrSenderOfVideo, &fromlen);
    if (n >= 0  ) //n=-1 => nothing receieved.. 
    {
    nrReceived++;
     unsigned int session_sequence_nr = extract_value_from_header (bufferWithPacketData,POSITION_OF_SESSION_SEQUENCE_NR);        
    fprintf (stderr, "\nsession seq %d; nrReceived %d", session_sequence_nr, nrReceived);
    } 
```

丢失数据包的原因是什么，我该如何解决这个问题？我的猜测是程序没有`recvfrom`在每个实例中使用 -command 运行线程，套接字接收到新数据包，从而导致数据包丢失。

**一些澄清：** 我正在使用环回发送数据包，并且通道中没有数据包丢失。当我处理数据包的代码较少时，所有数据包都会收到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:36:15.857

UDP 无法保证。如果您需要保证发送的数据包将被接收并且它们将按照发送的顺序被接收，您应该使用其他一些协议，例如 TCP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:43:00.867

`sendto()`尽管有 TCP，但如果接收方尚未收到数据包，UDP 套接字将不会阻塞。所以你以最大可能的速率发送数据包。

另一方面，当您创建线程时接收部分可能不会那么快（请注意，您为每条消息创建一个线程），因此由于 UDP 的不可靠特性，您会丢失数据包。当您仅解析和打印接收到的数据包时，这可能不会发生。为什么不尝试通过注入代码来降低发送速率 a `sleep()`or `usleep()`，只是为了确定。

此外，您不需要检查`n`等于 0 的情况。这在 TCP 套接字上意味着对等方正常关闭了连接。

# android - 如何在完成后从最近的任务中删除带有 taskAffinity 的 singleTask 活动？

> ID：10920887
> 
> 赞同：10
> 
> 时间：2012-06-06T19:31:25.987
> 
> 标签：android, android-activity, back-stack, taskaffinity

假设我们有两个活动。

A - 主要活动，即“启用主页启动器”（适当的意图过滤器等）

B - 具有 singleTask 规范（此活动只能有一个实例）和自定义 taskAffinity 的任务根活动（以区分是否与主要任务根）。

假设 B 代表一个任务，该任务仅在它未完成时才有效 - 完成它后返回它或从最近的任务重新开始它不是一个选项。

在某个时间点 - A 开始 B 开始一项新任务。目标是在用户完成 B 后从最近的任务列表中删除 B。用户可以从 B 导航到其他任务（使用主页长按），然后只要未完成就导航回 B。从启动器启动 A 不会将 B 带到前台，因为它们具有不同的任务相关性。

Android 将 B 识别为任务的根，因此 B 在最近任务列表中可见，即使它已完成，用户也可以随时返回。将 B 移动到与 A 的一个任务不是解决方案，因为在 B 运行期间 - 用户应该能够在 A 和 B 任务之间切换。将 excludeFromRecents 添加到 B 的清单中会将其从最近的任务列表中完全删除，这也是一个不好的解决方案。

如何实现？（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T08:11:03.843

**标准答案**

很抱歉成为坏消息的承担者，但如果不覆盖您的应用程序的工作方式，则无法使用标准方法实现此功能。即使那样，它也只会在您的应用程序运行时才有效。此外，这样做将需要具有专用 ROM 的根设备，因为无论如何您都无法覆盖 Home 按钮的功能。如果您长按主页按钮，您所能做的就是响应`onNewIntent()`哪个不会触发。

最近的任务是专门为方便用户使用而设计的，允许他们返回到他们一直在使用的任何应用程序，而不管应用程序是否正在运行。不过，也有好消息。这个过程不会让您的应用程序保持活力！它只是一个指向您的包裹的图标。

不幸的是，这意味着如果您的应用程序仍在运行，那么还有其他事情正在保持它运行。

**非标准答案**

可以通过在运行时编辑包属性来实现（与您可以从 java 代码启用/禁用组件的方式非常相似）。这是非常不鼓励的，因为最近的任务是 Android 核心平台的一个可用性特性。这需要一些研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T05:04:57.033

有点晚了，但这仍然是谷歌的热门话题。请参阅[此](https://stackoverflow.com/questions/22166282/close-application-and-remove-from-recent-apps/28198765#28198765)答案以获取可能的解决方案。

在您的情况下，您将必须：

*   创建一个名为 ExitActivity 的新活动 C，并按照另一个答案中的描述添加清单标志。
*   活动 B 在清单中应具有以下属性：`android:taskAffinity="com.example.ActivityB" android:allowTaskReparenting="true" android:launchMode="singleTask" android:documentLaunchMode="always"`
*   将 C 上的任务亲和属性设置为与 B 相同
*   ExitActivity 中的调用`Intent.addFlags`应该只是最后三个：`intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);`

# java - 加载 Java VM 时出现 Windows 错误 2

> ID：10920889
> 
> 赞同：31
> 
> 时间：2012-06-06T19:31:56.903
> 
> 标签：java, windows, installation, installanywhere

我一直在尝试在 Windows 7 64 位平台上安装来自 Qualcomm 的 ARToolkit： [https](https://ar.qualcomm.at/qdevnet/) ://ar.qualcomm.at/qdevnet/ （Windows“.exe”版本），但我不断收到错误消息：

> 加载 Java VM 时出现 Windows 错误 2

尝试安装此程序的程序是 InstallAnywhere，但我似乎找不到有关此错误的任何文档。崩溃发生时的对话框名称是 LaunchAnywhere

我只是想知道是否有人以前见过这种错误，如果有，如何解决。我可以在网上找到的极少数答案与 Win98/ME 问题有关，因此它们无关紧要。

如果这有点相关，我目前正在使用 JDK 1.7.0_04 和 jre 1.7。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2015-06-30T11:12:04.230

使用以下命令行参数启动安装程序：

LAX_VM

例如：InstallXYZ.exe LAX_VM "C:\Program Files (x86)\Java\jre6\bin\java.exe"

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-10-16T15:36:02.790

在命令中

`C:\Users\Downloads>install.exe LAX_VM "C:\Program Files\Java\jdk1.8.0_60\bin\java.exe"`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-12-12T09:42:51.000

对我来说，它可以在我的系统环境 PATH 变量中删除“C:\ProgramData\Oracle\Java\javapath”

**编辑：** 如果您没有该变量或它不起作用，您可以直接删除或重命名目录“C:\ProgramData\Oracle\Java\javapath”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-06T19:38:55.517

“Windows 错误 2”有几十个含义（我能找到 52 个）。

最常见的是`ERROR_FILE_NOT_FOUND`，可以在`winerror.h`. 没有更多的上下文，这是我能猜到的最好的。您是否检查了事件日志以查看是否有更多信息？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-21T16:32:49.847

尝试添加`C:\path\to\java\jre\bin`到您的系统环境变量 PATH 并再次运行。这对我有用！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-20T13:34:57.153

如果安装后出现错误：找到具有匹配 exe 名称的 .lax 文件并从以下位置更新当前 vm 路径：

> lax.nl.current.vm=C:\ProgramData\Oracle\Java\javapath\java.exe

至

> lax.nl.current.vm=C:\Program Files\Java\jre1.8.0_144\bin\java.exe

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-09T22:48:05.760

我们无法卸载程序，卡在“Windows 错误 2 无法加载 Java VM”。将Java路径添加到PATH变量，卸载并重新安装Java 8，问题不会消失。

然后我在网上找到了这个解决方案，并在第一时间为我们工作： - 卸载 Java 8 - 安装 Java 6

不管是什么原因，使用 Java 6，错误消失了，我们卸载了程序，然后重新安装了 Java 8。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-04T10:25:41.587

我认为应该是`.....\javaw.exe"`。它对我有用。谢谢。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-29T16:00:23.037

我有同样的错误，它的产生是因为我在 InstallAnywhere （**项目 - JVM 设置 - 安装程序设置 - 捆绑/下载的虚拟机**）中禁用了“_jvm”的创建，然后进入文件“**卸载 $PRODUCT_NAME$.lax** ”进入卸载文件夹中，变量“ **lax.nl.current.vm** ”为空。

如果您不需要禁用 jvm，请选中复选框中的“**安装捆绑/下载的虚拟机**”选项（项目 - JVM 设置 - 安装程序设置 - 捆绑/下载的虚拟机）。

如果您需要禁用 jvm，因为您手动创建它，那么您可以执行以下操作：创建一个操作“**修改文本文件**”以使用 _jvm 文件夹的值附加变量。

```
(Existing File)
$USER_INSTALL_DIR$\Uninstall_$PRODUCT_NAME$ \Uninstall $PRODUCT_NAME$.lax

(Append)

lax.nl.current.vm=..\_jvm\bin\java.exe 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-14T13:19:42.040

将 java 从 1.8.0_202 升级到 1.8.0_211 后我遇到了同样的问题

**问题：**

以下是安装新版 Java 1.8.0_211 的目录：

c:\Program Files\Java\jre1.8.0_211\bin 目录 c:\Program Files (x86)\Common Files\Oracle\Java\javapath 目录

所以一个位于 32 位，第二个位于 64 位程序文件夹中。PATH 中指定的版本是 32 位版本 (c:\Program Files (x86)\Common Files\Oracle\Java\javapath)，即使它是安装的 Java 的 64 位版本。

**解决方案：**

> 将系统环境变量 PATH 从 c:\Program Files (x86)\Common Files\Oracle\Java\javapath 更改为 c:\Program Files\Java\jre1.8.0_211\bin

# hadoop - 如何通过 StarGate REST API 将数据插入 HBase

> ID：10920890
> 
> 赞同：1
> 
> 时间：2012-06-06T19:32:00.840
> 
> 标签：hadoop, hbase, stargate

根据 StarGate 文档，CURL 命令应该是这样的：

```
% curl -H "Content-Type: text/xml" --data '[...]' http://localhost:8000/test/testrow/test:testcolumn 
```

这就是我正在尝试的：

```
% curl -X POST -H "Accept: text/xml" --data '[<CellSet><Row key="cm93MQ=="><Cell column="dGl0bGU6YQ==">d29ya2Vk</Cell></Row></CellSet>]' http://localhost:8080/test/row1/title 
```

不断收到 HTTP 415，不支持的媒体类型.. 任何想法我在那里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:45:06.033

您当前的 curl 选项指定您想要 XML 输出，并且 curl 假设您要发布 url 编码的表单数据（并在 HTTP 标头中指定错误的 Content-Type）。

修改你`-H "Accept: text/xml"`的`-H "Content-Type: text/xml"`，你应该是好的

# javascript - 在自己的站点上禁用 chrome 上下文菜单选项

> ID：10920891
> 
> 赞同：0
> 
> 时间：2012-06-06T19:32:03.593
> 
> 标签：javascript, google-chrome, google-chrome-extension

如何在我自己的站点中禁用由我自己的 chrome 扩展程序创建的上下文菜单项？对于 chrome 扩展中的内容脚本，有`excludes_matches`选项，但上下文菜单似乎没有等效项。

当用户在我自己的网站上时，我只是不希望我添加的上下文菜单项显示出来。

**更新**

人们似乎对我在做什么感到困惑，所以这里是代码。在我的“background_page”中，我将一个项目添加到上下文菜单中，如下所示：

```
chrome.contextMenus.create(
{
    "title": "My Context Menu Item",
    "contexts": ["link"],
    "onclick": myContextItemClicked
}); 
```

当用户按预期右键单击任何`<a>`标签时，该项目就会显示。我想要做的是阻止它在用户在我自己的网站内时出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:43:21.173

`mousedown`我通过在注入到每个页面的内容脚本中的事件触发菜单创建解决了类似的问题。就像是：

内容脚本：

```
document.addEventListener("mousedown", function(event){
        if(event.button == 2) {
                chrome.extension.sendRequest({"createMenu"});
        }
}, true); 
```

背景页面：

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
        if(request === "createMenu") {
                chrome.contextMenus.removeAll(function() {
                        if(sender.tab.url != "http://mysite.com") {
                            chrome.contextMenus.create({...});
                        }
                });
        }
}); 
```

看起来不是很有效，但没有其他方法可以绕过 afaik。虽然它工作得非常顺利，因此用户在显示菜单之前将无法看到您正在重新创建菜单。

# objective-c - 如何从 appdelegate 调用选项卡视图控制器中的方法。故事板

> ID：10920893
> 
> 赞同：0
> 
> 时间：2012-06-06T19:32:08.560
> 
> 标签：objective-c, ios

我需要从应用程序委托中选择选项卡上的索引，并在视图控制器中调用该选项卡在情节提要中映射到的函数

```
(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

     NSString *alertMessage = [[userInfo objectForKey:@"aps"] valueForKey:@"alert"];

    if (alertMessage != nil){
         UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
        tabb.selectedIndex = 2;
     // Need to call a method in my SpecialsViewController which manages properties and functions of tab with index 2
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:34:42.407

请执行下列操作

```
UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
UIViewController *controller = [tabb.viewControllers objectAtIndex:index_of_your_view_ SpecialsViewController];
[controller call_your_method]; 
```

在你的情况下`index_of_your_view_ SpecialsViewController = 2`

# c# - 未从网格调用 MVC 操作

> ID：10920894
> 
> 赞同：0
> 
> 时间：2012-06-06T19:32:13.180
> 
> 标签：c#, asp.net-mvc-3, telerik, telerik-grid

我有一个使用 Telerik 网格的 MVC3 应用程序。我有以下动作：

```
public ActionResult FileDownload(string id) 
```

在我的网格上，我有一个呈现一个小盒子的 ClientTemplate。当用户单击该框时，我希望调用该操作。这是我的网格（为简洁起见，只有一行）：

```
columns.Bound(c => c.DocID).ClientTemplate("<div><a href=\"javascript:void(0);\"  
    class=\"link-button-small\" onclick=\"javascript:downloadFile(<#= DocID #>)\">...</a> 
</div>"); 
```

这是我的 JavaScript：

```
function downloadFile(docId) {
    var url = "@(Url.Content("~/OrderDetails/FileDownload/"))" + docId;
    $('#downloadFrame').attr('src',url); //dumping some data to an iFrame
} 
```

javascript函数调用得很好，但我的Action永远不会执行。我可以使用其他方法调用我的操作，例如在 Telerik 网格上使用 ClientEvents，所以我的操作很好。有谁知道为什么在使用客户端模板时没有调用我的操作？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:44:39.027

尝试

```
columns.Bound(c => c.DocID).ClientTemplate("<div><a href='javascript:' class='link-button-small' onclick='downloadFile(<#= DocID #>)'>...</a></div>"); 
```

基于此[Telerik 论坛帖子](http://www.telerik.com/community/forums/aspnet-mvc/grid/calling-javascript-method-with-parameters-in-clienttemplate-not-working.aspx)。

转义序列可能存在问题。

# java - 获取 IPconfig 信息 android

> ID：10920899
> 
> 赞同：0
> 
> 时间：2012-06-06T19:32:29.993
> 
> 标签：java, android, networking

我正在开发一个 android 应用程序，其中一项活动显示了一个 IPconfig 列表。我正在使用以下代码获取信息：

```
public String   s_dns1 ;
    public String   s_dns2;     
    public String   s_gateway;  
    public String   s_ipAddress;    
    public String   s_leaseDuration;    
    public String   s_netmask;  
    public String   s_serverAddress;
    DhcpInfo d;
    WifiManager wifii;

 wifii= (WifiManager) getSystemService(Context.WIFI_SERVICE);
        d=wifii.getDhcpInfo();
        s_dns1="DNS 1: "+String.valueOf(d.dns1);
        s_dns2="DNS 2: "+String.valueOf(d.dns2);    
        s_gateway="Default Gateway: "+String.valueOf(d.gateway);    
        s_ipAddress="IP Address: "+String.valueOf(d.ipAddress); 
        s_leaseDuration="Lease Time: "+String.valueOf(d.leaseDuration);     
        s_netmask="Subnet Mask: "+String.valueOf(d.netmask);    
        s_serverAddress="Server IP: "+String.valueOf(d.serverAddress);

        info= (TextView) findViewById(R.id.info1);
        info.setText("\n"+s_dns1+"\n"+s_dns2+"\n"+s_gateway+"\n"+s_ipAddress+"\n"+s_leaseDuration+"\n"+s_netmask+"\n"+s_serverAddress); 
```

在模拟器中，我得到以下信息：

```
DNS1:0
DNS2:0
Default gateway:0
IP address:0
Lease time:0
Subnet mask:-1
Server IP:0 
```

但是，当我在 Galaxy 标签 GT-P1000 上测试 APK 时，我得到以下信息：

```
DNS1:16820416
DNS2:0
Default gateway:16820416
IP address:33597632
Lease time:86400
Subnet mask:16777215
Server IP:16820416 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:13:34.290

所有这些 dnsinfo 成员都是 IP 地址，它们使用 int 来存储地址。您必须将其转换为字符串。懒人之道：

```
byte[] ba = BigInteger.valueOf(ip).toByteArray();
InetAddress address = InetAddress.getByAddress(ba);
String s = address.toString(); 
```

# python - 如何使用 mod_wsgi/django/python 生成线程安全的 pdf

> ID：10920902
> 
> 赞同：3
> 
> 时间：2012-06-06T19:32:32.843
> 
> 标签：python, django, pdf, mod-wsgi, thread-safety

我有一个网站都是用 Django 1.4 / Python 2.7 开发的，需要一种生成线程安全 pdf 的方法（= 需要能够生成并发 pdf 文件）。需要支持添加图形/png，所有报告通常都是表格和大量表格。

在 webfaction 上运行 wsgi / Apache。

什么是最好的库（目前使用reportlab，由于它不是线程安全的，我需要尽快更换它......）。

/ 延斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:37:29.183

你检查过[pdfnet sdk](http://www.pdftron.com/pdfnet/index.html)吗？他们有 python 绑定，我已经成功使用它们。您可以下载试用版，然后开始使用。不过它们的级别有点低，所以你会发现你自己构建的 textruns 和其他 pdf 元素，其中包含所有的怪癖。

# android - 节能 GPS 跟踪

> ID：10920904
> 
> 赞同：7
> 
> 时间：2012-06-06T19:32:37.450
> 
> 标签：android, gps, energy

我正在制作一个要求用户将他们的 GPS 位置发送到服务器的应用程序。我需要每 10 秒执行一次，这对能量预算来说很沉重。

是否有任何开源实现，我可以在其中获取一次 GPS 位置，然后使用加速度计和指南针来跟踪用户位置？

或者其他什么是节能的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T19:48:16.623

[这](http://code.google.com/p/little-fluffy-location-library/)是一个很棒的开源位置跟踪库，它甚至被谷歌推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:37:21.147

我会说构建你自己的，这样你就可以得到你想要的，并且避免运行额外的代码，因为你担心能源使用。我会完全按照您的建议进行操作，并谨慎使用 GPS，可能每 30 秒或每分钟为您的计算提供参考，然后在此期间使用指南针和加速度计。

# opengl - 是否可以使用 LWJGL 以无头模式渲染到 FBO？

> ID：10920909
> 
> 赞同：1
> 
> 时间：2012-06-06T19:32:55.683
> 
> 标签：opengl, lwjgl, fbo

我需要为 OpenGL [LWJGL使用 Java 包装器开发应用程序](http://www.lwjgl.org/).该应用程序将以无头模式在远程服务器上运行。考虑到LWJGL（和其他API）中的GL上下文是通过Canvas等Java UI元素创建的事实，我试图了解是否以及如何可能。在我的情况下，我需要能够在不创建窗口的情况下初始化 GL 上下文，因为绘图目标将是像素缓冲区将从其渲染到纹理的 FBO。虽然已经在 LWJGL 中调用了 PBuffer（我猜是像素缓冲区）对象，但有一种可能的解决方案。它确实不需要通过窗口创建的 GL 上下文，因为它在内部创建它。我不想同时使用这种方法，因为它比较旧概念（并且更弱）比帧缓冲区对象，并且因为我使用的是 OGL 3.3 -> 。所以我真的不想与任何旧的管道遗留混合。

我基本上有两个问题：

1.我可以在不设置用于基于 FBO 的渲染的窗口的情况下创建上下文（无头模式）吗？

2.如果第一个问题的答案是否定的，那么我是否可以在远程服务器上运行这样一个为了上下文访问而仍在初始化窗口的应用程序？

更新：这个问题可以结束了。我通过使用 PBuffers 完成的第一次初始化测试它以设置上下文。然后 FBO 渲染按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:56:41.183

我自己找到了答案。应该首先设置 PBuffer 以创建无头 GL 上下文。创建完成后，我们可以使用 FBO 将帧渲染为图像。

# android - Android 上的 ORMLite 不调用 onCreate

> ID：10920911
> 
> 赞同：8
> 
> 时间：2012-06-06T19:33:00.720
> 
> 标签：android, ormlite

使用 ORMLite v 4.40，我尝试让我的应用程序运行，但它似乎忽略了 onCreate 函数

我的 DatabaseHelper 看起来像这样（片段样式）

```
public class ORMLiteHelper extends  OrmLiteSqliteOpenHelper {

    private Context databaseContext;
    private static String DATABASE_NAME = "InVinoVeritas";
    private static int DATABASE_VERSION = 1; 

    public ORMLiteHelper(Context context) {
        super (context, DATABASE_NAME, null, DATABASE_VERSION);
        Log.v("ORMLiteHelper", "Cosntructor");
    ...

    @Override
    public void onCreate(SQLiteDatabase database, ConnectionSource connectionSource) {
        Log.v("DatabaseHelper", "onCreate");
    ...
    @Override
    public void onUpgrade(SQLiteDatabase database, ConnectionSource connectionSource, int oldVersion, int newVersion) {
            Log.v("DatabaseHelper", "onUpgrade");
    ... 
```

我的 MainActivity 调用 DatabaseHelper 描述：

```
public class MainActivity extends OrmLiteBaseActivity<ORMLiteHelper>  { 
```

我试过重新安装应用程序，升级数据库版本，没有任何效果。我确实看到了构造函数调用（包括拼写错误:-)，但未调用 onCreate 和 onUpgrade 。

任何帮助表示赞赏

巴里

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-06T19:40:16.703

创建实例`ORMLiteHelper`并调用`getWritableDatabase()`. 当未创建数据库时，将调用 onCreate。

# javascript - 如何在 HTML 选择元素中关注焦点（从选项到选项）

> ID：10920914
> 
> 赞同：1
> 
> 时间：2012-06-06T19:33:10.863
> 
> 标签：javascript, html

我试图向用户显示额外的信息，因为他们在打开的选择元素中突出显示不同的选项。

我正在使用 select 元素的 keydown 事件，并在使用键盘（箭头键）时让它工作。基本上，我会跟踪用户从所选项目出发的距离和方向。有了这些信息，我就知道突出显示了哪个选项。

我的问题是：如果用户只使用鼠标，我怎么知道哪个选项突出显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:50:49.317

这仅适用于 FF：http: [//jsfiddle.net/umDNF/2/](http://jsfiddle.net/umDNF/2/)（下面的代码也是如此）。您可能想考虑使用自定义下拉菜单而不是框。也许像这样的[http://labs.abeautifulsite.net/jquery-selectBox/](http://labs.abeautifulsite.net/jquery-selectBox/)有大量的钩子来触发你的信息的显示。

**html:**

```
<select>
  <option data-info="Option one">1</option>
  <option data-info="Option two">2</option>
  <option data-info="Option three">3</option>
  <option data-info="Option four">4</option>
</select>

<div class="metadata">Placeholder</div> 
```

**Javascript（使用 jquery）：**

```
 $('option').live('mouseenter', function(){
       $('.metadata').html( $(this).attr('data-info'));         
    }); 
```

# path - 无法从 CMD 打开 Selenium Jar 文件。路径或类路径问题？

> ID：10920917
> 
> 赞同：11
> 
> 时间：2012-06-06T19:33:15.753
> 
> 标签：path, cmd, classpath, executable-jar, selenium-grid

我正在尝试启动：

```
java -jar selenium-server-standalone-2.14.0.jar -role hub 
```

来自我的命令提示符，但输出如下：

```
C:\Program Files (x86)>java -jar selenium-server-standalone-2.14.0.jar -role hub

Unable to access jarfile selenium-server-standalone-2.14.0.jar 
```

C:\Program Files (x86) 是 jar 文件所在的位置。

我已将 C:\Program Files (x86) 放在我的 PATH 和 CLASSPATH 中，但它仍然无法工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T15:06:22.550

你的文件名一定是错误的。检查您是否有一个名为 -selenium-server-standalone-2.14.0.jar 的文件。很有可能你不会。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-21T05:29:41.610

我遇到了同样的问题。解决方案是命名约定很重要。如果您有一个 selenium 服务器standalone.jar 文件，您可以先重命名它以使其看起来简单（例如 abc.jar）。

1）如果你系统中的jar文件遇到.jar扩展名，那么重命名后，给.jar扩展名。（例如abc.jar）

2）如果您系统中的jar文件没有.jar扩展名，那么重命名后，不要提供.jar扩展名（例如abc）

3）现在启动集线器：java -jar abc.jar -role hub

问候， Nikhil Kanojia

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T09:23:32.567

无法访问 jarfile 被视为常见错误。启动集线器或节点时可能会发生此错误。这意味着 Java 找不到 selenium-server jar 文件。从存储 selenium-server-XXXX.jar 文件的目录运行命令，或者指定 jar 的显式路径。

[在此处](http://docs.seleniumhq.org/docs/07_selenium_grid.jsp#unable-to-acess-the-jarfile)查看详细信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-26T02:54:46.177

1.goto root 模式 2.安装 $apt install mlocate 3.找到你的 jar 文件 4.检查正确的 jar 文件名并再次尝试使用特定命令打开它 5 java -jar ./selenium-server-standalone-2.14.0 。罐

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T08:01:36.023

我对 ubuntu 也有同样的问题。尝试以下步骤..

转到 jar 文件所在的目录。

然后使用执行目录中的 .jar 文件，

```
java -jar ./selenium-server-standalone-2.14.0.jar 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-28T19:21:13.773

在命令提示符中转到所需位置并输入以下命令。java -jar ./selenium-server-standalone-3.141.59.jar

这意味着如果您将 .jar 文件保存在“C:\Eclipse\jar”位置，那么命令应该是：C:\Eclipse\jar>java -jar ./selenium-server-standalone-3.141.59.jar

# silverlight - 子窗口显示时如何更改父窗口控件的模糊效果

> ID：10920918
> 
> 赞同：0
> 
> 时间：2012-06-06T19:33:19.810
> 
> 标签：silverlight

打开 ChildWindow 会自动对父窗口的文本框、文本块等应用模糊效果。但是，我不需要这种效果。有没有办法改变它。我尝试了 OverlayOpacity 和 OverlayBrush，没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:01:14.660

我会指导你一个我之前问过的问题 我认为我得到的答案也会回答你的问题[当孩子打开时让父窗口保持活动状态](https://stackoverflow.com/questions/10584795/leave-parent-window-active-when-child-opens)

# objective-c - 使用 CocoaAsyncSocket 读取数据返回空白

> ID：10920923
> 
> 赞同：0
> 
> 时间：2012-06-06T19:33:31.877
> 
> 标签：objective-c, ios, cocoa-touch, cocoaasyncsocket

我使用 CocoaAsyncSocket 创建了一个 TCP 套接字连接，每当我尝试执行 didReadData 时，我都会返回空白。当我设置断点并尝试调试时，我发现“msg”的值是@“”。

这就是我的 appDelegate.m 的样子：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSData *data = nil;
    // Initialize socket object and make it a delegate.  Then call the delegate methods.
    socket = [[AsyncSocket alloc] initWithDelegate:self];
    [self connect];
    [self onSocket:socket didConnectToHost:@"9.5.8.6" port:11005];
    [self onSocket:socket didReadData:data withTag:1]; // tags COULD be #defined *******

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc]  initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是我的 onSocket:socket didReadData:data withTag: 方法：

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *msg = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    if(msg)
    {
        NSLog(@"RX:%@",msg);
        if(msg == nil)
        {
            NSLog(@"msg is all Blanks");
        }
    } 
    else 
    {
        NSLog(@"Fail");
    }    
} 
```

请注意，此方法是来自 CocoaAsyncLibrary 的方法。我不知道我是否正确调用了该方法，或者我是否没有传递正确的参数，或者什么。

当我运行该应用程序时，我在控制台中看到的只是：

```
2012-06-06 11:44:00.434 tekMatrix[1378:f803] connected
2012-06-06 11:45:14.312 tekMatrix[1378:f803] RX: 
```

非常感谢任何和所有帮助。

谢谢！

*编辑*

这是我现在的 didFinishLaunchingWithOptions 方法中的内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    socket = [[AsyncSocket alloc] initWithDelegate:self];
    NSError *error = nil;
    if (![socket connectToHost:@"199.5.83.63" onPort:11005 error:&error]) 
    {
        NSLog(@"Error connecting: %@", error);
    }

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc] initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在我可以看到我已连接，但我仍然不理解 onSocket:socket didReadData:data withTag: 方法未被调用。对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:39:13.740

对不起，我不得不说：你把代表弄错了。

你不会调用你实现的方法来自己实现委托的协议——委托者（在这种情况下是套接字）会这样做

所以这段代码

```
[self connect];
[self onSocket:socket didConnectToHost:@"9.5.8.6" port:11005];
[self onSocket:socket didReadData:data withTag:1] 
```

根本没有任何意义。删除它。

相反，应该有如下代码来连接

```
NSError *error = nil;
if (![socket connectToHost:@"9.5.8.6" onPort:11005 error:&error]) {
    NSLog(@"Error connecting: %@", error);
} 
```

然后，套接字将调用`socket:didConnectToHost:port:`，这可能看起来像

```
-(void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port
{
        [sock writeData:self.data withTimeout:-1 tag:1];

} 
```

并且对象套接字将调用您提供的进一步委托方法实现。

* * *

但是由于[委托](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)是可可（-touch）中一种非常重要的模式，请确保您做对了。

# asp.net-mvc - 使用 sha256 计算电子邮件的电子邮件哈希

> ID：10920926
> 
> 赞同：0
> 
> 时间：2012-06-06T19:33:52.047
> 
> 标签：asp.net-mvc, c#-4.0, hotmail, sha256

我正在尝试从 asp.net mvc 中的 hotmail 中检索联系人。hotmail api 的响应包含电子邮件作为电子邮件哈希，我知道我们无法解密该电子邮件地址哈希。并且在那里我看到了一个包含实际联系人电子邮件地址的字段名称字段。我如何使用 sHA56 hasing 计算该电子邮件地址的哈希值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:43:55.647

那个怎么样？它假设要散列的字符串以 UTF-8 编码，您链接的文章没有提到应该使用的编码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;

namespace TestSHAHash
{
    class Program
    {
        static void Main(string[] args)
        {
            string email = "Someone@Example.org";
            string clientId = "0000000603DB0F";

            string toHash = (email.Trim() + clientId.Trim()).ToLowerInvariant();
            byte[] data = Encoding.UTF8.GetBytes(toHash);
            byte[] result;
            SHA256 shaM = new SHA256Managed();
            result = shaM.ComputeHash(data);
            string lowerHexaDecimal = BitConverter.ToString(result).Replace("-","").ToLowerInvariant();
            Console.WriteLine(lowerHexaDecimal);
            Console.ReadLine();
        }
    }
} 
```

# java - 使用 JAVA 从线路输入录制音频

> ID：10920930
> 
> 赞同：1
> 
> 时间：2012-06-06T19:33:58.703
> 
> 标签：java, audio, javasound

假设我有一段音频正在播放，我想录制它。所以我将公对公电缆从线路输出连接到线路输入。所以没有麦克风。

有没有办法记录它并将其放入 .wav 文件并使用 Java 存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:38:01.837

以下文章是另一个问题的公认答案

[使用 Java 捕获音频](http://www.java2s.com/Tutorial/Java/0120__Development/CapturingAudiowithJavaSoundAPI.htm) 这里描述的内容太多了，我讨厌只发布一个链接，但是......

# c# - 使用 Linq 在运行时使用过滤数据集更新组合框

> ID：10920933
> 
> 赞同：1
> 
> 时间：2012-06-06T19:34:09.827
> 
> 标签：c#, linq

我想在输入时更新组合框的内容。我正在使用下面的代码，但显然我做错了；即使在调试控制台上，内容也不会被过滤和更新。只有当我删除组合框中的最后一个字符时，调试控制台才会更新。这是带有 debug.writeline 版本的代码（我将使用原始代码的组合框中列表中出现的第一条记录）。

```
 private void comboBox1_TextUpdate(object sender, EventArgs e)
    {
        var query = ds.Tables[0].AsEnumerable()
            .Where(d => d.Field<string>("FirstName").StartsWith(comboBox1.Text))
            .Select(d => d.Field<string>("FirstName"));
        foreach (string s in query)
            Debug.WriteLine(s);
    } 
```

更新：看起来我的数据库有问题。上面的代码可以正常工作，但它需要是 textchanged 事件，而不是 textupdate。感谢您的贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:40:35.283

您似乎正在尝试实现某种自动完成功能。改用 a`TextBox`和使用它的`AutoCompleteCustomSource`,`AutoCompleteMode`和`AutoCompleteSource`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:41:45.190

您可能想要处理 TextChanged 事件。

TextChanged：“在 Text 属性值更改时发生。” [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)

TextUpdate：“在控件格式化文本时发生，但在显示文本之前。” [http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.textupdate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.textupdate.aspx)

# java - 如何使用桌面快捷方式启动 .jar 文件（针对特定 jre）

> ID：10920942
> 
> 赞同：0
> 
> 时间：2012-06-06T19:34:34.073
> 
> 标签：java, windows, wix, shortcut

我正在尝试创建一个桌面快捷方式来启动我们的 .jar 文件。下面的当前 WIX 构建文件给出了错误：

```
 [exec] installMsgs.wxs
 [exec] C:\Users\ME\GIT_REPOS\APP\installer\installApp.wxs(43) :
          error CNDL0035 : The Shortcut/@Target attribute cannot be specified when attribute Advertise is present with value 'yes'.
 [exec] C:\Users\ME\GIT_REPOS\APP\installer\installApp.wxs(43) :
          error CNDL0062 : The Shortcut/@Target attribute cannot be specified 
```

当 Shortcut 元素嵌套在 File 元素下时。

但据此： http: [//goo.gl/yoSTz](http://goo.gl/yoSTz)它应该可以工作。我尝试在文件元素之外创建一个快捷方式作为 javaw.exe 文件的自己的组件，但这也不起作用。谢谢你的帮助。

这是我的构建文件中的部分：

```
<Directory Id='D_MyApp' Name='MyApp'>
                        <Component Id='c_myApp' Guid='4f909d90-e31c-44ce-a0af-7042f226611b'>
                            <File Id='myApp' Name='MyApp.jar'
                                Source='..\MyApp\target\Myapp.jar' KeyPath='yes'>
                                <Shortcut Id="s_myApp" Directory="DesktopFolder"
                                    Target="[INSTALLDIR]\jre6\bin\java.exe" 
                                    Arguments="-jar MyApp.jar"
                                    Name="My App" 
                                    WorkingDirectory='INSTALLDIR' 
                                    Icon="MyApp.exe"
                                    Advertise="yes" />
                            </File>
                        </Component>
                    </Directory>
                    <Directory Id='D_jre' Name='jre6'>
                        <Directory Id='D_lib' Name='lib'>
                            <Directory Id='D_ext' Name='ext'>
                                <Component Id='c_SerialIOjars' Guid='a4bc45fe-b62f-478e-ab57-ca5e3e16b42d'>
                                    <File Id='f_jspComm.jar' Name='jspComm.jar'
                                        Source='..\RadioServer\lib\SerialIO\jspComm.jar' KeyPath='no'>
                                    </File>
                                    <File Id='f_Serialio.jar' Name='Serialio.jar'
                                        Source='..\RadioServer\lib\SerialIO\Serialio.jar' KeyPath='no'>
                                    </File>
                                </Component>
                            </Directory>
                        </Directory>
                    </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:47:36.587

我目前刚刚创建了一个 .bat 文件，它通过定位我们包含的 JRE javaw.exe 文件来启动 jar，并在桌面上有一个 .bat 文件的快捷方式。获得所需结果的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:36:03.010

您会收到错误，因为当`Shortcut`元素嵌套在里面时`File`，它`Target`被假定为文件本身。

这不是您想要的，因此`Shortcut`元素应该与另一个组件并排`MyApp.jar`或在另一个组件中。`MyApp.jar`另外，当您将其作为参数传递给 JRE 时，您真的很想使用完整路径。

# php - 存储语言和风格。什么是最好的？文件或数据库 ( i18N )

> ID：10920947
> 
> 赞同：0
> 
> 时间：2012-06-06T19:34:47.260
> 
> 标签：php, database, file, internationalization, storage

我正在为 IT 启动一个事件跟踪系统，这可能是我的第一个 PHP 项目。

我一直在根据我见过的 vBulletin 等软件在脑海中设计它，我希望它有 i18n 和样式可编辑。

所以我的第一个问题在这里：

1.  什么是存储这些东西的最佳方法，知道它们可能是静态的。我一直在考虑用 PHP 获取文件内容，在文本编辑器中显示它，然后在保存时替换旧的。（如果以前从未编辑过，请制作一份副本，以便我们拥有“原件”）。我认为这比使用 MySQL 和存储语言/样式要快得多。

2.  这里的治安怎么样？我应该创建 .htaccess 以在此文件夹上请求 pw 吗？

3.  我知道如何使用 for each 从数据库中获取数组并使用 strreplace ($name, $value, $file) 进行替换，但如果我将语言存储在文件中，我可以用它的内容创建一个关联数组（如 JSON ）。

非常感谢，抱歉这么多问题，我是新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:18:11.957

1.  存储在 HDD 与 DB 上的好处是备份不会浪费太多空间。例如。文件备份一次后，第二天就不会占用磁带了。然而，一个数据库每天都会得到完全备份，并且占用越来越多的空间。将其写入磁盘的不利方面是它增加了有人上传恶意内容的机会，他们可能足够聪明，可以弄清楚如何执行它。你只需要更加小心，仅此而已。
2.  是的，使用 .htaccess 来限制对可写文件夹的任何操作。提前考虑好风险。
3.  你的方法听起来像是一个很好的策略。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:58:45.380

这就是我在我的 cms 中所做的：

*   对于`each`我开发的插件/程序/实体（你命名它），我创建一个`/translations`文件夹。
*   我把我所有的翻译都放在那里，命名为**el.txt、de.txt、uk.txt**等。所有语言
*   我将翻译数据存储在**JSON**中，因为它易于存储、易于阅读并且每个人都最容易发布他们的。
*   文件可以轻松地在文件中进行 UTF8 编码，而不会弄乱数据库，从而可以在文件模式下读取它们。（只有`JSON.parse`他们）
*   在安装此类插件时，我只是遍历所有翻译并将它们放入数据库中，每个表行的每种语言。（等`a data column of TEXT datatype`）
*   对于每个页面渲染，我只需查询一次数据库以获取所选语言的这一行，然后调用`json_decode()`整个结果以获取一次；然后将其放入**$_SESSION**中，以便下次*获取当前所选语言的快速翻译字符串*。

整个事情的开发让我同时兼顾**性能和兼容性**。

# javascript - 在 Rails 应用程序中实现 javascript 库

> ID：10920959
> 
> 赞同：1
> 
> 时间：2012-06-06T19:35:19.490
> 
> 标签：javascript, jquery, ruby-on-rails

事实证明，这对 Google 来说是一件困难的事情。我知道谷歌似乎应该很容易。

我试图了解如何实现像[gmaps.js](http://hpneo.github.com/gmaps/examples/basic.html)这样的好库。

应用程序.html.erb：

```
<%= javascript_include_tag :defaults %>
<%= javascript_include_tag "gmaps" %> 
```

不确定这两个是否都是必要的。我的 /vendor/assets/javascripts 文件夹中有 gmaps.js，使用 rails 3.2.3。我很想知道前者是否能处理它。

应用程序/资产/javascripts/indexmap.js：

```
new GMaps({
    div: '#map',
    lat: -12.043333,
    lng: -77.028333
}); 
```

index.html.erb：

```
<div id="themap">
    <%= javascript_include_tag("indexmap") %>
</div> 
```

应用程序.css：

```
#themap{
  display: block;
  width: 95%;
  height: 350px;
  margin: 0 auto;
  -moz-box-shadow: 0px 5px 20px #ccc;
  -webkit-box-shadow: 0px 5px 20px #ccc;
  box-shadow: 0px 5px 20px #ccc;
} 
```

我得到的只是一个空白框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:38:45.760

尝试使用 ":gmaps" 而不是 "gmaps"。

另外，尝试右键单击该框上的检查，并查看 JS 是否在 Chrome 的检查器中引发错误。

好的-更新，想通了。

您需要使用 Google Maps 和 JQuery 才能使其正常工作。本身没有 CSS，您需要在 jQuery 文档就绪块中建立对象。我已经[压缩了这个工作的样本（在一个基本的 Rails 应用程序中）](http://www.banane.com/test4.zip)。

本质上，在 gMaps.js 之上包含 jQuery 和 Maps，然后包含一些 JS：

```
<server type="text/javascript">
$(document).ready(function(){
  map = new GMaps({
    div: '#map',
    lat: -12.043333,
    lng: -77.028333
  });
});
</script>
<div id="map" style="height:200px;width:200px;"></div> 
```

# javascript - knockout.js 在数据绑定声明中分配 observable

> ID：10920963
> 
> 赞同：1
> 
> 时间：2012-06-06T19:35:28.047
> 
> 标签：javascript, data-binding, mvvm, knockout-2.0

是否可以通过如下所示的数据绑定声明设置*showErrorConsole可观察对象？*这个炸弹带有“ *k.apply is not a function* ”。我知道我可以在这里使用内联函数，但这感觉不对，而且打字要多得多。

**HTML：**

```
<div data-bind="event: { mouseover: showErrorConsole(true) }" ></div>
<div id="devConsole" data-bind="visible: showErrorConsole">
        <div><button data-bind="click: showErrorConsole(false)">X</button></div>
</div> 
```

**视图模型：**

```
AjaxErrorsModel = (function () {
    function Constructor() {
        var self = this;
        self.errors = ko.observableArray();
        self.hasErrors = ko.computed(function () {
            return self.errors().length > 0;
        }, self);
        self.showErrorConsole = ko.observable(false);
    };
    return Constructor;
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:38:34.890

可能有一个巧妙的 KO 技巧可以让您这样做，但最简单的方法是将其添加到您的构造函数中：

```
self.showErrorConsoleIsFalse = function() {
    self.showErrorConsole(false);
}; 
```

接着：

```
<button data-bind="click: showErrorConsoleIsFalse"> 
```

或者，如果您想要 mouseover 事件，这将是相同的想法：

```
self.showErrorConsoleIsTrue = function() {
    self.showErrorConsole(true);
};

<div data-bind="event: { mouseover: showErrorConsoleIsTrue }" ></div> 
```

* * *

**编辑**

当然，没有什么能阻止您从 jQuery 管理这些事件：

```
<div class="showConsole" ></div>

$(".showConsole").hover(function() {
    yourViewModel.showErrorConsole(true);
}, function() {
    yourViewMode.showErrorConsole(false);
}); 
```

# c# - 如何知道 Process.Start() 创建的进程何时关闭？

> ID：10920964
> 
> 赞同：1
> 
> 时间：2012-06-06T19:35:30.927
> 
> 标签：c#, process, system-calls

我正在使用这个：

```
var proc2 = Process.Start(Path.GetFullPath(filename));
proc2.Exited += (_, __) =>
{
    MessageBox.Show("closed!");
}; 
```

但我关上窗户却没有`MessageBox.Show("closed!");`。如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T19:39:08.760

您需要设置[`Process.EnableRaisingEvents`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enableraisingevents.aspx)为**true**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T19:41:13.613

您忘记将 设置`EnableRaisingEvents`为 true。

此外，您可能希望使用构造函数创建 Process，设置 ProcessStartInfo，然后在注册后调用 Start 以侦听事件。否则你有一个竞争条件，在你注册监听事件之前进程退出（我不太可能知道，但在数学上并非不可能）。

```
var process = new Process();

process.StartInfo = new ProcessStartInfo(Path.GetFullPath(filename));
process.EnableRaisingEvents = true;

process.Exited += (a, b) =>
{
  MessageBox.Show("closed!");
};

process.Start(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T19:39:28.367

你忘记了启用事件

```
Process p;
p = Process.Start("cmd.exe");
p.EnableRaisingEvents = true;
p.Exited += (sender, ea) =>
            {
                  System.Windows.Forms.MessageBox.Show("Cmd was Exited");
            }; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T19:37:39.397

您可以在之后触发警报`proc2.WaitForExit()`

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中增加超时值

> ID：10920968
> 
> 赞同：4
> 
> 时间：2012-06-06T19:35:48.437
> 
> 标签：asp.net-mvc-3

我有一个通过 ASP.NET MVC 3 公开的 JSON 服务。该服务作为控制器上的操作公开。我可以成功调用该操作。但是，有时，该操作需要很长时间才能完成。因此，我的调用者由于超时而失败。我的问题是，如何更改 ASP.NET MVC 3 中的超时阈值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:58:45.523

如果你需要做一些你知道可能需要一点时间的任务，使用 AsyncControllers 会很好，你可以在动作之间设置不同的超时

例如

```
[AsyncTimeout(3000)] //timeout in miliseconds
public void DoTaskAsync(){

//something that takes a long time
 AsyncManager.Parameters["result"] = contentresult; //Contentresult is your data result of process

}
public ActionResult DoTaskCompleted(String result){
   return json(result);
} 
```

[http://msdn.microsoft.com/en-us/library/ee728598.aspx#Y4400](http://msdn.microsoft.com/en-us/library/ee728598.aspx#Y4400)了解详情...

除此以外...`HttpContext.Server.ScriptTimeout = 3000;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:40:19.137

这取决于什么是超时。如果只是服务器响应，我相信您可以在控制器本身中设置它（以秒为单位）：

```
HttpContext.Server.ScriptTimeout = XXX; 
```

如果它类似于会话或身份验证超时，您将需要扩展这些值。

# sql - 在 SQL 中实现层次结构

> ID：10920971
> 
> 赞同：1
> 
> 时间：2012-06-06T19:36:25.660
> 
> 标签：sql, sql-server

假设我有一个表，其中有一个“CDATE”代表我检索数据的日期，一个“SECID”标识我检索数据的安全性，一个“SOURCE”指定我从哪里获取数据，以及我得到的“VALUE”从源头上。我的数据可能如下所示：

```
CDATE   | SECID | SOURCE | VALUE
--------------------------------
1/1/2012    1       1        23
1/1/2012    1       5        45
1/1/2012    1       3        33
1/4/2012    2       5        55
1/5/2012    1       5        54
1/5/2012    1       3        99 
```

假设我有一个如下所示的 HIERARCHY 表（具有最大 HIERARCHY 编号的“SOURCE”优先）：

```
SOURCE  |  NAME | HIERARCHY
---------------------------
  1        ABC       10
  3        DEF        5
  5        GHI        2 
```

现在假设我希望根据上面的层次结构选择我的结果。因此，应用层次结构并选择具有最大 HIERARCHY 编号的源，我希望得到以下结果：

```
 CDATE   | SECID | SOURCE | VALUE
---------------------------------
1/1/2012    1       1        23
1/4/2012    2       5        55
1/5/2012    1       3        99 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:41:08.973

这将加入您的层次结构，并为每个日期和证券选择排名最高的来源。

```
SELECT CDATE, SECID, SOURCE, VALUE
FROM (
  SELECT t.CDATE, t.SECID, t.SOURCE, t.VALUE,
    ROW_NUMBER() OVER (PARTITION BY t.CDATE, t.SECID
                       ORDER BY h.HIERARCHY DESC) as nRow
  FROM table1 t
  INNER JOIN table2 h ON h.SOURCE = t.SOURCE
) A
WHERE nRow = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:42:50.280

您可以通过以下方式获得您想要的结果。它将您的数据与您的层次结构相结合，并根据最高层次结构对它们进行排名。如果您在同一日期有重复的来源，这只会任意返回一个结果。

```
;with rankMyData as (
    select
        d.CDATE
    ,   d.SECID
    ,   d.SOURCE
    ,   d.VALUE
    ,   row_number() over(partition by d.CDate, d.SECID order by h.HIERARCHY desc) as ranking
    from DATA d
      inner join HIERARCHY h
        on h.source = d.source
)
SELECT
    CDATE
,   SECID
,   SOURCE
,   VALUE
FROM rankMyData
where ranking = 1 
```

# extjs - 在 extjs 中添加 2 个 XTemplate 变量

> ID：10920976
> 
> 赞同：0
> 
> 时间：2012-06-06T19:36:51.253
> 
> 标签：extjs

我正在尝试添加 2 个 Xtemplate 的成员变量。我尝试过这样的事情

```
 reader: new Ext.data.XmlReader({
                    record: 'RealTimeFlow'
            },[
                    {name: 'successEvent', mapping: '@sEvents'},
                    {name: 'successLatency', mapping : '@sLatency'},
                    {name: 'failedEvent', mapping: '@fEvents'},
                    {name: 'failedPercent', mapping: '@fPercent'},
                    {name: 'failedLatency', mapping : '@fLatency'}
            ])
      });

 var RTFtpl = new Ext.XTemplate(
 '<p align="left">Total Events:{[values.successEvent+values.failedEvent]}<br \>',......................... 
```

如果成功事件 = 40 并且失败事件 = 6

那么答案应该是 44 ......但是通过使用上面我得到 406

知道我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:51:08.827

那是因为它把两个字符串加在一起

'40' + '6' = '406' 在 Javascript 中

尝试将它们解析为数字。您也许可以使用 parseInt，或者确保这些值是模型中的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:16:42.530

解决了问题

在商店中将类型值添加到变量中

```
 reader: new Ext.data.XmlReader({
                record: 'RealTimeFlow'
        },[
                {name: 'successEvent', mapping: '@sEvents', type : 'int'},
                {name: 'successLatency', mapping : '@sLatency'},
                {name: 'failedEvent', mapping: '@fEvents',type : 'int'},
                {name: 'failedPercent', mapping: '@fPercent'},
                {name: 'failedLatency', mapping : '@fLatency'}
        ]),
        newDate : new Date()
  }); 
```

和

```
var RTFtpl = new Ext.XTemplate(
 '<p align="left">Total Events:{[values.successEvent+values.failedEvent]}<br \>', 
```

# php - PHP递归没有停止

> ID：10920977
> 
> 赞同：2
> 
> 时间：2012-06-06T19:37:00.380
> 
> 标签：php, recursion

不确定我在使用这个递归函数时做错了什么。我有一个包含网站树的数组，我正在寻找的页面可以无限​​深。该功能会遍历所有可能性，但有时在找到正确的“页面”时不会停止。

数组

```
$haystack = array(
    array("id" => 1,"parent" => 0,"route" => "home","children" => array()),
    array("id" => 2,"parent" => 0,"route" => "news","children" => array()),
    array("id" => 3,"parent" => 0,"route" => "photography","children" => array(
                array("id" => 6,"parent" => 3,"route" => "photography/portraits","children" => array()),
                array("id" => 7,"parent" => 3,"route" => "photography/countries","children" => array()),
                array("id" => 8,"parent" => 3,"route" => "photography/landscapes","children" => array(
                                array("id" => 9,"parent" => 8,"route" => "photography/landscapes/city","children" => array()),
                                array("id" => 10,"parent" => 8,"route" => "photography/landscapes/wilderness","children" => array())
                            )
                )
        )
    ),
    array("id" => 4,"parent" => 0,"route" => "about","children" => array()),
    array("id" => 5,"parent" => 0,"route" => "contact","children" => array()),
); 
```

递归函数

```
function recurse($needle = -1, $haystack = NULL){
    $_tmp = array();

    foreach($haystack as $key => $item)
    {
        echo $needle ." === ". $item["id"] . "<br/>";

        if((string)$item["id"] === (string)$needle){
            echo "Found: " . $needle . "<br/><br/>";
            $_tmp = $item;
            break;
            //return $item;   <-- this doesn't work either
        } else {
            $_tmp = recurse($needle, $item["children"]);
        }
    }
    return $_tmp;
} 
```

测试用例：

```
$test = recurse(3);
print_r($test);

$test = recurse(7);
print_r($test);

$test = recurse(9);
print_r($test); 
```

最后的测试输出：

```
9 === 1
9 === 2
9 === 4
9 === 7
9 === 8
9 === 11
9 === 12
9 === 13
9 === 14
9 === 15
9 === 3
9 === 9
Found: 9  <-- should stop here, but continues

9 === 5
9 === 6
Array
(
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:40:51.877

它返回但在其他递归框架中继续。例如，调用：1 -> 2 -> 3 -> 4。从 4 返回但 3 (1 -> 2 -> 3) 继续执行循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:59:41.493

这是一个稍微修改的递归函数，可以解决您遇到的问题：

```
 function recurse($needle = -1, $haystack = NULL){
    static $_tmp = array();

    if (count($_tmp) == 0 && $haystack != NULL && count($haystack) > 0) {
       foreach($haystack as $key => $item) {
          if (count($_tmp) == 0) {
              echo $needle ." === ". $item["id"] . "<br/>\n";

              if((string)$item["id"] === (string)$needle){
                  echo "Found: " . $needle . "<br/>\n";
                  $_tmp = $item;
                  break;
              } elseif (!empty($item["children"])) {
                  echo "calling ". $item["id"]. ".children <br/>\n";
                  $_tmp = recurse($needle, $item["children"]);
              }
          }
       }
    }
    return $_tmp;
} 
```

基本上，它声明了一个静态变量`$_tmp`，该变量仅初始化一次，然后检查仅在`$_tmp` **为空时才处理循环，以确保在找到***针头*后停止进一步处理。

[**`Online working demo of above code`**](http://ideone.com/WXtNB)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:55:49.060

只有当您在您所在的级别上找不到任何东西时，您才能进入阵列，如下所示：

```
function recurse($needle = -1, $haystack = NULL){
    $_tmp = array();

    foreach($haystack as $key => $item)
    {   
        echo $needle ." === ". $item["id"] . "<br/>";

        if((string)$item["id"] === (string)$needle){
            echo "Found: " . $needle . "<br/><br/>";
            $_tmp = $item;
            break;
            //return $item;   <-- this doesn't work either
        }   
    }   
    if (empty($_tmp))
        foreach($haystack as $key => $item)
        {   
            $_tmp = recurse($needle, $item["children"]);
        }   

    return $_tmp;
} 
```

# javascript - 如何使用文本在页面的不同位置显示更多文本？

> ID：10920990
> 
> 赞同：0
> 
> 时间：2012-06-06T19:38:00.990
> 
> 标签：javascript, html

我一直在研究寻找如何使用标签和javascript来创建一个可以看到与您要点击的文本有关的更多信息的区域？给我的一个很好的编码示例，但我已经有一个布局，其中文本设置在 div 标签内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:40:47.977

只要有一个`onclick`切换`display`另一个div的值：

[jsFiddle](http://jsfiddle.net/vuw8u/)

**CSS**

```
#toggle {
   position: absolute;
   left: 20px;
   top: 100px;
} 
```

**HTML**

```
<div id="toggle">
   Show More
</div>
<div id="showMoreText" style="display: none">
   more text here
</div> 
```

**JS**

```
window.onload = function() {
    document.getElementById('toggle').onclick = showMore;
}

function showMore() {
    var div = document.getElementById('showMoreText');
    var display = div.style.display;
    display == "none" ? div.style.display = "block" : div.style.display = "none";
} 
```