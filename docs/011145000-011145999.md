# StackOverflow 问答 11145000-11145999

# c# - VS.NET - 添加用于自动格式化 C# 代码

> ID：11145003
> 
> 赞同：0
> 
> 时间：2012-06-21T19:03:29.083
> 
> 标签：c#, .net, visual-studio-2010, add-in, code-formatting

在您根据给定规则键入时，是否有任何 VS.NET 添加用于格式化 C#？

除了[ReSharper](https://en.wikipedia.org/wiki/JetBrains#ReSharper_Ultimate)，因为它做了很多其他事情并因此减慢了 VS.NET 的速度，所以我正在寻找一个用于代码格式化的轻量级插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-06T17:27:28.407

[Continuous Formatting](https://vlasovstudio.com/continuous-formatting/)扩展在您键入时自动格式化 C# 代码。要给出规则，您可以使用内置的 Visual Studio 引擎或 ReSharper 和[CodeRush](https://en.wikipedia.org/wiki/CodeRush)等外部工具。

# asp.net - asp.net nHibernate 从映射的视图中选择数据

> ID：11145009
> 
> 赞同：3
> 
> 时间：2012-06-21T19:03:52.130
> 
> 标签：asp.net, nhibernate, nhibernate-mapping, sybase

我有两张桌子和一个视图：

```
TABLE "Table_1" (
    "Id" INTEGER NOT NULL DEFAULT AUTOINCREMENT,
    "Field_1" VARCHAR(11) NOT NULL,
    PRIMARY KEY ( "Id" ASC )
) IN "system";

TABLE "Table_2" (
    "Table_1_Id" INTEGER NOT NULL,  //// (THIS FIELD HAVE A FOREIGN KEY WITH TABLE "Table_1" FIELD "Id")
    "Field_2" VARCHAR(11) NOT NULL,
    PRIMARY KEY ( "Table_1_Id" ASC )
) IN "system";

VIEW "vwView_1"()
AS
select 
    Id, 
    Field_1, 
    Field_2 
from Table_1 key join Table_2 
```

这是查看地图：

```
...
Table("vwView_1");
Mutable(false);
Id(x => x.Id);
Property(x => x.Field_1);
Property(x => x.Field_2);
... 
```

这是数据库中的视图数据：

```
Id  Field_1  Field_2
1   Green    Blue
1   Green    Red
2   Black    White
3   Orange   Blue
6   Red      Orange
6   Red      Green 
```

当我使用 nHibernate 获取数据时，我得到了以下数据：

```
Id  Field_1  Field_2
1   Green    Blue
1   Green    Blue
2   Black    White
3   Orange   Blue
6   Red      Orange
6   Red      Orange 
```

我认为问题出在查看地图中，但我找不到解决此问题的方法:(

有人有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:51:59.290

您的视图没有返回 a`unique ID`因此，当 NHibernate 看到重复的 Id 时，它已经认为该行已被水合，因为它在一级缓存中。因此它只返回相同的重复行，这就是您看到该行为的`1, Green, Blue`原因`1, Green, Blue`

你有两个选择：-

1.  在您看来，返回一个唯一 ID，它是表 2 中的唯一 ID，尽管根据您的架构判断，这看起来不可能

2.  您需要覆盖`equals`并`GetHashCode`在您的视图地图类中，请参阅此[博客](http://devlicio.us/blogs/anne_epstein/archive/2009/11/20/nhibernate-and-composite-keys.aspx)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:53:39.150

您将 Id 列映射为 Identifier 字段，因此 NHibernate 的第一级缓存不会费心重新读取它已经缓存的行。这就是为什么具有相同 Id 值的所有值对于 Field_1 和 Field_2 具有相同的值。

也许您可以在视图中添加一个 ROW_NUMBER() 字段并将其映射为标识符。

# jquery - JQuery UI 弹跳效果 - 进入 div 时仅弹跳一次

> ID：11145010
> 
> 赞同：5
> 
> 时间：2012-06-21T19:04:03.877
> 
> 标签：jquery, jquery-ui, bounce

我有一个 div，当鼠标进入/悬停在 div 上时，我想弹跳一次。

我的代码适用于 Chrome，但不适用于 Firefox 或 IE。

[http://jsfiddle.net/d7UjD/73/](http://jsfiddle.net/d7UjD/73/)

在 Chrome 中，它会根据需要弹跳一次，但在 FF 和 IE 中，只要鼠标保持在原位，弹跳就会继续。

我也尝试过`$('#box').one("mouseenter", function() {`，但盒子会弹跳一次，随后进入 div 的条目不会触发效果。

关于为什么浏览器表现不同以及我能做些什么的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T19:27:05.557

`**[LIVE DEMO](http://jsbin.com/iveval/1/edit)**`

```
$("#box").hover(function(){
if ( !$(this).data("bouncing") ){
      $(this).effect("bounce", { direction: 'up', distance: 10, times: 1 })
             .data("bouncing", true);
}
},function () {
     $(this).data("bouncing", false);
}); 
```

一旦它反弹，元素数据属性将保存`true`布尔值，
在`if`语句中我们只检查它的`true`or `false`。
在鼠标离开时，我们只是将其设置为 false，以允许新的悬停和...新的反弹！:)

**你也可以像上面这样写：**

```
$("#box").on('mouseenter mouseleave',function( e ) {
  var el = $(this);
  if(!el.data("b"))el.effect("bounce", {direction:'up',distance:10,times:1} );
  el.data("b",e.type=="mouseenter"?true:false);
}); 
```

# google-app-engine - 有人可以概述将 maven GWT 项目转换为 GAE+JDO 项目所需的确切步骤吗

> ID：11145011
> 
> 赞同：0
> 
> 时间：2012-06-21T19:04:07.450
> 
> 标签：google-app-engine, gwt, maven, jdo

我发现使用带有 -maven 开关的 webApp 会生成一个符合 maven 的项目。现在，一旦我有了这个项目，我必须执行以下步骤。

1）添加gae依赖 2）添加jdo依赖 3）添加app-engine配置文件 4）添加jdo配置文件

还有别的吗，我使用的是应用引擎 1.6.6 和 gwt 2.4。请概述我的确切步骤和依赖项。我在其他堆栈溢出问题中找到的有关 gae-maven 插件的链接似乎很旧并且效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:52:05.200

对于它的价值，这是我刚刚放在一起的一个 pom，它似乎可以正常工作 wuth gae 1.7.4 和 GWT 2.5 与 JDO 3.0 -

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.nimbits.cloudplatform</groupId>
  <artifactId>nimbitsplatform</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>war</packaging>

  <name>nimbits-02</name>

  <dependencies>
      <dependency>
          <groupId>javax.jdo</groupId>
          <artifactId>jdo-api</artifactId>
          <version>3.0</version>
      </dependency>
    <!-- Google App Engine meta-package -->
    <!--<dependency>-->
      <!--<groupId>net.kindleit</groupId>-->
      <!--<artifactId>gae-runtime</artifactId>-->
      <!--<version>${gae.version}</version>-->
      <!--<type>pom</type>-->
    <!--</dependency>-->

    <dependency>
      <groupId>javax.transaction</groupId>
      <artifactId>jta</artifactId>
      <version>1.1</version>
    </dependency>

    <!-- GWT dependencies -->
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-servlet</artifactId>
      <version>${gwt.version}</version>
    </dependency>

    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-user</artifactId>
      <version>${gwt.version}</version>
      <scope>provided</scope>
    </dependency>

      <!-- J2EE Servlet API. We need it to compile IndexServlet class. You can probably remove
        it, if you don't explicitly use Servlets -->
    <dependency>
      <groupId>org.apache.geronimo.specs</groupId>
      <artifactId>geronimo-servlet_2.5_spec</artifactId>
      <version>1.2</version>
      <scope>provided</scope>
    </dependency>

    <!-- Make use of JSP tags. Remove, if you don't use JSPs -->
    <dependency>
      <artifactId>standard</artifactId>
      <groupId>taglibs</groupId>
      <version>1.1.2</version>
      <type>jar</type>
      <scope>runtime</scope>
    </dependency>

    <!-- These dependencies are here just for enabling logging -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.6.1</version>
    </dependency>

    <dependency>
      <groupId>ch.qos.logback</groupId>
      <artifactId>logback-classic</artifactId>
      <version>0.9.24</version>
    </dependency>

    <!-- Test scope -->
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.5</version>
      <scope>test</scope>
    </dependency>

    <!-- GAE libraries for local testing as described here: http://code.google.com/appengine/docs/java/howto/unittesting.html -->
    <dependency>
      <groupId>com.google.appengine</groupId>
      <artifactId>appengine-api-labs</artifactId>
      <version>${gae.version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>com.google.appengine</groupId>
      <artifactId>appengine-api-stubs</artifactId>
      <version>${gae.version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>com.google.appengine</groupId>
      <artifactId>appengine-testing</artifactId>
      <version>${gae.version}</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <!-- This plug-in "enhances" your domain model objects (i.e. makes them persistent for
        datanucleus) -->
      <plugin>
        <groupId>org.datanucleus</groupId>
        <artifactId>maven-datanucleus-plugin</artifactId>
        <version>1.1.4</version>
        <configuration>
          <!-- Make sure this path contains your persistent classes! -->
          <mappingIncludes>**/model/*.class</mappingIncludes>
          <verbose>true</verbose>
          <enhancerName>ASM</enhancerName>
          <api>JDO</api>
        </configuration>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>enhance</goal>
            </goals>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-core</artifactId>
            <version>1.1.5</version>
            <exclusions>
              <exclusion>
                <groupId>javax.transaction</groupId>
                <artifactId>transaction-api</artifactId>
              </exclusion>
            </exclusions>
          </dependency>
          <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-rdbms</artifactId>
            <version>1.1.5</version>
          </dependency>
          <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-enhancer</artifactId>
            <version>1.1.4</version>
          </dependency>
        </dependencies>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1-beta-1</version>
        <configuration>
          <webResources>
            <resource>
              <directory>src/main/webapp</directory>
              <filtering>true</filtering>
              <includes>
                <include>**/appengine-web.xml</include>
              </includes>
            </resource>
          </webResources>
        </configuration>
      </plugin>

      <!-- Maven GWT plugin (ex. http://gwt-maven.googlecode.com/svn/docs/maven-googlewebtoolkit2-plugin/index.html)
        http://mojo.codehaus.org/gwt-maven-plugin -->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>1.2</version>
        <configuration>
          <logLevel>INFO</logLevel>

          <!-- match -Dgae.port -->
          <port>${gae.port}</port>

           <!--&lt;!&ndash;This must point to your GWT modules!&ndash;&gt;-->
          <!--<compileTargets>-->
            <!--<value>net.kindleit.gae.example.Messages</value>-->
          <!--</compileTargets>-->

          <!-- This is for generating Asynch interfaces -->
          <!-- <servicePattern>**/client/*Service.java</servicePattern> -->

          <extraJvmArgs>-Xmx512m</extraJvmArgs>
          <!--<jvm>${JAVA_HOME}/bin/java</jvm> -->
          <!--<noServer>false</noServer> -->

          <!-- TODO This should help running GAE stuff in hosted mode (when gwt-maven-plugin-1.2
            is released, see http://jira.codehaus.org/browse/MGWT-112) -->
          <server>com.google.appengine.tools.development.gwt.AppEngineLauncher
                    </server>

          <runTarget>/index.html</runTarget>
          <style>DETAILED</style>
          <webXml>war/WEB-INF/web.xml</webXml>
          <!-- this parameter is VERY important with automatic mode - has to match the version
            in your declared deps -->
          <!-- if this is set incorrect (not a match), or left out (default is 1.5.2 for 2.0-beta23)
            you will have mysterious errors -->
          <gwtVersion>${gwt.version}</gwtVersion>
        </configuration>
        <executions>
          <!-- <execution> <id>generateAsynch</id> <phase>generate-sources</phase> <goals>
            <goal>generateAsync</goal> </goals> </execution> -->
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <!-- The actual maven-gae-plugin. Type "mvn gae:run" to run project, "mvn gae:deploy"
        to upload to GAE. -->
      <plugin>
        <groupId>net.kindleit</groupId>
        <artifactId>maven-gae-plugin</artifactId>
        <version>0.9.4</version>
      </plugin>

      <!-- Upload application to the appspot automatically, during release:perform -->
      <plugin>
        <artifactId>maven-release-plugin</artifactId>
        <configuration>
          <goals>gae:deploy</goals>
        </configuration>
      </plugin>

      <!-- Java compiler version -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>

      <pluginManagement>
          <plugins>
              <!-- Copy dependencies to war/WEB-INF/lib for GAE proj compliance. -->
              <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-dependency-plugin</artifactId>
                  <executions>
                      <execution>
                          <id>default-cli</id>
                          <goals>
                              <goal>copy-dependencies</goal>
                          </goals>
                          <configuration>
                              <outputDirectory>${basedir}/webapp/WEB-INF/lib/</outputDirectory>
                              <overWriteReleases>false</overWriteReleases>
                              <overWriteSnapshots>false</overWriteSnapshots>
                              <overWriteIfNewer>true</overWriteIfNewer>
                              <excludeArtifactIds>gwt-user,gwt-dev</excludeArtifactIds>
                              <includeScope>runtime</includeScope>
                          </configuration>
                      </execution>
                  </executions>
              </plugin>
          </plugins>
      </pluginManagement>
  </build>

  <!-- Specify hard-coded project properties here -->
  <properties>

    <!-- Sets the project's default encoding.
         http://docs.codehaus.org/display/MAVENUSER/POM+Element+for+Source+File+Encoding -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

    <!-- This is just for "eclipse:eclipse" goal to always attempt downloading sources -->
    <downloadSources>true</downloadSources>

    <!-- Specify AppEngine version for your project. It should match SDK version pointed to
      by ${gae.home} property (Typically, one used by your Eclipse plug-in) -->
    <gae.version>1.7.2</gae.version>
      <gae.home>/mnt/devel/lib/appengine-java-sdk-1.7.4</gae.home>
    <!-- GWT version -->
    <gwt.version>1.6.3</gwt.version>
      <appengine.target.version>1.7.4</appengine.target.version>
    <!-- Upload to http://test.latest.<applicationName>.appspot.com by default -->
    <gae.application.version>test</gae.application.version>

    <!-- port defaults to 8080 -->
    <gae.port>8082</gae.port>

    <!-- Produce detailed JS during GWT compilation for development environment -->
    <gwt.style>DETAILED</gwt.style>
  </properties>

  <profiles>

    <!-- We can configure our integration server to activate this profile and perform gae:deploy,
      thus uploading latest snapshot to the http://1.latest.<applicationName>.appspot.com automatically -->
    <profile>
      <id>integration-build</id>
      <properties>
        <gae.application.version>stage</gae.application.version>

        <!-- Produce pretty JS during GWT compilation for test environment -->
        <gwt.style>PRETTY</gwt.style>
      </properties>
    </profile>

    <!-- This profile will activate automatically during release and upload application to
      the http://2.latest.<applicationName>.appspot.com (We might want to set the 2nd version as
      our applications Default version to be accessible at http://<applicationName>.appspot.com) -->
    <profile>
      <id>release-build</id>
      <activation>
        <property>
          <name>performRelease</name>
          <value>true</value>
        </property>
      </activation>

      <properties>
        <!-- During release, set application version in appengine-web.xml to 2 -->
        <gae.application.version>release</gae.application.version>

        <!-- Produce compressed JS during GWT compilation for production environment -->
        <gwt.style>OBFUSCATED</gwt.style>
      </properties>
    </profile>
  </profiles>

</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:17:09.523

这是我的 pom.xml：我使用 GAE、GWT 和 JDO。希望能帮助到你：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- The Basics -->
    <groupId>YOUR COMPANY</groupId>
    <artifactId>YOUR ARTIFACT</artifactId>
    <version>VERSION</version>
    <packaging>pom</packaging>
    <dependencies>
        <!-- GWT dependencies -->
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwt.version}</version>
        </dependency>

        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
            <scope>provided</scope>
        </dependency>
        <!-- GAE libraries for local testing as described here: http://code.google.com/appengine/docs/java/howto/unittesting.html -->
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-labs</artifactId>
            <version>${gae.version}</version>
        </dependency>

        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-stubs</artifactId>
            <version>${gae.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-testing</artifactId>
            <version>${gae.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- Google App Engine meta-package -->
        <dependency>
            <groupId>net.kindleit</groupId>
            <artifactId>gae-runtime</artifactId>
            <version>${gae.version}</version>
            <type>pom</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.jdo</groupId>
            <artifactId>jdo2-api</artifactId>
            <version>2.3-eb</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-1.0-sdk</artifactId>
            <version>${gae.version}</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-servlet_2.5_spec</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-parent</artifactId>
            <version>1.6.1</version>
            <type>pom</type>
        </dependency>

    </dependencies>

    <!-- Specify hard-coded project properties here -->
    <properties>
        <!-- GWT version -->
        <gwt.version>2.4.0</gwt.version>

        <!-- port defaults to 8080 -->
        <gae.port>8080</gae.port>

        <!-- Produce detailed JS during GWT compilation for development environment -->
        <gwt.style>DETAILED</gwt.style>

        <!-- Sets the project's default encoding. http://docs.codehaus.org/display/MAVENUSER/POM+Element+for+Source+File+Encoding -->
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

        <!-- This is just for "eclipse:eclipse" goal to always attempt downloading 
            sources -->
        <downloadSources>true</downloadSources>

        <!-- Specify AppEngine version for your project. It should match SDK version 
            pointed to by ${gae.home} property (Typically, one used by your Eclipse plug-in) -->
        <gae.version>1.6.6</gae.version>

        <!-- Upload to http://test.latest.<applicationName>.appspot.com by default --> 
        <datanucleus.version>1.1.5</datanucleus.version>

        <gae.plugin.version>0.9.2</gae.plugin.version>
    </properties> 
```

# c++ - 另一个文件 c++ 中的模板特化。哪个版本得到

> ID：11145015
> 
> 赞同：7
> 
> 时间：2012-06-21T19:04:17.173
> 
> 标签：c++, templates, g++, template-specialization, icc

我有这些文件：-

1.h :-

```
#include <iostream>

using namespace std;

template <typename A>
void f() {
  cout<<"generic\n";
} 
```

1.cpp：-

```
#include "1.h"

template <>
void f<int> () {
  cout<<"for ints only\n";
} 
```

main.cpp :-

```
#include "1.h"

int main() {
  f<int>();
  return 0;
} 
```

现在，我像这样用 g++ 编译和运行它们：-

```
g++ -c 1.cpp -o 1.o 
g++ main.cpp 1.o
./a.out 
```

我得到：-

```
for ints only 
```

另一方面，我像这样用 icpc 编译它：-

```
icpc -c 1.cpp -o 1.o
icpc main.cpp 1.o
./a.out 
```

我得到：-

```
generic 
```

C++ 标准对此有何评论？是任何一个编译器“正确”而另一个“错误”还是标准在这个问题上模棱两可并且两者都是“正确的”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T19:14:53.893

您的程序表现出未定义的行为。根据 C++11 §14.7.3/6，必须在使用它的每个翻译单元中声明特化：

> 如果模板、成员模板或类模板的成员是显式特化的，则该特化应在第一次使用该特化之前声明，该特化将导致发生隐式实例化，在发生此类使用的每个翻译单元中; 不需要诊断。

# filter - weka下的StringToWordVector过滤器

> ID：11145016
> 
> 赞同：0
> 
> 时间：2012-06-21T19:04:23.960
> 
> 标签：filter, weka, document-classification

我的数据通过 StringToWordVector 过滤器传递。StringToWordVector 可以输出二进制存在/不存在指示符、词频或 TF-IDF 分数。weka下这个过滤器的默认输出是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:19:26.910

根据本[文档](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/StringToWordVector.html)中指定的选项，

```
-C
Output word counts rather than boolean word presence. 
```

默认输出是布尔单词存在，并且可以通过传递参数来更改，例如`-C`.

# string - 如何在R中解析棒球盒得分

> ID：11145019
> 
> 赞同：2
> 
> 时间：2012-06-21T19:04:42.900
> 
> 标签：string, r

我正在使用来自 retrosheet.org 的棒球数据进行研究项目。我想为每局中每支球队的得分创建变量（Vis1、Home1、Vis2、Home2 等）。问题是盒子得分的变量编码很奇怪。每支球队在整场比赛中都有自己的变量，每一局都有一个值。因为前导零被截断，所以“12(10)1X”的值意味着一支球队在前 4 局没有得分，在第五局得分一次，在第六局得分两次，在第七局得分 10 次，在第二局得分一次。第八名，他们不必参加第九名，因为那时他们已经赢了。

有什么建议吗？我不知所措。() 最让我困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:16:40.773

在 userR 的这个演讲中有一个例子！2012 可能会提供更多特定于您的棒球项目的信息。你可以在[这里找到它。](http://www.slideshare.net/rtelmore/user-2012-talk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:30:51.970

我是爱尔兰人，住在威尔士，对棒球一无所知，但是，我想我记得听说最多只能有 9 局？？？？（老实说……没有头绪！！！）

```
bbscore = function(x)
{
 scores = c()
 score = unlist(strsplit(x,split=""))
 i= 1
 while(i<length(score)+1)
 {
   if(score[i]=="(")
   {
     scores = c(scores,paste(score[i+1],score[i+2],sep=""))
     i = i+4
   }
   scores = c(scores,score[i])
   i = i+1
 }
 return(scores)
}
> x
[1] "12(10)1X"
> bbscore(x)
[1] "0"  "0"  "0"  "0"  "1"  "2"  "10" "1"  "X" 

> scores.df = read.csv("GL1995.TXT",header=F)
> head(scores.df$V20)
[1] 200030300 000000000 000300020 000000010 100100010 001002300
1355 Levels: (11)00033102 00000000 000000000 0000000000 ... 710001001
> scores.df$V20 = as.character(scores.df$V20)
> V20.1995.scores = lapply(scores.df$V21, bbscore)
> V20.1995.scores = lapply(scores.df$V20, bbscore)
> V20.1995.scores[[1]]
[1] "2" "0" "0" "0" "3" "0" "3" "0" "0"
> V20.1995.scores[[2]]
[1] "0" "0" "0" "0" "0" "0" "0" "0" "0"
> V20.1995.scores[[3]]
[1] "0" "0" "0" "3" "0" "0" "0" "2" "0" 
```

当然，您必须做一些进一步的操作才能将它们变成数字并处理 X，如果还有任何其他意想不到的角色，除了受制于 9 局的假设之外，这也会中断。

**编辑：** 我删除了 9 局的规定，并展示了如何对整个专栏执行此操作（假设您所说的分数确实是 csv 文件中的第 20 个变量）。不同的局数需要额外的处理。`do.call(rbind,...)`不会工作。找到最长的游戏并将`"X"`'s 附加到末尾以使它们都具有相同的长度？也许？我不确定，但我认为至少已经回答了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-10T17:49:16.570

迟到的答案，但是...

有一个新的 R 包用于从[MLB 服务器](http://gd2.mlb.com/components/game/mlb/)获取数据，包括得分等。也许值得一瞧！

*   [开战](https://github.com/beanumber/openWAR)

# jquery - Jquery获取选择选项ID

> ID：11145022
> 
> 赞同：1
> 
> 时间：2012-06-21T19:04:57.930
> 
> 标签：jquery

我有这个选择

```
<select name="clients[]" size="20" multiple="multiple" id="clients" style="min-width:275px;">
<option id="first">First</option>
<option id="second">Second</option>
<option id="third">Third</option> 
</select> 
```

我试图让这个警报框在 id = first 时出现，我试过了

```
$(document).ready(function(){
    if($('#clients option:selected').val() == 'first'){
        alert('hi');
    }
}); 
```

但什么都没有出现......我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:07:14.017

值是`First`，不是`first`。由于您没有提供`value`属性，因此将`option`元素的内容作为值。

请注意，您使用的是多选字段。在这种情况下，浏览器不会选择页面^(*****)上的元素，因此只有`first`在选择发生变化时进行测试才有意义。

您必须检查是否`First`是所选元素之一：

```
$('#clients').change(function(){
      if($(this).children('option:selected').filter('#first').length) {
          alert('hi');
      }
}); 
```

[**演示**](http://jsfiddle.net/fkling/ET2wJ/)

另一种选择是正确设置`value`属性而不是 ID，并查看值是否在 values 数组中：

HTML：

```
<option value="first">First</option>
<option value="second">Second</option>
<option value="third">Third</option> 
```

JS：

```
$('#clients').change(function(){
      if($.inArray("first", $(this).val()) != -1) {
          alert('hi');
      }
}); 
```

[**演示**](http://jsfiddle.net/fkling/ET2wJ/1/)

* * *

^(*****)：如果您可能`selected`事先在某些元素上设置了属性并希望在页面加载时运行测试，您可以通过调用`.change()`select 元素简单地触发 change 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:10:48.390

您已经在 html 中设置了选项 id 而不是值。另外，在 jQuery 中要查找选定的值，您只需要查找 select 元素的值。

改为这样做：

```
<option value="first">First</option>
<option value="second">Second</option>
<option value="third">Third</option> 

$(document).ready(function(){
    if($('#clients').val() == 'first'){
        alert('hi');
    }
}); 
```

如果您希望它实时显示弹出窗口，请执行以下操作：

```
$(document).ready(function(){
  $('#clients').change(function(){
    if($(this).val() == 'first'){
      alert('hi');
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:07:35.720

`First`如果选择在文档准备就绪时选择，并且当用户更改选择时，此代码会触发警报

```
$(function(){
   checkSelection();

   $('#clients').change(function(){
      checkSelection();
   })

   function checkSelection(){
       var selectedOptions = $('#clients').val();

       if($.inArray('First',selectedOptions) != -1){
           alert('hi'); 
       }
   }  
}) 
```

# c# - 全局缓存对象不断添加项目

> ID：11145024
> 
> 赞同：2
> 
> 时间：2012-06-21T19:04:59.860
> 
> 标签：c#, asp.net, iis, caching, httpruntime.cache

我注意到在我的 ASP.NET Web 应用程序中，内部全局缓存对象不断添加以下项目：System.Web.Script.Services.WebServiceData:/mypages/default.aspx。请注意，我确实有一个包含 default.aspx 的文件夹“mypages”。为什么这个页面在我访问它的那一刻就被添加到 ASP.NET 缓存中？在详细调试时，我注意到缓存中添加了更多页面。为什么 ASP.NET 在缓存中添加我的应用页面链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:29:06.607

这可能是因为在您的网站上启用了 OutputCaching。ASP.NET 缓存页面以获得更快的性能。

# r - 跨数据帧的随机泊松数总和

> ID：11145025
> 
> 赞同：0
> 
> 时间：2012-06-21T19:05:01.420
> 
> 标签：r

在我正在编程的模拟中，在每次迭代中，我需要为数据帧中的每一行计算一些随机泊松数的总和，其中参数存储在该行的另一列中。

这是数据示例（在下面的代码中称为“研究”）：

```
 phase Sites enroll_rate rec_months stud_months enrolled m_enroll
51     2     1  2.95920139  2.0000000    5.000000        6        0
52     2    24  0.20784867  2.0000000    5.000000       10        0
53     2     3  0.46501736  3.0000000    6.000000        2        0
54     2     2  1.40480769  3.0000000    6.000000        7        0
55     2     1  1.31299020  5.0000000    7.000000        3        0
64     2    29  0.04373204  0.9712526    1.971253        2        0 
```

这是我用来实现此目的的代码：

```
for (j in 1:nrow(studies)) { 
    studies$m_enroll[j] <- sum(rpois(studies$Sites[j],studies$enroll_rate[j]))
    } 
```

这可以完成工作，但考虑到数据框有数百行并且我正在做这个模拟数万次，它的效率非常低。

我觉得有一种方法可以使用其中一个 apply 函数来做到这一点，但我对它们的经验是有限的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:38:56.633

```
studies <- studies[rep(1:6,3000),]
system.time(for (j in 1:nrow(studies)){studies$m_enroll[j] <-     
                sum(rpois(studies$Sites[j],studies$enroll_rate[j]))})
   user  system elapsed 
 105.74    0.00  106.30 
system.time(test <- sapply(1:nrow(studies),function(x) 
                    sum(rpois(studies$Sites[x],studies$enroll_rate[x]))))
   user  system elapsed 
   0.36    0.00    0.36 
```

# wordpress - 找到解决 wordpress 站点地图插件限制的方法

> ID：11145026
> 
> 赞同：0
> 
> 时间：2012-06-21T19:05:08.597
> 
> 标签：wordpress, sitemap

我在一月份使用 wordpress创建了一个[博客。](http://www.kopodium.com)

不过，我为我的一个页面使用了自定义模板来显示自定义动态页面。（[此处](http://www.kopodium.com/results/nation/taekwondo/1_60/france)示例）

现在，我使用 wordpress 插件 XML-Sitemap 来自动生成**站点地图**。不出所料，这个插件不使用自定义模板抓取页面，以及其中的许多链接。

但是，我认为主要搜索引擎的爬虫会这样做。但他们没有。我的自定义页面仍未在任何地方编入索引。

所以这是我的问题：

*   我找到了一个可以全面爬取我的网站并生成站点地图的工具。如果我使用它，我是否必须停用我的 wordpress 插件？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:13:19.533

首先，我在 Word Press 方面没有经验，但我对您的问题提出了两个想法，所以，如果它们有用，这里是：

1）我认为插件不会抓取模板。相反，我认为该插件从保存在 wordpress 配置中的站点地图开始生成站点地图（例如，在 drupal 中，站点地图和 url 别名保存在数据库中，站点地图插件从那里开始）

2）如果你的插件生成了一个站点地图文件（我认为它会生成！），那么你必须先禁用它，然后再使用其他工具

希望能帮助到你！

# php - php在数组中添加重复值

> ID：11145031
> 
> 赞同：0
> 
> 时间：2012-06-21T19:05:26.253
> 
> 标签：php, arrays

我有一个包含多个值的数组，我想要的只是找到重复的项目并添加它们在数组中的次数。这是一个例子

```
$someVar = array('John','Nina','Andy','John','Aaron','John','Zack','Kate','Nina'); 
```

我希望我的最终结果看起来像

```
John = 3;
Nina = 2; 
```

等等。

编辑 | 这些值是动态的，我不知道这些名称会是什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:06:48.253

使用[`array_count_values()`](http://php.net/array_count_values)和[`array_filter()`](http://php.net/array_filter)来实现这一点。

```
$result = array_filter( array_count_values( $someVar), function( $el) {
    return $el > 1; 
}); 
```

`$result`将是一个关联数组，其中包含作为键的名称和作为值出现的次数，但前提是它们在`$someVar`数组中重复。

这是一个显示正确输出[的演示。](http://codepad.viper-7.com/6ckVzX)

# javascript - 试图阻止我的弹出窗口（需要替代“window.open”）

> ID：11145032
> 
> 赞同：3
> 
> 时间：2012-06-21T19:05:27.500
> 
> 标签：javascript, jquery, button, popup

我正在使用 facebook SDK，由于安全问题，它现在可以通过弹出窗口工作。

所以我有一个处理隐藏的 facebook [FacebookButton] 的按钮，以及一个用于测试弹出窗口阻止程序 [PopupTester] 的按钮。

我的代码是这样的，

单击 [PopupTester] 时，如果弹出窗口有效：关闭它，隐藏此按钮，然后显示 [FacebookButton]。

或者

单击[PopupTester]时，如果弹出失败，显示对话框以敦促更改弹出设置，保持[FacebookButton]隐藏，将此按钮值更改为[再试一次]。

```
function testPopupBlocker() {
  var windowName = 'userConsole'; 
  var popUp = window.open('http://www.whirlocal.com', windowName, 'width=200, height=200, left=24, top=24, scrollbars, resizable');
  if (popUp == null || typeof(popUp)=='undefined') {
    var weGood = "nope";
    alert('Please disable your pop-up blocker and click the link to test again.'); 
  } 
  else {
    var weGood = "yup";
    popUp.close();
  } 
```

}

这很好用，除了这个按钮总是会创建一个弹出窗口，但 Facebook 仍然被阻止！

除了“window.open”还有另一种方法来创建弹出窗口吗？一个更有可能被阻止？

编辑：

这是我的按钮代码

```
<input type="button" class="genButton testPopupButton" name="Test Popup Blocker" title="Test Popup Blocker" value="Test Popup Blocker" onclick="testPopupBlocker()" style="cursor:pointer;" />

<input type="button" class="genButton needsPopups facebookButton" name="AdvocateOnFacebook" title="Recommend <?php echo genesis_get_option('organization','child-settings');?> on Facebook" value="Recommend us on Facebook!" onclick="advocateToFriends()" style="cursor:pointer; display:none;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:06:13.563

您需要使弹出窗口合法化。它需要由用户启动，而不是任意弹出代码，否则弹出窗口阻止程序会阻止它。一旦您掌握了弹出窗口的句柄，您就可以随意修改它。

试试这个 html 代码：

```
<a href="#" onclick="javascript:window.open('http://myurl.com/blank_page.html','userConsole','width=800,height=600,directories=no,location=no,menubar=no,status=no,toolbar=no,scrollbars=auto,resizeable=yes');">
    <div class="some_div_class"><b>Click Me</b></div>
</a> 
```

然后运行你的 testPopupBlocker() 函数，看看它是否工作得更好一些。

# javascript - 选择自动完成建议后如何停止页面重新加载

> ID：11145033
> 
> 赞同：1
> 
> 时间：2012-06-21T19:05:32.790
> 
> 标签：javascript, jquery, ajax, autocomplete, pylons

我为表单输入字段创建了一个自动完成功能，允许用户将标签添加到它们的列表中。如果用户选择任何建议，我希望页面使用将新标签添加到已经存在的标签部分，而无需重新加载页面。

我希望这发生在 3 种情况下：

1.  用户输入标签，忽略自动完成建议并按下回车键。
2.  在输入查询的任何部分后，用户使用箭头键选择自动完成建议之一并按下回车键。
3.  在输入查询的任何部分后，用户用鼠标单击自动完成建议之一。

我已经能够使方案 1 完美地工作。但是，场景 1 和 2 使页面重新加载，并且仍然没有将标签添加到列表中。

场景 1 和 2 都由同一个函数调用：

```
$j("#addTag").autocomplete({
  serviceUrl:'/ac',
  onSelect: function(val, data){
    addTag(data);
  }
}); 
```

这是 addTag() 的代码：

```
function addTag(tag){
  var url = '/addTag/' + tag;

  //Call the server to add the tag/
  $j.ajax({
    async: true,
    type: 'GET',
    url: url,
    success:function(data){
      //Add the tag to the displayed list of already added tags
      reloadTagBox(data);
    }, 
    dataType: "json"
  });

  //Hide the messages that have been displayed to the user
  hideMessageBox();
} 
```

场景一代码：

```
function addTagByLookup(e, tag){
  if(e && e.keyCode == 13)
  {
    /*This stops the page from reloading (when the page thinks 
      the form is submitted I assume).
    */
    e.preventDefault();
    //If a message is currently being displayed to the user, hide it
    if ($j("#messageBox").is(":visible") && $j("#okayButton").is(":visible")){
      hideMessageBox();
    }

    else{  
      //Give a message to the user that their tag is being loaded
      showMessageBox("Adding the tag <strong>"+tag+"</strong> to your station...",'load');

      //Check if the tag is valid
      setTimeout(function(){
        var url = '/checkTag/' + tag;
        var isTagValid = checkTag(tag);

        //If the tag is not vaid, tell the user.
        if (isTagValid == false){
          var message = "<strong>"+tag+"</strong>"+
                      " was not recognized as a valid tag or artist. Try something   else.";
          //Prompt the user for a different tag
          showMessageBox(message, 'okay');
        }

        //If the tag is valid
        else{
          addTag(tag);
        }
      }, 1000);
    }
  }
} 
```

我知道我在场景 1 中将 e.preventDefault 功能用于普通表单提交，但我似乎无法使其适用于其他场景，我什至不确定这是真正的问题。

我使用 pylons 作为 MVC 并使用[本教程](http://niallohiggins.com/2009/12/21/autocomplete-with-python-pylons-sqlalchemy-and-jquery/)进行自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:08:46.490

所以如果有人想知道，我的问题是有一个简单的解决方案，我一开始就不应该有。

我的输入标签嵌入在每次激活输入标签时提交的表单中。

通过防止用户按下回车时发生默认事件，我在方案 1 中停止了这个问题。但由于我无法在 jQuery 事件 .autocomplete() 中访问此事件，因此无法阻止它。

# java - 大约给定大小的安全随机数

> ID：11145034
> 
> 赞同：3
> 
> 时间：2012-06-21T19:05:33.740
> 
> 标签：java, random, cryptography, biginteger

我正在做一个加密 aa 消息的秘密共享算法。为此，我需要一个大于消息的素数和一些与消息大小大致相同的随机数。

我可以用 BigInteger.probablePrime(MsgSize+8) 做第一个，但我不知道后面怎么做。

我使用的是 Random 和后来的 SecureRandom 但它们不会生成给定长度的数字。我的解决方案是对 BigInteger 执行 randomInt ^ randomInt 但显然是一个糟糕的解决方案。

一些想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:38:12.743

您正在实施的是[Shamir 的秘密分享吗？](http://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing)如果是这样，请注意您实际上并不需要比整个消息更大的素数 - 将消息分成一些可管理大小的块并使用固定的素数单独共享每个块是非常好的。

此外，Shamir 的秘密共享不需要素数大小的字段；可以使用任何[有限域](http://en.wikipedia.org/wiki/Finite_field)GF(p ^n )，尤其包括二进制域 GF(2 ^n )。这样的字段对于计算机实现特别方便，因为秘密和共享块都将是简单的 n 位比特串。

唯一的复杂性是，在非质数域中，您必须实现[有限域算术](http://en.wikipedia.org/wiki/Finite_field_arithmetic)（或找到现有的实现），并且您需要选择一个特定的约简多项式并同意它。然而，前者并不像看起来那么复杂，而后者并不比选择和同意素数更难。（特别是，GF(2 ^n ) 的约简多项式可以自然地表示为 n 位位串，丢弃始终为 1 的高位。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:11:22.923

您是否尝试过使用较小尺寸的相同 probablePrime 方法，然后使用较大的随机整数作为该数字的偏移量？这可能会奏效，只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:21:26.503

我有同样的问题（这就是我找到这篇文章的原因）。有点晚了，但也许其他人发现这种方法很有用：

```
public static BigDecimal getBigRandom(int d)
{
    BigDecimal rnd = new BigDecimal(Math.random());

    BigDecimal rndtmp;

    for(int i=0;i<=d;i++)
    {
        rndtmp = new BigDecimal(Math.random());
        rndtmp = rndtmp.movePointLeft(rnd.precision());
        rnd = rnd.add(rndtmp);
    }    

    return rnd;
} 
```

用法：BigDecimal x = getBigRandom(y);

每个 y 会给你大约 50 位数。

如果您需要超过 (2^31-1)*50 个数字，只需将 int 更改为 long ;-)

不知道好不好，但对我有用

# sql-server - 主键检测

> ID：11145035
> 
> 赞同：0
> 
> 时间：2012-06-21T19:05:36.357
> 
> 标签：sql-server, oracle, sql-server-2008

我已将数据导入数据库。

患者（pt_id、pt_name、pt_type、pt_loc）

现在，我想找出其中哪些是主要（具有唯一性）值。

我能找到的任何方法都是

```
 select count(pt_id) from patient
     select count(distinct pt_id) from patient 
```

将返回相同的值

任何输入都会很棒:)

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:24:06.260

确定列是否仅包含唯一值的单遍方法是：

```
SELECT pt_id, COUNT(pt_id) from patient
GROUP BY pt_id
HAVING COUNT(pt_id) > 1 
```

如果你得到结果，它不是唯一的。您可能还想检查空值：

```
SELECT * from patient
WHERE pt_id is NULL 
```

# c# - 使用 CacheManager（或会话/视图状态）时保持键唯一

> ID：11145036
> 
> 赞同：0
> 
> 时间：2012-06-21T19:05:38.997
> 
> 标签：c#, asp.net, caching

使用 Microsoft CacheManager 时是否有防止键冲突的好方法？是什么阻止某人编写另一个使用与我相同的密钥的类，却没有意识到它已经被使用过？每个网页是否需要使用单独的缓存管理器？

这样就很难分享了。我想知道关于使用会话的同样的事情。似乎没有很好的方法来管理密钥并保持它们的唯一性。

我见过其他使用命名空间概念的缓存解决方案。如果我可以使用网页名称作为命名空间来保持事物的唯一性，然后为我想要共享的事物使用一些全局命名空间，这将是有意义的。就像我提到的那样，这可能同样适用于会话。

即使是企业图书馆文档中的这个示例也会让您认为没有很好的方法可以为给定的员工 ID 存储不止一种类型的对象。

```
cache.Add(employeeId.ToString(), photoData, 
   CacheItemPriority.High, null, 
   new ICacheItemExpiration[] { expiry }); 
```

您几乎需要存储一个包含您需要的一切的主对象，而我不想这样做。或者你最终得到一堆嵌套字典。关于如何最好地解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:10:49.083

我见过几个选项，具体取决于您的用例：

*   您可以将密钥存储在`Resources`或`Settings`
*   你可以使用`GUID`调用者生成的 s

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:09:53.437

只需组成一个命名方案，例如：“Path/To/File.Component.Object.Object2.Property”

那应该是独一无二的。然后为自己构建一些实用方法，这样您就不必手动复制粘贴字符串。

# jquery - 'caroufredsel' jquery carousel 的响应性问题

> ID：11145041
> 
> 赞同：1
> 
> 时间：2012-06-21T19:05:58.847
> 
> 标签：jquery, responsive-design, jcarousel, caroufredsel

我使用出色的[caroufredsel](http://caroufredsel.frebsite.nl/)构建了一个响应式轮播，并且项目应始终一次滚动一个并具有流畅的动画。

目前，在页面加载（或刷新）时，项目正在正确滚动（一次一个），但在重新调整浏览器窗口大小后，按下一步开始跳过 2 个或更多项目。如果您然后刷新它会修复问题，直到下一次更改屏幕宽度。

此外，动画仅在屏幕处于其可能的最小宽度（一次可见 1 个项目）时才起作用，并且在同时可见 2 个或更多项目时它永远不会起作用。

网站可以在[这里](http://www.wirebirdguitars.com/staging/guitars.html)看到。

目前，以下代码正在触发插件（我确信当它被破坏并在屏幕重新调整大小后重新恢复时，有一些挥之不去的注入 css 或等效的东西将它全部扔掉，只是无法将其固定下来。 ..）：

```
<script type="text/javascript">

$(document).ready(function() {

$("#guitars-gallery").carouFredSel({
auto: false,
circular: false,
prev: '#prev',
next: '#next',
responsive : true,
height : 'auto',
scroll: 1,
items : { width : 370, visible : { min : 1, max : 3 } } }); 

});

function doSomething() {

$('#guitars-gallery').trigger('destroy', true);
$('#guitars-gallery').css({'text-align': '','float': '','position': '','top': '','right': '','bottom': '','left': '','width': '90%','height': '','margin': '1% auto'});

$("#guitars-gallery").carouFredSel({
auto: false,
circular: false,
prev: '#prev',
next: '#next',
responsive : true,
height : 'auto',
scroll: 1,
items : { width : 370, visible : { min : 1, max : 3 } } });

};

var resizeTimer;

$(window).resize(function() {
clearTimeout(resizeTimer);
resizeTimer = setTimeout(doSomething, 100);
});
</script> 
```

对此的任何帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:11:43.317

我没有测试过这段代码，但试试这个。您对注入的 CSS 是正确的。轮播再次使用新的内联样式进行包装，但不会删除以前的包装器，从而使新包装器成为前一个包装器的“囚徒”。

```
function sliderInit() {
("#guitars-gallery").carouFredSel({
    auto: false,
    circular: false,
    prev: '#prev',
    next: '#next',
    responsive : true,
    height : 'auto',
    scroll: 1,
    items : { 
        width : 370, 
        visible : { 
            min : 1, 
            max : 3 
        } 
    } 
}); 
};

$(window).load(function() {
sliderInit();
}); 

var resizeTimer;

$(window).resize(function() {
$('.caroufredsel_wrapper').removeAttr('style');
$('#guitars-gallery').removeAttr('style');
clearTimeout(resizeTimer);
resizeTimer = setTimeout(sliderReInit, 100);
}); 
```

# java - 从网络打开 MS Word 文档

> ID：11145047
> 
> 赞同：0
> 
> 时间：2012-06-21T19:06:15.973
> 
> 标签：java, ms-word

情况就是这样。

通过单击浏览器中的链接，用户应该能够使用 MS Word 2007 打开位于网络中某处的 MS Word 文档（即 \remote\machine\documents\document_to_edit.docx）。浏览器是IE7+。

编辑文档，将其关闭并保存（没有“另存为...”，只是“保存”）在网络中的同一位置 (\remote\machine\documents\document_to_edit.docx)

这有可能吗？如果是这样，我该怎么做？

不要认为这是相对的，但我将 JAVA + Wicket 用于我的 Web 应用程序。

编辑：
欢迎任何建议。主要的是 - 打开您计算机上的文件并在编辑后保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:11:49.657

**（阅读下面的更新）**

简短的回答：不可能。

长答案：当您从浏览器打开任何内容时，即使是某些本地文件，它也会从浏览器缓存（或某个临时下载目录）打开给定文件，但不会打开链接的原始文件。因此，在您保存更改后，复制的文件将被更新。

**添加：**

好的，我想了一会儿，在内网应用程序中可能有一些方法可以做到这一点。方法如下：[Java 小程序：从浏览器运行本机代码？](https://stackoverflow.com/questions/6216024/java-applet-run-native-code-from-browser)

因此，基本上，您将提供与您的 javascript 通信的小程序（我想这种方式最容易实现）（[有关如何操作的信息](http://blog.danieldee.com/2009/07/javascript-and-applet-communication.html)）并将网络路径发送到小程序。小程序将启动 winword.exe 并传递所需的参数。

或者，ActiveX 还有另一个选项：http: [//codereflex.net/how-to-run-exe-on-webpage/](http://codereflex.net/how-to-run-exe-on-webpage/)。缺点是 - 它只适用于 IE，但这似乎是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:32:07.850

IE 可以打开 \\server\share\file.docx 类型的链接，它会打开原始文件，而不是下载的版本。不过，您可能需要先在 IE 的安全设置中将您的 http 服务器的域添加到受信任的站点。已经对此进行了测试，并且确实有效

# java - 使用 TreeViewer/ViewContentProvider 在表的两列中指定数据

> ID：11145048
> 
> 赞同：0
> 
> 时间：2012-06-21T19:06:15.923
> 
> 标签：java, eclipse, eclipse-plugin, swt, jface

我正在尝试创建一个 Eclipse 插件，该插件创建一个带有两列树表的视图。我目前正在使用 eclipse 提供的示例视图模板，但我无法弄清楚如何为要显示的不同列指定不同的数据。这是代码：

```
public class Variables extends ViewPart {

    /**
     * The ID of the view as specified by the extension.
     */
    public static final String ID = "com.amazon.funce.views.Variables";

    private TreeViewer viewer;
    private DrillDownAdapter drillDownAdapter;
    private Action action1;
    private Action action2;
    private Action doubleClickAction;

    /*
     * The content provider class is responsible for
     * providing objects to the view. It can wrap
     * existing objects in adapters or simply return
     * objects as-is. These objects may be sensitive
     * to the current input of the view, or ignore
     * it and always show the same content 
     * (like Task List, for example).
     */

    class TreeObject implements IAdaptable {
        private String name;
        private TreeParent parent;

        public TreeObject(String name) {
            this.name = name;
        }
        public String getName() {
            return name;
        }
        public void setParent(TreeParent parent) {
            this.parent = parent;
        }
        public TreeParent getParent() {
            return parent;
        }
        public String toString() {
            return getName();
        }
        public Object getAdapter(Class key) {
            return null;
        }
    }

    class TreeParent extends TreeObject {
        private ArrayList children;
        public TreeParent(String name) {
            super(name);
            children = new ArrayList();
        }
        public void addChild(TreeObject child) {
            children.add(child);
            child.setParent(this);
        }
        public void removeChild(TreeObject child) {
            children.remove(child);
            child.setParent(null);
        }
        public TreeObject [] getChildren() {
            return (TreeObject [])children.toArray(new TreeObject[children.size()]);
        }
        public boolean hasChildren() {
            return children.size()>0;
        }
    }

    class ViewContentProvider implements IStructuredContentProvider, 
                                           ITreeContentProvider {
        private TreeParent invisibleRoot;

        public void inputChanged(Viewer v, Object oldInput, Object newInput) {
        }
        public void dispose() {
        }
        public Object[] getElements(Object parent) {
            if (parent.equals(getViewSite())) {
                if (invisibleRoot==null) initialize();
                return getChildren(invisibleRoot);
            }
            return getChildren(parent);
        }
        public Object getParent(Object child) {
            if (child instanceof TreeObject) {
                return ((TreeObject)child).getParent();
            }
            return null;
        }
        public Object [] getChildren(Object parent) {
            if (parent instanceof TreeParent) {
                return ((TreeParent)parent).getChildren();
            }
            return new Object[0];
        }
        public boolean hasChildren(Object parent) {
            if (parent instanceof TreeParent)
                return ((TreeParent)parent).hasChildren();
            return false;
        }
/*
 * We will set up a dummy model to initialize tree heararchy.
 * In a real code, you will connect to a real model and
 * expose its hierarchy.
 */
        private void initialize() {
            TreeObject to1 = new TreeObject("Leaf 1");
            TreeObject to2 = new TreeObject("Leaf 2");
            TreeObject to3 = new TreeObject("Leaf 3");
            TreeParent p1 = new TreeParent("Parent 1");
            p1.addChild(to1);
            p1.addChild(to2);
            p1.addChild(to3);

            TreeObject to4 = new TreeObject("Leaf 4");
            TreeParent p2 = new TreeParent("Parent 2");
            p2.addChild(to4);

            TreeParent root = new TreeParent("Root");
            root.addChild(p1);
            root.addChild(p2);

            invisibleRoot = new TreeParent("");
            invisibleRoot.addChild(root);
        }
    }
    class ViewLabelProvider extends LabelProvider {

        public String getText(Object obj) {
            return obj.toString();
        }
        public Image getImage(Object obj) {
            String imageKey = ISharedImages.IMG_OBJ_ELEMENT;
            if (obj instanceof TreeParent)
               imageKey = ISharedImages.IMG_OBJ_FOLDER;
            return PlatformUI.getWorkbench().getSharedImages().getImage(imageKey);
        }
    }
    class NameSorter extends ViewerSorter {
    }

    /**
     * The constructor.
     */
    public Variables() {
    }

    /**
     * This is a callback that will allow us
     * to create the viewer and initialize it.
     */
    public void createPartControl(Composite parent) {
        viewer = new TreeViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);

        //new
        Tree tree = viewer.getTree();
        tree.setHeaderVisible(true);
        tree.setLinesVisible(true);

        TreeColumn column1 = new TreeColumn(tree, SWT.LEFT);
        column1.setText("Name");
        column1.setWidth(400);
        TreeColumn column2 = new TreeColumn(tree, SWT.LEFT);
        column2.setText("Value");
        column2.setWidth(200);

        //end new
        drillDownAdapter = new DrillDownAdapter(viewer);
        viewer.setContentProvider(new ViewContentProvider());
        viewer.setLabelProvider(new ViewLabelProvider());
        viewer.setSorter(new NameSorter());
        viewer.setInput(getViewSite());

        // Create the help context id for the viewer's control
        PlatformUI.getWorkbench().getHelpSystem().setHelp(viewer.getControl(), "com.Amazon.FuncE.viewer");
    } 
```

现在我有两列，但都显示相同的内容。如何指定将哪种数据放入一列或另一列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:13:55.827

问题在于您的标签提供商。您正在实现一个界面，该界面不允许您为不同的列提供不同的文本。您应该改为实现 ITableLabelProvider。

# ruby-on-rails - Rails production.log（使用Passenger）被多个进程写入，无法解析

> ID：11145051
> 
> 赞同：1
> 
> 时间：2012-06-21T19:06:21.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, passenger

这是我的 production.log 的片段：

```
Started GET "/product/514034/754240" for XX.XX.202.138 at 2012-06-21 11:52:28 -0700

Started GET "/product/614409/666897" for XX.XX.228.38 at 2012-06-21 11:52:28 -0700
Processing by ProductsController#show as HTML
  Parameters: {"category_id"=>"514034", "product_id"=>"754240"}
Processing by ProductsController#show as HTML
  Parameters: {"category_id"=>"614409", "product_id"=>"666897"}
Logged in 2940659 via auth cookie
Logged in 585210 via auth cookie
[e3e3fc56bb6bd137741b269ee397683c] [2940659] Read fragment views/global-caches/header (0.7ms)
[e3e3fc56bb6bd137741b269ee397683c] [2940659]   Rendered shared/_email_form.html.haml (0.7ms)
[d81bb986be5acc0277c0c9e11b414249] [585210] Read fragment views/global-caches/sharebar-message (0.7ms)
[d81bb986be5acc0277c0c9e11b414249] [585210]   Rendered shared/_email_form.html.haml (0.7ms)
... 
```

如您所见，它将两个不同用户的两个并发会话同时记录到同一个日志文件中。这使得无法解析我的日志并确定例如生成每种页面所花费的时间，因为这些条目的顺序不是预期的：

```
Started GET "/URL/BLAH" for IP at DATE
... stuff...
Completed 200 OK in XXms (ActiveRecord: YY.Yms) 
```

相反，我得到一个不可预测的交错日志，如下所示：

```
Started GET "/URL/BLAH" for IP at DATE

Started GET "/URL/BLAH" for IP at DATE
... stuff...
Completed 200 OK in XXms (ActiveRecord: YY.Yms)
...stuff...
Completed 200 OK in XXms (ActiveRecord: YY.Yms) 
```

所以不可能将“完成”与“开始”相匹配。

我想要的是一种让每个子进程写入自己的日志或其他东西的方法。或者，如果有可能以原子方式编写每个浏览量的日志，但这可能是不可能的、困难的或会损害性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:46:33.393

Rails 3.2 提供了不错的选项 config.log_tag

您可以添加到您的 production.rb：

```
config.log_tags = [ lambda { Time.now.to_i }] 
```

因此，日志中的每一行都会以数字开头。例子：

> [1351867173] 在 2012-11-02 16:39:33 +0200 开始 GET "/" for 127.0.0.1
> [1351867173] RecipesController#main 处理为 HTML

日志仍然被打乱，但现在我们可以对它们进行规范化、排序。

> 排序-f -s -k1.1,1.11 production.log | sed 's/^............./' > sorted_production.log

（按第一个符号排序（按时间戳）并通过 sed 删除时间戳）

现在日志很容易分析。

此外，在 rails 3.2.9 中还修复了相关问题[https://github.com/rails/rails/pull/7317](https://github.com/rails/rails/pull/7317)
所以请记住这一点。
对不起英语不好...）

# php - mysql_query() 在“字段列表”中返回错误未知列“...”

> ID：11145052
> 
> 赞同：0
> 
> 时间：2012-06-21T19:06:22.383
> 
> 标签：php, mysql

所以我在下面这个脚本

`$query = "SELECT CUST_ID FROM PINS ORDER BY CUST_ID DESC LIMIT 1"; $query_run = mysql_query($query);`

我在“字段列表”中收到错误未知列“CUST_ID”。

**该脚本可以看到主机、用户名、密码和数据库。**

这是我的表的结构

PIN 密钥：PIN_ID

```
 CUST_ID int(10)

    USR_ID int(10)

    PIN varchar(45) 
```

这就是那张桌子上的东西

```
'0', '1', '1', 'yu32b45sc4ca4238a0b923820dcc509a6f75849b'

'1', '1', '2', 'yu32b45s202cb962ac59075b964b07152d234b70'

'2', '2', '1', 'yu32b45sc81e728d9d4c2f636f067f89cc14862c'

'3', '3', '1', 'yu32b45seccbc87e4b5ce2fe28308fd9f2a7baf3'

'4', '4', '1', 'yu32b45sa87ff679a2f3e71d9181a67b7542122c'

'5', '5', '1', 'yu32b45se4da3b7fbbce2345d7772b0674a318d5'

'6', '6', '1', 'yu32b45s1679091c5a880faf6fb5e6087eb1b2dc'

'7', '1', '3', 'yu32b45se10adc3949ba59abbe56e057f20f883e'

'8', '2', '2', 'yu32b45sc33367701511b4f6020ec61ded352059' 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:09:15.360

你的桌子叫别针还是别针？可能这会起作用

```
SELECT CUST_ID FROM pins ORDER BY CUST_ID DESC LIMIT 1 
```

您应该知道表名和列名区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:09:48.857

请运行查询

```
SHOW TABLES 
```

就在您的查询之前或之后，并打印出结果的每一行。尽管您认为自己不在正确的数据库中，但我不会对您不在正确的数据库中感到惊讶

# c# - 找不到如何使用 HttpContent

> ID：11145053
> 
> 赞同：240
> 
> 时间：2012-06-21T19:06:24.427
> 
> 标签：c#, asp.net, .net, dll

我正在尝试使用`HttpContent`：

```
HttpContent myContent = HttpContent.Create(SOME_JSON); 
```

...但我没有找到定义它的 DLL 的运气。

首先，我尝试添加对`Microsoft.Http`as 的引用`System.Net`，但列表中都没有。我也尝试添加对的引用，`System.Net.Http`但`HttpContent`该类不可用。

那么，谁能告诉我在哪里可以找到`HttpContent`课程？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2014-06-29T09:11:35.880

就用...

```
var stringContent = new StringContent(jObject.ToString());
var response = await httpClient.PostAsync("http://www.sample.com/write", stringContent); 
```

或者，

```
var stringContent = new StringContent(JsonConvert.SerializeObject(model), Encoding.UTF8, "application/json");
var response = await httpClient.PostAsync("http://www.sample.com/write", stringContent); 
```

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2014-02-19T11:38:50.890

将 6footunder 的评论转化为答案`HttpContent`是抽象的，因此您需要使用其中一个派生类：

![在此处输入图像描述](../Images/1b4c876fcfa00b454b0ebf84c95cd4fc.png)

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2017-12-20T19:49:07.593

对于 JSON 帖子：

```
var stringContent = new StringContent(json, Encoding.UTF8, "application/json");
var response = await httpClient.PostAsync("http://www.sample.com/write", stringContent); 
```

非 JSON：

```
var stringContent = new FormUrlEncodedContent(new[]
{
    new KeyValuePair<string, string>("field1", "value1"),
    new KeyValuePair<string, string>("field2", "value2"),
});
var response = await httpClient.PostAsync("http://www.sample.com/write", stringContent); 
```

[https://blog.pedrofelix.org/2012/01/16/the-new-system-net-http-classes-message-content/](https://blog.pedrofelix.org/2012/01/16/the-new-system-net-http-classes-message-content/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-21T19:23:48.480

虽然 HttpContent 的最终版本和整个 System.Net.Http 命名空间将随 .NET 4.5 一起提供，但您可以通过添加来自 NuGet的[Microsoft.Net.Http包来使用 .NET 4 版本](http://nuget.org/Packages/Microsoft.Net.Http)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T09:12:11.190

我很确定代码没有使用 System.Net.Http.HttpContent 类，而是使用 Microsoft.Http.HttpContent。Microsoft.Http 是 WCF REST Starter Kit，在放入 .NET Framework 之前从未进行过预览。你仍然可以在这里找到它：http: [//aspnet.codeplex.com/releases/view/24644](http://aspnet.codeplex.com/releases/view/24644)

我不建议在其上添加新代码。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-07-23T08:23:35.947

只是离开`Microsoft.AspNet.WebApi.Client`这里使用的方式。

例子：

```
var client = HttpClientFactory.Create();
var result = await client.PostAsync<ExampleClass>("http://www.sample.com/write", new ExampleClass(), new JsonMediaTypeFormatter()); 
```

# android - 如何设置相对于位图分辨率的文本大小？

> ID：11145057
> 
> 赞同：3
> 
> 时间：2012-06-21T19:06:35.740
> 
> 标签：android, math, bitmap

嘿，我正在尝试将文本写入位图，但我不知道如何设置相对文本大小。

我发现有些人使用密度将文本大小设置为 DIP，我认为这是可以的，但如果我尝试在较小的图像上写文本，文本会变得很大。

这是我的代码：

```
private static final float GESTURE_THRESHOLD_DIP = 95.0f;
Resources resources = gContext.getResources();
float scale = resources.getDisplayMetrics().density;
paint.setTextSize((int) (GESTURE_THRESHOLD_DIP * scale + 0.5f)); 
```

如何将文本大小设置为相对于油漆大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:54:07.867

好吧，最后我只是检查了看起来不错的图像的分辨率是多少，并计算出高度-宽度结果除以 X 给了我想要的数字，所以我只是将字体除以 6。它会在几次失败但它比我所拥有的要好。

请有人回答更好的解决方案。

# mysql - 每次在 magento 中使用某个优惠券代码时，我如何查看完整的订单详细信息？

> ID：11145059
> 
> 赞同：0
> 
> 时间：2012-06-21T19:06:46.450
> 
> 标签：mysql, magento

我们正在尝试收集每个使用特定优惠券代码“NEWCUSTOMER”的人的数据。我们正在尝试获取订单详细信息，包括他们的姓名、电子邮件地址和他们订购的商品。

rule_id 是否以任何方式连接到数据库中的订单？当您尝试编写自己的 mySQL 语句来找出这些信息时，magento 数据库似乎并不那么友好。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:34:37.960

这与您之前的问题相似，我也为您回答了：[查找在 Magento 中使用优惠券代码的非会员的姓名和电子邮件地址](https://stackoverflow.com/questions/11144725/find-the-name-and-email-address-of-non-members-who-used-coupon-code-in-magento)

订单上使用的优惠券代码实际上是订单的属性：`coupon_code`

从您的问题中听起来您正在直接查询数据库，如果是这样，那么您正在寻找表`coupon_code`中的字段`sales_flat_order`。

这是sql：

```
SELECT `customer_firstname`, `customer_lastname`, `customer_email` FROM `sales_flat_order` WHERE  `coupon_code` = 'your_awesome_coupon_code' AND `customer_group_id` = 0 
```

或者，通过magento ...

```
 $orderCollection = Mage::getModel('sales/order')->getCollection()
        ->addAttributeToSelect('customer_firstname')
        ->addAttributeToSelect('customer_lastname')
        ->addAttributeToSelect('customer_email')
        ->addAttributeToSelect('customer_group_id')
        ->addAttributeToSelect('coupon_code')
        ->addAttributeToFilter('customer_group_id', Mage_Customer_Model_Group::NOT_LOGGED_IN_ID)
        ->addAttributeToFilter('coupon_code', 'NEWCUSTOMER'); 
```

# .net - .NET 中是否有变体数据类型的替代品？

> ID：11145065
> 
> 赞同：0
> 
> 时间：2012-06-21T19:07:03.727
> 
> 标签：.net, types, variant, delphi-prism

我想知道 Delphi prism 中是否有变体数据类型。

我正在为 Delphi Prism .NET 环境转换一个 Delphi win32 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:09:47.827

最接近的事情是`Object`所有类型都派生自它。虽然这不是一个很好的解决方案。

在 .NET 4.0[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)中引入的关键字可能更接近您正在寻找的内容。

不存在直接的类似物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:11:00.197

我认为 C++/COM 中的变体数据类型大致相当于 C# 中的对象类型。维基百科文章证实了这一点：第四段中的[http://en.wikipedia.org/wiki/Variant_type](http://en.wikipedia.org/wiki/Variant_type)

# .htaccess - .htaccess 重定向主域但不重定向子子文件夹

> ID：11145066
> 
> 赞同：5
> 
> 时间：2012-06-21T19:07:06.953
> 
> 标签：.htaccess, redirect, vps

我想知道如何从 .htaccess 重定向中排除子文件夹。

我在旧域的根目录中有一个 .htaccess 文件，其中包含以下内容：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L] 
```

这当然会将任何流量从旧域重定向到新域。但我想从这条规则中排除一个目录。这意味着 www.olddomain.com/media/videos 不应重定向到 www.newdomain.com/media/videos

我想要排除的原因是因为我在共享 Web 服务器（旧域）上托管静态文件，例如视频，并且我将站点需要的所有其他内容保留在新 VPS 服务器（新域）上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T20:07:11.057

只需放在`RewriteCond %{REQUEST_URI} !^/media/videos`您的 RewriteRule 之上。它检查 URL 是否以开头，`/media/videos`如果是，则不会满足 RewriteRule。

# c - 在 C 中使用视频/图像文件

> ID：11145070
> 
> 赞同：1
> 
> 时间：2012-06-21T19:07:18.097
> 
> 标签：c, io, jpeg, mpeg

我正在尝试查看并找到一种方法来用多边形边界框注释 C 中的视频，但是我被困在一个非常基本的步骤中。

假设我知道如何将 .MPEG 电影分解为多个 JPEG 图像，那么如何在 C 中操作该文件？我最终需要绘制的东西是文本、点和线，但我很难弄清楚如何开始使用它。

如果我声明：

```
FILE* img = fopen('foo.jpeg', 'r'); 
```

那我该怎么办`img`？有没有办法访问绘图中的某些像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:12:42.550

您在代码示例中所做的只是打开一个文件。您甚至还没有从中读取任何数据。

加载图像文件的最简单方法是使用专用库，例如[​​ SOIL](http://www.lonesock.net/soil.html)。但是，如果您不能自己完成，我真的不认为您将能够实现您的项目目标 - 这是您想要创建的真正高级的东西，但您已经失败了，正如您已经注意到的那样最基本的步骤。

# ruby-on-rails - 如何有条件地设置用户可以更新的角色？

> ID：11145071
> 
> 赞同：0
> 
> 时间：2012-06-21T19:07:23.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 5 个用户可以在我的 rails 站点中拥有的角色

```
- @roles.each do |role|
  %label.radio
    = radio_button_tag 'user[role_ids][]', role.id, @user.has_role?(role.name)
    = role.name 
```

我想做的是基于 current_user 角色我想禁用它们或完全隐藏它们

我正在考虑以这种方式实现它，但它看起来不太干净......任何想法

我想添加这个

```
:disabled => disable_role?(current_user, role.name) 
```

和

```
def disable_role?(current_user, role_name)
  case  
  when role_name == 'superadmin' and current_user.superadmin?
    return false 
  when role_name == 'admin' and (current_user.superadmin? || current_user.admin?)
    return false 
  when role_name == 'standard' and (current_user.superadmin? || current_user.admin?)
    return false 
  else  
    return true  
  end
end 
```

我还有其他条件，但我想向您展示我的方法的一个例子它似乎不像 ruby​​like....任何其他建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:43:43.027

这就是我要做的：

```
class Role < ActiveRecord::Base
  ROLES_HIERARCHY = ['standard', 'admin', 'superadmin']

  def hierarchy(role_name)
    ROLES_HIERARCHY.index(role_name)
  end
  ...
end 
```

和

```
- @roles.each do |role|
  %label.radio
    - if user.role.hierarchy > role.hierarchy
      = radio_button_tag 'user[role_ids][]', role.id, @user.has_role?(role.name) 
      = role.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:17:30.193

为了创建角色，我喜欢使用 Ryan Bates 创建的 gem CanCan。他展示了如何使用它对该截屏视频进行身份验证：[http ://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

但是，如果您打算从头开始，我曾经只是在我的用户模型上添加一个新方法来向我验证这一点，所以每次它都会检查用户是否具有我想要的角色

例如

```
class User < ActiveRecord::Base
  def has_hole? role
    self.roles.where(name: role).size != 0
  end
end 
```

# vba - VBA 通过使用 VBA 保持每 4 行从较大的数组中生成较小的数组

> ID：11145074
> 
> 赞同：0
> 
> 时间：2012-06-21T19:07:48.653
> 
> 标签：vba

我想通过使用 VBA 获取大数组的每 4 行来从大数组创建一个较小的数组
我已将大数组定义为 dist_in = Range("A3.B903") 我如何循环遍历该数组以创建第二个大批？

谢谢，唐

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:55:01.110

Quick&dirty - 使用单元格来引用原始和新区域 - 第 4 和 5 列将是 D & E - 更改数字以适应。

```
Sub ShrinkIt()

Dim i as long

for i=1 to 225
    cells(i,4)=cells(i*4-1,1)
    cells(i,5)=cells(i*4-1,2)
next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:48:03.603

```
Sub MakeBigArraySmall()

    Dim vaLarge As Variant
    Dim aSmall() As Variant
    Dim i As Long, j As Long
    Dim lCnt As Long

    'Read in array
    vaLarge = Sheet1.Range("A3:B903").Value

    'set up small array
    ReDim aSmall(1 To (UBound(vaLarge, 1) \ 4) + 1, 1 To UBound(vaLarge, 2))

    'loop through large and write every 4th value to small
    For i = LBound(vaLarge, 1) To UBound(vaLarge, 1) Step 4
        lCnt = lCnt + 1
        For j = LBound(vaLarge, 2) To UBound(vaLarge, 2)
            aSmall(lCnt, j) = vaLarge(i, j)
        Next j
    Next i

    'write small array back out to sheet
    Sheet1.Range("D3").Resize(UBound(aSmall, 1), UBound(aSmall, 2)).Value = aSmall

End Sub 
```

# ruby - 用户输入+随机单词和数字打印

> ID：11145075
> 
> 赞同：-8
> 
> 时间：2012-06-21T19:07:48.857
> 
> 标签：ruby, methods

所以我有代码：

```
puts 'What is your name?(Enter in field below)'
input = gets.chomp
puts 'end'
occupationslist = ['Engineer', 'Clerk', 'Doctor', 'Demolition Expert', 'Athlete', 'None',]
oclistlength = occupationslist.length
rand1 = rand(oclistlength)
occupation = ocupationslist[rand1]
def occupations
  puts input
  puts 'Occupation: ' + occupation
  puts 'Rating: ' + rand(1-12).to_s  
end
occupations 
```

它应该显示您的姓名（您输入的）、随机职业和随机评级，但我不知道它有什么问题。这是令人满意的输出：

```
prints "What is your name?".
(gets user input)
prints out the input.
prints out a random 'occupation'(from the list in the array above).
prints out the 'Rating: ' - a random number from 0 to 12. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:18:18.003

`input`并且`occupation`在函数范围之外定义`occupations`。`$input`要么用and将其声明为全局变量，要么`$occupation`在函数内部声明它，要么将变量作为参数传递给函数（如 Lee 建议的那样）：

```
puts 'What is your name?(Enter in field below)'
$input = gets.chomp
puts 'end'
occupationslist = ['Engineer', 'Clerk', 'Doctor', 'Demolition Expert', 'Athlete', 'None',]
oclistlength = occupationslist.length
rand1 = rand(oclistlength)
$occupation = occupationslist[rand1]
def occupations
  puts $input
  puts 'Occupation: ' + $occupation
  puts 'Rating: ' + rand(1-12).to_s  
end
occupations 
```

此外，还有一个错字：你写的是 ocupationslist[rand1]`occupation = occupationslist[rand1]`而不是 oc* *c* *upationslist[rand1] （没有'c'）。

# c++ - 如何使用 DW2 构建定制的 MinGW 交叉编译器

> ID：11145076
> 
> 赞同：3
> 
> 时间：2012-06-21T19:07:53.277
> 
> 标签：c++, gcc, mingw

由于与使用 dw2 异常处理编译的库的兼容性问题，我被困在我的工作中，而我在 Ubuntu 上使用的 MinGW Cross Compiler 有 sjlj。

试图自己解决这个问题真的很痛苦。我不知何故需要构建一个可以在具有 dw2 而不是 sjlj 的 Ubuntu 上使用的自定义 MinGW 交叉编译器。否则，我将不断收到错误消息，例如：未定义对 _unwind_resume 的引用。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:35:02.607

尝试使用 MXE（MinGW 跨环境） [http://mxe.cc/](http://mxe.cc/)

据我测试（意思是 dw2），MXE 是根据 MinGW.org（Windows 上的 MinGW）说明构建的。Mingw-w64 和大多数发行版的 repos 也使用 sjlj，所以，那是不行的..

MXE 唯一的“问题”是它只构建静态库，但它包含相当多的曲目。这也可能不是问题。

如果这是不可接受的， http: [//mingw.org/wiki/LinuxCrossMinGW](http://mingw.org/wiki/LinuxCrossMinGW)遵循这些步骤。如果脚本由于函数名称而失败，请转到 .function 文件中的第 130 行并注释关于 local 的那 3 行

# perl - 如何从 perl 脚本中调用的 perl 脚本中获取变量？

> ID：11145083
> 
> 赞同：-1
> 
> 时间：2012-06-21T19:08:13.017
> 
> 标签：perl, export, environment-variables

我有两个 perl 脚本**a.pl**和**b.pl**

在**a.pl**中，它通过调用**b.pl**`system("/usr/bin/perl ./b.pl");`

在**b.pl 中**，它会做一些事情，然后将一些值分配给`$aa`and`$bb`

现在在**a.pl**调用**b.pl**之后，**a.pl**需要 b.pl 的值`$aa`和`$bb`来自**b.pl**的值。

我做了研究，发现人们说要使用“出口商”或**设置**`$aa`并`$bb`加入`$ENV`b.pl

 **然而，经过一些试验，我未能完成它。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:26:18.287

如果您出于某种原因需要将其作为两个应用程序而不是应用程序`do`中`use`的`require`另一个 perl 脚本来执行，那么您可以将结果从**b.pl**打印到 STDOUT

```
print join('|', $aa, $bb); 
```

然后在**a.pl**中阅读并拆分它

```
my ($aa, $bb) = split(/\|/, `/usr/bin/perl ./b.pl`); 
```

如果您的`$aa`or`$bb`可能包含字符`|`，请选择不同的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:19:38.487

当您通过 调用它时`system`，您正在调用一个子进程。您无法通过管道（例如标准输出）从中获得任何东西。

您可能想要的是`do './b.pl`；反而。更好的是，将 b.pl 放入 b.pm，设置它的包，然后你可以`require b;`通过它的包访问它的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:27:33.190

如果 b.pl 是在没有本地声明的变量的情况下编写的（因此不使用警告，使用严格，不使用我的 $aa），您可以将文件读入变量并对其进行评估。否则，如果不修改 b.pl，这将是不可能的。一些可能的事情：

*   使用 ENV（如前所述）
*   在 b.pl 退出前在 STDOUT 上打印 $aa 和 $bb，读取 a.pl 中的内容
*   使用一些著名的[IPC](https://en.wikipedia.org/wiki/Inter-process_communication)方法（管道、套接字、临时文件）
*   将 b.pl 的逻辑移动到某个单独的模块，包括来自 b.pl 和 a.pl 的模块**

# windows - 打印作业不排队，直接拉入打印机内存 - 无法查看真实状态

> ID：11145086
> 
> 赞同：1
> 
> 时间：2012-06-21T19:08:32.583
> 
> 标签：windows, winapi, printing, wmi, spool

我被要求开发一个打印监控实用程序，该实用程序将从客户系统接收打印作业，将其路由到打印机，然后在打印机完成作业时触发主机系统中的更新，并显示成功状态。

我发现至少有两种方法可以从打印机队列中获取打印作业状态 - 使用 WMI 查询 Win32_PrintJob 或使用 API 到 winspool。当我尝试打印到已断开连接的打印机时，这两种方法都工作得很好 - 我能够获得状态为等待打印机可用的作业列表。

现在我正在尝试测试打印机缺纸或卡纸的情况。不幸的是，在这种情况下，打印作业将从打印假脱机程序队列中删除并拉到打印机内存中，等待用户放入更多纸张或解决卡纸问题。打印作业不再在队列中，但还没有打印出来，所以我真的可以用成功状态更新主机系统。我发现了几篇关于使用 PJL 或打印机特定 API 从打印机本身获取信息的文章，但我没有成功。有什么方法可以配置 Windows 后台处理程序队列以保留在队列中，直到打印机实际处理它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:45:25.893

谢谢你，arx 发布了那个 MSDN 链接，这正是我所怀疑的。我猜我正在测试的特定驱动程序不支持该真实状态。

# objective-c - 我应该如何在 Objective-C 中打印交易收据？

> ID：11145089
> 
> 赞同：0
> 
> 时间：2012-06-21T19:08:42.270
> 
> 标签：objective-c, printing, nsview, nsprintoperation

我已经查阅了一些文件，但我只是希望在这里得到一个大致的想法。

我希望能够在销售完成后打印发票。我的客户会为我提供指定的纸张尺寸，同时表明纸张上会有默认信息（即公司名称、地址、电话号码等）

我想知道最好的方法是打印一张可能有很多项目的发票 - 可能太多以至于它从我的客户提供的纸张上脱落，必然是在一张新纸上。

现在我研究了 NSView、NSPrintOperation 和 NSPrintInfo，我相信我肯定会使用它们，但是是否可以在幕后绘制视图？我还质疑在本地存储该收据的最佳方法，可能是 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:01:33.360

你可以使用 NSView、NSPrintInfo 和 NSPrintOperation。是的，NSView 会在打印时负责绘图。（您可以区分上下文，即屏幕或打印机）。

要保存为 PDF，请查看 NSPrintOperation 方法 (PDFOperationWithView:)，它有助于创建可以保存到磁盘的 PDF 数据。

# java - 如何在运行时更改 slf4j 级别？

> ID：11145090
> 
> 赞同：15
> 
> 时间：2012-06-21T19:08:43.830
> 
> 标签：java, log4j, slf4j

我使用 SLF4j 作为我的日志框架，由 log4j 支持。我的问题是我正在寻找一种方法来在运行时更改我的记录器的日志记录级别。

我知道 slf4j 不允许直接通过其自己的 API 进行此操作，因此，我必须直接访问日志记录提供程序。就个人而言，我发现这是 slf4j 的一个巨大缺陷。所以现在我的问题是如何通过 slf4j 以编程方式确定我正在使用哪个提供程序？使用 slf4j 的最大目的是让您成为提供者不可知论者——您可以轻松地在您最喜欢的日志系统之间切换，而无需重新编码任何东西。但是现在，如果我必须直接调用 log4j，我就失去了这种能力。

至少，我希望能够确定我是否使用 log4j 作为提供者，如果是，则允许用户切换日志级别。

如果我这样做 `LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME)`，结果是一个实例，`org.slf4j.impl.Log4jLoggerAdapter`甚至不是`org.apache.log4j.Logger`（正如我所希望/预期的那样）。

有什么办法可以找出来吗？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T19:17:57.710

SLF4J 被设计为*库*的抽象，而不是应用程序（当然，为了保持一致性，您可以并且仍然应该在自己的应用程序的日志记录调用中使用 SLF4J）。在您自己的应用程序中，您选择底层记录器框架，因此可以在 logging-config-specific 部分访问 log4j API。

恕我直言，图书馆不应该因为更改日志配置而胡闹，因此它不适合在 SLF4J API 上使用。

# security - 代码签名：何时以及为什么？

> ID：11145091
> 
> 赞同：8
> 
> 时间：2012-06-21T19:08:46.200
> 
> 标签：security, certificate, code-signing

如果您在线搜索代码签名，您将获得大量关于去哪里使用数字证书对代码进行签名的点击*，*但没有关于*何时*应该对代码进行签名或*为什么*需要签名的文章或文档。所以我提出这些问题：

*   开发人员或开发团队希望/需要对其代码进行签名的用例有哪些？
*   可以/应该签署哪些类型的代码？JavaScript？爪哇？C++？每种语言/平台是否有不同类型的代码设计？
*   代码是作为原始源代码还是编译后的二进制文件签名的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:21:16.307

我想理论上可以对任何语言的任何代码进行签名，或者作为源代码，但更常见的是编译后的二进制文件。

我想到的主要用例是移动应用程序（本例为 Android）。您必须在发布之前签署代码。您还必须保留密钥存储文件，因此如果您对应用程序进行任何更新并想要上传它，您可以使用相同的密钥对其进行签名。这是因为Android在升级应用程序时会检查许多事情，主要是新旧代码签名相同，只要密钥存储文件及其密码足够保密，就证明它来自相同的来源。如果有人以某种方式修改代码，签名验证将失败。

简而言之，签名代码让最终用户/机器知道代码来自哪里。在升级的情况下，很难/不可能修改代码并让其他人下载它。

Apple 对 iOS 的代码签名发疯了，我没有完全掌握所有细节，但你必须从 Apple 获得证书（是的，超过 1 个）并与他们签名。如果您想将应用程序放在测试设备上，您需要另一个证书来签名并将其安装在设备上，否则您必须在 App Store 上获得它（取决于 Apple 的批准），在那里他们可能会用一些人签名iOS 设备的私钥，以了解其 Apple 批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:06:20.850

每次您需要确保代码来自受信任的来源并且没有人修改它时（签名通常带有校验和）。这很常见。编程库、软件分发、软件升级。当您需要为代码申请专利时，您应该对其进行签名并获得可信的时间戳。当您创建银行并通过互联网访问它时，您通过 SSL 将您的网页发送给用户 = 您正在对它们进行加密和签名。可能还有更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:24:23.297

> 开发人员或开发团队希望/需要对其代码进行签名的用例有哪些？

数字签名在不同的平台上意味着不同的东西。如果您正在编写 Windows 桌面软件，那么签署可执行文件的最大初始好处是摆脱 Windows 自 Windows XP SP2 以来一直向用户显示的讨厌的“未知发布者”警告。在其他平台（一些移动、Java、Flash、Office VBA 宏等）上，需要签名代码才能提升权限。

您可以让 Windows 程序自检其自己的数字签名以确保其有效，这意味着 EXE 自签名以来没有发生任何变化。大多数人将其用作抵御恶意软件和盗版的另一层保护。

也看看这个： [http ://blog.ksoftware.net/2011/07/what-is-authenticode/](http://blog.ksoftware.net/2011/07/what-is-authenticode/)

> 可以/应该签署哪些类型的代码？JavaScript？爪哇？C++？每种语言/平台是否有不同类型的代码设计？

理论上，可以对任何文档进行数字签名，但大多数时候当人们谈论代码签名时，他们谈论的是 MS Authenticode（将数字签名附加到任何 PE 格式文件（EXE、DLL、COM 等）或签署可执行文件适用于 OSX/iOS。

不同平台上有不同类型的签名，但大多数将使用相同的证书。

> 代码是作为原始源代码还是编译后的二进制文件签名的？

在大多数情况下，二进制。

# silverlight - 如何将自定义 UserControl 分配给 DataGrid 列标题？

> ID：11145092
> 
> 赞同：2
> 
> 时间：2012-06-21T19:08:54.473
> 
> 标签：silverlight, silverlight-4.0, datagrid, datagridcolumnheader

我正在尝试使用具有文本块和按钮的自定义标题制作数据网格。文本块和按钮由`UserControl`我创建的这个表示：

```
<UserControl x:Class="SilverlightWorkshop.Controls.CollapsibleDataGridHeader"
    ...
    />
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding HeaderText, Mode=TwoWay}" />
        <Button Content="←" Click="ArrowButtonClick"/>
    </StackPanel>
</UserControl> 
```

这个想法是，当用户单击按钮时，列宽将折叠到一个小尺寸。但是，我很难找到一个优雅的解决方案来将此控件用作列标题的模板。

这有效：

```
<sdk:DataGrid>
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn>
            <sdk:DataGridTextColumn.Header>
                foo
            </sdk:DataGridTextColumn.Header>
        </sdk:DataGridTextColumn>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

但我无法控制。这不起作用：

```
<sdk:DataGrid>
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn>
            <sdk:DataGridTextColumn.Header>
                <Button/>
            </sdk:DataGridTextColumn.Header>
        </sdk:DataGridTextColumn>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

但是， http: [//msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datagridcolumnheader](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datagridcolumnheader(v=vs.95).aspx) (v=vs.95).aspx暗示我可以添加一个对象作为标题的子对象.

我得到的最接近的是将标题设置为样式：

```
<navigation:Page xmlns:my="clr-namespace:SilverlightWorkshop.Controls"  xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  x:Class="SilverlightWorkshop.Views.CollapsibleColumns" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           d:DesignWidth="640" d:DesignHeight="480"
           Title="CollapsibleColumns Page">
    <navigation:Page.Resources>
        <Style x:Key="CollapsibleHeaderStyle" TargetType="sdk:DataGridColumnHeader">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="sdk:DataGridColumnHeader">
                        <my:CollapsibleDataGridHeader HeaderText="Cheese" ArrowButtonClicked="ArrowButtonClick"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </navigation:Page.Resources>
    <sdk:DataGrid ItemsSource="{Binding Data, Mode=TwoWay}" AutoGenerateColumns="False">
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn Binding="{Binding String2, Mode=TwoWay}" HeaderStyle="{StaticResource CollapsibleHeaderStyle}"/>
            <sdk:DataGridTextColumn Binding="{Binding String1, Mode=TwoWay}"/>
        </sdk:DataGrid.Columns>
    </sdk:DataGrid>
</navigation:Page> 
```

但是，有几件事我不喜欢。设置列标题的模板属性会消除一些默认外观，例如标题的背景颜色和排序图标。看起来我真的把整个东西都换了。

另外，我不确定如何找出单击了哪个列标题，以便更改相应列的宽度，也不确定如何将每列的不同标题名称绑定到控件中的`HeaderText`属性`CollapsibleDataGridHeader`。

是否可以避免使用样式，而是将我的控件分配给列标题？如果没有，我将如何使用上面的样式设置解决方案进行绑定并检索单击了哪一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:03:34.163

Manas Patnaik 的这篇文章似乎有答案：

[http://manaspatnaik.com/blog/index.php/technology/silverlight-4/accessing-controls-in-datagrid-columnheader-silverlight/877](http://manaspatnaik.com/blog/index.php/technology/silverlight-4/accessing-controls-in-datagrid-columnheader-silverlight/877)

XAML 显示了如何设置标题模板以使其保留默认样式，还解释了如何通过代码隐藏从 DataGrid 标题访问控件。

这个答案解释了如何绑定到样式中设置的控件：

[动态设置 Silverlight DataGrid 列的标题文本](https://stackoverflow.com/questions/151682/dynamically-setting-the-header-text-of-a-silverlight-datagrid-column/3627372#3627372)

# twitter - Twitter数据的情绪分析？

> ID：11145094
> 
> 赞同：1
> 
> 时间：2012-06-21T19:09:01.963
> 
> 标签：twitter, dataset, sentiment-analysis

我正在做这个项目，我希望从他最近的推文中对 Twitter 用户的一般情绪进行分类。既然推文可以属于各种各样的领域，我应该怎么做？

我可以使用朴素贝叶斯算法（例如：http: [//phpir.com/bayesian-opinion-mining](http://phpir.com/bayesian-opinion-mining)），但由于推文可以属于各种各样的域，我不确定这是否非常准确。

另一种选择可能是使用[SentiWordNet](http://sentiwordnet.isti.cnr.it/)或[here](http://alexdavies.net/2011/10/word-lists-for-sentiment-analysis-of-twitter/)等情感词典。这会是更好的方法吗，我不知道。

如果我打算使用朴素贝叶斯或其他算法，我在哪里可以获得数据来训练我的分类器？

在这里补充一下，我主要使用 PHP 进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:48:58.193

如果您专注于逐字逐句的方法，您似乎可以将`SentiWordNet`其用作*分类器数据。*这就是简单的`Bayesian spam filters`工作原理；它专注于每个单词。

这里的好处是，虽然其中的许多单词`SentiWordNet`具有多种含义，每个单词都有不同的`positive/objective/negative`分数，但您可以尝试使用推文中其他单词的分数来缩小每个多义单词的最合适含义，这可以为每个单词和整个推文提供更准确的分数。

# javascript - JQuery - 使用选择器：包含 - 奇怪的结果

> ID：11145099
> 
> 赞同：3
> 
> 时间：2012-06-21T19:09:20.893
> 
> 标签：javascript, jquery, jquery-selectors, user-input

**故事到此为止......**

我想学习 JQuery，并且我还构建了一个 MVC ASP.NET 应用程序，它需要“键入时搜索”搜索功能 - 也非常适合学习 JQuery！到目前为止（在[stackoverflowers](https://stackoverflow.com/questions/11040711/jquery-iterating-json-response)的帮助下）我已经设法获得了 AJAX/JSON 位。现在我想评估每个按键并针对创建为无序列表的 JSON 数组进行验证。我试图实现的是仅在列表***中显示包含***输入内容的帐号。所以，我的理由是检查 keydown 事件并验证它。暂时我只是将帐号的颜色更改为隐藏它们的**红色**，只是为了证明我的逻辑有效。

**到目前为止我的 JQuery 代码....**

[http://jsfiddle.net/garfbradaz/JYdTU/28/](http://jsfiddle.net/garfbradaz/JYdTU/28/)

……为了方便……

```
$(document).ready(function() {
var $input = $("#livesearchinput"),
    filled = false;
$.ajaxSetup({
    cache: false
});
$input.keydown(function(key) {
    if (!filled) {
        filled = true;
        $.getJSON("/gh/get/response.json//garfbradaz/MvcLiveSearch/tree/master/JSFiddleAjaxReponses/", function(JSONData) {
            var $ul =
            $('<ul>').attr({
                id: "live-list"
            }).appendTo('div#livesearchesults');
            $.each(JSONData, function(i, item) {
                $.each(item, function(j, val) {
                    $('<li>').attr({
                        id: "live-" + val
                    }).append(val).appendTo($ul);
                });
            });
        });
    }

    var n = $("li:contains('" + this.value + "')").length;

    if (n === 0) {
        $("li").removeClass("color-change");
        console.log("1\. value of n equals " + n + " : " + this.value);
    }
    else {
        $("li:contains('" + this.value + "')").addClass("color-change");
        console.log("2\. value of n equals " + n + " : " + this.value);
    }

}); 
```

});​</p>

**我的问题......**

我的问题是，当我使用以下方法评估按键时，**this.value**在第一个 keydown 事件上为空，然后在整个过程中失步

```
 var n = $("li:contains('" + this.value + "')").length 
```

例子：

如果我输入**100004**，让我向您展示**Chrome中的****console.log**结果以输入该结果：

 **![控制台结果](../Images/5fefa1d61a437b32b867821ef54b90f3.png)

![证明我输入了 100004](../Images/afea8d3780101cf799ebef881e2e17c0.png)

结果似乎总是落后一步。keydown 事件是最好使用的事件还是我错过了什么。

和往常一样——谢谢你们，祝你编码愉快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:17:28.877

因为`this.value`在 keydown 事件上不包含触发事件的按键。请改用 keyup。

您可以通过函数中可用的事件对象访问按键...但输入的值在释放键之前不会包含它。

[http://jsfiddle.net/rlemon/TGBUe/1/](http://jsfiddle.net/rlemon/TGBUe/1/)在此示例中，您可以打开控制台...并在输入中键入一个字符...您会注意到第一个字符的 keydown this.value 为空白，而keyup 包含它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:11:16.477

也许检查在AJAX 部分完成*之前触发。*

请注意，AJAX 是异步的，无论 AJAX 请求如何，代码都会继续其流程，即异步完成。

尝试移动**里面** `function(JSONData)`的逻辑。**

# c++ - 是否可以使用重定向到标准输入通过命名管道读取间歇性发送的数据？

> ID：11145109
> 
> 赞同：0
> 
> 时间：2012-06-21T19:09:59.900
> 
> 标签：c++, linux, redirect, named-pipes

是否可以使用重定向到标准输入通过命名管道读取间歇性发送的数据？

我想做的是：

```
$ mkfifo pipe
$ ./test < pipe 
```

在另一个终端：

```
$ cat datafile > pipe
$ cat datafile > pipe 
```

重复将信息转储到管道中。这只适用于第一次。

这是一个显示行为的测试演示程序：

```
int main(int argc, char *argv[]) {  
    char input_string[30];
    while(1) {
        while( cin.read(input_string, 30) || cin.gcount()!=0 ) {
            cout << "!" << endl;
        }
    }
return 1;
} 
```

发生什么了？重定向是否仅向管道提供单个发送的内容？我已经编写了一个实际生产代码的版本，它以管道的名称作为参数并保持打开状态以便以这种方式编写，也许这就是答案。但我想知道是否有办法通过重定向来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:10:06.583

当您像这样从管道重定向输入时：

```
./test < pipe 
```

shell 打开管道进行读取，然后启动您的程序。但是在写入者存在之前，打开管道并没有完成——也就是说，`open(2)`阻塞。当另一个进程打开管道写入时，原来的`open`调用就完成了，两者就可以通信了。当作者关闭它的管道末端时，读取端也关闭——阅读器得到一个EOF。

一旦该循环完成，您可以重新打开管道进行读取并开始另一个循环，但您必须自己做。因此，如果您正在阅读标准输入，则必须重新启动程序。或者，您可以在不同的文件描述符上重新打开管道，例如：

```
// Error checking omitted for expository purposes
int main(int argc, char **argv)
{
    while(1)
    {
        int fd = open("pipe", O_RDONLY);
        char buffer[30];
        int n;
        while((n = read(fd, buffer, sizeof(buffer)) > 0)
        {
            // Process input
        }
        close(fd);
    }

    return 0;
} 
```

如果要将原始 I/O 包装在 stdio`FILE*`中，可以使用[`fdopen(3)`](http://linux.die.net/man/3/fdopen); 我不知道将文件描述符包装在 C++ 流对象中的方法，尽管它可能是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:27:48.497

```
$ cat datafile > pipe 
```

将数据文件的内容发送到管道和 EOF（文件结尾）。此时重定向关闭，之后推送到管道的数据不再重定向`./test`。

# c# - 单个图像中鼠标悬停事件的多个区域

> ID：11145110
> 
> 赞同：1
> 
> 时间：2012-06-21T19:10:01.077
> 
> 标签：c#, wpf, image, mouseevent, mouseenter

我在 WPF 中有一个图像，我希望根据鼠标当前悬停的位置显示不同的信息。我知道我已经在网站上看到了这一点，但我似乎无法弄清楚在 WPF 中执行此操作的代码。

我使用的图像是美国地图，当用户越过边界时，我需要显示州特定信息。现在我正在使用的实现是`Path`在地图顶部以透明方式绘制的一系列 s，然后使用`Mouse.MouseEnter`事件来触发更改。问题是更新似乎遭受了可怕的滞后，否则`MouseEnter`事件并不总是能正确捕获。

有人知道更好的方法吗？

**示例 C#**

```
 private void wyoming_MouseEnter(object sender, MouseEventArgs e)
    {            
        //stateName.Text = "Wyoming";            
    } 
```

**示例 XAML**

```
<Canvas MouseDown="Canvas_MouseDown" Name="canvas">
    <Viewbox Stretch="Uniform">
        <Image Source="USA.png" />
    </Viewbox>
    <Path Name="wyoming" Stroke="Transparent" StrokeThickness="1" Mouse.MouseEnter="wyoming_MouseEnter" Mouse.MouseMove="wyoming_MouseMove">
        <Path.Data>
            <PathGeometry>
                <PathGeometry.Figures>
                    <PathFigureCollection>
                        <PathFigure IsClosed="True" StartPoint="184,121" >  <!--NW-->
                            <PathFigure.Segments>
                                <PathSegmentCollection>
                                    <LineSegment Point="266,129" />
                                    <LineSegment Point="264,193" />
                                    <LineSegment Point="203,190" /> 
                                    <LineSegment Point="177,186" /> 
                                </PathSegmentCollection>
                            </PathFigure.Segments>
                        </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:51:50.107

好吧，在玩了更多之后，我发现我的问题是我没有填充路径，只是将它们保留为线条。这基本上使得事件触发区域非常小，因此 WPF 有时会错过事件。通过用透明填充它们，一切都很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:19:33.183

就个人而言，我为同一个实例所做的（除了我标记与时区和广播区域有关的信息）是我为我希望能够在鼠标悬停时激活的区域制作透明路径形状并将它们放在美国地图上，然后我附上MouseEnter/MouseLeave 事件的每个事件触发器，因此当用户将鼠标悬停在任何路径的区域上时，它将触发该条件并执行指定的操作....在我的实例中，它显示广播电台的广播时间和基于地区和时区的节目。因此，如果鼠标悬停在某个区域上，则信息框可见性设置为可见。在 MouseLeave 上，相同的信息框设置为 Collapsed....等

它非常有效并且运行良好，并且您可以在使用您使用路径制作的精确形状时使您的交互区域非常明确。如果我能找到源代码，我会尝试分享，但该项目是一年多前的，所以希望描述能给你足够的想法来激发创造力。:)

# php - filesize() [function.filesize]：LinqBridge.dll 的统计失败

> ID：11145115
> 
> 赞同：0
> 
> 时间：2012-06-21T19:10:29.497
> 
> 标签：php, function, filesize, stat

我编写了一个脚本来使用此选项从更新目录中列出我的文件：

文件名 文件哈希 文件大小

为什么我会收到此错误：

```
Warning: filesize() [function.filesize]: stat failed for LinqBridge.dll in      C:\xampp\htdocs\update.php on line 15 
```

我的 php 代码：

```
<?php
  if(isset($_GET['action']) and ($_GET['action']=="list"))
 {
    $myDirectory = opendir("./Update/");
    while($entryName = readdir($myDirectory)) {
$dirArray[] = $entryName;
 }
    closedir($myDirectory);
    $indexCount = count($dirArray);
    sort($dirArray);
   for($index=0; $index < $indexCount; $index++) {
    if (substr("$dirArray[$index]", 0, 1) != "."){
    echo $dirArray[$index]."&nbsp;";
    echo @hash_file('md5',$dirArray[$index])."&nbsp;";
    echo filesize($dirArray[$index])."&nbsp;";
}
 }
 }
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:15:48.710

您在 $dirArray 中的文件位于不同的目录中。您正在从“./Update/”读取它们，因此在执行文件大小或 filectime 或 filemtime 或其他任何操作时，您需要以“./Update/”作为前缀。

```
echo filesize("./Update/".$dirArray[$index])."&nbsp;"; 
```

# sql - 按列别名分组

> ID：11145123
> 
> 赞同：3
> 
> 时间：2012-06-21T19:11:08.410
> 
> 标签：sql, database, group-by, case

我想按列别名对 sql 语句进行分组。从本质上讲，我希望以下内容在逻辑上按其应有的方式运行，但不允许按使用 as 创建的列进行分组。（无效的列名）。有人有任何提示吗？

```
SELECT 
    CASE
    WHEN Date IS NULL
    THEN 'EMPTY'
    ELSE
        CASE
        WHEN Date = '1/1/1753'
        THEN 'UNAVAILABLE'
        ELSE CAST(MONTH(Date) as varchar(MAX))+
             '/'+ CAST(YEAR(Date) as varchar(MAX))
        END
    END AS MonthYear
FROM tbltablename
GROUP BY MonthYear 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:19:18.507

对于分组的直接问题，您需要按新列的相同表达式或计算进行分组，或者从派生表中使用它。

```
SELECT MonthYear
FROM (  SELECT Columns,
            CASE
            WHEN Date IS NULL
            THEN 'EMPTY'
            ELSE
                CASE
                WHEN Date = '1/1/1753'
                THEN 'UNAVAILABLE'
                ELSE CAST(MONTH(Date) as varchar(2))+
                     '/'+ CAST(YEAR(Date) as varchar(4))
                END
            END AS MonthYear
        FROM tbltablename) T
GROUP BY MonthYear 
```

另一方面，`VARCHAR(MAX)`如果没有必要，你不应该使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:19:28.773

你的问题说“变量”，但我认为你的意思是列别名。仅供参考。

使用实际的列定义应该可以正常工作。未经测试，但这应该可以满足您的需要：

```
SELECT 
    CASE
    WHEN Date IS NULL
    THEN 'EMPTY'
    ELSE
        CASE
        WHEN Date = '1/1/1753'
        THEN 'UNAVAILABLE'
        ELSE CAST(MONTH(Date) as varchar(MAX))+
             '/'+ CAST(YEAR(Date) as varchar(MAX))
        END
    END AS MonthYear
FROM tbltablename
GROUP BY
    CASE
    WHEN Date IS NULL
    THEN 'EMPTY'
    ELSE
        CASE
        WHEN Date = '1/1/1753'
        THEN 'UNAVAILABLE'
        ELSE CAST(MONTH(Date) as varchar(MAX))+
             '/'+ CAST(YEAR(Date) as varchar(MAX))
        END
    END 
```

# c# - 修复 C# 竞争条件

> ID：11145124
> 
> 赞同：1
> 
> 时间：2012-06-21T19:11:12.043
> 
> 标签：c#, visual-studio-2008, thread-safety, serial-port

我对线程非常陌生，因此不太确定这是否是一种竞争条件。我正在使用 C# 的 SerialPort 类从串行设备查询数据。我通过互联网阅读的理解是，当触发数据接收事件时，此类会产生一个单独的线程。当程序不允许我在事件方法中设置文本框的值时，这似乎得到了证实，因为控件只能在创建它们的线程中设置。我的问题是我认为设置文本框内容的方式存在竞争条件。

使用这种方法

```
private void btnWidth_Click(object sender, EventArgs e)
{
    mySerialManager.ClearErrorQueue();
    mySerialManager.WriteLine();
    Thread.Sleep(1000);

    if (mySerialManager.HasErrors())
    {
        MessageBox.Show("There was an Error Accessing the Serial Device:\n\r" + PrintAllErrors(mySerialManager), "Serial Device Error");
        return;
    }

    btnSubmit.Enabled = true;
    btnSubmit.Select();
    txtMeasWidth.Text = myRecievedData.Substring(0, myRecievedData.Length - 1).Trim();
} 
```

我将数据命令写入串行设备，然后设置文本框内容。事件处理程序在触发后设置 myRecievedData 字符串的值。我的问题是如何确保事件已被触发并在写入文本框之前设置了此字符串的值。我在方法的底部做了这个作为一种快速修复，但我想确保如果这是一个竞争条件，它会得到处理。

对不起，这太啰嗦了。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:19:17.787

你是正确的，有一个竞争条件。您可以使用[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法从 SerialPort 的事件处理程序中安全地更新文本框：

```
txtMeasWidth.Invoke((Action)delegate { txtMeasWidth.Text = myRecievedData; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:24:45.927

是的，您在这里创建了一个竞争条件。
但它很容易修复。

在您`ComPortDataReceivedEventHandler`只需调用一个方法，该方法将使用适当的文本设置您的文本框

例如：

```
form.Invoke(new MethodInvoker(delegate() {textMeasWidth.Text = myreceivedData})) 
```

# c# - 有人知道用于更新订单状态和添加跟踪号的 PayPal API (C#) 吗？

> ID：11145125
> 
> 赞同：2
> 
> 时间：2012-06-21T19:11:12.813
> 
> 标签：c#, paypal

我想使用 API 更新 Paypal 订单状态并添加跟踪号。

但我找不到 API 文档或示例。

有知道的请指教~

谢谢！

**用于此的 API：**

![在此处输入图像描述](../Images/80190fc73b825cc467e92a24f9e3dfe2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:27:40.720

不，不幸的是，没有用于此的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-22T16:50:20.577

现在有一个新的基于 REST 的 API：[https ://developer.paypal.com/docs/tracking/integrate/](https://developer.paypal.com/docs/tracking/integrate/)

# regex - 正则表达式字符到数字

> ID：11145127
> 
> 赞同：-2
> 
> 时间：2012-06-21T19:11:18.243
> 
> 标签：regex

我想问一下regExp，我需要regExp，它的工作原理是这样的：

输入='569/A'；结果 = '569-1';

输入 = '569/a'; 结果 = '569-2';

输入='569/B'；结果 = '569-3';

输入='569/b'；结果 = '569-4';

你肯定明白我想要的模式。'/' 或 '\' 转换为 '-'，字符应以正确的顺序转换为数字 A = 1, a = 2, B=3, b=4。奇数大写，偶数小写

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:14:25.480

尝试使用 .replace() - 它会容易得多。

[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

.replace('/','-').replace('A','1').replace('a','2').replace('B','3').replace('b' ,'4');

# git - 如何配置 gitignore？

> ID：11145131
> 
> 赞同：8
> 
> 时间：2012-06-21T19:11:30.350
> 
> 标签：git, github, gitignore

我想忽略我的一些文件（/config/environments/production.rb、/webrat.log、/config/database.yml）。我的 gitignore：

```
/.bundle
/db/*.sqlite3
/doc/
*.rbc
*.sassc
.sass-cache
capybara-*.html
.rspec
/vendor/bundle
/log/*
/tmp/*
/public/system/*
/coverage/
/spec/tmp/*
**.orig
rerun.txt
pickle-email-*.html

/config/environments/production.rb
/config/*.yml
/*.log 
```

但这不起作用。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T19:15:21.630

你所做的是正确的。在制作 .gitignore 之前，您可能已经添加了这些文件。

所以试试这个

```
git rm -r --cached .   (Note the period at the end.)
git add . 
```

然后检查您放入忽略的文件是否仍然添加到索引中。或者您可以修改它们并检查它们是否被跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:15:03.717

如果这些文件已添加到索引中，则需要先将其删除。

```
git rm --cache /config/environments/production.rb
git rm --cache /webrat.log 
git rm --cache /config/database.yml 
```

然后`.gitignore`可以处理这些文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-24T07:21:51.853

如果在您在忽略文件中指定之前将“database.yml”添加到您的 git 存储库中，我认为您必须将其删除：

```
git rm config/database.yml
git commit -a -m "Removed database.yml" 
```

然后，在你的项目中添加 database.yml 文件，就可以正常工作了。

# iphone - 通配符 App ID 和 Bundle ID 命名

> ID：11145134
> 
> 赞同：1
> 
> 时间：2012-06-21T19:11:35.183
> 
> 标签：iphone, objective-c, ios, xcode

我创建了通配符 App ID，并且对我的应用程序的捆绑 ID 有效性有一些疑问。我没有公司；我以自己的名义出版。

1) 捆绑 ID“MyName.CoolAppName”是否有效？

2）还是我必须写“com.MyName.CoolAppName”？

3）或者我可以简单地使用“CoolAppName”吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:17:15.413

所有这些都是有效的，但是，人们通常使用反向域命名系统来创建 App ID 是有原因的。

要记住的最重要的事情是，任何人创建的每个 App ID 都必须是唯一的。因此，如果其他人已经创建了一个“CoolAppName”应用 ID，那么您将不走运。

大多数人使用标准的 com.companyname.appname，因为它易于阅读、标准化，而且几乎肯定是独一无二的。

以不同的方式命名您的 App ID 不会有很大的不同，但我建议遵循标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:16:12.070

**所有这些名称都是有效的，但您应该使用第二个，因为它是通用名称表示法，并且是唯一的。**

# editor - 最新的编辑器更新 - 还显示“.gs”作为文件类型 - 这是什么意思

> ID：11145135
> 
> 赞同：0
> 
> 时间：2012-06-21T19:11:36.073
> 
> 标签：editor, google-apps-script

我只是在脚本编辑器中。我注意到在每个文件名的末尾添加了“.gs”文件类型。然后我阅读了发行说明。

发行说明表明“滚动条”已添加到“树”文件结构中。从现在开始，我想知道文件类型的显示是否是“滑动”，或者文件类型是否会保持可见。

这是否表明脚本文件（类型“.gs）将成为 Doclist 屏幕的“创建”菜单中的独立条目，与电子表格分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:39:02.373

从观察来看，谷歌团队通常会在实施后发布信息。去年在 Google I/O 期间宣布了一些新功能。我们可能会在下周的 I/O 会议之后了解更多信息 :)

# java - 使用 BufferedReader 读取时忽略 HTTP Post 请求标头

> ID：11145137
> 
> 赞同：0
> 
> 时间：2012-06-21T19:11:48.940
> 
> 标签：java, http

我目前正在使用 BufferedReader 监听端口，例如：

```
ServerSocket ss = new ServerSocket(2346);

Socket s = ss.accept();
BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
while(true){
    inputLine = in.readLine();
    if(inputLine==null)
       break;
} 
```

现在我得到了所有的标题和所有的东西，比如：

```
POST /record HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: ""
Content-Length: 1969
Host: localhost:2346
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">... 
```

问题是我只需要 POST 请求的内容（上面的最后一行），那么是否有一个 Java 解析器可以做到这一点。在我对套接字的请求中，我需要提供一个额外的空行以允许正确读取它。有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:23:43.877

响应正文始终与响应标头相隔一个空行。您可以编写自己的解析器或使用像 HttpCore [http://hc.apache.org/httpcomponents-core-ga/这样的库](http://hc.apache.org/httpcomponents-core-ga/)

# jquery - HTML+jQuery - 替换 ID 的其他 HTML 属性

> ID：11145139
> 
> 赞同：1
> 
> 时间：2012-06-21T19:11:57.683
> 
> 标签：jquery, html

我有以下 HTML 问题。

**描述**

我正在构建一个“作者”页面，每个作者都有一个选项卡式系统。在一个选项卡中，我有简历，在另一个选项卡中，我有其他信息。

**HTML 代码：**

```
<div class="author-container"><img src="author-1.jpg" alt="">
  <ul>
    <li><a href="#inner-tab1">Bio</a></li>
    <li><a href="#inner-tab2">Other Info</a></li>
  </ul>
  <div id="inner-tab1">Bio copy</div>
  <div id="inner-tab2">Other Info copy</div>
</div>

<div class="author-container"><img src="author-2.jpg" alt="">
  <ul>
    <li><a href="#inner-tab1">Bio</a></li>
    <li><a href="#inner-tab2">Other Info</a></li>
  </ul>
  <div id="inner-tab1">Bio copy</div>
  <div id="inner-tab2">Other Info copy</div>
</div>

<div class="author-container"><img src="author-3.jpg" alt="">
  <ul>
    <li><a href="#inner-tab1">Bio</a></li>
    <li><a href="#inner-tab2">Other Info</a></li>
  </ul>
  <div id="inner-tab1">Bio copy</div>
  <div id="inner-tab2">Other Info copy</div>
</div> 
```

是的，您已经检测到问题：重复 ID（***inner-tab1***和***inner-tab2***）

尽管选项卡实际上工作正常，我当然可以保留这些重复的 ID，但我知道这不是正确的方法。

**问题**

所以我的问题是：是否有另一个 HTML 属性可以替换`id`标签但仍然可以使用标签？

**附加信息**

为了创建选项卡，我使用了 jQueryUI 框架，并且该框架`id`在容器中使用了一个特定的选项卡应该显示。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:15:43.787

使用类名，并将`id`s赋予`author-container`s。然后，您可以使用 选择元素`$("#joe .inner-tab-2")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:34:59.690

尽管这已经按原样实现，但唯一的解决方案是使用不基于 ID 的更简单的选项卡系统。

不幸的是，我无法实现更简单的选项卡，我不得不硬着头皮将重复的 ID 留在标记上。它确实有效，但远非理想。

学过的知识。

这些选项卡将是正确使用的选项卡：http: [//nuevvo.com/labs/simpletabs/](http://nuevvo.com/labs/simpletabs/)

感谢大家的意见。

# java - “Is Triangle Touching”代码没有给出正确的结果

> ID：11145141
> 
> 赞同：0
> 
> 时间：2012-06-21T19:12:11.460
> 
> 标签：java, 3d, trigonometry, lwjgl

我在碰撞检测代码中使用的代码是这样的：

（注：[`Vector3f`](http://www.lwjgl.org/javadoc/org/lwjgl/util/vector/Vector3f.html)是 LWJGL 库的一部分。）

（注2：Tri是由LWJGL的Vector3fs.v1、v2、v3三个组成的类。）

```
public Vector<Tri> getTrisTouching(Vector3f pos, float radius){
        Vector<Tri> tempVec = new Vector<Tri>();
        for(int i = 0; i < tris.size(); i++){
            Tri t = tris.get(i);

            Vector3f one_to_point = new Vector3f(0,0,0);
            Vector3f.sub(pos,t.v1,one_to_point);            //Storing vector A->P

            Vector3f one_to_two = new Vector3f(0,0,0);
            Vector3f.sub(t.v2,t.v1, one_to_two);            //Storing vector A->B

            Vector3f one_to_three = new Vector3f(0,0,0);
            Vector3f.sub(t.v3, t.v1, one_to_three);            //Storing vector A->C

            float q1 =  Vector3f.dot(one_to_point,  one_to_two) / one_to_two.lengthSquared();            // The normalized "distance" from a to
            float q2 =  Vector3f.dot(one_to_point,  one_to_three) / one_to_three.lengthSquared();            // The normalized "distance" from a to

            if (q1 > 0 && q2 > 0 && q1 + q2 < 1){
                tempVec.add(t);
            }
        }   

        return tempVec;
    } 
```

我的问题是如何正确查看空间中的一个点是否接触到我的三角形之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:19:37.930

要测试您的点是否在三角形内，请创建一条以测试点为原点的射线并将其延伸到无穷远。一个很好的简单方法是水平射线（例如 y 常数，并且 x 增加到无穷大。然后计算它与您的多边形边缘之一相交的次数。零或偶数个相交意味着您在三角形之外. 这样做的好处是它不仅适用于三角形，也适用于任何多边形。

[http://erich.realtimerendering.com/ptinpoly/](http://erich.realtimerendering.com/ptinpoly/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:18:25.267

我可以帮助您的唯一方法是向您提供此链接。不幸的是，我对 LWJGL 不是很好，`Geometry`所以你来了。-[矢量3f](http://www.lwjgl.org/javadoc/org/lwjgl/util/vector/Vector3f.html)

希望能帮助到你！如果是，请勾选答案以接受。

# android - 如何在android中制作ssh客户端

> ID：11145142
> 
> 赞同：6
> 
> 时间：2012-06-21T19:12:14.110
> 
> 标签：android, android-intent, ssh

我想使用像 connectbot 这样的 ssh 客户端制作一个 android 手机应用程序来监控路由器及其配置。监控应用程序已完成，但尚未设置。如果我使用连接机器人的意图，如何将 connectbot 与我在 Eclipse 中创建的 mya android 应用程序连接？谢谢 .....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:43:24.127

Connectbot 是开源的，因此如果许可证符合您的需求，您可以重复使用他们的代码：[http ://code.google.com/p/connectbot/](http://code.google.com/p/connectbot/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-06T16:22:00.437

你可以试试 termius 我认为它是 Mac、IOS 和 Android 上最好的 SSH 客户端

# excel - 宏自动查找列中的重复项，将新工作表导出给他们

> ID：11145143
> 
> 赞同：0
> 
> 时间：2012-06-21T19:12:14.770
> 
> 标签：excel, vba, duplicates

我正在制作一个可以自动查找重复发票/付款的电子表格。我已经设置了条件格式，它会自动突出显示一列中的重复条目。

我正在寻找一个可以帮助我完成以下任务的宏：

1.  将所有重复的条目移动到另一个工作表以供我查看
2.  删除新工作表上的重复条目，以便我可以通过 Autosum 进行计算

我是使用 Excel 的新手，我非常渴望学习。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T20:54:51.790

进行一般的重复搜索，

然后为所有重复项着色

选择具有该颜色的所有单元格并复制并粘贴到不同的工作表。

# coldfusion - 比较 mysql 查询和 sql 查询

> ID：11145147
> 
> 赞同：-5
> 
> 时间：2012-06-21T19:12:32.677
> 
> 标签：coldfusion

我更喜欢在 php 或 javascript 中操作数组和对象，并且几乎没有使用coldfusion。

我有一个查询从 mysql 中提取数据。我想存储结果列表或数组（或更简单的方法）

在循环从 msql 生成 html 输出的第二个查询时，我需要查看一个值是否包含在先前的 mysql 数组或列表中。

尝试过使用各种 cf 数组/列表方法，但真的不确定解决以下问题的最佳方法是什么`if`。CF版是9

```
<cfquery datasource="Mysql" name="premium_submitters">
  SELECT submitter_id from table  
</cfquery>
<!--- Need loop to store to array or list??--->

<cfquery datasource="Sql" name="main_data">
    SELECT * from table
</cfquery>

<cfoutput query="main_data">
    <cfif #submiiter_id# <!---is in Mysql array/list return boolean---> >

    </cfif>
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:32:16.843

使用[ValueList](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d19.html)将查询的一列的值放入列表中。

```
<cfquery datasource="Mysql" name="premium_submitters">
  SELECT submitter_id from table  
</cfquery>

<cfset submittersList = ValueList(premium_submitters.submitter_id)>

<cfquery datasource="Sql" name="main_data">
    SELECT * from table
</cfquery>

<cfoutput query="main_data">
    <cfif ListFind(submittersList, main_data.submitter_id) gt 0>
      <!--- is in list, do whatever --->
    </cfif>
</cfoutput> 
```

# android - 在 Android 中使用 LED 闪烁通知

> ID：11145148
> 
> 赞同：0
> 
> 时间：2012-06-21T19:12:35.170
> 
> 标签：android

我正在尝试在我的 Android 应用程序中使用闪烁的通知。当我使用

```
 notification.defaults |= Notification.DEFAULT_ALL; 
```

通知正在显示，但没有闪烁的 LED，只有声音和振动。

当我使用

```
 notification.defaults |= Notification.DEFAULT_VIBRATE;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_LIGHTS; 
```

通知根本没有显示。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-17T03:24:48.420

尝试这个：

```
 notification.flags |= Notification.DEFAULT_SOUND | Notification.FLAG_SHOW_LIGHTS 
```

# python - cx_freeze 从错误的位置复制 dll

> ID：11145149
> 
> 赞同：2
> 
> 时间：2012-06-21T19:12:35.933
> 
> 标签：python, python-3.x, cx-freeze

我正在使用`cx_freeze`在 64 位 Windows 下使用 python 3.2 x86 为简单的 PyQt 应用程序生成 exe。

问题是，虽然`cx_freeze`将所有依赖项完美地复制在一起，但出于某种奇怪的原因，它没有使用`QtCore4.dll`我的 python 安装中的，而是执行以下操作：

```
copying D:\Python\Python 3.2 x86\lib\site-packages\PyQt4\QtCore.pyd -> build\exe.win32-3.2\PyQt4.QtCore.pyd
copying C:\Program Files\MiKTeX 2.9\miktex\bin\x64\QtCore4.dll (!!) -> build\exe.win32-3.2\QtCore4.dll 
```

现在，如果我正在创建 64 位版本（尽管仍然不完美），这不是什么大问题，但显然 64 位 dll 不适用于我的 32 位 exe。那么如何`cx_freeze`停止在我的系统路径中查找 dll，而是让它`sys.path`在我的控制中搜索或其他路径？

我尝试将`path`选项设置为`sys.path`明确但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:19:50.397

根据提供的数据，我至少可以看到 3 个选项：

1) 您可以使用您希望从进程中排除的路径将选项添加`bin-path-excludes`到文件中。`build_exe`具体到您的示例：

```
bin-path-excludes: ["C:\Program Files\MiKTeX 2.9\miktex\bin\x64",] , 
```

2) 永久重新排列 PATH，以便 miktex 条目晚于您要使用的 QtCore4.dll 导入。（这可能会导致它无法成为可行的选项）

3) 将对 cx_freeze 的调用包装在批处理（或 shell）脚本中，并在调用 cx_freeze 脚本之前在脚本中操作 PATH。

对于这种情况，我在网上找不到任何示例，因此我的研究基于阅读 cx_freeze 源代码。很可能有一种更优雅的技术，但从文档和源代码中都看不出来。

# c++ - 为什么我在使用 fprintf 的 C 代码中会收到警告？

> ID：11145156
> 
> 赞同：4
> 
> 时间：2012-06-21T19:13:16.290
> 
> 标签：c++, c, xcode, string-formatting

```
fprintf(pFile,msg.c_str()); 
```

为什么我在 Xcode 中收到警告：

```
Format string is not a string literal (potentially insecure) 
```

我假设我收到此警告以防止攻击是 msg 包含一些内容，例如`%s`将堆栈流到屏幕直到它到达空终止。`fprintf`在这种情况下有什么安全的使用方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T19:16:22.617

您可以提供格式字符串，

```
fprintf(pFile, "%s", msg.c_str()); 
```

或使用`fputs`，

```
fputs(msg.c_str(), pFile); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T19:20:55.050

您的编译器警告您的原因是，如果用户能够以某种方式将 msg 的内容影响到可以放入自己的格式说明符的范围内，那么您打印字符串的方式可能会导致称为“格式字符串漏洞”的漏洞（“%n”等）。建议的答案 (fprintf(pFile, "%s", msg.c_str());) 解决了这个问题，因为格式字符串现在是恒定的。

您可以在此处阅读有关格式字符串漏洞的更多信息：http: [//julianor.tripod.com/bc/formatstring-1.2.pdf](http://julianor.tripod.com/bc/formatstring-1.2.pdf)

# python - worksheet.iter_rows() 没有从电子表格中提取任何数据

> ID：11145157
> 
> 赞同：1
> 
> 时间：2012-06-21T19:13:22.163
> 
> 标签：python, excel, openpyxl

我有一个使用 openpyxl 的 iter_rows 函数解析的数据电子表格。但是，当我使用以下方法遍历工作表时：

```
range_expr = "{col}{startrow}:{col}{endrow}".format(col='C',startrow=4,endrow=ws.get_highest_row()+1)

for row in ws.iter_rows(range_string=range_expr):
    print row
    if len(row) > 0:
        cell = row[0]
        if str(cell.value).isdigit():
            address.append(cell.value)
        else:
            continue
print address
raw_input("enter to continue") 
```

第 3 行只是吐出空括号，这意味着第一个 if 语句将始终评估为 false，并且不会将任何值附加到地址。我感到困惑的是`print row`，当excel文档中有数据时，为什么什么都不做。提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:06:41.127

我把事情复杂化了，把它简化为这个。非常感谢 Python 聊天室中的 notbad.jpg：

```
range_expr = 'C:C'

for row in ws.iter_rows(row_offset=4):
    '''do things''' 
```

# javascript - 通过从构造函数返回现有实例来实现 javascript 实例存储

> ID：11145159
> 
> 赞同：6
> 
> 时间：2012-06-21T19:13:27.093
> 
> 标签：javascript, backbone.js

我正在尝试在 Backbone.js 中实现我的“实例存储”版本，如 Soundcloud 在他们最近的博客文章中所述：

[http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/)

相关摘录：

为了解决这个问题，我们使用了一个我们称为实例存储的构造。此存储是一个对象，每次调用模型的构造函数时都会隐式访问和修改它。当第一次构建模型时，它会将自己注入到 store 中，使用它的 id 作为唯一键。如果使用相同的 id 调用相同的模型构造函数，则返回原始实例。

```
var s1 = new Sound({id: 123}),
    s2 = new Sound({id: 123});

s1 === s2; // true, these are the exact same object. 
```

这是因为 Javascript 的一个鲜为人知的特性。如果构造函数返回一个对象，那么这就是分配的值。因此，如果我们返回对先前创建的实例的引用，我们将获得所需的行为。在幕后，构造函数基本上是这样做的：

```
var store = {};

function Sound(attributes) {
    var id = attributes.id;

    // check if this model has already been created
    if (store[id]) {
        // if yes, return that
        return store[id];
    }
    // otherwise, store this instance
    store[id] = this;
} 
```

我通过重写 Backbone.Model 类来创建我自己的构造函数来实现我的版本。

```
var MyModel = Backbone.Model.extend({
    constructor: function (attributes, options) {
        var id = attributes ? attributes.id : undefined;

        if (this.store[id]) {
            return this.store[id];
        }

        Backbone.Model.prototype.constructor.apply(this, arguments);

        if (id) {
            this.store[id] = this;
        }
    }
});

var MyOtherModel = MyModel.extend({
    store: {},

    //other model stuff
}); 
```

这工作得很好，但一定发生了一些变化，现在它停止工作了，我不确定为什么。新创建的实例毫无问题地存储在存储对象中 - 每个扩展 MyModel 类的类都有自己的空存储，以避免具有相同 id 的不同类型的实例发生冲突。当使用现有 id 调用构造函数时，也可以毫无问题地检索正确的实例，但是当它们从构造函数返回时，返回值将被忽略。我对规范的理解是，构造函数可以返回一个对象——但不能返回一个原始对象——并且当使用 new 运算符调用构造函数时，返回的对象将被分配到赋值语句的左侧。这不会发生，即使构造函数返回一个对象，

一些调试信息。不确定这些信息会有多大帮助。这是第一次实例化对象的 MyModel 构造函数中的“this”。

```
child
    _callbacks: Object
    _escapedAttributes: Object
    _previousAttributes: Object
    _setting: false
    attributes: Object
        id: "4fd6140032a6e522f10009ac"
        manufacturer_id: "4f4135ae32a6e52a53000001"
        name: "Tide"
        uniqueName: "tide"
    __proto__: Object
    cid: "c50"
    collection: child
    id: "4fd6140032a6e522f10009ac"
    __proto__: ctor
        constructor: function (){ parent.apply(this, arguments); }
        defaults: Object
        store: Object
        url: function () {
        urlRoot: function () {
        __proto__: ctor 
```

当它是从实例存储返回的对象时，这是 MyModel 构造函数中的“this”：

```
child
    _callbacks: Object
    _escapedAttributes: Object
    _previousAttributes: Object
    _setting: false
    attributes: Object
        _validate: function (attrs, options) {
        bind: function (events, callback, context) {
        change: function (options) {
        changedAttributes: function (diff) {
        clear: function (options) {
        clone: function () {
        constructor: function (){ parent.apply(this, arguments); }
        defaults: Object
        destroy: function (options) {
        escape: function (attr) {
        fetch: function (options) {
        get: function (attr) {
        has: function (attr) {
        hasChanged: function (attr) {
        idAttribute: "id"
        initialize: function (){}
        isNew: function () {
        isValid: function () {
        manufacturer_id: 0
        name: ""
        off: function (events, callback, context) {
        on: function (events, callback, context) {
        parse: function (resp, xhr) {
        previous: function (attr) {
        previousAttributes: function () {
        save: function (key, value, options) {
        set: function (key, value, options) {
        store: Object
        toJSON: function () {
        trigger: function (events) {
        unbind: function (events, callback, context) {
        unset: function (attr, options) {
        url: function () {
        urlRoot: function () {
        __proto__: Object
        cid: "c141"
     __proto__: ctor
        constructor: function (){ parent.apply(this, arguments); }
        defaults: Object
        store: Object
        url: function () {
        urlRoot: function () {
        __proto__: ctor 
```

我注意到的是，第二个中的属性对象包含其中包含的主干对象的所有方法，它们不应该是。它也没有id，我也不知道为什么。希望这能提供一些见解。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:32:11.200

我不会为此使用扩展，我认为拥有一个单独的“工厂”是正确的想法。它将允许您扩展模型而不必担心副作用。

从带[注释的源](http://backbonejs.org/docs/backbone.html#section-160)主干中，扩展了一些奇怪的东西，我还没有完全理解它。（也检查[继承](http://backbonejs.org/docs/backbone.html#section-174)）所以让我们现在跳过它并坚持你的工作解决方案。

我已经修改了您生成工厂模型的方法，您应该能够像普通模型一样使用它们（例如，将它们设置在集合上），除非扩展它们不起作用。他们还将处理使用新数据更新您的模型，就像 soundcloud 示例一样。

```
var makeStoreable = function(model){
  var StoreModel = function(attr, opt){
    if(!attr || !attr.id){
      // The behavior you exhibit here is up to you
      throw new Error('Cool Models always have IDs!');
    }
    if(this.store[attr.id]){
      this.store[attr.id].set(attr, opt);
    }else{
      var newModel = new model(attr, opt);
      this.store[attr.id] = newModel;
    }
    return this.store[attr.id];
  };
  StoreModel.prototype.store = {};
  return StoreModel;
};

var CoolModel = Backbone.Model.extend({});

CoolModel = makeStoreable(CoolModel);

var a = new CoolModel({
    id: 4,
    coolFactor: 'LOW'
});

var b = new CoolModel({
    id:4,
    coolFactor: 'HIGH'
});

console.log(a===b); //true!
console.log(a.get('coolFactor') === 'HIGH'); //true! 
```

这是一个可以玩[的小提琴。](http://jsfiddle.net/N5tRZ/9/)

另外，我欢迎有人提出一个模型解决方案，将“存储”保留在模型实例的原型中。同样为了防止内存泄漏，我们可能应该在工厂或模型本身上创建一个引用计数销毁方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:00:19.370

@wizard 的方法看起来非常漂亮和干净。对此+1。

它在 SoundCloud 中的实现方式是重写`Backbone.Model.extend`方法以使用我们修改的构造函数和闭包中的存储来创建一个类。store 最初是在一个闭包中创建的，以保持类的接口干净，但一段时间后发现它对调试很有用，可以引用每个类的 store，所以它也附在了那里。

我们确实有一个引用计数，因此内存使用量不会爆炸，并且还让类能够定义一个自定义函数，该函数给出唯一值来识别它。大部分时间`id`就足够了，但在某些极端情况下它并不完全奏效。

> 我欢迎有人提出一个模型内解决方案，将“存储”保留在模型实例的原型中

你可以做`myInstance.constructor.store`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:34:21.857

使用@reconbot 解决方案后，我发现它破坏了 instanceof 运算符：

```
(new CoolModel) instanceof CoolModel // FALSE!!! 
```

和

```
var MyModel = Backbone.Model.extend({
    idAttribute: 'myId'
});
new MyModel({ myId: 1 }) === new MyModel({ myId: 1 }) // FALSE! 
```

我开发了一个新版本，它使用模型自己的 id 属性（通过 idAttribute）并使用 instanceof 并允许您扩展工厂：

[小提琴](http://jsfiddle.net/amatiasq/N5tRZ/16/)

```
function makeStoreable(model) {
    var store = {};
    var idField = model.prototype.idAttribute;

    function ModelFactory(attr, opt) {
        if (!attr || !(idField in attr)) {
            throw new Error('Cool Models always have IDs!');
        }

        var id = attr[idField];

        if (store.hasOwnProperty(id)) {
            store[id].set(attr, opt);
        } else {
            model.call(this, attr, opt);
            store[id] = this;
        }

        return store[id];
    }

    function intermediate() {}
    intermediate.prototype = model.prototype;
    ModelFactory.prototype = new intermediate;

    // Only EcmaScript5!
    // ModelFactory.extend = model.extend.bind(model);
    ModelFactory.extend = function() {
        return model.extend.apply(model, arguments);
    };

    return ModelFactory;
} 
```

和测试：

```
var RareID = Backbone.Model.extend({
    idAttribute: '_myOwnServerId'
});
RareID = makeStoreable(RareID);

var a = new RareID({
    _myOwnServerId: 4,
    coolFactor: 'LOW'
});

var b = new RareID({
    _myOwnServerId: 4,
    coolFactor: 'HIGH'
});

console.log(a===b); //true!
console.log(a instanceof RareID); //true!
console.log(a.get('coolFactor') === 'HIGH'); //true! 
```

:)

# sql - SQL 自联接是实现“查找”的最佳方式吗？

> ID：11145160
> 
> 赞同：0
> 
> 时间：2012-06-21T19:13:27.040
> 
> 标签：sql, sas

我正在运行一个 SQL 查询，它自连接同一个表 24 次，以便根据 24 个不同的条件“查找”表的特定行，以便我可以在计算中使用所有这些值。虽然性能非常好（表已编入索引且连接条件受到限制），但我不禁觉得这里有一股代码味道。

有没有更好的方法在 SQL 中进行查找？

（抱歉没有包括一个例子；我希望我已经以一般的方式表达了这个问题）。

编辑：无论如何尝试一个例子：

```
CREATE TABLE key (
    pk1 int,
    pk2 int,
    pk3 int,
    PRIMARY KEY (pk1, pk2, pk3)
);

CREATE TABLE values (
    pk1 int,
    pk2 int,
    pk3 int,
    pk4 int,
    pk5 int,
    value int,
    PRIMARY KEY (pk1, pk2, pk3, pk4, pk5)
 );

 SELECT k.pk1, k.pk2, k.pk3,
        v1.value + v2.value - v3.value * (v4.value / v5.value) + ... + v24.value as result
 FROM key k
     LEFT JOIN values v1
         on v1.pk1=k.pk1
         and v1.pk2=k.pk2
         and v1.pk3=k.pk3
         and v1.pk4=100
         and v1.pk5=200

     LEFT JOIN values v2
         on v2.pk1=k.pk1
         and v2.pk2=k.pk2
         and v2.pk3=k.pk3
         and v2.pk4=400
         and v2.pk5=800

     ...

     LEFT JOIN values v24
         on v24.pk1=k.pk1
         and v24.pk2=k.pk2
         and v24.pk3=k.pk3
         and v24.pk4=900
         and v24.pk5=700; 
```

编辑2：这种结构的原因是值表代表（从数学上讲）5个变量的函数，预先计算的返回值存储在表中，用于各种参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:20:13.593

首先，这根本不是自加入。

自联接是指将表与自身联接。

这方面的例子是层次结构中的父子关系以及与其他人有关系的人（字面意思是父母，孩子）。

您在不同角色中使用表的情况并不少见。

如果表中的不同值在某种基本性质上不相关，那么作为“一个真正的查找”的情况，我会遇到设计问题，在这种情况下，可以使用类型代码存储各种实体查找 - 所以您可以在同一个查找表中获得帐单地址、客户、送货地址、产品和各种各样的东西。

在数据仓库中，也可以在不同的角色中使用维度，特别是日期或时间维度。

如果对于用作数组的列（例如 first_child、second-child、third_child）一遍又一遍地连接同一个查找表，则会产生异味，因为这通常违反规范化。

我对您在此处显示的内容的唯一担忧是：

似乎用于在所有值的 5 维空间中选择一个 3 维空间的幻数。我假设这些本身是在某处的表中定义的（pk4、pk5、描述）。

那时我会考虑将每一个都变成一个视图，以使其更具可读性。

在 SQL Server（或具有相同结构的 DB2）中，我实际上会考虑使用在 pk4 和 pk5 上参数化的内联表值函数，这将有助于防止某人意外加入不完整的联接条件 - 并最终得到一个 ITVF 而不是多个视图。

但这一切都只是简单的清理——查询和表的设计对我来说似乎很合理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:52:22.330

我已经开始用一个完整的查找表示例来回答这个问题，但我意识到还有一个更大的潜在问题。

查看这些参考资料。

[http://en.wikipedia.org/wiki/Entity-attribute-value_model](http://en.wikipedia.org/wiki/Entity-attribute-value_model)

[关系数据库中的键值对](https://stackoverflow.com/questions/126271/key-value-pairs-in-relational-database)

您正在使用的模式类型与关系数据库的想法相反。尝试展平您的表格，这样您就没有键/值关系。

如果您的方程是一个非常规聚合（是的，不要查找那个），例如 v1.val + v2.val / v3.val，那么您希望将该方程中的每个变量都放在一个单一的一个或多个（但少于 24 个）连接后在一个或多个表中的行。

实体-属性-值模式的性能很差，维护困难，而且真的很糟糕。

...

那没有回答问题，所以这里。使用 Icarus 在评论中建议的视图，或者烧掉整个东西并重建一些更规范的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T06:47:11.510

看到您正在使用 SAS，您可能会使用数据步骤合并对其进行一些清理。类似于以下内容：

```
data x;
  merge key 
        values(rename=value=value1 where=(pk4=100 and pk5=200))
        values(rename=value=value2 where=(pk4=400 and pk5=800))
        values(rename=value=value3 where=(pk4=900 and pk5=700))
        etc...
        ;
  by pk1 pk2 pk3;
  result = ...;
  keep pk: value: result;
run; 
```

现在我面前没有 SAS，所以我不打算输入所有代码并对其进行测试，但你明白了。对我来说，我认为它看起来比 SQL 干净得多。当 datastep 合并提供比 SQL 方法更好的替代方案时，这是一个非常罕见的发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:15:23.707

如果我了解您要查找的内容，则使用起来会更容易：

```
SELECT field1, field2 from Table1 t
where exists (SELECT 1 from LookupTable l where l.fieldX=t.fieldX) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T21:40:58.493

我已将 pk4、pk5 的参数对枚举为 num（我将实际数字替换为 4*6）：

```
CREATE TABLE zparams
        ( num INTEGER
        , pk4 INTEGER
        , pk5 INTEGER
        , PRIMARY KEY (pk4,pk5)
        , CONSTRAINT ze_other UNIQUE (num)
        );
INSERT INTO zparams(num,pk4,pk5) VALUES
 (1,1,1), (2,1,2), (3,1,3), (4,1,4), (5,1,5), (6,1,6)
, (7,2,1), (8,2,2), (9,2,3), (10,2,4), (11,2,5), (12,2,6)
, (13,3,1), (14,3,2), (15,3,3), (16,3,4), (17,3,5), (18,3,6)
, (19,4,1), (20,4,2), (21,4,3), (22,4,4), (23,4,5), (24,4,6)
        ; 
```

CTE 的收益是徒劳的：

```
EXPLAIN ANALYZE
WITH zzz AS (
        SELECT v.pk1 AS pk1
        , v.pk2 AS pk2
        , v.pk3 AS pk3
        , p.num AS num
        , v.value AS value
        FROM zparams p
        JOIN zvalues v ON v.pk4 = p.pk4 AND v.pk5=p.pk5
        )
 SELECT k.pk1, k.pk2, k.pk3,
        v1.value + v2.value - v3.value * (v4.value / v5.value) + v24.value as result
 FROM zkeys k
     LEFT JOIN zzz v1
         ON v1.pk1=k.pk1 AND v1.pk2=k.pk2 AND v1.pk3=k.pk3
         AND v1.num=1

     LEFT JOIN zzz v2
         ON v2.pk1=k.pk1 AND v2.pk2=k.pk2 AND v2.pk3=k.pk3
         AND v2.num=2

     LEFT JOIN zzz v3 ON v3.pk1=k.pk1 AND v3.pk2=k.pk2 AND v3.pk3=k.pk3
         AND v3.num=3

     LEFT JOIN zzz v4
         ON v4.pk1=k.pk1 AND v4.pk2=k.pk2 AND v4.pk3=k.pk3
         AND v4.num=4

     LEFT JOIN zzz v5
         ON v5.pk1=k.pk1 AND v5.pk2=k.pk2 AND v5.pk3=k.pk3
         AND v5.num=5

     LEFT JOIN zzz v24
         ON v24.pk1=k.pk1 AND v24.pk2=k.pk2 AND v24.pk3=k.pk3
         AND v24.num=24
        ; 
```

而且，在 100K*24 变量（6used）上进行测试，-实际上- CTE 在 {pk1,pk2,pk3,pk4=constant,pk5=constant} 上的表现比普通连接（1 秒）差（4.5 秒）。但是，至少它*看起来*更干净。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T07:08:38.967

作为我上述答案的替代方案，您还可以执行以下操作，我相信：

```
CREATE TABLE XX AS 
SELECT k.pk1, k.pk2, k.pk3, v1.pk4, v1.pk5, v1.value
     FROM key k
 LEFT JOIN values v1
     on v1.pk1=k.pk1
     and v1.pk2=k.pk2
     and v1.pk3=k.pk3
     and ( 
          (v1.pk4=100 and v1.pk5=200) or
          (v1.pk4=400 and v1.pk5=800) or
          (v1.pk4=700 and v1.pk5=900) 
         )

proc transpose data=xx out=trans;
  by pk1 pk2 pk3;
  var value;
run;

data result;
  set trans;
  result = ...;
run; 
```

再说一次，我面前没有 SAS，所以我无法测试它，但我相信你明白了。这样，您只需进行一次连接，然后将其余部分分解为其他步骤。我不太确定这将如何执行，因为它可能不再使用索引。只是抛出一些想法在那里......

# ios - 在 CoreAudio AudioUnits（和更多）中移动八度音阶

> ID：11145166
> 
> 赞同：1
> 
> 时间：2012-06-21T19:13:46.250
> 
> 标签：ios, macos, core-audio, audiounit

如何在音频缓冲区级别上向上或向下移动 Octave？或者有这个库函数吗？是否有用于确定音频文件某些属性的库或可能允许的（iOS）第 3 方库？例如 BPM、Key 等。或者如何确定这些东西？如何区分音频缓冲区中的节拍？如何从音频数据中提取音频的关键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:10:16.877

对于在 iOS 设备上将音高移动一个八度，目前没有内置的音频单元功能。但似乎有一些可用的商业时间音高修改库，例如来自 Dirac 的一个。

似乎有一些名为音高检测器的开源 iOS DSP 代码；但是，请注意，因为其中一些代码似乎只擅长 FFT 频率估计，而在许多情况下，这在音乐音高和键估计方面很差。寻找使用自相关、倒谱分析或其他更高级方法的音高检测/估计代码。

对于 BPM 估计，请参阅以下问题的答案：[如何在 php 中检测歌曲的 BPM](https://stackoverflow.com/questions/657073/how-to-detect-bpm-of-the-song-by-programming)和[来自实时音频输入的每分钟节拍数](https://stackoverflow.com/questions/79445/beats-per-minute-from-real-time-audio-input)。

以上都不是微不足道的，做好这件事可能仍然被认为是DSP和音乐信号处理的研究生级研究课题。

更新：iOS 6 包括 AUNewTimePitch 音频单元，它可以进行非高质量的时间音高修改以将音高移动 2 倍。

# llvm - llvm：从“调用”指令中获取函数

> ID：11145171
> 
> 赞同：5
> 
> 时间：2012-06-21T19:14:18.090
> 
> 标签：llvm

考虑 llvm 指令：

```
%call3 = call i32 @square(i32 %1) 
```

是否可以提取指向“square”函数的指针？

谢谢 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T08:16:26.047

有[`Function* CallInst::getCalledFunction() const`](http://llvm.org/doxygen/classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e)方法。

# ios - 通过 segue 进行故事板 iOS 5 模型对话框

> ID：11145173
> 
> 赞同：0
> 
> 时间：2012-06-21T19:14:23.157
> 
> 标签：ios

我有以下代码：

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc]   
initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self    
action:@selector(showAddNewView)];

- (void) showAddNewView
{
    [self performSegueWithIdentifier:@"addNew" sender:self];
} 
```

segue 执行得很好，但视图应该在顶部有一个导航栏，标题为“添加新配方”。但它不显示那部分。如果我将转换更改为推送，它看起来很好。

这是我的场景：

![在此处输入图像描述](../Images/b6980d3f33a2d76a5bef5c5011425ba5.png)

有任何想法吗？

编辑：我的答案有问题，我有它的工作，但现在它又崩溃了......

![场景](../Images/50a301b961358f559d864f3d4d3fd10f.png)

![在此处输入图像描述](../Images/d7f0e28f9b2d9571a4e622fa7184110b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:17:57.807

Modal segues 在当前使用的任何东西之上带来了一个全新的视图控制器。如果您希望新视图控制器具有具有该默认行为的导航栏，则需要使从模态转换中出现的根视图控制器成为导航控制器。

# linux - 什么东西正在消耗内存并且在 ps 输出中不可见？

> ID：11145183
> 
> 赞同：-1
> 
> 时间：2012-06-21T19:15:04.387
> 
> 标签：linux, memory

Free 表示使用了大约 2GiB 的内存：

```
[23:05:38] vvs@ratatoskr ~ % free -m
             total       used       free     shared    buffers     cached
Mem:          3919       2790       1129          0         35        687
-/+ buffers/cache:       2066       1852
Swap:         2109        153       1955 
```

**但是ps aux**显示的所有进程的已用内存总和小于 1GiB。

唯一安装的 tmpfs 包含 176KiB。

剩下的 1+GiB 在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:31:21.110

尝试运行`top`，然后点击`M`（大写 m），根据内存使用情况对进程进行排序。

如果这没有帮助，如果可能是缓存内存（即使`free`没有显示它），即由程序分配并再次释放的内存，但操作系统还没有清理它（因为其他程序没有'没有请求太多内存）。

# php - 在不知道一对关联数组中的键的情况下获取价值

> ID：11145185
> 
> 赞同：22
> 
> 时间：2012-06-21T19:15:13.187
> 
> 标签：php, arrays, associative-array

有一个**只有一**对的关联数组`key=>value`。

我不知道它的关键，但我需要得到它的价值：

```
$array = array('???' => 'value');
$value = // ?? 
```

`$array[0]`不起作用。

我怎样才能得到它的价值？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-21T19:17:53.130

您还可以执行以下任一函数来获取值，因为数组中只有一个元素。

```
$value = reset( $array);
$value = current( $array);
$value = end( $array); 
```

另外，如果你想使用`array_keys()`，你需要这样做：

```
$keys = array_keys( $array);
echo $array[ $keys[0] ]; 
```

获得价值。

作为更多选项，您还可以使用`array_pop()`or`array_shift()`来获取值：

```
$value = array_pop( $array);
$value = array_shift( $array); 
```

最后，可以`array_values()`用来获取数组的所有值，然后取第一个：

```
$values = array_values( $array);
echo $values[0]; 
```

* * *

当然，还有很多其他选择；有些傻，有些有用。

```
$value = pos($array);
$value = implode('', $array);
$value = current(array_slice($array, 0, 1));
$value = current(array_splice($array, 0, 1));
$value = vsprintf('%s', $array);
foreach($array as $value);
list(,$value) = each($array); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T19:16:06.860

[`array_keys()`](http://php.net/manual/en/function.array-keys.php)会给你钥匙

```
$keys = array_keys($array);
echo $array[$keys[0]]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T19:17:38.540

你想要的是检索第一个项目？

```
$value = reset($array);
$key = key($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:19:12.610

你应该使用 array_values

```
$newArray = array_values($array);
echo $newArray[0]; 
```

# visual-studio-2010 - 为自定义语言编写文本编辑器

> ID：11145203
> 
> 赞同：0
> 
> 时间：2012-06-21T19:16:14.457
> 
> 标签：visual-studio-2010

我正在考虑为 VS 2010 编写一个插件，它只是一个文本编辑器，因此应该自动继承 VS 编辑器的基本功能，例如为一行代码添加书签、添加 TODO 等......但是我的关键字自定义语言不同。所以我想知道创建这样一个东西的起点是什么？是否有某种我可以使用的编辑器，然后它有一些地方可以为它定义我的关键字？一些一般性的想法和起点提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:46:47.973

您可能想查看 SharpDevelop（.net 中的开源 IDE，具有一些非常漂亮的功能）： http: [//www.icharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/)

如果您想坚持使用 VS 2010，那么这篇文章可能是一个不错的起点：http: [//msdn.microsoft.com/en-us/library/bb685514](http://msdn.microsoft.com/en-us/library/bb685514)

# jquery - jQuery图像遮罩/定位

> ID：11145205
> 
> 赞同：1
> 
> 时间：2012-06-21T19:16:22.290
> 
> 标签：jquery, jquery-ui, draggable

我们希望人们能够通过在固定大小的 div 中拖动图像来创建上传图像的缩略图版本。图像位置将保存在数据库中。

使用以下代码，图像是可拖动的，并且不会将自身定位在包含的 div 之外。

我的问题是最终的 x 和最终的 y 位置没有达到我们期望的数字。如果图像位于包含 div 左上角的照片的左上角，我们期望 x 和 y 为 0 和 0。现在 x 显示 59 而 y 是 51。所以 x 和 y 当前基于页面上的位置，而不是包含的 div。

我认为这是一个简单的解决方法，但我已经躲了好几个小时了。

```
$(document).ready(function() {
$("#drag").draggable({cursor: 'move',drag: function(){
        var position = $(this).position();
        var xPos = position.left;
        var yPos = position.top;
        $('#posX').text('x: ' + xPos);
        $('#posY').text('y: ' + yPos);
    },
    stop: function(){
        var finalPosition = $(this).position();
        var finalxPos = finalPosition.left;
        var finalyPos = finalPosition.top;

        $('#finalX').text('Final X: ' + finalxPos);
$('#finalY').text('Final Y: ' + finalyPos);
    }
}).bind('dragstop', function(e, ui) {
    if (ui.position.top > 0) {
        $(this).css('top', 0);
    }
    if (ui.position.left > 0) {
        $(this).css('left', 0);
    }

    var bottom = -($(this).height() - $(this).parent().height()),
    right  = -($(this).width() - $(this).parent().width());

    if (ui.position.top < bottom) {
        $(this).css('top', bottom);
    }
    if (ui.position.left < right) {
        $(this).css('left', right);
    }
});
}); 
```

这是HTML

```
<body>
<div id="container">
<div class="imageBox">
    <img id="drag" src="images/chicago.jpg">
</div>
</div>

<ul>
    <li id="posX"></li>
    <li id="posY"></li>
    <li id="finalX"></li>
    <li id="finalY"></li>
</ul>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script src="js/imagePositioning.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:23:44.247

[.offset()](http://api.jquery.com/offset/)是相对于页面的，而不是相对于容器的。您想使用[.position()](http://api.jquery.com/position/)。

这是[.offset()](http://api.jquery.com/offset/)手册页中的相关内容：

> .offset [()](http://api.jquery.com/offset/)方法允许我们检索元素**相对于文档**的当前位置。将此与 [.position()] (http://api.jquery.com/position/) 进行对比，后者检索 **相对于偏移量 parent**的当前位置。

# java - 所有偶数斐波那契数代码的总和永远不会停止 - Java

> ID：11145207
> 
> 赞同：0
> 
> 时间：2012-06-21T19:16:32.663
> 
> 标签：java, while-loop, fibonacci

这是来自项目 Euler，问题 2。我编写了以下看似无辜的代码：

```
public class FibonacciEven {
    public static void main(String[] stuff) {
        long sum = 0;
        int i = 0;
        while(fib(i) <= 40) {
            boolean even = fib(i) % 2 == 0;
            if(even) {
                sum += fib(i);
            }
            else {
                continue;
            }
            i++;
        }
        System.out.println(sum);
    }
    public static long fib(int n) {
        long prev1 = 0;
        long prev2 = 1;
        for(int i = 0; i < n; i++) {
            long savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1 + prev2;
        }
        return prev1;
    }
} 
```

我确实读过关于计算斐波那契数的 Java 方法是如何占用大量内存的，但是，正如您所看到的，我将限制缩小到*40*，但它仍然没有到最后，所以我假设我有得到了一些严重错误的语法。哪一点代码使它永远运行？如果所有这一切真的是由于该方法需要花费大量时间来运行，那么任何人都可以提出更好的方法吗？

编辑：好的，现在我的代码如下所示：

```
public class FibonacciEven {
    public static void main(String[] stuff) {
        long sum = 0;
        int i = 0;
        while(fib(i) <= 40) {
            boolean even = fib(i) % 2 == 0;
            if(even) {
                sum += fib(i);
            }
            i++;
        }
        System.out.println(sum);
    }
    public static long fib(int n) {
        long prev1 = 0;
        long prev2 = 1;
        for(int i = 0; i < n; i++) {
            long savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1 + prev2;
        }
        return prev1;
    }
} 
```

这次它忽略了斐波那契数列中的 2（索引 3）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:18:58.387

如果`even`是假的，你最终会继续而不更新`i`- 所以它会再次循环并再次做完全相同的工作，所以`even`会再次是假的，等等......

我怀疑你只是想拿出`else`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:22:45.850

你也每次都重做很多工作。我建议您记住之前计算的值。那和递归是你的朋友。

![在此处输入图像描述](../Images/8fed157eb1d5b6b7cf160776b0028b3a.png)

我会说这比每次循环都要有效得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:22:20.847

您总是可以尝试以更有效的方式计算数字。这是一个很好的描述如何做到这一点：http `O(nlogn)`: [//blog.codility.com/2012/03/omicron-2012-codility-programming.html](http://blog.codility.com/2012/03/omicron-2012-codility-programming.html)

（此链接中的问题要复杂得多，但计算斐波那契数的方法是相同的）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-21T19:22:56.723

我认为问题最初是针对 i=0 的情况，它布尔返回 false 并且它正在执行
else 部分，尝试在 if 或 else 中增加 i 值。

```
if(even) {
            sum += fib(i);
i++;
        }
        else {
      continue;
  i++;
      } 
```

# android - Android 在 LinearLayout 中添加搜索栏

> ID：11145209
> 
> 赞同：1
> 
> 时间：2012-06-21T19:16:33.987
> 
> 标签：android, android-layout

我正在尝试在 android 应用程序中以编程方式添加 SeekBar。

这是我的代码：

```
SeekBar seekbar = new SeekBar(this);
    seekbar.setMax(6);
    seekbar.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT));
    LinearLayout linearLayout =  (LinearLayout) findViewById(R.id.linearLayout1);
    linearLayout.addView(seekBar); 
```

但是，当调用 addView 方法时，我得到了这个异常

```
06-21 22:11:26.286: E/AndroidRuntime(13354): java.lang.RuntimeException: Unable to start activity   ComponentInfo{com.T4J_OAuth.activities/com.T4J_OAuth.activities.ExampleTabActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.T4J_OAuth.activities/com.T4J_OAuth.activities.feedbackActivity}: java.lang.NullPointerException 
```

我是不是对代码做错了什么。请注意，我尝试添加 seekBar 的活动是包含选项卡的父活动的一部分。因此，此活动是选项卡之一。

这是我的反馈活动类

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.feedback_form)

    String unitName = "Unit:" + ExampleTabActivity.unitName;
    final TextView textViewToChange = (TextView) findViewById(R.id.textView1);
    textViewToChange.setText(unitName);

    String lectureName = "Lecture:" + ExampleTabActivity.lectureName;
    final TextView textViewToChange2 = (TextView) findViewById(R.id.textView2);
    textViewToChange2.setText(lectureName);

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, ExampleTabActivity.subsections);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    SeekBar seekbar = new SeekBar(this);
    seekbar.setMax(6);
    seekbar.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT));*/
    LinearLayout linearLayout =  (LinearLayout) findViewById(R.id.linearLayout1);
    linearLayout.addView(seekBar);
} 
```

创建选项卡的 TabActivity 的这一部分

```
TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;

    Intent newIntent = new Intent().setClass(this, feedbackActivity.class);

    spec = tabHost
            .newTabSpec("structured")
            .setIndicator(createTabView(this, "Structured"))
            .setContent(newIntent);

    tabHost.addTab(spec);

    Intent newIntent2 = new Intent().setClass(this, feedbackNLActivity.class);

    spec = tabHost
            .newTabSpec("nl")
            .setIndicator(createTabView(this, "Natural Language"))
            .setContent(newIntent2);

    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
}

private static View createTabView(final Context context, final String text) {
    View view = LayoutInflater.from(context).inflate(R.layout.tab, null);
    TextView tv = (TextView) view.findViewById(R.id.tabText);
    tv.setText(text);
    return view;
} 
```

这是错误的完整堆栈跟踪

```
 06-21 22:21:11.427: E/AndroidRuntime(14643): FATAL EXCEPTION: main
06-21 22:21:11.427: E/AndroidRuntime(14643): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.T4J_OAuth.activities/com.T4J_OAuth.activities.ExampleTabActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.T4J_OAuth.activities/com.T4J_OAuth.activities.feedbackActivity}: java.lang.NullPointerException
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.os.Looper.loop(Looper.java:150)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.main(ActivityThread.java:4293)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at java.lang.reflect.Method.invokeNative(Native Method)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at java.lang.reflect.Method.invoke(Method.java:507)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at dalvik.system.NativeStart.main(Native Method)
06-21 22:21:11.427: E/AndroidRuntime(14643): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.T4J_OAuth.activities/com.T4J_OAuth.activities.feedbackActivity}: java.lang.NullPointerException
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1656)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:656)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.widget.TabHost.setCurrentTab(TabHost.java:326)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.widget.TabHost.addTab(TabHost.java:216)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at com.T4J_OAuth.activities.ExampleTabActivity.onCreate(ExampleTabActivity.java:354)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
06-21 22:21:11.427: E/AndroidRuntime(14643):    ... 11 more
06-21 22:21:11.427: E/AndroidRuntime(14643): Caused by: java.lang.NullPointerException
06-21 22:21:11.427: E/AndroidRuntime(14643):    at com.T4J_OAuth.activities.feedbackActivity.onCreate(feedbackActivity.java:85)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
06-21 22:21:11.427: E/AndroidRuntime(14643):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
06-21 22:21:11.427: E/AndroidRuntime(14643):    ... 20 more 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:overScrollMode="always" 
        android:isScrollContainer="true" 
        android:scrollbarAlwaysDrawVerticalTrack="true" 
        android:scrollbarStyle="outsideInset" 
        android:scrollbars="vertical">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:paddingTop="5dp"
    android:text="Unit Name: Data Structurs"
    android:textSize="20dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:text="Lecture Name: Queues"
    android:textSize="15dp" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout>    
</ScrollView> 
```

提前致谢。

# iphone - 如果我对在 VMware 上运行 OS X 感到满意，我真的必须购买 Mac 才能为 App Store 开发吗？

> ID：11145212
> 
> 赞同：16
> 
> 时间：2012-06-21T19:16:42.010
> 
> 标签：iphone, ios, app-store, vmware, virtual-machine

我在 Windows 上，我有最新版本的 OS X (10.7.4) 作为 VMware Workstation 上的虚拟机运行。一切都完美无缺，包括最新版本的 Xcode。事情非常顺利，不像人们想象的那样，几乎没有迟缓的行为。我发现通过安装在两个操作系统上的所有软件的组合功能，项目的工作非常高效，它们通过 VMware 的共享文件夹愉快地进行通信。iOS 设备通过 USB 连接到虚拟机的 iTunes 和 Xcode 就好了，就像它是一个真正的 Mac。（然而，虚拟机的几乎所有（虚拟）设备的名称中都有一个“VMware”，如果 Xcode 在安装或应用程序提交期间收集并报告机器统计信息，这使得虚拟机在 Apple 眼中并不那么真实。

而且，随着加入 Apple 开发人员计划的时间越来越近，我想知道我是否真的需要将开发预算缩减 1000 至 1500 美元左右，才能像 Apple 期望的那样购买物理 Mac。这是一大笔钱，我宁愿把它们留给更有用的东西。我真的很想避免购买。（不）幸运的是，正如史蒂夫乔布斯的名言所暗示的那样，人们购买 Mac 来舔它们的时代已经结束。

所以，我的问题是：

1.  有没有人听说过或经历过在虚拟 OS X 机器上开发 iOS 应用程序的成果，这意味着获得一个 iOS 应用程序签名证书，供在该 VM 上运行的 Xcode 使用，并实际从 VM 向 App Store 提交应用程序?

2.  即使这样的事情在技术上是可行的，在注册 Apple 开发者计划时我必须同意的许可协议中是否存在任何法律障碍？（啊，有东西告诉我有..）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T19:31:48.273

**技术：**我个人不知道有人在 VM 中为 iOS 开发。我不明白为什么它不起作用（编译器应该输出相同的东西）。这似乎很麻烦。

**法律：** Mac OS X 许可协议（Apple 菜单，选择“关于本机”，单击窗口底部的“许可协议”）仅授予您在 Apple 品牌硬件或虚拟环境中运行 Mac OS X 的权限在 Apple 品牌的硬件上运行。

我的直觉是，如果你想成为一个小气鬼，使用虚拟机工作，并将你所做的工作提交到 App Store，你可能可以。我不认为 Xcode 以您建议的方式监视您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T22:14:54.410

AFAIK 该软件可以检测它是否在 VM 上运行（检查 CPUID 管理程序或 VMWare BIOS），但不能检测下面的硬件是否是 Apple。因为 Apple 硬件上的 VMWare 可以合法地运行 Lion，所以你很有可能会成功。与微软不同，苹果在执行许可证方面投入很少。Xcode 试图检测它是否位于非 Apple 硬件上的 VM 中的想法听起来与 Apple 非常不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T22:15:53.427

只需 600 美元，您就可以拥有一台全新的 Mac Mini。如果您在接下来的三年中花费超过 5 个小时让 hackintosh 与最新的 Xcode/OSX 一起工作，那么您就是在浪费钱。对我来说，这似乎是一项可怕的投资，除非你有太多的开发时间可用，以至于你的时间非常便宜。

只需 800 美元，您就可以获得 Apple 翻新的 Macbook Air。这些只是苹果的官方销售。eBay 上有各种二手 Mac。

关于#2，请参阅@benzado 的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T22:00:36.150

我没有听说过有人从 VM 开发 Mac OS/iOS 的故事，当然这是一种便宜且简单的解决方案，因为不是每个人都能买得起 Mac。

我想说这是你愿意承担什么风险的问题，如果你说所有东西都有一个 VM 前缀，那么当你提交你的应用程序时这可能会到达苹果公司，并且你知道他们对在自己的围墙花园中工作是多么的挑剔. 我的建议是掩护你的后背，硬着头皮去买 Mac。因为那样的话，如果你继续获得许可证并提交你的应用程序，你可能会被拒绝，迫使你通过上诉系统，而且他们已经拒绝了很多应用程序，以便心甘情愿地将另一个应用程序添加到列表中。

# asp.net - Razor - 如何在 div 标签中显示 html 内容？

> ID：11145213
> 
> 赞同：5
> 
> 时间：2012-06-21T19:16:50.567
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

这是我的剃须刀代码：

```
 <fieldset>
            <legend>Headline News</legend>

                @foreach (var item in Model)
                {
                    <div>@Html.DisplayFor(modelitem => item.Description)</div>
                }
        </fieldset> 
```

的值为`item.Description`HTML：

```
<table border="0" cellpadding="2" cellspacing="7" style="vertical-align:top;"><tr><td width="80" align="center" valign="top">
   {{ table info }}
</table> 
```

我实际上想显示 HTML 内容，但它显示为 HTML 标记。提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T19:20:15.403

你应该使用：

```
@foreach (var item in Model)
{
    <div>@Html.Raw(item.Description)</div>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:21:49.627

你需要使用`@Html.Raw()`

```
@Html.DisplayFor(modelitem => @Html.Raw(item.Description)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:29:14.653

您不一定需要使用`@Html.Raw`，除非有一些 HTML 标签需要解析为 HTML。你也可以使用

```
<fieldset>
<legend>Headline News</legend>
@foreach (var item in Model)
{
<div>@item.Description</div>
}
</fieldset> 
```

如果要使用`@Html.Raw`，请务必使用`@Html.AttributeEncode`以防止脚本注入

# xcode -

> ID：11145215
> 
> 赞同：0
> 
> 时间：2012-06-21T19:17:13.497
> 
> 标签：xcode, cocoa, nsdictionary, nstextfield

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:01:16.013

值是一样的。只是表示不同，就像`10`和`10.000`是`0x0A`相同值的不同表示。XML 属性列表使用 Base64 编码存储值，而`-[NSData description]`（由 打印`NSLog()`）使用 base 16（又名十六进制）编码生成值。您正在寻找一种对[对象进行](https://stackoverflow.com/questions/5999370/nsdata-to-base64)[Base64 编码的`NSData`](https://stackoverflow.com/questions/5999370/nsdata-to-base64)方法。

# android - 为 Google Play 导出 Android 包

> ID：11145217
> 
> 赞同：0
> 
> 时间：2012-06-21T19:17:17.790
> 
> 标签：android, eclipse

我有一个非常奇怪的问题：

更新 Eclipse 后，“导出签名的应用程序包”功能会引发错误（从插件调用代码时出现问题：“org.eclipse.core.resources”。）

现在我不可能在 Google Play 上发布我的 Android APP。

如何在不使用 Eclipse 的情况下签署我的应用程序 (.apk)？“正常”的 .apk 包已成功构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:27:47.700

查看[签署您的应用程序](http://developer.android.com/tools/publishing/app-signing.html)以了解如何在 Eclipse 之外签署应用程序。

附带说明一下，我建议卸载然后重新安装 Eclipse 和 SDK。

# compiler-construction - 从编译器角度定义超级块和超块

> ID：11145218
> 
> 赞同：3
> 
> 时间：2012-06-21T19:17:24.900
> 
> 标签：compiler-construction

对于编译器人员来说，这是一个非常简单的问题，但我总是对超级块和超级块感到困惑。我已经看到了超级块和超级块的定义，但我想从编译器专家的角度了解它们的定义。

我熟悉基本块、谓词执行和循环展开等概念，因此您可以跳过基本内容。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:52:55.717

本文描述[了](http://www.eecs.umich.edu/~mahlke/papers/1993/hwu_jsuper93.pdf)超级块的概念以及超级块是什么。简而言之，这个想法是在基本块中增加 ILP，因为基本块中的 ILP 可能不够高。超级块是没有侧入口的迹线。控制只能从顶部进入，但可以在一个或多个出口点离开。所以顶部只有一个入口，但有多个出口。我们使用配置文件信息从包含多个基本块的公共路径构建一个超级块。然后我们应用超级块优化。查看论文以获取更多信息。

如果我们没有单一的公共路径，并且如果我们有预测支持，我们可以组合多个公共路径来制作一个超块并对超块进行优化。

# javascript - jquery需要延迟调用插件

> ID：11145221
> 
> 赞同：1
> 
> 时间：2012-06-21T19:17:36.577
> 
> 标签：javascript, jquery, jmenu

我正在通过 jquery 将网页标题的 HTML 注入 DOM（模拟母版页）。在标题中，我加载了一个名为[jMenu](http://www.myjqueryplugins.com/jMenu)的 jquery 导航菜单插件。我能够为标题注入 HTML，它似乎没有问题。加载后，我需要对 jMenu 进行 jquery 调用。

问题是看起来 jMenu 调用是在 DOM 完成更新之前进行的，并抛出一个错误，抱怨它找不到其中一个 html 元素。所以我试图延迟加载到 jMenu 但我认为调用现在甚至没有被执行，因为我的警报没有弹出。我已经对此进行了一些搜索，但无法使其正常工作。我猜这是一个小的语法问题。我尝试了几件事：

HTML：

```
<body>
<div class="mpheader"> 
    <div class="header"> <!-- start of injected html -->
    <br/><br/>
    <h1 style="text-align: center;">Reports</h1>
    <div class="centerControl">
        <ul id="jMenu">
        ...
    </div>               <!-- end of injected html -->
</div>

<div class="content">

    <h2>Welcome</h2>
    ... 
```

JS：

```
$(document).ready(function () {

// Load Header
$.get( 
    "./header.jsp", 
    function(data) {
        $(".mpheader").html(data); 
    }
);

// Initialize Navigation Menu
$(".header").on("load", function() { /* doesn't get called */
    alert('called');
    $("#jMenu").jMenu();
})

$(".mpheader").on("load", function() { /* doesn't get called */
    alert('called');
    $("#jMenu").jMenu();
})

$(window).load(function(){   /* doesn't get called */
    alert('called');
    $("#jMenu").jMenu();        
})

//$("#jMenu").jMenu(); /* will cause error complaining about dom */

// TODO: Load Footer

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:22:09.277

一旦你的 get 返回，你正在调用一个函数来填充你的标题的 html。之后您可以设置菜单。以下内容应该适合您：

```
$.get("./header.jsp", 
    function(data) {
        $(".mpheader").html(data);
        $("#jMenu").jMenu(); 
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:25:32.210

试试这个：

```
$(document).ready(function () {
    // Load Header
    $.get( 
        "./header.jsp", 
        function(data) {
            $(".mpheader").html(data).trigger('loaded'); // Fire a custom event.
        }
    );

    // Initialize Navigation Menu - occurs when your custom event is fired.
    $(".mpheader").on("loaded", function() {
        $("#jMenu").jMenu();
    });
}); 
```

因为在这种方法中，您正在创建一个事件序列，该事件仅在您的 AJAX 调用完成并加载您的菜单项后才会触发。

# stored-procedures - SSRS 报表服务器无法立即看到对存储过程的更新.....如何更改？

> ID：11145223
> 
> 赞同：0
> 
> 时间：2012-06-21T19:17:47.810
> 
> 标签：stored-procedures, ssrs-2008, reporting-services

我不断地制作存储过程，然后在 SSRS 报告中使用这些存储过程。我的 SSRS 报告无法找到我的存储过程是很常见的。所以，我坐在那里删除数据源，一遍又一遍地刷新它，直到它能够找到我的新存储过程。

**更新：错误是这样的：找不到存储过程“SP 名称”（Microsoft SQL Server，错误：2812）

这很烦人，我觉得好像有一些 SSRS 使用或需要更新的表，以便我可以立即看到新创建的存储过程。

我目前对实时存储过程进行了更改，而我的实时 SSRS 报告尚未进行这些更改，而且是几个小时后。

我知道必须有一些进程或表格不会立即在我们的系统上更新。

只是想知道是否有人知道要参考的系统作业或表以更频繁地进行此更新，或者我可以在需要时手动运行它。

非常感谢任何想法/建议....谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:29:28.040

好的，非常糟糕的解决方法，但这就是我发现的。如果它继续给你这个错误，你可以进入下拉框并在列表中找到你的存储过程。单击它，运行它，然后单击刷新，此错误应该会消失。如果您在列表中找不到它，那么您有一个更大的问题。

# css - CSS 伪类可以命名空间吗？

> ID：11145230
> 
> 赞同：4
> 
> 时间：2012-06-21T19:18:23.680
> 
> 标签：css, namespaces, css-selectors, pseudo-class

例如，在 CSS 中使用命名空间时，您可以`div`使用命名空间类型选择器选择“任何或无命名空间”中的任何元素：

```
*|div 
```

命名伪类是否有效？例如：

```
*|:first-child 
```

它似乎在基于 WebKit 的浏览器中工作，它似乎不适用于 IE9（IE9 以下根本不支持命名空间）和 Firefox。我不在乎它在哪些浏览器中工作/不工作，我只需要知道它是否是一个有效的构造。

[这是一个小提琴](http://jsfiddle.net/Nt29Z/)。

从我在[CSS 语法](http://www.w3.org/TR/selectors/#w3cselgrammar)中可以看出，它是无效的。但我可能误读了语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:20:03.437

命名空间，作为文档语言的一部分，并不直接应用于伪类或伪元素，因为它们是在 CSS 而不是文档语言（例如 XML）中定义的。然而，元素类型和属性是在文档语言中定义的，而不是 CSS，这就是它们可以被命名空间的原因。因此，在一系列简单的选择器中，通用选择器具体表示“任何类型”。

通用选择器仅在没有命名空间的情况下用于其他简单选择器和伪元素（这就是为什么选择器如`.foo`、`#target`、和是有效的`[type="text"]`，并且通常与 HTML 等语言一起使用，其中 CSS 最常用于样式设置）。从[规格](http://www.w3.org/TR/selectors/#universal-selector)：`:first-child``::before`

> 如果由`*`（即没有命名空间前缀）表示的通用选择器不是[简单选择器选择器序列](http://www.w3.org/TR/selectors/#sequence)的唯一组成部分或紧随其后的是[伪元素](http://www.w3.org/TR/selectors/#pseudo-elements)，则`*`可以省略 并暗示通用选择器的存在。

`|`因此，在您的示例中，选择器无效，因为在和之间既没有通用选择器也没有类型选择器`:`：

```
/* These are all invalid */
*|:first-child
ns|::first-letter
|::before 
```

如果您指定命名空间，则如果您不选择特定类型，则必须指定通用选择器：

```
*|*:first-child
*|*::before 
```

在命名空间中选择元素时也是如此`ns`：

```
ns|*:first-child
ns|*::before 
```

或选择不在名称空间中的元素时：

```
|*:first-child
|*::before 
```

# javascript - 满足条件时使jquery自动完成不做任何事情

> ID：11145232
> 
> 赞同：0
> 
> 时间：2012-06-21T19:18:26.527
> 
> 标签：javascript, jquery, jquery-plugins, autocomplete

所以我使用 jquery 自动完成并将 formatItem 选项设置为：

```
formatItem: function(row, i, max) {

    if( some condition to check )
        return '';

    var html = '<process the results from row>';
    return html;
}, 
```

但是这样做最终会让jquery自动完成显示一个空的弹出窗口，因为返回一个空字符串''......有没有办法让jquery AC根本不做任何事情......即。当满足条件时，它会简单地停止并且不显示任何弹出窗口？

返回 false 仍然会显示一个弹出窗口，并且只会`return;`以 javascript 错误结束（弹出窗口不会正常显示，但由于 javascript 错误而不是因为合法的原因而不会显示）

# actionscript-3 - 位图颜色替换（）阈值

> ID：11145235
> 
> 赞同：2
> 
> 时间：2012-06-21T19:18:40.353
> 
> 标签：actionscript-3

是否有实际有效的位图颜色替换实现的示例？

我正在努力实现以下目标：

前：

![](../Images/1409582852f451a5d1bef1aa2205f2f7.png)

后：

![](../Images/9fa14aa07713a35f9880dd27bde962e6.png)

注意：我不想在这里使用颜色矩阵转换。我希望能够选择一种颜色，然后选择一个阈值，然后选择一种新颜色，它可以有效地改变阈值中的所有颜色。

这个想法是否可以非常准确地执行？如果是这样，你能指出我的概念证明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:00:32.880

只是为了让这件事继续下去......我不知道这对你来说是否是正确的解决方案，但这是一个开始。

这个[答案](https://stackoverflow.com/questions/5382161/how-do-i-set-a-certain-color-to-be-transparent)显示了如何使用 BitmapData.threshold 方法来替换颜色。您可以用透明像素替换颜色，然后在 MovieClip 后面放置背景并在颜色之间设置动画。

```
var inputBitmapData:BitmapData = new BitmapData(200, 200, true, 0xFF0000FF);
inputBitmapData.fillRect(new Rectangle(10, 10, 180, 180), 0xFFFF0000);

var outputBitmapData:BitmapData = new BitmapData(200, 200, true); 
var destPoint:Point = new Point(0, 0); var sourceRect:Rectangle = new Rectangle(0, 0, outputBitmapData.width, outputBitmapData.height); 
var threshold:uint =  0xFFFF0000;  
var color:uint = 0x00000000;     
outputBitmapData.threshold(inputBitmapData, sourceRect, destPoint, "==", threshold, color, 0xFFFFFFFF, true);

var input:Bitmap = new Bitmap(inputBitmapData); addChild(input);
var output:Bitmap = new Bitmap(outputBitmapData); output.x = input.x + input.width + 10; 

addChild(output); 
```

您还可以逐个像素地遍历位图数据，以将一种颜色替换为另一种颜色。

```
for (var j = 0; j < bitmap.height; j++) {
    for (var i = 0; i < bitmap.width; i++) {
        if(bitmapData.getPixel(i,j)==0xFFFF00)  {
            bitmapData.setPixel(i,j, 0xFF0000);
        }
    }
} 
```

# java - HtmlUnit 阻止 javascript 验证程序重定向

> ID：11145236
> 
> 赞同：0
> 
> 时间：2012-06-21T19:18:51.300
> 
> 标签：java, javascript, htmlunit

我正在编写一个 Java 程序，它会自动将信息插入网站，然后对这些信息执行一些 javascript 函数。

我的问题是，当页面加载时，它会自动调用一些 javascript 来检查我的浏览器信息，然后建议我下载 Java。当然，我已经安装了 java，否则程序将无法运行！

这是脚本将我重定向到的站点，以便执行检查：http: [//java.com/js/deployJava.txt](http://java.com/js/deployJava.txt)

我的代码的相关部分：

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
HtmlPage page = webClient.getPage("https://www.blahblahblah.com");
// this is where I get redirected

HtmlTextInput txtElement = (HtmlTextInput) page.getElementById("itemID");
// this returns null, because I am on a different page than what I expect
txtElement.type("my search info");

page = txtElement('\n');  // to submit the field (there is no submit button) 
```

我尝试了所有不同的浏览器设置，但没有效果。

当我在浏览器中访问相同的 URL 时，页面加载顺利。

当我尝试禁用重定向时，getPage 返回一个空的 TextPage，而不是 HtmlPage。

有没有其他人遇到过类似的问题，或者有任何见解？有没有办法阻止那段 javascript 执行，而不是其他的？

交叉发布：[http ://www.experts-exchange.com/Programming/Languages/Java/Q_27765581.html](http://www.experts-exchange.com/Programming/Languages/Java/Q_27765581.html)

提前致谢，

阿修罗

更新：事实证明，我能够通过发布请求获得所需的信息。感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:28:54.377

您可以使用用 HtmlUnit 包装的[JWebUnit](http://jwebunit.sourceforge.net/)，然后执行以下操作：

```
public void testFoo() {
  beginAt("blabla");
  ...
  setScriptingEnabled(false);
  ...//Problematic code
  setScriptingEnabled(true);
  ...
} 
```

这将暂时禁用 JavaScript

# php - PHP 读取文件（）；和 JavaScript

> ID：11145245
> 
> 赞同：0
> 
> 时间：2012-06-21T19:19:23.247
> 
> 标签：php, javascript

我`readfile();`用来开始下载，它工作得很好，但是当尝试使用 JavaScript 检查用户是否可以下载文件时，它不会开始下载，而是显示文件的二进制代码。我希望它下载文件。

我用它来检查用户是否可以下载文件：

```
http.open("GET", "includes/checkdownload.php", true); 
```

在`checkdownload.php`我有这个

```
header('Cache-Control: public');
header('Content-Transfer-Encoding: binary');
header("Content-Type: application/pdf");
header('Content-Disposition: attachment; filename="file.pdf"');
ob_clean();
flush();
readfile("file.pdf"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:22:17.913

您不能通过 Ajax 请求开始下载。您可以使用 Ajax 请求检查文件的可用性（您可能应该对大文件使用 HEAD 以避免下载整个文件），但您需要使用它`window.open`来实际打开保存文件对话框。

```
window.open('includes/checkdownload.php'); 
```

或者，正如@Derek 指出的那样，您可以使用`<iframe>`，或者您可以通过设置重定向`window.location.href`，或者您也可以使用`window.showModalDialog`。任何会在浏览器中某处打开该 URL 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:22:46.213

您将需要一个代理脚本来告诉您文件是否有效。因此，您无需对文件执行 http.open，而是在服务器上调用一个脚本，该脚本将返回一个断言是否可以下载该文件。

例如：

```
$.get('includes/candownload.php', function(data){ 
    if(data == 'ok'){
        window.location.href = "includes/checkdownload.php";
    }else{
        alert('Cannot download your file');
    }
) 
```

在你的 php 文件“candownload.php”中

```
header('Cache-Control: public');
header('Content-Transfer-Encoding: binary');
header("Content-Type: text/plain");
ob_clean();
flush();
if(file_exists("file.pdf")){ echo 'ok'; }else{ echo 'no'; } 
```

# c++ - 开源模糊逻辑库

> ID：11145253
> 
> 赞同：2
> 
> 时间：2012-06-21T19:19:46.193
> 
> 标签：c++

我需要基于模糊逻辑为游戏实现 AI。我需要评估塔防游戏的位置，我有几个规则，我会添加更多。谁能建议我一些 C++ 或代码示例中的开源模糊逻辑库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:36:14.793

免费的模糊逻辑库 (FFLL) ...

[http://ffll.sourceforge.net/](http://ffll.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:04:34.297

模糊：[http ://code.google.com/p/fuzzylite/](http://code.google.com/p/fuzzylite/)

> Fuzzylite 是一个多平台、免费和开源的模糊逻辑控制库，用 C++ 编写并在 Apache 许可证 2.0 下发布，这使得该软件可免费用于商业和非商业用途。这个库背后的想法是有一个非常简单和轻量级的模糊控制器。简单如使用简单、易于理解和易于扩展，而不牺牲性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:07:59.810

C++：[模糊精简版](http://code.google.com/p/fuzzylite/)

Java：[JFuzzyLogic](http://jfuzzylogic.sourceforge.net/html/index.html)

# python-3.x - 使用 elementtree 解析 xml，自定义排序

> ID：11145256
> 
> 赞同：0
> 
> 时间：2012-06-21T19:19:54.633
> 
> 标签：python-3.x, elementtree

我想解析 utf-8 中的 xml 文件并按某个字段对其进行排序。排序是由自定义字母（来自源代码的 s1）。问题的历史在这里： [排序包含 utf-8 charachters 的列表](https://stackoverflow.com/questions/10792241/sorting-of-list-containing-utf-8-charachters)。我在[这里](http://effbot.org/zone/element-sort.htm)找到了如何对 xml 进行排序。排序工作正常，问题出在 elementtree 上，我必须承认它在 python3 上不起作用

这是源代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#import xml.etree.ElementTree as ET   # Python 2.5
import elementtree.ElementTree as ET
s1='aáàAâÂbBcCçÇdDeéEfFgGğĞhHiİîÎíīıIjJkKlLmMnNóoOöÖpPqQrRsSşŞtTuUûúÛüÜvVwWxXyYzZ'
s2='11111122334455666aabbccddeeeeeeffgghhiijjkklllllmmnnooppqqrrsssssttuuvvwwxxyy'
trans = str.maketrans(s1, s2)
def unikey(seq):
    return seq[0].translate(trans)
tree = ET.parse("tosort.xml")
container = tree.find("entries")
data = []
for elem in container:
    keyd = elem.findtext("k")
    data.append((keyd, elem))
print (data)
data.sort(key=unikey)
print (data)
container[:] = [item[-1] for item in data]
tree.write("sorted.xml", encoding="utf-8") 
```

以下是 导入 elementtree 模块的[说明。](http://effbot.org/zone/element-index.htm#installation)当我以这种方式导入模块时 : `import xml.etree.ElementTree as ET`，我收到一条消息：

```
Traceback (most recent call last):
File "pcs.py", line 19, in <module>
container[:] = [item[-1] for item in data]
File "/usr/lib/python3.1/xml/etree/ElementTree.py", line 210, in __setitem__
assert iselement(element)
AssertionError 
```

当我使用此方法导入时：`import elementtree.ElementTree as ET`，我收到此消息：

```
Traceback (most recent call last):
File "pcs.py", line 4, in <module>
import elementtree.ElementTree as ET
File "/usr/local/lib/python3.1/dist-packages/elementtree/ElementTree.py", line 794, in <module>
_escape = re.compile(eval(r'u"[&<>\"\u0080-\uffff]+"'))
File "<string>", line 1
u"[&<>\"\u0080-\uffff]+"
                       ^
SyntaxError: invalid syntax 
```

我使用 Python 3.1.3（r313:86834，2010 年 11 月 28 日，11:28:10）。在python2.6 elementtree 工作没有问题。

tosort.xml 的内容：

```
<xdxf>
<entries>
<ar><k>zaaaa</k>definition1</ar>
<ar><k>şaaaa</k>definition2</ar>
...
...
</entries>
</xdxf> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:14:17.517

看起来您导入了不同的模块，一个在`/usr/lib/python3.1`被调用`xml.etree`，另一个在`/usr/local/lib/python3.1/dist-packages`被调用`elementtree`。后者对我来说似乎坏了，至于前者，尝试`[:]`在行中删除

```
 container[:] = [item[-1] for item in data] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:26:30.370

不要打我太多但是，这是我的解决方案的变体：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import xml.etree.ElementTree as ET # Python 2.5
from xml.etree.ElementTree import Element
s1="áàaAâÂbBcCçÇdDeéEfFgGğĞhHiİîÎíīıIjJkKlLmMnNóoOöÖpPqQrRsSşŞtTuUûúÛüÜvVwWxXyYzZ"
s2="AAAAAABBCCCCDDEEEFFGGHHddeeeeeeffgghhiijjkklllllmmnnooppqqrrsssssttuuvvwwxxyy"
trans = str.maketrans(s1, s2)
def unikey(seq):
    return seq[0].translate(trans)
tree = ET.parse("tosort.xml")
container = tree.find("entries")
data = []
for elem in container:
    keyd = elem.findtext("k")
    data.append([keyd, elem])
data.sort(key=unikey)
root = tree.getroot()
i=0
for item in data:
    root.append(data[i][1]) # appends sorted Element objects to tree
    i=i+1
#container = [item[-1] for item in data]
root.remove(tree.find("entries")) # removes unsorted Element objects
tree.write("sorted.xml", encoding="utf-8") 
```

解决方案有点难看，但它有效......我不知道对〜50Mb的xml数据进行排序需要多少时间，但在我的情况下时间并不重要。我也稍微改变了排序模式，因为如果单词中有数字，它就会排序错误。在 Acer extensa 5210 上，排序时间不超过 2 分钟。

# objective-c - 使用 AFNetworking 获取 JSON null

> ID：11145263
> 
> 赞同：0
> 
> 时间：2012-06-21T19:20:24.253
> 
> 标签：objective-c, ios, nsurlconnection, afnetworking

我写了两个代码都一样

1.  使用 NSURLConnection 和
2.  使用 AFNetworking。

我的`NSURLConnection`代码工作正常，但`AFNetworking`代码不行。问题是我从我的`NSURLConnection`代码中得到 JSON 响应，但我没有`JSON`从`AFNetworking`代码中得到响应，但我得到的响应代码为 200。我已经尝试了所有可能的组合，但仍然没有运气。我不知道是什么问题。我想继续使用`AFNetworking`，所以请有人帮助我。谢谢你——阿米特

NSURL连接：

```
- (IBAction)connectHandler:(UIButton *)sender {

//This is where we attempt to connect to the URL represented by self.labelHostURL
//along with exception handling
NSString *request_type = @"STARTUP";    
NSString *request_data = @"{\"lstCacheRefDt\":\"10/10/2010\",\"langCd\":\"en_US\",\"timeZn\":\"America/Chicago\",\"brndId\":\"WM\",\"prgmId\":\"WM0012\"}";
NSLog(@"Request: %@", request_data);

NSURL *url = [NSURL URLWithString:[ self.labelHostURL text ]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
//NSData *requestData = [NSData dataWithBytes:[request_data UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

NSString* request_body = [NSString
                          stringWithFormat:@"request_type=%@&request_data=%@",
                          [request_type stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                          [request_data stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:[request_body dataUsingEncoding:NSUTF8StringEncoding]];

[NSURLConnection connectionWithRequest:request delegate:self];    } 
```

AF网络：

```
- (void) getHomeData {

NSURL *url = [[NSURL alloc] initWithString:@"https://localhost:8443/MNMMLMockService/mAccountsWeb/services/mnapp/rpc"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSDictionary *homePostParams1 = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"10/10/2010", @"lstCacheRefDt",
                                @"en_US", @"langCd",
                                @"America/Chicago", @"timeZn",
                                @"WM", @"brndId",
                                @"WM0012", @"prgmId", nil];

NSDictionary *homePostParams = [NSDictionary dictionaryWithObjectsAndKeys:@"STARTUP", @"request_type", homePostParams1,@"request_data", nil];

NSLog(@"Dic: %@", homePostParams);

NSMutableURLRequest *homeRequest = [httpClient requestWithMethod:@"POST" path:@"" parameters:homePostParams];
[homeRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[homeRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:homeRequest
                                     success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                         NSLog(@"JSON %@", JSON);
                                         NSLog(@"operation StatusCode: %d", [response statusCode]);
                                     } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                         NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
                                     }];
[operation start]; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:24:43.593

我不明白您为什么要将 url 表单编码数据而不是 JSON 发送到服务器，但期望 JSON 返回。不要设置标题字段。删除这个：

```
[homeRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[homeRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

如果你想设置它（虽然你不应该这样做）你用`AFHTTPClient`. 例如：

```
[httpClient setParameterEncoding:AFJSONParameterEncoding]; 
```

此外，您确实知道`AFNetworking`为您编码/解码 JSON，对吧？您将一个对象传递给它，它会自动将其编码为 JSON，同样会自动接收接收到的 JSON 并将其解码为一个objective-c 对象。所以你永远不会从`AFNetworking`库中收到纯 JSON，你会收到相应的对象。

**编辑**

我现在看到你的问题了。您期望`AFNetworking`url 形式对一半参数进行编码，但也对另一部分进行 JSON 编码。您必须将`AFNetworking`整个参数对象编码为一件事或另一件事。我建议您更改为 100% JSON，方法是保留您创建的 homePostParams 并使用 JSON 对其进行编码，然后重写服务器以期望所有 JSON。

如果您必须将其拆分为那样，则不能依靠`AFNetworking`为您进行编码/解码。你必须做你所做的`NSURLConnection`：

```
NSString *request_data = @"{\"lstCacheRefDt\":\"10/10/2010\",\"langCd\":\"en_US\",\"timeZn\":\"America/Chicago\",\"brndId\":\"WM\",\"prgmId\":\"WM0012\"}";
NSDictionary *homePostParams = [NSDictionary dictionaryWithObjectsAndKeys:@"STARTUP", @"request_type", request_data,@"request_data", nil]; 
```

有点违背了目的`AFNetworking`。如果服务器只期望接收 JSON 而不是 url 表单编码会更好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:59:12.023

我使用 AFNetworking 库，但您似乎缺少我所做的一些步骤。我通常继承 AFHTTPClient。无论您是否子类化，请确保调用 AFHTTPClient 的 registerHTTPOperationClass 方法。

例如在初始化过程中我的 AFHTTPClient 子类中，我这样做（其中 self 是 AFHTTPClient 实例）：

```
[self registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

这将为您设置适当的接受标头。

对于操作（所有期望 json 响应），我执行以下操作：

```
AFHTTPRequestOperation *httpOperation = [httpClient HTTPRequestOperationWithRequest:request 
    success:^(AFHTTPRequestOperation *operation, id responseJSONObject) { // some logic}
    failure:^(AFHTTPRequestOperation *operation, NSError *error) { // some logic }]; 
```

# bash - 如何用行号替换文本文件中的整行

> ID：11145270
> 
> 赞同：183
> 
> 时间：2012-06-21T19:20:43.993
> 
> 标签：bash, text, replace, sed

我有一种情况，我想要一个 bash 脚本来替换文件中的整行。行号始终相同，因此可以是硬编码变量。

我不想替换该行中的某些子字符串，我只想用新行完全替换该行。

是否有任何 bash 方法可以执行此操作（或可以放入 .sh 脚本的简单方法）。

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-06-21T19:26:37.013

不是最好的，但这应该有效：

```
sed -i 'Ns/.*/replacement-line/' file.txt 
```

where`N`应替换为您的目标行号。这将替换原始文件中的行。要将更改的文本保存在不同的文件中，请删除`-i`选项：

```
sed 'Ns/.*/replacement-line/' file.txt > new_file.txt 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-21T19:32:24.753

不久前，我实际上使用此脚本替换了我们公司 UNIX 服务器上 cron 文件中的一行代码。我们像普通的 shell 脚本一样执行它，没有任何问题：

```
#Create temporary file with new line in place
cat /dir/file | sed -e "s/the_original_line/the_new_line/" > /dir/temp_file
#Copy the new file over the original file
mv /dir/temp_file /dir/file 
```

这不是按行号进行的，但是您可以通过将行号放在 之前`s/`并放置通配符来轻松切换到基于行号的系统`the_original_line`。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-21T19:27:12.750

假设您想用文本“不同”替换第 4 行。您可以像这样使用 AWK：

```
awk '{ if (NR == 4) print "different"; else print $0}' input_file.txt > output_file.txt 
```

AWK 将输入视为分为“字段”的“记录”。默认情况下，一行是一条记录。 `NR`是看到的记录数。 `$0`表示当前完整的记录（虽然`$1`是记录中的第一个字段，依此类推；默认情况下，字段是该行中的单词）。

因此，如果当前行号为 4，则打印字符串“不同”，否则打印该行不变。

在 AWK 中，包含在中的程序代码`{ }`在每个输入记录上运行一次。

您需要在单引号中引用 AWK 程序，以防止 shell 尝试解释`$0`.

编辑：@chepner 在下面的评论中提供了一个更短、更优雅的 AWK 程序：

```
awk 'NR==4 {$0="different"} { print }' input_file.txt 
```

仅对于第 4 条记录（即行），将整个记录替换为字符串“不同”。然后对于每个输入记录，打印记录。

显然我的 AWK 技能已经生疏了！谢谢你，@chepner。

编辑：还可以查看@Dennis Williamson 的更短版本：

```
awk 'NR==4 {$0="different"} 1' input_file.txt 
```

注释中解释了它是如何工作的：`1`总是评估为真，因此相关的代码块总是运行。但是没有关联的代码块，这意味着 AWK 执行其仅打印整行的默认操作。AWK 旨在允许这样的简洁程序。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-06-21T19:30:30.897

给定这个测试文件（test.txt）

```
Lorem ipsum dolor sit amet,
consectetur adipiscing elit. 
Duis eu diam non tortor laoreet 
bibendum vitae et tellus. 
```

以下命令将第一行替换为“换行符”

```
$ sed '1 c\
> newline text' test.txt 
```

结果：

```
newline text
consectetur adipiscing elit. 
Duis eu diam non tortor laoreet 
bibendum vitae et tellus. 
```

更多信息可以在这里找到

[http://www.thegeekstuff.com/2009/11/unix-sed-tutorial-append-insert-replace-and-count-file-lines/](http://www.thegeekstuff.com/2009/11/unix-sed-tutorial-append-insert-replace-and-count-file-lines/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-21T19:29:21.990

在bash中，用行号替换N，M，用你想要的替换xxx yyy

```
i=1
while read line;do
  if((i==N));then
    echo 'xxx'
  elif((i==M));then
    echo 'yyy'
  else
    echo "$line"
  fi
  ((i++))
done  < orig-file > new-file 
```

编辑

事实上，在这个解决方案中存在一些问题，字符“\0”、“\t”和“\”

“\t”，可以通过在读取前加上 IFS= 来解决：“\”，在行尾加上 -r

```
IFS= read -r line 
```

但是对于“\0”，变量被截断，在纯 bash 中没有解决方案： [将包含空字符 (\0) 的字符串分配给 Bash 中的变量](https://stackoverflow.com/questions/6570531/assign-string-containing-null-character-0-to-a-variable-in-bash) 但是在普通文本文件中没有空字符 \0

perl 会是更好的选择

```
perl -ne 'if($.==N){print"xxx\n"}elsif($.==M){print"yyy\n"}else{print}' < orig-file > new-file 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-03-10T21:20:52.967

```
# Replace the line of the given line number with the given replacement in the given file.
function replace-line-in-file() {
    local file="$1"
    local line_num="$2"
    local replacement="$3"

    # Escape backslash, forward slash and ampersand for use as a sed replacement.
    replacement_escaped=$( echo "$replacement" | sed -e 's/[\/&]/\\&/g' )

    sed -i "${line_num}s/.*/$replacement_escaped/" "$file"
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-04-24T12:36:21.153

Chepner的出色回答。它在 bash Shell 中为我工作。

```
 # To update/replace the new line string value with the exiting line of the file
 MyFile=/tmp/ps_checkdb.flag

 `sed -i "${index}s/.*/${newLine}/" $MyFile` 
```

这里
`index`- 行号
`newLine`- 我们要替换的新行字符串。

同样，下面的代码用于读取文件中的特定行。这不会影响实际文件。

```
LineString=`sed "$index!d" $MyFile` 
```

这里
`!d`- 将删除除第 no 行以外的行`$index` 所以我们将输出作为`$index`文件中 no 的行字符串。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-12-05T18:46:24.137

在我使用的mac上

```
sed -i '' -e 's/text-on-line-to-be-changed.*/text-to-replace-the=whole-line/' file-name 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-13T23:36:58.717

## 将行替换为`sed c\`

[参考](https://www.gnu.org/software/sed/manual/sed.html)

`sed c\`实际上不会更改文件，因此您需要将其输出发送到临时文件，然后`cat`将临时文件发送到原始文件。匹配模式不是必需的，因为我们可以指定行。示例：`sed '1 c\'`=> 将替换第 1 行中的文本。

编写命令时，该`c\`部分之后的任何内容都将换行并应包含新行文本。

* * *

最后，示例“替换”以`original_file.txt`文本“foo”命名的文件中的第 1 行。请注意，我们正在获取 sed 输出并保存在临时文件中，然后将临时文件输出回原始文件：

```
# file contents
$ cat original_file.txt
bar

# the replace command
$ sed '1 c\
  foo' original_file.txt > temp_file.txt

# output contents of temp_file and overwrite original
$ cat temp_file.txt > original_file.txt

# delete the temp file
$ rm -rf temp_file.txt 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-06T09:20:14.653

如果您想为 lineNumber 和 replacementLine 使用参数，那么 awk 就不能轻松工作（对我来说）。我在 1 小时后运行，您可以在下面看到 :)

```
lineNumber=$(grep --line-number "u want to replace line any keyword" values.txt  | cut -f1 -d:)
replacedLine="replacing new Line "
# for sed prepare => if your replacedLine have '/' character (URL or something) u must use command bellow. 
replacedLine=${replacedLine//\//\\\/}

sed -i $lineNumber's/.*/'"$replacedLine"'/'  values.txt 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-12-08T08:14:36.360

您甚至可以将参数传递给 sed 命令：

**测试.sh**

```
#!/bin/bash
echo "-> start"
for i in $(seq 5); do
  # passing parameters to sed
  j=$(($i+3))
  sed -i "${j}s/.*/replaced by '$i'!/" output.dat
done
echo "-> finished"
exit 
```

原始输出.dat：

```
a
b
c
d
e
f
g
h
i
j 
```

执行*./test.sh*给出新的 output.dat

```
a
b
c
replaced by '1'!
replaced by '2'!
replaced by '3'!
replaced by '4'!
replaced by '5'!
i
j 
```

# sql - SQL - 我如何从另一个表插入自动填充的增量字段

> ID：11145277
> 
> 赞同：0
> 
> 时间：2012-06-21T19:21:27.040
> 
> 标签：sql, insert, auto-increment, insert-into

我有一个带有 2 个表的简单数据库：

```
Table1.....ID|1st Lot No|No of Blocks|Part Number|Date|Lot Qty.

Table2.....ID|---------Lot No--------|Part Number|Date|Lot Qty. 
```

我想要实现的是当用户在 Table1 中输入值时，数据被拉到 Table2，但我需要 [Table2,Lot No] 中的值根据 Table1.No 块自动递增。

例如用户输入：

```
ID|1st Lot No|No of Blocks|Part Number|Date  |Lot Qty.
1 | 62204    |     6      |   TR456   |1/1/12|2.978KM 
```

然后当 Table1 Row_inserted 时，Table2 自动更新为：

```
ID| Lot No|Part Number|Date   |Lot Qty
1 |62204  | TR456     |1/1/12 |2.978KM
2 |62205  | TR456     |1/1/12 |2.978KM
3 |62206  | TR456     |1/1/12 |2.978KM
4 |62207  | TR456     |1/1/12 |2.978KM
5 |62208  | TR456     |1/1/12 |2.978KM
6 |62209  | TR456     |1/1/12 |2.978KM 
```

我正在使用 aspmaker 并将代码放入服务器事件中：

```
' Row Inserted event
Sub Row_Inserted(rsold, rsnew)

End Sub 
```

我一直在尝试使用`dims`,来实现这一点`insert into`，我已经完成了许多教程，但我无法让它工作。我的sql知识中等。但我已经坚持了大约 200 小时，不开玩笑，我不喜欢放弃。

请如果有人有技能给我指路，那么我将非常感谢您的帮助。

# linux - 用于在 linux shell 上将 wav 编码为 aac 的库？

> ID：11145278
> 
> 赞同：1
> 
> 时间：2012-06-21T19:21:30.097
> 
> 标签：linux, shell, wav, aac

我正在尝试找到一个 wav 到 aac 编码器来将我的 wav 文件转换为 aac。问题是我需要在商业环境中使用它（不是分发，只是使用）。有人知道好的吗？我仍在谷歌搜索，但有些人抱怨质量问题，所以我想知道是否有人对此有过良好的体验。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:40:42.093

在研究了其他开源解决方案之后，Nero AAC 编解码器似乎是质量最好的。但是，我始终无法与他们的许可部门取得联系，因此最终改用 MP3 编码。

# c++ - Boost 容器无法使用未定义（但已声明）的类进行编译

> ID：11145283
> 
> 赞同：2
> 
> 时间：2012-06-21T19:21:40.623
> 
> 标签：c++, templates, boost, forward-declaration

以下代码无法在 MSVStudio 2010 Express 中编译，似乎是因为 boost 容器声明创建了包含类型的（静态？）实例。更改`boost::ptr_list<TypeContained>`为`std::list<TypeContained *>`使其编译成功，但我喜欢 boost 容器。任何人都知道我该如何解决这个问题？错误是`error C2504: 'Proxy<TypeContainer,TypeContained>' : base class undefined`

```
#include <string>
#include <boost/ptr_container/ptr_list.hpp>

template <typename TypeContainer, typename TypeContained>
class Proxy
{
private:
    typename boost::ptr_list<TypeContained>::iterator m_clsPosition;

public:
    class Container {};
};

template <typename V> class Container;

template <typename V>
class Dependent : public Proxy<Container<V>, Dependent<V> >,
                  public V {};

template <typename V>
class Container : public Proxy<Container<V>, Dependent<V> >::Container {};

int main(int argc, char * argv[])
{
    Container<std::string> clsContainer;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:29:16.087

所以，用clang编译，问题在于boost试图在TypeContainer上使用sizeof，但此时，还没有确定TypeContainer的大小，因为你还在定义它。

因此，作为一个更简单的情况，根本问题是：

```
template <typename A>
class T {
    static const int a = sizeof(T<A>);
};

int main() {
    T<int> d;
} 
```

换句话说，通过调用 sizeof 创建了一个循环依赖项，但使用指针（具有已知大小），永远不会创建此依赖项。

# perl - MongoFiles、GridFS 和 Perl

> ID：11145284
> 
> 赞同：2
> 
> 时间：2012-06-21T19:21:46.043
> 
> 标签：perl, mongodb, gridfs

我一直在使用 perl、MongoDB 和 GridFS 进行一些宠物开发，并且想知道 - 无论如何 perl 是否可以与 Mongofiles 交互（除了使用系统命令导航并以这种方式调用它，呵呵） - 就像..好吧。 ..一个cpan库？还是 Mongo 当前 CPAN 模块的扩展？

对于我想做的一个例子：

我希望能够将文件存储到我的 mongoDB 并将文件检索到我的 mongoDB - 例如，从命令行，一旦我导航到其中包含 mongofiles 的目录，我就可以执行

```
mongofiles put "C:\Users\Me\cool.txt" 
```

它会将文件存储到数据库中！假设我从驱动器中删除了cool.txt。现在当我执行：

```
mongofiles get "C:\Users\Me\cool.txt" 
```

它从数据库中检索文件并将其放入我的目录中！我只想能够从 Perl 访问这个 mongofiles 功能。即使这意味着在我的脚本目录中拥有一份 mongofiles 的副本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:52:07.353

您想使用 GridFS。

这是 perl API： http: [//api.mongodb.org/perl/current/MongoDB/GridFS.html](http://api.mongodb.org/perl/current/MongoDB/GridFS.html)

这里是一个插入的例子：

```
use MongoDB::GridFS;

my $grid = $database->get_gridfs;
my $fh = IO::File->new("myfile", "r");
$grid->insert($fh, {"filename" => "mydbfile"}); 
```

并检索：

```
use MongoDB::GridFS::File;

my $outfile = IO::File->new("outfile", "w");
my $file = $grid->find_one({"filename" => "mydbfile"});;
$file->print($outfile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:04:54.633

弗雷德里克为我提供了这个答案的知识，但为了遗产，这里有一个完整的、有效的例子……在其他地方的互联网上找不到类似的例子：

```
#!usr/bin/perl

use MongoDB::GridFS;
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = new MongoDB::Connection;
my $db   = $conn->test; #name of our local db is test...default of mongoDB
my $grid = $db->get_gridfs;
my $fh = IO::File->new("cool.txt", "r");
$grid->insert($fh, {"filename" => "test"}); 
```

# ruby-on-rails - 在其他验证之间执行 before_validation？

> ID：11145286
> 
> 赞同：0
> 
> 时间：2012-06-21T19:21:50.420
> 
> 标签：ruby-on-rails, validation

我有`before_validation`一个模型。其目的是计算两个`DateTime`对象之间的工作时间，并将该值插入到`time_worked`属性中。它的成功取决于两个字段的有效性，它吐出第三个字段的值，而第三个字段又具有验证。

```
class TimeEntry < ActiveRecord::Base
  validates :start_time, :end_time, :presence => true
  validates :time_worked, :presence => true, :numericality => true
  before_validation :calculate_time_worked

def calculate_time_worked
    time_float = (Time.parse(self.end_time.to_s) - Time.parse(self.start_time.to_s)) / 1.hour  
    self.time_worked = ((time_float * 10).ceil).to_f/10
end 
```

问题是，如果其中一个为空或无效，我的方法`calculate_time_worked`将失败，这正是这两个字段具有验证的原因！`start_time``end_time`

任何想法如何重构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:36:00.620

@PedroMedeiros 的 before_save 解决方案将在这种情况下工作....但如果您想验证 time_worked 是否为正，那么您可能会执行以下操作：

```
 validate :calculate_time_worked

  def calculate_time_worked
    return if end_time.blank? || start_time.blank?
    time_float = (Time.parse(self.end_time.to_s) - Time.parse(self.start_time.to_s)) / 1.hour  
    self.time_worked = ((time_float * 10).ceil).to_f/10
    if time_worked < 0
      self.errors.add(:end_time, "Must be after Start Time")
    end
  end 
```

最后——这个 SO 问题很酷，[能以小时为单位获得时间差](https://stackoverflow.com/questions/736253/rails-time-difference-in-hours)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:27:03.343

它看到 before_validates 在设置这些方法之前被调用。如果我在哪里，我会使用 before_save 来计算_time_worked。一旦设置了 attrs 并且您的验证将完成。

```
class TimeEntry < ActiveRecord::Base
  validates :start_time, :end_time, :presence => true
  validates :time_worked, :presence => true, :numericality => true
  before_save :calculate_time_worked

end 
```

# python - 使用已应用的迁移应用南迁移

> ID：11145287
> 
> 赞同：4
> 
> 时间：2012-06-21T19:21:52.213
> 
> 标签：python, django, database-migration, django-south

在我们项目的 master 分支中，我们的一个 django 应用程序的迁移如下所示：

```
# ...
(*) 0022_datamigration_1
(*) 0023_datamigration_2
(*) 0024_datamigration_3
(*) 0025_datamigration_4 
```

如您所见，这些迁移已经应用到我们的生产系统上。在我的一个分支中，我开发了一个需要大量迁移的功能：

```
(*) 0022_datamigration_1
( ) 0023_my_schemamigration_1
(*) 0023_datamigration_2
( ) 0024_my_datamigration_1
(*) 0024_datamigration_3
(*) 0025_datamigration_4
( ) 0025_my_datamigration_2
( ) 0026_my_schemamigration_2
# ... some more not yet applied schemamigrations
( ) 0030_my_datamigration_x 
```

这又是生产数据库的“迁移历史”，但由于我在更改 master 时同时处理我的功能，因此已经应用了一些迁移，现在我在历史中存在这些“空白”。南方将通过运行来拒绝应用它们`python manage.py migrate my_app`

```
 ! Migration my_app:0024_datamigration_3 should not have been applied before my_app:0024_my_datamigration_1 but was.
 ! Migration my_app:0023_datamigration_2 should not have been applied before my_app:0023_my_schemamigration_1 but was. 
```

我怎样才能摆脱那些“迁移差距”（我想我给谷歌提供了错误的关键字）？至少，迁移应该都会影响不同的模型，所以我想有可能以某种方式做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:06:15.793

首先，如果您在提交新代码之前合并迁移，您会省去很多麻烦。假设您在开发过程中生成了编号为 0023、0024 和 0025 的架构迁移。在提交任何内容之前，您应该在开始进行更改之前回滚到迁移（在本例中为 0022）：

```
python manage.py migrate someapp 0022 
```

然后，删除你的三个迁移，最后生成一个新的架构迁移：

```
python manage.py schemamigration --auto someapp 
```

现在，您只有一个迁移 0023，其中包含您所做的所有更改。这使得将您的迁移合并到其余部分变得更加容易。

然后，当您进行合并时，可能已经有 0023，例如

```
0023_someone_elses_migration.py
0023_my_migration.py 
```

只需将您的数字重命名为比最大值大一（如果现在有迁移一直到 0030，您可以将您的数字重命名为 0031）。*然后*，提交合并的代码。

但是，一般来说，良好的开发实践应该规定在任何给定时间只有一名开发人员在任何代码库上工作。这并不*总是*可能的，但总的来说，如果您正在处理“someapp”中的某些功能，并且需要对“someapp”中的其他内容进行错误修复，*那么您*应该是这样做的人。即使更改将在完全不同的分支中进行，您也可以通过将更改合并回您正在处理的任何其他内容来进行补偿，而其他开发人员则不知道。

# database - 可移动表单上的 MS Access / 在其自己的窗口中拥有一个不受应用程序限制的表单

> ID：11145293
> 
> 赞同：3
> 
> 时间：2012-06-21T19:22:10.910
> 
> 标签：database, ms-access, vba

我有一个问题应该让你们快速轻松地回答。我的应用程序有大约 25 个表单，默认情况下它们位于它们自己的窗口中，并且不受 ms 访问选项卡的限制。我制作的一种特殊形式是在选项卡视图中打开，贴在 ms 访问窗口中。什么属性（或表单加载/打开事件上的必要代码）需要将此表单作为单独的窗口，而不是停留在 ms 访问（最好使用右上角的最小化/最大化按钮。这是我的属性：

![此表单的属性](../Images/6b6b152c90f5f66eec6fd289ca6e41c6.png)

我还要注意，它不允许我将“可移动”选项更改为“是”。当我的所有其他表单都在单独的窗口中打开并且这个表单隐藏在 MS Access 上时，这是一种痛苦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T19:24:43.217

如果我理解正确，您想要`pop up`在选项卡上找到的属性`other`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T11:02:51.467

感谢为我的 Access 2007 数据库工作。有趣的是，在不同的 Access 2003 格式数据库（在 Access 2007 中打开）上，我将其与 进行比较，可移动设置为是，而“弹出”设置为否，但窗口已分离。

谢谢

克里斯蒂安

# windows-phone-7 - 通过情节提要的 WP7 动画

> ID：11145299
> 
> 赞同：0
> 
> 时间：2012-06-21T19:22:35.980
> 
> 标签：windows-phone-7, storyboard

我已经浏览了[此](http://windowsphonegeek.com/articles/WP7-Animations-in-depthndash-Overview-and-Getting-Started)页面上的淡入/淡出教程：

对于下一个增量，我希望图像只是水平移动。例如，如果我得到 10 张图像并将它们排成一行，我怎样才能让它们慢慢地从屏幕上移开。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:42:10.367

我的问题可能会有所帮助：[Wp7 Storyboard Animation Setting Appearing Horizo​​n](https://stackoverflow.com/questions/11092134/wp7-storyboard-animation-setting-appearing-horizon)

我使用的情节提要代码使用缓动功能在屏幕上水平移动图像（如果需要，可以取出该部分）。如果你把它放进去，你可以使用它

```
 <phone:PhoneApplicationPage.Resources>
         ......
    </phone:PhoneApplicationPage.Resources> 
```

然后你可以像这样从代码隐藏中调用它：

```
 Storyboard myAnimation = this.Resources["newsIn"] as Storyboard;
    myAnimation.Completed += delegate
        {
           //Do something
        }
    Storyboard.SetTarget(myAnimation, this.ObjectToMove);
    myAnimation.Begin(); 
```

希望对您有所帮助，如果您还需要什么，请告诉我。

# c++ - 子类化QGraphicsView，自定义鼠标事件

> ID：11145309
> 
> 赞同：0
> 
> 时间：2012-06-21T19:22:57.813
> 
> 标签：c++, qt, events, mouseevent, qgraphicsview

我是 QGraphicsView 的子类，我想做的是：如果在鼠标移动时按下 MidButton ，那么我们就像使用常规的 QGraphicsView 动作过程一样，但按下左按钮正在滑动图像.

我尝试对其进行编码，但它似乎不起作用，我不知道为什么。

```
void MyQGraphicsView::mouseMoveEvent(QMouseEvent *event)
{
    if (event->buttons() == Qt::MidButton)
    {
        QMouseEvent event2(QEvent::MouseMove, event->pos(), Qt::NoButton, Qt::LeftButton, Qt::NoModifier);
        QGraphicsView::mouseMoveEvent(&event2);
    }
} 
```

任何帮助，将不胜感激。

编辑：删除了安东尼指出的明显错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:41:53.053

有几个问题。首先，测试条件应该使用`testFlags`而不是`==`。其次，您正在创建事件，`Qt::MidButton`它应该是`Qt::LeftButton`. 最后，你还需要做一个类似的测试`mousePressEvent`（让QGraphicsView可以知道启动手拖）。

```
void mousePressEvent(QMouseEvent *event)
{
    if (event->buttons().testFlag(Qt::MidButton))
    {
        QMouseEvent event2(QEvent::MouseButtonPress, event->pos(), Qt::LeftButton, Qt::LeftButton, Qt::NoModifier);

        // do default behavior as if you pressed the left button
        QGraphicsView::mousePressEvent(&event2);
    }
    else
    {
        QGraphicsView::mousePressEvent(event);
    }
}
void mouseMoveEvent(QMouseEvent *event)
{
    if (event->buttons().testFlag(Qt::MidButton))
    {
        QMouseEvent event2(QEvent::MouseMove, event->pos(), Qt::NoButton, Qt::LeftButton, Qt::NoModifier);

        // do default behavior as if you pressed the left button
        QGraphicsView::mouseMoveEvent(&event2);
    }
    else
    {
        QGraphicsView::mouseMoveEvent(event);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:17:13.527

您似乎的目标是将“手拖”模式的触发按钮从左侧按钮更改为中间按钮。

虽然事件更改方法有效，但它存在一些问题：当`QGraphicsView`处于“手动拖动”模式时，它仍然会传播不会拖动的左键单击到场景/项目。这意味着如果您在没有拖动的情况下单击并释放，它会认为您在没有拖动的情况下*单击*并释放。您将有效地触发对场景的左键单击。

您可以改为覆盖中键单击的行为以直接滚动场景。此代码取自`QGraphicsView::mouseMoveEvent()`：

```
void View::mousePressEvent(QMouseEvent *event)
{
    _lastPos = event->pos();
    QGraphicsView::mousePressEvent(event);
}

void View::mouseMoveEvent(QMouseEvent *event)
{
    if (event->buttons().testFlag(Qt::MidButton))
    {
        QScrollBar *hBar = horizontalScrollBar();
        QScrollBar *vBar = verticalScrollBar();
        QPoint delta = event->pos() - _lastPos;
        _lastPos = event->pos();
        hBar->setValue(hBar->value() + (isRightToLeft() ? delta.x() : -delta.x()));
        vBar->setValue(vBar->value() - delta.y());
    }
    QGraphicsView::mouseMoveEvent(event);
} 
```

# java - ServerSocket - 如何保留客户端套接字 ID

> ID：11145310
> 
> 赞同：1
> 
> 时间：2012-06-21T19:23:03.783
> 
> 标签：java, sockets, inheritance

我试图将 Socket 对象扩展为...

```
public class TestSocket extends Socket
{
  private String id=String.valueOf(Math.random());

  ...

  public void setId(String id){this.id=id;}
  public String getId(){return this.id;}

} 
```

初始化为...

```
TestSocket testSocket = new TestSocket(SERVER_HOSTNAME, SERVER_PORT); 
```

如我所见，服务器端 ServerSocket 标准代码就像一个

```
TestSocket mySocket = (TestSocket) serverSocket.accept(); 
```

...根据[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#accept%28%29)accept() 方法重新初始化套接字对象并返回一个新对象，因此 id 值不是客户端的值，而是重新生成的 :(

是否可以保留客户ID？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:52:22.567

我假设这条线

```
TestSocket mySocket = (TestSocket) serverSocket.accept(); 
```

会引发 a`ClassCastException`因为`java.io.ServerSocket.accept()`返回 class 的实例`Socket`，而不是`TestSocket`（除非您从 ServerSocket 继承）。

如果要连接两个套接字，您可能必须通过连接发送 ID 并将其设置在接收端，例如：

```
public void sendID() {
   DataOutputStreak dos = new DataOutputStream(getOuputStream());
   dos.writeUTF(this.getId());
}

public void receiveID() {
   DataInputStream dis = new DataInputStream(getInputStream());
   setId(dis.readUTF());
} 
```

您的两个测试套接字之一将调用一个方法，另一个调用另一个方法。但是，我不会从 Socket 类继承来执行此操作，而是在更高级别上处理此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:34:16.370

您可以做的一件事是将套接字保存在数据结构中，即。一张地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T00:07:26.443

接受的套接字返回的值`getRemoteSocketAddress()`是唯一的（因为客户端将具有不同的 IP 地址或同一 IP 地址内的不同端口）。这就是你所需要的。

# objective-c - 在 Cocoa 中如何实时处理滑块变化？

> ID：11145311
> 
> 赞同：1
> 
> 时间：2012-06-21T19:23:07.687
> 
> 标签：objective-c, cocoa

非常菜鸟的问题，我知道，但我没有设法处理实时滑块移动动作，我得到的唯一结果是一旦 mouseup 事件发生就会触发某些动作。但是，如果我想要，例如，当我移动它时，标签文本与滑块一起改变，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:26:48.143

选择 xib 文件中的滑块。然后选择属性检查器选项卡。在状态部分，选中“连续”复选框以使滑块实时更新。 ![在此处输入图像描述](../Images/756dc517198b8586d0fc623a67682eeb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:26:56.140

为 in Interface Buider 启用持续更新`NSSlider`并实现以下委托：

```
- (IBAction)sliderChanged:(id)sender {
} 
```

# c# - 在 C# 代码（WPF 项目）中，我可以在情节提要的特定点引发事件吗

> ID：11145313
> 
> 赞同：0
> 
> 时间：2012-06-21T19:23:11.827
> 
> 标签：c#, wpf, events, storyboard

我有一个故事板，它可以自动反向运行，让我们说 10 秒。

无论如何，我可以让故事板本身沿着故事板时间线每 2 秒引发一个事件。

故事板仅存在于 c# 代码（不是 xaml）中。

我希望这足以继续，但是，如果需要更多信息，请询问，我会解释我在做什么。

提前致谢

担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:28:51.767

故事板时间线提供了一些事件，这可能会有所帮助……例如：

```
private Storyboard stb = new Storyboard();
private TimeSpan tsp = new TimeSpan();

public MainWindow()
{
    InitializeComponent();
    stb.CurrentTimeInvalidated += new EventHandler(doSomething);            
}

private void doSomething(Object sender, EventArgs e)
{
    Clock storyboardClock = (Clock)sender;
        // or whatever other logic you want
    if (storyboardClock.CurrentTime.Value.Seconds % 2 == 0 && 
       Math.Abs((storyboardClock.CurrentTime.Value - tsp).TotalSeconds) >= 2)
    {
        // or something like this...
        tsp = storyboardClock.CurrentTime.Value
         - new TimeSpan(0,0,0,0,storyboardClock.CurrentTime.Value.Milliseconds);
        // do something
    }
} 
```

查看 ：

[MSDN - CurrentTimeInvalidated](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.currenttimeinvalidated%28v=vs.90%29.aspx)

[MSDN - CurrentStateInvalidated](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.currentstateinvalidated%28v=vs.90%29.aspx)

# java - 使用 Apache POI 读取 Excel .XLSX 时出错

> ID：11145323
> 
> 赞同：7
> 
> 时间：2012-06-21T19:23:57.400
> 
> 标签：java, apache-poi, xlsx

我正在使用 Apache POI 3.8 库来读取 Web 应用程序中的 XLSX 文件。以下代码在 Java 控制台应用程序中运行良好：

```
InputStream inputFS = new FileInputStream("test.xlsx");
Workbook workbook = new XSSFWorkbook(inputFS); // below exception is thrown on this line
Sheet sheet = workbook.getSheetAt(0); 
```

但在 Web 应用程序中使用时会引发“读取错误”。堆栈跟踪的相关摘录粘贴在下面：

```
java.io.IOException: Read error
at java.io.FileInputStream.readBytes(Native Method) ~[na:1.6.0_31]
at java.io.FileInputStream.read(Unknown Source) ~[na:1.6.0_31]
at java.io.FilterInputStream.read(Unknown Source) ~[na:1.6.0_31]
at java.io.PushbackInputStream.read(Unknown Source) ~[na:1.6.0_31]
at java.util.zip.ZipInputStream.readFully(Unknown Source) ~[na:1.6.0_31]
at java.util.zip.ZipInputStream.readLOC(Unknown Source) ~[na:1.6.0_31]
at java.util.zip.ZipInputStream.getNextEntry(Unknown Source) ~[na:1.6.0_31]
at org.apache.poi.openxml4j.util.ZipInputStreamZipEntrySource.<init>(ZipInputStreamZipEntrySource.java:51) ~[poi-ooxml-3.8-20120326.jar:3.8]
at org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:83) ~[poi-ooxml-3.8-20120326.jar:3.8]
at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:228) ~[poi-ooxml-3.8-20120326.jar:3.8]
at org.apache.poi.util.PackageHelper.open(PackageHelper.java:39) ~[poi-ooxml-3.8-20120326.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:187) ~[poi-ooxml-3.8-20120326.jar:3.8]
at com.corp.ReportManager.parseExcelReport(ReportManager.java:575) [ReportManager.class:na] 
```

类路径中包含以下 JAR（以相同的顺序）：

```
poi-3.8-20120326.jar
poi-ooxml-3.8-20120326.jar
poi-ooxml-schemas-3.8-20120326.jar
xbean.jar
dom4j-1.6.1.jar 
```

似乎没有与内存相关的问题，因为我在调用上述代码之前收集了一些堆利用率统计信息。XLSX 文件大小为 1.15 MB。

```
##### Heap utilization statistics [MB] #####
Used Memory:13 MB
Free Memory:9 MB
Total Memory:23 MB
Max Memory:247 MB 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:18:18.853

使用上述代码的方法只有一个参数——FileInputStream。代码片段中的第一行是代码的一部分，但也是调用方法的一部分。由于所讨论的方法不了解 Excel 格式，甚至没有文件扩展名来进行有根据的猜测，我决定首先尝试使用 HSSF API 读取 FileInputStream，如下所示：

```
Sheet sheet = null;
try {

    POIFSFileSystem poifs = new POIFSFileSystem(inputFS);
    Workbook workbook = new HSSFWorkbook(poifs);
    sheet = workbook.getSheetAt(0);
}
catch (Exception e) {
}

if (sheet == null) {

    try {

        Workbook workbook = new XSSFWorkbook(inputFS);
        sheet = workbook.getSheetAt(0);
    }
    catch (Exception e) {
    }
} 
```

上述代码的问题在于，`inputFS`在第二次尝试通过 XSSF API 打开对象期间，对象的状态是未知的。这产生了一个`read error`. 我用以下代码替换了上面的代码，它工作正常，问题似乎已经解决：

```
Sheet sheet = null;
try {

    Workbook workbook = WorkbookFactory.create(inputFS);
    sheet = workbook.getSheetAt(0);
}
catch (Exception e) {
} 
```

我用 XLS（旧的，二进制）和 XLSX（新的，基于 XML）格式测试了它，它可以工作。感谢大家的帮助和投入！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:56:02.523

异常表明您的 InputStream 有问题。但是，如果您有文件，请直接将其传递给 POI！使用 InputStream 需要将所有内容缓冲到内存中，这会占用空间。由于您不需要进行缓冲，因此不要！无论如何，避免缓冲应该可以解决您的问题

如果您使用 POI 的最新夜间版本运行，那么这非常容易。您的代码变为：

```
File file = new File("test.xlsx");
OPCPackage opcPackage = OPCPackage.open(file);
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

否则，它非常相似：

```
File file = new File("test.xlsx");
OPCPackage opcPackage = OPCPackage.open(file.getAbsolutePath());
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

如果您不确定您的文件是 HSSFWorkbook 还是 XSSFWorkbook，那么您可以使用 WorkbookFactory 为您打开相应的文件：

```
File file = new File("test.xlsx");
Workbook workbook = WorkbookFactory.create(file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:48:17.340

看起来你需要使用他们的[XSSF API](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-14T06:15:29.827

我有同样的错误，我刚刚用相同的版本更新了 pom 依赖项。有效。

```
 <!-- https://mvnrepository.com/artifact/org.apache.poi/poi -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>4.1.0</version>
        </dependency>
        <!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>4.1.0</version>
        </dependency> 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-12-24T18:54:55.117

使用这个罐子

```
<dependency>
    <groupId>org.apache.xmlbeans</groupId>
    <artifactId>xmlbeans</artifactId>
    <version>2.3.0</version>
</dependency> 
```

# resize - 最大化/恢复窗口或拖动调整大小栏 (SmartGWT) 时图表无法正确呈现

> ID：11145324
> 
> 赞同：0
> 
> 时间：2012-06-21T19:23:59.073
> 
> 标签：resize, highcharts, smartgwt

我是 SmartGWT 的新手，遇到这个问题很长时间了，无法解决。

在我最大化/恢复窗口后，图表不在正确的位置并且没有调整大小，当我在窗口中拖动调整大小栏时存在同样的问题。然而，在我拖动窗口的边缘后，即使只是一点点，图表也可以正确呈现。（好像有延迟什么的）

我希望我的图表可以立即正确呈现窗口最大化/恢复，或者当我拖动调整大小栏时。不要试图每次都拖动窗口的边缘来纠正它。

请看下面的简单案例：（我正在使用 HighCharts 绘制图表）

```
import org.moxieapps.gwt.highcharts.client.Chart;
import org.moxieapps.gwt.highcharts.client.Point;
import org.moxieapps.gwt.highcharts.client.Series;
import org.moxieapps.gwt.highcharts.client.ToolTip;
import org.moxieapps.gwt.highcharts.client.ToolTipData;
import org.moxieapps.gwt.highcharts.client.ToolTipFormatter;
import org.moxieapps.gwt.highcharts.client.labels.PieDataLabels;
import org.moxieapps.gwt.highcharts.client.plotOptions.PiePlotOptions;
import org.moxieapps.gwt.highcharts.client.plotOptions.PlotOptions;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.RootPanel;
import com.smartgwt.client.widgets.layout.HLayout;
import com.smartgwt.client.widgets.layout.VLayout;

public class Test1 implements EntryPoint {

    public void onModuleLoad() {

        Window.enableScrolling(true);
        Window.setMargin("0px");

        HLayout mainLayout = new HLayout();
        mainLayout.setWidth100();
        mainLayout.setHeight100();

        VLayout vl1 = new VLayout();
        vl1.setWidth(250);
        vl1.setHeight100();
        vl1.setShowResizeBar(true);

        VLayout vl2 = new VLayout();

        vl2.setWidth100();
        vl2.setHeight100();

        HLayout top = new HLayout();
        HLayout bottom = new HLayout();
        VLayout topLeft = new VLayout();
        VLayout topRight = new VLayout();
        VLayout bottomLeft = new VLayout();
        VLayout bottomRight = new VLayout();

        topLeft.addMember(drawCharts());
        topRight.addMember(drawCharts());
        bottomLeft.addMember(drawCharts());
        bottomRight.addMember(drawCharts());

        top.setMembers(topLeft, topRight);
        bottom.setMembers(bottomLeft, bottomRight);

        vl2.setMembers(top, bottom);

        mainLayout.setMembers(vl1, vl2);

        RootPanel.get().add(mainLayout);
    }

    private Chart drawCharts() {

        final Chart chart = new Chart()
                .setType(Series.Type.PIE)
                .setPlotBackgroundColor((String) null)
                .setPlotBorderWidth(null)
                .setPlotShadow(false)
                .setOption("/chart/marginTop", 0)
                .setOption("/chart/marginBottom", 10)
                .setPiePlotOptions(
                        new PiePlotOptions()
                                .setAllowPointSelect(true)
                                .setCursor(PlotOptions.Cursor.POINTER)
                                .setPieDataLabels(
                                        new PieDataLabels().setEnabled(false))
                                .setShowInLegend(true))
                .setToolTip(new ToolTip().setFormatter(new ToolTipFormatter() {
                    public String format(ToolTipData toolTipData) {
                        return "<b>" + toolTipData.getPointName() + "</b>: "
                                + toolTipData.getYAsDouble() + " %";
                    }
                }));
        chart.addSeries(chart
                .createSeries()
                .setName("Browser share")
                .setPoints(
                        new Point[] {
                                new Point("Firefox", 45.0),
                                new Point("IE", 26.8),
                                new Point("Chrome", 12.8).setSliced(true)
                                        .setSelected(true),
                                new Point("Safari", 8.5),
                                new Point("Opera", 6.2),
                                new Point("Others", 0.7) }));

        return chart;
    }
} 
```

我是否需要添加调整大小处理程序来解决此问题？

或者可能是图表布局的问题？我将该区域分为四个部分（top_left、top_right、bottom_left、bottom_right）并将图表放入每个部分。

有人知道如何解决这个困扰我很长时间的问题吗？赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:36:23.973

首先，我相信你的浏览器分享不是很准确（笑）。

快速查看您的代码，您似乎正在将 GWT 图表与 SmartGWT 混合使用，这并不完全受支持。

您将不得不在此处添加一些手动处理调整大小事件。

看看这个帖子：

[http://forums.smartclient.com/showthread.php?t=8159#aContainer](http://forums.smartclient.com/showthread.php?t=8159#aContainer)

简要说明就在这里：

[http://forums.smartclient.com/showthread.php?t=8159#aMix](http://forums.smartclient.com/showthread.php?t=8159#aMix)

# c# - 如何在 C# 中重定向来自 NASM 命令行汇编程序的输出

> ID：11145328
> 
> 赞同：3
> 
> 时间：2012-06-21T19:24:15.640
> 
> 标签：c#, ide, nasm

# 简要总结

我正在为 C# 中的 NASM 开发创建一个轻量级 IDE（我知道有点讽刺）。有点像记事本++，但更简单，但具有使其不仅仅是源代码编辑器的功能。因为 Notepad++ 实际上只是一个花哨的源代码编辑器。我已经实现了项目创建等功能（使用类似于 Visual Studio 组织项目的项目格式）。项目扩展名 .nasmproj。我也在将它托管在一个开源的地方（Codeplex）。虽然程序远未完成，但如果没有适当的保护和设备，绝对不能在生产环境中使用。此外，我现在独自工作，更像是一个业余项目，因为我刚刚完成了上一个夏季期末考试微积分 I。

# 问题

现在我面临一个问题，我可以构建项目，但没有来自 NASM 的输出被输入 IDE。我已经成功构建了一个项目，并且能够生成目标文件。我什至尝试产生一个语法错误，看看我是否终于看到了一些东西，但没有，我检查了我创建的测试项目的 bin 文件夹，我没有看到任何目标文件创建。所以绝对 NASM 正在发挥它的魔力。是不是因为 NASM 不希望我看到它的输出。有解决办法吗？任何建议都会很棒。这是我认为给麻烦的代码。

# 注意事项

*   我已经检查过是否调用了事件。是的，他们有，但他们返回空字符串
*   我还检查了错误数据和相同的效果。

# 代码

```
 public static bool Build(string arguments,  out Process nasmP)
    {
        try
        {

            ProcessStartInfo nasm = new ProcessStartInfo("nasm", arguments);
            nasm.CreateNoWindow = true;
            nasm.RedirectStandardError = true;
            nasm.RedirectStandardInput = true;
            nasm.RedirectStandardOutput = true;

            nasm.UseShellExecute = false;                
            nasmP = new Process();
            nasmP.EnableRaisingEvents = true;
            nasmP.StartInfo = nasm;
            bool predicate = nasmP.Start();
            nasmP.BeginOutputReadLine();

            return true;
        }
        catch
        {
            nasmP = null;
            return false;
        }
    }
    //Hasn't been tested nor used
    public static bool Clean(string binPath)
    {
        if (binPath == null || !Directory.Exists(binPath))
        {
            throw new ArgumentException("Either path is null or it does not exist!");
        }
        else
        {
            try
            {
                DirectoryInfo binInfo = new DirectoryInfo(binPath);
                FileInfo[] filesInfo = binInfo.GetFiles();
                for (int index = 0; index < filesInfo.Length; index++)
                {
                    try
                    {
                        filesInfo[index].Delete();
                        filesInfo[index] = null;
                    }
                    catch
                    {
                        break;
                    }
                }
                GC.Collect();
                return true;
            }
            catch
            {
                return false;
            }
        }
    }
} 
```

* * *

```
 using (BuildDialog dlg = new BuildDialog(currentSolution))
                    {
                        DialogResult result = dlg.ShowDialog();
                        dlg.onOutputRecieved += new BuildDialog.OnOutputRecievedHandler(delegate(Process _sender, string output)
                        {
                            if (result == System.Windows.Forms.DialogResult.OK)
                            {
                                outputWindow.Invoke(new InvokeDelegate(delegate(string o)
                                {
                                    Console.WriteLine("Data:" + o);
                                    outputWindow.Text = o;
                                }), output);
                            }
                        });

                    } 
```

# 编辑

*   我尝试过同步而不是异步进行，但实际上通过调试流已经结束，结果仍然相同（并且返回空字符串“”）。所以看起来没有任何东西被写入流中。

这是我尝试过的：

```
 string readToEnd = nasmP.StandardOutput.ReadToEnd();
            nasmP.WaitForExit();
            Console.WriteLine(readToEnd); 
```

我尝试过的另一件有趣的事情是我从调试器中复制了参数并将其粘贴到命令行 shell 中，我可以看到 NASM 正在编译并给出我一直想看到的错误。所以绝对不是NASM问题。这可能是我的代码或 .Net 框架的问题。

这是一个漂亮的 shell 窗口快照（虽然在技术上没有证明；这是我的 IDE 中的输出应该是这样的）：

![假设显示的输出](../Images/ab50f3e92bded4c918405e0c32a2f88e.png)

Alan 提出了一个很好的观点，检查子进程或线程。子进程和线程是同义词吗？但问题就在这里。除了少数几个属性和输出/错误流之外，几乎所有属性都引发了无效操作。这是作为图像的调试器信息（我希望 Visual Studio 允许您在单击时复制整个信息）：

![调试器信息](../Images/43a6d0d58d032a3fae500d3fd5041cc7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:34:05.130

好吧，我终于能够做到了。我刚刚发现了这个从进程重定向输出的[控件](http://www.codeproject.com/Articles/9621/ShellControl-A-console-emulation-control)，我只是查看了它的源代码并得到了我需要做的事情。这是修改后的代码：

```
public static bool Build(string command, out StringBuilder buildOutput)
        {
            try
            {
                buildOutput = new StringBuilder();
                ProcessStartInfo startInfo = new ProcessStartInfo("cmd.exe");
                startInfo.Arguments = "/C " + " nasm " + command;
                startInfo.RedirectStandardError = true;
                startInfo.RedirectStandardOutput = true;
                startInfo.UseShellExecute = false;
                startInfo.CreateNoWindow = true;
                Process p = Process.Start(startInfo);
                string output = p.StandardOutput.ReadToEnd();
                string error = p.StandardError.ReadToEnd();
                p.WaitForExit();
                if (output.Length != 0)
                    buildOutput.Append(output);
                else if (error.Length != 0)
                    buildOutput.Append(error);
                else
                    buildOutput.Append("\n");
                return true;
            }
            catch
            {
                buildOutput = null;
                return false;
            }
        } 
```

以下是输出的格式如下：

![带输出的 IDE](../Images/e32fcc645e8c78fff370142e5eeb1283.png)

我还要感谢 Alan 帮助我调试我的代码，尽管他实际上并没有我的代码。但他真的很有帮助，我为此感谢他。

# recursion - 使用 Lua 对象进行递归搜索

> ID：11145329
> 
> 赞同：2
> 
> 时间：2012-06-21T19:24:19.257
> 
> 标签：recursion, lua, pseudocode

在 Lua 中，我在对象之间有一个树关系结构，其中一个对象可以有多个子对象，但只有一个父对象，即

obj---obj1---obj2---objd3---obj4---obj5---obj6

如果我想知道 obj6 的“远方”父母，而不仅仅是直接父母 obj5，我该如何实现呢？我只需要比当前对象高两个或更多级别的父级列表，而我正在使用的 API 只有一个 obj.parent 属性。

伪代码也有助于让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:48:22.710

```
obj.parent               -- immediate parent (obj5)
obj.parent.parent        -- parent's parent (obj4)
obj.parent.parent.parent -- parent's parent's parent (obj3) 
```

等等等等？

如果您想避免尝试引用不存在的父级，我想您可以执行以下操作：

```
function getAncestor(obj, depth)
   if not obj.parent then
      return nil
   elseif depth > 1 then
      return getAncestor(obj.parent, depth-1)
   end
   return obj.parent
end

-- get parent
obj = getAncestor(obj6)

-- get great great grandparent
obj = getAncestor(obj6, 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:28:21.137

好吧，如果您的 api 支持`.parent`，您不能执行以下操作吗？我对 Lua 生疏了，但这应该是一个开始。

```
local function GetAncestors(child)

    local ancestors = {};

    if child.parent then
        local i = 0;
        ancestors[0] = child.parent;
        while ancestors[i].parent do
            ancestors[i + 1] = ancestors[i].parent;
            i = i + 1;
        end
    end

    return ancestors;

end 
```

# objective-c - NSTimer 在触发时会导致“无法识别的选择器”崩溃

> ID：11145333
> 
> 赞同：3
> 
> 时间：2012-06-21T19:24:37.197
> 
> 标签：objective-c, ios, selector, nstimer

我正在使用 a`NSTimer`来运行动画（现在只需调用它`myMethod`）。但是，它会导致崩溃。

这是代码：

```
@implementation SecondViewController

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.

- (void) myMethod
{
    NSLog(@"Mark Timer Fire");

}

- (void)viewDidLoad
{ 
[super viewDidLoad];

NSLog(@"We've loaded scan");

[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self
                               selector:@selector(myMethod:)
                               userInfo:nil
                                repeats:YES];

animationTimer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(myMethod:) userInfo:nil repeats: YES];

} 
```

这是崩溃期间的输出

> -[SecondViewController myMethod:]：无法识别的选择器发送到实例 0x4b2ca40 2012-06-21 12:19:53.297 Lie Detector[38912:207] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[SecondViewController myMethod:] : 无法识别的选择器发送到实例 0x4b2ca40'

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-17T16:51:41.363

我在使用 Swift 时遇到了这个问题。在 Swift 中我发现 NSTimer 的目标对象必须是 NSObject 可能不是很明显。

```
class Timer : NSObject {
   init () { super.init() }
   func schedule() {
      NSTimer.scheduledTimerWithTimeInterval(2.0,
                             target: self,
                             selector: "myMethod",
                             userInfo: nil,
                            repeats: true)
  }
  func myMethod() {
     ...
  }
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T19:55:30.110

要么你只能使用

```
- (void)myMethod: (id)sender
{
 // Do things
} 
```

或者您可以这样做（从方法名称中删除 : ）..

```
animationTimer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(myMethod) userInfo:nil repeats: YES]; 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T19:29:23.857

替换这个

```
[NSTimer scheduledTimerWithTimeInterval:2.0
                             target:self
                           selector:@selector(myMethod:)
                           userInfo:nil
                            repeats:YES]; 
```

这样

```
[NSTimer scheduledTimerWithTimeInterval:2.0
                             target:self
                           selector:@selector(myMethod)
                           userInfo:nil
                            repeats:YES]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T19:50:02.067

计时器的操作方法[应采用一个参数](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html#//apple_ref/doc/uid/20000807-SW1)：

```
- (void)myMethod: (NSTimer *)tim
{
     // Do things
} 
```

此方法的名称是`myMethod:`，包括冒号。您当前方法的名称是`myMethod`，*没有*冒号，但是您通过传递具有它的方法名称来创建计时器：`selector:@selector(myMethod:)`。

当前，计时器将消息发送`myMethod:`到您的对象；您的对象不响应（但会响应`myMethod`）并引发异常。

# python - 通过 elementree 将标签替换为符号

> ID：11145334
> 
> 赞同：0
> 
> 时间：2012-06-21T19:24:40.763
> 
> 标签：python, xml, elementtree

我有这样的xml：

```
<rule>
    <word>I</word>
    <word>need</word>
    <word>more</word>
    <marker>
    <word>money</word>
    </marker>
    <word>now</word>
</rule> 
```

我可以通过以下方式获取文本：

```
 import xml.etree.ElementTree as ET
 tree = ET.parse("1.xml")
 for rule in tree.iter("rule"):
    for word in rule.iter("word"):
        print "%s" % word.text, 
```

我会得到：

```
I need more money now 
```

如何将标记标签替换为（和 /marker 为）。换句话说，结果必须是：

```
I need more (money) now 
```

elementtree可以吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:55:02.410

与其只迭代 的`word`孩子`rule`，不如迭代 的所有孩子`rule`并采取相应的行动。下面应该给你一个想法：

```
import xml.etree.ElementTree as ET
tree = ET.parse("1.xml")
for rule in tree.iter("rule"):
    for child in rule:
        if child.tag == 'word':
            print "%s" % child.text
        elif child.tag == 'marker':
            print "("
            for subchild in child:
                if subchild.tag == 'word':
                    print "%s" % subchild.text
            print ")" 
```

这当然可以变得更加 Pythonic，但它应该给你一个想法。

# java - C++ 和 Java 之间的表达式求值顺序有何不同？

> ID：11145337
> 
> 赞同：9
> 
> 时间：2012-06-21T19:24:43.183
> 
> 标签：java, c++, operator-precedence, post-increment, pre-increment

试图理解此页面上的示例使我的大脑皱巴巴： [http ://answers.yahoo.com/question/index?qid=20091103170907AAxXYG9](http://answers.yahoo.com/question/index?qid=20091103170907AAxXYG9)

更具体地说，这段代码：

```
int j = 4;
cout << j++ << j << ++j << endl; 
```

给出输出：566

现在，如果表达式从右到左求值，这对我来说是有意义的，但是在 Java 中是一个类似的表达式：

```
int j = 4;
System.out.print("" + (j++) + (j) + (++j)); 
```

给出的输出：456

哪个更直观，因为这表明它是从左到右评估的。在各个站点上对此进行了研究，似乎对于 C++，编译器之间的行为有所不同，但我仍然不相信我理解。Java 和 C++ 之间的这种评估差异的解释是什么？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T19:30:34.783

当一个操作有副作用时，C++ 依赖[*序列点*](http://en.wikipedia.org/wiki/Sequence_point)规则来决定副作用（例如增量、组合赋值等）何时必须生效。逻辑`and-then`/ `or-else`(`&&`和`||`) 运算符、三元`?`问号运算符和逗号创建序列点；`+`, `-`,`<<`等等不。

相反，Java 在进行进一步评估之前会完成副作用。

当您在没有序列点的情况下多次使用具有副作用的表达式时，所产生的行为在 C++ 中是未定义的。任何结果都是可能的，包括没有逻辑意义的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T19:33:22.823

Java 保证运算符的操作数看起来是以特定的评估顺序进行评估的，即从左到右。在评估右侧操作数的任何部分之前，二元运算符的左侧操作数似乎已被完全评估。Java 还保证在执行操作本身的任何部分之前，运算符的每个操作数（条件运算符 、 和 除外`&&`）`||`似乎`?:`都已被完全评估。有关更多详细信息，请参阅 Java 语言规范 §15.7。

另一方面，如果表达式不明确，C++ 很高兴让您摆脱未定义的行为，因为语言本身不保证子表达式的任何求值顺序。有关详细信息，请参阅[序列点。](http://en.wikipedia.org/wiki/Sequence_point)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T19:30:09.947

在 C++ 中，子表达式的求值顺序不是从左到右也不是从右到左。它是*未定义*的。

# java - src 文件夹外的 applicationContext xml 文件

> ID：11145340
> 
> 赞同：0
> 
> 时间：2012-06-21T19:24:46.853
> 
> 标签：java, spring

有没有办法将 applicationContext.xml 放入 WEB-INF 文件夹？我特定于 WEB-INF 文件夹，因为我知道它可以放在 WEB-INF\classes 文件夹中。
根据要求，客户端应该能够根据他们的设置配置 applicationContext.xml。
我想到了另一种选择，将 xml 配置文件从 WEB-INF 文件夹导入到 applicationContext.xml。但我还没有尝试过，不确定它有多可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:32:16.647

是的，你可以这样做，但是类路径是放置它们的一个非常合乎逻辑的地方。

在您的 web.xml 中，在“contextConfigLocation”的定义中，只需将 /WEB-INF/applicationContext.xml 添加到该部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:07:56.000

如果您在 web.xml 中添加它，那么您可以访问 applicationContext

```
<context-param>
    <param-name>contextConfigLocation</param-name>
       <param-value>
       /WEB-INF/applicationContext.xml
       </param-value>
</context-param> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:38:45.923

从你的需求来看，放在 WEB-INF 和 WEB-INF/classes 目录下绝对没有区别：无论哪种方式都需要在部署后从爆炸的 WAR/EAR 中访问，这可能是不可能的如果您的应用服务器不爆炸它（即，JBoss 可以直接与 WAR 一起工作）。

IMO，您的解决方案是停止使用 WebApplicationContext 实现。使用应该在 ServletContextListener 中初始化的 DefaultListableBeanFactory，手动读取配置文件。这样，您可以从 ApplicationServer 环境（使用 JNDI 或任何适合您的方法）获取 applicationContextFile 的路径，因此它可以放置在 Application Server 所在机器的任何位置。

至少这就是我们所做的，出于同样的原因。

# javascript - 专注于使用 jquery 引导 textarea

> ID：11145345
> 
> 赞同：3
> 
> 时间：2012-06-21T19:25:16.087
> 
> 标签：javascript, jquery, twitter-bootstrap

我无法专注于使用 jquery 和 bootstrap 的网页上的文本区域。这应该是一项微不足道的工作，但我不明白为什么它不能按应有的方式工作。

```
$('#textarea').focus(); 
```

默认情况下，bootstrap 会为焦点区域发出蓝光（请参阅[http://twitter.github.com/bootstrap/base-css.html?#forms](http://twitter.github.com/bootstrap/base-css.html?#forms)）。不幸的是，上面的行似乎没有完成这项工作。

更具体地说，我有一个打开的按钮，显示带有编辑器（文本区域）的侧窗格。我的目标是在显示窗格后自动将焦点发送到文本区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:38:27.860

我刚刚在您引用`$("#input01").focus();`的[引导页面](http://twitter.github.com/bootstrap/base-css.html?#forms)上进行了测试。很好地使用 id 聚焦输入`input01`，它变成蓝色。所以这对我说，专注于引导程序样式的输入元素工作正常。事实上，您看到的蓝色光芒只是基于`:focus`引导程序样式中的 css 选择器，因此只要您正确选择了元素，样式应该可以正常工作。

我的猜测是您的`focus()`调用要么使用了错误的 jQuery 选择器，要么可能与页面上发生的其他内容不同步，例如侧窗格的显示。在选择它之前确保`#textarea`元素存在。

如果您发布更具体的代码，我可以为您提供更具体的答案。

# regex - 正则表达式在两个条件后运行

> ID：11145351
> 
> 赞同：0
> 
> 时间：2012-06-21T19:25:36.017
> 
> 标签：regex, perl, sed, awk

嘿伙计们，这应该很简单，我只是没有看到它，我想创建一个正则表达式（在 PERL、Awk、SED / *nix 下可用），它将在找到领先的现金 ($) 后运行，下一个相等 (=) 并处理双引号或单引号的第一个实例与双引号或单引号的最后一个实例之间的内容。

让我举几个例子。

```
$this = 'operate on some text in here'; # operates between single quotes
$this = "operate on some text in here"; # operates between double quotes
$this = 'operate "on some text" in here'; # operates between single quotes
$this = 'operate \'on some text\' in here'; # operates between outer single quotes 
```

我尝试了一些非常糟糕的正则表达式。但只是无法让它正确匹配。

这是我将其插入的内容，以防万一有人感兴趣

```
printf '$request1 = "select * from whatever where this = that and active = 1 order by something asc";\n' |
grep '{regex}' * |
perl -pe 's/select/SELECT/g ; s/from/\n   FROM/g ; s/where/\n      WHERE/g ; s/and/\n      AND/g ; s/order by/\n         ORDER BY/g ; s/asc/ASC/g ; s/desc/DESC/g ;' | ## enter through file with all clauses
awk '{gsub(/\r/,"");printf "%s\n%d",$0,length($0)}' ## take first line convert to whitespace, use on following lines 
```

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:38:37.670

通常，如果您要解析实际的 perl 代码，我建议（并使用）[PPI](https://metacpan.org/module/PPI)。否则，只需使用[Regexp::Common](https://metacpan.org/module/Regexp%3a%3aCommon)

```
use Regexp::Common;

my @lines = split /\s*\n\s*/, <<'TEST';
$this = 'operate on some text in here'; // operates between single quotes
$this = "operate on some text in here"; // operates between double quotes
$this = 'operate "on some text" in here'; // operates between single quotes
$this = 'operate \'on some text\' in here'; // operates between outer single quotes
TEST

for (@lines)
{
    /$RE{quoted}{-keep}/ && print $1, "\n";
} 
```

给出：

```
$ perl x.pl
'operate on some text in here'
"operate on some text in here"
'operate "on some text" in here'
'operate \'on some text\' in here' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:08:37.717

***脚本：***

```
@list = <main::DATA>;

foreach (@list) {
  my @x = /^\s*\$(\S+)\s*=\s*(['"])((?:.(?!\2)|\\\2)*.?)\2\s*;/;
  $x[2] =~ s/\\$x[1]/$x[1]/g; # remove backslash before quote character
  print "$x[0]\t$x[2]\n";
}

__DATA__
$this = 'operate on some text in here';     // operates between single quotes
$this = "operate on some text in here";     // operates between double quotes
$this = 'operate "on some text" in here';   // operates between single quotes
$this = 'operate \'on some text\' in here'; // operates between outer single quotes 
```

***会给你：***

```
this   operate on some text in here
this   operate on some text in here
this   operate "on some text" in here
this   operate 'on some text' in here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:13:58.767

这可能对您有用：

```
 sed 's/\(\$[^=]*=[^'\''"]*\)\(['\''"]\)[^\\'\''"]*\(\\['\''"][^'\''"]*\)*\2/\1\2Replacement\2/' file 
```

# jquery - 使用多个单元测试框架构建？

> ID：11145352
> 
> 赞同：0
> 
> 时间：2012-06-21T19:25:36.203
> 
> 标签：jquery, .net, unit-testing, frameworks, asp-classic

我有一个 .NET 解决方案，可以与一些经典的 ASP 页面以及一些 T-SQL 存储过程一起使用。我还有一个使用 Web 技术构建的产品：JQuery、HTML5、CSS 3。我需要为这些产品安装单元测试框架，以便我可以一次针对所有这些运行构建，并获得一个跨这些框架的单元测试执行。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:32:29.730

关于单元测试的事情是你真的需要在构建产品*之前考虑单元测试。*将单元测试引入现有系统从非常非常困难到不可能。我非常怀疑商业成本是否会收回成本。

您最好使用 TDD 方法重写代码并使用现代测试友好语言（例如不使用 asp-classic）。像 ASP.NET-MVC 这样的东西是您正在寻找的服务器端代码和基于 jquery 的代码的[QUnit](http://docs.jquery.com/QUnit)（我没有使用 QUnit，所以我不能保证它的功效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:07:55.087

像 NAnt 或 MSBuild 这样的构建脚本工具应该可以完成这项工作。

您将有一个脚本调用多个任务.. 每个不同的测试运行器一个。大多数单元测试框架都有控制台运行器，可以很好地与构建工具集成。

# macos - NSDateFormatter：设置有效的最小日期

> ID：11145354
> 
> 赞同：1
> 
> 时间：2012-06-21T19:25:50.877
> 
> 标签：macos, cocoa, nsdate

我正在尝试为用户可以输入文本字段的日期设置限制。有没有办法设置一个最短日期，`NSDateFormatter`以便在我指定的最短日期之前`getObjectValue`返回一个日期？`NO`我即将子类化`NSDateFormatter`并将这个验证放在自己身上，但希望有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:21:40.807

NSDateFormatter 没有为您指定一种方法来设置用户输入的最小/最大日期（与 NSNumberFormatter 不同）。所以我认为对它进行子类化是合适的，这不应该太难。您所要做的就是创建一个 NSDateFormatter 子类，更改`getObjectValue:forString:range:error:`方法并应用最小日期的日期检查。

# mysql - 体重和身高数据的 MySQL 字段类型

> ID：11145355
> 
> 赞同：8
> 
> 时间：2012-06-21T19:25:53.540
> 
> 标签：mysql, sqldatatypes, fieldtype

体重（公斤）和身高（米）数据的适当 MySQL 字段类型是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T19:39:33.443

这一切都取决于。不同的数字类型各有优缺点：

如果您绝对需要高度/体重精确到一定的小数位数，并且不受浮点数可能导致的问题的影响，请使用 decimal() （十进制有两个参数，位数 > 1 和数字位数 < 1，因此 decimal(5,2) 将能够存储低至 0.01 和高至 999.99 的数字）。固定精度数学有点慢，而且由于涉及到的算法，存储它们的成本更高。绝对必须存储货币值或您打算将货币作为数字（）进行数学运算的任何值。例如，如果您要按每磅或每米为婴儿付费，则它需要是 numeric()。

如果您愿意接受某些数值比其他数值更不精确的可能性，请使用 FLOAT 或 DOUBLE，具体取决于您存储的精度和数字的大小。浮点数是基于计算机进行数学运算的近似值，我们使用小数点表示 10 的幂，计算机以 base2 进行数学运算，两者不能直接比较，因此为了解决算法是针对 100 的情况开发的不需要 % 精度，但需要更快的速度，而使用整数集合对其进行建模是无法实现的。

欲了解更多信息：

[http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html) [http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html) [http: //dev.mysql.com/doc/refman/5.0/en/floating-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html)

# javascript - 获取特定复选框

> ID：11145356
> 
> 赞同：0
> 
> 时间：2012-06-21T19:26:04.263
> 
> 标签：javascript, jquery, asp.net, html, vb.net

我需要获取我的一系列选中复选框，而无需在页面上获取所有其余部分，因此我试图专门缩小范围，但以下代码似乎不起作用。

```
$('#button').click(cc);
    function cc() {
        var va = [];
          $('input:checkbox[name=lpids]:checked').each(function(i){
            va.push(this.id);
          });
        alert(va);
    } 
```

和

```
<asp:CheckBox ID="ck0" runat="server" name="lpids" ClientIDMode="Static"/> 
```

现在我期待获得特定的值，上面应该可以工作，但我什么也没得到。

编辑：

```
<span name="lpids" class="chk"><input id="ck6" type="checkbox" name="ctl00$ck6" /></span> 
```

我在源代码中得到了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:31:22.177

从生成的内容来看，这应该有效

```
$('[name=lpids] [type=checkbox]:checked').each(function(i){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:29:47.107

代替

```
this.id 
```

尝试

```
$(this).attr('id') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:06:37.253

尝试这个：

```
$('#button').click(cc);
    function cc() {
          $('input[name=lpids]:checked').each(function(){
            alert($(this).attr('id'));
          });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:33:12.447

试试我刚刚创建的这个小提琴，它会提取 id。只需将 class="chk" 添加到每个复选框...

[http://jsfiddle.net/eformx/xENNa/](http://jsfiddle.net/eformx/xENNa/)

胆量...

```
$('#button').click(function () {

    $('.chk').each(function() {

        var checked = this.checked ? 'checked' : '';
        if (checked){
            var id = this.id;
            alert(id);
        }
    });

}); 
```

# jquery - jQuery UI 对话框 - 动态 div - 函数序列问题

> ID：11145357
> 
> 赞同：0
> 
> 时间：2012-06-21T19:26:04.927
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有一个 div，我通过单击链接动态附加到页面，然后将 iframe 写入该 div。

```
// open login popin
function loginLayer(){
    $(".ui-dialog-content").dialog("destroy");
    callIframe();
    openLoginDialog();
}

// write dialog div & iframe + src to DOM
function callIframe() {

    var iframeURL = "" + loginConfig.iframeSource + "?displayType=" + loginConfig.displayType +"&isSignature=" + loginConfig.isSignature + ""
    $('body').append('<div id="loginDialog"></div>');
    $('#loginDialog').append('<IFRAME id="loginLayer" name="loginLayer" src="' + iframeURL + '" scrolling="no" width="100%"  marginheight="0" marginwidth="0"  frameborder="0"></div>');
}

// open login dialog
function openLoginDialog(){ //open } 
```

运行后`callIframe`，对话框打开。

发生的事情是对话框以 iframe 打开，没有问题 - 但是，在`body`（firefox 和 IE）的底部是大量与`#loginDialog`高度大小相同的空白区域。

我不确定原因，因为一切都按顺序显示 - 但似乎当 div 附加到主体时，它正在那里渲染 - 增加主体高度，然后在对话框中打开。

**编辑**

似乎这是一个时间问题 - 如果我使用断点逐步执行每个操作，问题就解决了 - 所以有些东西触发得太快了......

如果我这样做，它会起作用 - 所以 callIframe 中有什么东西？：

```
callIframe();
alert('works when interrupted by alert');
openLoginDialog(); 
```

那么，就没有问题了。所以，这意味着

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:24:21.797

它可以用更简洁的方式编写，我认为这是造成问题的 url

```
function callIframe()
{
    $(".ui-dialog-content").dialog("destroy");
    var iframeURL = loginConfig.iframeSource + "?displayType=" + loginConfig.displayType + "&isSignature=" + loginConfig.isSignature;​
    var iframe=$('<iframe></iframe>', {
        src:iframeURL,
        id:'loginLayer',
        name:'loginLayer',
        width:'100%',
        marginheight:0,
        marginwidth:0,
        frameborder:0
    });
    $('<div id="loginDialog"></div>').html(iframe).dialog();
}

callIframe(); 
```

[**示例演示。**](http://jsfiddle.net/heera/7TtrN/1/)

**更新：**根据您的需要[**，这里**](http://jsfiddle.net/heera/7TtrN/2/)有一个更新的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:06:04.593

真正的原因：

我也在动态加载css，并且在对话框打开之前css没有完全处理，导致问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:16:53.083

问题似乎是由于未关闭`iframe`标签而引起的。

替换此行

```
$('#loginDialog').append('<IFRAME id="loginLayer" name="loginLayer" src="' + iframeURL + '" scrolling="no" width="100%"  marginheight="0" marginwidth="0"  frameborder="0"></div>'); 
```

对此

```
$('#loginDialog').append('<iframe id="loginLayer" name="loginLayer" src="' + iframeURL + '" scrolling="no" width="100%"  marginheight="0" marginwidth="0"  frameborder="0"></iframe>'); 
```

# javascript - 不稳定的 innerHTML 行为。文字消失

> ID：11145359
> 
> 赞同：1
> 
> 时间：2012-06-21T19:26:20.810
> 
> 标签：javascript, jquery, html, innerhtml

我正在尝试`<p>`使用 jquery 更新标签，但是，当我单击“提交”按钮时，我用 innerHTML 插入的文本很快就会消失。除非我使用 Firefox，在这种情况下它似乎可以工作-如果-我插入警报框。在我看来，这听起来像是某种时间问题。但我不太确定它是什么或如何解决它。有谁知道问题可能是什么？

提前感谢所有帮助！

```
$(document).ready(function(){
     $('#addCourse').live("submit", function(){
        //alert("Submit Function.  hours = "+$('#hours').val());
        document.getElementById('hrs_planned').innerHTML = 'HOURS = '+INIT_PLANNED_HRS+2;//($('#hours').val())+' GPA';
     });                
     document.getElementById('hrs_planned').innerHTML = 'HOURS!! = '+INIT_PLANNED_HRS+' GPA';
}); 
```

和html

```
<li><h3>Planned Courses</h3><p id = "hrs_planned"> gpa </p></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:45:26.780

试试`return false`；

如果您使用 jQuery 1.7，也可以使用，因为`on()`已被贬低。有关详细信息，请参阅[**文档**](http://api.jquery.com/live/)。 如果您使用的是 jQuery 1.6.x 或更早版本，请改用。`live()``live()`[](http://api.jquery.com/live/) **`delegate()`**

 **```
$(document).ready(function() {
    $('#addCourse').on("submit", function(e) {
        //alert("Submit Function.  hours = "+$('#hours').val());
        document.getElementById('hrs_planned').innerHTML = 'HOURS = ' + INIT_PLANNED_HRS + 2; //($('#hours').val())+' GPA';
        return false;
    });
    document.getElementById('hrs_planned').innerHTML = 'HOURS!! = ' + INIT_PLANNED_HRS + ' GPA';
});​ 
```

..或者如果失败，您可以尝试使用`e.preventDefault`and `e.stopPropagation`。

```
$(document).ready(function() {
    $('#addCourse').on("submit", function(e) {
        // prevent default submit behaviour
        e.preventDefault;
        //alert("Submit Function.  hours = "+$('#hours').val());
        document.getElementById('hrs_planned').innerHTML = 'HOURS = ' + INIT_PLANNED_HRS + 2; //($('#hours').val())+' GPA';

        // prevent event from bubbling up
        e.stopPropagation;
    });
    document.getElementById('hrs_planned').innerHTML = 'HOURS!! = ' + INIT_PLANNED_HRS + ' GPA';
});​ 
```**

# python - Python - 从列表中提取最低整数，然后将其“弹出”到另一个

> ID：11145360
> 
> 赞同：0
> 
> 时间：2012-06-21T19:26:26.040
> 
> 标签：python, python-2.7, list

正如主题所暗示的，我正在尝试从一个列表中获取整数（元组）并使用 pop 函数将它们添加到另一个列表中

这是我到目前为止所拥有的，并且坚持这样做。

```
loga = [(912, "Message A1") , (1000, "Message A2") , (988, "Message A3") , (1012, "Message A4") , (1002, "Message A5")]

logb = [(926, "Message B1") , (1008, "Message B2") , (996, "Message B3") , (1019, "Message B4") , (1100, "Message B5")]

logc = [(1056,"Message C1") , (1033, "Message C2") , (999, "Message C3") , (1054, "Message C4") , (1086, "Message C5")]

logs = [loga, logb, logc]

def find_lowest_i(logs):
    for i in range(len(lst)):
        log = lst(i)

if len(log) > t = log[0][0]

    if i==0 or t < lowest_t
    lowest_i = i
    lowest_t = t

return i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:13:03.903

```
loga = [(912, "Message A1") , (1000, "Message A2") , (988, "Message A3") , (1012, "Message A4") , (1002, "Message A5")]

logb = [(926, "Message B1") , (1008, "Message B2") , (996, "Message B3") , (1019, "Message B4") , (1100, "Message B5")]

logc = [(1056,"Message C1") , (1033, "Message C2") , (999, "Message C3") , (1054, "Message C4") , (1086, "Message C5")]

logs = [loga, logb, logc]
final=[]
for log in logs:
    for tup in log:
        final.append(tup[0])
lowest_number=min(int(x) for x in final)
return lowest_number 
```

这应该为您解决问题，它通过遍历列表，将数字附加到列表，然后使用带有函数的列表推导`loga,logb,logc`来获得最低数字来工作。`logs``final``min()`

# javascript - 根据 if/else 语句的值隐藏元素不起作用

> ID：11145363
> 
> 赞同：0
> 
> 时间：2012-06-21T19:26:44.457
> 
> 标签：javascript, jquery

我有一个使用[LinkedIn Javascript API](https://developer.linkedin.com/documents/sign-linkedin)对用户进行身份验证的 Rails 应用程序。我想做的是根据用户是否注册来隐藏一个元素。我尝试了几件事：

*   将带有 if/else 语句的代码放在 HTML 之前的底部`</body>`
*   检查是否`document.cookie`是空字符串而不是更具体的 if/else

但是，这些都没有隐藏元素。如果我在页面完成渲染后进入浏览器的控制台并粘贴我的代码，则该元素会隐藏。所以我认为这是一个 JavaScript 加载问题，但我一定做错了什么。任何人都可以对此有所了解吗？

这是我尝试过的代码，但都不起作用：

```
<%= content_for(:script_footer) do %>
  <script type="text/javascript">

    // if ($('span.IN-widget:contains("inSign in with LinkedIn")').length > 0) {
    //   $('#select').hide();
    // } else {
    //   $('#select').show();
    // }

    if (document.cookie == "") {
      $('#select').hide();
    } else {
      $('#select').show();
    }
  </script>
<% end %> 
```

我的应用程序布局：

```
<!DOCTYPE html>
<html>
<head>
  <title>rdtrip</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= yield(:linked_in) %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>
<%= yield(:script_footer) %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:34:35.583

使用以下命令包装您的 jquery/javascript 代码：

```
$(function(){
    // your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:39:16.640

JavaScript 在 DOM 准备好之前执行，所以它还找不到`#select`。

将其包裹在：

```
$(document).ready( function() {
    // code
}); 
```

或者：

```
$(function() {
     // code
}); 
```

# java - 将 IDL 枚举解析为 Java 枚举

> ID：11145364
> 
> 赞同：0
> 
> 时间：2012-06-21T19:26:45.947
> 
> 标签：java, parsing, shell, enums, idl

我有一堆充满枚举的 IDL 文件。我想要一种方法来解析 IDL 文件，提取枚举并基于这些创建本机 Java 枚举（也忽略 IDL 中的任何其他声明，如 const、联合或结构）。

我什至不知道从哪里开始。有没有为此目的而设计的好的 Linux 工具？我假设需要正则表达式？

为了解释我的意思，这里是 common.idl 中的一个例子：

```
#ifndef __common_idl__
#define __common_idl__

module common_idl { 

  const short MAX_UNITS      = 99;
  const short MAX_SIZE  = 15; 

  enum Bearing_Type { 
     North_Bearing, 
     South_Bearing, 
     No_Bearing 
  }; 

  enum Bounds_Type {
     Empty,
     Full,
     Above,
     Between,
     Below
  };

  enum Identity_Type { 
      Pending, 
      Unknown, 
      Assumed_Friend, 
      Friend
  }; 

  enum Status_Type {
     No_Status,
     To_Status,
     To_Established,
     From_Established
  }; 

  enum Emergency_Type { 
      Reported, 
      Confirmed, 
      None    
  }; 

 struct Console_Marker { 
    boolean                               Marked; 
 };    

  typedef unsigned short   Index_Type; 
  typedef long            TQ_Type;                   
  typedef unsigned short  Count_Type;             
  typedef unsigned long   Number_Of_Type;          
  typedef unsigned short  Special_Index_Type; 
  typedef string<2>       Code_Type;                 

};

#endif 
```

我想运行一个命令......例如：

`converter common.idl -package com.myproject -outputDir src`

并且 out 会用枚举吐出这些源 java 文件：

**src/com/myproject/Bearing_Type.java**

```
package com.myproject;

public enum Bearing_Type {
    North_Bearing, 
    South_Bearing, 
    No_Bearing 
} 
```

**src/com/myproject/Bounds_Type.java**

```
package com.myproject;

public enum Bounds_Type {
    Empty,
    Full,
    Above,
    Between,
    Below
} 
```

**src/com/myproject/Emergency_Type.java**

```
package com.myproject;

public enum Emergency_Type {
    Reported, 
    Confirmed, 
    None    
} 
```

**src/com/myproject/Identity_Type.java**

```
package com.myproject;

public enum Identity_Type {
    Pending, 
    Unknown, 
    Assumed_Friend, 
    Friend
} 
```

**src/com/myproject/Status_Type.java**

```
package com.myproject;

public enum Status_Type {
    No_Status,
    To_Status,
    To_Established,
    From_Established
} 
```

这可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:32:35.257

一个非常快速和肮脏的解决方案 - 我确信那里有大量的解析器可以更好地工作，更好等等。但是，如果您的 IDL 文件看起来都一样，那何必呢？

```
import java.io.File;
import java.io.InputStream;
import java.util.Scanner;

public class IDLParserTest {

    public static void main(String[] args) {
        parse("common.idl");
    }

    private static void parse(String file) {
        InputStream is = IDLParserTest.class.getResourceAsStream(file);
        Scanner scanner = new Scanner(is);

        while (parseEnum(scanner))
            ;
    }

    protected static boolean parseEnum(Scanner scanner) {
        if (!scanner.hasNext())
            return false;
        String strEnum = scanner.findWithinHorizon("enum", 8192);
        if (strEnum == null)
            return false;
        if (!strEnum.equals("enum"))
            return true;
        StringBuilder javaCode = new StringBuilder();
        String strClass = scanner.next();
        scanner.next(); // skip open bracket
        javaCode.append("package com.mycompany; ");
        javaCode.append("public enum " + strClass + " { ");
        while (scanner.hasNext()) {
            String f = scanner.next();
            // System.out.println("<<<" + f);
            if (f.equals("};")) {
                javaCode.append(" }");
                File outFile = new File(strClass + ".java");
                // TODO: Write javaCode.toString() to outFile
                System.out.println("Wrote: " + outFile + ":" + javaCode.toString());
                return true;
            } else {
                javaCode.append(f);
            }
        }
        return true;
    }

} 
```

# php - 如何让 Zen Cart 连接到服务器 XML、JSON（没有 html 标头）

> ID：11145366
> 
> 赞同：1
> 
> 时间：2012-06-21T19:26:51.610
> 
> 标签：php, ajax, zen-cart

我正在尝试编写一个模块，该模块使用 ajax 请求到 zen 购物车中的另一个页面。我想将要提供数据的页面标记为“简单”：也就是说，不会向所服务的页面添加页眉、页脚或其他字符（保存 XML、JSON）。

Zen Cart 中是否有允许我将此页面标记为“简单”的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:20:37.210

您需要创建一个单独的 .php 脚本，它只返回您想要的数据（没有无关信息）。不要使用 Zen Cart 页面基础结构（即不要将模块放在包含/模块/页面等下）- 只需为您需要的目的创建一个文件。

# c# - 并非所有代码路径都有返回值

> ID：11145368
> 
> 赞同：1
> 
> 时间：2012-06-21T19:26:57.430
> 
> 标签：c#

这很奇怪，因为据我所知，该方法确实返回了一个值或 null ......我之前用 null 运行过它并且它工作......自从我在 if 语句中输入这两个 if 语句以来，我收到错误“并非所有代码路径都有返回值”

```
 if (dt.Rows.Count != 0)
    {

        if (dt.Rows[0]["ReportID"].ToString().Length > 40)
        {

        string ReportID = dt.Rows[0]["ReportID"].ToString().Substring(0, 36);
        string ReportIDNumtwo = dt.Rows[0]["ReportID"].ToString().Substring(36, 36);
        MyGlobals1.versionDisplayTesting = ReportID;
        MyGlobals1.secondversionDisplayTesting = ReportIDNumtwo;
        return ReportID;

        }

        else if (dt.Rows[0]["ReportID"].ToString().Length < 39)
        {
            string ReportID = dt.Rows[0]["ReportID"].ToString();
            MyGlobals1.versionDisplayTesting = ReportID;
            return ReportID;
         }
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T19:28:42.303

```
if (dt.Rows.Count != 0)
{
    ...

    else if (dt.Rows[0]["ReportID"].ToString().Length < 39)
    {
        string ReportID = dt.Rows[0]["ReportID"].ToString();
        MyGlobals1.versionDisplayTesting = ReportID;
        return ReportID;
     }

    // it's possible to get here without returning anything
}
else
{
    return null;
} 
```

所以你应该做这样的事情：

```
if (dt.Rows.Count != 0)
{
    ...

    else if (dt.Rows[0]["ReportID"].ToString().Length < 39)
    {
        string ReportID = dt.Rows[0]["ReportID"].ToString();
        MyGlobals1.versionDisplayTesting = ReportID;
        return ReportID;
     }
}

return null; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T19:28:41.070

里面第一个`if`，当两个条件都是`false`。例如，如果行数是 40。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:28:41.770

你`else`在内部`if`声明中缺少一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T19:29:41.953

如果您删除最后的`else`声明并保留`return null;`它应该消失。如果它到达一个内部`if`语句，它会返回一些东西，但如果它到达末尾，它将无法返回任何东西。

```
if (dt.Rows.Count != 0){
    if (dt.Rows[0]["ReportID"].ToString().Length > 40)
    {
        string ReportID = dt.Rows[0]["ReportID"].ToString().Substring(0, 36);
        string ReportIDNumtwo = dt.Rows[0]["ReportID"].ToString().Substring(36, 36);
        MyGlobals1.versionDisplayTesting = ReportID;
        MyGlobals1.secondversionDisplayTesting = ReportIDNumtwo;
        return ReportID;
    }
    else if (dt.Rows[0]["ReportID"].ToString().Length < 39){
        string ReportID = dt.Rows[0]["ReportID"].ToString();
        MyGlobals1.versionDisplayTesting = ReportID;
        return ReportID;
    }
}
// If gets into if statement, but does not match inner conditional statements, it will end up here, if it were an else statement, return null will not get called, and a return will not be done
return null; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T19:30:21.100

`dt.Rows[0]["ReportID"].ToString().Length == 39`当或时没有返回值`dt.Rows[0]["ReportID"].ToString().Length == 40`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T21:51:28.090

我会这样做：

```
string ReportID = null;

if (dt.Rows.Count != 0)
{

    if (dt.Rows[0]["ReportID"].ToString().Length > 40)
    {

    ReportID = dt.Rows[0]["ReportID"].ToString().Substring(0, 36);
    string ReportIDNumtwo = dt.Rows[0]["ReportID"].ToString().Substring(36, 36);
    MyGlobals1.versionDisplayTesting = ReportID;
    MyGlobals1.secondversionDisplayTesting = ReportIDNumtwo;

    }

    else if (dt.Rows[0]["ReportID"].ToString().Length < 39)
    {
        ReportID = dt.Rows[0]["ReportID"].ToString();
        MyGlobals1.versionDisplayTesting = ReportID;
     }
}

return ReportID; 
```

原因：代码少，一个返回点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T19:30:08.760

`else`之后你还需要一个`else if`：

```
 if (dt.Rows.Count != 0)
    {

        if (dt.Rows[0]["ReportID"].ToString().Length > 40)
        {

        string ReportID = dt.Rows[0]["ReportID"].ToString().Substring(0, 36);
        string ReportIDNumtwo = dt.Rows[0]["ReportID"].ToString().Substring(36, 36);
        MyGlobals1.versionDisplayTesting = ReportID;
        MyGlobals1.secondversionDisplayTesting = ReportIDNumtwo;
        return ReportID;

        }

        else if (dt.Rows[0]["ReportID"].ToString().Length < 39)
        {
            string ReportID = dt.Rows[0]["ReportID"].ToString();
            MyGlobals1.versionDisplayTesting = ReportID;
            return ReportID;
        }
        else
        {
            return null /* or something */
        }
    }
    else
    {
        return null;
    }
} 
```

# php - move_uploaded_file 在 Linux Mint 中的 Apache 服务器上不起作用

> ID：11145369
> 
> 赞同：3
> 
> 时间：2012-06-21T19:26:59.410
> 
> 标签：php, apache, upload, linux-mint

因此，我尝试通过 HTML 表单和简单的 php 脚本进行基本上传，但 move_uploaded_file 函数始终返回 false。我已经在目录上运行了“chmod 777”（当我真正开始工作时，我会更多地处理安全问题”并且“上传”目录位于 htdocs 文件夹中（实际上是 Ubuntu Server 和 Linux Mint 中的 /var/www）。

这是表格：

```
<html>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

...和upload_file.php ...

```
<?php
    if ($_FILES["file"]["error"] == 0){
        if (file_exists("upload/" . $_FILES["file"]["name"])){
            echo $_FILES["file"]["name"] . " already exists. ";
        }else{
            if(move_uploaded_file($_FILES["file"]["tmp_name"],"/var/www/upload/" . $_FILES["file"]["name"])){ 
                echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
            }else{
                echo "Failed to move uploaded file";
            }
        }
    }else{
        echo "Return Code: " . $_FILES["file"]["error"];
    }
?> 
```

当我尝试上传一个小的 JPEG 文件时，我得到“无法移动文件”。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:45:14.797

您的脚本需要能够写入目标目录，在本例中为 /var/www/upload/（是您更改权限的目录吗？）。此外，您正在使用客户端的本地名称，这可能是一个问题和安全问题（但不一定是这里的原因）。

# c# - RemoveExtendedProperty 在重复约会发生时引发错误

> ID：11145374
> 
> 赞同：1
> 
> 时间：2012-06-21T19:27:06.310
> 
> 标签：c#, exchangewebservices, recurring, ews-managed-api

我正在开发一个将交换日历同步到另一个日历的应用程序。我在交换约会上放置了扩展属性，以保留两个日历中约会之间的映射。一切正常，直到我尝试从重复约会的事件中删除扩展属性。当我尝试这样做时，我收到错误：

```
The delete action is not supported for this property. 
```

这是一个演示错误的代码片段：

```
public void ExchangeTest()
{
    ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1)
    {
        Credentials = new NetworkCredential("username", "password", "domain")
    };
    service.AutodiscoverUrl("username@domain.com");

    Appointment appt = new Appointment(service)
    {
        Recurrence = new Recurrence.DailyPattern(DateTime.Now, 2) { NumberOfOccurrences = 3},
        Start = DateTime.Now,
        End = DateTime.Now.AddHours(2),
        Subject = "Test Appointment"
    };
    NameResolutionCollection resolutionCollection = service.ResolveName("username", ResolveNameSearchLocation.DirectoryOnly, false);
    string mailboxAddress = resolutionCollection.First().Mailbox.Address;
    FolderId folderId = new FolderId(WellKnownFolderName.Calendar, mailboxAddress);
    appt.Save(folderId);
    PropertySet properties = new PropertySet(AppointmentSchema.ICalUid);
    appt.Load(properties);

    CalendarView view = new CalendarView(DateTime.Today, DateTime.Today.AddDays(8)){PropertySet = properties};

    IEnumerable<Appointment> occurrences = service.FindAppointments(folderId, view)
        .Where(a => a.ICalUid == appt.ICalUid);

    ExtendedPropertyDefinition definition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "TestProperty", MapiPropertyType.String);
    Appointment firstOccurrence = occurrences.First();
    firstOccurrence.SetExtendedProperty(definition, "test");
    firstOccurrence.Update(ConflictResolutionMode.AutoResolve);

    //The error occurs on the next line.
    firstOccurrence.RemoveExtendedProperty(definition);
    firstOccurrence.Update(ConflictResolutionMode.AutoResolve);

    //clean up
    appt.Delete(DeleteMode.HardDelete);
} 
```

似乎该错误仅针对 Exchange 2007 服务器引发（它适用于 2010）。我做错了什么，还是 Exchange 有问题？有没有办法解决这个问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:46:38.137

我最终没有使用**RemoveExtendedProperty**函数。相反，我通过再次设置属性来解决它，但将其设置为空白空间。然后我处理了代码中的空白区域。这似乎是 Exchange 或托管 API 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:54:57.987

你试过了吗;

```
appointment.Delete(DeleteMode.SoftDelete,SendCancellationsMode.SendToAllAndSaveCopy); 
```

# javascript - 与 position:absolute 的相对定位

> ID：11145375
> 
> 赞同：0
> 
> 时间：2012-06-21T19:27:08.537
> 
> 标签：javascript, html, css, positioning

我有一个`<input />`字段和一个`<a><img /></a>`图标，我想将它们放在输入中。

当然，我不能将图像放在输入中，因为它不是那种标签，但我会很高兴它只是重叠。

如果我使用`position: relative`（这使得正确定位它变得容易），该图标将继续占据原本所在的不可见空间。

如果我使用`position: absolute`我不能相对于它的前一个兄弟定位图标，定位值是相对于父级的，这不是很好，因为不同的浏览器呈现`<input>`不同的大小。

有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:33:27.847

[http://jsfiddle.net/iambriansreed/u7DUv/](http://jsfiddle.net/iambriansreed/u7DUv/)

`input`将和包裹`a`在包装纸中，并将其绝对定位`a`在相对定位的`div`包装纸上。

CSS

```
input {
    font-size: 24px;
    width: 200px;
}
div { 
    position: relative;
    width: 200px;
}
div a {
    display: block;
    position: absolute;
    top: 4px;
    right: 0;
    z-index:99;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:29:06.930

我想我现在知道该怎么做了。我`<span>`在我的图标所在的位置做了一个，它将`position:relative`没有偏移，并且它将包含带有`position:absolute`. 这样，跨度的绝对偏移量实际上就是页面的相对偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:34:34.367

使用 position:relative，并使用 padding-left 作为输入标签中图像的宽度，不会有隐藏空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:41:47.453

只需在图像元素上使用负片`margin-left`，让它显示在输入上方。

# java - JSoup 错误：java.lang.IllegalArgumentException

> ID：11145376
> 
> 赞同：0
> 
> 时间：2012-06-21T19:27:11.947
> 
> 标签：java, parsing, jsoup

我正在应用以下示例[http://jsoup.org/cookbook/extracting-data/example-list-links](http://jsoup.org/cookbook/extracting-data/example-list-links)来列出链接。

```
package org.jsoup.examples;

import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import java.io.IOException;

/**
 * Example program to list links from a URL.
 */
public class ListLinks {
    public static void main(String[] args) throws IOException {
        Validate.isTrue(args.length == 1, "usage: supply url to fetch");
        String url = args[0];
        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.select("a[href]");
        Elements media = doc.select("[src]");
        Elements imports = doc.select("link[href]");

        print("\nMedia: (%d)", media.size());
        for (Element src : media) {
            if (src.tagName().equals("img"))
                print(" * %s: <%s> %sx%s (%s)",
                        src.tagName(), src.attr("abs:src"), src.attr("width"), src.attr("height"),
                        trim(src.attr("alt"), 20));
            else
                print(" * %s: <%s>", src.tagName(), src.attr("abs:src"));
        }

        print("\nImports: (%d)", imports.size());
        for (Element link : imports) {
            print(" * %s <%s> (%s)", link.tagName(),link.attr("abs:href"), link.attr("rel"));
        }

        print("\nLinks: (%d)", links.size());
        for (Element link : links) {
            print(" * a: <%s>  (%s)", link.attr("abs:href"), trim(link.text(), 35));
        }
    }

    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
} 
```

[我只用“ http://www.google.com](http://www.google.com) ”替换了“”用法：提供要获取的网址“”。JSoup 文档太差了（如我所见）。因此，我收到以下错误并且无法弄清楚原因：线程“主”java.lang.IllegalArgumentException 中的异常：用法：[http](http://www.google.com) ://www.google.com at org.jsoup.helper.Validate.isTrue(Validate .java:45) 在 TestClass.main(TestClass.java:16)

我发现以下关于相同问题的帖子：[importing java libarary](https://stackoverflow.com/questions/5709414/importing-java-libarary)但我已经用网站名称替换了用法：...等，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:30:58.840

> 我只用“http://www.google.com”替换了“”用法：提供要获取的网址“”。

嗯，这表明你不明白这个`Validate.isTrue`电话在做什么。在更改代码之前不要在不知道代码在做什么的情况下更改代码，这一点非常重要。

您不*打算*更改该代码。您需要运行此代码并将 URL 作为命令行参数提供。第一条语句验证确实存在*一个*命令行参数。

所以把代码放回原来的样子，然后运行

```
java -cp [whatever] org.jsoup.examples.ListLinks http://google.com 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T01:58:34.533

试试这个而不是网站上的预设......我在另一个堆栈问答中找到了这个

```
public class ListLinks {
    public static void main(String[] args) throws IOException {

        String url = "http://shopping.yahoo.com";
        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.getElementsByTag("a");
} 
```

# ruby-on-rails - 剥离 rails 仅供 api 使用

> ID：11145379
> 
> 赞同：1
> 
> 时间：2012-06-21T19:27:22.390
> 
> 标签：ruby-on-rails, ruby, api

我有一个应用程序，我们正在使用它来为另一个应用程序提供 api 调用。但是感觉很重，因为它仍在使用整个导轨，但我们不使用视图等......

其他人是如何解决这个问题的，只是删除文件？我只需要我的模块和服务能力。

使用 Sinatra 会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:41:04.063

查看相对较新的[rails-api](https://github.com/spastorino/rails-api)插件，它提供了用于构建 API 服务的 Rails 子集。[您可以在此处](http://blog.wyeworks.com/2012/4/20/rails-for-api-applications-rails-api-released)阅读发布博客文章。

还有一个[Railscasts 插曲](http://railscasts.com/episodes/348-the-rails-api-gem)展示了它的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:04:33.063

在我的工作中，我们正在做你所需要的。不幸的是，我对使它工作的过程不是很熟悉，其他人设置了它。我所知道的是，在 config/application.rb 你可以选择你的应用程序需要的东西。如果需要，您甚至可以添加/删除中间件。如果它对我们的案例有帮助，我们将使用这些框架：

```
require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie" 
```

并删除这些中间件：

```
config.middleware.delete Rack::Lock
config.middleware.delete ActionDispatch::Flash
config.middleware.delete ActionDispatch::Cookies
config.middleware.delete ActionDispatch::Session::CookieStore
config.middleware.delete ActionDispatch::BestStandardsSupport 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:15:49.807

试着看看[GRAPE](https://github.com/intridea/grape)，它就是这样做的——它有点像 Sinatra（使用 Rack），但非常轻量级并且专注于 API。[Webmachine](https://github.com/seancribbs/webmachine-ruby)也很有趣（参见[http://code.dblock.org/grape-vs-webmachine](http://code.dblock.org/grape-vs-webmachine)进行一些比较）

# c# - 无窗控件

> ID：11145387
> 
> 赞同：1
> 
> 时间：2012-06-21T19:28:21.547
> 
> 标签：c#, winforms, windowless

该`ShowWithoutActivation`方法的 MSDN 页面 -[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showwithoutactivation.aspx "这里")-处于无窗口`Form`状态。`ToolStripItem`

控件无窗口意味着什么？他们的目的是什么？如何制作自己的无窗口控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:36:32.717

在底层 Windows 体系结构中，控件基本上是一个无边框的窗口。他们90%是一样的。

另一方面，ToolStripItem 不是从 Control 派生的。它不绘制自己，它没有窗口句柄或消息队列。ToolStripItem 只是一个用作 ToolStrip 的组织扩展的类。ToolStrip 将许多消息和事件转发到 ToolStripItems。

这样做的目的是提高性能并提高透明度。

# .net - WebDav 到 EWS（联系人）

> ID：11145388
> 
> 赞同：2
> 
> 时间：2012-06-21T19:28:21.567
> 
> 标签：.net, vb.net, exchangewebservices

我正在将应用程序从使用**WebDav**转换为**EWS**。我现在正在将代码转换为获取联系人。

我注意到**WebDav**的属性是通过使用找到的

`urn:schemas:contacts:facsimiletelephonenumber`
`urn:schemas:contacts:fileas` ...

**EWS**的属性是“正常”的

`_contact.PhoneNumbers(PhoneNumberKey.HomeFax)`
`_contact.FileAs`

有谁知道是否有可以帮助我转换的列表
`urn:schemas:contacts:fileas`->`_contact.FileAs`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:35:42.573

没有**WebDav**到**EWS**转换的列表，您必须自己映射它们。这是[WebDav 架构](http://msdn.microsoft.com/en-us/library/aa123736%28v=exchg.65%29.aspx)和[EWS 联系人属性](http://msdn.microsoft.com/en-us/library/gg274394.aspx#PropertyIdValues)以供参考。如何映射它们应该是不言自明的，因为它们的名称非常相似。

# c++ - 如何在 Mac 上实现气球消息的 Qt messageClicked() 信号？

> ID：11145389
> 
> 赞同：3
> 
> 时间：2012-06-21T19:28:29.213
> 
> 标签：c++, macos, qt

我正在尝试使用带有 Qt 库的 c++ 在应用程序上实现一项功能。当这个应用程序收到一条新的文本消息时，它会在这个应用程序的 systemTrayIcon 周围显示一些气球消息。当我点击气球消息时，Qt 会发出一个mesageClicked() 信号，然后文本消息中心就会出现。

Windows 上的一切都很好，因为 Qt 支持 Windows 上气球消息的 messageClicked() 信号。但是在 Mac 上，Qt 不支持气球消息的这个 messageClicked() 信号。所以，我想自己实现这个信号。

我知道如何获取鼠标单击和定位事件，但我不知道如何弄清楚气球消息的区域是什么，这样每当鼠标点击气球消息时，我就可以知道。

你能给我一些关于如何在 Mac 上实现这个 messageClicked() 信号的想法吗？

# php - 按自定义顺序对数组的php数组进行排序

> ID：11145393
> 
> 赞同：72
> 
> 时间：2012-06-21T19:28:45.843
> 
> 标签：php, arrays, multidimensional-array, sorting

我有一个数组数组：

```
Array ( 
    [0] => Array (
        [id] = 7867867,
        [title] = 'Some Title'),
    [1] => Array (
        [id] = 3452342,
        [title] = 'Some Title'),
    [2] => Array (
        [id] = 1231233,
        [title] = 'Some Title'),
    [3] => Array (
        [id] = 5867867,
        [title] = 'Some Title')
) 
```

需要按特定顺序进行：

1.  3452342
2.  5867867
3.  7867867
4.  1231233

我该怎么做呢？我之前对数组进行了排序，并阅读了很多关于它的其他帖子，但它们总是基于比较（即 valueA < valueB）。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-21T19:41:01.313

您可以使用`usort()`来精确地指示如何对数组进行排序。在这种情况下，`$order`可以在比较函数中使用数组。

下面的示例使用 a[`closure`](http://php.net/closures)使生活更轻松。

```
$order = array(3452342, 5867867, 7867867, 1231233);
$array = array(
    array('id' => 7867867, 'title' => 'Some Title'),
    array('id' => 3452342, 'title' => 'Some Title'),
    array('id' => 1231233, 'title' => 'Some Title'),
    array('id' => 5867867, 'title' => 'Some Title'),
);

usort($array, function ($a, $b) use ($order) {
    $pos_a = array_search($a['id'], $order);
    $pos_b = array_search($b['id'], $order);
    return $pos_a - $pos_b;
});

var_dump($array); 
```

这项工作的关键是让正在比较的值成为数组中`id`s的位置。`$order`

比较函数通过查找要在`$order`数组中比较的两个项目的 id 的位置来工作。如果`$a['id']`在数组中出现`$b['id']`，`$order`则函数的返回值将为负数（`$a`较少“浮动”到顶部）。如果在此`$a['id']`之后，`$b['id']`则该函数返回一个正数（`$a`更大，因此“下沉”）。

最后，使用闭包没有什么特别的原因；这只是我快速编写这些一次性函数的首选方式。它同样可以使用普通的命名函数。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-22T14:53:38.720

扩展[salathe](https://stackoverflow.com/a/11145568/87015)对这个附加要求的回答：

> 现在，当我将项目添加到数组而不是排序时会发生什么？我不在乎它们出现的顺序，只要它出现在我指定的顺序之后。

您需要在排序函数中添加两个附加条件：

1.  必须将“无关”项目视为大于列入白名单的项目
2.  必须将两个“无关”项视为相等

所以修改后的代码是：

```
$order = array(
    3452342,
    5867867,
    7867867,
    1231233
);
$array = array(
    array("id" => 7867867, "title" => "Must Be #3"),
    array("id" => 3452342, "title" => "Must Be #1"),
    array("id" => 1231233, "title" => "Must Be #4"),
    array("id" => 5867867, "title" => "Must Be #2"),
    array("id" => 1111111, "title" => "Dont Care #1"),
    array("id" => 2222222, "title" => "Dont Care #2"),
    array("id" => 3333333, "title" => "Dont Care #3"),
    array("id" => 4444444, "title" => "Dont Care #4")
);

shuffle($array);  // for testing
var_dump($array); // before

usort($array, function ($a, $b) use ($order) {
    $a = array_search($a["id"], $order);
    $b = array_search($b["id"], $order);
    if ($a === false && $b === false) { // both items are dont cares
        return 0;                       // a == b
    } else if ($a === false) {          // $a is a dont care
        return 1;                       // $a > $b
    } else if ($b === false) {          // $b is a dont care
        return -1;                      // $a < $b
    } else {
        return $a - $b;                 // sort $a and $b ascending
    }
});
var_dump($array); // after 
```

输出：

```
Before                         |  After
-------------------------------+-------------------------------
array(8) {                     |  array(8) {
  [0]=>                        |    [0]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(4444444)               |      int(3452342)
    ["title"]=>                |      ["title"]=>
    string(12) "Dont Care #4"  |      string(10) "Must Be #1"
  }                            |    }
  [1]=>                        |    [1]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(3333333)               |      int(5867867)
    ["title"]=>                |      ["title"]=>
    string(12) "Dont Care #3"  |      string(10) "Must Be #2"
  }                            |    }
  [2]=>                        |    [2]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(1231233)               |      int(7867867)
    ["title"]=>                |      ["title"]=>
    string(10) "Must Be #4"    |      string(10) "Must Be #3"
  }                            |    }
  [3]=>                        |    [3]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(1111111)               |      int(1231233)
    ["title"]=>                |      ["title"]=>
    string(12) "Dont Care #1"  |      string(10) "Must Be #4"
  }                            |    }
  [4]=>                        |    [4]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(5867867)               |      int(2222222)
    ["title"]=>                |      ["title"]=>
    string(10) "Must Be #2"    |      string(12) "Dont Care #2"
  }                            |    }
  [5]=>                        |    [5]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(2222222)               |      int(1111111)
    ["title"]=>                |      ["title"]=>
    string(12) "Dont Care #2"  |      string(12) "Dont Care #1"
  }                            |    }
  [6]=>                        |    [6]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(3452342)               |      int(3333333)
    ["title"]=>                |      ["title"]=>
    string(10) "Must Be #1"    |      string(12) "Dont Care #3"
  }                            |    }
  [7]=>                        |    [7]=>
  array(2) {                   |    array(2) {
    ["id"]=>                   |      ["id"]=>
    int(7867867)               |      int(4444444)
    ["title"]=>                |      ["title"]=>
    string(10) "Must Be #3"    |      string(12) "Dont Care #4"
  }                            |    }
}                              |  } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-02T07:34:00.040

使用具有迭代调用的方法的其他答案`array_search()`并不像它们那样有效。通过重组/翻转“订单”查找数组，您可以完全省略所有`array_search()`调用——使您的任务更加高效和简洁。我将使用最现代的“宇宙飞船算子”（`<=>`），但早期的技术对于比较线也适用。“空合并运算符” ( `??`) 将检查`id`查找数组中给定值的存在，其方式与此相同`isset()`- 这总是比`array_search()`or更有效`in_array()`。

代码：（[Demo](https://3v4l.org/MaKkb)）（[Demo with 7.4 arrow function syntax](https://3v4l.org/8sKOL)）

```
// restructure with values as keys, and keys as order (ASC)
$order = array_flip([3452342, 5867867, 7867867, 1231233]);
// generating $order = [3452342 => 0, 5867867 => 1, 7867867 => 2, 1231233 => 3];

$default = count($order);
// generating $default = 4

usort($array, function($a, $b) use($order, $default) {
    return ($order[$a['id']] ?? $default) <=> ($order[$b['id']] ?? $default);
});

var_export($array); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T19:33:19.177

您需要定义自己的比较函数并使用[`usort`](http://uk.php.net/usort)或者[`uasort`](http://uk.php.net/uasort)如果您想维护索引关联。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-16T06:13:34.007

没有排序你也可以得到它。

1.  如果没有重复的 id 并且`$order`包含 from 的所有`id`值，`$array`并且 in 的`id`列`$array`包含 in 的所有值`$order`，则可以通过将值翻转为 in 的键`$order`，然后将临时的第一级键分配给数组，然后合并或替换`$array`为来获得相同的结果`$order`。

    ```
    $order = array(3452342, 5867867, 7867867, 1231233);
    $array = array(
        array('id' => 7867867, 'title' => 'Some Title'),
        array('id' => 3452342, 'title' => 'Some Title'),
        array('id' => 1231233, 'title' => 'Some Title'),
        array('id' => 5867867, 'title' => 'Some Title'),
    );

    $order = array_flip($order);
    $array = array_column($array,null,"id");
    $result = array_replace($order,$array);
    var_dump(array_values($result)); 
    ```

2.  中可能存在重复的 id `$array`：

    ```
    $order = array(3452342, 5867867, 7867867, 1231233);
    $array = array(
        array('id' => 7867867, 'title' => 'Some Title'),
        array('id' => 3452342, 'title' => 'Some Title'),
        array('id' => 1231233, 'title' => 'Some Title'),
        array('id' => 5867867, 'title' => 'Some Title'),
    );

    $order_dict = array_flip($order);
    $order_dict = array_combine($order, array_fill(0, count($order), []));
    foreach($array as $item){
        $order_dict[$item["id"]][] = $item;
    }
    //$order_dict = array_filter($order_dict);  // if there is empty item on some id in $order array
    $result = [];
    foreach($order_dict as $items){
        foreach($items as $item){
            $result[] = $item;
        }
    }
    var_dump($result); 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-17T08:34:38.200

## 更高效的解决方案

```
$dict = array_flip($order);
$positions = array_map(function ($elem) use ($dict) { return $dict[$elem['id']] ?? INF; }, $array);
array_multisort($positions, $array); 
```

## 不要在每次比较时重新计算位置

当您的数组很大或获取 id 成本较高时，使用`usort()`可能会变得很糟糕，因为您会为每次比较重新计算 id。尝试[`array_multisort()`](https://www.php.net/manual/en/function.array-multisort.php)使用预先计算的位置（参见`mediumsort`或`fastsort`在下面的示例中），这并不复杂。

同样在每次比较时在 order 数组中搜索 id （如在接受的答案中）也不会提高性能，因为每次比较都会对其进行迭代。计算一次。

在下面的代码片段中，您可以看到主要的三个排序函数：

*   `slowsort`
    接受的答案。搜索每次比较的位置。
*   `mediumsort`
    `slowsort`通过提前计算位置来 改进
*   `fastsort`
    `mediumsort`通过避免完全搜索来 改进。

请注意，这些句柄元素的 id 未按顺序给出，方法是提供`INF`. 如果您的订单数组与原始数组的 id 1 对 1 匹配，那么避免一起排序，只在正确的位置插入元素是要走的路。我添加了一个功能`cheatsort`正是这样做的。

您可以更一般地按权重对数组进行排序（参见`weightedsort`示例）。确保只计算一次权重，以获得良好的性能。

## 性能（对于长度为 1000 的数组）

```
fastsort     about  1 ms
mediumsort   about  3 ms
slowsort     about 60 ms 
```

提示：对于更大的数组，差异会变得更糟。

## 排序功能比较

```
<?php

/**
 * accepted answer
 *
 * re-evaluate position in order on each comparison
 */
function slowsort(&$array, $order, $key = 'id')
{
  usort($array, function ($a, $b) use ($order, $key) {
    $pos_a = array_search($a[$key], $order);
    $pos_b = array_search($b[$key], $order);
    return $pos_a - $pos_b;
  });
}

/**
 * calculate element positions once
 */
function mediumsort(&$array, $order, $key = 'id')
{
  $positions = array_map(function ($elem) use ($order, $key) {
    return array_search($elem[$key], $order);
  }, $array);
  array_multisort($positions, $array);
}

/**
 * calculate positions without searching
 */
function fastsort(&$array, $order, $key = 'id')
{
  $dict = array_flip($order);
  $positions = array_map(function ($elem) use ($dict, $key) {
    return $dict[$elem[$key]] ?? INF;
  }, $array);
  array_multisort($positions, $array);
}

/**
 * when each order element gets used exactly once, insert elements directly
 */
function cheatsort(&$array, $order, $key = 'id')
{
  $dict = array_flip($order);
  $copy = $array;
  foreach ($copy as $elem) {
    $pos = $dict[$elem[$key]];
    $array[$pos] = $elem;
  }
}

/**
 * Sort elements in $array by their weight given by $weight_func
 * 
 * You could rewrite fastsort and mediumsort by replacing $position by a weight function
 */
function weightedsort(&$array, $weight_func)
{
  $weights = array_map($weight_func, $array);
  array_multisort($weights, $array);
}

/**
 * MEASUREMENTS
 */

/**
 * Generate the sorting problem
 */
function generate($size = 1000)
{
  $order = array();
  $array = array();

  for ($i = 0; $i < $size; $i++) {
    $id = random_int(0, PHP_INT_MAX);
    $order[] = $id;
    $array[] = array('id' => $id);
  }
  shuffle($order);
  return [$array, $order];
}

/**
 * Time $callable in ms
 */
function time_it($callable)
{
  $then = microtime(true);
  $callable();
  $now = microtime(true);
  return 1000 * ($now - $then);
}

/**
 * Time a sort function with name $sort_func
 */
function time_sort($sort_func) 
{
  echo "Timing $sort_func", PHP_EOL;
  [$array, $order] = generate();
  echo time_it(function () use ($sort_func, &$array, $order) {
    $sort_func($array, $order);
  }) . ' ms' . PHP_EOL;
}

time_sort('cheatsort');
time_sort('fastsort');
time_sort('mediumsort');
time_sort('slowsort'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-17T19:43:44.990

@salathe 对于那些很难理解 salathe 的 usort 正在做什么的人：

$array 中的每个项目都是锦标赛中的“冠军”，位于新数组的开头（除了他们想要成为第 0 而不是第 0）。

$a 是主场冠军，$b 是一场比赛中的对手冠军。

回调中的 $pos_a 和 $pos_b 是在争夺冠军 a 和 b 时使用的属性。在这种情况下，此属性是 $order 中冠军 id 的索引。

然后是返回时的战斗。现在我们看看是否拥有更多或更少的属性更好。在一次排序战中，主队冠军想要一个负数，这样他就可以更快地进入阵列。客场冠军想要一个正数。如果有 0 则为平局。

所以按照这个类比，当客场冠军属性（$order中的索引）从主队属性中减去时，客场冠军属性越大，获得正数的可能性就越小。但是，如果您要颠倒使用属性的方式，现在主场冠军的属性会从客场冠军的属性中减去。在这种情况下，客场冠军的较大数字更有可能使他的比赛以正数结束。

代码如下所示：

注意：代码运行很多次，就像真正的锦标赛有很多战斗来决定谁先获得（即 0 / 数组开始）

```
//tournament with goal to be first in array
    usort($champions, function ($home, $away) use ($order) {
        $home_attribute = array_search($a['id'], $order);
        $away_attribute = array_search($b['id'], $order);
        //fight with desired outcome for home being negative and away desiring positive
        return $home_attribute - $away_attribute;
    }); 
```

# java - Spring Security / Shiro 和一次性代码

> ID：11145398
> 
> 赞同：0
> 
> 时间：2012-06-21T19:28:59.640
> 
> 标签：java, spring-security, shiro

我们正在开发一个考试应用程序，通过一次性代码授予对考试的访问权限。

所以基本上我们给考生一个代码，例如“FG678”，这是他进入考试的代码。

所以登录表单应该只有一个字段，如果用户输入正确的一次性代码，则授予访问权限。

我找不到有关 Spring Security 或 Shiro 的这种实现的任何信息。你们中的任何人都知道这将是多么容易实施吗？如果可能的话？

或者甚至是教程的链接？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:47:31.453

我不知道 shiro，但对于 spring Securiy，你可以轻松地做到这一点。您只需要创建自己的登录页面并实现该类`AuthenticationProvider`并在您的 xml 文件中使用它

# iphone - 如何随着时间增加间隔？

> ID：11145407
> 
> 赞同：0
> 
> 时间：2012-06-21T19:29:26.707
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我想知道如何随着时间的推移增加间隔，以便添加目标。我还是 cocos2d 的新手。

```
[self schedule:@selector(gameLogic:) interval:0.7];

 -(void)gameLogic:(ccTime)dt {
[self addTarget];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:34:22.440

为什么不声明一个简单的属性（int、float 等）来保存方法被调用的次数，并在调用方法本身时增加它？这样，这只是一个乘法问题：

```
//.h
...
@property (nonatomic, assign) int iterations;
//.m
@synthesize iterations = iterations_;
[self schedule:@selector(gameLogic:) interval:0.7*iterations_];

 -(void)gameLogic:(ccTime)dt {
    [self addTarget];
    iterations_++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:36:58.890

```
float interval = .7;

-(id)init{
  ...
  [self scheduleOnce:@selector(gameLogic:) delay:interval]; //Check the name of the method, I'm not 100% sure about it
  ...
}

-(void)gameLogic:(ccTime)dt {
  [self addTarget];
  interval += dt; //Or whatever you want to increase it by
  [self scheduleOnce:@selector(gameLogic:) delay:interval]; //Check the name of the method, I'm not 100% sure about it
} 
```

# java - 根据另一个 ComboBox 的项目禁用 JComboBox

> ID：11145408
> 
> 赞同：0
> 
> 时间：2012-06-21T19:29:28.993
> 
> 标签：java, swing, jcombobox

所以这就是我想要做的。如果用户在 中选择一个项目`JComboBox1`，我希望能够禁用`JComboBox2`. 但只有当他们选择`"Unavailable"`. 我已经阅读了`action listeners`诸如此类的东西，但是有没有一种方法可以让我像 if 语句一样使用：这是我的想法：

```
if (jComboBox1.getSelectedItem().equals("Unavailable") == true) {
        jComboBox2.setEnabled(false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:53:55.883

这当然可以，但是您必须定期调用那段代码。更好的是使用 ActionListener - 它肯定会在未来帮助你。您必须创建一个实现 ActionListener 的类，例如

```
//This class should be a private class inside the class which holds the JComboBoxes.
private class DisableActionListener implements ActionListener { 

    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox)e.getSource();
        if (cb.getSelectedItem().equals("Unavailable")) {
            jComboBox2.setEnabled(false);
        }
    }
} 
```

为此，您必须将 ActionListener 附加到第一个 JComboBox - ActionListener 本身并不好！为此，请使用 JComboBox 上的 addActionListener() 方法，添加这个新创建的类的实例。

现在，剖析代码：

```
private class DisableActionListener implements ActionListener 
```

在这里，我们创建一个*实现*ActionListener 接口的类。有了这个，我们正在创建我们自己的 ActionListener 模型。当你实现一个接口时，你必须重写接口的所有方法，所以我们必须重写接口上的标准 actionPerformed(ActionEvent e) 方法。每当您选择或取消选择项目时都会调用此方法（将调度 ActionEvent）；因此，您必须将您想要发生的事情的逻辑放入此方法中。

```
JComboBox cb = (JComboBox)e.getSource(); 
```

每个导致调用 actionPerformed() 方法的 ActionEvent 都将包含额外的数据。数据片段之一是 ActionEvent 的来源 - 是什么让这个动作发生？在这种情况下，我们知道源是一个 JComboBox，因为我们只将 ActionListener 附加到了 JComboBox，因此我们可以将作为 Object 的 ActionEvent 的源转换为发送事件的 JComboBox。

剩下的就是你自己写的 if 逻辑，修正了语法错误：

你写了

```
(jComboBox1.getSelectedItem().equals("Unavailable") == true), 
```

但是 String 上的 equals() 方法已经返回 true，因此 (== true) 部分是不需要的冗余。在您的情况下，您基本上得到（true == true）。

无论如何，希望这会有所帮助！

# ajax - Bootstrap Multiple Popover - 通过 Ajax TypeError 加载内容

> ID：11145411
> 
> 赞同：2
> 
> 时间：2012-06-21T19:29:31.927
> 
> 标签：ajax, twitter-bootstrap, popover

我有几个弹出框（在标签上），它们进行 ajax 调用来填充它们的数据内容。我正在使用以下代码拨打电话：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.withajaxpopover').bind('hover',function(){
        var el=$(this);

        $.ajax({
            type: "GET",
            url: el.attr("data-url"),
            data: el.attr("alt"),
            dataType: "html",
            success: function(data) {
                el.attr("data-content", data);
            }
        });

        console.log(el.attr("data-content"));
        el.popover('show');
    });
});
</script> 
```

然后像这样拨打电话：

```
<a href="#" id="test1" title="blabla" class="withajaxpopover" data-url="/ajax/project">blabla</a><br><br>  
<a href="#" id="test2" title="test2" class="withajaxpopover" data-url="/ajax/ports/">hahahaha</a> 
```

当我将鼠标悬停在一个链接上时，弹出框会正确显示，但是在显示一个弹出框后，当我将鼠标悬停在任何其他弹出框上时会出现以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'popover' 
```

当我查看控制台时，对于所有后续悬停，ajax 正在返回正确的数据，但弹出框没有出现。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:16:05.367

我最终不得不使用一个完整的其他扩展来完成我所需要的。请参阅：[http](http://designwithpc.com/Plugins/Hovercard) ://designwithpc.com/Plugins/Hovercard具有比引导弹出窗口更好的 ajax 支持和悬停功能。并且 js 很容易修改以适应任何特定需求。强烈推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:13:39.310

尝试这个：

```
$(document).ready(function() {
    $('.withajaxpopover').bind('hover',function(){
        var el=$(this);

        $.ajax({
            type: "GET",
            url: el.attr("data-url"),
            data: el.attr("alt"),
            dataType: "html",
            success: function(data) {
                el.attr("data-content", data);
                el.popover('show'); 
            }
        });
    });
}); 
```

# php - WAN 上的 PHP AMQ 库加密凭证

> ID：11145416
> 
> 赞同：1
> 
> 时间：2012-06-21T19:30:08.477
> 
> 标签：php, ssl, rabbitmq, amqp

我正在做一个项目，我们通过 Web 界面（后端是 PHP）提交作业，这些作业将出现在 WAN 上的服务器上的队列（rabbitmq 后端）中。我的 PHP 生产者工作正常，没有任何类型的身份验证或加密。

我目前正在努力实现某种身份验证（我们不希望任何人向我们的服务器提交作业都随意）。

*但是，我在任何*PHP 库中都找不到使用 SSL 的方法[我部分让它在服务器上运行，但无法获取客户端]。我想避免有人能够进行流量嗅探并获取我们的凭据，并可能提交作业。

传递的作业只是与数据库相关的 ID，因此它们不敏感，只是凭据。

有什么我想念的吗？这些库中是否有未记录的功能？有没有我可能没有尝试过的？我尝试过并且目前正在使用的一个是通过 PECL 的（我相信是 php-amqp）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:41:22.623

经过更持续的研究，我发现了另一个（更新的）库，这可能会有所帮助。

[https://github.com/BraveSirRobin/amqphp](https://github.com/BraveSirRobin/amqphp)

我仍然会喜欢其他输入，来自其他对 AMQ 和 PHP 更有经验的人

# vba - 保存当前日期的宏

> ID：11145421
> 
> 赞同：1
> 
> 时间：2012-06-21T19:30:28.563
> 
> 标签：vba, excel

有没有办法制作一个宏来保存名称中包含当前日期的文件。我想每天用正确的日期保存它。

这是我作为宏所拥有的，非常简单，但是在文件名中获取当前日期公式时遇到问题（如果可能）

```
Sub Save()
    ActiveWorkbook.SaveAs Filename:="X:\file06-21-2012\.xlsm", FileFormat _
    :=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
End Sub 
```

所以明天我希望马可将其保存为 file06-22-2012。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:45:20.483

像这样？

```
Sub Save()
    Dim FilePath As String
    Dim NewName As String

    FilePath = "X:\": NewName = FilePath & "file" & Format(Date, "MM-DD-YYYY") & ".xlsm"

    ActiveWorkbook.SaveAs Filename:=NewName, FileFormat _
    :=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:45:38.850

在充分尊重@HeadofCatering 的回答的情况下，我认为这是一种更简单、更容易阅读的方法。

```
Sub Save()

Dim dtDate As Date
dtDate = Date

Dim strFile As String
strFile = "X:\file" & Format(dtDate, "mm-dd-yyyy") & ".xlsm"

ActiveWorkbook.SaveAs Filename:=strFile, FileFormat _
    :=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False

End Sub 
```

# xml - Magento 错误登录

> ID：11145424
> 
> 赞同：1
> 
> 时间：2012-06-21T19:30:31.550
> 
> 标签：xml, magento

我是 Magento 的新手，因此有“为什么？”的思维空间。

我现在正在围绕模块和模板工作。我能够创建一个模块，但测试模块似乎不起作用。

我创建了 module.xml 和 etc/config.xml。该模块显示在预先列表中。虽然当我尝试加载页面 index.php/module/index/action (index.php/weblog/index/testModel)。它只是说“404 哎呀，我们的坏……”。

我知道我做错了什么，尽管我没有可以查看的日志以了解发生了什么。

我该如何开始调试呢？

模块/etc/config.xml：

```
<?xml version="1.0"?>
<frontend>
    <routers>
        <weblog>
           <use>standard</use>
           <args>
            <module>Alanstormdotcom_Weblog</module>
            <frontName>weblog</frontName>
           </args>
        </weblog>
    </routers>
</frontend> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:01:17.707

我认为您在配置文件中缺少一些额外的 xml 是必需的：

它至少应该看起来像这样：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Alanstormdotcom_Weblog>
            <version>1.0.0</version>
        </Alanstormdotcom_Weblog>
    </modules>
    <frontend>
        <routers>
            <weblog>
                <use>standard</use>
                <args>
                    <module>Alanstormdotcom_Weblog</module>
                    <frontName>weblog</frontName>
                </args>
            </weblog>
        </routers>
    </frontend>
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:56:55.643

固定的。

我错过了 config.xml 中的 <modules> 部分。

注意：留下这篇文章而不是关闭它，它可能会帮助某人更好地理解 magento 配置。

# php - 使用 PHP 从本地服务器向客户端 PC 中的 VB.NET 应用程序发送值

> ID：11145432
> 
> 赞同：0
> 
> 时间：2012-06-21T19:31:23.277
> 
> 标签：php, vb.net, vb.net-2010

我有三台客户端 PC 和一台本地服务器（实际上是一台 PC-在其上使用 Windows 7 Ultimate）。

在服务器 pc 中，我安装了 XAMPP，并且正在运行一个使用 PHP 开发的应用程序。我有以下 PHP 变量：

```
 $id='something';
 $value='something'; 
```

在客户端 PC 中，我安装了使用 VB.NET 开发的软件（没有 XAMMP），并且我有以下 VB 功能

```
Public Function Hello(ByVal test As String,ByVal test As String) As Boolean 
     //some code    
End Function 
```

对不起，如果上面的VB.NET代码有误，我对VB.NET的知识是零（我的朋友会开发VB.NET部分）

现在，我的问题是，是否有任何方法可以使用 PHP 将上述 PHP 变量的值发送到任何客户端 PC 中的 VB 函数？假设我的客户端 PC 的 IP 地址是： `192.168.30.1`, `192.168.30.2`, `192.168.30.3`. 如果有，请告诉我该怎么做，或者你知道这方面的任何文章吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-13T05:22:07.677

您可以简单地使用 Windows URI 方案。这与 μTorrent 的磁力链接中使用的方法相同。

向其中注册您的应用程序：http: [//msdn.microsoft.com/en-us/library/ie/aa767914 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/aa767914(v=vs.85).aspx)

然后您可以使用应用程序参数来捕获数据。不要忘记使您的应用程序成为单实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:39:54.117

发送到客户端 PC？不。即使 PHP 可以做到这一点，服务器如何知道何时将值发送到客户端？什么会触发它？它怎么会知道应用程序正在客户端上运行？

您可以让客户端应用程序调用函数内的服务器来检索值。最简单的方法是设置一个 RESTful 端点，但您也可以使用 SOAP 之类的东西。一切都取决于您想要变得多复杂。

# python - SUDS 是否受防火墙影响？

> ID：11145434
> 
> 赞同：2
> 
> 时间：2012-06-21T19:31:45.233
> 
> 标签：python, suds

我试图让肥皂水连接到任何东西。这是我第一次使用它。我输入的每个网址都会返回一个错误。这是我的代码；几乎完全从另一个线程复制。

```
from suds.client import Client
url = "http://www.webservicex.net/ConvertAcceleration.asmx?WSDL"
client = Client(url)
print client 
```

它总是在以下位置返回错误：

```
client = Client(url)
urllib2.URLError: urlopen error [Errno 8] node name or service name not known 
```

我很好奇这是否是因为我在一个相当大的公司防火墙后面，如果有人知道一种绕过它的方法，而没有系统管理员的窃听。我使用的网址是有效的。我可以连接到我电脑上的东西没问题，只是似乎无法离开系统。

谢谢

*编辑：当我尝试调用方法时，在我的本地目录上使用 WSDL 会引发同样的错误。使用防火墙内的网站会向我发送以下错误：

```
urllib2.URLError: urlopen error [Errno 146] Connection refused 
```

我认为这是因为它需要密码验证。我一直在尝试/使用代理设置，但似乎没有任何进展。

我在其他有类似问题的人的论坛上看到了几个主题，但他们都没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T21:56:47.447

听起来可能对可以访问网络的程序有限制。这样做通常是为了防止病毒和蠕虫进入您的计算机，然后再到 Internet 上获取有效负载或接收更多指令。

另外，您提到了代理。您可能必须将程序配置为使用代理才能访问 Internet。

# pyqt - 带有 Twisted 的 PyQt 信号：无法捕获自定义信号

> ID：11145437
> 
> 赞同：0
> 
> 时间：2012-06-21T19:31:59.540
> 
> 标签：pyqt, twisted, signals-slots

问题描述：

*   保存数据库的服务器进程（可缓存）
*   在 UI 中读取和显示数据的客户端 (RemoteCache)
*   他们通过 Twisted PB 互相交谈
*   我想在服务器数据库更改时刷新我的 UI。

我的客户端有一个方法，*_mutation* _handler，它由服务器通知为了通知我的 UI，我创建了一个发出信号的单例 Notifier 类。然后在我的 Qt 小部件中，我将信号连接到小部件的插槽。

```
# inside the RemoteCache subclass on my client
# notified by the PB server when something happens
def __mutation_handler(self):
  notifier = Notifier()
  notifier.notify()

# inside notify.py
class Notifier(QObject):
  def __new__(cls):
    # Make it a singleton
  def notify(self):
    self.emit(SIGNAL('SomethingChanged'))

# inside the RemoteCache subclass on my client
def __mutation_handler(self):
  # singleton notifier
  notifier = Notifier()
  notifier.notify()
# inside my widget.py
class MyWidget(QWidget):
   def __init__(self):
     ... # code
     self.notifier = Notifier()
     self._create_signal_slot_connections()
     ... # more code
   def _create_signal_slot_connections(self):
     self.connect(self.notifier, SIGNAL('SomethingChanged'),self.shout)
   def shout(self):
     print 'Server's database changed!!!' 
```

问题：当我更改服务器数据库中的某些内容时，*_mutation_handler*被正确调用，然后信号发出正常。但是，MyWidget 无法捕捉到信号。

注意：我正在使用 qt4reactor 来调整 Twisted 的事件循环以适应 qt

我真的很感谢你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:13:41.117

PyQt4 中似乎有一个新的信号 API。有关其使用的示例，请参见[http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html)。也许这会更好。

# asp.net-mvc - 从 MVC 站点调用使用 ACS 的 WCF 服务

> ID：11145443
> 
> 赞同：0
> 
> 时间：2012-06-21T19:32:21.607
> 
> 标签：asp.net-mvc, wcf, acs, saml-2.0

我有一个使用 ACS 作为身份验证提供程序的 MVC 网站。身份验证过程运行良好。我想调用一个需要身份验证的 WCF 服务，我想传递一个 RST 令牌，但我不知道如何创建它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:00:49.820

关键问题是 WCF 服务期望什么身份。如果您可以为整个 MVC 站点（又名“受信任的子系统”）使用一个身份，那么一切照旧：您需要从 WCF 信任的身份提供者那里获取一个令牌，仅此而已。ACS 可能是其中之一，但也可能是完全不同的东西。这实际上取决于谁拥有 WCF 服务。

另一方面，如果您希望将*原始*用户身份（即 MVC 站点的调用者）流向 WCF 服务，那么您处于委托方案中。这是可能的，但通常很复杂。搜索“Act As”（这里有一篇关于它的文章：http: [//msdn.microsoft.com/en-us/library/ee517268.aspx](http://msdn.microsoft.com/en-us/library/ee517268.aspx)）。

简而言之，MVC 应用程序将使用用户提交的原始令牌作为输入向 STS 请求一个新令牌，并带有特殊条件（“充当”）。此条件表示委托的 STS。

正如我所说，这是一个非常复杂的设置。另外（最后我听说）ACS 不支持“充当”请求。

# spring-security - Spring Security 隐藏网站的单个元素

> ID：11145444
> 
> 赞同：0
> 
> 时间：2012-06-21T19:32:22.590
> 
> 标签：spring-security

嗨，我是 Spring 新手，遇到以下问题：

我已经在我的网站上成功实现了登录机制，但我知道如何让它只在指定的子页面上工作：

```
 <http entry-point-ref="authenticationEntryPoint" auto-config="true">
    <intercept-url pattern="/admin" access="ROLE_ADMIN" /> 
```

而且我想只隐藏对任何用户可见的子页面上的选定元素。

例如，任何人都可以访问子页面来阅读我网站上的文章，但只有注册用户才能添加评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:43:29.040

您可能希望`<sec:global-method-security pre-post-annotations="enabled"/>`在 Web 上下文中使用，以便可以`@PreAuthorize("hasRole('YOUR ROLE')")`在控制器中使用该注释。

您可以使用 spring-security 标签来根据连接的用户角色在您的 jsp 页面上显示/隐藏内容。

你可以在这里有更多的文档[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html)

# css - 我如何设计风格 CSS样式表中的标签？

> ID：11145445
> 
> 赞同：1
> 
> 时间：2012-06-21T19:32:22.860
> 
> 标签：css

为什么我不能在 CSS 中设置嵌入标签的样式？例如，我想将我网站上所有 YouTube 视频的宽度（当前为 630 像素）覆盖为 600 像素。我尝试执行以下操作，但它不起作用。我的文本编辑器（Sublime Text 2）似乎甚至没有在 CSS 中语法高亮嵌入标签：

```
img, video, object, embed {
max-width: 100%;    
height: auto;
} 
```

Sublime Text 2 中缺少语法颜色突出显示。这是否意味着您不能在 CSS 样式表中设置嵌入标签的样式？[http://i.imgur.com/JBaTp.png](http://i.imgur.com/JBaTp.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:35:07.603

嵌入式元素通常具有内联定义的`[height]`和`[width]`属性：

```
<embed height="300" width="400" ... /> 
```

内联样式（包括这些属性）优先于 CSS 规则（它们实际上更像是*建议*）。

# ruby-on-rails - Rails 3 HTTP-header If-Modified-Since 使用 curl

> ID：11145447
> 
> 赞同：1
> 
> 时间：2012-06-21T19:32:25.207
> 
> 标签：ruby-on-rails, http, curl, if-modified-since

我有一个简单的开箱即用的 rails 服务器正在运行，我试图弄清楚如何使它与 If-Modified-Since 标头一起工作。我正在使用以下 curl 请求。

curl -I localhost:3000/shows/1 --header 'If-Modified-Since: Thu, 21 Jun 2012 19:16:20 GMT'

我总是得到 200 OK，但我想要 304 Not Modified。

当我通过浏览器执行此操作时，我得到一个 304 Not Modified 但不是 curl。

我做错了吗？

更新

如果我跑

curl -v -I localhost:3000/shows/1 --header 'If-Modified-Since: Thu, 21 Jun 2012 19:16:20 GMT'

我得到：

```
* About to connect() to localhost port 3000 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 3000 (#0)
> HEAD /shows/1 HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:3000
> Accept: */*
> If-Modified-Since: Thu, 21 Jun 2012 19:16:20 GMT
> 
< HTTP/1.1 200 OK 
< Content-Type: text/html; charset=utf-8
< X-Ua-Compatible: IE=Edge
< Etag: "35ec119e3b6c7ccde9eeee82afcd4ee9"
< Cache-Control: max-age=0, private, must-revalidate
< X-Request-Id: dd365eb0b80f5b9ff62bc16f3dbbe494
< X-Runtime: 0.007800
< Content-Length: 0
< Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-02-16)
< Date: Thu, 21 Jun 2012 19:37:55 GMT
< Connection: Keep-Alive
< Set-Cookie: _spacebarfm-        rails_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJWY0NzNjYmFlYzJhNzgzZWRjMjc2MmU4YWFkZDc1OTIwBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMWhjU3NvQ2VuRkR1NmJRREV1SmxOMUlaK3VhQU0ycjY2am94cFFmOTVnTTg9BjsARg%3D%3D--f9c756d08065c423cdecba2d710b1b74bf798c12; path=/; HttpOnly 
```

设置Cookie：_spacebarfm-rails_session = BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJWY0NzNjYmFlYzJhNzgzZWRjMjc2MmU4YWFkZDc1OTIwBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMWhjU3NvQ2VuRkR1NmJRREV1SmxOMUlaK3VhQU0ycjY2am94cFFmOTVnTTg9BjsARg％3D％3D - f9c756d08065c423cdecba2d710b1b74bf798c12; 路径=/; HttpOnly

```
* Connection #0 to host localhost left intact
* Closing connection #0 
```

控制器的rails代码是：

```
def index
  @shows = Show.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @shows }
  end
end 
```

Chrome 输出如下：

```
Request URL:http://localhost:3000/shows/1.json
Request Method:GET
Status Code:304 Not Modified
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:_btest_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJTNkNzI3ODc1NjU0M2EyZTViOWY0ZTgzMjU0M2IzYmY4BjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMUFVZVN0ZHp6L0JRNGVMZDZST2JSNG54Zlg4T3VmSnk4RFNhWXRHbmljK3c9BjsARg%3D%3D--ceb783671372cbcc3ecf971340f2a2e2424c9620; _spacebarfm-rails_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJTNhMTcxNjMyNzJkMWRjYzAxY2NiN2EwN2JjMzE5YWFjBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMTZZREp5ZC92VTlEQk9oKytCK0hKYW5na1M4bzRPRUM3U3lmWURzU09neWs9BjsARg%3D%3D--793b15b38511bd0805df3a210d7e72152905b8b9
Host:localhost:3000
If-None-Match:"bb012b3a16e7e80ec271b0d234a9b8ce"
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
Response Headersview source
Cache-Control:max-age=0, private, must-revalidate
Connection:close
Date:Thu, 21 Jun 2012 21:09:28 GMT
Etag:"bb012b3a16e7e80ec271b0d234a9b8ce"
Server:WEBrick/1.3.1 (Ruby/1.9.3/2012-02-16)
Set-Cookie:_spacebarfm-rails_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJTNhMTcxNjMyNzJkMWRjYzAxY2NiN2EwN2JjMzE5YWFjBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMTZZREp5ZC92VTlEQk9oKytCK0hKYW5na1M4bzRPRUM3U3lmWURzU09neWs9BjsARg%3D%3D--793b15b38511bd0805df3a210d7e72152905b8b9; path=/; HttpOnly
X-Request-Id:2435168fa20699508e9282c37566c015
X-Runtime:0.005378
X-Ua-Compatible:IE=Edge 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:18:47.933

你需要使用陈旧的吗？方法告诉 Rails 你想使用 if-modified-then

您实际上是在调用 show 方法。将其更改为：

```
def show
  @show = Show.find(params[:id])

  if stale?(:etag => @show, :last_modified => @show.updated_at.utc)
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @show }
    end
  end
end 
```

# windows-phone-7 - WP7 应用程序生命周期

> ID：11145451
> 
> 赞同：0
> 
> 时间：2012-06-21T19:32:44.717
> 
> 标签：windows-phone-7, silverlight-4.0, application-lifecycle, tombstone

好的，这就是我目前对 Windows Phone 7.1 应用程序生命周期的了解，但我还有几个问题。

**应用程序启动** - 在应用程序启动时调用，然后继续初始化应用程序，然后是 MainPage。

**Applicaiton Deactivated** - 当应用程序处于休眠状态（正在运行但用户未使用它）时调用。这将调用当前页面的 OnNavigatedFrom 方法，然后再移动到 App 类中的 ApplicationDeactivated 方法。一旦应用程序处于休眠状态，如果操作系统需要更多内存，它可能会变成墓碑。

**应用程序已激活** - 当应用程序退出休眠或墓碑状态时调用，您可以调用 IsApplicationInstancePreserved 来确定哪个（true 表示休眠，因此状态被保留）。一旦调用它，它就会移动到 OnNavigatedTo。

**Applicaiton Closing** - 当用户向后导航超过第一页并且应用程序退出时调用。OnNavigatedFrom 方法（在第一页上）也将被调用。

所以我的问题主要与调用 ApplicationActivated 方法时正在初始化的内容有关。

- 如果应用程序没有被墓碑化，您需要做些什么来初始化应用程序，或者操作系统是否会将所有内容恢复到原来的状态？构造函数是否甚至调用了它正在导航到的页面，或者所有内容都被冻结了？

- 如果应用程序被墓碑化了，页面构造函数会被调用吗？（我假设是这样，因为没有保存任何内容）。如果页面构造函数被调用，第一次导航到这个页面和从墓碑状态返回有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:28:07.527

这些都是你可以自己测试的。在应用程序项目的属性下，您可以在离开应用程序时启用逻辑删除。此设置位于“调试”选项卡下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:54:29.453

如果我错了，请纠正我，但这里是我提出的问题的答案。

- 当应用程序被激活并且它没有被墓碑化时，只有最后一页的 OnNavigatingTo 方法被调用（没有页面构造函数）。我不相信在这种情况下您需要做任何事情，因为应用程序状态已保存。

- 当应用程序被墓碑化时，您需要保存可能需要重新加载的任何页面数据，因为页面上的所有内容都会丢失，并且当它再次被激活时，在 OnNavigatedTo 方法之前调用页面构造函数。

希望这对将来有类似问题的人有所帮助....

# php - 用 PHP 和正则表达式替换模板

> ID：11145454
> 
> 赞同：1
> 
> 时间：2012-06-21T19:32:58.617
> 
> 标签：php, regex

我需要使用 php/regex 来替换它：

```
{{image-4-m}} 
```

对此：

```
<img src="4.jpg" class="m" /> 
```

或者另一个例子，这个：

```
{{image-53-v}} 
```

对此：

```
<img src="53.jpg" class="v" /> 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:34:08.813

`preg_replace`您可以通过使用索引来引用组`$n`。

```
preg_replace('/{{image-(\d+)-([mv])}}/', '<img src="$1.jpg" class="$2" />', $template); 
```

[这是一个演示。](http://codepad.org/UIh0zCJj)

# php - 数组中两个值之间的最高/最大差值

> ID：11145456
> 
> 赞同：0
> 
> 时间：2012-06-21T19:33:07.757
> 
> 标签：php, arrays

所以，我需要找出索引数组的任何两个随机值之间的最大可能差异，我不确定我的答案是否正确，因为你知道这对于这个问题的重要性来说太简单了：

```
function($array)
{
 asort($array); 
 $diff = $array(sizeof($array) - 1) - $array(0);
 return $diff; 
} 
```

我确信这是正确的，然后我总是有我的怀疑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:27:11.340

只是为了让您了解逻辑，这是一种手动执行此操作的方法：

```
$myarray = array(
  'this' => 2, 
  'that' => 14, 
  'them' => -5, 
  'other' => 200, 
  'nothing' => 42, 
  'somethingelse' => 1, 
  'you' => 10, 
  'me' => 30);

foreach ($myarray as $key => $value) {
  if (!isset ($min) || $value < $min) { $min = $value; }
  if (!isset ($max) || $value > $max) { $max = $value; }
}

$diff = $max - $min;
echo $diff; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:44:24.100

你是对的，你会发现最大的差异是在最大值和最小值之间。但是，您可以通过简单地扫描数组以查找最小值和最大值而不进行排序来更有效地实现这一点（O(N) 而不是 O(N log N)）。

# google-apps-script - google_apps_scripts 1 个电子表格中的 2 个项目，调用另一个项目中的函数

> ID：11145458
> 
> 赞同：0
> 
> 时间：2012-06-21T19:33:10.707
> 
> 标签：google-apps-script

我有一个包含两个项目的电子表格。称它们为 P1 和 P2。项目 P1 中有一个函数，我们将调用 F1。

我在 P2 中有一个函数 F2，它试图调用 F1。我收到一条未定义 F1 的错误消息。

代码（在 P2 中）：

```
function F2()
{
   var rc = F1();
   Browser.msgBox("returned value: "+ rc);
} 
```

代码（在 P1 中）：

```
function F1()
{
   return "this is a test";
} 
```

两个项目都包含在同一个电子表格文件中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T04:52:11.803

功能不可能跨项目可见。您只能使您的函数在单个项目中的多个文件中可见。

为了满足您的要求，请考虑使用库 ( [https://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries) )

# python - python socket.error 操作不允许

> ID：11145463
> 
> 赞同：5
> 
> 时间：2012-06-21T19:33:24.527
> 
> 标签：python, linux

我以root身份运行以下代码并使用python2.6.1，平台是linux

```
>>> import socket
>>> serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
>>> serversocket.bind((socket.gethostname(), 80))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in bind
socket.error: [Errno 1] Operation not permitted 
```

如何解决这个问题呢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T20:41:25.100

有几种可能性。

*   你不是根。
*   以前运行的应用程序版本仍在后台保留端口。用名字杀死它。
*   一个系统守护进程仍然持有该端口，例如 Apache。

请注意，在套接字关闭（服务器已被终止）后，该端口不会立即可用。如果您想确保不再存在的进程不会阻止端口重用，请发出：

```
serversocket.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1) 
```

在绑定之前。

# javascript - 如何使用javascript修改字符串中每个单词的第一个字母，同时保持内部HTML完整？

> ID：11145464
> 
> 赞同：4
> 
> 时间：2012-06-21T19:33:27.590
> 
> 标签：javascript, jquery

以下代码查看具有“title-case”类的任何元素，并将每个单词的第一个字母修改为稍大，如果它是大写字母。这是代码：

```
$(document).ready(function(){
    $('.title-case').each(function(){
        $(this).html( capitalize_first_letter( $(this).html() ) );
    });
});

function capitalize_first_letter( str ) {
    var words = str.split(' ');
    var html = '';
    $.each(words, function() {
        var first_letter = this.substring(0,1);
        html += ( first_letter == first_letter.toUpperCase() ? '<span class="first-letter">'+first_letter+'</span>' : first_letter )+this.substring(1) + ' ';
    });
    return html;
} 
```

你可以在这里看到它运行：http: [//jsfiddle.net/82Ebt/](http://jsfiddle.net/82Ebt/)

它在大多数情况下都有效，但正如您从示例中看到的那样，它会破坏内部 HTML 节点。我实际上不知道如何解决这个问题并且可以使用一些想法。我想也许只是操纵 .text() 而不是 .html() 但这会彻底去除 HTML。

编辑：我想指出我使用 javascript 的原因是因为我希望字符串中的每个单词的第一个字母更大，如果它是大写的。:first-letter 伪类只影响第一个单词。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:47:11.630

这似乎有效，至少在现代浏览器中 -`.html()`与回调和`.replace()`正则表达式一起使用以仅检测首字母大写字母：

```
$('.title-case').html(function(i,el) {
    return el.replace(/\b([A-Z])/g, "<span class=\"first-letter\">$1</span>");
});
​ 
```

[http://jsfiddle.net/mblase75/82Ebt/4/](http://jsfiddle.net/mblase75/82Ebt/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:35:13.157

~~你可以使用 CSS：~~它只影响第一个单词

[http://jsfiddle.net/82Ebt/1/](http://jsfiddle.net/82Ebt/1/)

```
.title-case {
    text-transform: uppercase;
}
.title-case:first-letter {
    font-size: 115%;
} 
```

在 IE7+ 中工作（我没有 IE6），如果任何其他常见浏览器不支持它，我会感到惊讶

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-25T07:07:37.487

试试这个方法：它对我有用。

```
 function capitalise(text) {

    var split = text.split(" "),
    res = [],
    i,
    len,
    component;

    $(split).each(function (index, element) {

        component = (element + "").trim();
        var first = component.substring(0, 1).toUpperCase();
        var remain = component.substring(1).toLowerCase();

        res.push(first);
        res.push(remain);
        res.push(" "); 

    });

    return res.join("");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:54:34.187

试试这样：

```
 $('.title-case').children().andSelf().each(function(){
     $(this).html( capitalize_first_letter( $(this).text() ) );
 });

 function capitalize_first_letter( str ) {    
    return str.replace(/\b[A-Z]/g,'<span class="first-letter">$&</span>');    
 }​ 
```

[**演示**](http://jsfiddle.net/qm7wV/)

# sql-server - Access 2010 或 SQL Server 2008 将查询导出到自定义文本文件

> ID：11145467
> 
> 赞同：0
> 
> 时间：2012-06-21T19:33:32.090
> 
> 标签：sql-server, sql-server-2008, ms-access, vba, export-to-csv

我正在寻找一种将记录输出到自定义文本文件的方法。关键是文本文件有两个部分： 1\. 命令脚本 2\. 数据记录 目的是将文件输出到 Watch 文件夹，标签软件将打开文件处理命令脚本并在标签上打印数据记录。我正在使用 Access 2010 前端和 SQL Server 2008 后端。文本文件在第 1 行和第 2 行使用脚本命令格式化，数据从第 3 行开始。下面是文本文件的示例：

%BTW% /AF="C:\ShippingLabelName.btw" /D="%Trigger File Name%" /PRN="LabelPrinterName" /R=3 /P /DD %END% "PackSlipNo","ShipLotNo"," Qty","CustRev","CustPartNo","ShipDate","CustPO","Describe","PartNo","SupplierNum","ID","MyQty","MyPartsPer","Dock","City" ,"UserDefined1","UserDefined2","UserDefined3","UserDefined4","SerialNum" "99007865",20120097,24402,"NONE","440510404",6/18/2012 0:00:00,"0203109703" ,"PINTLE","33949","9090551",9420,5,1000,"JRZ 2","圣特蕾莎",,,,,"150535"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:58:45.597

假设这不是一次性的，我处理这种需求的方式是使用古老的 open 和 print 命令来创建精确定制的文本输出文件。这是一个小示例代码。此示例是用竖线分隔的，但此方法将允许您输出任何您想要的内容。

```
Open vpath For Output Lock Write As #1
Print #1, vmemo & "|" & Trim(rs!Memo) & "|" & Format(rs!txndate, "mm/dd/yyyy") & "|" & rs!RefNumber & "|" & "Paid" & "|" & Format(rs!AppliedToTxnAmount, "#,##0.00") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:03:42.073

您可以使用 VBA ( [DoCmd.TransferText](http://msdn.microsoft.com/en-us/library/aa220768%28v=office.11%29.aspx) , [FileSystemObject](http://msdn.microsoft.com/en-us/library/aa242706%28v=VS.60%29.aspx) ) 分别输出文件，并在 VBA 中使用 DOS Copy 命令连接两个文件 ( [http://wiki.lessthandot.com/index.php/Combine_Two_Files_(Concatenate](http://wiki.lessthandot.com/index.php/Combine_Two_Files_(Concatenate) ) )

# c++ - 关于两行 C++ 代码的问题

> ID：11145469
> 
> 赞同：3
> 
> 时间：2012-06-21T19:33:44.717
> 
> 标签：c++, stl

对于以下两行 C++ 代码

```
map<string, vector<size_t> >::iterator beg = mapper.begin();
vector<size_t>& indics = (*beg).second; 
```

如何理解他们想要实现什么，具体来说，第二行代码中的 and 是什么意思`&`？`*`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:37:42.030

> `map<string, vector<size_t> >::iterator beg = mapper.begin();`

我们有一个从到的`map`映射。我们得到了映射中的第一个元素，这将是具有较小键值的元素，根据.`string``vector<size_t>``iterator``std::less<string>`

> `vector<size_t>& indics = (*beg).second;`

或者有什么相同的

> `vector<size_t>& indics = beg->second;`

我们得到*键值对*中的第二个值，即我们得到`vector<size_t>`映射中第一个元素的值。我们保留对它的非常量引用，因此我们可以修改它的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:37:03.607

```
map<string, vector<size_t> >::iterator beg = mapper.begin(); 
```

将迭代器声明到字符串到向量的映射的开头。

```
vector<size_t>& indics = (*beg).second; 
```

在取消引用迭代器 (*beg) 之后，声明对向量的引用 (&)，该向量是该对的第二个成员，可能是为了更改某些索引。

迭代器是 STL 容器的重要组成部分。如果您不熟悉它们，我建议您选择一本好书或在谷歌上搜索 C++ STL 教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:42:49.477

`beg`是 a 的迭代器`map`，您可以取消引用它（在语法上，就像指针一样）以获取`pair`带有字段`first`并`second`对应于键 (a `string`) 和值 (a `vector`of `size_t`'s) 的 a。

So`*beg`引用该对，并`(*beg).second`为您提供对向量的引用，然后将其存储在局部变量`indics`中。（当然写这个更干净`beg->second`。）

indics的`&`类型声明中的 表示该变量是一个引用。向量没有被复制，indics 只是成为存储在地图中的向量的本地“名称”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:50:37.793

我建议您先学习 C - 这是一种非常简单的语言，然后在您具备 C 基础知识后开始学习 C++。

您的问题确实与地图类无关。

```
// this is a number.
int foo = 5;

// this is a pointer to foo. You can use this to refer to any thing of type "int"
int* pFoo = &foo;

// now you are getting the number back from the pointer. This creates a copy 
// of foo. If you change bar, foo will not change.
int bar = *pFoo;

// this is a reference to foo. E.g. another way of talking about foo. If you change 
// foo2, foo will also change.
int& foo2 = *pFoo; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T20:45:47.267

我想进一步澄清“(*beg).second;”

我想这是令人困惑的部分，因为 beg 被视为指针，但并未如此声明。此外，可能不清楚“第二个”来自哪里，因为它没有在迭代器类中声明。

我们需要意识到的是，beg 只是一个普通的迭代器类型对象，它的 * 运算符已被覆盖。因此，当您执行“* beg”时，这是在调用方法，而不是尝试使用指针。

现在，迭代器类中的 * 运算符实现返回当前元素，就像指针一样，这就是使用 * 运算符的原因，以使其更加明显，尽管一开始可能会令人困惑。

例如，查看 .h 文件中的迭代器声明：

```
template <class BidirectionalIterator, class T, __DFL_TMPL_PARAM(Reference, T& ),
    __DFL_TYPE_PARAM(Distance, ptrdiff_t)> 
# endif
class reverse_bidirectional_iterator {
    typedef reverse_bidirectional_iterator<BidirectionalIterator, T, Reference__,
                                           Distance> self;
    friend inline bool operator==(const self& x, const self& y);
protected:
    BidirectionalIterator current;
public:
    typedef bidirectional_iterator_tag iterator_category;
    typedef T                          value_type;
    typedef Distance                   difference_type;
# if defined (__STL_MSVC50_COMPATIBILITY)
    typedef Pointer                    pointer;
# else
    typedef T*                         pointer;
# endif
    typedef Reference                  reference;

    reverse_bidirectional_iterator() {}
    explicit reverse_bidirectional_iterator(const BidirectionalIterator& x)
      : current(x) {}
    BidirectionalIterator base() const { return current; }
    Reference operator*() const {
        BidirectionalIterator tmp = current;
        return *--tmp;
    } 
```

请注意末尾 * 运算符的声明。

所以 * 正在返回一个地图元素。地图元素始终是“结构对”类型，它声明了“第二个”元素。同样，只需检查该对的 .h 文件：

```
template <class T1, class T2>
struct pair {
  typedef T1 first_type;
  typedef T2 second_type;
  T1 first;
  T2 second;
... 
```

因此，对 ( *beg ).second 的调用正在执行映射的迭代器的 * 运算符，映射是一系列“对”，而对是具有第一个和第二个元素的结构。在这种情况下，我们得到索引元素“second”，在这种情况下，它是一个向量。

另一方面，下面的 & 是常规引用，因此您获得的是对向量的引用，而不是副本，因此您可以更改地图中的值。

我希望这是有道理的。

-亚历杭德罗

# android - 在 android 模拟器中查找最后一个已知位置

> ID：11145471
> 
> 赞同：0
> 
> 时间：2012-06-21T19:33:47.777
> 
> 标签：android, location, avd, locationlistener

我正在尝试获取用户的最后一个已知位置，我正在使用 getLastKnownLocation 方法，因为我只想读取一次位置，我在模拟器中测试应用程序而不是真正的手机，但位置为空，我的代码

```
locMgr = (LocationManager) getSystemService(LOCATION_SERVICE); 
Location myLoc = locMgr.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
if(myLoc != null)
{}
else 
{
 Toast.makeText(getApplicationContext(), "coudn't get your location", Toast.LENGTH_LONG).show();
} 
```

问题是我不知道何时将位置（从 DDMS）发送到模拟器（我尝试在打开应用程序之前和之后发送它，有时它可以工作）

我可以通过 imlemting LocationListener 获取位置并执行以下操作：

```
mLocMgr = (LocationManager) getSystemService(LOCATION_SERVICE); 
mLocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 3, this); 
```

并覆盖工作正常的 onLocationChanged() 方法，但每次位置更改时它都会告诉我，我只需要读取一次位置。那么如何一次获取用户的当前位置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:39:59.410

为什么不创建一个可以在位置确定后回调的服务或线程呢？这样你就可以经常检查。

# ruby-on-rails - 更改加密密码 (Ruby On Rails)

> ID：11145473
> 
> 赞同：0
> 
> 时间：2012-06-21T19:33:59.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试在我的网站上实现“更改密码”功能。

我的 user.rb 中有以下内容

```
before_save :encrypt_password

  def encrypt_password
    self.encrypted_password = encrypt(password)
  end

  def encrypt
    string
  end

  def has_password?(submitted_password)
    encrypted_password == encrypt(submitted_password)
  end

  def encrypt_password
    self.salt = make_salt unless has_password?(password)
    self.encrypted_password = encrypt(password)
  end

  def encrypt(string)
    secure_hash("#{salt}--#{string}")
  end

  def make_salt
    secure_hash("#{Time.now.utc}--#{password}")
  end

  def secure_hash(string)
    Digest::SHA2.hexdigest(string)
  end

  def self.authenticate(email, submitted_password)
    user = find_by_email(email)
    return nil if user.nil?
    return user if user.has_password?(submitted_password)
 end 
```

创建帐户时，用户必须输入姓名、电子邮件、密码和密码确认，但如果我进入 rails 控制台并查找表，它有一个**encrypted_pa​​ssword**，而不是密码和密码确认。

当我从用户那里得到输入（通过表单传递）时，我做了：

```
 @user.update_attributes(:password => params[:password][:password], :password_confirmation => params[:password][:password_confirmation])
 @user.save 
```

但这不起作用！我想知道我是否需要解密旧密码并加密新密码才能更新它......有什么见解吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:57:49.610

如果我是你，我将使用已经创建的内容并追求：

[授权逻辑](https://github.com/binarylogic/authlogic) 或

[设备](https://github.com/plataformatec/devise)

# c# - 迭代控件以检索其子项

> ID：11145477
> 
> 赞同：1
> 
> 时间：2012-06-21T19:34:23.860
> 
> 标签：c#, wpf, xaml

我在工具箱上添加工具箱项，它嵌入到 xaml 上的扩展器控件中。我如何在这些工具箱项之间进行迭代和遍历？我的假设是工具箱是工具箱的孩子还是我应该通过扩展器？

谢谢。

XAML 在这里：

```
 <StackPanel Grid.Column="0" Margin="0,0,5,0">                    
            <Label Name="lblFind">Find:</Label>
        <StackPanel Name="spFind" Orientation="Horizontal">
        <TextBox Name="txtFind" Width="200" Height="22" ></TextBox>

        <Button Content="Go" Width="60" Height="30"
                IsEnabled="{Binding ElementName=txtFind, Path=Text.Length, Mode=OneWay}" Click="Button_Click" />
        </StackPanel>
        **<Expander x:Name="expander_Controls" Header="Controls" Content="{StaticResource myRESOURCE}" IsExpanded="True" />**

    </StackPanel>
        </ScrollViewer>
    <!-- GridSplitter -->
    <GridSplitter Focusable="False" Width="2" Background="LightGray"
            VerticalAlignment="Stretch" HorizontalAlignment="Right"/>

    <StackPanel Grid.Column="5" Background="AliceBlue">
        <ListView Background="LightGray" Opacity="1" ForceCursor="False" x:Name="myTree" x:FieldModifier="public">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Nodes" Width="80"/>
                 </GridView>
            </ListView.View>
        </ListView>
    </StackPanel> 
```

解决方案：

```
var myList = this.FindResource("MyResource") as Toolbox;

for (int i = 0; i <= (myList .Items.Count - 1); i++)
{
    Object objResult = myList.GetType().GetProperty("Tag").GetValue(myList.Items[i], null);
    MessageBox.Show(objList.ToString());
    } 
```

# node.js - Mongoose 更新文档：只更新第一个

> ID：11145485
> 
> 赞同：1
> 
> 时间：2012-06-21T19:34:43.953
> 
> 标签：node.js, mongodb, mongoose

我有一个奇怪的问题。我使用 mongoose 在 node.js 服务器中执行此查询：`Transaction.update({username : user.username}, {$set: { pending : true }} ...`基本上应该在所有项目中设置 username 等于`user.username`attribute `pending: true`。问题是它只将它设置为它找到的第一个元素。那可能吗？因为我的数据库中总是有 2 个元素，有时一个正在等待处理，有时另一个但不是两个。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:22:52.937

mongoose/mongodb 的工作方式是您必须通过 options 参数指定何时允许多次更新：

```
Transaction.update({username : user.username}, {$set: { pending : true }}, {multi: true}); 
```

# matlab - 在数组中搜索值的组合

> ID：11145486
> 
> 赞同：0
> 
> 时间：2012-06-21T19:34:45.673
> 
> 标签：matlab, match, combinations

这应该是一个相当简单的问题来回答，但我很想听听一些独特的方法来做到这一点，所以就这样吧。我正在使用 Matlab，但可行的 C# 解决方案也适用于我。

我有一个数组（23000 行 x 3 列）。每行是一组 90 个值中的 3 个值的组合。我想从这 90 个值中选择一个子集，比如 10 个，然后找到这 10 个值中的任何 3 个是成员的行，然后返回行号。

现在，我可以生成这 10 个值的所有 3 值组合的列表，然后`ismember`在 Matlab 中使用来查找每个组合的行。但是有不同的或更优雅的方式吗？

或者，我可以`a=sum(ismember(array, 'value'),2)`用来生成`'value'`出现在的逻辑向量`array`，并用于`b=find(a)`查找出现的行索引`'value'`。我可以对 10 的每个值执行此操作。但现在问题变成了，在这 10 个索引列表中，哪个索引出现 3 次或更多次？

任何想法/意见/问题表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:52:59.553

您对逻辑索引的建议几乎是正确的。

使 value 成为具有所有可能值的向量：

```
value = [1 2 3 4 5 6 7 8 9 10]; 
```

现在您可以一次对所有值使用 ismember。

```
logical_array = ismember(array, value);
num_matches = sum(logical_array,2);
rows_with_3_matches = find(num_matches==3);
logical_vector = num_matches==3; 
```

# mysql - 如何为 Mac OS X 安装 MySQL Connector C++（使用终端）？

> ID：11145487
> 
> 赞同：1
> 
> 时间：2012-06-21T19:34:48.007
> 
> 标签：mysql, mysql-connector, mysql-connect

我下载了 MySQL Connector/C++ 源代码树，它有一个“include”和一个“lib”目录。现在我正在关注 README.txt。我下载了作为带有 UI 的程序启动的 CMake。安装的第一步说

```
me@host:/path/to/mysql-connector-cpp> cmake . 
```

我无法理解这一点。这是否意味着 cd 进入源代码树的目录，然后运行 ​​cmake？在什么文件上？

我找到了[这个线程](https://stackoverflow.com/questions/4615442/how-to-install-mysql-connector-c-on-mac-os-x "这个线程")和[这些说明](http://www.davenicholas.me.uk/blog/view_post/29/How-to-c-mysql-mac-osx)，但它们似乎是使用 Xcode UI 安装的唯一方法，我不知道如何在终端中应用它们。我计划用 g++ 编译/运行 C++。

谢谢，

肥中微子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:37:10.020

是的，这确实意味着 - 转到源代码分发的根目录并键入`cmake .`. 至于文件，CMake的默认文件是`CMakeList.txt`，所以你不必指定它。您还可以在其他目录中运行 cmake，并指定源根目录的路径作为第二个参数。例如，构建项目的一种非常常见的方式是：

```
$ cd project-sources
$ mkdir build
$ cd build
$ cmake ..
$ make
$ make install 
```

这样，所有生成的文件都可以通过删除构建目录来简单地删除，例如：`rm -rf build`.

# php - PHP不解析XML文件

> ID：11145492
> 
> 赞同：1
> 
> 时间：2012-06-21T19:35:15.343
> 
> 标签：php, xml, parsing

我原来的问题解决了：[读取 XML 中的页面 URL？或者在一个 XML 文件中使用 PHP](https://stackoverflow.com/questions/11143640/read-page-url-in-xml-or-use-php-within-an-xml-file)，导致一个新的。

我在网页中有一个 flash 元素，其 .swf 调用 settings.xml 文件以获取某些值。

其中一个值必须与 url 相关 - 它需要显示作为 URL 的倒数第二个字符的值 (0-2)（在尾随 / 之前）。

所以我有一个 PHP 函数，`curPageURL()`它可以抓取 URL，并切出正确的字符，这是经过测试的。

XML 中的行内容如下：

```
value="<?php echo substr( curPageURL(), -2, 1); ?>" 
```

.htaccess 包含：

```
AddHandler application/x-httpd-php5s .php
AddHandler x-httpd-php5 .xml 
```

然而，当我在 /settings.xml 中查看源代码时，该行的读数`<?php`保持不变，并且 flash 不显示。如果我用 PHP 代替它确实评估的值，它工作正常。所以由于某种原因它没有解析。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T17:08:14.287

这对我有用，它迫使 PHP 将 XML 解释为 PHP 脚本：

```
<Files ~ "\.(xml)$">
    ForceType application/x-httpd-php
</Files> 
```

# java - 高效的对象搜索/过滤

> ID：11145494
> 
> 赞同：1
> 
> 时间：2012-06-21T19:35:22.750
> 
> 标签：java, list, search, object, filtering

在过滤类中，我已经决定；出于功能目的，首先从表中获取所有数据，然后使用类本身过滤此结果。我有一个代表表中所有数据的对象列表；我想知道过滤这些结果以将它们添加到 jTable 中的最快或更有效的方法是什么。

我正在寻找它来模仿 SQL 中的“Like”指令，以及 Java 编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:39:59.080

DBMS 可以具有使过滤和排序更快的索引。主要的 DBMS 肯定拥有成熟和彻底开发的算法。因此在 SQL 中进行过滤和排序会更加高效。

另一方面，如果您计划缩小搜索结果，那么通过 Java 集合 API 对 DB 和后续迭代进行第一次迭代（或多次迭代）似乎是合理的。但是您应该以某种方式跟踪您的基本结果集（通过 SQL 获取）是否仍然相关。

无论如何，通过 Internet 从 DB 获取 100 000 条记录只是为了选择其中的 50 条听起来并不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:36:18.997

SQL 在过滤方面总是比 JAVA 快。

收集您需要的数据，不多也不少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:41:25.773

为了模仿`LIKE`，您将不得不遍历所有对象，然后在您所在的字段上，您必须使用[String.match](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)之类的东西来查看字段是否符合过滤条件。

正如 Robin 所说，在 SQL 中执行此操作比将所有内容从数据库中提取到 Java 中并在 Java 中进行过滤更有效。

# excel - 将用户定义函数 (UDF) 添加到 Excel 中的内置类别

> ID：11145497
> 
> 赞同：2
> 
> 时间：2012-06-21T19:35:51.720
> 
> 标签：excel, vba

当我将公共函数添加到 Excel 中的标准代码模块时，它会显示在“用户定义”类别中的“插入函数”向导中。

有没有办法：

1.  保持函数公开（以便可以从其他模块调用）但在 Excel 函数向导中隐藏它？
2.  使函数出现在内置类别中（例如，“财务”、“统计”、“逻辑”）？
3.  创建我自己的类别（例如，“无意义”）并让我的功能出现在那里？

我只需要能够使上述案例之一工作，但我很想知道是否每个案例都是可能的。

*注意：如果社区认为这更合适，我很乐意将其分成三个单独的问题。我想可能只有一个答案，三个问题之间只有细微的差别。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-22T05:35:15.867

> *有什么方法可以 [...] 将函数保持为公共状态（以便可以从其他模块调用），但在 Excel 函数向导中隐藏它？*

放在`Option Private Module`模块的顶部。完毕。

[http://msdn.microsoft.com/en-us/library/aa266185(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa266185(v=vs.60).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:42:04.260

`Application.MacroOptions`是您要执行的命令

**此示例将名为TestMacro**的用户定义宏添加到名为**My Custom Category**的自定义类别中。

```
Function TestMacro()
    MsgBox ActiveWorkbook.Name
End Function

Sub AddUDFToCustomCategory()
    Application.MacroOptions Macro:="TestMacro", Category:="My Custom Category"
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:58:05.407

我在一个[关于 VBA 日期函数的问题](https://stackoverflow.com/questions/4338025/isdate-function-returns-unexpected-results/11143379#11143379)的脚注中回答了这个问题：这是我在那里写的关于使用 VB '属性' 语句创建函数描述*和函数向导类别 ID*的直接复制和粘贴：

> **给仍在使用 Excel 2003 的人的提示：**
> 
> 如果您（或您的用户）要从工作表中调用 IsDateEx()，请将这两行放在函数标题下方，在导出的 .bas 文件中使用文本编辑器并重新导入文件，因为 VB 属性很有用，但 Excel 的 VBA IDE 中的代码编辑器无法访问它们：
> 
> `Attribute IsDateEx.VB_Description = "Returns TRUE if TestDate is a date, and is within ± 20 years of the system date.\r\nChange the defaulte default ± 20 years boundaries by setting values for LimitPastDays and LimitFutureDays\r\nIf you are checking an array of dates, ALL the values will be tested: set FirstColumnOnly TRUE to check the leftmost column only."`
> 
> 这就是一行：注意浏览器插入的换行符！...还有这一行，它将 isDateEX 与 ISNUMBER()、ISERR()、ISTEXT() 等一起放入“信息”类别的函数向导中：
> 
> `Attribute IsDateEx.VB_ProcData.VB_Invoke_Func = "w\n9"`
> 
> 如果您希望在日期和时间函数下看到它，请使用“w\n2”：在您自己的代码和所有那些由人们开发的第三方插件的“已使用定义”函数的泥沼中击败地狱失去它他们在帮助临时用户方面做得不够。
> 
> 我不知道这在 Office 2010 中是否仍然有效。

......这就是我能建议的全部。VBA 开发人员无法真正访问函数向导类别和相关的函数（和参数！）描述符。其中一些可供老式 VB 编码人员使用，他们可以在 IDE 中访问 VB.Attribute 语句；您可以通过一些文本文件操作将其滑入您的代码中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-20T21:56:14.353

公共函数仅对 Excel 的公式栏可见，它们位于“常规”*.bas 模块中。属于类的公共函数对编辑栏不可见。如果将这一点与我们可以模拟静态类的事实相结合，则可以有效地隐藏函数。

如果你创建一个类模块然后导出它，你会`Attribute VB_PredeclaredId = False`在标题中找到。将此设置为 true 会创建该类的默认全局实例，该实例可以像更现代语言中的静态类一样使用。

例如，创建一个名为的新类模块`Math`并将此函数添加到其中。

```
Public Function Add(a As Integer, b As Integer) As Long
    Add = a + b
End Function 
```

导出并删除文件，然后在记事本中打开它。将预先声明的 ID 更改为 true。

```
VERSION 1.0 CLASS
BEGIN
  MultiUse = -1  'True
END
Attribute VB_Name = "Math"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = False
Attribute VB_PredeclaredId = True
Attribute VB_Exposed = False 
```

保存并将文件导入回您的项目。

现在，在常规模块中，您可以使用限定调用来调用该函数。就像任何其他类方法一样。只是现在，我们有一个可以使用的类的默认实例。没有使用`New`or `Set`，它只是工作。

```
Sub Test()
    Debug.Print Math.Add(1,2)
End Test 
```

# python - 读取列中的数据 Python 2.7.3

> ID：11145499
> 
> 赞同：5
> 
> 时间：2012-06-21T19:36:03.500
> 
> 标签：python, numpy, matplotlib, python-2.7, scipy

我有一个需要阅读的数据文件。我知道要在 Python 中读取文件，您必须执行以下操作：

```
file = open(fileLocaion, 'r+') 
```

但我不知道该找谁做特读。我拥有的数据在列中。因此`x`，一列`y`中的值和另一列中的值与顶部的标题。数据（我的文本文件`a.txt`）看起来像

```
 Charge (1x), Ch A, Run #1
 Time ( s ) Charge (1x) ( µC )
 0.0000 0.021
 0.1000 0.021
 0.2000 0.021
 0.3000 0.021
 0.4000 0.021
 0.5000 0.021
 0.6000 0.021 
```

所以第一个时间值为`0.0000`，第一个电荷值为`0.021`。我希望能够将其带入 Python 并用于`matplotlib`绘制它。但我无法弄清楚如何读取这些数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T19:50:03.657

如果您要使用 matplotlib 绘制它，可能最简单的方法是使用`numpy.loadtxt` [[docs]](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)，因为无论如何您都会安装 numpy：

```
>>> import numpy
>>> d = numpy.loadtxt("mdat.txt", skiprows=2)
>>> d
array([[ 0\.   ,  0.021],
       [ 0.1  ,  0.021],
       [ 0.2  ,  0.021],
       [ 0.3  ,  0.021],
       [ 0.4  ,  0.021],
       [ 0.5  ,  0.021],
       [ 0.6  ,  0.021]]) 
```

请注意，我必须在`skiprows=2`此处添加以跳过标题。然后是时间`d[:,0]`和费用`d[:,1]`，或者您可以通过以下方式明确获得它们`loadtxt`：

```
>>> times, charges = numpy.loadtxt("mdat.txt", skiprows=2, unpack=True)
>>> times
array([ 0\. ,  0.1,  0.2,  0.3,  0.4,  0.5,  0.6])
>>> charges
array([ 0.021,  0.021,  0.021,  0.021,  0.021,  0.021,  0.021]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T19:43:18.967

```
with open('data2.txt') as f:
    f=[x.strip() for x in f if x.strip()]
    data=[tuple(map(float,x.split())) for x in f[2:]]
    charges=[x[1] for x in data]
    times=[x[0] for x in data]
    print('times',times)
    print('charges',charges) 
```

现在费用和时间包含：

```
times [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6]
charges [0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021] 
```

# python - __getattr__ 在 python 中递归

> ID：11145501
> 
> 赞同：7
> 
> 时间：2012-06-21T19:36:17.403
> 
> 标签：python, python-2.7

我以以下方式声明了一个类

```
class A:
    def __init__(self, list_1, list_2):
        self.list1 = list_1
        self.list2 = list_2

    def __getattr__(self, item):
        if item in self.list1: return "It is in list 1"
        elif item in self.list2: return "It is in list 2"
        else: return "It is in neither list 1 nor list 2" 
```

在这里，当我添加`__setattr__` `self.list`1 时，它是递归的，因为`__getattr__`在每次调用之后都会被调用，`self.list1`并且这种递归是不可阻挡的。你能帮我解决一下吗。我需要像这样实现。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T19:49:41.530

首先，这是一个完全奇怪的用法`__getattr__`，但我假设你知道这一点。

基本上，问题是`__setattr__`每次你做类似的事情时都会调用它`self.foo = bar`，所以如果你在里面使用它，`__setattr__`你最终会得到你得到的递归。您需要做的是将您尝试设置的值直接插入`__dict__` `self.__dict__['foo'] = bar`.

如果您正在使用新样式类（即`A`是 的后代`object`），那么您也可以这样做`super(A, self).__setattr__(item, value)`，甚至只是`object.__setattr__(self, item, value)`

# performance - 为什么添加多态类型签名会降低性能？

> ID：11145503
> 
> 赞同：15
> 
> 时间：2012-06-21T19:36:25.823
> 
> 标签：performance, haskell

这是一个计算斐波那契数的简单函数：

```
fib :: [Int]
fib = 1 : 1 : zipWith (+) fib (tail fib) 
```

在 ghci 中，我可以快速计算系列。事实上，一些实验表明计算运行在近似线性的时间内。

```
ghci> last $ take 100000 fib
354224848179261915075         -- takes under a second 
```

如果我将类型签名更改为多态：

```
fib :: Num a => [a]
fib = 1 : 1 : zipWith (+) fib (tail fib) 
```

然后算法变得更慢。事实上，它现在似乎以指数时间运行！

切换到多态类型签名是否意味着列表在每个阶段都被完全重新计算？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T19:54:23.283

是的，多态类型签名意味着它在每个阶段都被重新计算。ghc-7.4.2 产生的核心`-O2`：

```
lvl_rcZ :: GHC.Integer.Type.Integer
[GblId, Str=DmdType]
lvl_rcZ = __integer 1

Rec {
PolyFib.fib [Occ=LoopBreaker]
  :: forall a_a9W. GHC.Num.Num a_a9W => [a_a9W]
[GblId, Arity=1, Str=DmdType L]
PolyFib.fib =
  \ (@ a_aal) ($dNum_aam :: GHC.Num.Num a_aal) ->
    GHC.Types.:
      @ a_aal
      (GHC.Num.fromInteger @ a_aal $dNum_aam lvl_rcZ)
      (GHC.Types.:
         @ a_aal
         (GHC.Num.fromInteger @ a_aal $dNum_aam lvl_rcZ)
         (GHC.List.zipWith
            @ a_aal
            @ a_aal
            @ a_aal
            (GHC.Num.+ @ a_aal $dNum_aam)
            (PolyFib.fib @ a_aal $dNum_aam)
            (case PolyFib.fib @ a_aal $dNum_aam of _ {
               [] -> GHC.List.tail1 @ a_aal;
               : _ xs_abD -> xs_abD
             })))
end Rec } 
```

原因是缓存属于 的每种类型的斐波那契数列表是不可行的`Num`，并且`fib`明确地是一个多态值，因此它根本不会被缓存。

如果您想至少为每种类型的计算缓存它，请使用本地列表

```
pfibs :: Num a => [a]
pfibs = res
  where
    res = 1 : 1 : zipWith (+) res (tail res) 
```

为每个计算进行缓存（`pfibs !! 500`例如很快），因为现在列表在每个计算中都是单态的。它仍然会为每个查询重新计算（除非您将它绑定到一个单态名称），但不会为每个单个列表元素重新计算。

```
*PolyFib> pfibs !! 999999 :: Int
-4249520595888827205
(0.31 secs, 137462088 bytes) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-21T20:02:48.987

这是因为字典翻译。

```
fib :: [Int] 
```

是顶级常数。

但是这个：

```
fib :: Num a => [a]
fib = 1 : 1 : zipWith (+) fib (tail fib) 
```

只是一个顶级函数，它将`Num`在运行时应用于字典。像这样：

```
fib d = 1 : 1 : zipWith (d.+) (fib d) (tail (fib d)) 
```

因此，如果您在没有任何优化的情况下编译它，这样就不会发生专门化，您最终会得到指数时间 fib，因为列表是在每次函数调用时从头开始重建的——它不再是一个惰性数据结构。

# wpf - 在智能手机上运行 facebook 应用程序

> ID：11145505
> 
> 赞同：0
> 
> 时间：2012-06-21T19:36:32.723
> 
> 标签：wpf, facebook, smartphone

我有一个一般性问题：我想使用 wpf 开发一个 facebook 应用程序（目的是在 facebook 上运行一个类似游戏的应用程序）。wpf 应用程序可以在智能手机上运行吗？我想知道当用户通过智能手机登录 Facebook 时，如何让这个应用程序在智能手机上运行。我不想开发与 facebook 连接的 android / iphone / ... 应用程序。我已经查过了，但在那个领域找不到任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:54:09.430

不，WPF 仅适用于基于 Windows 的桌面应用程序，支持智能手机的 .NET 平台是 Windows Phone 7 (WP7)，但仅适用于 Windows 智能手机。

Objective C 有相当多的动画选项，通常用于这种类型的事情。

查看[这篇](http://www.computerworld.com/s/article/9178684/Developing_for_the_iPhone_and_Android_The_pros_and_cons)概述智能手机开发选项的文章。

# java - 如何使用自定义 JButton 在 Java (Swing) 中创建 JOptionPane.showOptionDialog 框？

> ID：11145507
> 
> 赞同：2
> 
> 时间：2012-06-21T19:36:41.027
> 
> 标签：java, swing, jbutton, jdialog, joptionpane

在阅读了所有 Dialog 教程一段时间后，似乎没有明显的方法可以做到这一点。最接近的似乎是`JOptionPane.showOptionDialog`，但我受`optionType`这里参数的限制。

编辑：我发现了问题，但有一个新问题。似乎`options`指定的参数`showOptionDialog`需要是相当简单的对象（字符串或只是“对象”，而不是`JButton`等等）。我试图在这里放置一组自定义工厂创建的 JButton，因为它们有一个我想要使用的特殊翻转图标。但是，发生的情况是单击这些按钮中的任何一个都不会导致对话框关闭（因此，执行会继续阻塞对话框）。所以我在标题中更新了我的问题。

更简洁地说 - 问题是，我如何覆盖`JOptionPane.showOptionDialog(args)`以获得我正在寻找的按钮自定义？还是我什至需要这样做？

请和谢谢！-B。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T19:43:11.960

这个 Java 文档应该可以帮助您创建自己的对话框，或自定义现有的对话框：[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，如果这不是您想要的，那么也许创建一个`JDialog`，添加必要的组件和按钮并使其可见就可以了：）

# iphone - iphone sqlite 未定义符号错误

> ID：11145510
> 
> 赞同：1
> 
> 时间：2012-06-21T19:36:50.267
> 
> 标签：iphone, objective-c, sqlite, xcode4.2, i386

我正在尝试为 iphone 学习 sqlite，并正在使用此链接上的教程：

[http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)

我创建了一个单视图应用程序，并将教程中的代码复制到 viewcontroller.h 和 .m 文件中。在教程中的每个部分之后，我都编译了代码以确保它仍然可以工作。在“创建数据库和表”部分复制后，我首先遇到错误。我收到以下错误。

```
Undefined symbols for architecture i386:
  "_sqlite3_open", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
  "_sqlite3_exec", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
  "_sqlite3_close", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我搜索了无数的论坛并尝试了很多东西。我已经导入了 libsqlite3.dylib 和 libsqlite3.0.dylib。我正在使用 xcode 4.2。它似乎与 sqlite 框架有关，但我不知道如何修复它。

您可以提供的任何帮助将不胜感激。

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:16:00.997

您可能需要为 sqlite 添加库/框架。使用此参考并添加 sqlite 的条目。也许您没有将它们添加到当前目标？：

[添加框架](http://codingcluster.blogspot.com/2011/10/add-existing-frameworks-in-xcode-43.html)

# mysql - 在 MySQL 中使用 GROUP BY 两次

> ID：11145511
> 
> 赞同：14
> 
> 时间：2012-06-21T19:36:53.043
> 
> 标签：mysql, sql

我的桌子是这样的。

```
Location    Head    Id  IntTime
1           AMD     1   1
2           INTC    3   3
3           AMD     2   2
4           INTC    4   4
5           AMD2    1   0
6           ARMH    5   1
7           ARMH    5   0
8           ARMH    6   1
9           AAPL    7   0
10          AAPL    7   1 
```

位置是主键。我需要 GROUP BY Head 和 Id，当我使用 GROUP BY 时，我需要保留 IntTime 最小的行。

在第一个 GROUP BY Id 之后，我应该得到（我保持最小的 IntTime）

```
Location    Head    Id  IntTime
2           INTC    3   3
3           AMD     2   2
4           INTC    4   4
5           AMD2    1   0
7           ARMH    5   0
8           ARMH    6   1
9           AAPL    7   0 
```

在第二个 GROUP BY Head 之后，我应该得到（我保持最小的 IntTime）

```
Location    Head    Id  IntTime
2           INTC    3   3
3           AMD     2   2
5           AMD2    1   0
7           ARMH    5   0
9           AAPL    7   0 
```

当我运行以下命令时，我保留了最小的 IntTime 但行没有保留。

```
SELECT Location, Head, Id, MIN(IntTime) FROM test 
GROUP BY Id 
```

此外，要运行第二个 GROUP BY，我保存此表并再次执行

```
SELECT Location, Head, Id, MIN(IntTime) FROM test2 
GROUP BY Head 
```

有没有办法结合这两个命令？

[编辑：澄清] 结果不应包含两个具有相同值的 Head 或两个具有相同值的 Id。删除这些重复项时，应保留 IntTime 最小的行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T20:04:39.657

此查询返回您正在寻找的确切最终结果（[示例](http://sqlfiddle.com/#!2/77a53/1)）：

```
SELECT `final`.*
FROM `tableName` AS `final`
JOIN (
    SELECT `thead`.`Id`, `Head`, MIN(`intTime`) AS `min_intTime`
    FROM `tableName` AS `thead`
    JOIN (
        SELECT `Id`, MIN(intTime) as min_intTime
        FROM `tableName` AS `tid`
        GROUP BY `Id`
    ) `tid`
    ON `tid`.`Id` = `thead`.`Id`
    AND `tid`.`min_intTime` = `thead`.`intTime`
    GROUP BY `Head`
) `thead`
ON `thead`.`Head` = `final`.`Head`
AND `thead`.`min_intTime` = `final`.`intTime`
AND `thead`.`Id` = `final`.`Id` 
```

## 这个怎么运作

最里面的查询按 , 分组`Id`，并返回`Id`和 对应的`MIN(intTime)`。然后，中间查询按 , 分组`Head`，并返回`Head`对应的`Id`and `MIN(intTime)`。最终查询在缩小范围后返回所有行。您可以将最终（最外层）查询视为仅包含您想要的行的表的查询，因此您可以进行额外的比较（例如`WHERE final.intTime > 3`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:32:59.233

```
SELECT a.*
FROM test a
NATURAL JOIN
(
    SELECT c.Head, c.Id, MIN(c.IntTime) AS IntTime
    FROM test c
    NATURAL JOIN
    (
        SELECT Id, MIN(IntTime) AS IntTime
        FROM test
        GROUP BY Id
    ) d
    GROUP BY c.Head
) b
ORDER BY a.Location 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:43:25.363

如果我理解正确，您需要按 head 和 id 具有最小 int/time 值的行。我没有看到第二个“按头分组”给你带来了什么。

以下是我认为你想要的：

```
select t.*
from t join
     (select head, id, min(intTime) as min_intTime
      from t
      group by head, id
     ) tsum
     on tsum.head = t.head and
        tsum.id = t.id and
        tsum.min_intTime = t.intTime 
```

您可能只需要所有“head”值的最小 intTime 。如果是这样，查询看起来像：

```
select t.*
from t join
     (select head, min(intTime) as min_intTime
      from t
      group by head
     ) tsum
     on tsum.head = t.head and
        tsum.min_intTime = t.intTime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:41:17.377

例如，我不确定您的样本结果是如何到达 ARMH 的 Location = 7 的。试试这个...

```
SELECT MIN(Location), Head, Id, MIN(IntTime)
FROM test
GROUP BY Head, Id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T20:17:34.747

使用 UNION 语法？

```
(SELECT Location, Head, Id, MIN(IntTime) FROM test 
GROUP BY Id)
UNION
(SELECT Location, Head, Id, MIN(IntTime) FROM test2 
GROUP BY Head) 
```

# android - Android：ExpandableListView 中的复选框即使使用 focusable=false 也不会触发 onChildClick

> ID：11145514
> 
> 赞同：2
> 
> 时间：2012-06-21T19:36:58.933
> 
> 标签：android, android-layout, android-listview, expandablelistview, android-linearlayout

**目标：**我正在尝试创建一个每行有 2 个复选框的 UI，每行分成几个部分。我在下面包含了 UI 的屏幕截图。

**当前方法：**我正在使用 ExpandableListView 并使用 onChildClick 处理数据。

**问题：**当您单击复选框时，它不会触发 onChildClick 或其他任何东西。单击复选框外的任意位置将触发此事件。

**研究：**有很多线程建议设置 android:focusable="false"，但这对我来说没有任何改变。我将 UI 中的每个元素的可聚焦设置为 false。

**复制：我在运行**[本文中的代码](http://mylifewithandroid.blogspot.com/2010/12/expandable-list-and-checkboxes.html)而不进行修改时遇到了完全相同的问题，其中包括 android:focusable="false"。我的很多代码都基于该示例，如果我可以使用该代码库让它工作，我相信我可以让它在我的工作。

![当前用户界面](../Images/755b4378021c9daed94a211861045708.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T06:23:50.073

我敢打赌，您的 XML 中缺少一行。

您需要在 xml 中包含这两行（第二行是最重要的）：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

这将允许每个复选框以及行本身都可以单独单击。

然后你`onCheckChangedListener`在你的适配器中设置监听器`getView()`来处理复选框（它可以访问位置、视图和父信息）。然后，您`onChildClick`可以处理 rwo 点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-03T08:28:37.223

据我所知，复选框确实消耗了事件，因此 OnChildClickListener 不会触发。在标签列表项中，我将这些行添加到复选框中：

```
<CheckBox
    ...
    android:focusable="false"
    android:clickable="false"
    android:focusableInTouchMode="false"/> 
```

然后我可以简单地使用我的 OnChildClickListener，就好像我不会使用复选框一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:43:01.400

我认为这是因为复选框会消耗事件并且不会将其转发到列表项。

如果您想点击框，您可以将 OnClickListener 添加到列表适配器的 getView() 中的框。

我理解你的意思，这个盒子至少被检查了？如果您不需要自定义行为，您只需在“提交”列表时读取该框是否被选中（或下一步检查框）。

阅读评论后，这是您的代码示例，并添加了一些内容：

```
@Override
public View getView(final int pos, final View convView, ViewGroup parent) {

    //initialize convView, define other local variables, etc. 

    CheckBox cb = (CheckBox) convView.findViewById(R.id.mycheckbox);
    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() { 

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) { 
            Log.d("ElistCBox2", "listitem position: " + pos); 
        } 
    });

    return convView;
} 
```

请注意，您必须对`final`匿名类中使用的变量使用修饰符，否则会出现编译器错误。

# c# - 设置 Html.DropDownList() 的默认值

> ID：11145517
> 
> 赞同：5
> 
> 时间：2012-06-21T19:37:13.270
> 
> 标签：c#, asp.net-mvc, razor, drop-down-menu, html-helper

当它回发时，我收到以下错误：

> 具有键“ClosingDateDay”的 ViewData 项的类型为“System.Int32”，但必须为“IEnumerable”类型。有任何想法吗？

这是我的控制器：

```
CompetitionEditViewModel viewModel = new CompetitionEditViewModel
{
    ClosingDate = competition.CloseDate,
    Description = competition.Description,
    DescriptionHeading = competition.DescriptionHeading,
    ImageAssetId = competition.ImageAssetId,
    IsActive = competition.IsActive,
    MainHeading = competition.MainHeading,
    TermsAndConditions = competition.TermsAndConditions,
    UrlSlug = competition.UrlSlug
};

viewModel.ClosingDateMonthOptions = new List<SelectListItem>();
for (int i = 1; i <= 12; i++)
{
    string monthName = new DateTime(2000, i, 1).ToString("MMMM");
    ((List<SelectListItem>)viewModel.ClosingDateMonthOptions).Add(new SelectListItem { Text = monthName, Value = i.ToString() });
}

viewModel.ClosingDateDayOptions = new List<SelectListItem>();
for (int i = 1; i <= 31; i++)
{
    ((List<SelectListItem>)viewModel.ClosingDateDayOptions).Add(new SelectListItem { Text = i.ToString().PadLeft(2, '0'), Value = i.ToString() });
}

viewModel.ClosingDateYearOptions = new List<SelectListItem>();
for (int i = DateTime.Now.Year; i <= DateTime.Now.Year + 3; i++)
{
    ((List<SelectListItem>)viewModel.ClosingDateYearOptions).Add(new SelectListItem { Text = i.ToString(), Value = i.ToString() });
} 
```

这是我的观点：

```
@Html.Uber().LabelFor(x => x.ClosingDateDay, new { @class = "access" })
@Html.DropDownListFor(x => x.ClosingDateDay, Model.ClosingDateDayOptions, Model.ClosingDateDay)

@Html.Uber().LabelFor(x => x.ClosingDateMonth, new { @class = "access" })
@Html.DropDownListFor(x => x.ClosingDateMonth, Model.ClosingDateMonthOptions, Model.ClosingDateMonth)

@Html.Uber().LabelFor(x => x.ClosingDateYear, new { @class = "access" })
@Html.DropDownListFor(x => x.ClosingDateYear, Model.ClosingDateYearOptions, Model.ClosingDateYear) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T19:43:42.270

在构造 SelectListItem 类时，将`Selected`要最初选择的项目的属性设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:01:41.880

我在我的一个项目中所做的并且有点用处的是，开发了另外两个
`DropDownListFor`接受的重载`selectedValue`。

```
namespace MyMvcApplication.Helpers
{
    public static class ExtensionMethods
    {
        public static MvcHtmlString DropDownListFor<TModel, TProperty>
                             (this HtmlHelper<TModel> helper,
                              Expression<Func<TModel, TProperty>> expression,
                              string selectedValue,
                              IEnumerable<SelectListItem> selectList,
                              string optionLabel,
                              object htmlAttributes)
        {
            if (string.IsNullOrEmpty(selectedValue))
                selectedValue = string.Empty;
            if (selectList != null)
            {
                foreach (SelectListItem sli in selectList)
                {
                    if (sli.Value.ToLower().Trim() == selectedValue.ToLower().Trim())
                    {
                        sli.Selected = true;
                        break;
                    }
                }
            }
            else 
            { 
                selectList = new List<SelectListItem>() 
                                  { new SelectListItem() 
                                          { Text = "", Value = "", Selected = true }
                                  };
            }
            return helper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes);
        }

        public static MvcHtmlString DropDownListFor<TModel, TProperty>
                             (this HtmlHelper<TModel> helper,
                              Expression<Func<TModel, TProperty>> expression,
                              string selectedValue,
                              IEnumerable<SelectListItem> selectList,
                              string optionLabel,
                              IDictionary<string, object> htmlAttributes)
        {
            if (string.IsNullOrEmpty(selectedValue))
                selectedValue = string.Empty;
            if (selectList != null)
            {
                foreach (SelectListItem sli in selectList)
                {
                    if (sli.Value.ToLower().Trim() == selectedValue.ToLower().Trim())
                    {
                        sli.Selected = true;
                        break;
                    }
                }
            }
            else 
            { 
                selectList = new List<SelectListItem>() 
                                  { new SelectListItem() 
                                          { Text = "", Value = "", Selected = true } 
                                  };
            }
            return helper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes);
        }

    }
} 
```

所以在视图中，我可以将一个字符串作为 selectedValue 传递给`DropDownListFor`，例如：

```
@using MyMvcApplication.Helpers

@Html.DropDownListFor(model => model.MyData,
                               "Default Value for DropDownList", //Or Model.MySelectedValue
                               Model.MySelectList, null, mull) 
```

# algorithm - 二叉堆中的最小元素？

> ID：11145522
> 
> 赞同：-2
> 
> 时间：2012-06-21T19:37:48.943
> 
> 标签：algorithm, computer-science

为什么在二进制堆中找到最小的事件需要 O(log V) 时间？（其中 V 是元素的数量）

快速排序分治算法需要 O(V) 时间来找到最小的元素。由于在二进制堆中找到最小元素几乎与快速排序相同（在每一步都将问题的大小除以 2，并且问题的数量保持不变）为什么它们的时间不同？

**为什么使用快速排序查找最小元素和查找二进制堆中的最小元素需要不同的时间？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:58:28.860

任何最小堆（不一定是二进制）都会`O(1)`及时为您提供最小的元素。这是因为最小的元素是堆的根（满足堆属性）。

我认为这里的问题是你混淆了你的数据结构。在**未排序的列表中**，任何算法都至少需要`O(N)`时间，其中 N 是元素的数量。

如果您的数据已经存储在**堆**结构中，那么可以及时提取最小值`O(1)`。然而值得注意的是，首先从未排序的列表中构建堆需要`O(N)`时间。

如果你有一个**排序列表**，那么你可以使用二进制搜索来找到最小的`O(log N)`时间。但同样，排序至少需要`O(N)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:59:30.940

假设您试图在最大堆中找到最小的元素，如您所说，它将花费 O(V) 时间，而不是 O(log V) 时间。问题不是在每一步都分成两半。因为，一旦确定它小于根，最小元素可能在 2 个子树中的任何一个中。因此，您需要遍历两个子树才能找到 min 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:32:58.733

假设您正在谈论与快速排序非常相似的基于枢轴的选择算法，那么在两种情况下找到最小值是根本不同的。我的意思是，基于快速排序的选择算法会选择一个枢轴并对元素进行分区，然后您就知道您要查找的数字在剩余的哪些段中。二进制堆没有类似的属性。堆的特殊属性是每个节点都小于它的父节点（假设我们谈论的是最大堆）。就像其他答案之一所说的那样，这限制了 O(log(V)) 的可行候选者的数量，因为这是您可以在二进制堆中拥有多少叶子。但是，（据我所知）你必须要么维护一个叶子列表，或者您的堆必须表示为一个数组，以便您从中获得时间复杂性的好处。如果您的堆存储为一组链接节点，其中只有一个指向第一个元素的指针，那么在最坏的情况下，您必须搜索其所有子节点以找到最小值，因为这是您甚至可以看到的唯一方法树叶。我知道这个问题已经有很多答案，而且大部分都是正确的，但我希望这能澄清一些事情。

此外，为了清楚起见，实际的快速排序排序算法（如果是随机的）在摊销 O(nlogn) 时间内运行。在排序数组中找到最小元素是 O(1)。

# javascript - Jquery，javascript滑块

> ID：11145523
> 
> 赞同：0
> 
> 时间：2012-06-21T19:37:55.823
> 
> 标签：javascript, jquery, css, slider

我将尽我所能解释这一点。我想做的是，我想使用滑块（我发布的图片）作为导航。就像当您将滑块的旋钮移动到下一个圆圈时，会出现一个不同的页面。我到处都看过。尝试了一切，我似乎无法达到这个效果。有人可以帮帮我吗？

[http://static.tumblr.com/1f1tzta/5Fgm5zft9/slider.png](http://static.tumblr.com/1f1tzta/5Fgm5zft9/slider.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:40:39.920

你见过这个吗？[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

这是一个 jQuery UI 滑块，您可以完全设置样式和编写脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:48:39.727

*   [GitHub 上的 jQuery 滑块插件](http://egorkhmelev.github.com/jslider/)
*   [85 个很棒的 jQuery 滑块插件](http://www.tripwiremagazine.com/2012/03/jquery-slider.html)
*   [13 个超级有用的 jQuery 内容滑块脚本和教程](http://webdesignledger.com/tutorials/13-super-useful-jquery-content-slider-scripts-and-tutorials)
*   [37个新鲜的jQuery图像、内容滑块和幻灯片](http://www.smashingapps.com/2012/05/22/37-fresh-jquery-image-content-sliders-and-slideshows.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:03:24.680

我知道有两个滑块可以满足您的要求。

1.  [Menucool jQuery 滑块](http://www.menucool.com/jquery-slider)：

    此 jQuery Slider 有两个事件处理程序，您可以使用它们在幻灯片之前或之后切换到相应的页面：

    ```
    function beforeThumbChange(args) {
        //args[0]: next slide index
        //you can switch to your page here: $("#pageToDisplay").load("/mypage"+args[0]+".html");
    }
    function afterThumbChange(args) {
        //args[0]: currentSlide index
        //you can also switch to your page here: $("#pageToDisplay").load("/mypage"+args[0]+".html");
    } 
    ```

2.

[http://www.menucool.com/javascript-image-slider](http://www.menucool.com/javascript-image-slider)

```
 function beforeSlideChange(args) {
        //args: [0]-next slide index, [1]-next image, [2]-next caption, [3]-next effect
        //$("#pageToDisplay").load("/mypage"+args[0]+".html");
    }

    /*
    function afterSlideChange(args) {
        //args: [0]-currentSlide index, [1]-currentImage
        //$("#pageToDisplay").load("/mypage"+args[0]+".html");
    } 
```

您只需要在页面中添加一个处理函数（在页面底部，就在 之前`</body>`），并在那里实现页面显示代码。滑块将通过每张幻灯片触发处理程序。

# wpf - WPF 无法让命令和依赖属性一起工作，还是我只是使用错误？

> ID：11145526
> 
> 赞同：4
> 
> 时间：2012-06-21T19:38:05.780
> 
> 标签：wpf, xaml, dependency-properties

我创建了一个 wpf 应用程序，在其中添加了一个用户控件和一个自定义控件。自定义控件在用户控件中使用（计划在许多其他类型的用户控件中使用）。

举个简单的例子，自定义控件有一个`Brush`名为 backgroundcolour 类型的依赖属性，然后在自定义控件的默认模板中将其设置为边框的背景。我的想法是，我可以使用`Command`and`CommandParameter`属性从用户控件中设置此值。正如我试图在下面做的那样

用户控件 xaml（TestControl 是自定义控件）

```
<Grid>
    <Grid.Resources>
        <MyNamespace:EditColourCommand x:Key="EditColour"/>
    </Grid.Resources>

    <Grid.ContextMenu>
        <ContextMenu>
            <MenuItem Name="Test" 
                      Header="Test" 
                      Command="{StaticResource EditColour}" 
                      CommandParameter="{Binding ElementName=testControl1, Path=BackgroundColour, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </ContextMenu>
    </Grid.ContextMenu>

    <MyNamespace:TestControl HorizontalAlignment="Left" 
                             Margin="213,90,0,0" 
                             x:Name="testControl1" 
                             VerticalAlignment="Top" 
                             Height="77" 
                             Width="230"/>

</Grid> 
```

我的自定义控制代码背后：

```
public class TestControl : Control
{
    static TestControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(TestControl), 
            new FrameworkPropertyMetadata(typeof(TestControl)));
    }

    public static DependencyProperty BackgroundColourProperty = 
        DependencyProperty.Register("BackgroundColour", 
                                    typeof(Brush), 
                                    typeof(TestControl), 
                                    new PropertyMetadata(Brushes.Blue, 
                                        BackgroundColourPropertyChangedHandler));

    public Brush BackgroundColour
    {
        get
        {
            return (Brush)GetValue(BackgroundColourProperty);
        }
        set
        {
            SetValue(BackgroundColourProperty, value);
        }
    }

    public static void BackgroundColourPropertyChangedHandler(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
    } 
} 
```

最后，命令

```
public class EditColourCommand : ICommand
{
    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        parameter = Brushes.Black;
    }
} 
```

该命令被触发并且在这种情况下它具有默认值蓝色作为参数，但它从不将值设置为黑色。有人可以把我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:07:57.847

好的经过几天的搜索，我得到了一些我很满意的东西。我想我会在这里添加它，以防其他人有类似的要求。我面临的主要问题是完全不知道“路由命令”（如果这是一个词），我知道命令和路由事件，但不知道路由命令类型。我也放弃了在用户控件中使用自定义控件的想法，尽管我确信如果我也需要我可以重新添加它。无论如何继承我现在使用的代码。

```
public class Block : Control
{
    static Block()

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        CommandBindings.Add(new CommandBinding(EditColorCommand, EditColor, CanEditColor));  
    }

    public static readonly DependencyProperty TitleBackgroundColorProperty = DependencyProperty.Register("TitleBackgroundColor", typeof(SolidColorBrush), typeof(Block), new FrameworkPropertyMetadata(Brushes.Gray, null));
    public SolidColorBrush TitleBackgroundColor
    {
        get { return (SolidColorBrush)base.GetValue(TitleBackgroundColorProperty); }
        set { base.SetValue(TitleBackgroundColorProperty, value); }
    }

    public static readonly DependencyProperty TitleLeftTextColorProperty = DependencyProperty.Register("TitleLeftTextColor", typeof(SolidColorBrush), typeof(Block), new FrameworkPropertyMetadata(Brushes.Black, null));
    public SolidColorBrush TitleLeftTextColor
    {
        get { return (SolidColorBrush)base.GetValue(TitleLeftTextColorProperty); }
        set { base.SetValue(TitleLeftTextColorProperty, value); }
    }

    public static readonly DependencyProperty TitleRightTextColorProperty = DependencyProperty.Register("TitleRightTextColor", typeof(SolidColorBrush), typeof(Block), new FrameworkPropertyMetadata(Brushes.Black, null));
    public SolidColorBrush TitleRightTextColor
    {
        get { return (SolidColorBrush)base.GetValue(TitleRightTextColorProperty); }
        set { base.SetValue(TitleRightTextColorProperty, value); }
    }

    public static readonly DependencyProperty BodyBackgroundLowColorProperty = DependencyProperty.Register("BodyBackgroundLowColor", typeof(SolidColorBrush), typeof(Block), new FrameworkPropertyMetadata(Brushes.Gray, null));
    public SolidColorBrush BodyBackgroundLowColor
    {
        get { return (SolidColorBrush)base.GetValue(BodyBackgroundLowColorProperty); }
        set { base.SetValue(BodyBackgroundLowColorProperty, value); }
    }
    public static readonly DependencyProperty BodyBackgroundHighColorProperty = DependencyProperty.Register("BodyBackgroundHighColor", typeof(SolidColorBrush), typeof(Block), new FrameworkPropertyMetadata(Brushes.Gray, null));
    public SolidColorBrush BodyBackgroundHighColor
    {
        get { return (SolidColorBrush)base.GetValue(BodyBackgroundHighColorProperty); }
        set { base.SetValue(BodyBackgroundHighColorProperty, value); }
    }

    public static readonly ICommand EditColorCommand = new RoutedCommand("EditColor", typeof(Block));
    public static void EditColor(Object sender, ExecutedRoutedEventArgs e)
    {
        DependencyProperty dp = e.Parameter as DependencyProperty;
        SolidColorBrush dpVal = ((Block)sender).GetValue(dp) as SolidColorBrush;

        ((Block)sender).SetValue(dp, new SolidColorBrush(Colors.Blue));
    }
    public static void CanEditColor(Object sender, CanExecuteRoutedEventArgs e)
    {
        DependencyProperty dp = e.Parameter as DependencyProperty;

        if (((Block)sender).GetValue(dp).GetType() == typeof(SolidColorBrush))
            e.CanExecute = true;
        else
            e.CanExecute = false;
    }
} 
```

默认模板

```
<Style TargetType="{x:Type local:Block}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:Block}">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3,3,6,6">
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="{Binding BodyBackgroundHighColor.Color,  RelativeSource={RelativeSource TemplatedParent}}" Offset="0" />
                            <GradientStop Color="{Binding BodyBackgroundLowColor.Color,  RelativeSource={RelativeSource TemplatedParent}}" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid Name="MainGrid" Background="Transparent">
                        <Grid.Resources>
                            <ContextMenu x:Key="TitleContextMenuKey">
                                <MenuItem Name="EditTitleBackgroundColorCommand" Header="Edit Title Background Color" CommandParameter="{x:Static local:Block.TitleBackgroundColorProperty}" Command="{x:Static local:Block.EditColorCommand}" CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type ContextMenu}}}" />
                                <MenuItem Name="EditTitleTextLeftColorCommand" Header="Edit Left Title Text Color" CommandParameter="{x:Static local:Block.TitleLeftTextColorProperty}" Command="{x:Static local:Block.EditColorCommand}" CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type ContextMenu}}}" />
                                <MenuItem Name="EditTitleTextRightColorCommand" Header="Edit Right Title Text Color" CommandParameter="{x:Static local:Block.TitleRightTextColorProperty}" Command="{x:Static local:Block.EditColorCommand}" CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type ContextMenu}}}" />
                            </ContextMenu>
                            <ContextMenu x:Key="BodyContextMenuKey">
                                <MenuItem Name="EditBodyBackgroundLowColorCommand" Header="Edit Body Low Background Color" CommandParameter="{x:Static local:Block.BodyBackgroundLowColorProperty}" Command="{x:Static local:Block.EditColorCommand}" CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type ContextMenu}}}" />
                                <MenuItem Name="EditBodyBackgroundHighColorCommand" Header="Edit Body High Background Color" CommandParameter="{x:Static local:Block.BodyBackgroundHighColorProperty}" Command="{x:Static local:Block.EditColorCommand}" CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type ContextMenu}}}" />
                            </ContextMenu>
                        </Grid.Resources>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="*" MinHeight="50" />
                        </Grid.RowDefinitions>
                        <Viewbox Name="TitleBar" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Stretch="Fill" >
                            <Viewbox.Style>
                                <Style>
                                    <Setter Property="Viewbox.ContextMenu" Value="{StaticResource TitleContextMenuKey}"/>
                                </Style>
                            </Viewbox.Style>
                            <Canvas Name="TitleBarDesign" Width="750" Height="200">
                                <Canvas.Resources>
                                    <LinearGradientBrush xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Key="linearGradient3932" MappingMode="Absolute" StartPoint="376,-69" EndPoint="384,131">
                                        <LinearGradientBrush.GradientStops>
                                            <GradientStopCollection>
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </GradientStopCollection>
                                        </LinearGradientBrush.GradientStops>
                                        <LinearGradientBrush.Transform>
                                            <TranslateTransform X="-0.0625" Y="2.3125"/>
                                        </LinearGradientBrush.Transform>
                                    </LinearGradientBrush>
                                    <LinearGradientBrush xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Key="linearGradient3905" MappingMode="Absolute" StartPoint="372,293" EndPoint="366,111">
                                        <LinearGradientBrush.GradientStops>
                                            <GradientStopCollection>
                                                <GradientStop Color="#FF000000" Offset="0"/>
                                                <GradientStop Color="#00000000" Offset="1"/>
                                            </GradientStopCollection>
                                        </LinearGradientBrush.GradientStops>
                                        <LinearGradientBrush.Transform>
                                            <TranslateTransform X="-0.06249985" Y="2.3124958"/>
                                        </LinearGradientBrush.Transform>
                                    </LinearGradientBrush>
                                </Canvas.Resources>
                                <Canvas Name="TitleBarImagery">
                                    <Canvas.RenderTransform>
                                        <TranslateTransform X="0.0625" Y="-2.3125"/>
                                    </Canvas.RenderTransform>
                                    <Rectangle Name="Color" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="750" Height="200" RadiusX="9.8214264" RadiusY="9.8214264" Fill="{TemplateBinding TitleBackgroundColor}" />
                                    <Rectangle Name="Shadow" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Canvas.Left="0" Canvas.Top="2" Width="750" Height="199" RadiusX="9.8214264" RadiusY="9.8214264" Fill="{StaticResource linearGradient3905}" StrokeThickness="0" Stroke="#FF000000" StrokeMiterLimit="4" StrokeLineJoin="Round" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat"/>
                                    <Path Name="Highlight" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Fill="{StaticResource linearGradient3932}" StrokeThickness="0" Stroke="#FF000000" StrokeMiterLimit="4" StrokeLineJoin="Round" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat">
                                        <Path.Data>
                                            <PathGeometry Figures="m 14.08947 7.4627848 c -5.6134084 0 -10.1232994 6.7033202 -10.1232994 14.9876462 l 0 0.666118 C 86.399783 75.974267 227.79549 110.85376 388.42587 110.85376 c 143.91412 0 272.39283 -28.007413 356.86245 -71.845549 l 0 -16.55778 c 0 -8.284326 -4.50989 -14.9876462 -10.12331 -14.9876462 l -721.07554 0 z" FillRule="NonZero"/>
                                        </Path.Data>
                                    </Path>
                                </Canvas>
                            </Canvas>
                        </Viewbox>
                        <Label Name="lblLeftText" Content="{TemplateBinding TitleLeftText}" Foreground="{TemplateBinding TitleLeftTextColor}" HorizontalAlignment="Left" />
                        <Label Name="lblRightText" Content="{TemplateBinding TitleRightText}" Foreground="{TemplateBinding TitleRightTextColor}" HorizontalAlignment="Right"/>
                        <StackPanel Name="Body"  Grid.Row="1" Background="Transparent">
                            <StackPanel.Style>
                                <Style>
                                    <Setter Property="StackPanel.ContextMenu" Value="{StaticResource BodyContextMenuKey}"/>
                                </style>
                        </StackPanel>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

希望您可以看到 routedcommand 用于更改由 CommandParameter 确定的几个不同的依赖项。这对很多人来说可能是显而易见的，但我真的很痛苦把它挂起来（可能我很笨）。如果没有造成伤害，也许它会帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:41:44.173

只需将您的命令修改为

```
CommandParameter="{Binding ElementName=testControl1}" 
```

并将您的命令执行修改为

```
public void Execute(object parameter)
{
    var ctrl = parameter as TestControl 
    ctrl.BackgroundColour = Brushes.Black;
} 
```

您不能期望绑定像在 CommandParameter 中那样工作。

# vim - 启动时如何在 VIM 中启动 WindowManager

> ID：11145528
> 
> 赞同：0
> 
> 时间：2012-06-21T19:38:21.343
> 
> 标签：vim

如何配置 VIM 以在启动时自动打开 WindowManager？也就是说，如何将其配置为在启动时执行 :WMToggle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:16:11.013

查看这个相关问题：[Vim - 如何在启动 vim 时立即运行命令？](https://stackoverflow.com/questions/6821033/vim-how-to-run-a-command-immediately-when-starting-vim).

对于你是什么东，我认为第二种解决方案是做你想做的事情的简单方法。

你只需要把它放在你的 .vimrc 中：

```
autocmd VimEnter * WMToggle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:11:34.393

`~/.bashrc`在您或您放置此类东西的任何地方添加别名：

```
alias vim='/path/to/vim -c :WMToggle' 
```

# matlab - 找出 *.bin 或 *.dat 文件中存在多少样本，然后在 MATLAB 中读取它

> ID：11145529
> 
> 赞同：0
> 
> 时间：2012-06-21T19:38:27.283
> 
> 标签：matlab, file-io

在继续阅读之前，我试图弄清楚如何在 MATLAB 中判断给定的 *.bin 或 *.dat 文件中存在多少样本。

显然，我事先知道数据类型（float、int16 等）。

我知道我可以使用类似的东西：

```
fid = fopen('foo.bin', 'r');
data = fread(fid, inf, 'int16');
fclose(fid); 
```

，并且这段代码将读取所有样本，但问题是我想知道文件开始时有多大，以便我可以划分如何读取它。我正在处理的文件非常庞大，我无法使用 inf。（或者如果可以的话，它需要永远）。

总而言之，我希望能够找到一种方法来通过 MATLAB 判断我的 *.bin 文件中有多少个样本（指定类型），以便我可以决定如何划分它向上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:34:25.743

您可以从目录列表中得知文件的大小。函数 dir(...) 返回文件中的字节数：

```
filename = 'foo.bin';

tooBig = 1e6;
fileInfo = dir(filename);
bytesInMyFile = fileInfo.bytes;

if bytesInMyFile > tooBig
    disp('File is Too Big!');
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:30:40.720

好的，所以答案如下：

```
BytesPerSample = 4;  %for example
fid = fopen('foo.bin', 'r');
fseek(fid, 0, 'eof');
pos = ftell(fid);
fclose(fid);
NumSamples = pos / ByesPerSample; 
```

然后从这里开始，我可以根据需要分割文件。:-)

# python - 从没有扩展名的网站下载 JPG

> ID：11145531
> 
> 赞同：4
> 
> 时间：2012-06-21T19:38:37.060
> 
> 标签：python

有什么方法可以从没有关联扩展名的网站下载图像？我目前正在使用 Python 来执行此操作，但是当我尝试使用命令时：

```
url = 'http://dcdbs.ssec.wisc.edu/inventory/image.php?sat=GOES-13&date=2012-06-12&time=03:32&type=Imager&band=2'
urllib.urlretrieve(url) 
```

图像已下载，但文件为空。此命令适用于具有扩展名的图像。

我对 urllib 不是很熟悉。我想最好用 Python 来做这件事，但 Java 也可以。这似乎是一件相当简单的事情，但我花了相当多的时间在它上面没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:55:14.353

您使用了错误的`urllib`功能。

```
url = 'http://dcdbs.ssec.wisc.edu/inventory/image.php?sat=GOES-13&date=2012-06-12&time=03:32&type=Imager&band=2'
resp = urllib.urlopen(url)
image_data = resp.read()
# Open output file in binary mode, write, and close.
f = open('aaa.jpg','wb')
f.write(image_data)
f.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:52:51.657

[使用requests](http://docs.python-requests.org/)和[PIL](http://www.pythonware.com/library/pil/)对我来说这看起来工作正常：

```
>>> import Image
>>> import requests
>>> from StringIO import StringIO
>>> r = requests.get('http://dcdbs.ssec.wisc.edu/inventory/image.php?sat=GOES-13&date=2012-06-12&time=03:32&type=Imager&band=2')
>>> im = Image.open(StringIO(r.content))
>>> im
<JpegImagePlugin.JpegImageFile image mode=RGB size=531x220 at 0x1BF7098> 
```

# sql - 使用 as400 报告服务，无法选择联合

> ID：11145537
> 
> 赞同：0
> 
> 时间：2012-06-21T19:39:03.047
> 
> 标签：sql, database, reporting-services, ibm-midrange

我有一个 AS400 数据源。我想联合一个选择字段。此联合适用于 SQL 数据源，但不适用于连接到 AS400 的 ODBC 驱动程序。

我有一个使用此选择语句的下拉列表参数：

```
SELECT a FROM tableb 
WHERE tableb.a = '0'
UNION   --The problem is the union.
SELECT '' AS Empty 
```

最终结果应该是：（但联合将不起作用）

```
Empty
(a data)
(a data)
(a data)
.......etc 
```

错误消息：令牌无效。有效令牌： , From Into。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:49:23.737

DB2/400 需要一个`FROM`表：

```
SELECT a FROM tableb 
WHERE tableb.a = '0'
UNION   --The problem is the union.
SELECT '' AS Empty FROM sysibm.sysdummy1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:49:20.720

UNION 之后的 SELECT 需要是完整的 SELECT 语句。这意味着您需要一个 FROM 子句。

```
UNION
SELECT 'Empty' as Empty
FROM sysibm.sysdummy1 
```

# ajax - 单击按钮后隐藏标签

> ID：11145539
> 
> 赞同：0
> 
> 时间：2012-06-21T19:39:06.297
> 
> 标签：ajax, jsf, richfaces, mojarra

我的网页中有以下代码。在`action`执行该方法后，将呈现一个标签，指示该过程是否成功。

我想要的是在单击按钮后立即隐藏该标签。我怎样才能做到这一点？

我正在考虑使用`actionListener`，但我不知道它是否像：

1.  调用 actionListener 的方法
2.  重新渲染 myView（清除我的标签）
3.  调用动作的方法
4.  重新渲染 myView（显示进程是否成功的标签）

或者也许是什么`onclick="getElementById().hide"`？

有任何想法吗？

干杯，

```
 ...
   ...
   <a4j:commandButton id="btnActualizaCubo"
                       value="Actualizar Cubo"
                       render="messageDependenciaCubo actualizacionCuboLabels @this"
                       onclick="return confirm('Las fechas seleccionadas son correctas?');"
                       onbegin="this.disabled=true;
                       document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='block'"
                       oncomplete="this.disabled=false;
                       document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='none'"
                       action="#{administrationBean.doActualizaCubo}"/>
   ...
    <a4j:outputPanel id="actualizacionCuboLabels" style="font-size: 14px; color: #D17100">
        <h:outputText rendered="#{administrationBean.actualizacionCuboCorrectaLabelRendered}"
                      value="Actualización correcta !"/>
        <h:outputText rendered="#{administrationBean.actualizacionCuboFalloLabelRendered}"
                      value="Fallo la actualización !"/>
    </a4j:outputPanel>
   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:45:15.090

使用“onclick”方法使用 JavaScript 隐藏文本。一个简单的方法是用 div 包装你的标签，并分别在 onclick/oncomplete 方法中隐藏/显示 div。另外，请记住生成一个 div 来完成这项工作，因此您只需获取 HTML 生成的 id 并隐藏/显示它。我会让你隐藏/显示一个 div 的 JS 函数（很简单，我必须说）：

```
<script type="text/javascript">
    function ocultaDiv(divId) {
        document.getElementById(divId).style.display = 'none';
    }

    function muestraDiv(divId) {
        document.getElementById(divId).style.display = 'block';
    }
</script> 
```

```
<a4j:commandButton id="btnActualizaCubo"
    value="Actualizar Cubo"
    render="messageDependenciaCubo actualizacionCuboLabels @this"
    onclick="return confirm('Las fechas seleccionadas son correctas?'); ocultaDiv('myForm:actualizacionCuboLabels');"
    onbegin="this.disabled=true; document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='block'" 
```

oncomplete="this.disabled=false; document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='none';muestraDiv('myForm:actualizacionCuboLabels');" action="#{administrationBean.doActualizaCubo}" />

当您可以使用纯 JavaScript 进行渲染并节省性能时，请记住不要使用服务器调用来渲染您的项目。此外，如果您使用 RF 3.3 或 RF 4 添加有关您正在使用的图像的提示，请添加“正在加载，请稍候”，这可以通过甚至可以冻结整个页面来完成（无需禁用您的按钮和链接！）。

# error-handling - Apache 正在尝试提供 noindex.html 但 403 的错误处理程序设置不同？

> ID：11145542
> 
> 赞同：1
> 
> 时间：2012-06-21T19:39:17.317
> 
> 标签：error-handling, apache, httpd.conf, custom-error-handling

所以我刚刚在 httpd.conf 中为自定义错误页面设置了新的错误处理程序：

```
Alias "/error" "/var/www/error/"
    ErrorDocument 400 /error/error.php?code=400
    ErrorDocument 401 /error/error.php?code=401
    ErrorDocument 403 /error/error.php?code=403 
```

但是当我试图访问我的禁止子域（index.php）时，我得到了这个：

> 您无权访问此服务器上的 /。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

但是，如果我尝试子域/jskldfjkd（以及子域/forbiddendic/），它会给出正确的错误页面。在错误日志中，Apache sais 搜索 noindex.html。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:56:46.240

在welcome.conf 中站着以下内容：

```
<LocationMatch "^/+$">
    Options -Indexes
    ErrorDocument 403 /error/noindex.html
</LocationMatch> 
```

我删除了它，现在它可以工作了:)

# class - Arduino：用户定义类型“不命名类型”

> ID：11145543
> 
> 赞同：3
> 
> 时间：2012-06-21T19:39:23.330
> 
> 标签：class, inheritance, arduino

我在 Arduino 中编写课程时遇到了一些麻烦。这是一个名为“Jerry”的类。它包含名为 Mouth、Move 和 Injection 的用户定义类的三个实例。Arduino IDE 抱怨“嘴”没有命名类型，“移动”没有命名类型。如何让 Arduino 将 Mouth 和 Move 识别为有效类型？

```
 #ifndef JERRY_H
   #define JERRY_H
   include "Button.h"
   include "Injection.h"

   class Jerry 
   {

        protected:
            int BGL;
            double protein_conc;

        public:
            Jerry(int, int);
            Mouth mth;
            Move mv;
            Injection inj;
            volatile long prev_interrupt_time;
   };

   #endif // JERRY_H 
```

（# 符号被移除，因为它搞砸了 StackOverflow 中的格式）

Mouth、Move 和 Injection 类声明如下：

```
 #ifndef BUTTON_H
    #define BUTTON_H
    include "Jerry.h"

    class Button
    {
        public:
            void setPin(int);
            int getPin();
            bool check(Jerry);
            virtual void run();
        protected:
            int pin;
   };

    class Mouth : public Button
    {
        public:
            int detectFood();
            void run();
    };

    class Move : public Button
    {
        public:
            bool checkLaughing();
            void runLaughing();
            bool checkSleep();
    };

    #endif // BUTTON_H

    #ifndef INJECTION_H
    #define INJECTION_H

    class Injection
    {
         public:
            void setPin(int, int, int, int);
            void checkInjection(); 

            void checkInjectionSite(); 
         protected:
            int pin1;
            int pin2;
            int pin3;
            int pin4;
    };

    #endif // INJECTION_H 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:04:36.330

有两个循环依赖。

1.  Jerry 的类定义使用 Mouth，Mouth 继承 Button，Button 期望 Jerry 类已经定义。
2.  Jerry 的类定义使用 Move，Move 继承 Button，Button 期望 Jerry 类已经定义。

要解决这些问题，请使用前向声明。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T00:02:43.207

看起来您需要将其设置为`libraries/Jerry/Jerry.h`与`libraries/Button/Button.h`草图相同的文件夹中。

退房： [http ://arduino.cc/en/Hacking/LibraryTutorial](http://arduino.cc/en/Hacking/LibraryTutorial)

> 首先，在你的sketchbook 目录的libraries 子目录中创建一个Morse 目录。将 Morse.h 和 Morse.cpp 文件复制或移动到该目录中。现在启动 Arduino 环境。如果你打开 Sketch > Import Library 菜单，你应该在里面看到 Morse。该库将使用使用它的草图进行编译。如果库似乎没有构建，请确保文件确实以 .cpp 和 .h 结尾（例如，没有额外的 .pde 或 .txt 扩展名）。让我们看看如何使用新库复制旧的 SOS 草图：

```
#include <Morse.h>

Morse morse(13);

void setup()
{
}

void loop()
{
  morse.dot(); morse.dot(); morse.dot();
  morse.dash(); morse.dash(); morse.dash();
  morse.dot(); morse.dot(); morse.dot();
  delay(3000);
} 
```

# r - 如何从文档术语矩阵中删除 NaN 值

> ID：11145546
> 
> 赞同：2
> 
> 时间：2012-06-21T19:39:40.160
> 
> 标签：r, machine-learning

我正在使用 RTextTools 构建一个带有矩阵和模型的训练集，稍后我将其应用于不同的文档以对它们进行分类。

**编辑：**矩阵是一个文档术语矩阵

我遇到的问题是，有时在我`new_matrix`使用以下行创建某些文档时

```
new_matrix <- create_matrix(data$document,language="english", removeNumbers=FALSE, removePunctuation=TRUE, removeStopwords=TRUE, toLower=TRUE, stemWords=TRUE, minDocFreq=1,weighting=weightTfIdf,originalMatrix=matrix) 
```

我得到一些`NaN`使我的语料库失败的值

```
corpus <- create_corpus(new_matrix,data$value, testSize=1:100,virgin=FALSE) 
```

随着错误

```
Error in .csr.coo(x) : NA/NaN/Inf in foreign function call (arg 4) 
```

我不确定为什么会有一些`NaN`值。我的猜测是它与 new_matrix 上存在的一些单词有关，而不是原始矩阵上的一些单词。

如何更改`NaN`结果矩阵中 0 的值？

这样做会改变分类的结果吗？

非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:52:08.943

使用 is.na() 查找 NaN 值的简单方法：

```
data<-c(1,2,NaN,4,2)
data[is.na(data)]<-0
data 
```

[1] 1 2 0 4 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:07:06.157

我是 RTextTools 的首席开发人员，如果您能向我发送此错误的示例，我将不胜感激。originalMatrix 参数是在过去两个月内引入的，它的处理方式可能存在一些持续的问题。您可以在我的网站 (http://www.timjurka.com/) 上给我发电子邮件

# linux - linux文件访问监视器，带有inotify？

> ID：11145549
> 
> 赞同：0
> 
> 时间：2012-06-21T19:39:52.523
> 
> 标签：linux, filesystems, monitor, inotify, operation

我正在 linux 中搜索用于监视文件的工具。例如，我需要知道文件发生了什么。喜欢它被创建、重写、读取等等。

我知道我可以使用 inotify 来实现这一点。但我需要更多详细信息。例如，我可以知道创建文件的事件。但我不仅想要创建文件，还想要它创建的文件的大小。例如，要读取一个文件，我不仅想知道我发生的读取文件的事件，还想知道读取文件的详细信息，例如它读取的文件的偏移量。

有没有人可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T13:42:07.813

如果您不想编写自己的监控工具，[auditd是一个不错的选择。](http://linux.die.net/man/8/auditd)否则， using`sys/inotify.h`通过查看`struct inotify_event`struct 为您提供有关文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:26:09.293

据我所知，内核没有提供深度细节的基础设施。这种支持意味着过多的监控钩子，甚至可能影响系统的性能。您必须编写自己的内核代码才能接收此类信息...

您似乎也对某些操作的粒度感到困惑。例如，当通过`open()`系统调用创建文件时，它最初是空的。您需要额外的系统调用（例如`write()`or `lseek()`）来改变它的大小。我不知道任何创建具有给定大小的文件的原子操作。

也就是说，您也许可以使用以下一种或多种替代方法的组合：

*   使用`inotify`和`stat`系统调用来记录操作和文件大小和权限。不幸的是，这种方法不是原子的——它不会给你读/写偏移量。

*   用于[`strace`](http://linux.die.net/man/1/strace)可能正在修改您的文件的任何进程。`strace`日志对于人类来说可能非常冗长且乏味，但它提供*了大量*有关被跟踪应用程序执行的操作的信息。

*   如果您对特定文件感兴趣，那么也许您可以使用[FUSE](http://fuse.sourceforge.net/)文件系统通过传递所有操作来镜像目录，同时记录所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:45:16.637

如果您需要详细的信息，那么您将不得不编写一个内核模块来挂钩 VFS；甚至审计子系统也没有所有这些细节。

# javascript - 是否可以使用 Rx for JavaScript 在一个时间范围内观察一些特定的 dom 事件

> ID：11145554
> 
> 赞同：0
> 
> 时间：2012-06-21T19:40:09.273
> 
> 标签：javascript, rxjs, dom-events

`keyup`如果 dom 事件 ( ) 在某个时间范围内发生特定次数，我会尝试收到通知。我看到有一个节流阀可以在某个时间范围内丢弃事件，我想计算它们。例如，我只想`keyup`在 500 毫秒内某个文本框的事件发生 10 次时收到通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:54:21.020

您可以通过保存点击的时间戳并将 10 次点击前的点击时间戳与当前时间戳进行比较来实现：

（我假设你在这里使用 jQuery）

```
var timestamps = [];
$('.watched').click(function() {
  var now = (new Date).getTime();
  // add the current timestamp in front of the other timestamps
  timestamps.unshift(now);
  if (timestamps.length > 10 && (now - timestamps[10]) < 500) {
    // do whatever you really wanted to do
    clickedTenTimes()
  }
  // clean unneeded timestamps
  while (timestamps.length > 10) timestamps.pop()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T16:21:15.677

[您可以使用groupByUntil](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/groupbyuntil.md)函数从 500 毫秒内触发的 keyup 事件创建可观察组。然后只计算每个可观察组中的事件。如果一个组中有十个或更多事件，那么做一些事情。

```
var keyups = $('#input').keyupAsObservable()
    .groupByUntil(
        function(x) { return x.currentTarget.id; },
        function(x) { return x; },
        function(x) { return Rx.Observable.timer(500); }
);

keyups.subscribe(function(obs) {
    obs.count()
    .filter(function(count) { return count >= 10; })
    .subscribe(doSomething)
}); 
```

# java - java.lang.NoClassDefFoundError: org/hibernate/Session hibernate jars 已设置

> ID：11145557
> 
> 赞同：1
> 
> 时间：2012-06-21T19:40:12.453
> 
> 标签：java, hibernate, tomcat, servlets

我在新工作中继承了几个 Java 项目，但我在设置方面遇到了一些问题。我正面临一个研究如此普遍的问题。“java.lang.NoClassDefFoundError: org/hibernate/Session”，把所有的jars甚至不必要的hibernate都映射到了classpath中。

我正在使用 tomcat 7、hirbernat 4、jre7。

每个项目都扩展了在 lib 文件夹中包含所有必要 jar 的 compnet。

我需要把那些已经映射的罐子放在这个项目中吗？

错误在这里被捕获：

```
 @Override
public void init(ServletConfig config) throws ServletException {
    super.init(config);
    HibernateUtil.currentSession();
} 
```

类路径：

```
<classpathentry kind="src" path="src"/>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/xstream 1.3/xpp3_min-1.1.4c.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/xstream 1.3/xstream-1.3.1.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Apache Tomcat v6.0"/>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/commons fileupload 1.2.1/commons-fileupload-1.2.1.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/antlr.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/commons-collections.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/dom4j.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/ejb3-persistence.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/hibernate-annotations.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/hibernate-commons-annotations.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/hibernate-validator.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/hibernate3.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/javassist.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/jta.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/jtds-1.2.4.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/log4j.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/slf4j-api.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/hibernate 3/slf4j-log4j12.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/commons logging/commons-logging-1.1.1.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/commons logging/commons-logging-adapters-1.1.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/commons logging/commons-logging-api-1.1.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
<classpathentry combineaccessrules="false" exported="true" kind="src" path="/pkg_ocorrencia"/>
<classpathentry combineaccessrules="false" exported="true" kind="src" path="/pkg_mandado"/>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/commons-beanutils-1.8.2.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/commons-digester-1.7.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/groovy-all-1.5.5.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/iText-2.1.0.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jasperreports-3.7.4.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jasperreports-chart-themes-3.7.4.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jasperreports-extensions-3.5.3.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jasperreports-fonts-3.7.4.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/spring.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/xalan.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jfreechart-1.0.12.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/jasper - ireport 3.7.4/jcommon-1.0.15.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry combineaccessrules="false" kind="src" path="/Compnet"/>
<classpathentry exported="true" kind="lib" path="/Compnet/lib/commons email 1.2/commons-email-1.2.jar"/>
<classpathentry kind="lib" path="D:/Tomcat 7/apache-tomcat-7.0.27/lib/servlet-api.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/antlr-2.7.7.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/c3p0-0.9.1.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/dom4j-1.6.1.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/ehcache-core-2.4.3.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-c3p0-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-commons-annotations-4.0.1.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-core-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-ehcache-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-entitymanager-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-envers-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-infinispan-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-jpa-2.0-api-1.0.1.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/hibernate-proxool-4.1.4.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/infinispan-core-5.1.4.FINAL.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/javassist-3.15.0-GA.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/jboss-logging-3.1.0.GA.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/jboss-marshalling-1.3.11.GA.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/jboss-marshalling-river-1.3.11.GA.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/jboss-transaction-api_1.1_spec-1.0.0.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/jgroups-3.0.9.Final.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/proxool-0.8.3.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/rhq-pluginAnnotations-3.0.4.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/slf4j-api-1.6.1.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/stax2-api-3.1.1.jar"/>
<classpathentry kind="lib" path="/Compnet/lib/hibernate4/woodstox-core-asl-4.1.1.jar"/>

<classpathentry kind="output" path="build/classes"/> 
```

堆栈式：

java.lang.NoClassDefFoundError: org/hibernate/Session at br.com.flex4j.servlet.genericActionServlet.init(genericActionServlet.java:29) at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161) at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:806) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129) 在 org.apache.catalina.core.StandardContextValve.invoke( StandardContextValve.java:175) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina .core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263) 在 org.apache.coyote。http11.Http11Processor.process(Http11Processor.java:844) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run( JioEndpoint.java:447) at java.lang.Thread.run(Unknown Source) 引起：java.lang.ClassNotFoundException: org.hibernate.Session at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358 ) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204) ... 13 更多ClassNotFoundException: org.hibernate.Session at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204) ... 还有 13 个ClassNotFoundException: org.hibernate.Session at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204) ... 还有 13 个

2012 年 6 月 21 日下午 3:39:22 org.apache.catalina.core.StandardWrapperValve 调用严重：为 servlet genericActionServlet java.lang.ClassNotFoundException 分配异常：org.apache.catalina.loader.WebappClassLoader.loadClass 的 org.hibernate.Session (WebappClassLoader.java:1358) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204) 在 br.com.flex4j.servlet.genericActionServlet.init(genericActionServlet.java:29) 在 org.apache。 catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161) 在 org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:806) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java: 129) 在 org.apache.catalina.core.org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)。StandardHostValve.invoke(StandardHostValve.java:128) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org .apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process (Http11Protocol.java:584) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 处的连接器.CoyoteAdapter.service(CoyoteAdapter.java:263) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java: 584）在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run（JIoEndpoint.java:447）在 java.lang.Thread.run（未知来源）org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 处的连接器.CoyoteAdapter.service(CoyoteAdapter.java:263) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java: 584）在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run（JIoEndpoint.java:447）在 java.lang.Thread.run（未知来源）

编辑：

我的项目的类路径：![属性>java构建路径](../Images/5fc491fe6c26ec2c4cb32b953a8a8027.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:47:42.833

据我了解，您提供的类路径 xml 由 Eclipse 使用，它与您的 Web 应用程序类路径无关。您收到 NoClassDefFoundError 的原因是 Tomcat 无法找到 Hibernate 类。确保您的 Web 模块在 WEB-INF/lib 目录中具有所有必需的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T18:57:32.497

将所有 JARS 添加到 WEB-INF 并在项目上执行构建路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-09T08:08:20.030

要在 Eclipse 中添加 jar，您有两种选择：

右键单击项目到属性->单击java构建路径->配置构建路径->库->并选择添加外部jar按钮。它将打开一个窗口，您可以在其中添加所需的所有罐子。

第二种选择是将 jar 直接粘贴到 lib 文件夹。lib 文件夹位于 Web Content --> WEB-INF --> lib 中。

使用其中任何一种。

# git - 在 textmate 中打开 git 冲突的别名

> ID：11145561
> 
> 赞同：3
> 
> 时间：2012-06-21T19:40:27.513
> 
> 标签：git, bash, textmate, alias

我将如何创建一个 bash 别名，将来自 git merge 或 git rebase 的任何冲突文件通过管道传输到 TextMate 的 mate 命令中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:26:47.713

你可以试试

```
textmate `git status | grep both | awk '{print $4}'` 
```

`textmate`您运行 TextMate 的命令在哪里。

# jquery - 防止表单回发使用 jQuery 确认对话框

> ID：11145562
> 
> 赞同：3
> 
> 时间：2012-06-21T19:40:28.850
> 
> 标签：jquery, asp.net, validation, modal-dialog

我有一个带有 onclick 和 onclientclick 事件的 asp.net 按钮。

```
<asp:Button  ID="ButtonSave" Text="Save" ToolTip="Save" CssClass="causesValidation button" OnClick="ButtonSave_Click" OnClientClick="myfunction();" runat="server"/> 
```

一旦我单击按钮，客户端和服务器端事件都会被触发。如果客户端功能成功，我只希望服务器端事件运行。

我尝试了以下方法：

```
function myfunction()
{
    // Show dialog
    $('#mydialog').dialog('open');

// on dialog confirmation return true, else false;
}

<asp:Button  ID="ButtonSave" Text="Save" ToolTip="Save" CssClass="causesValidation button" OnClick="ButtonSave_Click" OnClientClick="return myfunction();" runat="server"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:44:05.950

改变

```
OnClientClick="myfunction();" 
```

经过

```
OnClientClick="return myfunction();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:14:12.217

在对话框确认中更改`OnClientClick="myfunction()"`并`OnClientClick="myfunction(); return false;"`调用`__doPostBack`传递 ButtonSave UniqueID 作为第一个参数值的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:46:50.863

```
onclientclick=return function(); 
```

# ssrs-2008 - 在 Switch 中指定 DataSet

> ID：11145577
> 
> 赞同：2
> 
> 时间：2012-06-21T19:41:40.990
> 
> 标签：ssrs-2008, reporting-services

我的 SSRS 报告的文本框中有一个 Switch 语句，但我有三个数据集，需要指定在 switch 中使用哪个数据集。有没有办法解决这个问题？如果是这样，我将如何去做？

这是我的开关声明：

```
=Switch(Fields!ProjectStatus.Value =100000000,"Active", Fields!ProjectStatus.Value = 100000001,"On Hold", Fields!ProjectStatus.Value = 100000002,"Completed", Fields!ProjectStatus.Value = 100000003, "Cancelled", Fields!ProjectStatus.Value = 100000004, "Researching", Fields!ProjectStatus.Value = 100000005, "Wish List", Fields!ProjectStatus.Value = 100000006, "Queued", Fields!ProjectStatus.Value = 100000007, "Redined")) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:07:45.983

您需要执行某种聚合。很多时候`FIRST`或`MAX`对此有用。

`=Switch(First(Fields!ProjectStatus.Value, "Dataset1") =100000000,"Active", First(Fields!ProjectStatus.Value, "Dataset2") = 100000001,"On Hold", First(Fields!ProjectStatus.Value, "Dataset3") = 100000002,"Completed", First(Fields!ProjectStatus.Value, "Dataset1") = 100000003, "Cancelled", First(Fields!ProjectStatus.Value, "Dataset2") = 100000004, "Researching", First(Fields!ProjectStatus.Value, "Dataset3") = 100000005, "Wish List", First(Fields!ProjectStatus.Value, "Dataset1") = 100000006, "Queued", First(Fields!ProjectStatus.Value, "Dataset2") = 100000007, "Redined"))`

资源：http: [//msdn.microsoft.com/en-us/library/ms345237.aspx](http://msdn.microsoft.com/en-us/library/ms345237.aspx)

# javascript - IE9 上的 getAttribute

> ID：11145578
> 
> 赞同：1
> 
> 时间：2012-06-21T19:41:41.943
> 
> 标签：javascript

这适用于除 IE9 之外的所有浏览器，getAttribute 在 IE9 上返回 null，任何想法

```
function getFlashMovieObject(movieName){
    if(document.embeds[movieName])
      return document.embeds[movieName];
    if(window.document[movieName])
      return window.document[movieName];
    if(window[movieName])
      return window[movieName];
    if(document[movieName])
      return document[movieName];
}

function ChangePlaylist(newval,mymovievarmp3){
    var mp3Player = getFlashMovieObject(mymovievarmp3);
    var newstring = mp3Player.getAttribute('data');
    var broken = new Array();
    broken = newstring.split('?');
    mp3Player.setAttribute('data',broken[0]+'?'+broken[1]+'?'+newval)
} 
```

使用 JQuery 但仍然无法正常工作

```
 var mp3Player = getFlashMovieObject(mymovievarmp3);
    var newstring = $("#mp3Player ").data("data"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:48:49.820

尝试

```
function ChangePlaylist(newval,mymovievarmp3){
    var mp3Player = getFlashMovieObject(mymovievarmp3);
    var newstring = mp3Player.getAttribute('data');
    var broken = new Array();
    broken = newstring.split('?');
    mp3Player.setAttribute('data',broken[0]+'?'+broken[1]+'?'+newval)
} 
```

我现在明白你为什么逃脱了。我认为它在 getAttribute() 行上中断。
我建议导入 jQuery 并使用 $(elem).data()。

假设你有：

```
<a data-someval="blah" /> 
```

然后这个：

```
$("#elem").data("someval"); 
```

应该返回废话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:41:45.087

试试下面的代码：

```
 function ChangePlaylist(newval,mymovievarmp3){
     var mp3Player = getFlashMovieObject(mymovievarmp3);
     //previus declaration
     //var newstring = mp3Player.attributes['data'].nodeValue;

     //Although i'm not familiar with getFlashMoiveObject, if that function
     //a reference to the javascript object, the next should work fine. 
     var newstring = $(mp3Player).attr('data');

     //If that does not work, then try adding an `id`, or a `class` to the object
     //and then do one of the next:

     //using `id`:
     //var newstring = $('#mp3PlayerId').attr('data');

     //using `class`:
     //var newstring = $('.mp3PlayerClass').attr('data');

     //Also note that `id` and `class` are standard attributes, and so they values can
     //be accessed using regular getAttribute.

     var broken = new Array();
     broken = newstring.split('?');
     //mp3Player.setAttribute('data',broken[0]+'?'+broken[1]+'?'+newval)

     //Update - To set the a value to data attribute:
     $(mp3Player).attr('data',broken[0]+'?'+broken[1]+'?'+newval);
 } 
```

IE 无法从元素中获取非标准属性。

**更新**：

如果您愿意使用另一个库，例如，`jQuery`您可以轻松地执行类似的操作

```
 $('#elementId').attr('data'); 
```

并且肯定会成为跨浏览器。

**更新 2**

我更新了代码并解释了一下。希望它可以帮助你！

**更新 3**

以下代码可用于为数据设置值：

```
 $(mp3Player).attr('data',value); 
```

# azure - 如何使用适用于 linux 的命令行工具 (SDK) 为 Azure 创建 WebRole

> ID：11145580
> 
> 赞同：2
> 
> 时间：2012-06-21T19:41:47.407
> 
> 标签：azure

我正在使用 Ubuntu 并安装了适用于 Linux 的 Azure SDK 并使其正常工作。使用 Linux SDK 如何为 node.js 服务添加 Azure WebRole。

我指的是以下教程，但它只讨论如何在 Windows 上使用 cmdlet 创建 WebRole

[Node.js 云服务](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

还查看了以下链接，该链接解释了适用于 Linux/Mac 的 Azure 命令行，但我找不到任何使用 linux SDK 创建 WebRole 的命令

[适用于 Mac 和 Linux 的 Windows Azure 命令行工具](https://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:59:16.663

我检查了 Linux CLI ( [service.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/cli/commands/service.js) ) 的源代码，看起来无法通过命令行创建托管服务（将包含您的 Web 角色）。

唯一可用的操作是：

*   列表
*   删除[名称]
*   传送门 [名称]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:32:52.453

您不能使用“[适用于 Mac 和 Linux 的 Windows Azure 命令行工具](https://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/)”在 Windows Azure 中创建 WEB 角色（如果您指的是 Windows Azure Web 角色），因为这些命令仅与您的虚拟机 Linux（以及 Windows）一起使用）。此外，上面的[Node.js 云服务](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)链接将在 Windows Azure 虚拟机中创建一个 Node.js Web 服务器，因此请确保您在此处尝试执行的操作。这在您的虚拟机中不起作用。

但是，如果您想创建 Linux VM 并在其上运行 Web 服务器，那么确定是否可以使用确切的命令，步骤如下：

1.  创建 Linux VM（上传自己的或[直接通过 Linux Gallery Image 创建 VM](https://www.windowsazure.com/en-us/manage/linux/how-to-guides/custom-create-a-vm/)）
2.  [设置 Putty 以登录您的 Linux VM](https://www.windowsazure.com/en-us/manage/linux/how-to-guides/log-on-a-linux-vm/)
3.  通过 Putty 命令会话使用[此处的信息](https://www.windowsazure.com/en-us/manage/linux/common-tasks/install-software/)安装您选择的 Web 服务器

如果您在上述任何步骤中需要帮助，请告诉我。

# python - 对基于 PySide 的应用程序进行单元和功能测试？

> ID：11145583
> 
> 赞同：24
> 
> 时间：2012-06-21T19:41:54.433
> 
> 标签：python, unit-testing, qt4, pyside

我正在构建一个基于 PySide 1.1.0 的应用程序，并且一直在寻找好的示例来查看我的应用程序的单元和功能测试。我希望能够对 UI 进行功能测试（模拟点击、按键等），对改变 UI 布局的 UI 插槽进行单元测试（可能使用部分模拟的发送器和接收器），以及单元测试涉及小部件的代码，但不需要渲染任何窗口。

作为一个例子，当一个项目被添加到向 QTreeView 提供数据的模型（QAbstractItemModel 派生对象）时，我在菜单栏中动态创建一个菜单的子菜单。模型和子菜单必须保持同步，所以我希望能够编写一个单元测试，将数据提交给管理模型和子菜单的控制器，并断言模型和子菜单都已正确更新。

如果可以避免的话，我宁愿不必在我的测试代码中设置 QApplication。当我只关心验证小部件中的数据结构而不是它们的可视化时，我也希望不必显示任何窗口。

[我在http://www.pyside.org](http://www.pyside.org)或我的 Google 搜索中找不到任何合适的价值。有没有人有任何经验或知道我应该看的好的示例代码？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-19T12:22:39.800

我现在一直在玩一些单元测试 pyside 代码，并得出结论，将 python 的`unittest`模块与 qt 的`QTest`模块结合起来效果很好。

您必须实例化一个`QApplication`对象，但您不需要运行它的`exec_`方法，因为您不需要运行事件循环。

这是一个示例，说明我如何测试`QCheckBox`对话框中的 a 是否执行了它应该执行的操作：

```
class Test_PwsAddEntryDialog(TestCase):
    """Tests the class PwsAddEntryDialog."""

    def test_password_strength_checking_works(self):
        """Tests if password strength checking works, if the corresponding check
        box is checked.
        """
        d = PwsAddEntryDialog()
        # test default of internal flag
        self.assertFalse(d.testPasswordStrength)
        # type something
        QTest.keyClicks(d.editSecret, "weak", 0, 10)
        # make sure that entered text is not treated as a password
        self.assertEqual(d.labelPasswordStrength.text(), "")
        # click 'is password' checkbox
        QTest.mouseClick(d.checkIsPassword, Qt.LeftButton)
        # test internal flag changed
        self.assertTrue(d.testPasswordStrength)
        # test that label now contains a warning
        self.assertTrue(d.labelPasswordStrength.text().find("too short") > 0)
        # click checkbox again
        QTest.mouseClick(d.checkIsPassword, Qt.LeftButton)
        # check that internal flag once again changed
        self.assertFalse(d.testPasswordStrength)
        # make sure warning disappeared again
        self.assertEqual(d.labelPasswordStrength.text(), "") 
```

这完全可以在屏幕外工作，包括单击小部件并在`QLineEdit`.

这是我测试（相当简单）的方法`QAbstractListModel`：

```
class Test_SectionListModel(TestCase):
    """Tests the class SectionListModel."""

    def test_model_works_as_expected(self):
        """Tests if the expected rows are generated from a sample pws file
        content.
        """
        model = SectionListModel(SAMPLE_PASSWORDS_DICT)
        l = len(SAMPLE_PASSWORDS_DICT)
        self.assertEqual(model.rowCount(None), l)
        i = 0
        for section in SAMPLE_PASSWORDS_DICT.iterkeys():
            self.assertEqual(model.data(model.index(i)), section)
            i += 1 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T19:36:37.610

就我而言，我收到错误“QPixmap：必须在 QPaintDevice 之前构造 QApplication”。

如果您需要为您的测试提供一个 QApplication 实例（例如使用 QPixmap），这是一种方法。只需创建一个单例，以确保您只有一个 QApplication 实例。

这被作为 PySide 源代码中测试的助手隐藏起来。

```
import unittest

from PySide.QtGui import QApplication
_instance = None

class UsesQApplication(unittest.TestCase):
    '''Helper class to provide QApplication instances'''

    qapplication = True

    def setUp(self):
        '''Creates the QApplication instance'''

        # Simple way of making instance a singleton
        super(UsesQApplication, self).setUp()
        global _instance
        if _instance is None:
            _instance = QApplication([])

        self.app = _instance

    def tearDown(self):
        '''Deletes the reference owned by self'''
        del self.app
        super(UsesQApplication, self).tearDown() 
```

然后子类化 UsesQApplication

```
from PySide import QtGui

class Test(UsesQApplication):

    def setUp(self):
        #If you override setup, tearDown, make sure
        #to have a super call
        super(TestFilterListItem, self).setUp()

    def tearDown(self):
        super(TestFilterListItem, self).tearDown()

    def testName(self):
        pix = QtGui.QPixmap(20,20)
        self.assertTrue(True) 
```

希望这可以帮助

# nant - NAnt 平台错误

> ID：11145589
> 
> 赞同：3
> 
> 时间：2012-06-21T19:42:18.440
> 
> 标签：nant

我有我的 .build 设置

```
<csc platform='x86' target='winexe' output='${validate.file}' debug='${debug}' warnaserror='true'> 
```

但我明白了

```
 [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'System.Data.dll' targets a different processor
  [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'System.Data.OracleClient.dll' targets a different processor
  [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'System.EnterpriseServices.dll' targets a different processor
  [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'System.Transactions.dll' targets a different processor
  [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'System.Web.dll' targets a different processor
  [csc] error CS1607: Warning as Error: Assembly generation -- Referenced assembly 'mscorlib.dll' targets a different processor

External Program Failed: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\csc.exe (return code was 1) 
```

当我使用 NAnt .92 时。如果我使用 NAnt .91 一切正常。如何更新我的 .build 以使用 .92？我正在构建 Win7 64 位。

在具有完全相同的 .build 文件的 NAnt .91 下，使用的外部程序是`C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.exe`. 请注意框架，而不是 Framework64。看起来 NAnt .92`plateform='x86'`选择时使用了错误的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:35:31.067

One simple workaround is to modify your csc task like this:

```
<csc platform='x86' target='winexe' output='${validate.file}' debug='${debug}' warnaserror='true'>
    <warnaserror>
        <exclude number="1607" />
    </warnaserror> 
```

This way you still get warnings as errors (which is what you want I guess) but not the CS1607 in particular. Maybe it's a compromise you can live with?

It is indeed an interesting issue. Diving into NAnt.exe.config, I see that the definition of the framework 'net-4.0' always looks up its assemblies in:

```
frameworkdirectory="${path::combine(installRoot, 'v4.0.30319')}"
frameworkassemblydirectory="${path::combine(installRoot, 'v4.0.30319')}" 
```

and installRoot comes from the registry, which always has the value Framework64\. What this means is that by the time you've targeted 'net-4.0', you've already selected the Framework64 folder. By the time you specify in the csc task that it's supposed to use x86, it's too late.

A nice and daring experiment would be to create a new framework definition inside NAnt.exe.config, duplicating net-4.0 into, let's say, net-4.0-x86\. Then change that definition to target the Framework path instead of the Framework64\. It might work. Of course then you'll need to tell nant to target net-4.0-x86 and you'll have a hacked customized NAnt.exe.config file.

# html - 我可以在页面的每一侧都有一个带有单元格的表格行吗？

> ID：11145591
> 
> 赞同：0
> 
> 时间：2012-06-21T19:42:24.503
> 
> 标签：html, css, internet-explorer, html-table

我现在正在设计一个网站，并在顶部有一个用于导航的菜单栏。这一切都是作为一个表格和 CSS 完成的。这适用于所有浏览器，但是，我希望左侧有导航按钮，右侧有登录和主页按钮。

我可以通过将右手按钮放在他们自己的 div 中并使用 position: fixed 元素来定位它来轻松做到这一点。但是，我相信你们都知道，这不适用于 Internet Explorer。由于我的 div 方法一开始是一种变通方法，因此我不想为我的 IE 变通方法添加另一个变通方法。

所以我开始怀疑是否有一种方法可以将整个菜单栏保持在一个表格行而不是两个表格行中，但是让右侧按钮的单元格向右对齐，左侧按钮的单元格在左侧。我认为这比我的 div 工作要整洁得多，并且可以与 IE 一起使用。我不知道这是否可能，我在上面找不到任何东西。任何帮助将不胜感激，即使它与我建议的方法不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:52:35.713

首先，`position: fixed`无论您向上还是向下滚动，都将帖子保持在浏览器窗口中的这个位置，您确定这是您正在寻找的行为吗？

至于您的问题：您应该制作一个更大的 div 来包围两个较小的 div 并将其放置在页面顶部。这是一个例子：

```
<div id="top-bar">
<div id="rightbuttons">Three | Four</div>
<div id="leftbuttons">One | Two</div>
</div> 
```

对于此示例，我将把整个栏放在顶部：

```
#top-bar { position: absolute; width: 100%; left:0; right:0; } 
```

然后，为了定位内边栏，我将使用一个`float`属性：该属性允许元素“浮动”在任一位置。

```
#rightbuttons { float: right; }
#leftbuttons { float: left; } 
```

然后作为“hack”以确保浮动 div 仍然使外部 div 根据其内容保持高度，我们添加`overflow:hidden`到它

```
#top-bar { position: absolute; width: 100%; left:0; right:0; verflow: hidden; } 
```

# [这是一个活生生的例子](http://jsfiddle.net/OhMrBigshot/v6S75/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:00:51.963

这对您来说是一个非常简单的解决方法。如果您知道如何将 CSS 放在单独的文件中，请执行此操作，否则您可以将其放在 head 部分。

HTML：

```
<table>
<tr>
    <td>Nav 1</td>
    <td>Nav 2</td>
    <td>Nav 3</td>
    <td class="right">Login</td>
    <td class="right">Home</td>
</tr>
</table> 
```

CSS：

```
table {
    width: 100%;
}

.right {
    float:right;
} 
```

搜索引擎不太喜欢它，但您也可以像这样内联发布它：

```
<table>
<tr>
    <td>Nav 1</td>
    <td>Nav 2</td>
    <td>Nav 3</td>
    <td style="float:right">Login</td>
    <td style="float:right">Home</td>
</tr>
</table> 
```

# spring - Spring Data SimpleJpaProvider

> ID：11145593
> 
> 赞同：0
> 
> 时间：2012-06-21T19:42:28.843
> 
> 标签：spring, repository, spring-data

我正在尝试使用 SimpleJpaProvider，下面是代码片段。我无法像在休眠的 SaveandUpate 中那样进行更新。无法确定我的逻辑在哪里丢失？

```
@Repository
public interface CompanyRepo extends TestBaseRepo<Company,java.lang.Integer>{
}

@NoRepositoryBean
public interface TestBaseRepo <T, ID extends Serializable> extends JpaRepository<T, ID>    {}

public class TestBaseRepoImpl <T, ID extends Serializable> extends SimpleJpaRepository<T,   ID> implements TestBaseRepo<T, ID> {
        Logger log = Logger.getLogger(TestBaseRepoImpl.class);
        @PersistenceContext(type = PersistenceContextType.EXTENDED)
        private EntityManager entityManager;

       public TestBaseRepoImpl(Class<T> domainClass, EntityManager em) {

           super(domainClass, em);
       } 
```

我将 xml 配置更新为我的 factorybean

现在在我的服务类中，我将“CompanyRepo”自动装配为 repot 并调用
repot.save(sr.getCompany()); 公司实体已经存在于数据库中，但这应该是一个更新......（如在休眠的保存和更新中）......这会引发重复记录错误。保存方法是否应该检查现有实体并进行更新？

# javascript - JQuery 中单个事件的多个函数

> ID：11145596
> 
> 赞同：0
> 
> 时间：2012-06-21T19:42:30.847
> 
> 标签：javascript, jquery, function

我对一个元素有一个功能：

```
<a href="javascript:void(0);" onclick="dothis()">Link</a> 
```

完成此功能后，如何在此功能之后运行另一个功能？

例如，如果此函数返回 true，则脚本将运行另一个函数，如果不是，则不会运行第二个函数。

或者让第二个函数运行而不考虑第一个函数的结果。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:45:19.963

```
<a href="javascript:void(0);" onclick="if (dothis() == true) dothat();">Clicky</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:45:05.347

您可以简单地调用另一个函数`dothis()`

```
 function dothis(){

  // Do something

    if(val == true)
    {
     // Call another function
      anotherFunction();
    }

 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:47:36.203

在`onclick`属性中，可以使用普通的javascript，即所谓的内联javascript。所以你可以这样做（不鼓励）：

```
<a onclick="if(dothis()) dothat()" /> 
```

你可以这样做（推荐）：

```
<a onclick="dothisandthat()" />

<script>
    function dothisandthat() {
        if (dothis())
            dothat();
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T20:15:42.717

最简洁的方式：

```
doThis() && doThat(); 
```

jQuery：

```
$('#el').click(function() {
    doThis() && doThat();
}); 
```

HTML：

```
<a href="javascript://" onclick="doThis() && doThat();">Link</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T19:44:17.733

在末尾调用另一个函数`dothis`

如果您想`dothis`与其他元素一起使用。只需使用回调函数。

```
function dothis(callback) {

 // code

 callback();

} 
```

然后像这样使用它：

```
dothis(dothisafter); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T19:44:54.640

`dothis`您可以像这样在函数末尾调用另一个函数

```
function dothis(){

  if(someThing == true)
    someFunc();
} 
```

# java - App Engine 和多个管理员用户？

> ID：11145598
> 
> 赞同：2
> 
> 时间：2012-06-21T19:42:37.657
> 
> 标签：java, android, google-app-engine

所以我有一个关于应用引擎的快速问题。

所以我希望客户端能够注册填写信息，这些信息将插入到 android 客户端 GUI 中的 EditText 字段中。用户信息将使用 App 引擎实体提交和存储。

现在，我想要的是一个可以看到新用户何时注册的网站。

所以我想要一个管理员可以登录的登录控制台。但诀窍是我想分配每个管理员只能访问他们的给定实体父级。

例如，Bob 只能根据我为他设置的内容访问他的雇员。

因此，当新用户从列表中选择“Bobs 员工”时，它将仅使用 bobs 控制台进行注册。然后，他将能够通过 C2DM 向他们发送 ping 并删除或编辑用户。

好的，所以我的问题是：所有这些都可能通过 AppEngine 还是我需要其他一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:03:50.313

您的问题的简单答案是**是的，这是可能的**。

你将如何做到这一点是另一个问题。一般的想法是`role`在模型上有一个属性，`User`然后从那里决定谁可以设置该字段的业务逻辑，以及该用户将能够访问哪些内容`role`。

您还可以使用[is_current_user_admin()](https://developers.google.com/appengine/docs/python/users/functions#is_current_user_admin)（GAE 上的 Python）函数将`role`默认`admin`情况下用户也是应用程序的管理员设置为，这样您的系统将始终至少有一个管理员。

# php - 如果不存在不同的结果，则插入表中

> ID：11145600
> 
> 赞同：4
> 
> 时间：2012-06-21T19:42:48.753
> 
> 标签：php, mysql, insert

我有一个像这样的“用户”SQL 表结构（ID 是随机生成的，不是自动递增的）：

```
ID    name     deleted    lastActive
3242  Joe      0          20-6-2012 23:14
2234  Dave     0          20-6-2012 23:13
2342  Simon    1          20-6-2012 23:02
9432  Joe      1          20-6-2012 22:58 
```

可以有多个已删除 (deleted=1) 的同名用户，但只有 1 个未删除的同名用户（所以添加 Simon 可以，但 Dave 不行）。只有在一个 SQL 查询中没有同名且已删除 = 0 的记录时，如何才能插入？我需要这样的东西：

```
INSERT INTO users (ID, name) VALUES ($id, $name) 
    WHERE NOT EXISTS (SELECT 1 FROM users WHERE name = $name AND deleted = 0) 
```

但这不是正确的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:50:23.697

设置一个 LEFT JOIN

*   子查询 A 包含别名为 ID 的随机数和别名为 name 的 $name。
*   子查询 B 选择未删除的 name = $name。
*   LEFT JOIN A 到 B 并返回 A.* 如果它没有 LEFT JOIN 的右侧对应项

这是查询

```
INSERT INTO users (ID,name)
SELECT A.* FROM
(SELECT RAND() ID,'$name' name) A LEFT JOIN
(SELECT name FROM users WHERE name='$name' AND deleted=0) B
USING (name) WHERE B.name IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:02:28.243

使用[MySQL 的 REPLACE 语法](http://dev.mysql.com/doc/refman/5.0/en/replace.html)。

确保 ID 是主键或唯一键，并在所有三个 ID、名称和已删除列上创建索引。

```
REPLACE INTO users (ID, name) VALUES ($id, $name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:46:52.473

```
INSERT INTO users (ID, name) 
SELECT $id, $name WHERE NOT EXISTS (
    SELECT 1 FROM users WHERE name = $name AND deleted = 0
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:11:46.440

```
INSERT INTO users SELECT '1', 'Bob','','' FROM DUAL WHERE NOT EXISTS(SELECT ID FROM users WHERE name = 'Bob' AND deleted ='0' LIMIT 1) 
```

# ruby-on-rails-3 - 当只能找到 1 个错误时，设计返回 2 个错误

> ID：11145604
> 
> 赞同：1
> 
> 时间：2012-06-21T19:43:01.120
> 
> 标签：ruby-on-rails-3, devise

我`validatable`为我的应用启用了模块。在我要求用户的电子邮件地址进行注册时的屏幕上，如果电子邮件已经存在......这是我看到的错误：

```
We found 2 errors that prevented your account from being created:
Email has already been takenEmail has already been taken 
```

这是来自日志：

```
Started POST "/users" for 127.0.0.1 at 2012-06-21 14:37:41 -0500
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zcpDH5U4XkHcYWVHEqrshgmzGiqsZHI9mD6Inrdr8uE=", "user"=>{"email"=>"abc@email.com"}, "commit"=>"Sign Me Up!"}
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'abc@email.com' LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('abc@email.com') LIMIT 1
   (0.1ms)  rollback transaction
  Rendered devise/shared/_links.erb (0.8ms)
  Rendered devise/registrations/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 1118ms (Views: 290.9ms | ActiveRecord: 0.0ms) 
```

我如何通过尝试进行两次检查而只进行 1 次检查来获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:22:13.837

试图登录，但它不会让我。

我不做 ruby​​，但看起来您可能正在输入一封符合这两个标准的电子邮件。可能只需要第二个。希望这可以帮助！

`User Exists (0.2ms) SELECT 1 AS one FROM "users" WHERE "users"."email" = 'abc@email.com' LIMIT 1
User Exists (0.1ms) SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('abc@email.com') LIMIT 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:33:16.563

Rails 对每个验证运行单独的检查，因此存在和唯一性验证器将导致两次检查。如果您想避免多余的错误消息，您可以执行以下操作，并且只输出唯一的错误消息：

```
#error_explanation
  .alert.alert-error
    Please correct the following #{pluralize(object.errors.full_messages.uniq.size, "error")}:
   %ul
   - object.errors.full_messages.uniq.each do |msg|
     %li #{msg} 
```

# javascript - Android HTML5 FileApi 我可以从 SD 卡读取文件吗？

> ID：11145614
> 
> 赞同：0
> 
> 时间：2012-06-21T19:43:39.090
> 
> 标签：javascript, android, html, fileapi

有没有办法让网站在浏览器中工作时从 Android SDCard 读取某些文件（我知道这个文件存在于 SDCard 上）？

我希望我的**网站****从 SDCard** (hugeXXX.avi)中打开“某些视频文件” :)

甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:09:23.587

HTML5*文件系统*API 允许网页仅在沙盒文件系统中打开和操作文件。浏览器决定这个沙盒文件系统存在的位置和方式，并且您的网页无法突破沙盒以访问设备实际文件​​系统上的任意文件。

您*可以*做的是提供一个文件输入元素 ( `<input type=file>`)，允许*用户*指定您的网页随后可以上传/读取的文件。在这种情况下，用户可以选择设备文件系统中的任何文件，包括安装的 SD 卡。请参阅有关读取文件的[HTML5 Rocks 教程。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

所以，不，出于安全原因，没有办法精确地做你想做的事。

（当然，除非网页托管*在设备本身上*，并且相关文件位于您的网站目录中。然后您可以通过 Ajax 调用或类似方法从服务器加载它（也就是说，从设备本身加载它，托管页面）。）

# android - 注册：intentfilter设置活动android

> ID：11145617
> 
> 赞同：0
> 
> 时间：2012-06-21T19:44:00.517
> 
> 标签：android, mobile

谁能帮助我如何限制卸载“netnanny”android应用程序等应用程序？ [https://play.google.com/store/search?q=netnanny&c=apps](https://play.google.com/store/search?q=netnanny&c=apps)

[android- 在 android 设置菜单中添加新活动](https://stackoverflow.com/questions/10119652/android-adding-new-activity-in-android-settings-menu)

提前致谢。

问候，哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:01:50.630

不支持阻止应用程序卸载的方法。执行此操作的各种黑客行为已被报告为安全问题，因为恶意软件作者会对阻止应用程序被卸载非常感兴趣。

# python - 使用 Python 预先验证权限？

> ID：11145618
> 
> 赞同：0
> 
> 时间：2012-06-21T19:44:03.517
> 
> 标签：python, permissions, posix, root

我正在通过 python 模块创建目录。某些类型的目录需要设置某些限制性访问权限。该模块将通过脚本使用；并且脚本可以由用户或服务器（以 root 身份）运行。

我想避免创建目录、尝试更改其权限并捕获 OSError 异常的情况，因为我没有足够的权限。与其在混乱发生后尝试清理混乱，不如让我的应用程序更健壮地从一开始就防止出现问题。我希望有一些方法可以在实际尝试使用之前确定运行脚本的用户是否具有组权限。

对于“普通”用户，我可以这样做：

```
导入操作系统
导入grp
mygroups = [grp.getgrgid(x).gr_name for x in os.getgroups()]

```

然后，如果 mygroups 不包含我需要它包含的组，我可以优雅地退出。

但这不适用于 root 用户，他确实具有权限但可能不是相关组的成员。我不清楚除了root之外是否有任何异常，所以我犹豫是否简单地编写一个仅涵盖root用户id的异常。

python 2.x 中是否有一种可靠的方法来检查当前用户是否具有某些组权限（以更改目录的访问权限和所有权），而无需实际尝试使用这些权限（抛出 OSError）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:07:41.147

> python 2.x 中是否有一种可靠的方法来检查当前用户是否具有某些组权限（以更改目录的访问权限和所有权），而无需实际尝试使用这些权限（抛出 OSError）？

也许; 我不知道 POSIX 是否允许在运行时从外部更改进程组。如果没有，可能有办法做到这一点。如果是这样，则存在竞争条件。

无论如何，这不是在 Python 或 POSIX 中执行此操作的首选方式。这是做你想做的事情的可靠方法：

```
def mkdir_for_gid(path, gid, mode):
    # make a dir that no-one may touch.
    os.mkdir(path, 0700)
    try:
        os.chown(path, os.getuid(), gid)
        os.chmod(path, mode)
        return path
    except:
        # Some operation failed. We don't care which one, we just clean up.
        # We do know that it wasn't mkdir, so the error from that is not masked
        # by any error from rmdir.
        os.rmdir(path)
        raise 
```

请注意，我使用的`except`是 Python 样式指南 PEP-8 不允许的“bare”子句。由于我们重新`raise`例外，因此这里没有问题。

# jquery - 获取动态表单字段的值（JQuery）

> ID：11145620
> 
> 赞同：-1
> 
> 时间：2012-06-21T19:44:05.393
> 
> 标签：jquery, dynamic

如果用户选择显示 div，我有一个使用动态输入的表单。我无法从动态表单字段中获取值。

这是一个例子。

HTML（此 div 仅在用户单击显示 DIV 链接时显示）

```
<form id="myForm">

<input type="text" id="name" />

<a href="#" id="showDiv">Show Div</a>

<div id="newElement" style="display:none;"><input type="text" id="newField"/></div>

<input type="submit" name="submit" id="submit" />
</form> 
```

Javascript - 假设用户点击了“显示 div”链接，然后显示 newElement div，然后提交表单。这是在提交时运行的代码。

```
$("#myForm").submit(function(){
      alert($('#name').val());
      alert($('#newField').val());
}); 
```

我收到第一个警报的值，但不是第二个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:00:34.993

我的 DIV 与我的表单字段（哎呀）命名相同，愚蠢的错误。谢谢大家看看。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T19:47:32.000

您绑定了`submit`事件，`#myForm`但它还不存在，因此您不会绑定任何东西。

您应该做的是使用以下[`on()`](http://api.jquery.com/on/)方法：

```
$(document).on('submit' , '#myForm', function() {
    alert($('#newField').val());
}); 
```

这会监听对`document`. 的提交调用`#myForm`。

**编辑**

这不是这个问题的情况，它实际上[似乎工作正常](http://jsfiddle.net/URwXk/)？

# javascript - 在输入元素验证时停止表单提交

> ID：11145627
> 
> 赞同：0
> 
> 时间：2012-06-21T19:44:30.483
> 
> 标签：javascript, validation, zip

我对 Javascript 做的不多。

我想做的是有一个表格，用户可以在其中输入他们的邮政编码，以查看他们是否在选定数量的邮政编码（客户的服务区域）内。

如果他们的邮政编码在列表中，我想将他们发送到一个 URL 以安排约会。如果它不在列表中，我想要某种警报，上面写着“抱歉，您的邮政编码不在我们的服务区域”。

我有一些适应这种工作的东西，但无论他们输入什么，都会将用户发送到页面。

任何帮助是极大的赞赏！

```
<form name = "myform" action="http://www.google.com/">
Enter Your Zip Code <input type = "text" name = "zip" size = "5" maxlength = "5" onchange = "checkZip()">
<button id="submit">Submit</button>
</form>

<script type = "text/javascript">
    function checkZip() {

        var z = document.myform.zip;
        var zv = z.value;
        if (!/^\d{5}$/.test(zv)) {
            alert("Please enter a valid Zip Code");
            document.myform.zip.value = "";
            myfield = z; // note myfield must be a global variable
            setTimeout('myfield.focus(); myfield.select();', 10); // to fix bug in
                                                                  // Firefox
            return false;
        }

        var codes = [ 12345, 12346, 12347, 12348, 12349, 12350 ]; // add as many
                                                                  // zip codes as
                                                                  // you like,
                                                                  // separated by
                                                                  // commas (no
                                                                  // comma at the
                                                                  // end)
        var found = false;
        for ( var i = 0; i < codes.length; i++) {
            if (zv == codes[i]) {
                found = true;
                break;
            }
        }

        if (!found) {
            alert("Sorry, the Zip Code " + zv + " is not covered by our business");
            document.myform.zip.value = "";
            return false;
        } else {
            alert("Press okay to go forward to schedule an appointment");
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:04:55.103

**非提交按钮（简单）解决方案**

```
<form name = "myform" action="http://www.google.com/">
    Enter Your Zip Code <input type = "text" name = "zip" size = "5" maxlength = "5">
    <button type="button" onclick="checkZip();" id="submit">Submit</button>
</form> 
```

*注意：带有 type="button" 的按钮是一个按钮，不提交[w3c](http://www.w3.org/TR/html401/interact/forms.html#adef-type-BUTTON)*

并将最后一个块更改`checkZip()`为：

```
if (!found) {
    alert("Sorry, the Zip Code " + zv + " is not covered by our business");
    document.myform.zip.value = "";
    //do nothing
} else {
    alert("Press okay to go forward to schedule an appointment");
    document.myform.submit();
} 
```

我所做的更改如下：

*   将 onclick 属性从 input 元素移动到提交按钮
*   将提交按钮更改为“按钮”类型，使其成为按钮。按钮不会自动提交当前表单。

*注意：这不会停止在输入元素内按 enter 提交表单的情况。根据下一个解决方案，您将需要一个 onSubmit="" 处理程序来处理该用例。*

**提交按钮（简单）解决方案**

```
<form name = "myform" action="http://www.google.com/" onsubmit="checkZip()">
    Enter Your Zip Code <input type = "text" name = "zip" size = "5" maxlength = "5">
    <button onclick="checkZip();" id="submit">Submit</button>
</form> 
```

*注意：没有类型的按钮默认是提交按钮[w3c](http://www.w3.org/TR/html401/interact/forms.html#adef-type-BUTTON)*

并将最后一个块更改`checkZip()`为：

```
if (!found) {
    alert("Sorry, the Zip Code " + zv + " is not covered by our business");
    return false;
} else {
    alert("Press okay to go forward to schedule an appointment");
    return true;
} 
```

我所做的更改如下：

*   将`checkZip()`调用移至表单上的 onsubmit 属性
*   更改`checkZip()`为返回真/假

**改变解决方案**

该解决方案最接近复制您的解决方案。然而，它增加了更多的复杂性：

表格：

```
<form name = "myform" action="http://www.google.com/" onsubmit="onFormSubmit();">
    Enter Your Zip Code
    <input type = "text" id="zipCode" name = "zip" size = "5" maxlength = "5" onchange = "onZipChange()">
    <button id="submit">Submit</button>
    <div id="invalidZipMsg" style="display:none;">
            Sorry, but we do not service your area.
    </div>
</form> 
```

JavaScript：

```
/**
 * Returns true if we receive a valid zip code.
 * False otherwise.
 * 
 * @param zipCode The zip code to check
 * @returns True/fase if valid/invalid
 */
function isValidZip(zipCode){
    var validZipCodes = {'12345':true, 
                         '12346':true, 
                         '12347':true, 
                         '12348':true, 
                         '12349':true, 
                         '12350':true
                        };

    //can do other checks here if you wish
    if(zipCode in validZipCodes){
        return true;
    } else {
        return false;
    };
}

/**
 * Run on invalid zip code.
 * Disables form submission button and shows
 * error message.
 */
function invalidZipCode(){
    var invalidZipMsg = document.getElementById('invalidZipMsg');
    invalidZipMsg.style.display = "block";

    var submitButton = document.getElementById('submit');
    submitButton.disabled = 'true';
}

/**
 * Run on valid zip code. Enables form
 * submission button and hides the error message.
 * @returns
 */
function validZipCode(){
    var invalidZipMsg = document.getElementById('invalidZipMsg');
    invalidZipMsg.style.display = "none";

    var submitButton = document.getElementById('submit');
    submitButton.disabled = 'true';
}

/**
 * onChange handlers for the zip code input element.
 * Will validate the input value and then disable/enable
 * the submit button as well as show an error message.
 * @returns
 */
function onZipChange(){
    var zipCode = document.getElementById('zipCode');
    if(isValidZipCode(zipCode.value)){
        validZipCode();
    } else{
        invalidZipCode();
    };
}

/**
 * Run on form submission. Further behavior is the same
 * as @see onZipChange. Will stop form submission on invalid
 * zip code.
 */
function onFormSubmit(){
    var zipCode = document.getElementById('zipCode');

    if(isValidZipCode(zipCode.value)){
        validZipCode();
        return true;
    } else{
        invalidZipCode();
        return false;
    };
} 
```

**笔记**

有很多方法可以解决这个问题。我只选择了两个最简单的，一个我觉得可以提供更好的用户体验。当您有不提交但提供不需要表单提交的其他操作的按钮时，非提交解决方案是一个很好的例子。在我看来，最后一个具有最好的用户体验，但这只是一种观点。

**无关**

如果您有时间，我建议您查看许多可用的优秀 JavaScript 库。它们通过有意义的简单解决方案帮助引入复杂/高级问题，并且很可能跨浏览器兼容。我按照我的偏好顺序推荐它们：

*   [带有 jQ​​uery UI 的 jQuery](http://jquery.com/)
*   带有 Scriptaculous 的[原型](http://www.prototypejs.org/)
*   [道场](http://dojotoolkit.org/)

但请注意，他们需要时间来理解。我知道在处理一个不是首要任务的项目时。

一般来说，开始使用 jQuery 和 JavaScript 的最快方法是：[First Flight](http://www.codeschool.com/courses/jquery-air-first-flight)。无论如何，我与 codeschool.com 没有关联，也没有从他们那里获得任何利润。这个示例是免费的，它是我的团队在工作中为刚开始使用 jQuery 的人们传递的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:59:39.007

我假设您的问题是即使邮政编码无效，用户仍然可以提交表单。

我建议将支票移动到这样的表单提交事件中

```
<form name = "myform" action="http://www.google.com/" onsubmit = "checkZip()">
  Enter Your Zip Code <input type = "text" name = "zip" size = "5" maxlength = "5">
  <button id="submit">Submit</button> 
</form> 
```

然后，当检查未能取消提交到 google.com 时，您可以返回 false

# iphone - ios - 获取 NSString 的一部分

> ID：11145631
> 
> 赞同：0
> 
> 时间：2012-06-21T19:45:00.477
> 
> 标签：iphone, ios, nsstring, substring

我已经看到[了这个问题](https://stackoverflow.com/questions/6440187/get-substring-from-nsstring)，它谈到了获取 NSString 的最后一部分。

我需要对此稍作改动。

在 http:// 之后如何获取所有内容

如果它几乎像 1 行代码一样简单，那就太好了:-)

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:50:43.903

```
NSString *str = @"http://www.abc.com/news/read/welcome-new-gig/03276";

str = [str stringByReplacingOccurrencesOfString:@"http://"
                                 withString:@""]; 
```

希望对你有帮助.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:51:39.410

`substringFromIndex:`. 你也应该做一些边界检查。另外，我建议在提问之前先查看文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:52:33.137

```
NSString *originalString = @"http://google.com";
NSString *substring = [originalString stringByReplacingOccurrencesOfString:@"http://" withString:@""]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:24:04.720

可能想要实际检查您是否在前面使用“http://”，而不是在每个实例中都替换它。这个怎么样：

```
if([[str substringToIndex:@"http://".length] isEqualToString:@"http://"])
    str = [str substringFromIndex:@"http://".length]; 
```

这会更健壮，实际上会确保它以“http://”开头，而不是替换它的每个实例。

# c# - 'XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)' 的最佳重载方法匹配有一些无效参数

> ID：11145636
> 
> 赞同：0
> 
> 时间：2012-06-21T19:45:11.707
> 
> 标签：c#, methods, arguments, bytearray

错误可以在代码下面找到！

基本代码：

```
XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint) 
```

我有什么**新**的：

```
 uint num1;
        uint num2;
        uint num4;

        num1 = Convert.ToUInt32(textBox2.Text);
        num2 = Convert.ToUInt32(textBox3.Text);
        num4 = Convert.ToUInt32(textBox5.Text);
        byte[] num3;
        num3 = BitConverter.GetBytes(Convert.ToInt32(textBox3.Text));

        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text"); //Or Console Name in "" 
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force); // this isn't always needed 
        IXboxDebugTarget.GetMemory(num1, num2, num3, out num4);

    } 
```

**错误**

1) 当前上下文中不存在名称“Encoding”

2) 'XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)' 的最佳重载方法匹配有一些无效参数

3) 参数 3：无法从 'byte' 转换为 'byte[]'

来源：

使用系统；使用 System.Windows.Forms；

命名空间 XDevkit { 公共部分类 Form1 : Form { 公共 Form1() { InitializeComponent(); }

```
 private void button1_Click(object sender, EventArgs e)
    {
        IXboxManager xbm = new XboxManager();
        //IXboxConsole xbc = xbm.OpenConsole(xbm.DefaultConsole); // dev 
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text");
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force);

    }

    private void button2_Click(object sender, EventArgs e)
    {
    uint num1 = Convert.ToUInt32(textBox2.Text);
    uint num2 = Convert.ToUInt32(textBox3.Text);
    byte[] num3 = Encoding.ASCII.GetBytes(textBox4.Text);
    uint num4 = Convert.ToUInt32(textBox5.Text);
    int num5 = Convert.ToInt32(textBox4.Text);

// ...

    if (num3.Length > 1) 
    {    
        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text");
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force);
        IXboxDebugTarget.GetMemory(num1, num2, num3, out num4);
}

    private void button3_Click(object sender, EventArgs e)
    {
        string a;
        a = "textBox6.Text";

        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole(textBox1.Text);
        IXboxConsole.ScreenShot(a)

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:53:34.667

由于 GetMemory 的第三个参数需要一个字节数组，而您的 num3 变量是一个字节数组，您应该将其传递为`num3`

至于当前上下文中不存在的编码，您可能只是缺少`using System.Text`

# python - SQLAlchemy：无法理解这种与复合键的 one2many 关系

> ID：11145639
> 
> 赞同：0
> 
> 时间：2012-06-21T19:45:19.793
> 
> 标签：python, join, orm, foreign-keys, sqlalchemy

我有一个像下面这样的 SQLAlchemy 模型，起初它不起作用（连接问题，然后期待一个标量而不是列表）。我在包含的版本中“修复”了它，但我真的不*明白*为什么它会这样。

起初我预计那些`ForeignKey`s`Sizes.items` `relationship()`不需要显式`primaryjoin`的，当我添加它时，SA 开始期待一个标量，我必须显式指定`uselist=True`.

为什么这种关系不能自动检测到这些事情中的一个或两个？

```
class Category(Base):
    __tablename__ = 'categories'
    pk   = Column(String(6), primary_key=True)

class Item(Base):
    __tablename__ = 'items'
    pk          = Column(String(6), primary_key=True)
    category_pk = Column(String(6), ForeignKey('categories.pk') )
    size        = Column(Integer(), nullable=False)
    category    = relationship('Category', backref=backref('items'))

class Sizes(Base):
    __tablename__ = 'sizes'
    category_pk = Column(String(6), ForeignKey('categories.pk'),
                    ForeignKey('items.category_pk'), primary_key=True )
    size        = Column(Integer(), ForeignKey('items.size'), primary_key=True )
    category    = relationship('Category', backref=backref('sizes'))
    items       = relationship('Item',
        uselist=True,
        primaryjoin="and_(Sizes.category_pk==Item.category_pk, Sizes.size==Item.size)" ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:26:03.960

我相信正在发生的事情是您有两个外键，而不是两列上的单个 FK。它的工作原理与 primary_key=True 有点不同，您可以在其中执行此操作。

尝试类似：

```
class Category(Base):
    __tablename__ = 'categories'
    pk   = Column(String(6), primary_key=True)

class Item(Base):
    __tablename__ = 'items'
    pk          = Column(String(6), primary_key=True)
    category_pk = Column(String(6), ForeignKey('categories.pk') )
    size        = Column(Integer(), nullable=False)
    category    = relationship('Category', backref=backref('items'))

class Sizes(Base):
    __tablename__ = 'sizes'
    category_pk = Column(String(6), primary_key=True )
    size        = Column(Integer(), primary_key=True )
    category    = relationship('Category', backref=backref('sizes'))
    items       = relationship('Item')

    __table_args__ = (
        ForeignKeyConstraint(
            ["category_pk", "size"],
            ["items.category_pk", "items.size"]
        ),
    ) 
```

# php - Mysql按数组查询使用的数据FIND_IN_SET

> ID：11145642
> 
> 赞同：-4
> 
> 时间：2012-06-21T19:45:20.960
> 
> 标签：php, mysql

表是

```
 CREATE TABLE `news` (
  `id` bigint(20) NOT NULL auto_increment,
  `title` varchar(255) default NULL,
  `tagkey` text NOT NULL,
  PRIMARY KEY  (`id`)
) ;

INSERT INTO `news` VALUES (1, 'TITLE1','3D');
INSERT INTO `news` VALUES (2, 'TITLE2 ','cat');
INSERT INTO `news` VALUES (3, 'TITLE2','BOOKs,3D');
INSERT INTO `news` VALUES (4, 'TITLE1','3D,DOG');
INSERT INTO `news` VALUES (5, 'TITLE2 ','DOG');
INSERT INTO `news` VALUES (6, 'TITLE2','BOOKs,DOG');
INSERT INTO `news` VALUES (7, 'TITLE1','Wolf,DOG');
INSERT INTO `news` VALUES (8, 'TITLE2 ','cat,DOG');
INSERT INTO `news` VALUES (9, 'TITLE2','BOOKs,cat'); 
```

如何查询'猫'，书。使用了这个查询。但无法搜索正确的数据。

```
 select * FROM news WHERE tagkey IN ('book','cat')      
    $list = array('cat','DOG');
    $list = array_map('apply_quotes', $list);
    $query = "select * FROM news 
    WHERE tagkey IN (" . join(',', $list) . ") AND id <> $id"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:58:07.567

我将大胆猜测您正在寻找查询某物在哪里[`LIKE`](http://www.tutorialspoint.com/mysql/mysql-like-clause.htm)

```
SELECT * 
FROM news 
WHERE tagkey LIKE '%cat%' OR tagkey LIKE '%book%' 
```

**但是您应该认真考虑规范化您的数据库，而不是在一列中存储一个列表。**

或者正如马克在评论中建议的那样[FIND_IN_SET(str,strlist)](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

请参阅[SQL Fiddle 进行演示](http://sqlfiddle.com/#!2/9ebc9/4)

```
SELECT * 
FROM news  
WHERE FIND_IN_SET('book', tagkey)
  OR FIND_IN_SET('cat', tagkey) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:24:35.790

我最好的答案是不要那样做，有很多“为什么”，其中一些：

*   你失去了性能、依赖性、可伸缩性、原子性、隔离性、一致性，除此之外，还有一些简单的查询会让它变得更复杂，结论你做错了，，但是你能做什么？

我会建议你根据基数创建一个关系表，并将不同行中的项目分开，创建索引，瞧！

请查看此链接，这将有助于您将来提高技能。

*   [http://hackmysql.com/case2](http://hackmysql.com/case2)
*   [http://www.umsl.edu/~sauterv/analysis/er/er_intro.html](http://www.umsl.edu/~sauterv/analysis/er/er_intro.html)
*   [http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)

# android - 在没有 OutOfMemoryError 或缩小比例的情况下旋转 Android 中的图像

> ID：11145650
> 
> 赞同：6
> 
> 时间：2012-06-21T19:45:47.867
> 
> 标签：android, bitmap, rotation, out-of-memory

基本上我正在尝试在 Android 应用程序中旋转位图（来自图像）。我想这样做的原因是从相机（通过意图）拍摄的照片即使是垂直拍摄的也会水平显示，并且方向作为图像上的元数据保留。如果有错误请纠正我。然而，问题是，如果在带有相当好的相机的手机上拍摄图像，加载时会占用大量内存，而且我还没有找到一种方法来旋转和保存它而不会有出现 OutOfMemoryError 的风险. 下面的代码是我的地方：

1.  加载图像
2.  检查是否需要旋转
3.  加载缩小版本以在 ImageView 中显示
4.  必要时旋转小图像
5.  在一个单独的线程中；加载，旋转和保存图像，因此以后不需要

应用程序将图像保持在分辨率中很重要，但欢迎使用任何编码技巧。我已经在互联网上搜索了几天，除了我已经实施的之外找不到任何东西。这里有关于这个主题的另一个线程，但似乎没有任何解决方案。希望你能帮忙。

```
 public Bitmap getBitmap(final Context c) {
    if (bitmap != null)
        return bitmap;

    final int rotate = necessaryRotation(c, file);
    // if(rotate != 0) rotateImageFile(c, rotate);

    try {
        // Get scaled version
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file, options);
        options.inSampleSize = calcInSampleSize(options, 1024, 1024);
        options.inJustDecodeBounds = false;
        bitmap = BitmapFactory.decodeFile(file, options);

        // rotate?
        bitmap = rotateImage(c,bitmap,rotate);

        System.out.println("Bitmap loaded from file: size="
                + bitmap.getWidth() + "," + bitmap.getHeight());

        System.gc();
    } catch (Exception e) {
        System.err.println("Unable to load image file: "
                + this.getFilename());
    }

    // if rotation is needed, do it in worker thread for next time
    if(rotate != 0){
        Thread t = new Thread(new Runnable(){

            public void run() {
                // load entire image
                try{
                    File imageFile = new File(getFilename());
                    Bitmap huge = Media.getBitmap(c.getContentResolver(),
                    Uri.fromFile(imageFile));

                    huge = rotateImage(c,huge,rotate);

                    // save bitmap properly
                    FileOutputStream out = new FileOutputStream(imageFile);
                    huge.compress(Bitmap.CompressFormat.PNG, 100, out);

                    out.flush();
                    out.close();
                    huge.recycle();
                    huge = null;
                    out = null;
                    System.gc();

                }catch(IOException e){
                    e.printStackTrace();
                }
            }

        });
        t.start();
    }

    return bitmap;
}

private Bitmap rotateImage(Context c, Bitmap bitmap, int rotate) {
    if (rotate != 0) {
        // rotate
        Matrix m = new Matrix();
        m.postRotate(rotate);
        Bitmap rotImage = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                bitmap.getHeight(), m, true);
        bitmap.recycle();

        System.out.println("Image (id=" + getId()
                + ") rotated successfully");

        System.gc();

        return rotImage;
    }
    return bitmap;
}

private int necessaryRotation(Context c, String imageFile) {
    int rotate = 0;
    ExifInterface exif;
    try {
        exif = new ExifInterface(imageFile);
        int orientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        switch (orientation) {
        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return rotate;
}

private int calcInSampleSize(BitmapFactory.Options options, int reqWidth,
        int reqHeight) {
    int height = options.outHeight;
    int width = options.outWidth;
    int inSampleSize = 1;
    while (height > reqHeight || width > reqWidth) {
        height /= 2;
        width /= 2;
        inSampleSize *= 2;
    }

    return inSampleSize;
} 
```

如果您需要了解任何内容或进行任何优化，我可以用来减少内存使用量，请写信:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:24:09.550

试试这个片段：

```
private Bitmap rotateImage(Context c, Bitmap bitmap, int rotate) {
    ....

    // reduce byte per pixel
    bitmap = bitmap.copy(Bitmap.Config.RGB_565, false);

    Bitmap.createBitmap(bitmap,...
} 
```

# android - MediaPlayer.getDuration() 返回错误的持续时间

> ID：11145652
> 
> 赞同：3
> 
> 时间：2012-06-21T19:45:54.690
> 
> 标签：android, progress-bar, media-player, android-mediaplayer

MediaPlayer 的`getDuration()`方法为某些音频文件提供了不正确的值。我认为所有这些文件的共同特征是它们是使用 Audacity 或其他一些音频编辑工具进行操作的。当试图将 MediaPlayer 进度与进度条联系起来时，这是一个问题。

我继续记录它：

```
while(mPlayer.isPlaying())
    Log.i("progress/total", 
            mPlayer.getCurrentPosition() + 
            "/" + mPlayer.getDuration()); 
```

发现了这个：

```
I/progress/total(643): 14615/14620
I/progress/total(643): 14647/14620 
```

这只是数千行的两个日志行，但关键是在进度经过 getDuration() 认为是歌曲的总持续时间之后，它只会继续。因为 MediaPlayer 实际上可以给出正确的总持续时间，有没有办法使用它来为我的 ProgressBar 获得适当的最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:46:19.000

当 MediaPlayer.getDuration() 为 mp3 文件返回 542434 毫秒（带有 ICS 4.0.3 的 HTC Desire C）时，我遇到了类似的问题。文件本身是 89 秒左右，差异太大。我检查了 mp3 文件内容并看到了一些奇怪的 xml，例如：

```
<?xpacket begin="п»ї" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 4.2.2-c063 53.351735, 2008/07/22-18:04:26        "> 
```

将此文件保存为新文件后，删除了 xml 并且 getDuration() 返回了正确的值。我知道它不会帮助那些需要播放您无法修改的文件的人，但对于那些可以 - 它应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T06:00:33.823

前段时间我尝试播放演示播放器，当我在 Android 模拟器中进行测试时，它的行为与您在问题中提到的相同，但是当我在某些真实设备中尝试时，它给了我准确的媒体持续时间值。

如果您的意图只是播放与 seekbar 同步的媒体，那么您可以执行以下操作，

```
if (!mediaPlayer.isPlaying())
mediaPlayer.start();

handler.post(new SeekbarRefresh(seekbar));

//Class to update progress of seekbar according to music player 
private class SeekbarRefresh implements Runnable {
    SeekBar seekBar;

    public SeekbarRefresh(SeekBar seekBar, ImageView imageView) {
        this.seekBar = seekBar;
    }

    @Override
    public void run() {

        if (mediaPlayer != null) {
            if (mediaPlayer.getDuration() > 0) {
                int currentDuration = mediaPlayer.getCurrentPosition();
                seekBar.setProgress(currentDuration);
                if (mediaPlayer.isPlaying()){
                    handler.post(this);
                    isAudioPlaying = true;
                     }
                else {
                    handler.removeCallbacks(this);
                    isAudioPlaying = false;
                }
            }
        }
    }
}

    seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {

            mediaPlayer.seekTo(progress);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T15:34:29.760

我遇到过类似的情况。就我而言，to 之间的时间差`mPlayer.getDuration()`约为`mPlayer.getCurrentPosition()`80 秒。

在阅读了有关该主题的几篇文章后，我使用第三方软件将`mp3`'s sample rate 从转换`22,000 kHz`为`44,100 kHz`. 转换后，`getDuration()`和的结果`getCurrentPosition()`几乎相同（0.0012s 常数误差）。

这是使用的测试：

```
dur = mp.getDuration();
Log.d("dur", dur + " <- getDuration");
mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {
        // finish current activity
       Log.d("dur", mp.getCurrentPosition() + " <- getCurrentPostion");

    }
}); 
```

# label - 在长标签文本中换行

> ID：11145656
> 
> 赞同：3
> 
> 时间：2012-06-21T19:46:34.440
> 
> 标签：label, google-apps-script

有什么技巧可以破坏**标签**文本吗？因为 '\n' '\r' '\n\r' 不起作用。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:11:33.653

如果你使用这[两个参数](https://developers.google.com/apps-script/class_label#setWordWrap)，你会做你想做的事，不是吗？

```
app.createLabel(text).setWidth(width).setWordWrap(true) 
```

这是一个示例（在其他小部件中;-)：

```
function showurl() {
  var app = UiApp.createApplication();
  app.setTitle("Anchor in a popup ;-)");
  var panel = app.createFlowPanel()
  var image = app.createImage('https://sites.google.com/site/appsscriptexperiments/home/photo.jpg').setPixelSize(50, 50)
  var link = app.createAnchor('This is your link', 'https://sites.google.com/site/appsscriptexperiments/home');
  var lab = app.createLabel("wrap it because it's too narrow").setWidth(90).setWordWrap(true);
  var quit = app.createButton('quit');
  panel.add(image).add(link).add(lab).add(quit);
  app.add(panel);
   var doc = SpreadsheetApp.getActive();
  doc.show(app);
} 
```

编辑：我发现了一篇[旧帖子](http://productforums.google.com/forum/#!searchin/apps-script/break%2420line%2420toast/apps-script/AaUea3SRPto/DnoRr6sR4xsJ)（在 Google 论坛上，再次感谢 Henrique ;-) 关于在 toast 消息中换行的问题，这是我用于该案例的代码......该原则也适用于标签，但我没有不要尝试。要使用它，只需在包含文本的变量中使用 \n （您想要换行的位置）并将其传递给此函数。（脚本中有一些注释可以解释）

```
function break_(msg){
var temp = escape(msg);// shows codes of all chars
msg = unescape(temp.replace(/%20/g,"%A0")); // replace spaces by non break spaces
temp = msg.replace("\n"," "); // and replace the 'newline' by a normal space
  return temp; // send back the result
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:30:59.360

像这样的东西会起作用吗？

```
//takes a line of text and returns a flex table broken by \n

function breakLabel(text) {
  var app = UiApp.getActiveApplication();
  var flexTable = app.createFlexTable();

  text = text.split('\n'); // split into an array 

  for (var i=0; i<text.length; i++){
    flexTable.setWidget(i, 0, app.createLabel(text[i].toString()));
  }

  return flexTable;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:12:39.767

将它们添加到垂直面板也有帮助（不是您想要的方式，但仍然......）：

```
var vPanel = app.createVerticalPanel().setSize(100,100);
var label = app.createLabel('predominantly blabla blala blabla');
app.add(vPanel.add(label)); 
```

见[参考](https://vaadin.com/book/-/page/components.label.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T21:24:21.120

对于刚刚遇到此问题的任何人，最好的解决方案似乎是为任何需要换行的内容创建 HTML 输出。

[文档](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet#showuserinterface)

```
 var htmlApp = HtmlService
     .createHtmlOutput('<p>A change of speed, a change of style...</p>')
     .setSandboxMode(HtmlService.SandboxMode.IFRAME)
     .setTitle('My HtmlService Application')
     .setWidth(250)
     .setHeight(300);

 SpreadsheetApp.getActiveSpreadsheet().show(htmlApp);

 // The script resumes execution immediately after showing the dialog. 
```

# android - 尝试将远程图像加载到 ImageView，但没有任何反应

> ID：11145659
> 
> 赞同：0
> 
> 时间：2012-06-21T19:46:47.300
> 
> 标签：android, image, imageview

我正在使用以下函数将远程图像加载到 ImageView。该图像肯定存在于我试图从中加载它的 URL 中，但是当我调用该函数并尝试显示图像时，ImageView 保持空白。

```
public static void setImage(ImageView view, String url) throws IOException {
    final URLConnection conn = new URL(url).openConnection();
    conn.connect();
    final InputStream is = conn.getInputStream();

    final BufferedInputStream bis = new BufferedInputStream(is, 100000);

    final Bitmap bm = BitmapFactory.decodeStream(bis);
    bis.close();
    is.close();

    view.setImageBitmap(bm);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:01:09.450

它可能是使用[https://github.com/kaeppler/ignition](https://github.com/kaeppler/ignition)的一个选项，试试 RemoteImageView，它很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:12:56.697

试试这个

```
private void setImage(String urlStr, ImageView iv) throws ClientProtocolException, IOException {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpGet request = new HttpGet(urlStr);
    HttpResponse response = httpClient.execute(request);
    InputStream is = response.getEntity().getContent();
    TypedValue typedValue = new TypedValue();
    typedValue.density = TypedValue.DENSITY_NONE;
    Drawable drawable = Drawable.createFromResourceStream(null, typedValue, is, "src");
    iv.setImageDrawable(drawable);
} 
```

注意：它是同步加载的。如果它有效，你的下一步应该加载到一个线程中，而不是阻塞主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:23:45.573

我使用[Prime](https://github.com/DHuckaby/Prime)来加载所有图像。它可以轻松处理这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:24:56.560

这对我有用：

```
 Bitmap bitmap = null;

    HttpGet httpRequest = null;

    try {
            URL url = new URL(your_url);
            httpRequest = new HttpGet(url.toURI());

            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

            HttpEntity entity = response.getEntity();
            BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity); 
            InputStream instream = bufHttpEntity.getContent();
            bitmap = BitmapFactory.decodeStream(instream);
    } catch (URISyntaxException e) {
            e.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
    } 
```

# plot - 围绕许多不同半径的点画一个圆

> ID：11145664
> 
> 赞同：0
> 
> 时间：2012-06-21T19:47:01.643
> 
> 标签：plot, gnuplot, geometry

我可以使用类似流动的命令围绕给定点 (x,y) 画一个圆（例如，点位于 (X=5,Y=7) 并且圆的半径 R=2.73）：

```
set object 1 circle at 5,7 size first 2.73 fc rgb "navy" 
```

现在，如果我有很多点（在 txt 文件中，每行都是“x y”）并且我想在每个点周围绘制一个具有不同指定半径的圆。我是否应该为每个点 i 重复命令“设置对象 i 在 Xi,Yi 大小第一 Ri fc rgb “navy””？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:07:39.843

看起来您可能想要使用该`with circles`选项。如果您有一个包含三列（xy 半径）的数据文件，则以下命令将在文件中的每个点绘制带有半径的圆：

```
 plot 'datafile' u 1:2:3 with circles 
```

[http://gnuplot.sourceforge.net/demo/circles.html](http://gnuplot.sourceforge.net/demo/circles.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T06:41:41.823

您可以在 gnuplot 中为多个圆圈创建一个循环。

```
do for[k=1:20]{
   set object k circle front at k*3,0 size 1 fillcolor rgb "black" lw 1  
} 
```

这将在半径为 1 的 x 点 (3,6,9...) 处创建 20 个圆。请记住也使用循环变量（“对象 k”）设置对象计数。

# asp.net - 从 ASP.Net 自定义控件中获取客户价值

> ID：11145666
> 
> 赞同：0
> 
> 时间：2012-06-21T19:47:09.600
> 
> 标签：asp.net, svg, custom-controls, request.form

我在获取控件以将其值从浏览器传递回我的服务器时遇到问题。本质上，我需要的是一个 LiteralControl，它可以被推送到页面上，通过一些 JavaScript 进行修改，然后将其全部内容传回。

我在做什么：我正在使用 SVG 图像。我需要将任何预初始化值（显示元素/内容）发送到浏览器。然后用户可以通过 JavaScript 与图像进行交互。每当他们提交表单时，我都需要取回新的/修改后的图像。

我制作了一个输出 SVG 元素的自定义控件，并允许您设置自定义宽度、高度和视图框属性。它有一个您可以为其提供内容的样式元素，以及一个您也可以为其提供一些内容的脚本元素。我已经为应该在浏览器上修改的所有属性设置了一个 ScriptDescriptor。我构建了一个 SvgImage.prototype 和一个 SvgImage.descriptors JavaScript 类，并在 JavaScript 中注册了我的命名空间和类。我的 JavaScript 都在浏览器中，但是控件没有添加到返回的 Request.Form 元素中。

有没有办法在不创建隐藏字段并将内容转储到其中的情况下将控件添加到 Request.Form 元素中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:05:05.297

正如我在评论中提到的，我不知道任何允许您执行此操作的本机 ASP.NET 控件。

发布回服务器的所有表单信息都必须（据我所知）包含在`<input>`控件中。（我相信您知道，ASP.NET 只能使用普通浏览器提供的标准表单处理。）

因此，我认为您正在考虑在回发发生之前将 SVG 信息转移到隐藏控件（不可见`<textarea>`/`<asp:TextBox TextMode="Multiline"/>`最有意义）中。

另一种选择可能是使用 AJAX，但如果您只想要回发时的信息，您可能会遇到时间问题......所以我看不出它有多大用处（但只是提到它作为一个选项）。

# dynamics-crm-2011 - Dynamics CRM 2011 LinkEntities 左加入问题

> ID：11145671
> 
> 赞同：1
> 
> 时间：2012-06-21T19:47:24.220
> 
> 标签：dynamics-crm-2011

如何向链接实体添加过滤条件（例如本例中的电子邮件）？向链接条件添加了过滤条件，这给了我重复的行。

等效的 sql 查询应如下所示。

```
select distinct OpportunityId
from Opportunity o 
   left join Email e on e.RegardingObjectId = o.OpportunityId 
   where o.StateCode = 1 and o.StatusCode = 3 
     and e.RegardingObjectId is null 
```

但是`QueryExpression`班级正在按照以下方式进行。

```
select distinct opportunityid 
from Opportunity o 
  left join Email e 
    on e.RegardingObjectId = o.OpportunityId 
    and e.RegardingObjectId is null
    where o.StateCode = 1 and o.StatusCode = 3 
```

编码：

```
ClientCredentials Credentials = new ClientCredentials();
Credentials.Windows.ClientCredential 
  = System.Net.CredentialCache.DefaultNetworkCredentials;

Uri OrganizationUri = ""
Uri HomeRealmUri = null;
OrganizationServiceProxy orgService 
  = new OrganizationServiceProxy(OrganizationUri, HomeRealmUri, Credentials, null);
IOrganizationService _service = (IOrganizationService)orgService;

QueryExpression query = new QueryExpression();
query.Distinct = true;
query.EntityName = "opportunity";
query.ColumnSet = new ColumnSet(true);

FilterExpression filter1 = new FilterExpression();
filter1.FilterOperator = LogicalOperator.And;
filter1.AddCondition("statuscode", ConditionOperator.Equal,3);
filter1.AddCondition("statecode", ConditionOperator.Equal, 1);
query.Criteria = filter1;

LinkEntity linkEntity1 = new LinkEntity();
linkEntity1.JoinOperator = JoinOperator.LeftOuter;
linkEntity1.LinkFromEntityName = "opportunity";
LinkEntity1.LinkFromAttributeName = "opportunityid";
linkEntity1.LinkToEntityName = "email";
linkEntity1.LinkToAttributeName = "regardingobjectid";

query.LinkEntities.Add(linkEntity1);

FilterExpression filter2 = new FilterExpression(); 
```

在这种情况下，问题就在这里。我可以在查询上使用过滤器，`LinkCriteria`但不能在查询上使用，因为它是链接实体。

```
filter2.AddCondition("regardingobjectid", ConditionOperator.Null);
query.LinkEntities[0].LinkCriteria = filter2;

EntityCollection result = _service.RetrieveMultiple(query);

Console.WriteLine(result.Entities.Count());
Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:03:55.837

我不确定发布的查询是否是您要查找的内容...

如果是，那么您应该能够删除过滤器 2 并添加到过滤器 1

```
filter1.AddCondition("opportunityid", ConditionOperator.Null); 
```

但是，将有关ObjectId 与 NULL 和 OpportunityID 与 AND 操作进行比较不应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T19:20:42.800

我在为链接实体添加条件时遇到了类似的问题。我发现我可以使用 dynamics 2013 sdk 来做到这一点，但是你必须看看你是否可以使用 2013 sdk 来对抗 2011 的动态。请参阅[Microsoft Dynamics Crm Sdk - 此查询是否可行？](https://stackoverflow.com/questions/22272604/microsoft-dynamics-crm-sdk-is-this-query-possible/22277675#22277675)

与 2013 SDK 的基本区别是您可以向过滤器添加一个条件，但给它一个用于链接实体的实体名称。这意味着您实际上并未将条件添加到链接实体本身。

我还在该链接中展示了如何使用 Linq 提供程序编写查询，这是您可能想要尝试的另一种选择。

# android - 如何从相机意图中获取图片的路径

> ID：11145673
> 
> 赞同：2
> 
> 时间：2012-06-21T19:47:27.117
> 
> 标签：android, path, camera

我只想用我的相机拍一张照片-（那个功能）

为了进一步使用它，我需要路径是意图保存了图片。但我不想告诉意图它应该把文件放在哪里。（因为现在它只是自动创建文件。

这是启动相机的功能

```
public void doCam() {
    Intent i = new Intent("android.media.action.IMAGE_CAPTURE");
    // startActivityForResult(intent,0);

    try {
        startActivityForResult(i, TAKEPICTURE_ACTIVITY);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(this, "Application not available",
                Toast.LENGTH_SHORT).show();
    }
    // Log.e(TAG, "Error in taking picture");
} 
```

这是结果的获取，我想在字符串地址中找到带有图片名称的路径

我已经找到了不同的解决方案，但是所有涉及在拍照之前选择文件名 -> 所以应用程序决定了图片的命名方式。

```
 public void onActivityResult(int requestCode, int resultCode, Intent intent) {

    if (requestCode == TAKEPICTURE_ACTIVITY) {

        // super.onActivityResult(requestCode, resultCode, intent);
        if (resultCode == RESULT_OK) {

            Bundle extras = intent.getExtras();
            Bitmap bitmap = (Bitmap) extras.get("data");
            //doesn't work
            String address= (String) extras.get("EXTRA_OUTPUT"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:50:58.760

路径应该在`intent.getData()`try it 中找到。如果你没有它，那么你应该考虑强制相机将视频保存在自定义位置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-22T06:24:48.040

这是获取最近捕获图像的路径的方法：

```
 try{
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
    } catch(Exception e){
        e.printStackTrace();
    } 
```

在 onActivityResult() 方法中：

```
 String path=null;
            try{
                Bitmap thumbnail = (Bitmap) data.getExtras().get("data"); 
                path=getLastImagePath();
            } catch(Exception e){
            } 
```

# android - 从通知中停止后台服务

> ID：11145679
> 
> 赞同：6
> 
> 时间：2012-06-21T19:47:50.290
> 
> 标签：android

我有一个后台服务，我想在其中显示一个允许用户停止它的通知。

在 android SDK 文档中，它说一个活动用于正常启动一个活动。所以我想知道我是否需要创建一个活动来停止服务，或者当用户选择通知时我可以直接停止服务，

那么打算如何回调服务以停止它..

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T19:58:54.560

> 所以我想知道我是否需要创建一个活动来停止服务，或者当用户选择通知时我可以直接停止服务，

您不能直接从`Notification`. 您可以使用具有操作字符串或额外内容或服务看到并触发它调用的东西来*启动*服务。`Intent``onStartCommand()``stopSelf()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-11T10:56:34.420

这个问题已经很老了，但是由于仍然没有代码解决方案，所以我只是分享我的代码作为解决问题的示例：

> 您不能直接从通知中停止服务。您可以使用具有操作字符串或额外内容的 Intent 或服务在 onStartCommand() 中看到的内容来启动服务，并触发它调用 stopSelf()。

这是正确的解决方案，所以让我们跳入代码（此代码都在您的 ExampleService 类中）：

```
@RequiresApi(Build.VERSION_CODES.O)
private void startForegroundService() {
    // create PendingIntend to open MainActivity (this is when the notification gets clicked) //
    Intent tabIntent = new Intent(this, MainActivity.class);
    tabIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    PendingIntent tabPendingIntent = PendingIntent.getActivity(this, 0, tabIntent, 0);

    // create PendingIntend to open ExampleService (this is when the notification BUTTON gets clicked) //
    Intent closeIntent = new Intent(this, ExampleService.class);
    closeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    closeIntent.putExtra("destroyCode", 666); // this is the important line //
    PendingIntent closePendingIntent = PendingIntent.getService(this, 0, closeIntent, 0);

    createNotificationChannel(); // this is only the default code to create notification channel. I just outsourced? it // 
```

现在 Intent 有了额外的数据（“破坏代码”-> 666）。请注意，我们创建了 2 个 pendingIntent：closePendingIntent（停止服务）和 tabPendingIntent（启动 Activity）

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, flags, startId);
    // get extras to know if Intent has destroyCode (666)
    Bundle extras = intent.getExtras();
    if (extras == null) {  
         // extras is null which means there is no destroyCode (666)
         exampleMethod();

    } else {
        // Intent has destroyCode (666) -> Intent comes from notification -> stop the service and close notification

        stopSelf();          
    }
    return START_STICKY;
} 
```

现在我们有代码来检查是否有destroyCode。最后一步是使用按钮创建通知：

```
// set attributes for notification //
            final NotificationCompat.Builder builder = new NotificationCompat.Builder(this, "channelID_2");
            Notification notification = builder.setOngoing(true)
                    .setSmallIcon(R.drawable.example)
                    .setContentTitle(getText(R.string.notificationTitle))
                    .setContentText(getText(R.string.notificationText))
                    .setPriority(NotificationCompat.PRIORITY_HIGH)
                    .setCategory(NotificationCompat.CATEGORY_MESSAGE)
                    .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)
                    .setContentIntent(tabPendingIntent) //this is when notification is clicked which only opens ExampleActivity
                    .addAction(R.drawable.example, getString(R.string.notificationButtonText), closePendingIntent) // here is our closePendingIntent with the destroyCode .addAction is "the onClickListener for the notification button"//
                        .build();
                startForeground(2, notification); 
```

在 onCreate 你开始你的服务

```
 if (Build.VERSION.SDK_INT > Build.VERSION_CODES.O)
        startForegroundService();
    else
        startForeground(1, new Notification());

    // Toast Message that service has started
    Toast.makeText(this, R.string.serviceStarted, Toast.LENGTH_SHORT).show(); 
```

就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:53:51.947

您不能像那样从服务中启动 Acitivty。您可以做的是在 Service 中创建一个对 Activity 的回调，并让回调启动新的活动。但是拥有通知意味着您不必通过服务。单击通知时，您可以启动在提供给通知的 Intent 中指定的活动。这真的很简单。

请阅读有关通知的参考文档以获取示例。

# f# - 在 F# 中，如何 curry ParamArray 函数（如 sprintf）？

> ID：11145680
> 
> 赞同：7
> 
> 时间：2012-06-21T19:47:50.710
> 
> 标签：f#, printf, currying, paramarray

在 F# 中，如何对接受可变数量参数的函数进行柯里化？

我有这样的代码......（日志功能只是一个例子，确切的实现并不重要）

```
let log (msg : string) =
    printfn "%s" msg

log "Sample" 
```

它在整个代码中使用 sprintf 格式的字符串被调用，例如。

```
log (sprintf "Test %s took %d seconds" "foo" 2.345) 
```

我想在 log 函数中 curry sprintf 功能，所以它看起来像......

```
logger "Test %s took %d seconds" "foo" 2.345 
```

我试过类似的东西

```
let logger fmt ([<ParamArray>] args) =
    log (sprintf fmt args) 
```

但我无法弄清楚如何将 ParamArray 参数传递给 sprintf 调用。

这是如何在 F# 中完成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T19:53:40.520

```
let log (s : string) = ()
let logger fmt = Printf.kprintf log fmt

logger "%d %s" 10 "123"
logger "%d %s %b" 10 "123" true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T20:46:05.483

F#中 -like 函数的行为`printf`在某种程度上是特殊的。它们采用格式字符串，指定预期的参数是什么。您可以使用`Printf.kprintf`desco 所示的方法来定义您自己的采用格式字符串的函数，但您不能更改格式字符串的处理方式。

如果你想做类似 C# 的事情`params`（参数的数量是可变的，但不依赖于格式字符串），那么你可以`ParamArray`直接在成员上使用属性：

```
open System

type Foo = 
  static member Bar([<ParamArray>] arr:obj[]) =
    arr |> Seq.mapi (fun i v -> printfn "[%d]: %A" i v) 
```

然后您可以`Foo.Bar`使用任意数量的参数调用而无需格式字符串：

```
Foo.Bar("hello", 1, 3.14) 
```

这对于字符串格式化不太优雅，但在其他情况下可能很有用。不幸的是，它只适用于成员（而不适用于定义的函数`let`）

# java - 如何将具有Unicode编码的字符串转换为字母字符串

> ID：11145681
> 
> 赞同：90
> 
> 时间：2012-06-21T19:47:51.663
> 
> 标签：java, unicode, encoding

我有一个带有转义[Unicode](http://en.wikipedia.org/wiki/Unicode)字符的字符串`\uXXXX`，我想将它转换为常规的 Unicode 字母。例如：

```
"\u0048\u0065\u006C\u006C\u006F World" 
```

应该成为

```
"Hello World" 
```

我知道当我打印它已经显示的第一个字符串时`Hello world`。我的问题是我从文件中读取文件名，然后搜索它们。文件中的文件名使用 Unicode 编码进行转义，当我搜索文件时，我找不到它们，因为它会搜索`\uXXXX`名称中包含的文件。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-16T21:29:21.613

[Apache Commons Lang](http://www.mvnrepository.com/artifact/commons-lang/commons-lang/2.6) StringEscapeUtils.unescapeJava **()**可以正确解码。

```
import org.apache.commons.lang.StringEscapeUtils;

@Test
public void testUnescapeJava() {
    String sJava="\\u0048\\u0065\\u006C\\u006C\\u006F";
    System.out.println("StringEscapeUtils.unescapeJava(sJava):\n" + StringEscapeUtils.unescapeJava(sJava));
}

 output:
 StringEscapeUtils.unescapeJava(sJava):
 Hello 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-21T20:01:19.513

技术上做：

```
String myString = "\u0048\u0065\u006C\u006C\u006F World"; 
```

自动将其转换为`"Hello World"`，因此我假设您正在从某个文件中读取字符串。为了将其转换为“Hello”，您必须将文本解析为单独的 unicode 数字，（获取`\uXXXX`并获取`XXXX`）然后`Integer.ParseInt(XXXX, 16)`获取十六进制值，然后`char`获取实际字符。

**编辑：一些代码来完成这个：**

```
String str = myString.split(" ")[0];
str = str.replace("\\","");
String[] arr = str.split("u");
String text = "";
for(int i = 1; i < arr.length; i++){
    int hexVal = Integer.parseInt(arr[i], 16);
    text += (char)hexVal;
}
// Text will now have Hello 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-06-20T14:27:52.383

您可以使用`StringEscapeUtils`Apache [Commons Lang](https://mvnrepository.com/artifact/org.apache.commons/commons-lang3)，即：

```
String Title = StringEscapeUtils.unescapeJava("\\u0048\\u0065\\u006C\\u006C\\u006F"); 
```

* * *

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-18T22:12:39.630

这种简单的方法适用于大多数情况，但会遇到像“u005Cu005C”这样的东西，它应该解码为字符串“\u0048”，但实际上会解码“H”，因为第一遍产生“\u0048”作为工作字符串然后由while循环再次处理。

```
static final String decode(final String in)
{
    String working = in;
    int index;
    index = working.indexOf("\\u");
    while(index > -1)
    {
        int length = working.length();
        if(index > (length-6))break;
        int numStart = index + 2;
        int numFinish = numStart + 4;
        String substring = working.substring(numStart, numFinish);
        int number = Integer.parseInt(substring,16);
        String stringStart = working.substring(0, index);
        String stringEnd   = working.substring(numFinish);
        working = stringStart + ((char)number) + stringEnd;
        index = working.indexOf("\\u");
    }
    return working;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-01-14T12:41:49.330

较短的版本：

```
public static String unescapeJava(String escaped) {
    if(escaped.indexOf("\\u")==-1)
        return escaped;

    String processed="";

    int position=escaped.indexOf("\\u");
    while(position!=-1) {
        if(position!=0)
            processed+=escaped.substring(0,position);
        String token=escaped.substring(position+2,position+6);
        escaped=escaped.substring(position+6);
        processed+=(char)Integer.parseInt(token,16);
        position=escaped.indexOf("\\u");
    }
    processed+=escaped;

    return processed;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-17T01:55:00.510

org.apache.commons.lang3 库中的 StringEscapeUtils 自3.6 起[已弃用](http://commons.apache.org/proper/commons-lang/javadocs/api-3.6/index.html)。

因此，您可以改用他们的新[commons-text](http://commons.apache.org/proper/commons-text/)库：

```
compile 'org.apache.commons:commons-text:1.9'

OR

<dependency>
   <groupId>org.apache.commons</groupId>
   <artifactId>commons-text</artifactId>
   <version>1.9</version>
</dependency> 
```

示例代码：

```
org.apache.commons.text.StringEscapeUtils.unescapeJava(escapedString); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-21T19:57:13.457

你的问题并不完全清楚，但我假设你说你有一个文件，该文件的每一行都是一个文件名。每个文件名都是这样的：

```
\u0048\u0065\u006C\u006C\u006F 
```

换句话说，文件名文件中的字符是`\`, `u`, `0`, `0`, `4`,`8`等等。

如果是这样，您所看到的就是预期的。Java 仅`\uXXXX`在源代码中翻译字符串文字中的序列（以及在读取存储`Properties`对象时）。当您阅读您归档的内容时，您将看到一个由字符`\`、`u`、`0`、`0`、等组成的字符串`4`，`8`而**不是**字符串`Hello`。

因此，您需要解析该字符串以提取`0048`、`0065`等片段，然后将它们转换为`char`s 并从这些`char`s 中创建一个字符串，然后将该字符串传递给打开文件的例程。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-14T09:50:08.903

有关建议使用 The Apache Commons Lang's: [StringEscapeUtils.unescapeJava()](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html#unescapeJava-java.lang.String-)的答案的更新- 它已被弃用，

> **已弃用。** 从 3.6 开始，请改用 commons-text StringEscapeUtils

替代品是**Apache Commons Text**的[StringEscapeUtils.unescapeJava()](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html#unescapeJava-java.lang.String-)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-18T16:42:24.363

只是想贡献我的版本，使用正则表达式：

```
private static final String UNICODE_REGEX = "\\\\u([0-9a-f]{4})";
private static final Pattern UNICODE_PATTERN = Pattern.compile(UNICODE_REGEX);
...
String message = "\u0048\u0065\u006C\u006C\u006F World";
Matcher matcher = UNICODE_PATTERN.matcher(message);
StringBuffer decodedMessage = new StringBuffer();
while (matcher.find()) {
  matcher.appendReplacement(
      decodedMessage, String.valueOf((char) Integer.parseInt(matcher.group(1), 16)));
}
matcher.appendTail(decodedMessage);
System.out.println(decodedMessage.toString()); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-16T02:05:03.900

我写了一个高性能且防错的解决方案：

```
public static final String decode(final String in) {
    int p1 = in.indexOf("\\u");
    if (p1 < 0)
        return in;
    StringBuilder sb = new StringBuilder();
    while (true) {
        int p2 = p1 + 6;
        if (p2 > in.length()) {
            sb.append(in.subSequence(p1, in.length()));
            break;
        }
        try {
            int c = Integer.parseInt(in.substring(p1 + 2, p1 + 6), 16);
            sb.append((char) c);
            p1 += 6;
        } catch (Exception e) {
            sb.append(in.subSequence(p1, p1 + 2));
            p1 += 2;
        }
        int p0 = in.indexOf("\\u", p1);
        if (p0 < 0) {
            sb.append(in.subSequence(p1, in.length()));
            break;
        } else {
            sb.append(in.subSequence(p1, p0));
            p1 = p0;
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-09-04T18:43:01.817

对于 Java 9+，您可以使用[Matcher](https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html)类的新[replaceAll](https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#replaceAll-java.util.function.Function-)方法。

```
private static final Pattern UNICODE_PATTERN = Pattern.compile("\\\\u([0-9A-Fa-f]{4})");

public static String unescapeUnicode(String unescaped) {
    return UNICODE_PATTERN.matcher(unescaped).replaceAll(r -> String.valueOf((char) Integer.parseInt(r.group(1), 16)));
}

public static void main(String[] args) {
    String originalMessage = "\\u0048\\u0065\\u006C\\u006C\\u006F World";
    String unescapedMessage = unescapeUnicode(originalMessage);
    System.out.println(unescapedMessage);
} 
```

[我相信StringEscapeUtils与](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html)[unescapeJava](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html#unescapeJava(java.lang.String))相比，这种方法的主要优势（除了不使用额外的库）是您只能转换 unicode 字符（如果您愿意），因为后者会转换所有转义的 Java 字符（如 \n 或 \t ）。如果您更喜欢转换所有转义字符，则该库确实是最佳选择。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-09-17T08:32:01.297

使用**Kotlin ，您可以为***String*编写自己的扩展函数

 *```
fun String.unescapeUnicode() = replace("\\\\u([0-9A-Fa-f]{4})".toRegex()) {
    String(Character.toChars(it.groupValues[1].toInt(radix = 16)))
} 
```

进而

```
fun main() {
    val originalString = "\\u0048\\u0065\\u006C\\u006C\\u006F World"
    println(originalString.unescapeUnicode())
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-28T21:03:17.597

尝试

```
private static final Charset UTF_8 = Charset.forName("UTF-8");
private String forceUtf8Coding(String input) {return new String(input.getBytes(UTF_8), UTF_8))} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-21T21:12:21.723

我知道使用 JsonObject 的一种简单方法：

```
try {
    JSONObject json = new JSONObject();
    json.put("string", myString);
    String converted = json.getString("string");

} catch (JSONException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-09-14T01:27:33.357

这是我的解决方案...

```
 String decodedName = JwtJson.substring(startOfName, endOfName);

                StringBuilder builtName = new StringBuilder();

                int i = 0;

                while ( i < decodedName.length() )
                {
                    if ( decodedName.substring(i).startsWith("\\u"))
                    {
                        i=i+2;
                        builtName.append(Character.toChars(Integer.parseInt(decodedName.substring(i,i+4), 16)));
                        i=i+4;
                    }
                    else
                    {
                        builtName.append(decodedName.charAt(i));
                        i = i+1;
                    }
                }; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-12-18T12:57:56.130

快速地

```
 fun unicodeDecode(unicode: String): String {
        val stringBuffer = StringBuilder()
        var i = 0
        while (i < unicode.length) {
            if (i + 1 < unicode.length)
                if (unicode[i].toString() + unicode[i + 1].toString() == "\\u") {
                    val symbol = unicode.substring(i + 2, i + 6)
                    val c = Integer.parseInt(symbol, 16)
                    stringBuffer.append(c.toChar())
                    i += 5
                } else stringBuffer.append(unicode[i])
            i++
        }
        return stringBuffer.toString()
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-22T11:22:38.187

实际上，我编写了一个包含一些实用程序的开源库。其中之一是将 Unicode 序列转换为字符串，反之亦然。我发现它非常有用。这是关于这个库关于 Unicode 转换器的文章的引用：

> StringUnicodeEncoderDecoder 类具有可以将字符串（任何语言）转换为 Unicode 字符序列的方法，反之亦然。例如，字符串“Hello World”将被转换为
> 
> "\u0048\u0065\u006c\u006c\u006f\u0020 \u0057\u006f\u0072\u006c\u0064"
> 
> 并且可以恢复。

这是整篇文章的链接，它解释了库有哪些实用程序以及如何让库使用它。它可以作为 Maven 工件或从 Github 获得。这是非常容易使用。[具有堆栈跟踪过滤、Silent String 解析 Unicode 转换器和版本比较的开源 Java 库](https://www.linkedin.com/pulse/open-source-java-library-some-useful-utilities-michael-gantman)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-09-14T11:01:28.997

@NominSim 可能还有其他字符，所以我应该按长度检测它。

```
private String forceUtf8Coding(String str) {
    str = str.replace("\\","");
    String[] arr = str.split("u");
    StringBuilder text = new StringBuilder();
    for(int i = 1; i < arr.length; i++){
        String a = arr[i];
        String b = "";
        if (arr[i].length() > 4){
            a = arr[i].substring(0, 4);
            b = arr[i].substring(4);
        }
        int hexVal = Integer.parseInt(a, 16);
        text.append((char) hexVal).append(b);
    }
    return text.toString();
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-04T19:48:58.547

`UnicodeUnescaper`从`org.apache.commons:commons-text`也可以接受。

`new UnicodeUnescaper().translate("\u0048\u0065\u006C\u006C\u006F World")` 返回`"Hello World"`

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-03-04T17:02:01.347

**Kotlin 的解决方案：**

```
val sourceContent = File("test.txt").readText(Charset.forName("windows-1251"))
val result = String(sourceContent.toByteArray()) 
```

Kotlin 在任何地方都使用 UTF-8 作为默认编码。

方法`toByteArray()`具有默认参数 - `Charsets.UTF_8`。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-07-10T16:22:41.797

实现此目的的另一种方法是使用[**`chars()`**](https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#chars())Java 9 引入的方法，这可用于迭代字符，确保映射到[代理代码点](https://docs.oracle.com/javase/10/docs/api/java/lang/Character.html#unicode)的任何字符都未经解释地传递。这可以用作：-

```
String myString = "\u0048\u0065\u006C\u006C\u006F World";
myString.chars().forEach(a -> System.out.print((char)a));
// would print "Hello World" 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-01-21T08:14:01.790

我发现很多答案都没有解决“补充字符”的问题。这是支持它的正确方法。无第三方库，纯Java实现。

[http://www.oracle.com/us/technologies/java/supplementary-142654.html](http://www.oracle.com/us/technologies/java/supplementary-142654.html)

```
public static String fromUnicode(String unicode) {
    String str = unicode.replace("\\", "");
    String[] arr = str.split("u");
    StringBuffer text = new StringBuffer();
    for (int i = 1; i < arr.length; i++) {
        int hexVal = Integer.parseInt(arr[i], 16);
        text.append(Character.toChars(hexVal));
    }
    return text.toString();
}

public static String toUnicode(String text) {
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < text.length(); i++) {
        int codePoint = text.codePointAt(i);
        // Skip over the second char in a surrogate pair
        if (codePoint > 0xffff) {
            i++;
        }
        String hex = Integer.toHexString(codePoint);
        sb.append("\\u");
        for (int j = 0; j < 4 - hex.length(); j++) {
            sb.append("0");
        }
        sb.append(hex);
    }
    return sb.toString();
}

@Test
public void toUnicode() {
    System.out.println(toUnicode(""));
    System.out.println(toUnicode(""));
    System.out.println(toUnicode("Hello World"));
}
// output:
// \u1f60a
// \u1f970
// \u0048\u0065\u006c\u006c\u006f\u0020\u0057\u006f\u0072\u006c\u0064

@Test
public void fromUnicode() {
    System.out.println(fromUnicode("\\u1f60a"));
    System.out.println(fromUnicode("\\u1f970"));
    System.out.println(fromUnicode("\\u0048\\u0065\\u006c\\u006c\\u006f\\u0020\\u0057\\u006f\\u0072\\u006c\\u0064"));
}
// output:
// 
// 
// Hello World 
```*

# enterprise-library - CacheManager GetData 性能问题

> ID：11145682
> 
> 赞同：0
> 
> 时间：2012-06-21T19:48:05.647
> 
> 标签：enterprise-library

我们正在使用 Enterprise Library 5 和它在我们的 Web 应用程序中提供的 CacheManager。在我们开始对应用程序进行重负载测试之前，一切似乎都运行良好。

我们使用基于 ID 的密钥缓存数据库中的记录。我们并不是一直从缓存中请求一个项目，有时我们需要从缓存中获取项目列表。为此，我们有一个 LINQ 查询，它生成一个 Select(e => CacheManager.GetData(id_from_list)) 并从缓存中返回项目列表。大多数情况下，这工作正常，但在重负载时，GetData 方法成为瓶颈，因为缓存管理器对缓存的读取和写入操作都执行锁定。基本上一次只有一个线程可以从缓存中读取数据。

其他人是否遇到过同样的问题，您是否找到了解决此问题的方法？

**注意：**我们尝试实际缓存项目列表并根据列表中项目的 id 组合键。这实际上解决了问题，并且 cachemanager.getdata 不再是瓶颈......但是......显然这不是一个好的解决方案，因为我们可以在很多列表中的缓存中拥有数千次的每个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:39:31.697

您可以考虑调整 CacheManager 以使用读/写锁（我认为它更适合这种情况）而不是它现在使用的排他锁。

[http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)

基本上，当多个读取器线程需要同时访问数据时，读/写锁是合适的，并且只有发生写入才会导致传入的读取器阻塞。

然而，这些在负载下还有其他问题，例如写饥饿。根据读/写锁的实现，写入将始终等待所有读取首先完成 - 使用恒定的读取流，写入将永远没有机会发生。

# asp.net - Crystal Reports - 在报表输出中插入随机字符

> ID：11145684
> 
> 赞同：0
> 
> 时间：2012-06-21T19:48:10.070
> 
> 标签：asp.net, pdf, crystal-reports

Crystal Reports 似乎是在将字符随机添加到报表输出中。这太奇怪了，我几乎认为我们有病毒。

很长一段时间以来，我们一直在使用相同版本的 Crystal 报表运行这些相同的报表。没有人对报告进行更改并且数据库数据是正确的，但是报告上的输出现在似乎在文本之间和顶部随机插入了随机字符（通常是 t 和 i）。甚至像用户名这样简单的字段也会受到影响。

它只对 PDF 输出执行此操作。也发生在开发机器上。不仅限于服务器。它不会发生在 VS2010 中的集成 Crystal Reports 开发环境中。如果您在那里预览报告，它工作正常。

是否有人知道任何可能导致此行为的 Crystal Reports 问题？

附加信息：
- Crystal 报表 v 10.5.37
- 在 Windows Server 2008、IIS 7 和本地 Win7 开发机器上运行
- 所有机器都是 x64
- 通过 ASP.Net 4 内部网站请求
- 数据库服务器是 SQL Server 2008 R2

[**更新**]
我们已经解决了这个问题，虽然我们不知道真正的原因。

在我在下面发布的答案中，它提到了 Calibri 导致 PDF 输出出现问题。我们的报告都没有设置为在 Calibri 中输出，但确实如此。我们浏览了所有报告并将字体重新设置为 Arial，现在随机字母消失了。

仍然困扰我的是，这些报告在过去一年到昨天都运行良好。为什么突然决定现在发生？

如果我找到更多信息，我会更新这个问题。我们非常感谢那些花时间帮助诊断问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:09:51.303

我们可能已经找到了问题的可能答案。事实证明，Crystal Reports 不能很好地与系统上的其他 USP10.dll 配合使用。如果它抓错了，就会产生错误的文本输出，尤其是在使用 calibri 字体时。

[链接到 SAP 社区网站上的相关帖子](http://scn.sap.com/thread/1820610)

大卫希尔顿在页面底部附近的回复：

> 有几次提到与 usp10.dll 的冲突。我们需要一个非常具体的 usp10.dll 版本才能使我们的文本渲染正常工作。Microsoft Office 通常附带不同的 usp10.dll，可能会导致我们的产品出现问题。

我将其发布为答案，因为它可能对某些人有所帮助。如果事实证明它可以解决我们的问题，我会将其标记为答案。

# jquery - Jquery EasyUI 和 问题

> ID：11145692
> 
> 赞同：-1
> 
> 时间：2012-06-21T19:48:42.177
> 
> 标签：jquery, asp.net, c#-4.0, jquery-easyui

我正在尝试使用带有 C# 4.0 的 .NET 构建一个使用来自 JQuery EasyUI 的布局的站点。但是，每当我将站点包装在控件中时，布局就会完全搞砸并且无法正确显示。我想这与它呈现为实际表单标签的事实有关，并且正在运行的 Javascript 对其应用样式。我不确定如何解决这个问题，特别是因为我对 Javascript 的精通还不足以开始剖析框架的代码。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:14:13.080

哇非常感谢你们的帮助。

> 如果将两种互不兼容的技术混合在一起，就会出现这样的结果。

真的吗？那是你帮的？你真的在拖钓stackoverflow吗？找份工作。

无论如何，我从 body 标记中删除了 class 属性，将 form 标记放在它的正下方，并将类添加到其中。然后我必须使用 style 属性指定高度和宽度。

```
<body>
<form runat="server" class="easyui-layout" style="width: 600px; height: 400px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:53:10.177

我唯一能建议的是将 EasyUI 的工作/运行副本中的标记与您的 asp.net 包装版本的标记进行比较。您需要使用 Firebug 或其他体面的 html/css 检查器。

可以修改 EasyUI 的基本 CSS 以包含包装 .net 控件，但是听起来您正在经历一场激烈的战斗，并且可能无法使其正常工作。

# c# - 文本框.SelectionStart

> ID：11145695
> 
> 赞同：2
> 
> 时间：2012-06-21T19:49:03.663
> 
> 标签：c#, winforms, textbox, selection

我正在尝试将 SelectionStart 和 SelectionLength 属性用于文本框。它没有任何效果，但也没有错误。它实际上是后台工作程序 ProgressChanged 方法的一部分，但我已经在测试解决方案中单独尝试了 SelectionStart 和 SelectionLength 并且它是相同的......没有任何反应......

有任何想法吗？谢谢！！！

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e) 
{
    // Update the GUI as the music is playing
    textBox1.SelectionStart = ((int)e.UserState);
    textBox1.SelectionLength = (1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:08:28.930

你的代码对我来说很好用（我假设你的 BGW 已经启动并且你`ReportProgress`当然在打电话）。

我的猜测是您的代码也适用于您，但也许您的 TextBox 没有焦点，因此您*看不到*所选文本。

如果这是您的问题，请将 TextBox 的[`HideSelection`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.hideselection.aspx)设置为 false。这将允许 TextBox 的选定文本显示选定（突出显示），即使 TextBox 没有焦点。

您还可以查询 TextBox 的[SelectedText 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectedtext.aspx)以获取控件的选定文本，即使它没有显示为这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:55:35.153

确保如果您在创建对象的同一线程（GuiThread）上运行此代码。后台工作人员可能*与*创建文本框的线程不同。您可以通过在控件上调用 Invoke 来确保您使用的是 GuiThread（您可以使用“this”来引用它）。

所以..做类似的事情

this.Invoke()。

您需要向它传递一个委托，因此将您的文本框选择逻辑移动到一个单独的方法中，然后将该方法传递给 Invoke() 调用。

编辑：

您的代码可能看起来像这样：

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    this.Invoke(new Action<TextBox, int, int>(UpdateTextboxSelection), new object[] { textBox1, (int)e.UserState, 1 });
}

private void UpdateTextboxSelection(TextBox t, int start, int length)
{
    t.SelectionStart = start;
    t.SelectionLength = length;
    t.Focus(); // to make sure the box is in focus so that you see the selection
} 
```

编辑 2：注意，我实际上并没有尝试查看这是否有效，这只是一个常见问题，当我想知道为什么某些 UI 的东西没有做任何事情时，我一直有这个问题，我注意到我在不同的线程上运行，什么时候我开始使用它工作的 GUI 线程。

编辑3：我刚刚进行了测试。完成后，请确保在文本框上使用 Focus()。可能正在按您的意图设置文本选择，但您看不到它，因为框不在焦点上。

# java - Java 8 lambda 语法中的大括号何时是可选的？

> ID：11145696
> 
> 赞同：18
> 
> 时间：2012-06-21T19:49:17.013
> 
> 标签：java, lambda, java-8

我意识到 Java 8 lambda 实现可能会发生变化，但在 lambda build b39 中，我发现只有当 lambda 表达式返回非 void 类型时才能省略大括号。例如，这编译：

```
public class Collections8 {
        public static void main(String[] args) {
                Iterable<String> names = Arrays.asList("Alice", "Bob", "Charlie");
                names.filter(e -> e.length() > 4).forEach(e -> { System.out.println(e); });
        }
} 
```

但是像这样删除大括号：

```
names.filter(e -> e.length() > 4).forEach(e -> System.out.println(e)); 
```

给出错误

```
Collections8.java:6: error: method forEach in interface Iterable<T> cannot be applied to given types;
        names.filter(e -> e.length() > 4).forEach(e -> System.out.println(e));
                                         ^
  required: Block<? super String>
  found: lambda
  reason: incompatible return type void in lambda expression
  where T is a type-variable:
    T extends Object declared in interface Iterable 
```

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T20:10:44.397

当 lambda 主体是单个表达式或 void 方法调用时，您可以省略大括号。每个表达式的计算结果都是一个值，因此不能为空。

如果 lambda 的主体是语句块（例如，一系列计算后跟一个`return`语句），或者 lambda 没有值（即有`void`返回类型）并且不是单个 void 方法调用，则必须使用该块形式，需要括号。

在块式 lambda 中，如果一个值是`return`ed，那么所有可能的代码路径必须是`return`一个值或`throw`一个`Throwable`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-21T20:15:03.610

这只是在：EG（大部分）已经对语法做出了决定。

> 在考虑了许多替代方案后，我们决定基本上采用 C# 语法。我们可能仍会进一步考虑细节（例如，细箭头与粗箭头，特殊的 nilary 形式等），并且尚未就方法引用语法做出决定。
> 
> C# 语法是：
> 
> ```
> lambda = ArgList Arrow Body
> ArgList = Identifier
>            | "(" Identifier [ "," Identifier ]* ")"
>            | "(" Type Identifier [ "," Type Identifier ]* ")"
> Body = Expression
>            | "{" [ Statement ";" ]+ "}" 
> ```

表达式的计算结果是某种东西，Java 中不能有 void 表达式。这是一个声明，因此您需要`{}`围绕它。

[http://mail.openjdk.java.net/pipermail/lambda-dev/2011-September/003936.html](http://mail.openjdk.java.net/pipermail/lambda-dev/2011-September/003936.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T15:58:18.243

如果没有大括号，则 lambda 会自动返回 -> 运算符之后的一个表达式。
因此，当您有一个不返回任何内容的 lambda 时，您必须使用大括号

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-05T14:37:47.510

我已经尝试过您的代码，并且对于最新的 JRE 版本，我认为可以。

以下是我从 Oracle Java 文档中引用的内容。

> 在 lambda 表达式中，您必须将语句括在大括号 ( `{}`) 中。但是，您不必将 void 方法调用括在大括号中。
> 例如，以下是一个有效的 lambda 表达式：
> 
> ```
> email -> System.out.println(email) 
> ```

医生解释得很清楚。希望这可以解决您的问题。

参考资料：[https ://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)

# asp.net-mvc - ASP.NET MVC 3 中的模型元数据提供程序是否支持动态元数据？

> ID：11145707
> 
> 赞同：2
> 
> 时间：2012-06-21T19:50:05.733
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelmetadata, modelmetadataprovider

我正在尝试在 ASP.NET MVC 3 中实现一些自定义模型元数据。我不能使用数据注释属性，因为某些元数据可能会根据配置的值而改变，所以我需要一个解决方案，让我设置元数据每一个请求。我一直在阅读有关自定义模型元数据提供程序的信息，但我找不到任何有关支持动态元数据方案的信息。

MVC 框架是否缓存来自模型元数据提供程序的元数据，还是会在每个请求上调用 CreateMetadata 方法？自定义模型元数据提供程序是动态元数据的一个很好的解决方案，还是应该将它放在视图模型中？

**编辑**：这不一定是我正在谈论的验证元数据，所以我不是在寻找特定于验证的解决方案。它可能只是要被视图显示或使用的元数据（例如在 HTML 5 数据属性中）。

另一个示例可能是数据库驱动的字段标签。通常会使用 Display 属性的 Name 属性，但如果您想根据数据库中的值动态设置显示名称，这将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:45:05.073

您可以从中派生自定义提供程序，`DataAnnotationsModelMetadataProvider`以便继承所有基本行为。

是的，`CreateMetadata`每个请求都会调用，所以你可以做一些花哨的事情，比如去数据库并加载一些可能会及时改变的数据。

对于标签，我将实现使用 Db 作为标签源的自定义 ResourceProvider（基于当前文化/帐户等）示例在这里： http: [//www.codeproject.com/Articles/14190/ASP-NET-2- 0-自定义-SQL-Server-ResourceProvider](http://www.codeproject.com/Articles/14190/ASP-NET-2-0-Custom-SQL-Server-ResourceProvider)

# java - tomcat7-maven-plugin tomcat7:run java.lang.LinkageError 之前已为具有名称的不同类型启动加载

> ID：11145710
> 
> 赞同：6
> 
> 时间：2012-06-21T19:50:22.190
> 
> 标签：java, tomcat, maven, classpath, classloader

Windows Server 2008 R2, 64 Apache Maven 2.2.1 Java 版本：1.6.0_26 JAVA_HOME：C:\Program Files\Java\jdk1.6.0_26 Tomcat 7.0 用Java 1.6编译项目

我正在尝试使用 tomcat7-maven-plugin 使用 tomcat7:run 目标运行 tomcat 开发服务器。当我尝试访问服务器的 index.jsp 时，我收到：

```
HTTP Status 500 - java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/jasper/servlet/JasperLoader) previously initiated loading for a different type with name "javax/servlet/http/HttpServletRequest"

type Exception report

message java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/jasper/servlet/JasperLoader) previously initiated loading for a different type with name "javax/servlet/http/HttpServletRequest"

description The server encountered an internal error (java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/jasper/servlet/JasperLoader) previously initiated loading for a different type with name "javax/servlet/http/HttpServletRequest") that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/jasper/servlet/JasperLoader) previously initiated loading for a different type with name "javax/servlet/http/HttpServletRequest"
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:343)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/jasper/servlet/JasperLoader) previously initiated loading for a different type with name "javax/servlet/http/HttpServletRequest"
    java.lang.Class.getDeclaredMethods0(Native Method)
    java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    java.lang.Class.getDeclaredMethods(Class.java:1791)
    org.apache.catalina.util.Introspection.getDeclaredMethods(Introspection.java:108)
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:172)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我已成功使用 tomcat7:deploy 将相同的代码部署到本地 tomcat Windows 服务实例。当我访问服务器的本地实例时，没有错误。

我的代码通过这个 maven 依赖项依赖于 javax.servlet.http.HttpServlet：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

鉴于我得到的错误，我很确定这个依赖项存在类加载冲突。我无法弄清楚冲突的方式/原因/地点；即，冲突的罐子在哪里，以及当我尝试使用 tomcat7:run 运行时如何/为什么会发生这种情况，但当我使用本地 tomcat 实例运行“独立”时不会发生这种情况。

起居室：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.moring.gloak</groupId>
    <artifactId>gloak-registration</artifactId>
    <packaging>war</packaging>
    <version>1.0.0-SNAPSHOT</version>
    <name>gloak-registration Maven Webapp</name>

    <build>
        <finalName>gloak-registration</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0-SNAPSHOT</version>
                <configuration>
                    <server>local_tomcat</server>
                    <url>http://localhost:9280/manager/text</url>
                    <update>true</update>
                    <port>9280</port>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>people.apache.snapshots</id>
            <url>http://repository.apache.org/content/groups/snapshots-group/</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
    </dependencies>
</project> 
```

项目 web.xml

```
<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>

    <servlet>
        <servlet-name>registrationServlet</servlet-name>
        <servlet-class>com.moring.gloak.web.register.RegistrationServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>registrationServlet</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>

</web-app> 
```

来自 maven 目标目录的 tomcat web.xml webapp 声明：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0"> 
```

实际的servlet代码：

```
package com.moring.gloak.web.register;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public final class RegistrationServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.getRequestDispatcher("index.jsp").forward(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Map<String, String> messages = new HashMap<String, String>();
        request.setAttribute("messages", messages);

        // Get and validate name.
        String serviceName = request.getParameter("serviceName");
        if (serviceName == null || serviceName.trim().isEmpty()) {
            messages.put("name", "Please enter service name");
        } else if (!serviceName.matches("\\p{Alnum}+")) {
            messages.put("name", "Please enter alphanumeric characters only");
        }

        if (messages.isEmpty()) {
            messages.put("success", String.format("Service name is %s", serviceName));
        }

        request.getRequestDispatcher("index.jsp").forward(request, response);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T00:00:10.327

**Biju Kunjummen 在他对我原帖的评论中回答了这个问题。谢谢碧居昆竹门！请投票支持他的评论。**

我对自己问题的回答只是提供更多细节。

pom.xml 中的 servlet-api 依赖项需要“提供”范围。这是因为 Tomcat 已经提供（需要并使用自己）servlet-api 依赖项。Maven 的依赖作用域规则在这里定义：

[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)

更正后的 servlet-api 依赖 xml：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency> 
```

为什么当我将战争部署到本地 tomcat 实例时，以前的 xml 工作，而不是“在进程中”运行它（即，使用 tomcat7:run 目标）？对此我没有确切的答案。进程服务器运行器中的 maven 显然以不同于本地 tomcat 实例的方式加载依赖项。

我从中得出的结论是，即使我可能需要一个依赖项来编译一些代码，但我需要记住，如果我将该代码部署到某种容器中，我需要使用 maven 提供的范围来确保依赖项不会发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-17T10:54:18.440

对我来说，它就像。

```
 <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>provided</scope>
        </dependency> 
```

只需在依赖项中添加范围

# jpa - 使用 eclipselink 在 JPA 对象上进行 jaxb 编组期间的日期对话错误

> ID：11145711
> 
> 赞同：1
> 
> 时间：2012-06-21T19:50:22.580
> 
> 标签：jpa, jaxb, eclipselink

我在这个日期对话错误上停留了很长一段时间......我在 TomcatEE 环境下使用 eclipselinks、openJPA，并尝试使用 jaxb 进行编组。我遇到了编组一个 JPA 对象的问题，该对象包含 Date、TimeStamp 元素。异常消息是---

javax.xml.bind.MarshalException - 带有链接异常：[Exception [EclipseLink-3002]（Eclipse Persistence Services - 2.3.2.v20111125-r10461）：org.eclipse.persistence.exceptions.ConversionException 异常描述：对象 [3/ 19/12 12:00 AM]，属于 [class org.apache.openjpa.util.java$util$Date$proxy]，来自映射 [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[createTs-->createTs /text()]] 带有描述符 [XMLDescriptor(xxx.xxxx.xxx.xxxx.entities.ApplicationEntity --> [])]，无法转换为 [class java.util.Date]。]

奇怪的是 jaxb 转换对某些客户来说可以正常工作，但对其他客户则不行。我试图把@XmlElement(type=Date.class) 这个字段crtTs，它不起作用。

提前感谢您的帮助。

二

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:37:25.793

我已经能够重现您所看到的问题。您可以使用以下错误来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/383639](http://bugs.eclipse.org/383639)

* * *

**解决方法**

**日期适配器**

您可以使用`XmlAdapter`将有问题的日期转换为正确的`java.util.Date`.

```
package forum11145711;

import java.util.Date;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<Date, Date>{

    @Override
    public Date unmarshal(Date date) throws Exception {
        return date;
    }

    @Override
    public Date marshal(Date date) throws Exception {
        if(null == date) {
            return date;
        }
        return new Date(date.getTime());
    }

} 
```

**根**

`@XmlJavaTypeAdapter`注释用于利用`XmlAdapter`：

```
package forum11145711;

import java.util.Date;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
public class Root {

    private Date date;

    @XmlJavaTypeAdapter(DateAdapter.class)
    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

} 
```

**我的约会**

下面是`java.util.Date`我在这个例子中使用的子类。

```
package forum11145711;

import java.util.Date;

public class MyDate extends Date {

} 
```

**演示**

下面是一些演示代码，您可以使用它来证明一切正常：

```
package forum11145711;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.setDate(new MyDate());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <date>2012-06-27T10:39:49.081</date>
</root> 
```

# gdi+ - App Verifier Stop 0202：在 GdiPlusShutdown 期间释放包含活动临界区的堆块

> ID：11145714
> 
> 赞同：3
> 
> 时间：2012-06-21T19:50:27.227
> 
> 标签：gdi+, application-verifier

运行[Microsoft Application Verifier](http://www.microsoft.com/en-us/download/details.aspx?id=20028)`0202`时，我会在关机时收到错误消息：

```
VERIFIER STOP 00000202:
   pid 0x1160: Freeing heap block containing an active critical section. 
   11456F48 : Critical section address.
   047D05B4 : Critical section initialization stack trace.
   11456F40 : Heap block...(cut off) 
```

调用时会发生错误[`GdiplusShutdown`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534076%28v=vs.85%29.aspx)。

从应用程序验证器文档中：

> ## 释放包含活动临界区的堆块
> 
> **应用程序验证程序中断消息**
> 
> 释放包含活动临界区的堆块。大小为大小的内存位置包含一个活动锁。
> 
> **可能的原因**
> 
> 如果堆分配包含临界区、分配已释放且临界区尚未删除，则会生成此中断。
> 
> **Application Verifier 显示的信息**
> 
> *   Parameter1 - 临界区地址
> *   Parameter2 - 关键部分初始化堆栈跟踪
> *   Parameter3 - 堆块地址
> *   Parameter4 - 堆块大小
> *   描述 - 释放包含活动临界区的堆块
> 
> **附加信息**
> 
> 验证程序停止代码 0202。
> 
> 检查当前调用堆栈的内容。罪魁祸首通常是当前堆栈跟踪上 HeapFree 或 HeapDestroy 的调用者。
> 
> 此错误的频率很高。
> 
> 要调试此停止，请使用以下调试器命令：
> 
> *   `!cs –s parameter1`- 转储有关此关键部分的信息。
> *   `ln parameter1`– 在临界区地址附近显示符号。这应该有助于识别泄漏的关键部分。
> *   `dds parameter2`– 转储此临界区初始化的堆栈跟踪。
> 
> **parameter3**和**parameter4**可能有助于了解该堆块在哪里分配（分配的大小可能很重要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:50:27.927

几个月前我遇到了这个错误，我忘记了解决方案。

确保[`GdipDisposeImage`](http://msdn.microsoft.com/en-us/library/ms534041%28VS.85%29.aspx)在尝试关闭 GDI+ 之前释放所有 GDI+ 图像（例如 ）。

否则你会泄露一个关键部分，谁知道还有什么。当然不要在[GDI+ 已经关闭](https://stackoverflow.com/questions/3354136/access-violation-in-image-destructor)[*后*](https://stackoverflow.com/questions/3354136/access-violation-in-image-destructor)[尝试处理图像](https://stackoverflow.com/questions/3354136/access-violation-in-image-destructor)*。*

# wordpress - wordpress 是否适合具有 317k 页面浏览量 p/w 的网站

> ID：11145718
> 
> 赞同：2
> 
> 时间：2012-06-21T19:50:40.257
> 
> 标签：wordpress, web

我与当地一家报纸公司的老板会面。他们正计划有一个新设计的网站。他们当前的网站是静态的，没有任何类型的数据库。但他们的每周综合浏览量约为 317k。这个数字未来肯定会增加

问题是，如果我为他们创建一个 Wordpress 系统，该网站是否会使用新功能顺利运行（可能是新闻、画廊）。不需要使用很多插件。他们当前的服务器是否可以在不进行任何升级的情况下支持 wordpress 软件包。

或者我应该考虑使用 php 来设计网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:59:42.563

**是**的 - 只要机器足够，并且您正确配置它。

如果公司使用 CDN（如 akamai），请询问他们这件事是否可以搭载在他们的帐户上，然后在他们提出政治障碍时让他们无论如何都这样做。然后，然后停止出汗，打开keepalive并忽略这条线以下的任何内容。否则：

如果这是在 VPS 上，请确保它有保证的内存和 I/O 资源 - 否则将其托管在硬件机器上。如果您是偏执狂，那么具有 10k RPM 驱动器和 2-3 gigs 内存的东西就可以了（apache 和 mysql 的内存有喘息的空间和硬盘驱动器以进行意外的交换文件补偿。）

确保 317k/w 数字是准确的：

*   如果它来自 GA/Omniture/其他供应商跟踪套件，则将数字增加约 33-50%，以说明他们无法跟踪的机器人。
*   如果这个数字来自house stats/httpd 日志，假设它减少了 10-20%（因为机器人通常不会为样式表和图像找你。）
*   如果它来自分析师的综合报告，其工作是报告他们自己的流量表现，那就抓紧脑袋扔硬币吧。

**Apache：**美国的新闻网站在上午 11 点左右和下午 4 点左右的午餐时间和工作日结束流量突发，因此您可能需要关闭 Keepalive（打开它会在流量缓慢期间改善情况，但在突发时间机器会旋转到不可恢复的状态。）

**PHP：**确保在主机（APC 或 eAccelerator）上启用了某种操作码缓存。使用操作码缓存，内存占用显着下降，机器不必从交换文件（硬盘驱动器）借用太多。

**WP：**确保您使用 WP3.4，因为票[http://core.trac.wordpress.org/ticket/10964](http://core.trac.wordpress.org/ticket/10964)已关闭以支持此票的修复：[http ://core.trac.wordpress.org/ticket/ 18536](http://core.trac.wordpress.org/ticket/18536) . 这两个长期存在的问题都解决了大容量站点上的查询性能问题，但整体改进/修复也有助于其他任何地方。

其次，确保使用类似 WP Super Cache 缓存插件并进行适当配置。如果此站点上的内容量将永久变小，则您不必采取任何特殊预防措施 - 否则您可能需要更改插件/规则，以便将旧内容永久存档到静态文件中。没有理由以全部资源成本不断更新 2 年前的内容。

**Robots.txt**：准备并正确注册 google/bing/etc 的动态站点地图。如果您希望帖子会被不了解他们实际做什么的人不必要地添加一堆标签和类别，您可能需要Disallow`/page/*`和. 否则，当蜘蛛机器人蜂拥而至时，对于每个帖子，您都会被其拥有的标签/猫数量增加的数量所猛烈抨击。然后还有一些。`/category/*``/tag/*`

几年来，巴尔的摩太阳报直接在一台并置的机器上托管了他们的读者奖励、体育和编辑数据库项目。综合交通量是比你提到的要大的因素，但充分满足。

[这是一段在缓慢的时间里，httpd 状态 w/ keepalive](http://www.youtube.com/watch?v=NAHz4GRY0WM#t=09)的视频，大约 30 req./sec：http://www.youtube.com/watch?v=NAHz4GRY0WM#t=09

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:05:02.730

我不会仅根据每周<一百万的综合浏览量来排除该项目的 WordPress。我已经托管了 WordPress 网站，这些网站获得了更多的流量并且仍然非常实用。尽管基于您拥有的其他标准，WordPress 是否是此类项目的最佳解决方案完全取决于您。

祝你好运，编码愉快！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T02:50:33.763

WP 能够处理巨大的流量。查看使用 WP VIP 服务的人员列表：Time、DowJones、NBC Sprts、CNN 等等。

访问 WordPress VIP 网站：http: [//vip.wordpress.com/clients/](http://vip.wordpress.com/clients/)

# android - Eclipse 中的 Android 应用程序运行错误

> ID：11145721
> 
> 赞同：3
> 
> 时间：2012-06-21T19:50:48.800
> 
> 标签：android, eclipse

我似乎无法弄清楚我的 Eclipse IDE 出了什么问题。我一直在开发几个应用程序，我更新了我的 Android SDK 并更新了 Eclipse，现在我无法运行我的任何应用程序。每个应用程序（包括 API 演示，所以它不只是我的）都不会运行，并且 Eclipse 会说“您的项目包含错误，请在运行您的应用程序之前修复它们。”

我找不到此错误的原因，并且我的应用程序之前运行过，而这才刚刚开始。我认为更新 Android SDK 会有所帮助，但这仍然会在我尝试运行的任何应用程序上给我这个错误。请帮忙！我该怎么办？我见过的唯一错误是：

```
[2012-06-21 13:37:19 - ddmlib] Broken pipe
java.io.IOException: Broken pipe
    at sun.nio.ch.FileDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:69)
    at sun.nio.ch.IOUtil.write(IOUtil.java:40)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
    at com.android.ddmlib.Client.requestAllocationStatus(Client.java:421)
    at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:837)
    at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:805)
    at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:765)
    at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:652)
    at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:44)
    at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:580) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:12:30.890

谢谢你们的好建议，伙计们！但是，我解决了我的问题。我重新安装了 Eclipse，Android SDK，但仍然有问题。事实证明，我`debug.keystore`的已过期，我所要做的就是删除该文件，如下所述：我已经开发了几年[的 Eclipse Android 插件中的“调试证书已过期”错误](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-android-plugins)，但不可否认，我有几个系统在这里和那里重建，就在上周标志着我`debug.keystore`已经一岁多了。去搞清楚....

然后，由于我重新安装了 Eclipse，我遇到了这个问题：[http ://androidcodemonkey.blogspot.com/2011/10/how-to-solve-must-override-superclass.html](http://androidcodemonkey.blogspot.com/2011/10/how-to-solve-must-override-superclass.html)

我又重新站起来跑步了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:43:07.583

试试`Cleaning`你的项目。

自动检查`build`。

`Restart`蚀。

如果都不起作用，请使用`backup`所有项目以及`reinstall`Eclipse 和 SDK。没有别的去。

# php - wordpress 中的背景音乐，带有 ON 和 OFF 手动

> ID：11145726
> 
> 赞同：1
> 
> 时间：2012-06-21T19:51:10.747
> 
> 标签：php, javascript, wordpress

我需要在我的网站中有背景音乐，使用用户打开和关闭功能，我使用了 javascript，但问题是，当用户关闭音乐，然后重新加载页面时，音乐又开始了，有没有插件可用于完成此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:58:11.747

[Soundmanager](http://www.schillmania.com/projects/soundmanager2/)是您的朋友。

它易于配置安装，并且有许多选项。

它的工作方式类似于[此](http://www.truthabouttrees.org/)示例站点。

当你下载它时，它有一个很好的例子。首先尝试运行示例并检查最适合您要求的示例。

要记住的另一件重要的事情是这些 JS 文件中的路径。它使用的文件的路径名有点奇怪，所以如果你遇到错误，请注意路径名，你应该很高兴。:)

# scala - 向 Symbol 添加更新方法时遇到问题

> ID：11145728
> 
> 赞同：3
> 
> 时间：2012-06-21T19:51:24.030
> 
> 标签：scala

我正在尝试向 Symbol 类添加一个更新方法。

```
class SymbolUpdate(s: Symbol) {
    def update(i: Int) = s.name + i
}
implicit def toSymbolUpdate(s: Symbol) = new SymbolUpdate(s) 
```

但是当我运行代码时，我得到以下

```
scala> 's = 1
<console>:327: error: value update is not a member of object Symbol
              's = 1
              ^ 
```

但是当我直接调用该方法时它确实有效。

```
scala> 's.update(1)
res41: java.lang.String = s1 
```

或者，如果我明确放置一个空参数数组。

```
scala> 's() = 1
res42: java.lang.String = s1 
```

不确定我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:40:56.273

根据[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)：

> `f(args) = e`'=' 运算符左侧的函数应用程序的赋值被解释为`f.update(args, e)`，即调用由`update`定义的函数`f`。

如果您阅读[Scala 编程中](http://www.artima.com/shop/programming_in_scala)的相应部分，则尤其清楚：

> 类似地，当对已应用括号和一个或多个参数的变量进行赋值时，编译器会将其转换为更新方法的调用，该方法采用括号中的参数以及右侧的对象等号。

总之，我认为括号是必需的。

# javascript - 使用 innerhtml 更改 img 标签的图像

> ID：11145730
> 
> 赞同：0
> 
> 时间：2012-06-21T19:51:28.503
> 
> 标签：javascript, html

当我单击它时，我想使用 img 标签的 innerhtml 更改图像我的代码如下所示

```
tempData +='<td >';

        tempData +='<img src="'+frontImg+'" id='+ii+' onClick="flipImage(this.id);" />';//from where flipImage call
        tempData +='</td>'; 
```

它工作正常，但是当它从函数返回时它会改变图像，但我想在`flipImage`返回之前改变它

```
 function flipImage(m)
    {

        var jsonLen = jsonImages.images.length;
        var imgNumber = finalImageArray[m];
        for(jsn = 0;jsn <jsonLen ;jsn++)
        {
            if(jsonImages.images[jsn].imageKey== imgNumber)
            {
                realImage = jsonImages.images[jsn].imagePath;
                var element = document.getElementById(m);
//              var mg = '<img src="bool.jpg" />'; // change when this line execute what should i put here.?
                //element.innerHTML=mg; want like this.

                       //this is actual code but it change image after returning the function  so i don't want this.
                element.innerHTML=realImage;
            element.setAttribute('src',realImage);
            element.setAttribute('onclick', ''); 
                break;

            }
        }
    } 
```

所以我想在`flipImage`返回之前更改图像。这只是一个示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:02:39.573

您不能使用`innerHTML`for`<img />`标记，因为它们内部没有 HTML，它们是单例并且没有内部内容。

只是`imgElement.setAttribute('src', 'http://...');`用来改变图像。

# javascript - 如果 div 有类，则删除该类并将其添加到其父级

> ID：11145731
> 
> 赞同：0
> 
> 时间：2012-06-21T19:51:30.073
> 
> 标签：javascript, jquery, css

我有

```
<div class="image-mask">
    <img class="alignright" src="image.png" />
</div> 
```

我想使用 jQuery 将类从图像移动到父 div。

非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:53:07.957

这应该有效：

```
 $('.alignright').removeClass('alignright').parent().addClass('alignright'); 
```

# c++ - 微型 SSE addpd 循环比 AMD Phenom II 上的标量稍慢？

> ID：11145734
> 
> 赞同：4
> 
> 时间：2012-06-21T19:51:37.037
> 
> 标签：c++, c, gcc, assembly, sse

是的，我读到[SIMD 代码运行速度比标量代码慢](https://stackoverflow.com/questions/4394930/simd-code-runs-slower-than-scalar-code)。不，它不是真正的复制品。

我一直在使用 2D 数学的东西，并且在将我的代码库从 C 移植到 C++ 的过程中。我用 C 碰到了几堵墙，这意味着我真的需要多态性，但那是另一回事了。无论如何，我不久前考虑过这个问题，但它提供了使用 2D 矢量类的绝佳机会，包括常见数学运算的 SSE 实现。是的，我知道那里有库，但我想自己尝试一下以了解发生了什么，而且我不使用任何比`+=`.

我的实现是 via `<immintrin.h>`，带有

```
union {
    __m128d ss;
    struct {
        double x;
        double y;
    }
} 
```

SSE 似乎很慢，所以我查看了它生成的 ASM 输出。在修复了一些愚蠢的指针后，我最终得到了以下指令集，循环运行了十亿次：（处理器是 AMD Phenom II，频率为 3.7GHz）

启用 SSE：1.1 到 1.8 秒（可变）

```
add      $0x1, %eax
addpd    %xmm0, %xmm1
cmp      $0x3b9aca00, %eax
jne      4006c8 
```

SSE 禁用：1.0 秒（相当恒定）

```
add      $0x1, %eax
addsd    %xmm0, %xmm3
cmp      $0x3b9aca00, %eax
addsd    %xmm2, %xmm1
jne      400630 
```

我可以从中得出的唯一结论是，`addsd`它比 快`addpd`，并且流水线意味着额外的指令可以通过执行更多更快的部分重叠的事情的能力来补偿。

所以我的问题是：这值得吗，在实践中它真的有帮助吗，还是我不应该为愚蠢的优化而烦恼，让编译器在标量模式下处理它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T20:43:06.743

这需要更多的循环展开，并且可能需要缓存预取。您的算术密度非常低：2 个内存操作的 1 个操作，因此您需要在管道中尽可能多地堵塞这些操作。

也不要直接使用 union 而 __m128d 并使用 _mm_load_pd 从数据中填充 __m128。union 中的 _m128 生成错误代码，其中所有元素都在进行堆栈-寄存器-堆栈舞蹈，这是有害的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-24T12:21:02.367

仅作记录，[Agner Fog 的指令表](http://agner.org/optimize/)确认 K10 运行`addpd`并`addsd`具有相同的性能：FADD 单元为 1 m-op，具有 4 个周期延迟。早期的 K8 确实只有 64 位执行单元，并分为`addpd`两个 m-ops。

所以两个循环都有一个 4 循环循环携带的依赖链。标量循环有两个独立的 4c dep 链，但这仍然只使 FADD 单元占用一半时间（而不是 1/4）。

管道的其他部分必须发挥作用，可能是代码对齐或只是指令排序。AMD 对此比 Intel、IIRC 更敏感。我对阅读 K10 管道并弄清楚 Agner Fog 的文档中是否有解释感到好奇。

K10 不会将 cmp/jcc 融合到单个操作中，因此将它们拆分实际上不是问题。（推土机系列 CPU 可以，当然英特尔也可以）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:21:58.507

2D 数学不是处理器密集型（与 3D 数学相比），所以我非常怀疑是否值得花这么多时间。值得优化如果

1.  您的分析器说代码是热点。
2.  您的代码运行缓慢。（我想这是为了游戏？）
3.  您已经优化了高级算法。

我在我的设备（AMD APU @ 3GHz x 4；旧的 Intel CPU @ 1.8Ghz x 2）上进行了一些 SSE 测试，发现 SSE 在我测试过的大多数情况下都有好处。但是，这是针对 3D 操作，而不是 2D。

标量代码具有更多并行 iirc 的机会。使用四个寄存器而不是两个；更少的依赖。如果寄存器争用变得更大，矢量化代码可能会运行得更好。不过，对此持保留态度，我还没有对此进行测试。

# jquery - jQuery Toggle 打破带有媒体查询的布局

> ID：11145738
> 
> 赞同：0
> 
> 时间：2012-06-21T19:51:47.963
> 
> 标签：jquery, layout, toggle

不确定这是否有大问题。但是想知道为什么当网站被缩小并且菜单按钮被切换时，当你放大时，除了标题之外，整个布局都消失了。

你可以在这里看到：http: [//beta.revival.tv/](http://beta.revival.tv/)

如果你缩小网站，切换右上角的菜单并保持打开状态，然后再放大，除了标题之外，一切都消失了。

只是想确保这不是由于编写错误的代码。

这是处理切换的jQuery：

```
 //menu toggle     
 $("#social-wrap li:nth-child(6)").click(function(){
   $("#phone-nav").slideToggle("slow");
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:05:37.100

#phone-nav 导航元素的顶部边距为 -9999 像素。如果我将其更改为 0，则显示其余内容。所以，不知何故，这些元素被推离了屏幕，所以看起来好像它们已经消失了。

你需要找出是什么在改变那个margin-top并修复它。- 或明确设置#middle-wrap div 的位置以显示在屏幕上。

![在此处输入图像描述](../Images/5f9709e53d70f5b71ee274577fdad7d9.png)

# c++ - 使用双精度的 sprintf 语句出错（缓冲区溢出？）

> ID：11145746
> 
> 赞同：4
> 
> 时间：2012-06-21T19:52:21.317
> 
> 标签：c++, arrays, segmentation-fault, printf

我遇到错误 sprintf 语句。我添加了一个 printf 命令来帮助调查，似乎我的一个双打没有被理解（printf 输出一串无意义的数字，其中应该是 %3.1f。）但是，双打第一次被正确解释它在 printf 语句中调用。通过将大小名称从 120 增加到 320，段错误确实消失了。但是双精度仍然没有被正确解释，即它仍然输出一串无意义的数字，一个简单的 %3.1f 应该是。我无法弄清楚我做错了什么。有任何想法吗？代码的最小测试用例版本和下面发布的错误消息。

```
 #include <iostream>
    #include <string>
    #include <fstream>
    #include <sstream>
    #include <strstream>
    #include <vector>

    using namespace std;

    void Back_Subt_beta()
    {

        int resonances = 4;
        char name[320];
        double rpos[66];
        double rbinmin[66];
        double rbinmax[66];

        ifstream binedgein;
        binedgein.open("binedges.dat");
        if (binedgein.is_open()) {
            cout << "data file opens" << endl;
            }
        for (int vline=1; vline<=4; vline++)
        {
            binedgein >> var1 >> var2 >> var3;
            rpos[vline-1] = var1;
            rbinmin[vline-1] = var2;
            rbinmax[vline-1] = var3;
        }
        binedgein.close();

        for (int m=2; m<=7; m++)
        {
            for (int j=0; j<resonances; j++)
            {
                printf("resonance%0#7.2feV/gammas_%3.1feV_Mcl%i", rpos[j],rpos[j],m);
                sprintf(name,"resonance%0#7.2feV/gammas_%3.1feV_Mcl%i",rpos[j],rpos[j],m);
            }
        }
        exit();
    } 
```

和文件 binedges.dat

```
16.2      16.0      16.5
38.75     38.25     39.25
44.5      43.5      45.5
55.25     54.75     55.75 
```

和错误：

```
Processing Back_Subt_beta.C...
data file opens

 *** Break *** segmentation violation
resonance0016.20eV/gammas_917241681885348612676436160464141677586357964289319457240620564649334534999701390133785258335880600276911524435084428436805391368574132924760441246552362332456319675531264.0eV_Mcl16(no debugging symbols found)
Using host libthread_db library "/lib/tls/libthread_db.so.1".
Attaching to program: /proc/7689/exe, process 7689
[Thread debugging using libthread_db enabled]
[New Thread -1208284352 (LWP 7689)]
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.
(no debugging symbols found)...done.

0x006dd7a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
#1  0x014d3533 in __waitpid_nocancel () from /lib/tls/libc.so.6
#2  0x0147c869 in do_system () from /lib/tls/libc.so.6
#3  0x00962b8d in system () from /lib/tls/libpthread.so.0
#4  0x00bebc8e in TUnixSystem::Exec () from /usr/local/root/lib/libCore.so
#5  0x00be6dfb in TUnixSystem::StackTrace () from /usr/local/root/lib/libCore.so
#6  0x00be5c53 in TUnixSystem::DispatchSignals () from /usr/local/root/lib/libCore.so
#7  0x00bebf4d in SigHandler () from /usr/local/root/lib/libCore.so
#8  0x00be0590 in sighandler () from /usr/local/root/lib/libCore.so
#9  <signal handler called>
#10 0x014b1d0a in strcmp () from /lib/tls/libc.so.6
#11 0x003033be in G__searchvariable () from /usr/local/root/lib/libCint.so
#12 0x002f9514 in G__getvariable () from /usr/local/root/lib/libCint.so
#13 0x0021de97 in G__getitem () from /usr/local/root/lib/libCint.so
#14 0xbfeb89dc in ?? ()
#15 0x0021c633 in G__getexpr () from /usr/local/root/lib/libCint.so
#16 0x00000048 in ?? ()
#17 0x002e9bc8 in G__letvariable () from /usr/local/root/lib/libCint.so
#18 0xbfeb987c in ?? ()
Root > Function Back_Subt_beta() busy flag cleared 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:20:09.983

我认为您的问题是`char`数组`name`只有 120 个字节，但是您的`sprintf`语句溢出了该缓冲区。将缓冲区的大小`char`从 120 字节增加到更大的值。更好的是，使用`snprintf()`而不是`sprintf()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:59:29.773

我想知道那个数字是多少，所以我这样做了：

```
$ python
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> x = 917241681885348612676436160464141677586357964289319457240620564649334534999701390133785258335880600276911524435084428436805391368574132924760441246552362332456319675531264.0
>>> import struct
>>> struct.pack('<d', x)
'resonanc' 
```

所以最初的错误肯定是由你的字符串覆盖缓冲区引起的。如果您得到不同的垃圾值，请尝试查看实际位，也许您会弄清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:28:38.670

您正在溢出仅`name`是字符的 char 数组`120`。最好是使用`std::string namestr`，然后`str.c_str()`在填充的同时做`name`

# jquery - Jquery 自动完成组合框\类别 - 搜索 optgroup 标签

> ID：11145757
> 
> 赞同：0
> 
> 时间：2012-06-21T19:52:58.787
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

[有点建立在我之前在这里](https://stackoverflow.com/questions/11039814/jquery-ui-autocomplete-combobox-with-categories)问过的一个问题上

我正在使用 jquery ui 自动完成来创建一个自动完成表单。在您的帮助下，我成功地将它的组合框和类别选项组合在一起。现在经过思考，我正试图将其提升到另一个层次。

我想做的是能够让组合框也搜索 optgroup 标签以及选项文本。如果文本与 optgroup 标签匹配，则会显示整个类别，但它仍会搜索选项文本。

我猜编辑需要在下面的块中进行。

```
 response(select.find("option").map(function() {
                    var text = $(this).text();
                    if (this.value && (!request.term || matcher.test(text))) return {
                        label: text.replace(
                        new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"),
                        value: text,
                        option: this,
                        category: $(this).closest("optgroup").attr("label")
                    };              
                }).get()); 
```

[jsfiddle](http://jsfiddle.net/gB32r/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:48:24.527

您发现了代码的正确部分。这是一个在类别中看起来的修改版本：

```
response(select.find("option").map(function() {
    var text = $(this).text(),
        category = $(this).closest("optgroup").attr("label");
    if(this.value && (!request.term || matcher.test(text) || matcher.test(category))) return {
        label: text.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"),
        value: text,
        option: this,
        category: category.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>")
    };
}).get()); 
```

*   除了与选项文本（`matcher.test(text)`）匹配外，我还尝试与选项组标签匹配：`matcher.test(category)`。
*   我还添加了一个正则表达式替换来强调类别中的匹配文本。

（我无法在[更新您的 jsfiddle 示例](http://jsfiddle.net/gB32r/7/)时进行最后一次修改，但它对我正在处理的项目非常有用）

# asp.net-mvc - 使用asp webapi发布嵌套资源

> ID：11145762
> 
> 赞同：7
> 
> 时间：2012-06-21T19:53:14.357
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我正在使用 mvc webapi 创建一个 REST API 并努力寻找一个处理 POST 到嵌套资源的示例。

基本上，我想`POST`使用如下 URL 对博客文章发表评论：

`~/posts/2/comments`

我还希望能够发送 DELETE 和`PUTs`以下内容

`~/posts/2/comments/5`

我的路由注册应该是什么样的，我的方法签名应该是什么`PostsController`样的？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T04:30:40.043

对于嵌套资源，我建议您为要访问的控制器/操作创建非常具体的路由。

```
routes.MapHttpRoute(
    name: "Posts Routes",
    routeTemplate: "api/posts/{postId}/comments/{commentID}",
    defaults: new { controller = "Posts", action="CommentsForPosts" }
);

public HttpResponseMessage CommentsForPosts(int postId, int commentID) {
    //go to work
} 
```

嵌套资源的框架中没有约定，但路由让您可以灵活地映射您认为合适的控制器、方法和 URI

# r - 如何在 R 的 for 循环中使用 sum 函数？

> ID：11145763
> 
> 赞同：1
> 
> 时间：2012-06-21T19:53:15.493
> 
> 标签：r, for-loop, sum, integral

![在此处输入图像描述](../Images/c76cfb0699f20138fa771db9c3ea0d97.png)

我们要计算线性图中的积分值。为了更好地理解看照片。假设整体面积为1。我们想找出某个部分的值是多少。例如，如果所有内容均指月份并且 A 最大代表 24，我们想知道总体 100% 中有多少百分比位于第 10 个月和第 11 个月内。我们可以计算一个积分，然后应该能够通过以下方式获得搜索区域F(x) - F(x-1) 我想到了以下代码：

```
a <- 24
tab <-matrix(0,a,1)
tab <-cbind(seq(1,a),tab)
tab<-data.frame(tab)

#initialization for first point
tab[1,2] <- (2*tab[1,1] / a - tab[1,1]^2 / a^2)

#for loop for calculation of integral of each point - integral until to the area
for(i in 2:nrow(tab))
{tab[i,2] <- (2*tab[i,1] / a - tab[i,1]^2/ a^2) - sum(tab[1,2]:tab[i-1,2])}
#plotting
plot(tab[,2], type="l") 
```

如果你看到情节 - 它会令人困惑。任何想法如何正确处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:12:47.107

基本 R 函数`integrate()`可以为您执行此操作：

```
f <- function(x, A) 2/A - x / A^2

integrate(function(x)f(x, 24), lower=10, upper=11)

0.06510417 with absolute error < 7.2e-16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:24:08.157

直接使用公式：

```
a <- 24                          # number of divisions
x <- c(seq(1,a))                 # 
y <- x*2/a - x^2/a^2             # F(x)
z <- (x*2/a - x^2/a^2) - ((x-1)*2/a - (x-1)^2/a^2) # F(x) - F(x-1) 
```

然后进行绑定。

```
> sum(z)
[1] 1 
```

# android - 数组适配器返回 NullPointerException

> ID：11145769
> 
> 赞同：0
> 
> 时间：2012-06-21T19:53:49.987
> 
> 标签：android, android-layout

我只是想填充我的 ListView 但我得到一个 NullPointerException

这是代码

```
 String[] values = new String[] { "Reset Company", "Reset Demographic"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String(this,android.R.layout.simple_list_item_1, values);

    settingsOptions.setAdapter(adapter); 
```

LogCat 说这条线上有一个 NullPointException`settingsOptions.setAdapter(adapter);`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:55:22.100

您可以通过提供`settingsOptions`有效值而不是`null`.

您可能正在`findViewById`使用无效的*id*执行操作，或者在视图实际被放在那里之前`setContentView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:57:05.243

根据 T`he LogCat says there is a NullPointException on this line settingsOptions.setAdapter(adapter);`

它看起来 settingsOptions 是 null 那里。

# python - 如何在 XPath 中从同一个父节点计算 2 个不同的节点集（兄弟节点）？

> ID：11145784
> 
> 赞同：1
> 
> 时间：2012-06-21T19:54:56.273
> 
> 标签：python, xpath

如何使用 and 运算符“|” 计算 2 个节点集？换句话说，计算 2 个具有不同标签名称的兄弟姐妹的数据。在这种情况下：我想要来自 edition 和 edition2 标签的数据。我试过'| 它没有用。

**XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<wikimedia>
  <projects>
    <project name="Wikipedia" launch="2001-01-05">
      <editions>
        <edition language="English">en.wikipedia.org</edition>
        <edition language="German">de.wikipedia.org</edition>
        <edition language="French">fr.wikipedia.org</edition>
        <edition language="Polish">pl.wikipedia.org</edition>
        <edition language="Spanish">es.wikipedia.org</edition>
        <edition2 language="Spanglish">egs.wikipedia.org</edition2>
        <img src="hello.gif">hello</img>
      </editions>
    </project>
    <project name="Wiktionary" launch="2002-12-12">
      <editions>
        <edition language="English">en.wiktionary.org</edition>
        <edition language="French">fr.wiktionary.org</edition>
        <edition language="Vietnamese">vi.wiktionary.org</edition>
        <edition language="Turkish">tr.wiktionary.org</edition>
        <edition language="Spanish">es.wiktionary.org</edition>
        <edition2 language="Spanglish">egs.wiktionary.org</edition2>
        <img src="hello.gif">hello</img>
      </editions>
    </project>
  </projects>
</wikimedia> 
```

**Python ：**

```
>>> wikixml.xpath('//edition/text() | edition2/text()')
['en.wikipedia.org', 'de.wikipedia.org', 'fr.wikipedia.org', 'pl.wikipedia.org', 'es.wikipedia.org', 'en.wiktionary.org', 'fr.wiktionary.org', 'vi.wiktionary.org', 'tr.wiktionary.org', 'es.wiktionary.org'] 
```

## 编辑

我得到它的答案后工作，但我也想选择`img/@src` 我设法做到这一点使用联合运算符的值`|`

```
>>> wikixml.xpath('//edition/text() | //edition2/text() | //img/@src')
['en.wikipedia.org', 'de.wikipedia.org', 'fr.wikipedia.org', 'pl.wikipedia.org', 'es.wikipedia.org', 'egs.wikipedia.org', 'hello.gif', 'en.wiktionary.org', 'fr.wiktionary.org', 'vi.wiktionary.org', 'tr.wiktionary.org', 'es.wiktionary.org', 'egs.wiktionary.org', 'hello.gif'] 
```

如何使用单个谓词和`self`此处使用两个元素完成的符号来执行此操作

```
/wikimedia/projects/project/editions/ *[self::edition or self::edition2]/text() 
```

现在我们有了`@src`and `text()`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:03:17.117

采用

```
wikixml.xpath('//edition/text() | //edition2/text()') 
```

或更有效地

```
wikixml.xpath('//*[self::edition or self::edition2]/text()] 
```

甚至更好

```
wikixml.xpath('/wikimedia/projects/project/editions/*[self::edition or self::edition2]/text()] 
```

## 至于问题更新

> 我也想要img的@src。既然我们有了@src 和 text()，如何使用 self 表示法做到这一点？

老实说，我不知道是否有一种方法可以使用上述符号同时从元素轴和属性轴中进行选择。我对此表示怀疑。

您可以使用单个 XPath 来完成，但放弃 self::notation（至少对于属性）：

```
/wikimedia/projects/project/editions/ *[self::edition or self::edition2]
|
/wikimedia/projects/project/editions/img/@src 
```

或 select `edition`，`edition2`以及所有包含`src`属性的元素

```
/wikimedia/projects/project/editions/ *[self::edition or self::edition2 or attribute::src] 
```

然后处理结果以获取`src`

这与您在**XPath 1.0**中 所能做的差不多 根据 Dimitre Novatchev 的建议，**XPath 2.0**允许您这样编写：

```
/wikimedia/projects/project/editions/(*[self::edition or self::edition2] | img/@src ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:51:51.133

**使用**：

```
 /*/*/project/editions/*[not(self::img)]
|
   /*/*/project/editions/img/@src 
```

**或在 XPath 2.0 中使用**：

```
/*/*/project/editions
               /(*[not(self::img)] | img/@src) 
```

# jquery - 当我单击同一图像时，第二次不会发生 JQuery 动画

> ID：11145788
> 
> 赞同：1
> 
> 时间：2012-06-21T19:55:10.197
> 
> 标签：jquery, jquery-animate

现在的问题是，当我第一次单击图像时，动画会按照我想要的方式发生。但是，当我第二次单击同一图像时，它只是在 0 秒内放大了图像的大小，而没有动画过渡。

```
var tempHolders = new Array(); 
$(document).ready(function(){
    $('ul li img').each(                 
        function(){ $(this).click(function($e){                          
            $('#picturesboard').hide();                          
            $('#enlarge').show();                                     
            if( tempHolders[$(this).attr('src')]==null){
                  tempHolders[$(this).attr('src')] = $(this).clone();
            }                                                    
            (tempHolders[$(this).attr('src')]).animate({
                   width: '1000px'
               },1000);                         
            $('#imgholder').prepend(tempHolders[$(this).attr('src')]);
            backbutton.innerHTML='GO BACK';
            backbutton.onclick=function(){                              
                      $('#picturesboard').show();
                      $('#enlarge').hide();
                     // return false;
             };
        $('#menu').prepend(backbutton);                                          
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:08:36.933

如果我没有错，您需要在后退按钮功能中将属性的宽度设置为 0。您可以使用[.attr()轻松访问它](http://api.jquery.com/attr/)

# java - 如何消除 web.xml 中的硬编码值

> ID：11145796
> 
> 赞同：3
> 
> 时间：2012-06-21T19:55:43.870
> 
> 标签：java, maven

假设我的 web.xml 文件中有类似的内容。

```
<filter name="foo">
  <init-param>
    <param-name>fooBarUrl</param-name>
    <param-value>http://foo.bar.com</param-value>
  </init-param>
</filter> 
```

假设开发/测试/生产有不同的 url 值（对于上面的参数值）。有没有办法可以在 pom 中使用过滤器和/或配置文件来消除每次应用程序移动到不同阶段时更改它的需要？用于开发的 IE 将是[http://localfoo.com](http://localfoo.com)，对于测试它将是[http://testserver.com](http://testserver.com)等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T20:01:34.277

您可以使用 Maven 的*[资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)*来在构建时用值替换属性，例如，通过使用不同的 Maven 配置文件来设置属性值。

另一方面，您可以使用 servlet 参数并将它们移动到上下文配置中，因此您的 web.xml 引用它们并且它们实际上是在部署 .war 文件的应用程序服务器中配置的。这样，应用服务器管理员只需在服务器级别进行配置，就可以为每个环境重用相同的 war 文件。

例如，在[Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)中，您可以在 context.xml 文件中设置值：

```
<Context>
  ...
  <Parameter name="targetURL" value="http://testserver.com"
     override="true"/>
  ...
</Context> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:43:32.110

[maven-replacer-plugin](http://code.google.com/p/maven-replacer-plugin/)是我们在项目中用于在构建期间执行此类文本、模式和版本替换的工具。

# android - Android：如何在收到特定广播后启动我的应用程序？

> ID：11145797
> 
> 赞同：1
> 
> 时间：2012-06-21T19:55:44.763
> 
> 标签：android

我试图让我的应用程序在手机连接到 wifi 时自动启动。这是我用来设置广播接收器并指定一旦收到广播我希望启动“已连接”活动的代码：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);
receiver = new BroadcastReceiver(){
                public void onReceive(Context context, Intent intent){
                    Intent intent2 = new Intent(getApplicationContext(),com.example.package.Connected.class);
                    startActivity(intent2);
                }
            };
registerReceiver(receiver,intentFilter); 
```

不幸的是，它不起作用。logcat 说我的活动“泄露了 IntentReceiver”。

有谁知道我该如何解决这个问题？

**编辑**：我还尝试通过清单文件注册接收器。我将此代码添加到清单中：

```
<receiver android:name="com.example.package.receiver">
    <intent-filter>
          <action android:name="android.net.wifi.STATE_CHANGE" />
    </intent-filter>
</receiver> 
```

然后将此代码添加到我的主要活动中：

```
private BroadcastReceiver receiver = new BroadcastReceiver(){
        public void onReceive(Context context, Intent intent){
            Intent intent2 = new Intent(getApplicationContext(),com.example.package.Connected.class);
            context.startActivity(intent2);
        }
    }; 
```

但是现在，一旦手机连接到 wifi，我的应用程序就会崩溃。Logcat 说“RuntimeException：无法实例化接收器”。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:05:20.957

> 我试图让我的应用程序在手机连接到 wifi 时自动启动。

`BroadcastReceiver`使用元素在清单中注册您的`<receiver>`，并让接收者调用方法`startActivity()`中`Context`提供的`onReceive()`方法。

请注意，用户可能不会因为设备连接到 WiFi 而对您弹出活动感到满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:59:14.133

根据[链接](https://stackoverflow.com/questions/3577566/android-leaked-intentreceiver-exception-is-being-thrown-even-though-i-call-unre)和[活动已泄漏 IntentReceiver](https://stackoverflow.com/questions/9781769/activity-has-leaked-intentreceiver)

取消注册您在 onCreate() 中创建的广播接收器

在 onRestart() 中重新注册一个全新的广播接收器。

# vim - 行尾类型与确定 vim 或 Notepad++ 中确定的文件编码有多大关系？

> ID：11145798
> 
> 赞同：0
> 
> 时间：2012-06-21T19:55:53.277
> 
> 标签：vim, character-encoding, notepad++

在 Notepad++ 或 Notepad++中打开文件`vim`可以让您猜测文件可能具有的文件编码。

我有一个文件，我最近在 Linux 下使用 vim 来替换行尾，`\r`然后确定我需要知道它的编码类型。

我尝试使用 VIM（适用于 Linux）和 Notepad++（适用于 Windows）来确定文件的编码。

`vim`确定它是`fileencoding=latin1`并且 Notepad++ 确定它是`ANSI`

行尾是否与确定编码有关？我更改行尾的事实是否会对检测到的字符编码产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:18:18.560

在文本文件的开头缺少*字节顺序标记(BOM)，编辑器必须应用一些启发式方法来确定文件编码。*在 Vim 中，这是由`'fileencodings'`设置控制的。

文件的行尾（CR 与 CR-LF）不太可能影响启发式方法。相反，编码名称不是标准化的，因此不同的编辑器和工具会给出自己的名称。

您可以通过 了解 Vim 的命名方案`:help encoding-values`。据推测，它`latin1`对应`ANSI`于 Notepad++ 中所称的内容，并且经常被称为 ISO 8859-1。

# cocoa-touch - 大中央调度。使用类似于 [myView setNeedsDisplay] 的 GCD [spinner startAnimating] 时？

> ID：11145800
> 
> 赞同：0
> 
> 时间：2012-06-21T19:56:03.120
> 
> 标签：cocoa-touch, ios5, grand-central-dispatch, uiactivityindicatorview

在 Grand Central Dispatch 我想启动一个微调器 -`UIActivityIndicatorView`在开始长时间运行的任务之前旋转：

```
dispatch_async(cloudQueue, ^{

    dispatch_async(dispatch_get_main_queue(),
            ^{
                [self spinnerSpin:YES];
            });

    [self performLongRunningTask];

    dispatch_async(dispatch_get_main_queue(),
            ^{
                [self spinnerSpin:NO];
             });

}); 
```

这是`spinnerSpin`方法：

```
- (void)spinnerSpin:(BOOL)spin {

    ALog(@"spinner %@", (YES == spin) ? @"spin" : @"stop");

    if (spin == [self.spinner isAnimating]) return;

    if (YES == spin) {

        self.hidden = NO;
        [self.spinner startAnimating];
    } else {

        [self.spinner stopAnimating];
        self.hidden = YES;
    }

} 
```

我从未见过讨论过的一件事是`[myView setNeedsDisplay]`和之间的区别（如果有的话） `[myActivityIndicatorView startAnimating]`。他们的行为是否相同？

谢谢，
道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:13:25.913

该方法与 a的动画状态`[UIView setNeedsDisplay]`无关。`UIActivityIndicatorView`

`setNeedsDisplay`只是通知系统该视图的状态已经改变，使其当前绘制的表示无效。换句话说，它要求系统`drawRect`在下一个绘图周期调用该视图的方法。

你很少需要调用`setNeedsDisplay`从视图外部、从使用视图的代码中调用。每当视图的内部状态发生变化而需要重绘视图时，此方法将由视图的内部逻辑代码调用。

该`[UIActivityIndicatorView startAnimating]`方法是特定于`UIActivityIndicatorView`类的，只是要求指示器开始动画（例如旋转）。此方法是即时的，无需您调用任何其他方法。

`startAnimating`附带说明一下，您可以通过简单地调用或`stopAnimating`不手动显示/隐藏来简化代码。该类`UIActivityIndicatorView`有一个`hidesWhenStopped`默认为 的布尔属性`YES`，这意味着微调器将在开始动画时立即显示，并在停止动画时隐藏自身。

因此，您的`spinnerSpin:`方法可以像这样重构（只要您没有将`hidesWhenStopped`属性设置为`NO`）：

```
- (void)spinnerSpin:(BOOL)spin {
    if (YES == spin) {
        [self.spinner startAnimating];
    } else {
        [self.spinner stopAnimating];
    }
} 
```

# winapi - 管理相对于任务栏的窗口大小

> ID：11145808
> 
> 赞同：1
> 
> 时间：2012-06-21T19:56:56.197
> 
> 标签：winapi, taskbar

当任务栏的大小发生变化时，如何调整应用程序窗口的大小？

例如，当任务栏缩小时，我的窗口应该增大以填满创建的洞。我的窗口不应该与任务栏重叠。

我能够通过调用`CreateWindowEx`从调用派生的位置在正确的位置创建窗口`SystemParametersInfo(SPI_GETWORKAREA, 0, &rectWorkArea, 0);`

现在，当我增加任务栏的大小时，我的窗口大小会自动减小而无需任何代码。但是当我“返回”时，我的窗口仍然保持在当前位置。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:10:18.960

不判断它是好是坏（因为标准应用程序只是不这样做），我认为可以通过`WM_SETTINGCHANGE`在任何顶级窗口中处理来跟踪它。

# assembly - PowerPC 组装立即加载

> ID：11145812
> 
> 赞同：10
> 
> 时间：2012-06-21T19:57:51.663
> 
> 标签：assembly, powerpc

我是 PowerPC 组装的新手。我正在使用 MPC8245（是的，老派）。这是 603e 系列处理器。

我想知道如何创建立即 16 位值为“无符号”的加载立即指令。

示例：li r3,0xFC10

我正在使用的 gcc 交叉编译器 4.4.5 不允许此指令，因为该值不是有符号常量。

是的，我可以使用减去 2-s 补码，但这会使阅读和记录代码变得更加困难。在为设备寄存器加载位域时，在指令中具有准确的位域更容易阅读。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T22:01:21.770

`li`是一个伪操作码，实际上翻译为`addi`指令。

`addi rD, rA, SIMM`将带符号的立即数添加`SIMM`到`rA`，将结果放在 中`rD`，*除非*该`rA`字段为 0，在这种情况下，它指定文字 0 而不是`r0`. `li rD, SIMM`是真的`addi rD, 0, SIMM`。

这适用于将值从`0`-`0x7fff`和`0xffff8000`-加载`0xffffffff`到寄存器中，但不适用于其他值。

立即位操作操作码（`ori`等）确实将 16 位立即数字段解释为无符号值。然而他们没有“`r0`意思是字面意思`0`”的行为`addi`。

您将需要使用两条指令将常量加载`0xfc10`到寄存器中：使用 0 加载寄存器`li`（或者`lis`，就像加载任意 32 位常量的上半部分一样），然后在无符号 16 位中进行 OR与 的价值`ori`。

这正是`gcc`在这种情况下所做的：

```
$ cat test.c
unsigned int test(void)
{
    return 0xfc10;
}
$ gcc -O2 -c test.c
$ objdump -d test.o

test.o:     file format elf32-powerpc

Disassembly of section .text:

00000000 <test>:
   0:   38 60 00 00     li      r3,0
   4:   60 63 fc 10     ori     r3,r3,64528
   8:   4e 80 00 20     blr
   c:   60 00 00 00     nop
$ 
```

* * *

我*认为*GNU 汇编器在为 PowerPC 汇编时没有任何方法可以自动生成两条指令以从单个源指令加载这样的值。但是，您可以使用`@h`and`@l`后缀来提取常量的（无符号）高和低 16 位一半，例如：

```
lis r3, 0x12345678@h            /* => li  r3, 0x1234     */
ori r3, r3, 0x12345678@l        /* => ori r3, r3, 0x5678 */ 
```

您可以使用它来编写自己的宏以进行任意常量加载...

```
$ cat test2.s
        .macro  load_const rD, const
        .if (\const >= -0x8000) && (\const <= 0x7fff)
        li      \rD, \const
        .else
        lis     \rD, \const@h
        ori     \rD, \rD, \const@l
        .endif
        .endm

        load_const r3, 0
        load_const r4, 1
        load_const r5, -1
        load_const r6, 0x7fff
        load_const r7, 0x8000
        load_const r8, -32767
        load_const r9, -32768
        load_const r10, -32769
        load_const r11, 0xfc10

$ as -mregnames -o test2.o test2.s
$ objdump -d test2.o

test2.o:     file format elf32-powerpc

Disassembly of section .text:

00000000 <.text>:
   0:   38 60 00 00     li      r3,0
   4:   38 80 00 01     li      r4,1
   8:   38 a0 ff ff     li      r5,-1
   c:   38 c0 7f ff     li      r6,32767
  10:   3c e0 00 00     lis     r7,0
  14:   60 e7 80 00     ori     r7,r7,32768
  18:   39 00 80 01     li      r8,-32767
  1c:   39 20 80 00     li      r9,-32768
  20:   3d 40 ff ff     lis     r10,-1
  24:   61 4a 7f ff     ori     r10,r10,32767
  28:   3d 60 00 00     lis     r11,0
  2c:   61 6b fc 10     ori     r11,r11,64528
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T13:08:24.517

您还可以使用 operator 加载无符号的 16 位立即数`ori`，但请务必在之前清除您的寄存器：

```
xor r3, r3, r3
ori r3, r3, 0xFC10 
```

# java - Grails 2.0.4 错误打开 zip 文件或 JAR 清单缺少 Springloaded

> ID：11145814
> 
> 赞同：3
> 
> 时间：2012-06-21T19:58:00.120
> 
> 标签：java, spring, grails, spring-loaded

我刚刚下载了 Grails 2.0.4 并将其解压缩到 /opt/grails/grails-2.0.4/ 并确保 GRAILS_HOME 环境变量是正确的。但是每当我尝试运行“grails”命令时，我都会收到以下错误：

```
Error opening zip file or JAR manifest missing : /opt/grails/grails-2.0.4/lib/com.springsource.springloaded/springloaded-core/jars/springloaded-core-1.0.2.jar
Error occurred during initialization of VM
agent library failed to init: instrument 
```

我不明白问题可能是什么。几个月来，我在完全相同的机器上以完全相同的方式成功地使用了 Grails-2.0.1。我尝试重新下载 grails-2.0.4.zip 文件，希望这是存档的问题，但这没有帮助。我还从 grails-2.0.1/ 目录中复制了 springloaded-core-1.0.2.jar，但这只是导致了另一组错误。

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-15T05:58:01.407

我也遇到了这个错误。问题是 grails 主路径中的空格。

如果是这样：

```
c:/grails 2.1.0/grails2.1.0
```

然后它会给出一个错误，因为“grails”和“2.1.0”之间有一个空格。我刚刚删除了空格，它开始工作了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T04:41:37.503

看起来您的 PATH 没有正确更新。换句话说，您正在运行 2.0.1 的 grails 脚本，其中 GRAILS_HOME 设置为 2.0.4。您可以判断，因为错误消息中报告的弹簧加载版本 - 1.0.2 - 不是 Grails 2.0.4 所需的版本（帮助其他人诊断此问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T04:37:31.303

您是否清除了主目录中的**.grails文件夹？**

Grails 在其中缓存了一堆文件，这可能会让您感到困惑。

过去，当我的互联网连接不是 100% 可靠时，我也遇到过类似的问题，似乎 Grails 下载器没有对下载的文件进行彻底检查，因此缓存中的文件可能会损坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T12:24:55.493

*这是文件夹层次结构问题！*

我遇到了同样的问题：当我设置 Grails_home 时，确保你给出的路径是 eg`c:/grails2.1.0`而不是`c:/grails2.1.0/grails2.1.0`

当您解压缩文件夹时经常发生这种情况 2 同名的文件夹是在另一个文件夹中创建的。

希望这会解决！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T12:24:47.530

**我有同样的问题。这是我解决它的方法：**

*以前*：我有 grails：`C:\Program Files\grails-2.5.5` 并且在系统的环境变量中我有 GRAILS_HOME:`C:\Program Files\grails-2.5.5` 和 `C:\Program Files\grails-2.5.5\bin`PATH。

*然后我尝试*：将 grails 放入`C:\Grails_2.5.5\grails-2.5.5` 并更新 GRAILS_HOME`C:\Grails_2.5.5\grails-2.5.5`并将 PATH 中的文本更新为`C:\Grails_2.5.5\grails-2.5.5\bin` BUT，我仍然遇到相同的错误。

***什么解决了它：***

1.  将 grails 放在 C 中：`C:\grails_2.5.5`

2.  将环境变量更新到正确的 grails 路径：-GRAILS_HOME:`C:\grails-2.5.5`

    -在路径中：`C:\grails-2.5.5\bin`

3.  重启电脑

*祝您好运！*

# android - 在重叠视图后面创建视图以响应 Tap 事件

> ID：11145815
> 
> 赞同：1
> 
> 时间：2012-06-21T19:58:02.047
> 
> 标签：android, events, android-view

我有两个`ImageView`s`iv1`和`iv2`，其中与with`iv2`重叠。`iv1``20dp`

现在，如果我在可见的区域准确点击`iv1`，它会响应事件，但如果我将`iv2`'s visibility 设置为`GONE`or`INVISIBLE`并使其成为`setEnabled(false)`，我可以`iv1`完全看到，但仍然只是其区域的一部分（在后面可见`iv2`）响应点击事件。

如果重叠视图被禁用或不可见，如何使完整的 ImageView 响应点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:31:30.440

这是因为 iv2 在 iv1 前面。尝试调用`iv1.bringToFront();`. 这会将 iv1 放在 iv2 的前面，并且它的整个区域都会响应点击。

如果稍后您想更改 iv2 的可见性，则必须调用`iv2.bringToFront();`以使事情像在设置 iv2 不可见之前一样。

如果要从一开始就将 iv1 放在 iv2 前面，则必须将其定义放在 iv2 之后的 xml 文件中。视图将按照它们在布局 xml 文件中出现的顺序进行绘制。所以第一个视图在底部，最后一个视图在顶部。

# ms-access - 变更更新

> ID：11145826
> 
> 赞同：0
> 
> 时间：2012-06-21T19:59:04.920
> 
> 标签：ms-access, vba

我有一个文本框（1），它会在文本框（2）更新后自动计算并显示输入。Textbox(1) 设置为 enabled = false ，因此用户无法输入任何值，因为它会自动更新。

我想在更改/更新后在 Textbox(1) 中显示数字。我曾尝试使用 Textbox(1) 的 AfterUpdate 属性，但由于用户没有实际更新该值，因此无法正常工作。

当文本框中的数字发生变化并将数字存储在另一个文本框中时，有什么方法可以检测到变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:47:22.390

正如其他人已经说过的那样，如果用户输入内容`Textbox2`并且您想将其显示在 中`Textbox1`，那么您必须使用事件`Textbox2`，而不是`Textbox1`！

最简单的方法是`AfterUpdate`使用`Textbox2`.
例子：

```
Private Sub Textbox2_AfterUpdate()
    Me.Textbox1 = "Text from second textbox: " & Me.Textbox2
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:17:48.720

您可以使用 OnLostFocus ( [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onlostfocus.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onlostfocus.aspx) ) 来判断用户的焦点何时离开文本框。

否则，您可以使用 OnKeyPress ( [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeypress.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeypress.aspx) ) 和计时器来判断自上次击键以来的时间。

# asp.net-mvc - ASP.NET MVC：验证开始和结束日期

> ID：11145830
> 
> 赞同：0
> 
> 时间：2012-06-21T19:59:29.927
> 
> 标签：asp.net-mvc, validation

> **可能重复：**
> [MVC3 自定义验证：比较两个日期](https://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates)

我正在尝试对我的日期进行验证，以便开始日期必须小于结束日期。如果结束日期早于开始日期，则抛出异常。如何在我的屏幕上显示此异常，以便当我按下搜索按钮和日期错误会出现消息吗？

```
 public ActionResult SearchFree(DateTime? StartDate, DateTime? EndDate)
    {

        if (StartDate.HasValue && EndDate.HasValue)
        {
        DateTime d1 = StartDate.Value;
        DateTime d2 = EndDate.Value;
        TimeSpan span = d2 - d1;

        if (span.Days <= 0)
        {
            throw new ArgumentOutOfRangeException("start date must be before end date");
        }

        try
        {
            DBContext.Current.Open();
            var model = Reservation.SelectFreeRooms(StartDate, EndDate);
            DBContext.Current.Close();
            return View(model);
        }
        catch (ArgumentException ae)
        {
            throw ae;
        }

              }
      return View(new List<dynamic>());
    } 
```

![在此处输入图像描述](../Images/71b91bb88d187d4867b7efa4afe37bef.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:19:10.513

```
public ActionResult SearchFree(DateTime? StartDate, DateTime? EndDate)
{

    if (!StartDate.HasValue || !EndDate.HasValue)
    {
        ModelState.AddModelError("Date", "Dates are empty");
        return View();
    }

    if(StartDate.Value > EndDate.HasValue
    {
        ModelState.AddModelError("Date", "start date must be before end date");
        return View();
    }

    try
    {
        DBContext.Current.Open();
        var model = Reservation.SelectFreeRooms(StartDate, EndDate);
        DBContext.Current.Close();
        return View(model);
    }
    catch ()
    {
        ModelState.AddModelError("", "Db problem");
        return View();
    }
} 
```

**但最好的方法 - 使用一些模型并使用属性验证它**

# excel - VBA - 有效地访问和查找 CSV 文件中的值

> ID：11145832
> 
> 赞同：0
> 
> 时间：2012-06-21T19:59:31.273
> 
> 标签：excel, vba, csv

我正在研究一个复杂的模型，该模型需要在一系列不同的表中查找值。如果我将所有信息嵌入模型本身，那么文件很快就会变得笨拙。我希望找到一个解决方案，让我可以拥有一系列包含所有查找表的 CSV 文件，然后让我的 VBA 代码根据需要快速读取每个 CSV 文件并返回适当的值。我最初的想法是根据需要读取工作内存中的每个 CSV 文件，查找必要的值，然后在查找完成后丢弃信息。这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:17:24.910

这是一个可能对您有用的想法：在第一次需要时将 csv 文件加载到变体数组中，然后后续调用将使用缓存的数据。您可以在任何列中查找值并从任何其他列返回相应的值。

**编辑**：更新以显示如何从 CSV 文件填充查找数组

```
Sub Tester()
    Dim arr1, arr2

    arr1 = CsvToArray("D:\Analysis\tmp\Data1.csv")
    arr2 = CsvToArray("D:\Analysis\tmp\Data2.csv")

    Debug.Print TestLookup(arr1, "lookup1", 2, 1)
    Debug.Print TestLookup(arr2, "lookup2", 3, 1)
    'bunch more lookups...
End Sub

Function TestLookup(arr, val, lookincol As Integer, returnfromcol As Integer)
    Dim r
    r = Application.Match(val, Application.Index(arr, 0, lookincol), 0)
    If Not IsError(r) Then
        TestLookup = arr(r, returnfromcol)
    Else
        TestLookup = "Not found" 'or some other "error" value
    End If
End Function

Function CsvToArray(filepath As String) As Variant
    Dim wb As Workbook
    Application.ScreenUpdating = False
    Set wb = Workbooks.Open(filepath)
    CsvToArray = wb.Sheets(1).Range("A1").CurrentRegion.Value
    wb.Close False
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:19:30.290

如果你真的必须在excel中做，那么这是一种方法：

```
Function GetData(This As String, ResultCol As Integer)
Dim LastRow As Long

Application.ScreenUpdating = False 'Turn off screen refreshing

Workbooks.Open Filename:="E:\my_files\tables.csv" 'Open the CSV file

LastRow = Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row 'used for range in vlookup
GetData = Application.WorksheetFunction.VLookup(This, Range(Cells(1, 1), Cells(LastRow, ResultCol)), ResultCol, False)

Workbooks("Tables.csv").Close 'Close the CSV file

Application.ScreenUpdating = True 'Turn on screen refreshing

End Function 
```

# r - 在马尔可夫模型中的状态之间移动 - 如何判断 R？

> ID：11145835
> 
> 赞同：1
> 
> 时间：2012-06-21T19:59:38.507
> 
> 标签：r, markov-models

我一直在努力解决这个问题很长一段时间，任何帮助将不胜感激。

我正在尝试编写一个函数来根据马尔可夫模型的观察数据计算转换矩阵。

我用来构建函数的初始数据看起来像这样；

```
 Season                 Team State
1        1    Manchester United     1
2        1              Chelsea     1
3        1      Manchester City     1
.
.
.
99       5    Charlton Athletic     4
100      5              Watford     4 
```

有 5 个季节和 4 个州。

我知道我将如何计算转换矩阵，但为了做到这一点，我需要计算每个赛季从状态 i 移动到状态 j 的团队数量。

我需要能做这样的事情的代码，

```
a<-function(x,i,j){
if("team x is in state i in season 1 and state j in season 2") 1 else 0
}
sum(a) 
```

然后我可以为每支球队和每对状态执行此操作，并在所有 5 个赛季中重复。但是，我很难弄清楚如何用引号告诉 R 事情。对不起，如果有一个非常明显的答案，但我是一个垃圾程序员。

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:05:36.850

此函数告诉您团队是否从第 1 季到第 2 季从状态 1 转换到状态 2

```
a <- function(team, state1, state2, data, season1, season2) {  
  team.rows = data[team == data["Team",],]   
  in.season1.in.state1 = ifelse(team.rows["Season",]==season1 && team.rows["State",state1],1,0)
  in.season2.in.state2 = ifelse(team.rows["Season",]==season2 && team.rows["State",state2],1,0)   
  return(sum(in.season1.in.stat1) * sum(in.season2.in.state2)) 
} 
```

*   在第一行中，我选择了特定团队的所有行。
*   第二行是为每个条目确定一个团队是否在第 1 季中处于状态 1。
*   第三行是为每个条目确定一个团队是否在第 2 季中处于状态 2，
*   如果球队在各自的赛季中从未处于各自的状态，则 return 语句返回 0，否则返回 1（仅在没有重复的情况下才有效，在这种情况下，它可能返回大于 1 的值）

# extjs - 表格布局中的列移动/跨越面板不正确 EXTJS

> ID：11145838
> 
> 赞同：2
> 
> 时间：2012-06-21T19:59:42.370
> 
> 标签：extjs, extjs4

我在 ExtJs 4.0 中的简单表格布局有问题。我有 4 个面板，我想以 2X2 面板格式排列。通常这将是 2 列和 2 行，我可以在 ExtJs 中成功地做到这一点；但是，出于我的目的，我希望有 4 列和 2 行。我希望布局是这样的：

```
|1|222|
|33|44| 
```

面板 1：跨越一列，一排

面板 2：跨越 3 列，1 行

面板 3：跨越 2 列，1 行

面板 4：跨越 2 列，1 行

这看起来很简单，但我似乎无法让它正常工作！以下是我从 ExtJs 示例中复制和修改的全部代码：[http](http://docs.sencha.com/ext-js/4-0/#!/example/layout/table.html) ://docs.sencha.com/ext-js/4-0/#!/example/layout/table.html （对于出于某种原因，该示例没有指向其 Javascript 代码的链接，但我能够在 ext-4.0.1/examples/layout/table.js 下的 ExtJs 示例文件夹中找到它）

```
Ext.onReady(function() {
var panel = Ext.create('Ext.Panel', {
    id:'main-panel',
    baseCls:'x-plain',
    renderTo: Ext.getBody(),
    layout: {
        type: 'table',
        columns: 4
    },
    // applied to child components
    defaults: {frame:true, width:200, height: 200},
    items:[{
        title:'Item 1',
        colspan:1,
        width:200
    },{
        title:'Item 2', 
        colspan:3,
        width:600
    },{
        title:'Item 3', 
        colspan:2,
        width:400
    },{
        title:'Item 4',
        colspan:2,
        width:400

    }]
}); 
```

});

现在，据我所知，这段代码应该可以工作。但我得到的结果是这样的： ![列表布局](../Images/4e567bfa783f97297a64bc69586015f1.png)

有人知道为什么面板 2 向右移动一列吗？Sencha Docs 中的示例有很多面板跨越不止一列，但我一定忽略了一些东西，我不知道是什么！

感谢您所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:04:16.127

在您的面板上添加

```
layout: {
    type: 'table',
    // The total column count must be specified here
    columns: 3
}, 
```

并将此代码应用于子项目

```
tdAttrs: {
    colspan: 2
} 
```

经过研究并尝试以纯 HTML 格式创建它，我发现您无法在一张表中实现您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:52:04.557

我和你有同样的问题，我用在 HTML 页面中写一个表来调试它，我发现你必须让表知道它有多少 max td。所以我将 max count invisible td(item) 添加到 ExtJS 面板中，并修复了该错误。

这是整个代码：

```
 var list = response.responseText.evalJSON();

        var columnArray = new Array();
        if(list != null) {

            for(var i = 0; i < list.length; i++) {
                var cell = {
                    id: list[i].id,
                    title: list[i].cellTitle,
                    autoScroll: true,
                    width: Calculator.getWidth(CELL_WIDTH, PADDING, list[i].colNum),
                    height: Calculator.getWidth(CELL_HEIGHT, PADDING, list[i].rowNum),
                    colspan: list[i].colNum,
                    rowspan: list[i].rowNum,
                    collapsible: true,
                    tools: tools,
                    html: HtmlCreator.create(list[i].id, list[i].href)
                };
                columnArray.push(cell);
            }

            **// For IE6+ add placeholder cell to calculate the total count of column**
            for(var i = 0; i < COLUMN_COUNT; i++) {
                var placeholder_cell = {
                    baseCls: 'hidden-cls',
                    bodyStyle: 'visibility: hidden;display: none;',
                    width: Calculator.getWidth(CELL_WIDTH, PADDING, 1),
                    height: Calculator.getWidth(CELL_HEIGHT, PADDING, 1)
                };
                columnArray.push(placeholder_cell); 
            }

            var panel = new Ext.Panel({
                id: 'main-panel',
                baseCls: 'x-plain',
                renderTo: 'portal-el',
                layout: {
                    type: 'table',
                    columns: COLUMN_COUNT
                },
                defaults: {frame: true, width: CELL_WIDTH, height: CELL_HEIGHT},
                items: columnArray
            }); 
```

# shell - 将文件复制到远程 dv 服务器 shell 脚本

> ID：11145839
> 
> 赞同：0
> 
> 时间：2012-06-21T19:59:54.257
> 
> 标签：shell, file-io

但是如何使用 shell 脚本将文件从一台 dv 服务器复制到另一台服务器？这是一个小文件，我想使用最简单的方法，只要它是安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:06:16.043

如果您使用 Linux / UNIX / OS X SSH scp 客户端，请尝试此操作

rsync -avz -e ssh user@server1:/var/www/html /var/www/html/

或这个

scp -r user@server1:/var/www/html/ /var/www/html/

# java - 几个枚举如何扩展一个类，该类包含用于 Java 中这些枚举的方法？

> ID：11145840
> 
> 赞同：4
> 
> 时间：2012-06-21T20:00:01.747
> 
> 标签：java, design-patterns, enums, extends

我有两个枚举，在两个包中。我可以有 1000 个枚举，没有 1000 个包，因为我正在研究一种“单元”架构，每个单元都必须有自己的枚举。

我不想让每个常量都在同一个枚举中以最大化凝聚力。

问题是每个枚举基本相同，除了常量（适用于每个单元）

所以，我需要重复很多代码，而我不想这样做（例如，我的枚举实现了侦听器，并且方法逻辑是在每个枚举中复制/粘贴）。

我在互联网上查看了枚举扩展模式。我找到了可扩展的枚举模式。

这不完全是我需要的。

我正在尝试找到一种解决方案来将我的常量保存在不同的包中，在不同的单元中，但我想要一种抽象类，位于我的枚举可以扩展的包层次结构的顶部。这样，我只能编写一次方法逻辑。

我知道枚举不能扩展类，它们只能实现接口。

这是我想做的不工作的 UML 草图：

![在此处输入图像描述](../Images/ea444da241b8c50be128f4efac235c71.png)

我怎样才能做到这一点？有图案吗？

几个枚举如何扩展一个包含用于这些枚举的方法的类？（可重复使用的）

**编辑提示：**

我需要`.values()`从枚举中使用，因为我需要使用常量进行迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:17:51.933

查看 Effective Java 书中的“Typesafe Enum”模式。你可以阅读它

[http://java.sun.com/developer/Books/effectivejava/Chapter5.pdf](http://java.sun.com/developer/Books/effectivejava/Chapter5.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:23:38.850

你不能用一个枚举来扩展一个类——或者一个枚举。但是你可以实现一个接口并将接口方法的实现委托给一个帮助类。

# sed - sed: 非法选项 -- CentOS5 上的 i

> ID：11145841
> 
> 赞同：0
> 
> 时间：2012-06-21T20:00:13.087
> 
> 标签：sed, centos, rhel5

有人知道需要哪个版本的 sed 才能选择`-i`工作吗？我在 CentOS5 上，我收到了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:13:03.077

如果你要与你一起使用`-i`，`sed`那你就做错了。`sed`是一个*流编辑器*，它应该用于编辑流，而不是文件`-i`。

如果你想编辑一个文件，你应该使用`ed`. `ed`是一个*行编辑器*，它应该用于编辑文件。IMO，这就是您要使用的工具。

顺便说一句，`-i`是 GNU 主义。来自[维基百科](https://en.wikipedia.org/wiki/Sed#History)：

> GNU sed 添加了几个新特性。最著名的是文件的就地编辑（即，用应用 sed 程序的结果替换原始文件），后来也包含在 BSD sed 中。现在经常使用此功能代替 ed 脚本：例如，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:04:48.263

我认为你不能让 -i 工作。

我认为这个其他 SO 问题可能会对您有所帮助：

[sed -i + SOLARIS 中的相同选项](https://stackoverflow.com/questions/3576380/sed-i-what-the-same-option-in-solaris)

然而，也许解决方案不如 sed -i 好。

# python - 错误：导入 bbpy 包时未找到 Qtcore 模块

> ID：11145842
> 
> 赞同：0
> 
> 时间：2012-06-21T20:00:15.203
> 
> 标签：python, qt, import, pyside, blackberry-10

我正在尝试使用 blackberry-py 运行示例应用程序。我遵守了链接中的说明：http: [//hg.microcode.ca/blackberry-py/wiki/Home](http://hg.microcode.ca/blackberry-py/wiki/Home)，但是在尝试“import bbpy”语句时，我收到以下错误：导入错误：没有名为 Qtcore 的模块。

Trace的打印屏幕：http: [//imgur.com/csRJ4](http://imgur.com/csRJ4)

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:08:35.390

事实证明，这些软件包不是用于 PC 而是用于剧本。解决方案是下载 PyQt 或 QT 感谢@peter9477 和 timeless 对 freenode.net 上#bbx-python 的帮助。如果您对 BBPy 项目感兴趣，请查看此处：[http](http://blackberry-py.microcode.ca/) ://blackberry-py.microcode.ca/和此处：[http](http://hg.microcode.ca/blackberry-py/wiki/Home) ://hg.microcode.ca/blackberry-py/wiki/Home 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:04:43.423

您的版本`PySide`没有模块`QtCore`。另请注意，它正在尝试`Qt`从那里导入，而不是因此会产生错误`qt`是有道理的。`import qt`

你确定你安装了`PySide`和的兼容版本`bbpy`吗？检查版本并查找它们是否确实兼容。

# url - CAS代理配置

> ID：11145845
> 
> 赞同：0
> 
> 时间：2012-06-21T20:00:33.870
> 
> 标签：url, single-sign-on, reverse-proxy, cas

我有以下设置：

1.  代理服务器：[https ://proxy-server.com](https://proxy-server.com)
2.  应用服务器：[https ://app-server.com](https://app-server.com)
3.  和一个 CAS (sso) 服务器：[https ://sso-server.com](https://sso-server.com)

我可以得到以下工作：

[https://proxy-server.com/cas/login?service=https://app-server.com/app](https://proxy-server.com/cas/login?service=https://app-server.com/app)

但是这个 URL 的问题是它暴露了实际的应用服务器，它位于代理服务器后面。

理想情况下，我想要以下内容：

[https://proxy-server.com/cas/login?service=https://proxy-server.com/app](https://proxy-server.com/cas/login?service=https://proxy-server.com/app)

我的问题是：有没有办法在 URL 中隐藏（使用 post、加密 targetService 部分、在代理端回调或......）app-server.com？因为我前面有一个代理服务器，所以我不想公开实际的应用服务器名称。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:39:23.030

如果您正在运行 Apache mod_proxy 之类的东西，`https://proxy-server.com`那么您应该能够将您的应用程序隐藏在它后面。根据您的示例，由于您将 cas 登录网址声明为`https://proxy-server.com/cas/login`

遵循相同的想法，您的应用程序可以使用`https://proxy-server.com/app`

```
ProxyPass          /cas   https://sso-server.com/cas 
ProxyPassReverse   /cas   https://sso-server.com/cas
ProxyPass          /app   https://app-server.com/app  
ProxyPassReverse   /app   https://app-server.com/app 
```

您可能必须修改您的 serviceUrls，以便它们与 proxy-server.com 相关

*   [ProxyPass 和 ProxyPassReverse 配置](http://www.allguru.net/error-solution/proxypass-proxypassreverse-configuration/)
*   [代理如何](http://tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html)

# opencv - opencv - 计算来自 canny 的非定向边

> ID：11145852
> 
> 赞同：3
> 
> 时间：2012-06-21T20:01:12.490
> 
> 标签：opencv, edge-detection

谁能帮助我如何使用opencv cannyedge检测计算非定向边缘的数量？我有一个来自 opencv 的 cannyEdge 图像，我想有一个基于边缘方向的直方图，在那里我可以计算有向和非定向边缘的数量。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-22T13:45:55.530

我认为您将边缘检测与梯度检测混淆了。Canny 提供了基于梯度幅度的边缘图（通常使用 Sobel 算子，但也可以使用其他算子），因为 Canny 只返回阈值梯度幅度信息，它无法为您提供方向信息。

**编辑：**我应该澄清 Canny 算法在非最大抑制步骤中确实使用了梯度方向。然而，OpenCV 的实现对`Canny`你隐藏了这个方向信息，并且只返回一个边缘幅度图。

获取梯度大小和方向的基本算法如下：

1.  计算 X 方向的 Sobel ( `Sx`)。
2.  计算 Y 方向的 Sobel ( `Sy`)。
3.  计算梯度幅度`sqrt(Sx*Sx + Sy*Sy)`。
4.  用 计算梯度方向`arctan(Sy / Sx)`。

该算法可以使用以下 OpenCV 函数来实现：[Sobel](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=sobel#void%20Sobel%28InputArray%20src,%20OutputArray%20dst,%20int%20ddepth,%20int%20dx,%20int%20dy,%20int%20ksize,%20double%20scale,%20double%20delta,%20int%20borderType%29)、[幅度](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=magnitude#void%20magnitude%28InputArray%20x,%20InputArray%20y,%20OutputArray%20magnitude%29)和[相位](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?#void%20phase%28InputArray%20x,%20InputArray%20y,%20OutputArray%20angle,%20bool%20angleInDegrees%29)。

下面是一个计算梯度幅度和相位以及显示梯度方向的粗略颜色映射的示例：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <iostream>
#include <vector>

using namespace cv;
using namespace std;

Mat mat2gray(const cv::Mat& src)
{
    Mat dst;
    normalize(src, dst, 0.0, 255.0, cv::NORM_MINMAX, CV_8U);

    return dst;
}

Mat orientationMap(const cv::Mat& mag, const cv::Mat& ori, double thresh = 1.0)
{
    Mat oriMap = Mat::zeros(ori.size(), CV_8UC3);
    Vec3b red(0, 0, 255);
    Vec3b cyan(255, 255, 0);
    Vec3b green(0, 255, 0);
    Vec3b yellow(0, 255, 255);
    for(int i = 0; i < mag.rows*mag.cols; i++)
    {
        float* magPixel = reinterpret_cast<float*>(mag.data + i*sizeof(float));
        if(*magPixel > thresh)
        {
            float* oriPixel = reinterpret_cast<float*>(ori.data + i*sizeof(float));
            Vec3b* mapPixel = reinterpret_cast<Vec3b*>(oriMap.data + i*3*sizeof(char));
            if(*oriPixel < 90.0)
                *mapPixel = red;
            else if(*oriPixel >= 90.0 && *oriPixel < 180.0)
                *mapPixel = cyan;
            else if(*oriPixel >= 180.0 && *oriPixel < 270.0)
                *mapPixel = green;
            else if(*oriPixel >= 270.0 && *oriPixel < 360.0)
                *mapPixel = yellow;
        }
    }

    return oriMap;
}

int main(int argc, char* argv[])
{
    Mat image = Mat::zeros(Size(320, 240), CV_8UC1);
    circle(image, Point(160, 120), 80, Scalar(255, 255, 255), -1, CV_AA);

    imshow("original", image);

    Mat Sx;
    Sobel(image, Sx, CV_32F, 1, 0, 3);

    Mat Sy;
    Sobel(image, Sy, CV_32F, 0, 1, 3);

    Mat mag, ori;
    magnitude(Sx, Sy, mag);
    phase(Sx, Sy, ori, true);

    Mat oriMap = orientationMap(mag, ori, 1.0);

    imshow("magnitude", mat2gray(mag));
    imshow("orientation", mat2gray(ori));
    imshow("orientation map", oriMap);
    waitKey();

    return 0;
} 
```

使用圆形图像：
![在此处输入图像描述](../Images/427cab0514e1a2836525ee4961da1a46.png)

这会产生以下幅度和方向图像：
![震级](../Images/2ab290490fb72b50210ae073aa1f0a9a.png) ![方向](../Images/15bb29d48d79876a71752be42b2f40ce.png)

最后，这里是梯度方向图：
![地图](../Images/c0e427cc937f85c9d1b3f0a99e5c5e07.png)

**更新：**阿比德实际上​​在评论中提出了一个很好的问题“这里的方向是什么意思？”，我认为需要进一步讨论。我假设该`phase`函数不会从正 y 轴向下的正常图像处理角度切换坐标框架，并且正 x 轴是正确的。鉴于此假设导致以下图像显示圆周围的梯度方向向量：

![在此处输入图像描述](../Images/c0854c0207f49dfe1ad1b5fda5cae4a9.png)

这可能很难习惯，因为轴从我们通常在数学课中习惯的方向翻转......所以，梯度方向是法线向量在增加变化的方向上与梯度表面形成的角度。

希望对您有所帮助！

# multithreading - 应用程序外的wp7后台任务

> ID：11145855
> 
> 赞同：0
> 
> 时间：2012-06-21T20:01:22.780
> 
> 标签：multithreading, windows-phone-7, background, live-tile

我需要有一个独立于我的应用程序运行并执行一组任务的后台进程。即使我的应用程序没有运行，这些任务也需要执行。例如，持续处理包含需要执行的日期/时间的任务列表。后台任务将遍历列表并处理与当前时间匹配的所有列表。

这是否可以在不需要 Web 服务器和使用推送通知服务的情况下在本地进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:28:57.813

[这](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29.aspx)是 Windows Phone 上的后台代理概述的链接。在这一点上，你想要的东西不可能以任何程度的准确性（定期后台任务至少每半小时运行一次）或可靠性（如果用户有一段时间没有打开关联的应用程序，后台代理将被禁用）。

所以是的，此时您唯一的选择是创建一个[推送通知](http://msdn.microsoft.com/en-us/library/ff402537%28v=vs.92%29.aspx)服务器，并将该通知深层链接到您要打开的任何应用程序。

# html - HTML标记中链接内的标题或标题内的链接？

> ID：11145861
> 
> 赞同：24
> 
> 时间：2012-06-21T20:01:58.057
> 
> 标签：html

> **可能重复：**
> [哪个更正确：<h1><a>..</a></h1> OR <a><h1>..</h1></a>](https://stackoverflow.com/questions/7023512/which-is-more-correct-h1a-a-h1-or-ah1-h1-a)
> [在语义上，哪个更正确：a in h2 还是 h2 在 a 中？](https://stackoverflow.com/questions/9760074/semantically-which-is-more-correct-a-in-h2-or-h2-in-a)

这是一个关于 HTML 的简单问题。将链接放在标题、段落或其他 HTML 元素中的正确/最可取的方式是什么？

这边走：

`<h2><a href="">Some Title</a></h2>`

或者这样：

`<a href=""><h2>Some Title</h2></a>`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T20:04:57.973

更好的是

```
<h2><a href="">Some Title</a></h2> 
```

因为是带有显示块的元素，并且在元素`h`中具有不好的做法。`block``a`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T20:05:57.287

注意：您不能将标题放在 HTML4 中的链接内。

在 HTML5 中，这取决于您想要的效果和语义。将整个标题放在链接内将导致可点击区域跨越整个宽度，而将链接放在标题内只会导致文本可点击。我以前使用过这两个版本，但这完全取决于我将标题放在哪里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T20:03:55.523

我更喜欢第二个：

```
<a href=""><h2>Some Title</h2></a> 
```

因为你有更多的控制权，例如，如果你想做这样的事情：

```
<a href=""><h2>Some Title</h2> <h1>biggest</h1></a> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T20:06:02.460

他们都工作得很好。

如果您愿意，您可以在[http://validator.w3.org/上自行检查。](http://validator.w3.org/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T20:09:06.957

从技术上讲，`<a>`是一个行内元素，并且`<h2>`是一个块级元素，所以：

```
<h2><a href="">Some Title</a></h2> 
```

是正确的嵌套。

也就是说，浏览器**通常**会忽略这样的错误嵌套，并允许您按照自己的方式进行操作。

我，当浏览器选择在标准兼容模式或怪癖模式下运行我的页面时，我不喜欢诱惑命运，所以我会选择正确的嵌套。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T20:08:28.477

```
<h1><a href="#">text here</a></h1> 
```

是正确的，因为 HTML 不允许内联元素 () (src) 中的块元素 ()。您的第二个示例将无法通过验证。

通常，块级元素可能包含内联元素和其他块级元素。通常，内联元素可能只包含数据和其他内联元素。这种结构区别中固有的想法是块元素创建比内联元素“更大”的结构。

我只是从另一个问题中复制了这个......

# iphone - 加载 UITableView (.xib) 时基于视图的应用程序问题

> ID：11145862
> 
> 赞同：0
> 
> 时间：2012-06-21T20:02:14.303
> 
> 标签：iphone, xcode, uitableview, view

我的应用程序是基于视图的应用程序。当我按下一个按钮时，我添加了一个 UITableView 类型的子类及其 .xib，我想加载 UITableView xib，但它只加载没有导航栏和搜索栏的表格。这是加载视图的代码：

```
- (IBAction)changeView:(id)sender;
{
   TableViewController *tableview =[[TableViewController alloc] initWithNibName:nil   bundle:nil];
   [self presentModalViewController:tableview animated:YES];
} 
```

这是我要加载的内容：

[图片 1 http://img571.imageshack.us/img571/3846/wantf.png](http://img571.imageshack.us/img571/3846/wantf.png)

这就是它加载的内容：

[图片 2 http://img528.imageshack.us/img528/9928/loadu.png](http://img528.imageshack.us/img528/9928/loadu.png)

如何解决问题并使用导航和搜索栏加载视图？先谢谢各位小伙伴了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:04:25.780

您需要将视图控制器包装在 UINavigationController 中，如下所示：

[UINavigationController：最简单的例子](https://stackoverflow.com/questions/3077613/uinavigationcontroller-simplest-example)

所以试试这个：

```
 TableViewController *tableview =[[TableViewController alloc] initWithNibName:nil   bundle:nil];
   UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:tableview]; 
   [self presentModalViewController:navController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:48:45.233

在编辑您的 xib 文件时，我相信 XCode 为您提供了显示/隐藏搜索栏的选项。

# php - 一年前只允许进入一次。？

> ID：11145863
> 
> 赞同：0
> 
> 时间：2012-06-21T20:02:20.730
> 
> 标签：php, sql

好吧，我在站点中有一个表单，人们将域提交到我的数据库，但是他们可以多次添加 1 个域的问题是什么，这意味着存档变得无用我想避免查询以检查以前的提交日期来自 db 的域并检查它是去年还是同年提交的。

所以我的意思是允许每年一次在 db 中输入域，一年后可以重新提交.. 任何帮助将不胜感激..

我的查询尝试

```
 $total_year = 24*60*60*5;
 $timev = time();
 $control_domains = mysql_query("SELECT * FROM domains WHERE url LIKE '%$url%' AND $timev - time < $total_year"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:21:59.420

```
SELECT * FROM domains WHERE url LIKE '%$url%' AND time < date_sub(now(),interval 365 DAY); 
```

这将选择所有超过 365 天（1 年）的域。如果您想要去年的所有域，请反转 < 符号（因此它将变为 >）。（我假设存储您的时间或日期的列称为时间）。你可能需要稍微改变一下。

我的建议是您存储 DATE 或 DATETIME。

# jsf-2 - JSF 库 (Sun/Oracle Mojarra)

> ID：11145868
> 
> 赞同：5
> 
> 时间：2012-06-21T20:02:58.637
> 
> 标签：jsf-2, jar, mojarra

我正在从[http://javaserverfaces.java.net/download.html下载 JSF 的 Sun/Oracle Mojarra 实现](http://javaserverfaces.java.net/download.html)

我下载了最新的 -2.1.9 二进制文件。它只有一个 jar - javax.faces-2.1.9.jar。我有一个示例项目，我相信它使用的是较旧的 2.0 版本，其中包括 2 个 jar - jsf-api.jar 和 jsf-impl.jar。

我用一个新罐子替换了那两个旧罐子。看起来示例项目仍然运行良好。

我的问题：

1.  除了更换那两个罐子外，我还需要做什么？？？

2.  有什么特殊原因，这是从 2 个罐子变成 1 个罐子的吗？

非常感谢。

更多的：

我注意到我的 faces-config.xml 中的版本

```
<?xml version="1.0"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd" version="2.0">
</faces-config> 
```

我将 2.0 和 2_0 更改为 2.1 和 2_1。示例项目仍然有效。我应该做出这些改变吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T04:39:00.503

> *除了更换那两个罐子外，我还需要做些什么吗？*

不。

* * *

> *有什么特殊原因，这是从 2 个罐子变成 1 个罐子的吗？*

在 2.1.6 发布前后，他们重构了构建系统以符合 Java EE Maven 规则。另见[Mojarra 问题 2028](http://java.net/jira/browse/JAVASERVERFACES-2028)。这导致两个众所周知的`jsf-api.jar`文件`jsf-impl.jar`被一个`javax.faces.jar`文件替换。

* * *

> *我将 2.0 和 2_0 更改为 2.1 和 2_1。示例项目仍然有效。我应该做出这些改变吗？*

你可以这样做。唯一的区别是[`faces-config`2.1 XSD](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd)定义了两个新元素，而不是[`faces-config`2.0 XSD](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd)：

*   `<facelet-cache-factory>`注册一个自定义[`FaceletCache`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletCache.html)
*   `<redirect-param>`在重定向导航案例中指定请求参数。

如果您不需要它们中的任何一个，那么您使用的是 2.0 还是 2.1 XSD 都没关系。当使用带有 2.0 XSD 的 JSF 2.1 时，Mojarra 2.1 内部没有 2.0 后备模式。

# objective-c - MapView 上的注解：坐标

> ID：11145869
> 
> 赞同：0
> 
> 时间：2012-06-21T20:03:06.880
> 
> 标签：objective-c, mkannotation

我有两个`NSString`s（地址和密钥），其中包含数字形式的坐标（经度和纬度）（34,56789 ...）：

```
NSString *key = [allKeys objectAtIndex:i];
NSObject *obj = [DictionaryMap objectForKey:key];

NSString *address = [NSString stringWithFormat:@"%@", obj];

CLLocationCoordinate2D anyLocation;

anyLocation.latitude = [address doubleValue];

anyLocation.longitude  = [key doubleValue];

MKPointAnnotation *annotationPoint2 = [[MKPointAnnotation alloc] init]; annotationPoint2.coordinate = anyLocation;

annotationPoint2.title = @"Event";
annotationPoint2.subtitle = @"Microsoft's headquarters2";
[mapView addAnnotation:annotationPoint2]; 
```

...但我不明白为什么它不在与所写坐标相同的点上绘制。我认为这不起作用：

```
[address doubleValue] 
```

所以我尝试将其替换为：

```
location.latitude = NSNumber/NSString 
```

但它给出了一个错误。

更新：

在视图中加载：

```
 UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)];
[self.mapView addGestureRecognizer:longPressGesture];

[mapView.userLocation setTitle:@"I am here"]; 
```

..然后...

```
-(void)handleLongPressGesture:(UIGestureRecognizer*)sender {
// This is important if you only want to receive one tap and hold event
if (sender.state == UIGestureRecognizerStateEnded)
{
    [self.mapView removeGestureRecognizer:sender];
}
else
{

    // Here we get the CGPoint for the touch and convert it to latitude and longitude coordinates to display on the map
    CGPoint point = [sender locationInView:self.mapView];
    CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
    // Then all you have to do is create the annotation and add it to the map

MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init]; annotationPoint.coordinate = locCoord;

    annotationPoint.title = @"Microsoft";
    annotationPoint.subtitle = @"Microsoft's headquarters";
    [mapView addAnnotation:annotationPoint];

NSString *latitude = [[NSString alloc] initWithFormat:@"%f",locCoord.latitude];

    NSString *longitude = [[NSString alloc] initWithFormat:@"%f", locCoord.longitude];

    NSLog(latitude);
    NSLog(longitude);

    [[NSUserDefaults standardUserDefaults]setObject:latitude forKey:@"FolderLatitude"];
     [[NSUserDefaults standardUserDefaults]setObject:longitude forKey:@"FolderLongitude"];
}
} 
```

...然后我将坐标保存在 JSON 文件中，然后从文件中读取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:10:29.253

打印出您为 lat/lon 设置的值。听起来这些值没有正确地转换为双精度值。如果字符串不是“xxx.xxx”格式，那么当您调用`doubleValue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:20:29.080

最后我明白了：这是使它工作的正确方法：

```
NSString *myString = (string initialization here)

float stringFloat = [myString floatValue];

anyLocation.longitude = stringFloat; 
```

# xcode - 图像显示在 iPad 模拟器中，但不显示在设备中

> ID：11145870
> 
> 赞同：4
> 
> 时间：2012-06-21T20:03:09.323
> 
> 标签：xcode, image, ipad, ios-simulator

我有一个小 png，我正在将它添加到一个视图中，我很确定我以前工作过，但突然停止在 iPad 本身上工作，同时继续在 iPad 模拟器上正常工作。

这是我用来将图像添加到视图的代码...

```
 UIImageView *bottomResizer = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"resizeLine.png"]];
  bottomResizer.center = CGPointMake(bottomResizer.center.x, bottomResizer.center.y+self.frame.size.height-12);
  bottomResizer.tag = 301;
  [self addSubview:bottomResizer]; 
  [bottomResizer release]; 
```

这发生在 UIGestureRecognizerStateBegan 事件中。以下代码在 touchesEnded 事件中删除图像，即使您看不到它，也不会出现任何错误。

```
 NSArray *subViews = [self subviews];
 int count = [subViews count];
 for (int i =count-1; i>=0; i--) {
     if([[subViews objectAtIndex:i] tag] == 301) {
         [[subViews objectAtIndex:i] removeFromSuperview];

     }
 } 
```

我不认为这是我在代码中更改的任何内容，因为它可以在模拟器中运行。不知道下一步该去哪里寻找问题。我已经重置了模拟器，看看它是否会在重置后中断。我也清理了项目。

谢谢。

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:07:03.017

在此行之后放置一个断点`UIImageView *bottomResizer = [[UIImageView alloc]...`

然后在控制台“po [bottomResizer image]”

如果它为 nil，则资源没有正确复制到包中，或者您可能有一个设备无法加载的损坏图像。

# java - 如何返回 Java 列表 使用 Jax-RS 的 Json

> ID：11145873
> 
> 赞同：4
> 
> 时间：2012-06-21T20:03:28.043
> 
> 标签：java, json, string, list, jaxb2

我想知道一个方法如何返回 List 的 JSON 数组，例如：

```
@GET 
@Produces("application/json")
public List<String> aMethod(){
  return Array.asList("text1", "text2", "text3");
} 
```

我想知道，如何在我的方法中接收 List 参数类型，例如

```
@PUT
@Consumes("application/json") void otherMethod(List<String>){
   // do something ;
} 
```

我已经阅读了有关 JaxbContext 的信息，我了解它对我的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:57:39.910

JAXB 支持两种类型`List`。第一个是元素列表，第二个是分隔字符串（“普通”XML 值或属性，使用某些分隔符将其解析为列表）。第一个似乎是您想要的（“数组”）。

如需参考，请参阅：http: [//jaxb.java.net/jaxb20-ed/api/javax/xml/bind/annotation/XmlList.html](http://jaxb.java.net/jaxb20-ed/api/javax/xml/bind/annotation/XmlList.html)

您会注意到，在这两种情况下，您想要的 List 都需要被其他对象封装。从根本上说，XML（以及扩展的 JAXB）喜欢将所有内容追溯到单个根节点/对象。所以要建模它，你需要这样的东西：

```
@XmlRootElement(name="wrapper")
public abstract class ListWrapper {
   public List<String> names;
} 
```

然后您的方法需要更改为接受/返回`ListWrapper`对象并从中提取实际的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T16:23:05.300

我尝试了同样的方法但没有成功，所以我最终将一个字符串打包到一个字段对象中。

```
return listWithString
                .stream()
                .map(
                        stringElement -> {
                            MyBoxObject bo = new MyBoxObject();
                            bo.setSomeField(stringElement);
                            return bo;
                        })
                .collect(Collectors.toList()); 
```

# python - SQL删除重复行

> ID：11145874
> 
> 赞同：2
> 
> 时间：2012-06-21T20:03:28.503
> 
> 标签：python, sql, database, sqlite

> **可能重复：**
> [删除重复的行](https://stackoverflow.com/questions/6165895/delete-duplicate-rows)

这是我的表结构：

"作者" (varchar) | “点”（整数） | “主体）

作者总是一样的，身体也是。同一个作者条目会在整个数据库中以不同的主体出现多次，所以我无法根据作者删除。但是，点列并不总是相同的。我想要保留具有最大点值的行。

我正在使用 SQLite3 和 Python。

谢谢

编辑：

我已经尝试过了，但它只是删除了所有行。

```
for row in cur.fetchall():
        rows = cur.execute('SELECT * FROM Posts WHERE Author=? AND Body=? AND Nested=? AND Found=?', (row['Author'], row['Body'], row['Nested'], row['Found'],))
        for row2 in rows:
            delrow = row
            if (row['Upvotes'] <  row2['Upvotes'] or row['Downvotes'] < row2['Downvotes']):
                delrow = row2
            cur.execute("DELETE FROM Posts WHERE Author=? AND Body=? AND Upvotes=? AND Downvotes=? AND Nested=? AND Found=?", (delrow['Author'], delrow['Body'], delrow['Upvotes'], delrow['Downvotes'], delrow['Nested'], delrow['Found'],))
            dn += 1
            print "Deleted row ", dn 
```

我也试过这个，但没有奏效。

```
cur.execute("DELETE FROM Posts WHERE Upvotes NOT IN (SELECT MAX(Upvotes) FROM Posts GROUP BY Body);") 
```

我也提交了所有的更改，所以不是这样。SQLite3 模块安装正确，我可以在数据库上写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:12:27.473

不幸的是，在 SQLite3 中，您没有像`partition over row`这样的好功能，因此无法在一个查询中执行此操作，因此您必须以程序方式或迭代方式执行此操作。

出于性能原因，我建议您提取删除潜力的完整列表，然后将它们整体删除，例如。

```
# in your sql query
SELECT ROWID, AUTHOR, BODY
FROM   TABLE_NAME
ORDER BY AUTHOR, BODY, POINTS DESC 
```

然后在您的 Python 应用程序中，遍历您的结果集，并为 Author/Body 组合存储所有非第一个 ROWID（想想 CTRL-BREAK 样式编程），一旦您完成构建集删除行 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:31:26.460

由于您要删除除最高分值之外的所有值，因此以下操作就可以了：

```
delete from test
  where exists (select * from test t2
                where test.author = t2.author
                and test.body = t2.body
                and test.points < t2.points); 
```

它是对自身的基本连接，然后删除所有具有相同作者和正文但具有较低点值的值。

SqlFiddle在这里： [http ://sqlfiddle.com/#!7/64d62/3](http://sqlfiddle.com/#!7/64d62/3)

注意：一个警告是，如果多个作者/正文对具有相同的最大点值，那么所有这些值都将被保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:17:25.880

我还没有测试过，但这*可能*有效：

```
DELETE FROM TableName
    WHERE author, body, points NOT IN (SELECT author, body, MAX(points) as points
        FROM TableName 
    GROUP BY author, body) 
```

首先将其作为 SELECT 查询运行，以查看它是否会保留您想要的内容。

# actionscript-3 - Flash CS6 ActionScript 3 错误 #2025

> ID：11145878
> 
> 赞同：0
> 
> 时间：2012-06-21T20:03:46.413
> 
> 标签：actionscript-3, flash, removechild, addchild

我正在为一门课程制作网页，并尝试使用 ActionScript 3 进行导航。我对它应该如何工作的理解是，当您单击顶部的链接时，它会使用 removeChild 删除当前显示的所有内容，并且使用 addChild 添加新页面的内容。

从初始页面转到其中一个链接时，它工作正常。但是每当我从一个不是主页的页面转到另一个页面时，我都会得到：

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/removeChild() 在 nutshellMathReCoded4_fla::MainTimeline/hideOtherPages() 在 nutshellMathReCoded4_fla::MainTimeline/runSubtraction()

这是代码：

```
stop();
// Flash Imports
import flash.events.MouseEvent;
import flash.events.Event;
import flash.media.SoundMixer;

//Page Components //
// Home //
// Links
// Create Header & Nav //
// Logo Link
    var headerLogo:logoMainPage = new logoMainPage();
    headerLogo.x = 252.85;
    headerLogo.y = 18.00;
    //Addition Link
    var additionLink:addPageLink = new addPageLink();
    additionLink.x = 142.35;
    additionLink.y = 96.00;
    //Subtraction Link
    var subtractionLink:subPageLink = new subPageLink();
    subtractionLink.x = 208.60;
    subtractionLink.y = 144.60;
    // Multiplication Link
    var multiplicationLink:mulPageLink = new mulPageLink();
    multiplicationLink.x = 397.80;
    multiplicationLink.y = 100.00;
    // Division Link
    var divisionLink:divPageLink = new divPageLink();
    divisionLink.x = 597.95;
    divisionLink.y = 144.60;

//Animation
    var animation:mainAnimation = new mainAnimation();
    animation.x = 99.90;
    animation.y = 244.00;

//Addition // 
    var addSimpleX:additionSimpleX = new additionSimpleX();
    addSimpleX.x = 41;
    addSimpleX.y = 395.95;

    var addSimpleY:additionSimpleY = new additionSimpleY();
    addSimpleY.x = 364;
    addSimpleY.y = 395.95;

    var addSimpleAnswer:additionSimpleAnswer = new additionSimpleAnswer();
    addSimpleAnswer.x = 701;
    addSimpleAnswer.y = 395.95;

    var additionAddSign:additionSign = new additionSign();
    additionAddSign.x = 276.55;
    additionAddSign.y = 360.20;

    var additionEqualsSign:equalsSign = new equalsSign();
    additionEqualsSign.x = 613.95;
    additionEqualsSign.y = 360.20;

    var addSum:additionSummary = new additionSummary();
    addSum.x = 178.25;
    addSum.y = 202;

    var addTryOut:tryItOut = new tryItOut();
    addTryOut.x = 205.70;
    addTryOut.y = 475.65;

    var addDDLink:digDeeperLink = new digDeeperLink();
    addDDLink.x = 274.95;
    addDDLink.y = 696;

    var addTQLink:quizLink = new quizLink();
    addTQLink.x = 465;
    addTQLink.y = 696.50;

//Addition Deeper
    var addLong:additionExtended = new additionExtended();
    addLong.x = 193.00;
    addLong.y = 323.00;

    var addDDSum:additionDDSummary = new additionDDSummary();
    addDDSum.x = 222.40;
    addDDSum.y = 201.20;

    var addDDB2B:backToBasicsLink = new backToBasicsLink();
    addDDB2B.x = 271.95;
    addDDB2B.y = 696;

    var addDDTQ:quizLink = new quizLink();
    addDDTQ.x = 468;
    addDDTQ.y = 696;

//Subtraction
    var subSimpleX:subtractionSimpleX = new subtractionSimpleX();
    subSimpleX.x = 44;
    subSimpleX.y = 408.50;

    var subSimpleY:subtractionSimpleY = new subtractionSimpleY();
    subSimpleY.x = 367;
    subSimpleY.y = 408.50;

    var subSimpleAnswer:subtractionSimpleAnswer = new subtractionSimpleAnswer();
    subSimpleAnswer.x = 692.95;
    subSimpleAnswer.y = 408.50;

    var subtractionEqualsSign:equalsSign = new equalsSign();
    subtractionEqualsSign.x = 612.80;
    subtractionEqualsSign.y = 372.95

    var subtractionSubSign:subtractionSign = new subtractionSign();
    subtractionSubSign.x = 280.85;
    subtractionSubSign.y = 371.95;

    var subTryOut:tryItOut = new tryItOut();
    subTryOut.x = 221.8;
    subTryOut.y = 477.95;

    var subDDLink:digDeeperLink = new digDeeperLink();
    subDDLink.x = 274.95;
    subDDLink.y = 696;

    var subTQLink:quizLink = new quizLink();
    subTQLink.x = 465;
    subTQLink.y = 696.50;

    var subSum:subtractionSummary = new subtractionSummary();
    subSum.x = 147.30;
    subSum.y = 210.05;

// Subtraction Dig Deeper

    var subBudget:budget = new budget();
    subBudget.x = 367.95;
    subBudget.y = 400.90;

    var subExpenses:expenses = new expenses();
    subExpenses.x = 204.00;
    subExpenses.y = 513.40;

    var subDDT1:subtractionDD1 = new subtractionDD1();
    subDDT1.x = 264.05;
    subDDT1.y = 211;

    var subDDT2:subtractionDD2 = new subtractionDD2();
    subDDT2.x = 206.65;
    subDDT2.y = 351;

    var subDDT3:subtractionDD3 = new subtractionDD3();
    subDDT3.x = 131.80;
    subDDT3.y = 474.95;

    var subDDT4:subtractionDD4 = new subtractionDD4();
    subDDT4.x = 291.00;
    subDDT4.y = 463;

    var subCheckBudgetLink:checkBudgetLink = new checkBudgetLink();
    subCheckBudgetLink.x = 437;
    subCheckBudgetLink.y = 609.5;

    var subB2BLink:backToBasicsLink = new backToBasicsLink();
    subB2BLink.x = 271.95;
    subB2BLink.y = 696;

    var subDDTQLink:quizLink = new quizLink();
    subDDTQLink.x = 468;
    subDDTQLink.y = 696;

//Multiplication
    var mulSimpleX:multiplicationSimpleX = new multiplicationSimpleX();
    mulSimpleX.x = 30.85;
    mulSimpleX.y = 395.35;

    var mulSimpleY:multiplicationSimpleY = new multiplicationSimpleY();
    mulSimpleY.x = 370.85;
    mulSimpleY.y = 395.35;

    var mulSimpleAnswer:multiplicationSimpleAnswer = new multiplicationSimpleAnswer();
    mulSimpleAnswer.x = 691.90;
    mulSimpleAnswer.y = 395.35;

    var multiplicationMulSign:multiplicationSign = new multiplicationSign();
    multiplicationMulSign.x = 284.60;
    multiplicationMulSign.y = 365.95;

    var mulEqualsSign:equalsSign = new equalsSign();
    mulEqualsSign.x = 609.80;
    mulEqualsSign.y = 356.95;

    var mulSummary:multiplicationSummary = new multiplicationSummary();
    mulSummary.x = 145.30;
    mulSummary.y = 202.40;

    var mulTryOut:tryItOut = new tryItOut();
    mulTryOut.x = 218.80;
    mulTryOut.y = 461.95;

    var mulDDLink:digDeeperLink = new digDeeperLink();
    mulDDLink.x = 274.95;
    mulDDLink.y = 696;

    var mulTQLink:quizLink = new quizLink();
    mulTQLink.x = 465.00;
    mulTQLink.y = 696;

// Multiplication Deeper

    var mulDD1:multiplicationDD1 = new multiplicationDD1();
    mulDD1.x = 241.15;
    mulDD1.y = 209;

    var mulDD2:multiplicationDD2 = new multiplicationDD2();
    mulDD2.x = 297.05;
    mulDD2.y = 350.40;

    var mulDD3:multiplicationDD3 = new multiplicationDD3();
    mulDD3.x = 316.75;
    mulDD3.y = 393.65;

    var mulDD4:multiplicationDD4 = new multiplicationDD4();
    mulDD4.x = 297.55;
    mulDD4.y = 436.90;

    var mulB2BLink:backToBasicsLink = new backToBasicsLink();
    mulB2BLink.x = 271.95;
    mulB2BLink.y = 696;

    var mulDDTQL:quizLink = new quizLink();
    mulDDTQL.x = 468;
    mulDDTQL.y = 696;

// Division
    var divSimpleX:divisionSimpleX = new divisionSimpleX();
    divSimpleX.x = 42;
    divSimpleX.y = 397.5;

    var divSimpleY:divisionSimpleY = new divisionSimpleY();
    divSimpleY.x = 366.95;
    divSimpleY.y = 397.50;

    var divSimpleAnswer:divisionSimpleAnswer = new divisionSimpleAnswer();
    divSimpleAnswer.x = 698.95;
    divSimpleAnswer.y = 397.50;

    var divisionDivSign:divisionSign = new divisionSign();
    divisionDivSign.x = 277.80;
    divisionDivSign.y = 360.95;

    var divEqualsSign:equalsSign = new equalsSign();
    divEqualsSign.x = 609.80;
    divEqualsSign.y = 361.95;

    var divSummary:divisionSummary = new divisionSummary();
    divSummary.x = 112.50;
    divSummary.y = 202.20;

    var divTryOut:tryItOut = new tryItOut();
    divTryOut.x = 218.80;
    divTryOut.y = 466.95;

    var divDDLink:digDeeperLink = new digDeeperLink();
    divDDLink.x = 274.95;
    divDDLink.y = 696;

    var divTQLink:quizLink = new quizLink();
    divTQLink.x = 274.95;
    divTQLink.y = 696;

// Division Deeper

    var divDD1:divisionDD1 = new divisionDD1();
    divDD1.x = 239.60;
    divDD1.y = 215.00;

    var divDD2:divisionDD2 = new divisionDD2();
    divDD2.x = 328.65;
    divDD2.y = 336.70;

    var divDD3:divisionDD3 = new divisionDD3();
    divDD3.x = 308.95;
    divDD3.y = 381.20;

    var divB2BLink:backToBasicsLink = new backToBasicsLink();
    divB2BLink.x = 271.95;
    divB2BLink.y = 696;

    var divDDTQLink:quizLink = new quizLink();
    divDDTQLink.x = 468;
    divDDTQLink.y = 696;

// Quiz
    //Title
    var titleQuiz:quizTitle = new quizTitle();
    titleQuiz.x = 419.40;
    titleQuiz.y = 192;
    // Random Number Backgrounds
    var quizBG1:shortTextBG = new shortTextBG();
    quizBG1.x = 44.9;
    quizBG1.y = 283;

    var quizBG2:shortTextBG = new shortTextBG();
    quizBG2.x = 368.95;
    quizBG2.y = 283;

    var quizBG3:shortTextBG = new shortTextBG();
    quizBG3.x = 44.9;
    quizBG3.y = 360.25;

    var quizBG4:shortTextBG = new shortTextBG();
    quizBG4.x = 368.95;
    quizBG4.y = 360.25;

    var quizBG5:shortTextBG = new shortTextBG();
    quizBG5.x = 44.90;
    quizBG5.y = 440.20;

    var quizBG6:shortTextBG = new shortTextBG();
    quizBG6.x = 368.95;
    quizBG6.y = 440.20;

    var quizBG7:shortTextBG = new shortTextBG();
    quizBG7.x = 44.90;
    quizBG7.y = 518.80;

    var quizBG8:shortTextBG = new shortTextBG();
    quizBG8.x = 368.95;
    quizBG8.y = 518.80

    // Signs
    var quizAddSign:additionSign = new additionSign();
    quizAddSign.x = 280.05;
    quizAddSign.y = 251.90;

    var quizSubSign:subtractionSign = new subtractionSign();
    quizSubSign.x = 281.40;
    quizSubSign.y = 323.80;

    var quizMulSign:multiplicationSign = new multiplicationSign();
    quizMulSign.x = 288.20;
    quizMulSign.y = 414.05;

    var quizDivSign:divisionSign = new divisionSign();
    quizDivSign.x = 280.05;
    quizDivSign.y = 489.20;

    var quizAddEqualsSign:equalsSign = new equalsSign();
    quizAddEqualsSign.x = 603.90;
    quizAddEqualsSign.y = 251.90;

    var quizSubEqualsSign:equalsSign = new equalsSign();
    quizSubEqualsSign.x = 603.90;
    quizSubEqualsSign.y = 330.55;

    var quizMulEqualsSign:equalsSign = new equalsSign();
    quizMulEqualsSign.x = 603.90;
    quizMulEqualsSign.y = 409.20;

    var quizDivEqualsSign:equalsSign = new equalsSign();
    quizDivEqualsSign.x = 603.90;
    quizDivEqualsSign.y = 489.20;

    // Check quiz
    var quizCheck:checkQuiz = new checkQuiz();
    quizCheck.x = 369.95;
    quizCheck.y = 626.60;

    var answerWrong:wrongAnswer = new wrongAnswer();
    var answerCorrect:correctAnswer = new correctAnswer();

// Home Page //;

// Create Header & Nav //
// Logo
addChild(headerLogo);
addChild(additionLink);
addChild(subtractionLink);
addChild(multiplicationLink);
addChild(divisionLink);
addChild(animation);

headerLogo.addEventListener(MouseEvent.CLICK, runIndexPage);
function runIndexPage(e:MouseEvent):void
{
    // Hide other Pages
    hideOtherPages();

    addChild(animation);
    animation.gotoAndPlay(1);
}

// Addition Page //
additionLink.addEventListener(MouseEvent.CLICK, runAddition);
function runAddition(e:MouseEvent):void
{
    hideOtherPages();
    createAdditionPage();

}

subtractionLink.addEventListener(MouseEvent.CLICK, runSubtraction);
function runSubtraction(e:MouseEvent):void
{
        hideOtherPages();
        createSubtractionPage();
}

multiplicationLink.addEventListener(MouseEvent.CLICK, runMultiplication);
function runMultiplication(e:MouseEvent):void
{
        hideOtherPages();
        createMultiplicationPage();
}

divisionLink.addEventListener(MouseEvent.CLICK, runDivision);
function runDivision(e:MouseEvent):void
{
    hideOtherPages();
    createDivisionPage();
}

//Global Functions
function createAdditionPage():void
{
    addChild(addSimpleX);
    addChild(addSimpleY);
    addChild(addSimpleAnswer);
    addChild(additionAddSign);
    addChild(additionEqualsSign);
    addChild(addSum);
    addChild(addTryOut);
    addChild(addDDLink);
    addChild(addTQLink);
}

function createSubtractionPage():void
{
        addChild(subSimpleX);
        addChild(subSimpleY);
        addChild(subSimpleAnswer);
        addChild(subtractionSubSign);
        addChild(subtractionEqualsSign);
        addChild(subSum);
        addChild(subTryOut);
        addChild(subDDLink);
        addChild(subTQLink);
}

function createMultiplicationPage():void
{
        addChild(mulSimpleX);
        addChild(mulSimpleY);
        addChild(mulSimpleAnswer);
        addChild(multiplicationMulSign);
        addChild(mulEqualsSign);
        addChild(mulSummary);
        addChild(mulTryOut);
        addChild(mulDDLink);
        addChild(mulTQLink);
}

function createDivisionPage():void
{
        addChild(divSimpleX);
        addChild(divSimpleY);
        addChild(divSimpleAnswer);
        addChild(divisionDivSign);
        addChild(divEqualsSign);
        addChild(divSummary);
        addChild(divTryOut);
        addChild(divDDLink);
        addChild(divTQLink);
}

function hideOtherPages():void
{
    if(animation)
    {
        removeChild(animation);
        SoundMixer.stopAll();
    }

    else if(addSimpleX)
    {

        removeChild(addSimpleX);
        removeChild(addSimpleY);
        removeChild(addSimpleAnswer);
        removeChild(additionAddSign);
        removeChild(additionEqualsSign);
        removeChild(addSum);
        removeChild(addTryOut);
        removeChild(addDDLink);
        removeChild(addTQLink);
    }

    else if(addLong)
    {
        removeChild(addLong);
        removeChild(addDDSum);
        removeChild(addDDB2B);
        removeChild(addDDTQ);
    }

    else if(subSimpleX)
    {
        removeChild(subSimpleX);
        removeChild(subSimpleY);
        removeChild(subSimpleAnswer);
        removeChild(subtractionSubSign);
        removeChild(subtractionEqualsSign);
        removeChild(subSum);
        removeChild(subTryOut);
        removeChild(subDDLink);
        removeChild(subTQLink);
    }

    else if(subBudget)
    {
        removeChild(subBudget);
        removeChild(subExpenses);
        removeChild(subDDT1);
        removeChild(subDDT2);
        removeChild(subDDT3);
        removeChild(subDDT4);
        removeChild(subCheckBudgetLink);
        removeChild(subB2BLink);
        removeChild(subDDTQLink);
    }

    else if(mulSimpleX)
    {
        removeChild(mulSimpleX);
        removeChild(mulSimpleY);
        removeChild(mulSimpleAnswer);
        removeChild(multiplicationMulSign);
        removeChild(mulEqualsSign);
        removeChild(mulSummary);
        removeChild(mulDDLink);
        removeChild(mulTQLink);     
    }

    else if(mulDD1)
    {
        removeChild(mulDD1);
        removeChild(mulDD2);
        removeChild(mulDD3);
        removeChild(mulDD4);
        removeChild(mulB2BLink);
        removeChild(mulDDTQL);
    }

    else if(divSimpleX)
    {
        removeChild(divSimpleX);
        removeChild(divSimpleY);
        removeChild(divSimpleAnswer);
        removeChild(divisionDivSign);
        removeChild(divEqualsSign);
        removeChild(divSummary);
        removeChild(divTryOut);
        removeChild(divDDLink);
        removeChild(divTQLink);
    }

    else if(divDD1)
    {
        removeChild(divDD1);
        removeChild(divDD2);
        removeChild(divDD3);
        removeChild(divB2BLink);
        removeChild(divDDTQLink);
    }

    else if(titleQuiz)
    {
        removeChild(titleQuiz);
        removeChild(quizBG1);
        removeChild(quizBG2);
        removeChild(quizBG3);
        removeChild(quizBG4);
        removeChild(quizBG5);
        removeChild(quizBG6);
        removeChild(quizBG7);
        removeChild(quizBG8);
        removeChild(quizAddSign);
        removeChild(quizSubSign);
        removeChild(quizMulSign);
        removeChild(quizDivSign);
        removeChild(quizAddEqualsSign);
        removeChild(quizSubEqualsSign);
        removeChild(quizMulEqualsSign);
        removeChild(quizDivEqualsSign);
        removeChild(quizCheck);

        //Dynamic Quiz Removal Section ****
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:12:24.107

这段代码看起来很可怕，但我不会深入研究它，因为这不是问题的优点。问题是您只检查（在函数 hideOtherPages() 中）对象是否存在，而不是如果将它们添加到 Stage。您无法从舞台上移除不存在的对象，这就是您收到此错误的原因，它说明了这一点。

1.  您可以在尝试删除对象之前检查您的对象是否已添加到舞台。
2.  您可以通过简单的循环从对象中删除所有子对象。

在这种情况下，第二个选项是最好的。您将创建一个 Sprite，然后...

```
var myContainer:Sprite = new Sprite();
addChild(myContainer);

// Here you are adding children/first set of visible objects
myContainer.addChild(myObject);
// ... 
```

现在，在您将新的一组对象添加到容器之前，您可以调用“clearContainer()”函数来删除以前的对象。

```
function clearContainer() : void {
    while(myContainer.numChildren) {
        myContainer.removeChildAt(0);
    }
} 
```

因此，您的代码将大大减少，因为您不会被迫手动删除每个项目...

或者，如果您想保持蛮力，您可以在手动删除对象之前检查对象是否存在，您可以使用函数 getChildByName(name:String) 来做到这一点。您可以为您的对象设置一个属性“名称”，然后检查“getChildByName”是否会返回对象或 null，如果它是一个对象，您将删除它。所以一开始它看起来像这样：

```
var divisionLink:divPageLink = new divPageLink();
divisionLink.x = 597.95;
divisionLink.y = 144.60;
divisionLink.name = "divisionLink"; // setting a name 
```

您的删除将如下所示：

```
else if(divisionLink && this.getChildByName("divisionLink"))
{
    removeChild(divisionLink);
} 
```

并对每个项目执行此操作。这既乏味又缓慢，因此我不推荐它，但出于教育目的将其包括在内。

# c++ - 如何将基本代码片段/模式转换为使用 c+11 可变参数模板

> ID：11145881
> 
> 赞同：1
> 
> 时间：2012-06-21T20:03:55.700
> 
> 标签：c++, template-specialization, variadic-templates

以下简单的代码模式在图形编程中非常常见。
它创建一个层数组并在它们之上循环。

```
struct Layer
{
    int n;
    void operator()(float value)
    {
    }
};

struct AnotherLayer
{
    int n;
    int m;
    void operator()(float value)
    {
    }
};

void process_layers(Layer_t* layer, size_t size, float value) 
{
    for (size_t n = 0; n < size; ++n)
        layer[n](value);
}

Layer a = {1};
Layer b = {2};
AnotherLayer c = {2,3};
typedef std::function < void (float) > Layer_t;
Layer_t layers [] = {a,b,c};
process_layers(layers, sizeof(layers)/sizeof(Layer), 100); 
```

我想将其转换为在 c++11 中使用可变参数模板。任何想法我怎么能做到这一点。这就是我希望它看起来的样子。有任何想法吗？这甚至可能吗？

```
template <int n>
struct Layer
{
    void operator()(float value)
    {
    }
};

template <int n, int m>
struct AnotherLayer
{
    void operator()(float value)
    {
    }
};

template <typename Layer1, typename Layer2, ...>
struct Layers  //process_layers
{
    void operator()(float value)
    {
        for (size_t n = 0; n < SIZEOF(Layer1,Layer2,...); ++n)
            Layer[N]()(value);
    }
}; 
```

然后我可以做到这一点。

```
typedef Layers<Layer<1>, Layer<2>, AnotherLayer<3,8> > funky_layer_t;
typedef Layers<Layer<4>, Layer<5>, Layer<5>, AnotherLayer<6,7> > standard_layer_t;
typedef Layers<funky_layer_t, standard_layer_t> awesome_layer_t;

awesome_layer_t()(100); 
```

注意：使用第二种方法，构建层的所有参数在编译时都是已知的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:18:02.330

您提供的示例非常简单，可以使用可变参数模板重做。

```
template<typename Func> void process(Func &&f) {} // base case for zero items

// overload for at least one item
template<typename Func, typename FirstItem, typename... Items>
void process(Func &&f, FirstItem &&fi, Items &&...is) {
    std::forward<Func>(f)(std::forward<FirstItem>(fi));          // f(fi);
    process(std::forward<Func>(f), std::forward<Items>(is)...);  // process(f,is...);
}

Layer a = {1};
Layer b = {2};
Layer c = {3};

process([](Layer &l){ l(100); },
        a, b, c); 
```

另请注意，这避免了原件中所有不必要的副本。（当然你也可以通过这样做来避免它们`Layer layers[] = {{1},{2},{3}};`）

* * *

我不确定您以后的评论和代码与在图层集合上运行操作有何关系。

您想在编译时执行的计算究竟是什么？

* * *

要针对新示例进行调整，`process()`根本不需要更改，您只需要创建一个可以处理每种类型的函子。（多态 lambda 在这里会有所帮助，但我们必须使用显式仿函数类型）

```
Layer a = {1};
Layer b = {2};
AnotherLayer c = {2,3};

struct TheOperation {
    template<typename T>
    void operator() (T &t) {
        t(100);
    }
};

process(TheOperation(),
    a, b, c); 
```

* * *

这是您`awesome_layer_t`为正确可变参数模板语法而转录的内容，但我仍然看不到您想要完成什么，所以我不能说这是否是一个好方法。这实际上并没有`operator()`在编译时调用 s，它只是安排在运行时默认构造一堆对象，然后在运行时`operator()`再次调用。

```
template <int n>
struct Layer
{
    int operator()(float value)
    {
        std::printf("L %d %e\n",n,value);
        return 0;
    }
};

template <int n, int m>
struct AnotherLayer
{
    int operator()(float value)
    {
        std::printf("AL %d %d %e\n",n,m,value);
        return 0;
    }
};

template <typename... Ls>
struct Layers  //process_layers
{
    int operator()(float value)
    {
        struct Tmp {
            void operator() (...) {}
        };
        Tmp()( Ls()(value)...);
        return 0;
    }
};

typedef Layers<Layer<1>, Layer<2>, AnotherLayer<3,8> > funky_layer_t;
typedef Layers<Layer<4>, Layer<5>, Layer<5>, AnotherLayer<6,7> > standard_layer_t;
typedef Layers<funky_layer_t, standard_layer_t> awesome_layer_t;

int main() {
    awesome_layer_t()(100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:10:11.003

我相信你可以使用普通的函数模板来做到这一点，如下所示：

```
/* Base case: If you have no layers to apply, do nothing. */
void executeLayers() {
    // Deliberately empty.
}

/* Recursive step: If you have at least one layer, apply it, then apply the
 * remaining layers.
 */
template <typename Head, typename... Tail> 
void executeLayers(Head head, Tail... tail) {
    head();              // Execute the first layer
    executeLayers(tail); // Execute the remaining layers
} 
```

然后你可以做这样的事情：

```
executeLayers(layer1, layer2, layer3, layer4, layer5); 
```

希望这可以帮助！

# java - HTTP 状态 405 - 不支持请求方法“POST”（Spring MVC）

> ID：11145884
> 
> 赞同：24
> 
> 时间：2012-06-21T20:03:59.563
> 
> 标签：java, javascript, spring, hibernate, methods

我收到此错误：`HTTP Status 405 - Request method 'POST' not supported`

我要做的是制作一个带有下拉框的表单，该下拉框根据在另一个下拉框中选择的其他值填充。例如，当我在`customerName`框中选择一个名称时，`onChange`应该运行 .jsp 页面中的函数，然后再次加载提交的页面，并在`customerCountry`框中使用相应的值。

但是我收到了这个 HTTP 状态 405 错误。我在互联网上搜索了解决方案，但找不到任何有用的东西。这是我的代码的相关部分：

*jsp页面的一部分*

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Insert title here</title>
            <style>
            .error { color: red; }
            </style>

        <script>
            function repopulate(){  
                document.deliveryForm.submit();
            }

            function setFalse(){
                document.getElementById("hasId").value ="false";
                document.deliveryForm.submit();
                // document.submitForm.submit(); (This was causing the error)

            }
        </script>

    </head>
    <body>

        <h1>Create New Delivery</h1>

        <c:url var="saveUrl" value="/test/delivery/add" />
        <form:form modelAttribute="deliveryDtoAttribute" method="POST" action="${saveUrl}" name="deliveryForm">
            <table>

                <tr>
                    <td><form:hidden id="hasId" path="hasCustomerName" value="true"/></td>
                </tr>

                <tr>
                    <td>Customer Name</td>
                    <td><form:select path="customerName" onChange="repopulate()">
                        <form:option value="" label="--- Select ---" />
                        <form:options items="${customerNameList}" />
                        </form:select>
                    </td>
                    <td><form:errors path="customerName" cssClass="error" /></td>
                </tr>

                <tr>
                    <td>Customer Country</td>
                    <td><form:select path="customerCountry">
                        <form:option value="" label="--- Select ---" />
                        <form:options items="${customerCountryList}" />
                        </form:select>
                    </td>
                    <td><form:errors path="customerCountry" cssClass="error" /></td>
                </tr>

        </form:form>

        <form:form name="submitForm">
        <input type="button" value="Save" onClick="setFalse()"/>
        </form:form>

    </body>
</html> 
```

*控制器的一部分：*

```
@RequestMapping(value = "/add", method = RequestMethod.GET)
    public String getDelivery(ModelMap model) {
        DeliveryDto deliveryDto = new DeliveryDto();

        model.addAttribute("deliveryDtoAttribute", deliveryDto);
        model.addAttribute("customerNameList",
                customerService.listAllCustomerNames());
        model.addAttribute("customerCountryList", customerService
                    .listAllCustomerCountries(deliveryDto.getCustomerName()));
        return "new-delivery";
    }

    // I want to enter this method if hasId=true which means that a value in the CustomerName 
    // drop down list was selected. This should set the CountryList to the corresponding values 
    // from the database. I want this post method to be triggered by the onChange in the jsp page

    @RequestMapping(value = "/add", method = RequestMethod.POST, params="hasCustomerName=true")
    public String postDelivery(
            @ModelAttribute("deliveryDtoAttribute") DeliveryDto deliveryDto,
            BindingResult result, ModelMap model) {

            model.addAttribute("deliveryDtoAttribute", deliveryDto);

            model.addAttribute("customerNameList",
                    customerService.listAllCustomerNames());
            model.addAttribute("customerCountryList", customerService
                    .listAllCustomerCountries(deliveryDto.getCustomerName()));

            return "new-delivery";
    }

    // This next post method should only be entered if the save button is hit in the jsp page

    @RequestMapping(value = "/add", method = RequestMethod.POST, params="hasCustomerName=false")
    public String postDelivery2(
            @ModelAttribute("deliveryDtoAttribute") @Valid DeliveryDto deliveryDto,
            BindingResult result, ModelMap model) {

        if (result.hasErrors()) {

            model.addAttribute("deliveryDtoAttribute", deliveryDto);

            model.addAttribute("customerNameList",
                    customerService.listAllCustomerNames());
            model.addAttribute("customerCountryList", customerService
                    .listAllCustomerCountries(deliveryDto.getCustomerName()));

            return "new-delivery";
        } else {

            Delivery delivery = new Delivery();

            //Setters to set delivery values

            return "redirect:/mis/home";
        }

    } 
```

我怎么会收到这个错误？任何帮助将非常感激！谢谢

**编辑：**更改`hasId`为`hasCustomerName`. 我仍然得到`HTTP Status 405 - Request method 'POST' not supported`错误。

**EDIT2：**注释掉`setFalse`函数中导致错误的行

// D

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-11T15:07:24.053

我不确定这是否有帮助，但我遇到了同样的问题。

您正在使用带有 CSRF 保护的 springSecurityFilterChain。这意味着当您通过 POST 请求发送表单时，您必须发送令牌。尝试将下一个输入添加到您的表单中：

```
<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-24T20:53:37.937

**检查您是否返回 @ResponseBody 或 @ResponseStatus**

我有一个类似的问题。我的控制器看起来像这样：

```
@RequestMapping(value="/user", method = RequestMethod.POST)
public String updateUser(@RequestBody User user){
    return userService.updateUser(user).getId();
} 
```

使用 POST 请求调用时，总是出现以下错误：

**HTTP 状态 405 - 不支持请求方法“POST”**

过了一会儿，我发现实际上调用了该方法，但是因为没有 @ResponseBody 并且没有 @ResponseStatus Spring MVC 引发了错误。

要解决这个问题，只需添加一个 @ResponseBody

```
@RequestMapping(value="/user", method = RequestMethod.POST)
public @ResponseBody String updateUser(@RequestBody User user){
    return userService.updateUser(user).getId();
} 
```

或您的方法的@ResponseStatus。

```
@RequestMapping(value="/user", method = RequestMethod.POST)
@ResponseStatus(value=HttpStatus.OK)
public String updateUser(@RequestBody User user){
    return userService.updateUser(user).getId();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T22:21:34.653

您可能需要更改线路

```
@RequestMapping(value = "/add", method = RequestMethod.GET) 
```

至

```
@RequestMapping(value = "/add", method = {RequestMethod.GET,RequestMethod.POST}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T21:02:23.380

问题是您的控制器需要一个参数*hasId=false*或*hasId=true*，但您没有传递它。您的隐藏字段具有 id *hasId*但作为*hasCustomerName*传递，因此没有映射匹配。

将隐藏字段的路径更改为*hasId*或将映射参数更改为期望*hasCustomerName=true*或*hasCustomerName=false*。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-22T09:43:31.130

我发现了导致 HTTP 错误的问题。

在`setFalse()`保存按钮触发的函数中，我的代码试图提交包含该按钮的表单。

```
 function setFalse(){
            document.getElementById("hasId").value ="false";
            document.deliveryForm.submit();
            document.submitForm.submit(); 
```

当我删除`document.submitForm.submit();`它时：

```
 function setFalse(){
            document.getElementById("hasId").value ="false";
            document.deliveryForm.submit() 
```

@Roger Lindsjö 感谢您发现我没有传递正确参数的错误！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-20T15:25:00.560

由于其他原因（`test-response` 未在 csrf 令牌中添加 url 模式）我遇到了类似的问题，我通过在以下属性中允许我的 URL 模式来解决它`config/local.properties`：

`csrf.allowed.url.patterns = /[^/]+(/[^?])+(sop-response)$,/[^/]+(/[^?])+(merchant_callback)$,/[^/]+(/[^?])+(hop-response)$`

修改为

`csrf.allowed.url.patterns = /[^/]+(/[^?])+(sop-response)$,/[^/]+(/[^?])+(merchant_callback)$,/[^/]+(/[^?])+(hop-response)$,/[^/]+(/[^?])+(test-response)$`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-07T19:57:51.050

在我的情况下，网址以 / 结尾

paymentUrl(old)= /get-details/

我刚刚删除了尾随 /

paymentUrl(new)= /get-details

它奏效了

# java - 如何配置 log4j 以启用/禁用对文件的日志记录？

> ID：11145887
> 
> 赞同：0
> 
> 时间：2012-06-21T20:04:19.737
> 
> 标签：java, log4j

我编写了一个小型控制台实用程序。在整个应用程序中，我在开发时使用 slf4j/log4j 将调试、跟踪、信息语句记录到控制台。现在我已经完成开发并想要发布它，我想禁用到控制台的所有输出，除了几个特定的​​记录器，并将所有剩余的记录器发送到一个文本文件。

从理论上讲，这应该相当容易。我创建了 2 个附加程序（一个 ConsoleAppender 和一个 FileAppender）。我已将 ConsoleAppender 与控制台上所需的特定记录器和根级别的 FileAppender 相关联。这工作正常。

我现在的问题是，如果我想完全禁用 FileAppender，我不知道该怎么做。如果我将 DenyAllFilter 添加到 FileAppender，它将阻止将任何内容写入文件，但仍会创建文件。如果我从 ROOT 记录器中删除 FileAppender，我会将 Log4J 写入 StdErr：

```
log4j:WARN No appenders could be found for logger (org.springframework.context.support.ClassPathXmlApplicationContext).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

如果我将 ROOT 级别设置为 OFF，我已将自定义调试级别设置为仍输出的各个记录器。

如果我将 LoggerRepository 级别设置为 OFF，则所有记录器（我想转到 STDOUT 和文件的记录器）都将关闭。

有什么方法可以轻松做到这一点？理想情况下，我希望能够完全禁用文件附加程序，但是如果需要，可以提供一个命令行开关来启用它。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'>

    <appender name="STDOUT" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{5} - %X{messageId} - %m%n" />
<!--            <param name="ConversionPattern" value="%m%n" /> -->
        </layout>
    </appender>

    <appender name="LOGTXT" class="org.apache.log4j.FileAppender">
        <param name="file" value="lss-client.log" />
        <param name="append" value="false" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{5} - %X{messageId} - %m%n" />
        </layout>
<!--        <filter class="org.apache.log4j.varia.DenyAllFilter"/> -->
    </appender>

    <!-- Spring Loggers -->
    <logger name="org.springframework">
        <level value="INFO" />
    </logger>

    <logger name="org.springframework.ws.client.MessageTracing.sent">
        <level value="TRACE" />
    </logger>   

    <logger name="org.springframework.ws.client.MessageTracing.received">
        <level value="TRACE" />
    </logger>   

    <logger name="com.cws.cs.Client" >
        <level value="INFO" />
        <appender-ref ref="STDOUT" />
    </logger>

    <root>
        <level value="INFO" />
        <appender-ref ref="LOGTXT" /> 
    </root>
</log4j:configuration> 
```

谢谢！

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:19:26.697

很确定 Slf4J/Log4J 在您配置`FileAppender`.

我认为您最好的选择是拥有 2 种不同且完整的 Log4J 配置，并根据您的命令行参数选择您在启动时加载的配置。

在伪代码中：

```
public static void main(String[] args){
    //if log to file arg = true
        DOMConfigurator.configure("logToFile.log4j.xml");
    //else
        DOMConfigurator.configure("logToConsoleOnly.log4j.xml");
} 
```

**编辑**

此外，如果您不喜欢维护两个配置文件的想法。您可以使用通用组件（可能是弹簧材料和其他组件）创建一个配置，然后根据您的参数，以编程方式配置`FileAppender`：

```
public static void main(String[] args){

    DOMConfigurator.configure("log4j.xml");
    //if log to file arg = true{
        // Define layout
        PatternLayout layout = new PatternLayout();
        layout.setConversionPattern("%d{ISO8601} %-5p %c{5} - %X{messageId} - %m%n");

        // Create appender
        FileAppender appender = new FileAppender();
        appender.setFile("lss-client.log");
        appender.setLayout(layout);
        appender.activateOptions();

        // Get root logger and add appender.
        log = Logger.getRootLogger();
        log.setLevel(Level.INFO);
        log.addAppender(appender);
    }
} 
```

# javascript - 动态填充表格时的突出显示和排序问题

> ID：11145893
> 
> 赞同：1
> 
> 时间：2012-06-21T20:04:42.703
> 
> 标签：javascript, jquery, jquery-datatables

我试图让我的表格的每一行都有一个复选框列，以及悬停时要突出显示的行。当数据是在 html 文件上声明的静态数据时，它可以正常工作，但是当从服务器检索数据时（我使用 $.getJSON），排序变得一团糟，高亮停止工作。

它还为表中的每一行显示此消息。

> 数据表警告：从第 0 行的数据源请求未知参数“5”

这是我的代码：

```
$(function () 
{
    var oTable;
    var tRow; 

    var checkboxIdsArray = new Array();
    var allChecked = false;

        // To generate the checkbox for each row
        var nCloneTh = document.createElement('th');
    var nCloneTd = document.createElement('td');
    nCloneTd.innerHTML = '<input type="checkbox" id="op_checkbox" />';
        nCloneTd.className = "center";

    // Deal with the checbox selection  
    $('#op_checkbox').live('click', function()
    {
        var operatorId = $(this).parents('tr').attr('id');
    });

    $('#example thead tr').each(function () 
    {
        this.insertBefore(nCloneTh, this.childNodes[0]); // Add the header before the first header
        });

    // Instantiate the DataTable
    oTable = $('#example').dataTable({"aaSorting": [[ 0, "asc" ]]});

    $.getJSON('../../controller/UserController.php/getUsers',
    function(data)
    {
        $.each(data, function(i, item)
        {
            oTable.fnAddData(
                [
                    item.idUser,
                    item.nameUser,
                    item.telephoneUser,
                    item.cnpjUser,
                    item.inscEstUser
                ]
            );
        });

        $('#example tbody tr').each(function () 
            {
                this.insertBefore(nCloneTd.cloneNode(true), this.childNodes[0]); // Add the checkbox to the td's
            });
    });

    // Deals with the highlight of the rows 
    $('#example tbody tr').hover(function() 
        {
            tRow = this; 
            $(this).children().addClass('highlighted');
        }, 
        function() 
        {
            var nTrs = oTable.fnGetNodes();
            $(tRow).children().removeClass('highlighted');
        } 
    );

    // Deals with the export options
    var oTableTools = new TableTools( oTable, 
    {
            "aButtons": 
            [
                {
                    "sExtends":    "div",
                    "sButtonText": "Hello world"
                }
            ]
    });

    $('#demo').before( oTableTools.dom.container );

        // Deals with the check all button click
    $('#checkall_link').live('click', function()
    {
        var i = 0; 
        if(!allChecked)
        {
            $(oTable.fnGetNodes()).each(function()
            {
                allChecked = true;
                $('#checkall_link').text('Uncheck all');
                this.childNodes[0].childNodes[0].checked = true; // Set all checkbox to checked
                checkboxIdsArray[i] = this.childNodes[0].childNodes[0].id; // Store the current checkbox id the checkboxIds array
                i++; 
            });
        }
        else
        {
            $(oTable.fnGetNodes()).each(function()
            {
                allChecked = false;
                $('#checkall_link').text('Check all');
                this.childNodes[0].childNodes[0].checked = false; // Set all checkbox to checked
                checkboxIdsArray = [];
                console.log(checkboxIdsArray);
            });
        }
    });

    $('#manage_del').click(function()
    {
        if($(this).attr('class') == 'disabled')
        {
            alert("disabled");          
        }
        else
        {
            alert("enabled");
        }
    });

    $('#manage_new').click(function()
    {
        if($(this).attr('class') == 'disabled')
        {
            alert("disabled");          
        }
        else
        {
            alert("enabled");
        }
    });
}); 
```

这是我的桌子的样子。[http://imgur.com/gpiu8](http://imgur.com/gpiu8)

正如您在右侧的箭头中看到的那样，它创建了另一列（可能是因为正在添加复选框），左箭头您可以看到第二列被突出显示，但选中的标题是第一列（带有复选框）。当我将行悬停时，它不会突出显示。

任何帮助将不胜感激。谢谢。

* * *

**更新**

现在使用delegate()，但还不行。

```
// Deals with the highlight of the rows 
$('#example tbody').delegate('tr', 'hover', function() 
{
    tRow = this; 
    $(this).children().addClass('highlighted');
}, 
function() 
{
    var nTrs = oTable.fnGetNodes();
    $(tRow).children().removeClass('highlighted');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:06:03.920

我会亲自使用委托（主要是因为我从来没有让我的悬停示例为您使用动态内容）

下面是一些示例代码，向您展示如何使用委托：

缩略图列表的示例设置：

```
<ul>
    <li>
        <img src="http://www.dummyimage.com/64x64/000/fff" />
        <p>some title text</p>            
    </li>
</ul>​

// attach the handler via delegate()
$(document).delegate("li", "hover", function() { // this works because the delegate function looks for all li's that are children to the document.
    $(this).children('p').fadeToggle("fast");
});

// after you've attached the handler create some elements.
setTimeout(function() {
    var list = $('ul'),
        node = list.children('li'),
        i = 25;
    while (i) {
        list.append(node.clone());
        i--;
    }
}, 1000);​ 
```

[现场演示](http://jsfiddle.net/rlemon/58UvN/3/)

# plugins - 程序集必须在隔离错误中注册

> ID：11145900
> 
> 赞同：7
> 
> 时间：2012-06-21T20:05:14.617
> 
> 标签：plugins, workflow-foundation-4, dynamics-crm-2011, workflow-activity

我正在尝试将自定义工作流活动加载到 crm 服务器上。我将项目加载到服务器上，并一直在使用 CRM 插件注册工具。服务器是 CRM2011，因此支持 .NET 4.0 活动。但是，当我按下“注册”按钮（程序集成功加载到工具后）时，会出现以下错误：

```
`Unhandled Exception: System.ServiceModel.FaultException'1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Action failed for assembly 'ExecuteSQLJob, Version=1.0.0.0, Culture=neutral, PublicKeyToken=914788311ab3af7d': **Assembly must be registered in isolation**.
Detail: <OrganizationServiceFault xmlns="http://schemas.microsoft.com/xrm/2011/Contracts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <ErrorCode>-2147220906</ErrorCode>
  <ErrorDetails xmlns:a="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Action failed for assembly 'ExecuteSQLJob, Version=1.0.0.0, Culture=neutral, PublicKeyToken=914788311ab3af7d': Assembly must be registered in isolation.</Message>
  <Timestamp>2012-06-21T19:50:30.5216535Z</Timestamp>
  <InnerFault>
    <ErrorCode>-2147220906</ErrorCode>
    <ErrorDetails xmlns:a="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
    <Message>Action failed for assembly 'ExecuteSQLJob, Version=1.0.0.0, Culture=neutral, PublicKeyToken=914788311ab3af7d': Assembly must be registered in isolation.</Message>
    <Timestamp>2012-06-21T19:50:30.5216535Z</Timestamp>
    <InnerFault i:nil="true" />
    <TraceText i:nil="true" />
  </InnerFault>
  <TraceText i:nil="true" />
</OrganizationServiceFault>`

`Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)`

`Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Xrm.Sdk.IOrganizationService.Create(Entity entity)
   at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.CreateCore(Entity entity)
   at PluginRegistrationTool.RegistrationHelper.RegisterAssembly(CrmOrganization org, String pathToAssembly, CrmPluginAssembly assembly) in C:\hbs\apps\prod\hbs\downloads\crm2011\crm2011_MicrosoftDynamicsCRM2011SDK\sdk\tools\pluginregistration\RegistrationHelper.cs:line 227
   at PluginRegistrationTool.PluginRegistrationForm.btnRegister_Click(Object sender, EventArgs e) in C:\hbs\apps\prod\hbs\downloads\crm2011\crm2011_MicrosoftDynamicsCRM2011SDK\sdk\tools\pluginregistration\PluginRegistrationForm.cs:line 452` 
```

隔离注册是什么意思？只是程序集在服务器上保存位置的问题还是更复杂？

到目前为止，我一直在关注 MSDN 的教程，但找不到对此的解释。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T20:52:49.213

如果您不是部署管理员，那么您需要在隔离模式下注册它。

[http://blogs.msdn.com/b/crminthefield/archive/2011/08/17/error-message-assembly-must-be-registered-in-isolation-when-registering-plugins-in-microsoft-dynamics- crm-2011.aspx](http://blogs.msdn.com/b/crminthefield/archive/2011/08/17/error-message-assembly-must-be-registered-in-isolation-when-registering-plugins-in-microsoft-dynamics-crm-2011.aspx)

![将用户添加为部署管理员](../Images/c7a81e992ab2b630ebf33d7ca4227327.png)

# php - 使用php从电话号码中去除国际电话代码

> ID：11145903
> 
> 赞同：0
> 
> 时间：2012-06-21T20:05:34.813
> 
> 标签：php, mysql, function

我有 php mysql 应用程序，我希望电话号码以特定格式保存。经过一番谷歌搜索后，我达到了这个功能：

```
function RemoveExt($phone) {
    if(substr($phone,0,1) == '+' || substr($phone, 0,2) == 00){
        $phone = preg_replace('/[^\d]/', '', $phone);
        }

    $phone=trim($phone);
    $prefixs=array('0097150','0097156','0097152','0097155', '97150','97156','97155','97152','050','056','055','052','00');

    $replace=array('050','056','052','055','050','056','055','052','050','056','055','052','00');
      $count = count($prefixs); 
for($i = 0; $i < $count; $i++)
    {
        if(strncmp($phone, $prefixs[$i], strlen($prefixs[$i])) == 0){

            $phone = preg_replace('/^'.$prefixs[$i].'/i','',$phone);
             $ext=$replace[$i];
            return array('phone' => $phone, 'ext' => $ext);
        }else{
        return array('phone' => $phone, 'ext' => $ext); 
        } 
    }
} 
```

例如电话号码+971501234567 => “+”是国际代码，“971”是国家代码，“50”是移动网络代码，“1234567”是手机号码。

注意到我们有不止一个移动代码。我需要从号码中保存两部分（移动网络代码，手机号码）的问题例如：+971501234567将保存为（050）移动网络代码和（1234567）手机号码。

谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:11:47.527

如果它们总是采用 +971501234567 的形式，只需去掉最后 9 个数字。从这些中，将最后七个作为手机号码，在前两个前面加上一个 0 作为移动网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:19:52.950

我要分享工人阶级：-

```
 function RemoveExt($phone) {

    if(substr($phone,0,1) == '+'){
        $phone = preg_replace('/[^\d]/', '00', $phone);
        }

    $prefix=array('0097150','0097156','0097155','0097152','97150','97156','97155','97152','050','056','055','052','00');

    $replace=array('050','056','055','052','050','056','055','052','050','056','055','052','00');
      $count =count($prefix);
      $counter=0;
      while( $counter < $count){
            if(strncmp($phone, $prefix[$counter] , strlen($prefix[$counter])) == 0){

                $phone=substr($phone, strlen($prefix[$counter]));
                $ext=$replace[$counter];

            }
            $counter++;
        }
        return array('phone' => $phone, 'ext' => $ext);
} 
```

希望帮助某人。

# haskell - NoMonomorphismRestriction 有助于保持共享？

> ID：11145904
> 
> 赞同：10
> 
> 时间：2012-06-21T20:05:35.827
> 
> 标签：haskell, ghc, data-sharing, monomorphism-restriction

当我偶然发现这种奇怪的行为时，我试图回答[另一个关于多态性与共享的问题。](https://stackoverflow.com/questions/11145503/why-does-adding-a-polymorphic-type-signature-degrade-performance)

在 GHCi 中，当我显式定义一个多态常量时，它没有得到任何共享，这是可以理解的：

```
> let fib :: Num a => [a]; fib = 1 : 1 : zipWith (+) fib (tail fib)
> fib !! 30
1346269
(5.63 secs, 604992600 bytes) 
```

另一方面，如果我尝试通过省略类型签名并禁用单态限制来达到同样的效果，我的常量会突然被共享！

```
> :set -XNoMonomorphismRestriction
> let fib = 1 : 1 : zipWith (+) fib (tail fib)
> :t fib
fib :: Num a => [a]
> fib !! 50
20365011074
(0.00 secs, 2110136 bytes) 
```

为什么？！

呃......当使用优化编译时，即使禁用了单态限制，它也很快。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T22:34:24.460

通过给出明确的类型签名，您可以防止 GHC 对您的代码做出某些假设。我将展示一个示例（取自这个[问题](https://stackoverflow.com/questions/8270548/effects-of-monomorphism-restriction-on-type-class-constraints)）：

```
foo (x:y:_) = x == y
foo [_]     = foo []
foo []      = False 
```

根据 GHCi，此函数的类型是`Eq a => [a] -> Bool`，正如您所期望的。但是，如果您`foo`使用此签名声明，您将收到“模糊类型变量”错误。

这个函数只能在没有类型签名的情况下工作的原因是因为类型检查在 GHC 中是如何工作的。当您省略类型签名时，`foo`假定`[a] -> Bool`某些固定类型具有单型`a`。一旦你完成了绑定组的输入，你就可以概括这些类型。那就是你得到`forall a. ...`.

另一方面，当您声明多态类型签名时，您明确声明它`foo`是多态的（因此类型`[]`不必与第一个参数的类型匹配）并且繁荣，您会得到模棱两可的类型变量。

现在，知道了这一点，让我们比较一下核心：

```
fib = 0:1:zipWith (+) fib (tail fib)
-----
fib :: forall a. Num a => [a]
[GblId, Arity=1]
fib =
  \ (@ a) ($dNum :: Num a) ->
    letrec {
      fib1 [Occ=LoopBreaker] :: [a]
      [LclId]
      fib1 =
        break<3>()
        : @ a
          (fromInteger @ a $dNum (__integer 0))
          (break<2>()
           : @ a
             (fromInteger @ a $dNum (__integer 1))
             (break<1>()
              zipWith
                @ a @ a @ a (+ @ a $dNum) fib1 (break<0>() tail @ a fib1))); } in
    fib1 
```

对于第二个：

```
fib :: Num a => [a]
fib = 0:1:zipWith (+) fib (tail fib)
-----
Rec {
fib [Occ=LoopBreaker] :: forall a. Num a => [a]
[GblId, Arity=1]
fib =
  \ (@ a) ($dNum :: Num a) ->
    break<3>()
    : @ a
      (fromInteger @ a $dNum (__integer 0))
      (break<2>()
       : @ a
         (fromInteger @ a $dNum (__integer 1))
         (break<1>()
          zipWith
            @ a
            @ a
            @ a
            (+ @ a $dNum)
            (fib @ a $dNum)
            (break<0>() tail @ a (fib @ a $dNum))))
end Rec } 
```

与`foo`上面一样，使用显式类型签名，GHC 必须将`fib`其视为潜在的多态递归值。我们*可以*将一些不同的`Num`字典传递给`fib`in `zipWith (+) fib ...`，此时我们将不得不丢弃大部分列表，因为不同`Num`意味着不同`(+)`。当然，一旦您使用优化进行编译，GHC 会注意到`Num`字典在“递归调用”期间永远不会更改，并将其优化掉。

在上面的核心中，您可以看到 GHC 确实一次又一次地给出`fib`了一个`Num`字典（名为）。`$dNum`

因为`fib`在整个绑定组的泛化完成之前假设没有类型签名是单态的，所以`fib`子部分被赋予与整体完全相同的类型`fib`。多亏了这一点，`fib`看起来像：

```
{-# LANGUAGE ScopedTypeVariables #-}
fib :: forall a. Num a => [a]
fib = fib'
  where
    fib' :: [a]
    fib' = 0:1:zipWith (+) fib' (tail fib') 
```

而且由于类型保持固定，您可以只使用开始时给出的一个字典。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T22:21:52.773

在这里，您`fib`在两种情况下都使用相同的类型参数，并且 ghc 足够聪明，可以看到这一点并执行共享。

现在，如果您使用可以使用*不同*类型参数调用它的函数，并且默认导致其中一个与另一个非常不同，那么缺乏单态限制会咬你。

`x = 2 + 2`考虑在没有单态限制的两个上下文中多态地使用该术语，在一个上下文中，您`show (div x 2)`在另一个上下文中使用`show (x / 2)`，在一个设置中，您得到`Integral`and`Show`约束，这导致您默认为`Integer`，在另一个设置中，您得到一个`Fractional`and 一个`Show`约束，并且默认为`Double`，因此计算结果不共享，因为您正在使用应用于两种不同类型的多态项。打开单态限制后，它会尝试对 Integral 和 Fractional 都默认一次，但失败了。

请注意，这些天让所有这些都被解雇是很狡猾的，而不是一概而论，等等。

# ruby-on-rails - JobsController#create 中的 ActiveRecord::StatementInvalid

> ID：11145905
> 
> 赞同：0
> 
> 时间：2012-06-21T20:05:36.077
> 
> 标签：ruby-on-rails

当我从下面的 job.rb 模型中删除 Devise 模块时，jobs_controller.rb 出现问题：

```
class Job < ActiveRecord::Base

# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable

    devise  :database_authenticatable,
            :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :contact_email, :contact_phone, :description, :district, :due_date, :expiration_date, :job_title, :posting_date, :requirements, :salary, :submission_process

end 
```

然后我删除了 Devise 模块，并得到了结果模型：

```
class Job < ActiveRecord::Base

    # Setup accessible (or protected) attributes for your model
attr_accessible :contact_email, :contact_phone, :description, :district, :due_date,       :expiration_date, :job_title, :posting_date, :requirements, :salary, :submission_process

end 
```

进行此转换时引发的错误显示在以下跟踪中：

```
ActiveRecord::StatementInvalid in JobsController#create

SQLite3::ConstraintException: constraint failed: INSERT INTO "jobs" ("contact_email",     "contact_phone", "created_at", "current_sign_in_at", "current_sign_in_ip", "description", "district", "due_date", "email", "encrypted_password", "expiration_date", "job_title", "last_sign_in_at", "last_sign_in_ip", "posting_date", "remember_created_at", "requirements", "reset_password_sent_at", "reset_password_token", "salary", "sign_in_count", "submission_process", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

app/controllers/jobs_controller.rb:49:in `block in create'
app/controllers/jobs_controller.rb:48:in `create' 
```

我有一个用户模型和一个工作模型，该应用程序由一个基本的脚手架组成，允许用户发布和查看工作，这取决于使用 Devise 的正确身份验证。我对适当的后端构造相对较新，并且在前端视图类型 Rails 方面有更多经验。我不确定我是否需要在 Job 模型中或仅在 User 模型中存在 Devise。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:00:32.337

一般来说，这样的异常意味着您违反了数据库约束。对您的表执行 NOT NULL、UNIQUE 或其他类型的数据库。

例如，Devise 强制电子邮件和加密密码等字段不能为空。您可以查看`db/schema.rb`为您的表构建的约束和索引。

在这种情况下，您很可能没有填充`encrypted_password`属性和/或您正在插入重复的电子邮件。[如果需要，您可以通过迁移移除这些约束](http://guides.rubyonrails.org/migrations.html#changing-tables)。

编辑：在回答您的第二个问题时，您只需要设计您的用户进行身份验证的模型（将存储他们的密码）。然后，为了强制用户只能创建和编辑属于他们的作业，请在您的控制器中说：`before_filter :authenticate_user!`在您的个人操作（或另一个 before_filter）中，您检查他们尝试编辑的作业是否属于他们。

# dojo - Dojo CompoButton - MenuItem 的 onClick 事件及其功能问题

> ID：11145908
> 
> 赞同：0
> 
> 时间：2012-06-21T20:05:41.770
> 
> 标签：dojo

我在 dojo 中有以下代码，它使用相关菜单的几个 MenuItems 创建了一个 ComboButton：

```
 testfunc = function (input) {
                                //Code that uses input
            }

            var menu = new Menu({
                id: "saveMenu"
            });
            //array has 10 json objects and each object has an "Id" field
            for(var i=0; i<10; i++) {

            var temp = array[i]["Id"];

            var menuItem1 = new MenuItem({
                label: "Option"+i,                
                onClick: function() { testfunc(temp); }
            });

            menu.addChild(menuItem1);
            }

            var comboButton = new ComboButton({
                optionsTitle: "Options",    
                label: "Combo",
                dropDown: menu,
 --->         onClick:function(){ console.log("Clicked ComboButton"); }
            }, "combo");

            comboButton.startup();
            menu.startup(); 
```

我需要每个 MenuItem 的 onClick 函数在 testfunc 中传递不同的变量。特别是 array[i]["Id"] 的值，它是一个包含 10 个 json 对象的数组。使用上面的代码，在所有 MenuItems 的所有 testfunc 函数中传递的参数是最后一个。

是否可以为每个 MenuItem 传递正确的 array[i]["Id"] 值

IE

MenuItem0 -> onClick: testfunc(array[0]["Id"])

MenuItem1 -> onClick: testfunc(array[1]["Id"])

MenuItem2 -> onClick: testfunc(array[2]["Id"])

.

.

.

ETC

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:55:13.570

我找到了解决问题的方法，我想我应该分享它。

该问题已通过使用“this”标记传入 menuItem 的 onClick 事件的 testfunc 参数来解决，例如

```
var menuItem1 = new MenuItem({

                id: array[i]["Id"],

                label: "Option"+i,                

                onClick: function() { testfunc(this.id, this.label); }
            }); 
```

# web-services - 访问来自 Zend AMF 的 Flex 对象中的值源自 PHP 关联数组

> ID：11145913
> 
> 赞同：0
> 
> 时间：2012-06-21T20:06:00.683
> 
> 标签：web-services, apache-flex, actionscript, flex4.6, zend-amf

从 Zend AMF 收到 Flex 对象 (ArrayCollection) 后，我无法访问它。发送的原始类型是 PHP 关联数组，它简单地返回，如

```
return $this->sections['initial_setup']; 
```

PHP 变量视图：

![变量视图中的节数组](../Images/a650885a99ec7819405567ef7b771903.png)

在 Charles AMF RPC 选项卡中发送的所需结果如下所示：

![Charles 代理 AMF RPC 视图](../Images/42e06db615a54a626259b5abce30092f.png)

但是当我将 Flex 中的数据作为对象（或 String[] - 没关系）接收时，我无法访问此类代码中的属性值

```
 var result:Object = event.result;
    if (result['database'] == 'yes' && result['admin'] == 'yes')
        // continue branch ... 
```

我在 if-line 上遇到异常：

```
 Error: Unknown Property: 'database'.
        at mx.collections::ListCollectionView ... 
```

最后，我可以在 Eclipse 变量视图中看到 ResultEvent 实例带有长度为 0 的 ArrayCollection 类型的结果，并且接收到的值通过 D 图标可见（我找不到 D 装饰的含义）：

![结果事件变量](../Images/bfb000cdf2fc8b88e127254622d76414.png)

但是为什么我仍然无法访问它们，我应该怎么做才能使用它们？

我试图更改 Array 或 ArrayCollection 的类型而不是 Object。还有一个讨论类似问题的[线程](https://stackoverflow.com/questions/8367694/accessing-strings-from-zend-amf-objects)，但在尝试之后，它也无济于事。

任何帮助将不胜感激:o)

**编辑 1：** 这是 FB 为 ConfigurationService 生成的超类构造函数的代码：

```
 // Constructor
public function _Super_ConfigurationService()
{
    // initialize service control
    _serviceControl = new mx.rpc.remoting.RemoteObject();

    // initialize RemoteClass alias for all entities returned by functions of this service

    var operations:Object = new Object();
    var operation:mx.rpc.remoting.Operation;

    operation = new mx.rpc.remoting.Operation(null, "readSettings");
     operation.resultType = Object;
    operations["readSettings"] = operation;
    operation = new mx.rpc.remoting.Operation(null, "writeSettings");
    operations["writeSettings"] = operation;
    operation = new mx.rpc.remoting.Operation(null, "readDBSettings");
     operation.resultType = valueObjects.ConnectionParams;
    operations["readDBSettings"] = operation;
    operation = new mx.rpc.remoting.Operation(null, "writeDBSettings");
    operations["writeDBSettings"] = operation;
    operation = new mx.rpc.remoting.Operation(null, "readInitSetupCompletion");
     operation.resultType = Object;
    operations["readInitSetupCompletion"] = operation;
    operation = new mx.rpc.remoting.Operation(null, "writeInitSetupCompletion");
    operations["writeInitSetupCompletion"] = operation;

    _serviceControl.operations = operations;
    _serviceControl.convertResultHandler = com.adobe.serializers.utility.TypeUtility.convertResultHandler;
    _serviceControl.source = "ConfigurationService";
    _serviceControl.endpoint = "gateway.php";

     preInitializeService();
     model_internal::initialize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:52:03.257

所以这里发生的事情是，作为 ArrayCollection 源的 Array 充当具有这两个属性的通用对象。可能生成的代码假设您将始终返回多个对象，并且当您的数据不满足 Adob​​e 工程师对此的假设时遇到问题。我不喜欢生成代码的原因之一:-)。

查看这些资源，了解如何“自己动手”。

1.  [关于远程的思考](http://flexdiary.blogspot.com/2008/11/thoughts-on-remoting.html)
2.  [AMFPHP 到 Flex 对象关系映射](http://www.developria.com/2008/04/amf3-php-server-objects-to-fle.html)
3.  [实现 PHP 服务](http://help.adobe.com/en_US/Flex/4.0/AccessingData/WSbde04e3d3e6474c444240ffa121086704cc-8000.html)

我认为最后一个 (3) 最接近您在 PHP 中可能拥有的内容。如果您确实决定使用 VO，您可能只需将 $explicitType 添加到您的行返回中，而无需在 PHP 方面进行太多其他更改。如果你走这条路，你可能需要重新生成你的服务，因为我怀疑生成的代码会有所不同。好消息是 Adob​​e 工程师可能*确实*想到了您有明确类型但只有一条记录的情况。

另一个解决方法是检查您的 AC 是否有一个不为空的零长度源，并在其边缘查找您的属性。

# android - Android，如何在 ListView 中获取一行的单个项目？

> ID：11145920
> 
> 赞同：1
> 
> 时间：2012-06-21T20:06:17.127
> 
> 标签：android, listview

我的活动中有一个 ListView。每行包含此模式中的三个 TextView： ( **RowId** ) ( **Name** ) ( **Phone number** )

当用户单击一行时，我需要获取行 ID。我做了很多事情并搜索了网络，但是我没有找到解决方案。我不知道如何从以下方法获取行 ID：

```
listView = (ListView) findViewById(R.id.listview);
listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Log.i(TAG, "item " + position + " clicked.");

        }
}); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T20:18:34.240

你也可以使用`v.findViewById(R.id.yourTextViewId)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:12:54.583

`v.getChildAt(0)`如果您确定该`ListView`项目是由这三个直接形成的`TextView`，您也可以使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:08:38.913

获取行元素

使用`v.findViewById(<id of row element>)`；

您可以使用 get 获取列表中的对象数据............

```
<your_adapter>.getItem(position); 
```

或者

`parent.getItemAtPosition (position);`

两者都将返回 Object....

# google-app-engine - google appengine 扩展模板中的 Jinja2 重复基本模板

> ID：11145925
> 
> 赞同：-1
> 
> 时间：2012-06-21T20:07:15.967
> 
> 标签：google-app-engine, templates, loops, jinja2

好的，我有一个 base.html，我尝试将它用于我的页眉菜单和页脚。在我的另一个模板中，我循环遍历项目并将它们显示在页面上。我的问题是另一个模板正在重复我的 base.html，就像它在循环中一样。我希望有人能以我的方式向我展示错误。

这是我的 base.html 代码：

```
 <div class="menu">
<ul class="nav">
    <li><a href="/">Home</a></li>
    <li><a href="/newpost">New Entry</a></li>
    <li><a href="/signup">Sign-up</a></li>
    {% if user %}
    <li>{{user.name}}</li>
    <li><a href="/logout">Log-Out</a></li>
    {% else %}
    <li><a href="/login">Log-In</a></li>
    {% endif %}
</ul> 
```

​</p>

这也在 base.html 中，但没有正确粘贴。

```
<div id="content">
  {% block content %}
  {% endblock %}
  </div> 
```

这是子模板代码：

```
{% extends "base.html" %}
{% block content %}
  {% for p in posts %}
    {{ p.render() | safe }}
    <br><br>
  {% endfor %}
    <div>
        {{text}}
    </div>
{% endblock %} 
```

请帮助编辑：edit2：删除链接并发现我的问题我在 render() 中调用了错误的 html 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:13:17.130

看起来还可以。您确定在呈现模板的 python 代码中没有循环吗？

# perl - 在 Perl 中创建结构数组

> ID：11145928
> 
> 赞同：0
> 
> 时间：2012-06-21T20:07:42.117
> 
> 标签：perl, perl-data-structures

```
use Class::Struct;

struct(TradeId => [
        tradeIdScheme => '$',
        id => '$',
]);

struct(VersionedTradeId => [
        tradeId => 'TradeId',
        version => '$',
        effectiveDate => '@',
]); 
```

我想在“VersionedTradeId”结构中创建一个“TradeId”数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:18:49.467

试试这个：[http ://www.nntp.perl.org/group/perl.beginners/2007/09/msg95440.html](http://www.nntp.perl.org/group/perl.beginners/2007/09/msg95440.html)

请参阅 Class::Struct 文档中的示例 1：

示例 1

给一个结构元素一个类类型，它也是一个结构是结构嵌套的方式。这里，Timeval 代表一个时间（秒和微秒），Rusage 有两个元素，每个元素都是 Timeval 类型。

```
use Class::Struct;
struct( Rusage => {
ru_utime => '@', # user time used
ru_stime => 'Timeval', # system time used
});
struct( Timeval => [
tv_secs => '$', # seconds
tv_usecs => '$', # microseconds
]);
# create an object:
my $t = Rusage->new(ru_utime=>[Timeval->new(), Timeval->new(), Timeval->new()], ru_stime=>Timeval->new());
# $t->ru_utime and $t->ru_stime are objects of type Timeval.
# set $t->ru_utime to 100.0 sec and $t->ru_stime to 5.0 sec.
$t->ru_utime->tv_secs(100);
$t->ru_utime->tv_usecs(0);
$t->ru_stime->tv_secs(5);
$t->ru_stime->tv_usecs(0); 
```

# c - 用“argv[2]”替换一个字符

> ID：11145929
> 
> 赞同：0
> 
> 时间：2012-06-21T20:07:54.447
> 
> 标签：c, file, argv, putchar, getc

我这里有一些代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

    int main (int argc, char *argv[])
    {
        char c;

        FILE *fp;

        fp = fopen(argv[1], "r");

        if (fp == NULL)
        {
            printf ("Errore nell'apertura del file %s\n\n", argv[1]);
            exit(EXIT_FAILURE);
        }

        while ( (c = getc(fp)) != EOF)
        {
            if (strcmp(c,argv[2]) == 0)
            {
                c = argv[3];
            }

            putchar(c);
        }

        return 0;
    } 
```

**第一个问题**：我必须用 argv[3] 上的一些其他字符替换我的文件 (argv[1]) 上 argv[2] 中的一些字符...我知道这`c = argv[3]`是一个大错特错的恐怖事情但是...怎么能我用我在 argv[3] 中写的字符替换我的“c”？？

```
EX: out.exe file.txt a b
    ------  -------- - -
    program file     1 2
    name    name     letters 
```

**第二个问题**：如果在 argv[2] 我有 2 个字符，第一个是要替换的字符，第二个是我必须替换的字符，我该怎么写？

```
EX: out.exe file.txt ab
    ------  -------- --
    program file     1/2
    name    name     letters (both on argv[2]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:10:52.590

`argv`是指向的*指针*数组`char`。 `argv[n]`返回指向 的*指针*，`char`而不是`char`. 如果你想获得*指针*`char`指向的第一个然后取消引用它： *`argv[n]`*

 *```
char c = *(argv[n]) // or argv[n][0] 
```

我相信这也应该回答你的第二个问题。*

# java - 将hashmap的arraylist放入另一个

> ID：11145931
> 
> 赞同：0
> 
> 时间：2012-06-21T20:07:58.747
> 
> 标签：java, arraylist, hashmap

我想把一个`ArrayList<HashMap<String, Object>>`放入另一个`ArrayList<HashMap<String, Object>>`。我怎样才能做到这一点？

我正在尝试使用赋值运算符（`=`），但我发现它只是指向引用，我想将元素放入另一个元素中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:10:01.563

您可以使用该[`addAll`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll%28java.util.Collection%29)方法，但请记住，它不会复制 HashMap，更不用说复制其中的对象了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:10:44.337

尝试这个：

```
List<HashMap<String, Object>> newList = new ArrayList<HashMap<String,Object>>();
for (HashMap<String, Object> hm: oldList) {
    newList.add(hm);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:12:32.863

您可以创建一个新`ArrayList`对象，只需调用该`addAll`方法并传递您要复制的 ArrayList

另一种方法是`Collections.copy(desc,src)`，但这不可行，因为两个列表的大小必须相等。

# json - 当值为“真”或“假”时，JSON 提供程序构建错误的字符串字段

> ID：11145933
> 
> 赞同：2
> 
> 时间：2012-06-21T20:08:11.643
> 
> 标签：json, rest, jaxb, cxf

我有个问题。请你帮助我好吗。我有一个应用程序：CXF+Spring+JAXB+REST。我尝试使用`JSONProvider`类生成响应有一个bean类：

```
@XmlRootElement
class Foo {
@XmlElement
private String bar;
} 
```

当我设置为字段值时：

```
setBar("true") 
```

或者

```
setBar("false"); 
```

JSONProvider 返回给我：

```
"bar":false 
```

但是，我期待

```
"bar":"false" 
```

因为我使用**字符串**类型。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:08:42.783

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范不包括 JSON 绑定。在 REST/JAX-RS 上下文中，由提供者将 JAXB 映射规则应用于 JSON 表示。今天使用了 3 种不同的方法：

1.  将 JAXB 实现与[Jettison 之](http://jettison.codehaus.org/)类的库一起使用。Jettison 实现了 StAX 接口，但解释了 JSON。这种方法的优点是它可以与任何 JAXB 实现一起使用来生成/使用 JSON，这种方法的缺点是 Jettison 没有足够的信息来进行完美的 JSON 表示。Jettison 在`"true"`不知道对应的 Java 类型是什么的情况下接收到 String，因此它决定将其表示为 JSON 布尔值，因为大多数情况下它可能是所需的输出。
2.  REST/JAX-RS 实现利用特定的 JAXB 实现来生成 JSON。这种方法与第一种方法类似，除了 REST/JAX-RS 提供者对 JAXB 提供者进行专有调用，以对 JSON 表示应该是什么做出更有根据的猜测。
3.  JAXB 实现提供了 JSON 绑定实现。目前 EclipseLink MOXy 是唯一支持 JSON 绑定的 JAXB 实现。

**莫西示例**

***根***

下面是一个带有`String`和`boolean`字段的域对象。我还添加了带有注释的字段`@XmlSchemaType`，可用于覆盖默认表示。

```
package forum11145933;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    String barString;

    boolean barBoolean;

    @XmlSchemaType(name="boolean")
    String barStringWithXmlTypeBoolean;

    @XmlSchemaType(name="string")
    boolean barBooleanWithXmlTypeString;

} 
```

***jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***演示***

以下代码演示了如何将域对象编组为 JSON。请注意，MOXy 没有编译时依赖项。

```
package forum11145933;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.barString = "true";
        root.barBoolean = true;
        root.barStringWithXmlTypeBoolean = "true";
        root.barBooleanWithXmlTypeString = true;

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.marshal(root, System.out);
    }

} 
```

***输出***

以下是运行`Demo`代码的输出。注意`boolean`和`String`属性是如何正确写出的。还要注意`@XmlSchemaType`注释的使用如何允许我们将 a 编组`boolean`为 a `String`，反之亦然。

```
{
   "root" : {
      "barString" : "true",
      "barBoolean" : true,
      "barStringWithXmlTypeBoolean" : true,
      "barBooleanWithXmlTypeString" : "true"
   }
} 
```

**MOXy & JAX-RS**

MOXy 包括`MOXyJsonProvider`可用于在您的 JAX-RS 环境中启用 MOXy 作为 JSON 提供程序的功能：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# android - Activity 中的进度条与外部 .class-File 中的 asyncTask 下载

> ID：11145934
> 
> 赞同：0
> 
> 时间：2012-06-21T20:08:11.957
> 
> 标签：android, android-activity, download, android-asynctask, progress-bar

我在活动中有一个进度条，但异步位于外部 .class-File 我如何在异步任务中引用该进度条？

我使用从使用 Android 下载文件中的 AsyncTask 稍作更改的版本 [，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:17:15.077

您可以像这样在 asyncTask 类中添加一个 setter 方法：

```
public class MyTask extends asyncTask .... {
     private ProgressBar bar;
     public void setProgressBar(ProgressBar bar){
              this.bar = bar;
        }
 } 
```

然后在创建新的 asyncTask 时从活动中设置进度条。像这样的东西：

```
public class MyActivity extends Activity{
  private ProgressBar bar;
  private myTask task;

 void createTask(){
   myTask = new MyTask(....);
   myTask.setProgressBar(bar);
   }
} 
```

# hibernate - 如何解决“org.hibernate.HibernateException: createCriteria is not valid without active transaction”异常？

> ID：11145935
> 
> 赞同：1
> 
> 时间：2012-06-21T20:08:13.220
> 
> 标签：hibernate, transactions, junit

我正在使用 Hibernate 4.0.1.Final 编写一个独立的 Java 应用程序。测试我的数据访问层时，出现以下异常

> org.hibernate.HibernateException：createCriteria 在没有活动事务的情况下无效

搜索对象时。我正在尝试将我的事务级别代码与我的数据库操作代码分开。我的 JUnit 测试是

```
@Before
public void setUpDAOTest() { 
    final Configuration configuration = new Configuration();
    configuration.configure().setProperty("hibernate.show_sql", "false");
    final ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
    sessionFactory = configuration.buildSessionFactory(serviceRegistry);
    orgDao = new OrganizationDAOImpl(sessionFactory);
    session = sessionFactory.openSession();
    tx = session.beginTransaction();
}   // setUp

@Test
public void testFindStateByAbbrev() { 
    final String abbrev = testProps.getProperty("test.state.abbrev");
    final State state = orgDao.findStateByAbbrev(abbrev);
    Assert.assertNotNull(state);
    Assert.assertEquals(testProps.getProperty("test.state.abbrev"), state.getAbbrev());
}   // testFindStateByAbbrev 
```

单元测试调用的代码是......

```
public class OrganizationDAOImpl extends AbstractDAO implements OrganizationDAO {
    …
    public State findStateByAbbrev(final String abbrev) {
        State ret = null;
        final Session session = sessionFactory.getCurrentSession();
        final Criteria crit = session.createCriteria(State.class).add(Restrictions.eq("abbrev", abbrev));
        final List<State> results = crit.list();
        if (results != null && results.size() > 0) {
            ret = results.get(0);
        }   // if
        return ret;
    } 
```

异常在DAO中被抛出，

```
final Criteria crit = session.createCriteria(State.class).add(Restrictions.eq("abbrev", abbrev)); 
```

如何调整我的 JUnit 测试（或我的 DAO 代码）以消除此异常并使我的代码正常运行？这是我的`hibernate.cfg.xml`文件……</p>

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/dbid</property>
        <property name="hibernate.connection.username">user</property>
        <property name="hibernate.connection.password">password</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
            <property name="current_session_context_class">thread</property>

        <mapping class="org.myco.myproject.orgsclient.model.Organization" />
        <mapping class="org.myco.myproject.orgsclient.model.State" />

    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T20:39:21.570

你可以移动

```
session = sessionFactory.openSession();
tx = session.beginTransaction(); 
```

在您的 DAO 方法中或将新会话绑定到`@Before`方法中的当前线程。

您已指定 hibernate 应使用`ThreadLocalSessionContext`. 但是，没有什么可以将 Session 绑定到当前线程。

`ThreadLocalSessionContext`提供了一个静态`bind(org.hibernate.Session session)`方法，您可以使用它确保`sessionFactory.getCurrentSession()`可以访问您打开的会话。

只是打开一个新会话不会将它绑定到线程。

# python - 我应该如何附加到 mongodb 中的类似文件的小对象？

> ID：11145936
> 
> 赞同：2
> 
> 时间：2012-06-21T20:08:14.123
> 
> 标签：python, file, mongodb

我需要一个到 mongodb 的接口，通过它我可以将集合中的数据视为标准的类似 python 文件的对象。这些将是相当小的文件（最多以千字节为单位），特别是我需要能够*附加*到这些所谓的文件。（[所以这个问题不是骗人的。](https://stackoverflow.com/questions/8971973)）

我已经阅读了 GridFS 文档，特别是[它说我不应该将它用于小文件](http://www.mongodb.org/display/DOCS/When+to+use+GridFS)。我能找到的唯一其他实现都是 PHP。我并不是真的在寻求帮助编写代码的任何细节，但[实现整个文件 api](http://docs.python.org/library/stdtypes.html#file-objects)似乎是一项艰巨的任务。

1.  是否有任何快捷方式或工具可以更轻松地在 python 2 中实现类似文件的对象？
2.  我错过了有人已经这样做了吗？

（我为什么要这样做？因为我在最后一小时收到了一个要求，要求我们部署一个预先存在的应用程序，该应用程序在无法透明地处理文件的多节点云环境中*生成 csv文件。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:10:36.950

对于问题 1：查看[`io`](http://docs.python.org/library/io.html)模块，尤其是[`IOBase`](http://docs.python.org/library/io.html#io.IOBase). 它以一组相当合理的方法实现了所有的类似文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:13:18.330

您可以将数据作为二进制或文本存储在 MongoDB 集合中。但是你会遇到两个问题：

1.  您必须实现与其他代码期望实现的一样多的 Python 文件协议。

2.  当您附加到“文件”时，文档会在 MongoDB 中增长，并且可能需要在磁盘上移动到有足够空间容纳更大文档的位置。移动文件很昂贵。

使用 GridFS——文档不鼓励您使用*静态*文件，但对于您的情况，它是完美的，因为 PyMongo 已经为您完成了为 MongoDB 数据实现 Python 文件协议的工作。要附加到 GridFS 文件，您必须阅读它，使用附加数据保存新版本，然后删除以前的版本。但这并不比移动一个增长的文档贵多少。

# c# - 多个后台工作人员排队

> ID：11145938
> 
> 赞同：2
> 
> 时间：2012-06-21T20:08:16.943
> 
> 标签：c#, winforms, asynchronous, backgroundworker

在我的 winforms 应用程序中，我有一个包含对象的队列：

```
 Queue<MyObj> _queuedRows = new Queue<MyObj>(); 
```

对于每个对象，我必须启动一个单独的后台工作程序来完成一些耗时的工作。

```
 private void DoAll(List<MyObj> lst)
    {
        foreach (MyObj o in lst)
        {
            _queuedRows.Enqueue(o);
        }

        while (_queuedRows.Any())
            DoSingle();
    }

    private void DoSingle()
    {
        if (!isCancelPending())
        {
            if (_queuedRows.Any())
            {
                MyObj currentObj = _queuedRows.Dequeue();
                InitBackgroundWorker(currentObj);
            }
        }
    }

    private void InitBackgroundWorker(MyObj currentObj)
    {
        BackgroundWorker _worker = new BackgroundWorker();
        _worker.WorkerSupportsCancellation = true;
        _worker.WorkerReportsProgress = true;
        _worker.DoWork += new DoWorkEventHandler(worker_DoWork);
        _worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);

        if (!_worker.IsBusy && currentObj != null)
            _worker.RunWorkerAsync(currentObj);
    } 
```

我的问题是，在调用 RunWorkerAsync 之后，执行跳转到 while 的下一次迭代（这是合乎逻辑的，因为 worker 正在运行异步并且它允许下一次迭代发生）。

我真正需要做的是告诉应用程序以某种方式等待，直到后台工作人员完成工作，然后它才应该通过继续调用 DoSingle() 来开始下一次迭代。

我应该对 _queuedRows 对象或类似对象应用锁定吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:11:31.023

与其`DoSingle`在 while 循环中调用，不如将其更改为调用`DoSingle`一次，然后在后台工作人员的`RunWorkerCompleted`事件处理程序中`DoSingle`一次又一次地调用，直到队列完成。

```
 private void DoAll(List<MyObj> lst)
    {
        foreach (MyObj o in lst)
        {
            _queuedRows.Enqueue(o);
        }

        if (_queuedRows.Any())
            DoSingle();
    } 
```

此外，由于您没有并行处理队列中的所有对象，因此只实例化一次后台工作人员并重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:13:36.413

您只能使用一名后台工作人员。

# sql - 在大多数 SQL 实现中，与标准编程语言相反，为什么 x != null 不返回 true？

> ID：11145944
> 
> 赞同：6
> 
> 时间：2012-06-21T20:08:38.517
> 
> 标签：sql, null

让我们假设这`x`是一个具有除 之外的任何值的变量`null`，例如 4。下面的表达式应该返回什么？

```
x != null 
```

在我曾经使用过的几乎所有编程语言（C#、Javascript、PHP、Python）中，这个表达式或该语言中的等效表达式的计算结果为`true`.

另一方面，SQL 实现似乎都以完全不同的方式处理这个问题。如果不等式运算符的一个或两个操作数是`NULL`，则返回其中一个`NULL`或`False`。这基本上与大多数编程语言使用的行为相反，对我来说*非常*不直观。

为什么 SQL 中的行为是这样的？是什么关系数据库逻辑使得`null`行为与通用编程有很大不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T20:43:51.100

大多数编程语言中的 null 被认为是“已知的”，而 SQL 中的 NULL 被认为是“未知的”。

*   因此`X == null`将 X 与已知值进行比较，结果是已知的（真或假）。
*   但是`X = NULL`将 X 与未知值进行比较，结果未知（即再次为 NULL）。因此，我们需要一个特殊的运算符`IS [NOT] NULL`来测试它。

我猜测这种 NULL 的至少部分动机是外键的行为。当外键的子端点为 NULL 时，它不应该匹配任何父节点，即使父节点为 NULL（如果父节点是 UNIQUE 而不是主键，这是可能的）。不幸的是，这带来了[比](http://thoughts.j-davis.com/2009/08/02/what-is-the-deal-with-nulls/)它解决的问题更多的问题，我个人认为 SQL 应该走“已知”空值的路线，并完全避免这种猴子业务。

即使是 EF Codd，发明者或关系模型，后来也表示传统的 NULL 不是最优的。但由于历史原因，我们几乎坚持下去。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T20:22:35.573

原因是相等的概念不适用于 null。说这个空值等于或不等于另一个空值在逻辑上是不正确的。

所以，从理论上讲这一切都很好，但是为了方便起见，为什么 sql 不允许你说 (x != null)？

好吧，原因是有时您想以不同的方式处理空值。例如，如果我说 (columnA = columnB)，如果两列都为空，是否应该返回 true？如果我说 (columnA != columnB) - 当 A 列为“a”且 B 列为空时，以及 A 列为“a”且 B 列为“b”时，它是否应该给出相同的结果？

制作 sql 的人认为区分很重要，因此他们编写它以区别对待这两种情况。

维基百科页面上有一个相当不错的文章 - [http://en.wikipedia.org/wiki/Null_%28SQL%29](http://en.wikipedia.org/wiki/Null_%28SQL%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:15:05.180

在 sql 引擎中，您通常不使用“=”运算符，而是使用“IS”，这使其更直观。

```
SELECT 4 IS NULL FROM dual;
> 0

SELECT 4 IS NOT NULL FROM dual;
> 1 
```

NULL 不代表空指针，它根本不是同一个概念。sql NULL 是一个*我不知道值*标志，它不是一个“没有指针”标志。您只是不应该比较它们，它们不应该以相同的方式使用。这很不直观，你是对的，他们应该以不同的方式命名它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:45:39.347

在 SQL 中，`NULL`表示“未知值”。

如果您说 x != NULL 您是在说“x 的值不等于未知值”。好吧，因为我们不知道未知值是什么，所以我们不知道 x 是否等于它。所以答案是“我不知道”。

相似地：

```
x = NULL OR 1=2    -- Unknown. 1=2 is not true, but we don't know about x=NULL
x = NULL OR 1=1    -- True. We know that at least 1=1 is true, so the OR is fulfulled regardless.
x = NULL AND 1=1   -- Unknown. We want them both to be true to fulful the AND
x = NULL AND 1=2   -- False. We know 1=2 is false, so the AND is not fulfilled regardless. 
```

还

```
-- Neither statement will select rows where x is null
select x from T where x = 1
select x from T where x != 1 
```

检查空值的唯一方法是特别询问“我们是否真的不知道 x 的值是什么”。那有一个是或否的答案，并使用`IS`关键字。

如果您只想将空值视为零或其他值，则可以使用`COALESCE`or`ISNULL`函数。

```
COALESCE(NULL, 1)  -- 1
COALESCE(NULL, NULL, 1) -- Also 1
COALESCE(x, y, z, 0) -- x, unless it is null, then y, unless it is null, then z, unless it is null in which case 0. 
```

# macos - 如何以编程方式更改文件名

> ID：11145946
> 
> 赞同：0
> 
> 时间：2012-06-21T20:08:40.357
> 
> 标签：macos

谁能告诉我如何使用字符串“@2x”在特定文件夹中附加文件名。我不想麻烦手动重命名每个文件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:56:16.287

启动 AppleScript Editor 并粘贴以下脚本：

```
set appendable to "@2x"
set theFolder to choose folder
tell application "Finder"
    set theFiles to (files of entire contents of theFolder) as alias list
    repeat with theFile in theFiles
        set FileExtension to theFile's name extension as string
        set FileName to theFile's name as string
        set FileBaseName to text 1 thru ((offset of "." in FileName) - 1) of FileName
        set theFile's name to FileBaseName & appendable & "." & FileExtension
    end repeat
end tell 
```

该脚本将“@2x”附加到所选文件夹中的所有文件。
只需点击“运行”按钮并选择任何文件夹来执行脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:16:08.833

从终端你可以运行 `for f in *; do mv f 'f@2X'; done;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T00:39:55.430

您可以使用**Automator**执行此操作而无需任何代码。

或者，正如您已经知道“ **Xcode** ”和**Objective-C**`@2X`一样，这里有一个在名称扩展之前添加的示例。

```
BOOL result;
NSString *fullPath, *filename, *newName;
NSString *dir = @"/Users/jack/Desktop/Untitled 1";
NSFileManager *fm = [NSFileManager defaultManager];
NSEnumerator *enumerator = [[fm contentsOfDirectoryAtPath:dir error:nil] objectEnumerator];

while(filename=[enumerator nextObject]){
    if ([filename hasPrefix:@"."]) { continue;}//skip files that begin with a dot
    fullPath = [dir stringByAppendingPathComponent:filename];
    if (!([fm fileExistsAtPath:fullPath isDirectory:&result]&&result)) { // skip directory
        if ([[filename pathExtension] isEqualToString:@""]) {
            newName = [fullPath stringByAppendingString:@"@2X"];// no extension
        } else {
            newName = [[fullPath stringByDeletingPathExtension] stringByAppendingFormat:@"@2X.%@",[filename pathExtension]];
        }
        result = [fm moveItemAtPath:fullPath toPath:newName error:nil];
    }
} 
```

# php - 没有从我的帖子中获得价值

> ID：11145947
> 
> 赞同：1
> 
> 时间：2012-06-21T20:08:43.017
> 
> 标签：php, html

我有一个 html 表单

```
<form action="process.php" method="post">

    <input type="checkbox" name="name[v1]"  />
    <input type="checkbox" name="name[v2]"  />
    <input type="checkbox" name="name[v3]"  />
    <input type="submit" name="update" value="update">
</form> 
```

如果他们只有一个复选框被打勾，那么我只看到那个复选框

数组（ [\'v3\'] => on ）

如果我已经检查了所有三个框，那么我会看到它们。

```
Array
(
    [\'v1\'] => on
    [\'v2\'] => on
    [\'v3\'] => on
) 
```

即使没有选中它们，我是否可以看到我的所有复选框。

进程.php

```
foreach( $_POST['name'] as $k => $v )
{
   echo "key: ".$k;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:17:08.840

如果复选框和单选按钮没有设置“选中”属性，则不会将它们传递给处理脚本。这是设计的 HTML4。

设置状态的唯一方法是使用类似的东西：

```
if(!isset($_POST['mycheckbox'])){ $_POST['mycheckbox'] = 0; } 
```

或者更好：

```
$_POST['mycheckbox'] = isset($_POST['checkbox']); 
```

关于单选按钮，您应该只使用第一个版本，因为单选按钮可以有多个值，因此您不想在其中设置 TRUE/FALSE，而是要设置默认值。

另外注意，DISABLED 元素不会贴出来，即使它们有值，你也永远不会看到它们，这是 HTML4+ 的另一个设计特点

# jquery - JQuery Colorbox 不会在 IE8 中关闭

> ID：11145948
> 
> 赞同：2
> 
> 时间：2012-06-21T20:08:48.117
> 
> 标签：jquery, internet-explorer-8, colorbox

我们在我们网站的一些地方使用了 jQuery ColorBox，人们无法关闭 IE8 中的弹出窗口。在 Firefox 中运行良好。任何帮助将非常感激！谢谢，艾米（jQuery 新手）

照片库页面示例：http: [//matsinc.com/photogallery/woven-vinyl-flooring](http://matsinc.com/photogallery/woven-vinyl-flooring)

这是照片库页面上的代码：

```
<script type="text/javascript">
    $j(document).ready(function() {
        // Tool Tip
        //$("a[title]").tooltip({ effect: 'slide'});
        var cb_height = '566px';

        if ($j.browser.msie && !$j.support.opacity) {
            if ($j.browser.version == 7) {
                cb_height = '598px';
            }
        }

        var cb_html = '<div class="cbox-gallery"><h2></h2><img src="" alt="" /><div class="cbox-footer2"><a target="_blank" href="http://www.miprojectlibrary.com">Visit MI Project Library</a><br />Collect, distribute and download high resolution photos and swatches.</div></div>';
        //colorbox for Photo Gallery
        $j("a[rel='cb-gallery']").colorbox({
            opacity: 0.5,
            current: '{current} of {total}',
            close: 'Close',
            html: cb_html,
            height: cb_height,
            scrolling: false,
            onComplete: function() {
                var title = $j(this).attr('title');
                var img = $j(this).attr('href');
                $j('.cbox-gallery h2').text(title);
                $j('.cbox-gallery img').attr({
                    'src': img,
                    'alt': title
                });
                $j('.cbox-gallery .download').attr('href', img);
                //$.colorbox.resize();
            }
        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:05:12.280

对我来说，它也没有在 IE8 上关闭，我使用的是 colorbox 1.3.20 和 jquery 1.7.1，我将 jquery 升级到 1.8.1，现在它在 IE8 上关闭了 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:28:35.070

我会说将 jQuery 升级到 1.4.3+ 或将颜色框降级到 1.3.18。

[在 colorbox page](http://www.jacklmoore.com/colorbox)中，它指出您当前版本的 colorbox (1.3.19) 已使用 jQuery 1.4.3+ 进行了测试，并且您使用的是 1.4.2。

> 当前版本：1.3.19（在 MIT 许可下发布 | Github | Changelog）
> 
> 测试于：Firefox、Safari、Chrome、Internet Explorer 6、7、8、9、Opera 11 中的 jQuery 1.4.3+。对于旧版本的 jQuery (1.3.2+)，请使用 1.3.18 版本

从 IE8 查看时出现 jquery 错误 ![在此处输入图像描述](../Images/21feecd702df74cc7b6c8ef876720bc3.png)

# android - Web 的建模实体与 Android 不同？我可以为两者使用相同的图表类吗？

> ID：11145949
> 
> 赞同：1
> 
> 时间：2012-06-21T20:08:49.613
> 
> 标签：android, orm, web

我正在开发一个有两个模块的项目：一个 web 和一个适用于 Android 的应用程序。我可以为这两个模块使用相同的类图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:16:59.707

您可以使用相同的类图，前提是它不依赖于特定于 Web 模块的 Android SDK 或库。否则，使用单独的类图/模型会更好。

# python - 尝试将双端队列存储在 Shelve 中的奇怪行为

> ID：11145951
> 
> 赞同：2
> 
> 时间：2012-06-21T20:08:52.713
> 
> 标签：python, shelve

我将让以下终端会话说明一切：

```
>>> import shelve
>>> s = shelve.open('TestShelve')
>>> from collections import deque
>>> s['store'] = deque()
>>> d = s['store']
>>> print s['store']
deque([])
>>> print d
deque([])
>>> s['store'].appendleft('Teststr')
>>> d.appendleft('Teststr')
>>> print s['store']
deque([])
>>> print d
deque(['Teststr']) 
```

不应该`d`和`s['store']`指向同一个对象吗？为什么可以`appendleft`工作`d`但不能工作`s['store']`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:15:08.903

`shelve`正在`pickle`处理（序列化）对象。当然，这会产生一个副本。因此，您返回的对象`shelve`不会与您放入的对象具有相同的身份，尽管它们是等价的。

如果它很重要，您可以编写一个`deque`在修改时自动重新上架的子类，尽管这在许多用例中可能性能很差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:14:12.830

事实证明它们并不相同，因此您对它们执行的任何操作都不匹配：

```
>>> import shelve
>>> s = shelve.open('TestShelve')
>>> from collections import deque
>>> s['store'] = deque()
>>> d = s['store']
>>> id(s['store'])
27439296
>>> id(d)
27439184 
```

要在编码时修改项目，您需要传递参数`writeback=True`：

```
s = shelve.open('TestShelve', writeback=True) 
```

请参阅文档：

> 如果 writeback 参数为 True，则对象将保存所有访问条目的缓存，并在同步和关闭时间将它们写回 dict。这允许对可变条目进行自然操作，但会消耗更多内存并使同步和关闭需要很长时间。

您也可以这样做，`writeback=False`但您需要完全按照提供的示例编写代码：

```
# having opened d without writeback=True, you need to code carefully:
temp = d['xx']      # extracts the copy
temp.append(5)      # mutates the copy
d['xx'] = temp      # stores the copy right back, to persist it 
```

# sql - 将多个 IF EXIST 语句转换为更具可读性的语句

> ID：11145952
> 
> 赞同：1
> 
> 时间：2012-06-21T20:08:54.617
> 
> 标签：sql, sql-server

我有以下多个级别：

```
IF EXISTS(...)
BEGIN
  IF NOT EXISTS(...)
  BEGIN
  END
END 
```

我怎样才能为变量分配一个值并执行此操作：

```
@doesXExist = IF EXISTS(...)

IF @doesExist
  IF NOT EXISTS(...)
  BEGIN
  END
END 
```

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T20:10:18.727

SQL Server 没有布尔数据类型。你可以做

```
DECLARE @doesXExist BIT = CASE WHEN EXISTS(...) THEN 1 ELSE 0 END 
```

（组合`DECLARE`和设置语法是 2008+）

但是你不能那么`IF @doesExist`你需要做`IF @doesExist = 1`或`IF @doesExist = 'True'`

# javascript - Javascript数组行为奇怪

> ID：11145955
> 
> 赞同：0
> 
> 时间：2012-06-21T20:09:08.990
> 
> 标签：javascript, jquery, xcode, arrays, cordova

我将一个 JSON 对象和一个数组传递给一个 Javascript 函数，但是当我提醒它时该数组为空，除非我提醒一个特定的值。

```
function myFunction(jsonObj, array){
    alert(array['item1']['name']);    //alerts "item1"
    alert(array);                     // alerts "" (not [object] as I'd expect)
    alert(array.join(''));            // alerts ""
} 
```

我错过了什么？

我正在使用 xcode 上的 phonegap 进行开发，还使用 ​​jQuery 和 Jquery Mobile

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:11:20.187

好像您正在使用带有字符串索引的数组。这不会很好地工作：

```
> var array = [];
> array['foo'] = 'bar';
> array.length
0 
```

改用一个对象：

```
var obj = {};
obj['foo'] = 'bar'; 
```

* * *

**仅使用带有数字索引的数组。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:11:53.680

使用[JQuery 的 map 函数](http://api.jquery.com/jQuery.map/)。

您可以遍历数组或 JSON 对象中的所有项目。

**顺便说一句**，将 console.log(array) 添加到您的代码和 chrome web dev env 中，或者在 firebug 中检查它的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:52:38.587

数组只能有数字作为索引，以便使用像连接这样的普通数组函数

但是，关联数组的处理方式与 JSON 对象相同。您可以像这样在关联数组中进行连接：

```
var temp=[];
temp['item']='hello ';
temp['item2']='world';
var joinedString="";
for( i in temp ){
     console.log(temp[i];
     joinedString+=temp[i];
}
 alert(joinedString);   // Prints hello world 
```

只需像使用地图一样使用它并使用 foreach 循环。普通数组函数，如 join 、 length 和 all 都不起作用

# java - 如何在没有物理扫描仪的情况下自动测试 PDF 表单中生成的条形码？

> ID：11145959
> 
> 赞同：1
> 
> 时间：2012-06-21T20:09:47.807
> 
> 标签：java, unit-testing, image-processing, pdf-generation, barcode

我们有一个 java 应用程序，它生成 PDF 表单，其页脚有二维条码。条形码包含公司表格 ID 和客户 ID。

现在我们正在寻找一种无需物理扫描仪即可自动测试生成的 PDF 的方法。意味着我们只想通过 Java API 阅读 PDF，以某种方式在内部渲染和捕获条形码并阅读其内容。所以这是一个粗略的想法。

这种方法是否可行的问题？有人知道Java中的一些API可以做这样的事情吗？例如

1.  阅读 PDF 并将其内容呈现为背景中的图像？
2.  读取条形码图像并提取其内容？
3.  处理图像并提取文本内容 (OCR)？

# sql-server-2008-r2 - SQL Server 2008 R2 标准在 SSMS 中缺少“审核”文件夹？

> ID：11145967
> 
> 赞同：3
> 
> 时间：2012-06-21T20:10:19.307
> 
> 标签：sql-server-2008-r2, ssms, audit

我会以我不是 DBA 的事实来预先确定这一点！

我正在尝试在 SQL Server 2008 R2 标准版上设置审核，但“安全”部分缺少“审核”文件夹。

这是与仅在 Enterprise 和 DataCenter 版本中的“细粒度审计”相关的版本问题吗？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:20:51.107

根据[SQL Server 2008 R2 版本支持的功能，](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx#Enterprise_security)审核仅在 2008 / 2008 R2 Enterprise / Datacenter 中可用。

根据[SQL Server 2012 版本支持的功能，](http://msdn.microsoft.com/en-us/library/cc645993%28SQL.110%29.aspx#Enterprise_security)审计已在 SQL Server 2012 中拆分，因此标准版现在提供基本审计。

因此，您所看到的是意料之中的：在 SQL Server 2012 之前，审计是企业独有的功能（在 C2/CCC 之外，它只是 sp_configure 的东西，没有在对象资源管理器中公开）。

# xslt - XSLT 对两个同级中的元素进行分组

> ID：11145979
> 
> 赞同：3
> 
> 时间：2012-06-21T20:11:23.447
> 
> 标签：xslt

我正在努力解决这个问题，我认为解释它的最简单方法就是在下面向您展示。我已经看到[了这一点](https://stackoverflow.com/questions/943739/xslt-grouping-siblings)，但它并不总是适用，因为我最后也有独立的项目可以匹配。

看似棘手的部分是Whatever3到Whatever6，然后是Whatever7和Whatever8，最后是Whatever9的新位置——它们需要分组并保持原来的顺序。（忽略我的命名，没有办法使用xsl:sort）

我考虑过 xsl:for-each 和 xsl:if ，但问题是你不能保证有多少“组”和“非组”项目。

谢谢！

XML

```
<root>
   <item>
      <position>1</position>
      <label>Whatever1</label>
   </item>
   <item>
      <position>2</position>
      <label>Whatever2</label>
   </item>
   <item>
      <position>3</position>
      <label>Whatever3</label>
      <marker id="unique1">start_group</marker>
   </item>
   <item>
      <position>4</position>
      <label>Whatever4</label>
   </item>
   <item>
      <position>5</position>
      <label>Whatever5</label>
   </item>
   <item>
      <position>6</position>
      <label>Whatever6</label>
      <marker>last_in_group</marker>
   </item>
   <item>
      <position>7</position>
      <label>Whatever7</label>
      <marker id="unique2">start_group</marker>
   </item>
   <item>
      <position>8</position>
      <label>Whatever8</label>
      <marker>last_in_group</marker>
   </item>  
   <item>
      <position>9</position>
      <label>Whatever9</label>
   </item>
</root> 
```

结果

```
<structure>
   <item>
      <position>1</position>
      <label>Whatever1</label>
    </item>
   <item>
      <position>2</position>
      <label>Whatever2</label>
    </item>
    <group position="3" id="unique1">
        <item>
          <position>1</position>
          <label>Whatever3</label>
        </item>
        <item>
          <position>2</position>
          <label>Whatever4</label>
        </item>
        <item>
          <position>3</position>
          <label>Whatever5</label>
        </item>
        <item>
          <position>4</position>
          <label>Whatever6</label>
        </item>
    </group>
    <group position="4" id="uniqueid2">
        <item>
          <position>1</position>
          <label>Whatever7</label>
        </item>
        <item>
          <position>2</position>
          <label>Whatever8</label>
        </item>
    </group>
    <item>
      <position>**5**</position>
      <label>Whatever9</label>
    </item>
</structure> 
```

=======================

这是我到目前为止所拥有的，我唯一的问题（除了它是凌乱的）是Whatever4和Whatever5出现在集团之外。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="root">
  <structure>
    <xsl:apply-templates select="item[not(marker)] | item[marker='start_group']"/>
  </structure>
 </xsl:template>

  <xsl:template match="item[marker='start_group']">
   <group>
    <xsl:variable name="currentPosition" select="number(position/text())"/>
    <xsl:variable name="lastGroup" select="count(following-sibling::*[local-name() = 'item' and marker='last_in_group'][1]/preceding-sibling::*) + 1"/>

    <xsl:attribute name="position">
        <xsl:value-of select="$currentPosition"/>
    </xsl:attribute>
    <xsl:attribute name="id">
        <xsl:value-of select="marker/@id"/>
    </xsl:attribute>

   <item>
    <position><xsl:value-of select="number(position/text()) - $currentPosition + 1"/></position>
    <label><xsl:value-of select="label/text()"/></label>
   </item>

   <!-- position() gets reset in for-loop, so need to adjust with outer position -->
   <xsl:for-each select="following-sibling::item[(position() + $currentPosition) &lt;= $lastGroup]">
         <item>
                <position><xsl:value-of select="number(position/text()) - $currentPosition + 1"/></position>
                <label><xsl:value-of select="label/text()"/></label>
         </item>
    </xsl:for-each>
   </group>
 </xsl:template>

  <xsl:template match="item[not(marker)]">
   <item>
    <position><xsl:value-of select="position/text()"/></position>
    <label><xsl:value-of select="label/text()"/></label>
   </item>
 </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:57:34.327

**一、XSLT 1.0 解决方案**：

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing"
  match="item[not(marker[. = 'start_group'])
            and
              preceding-sibling::*[marker][1]/marker = 'start_group'
             ]"
  use="generate-id(preceding-sibling::*
                    [marker[. = 'start_group']]
                     [1])"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="item[marker[. = 'start_group']]">
   <group position="{1 +count(preceding-sibling::*[. = 'start_group'])}"
   id="{marker/@id}">
     <xsl:copy-of select=".|key('kFollowing', generate-id())"/>
   </group>
 </xsl:template>

 <xsl:template match=
  "item[not(marker[. = 'start_group'])
      and
       preceding-sibling::*[marker][1]/marker = 'start_group'
       ]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <item>
        <position>1</position>
        <label>Whatever1</label>
    </item>
    <item>
        <position>2</position>
        <label>Whatever2</label>
    </item>
    <item>
        <position>3</position>
        <label>Whatever3</label>
        <marker id="unique1">start_group</marker>
    </item>
    <item>
        <position>4</position>
        <label>Whatever4</label>
    </item>
    <item>
        <position>5</position>
        <label>Whatever5</label>
    </item>
    <item>
        <position>6</position>
        <label>Whatever6</label>
        <marker>last_in_group</marker>
    </item>
    <item>
        <position>7</position>
        <label>Whatever7</label>
        <marker id="unique2">start_group</marker>
    </item>
    <item>
        <position>8</position>
        <label>Whatever8</label>
        <marker>last_in_group</marker>
    </item>
    <item>
        <position>9</position>
        <label>Whatever9</label>
    </item>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <item>
      <position>1</position>
      <label>Whatever1</label>
   </item>
   <item>
      <position>2</position>
      <label>Whatever2</label>
   </item>
   <group position="1" id="unique1">
      <item>
         <position>3</position>
         <label>Whatever3</label>
         <marker id="unique1">start_group</marker>
      </item>
      <item>
         <position>4</position>
         <label>Whatever4</label>
      </item>
      <item>
         <position>5</position>
         <label>Whatever5</label>
      </item>
      <item>
         <position>6</position>
         <label>Whatever6</label>
         <marker>last_in_group</marker>
      </item>
   </group>
   <group position="1" id="unique2">
      <item>
         <position>7</position>
         <label>Whatever7</label>
         <marker id="unique2">start_group</marker>
      </item>
      <item>
         <position>8</position>
         <label>Whatever8</label>
         <marker>last_in_group</marker>
      </item>
   </group>
   <item>
      <position>9</position>
      <label>Whatever9</label>
   </item>
</root> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <root>
   <xsl:for-each-group select="item" group-starting-with=
   "*[marker eq 'start_group'
    or
      not(marker)
    and
      preceding-sibling::*[marker][1]/marker eq 'last_in_group'
     ]
   ">
     <xsl:choose>
       <xsl:when test="current-group()[1]/marker">
               <group position=
               "{1 +count(current-group()[1]
                            /preceding-sibling::*
                                  [marker = 'start_group'])}"
               id="{marker/@id}">
                 <xsl:apply-templates select="current-group()"/>
               </group>
       </xsl:when>
       <xsl:otherwise>
        <xsl:apply-templates select="current-group()"/>
       </xsl:otherwise>
     </xsl:choose>
   </xsl:for-each-group>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当这个 XSLT 2.0 转换应用于同一个 XML 文档（上图）时，会产生相同的正确结果**。

# asp.net - 获取内容页面中母版页对象的 ID

> ID：11145980
> 
> 赞同：6
> 
> 时间：2012-06-21T20:11:23.793
> 
> 标签：asp.net, master-pages, webforms, content-pages

如果母版页有一个 ID 为 label1 的标签，我如何在内容页面中控制该 ID。id 没有被传递，所以我无法控制它。例如，如果我有一个 ID 为 contentLabel 的控件，我只需键入 contentLabel 即可访问它的代码。（无论我在做什么）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T20:12:35.763

这里有两个选项：

**1**：确保您的内容 aspx 指定[MasterType](http://msdn.microsoft.com/en-us/library/ms228274.aspx)：    

```
<%@ MasterType VirtualPath="~/yourMasterPageName.master" %> 
```

这样做可以让您的内容页面知道您的母版页会发生什么，并为您提供智能感知。因此，现在您可以继续在母版页的代码隐藏中公开标签的 Text 属性。

```
public string ContentLabelText
{
    get { return contentLabel.Text; }
    set { contentLabel.Text = value; }
} 
```

然后您可以在内容页面的代码隐藏页面 ala 中访问它：

```
Master.ContentLabelText = "hah!"; 
```

或者，**2**：您可以通过[FindControl()](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)访问标签，如下所示：

```
var contentLabel = Master.FindControl("contentLabel") as Label; 
```

# jquery - jQuery 图像滑块及其图像

> ID：11145987
> 
> 赞同：1
> 
> 时间：2012-06-21T20:11:49.790
> 
> 标签：jquery

我是 jQuery 和图像滑块的新手。使我想要滑动的图像与容纳它们的滑块容器大小相同是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:50:18.983

@Roko 已经解释了你需要知道的一切。代表我，我只想与您分享这个链接：[Learn jQuery in 30 days](http://tutsplus.com/course/30-days-to-learn-jquery/)。本课程在掌握 jQuery 方面帮助了我很多，它包含一个滑块示例，由伟大的 jQuery 忍者 - Jeffrey Way 指导。我强烈建议你看看它，肯定不会浪费这个时间。玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:13:18.907

这不是关于最佳实践，它取决于您的需求，
但在 javascript/jQuery 中创建一个滑块（新手）最容易让它具有**相同的宽度**，

*   你可以很容易地控制滑动父位置...
*   你不需要做 CSS 技巧来保持你的图像居中......
*   您不需要对*剩余的滑动空间*进行 javascript 计算...
*   有一天，您可以用 DIV 元素替换您的图像，这些元素将包含更多数据......

## *[示例画廊](http://jsbin.com/ifilel/edit#javascript,html,live)*

# ios - 尝试从模型类执行块时出错

> ID：11145989
> 
> 赞同：0
> 
> 时间：2012-06-21T20:11:55.863
> 
> 标签：ios, xcode, objective-c-blocks, nsmanagedobjectcontext

在我的 tableViewController 我有这种代码（这里是简化的）：

```
-(void)saveOnDatabase{

//here I set up NSManagedObjectContext and everything

[[[array objectAtIndex:1] objectForKey:@"tableLabels"] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){

    if (obj==solvent) {
        [pepe setValue: [self numberFromText:delta :2] forKey:obj];
    }else {
        [pepe setValue: nil forKey:obj];
    }

}];

} 
```

它工作正常，并且达到了我的预期。但是为了保持代码干净，我想从我的模型中执行这段代码，这是 NSObject 的一个子类，我在其中进行所有计算以及与 UI 无关的所有事情。问题是，当我尝试在模型类上实现它时，它会给我一些错误，例如：`Incompatible block pointer types sending 'int((^))(void)' to parameter of type 'void (^)(__strong id, NSUInteger, BOOL*)'`

该块包含在如下方法中：

```
-(void)saveCustomToDatabase:id  withContext:(NSManagedObjectContext*)context withImpurity:(NSString*)impurity  withDelta:(NSString *)delta ... // the rest 
```

考虑到我传递了所有必要的参数，我真的不知道这里有什么问题以及为什么它甚至无法在其他类上编译...

完整的方法正是这个：

```
-(void)saveCustomToDatabase:id  withContext:(NSManagedObjectContext*)context withImpurity:(NSString*)impurity  withDelta:(NSString *)delta withAssigment:(NSString*)assigment withEntity:(NSString*)entity withSolvent:(NSString*)solvent {

            NSManagedObject *pepe = [NSEntityDescription insertNewObjectForEntityForName:entity inManagedObjectContext:context];

            if (assigment.length>1) [pepe setValue:assigment forKey:@"definition"];

            [pepe setValue:impurity forKey:@"impurity"];

[[[[self pickerArray] objectAtIndex:1] objectForKey:@"tableLabels"] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){

    if (obj==solvent) {
        [pepe setValue: [self numberFromText:delta :2] forKey:obj];
    }else {
        [pepe setValue: nil forKey:obj];
    }

}];

NSError *error;

if (![context save:&error]) 
{
    NSLog(@"Problem saving: %@", [error localizedDescription]);
}

} 
```

# javascript - 跨域 - 使用 javascript 临时编辑页面

> ID：11145991
> 
> 赞同：0
> 
> 时间：2012-06-21T20:11:56.317
> 
> 标签：javascript, ajax, cross-domain, developer-tools

我有一个 Web 应用程序的想法，但遇到了一些 javascript 问题。

假设应用程序需要获取客户的网站 url，显示它（在 iframe 或其他东西中）。然后它应该能够使用 Javascript 临时调整其设计，我认为这称为 Javascript 注入。（类似于浏览器的开发者工具可以做的事情。）

所以问题是：**这是跨域 javascript，如果是，我可以使用哪些解决方案？** ，最简单的方法是什么？

在相关说明中：如果用户将我的应用程序的**一些**javascript 代码添加到他们的网站（比如某些 API 的工作方式），那会以任何方式帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:15:01.217

如果他们在他们的页面中包含您的 JS，那么 JS 是从他们的页面运行的，您可以只使用[标准 DOM](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)。

如果不是，那么[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)将阻止您访问他们的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:21:25.403

这是跨域。所以解决方案：服务器端语言

PHP、ASP.Net、Ruby on Rails 等。通过它加载他们的网站，然后您可以触摸它，因为它将是您网站上的副本。不过我会警告你，当使用像 CURL 这样的库时，这可能非常困难（至少在我使用 PHP 的 CURL 的经验中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:21:47.607

当您对现代 Web 浏览器的工作方式有适当的了解时（IE8+，当然所有其他浏览器总是领先于 IE），同源策略不适用

我专门通过使用 postMessage 和 iframe 进行跨浏览器通信来解决这个问题。这种技术适用于 IE8+ 和所有现代浏览器。此外，请确保您在 IE 中的第 3 方 cookie 支持的标头中设置您的隐私政策。

如果你去 kitgui.com 并尝试演示，你可以看到这个工作。您也可以免费使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T06:10:09.093

您可以使用小书签将您的 JavaScript 代码添加到客户的网页。就像[萤火虫精简版](http://getfirebug.com/firebuglite/)一样。

# c# - 静态类中的静态方法中的变量

> ID：11145993
> 
> 赞同：2
> 
> 时间：2012-06-21T20:12:01.583
> 
> 标签：c#, .net, oop, c#-4.0, static

请考虑以下代码：

```
1)public static class MyClass
2){
3)    public static DateTime MyMethod(DateTime dt)
4)    {
5)         DateTime temp = new DateTime();
6)         temp = dt.AddDays(1);
7)         return temp;
8)    }
9)} 
```

变量是否`temp`每个调用都有实例`MyMethod`？还是因为它位于静态类中的静态方法中，只是`temp`在内存中分配了一个变量实例？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T20:13:57.913

`temp`既不是静态变量也不是实例变量，它是*局部*变量。声明它的方法是否是静态的绝对无关紧要：变量的范围从其声明点开始，到声明它`}`的范围的右花括号结束。通过的每个执行线程`MyMethod`都有自己的副本`temp`，该副本在变量范围之外的任何地方都是不可见的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T20:13:59.467

> 对于 MyMethod 的任何调用，临时变量是否都有实例？

如果您的意思是“每次调用都`MyMethod`获取一个单独的`temp`变量吗？” 那么答案是肯定的。

它是静态类中的静态方法这一事实无关紧要 - 它是一个局部变量，因此每次调用都会获得一个“新”局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:14:20.223

`temp`每次调用有一个实例。

顺便说一句，我缺少像在 C++ 中那样在静态方法中定义静态局部变量的可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:15:28.720

temp 变量，即使在静态方法中，也必须声明为静态变量，否则它只是在该实例中本地创建，然后在方法调用结束时被吹走。

# python - python 2.6中100mb文件的多个字符串替换

> ID：11145994
> 
> 赞同：2
> 
> 时间：2012-06-21T20:12:04.853
> 
> 标签：python, windows, string, file, replace

我有一个 100mb 的大文件，我想对其执行大约 5000 次字符串替换，实现这一目标的最有效方法是什么？

没有比逐行读取文件并在每行上执行 5000 次替换更好的方法吗？

在打开文件并对字符串执行 5000 次替换时，我还尝试使用 .read 方法将文件作为字符串读取，但这甚至更慢，因为它会复制整个文件的 5000 个副本。

该脚本必须使用 python 2.6 在 Windows 上运行

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:31:28.217

按此顺序尝试以下操作，直到获得足够快的操作。

1.  将文件读入一个大字符串并依次进行每次替换，覆盖相同的变量。

    ```
    with open(..., 'w') as f:
        s = f.read()
        for src, dest in replacements:
            s = s.replace(src, dest)
        f.seek(0)
        f.write(s) 
    ```

2.  [内存映射](http://docs.python.org/library/mmap.html)文件，并编写一个自定义替换函数来进行替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:06:05.230

我建议，不要进行 5000 次搜索，而是一次搜索 5000 项：

```
import re

replacements = {
    "Abc-2454": "Gb-43",
    "This": "that",
    "you": "me"
}

pat = re.compile('(' + '|'.join(re.escape(key) for key in replacements.iterkeys()) + ')')
repl = lambda match: replacements[match.group(0)] 
```

您现在可以将 re.sub 应用于整个文件，

```
with open("input.txt") as inf:
    s = inf.read()

s = pat.sub(repl, s)

with open("result.txt") as outf:
    outf.write(s) 
```

或逐行，

```
with open("input.txt") as inf, open("result.txt") as outf:
    outf.writelines(pat.sub(repl, line) for line in inf) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:22:02.267

您应该使用 open() 和 read() 读入文本，然后使用（编译的）正则表达式进行字符串替换。一个简短的例子：

```
import re

# read data
f = open("file.txt", "r")
txt = f.read()
f.close()

# list of patterns and what to replace them with
xs = [("foo","bar"), ("baz","foo")]

# do replacements
for (x,y) in xs:
    regexp = re.compile(x)
    txt = regexp.sub(y, txt)

# write back data
f = open("file.txt", "w")
f.write(txt)
f.close() 
```

# java - 将 CellList 拆分为列，垂直排序

> ID：11145995
> 
> 赞同：0
> 
> 时间：2012-06-21T20:12:19.220
> 
> 标签：java, gwt

我想将`CellList`'s 的内容**垂直**拆分为三列。请参见下面的示例（对于包含字母 A 到 H 的列表）。

```
A D G
B E H
C F 
```

我有一个`CellList cell`包含由`AsyncDataProvider<String>`.

`CellList`正在显示在 UiBinder 模板中。最简单的方法是什么？到目前为止，我只提出了：

1.  使用 3 个 CellLists 并使用您填充的 ​​3 个 AsyncDataProviders 手动拆分它
2.  使用 CellTable 并奇怪地填充列
3.  创建一个插入随机断路器的自定义 CellList

这些都很乏味，而且看起来不直观。有没有更简单的方法来做到这一点？

# excel - 循环的第二个增量首先覆盖，依此类推。

> ID：11145999
> 
> 赞同：0
> 
> 时间：2012-06-21T20:12:34.070
> 
> 标签：excel, vba, loops, overwrite

我一直在看这个很长时间，所以我把它扔给那些比我更有经验的人，希望铜或知识被扔给我。代码运行没有错误。

问题是第一个循环的第二个增量覆盖了第一个增量数据范围，依此类推。循环 1 将填充行 2:15。如果我查看 lastrow 的地址，它将显示 b16 的正确范围作为要粘贴到的列中的 lastrow/单元格，但是一旦下一个 objWorkBook 的循环运行，它就会开始覆盖第一个增量单元格而不是最后一个排。我有一种感觉，我错过了一些愚蠢的东西，但它暗示了我。

任何帮助或建议将不胜感激。我对反馈感兴趣。这最终将处理 100 多个工作簿，每个工作簿添加大约 1000 个条目。我担心我的代码的效率。使用数组会加快速度吗？一旦事情赶上，它每周只会处理 2 个工作簿。再次感谢您愿意分享的任何指示或建议。

```
Option Explicit

Sub parse()

    Application.DisplayAlerts = False
    'Application.EnableCancelKey = xlDisabled

    Dim strPath As String, strPathused As String
    strPath = "C:\prodplan"

    Dim objfso As FileSystemObject, objFolder As Folder, objfile As Object

    Set objfso = CreateObject("Scripting.FileSystemObject")
    Set objFolder = objfso.GetFolder(strPath)

    'Loop through objWorkBooks
    For Each objfile In objFolder.Files

        If objfso.GetExtensionName(objfile.Path) = "xlsx" Then

            Dim objWorkbook As Workbook
            Set objWorkbook = Workbooks.Open(objfile.Path)

            ' Set path for move to at end of script
            strPathused = "C:\prodplan\used\" & objWorkbook.Name

            'open WB to consolidate too
            Workbooks.Open "C:\prodplan\compiled\plancon.xlsx"

            'Range management WB
            Dim SRCwb As Worksheet, SRCrange1 As Range, SRCrange2 As Range, lastrow As Range

            Set SRCwb = objWorkbook.Worksheets("plan")
            Set SRCrange1 = SRCwb.Range("b6:i7")
            Set SRCrange2 = SRCwb.Range("k6:p7")

            'Range management destination WB
            Dim DSTws As Worksheet
            Set DSTws = Workbooks("plancon.xlsx").Worksheets("data")

            'start header dates and shifts copy from objworkbook to consolidated WB

            Set lastrow = Workbooks("plancon.xlsx").Worksheets("data").Range("b" & ActiveSheet.Rows.Count).End(xlUp).Offset(1, 0)

            SRCrange1.copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True
            Range(ActiveCell, Selection.End(xlDown)).Offset(0, -1).Value = objWorkbook.Name

            Set lastrow = Workbooks("plancon.xlsx").Worksheets("data").Range("b" & ActiveSheet.Rows.Count).End(xlUp).Offset(1, 0)

            SRCrange2.copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True
            Range(ActiveCell, Selection.End(xlDown)).Offset(0, -1).Value = objWorkbook.Name

            'Begin loop to copy content.
            Dim DSTheader As Range
            Set DSTheader = DSTws.Range("d1:bw1")
            Dim SRCheader As Range
            Set SRCheader = SRCwb.Range("a1:a110")

            Dim x As Variant
            Dim y As Variant

            Dim matchEXIT As Boolean
            matchEXIT = False

    For Each x In DSTheader
      For Each y In SRCheader

            Dim SRCrngCP1 As Range
            Set SRCrngCP1 = SRCwb.Range(y.Offset(0, 1).Address & ":" & y.Offset(0, 8).Address)
            Dim SRCrngCP2 As Range
            Set SRCrngCP2 = SRCwb.Range(y.Offset(0, 10).Address & ":" & y.Offset(0, 15).Address)

            If y > 0 Then

            If x = y Then

            Dim MyColumn As String
            Dim Here As String

            Here = DSTws.Range(x.Address).Address
            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

            Set lastrow = DSTws.Range(MyColumn & ActiveSheet.Rows.Count).End(xlUp).Offset(1, 0)

            SRCrngCP1.copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            Set lastrow = DSTws.Range(MyColumn & ActiveSheet.Rows.Count).End(xlUp).Offset(1, 0)

            SRCrngCP2.copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            If x = y Then matchEXIT = True
            If matchEXIT = True Then Exit For

    End If
    End If

        Next y

            matchEXIT = False
    Next x

     MsgBox x
            objWorkbook.Close False

            'Move proccesed file to new Dir
            Dim OldFilePath As String
            Dim NewFilePath As String

            OldFilePath = objfile 'original file location
            NewFilePath = strPathused ' new file location
            Name OldFilePath As NewFilePath ' move the file

        End If
            Set lastrow = Workbooks("plancon.xlsx").Worksheets("data").Range("b" & ActiveSheet.Rows.Count).End(xlUp).Offset(1, 0)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:50:19.717

**未经测试**

你能测试一下并告诉我你是否有任何错误。

```
Option Explicit

Sub parse()
    Dim MyColumn As String, Here As String, OldFilePath As String, NewFilePath As String
    Dim strPath As String, strPathused As String

    Dim objfso As FileSystemObject, objFolder As Folder, objfile As Object

    Dim objWorkbook As Workbook, wbPlan As Workbook
    Dim SRCwb As Worksheet, DSTws As Worksheet

    Dim lastrow As Long, lastrowN As Long

    Dim SRCrange1 As Range, SRCrange2 As Range
    Dim DSTheader As Range, SRCheader As Range, x As Range, y As Range
    Dim SRCrngCP1 As Range, SRCrngCP2 As Range

    Application.DisplayAlerts = False

    strPath = "C:\prodplan"

    Set objfso = CreateObject("Scripting.FileSystemObject")
    Set objFolder = objfso.GetFolder(strPath)

    'Loop through objWorkBooks
    For Each objfile In objFolder.Files
        If objfso.GetExtensionName(objfile.Path) = "xlsx" Then

            Set objWorkbook = Workbooks.Open(objfile.Path)
            Set SRCwb = objWorkbook.Worksheets("plan")
            Set SRCrange1 = SRCwb.Range("B6:I7")
            Set SRCrange2 = SRCwb.Range("K6:P7")

            ' Set path for move to at end of script
            strPathused = "C:\prodplan\used\" & objWorkbook.Name

            'open WB to consolidate too
            Set wbPlan = Workbooks.Open("C:\prodplan\compiled\plancon.xlsx")
            Set DSTws = wbPlan.Worksheets("data")
            lastrow = DSTws.Range("B" & DSTws.Rows.Count).End(xlUp).Row + 1

            With DSTws.Range("B" & lastrow)
                SRCrange1.Copy
                .PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True
                lastrowN = DSTws.Range("B" & DSTws.Rows.Count).End(xlUp).Row
                .Range("A" & lastrow & ":A" & lastrowN).Value = objWorkbook.Name

                lastrow = lastrowN + 1

                SRCrange2.Copy
                .PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True
                lastrowN = DSTws.Range("B" & DSTws.Rows.Count).End(xlUp).Row
                .Range("A" & lastrow & ":A" & lastrowN).Value = objWorkbook.Name
            End With

            Set DSTheader = DSTws.Range("D1:BW1")
            Set SRCheader = SRCwb.Range("A1:A110")

            For Each x In DSTheader
                For Each y In SRCheader
                    Set SRCrngCP1 = SRCwb.Range(y.Offset(0, 1).Address & ":" & y.Offset(0, 8).Address)
                    Set SRCrngCP2 = SRCwb.Range(y.Offset(0, 10).Address & ":" & y.Offset(0, 15).Address)
                    If y > 0 Then
                        If x = y Then
                            Here = x.Address
                            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

                            lastrow = DSTws.Range(MyColumn & DSTws.Rows.Count).End(xlUp).Row + 1

                            With DSTws.Range("B" & lastrow)
                                SRCrngCP1.Copy
                                .PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

                                lastrow = DSTws.Range(MyColumn & DSTws.Rows.Count).End(xlUp).Row + 1

                                SRCrngCP2.Copy
                                .PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True
                            End With

                            If x = y Then Exit For
                        End If
                    End If
                Next y
            Next x

            objWorkbook.Close False

            OldFilePath = objfile 'original file location
            NewFilePath = strPathused ' new file location
            Name OldFilePath As NewFilePath ' move the file
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:49:53.397

好的，所以我在远离它的一个美好的长周末后想通了。有一个 Duh 时刻

```
 'open WB to consolidate too
            Workbooks.Open "C:\prodplan\compiled\plancon.xlsx" 
```

在应该复制到它的循环内部，因此在每个循环中，它将我的副本重置为 WB，从而导致看起来像是覆盖。

我将打开的行移出，循环将粘贴增加到最后一个单元格，没有问题。然而它确实打破了

```
 Range(ActiveCell, Selection.End(xlDown)).Offset(0, -1).Value = objWorkbook.Name 
```

好吧..如果我按下代码它可以工作..如果我运行代码它会跳过该行..我不知道..如果我无法弄清楚，我将重新发布另一个问题。