# StackOverflow 问答 10509000-10509999

# module - 闭包按需编译加载模块

> ID：10509002
> 
> 赞同：1
> 
> 时间：2012-05-09T02:13:30.463
> 
> 标签：module, google-closure-compiler

我只是发现

```
 java -jar Build\Tools\compiler.jar ^ 
--compilation_level=ADVANCED_OPTIMIZATIONS ^ 
--externs Build\jQuery.externs.js ^ 
--js Build\Output\Compiling.js ^ 
--js Script/Themes.lang.js ^ 
--js Script/Themes.js ^ 
--module Core:3 ^ 
--js UI/ThemeChooser/ThemeChooser_en.htm.js ^ 
--js UI/ThemeChooser/ThemeChooser.js ^ 
--module UI_ThemeChooser:2:Core ^ 
--js UI/VerticalTabs/VerticalTabs_en.htm.js ^ 
--js UI/VerticalTabs/VerticalTabs.js ^ 
--module UI_VerticalTabs:2:Core ^ 
--js Pager/Pager_en.htm.js ^ 
--js Pager/jquery.Pager.js ^ 
--js Pager/Pager.js ^ 
--module Pager:3:VerticalTabs ^ 
--module_output_path_prefix .\Compiled\ 
```

但我想知道如何设置 --closure_entry_point 以及如何按需加载模块化 js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:52:16.707

对于你的第一个问题：

--closure_entry_point 与 --manage_closure_dependencies 和 --only_closure_dependencies 一起使用，以自动将文件从设置传递到编译器。如果您不使用这些选项，它们就没有任何价值。

对于你的第二个问题：

您可以像加载任何其他 javascript 一样加载您的模块。最简单的方法是在要加载模块时将脚本标记附加到 DOM。另一种方法是使用 XHR 加载 js，然后使用结果调用 eval()。

# c# - 如何防止其他会话在 UPDATE 发生之前选择一行

> ID：10509004
> 
> 赞同：0
> 
> 时间：2012-05-09T02:14:00.643
> 
> 标签：c#, mysql, innodb

我正在用 C# 编写一个呼叫中心程序，其中多个代理从表中一一加载客户。为了防止多个代理加载同一个客户，我在表中添加了一个新字段以显示该行被锁定。当我选择一行时，我会更新该行并将锁定字段设置为选择该行的代理的 ID。但问题是在我选择行并将其锁定期间，另一个代理可以选择同一行，因为它尚未锁定！有什么办法可以处理这种情况吗？数据库是 MySQL 5 / InnoDB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:21:44.893

假设您只能为每个代理锁定 1 个配置文件：

```
--Check for no lock
UPDATE T SET LockField = 'abc' WHERE ProfileId = 1 AND LockField IS NULL;

--Check to see if we updated anything. 
--If not, we can't show this row because someone else has it locked
SELECT ROW_COUNT(); 
```

> 在我执行更新之前，我必须选择 id ...

如果您在 1 条语句中执行 UPDATE，则不会。我们对 MySQL 语法的了解有点过头了——但类似于：

```
--Check for no lock
UPDATE T SET LockField = 'abc' WHERE ProfileId = (
   SELECT ProfileId FROM T WHERE LockField IS NULL LIMIT 1
);

--Check to see what we updated
SELECT * FROM T WHERE LockField = 'abc'; 
```

很容易工作。

如果你想变得更复杂一些（或者 MySQL 不支持子查询），你可以使用 SELECT...FOR UPDATE 的更新锁：

```
START TRANSACTION;

--Put an update lock on the row till the xaction ends
--any other SELECT wanting an update lock will block until we're out of the xaction
SELECT @id = ID FROM T WHERE LockField IS NULL LIMIT 1 FOR UPDATE;

UPDATE T SET LockField = 'abc' WHERE ID = @id;

COMMIT TRANSACTION; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:29:37.127

签出`LOCK TABLES`并`UNLOCK TABLES`：

[http://dev.mysql.com/doc/refman/5.6/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.6/en/lock-tables.html)

您可以将其与马克的回答结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:54:16.857

您所描述的是[乐观并发与悲观并发](http://www.asp.net/web-forms/tutorials/data-access/editing,-inserting,-and-deleting-data/implementing-optimistic-concurrency-cs)。

# c - 如何用C获取设备的地址

> ID：10509006
> 
> 赞同：-1
> 
> 时间：2012-05-09T02:14:12.593
> 
> 标签：c, linux

我得到这样的硬盘ID：

```
system("hdparm -i /dev/xxx > /tmp/hdid"); 
```

如何从 C 中的程序获取设备名称（`/dev/sda`或`/dev/sdb`或`/dev/hda`等）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:34:50.123

您的问题对我来说根本不清楚 - 如果这是 Linux，请尝试：

getmntent() 枚举挂载的文件系统

/proc/mounts 目录列出了挂载的设备

/dev/disks 目录列出了磁盘设备，它们的名称通常是 sda、sdb 等。这包括未挂载的设备。那里的条目是符号链接，因此 readlink 或 ls -l 将显示目标。

# asp.net - ASP.NET System.Anything 未定义

> ID：10509010
> 
> 赞同：0
> 
> 时间：2012-05-09T02:14:23.660
> 
> 标签：asp.net, webforms, namespaces, compiler-errors

我运行 Debugging 并在 System.xml 下的所有命名空间中出现大量“未定义”错误。System 和 System.Web 引用位于 References 文件夹中。

为了回溯自上次调试以来我所做的更改，我将根命名空间从默认值缩减为三个字母的缩写。改回来没有任何作用。我一直在处理的其他所有内容都是单独的页面。

如果我将 Global.System 添加到所有命名空间或将它们减少到子命名空间，大多数（不是全部）错误都会消失。即这些不会抛出错误：

> Global.System.Web.UI.Page
> 
> 页

但这确实：

> System.Web.UI.Page

免责声明：我是 .NET 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:39:55.150

你有一个名为“系统”的类吗？还是“全球”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:16:43.847

您尝试关闭并重新打开 Visual Studio，还是进行完全重建？

# bash - 在文件中添加一个新行，检查最后一个字符是否是 Bash 中的换行符

> ID：10509012
> 
> 赞同：3
> 
> 时间：2012-05-09T02:15:08.030
> 
> 标签：bash

我想在文件末尾追加一个新行，但我正在使用的一些文件可能不包含换行符作为它们的最后一个字符，这意味着我要追加到同一行。

有没有一种简单的方法来检查换行符并进行相应调整？

`echo "some line of text" >> aFile.txt`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T02:24:51.597

您可以使用：

```
x=$(tail -c 1 aFile.txt)
if [ "$x" != "" ]
then echo >> aFile.txt
fi
echo "some line of text" >> aFile.txt 
```

操作员从嵌入在其中的命令的输出中`$(...)`删除尾随换行符，并且该`tail -c 1`命令打印文件的最后一个字符。如果最后一个字符不是换行符，则字符串`"$x"`不会为空，因此在添加新的文本行之前向文件添加换行符。

# c++ - 使用 rand() 选择 4 个随机方向之一？

> ID：10509013
> 
> 赞同：0
> 
> 时间：2012-05-09T02:15:11.520
> 
> 标签：c++, c, random

我想从 4 个方向中随机选择：

```
movePlayer(map, &positionPlayer, direction); 
```

其中方向是`UP`, `DOWN`,`LEFT`和之一`RIGHT`。

我还没有找到如何使用该`rand()`功能来做到这一点。

我怎样才能做到这一点？我是否需要为每个方向分配一个数字，然后在这些范围内选择一个随机数？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T02:19:39.673

是的，您需要为每个方向分配一个编号。IE。0=UP 1=DOWN 2=LEFT 3=RIGHT 你需要这样的代码：

```
int direction = rand()%4; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T02:19:47.327

最简单的方法是简单地对 rand 函数进行取模以获得 0 到 3（含）之间的数字。

```
int x = rand() % 4; 
```

然后你可以简单地执行一个 switch 语句来选择方向

```
switch(x)
{
   case 0:
      movePlayer(map, &positionPlayer, UP);
      break;

   case 1:
      movePlayer(map, &positionPlayer, DOWN);
      break;

   case 2:
      movePlayer(map, &positionPlayer, LEFT);
      break;

   case 3:
      movePlayer(map, &positionPlayer, RIGHT);
      break;
} 
```

当然，这不会是完全随机的完美分布（模数有点像黑客）。

如果您想要实际分布的真正随机性，那么您可能需要研究 Boost.Random。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T02:23:09.627

如果`direction`是一个枚举：

```
enum Direction {
    UP,
    DOWN,
    LEFT,
    RIGHT
} direction; 
```

在 C/C++ 中，枚举常量表示为整数。第一个值`UP`对应于 0，对应于`DOWN`1，依此类推。

所以你可以打电话：

```
movePlayer(map, &positionPlayer, static_cast<Direction>(rand() % 4)); 
```

它将`movePlayer`使用随机选择的方向值调用。

仅使用模运算符来缩小 的范围并不总是可取的`rand()`。如果您需要分布更均匀的东西，您应该研究[其他方法](http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T03:54:05.283

rand() 不一定很好。`<random>`可能是一个更好的选择。

C++11：

```
#include <random>
#include <iostream>

enum Direction : char {
  north, east, south, west
};

std::ostream &operator<< (std::ostream &os, Direction d) {
  switch (d) {
    case Direction::north : return os << "North";
    case Direction::east  : return os << "East";
    case Direction::south : return os << "South";
    case Direction::west  : return os << "West";
  }
}

std::uniform_int_distribution<Direction> random_direction
  {Direction::north, Direction::west};

int main() {
  // you can use any of several different sources of random values depending on your needs
  std::mt19937 eng;
  for (int i=0;i<10;++i)
    std::cout << random_direction(eng) << '\n';
} 
```

如果您不希望将方向隐式转换为 int，则可以使用 an`enum class`和不同的定义`random_direction`：

```
template<typename Engine>
Direction random_direction(Engine &&eng) {
  std::uniform_int_distribution<> dist
    {int(Direction::north),int(Direction::west)};
  return Direction(dist(std::forward<Engine>(eng)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T04:40:35.937

更好的方法是在 rand()%4 之前调用 srand(time(0))。这将确保每次执行程序时都会生成不同的随机数集。每次执行程序时调用 rand() 而不使用 srand() 将生成相同的随机数集。

# python - Sqlalchemy：如何将新行插入到具有 IDENTITY 主键列的 Sybase 数据库表中？

> ID：10509016
> 
> 赞同：0
> 
> 时间：2012-05-09T02:15:25.450
> 
> 标签：python, sqlalchemy, sybase, python-2.6

我已经定义了这个类：

```
class Trade(Base):
    __tablename__ = 'TRADE'
    __table_args__ = {'quote':False}

    id = Column(Integer, name='id_trade', primary_key=True)
    idImnt = Column(Integer, ForeignKey('INSTRUMENT.id_imnt'), name='id_imnt')
... 
```

当我尝试将新的 Trade 实例提交回数据库时，出现此错误：

```
 Instance <Trade at 0x954fd90> has a NULL identity key.  If this is 
an auto-generated value, check that the database table allows generation of 
new primary key values, and that the mapped Column object is configured to 
expect these generated values.  Ensure also that this flush() is not 
occurring at an inappropriate time, such as within a load() event. 
```

我想我错过了 id 列定义中的某些内容。解决办法是什么？

*编辑：*

台式电脑：WinXP

Sybase 服务器：15.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:12:27.700

原来是驱动问题。

Sybase ODBC 驱动程序 12.5 适用于简单的选择和更新，但在将数据插入具有标识列的表时会失败。

切换到 15.5 驱动程序解决了这个问题。

# java - 如何拆分 XML 字符串？

> ID：10509018
> 
> 赞同：2
> 
> 时间：2012-05-09T02:15:28.727
> 
> 标签：java, xml, split

我有这个 xml 节点。我想使用java将坐标拆分为纬度和经度。

```
<MAP>1234:3.12345,119.12345</MAP> 
```

我想分割坐标或者至少可以得到这种格式的坐标（纬度，经度）。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:36:41.137

你试过正则表达式吗？

```
final Pattern regex = Pattern.compile("<MAP>((.*):(.*),(.*))</MAP>", Pattern.DOTALL); 
final Matcher matcher = regex.matcher(whatyouwanttoparselatlongwiththeaboveformat); 
if (matcher.find()) { 
     System.out.print(matcher.group(2) + " : (lat,lon) = ");
     float latitude = Float.valueOf(matcher.group(3));
     float longitude = Float.valueOf(matcher.group(4));
     System.out.println(latitude + "," + longitude);
} 
```

然后，您可以根据需要处理纬度和经度。

# c# - 创建 LINQ to Entities 可以翻译的属性

> ID：10509019
> 
> 赞同：6
> 
> 时间：2012-05-09T02:15:41.600
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我很好奇如何创建一个可以由 LINQ 翻译的属性。下面是一个非常简单的例子。

我有一个表/类`Category`，它有一个`ParentId`链接到自身的列（所以一个类别可以有子类别）

EF 自动生成一个属性`Category1`，它是父类。

为了清楚起见，我创建了另一个属性

```
public partial class Category
{
  public Category Parent
  {
    get { return Category1; }
  }
} 
```

问题是，这行得通

```
var categs = ctx.Categories.Where(x => x.Category1 == null); 
```

但这不起作用

```
var categs = ctx.Categories.Where(x => x.Parent == null); 
```

> LINQ to Entities 不支持指定的类型成员“父级”。仅支持初始化程序、实体成员和实体导航属性。

有没有办法在不执行 .ToList() 的情况下创建可翻译的属性（LINQ to SQL）？

编辑：我想避免接触 Model.edmx，因为数据库在开发过程中经常发生变化，并且 .edmx 经常需要重新创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:43:29.103

如果您询问是否可以使用 getter/setter 中的任何 C# 代码创建一个属性，然后让它被标准 LINQ to Entities 理解 - 那么不，它不能完成。C# 比 SQL 更具表现力，期望 Entity Framework 充当通用的 C# 到 SQL 转换器是不合理的。

不过，您可以在很多情况下解决此问题，请参阅[在 LINQ 语句中使用部分类属性](https://stackoverflow.com/questions/6879529/using-a-partial-class-property-inside-linq-statement/6927445)以获取示例。

**更新**

如果您告诉我们您到底想要达到什么目标会有所帮助，但这里有一个示例：

```
public partial class Category
{
    public static Expression<Func<Category, bool>> ParentIsNullExpression
    {
        get 
        {
            return c => c.Category1 == null;
        }
    }
} 
```

接着

```
var categs = ctx.Categories.Where(Category.ParentIsNullExpression); 
```

可以对表达式进行各种操作，其中一些受 EF 支持，因此可以转换为 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:48:03.900

在您的实体数据模型设计器（.edmx 文件）中，您可以将其重命名`Category1`为`Parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:54:29.850

您有 4 个选项：

1.  先用代码
2.  将其添加到 EDMX 设计器
3.  将您的属性添加到 EDMX 的 CSDL 部分，将列添加到 EDMX 的 SSDL 部分，然后在 EDMX 的映射部分将它们相互映射。
4.  使用 .ToList() 将查询带入内存，然后使用内部 LINQ 而不是 LINQ to Entities。

# codeigniter - CodeIgniter：取消设置所有用户数据，但不破坏会话

> ID：10509022
> 
> 赞同：3
> 
> 时间：2012-05-09T02:15:56.030
> 
> 标签：codeigniter, codeigniter-2

有没有办法取消设置会话中的所有用户数据而不必使用会话销毁？我正在尝试注销我的用户，并且需要一次取消设置所有用户数据。跟踪会话中所有可能的用户数据集变得乏味。我只想取消设置用户数据中可能设置的所有内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T02:37:41.993

这很简单！

```
 $this->session->unset_userdata('some_name'); 
```

或者

```
 $array_items = array('username' => '', 'email' => '');
 $this->session->unset_userdata($array_items); 
```

我希望这有帮助！

**编辑：看起来你实际上没有在你的会话中跟踪任何东西（有点奇怪？）。你可以调用我写的这个函数：**

```
function unset_only() {
    $user_data = $this->session->all_userdata();

    foreach ($user_data as $key => $value) {
        if ($key != 'session_id' && $key != 'ip_address' && $key != 'user_agent' && $key != 'last_activity') {
            $this->session->unset_userdata($key);
        }
    }
} 
```

**当然，这假设您使用默认的 CI 会话设置。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:48:26.330

从codeigniter论坛复制：

> 它所做的只是杀死用户cookie，但用户数据将保留在会话类中，直到当前请求结束。会话将在下一次请求时重新初始化，并且没有可用的用户数据。基本上，它所做的只是切断用户和服务器会话之间的链接，但数据仍然保留到请求结束。
> 
> 如果这是一个很大的问题，你可以这样做：
> 
> $this->session->userdata = array();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T10:33:15.047

我管理它请尝试一下。

```
$this->load->library('session'); 
```

// 写入参数你的会话数据

```
$this->session->unset_userdata('sessiondata'); 
```

// 如果你想会话未设置组然后尝试它

```
$array_items = array('username' => '', 'email' => '');

$this->session->unset_userdata($array_items); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-16T05:59:28.030

你可以试试这个。在最新版本中，上面的代码不起作用。

```
$unset_array_items = array('token_id', 'last_id');
$this->session->unset_userdata($unset_array_items); 
```

# objective-c - 实现键盘点击声音，丢失

> ID：10509024
> 
> 赞同：1
> 
> 时间：2012-05-09T02:16:47.370
> 
> 标签：objective-c, iphone, ios5, xcode4.2

这个网站上的每个人都对我学习 iOS 编程非常有帮助，但我遇到了一个非常简单的功能的砖墙。我找到了有关在按钮触摸时实现工厂键盘点击声音的 Apple 文档，但我没有得到的是“创建 UIView 的子类”部分。我已经构建了一个非常基本的计算器，按钮由标准圆形矩形制成，我想发出简单的点击声音。所以苹果说：采用 UIInputViewAudioFeedback 协议执行以下三个步骤来采用 UIInputViewAudioFeedback 协议：

在您的 Xcode 项目中，创建 UIView 类的子类。在头文件中指明子类符合 UIInputViewAudioFeedback 协议，如下：@interface KeyboardAccessoryView : UIView { }

现在我使用标准的 UIViewController 与我所有的按钮绑定到一个 xib。我要：创建新文件，将其命名为 UIView 的子类，这样我就可以实现这个声音了吗？这对我来说没有意义，如果这真的是业余的东西，我很抱歉，但我正在从许多不同的地方学习。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:01:43.380

您必须将自定义输入视图设置`inputView`为应该是第一响应者（例如，`UITextField`实例）的对象的属性，并且`inputView`（您的自定义输入视图）必须符合`UIInputViewAudioFeedback`协议。并实际播放咔哒声：`[[UIDevice currentDevice] playinputClick]`。

例如：

```
@interface MyCalculatorDisplay : UIView
// ...
@end

@interface MyCustomKeyboard : UIView <UIInputViewAudioFeedback>
// ...
@end

// Then, somewhere in your controller:

MyCustomKeyboard *keyboard = [MyCustomKeyboard new];

MyCalculatorDisplay *display = [MyCalculatorDisplay new];

display.inputView = keyboard; 
```

# php - JQuery UI 对话框 - 只有第一个链接有效

> ID：10509026
> 
> 赞同：0
> 
> 时间：2012-05-09T02:16:55.593
> 
> 标签：php, jquery, mysql, html-table, jquery-ui-dialog

我有一个特定供应商的产品列表，其中显示了`<table>`我的 mysql 数据库中的数据。

在此表中，每个产品都有一个链接，单击该链接时，应在 ui-dialog 中显示产品详细信息`<div id = "detalhe_produto"></div>`。该对话框确实打开，但是，它仅适用于列表中的第一项。以下行的其他链接不会打开对话框。

谁能帮我？

这是我用来打开 ui 对话框的脚本：

```
<script type="text/javascript">
$(function(){ 

 $('detalhe_produto').click(function(){ 

     var selectedVal=$("#detalhe_produto").val(); 
     var url="produto_detalhe.php?codigo="+selectedVal; 

        var dialog = $("#detalhe_produto"); 
        if ($("#detalhe_produto").length == 0) { 
            dialog = $('<div id="detalhe_produto" style="display:hidden"></div>').appendTo('body'); 
        } 
        dialog.load( 
            url, 
            {},
            function (responseText, textStatus, XMLHttpRequest) { 
                dialog.dialog({                        
                    close: function (event, ui) {                             
                        dialog.remove(); 
                    }, 
                    modal: true, 
                    width: 460 
                }); 
            } 
        ); 
    });  

});
</script> 
```

然后是代码表：

```
<table border="0" cellpadding="0" cellspacing="3">
  <?php do { ?>
    <tr>
      <td align="left" valign="top" class="lista_produto"><a href="#<?php $_SESSION['codigo_produto'] = $row_lista_produtos['codigo']; $_SESSION['produto'] = $row_lista_produtos['produto']; ?>"><?php echo $row_lista_produtos['codigo']; ?></a></td>
        <td width="15"></td>
    </tr>
    <?php } while ($row_lista_produtos = mysql_fetch_assoc($lista_produtos)); ?>
</table> 
```

我试图将其更改`href="#"`为`href="javascript: void (0)"` ，结果是一样的。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:20:24.697

如果您有许多可以单击打开的不同对话框，则需要使用类选择器，`.`而不是 ID 选择器`#`。您可能还忘记了`#`.

所以代替这个：

```
var dialog = $("#detalhe_produto"); 
```

做这个：

```
var dialog = $(".detalhe_produto"); 
```

* ***请看这个jsfiddle**：http: [//jsfiddle.net/trpeters1/uFDdb/2/](http://jsfiddle.net/trpeters1/uFDdb/2/)

它为特定于您的用例的多个对话框提供了 jqueryUI 对话框的完整工作演示。意思是，对话框显示特定于单击哪个链接的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T02:19:57.890

你错过了`#`一个`$('detalhe_produto').click(function(){`

# java - Java Repaint 方法在旧对象之上创建新对象

> ID：10509027
> 
> 赞同：0
> 
> 时间：2012-05-09T02:16:56.010
> 
> 标签：java, draw, actionlistener, repaint, paintcomponent

这可能是一个愚蠢的问题，但我似乎不记得如何阻止程序这样做，或者我从未学过。

我正在创建一个二十一点游戏，它使用paintComponent 随机抽取卡片。单击点击按钮时，我希望它绘制下一张卡片并生成新的总数。但是，每当我单击点击按钮时，它都会完美地绘制新卡，但它会在我已经绘制的卡之上创建所有新卡。

如何阻止重绘方法选择新的随机卡片并在整个程序中保持它们相同？我应该提一下，所有卡片都存储在一个数组中，并使用随机数生成器调用。此外，当我调整 java 窗口的大小时会发生这种情况。

如果被问到，我会发布代码，但我觉得这有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:53:08.183

您需要将“选择随机卡”逻辑移到绘制方法之外。

最好在第一次构建时计算数组中的所有卡片，而不是在绘制时随机选择。换句话说，当您创建“牌组”数组时，构建整个牌组，以便每张牌都知道它们是什么，甚至在用户开始收到牌组中的任何牌之前。这样，它们就不会在游戏过程中发生变化。如果您只讨论 52 张卡片或 52 张卡片的小倍数，那么数组仍然非常小，并且可以很快将整个数组随机化。

或者，您可以检查您的“选择随机卡”方法，上面写着这样的内容......

```
int cardValue = -1;

paintComponent(){
    if (cardValue == -1){
        cardValue = drawRandomCard();
    }
    // now paint it.
} 
```

即 - 限制`drawRandomCard()`仅在卡还没有值的情况下运行。

但最终，最好的解决方案是将绘画代码与逻辑完全分离——它对于 GUI 活动（如绘画）与编程逻辑混合的糟糕编码实践。

# java - 需要一种方法来“翻转”这个字符数组，让游戏精灵向左看

> ID：10509028
> 
> 赞同：3
> 
> 时间：2012-05-09T02:17:04.783
> 
> 标签：java, arrays, char, sprite, swap

所以，基本上我需要找到一种“翻转”用于精灵的字符数组的好方法，以使他/它看起来向左，反之亦然。这是我的数组->

```
WARRIOR = (

" " +         
 "!!!!!     " +        
 "!!oo! ^   " +
 "!!!!! ^   " +
 "##### ^   " +
 "#######   " +
 "#####     " +
 "** **     ").toCharArray(); 
```

显示例程如下所示：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    for (int i = 0; i < WARRIOR.length; i++) {
        int x = (i - 1) % 10;
        int y = (i - 1) / 10;
        if (WARRIOR[i] == '!') {
            g.setColor(new Color(0, 0, 204));
            g.fillRect(x_pos + x * 5, y_pos + y * 5, 5, 5);
        }
        else if (WARRIOR[i] == 'o') {
            g.setColor(new Color(204, 0, 0));
            g.fillRect(x_pos + x * 5, y_pos + y * 5, 5, 5);
        }
        // other characters here...
    }
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:18:12.467

我建议使用备用显示例程来向后绘制精灵，而不是存储精灵的反向副本。

尝试更改此行：

```
int x = (i - 1) % 10; 
```

对此：

```
int x = 10 - (i - 1) % 10; 
```

这应该向后绘制精灵。

* * *

此外，您可能想查看[XPM](http://en.wikipedia.org/wiki/X_PixMap)格式，它与您正在做的非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:10:27.013

You should consider handling your sprites in another way. For example, since you seem to be fond of char [], you could use a char [] []. If your sprites always have the same width, you can consider something like that:

```
//Slices your WARRIOR into pieces
final StringBuilder builder = new StringBuilder();
short i = 0;
for (final char a:WARRIOR) {
    if (++i != 10) {    //You should be able to find it
        builder.append(a);
    } else {
        i = 0;
        builder.append('\n');   //Line sep
    }
}

//Print the right oriented WARRIOR
System.out.println(builder);

//And flip it ! yay !
final String [] slicedWarrior = builder.toString().split("\n");   //Line sep
for (final String slice : slicedWarrior) {
    final char [] slicesOfSlice;
    for (int j = (slicesOfSlice = slice.toCharArray()).length - 1; j != 0; j--) {
        System.out.print(slicesOfSlice[j]);
    }
    System.out.print('\n');   //Line sep
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:35:16.123

在不改变数据结构的情况下，这是一个解决方案（我确信它可以改进但它有效）：

**精简版**

```
char[] flip = new char[warrior.length];

for(int i=0;i<warrior.length;i++){
    flip[9-i%10+ i/10*10] = warrior[i];   
} 
```

**长版**

```
 char[] warrior= (         
             "!!!!!     " +        
             "!!oo! ^   " +
             "!!!!! ^   " +
             "##### ^   " +
             "#######   " +
             "#####     " +
             "** **     ").toCharArray();

    for(int i=0;i<warrior.length;i++){
        if(i%10==0){
            System.out.println();
        }
        System.out.print(warrior[i]);
    }

    char[] flip = new char[warrior.length];

    for(int i=0;i<warrior.length;i++){
        //9-: 0 goes to 9, 1 to 8 etc 
        //i: cycles from 0 to 9
        //i/10: provides the row (e.g. 25/10=2)
        //*10: gives me the 2d row in 1d array  

        flip[9-i%10+ i/10*10] = warrior[i]; 
    }

    for(int i=0;i<flip.length;i++){
        if(i%10==0){
            System.out.println();
        }
        System.out.print(flip[i]);
    } 
```

这将输出

```
!!!!!     
!!oo! ^   
!!!!! ^   
##### ^   
#######   
#####     
** **     
     !!!!!
   ^ !oo!!
   ^ !!!!!
   ^ #####
   #######
     #####
     ** ** 
```

但我会使用不同的数据结构（例如 2D 数组）或将其视为矩阵，并使用[本文中的示例](http://scriptche.blogspot.com/2011/04/take-mirror-image-of-int-array-in-java.html)

# ios - NSOperationQueue mainQueue vs performSelectorOnMainThread？

> ID：10509029
> 
> 赞同：25
> 
> 时间：2012-05-09T02:17:05.233
> 
> 标签：ios, iphone, objective-c, concurrency, nsoperationqueue

这有什么区别：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    [self doSomthing:object];
}]; 
```

和这个：

```
[self performSelectorOnMainThread:@selector(doSomething:) withObject:object waitUntilDone:NO] 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-09T02:38:34.367

```
[self performSelectorOnMainThread:@selector(doSomething:) 
                       withObject:object 
                    waitUntilDone:NO] 
```

将在调用时正确执行选择器。如果您想从后台线程影响 UI，这就是您必须使用的。如果你说它`YES`会`waitUntilDone`阻塞线程，直到方法完成。

`mainQueue`将该块添加到主线程的操作队列中，但不保证何时执行。该队列中可能还有其他项目仍在等待执行。

# mysql - 在 bash 脚本中输入 MySQL 密码

> ID：10509031
> 
> 赞同：4
> 
> 时间：2012-05-09T02:17:33.537
> 
> 标签：mysql, linux, bash, shell, unix

我有一个 bash 脚本，需要在 MySQL 中执行几个操作。到目前为止，我有这样的事情：

```
#!/bin/sh
read -p "Enter your MySQL username: " $sqluname
read -sp "Enter your MySQL password (ENTER for none): " $sqlpasswd
/usr/bin/mysql -u $sqluname -p $sqlpasswd << eof
*some SQL stuff*
eof 
```

在与密码为空的 MySQL 用户名一起使用之前，此方法效果很好。用户在我的密码提示下按 ENTER，但随后他们再次收到来自 MySQL 的“输入您的密码”的另一个提示。

如何避免第二个密码提示并使脚本同时处理空白和非空白密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:43:23.130

检查密码是否为空，如果是，则完全省略 -p 开关。

```
read -p "Enter your MySQL username: " $sqluname
read -sp "Enter your MySQL password (ENTER for none): " $sqlpasswd
if [ -n "$sqlpasswd" ]; then
  /usr/bin/mysql -u $sqluname -p $sqlpasswd << eof
else
  /usr/bin/mysql -u $sqluname << eof
fi 
```

稍后编辑以避免整个 if-then-else 块：

```
command="/usr/bin/mysql -u $sqluname"
[ -n "$sqlpasswd" ] && command="$command -p$sqlpasswd"
eval $command 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T02:21:21.157

如果 $sqlpasswd 为空（而不是 ），您需要指定`-n`开关`-p $sqlpasswd`。

# javascript - 在 Javascript 对象上调用 jQuery 函数的惯用方式？

> ID：10509032
> 
> 赞同：2
> 
> 时间：2012-05-09T02:17:36.237
> 
> 标签：javascript, jquery

给定一个 Javascript DOM 对象，在其上调用 jQuery 函数最惯用的方法是什么？目前，我正在使用：

`$('#' + object.id).someFunction()`

然而，这感觉不太对劲。没有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T02:19:15.060

如果您有 DOM 对象，只需将其直接提供给 jQuery。像这样：

```
var my_div = document.getElementById("my_div");
$(my_div).someFunction(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T02:19:18.603

这应该工作

```
 $(object).someFunction(); 
```

你可以在这里看到它：http: [//jsfiddle.net/XsKXU/](http://jsfiddle.net/XsKXU/)

有关(aka ) 功能的参考，请参阅[本文档](http://api.jquery.com/jQuery/)`$``jQuery`

# facebook - 无法让 opengraph 转义 url

> ID：10509034
> 
> 赞同：0
> 
> 时间：2012-05-09T02:17:56.563
> 
> 标签：facebook, html, facebook-graph-api, facebook-opengraph

我知道这是一个很常见的问题，但我尝试过的任何解决方案（很多）都没有奏效。

我正在尝试使用[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fresidencyradio.com%2F抓取](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fresidencyradio.com%2F)[http://residencyradio.com/](http://residencyradio.com/)

该网站本身正在进行全面检修，这将在下周揭晓该网站在 FB 上缓存的时间（大约一年前）。

据我所知，我已经包含了所有相关的元标记等它们应该如何，我什至尝试在网站上实现一个类似的按钮，但无济于事。我遵循了以下内容：http: [//ogp.me/](http://ogp.me/)并且看不到任何错误。

这是从`!DOCTYPE`to页面的 sippet `</head>`：

```
<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
<meta charset=utf-8>
<title>The Residency</title>

<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
    </script>
<![endif]-->
<link href="css/reset.css" rel="stylesheet" type="text/css" />
<link href="css/stylesheet.css" rel="stylesheet" type="text/css" />
<link rel="icon" type="image/png" href="images/favicon.png" />

<!--Meta Data-->
<meta name="keywords" content="The Residency, M. Budden, Neal McClelland, Michael Budden, Radio, Residency Radio, 
Residency, Global, House, Electro, Progressive, Tech, Techno, DnB, Drum and Base, Dubstep, iTunes, Belfast, 
Northern Ireland, UK" /> 
<meta name="description" content="Brought to you by Neal McClelland and M. Budden, The Residency is a weekly global underground dance show" />
<meta property="og:title" content="The Residency A global underground dance show" />
<meta property="og:type" content="musician" />
<meta property="og:url" content="https://www.facebook.com/theresidency" />
<meta property="og:image" content="https://www.residencyradio.com/images/Residency_logo_circle.png" />
<meta property="og:site_name" content="The Residency" />
<meta property="fb:admins" content="1324839758" /> 
```

任何帮助将不胜感激，因为我已经摸索了几天试图弄清楚！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:54:48.467

这是一个猜测，但您的 html 无效，可能是因为 facebook 抓取工具无法解析并从中提取数据。

我还没有完成所有这些，但你似乎没有关闭所有标签。例如，描述和关键字元标记不以“/>”或“>”结尾。

* * *

# 编辑

当我从服务器加载您的 html 时调试器显示的屏幕截图： ![屏幕截图](../Images/38f8905562bf85aaaea6c7dc6e6c6122.png)

# java - 应用服务器会影响 Java 内存使用吗？

> ID：10509037
> 
> 赞同：2
> 
> 时间：2012-05-09T02:18:50.613
> 
> 标签：java, tomcat, memory-leaks, jvm

假设我有一个部署在 Tomcat 上的非常大的 Java 应用程序。在几个星期的过程中，服务器将耗尽内存，应用程序性能下降，服务器需要重新启动。

显然，应用程序有一些内存泄漏需要修复。

我的问题是.. 如果应用程序部署到不同的服务器，内存利用率会有什么变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:25:19.877

当然，应用服务器提供的服务在内存利用率方面可能会有所不同，并且如果服务器包含自己独特的虚拟机——即，如果你在一台服务器上使用 J9 或 JRockit，而在另一台服务器上使用 Oracle 的 JVM——必然会成为差异。一个重要的相关领域是类加载：一些应用服务器在管理方面比其他应用服务器具有更好的行为。在配置更改后热启动应用程序可能会由于某些服务器/VM 组合上的类加载问题而导致严重的内存泄漏。

但是这些都不能真正帮助您处理泄漏的应用程序。它是使用内存的程序，而不是服务器，因此更改服务器不会对任何事情产生太大影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:20:25.623

内存利用率可能会*略有*不同，但只是 servlet 容器之间的占用空间不同。您也有*可能*遇到容器内存泄漏 - 但这是值得怀疑的。

最可能的问题是您的应用程序存在内存泄漏——无论如何，原因比快速修复更重要——如果“新”容器恰好持续了一周等，你会怎么做？移动问题很少能解决它...

你需要开始分析应用程序的堆内存，找出问题的根源。如果您的应用程序因 OOME 而崩溃，您可以将其添加到 JVM 参数中。

```
-XX:-HeapDumpOnOutOfMemoryError 
```

如果在您手动重新启动容器之前性能只是下降，您应该进入触发定期堆转储的例程。转储时间线通常是最有帮助的，因为您可以看到哪些对象存储随着时间的推移而增长。

为此，您需要一个堆分析工具：

[JHat](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)或[IBM Heap Analyzer](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=4544bafe-c7a2-455f-9d43-eb866ea60091)或任何您喜欢的 :)

另请参阅此问题：

[Java 堆分析工具的推荐？](https://stackoverflow.com/questions/2064427/recommendations-for-a-heap-analysis-tool-for-java)

**更新：**

这可能会有所帮助（出于明显的原因）：

[如何分析 .hprof 文件？](https://stackoverflow.com/questions/185893/how-do-i-analyze-a-hprof-file)

# serialization - 在 Groovy 中保存关闭状态

> ID：10509042
> 
> 赞同：1
> 
> 时间：2012-05-09T02:19:32.940
> 
> 标签：serialization, groovy, closures

我想使用 Groovy 闭包来处理来自 SQL 表的数据。对于每个新行，计算将取决于先前计算的内容。但是，新行可能会在应用程序的进一步运行中变得可用，所以我希望能够重新加载闭包，并使用它在应用程序的上一次运行中最后一次执行闭包时的中间状态进行初始化。

例如，一个打算计算 3 行移动平均值的闭包可以这样实现：

```
def prev2Val = null
def prevVal = null
def prevId = null

Closure c = { row ->
    println([ prev2Val, prevVal, prevId])

    def latestVal = row['val']

    if (prev2Val != null) {
        def movMean = (prev2Val + prevVal + latestVal) / 3
        sql.execute("INSERT INTO output(id, val) VALUES (?, ?)", [prevId, movMean])
    }

    sql.execute("UPDATE test_data SET processed=TRUE WHERE id=?", [row['id']])

    prev2Val = prevVal
    prevVal = latestVal
    prevId = row['id']
} 
```

`test_data`有 3 列：（`id`自动递增的主键）`value`和`processed`. 根据前两个值计算移动平均值并将其插入到`output`表中，与`id`前一行的值相对。已处理的行用 标记`processed=TRUE`。

如果所有数据从一开始就可用，则可以这样调用：

```
sql.eachRow("SELECT id, val FROM test_data WHERE processed=FALSE ORDER BY id", c) 
```

当应用程序运行后新行可用时，问题就出现了。这可以通过每次处理一小批来模拟（例如`LIMIT 5`在前面的语句中使用）。

我希望能够在执行结束时转储闭包的完整状态`eachRow`（例如，将中间数据保存在数据库中的某个位置）并在我重新运行整个应用程序时再次重新初始化它（通过加载那些来自数据库的中间变量）。

在这个特定示例中，我可以通过存储和的值来手动执行此操作`prev2Val`，但我正在寻找一个通用解决方案，其中不需要确切知道使用了哪些变量。`prevVal``prevId`

也许类似于`c.getState()`which 会返回`[ prev2Val: 1, prevVal: 2, prevId: 6]`（例如），以及`[ prev2Val: 1, prevVal: 2, prevId: 6]`下次执行应用程序时我可以在哪里使用 c.setState() （如果存储了一个状态）。

我还需要`sql`从列表中排除。看来这可以使用`c.@sql=null`.

我意识到这在一般情况下不太可能起作用，但我正在寻找适合大多数情况的足够通用的东西。如[本 Groovy 问题](http://jira.codehaus.org/browse/GROOVY-5151)中所述，我已尝试`dehydrate`序列化和关闭，但我不确定如何在单个操作中保存和存储所有字段。`rehydrate``@`

这可能吗？假设闭包使用的变量列表不一定事先知道，是否有更好的方法来记住执行之间的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:40:55.293

不确定这是否会长期有效，您最好返回一个包含要传递给闭包的值的列表以获取下一组数据，但您可以询问闭包的绑定。

鉴于：

```
def closure = { row ->
  a = 1
  b = 2
  c = 4
} 
```

如果你执行它：

```
closure( 1 ) 
```

然后，您可以编写如下函数：

```
def extractVarsFromClosure( Closure cl ) {
  cl.binding.variables.findAll { 
    !it.key.startsWith( '_' ) && it.key != 'args'
  }
} 
```

执行时：

```
println extractVarsFromClosure( closure ) 
```

印刷：

```
['a':1, 'b':2, 'c':4] 
```

但是，在本地绑定（没有 a ）中定义的任何“自由”变量`def`也将在闭包绑定中，因此：

```
fish = 42
println extractVarsFromClosure( closure ) 
```

将打印：

```
['a':1, 'b':2, 'c':4, 'fish':42] 
```

但

```
def fish = 42
println extractVarsFromClosure( closure ) 
```

不会打印值`fish`

# python - 带有错误函数的 python 崩溃需要 2 个参数（给定 3 个）

> ID：10509046
> 
> 赞同：2
> 
> 时间：2012-05-09T02:19:50.837
> 
> 标签：python, function, arguments

这在我第一次调用该函数时有效，但第二次我收到错误消息

```
mloc = pygame.mouse.get_pos()
if type == "gun":
    mTowers.add(gun(mloc)) 
```

...

```
 class gun(tower):    
     def __init__(self, place):
         tower.__init__(self, place) 
```

和错误：

```
TypeError: __init__() takes exactly 2 arguments (3 given) 
```

我认为我正在做的是将鼠标位置作为元组（和 self 参数）传递。显然，它适用于第一次通话。有什么想法会出错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:21:59.707

是隐式传递的`self`，所以你实际上是分别传递了塔、枪（即自我）和地点。

此外，您应该在这里使用[超级](http://docs.python.org/library/functions.html#super)函数，而不是显式调用`tower.__init__`。

使用 super 的示例（python 2.7）：

```
class Animal(object):
  def __init__(self, nlegs=4):
    print 'in __init__ Animal'
    self.nlegs = nlegs

class Cat(Animal):
  def __init__(self, talk='meow'):
    print 'in __init__ Cat'
    super(Cat, self).__init__()
    self.talk = talk

tom = Cat()
print "I'm a cat with {} legs and I say '{}'".format(tom.nlegs, tom.talk) 
```

# svn - What are `CLI client` and `Svnkit client` in Netbeans IDE?

> ID：10509052
> 
> 赞同：1
> 
> 时间：2012-05-09T02:21:08.147
> 
> 标签：svn, netbeans

Today start using the new version of Netbeans 7.1.2, I get the below notice as the snapshot.

What are those two `svn client` terms?

![enter image description here](../Images/c9782e43e37618e72b21dda4b831ac8e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T02:25:34.837

Cli client means that Netbeans will run SVN commands by executing a command line client, or in other words, it will launch a shell (CMD.EXE, bash, etc.) and run the svn command from within that shell. For this to work, you need to have a svn command line client installed, and be able to run svn client commands (like `svn commit`, `svn update`, `svn info`, etc.)

Svnkit client means that Netbeans will run SVN command by interfacing with a java JAR library that implements a SVN client. No extra shell is necessary. For this to work, you need the SVNkit jar file installed, which probably netbeans will do for you if you have the right modules selected.

# javascript - CSS媒体查询不起作用

> ID：10509054
> 
> 赞同：0
> 
> 时间：2012-05-09T02:21:39.960
> 
> 标签：javascript, media-queries

在移动设备 (iPhone) 上检查我的网站时，很明显它仍在加载非移动样式表。这是标题中的代码，有人可以告诉我什么问题吗？

```
<link rel="stylesheet" href="styles.css" type="text/css" /> <link rel="stylesheet" type="text/css" media="only screen and (max-device-width: 480px)" href="styles_mobile.css" />

<script type="text/javascript" src="js/jquery.js"></script>

<script src="js/onclick.js" type="text/javascript"></script>

<script>

if (screen && screen.width > 480)
document.write('<script type="text/javascript" src="js/jqFancyTransitions.js"><\/script>');

</script> 
```

为什么这没有按预期使用“styles_mobile.css”？

在任何回复中，请注意我对 javascript 的了解有限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:06:24.920

我认为它需要一个元视口标签：

[http://www.quirksmode.org/blog/archives/2010/09/combining_meta.html](http://www.quirksmode.org/blog/archives/2010/09/combining_meta.html)

这意味着使用设备宽度，而不是设备中浏览器报告的宽度，后者更大。

从技术上讲，要按书进行媒体查询，您需要向元素添加“媒体”属性，或向 CSS 中添加 @media 条目。

# facebook - Facebook评论在当地被切断？

> ID：10509059
> 
> 赞同：0
> 
> 时间：2012-05-09T02:22:06.663
> 
> 标签：facebook, comments, local, cut

当我使用 rails 在本地运行我的网站时，我的 facebook 评论框垂直关闭，但是当我将其上传到 heroku 并在那里查看时，它似乎可以自动调整大小。知道为什么会这样吗？是因为我的本地主机无法从 Facebook 服务器访问吗？有没有办法让它在本地正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:22:38.933

如果您使用的是插件，则必须退出所有代码，例如

```
. facebook-comment { width: 95px !important; } 
```

这些代码由插件自动设置，不适用于所有 css 功能。

完成此操作后，您可以`<div class>`在 PHP 控制台中创建一个并将其添加到您的 CSS 文件中，以根据需要自定义您的框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:23:32.403

确保父元素具有：

```
overflow: visible; 
```

# java - 局域网唤醒从安卓手机唤醒笔记本电脑

> ID：10509067
> 
> 赞同：1
> 
> 时间：2012-05-09T02:23:36.217
> 
> 标签：java, android, sockets, networking, network-programming

我听说 wol(wake on lan) 只适用于桌面系统。java中是否有针对wol的实现，以便它适用于笔记本电脑？（wol是通过向系统发送“魔术包”来打开远程系统的机制）。java中是否有针对android手机的实现？我在 android 市场找到了一个简单的 wol 应用程序，我试图通过实际测试来提取这些应用程序的功能。但没有任何应用程序适用于台式机和笔记本电脑系统。我配置了我的 Windows 电脑，以便它允许魔术包在电脑上唤醒。但我不知道它哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:40:16.587

WOL 是一个 BIOS 设置，您需要在各个机器上打开它（我认为它默认是关闭的）。我认为笔记本电脑没有任何理由不能接受 WOL 数据包。

这里是 Java 的 WOL 的一个简单实现：[http](http://www.jibble.org/wake-on-lan/) ://www.jibble.org/wake-on-lan/ 它应该很容易移植到 Android 上工作。

但是，您必须注意，WOL 只能在 LAN 内工作，并且目标计算机必须处于特定的电源设置才能允许它们打开。

# javascript - Tigger.io 访问设备 sqlite db

> ID：10509075
> 
> 赞同：1
> 
> 时间：2012-05-09T02:24:49.400
> 
> 标签：javascript, sqlite, trigger.io

有没有js通过Trigger.io访问设备（ios和android）sqlite db的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:38:03.753

普通的 Web 数据库 API 可用：[http ://www.w3.org/TR/webdatabase/](http://www.w3.org/TR/webdatabase/)

**注意**：并非所有浏览器都支持 Web SQL [http://caniuse.com/#feat=sql-storage](http://caniuse.com/#feat=sql-storage)

例如，我们运行的一项测试与此类似：

```
var db = openDatabase('mydb', '1.0', 'example database', 2 * 1024 * 1024);
db.transaction(function (tx) {
    tx.executeSql('CREATE TABLE IF NOT EXISTS foo (id unique, text)');  
    tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "foobar")');
});

db.transaction(function (tx) {
    tx.executeSql('DROP TABLE foo');

    // known to fail - so should rollback the DROP statement
    tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "foobar")');
    forge.logging.error("INSERT into non-existent table succeeded!");
}, function (err) {
    forge.logging.info("error callback invoked, as expected");
});

db.transaction(function (tx) {
    tx.executeSql('SELECT * FROM foo', [], function (tx, results) {
        forge.logging.info("row: "+results);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T11:19:28.150

现在你应该使用像[LocalForage](https://github.com/mozilla/localForage)这样的东西，因为它可以通过 indexedDB 回退到 webSQL 到 localStorage，并为你提供一致的 api。如果您使用的是 Angular/Ionic，那么这就是业务：[Angular-LocalForage](https://github.com/ocombe/angular-localForage)

# python - 使用 iglob 泛化程序

> ID：10509084
> 
> 赞同：0
> 
> 时间：2012-05-09T02:25:55.087
> 
> 标签：python, glob

我有一个程序可以扫描文件夹或路径以查找给定类型的文件，然后对其进行分析。

```
import glob  
path = raw_input("ENTER PATH TO SEARCH: ")  
list_of_file = glob.iglob('*.txt')  
for filename in list_of_file:    
      print filename` 
```

但是在这个脚本中，程序将只扫描它存储在`path`语句中的目录，没有任何价值。

现在，如果我写：

```
list_of_file = glob.iglob(path + '*.txt') 
```

这也不会让我的工作继续下去。

因此，请提出一种方法，让我进入程序的任何路径都遵循该路径并搜索特定的文件类型，无论我将脚本保存在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:57:34.863

我认为英语不是你的第一语言，所以如果我误解了你的问题，请原谅我。在我看来，您希望能够进入一个目录，然后在该目录中找到所有“.txt”文件？

如果是这样，那么下面的代码应该足以给你一个例子：

```
"""Find all .py files is a given directory."""
import os
import glob

path = raw_input("Enter path: ")
fullglob = os.path.join(path, "*.py")
for fn in glob.iglob(fullglob):
    print os.path.split(fn)[1] 
```

最后一行去掉了你输入的路径，以确保 iglob() 找到正确的目录。您可以使用 help() 函数来获取有关 os.path.join() 和 os.path.split() 的文档。

# gcc - windows下使用cygwin 1.7 gcc无法输出任何东西

> ID：10509087
> 
> 赞同：1
> 
> 时间：2012-05-09T02:26:31.983
> 
> 标签：gcc, cygwin

我刚刚安装了cygwin 1.7，并在中写了一个简单的Hello world`test.c`

但是当我遵守时，什么都没有发生，甚至没有错误消息

`gcc-4 -o test.exe test.c`

![在此处输入图像描述](../Images/e8e9efd4552080e50205d893807b6f36.png)

我的文件夹下没有生成任何内容。

我已包含`C:\cygwin;C:\cygwin\bin`在我的 PATH 中

我错过了什么？

**编辑：**

有关更多信息，我之前安装了 Qt4、tortoiseHg 和 mingw。现在我已经删除了mingw。但仍然有Qt4和tortoiseHg，这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:20:30.237

尝试从 Cygwin 终端执行此操作，而不是`cmd.exe`：

```
$ cd `cygpath -u "$USERPROFILE"`/Desktop/UT
$ gcc -o foo foo.c
$ ls -l foo
-rwxr-xr-x+ 1 yourlogin None 19618 May 10 05:15 foo* 
```

如果这行得通，那么周围就会有一些虚假的残余物。

您会发现 Cygwin 体验通常在 Bash 下运行更好，无论如何在 MinTTY 终端中运行。`cmd.exe`不了解 Cygwinisms，而且是 DOS 倒退。

请注意，您不需要说`gcc-4`要获得 GCC 4.x。`gcc`是 Cygwin 上的 GCC 4.x，并且已经有一段时间了。

另请注意，您不需要包含`.exe`在 GCC`-o`标志中，因为 Cygwin GCC 已经知道要添加它。

# javascript - 通过 jQuery 发布发布表单 - 无控制台错误

> ID：10509089
> 
> 赞同：1
> 
> 时间：2012-05-09T02:26:35.027
> 
> 标签：javascript, jquery, ajax, forms

我正在尝试通过 jQuery 发布表单`.post()`，但它无法正常工作。我没有从控制台得到任何东西，这非常令人沮丧。向有经验的 JS 用户请求帮助。非常感谢您的所有帮助！

**注意：**这个表单是用 CodeIgniter 构建的，并且使用它的表单助手和 HTML 常规路由可以完美地发布。JS/jQuery 方法不能正常工作。

**形式：**

```
 <form class="nice custom" id="create_form">

                    <h3>Create Event</h3>

                    <label for="intention"><strong>Intention:</strong></label>
                    <?php $intention_attributes='style="width: 100%; " class="show-on-phones" id="intention_dropdown"'; ?>
                    <?php echo form_dropdown('intention', $intention, 'Select Intention', $intention_attributes ); ?>
                    <div class="custom dropdown show-on-desktops" style="width: 100%; ">
                        <a href="#" class="current">Select Intention</a>
                        <a href="#" class="selector"></a>
                        <ul style="width: 100%; ">
                            <li>Select Intention</li>
                            <li>Option 1</li>
                            <li>Option 2</li>
                            <li>Option 3</li>
                            <li>Option 4</li>
                            <li>Option 5</li>
                        </ul>
                    </div>

                    <label for="action"><strong>Action:</strong></label>
                    <?php echo form_input($action); ?>

                    <label for="date_of_event"><strong>Date:</strong></label>
                    <?php echo form_input($date_of_event); ?>

                    <label for="repeat_event"><strong>Repeat:</strong></label>
                    <?php $repeat_event_attributes='style="width: 100%; " class="show-on-phones" id="repeat_event_dropdown"'; ?>
                    <?php echo form_dropdown('repeat_event', $repeat_event, 'Never', $repeat_event_attributes); ?>
                    <div class="custom dropdown show-on-desktops" style="width: 100%; ">
                        <a href="#" class="current">Never</a>
                        <a href="#" class="selector"></a>
                        <ul style="width: 100%; ">
                            <li>Never</li>
                            <li>Every Day</li>
                            <li>Every Week</li>
                            <li>Every Two Weeks</li>
                            <li>Every Month</li>
                            <li>Every year</li>
                        </ul>
                    </div>

                    <label for="end_repeat_event"><strong>End Repeat:</strong></label>
                    <?php echo form_input($end_repeat_event); ?>

                    <br />

                    <input style="width: 100%; " type="submit" name="submit" class="medium radius blue button" value="Create" id="create_button" />
</form> 
```

**JavaScript：**

```
// Submit Create Form
    $('#create_form').live('submit', function() {
        var data = $('#create_form').serialize();
        var url = $(this).attr('action');
        $.post(url, data, function() {
            document.location.reload();
        });
        return false;
    }); // End 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:33:14.323

您的表单没有操作价值：

```
<form class="nice custom" id="create_form"> 
```

即使你试图得到一个：

```
var url = $(this).attr('action'); 
```

另外，`$.live`从这里开始避免使用：

> 从 jQuery 1.7 开始，该`.live()`方法已被弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.
> 
> — [http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:51:33.330

尝试将提交按钮的名称更改为 btnSubmit。过去我在命名提交按钮提交时遇到过问题。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:54:37.670

此外，按下控制台输出选项卡（webkit 浏览器）顶部的黑点按钮。这将在页面加载之间保留日志消息。

# linux - 给定框架的 X ID，获取子/客户端窗口的“xprop”

> ID：10509091
> 
> 赞同：1
> 
> 时间：2012-05-09T02:28:13.023
> 
> 标签：linux, bash, xorg, window-managers

我想运行命令`xprop -id [window_id]`。

但是，假设出于某种奇怪的原因，我只能访问我所追求的窗口的框架（即窗口管理器的窗口框架，而不是窗口本身`window_id`）**。**

我怎么知道`xprop`它`-id`是用于框架而不是客户端窗口，并且我想要客户端窗口？与它相反的排序`xprop -frame`将获取您单击的*框架*而不是窗口的信息。

我是否坚持以某种方式解析`xwininfo -children [frame_id]`以提取子窗口 ID 以将其传递给`xprop`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:45:33.140

如果您想做的事情太有限，请尝试检查他们的源代码并为此编写一个 X11 程序`xwininfo`。`xprop`如果 C 太麻烦，那么试试其他语言的 Xlib 或 XCB 绑定，比如 Python 的`xpyb`.

*   [http://cgit.freedesktop.org/xorg/app/xwininfo/tree/](http://cgit.freedesktop.org/xorg/app/xwininfo/tree/)
*   [http://cgit.freedesktop.org/xorg/app/xprop/tree](http://cgit.freedesktop.org/xorg/app/xprop/tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:32:43.690

我最终只是在做：

```
xprop -id `xwininfo -children -id [frame_id] | grep -o '^ \+0x[0-9a-f]\+'` 
```

`xwininfo -children -id [frame_id]`列出孩子并提取孩子 ID（对于我的`grep`特定问题，我可能假设每帧只有一个孩子）。

# ninject - 是否已弃用 weakeventmessagebroker 和 messagebroker Ninject 扩展？

> ID：10509093
> 
> 赞同：2
> 
> 时间：2012-05-09T02:28:26.017
> 
> 标签：ninject, ninject-extensions

我正在尝试为事件代理/消息代理的开发找到最新的 Ninject 扩展。

我至少可以找到 3 个：[messagebroker](https://github.com/ninject/ninject.extensions.messagebroker)、[weakeventmessagebroker](https://github.com/ninject/ninject.extensions.weakeventmessagebroker)和[bbveventbroker](https://github.com/ninject/ninject.extensions.bbveventbroker)。

messagebroker 的文档[指出](https://github.com/ninject/ninject.extensions.messagebroker/wiki)：

```
This extension isn’t obsolete and replaced by ninject.extensions.bbveventbroker 
```

此外，weakeventmessagebroker 的文档[内容如下](http://www.ninject.org/extensions.html)：

```
Originally based on Ninject.Extensions.MessageBroker. 
```

还有：[_](https://github.com/ninject/ninject.extensions.weakeventmessagebroker/wiki)

```
This extension isn’t obsolete and replaced by ninject.extensions.bbveventbroker 
```

我想知道这个文档是否正确并且这些扩展没有过时，或者文档是否只是输入错误并且它的意思是说“这个扩展**已经**过时......”

所以问题是：weakeventmessagebroker 和 messagebroker 是否已被 bbveventbroker 弃用？Ninject 最新的事件代理扩展是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:09:11.850

是的，它们已经过时了。一个消息代理就足够了，而 ninject.extensions.bbveventbroker 是最灵活/功能最丰富的一个。

感谢您指出不正确的文档。我刚刚修好了。

# c# - 是否存在用于生成 WCF 服务的 T4 模板以提供自我跟踪实体的获取和保存？

> ID：10509097
> 
> 赞同：3
> 
> 时间：2012-05-09T02:29:40.450
> 
> 标签：c#, wcf, entity-framework, n-tier-architecture, self-tracking-entities

我正在使用 n 层应用程序上的自我跟踪实体。所以我有一个 WCF 服务，它为客户端提供对数据层的访问，我发现自己实现了很多与从我的模型中获取一些实体相对应的“相同”功能，例如`GetOrders`，在客户端中更改它们之后，a`Save(Order order)`或`Save(TrackableCollection<Orders> orders)`操作以保持更改。

我想知道是否存在可以构建基本接口的 T4 模板，以及每个实体的单个和集合的 Get/Save 以及我的模型中的相应服务实现？

我知道我可以编写自己的 T4 模板来生成此服务，如果必须的话，我可能会这样做，但首先我想我会问社区是否已经在互联网的某个地方进行了这项工作，是计划好的，是其他人想要的和/或完全愚蠢的想法。

我确实找到了这个[WCF 数据服务生成器](http://blogs.msdn.com/b/phaniraj/archive/2010/08/10/t4-templates-for-wcf-data-services-part-i.aspx)示例，它在正确的轨道上。

也许更适合在 n 层解决方案中使用 WCF 的 STE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:46:30.517

那里[有](http://msmvps.com/blogs/matthieu/archive/2010/11/27/generate-your-wcf-service-from-your-edmx-using-t4.aspx)（[更多](http://social.msdn.microsoft.com/Forums/en/adodotnetdataservices/thread/8b8a26bd-b41b-4ca4-a125-8aee4ebf32aa)），但你总是需要定制。我已经定制了网上找到的简单模板，本质上它的作用是创建操作合同，以及为 win32 客户端提供可见性的 web 方法。下面是一段摘录：

```
// I obtain anykeys by iterating through the entity keys:
_anyKeys = string.Format("{0}{1} item.{2} == {3}_dto.{2}", _anyKeys, _and, key.ToString(), _double);
    // loop through all the entities:
    foreach (EntityType entity in Item1Collection.GetItems<EntityType>().OrderBy(e => e.Name))
    {

    /// <summary>
    /// <#=code.Escape(entity)#> Operation contracts - <#=code.Escape(entityName)#> 
    /// </summary>  
    [WebMethod]
    public bool Save<#=code.Escape(entity)#>(Dto<#=code.Escape(entity)#> _dto, int racID, string profile)
    {
        try
        {
            // Load the db
            using (<#=ContextName#> db = new <#=ContextName#>(EFUtils.GetEFConnectionString(profile, modelName)))
            {
                // Check if item exists         
                var exists = db.<#=code.Escape(entityName)#>.Any(item=> <#=code.Escape(_anyKeys)#>);
                // convert to entity
                var _entity = _dto.ToEntity();
                if(exists)
                {
                  // Attach the entity to the db
                  db.<#=code.Escape(entityName)#>.Attach(_entity);
                  // Change tracking
                  ChangeTracking<<#=code.Escape(entity)#>>(_dto.ModifiedProperties, db, _entity);
                }
                else
                {
                  // New entity
                  db.<#=code.Escape(entityName)#>.Add(_entity);
                }
                // Save changes
                return db.SaveChanges() > 0;
            }
        }
        catch(Exception ex)
        {               
            Global.LogMessageToFile(ex, string.Format("{0} - profile {1}, Save<#=code.Escape(entity)#>", racID, profile));
        }
        finally
        {       
        }
        return false;
    }

// Then the interfaces
#>
#region <#=code.Escape(entity)#>
    /// <summary>
    /// <#=code.Escape(entity)#> Operation contracts - <#=code.Escape(entity.Name)#> 
    /// </summary>  
    [OperationContract]
    bool Save<#=code.Escape(entity)#>(Dto<#=code.Escape(entity)#> _dto, int racID, string profile);
    [OperationContract]
    bool Delete<#=code.Escape(entity)#>(<#=code.Escape(_keys)#>, int racID, string profile);
    [OperationContract]
    Dto<#=code.Escape(entity)#> Get<#=code.Escape(entity)#>(<#=code.Escape(_keys)#>, string  filterXml, int racID, string profile);
    [OperationContract]
    List<Dto<#=code.Escape(entity)#>> List<#=code.Escape(entityName)#>(string  filterXml, int racID, string profile);   
#endregion
<#+ 
```

# c#-4.0 - FourSquare 实时推送 API 返回 NULL 值

> ID：10509102
> 
> 赞同：0
> 
> 时间：2012-05-09T02:31:12.173
> 
> 标签：c#-4.0, real-time, foursquare

我已经为我的应用程序设置了“此消费者的用户推送签到”的推送 URL，我的链接是“https://foursquareapi.pureprofile.com/FourSquare/FourSquareRealTimeUpdate”。甚至，我收到了您的回复，其值为 NULL。我得到像“{”id”：null，”createdAt”：null，”type”：null，”timeZone”：null，”user”：null，”venue”：null}”这样的对象值。

可以看到 id、createdAt、type、timeZone、user、venue 值 NULL。

# vim - vim ctags，跳转到类方法的定义处

> ID：10509103
> 
> 赞同：1
> 
> 时间：2012-05-09T02:31:33.660
> 
> 标签：vim, ctags, class-method, source-insight

当我在 vim 中使用 ctags 时，我遇到了这个问题：

InputDevice *device = mdev; 设备->进程（...）；

当我想查看 InputDevice 类的进程定义时，ctags 无法给出解决方案，它显示了很多标签。在源代码洞察中，它可以跳转到正确的定义位置，因为它发现标签“设备->进程”不仅标签“进程”。

我发现 cscope 做不到。

有没有一种方法可以找到正确的标签定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:56:00.860

两种方式

1.  ctags

    你可以通过“Ctrl + ]”跳转

    但是你应该使用“ *--lang* -kinds”和“m”来创建标签文件。有关“ctags --list-kinds”的更多信息。

2.  [攀登](http://eclim.org/)

    在默认[映射](http://eclim.org/vim/mappings.html)中，您可以按“Enter”键跳转

# cakephp - 如何用 CakePHP 中的数据正确“扩展”模型？

> ID：10509105
> 
> 赞同：0
> 
> 时间：2012-05-09T02:32:04.973
> 
> 标签：cakephp, database-design, model, single-table-inheritance

我正在将我的一个旧的手工制作的应用程序重写为 CakePHP 2.0，我遇到了这个旧的、不断重复的模型设计困境。

这是目标设计：

*   Order 有很多 OrderEntries
*   OrderEntry 有字段 [数量，类型]
*   ProductEntry 使用字段 [product_id、数量、重量] 扩展 OrderEntry
*   ShipmentEntry 使用字段 [total_weight、country_id、city、address 等] 扩展 OrderEntry
*   DiscountEntry 使用字段 [discount_code、parent_order_id、active 等] 扩展 OrderEntry

* * *

*编辑：从根本上简化问题以代替新知识*

所以基本上，我需要 Cake 的这个模型结构：

```
Order        1:m   OrderEntry
OrderEntry   1:1   ProductEntry
OrderEntry   1:1   ShipmentEntry
OrderEntry   1:1   DiscountEntry 
```

最后 3 个关联应该是非识别性的。更准确地说，一个 OrderEntry 记录可以与三个子模型之一恰好有一种关系。

这可以通过使用 OrderEntry 作为 Order 和所有 3 个 XxxEntry 模型之间的连接表来实现，但这意味着 order_entries 表应该有 3 个外键字段：

*   product_entry_id
*   ship_entry_id
*   discount_entry_id

这是迄今为止我最好的解决方案，但并不理想，因为一个条目可能与多个订单相关联，这将是一个错误。此外，一个 joinTable 持有 3 个外键（因此有 3 个关联模型），不能为“NOT NULL”，因为每条记录只应填充一个，而其他 2 个保持为空。

总而言之，拥有一个基本模型的最佳实践是什么，该模型由几个不同的模型用自己的表进行扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:51:52.973

我不确定这是否是您要查找的内容，但有一个 Cake Entity 插件可能值得一看：[https ://github.com/kanshin/CakeEntity](https://github.com/kanshin/CakeEntity)

# django - Django Model / Form - 获取现有模型并与另一个关联

> ID：10509106
> 
> 赞同：0
> 
> 时间：2012-05-09T02:32:06.273
> 
> 标签：django, django-models, django-forms, django-views

说我有

```
class Address(models.Model):
    street = models.CharField()
    postal_code = models.CharField()

class Person(models.Model):
    name = models.CharField()
    address = models.ForeignKey('Address') 
```

如何获得使用 postal_code 获取预先存在的表单输入，`Address`然后将其分配给新的表单输入`Person`？

如果我也插入一个新`Address`的，我想我知道该怎么做，但是 - 我如何`Address`在保存之前获取`Person`？（具有邮政编码验证等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:48:02.953

我认为您不希望在外键中使用“地址”。
你是这个意思吗？

```
if request.method == 'POST':
    form = YourForm(request.POST)
    if form.is_valid():
        address = Address.objects.get(postal_code=form.cleaned_data["postal_code"])
        Person(someStreetVar, address)
        Person.save() 
```

# google-docs-api - 如何在 google drive UI 中使用我的 chrome web store 应用程序打开 Google Docs 格式文件

> ID：10509107
> 
> 赞同：2
> 
> 时间：2012-05-09T02:32:31.090
> 
> 标签：google-docs-api, google-drive-api

在应用程序控制台上，我设置了 txt 和 pdf 文件的 MIME 类型和扩展名。但是如果我想支持 Google Docs 格式的文件，我应该怎么做呢？

如果我已经可以打开 Google Docs 格式的文件，当我通过 GOOGLE Drive API 下载文件时如何将文件转换为 pdf 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:54:07.867

您目前无法使用 Google Drive SDK 打开 Google 文档原生格式（文档、电子表格、演示文稿等）。这是我们（[谷歌](http://google.com)）正在考虑解决的问题。

您目前只能将它们导出为另一种格式，例如 pdf，但这只能使用[Documents List API](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)来实现。

# c# - 计算最小/最大/平均 ping 响应

> ID：10509110
> 
> 赞同：2
> 
> 时间：2012-05-09T02:32:58.677
> 
> 标签：c#, console-application, ping

所以这里有一个测试流行的 RuneScape 游戏的每个服务器的应用程序。我在 139 台服务器上运行 ping 并向数组添加延迟值。在遍历列表条目时，我可以计算每个服务器的平均、最小和最大延迟。

现在，在我的代码中，当注意到其中一台无法访问的服务器时，最低延迟显示为 0。如果我的 ping 响应已达到超时并将 0 发布到数组列表，我不确定如何处理。

当服务器关闭时，我能做些什么来避免 0 作为我的最低 ping？

```
using System;
using System.Net.NetworkInformation;
using System.Collections.Generic;

namespace RuneScape_Ping_Tool
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write(Environment.NewLine + "Start the test? (y/n): ");

            if (Console.Read() == char.Parse("y"))
            {
                Console.WriteLine();
                Ping();
            }
        }

        static void Ping()
        {
            List<int> lag = new List<int>();

            for (int server = 1; server <= 139; server++)
            {
                string url = "world" + server.ToString() + ".runescape.com";

                Console.WriteLine("Checking world " + server + "...");

                Ping ping = new Ping();
                PingReply reply = ping.Send(url);

                lag.Add(int.Parse(reply.RoundtripTime.ToString()));
            }

            for (int i = 1; i <= 139; i++)
            {
                Console.WriteLine("World " + i + ": " + lag[i - 1]);
            }

            int average = 0;
            int highest = 1;
            int lowest = 1000;

            int highestWorld = 0;
            int lowestWorld = 0;

            for (int i = 1; i <= 139; i++)
            {
                average = average + lag[i - 1];
            }

            for (int i = 1; i <= 139; i++)
            {
                if (highest < lag[i - 1])
                {
                    highest = lag[i - 1];
                    highestWorld = i;
                }
            }

            for (int i = 1; i <= 139; i++)
            {
                if (lowest > lag[i - 1])
                {
                    lowest = lag[i - 1];
                    lowestWorld = i;
                }
            }

            Console.WriteLine();
            Console.WriteLine("Average lag: " + average / 139);
            Console.WriteLine("Highest lag: " + highest + " in world " + highestWorld);
            Console.WriteLine("Lowest lag: " + lowest + " in world " + lowestWorld);

            Console.Write(Environment.NewLine + "Start the test? (y/n): ");

            if (Console.Read() == char.Parse("y"))
            {
                Console.WriteLine();
                Ping();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:39:26.113

你能跳过零吗？此外，您不妨将所有计算放在一个循环中。

```
int n = 0 // number of data points

for (int i = 0; i < 139; ++i) {
  if (lag[i] == 0) {
    continue;  // skip 0 values
  }
  ++n;
  sum += lag[i];

  if (highest < lag[i]) {
    highest = lag[i];
    highestWorld = i + 1;
  }

  if (lowest > lag[i]) {
    lowest = lag[i];
    lowestWorld = i + 1;
  }

  average = sum / n;  // Note: you may want to round this.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T02:39:56.240

您可以使用这些函数获得最小值、最大值和平均值。

```
var nozeros = lag.Where(i => i > 0);
int lowest = nozeros.Min();
int lowestWorld = lag.IndexOf(lowest);
int highest = nozeros.Max();
int highestWorld = lag.IndexOf(highest);
int average = (int)nozeros.Average(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T02:46:44.477

首先考虑并行运行所有内容（这里一次 4 个）：

```
var servers = Enumerable.Range(1, 139).Select(i => String.Format("world{0}.runescape.com",i));
var results = servers.AsParallel()
                     .WithDegreeOfParallelism(4)
                     .Select(server => new Ping().Send(server))
                     .ToList(); 
```

然后只收集有效结果，注意使用`PingReply.Status`而不是检查`0`：

```
var validResults = results.Where(r => r.Status == IPStatus.Success)
                          .Select(r => r.RoundtripTime); 
```

这是您需要的信息：

```
Console.WriteLine("Total Results: {0}", results.Count());
Console.WriteLine("Valid Results: {0}", validResults.Count());
Console.WriteLine("Min from Valid: {0}", validResults.Min());
Console.WriteLine("Max from Valid: {0}", validResults.Max());
Console.WriteLine("Avg from Valid: {0}", validResults.Average()); 
```

# c# - 什么时候应该和不应该使用这个 C# 实用程序类来通过 Interlocked 控制线程

> ID：10509112
> 
> 赞同：3
> 
> 时间：2012-05-09T02:33:04.120
> 
> 标签：c#, multithreading, interlocked, spinlock, multiprocessor

我试图了解如何编写此类背后的逻辑，以及何时应该和不应该使用它。任何见解将不胜感激

```
internal struct SpinLock
{
    private volatile int lockHeld;

    private readonly static int processorCount;

    public bool IsHeld
    {
        get
        {
            return this.lockHeld != 0;
        }
    }

    static SpinLock()
    {
        SpinLock.processorCount = Environment.ProcessorCount;
    }

    public void Enter()
    {
        if (Interlocked.CompareExchange(ref this.lockHeld, 1, 0) != 0)
        {
            this.EnterSpin();
        }
    }

    private void EnterSpin()
    {
        int num = 0;
        while (this.lockHeld != null || Interlocked.CompareExchange(ref this.lockHeld, 1, 0) != 0)
        {
            if (num >= 20 || SpinLock.processorCount <= 1)
            {
                if (num >= 25)
                {
                    Thread.Sleep(1);
                }
                else
                {
                    Thread.Sleep(0);
                }
            }
            else
            {
                Thread.SpinWait(100);
            }
            num++;
        }
    }

    public void Exit()
    {
        this.lockHeld = 0;
    }
} 
```

更新：我在我的源代码中找到了一个示例用法......这表明如何使用上述对象，虽然我不明白“为什么”

```
 internal class FastReaderWriterLock
    {
        private SpinLock myLock;

        private uint numReadWaiters;

        private uint numWriteWaiters;

        private int owners;

        private EventWaitHandle readEvent;

        private EventWaitHandle writeEvent;

        public FastReaderWriterLock()
        {
        }

        public void AcquireReaderLock(int millisecondsTimeout)
        {
            this.myLock.Enter();
            while (this.owners < 0 || this.numWriteWaiters != 0)
            {
                if (this.readEvent != null)
                {
                    this.WaitOnEvent(this.readEvent, ref this.numReadWaiters, millisecondsTimeout);
                }
                else
                {
                    this.LazyCreateEvent(ref this.readEvent, false);
                }
            }
            FastReaderWriterLock fastReaderWriterLock = this;
            fastReaderWriterLock.owners = fastReaderWriterLock.owners + 1;
            this.myLock.Exit();
        }

private void WaitOnEvent(EventWaitHandle waitEvent, ref uint numWaiters, int millisecondsTimeout)
{
    waitEvent.Reset();
    uint& numPointer = numWaiters;
    bool flag = false;
    this.myLock.Exit();
    try
    {
        if (waitEvent.WaitOne(millisecondsTimeout, false))
        {
            flag = true;
        }
        else
        {
            throw new TimeoutException("ReaderWriterLock timeout expired");
        }
    }
    finally
    {
        this.myLock.Enter();
        uint& numPointer1 = numWaiters;
        if (!flag)
        {
            this.myLock.Exit();
        }
    }
}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:01:58.697

[SpinLocks](http://en.wikipedia.org/wiki/Spinlock)通常是一种保持等待线程唤醒的锁形式（在紧密循环中反复循环检查条件 - 想想“*妈妈我们到了吗？* ”）而不是依赖于更重、更慢的内核模式信号。它们通常用于预期等待时间非常短的情况，在这种情况下，它们的性能优于为传统锁创建和等待操作系统句柄的开销。虽然它们比传统锁产生更多的 CPU 成本，因此对于非常短的等待时间，传统锁（如[Monitor](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)类或各种[WaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)实现）是首选。

上面的代码演示了这个短等待时间概念：

```
waitEvent.Reset();
// All that we are doing here is setting some variables.  
// It has to be atomic, but it's going to be *really* fast
uint& numPointer = numWaiters;
bool flag = false;
// And we are done.  No need for an OS wait handle for 2 lines of code.
this.myLock.Exit(); 
```

[BCL 中内置了](http://msdn.microsoft.com/en-us/library/system.threading.spinlock.aspx)一个非常好的 SpinLock ，但它只在 v4.0+ 中，所以如果你正在使用旧版本的 .NET 框架或从旧版本迁移的代码，有人可能已经写过他们自己的实现。

**回答您的问题：** 如果您在 .NET 4.0 或更高版本上编写新代码，则应该使用内置的 SpinLock。对于 3.5 或更早版本的代码，尤其是在扩展 Nesper 时，我认为这种实现是经过时间考验的并且是适当的。仅在您知道线程可能等待它的时间非常短的情况下使用 SpinLock，如上面的示例所示。

编辑：看起来您的实现来自 Nesper-Esper CEP 库的 .NET 端口：

[https://svn.codehaus.org/esper/esper/tagsnet/release_1.12.0_beta_1/trunk/NEsper/compat/SpinLock.cs](https://svn.codehaus.org/esper/esper/tagsnet/release_1.12.0_beta_1/trunk/NEsper/compat/SpinLock.cs)

和

[https://svn.codehaus.org/esper/esper/tagsnet/release_1.12.0_beta_1/trunk/NEsper/compat/FastReaderWriterLock.cs](https://svn.codehaus.org/esper/esper/tagsnet/release_1.12.0_beta_1/trunk/NEsper/compat/FastReaderWriterLock.cs)

我可以确认 Nesper 早在 .NET 框架 4 之前就已经存在，这就解释了对自旋自旋锁的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:29:43.597

看来原作者想要一个更快的`ReaderWriterLock`. 这个老班慢得令人痛苦。我自己的测试（我很久以前做过）表明 RWL 的开销是普通 old 的 8 倍左右`lock`。`ReaderWriterLockSlim`改进了很多东西（尽管与 相比，它仍然有 ~ 2 倍的开销`lock`）。在这一点上，我会说放弃自定义代码并使用较新的`ReaderWriterLockSlim`类。

但是，值得让我解释一些自定义`SpinLock`代码。

*   `Interlocked.CompareExchange`是 .NET 的[CAS](http://en.wikipedia.org/wiki/Compare-and-swap)操作版本。它是*最基本的*同步原语。从字面上看，您可以从这个单一操作构建其他所有内容，包括您自己的自定义`Monitor`类、读写器锁等。显然，它在这里用于创建自旋锁。
*   `Thread.Sleep(0)`屈服于任何处理器上具有相同或更高优先级的任何线程。
*   `Thread.Sleep(1)`屈服于任何处理器上的任何线程。
*   `Thread.SpinWait`将线程放入一个紧密循环中指定的迭代次数。

尽管您发布的代码中没有使用它，但还有另一种有用的机制可以创建自旋锁（或其他低锁策略）。

*   `Thread.Yield`屈服于*同一*处理器上的任何线程。

Microsoft 在其高度并发的同步机制和集合中使用所有这些调用。如果您反编译`SpinLock`, `SpinWait`,`ManualResetEventSlim`等，您将看到这些调用正在进行相当复杂的歌舞……比您发布的代码复杂得多。

同样，放弃自定义代码，只使用`ReaderWriterLockSlim`而不是自定义`FastReaderWriterLock`类。

* * *

*顺便说一句，`this.lockHeld != null`应该产生一个编译器警告，因为`lockHeld`它是一个值类型。*

# matlab - matlab中音频文件源代码的简单离散小波变换

> ID：10509119
> 
> 赞同：0
> 
> 时间：2012-05-09T02:33:48.620
> 
> 标签：matlab

我正在寻找 matlab 中音频文件的简单离散小波变换源代码。谁能告诉我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:38:21.830

离散小波变换可以应用于任何信号，因此您可以使用图像处理工具箱中`wavedec`的`dwt`函数：

```
wname = 'haar'
[y Fs] = wavread('filename.wav');
[C L] = wavedec(y, 1, wname);
wavplay(C(1:L(1)),Fs/2) 
```

您将听到经过低通滤波和下采样的音频样本

# css - 克服设计 UI 元素的跨浏览器问题

> ID：10509120
> 
> 赞同：0
> 
> 时间：2012-05-09T02:33:51.313
> 
> 标签：css, cross-browser

我目前正在更改`select`页面上元素的外观，我注意到几乎每个浏览器都以不同的方式显示所有效果。这还不错，但我也注意到有些浏览器根本不支持某些效果，例如 Chrome 不支持背景图像、圆角以及可能我还没有注意到的其他东西。

我在一些网站上看到了一些非常令人印象深刻的下拉菜单，其中所有内容都是定制的，从发光到箭头按钮的外观等等。

它是如何完成的？是用一些 Javascript/jQuery 插件完成的吗？谁能指点我一些好的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:54:22.350

我建议你走一个 jquery 插件的路径。搜索“jquery 选择框”会返回许多有用的结果，例如：

[http://www.designdim.com/2011/07/10-important-jquery-selectboxdropdown-plugins/](http://www.designdim.com/2011/07/10-important-jquery-selectboxdropdown-plugins/)

我之前已经尝试过其中的一些，有些比其他的更灵活。

我真正喜欢的不在该列表中的是[Chosen](http://harvesthq.github.com/chosen/)，尽管它不完全支持 IE7 和 8。

# javascript - 我想添加 javascript 正则表达式来满足我的担忧

> ID：10509122
> 
> 赞同：-1
> 
> 时间：2012-05-09T02:34:09.980
> 
> 标签：javascript, regex

我需要遵循正则表达式，例如..括号只是为了显示单词

(abc) => pass
(abc) => pass * abc with trailing white space
(abc ..blah..) => pass * ..blah.. 表示任何包含空格的字符
(abcd) => 失败

有什么好主意吗？

我修剪了字符串，所以基本上前两种情况是相同的
，但是当 (abcd) 进来时我不能让它失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:36:22.067

```
var doesItPass = (stringToValidate.split(" ")[0] == "abc") ? false : true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:38:43.097

使用`regex`：

```
/^abc\s*$/ 
```

正则表达式是做这些事情的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:50:11.503

```
if (/abc\b/im.test(subject)) {
    // Successful match
} else {
    // Match attempt failed
} 
```

# jquery - x分钟后jquery停止/启动div刷新

> ID：10509127
> 
> 赞同：1
> 
> 时间：2012-05-09T02:34:26.243
> 
> 标签：jquery, settimeout, partial-page-refresh

我写了一个小的 jQuery 聊天框，它在 div 中加载一个页面并每 4 秒刷新一次：

单击时向下滑动并在 div 中加载页面并刷新：

```
$('#toggle').click( function () { 
    $('#sbox').slideDown('fast');
    var refreshId = setInterval(function() {
        $('#shout').load('shout.php?randval='+ Math.random());
    }, 4000);
    return false;
}); 
```

但是，我猜这有点消耗资源，所以想如果没有检测到活动，则在 x 分钟后停止刷新，但一旦再次有活动就恢复刷新...

我找到了这个片段...... [https://stackoverflow.com/a/7026769/1359310](https://stackoverflow.com/a/7026769/1359310) ...它检查活动（鼠标移动）并且看起来非常适合我的需求，但似乎无法将两者结合起来。

总结一下我所追求的是在 div 中单击加载页面并开始刷新，如果没有活动停止刷新，x 分钟后，一旦检测到活动再次开始刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:48:47.283

```
// If theres no activity for 2 minutes do something
var isActive = true;
var isRefreshing = false;
var refreshChatboxWait = 4000;
var activityTimoutWait = 120000;
var activityTimeout = setTimeout(inactive, activityTimoutWait);

function resetActive(){
    isActive = true;
    clearTimeout(activityTimeout);
    if ( ! isRefreshing ) {
        var refreshId = setInterval(refreshChatbox, refreshChatboxWait);
    }
    activityTimeout = setTimeout(inactive, activityTimoutWait);
}

// No activity do something.
function inactive(){
    isActive = false;
}

function refreshChatbox(){
    $('#shout').load('shout.php?randval='+ Math.random());
    if ( ! isActive ) {
        clearInterval(refreshId);
    }
}

// Check for mousemove, could add other events here such as checking for key presses ect.
$(document).bind('mousemove', function(){resetActive()});

$('#toggle').click( function () { 
    $('#sbox').slideDown('fast');
    if ( ! isRefreshing ) {
        var refreshId = setInterval(refreshChatbox, refreshChatboxWait);
    }
    return false;
}); 
```

试试看。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T02:49:08.413

像这样的事情应该这样做。您应该能够使其适应您的需求。我基本上从您链接的 SO 问题中复制了代码。这会在正文中添加一个活动/非活动类。当您运行我的代码时，您会看到这一点。当页面处于活动状态时，屏幕为蓝色。这表明发生了刷新。当屏幕为灰色时，请不要费心刷新。

然后，您只需检查代码中的活动/非活动类。

[http://jsfiddle.net/scgEs/1](http://jsfiddle.net/scgEs/1)

```
var refreshrate = 4000;
var inactivitytime = 15000;
var refreshid; //set to global scope so that you can clear it later
var activityTimeoutId; //store timeout for inactivity
$('#sbox').slideUp();

$('#toggle').click(function() {
    $('#sbox').slideDown('fast');
    refreshId = setInterval(function() {
        if ($('body.inactive').length == 1) {
            $('#sbox').append('<div>No refresh</div>');
        }
        else {
            console.log('Refreshing data');
            $('#sbox').append('<div>Refreshed...</div>');
            //$('#shout').load('shout.php?randval=' + Math.random());
        }
    }, refreshrate);
    return false;
});

// If theres no activity for X seconds do something
activityTimeoutId = setTimeout(inActive, inactivitytime);

function resetActive() {
    $(document.body).attr('class', 'active');
    clearTimeout(activityTimeoutId);
    activityTimeoutId = setTimeout(inActive, inactivitytime);
}

// No activity do something.

function inActive() {
    $(document.body).attr('class', 'inactive');
}

// Check for mousemove, could add other events here such as checking for key presses ect.
$(document).bind('mousemove', function() {
    resetActive()
});​ 
```

# javascript - Windows 8 (JavaScript)：多个 具有相同网络摄像头来源的标签：可能吗？

> ID：10509128
> 
> 赞同：3
> 
> 时间：2012-05-09T02:34:46.457
> 
> 标签：javascript, windows, windows-8, windows-runtime

我正在使用 JavaScript 开发一个地铁应用程序，并试图同时显示来自网络摄像头的两个视频（其中一个最终将应用过滤器）。但是，每当我尝试将它们都设置为将网络摄像头用作源时，我都会收到错误消息，，，，有没有解决这种情况的好方法？

谢谢！

编辑：这是一些代码：

(Javascript)

```
var mediaCaptureMgr = new Windows.Media.Capture.MediaCapture();
var captureInitSettings = new Windows.Media.Capture.MediaCaptureInitializationSettings();
//...set properties of captureInitSettings...

mediaCaptureMgr.initializeAsync(captureInitSettings).then(function (result) {
            var video1 = id("Video1"); //function to get html element with id
            video1.src = URL.createObjectURL(mediaCaptureMgr, false); //does not matter if false is switched to true
            var video2 = id("Video2");
            video2.src = video1.src;//could also use var x = URL.create... then set video1.src/video2.src = x; still won't work.
        },
    errorHandler); 
```

(HTML)

```
<video id="Video1" autoplay></video>
<video id="Video2" autoplay></video> 
```

我可以通过 Click 事件或 Load 事件触发 JS——没关系——只有 Video1 获取网络摄像头视频。视频 2 不起作用。想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:42:17.927

最近在 Chrome 中以类似的方式使用 getUserMedia 玩了一下，我想知道 Metro 中的画布是否可以用于您的第二个视频播放，因为您正计划进行过滤，似乎您可能不得不这样做路线不管？

也就是说，我对 Metro javascript 环境一无所知，但看看你的例子并知道我将如何在受支持的浏览器中做到这一点：

```
var video1 = id("Video1");
var canvas = id('canvas');

var context = canvas.getContext('2d');

context.drawImage(video1, 0, 0); 
```

当然，这只有在您为每一帧视频绘制该图像时才有效，如果有一些类似的`window.requestAnimationFrame`.

# android - 为什么 osmdroid 加载了很多地图。& 缩放到错误的地方

> ID：10509130
> 
> 赞同：2
> 
> 时间：2012-05-09T02:34:59.190
> 
> 标签：android, google-maps, geolocation, openstreetmap, osmdroid

我正在构建一个需要使用 OpenStreetMap 的应用程序。地图已加载。但是，当我缩小时，我发现加载了不止一张地图..实际上，它们似乎有无数个......中间一张地图，上面一张，下面一张；实际上，如果您向下滚动屏幕，您会看到更多...

什么原因？抱歉，stackoverflow 不允许我上传照片。我的代码已附上，您可能想尝试..

另一件事是，我使用定位服务找到了我当前位置的纬度和经度，并将它们存储在 GeoPoint 中；然后我将缩放中心设置到那个点，但是 osm 去了另一个点。很远。

我的代码和 XML 文件附在下面

```
public class OsmdActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setTileSource(TileSourceFactory.MAPNIK);
    mapView.setBuiltInZoomControls(true);
    MapController mapController = mapView.getController();
    mapController.setZoom(10);

    double lat = 1.29377413882149 * 1000000;
    double lon = 103.771969817518 * 1000000;
    GeoPoint p = new GeoPoint(lat, lon);
    mapController.setCenter(p);
}}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <org.osmdroid.views.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-12T22:27:56.480

对我来说，创建 Activity 时我无法设置中心。如果我在设置中心点之前等待约 200 毫秒，一切正常。

这是丑陋的修复：

```
 new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            GeoPoint point = new GeoPoint((int) (52.520820* 1E6),(int) (13.409346* 1E6));
            mapView.getController().animateTo(point);
        }
    }, 200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:46:23.907

我猜您在 SD 卡/osmdroid 文件夹中的存档（地图）不止于此，因此您会看到更多地图。

以您的位置为中心，您可以使用。

```
 mMapView.getController().animateTo(yourPosition); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T05:51:03.520

在 osmdroid 4.3 版中应该已经修复了关于在某个位置居中的问题。从 4.3 版开始，不再需要使用 postDelayed 的解决方法。

详细信息：通过对 osmdroid 的以下提交，以前需要布局才能正常工作的“animateTo()”等调用现在将在创建布局后自动记录和重播。

[https://github.com/osmdroid/osmdroid/commit/2f38d49281b31e79a8290d8df55bb738024907e8](https://github.com/osmdroid/osmdroid/commit/2f38d49281b31e79a8290d8df55bb738024907e8)

# css - CSS issue: multiple CSS with the same element

> ID：10509135
> 
> 赞同：0
> 
> 时间：2012-05-09T02:35:24.073
> 
> 标签：css

```
<div id="nav">
    <ul id="rightMin">
        <li id="selectedmenu" onclick="location.href='index.php'">main</li>
        <li onclick="location.href='aboutus.php'">about</li>
        <li><a href="#">contact us</a></li>
    </ul>
</div> 
```

CSS:

```
#selectedmenu {
    display:inline;
    float:right;
    /*padding: 2px 7px 0px 7px;*/
    height: 35px;
    background: url('../images/selected.png') repeat-x;
    cursor: pointer;
    text-align: center;
    line-height:35px;
    padding: 0 5px 0 5px;
    color: white;
}
div#nav ul li {
    display:inline;
    float:right;
    /*padding: 2px 7px 0px 7px;*/
    height: 35px;
    cursor: pointer;
    text-align: center;
    line-height:35px;
    padding: 0 5px 0 5px;
}

div#nav ul li:hover {
    background: #232323;
    color:#fff;
} 
```

The element with the ID `selectedmenu` takes CSS `#selectedmenu` but when hovering it takes `div#nav ul li:hover`. how can i make it sticks with `#selectedmenu`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:43:39.870

```
div#nav ul li#selectedmenu:hover {
    add your css rules here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:37:41.807

Give `selectedmenu` a higher precedence:

```
div#nav ul li#selectedmenu {
     ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:50:44.877

just change it every time you hover it, try this:

```
div#nav ul li #selectedmenu:hover{ /* the style for #selectedmenu*/ } 
```

hope this helps..

# java - 从命令运行 ant 脚本，发生错误：找不到类：org.eclipse.jdt.core.JDTCompilerAdapter

> ID：10509138
> 
> 赞同：2
> 
> 时间：2012-05-09T02:35:31.997
> 
> 标签：java, ant, eclipse-jdt

在我的java web项目中，有类似的代码`<T>`，在ant脚本中，javac使用JDK编译java代码，编译不成功。

后来，我知道它必须使用eclipse JDT来编译。

并且，在 Eclipse 中，ant 脚本可以运行成功。当运行如下：

右键单击 build.xml ---> Run ---> Run as ---> External Tools Configurations，单击 JRE，选择“Run in the same JRE as the workspace”。

之后，ant就可以运行成功了，在eclipse中。

但是，我想写一个 .bat 和 .sh 文件来调用 ant 脚本，来编译、war、部署和启动 Tomcat。所以，蚂蚁应该从命令运行。我尝试了更多，总是发生错误：找不到类：org.eclipse.jdt.core.JDTCompilerAdapter

PS，我已经将eclipse插件中有关JDT的jar文件复制到ant_home/lib目录。

希望得到您的回应。提前致谢！

构建.xml

`

```
<tstamp>
    <format property="build.time" pattern="yyyy-MM-dd" />
</tstamp>

<path id="project.classpath">
    <fileset dir="${lib.dir}">
        <include name="**/*.jar" />
    </fileset>
    <fileset dir="${catalina.home}/lib">
        <include name="*.jar" />
    </fileset>
    <fileset dir="${ant.dir}">
        <include name="**/*.jar" />
    </fileset>
</path>

<target name="clear">
    <delete dir="${build.dir}" />
    <delete dir="${dist.dir}" />
    <delete file="${catalina.home}/webapps/${webapp.name}.war" />
    <delete dir="${catalina.home}/webapps/${webapp.name}" />
</target>

<target name="init" depends="clear">
    <mkdir dir="${build.dir}/classes" />
    <mkdir dir="${dist.dir}" />
</target>

<target name="compile" depends="init">
    <echo message="begin compile..." />
    <javac srcdir="${src.dir}" destdir="${build.dir}/classes" 
        includeantruntime="false" nowarn="on" 
        source="1.6" target="1.6" deprecation="true" debug="true" 
        encoding="UTF-8" classpathref="project.classpath">
        <compilerarg line="-Xlint:unchecked" />
    </javac>
    <copy todir="${build.dir}">
        <fileset dir="${src.dir}">
            <include name="**/*.xml" />
            <include name="**/*.properties" />
            <include name="**/*.sql" />
        </fileset>
        <fileset dir="${config.dir}">
            <include name="**/*.xml" />
            <include name="**/*.properties" />
            <include name="**/*.sql" />
        </fileset>
    </copy>
    <echo message="end compile..." />
</target>

<target name="war" depends="compile">
    <echo message="begin war..." />
    <war destfile="${dist.dir}/${webapp.name}.war" basedir="${webRoot.dir}" 
        webxml="${webRoot.dir}/WEB-INF/web.xml">
        <lib dir="${lib.dir}" />
        <classes dir="${build.dir}/classes" />
        <fileset dir="${webRoot.dir}">
            <include name="***.*" />
        </fileset>
    </war>
    <echo message="end war..." />
</target>

<target name="deploy" depends="war">
    <echo message="begin deploy..." />
    <copy file="${dist.dir}/${webapp.name}.war"    todir="${catalina.home}/webapps" />
    <echo message="end deploy..." />
</target>

</project> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:16:28.130

不要使用 Eclipse IDE 中的 ant 从命令行使用。

单独下载 ant 并将其解压缩到 - C:\apache\ant - 对于 windows，并将其 bin 目录放在您的 PATH 中。它会附带一些需要添加到您的 CLASSPATH 的罐子。

对于 Mac OSX，“sudo port install ant”会处理一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:05:30.917

从 Eclipse 下载 ecj*.jar 并放在 ANT_HOME/lib 下。确保在 shell 环境下设置了 ANT_HOME，或者你应该在 shell 的 CLASSPATH 中设置 ecj*.jar。（否则，可能仍会抛出 Class not found: org.eclipse.jdt.core.JDTCompilerAdapter。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T20:29:10.887

作为记录，当在上下文中（即在多线程情况下）使用该`<javac>`编译器适配器的任务时，我也会随机收到此错误（经常工作） 。`<parallel>`

看起来编译器适配器 jar 被暂时锁定，线程类加载器或其他东西无法访问。`parallel>`除了删除 <执行之外，我还没有解决方法。

# php - 在 PHP 中通过 REST 返回 XML？

> ID：10509139
> 
> 赞同：0
> 
> 时间：2012-05-09T02:35:37.513
> 
> 标签：php

我想编写一个 php 脚本“test.php”，它输出“sample.xml”文件的内容（具有适当的 Content-Type：xml），就像用户直接访问“sample.xml”一样。我该如何做到这一点？是否需要一些框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:39:40.993

不需要框架......只需使用[header](http://php.net/manual/en/function.header.php)进行一点工作，这是一个示例：

**测试.php：**

```
<?php
header("Content-Type:text/xml"); 
echo file_get_contents('sample.xml');
?> 
```

# c# - 如何通过代码添加事件设置器

> ID：10509140
> 
> 赞同：3
> 
> 时间：2012-05-09T02:35:56.743
> 
> 标签：c#, wpf, delegates, event-handling, eventsetter

一个完整的例子

```
 public delegate void mouseup_delegate(object obj, MouseButtonEventArgs args);

    constructor()
    {
        TextBlock text_block = new TextBlock() { Text = "aa" };
        Style style = new Style();
        //style.Setters.Add(new EventSetter(){Event=TextBlock.MouseUpEvent, Handler=new mouseup_delegate(this.textblockClicked)});
        style.Setters.Add(new EventSetter(TextBlock.MouseUpEvent, new mouseup_delegate(this.textblockClicked)));
        text_block.Style = style;
    }

    public void textblockClicked(object sender, MouseButtonEventArgs args)
    {
        MessageBox.Show("mouse up");
    } 
```

但是当我运行应用程序时，出现异常：处理程序类型无效

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:33:22.533

`EventSetter`期望您提供的代表是 a `MouseButtonEventHandler`，而不是 a `mouseup_delegate`。

# c# - 使用 new 关键字调用基本方法

> ID：10509141
> 
> 赞同：10
> 
> 时间：2012-05-09T02:36:01.063
> 
> 标签：c#, methods, new-operator, keyword

在这个[链接](https://stackoverflow.com/questions/1014295/c-sharp-new-keyword-in-method-signature "关联")中，他们有这个代码：

```
public class Base
{
   public virtual void Method(){}
}

public class Derived : Base
{
   public new void Method(){}
} 
```

然后像这样调用：

```
Base b = new Derived();
b.Method(); 
```

我的实际代码是这样的：

```
public class Base
{
   public void Method()
   {
        // bla bla bla
   }
}

public class Derived : Base
{
   public new void Method()
   {
        base.Method();
   }
} 
```

有必要打电话`base.Method();`吗？
或者只是将派生类中的方法留空？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T02:40:11.530

如果你真的需要调用基类的方法，你需要'base'。 `base.Method();`是正确的方法。

[知道何时使用覆盖和新关键字（C# 编程指南）](https://docs.microsoft.com/en-US/dotnet/csharp/programming-guide/classes-and-structs/knowing-when-to-use-override-and-new-keywords)

# ruby-on-rails - merb 无法加载 dm-mysql-adapter

> ID：10509144
> 
> 赞同：0
> 
> 时间：2012-05-09T02:36:39.030
> 
> 标签：ruby-on-rails, ruby, datamapper, merb, ruby-datamapper

你能帮我解决这个问题吗？

`gem list`显示`dm-mysql-adapter`已经安装，但是merb无法加载。我只想启动一个由merb-gen生成的简单merb应用程序。

```
Loading init file from ./config/init.rb
Loading ./config/environments/development.rb
/usr/lib/ruby/gems/1.8/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:163:in `require': no such file to load -- dm-mysql-adapter (LoadError)
    from /usr/lib/ruby/gems/1.8/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:163:in `load_adapter'
    from /usr/lib/ruby/gems/1.8/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:133:in `adapter_class'
    from /usr/lib/ruby/gems/1.8/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:13:in `new'
    from /usr/lib/ruby/gems/1.8/gems/dm-core-1.2.0/lib/dm-core.rb:230:in `setup'
    from /home/pl/merb/merb-f/config/environments/development.rb:18
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/bootloader.rb:498:in `load'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/bootloader.rb:498:in `load_env_config'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/bootloader.rb:378:in `run'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/bootloader.rb:97:in `run'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/server.rb:172:in `bootup'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core/server.rb:42:in `start'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/lib/merb-core.rb:165:in `start'
    from /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/bin/merb:20
    from /usr/local/bin/merb:19:in `load'
    from /usr/local/bin/merb:19 
```

```
me@server:~/merb/merb-f$ sudo gem list | grep "dm-mysql-adapter"
dm-mysql-adapter (1.2.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:37:21.847

根本原因：某些数据库适配器配置错误。可能由 Merb 应用程序生成，或手动编辑。

将数据库适配器从 mysql 更改为 sqlite，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:17:58.407

确保 Merb 知道您的`GEM_PATH`.

# asp.net-mvc - AD FS 2.0 和 WIF、MSIS7001 错误

> ID：10509147
> 
> 赞同：3
> 
> 时间：2012-05-09T02:36:57.440
> 
> 标签：asp.net-mvc, wif, adfs2.0

我安装了 AD FS 2.0，并在域外的另一台机器上安装了 WIF 和 VS2010。

我创建了一个 ASP.NET MVC 3 应用程序并通过添加 STS 引用向导进行配置，它从我的 AD FS 下载了 FederationMetadata.xml。

我在 AD FS 中添加了依赖方信任，为我的 MVC 应用程序 (http://localhost:16034/) 的 URL 指定了标识符，并创建了一个声明规则，即传递或过滤传入声明，以及传入声明类型是 Windows 帐户名称。

我还在 WS-Federation 的 RP 中添加了一个端点，URL 是[https://192.168.56.101/adfs/ls/](https://192.168.56.101/adfs/ls/)，这是我的 AD FS IP 地址。

然后，当我启动网站时，它被重定向到 AD FS，即[https://192.168.56.101/adfs/ls/?wa=XXXX&wtrealm=XXXXX](https://192.168.56.101/adfs/ls/?wa=XXXX&wtrealm=XXXXX)。但最后我得到一个错误页面，说该页面有参考代码错误。

我检查了 AD FS 机器，发现错误是

MSIS7001：被动协议上下文未找到或无效。如果上下文存储在 cookie 中，则客户端提供的 cookie 无效。确保客户端浏览器配置为接受来自该网站的 cookie，然后重试此请求。

但问题是，当我使用 Fiddler 时，我可以看到我的 HTTP 请求带有诸如 MSISAuth = XXXXX MSISAuth1 = XXXXX MSISAuthenticated XXXXX MSISLoopDetectionCookit XXXXX 之类的 cookie

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:34:45.177

你是如何配置端点的？

在 ADFS 控制台中：

*   打开你的 RP --> 属性
*   单击端点选项卡
*   选择 WS-Fed 端点
*   确保这指向您的 RP，例如[https://localhost:16034/MyRelyingParty](https://localhost:16034/MyRelyingParty)

# .net - 在 ASP.NET MVC 应用程序中定义异常处理和错误日志的最佳实践？

> ID：10509156
> 
> 赞同：3
> 
> 时间：2012-05-09T02:38:16.613
> 
> 标签：.net, asp.net-mvc-3, exception-handling, error-handling

在典型的 MVC 应用程序中，您有很多层。

数据库层 模型层（可能与数据库在同一个包中） 视图/UI 层 控制器层 业务层

如果您要在足够复杂的 MVC 应用程序中为错误日志记录创建自定义异常、接口和模型，那么异常处理或错误日志记录应该在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:44:32.747

您应该在数据层中处理来自数据层的异常（例如 SQLExceptions），在控制器中处理控制器/逻辑异常，在视图中处理显示相关异常。使用像 ELMAH 这样的日志记录解决方案来记录异常并捕获未处理的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:44:50.777

我在我的网站上使用 Elmah 并取得了很好的成功。

[http://www.dotneat.net/2011/04/12/ErrorHandlingInASPNETMVC3.aspx](http://www.dotneat.net/2011/04/12/ErrorHandlingInASPNETMVC3.aspx)

[http://joel.net/logging-errors-with-elmah-in-asp.net-mvc-3--part-1--setup](http://joel.net/logging-errors-with-elmah-in-asp.net-mvc-3--part-1--setup)

# r - 如何将图例标记放在R图中单词的右侧

> ID：10509157
> 
> 赞同：1
> 
> 时间：2012-05-09T02:38:25.817
> 
> 标签：r, plot

> **可能重复：**
> [如何在 R 的图例中交换标签和符号？](https://stackoverflow.com/questions/9366800/how-can-i-swap-labels-and-symbols-in-a-legend-in-r)

使用以下代码：

```
cars <- c(1, 3, 6, 4, 9)
trucks <- c(2, 5, 4, 5, 12)
g_range <- range(0, cars, trucks)
plot(cars, type="o", col="blue", ylim=g_range,  axes=FALSE, ann=FALSE)
legend(1, g_range[2], c("cars","trucks"), cex=0.8,  col=c("blue","red"), pch=21:22, lty=1:2); 
```

如何修改代码以使图例标记（即 -o- 和 -box- 符号）放置在其相应名称的***右侧？***

# iphone - 在达到 ipad 的内存限制之前，一次可以看到多少 UIWebView

> ID：10509158
> 
> 赞同：1
> 
> 时间：2012-05-09T02:38:27.130
> 
> 标签：iphone, objective-c, ipad, memory, uiwebview

我正在开发一个 ipad 应用程序，该应用程序旨在一次显示多个 UIWebView 控件，并且想知道在 ipad 上遇到内存问题之前我们可以拥有的数量的合理限制是多少？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T04:36:12.260

你必须对此充满活力。不要在您的应用程序中设置硬限制，等待内存警告然后开始清除 Web 视图，在用户需要时懒惰地重新加载它们。您应该首先使用截屏视图`[CALayer renderInContext:]`，使其看起来无缝。

毕竟每个 Web 视图都会有不同的内存和 CPU 要求。一如既往，口头禅是测试，测试，测试。

...但是，当然，Safari 将您限制为九个打开的标签。这是一个非常硬的限制。所以……就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:31:33.160

FWIW，我设法在 iPad 1 上一次在屏幕上显示 20 个 UIWebview。这些页面中都有 javascript 代码，它们也不是简单的。加载它们需要一段时间，但我没有收到内存警告，一旦加载，一切都顺利滚动。使用此处的代码：

[确定 iOS 设备上的可用 RAM 量](https://stackoverflow.com/questions/5012886/knowing-available-ram-on-an-ios-device)

然后我检查了内存使用情况，即：

用了113M，免费17M，总共131M，听起来不错。

我没有推动超过 20 个，这比我在实践中使用的要多得多。我印象深刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:45:20.270

它对您的应用程序的 webview 没有合理的限制，这取决于内存留下的 ios

但要小心使用，webview 很难控制内存，

这是一个技巧，在发布 webview 之前这样做可能会减少内存使用

```
[web loadRequest: nil]; 
```

同时使用大量 webview 可能不是一个好主意

# c++ - pow 函数为 cout 和 printf 提供不同的输出？

> ID：10509160
> 
> 赞同：2
> 
> 时间：2012-05-09T02:38:35.490
> 
> 标签：c++, floating-point, printf, cout

我正在编写一个程序来计算 2 的负幂。我使用了以下两个代码片段：

```
cout.precision(3);
cout << scientific << pow(2.0, p) << endl; 
```

和

```
ans = pow(2.0, p);
printf("%.3e\n", ans); 
```

对于`p = -8271`，给出了正确的答案 (1.517e-2490)，但对于(6.929e-310) `cout`，我得到了完全不同的答案。`printf`为什么会出现这种差异？

我在 Ubuntu 上使用代码块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:51:37.840

我打赌那是因为`ans`is a `long double`，但你没有告诉`printf`期待 a `long double`。您想要的格式代码`%.3Le`假设是这种情况。

g++ 编译器甚至有一个检测格式/参数不匹配的警告（我认为它带有`-Wall`），但我总是更喜欢 iostreams，因为它们像这样是类型安全的。

当然，所有这一切都是假设`p`也是`long double`，导致编译器`long double`选择`pow`.

# python - 如何检测使 k 均值余弦崩溃 Matlab 的零向量？

> ID：10509167
> 
> 赞同：2
> 
> 时间：2012-05-09T02:39:45.657
> 
> 标签：python, matlab, k-means

我在一个大型数据集上运行 kmeans，我总是收到以下错误：

```
Error using kmeans (line 145)
Some points have small relative magnitudes, making them effectively zero.
Either remove those points, or choose a distance other than 'cosine'.

Error in runkmeans (line 7)
[L, C]=kmeans(data, 10, 'Distance', 'cosine', 'EmptyAction', 'drop') 
```

我的问题是，即使我向所有向量添加 1，我仍然会收到此错误。我希望它会通过，但显然仍然有太多的零（这就是导致它的原因，对吗？）。

我的问题是：什么条件使 Matlab 决定一个点具有“较小的相对大小”和“实际上为零”？

在将数据交给 Matlab 之前，我想使用 python 从我的数据集中删除所有这些点，因为我需要将我的结果与我在 python 中处理的黄金标准进行比较。

提前致谢！

**编辑答案**

下面给出了正确的答案，但如果有人通过谷歌找到这个问题，下面是如何从 python 中的矩阵中删除“有效零向量”。每行 (!) 都是一个数据点，因此如果您正在运行 kmeans，您需要在 python 或 Matlab 中转置：

```
def getxnorm(data):
        return np.sqrt(np.sum(data ** 2, axis=1))

def remove_zero_vector(data, startxnorm, excluded=[]):
        eps = 2.2204e-016
        xnorm = getxnorm(data)
        if np.min(xnorm) <= (eps * np.max(xnorm)):
                local_index=np.transpose(np.where(xnorm == np.min(xnorm)))[0][0]
                global_index=np.transpose(np.where(startxnorm == np.min(xnorm)))[0][0]
                data=np.delete(data, local_index, 0) # data with zero vector removed
                excluded.append(global_index) # add global index to list of excluded vectors
                return remove_zero_vector(data, startxnorm, excluded)
        else:
                return (data, excluded) 
```

我敢肯定有一种更科学的方式来做到这一点，但它会做的:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:49:21.663

如果您正在使用[这个 kmeans](http://www.princeton.edu/~kung/ele571/571-MatLab/571BP_Chad/kmeans.m)，那么引发错误的相关代码是：

```
case 'cosine'
    Xnorm = sqrt(sum(X.^2, 2));
    if any(min(Xnorm) <= eps * max(Xnorm))
        error(['Some points have small relative magnitudes, making them ', ...
               'effectively zero.\nEither remove those points, or choose a ', ...
               'distance other than ''cosine''.'], []);
    end 
```

所以这是你的测试。如您所见，重要的是相对大小，因此在所有内容中添加一个只会使事情变得更糟（`max(Xnorm)`也变得更大）。一个好的解决方法可能是按常数缩放所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:00:15.717

在您的[另一个问题](https://stackoverflow.com/questions/10503193/matlab-k-means-cosine-assigns-everything-to-one-cluster)中，您的数据看起来是标量的。如果您的输入向量只有一个特征/维度，则它们之间的余弦距离将始终未定义（或为零），因为根据定义它们指向相同的方向（沿单轴）。余弦测量给出了两个向量之间的角度，如果向量可以指向不同的方向（即维度> 1），该角度只能是非零的。

# codeigniter - Codeigniter Pagination - 限制和限制偏移查询字符串

> ID：10509173
> 
> 赞同：0
> 
> 时间：2012-05-09T02:40:21.810
> 
> 标签：codeigniter, pagination

我有 Codeigniter 分页的配置代码

```
$config['base_url']   = $base_url;
$config['total_rows'] = $total_search_results;
$config['per_page']   = $per_page;
$config['num_links']        = 4;
$config['use_page_numbers'] = FALSE;
$config['page_query_string'] = TRUE;
$config['query_string_segment'] = 'limit-offset'; 
```

我有从 GET 查询字符串获得的“限制”和“限制偏移”值，这是我导出 $per_page 值的地方。

但是，在生成的分页链接中，我仍然想在 url 中包含“limit”和“limit-offset”值，例如

```
www.domain.com/test/?limit=10&limit-offset=20 
```

我们如何使用 Codeigniter 分页库来完成这些工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:42:28.513

请参阅@WesleyMurch 在 Pagation 的答案，在[uri 中使用 GET 数据 - Codeigniter](https://stackoverflow.com/questions/10504274/pagnation-with-get-data-in-the-uri-codeigniter)

```
// After loading the pagination class
$this->pagination->suffix = '{YOUR QUERY STRING}'; 
```

或者更好的是，只需`$config['suffix'] = '{YOUR QUERY STRING}';`在加载类之前添加到您的配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T10:44:03.557

您必须编辑您的

```
config["base_url"] = www.domain.com/test?limit=xxx; 
```

编辑

```
config['per_page'] = $this->input->get("limit"); 
```

这是完整的配置：

```
//your base url : www.domain.com/
$config['base_url']   = sprintf("%stest/?limit=%d", $base_url, $this->input->get("limit")); // it will generate : www.domain.com/test?limit=xxx
$config['total_rows'] = $total_search_results;
$config['per_page']   = $this->input->get("limit");
$config['num_links']        = 4;
$config['use_page_numbers'] = FALSE;
$config['page_query_string'] = TRUE;
$config['query_string_segment'] = 'limit-offset'; 
```

然后，foreach 分页链接将具有以下格式：www.domain.com/test/?limit=10&limit-offset=20

# javascript - Canvas window.inner(Width|Height) 滚动条偏移量？

> ID：10509176
> 
> 赞同：4
> 
> 时间：2012-05-09T02:40:34.070
> 
> 标签：javascript, html, scrollbar

我做了一个游戏，将画布的宽度和高度分别设置为 window.innerWidth 和 window.innerHeight。从理论上讲，这应该使它与侧面齐平，但我在页面底部得到滚动条和 4 像素高度的空白。我将边距和填充设置为 * 为 0，认为这样可以解决它，但它仍然是那样。

我需要尽可能使用最少的代码；这是为未来的 js1k 组合准备的。

这是页面[左上滚动图像](http://cl.ly/0k0Q0j3q2W3A1u231m3f)、[右下滚动图像的屏幕截图](http://cl.ly/2h3F0H0I0E1n0X0w0602)。

关于什么是错的或如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T02:53:23.207

你`display: block`的画布元素缺少一个，或者`<!DOCTYPE html>`- 它们默认是内联的，除非你处于 html5 模式。

# c++ - 未解析的外部符号“std::basic_string”

> ID：10509178
> 
> 赞同：6
> 
> 时间：2012-05-09T02:40:51.413
> 
> 标签：c++, visual-c++, maven, std, linkage

我正在尝试通过 Visual C++ 编译器使用 Maven 编译一个项目，并且我不断收到关于 std::basic_string 类的链接错误。我确保将 <string> 头文件包含到相应的 c++ 文件中。

我错过了什么还是我犯了一个愚蠢的错误？？？请让我知道我哪里出错了。

```
[ERROR] Parsor.obj : error LNK2001: unresolved external symbol

"__declspec(dllimport) public:
    int __thiscall std::basic_string<
        char,
        struct std::char_traits<char>,
        class std::allocator<char> >::compare(
            class std::basic_string<
                char,
                struct std::char_traits<char>,
                class std::allocator<char> > const &) const"

(__imp_?compare@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEHABV12@@Z) 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-09T05:41:34.873

您的 VC++ 中的链接器设置似乎不正确。尝试一个简单的程序来测试 std::srig 功能

可能复制到：

[未解决的外部符号..不知道](https://stackoverflow.com/questions/9928238/unresolved-external-symbol-no-idea)

[解决源自 .lib 文件的“本地定义的符号”和“未解析的外部符号”](https://stackoverflow.com/questions/4757962/solving-locally-defined-symbol-and-unresolved-external-symbol-that-originate)

# python - LibreOffice LightProof 语法库可以外用吗？

> ID：10509181
> 
> 赞同：3
> 
> 时间：2012-05-09T02:41:17.607
> 
> 标签：python, api, libreoffice

[LibreOffice 3.5 包含一个语法检查器](http://arstechnica.com/business/news/2012/02/libreoffice-35-released-introduces-new-grammar-tool.ars)，称为（或可能基于）LightProof。根据我的阅读，LightProof 似乎是一个 Python 库，可用于检查自定义语法规则。但是我一辈子都找不到 LightProof 的项目页面。

我得到的最接近的是[http://cgit.freedesktop.org/libreoffice/lightproof/tree/](http://cgit.freedesktop.org/libreoffice/lightproof/tree/)，这似乎是 LibreOffice 扩展的代码，而不是 LightProof 本身。

那么 LightProof 实际上是一个可以在其他应用程序中实现的库，还是仅仅是 LibreOffice 功能的一个代码字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-24T15:45:48.407

LightProof 已被 LanguageTool 取代，其源代码[可在 GitHub 上找到](https://github.com/languagetool-org/languagetool)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:19:34.337

目前还不可能，但是：“我们将能够制作 Lightproof/Grammalecte 的独立版本，因为不再需要使用 Hunspell” - 请参阅 Olivier R. 在[LibreOffice 邮件列表中](http://markmail.org/message/irggxv5r6xhwz4m7?q=languagetool%20-list%3anet.sourceforge.lists.languagetool-devel%20order%3adate-backward)的帖子。

# javascript - jQuery追加不会调用两次？

> ID：10509184
> 
> 赞同：4
> 
> 时间：2012-05-09T02:42:27.800
> 
> 标签：javascript, jquery, append

```
var random1 = Math.floor((Math.random()*elems.length));
var random2 = Math.floor((Math.random()*elems.length));

while (random1 == random2) {
    var random2 = Math.floor((Math.random()*elems.length));
}

$j('#project-scroller').append( elems );
$j('#project-scroller').append( elems[random1] );
$j('#project-scroller').append( elems[random2] ); 
```

所以这就是发生的事情： elems 被附加但 elms[random1] 和 elems[random2] 没有。

所以然后我尝试了这个：

```
$j('#project-scroller').append( elems );
$j('#project-scroller').append( elems ); 
```

并且 elems 也只附加了一次！所以然后我尝试了这个：

```
$j('#project-scroller').append( elems[random1] );
$j('#project-scroller').append( elems[random2] ); 
```

并附加了两个随机元素。然后我尝试附加 random1 两次，它只附加了一次......

我错过了什么？为什么 jQuery 不会多次附加相同的元素？用 appendTo 尝试了同样的事情（只是为了踢球），它做了同样的事情。

* * *

感谢你的回答！这就是我最终得到的结果：

```
var random1 = Math.floor((Math.random()*elems.length));
var random2 = Math.floor((Math.random()*elems.length));
while (random1 == random2) {
    var random2 = Math.floor((Math.random()*elems.length));
}
newElem1 = $j(elems[random1]).clone();
newElem2 = $j(elems[random2]).clone();
$j('#project-scroller').append( elems ).append( newElem1 ).append( newElem2 ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T02:45:08.283

它不是附加副本`elems`，而是附加真实的东西。用于`clone()`创建要附加的第二个副本。

# node.js - 在 Node.js 应用程序中混淆了两个并发请求

> ID：10509187
> 
> 赞同：1
> 
> 时间：2012-05-09T02:43:12.243
> 
> 标签：node.js, mongodb, nginx

我完全被我今天在我的应用程序中注意到的内容难住了。

我有一个用 Node.js 编写的应用程序，在 nginx 上运行，后端有 MongoDB。我有一个'authenticateUser' cal，它接受用户名和密码。然后它查询 MongoDB 以检索用户文档并检查密码是否匹配。

我们编写了一个脚本，它基本上循环调用 'authenticateUser' 100 次。它工作得很好。没有错误。现在我们从 2 个终端运行相同的脚本，一个用于用户 bill，另一个用于用户 sam。我们开始在两个终端上看到故障。我想说大约 10% 的请求因密码无效错误而失败。

当我们检查日志文件时，我们完全惊讶地发现 bill 的用户名与 sam 的密码混淆了。我们不知道发生了什么。我们一定是在做一些明显错误的事情。它是什么？这两个请求不是完全相互隔离的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T02:50:45.603

你经常使用全局变量吗？缺失`var`是此类错误的常见原因。

是的，我想看看源代码......

# java - 在 JSP 中显示具有绝对路径的图像

> ID：10509192
> 
> 赞同：2
> 
> 时间：2012-05-09T02:43:48.087
> 
> 标签：java, image, jsp, path, jetty

我正在使用 Java、JSP 和 Jetty 开发网站。

我在`<img>`标签的 src 中传递的图像路径存在一些问题。

在我的数据库中，我有用户图像的 Linux 绝对路径。我得到这个值并放入“src”属性。

我有路径，例如：

*   /home/website/images/image1.png

这样做，图像不会出现。想了很久，我得出的结论是很自然的，因为我从未在任何网站图像中看到过这样的路径到操作系统的绝对路径。

我需要知道的是我必须做什么？

我必须更改 Jetty 的配置吗？我必须在 Java 中运行一些代码吗？

通过谷歌搜索，我更加困惑。我想要一个解释。

**更新 (26/03/2013)**

我发现了这种处理这个问题的方法：

[http://balusc.blogspot.com.br/2007/04/imageservlet.html](http://balusc.blogspot.com.br/2007/04/imageservlet.html)

谢谢BalusC！哈哈哈哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:51:28.930

实际上，`<img src>`必须引用公共 Web URL，而不是本地磁盘文件系统路径。您的图像必须通过 HTTP 请求可用。即必须下载它们的是网络浏览器，而不是必须以某种方式包含它们的网络服务器。

对于初学者来说，最直接的方法是创建一个 servlet，它根据请求参数或路径信息获取图像内容`InputStream`，然后在设置必要的 HTTP 响应标头之后，`FileInputStream`以通常的 Java IO 方式将其`OutputStream`写入`HttpServletResponse`浏览器知道如何处理它。

例如，假设 servlet 被映射并且您以[http://example.com/contextpath/images/image1.png](http://example.com/contextpath/images/image1.png)`/images/*`的形式打开图像：

```
String filename = request.getPathInfo();
File file = new File("/home/website/images", filename);

response.setHeader("Content-Type", getServletContext().getMimeType(filename));
response.setHeader("Content-Length", String.valueOf(file.length()));

InputStream input = new FileInputStream(file);
OutputStream output = response.getOutputStream();
// Stream bytes the usual way. 
```

另一种方法是将`/home/website/images`上下文路径作为新的 Web 应用程序上下文添加到服务器`/images`。这样，图像就可以通过[http://example.com/images/image1.png](http://example.com/images/image1.png)获得。您只需要依赖于 servletcontainer make/version 如何配置它，以及您是否拥有对它的完全管理员控制权。对于 Jetty，如果您以编程方式管理它，则如下所示：

```
server.setHandler(new WebAppContext("/home/webapp/images", "/images")); 
```

或者当您通过 XML 管理它时：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <Set name="resourceBase">/home/website/images</Set>
    <Set name="contextPath">/images</Set>
</Configure> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:51:18.850

从您在 URI 中使用的单词来看，您似乎将文件系统上的文件路径放在 src 属性中，而不是唯一标识资源的 URL。

绝对路径对于您的文件系统来说不是绝对的，它们是从您的 Web 服务器的根目录开始的绝对路径。此外，这些 URL 资源标识符甚至可以更改或修改以映射到服务器中的不同文件夹甚至是动态资源。

这是一个例子：

**服务器上的文件路径：**

```
/home/website/images/image1.png 
```

**example.com 映射到“网站”文件夹：**

使用相对 URL 时，您可能会看到：

```
<img src="/images/image1.png" /> 
```

要使用绝对 URL，您需要 HTTP 方案：

```
<img src="http://example.com/images/image1.png" /> 
```

总之，使用文件路径从客户端 HTML 识别服务器上的资源是不正确的，并且不起作用。

# actionscript-3 - 自定义 Spark DataGrid 中未定义的方法“sortByColumns”？

> ID：10509194
> 
> 赞同：1
> 
> 时间：2012-05-09T02:44:18.673
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我正在使用一些自定义组件构建一个 Flex 应用程序，我认为这会搞砸事情。我正在尝试`sortByColumn`在火花数据网格中，使用[此处的答案](https://stackoverflow.com/questions/7350020/setting-spark-datagrid-columns-default-sort-on-applications-creationcomplete)作为模板。当我尝试在函数中使用以下内容时，

```
myGrid.sortByColumns(0,true); 
```

我得到错误：

```
1061: Call to a possibly undefined method sortByColumns through a 
reference with static type com.components:MyReportGrid. 
```

有谁知道如何消除这个错误？是否`MyReportGrid`以某种方式掩盖了火花组件的正确位置？在使用其他一些函数（例如 invalidateCell()）时，我也会收到“未定义的方法”错误，不确定它是否与此错误有关。

我的数据网格如下所示：

```
...
<components:MyReportGrid id="myGrid" dataProvider="{_myData}"...>
    <components:columns>
        <fx:Array>
            <supportClasses:MyColumn ... />
            <supportClasses:MyColumn ... />
            <supportClasses:MyColumn ... />
            ... 
```

其中 MyColumn 是一个类，如下所示：

```
import spark.components.gridClasses.GridColumn;
public class MyColumn extends GridColumn
{
    ...
    public function MyColumn(headerText:String="header" width:Number=100 ...)
    {
       this.headerText=headerText;
       ...
    }
} 
```

MyReportGrid 是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"    
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         width="400" height="300">
   import com.components.myClasses.MyColumn;
   import com.itemRenderers.myItemRenderer;
   import mx.collections.ArrayCollection;
   import mx.collections.ArrayList;
   import mx.collections.ListCollectionView;
   import spark.components.gridClasses.GridColumn;
   ...
   <s:DataGrid width="100%" ... />
</s:Group> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:42:05.333

这永远不会起作用，因为您正在调用基本类型`myGrid.sortByColumns(0,true);`的组件。`MyReportGrid``Group`

A`Group`没有调用任何方法`sortByColumns`

所以你可以：

*   在 MyReportGrid 组件中创建一个委托方法

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"    
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx"
     width="400" height="300">
      import com.components.myClasses.MyColumn;
      import com.itemRenderers.myItemRenderer;
      import mx.collections.ArrayCollection;
      import mx.collections.ArrayList;
      import mx.collections.ListCollectionView;
      import spark.components.gridClasses.GridColumn;
      ...

       <mx:Script>
         <![CDATA[
         public function sortByColumns(columnIndices:Vector.<int>, isInteractive:Boolean = false):Boolean{
             return internalGroupGrid.sortByColumns(columnIndices,isInteractive);
         }
         ]]>
       </mx:Script>

       <s:DataGrid width="100%" id="internalGroupGrid"... />
    </s:Group> 
    ```

*   使 DataGrid 成为 MyReportGrid 组件的根标记

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <s:DataGrid xmlns:fx="http://ns.adobe.com/mxml/2009"    
             xmlns:s="library://ns.adobe.com/flex/spark" 
             xmlns:mx="library://ns.adobe.com/flex/mx"
             width="400" height="300">
        import com.components.myClasses.MyColumn;
        import com.itemRenderers.myItemRenderer;
        import mx.collections.ArrayCollection;
        import mx.collections.ArrayList;
        import mx.collections.ListCollectionView;
        import spark.components.gridClasses.GridColumn;
        ...
    </s:DataGrid> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:36:02.697

嗯，如果不查看完整上下文中的代码（包括构建脚本和层次结构），很难给出良好的响应。但是，据我所知，编译器似乎缺少有关 MyReportGrid 对象类型的信息。它是扩展了具有该功能的东西还是实现了“sortByColumns”功能？

如果您正在寻找一种摆脱“类型提示”的方法，您可以随时执行“myGrid["sortByColumns"](0, true)"

但是，不建议这样做；）

顺便说一句，在你的解释中，你正在写一些关于 MyDataGrid 的东西，这让我迷失了一段时间，直到我意识到这是一个错字。

我很确定您必须明确表明您的类“com.components:MyReportGrid”直接或通过扩展实现了该功能。

# android - 开始视频录制时屏幕闪烁并调整大小

> ID：10509197
> 
> 赞同：4
> 
> 时间：2012-05-09T02:44:33.167
> 
> 标签：android, android-camera, surfaceview, android-mediarecorder

我正在我的应用程序中集成照片/视频捕获，并且在视频捕获方面遇到问题。每当视频录制开始时，屏幕就会闪烁，我会短暂停顿，然后开始视频捕获。但是，使用手机的相机应用程序，根本没有闪烁/暂停。

此外，我的相机预览显示会在`recorder.start()`调用时立即调整大小。我不明白为什么会这样。它使预览失真（一切看起来都被挤压和变宽）。

我的问题：如何防止开始视频录制时出现闪烁/暂停？如何防止`recorder.start()`调整预览显示的大小？

每当启用“视频模式”时，`initRecording()`都会立即调用。一旦用户按下一个按钮，`startRecording()`就会被调用。最后，当按钮再次被按下时，`stopRecording()`被调用。不太重要的是，当切换回“图片模式”时，`destroyRecorder()`会调用它。

```
@Override
public void onResume() {

    super.onResume();

    Camera camera = null;
    try {
        camera = Camera.open();
    }
    catch (Exception e) {
        // Camera isn't available
        Toast.makeText( getActivity(), "Camera is not available at this time.", Toast.LENGTH_SHORT ).show();
        getActivity().finish();
        return;
    }

    if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD ) {
        setCameraDisplayOrientation( camera );
    }
    else {
        camera.setDisplayOrientation( 90 );
    }

    setCamera( camera );
    setCameraZoomDisplay( camera );

    if ( getSurfaceHolder() != null ) {
        startPreview();

        if ( getMode() == MODE_VIDEO ) {
            initRecording();
        }
    }
}

private void setCameraDisplayOrientation( Camera camera ) {

    CameraInfo info = new CameraInfo();
    Camera.getCameraInfo( 0, info );

    int rotation = getActivity().getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0;
    switch (rotation) {
        case Surface.ROTATION_0:
            degrees = 0;
            break;
        case Surface.ROTATION_90:
            degrees = 90;
            break;
        case Surface.ROTATION_180:
            degrees = 180;
            break;
        case Surface.ROTATION_270:
            degrees = 270;
            break;
    }

    int result = ( info.orientation - degrees + 360 ) % 360;
    camera.setDisplayOrientation( result );
}

private void initRecording() {

    MediaRecorder recorder = new MediaRecorder();
    setRecorder( recorder );

    Camera camera = getCamera();
    camera.unlock();
    recorder.setCamera( camera );

    recorder.setAudioSource( MediaRecorder.AudioSource.MIC );
    recorder.setVideoSource( MediaRecorder.VideoSource.CAMERA );

    CamcorderProfile cp = CamcorderProfile.get( CamcorderProfile.QUALITY_HIGH );
    recorder.setProfile( cp );

    String extension;
    switch (cp.fileFormat) {
        case MediaRecorder.OutputFormat.MPEG_4:
            extension = "mp4";
            break;
        case MediaRecorder.OutputFormat.THREE_GPP:
            extension = "3gp";
            break;
        default:
            extension = "tmp";
    }

    setVideoMimeType( MimeTypeMap.getSingleton().getMimeTypeFromExtension( extension ) );

    File toFile = new File( getActivity().getCacheDir(), "tempvideo.tmp" );
    if ( toFile.exists() ) {
        toFile.delete();
    }
    setTempFile( toFile );

    recorder.setOutputFile( toFile.getPath() );
    recorder.setPreviewDisplay( getSurfaceHolder().getSurface() );

    try {
        recorder.prepare();
        setRecorderInitialized( true );
    }
    catch (IllegalStateException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
}

private boolean startRecording() {

    try {
        getRecorder().start();
        setRecording( true );

        ImageView actionImageView = getActionImageView();
        actionImageView.setImageResource( R.drawable.record_red );
    }
    catch (Exception e) {
        getCamera().lock();
    }

    return true;
}

private void stopRecording() {

    MediaRecorder recorder = getRecorder();
    if ( recorder != null && isRecording() ) {
        recorder.stop();
        setRecording( false );
        setRecorderInitialized( false );

        try {
            insertVideo();
        }
        catch (IOException e) {
            e.printStackTrace();
        }

        initRecording();

        ImageView actionImageView = getActionImageView();
        actionImageView.setImageResource( R.drawable.record_green );
    }
}

private void destroyRecorder() {

    MediaRecorder recorder = getRecorder();
    recorder.release();
    setRecorder( null );
    getCamera().lock();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T15:58:10.850

调用 MediaRecorder.start() 时轻微缩放的原因是相机调整其预览大小以匹配正在录制的视频的分辨率。可以通过在设置时设置预览和视频分辨率来解决此问题。我想我也找到了一种停止闪烁的方法，尽管我发现在使用 Camera 和 MediaRecorder 时，一点点延迟或闪烁可能来自许多地方，所以这可能是有点难以追踪。 [用于设置摄像机/录像机的 Android 文档](http://developer.android.com/guide/topics/media/camera.html)是一个很好的起点，可以确保正确设置主要部分，但我发现有必要深入研究一些类 api 文档来调试和体验真的很顺利。

`Camera.Parameters`课程是保持流畅视频录制体验的关键。一旦你有了一个 Camera 对象，你就可以使用它`Camera.getParameters()`来获取当前的参数来修改它们。 `Camera.setParameters(Camera.Parameters)`然后可用于触发已进行的任何更改。

为了防止视频调整大小，我们需要确保参数的预览大小与要录制的视频分辨率一致。要获取支持的视频/预览尺寸列表，我们可以`Camera.Parameters.getSupportedPreviewSizes()`在当前的参数对象上使用，它将返回一个`Camera.Size`对象列表。每个对象都有一个 width 和 height 属性，可以通过`Camera.Size.width`and直接访问`Camera.Size.height`（没有 getter 方法）。该`getSupportedPreviewSizes()`方法[保证返回至少一个结果，](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)并且似乎结果是从最高分辨率到最低排序的。

（对于 API 级别 > 11 也有一种`getSupportedVideoSizes()`方法，但似乎只有设备有一些与预览尺寸不同的视频尺寸，否则它返回 null。我没有成功使用此方法，所以我'现在会坚持使用 PreviewSizes，因为它保证返回对视频和预览都有好处的尺寸，但这是需要注意的事情。）

一旦我们有了与`Camera.Size`我们想要的视频分辨率相对应的分辨率，我们就可以使用设置该尺寸。`Camera.Parameters.setPreviewSize(width, height).` 此外，为了帮助解决闪烁问题，我使用了`Camera.Parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO).` 这些步骤，用于`Camera.setParameters()`通知相机您的更改。我在拿到相机后就成功设置了一次这些参数，因为在用户与此 Activity 交互时设置参数会导致一些延迟。如果您使用相同的 Activity 进行视频和图片捕获，您还可以在此处设置图片参数，Camera 对象将使用每种模式的正确参数进行处理。

快完成了！现在预览已经完成，剩下的就是确保`MediaRecorder`使用与预览相同的分辨率。在准备媒体记录器时，在调用`MediaRecorder.setProfile()`（或设置编码器，API 级别 < 8）和之间，使用与预览相同的值`MediaRecorder.setOutputFile()`进行调用。`MediaRecorder.setVideoSize(width, height)`现在，从预览到录制的过渡`MediaRecorder.start()`应该是无缝的，因为它们都使用相同的分辨率。

这是一些快速的代码片段，因此您可以查看所有操作：

获取和设置参数：

```
Camera.Parameters params = camera.getParameters();

params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);

//myVideoSize is an instance of Camera.Size
List<Camera.Size> previewSizes = params.getSupportedPreviewSizes();
myVideoSize = previewSizes.get(0);
params.setPreviewSize(myVideoSize.width, myVideoSize.height);

camera.setParameters(params); 
```

然后在媒体记录器上设置大小：

```
//After setting the profile....
mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

//Use myVideoSize from above
mediaRecorder.setVideoSize(myVideoSize.width, myVideoSize.height);

//Before setting the output file
mediaRecorder.setOutputFile(myFile); 
```

# android - android，使用httpget返回xml数据

> ID：10509206
> 
> 赞同：0
> 
> 时间：2012-05-09T02:46:31.763
> 
> 标签：android, xml, http-get

我是 android 新手，对代码的理解非常有限。我正在尝试从互联网上的 api 返回 xml 数据。我已经阅读了几篇关于此的文章，但似乎都没有效果，而且它们对代码的解释很少，所以我无法对其进行太多修改。

任何人都可以解释我哪里出错了，并给我一些关于需要改变的指导吗？

干杯伙计们

```
package com.example.testingXML;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URI;
import java.net.URISyntaxException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.entity.BufferedHttpEntity;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class Main extends Activity {
  /** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
      HttpClient httpclient = new DefaultHttpClient();
      HttpGet httpget = new HttpGet();
      httpget.setURI(new URI("http://api.inapub.co.uk/venues/postcode/bn23fe/1/?API_Key=7xa3tdmjkhu6jwjvp746zgg4"));

      HttpResponse response = httpclient.execute(httpget);
      HttpEntity ht = response.getEntity();

      BufferedHttpEntity buf = new BufferedHttpEntity(ht);

      InputStream is = buf.getContent();

      BufferedReader r = new BufferedReader(new InputStreamReader(is));

      StringBuilder total = new StringBuilder();
      String line;
      String NL = System.getProperty("line.separator");
      while((line = r.readLine()) != null){
        total.append(line + NL);
      }

      r.close();
      String page = r.toString();

    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } catch (URISyntaxException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:16:16.093

两件事情：

1) 请使用单独的线程进行 HTTP 获取。请参阅：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

2）确保您的应用程序正在请求互联网权限

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

3) 最简单的方法是使用 URLConnection

```
URLConnection conn = new URL("http://api.inapub.co.uk/venues/postcode [etc...]").OpenConnection(); 
```

# java - RichFaces 4.2 使用 h:commandLink 转发到新页面

> ID：10509221
> 
> 赞同：0
> 
> 时间：2012-05-09T02:50:20.323
> 
> 标签：java, jsf-2, richfaces

使用 RichFaces 3.3.3，我可以使用以下代码：

```
<h:commandLink action="UPLOAD_PAGE">Upload Document</h:commandLink> 
```

commandLink 会将用户带到请求的页面。但是，此代码在 RichFaces 4.2.1 中不再有效，当我单击它时，它只是停留在当前页面上。它使屏幕闪烁片刻，就好像它在做某事一样。我在日志中看不到任何错误，或者任何东西，这使得调试非常困难。有人有这方面的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:30:10.823

有没有机会忘记你的导航规则`faces-config.xml`？以及任何你可以`UPLOAD_PAGE`用你的页面名称替换的方式，比如`action="page2"`

如果要重定向，请查看此答案

[我如何在 JSF 2.0 中重定向](https://stackoverflow.com/a/3948976/617373)

并阅读以下内容：

[JSF 2.0 中的隐式导航](http://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/)

# android - Android 应用程序崩溃时的堆栈跟踪文件位于何处？

> ID：10509224
> 
> 赞同：3
> 
> 时间：2012-05-09T02:50:42.163
> 
> 标签：android, proguard

在 Android 应用程序崩溃且未处于调试模式的情况下，我在哪里可以检索堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:12:10.250

Is this on your device?

I assume since your retrieving it you own it. Plug the device into the computer and via adb

issue

```
adb logcat > log.txt 
```

(log.txt will be filled with a logcat of all stack traces and recent events). Hit CTRL C after about 10 seconds of data collection.

# cursor-position - 无法在 cics 中动态放置光标位置

> ID：10509225
> 
> 赞同：0
> 
> 时间：2012-05-09T02:50:44.120
> 
> 标签：cursor-position, cics

我有一张地图，它只有一个输入字段，用户将从 3 个给定选项中选择选项。我没有在map中字段的属性定义中使用IC。我所做的是在发送地图之前，我使用了这个语句： MOVE -1 TO OPTIONL 我认为它是用来将光标放在这个选项字段中的。但这行不通。可能是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:32:40.017

您是否指定了没有位置值的 CURSOR？即使您将长度属性设置为 -1，也必须指定 SEND MAP 上的 CURSOR 定位选项 - 但没有值。就像是

```
 MOVE -1 TO OPTIONL
  EXEC CICS SEND
     MAP('MYMAP'),
     MAPSET('MYMAPSET')
     CURSOR
     ERASE
  END-EXEC 
```

# hibernate - 如何从 JPA 注释的 POJO 中绘制域模型？

> ID：10509228
> 
> 赞同：1
> 
> 时间：2012-05-09T02:50:59.520
> 
> 标签：hibernate, jpa

我想可视化我所有的 JPA 注释类之间的关系。鉴于我有一个充满类的文件夹，是否有一个工具可以扫描所有注释并提供所有关系的可视化/图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:59:27.773

是的。[Hibernate 工具](http://www.hibernate.org/subprojects/tools.html)是一个 Eclipse 插件，具有[可视](http://docs.jboss.org/tools/3.3.0.M5/en/hibernatetools/html_single/index.html#map_diagram)化实体结构和实体之间关系的功能。

![在此处输入图像描述](../Images/2d0e90a813fcee8dec3cf21b86a39687.png)

# php - 复制（）不能从url到php中的文件夹

> ID：10509234
> 
> 赞同：1
> 
> 时间：2012-05-09T02:51:50.470
> 
> 标签：php

我正在尝试使用 php 将文件从 url 复制到系统中的文件夹

```
<?php $image = "http://l.yimg.com/t/frontpage/10-facts-slideshow-080512-630-01.jpg";
if (!copy($image, "localfolder/mainPic1.png")) {
echo "FAILED";
}else{echo "DONE";} 
```

它总是以“失败”告终

*   所有权限都设置为本地文件夹

*   我检查了phpinfo，发现 `allow_url_fopen =Off`

因为它是共享服务器，所以我无法控制 php 设置。请你建议一个替代方案。

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:55:33.403

如果`allow_url_fopen`关闭并且您无法启用它，则需要使用 curl 检索文件并将其保存在本地。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://l.yimg.com/t/frontpage/10-facts-slideshow-080512-630-01.jpg");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$imgdata = curl_exec($ch);

// Save to disk
file_put_contents("localfolder/mainPic1.png", $imgdata); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:05:28.173

是的，`allow_url_fopen`必须`ON`为此。

```
allow_url_fopen = On 
```

即使您被允许`php.ini`在共享服务器上进行修改。创建一个`php.ini`并将值保存`allow_url_fopen = On`在根文件夹中。它通常会覆盖默认设置。

# erlang - 不在 EUnit 中输出异常堆栈跟踪

> ID：10509238
> 
> 赞同：7
> 
> 时间：2012-05-09T02:52:36.950
> 
> 标签：erlang, eunit

我正在用 EUnit 编写测试，但控制台中没有任何异常详细信息输出。

```
exp_test() ->
  ?assertEqual(0, 1/0). 
```

在 Erlang Shell 输出中运行这个模块：exp_test()

```
** exception error: bad argument in an arithmetic expression
 in function  exp_test:'-exp_test/0-fun-0-'/1 (src/test/eunit/xxx_test.erl, line 8) 
```

但在 EUnit 输出中

```
> eunit:test(xxx).
> xxx_test: exp_test...*failed*
  ::badarith 
```

EUnit 不输出任何异常跟踪信息

我在 eunit 中尝试详细配置，但没有效果。

我想在 eunit 测试结果中输出一些异常细节。

谢谢~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T17:22:55.260

这是在 R15B 和 R15B01 中发布的 eunit 中的一个已知问题。这已在版本 R15B02 中得到修复。如果您使用较早的版本，您可以下载并应用[补丁](https://github.com/erlang/otp/commit/73b94a990bb91fd263dace4ccbaef6ff727a9637)：

# R15B02 之前版本的解决方法

您可以通过重新编译受影响的模块来解决本地安装中的问题：

1.  如果您还没有 Erlang/OTP 源，请下载并解压它们。

    ```
    wget http://www.erlang.org/download/otp_src_R15B01.tar.gz
    tar xzf otp_src_R15B01.tar.gz
    cd otp_src_R15B01 
    ```

2.  下载并应用[补丁](https://github.com/erlang/otp/commit/73b94a990bb91fd263dace4ccbaef6ff727a9637.patch)。

    ```
    wget -O eunit-stacktrace.patch https://github.com/erlang/otp/commit/73b94a990bb91fd263dace4ccbaef6ff727a9637.patch
    patch -p1 < eunit-stacktrace.patch 
    ```

3.  重新编译`eunit_lib.erl`。

    ```
    cd lib/eunit
    erlc -o ebin -I include src/eunit_lib.erl 
    ```

4.  将新的复制`eunit_lib.beam`到旧的（通常在下面的某个地方`/usr/local`）。

    ```
    ls /usr/local/lib/erlang/lib/eunit-2.2.2/ebin/
    # check that eunit_lib.beam is actually there
    sudo cp ebin/eunit_lib.beam /usr/local/lib/erlang/lib/eunit-2.2.2/ebin/ 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T09:42:23.663

问题似乎是 R15 附带的 eunit 版本不理解 R15 中新的堆栈跟踪格式。这已在 eunit 的开发版本中修复：github.com/richcarl/eunit

例如：

```
Eshell V5.10 (abort with ^G)
1> eunit:test(fun() -> (fun() -> exit(foo), ok end)() end).
erl_eval: expr...*failed*
in function erl_eval:do_apply/6 (erl_eval.erl, line 576)
in call from erl_eval:exprs/5 (erl_eval.erl, line 118)
**exit:foo 
```

我希望这将使它成为 OTP R15 的下一个版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T05:32:11.557

Eunit 已经很老了，虽然它由爱立信的 OTP 团队正式维护，但通常无人维护。Eunit 目前有吃掉堆栈跟踪的坏习惯，并且在异常中没有更新 R15 的行号。

我不会争辩说“这就是它应该如何工作”。任何健全的测试工具都不应该为您隐藏异常详细信息和行号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T23:06:57.640

我喜欢使用的一个技巧是`?debugVal(catch expr)`expr 是一个`begin end`块或对失败函数的调用。例如，`?debugVal(catch begin 1 = 2 end)`将在您的测试中输出堆栈跟踪。

# python - 将图像插入 Django 模板

> ID：10509241
> 
> 赞同：0
> 
> 时间：2012-05-09T02:53:00.337
> 
> 标签：python, django

我知道有很多关于 Django 模板图像的现有问题，但我似乎无法让我的工作。我目前在我的项目中有一个应用程序，并且有一个静态文件夹结构，看起来像

```
 djangoproject/appname/static/images/ 
```

在同一个 django app 的 templates 文件夹中，我有各种 HTML 文件，需要引用上面显示的文件夹中的图像。在我的`settings.py`文件夹中，我有

```
 STATIC_ROOT=''
    STATIC_URL = 'appname/static/' 
    STATICFILES_DIRS = ( 
    ) 
    TEMPLATE_CONTEXT_PROCESSORS = (
'django.core.context_processors.debug',
'django.core.context_processors.i18n',
'django.core.context_processors.media',
'django.core.context_processors.static',
'django.contrib.auth.context_processors.auth',
'django.contrib.messages.context_processors.messages', 
```

)

在我的模板文件中，我有

```
 <a href="AddTransaction.html"><img id="btnTransaction" src="{{ STATIC_URL }}images/btnTransaction.png"/></a> 
```

当我运行开发服务器时，它一直在寻找`appname/images/btnTransaction.png`图像。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:29:03.293

摆脱 appname 并更改为`STATIC_URL= '/static/'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:11:17.507

In the `STATIC_FILES_DIR` tuple, you need to have a string that is the **absolute path** to the static directory on your machine. So if you're *nix it would be `'/User/path/to/django/static/dir/'` or `'C:/path/to/django/static/dir/'` if you're on Windows.

`STATIC_URL`, like you see here, is whatever will be output in the HTML and is meant for the **absolute path** of an image relative to the browser. You could do `'http://127.0.0.1:8000/static/'` if you're running locally or something like `'http://mydomain.com/static/'` if in production or something like `'http://static.mydomain.com/static/'` if you have a CDN or just `'/static/'` to work for all (if you're using the same host for your static files and app).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T03:11:52.130

you want the path to the images to be in a *web* accessible location, something away from django and your app (unless you're adding access controls, then you'll need a separate function in your views to handle that). Thing is, the img tag's src is not pulling the image in when the template is rendered server side, but in the client and the client makes a separate request for the image. If the image can't be found by the url, then it won't get shown.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:28:26.013

而不是使用“静态”使用“媒体”

像这样

设置.py

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = '/Users/YOUR USERNAME/djcode/blankpage/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/' 
```

并在 urls.py

```
url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root':  settings.MEDIA_ROOT}), 
```

在您的模板中引用您的文件，如下所示

```
href="/media/styles/profile.css" 
```

# javascript - JavaScript 数学/循环动态创建行和列

> ID：10509244
> 
> 赞同：2
> 
> 时间：2012-05-09T02:53:22.737
> 
> 标签：javascript, math, loops

所以，我有一小段代码可以生成盒子的行和列，它们之间有空格。

它似乎工作正常；但是，当我将框的高度和宽度设置为 32 像素并将它们之间的空间设置为 8 像素时，框应该在的位置开始出现间隙。

如果我使用几乎任何其他数字，它们都可以工作，但我当然会把我的想法定在 32 和 8 上。

我想知道这是否是我循环创建盒子的方法，或者是否有一些我不明白的基础数学正在发生。

这是使用相关代码设置的 jsFiddle：

[http://jsfiddle.net/dondon/zMnuK/](http://jsfiddle.net/dondon/zMnuK/)

如果您将 JS 部分中的“间距”修改为 7 或 9，间隙就会消失。什么是 8（或 4）导致间隙出现？

任何输入表示赞赏！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:06:18.150

它与具有相同 id 的多个盒子有关，并且它们都设置了 css，因此它们最终位于完全相同的位置。例如，创建的第三个框的 x 位置（x 与您的循环顺序垂直）为 88px，y 位置为 8px。然后很晚在第三行中出现一个 y = 88px 和 x = 8px 的框。已达到，因此`'box' + x + y;`这两个框都是相同的。你不能有多个相同的元素`id`，所以在那之后任何事情都可能发生。

简单的解决方案是更改：

```
var boxid = "box"+x+y; 
```

至：

```
var boxid = "box"+x+'_'+y; 
```

[**更新了 JSFiddle**](http://jsfiddle.net/Paulpro/zMnuK/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:09:25.233

当您分配您的 boxid 值时，似乎存在混叠，而这仅发生在间距等于 8 的情况下。

最初你有：

```
var boxid = "box"+x+y; 
```

所以你可以有两个具有相同 id 的盒子

将其更改为：

```
var boxid = "box"+x+"_"+y; 
```

# android - Sqlite 原始查询

> ID：10509249
> 
> 赞同：0
> 
> 时间：2012-05-09T02:54:10.570
> 
> 标签：android, database, sqlite

我想做一个原始查询并根据一些字母数字值对结果进行排序。就像我有列 ItemId ，其中包含 A0001、A0002、A0036、B0085 等值。

```
String query="select S_PriceP,ItemId,ItemName from PDAProduct where ItemId<=A0001 and ItemId>=A0099 order by ItemId"; 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:08:31.610

您可以使用[rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)。

```
String query="select S_PriceP,ItemId,ItemName from PDAProduct where ItemId<=A0001 and 
ItemId>=A0099 order by ItemId"; 
Cursor objCursor = objSQLiteDatabase.rawQuery(query, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:38:04.263

根据您提供给我们的少量信息，我最好的答案是查看[SQLiteDatabase 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)……特别是，您需要其中一种`query`方法。如果您要发布一些您尝试过的代码，我们可能会找到您缺少的内容。

# ios - iOS AudioStreamer - 音乐没有完整播放

> ID：10509251
> 
> 赞同：0
> 
> 时间：2012-05-09T02:54:12.783
> 
> 标签：ios, audiostreamer

在最近的工作中，我正在使用 Matt Gallagher 的 AudioStreamer（[从这里下载](https://github.com/mattgallagher/AudioStreamer)）代码在我的应用程序中制作音乐播放器。

我托管的远程服务器中有一个 XML 文件。此 XML 文件包含歌曲名称和歌曲的 URL。我的应用程序获取歌曲的标题和 URL，并使用 Matt 的 AudioStreamer 播放这些歌曲，但问题是歌曲没有完整播放。在 30 秒到 1 分钟之间，它会停止播放并显示“未找到音频数据”弹出消息。

有没有人使用过 Matt 的音频流 API（我在这里使用 .mp3 文件）？谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:19:06.007

它可能是一个损坏的 MP3 文件 - 你能提供一个 MP3 的链接供我测试吗？我写了一个更高级的 AudioPlayer，灵感来自于 Matt 的 AudioStreamer（托管在这里：[https](https://code.google.com/p/audjustable/) ://code.google.com/p/audjustable/ ）。我有兴趣根据您的文件对其进行测试。

# javascript - Javascript iPad返回键事件？

> ID：10509253
> 
> 赞同：3
> 
> 时间：2012-05-09T02:54:25.730
> 
> 标签：javascript

在 JavaScript 页面上，如果用户使用回车键，我会弹出一个警报

```
if(evt.keyCode == 13){
    alert("Return Key Pressed");
} 
```

但是当我在 iPad 上按回车键时，该事件不会触发。我如何捕捉事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:02:02.003

如果您按回车键，iPad 键盘*确实会*使用键码 13触发事件。`keypress`这听起来像你有其他事情出错了

这是一个快速的 jsfiddle 验证：http: [//jsfiddle.net/359wG/](http://jsfiddle.net/359wG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-18T17:21:54.597

根据[https://api.jquery.com/keypress/](https://api.jquery.com/keypress/)

> 当浏览器注册键盘输入时，keypress 事件被发送到元素。这类似于 keydown 事件，不同之处在于修饰键和非打印键（如 Shift、Esc 和 delete）触发 keydown 事件，但不触发 keypress 事件。取决于平台和浏览器，可能会出现两个事件之间的其他差异。
> 
> 按键事件处理程序可以附加到任何元素，但该事件仅发送到具有焦点的元素。可聚焦元素可能因浏览器而异，但表单控件总能获得焦点，因此是此事件类型的合理候选者。

我将返回键侦听器移动到一个锚标记，它在 IPad 上被视为类似于表单控件的“可聚焦元素”。

# prolog - 序言：毕达哥拉斯三元组

> ID：10509258
> 
> 赞同：3
> 
> 时间：2012-05-09T02:55:16.170
> 
> 标签：prolog, pythagorean, failure-slice

我有这段代码，它使用一个上限变量 N，它应该终止于勾股三元组的 X 和 Y。然而，它只有在达到上限时才会冻结。不知道如何使用剪切来停止回溯。代码是：

```
is_int(0).
is_int(X) :- is_int(Y), X is Y+1.
minus(S,S,0).
minus(S,D1,D2) :- S>0, S1 is S-1, minus(S1,D1,D3), D2 is D3+1.

pythag(X,Y,Z,N) :- int_triple(X,Y,Z,N), Z*Z =:= X*X + Y*Y.

int_triple(X,Y,Z,N) :- is_int(S), minus(S,X,S1), X>0, X<N,
                                  minus(S1,Y,Z), Y>0, Y<N. 
```

将被称为，例如，

```
?- pythag(X,Y,Z,20). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:22:16.780

首先，让我们测试您的解决方案：

```
?- pythag(X,Y,Z,20)。
X = 4,
Y = 3，
Z = 5 ;
X = 3,
Y = 4,
Z = 5 ;
X = 8,
Y = 6，
Z = 10 ;
X = 6,
Y = 8,
Z = 10 ;
X = 12,
Y = 5,
Z = 13 ;
X = 5,
Y = 12,
Z = 13 ;
X = 12,
Y = 9,
Z = 15 ;
X = 9,
Y = 12,
Z = 15 ;
X = 15,
Y = 8,
Z = 17 ;
X = 8,
Y = 15,
Z = 17 ;
X = 16,
Y = 12,
Z = 20 ;
X = 12,
Y = 16，
Z = 20 ...

```

对我来说看起来很完美！所有答案都是正确的解决方案！...直到并包括最后一个解决方案。之后，您的程序循环。

在我们尝试找出问题之前，请稍等片刻：您必须非常耐心地通过 12 个（即：12 个）答案才找到那个循环。你认为这种方法也适用于更大的情况吗？在你放弃之前，你愿意看多少个答案？难道没有更简单的方法来找出问题吗？

这里有一个有趣的观察：找到的答案（几乎）与程序的循环无关！那就是：通过查看答案，您（通常 - 在这种情况下）对循环的实际原因一无所知！那么为什么不关闭所有答案并专注于相关部分！事实上，我们可以这样做：

```
?- pythag(X,Y,Z,20)，假的。
** 环形 **

```

现在，由于目标，所有答案都已被删除`false`。剩下的只是最终结果：要么终止，要么不终止，要么出现一些错误。没有其他的。这应该有助于我们对终止的观察——不再有令人眼花缭乱的答案在屏幕上滚动。请注意，这通常不能解决问题。毕竟，我们愿意等多久*？*1秒？1米？

未终止的实际原因可以通过查看相关**故障切片**来最好地理解。那是程序的一个片段，其不终止意味着整个程序的不终止。[有关更多详细信息，请参阅此答案](https://stackoverflow.com/questions/10139640/prolog-successor-notation-yields-incomplete-result-and-infinite-loop/10141181#10141181)。这是您的查询程序的相关失败片段`pythag(X,Y,Z,20), false`：

```
毕达格（X，Y，Z，N）：-
   int_triple(X,Y,Z,N), false ,
    Z*Z =:= X*X + Y*Y。

int_triple(X,Y,Z,N) :-
   is_int(S), false ,
    minus(S,X,S1), X>0, X<N ,
    minus(S1,Y,Z), Y>0, Y<N。

is_int(0) **:- 假**。
is_int(X) :-
   is_int(Y)，假，
   X 为 Y+1。

```

请注意，您的程序所剩无几。例如，实际的方程式已经消失（这或多或少是逻辑部分......）。不过，这个片段是相关的。只要您不更改该片段中的某些内容，问题就会持续存在！对于一个纯粹的单调程序，这是保证的，因为这个......

这是我的首选解决方案：它使用`length/2`and `between/3`，两个经常支持的[Prolog prologue](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#length)谓词。

```
pythag2(X,Y,Z,N) :-
   长度（_，N），
   在（1，N，X）之间，
   在（1，N，Y）之间，
   在（1，N，Z）之间，
   Z*Z =:= X*X + Y*Y。

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-31T21:06:01.080

我最近也在考虑寻找毕达哥拉斯三元组的 Prolog 解决方案。我想出了一个稍微不同的代码。假设我们有一个函数：

```
isqrt(a) = floor(sqrt(a)) 
```

然后枚举 x 和 y 并检查 x*x+y*y 是否是某个 z 的平方就足够了。即检查：

```
h = x*x+y*y, z = isqrt(h), z*z = h ? 
```

函数 iqrt 可以通过二分法实现。对于对称性破坏，我们可以在 x 之后枚举 y。假设 N = 99，结果代码为：

```
% between(+Integer, +Integer, -Integer)
between(Lo, Hi, _) :-
   Lo > Hi, !, fail.
between(Lo, _, Lo).
between(Lo, Hi, X) :-
   Lo2 is Lo+1, between(Lo2, Hi, X).

% bisect(+Integer, +Integer, +Integer, -Integer)
bisect(Lo, Hi, X, Y) :-
    Lo+1 < Hi, !,
    M is (Lo+Hi) // 2,
    S is M*M,
    (S > X -> bisect(Lo, M, X, Y);
     S < X -> bisect(M, Hi, X, Y);
     M = Y).
bisect(Lo, _, _, Lo).

% pythago(-List)
pythago(X) :-
   X = [A,B,C],
   between(1, 99, A),
   between(A, 99, B),
   H is A*A+B*B,
   bisect(0, H, H, C),
   C =< 99, H =:= C*C. 
```

应该有 50 个这样的毕达哥拉斯三元组，另见[Sloan 的 A046083](http://oeis.org/A046083)：

```
?- findall(-, pythago(_), L), length(L, N).
N = 52. 
```

人们可能想与以下 CLP(FD) 解决方案进行交叉检查。

```
:- use_module(library(clpfd)).

% pythago3(-List)
pythago3(X) :-
   X = [A,B,C],
   X ins 1..99,
   A*A+B*B #= C*C,
   A #=< B,
   label(X). 
```

它提供了相同数量的解决方案：

```
?- findall(-, pythago3(_), L), length(L, N).
N = 50. 
```

# html - 让浏览器记住网站不同部分的密码？

> ID：10509264
> 
> 赞同：1
> 
> 时间：2012-05-09T02:56:13.270
> 
> 标签：html, forms, autofill

我现在正在处理的网站有三种不同的登录表单，具体取决于您的身份。（管理部分，用户部分，不同的用户部分。）当然，这些有不同的用户名和密码。

作为该网站的开发人员，我经常使用不同的登录名在我们网站的不同部分之间切换。这会导致我的浏览器记住一个部分的密码并为其他部分自动填充密码。

如何让我的浏览器记住一个部分的一个用户/通行证组合和一个不同的部分？是否可以设计 HTML 表单（甚至 .htaccess）来导致这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:06:31.727

假设您正在谈论使用 Web 服务器安全登录，在每个部分设置不同的领域应该会强制浏览器向用户显示另一个弹出窗口。

在 Apache 中，这是通过`AuthName`

对于由浏览器自动填充的常规表单，您可以尝试的一件事是为用户名和密码字段指定不同的名称。如果这失败了，恐怕唯一的选择是完全禁用自动完成，您应该能够通过搜索找到许多参考。

# php - 解码 ISO 字符

> ID：10509268
> 
> 赞同：1
> 
> 时间：2012-05-09T02:57:21.797
> 
> 标签：php, javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:11:20.803

You're simply representing your characters in HTML entities. If you want them as "actual characters", you'll need to use an encoding that can represent those characters, ISO-8859 won't do. `htmlspecialchars_decode` doesn't work because it only decodes a handful of characters that are *special* in HTML and leaves other characters alone. You'll need [`html_entity_decode`](http://php.net/html_entity_decode) to decode all entities, and you'll need to provide it with a character set to decode to which can handle Chinese characters, UTF-8 being the obvious best choice:

```
$str = html_entity_decode($str, ENT_COMPAT, 'UTF-8'); 
```

You'll then need to make sure the browser knows that you're sending it UTF-8\. If you want to store the text in the database in UTF-8 as well (which you really should), best follow the guide [How to handle UTF-8 in a web app](http://kunststube.net/frontback/) which explains all the pitfalls.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:10:15.907

# iphone - screenshot image taken on Ratina display looks blurred with 1.0 scale, and too big with 0.0 scale

> ID：10509281
> 
> 赞同：0
> 
> 时间：2012-05-09T02:59:44.013
> 
> 标签：iphone, uiimage, blurry, quartz-core

I am using the following code to take a screenshot of one of my view controller, and then show it later in another view. For the UIGraphicsBeginImageContextWithOptions method, if feed it 1.0 as scale, the result image would looked blurry; but if give it 0.0 as scale, the result image would be big than the screen and would can see partial of it when show in another view. Is there a way to fix this?

```
CGSize imageSize = [[UIScreen mainScreen] bounds].size;
if (NULL != UIGraphicsBeginImageContextWithOptions) {
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 1.0);
} else {
    UIGraphicsBeginImageContext(imageSize);
}

[_displayViewController.view.layer renderInContext:UIGraphicsGetCurrentContext()];

// Retrieve the screenshot image
UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:28:15.337

实际上，如果我正在使用

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0); 
```

图像看起来很清晰，但是此屏幕截图仅涵盖屏幕上显示的内容，而不包括隐藏在屏幕外的内容。

如果我将大小更改为 UIView 的大小，我也会遇到上述问题。

# clojure - Clojure as a first programming language?

> ID：10509283
> 
> 赞同：2
> 
> 时间：2012-05-09T03:00:14.697
> 
> 标签：clojure, jvm

Thanks for taking the time to read. I’m interested in trying out Clojure for my first programming language--at least, the first programming language in which I intend to commit myself to becoming proficient.

# c# - 正则表达式替换 Facebook 网址

> ID：10509284
> 
> 赞同：0
> 
> 时间：2012-05-09T03:00:22.637
> 
> 标签：c#, regex

我正在使用 C# 并想从

```
http://www.facebook.com/pages/somepagename/139629086070406 
```

到

```
https://graph.facebook.com/139629086070406/picture 
```

使用什么模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:04:41.733

你真的只想要数字`139629086070406`。

尝试搜索`\d+$`并替换为`https://graph.facebook.com/\1/picture`.

请注意，这是非常脆弱的。如果 URL 看起来与描述的不完全一样 - 即如果它最后有 GET 参数 - 它将会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:08:06.817

```
string subjectString = @"http://www.facebook.com/pages/somepagename/139629086070406";    
string resultString = Regex.Replace(subjectString, @"http://www.facebook.com/pages/.+?/(\d+)", "https://graph.facebook.com/$1/picture", RegexOptions.IgnoreCase); 
```

# bash - bash 命令替换：在单引号中查找带有通配符的命令

> ID：10509290
> 
> 赞同：1
> 
> 时间：2012-05-09T03:01:37.760
> 
> 标签：bash, quotes, command-substitution

我想动态构造一个“查找”命令并查看它是否返回任何内容。

这是最小化的例子。在包含文件的目录中，

```
find . -name '*' 
```

当然返回文件。但

```
VAR="find . -name '*'"
$VAR 
```

什么都不返回。看起来像是引号解释的问题。但为什么？

（实际情况是我想查看是否存在带有某个前缀的文件。所以我打算使用`-name '${MYPREFIX}*'`，捕获其中的输出`$()`，并测试生成的字符串是否为空。）

如果这是微不足道的，请道歉。我确实花时间找到了答案，但我发现的所有案例都有些不同。通常，问题是在 find 命令应该执行此操作时扩展通配符的 shell。在这里，shell 没有做任何过早的扩展，但 find 也没有，可能是因为 find 接收文字引号？感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:05:20.563

```
eval $VAR 
```

`eval`会将 的值重新解释为`$VAR`带有参数的命令。

小心：`eval`是一种强大但危险的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:52:45.877

我建议`eval`尽可能不要使用。在这种情况下，如果您确实需要在执行命令之前将命令存储在变量中，我建议使用数组，然后将其调用为`"${cmd_array[@]}"`：

```
var=(find . -name "${prefix}*")  # This stores the elements of the command as an array
result=$("${var[@]}")  # This executes the command and stores its output in $result 
```

请注意，您还可以动态构造 find 命令：

```
patterns=()  # start with an empty list of patterns
for prefix in $prefix_list; do
    patterns+=(-o -name "${prefix}*")  # add each prefix to a list of find patterns
done
patterns=("${patterns[@]:1}") # Use array slicing to remove the first "-o"
result=$(find . "${patterns[@]}") 
```

根据您使用它的方式，将 find 命令包装在 bash 函数中也可能会有所帮助：

```
find_prefix() {
    find . -name "${1}*"
}
result=$(find_prefix "$prefix") 
```

# python - Python 继承。为什么这么乱？

> ID：10509293
> 
> 赞同：4
> 
> 时间：2012-05-09T03:01:49.470
> 
> 标签：python, syntax

> **可能重复：**
> [为什么不自动调用Python 的超类**init方法？**](https://stackoverflow.com/questions/3782827/why-arent-pythons-superclass-init-methods-automatically-invoked)

例如：

```
class Pet(object):

    def __init__(self, name, species):
       self.name = name
       self.species = species

    def getName(self):
     return self.name

    def getSpecies(self):
     return self.species

    def __str__(self):
     return "%s is a %s" % (self.name, self.species)

class Dog(Pet):

   def __init__(self, name, chases_cats):
      Pet.__init__(self, name, "Dog")
      self.chases_cats = chases_cats

   def chasesCats(self):
     return self.chases_cats 
```

如您所见， Dog 继承自 pet。我完全理解代码。但是为什么我们必须在 Dog 类中调用宠物的 init 呢？为什么仅仅在狗类的第一行中调用它就足够了（类 Dog(Pet) ）？它似乎只会创建更混乱的代码。对我来说，这有点扼杀了 Python 中的继承点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T03:14:58.550

让语言强制超类在之前或之后初始化意味着您失去了功能。子类可能依赖于先运行超类的初始化，反之亦然。

此外，它无法知道要传递哪些参数——子类决定将哪些值传递给初始化程序，这为自动传递所有参数提供了更大的灵活性。

初始化超类的另一种方法是使用[super](http://docs.python.org/library/functions.html#super) ，尽管这实际上会通过在对象的（方法解析顺序）`self`中查找来动态初始化超类`__mro__`

在python 2中：

```
super(self, Dog).__init__(self, name, "Dog") 
```

在 python 3 中，您可以进一步减少语法，并避免重复自己：

```
super().__init__(self, name, "Dog") 
```

**编辑**：

由于您实际上并没有使用`name`传递给 dog 的参数，因此您可以通过在初始化程序中接受任意关键字和位置参数`Dog`并将它们传递到初始化链上来进一步减少一些语法：

```
class Dog(Pet):

   def __init__(self, chases_cats, *args, **kwargs):
      Pet.__init__(self, *args, species="Dog", **kwargs)
      self.chases_cats = chases_cats

class Pet(object):

    def __init__(self, name, species, *args, **kwargs):
       self.name = name
       self.species = species 
```

在您的场景中，初始化程序可能足够简单以至于不需要它，但是了解何时有更多参数和/或更深的类层次结构很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T03:31:07.520

您可以像这样使物种成为类属性

```
class Pet(object):
    species = None

    def __init__(self, name):
        self.name = name

    def getName(self):
        return self.name

    def getSpecies(self):
        return self.species

    def __str__(self):
        return "%s is a %s" % (self.name, self.species)

class Dog(Pet):
    species = "Dog"

    def __init__(self, name, chases_cats):
        Pet.__init__(self, name)
        self.chases_cats = chases_cats

    def chasesCats(self):
        return self.chases_cats 
```

# php - 按多个条件对 MySQL 查询结果进行分组

> ID：10509298
> 
> 赞同：0
> 
> 时间：2012-05-09T03:02:26.450
> 
> 标签：php, mysql, grouping

我有一个`referrers`包含三列的简单表：

```
Referrer    //string name of partner
TimeOfVisit //timestamp
SessionID   //(unique id only used when joining with sales data for conversion) 
```

我想检索数据进行分析，并呈现一个堆积柱形图，其中每天有一列显示访问者的引荐来源。

这是我设法放在一起的查询：

```
SELECT
    DATE(TimeOfVisit) AS Date,
    Referrer,
    COUNT(Referrer) AS VisitorCount
FROM referrers
GROUP BY CONCAT(DATE(time_of_visit), referrer) 
```

它确实给了我正在寻找的数据：

```
Array
(
    [0] => Array
        (
            [Date] => 2012-04-01
            [Referrer] => adwords
            [VisitorCount] => 3
        )

    [1] => Array
        (
            [Date] => 2012-04-01
            [Referrer] => facebook
            [VisitorCount] => 5
        )

    [2] => Array
        (
            [Date] => 2012-04-02
            [Referrer] => adwords
            [VisitorCount] => 6
        )
... 
```

我有两个问题：

1.  即使我能感觉到，通过连接字符串进行分组是可怕的，它只是感觉不对。
2.  解析结果的 php 脚本总是需要知道当前引用者的完整列表，因此它可以分配 0 值，以防在给定日期没有来自引用者的点击。至少可以说不是很优雅。

解决这个问题最有效的方法是什么？它实际上只能在 MySQL 中解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:25:17.110

你可以`GROUP BY Date, Referrer`

MySQL 结果将有“差距”，在此期间某些引荐来源将有 0 次点击。

假设您正在为引荐来源着色（不确定您有多少）并且您希望每个引荐来源具有一致的颜色，您可以计算一个数字哈希并将其用作预定义颜色数组的索引。

不知道我是否已经解决了你所有的问题，或者你是否理解了我的所有答案，但只是大喊:)

# java - windows上带有通配符的java类路径：末尾需要分号

> ID：10509299
> 
> 赞同：1
> 
> 时间：2012-05-09T03:02:29.423
> 
> 标签：java, windows, classpath

我一直在尝试在类路径中使用通配符，但失败了：

```
javac -cp .\* LoginUtil.java MySample.java 
```

但因此错误而失败：

```
javac: invalid flag: .\jackson-all-1.9.6.jar
Usage: javac <options> <source files>
use -help for a list of possible options 
```

".*" 的行为相同

```
javac -cp ".\*" LoginUtil.java MySample.java 
```

但是，在 cp 后插入分号可以解决问题。

```
javac -cp .\*; LoginUtil.java MySample.java 
```

我找不到这个记录。有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:37:51.380

在星号周围使用引号，如下所示：“*”

另请参阅此答案： [Calling java with wildcards in classpath failed](https://stackoverflow.com/questions/6179281/calling-java-with-wildcards-in-classpath-fails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:48:58.947

[以下](http://javahowto.blogspot.in/2006/07/jdk-6-supports-in-classpath-but-be.html)是关于使用通配符时会发生什么以及 javac 抛出无效标志错误的一些解释。

# c++ - 通过 QTextCursor 修改 QTextEdit 之后的 Qt 程序崩溃

> ID：10509305
> 
> 赞同：0
> 
> 时间：2012-05-09T03:03:34.757
> 
> 标签：c++, qt4

我想在按下菜单按钮时缩进 QPlainTextEdit 的文本。按下按钮时，我询问是否有选择，如果没有，我只是缩进当前行，如果有，我想缩进选择中的所有行。现在代码适用于单行，但是当缩进选择时就像行的最后一部分消失了。例如，如果我有这行: `"Artificial Intelligence stands no chance against Natural Stupidity."`，在缩进之后就是:`" Artificial Intelligence stands no chance against Natural Stupidi`之后，如果我开始在该行中书写，那么当文本到达现在是句子的结尾时，它就会开始消失。此外，如果我单击或将光标放在该行中消失的句子部分之后，程序会崩溃。

编码：

```
void MainWindow::on_action_Indent_triggered()
{
    Document* doc = dynamic_cast<Document*>(ui->tabsManager->currentWidget());
    QTextCursor cursor = doc->textArea->textCursor();
    cursor.beginEditBlock();

    // If ther is no text selected...
    if (cursor.selection().isEmpty()) {
        cursor.movePosition(QTextCursor::StartOfLine);
        cursor.insertText(this->tabLength);
    } else { // If the selection is not empty...
        cursor.beginEditBlock();

        // Save selection start and end
        int start = cursor.selectionStart();
        int end = cursor.selectionEnd();
        cursor.clearSelection();

        // Set end to the end of line of the selected line
        cursor.setPosition(end);
        cursor.movePosition(QTextCursor::EndOfLine);
        end = cursor.position();

        // Set cursor to the start of the first selected line
        cursor.setPosition(start);
        cursor.movePosition(QTextCursor::StartOfLine);
        start = cursor.position();

        // While still in the selection, add "    " to the start of each line
        do {
            cursor.movePosition(QTextCursor::StartOfLine);
            cursor.insertText(this->tabLength);
            end += this->tabLength.count();
            cursor.movePosition(QTextCursor::EndOfLine);
        } while (cursor.position() < end && cursor.movePosition(QTextCursor::Down));

        // Select the changed areatabLenght
        cursor.clearSelection();
        cursor.setPosition(start);
        while (cursor.position() < end)
            cursor.movePosition(QTextCursor::NextCharacter, QTextCursor::KeepAnchor);
    }
    // Set the cursor in the GUI
    doc->textArea->setTextCursor(cursor);
    cursor.endEditBlock();
} 
```

Document 是一个 Class，textArea 是一个 QTextPlainEdit。this->tabLength 是一个值为 " " 的 QString

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T00:41:48.813

问题很简单：你打电话`beginEditBlock()`的次数比你打电话的次数多`endEditBlock()`。之后立即删除`beginEditBlock()`呼叫`} else {`。我可以重现这个问题，并且匹配的`[begin|end]EditBlock()`调用确实可以解决它。

下面是一个独立的例子。

```
# indenttest.pro
CONFIG += qt gui
SOURCES += indenttest.cpp 
```

```
// indenttest.cpp
#include <cmath>
#include <QWidget>
#include <QVBoxLayout>
#include <QPlainTextEdit>
#include <QPushButton>
#include <QTextCursor>
#include <QTextDocumentFragment>
#include <QApplication>

//

class QPlainTextEdit;
class MainWindow : public QWidget
{
    Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);

public slots:
    void on_indent();

private:
    const QString tabLength;
    QPlainTextEdit * textArea;
};

//

MainWindow::MainWindow(QWidget *parent) :
    QWidget(parent),
    tabLength("    ")
{
    QVBoxLayout * layout = new QVBoxLayout(this);
    QPushButton * btn = new QPushButton("Indent", this);
    layout->addWidget(btn);
    textArea = new QPlainTextEdit(this);
    textArea->setPlainText("foo\nbar\nbaz\nbat");
    layout->addWidget(textArea);
    connect(btn, SIGNAL(clicked()), SLOT(on_indent()));

}

void MainWindow::on_indent()
{
    QTextCursor cursor = textArea->textCursor();
    cursor.beginEditBlock();

    // If ther is no text selected...
    if (cursor.selection().isEmpty()) {
        cursor.movePosition(QTextCursor::StartOfLine);
        cursor.insertText(this->tabLength);
    } else { // If the selection is not empty...
        //cursor.beginEditBlock();

        // Save selection start and end
        int start = cursor.selectionStart();
        int end = cursor.selectionEnd();
        //cursor.clearSelection();

        // Set end to the end of line of the selected line
        cursor.setPosition(end);
        cursor.movePosition(QTextCursor::EndOfLine);
        end = cursor.position();

        // Set cursor to the start of the first selected line
        cursor.setPosition(start);
        cursor.movePosition(QTextCursor::StartOfLine);
        start = cursor.position();

        // While still in the selection, add "    " to the start of each line
        do {
            cursor.movePosition(QTextCursor::StartOfLine);
            cursor.insertText(this->tabLength);
            end += this->tabLength.count();
            cursor.movePosition(QTextCursor::EndOfLine);
        } while (cursor.position() < end && cursor.movePosition(QTextCursor::Down));

        // Select the changed areatabLenght
        cursor.clearSelection();
        cursor.setPosition(start);
        while (cursor.position() < end)
            cursor.movePosition(QTextCursor::NextCharacter, QTextCursor::KeepAnchor);
    }
    // Set the cursor in the GUI
    textArea->setTextCursor(cursor);
    cursor.endEditBlock();
}

int main(int argc, char** argv)
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
}

#include "indenttest.moc" 
```

# android - Android，如何将 ListView 项目分成三部分？

> ID：10509306
> 
> 赞同：3
> 
> 时间：2012-05-09T03:03:41.317
> 
> 标签：android, listview, split

在我的活动中，我有三个列表，每个列表都有三个项目。以这种方式测试后（请参阅：[Android，如何将 ScrollView 添加到具有一些列表项的屏幕中？](https://stackoverflow.com/questions/10496804/android-how-to-add-scrollview-into-screen-which-has-some-list-items/10497011#10497011)），我发现当您在活动中有一些列表时，它不可能滚动屏幕。另外，我发现了这个答案（[在一个活动中添加多个列表视图](https://stackoverflow.com/questions/6404413/add-multiple-listview-in-one-activity?answertab=votes#tab-top)），它将屏幕分成三个部分，因此，我没有足够的空间来显示所有项目并且屏幕也不能滚动。

一个愚蠢的解决方案是为每个项目创建 xml 并将其放入活动的 xml 布局中。虽然它有效，但我必须复制/粘贴这么多行代码。

更好的方法是使用适配器，因此，在我的下一次尝试中，我可以将另外两个列表的结果添加到我的第一个列表中，然后将结果发送到适配器类。因此，适配器将显示列表中的所有项目。虽然，它解决了我的屏幕滚动问题（此时屏幕滚动=列表滚动），但我需要在每三个项目的顶部有标题。

是否可以告诉适配器在每三项列表之后添加例如 header.xml？

希望解释清楚！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:13:22.953

main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ListView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawSelectorOnTop="true"
/> 
```

header.xml

```
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center" android:scrollbars="none"
style="?android:attr/listSeparatorTextViewStyle" /> 
```

Now The java File code Given below.

SectionedAdapter .java

```
package com.android.listview;

import android.view.View;
import android.view.ViewGroup;
import android.widget.Adapter;
import android.widget.BaseAdapter;
import java.util.ArrayList;
import java.util.List;

abstract public class SectionedAdapter extends BaseAdapter {
abstract protected View getHeaderView(String caption, int index,
View convertView, ViewGroup parent);

private List
sections = new ArrayList
();
private static int TYPE_SECTION_HEADER = 1;

public SectionedAdapter() {
super();
}

public void addSection(String caption, Adapter adapter) {
sections.add(new Section(caption, adapter));
}

public Object getItem(int position) {
for (Section section : this.sections) {
if (position == 0) {
return (section);
}

int size = section.adapter.getCount() + 1;

if (position <>
return (section.adapter.getItem(position - 1));
}

position -= size;
}

return (null);
}

public int getCount() {
int total = 0;

for (Section section : this.sections) {
total += section.adapter.getCount() + 1; // add one for header
}

return (total);
}

public int getViewTypeCount() {
int total = 1; // one for the header, plus those from sections

for (Section section : this.sections) {
total += section.adapter.getViewTypeCount();
}

return (total);
}

public int getItemViewType(int position) {
int typeOffset = TYPE_SECTION_HEADER + 1; // start counting from here

for (Section section : this.sections) {
if (position == 0) {
return (TYPE_SECTION_HEADER);
}

int size = section.adapter.getCount() + 1;

if (position <>
return (typeOffset + section.adapter
.getItemViewType(position - 1));
}

position -= size;
typeOffset += section.adapter.getViewTypeCount();
}

return (-1);
}

public boolean areAllItemsSelectable() {
return (false);
}

public boolean isEnabled(int position) {
return (getItemViewType(position) != TYPE_SECTION_HEADER);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
int sectionIndex = 0;

for (Section section : this.sections) {
if (position == 0) {
return (getHeaderView(section.caption, sectionIndex,
convertView, parent));
}

int size = section.adapter.getCount() + 1;

if (position <>
return (section.adapter.getView(position - 1, convertView,
parent));
}

position -= size;
sectionIndex++;
}

return (null);
}

@Override
public long getItemId(int position) {
return (position);
}

class Section {
String caption;
Adapter adapter;

Section(String caption, Adapter adapter) {
this.caption = caption;
this.adapter = adapter;
}
}
} 
```

Selection.java

```
package com.commonsware.android.listview;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class SectionedDemo extends ListActivity {
private static String[] items = { "US", "UK", "CANADA", "JAPAN", "SINGAPORE",
"INDIA", "CHINA" };

private static String[] Sect = { "GOOGLE", "FACEBOOK","DELL" };

private static String[] Doc = { "FRONT", "TOP","BACK" };

@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);
setContentView(R.layout.main);

adapter.addSection("step 1", new ArrayAdapter(this,
android.R.layout.simple_list_item_1, items));

adapter.addSection("Step 2", new ArrayAdapter(this,
android.R.layout.simple_list_item_1, Sect));

adapter.addSection("Step 3", new ArrayAdapter(this,
android.R.layout.simple_list_item_1, Doc));

setListAdapter(adapter);
}

SectionedAdapter adapter = new SectionedAdapter() {
protected View getHeaderView(String caption, int index,
View convertView, ViewGroup parent) {
TextView result = (TextView) convertView;

if (convertView == null) {
result = (TextView) getLayoutInflater().inflate(
R.layout.header, null);
}

result.setText(caption);

return (result);
}
};
} 
```

[LINK](http://blogingtutorials.blogspot.in/2010/11/android-listview-header-two-or-more-in.html) [LINK](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)

# ios - 如何在 GLKit 中使用自定义着色器

> ID：10509309
> 
> 赞同：4
> 
> 时间：2012-05-09T03:04:06.277
> 
> 标签：ios, opengl-es, glkit

有谁知道如何在 GLKit 中使用自定义着色器？不使用 GLBaseEffect。

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:36:40.873

据我所知，您可以像在非 GLKit OpenGL ES 2.0 应用程序中一样设置和使用着色器程序。我目前更喜欢使用 Jeff LaMarche 的 GLProgram 包装类，他在[本教程](http://iphonedevelopment.blogspot.com/2010/11/opengl-es-20-for-ios-chapter-4.html)中提供了该类（代码应该链接在该页面的顶部），而不是每次都重写所有样板代码来编译和链接着色器。

我在[这个答案](https://stackoverflow.com/a/6169100/19679)中展示了一些标准用法。你仍然需要设置你的属性和制服，但是一旦你这样做了，你只需使用程序并在你的 GLKView 中绘制你的几何图形。

GLKit 基本效果似乎以类似的方式作为包装器提供给某些标准着色器程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T03:52:25.353

不是我的代码，但我发现这很有帮助。它甚至打印出着色器的错误。

```
func compileShader(shaderName: String?, shaderType: GLenum) -> GLuint {

    let shaderPath = NSBundle.mainBundle().pathForResource(shaderName!, ofType: "glsl")
    var error: NSError? = nil
    var shaderString: NSString?
    do {
        shaderString = try NSString(contentsOfFile: shaderPath!, encoding: NSUTF8StringEncoding)
    } catch let error1 as NSError {
        error = error1
        shaderString = nil
    }
    var shaderS = shaderString! as String
    shaderS += "\n"
    shaderString = shaderS as NSString

    if shaderString == nil {
        print("Failed to set contents shader of shader file!")
    }

    let shaderHandle: GLuint = glCreateShader(shaderType)

    //var shaderStringUTF8 = shaderString!.utf8
    var shaderStringUTF8 = shaderString!.UTF8String
    //var shaderStringLength: GLint = GLint() // LOL
    var shaderStringLength: GLint = GLint(shaderString!.length)
    glShaderSource(shaderHandle, 1, &shaderStringUTF8, &shaderStringLength)
    //the 2 is number of uniforms
    glCompileShader(shaderHandle)

    var compileSuccess: GLint = GLint()

    glGetShaderiv(shaderHandle, GLenum(GL_COMPILE_STATUS), &compileSuccess)

    if compileSuccess == GL_FALSE {
        print("Failed to compile shader \(shaderName!)!")
        var value: GLint = 0
        glGetShaderiv(shaderHandle, GLenum(GL_INFO_LOG_LENGTH), &value)
        var infoLog: [GLchar] = [GLchar](count: Int(value), repeatedValue: 0)
        var infoLogLength: GLsizei = 0
        glGetShaderInfoLog(shaderHandle, value, &infoLogLength, &infoLog)
        let s = NSString(bytes: infoLog, length: Int(infoLogLength), encoding: NSASCIIStringEncoding)
        print(s)

        exit(1)
    }

    return shaderHandle

}

// function compiles vertex and fragment shaders into program. Returns program handle
func compileShaders() -> GLuint {

    let vertexShader: GLuint = self.compileShader("SimpleVertex", shaderType: GLenum(GL_VERTEX_SHADER))
    let fragmentShader: GLuint = self.compileShader("SimpleFragment", shaderType: GLenum(GL_FRAGMENT_SHADER))

    let programHandle: GLuint = glCreateProgram()
    glAttachShader(programHandle, vertexShader)
    glAttachShader(programHandle, fragmentShader)
    glLinkProgram(programHandle)

    var linkSuccess: GLint = GLint()
    glGetProgramiv(programHandle, GLenum(GL_LINK_STATUS), &linkSuccess)
    if linkSuccess == GL_FALSE {
        print("Failed to create shader program!")

        var value: GLint = 0
        glGetProgramiv(programHandle, GLenum(GL_INFO_LOG_LENGTH), &value)
        var infoLog: [GLchar] = [GLchar](count: Int(value), repeatedValue: 0)
        var infoLogLength: GLsizei = 0
        glGetProgramInfoLog(programHandle, value, &infoLogLength, &infoLog)
        let s = NSString(bytes: infoLog, length: Int(infoLogLength), encoding: NSASCIIStringEncoding)
        print(s)

        exit(1)
    }

    glUseProgram(programHandle)

    self.positionSlot = GLuint(glGetAttribLocation(programHandle, "aVertexPosition"))
    //self.colorSlot =    GLuint(glGetAttribLocation(programHandle, "SourceColor"))
    self.normalSlot =   GLuint(glGetAttribLocation(programHandle, "aVertexNormal"))
    glEnableVertexAttribArray(self.positionSlot)
   // glEnableVertexAttribArray(self.colorSlot)
    glEnableVertexAttribArray(self.normalSlot)

    return programHandle
} 
```

# java - 如何将 XML 转换为 MS Doc？

> ID：10509310
> 
> 赞同：0
> 
> 时间：2012-05-09T03:04:13.017
> 
> 标签：java, .net, xml, docx

我有一些 XML，我需要将它们转换为 Microsoft Office Document(2007)。最好和最快的方法是什么？我可以使用 C# 或 Java 来完成。我见过那个尖顶。可以，但是太贵了，有其他的吗？微软提供什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:11:30.180

您可以使用 XSLT - Christian Nagel 的 OneNotes 上[有一个很好的示例。](http://weblogs.asp.net/cnagel/archive/2004/09/25/234188.aspx)

采用这个 XML

```
 <?xml version="1.0" encoding="utf-8" ?>
    <Courses>
     <Course Number="MS-2524">
      <Title>XML Web Services Programming</Title>
     </Course>
     <Course Number="MS-2124">
      <Title>C# Programming</Title>
     </Course>
     <Course Number="NET2">
      <Title>.NET 2.0 Early Adapter</Title>
     </Course>
    </Courses> 
```

并使用此 XML 样式表：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
 <xsl:output method="xml" indent="yes" />
 <xsl:template match="/">
  <xsl:processing-instruction name="mso-application">
   <xsl:text>progid="Word.Document"</xsl:text>
  </xsl:processing-instruction>
  <w:wordDocument>
   <w:body>
     <xsl:apply-templates select="Courses/Course" />
   </w:body>
  </w:wordDocument>
 </xsl:template>
 <xsl:template match="Course">
    <w:p>
     <w:r>
      <w:t>
       <xsl:value-of select="@Number" />, <xsl:value-of select="Title"/>
      </w:t>
     </w:r>
    </w:p>
 </xsl:template>
</xsl:stylesheet> 
```

可以为 2003 生成这个 MS Word Doc。

```
<?xml version="1.0" encoding="utf-8"?>
<?mso-application progid="Word.Document"?>
<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
  <w:body>
    <w:p>
      <w:r>
        <w:t>MS-2524, XML Web Services Programming</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>MS-2124, C# Programming</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>NET2, .NET 2.0 Early Adapter</w:t>
      </w:r>
    </w:p>
  </w:body>
</w:wordDocument> 
```

要在代码中执行此操作，请参阅此答案：[https ://stackoverflow.com/a/34095/30225](https://stackoverflow.com/a/34095/30225)

您需要做的是使用 Office 2007 docx 的等效项，或者只生成 2003 文档并让人们在 2007 年打开它。

# bash - 在 shell 脚本中重新分配全局变量

> ID：10509313
> 
> 赞同：2
> 
> 时间：2012-05-09T03:04:31.630
> 
> 标签：bash, shell, scripting

我是 shell 脚本的新手，我需要一些关于以下问题的帮助：

我有脚本。它有一个全局变量，定义如下：

```
ARCHIVE_USER=user1 
```

然后，在一种方法中，我正在更改这些变量的值：

```
test_function(){

  ARCHIVE_USER=user2
  test_function2()
}

test_function2(){
  echo ARCHIVE_USER
} 
```

我想`test_function2`打印“user2”而不是“user1”，因为在`test_function`我已将变量值重命名为“user2”，但是当我运行它时，它总是给我“user1”作为输出。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:12:58.867

您应该在同一环境中定义这些功能。

如果将它们放在不同的脚本中，并通过 and 运行`/path/to/script_1.sh`它们`/path/to/script_2`。它们不会相互影响。因为它们运行在不同的环境中。

你应该阅读更多关于`subshell/subprocess`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:14:40.750

该脚本按您的预期工作，即打印“B”。

```
#!/usr/bin/bash

TEST=A

test_a()
{ 
    TEST=B
    test_b
}

test_b()
{
    echo $TEST
}

test_a 
```

所以，我的问题是你如何调用你的 test_function()？

# powerbuilder - Power Builder - 数据窗口分页

> ID：10509315
> 
> 赞同：1
> 
> 时间：2012-05-09T03:04:38.330
> 
> 标签：powerbuilder, datawindow

我直接问问题，DataWindow 控件有分页吗？还是我们必须编写自己的分页代码？谁能提供有关数据窗口分页的信息。

我正在使用 PB 版本 9.0。什么版本的分页可用？

PS。我不懂 PB，但现在有一个 PB 项目

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:49:03.790

是的，DataWindows 有分页功能。您可以有页眉和页脚。页面长度会有所不同，具体取决于您是在谈论窗口上的控件（控件的大小）还是打印（物理打印页面的大小，您可以在设计时或动态设置）。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:43:57.173

除了 Terry 所说的之外，除非您`PrinterName`在 DataWindow 属性中进行了设置，否则 DataWindow 将使用默认打印机来打印页面尺寸。在 DataWindow 属性的帮助中搜索`Print`您可以设置以控制 DataWindow 打印方式的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:10:54.590

正如特里所说，自 PB 可能 1.0 以来，Datawindow 就有分页。我从 PB 2.0 到 12.5 都看到了它。但是，如果您正在寻找如何为 First、Prev、next 和 Last 提供接口，那么您需要在 Window 或 DataWindow 对象上放置按钮，并放置一些一行代码，如下所示。

如果是窗口命令按钮，您需要使用以下代码： 首先：

```
dw_1.ScrollToRow(1) 
```

上一篇：

```
dw_1.ScrollPriorPage() 
```

下一个：

```
dw_1.scrollNextPage() 
```

最后的：

```
dw_1.ScrollToRow(dw_1.rowcount()) 
```

如果使用数据窗口对象按钮，您可以从下拉选项中选择适当的操作。所有此类操作都可作为简单选项使用。

使用此信息，合并 Terry 提供的用于渲染显示的信息。如果您在屏幕上显示数据，则 DataWindow 控件使用数据窗口控件尺寸来呈现分页，即计算页数等。如果您编写以下代码，它将根据默认打印机的页面设置或打印机设置为当前打印机。

```
dw_1.Modify("datawindow.print.preview=yes") 
```

要设置当前选择的打印机，请使用以下代码：

```
PrintSetup() 
```

干杯!

# iphone - 使用 UIScrollView 时我无法触摸图像

> ID：10509317
> 
> 赞同：1
> 
> 时间：2012-05-09T03:04:43.950
> 
> 标签：iphone, objective-c, uiscrollview

我使用 UIScrollView 来显示一系列`UIImageView`（`UIImageView`添加为子视图`scrollview`），问题是我已经重写了方法`UIImageView`：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

但是当我点击图片时，该方法没有被调用，似乎图片没有收到点击事件。确切的原因是什么？我怎样才能解决这个问题？（我已经启用了 UIImageView 的 ExclusiveTouch 和所有视图的 User Interavtion）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:07:43.520

将 UIImageView 的`exclusiveTouch`和`userInteractionEnabled`属性设置为并重`YES`试。我发现滚动视图的子视图只接收一些事件或不接收事件，并且设置 ExclusiveTouch 允许视图立即声明它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:10:16.657

set

```
imageView.userInteractionEnabled = YES; 
```

and if you just want a tap event for the imageview

just use the **UITapGestureRecognizer**

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];
[imageView addGestureRecognizer:tap]; 
```

then you must implement the method

```
- (void) tap:(UITapGestureRecognizer*)gesture
{
    UIImageView *v = gesture.view;// that your ImageView tapped
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:55:01.520

imageView.userInteractionEnabled = 否；

# php - 将表单数据发布到 DNN 中的 html 表

> ID：10509318
> 
> 赞同：0
> 
> 时间：2012-05-09T03:04:50.033
> 
> 标签：php, javascript, html, forms, dotnetnuke

我需要你的帮助

我在 DNN 站点中有两个页面。1是表格，2是html表格。

我的问题是。是否可以从第 1 页获取数据并将其发送到 DNN 站点中第 2 页的表格？如果是这样，您知道我在哪里可以找到有关如何执行此操作的教程吗？

期待您的回复。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:51:57.507

如果我理解你的话，答案是肯定的。（需要DNN模块开发）

```
NavigateUrl(); 
```

您可以在此方法中传递 TabID 以导航到另一个页面。

将帮助您实现目标。您可以将字符串数组作为参数添加到此方法中。在第 2 页上，您可以使用以下代码读出您的参数：

```
Page.Request[""]; 
```

输入命名参数的字符串。这是将字符串从 page1 传输到 page2 的好方法。

如果您想传输大对象或其他东西，我建议您应该使用数据库或仅传输可以在数据库中读取信息的字符串。

以下链接可以帮助您，但请注意这是一个非常古老的状态（我认为为 DNN4 创建了大约 5 年）。我不确定此链接中的所有内容是否正常工作。

[DotNetNuke 4 NavigateURL 示例](http://www.adefwebserver.com/dotnetnukehelp/NavigateURL/)

希望这可以帮助。最好的问候，没有人。

# asp.net-mvc - Razor 中的嵌套布局是否很慢？

> ID：10509319
> 
> 赞同：3
> 
> 时间：2012-05-09T03:04:55.353
> 
> 标签：asp.net-mvc, performance, razor

我有一个非常直接的嵌套布局。

*   _Layout 定义了所有全局的东西。
    *   网站.css
    *   jQuery
    *   基础 HTML
*   _2ColLayout 就是这样做的。使 _Layout 成为 2Col 设计

当我使用 _Layout 时，页面的渲染时间（如 MiniProfiler 所示）约为 66 毫秒。奇怪的是，当我使用跳转到 250 毫秒的 _2ColLayout 时。HTML 并不复杂。我疯了，还是有其他人看到这个？有没有已知的工作？

我删除了一些静态 HTML 以清理下面的片段。我怀疑这些问题，因为它们只是列表项、锚点、图像和东西。

* * *

### _布局

```
<head>
    @this.InitClientTimings()
    <title>@Page.Title</title>
    @this.TimeScript("Content Bootstrap.css", @<link  href="@Url.Content("~/Components/bootstrap/bootstrap.css")" rel="stylesheet" type="text/css"/>)
    @this.TimeScript("GoogleFont.css", @<link href='http://fonts.googleapis.com/css?family=Days+One|Open+Sans:400&subset=latin,latin-ext' rel='stylesheet' type='text/css' />)
    @this.TimeScript("Content Site.css", @<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />)

    @this.TimeScript("LAB.js", @<script type='text/javascript' src="/scripts/LAB.min.js"></script>)
    <script type="text/javascript">        window.q = []; window.$ = function (f) { q.push(f); };</script>

</head>
<body id="bootstrap-js">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <div class="nav-collapse">
                    <ul class="nav">
                       <!-- nav links -->
                    </ul>
                </div>
               <span class="pull-right">@Html.Action("LogOnControl", "Home")</span>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="page-header">
            @RenderSection("pageheader", false)
        </div>
        <div class="row">
            @RenderBody()
        </div>
    </div>
    <footer>

    </footer>

    @RenderSection("scripts", false)
    @MiniProfiler.RenderIncludes()
    <script type="text/javascript">        $(function () { $("img.lazy").lazyload({ threshold: 50 }); $(window).scroll(); });</script>

     <script type="text/javascript">
         $LAB
        .script("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js").wait()
        .script("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js")
        .script("http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js")
        .script("/scripts/jquery.lazyload.min.js")
        .script("/Scripts/social-endlessPage.js")
        .script("/Components/bootstrap/js/bootstrap.min.js")
        .wait(function () {
            $.each(q, function (index, f) {
                $(f)
            });
        });
    </script>
</body> 
```

### _2ColLayout

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section pageheader
{
    @RenderSection("pageheader", false)
}
<div class="span8">
    @RenderBody()
</div>
<div class="offset1 span3 rightbar">
    @if (IsSectionDefined("rightbar"))
    {
        @RenderSection("rightbar", false)
    }
    else
    {
       <!--default right bar stuff -->
    }
</div>
@section scripts
    {
    @RenderSection("scripts", false)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:07:09.193

你知道吗，没关系。

在我剪掉的部分（数字！）中，我调用了 Azure 分布式缓存。结果发现新建一个缓存客户端需要 200 毫秒！...我对此感到惊讶。

无论如何，修复它解决了它

# emacs - Emacs中的Python解释器，去掉输入重印

> ID：10509321
> 
> 赞同：4
> 
> 时间：2012-05-09T03:05:22.977
> 
> 标签：emacs, python-3.x, interpreter

我对 Emacs 很陌生。

运行 Emacs 的 python 解释器时，它确实

```
>>> print(24)
print(24)
24 
```

有没有办法可以防止重新打印我的输入并使其如下所示？

```
>>> print(24)
24 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T18:42:13.197

这里的诀窍是您正在运行 python 进程的缓冲区没有`comint-process-echoes`设置。

还有几个与您的问题相关的其他问题。

[如何关闭回声](https://stackoverflow.com/questions/8060609/python-interpreter-in-emacs-repeats-lines)

[如何设置emacs，使其始终关闭回显](https://stackoverflow.com/questions/9830729/emacs-python-echoing-hooks-and-org-mode)

但基本要点是您需要自定义`comint-process-echoes`. 如果您是 emacs 新手，您可能不知道大多数自定义是使用 emacs lisp 完成的，其中设置变量看起来像这样：

```
(setq variable-name new-value) 
```

在这种情况下，我们想要的变量是`comint-process-echoes`我们想要评估的 lisp：

```
(setq comint-process-echoes t) 
```

`t`lisp-speak 代表“真实”在哪里。

因此，借用上面第一个链接的建议，实际告诉 emacs 评估这个 lisp 代码，使用`M-:`(meta+colon) 命令。在 python shell 缓冲区中，键入 meta+colon，然后键入`(setq comint-process-echoes t)`然后按回车键。你的问题应该得到解决。

# delphi - stringgrid columnname 插入日期和日期信息

> ID：10509334
> 
> 赞同：1
> 
> 时间：2012-05-09T03:07:44.240
> 
> 标签：delphi, delphi-7, delphi-xe2, delphi-xe

我正在这样做：

```
procedure TForm1.Button1Click(Sender: TObject);
var dtStart: TDateTime;
  I: Integer;
begin
  dtStart := DateTimePicker1.Date;
  for I := 0 to 6 do
    StringGrid1.Cells[I+1, 1] := FormatDateTime('dd/mm/yyyy', dtStart + I);
end; 
```

以任何方式将日期名称与日期一起添加，例如 MON TUE WED 等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:13:47.527

只需更改您的`FormatDateTime`格式字符串：

```
StringGrid1.Cells[I+1, 1] := FormatDateTime('ddd dd/mm/yyyy', dtStart + I); 
```

# java - 引用 java 列表总是返回最后一个元素

> ID：10509335
> 
> 赞同：0
> 
> 时间：2012-05-09T03:07:51.290
> 
> 标签：java, list

我被难住了，需要另一双眼睛来看看这个。此代码正在工作，但突然停止工作。基本上我将一个对象添加到一个数组列表中。当我构建列表时，我会观察它，它似乎每次迭代都会添加一个唯一的对象。基本上是一个将出现在屏幕上的精灵及其 x、y 坐标、颜色和速度。早些时候，这很有效，精灵会分散在屏幕上，现在它似乎复制了添加到列表中的最后一个对象，我运行循环的 X 次最终得到相同的对象。这没有任何意义......

第一个 println 语句打印传递给构造函数的内容。所以它打印出来。

球：1 x：123 y：344 颜色：蓝色 球：2 x：3 y 233 颜色：绿色 球 3 x：24 y：3 颜色：蓝色

到目前为止，一切看起来都很棒。然后我实际上将列表打印到控制台，我得到了

球：1 x：24 y：3 颜色：蓝色 球：1 x：24 y：3 颜色：蓝色 球：1 x：24 y：3 颜色：蓝色

这就是我试图弄清楚为什么会发生这种情况的问题......

```
 //When I create the List Eclipse refused to accept it until I initialized it like so...

  java.util.List <Sprite> sprite = new java.util.ArrayList<Sprite>();    
  //yes I did import java.util.*; Eclipse still was digging it. This was working correctly despite the way i added it. I also changed this to a Vector which Eclispe was more content with with no effect. 

  private void GenerateSprites(){
        //Random to keep it random
        Random r = new Random(System.currentTimeMillis());
        //variables for selecting and setting color
        Color color = null;
    int colorValue;
    //variables for their x,y coordinates
    float bX = 0;
    float bY = 0;
    //Create each ball set the color and generate the x,y coordinates
    for (int x = 0; x < NUM_BALLS; x++){
        colorValue = r.nextInt(4);
        if (colorValue == 0) color = Color.BLUE;
        if (colorValue == 1) color = Color.RED;
        if (colorValue == 2) color = Color.YELLOW;
        if (colorValue == 3) color = Color.GREEN;

        bX = r.nextInt((int)(gameField.getWidth() - gameField.getWidth() / 4)+SCRN_MARGIN);
        bY = r.nextInt((int)(gameField.getHeight() - gameField.getHeight() / 4)+SCRN_MARGIN);

        //place the new ball in the gameField
   //print the values being passed to the sprite constrcutor for debug purposes. The out put of this line indicates that all is well at this point.             
System.out.println("Ball: " + x + " X: " + bX+ " Y: " + (bY+SCRN_MARGIN) + " Color: " + color.toString());
        gSprite.add(new Sprite((float)bX, (float)bY+SCRN_MARGIN, BALL_SIZE, color));

    }
    //Now that the sprites are added to this list print out the list.   When this line executes it shows a list of NUM_BALLS all of which have the exact sdame vlaues as the last sprite added earlier. 
    for (int x = 0; x < gSprite.size(); x++){
        Sprite spr = gSprite.get(x);

  System.out.println("Ball: " + x + " X: " + spr.getX()+ " Y: " + spr.getY() + " vX: " + spr.getvX() + " vY: " + spr.getvY() + " Color: " + spr.getColor().toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:11:54.503

您需要检查 您的课程`hashcode`的`equals`实施情况`Sprite`。他们需要考虑相关字段，`Sprite`因此两个不同的字段不会返回相同的哈希码或为相等返回 true。我认为如果您使用默认实现（例如不覆盖它），它会起作用，但要确保实现一个。在 Eclipse 中，您可以选择`Source`→ `Generate hashCode() and equals()`。如果你真的在使用，这应该没关系`ArrayList`（我在你的代码中没有看到）。

我同意@Sanket 的观点，将浮点数转换为整数可能是个问题。也许它只是看起来你每次都得到相同的？

此外，您应该使用`enhanced for-loop`Java 5。第二个循环可以这样重写（甚至可以按预期工作......）：

```
int x = 0;
for (Sprite spr : gSprite){
    System.out.println("Ball: " + x + " X: " + spr.getX()+ " Y: " + spr.getY() + " vX: " + spr.getvX() + " vY: " + spr.getvY() + " Color: " + spr.getColor().toString());
    x++;
} 
```

而且，最后但并非最不重要的一点是，您应该真正使用`switch/case`而不是四个 if。这实际上不会帮助您解决问题，但这只是一种糟糕的风格。看一看：

```
switch (colorValue) {
        case 0:
            color = Color.BLUE;
            break;
        case 1:
            color = Color.RED;
            break;
        case 2:
            color = Color.YELLOW;
            break;
        case 3:
            color = Color.GREEN;
            break;
        default:
            throw new RuntimeException("Unexpected color!");
} 
```

顺便说一句：还有其他方法，例如使用`Enum`或`Map`用于这种模式。我只是认为使用`switch/case`. 当然，默认情况处理得不好，需要改进。

哦，还有一件事：你真的应该把方法名写成小写/驼峰式。基本上每个 Java 程序员都以这种方式除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:15:33.863

```
bX = r.nextInt((int)(gameField.getWidth() - gameField.getWidth() / 4)+SCRN_MARGIN); 
```

您正在尝试将整数分配给浮点数。请检查这个，可能是因为数字四舍五入而造成问题

# php - 在单个帖子之外显示元描述 - WordPress

> ID：10509341
> 
> 赞同：1
> 
> 时间：2012-05-09T03:08:27.960
> 
> 标签：php, wordpress, meta-tags

这是我在这里的第一个问题，希望将来对某人有用。我们现在在一个 WordPress 网站上工作，并尝试在循环外显示由 All In One Seo 插件生成的元描述内容。当它在页面/帖子上时，这不是问题。适用于单人的代码是

```
<?php $metadesc = get_post_meta($post->ID, '_aioseop_description', true);
if ($metadesc) {
echo $metadesc;
} else {
the_excerpt();
}
?> 
```

前几天晚些时候，我提出了这个解决方案

```
<?php $mykey_values = get_post_custom_values('_aioseop_description'); 
foreach ( $mykey_values as $key => $value ) {
echo "$value"; 
 } ?> 
```

我不确定使用这个是否好，我现在遇到的问题是我想显示确切数量的符号，而不是所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:56:35.693

嗯，这是一个很蹩脚的问题，但有时当你被卡住时，很难看到简单的事情。这是我为我工作的最终代码：

```
<?php $mykey_values = get_post_custom_values('_aioseop_description');
foreach ( $mykey_values as $key => $value ) {
echo substr("$value",0 ,150); //This will display the first 150 symbols
} ?> 
```

# java - 使用 jGRASP 的 Java 编译器错误

> ID：10509342
> 
> 赞同：0
> 
> 时间：2012-05-09T03:08:30.680
> 
> 标签：java, jgrasp

我对 Java 很陌生，编译时出现以下两个错误：

```
stringConvert3.java:29: illegal start of expression
 public static void main (String [] args) throws Exception //Main
 ^
 stringConvert3.java:57: ';' expected
private class InnerToLowerCaseString //Second class (Inner) to convert to lower case
            ^ 
```

以下是我正在工作的代码。. .

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.lang.*;

//java.lang.needed to perform the "squeeze" method on strings.

public class stringConvert3 //First class and actual program.
{

static Scanner console = new Scanner (System.in); 
public void printEven (){
String str;

 public static void main (String [] args) throws Exception //Main
    {

    String str;

    //The following imports the 5 line test text from a saved file (test.txt).
    Scanner inFile = new Scanner (new FileReader("c:\\test.txt"));
    while (inFile.hasNextLine()){
    String line = inFile.nextLine();
    System.out.printf("Scan = %s\n", line);

        String save;
        save = line;
        str = save;
        System.out.printf ("Receive: <%s>\n", str);

             InnerToLowerCaseString innerString = this.new InnerToLowerCaseString ();
             str = InnerToLowerCaseString.lowerCase (str);
             str = save;
             str = trimmed (str); //Trims and abreviates.
             System.out.printf ("Trimmed: <%s>\n", str);
             str = squeeze (str); //Squeezes text.
             System.out.printf ("Squeezed: <%s>\n", str);

             if (str.length () >= 50)
             str = str.substring (0,20);
    }       

    private class InnerToLowerCaseString //Second class (Inner) to convert to lower case
    { //Brace to start the second class.

    //Following method converts all letters of String to lower case letters.

        private String lowerCase (String str)
            {
            str = str.toLowerCase();
            System.out.printf ("Convert to Lower: <%s>\n", str);
            return str;
            }

    } //Brace to end the second class.
    }

    public class threeMethods //Third class, containing three methods.
    {
        public static String trimmed (String str) //First method.
    {
            Scanner inFile = new Scanner (new FileReader ("c:\\test.txt"));     
            return str.trim ();
    }

    public static String trimmed (String str, int len) //Second method.
    {
        str = trimmed (str);
        if (str.length () > 10)
            return str.substring (0, 10);

        else
            return str;
    }

    public static String squeeze (String str) //Third method.
    {
        int length;

        do
        {
            length = str.length ();
            str = str.replaceAll ("  ", " "); 

            }  while (length != str.length ());  
            return (str);

    } //End of squeeze section.

} // End of the main.

}//End of stringConvert3 program. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:13:03.303

The open brace that's part of your `printEven()` method definition near the beginning of your code is never matched with a closing brace, so `main()` appears to be inside of `printEven()`. This isn't legal -- you can't define a method inside of another method -- so the compiler complains.

I looked over the rest of the code to see what other errors you have, and there are actually a lot. It almost looks like you're *deliberately* trying to define methods inside of other methods; if you are you're going to have to stop trying and implement your program correctly. Also note that an inner class defined inside a method (which is, actually, legal) cannot have an access qualifier: if you define `InnerToLowerCaseString` inside a method, then it cannot be marked `private`.

Finally, note that, despite your comment, importing `java.lang` is *never* necessary, as it's always imported implicitly. Doing it explicitly just makes your code look amateurish, so don't do it!

# c - c新手，项目没编译好？

> ID：10509347
> 
> 赞同：1
> 
> 时间：2012-05-09T03:09:20.330
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc,char *argv[])
{

    system("PAUSE");
    return 0;
} 
```

在我编译程序后，我点击运行。它仍然提示我“项目未编译”为什么？对不起，我是c的新手。

我正在使用`dev c++`，在xp上， `ctrl+F9`编译然后`ctrl+F10`运行它显示 `project is not compiled`

![在此处输入图像描述](../Images/58f28f4aeff771405d83d28a18c48d65.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:31:02.183

```
multiple definition of main 
```

也许在您的项目中有2个主要功能..您至少应该删除/更改一个..

如果我看到，有 1-3.c 和 1c.c

并且编译是错误的..

```
[Build Error] 
```

CMIIW

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:36:54.577

删除文件`1c.c`。你不能有两个`int main`功能。

# ruby - What are the differences between these two methods of using the put command?

> ID：10509352
> 
> 赞同：1
> 
> 时间：2012-05-09T03:10:31.857
> 
> 标签：ruby

```
var = 5

puts "Method #1: #{var}"
puts "Method #2: %d" % var 
```

I'm looking for advantages and drawbacks with each method, if there are at all.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:23:13.583

第一个是简单的字符串插值，而第二个是[Kernel#sprintf](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)的语法糖。

将第一个用于只需要生成包含变量数据的字符串的情况。当您需要进行专门的格式化时，第二个更好，而不仅仅是将变量放入字符串中。第一个将具有更好的性能，因此除非您需要专门的格式，否则请这样做。

而且它出现的情况下，`"hello #{var}"`比`"hello " + var`.

# php - Parse error: syntax error, unexpected '=' error

> ID：10509354
> 
> 赞同：-2
> 
> 时间：2012-05-09T03:10:48.253
> 
> 标签：php, mysql

heyy guys....

i know this is probably a silly error but i really tried hard to solve this error, but can't seem to find the cause...

```
 $id=$_GET['uid'];
    $name=$_GET['uname'];
    $empnum=$_GET['empnum'];
    $status=$_GET['status'];
    $role=$_GET['role'];

    //--SQL query : Fetching data from main_data and how many data row exists
    $sql1=mysql_query("SELECT * FROM $tbl_name WHERE UserID='$id'");
    $count=mysql_num_rows($sql1);

    if($count>0)
    {
        echo "User ID exists";
        header("refresh:1;url=newregistration.php" );
    }
    else
    {
        //sql commands to insert the data into the database
        sql1="UPDATE $tbl_name SET UserID='$id' WHERE UserID='$id'";        //sql query defined
        sql2="UPDATE $tbl_name SET UserName='$name' WHERE UserID='$id'";
        sql3="UPDATE $tbl_name SET EmpNumber='$empnum' WHERE UserID='$id'";
        sql4="UPDATE $tbl_name SET Status='$status' WHERE UserID='$id'";
        sql5="UPDATE $tbl_name SET Role='$role' WHERE UserID='$id'";
        $result=mysql_query($sql1) or mysql_error(); 
        $result=mysql_query($sql2) or mysql_error();
        $result=mysql_query($sql3) or mysql_error();
        $result=mysql_query($sql4) or mysql_error();
        $result=mysql_query($sql5) or mysql_error(); 
```

would be grateful if someone can point out my mistake...

thank you

-- Update --

Error:

```
Parse error: syntax error, unexpected '=' in C:\wamp\www\ReportTrackingSystem\updateregistration.php on line 43 $sql1="UPDATE $tbl_name SET UserID='$id' WHERE UserID='$id'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:24:27.797

你忘了把`$`变量 `$sq1`等放在前面，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:13:59.587

Difficult to go off of without an exact error message, but these (sql1, sql2, etc) should be variables (flagged with $):

```
$sql1="UPDATE $tbl_name SET UserID='$id' WHERE UserID='$id'";        //sql query defined
$sql2="UPDATE $tbl_name SET UserName='$name' WHERE UserID='$id'";
$sql3="UPDATE $tbl_name SET EmpNumber='$empnum' WHERE UserID='$id'";
$sql4="UPDATE $tbl_name SET Status='$status' WHERE UserID='$id'";
$sql5="UPDATE $tbl_name SET Role='$role' WHERE UserID='$id'"; 
```

# ssl - Using SSL Certificates on Netty

> ID：10509358
> 
> 赞同：2
> 
> 时间：2012-05-09T03:11:18.730
> 
> 标签：ssl, netty

I'm trying to build a simple client-server application using Netty which uses SSL certificates .

I looked around and I could only find the secure chat example [[here](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/securechat/package-summary.html)]. It uses bogus certificates.

How to do a proper implementation of SSL certificates (self-signed) in Netty?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:58:55.923

我建议不要使用自签名证书。这不值得麻烦。[您可以从StartSSL](http://www.startssl.com/)免费获得签名证书。查看下面的链接，了解如何将签名证书转换为 PKCS12 格式并在 SSLContext 中使用它以与 Netty 一起使用。

[http://blog.hintcafe.com/post/33709433256/https-server-in-java-using-netty-and-keystore](http://blog.hintcafe.com/post/33709433256/https-server-in-java-using-netty-and-keystore)

# javascript - 通过 Github 进行身份验证（使用everyauth）

> ID：10509371
> 
> 赞同：1
> 
> 时间：2012-05-09T03:13:00.780
> 
> 标签：javascript, node.js, authentication, oauth, everyauth

我正在使用[everyauth](https://github.com/bnoguchi/everyauth)，并且无法使用 github 对其进行身份验证。到目前为止，我所遵循的所有步骤似乎都是正确的，但是`cannot GET /auth/github`在单击“与 github 连接”链接时它一直告诉我。

这是我的代码的要点：[https ://gist.github.com/2641260](https://gist.github.com/2641260)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:17:23.113

我知道回答可能为时已晚，但我遇到了同样的问题并找到了解决方案。

它真的很简单。

将 EveryAuth 代码放在 app.configure() 代码之前。

这种方式：[你的要点的叉子](https://gist.github.com/3667481)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:03:02.043

不确定这是否会有所帮助，但您是否尝试过添加“.entryPath”可链接参数？

```
everyauth.github
    .entryPath('/auth/github')
    .appId("APP_ID")
    .appSecret("APP_SECRET")
    .findOrCreateUser( function (sess, accessToken, accessTokenExtra, ghUser) {
  console.log('find user')
  // return usersByGhId[ghUser.id] || (usersByGhId[ghUser.id] = addUser('github', ghUser));
  })
 .redirectPath('/'); 
```

# mysql - Rails - Error installing Gem

> ID：10509375
> 
> 赞同：2
> 
> 时间：2012-05-09T03:13:27.197
> 
> 标签：mysql, ruby-on-rails, ruby, windows

Im newbie starting to learn ruby/rails. While i was trying to setup WeBRICK to run, an error related to the libmysql.dll appeared, so ive downloaded an dll from an older version of mysql and tried again, but the error kept. Then i read that the problem was that my computer is 64bit and the gem mysql2 installed apparently is 32bit, that way i uninstalled that gem and tried to do the following workaround:

1) download mysql connector 32 bits 2) gem install mysql --platform=ruby -- --with-mysql-dir=C:/mysql-connector-c-noinstall-6.0.2-win32

the problem now is that im getting the following error: ERROR: While executing gem ... (Errno::EEXIST) File exists - C:

So, now i cant even install the mysql2 gem

Can you guys help me please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:50:57.090

不建议在 windows 上的 rails 上运行 ruby​​。mac或linux会更好。

如果你不能改变你的操作系统。你可以试试这个：

[http://eric.cloud-mes.com/2012/04/1/install-Ruby-1.9.3-and-Rails-3.2.3-on-Windows-7.html](http://eric.cloud-mes.com/2012/04/1/install-Ruby-1.9.3-and-Rails-3.2.3-on-Windows-7.html)

# actionscript-3 - 如何使用下拉列表中的 selectedItem 在 FlashBuilder 4.6 中填充折线图

> ID：10509379
> 
> 赞同：0
> 
> 时间：2012-05-09T03:14:35.943
> 
> 标签：actionscript-3, apache-flex, sql-server-2005, coldfusion-9, flex4.6

我正在使用 FlashBuilder 4.6、coldfusion 9 和 Sql Server 2005 来按年份用一个人的数据填充折线图。如果我在数据提供者中使用固定字符串，这很好用，但我想通过使用所有可用个人的下拉列表来选择个人。用于折线图的个人名称与下拉列表中的个人格式相同。flashbuilder 数据/服务将字段显示为字符串，而 MS Sql Server 表将它们显示为 varchar(50)。

附加代码显示 getpool_ratings_yr1Result.token = pool_ratings_yr1Service.getpool_ratings_yr1('greenleaf') 选择单个 'greenleaf'。我想用下拉列表中的 selectedItem 替换它以使图表动态化。我尝试将 ('greenleaf') 替换为 ({dropdownList.selectedItem}) ，但它不起作用，但也许我需要触发一个事件才能使其工作。

我是 FlashBuilder 和 Flex 的新手，但读了很多书，但没有找到任何结论。

任何帮助将不胜感激。谢谢，威尔

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:pool_ratings_yr1service="services.pool_ratings_yr1service.*"
               xmlns:pool_playerservice="services.pool_playerservice.*"
               minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.FlexEvent;

            protected function linechart1_creationCompleteHandler(event:FlexEvent):void
            {
                getpool_ratings_yr1Result.token = pool_ratings_yr1Service.getpool_ratings_yr1('greenleaf');
            }

            protected function dropDownList_creationCompleteHandler(event:FlexEvent):void
            {
                getAllpool_playerResult.token = pool_playerService.getAllpool_player();
            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:CallResponder id="getpool_ratings_yr1Result"/>
        <pool_ratings_yr1service:Pool_ratings_yr1Service id="pool_ratings_yr1Service"
                                                         fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                                         showBusyCursor="true"/>
        <s:CallResponder id="getAllpool_ratings_yr1Result"/>
        <s:CallResponder id="getAllpool_playerResult"/>
        <pool_playerservice:Pool_playerService id="pool_playerService"
                                               fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                               showBusyCursor="true"/>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <mx:LineChart id="linechart1" x="234" y="97"
                  creationComplete="linechart1_creationCompleteHandler(event)"
                  dataProvider="{getpool_ratings_yr1Result.lastResult}" showDataTips="true">
        <mx:series>
            <mx:LineSeries id="lineSeries" displayName="Series 1" yField="avg_rating"/>
        </mx:series>
        <mx:horizontalAxis>
            <mx:CategoryAxis id="categoryAxis" categoryField="yr"/>
        </mx:horizontalAxis>
    </mx:LineChart>
    <mx:Legend dataProvider="{linechart1}"/>
    <s:DropDownList id="dropDownList" x="73" y="133"
                    creationComplete="dropDownList_creationCompleteHandler(event)"
                    labelField="lname">
        <s:AsyncListView list="{getAllpool_playerResult.lastResult}"/>
    </s:DropDownList>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:26:03.513

尝试添加功能：

```
private function comboBoxChange():void
{
    var selectedName:String = dropDownList.selectedItem;
    getpool_ratings_yr1Result.token = pool_ratings_yr1Service.getpool_ratings_yr1(selectedName);

} 
```

然后在您的 dropDownList 上添加一个更改事件监听器：

```
<s:DropDownList id="dropDownList" x="73" y="133"
                creationComplete="dropDownList_creationCompleteHandler(event)"
                labelField="lname"
                change="comboBoxChange()"> 
```

# build - 告诉 cmake 保持安静

> ID：10509380
> 
> 赞同：19
> 
> 时间：2012-05-09T03:14:37.223
> 
> 标签：build, cmake

我可以在 cmake 中使用一个变量来使其表现得像传递了 -q 选项一样吗？这会很好，因为我有一个非常模块化的构建，它会使 cmakes 输出变得混乱。我在 C++ 项目中使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-04-05T13:55:08.690

从 cmake 3.1 开始，设置[`CMAKE_INSTALL_MESSAGE`](https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_MESSAGE.html)也非常有用。例如，`set(CMAKE_INSTALL_MESSAGE LAZY)`将跳过`-- Up-to-date:`消息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T08:54:06.590

没有我知道的变量。但是，您可以将以下 hack 添加到顶级 CMakeLists.txt 的开头（在`project`调用之前）以在一定程度上控制输出：

```
function(message)
  list(GET ARGV 0 MessageType)
  if(MessageType STREQUAL FATAL_ERROR OR
     MessageType STREQUAL SEND_ERROR OR
     MessageType STREQUAL WARNING OR
     MessageType STREQUAL AUTHOR_WARNING)
    list(REMOVE_AT ARGV 0)
    _message(${MessageType} "${ARGV}")
  endif()
endfunction() 
```

这会覆盖 CMake 的内置`message`命令并禁止所有未键入`STATUS`的消息，从而正确输出更重要的类型。

例如，`WARNING`消息的输出将从

> ```
> CMake Warning at CMakeLists.txt:14 (message):
>   This is a dummy warning message. 
> ```

到

> ```
> CMake Warning at CMakeLists.txt:8 (_message):
>   This is a dummy warning message.
> Call Stack (most recent call first):
>   CMakeLists.txt:14 (message) 
> ```

请注意，生成警告消息的实际行列在调用堆栈中，而不是输出消息的第一行。

最后，这对指示配置尝试成功或失败的摘要输出没有影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-23T02:15:25.550

```
set(CMAKE_MESSAGE_LOG_LEVEL "WARNING") 
```

[https://cmake.org/cmake/help/latest/variable/CMAKE_MESSAGE_LOG_LEVEL.html](https://cmake.org/cmake/help/latest/variable/CMAKE_MESSAGE_LOG_LEVEL.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-08T22:02:26.933

对于 CMake 的安装部分，它倾向于每个文件打印一行（a la`-- Up-to-date: /some/destination/path`和`-- Installing: /some/destination/path`），您可以这样做

```
set(CMAKE_INSTALL_MESSAGE LAZY)  # Don't tell us about up-to-date files. 
```

不会打印已经存在的文件（如果您重复运行 install ，就像在开发过程中一样），甚至

```
set(CMAKE_INSTALL_MESSAGE NEVER)  # Install silently. 
```

此[选项自 CMake 3.1 以来一直存在](https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_MESSAGE.html)。

# wpf - WPF 绑定按钮

> ID：10509382
> 
> 赞同：0
> 
> 时间：2012-05-09T03:14:42.993
> 
> 标签：wpf, binding

我的应用程序中有两个按钮

现在我想将 btnOff 绑定到 !isOn。含义是 btnOn 启​​用，btnOff 应该禁用，反之亦然

编辑：下面是我的实现：

```
<Button x:Name="btnOn" Content="On" Width="45" Height="24" IsEnabled="{Binding isOn, Converter={StaticResource BoolInverter}}" />
   <Button x:Name="btnOff" Content="Off" Width="45" Height="24" IsEnabled="{Binding isOn} />

 public class BoolInverterConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value is bool)
            {
                return !(bool)value;
            }
            return value;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value is bool)
            {
                return !(bool)value;
            }
            return value;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:37:00.293

[元素数据绑定](http://www.kirupa.com/blend_silverlight/element_to_element_data_binding_pg1.htm)，

[http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1](http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1) -> 元素数据绑定的另一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:27:44.930

拥有另一个否定 IsOn 属性的计算/派生属性 IsOff（无支持字段）不是更简单吗？

```
public bool IsOn{ 
  get{...}
  set
  {    _isOn = value; 
       NotifyPropertyChanged("IsOn");
       NotifyPropertyChanged("IsOff");
  }
}

public bool IsOff
{
   get{   return !IsOn;}
} 
```

转换器通常用于转换数据类型，例如将 Visibility 枚举属性绑定到视图模型中的布尔支持属性。

# opencv - 在opencv中获取图像矩阵

> ID：10509383
> 
> 赞同：0
> 
> 时间：2012-05-09T03:14:50.623
> 
> 标签：opencv, matrix

```
 //Open the image 
    Mat img_rgb = imread("sudoku2.png", CV_LOAD_IMAGE_GRAYSCALE); 
    if (img_rgb.empty()) 
    { 
            cout<<"Cannot open the image"<<endl; 
            return; 
    }
    Mat img_bw = img_rgb > 128;
    imwrite("image_bw.jpg", img_bw); 
```

现在，我想获取 img_bw 的所有像素并将其保存到矩阵 M （*int[img_bw.rows][img_bw.cols]*）中。如何在 C++ 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:39:22.687

什么格式？

cv::Mat 中的原始字节数据可从.ptr() 函数获得，即img_bw.ptr()。

Opencv 还具有矩阵的 xml 和 json 读写函数，只需使用 << 运算符 - 请参阅[opencv xml 和 yaml i/o 教程](http://docs.opencv.org/doc/tutorials/core/file_input_output_with_xml_yml/file_input_output_with_xml_yml.html#fileinputoutputxmlyaml)

编辑：在 c++ 中，您可以使用 .at 运算符访问像素。

用于`img_data.at<uchar>(x,y)`无符号字符 (CV_8U) 像素和`img_data.at<float>(x,y)`CV_32F 图像。

# java - 如何将变量从一个 JFrame 传递到另一个 JFrame

> ID：10509385
> 
> 赞同：2
> 
> 时间：2012-05-09T03:15:31.853
> 
> 标签：java, swing, variables

我是 Java 新手。我试图自己找到解决方案，但不知道如何进行。

我有 2 个 Jframe (JF1,JF2) ，我需要将一个变量从 JF1 传递给 JF2

这是 JF1 的代码： 注意：我需要值 x，值 x 从 JTextfeild 获取。

任何人都可以帮助我吗

```
/*
 * JF1.java
 *
 * Created on 04 مايو, 2012, 09:01 م
 */

package finalpro;

import java.io.BufferedInputStream;
import javax.swing.JOptionPane;

/**
 *
 * @author  OmaR
 */
public class JF1 extends javax.swing.JFrame {

    /** Creates new form JF1 */
    public JF1() {
        initComponents();

    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        JB1 = new javax.swing.JButton();
        JB3 = new javax.swing.JButton();
        JB2 = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Online Test Creater");

        JB1.setText("Make");
        JB1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JB1ActionPerformed(evt);
            }
        });

        JB3.setText("Quit");
        JB3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JB3ActionPerformed(evt);
            }
        });

        JB2.setText("Reset");
        JB2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JB2ActionPerformed(evt);
            }
        });

        jLabel2.setText("Number Of Question");

        jTextField1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTextField1MouseClicked(evt);
            }
        });

        jButton1.setText("Main");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(43, 43, 43)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 50, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 128, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(34, 34, 34)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(JB2)
                    .addComponent(JB3)
                    .addComponent(JB1)
                    .addComponent(jButton1))
                .addGap(30, 30, 30))
        );

        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {JB1, JB2, JB3, jButton1});

        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addComponent(jLabel1))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(31, 31, 31)
                        .addComponent(JB1)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel2)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jButton1))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(JB2)
                        .addGap(18, 18, 18)
                        .addComponent(JB3)))
                .addContainerGap(37, Short.MAX_VALUE))
        );

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {JB1, JB2, JB3, jButton1});

        pack();
    }// </editor-fold>                        

    private void JB3ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        // TODO add your handling code here:
        System.exit(0);
    }                                   

    private void JB2ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        // TODO add your handling code here:
        jTextField1.setText("");

    }                                   

    private void JB1ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        // TODO add your handling code here:

            JF1 JFBU = new JF1()   ;
            JF2 JCreate = new JF2();

            this.setVisible(false);
        int  z = Integer.parseInt(jTextField1.getText());

          if (z == 0)
            {
               JOptionPane.showMessageDialog(null, " You Enter 0 Please write anumber ");

                 }
          else
          {
             JCreate.setVisible(true);
          }  

    }                                   

    private void jTextField1MouseClicked(java.awt.event.MouseEvent evt) {                                         
        // TODO add your handling code here:
        JOptionPane.showMessageDialog(null, "The Max Number of Questions Is 10");
    }                                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        JFmain JFm = new JFmain();
        JFm.setVisible(true);
        this.setVisible(false);
    }                                        

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
               new JF1().setVisible(true);

            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton JB1;
    private javax.swing.JButton JB2;
    private javax.swing.JButton JB3;
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   

} 
```

我有 JF2，我需要通过它上面的 Var z。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:21:04.390

创建带参数的构造函数`int z`：

```
public class JF2 extends JFrame {
    private int z;

    public void setZ(int z) {
        this.z = z;
    }

    public int getZ() {
        return z;
    }

    public JF2(int z) {
        this.z = z;
    }
} 
```

并在创建->或使用 setter`z`时传递变量`JF2``JF2 jCreate = new JF2(z);``jCreate.setZ(z);`

# objective-c - 从 Web 服务器下载图像以用于 Retina 显示器 iOS

> ID：10509392
> 
> 赞同：3
> 
> 时间：2012-05-09T03:17:17.540
> 
> 标签：objective-c, ios, parsing, uiimage

我正在使用以下代码从网络服务器下载图像以显示在我的 iOS 应用程序的表格视图中：

```
NSURL *url = [NSURL URLWithString:[imageArray objectAtIndex:indexPath.row]];
UIImage *myImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
cell.imageView.image = myImage; 
```

图像视图是 60x60 占位符和 120x120 用于视网膜显示。我将假设用户有一部 iPhone 4。但是，如果我将图像大小调整为 120x120，它并不能解决问题，它对于图像视图来说太大了。如果我在网络服务器上将图像大小设置为 60x60，则图像适合但有点模糊。有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:03:21.687

让我们首先同意您`UIImageView`的 60x60**点**，这意味着标准显示器为 60x60**像素，视网膜显示器为 120x120****像素**。

对于`UIImageView`60x60 点，对于标准显示器，图像应为 60x60 像素（**比例为 1.0** ），而对于视网膜显示器，图像应为 120x120 像素（**比例为 2.0 ）。**这意味着您`UIImage`应该始终有一个`size`60x60 点，但应该有一个不同的`scale`取决于显示分辨率。

从服务器获取图像数据时，您应该首先检查设备屏幕的比例，然后请求适当的图像大小（以像素为单位），如下所示：

```
if ([UIScreen mainScreen].scale == 1.0) {
    // Build URL for 60x60 pixels image
}
else {
    // Build URL for 120x120 pixels image   
} 
```

然后，您应该将图像数据放在适当`UIImage`的大小`60x60`点中`scale`：

```
NSData *imageData = [NSData dataWithContentsOfURL:url];
CFDataRef cfdata = CFDataCreate(NULL, [imageData bytes], [imageData length]);
CGDataProviderRef imageDataProvider = CGDataProviderCreateWithCFData (cfdata);
CGImageRef imageRef = CGImageCreateWithJPEGDataProvider(imageDataProvider, NULL, true, kCGRenderingIntentDefault);
UIImage *image = [[UIImage alloc] initWithCGImage:imageRef 
                                            scale:[UIScreen mainScreen].scale 
                                      orientation:UIImageOrientationUp];
CFRelease (imageRef);
CFRelease (imageDataProvider);
CFRelease(cfdata); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:35:22.607

如果您下载的图像的尺寸是 UIImageView 尺寸的 2 倍。iPhone4 的视网膜显示效果很好。

另见：http: [//mobile.tutsplus.com/tutorials/iphone/preparing-your-iphone-app-for-higher-resolutions/](http://mobile.tutsplus.com/tutorials/iphone/preparing-your-iphone-app-for-higher-resolutions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T03:37:46.380

从 Web 下载的图像不会像与您的应用程序捆绑在一起的图像（使用“@2x”后缀）一样针对 Retina Display 进行格式化。

您可以使用恰当命名的 scale: 和 setScale: 方法获取/设置任何 UIView 的比例，以帮助您更好地显示来自网络的内容（如果您知道它适用于 Retina 显示设备）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:50:52.857

答案很简单：

我建议始终从服务器下载双密度图像（因为非视网膜显示器的用户很少）并在图像视图中设置。

您没有正确执行的是您没有将 imageView 设置为自动适应内容。您可以在 IB 中通过选择 ImageView 并将 contentMode（模式）设置为“填充”来执行此操作，也可以通过代码执行此操作：

```
imageView.contentMode = UIViewContentModeScaleToFill; 
```

# c - C 中的堆栈实现产生令人困惑的结果

> ID：10509398
> 
> 赞同：0
> 
> 时间：2012-05-09T03:17:55.920
> 
> 标签：c

对于大学作业的一个组件，我们必须实现一个堆栈，我认为我已经做得足够好了，它可以正常工作。当我自己测试堆栈时，它似乎工作正常，但是当我将它用作我的解决方案的一部分时，它的行为不同，我不知道为什么。有人可以指出我的错误吗？谢谢。

**编辑：**我能感觉到很多“它的行为有何不同？” 评论正在路上，所以这就是我注意到的。在运行 的*测试堆栈*部分时`main`，所有操作都执行并打印得非常好，但是当我运行的第二部分`main`并注释掉测试部分时，当我试图推入堆栈时程序崩溃 - 某事以前没有失败。

**主程序**

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

struct stackNode {
    char data;
    struct stackNode *nextPtr;
};
typedef struct stackNode StackNode;
typedef StackNode *StackNodePtr;

typedef enum {
    false, true
} t_bool;

void* emalloc(size_t s) {
    void* p = malloc(s);
    if (NULL == p) {
        fprintf(stderr, "Memory allocation failed.\n");
        exit(EXIT_FAILURE);
    }
    return p;
}

void print_array(char* array, size_t n){
    int i;
    printf("[");
    for(i = 0; i < n - 1; i++){
        printf("%c, ", array[i]);
    }
    printf("%c]\n", array[i]);
}

// Determine if c is an operator.
int isOperator(char c) {
    char ops [6] = {'+', '-', '*', '/', '%', '^'};
    int i;
    for (i = 0; i < 6; i++)
        if (ops[i] == c) return true;
    return false;
}

int op_priority(char c) {
    if (c == '+' || c == '-') return 0;
    else if (c == '*' || c == '/') return 1;
    else if (c == '^' || c == '%') return 2;
    return -1;
}

// Determine if the precedence of operator1 is less than, equal to, or greater than
// the precedence of operator2\. The function returns -1, 0 and 1, respectively.
int precedence(char op1, char op2) {
    int op1_p = op_priority(op1);
    int op2_p = op_priority(op2);
    if (op1_p < op2_p) return -1;
    else if (op1_p > op2_p) return 1;
    else return 0;
}

// Push a value on the stack.
void push(StackNodePtr *topPtr, char value) { 
    StackNodePtr temp = (StackNodePtr) emalloc(sizeof (StackNode));
    temp->data = value;
    temp->nextPtr = *topPtr;
    *topPtr = temp;
}

// Pop a value off the stack. 
char pop(StackNodePtr *topPtr) {
    StackNodePtr t = *topPtr;
    if (NULL != *topPtr) {
        char c = t->data;
        *topPtr = t->nextPtr;
        free(t);
        return c;
    } else {
        printf("Stack is empty.\n");
        return '\0';
    }
}

// Return the top value of the stack without popping the stack.
char peek(StackNodePtr topPtr) {
    if (NULL != topPtr) {
        return topPtr->data;
    } else {
        printf("Stack is empty.\n");
    }
}

// Determine if the stack is empty.
int isEmpty(StackNodePtr topPtr) {
    if (NULL == topPtr) return true;
    return false;
}

// Prints the stack
void printStack(StackNodePtr topPtr) {
    if (!isEmpty(topPtr)){

    StackNodePtr t = topPtr;
    while (NULL != t) {
        printf("%c\t", t->data);
        t = t->nextPtr;
    }
    printf("NULL\n");
    } else {
       printf("Stack is empty.\n");
    }
}

// Convert the infix expression to postfix notation.
void convertToPostfix(char infix [], char postfix [], int expression_length) {
    printf("At top of cnvToPostfix\n");
    int infix_count = 0;
    int postfix_count = 0;

    ////////////////////////////////////////////
    StackNodePtr *stack;
    push(stack, '(');
    printStack(*stack);
    ////////////////////////////////////////////

    infix[expression_length] = ')';
    while (isEmpty(*stack)) {
        char current = infix[infix_count++];
        if (isdigit(current)) {
            postfix[postfix_count++] = current;
        } else if (current == '(') {
            push(stack, current);
        } else if (isOperator(current)) {
            while (true) {
                char top = peek(*stack);
                if (isOperator(top) && precedence(current, top) >= 0) {
                  postfix[postfix_count++] = pop(stack);
                } else {
                    break;
                }
            }
            push(stack, current);
        }
        else if (current == ')') {
            while (true) {
                char top = peek(*stack);
                if (top == '(') {
                    pop(stack);
                    break;
                } else {
                     postfix[postfix_count++] = pop(stack);
                }
            }
        }
    }
}

int main() {

    printf("Testing stack\n");
    printf("Pushing 1, 2, and 3 onto stack, peeking and popping.\n");
    StackNodePtr *stack;
    push(stack, '1');
    push(stack, '2');
    push(stack, '3');
    printf("Printing stack\n\n");
    printStack(*stack);
    printf("Peek: %c\n", peek(*stack));
    printf("Pop: %c\n", pop(stack));
    printf("Printing stack\n");
    printStack(*stack);

/*
    printf("Enter the infix expression.\n");

    char c;
    char infix [1024];
    int count = 0;
    while ((scanf("%c", &c)) == 1) {
        if ((int) c == 10) break;
        infix[count++] = c;
    }

    printf("The original infix expression is:\n");
    print_array(infix, count);

    char postfix [count];

    convertToPostfix(infix, postfix, count);
    printf("The expression in postfix notation is:\n");
    print_array(postfix, count);
*/
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:25:01.243

我看到至少一个直接的问题：

```
StackNodePtr *stack;
push(stack, '1'); 
```

您的堆栈的初始化在哪里？使用未初始化的指针是*即时*的“未定义行为”领域。

如果您仔细查看您的`push`代码，您会看到它在当前项目之前插入新项目，但将新项目的`nextPtr`指针设置为前一个（未初始化的）值。

这意味着，堆栈中的最后一项实际上不会指向 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:33:31.813

你并没有真正初始化你的堆栈：

```
StackNodePtr *stack;
push(stack, '('); 
```

`StackNodePtr`作为指针类型和指向该类型的指针也可能令人困惑`stack`。您需要清楚在每种可能的用法中应该应用多少级间接。

首先，想象一下首先将新堆栈传递给`isEmpty`：

```
StackNodePtr *stack;
printf("%d\n", isEmptypush(*stack)); 
```

`isEmpty`它传递的值会做什么？

我认为你想要的是：

```
StackNodePtr stack = NULL;
push(&stack, '('); 
```

该函数中的其他用途`stack`也应类似地从`*stack`to`stack`或`stack`to更改为`&stack`。

# python - PyMODINIT_FUNC 和 PyModule_Create 之间的区别

> ID：10509400
> 
> 赞同：15
> 
> 时间：2012-05-09T03:18:35.403
> 
> 标签：python, python-3.x, python-c-extension

如果我理解正确，

1.  `PyModule_Create`Python 2.X中的 PyMODINIT_FUNC已替换为Python3.X
2.  两者都 return `PyObject*`，但是，在 Python 3.X 中，模块的初始化函数***必须***返回`PyObject*`给模块 - 即

    ```
    PyMODINIT_FUNC
    PyInit_spam(void)
    {
       return PyModule_Create(&spammodule);
    } 
    ```

    而在 Python2.X 中，这不是必需的 - 即

    ```
    PyMODINIT_FUNC
    initspam(void)
    {
      (void) Py_InitModule("spam", SpamMethods);
    } 
    ```

所以，我的健全性检查问题是：

*   我的理解正确吗？
*   为什么会做出这样的改变？

现在，我只是在试验非常简单的 Python 的 C 扩展案例。也许如果我做得更多，这个问题的答案会很明显，或者如果我试图将 Python 嵌入到其他东西中......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:19:08.280

1.  是的，你的理解是正确的。您必须从具有返回类型 PyMODINIT_FUNC 的初始化函数返回新模块对象。（PyMODINIT_FUNC 声明函数在 python2 中返回 void，在 python3 中返回 PyObject*。）

2.  我只能推测进行更改的人的动机，但我相信这是为了更容易识别导入模块时的错误（如果出现问题，您可以从 python3 中的 module-init 函数返回 NULL ）。

# asp.net - MVC3 - 根据下拉选择更新更改布局

> ID：10509404
> 
> 赞同：0
> 
> 时间：2012-05-09T03:19:45.970
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, master-pages

我有一个 MVC3 网站，在页面的顶部标题上显示网站名称。这来自 site.master 页面。我想将该静态标题名称转换为页面顶部的下拉列表。选择更改 - 我想显示不同的 site.master 页面（内容视图完全来自与原始选择不同的控制器）。如何在 MVC3 Web 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:29:02.443

默认情况下，所有页面都使用`_ViewStart.cshtml`直接在 MVC3 Web 应用程序项目中的 Views 目录下找到的页面。这将指向目录`_Layout.cshtml`下的（mvc 母版页）`Views/Shared`。

将 Individual`_ViewStart.cshtml`放在相应的 View 目录下会覆盖默认行为。因此，如果您以 Home View 为例，您将有一个`_ViewStart.cshtml`低于`Views/Home`

这里`_ViewStart.cshtml`将返回它的特定布局；因此代码是

```
@{
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
 } 
```

如您所见，您将创建自己的布局主控`_HomeLayout.cshtml`并将其放置在`Views/Shared`目录下。根据您的需要，您将重复此操作到您拥有的视图数量（如果您不指定一个，它将始终使用默认视图）。看看下面给出的屏幕截图。稍后根据您的需要，您可以有一个下拉列表来选择不同的视图。

![在此处输入图像描述](../Images/7fe22c65c7025258c60ec767c2464ae5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:19:21.393

这很容易，在选择更改时将窗口重定向到新的 url，该 url 在控制器上执行特定的操作方法。

我没有实际的代码示例，但让我尝试用简单的英语解释

例如，默认情况下您加载**HomeController的****Index**操作方法，索引视图使用“ **site.master** ”。现在在选择更改时，您将浏览器重定向到不同的 url（“ **NewHome/Index** ”）。**NewHomeController下的****索引**视图会有不同的母版页，可以通过以下方式设置

 ******把代码放在下面

```
@{
     Layout = "~/Views/Shared/_NewHomeLayout.cshtml";
 } 
```

1.  **进入“ NewHome** ”视图文件夹 下的新**_ViewStart.cshtml文件。**
***   在**NewHome** Index 视图中，您直接使用上面提到的相同代码设置**Layout**********

# ms-access - 在 Access 中使用 ADO 导入 CSV 数据

> ID：10509406
> 
> 赞同：2
> 
> 时间：2012-05-09T03:19:52.223
> 
> 标签：ms-access, vba, csv, ado

因此，我导航到了以下[MSDN 资源页面](http://msdn.microsoft.com/en-us/library/ms974559.aspx)，其中介绍了如何使用 ADO 对象。我的问题是我无法让它工作。

我想要做的是打开一个 CSV 文件并逐行读取它，然后创建 SQL INSERT 语句以将记录插入到 Access 2010 中的现有表中。我试图找到一种更简单的方法，但是这似乎是我唯一的选择。使用随附的工具执行此操作，但到目前为止，我还没有运气。

这里的主要问题是我的 CSV 文件的标题不一致。我想将 5 个文件导入到同一个表中，但是每个文件都会根据包含数据的字段而有所不同。提取过程中将忽略那些没有数据的字段。这就是为什么我不能使用像 DoCmd.TransferText 这样的东西。

所以，现在我需要创建一个脚本来打开文本文件，读取第一行的标题，并根据该特定文件的配置创建一个 SQL INSERT 语句。

我有一种感觉，我对如何解决这个问题有很好的处理，但无论我尝试什么，我似乎都无法使用 ADO 来解决问题。

谁能解释我如何做到这一点？我的症结是让 Access DB 通过 ADO 从 CSV 文件中接收信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:47:00.443

我认为您应该将文件作为 ADO 记录集打开，而不是逐行读取 CSV 文件，然后对每一行进行处理。并为您的访问目标表打开一个 DAO 记录集。

然后，您可以遍历 ADO 记录集的每一行中的字段，并将它们的值添加到 DAO 记录集的新行中。只要目标表包含与 CSV 字段具有相同名称和兼容数据类型的字段，这可以相当顺利。

```
Public Sub Addikt()
#If ProjectStatus = "DEV" Then
    ' needs reference for Microsoft ActiveX Data Objects
    Dim cn As ADODB.Connection
    Dim fld As ADODB.Field
    Dim rs As ADODB.Recordset
    Set cn = New ADODB.Connection
    Set rs = New ADODB.Recordset
#Else ' assume PROD
    Const adCmdText As Long = 1
    Const adLockReadOnly As Long = 1
    Const adOpenForwardOnly As Long = 0
    Dim cn As Object
    Dim fld As Object
    Dim rs As Object
    Set cn = CreateObject("ADODB.Connection")
    Set rs = CreateObject("ADODB.Recordset")
#End If
    Const cstrDestination As String = "tblMaster"
    Const cstrFile As String = "temp.csv"
    Const cstrFolder As String = "C:\share\Access"
    Dim db As DAO.Database
    Dim rsDao As DAO.Recordset
    Dim strConnectionString As String
    Dim strName As String
    Dim strSelect As String

    strConnectionString = "Provider=" & _
        CurrentProject.Connection.Provider & _
        ";Data Source=" & cstrFolder & Chr(92) & _
        ";Extended Properties='text;HDR=YES;FMT=Delimited'"
    'Debug.Print strConnectionString
    cn.Open strConnectionString

    strSelect = "SELECT * FROM " & cstrFile
    rs.Open strSelect, cn, adOpenForwardOnly, _
        adLockReadOnly, adCmdText

    Set db = CurrentDb
    Set rsDao = db.OpenRecordset(cstrDestination, _
        dbOpenTable, dbAppendOnly + dbFailOnError)

    Do While Not rs.EOF
        rsDao.AddNew
        For Each fld In rs.Fields
            strName = fld.Name
            rsDao.Fields(strName) = rs.Fields(strName).value
        Next fld
        rsDao.Update
        rs.MoveNext
    Loop

    rsDao.Close
    Set rsDao = Nothing
    Set db = Nothing
    rs.Close
    Set rs = Nothing
    cn.Close
    Set cn = Nothing
End Sub 
```

这是我保存该过程的模块的声明部分：

```
Option Compare Database
Option Explicit
#Const ProjectStatus = "DEV" '"DEV" or "PROD" 
```

更改这些常量的值以在您的系统上对其进行测试：

```
Const cstrDestination As String = "tblMaster"
Const cstrFile As String = "temp.csv"
Const cstrFolder As String = "C:\share\Access" 
```

请注意，文件夹名称不包含尾部反斜杠。

您将需要调整该过程以将文件名作为参数传递，而不是将其保留为常量。而且，如果您的 CSV 文件存储在多个目录中，您也需要将文件夹名称作为参数传递。

希望向您展示如何为一个文件执行此操作就足够了，然后您可以从这里获取它来处理所有 CSV 文件。还要考虑添加错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-26T07:29:26.553

我认为前面的答案是不必要的复杂。您只需发送`XMLHTTP`请求即可。这会将 CSV 数据作为字符串获取，然后可以将其解析为表。

我已经发布了一个 VBA 子例程，它在[对类似问题的回答中做到了](https://stackoverflow.com/questions/15160781/how-to-load-csv-files-from-the-internet-into-an-access-database/67262352#67262352)这一点。我在哪里找到这些技术的文档在代码注释中。我已经在 Access 2019 中运行了它，它可以工作。

# objective-c - 如何在Objective C中使用ARC在类中声明指针成员变量？

> ID：10509407
> 
> 赞同：0
> 
> 时间：2012-05-09T03:20:09.427
> 
> 标签：objective-c, ios, memory, pointers, automatic-ref-counting

我有一个类 RemoteImageLoader，它有一个方法 loadImage：

```
- (void) loadImage: (NSString*) url setTarget:(NSData **)target; 
```

我在这里使用了 NSData** 因为我需要间接返回 NSData* ，就像一些典型的方法一样：

```
- (BOOL)save:(NSError**) 
```

由于该方法实际上会调用另一个异步方法，因此我必须将目标保存为成员变量，以便以后可以访问它。但是当我定义一个 NSData ** 成员变量时：

```
@interface RemoteImageLoader : NSObject    
@property NSData** target;
@end 
```

编译器抱怨“指向非常量类型'NSData *'的指针没有明确的所有权”。我在谷歌上做了一些搜索，但没有找到答案。谁能帮我解决这个问题？非常感谢

我试图将声明替换为

```
@interface RemoteImageLoader : NSObject    
@property NSData * __autoreleasing * target;
@end 
```

但问题依然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:28:41.380

如果没有看到您的代码，我无法确定您要做什么，但是您为什么要尝试创建指向`NSData`对象的指针（这是指向 的指针`NSData`）。因为您正在创建一个指向指针的指针，这可能就是您收到错误的原因。尝试删除其中一个指针，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:30:11.590

[ARC 过渡说明](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)建议您在使用 __autoreleasing 的情况下声明指向 NSData 和 NSError 对象的间接指针，例如`(NSData * __autoreleasing *)target;`

__autoreleasing 被称为*生命周期限定符*，它告诉编译器返回对象的自动释放实例。

因此，需要重写您的方法签名。

```
- (void) loadImage: (NSString*) url setTarget:(NSData* __autoreleasing *)target; 
```

请注意，__autoreleasing 对象的寿命极短。将您的 NSData** 声明为 __strong 以覆盖默认的 __autoreleasing 以获得更长的生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:18:32.253

我认为您的方法签名会造成麻烦。调用者很可能会假设一旦您的方法返回，指向的指针就会被填充。同样，它们很可能会传递一个不会长期有效的堆栈变量的地址。最后，您的方法无法让调用者知道指向的指针何时被填充了值。

您最好从调用者那里获取完成块。完成块将接收一个 NSData 指针作为参数。就像是：

```
- (void) loadImage: (NSString*) url completionHandler:(void (^)(NSData* data))block; 
```

这也反映了我认为您正在使用的底层框架 API，这对于减少“阻抗不匹配”总是有好处的。

至于您从编译器遇到的具体狭窄问题，我怀疑问题是编译器不知道它是否应该在您分配到时发出保留和释放`*target`。它希望您显式声明指向指针的所有权特征。我目前无法检查，但我想将其声明为`__strong NSData** target`可行。也就是说，它对是否`target`拥有它所指向的东西不感兴趣，因为一个人不能拥有一个指针。`NSData*`它对指向哪个指针的指针是否`target`拥有`NSData`它指向的对象感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T20:22:25.450

通常，当您在 ARC 之外执行此类操作时，您会执行以下操作：

```
NSData* returnedParm;
[someObj doSomething:&returnedParm]; 
```

在来电者一侧。我没有看到你的相当于我`returnedParm`上面的。（我从来没有在 ARC 上试过这个，但我认为基础必须是相似的。）

声明一个属性就像`NSData**`声明一个指向非对象的指针并且它不会被保留（因为没有要保留的对象）。

我的猜测是你应该将你的函数原型化为：

```
-(void)doSomething:(NSData* __autoreleasing*)theReturnParm 
```

并在该函数内使用`*theReturnParm = something;`.

然后在调用方，您`returnedParm`会将您的值作为自动释放值（因此，如果您想保留它，您应该相对快速地将其分配给`strong`指针）。

# debugging - 当我使用虚拟主机时，如何在 pdt 中调试 php 脚本？

> ID：10509414
> 
> 赞同：2
> 
> 时间：2012-05-09T03:21:24.957
> 
> 标签：debugging, eclipse-pdt

我正在使用 apache 重写模块，并添加这样的虚拟主机：

```
<VirtualHost *:80>
  DocumentRoot "D:\wamp\www\fuel\public"
  ServerName fuel.local
</VirtualHost> 
```

然后将 .htaccess 文件 rewrite all 添加到 index.php

我还使用配置如下的新 php 服务器设置 pdt 调试环境：

*   服务器名称 ：`fuel.local`
*   基本网址：`http://fuel.local`
*   本地网络根：`D:\wamp\www\fuel\public\`
*   并选择文件：`/fuel/public/index.php`

但是当我开始调试时，url 生成如下：

`http//fuel.local/fuel/public/index.php?XDEBUG_SESSION_START=ECLIPSE_DBGP&KEY=13365326777529`

但是，我想要这样的网址：

`http//fuel.local/index.php?XDEBUG_SESSION_START=ECLIPSE_DBGP&KEY=13365326777529`

谁能告诉我该怎么做？

使用 eclipse-php2 时，有一个复选框不会自动生成 url。

我正在使用 eclipse-php-3.0.2.v2011102768-Win32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:34:19.890

我发现自己有同样的问题，所以我发现你需要隐藏的东西是由于 PDT 插件中的一个烦人的错误

**创建新的调试配置**

*   打开日食
*   选择 Run > Debug Configurations… 菜单选项
*   双击 PHP Web Page 选项
*   设置以下字段
*   名称：$域
*   PHP 服务器：$ 域
*   文件：浏览到属于您要调试的该域的文件
*   Breakpoint > Break at First Line：如果您不想在文件的第一行中断，请取消选中此项

*   URL > 自动生成：如有必要，取消选中（在第一个复选框中结束 / 并在第二个复选框中开始 / 就可以了）----- 这个丢失了，正是您需要的.. 尝试 ZendStudio 试用版

*   单击应用按钮

*   单击关闭按钮

我希望这将在 2012 年 6 月 23 日使用新的 pdt 插件修复。

# java - 为什么我会得到 java.lang.UnsatisfiedLinkError: 找不到依赖库？

> ID：10509415
> 
> 赞同：2
> 
> 时间：2012-05-09T03:21:27.063
> 
> 标签：java, opencv

我使用 Java 和 OpenCV 为我的人脸检测程序编写了代码。以前我的程序可以在我的旧电脑上运行。但后来我试图在我的新电脑上运行我的程序，我得到了这个错误。我需要安装/包含任何东西来解决这个问题吗？

> 线程“AWT-EventQueue-0”java.lang.UnsatisfiedLinkError 中的异常：C:\Users\edaranadmin\AppData\Local\Temp\jniopencv_core7490305950243316892.dll：找不到依赖库

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:48:42.947

*   安装 microsoft c++ 2010 redistributable x64。
*   将“C:\opencv\build\common\tbb”作为环境变量中的路径。
*   下载 javacv-0.1.jar 并将其作为项目中的库文件。
*   如果问题存在，请从 Internet 下载 cv100.dll、cvcam100.dll、cxcore100.dll、opencv_highgui220.dll 并将其复制到 system32。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:12:03.287

您必须安装 OpenCV 才能拥有 dll ;)

你会在那里找到所有的解释： [http ://code.google.com/p/javacv/wiki/Windows7AndOpenCV](http://code.google.com/p/javacv/wiki/Windows7AndOpenCV)

# c# - C# 模拟日期时间

> ID：10509417
> 
> 赞同：1
> 
> 时间：2012-05-09T03:21:48.797
> 
> 标签：c#, datetime, simulation

我想模拟日期时间。假设我有要执行的操作列表，每个操作都有一个日期时间字段。当该日期时间到来时，应该执行该操作。我可以用 DateTime.Now 检查日期时间；但是我怎样才能模拟 DateTime。我的意思是如果当前时间是下午 2 点。行动应该在下午 4 点、5 点运行。我可以使用模拟当前时间到下午 4 点，第一个动作将执行，一小时后将执行第二个动作。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:37:00.607

前段时间我发布了一些关于以这种方式测试日期的方法：

[http://ivowiblo.wordpress.com/2010/02/01/how-to-test-datetime-now/](http://ivowiblo.wordpress.com/2010/02/01/how-to-test-datetime-now/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:31:15.000

这实际上是一个复杂的问题，但幸运的是有一个解决方案： [野田时间](http://noda-time.blogspot.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T03:55:16.163

最简单的方法是注释掉检查 DateTime.Now 的部分并创建一个新的方法/属性，您可以调用它来返回一组脚本时间。

例如：

```
class FakeDateTime
{
    private static int currentIndex = -1;
    private static DateTime[] testDateTimes = new DateTime[]
        {
            new DateTime(2012,5,8,8,50,10),
            new DateTime(2012,5,8,8,50,10)  //List out the times you want to test here
        };

    /// <summary>
    /// The property to access to check the time.  This would replace DateTime.Now.
    /// </summary>
    public DateTime Now
    {
        get
        {
            currentIndex = (currentIndex + 1) % testDateTimes.Length;
            return testDateTimes[currentIndex];
        }
    }

    /// <summary>
    /// Use this if you want to specifiy the time.
    /// </summary>
    /// <param name="timeIndex">The index in <see cref="testDateTimes"/> you want to return.</param>
    /// <returns></returns>
    public DateTime GetNow(int timeIndex)
    {
        return testDateTimes[timeIndex % testDateTimes.Length];
    }
} 
```

如果您想要更具体（或更好）的答案，请提供一些代码示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T04:17:06.773

实现这一点的最简单方法是将系统时钟更改为“测试时间”，运行测试，然后再改回来。这很hacky，我真的不推荐它，但它会起作用。

更好的方法是使用抽象`DateTime.Now`，允许您注入静态值或操作检索到的值以进行测试。鉴于您希望测试值“打勾”，而不是保持静态快照，将 a 添加`TimeSpan`到“现在”将是最简单的。

因此，添加一个名为“offset”的应用程序设置，可以将其解析为`TimeSpan`

```
<appSettings>
    <add key="offset" value="00:00:00" />
</appSettings> 
```

然后在`DateTime.Now`每次检索它时将此值添加到您的值。

```
public DateTime Time
{ 
    get 
    { 
        var offset = TimeSpan.Parse(ConfigurationManager.AppSettings["offset"]);
        return DateTime.Now + offset;
    }
} 
```

要在未来运行一小时二十分钟，您只需调整`offset`值

```
<add key="offset" value="01:20:00" /> 
```

理想情况下，您会为 a 创建一个接口`DateTime`并实现依赖项注入，但出于您的目的 - 尽管这是首选 - 我建议打开的蠕虫罐头将为您创造一个混乱的世界。这很简单并且会起作用。

# iphone - CCAnimate 和 CCAnimation 有什么不同？

> ID：10509418
> 
> 赞同：1
> 
> 时间：2012-05-09T03:21:55.003
> 
> 标签：iphone, ios, cocos2d-iphone

我用cocos2d创建了一个新项目，然后创建了一个图层和一个精灵。我正在尝试将动画应用于我的精灵，并且我找到了一些关于它的示例。但我不明白 和 之间的区别`CCAnimation`，`CCAnimate`所以我还没有为我的精灵应用任何动画。

这两者有什么区别，它们的真正含义是什么？如何使用它们？

任何人都可以解释一下吗？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:32:31.780

这是[cocos2d-iphone 编程指南中](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:index)[“使用 Sprites 和 Sprite 批处理节点”](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:animation)中的代码：

```
......

NSMutableArray *animFrames = [NSMutableArray array];
for(int i = 1; i < 15; i++) {
    CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"grossini_dance_%02d.png",i]];
    [animFrames addObject:frame];
}
CCAnimation *animation = [CCAnimation animationWithName:@"dance" delay:0.2f frames:animFrames];
[sprite runAction:[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:animation restoreOriginalFrame:NO]]]; 
```

如您所见，您需要同时使用[`CCAnimate`](http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_animate.html)并[`CCAnimation`](http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_animation.html)在精灵上运行基于 CCSpriteFrame 的动画。根据描述`CCAnimation`：

> 该`CCAnimation`对象包含`CCSpriteFrame`对象，并且帧之间可能存在延迟。您可以`CCAnimation`使用动作为对象设置动画`CCAnimate`。例子：

```
[sprite runAction:[CCAnimate actionWithAnimation:animation]]; 
```

一般来说，`CCAnimation`是框架容器的包装。`CCAnimate`是精灵需要做的动作——实际上它是 的子类[`CCAction`](http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_action.html)，代表精灵可以“跑”的动作，比如移动、跳跃、旋转等。你可以使用它的其他子类来做一些种类在您的精灵上制作动画，而无需自己创建帧。尝试使用`CCFadeIn`,`CCRotateBy`等。

# django - 部署 django - Apache VirtualHost 和 mod_wsgi 的“ImportError”

> ID：10509420
> 
> 赞同：0
> 
> 时间：2012-05-09T03:22:24.333
> 
> 标签：django, apache, httpd.conf

我正在我的网络服务器的端口 81 上部署 django。这是为了让它脱离开发服务器，但我还没有准备好让它作为端口 80 上的根。

问题是每当我尝试访问端口 81 上的任何页面时，我都会看到 django 错误屏幕，它总是说：`ImportError at / No module named mysite.urls`

## httpd.conf

```
Listen 81

NameVirtualHost *:81

<VirtualHost *:81>
   DocumentRoot /home/bill/Desktop/mysite

   WSGIScriptAlias / /home/bill/Desktop/mysite/django.wsgi
   <Directory /home/bill/Desktop/mysite>
      Order allow,deny
      Allow from all
   </Directory>
</VirtualHost> 
```

## /home/bill/Desktop/mysite/django.wsgi

```
import os
import sys

sys.path.append('/home/bill/Desktop/mysite')

os.environ['PYTHON_EGG_CACHE'] = '/home/bill/Desktop/mysite/.python-egg'
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

## 在 mysite/settings.py

```
...
ROOT_URLCONF = 'mysite.urls'
... 
```

`ROOT_URLCONF = 'mysite.urls'`我知道一个正在加载的事实，因为如果我将其更改为其他任何内容（例如“测试”），我会得到`ImportError at / No module named test`

关于这个部署哪里出错了有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:30:25.910

您的部署很好。您的代码需要更正，因为它应该只导入（并随后使用）`urls`。

（虽然`os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'`有点多余。）

# java - AndroidManifest.xml 错误

> ID：10509422
> 
> 赞同：-2
> 
> 时间：2012-05-09T03:23:25.037
> 
> 标签：java, android

```
<?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android">
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
    <activity android:name=".hba1c" android:label="@string/app_name"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我正在尝试学习 Java，需要一些有关 AndroidManifest.xml 的帮助

我的小 hello world 项目在代码方面工作，但我对更改清单感到困惑。具体来说，在上面的代码中，包名称是“com.android”，而在 data/app 中，我的应用程序显示为 com.android-1.apk。当我尝试将其更改为 com.jocala 或 com.jocala.hba1c 之类的内容时，我通过编译得到包 R 不存在错误，这会失败。

我需要做哪些改变？这里还有什么非常糟糕的吗？

我正在使用 Ant、VI 和 Linux 控制台，没有 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:37:29.423

你应该改变java代码的包，让它按照你在manifest文件中定义的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:34:07.677

清单包含与您的 android 应用程序对应的元数据。因此，如果您需要更改包名，请在 java 文件中进行更改，在那里更改包名，在这里进行更改是没有意义的。清单中主要完成的唯一更改是`activity`相关的（对于初学者）。[在这里](http://developer.android.com/guide/topics/manifest/manifest-intro.html)阅读。

# hadoop - Windows 中的 Hadoop

> ID：10509427
> 
> 赞同：2
> 
> 时间：2012-05-09T03:24:02.110
> 
> 标签：hadoop, cygwin

我正在尝试通过 Cygwin 在 Windows 中运行 Hadoop 的示例字数统计程序。我已经安装了 Hadoop 和 Cygwin。

我使用以下语句运行 wordcount 程序：

```
$ bin/hadoop jar hadoop-examples-1.0.1.jar wordcount input output 
```

我收到以下错误：

```
12/05/08 23:05:35 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/05/08 23:05:35 ERROR security.UserGroupInformation: PriviledgedActionException as:suresh cause:java.io.IOException: Failed to set permissions of path: \tmp\hadoop-suresh\mapred\staging\suresh1005684431\.staging to 0700
java.io.IOException: Failed to set permissions of path: \tmp\hadoop-suresh\mapred\staging\suresh1005684431\.staging to 0700
        at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:682)
        at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:655)
        at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
        at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
        at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
        at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:116)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
        at org.apache.hadoop.examples.WordCount.main(WordCount.java:67)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
        at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

我已经在路径变量中设置了 Cygwin bin 路径。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:25:28.930

这是某些 Hadoop 版本的已知问题（完整讨论请参见[https://issues.apache.org/jira/browse/HADOOP-7682](https://issues.apache.org/jira/browse/HADOOP-7682)）。

我在 1.0.2 版本中遇到了这个问题，所以我尝试了各种其他版本。

最后，我回到版本 0.22.0 让它工作

如果您回到 0.22.0 版本，您需要对 bin/hadoop-config.sh 脚本进行一些更改：

1.  更改设置 HADOOP_MAPRED_HOME 的行以指向`mapreduce`目录而不是`mapred`目录。
2.  注释掉所有为原生 hadoop 安装设置 java.library.path 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:47:24.250

您应该查看[适用于 windows 的 hadoop 服务](http://social.technet.microsoft.com/wiki/contents/articles/6218.getting-started-with-hadoop-based-services-for-windows-en-us.aspx)- 移植到 windows 的 hadoop 版本。

目前它处于测试阶段，但它应该很快就会发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:10:22.943

我已经设法使这项工作达到调度作业、执行任务和编译结果的程度。

en.wikisource.org/wiki/User:Fkorning/Code/Hadoop-on-Cygwin

# sorting - ASP Classic - 使用 ASC 和 DESC 进行列排序

> ID：10509428
> 
> 赞同：0
> 
> 时间：2012-05-09T03:24:14.177
> 
> 标签：sorting, asp-classic

我已经给出了一个表格，我需要添加支持（提供排序功能以按升序和降序方向对报告表列记录进行排序），其中用户在报告表中选择“**排序依据**”选项并选择**ASC**或**DESC**。

你能帮忙吗..一个简单的例子就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:44:33.303

就我个人而言，我会使用[jQuery](http://jquery.com/)和[table sorter 插件对其客户端进行排序](http://tablesorter.com/docs/)

# android - -webkit-transform 在 Android webview 中不起作用

> ID：10509432
> 
> 赞同：5
> 
> 时间：2012-05-09T03:25:10.677
> 
> 标签：android, css, webview, webkit, rotation

我已将以下 css 应用于 span 标签中的图像。

```
-moz-transform: rotate(-2deg);
-webkit-transform: rotate(-2deg);
transform:rotate(-2deg);
-o-transform: rotate(-2deg); 
```

这种 css 样式适用于 ios webview、桌面浏览器，但不适用于同样基于 webkit 的 android webview。

我的问题是为什么这不在 Android 上呈现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:32:25.833

AFAIK，旋转变换仅适用于块级元素。默认情况下，跨度是内联元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T04:56:42.543

我正在使用 android 3.1 版，这段代码对我来说很好。我的代码在下面

```
.transofmr
{
-ms-transform: rotate(30deg); /* IE 9 */
-webkit-transform: rotate(30deg); /* Safari and Chrome */
-o-transform: rotate(30deg); /* Opera */
-moz-transform: rotate(30deg); /* Firefox */
transform: rotate(30deg);

width:200px;
height:200px;
background-color:#339933;
}
<div class="transofmr">Transform</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:34:59.370

这将帮助你..我已经在 Motorlla XOOM 设备中检查过这个..

```
.transofmr
{
transform: rotate(30deg);
-ms-transform: rotate(30deg); /* IE 9 */
-webkit-transform: rotate(30deg); /* Safari and Chrome */
-o-transform: rotate(30deg); /* Opera */
-moz-transform: rotate(30deg); /* Firefox */
} 
```

# sql-server - Analysis Services 存储过程性能

> ID：10509435
> 
> 赞同：2
> 
> 时间：2012-05-09T03:25:18.083
> 
> 标签：sql-server, ssas, mdx, clrstoredprocedure

我正在.NET 中编写一个存储过程来执行一些在纯 MDX 中无法轻松编写的复杂计算。我遇到的第一个问题是如何以表格形式检索一组数据以传递给我的计算。

到目前为止，我的代码写在下面。我会认为，在我们在位置 ** *1 检索我们的值之后，我们将拥有内存中的所有数据进行交互。但是，似乎在 ** *2 位置，我们范围内的每一天都会向存储引擎发出一个 Query Subcube。这对性能是毁灭性的。

有什么我做错了吗？我可以调用另一种方法来一次评估集合吗？

```
// First get the date range that we'd like to calculate over.
// (These values are constant here for example only)
DateTime date = new DateTime(2012, 4, 1); 
int dateFrom = KeyFromDate(date.AddDays(-360));
int dateTo = KeyFromDate(date);

string dateRange = string.Format(
  "[Date].[Date].&[{0}]:[Date].[Date].&[{1}]", 
  dateFrom, 
  dateTo
);

Expression expression = new Expression(dateRange + "*[Measures].[My Measure]");
MDXValue value = expression.CalculateMdxObject(null); // ***1

foreach (var tuple in value.ToSet().Tuples)
{
  MDXValue tupleValue = MDXValue.FromTuple(tuple).ToInt32(); // ***2
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:35:10.653

运行 SQL Profiler，连接到分析服务，在“事件选择”选项卡上选中“显示所有事件”并选择“从聚合中获取数据”、“从缓存中获取数据”、“查询子程序”和“查询子立方体详细信息”。

首先阅读此文档[http://www.microsoft.com/en-us/download/details.aspx?id=17303](http://www.microsoft.com/en-us/download/details.aspx?id=17303) - 请参阅第 18 页 - 以了解“查询子立方体详细信息”是如何工作的。

然后在调试模式下的 Visual Studio（您正在调试您的过程）中，通过第 **1 行并在 SQL Profiler 中查看详细查询的内容 - 什么度量值组和什么属性。

然后通过 ***2 并在 SQL Profiler 中再次查看详细事件中查询的内容。

我相信这组属性是不同的，所以它可能会发生在 ** *1 中它使用一些聚合，并且当元组中存在“值”时 * *2 到位*- 这组属性没有聚合，因此不是“从聚合中读取”一次，而是多次“从度量组缓存中读取”。

我不能说得更准确，因为我没有你的立方体。尝试通过“查询子多维数据集详细”事件找出这一点，并尝试使用 BIDS Helper 手动创建必要的聚合（具有特定的属性集） - 它可能会有所帮助。

# javascript - 如何使用 Javascript 为特定邮箱创建 Outlook 任务？

> ID：10509440
> 
> 赞同：1
> 
> 时间：2012-05-09T03:25:34.900
> 
> 标签：javascript, outlook, activex, ms-office, ole

我正在尝试在本地仅 IE 环境（使用 Outlook 2007/2010）中使用 JavaScript 自动创建 Outlook 任务。我已经能够使用 Outlook ActiveX 对象执行此操作，但有一个小问题，我的方法在用户的默认邮箱中创建任务。（下面代码中的9是任务文件夹的枚举常量）

我需要做的是在单独的共享邮箱中创建任务。我正在寻找一种方法来按名称而不是用户的个人（默认）文件夹将任务设置为特定的共享邮箱（用户有权访问）。到目前为止我所拥有的如下。

```
 function createTask() {
               //create Outlook object and map to the task folder
                var outlookApp = new ActiveXObject("Outlook.Application");
                var nameSpace = outlookApp.getNameSpace("MAPI");
                var mailFolder = nameSpace.getDefaultFolder(9); //olFolderTask

               //create the task
               var task = mailFolder.Items.add('IPM.Task');
                //set task properties 
                task.Subject = 'Subject';
                task.Body = "Body of Task";          
                task.StartDate = "01/01/2012";
                task.DueDate = "06/01/2012";
                task.ReminderSet = true;
                task.Save();
      } 
```

我在[这里](http://msdn.microsoft.com/en-us/library/ff861238.aspx)找到了一些可能有用的信息，它可以替代 GetFolderFromID 中的 getDefaultFolder 函数，但我无法找到使用 JavaScript/ActiveX 仅从共享邮箱名称中获取所需 EntryID 的方法。

我是使用 Outlook 的新手，任何建议或指导将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:42:54.983

尝试使用[此 SO post](https://stackoverflow.com/a/9231786/175679)[`Session.Stores`](http://msdn.microsoft.com/en-us/library/ff864790.aspx)中讨论的。它包含用户在其个人资料中拥有的所有可用邮箱存储 ( )。[*`Store`*](http://msdn.microsoft.com/en-us/library/ff862128.aspx)

一旦您确定了`Store`您的目标，您就可以使用它[`Store.GetDefaultFolder`](http://msdn.microsoft.com/en-us/library/ff869924.aspx)来检索[`Folder`](http://msdn.microsoft.com/en-us/library/ff863890.aspx)您感兴趣的共享邮箱任务。

# python - 是否可以将参数传递给 Django 模板中的模型类的方法？

> ID：10509441
> 
> 赞同：1
> 
> 时间：2012-05-09T03:26:08.543
> 
> 标签：python, django, django-templates

我有一个名为`UserProfile`定义为的模型

```
class UserProfile(models.Model):
    user       = models.OneToOneField(User, related_name='userprofile_from_user')
    user_types = models.ManyToManyField(UserType, related_name='userprofiles_from_user_types', null=True, blank=True)

    def has_user_types(self, user_types):
        return self.user_types.filter(name__in=user_types).count() 
```

`UserType`定义为

```
class UserType(models.Model):
    TYPE_CHOICES = (
        ('ad', 'administrator'   ), # 1
        ('mo', 'moderator'       ), # 2
        ('vi', 'viewer'          ), # 3
        ('pm', 'property manager'), # 4
        ('po', 'property owner'  ), # 5
        ('vm', 'vendor manager'  ), # 6
        ('ve', 'vendor'          ), # 7
        ('te', 'tenant'          ), # 8
    )

    name = models.CharField(max_length=2, choices=TYPE_CHOICES) 
```

我希望能够使用`UserProfile`'s 方法`has_user_types()`。在一个视图中，我会做类似的事情

```
if user.profile.has_user_types(['ad', 'mo', 'pm']):
    # The user is any combination of an administrator, moderator, or property manager. 
```

但是我可以在模板中做同样的事情吗？我正在专门检查一些用户类型，所以我想做类似的事情

```
{% if user.profile.has_user_types(['te']) %} 
```

我知道我可以简单地定义`is_tenant()`在模型中调用的另一个方法（不带参数），但我也想检查其他用户类型，我想知道是否可以合并`has_user_types()`.

**边问：**如果Django的默认模板做不到，那么[Jinja2](http://jinja.pocoo.org/)能做到吗？

* * *

**解决方案**

感谢 Ignacio Vazquez-Abrams 的帮助！

`custom_tags.py`：

```
@register.assignment_tag
def has_user_types(user_pk, *args):
    user = User.objects.get(pk=user_pk)

    return user.profile.has_user_types(args) 
```

模板：

```
{% load has_user_types from custom_tags %}

{# I pass the pk because I want to be able to pass any user, not just request.user #}
{% has_user_types user.pk "te" as is_tenant %}
{% if is_tenant %}
    {# Show something #}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:28:12.120

不。编写一个[自定义过滤器或模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)来检查它们。

# windows - 回收站如何工作（硬件层）？

> ID：10509452
> 
> 赞同：-1
> 
> 时间：2012-05-09T03:29:10.367
> 
> 标签：windows, hardware, hardware-interface, recycle, recycle-bin

我对删除文件时硬件（硬盘）会发生什么感兴趣。

我的意思是，当用户决定从回收站中删除所有文件时，我正在寻找有关硬件进程的一些信息。

我对 Windows 操作系统很感兴趣。我刚刚找到了这样的技术信息：数据擦除[http://en.wikipedia.org/wiki/Data_erasure](http://en.wikipedia.org/wiki/Data_erasure)

有任何疑问或问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:44:05.537

回收站与硬件无关。它只是一个特殊的文件夹。当您将文件/文件夹移动到回收站时。Windows 只是调用 ZwSetInformationFile 来“重命名”它。如您所知，当打开文件时。您不能直接删除/删除它，但可以重命名它。回收站就是这样工作的。然后，当您尝试清空回收站时，它只会从文件系统中删除文件/文件夹。（实际上只是在文件系统中设置了一个文件标志，并没有直接擦除数据）。

就这样。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:41:19.603

没有“硬件中的过程”。清空回收站只是执行一堆文件删除操作，这意味着将一些块标记为不再分配，并从目录中删除目录条目。在硬件层面，这些只是普通的磁盘写入。数据不会以任何方式被破坏。有关更多详细信息，请查找对您正在使用的文件系统（即 NTFS）的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T06:23:35.540

每个文件系统都有一种删除或释放文件的方法。磁盘上的扇区不会被擦除，最终它们可能会被重新用于其他文件，并且随着时间的推移，旧的、已删除的文件不存在。

如果您阅读链接页面的第一句话，您会看到“基于软件的方法”，硬件对文件或文件系统一无所知，绝对不是具有回收站抽象的文件（目录条目只是移动到其他目录，文件进入回收站时未移动或删除）。硬件处理旋转电机、移动磁头、查找/读取/写入扇区。分区、文件的概念，删除与否都是软件领域，硬件不知道也不关心。

您引用的文章与媒体有关。想想用铅笔在纸上写点什么，然后擦掉，写点别的。纸张已被铅笔两次压缩，使用正确的工具，您可能可以从纸张的压痕中找出部分或全部原始文本。您想出售、捐赠或扔掉一台计算机，您如何确保不会有人提取您的银行账户或其他敏感信息？在那张纸上，你可以把它烧掉并磨碎灰烬（那时不能卖那张纸来赚钱）。或者你可以以一种非常混乱和随意的方式在你写过的部分上乱涂乱画，这样你原来和第二次写的论文中的缩进就被淹没在噪音中了。除了随意涂鸦，你还写字，真实的单词或字母，但不敏感，只是为了摆脱任何将涂鸦与真实字母区分开来的尝试。硬盘硬件在这里没有什么特别之处，它是旋转电机，移动磁头，寻找扇区并读取和写入它们，没什么特别的。该软件正在做的是试图使那些看起来与真实信息足够相似的随机涂鸦不会让真实信息在噪音中脱颖而出。您必须对数据的编码有所了解，0x12345678 值在存储在硬盘上时不使用这些位，为了使回读更可靠，实际位被转换为不同的位，并且反向转换回去的路。因此，您想知道选择混沌模式，当放置在磁盘上时，实际上会锻炼磁盘上的所有点，而不是一些并跳过其他点。理想情况下，导致磁盘上的每个位置（因为没有更好的术语）被多次写入 1 和 0。

如果你能忍受我，有趣的相关历史课。有这些东西叫做软盘。[http://en.wikipedia.org/wiki/Floppy_disk](http://en.wikipedia.org/wiki/Floppy_disk)有很长的历史，但特别是在相同大小的磁盘中，密度发生了变化（这再次发生了不止一次）。较旧的技术尽其所能，使用“位”来划分行业，因为它没有一个更好的术语，因为它可以做到尽可能小。后来，技术变得更好，可以放下小块或不到一半的尺寸。你可以拿一张过去写的磁盘，然后在新驱动器上读取它。您可以使用新驱动器覆盖该磁盘上的文件并重新使用该磁盘（使用新驱动器）。您可以拿一个新磁盘并在新驱动器上写入文件并在旧驱动器上读取，但是如果您将旧磁盘中的文件由旧驱动器写入，删除并覆盖新驱动器上的新文件，则不一定可以读取这些文件旧驱动器上的文件，旧驱动器实际上可能会看到旧文件或新文件，或者只是无法读取任何内容。要将该磁盘从新驱动器重用到旧驱动器，您必须在旧驱动器上格式化磁盘，然后在新驱动器上写入文件，然后在旧驱动器上读取...为什么...在白板上写一些字在大写字母中，一英尺高的大字母。拿起橡皮擦，只擦掉中间两英寸的路径，然后写一些两英寸高的单词。两个都能读吗？取决于您写的内容，但通常是的，您可以。在干净的白板上，写两英寸的字母，你能读出你写的字吗，是的。较新的驱动器始终具有较小的焦点，当使用较旧的较小尺寸格式化磁盘时，它们不会写入大的胖位，而在以较高密度格式化的磁盘上写入时，它们总是会写入小尺寸的位。读旧盘的时候虽然很大，但读的还行，擦改写就像白板上的大字，只擦掉中间的一条路，就在那条小路上写。新的驱动器只能沿着狭窄的路径读取，它们只能读取 2 英寸的字母，根本看不到 1 英尺的大字母。旧磁盘同时看到旧的一英尺字母和两英寸字母，并且取决于哪个具有显性位，它会读取或者经常无法读取。他们只能阅读两英寸的字母，根本看不到一英尺的大字母。旧磁盘同时看到旧的一英尺字母和两英寸字母，并且取决于哪个具有显性位，它会读取或者经常无法读取。他们只能阅读两英寸的字母，根本看不到一英尺的大字母。旧磁盘同时看到旧的一英尺字母和两英寸字母，并且取决于哪个具有显性位，它会读取或者经常无法读取。

这些磁盘擦除想要做同样的事情，每次你旋转媒体并移动磁头它并不完全完美，有一些错误，你不是每次都改变媒体上完全相同的一组分子的电荷当你沿着那条路行驶时，会有一点摆动。以道路为例。道路上的车道比汽车宽，如果你有一个与汽车一样宽的油漆刷，在你第一次沿着马路行驶时画了一条线，现在你想在这条线上画，这样没人可以确定你原来的秘密颜色是什么。那条路你要开很多次（不作弊你不能一次拥抱路的一侧，另一次拥抱路的另一侧，每次都需要假装是硬件，尽力做到永远是尽可能靠近中间，作为硬件，您不知道软件的目标是什么）允许第一次通过的位置错误被后一次通过的错误所覆盖。您希望在每次通过时使用不同颜色的颜料，以便最终绘制条纹的边缘是彩虹色，从而无法分辨哪个是原始颜色。同样在这里用许多次写入击败硬盘驱动器，每次通过使用不断变化和不同的数据，直到原始写入的原始电荷即使在边缘也无法被隔离和解释。您希望在每次通过时使用不同颜色的颜料，以便最终绘制条纹的边缘是彩虹色，从而无法分辨哪个是原始颜色。同样在这里用许多次写入击败硬盘驱动器，每次通过使用不断变化和不同的数据，直到原始写入的原始电荷即使在边缘也无法被隔离和解释。您希望在每次通过时使用不同颜色的颜料，以便最终绘制条纹的边缘是彩虹色，从而无法分辨哪个是原始颜色。同样在这里用许多次写入击败硬盘驱动器，每次通过使用不断变化和不同的数据，直到原始写入的原始电荷即使在边缘也无法被隔离和解释。

请注意，基于固态闪存的驱动器的工作方式不同，可能存在写入均衡方案来防止闪存的某些部分先于其他部分磨损。而且您可能会使用相同的软件级解决方案（软件不一定知道它是 ssd 与机械驱动器），或者它可能无法工作并且需要新的解决方案。ssd 的问题是它是基于闪存的，所以在你磨损它之前有有限数量的写入周期，用大量混乱的写入来冲击它，只是磨损它。

这与windows和回收站有什么关系，绝对没有，您将某些内容发送到回收站与将其复制到另一个目录没有太大区别，没有任何内容被破坏。当您删除文件时，大部分文件仍然存在，完好无损，在目录条目上，也许是某种文件分配表，列出了已使用的空闲扇区的东西，已更改，扇区本身不一定会更改，您的数据是在那里，对于拥有正确工具的人来说，阅读所有“已删除”文件（在删除它们后不久）非常容易。

如果您不希望人们看到您的旧数据，请卸下驱动器，打开并卸下盘片并将其磨成灰尘。这是销毁您的敏感信息的唯一有保证的方法。

# php - 如何使用 Sphinx 和 CakePHP 分页修复错误的结果计数？

> ID：10509454
> 
> 赞同：1
> 
> 时间：2012-05-09T03:29:31.973
> 
> 标签：php, cakephp, cakephp-1.3, sphinx

Sphinx 搜索显示正确的结果，但我遇到了分页问题。如果我的搜索返回 3 条记录，它将显示“第 1 页，共 1 页，显示总共 15 条记录中的 15 条记录，从记录 1 开始，到 15 结束”。假设我的关键字是“如何”，`app/views/posts/index.ctp`显示 3 条带有“如何”一词的记录，但我的分页显示“显示总共 15 条记录中的 15 条记录”而不是“显示总共 3 条记录中的 3 条记录”。

我的代码中有这些行：

```
$sphinx = array('matchMode' => SPH_MATCH_ALL, 'sortMode' => array(SPH_SORT_EXTENDED => '@relevance DESC')); 
    $results = $this->Post->find('all', array('search' => $this->data['Post']['query'], 'sphinx' => $sphinx)); 
    $this->set('posts', $results, $this->paginate()); 
```

我应该如何修复分页，以便显示找到的正确数量的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:38:36.397

首先，您没有为社区提供足够的信息来了解问题所在......

我可以建议您尝试基于 AJAX 的分页（[link1](http://book.cakephp.org/1.3/view/1234/AJAX-Pagination)，[link2](http://book.cakephp.org/1.3/view/1600/Ajax-Pagination)）并将其输出包含在您的 sphinx 输出中，但我不知道您是否遇到（仅）连接到 Shpinx 或 Cake，或两者的问题？

# iphone - 在运行时动态确定内存使用情况

> ID：10509461
> 
> 赞同：0
> 
> 时间：2012-05-09T03:30:21.630
> 
> 标签：iphone, objective-c, ipad

有没有办法查看您的应用程序在运行时使用了多少内存？然后，您可以有条件地选择是否允许用户加载更多资产。例如，一个可以让您拼贴照片的应用程序，根据导入照片的大小，您允许的照片总数量可能因项目而异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:32:52.143

使用以下函数，它将在运行时为您提供内存使用情况。您可以在代码中进行某些分配之前和之后调用此函数。所以它会给你一些分配的内存使用情况，你可以知道内存在哪里增加。

```
void memory_report(void) {
        struct task_basic_info info;
        mach_msg_type_number_t size = sizeof(info);
        kern_return_t kerr = task_info(mach_task_self(),
                                       TASK_BASIC_INFO,
                                       (task_info_t)&info,
                                       &size);
        if( kerr == KERN_SUCCESS ) {
            NSLog(@"Memory in use (in bytes): %u", info.resident_size);
        } else {
            NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
        }
    } 
```

希望对你有帮助..

# javascript - 使用 jQuery 在手风琴中悬停时隐藏/显示内部 div

> ID：10509463
> 
> 赞同：1
> 
> 时间：2012-05-09T03:30:33.533
> 
> 标签：javascript, jquery

请看下面我的 HTML 代码：

```
<div class="accordion">
<ul>
   <li class="box1">
     <div class="normal"> CONTENT HERE </div>
     <div class="expanded"> CONTENT HERE </div>
     <div class="hidden"> CONTENT HERE </div>
   </li>
   <li class="box2">
     <div class="normal"> CONTENT HERE </div>
     <div class="expanded"> CONTENT HERE </div>
     <div class="hidden"> CONTENT HERE </div>
   </li>
   <li class="box3">
     <div class="normal"> CONTENT HERE </div>
     <div class="expanded"> CONTENT HERE </div>
     <div class="hidden"> CONTENT HERE </div>
   </li>
</ul>
</div> 
```

基本上它是一个由 jQuery 插件驱动的手风琴。它有 3 个框，根据用户悬停在哪个框上，我希望显示或隐藏内部 div（正常、展开、隐藏）。以下是场景：

1.  默认情况下，所有 div.normal 将默认显示，div.expanded 和 div.hidden 将被隐藏。
2.  例如，当用户将鼠标悬停在 li.box1 上时，它的 div.expanded 将被显示，而 div.normal 和 div.hidden 将被隐藏。然而，对于 li.box2 和 li.box3，只有 div.hidden 将分别显示，其余的 div 将被隐藏。

我已经从代码开始，但我认为它不会去任何地方。（我是设计师，你看。）

这听起来很复杂，但我知道它可以通过 jQuery 轻松完成，对任何可以提供帮助的人来说，我都会非常感激。

更新：这是我到目前为止所做的。

```
$(document).ready(function () {
  $(".accordion li").hover(function () {

    $(this).siblings().children(".normal").hide();
    $(this).siblings()..children(".hidden").delay(700).show();
    $(this).children(".expanded").delay(700).show();

    }, function () {

    $(this).siblings().children(".normal").delay(700).fadeIn("fast");
    $(this).siblings().children(".hidden").fadeOut("fast");
    $(this).children(".expanded").fadeOut("fast");

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:40:45.587

```
$(document).ready(function(){

        $('.expanded').hide();

        $('.box1').hover(function(){
                    $('.expanded').show();
        });
}); 
```

这是在 jQuery 中隐藏和显示 DOM 元素的方法。请按照您想要的方式获取该设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:42:58.427

您最初可以使用 style='display:none' 来隐藏 div 用于悬停事件；

```
 $("li.box1").hover(function(){
     $(this).find('.expanded').show();
     $(this).find('.hidden').show();
    $(this).find('.normal').hide();
 }); 
```

# regex - Perl 或 python 正则表达式拆分管道和引号

> ID：10509464
> 
> 赞同：1
> 
> 时间：2012-05-09T03:30:48.273
> 
> 标签：regex, perl, split, pipe

我正在尝试解析以下字符串-

输入：`"1"|"abc xyz"||"a|25|30"|2345`

输出：

```
"1"
"abc xyz"

"a|25|30"
2345 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T03:54:46.650

```
#!perl
use strict;
use warnings;
use Text::CSV;

my $in = q{"1"|"abc xyz"||"a|25|30"|2345};
my $csv = Text::CSV->new({ sep_char => '|', quote_char => '"' });
$csv->parse($in);
print $_, "\n" for $csv->fields; 
```

## 输出：

```
1
abc xyz

a|25|30
2345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:03:56.177

CSV 解析器删除引号。这些解决方案使它们保持完整。

```
use Text::ParseWords qw(quotewords);
quotewords(qr'[|]', qr("), q("1"|"abc xyz"||"a|25|30"|2345));
# (
#     '"1"',
#     '"abc xyz"',
#     '',
#     '"a|25|30"',
#     2345
# )

use Data::Record qw();
use Regexp::Common qw(delimited);
my $r = Data::Record->new({ split => qr'[|]', unless => $RE{quoted} });
$r->records(q("1"|"abc xyz"||"a|25|30"|2345));
# (
#     '"1"',
#     '"abc xyz"',
#     '',
#     '"a|25|30"',
#     2345
# ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:59:30.367

```
use strict;
use warnings;

my $input = q{"1"|"abc xyz"||"a|25|30"|2345||"2"|"z|6|7"|"jkl"||b};
print $& eq '||' ? "\n" : "$&\n" while $input =~ /".*?"|\w+|\|.{0}\|/g; 
```

**输出**：

```
"1"
"abc xyz"

"a|25|30"
2345

"2"
"z|6|7"
"jkl"

b 
```

# java - 适当的数据结构或实现类来保存一个小但不断变化的集合

> ID：10509468
> 
> 赞同：4
> 
> 时间：2012-05-09T03:31:08.800
> 
> 标签：java, data-structures, concurrency

我已经编写了以下[游戏服务器](https://github.com/menacher/java-game-server)并希望提供组功能。组将允许将屏幕上“附近”的玩家组合在一起。在快速动作游戏中，由于玩家会不断地进出他们的区域，所以这个群体会快速变化。

由于每个玩家都需要收听组中其他玩家的事件，因此玩家将订阅该组。这让我想到了我的问题。在这种情况下可以使用什么适当的数据结构或 java 集合类来保存组上不断变化的事件侦听器集？在我看来，一个组的听众数量很少会超过 20，并且在大多数情况下应该少于这个数量。它是一个多线程环境。

我打算使用的是`CopyOnWriteArrayList`. 但是由于会有合理数量的更新（由于订阅的变化），这个类是否合适？还有什么其他类可以使用？如果您有任何使用数组等的自定义实现，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:24:29.853

除非您每秒有数百万次更改（这在您的场景中似乎不太可能），否则 a`CopyOnWriteArrayList`应该足以满足您的需要。如果我是你，我会使用它。

**如果**您注意到性能问题**并且**您已经分析了您的应用程序**并且**您已经确定这`CopyOnWriteArrayList`是瓶颈，那么您可以找到更好的结构。但我怀疑会是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:36:10.000

玩家是否有整数 ID？如果是这样，那么我有一个**轻量级、不可变的基于数组的集合**类，它可能对您有意义：

*   [http://code.google.com/p/mikeralib/source/browse/trunk/Mikera/src/main/java/mikera/persistent/IntSet.java](http://code.google.com/p/mikeralib/source/browse/trunk/Mikera/src/main/java/mikera/persistent/IntSet.java)

这是为游戏引擎中的类似情况编写的。

但是，我还可以**考虑另一种方法**：如果您要根据附近自动更新组，那么您可能需要考虑*根本不跟踪组*。相反，可以考虑使用一种空间数据结构，让您可以在事件发生时快速搜索附近的玩家，并将事件直接发送给附近的玩家。

通常，您可以使用 2D 或 3D 网格或八叉树，将最小划分大小设置为等于您的组的最大范围。然后附近搜索将只需要检查 9 个（2D 案例）或 27 个（3D 案例）位置即可找到所有附近的玩家。我认为在需要时进行此搜索将比一直维护组和侦听器列表的开销更快、更简单......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:30:44.930

根据我收集到的信息，您可以在 和 之间进行`CopyOnWriteArrayList`选择`ConcurrentHashMap`：

CopyOnWriteArrayList：

1.  添加/删除操作的计算成本与列表的大小成线性关系。在一次迭代中可能会发生多次（组通知）。
2.  具有恒定读取时间的更简单的数据结构。

并发哈希映射：

1.  添加/删除操作是一个恒定时间操作。订阅者的添加或删除不会影响已经在进行的迭代，并且可以最大限度地减少阻塞。
2.  更大的数据结构，需要稍长的读取时间。

在效率方面创建自定义解决方案是可能的，但在线程安全方面可能不那么安全。我倾向于，`ConcurrentHashMap`但获胜者可能在很大程度上取决于你的游戏结果。

# python - 使用 Python win32api 模块控制 Steam 游戏

> ID：10509470
> 
> 赞同：0
> 
> 时间：2012-05-09T03:31:23.760
> 
> 标签：python, winapi, pywin

我正在做一个陀螺鼠标。驱动程序脚本读取传感器输入并使用 win32api 命令相应地移动鼠标。

```
win32api.SetCursorPos((xStart-int(dh*xsensitivity),ypos)) 
```

当我打开诸如反恐精英之类的全屏游戏时，鼠标根本无法使用。只有点击输入功能，但它们会导致枪直指并执行一种扣押。

有什么方法可以让我与游戏中的任何鼠标控件交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:11:56.270

我对 Windows 编程不是很熟悉，但我最好的猜测是视频游戏（反恐精英）正在使用 DirectInput（来自 DirectX）方法来读取鼠标行程。也就是说，它使用 DirectInput 来获取鼠标运动事件，并且 Python win32api.SetCursorPos 将光标“扭曲”到给定位置并且不生成任何中间运动消息。

您很可能需要使用 MS Win32 API 调用 SendInput 来构造鼠标移动消息并将它们推送到操作系统级别的事件队列中。

如果您熟悉 .NET 技术，您可以尝试使用[IronPython](http://ironpython.codeplex.com/)（一种可以与 .NET 运行时交互的 Python 解释器）。在这种情况下，[Codeplex 的 Input Simulator 项目](http://inputsimulator.codeplex.com/)定义了将鼠标移动事件推入输入队列的方法。

# java - 具有多个值键的 HashMap

> ID：10509471
> 
> 赞同：2
> 
> 时间：2012-05-09T03:31:36.980
> 
> 标签：java, hashmap

是否可以创建一个键是整数数组的 HashMap？

我习惯使用 Python，最近我开始使用 Java。在我的工作中，我需要使用以下键创建一个 HashMap：

```
map.put([5,2], 1);
map.put([3,2], 0); 
```

等等。我稍后会用它来测试地图中是否存在一对这样的数字，如果是，那么做一些事情，如果不是，继续。

为此，我尝试了以下方法：

```
Map<Array, Boolean> test = new HashMap<Array, Boolean>();
int[] a1 = {5,2};
test.put(a1, true); 
```

Eclipse 给出消息（“参数不适用于 int[]...”）。但是我所做的任何配置都会出现一些错误。

我尝试使用 ArrayList、地图内的对象、嵌套的 HashMap 等等，但都没有工作（在 python 中这很容易，我只写 dict[(5,2)] = 1，所以我想象在 Java 中）像这样简单的东西）。有人建议我将数字转换为字符串并在其间添加一个冒号，例如：

```
map.put("5:2", 1); 
```

后来我再次打破了字符串，但如果这是解决方案，我将回到 Python ;)!!

可能这是一个非常简单的问题，但我找不到答案，希望你能帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:34:28.927

如果要检查条目是否存在，可以使用 a [`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)(一个有用的具体实现是[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html).

```
final Set<List<Integer>> population;

population = new HashSet<List<Integer>>();
population.add(Arrays.asList(1, 2));

if (population.contains(Arrays.asList(1, 2)))
{
  ...
} 
```

您可以`List`像我在上面所做的那样使用 an - 但这并不能保证您的所有列表都恰好是两个元素长（如果这确实是一个约束）。为了使它更健壮一点，您可以创建自己的类来表示元组。如果您这样做，请确保您实施[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)and [`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)（这里有[一篇解释良好实践](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)的文章）。

[`Arrays.asList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)是在代码中内联创建列表的有用方法。更通用的列表是[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:43:58.110

最简单的事情是 a `Map<List<Integer>, Boolean>`- 甚至只是 a `Set<List<Integer>>`，因为您并不关心密钥是否存在那样的价值。

更多的 java-y 解决方案将是一些代表两个整数的类：

```
public class Coordinate { // or whatever
    private final int x;
    private final int y;

    // constructor and overrides for equals, hashCode and toString
} 
```

然后有一个`Set<Coordinate>`.

这被认为是更惯用的 Java，因为类名准确地告诉您这个集合的用途——并强制它以这种方式使用。`Set<List<Integer>>`另一方面，A可能是很多东西：坐标、抽奖、给定部门人员的 SSN、用于付款的信用卡……程序员无法仅通过查看类型来知道，以及一组表示事物的数字很容易在另一个上下文中意外使用。A`Set<Coordinate>`只能是一组坐标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T03:36:18.770

这有效：

```
Map<List<Integer>,Boolean> map = new HashMap<>();
map.put( Arrays.asList( new Integer(1), new Integer(2) ), false );
map.put( Arrays.asList( 4, 5 ), true ); // Integer type is inferred and ints are autoboxed

map.get( Arrays.asList( 1, 2 ) ); // gets the Boolean object for "false" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T03:32:40.007

实际上 java 的表达能力比 python 低很多，所以你必须编写更多的代码。

我认为您需要通过`ArrayList`以下方式使用地图：

```
ArrayList al = map.get("key");
if (al == null) {
    al = new ArrayList();
    map.put("key", al)
}
al.add(some_object); 
```

您也可以使用数组作为键（如您所要求的），可能您想要一个不可变数组。哈希映射起作用的关键是使用一些对`equals`and有良好实现的对象`hashCode`。

这是在 java 中完成的方式，但您可以使用任何类型的集合，集合更常见。

干杯!

# alfresco - 在过渡期间更新 Alfresco 工作流属性

> ID：10509473
> 
> 赞同：0
> 
> 时间：2012-05-09T03:31:40.630
> 
> 标签：alfresco

我想在任务转换中更新自定义工作流属性（workflowStatus）。详细地说，当我批准工作流时，workflowStatus 更改为“已批准”，而在我拒绝时，此属性更改为“已拒绝”。

我能怎么做？？使用 Javascript 或其他单独的 java 文件（如 AlfrescoJavaScript）编写？我使用 jbpm 工作流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:48:37.980

现在我可以解决了。我为每个转换编写自己的操作类，例如 CustomWorkflowApprove 和 CustomWorkflowReject。在这些课程中，我更新了工作流属性。我的 processdefinition.xml 的一部分如下：

```
<task-node name="approve2">
<task name="dmswf:reviewTask2" swimlane="approver2">
    <event type="task-create">
        <script>
            if (bpm_workflowDueDate != void) taskInstance.dueDate = bpm_workflowDueDate;
            if (bpm_workflowPriority != void) taskInstance.priority = bpm_workflowPriority;
        </script>
    </event>
</task>
<transition name="approve" to="approved" >
    <action class="org.ace.dms.bean.CustomWorkflowApprove"/>
</transition>
    <transition name="reject" to="rejected" >
        <action class="org.ace.dms.bean.CustomWorkflowReject"/>
    </transition>
</task-node> 
```

这是我的 CustomWorkflowAction 类。

```
 package org.ace.dms.bean;

    import org.alfresco.repo.workflow.jbpm.JBPMSpringActionHandler;
    import org.jbpm.graph.exe.ExecutionContext;

    public abstract class CustomWorkflowAction extends JBPMSpringActionHandler {

        public static final String APPROVE = "Approved";
        public static final String REJECT = "Rejected";
        public static final String WORKFLOWSTATUS = "dmswf_workflowStatus";

        public void updateWorkflowProperties(ExecutionContext context,
                String workflowStatus) {
//update custom workflow property dmswf_workflowStatus, you can update any workflow property here
            context.setVariable(WORKFLOWSTATUS, workflowStatus);
        }
    } 
```

这是我的 CustomWorkflowApprove 类。

```
package org.ace.dms.bean;

import org.jbpm.graph.exe.ExecutionContext;
import org.springframework.beans.factory.BeanFactory;

public class CustomWorkflowApprove extends CustomWorkflowAction {

    @Override
    public void execute(ExecutionContext context) throws Exception {
        updateWorkflowProperties(context, CustomWorkflowAction.APPROVE);
    }

    @Override
    protected void initialiseHandler(BeanFactory factory) {
        // TODO Auto-generated method stub
        System.out.println("Initialzize Handler");
    }

} 
```

# prolog - 使用 Prolog 查找所有亲属

> ID：10509474
> 
> 赞同：1
> 
> 时间：2012-05-09T03:31:42.347
> 
> 标签：prolog

我很难弄清楚如何返回与某个人有关的每个人的列表。因此，如果我说亲戚（A，B），A 将是一个人，B 是与该人相关的所有人员的列表。我可以编写任何需要的附加规则来帮助执行此操作。这是我到目前为止所拥有的。

```
man(joe).
man(tim).
man(milan).
man(matt).
man(eugene).

woman(mary).
woman(emily).
woman(lily).
woman(rosie).
woman(chris).

parent(milan, mary).
parent(tim, milan).
parent(mary, lily).
parent(mary, joe).
parent(mary, matt).
parent(chris, rosie).
parent(eugene, mary).
parent(eugene, chris).

cousins(A, B) :- parent(C, A), parent(D, B), parent(E, C), parent(E, D), not(parent(C, B)), not(parent(D, A)), A \=B.

paternalgrandfather(A, C) :- man(A), man(B), parent(B, C), parent(A, B).

sibling(A, B) :- parent(C, A), parent(C, B), A \= B. 
```

有人可以指导我如何去做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:28:02.303

我认为您应该专注于“真实”关系，即`parent(Old,Jung)`其他谓词在这里无关紧要。显而易见的假设是，发生在其中的原子`parent/2`是标识符（即名称是唯一的）。从这张照片看来，这里的所有人都是亲戚：

![在此处输入图像描述](../Images/592af7a577e2fb1988cafc4210714d06.png)

那么你的问题应该等同于在父关系中找到所有连接的顶点。您可以实现深度首次访问，向下传递访问节点列表以避免循环（请注意，您需要返回到父级并返回到子级！），例如

```
relatives(Person, Relatives) :-
    relatives([], Person, [Person|Relatives]).

relatives(Visited, Person, [Person|Relatives]) :-
    findall(Relative, immediate(Person, Visited, R), Immediates),
    ... find relatives of immediates and append all in relatives.

immediate(Person, Visited, R) :-
    (parent(Person, R) ; parent(R, Person)),
    \+ member(R, Visited). 
```

看看你能不能完成这个片段。注意 relatives/3 中的参数顺序选择为 easy maplist/3。

如果您愿意学习更高级的代码，SWI-Prolog[库（ugraph）](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.28%27,swi%28%27/doc/Manual/ugraphs.html%27%29%29)提供了一个`reachable(+Vertex, +Graph, -Vertices)`谓词，它在基于列表的图形表示上进行。

这里是获取图像的 SWI-Prolog 片段（要输入的文件`dot`）：

```
graph(Fact2) :-
    format('digraph ~s {~n', [Fact2]),
    forall(call(Fact2, From, To), format(' ~s -> ~s;~n', [From, To])),
    format('}\n'). 
```

你可以这样调用：

```
?- tell('/tmp/parent.gv'),graph(parent),told. 
```

然后在命令行上发出`dot -Tjpg /tmp/parent.gv | display`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:05:51.173

我认为您应该使用内置谓词 findall/3 和 sort/2 以避免重复

它会沿着这些方向发展：

```
relatives(Person, Relatives):-
  findall(Relative, is_relative(Person, Relative), LRelatives),
  sort(LRelatives, Relatives).

is_relative(Person, Relative):-
  (cousins(Person, Relative) ; paternalgrandfather(Person, Relative) ; sibling(Person, Relative)). 
```

您可能希望向 is_relative 添加更多子句以获得更多关系。

# java - 如何在 Java 中清除控制台 - Eclipse SDK

> ID：10509476
> 
> 赞同：23
> 
> 时间：2012-05-09T03:31:58.970
> 
> 标签：java

我已经搜索了很多地方，但还没有找到有用的东西......必须有办法！所以，我需要的是在 Eclipse 中清除控制台的代码（使其空白）。不，不打印 50 个空白行，清除它！

我找到了这个：

```
Import import java.io.Console;

public void ClearConsole() {
            Console console = System.console();        
            if (console == null)
                    System.out.println("Couldn't get Console object !");
            console.clear();
    } 
```

但它给了我一个错误：“*方法 clear() 未定义控制台类型*”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T15:09:31.603

I may be late with my answer, but here is what I managed to do (and it worked for me):

I created my console based on this tutorial [http://wiki.eclipse.org/FAQ_How_do_I_write_to_the_console_from_a_plug-in%3F](http://wiki.eclipse.org/FAQ_How_do_I_write_to_the_console_from_a_plug-in%3F) , and modified the findConsole method to look like this:

```
private MessageConsole findConsole(String name) {

      ConsolePlugin plugin = ConsolePlugin.getDefault();
      IConsoleManager conMan = plugin.getConsoleManager();

      IConsole[] existing = conMan.getConsoles();
      //if console exists, clear it 
      for (int i = 0; i < existing.length; i++)
          if (name.equals(existing[i].getName())){
              ((MessageConsole) existing[i]).clearConsole(); //this is the important part
              return myConsole;
          }

      myConsole = new MessageConsole(name, null);
      conMan.addConsoles(new IConsole[]{myConsole});
      return myConsole;
   } 
```

So, in the listener of some other button/control/whatever, I have:

```
myConsole = findConsole(ASIO_RECORD_OUTPUT);
myConsoleOut = myConsole.newMessageStream(); 
```

and whenever that piece of code gets executed, my console is cleared. Hope it helps.

edit: Forgot to mention, I did this when creating an RCP application!

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-09T06:41:44.550

*在 Eclipse 工具中，您可以通过右键单击*+*清除*来清除控制台面板，但在 Java 中则不行。

控制台是一个日志工具，为了管理安全，它不能被清除。

# c++ - C++ 中的输入 - cin.getline

> ID：10509477
> 
> 赞同：2
> 
> 时间：2012-05-09T03:32:16.240
> 
> 标签：c++

```
#include<iostream>
#include<cstdio>
using namespace std;

int main()
{
    int T;
    char J[100], S[100];
    int count=0;
    cin >> T;

    while(T--)
    {
        cin.getline(J,100);

        cin.getline(S,100);
        puts(J);
        puts(S);

        for(int i=0; J[i]!='\0'; i++)
        {
            for(int j=0; S[j]!='\0'; j++)
            {
                count++;
                for(int k=j; S[k]!='\0'; k++)
                    S[k]=S[k+1];
                break;
            }
         }
         cout << count;
    }
    return 0;
} 
```

我在 J,S 中获取输入字符串，但在执行程序期间它会跳过来自控制台 cin.getline 的第二个输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:51:20.440

您需要使用字符串、std::string 并调用 getline，如

```
std::string s,j;
std::getline(std::cin,j);
std::getline(std::cin,s); 
```

然后如果你想通过单个字符迭代字符串的内容

```
for(auto i = std::begin(s); i != std::end(s); ++i)
{
     std::cout << *i << std::endl;
} 
```

使用迭代器，并尊重它们以获得实际的字符值。尽可能远离 c 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:12:58.817

这段代码：

```
int T;
// ...
cin>>T; 
```

`int`...从标准输入中读取一个。要让它读取它`int`，您需要按下`enter`键，但此代码不会*从*`enter`输入缓冲区中删除它。然后...

```
cin.getline(J,100); 
```

这会尝试从输入缓冲区读取字符串，直到第一个换行符。它从输入缓冲区中删除该换行符，但不将其作为字符串的一部分。因此，如果您不仔细观察，它似乎基本上什么也没做——即，您最终得到一个空字符串。

您通常希望坚持使用面向字段的输入（例如您的或面向`cin >> T;`行的*输入*（我错了：它*可以*工作——并且在这方面工作得很好，但你需要知道你在做什么，即使那样，它仍然会时不时地让你感到惊讶。`getline``getline`

 **正如我的评论（和@johnathon 的回答）中所指出的，您通常还希望用来`std::getline`读取一个`std::string`, 而不是`std::cin.getline`一个 char 数组。后者处理起来很笨拙，即使充其量也是如此。

如果您要在任何地方使用它，我自己的偏好是（通常）在整个过程中使用面向行的输入。

```
std::string temp;

std::getline(std::cin, temp);

int T = lexical_cast<int>(temp);

while (T--) {
   std::string j;

   std::getline(std::cin, j);

   // ... 
```

顺便说一句，我也避免`T`在 C++ 中用作普通变量的名称。它通常用作模板参数的名称；将它用于“正常”变量更容易导致混淆，尤其是对于更频繁使用模板的高级程序员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:54:15.477

(1) 在 cin>>T 和 while (T--) 之间使用 getchar() 作为

```
int T;
char J[100] , S[100];
int count=0;
cin>>T;
getchar();
while(T--){
cin.getline(J,100);
cin.getline(S,100); 
```

(2)。您也可以通过以下方式解决您的问题：

```
char  T[10];
char J[100] , S[100];
int count=0;
getline(T,10);

while((atoi(T))--){

cin.getline(J,100);

cin.getline(S,100); 
```

使用其中任何一个，它将解决您的问题。**

# javascript - 使用 Crossfilter，是否可以在分组时跟踪最大/最小值？

> ID：10509478
> 
> 赞同：14
> 
> 时间：2012-05-09T03:32:32.500
> 
> 标签：javascript, crossfilter

使用 Crossfilter (https://github.com/square/crossfilter) 时，我指定了在组中添加和删除数据时要使用的函数。跟踪运行平均值相当简单（使用 CoffeeScript）：

```
reduceAdd = (p, v) ->
  ++p.count;
  p.sum += v.digit;
  p

reduceRemove = (p, v) ->
  --p.count;
  p.sum -= v.digit;
  p

reduceInitial = ->
  {
    count: 0
    sum: 0
    average: ->
      return 0 if this.count == 0
      return this.sum / this.count
  } 
```

是否可以跟踪每个组的最大值和最小值？我想不出将所有元素保存在一个巨大的数组中并执行 d3.min / d3.max 的方法。似乎添加/删除数据效率极低。

我还寻找一种方法来告诉 Crossfilter 从头开始​​完全重建组，而不是从现有组中删除项目。如果应用了过滤器，则重置并重建组。没有什么明显的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T13:46:45.030

您可以使用[dimension.top(1)](https://github.com/square/crossfilter/wiki/API-Reference#dimension_top)和[dimension.bottom(1)](https://github.com/square/crossfilter/wiki/API-Reference#dimension_bottom)来检索当前的最小值和最大值。这些方法尊重交叉过滤器上可能处于活动状态的任何过滤器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-03T18:13:04.487

我想出的最佳解决方案是跟踪有序列表中的所有值，并使用简单的快速排序样式插入函数添加元素（cp.如何[将数字插入排序数组](https://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers)）并使用 indexOf 删除它们.

常用功能：

```
function insertElement(element, array) {
    array.splice(locationOfElement(element, array) + 1, 0, element);
    return array;
}

function removeElement(element, array) {
    var index = array.indexOf(element);
    if (index >= 0) array.splice(index, 1);
    return array;
}

function locationOfElement(element, array, start, end) {
    start = start || 0;
    end = end || array.length;
    var pivot = parseInt(start + (end - start) / 2, 10);
    if (array[pivot] === element) return pivot;
    if (end - start <= 1)
        return array[pivot] > element ? pivot - 1 : pivot;
    if (array[pivot] < element) {
        return locationOfElement(element, array, pivot, end);
    } else {
        return locationOfElement(element, array, start, pivot);
    }
}

function maxElement(array) {
    return (array.length > 0) ? 
        array[array.length - 1] : null;
}

function minElement(array) {
    return (array.length > 0) ? 
        array[0] : null;
} 
```

在组中添加和删除数据以跟踪最小值/最大值时使用的函数：

```
minMaxDimension = cf.dimension(function (d) {
    return d.key; 
});

var reduceAdd = function(p, v) {
    insertElement(v.value, p.elements);
    return p;
};

var reduceRemove = function(p, v) {
    removeElement(v.value, p.elements);
    return p;
};

var reduceInitial = function() {
    return { 
        elements: [],
        max: function() { return maxElement(elements); },
        min: function() { return minElement(elements); }
    }
}

minMaxGroup = minMaxDimension
    .group()
    .reduce(reduceAdd, reduceRemove, reduceInitial)
    .orderNatural()
    .top(Infinity); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:00:23.240

在玩了一会儿之后，您可以通过再次调用 group 方法来重建组。

# android - 我可以使用他人的信用卡注册我的 Android 开发者帐户吗？

> ID：10509488
> 
> 赞同：8
> 
> 时间：2012-05-09T03:34:47.150
> 
> 标签：android, google-play, credit-card

我想在 Google 上注册一个开发者帐户，但不幸的是，我还没有信用卡，也不会很快得到信用卡。我正在考虑从朋友或亲戚那里借一个并用它来支付 25 美元的费用，然后我会付给我的朋友/亲戚那笔钱。这合理吗？有什么影响吗？我不打算销售付费应用程序，我只想发布我制作的免费软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:40:21.813

除非帐户详细信息已链接到卡以进行验证，否则这应该不是问题。由于您没有信用卡/借记卡，我假设您未满 18 岁。您应注意以下事项：

1.4 要使用 Google Play，您必须年满 13 岁。如果您的年龄在 13 至 18 岁之间，则必须获得父母或法定监护人的许可才能使用 Google Play。

# c - 当我使用 strtok() 时，有没有办法挑选出单个令牌？

> ID：10509489
> 
> 赞同：2
> 
> 时间：2012-05-09T03:34:47.440
> 
> 标签：c, strtok

例如，如果我有一个字符串：`Hi:my:name:is:lacrosse1991:`我怎么能用它`strtok`来检索`is`（换句话说，第四个字段）？这将类似于您在 bash 中使用 cut 的方式，而我只是这样做`cut -d ":" -f 4`。如果这是做这种事情的错误功能，请告诉我，非常感谢任何帮助，谢谢！（我最近才开始自学 C，如果这些是我要问的明显问题，我提前道歉）

这是我将使用的 cut 命令的示例

```
x=$(echo "$death" | cut -d ':' -f 4)
y=$(echo "$death" | cut -d ':' -f 5)
z=$(echo "$death" | cut -d ':' -f 6) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T03:37:14.483

如果您知道这是第 4 个字段，您只需调用 strtok() 4 次 - 如果不扫描整个字符串，就无法跳转到第 4 个字段（这就是 strtok 正在做的事情）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:10:50.580

提取第`N`th 字段的一种方法（同时在调用后将字符串保持在原始状态）是使用以下`getFld`函数。首先，必要的标题：

```
#include <stdio.h>
#include <string.h>
#include <malloc.h> 
```

现在函数本身，我希望记录得足够好：

```
char *getFld (char *srchStr, char delim, int numFld) {
    char *copyStr, *retStr, *tmpStrPtr, delims[2];

    // Make a copy so as to not damage original.

    if ((copyStr = strdup (srchStr)) == NULL) return NULL;

    // Create delimiter string from character.

    delims[0] = delim; delims[1] = '\0';
    retStr = NULL;

    // Start loop, extracting fields.

    tmpStrPtr = strtok (copyStr, delims);
    while (tmpStrPtr != NULL) {
        // If this is the field we want, make a copy.

        if (numFld == 0) retStr = strdup (tmpStrPtr);

        // Get next field.

        tmpStrPtr = strtok (NULL, delims);
        numFld--;
    }

    // Clean up, return field copy (must be freed eventually) or NULL.

    free (copyStr);
    return retStr;
} 
```

最后，还有一个测试程序：

```
int main (void) {
    int i = 0;
    char str[] = "Hi:my:name:is:lacrosse1991";
    char *fld;
    while ((fld = getFld (str, ':', i)) != NULL) {
        printf ("Field %d is '%s'\n", i, fld);
        free (fld);
        i++;
    }
    return 0;
} 
```

编译并运行后，我得到：

```
Field 0 is 'Hi'
Field 1 is 'my'
Field 2 is 'name'
Field 3 is 'is'
Field 4 is 'lacrosse1991' 
```

现在，请记住，这`strdup`不是标准 C，但是，如果您的实现没有它，您可以使用[这个](https://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c/252802#252802)。您可能还想更改`strdup`失败时的行为，因为当前案例无法与超出范围的字段区分开来。

但是，这个代码应该可以作为开始的基线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T04:21:36.053

我会避免`strtok`为此目的（以及大多数其他人，就此而言）。在这种情况下，我想我只会使用`sscanf`转换`scanset`：

```
char field_four[128];   
sscanf(input_string, "%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_four); 
```

在此，我们从重复`%*[^:]:`三遍开始。其中每一个都读取一个字符串，包括除冒号之外的任何字符，然后是冒号。`*`应该从输入中读取但被忽略（未分配给任何东西）的方法。然后，对于第四个字段，我们有相同的内容，除了我们*不*包含`*`，因此该字段*确实*被分配，在本例中为`field_four`（尽管您显然应该使用更有意义的名称）。

对于第四个字段，我还添加了最大长度的规范。由于`sscanf`总是包含 a`\0`来终止字符串，但不包含在计数中，我们需要指定一个比缓冲区大小小一的大小。

# c# - 如何在不使用 Windows 窗体控件或售后包的情况下使用 WPF 创建样条图？

> ID：10509491
> 
> 赞同：0
> 
> 时间：2012-05-09T03:35:02.267
> 
> 标签：c#, wpf, mvvm, charts

我需要通过动态数据显示或使用 WPF DataVisualization 工具包在 WPF 中本地创建样条图。有谁知道这是否可能？
如果是这样，你能给我举一个样条图的例子吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:55:25.410

您是否尝试过[PolyBezierSegment](http://msdn.microsoft.com/en-us/library/system.windows.media.beziersegment.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:26:30.260

听起来您正在寻找在 WPF 中绘制的最佳拟合曲线。您必须创建一个自定义控件来绘制它，但是如果您可以绘制，贝塞尔样条曲线应该可以很好地为您工作。这是我编写的一个类，它允许您从一小组种子点生成一组平滑点。实例化对象，将 SeedPoints 属性设置为一组点，然后调用 GenerateSpline(int NumberPointsToGenerate) 以获取平滑曲线的点。我通常使用大约 40 个点来生成一条非常平滑的曲线。

```
/// <summary>
/// Class to generate a Bezier Curve from a set of seed points.  
/// Note that this is a best fit curve through a set of points 
/// and a Bezier does NOT require the curve to pass through the points.
/// </summary>
public class BezierSpline
{
    /// <summary>
    /// Default Constructor
    /// </summary>
    public BezierSpline()
    {
        SeedPoints = new List<PointF>();
    }

    /// <summary>
    /// Constructs a BezierSpline object using SeedPoints
    /// </summary>
    /// <param name="seedPoints"></param>
    public BezierSpline(IList<PointF> seedPoints)
        : this()
    {
        SeedPoints = new List<PointF>(seedPoints);
    }

    /// <summary>
    /// Set of SeedPoints to run the spline through
    /// </summary>
    public List<PointF> SeedPoints { get; set; }

    /// <summary>
    /// Generates a smooth curve through a series of points
    /// </summary>
    /// <param name="numberPointsToGenerate">Number of points to generate between P0 and Pn</param>
    /// <returns>IList of Points along the curve</returns>
    public IList<PointF> GenerateSpline(int numberPointsToGenerate)
    {
        List<double> ps = new List<double>();
        List<PointF> np = new List<PointF>();
        for (int i = 0; i < SeedPoints.Count; i++)
        {
            ps.Add(SeedPoints[i].X);
            ps.Add(SeedPoints[i].Y);
        }

        double[] newpts = Bezier2D(ps.ToArray(), numberPointsToGenerate);
        for (int i = 0; i < newpts.Length; i += 2)
            np.Add(new PointF(newpts[i], newpts[i + 1], 0));

        return np;
    }

    private double[] Bezier2D(double[] b, int cpts)
      {
          double[] p = new double[cpts * 2];
          int npts = (b.Length) / 2;
          int icount, jcount;
          double step, t;

          // Calculate points on curve
          icount = 0;
          t = 0;
          step = (double)1 / (cpts - 1);

          for (int i1 = 0; i1 < cpts; i1++)
          { 
              if ((1.0 - t) < 5e-6) 
                  t = 1.0;

              jcount = 0;
              p[icount] = 0.0;
              p[icount + 1] = 0.0;
              for (int i = 0; i != npts; i++)
              {
                  double basis = Bernstein(npts - 1, i, t);
                  p[icount] += basis * b[jcount];
                  p[icount + 1] += basis * b[jcount + 1];
                  jcount += 2;
              }

              icount += 2;
              t += step;
          }
          return p;
      }

    private double Ni(int n, int i)
    {
        return Factorial(n) / (Factorial(i) * Factorial(n - i));
    }

    /// <summary>
    /// Bernstein basis formula
    /// </summary>
    /// <param name="n">n</param>
    /// <param name="i">i</param>
    /// <param name="t">t</param>
    /// <returns>Bernstein basis</returns>
    private double Bernstein(int n, int i, double t)
       {
           double basis;
           double ti; /* t^i */
           double tni; /* (1 - t)^i */

           if (t == 0.0 && i == 0) 
               ti = 1.0; 
           else 
               ti = System.Math.Pow(t, i);

           if (n == i && t == 1.0) 
               tni = 1.0; 
           else 
               tni = System.Math.Pow((1 - t), (n - i));

           //Bernstein basis
           basis = Ni(n, i) * ti * tni; 
           return basis;
       }

    /// <summary>
    /// Gets a single y value for a given x value
    /// </summary>
    /// <param name="x">X value</param>
    /// <returns>Y value at the given location</returns>
    public PointF GetPointAlongSpline(double x)
    {
        return new PointF();
    }

    public static int Factorial(int n)
    {
        int f = 1;

        for (int i = n; i > 1; i--)
            f *= i;
        return f;
    }
} 
```

# c# - 如何使用 C# 访问网络摄像头？

> ID：10509495
> 
> 赞同：1
> 
> 时间：2012-05-09T03:35:35.693
> 
> 标签：c#, webcam

> **可能重复：**
> [C# + DirectShow.NET = 简单的网络摄像头访问？](https://stackoverflow.com/questions/833724/c-sharp-directshow-net-simple-webcam-access)

如何使用 C# 打开/关闭网络摄像头？我想创建一个带有开始/结束按钮的程序，可以访问笔记本电脑的网络摄像头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T05:14:33.443

AForge 提供了一个很好的解决方案： [http ://www.aforgenet.com/aforge/framework/](http://www.aforgenet.com/aforge/framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:38:14.240

您可以使用[表达式编码器](http://www.codeproject.com/Articles/285964/WPF-Webcam-Control)

[http://www.codeproject.com/Articles/202464/How-to-use-a-WebCam-in-C-with-the-NET-Framework-4](http://www.codeproject.com/Articles/202464/How-to-use-a-WebCam-in-C-with-the-NET-Framework-4)

# javascript - CRM 2011“实时”自定义功能区规则

> ID：10509496
> 
> 赞同：2
> 
> 时间：2012-05-09T03:36:00.690
> 
> 标签：javascript, dynamics-crm-2011, ribbon

只是想知道是否可以设置一个功能区规则，根据表单上的某些值实时显示/隐藏表单上的按钮组

（如果表单中缺少/更改/删除值但在保存表单之前，我希望隐藏功能区按钮）

虽然我知道可以让功能区运行自定义 JavaScript，但我想知道 JavaScript 是仅在表单加载时触发还是在某些字段值发生更改时触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:00:59.557

该[`refreshRibbon()`](http://msdn.microsoft.com/en-us/library/gg327828.aspx#BKMK_refreshRibbon "Xrm.Page.ui")函数正是为此目的而存在的，并且可以在字段更改事件上触发，但不幸的是，它仅适用于`EnableRules`，而不适用于`DisplayRules`。（有关类似问题，请参阅[最近的问题。）](https://stackoverflow.com/questions/10505040/crm-2011-ribbon-displayrule-valuerule-check-for-null "CRM 2011 功能区 DisplayRule ValueRule 检查是否为空")

> [**`<EnableRule>`**当功能区(RibbonDiffXml)](http://msdn.microsoft.com/en-us/library/gg328073.aspx) 依赖于表单中的值时，通常使用此函数。在您的代码更改规则使用的值后，使用此方法强制功能区重新评估表单中的数据，以便可以应用规则。

# java - ActionBarSherlock & HoloEverywhere - 强制溢出？

> ID：10509510
> 
> 赞同：5
> 
> 时间：2012-05-09T03:38:39.257
> 
> 标签：java, android, android-layout, actionbarsherlock, android-holo-everywhere

我有一个简单的问题。对于我的 android 应用程序，我计划使用 ActionBarSherlock 和 HoloEverywhere 库。除了一件事之外，一切都很好：将溢出菜单强制到旧设备上。如果没有 HoloEverywhere 项目，强制溢出与以下行完美配合：

```
android:theme="@style/Theme.Sherlock.ForceOverflow" 
```

我的问题是，我申请时无法让强制溢出工作

```
android:theme="@style/Theme.HoloEverywhereDark.Sherlock.ForceOverflow" 
```

Eclipse 给我一个错误，说没有找到与给定名称匹配的资源。没有 .ForceOverflow 也能很好地工作。这只是 HoloEverywhere 不支持，还是有办法自己手动完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T03:56:05.643

扩展一个`HoloEverywhere`主题并添加：

```
<item name="absForceOverflow">true</item> 
```

# objective-c - 旋转时如何标记 UIToolBar 自动调整大小

> ID：10509514
> 
> 赞同：0
> 
> 时间：2012-05-09T03:39:39.550
> 
> 标签：objective-c, ios, toolbar, autoresize

我创建了一个工具栏。像这样：

```
 UIToolbar *toolbar=[[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, toolBarHeight)];

    toolbar.autoresizingMask=UIViewAutoresizingFlexibleWidth;
    UIBarButtonItem *itemNull=[[[UIBarButtonItem alloc]   initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil] autorelease];
    UIBarButtonItem *item0=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRewind target:self action:@selector(pre)] autorelease];
    UIBarButtonItem *item1=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFastForward target:self action:@selector(pre)] autorelease];
    UIBarButtonItem *item2=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(pre)] autorelease];
    UIBarButtonItem *item3=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemReply target:self action:@selector(pre)] 
        autorelease];
    UIBarButtonItem *item4=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(pre)] autorelease];
    itemNull.width=frame.size.width-itemwidth*5;
    item0.width=itemwidth;
    item1.width=itemwidth;
    item3.width=itemwidth;
    item4.width=itemwidth;
    item2.width=itemwidth;

    [toolbar setItems:[NSArray arrayWithObjects: itemNull,item0,item1,item2,item3,item4, nil]];
    [self addSubview:toolbar];
    [toolbar release]; 
```

它被添加到视图中。但是当我旋转视图时，这些项目不在标志上。我想知道如何让它可见而不是重置它的框架。这些项目是否具有自动调整大小之类的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:44:57.247

有一个内置的隐藏工具栏..

```
[self.navigationController setToolbarHidden:NO animated:YES]; // i hope its a navigation based application. 
```

修改代码

```
UIBarButtonItem *itemNull=[[[UIBarButtonItem alloc]   initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil] autorelease];
UIBarButtonItem *item0=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRewind target:self action:@selector(pre)] autorelease];
UIBarButtonItem *item1=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFastForward target:self action:@selector(pre)] autorelease];
UIBarButtonItem *item2=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(pre)] autorelease];
UIBarButtonItem *item3=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemReply target:self action:@selector(pre)] 
    autorelease];
UIBarButtonItem *item4=[[[UIBarButtonItem  alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(pre)] autorelease];
[self.navigationController setToolbarHidden:NO animated:YES];
self.toolbarItems = [NSArray arrayWithObjects: itemNull, item0, item1, item2, item3, item4, nil]; 
```

希望能帮助到你。快乐编码:)

# php - PHP 函数变量范围

> ID：10509517
> 
> 赞同：0
> 
> 时间：2012-05-09T03:40:31.030
> 
> 标签：php

说我有...

```
function one($x){
     return $a + $x;
}

function two(){
     $a = 5;
     echo one(3);
} 
```

这会显示答案“8”还是“3”？换句话说，函数一个会获得 $a 的值还是我需要在某个地方声明它是全局的？

注意我还没有尝试过，但我在这里问它为什么它会以一种或另一种方式起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:44:52.993

没有函数`one`不知道`$a`。但这可以做到。

```
$a = 5;

function one($x){
 global $a;
 return $a + $x;
}

function two(){
 global $a;
 $a = 5;
 echo one(3);
} 
```

现在`two()`会回声`8`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:43:24.813

函数不是调用它们的函数的固有范围。（默认情况下，它们也不会继承全局变量——这就是`global`关键字的用途。）

因此，`$a`内部将完全未定义`one()`，您将收到有关它的通知。

有关更多详细信息，请参阅 PHP 手册中的[变量范围](http://us3.php.net/manual/en/language.variables.scope.php)页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T03:43:49.533

你不会得到`8`or `3`。您将收到一个通知，因为`$a`尚未在函数的范围内定义`one`，然后您尝试阅读它：

```
PHP Notice:  Undefined variable: a in - on line 3
PHP Stack trace:
PHP   1\. {main}() -:0
PHP   2\. two() -:11
PHP   3\. one() -:8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T04:11:42.647

如果您使用与您的示例一样接近的类，请注意没有全局用法，只需分配您的变量，`$this->*`然后在类及其方法/函数中存在全局范围，您还可以从类外部访问它们，例如`$functions->a`：

```
<?php 
Class functions{

    function one($x){
        return $this->a + $x;
    }

    function two(){
        $this->a = 5;
        echo $this->one(3);
    }

}

$functions  = new functions();

$functions->two(); //8

echo $functions->a;//5
?> 
```

# data-structures - 线程二叉树

> ID：10509520
> 
> 赞同：0
> 
> 时间：2012-05-09T03:41:19.823
> 
> 标签：data-structures

由于树是一种特殊的图，或者我们可以在 DAG（有向无环图）中对树进行分类，但是我们如何区分线程二叉树和图呢？我们可以在 DAG 中对线程二叉树进行分类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:50:07.850

线程二叉树不是 DAG，因为它有循环，*但是*很容易通过不跟随线程将其视为任何算法中的一个（认为将它们视为 NULL 指针）。

通过删除所有线程也很容易将任何线程二叉树转换为二叉树。

# compiler-construction - Lex：一个计算输入中单词的小程序

> ID：10509523
> 
> 赞同：2
> 
> 时间：2012-05-09T03:41:52.640
> 
> 标签：compiler-construction, compilation, yacc, lex

我对 Lex 非常陌生，这个问题的完整要求如下：

> 编写一个 Lex 输入文件，该文件将生成一个计算文本文件中的字符、单词和行数并报告计数的程序。将单词定义为任何字母和/或数字序列，没有标点符号或空格。标点符号和空格不算作单词。

现在我写下了代码：

```
%{
#include <stdio.h>
#include <stdlib.h>
int cno = 0, wno = 0, lno = 0; /*counts of characters, words and lines */
%}
character [a-z]
digit [0-9]
word ({character}|{digit})+[^({character}|{digit})]
line \n
%%
{line} { lno++; REJECT; }
{word} { wno++; REJECT; }
{character} { cno++; }
%%
void main()
{ yylex();
  fprintf(stderr, "Number of characters: %d; Number of words: %d; Number of lines: %d\n", cno, wno, lno);
  return;
} 
```

我用文本文件对其进行了测试：

```
this is line #1
line #2 is here
!@#$%^&*()
haha hey hey 
```

我得到了输出

```
 #1
 #2  
!@#$%^&*()

Number of characters: 30; Number of words: 45; Number of lines: 4 
```

但正确的输出应该是

```
Number of characters: 30; Number of words: 11; Number of lines: 4 
```

我猜“字数”的错误应该是由于每个字符数，所以我应该如何修改我的程序来解决这个问题？

此外，还会出现一些不必要的输出（那些标点符号）。我应该如何修改我的程序以避免它们？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T04:58:57.390

你需要一个规则来处理“无趣”的角色；你仍然需要计算它们。

您不想拒绝换行符。

您不需要`word`. 您可能应该将大写字母作为`character`.

这似乎有效：

```
%{
#include <stdio.h>
#include <stdlib.h>
int cno = 0, wno = 0, lno = 0; /*counts of characters, words and lines */
%}

character [a-zA-Z]
digit [0-9]
word ({character}|{digit})+
line \n

%%

{line} { cno++; lno++; }
{word} { wno++; cno += strlen(yytext); }
. { cno++; }

%%

int main(void)
{
    yylex();
    printf("Number of characters: %d; ", cno);
    printf("Number of words:      %d; ", wno);
    printf("Number of lines:      %d\n", lno);
    return 0;
} 
```

在其自己的源代码上运行时，输出为：

```
Number of characters: 463; Number of words:      65; Number of lines:      27 
```

标准`wc`命令（对“单词”有不同的定义）产生：

```
 27      73     463 xyz.l 
```

这与行数和字符数一致。

# javascript - JSON对象数组的迭代不起作用

> ID：10509524
> 
> 赞同：1
> 
> 时间：2012-05-09T03:41:53.653
> 
> 标签：javascript, jquery, arrays, json

我有一组应该看起来像这样的对象......

```
[{"Name":"blah","Description":"blah"},{"Name":"blah2","Description":"blah2"}] 
```

使用 Javascript/jQuery，如何获取键/值对？我尝试了许多不同的方法，但无济于事。当我尝试获取长度时，它总是返回字符数并遍历每个字符而不是对象的实际计数？当我运行它时，它会为每个字符拼出的 [object Object]、[object Object] 返回一个警报......

```
function DisplayItems(data) {
        $.each(data, function () {
            $.each(this, function (key, value) {
                alert(value);
            });
        });
} 
```

现在我看这个，这不是我期待的对象数组吗？我怎样才能真正返回字符串，这样我才能真正看到其中的真正内容并可能从那里开始？

**编辑：

这是我获取订单的函数（去掉废话并向您显示警报）...我调用 jQuery.Ajax 并将返回的数据传递给 displayOrders(data)。这些订单有一个 Items 的复合属性，其中包含一个 Item 列表。

```
function displayOrders(data) {
        $('#gdvOrders tbody').empty();
        for (var key in data.d) {
            alert(data.d[key].Items);
} 
```

这是我传递给 displayItems 的，你在警报函数中看到的。我在一个表中显示订单（隐藏包括项目在内的一些列），并且当他们在订单表中选择一行时，希望在另一个表中显示每个订单的项目。在上面显示的函数中，我可以写...

```
data.d[key].OrderId 
```

它会正常显示。如何显示每个项目的属性？

jQuery.Ajax 函数设置为 content-type: 'application/json; charset=utf-8' 这是我从...那里得到订单的地方

```
[WebMethod]
    public static List<Order> GetOrdersByDept(Department department, Filter filter, DateTime? dateFrom = null, DateTime? dateTo = null)
    {
        return OrderLists.GetOrdersByDepartment((Department)department, (Filter)filter, dateFrom, dateTo);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T06:22:51.250

See this is working:

```
data=[{"Name":"blah","Description":"blah"},{"Name":"blah2","Description":"blah2"}]
data.forEach(function(i,j){

console.log("Name :"+i.Name+" Description :"+i.Description);

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:45:41.077

使用 JavaScript，只需使用`for .. in`循环

```
for(var i = 0; i < data.length; i++) {
    var obj = data[i];
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            alert(key + " = " + obj[key]);
        }
    }
} 
```

在这里小提琴 - [http://jsfiddle.net/XWsvz/](http://jsfiddle.net/XWsvz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T03:46:37.903

> 现在我看这个，这不是我期待的对象数组吗？我怎样才能真正返回字符串，这样我才能真正看到其中的真正内容并可能从那里开始？

如果对象作为字符串返回，您可以简单地提醒它。但是，如果您的函数被传递一个未知对象，您始终可以将其转换回 JSON 字符串并警告它，以便您可以可视化结构：

```
function displayItems(data) {
    alert(JSON.stringify(data));
    ...

} 
```

作为旁注，我将函数中的第一个字母更改为小写字母，以匹配 JavaScript 中函数的命名约定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T03:48:21.337

看起来你很接近：

```
function DisplayItems(data) {
    console.log('data is: ', JSON.stringify(data));
    $.each(data, function (key, arrayElement, index) {
        console.log('arrayElement ' + index + ' is: ', JSON.stringify(arrayElement));
        $.each(arrayElement, function (key, value) {
            console.log('key: ' + key + ' val: ' + value);
        });
    });
} 
```

[http://jsfiddle.net/ux9D8/](http://jsfiddle.net/ux9D8/)

使用您的数据，这给了我以下输出：

```
data is:  [{"Name":"blah","Description":"blah"},{"Name":"blah2","Description":"blah2"}]
arrayElement undefined is:  {"Name":"blah","Description":"blah"}
key: Name val: blah
key: Description val: blah
arrayElement undefined is:  {"Name":"blah2","Description":"blah2"}
key: Name val: blah2
key: Description val: blah2 
```

# python - 转换字典

> ID：10509527
> 
> 赞同：2
> 
> 时间：2012-05-09T03:42:04.307
> 
> 标签：python

这是我的字典

```
dict = {'apple':'der Apfel', 'ant':'die Ameise', 'asparagus':'der Spargel'} 
```

我想得到一个输出：

```
dictionary for a
apple: der Apfel
ant:die Ameise
asparagus:der Spargel 
```

我是字典新手，请帮忙

我试着做

```
def tutorial8_part2():
  dict = {'apple':'der Apfel', 'ant':'die Ameise', 'asparagus':'der Spargel'}
  dictList = dict.items()
  for key, value in dict.iteritems():
    temp = []
    aKey = key
    aValue = value
    temp.append(aKey)
    temp.append(aValue)
    dictList.append(temp)
    print dictList.append(temp) 
```

但它不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:56:43.610

如果您只想在长行中打印出每个键和值对，您可以这样做：

```
dict = {'apple':'der Apfel', 'ant':'die Ameise', 'asparagus':'der Spargel'}
for key, value in dict.items():
  print key + ':', value,
print 
```

输出的顺序可能与您创建字典时的顺序不同。遍历字典并不能保证任何特定的顺序，除非您专门对键进行排序，例如使用 sorted() 内置函数：

```
for key, value in sorted(dict_.items()):  
    print "{0}: {1}".format(key, value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:47:55.407

如果您只是尝试遍历字典，以打印键和值对：

```
>>> dict_ = {'apple':'der Apfel', 'ant':'die Ameise', 'asparagus':'der Spargel'}
>>> for k,v in dict_.iteritems():
...   print k, ':', v
... 
ant : die Ameise
asparagus : der Spargel
apple : der Apfel 
```

在一行中使用生成器表达式：

```
>>> print '\n'.join('{}: {}'.format(k,v) for k,v in dict_.iteritems())
ant: die Ameise
asparagus: der Spargel
apple: der Apfel 
```

作为旁注，避免`dict`用作变量名，因为它会影响内置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T03:49:43.750

这会做你想做的事吗？

（编辑：更新为新的输出格式）

```
my_dict = {'apple':'der Apfel', 'ant':'die Ameise', 'asparagus':'der Spargel'}

print 'dictionary for a'
for k, v in my_dict.iteritems():
     print '%s:%s' % (k, v) 
```

产量：

```
dictionary for a
ant:die Ameise
asparagus:der Spargel
apple:der Apfel 
```

请注意，此订单与您发布的订单不同，但问题并没有说明订单是否重要。

正如@wim 正确建议的那样，最好不要`dict`用作变量名。

# java - 如何从文本字段中获取即时更新？

> ID：10509531
> 
> 赞同：0
> 
> 时间：2012-05-09T03:42:29.707
> 
> 标签：java

我想更改文本字段中的输入，该输入将立即更新到显示，而不是按下`ENTER`按钮来更新它。

这是我的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class MyProgram01 extends JFrame
{
    private JTextField text1;
    private JCheckBox check1;
    private JCheckBox check2;
    private String message;
    private JLabel label1;
    private JLabel label2;
    private Font font;

    public MyProgram01(String title)
    {
        super(title);
        check1 = new JCheckBox("Bold");
        check2 = new JCheckBox("Italics");

        label1 = new JLabel("Text : ");
        label2 = new JLabel("Style : ");
        message = "Good Morning...";
        text1 = new JTextField(message, 100);
        font = new Font("Times New Roman", Font.PLAIN, 36);
        setBounds(0, 0, 600, 300);

        JPanel panel = new JPanel();
        panel.setLayout(null);
        panel.setBounds(0, 0, 600, 120);
        panel.setBackground(Color.ORANGE);
        label1.setFont(new Font("Times New Roman", Font.PLAIN, 36));
        label1.setBounds(15, 15, 100, 36);
        panel.add(label1);
        text1.setBounds(120, 15, 400, 36);
        panel.add(text1);

        label2.setFont(new Font("Times New Roman", Font.PLAIN, 36));
        label2.setBounds(15, 65, 100, 36);
        panel.add(label2);
        check1.setBounds(120, 65, 100, 36);
        check2.setBounds(220, 65, 100, 36);
        panel.add(check1);
        panel.add(check2);

        check1.addActionListener(new CheckBoxListener());
        check2.addActionListener(new CheckBoxListener());
        text1.addActionListener(new TextFieldListener());

        setLayout(null);
        add(panel);
    }
    public void paint(Graphics g)
    {
        super.paint(g);

        g.setFont(font);
        g.drawString(message, 15, 255);

    }
    private class CheckBoxListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            if(check1.isSelected() && check2.isSelected())
            {
                font = new Font("Times New Roman", Font.BOLD + Font.ITALIC, 36);    
                repaint();
            }
            else if(check1.isSelected())
            {
                font = new Font("Times New Roman", Font.BOLD, 36);
                repaint();
            }
            else if(check2.isSelected())
            {
                font = new Font("Times New Roman", Font.ITALIC, 36);
                repaint();
            }
            else
            {
                font = new Font("Times New Roman", Font.PLAIN, 36);
                repaint();
            }
        }
    }
    private class TextFieldListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            message = text1.getText();
            repaint();
        }
    }
    public static void main(String[] args)
    {
        JFrame frame = new MyProgram01("My Program 01");
        frame.setVisible(true);
        frame.setResizable(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

如何更改代码以立即更新到显示？

编辑 ：

它与 keyListener 一起工作，但我的程序只会在按下第二个键后开始显示。

例如，我输入，当我按下 时`abc`，程序将开始显示，当我按下时，它会显示并且丢失，除非我按下。`a``b``c``ab``c``ENTER`

这是代码的一部分：

```
text1.addKeyListener(new KeyAdapter()
    {
            public void keyPressed(KeyEvent e)
            {
                message = text1.getText();
                repaint();
            }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:53:02.297

将 a 添加`KeyListener`到您的文本字段。你可以这样做：

```
textField.addKeyListener(new KeyAdapter(){
    @Override
    public void keyPressed(KeyEvent e){
         message = textField.getText();
         repaint();
    }
}); 
```

**或者**

将 a 添加`DocumentListener`到您的文本字段的`Document`. 你可以这样做：

```
private JFrame getFrame(){
    return this;
}
...

textField.getDocument().addDocumentListener(new DocumentListener(){

    @Override
    public void insertUpdate(DocumentEvent e) {
        message = textField.getText();
        getFrame().repaint();
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        message = textField.getText();
        getFrame().repaint();
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
        // on change
    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:06:09.863

Instead of using ActionListener for the class TextFieldListener, use KeyListener interface and use the keyTyped(KeyEvent e) method. When ever the event arises you can use getText() of texfield and repaint it.

# c++ - Zmodem 使用 C/C++ 接收文件

> ID：10509535
> 
> 赞同：0
> 
> 时间：2012-05-09T03:43:01.030
> 
> 标签：c++, serial-port, protocols, file-transfer, zmodem

我被分配在 Windows 平台上编写一个 c++ 程序，以使用 zmodem 通过串行端口从远程服务器检索文本文件。几乎和[这个人](https://stackoverflow.com/questions/345027/free-modem-serial-communications-library-or-scriptable-app-with-zmodem-kermit)一样，但在窗户上。

这是我卡住的地方：我可以使用串行电缆与服务器通信，但是当服务器发送文件时，它使用 zmodem 协议，所以我看到服务器向我发送 rz\r**.B00000000\r

所以我阅读了zmodem 协议的[规范](http://gallium.inria.fr/%7Edoligez/zmodem/zmodem.txt)，但我不明白如何开始接收文件。我根据规范中提到的[头文件](http://mirror.fsf.org/pmon2000/3.x/src/pmon/loaders/zmodem/zmodem.h)发送 ZRINIT 。但文件传输并未开始。

我的问题是这个。当我收到发送文件的请求并期望开始接收数据包时，我可以简单地发送字节吗？我可能发送了错误的代码吗？在那种情况下，是否有一个如何编码的示例我是否应该不费心尝试自己编写协议并找到一个自动为我执行此操作的库？如果是这样，它是否适用于 Windows？或者我应该寻找一个从命令行获取输入的通信程序？

我真的只需要一些关于如何进行的建议。

我阅读了有关sexyz 的信息，但找不到下载页面。

欢迎任何意见。

# 更新

我对协议有了更多了解。该规范在第 8 节和第 12 节中提到了发送方和接收方之间的交易是如何工作的。从那我已经能够解密一些头文件的代码，比如 ZRQINIT、ZRINIT、ZFILE ......例如

```
char ZRINIT[]={42, 42, 24, 66, 48, 49, 48, 48, 48, 48, 48, 48, 50, 51, 98, 101, 53, 48, 13, -118, 17,0} 
```

我仍然缺少很多，即 ZRP0S、ZRFIN。如果有人可以找到定义这些字符串的位置的链接，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:44:37.883

从[http://www.synchro.net/docs/sexyz.txt](http://www.synchro.net/docs/sexyz.txt)这里是代码[http://www.synchro.net/](http://www.synchro.net/)的链接。

它现在似乎被称为同步网络。

你也可以在那里找到下载页面，它也有一个 windows 版本如果你需要你也可以下载源代码。

希望有帮助。

# joomla - 个人消息服务 为比赛网站设计一个辅助服务，用户可以为比赛选手来冰？

> ID：10509538
> 
> 赞同：0
> 
> 时间：2012-05-09T03:43:36.960
> 
> 标签：joomla, content-management-system, message, messaging, joomla2.5

我需要为赛车比赛的参赛者开发个人消息服务。我需要一个可以做到这一点的 cms（最好是免费的）。

要求非常基本。

1）当团队登录时，他们可以看到收件箱，在那里他们可以看到管理员发送的消息。并回复他们或向管理员发送新的

2）他们不能向其他团队发送消息。

3）附件也可以在消息中发送

4）管理员在发送消息时，可以发送给一个，或多个或所有团队（根据管理员的意愿）

5）也可以创建多个管理员帐户

6）看起来并不重要，因为这只是一个后端

PS如果可能在joomla中如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:43:08.307

您应该测试消息传递组件（[http://extensions.joomla.org/extensions/communication/pms](http://extensions.joomla.org/extensions/communication/pms)）并定义具有相关权限的用户组。

# xml - 自定义标记在 XSLT 转换中不起作用

> ID：10509544
> 
> 赞同：2
> 
> 时间：2012-05-09T03:44:22.990
> 
> 标签：xml, xslt

我有一个 XML，我需要使用 XSLT 对其进行隐蔽。XML 有自定义标签，没有得到解决，我没有得到结果。

以下是 XML 代码：

```
<?xml version="1.0" encoding="UTF-16"?>
<di:itg_dataImport xmlns:di="http://www.mercury.com/itg/data_import/1.0"
                   xmlns = "http://www.mercury.com/itg/dm/2.0/types"
                   xmlns:common = "http://www.mercury.com/itg/common/2.0/types"
                   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.mercury.com/itg/data_import/1.0 data_import.xsd">
  <request>
    <requestType>Project Issue</requestType>
    <identifier>3</identifier>
    <common:simpleField>
      <common:token>REQ.ASSIGNED_TO_USER_ID</common:token>
      <common:stringValue>Admin User (DEV)</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.DESCRIPTION</common:token>
      <common:stringValue>Test - Pls Ignore</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.KNTA_ESCALATION_LEVEL</common:token>
      <common:stringValue>Project</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.KNTA_MASTER_PROJ_REF</common:token>
      <common:stringValue>P0912002 IPTV Residential Phase 1</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.PRIORITY_CODE</common:token>
      <common:stringValue>Normal</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.WORKFLOW_ID</common:token>
      <common:stringValue>Issue Management Process</common:stringValue>
    </common:simpleField>
  </request>

</di:itg_dataImport> 
```

以下是被调用的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:di="http://www.mercury.com/itg/data_import/1.0"
                   xmlns = "http://www.mercury.com/itg/dm/2.0/types"
                   xmlns:common = "http://www.mercury.com/itg/common/2.0/types"
                   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.mercury.com/itg/data_import/1.0 data_import.xsd" >

<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
<requests>
   <request>
    <requestType> 
    <xsl:copy-of select="di:itg_dataImport/request/requestType"/>
    </requestType>

   </request>
</requests> 

</xsl:template>
</xsl:stylesheet> 
```

所需的输出是：

项目问题

任何人都可以帮助解决并指出我哪里出错了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:29:35.763

**XSL 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:di="http://www.mercury.com/itg/data_import/1.0"
    xmlns = "http://www.mercury.com/itg/dm/2.0/types"
    xmlns:common = "http://www.mercury.com/itg/common/2.0/types"
    xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mercury.com/itg/data_import/1.0 data_import.xsd" >

    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/">
        <requests>
            <request>
                <xsl:for-each select="descendant::*[local-name() = 'requestType']">
                    <requestType>
                        <xsl:value-of select="text()"/>
                    </requestType>
                </xsl:for-each> 
            </request>
        </requests>
    </xsl:template>
</xsl:stylesheet> 
```

**结果文件**

```
<?xml version="1.0" encoding="utf-8"?>
<requests xmlns="http://www.mercury.com/itg/dm/2.0/types" xmlns:di="http://www.mercury.com/itg/data_import/1.0" xmlns:common="http://www.mercury.com/itg/common/2.0/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <request>
      <requestType>Project Issue</requestType>
   </request>
</requests> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:45:39.440

这是第一个 XSLT 编码错误：您的元素位于（默认）命名空间中，并且您在选择它们时没有指定命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:41:12.893

**为了使 Michael Kay 正确指出的内容更加明确，以下是如何使用默认命名空间中的文档 - 在您的特定情况下**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:di="http://www.mercury.com/itg/data_import/1.0"
                   xmlns:x = "http://www.mercury.com/itg/dm/2.0/types"
                   xmlns:common = "http://www.mercury.com/itg/common/2.0/types"
                   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.mercury.com/itg/data_import/1.0 data_import.xsd" >

<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
<requests>
   <request>
    <requestType>
    <xsl:copy-of select="di:itg_dataImport/x:request/x:requestType"/>
    </requestType>

   </request>
</requests>
</xsl:template>
</xsl:stylesheet> 
```

**我只对您的原始代码进行了一些简短的更改**：

1.  XSLT 样式表不再有默认的命名空间——取而代之的是，它具有以前缀指定的相同命名空间。

2.  now的`select`属性以`xsl:copy-of`所有名称为前缀。

**当此转换应用于提供的 XML 文档时**：

```
<di:itg_dataImport xmlns:di="http://www.mercury.com/itg/data_import/1.0"
                   xmlns = "http://www.mercury.com/itg/dm/2.0/types"
                   xmlns:common = "http://www.mercury.com/itg/common/2.0/types"
                   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.mercury.com/itg/data_import/1.0 data_import.xsd">
  <request>
    <requestType>Project Issue</requestType>
    <identifier>3</identifier>
    <common:simpleField>
      <common:token>REQ.ASSIGNED_TO_USER_ID</common:token>
      <common:stringValue>Admin User (DEV)</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.DESCRIPTION</common:token>
      <common:stringValue>Test - Pls Ignore</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.KNTA_ESCALATION_LEVEL</common:token>
      <common:stringValue>Project</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.KNTA_MASTER_PROJ_REF</common:token>
      <common:stringValue>P0912002 IPTV Residential Phase 1</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.PRIORITY_CODE</common:token>
      <common:stringValue>Normal</common:stringValue>
    </common:simpleField>
    <common:simpleField>
      <common:token>REQ.WORKFLOW_ID</common:token>
      <common:stringValue>Issue Management Process</common:stringValue>
    </common:simpleField>
  </request>

</di:itg_dataImport> 
```

**产生了想要的正确结果：**

```
<requests xmlns:di="http://www.mercury.com/itg/data_import/1.0" xmlns:x="http://www.mercury.com/itg/dm/2.0/types" xmlns:common="http://www.mercury.com/itg/common/2.0/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <request>
        <requestType>
            <requestType xmlns="http://www.mercury.com/itg/dm/2.0/types">Project Issue</requestType></requestType>
    </request>
</requests> 
```

**要记住的规则**：XPath 将无前缀名称视为属于“无命名空间”。为了解决这个问题，在您的 XSLT 代码中定义这个名称空间，但是使用一个前缀 -- 然后使用这个前缀作为名称的前缀。

# indexeddb - 在 indexedDB 中添加数据时 DOM IDBDatabase 异常 5

> ID：10509546
> 
> 赞同：2
> 
> 时间：2012-05-09T03:44:45.100
> 
> 标签：indexeddb

我的对象结构是这样的：

```
var test={
        "id":"A",
        "ChanName":"Discovery",
        "LCN":10
        }; 
```

这是创建对象存储的片段：

```
var objectStore = db.createObjectStore('Dat', { keyPath:'test.id',autoIncrement: false});

var trans = db.transaction(["Dat"], webkitIDBTransaction.READ_WRITE);
         var store = trans.objectStore("Dat");
         var request=store.put(test); 
```

当我尝试添加测试对象时，我得到了这个异常 DATA_ERR: DOM IDBDatabase Exception 5。请问你能告诉我这里有什么问题吗？我正在使用 chrome 18 进行测试。对象存储的创建很好，但无法添加数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:00:10.617

当“提供给操作的数据不符合要求”时，会引发 IndexedDB 异常 5。这通常是因为您添加了一个索引，例如，同时提供了一个缺少该属性的对象。

在这里，您的`test`对象似乎与您指定的键路径不匹配。

如果您想`id`作为密钥`createObjectStore`，则必须是这样的：

```
var objectStore = db.createObjectStore('Dat', { keyPath:'id',autoIncrement: false}); 
```

作为另一个示例，或者，使用您的 keyPath 对象，您的`test`对象需要看起来像这样才能不引发此错误：

```
var test={
 test: { "id":"A" },
 ChanName:"Discovery",
 LCN:10
}; 
```

# android - android问题从使用终端发送应用程序到模拟器

> ID：10509547
> 
> 赞同：0
> 
> 时间：2012-05-09T03:44:49.370
> 
> 标签：android, terminal, adb

我已经启动了一个模拟器：

```
android avd 
```

（虽然 android 开发者网站说是从平台工具做的，但我是从工具做的，因为 android 命令在那里，而不是在平台工具中）。无论如何，AVD 管理器出现了，我启动了一个，它启动得很好。

然后我尝试将我的应用程序发送到模拟器，所以（按照 android 开发人员的说明）我做了一个：

```
 adb install /newApp.apk 
```

命令提示符跳到下一行，只是闪烁.....当我检查模拟器时没有任何改变......我哪里出错了？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:59:27.350

这条路看起来有些奇怪。如果 apk 位于您启动命令的同一目录中，则不需要该“/”。如果这是一台 linux 机器，除非您的 apk 一直在 root 上，否则它将是同一目录的“./”，但这会很糟糕:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:24:07.540

启动模拟器后尝试

```
adb devices 
```

检查你是否能看到它

```
List of devices attached 
emulator-5554   device 
```

然后您可以继续安装

```
adb install <path-to>/newApp.apk 
```

# ios - 将 15 个图像创建为一个 4 行 * 4 列的滚动视图

> ID：10509552
> 
> 赞同：-1
> 
> 时间：2012-05-09T03:46:54.607
> 
> 标签：ios, uiscrollview, uibutton

我在滚动视图中创建了 15 个图像按钮，但只有 1 列，我想将行更改为（4 行 * 4 列）

我怎样才能做到这一点？？请先给我一些，谢谢。。

```
NSUInteger booknumber;
for (booknumber = 1; booknumber <= 15; booknumber++) {
   UIButton *button = [self createBtn:booknumber orgx:orgx orgy:orgy];
}

orgx += 100;
orgy += 0;

orgx++;
[mFavorites addSubview:button];

- (UIButton*)createBtn:(int)day orgx:(CGFloat)orgx orgy:(CGFloat)orgy{
    UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:[UIImage imageNamed:@"backplane.png"] forState:UIControlStateNormal];
    button.frame = CGRectMake(orgx, orgy, 75, 113);

    return button;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:16:07.187

试试看：

```
int booknumber = 1;
for (int i = 0; i < 4; i++) {
  for (int j = 0; j < 4; j++) {
    int orgX = i * 100;
    int orgY = j * 100;
    if (i == 3 && j == 3) return;
    UIButton *button = [self createBtn:booknumber orgx:orgX orgy:orgY];
    [mFavorites addSubview:button];
    booknumber++;
  }
} 
```

希望能帮助到你

# tomcat - 如何使用tomcat接收和响应HTTP PUT？

> ID：10509554
> 
> 赞同：0
> 
> 时间：2012-05-09T03:47:00.227
> 
> 标签：tomcat, mdm, http-put

设备向tomcat服务器发送HTTP PUT请求。服务器响应'200（OK）状态码表示成功。但我不知道如何使用 tomcat 接收和响应。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:23:14.967

您需要通过 ServletRequest.getInputStream() 或 ServletRequest.getReader() 读取响应正文。响应码无需设置，默认为200，除非出现错误。您可能想要发送响应正文。请参阅 Tomcat 的 DefaultServlet 了解它如何实现 PUT（请注意，出于安全原因，默认情况下它是禁用的）。

# asp.net-mvc-2 - 重新加载操作的最佳实践

> ID：10509557
> 
> 赞同：0
> 
> 时间：2012-05-09T03:47:19.423
> 
> 标签：asp.net-mvc-2

这可能是一个非常简单的问题，但我正在尝试考虑解决这个问题的最佳方法。

我有一个要添加到数据库的 BookItem 并执行以下操作：

```
//GET    
public ActionResult Add() 
```

用户填写表格，当他们点击“保存”时，他们发布到此操作

```
//POST
public ActionResult Add(BookModel model)
{
    return RedirectToAction("AddImage", "Book") 
```

然后重定向到另一个页面，用户可以在其中添加图像。

现在，如果用户单击浏览器中的后退按钮，则会执行 GET Add()。将显示添加书籍页面，并填写用户输入的所有数据。

如果用户再次单击保存，他们将发布数据，我们将在数据库中意外重复。

似乎是一个简单的问题，但我想不出一个好的解决方案。

我真的不想使用 JavaScript ......

这是一个 MVC2 应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:36:40.923

我相信一旦加载了 DOM，用 javascript 清除表单将是您唯一的选择（我知道）。

# linux - bash - 尝试通过管道将命令运行到单独的函数时出错

> ID：10509558
> 
> 赞同：1
> 
> 时间：2012-05-09T03:47:20.490
> 
> 标签：linux, bash, parallel-processing, job-scheduling, variable-expansion

我正在尝试使用此功能来轻松并行化我的 bash 脚本工作。这个想法很简单；我不是按顺序运行每个命令，而是将我想运行的命令传递给这个函数，它在读取行时执行；为我运行 bg 中的工作并照顾后勤....虽然它不起作用。我在执行东西的地方添加了 set -x ，看起来我在想要执行的东西周围得到了奇怪的引号......我该怎么办？

```
runParallel () {
    while read line
    do
        while [ "`jobs | wc -l`" -eq 8 ]
        do
            sleep 2
        done

        {
            set -x
            ${line}
            set +x
        } &
    done

    while [ "`jobs | wc -l`" -gt 0 ] 
    do
        sleep 1
        jobs >/dev/null 2>/dev/null
        echo sleeping
    done
}

for H in `ypcat hosts | grep fmez | grep -v mgmt | cut -d\  -f2 | sort -u`
do
    echo 'ping -q -c3 $H 2>/dev/null 1>/dev/null && echo $H - UP || echo $H - DOWN'
done | runParallel 
```

当我运行它时，我得到如下输出：

```
> ./myscript.sh
+ ping -q -c3 '$H' '2>/dev/null' '1>/dev/null' '&&' echo '$H' - UP '||' echo '$H' - DOWN
Usage: ping [-LRUbdfnqrvVaA] [-c count] [-i interval] [-w deadline]
            [-p pattern] [-s packetsize] [-t ttl] [-I interface or address]
            [-M mtu discovery hint] [-S sndbuf]
            [ -T timestamp option ] [ -Q tos ] [hop1 ...] destination
+ set +x
sleeping
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:02:51.350

如果我理解正确，您可能不希望在 echo 命令中使用单引号。单引号是文字字符串，不会解释您的 bash 变量 $H。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:17:30.597

输出中的引号`set -x`不是问题，最多是问题的另一个结果。主要问题是`${line}`不一样`eval ${line}`。

扩展变量时，生成的单词不会被视为 shell 保留结构。这是意料之中的，这意味着例如。

```
A="some text containing > ; && and other weird stuff"
echo $A 
```

不会对无效语法大喊大叫，而是打印变量值。

但是在您的函数中，这意味着 中的所有单词`${line}`，包括`2>/dev/null`等，都作为参数传递给 ping，其`set -x`输出很好地显示，因此 ping 抱怨。

如果您想从带有重定向和条件的变量执行复杂的命令行，则必须使用`eval`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:26:39.863

像许多 GNU Parallel 用户一样，您似乎已经编写了自己的并行器。

如果你安装了 GNU Parallel [http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)你可以这样做：

```
cat hosts | parallel -j8 'ping -q -c3 {} 2>/dev/null 1>/dev/null && echo {} - UP || echo {} - DOWN' 
```

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T04:03:51.163

[将您的命令放入数组中。](http://mywiki.wooledge.org/BashFAQ/050)

# html - 就父级而言，仅选择某个类的最后一个子级

> ID：10509559
> 
> 赞同：1
> 
> 时间：2012-05-09T03:47:24.530
> 
> 标签：html, css, css-selectors

我有一些这样的标记：

```
<li>
  <span>
    <div>
      <a href="#" class="anchor menu-active">Afghanistan</a>
      <div class="container menu-visible"></div>
    </div>
   </span>
   <span>
      <div>
        <a href="#" class="anchor">Kabul(AFT)</a>
        <div></div>
      </div>
  </span>
</li> 
```

我希望`anchor`根据`li`. 结果是`<a href="#" class="anchor">Kabul(AFT)</a>`应该被选中。这个`anchor`类中可以有任意数量的元素`li`。

我想出了这个选择器：`li .anchor:last-of-type`，但它选择了那里的两个元素。

如何选择`anchor`该类的绝对最后一个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:08:37.840

我没有看到您列出的项目，并且似乎您将所有项目都放在了同一个 li 中。

你为什么不做一个子列表：

```
<li>
  <a href="#">Afghanistan</a>
  <ul>
    <li>
      <a href="#">Kaboul(AFT)</a>
    </li>
   </ul>
</li> 
```

如果您试图获取选择器的最后一个，则使用 last-child。如果您试图获取具有特定类的最后一个元素，那么

.anchor:last-of-type {}

是正确的选择。

[也有这个帖子。](https://stackoverflow.com/questions/7298057/css-last-child-selector-select-last-element-of-specific-class-not-last-child-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:45:40.000

我最终使用了一些 javascript 来解决这个问题，因为使用基于 CSS 选择器的干净解决方案是不可能的。

最初，计划是抓取最后一个`.anchor`并获取它的`x`坐标`y`，以计算叠加的一组坐标。

解决方案是获取 parent 的坐标`li`，获取它的高度，然后进行计算。

不像 CSS 选择器那么整洁，但它可以工作。

# sql - 远程连接到 SQL Server

> ID：10509564
> 
> 赞同：0
> 
> 时间：2012-05-09T03:48:08.423
> 
> 标签：sql, sql-server, sql-server-2008

我是 SQL Server 的新手，我想将我的 SQL Server(Management Studio) 连接到网络 SQL Server，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:04:25.030

![在此处输入图像描述](../Images/25fd6f859cfc5c0569c1d3f742d33e14.png)

输入您的服务器、用户名和密码。

您可以使用 Windows 身份验证等。您在连接到您的特定服务器时发现什么特别困难？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:19:19.913

由于您想使用网络服务器，您需要检查两件事以进行 Windows 身份验证，您需要有权访问远程计算机，这意味着您应该能够使用 mstsc 命令进行远程连接。第二个如果您使用的是 SQL 服务器身份验证，请检查您使用的功能 ID 是否正确。如果满足这两件事，您可以从您的机器连接任何远程服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T03:54:12.390

当您打开管理工作室时，它应该有一个位置来指定您要连接的主机名和凭据。只需输入要连接的远程服务器名称和凭据，就可以了（假设远程服务器允许远程连接）。

# java - 迭代深化A*星解释

> ID：10509571
> 
> 赞同：4
> 
> 时间：2012-05-09T03:49:32.417
> 
> 标签：java, algorithm, artificial-intelligence, iterative-deepening

有人可以解释一下**迭代深化 A***吗？我仍然不明白它是如何工作的。 **使用深度优先搜索进行****迭代深化**搜索，如果仍未找到解决方案；增加**深度**++ 直到找到解决方案。

 ****如果使用**Depth**进行迭代加深，那么迭代加深 A* 使用什么来限制他们的搜索？

如果您需要解释 IDA* 的工作原理，这里有一张图片，我只是不明白它是如何工作的。

**(1,2,4,9)**等，是步骤

0+2=2 是**f(n)=g(n)+h(n)**

![IDA* 示例](../Images/e6bf9ad8c89b912105b0e0167fadc0cd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T03:58:50.427

> 如果 Iterative deepening 使用 Depth，那么 Iterative Deepening A* 使用什么来限制他们的搜索？

IDA* 的幼稚实现`threshold++`在每次迭代结束时都会有类似的东西，类似于你`depth++`上面的内容。这是为了保持 IDA* 的可接受性。

更好的算法（仍然保持 IDA* 可接受）是将阈值增加下一个可用的最小 g() 成本（从封闭集到开放集）。

请参阅：[http ://webdocs.cs.ualberta.ca/~jonathan/PREVIOUS/Courses/657/Notes/10.Single-agentSearch.pdf](http://webdocs.cs.ualberta.ca/~jonathan/PREVIOUS/Courses/657/Notes/10.Single-agentSearch.pdf)****

# html - 默认的body margin，我没有设置，但它确实有默认值8px，如何获取这个值？

> ID：10509572
> 
> 赞同：3
> 
> 时间：2012-05-09T03:49:33.987
> 
> 标签：html, default, margin

```
 <style type="text/css">
        fieldset {
            border: solid 1px orange
        }
        .label {
            font-family: Arial;
            font-size: 12px;
            font-weight: bold
        }
        .groupName {
            font-family: Segoe UI;
            font-size: 16px;
            color: Gray
        }
    </style>

    <script type="text/javascript" src="libs/json2.js"></script>
    <script type="text/javascript" src="libs/jquery.js"></script>
    <script type="text/javascript" src="libs/sap.common.globalization.js"></script>
    <script type="text/javascript" src="libs/sap.riv.base.js" base-url="modules/"></script>
    <script type="text/javascript" src="modules/main.js"></script>
    <script type="text/javascript" src="libs/sap.riv.themes.js"></script>
</head>
<body>
    <div id="chart" style="width: 600px; height: 400px; background-color: #ffffff"><div id="0" style="position: absolute; font-size: 10px; box-sizing: border-box; overflow-x: visible; overflow-y: visible; left: 8px; top: 8px; width: 600px; height: 400px; ">` 
```

在 chrome 中我可以看到

```
 body{
 display:block;
 margin: 8px;
} 
```

我使用 document.getElementsByTagName('body').style 但什么也没得到。

我的第一个 div 位于顶部和左侧：html 正文的 8px。

但它确实有保证金，我怎么能得到这个默认保证金值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:59:50.223

`document.getElementsByTagName('body')`成功返回一个数组。
要摆脱正文中的边距，请使用普通 css

```
body{
    margin: 0;
} 
```

编辑：我发现这个功能可以为您提供[quirksmode上的元素样式](http://www.quirksmode.org/dom/getstyles.html)

```
function getStyle(el,styleProp)
{
    if (el.currentStyle)
        var y = el.currentStyle[styleProp];
    else if (document.defaultView && document.defaultView.getComputedStyle)
        var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
    return y;
} 
```

[小提琴](http://jsfiddle.net/mowglisanu/QEPRr/) [1 小提琴2](http://jsfiddle.net/mowglisanu/QEPRr/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:34:28.423

您可以查看以下链接：

[http://javascript.info/tutorial/styles-and-classes-getcomputedstyle](http://javascript.info/tutorial/styles-and-classes-getcomputedstyle)

检查正文边距值（[http://jsfiddle.net/eMnBL/6/](http://jsfiddle.net/eMnBL/6/)）：

```
var computedStyle = window.getComputedStyle ? getComputedStyle(document.body, null) : document.body.currentStyle;

alert(computedStyle['marginTop']); 
```

# php - 注册脚本 PHP MySQL 不插入数据库

> ID：10509576
> 
> 赞同：1
> 
> 时间：2012-05-09T03:50:04.677
> 
> 标签：php, mysql, html

我很困惑为什么这段代码不起作用。我正在尝试将数据插入一个名为“clubresults”的 MySQL 数据库，其中包含一个名为“members”的表。通常这种东西对我来说相当容易，但是数据库中没有显示任何内容。显然，现在只是使用 xammpp 在本地主机上运行它。代码如下。

配置文件

```
<?php 
 // Connects to your Database 

 mysql_connect("localhost", "root", "") or die(mysql_error()); 

 mysql_select_db("clubresults") or die(mysql_error());

?> 
```

RegProcess.php - 主 PHP 类

```
<?php 
include "config.php";

$Firstname = $_POST['Firstname'];
$Surname = $_POST['Surname'];
$Password = md5($_POST['Password']);
$Email = $_POST['Email'];

$insert = 'INSERT into members(Firstname, Surname, Password, Email) VALUES ("'.$Firstname.'", "'.$Surname.'", "'.Password.'", "'.$Email.'")';
mysql_query($insert);

?> 
```

Register.php - 包括 HTML 表单

```
 <form action="regprocess.php" method="post">
             <table border="0">
             <tr><td colspan=2><h1>Register</h1></td></tr> <br>
             <tr><td>Firstname:</td><td>
             <input type="text" name="Firstname" maxlength="60">
             </td></tr>
             <tr><td>Surname:</td><td>
             <input type="text" name="Surname" maxlength="60">
             </td></tr>
             <tr><td>Password:</td><td>
             <input type="password" name="Password" maxlength="20">
             </td></tr>
<tr><td>Email:</td><td>
             <input type="text" name="Email" maxlength="50">
             </td></tr>
             <tr><th colspan=2><input type="submit" name="submit" value="Register"> 
         </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:52:48.883

```
$insert = 'INSERT into members(Firstname, Surname, Password, Email) VALUES ("'.$Firstname.'", "'.$Surname.'", "'.$Password.'", "'.$Email.'")';
                                                                                                                    ^^ 
```

你忘了放`$`之前`password`

# jquery-mobile - jquerymobile：确定设备方向

> ID：10509579
> 
> 赞同：4
> 
> 时间：2012-05-09T03:50:14.140
> 
> 标签：jquery-mobile, device-orientation

```
$(window).bind("orientationchange", function(e){
   var ow = (e.orientation=="portrait" ? "縦" : "横");
   alert("端末の向きは "+ow+" です。");
}); 
```

使用上面的代码，我可以确定设备是处于纵向还是横向模式。但我的问题是，是否可以确定设备倾斜的景观（景观右/景观左）的哪一侧，以及设备是否倒置？

感谢大家的支持。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T23:30:25.450

```
$(window).bind('orientationchange', function() {
   alert(window.orientation);
}); 
```

*   0 = 纵向。这是默认值
*   -90 = 横向，屏幕顺时针转动
*   90 = 横向，屏幕逆时针转动
*   180 = 纵向，屏幕上下颠倒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:35:29.267

我会考虑这篇文章：

[http://www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/](http://www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T13:08:59.610

最简单的答案：通过

```
window.orientation 
```

`window.orientation`返回时`0`，`180`您处于**纵向模式**，返回时，`90`您`270`处于**横向模式**。

# mysql - Mysql 4294967294 列的奇怪数据

> ID：10509580
> 
> 赞同：-1
> 
> 时间：2012-05-09T03:50:34.577
> 
> 标签：mysql

这是我第二次在此表中获得 4294967294 值。我不知道它是从哪里来的。我检查了我的 mysql.log，它没有出现在那里的任何地方。

数据类型是 int(3)

这是怎么回事？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:04:22.147

这个数字是 2^32 - 所以 unsigned int 可以是最大的数字。它可以尝试插入-1吗？是否启用了严格 SQL 模式？如果不是按照 MySql 手册：

> 如果没有启用限制模式，MySQL 会将值裁剪到范围的适当端点并存储结果值。

# php - CSS / PHP / MySQL - 将结果显示为 3 列

> ID：10509586
> 
> 赞同：2
> 
> 时间：2012-05-09T03:51:32.097
> 
> 标签：php, mysql, css

我正在尝试将我的查询结果显示为每行返回的三列。

设置是 3 个 div 全部漂浮在一个大包装内。够简单吧？

```
#wrapper {width: 650px;}
#left    {width: 200px; float: left;}
#middle  {width: 200px; float: left;}
#right   {width: 200px; float: left;}

Results displayed like:
LEFT | MIDDLE | RIGHT
LEFT | MIDDLE | RIGHT
LEFT | MIDDLE | RIGHT
LEFT | MIDDLE | RIGHT 
```

只是现在，我有这个 mysql 关联查询，我想在每一列中显示结果。

简单来说，我`Column A`需要在`left`div 中。

`Columns B through Y`在`middle div`.

`Column Z`在`right`分区中。

这是我的查询：

```
while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $col => $val) {
           if ($col == "Column A") {
              //How to get this in left div?
              }
           if ($col != "Column A" && $col != "Column Z") {
              //How to get this in middle div?
              }
           if ($col == "Column Z") {
              //How to get this in right div?
              }
        }
} 
```

我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:58:21.710

始终尝试将视图 (HTML) 与实际代码分开。您可能想阅读一些有关 MVC 架构的信息。一开始似乎很难理解，但相信我——值得学习如何使用它。

```
<?php 
$column = array(
    'A' => array(), 
    'B' => array(), 
    'Z' => array()
);

while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $col => $val) {
           if ($col == "Column A") {
              $column['A'][] = $row;
              }
           if ($col != "Column A" && $col != "Column Z") {
              $column['B'][] = $row;
              }
           if ($col == "Column Z") {
              $column['Z'][] = $row;
              }
        }
}
?>

<style type="text/css">
div {width:200px;float:left}
</style>

<!-- 1st column -->
<div><?php foreach ($column['A'] AS $row) { ?>...<?php } ?></div>

<!-- 2nd column -->
<div>..</div>

<!-- 3rd column -->
<div>..</div> 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:01:06.617

你在这里有很多选择。但正如我要做的那样，制作 3 或 1 个数组，然后在我的模板中用 html 迭代它们，你就到了。

就像是：

```
$col_left  = array();
$col_mid   = array();
$col_right = array();
while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $col => $val) {
           if ($col == "Column A") {
                  $col_left[] = $val;
              }
           if ($col != "Column A" && $col != "Column Z") {
                  $col_mid[] = $val;
              }
           if ($col == "Column Z") {
                  $col_right[] = $val;
              }
        }
} 
```

然后只需在 html 循环中，您就完成了。还有更多选择，但这将是我的想法。

然后在html中：

```
<div id="left">
<?php 
   foreach($col_left as $result){
      echo $result.'<br/>';
   }
?>
</div> 
```

类似的东西，你可以在那里添加空等检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T04:01:17.263

考虑到您当前的标识符，我会稍微自主地进行操作。我刚刚将所有内容转储到一个数组中，并在底部加入了换行符。我的示例可能有点过于笼统，但它确实可以完成工作，并且完全可以进行调整:)

```
<?
$columns = array(
    'left'      => array(),
    'middle'    => array(),
    'right'     => array()
);

while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $col => $val) {
        if ($col == "Column A") {
            $columns['left'][] = $val;
        } elseif ($col == "Column Z") {
            $columns['right'][] = $val;
        } else {
            $columns['middle'][] = $val;
        }
    }
}
?>

<div id="wrapper">
    <? foreach($columns as $column => $value_array) { ?>
    <div id="<?= $column ?>">
        <?= join("<br />", $value_array) ?>
    </div>
    <? } ?>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T04:00:55.280

我做了这件事，但我把结果放到了一个表中。我将模函数与辅助计数器变量一起使用。

```
if (($artisttablecount % 3) == 0){
        echo "</tr><tr>";
      } 
```

我不确定如何使用 div 来实现，但 mod 功能可能会有所帮助。完整代码如下。

```
 //QUERY
$artisttable = mysql_query("SELECT DISTINCT * FROM records GROUP BY artist ORDER BY artist ASC");

//HELPER VAR FOR PRINTING IN 3 ROWS
$artisttablecount=0;

//LOOP THROUGH RESULTS
while($row = mysql_fetch_array($artisttable)){

//MAKES TABLE 3 COLUMNS
  if (($artisttablecount % 3) == 0){
    echo "</tr><tr>";
  }
  $current=$row['Artist'];      
  $artcount = mysql_num_rows(mysql_query("SELECT * FROM records WHERE artist = '$current'"));
  $spaceless = str_replace(" ", "%20", $row['Artist']); 
  echo "<td><a href=inventory.php?dec=0&format=0&art='" . $spaceless . "'>" .  $row['Artist'] . "</a> ($artcount)</td>";    
  $artisttablecount++;
}
?> 
```

# mysql - 在 MySQL 中保持快捷方式是一种常见的做法吗？

> ID：10509587
> 
> 赞同：2
> 
> 时间：2012-05-09T03:51:33.180
> 
> 标签：mysql, sql, database, database-design

这是我最近一直在做的事情，想知道其他人是否也这样做，如果是，这种做法的名称是什么。

我在我的表中保留了快捷方式列，这样我就可以避免进行太多的连接。例如，如果我有一个用户表和一个地理表：

用户：

```
id | username | zip       | copy_latitude | copy_longitude | other info
------------------------------------------------------------------------
1  | Bob      | 11345     | 40.81518000   | -73.04550000   | etc... 
```

地理：

```
id | zip_code | latitude    | longitude
----------------------------------------
1  | 11345    | 40.81518000 | -73.04550000 
```

现在，如果我想获取 Bob 的纬度和经度，我可以在我用来获取 bob 的其他信息的同一个 select 语句中这样做：

```
SELECT a_bunch_of_other_columns, copy_latitude, copy_longitude 
FROM users WHERE id = 1; 
```

vs（如果我没有保留快捷方式）：

```
SELECT a_bunch_of_other_columns, latitude, longitude 
FROM users
INNER JOIN geo ON user.zip = geo.zip_code
WHERE users.id = 1; 
```

通过保留快捷方式，我为自己节省了一个连接。现在，对于这个示例表和语句来说，这似乎没什么大不了的，但是我有一些带有 6 或 7 个连接的巨大表和语句，我觉得这很有帮助。

唯一的开销是在任何时候发生变化时都必须更新这两个地方。我通过存储过程来解决这个问题。

我的问题是：

> *   这是开发人员之间的常见做法吗？如果是这样，它叫什么？
> *   如果我这样做，我的数据库是否仍然正常化？（我会假设是这样，因为为了数据完整性，即使我不从那里使用它，我也总是将数据的有效副本保存在适当的位置）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:57:30.553

我不知道这是否普遍，但我确信这不是好的做法。每当您将数据存储在多个位置时，它都不是最佳的。当然，有时使用非规范化数据库来提高性能，例如报告数据库或数据仓库。在这些情况下，数据库通常是事务数据库的只读非规范化副本。

如果你真的需要减少你的连接，你不能只创建满足这些情况的视图吗？

您为提高查询性能而创建的所有这些重复数据当然会降低插入/更新性能。你如何跟踪所有这些额外的数据，如果它变得不同步会发生什么？当您离开而其他人必须发现所有需要更新数据的额外位置时会发生什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T03:55:57.360

*这是开发人员之间的常见做法吗？如果是这样，它叫什么？*

我只能为自己说话——我不这样做

*这是开发人员之间的常见做法吗？如果是这样，它叫什么？如果我这样做，我的数据库是否仍然正常化？（我会假设是这样，因为为了数据完整性，即使我不从那里使用它，我也总是将数据的有效副本保存在适当的位置）*

不

顺便说一句 - 你有另一个开销 - 存储

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T04:03:32.923

它不再标准化，因为您的表中有重复的数据。

我想你可以称之为“非规范化”。

您真正会这样做的唯一一次是出于速度/优化目的，这就是您在问题中所说的，您已经这样做以消除复杂性。

老实说，在我的任何数据库中，我从来没有达到需要这样做以优化查询速度的地步。

我建议做一个基准测试，看看它比索引好的连接快多少

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:20:50.790

让我们这样看一下。你已经知道了一些。（PostgreSQL 语法；dbms 与规范化无关，仅用于实现。）

```
create table geo (
  zip_code char(5) not null,
  -- CHECK constraints on lat and long omitted.
  latitude float not null,
  longitude float not null,
  primary key (zip_code),
  unique (latitude, longitude)
);

create table users (
  user_id integer not null,
  username varchar(10) not null,
  zip_code char(5) not null, 
  primary key (user_id),
  foreign key (zip_code) references geo (zip_code) 
    on update cascade on delete restrict
); 
```

很明显，这两个表都在 5NF 中。

您*可以*为地理表创建一个 ID 号，并且*可以*将 users.zip_code 替换为该 ID 号。但是用代理ID号替换真实数据与规范化无关，它不会改变这些表的正常形式。

用 id 号替换真实数据*确实会*改变性能；每次需要用户的邮政编码时，都需要加入才能获得。这不是一个完全可预测的变化。实际性能因 dbms、服务器、密钥宽度等而异。你不应该在测试你自己的表时遇到麻烦。您可能会发现，在多达几百万行的情况下，自然键的性能优于代理 ID 号。（这就是我在这里为我们的生产数据库测试设计时发现的。）

现在让我们稍微改变一下结构。

```
create table geo (
  zip_code char(5) not null,
  -- CHECK constraints on lat and long omitted.
  latitude float not null,
  longitude float not null,
  primary key (zip_code),
  unique (latitude, longitude),
  -- Allows all three columns to be the target for a foreign key.
  unique (zip_code, latitude, longitude)
);

create table users (
  user_id integer not null,
  username varchar(10) not null,
  zip_code char(5) not null, 
  latitude float not null,
  longitude float not null,
  primary key (user_id),
  -- This FK has to reference all three columns. If split, it's possible
  -- to reference the latitude and longitude for the wrong zip code.
  foreign key (zip_code, latitude, longitude) 
    references geo (zip_code, latitude, longitude) 
    on update cascade on delete restrict
); 
```

尽管此更改*确实*引入了传递依赖，但在 user_id -> zip_code 和 zip_code -> latitude 等中，它不会导致任何插入、更新或删除异常。这是因为传递依赖关系中涉及的所有值都由对 5NF 表的单个外键引用覆盖。

表geo还在5NF；用户现在处于 2NF。我们在这里得到或失去了什么？

*   我们失去了磁盘空间来存储更广泛的外键数据和索引。
*   多达一定数量的行（可能是几百万），我们在 SELECT 查询上获得更快的性能。（我没有测试你的模式，因为我没有时间。但我已经通过使用自然键测量了 20 到 30 倍的速度增加。你的差异可能不会那么显着。）
*   我们在 INSERT 语句和大多数 UPDATE 语句上得到较慢的性能。（*慢*并不意味着*慢*。5msec 比 3msec 慢，但 5msec 不一定慢。我自己的大多数插入和更新都在几分之一毫秒内运行。）

所以构建一个测试模式，用几百万行填充它，然后测量性能。测试性能

*   zip_code 上的外键，以及获取纬度和经度的连接，然后
*   使用 {zip_code, latitude, longitude} 上的外键重组和测试，然后
*   使用代理 ID 号和连接进行重组和测试以获取 zip_code、纬度和经度。

并在此处发布结果。我很想见到他们。

# java - 在网站的 PHP 上执行 *.java 或 *.jar

> ID：10509592
> 
> 赞同：2
> 
> 时间：2012-05-09T03:52:05.230
> 
> 标签：java, php, web-hosting, execute

我已经可以在我的 xampp 上的 PHP 上执行 *.java 或 *.jar，使用此代码

```
exec('java -cp stanford-parser.jar edu.stanford.nlp.parser.lexparser.LexicalizedParser stanford-parser-2012-03-09-models\edu\stanford\nlp\models\lexparser\englishPCFG.ser.gz text.txt > result.txt'); 
```

它是我电脑中的本地主机。

现在我想将我的编码托管到网站互联网中。恐怕 java 不想执行和运行 exec 行。我应该怎么做才能使 exec *.java 或 *.jar 可以在网站上运行？

我听说我必须安装 tomcat 或 javabridge。但我不明白。你能帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:55:35.640

你不需要tomcat来运行上面的命令，只要你运行的服务器上安装了java，你应该能够像在你自己的机器上一样运行它。当然，您需要确保您的路径设置正确，即使这样这也不是一个好主意，特别是如果您预计它会受到大量流量的影响或者需要大量时间才能完成（> 5 秒）。

最简单的“正确”方法是启动一个长时间运行的进程（在 Apache/php 请求之外，并在完成时设置某种类型的标志或指示符。如果需要，您可以刷新浏览器完成后立即通知。一个简单的方法是将上面的命令作为后台进程运行（在命令末尾附加 & 如下所示）。当然，这省略了很多错误处理这可能需要完成。

```
exec('java -cp stanford-parser.jar edu.stanford.nlp.parser.lexparser.LexicalizedParser stanford-parser-2012-03-09-models\edu\stanford\nlp\models\lexparser\englishPCFG.ser.gz text.txt &> result.txt'); 
```

# c++ - 为什么我不能用统一初始化初始化初始化列表中的引用？

> ID：10509603
> 
> 赞同：33
> 
> 时间：2012-05-09T03:54:10.567
> 
> 标签：c++, reference, c++11, initializer-list, uniform-initialization

也就是说，为什么会这样：

```
struct S {};

struct T
{
    T(S& s) : s{s} {}

    S& s;
};

int main()
{
    S s;
    T t{s};
} 
```

给我一个 GCC 4.7 的编译器错误：

```
test.cpp: In constructor 'T::T(S&)':
test.cpp:5:18: error: invalid initialization of non-const reference of type 'S&' from an rvalue of type '<brace-enclosed initializer list>' 
```

?

要修复错误，我必须`s{s}`将`s(s)`. 这不会破坏统一初始化的*统一性吗？*

**编辑**：我尝试了 clang，并且 clang 接受了它，所以也许这是一个 GCC 错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T04:22:52.947

是的，它是一个[错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=50025)。这是新事物，并在 2012 年 2 月的工作文件中投票（[链接](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1288)）。

[Nicol Bolas](https://stackoverflow.com/questions/10509603/why-cant-i-initialize-a-reference-in-an-initializer-list-with-uniform-initializ/10509813#comment13589039_10509813)提出了一个很好的观点，即 gcc 实际上是符合 FDIS 批准的 C++11 标准的编译器，因为在此之后对工作文件进行了更改。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T04:13:20.620

我认为这是编译器中的错误。*通过列表初始化*处理引用初始化的两段是（在 n3337 中）：

> §8.5.4/3
> 
> 类型 T 的对象或引用的列表初始化定义如下：
> 
> *   否则，如果初始化列表有一个类型为 E 的元素，并且 T 不是引用类型或其引用类型与 E 引用相关，则从该元素初始化对象或引用；如果需要缩小转换（见下文）将元素转换为 T，则程序格式错误。
>     
>     
> *   否则，如果 T 是引用类型，则 T 引用的类型的纯右值临时是列表初始化的，并且引用绑定到该临时。[注意：像往常一样，如果引用类型是对非常量类型的左值引用，则绑定将失败并且程序格式错误。——尾注]

编译器似乎正在应用最后一段，而应该应用第一段，因为与*引用相关*的定义为

> 8.5.3/4
> 
> 给定类型“cv1 T1”和“cv2 T2”，如果 T1 与 T2 的类型相同，或者 T1 是 T2 的基类，则“cv1 T1”与“cv2 T2”引用相关。

在问题的情况下，大括号初始化列表中的引用和初始化程序的类型完全相同，这意味着初始化应该是有效的。

* * *

在 FDIS 草案中，等效段落的顺序颠倒了。这意味着 FDIS 草案 (n3290) 不允许 *lvalue*s 的*大括号列表初始化*。另一方面，阅读文本似乎很明显这是标准中的一个*错误*，并且意图具有 n3337 的顺序：

> *   否则，如果 T 是引用类型，则 T 引用的类型的纯右值临时是列表初始化的，并且引用绑定到该临时。
>     
>     
> *   否则，如果初始化列表只有一个元素，则从该元素初始化对象或**引用；**如果需要缩小转换（见下文）将元素转换为 T，则程序格式错误。

该文档中的顺序意味着因为所有引用类型都由第一个子句处理，所以在下一段中提到**引用是没有意义的。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-11T05:51:15.313

（注意：我写这个答案是在原始问题后 2 年的后见之明；并将评论中的一些信息放入实际答案中，以便可搜索）。

* * *

当然，`S&`用同样类型的引用来初始化类型的引用`S&`应该是直接绑定的。

*该问题是C++11 标准中的*一个缺陷，已由[DR1288](http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1288)解决。更正后的文本出现在 C++14 中。

委员会已经澄清，更正后的文本是为 C++11 设计的，因此“符合标准的编译器”应该实现更正后的版本。

g++ 4.8 遵循 C++11 标准的已发布文本；然而，一旦这个问题暴露出来，g++ 4.9 就实现了更正的版本，即使使用了`-std=c++11`switch。

请注意，问题也不限于构造函数初始化程序列表，例如：`S s; S &t{s};`在 g++ 4.8 中不起作用，也不是`S s; S &t = s; S &u { t };`

# wordpress - 在 Wordpress 中使用管理主题和已安装的主题

> ID：10509606
> 
> 赞同：0
> 
> 时间：2012-05-09T03:54:27.760
> 
> 标签：wordpress

所有，我最近购买了以下管理主题： [http ://themeforest.net/item/white-label-a-full-featured-admin-skin/270758](http://themeforest.net/item/white-label-a-full-featured-admin-skin/270758)

我也已经安装了以下主题并在我的网站上使用它：http: [//themeforest.net/item/alyeska-responsive-wordpress-theme/164366](http://themeforest.net/item/alyeska-responsive-wordpress-theme/164366)

我想使用第一个管理主题的一些功能，但对我在 Wordpress 中安装的现有主题没有任何问题。

有谁知道如何在不影响我已经在自己网站上使用的当前短代码、css 等的情况下使用管理主题及其中的功能？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:56:59.877

很抱歉告诉您，您购买的管理主题不适用于 WordPress。它意味着作为 Web 应用程序后端的 HTML 开始。

**更新**

或者，我不确定您是否打算从管理主题中获取一些东西并在您的 WordPress 主题中使用它们。如果是这样，请确保在您的问题中更清楚您想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:30:37.073

不，没有真正的 WordPress 管理主题。开发周期非常定期地更改管理样式和功能，每 3 个月左右进行一次重大更改。这将破坏任何管理主题并使其成为维护的噩梦，因此没有人这样做。

附言。您可以更改一些基本样式，例如颜色/徽标，如果您知道自己在做什么的话。但是您显示的链接没有办法，除非您计划永远不会更新您的安装。

# python - python-ldap 无法在 Heroku 中安装

> ID：10509607
> 
> 赞同：5
> 
> 时间：2012-05-09T03:54:43.320
> 
> 标签：python, heroku, python-ldap

Heroku 似乎不支持 python-ldap。在 requirements.txt 文件中使用“python-ldap==2.3.13”安装 pip 失败，在 Heroku 中出现以下错误：

> gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DHAVE_LIBLDAP_R -DHAVE_SASL -DHAVE_TLS -DLDAPMODULE_VERSION=2.3.13 -IModules -I/usr/local/ openldap-2.3/include -I/usr/include/sasl -I/usr/local/include/python2.7 -c Modules/LDAPObject.c -o build/temp.linux-x86_64-2.7/Modules/LDAPObject.o
> 
> Modules/LDAPObject.c:18:18：错误：sasl.h：没有这样的文件或目录

似乎 Heroku 没有 python-ldap 所需的库，我不知道除了“pip”之外是否有安装依赖库的方法。

在 Heroku 的 Python/Django 堆栈中支持 ldap 身份验证的推荐解决方案是什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:20:07.720

您可以在您喜欢的任何库中创建供应商的自定义构建包。看看[https://github.com/cirlabs/heroku-buildpack-geodjango](https://github.com/cirlabs/heroku-buildpack-geodjango)它通过 Curl 安装了一个库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-17T23:46:00.597

我知道这个问题很老，但我遇到了同样的问题，谷歌把我带到了这里。我会写下我发现的内容，这样也许我可以帮助有同样问题并想要一个当前有效的解决方案的人。

正如@Schneems 所说，您可以使用heroku 创建自己的构建包并添加您的自定义环境。

您可以创建包含 python-ldap 的自定义 buildpack，但是，从零开始创建自定义 buildpack 对于某些人来说并不是一个真正的选择，因此您可以分叉官方 python buildpack [https://github.com/heroku/heroku-buildpack-python](https://github.com/heroku/heroku-buildpack-python)并像@damgad 一样添加python-ldap。

这里的问题是来自@damgad 的repo 与官方python/buildpack 的最新版本相比已经过时。（在发表此评论时）

我从一个使用 @damgad 代码并创建自己的 fork 的人那里找到了这个拉取请求（现已关闭）[https://github.com/heroku/heroku-buildpack-python/pull/271](https://github.com/heroku/heroku-buildpack-python/pull/271) [https://github.com/josegonzalez /heroku-buildpack-python](https://github.com/josegonzalez/heroku-buildpack-python)。

我尝试使用它，但他的 repo 已经过时并且在部署我的应用程序时出现了一些错误。

所以我刚刚创建了我自己的当前官方 heroku/python buildpack 的分支，添加了它 [https://github.com/josgonzalez/heroku-buildpack-python](https://github.com/josegonzalez/heroku-buildpack-python)。代码，仅修复了我遇到的一些错误，并且您拥有当前正在使用 python-ldap [https://github.com/manuggz/heroku-buildpack-python](https://github.com/manuggz/heroku-buildpack-python)的 buildpack 。

这个 buildpack 支持 python3.6，这就是我想要的。

**Tl;dr**如果你想使用 python-ldap （或者创建你自己的[官方 buildpack](https://github.com/heroku/heroku-buildpack-python)的分支），你必须使用这个**更新**的 buildpack ：

```
$ heroku buildpacks:set https://github.com/manuggz/heroku-buildpack-python 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T10:10:17.817

我最近创建了支持`python-ldap`. 它在[我的 github repo](https://github.com/damgad/heroku-buildpack-python-ldap)上可用。

要使其工作，您只需要指定这样的环境变量：

```
heroku config:set BUILDPACK_URL=https://github.com/damgad/heroku-buildpack-python-ldap.git 
```

# windows - MS Dos 批处理文件脚本重新启动 IE

> ID：10509610
> 
> 赞同：-2
> 
> 时间：2012-05-09T03:54:48.623
> 
> 标签：windows, internet-explorer, dos, batch-processing

寻找 MS DOS 批处理文件脚本来重新启动 Internet Explorer。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:24:35.477

```
start "" taskkill /im iexplore.exe
start "" "C:\Program Files\Internet Explorer\iexplore.exe" google.com
CLS
EXIT 
```

# ruby-on-rails - 可以在 Mongoid/Rails 中使用数量不同的字段的模型吗？

> ID：10509632
> 
> 赞同：0
> 
> 时间：2012-05-09T04:00:25.523
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试使用 Mongoid 在 Rails 中创建一个问卷应用程序。我一直在数据库设置上磕磕绊绊，因为我是新手。

我希望用户能够创建具有不同数量答案的问题。有些问题可能有两种可能：真、假。有些人可能有四五种可能性。

所以我尝试创建一个问题模型和一个答案模型，然后将答案嵌入问题中。我尝试了一个带有 question:string answer-a:string answer-b:string answer-c:string 等的模型。但这两种方法似乎都愚蠢而笨拙。

有没有办法创建一个模型，允许某人创建问题字段和答案字段，但答案字段可以有多个？那么，创建问题、添加答案并继续添加答案，直到他们完成多项选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:55:16.737

如果答案只是字符串，那么您可以使用[数组字段](http://mongoid.org/docs/documents/fields.html)：

```
class Question
  include Mongoid::Document
  #...
  field :answers, :type => Array
end 
```

如果答案有一些内部结构（也许您想跟踪它们的创建或更改时间或其他），那么您可以使用[`embeds_many`](http://mongoid.org/docs/relations/embedded/1-n.html)两个模型：

```
class Question
  include Mongoid::Document
  #...
  embeds_many :answers
end

class Answer
  include Mongoid::Document
  #...
  embedded_in :question
end 
```

任何一个都可以让你以`q.answers`一种自然的类似列表的方式工作，所以渲染这些东西是一件简单的事情，`<% q.answers.each do |a| %>`你可以[`shuffle`](https://ruby-doc.org/core/Array.html#method-i-shuffle)以随机顺序显示它们的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:15:41.340

如果您想为嵌套模型动态生成表单，我建议遵循此 RailsCast：[http: //railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

RailsCast 方法使用应用程序助手来动态生成新对象。

我更喜欢@mu 使用jQuery 创建表单元素的方法。Rails 的好处是，当传递嵌套属性时，你可以给它任何你想要的索引。因此，我将生成一个新表单，其索引为，例如，`Time.now.to_s`没有 ID 参数。所以我的控制器收到一个看起来像这样的参数：

```
{"question" => {"answers_attributes" => { "1234567" => { "description" => "New answer" } } } } 
```

# database - 在 ESE 中，我可以安全地使用 JET_coltypDateTime 来保存无符号的 64 位值吗？

> ID：10509636
> 
> 赞同：0
> 
> 时间：2012-05-09T04:01:03.193
> 
> 标签：database, windows, winapi, extensible-storage-engine

我在较旧的操作系统上使用 ESE (JET_VERSION = 0x0501)。我需要存储一个无符号的 64 int

我可以安全地将这个 int 转换为 JET_coltyDateTime 或 JET_coltypCurrency 吗？我错过了什么吗，ESE 是否对范围进行任何类型的转换/限制？

请注意，就我的目的而言，排序顺序并不重要，除非它以某种方式破坏了搜索能力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:58:07.940

那可行。数据在内部存储为 64 位值，并且在索引时仅以特定类型的方式处理。你会得到一个奇怪的排序顺序，但可以进行精确值搜索。

# php - if 和 else 格式？php

> ID：10509640
> 
> 赞同：0
> 
> 时间：2012-05-09T04:01:27.157
> 
> 标签：php

我一直在试图弄清楚我做错了什么。当它检查用户是否在第 26 行被激活时，即使用户被激活，它也会将用户发送到第 38 行，告诉他们他们的用户名或密码不正确，但它们是正确的。您可以在代码的左侧找到两行。

```
 <?php
      require("includes/inc.php");
      if ($_SESSION['username'] != null){
        # Redirect the user to the member area
        header('Location: member.php');
      } else {
        # Check if the user is trying to login
        if ($_GET['do'] == "login"){
          # If they are, process the details they have provided. Else, continue with showing the form
          $username = trim(sanitize($_POST['username']));
          $password = trim(sanitize($_POST['password']));
          # Check if the username and password are empty
          if (($username == null) || ($password == null)){
            header('Location: login.php?error=field_blank');
          } else {
            $query_accounts = mysql_query("SELECT * FROM users WHERE `username` = '$username' LIMIT 1");
            $query_count = mysql_num_rows($query_accounts);
            if ($query_count == null){
              // User not found
              header('Location: login.php?error=details_wrong');
            } else {
//Line 26          $active = mysql_fetch_array($query_accounts);
                if ($active['active'] == 0) {
                    header('Location: login.php?error=activate');
                } else {
                   $accounts = mysql_fetch_array($query_accounts);
                    // Check if the password matches the user's password
                     if ($accounts[password] == password($password)){
                    // The password is correct, start a session for the user
                        $_SESSION['username'] = $username;
                        header('Location: member.php');
                    } else {
                    // Incorrect password
//Line 38                   header('Location: login.php?error=details_wrong');
                }
              }
            }
          }
        } else {
    ?>
    <!doctype html>
    <html>
    <head>
    <title>PHP Login & Registration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <div id="main">  
    <h1>Login</h1>
    </head>
    <body>
        Need a account? <a href="register.php">Register</a>
        <!-- Display Messages -->
        <?php
          # -> Messages
          if ($_GET['error'] == "field_blank"){ echo "<div class='error'>The username and/or password field was left blank</div>\n"; }
          elseif ($_GET['error'] == "details_wrong"){ echo "<div class='error'>The username and/or password was incorrect</div>\n"; }
          elseif ($_GET['error'] == "activate"){ echo "<div class='error'>Please activate your account.</div>\n"; }
          elseif ($_GET['success'] == "logout"){ echo "<div class='success'>You are now logged out</div>\n"; }
          elseif ($_GET['success'] == "complete"){ echo "<div class='success'>You are now registered, please activate your account by visiting your email.\n"; }
        ?>

          <!-- Login Form -->
          <form action="?do=login" method="post" autocomplete="on">
            <fieldset>
            <p>Username</p>
            <input type="text" name="username" size="40" maxlength="20" /> <br />
            <p>Password</p>
            <input type="password" name="password" size="40" maxlength="30" /> <br />
            <input type="submit" value="Login" style="width:80px;" />
            </fieldset>
        <?php include "footer.php"; ?>
          </form>
    </div>
    </body>
    </html>
    <?php
        } // End Check Login
      } // End check if logged in
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:04:47.747

唯一让我眼前一亮的是以下行

```
 if ($accounts[password] == password($password)){ 
```

密钥将被转换为 PHP 常量，根据我的最佳猜测来看您的代码，尚未定义。将密钥用引号括起来，如下所示。

```
 if ($accounts["password"] == password($password)){ 
```

我希望这有助于解决您的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:17:18.857

有几个问题：

a）您获得该行两次（第 26 行 $active = mysql_fetch_array($query_accounts); 并在 $accounts = mysql_fetch_array($query_accounts); 下面 - 这可能会给你两个不同的行，而实际上可能只有一个匹配 - 每个"fetch" 将指针向下移动一行

b) 检查您的变量类型。

i) mysql_num_rows 返回整数，但您正在与 null 进行比较

ii) 还要检查 $row['active'] 返回值 0 而不是字符串 null 或空白。在这两种情况下检查阴性可能更安全，即

```
if (mysql_num_rows($result) > 0) {

    if ($row['active']) {
        // active state
    } else {
        // inactive state
    }
} else {
    // Not found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:09:51.797

您唯一的解决方案是简化！这：

```
if (...) {
    if (...) {
        if (...) {
            ...
        }
    } else {
        ...
    }
    ...
} else {
    ...
} 
```

更好地表示为：

```
if ($someImportantCondition == false) {
    die('Important condition not met');
}

...

if ($someOtherImportantCondition == false) {
   die('Some other important condition not met');
}

...

echo 'Success!'; 
```

除了`die`ing，您还可以显示错误、重定向 using `header`、`include`错误页面、`return`来自函数或您需要执行的任何其他操作，以便在该点*停止*逻辑。把它变成一个普通人可以理解的形式，然后你的问题就会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T04:14:56.803

我使用符号

```
if (...)
{
   if (...)
   {
      ...
   }
   else
   {
      ...
   }

}
else
{
   ...   

} 
```

然后，您可以轻松识别与该位`else`匹配的部分。`if`

如果您使用您的代码执行此操作，您可以找出问题所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T04:17:00.060

我认为你有问题`$accounts = mysql_fetch_array($query_accounts);`

$accounts 是包含行和列作为索引的数组，您需要使用 while

```
while($accounts = mysql_fetch_array($query_accounts))
{

} 
```

# html - tags in IE9 not working

Ok I have a strange issue again with Internet Explorer but this only happens in Internet Explorer 9 version. The problem is simple, the title does not show what I put inside my tags

> ID：10509644
> 
> 赞同：0
> 
> 时间：2012-05-09T04:01:52.893
> 
> 标签：html, internet-explorer, internet-explorer-9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:10:21.220

在 Yii 框架中尝试添加类似这样的标题 -

```
<title><?php echo CHtml::encode($this->pageTitle); ?></title> 
```

检查链接以获取更多参考[链接](http://www.techportal.co.za/yii-framework/367-how-to-set-the-page-title-in-yii-framework-11x)

**更新**

检查 cufon 字体，因为这有时可能会导致问题。

# javascript - 当用户使用 Dojo 滚动到底部时加载新内容？

> ID：10509647
> 
> 赞同：2
> 
> 时间：2012-05-09T04:02:45.540
> 
> 标签：javascript, html, dom, dojo, xpages

当用户到达底部时在 HTML 页面中加载新内容非常流行（FB、G+、Twitter），所以我也想在 XPages（它使用 Dojo）中实现它。看着 SO（和附近）我发现有关 JQuery 和/或通用的问题[here](http://www.webresourcesdepot.com/load-content-while-scrolling-with-jquery/)[和](https://stackoverflow.com/questions/3057892/checking-is-near-at-the-bottom-of-the-page)here[和](https://stackoverflow.com/questions/9247907/how-do-i-make-content-load-when-the-user-scrolls-down-to-it)here[和](https://stackoverflow.com/questions/5020351/how-to-load-the-web-page-content-based-on-user-scrolling)here[和](https://stackoverflow.com/questions/6271237/detecting-when-user-scrolls-to-bottom-of-div-with-jquery)here [和](https://stackoverflow.com/questions/5609255/javascript-jquery-perform-function-when-user-scrolls-near-bottom-of-page)here [和](http://ejohn.org/blog/learning-from-twitter/)here [和](http://jsfiddle.net/wQfMx/)here [和](https://stackoverflow.com/questions/3863069/how-do-you-call-a-javascript-ajax-function-when-the-user-reaches-the-end-of-a)here [，](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)仅举 几例。

但是在 Dojo 中如何做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:10:05.280

我不知道 Dojo 是如何做到的，但您可以使用纯 JavaScript DOM API 来做到这一点。

我已经在移动控件中完成了此操作。[从http://www.openntf.org/Projects/pmt.nsf/downloadcounter?openagent&project=XPages%20Mobile%20Controls&release=4.5.0&unid=2D4F47CB07AAEE4086257887004ED6C5&attachment=MobileControls450.zip](http://www.openntf.org/Projects/pmt.nsf/downloadcounter?openagent&project=XPages%20Mobile%20Controls&release=4.5.0&unid=2D4F47CB07AAEE4086257887004ED6C5&attachment=MobileControls450.zip)查看 MobileControlsLite.nsf（mView.xsp 和 mobileControls.js）

以下是我的应用程序中的一些片段：

```
function scrollingDetector() {
    ...

    var pos = window.pageYOffset;
    var max = document.documentElement.scrollHeight - document.documentElement.clientHeight;

    if (max - 80 < pos) {   
        onMoreButtonClick(...);
    }
}   

setInterval(scrollingDetector, 500); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:51:42.323

不幸的是，我无法评论 Niklas 的回答，但他的回答是正确的。我要更改的一件事是在您滚动到底部而不是调用特定函数的情况下发出 Dojo 事件。

```
var scrollingDetector = (function() {
    var max = calculateScrollHeight();

    return function(){
        if (max < window.pageYOffset) {   
            max = calculateScrollHeight();
            dojo.publish('/newsApp/onScrollBottom');
        }
    }
    function calculateScrollHeight(){
        return (document.documentElement.scrollHeight - document.documentElement.clientHeight) - 80; 
    }
})();   

setInterval(scrollingDetector, 500); 
```

（出于性能考虑，我还冒昧地进行了一些重构，因为我们只需要在到达页面底部时重新计算高度）。

这将允许您在代码的其他地方挂钩此事件，而无需编辑此代码段或覆盖 onMoreButtonClick() 函数。

# python - 重新登录到 Scrapy 网站以恢复 Scrapy 工作

> ID：10509648
> 
> 赞同：1
> 
> 时间：2012-05-09T04:02:47.560
> 
> 标签：python, scrapy

有没有办法让[Scrapy](http://scrapy.org/)蜘蛛登录到网站以恢复以前暂停的抓取工作？

编辑：澄清一下，我的问题实际上是关于 Scrapy 蜘蛛而不是一般的 cookie。也许一个更好的问题是，当 Scrapy 蜘蛛在工作目录中被冻结后复活时，是否有任何方法被调用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T14:46:27.513

是的你可以。

您应该更清楚刮板的确切工作流程。

无论如何，我假设您将在第一次抓取时登录，并希望在恢复抓取时使用相同的 cookie。

你可以使用[httplib2](http://code.google.com/p/httplib2/)库来做这样的事情。这是他们[示例页面](http://code.google.com/p/httplib2/wiki/Examples)中的代码示例，为了更清晰，我添加了注释。

```
import urllib
import httplib2

http = httplib2.Http()

url = 'http://www.example.com/login'   
body = {'USERNAME': 'foo', 'PASSWORD': 'bar'}
headers = {'Content-type': 'application/x-www-form-urlencoded'}

//submitting form data for logging into the website
response, content = http.request(url, 'POST', headers=headers, body=urllib.urlencode(body))

//Now the 'response' object contains the cookie the website sends
//which can be used for visiting the website again

//setting the cookie for the new 'headers'
headers_2 = {'Cookie': response['set-cookie']}

url = 'http://www.example.com/home'   

// using the 'headers_2' object to visit the website,
response, content = http.request(url, 'GET', headers=headers_2) 
```

如果您不清楚 cookie 的工作原理，请进行[搜索](http://duckduckgo.com/?q=how%20cookies%20work)。简而言之，“Cookies”是一种帮助服务器维护会话的客户端技术。

# tridion - 遍历模式中每个嵌入式模式字段以到达叶数据字段的递归函数

> ID：10509653
> 
> 赞同：0
> 
> 时间：2012-05-09T04:03:04.977
> 
> 标签：tridion

我在 Tridion 中有一个架构，其中嵌入了架构字段，其中可能进一步嵌入了字段。

我想达到最终叶字段，以便我可以为其分配一些值。为此，我想编写递归函数，它遍历每个字段，直到它到达最终字段。

我正在使用 SDL Tridion 2011 中的核心服务来实施

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ServiceModel;
using System.Net;
using System.Xml;
using Tridion.ContentManager.CoreService.Client;
using System.Text;
using Tridion.ContentManager.CoreService;
using System.ServiceModel.Channels;
using System.IO;
using System.Collections;
using System.Text.RegularExpressions;
using System.Xml.Linq;
using System.Data.OleDb;
using System.Data;
using System.Configuration;

namespace Loading_Utility
{
    public partial class TST : System.Web.UI.Page
    {
        Fields obj = new Fields();
        protected void Page_Load(object sender, EventArgs e)
        {
            using (ChannelFactory<ISessionAwareCoreService> factory =
            new ChannelFactory<ISessionAwareCoreService>("wsHttp_2011"))
            {
                ISessionAwareCoreService client = factory.CreateChannel();
                var schemaFields = client.ReadSchemaFields("tcm:202-2242-8", true, new ReadOptions());
                ComponentData component = (ComponentData)client.GetDefaultData(ItemType.Component, "tcm:202-638-2");
                var fields = Fields.ForContentOf(schemaFields);
                component.Schema.IdRef="tcm:202-2242-8";
            }
        }
        public void fieldRecursion(Field field)
        {
            //var getFields = fields;
            if (field.GetType() == typeof(EmbeddedSchemaFieldDefinitionData))
            {
                // code for checking further if field is embedded or not

                //Field newField = field.GetSubFields().GetFieldElements( new ItemFieldDefinitionData() as Field)
                //fieldRecursion(recursiveField);
            }
            //string fieldName = recursiveField.Name;
            //fields[fieldName] = "HI";

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:48:01.220

虽然我没有您正在寻找的解决方案，但我看到您正在使用核心服务，我个人更喜欢获取组件 XML (Component.Content) 并根据需要解析/操作它。也许如果您可以在此处粘贴 XML，我可以将其放入我的一个示例核心服务项目中，然后将解决方案发回给您？

如果这对您没有帮助，我已经查看了 api，这应该可以帮助您走上正确的道路。也许一旦你有一个解决方案，你可以把它粘贴在这里？

```
public void RecurseEmbeddedFields(SchemaFieldsData schemaFields)
{
    foreach (ItemFieldDefinitionData field in schemaFields.Fields)
    {
        if (field.GetType() == typeof(EmbeddedSchemaFieldDefinitionData))
        {
            // check if this field contains more embedded fields
            // if it does recurse
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:29:30.767

好的，我对没有提供帮助感到有点内疚，但我仍然坚持我的观点，即这不是与 Tridion 相关的问题，您应该尝试获得更多关于一般开发实践的经验。

下面是一个如何加载组件内容的示例，然后使用 Xml 递归读取它：

组件的xml：

```
<Content xmlns="uuid:02395f72-acef-44e8-9c35-ff8c9f380251">
    <EmbeddedSchema1>
        <SomeField>Hello</SomeField>
        <EmbeddedSchema2>
            <ATextField>There</ATextField>
        </EmbeddedSchema2>
    </EmbeddedSchema1>
</Content> 
```

核心服务代码：

```
static void Main(string[] args)
{
    SessionAwareCoreServiceClient client = new SessionAwareCoreServiceClient("wsHttp_2011");
    ReadOptions readOptions = new ReadOptions();

    ComponentData component = (ComponentData)client.Read("tcm:5-3234", readOptions);
    Console.WriteLine("Find fields recursively");

    XmlDocument content = new XmlDocument();
    content.LoadXml(component.Content);
    SchemaData schema = (SchemaData)client.Read(component.Schema.IdRef, readOptions);
    XmlNamespaceManager ns = new XmlNamespaceManager(new NameTable());
    ns.AddNamespace("content", schema.NamespaceUri);

    foreach (XmlElement node in content.SelectNodes("content:*", ns))
    {
        ReadContentRecursively(node, ns);
    }
    client.Close();
}
private static void ReadContentRecursively(XmlElement node, XmlNamespaceManager ns)
{
    if(!string.IsNullOrEmpty(node.InnerText))
    {
        foreach (XmlNode innerNode in node)
        {
            if(innerNode is XmlText)
            {
                Console.WriteLine("Node " + node.Name + " with value \"" + innerNode.Value + "\"");
            }
        }
    }
    if(node.SelectNodes("content:*", ns).Count > 0)
    {
        foreach (XmlElement childNode in node.SelectNodes("content:*", ns))
        {
            Console.WriteLine("Found Field: " + childNode.Name);
            ReadContentRecursively(childNode, ns);
        }
    }
} 
```

注意 ReadContentRecursively 是如何调用自身的？

希望这可以帮助。

# java - 未找到适用于 odbc、db2 的驱动程序错误

> ID：10509659
> 
> 赞同：0
> 
> 时间：2012-05-09T04:04:03.700
> 
> 标签：java, sql, odbc, db2, driver

我正在尝试使用以下 java 代码连接到远程数据库，但我收到一条错误消息，提示找不到合适的驱动程序。

```
DriverManager.getConnection("odbc:db2://url:port/dbname");
 Class.forName("com.ibm.db2.jcc.DB2Driver"); 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:18:28.213

两条评论：

1.您必须先加载驱动程序，然后再尝试使用它

2\. 如果我没记错的话，您正在加载的驱动程序是 DB2 UDB的**JDBC驱动程序，而不是****ODBC**。它的连接 URL 是“jdbc:db2//host:port/database”

所以你的代码应该是这样的：

```
Class.forName("com.ibm.db2.jcc.DB2Driver");
DriverManager.getConnection("jdbc:db2://host_or_ip_address:port/dbname"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:39:51.693

我找到了解决方案...我没有为驱动程序添加 JAR 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T21:02:40.423

您应该将 db2cc.jar、db2jcc_license_cu.jar 和 db2jcc_license_cisuz.jar 文件的 jar 文件添加到您的类路径位置，这些 jar 文件保存在 java 文件夹下的 db2 安装目录位置中，您获得了上述 jar 文件

# c - 让 getrusage() 在 C 中测量系统时间

> ID：10509660
> 
> 赞同：13
> 
> 时间：2012-05-09T04:04:05.217
> 
> 标签：c, time, systemtime, getrusage

我想测量执行某些代码所需的系统时间。为此，我知道我会将上述代码夹在两次 getrusage() 调用之间，但我得到了一些意想不到的结果......

```
#include <sys/time.h>
#include <sys/resource.h>
#include <unistd.h>
#include <stdio.h>

int main() {
  struct rusage usage;
  struct timeval start, end;
  int i, j, k = 0;

  getrusage(RUSAGE_SELF, &usage);
  start = usage.ru_stime;
  for (i = 0; i < 10000; i++) {
    /* Double loop for more interesting results. */
    for (j = 0; j < 10000; j++) {
      k += 20; 
    }
  }
  getrusage(RUSAGE_SELF, &usage);
  end = usage.ru_stime;

  printf("Started at: %ld.%lds\n", start.tv_sec, start.tv_usec);
  printf("Ended at: %ld.%lds\n", end.tv_sec, end.tv_usec);
  return 0;
} 
```

我希望这会产生两个不同的数字，但是唉！在看到我的电脑思考了一两秒后，结果如下：

```
Started at: 0.1999s
Ended at: 0.1999s 
```

我没有使用 getrusage() 对吗？为什么这两个数字不应该不同？如果我从根本上错了，是否有另一种方法可以使用 getrusage() 来测量某些源代码的系统时间？感谢您的阅读。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T07:18:22.380

您误解了“用户”和“系统”时间之间的区别。您的示例代码在您测量时主要在用户模式下执行（即运行应用程序代码），但“系统”时间是衡量在内核模式下执行时间（即处理系统调用）所花费的时间。

`ru_stime`是测量系统时间的正确字段。您的测试应用程序恰好没有在您检查的两点之间累积任何这样的时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T04:20:36.840

您应该改用`usage.ru_utime`，这是使用的用户 CPU 时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:03:34.197

使用 gprof。这将为您提供每个功能所花费的时间。安装 gprof 并使用这些标志进行编译：`-pg -fprofile-arcs -ftest-coverage.`

# python - 检测文件下载完成状态

> ID：10509661
> 
> 赞同：1
> 
> 时间：2012-05-09T04:04:20.470
> 
> 标签：python, django

我想问一下我是否可以在 Django 中检查文件（csv 文件）下载的状态。我有一个带有按钮的模板页面，单击该按钮会打开一个“另存为”对话框，用于从服务器下载文件（文件内容从数据库中检索）。下载完成后，我想用它的状态更新我的数据库（如果下载完成状态=已下载，如果中止状态=中止，如果取消状态=取消。我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T10:07:48.343

我不知道这是否正是您想要的，但您可以在两个时间点检查文件大小，然后比较文件大小。如果下载由于某种原因暂停，这个解决方案不是很好。

# session - 如何删除用户 SessionScoped？

> ID：10509663
> 
> 赞同：1
> 
> 时间：2012-05-09T04:04:23.720
> 
> 标签：session, jsf-2

我尝试在 JSF 2.0 中执行注销功能。首先，我为登录用户提供 AUTH_KEY。注销后，我删除了该用户的 AUTH_KEY。我的问题是无法注销未删除的用户会话。

登录功能部分：

```
if (startupInfo.getConnectionId().equals("success")) {
                    FacesContext.getCurrentInstance().getExternalContext()
                            .getSessionMap()
                            .put(AUTH_KEY, loggedUserInfo.getUserId());
                    return "success";
                } 
```

登出

```
 public String logout() {
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove(AUTH_KEY);

    return "logout";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:25:18.467

您应该在注销方法中使 HTTP 会话无效。仅删除用户信息不会终止会话：

```
HttpSession session = (HttpSession) FacesContext.getCurrentInstance()
                        .getExternalContext().getSession(false);
if (session != null) {
  session.invalidate();
} 
```

# c# - WPF中的圆角文本框

> ID：10509673
> 
> 赞同：6
> 
> 时间：2012-05-09T04:05:30.227
> 
> 标签：c#, wpf

我在网上搜索带圆角的 TextBox 并找到如下的 xaml 代码：

```
 <Style TargetType="{x:Type my1:CustomTextBox}">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate >
                        <Border Background="{TemplateBinding Background}" x:Name="Bd" 
BorderThickness="2" CornerRadius="5" BorderBrush="#FFF9EAB6">
                            ***<ScrollViewer x:Name="PART_ContentHost" />***
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="BorderBrush" Value="#FFC7B0B0"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="Bd" Property="BorderBrush" Value="#FFC7B0B0"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="False">
                                <Setter Property="Foreground" Value="#FFC7B0B0"/>
                            </Trigger>
                            <Trigger Property="Width" Value="Auto">
                                <Setter Property="MinWidth" Value="120"/>
                            </Trigger>
                            <Trigger Property="Height" Value="Auto">
                                <Setter Property="MinHeight" Value="27"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>

                </Setter.Value>
            </Setter>
        </Style> 
```

我想知道什么是

```
<ScrollViewer x:Name="PART_ContentHost" /> 
```

详细说明，如果从中删除此行，为什么不能正确使用我的模板，请详细告诉我。

多谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T04:14:29.533

名为“PART_ContentHost”的部分包含控制核心，这是文本框本身，除了装饰。后面的文本框代码会寻找它，所以如果你重命名删除，控件将无法工作。在这种情况下，内容是可滚动的（因为文本框可以水平和垂直滚动文本）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-23T07:39:28.440

使用 xaml deign 的这一部分：

```
 <TextBox x:Name="usernameText" Height="30" Width="300"  TextWrapping="Wrap" Text="" FontSize="20" HorizontalContentAlignment="Center" LostFocus="usernameText_LostFocus">
                        <TextBox.Resources>
                            <Style TargetType="{x:Type Border}">
                                <Setter Property="CornerRadius" Value="10"/>
                            </Style>
                        </TextBox.Resources>
                    </TextBox> 
```

[![形状会是这样的](../Images/96e51971883692692764dde344eb63e1.png)](https://i.stack.imgur.com/zMpkL.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T15:15:49.510

如果您需要一个带圆角的简单文本框，您可以这样做：

```
<Border Padding="5" CornerRadius="5" BorderThickness="1" BorderBrush="LightGray" SnapsToDevicePixels="True" Background="White">
    <TextBox Background="Transparent" BorderThickness="0">This is beautifull ;)</TextBox>
</Border> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T04:19:52.497

包含控件的`ScrollViewer`实际内容。您的控件不是真正的文本框，而是围绕 ScrollViewer 的边框（带有圆角），您需要在其中放置文本。如果不需要滚动，可以将 ScrollViewer 替换为文本框，即：

改变

```
<ScrollViewer x:Name="PART_ContentHost" /> 
```

到

```
<TextBox x:Name="PART_ContentHost" /> 
```

# mongodb - 获取 MongoMapper 模型中的所有键，包括其关联

> ID：10509674
> 
> 赞同：1
> 
> 时间：2012-05-09T04:05:41.200
> 
> 标签：mongodb, associations, mongomapper

假设以下模型：

```
class Product 
 include MongoMapper::Document

 key :name, String
 key :product_category_id, ObjectId

 belongs_to :product_category
end

class ProductCategory
 include MongoMapper::Document

 key :name, String, :required => true, :unique => true

 timestamps!
 userstamps!
end 
```

我想实现一个高级搜索，它将检查我的模型中的所有值，包括它的所有关联，例如：我有：

*   产品 A 数据名为“aLaptop”belongs_to:ProductCategory 名为“Notebook”。
*   名为“aGreatNotebook”的产品 B 数据属于_to：名为“Notebook”的产品类别。

当我使用名为“Notebook”的关键字进行搜索时，我想将其搜索到 Product.name 字段及其关联，这也意味着 ProductCategory.name。所以它会返回这两个项目，因为产品 A 有 ProductCategory.name "Notebook" & Product B 有 Product.name "aGreatNotebook" 和 ProductCategory "Notebook"..

我怎样才能做到这一点？？我已经搜索了 2 天，直到现在才成功:(.. 什么时候在 MySQL 中，我使用了连接表.. 但是 MongoMapper 怎么样？

请帮忙。。谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:23:57.127

您不能在 MongoDB 中进行连接。所以基本思路是获取与“Notebook”类别关联的ObjectId，然后查询product_category等于notebook_id的产品。这通常涉及两个查询。所以会是这样的：

```
notebook_id = ProductCategory.first(:name => "Notebook")
if notebook_id
  Product.where({:product_category_id => notebook_id['_id']})
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-18T01:28:15.303

这个问题令人困惑，但问题的标题很清楚。

因此，万一有人来这里希望看到如何获得所有：

*   钥匙
*   协会

继续阅读...

获取模型中的键：

```
ConfinedSpace.keys.keys
 => ["_id", "photo_ids", "include_in_qap", "position", "created_at", "updated_at",
     "structure_id", "identifier", "name", "description", "notes", "entry_info", 
     "anchor_points", "nature", "special_equipment", "rescue_overview"] 
```

并获得关联：

```
ConfinedSpace.associations.each{|name,assoc| puts name}
photos
attachments
activities
structure
videos 
```

和类（为简洁而编辑）：

```
class ConfinedSpace
  include MongoMapper::EmbeddedDocument
  include Shared::HasPhotos
  include Shared::HasAttachments
  include HasActivities

  TAG = "ConfinedSpace"

  belongs_to :structure
  many :videos, :as => :attachable

  key :identifier, String
  key :name, String
  key :description, String
  key :notes, String
  key :entry_info, String
  key :anchor_points, String
  key :nature, String
  key :special_equipment, String
  key :rescue_overview, String

  validates :identifier, presence: true

end 
```

# html - 使用创建表格布局 宽度和高度为百分比

> ID：10509675
> 
> 赞同：1
> 
> 时间：2012-05-09T04:05:48.117
> 
> 标签：html

如何仅通过将宽度和高度参数作为百分比而不是像素传递来在 HTML 中创建表格布局，以便它在所有浏览器中都一样工作？另外请建议一些好的材料或链接，我可以在其中找到所需的格式用于完成此任务的属性及其值。感谢早期回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T04:39:48.413

检查这个[http://jsfiddle.net/nalaka526/hUFh4/6/](http://jsfiddle.net/nalaka526/hUFh4/6/)

**CSS**

```
.divTable
{
    width: 50%;
    height: 50%;
    display: table;
}

.divTableRow
{
    width: 100%;
    height: 100%;
    display: table-row;
}

.divTableCell
{
    width: 25%;
    height: 100%;
    display: table-cell;
} 
```

**HTML**

```
<div class="divTable">
        <div class="divTableRow">
            <div class="divTableCell">
                H1
            </div>
            <div class="divTableCell ">
                H2
            </div>
            <div class="divTableCell ">
                H3
            </div>
            <div class="divTableCell ">
                H4
            </div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell">
                a
            </div>
            <div class="divTableCell ">
                b
            </div>
            <div class="divTableCell ">
                c
            </div>
            <div class="divTableCell ">
                d
            </div>
        </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:20:35.467

我不完全确定你在问什么。你只想要一个流畅的`<table>`布局吗？下面是一个非常基本的流体布局示例。请记住，桌子只会和它所在的容器一样宽。

```
<table width="100%" height="100%">
    <tr width="25%" height="100%">
        <td></td>
    </tr>
    <tr width="75%" height="100%">
        <td></td>
    </tr>
</table> 
```

# iphone - 即使应用程序没有运行，如何调用方法？iOS

> ID：10509684
> 
> 赞同：0
> 
> 时间：2012-05-09T04:07:32.783
> 
> 标签：iphone, objective-c, ios, xcode

我正在构建一个需要核心日期每周日更新的应用程序。例如，它会在新的一周开始时将“thisWeek”的数据保存到“lastWeek”，并重置“thisWeek”以让用户输入新的一周的新数据。

我的问题是，即使用户根本没有运行应用程序，如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:10:49.177

`UILocalNotification`与使用日历间隔重新安排通知的属性`repeatInterval`一起使用。我建议遵循 Apple iOS 指南。最重要的是，当通知发生时，您的应用程序将打开。

[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/instp/UILocalNotification/fireDate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:12:19.357

只需在用户启动应用程序时根据需要进行归档。如果您的数据带有时间戳，这应该很简单，甚至不需要打开手机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:12:24.107

这是不可能的。除非用户启动它，否则您的应用程序无法执行代码。您可以提供本地通知来提示用户重新打开应用程序，但这是一个次优的解决方案。

更好的解决方案是为您的数据添加时间戳，然后无论何时用户打开应用程序，您都可以处理所有数据并将其移动到需要的位置。

# visual-c++ - sizeof(bool) g++ vs vc++

> ID：10509685
> 
> 赞同：-3
> 
> 时间：2012-05-09T04:07:46.620
> 
> 标签：visual-c++, g++, boolean, sizeof, bits

> **可能重复：**
> [是否在 C++ 中定义了 sizeof(bool) 实现？](https://stackoverflow.com/questions/4897844/is-sizeofbool-implementation-defined-in-c)

我正在编写使用 g++ lib (libpng) 在 vc++ 中编译的代码，并且需要知道 bool 在 g++ 和 vc++ 中的大小和位数是否相同。我所知道的是 false 都是 0 并且 sizeof(bool) 在 vc++ 中是 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:18:56.080

在某些平台上，有一些版本`g++`（以及 Visual C++ 的版本）`sizeof(bool)`不等于 1。所以不，你不能假设它在 g++ 和 Visual C++ 上是相同的。您甚至不能假设它在同一编译器的不同版本或不同平台上的相同版本上是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:48:56.610

正如您在[另一个问题](https://stackoverflow.com/questions/5067492/why-the-sizeofbool-is-not-defined-to-be-one-by-the-standard-itself)C++03 Standard $5.3.3/1 中所说的那样，

> sizeof(char)、sizeof(signed char) 和 sizeof(unsigned char) 为 1；sizeof 应用于任何其他基本类型（3.9.1）的结果是实现定义的。[注意：特别是 sizeof(bool) 和 sizeof(wchar_t) 是实现定义的.69)

所以结果`sizeof(bool)`是实现定义的。

# autofac - Autofac 使用带有 WcfIntegration 的 DynamicProxy2 拦截

> ID：10509686
> 
> 赞同：3
> 
> 时间：2012-05-09T04:07:52.393
> 
> 标签：autofac, interception, iinterceptor

我正在努力使用带有 IInterceptor 的 WcfIntegration 连接服务接口。

autofac 文档中每个都有示例，但没有将两者结合起来。

这是[WcfIntegration](http://code.google.com/p/autofac/wiki/WcfIntegration)的文档并在此处查找[DynamicProxy2](http://code.google.com/p/autofac/wiki/DynamicProxy2) 文档。

有没有人使用 Autofac 成功地将拦截器与 WcfIntegration 连接起来？

我希望工作的示例代码：

```
 builder.Register(c => new CacheInterceptor())
            .Named<IInterceptor>("cache-calls");

        builder
            .RegisterType<ChannelFactory<IEnquiryService>>()
            .AsSelf()
            .WithParameter(new NamedParameter("endpointConfigurationName", "EnquiryService"))
            .SingleInstance();

        builder
            .Register(c => c.Resolve<ChannelFactory<IEnquiryService>>().CreateChannel())
            .As<IEnquiryService>()
            .EnableInterfaceInterceptors()
            .InterceptedBy("cache-calls"); 
```

编辑：

似乎在[autofac 网站上记录了一个错误。](http://code.google.com/p/autofac/issues/detail?id=361&q=dynamicproxy2)有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:23:05.367

由于这已作为 autofac bugtracker 上的错误提出，如果没有人可以看到解决方法，我会将其标记为答案。他们上传了一个控制台应用程序，重现了确切的场景。

[http://code.google.com/p/autofac/issues/detail?id=361&q=dynamicproxy2](http://code.google.com/p/autofac/issues/detail?id=361&q=dynamicproxy2)

**编辑：这已在最新版本中修复**

# pdf - 如何在 JasperReports 中压缩 PDF

> ID：10509688
> 
> 赞同：4
> 
> 时间：2012-05-09T04:08:07.057
> 
> 标签：pdf, properties, compression, jasper-reports

我如何申请`IS_COMPRESSED = true`属性应用到 Jasper PDF 报告？

这就是我所拥有的，但是当我创建 PDF 报告时，它的大小与未启用压缩的克隆相同：

```
File pdfFile = new File (pdfDirectory.getAbsolutePath() + File.separator +  reportName + ".pdf");
File jrPrintFile = new File(jrprintFileLocation.getAbsolutePath() + File.separator + templateName + ".jrprint");

JasperPrint jasperPrint = (JasperPrint)JRLoader.loadObject(jrPrintFile);

JRPdfExporter jrPdfExporter = new JRPdfExporter();

jrPdfExporter.setParameter(JRPdfExporterParameter.IS_COMPRESSED, true);
jrPdfExporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
jrPdfExporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, pdfFile.getAbsolutePath());

jrPdfExporter.exportReport(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-09T19:54:06.130

这可能是一个老问题，但我花了一些时间研究如何压缩 PDF 文件，我想分享答案......

不推荐使用**setParameter**方法替代方法，为了做到这一点，文档表明您应该使用[PdfExporterConfiguration](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/export/PdfExporterConfiguration.html)的实现。提供了一个名为[SimplePdfExporterConfiguration](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/export/SimplePdfExporterConfiguration.html)的简单配置，应该像这样使用：

```
SimplePdfExporterConfiguration configuration = new SimplePdfExporterConfiguration();
configuration.setCompressed(true); 
```

使用 XML 作为源的 PDF 生成的完整示例：

```
Document document = JRXmlUtils.parse(JRLoader.getLocationInputStream(PATH_XML));

//report parameters
Map params = new HashMap();
//document as a parameter
params.put(JRXPathQueryExecuterFactory.PARAMETER_XML_DATA_DOCUMENT, document);
//other parameters needed for the report generation
params.put("parameterName", parameterValue);

JasperPrint jasperPrint = JasperFillManager.fillReport(PATH_JASPER, params);

JRPdfExporter exporter = new JRPdfExporter();
exporter.setExporterInput(new SimpleExporterInput(jasperPrint));
exporter.setExporterOutput(new SimpleOutputStreamExporterOutput(PATH_PDF));

//configuration
SimplePdfExporterConfiguration configuration = new SimplePdfExporterConfiguration();
configuration.setCompressed(true);

//set the configuration
exporter.setConfiguration(configuration);
//finally exporting the PDF
exporter.exportReport(); 
```

我设法将文件从 4 mb 压缩到 1.9 mb，如果有人知道更好的选择或更好的方法，请评论这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T15:22:49.353

我发现我的报告输出的 PDF 文件的大小没有改变，直到压缩属性 (net.sf.jasperreports.export.pdf.compressed) 嵌入到每个子报告中并设置为“true”。

之后，报告生成的 PDF 大小从 4MB 缩小到刚刚超过 1MB。不错。

# gcc - gcc 配置，设置默认值？

> ID：10509692
> 
> 赞同：1
> 
> 时间：2012-05-09T04:08:44.887
> 
> 标签：gcc, makefile, environment-variables, configure

当我运行 gcc 配置时，例如

```
./configure 
```

我这样做

```
./configure \
    --host=x86_64-w64-mingw32 \
    --prefix=/usr/x86_64-w64-mingw/sys-root/mingw 
```

有没有办法让这些设置成为默认设置，对于所有的调用`configure`？也许是环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:14:15.297

对于`configure`使用 Autoconf 生成的脚本，确实有一个使用[环境变量`CONFIG_SITE`](http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/Site-Defaults.html)的工具。

使用`export CONFIG_SITE=/path/to/my.config.site`，其中该文件的内容是沿线的脚本

```
test -z "$host_alias" && host_alias=x86_64-w64-mingw32
test "$prefix" = NONE && prefix=/usr/x86_64-w64-mingw/sys-root/mingw 
```

# php - jQuery：如何检查图像是否已在 ajax 中完成加载

> ID：10509694
> 
> 赞同：1
> 
> 时间：2012-05-09T04:09:01.410
> 
> 标签：php, jquery, ajax

我需要一些关于如何解决这个问题的建议。

在我的页面中单击链接时，我有一个要执行的 Ajax 代码。ajax代码是调用PHP代码查询某个目录下的图片（缩略图大小）文件名。执行后，ajax 数据将在该目录中包含我的缩略图的文件名，并在我的页面中动态显示缩略图。

我想知道如何在不使用 SetTimeOut() 的情况下检查所有缩略图是否已经完成加载？并在加载所有缩略图后执行一些 jquery 代码。我需要加载我的缩略图，以便我可以设置我的缩略图 div 的大小以进行滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:15:00.387

您可以对图像使用**加载**方法，例如：

```
$('someElement img').load(function(){
  //all loaded
}); 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:22:33.180

方法：

```
function imagesLoaded(imgAr, callback){
    var 
        // This is a copy of the array of images
        imageAr = imgAr.slice(0),
        // This holds the javascript Image Objects
        images = [],
        // This is the number of Images that has loaded
        loadedCount = 0;

    var imageLoaded = function(){
        // An image has finished loading, so increment the number of images loaded by 1
        loadedCount++;
        if(loadedCount>=imageAr.length){
            // If all images have finished loading, run the 'callback' function, to report back that images have all loaded
            callback.call();
        }
    }

    // Loop around each image url
    for(var i=0;i<imageAr.length;i++){
        // For each image, create a new object
        images[i] = new Image();
        // when the image finishes loading, call the imageLoaded function
        images[i].onload = imageLoaded;
        // Assign the image the appropriate src attribute
        images[i].src = imageAr[i];
    }
} 
```

采用：

```
var imageAr = ['a.jpg', 'b.jpg', 'c.jpg'];

imagesLoaded(imageAr, function(){
    alert('Images loaded!');
}); 
```

# java - 必须先发出 STARTTLS 命令

> ID：10509699
> 
> 赞同：54
> 
> 时间：2012-05-09T04:09:35.710
> 
> 标签：java

我正在使用我的`Gmail`帐户运行这个简单的示例，但它不起作用并出现以下错误：

```
 send failed, exception: com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 Must issue a STARTTLS command first. nv2sm4478384pbb.6 
```

这是我的代码

```
 public class Email
{
   public static void main(String [] args)
   {

       Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.googlemail.com");
        props.put("mail.from", "myemail@gmail.com");
          Session session = Session.getInstance(props, null);

        try {
            MimeMessage msg = new MimeMessage(session);
            msg.setFrom();
            msg.setRecipients(Message.RecipientType.TO,
                              "myemail@hotmail.com");
            msg.setSubject("JavaMail hello world example");
            msg.setSentDate(new Date());
            msg.setText("Hello, world!\n");
            Transport.send(msg);
        } catch (MessagingException mex) {
            System.out.println("send failed, exception: " + mex);
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-09T04:31:51.303

您可能正试图在端口 25 上使用 Gmail 服务器通过未经身份验证的连接将邮件传递给第三方。Gmail 不允许您这样做，因为这样*任何人*都可以使用 Gmail 的服务器向其他人发送邮件。这被称为*开放中继*，是早期垃圾邮件的常见促成因素。Internet 上不再接受开放式中继。

您需要让您的 SMTP 客户端使用经过身份验证的连接（可能在[端口 587](https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#Ports)上）连接到 Gmail 。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-11-22T07:55:16.223

smtp 端口和 socketFactory 必须更改

```
 String to = "reciveremail@xxxx.xxx";
    String subject = "subject"
    String msg ="email text...."
    final String from ="senderemail@gmail.com"
    final  String password ="senderPassword"

    Properties props = new Properties();  
    props.setProperty("mail.transport.protocol", "smtp");     
    props.setProperty("mail.host", "smtp.gmail.com");  
    props.put("mail.smtp.auth", "true");  
    props.put("mail.smtp.port", "465");  
    props.put("mail.debug", "true");  
    props.put("mail.smtp.socketFactory.port", "465");  
    props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");  
    props.put("mail.smtp.socketFactory.fallback", "false");  
    Session session = Session.getDefaultInstance(props,  
    new javax.mail.Authenticator() {
       protected PasswordAuthentication getPasswordAuthentication() {  
       return new PasswordAuthentication(from,password);  
   }  
   });  

   //session.setDebug(true);  
   Transport transport = session.getTransport();  
   InternetAddress addressFrom = new InternetAddress(from);  

   MimeMessage message = new MimeMessage(session);  
   message.setSender(addressFrom);  
   message.setSubject(subject);  
   message.setContent(msg, "text/plain");  
   message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));  

   transport.connect();  
   Transport.send(message);  
   transport.close();
   } 
```

希望它对你有用..

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-08-05T05:00:17.617

# 添加

```
props.put("mail.smtp.starttls.enable", "true"); 
```

解决了我的问题；）

***我的问题是***：

com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。u186sm7971862pfu.82 - gsmtp

```
at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2108)
at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1609)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1117)
at javax.mail.Transport.send0(Transport.java:195)
at javax.mail.Transport.send(Transport.java:124)
at com.example.sendmail.SendEmailExample2.main(SendEmailExample2.java:53) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-16T18:40:22.907

在构建电子邮件通知应用程序时，我也遇到了同样的问题。你只需要添加一行。下面一个拯救了我的一天。

```
props.put("mail.smtp.starttls.enable", "true"); 
```

com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。h13-v6sm10627790pgp.13 - gsmtp

```
at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2108)
at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1609)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1117)
at javax.mail.Transport.send0(Transport.java:195)
at javax.mail.Transport.send(Transport.java:124)
at com.smruti.email.EmailProject.EmailSend.main(EmailSend.java:99) 
```

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-05T08:27:18.193

谷歌现在有一项功能，表明它不会允许不安全的设备发送电子邮件。当我运行我的程序时，它在第一篇文章中出现了错误。我必须进入我的帐户并允许不安全的应用程序发送电子邮件，我通过单击我的帐户，进入安全选项卡并允许不安全的应用程序使用我的 gmail 来做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T08:02:51.003

```
 String username = "mail@google.com";
    String password = "some-password";
    String recipient = "myemail@hotmail.com");

    Properties props = new Properties();

    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.from", "myemail@gmail.com");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.port", "587");
    props.setProperty("mail.debug", "true");

    Session session = Session.getInstance(props, null);
    MimeMessage msg = new MimeMessage(session);

    msg.setRecipients(Message.RecipientType.TO, recipient);
    msg.setSubject("JavaMail hello world example");
    msg.setSentDate(new Date());
    msg.setText("Hello, world!\n");

    Transport transport = session.getTransport("smtp");

    transport.connect(username, password);
    transport.sendMessage(msg, msg.getAllRecipients());
    transport.close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-25T03:40:26.737

试试这个代码：

```
Properties props = new Properties();
                        props.put("mail.smtp.host", "smtp.gmail.com");
                        props.put("mail.smtp.socketFactory.port", "465");
                        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
                        props.put("mail.smtp.auth", "true");
                        props.put("mail.smtp.prot", "465");

                        Session session = Session.getDefaultInstance(props,
                                new javax.mail.Authenticator() {
                            protected PasswordAuthentication getPasswordAuthentication() {

                                return new PasswordAuthentication("PUT THE MAIL SENDER HERE !", "PUT THE PASSWORD OF THE MAIL SENDER HERE !");
                            }
                        }
                        );
                        try {
                            Message message = new MimeMessage(session);
                            message.setFrom(new InternetAddress("PUT THE MAIL SENDER HERE !"));
                            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("PUT THE MAIL RECEIVER HERE !"));
                            message.setSubject("MAIL SUBJECT !");
                            message.setText("MAIL BODY !");
                            Transport.send(message);

                        } catch (Exception e) {
                            JOptionPane.showMessageDialog(null, e);
                        } 
```

您必须降低邮件发件人的安全性。如果问题仍然存在，我认为这可能是由防病毒软件引起的，请尝试禁用它..

# asp.net - 如何停止验证组中的一系列验证器以在错误时停止触发？网

> ID：10509702
> 
> 赞同：1
> 
> 时间：2012-05-09T04:10:03.963
> 
> 标签：asp.net, textbox, validation, validationgroup

一个文本框上有 3 个验证器，

asp:RegularExpressionValidator asp:RangeValidator asp:CompareValidator

一些输入会触发所有 3 个，我怎样才能在任何错误时停止触发其余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:31:52.957

可能这可以帮助您..您可以拦截 ASP.Net 验证框架的 ValidatorValidate 方法，并根据任何给定的验证控件结果选择性地禁用您想要的验证器控件。

```
<asp:TextBox ID="tbText" runat="server"></asp:TextBox>

<asp:RegularExpressionValidator EnableClientScript="true" ValidationExpression="\d" ID="rang" runat="server" ControlToValidate="tbText" >sdfsdfsdfsdfsdfsd</asp:RegularExpressionValidator>
<asp:RangeValidator EnableClientScript="true" Type="Date" MinimumValue="10/10/2000" MaximumValue="10/10/2013" runat="server" ID="rang2" ControlToValidate="tbText" >23444444444444</asp:RangeValidator>
<asp:Button ID="btn" runat="server" Text="submit"/>

<script language="javascript">
    var oldValidatorValidate = ValidatorValidate;
    function MyValidatorValidate(val, validationGroup, event) {

        //first call the original one
        oldValidatorValidate(val, validationGroup, event);

        //Here you can check val.isvalid - e.g write your logic here, like check for the correct validator etc etc
        //alert(val.id + ":" + val.isvalid);
        if (!val.isvalid) {
            var myVal = document.getElementById('<%=rang2.ClientID %>');
            //ValidatorEnable(myVal, false);
        }

    }
    ValidatorValidate = MyValidatorValidate;
</script> 
```

# html - 使用客户端脚本在 Ajax HTML 编辑器中的光标位置插入文本

> ID：10509707
> 
> 赞同：2
> 
> 时间：2012-05-09T04:10:33.210
> 
> 标签：html, ajax, editor, cursor, position

我有一个 Ajax HTML 编辑器和它上面的下拉菜单。在从下拉列表中选择一个项目时，我希望将下拉列表中所选项目的文本粘贴到 AJAX HTML 编辑器中的当前光标位置。有任何想法吗..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:10:55.343

是的，在第三天结束时，我终于找到了解决问题的方法，将其发布在这里，以便有人可以节省宝贵的时间来重新发明轮子。

这是我的 Ajax ATML 编辑器：

```
<Ajax:Editor ID="EdtrHTML" runat="server" /> 
```

我希望从下拉列表中选择的文本粘贴到 HTML 编辑器中的当前光标位置，所以我调用函数在下拉列表的“更改”事件上插入文本（InsertAtCursor）。

作为函数 InsertAtCursor 的参数，我传递了在呈现 HTML 编辑器时创建的 IFrame 的 ID。

```
 $(document).ready(function () {
            $('#<%:DropDownID.ClientID%>').change(function () {
            var ddltext = $('#<%:DropDownID.ClientID%> option:selected').text();
            var ddltext = ' [' + ddltext + '] '
            InsertAtCursor(idofHTMLEditorIFrame, ddltext);//Function for Insertion
        });
    }); 
```

这是在 Ajax HTML 编辑器的光标位置从下拉列表中插入文本的功能。

```
 function InsertAtCursor(myField, myValue) {

        if (document.selection) {
            myField.focus();
            sel = document.selection.createRange();
            sel.text = myValue;
        }

        else if (myField.selectionStart == 0 || myField.selectionStart == '0') {
            var startPos = myField.selectionStart;
            var endPos = myField.selectionEnd;
            myField.value = myField.value.substring(0, startPos) + myValue +
                        myField.value.substring(endPos, myField.value.length);
        }
        else {
             myField.value += myValue;
        }
    } 
```

在我的情况下，我的 Ajax 编辑器位于更新面板内，因此在部分回发后脚本停止工作，我在[这里](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)找到了帮助。

希望这对你也有用......干杯..!!

# backbone.js - Jasmine + Sinon 规范中未填充主干集合提取

> ID：10509708
> 
> 赞同：1
> 
> 时间：2012-05-09T04:10:44.747
> 
> 标签：backbone.js, fetch, jasmine, sinon

当我运行此规范输出时，我得到“预期 0 等于 2”。2 是我的夹具中模型对象的正确长度，因此 Sinon 的 fakeServer 正确响应了模拟响应。我无法弄清楚为什么我的 Collection 在 fetch 之后有零个对象。任何帮助将非常感激！

仅供参考：这是来自此处的 Backbone Sinon + Jasmine 教程：http: [//tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html)

规格：

```
describe "Todos collection", ->

  describe "when fetching models from the server", ->
    beforeEach ->
      @todo = sinon.stub(window, "Todo")
      @todos = new Todos()
      @fixture = @fixtures.Todos.valid
      @server = sinon.fakeServer.create()
      @server.respondWith "GET", "/todos", @validResponse(@fixture)

    afterEach ->
      @todo.restore()
      @server.restore()

    it "should parse todos from the response", ->
      @todos.fetch()
      @server.respond()
      expect(@todos.length).toEqual @fixture.response.todos.length 
```

模型：

```
class window.Todos extends Backbone.Collection
  model: window.Todo
  url: "/todos"
  comparator: (todo) ->
    todo.get('priority')
  parse: (res) ->
    res.response.todos 
```

# 编辑：

下面的 Buck Doyle 帮助我看到没有规格问题。我的 Jasmine Headless Webkit 配置存在某种问题，如果规范与 Jasmine 独立运行，它们就通过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:53:56.983

理论：在检查结果之前，您需要等待“服务器”响应请求。模拟响应是不够的：`fetch`仍然是异步的。

尝试[https://github.com/pivotal/jasmine/wiki/Asynchronous-specs](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)中描述`waits`的更复杂但更优雅的方法`waitsFor`

# php - php不能显示汉字

> ID：10509715
> 
> 赞同：1
> 
> 时间：2012-05-09T04:11:14.207
> 
> 标签：php, html, character-encoding

大家好，我在简单的 php 文件中显示汉字时遇到问题，我不知道如何解决

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
 <?php
 define('MAGPIE_OUTPUT_ENCODING', 'UTF-8');
 ?>
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-type" value="text/html; charset=UTF-8" />
    </head>
    <body>

电视机/電視機
    </body>
</html> 
```

我认为这可能是 apache 或 php.ini 配置的问题。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:01:51.057

使用`<meta charset="utf-8">`前`<title>`

一些旧式浏览器首先检查 http 标头，因此您可以设置

```
<?php
header("Content-Type: text/html; charset=utf-8"); 
```

或更改您的 Web 服务器配置文件

Nginx 中的示例：

在之后添加此行`server {`

```
charset utf-8;
charset_types
    text/css
    application/javascript
    application/x-javascript
    text/xml
    text/plain; 
```

Apache 中的示例：

```
AddDefaultCharset Off 
```

或者

```
AddDefaultCharset utf-8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:18:36.310

尝试使用这个：

```
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head> 
```

你写的是*价值*而不是*内容*

干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T04:21:59.600

当您使用 html5 时，您可以使用

```
<meta charset="utf-8"> 
```

它将解决您的问题。

如果您不使用 html5，则将 value 更改为 content 将修复它

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:13:13.273

抱歉没有得到问题，但对于那些从 db 获取数据的人，请尝试添加

`mysql_query("SET NAMES 'utf8'");`在您的数据库连接中

# iphone - 在不增加保留计数的情况下将值添加到两个不同的 NSMutableArray

> ID：10509718
> 
> 赞同：0
> 
> 时间：2012-05-09T04:11:37.943
> 
> 标签：iphone, ios, memory, memory-management

我有两个由几个对象组成的简单 NSMutableArray。其中一些对象可能是常见的，但需要存储在两个数组中，因为两个数组的用途是为完全不同的目的而定义的。

但是，问题在于，在将相同的对象添加到两个数组之后，在更改一个公共对象的值时，不会反映在第二个数组中。

例如，

假设我们有两个可变的 NSArray：

```
NSMutableArray *mutableArrayOne;
NSMutableArray *mutableArrayTwo; 
```

现在让我们创建这些数组需要包含的对象定义。

```
@interface: DummyObject : NSObject
{
     int objectValue;
}

@property (nonatomic) int objectValue;

-(void) printObjectValue;

@end 
```

现在让我们创建基类来存储数组。

**基类定义**

```
@interface: BaseClass : NSObject
{
    NSMutableArray *mutableArrayOne;
    NSMutableArray *mutableArrayTwo;
}
-(void) init;
-(void) printBothArrays;

@end 
```

**基类实现**

```
@implementation BaseClass

-(void) init
{
     // initialize the mutable array.
     mutableArrayOne = [[NSMutableArray alloc] initWithCapicity:5];
     mutableArrayTwo = [[NSMutableArray alloc] initWithCapicity:5];

     DummyObject *dummyObject = [DummyObject alloc];
     [dummyObject setObjectValue:5];

     DummyObject *dummyObjectTwo = [DummyObject alloc];
     [dummyObjectTwo setObjectValue:2];

     [mutableArrayOne addObject:dummyObject];
     [mutableArrayOne addObject:dummyObjectTwo];

     [mutableArrayTwo addObject:dummyObjectTwo];

}

@end 
```

现在让我修改数组 One 中的 DummyObject：

```
for (DummyObject* dummyObject in mutableArrayOne)
{
    [dummyObject setValue:100]; 
} 
```

**问题** 现在，当我打印两个数组对象的值时，问题就开始了：-

# 打印第一个数组

```
for (DummyObject* dummyObject in mutableArrayOne)
{
    [dummyObject printObjectValue]; 
} 
```

**输出日志（来自第一个数组）**

```
100
100 
```

# 打印第二个数组

```
for (DummyObject* dummyObject in mutableArrayTwo)
{
    [dummyObject printObjectValue]; 
} 
```

**输出日志（来自第二个数组）**

```
2 
```

所以在这里我们可以看到 MutableArray 保留了对象的副本，但是，我只想存储引用。这意味着，在更改第一个数组中对象的值时，应该反映在第二个数组中。

我们怎么能做到这一点？我们还有其他选择吗？

谢谢， **帕拉斯·门迪拉塔**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:59:23.177

理想情况下，这将起作用，似乎与设置对象有些问题。例如，您可以像这样检查 -

```
NSMutableString *firstString = [[NSMutableString alloc] initWithString:@"first"];
NSMutableString *secondString = [[NSMutableString alloc] initWithString:@"second"];

NSMutableArray *originalArray = [[NSMutableArray alloc] initWithObjects: firstString, secondString, nil];
NSMutableArray *copyArray = [[NSMutableArray alloc] initWithObjects: firstString, secondString, nil];

[[copyArray objectAtIndex:0] appendString:@"add some text"];

for (int index = 0; index < [originalArray count]; index++) {
    NSLog(@"Original:%@ --- copy:%@", [originalArray objectAtIndex:index], [copyArray objectAtIndex:index]);
} 
```

输出是 -

```
2012-05-09 10:28:40.382 Demo[5237:f803] Original:firstadd some text --- copy:firstadd some text
2012-05-09 10:28:40.384 Demo[5237:f803] Original:second --- copy:second 
```

编辑 - （在初始化时不添加对象）

```
NSMutableString *firstString = [[NSMutableString alloc] initWithString:@"first"];
NSMutableString *secondString = [[NSMutableString alloc] initWithString:@"second"];

NSMutableArray *originalArray = [[NSMutableArray alloc] init];
NSMutableArray *copyArray = [[NSMutableArray alloc] init];

[originalArray addObject:firstString];
[copyArray addObject:firstString];

[originalArray addObject:secondString];
[copyArray addObject:secondString];

[[copyArray objectAtIndex:0] appendString:@"add some text"];

for (int index = 0; index < [originalArray count]; index++) {
    NSLog(@"Original:%@ --- copy:%@", [originalArray objectAtIndex:index], [copyArray objectAtIndex:index]);
} 
```

输出 -

```
2012-05-09 11:11:18.275 Demo[5433:f803] Original:firstadd some text --- copy:firstadd some text
2012-05-09 11:11:18.277 Demo[5433:f803] Original:second --- copy:second 
```

# c++ - 使用 boost::enable_shared_from_this 时出现不完整的类型错误

> ID：10509726
> 
> 赞同：9
> 
> 时间：2012-05-09T04:12:07.397
> 
> 标签：c++, shared-ptr

在以下行

`class Symbol : public boost::enable_shared_from_this<Symbol> {`

我得到错误：

错误：无效使用不完整类型`struct boost::enable_shared_from_this<Symbol>` /usr/include/boost/smart_ptr/shared_ptr.hpp:63：错误：声明`struct boost::enable_shared_from_this<Symbol>`

知道为什么我会收到此错误。Symbol 是一个抽象类（如果重要的话）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T04:52:03.087

哎呀。错误是因为我没有包含*定义*enable_shared_from_this 的标头（即 boost/enable_shared_from_this.hpp）。

它仅在 /usr/include/boost/smart_ptr/shared_ptr.hpp中*声明*

# mahout - 运行推荐器时排除某些评级

> ID：10509727
> 
> 赞同：0
> 
> 时间：2012-05-09T04:12:18.927
> 
> 标签：mahout, recommendation-engine

这与[Mahout 中 GenericUserBasedRecommender 的候选策略有关](https://stackoverflow.com/questions/8773861/candidate-strategy-for-genericuserbasedrecommender-in-mahout)

我有一个数据库，其中包含基于数值评级的项目：1、2、3、4

但是，在运行推荐器时，在某些情况下，我想排除评分为 4 的项目。

我考虑过 IDRescorer，但认为它仅在推荐者已经推荐后过滤项目。我希望在推荐之前过滤项目，即在计算推荐时不应包含它们。

另一方面，CandidateItemsStrategy 将是理想的，但仅适用于 GenericItemBasedRecommender。我正在使用 GenericUserBasedRecommender。

在 mahout 中处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:46:29.757

在邮件列表上回答了这个问题：在计算初始分数之前进行过滤`IDRescorer` *。*但是，如果您的逻辑是“排除得分为 4 的项目”，那当然必须在得分之后发生，您不能使用`isFiltered()`. 但是您可以在此之后返回`NaN`过滤`rescore()`器。当然，你不能避免为这个逻辑得分！但`isFiltered()`如果逻辑不依赖于分数，则可以避免得分。

`CandidateItemsStrategy`不相关。

# web-services - 未捕获的类型错误：无法调用 sencha touch2 外部 Web 服务中未定义的方法“请求”

> ID：10509731
> 
> 赞同：2
> 
> 时间：2012-05-09T04:12:52.853
> 
> 标签：web-services, sencha-touch

嗨，我是 sencha touch2 的新手。我必须使用外部网络服务。我在控制台中编写了如下代码，它给出了这样的错误**Uncaught TypeError: Cannot call method 'request' of undefined**。什么问题，请提供解决方案。谢谢

```
Ext.util.JSONP.request({
    url: 'http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld',
    params: {
        method: 'Helloworld',
        format: 'json',
        callback: 'callback'
    },

    success: function(response) {
        alert('Working!')
        console.log(response);
    },
    failure: function(response) {
        alert('Not working!')
        console.log(response);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T22:44:24.787

添加这个：

```
requires: ['Ext.data.JsonP'], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:46:13.170

尝试使用[Ext.data.jsonP.request](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.JsonP)

```
Ext.data.JsonP.request({
    url: 'http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld',
    params: {
        method: 'Helloworld',
        format: 'json',
        callback: 'callback'
    },

    success: function(response) {
        alert('Working!')
        console.log(response);
    },
    failure: function(response) {
        alert('Not working!')
        console.log(response);
    }
});​ 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/Tw7cb/)**

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T06:37:49.803

尝试 -

```
Ext.data.JsonP.request({
    url: 'http://A-Valid-Domain/SLS.BRND.Services/Service1.asmx/Helloworld',
    params: {
        method: 'Helloworld',
        format: 'json',
        callback: 'callback'
    },

    success: function(response) {
        alert('Working!')
        console.log(response);
    },
    failure: function(response) {
        alert('Not working!')
        console.log(response);
    }
});​ 
```

# c# - 使用 LINQ to XML 从平面 XML 文件转换为分层 XML 文件

> ID：10509732
> 
> 赞同：0
> 
> 时间：2012-05-09T04:12:54.323
> 
> 标签：c#, xml, linq

使用 C# 和 LINK to XML，这个“平面” XML 文件来自一个名为“xVar”的变量

```
 <vWorkflows>
      <vSection sectionTitle="Bars" sectionId="4">
        <vCategory catTitle="Between Visits" catRef="13">
          <type typeTitle="" typeRef="">
            <link linkNum="">
              <linkTitle>placeholder1</linkTitle>
              <linkSummary></linkSummary>
              <linkKeywords></linkKeywords>
              <pubDate>2012-05-01 00:00:00</pubDate>
              <lastUpdate>2012-05-18 00:00:00</lastUpdate>
            </link>
          </type>
        </vCategory>
      </vSection>
      <vSection sectionTitle="Pre-Visit" sectionId="1">
        <vCategory catTitle="Scheduling" catRef="4">
          <type typeTitle="" typeRef="">
            <link linkNum="">
              <linkTitle>placeholder2</linkTitle>
              <linkSummary></linkSummary>
              <linkKeywords></linkKeywords>
              <pubDate>2012-05-02 00:00:00</pubDate>
              <lastUpdate>2012-05-19 00:00:00</lastUpdate>
            </link>
          </type>
        </vCategory>
      </vSection>
      <vSection sectionTitle="Patient Visit" sectionId="2">
        <vCategory catTitle="Check-in" catRef="5">
          <type typeTitle="" typeRef="">
            <link linkNum="">
              <linkTitle>placeholder3</linkTitle>
              <linkSummary></linkSummary>
              <linkKeywords></linkKeywords>
              <pubDate>2012-05-03 00:00:00</pubDate>
              <lastUpdate>2012-05-20 00:00:00</lastUpdate>
            </link>
          </type>
        </vCategory>
      </vSection>
      <vSection sectionTitle="Patient Visit" sectionId="2">
        <vCategory catTitle="Check-in" catRef="5">
          <type typeTitle="" typeRef="">
            <link linkNum="">
              <linkTitle>placeholder4</linkTitle>
              <linkSummary></linkSummary>
              <linkKeywords></linkKeywords>
              <pubDate>2012-05-04 00:00:00</pubDate>
              <lastUpdate>2012-05-21 00:00:00</lastUpdate>
            </link>
          </type>
        </vCategory>
      </vSection>
      <vSection sectionTitle="Bars" sectionId="4">
        <vCategory catTitle="Registration" catRef="3">
          <type typeTitle="" typeRef="">
            <link linkNum="">
              <linkTitle>placeholder5</linkTitle>
              <linkSummary></linkSummary>
              <linkKeywords></linkKeywords>
              <pubDate>2012-05-05 00:00:00</pubDate>
              <lastUpdate>2012-05-22 00:00:00</lastUpdate>
            </link>
          </type>
        </vCategory>
      </vSection>
    </vWorkflows> 
```

...最终需要看起来像

```
<workflows>
  <section sectionTitle="Bars" sectionId="4">
    <category catTitle="Between Visits" catRef="13">
      <type typeTitle="" typeRef="">
        <link linkNum="">
          <linkTitle>placeholder1</linkTitle>
          <linkSummary></linkSummary>
          <linkKeywords></linkKeywords>
          <pubDate>2012-05-01 00:00:00</pubDate>
          <lastUpdate>2012-05-18 00:00:00</lastUpdate>
        </link>
      </type>
    </category>
    <category catTitle="Registration" catRef="3">
      <type typeTitle="" typeRef="">
        <link linkNum="">
          <linkTitle>placeholder5</linkTitle>
          <linkSummary></linkSummary>
          <linkKeywords></linkKeywords>
          <pubDate>2012-05-05 00:00:00</pubDate>
          <lastUpdate>2012-05-22 00:00:00</lastUpdate>
        </link>
      </type>
    </category>
  </section>
  <section sectionTitle="Patient Visit" sectionId="2">
    <category catTitle="Check-in" catRef="5">
      <type typeTitle="" typeRef="">
        <link linkNum="">
          <linkTitle>placeholder3</linkTitle>
          <linkSummary></linkSummary>
          <linkKeywords></linkKeywords>
          <pubDate>2012-05-03 00:00:00</pubDate>
          <lastUpdate>2012-05-20 00:00:00</lastUpdate>
        </link>
      </type>
    </category>
    <category catTitle="Check-in" catRef="5">
      <type typeTitle="" typeRef="">
        <link linkNum="">
          <linkTitle>placeholder4</linkTitle>
          <linkSummary></linkSummary>
          <linkKeywords></linkKeywords>
          <pubDate>2012-05-04 00:00:00</pubDate>
          <lastUpdate>2012-05-21 00:00:00</lastUpdate>
        </link>
      </type>
    </category>
  </section>
  <section sectionTitle="Pre-Visit" sectionId="1">
    <category catTitle="Scheduling" catRef="4">
      <type typeTitle="" typeRef="">
        <link linkNum="">
          <linkTitle>placeholder2</linkTitle>
          <linkSummary></linkSummary>
          <linkKeywords></linkKeywords>
          <pubDate>2012-05-02 00:00:00</pubDate>
          <lastUpdate>2012-05-19 00:00:00</lastUpdate>
        </link>
      </type>
    </category>
  </section>
</workflows> 
```

它有点适用于以下内容，但我的大脑变得模糊，试图获取第一个“分组依据”中的所有属性以及如何添加不可避免地遵循的其他分组。

```
 XDocument xDoc = new XDocument(
        new XDeclaration("1.0", "utf-8", "yes"),
        new XComment("XML Source Data for Dial Flash"),
        new XElement("workflows",
            from sec in xVar.Elements("vSection")
            //group sec by (string)sec.Attribute("sectionTitle").Value,
            group sec by (string)sec.Attribute("sectionTitle").Value into gsec
            select new XElement("section", 
                new XAttribute("sectionTitle", gsec.Key)
            ) 
        )
    ); 
```

有一个更好的方法吗？如果在此过程中可以将日期转换为 MM/dd/yyyy，则奖励...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:38:09.923

试试这个：

```
 var xVar = XElement.Load("XMLFile1.xml");

        var query = xVar.Elements("vSection").
            GroupBy(grp => (string)grp.Attribute("sectionTitle")).
            Select(grp => new XElement("section", grp.First().Attributes(),
                grp.Select(vsec => new XElement("category",
                    vsec.Element("vCategory").Attributes(),
                    vsec.Element("vCategory").Elements()))
                )
            )
        ;

        var xml = new XElement("workflows", query); 
```

# gfortran - gfortran 错误：格式字符串中的意外元素“<”

> ID：10509734
> 
> 赞同：0
> 
> 时间：2012-05-09T04:13:07.797
> 
> 标签：gfortran

我为使用 gfortran 编译旧的 fortran 源代码而痛苦。我没有太多经验来做这件事，所以请帮助我根据错误消息更正源代码。

干扰.f:1416.31:

1505 格式（I7、E12.3、<npftu>E10.3）
错误：(1) 处的格式字符串中存在意外元素“<”

请注意，npftu 和 < > 之间没有空格。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:24:43.377

变量`FORMAT`表达式是非标准的，gfortran**不**支持（[链接](http://gcc.gnu.org/onlinedocs/gfortran/Variable-FORMAT-expressions.html)到文档）。

我知道你的痛苦 - 在我完全迁移到另一个编译器集合之前，我也曾多次与这个问题作斗争......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:19:04.657

谢谢。对我来说更简单的方法就是了解 npftu 的列。在我的例子中，我在这里使用 10，所以新代码是：1505 格式（I7, E12.3, 10E10.3）

# java - 外部方法如何知道内部方法发生异常

> ID：10509738
> 
> 赞同：0
> 
> 时间：2012-05-09T04:13:40.907
> 
> 标签：java

我有 5 个方法，例如 1、2、3、4、5。我从方法 1 调用方法 2，从方法 2 调用方法 3，依此类推。假设 Method5 中发生异常，我在 try-catch 块中处理它，我如何在 Method1 中知道呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:15:38.713

您可能想研究异常传播。这个另一个[问题](https://stackoverflow.com/questions/3551221/guidelines-on-exception-propagation-in-java)很好地描述了它。本质上，如果异常不在 try-catch 中，它将冒泡到被调用者，直到它位于调用堆栈的顶部或被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:18:01.260

您必须设置 method1 和 method5 都可以访问的变量/标志。像同一类中的字段之类的东西应该可以工作。

```
private String exceptionHappened = "";

private void method1() {
    method(2);
    // Here I can check value of exceptionHappened
}

//... methods 2-4

private void method5() {
    try {
      // ...
    } catch (Exception e) {
      this.exceptionHappened = "In method 5";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:18:17.937

如果没有捕获到异常，则会在调用层次结构中传播，直到到达 main 方法。如果一个方法想知道调用层次结构中是否有任何异常，那么它应该`try-catch`阻止以控制异常流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T05:22:28.433

创建一个用户定义的异常并在该类中有一个属性来存储方法名称。现在在你的情况下，在 method5 中，在 catch 块中抛出用户定义的异常，你通过将方法名称设置为“methodname”属性来创建该异常。将异常抛出到 fir method1（或任何根方法），然后根据 methodname 属性中的值，您可以确认抛出异常的方法。

# delphi - ClientDataset、Aggregates & GroupingLevels

> ID：10509739
> 
> 赞同：2
> 
> 时间：2012-05-09T04:13:46.583
> 
> 标签：delphi

我有一个看起来像这样的表：

```
TYPE     GROUP     VALUE
-----    -----     -----
0        0         10
0        0         60
0        1         20
1        0         30
1        1         40
1        1         10 
```

我想要按 TYPE 和 TYPE;GROUP 的总计。在 TYPE & TYPE;GROUP 上创建索引。

```
object ClientDataSet1: TClientDataSet
  IndexDefs = <
    item
      Name = 'ClientDataSet1Index1'
      Fields = 'TYPE'
      GroupingLevel = 1
    end
    item
      Name = 'ClientDataSet1Index2'
      Fields = 'TYPE;GROUP'
      GroupingLevel = 2
    end>
  IndexName = 'ClientDataSet1Index1' 
```

并创建了两个聚合

```
object ClientDataSet1: TClientDataSet
  Aggregates = <
    item
      Active = True
      AggregateName = 'Agg1'
      Expression = 'SUM(VALUE)'
      GroupingLevel = 1
      IndexName = 'ClientDataSet1Index1'
    end
    item
      Active = True
      AggregateName = 'Agg2'
      Expression = 'SUM(VALUE)'
      GroupingLevel = 2
      IndexName = 'ClientDataSet1Index2'
    end>
  AggregatesActive = True 
```

Agg2 不会计算，因为 ClientDataset 索引设置为 ClientDataSet1Index1。如果 ClientDataset.IndexName = ClientDataSet1Index2, Agg2 可以工作，但 Agg1 不能 :( 它似乎不允许多个分组级别，因为我一次只能指定一个客户端数据集索引。

我错过了什么吗？

解决方法是克隆我的客户端数据集并在其中创建另一个聚合。有点不便。

[使用 D2006]

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:00:25.180

它应该与第二个索引一起使用。以下程序似乎在 D2007 中工作（我没有 D2006）：

```
program cdsagg;

{$APPTYPE CONSOLE}

uses
  SysUtils, Classes, DB, DBClient;

procedure AppendRecord(DataSet: TClientDataSet; AType, AGroup, AValue: Integer);
begin
  DataSet.Append;
  try
    DataSet.FieldByName('TYPE').AsInteger := AType;
    DataSet.FieldByName('GROUP').AsInteger := AGroup;
    DataSet.FieldByName('VALUE').AsInteger := AValue;
    DataSet.Post;
  except
    DataSet.Cancel;
    raise;
  end;
end;

procedure Main;
var
  DataSet: TClientDataSet;
begin
  DataSet := TClientDataSet.Create(nil);
  try
    DataSet.FieldDefs.Add('TYPE', ftInteger);
    DataSet.FieldDefs.Add('GROUP', ftInteger);
    DataSet.FieldDefs.Add('VALUE', ftInteger);
    DataSet.IndexDefs.Add('MyIndex', 'TYPE;GROUP', []);
    DataSet.IndexName := 'MyIndex';
    with DataSet.Aggregates.Add do
    begin
      AggregateName := 'AGG1';
      Expression := 'SUM(VALUE)';
      GroupingLevel := 0;
      IndexName := 'MyIndex';
      Active := True;
    end;
    with DataSet.Aggregates.Add do
    begin
      AggregateName := 'AGG2';
      Expression := 'SUM(VALUE)';
      GroupingLevel := 1;
      IndexName := 'MyIndex';
      Active := True;
    end;
    with DataSet.Aggregates.Add do
    begin
      AggregateName := 'AGG3';
      Expression := 'SUM(VALUE)';
      GroupingLevel := 2;
      IndexName := 'MyIndex';
      Active := True;
    end;
    DataSet.AggregatesActive := True;
    DataSet.CreateDataSet;
    DataSet.LogChanges := False;
    AppendRecord(DataSet, 0, 0, 10);
    AppendRecord(DataSet, 0, 0, 60);
    AppendRecord(DataSet, 0, 1, 20);
    AppendRecord(DataSet, 1, 0, 30);
    AppendRecord(DataSet, 1, 1, 40);
    AppendRecord(DataSet, 1, 1, 10);

    DataSet.First;
    while not DataSet.EOF do
    begin
      Writeln(Format('GROUP:'#9'%d'#9'TYPE:'#9'%d'#9'VALUE:'#9'%d'#9'AGG1:'#9'%d'#9'AGG2:'#9'%d'#9'AGG3:'#9'%d',
        [
          DataSet.FieldByName('GROUP').AsInteger,
          DataSet.FieldByName('TYPE').AsInteger,
          DataSet.FieldByName('VALUE').AsInteger,
          Integer(DataSet.Aggregates[0].Value),
          Integer(DataSet.Aggregates[1].Value),
          Integer(DataSet.Aggregates[2].Value)
        ]
      ));

      DataSet.Next;
    end;
  finally
    DataSet.Free;
  end;
end;

begin
  try
    Main;
  except
    on E: Exception do
    begin
      ExitCode := 1;
      Writeln(Format('[%s] %s', [E.ClassName, E.Message]));
    end;
  end;
end. 
```

产生的输出：

```
GROUP:  0       TYPE:   0       VALUE:  10      AGG1:   170     AGG2:   90      AGG3:   70
GROUP:  0       TYPE:   0       VALUE:  60      AGG1:   170     AGG2:   90      AGG3:   70
GROUP:  1       TYPE:   0       VALUE:  20      AGG1:   170     AGG2:   90      AGG3:   20
GROUP:  0       TYPE:   1       VALUE:  30      AGG1:   170     AGG2:   80      AGG3:   30
GROUP:  1       TYPE:   1       VALUE:  40      AGG1:   170     AGG2:   80      AGG3:   50
GROUP:  1       TYPE:   1       VALUE:  10      AGG1:   170     AGG2:   80      AGG3:   50 
```

# qt4 - Qt：gdb 进程意外退出（代码 127）

> ID：10509745
> 
> 赞同：0
> 
> 时间：2012-05-09T04:14:44.630
> 
> 标签：qt4, gdb, debian, qt-creator, qt4.7

在按 F5 或开始调试后，什么样的问题会导致此消息框出现此消息：**“gdb 进程意外退出（代码 127）” ？**（我不是以超级用户身份运行 QtCreator）

![在此处输入图像描述](../Images/851455a2fa0567a5b625be2ee23bea97.png)

当我以超级用户身份运行 QtCreator 时，我收到了另一个带有此消息的消息框：**gdb 进程无法启动。缺少调用的程序“gdb”，或者您可能没有足够的权限来调用该程序。没有相应的文件和目录**

![在此处输入图像描述](../Images/5ce9c2db58da0171c7b3b2ebf0aba3ea.png)

当我在终端中运行以下消息时

```
gdb -ex 
```

我收到这个错误

> 加载共享库时出错：libncurses.so.5：无法打开共享对象文件：没有这样的文件或目录

但我已经安装了 libncurses5、libncursesw5、libncurses5-dev。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:35:11.690

当您在运行设置中选中“在终端中运行”时，通常会出现此消息。转到项目选项卡并取消选中“在终端中运行”，以便在 qt creator 的应用程序输出中运行程序。

或者，也许您正在调用带有错误参数的 gdb。通过在没有 qtcreator 的独立中调用调试器来检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:30:31.903

我安装了 debian 的 gdb 包而不是 QtSDK 的 gdb 二进制文件，我的问题得到了解决

# python - 将二进制输入流转换为文本模式

> ID：10509753
> 
> 赞同：4
> 
> 时间：2012-05-09T04:16:28.223
> 
> 标签：python, file-io, io, stream, python-3.x

我正在尝试在 Python 3.2 中读取 bzip2 压缩的 CSV 文件。对于未压缩的 CSV 文件，此方法有效：

```
datafile = open('./file.csv', mode='rt')
data = csv.reader(datafile)
for e in data:    # works
    process(e) 
```

问题是**`BZ2File`它只支持创建二进制流**，而在 Python 3 中，[`csv.reader`只接受文本流](https://stackoverflow.com/questions/8515053/csv-error-iterator-should-return-strings-not-bytes)。（gzip 和 zip 文件也会出现同样的问题。）

```
datafile = bz2.BZ2File('./file.csv.bz2', mode='r')
data = csv.reader(datafile)
for e in data:    # error
    process(e) 
```

特别是，指示的行会引发异常`_csv.Error: iterator should return strings, not bytes (did you open the file in text mode?)`。

我也试过`data = csv.reader(codecs.EncodedFile(datafile, 'utf8'))`了，但这并不能解决错误。

如何包装二进制输入流以便它可以在文本模式下使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T04:22:44.693

这对我有用：

```
import codecs, csv
f = codecs.open("file.csv", "r", "utf-8")
g = csv.reader(f)
for e in g:
    print(e) 
```

在 BZ2 的情况下：

```
import codecs, csv, bz2
f = bz2.BZ2File("./file.csv.bz2", mode="r")
c = codecs.iterdecode(f, "utf-8")
g = csv.reader(c)
for e in g:
    print(e) 
```

# php - 如果实例化一个其类没有构造函数的对象会发生什么？

> ID：10509761
> 
> 赞同：0
> 
> 时间：2012-05-09T04:17:41.340
> 
> 标签：php, oop

我只是意识到我一直在这样做，而且当我使用时，对象的属性似乎仍在设置中

```
object->set($property, $value); 
```

在这种情况下，预期的行为是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:38:22.707

```
object->set($property, $value); 
```

set 在这里只是对象对象的一个​​方法，可能您指的是setter方法。它接受两个参数并将其传递给类属性。设置类的行为取决于 set 方法的代码，使用这种方法有一些好处。

有两种方法可以将数据存储在类中，一种方法是直接将值分配给类属性，例如

```
class Foo {
    public $a;
    public $b;
} 
```

如果您需要将值分配给您想要的类属性。

```
$object = new Foo();
$object->a = 'hello';
$object->b = 'world'; 
```

现在类属性 $a 将包含值 hello 并且类属性 $b 将包含值 world，但是这种方法存在一个问题，我们永远无法告诉用户应该输入什么类型的数据。如果我们需要仅在 $a 中存储整数，我们无法做到这一点。为了克服这个问题，您可以使用 setter 方法，其中我们将类属性声明为受保护或私有，并通过类方法设置值。

```
class Foo {
    protected $a;
    protected $b;

   public function set($a) {
       //you can validate the data here before assigning.
       $this->a = $a;
   }
} 
```

您可以简单地 google 一下 getter 和 setter 方法并获取更多信息。

```
Class Constructor 
```

类构造函数不过是实例化对象时自动调用的方法。考虑您想通过强制用户首先提供用户 ID 来实例化一个对象。或者您可能想在调用其他方法之前进行一些有用的计算。这就是类构造函数发挥作用的地方。考虑下面的例子

```
class Bar {

    protected $userId;    

    public function __construct($userId) {
        $this->userId = $userId;
        //any more code execution that needs to be done while instantiating the class can be placed here
    }
} 
```

所以当你实例化对象时

```
$object = new Bar(); 
```

这将导致错误。因为您没有提供用户 ID。所以正确的方法是。

```
$object = new Bar(1); 
```

现在类属性`$userId`将在对象实例化时保持值一。

希望这可以帮助你。

# javascript - 使用来自设置应用程序的数据注入 javascript

> ID：10509762
> 
> 赞同：0
> 
> 时间：2012-05-09T04:17:45.770
> 
> 标签：javascript, ios, settings, settings.bundle

我已经设置了一个设置包，并且可以成功地从中提取数据。我还需要将一些代码注入到 UIWebView 中，我也可以成功地做到这一点。现在的问题是**如何将 2 结合起来？**

我有这段代码可以从设置包中读取 textField 标签：

```
NSString *textField01 = [[NSUserDefaults standardUserDefaults] stringForKey:@"tetxtField01_preference"]; 
```

我有这个字符串可以将代码注入 UIWebView：

```
 [_webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('textField01').value = 'default text'"]; 
```

现在在`stringByEvaluatingJavaScriptFromString`我可以注入“默认文本”，但随后它被硬编码到应用程序中，我无法在应用程序中更改它。

那么有可能吗？如果可以，我如何将objective-c NSString 放在默认文本中？

我在想一些事情：

```
[_webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('textField01').value = [@"%@", textField01] "]; 
```

但它给出了一个错误:-)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:42:11.890

完全创建 Js 字符串并将其传递给“stringByEvaluatingJavaScriptFromString:”函数。IE

NSString *foo = [NSString stringWithFormat:@"document.getElementById('textField01').value = %@",textField01]; [_webView stringByEvaluatingJavaScriptFromString:foo];

# iphone - 将 UInt32 传递给 NSData 对象返回 (null)

> ID：10509766
> 
> 赞同：2
> 
> 时间：2012-05-09T04:18:14.277
> 
> 标签：iphone, ios, nsdata, nsnumber, uint32

我正在尝试将 NSNumber 传递给正在工作的 UInt32。然后我试图将 UInt32 填充到 NSData 对象中。但是这是事情变得有点古怪的地方......

当我尝试将 NSData 对象中的内容写入字符串时，它返回（null）。

这就是我的代码的样子，我认为这与我将 CACHE_VALUE 传递给 requestCacheData 的方式有关。但我不完全确定为什么。

```
// Use the correctly returned cache number
    UInt32 CACHE_VALUE = [cacheNumber intValue];
    NSLog(@"%lu", CACHE_VALUE); //gives me the correct integervalue
    NSData * requestCacheData = [[NSData alloc] initWithBytes:&CACHE_VALUE length:sizeof(CACHE_VALUE)];

    NSString *myString = [[NSString alloc] initWithData:requestCacheData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", myString); //outputs (null) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:21:48.510

您不能将 NSData 转换为 NSData 不包含正确字符串内容的正确 NSString。

在你的情况下，你的 NSData 只包含一个二进制无符号整数，

你想得到什么？

```
NSString* str= @"a NSString";
NSData* requestCacheData =[str dataUsingEncoding:NSUTF8StringEncoding];
NSString *myString = [[NSString alloc] initWithData:requestCacheData encoding:NSUTF8StringEncoding];
NSLog(@"%@", myString); 
```

你可能会得到正确的输出，

但是如果你想把一个 UINT 变成 NSString

只是

```
NSString *str = [[[NSString alloc] initWithFormat:@"%u",CACHE_VALUE] autorelease]; 
```

# android - android中的屏幕方向

> ID：10509772
> 
> 赞同：0
> 
> 时间：2012-05-09T04:18:32.613
> 
> 标签：android, android-layout, android-manifest, screen-orientation

我为我的应用程序创建了两个布局文件（在 res/layout 和 res/layout-land 中）。但是当我更改设备方向时，它没有显示正确的布局文件。它只是在两种模式下显示相同的布局文件（res/layout）。为什么它没有在横向模式下拾取横向模式布局文件？我还在清单中的活动中添加了 android:configChanges="keyboard|orientation"。我还需要做什么？我是 android 应用程序开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:21:32.037

如果您在 Manifest 文件中添加添加`android:configChanges="keyboard|orientation"`，它不会更改布局，因为通过添加此属性，您的 Activity 不会再次重新创建，因此它显示与纵向模式相同的布局。因此，`android:configChanges="keyboard|orientation"`从 Manifest 文件中删除以使其正常工作。

如果您希望您的 Activity 不应该再次创建，并且它应该在您的方向更改时更改布局，您必须添加代码以手动更改布局以`onConfigurationChanged()`检查[`my answer here`](https://stackoverflow.com/questions/7749675/how-to-stop-changing-the-orientation-when-a-progress-bar-is-spinning-in-android/7749727#7749727)它是否正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:21:34.470

你不应该添加这个。

```
android:configChanges="keyboard|orientation" 
```

在您的清单中..因为它不允许调用 onConfigurationchanged 方法...负责处理方向更改...从您的清单中删除该行，它应该可以工作...

# sinatra - Sinatra 和机架保护设置

> ID：10509774
> 
> 赞同：17
> 
> 时间：2012-05-09T04:18:45.783
> 
> 标签：sinatra, rack, http-status-code-403

我正在使用 Sinatra 和 CORS 接受域 A (hefty.burger.com) 上的文件上传。域 B (fizzbuzz.com) 有一个表单，可以将文件上传到 A 上的路由。

我有一个选项路由和一个发布路由，都名为“/uploader”。

```
options '/uploader' do
  headers 'Access-Control-Allow-Origin' => 'http://fizz.buzz.com',
  'Access-Control-Allow-Methods' => 'POST'
  200
end 

post '/uploader' do
  ... 
  content_type :json
  [{:mary => 'little lamb'}].to_json
end 
```

选项首先被击中......它起作用了......然后帖子被击中并返回403。

如果我禁用保护，则帖子有效...我需要从列表中排除哪种保护以保持保护但允许这些帖子通过？

我最近才被 Heroku 上的新 Rack 保护所烧伤，这让我有些悲痛……任何人都有一个很好的指导，可以在这里做什么？我这么说的原因是，突然间我看到日志条目带有会话劫持问题的警报（几乎可以肯定是因为应用程序运行 > 1 Dyno）。我在我的 Gemfile.lock 中看到 rack-protection (1.2.0)，即使我从来没有要求它......我的清单中的某些东西正在调用它，所以它被加载了，但我的 Sinatra 应用程序中没有任何东西试图要求它或设置它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-20T21:20:16.397

在您的 Sinatra 应用程序中使用它应该可以解决您的问题：

```
set :protection, :except => [:json_csrf] 
```

更好的解决方案可能是将 Sinatra 升级到 1.4，它使用 Rack::Protection 1.5，不会导致您看到[的问题。](https://github.com/rkh/rack-protection/issues/39)

问题是当您使用 Content-Type: application/json 响应时，您的 in 版本与[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)`RackProtection::JsonCsrf`不兼容。这是机架保护中[旧 json_csrf.rb的片段：](https://github.com/rkh/rack-protection/blob/a91810fa030e939a5262b587a89b64285ccaa7b9/lib/rack/protection/json_csrf.rb)

```
def call(env)
  status, headers, body = app.call(env)
  if headers['Content-Type'].to_s.split(';', 2).first =~ /^\s*application\/json\s*$/
    if referrer(env) != Request.new(env).host
      result = react(env)
      warn env, "attack prevented by #{self.class}"
    end
  end
  result or [status, headers, body]
end 
```

`application/json`您可以看到，当引用者与服务器不是来自同一主机时，这会拒绝具有响应的请求。

这个问题在更高版本的 rack-protection 中得到了解决，它现在考虑请求是否是 XMLHttpRequest：

```
 def has_vector?(request, headers)
    return false if request.xhr?
    return false unless headers['Content-Type'].to_s.split(';', 2).first =~ /^\s*application\/json\s*$/
    origin(request.env).nil? and referrer(request.env) != request.host
  end 
```

如果您使用的是 Sinatra 1.3.2 并且无法升级，解决方案是禁用此特定保护。使用 CORS，您可以显式启用跨域 XHR 请求。Sinatra 允许您完全禁用保护，或禁用特定组件`Rack::Protection`（请参阅Sinatra 文档中的[“配置攻击保护”](http://www.sinatrarb.com/intro.html#Configuring%20attack%20protection)）。

[`Rack::Protection`](http://rkh.github.io/rack-protection/)提供[12 个中间件组件](https://github.com/rkh/rack-protection/tree/master/lib/rack/protection)，帮助抵御常见攻击：

*   `Rack::Protection::AuthenticityToken`
*   `Rack::Protection::EscapedParams`
*   `Rack::Protection::FormToken`
*   `Rack::Protection::FrameOptions`
*   `Rack::Protection::HttpOrigin`
*   `Rack::Protection::IPSpoofing`
*   `Rack::Protection::JsonCsrf`
*   `Rack::Protection::PathTraversal`
*   `Rack::Protection::RemoteReferrer`
*   `Rack::Protection::RemoteToken`
*   `Rack::Protection::SessionHijacking`
*   `Rack::Protection::XssHeader`

在撰写本文时，当您使用 Rack::Protection 中间件时，除了四个之外，所有这些都会自动加载（`Rack::Protection::AuthenticityToken`、`Rack::Protection::FormToken`、`Rack::Protection::RemoteReferrer`，并且`Rack::Protection::EscapedParams`必须显式添加）。

Sinatra 使用 Rack::Protection 的默认设置，但有[一个例外](https://github.com/sinatra/sinatra/blob/7c3a194935b7c9871783039958ac2963f83539b9/lib/sinatra/base.rb#L1683-1691)：它只添加`SessionHijacking`并且`RemoteToken`启用会话。

最后，如果您尝试将 CORS 与 Sinatra 一起使用，您可以尝试[rack-cors](https://github.com/cyu/rack-cors)，它会为您处理很多细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-26T03:57:42.213

如果您看到此问题，说明您没有使用 CORS（跨域资源共享），并且位于反向代理（例如 nginx 或 apache）后面，请确保您的反向代理没有剥离`host`标头并替换它与本地主机。

例如，在 nginx 中，您需要使用`proxy_set_header`：

```
location / {
    proxy_pass http://localhost:9296;
    proxy_set_header Host $host;
} 
```

当从请求中删除标头时，Rack::Protection 认为这是一次 CSRF 攻击。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T00:04:36.047

让我猜猜，您正在使用 Chrome 应用程序“Dev HTTP Client”进行测试？试试这个：

```
curl -v -X POST http://fizz.buzz.com/uploader 
```

从机架保护模块： *“支持的浏览器：：Google Chrome 2、Safari 4 及更高版本”*

这应该有效：

```
class App < Sinatra::Base
  ...
  enable :protection
  use Rack::Protection, except: :http_origin
  use Rack::Protection::HttpOrigin, origin_whitelist: ["chrome-extension://aejoelaoggembcahagimdiliamlcdmfm", "http://fizz.buzz.com"]

  post '/uploader' do
    headers \
      'Allow'   => 'POST',
      'Access-Control-Allow-Origin' => 'http://fizz.buzz.com'
    body "it work's !"
  end 
```

您可能想知道**chrome-extension://aejoelaoggembcahagimdiliamlcdmfm**吗？嗯，这就是当您使用 Chrome 应用程序发送 POST 请求时机架保护获得的**env['HTTP_ORIGIN'] 。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T02:11:48.010

这是因为您没有在选项路线中返回允许的方法吗？

[这里](https://stackoverflow.com/questions/4351904/sinatra-options-http-verb)的一个问题是指它，它记录了允许的方法。

[此处](http://blog.sourcebender.com/2010/06/09/introducin-rack-cors.html)的扩展和[此处](https://github.com/britg/sinatra-cross_origin)的中间件可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-25T16:41:00.053

rack-protection 允许从 2.0.0 开始指定自定义检查：

`set :protection, :allow_if => lambda{ |env| env['HTTP_REFERER'] && URI(env['HTTP_REFERER']).host == 'fizz.buzz.com' }`

[https://github.com/sinatra/sinatra/blob/a2fe3e698b19ac4065f166f1727afd31d0e72f95/rack-protection/lib/rack/protection/json_csrf.rb#L39](https://github.com/sinatra/sinatra/blob/a2fe3e698b19ac4065f166f1727afd31d0e72f95/rack-protection/lib/rack/protection/json_csrf.rb#L39)

# linux - 在 Linux 中执行时生成文件错误

> ID：10509775
> 
> 赞同：-2
> 
> 时间：2012-05-09T04:18:57.147
> 
> 标签：linux, shell

我对自动化有一个要求。

我需要在 Linux 的命令行中将 1、2、3 等值传递给 MY_IMAGE。

我在其他 make 文件中为所有这些输入定义了活动。

我为我的要求编写了类似于下面的代码。问题是每当我传递诸如 MY_IMAGE=1、MY_IMAGE=2、MY_IMAGE=3 之类的值时

它只是打印`echo ACT_DO=XYZ;`

每当我选择 2 或 3 时，它都不会显示其他信息。任何人都可以检查并更正我的代码。

```
export MY_IMAGE
MY_IMAGE=$img_value;
if [ $img_value :="1" ]
then
echo ACT_DO=XYZ;
else 
if [ $img_value :="2 ] 
then
echo ACT_DO=ABC;
else 
if [ $img_value :=3 ] 
then
echo ACT_DO=ETC;
else
echo ""$img_value" is unsupported";
exit 1; 
fi
fi
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:11:04.050

据我所知，您的代码在错误的地方引用了一个引号，并且使用`:=`了这并不意味着什么。它的实施也很混乱。

尝试这个：

```
export MY_IMAGE
MY_IMAGE=$img_value

case "$img_value" in
1 ) echo ACT_DO=XYZ ;;
2 ) echo ACT_DO=ABC ;;
3 ) echo ACT_DO=ETC ;;
* )
  echo "\"$img_value\" is unsupported"
  exit 1
  ;;
esac 
```

此代码不需要前两行，但我想您希望它用于其他内容。

# android - 专用于 SurfaceView 的屏幕的特定部分

> ID：10509777
> 
> 赞同：0
> 
> 时间：2012-05-09T04:19:15.833
> 
> 标签：android

我想要实现的是：

![在此处输入图像描述](../Images/569b8ccb4ad8dabee2ea9889d82bb6a3.png)

我想让屏幕的特定部分成为我的`SurfaceView`. 我会将它`SurfaceView`用于一些动画。`Views`但我想在我`TextView`的.`RadioButtonGroup``SurfaceView`

所以我的问题是，这可能吗？我正在寻找有关“动画精灵”的示例 android 源代码，但我找不到任何同时包含`TextViews`和`SurfaceView`. 都在延伸`SurfaceView`。如果这是可能的，我该怎么做？你有我可以尝试的示例源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:47:55.010

这绝对是可能的，但您可能需要提供更多信息。如果您想在 textview 旁边运行一些简单的动画，那么您甚至不需要表面视图。只需创建一个图像视图并在其上运行动画（这是我为该主题创建[的教程）](http://androiddev101.com/2012/02/22/episode-3-animation-4-life/)

TextView 及其亲属不从 Surfaceview 派生，它们从 View 类派生。再一次，如果您想执行简单的动画，我认为您不需要表面视图。如果您想做更多动态复杂的事情，那么在我的开发博客上还有一个关于如何将 SurfaceView 用于游戏[的教程。](http://androiddev101.com/2012/03/18/episode-4-how-to-make-an-android-game/)如果这更符合您的喜好，那么您可以创建一个自定义表面视图，然后将其与您想要的尺寸尺寸关联到您的布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:50:02.600

试试这个我没有扩展surfaceview。

```
 public class Preview_can_work extends Activity {
        private SurfaceView surface_view;  
        SurfaceHolder.Callback sh_ob = null;
        SurfaceHolder surface_holder        = null;
        SurfaceHolder.Callback sh_callback  = null;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            getWindow().setFormat(PixelFormat.TRANSLUCENT);

            surface_view = new SurfaceView(getApplicationContext());
            addContentView(surface_view, new LayoutParams(50, 50));

            if (surface_holder == null) {
                surface_holder = surface_view.getHolder();
            }

            sh_callback = my_callback();  // CREATING CALLBACK FOR YOUR SURFACE.
            surface_holder.addCallback(sh_callback);
        }

        // THIS FUNCTION RETURNS CALLBACK OBJECT FOR SURFACEVIEW.
            SurfaceHolder.Callback my_callback() {      
                SurfaceHolder.Callback ob1 = new SurfaceHolder.Callback() {

                    @Override
                    public void surfaceDestroyed(SurfaceHolder holder) {
                    }

                    @Override
                    public void surfaceCreated(SurfaceHolder holder) {
                    }

                    @Override
                    public void surfaceChanged(SurfaceHolder holder, int format, int width,
                            int height) {
                    }
                };
                return ob1;
        }

    } 
```

现在你可以简单地在你的布局上添加任何文本视图或按钮，它应该可以工作。

注意：- 我正在动态创建表面。在您的情况下，您可以做的是您可以在 xml 文件中创建所有内容。而不是创建surfaceview 创建视频视图。

SurfaceView surface_view = (SurfaceView) findViewById(R.id.video_view_id);

如果您从布局中按 id 获取视图，那么您必须从代码中删除一些行。哪个是：

```
 surface_view = new SurfaceView(getApplicationContext());
            addContentView(surface_view, new LayoutParams(50, 50)); 
```

希望它会帮助你...

# android - Android：在哪里保存用户数据？

> ID：10509781
> 
> 赞同：0
> 
> 时间：2012-05-09T04:19:40.867
> 
> 标签：android

我应该在哪里保存 Android 上的用户数据？

保存的数据是游戏进度（一个 sqlite 数据库）和最后一次游戏的屏幕截图，所以它真的很小。
我需要一条可以从 C++ 代码读取和写入的路径，如果用户卸载应用程序时自动删除该数据，那就太好了。

# mysql - 将数据库中的 MySQL 父记录和所有相关子记录复制到新 ID

> ID：10509785
> 
> 赞同：5
> 
> 时间：2012-05-09T04:20:04.680
> 
> 标签：mysql, copy, database-cursor

有没有一种简单的方法可以在不使用游标或外部脚本/代码的情况下使用严格的 SQL 来复制父记录和所有相关的子记录？这是我所拥有的一个例子：

```
categories
==
category_id
category_name

parent_table
==
parent_record_id
category_id
... <other fields>

child_table1
==
child_table1_id
parent_record_id
... <other fields>

child_table2
==
child_table2_id
parent_record_id
... <other fields> 
```

基本上，我需要对所有这些数据进行精确复制。唯一会改变的字段是 ID，因为它们都是 auto_increment。根据上面的模式，当我复制类别表中的记录时，我将得到所有新的 category_id 值。当我创建 parent_table 记录的副本时，我需要一种方法以某种方式用刚刚创建的新 category_id 值更新旧 category_id 值。然后我需要在复制 child_record1 和 child_record2 记录时使用新的 parent_record_id 值。

我觉得必须有一种更简单的方法来实现这一点，而不是用 PHP 或其他语言在外部编写脚本。在那儿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:24:04.977

查看这篇文章，[http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

你基本上可以做到以下几点

```
INSERT INTO table (id, column1, column2) (SELECT NULL, column1, column2 FROM table WHERE whatever_id = 123); 
```

# delphi - 字符串加密问题

> ID：10509787
> 
> 赞同：1
> 
> 时间：2012-05-09T04:20:31.803
> 
> 标签：delphi, authentication, encryption, delphi-xe2

在我当前的一个项目中，我正在使用单用户身份验证系统。我说“单用户”，因为我没有计划让同一个 Windows 帐户上的多个用户使用这项工作（仅仅是因为这不是我想要做的事情）。

当用户启动应用程序时，他们会看到一个身份验证屏幕。此验证屏幕使用图像（即单击图像中的 3 个特定点）、用户名（标准编辑框）和图像选择（允许他们选择想要使用的图像的下拉菜单）。图像选择、用户名和在图像上单击的点都必须与用户在设置密码时指定的内容相匹配。

所有 3 个结果都组合成一个字符串，然后使用该`Soap.EncdDecd.EncodeString`方法对其进行编码。然后使用 SHA-512 对其进行哈希处理。最后，它使用 DES 加密。然后将该值与他们设置密码时创建的值进行比较。如果匹配，则授予他们访问权限。如果不是，则拒绝访问。我计划在应用程序的其他点使用 SHA512 值（例如“主密码”，用于授权自己使用主应用程序中的各种不同模块）。

在一个示例中，初始字符串长度为 29 个字符，SOAP 编码字符串约为 40 个字符，SHA-512 字符串为 128 个字符，DES 值为 344 个字符。由于我没有使用大量字符串，因此它实际上非常快。SOAP 被用作非常基本的混淆而不是安全措施。

我担心的是第一部分（纯字符串和 SOAP）可能是弱点。基本字符串不会给他们一些他们可以输入并被授予访问权限的东西，但它会给他们“图像点击坐标”以及用户名和图像选择，这可能会允许他们访问应用程序。SOAP 字符串可以很容易地解码。

**加强身份验证的第一部分以尝试避免直接从记忆中窃取值的最佳方法是什么？我是否应该担心潜在的剥削者或攻击者以这种方式读取值？**

作为与同一主题直接相关的附加问题；

**存储用户在初始设置期间创建的密码哈希的最佳方式是什么？**

我目前正在使用一种`TIniFile.SectionExists`方法，因为我还没有想出更优雅的方法。这是我缺乏知识的一个领域。我需要跨会话存储密码“哈希”（因此不能选择使用内存流），但我需要确保安全性足够好，以至于任何脚本小子都不会彻底破解它。

* * *

更多的是关于我是否应该关注，以及我所做的编码、散列和加密是否真的足够。我开发的图片密码系统已经是阻止传统的*“我知道你的基于文本的密码是什么所以现在我在你的系统中”*攻击的一个很好的基础，但我担心从内存读取的更多技术攻击.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T05:26:25.350

使用 SHA-512，从哈希值中检索初始内容是不可行的（至少在 20 年的计算能力和地球电能之前）是不可行的。

我什至认为使用 DES 不是强制性的，而且会增加复杂性。当然，您可以使用如此缓慢的过程来使暴力破解或基于字典的攻击更加困难（因为它会使每次尝试都变慢）。更常见的是不使用DES，而是多次调用SHA-512（例如1000次）。在这种情况下，速度可能是你的敌人：一个快速的过程将更容易攻击。

您可以做的是在初始值中添加所谓的“盐”。请参阅[此维基百科文章](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

“盐”可以固定在代码中，也可以存储在密码中。

那是：

```
Hash := SHA512(Salt+Coordinates+UserName+Password); 
```

最后的建议：

*   永远不要将纯初始文本存储在数据库或文件中；
*   强制使用强密码（不是“hellodave”，由于字典很容易破解）；
*   主要的安全漏洞在椅子和键盘之间；
*   如果你是偏执狂，在释放它之前明确地覆盖（即一个字符一个字符）痛苦的初始文本内存（它可能仍然在 RAM 中的某个地方）；
*   首先了解一些众所周知的技术：最好使用带有“ [nonce ”的“](http://en.wikipedia.org/wiki/Cryptographic_nonce) [challenge](http://en.wikipedia.org/wiki/Challenge-response_authentication) ”来避免任何“ [replay](http://en.wikipedia.org/wiki/Replay_attack) ”或“ [main in the middle](http://en.wikipedia.org/wiki/Man-in-the-middle_attack) ”攻击；
*   将密码哈希存储在 DB 甚至 INI 文件中是安全的，如果您注意拥有强大的身份验证方案（例如使用质询-响应）并保护服务器访问。

例如，这里是如何“清理”你的记忆（但它可能比这复杂得多）：

```
 Content := Salt+Coordinates+UserName+Password;
 for i := 1 to length(Coordinates) do
   Coordinates[i] := ' ';
 for i := 1 to length(UserName) do
   UserName[i] := ' ';
 for i := 1 to length(Password) do
   Password[i] := ' ';
 Hash := SHA512(Content);
 for i := 1 to length(Content) do
   Content[i] := ' ';
 for i := 1 to 1000 do 
   Hash := SHA512(Hash); 
```

当它涉及安全时，不要试图重新发明轮子：这是一件困难的事情，你最好依靠数学证明（如 SHA-512）和经验丰富的技术（如盐，挑战......）。

对于一些身份验证方案示例，看看[我们如何为我们的客户端-服务器框架实现 RESTful 身份验证](http://blog.synopse.info/post/2011/05/24/How-to-implement-RESTful-authentication)。它当然不是完美的，但它试图实施一些最佳实践。

# php - Cakephp：更新记录而不参考主键

> ID：10509792
> 
> 赞同：2
> 
> 时间：2012-05-09T04:21:11.700
> 
> 标签：php, cakephp

我正在尝试更新与其线程 ID 相关的记录数。这是我的**id_thread**字段不是主键的问题。但据我所知 cakephp 只支持更新与主要 id 相关的内容。

**使用代码**

```
$this->contact->id_thread = $id;        
$this->Contact->saveField('is_read','y'); 
```

但这对我不起作用。有任何想法吗 ？

**我的数据库结构**

```
id   |id_thread |  id_sender| is_read | status
_______________________________________________
1    | 2        |   2       | n       | 1
2    | 2        |   1       | n       | 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T04:46:50.080

saveField 仅适用于当前加载的记录。要更新同一模型的多条记录，请使用`updateAll`.

用法：

> **模型::updateAll(数组 $fields, 数组 $conditions)**
> 
> 在一次调用中更新许多记录。要更新的记录由 $conditions 数组标识，要更新的字段及其值由 $fields 数组标识。
> 
> [来源](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

在您的情况下，它看起来像这样：

```
$this->Contact->updateAll(
    array( 'Contact.is_read' => 'y' ),   //fields to update
    array( 'Contact.id_thread' => $id )  //condition
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:32:55.960

你的`id_thred`领域似乎不是独一无二的。因此，即使您进行 SQL 查询来更新数据，它也会更新这两行。这是你所期待的吗？

我的建议是调用带有条件的查找方法`id_thread`并获取主键 id 并使用`saveField`方法更新值

# javascript - 如何在主干悬停时让项目变得可见？

> ID：10509794
> 
> 赞同：0
> 
> 时间：2012-05-09T04:21:20.973
> 
> 标签：javascript, css, backbone.js

当用户滚动视图时，我试图让视图变得可见，但我遇到了麻烦。这是视图：

```
events: {
  "mouseenter": "showOptions",
  "mouseleave": "hideOptions",
},

showOptions: function() {
  $(this.el).find(".update-delete").addClass("visible");
},

hideOptions: function() {
  $(this.el).find(".update-delete").removeClass("visible");
}, 
```

这是相关的CSS：

```
.update-delete {
  display: inline-block;
  margin-left: 5px;
  font-weight: bold;
  color: #777777;
  visibility: hidden;
}

.visibile {
  visibility: visible;
} 
```

该类最初设置为具有隐藏的可见性。但是，在悬停时，可见性不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:25:36.107

我会摆脱`visibility`css 并使用`display`，`$.show/hide`而是：

```
.update-delete {
  display: inline-block;
  margin-left: 5px;
  font-weight: bold;
  color: #777777;
  display: none;
}

showOptions: function() {
  $(this.el).find(".update-delete").show()
},

hideOptions: function() {
  $(this.el).find(".update-delete").hide();
}, 
```

如果您必须能见度，请先尝试以下操作：

```
showOptions: function() {
  $(this.el).find(".update-delete").css('visibility', 'visible');
},

hideOptions: function() {
  $(this.el).find(".update-delete").css('visibility', 'hidden');
}, 
```

如果可行，那么适应您的代码应该很简单。

# python - 如何在 Python 中将布尔值连接到字符串？

> ID：10509803
> 
> 赞同：86
> 
> 时间：2012-05-09T04:21:56.717
> 
> 标签：python, string, casting, boolean, concatenation

我想完成以下

```
answer = True
myvar = "the answer is " + answer 
```

并让 myvar 的值为“答案为真”。我很确定你可以在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-09T04:25:08.773

```
answer = True
myvar = "the answer is " + str(answer) 
```

Python 不进行隐式转换，因为隐式转换可以掩盖关键的逻辑错误。只需将答案转换为字符串本身即可获取其字符串表示形式（“True”），或使用字符串格式，如下所示：

```
myvar = "the answer is %s" % answer 
```

请注意，答案必须设置为`True`（大写很重要）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-09T04:30:59.173

推荐的方法是让`str.format`处理铸造（[docs](http://docs.python.org/library/string.html#formatstrings)）。`%s`最终可能会弃用带有替换的方法（请参阅[PEP3101](http://legacy.python.org/dev/peps/pep-3101/)）。

```
>>> answer = True
>>> myvar = "the answer is {}".format(answer)
>>> print(myvar)
the answer is True 
```

在 Python 3.6+ 中，您可以使用[文字字符串插值](https://www.python.org/dev/peps/pep-0498/)：

```
 >>> print(f"the answer is {answer}")
the answer is True 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-09T04:23:43.890

```
answer = True
myvar = "the answer is " + str(answer) 
```

或者

```
myvar = "the answer is %s" % answer 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-21T18:56:15.373

使用所谓的 f 字符串：

```
answer = True
myvar = f"the answer is {answer}" 
```

那么如果我这样做

```
print(myvar) 
```

我会得到：

```
the answer is True 
```

我喜欢 f 字符串，因为不必担心变量在打印文本中出现的顺序，这有助于在将多个变量打印为字符串的情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-05T03:24:01.127

答案 = 真

myvar = '答案是' + str(answer) #因为答案变量是布尔格式，因此，我们必须将布尔值转换为字符串格式，这可以很容易地使用这个来完成

打印（myvar）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-05-26T15:54:47.503

```
answer = “True”

myvars = “the answer is” + answer

print(myvars) 
```

这应该很容易为您提供答案，因为您已使用引号将答案存储为字符串

# c - strcpy 的奇怪程序输出

> ID：10509806
> 
> 赞同：0
> 
> 时间：2012-05-09T04:22:13.360
> 
> 标签：c

这里我有一个非常简单的程序，输出对我来说很奇怪，

```
#include "stdio.h"
#include "string.h"

void func_stack();

int main(int argc, char *argv[]) {
    func_stack();
}

void func_stack() {
    int a = -1;
    char s[4];
    int b = -1;

    strcpy(s,"1234");
    printf("a+b result to %d\n",a+b);
} 
```

我猜 strcpy 函数使用 '\0' 为后来的 int 变量“b”覆盖了一些东西，并给出了一个奇怪的计算结果，但是在我在 x86 linux 机器上编译它之后，我仍然得到 -2 结果，它是相同的结果因为没有 strcpy 发生。

任何人都可以解释为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:23:20.153

C 字符串以 NUL 结尾。当您使用`strcpy()`to copy `"1234"`to`s`时，实际上复制了*五个*字节，包括 NUL 终止符。然后，您将超出`s`数组的范围进行写入，因此正在调用*未定义的行为*。

*运行它时实际*发生的情况取决于您的 CPU 架构和编译器（以及编译器选项、优化等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:29:21.983

将数组大小更改为 + 1

例如： `"you"`所以数组大小是 3+1 >> char s[4];

因此，对于您的代码 `"1234"`，数组大小为 4+1 >> char s[5];

最后一个字节用作`NULL`字符串的结尾。

CMIIW

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:30:19.700

您`strcpy`正在尝试复制 5 个字符。即成`1234\0`4个字符的数组。这就是为什么您正在观察这种行为，因为它正在覆盖堆栈上的某些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T04:30:58.660

正如格雷格所说，您正在调用未定义的行为，因此任何事情都可能发生。您正在使用的机器是 64 位的吗？如果是这样，则变量可能是字对齐的，因此`s`在整数之前有额外的 4 个字节的填充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T04:33:51.340

因为你在做 a=b=-1，所以它们中的所有位都应该是 1。使用调试器或 printf，您可以通过检查 s[4] 的地址来检查 '\0' 的写入位置

```
&s[4], 
((char*)&a) and ((char*)&a)+(sizeof(int)-1),
((char*)&b) and ((char*)&b)+(sizeof(int)-1) 
```

如果 a & b 的地址不与 s[0] .. s[4] 重叠，那么您将得到结果 -2。

# html - 如何在一定数量的像素后垂直重复身体的背景图像？

> ID：10509812
> 
> 赞同：1
> 
> 时间：2012-05-09T04:22:51.323
> 
> 标签：html, css, background, repeat

当我这样做时：

```
body{
    background-image:url('pix/image.png');
    background-repeat:repeat-y;
} 
```

它正确地垂直重复 image.png

我的问题是我希望在开始重复之前可以看到背景的一些像素。

我试过这个：

```
body:before{
  content: "";
  height: 400px;
  display: block;
  background: #f9fae8;
} 
```

但问题是它会将所有内容向下移动，这不是我需要的。

为了清楚起见，这是我需要的图表（用油漆制作！）：

![在此处输入图像描述](../Images/9b6056e0358645acf6e14323a275a955.png)

注意：我确实注意到另一种解决方案是将我的所有内容放入容器 div 中，并为该 div 提供背景图像，并为其提供 x 像素的 margin-top。问题是产生内容的平台不喜欢被修改很多，所以如果可以在不添加任何额外 div 的情况下更改正文，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:28:15.223

给`position:absolute;`你的`:before`。像这样写：

```
body:before{
  content: "";
  height: 400px;
  display: block;
  background: #f9fae8;
  position:absolute;
  left:0;
  right:0;
  top:0;
  z-index:-1;
} 
```

你也可以检查这个[CSS: background position with repeat？](https://stackoverflow.com/questions/3761909/css-background-position-with-repeat/9142777#9142777)

# sql - 将 SQL 转换为 HQL | 左键排序（不加入）

> ID：10509819
> 
> 赞同：0
> 
> 时间：2012-05-09T04:23:50.717
> 
> 标签：sql, hibernate, sql-order-by

我正在尝试使用以下查询根据列的部分顺序对结果集进行排序：

> select ID,NAME from person order by LEFT(NAME,2) desc

如何编写等效的 Hibernate Criteria/HQL？

我在 Hibernate 参考手册中查找过，我找不到与 LEFT sql 函数相关的任何内容。我正在研究 DB2，休眠版本是 3.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:43:03.873

你可以像下面这样写，但 Left(2,Name) 不确定它的工作是否正常。如果它错了忽略它。我也在寻找它，但没有左键查询..任何方式您可以使用升序或降序，通过使用字符串方法，您可以只读取部分数据。

```
 Query query=session.createQuery("select p.ID,p.NAME  from Person p ORDER BY    LEFT(2,"NAME") DESC"); 
```

# java - 线程安全队列类的问题。具体来说，有例外

> ID：10509822
> 
> 赞同：0
> 
> 时间：2012-05-09T04:24:12.927
> 
> 标签：java, multithreading, exception

我正在使用线程安全队列类，并且我定义的插入方法有问题。缓冲区存储一个数组（elementData），该数组使用开始/结束变量来了解从队列中添加/删除内容的位置。它是线程安全的，因此它使用同步方法，因此我可以让多个线程引用同一个缓冲区。

```
public class Buffer<T> {
    private T[] elementData;                     
    private int elementCount;
    private int start;                                      
    private int end;

    // Additional fields

    // Code to instantiate a Buffer, other methods (e.g. delete)

    public synchronized void insert(T t) throws InterruptedException {
        while (elementCount == elementData.length) {
            wait();
        }
        end = (end + 1) % elementData.length;
        elementData[end] = t;
        elementCount++;
        notifyAll();
    }

    public static void main(String[] args) {
        Buffer<Integer> b = new Buffer();
        b.insert(3);
    }
} 
```

这是我对情况的理解。当调用诸如 insert 之类的方法时，我们希望能够抛出一个异常，该异常可能会在 main 方法或其他线程被调用并尝试在其挂起时执行 insert 时发生。但我不明白为什么我会得到这个未报告的异常。我认为在方法之后有一个“抛出 InterruptedException”就足够了。我需要一个“尝试”块吗？我对 try 块的尝试都失败了，所以我对如何修复这个错误有点困惑。

另外，我知道我没有任何实际的线程在运行。一旦我可以修复这个未报告的异常，我会做这些。：） 感谢任何能提供帮助的人。

```
Buffer.java:56: unreported exception java.lang.InterruptedException; must be caught or declared to be thrown
b.insert(3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:29:50.517

编译异常是因为您的`insert`方法可能会抛出 InterruptedException（即使您不是故意抛出它），所以调用它的每个方法都必须使用 try/catch 块，即使错误从未出现：

```
public static void main(String[] args) {
    Buffer<Integer> b = new Buffer();
    try {
        b.insert(3);
    } catch(InterruptedException ie) {
        //error handling
        e.printStackTrace();
    }
} 
```

# visual-studio-2010 - Visual Studio 无法链接到 Allegro？

> ID：10509823
> 
> 赞同：2
> 
> 时间：2012-05-09T04:24:22.830
> 
> 标签：visual-studio-2010, allegro5

我正在遵循基本的 Allegro 5 教程来尝试制作我的第一个基本 Allegro 项目，但是尽管按照信中的说明进行操作，但我无法成功链接到库。

以下是说明：

* * *

在 Configuration Properties->C/C++->General 下，在 Additional Include Directories 中输入 c:\allegro\include。

在 Configuration Properties->Linker->General 下，在 Additional Library Directories 中输入 c:\allegro\lib。

在 Configuration Properties->Linker->Input 下，将 allegro-5.0.5-monolith-md-debug.lib 附加到 Additional Dependencies。

在 Configuration Properties->Debugging 下，在 Environment 中输入 PATH=c:\allegro\bin;%PATH%。

单击应用。

Visual C++ 现在可以将您的项目与 Allegro 5 库链接。

您现在应该选择“Release”配置（左上角）并重复这些步骤，只需稍作改动：使用非调试库 allegro-5.0.5-monolith-md.lib。

* * *

但是它仍然给了我以下错误：

链接：致命错误 LNK1104：无法打开文件“allegro-5.0.5-monolith-md-debug.lib”

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:48:33.790

我没有意识到这得到了很多意见。我会在很久以前提出答案。希望人们一直在看到我的评论，其中包含答案-

> 哇，回答了我自己的问题。您必须更新链接器输入文件路径。当前版本是 5.0.6 - 只需更改它即可。

基本上他们的安装说明不会更新以反映当前版本。确保在更改项目链接器设置以包含 Allegro 时相应地进行更改。

# javascript - fetchRelated 使用 Backbone.Relational 和 Backbone.Marionette 和 Backbone.ioSync 获取后

> ID：10509824
> 
> 赞同：1
> 
> 时间：2012-05-09T04:24:39.403
> 
> 标签：javascript, backbone.js, socket.io, backbone-relational, marionette

我正在使用 Backbone.Relational 与 Backbone.Marionette 和 Backbone.ioSync 来同步 socket.io。

更具体地说，我有一个模型`A`，它通过关系`hasMany`实例化模式。在加载时，一切都很好：数据已正确初始化和渲染。然后，另一个客户端添加了to的另一个实例。服务器向第一个客户端发送 ping，这导致它调用. 在 fetch 的成功方法中，我调用. fetch 方法只返回关系的 ID 列表，触发on ，导致 Backbone.Marionatte 的集合视图创建项目视图的新实例以显示 new ，这会破坏站点，因为尚未获取新的.`B``bees``B``A.bees``A.fetch()``A.fetchRelated('bees')``bees``change``A``B``B`

试图强制 B 的视图渲染与 A 中定义的延迟对象同步，这听起来像是一个复杂的 hack，可能需要处理许多边缘情况。

一种想法是允许`fetch`接受该`silent`选项。但是在. `change`_ _`add``success``fetch`

另一个想法是让服务器*上下文上的序列化代码感知*并在添加新项目时发送整个对象，而不仅仅是 ID。这也是次优的，因为当将整个相同的 B 添加到不同的 A 时，可能会导致不必要的转移。它还给服务器代码增加了很多复杂性，因为上下文需要在整个序列化过程中传播。

关于如何解决这个问题的任何想法或建议？只要可行，我对可能需要更改 Backbone.Marionette 或 Backbone.Relational 的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:37:29.200

Marionette 现在有了 Marionette.Async，它可以更轻松地执行异步 fetch 和 fetchRelated 请求。此外，Backbone-Relational 中存在一个错误，它在`silent`使用`wait: true`. 有关修复此问题的拉取请求，请参阅[https://github.com/PaulUithol/Backbone-relational/pull/153 。](https://github.com/PaulUithol/Backbone-relational/pull/153)

# string - 如何根据使用 Perl 的条件修改字符串的最后两个字符

> ID：10509827
> 
> 赞同：3
> 
> 时间：2012-05-09T04:24:48.687
> 
> 标签：string, perl, substring

我有需要检查最后两个字符的字符串。如果发现最后两个字符符合我的要求，我需要截断字符串，否则保持字符串不变。我知道它可以使用控制条件来完成，但我想知道 perl 中是否有任何单个语句可以实际实现这一点。还建议任何更好的方法来做到这一点。

例子：

```
$str = "Hello"; 
```

所以如果最后两个字符是“tr”，我想截断字符串，但在这种情况下，我们需要将字符串保留为原始字符串，因为最后一个字符不是“tr”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T04:32:35.250

Perl 的替换运算符`s///` 在这里是理想的。`\z`匹配字符串结尾，但不匹配行尾。

```
$str =~ s/tr\z//; 
```

# asp.net - 为什么 Response.Redirect 不执行下一行代码？

> ID：10509832
> 
> 赞同：1
> 
> 时间：2012-05-09T04:25:42.230
> 
> 标签：asp.net, asp.net-4.0

我有一个常规的 Asp.Net 4.0 网络表单网站。当我做：

```
Response.Redirect("SomePage.aspx"); 
```

我希望我的下一行代码会被执行。然而，令人惊讶的是，下一行代码从未被执行。任何人都可以知道何时以及为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T04:28:49.320

原始 URL 指示的页面中的任何响应正文内容（例如显示的 HTML 文本或 Response.Write 文本）都将被忽略。**另外，在处理 Redirect 方法时，当前页面中的代码执行被终止，因此该页面中的后续代码也将被忽略。**

来源： http: [//msdn.microsoft.com/en-us/library/ms524309 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524309(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T04:33:03.900

[`Response.Redirect`也接受两个参数](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=VS.80%29.aspx)。第二个参数是一个布尔值，表示当前页面的执行是否应该终止。

因此，调用`Response.Redirect("Page.aspx",false)`将执行后续代码行，并避免`ThreadAbortException`被淹没在您的日志文件中。

**更新：回答为什么默认行为是不执行**

什么时候`Response.Redirect`使用，期望是只向客户端发送 302 标头。因此默认情况下，它会刷新响应并中止当前线程，因此不会执行后续操作。

Example, in the authorization / authentication module once we know that the user is not eligible to access the resource, we just do a redirection and rest of the event life cycle should not get executed for security reasons.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T04:32:38.117

response.redirect 等于函数中的 return 语句。所以你在 return 之后写的任何行都不会被执行。response.redirect() 也是如此。在 response.redirect() 之后当前页面执行终止

# android - 授权成功后如何让 AccessToken 发布到 Twitter

> ID：10509834
> 
> 赞同：2
> 
> 时间：2012-05-09T04:25:57.317
> 
> 标签：android, twitter, twitter-oauth

这已经非常痛苦了。我不知道我对 AccessToken 做错了什么，但我尝试在调用 Twitter4j 的 updateStatus 发布到 Twitter 之前设置它。

我尝试了不同的获取 AccessToken 的方法，我只使用 Twitter4J。

```
AccessToken accessToken = twitter.getOAuthAccessToken(twitter.getOAuthRequestToken(), verifier); 
```

给出错误：

```
05-09 12:06:45.776: D/GameName(678): Received authentication challenge is null 
```

我可以切换到 Twitter 浏览器进行授权。我输入我的用户名和密码，按“授权应用程序”。然后浏览器更改为“重定向”回我的应用程序。我的应用程序出现并繁荣！它崩溃了！我的应用程序调用了 onNewIntent。

授权代码效果很好：（twitter 是一个成员变量）

```
 public void twitterAuthorize() 
    {   
        try 
        {
            twitter = new TwitterFactory().getInstance();
            twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);

            RequestToken requestToken = twitter.getOAuthRequestToken(Constants.OAUTH_CALLBACK_URL);                         
            startActivityForResult(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthorizationURL())), TWITTER_AUTHORIZE_ACTIVITY_RESULT_CODE); 
        } 
        catch (TwitterException e) 
        { 
                Log.d(Globals.sApplicationName, e.getMessage());
                e.printStackTrace();                 
        }       

    } 
```

从授权返回，我到达“AccessToken accessToken = ...”的行，引发异常。

```
@Override
protected void onNewIntent(Intent intent) 
{
    super.onNewIntent(intent);

    Log.d(Globals.sApplicationName, "ENTERED: onNewIntent");

    Uri uri = intent.getData();
    if (uri != null && uri.toString().startsWith(Constants.OAUTH_CALLBACK_URL)) 
    {
        Log.d(Globals.sApplicationName, "oAuth: " + uri.toString());
        String verifier = uri.getQueryParameter("oauth_verifier");

        try {
            if (verifier != null)
            {
                Log.d(Globals.sApplicationName, "Verifier: " + verifier);

                //Try 1: doesn't work
                //AccessToken a = new AccessToken(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);

                //Try 2: doesn't work               
                AccessToken accessToken = twitter.getOAuthAccessToken(twitter.getOAuthRequestToken(), verifier);

                //Try 3: doesn't work
                //String token = uri.getQueryParameter("oauth_token");      
                //AccessToken accessToken = new AccessToken(token, verifier);

                //twitter = new TwitterFactory().getInstance();

                twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
                twitter.setOAuthAccessToken(accessToken);

                // create a tweet
                Date d = new Date(System.currentTimeMillis());
                String tweet = "#OAuth working! " + d.toLocaleString();

                // send the tweet
                twitter.updateStatus(tweet);
            }
        } catch (Exception e) {

            Log.d(Globals.sApplicationName, e.getMessage());
            e.printStackTrace();
        }
    }
} 
```

我在调用堆栈上得到了这些错误（我刚刚替换了，所以我在这个论坛帖子中保持私有）：

```
05-09 12:06:45.136: D/GameName(678): ENTERED: onNewIntent
05-09 12:06:45.136: D/GameName(678): oAuth: GameNameTwitterOAuth://callback?oauth_token=<some long string>&oauth_verifier=<some long string>
05-09 12:06:45.156: D/GameName(678): Verifier: <some long string>
05-09 12:06:45.747: W/AudioFlinger(32): write blocked for 131 msecs, 825 delayed writes, thread 0xff88
05-09 12:06:45.776: D/GameName(678): Received authentication challenge is null
05-09 12:06:45.846: W/System.err(678): Received authentication challenge is nullRelevant discussions can be on the Internet at:
05-09 12:06:45.846: W/System.err(678):  http://www.google.co.jp/search?q=bfb606ed or
05-09 12:06:45.856: W/System.err(678):  http://www.google.co.jp/search?q=72d7e395
05-09 12:06:45.856: W/System.err(678): TwitterException{exceptionCode=[bfb606ed-72d7e395 e2110e48-e8248ad2], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.5}
05-09 12:06:45.856: W/System.err(678):  at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:200)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:121)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:104)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:276)
05-09 12:06:45.856: W/System.err(678):  at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:269)
05-09 12:06:45.856: W/System.err(678):  at com.mnecreations.panarchyfling.PanarchyFling.onNewIntent(PanarchyFling.java:602)
05-09 12:06:45.869: W/System.err(678):  at android.app.Instrumentation.callActivityOnNewIntent(Instrumentation.java:1122)
05-09 12:06:45.869: W/System.err(678):  at android.app.ActivityThread.deliverNewIntents(ActivityThread.java:1812)
05-09 12:06:45.869: W/System.err(678):  at android.app.ActivityThread.performNewIntents(ActivityThread.java:1825)
05-09 12:06:45.869: W/System.err(678):  at android.app.ActivityThread.handleNewIntent(ActivityThread.java:1834)
05-09 12:06:45.876: W/System.err(678):  at android.app.ActivityThread.access$2300(ActivityThread.java:123)
05-09 12:06:45.876: W/System.err(678):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1040)
05-09 12:06:45.876: W/System.err(678):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 12:06:45.876: W/System.err(678):  at android.os.Looper.loop(Looper.java:126)
05-09 12:06:45.876: W/System.err(678):  at android.app.ActivityThread.main(ActivityThread.java:3997)
05-09 12:06:45.876: W/System.err(678):  at java.lang.reflect.Method.invokeNative(Native Method)
05-09 12:06:45.876: W/System.err(678):  at java.lang.reflect.Method.invoke(Method.java:491)
05-09 12:06:45.896: W/System.err(678):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-09 12:06:45.896: W/System.err(678):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-09 12:06:45.896: W/System.err(678):  at dalvik.system.NativeStart.main(Native Method)
05-09 12:06:45.896: W/System.err(678): Caused by: java.io.IOException: Received authentication challenge is null
05-09 12:06:45.896: W/System.err(678):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:1176)
05-09 12:06:45.896: W/System.err(678):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.processResponseHeaders(HttpURLConnectionImpl.java:1118)
05-09 12:06:45.896: W/System.err(678):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1044)
05-09 12:06:45.896: W/System.err(678):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:736)
05-09 12:06:45.906: W/System.err(678):  at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:35)
05-09 12:06:45.906: W/System.err(678):  at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:164)
05-09 12:06:45.906: W/System.err(678):  ... 21 more
05-09 12:06:45.906: D/GameName(678): --------------------------------------------
05-09 12:06:45.906: D/GameName(678): Restart activity GameName 
```

请指教，这真的很混乱。我查看了其他帖子，他们提到了有关时间戳的内容，但这对我来说没有意义。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T15:35:47.603

我认为您正在生成一个与您拥有的验证者无关的新请求令牌。

尝试保存 twitter 对象和您第一次请求的令牌并尝试执行以下操作：

1.  项目清单
2.  使用 consumerkey 和 consumerkeysecret 从 twitter 工厂获取 twitter 对象
3.  获取请求令牌 (twitter.getrequesttoken())
4.  向 requesttoken 询问身份验证 url
5.  保存 twitterobject 和 requesttoken
6.  去推特验证
7.  通过回调返回并检索验证器
8.  获取保存的 twitterobject 和 requesttoken
9.  那些保存的 twitterobject 和 requesttoken 应该与验证器一起使用来验证用户......

然后你就被认证了

# javascript - viewport autoMaximize 导致 Timeout waiting for window.innerHeight 在 iPhone 上更改

> ID：10509835
> 
> 赞同：1
> 
> 时间：2012-05-09T04:26:02.770
> 
> 标签：javascript, iphone, mobile, touch, extjs

我的应用程序有一个问题，因为我们试图在屏幕上获得尽可能多的空间，因此试图在地址栏不使用时隐藏它。

我可以通过将 autoMaximize 值设置为 true 来实现这一点。我的问题是当我导航到此页面时出现错误 Timeout waiting for window.innerHeight to change。

当显示此错误时，我的手机上有一个白页，但如果我按下刷新按钮，它实际上会加载该页面。

正如大多数文档所解释的那样，我尝试使用全屏面板，但这不会隐藏地址栏。

这已完全减少，但我什至收到以下代码的错误：

```
Ext.Application({

launch:function(){

    Ext.Viewport.add({
        xtype:'panel',
        fullscreen:true,
        html:'dfghdfgsd'
    });

},
viewport:{
    autoMaximize: true
}
}); 
```

我不确定如何最好地解释这个问题，因为我尝试了很多不同的方法来解决它。只是希望有人遇到类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:34:30.333

当我在调试模式下工作（使用我的应用程序的未编译版本）时，当`autoMaximize`设置为`true`. 为了解决这个问题，我只需注释掉**sdk/src/viewport/Ios.js**中的**第 64 行**：

 **```
Ext.Logger.error("Timeout waiting for window.innerHeight to change", this); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T17:19:45.957

对于在 iOS 上运行 PhoneGap + Touch 的任何人，`autoMaximize`应始终根据 Sencha 员工对此线程的评论（链接到 Sencha 论坛）设置为[FALSE](http://www.sencha.com/forum/showthread.php?164247-quot-Timeout-waiting-for-window.innerHeight-to-quot-error-when-running-the-application-on-iOS)。

我仍然看到 Touch 2.3.0（2013 年 10 月）的这个问题，所以我添加了这样的逻辑：

```
 Ext.application({
     name: 'MyApp',
     viewport: {
       autoMaximize: (typeof(Ext.browser.is.PhoneGap) === 'undefined' || !Ext.browser.is.PhoneGap)
     }
   }); 
```**

# c++ - 提升目录迭代器

> ID：10509836
> 
> 赞同：1
> 
> 时间：2012-05-09T04:26:03.897
> 
> 标签：c++, boost

我有这段 Boost 代码迭代目录中的文件：

```
void someFuncToIterateFiles() {

    if( exists( directory ) )
    {
       directory_iterator end ;

       for( directory_iterator iter(directory) ; iter != end ; ++iter ) {
         if ( !is_directory( *iter ) )
         {
             // this is a file 
             cout << iter->path; 

             // rest of the code
         }
       }
    }
} 
```

我发现有时当它读取一个存在并且即将开始遍历文件的目录时，程序只是停止并且没有错误或分段错误。其余的代码位根本不执行，函数返回给调用者这很奇怪，因为我以前没有遇到过这样的事情。不会抛出异常，除非这需要我们显式使用 try-catch 异常处理程序。

有人在 Boost 上遇到过这种情况吗？我无法调试，只能使用 cout 语句，因为我的一些依赖库是在发布模式下编译的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:43:56.763

path 不是一个字段，它是一个方法，所以你应该这样称呼它：

cout << iter->path();

# c# - [WCF]两个服务在同一个进程中

> ID：10509838
> 
> 赞同：1
> 
> 时间：2012-05-09T04:26:13.930
> 
> 标签：c#, .net, wcf, named-pipes

我有一个exe。在这个exe中。我启动一个服务，将其称为 serviceManager，然后启动另一个服务，将其称为 serviceChild。

当我使用 serviceChild 创建一个带有 serviceManager 的频道时，调用 serviceManager 的回调。它会冻结。

所有的服务绑定都是 netnamedpipebinding。

谁能告诉我发生了什么？

和我的代码： 界面：

```
[ServiceContract]
internal interface IChild
{
    [OperationContract]
    CommunicationState GetState();
}

[ServiceContract]
public interface IManager
{
    [OperationContract]
    CommunicationState GetState();
} 
```

和：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant, InstanceContextMode = InstanceContextMode.Single)]
public class Child : IChild
{
    private readonly Guid _address = Guid.NewGuid();
    private readonly ServiceHost _host;

    public Guid Address
    {
        get { return _address; }
    }

    public Child()
    {
        _host = new ServiceHost(this);

        var binding = new NetNamedPipeBinding();
        var clientAddress = Helper.GetClientAddress(_address);
        _host.AddServiceEndpoint((typeof(IChild)), binding, clientAddress);

        _host.Description.Behaviors.Add(new ServiceDiscoveryBehavior());
        _host.AddServiceEndpoint(new UdpDiscoveryEndpoint());

        _host.Open();
    }

    public void Open()
    {
        if(!Manager.IsRunning()){Manager.Start();}

        var binding = new NetNamedPipeBinding();
        var endpoint = new EndpointAddress(Constants.ADDRESS_PIPE_SERVER);
        using (var factory = new ChannelFactory<IManager>(binding, endpoint))
        {
            IManager managerChannel = null;
            try
            {
                managerChannel = factory.CreateChannel();
                **managerChannel.GetState();**// BUG:<-----
            }
            catch (Exception ex)
            {
                MessageBox.Show("ex " + ex);
            }
            finally
            {
                Helper.CloseChannel((ICommunicationObject)managerChannel);
            }
        }
    }

    public CommunicationState GetState()
    {
        return _host.State;
    }
} 
```

管理者：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant, InstanceContextMode = InstanceContextMode.Single)]
public class Manager : IManager
{
    private static ServiceHost _host;

    private static Manager _instance;

    private static Manager Instance
    {
        get { return _instance ?? (_instance = new Manager()); }
    }

    #region IManager Members

    public CommunicationState GetState()
    {
        return _host.State;
    }

    #endregion

    public static void Start()
    {
        if (_host != null
            && (_host.State == CommunicationState.Created
                || _host.State == CommunicationState.Opening
                || _host.State == CommunicationState.Opened))
        {
            return;
        }

        _host = new ServiceHost(Instance);

        var binding = new NetNamedPipeBinding();
        var endpoint = Constants.ADDRESS_PIPE_SERVER;
        _host.AddServiceEndpoint((typeof (IManager)), binding, endpoint);
        _host.Open();
    }

    public static bool IsRunning()
    {
        var binding = new NetNamedPipeBinding();
        var endpointAddress = new EndpointAddress(Constants.ADDRESS_PIPE_SERVER);
        var factory = new ChannelFactory<IManager>(binding, endpointAddress);
        IManager managerChannel = null;
        try
        {
            managerChannel = factory.CreateChannel();
            // wait for server to respond
            if (_host != null && _host.State == CommunicationState.Opened)
            {
                var contextChannel = managerChannel as IClientChannel;
                if (contextChannel != null) contextChannel.OperationTimeout = TimeSpan.FromMilliseconds(1000);
            }
            try
            {
                managerChannel.GetState();
            }
            catch (Exception)
            {
                return false;
            }
            return true;
        }
        catch (EndpointNotFoundException e)
        {
            return false;
        }
        finally
        {
            Helper.CloseChannel((ICommunicationObject) managerChannel);
        }
    } 
```

其他：

```
internal static class Helper
{
    public static void CloseChannel(ICommunicationObject channel)
    {
        try
        {
            if (channel.State == CommunicationState.Opened) channel.Close();
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex);
        }
        finally
        {
            channel.Abort();
        }
    }

    public static string GetClientAddress(object serviceAddress)
    {
        return string.Format(Constants.ADDRESS_PIPE_CLIENT_FORMAT, serviceAddress);
    }
}

internal static class Constants
{
    internal static string ADDRESS_PIPE_SERVER = @"net.pipe://localhost/Server";
    internal static string ADDRESS_PIPE_CLIENT_FORMAT = @"net.pipe://localhost/Client_{0}";
} 
```

最后，测试：

```
private void ActionLoaded(object sender, RoutedEventArgs e)
    {
        Manager.Start();
    }

    private void ActionConnectedSelf(object sender, RoutedEventArgs e)
    {
        var client = new Child();
        client.Open();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:48:41.597

我喜欢这样构建我的 WCF 解决方案：

**Contracts**（类库）
包含所有服务、操作、故障和数据合同。可以在纯 .NET-to-.NET 场景中的服务器和客户端之间共享

**服务实现**（类库）
包含实现服务的代码，以及实现此功能所需的任何支持/帮助方法。没有其他的。

**服务主机（**可选 - 可以是 Winforms、控制台应用程序、NT 服务）
包含用于调试/测试或可能还用于生产的服务主机。

这基本上给了我服务器端的东西。

在客户端：

**客户端代理**（类库）
我喜欢将我的客户端代理打包到一个单独的类库中，以便它们可以被多个实际客户端应用程序重用。这可以使用 svcutil 或“添加服务引用”并手动调整生成的可怕的 app.config 来完成，或者通过使用`ClientBase<T>`或`ChannelFactory<T>`构造手动实现客户端代理（当共享合同程序集时）。

**1-n 个实际客户端**（任何类型的应用程序）
通常只会引用客户端代理程序集，或者如果正在共享，也可能引用合约程序集。这可以是 ASP.NET、WPF、Winforms、控制台应用程序、其他服务 - 你可以命名它。

那样; 我有一个漂亮而干净的布局，我一遍又一遍地使用它，我真的认为这让我的代码更干净，更容易维护。

[这是由 Miguel Castro 与 Carl Franklin 在 DotNet Rocks TV 上的Extreme WCF 屏幕投射](http://www.dnrtv.com/default.aspx?showNum=122)的启发- 强烈推荐的屏幕投射！

# c++ - 字符串和 fstream 的问题

> ID：10509839
> 
> 赞同：1
> 
> 时间：2012-05-09T04:26:34.373
> 
> 标签：c++, simulation, fstream

我目前正在做一个项目，我需要实现几个类来模拟自助餐厅。每个在线等待取餐的“学生”都有 5 个变量来描述他们，即：**姓名、组别、主菜类型、零食/甜点类型，以及一个代表他们计划购买的沙拉数量（以盎司为单位）的数字。**这个想法是，所有这些信息都将使用 fstream 从文本文件中读取（大纲遵循特定顺序并为每个学生重复）。读完每个学生后，我将学生推到队列中，以模拟他们排队等候。

我的问题是两件事，首先，当使用**getline()**函数读取每一行时，我尝试将此行存储在一个临时变量中，以便将其插入到学生类的构造函数中，然后将该副本推送到队列。这似乎是不允许的，因为当我尝试存储信息时，它会显示“没有运算符 '=' 与这些操作数匹配”。

我遇到的另一个问题是读取沙拉的盎司值，这是一个整数值，我已经搜索过，但我没有找到任何方法可以直接读取数值并将其传递给整数变量。很抱歉解释冗长，但我想确保我清楚，任何帮助表示赞赏。

这是我尝试执行此操作的代码的一部分：

```
string temp_name;
string temp_group;
string temp_entree;
string temp_snack;
int temp_salad;

string line2;
queue<student> line;
ifstream myfile ("students.txt");
if(myfile.is_open())
    while(myfile.good())
    {
        temp_name= getline(myfile, line2);
        temp_group= getline(myfile, line2);
        temp_salad= getline(myfile, line2);
        temp_entree= getline(myfile, line2);
        temp_snack= getline(myfile, line2);

student s(temp_name, temp_group, temp_entree, temp_snack, temp_salad);
    //..... 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:34:24.110

getline 不返回字符串，因此您不应该尝试将返回值分配给字符串。

做：

```
getline(myfile, temp_name); 
```

代替

```
temp_name = getline(myfile, line2); 
```

* * *

要读取文件中的下一个整数，请使用流输入运算符：

```
int temp_salad;
myfile >> temp_salad;
if (myfile.fail())
    std::cerr << "we failed to read temp_salad ounces\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:39:32.183

[`getline()`](http://www.cplusplus.com/reference/string/getline/)return `istream&`，这只是从中提取行后的第一个参数。它将该行读入第二个参数（`line2`在您的示例中）。所以，它应该看起来像这样：

```
getline(myfile, name);
getline(myfile, group);
// ... 
```

此外，`getline`读入字符串，因此您需要将该字符串转换为整数，然后再将其存储在`temp_salad`. 有几种方法可以做到这一点，其中最简单的是

```
getline(myfile, temp);
salad = atoi(temp.c_str()); 
```

只要确保`#include <cstdlib>`在该文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:43:39.847

您可以使用`operator>>`从输入中读取整数并将其放入变量中，如：`myfile >> my_int;`.

由于您显然已将其定义`student`为一个班级，因此我会`operator>>`为该班级重载以读取学生的所有数据：

```
std::istream &operator>>(std::istream &is, student &s) { 
    std::getline(is, s.name);
    std::getline(is, s.group);
    std::getline(is, s.entree);
    std::getline(is, s.snack);
    std::string temp;
    std::getline(is, temp);
    s.salad = lexical_cast<int>(temp);    
    return is;
} 
```

然后我们可以使用该运算符读入`student`对象 - 直接在循环中，就像你上面那样，或者间接地，例如通过`istream_iterator`对该类型的实例化，例如：

```
std::deque<student> line((std::istream_iterator<student>(infile)),
                          std::istream_iterator<student>()); 
```

请注意，在这种情况下，我使用的是双端队列而不是实际的队列——在 C++ 中，队列被定义为迭代器适配器，并且通常是一种二等公民。`std::deque`通常（包括这种情况）更简单，即使您不需要`double-ended`其定义的一部分。

# c# - Docx 内容替换

> ID：10509841
> 
> 赞同：2
> 
> 时间：2012-05-09T04:26:57.957
> 
> 标签：c#, replace, openxml, docx

```
using (WordprocessingDocument wordDoc = 
       WordprocessingDocument.Open(document, true))
{
    string docText = null;
    using (StreamReader sr = 
           new StreamReader(wordDoc.MainDocumentPart.GetStream()))
    {
        docText = sr.ReadToEnd();
    }

    Regex regexText = new Regex("@@username@@");
    docText = regexText.Replace(docText, "john thomas ");

    using (StreamWriter sw = 
           new StreamWriter(wordDoc.MainDocumentPart.GetStream(FileMode.Create)))
    {
        sw.Write(docText);
    }
} 
```

这应该用代码中的名称替换 doctext 上的匹配项。我检查了 doctext 并且要替换的单词 ( `@@username@@`) 被拆分了。有时在 `@@`和之间存在 XML 内容`username@@`。有时这个词本身是畸形的。

我该如何更换`@@username@@`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:54:24.790

一个简单的解决方法是将标签放在文本框或表格中（甚至可能带有预先指定的 id）。我不确定文档中是否还有其他表格或文本框，但是获取表格中的内容或文档中唯一的文本框内的内容真的很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T05:12:46.487

如果你在 Paragraph 对象中有代码，那么你可以做这样的事情（一个糟糕的 Order n^2 解决方案 ....）：

```
foreach (Paragraph para in wordprocessingDocument.MainDocumentPart.Document.Descendants<Paragraph>()) 
{
    foreach(Run r in para.Elements<Run>()) 
    {
          if (r.Elements<text>().ElementAt(0).Text.Equals(string_to_search)) 
              r.Elements<Text>().ElementAt(0).Text = string_to_insert;
    }
} 
```

另外，请查看 MSDN [http://msdn.microsoft.com/en-us/library/office/ff478255.aspx](http://msdn.microsoft.com/en-us/library/office/ff478255.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T20:44:34.823

您可以更改正则表达式。（这将包括所有 XML，但会被替换）

```
New Regex("@@.*?username.*?@@") 
```

操作代码是 MSDN 上记录的解决方案： [https ://msdn.microsoft.com/en-us/library/office/bb508261.aspx](https://msdn.microsoft.com/en-us/library/office/bb508261.aspx)

如果您用不同的名称替换多个字段，您可以尝试在您的阅读器和作者之间调用此函数：

```
 Private Function ReplaceMatches(ByVal text As String) As String
        Dim Matches = Regex.Matches(text, "@@.*?@@")
        For Each m As Match In Matches
            For Each c As Capture In m.Captures
                If Not String.IsNullOrEmpty(c.Value) Then
                    text = text.Replace(c.Value, "NEW-VALUE")
                End If
            Next
        Next
        Return text
    End Function 
```

# ios - 使用默认单元格值加载一次视图后如何更新 UITableView 单元格（cell.detailTextLabel.text）的值

> ID：10509843
> 
> 赞同：0
> 
> 时间：2012-05-09T04:27:13.530
> 
> 标签：ios, uitableview

我有一个 TableViewController，在运行时动态添加了 5 个单元格。单元格的初始值（cell.detailtext.text）是所有单元格的默认值。现在一旦 viewDidLoad 完成，甚至完成： (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath，现在我需要根据某些条件在运行时更新单元格值。以后如何更新单元格值？

简而言之，我需要在 IOS 的一个函数中实现以下算法

对于 tableView 的每个单元格

cell.detailtext.text = @"新值"

或者

函数（）{

单元格 = 索引处的单元格（传递给函数）

cell.detailtext.text = @“新值”（传递给函数）

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:38:44.200

当您更新 UITableView 的数据源时，您需要调用`reloadData`

但这会更新整个表格并有两个问题：

1）如果您有一个大表并且您只更改一个值，那么它的开销很大

2）如果您正在为更新（添加或删除）制作动画，这可能会使您的设备因大量数据而滞后

检查类参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

或者，如果您只是更新单个单元格，请尝试调用

```
reloadRowsAtIndexPaths:withRowAnimation: 
```

它在性能方面要好得多，但有一些限制，例如如果您要添加大量数据，则无法应用。

我可以进入更多的情况和细节，但那将超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:31:01.473

您必须通过为表格视图提供数组值来修改数据。然后你必须使用

**[tableView 重载数据]**

tableview中更新数据的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T09:26:11.763

使用该方法修改需要显示的值

```
reloadRowsAtIndexPaths:withRowAnimation: 
```

这会重新加载表格视图中的特定单元格。

# .net - HTML5 Websocket 连接到 Windows .NET 服务器，但没有收到 WebSocket.onopen 通知。

> ID：10509844
> 
> 赞同：0
> 
> 时间：2012-05-09T04:27:24.903
> 
> 标签：.net, html, client, websocket

下面是简单的服务器代码

```
// Webserver1.cpp : Defines the entry point for the application.
//

#include "stdafx.h"
#include "Webserver1.h"
#ifndef UNICODE
#define UNICODE
#endif

#define WIN32_LEAN_AND_MEAN

#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>

// Need to link with Ws2_32.lib
#pragma comment(lib, "ws2_32.lib")

#define MAX_LOADSTRING 100

// Global Variables:
HINSTANCE hInst;                                // current instance
TCHAR szTitle[MAX_LOADSTRING];                  // The title bar text
TCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name

// Forward declarations of functions included in this code module:
ATOM                MyRegisterClass(HINSTANCE hInstance);
BOOL                InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: Place code here.
    MSG msg;
    HACCEL hAccelTable;

    // Initialize global strings
    LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
    LoadString(hInstance, IDC_WEBSERVER1, szWindowClass, MAX_LOADSTRING);
    MyRegisterClass(hInstance);

    // Perform application initialization:
    if (!InitInstance (hInstance, nCmdShow))
    {
        return FALSE;
    }

    hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_WEBSERVER1));

    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return (int) msg.wParam;
}

//
//  FUNCTION: MyRegisterClass()
//
//  PURPOSE: Registers the window class.
//
//  COMMENTS:
//
//    This function and its usage are only necessary if you want this code
//    to be compatible with Win32 systems prior to the 'RegisterClassEx'
//    function that was added to Windows 95\. It is important to call this function
//    so that the application will get 'well formed' small icons associated
//    with it.
//
ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_WEBSERVER1));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_WEBSERVER1);
    wcex.lpszClassName  = szWindowClass;
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
}

//
//   FUNCTION: InitInstance(HINSTANCE, int)
//
//   PURPOSE: Saves instance handle and creates main window
//
//   COMMENTS:
//
//        In this function, we save the instance handle in a global variable and
//        create and display the main program window.
//
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;

   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

   if (!hWnd)
   {
      return FALSE;
   }

   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   return TRUE;
}

//
//  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)
//
//  PURPOSE:  Processes messages for the main window.
//
//  WM_COMMAND  - process the application menu
//  WM_PAINT    - Paint the main window
//  WM_DESTROY  - post a quit message and return
//
//

int ServerThread(LPVOID param)
{
    //----------------------
    // Initialize Winsock.
    WSADATA wsaData;
    int iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != NO_ERROR) {
        wprintf(L"WSAStartup failed with error: %ld\n", iResult);
        return 1;
    }
    //----------------------
    // Create a SOCKET for listening for
    // incoming connection requests.
    SOCKET ListenSocket;
    ListenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (ListenSocket == INVALID_SOCKET) {
        wprintf(L"socket failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }
    //----------------------
    // The sockaddr_in structure specifies the address family,
    // IP address, and port for the socket that is being bound.
    sockaddr_in service;
    service.sin_family = AF_INET;
    service.sin_addr.s_addr = inet_addr("127.0.0.1");
    service.sin_port = htons(27015);

    if (bind(ListenSocket,
             (SOCKADDR *) & service, sizeof (service)) == SOCKET_ERROR) {
        wprintf(L"bind failed with error: %ld\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }
    //----------------------
    // Listen for incoming connection requests.
    // on the created socket
    if (listen(ListenSocket, 1) == SOCKET_ERROR) {
        wprintf(L"listen failed with error: %ld\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }
    //----------------------
    // Create a SOCKET for accepting incoming requests.
    SOCKET AcceptSocket;
    wprintf(L"Waiting for client to connect...\n");

    //----------------------
    // Accept the connection.
    AcceptSocket = accept(ListenSocket, NULL, NULL);
    if (AcceptSocket == INVALID_SOCKET) {
        wprintf(L"accept failed with error: %ld\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    } else
        wprintf(L"Client connected.\n");

    char *sendbuf = "Client: sending data test";
    char recvbuff[1024];
    int dwBytesWrite;
/*

        dwBytesWrite = recv(AcceptSocket,recvbuff , (int)sizeof(recvbuff), 0);
       if (SOCKET_ERROR == dwBytesWrite )
       {
            printf("rev failed with error: %d\n", WSAGetLastError());
            closesocket(ListenSocket);
            WSACleanup();
            return -1;

       }
*/
        dwBytesWrite = send(AcceptSocket,sendbuf , (int)strlen(sendbuf), 0);
       if (SOCKET_ERROR == dwBytesWrite )
       {
            printf("rev failed with error: %d\n", WSAGetLastError());
            closesocket(ListenSocket);
            WSACleanup();
            return -1;

       }
    // No longer need server socket
    closesocket(ListenSocket);

    WSACleanup();
    return 0;
}
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;
    DWORD dwThreadId;
    HANDLE dispthread;

    switch (message)
    {
    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        // Parse the menu selections:
        switch (wmId)
        {
        case IDM_ABOUT:
            DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
            break;
        case ID_FILE_STARTSERVER:
            dispthread=CreateThread(NULL,0,LPTHREAD_START_ROUTINE(ServerThread),NULL,0,&dwThreadId);
            break;
        case IDM_EXIT:
            DestroyWindow(hWnd);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        break;
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        // TODO: Add any drawing code here...
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// Message handler for about box.
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        return (INT_PTR)TRUE;

    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
} 
```

这是 HTML5 客户端代码

```
<!DOCTYPE html>
<html>
<script type="text/javascript">
function WebSocketTest()
{
  if ("WebSocket" in window)
  {
     alert("WebSocket is supported by your Browser!");
     // Let us open a web socket
     var ws = new WebSocket("ws://127.0.0.1:27015/echo");
     ws.onopen = function(evt)
     {
     alert("Message i11111");
        // Web Socket is connected, send data using send()
        ws.send("Message to send");
        alert("Message is sent...");
     };
     ws.onmessage = function (evt) 
     { 
        var received_msg = evt.data;
        alert("Message is received...");
     };
     ws.onerror = function (evt) 
     { 
      //  var received_msg = evt.data;
        alert("ERROR...!!");
     };
     ws.onclose = function()
     { 
        // websocket is closed.
        alert("Connection is closed..."); 
     };
  }
  else
  {
     // The browser doesn't support WebSocket
     alert("WebSocket NOT supported by your Browser!");
  }
}
</script>
<head>
</head>
<body>
<div id="sse">
   <a href="javascript:WebSocketTest()">Run WebSocket</a>
</div>
<canvas id="myCanvas" width="1000" height="500" style="border:3px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>
</body>
</html> 
```

在调试时，我发现客户端连接被服务器接受，但客户端没有收到 onopen 通知，但收到了 onclose 通知，可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:54:43.983

客户端的WebSocket只有在双方进行握手并且成功时才会抛出onopen事件。当 WebSocket 连接到服务器时，它会发送包含一些详细信息的 HTTP 开放握手行。它包含重要信息，服务器应根据来自客户端的数据生成 HTTP 开放握手答案。尤其是来自客户端的密钥，必须进行处理并生成答案密钥。握手完成并通过验证后，“onopen”事件将在客户端触发，客户端可以在此之后发送消息，服务器也是如此。否则在一些超时后客户端会抛出 onerror 和 onclose 并且浏览器会强制断开套接字。

查看官方规范[RFC 6455，第 1.3 节](https://www.rfc-editor.org/rfc/rfc6455#page-6)

# java - “子方法”中的局部变量

> ID：10509846
> 
> 赞同：2
> 
> 时间：2012-05-09T04:27:33.263
> 
> 标签：java, scope

这是我的代码：

```
public void viewFlight() {
  int select;
  String option;
  String newOrigin = null;
  viewFlightOrigin();
}

public void viewFlightOrigin() {
  option = console.nextLine();
  switch (select) {
    case 1:
      System.out.println("=======================================");
      System.out.println("city of origin: Melbourne");
      System.out.println("=======================================");
      newOrigin = "Melbourne";
      break;

    // ...
  }
} 
```

如何在不声明字段中的变量或在字段中重新声明的情况下`viewFlight()`再次使用中的局部变量？`viewFlightOrigin()``viewFlightOrigin()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:30:32.270

如果您需要在两个不同的方法中使用和修改相同的“变量”，那么它们不能是局部变量，它们是类的实例*属性*。

或者，您可以将它们作为参数传递给`viewFlightOrigin()`，只需记住，在方法返回到 后，对内部变量的任何修改`viewFlightOrigin()`都将*不*`viewFlight()`可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:32:45.570

如果您不需要*修改*变量，最简单的方法是将其作为参数传递给函数：

```
viewFlightOrigin(newOrigin);

public void viewFlightOrigin(String option) {
    // ...
} 
```

如果需要修改变量，可以从方法中返回新值：

```
newOrigin = viewFlightOrigin(origin);

public String viewFlightOrigin(String option) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:34:32.370

```
1.
public void viewFlight()
{
  .....
  viewFlightOrigin(option);
  ....
}

2.declare a instance field then it's not a local variable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T04:35:39.537

使用参数：

```
public void viewFlight() {
    int select;
    String option;

    viewFlightOrigin(select, option);
}

public void viewFlightOrigin(int select, String option) {...} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T05:14:25.300

只有实例变量在不同的方法中可用。局部变量具有范围，直到该方法不在该方法之外。

# security - 当您决定返回 403 时，始终返回 404

> ID：10509849
> 
> 赞同：17
> 
> 时间：2012-05-09T04:27:57.290
> 
> 标签：security, http, .htaccess, http-status-code-403

这里已经发布了几个关于在特殊情况下返回 404 而不是 403 的问题（例如，.ht* 文件或某个目录），但我不知道如何简单地替换**所有**403 响应（“好的，它存在，但您仍然必须找到一种方法进入“）与 404（“抱歉，从未听说过”）。我希望有一个简单的解决方案，不需要更新 .htaccess 的正则表达式或其他位以匹配站点更改，只需一个简单的指令：“每当您决定返回 403 时，就返回 404”适用到整个站点，无论配置更改如何。

然后，如果顶级 .htaccess 包含“Options -Indexes”，并且任何给定目录不包含 index.html（或等效），那么裸目录 URL 将返回 404，但如果我将 index.html 添加到该目录，相同的裸目录 URL 将返回 index.html，无需对任何 .htaccess 文件进行更新。

我什至不在乎，如果我曾经为目录输入密码，错误的密码是否会返回 404（因为 404 -> 403 映射）。在这种情况下，我不会通过返回 404 来隐藏任何内容，但这也不会造成任何伤害。但是，如果有一种方法可以撤消针对特殊情况的一般 403->404 映射（而不是针对特殊情况执行此操作），那可能会更有用。

当然，如果我忽略了什么，请让我直截了当。

编辑：德拉特。我试图在这里写一个高质量的问题，但我在第二段中对“Options -Indexes”行为的描述结果是错误的。没有该行，如果目录中存在裸目录 URL，则会显示“index.html”；否则，它会显示目录的内容。（如果 index.html 存在，则 /dir 到 /dir/index.html 的转发是 Web 主机的默认设置，除非我弄错了。）添加“Options -Indexes”行会阻止它在公共场合晾晒我的衣服（返回 403，而不是 404，但仍然比公开目录内容更好），但现在即使 index.html 存在，裸目录 URL 也会返回 403。

我希望裸目录 URL“mysite.com/mydir”如果存在则显示 /mydir/index.html，如果不存在则显示“404”，但显然它不仅仅是用 404 替换 403。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-14T21:34:49.750

要在此处完成更好的答案之一（如@WebChemist 和@JennyD 所述），解决此问题的一个好方法是`404 Not Found`从您用于处理`403`错误的文档中返回。就我个人而言，我会执行以下操作：

### `.htaccess`在网络根目录（*相关摘录*）：

```
ErrorDocument 400 /http-errors.php
ErrorDocument 403 /http-errors.php
ErrorDocument 404 /http-errors.php 
```

### `http-errors.php`在 Web 根目录中（*精简的工作示例*）：

```
<?php

$status = $_SERVER['REDIRECT_STATUS'];
// If it's a 403, just bump it up to a 404
if ( $status == 403 ) $status++;

$codes = array(
  400 => array( '400 Bad Request', 'The request cannot be fulfilled due to...' ),
  404 => array( '404 Not Found', 'The resource you requested was not found...' ),
  500 => array( '500 Internal Server Error', 'The request was unsuccessful...' )
);

$title = $codes[$status][0];
$message = $codes[$status][1];

header( $_SERVER['SERVER_PROTOCOL'] . ' ' . $title );
echo "<h1>$title</h1>\n<p>$message</p>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T04:47:33.467

你可以很容易地做一个假的 403 -> 404

```
ErrorDocument 403 /404.php 
```

其中 404.php 是您格式化的 404 响应页面，但仍会在响应标头中返回 403。如果要返回 404 标头，可以使用返回 404 代码的标头重定向制作 403 页面，但重定向可能仍然可见....

不确定您是否可以用纯 .htaccess 进行全面的 403->404 替换

**编辑：**

玩了一下，您可以尝试 2 种纯 .htaccess 方法：

1）使任何以斜杠结尾的网址重定向到索引页面，例如：

`RewriteRule ^(.*)/$ /$1/index.php [NC,L]`

因此，如果您确实有索引页面，它将显示，但如果没有，它将在缺少索引页面请求时显示 404。如果您省略 [R]，则该 url 仍将显示为 / 非 index.php 规范的 SEO 友好 url :) 不能说这不会在其他地方造成问题..

2)

在重写规则中，您可以使用 r=404 返回 404 代码。

`RewriteRule ^(.*)/$ - [R=404, NC,L]`

但是 `RewriteCond %{REQUEST_FILENAME} !-f` 或 `RewriteCond %{REQUEST_FILENAME} -d`

没有帮助，这意味着即使存在索引页面，所有尾随斜杠也会 404。您可以通过在其他 RewriteCond 规则中指定要保护（或忽略）的文件夹来解决此问题，但这并不完全是“自动的”，因为您必须添加 RewriteCond 规则，因为更多文件夹被添加到保护|忽略

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T16:57:39.070

这是我的 .htaccess 文件中的一个片段，该文件位于我已阻止但允许从 LAN 机器访问的目录中。每次都返回 404 错误！！

```
# Turn rewrite engine on
RewriteEngine on
RewriteOptions Inherit

# Make it for a specific directory
# RewriteBase /phpMyAdmin 

# Block everyone except me
RewriteCond %{REMOTE_HOST} !^192.168.2
RewriteRule .? - [R=404,L] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T04:44:45.197

据我所知，没有这样简单的指令。它仍然是可能的，但它比你可能想要的要复杂一些。

您可以使用 ErrorDocument 指令将 403 响应设置为脚本，然后让该脚本以 404 响应而不是 403 响应来响应。[apache.org](http://httpd.apache.org/docs/2.2/custom-error.html)上有一些提示可能会有所帮助

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T17:59:33.937

即使可能没有全面的方法来获取 403 错误来报告 404 错误，但仍有希望。

我怀疑您真正想要的是确保 /~root （以及任何其他现有的非 HTTP 用户）不会返回 403，而是返回 404。

Apache 中的 UserDir 指令按设计返回 403。我认为目前无法改变。但是 - 'UserDir' 指令可以在同一个 Apache 文件中多次使用，如下所示：

UserDir public_html UserDir 禁用 root someuser1 someuser1

该配置将允许使用 UserDir，但也会向所有试图在您的系统周围嗅探的人报告珍贵的 404 响应标头。

我从以下链接中找到了这个提示：

[http://www.if-not-true-then-false.com/2010/enable-apache-userdir-with-selinux-on-fedora-centos-red-hat-rhel/](http://www.if-not-true-then-false.com/2010/enable-apache-userdir-with-selinux-on-fedora-centos-red-hat-rhel/)

我自己在 Apache 2.2.15 下的 RHEL 6.3 中对其进行了测试，并且它可以工作——即使在使用 curl 之类的东西进行测试时也是如此。我也在寻找解决方案。终于找到了我可以使用的东西！

# memory-management - 如何从 Linux 内核访问用户空间内存？

> ID：10509850
> 
> 赞同：10
> 
> 时间：2012-05-09T04:27:58.950
> 
> 标签：memory-management, linux-kernel

我知道`copy_to_user`/ `copy_from_user`, `get_user`/`put_user`函数就是为此目的。

我的问题是，给定用户空间地址/指针，我一般如何访问内核地址指向的数据？

我可以想象，首先我必须确保包含页面应该在物理内存中（而不是在磁盘中）。

你下一步怎么做？我可以使用指向某些用户空间数据的指针`*p`在哪里直接引用数据吗？`p`

还是我必须先调用`kmap`以将包含的物理页框映射到内核虚拟地址空间？为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:42:58.037

您可能会发现这很有用。

> 让我们重复一遍，read 和 write 方法的 buff 参数是一个用户空间指针。因此，它不能被内核代码直接取消引用。这种限制有几个原因：
> 
> *   根据您的驱动程序运行的架构以及内核的配置方式，用户空间指针在内核模式下运行时可能根本无效。该地址可能没有映射，或者它可能指向其他一些随机数据。
>     
>     
> *   即使指针在内核空间中确实表示相同的意思，用户空间内存也是分页的，并且在进行系统调用时，所讨论的内存可能不会驻留在 RAM 中。尝试直接引用用户空间内存可能会产生页面错误，这是内核代码不允许做的事情。结果将是“哎呀”，这将导致进行系统调用的进程死亡。
>     
>     
> *   有问题的指针由用户程序提供，可能是错误的或恶意的。如果您的驱动程序曾经盲目地取消引用用户提供的指针，它提供了一个开放的入口，允许用户空间程序访问或覆盖系统中任何地方的内存。如果您不希望对损害用户系统的安全性负责，则永远不能直接取消引用用户空间指针。

来源： http: [//www.makelinux.net/ldd3/chp-3-sect-7](http://www.makelinux.net/ldd3/chp-3-sect-7)

也就是说，我自己很想知道如果用户空间地址确实有效会发生什么，并且上述条件都不适用......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T08:17:06.237

光有指针是不够的！您需要知道该指针“属于”哪个进程。

当进程被抢占时，指针指向另一个进程的地址空间。地址可能不再映射了，yadda yadda，

如果该进程将是您访问数据时的当前进程，那么您应该使用 copy_to_user/copy_from_user 函数。

如果进程可能被调度，您可以尝试 mlock() RAM 中的页面并找出该页面的物理 RAM 地址。每当您想访问它时，您将该物理页面映射到内核虚拟地址。

笔记：

*   恶意进程可以 munlock() 页面并诱使您访问错误的 RAM 页面。
*   我不确定 mlock() 语义是否要求下划线 RAM 页面不得更改。
*   内核应该能够将页面锁定到 RAM 中，我不熟悉 mm 子系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T16:15:17.180

不同的用户空间应用程序有不同的页表。

1.  您需要获取用户空间程序 pid。
2.  在 pid 的页表中搜索地址。

下面是将用户空间虚拟地址转换为物理地址的示例代码。它适用于 x86 平台。

```
taskpid = find_get_pid(curpid);
task = pid_task(taskpid, PIDTYPE_PID );
mm = get_task_mm(task);
down_read(&mm->mmap_sem);

start_vaddr = vaddr;
end_vaddr = 0xC0000000;

while( start_vaddr < end_vaddr){
    u32 end;

    end = (( start_vaddr + PMD_SIZE) & PMD_MASK);

    if( end < start_vaddr || end > end_vaddr)
        end = end_vaddr;

    ret = walk_pgd(start_vaddr, end, mm);
    if(ret != 0){
        printk("ret: %08x \n", ret);
        break;
    }

    start_vaddr = end;

}

up_read(&mm->mmap_sem);

paddr = ret;
kaddr = __va(paddr);
mmput(mm); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:44:52.180

您需要`follow`一个地址来获取相应的`page`结构（请参阅[follow_page](http://lxr.linux.no/linux+v3.3.5/mm/memory.c#L1451)的示例）。接下来，获取`page`结构体，您需要通过`kmap`or将其映射到内核的地址空间`kmap_atomic`。

# iphone - 启动书签时阻止显示 iPhone Safari 导航栏

> ID：10509857
> 
> 赞同：1
> 
> 时间：2012-05-09T04:28:46.483
> 
> 标签：iphone, web-applications, safari

我有一个 HTML+CSS 移动网站（不是真正的应用程序），它应该看起来尽可能像一个真正的网站。一旦网站主屏幕被添加书签，它就会出现减去底部导航栏，**这是所需的结果**，但是我的理解是，如果用户导航到网站内的另一个页面，导航栏将出现（从技术上讲，它是从嵌入式切换webkit 到 Safari）。

我的问题是这种解释是否正确，如果是，AJAX 是防止它的唯一方法吗？我可以在不启动 Safari 的情况下加载帧/iframe 中的内容吗？我可以改变`window.location`或其他一些技巧吗？

我的基本问题是 webapp 是使用 jQuery mobile 设计的，它似乎可以为您处理这些问题，但是该库很难使用，有一些奇怪的 CSS 缓存问题，并且似乎破坏了 jQuery Tools “可滚动”插件。我想要一种更“低级”的方法，而不是另一个框架或工具包。作为一个真正的“应用程序”现在也不是一个选择。

请注意，对于这个 web 应用程序，没有必要使用 safari 工具栏。在这一点上，该站点已经被添加了书签，并且导航非常简单，可以消除对后退/前进按钮的需求。请不要评论它的可用性，从主屏幕启动后导航栏保持隐藏是该项目的基本要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:40:18.687

After testing it turns out the solution is changing `<A>` tags as follows:

`<a href="/url">`

... to ...

`<a onclick="window.location='/url'">`

The HREF must be removed completely. Even a link to a named anchor like `href="#top"` is enough to trigger Safari and I suspect even `href=""` is too much.

# java - 如何转义 XML 空值？

> ID：10509860
> 
> 赞同：-2
> 
> 时间：2012-05-09T04:28:50.317
> 
> 标签：java, xml, null, escaping

我有这个问题。我有一个 XML 数据，但不是 .xml 格式。

我需要根据关键字显示结果进行搜索，然后以 xml 格式返回值。但是，有些节点不包含任何值（空值）。我如何逃避这个价值？

我想显示只有值的节点（非空节点）。谢谢。

这是我的代码。我是java编程的初学者。我需要尽可能多的帮助。谢谢大家！

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(result));
                Document doc = db.parse(is);
                NodeList nodes = doc.getElementsByTagName("DOCUMENT");

                // iterate the DOCUMENT                
                out.println("<table border='0'>");
                int index_location=nodes.getLength()+1;
                for (int i = 0; i < nodes.getLength(); i++) {

                    locations_array+="[";

                    Element element = (Element) nodes.item(i); 

                    NodeList IDS = element.getElementsByTagName("IDS");
                    Element line = (Element) IDS.item(0);
                    out.println("<tr><td>Company ID :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList FULL_NAME = element.getElementsByTagName("FULL_NAME");
                    line = (Element) FULL_NAME.item(0);
                    out.println("<tr><td>Company Name :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");
                    locations_array+="'"+getCharacterDataFromElement(line)+"',";

                    NodeList AD_WEIGHT = element.getElementsByTagName("AD_WEIGHT");
                    line = (Element) AD_WEIGHT.item(0);
                    out.println("<tr><td>AD_WEIGHT :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList MAP = element.getElementsByTagName("MAP");
                    line = (Element) MAP.item(0);
                    out.println("<tr><td>Longitude and Latitude :</td><td>");

                    if (getCharacterDataFromElement(line)!="No data provided."){
                        String st = getCharacterDataFromElement(line);
                        String str[] = st.split(":", 2);
                        String latlong;
                        latlong = str[1];
                        out.println(latlong);
                        locations_array+="'"+latlong+"',";
                    }else{
                        out.println("No data provided.");
                        locations_array+="'0,0',";
                    }

                    out.println("</td></tr>");

                    NodeList STATE = element.getElementsByTagName("STATE");
                    line = (Element) STATE.item(0);
                    out.println("<tr><td>State :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList CITY = element.getElementsByTagName("CITY");
                    line = (Element) CITY.item(0);
                    out.println("<tr><td>City :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList ADDRESS = element.getElementsByTagName("ADDRESS");
                    line = (Element) ADDRESS.item(0);
                    out.println("<tr><td>Address :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList PHONE = element.getElementsByTagName("PHONE");
                    line = (Element) PHONE.item(0);
                    out.println("<tr><td>Phone No :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList CLASS_DESC = element.getElementsByTagName("CLASS_DESC");
                    line = (Element) CLASS_DESC.item(0);
                    out.println("<tr><td>CLASS_DESC :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList MAIN_CLASS = element.getElementsByTagName("MAIN_CLASS");
                    line = (Element) MAIN_CLASS.item(0);
                    out.println("<tr><td>Category :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList URL = element.getElementsByTagName("URL");
                    line = (Element) URL.item(0);
                    out.println("<tr><td>Website :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList EMAIL = element.getElementsByTagName("EMAIL");
                    line = (Element) EMAIL.item(0);
                    out.println("<tr><td>Email :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList DISPLAY_AD = element.getElementsByTagName("DISPLAY_AD");
                    line = (Element) DISPLAY_AD.item(0);
                    out.println("<tr><td>DISPLAY_AD :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList ADV_PATH = element.getElementsByTagName("ADV_PATH");
                    line = (Element) ADV_PATH.item(0);
                    out.println("<tr><td>ADV_PATH :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList SORT_NO = element.getElementsByTagName("SORT_NO");
                    line = (Element) SORT_NO.item(0);
                    out.println("<tr><td>SORT_NO :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    NodeList TOTAL_ADDRESS = element.getElementsByTagName("TOTAL_ADDRESS");
                    line = (Element) TOTAL_ADDRESS.item(0);
                    out.println("<tr><td>TOTAL_ADDRESS :</td><td>");
                    out.println(getCharacterDataFromElement(line));
                    out.println("</td></tr>");

                    out.println("<tr><td>&nbsp;</td><td>&nbsp;</td></tr>");

                    index_location--;
                    locations_array+="'"+index_location+"']";
                    //locations_array+=",";                    
                }
                out.println("</table>"); 
```

这是示例 xml

```
<DOCUMENT>
          <IDS>53850_WP</IDS>
          <FULL_NAME>xxx</FULL_NAME>
          <AD_WEIGHT>60</AD_WEIGHT>
          <MAP>1111:1.12344556,111.67890</MAP>
          <STATE>xxx xxx</STATE>
          <CITY>xxxx</CITY>
          <ADDRESS>123 xxx xxxx xxx</ADDRESS>
          <PHONE>12-12344551</PHONE>
          <CLASS_DESC>Banks</CLASS_DESC>
          <MAIN_CLASS>Banks</MAIN_CLASS>
          <URL>www.qwe.com</URL>
          <EMAIL>qwer@qwe.com</EMAIL>
          <DISPLAY_AD />
          <ADV_PATH />
          <SORT_NO>123</SORT_NO>
          <TOTAL_ADDRESS>123</TOTAL_ADDRESS>
          <INLINE_IMAGE />
          <E_PRODUCT />
          <FIELD1 />
        </DOCUMENT> 
```

从样本中，有空节点`<INLINE_IMAGE>`，如`<E_PRODUCT>`和`<FIELD1>`。我如何从结果页面中的显示中逃脱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:33:55.453

最好的方法是不为其添加任何文本值。例如，如果它是一个元素，则其值为`<Element/>`。请注意打开的标签会自行关闭。您可以阅读关于[nillable](http://www.w3schools.com/schema/el_element.asp)元素的信息，以防您需要为其构建模式定义 (XSD)。

另一方面，属性不支持可空类型。我个人的做法是根本不放置属性。在 XPath 表达式`\\Element[not(@value)]`中查找没有`value`属性的元素。这使您可以区分空字符串和空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:34:18.083

XML 没有 null 的概念，也没有如何转义它。在我看来，您有两个选择：

1.  遇到空值时省略输出标签和内容
2.  在您的 XML 模式中采用一些约定来表示空值。

# ajax - Rails 3 设计 Ajax 错误消息

> ID：10509862
> 
> 赞同：1
> 
> 时间：2012-05-09T04:29:22.003
> 
> 标签：ajax, ruby-on-rails-3, devise

所以我使用这个应用程序，[设计 ajax login](https://github.com/jni-/Rails3-devise-ajax-login)来进行 ajax 登录。

现在，当用户登录时，它由会话控制器处理，该控制器返回 401 或返回成功

```
class SessionsController < Devise::SessionsController

def create
  resource = warden.authenticate!(:scope => resource_name, :recall => "#{controller_path}#failure")
 sign_in(resource_name, resource)
 return render :json => {:success => true, :content => render_to_string(:layout =>  false, :partial => 'sessions/manager')}
end

def failure
  return render:json => {:success => false, :errors => ["Login failed."]}
 end
end 
```

有没有办法使用 ajax 插入 flash/devise 错误消息，说明用户登录失败的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:59:18.393

我真的不明白你的问题。你能稍微澄清一下吗？只是您已经很好地处理了登录的成功/失败并相应地返回了一条消息。

你要找的是这样的东西吗？

```
return render:json => {:success => false, :errors => [t("devise.failure.invalid")]} 
```

# ios - 脚本 Xcode：单击 AppleScript 中的菜单项而不激活窗口？

> ID：10509863
> 
> 赞同：5
> 
> 时间：2012-05-09T04:29:28.460
> 
> 标签：ios, xcode, applescript

我有一个简单的脚本，用于通过 XCode 以编程方式启动 iOS 项目：

```
on run project_loc
  tell application "Xcode"
    open project_loc
    activate
  end tell

  tell application "System Events"
    tell application process "Xcode"
      click menu item "Run" of menu 1 of menu bar item "Product" of menu bar 1
    end tell
  end tell
end run 
```

这很好用，除了它将焦点切换到 Xcode，这并不理想，因为我试图将其用作自动重新编译和重新启动以响应相关文件中的任何更改的方案的一部分。有没有什么方法可以在不关注 Xcode 窗口的情况下实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:35:45.037

# apache2 - apache2.4.2+resin-3.1.9

> ID：10509866
> 
> 赞同：0
> 
> 时间：2012-05-09T04:29:40.893
> 
> 标签：apache2, resin

为了创建 mod_caucho.so，我运行了树脂配置，当我执行 make 命令时，出现了一些错误：

```
/home/xsmapp/temp/resin-3.1.9/>make
(cd modules/c/src; make)
make[1]: Entering directory `/home/xsmapp/temp/resin-3.1.9/modules/c/src'
for dir in common apache2 resin resinssl resin_os; do (cd $dir; make); done
make[2]: Entering directory `/home/xsmapp/temp/resin-3.1.9/modules/c/src/common'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/home/xsmapp/temp/resin-3.1.9/modules/c/src/common'
make[2]: Entering directory `/home/xsmapp/temp/resin-3.1.9/modules/c/src/apache2'
EGREP="/bin/grep -E" /home/xsmapp/temp/resin-3.1.9/libtool --silent --tag=CXX --mode=compile gcc -o mod_caucho.lo -c -I/home/xsmapp/appserver/apache-2.4.2/include  -I/home/xsmapp/appserver/apr/include/apr-1  -DRESIN_HOME=\"/home/xsmapp/temp/resin-3.1.9\" -I../common -g -O2 -DPOLL -DEPOLL -D_POSIX_PTHREAD_SEMANTICS -DHAS_SOCK_TIMEOUT -DHAS_JVMTI -DHAS_JVMDI   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE  -g -O2 -pthread mod_caucho.c
***mod_caucho.c: In function `write_env':
mod_caucho.c:588: error: structure has no member named `remote_ip'
mod_caucho.c:590: error: structure has no member named `remote_ip'
mod_caucho.c:591: error: structure has no member named `remote_addr'***
mod_caucho.c: In function `caucho_request':
mod_caucho.c:896: error: structure has no member named `remote_ip'
make[2]: *** [mod_caucho.lo] 错误 1
make[2]: Leaving directory `/home/xsmapp/temp/resin-3.1.9/modules/c/src/apache2' 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:13:29.367

谢谢鸿腾。我必须找到一种成功编译的方法。

`vi resin-3.1.9\modules\c\src\apache2\mod_caucho.c`

在第 588 行 /*

```
 if (c->remote_host)
    cse_write_string(s, CSE_REMOTE_HOST, c->remote_host);
  else
    cse_write_string(s, CSE_REMOTE_HOST, c->remote_ip);

  cse_write_string(s, CSE_REMOTE_ADDR, c->remote_ip);
  sprintf(buf, "%u", ntohs(c->remote_addr->port)); 
```

*/

在第 856 行 `//ip = r->connection->remote_ip;`

那么你也能`create mod_caucho.so`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:41:01.023

可能是版本问题。Resin 3.1.* 适用于 Apache2.2。*，但不保证最新的Apache2.4。*

我用的是 Apache 2.2.22 + Resin3.1.8，没问题。

# tfs - 无法签入目标时如何丢弃 TFS 合并？

> ID：10509867
> 
> 赞同：0
> 
> 时间：2012-05-09T04:29:48.570
> 
> 标签：tfs, merge, checkin, locked

我要合并的分支中有一个配置文件被锁定，普通开发人员无法更改它，但我正在工作的分支需要它不同。所以现在我有一个包含那个文件的变更集。我想将其作为合并候选者从那里丢弃到另一个分支。当我`tf merge /discard`反对它时，我最终对目标进行了挂起的更改 - 但是当我尝试签入时，它抱怨目标已被管理员锁定以供签入（这就是我想丢弃的全部原因首先合并！）。我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:48:06.200

我不能保证这会奏效，但这是我会尝试的（我通常发现用简单的日常操作做事比试图找出你很少有机会尝试的晦涩选项更好）：

关闭锁定分支（A）上的保护，将分支B的合并操作应用到A，（如果您不想保留更改，则在合并期间，只需保持代码原样即可）。然后检查“合并”文件，即使它没有实际更改。然后恢复保护。

这应该使 TFS 认为它已经完成了合并并且结果已被签入（未丢弃），因此它不应再认为该文件未合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:45:20.573

Atario，看看我对[这个问题](https://stackoverflow.com/questions/9996136/exclude-a-config-file-from-the-merge-process/10011581#10011581)的回答。对于您的情况，如果您在目标分支（您正在执行合并的分支）中设置工作区以隐藏该文件，则它将不再显示为该工作区中的合并候选者。如果您不想从任何分支合并到该文件，我建议您将其从分支映射中拉出。

# text - Titanium Appcelerator：从本地应用程序的资源文件夹中读取 .txt 文件并在 Ti.UI.createScrollView 上显示内容

> ID：10509871
> 
> 赞同：0
> 
> 时间：2012-05-09T04:30:22.610
> 
> 标签：text, titanium, appcelerator

您能否发布一个 Titanium Appcelerator 的示例：从本地应用程序的资源文件夹中读取 .txt 文件并在 Ti.UI.createScrollView 上显示该文本文件的内容？

一个非常简单的例子。谢谢你。

```
var win = Titanium.UI.currentWindow;

.
.
.

win.add(scrollView1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:44:37.267

```
var f = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,'example.txt');
var contents = f.read();

Ti.API.info('Output text of the file: '+contents.text); 
```

这将为您提供文本。您不能简单地将文本放在滚动视图上，您​​需要一个标签/文本框等。将其中一个控件的值设置为上述打印输出。

这是 API 的链接，它包含所有方法和示例代码，您需要研究/了解您不能只要求您需要的一切。

还建议下载厨房水槽演示应用程序，因为它只是一个示例

# openmp - OpenMP 与向量化的比较

> ID：10509872
> 
> 赞同：2
> 
> 时间：2012-05-09T04:30:25.763
> 
> 标签：openmp, vectorization

给定一个示例函数（示例如下），for 循环可以使用 OpenMP 并行化，也可以使用矢量化进行矢量化（假设编译器进行矢量化）。

**例子**

```
void function(float* a, float* b, float* c, int n)
{
      for(int i = 0; i < n; i++)
      {
          c[i] = a[i] * b[i];
      }
} 
```

我想知道

1.  OpenMP 和 Vectorization 在性能上是否会有差异
2.  使用一个比另一个有什么优势。
3.  是否有可能同时使用 OpenMP 和矢量化。

**注意：**我没有给出不同的 SSE 版本、处理器/内核的数量（随着 OpenMP 中线程数量的增加）等......我的问题是一般性的。答案也可以更具体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:02:14.410

OpenMP 和矢量化*不是*相互竞争的技术，而是相互*增强*。矢量化可以提高具有矢量功能（SSE/3DNow!/Altivec/等）的 CPU 内核的串行性能，从而使每个线程运行得更快，而 OpenMP 可以使用多个可用内核来运行多个线程为了并行解决更大的问题。

总之：

*   矢量化串行应用程序通常比非矢量化串行应用程序运行得更快；
*   非向量化的 OpenMP 应用程序通常比非向量化的串行应用程序运行得更快（如果编写正确并且算法允许并行化）；
*   矢量化 OpenMP 应用程序通常比非矢量化 OpenMP 应用程序运行得更快，而非矢量化 OpenMP 应用程序通常比非矢量化串行应用程序运行得更快。

矢量化只是数据并行（对多个数据项应用相同的操作）并且在可能的最低硬件级别（核心/ALU）上工作，而 OpenMP 可以是数据和/或任务并行，并且是更高级别的抽象。

与往常一样，存在“它取决于”的论点，因为矢量化或 OpenMP 或矢量化+OpenMP 的性能可能取决于硬件、内存带宽、缓存使用等，等等，等等......

关于您的案例功能，这取决于向量有多大。如果它们太小，则使用 OpenMP 不会带来任何好处，甚至会因为开销而导致执行速度变慢。矢量化可能会改善执行时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T06:05:52.463

1.  是的。
2.  衡量，不要争论。
3.  是的。

# javascript - JS datepicker 能够：时间、日期、日期时间、星期几、一年中的星期、一年中的月份等

> ID：10509874
> 
> 赞同：1
> 
> 时间：2012-05-09T04:30:32.780
> 
> 标签：javascript, datepicker

我在寻找一个原生支持或可以轻松扩展以在各种“日期选择”模式下工作的 JavaScript 库，其中只选择相关的时间数据：

*   一天中的时间 = 20:00
*   日期 = 01/01/2020
*   日期时间 = 20:00 01/01/2010
*   星期几 = 星期一
*   一年中的第几周 = 20
*   一年中的月份 = 十月
*   年份 = 2010

请注意，对我来说更重要的是 UI 直观地传达了您选择一周而不是一天、一个月而不是日期时间等事实。解析相关数据是微不足道的。

有人知道任何远程能够实现我正在寻找的图书馆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:02:19.777

您应该查看[DateTimePicker](http://trentrichardson.com/examples/timepicker/)。它主要是 DatePicker 的一个扩展，它为挑选时间添加了各种附加选项。

这是不久前的问题链接，显示了[DatePicker 修改](https://stackoverflow.com/questions/2208480/jquery-date-picker-to-show-month-year-only)，它允许您仅选择月份和年份。

我认为只需修改 DatePicker 的选项，实际上可以实现很多您想要的。希望这至少能让您更好地了解如何修改原始小部件选项以满足您的要求。

# iphone - 使用 UIScrollView 显示照片，滚动到它时加载照片

> ID：10509883
> 
> 赞同：0
> 
> 时间：2012-05-09T04:31:57.153
> 
> 标签：iphone, objective-c, uiscrollview

我使用滚动视图来显示我的照片，我想知道如何实现当我滚动到照片然后加载它以节省内存的机制。谁能给我一些建议或相关材料？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:27:39.627

你可以自己做，使用

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

不要忘记定义你的滚动视图框架，这样分页就不会乱了

之后，如果滚动视图达到某个偏移量，则加载图像

代码看起来有点像这样：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y > 500) //for example if you choose to put your image in y:500
    {
        //load your images here you could load it in the main thread or use dispatch queue if you load it from web
    }
} 
```

通过这样做，当您向下滚动滚动视图 500 点时，它将加载您想要的图像。

这只是基本逻辑，你可以从这里开始做很多事情。我想说不要过分依赖开源 git，试着让事情按照你自己的方式工作。如果到那时你仍然不知道怎么做，那就去试试 git。但我建议学习代码是如何工作的，而不是仅仅为了它的作用而简单地使用它：3

编辑：您可能希望设置一种方法以在您滚动出图像等级以节省内存后从超级视图中删除图像，并设置一些布尔标志，以便图像不会加载两次或更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:34:25.180

你可以使用[SDWebImage](https://github.com/rs/SDWebImage) ，你不必担心缓存等

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

# iphone - 将 Xcode 应用程序添加到 Github

> ID：10509910
> 
> 赞同：0
> 
> 时间：2012-05-09T04:36:02.223
> 
> 标签：iphone, xcode, github

> **可能重复：**
> [在 XCode 4 中，如何将远程 GitHub 存储库添加到现有本地项目？](https://stackoverflow.com/questions/5803768/in-xcode-4-how-do-i-add-a-remote-github-repository-to-an-existing-local-project)

我想将在 Xcode 上创建的应用程序添加到 Github 中。我创建了存储库并通过 Xcode 成功提交了更改，但是当我将代码推送到存储库时，它显示以下消息：远程必须在线且可访问，推送操作才能成功。存储库已脱机。请给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:41:31.947

您是否在本地创建了 ssh 密钥并将其添加到您的 github 帐户？

以下是说明：

[http://help.github.com/mac-set-up-git/](http://help.github.com/mac-set-up-git/)

# python - 在 python 中强制执行副作用

> ID：10509916
> 
> 赞同：6
> 
> 时间：2012-05-09T04:36:33.293
> 
> 标签：python, functional-programming, code-analysis

是否有一种工具可以让您将函数/方法注释为“纯”，然后分析代码以测试所述函数/方法是否无副作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T04:45:06.963

在 Python 世界中，这个问题没有多大意义，因为对象对函数调用中发生的事情有很大的发言权。

例如，您如何判断以下函数是否为纯函数？

```
def f(x):
   return x + 1 
```

答案取决于*x*是什么：

```
>>> class A(int):
        def __add__(self, other):
            global s
            s += 1
            return int.__add__(self, other)

>>> def f(x):
        return x + 1

>>> s = 0
>>> f(A(1))
2
>>> s
1 
```

尽管函数*f*看起来很纯，但对*x的加法操作具有递增**s*的副作用。

# c++ - 使用 Magick++ 加载 ICC 配置文件

> ID：10509921
> 
> 赞同：0
> 
> 时间：2012-05-09T04:38:26.590
> 
> 标签：c++, imagemagick, magick++, color-profile, color-management

这是我的代码：

```
Blob rgbBlob;
ifstream LoadFile;
Image profile_test("sRGB.icc");
profile_test.write(&rgbBlob);
jpg_src.profile("ICC",rgbBlob); 
```

我正在尝试加载 ICC 文件并调整大小，但我不能。相反，我收到了这个错误：

```
terminate called after throwing an instance of 'Magick::WarningMissingDelegate'
  what():  Magick: DelegateLibrarySupportNotBuiltIn `5orig.jpg' (LCMS) @ warning
/profile.c/ProfileImage/5743
      1 [sig] scale_image 2052 open_stackdumpfile: Dumping stack trace to scale_
image.exe.stackdump 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:26:51.530

您需要重建 imagemagick 并支持正确的库。在这种情况下，您必须使用 LCMS 支持进行重建。

（[来源](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14959)）

# extjs - 使代理使用扩展的 Ext.data.Operation

> ID：10509922
> 
> 赞同：5
> 
> 时间：2012-05-09T04:38:26.883
> 
> 标签：extjs, proxy, extjs4, datastore, extjs-mvc

我已经扩展`Ext.data.Operation`以实现自定义`commitRecords`方法。

该类`Ext.data.Operation`用于商店与其代理之间的所有通信。

该`commitRecords`方法具体用于根据代理写入器返回的数据更新数据存储中的数据。

我似乎无法掌握如何设置代理以使用我的扩展版本的`Ext.data.Operation`.

我一直在翻阅这个`Ext.data.*`包，但似乎找不到它的`Ext.data.Operation`创建位置，所以我会知道要告诉哪个类来使用这个新的扩展`Ext.data.Operation`类和自定义`commitRecords`方法。

有没有其他人之前扩展过这个，可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:09:08.453

我找到了，`batch`方法是创建`Ext.data.Proxy`一个`Ext.data.Operation`对象以发送到服务器。

我扩展`Ext.data.proxy.Ajax`了一个新方法，我只是为我自己的 Operation 类`batch`切换了。`new Ext.data.Operation`

**编辑**

只是因为你问了 DmitryB。关于为什么我必须实现自己的 commitRecords 方法的简短故事是，我需要我的数据模型“internalId”字段来匹配实际的数据库记录 ID 字段。我不会详细说明为什么，这对我来说太复杂了，无法表达，但这就是我所做的：

我的理解是，`commitRecords`只要`store.sync()`您编写服务器端控制器以在Ajax 响应，只要同步请求进行插入或更新，它就会执行此操作。

官方实现`commitRecords`尝试通过使用数据模型的“internalId”字段将返回的服务器记录与脏客户端记录匹配。

显然，我不知道新记录的下一个增量数据库 ID 将是什么，因此我无法在记录与数据库同步之前在客户端将其分配为 ID，因此服务器记录将永远无法匹配在调用 commitRecords 时匹配脏客户端记录的 internalId，即客户端记录不会获得我需要的正确数据库 ID。

所以，因为这个应用程序的*所有*可写数据模型都有一个“create_time”字段，我决定让 commitRecords 方法使用“create_time”字段而不是“internalId”来匹配服务器记录和客户端记录。

这是扩展的 Ext.data.Operation 类，我在其中执行此操作：

```
Ext.define('MyApp.ux.QueryOperation', {
    extend: 'Ext.data.Operation',

    /** 
     * Use the date_created timestamp if we cant match to an ID.
     * This allows client records that did not previously exist on the server
     * to be updated with the correct server ID and data
     * NB: All implementing data models require a "date_created" field.
     */
    commitRecords: function (serverRecords) {
        var me = this,
            mc, index, clientRecords, serverRec, clientRec;
        if (!me.actionSkipSyncRe.test(me.action)) {
            clientRecords = me.records;
            if (clientRecords && clientRecords.length) {
                if (clientRecords.length > 1) {
                    mc = new Ext.util.MixedCollection();
                    mc.addAll(serverRecords);
                    Ext.each(clientRecords, function(clientRec) {
                        serverRec = mc.findBy(function(record) {
                            var clientId = clientRec.getId(),
                                clientTime = clientRec.get('date_created').getTime(),
                                serverTime = record.get('date_created').getTime();
                                if(clientId && record.getId() === clientId) {
                                    return true;
                                }
                                // timestamp can be within 2ms of record
                                // (it seems to change slightly in serialization)
                                return (clientTime > serverTime - 2 && clientTime < serverTime + 2);
                        });
                        me.updateClientRecord(clientRec, serverRec);
                    });
                } else {
                    clientRec = clientRecords[0];
                    serverRec = serverRecords[0];
                    me.updateClientRecord(clientRec, serverRec);
                }
                if (me.actionCommitRecordsRe.test(me.action)) {
                    for (index = clientRecords.length; index--; ) {
                        clientRecords[index].commit();
                    }
                }
            }
        }
    },

}); 
```

正如我在答案中提到的，我发现我必须扩展代理才能使用我的新 Operation 类。我唯一扩展的是`batch`方法，只替换了`new Ext.data.Operation`现在所说的方法中的两行`new MyApp.ux.QueryOperation`（我上面的新操作类）。当响应从服务器返回时，这将调用我自己的 commitRecords 方法。我还给扩展代理一个别名“proxy.query”，这样我就可以告诉我的商店像这样使用它：

```
Ext.define('MyApp.store.MyStore', {
    extend: 'Ext.data.Store',
    requires: [
        'ST.ux.QueryProxy',
    ],
    title: 'Student',
    model: 'MyApp.model.MyModel',
    proxy: {
        type: 'query',
        // ... ^^^^^ uses my QueryProxy now
        // other configs...
    }
}); 
```

（如果我似乎在使用这种错误的方式或遗漏了文档中的某些内容，请告诉我。我会更喜欢实现此功能的内置方法。）

# asterisk - 如何在 Asterisk VOIP 中获取分机频道？

> ID：10509927
> 
> 赞同：0
> 
> 时间：2012-05-09T04:39:02.313
> 
> 标签：asterisk

如果我知道用户的分机，我如何将其转换为频道以便我可以代表他们拨打电话？

[http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:56:05.530

看起来`CoreShowChannels`是你想要的：

```
asterisk*CLI> manager show command CoreShowChannels 
[Syntax]
Action: CoreShowChannels
[ActionID:] <value>

[Synopsis]
List currently active channels. 

[Description]
List currently defined channels and some information about them.

[Arguments]
ActionID
    ActionID for this transaction. Will be returned.

[See Also]
Not available 
```

# c++ - 这个问题叫什么？如果通过基类型传递结构，则后代类型中的字段在方法中不可用

> ID：10509928
> 
> 赞同：1
> 
> 时间：2012-05-09T04:39:09.910
> 
> 标签：c++

我正在研究一个看起来像这样的问题：

```
struct A { ... }
struct B : A { int more; }

void Method(A a) { ... } 
```

它的工作原理是这样的：您将 B 的实例传递给 Method，然后在正文中不能再访问该`more`字段？

我试着记住它的名字，但我记不住。在 Google 上进行搜索只会给我任何其他信息。

谁能给我名字，以便我继续研究更多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:46:02.480

我认为实际上您在谈论的是*slicing*。当您通过基类型的参数按值传递某个派生类型的 C++ 对象时，派生部分被“切掉”，即使通过强制转换为派生类型也无法访问它们。

问题的解决方案是使用参考参数——即

```
void Method(A &a) { ... } 
```

然后你可以将一个`B`对象传递给这个函数而不破坏这些`B`部分。

# ruby-on-rails - Heroku 上缺少配置目录 - config.ru 中的 LoadError

> ID：10509929
> 
> 赞同：0
> 
> 时间：2012-05-09T04:39:18.293
> 
> 标签：ruby-on-rails, heroku, thin

**更新**
我现在知道（从运行`heroku run bash`和）部署到heroku后`ls -la`确实缺少该目录。`config`但是，它存在于本地存储库中。

* * *

**.gitignore**

```
/.bundle

# Ignore the default SQLite database.
/db/*.sqlite3

# Ignore all logfiles and tempfiles.
/log/*.log
*.log
/tmp 
```

在我将我的应用程序推送到 heroku 之后，我得到了一个 LoadError for `/app/config/environment`，这在以前的版本中没有发生过。没有进行任何更改`config.ru`。该文件`config/environment.rb`存在。

我尝试了回滚，但不能，因为以前的版本有不同的附加组件。

我该如何解决这个错误？

**Heroku 日志：**

* * *

```
2012-05-09T03:59:15+00:00 heroku[slugc]: Slug compilation started
2012-05-09T04:00:36+00:00 heroku[api]: Release v48 created by xxx
2012-05-09T04:00:36+00:00 heroku[api]: Deploy ac5eee6 by xxx
2012-05-09T04:00:36+00:00 heroku[web.1]: State changed from crashed to created
2012-05-09T04:00:36+00:00 heroku[web.1]: State changed from created to starting
2012-05-09T04:00:36+00:00 heroku[slugc]: Slug compilation finished
2012-05-09T04:00:44+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 6745`
2012-05-09T04:00:47+00:00 app[web.1]: /app/config.ru:3:in `require': no such file to load -- /app/config/environment (LoadError)
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `eval'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `load'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:45:in `for'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:169:in `load_adapter'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:73:in `start'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-05-09T04:00:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-05-09T04:00:47+00:00 app[web.1]: >> Using rack adapter
2012-05-09T04:00:48+00:00 heroku[web.1]: Process exited with status 1
2012-05-09T04:00:48+00:00 heroku[web.1]: State changed from starting to crashed 
```

**配置.ru**

* * *

```
# This file is used by Rack-based servers to start the application.

require ::File.expand_path('../config/environment',  __FILE__)
run ItAngel::Application 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:53:47.093

使用发布管理[http://blog.heroku.com/archives/2010/11/17/releases/](http://blog.heroku.com/archives/2010/11/17/releases/)每次添加或删除配置变量时，它都应该创建一个新版本，因此您应该能够回滚到即使您有不同的附加组件集。

你的 Procfile 中有什么？尝试`RACK_ENV`像这样指定：

```
web: bundle exec thin start -p $PORT -e $RACK_ENV 
```

当你跑步时`git push heroku master`，一切似乎都正常吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:42:52.187

我已经就我的应用程序的类似问题联系了 heroku，我们发现删除文件 .gitignore 旁边的文件 .slugignore 解决了这个问题。

可能与您身边的情况相同，您可以在这里看到我的问题： [为什么不推送配置文件夹？](https://stackoverflow.com/questions/11763609/why-config-folder-is-not-pushed)

并查看我对我的问题的回答。

我希望这个能帮上忙

# c# - 即使不记得我，我是否必须在客户端计算机上存储 cookie？

> ID：10509933
> 
> 赞同：2
> 
> 时间：2012-05-09T04:39:53.420
> 
> 标签：c#, asp.net, c#-4.0, asp.net-4.0

我有一个必须编码的登录系统。但我不明白的是，即使没有记住我，我是否必须在客户端机器上存储 cookie？如果我将所有必需的信息存储在 Session 本身中并使用它来检查我的 BasePage 以查看用户是否经过身份验证，这不是更好和“安全”吗？

如果要构建记住我功能，那么它就需要 cookie，对吗？请对此有所了解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T04:45:03.837

是的，你会的，或者你必须在你创建的每个链接的查询字符串上携带一些东西。Web 编程是完全无状态的。您真的不知道哪个用户正在请求哪个页面或已登录，除非您每次都给客户端（浏览器）一些东西发送回服务器。

如果你得到的请求只是“www.example.com/page.aspx”，那么你不知道那是我、我的兄弟、我的猫，还是其他一些随机的人。为了知道请求该页面的是我（因此被授权使用它），您必须使用会话 cookie 或在查询字符串上传递一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:45:46.547

问题是，HTTP 协议是无状态的，因此会话（以及请求之间的任何类型的持久性）需要每个连续的请求向服务器证明它确实来自前一个客户端。这样，您必须在请求中发送附加信息。对于会话，使用会话 id-s，通常通过 cookie 或将会话 id 作为 GET/POST 参数传递（非常不安全/不推荐）。因此，您需要用于会话的 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T04:50:51.503

身份验证和授权不同于会话管理。至少 ASP.NET 团队是这么看的。在身份验证/授权失败的情况下，出于安全原因，系统不应访问任何资源，因为它可能导致 DOS 攻击。如果您使用 Session 来存储身份验证和/或授权的详细信息，并且会话来自 DB，那么即使是无效用户也会进行 DB 调用，这从安全角度来看并不好。因此，将事物用于它们的目的。

# mysql - 如何查询重复字符超过2个的单词？

> ID：10509937
> 
> 赞同：1
> 
> 时间：2012-05-09T04:40:03.760
> 
> 标签：mysql, regex

我想选择所有单词，例如

```
baaac
czzzd
dkcvvvvz 
```

它们都有字母，例如 a、z 和 v 之类的字母，在序列中重复两次以上

使用 REGEX 可以吗？这是我如何查询我的表以查找三个重复的字母 a，我想稍微概括一下，这样我就不必查询每个字母

```
select word FROM `allwords` WHERE word REGEXP '^.*aaa.*$' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:49:27.350

看起来 Mysql 可能支持*反向引用*，这意味着您可以执行以下操作：

```
WHERE word REGEXP '([a-z])\1{2,}' 
```

但您必须在您的 Mysql 上进行测试才能确定。

如果您不能使用反向引用并且仍想使用正则表达式，那么您可以执行以下操作：

```
WHERE word REGEXP '(aaa|bbb|ccc|ddd|eee|fff|ggg|hhh|iii|jjj|kkk|lll|mmm|nnn|ooo|ppp|qqq|rrr|sss|ttt|uuu|vvv|www|xxx|yyy|zzz)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:07:13.543

我放弃并跑了

```
delete FROM `allwords` WHERE word REGEXP '^.*aaa.*$';
delete FROM `allwords` WHERE word REGEXP '^.*bbb.*$';
delete FROM `allwords` WHERE word REGEXP '^.*ccc.*$';
...
delete FROM `allwords` WHERE word REGEXP '^.*zzz.*$'; 
```

这是悲伤的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:09:31.063

试试这个：

```
SELECT * FROM mytable WHERE mycolumn REGEXP "^[a-z]*(([a-z]){2}){2,}[a-z]*$"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T01:18:32.687

要查找字符串是否包含超过 2 个重复的字母数字，请使用此

```
/([a-zA-Z0-9])\1{2,}/.test(str) // it returns true if contains and false if not 
```

# jquery - jquery -在 jquery 中创建的标签

> ID：10509940
> 
> 赞同：2
> 
> 时间：2012-05-09T04:40:51.377
> 
> 标签：jquery, jquery-selectors

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:44:09.490

使用`.html()`而不是`.text()`

希望对你有帮助..

# java - Dalvik Bridge Function 和 Dalvik Native Function call 的区别？

> ID：10509941
> 
> 赞同：2
> 
> 时间：2012-05-09T04:41:05.650
> 
> 标签：java, android

Android中的Dalvik Bridge Function和Dalvik Native Function call有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:19:00.223

简单来说，

Android 是基于 Linux 的操作系统，运行 linux 内核（Dalvik VM）。它可以比任何基于 Java 的可执行文件更有效地运行基于 C 的程序。基于 Java 的可执行文件易于构建，但对性能和空间要求很高。

基于 C 语言的程序被称为 Native 代码，Dalvik Native 代码只不过是为在 Dalvik VM 中运行而编译的 C 程序。

使用 JNI (NDK) 在 Nativeness 和 Java 应用程序开发人员之间创建了一座桥梁。这使我们能够从基于 C 的代码中获益更多。

换句话说，Dalvik Native Function 代表了在 JNI 性能被认为不足时最有可能暴露的 API。Bridge 版本被用作一些大容量对象调用的优化，通常不应该使用，因为我们可能会在某些时候放弃对它的支持。 [参考](http://androidxref.com/source/xref/dalvik/vm/native/)

# java - 在 Java 中获取内存统计信息：运行时与 MemoryMXBean

> ID：10509942
> 
> 赞同：11
> 
> 时间：2012-05-09T04:41:06.187
> 
> 标签：java, memory-profiling

我正在创建一个预定的执行程序来读取 JVM 的内存使用情况。我遇到了两种在正在运行的 JVM 中获取内存统计信息的方法 - Runtime 和 MemoryMXBean，它们的方法之间具有以下对应关系：

```
memoryMxBean.getHeapMemoryUsage().getUsed()      <=> runtime.totalMemory() - runtime.freeMemory()
memoryMxBean.getHeapMemoryUsage().getCommitted() <=> runtime.totalMemory()
memoryMxBean.getHeapMemoryUsage().getMax()       <=> runtime.maxMemory() 
```

除了 MemoryMXBean 提供的额外的非堆内存使用信息之外，还有什么理由让我更喜欢它而不是运行时，反之亦然？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:00:17.890

没有了。JMX bean 可以从外部访问，并且适用于 hyperic（甚至 nagios）等管理工具 - 无论如何它都会委托给 Runtime。

# vb.net - 在richtextbox vb.net中替换鼠标下的单词

> ID：10509944
> 
> 赞同：0
> 
> 时间：2012-05-09T04:41:28.320
> 
> 标签：vb.net, mouse

我想在用户单击 contextmenustrip dorpdownitem 时替换鼠标光标下的当前单词。我可以得到这个词，但无法用新词替换这个词，这是我的代码，非常感谢任何帮助。

```
Private Sub tsmmutradifat__DropDownItemClicked(ByVal sender As Object, ByVal e As System.Windows.Forms.ToolStripItemClickedEventArgs) Handles tsmmutradifat_.DropDownItemClicked
    Dim myclickeditem As String = correct_word(e.ClickedItem.Text)
    Dim wordtoreplace As String
    If Not myclickeditem = Nothing Then
        If RichTextBox1.SelectedText = "" Then
            ' Code required
        Else
            wordtoreplace = RichTextBox1.SelectedText
            If wordtoreplace.EndsWith(" ") Then
                myclickeditem = myclickeditem & " "
            End If
            If wordtoreplace.StartsWith(" ") Then
                myclickeditem = " " & myclickeditem
            End If
            RichTextBox1.SelectedText = myclickeditem
        End If
    End If
End Sub 
```

好的会看到，未来的时间，什么时候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:51:45.037

好的，成功了。在论坛上找到以下代码并根据我的需要进行更改，它有点奇怪但有效。在鼠标移动事件中

```
Public cursorAt As Integer
    Public wordEnd As Integer
    Public isEnd As Boolean
    Public wordStart As Integer
cursorAt = RichTextBox1.GetCharIndexFromPosition(e.Location)
       If cursorAt = 0 Then Return
       wordEnd = New Regex("[\s$]{1}").Match(RichTextBox1.Text.Substring(cursorAt)).Index
       isEnd = Not New Regex("\s").IsMatch(RichTextBox1.Text.Substring(cursorAt))
       wordStart = New Regex("[\s^]{1}", RegexOptions.RightToLeft).Match(RichTextBox1.Text.Substring(0, cursorAt)).Index
       If isEnd Then
 RichTextBox1.Select(wordStart, RichTextBox1.Text.Length)
                  Else
          RichTextBox1.Select(wordStart, cursorAt - wordStart + wordEnd)

       End If 
```

然后简单地替换 then 单词

```
RichTextBox1.SelectedText = myclickeditem 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-04T12:34:08.580

F6.RichTextBox1.Focus() SendKeys.Send(TextBox4.Text)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-04T15:28:37.780

我认为 user934820 建议的代码可以改进。使用“\b”更好地寻找单词边界。作为奖励，我们可以忽略文本结尾的大小写（因为它也是单词边框）。所以代码看起来像

```
wordEnd = New Regex(".\b{1}").Match(RichTextBox1.Text.Substring(cursorAt)).Index
wordStart = New Regex("\b.{1}", RegexOptions.RightToLeft).Match(RichTextBox1.Text.Substring(0, cursorAt)).Index

RichTextBox1.Select(wordStart, cursorAt - wordStart + wordEnd + 1) 
```

Please, pay attention that this search will return the very last letter in the word NOT the space after it (as in original code). So increment by 1 where needed (like Selection).

# javascript - 多个 Google+ 圈子错误地同时悬停

> ID：10509946
> 
> 赞同：1
> 
> 时间：2012-05-09T04:41:38.673
> 
> 标签：javascript, jquery, jsp, jstl

我有创建单个 Google+ 圈子的代码。但是当我在 JSTL (JSP) (ArrayList) 中使用 for 循环创建多个圆圈时，所有圆圈同时悬停。当我将鼠标放在每个圆圈上时，我需要对每个圆圈产生圆圈效果。我正在使用 jQuery 来制作效果。以下是代码：

**JSP**
数组列表

```
 <c:forEach items="${groups}" var="groups">
          <div id="circle">
        <div class="outer"> </div>
        <div class="middle"></div>`enter code here`
        <div class="inner"><c:out value="${groups.name}"/></div>
    </div>

 </c:forEach> 
```

对于不同的id`<c:out value="${groups.id}"/>`

**jQuery**

```
$(function() {

    $('#circle').mouseover(function() {

        $('div.outer').addClass('hover');
        $('div.middle').addClass('hover');
    });

    $('#circle').mouseout(function() {
        $('div.outer').removeClass('hover');
        $('div.middle').removeClass('hover');
    });

}); 
```

请帮助我创建多个圈子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:51:35.330

首先，您使用唯一的 id 属性来识别多个圈子。这是不正确的。使用 id 属性时，每个 id 必须是唯一的。在对相似元素进行分组时，请改用类。

话虽如此，经过仔细审查，这实际上并没有导致您的具体问题；但是，如果不加以纠正，它可能会在以后出现一个不同的问题。

实际上，**问题是由您的 addClass 和 removeClass 选择器引起的。**

当您添加和删除悬停类时，您将在所有具有类外部和类内部的 DIV 上执行此操作。使用 jQuery find 方法仅针对您圈子上下文中的特定 DIV：

```
$(function() {

    $('.circle').mouseover(function() {

        $(this).find('div.outer').addClass('hover');
        $(this).find('div.middle').addClass('hover');
    });

    $('.circle').mouseout(function() {
        $(this).find('div.outer').removeClass('hover');
        $(this).find('div.middle').removeClass('hover');
    });

}); 
```

我还更改了您的选择器以使用类。

```
<c:forEach items="${groups}" var="groups">
      <div class="circle"> 
```

# javascript - 原生质日期选择器：不同日期时间格式的问题

> ID：10509949
> 
> 赞同：1
> 
> 时间：2012-05-09T04:42:14.853
> 
> 标签：javascript, prototypejs, datepicker

我正在开发一个支持 I18N 的应用程序。在此应用程序中，系统会根据用户的区域设置提示用户以区域设置特定格式输入日期时间以及表单中的其他详细信息。我们使用[原生质日期时间选择器](http://jongsma.org/software/protoplasm/control/datepicker?page=datepicker)来选择日期时间。

现在，我们面临插件显示错误时间的特定日期时间格式的问题。这是html

```
<html>
    <head>
        <script language="javascript" src="protoplasm.js"></script>
        <script language="javascript">
            // transform() calls can be chained together
            Protoplasm.use('datepicker')
                .transform('input.datepicker', {timePicker:true, use24hrs:false, dateTimeFormat: 'dd-MM-yyyy HH:mm a'} )
                .transform('input.datetimepicker')
                ;
        </script>
    </head>
    <body>
        <input type="text" name="date" class="datepicker" />
    </body>
</html> 
```

当用户单击插件上的 PM 框时，它会显示 16-04-2012 **22:59 PM**而不是 16-04-2012 **10:59 PM**。但是，如果他单击 AM 框，它会起作用。

有没有人遇到过这样的问题？

请帮我解决这个问题。

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:57:32.683

我`HH`用`hh`in代替`dateTimeFormat`，它起作用了。

# grails - Grails 的 Jasper 插件：无法在空对象上调用方法 generateReport()

> ID：10509950
> 
> 赞同：0
> 
> 时间：2012-05-09T04:42:22.330
> 
> 标签：grails, jasper-reports

我正在为 Grails (v 1.3.7) 使用 Jasper 插件 (v 1.5.3)。我在服务的方法中编写了以下代码

```
import org.codehaus.groovy.grails.plugins.jasper.JasperExportFormat;
import org.codehaus.groovy.grails.plugins.jasper.JasperReportDef;
import org.apache.commons.io.FileUtils;

class ReportService {

    static transactional = true
    def jasperService

    def generateFormA() {
        def reportDef = new JasperReportDef(name:'test.jasper', fileFormat:JasperExportFormat.PDF_FORMAT)   
        FileUtils.writeByteArrayToFile(new File('C:/test.pdf'), jasperService.generateReport(reportDef).toByteArray())

        return
    }
} 
```

调用 Service 方法时出现以下运行时错误 -

> 无法在空对象上调用方法 generateReport()

[我已经注入了 jasperService 并导入了插件](http://grails.org/plugin/jasper)页面中描述的所需类。此外，当我调试时，我注意到 reportDef 正在正确实例化。

任何人都可以提出任何建议。感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:26:13.130

您的语法看起来不错，这应该可以工作。我会尝试停止应用程序并运行 grails [clean](http://grails.org/doc/1.3.x/ref/Command%20Line/clean.html)命令。有时这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:42:04.350

迈克尔，感谢您的洞察力。

为了更好地了解幕后场景，我下载了插件源代码并直接在我的应用程序中使用。事实证明，插件的**JasperService**类使用了**dataSource** bean。

```
class JasperService {
    boolean transactional = true
    javax.sql.DataSource dataSource
    .....
    private JasperPrint generatePrinter(JasperReportDef reportDef) {
        .....
        def conn = dataSource.getConnection()
    jasperPrint = JasperFillManager.fillReport(resource.inputStream, reportDef.parameters, conn)
        .....
    }
    ...........
} 
```

但是，当调用 dataSource.getConnection() 方法时，dataSource 没有被实例化（这反过来又会*抛出空对象错误*）。可能这与 Grails 本身有关，而不是插件。所以我修改了 JasperService 类的 JasperPrint() 方法，如下所示，它起作用了

```
def dataSource = org.codehaus.groovy.grails.commons.ApplicationHolder.application.mainContext.dataSource
def conn = dataSource.getConnection() 
```

# c# - 用于控制系统软件的 .NET 应用程序

> ID：10509953
> 
> 赞同：-3
> 
> 时间：2012-05-09T04:43:08.630
> 
> 标签：c#, winforms

我想在 .NET 中设计一个软件来控制 Windows 中的每个程序。这意味着只有在登录后他们才能运行他们的应用程序或浏览器。

给我一些想法，我应该先从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:50:17.260

您不能（或至少不应该）使用像 .NET 这样的托管语言来执行此操作。如果你真的想这样做，你将不得不编写一个钩子例程，它基本上阻止进程运行，除非它们在你批准的白名单上。

但是你真的不应该通过代码来做这件事。Windows 已经支持使用组策略以这种方式锁定计算机。您所要做的就是根据需要配置机器（或将配置从服务器推送到整个网络），一切就绪。

询问有关在[Server Fault](https://serverfault.com/)上配置组策略的更多问题。

# html - HTML/CSS：如何设置此表格的大小？

> ID：10509954
> 
> 赞同：0
> 
> 时间：2012-05-09T04:43:09.350
> 
> 标签：html, css, css-tables

如果您访问下面的链接并将商品添加到购物车（以使购物车出现在侧边栏中），您会注意到购物车与侧边栏小部件的边缘重叠。

[http://savageworkouts.com/2012/05/07/sample-product/](http://savageworkouts.com/2012/05/07/sample-product/)

我需要编写什么 CSS 才能使表格成为其父容器的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:53:36.817

写**table-layout:fixed**在你的`table.eshop`. 像这样写：

```
table.eshop {
    border-collapse: collapse;
    table-layout: fixed;
    width: 99%;
    word-wrap: break-word;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:50:00.327

您需要更改`th`和`td`元素的填充：

```
table thead tr th,
table tfoot tr td {
  padding: 8px 10px 9px;
  font-size: 14px;
  font-weight: bold;
  color: #222;
} 
```

对于购物车中的 0-9 件商品，`5`作为左右两侧的良好填充。如果你想走得更高，你需要把它推得更低。

```
table thead tr th,
table tfoot tr td {
  padding: 8px 5px 9px;
  font-size: 14px;
  font-weight: bold;
  color: #222;
} 
```

另一种选择是更改字体大小。这完全取决于您以及您认为在不损害可用性的情况下有效的方法。

# c# - Windows Metro Style 应用程序出现 Google Data API 库错误

> ID：10509955
> 
> 赞同：3
> 
> 时间：2012-05-09T04:43:19.163
> 
> 标签：c#, windows-8, windows-runtime, google-docs-api

操作系统：Windows 8 Consumer Preview
IDE：Visual Studio 11 Beta

我创建了一个空白应用程序（Windows Metro 风格）。
并添加 Google Doc API 示例代码。（如下）
发生编译错误。（**在模块 System.dll 中找不到类型 System.ComponentModel.ExpandableObjectConverter**）

但是当我创建控制台应用程序（Windows）时，不会发生编译错误并且 Google Doc API 运行良好。

有任何想法吗？

```
using System;
using Google.GData.Client;
using Google.GData.Documents;

namespace MyDocumentsListIntegration
{
  class Program
  {
    static void Main(string[] args)
    {
      DocumentsService service = new DocumentsService("MyDocumentsListIntegration-v1");

      // TODO: Authorize the service object for a specific user (see Authorizing requests)

      // Instantiate a DocumentsListQuery object to retrieve documents.
      DocumentsListQuery query = new DocumentsListQuery();

      // Make a request to the API and get all documents.
      DocumentsFeed feed = service.Query(query);

      // Iterate through all of the documents returned
      foreach (DocumentEntry entry in feed.Entries)
      {
        // Print the title of this document to the screen
        Console.WriteLine(entry.Title.Text);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:39:48.123

[ExpandableObjectConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.expandableobjectconverter.aspx)类似乎存在于标准 .NET 框架中，但如果您查看[System.ComponentModel](http://msdn.microsoft.com/en-us/library/windows/apps/hh454035%28v=vs.110%29.aspx)命名空间的 Metro API 文档，该类未列出，因此不可用。

我建议使用[.NET for Metro 风格应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br230232%28v=vs.110%29.aspx)页面来发现编写 Metro 风格应用程序时可用的内容。

# java-native-interface - JNI：GetIntArrayElements 和 GetStringUTFChars 的区别

> ID：10509956
> 
> 赞同：1
> 
> 时间：2012-05-09T04:43:34.383
> 
> 标签：java-native-interface

```
// example-1: GetStringUTFChars()
public class Prompt
{
    // native method that prints a prompt and reads a line
    private native String getLine(String prompt);
    public static void main(String args[])
    {
        Prompt p = new Prompt();
        String temp = new String("Type a line: ");
        String input = p.getLine(temp);
        System.out.println("User typed: " + input);
        System.out.println(temp);
    }
    static
    {
        System.loadLibrary("Prompt");
    }
}
/*
javac Prompt.java
javah Prompt
get a file: Prompt.h
*/

#include "Prompt.h"
#include <stdio.h>
#include <string.h>
JNIEXPORT jstring JNICALL Java_Prompt_getLine (JNIEnv *env, jobject obj, jstring prompt)
{
    char buf[128];
    const jbyte *str;
    jboolean isCp;
    str = (*env)->GetStringUTFChars(env, prompt, &isCp);
    if (str == NULL) {
        return NULL; /* OutOfMemoryError already thrown */
    }
    if(isCp == JNI_TRUE)
    {
        strcpy(str,"12345");
    }
    printf("%s", str);
    (*env)->ReleaseStringUTFChars(env, prompt, str);
    /* We assume here that the user does not type more than
     * 127 characters */
    scanf("%s", buf);
    return (*env)->NewStringUTF(env, buf);
}
/*
set java_inc=E:\FILES\java\jdk1.6.0_29\include
cl -I%java_inc% -I%java_inc%\win32 -LD Prompt.c -FePrompt.dll
*/
/* output
the output of running class Prompt.class:
12345jdkfjkdjfkdf
User typed: jdkfjkdjfkdf
Type a line:

the output demonstrates that String instance temp did not changed, and isCopy is JNI_TRUE
*/

// example-2: GetIntArrayElements()
public class TestJNI
{
    public native void intArray(int[] ii);
    public static void main(String[] args)
    {
        System.loadLibrary("TestJNI");
        TestJNI jni = new TestJNI();
        int[] ii = new int[4];
        for(int i = 0; i < ii.length; i++)
        {
            ii[i] = i;
        }
        jni.intArray(ii);
        for(int i = 0; i < ii.length; i++)
        {
            System.out.println(ii[i]);
        }
    }
}
/*
output:
isCopy: 1
100
101
102
103

the output shows that ii has been changed, but isCopy is JNI_TRUE
*/

#include "TestJNI.h"
#include <stdio.h>
JNIEXPORT void JNICALL Java_TestJNI_intArray(JNIEnv *env, jobject obj, jintArray intArr)
{
    jboolean isCp;
    int i;
    jsize len = (*env)->GetArrayLength(env, intArr);
    jint *arr = (*env)->GetIntArrayElements(env, intArr, &isCp);
    if(isCp == JNI_TRUE)
    {
        printf("isCopy: JNI_TRUE\n");
    }
    for(i = 0; i < len; i++)
    {
        arr[i] = 100 + i;
    }
    (*env)->ReleaseIntArrayElements(env, intArr, arr, 0);
}
/*
output:
isCopy: 1
100
101
102
103

the output shows that ii has been changed, but isCopy is JNI_TRUE
*/ 
```

示例 1：输出表明 String 实例 temp 没有更改，并且 isCopy 为 JNI_TRUE 示例 2：输出显示 ii 已更改，但如果 isCopy 设置为 JNI_TRUE，则 isCopy 为 JNI_TRUE，这意味着 arr 指向一个新数组，但是 intArr 改变了，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:54:47.247

ReleaseIntArrayElements() 提交您所做的任何更改。String 是不可变的，这就是 ReleaseStringUTFChars() 没有第四个参数的原因。我想说这两个示例都是无效的，因为它们在发布时不提供相同的地址。

# php - 如何在使用 jquery ajax 时立即显示加载消息？

> ID：10509972
> 
> 赞同：0
> 
> 时间：2012-05-09T04:45:53.043
> 
> 标签：php, jquery, html, ajax, xmlhttprequest

下面是我使用 jQuery Ajax 方法制作的 Ajax 代码。

```
$(".loading_msg").show();
$.ajax({
    type: "POST",
    url: "submit_ops.php?action=submit_form",
    data: $( "#frmMyForm" ).serialize(),
    success: function(result){
        if(result=='Success'){
            $("#msgContainer").html('<div style="color:#3CA322;font-weight:bold;font-size:14px;padding:10px;">Thank you.</div>');
            $("#msgContainer").fadeIn();
        }
        else{
            $("#msgContainer").html('<div style="color:red;font-size:12px;padding:10px;">' + result + '</div>');
            $("#msgContainer").fadeIn();
        }
    },
    error: function(){
        //console.log('error');
    },
    complete: function(){
        //console.log('complete');
        $(".loading_msg").hide();
        $("#submit").attr("disabled", false);
    }

}); 
```

所以逻辑是，每当 Ajax 请求即将发出时，

1.  首先显示 .login_msg 容器

2.  然后进行ajax调用

3.  完成后，.loading_msg 再次被隐藏。

现在的问题是，它不能正常工作。因此，当进行 ajax 调用时，浏览器会挂起几秒钟，但不会显示加载消息。但是当请求完成时，登录消息会出现半秒钟，然后它就消失了，因为我在请求完成时将其设置为隐藏。

**所以我希望在发出请求之前显示 .login_msg 。**

对此有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:50:40.873

尝试使用`beforeSend`和`complete`设置`$.ajax`：

```
$.ajax({
    type: "POST",
    url: "submit_ops.php?action=submit_form",
    data: $( "#frmMyForm" ).serialize(),
    beforeSend:function(){
             $(".loading_msg").show();
        }
    complete:function(){
             $(".loading_msg").hide();
        }

    ....
    ....
}); 
```

# matlab - 解释 SIFT 中的分数

> ID：10509974
> 
> 赞同：2
> 
> 时间：2012-05-09T04:46:00.697
> 
> 标签：matlab, image-processing, sift

我在matlab中使用SIFT算法来确定模板图像和一组图像之间的相似度，最后我必须根据SCORES确定一组图像之间的最佳匹配，是不是说分数越高图像越匹配？我知道当完全匹配时，分数为零，但如果图像相似怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:36:52.227

这个问题比它看起来的要复杂一些。要了解一个想法，请尝试仅根据 l1 或 l2 距离在模板和目标图像之间匹配 SIFT 描述符并显示结果。因此，当 l1 或 l2 距离最小时，您将每个模板点与目标点匹配。就指标而言，你不能做得更好。但是，在视觉上，您会看到这会产生不好的结果。

这使人们产生了不同的匹配策略。大多数程序部署的默认设置是使用 l2 距离进行匹配，但仅接受两点之间的匹配，如果次优匹配明显（如 60%）更差。它工作得很好，但在这个策略中，有些点永远不会匹配。作为“分数”，您可以先尝试模板和图像之间成功匹配或配对的点的百分比。

大多数人部署的策略是确定匹配模板和图像点之间的关系，例如`x= Ax'`应该保持。这意味着，如果图像是模板的旋转副本，我们希望`A`在匹配的 SIFT 点`x'`和之间找到一个旋转矩阵`x`。为这种关系汇集大量匹配点集合的常用方法是 RANSAC。所有不符合这种一致变形的点`A`都可以作为异常值从集合中删除。

可以在[Peter Kovesi 的网站](http://www.csse.uwa.edu.au/~pk/Research/MatlabFns/index.html)上找到这种方法的一个很好的演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T08:47:15.653

我假设 SCORES 是指一对匹配的描述符（例如欧几里得距离）之间的相似性度量。如果我的假设是正确的，统计平均所有匹配的分数（例如 SSD）应该会给你两个图像之间的相似度。即平均分越小，相似度越高，零表示完美匹配。要改进此相似性指标，您可以查看 RANSAC，它能够删除匹配描述符集中的异常值。

**编辑**：平均匹配分数当然只有在匹配描述符的百分比足够高时才有意义（如 Maurits 建议的那样）。因此，计数匹配和平均距离的组合可能是一种合理的方法。

# iphone - 如何在目标 c 中使用图形 api 在 facebook 上上传 .mp4 视频

> ID：10509984
> 
> 赞同：0
> 
> 时间：2012-05-09T04:46:58.290
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, video

我正在使用 Graph API 在 facebook 上上传视频。我可以上传 .wmv 格式的视频，但不能上传 .mp4。我的代码如下

```
strVidUrl=@"http://myshow.com.au/Videos/mp4s/20111216044530271247467.mp4";
    //strVidUrl=@"http://www.myshow.com.au/Videos/BossAlarm.wmv";
    NSURL *url = [NSURL URLWithString:strVidUrl];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   data, @"video.mov",
                                   @"video/mp4", @"contentType",
                                   [dicVideoDetails valueForKey:@"fld_display_name"], @"title",
                                   [dicVideoDetails valueForKey:@"fld_video_description"], @"description",
                                   nil]; 
```

如果我使用 .wmv 那么代码在下面并且它正在运行。

```
NSURL *url = [NSURL URLWithString:@"http://www.myshow.com.au/Videos/BossAlarm.wmv"];
NSData *data = [NSData dataWithContentsOfURL:url];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               data, @"video.mov",
                               @"video/quicktime", @"contentType",
                               @"Video Test Title", @"title",
                               @"Video Test Description", @"description",
                                   nil]; 
```

两种情况下的结果都相同，但 .mp4 视频未在 facebook 上显示。而 .wmv 在那里显示。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:56:31.583

这可能是由于您的源视频和 fb 推荐的视频格式的编解码器和压缩率不匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:25:25.867

检查以下链接

*   [在脸书上上传视频](http://developers.facebook.com/blog/post/532/)
*   [演示](http://developers.facebook.com/attachment/VideoUploadTest.zip)

问候，让我知道的情况下查询。

# java - Android 中的 classname.class 指的是什么？

> ID：10509985
> 
> 赞同：2
> 
> 时间：2012-05-09T04:46:58.840
> 
> 标签：java, android

例如，当我们创建一个意图时，我们使用

```
Intent i = new Intent(MainActivity.this,LoginActivity.class); 
```

`.class`指的是什么？它是作为字符串的类的名称吗？还是班级本身？为什么我不能直接通过`LoginActivity`而不是`LoginActivity.class`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T04:50:06.757

它指的是`Class`对象本身的一个实例。请参阅[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)以获取`Class`. 在这种情况下，`Intent` [构造函数](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29)`Activity`采用您要启动的实例。这也称为显式`Intent`，因为您正在显式定义要启动的组件，而隐式`Intent`在运行时由 Android 解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:52:26.117

如果您查看适用的构造函数[`public Intent (Context packageContext, Class<?> cls)`](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29)文档，您会注意到第二个参数需要一个类对象。为任何对象提供类的方法是做`object.getClass()`或`<className>.class`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T04:57:15.970

```
ClassName.class 
```

指从当前活动要打开的目标活动。`<a href="contactus.html">contact</a>`当您单击联系人链接时，它就像 html 中的 hiperlink。contactus.html页面将被打开。

# android - SQLite 数据库浏览器“临时表已存在”

> ID：10509986
> 
> 赞同：0
> 
> 时间：2012-05-09T04:47:00.857
> 
> 标签：android, sqlite

我正在按照[本教程](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)将预制数据库集成到我的 Android 应用程序中。

一切都很顺利，直到它要求我将主键字段重命名为“_id”。好吧，我没有 PK（我知道这是不好的 DB 做法），第二，PK 不是整数类型，会出现类型不匹配错误。现在，我尝试将我的一个字段（非整数）重命名为“_id”，现在我无法将其重命名。另外，我尝试删除一个我不需要的额外字段，它给了我这个错误：

> 删除字段时出错。来自数据库引擎的消息：表 TEMP_TABLE 已存在

或这个

> 错误编辑字段。来自数据库引擎的消息：表 TEMP_TABLE 已存在

不太清楚如何解决这个问题，因为我不熟悉使用终端处理数据库。我试着环顾四周，没有额外的下落不明的桌子，所以我不知道这些是从哪里来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:55:18.870

您应该让[SQLite Manager](http://code.google.com/p/sqlite-manager/)（一个 FireFox 扩展）在您的桌面上使用您的数据库，它是免费的并且运行良好。它有一个相当合理的 GUI……所以它比使用命令行更友好。

是的，android 想要一个名为“_id”的主键字段，它需要是一个整数。似乎他们的所有列表类型小部件都基于此前提。我可以根据个人经验告诉您，如果光标中没有 _id 列，ListView 小部件将无法工作！

# javascript - 如何在 ipad 中为 websheet 分配单独的 css

> ID：10509989
> 
> 赞同：0
> 
> 时间：2012-05-09T04:47:31.187
> 
> 标签：javascript, css, html

我有一个网页，我希望该网页应该加载两个不同的 css，一个在移动 safari 上运行时加载，一个在我们保存主屏幕然后在网页上运行时加载，以便如何为两者加载不同的 css 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:48:27.630

您可以使用[CSS3 Media queries](http://perishablepress.com/target-iphone-and-ipad-with-css3-media-queries/)定位设备。您必须加载所有 CSS 并让它检测设备。

媒体查询有[很多属性](https://developer.mozilla.org/en/CSS/Media_queries)。您只需使用这些查询的组合来定位设备。据我所知，通常的方法是了解分辨率和方向。

# java - 如何使用 java 在 mysql 中执行一些“源”命令？

> ID：10509992
> 
> 赞同：0
> 
> 时间：2012-05-09T04:47:47.937
> 
> 标签：java, mysql

我有大量的源命令要执行。所以我想写一些Java代码来做到这一点。有没有办法在 Java 中做到这一点？

源命令是这样的：

```
 mysql> source /home/liova/download/tpch/queries/Q1.sql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:56:56.170

[您可以使用Runtime.exec](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)执行任何 shell 命令：

```
Runtime.exec("mysql db_name < /home/liova/download/tpch/queries/Q1.sql"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:08:24.680

You can use Runtime class to execute any commands in java. It executes the command as seperate process.

# linux - 如何检查 Linux 内核编译器优化级别

> ID：10509993
> 
> 赞同：1
> 
> 时间：2012-05-09T04:47:51.250
> 
> 标签：linux, optimization, linux-kernel

我正在尝试验证我的 linux 内核构建的优化级别（-O？）。我怎样才能做到这一点？

我唯一能找到的是内核配置文件中的 CONFIG_CC_OPTIMIZE_FOR_SIZE=y 。它是否暗示-Os？它是否覆盖了任何东西（在一个 gcc 行中有多个优化使最后一个 -O 获胜）？我发现内核的某些部分是用 -O2 构建的，但是对于所有内核来说，行数太少了。

这种优化集中设置在哪里？

注意：我使用的是 CentOS 5.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:49:01.483

运行 with `make V=1`，您可以看到命令行的所有荣耀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T09:46:29.513

如果您的内核配置包含 CONFIG_CC_OPTIMIZE_FOR_SIZE 您可能会假设它是使用 -Os 编译的，请参阅内核 makefile，例如[http://lxr.linux.no/linux+v3.12/Makefile#L573](http://lxr.linux.no/linux+v3.12/Makefile#L573)以获取设置此设置的位置这也显示如果未设置 CONFIG_CC_OPTIMIZE_FOR_SIZE，则使用 -O2。

正如 blueshift 已经说过的，使用 make V=1 构建会强制 make 显示完整的编译器输出，包括优化标志。

# php - 调用 doBackground 时如何注册函数和 gearmanworker？

> ID：10509997
> 
> 赞同：0
> 
> 时间：2012-05-09T04:48:07.887
> 
> 标签：php, gearman

**客户：**

```
<?php

$gmclient= new GearmanClient();
$gmclient->addServer();
$gmclient->doBackground("reverse", "this is a test");

echo "done!\n"; 
```

**工人：**

```
<?php

echo "Starting\n";

$gmworker= new GearmanWorker();
$gmworker->addServer();
$gmworker->addFunction("reverse", "reverse_fn");

while($gmworker->work()){}

function reverse_fn($job)
{

  $result= strrev($job->workload());

  $fp = fopen('test.txt', 'a');
  fwrite($fp, $result);
  fclose($fp);
  echo "Result: $result\n";
  return $result;
}

?> 
```

问题是当我打电话给客户时，在我运行之前什么都没有发生

```
php worker.php 
```

然后它写入文件，但外壳只是卡在

```
[user@server gearman]$ php worker.php 
Starting
Result: tset a si siht 
```

无论如何我可以让它在调用doBackground时在后台运行worker.php文件吗？我还想确保在重新启动 gearmand 时这项工作，以便在重新启动守护程序时我不必运行 worker.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:00:55.523

作为我评论的答案发布：

看看 supervisord ( [supervisord.org](http://supervisord.org/) ) 来管理你的 php 脚本。主管将为您进行流程管理，如果它们死了，则在后台重新生成 php 脚本