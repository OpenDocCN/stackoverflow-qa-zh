# StackOverflow 问答 11690000-11690999

# ruby-on-rails-3.2 - 在哪里上课

> ID：11690003
> 
> 赞同：0
> 
> 时间：2012-07-27T14:35:54.397
> 
> 标签：ruby-on-rails-3.2

我正在阅读 Ruby on Rails Guides 并发现了一个问题，因为没有明确说明将不是 MVC 的任意类放在哪里。

具体来说，我正在阅读[Callback 类](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callback-classes)，但不知道在哪里放置 PictureFileCallbacks 类。

有人可以帮助我，因为我对 Rails 比较陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T16:31:16.567

37signals 推荐的方法记录在这里：http: [//37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)

这里有一个要点可以解释 [https://gist.github.com/dhh/1014971](https://gist.github.com/dhh/1014971)

您也可以在不使用 ActiveSupport::Concern 的情况下使用：

在 application.rb 中：

```
config.autoload_paths += %W( #{config.root}/app/concerns ) 
```

只需将模块/类放在 app/concerns 中。

不要忘记文件/目录名称和模块/类名称之间的链接。

# c++ - 将目录附加到 pkginclude_header

> ID：11690006
> 
> 赞同：0
> 
> 时间：2012-07-27T14:36:03.573
> 
> 标签：c++, makefile, autotools, autoconf, automake

无论如何我可以修改 pkginclude_ 的路径而不实际改变我的项目结构吗？这是我拥有的目录结构。

```
My_Project >
       include >
             banana.h
             apple.h
             pear.h
Makefile.am
configure 
```

在 Makefile.am 我有..

```
pkginclude_HEADERS=include/*.h 
```

运行 make install 将文件放入..

```
/usr/include/My_Project/ 
```

我想要发生的是包括安装在..

```
/usr/include/My_Project/fruits/ 
```

我想在不将任何标志传递给 configure 或 make 并且不更改我机器上的目录结构的情况下执行此操作。有没有办法将其指定为默认行为？

在ineterweb周围挖掘。找不到答案，虽然我可能错过了。我不喜欢 autotools 文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T13:42:26.267

怎么样：

```
fruitsdir=$(pkgincludedir)/fruits
fruits_HEADERS=include/*.h 
```

更正统的方法是重组你的项目以拥有 fruits/ 目录：

```
My_Project > 
   includes > 
      fruits > 
         apple.h
         banana.h
         pear.h 
```

然后添加到 My_Project/includes/Makefile.am

```
nobase_pkginclude_HEADERS = fruits/apple.h fruits/banana.h fruits/pear.h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:51:47.600

在 Makefile.am 中：

```
pkgincludedir = $(includedir)/$(PACKAGE)/fruits 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:51:43.137

我用这个方法解决了，

在 Makefile.am

```
nobase_pkginclude_HEADERS=fruits/*.h 
```

# php - PHP对多维数组的一个维度进行排序

> ID：11690007
> 
> 赞同：2
> 
> 时间：2012-07-27T14:36:06.660
> 
> 标签：php, arrays, multidimensional-array, sorting

没什么好解释的，我直接上示例代码：

```
<?php
$array[0]['a'] = 3;
$array[0]['b'] = 2;
$array[0]['c'] = 4;
$array[0]['d'] = 1;

$array[1]['a'] = 4;
$array[1]['b'] = 2;
$array[1]['c'] = 3;
$array[1]['d'] = 1;

$array[2]['a'] = 1;
$array[2]['b'] = 2;
$array[2]['c'] = 4;
$array[2]['d'] = 3;
?> 
```

排序后，它应该是这样的：

```
<?php

$array[0]['d'] = 1;
$array[0]['b'] = 2;
$array[0]['a'] = 3;
$array[0]['c'] = 4;

$array[1]['d'] = 1;
$array[1]['b'] = 2;
$array[1]['c'] = 3;
$array[1]['a'] = 4;

$array[2]['a'] = 1;
$array[2]['b'] = 2;
$array[2]['d'] = 3;
$array[2]['c'] = 4;
?> 
```

我真的无法理解它。简而言之：我不想对整个数组进行排序，而是对数组的特定维度进行排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:38:07.847

用于`foreach`下一级，然后对每个子数组进行排序。有几种方法可以做到这一点：

```
foreach($arr as &$sub) asort($sub);
// OR
foreach($arr as $k=>$sub) asort($arr[$k]);
// OR
foreach(array_keys($arr) as $k) asort($arr[$k]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:38:30.750

您必须直接对索引进行排序：

`ksort($array[0]);`

对所有索引进行排序：

```
foreach($array as $index => $val){ 
    asort($val);
    $array[$index] = $val; 
} 
```

# php - 全局变量处理

> ID：11690011
> 
> 赞同：0
> 
> 时间：2012-07-27T14:36:21.637
> 
> 标签：php, error-handling, global-variables

当我尝试处理 WARNING 消息时，出现全局变量/数组错误（在最后一行 print_r 上）：

> 注意：未定义的变量：错误............

我也尝试在函数之外声明**$errors但同样的问题。**

谢谢

**我的代码：**

```
set_error_handler('validation_error_handler', E_WARNING);

function validation_error_handler($error_no, $error_message)
{
    global $errors;
    $errors[] = $error_message;
}

echo '<pre>'; print_r($errors); echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:38:50.967

您需要先声明`$errors`为数组：

```
set_error_handler('validation_error_handler', E_WARNING);
$errors = array(); // Add this... 
```

**更新：**

```
set_error_handler('validation_error_handler', E_WARNING);

$errors = array();

function validation_error_handler($error_no, $error_message)
{
    global $errors;
    $errors[] = $error_message;
}

echo preg_match();

echo '<pre>'; print_r($errors); echo '</pre>'; 
```

这将打印

```
<pre>Array
(
    [0] => preg_match() expects at least 2 parameters, 0 given
)
</pre> 
```

确保您的错误/警告发生在您之前`print_r($errors);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:49:50.960

在你的函数之外声明`$errors`，然后通过引用将它传递给你的函数。

```
$errors = array();

function validation_error_handler($error_no, $error_message, &$errors)
{
    $errors[] = $error_message;
}

echo '<pre>'; print_r($errors); echo '</pre>'; 
```

避免以这种方式使用全局变量，因为如果包含在其他文件中，它们可能会导致冲突。

另外，阅读 php 中的变量范围：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# jpa - 在 JPA (FK) 中删除一行

> ID：11690014
> 
> 赞同：2
> 
> 时间：2012-07-27T14:36:34.417
> 
> 标签：jpa, jpa-2.0

假设我有三个表（Patients Doctors 和 Medicines）。Patients 表有一个 FK 约束，它引用了 Doctors 表中的一列，类似地 Medicines 表有一个 FK 约束，它引用了 Patients 表中的一列。现在，当我尝试从患者中删除时，使用

```
//Delete From Patient Table
    javax.persistence.Query query = manager.createQuery("DELETE  From PatientEnroll e WHERE e.no =:arg1");
    int val = Integer.parseInt(no);
    query.setParameter("arg1", val);
    query.executeUpdate(); 
```

我收到以下错误：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`acme`.`medicines`, CONSTRAINT `PatientNo` FOREIGN KEY (`PatientNo`) REFERENCES `Patients` (`PatientNo`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

如何从患者表中删除某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:59:38.200

首先删除引用患者的药物：

```
delete from Medicine m 
where m.patient.id in (select p.id from PatientEnroll p where p.no = :arg1) 
```

或将它们与患者解除关联以删除：

```
update Medicine m set patient = null 
where m.patient.id in (select p.id from PatientEnroll p where p.no = :arg1) 
```

否则，您显然会破坏外键约束：引用不存在患者的药物将保留在数据库中。这正是外键约束的用处：避免这种不一致。

请注意，除非有数百名具有给定数量的患者，否则使用 JPA 执行此操作的通常方法是：

```
Patient p = getPatientByNumber(args1);
em.remove(p); 
```

如果您在关联上有一个 REMOVE 类型的级联，则所有药物也将被删除。如果没有，您将不得不这样做：

```
Patient p = getPatientByNumber(args1);
for (Medicine m : p.getMedicines()) {
    em.remove(m);
}
em.remove(p); 
```

或者

```
Patient p = getPatientByNumber(args1);
for (Medicine m : p.getMedicines()) {
    m.setPatient(null);
}
em.remove(p); 
```

# javascript - canvas.toDataUrl 在 phonegap 中不起作用

> ID：11690015
> 
> 赞同：1
> 
> 时间：2012-07-27T14:36:35.853
> 
> 标签：javascript, android, cordova

我正在尝试从图像中获取 base64 数据。所以我正在做的是，创建新的画布元素，然后绘制需要 base64 的图像，然后使用 canvas.toDataUrl 函数从画布获取 base64 数据。

但是作为 canvas.toDataUrl 的回报，我得到了 ==> 数据：，这在网络浏览器上运行良好，但在 android 模拟器或手机上运行良好。

```
<script type="text/javascript">
$('document').ready(function() {

    var img = new Image();
    img.src="images/splash.png";
    var canvas = document.createElement("canvas");
    var context = canvas.getContext("2d");
    var rectWidth = $(window).width();
    var rectHeight = 100;
    canvas.width = rectWidth;
    canvas.height = rectHeight;

    img.onload = function() {
      context.drawImage(img, 0, 0);
        var myImage1 = canvas.toDataURL("image/png");      // Get the data as an image.
        $("#MyPix").attr('src', myImage1); 
        $('#canvasDiv').append(myImage1);
    }
    $('#canvasDiv').append(canvas);
});
</script> 
```

# mysql - 高 mySQL cpu 使用率

> ID：11690020
> 
> 赞同：0
> 
> 时间：2012-07-27T14:36:57.337
> 
> 标签：mysql, load

我们的 mySQL 服务器大部分时间都以极高的负载运行。我们不知道它是从哪里来的。

如你看到的：

```
 589    admin       localhost   psa     Sleep
1440    gwingocm    localhost   gwingo  Sleep
1442    gwingocm    localhost   gwingo  Sleep
1441    amfbcm      localhost   amfb    Sleep
1444    gwingocm    localhost   gwingo  Sleep
1446    gwingocm    localhost   gwingo  Sleep
1447    gwingocm    localhost   gwingo  Sleep
1448    gwingocm    localhost   gwingo  Sleep
1449    amfbcm      localhost   amfb    Sleep
1450    amfbcm      localhost   amfb    Sleep
1498    admin       localhost   mysql   Query 
```

这是当时使用率非常高的进程列表。

任何一个好主意如何找出问题？

最好的问候，蒂姆

# php - 更新：PHP 如何制作一个页面以显示来自 sql 的信息以获取一个 ID？

> ID：11690022
> 
> 赞同：-2
> 
> 时间：2012-07-27T14:37:02.197
> 
> 标签：php, database, forms

我希望能够像在博客上一样单击我的条目的标题，然后让它转到一个单独的页面，只显示该特定标题的信息。

我在这个网站上做了很多搜索，找不到任何符合我想要的东西。

我设置了我的 php 以连接到我的数据库和所有内容，但我似乎不知道如何编写它，因此当我从主页单击时，它将创建另一个页面。

有没有办法创建一个链接，以便它搜索标题名称并找到 post_id 或我的主键并让它显示所有内容。

我之前的问题被认为是一个愚蠢的问题，所以我正在修改它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:39:18.420

这是一个可怕的想法。您基本上是在问如何创建可能完成相同事情的成千上万个页面。

编写一个页面，根据某个唯一 ID 获取您想要的信息并将其显示在模板中，这样您就可以 a) 编写最少的代码 b) 需要维护的最少页面以及 c) 站点内的一致性。

# php - 方法 getUserFromAvailableData 不存在

> ID：11690023
> 
> 赞同：0
> 
> 时间：2012-07-27T14:37:06.570
> 
> 标签：php, facebook-php-sdk, facebook-login

如果用户已经在另一个选项卡中连接到 facebook，我正在尝试设置一个系统来自动登录到我的站点，并且我从 Zend Framework 收到以下错误消息：

```
Message: Method "getUserFromAvailableData" does not exist and was not trapped in __call() 
```

我已经从[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)下载了 Facebook php API并将其上传到我的服务器，并且该方法确实存在，在 base-facebook.php 文件的第 463 行. 这是我调用 API 的地方，如果它有什么不同的话。

```
require_once(BASE_PATH . "/library/facebook-php/src/facebook.php");
$fbid = Facebook::getUser(); 
```

什么可能导致此错误？我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:58:00.030

在 getUser 函数的开发人员站点页面上，[在这里](https://developers.facebook.com/docs/reference/php/facebook-getUser/)，他们将该方法显示为静态的。他们使用 header `Facebook::getUser()`，但是如果您查看 base-facebook.php 中的源代码，您会发现这一行：

```
return $this->user = $this->getUserFromAvailableData(); 
```

即使他们在文档中显示它是静态的，或者至少让它看起来像，你可以在这里看到它实际上依赖于首先是一个 facebook 实例，以及它找不到方法的原因在我的代码中是我没有创建一个。一旦我创建了一个 facebook 实例，错误消息就消失了。

# javascript - 视频（自动播放）通过javascript隐藏但已经在页面加载时开始？

> ID：11690026
> 
> 赞同：0
> 
> 时间：2012-07-27T14:37:27.863
> 
> 标签：javascript, jquery, video, iframe, embed

我想找到一种简单的方法，通过隐藏它们并在单击预览图像后立即使它们可见，从而在我的博客中为我的视频获取自定义预览图像。用户 Dominic Green 帮助我几乎开始了它。

问题是：视频已经在页面加载后立即以自动播放模式开始播放（即使它被隐藏）（您可以在后台听到声音），但我希望在点击预览后立即开始自动播放-图片...

这是到目前为止我是如何做到的示例（单击花卉图像将使视频可见）：[http ://brayaz.de/test/example.html](http://brayaz.de/test/example.html)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:56:27.897

这相当复杂，因为不同服务（即 SoundCloud、Vimeo、YouTube）的 API 会表现不同。

我能想出的最佳解决方案是监听缩略图上的点击事件，然后测试嵌入式媒体类型，然后根据媒体类型（即 SoundCloud 音频、Vimeo 视频）发送一个“播放”API 调用。

但是，该解决方案将需要 javascript。也许更聪明的人会找到不同的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:47:56.740

您需要将 YouTube 嵌入代码中的 url 更改为“autoplay=0”而不是“autoplay=1”。

所以改变

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe> 
```

至

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=0" frameborder="0" allowfullscreen></iframe> 
```

如果您希望视频在单击缩略图后立即开始播放，则需要一些 javascript。如果是这种情况，请参阅：[https ://code.google.com/apis/ajax/playground/?exp=youtube#chromeless_player](https://code.google.com/apis/ajax/playground/?exp=youtube#chromeless_player)

# c# - 在字符串中查找模式并替换它

> ID：11690028
> 
> 赞同：1
> 
> 时间：2012-07-27T14:37:32.607
> 
> 标签：c#, regex

我需要`@[Alphanumeric1](Alphanumeric2:Alphanumeric3)`从长字符串中解析以下格式。下面是我的字符串：

```
This is a long text 
@[Alphanumeric1](Alphanumeric2:Alphanumeric3) again long text 
@[Alphanumeric11](Alphanumeric22:Alphanumeric33) again long text
@[Alphanumeric111](Alphanumeric222:Alphanumeric333) 
```

我需要将所有出现的( `@[Alphanumeric1](Alphanumeric2:Alphanumeric3)`) 替换为冒号(:) 之后的值，即我希望输出为

```
This is a long text 
Alphanumeric3 again long text 
Alphanumeric33 again long text
Alphanumeric333 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:41:37.793

`@\[[\w\d]*\]\([\w\d]*:([\w\d]*)\)`

这将匹配上面的三个字符串，并`:`在组**1**之后获取字母数字字符串。[在这里玩正则表达式](http://regexr.com?31ll1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:44:46.260

以下正则表达式应该能够处理该输入：

```
(@\[[a-zA-Z0-9]+\]\([a-zA-Z0-9]+:(?<match>[a-zA-Z0-9]+)\)) 
```

在 C# 中使用，以下将查找并替换字符串中的所有实例`input`：

```
string output = Regex.Replace(input, @"(@\[[a-zA-Z0-9]+\]\([a-zA-Z0-9]+:(?<match>[a-zA-Z0-9]+)\))", "${match}"); 
```

正则表达式解释：

```
(                           # beginning of group to find+replace
    @                       # match the '@'
    \[                      # match the '['
        [a-zA-Z0-9]+        # alpha-numeric match
    \]                      # match the ']'
    \(                      # match the '('
        [a-zA-Z0-9]+        # alpha-numeric match
        :                   # match the ':'
        (?<match>           # beginning of group to use for replacement
            [a-zA-Z0-9]+    # alpha-numeric match
        )
    \)                      # match the ')'
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:45:57.797

这应该可以解决问题：

```
class Program
{
    static void Main(string[] args)
    {
        string data = @"This is a long text 
@[Alphanumeric1](Alphanumeric2:Alphanumeric3) again long text 
@[Alphanumeric11](Alphanumeric22:Alphanumeric33) again long text
@[Alphanumeric111](Alphanumeric222:Alphanumeric333)";

        Debug.WriteLine(ReplaceData(data));
    }

    private static string ReplaceData(string data)
    {
        return Regex.Replace(data, @"@\[.+?\]\(.*?:(.*?)\)", match => match.Groups[1].ToString());
    }
} 
```

# windows - Windows平台上jruby中UTF-8中的Nokogiri gemspec无效字节序列

> ID：11690031
> 
> 赞同：0
> 
> 时间：2012-07-27T14:37:41.590
> 
> 标签：windows, jruby, nokogiri

我在我的应用程序中遇到了一个新错误。

> UTF-8 中的无效字节序列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:17:07.280

解决方案：

"Nokogiri (\xE9?\xB8)" 只需将其替换为以下解决方案："Nokogiri (\xE9\x8B\xB8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:13:13.923

安装 Nokogiri gem 会出现以下错误：

```
$ jruby -S gem install nokogiri
Fetching: nokogiri-1.5.5-java.gem (100%)
Invalid gemspec in [c:/jruby-1.7.0.preview1/lib/ruby/gems/shared/specifications/nokogiri-1.5.5-java.
gemspec]: invalid byte sequence in UTF-8
Successfully installed nokogiri-1.5.5-java
1 gem installed 
```

要删除错误消息，请按照“Flexo 的帖子”执行以下操作。

```
C:\jruby-1.7.0.preview1\lib\ruby\gems\shared\specifications\nokogiri-1.5.5-java.gemspec and replace all references of "Nokogiri (\xE9?\xB8)" with "Nokogiri (\xE9\x8B\xB8)". 
```

# css - 将鼠标悬停在 PNG 图像上时背景偏移/失真

> ID：11690035
> 
> 赞同：2
> 
> 时间：2012-07-27T14:37:49.673
> 
> 标签：css, google-chrome, hover, png

这是我在 Chrome 中遇到的问题。它不会发生在 Firefox 中。我将在底部提供 CSS、HTML 和 Jquery 示例。

问题：当我将鼠标悬停在 PNG 上时（现在恰好位于轮播 jquery 插件中），悬停图像替换了初始 PNG。当我使用 Jquery 的拖放功能拖动一个元素时，它甚至会发生。它可以正常工作，但是当它发生时，背景会稍微移动或扭曲一秒钟。这不是一个很好的用户体验，我想知道是否有人知道如何解决它。让我知道您需要查看哪些代码。

**代码示例**

HTML：

```
<li id="img-home"><img id="img-home-src" src="<?php echo base_url();?>files/assets/images/homepage/img.png" alt="" /></li> 
```

CSS：

```
li {
    text-align: center;
    cursor: pointer;
}

#img-home
{
    border:0;
    width:386px;
    height:484px;
    overflow:hidden;
    display: inline-block;
    padding: 0 0 0 0;
    margin: 0 0 0 0;
}

#img-home-src
{
    padding: 0 0 0 0;
    margin: 0 0 0 0;border:0;

} 
```

查询：

```
 $("#img-home").hover(
    function () {
          $("#img-home-src").attr("src","<?php echo base_url();?>files/assets/images/homepage/img_hover.png");
    }, 
    function () {
          $("#img-home-src").attr("src","<?php echo base_url();?>files/assets/images/homepage/img.png");
    }
  ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T04:13:02.027

我认为（如先前的答案所述）这是一个缓存/加载问题。简单的解决方法是在其上设置一个`background-image`via CSS 以便它预加载图像：

演示：http: [//jsfiddle.net/SO_AMK/cgMxe/4/](http://jsfiddle.net/SO_AMK/cgMxe/4/)

HTML（CSS 内联声明，以便您仍然可以轻松使用 PHP）：

```
<li id="img-home">
    <img id="img-home-src" src="http://dummyimage.com/386x484/000/0011ff&text=Test+Image" style="background-image: url(<?php echo base_url();?>files/assets/images/homepage/img_hover.png);" alt="" />
</li>​ 
```

CSS：相同

jQuery：相同

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T06:59:46.643

你真的需要使用*jQuery*在悬停时切换图像吗？
这是一个相当繁重的解决方案，它也会产生缓存问题，因为新图像仅在悬停动作时才开始下载。

您可以使用**纯 css通过****sprite**技术实现您的目标（改善用户体验），这将下载额外图像的时间减少到**零**，因为每个状态（悬停，活动）的每个图像组合成一个小图像，立即加载：

[**dabblet 上的演示**](http://dabblet.com/gist/3205292)

```
#img {
    width: 300px;
    height: 150px;
    background: url('//placekitten.com/g/300') no-repeat; 
}

#img:hover { background-position: 0 100%; } 
```

**阅读更多关于精灵的信息：**

*   [CSS Sprites：它们是什么，为什么它们很酷，以及如何使用它们](http://css-tricks.com/css-sprites/)
*   [CSS Sprites 的奥秘：技术、工具和教程](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T19:33:30.507

`img`元素是 native 的`inline-block`，因此不需要声明。如果您没有使用 CSS 重置，请查看[Eric Meyer 的](http://meyerweb.com/eric/tools/css/reset/)重置作为参考。它将有助于消除浏览器之间的渲染差异。

内联加载图像而不是作为 CSS 背景加载图像是有正当理由的 - 就这样吧。

```
**HTML**
<img src="img1" class="over">
<img src="img2" class="out">

**CSS**
@import url (reset.css);

img.over, img.out { position:absolute; z-index:2; }
img.out { z-index:1; }

**jQuery**
$('.over').mouseover(
    function() {
        $(this).next('img').css('z-index',3);
    }
);
$('.out').mouseout(
    function() {
        $(this).css('z-index',2);
        $(this).prev('img').css('z-index',3);
    }
); 
```

我使用`mouseover/out`而不是`hover`因为一旦顶部图像被隐藏或推到堆栈的底部，浏览器就会将其解释为 hover:out （因此它成为一个闪烁的元素）。

高温高压

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T03:53:01.080

该代码对我来说似乎是合法的。我不能把它放在上面的评论中，所以这只是意见，而不是回答。可能会发生这种情况，因为在加载页面的同时加载了第一张图片，而第二张图片是按需加载的。在悬停功能和从服务器完整下载图像之间，背景会移动一秒钟。尝试在页面上的某个位置调用第二张图片，就在顶部，然后给她 display:hidden 或类似的东西。重点是加载将保存在现金中并在调用悬停功能时使用的图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T23:21:18.360

不幸的是，我没有充分探索这个问题，无法准确指出原因是什么，但我发现了问题所在。我没有向大家提及代码的其他部分，因为我不知道这是问题的原因。所以，在这件事上道歉是必要的。

罪魁祸首是页面的背景图片。这是 CSS 读取的内容：

```
.background {
    background:url(../images/background/5.jpg) no-repeat;
    background-size:100% auto;
    -moz-background-size: 100% auto;         /* Gecko 1.9.2 (Firefox 3.6) */
    -o-background-size: 100% auto;           /* Opera 9.5 */
    -webkit-background-size: 100% auto;      /* Safari 3.0 */
    margin:0;
    padding:0;
    opacity: 1;
    height: 100%;
    position:absolute;
    width:100% !important;
    z-index:-2000;
    left:0;
    top:0;
} 
```

所有这些代码在 Firefox 和其他浏览器中都可以正常工作，但在 Chrome 中却不行。chrome出现问题的原因是`background-size:100% auto;`生产线。为了解决这个问题，我这样做了：

HTML： `<img src="5.jpg" class="bg" />`

CSS：

```
.bg {
    width:100%;
    margin:0;padding:0;border:0;
    height: auto;
    min-width:960px;
    z-index:-2000;
    position:absolute;
} 
```

瞧。在拖放和悬停事件中都没有失真问题。

# iphone - 在编辑模式下选择单元格时未调用 didSelectRowAtIndexPath

> ID：11690037
> 
> 赞同：2
> 
> 时间：2012-07-27T14:38:03.150
> 
> 标签：iphone, objective-c, ios, uitableview

在编辑模式下，我遇到了 tableview 问题。

该表应允许用户在编辑模式下选择多个文件，并且应标记复选框。

我遇到的问题是取消选择选定单元格时未调用 didSelectRowAtIndexPath 。但是，当单元格未被选中并被选中时，它会被调用。

表格视图具有以下属性集

```
 self.tblFiles.allowsMultipleSelectionDuringEditing = YES;
    self.tblFiles.allowsSelectionDuringEditing=YES; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:54:38.570

在取消选择你应该使用

```
tableView:didDeselectRowAtIndexPath: 
```

# html - Firefox 14.0.1 - Windows - 字体不起作用 - 错误的 URI 或不允许跨站点访问错误

> ID：11690042
> 
> 赞同：0
> 
> 时间：2012-07-27T14:38:09.903
> 
> 标签：html, css, firefox, fonts

如何修复此错误：

```
[06:31:06.469] downloadable font: download failed (font-family: "kidss" style:normal weight:normal stretch:normal src index:0): bad URI or cross-site access not allowed
source: <a href="http://www.mysite.pl/fonts/kidss.ttf" target="_blank">http://www.mysite.pl/fonts/kidss.ttf</a> @ <a href="http://www.mysite.pl/style.css" target="_blank">http://www.mysite.pl/style.css</a> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:39:26.287

将字体放在您自己的网站中并使用相对 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:54:38.227

检查您的域设置。如果您要访问 myfancysite.net，并且您没有被重定向到 www.myfancysite.net，这可能是您的问题。我们发现 Firefox 14 对与不合格域相关的 @font-face 工具包有一些奇怪的例外。在我们自动重定向到限定 URL 的网站上，我们在 FF14 中没有看到这个问题。

编辑：这个问题似乎会影响 FF14 Windows 32 位和 FF14 Mac 32 位和 64 位。FF14 64-bit for Win7 会自动反弹到符合条件的域。

编辑 2：我们做了更多的测试，这似乎也发生在 IE9 中。

# python - 将文本转换为其行列表

> ID：11690047
> 
> 赞同：1
> 
> 时间：2012-07-27T14:38:28.843
> 
> 标签：python, list, function

我的函数输出都是在单独的行上断开的所有值，我想把它变成一个列表。

```
The Score
Leon the Professional
Iron Man 
```

我想把它变成一个像这样的列表：

```
movies= ['The Score', 'Leon the Professional', 'Iron Man'] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T14:39:26.613

假设您的输入是一个字符串。

```
>>> text = '''The Score
Leon the Professional
Iron Man'''
>>> text.splitlines()
['The Score', 'Leon the Professional', 'Iron Man'] 
```

有关[splitlines()](http://docs.python.org/library/stdtypes.html?highlight=splitlines#str.splitlines)函数的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:54:34.253

假设您正在从文件中读取行：

```
with open('lines.txt') as f:
    lines = f.readlines()
    output = []
    for line in lines:
        output.append(line.strip()) 
```

# html - 使用按钮隐藏和显示列表

> ID：11690051
> 
> 赞同：0
> 
> 时间：2012-07-27T14:38:35.660
> 
> 标签：html, css

所以我有一个包含一些列表项的无序列表。我想使用按钮显示和隐藏列表项的第 n 个子项。

我尝试使用 :hover 按钮，但它不会响应。这是因为它是一个按钮吗？看一下代码。CSS：

```
div#right-column-sidebar {
    position: absolute; 
    top: 840px; 
    right: -140px
}
div#right-column-sidebar ol {
    position:absolute; 
    right: 150px;
    margin: 10px 0 10px 10px; 
    font-size: 20px; 
    color: red;
    list-style-type:none
}
div#right-column-sidebar ol li { 
    list-style-type:none;
    margin: 10px 0 10px 0;
    border-bottom: 1px dotted grey; 
    width: 200px; 
    display: block;
}
div#right-column-sidebar ol li:nth-child(11) {
    visibility:hidden
}

a.button {
    border: 1px solid lightgrey;
    no-repeat scroll top right;
    color: #444;
    display: block;
    float: left;
    font: normal 12px arial, sans-serif;
    height: 24px;
    margin-right: 6px;
    padding-right: 18px; /* sliding doors padding */
    text-decoration: none;
}

a.button span {
    display: block;
    line-height: 14px;
    padding: 5px 0 5px 18px;
}

a.button:hover div#right-column-sidebar ol li:nth-child(11){visibility:visible} {} 
```

HTML：

```
<div id="right-column-sidebar">
    <ol>
        <li><a href="#">Title 1</a></li>
        <li><a href="#">Title 2</a></li>
        <li><a href="#">Title 3</a></li>
        <li><a href="#">Title 4</a></li>
        <li><a href="#">Title 5</a></li>
        <li><a href="#">Title 6</a></li>
        <li><a href="#">Title 7</a></li>
        <li><a href="#">Title 8</a></li>
        <li><a href="#">Title 9</a></li>
        <li><a href="#">Title 10</a></li>
        <li><a href="#">Title 11</a></li>
        <li><a href="#">Title 12</a></li>
        <li><a href="#">Title 13</a></li>
        <li><a href="#">Title 14</a></li>
        <li><a href="#">Title 15</a></li>
        <li><a href="#">Title 16</a></li>
        <li><a href="#">Title 17</a></li>
        <li><a href="#">Title 18</a></li>
        <li><a href="#">Title 19</a></li>
        <li><a href="#">Title 20</a></li>
    </ol> 
    <a class="button" href="#"><span>Show more</span></a>
</div> 
```

我也愿意尝试一些js，添加加载效果会很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:50:03.253

当您使用 jQuery（正如其他人所建议的那样）时，您可以做一些像这样简单的事情

```
$('#nth_item_button').click( function() { $('ul#my_ul li:nth-child(3)').toggle(); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:48:03.813

CSS 只能使用`:hover`. 您的 HTML 结构不支持此功能。您将需要使用 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:48:10.320

查找 jQuery 的 .click()、.each() 和 .eq() 方法。jQuery 非常易于使用，跨浏览器兼容，您可以查看它们的效果页面并玩弄各种东西（淡入淡出、滑动等）。

jQuery.com

# c# - 我可以在 C# 中重载条件运算符吗？

> ID：11690053
> 
> 赞同：3
> 
> 时间：2012-07-27T14:38:40.747
> 
> 标签：c#, conditional-operator

在实际发布之前，我确实经历了[这个](https://stackoverflow.com/questions/9428577/how-to-overload-the-conditional-operator)和[这个。](https://stackoverflow.com/questions/4421706/operator-overloading/4421715#4421715)但这些是针对 C++ 的。同样的事情也适用于 C# 吗？我提供的第二个链接指出条件运算符不能重载，我没有看到原因（假设同样适用于 C#）。有人可以提供进一步阅读的链接，或者只是澄清此事？

编辑：

我没有遇到任何需要重载此运算符的实际场景，但我只是好奇为什么不能重载它。仅仅是因为没有任何实际可能的情况，这种重载可以提供任何重要的功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:42:51.393

可重载运算符列表在[这里](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.110%29.aspx)。有些你可以，有些你不能。

[此](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)页面显示如何重载可以重载的那些。

至于条件运算符（？：），不，你不能重载它。它特定于布尔值。如果你真的超载它意味着什么？它是 if/then/else 的简写。

我想你可以改写这个问题的方式是：“为什么我不能超载 if/then/else”？

真正的原因很可能与该语言的设计者选择不实现它有关。很可能，为该运算符提供重载并不能提供足够的好处来值得进行使其可重载的测试和努力。简而言之，这可能是时间/金钱的原因。对于添加到计算机语言中的每个功能，这意味着时间、精力和测试，必须与功能提供的好处相平衡。

最后，有些事情根本不值得实施。虽然我确信您可以从中找到*一些*好处，但实施成本可能超过了好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:43:21.100

不，`?:`不能重载。它在文档中特别说明：http: [//msdn.microsoft.com/en-us/library/8edha89s%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/8edha89s%28VS.71%29.aspx)

如果你问我，这是有充分理由的。`?:`影响控制流，因此重载意味着您​​必须验证表达式中变量的类型以评估控制流 -*每次*您试图弄清楚一段代码在做什么时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:57:19.713

不，您不能重载条件运算符。

[C# Language Specification 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=7029)的第 7.3.2 节涵盖了运算符重载：

> **7.3.2 运算符重载**
> 
> 所有一元和二元运算符都有预定义的实现，可在任何表达式中自动使用。除了预定义的实现之外，还可以通过在类和结构中包含运算符声明来引入用户定义的实现（第 10.10 节）。用户定义的运算符实现总是优先于预定义的运算符实现：仅当不存在适用的用户定义的运算符实现时，才会考虑预定义的运算符实现，如第 7.3.3 节和第 7.3.4 节所述。
> 
> 可重载的一元运算符有：
> 
> + - ！~ ++ -- 真假
> 
> 尽管 true 和 false 没有在表达式中显式使用（因此不包括在 §7.3.1 的优先级表中），但它们被视为运算符，因为它们在几个表达式上下文中调用：布尔表达式（§7.20）和涉及条件（第 7.14 节）和条件逻辑运算符（第 7.12 节）。
> 
> 可重载的二元运算符有：
> 
> + - * / % & | ^ << >> == != > < >= <=
> 
> 只有上面列出的运算符可以重载。特别是，不能重载成员访问、方法调用或 =、&&、||、??、?:、=>、checked、unchecked、new、typeof、default、as 和 is 运算符
> 
> ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:48:02.363

您不能重载仅对布尔值进行操作的运算符。C# 中的重载意味着当 Type 与运算符一起使用时，您可以为它指定特定的行为。

我可以看到这样做的唯一原因是允许某种“真实的”值，例如：

```
1 == true
0 == false
null == false
new string[] {} == false 
```

这是你想要做的吗？

# c# - 游戏程序正在跳过

> ID：11690059
> 
> 赞同：-4
> 
> 时间：2012-07-27T14:38:56.470
> 
> 标签：c#, .net

我正在尝试运行由 5 个类组成的游戏，但最重要的部分没有运行。请记住，我仍然是 C# 的初学者。所有 5 个类都是独立的，但我只在第一个类中键入命名空间以避免混淆，它们在每个类中都存在。该程序运行，但是当它到达战斗类时，它会完全跳过战斗循环并询问我是否想再次玩......请帮助我。

头等舱（我的入口点）：

```
class Program
{
    static void Main(string[] args)
    {
        MainGame maingame = new MainGame();
    }
} 
```

二等：

```
class MainGame
{
    Hero myhero;
    Battle battle;
    string answer; 

    public MainGame()
    {
        myhero = new Hero();
        Hero.Initialize(myhero);
        BasicGameLoop();

    }

    void BasicGameLoop()
    {
        do 
        {
            Monster monster = new Monster();
            battle = new Battle(myhero, monster);
            Console.WriteLine("Do you want to Play again??");
            answer= Console.ReadLine();
        }
        while(answer == "Y" || answer == "y");
    }
} 
```

第三类：

```
class Battle
{
    string choice;
    Random rand;
    int healing, fleechance, hitchance;

    public Battle(Hero hero, Monster monster)
    {
        Console.WriteLine("{0} is facing a {1}.", hero.Identifier, monster.Identifier);
    }

    public void BattleLoop(Hero hero, Monster monster)
    {                                                                     
        do
        {
            rand = new Random();
            DisplayChoices();
            choice = Console.ReadLine();
            hitchance = rand.Next(0, 100);
            switch (choice)
            {
                case "a":
                case "A"://this way a or A work
                    hitchance = rand.Next(0, 100);
                    if (hitchance > 30)
                    {
                        hero.AttackDamage = GetHeroDamage(hero);
                        Console.WriteLine("{0} Attacks!", hero.Identifier);
                        hero.AttackDamage -= monster.Defense;
                        Console.WriteLine("The Monster Loses {0}hp", hero.AttackDamage);
                    }
                    else
                    {
                        Console.WriteLine("{0} Missed!", hero.Identifier);
                    }
                    break;
                case "d":
                case "D":
                    Console.WriteLine("{0} Defends", hero.Identifier);
                    break;
                case "h":
                case "H":
                    healing = 400;
                    hero.CurrentHealth += healing;
                    Console.WriteLine("{0} uses a Potion!", hero.Identifier);
                    Console.WriteLine("{0} heals himself for {1} Points",hero.Identifier,healing);
                    break;
                case "f":
                case "F":
                    fleechance = rand.Next(0, 100);
                    if (fleechance > 40)
                    {
                        Console.WriteLine("{0} fled!",hero.Identifier);
                        Console.ReadLine();
                        Environment.Exit(0);
                    }
                    else
                    {
                        Console.WriteLine("Fleeing Failed");
                        Console.ReadLine();

                    }
                    break;
                default:
                    Console.WriteLine("Sorry that choice was invalid and the monster took a cheap shot!");
                    break;
            }

            Console.WriteLine();
            if (monster.isAlive == true)
            {
                hitchance = rand.Next(0, 100);
                if (hitchance > 30)
                {
                    monster.Strength = GetMonsterDamage(monster);
                    Console.WriteLine("The Monster Attacks!");
                    if (choice == "d" || choice == "D")
                    {
                        monster.Strength /= 2;
                    }
                    monster.Strength -= hero.Defense;
                    Console.WriteLine("The Hero loses {0}hp", monster.Strength);
                }
                else
                {
                    Console.WriteLine("The Monster Missed!");

                }
                Console.WriteLine("Press Enter to Continue");
                Console.ReadLine();
                Console.Clear();
            }
        }
        while (hero.isAlive == true && monster.isAlive == true);

        if (hero.CurrentHealth > 0)
        {
            Console.WriteLine("{0} emerged Victorious!", hero.Identifier);
        }
        else
        {
            Console.WriteLine("{0} has been defeated :(", hero.Identifier);
        }
        Console.ReadLine();
    }

    public void PrintStatus(Hero hero, Monster monster)
    {
        Console.Write(@"
   ********************************
             HP/MaxHP     MP/MaxMP
     {0}:   {1}/{2}hp    {3}/{4}mp
     {5}:   {6}/{7}hp    {8}/{9}mp
   ********************************
    ", hero.Identifier, hero.CurrentHealth, hero.MaxHealth, hero.CurrentMagic,       hero.MaxMagic,
    monster.Identifier, monster.CurrentHealth, monster.MaxHealth, monster.CurrentMagic,
    monster.MaxMagic);

    }
    string DisplayChoices()
    {
        string choice;
        Console.Write(@"
  __________________________
   Please Choose an action:
   (A)ttack
   (D)efend
   (H)eal
   (F)lee
   __________________________");
        Console.WriteLine();
        choice = Console.ReadLine();
        return choice;
    }

    public int GetHeroDamage(Hero hero)// 2nd Method to calculate the hero's Damage during battle.
    {
        int attackdamage;
        attackdamage = hero.AttackDamage;
        return attackdamage;
    }
    int GetMonsterDamage(Monster monster) // 3rd Method to calculate the monster's damage during the battle.
    {
        int attackdamage;
        attackdamage = monster.Strength;
        return attackdamage;
    }

} 
```

四级”

```
class Hero
{
    public int CurrentHealth, MaxHealth, CurrentMagic;
    public int MaxMagic, Strength, Defense, Agility;
    public int Experience, Gold, AttackDamage;
    public string Identifier;
    public bool isAlive;

    public Hero()
    {
    }
    public static void Initialize(Hero hero)
    {
        hero.CurrentHealth = 18;
        hero.MaxHealth = 18;
        hero.CurrentMagic = 8;
        hero.MaxMagic = 8;
        hero.Strength = 10;
        hero.Defense = 3;
        hero.Agility = 6;
        hero.Experience = 0;
        hero.Gold = 0;
        Console.WriteLine("What is your Hero's name?");
        hero.Identifier = Console.ReadLine();
        hero.isAlive = true;
        hero.AttackDamage = hero.Strength;
    }
  } 
```

第五课：

```
class Monster
{
    public int CurrentHealth, MaxHealth, CurrentMagic;
    public int MaxMagic, Strength, Defense, Agility;
    public int Experience, Gold, AttackDamage;
    public string Identifier;
    public bool isAlive;

    public Monster()
    {
        CurrentHealth = 8;
        MaxHealth = 8;
        CurrentMagic = 0;
        MaxMagic = 0;
        Strength = 5;
        Defense = 3;
        Agility = 4;
        Experience = 5;
        Gold = 2;
        Identifier = "Monster";
        isAlive = true;
        AttackDamage = Strength;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:41:09.843

看起来你错过了对 BattleLoop 的调用。尝试在 MainGame.BasicGameLoop 中`battle.BattleLoop()`的行之后添加。`battle = new Battle(myhero, monster);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:42:22.740

```
 Monster monster = new Monster();
 battle = new Battle(myhero, monster);
 battle.BattleLoop(myhero, monster);
 Console.WriteLine("Do you want to Play again??");
 answer= Console.ReadLine(); 
```

# c# - 不在我的数据库中更新

> ID：11690066
> 
> 赞同：0
> 
> 时间：2012-07-27T14:39:23.290
> 
> 标签：c#, linq, entity-framework, linq-to-entities

```
public void DependentUpdateManScheme(int DependentupdID, string EmployeeID, string Name, string Surname, string IDCardNo, string ContactNo, DateTime BirthDate, DateTime StartDate, DateTime EndDate, string Relation, double Payment)
        {
            HealthCareSystem.DataClassesDataContext db = new HealthCareSystem.DataClassesDataContext();

        var z = (from d in db.Dependents
                 where d.EmployeeID.Equals(EmployeeID)
                 join r in db.Relations on d.RelationID equals r.RelationID
                 select new DependentsX { DependentID = d.DependentID, EmployeeID = d.EmployeeID, Name = d.Name, Surname = d.Surname, IDCardNo = d.IDCardNo, ContactNo = d.ContactNo, BirthDate = d.BirthDate, StartSchemeDate = d.StartDate, EndSchemeDate = d.EndDate, RelationType = r.Type, Payment = d.Payment });

        List<DependentsX> oldList = z.ToList();
          foreach (DependentsX dep in oldList)
        {
            dep.DependentID = DependentupdID;
            dep.EmployeeID = EmployeeID;
            dep.Name = Name;
            dep.Surname = Surname;
            dep.IDCardNo = IDCardNo;
            dep.ContactNo = ContactNo;
            dep.BirthDate = BirthDate;
            dep.StartSchemeDate = StartDate;
            dep.EndSchemeDate = EndDate;
            dep.RelationID = Convert.ToInt32(Relation);
            dep.Payment = Payment;

            db.SubmitChanges();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:26:22.067

`DependentsX`是您要更新的对象的类型。这是在 LINQ Select 表达式中作为未附加到上下文的新对象创建的。上下文没有看到任何要更新的内容，因此它无法更新任何内容。

您需要更新 Entity Framework 知道的内容。

# javascript - 找到永远不会命中非库代码的 Backbone.js 事件错误的来源

> ID：11690074
> 
> 赞同：0
> 
> 时间：2012-07-27T14:39:39.107
> 
> 标签：javascript, jquery, debugging, backbone.js, google-chrome-devtools

很确定 Chrome 浏览器下面的错误输出是由于 Backbone.js 中的一个事件绑定到了一个不是函数的东西。

我真正需要知道的是被解雇的偶数的名称，我应该能够轻松找到错误的来源。通常我会设置一个断点，但线程永远不会触及任何项目代码。

**使用可用工具确定导致此错误的触发事件的好方法是什么？**

非常感谢！

![在此处输入图像描述](../Images/4b66c63932e4709b09891a11b3f18d56.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:44:58.077

检查你是否有`model: YourModel()`而不是`model: YourModel`

# internationalization - 播放框架：在 scala 视图中的 helper.form 中设置 Lang

> ID：11690076
> 
> 赞同：1
> 
> 时间：2012-07-27T14:39:58.310
> 
> 标签：internationalization, playframework-2.0

我在视图中有以下代码：

```
@(lang:Lang)...
...
<div>
...
@helper.form(action = routes.item.add) {
     <p>@helper.inputText(myItem("name"))</p>
     ...
    }
...
</div> 
```

在我的国际化文件中，我有`name`. 例如：

*   在`messages.en`：`name=Name`
*   在`messages.fr`：`name=Nom`

该视图始终使用法语标签呈现，`inputText`我不知道如何更改另一种语言，例如使用`lang`我的视图中定义的全局参数。

我一直在寻找一些解决方案，例如 :`@helper.form(action = routes.item.add, lang)`或相同`inputText`级别的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:52:00.960

我的解决方案：

```
@(lang:Lang)...

@import play.i18n._

@translate(text: String) = @{
 Message.get(lang, text)
}
...
<div>
...
@helper.form(action = routes.item.add) {
     <p>@helper.inputText(myItem("name"), '_label -> translate("name"))</p>
     ...
    }
...
</div> 
```

`'_`在 Play 中，可以使用约定向表单添加属性。我已经通过应用我自己的翻译功能来覆盖标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:45:52.127

你是用`Scala`还是`Java`？使用 Scala，您可以设置隐式语言。但是对于 Java，这并不像 Play 1.2.4 那样容易：

```
Lang.set(...) or .change() 
```

这将在 2.1 中解决：[https ://play.lighthouseapp.com/projects/82401/tickets/174-20-i18n-add-ability-to-define-implicit-lang-for-java-api](https://play.lighthouseapp.com/projects/82401/tickets/174-20-i18n-add-ability-to-define-implicit-lang-for-java-api)

请参阅 Google 群组中的先前讨论：[https ://groups.google.com/forum/?fromgroups#!topic/play-framework/dE1SPBaTM6w](https://groups.google.com/forum/?fromgroups#!topic/play-framework/dE1SPBaTM6w)

你是否使用 scala 看看帖子：[i18n 错误：控制器和模板使用不同的隐式语言](https://stackoverflow.com/questions/9733082/i18n-error-controller-and-templates-uses-different-implicit-langs?lq=1)

# jquery - 自定义 Royalslider 缩略图脚本

> ID：11690084
> 
> 赞同：0
> 
> 时间：2012-07-27T14:40:27.907
> 
> 标签：jquery, css, slider

我正在使用 Royalslider，我正在尝试设置一个外部缩略图列表，当您单击其中一个拇指或点击下一个按钮/使用箭头键/滑动该缩略图更改类以成为“突出显示”缩略图时。单击缩略图时效果很好，但我无法使用滑动/键盘/或下一个/上一个箭头。

我一直在尝试通过公共方法为此提出一个脚本，但我遇到了困难： mySliderInstance.numSlides // 幻灯片数 mySliderInstance.currentSlideId // 当前幻灯片 id mySliderInstance.lastSlideId // Last(previous) slide id
mySliderInstance.sliderWidth // 滑块宽度 mySliderInstance.sliderHeight // 滑块高度

看看这个例子

```
<script>
//Example, replacing arrows with arrow symbols and adding "1 / 5" naigation
var mySliderInstance = $('#sliderId').royalSlider({
    slideTransitionSpeed:400,
    beforeLoadStart:function() {                    
        $("p.navId").text((this.currentSlideId+1) + "/"  +   (this.numSlides) );
        this.arrowLeft.html("&larr;");
        this.arrowRight.html("&rarr;");
    },
    beforeSlideChange:function() {
        $("p.navId").text((this.currentSlideId+1) + "/"  +   (this.numSlides) );
    }       
}).data("royalSlider");
</script> 
```

想出一些东西。我用

```
$("#makingof_goto").click(function() {
    sliderInstance.goTo(0);
}); 
```

有没有办法使用 mySliderInstance.currentSlideId 修改脚本，以使幻灯片编号与缩略图匹配。就像 onslide 3 将 #this_thumb 的类更改为 .current_class 然后将 li 列表中的所有其他拇指更改为 .unselected 一样，执行以下操作：

```
$(function() {
$(".hd ul li").click(function(){
$(this).addClass("current").siblings().removeClass("current");
$("#space_goto").click(function() {
    sliderInstance.goTo(1);
    });
})
}); 
```

这是我在发送我的投资组合之前需要做的最后一件事，我已经为此奋斗了几天，但没有运气，对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:22:12.940

你可以用这个

```
slider.ev.on('rsAfterSlideChange', function(event) {
// triggers after slide change
 // Add class to the current thumbnail
 $(".thumb:eq("+slider.currSlideId+")").addClass("current");
}); 
```

# jquery - youtube xml 脚本文件无效

> ID：11690086
> 
> 赞同：0
> 
> 时间：2012-07-27T14:40:29.730
> 
> 标签：jquery, xmlhttprequest, youtube-api

我尝试使用此代码加载 youtube 视频脚本文件

```
var rqst=$.ajax( {
    dataType : 'jsonp', 
    type : 'GET', 
    url : 'https://www.youtube.com/api/timedtext?v=bwOhfoewMYs&lang=en&callback=alert', 

   success : function(response) {
alert("SUCCESS");
             }, 
   error : function() {
       alert("failed."); }
   }
); 
```

并出现此错误

```
Uncaught SyntaxError: Unexpected token < 
```

并且未分配变量`rqst`，因此我无法访问文件的 RespondText 屏幕截图：
![错误](../Images/227a6e3e19a77bac5022996723374031.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:42:12.290

您正在尝试将 XML 文件作为 JSONP 读取。
那是完全不可能的。

# c++ - 我们应该为中间继承类提供默认实现吗

> ID：11690089
> 
> 赞同：0
> 
> 时间：2012-07-27T14:40:36.313
> 
> 标签：c++

```
class A
{
public:
    A(…) {…}
    virtual ~A() {…}

private:
    // may contains data
};

class B : public A
{
public:
    B(…) {…}
private:
    // contains no data
};

class C : public B
{
public:
    C(…) {…}
    ~C() {…}
private:
    // may contains data
}; 
```

如您所见，`class A`是基类，所以我们必须提供一个已实现的虚拟析构函数。

问题> 我们是否必须为具体提供默认析构函数`class B`？ `class B`本身不需要实现自定义析构函数来释放任何分配的资源。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:43:44.567

不会。一旦一个基本析构函数是虚拟的，所有派生的析构函数都会自动成为虚拟的。如果默认实现就足够了，则不需要提供用户定义的析构函数。

（事实上​​，如果默认实现即使在基础中就足够了，您应该将其声明并定义为`virtual ~A() = default;`，而不是使用空主体。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:42:04.193

不，如果你没有资源可以释放，你不必这样做。

这同样适用于任何其他方法，包括`virtual`和`pure virtual`

# python - 安排 Celery 任务以最大限度地提高工人生产力的正确方法是什么？

> ID：11690096
> 
> 赞同：2
> 
> 时间：2012-07-27T14:41:15.527
> 
> 标签：python, heroku, celery, web-worker, markov-chains

我正在开发一个系统，该系统将为 AI 项目构建一个巨大的 n-gram 模型。
我的管道如下：
*资源输入*-->*获取数据*-->*解析器*-->*培训师*
资源输入（基本上是必须解析的 URL）不是恒定的，这意味着我可以一次引入大量数千个资源，后来又一大堆几十个等等。

我的想法是将管道的每一步都实现为 Celery 任务并将其部署在云上（例如，使用 Heroku 的 worker dynos）。但是我是 Celery 的新手，我对如何将这些任务排队以使我的工人 100% 工作并同时保持系统的完整性有疑问。
直接的方法是在前一个任务完成后立即开始排队任务，例如，如果我得到 1000 个项目的资源输入，我会安排 1000 个“获取数据”任务，每个任务都会排队一个“解析”任务完成后等等。但这会导致一个巨大的队列，因为在这些任务完成之前会有更多的资源进入，而且我知道构建模型需要几个月的时间（如果它完成的话！）。

所以我不确定 Celery 是否可以在不陷入内存问题（Heroku 有其限制）或我现在无法想象的任何其他问题的情况下处理所有这些问题。或者，也许我应该使用更复杂的技术，例如每 X 分钟调度一次任务块，将部分结果存储在数据库中等。这可能会避免其中一些问题，但我不会得到 100% 的工作时间。

有什么想法吗？
谢谢！

* * *

**编辑**

我的问题的答案实际上在接受答案的评论中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:12:04.950

通过为每个任务设置单独的队列并为每个队列运行一个专用的工作程序，您可以确保您的系统将利用 100% 的系统资源，同时关注每个任务。此外，您可以添加工作人员以根据任务运行时平衡任务处理。

例如，定义任务

```
@celery.task
def fetch(url):
    # fetch url
    return html

@celery.task
def parse(html):
    pass 
```

并配置[自动路由](http://celery.github.com/celery/userguide/routing.html#automatic-routing)：

> CELERY_ROUTES = {'tasks.fetch': {'queue': 'fetch_queue'}, 'tasks.parse': {'queue': 'parse_queue'}}

和运行工人：

```
$ celery worker -Q fetch_queue

$ celery worker -Q parse_queue 
```

每种任务类型都有一个单独的工作人员。

使用回调，您可以在获取后轻松解析：

```
fetch.apply_async((url), link=parse.subtask()) 
```

PS 对于获取工作人员，您可以使用[Eventlet 池](http://celery.github.com/celery/userguide/concurrency/eventlet.html)来利用异步 IO。

# php - PHP 在 '/' 之后获取 QUERY_STRING

> ID：11690104
> 
> 赞同：0
> 
> 时间：2012-07-27T14:41:44.740
> 
> 标签：php, .htaccess, get, pdo, query-string

我有我的域名，我想从这样的 URL 获取查询：`http://domain.com/querystring`  然后输出将是：`querystring`

它与 bit.ly 使用的技术和 Facebook 用于个人资料页面的技术相同。我必须在我的 .htaccess 文件中做些什么吗？还是有一个普通的PHP命令可以这样做。我认为它会重写某种.htaccess URL，但我只知道是否有其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:44:10.147

对于 Facebook 示例： `www.facebook.com/profile.php?id=####`

然后使用 mod_rewrite 看起来像`www.facebook.com/username`

但要获得`username`代码是：

```
$_GET['id']; 
```

Facebook在其数据库表中引用了`id`and`usernames`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:44:12.737

我假设您使用的是 Web 服务器，例如 Apache，并且`index.php`是您的控制器。

启用**mod_rewrite**，然后`.htaccess`在根目录（或您的虚拟主机定义）中配置一个文件。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

然后使用`$_SERVER['QUERY_STRING']`

检查[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)超全局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:51:29.350

如果您只想使用部分 URI 进行查询，您可以像这样从 $_SERVER 超全局获取整个 URI，然后将其拆分以获得您可能需要的任何部分

```
$uri = $_SERVER['REQUEST_URI'];
$pieces = explode("/", $uri);
$myQuery = $pieces[1]; 
```

# c# - GDI+ 内存利用率

> ID：11690106
> 
> 赞同：1
> 
> 时间：2012-07-27T14:41:58.230
> 
> 标签：c#, gdi+, cpu-usage

我已经使用 GDI+ 技术在 c# 中开发了一些组件...我正在使用无效函数来重新绘制组件..在做了一些研究并检查了 CPU 利用率之后..我可以看到当调用无效函数时，CPU 使用率突然增加一段时间后它被释放..有时调用组件重绘时这是可以的..但在我的情况下，我制作的组件在高峰时间一次又一次地被调用..突然CPU利用率达到100％.. .和系统似乎挂起..我做了很多代码优化，但似乎无效的方法只是杀死了整个性能..我只想知道..这个方法中实际调用了什么..以及最佳实践是什么充分利用这种方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:56:34.393

1) 使用 Perfview 分析您的应用程序： http: [//www.microsoft.com/en-us/download/details.aspx?id= 28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)

2) Invalidate 方法不应该实际绘制。它只是告诉操作系统哪些需要重绘。实际绘制的是 OnPaint 方法。检查你的绘图方法。通常，基于 GDI 的应用程序会查询脏区以限制重绘区域。

# vb.net - 由用户重命名的按钮

> ID：11690108
> 
> 赞同：1
> 
> 时间：2012-07-27T14:42:06.133
> 
> 标签：vb.net, button, user-input, messagebox

我在编写某些按钮时遇到问题。这是我到目前为止所得到的：

```
Public Class Form1

Dim Button(12) As Button
Dim X As Integer

Private Sub EventName()
    Dim message, title, defaultValue As String
    Dim myValue As Object
    If Label4.Text = "Admin" Then
        ' Set prompt.
        Message = "Enter Product Name"
        ' Set title.
        title = "Product Name"
        defaultValue = ""   ' Set default value.

        'Display message, title, and default value.
        myValue = InputBox(Message, title, defaultValue)

        Button(X).Text = myValue
    End If
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click, Button9.Click, Button8.Click, Button7.Click, Button6.Click, Button5.Click, Button4.Click, Button3.Click, Button2.Click, Button12.Click, Button11.Click, Button10.Click
    'Dim message, title, defaultValue As String
    'Dim myValue As Object
    For Me.X = 1 To 10

        >>>>>    <<<<<<<

    Next
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Button(1) = Button1
    Button(2) = Button2
    Button(3) = Button3
    Button(4) = Button4
    Button(5) = Button5
    Button(6) = Button6
    Button(7) = Button7
    Button(8) = Button8
    Button(9) = Button9
    Button(10) = Button10
    Button(11) = Button11
    Button(12) = Button12
End Sub 
```

我想要做的是，如果我单击按钮 7，则会出现一个输入框供用户输入按钮的名称。无论我在 之间尝试了什么`>>>>> <<<<<`，我似乎都无法做到正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:01:22.643

听起来您只是希望一个人单击一个按钮并更改该按钮的文本？

如果这是正确的，这样的事情将在您的点击方法中起作用：

```
With DirectCast(sender, Button)
  .Text = InputBox("Button Name", "Button Name", .Text)
End With 
```

如果每个按钮都需要相同的输入，请尝试以下操作：

```
Dim value As String = InputBox("Button Name", "Button Name")
For Each btn As Button In Buttons
  If btn IsNot Nothing Then
    btn.Text = value
  End If
Next 
```

您应该强烈考虑不再使用该 Buttons 数组。如果您需要在列表中保存这些按钮的引用，请改用 a `List(of Button)`。

# java - 具有额外列映射的 JPA 复合键

> ID：11690109
> 
> 赞同：0
> 
> 时间：2012-07-27T14:42:06.580
> 
> 标签：java, hibernate, jpa, composite-key

几天来，我一直在尝试让复合键工作，查看网络上的许多示例，但由于它不起作用，所以仍然缺少一些东西。使用下面发布的代码，我目前遇到以下错误：无法确定类型：java.util.Set，表：USER_PROFILE，列：[org.hibernate.mapping.Column(userProfileDataFilter)]。

如果我从 UserProfile 对象中注释掉 UserProfileDataFilter ，那么一切都在保存和删除的情况下顺利运行。我已经将注释从变量移到了吸气剂，但运气不好。所以，我不确定还需要做什么，这就是我在这里请求帮助的原因。

非常感谢通过这个邪恶的注释迷宫提供的任何指导。

**用户资料类别：**

```
@Entity
@Table(name="USER_PROFILE")
public class UserProfile extends UserProfileAbstract implements Serializable {

private static final long serialVersionUID = CommonDefines.SERIALVERSIONUID;

public Company company; 
private Set<UserProfileDataFilter> userProfileDataFilter = new HashSet<UserProfileDataFilter>(0);

public UserProfile(){super();}
public UserProfile(String ploginName, String ppassword, Date ppasswordExprDt, String pfirstName, String plastName,
        String pemail, UUID pcompanyId, Long pstatusId, UUID pcrtdId, Date pcrtdDt, UUID pmodId, Date pmodDt){

    super(ploginName, ppassword, ppasswordExprDt, pfirstName, plastName,
            pemail, pcompanyId, pstatusId, pcrtdId, pcrtdDt, pmodId, pmodDt);
}

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="COMPANY_ID",insertable=false,updatable=false,nullable=false)
public Company getCompany() {
    return company;
}
public void setCompany(Company company) {
    this.company = company;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.userProfile", cascade=CascadeType.ALL)
public Set<UserProfileDataFilter> getUserProfileDataFilter() {
    return userProfileDataFilter;
}
public void setUserProfileDataFilter(
        Set<UserProfileDataFilter> userProfileDataFilter) {
    this.userProfileDataFilter = userProfileDataFilter;
} 
```

**用户配置文件数据过滤器类（复合键）：**

```
@Entity
@Table(name="USER_PROFILE_DATA_FILTER")
@AssociationOverrides({
@AssociationOverride(name="pk.userProfile", joinColumns=@JoinColumn(name="USER_PROFILE_ID")),
@AssociationOverride(name="pk.dataFilter", joinColumns=@JoinColumn(name="DATA_FILTER_ID")) })
public class UserProfileDataFilter implements Serializable {

private static final long serialVersionUID = CommonDefines.SERIALVERSIONUID;
private UserProfileDataFilterPK pk = new UserProfileDataFilterPK();
private UUID crtdId;
private Date crtdDt;
private UUID modId;
private Date modDt;

@EmbeddedId
public UserProfileDataFilterPK getPk() {
    return pk;
}

public void setPk(UserProfileDataFilterPK pk) {
    this.pk = pk;
}

@Transient
public UserProfile getUserProfile() {
    return getPk().getUserProfile();
}

public void setUserProfile(UserProfile userProfile) {
    getPk().setUserProfile(userProfile);
}

@Transient
public DataFilter getDataFilter() {
    return getPk().getDataFilter();
}

public void setDataFilter(DataFilter dataFilter) {
    getPk().setDataFilter(dataFilter);
}

@Column(name="CRTD_ID", nullable=false)
public UUID getCrtdId() {
    return crtdId;
}

public void setCrtdId(UUID crtdId) {
    this.crtdId = crtdId;
}

@Column(name="CRTD_DT", nullable=false)
@Temporal(TemporalType.TIMESTAMP)
public Date getCrtdDt() {
    return crtdDt;
}

public void setCrtdDt(Date crtdDt) {
    this.crtdDt = crtdDt;
}

@Column(name="MOD_ID", nullable=false)
public UUID getModId() {
    return modId;
}

public void setModId(UUID modId) {
    this.modId = modId;
}

@Column(name="MOD_DT", nullable=false)
@Temporal(TemporalType.TIMESTAMP)
public Date getModDt() {
    return modDt;
}

public void setModDt(Date modDt) {
    this.modDt = modDt;
}
} 
```

**USER PROFILE DATA FILTER PK（用于定义密钥的类）**

```
@Embeddable
public class UserProfileDataFilterPK implements Serializable {

private static final long serialVersionUID = CommonDefines.SERIALVERSIONUID;
private UserProfile userProfile;
private DataFilter  dataFilter;

@ManyToOne
public UserProfile getUserProfile() {
    return userProfile;
}
public void setUserProfile(UserProfile userProfile) {
    this.userProfile = userProfile;
}

@ManyToOne
public DataFilter getDataFilter() {
    return dataFilter;
}
public void setDataFilter(DataFilter dataFilter) {
    this.dataFilter = dataFilter;
}

public boolean equals(Object o) {
if (this == o) return true;
if (o == null || getClass() != o.getClass()) return false;

UserProfileDataFilterPK that = (UserProfileDataFilterPK) o;

if (userProfile != null ? !userProfile.equals(that.userProfile) : that.userProfile != null) return false;
if (dataFilter != null ? !dataFilter.equals(that.dataFilter) : that.dataFilter != null)
    return false;

return true;
}

public int hashCode() {
    int result;
    result = (userProfile != null ? userProfile.hashCode() : 0);
    result = 31 * result + (dataFilter != null ? dataFilter.hashCode() : 0);
    return result;
}
} 
```

**数据过滤器类：**

```
@Entity
@Table(name="DATA_FILTER")
public class DataFilter extends DataFilterAbstract {

private static final long serialVersionUID = CommonDefines.SERIALVERSIONUID;

@Transient
protected boolean selected;

@OneToMany(mappedBy="dataFilterId")
public Set<DataFilterDetail> dataFilterDetails;

public DataFilter(){super();}
public DataFilter(boolean pselected, String pname, String pdescription, boolean pActive, UUID pcrtdId, Date pcrtdDt, UUID pmodId, Date pmodDt){
    super(pname,pdescription,pActive, pcrtdId, pcrtdDt, pmodId, pmodDt);
    selected = pselected;
}

public boolean isSelected() {
    return selected;
}
public void setSelected(boolean selected) {
    this.selected = selected;
}
public Set<DataFilterDetail> getDataFilterDetails() {
    return dataFilterDetails;
}
public void setDataFilterDetails(Set<DataFilterDetail> dataFilterDetails) {
    this.dataFilterDetails = dataFilterDetails;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:50:19.303

有时您将注释放在字段上，有时放在访问器（getter）上。始终将它们放在给定的类层次结构中的相同位置。

`@Id`IIRC，Hibernate 仅考虑与（或）注释放置在同一位置的`@EmbeddedId`注释。因此，如果`@Id`在 getter 上，并且您`@OneToMany`在字段上有 a，则`@OneToMany`注释将被忽略。

# .net - 另：无法创建类型的常量值

> ID：11690119
> 
> 赞同：1
> 
> 时间：2012-07-27T14:42:23.100
> 
> 标签：.net, entity-framework, entity-framework-4

Eveytime 我想我已经掌握了这些东西。

完全错误：

无法创建类型为“Models.staffnames”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

版本：.Net 4 EF 4

我认为这与 DU 和 db.UserProfiles 是 Enumerable 有关，但是当我尝试将其推回以使所有 IQueryable 都发生时，整个事情就爆炸了。就目前而言，在构建支持列表时会发生错误。

有趣的是，这个问题似乎只有在我使用 Roles 提供程序时才会出现。在过去，我只是将它转储到 for 循环中。

任何帮助，将不胜感激。

代码：

```
IEnumerable<MembershipUser> du = Roles.GetUsersInRole("Dealer").Select(u => Membership.GetUser(u)).AsEnumerable();
        IQueryable<staffnames> du_up = du.Join(db.UserProfiles.AsEnumerable(), mu => (Guid)mu.ProviderUserKey, up => up.UserID, (mu, up) => new staffnames
        {
            UserId = (Guid)mu.ProviderUserKey,
            FirstName = up.FirstName,
            LastName = up.LastName
        }).AsQueryable();
        List<MemberSupportModel> support = db.Wins_support.Where(s=>s.dealerid == uid && !s.closed).Select(s=> new MemberSupportModel{
             aeramanagerack = s.aeramanagerack,
             amgrname = du_up.Where(a => a.UserId == s.aeramanger).Select(a=>a.FirstName+" "+a.LastName).FirstOrDefault(),
             aeramangerackdate = s.aeramangerackdate,
             atypedesc = _atype.Where(wt => wt.Value == s.atypeid).Select(wt => wt.Description).FirstOrDefault(),
             wtypedesc = _wtype.Where(wt => wt.Value == s.typeid).Select(wt => wt.Description).FirstOrDefault(),
             comment =s.comment,
             dateSubmitted = s.dateSubmitted,
             vdate =s.vdate,
             venuename = s.Venues_Logs.Venue.venueName           
        }).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:39:24.640

问题出在这条线上`amgrname = du_up.Where(...`，因为它是*内存*`du_up`中非原始类型的集合，因此出现了异常。在这里没有帮助，内存中的内存，你不能改变它。*`AsQueryable`*

 *我会尝试分别从数据库加载您需要的数据，然后将您的`du_up`集合与从数据库加载的数据集合合并：

```
// LINQ to Objects in memory
IEnumerable<MembershipUser> du = Roles.GetUsersInRole("Dealer")
    .Select(u => Membership.GetUser(u));

// LINQ to Objects in memory
// db.UserProfiles.AsEnumerable() loads whole UserProfiles table from DB
IEnumerable<staffnames> du_up = du.Join(db.UserProfiles.AsEnumerable(),
    mu => (Guid)mu.ProviderUserKey, up => up.UserID, (mu, up) => new staffnames
    {
        UserId = (Guid)mu.ProviderUserKey,
        FirstName = up.FirstName,
        LastName = up.LastName
    });

// LINQ to Entites = database query
List<MemberSupportModel> support = db.Wins_support
    .Where(s=>s.dealerid == uid && !s.closed)
    .Select(s=> new // anonymous result object
    {
        aeramanagerack = s.aeramanagerack,
        aeramanger = s.aeramanger, // needed later for the du_up Where clause
        aeramangerackdate = s.aeramangerackdate,
        atypedesc = _atype.Where(wt => wt.Value == s.atypeid)
                          .Select(wt => wt.Description)
                          .FirstOrDefault(),
        wtypedesc = _wtype.Where(wt => wt.Value == s.typeid)
                          .Select(wt => wt.Description)
                          .FirstOrDefault(),
        comment = s.comment,
        dateSubmitted = s.dateSubmitted,
        vdate = s.vdate,
        venuename = s.Venues_Logs.Venue.venueName
    })
    .AsEnumerable() // execute database query
    // now LINQ to Objects in memory again
    // Copy values from anonymous result object and select data from du_up
    .Select(s => new MemberSupportModel
    {
        aeramanagerack = s.aeramanagerack,
        amgrname = du_up.Where(a => a.UserId == s.aeramanger)
                        .Select(a => a.FirstName + " " + a.LastName)
                        .FirstOrDefault(),
        aeramangerackdate = s.aeramangerackdate,
        atypedesc = s.atypedesc,
        wtypedesc = s.wtypedesc,
        comment = s.comment,
        dateSubmitted = s.dateSubmitted,
        vdate = s.vdate,
        venuename = s.venuename
    })
    .ToList(); 
```*

# c# - Wininet 缓存 API 在 Windows 8 中挂起

> ID：11690121
> 
> 赞同：5
> 
> 时间：2012-07-27T14:42:28.873
> 
> 标签：c#, pinvoke, windows-8, wininet

我正在使用 P/Invoke 和 C# 来清除缓存条目，如下所示。该代码似乎在 32 位和 64 位的 Windows 7 上都可以正常工作。在 Windows 8 Release Candidate 上，它在`DeleteUrlsFromGroup`调用时挂起。

```
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "FindFirstUrlCacheGroup",
    CallingConvention = CallingConvention.StdCall)]
private static extern IntPtr FindFirstUrlCacheGroup(
    int dwFlags,
    int dwFilter,
    IntPtr lpSearchCondition,
    int dwSearchCondition,
    ref long lpGroupId,
    IntPtr lpReserved);
// For PInvoke: Retrieves the next cache group in a cache group enumeration
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "FindNextUrlCacheGroup",
    CallingConvention = CallingConvention.StdCall)]
private static extern bool FindNextUrlCacheGroup(
    IntPtr hFind,
    ref long lpGroupId,
    IntPtr lpReserved);
// For PInvoke: Releases the specified GROUPID and any associated state in the cache index file
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "DeleteUrlCacheGroup",
    CallingConvention = CallingConvention.StdCall)]
private static extern bool DeleteUrlCacheGroup(
    long GroupId,
    int dwFlags,
    IntPtr lpReserved);
// For PInvoke: Begins the enumeration of the Internet cache
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "FindFirstUrlCacheEntryA",
    CallingConvention = CallingConvention.StdCall)]
private static extern IntPtr FindFirstUrlCacheEntry(
    [MarshalAs(UnmanagedType.LPTStr)] string lpszUrlSearchPattern,
    IntPtr lpFirstCacheEntryInfo,
    ref int lpdwFirstCacheEntryInfoBufferSize);
// For PInvoke: Retrieves the next entry in the Internet cache
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "FindNextUrlCacheEntryA",
    CallingConvention = CallingConvention.StdCall)]
private static extern bool FindNextUrlCacheEntry(
    IntPtr hFind,
    IntPtr lpNextCacheEntryInfo,
    ref int lpdwNextCacheEntryInfoBufferSize);
// For PInvoke: Removes the file that is associated with the source name from the cache, if the file exists
[DllImport(@"wininet",
    SetLastError = true,
    CharSet = CharSet.Auto,
    EntryPoint = "DeleteUrlCacheEntryA",
    CallingConvention = CallingConvention.StdCall)]
static extern bool DeleteUrlCacheEntry(string lpszUrlName);

/// <summary>
/// Clears the cache of the web browser
/// </summary>
[HandleProcessCorruptedStateExceptions]
public static void ClearCache(Uri hostName)
{
    if (hostName == null)
    {
        return;
    }

    long groupId = 0;
    try
    {
        // Delete the groups first.
        IntPtr enumHandle = FindFirstUrlCacheGroup(0, CACHEGROUP_SEARCH_ALL, IntPtr.Zero, 0, ref groupId, IntPtr.Zero);
        if (enumHandle != IntPtr.Zero && ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error())
        {
            return;
        }

        // Loop through Cache Group, and then delete entries.
        while (true)
        {
            if (ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error() || ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error())
            {
                break;
            }

            // Delete a particular Cache Group.
            // Hangs on WIndows 8
            bool returnValue = DeleteUrlCacheGroup(groupId, CACHEGROUP_FLAG_FLUSHURL_ONDELETE, IntPtr.Zero);
            if (!returnValue && ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error())
            {
                returnValue = FindNextUrlCacheGroup(enumHandle, ref groupId, IntPtr.Zero);
            }
            if (!returnValue && (ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error() || ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error()))
                break;
        }
        DeleteUrlsFromGroup(hostName); // this hangs on Windows 8
    }
    catch (AccessViolationException)
    {

    }
} 
```

对 Windows 8 的 Win API 更改有任何见解/参考吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:35:21.640

也有同样的麻烦，但对于 c++ （来自这个 KB [http://support.microsoft.com/kb/815718](http://support.microsoft.com/kb/815718)）。我最终只是检查 DeleteUrlCacheGroup() 是否继续尝试删除相同的 groupId 值。

我跟踪前一个 groupId，如果它与当前 groupId 匹配，我就打破循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T06:27:18.667

@jimbojones：我不确定您是否还在寻找答案，但我刚刚遇到了同样的问题并找到了解决方法。问题不在于“DeleteUrlCacheGroup”，它在您的 while 循环中

```
while (true)
        {
            if (ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error() || ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error())
            {
                break;
            }

            // Delete a particular Cache Group.
            // Hangs on WIndows 8
            bool returnValue = DeleteUrlCacheGroup(groupId, CACHEGROUP_FLAG_FLUSHURL_ONDELETE, IntPtr.Zero);
            if (!returnValue && ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error())
            {
                returnValue = FindNextUrlCacheGroup(enumHandle, ref groupId, IntPtr.Zero);
            }
            if (!returnValue && (ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error() || ERROR_FILE_NOT_FOUND == Marshal.GetLastWin32Error()))
                break;
        } 
```

如果使用 groupdid '0' 调用您的代码，它将永远不会返回 false 并因此导致您的循环无限，这实际上导致您的应用程序挂起。我没有在 Windows 8 上遇到这个问题，而是在 Windows 7 本身上。场景可能会有所不同，但我认为您面临同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T16:24:53.313

每个人都链接到的那篇 kb 文章中有很多错误（另一个答案的源代码来自哪里），我浪费了大约 2 天时间试图让它在所有必要的设置中工作。它是通过互联网复制粘贴的，并且基于操作系统和 IE 版本报告了许多错误。

Fiddler 最初由 Microsoft 员工编写，由 FiddlerCore.dll 提供支持。Fiddler 的 Telerik（当前所有者/维护者/卖家）仍然免费更新、维护和赠送 FiddlerCore。如果您不想添加对 FiddlerCore 的引用，则可以反汇编 dll，它显示了调用所有这些可怕的 WinINet 函数的正确方法，但我认为将其发布在这里会损害 Telerik / plagarism。

目前，Fiddlercore 托管在这里：[http ://www.telerik.com/fiddler/fiddlercore](http://www.telerik.com/fiddler/fiddlercore)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:17:01.143

我没有看到 DeleteUrlsFromGroup 的 pinvoke 声明，只有 DeleteUrlCacheEntry。我认为这是挂起的方法？

如果是这种情况，您显式调用函数的 ANSI 版本似乎很奇怪：

```
EntryPoint = "DeleteUrlCacheEntryA" 
```

但也指定：

```
CharSet = CharSet.Auto 
```

这将向我表明您正在将 Unicode 字符串传递给需要 ANSI 字符串的函数。来自 MSDN：

> 自动为目标操作系统适当地编组字符串。在 Windows NT、Windows 2000、Windows XP 和 Windows Server 2003 系列上，默认值为 Unicode；Windows 98 和 Windows Me 上的默认值为 Ansi。

要么不要指定带有 *A 或 *W 扩展名的函数，因为 pinvoke 层将为您映射它，或者调用 *W 版本的函数，因为您使用 CharSet.Auto 传递 Unicode 字符串。如果您要显式调用函数的 ANSI/Unicode 版本，我也会显式地使用匹配的 CharSet。

# cuda - 使用异步内存传输的 CUDA CPU-GPU 回调

> ID：11690123
> 
> 赞同：0
> 
> 时间：2012-07-27T14:42:37.810
> 
> 标签：cuda

各位 Cuda 程序员，

我正在尝试使用轮询机制实现 cpu-gpu 回调机制。我有 2 个长度为 1 的数组（a 和 cpuflag，对应于设备端 dev_a 和 gpuflag）（基本上是 2 个变量）。

首先 CPU 清除 a 并等待 gpuflag 的更新。GPU 看到这个 a 的清除，然后更新 gpuflag。CPU 异步不断地将 gpuflag 传输到 cpuflag 并等待标志中的更新。一旦 CPU 看到更新，它会再次重置 a 并将其异步发送到 gpu。GPU 再次看到 a 的清除并更新 gpuflag 并且乒乓过程继续。我希望这个过程持续 100 次。

整个代码在这里。你可以通过说 nvcc -o output filename.cu 来编译它我无法理解为什么代码没有表现出乒乓行为。非常感谢任何形式的帮助。提前致谢。

```
#include <stdio.h>

#define LEN 1
#define MAX 100

__global__ void myKernel(int len, int *dev_a, int *gpuflag) {
        int tid = threadIdx.x;
        gpuflag[tid] = 0;

        while(true){
        //Check if cpu has completed work
                if(dev_a[tid] == 0){
            //Do gpu work and increment flag
                        dev_a[tid] = 1;
                        gpuflag[tid]++;

            //Wait till cpu detects the flag increment and resets
                        while(true){
                                if(dev_a[tid] == 0){
                                        break;
                                }
                        }
                }
        //Max 100 ping pongs
        if(gpuflag[tid]==MAX){
            break;
        }
        }
}

int main( void ) {
        int index, *cpuflag, *gpuflag, value;

        int *a;
        int *dev_a;

        cudaStream_t stream0, stream1;

        cudaStreamCreate( &stream0 );
        cudaStreamCreate( &stream1 );

        cudaMalloc ( (void**)&gpuflag, LEN*sizeof(int) );
        cudaMemset ( gpuflag, 0, LEN*sizeof(int) );
        cudaHostAlloc( (void**)&cpuflag, LEN*sizeof(int), cudaHostAllocDefault );

        cudaMalloc ( (void**)&dev_a, LEN*sizeof(int) );
        cudaMemset ( dev_a, 0, LEN*sizeof(int) );
        cudaHostAlloc( (void**)&a, LEN*sizeof(int), cudaHostAllocDefault );

    //Reset everything
        for(int i=0; i<LEN; i++)
                a[i] = 0;

    //Auxillary variables
        index = 0;
    value = 1;

    //call kernel
        myKernel<<<1,1,0,stream0>>>(LEN, dev_a, gpuflag);

        while(true){
        //Asynchronously copy gpu flag
                cudaMemcpyAsync(cpuflag, gpuflag, LEN*sizeof(int), cudaMemcpyDeviceToHost, stream1);
        //Check if increment has happened or not
                if(cpuflag[index] == value){
            //if yes, reset 
                for(int i=0; i<LEN; i++)
                        a[i] = 0;
            //transfer asynchronously
                    cudaMemcpyAsync(dev_a, a, LEN*sizeof(int), cudaMemcpyHostToDevice, stream1);
            //increment pattern
            value++;
                        printf("GPU updated once. Value is a[%d] = %d, cpuflag = %d\n", index, a[index], cpuflag[index]);
                } else {
                        printf("------------GPU didn't updated. Value is a[%d] = %d, cpuflag = %d\n", index, a[index], cpuflag[index]);
        }

        //Max 100 ping-pongs
        if(value == MAX){
            break;
        }
        }

    cudaFreeHost(a);
    cudaFreeHost(cpuflag);

    cudaFree(dev_a);
    cudaFree(gpuflag);

    cudaStreamDestroy( stream0 );
    cudaStreamDestroy( stream1 );

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-10T02:12:54.367

可能缺少的主要内容是适当使用`volatile`.

这是一个简化的、完整的示例：

```
$ cat t763.cu
#include <stdio.h>

#define LEN 1
#define MAX 100
#define DLEN 1000
#define nTPB 256

#ifdef CDP_WORKER
__global__ void cdp_worker(int len, float *data){

  int tid = threadIdx.x+blockDim.x*blockIdx.x;
  if (tid < len) data[tid]++; // simple increment
}
#endif

// only call this kernel with 1 thread
__global__ void myKernel(int len, int dlen, volatile int *dev_a, int *gpuflag, float *data) {
        int tid = threadIdx.x+blockDim.x*blockIdx.x;

        while(gpuflag[tid] < MAX){
        //Check if cpu has completed work
                if(dev_a[tid] == 0){
            //Do gpu work and increment flag
#ifdef CDP_WORKER
                        cdp_worker<<<(dlen+nTPB-1)/nTPB, nTPB>>>(dlen, data);
                        cudaDeviceSynchronize();
#endif
                        dev_a[tid] = 1;
                        gpuflag[tid]++;

                                }
        }
}

void issue_work(int value, float *h_data, float *d_data, int len, cudaStream_t mystream){
#ifdef CDP_WORKER
  cudaMemcpyAsync(h_data, d_data, len*sizeof(float), cudaMemcpyDeviceToHost, mystream);
  cudaStreamSynchronize(mystream);
  for (int i = 0; i < len; i++) if (h_data[i] != value+1) {printf("fault - was %f, should be %f\n", h_data[i], (float)(value+1)); break;}
  cudaMemcpyAsync(d_data, h_data, len*sizeof(float), cudaMemcpyHostToDevice, mystream); // technically not really necessary
  cudaStreamSynchronize(mystream);
#endif
  return;
}
int main( void ) {
        int *gpuflag, value;
        float *h_data, *d_data;
        cudaHostAlloc(&h_data, DLEN*sizeof(float), cudaHostAllocDefault);
        cudaMalloc(&d_data, DLEN*sizeof(float));
        volatile int *z_a;

        cudaStream_t stream0, stream1;

        cudaStreamCreate( &stream0 );
        cudaStreamCreate( &stream1 );

        cudaMalloc ( (void**)&gpuflag, LEN*sizeof(int) );
        cudaMemset ( gpuflag, 0, LEN*sizeof(int) );
        cudaMemset ( d_data, 0, DLEN*sizeof(float));
        cudaHostAlloc( (void**)&z_a, LEN*sizeof(int), cudaHostAllocMapped );
        for (int i = 0; i < LEN; i++) z_a[i] =
        value = 0;
    //call kernel
        myKernel<<<1,1,0,stream0>>>(LEN, DLEN, z_a, gpuflag, d_data);

        while(value<MAX){
          if (z_a[0] == 1) {
             issue_work(value, h_data, d_data, DLEN, stream1);
             z_a[0] = 0;
             printf("%d", value%10);
             value++;}
        }
        printf("\n");
        return 0;
}
$ nvcc -o t763 t763.cu
$ cuda-memcheck ./t763
========= CUDA-MEMCHECK
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
========= ERROR SUMMARY: 0 errors
$ nvcc -DCDP_WORKER -arch=sm_35 -rdc=true t763.cu -o t763 -lcudadevrt
$ cuda-memcheck ./t763
========= CUDA-MEMCHECK
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
========= ERROR SUMMARY: 0 errors
$ 
```

将其扩展为在同一个经线中的多个线程上工作并非易事。

但是，我扩展了基本示例以在 cc3.5+ 设备上演示父内核可以是监督内核，并且它可以通过子内核启动工作。这是通过使用`CDP_WORKER`CUDA 动态并行所需的开关和附加开关进行编译，并在 cc3.5+ 设备上运行来实现的。

# javascript - 按键打开未聚焦的选项卡

> ID：11690128
> 
> 赞同：0
> 
> 时间：2012-07-27T14:42:58.133
> 
> 标签：javascript, jquery, internet-explorer-8, jquery-selectors, jquery-events

我有以下代码可以正常工作：

```
// click on the button
$(".btnHeaderSearch").click(function(event) 
{ 
    event.preventDefault();
    window.open('/search.aspx?phrase=' + $('.txtHeaderSearch').val());
}); 
```

它将在新窗口/选项卡中打开 search.aspx，并且该窗口/选项卡将具有焦点或位于所有其他窗口/选项卡的前面。

但是，以下代码不起作用：

```
// press enter key when textbox has focus to simulate button click:
$('.txtHeaderSearch').bind('keyup', function(e) {
    if ( e.keyCode === 13 ) { // 13 is enter key
        window.open('/search.aspx?phrase=' + $('.txtHeaderSearch').val());
    }
}); 
```

这里发生的是窗口/选项卡确实打开了，但是它在所有其他窗口后面打开了一个窗口，或者它打开了一个选项卡而不给选项卡焦点，所以我最终留在了原始页面上。

如何按回车键打开一个窗口/选项卡，其行为方式与单击上面的按钮相同？即我希望这两个代码位都可以打开一个窗口或选项卡，该窗口或选项卡立即具有焦点，就像当前单击一样。

我在 IE8 中得到了这种行为。它在谷歌浏览器中运行良好，我没有在任何其他浏览器上尝试过。不幸的是，我需要让它在 IE8 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:33:16.320

来自[http://msdn.microsoft.com/en-us/library/ie/ms537632(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms537632(v=vs.85).aspx)：

> 确保您的网站中的所有弹出窗口都是作为用户操作的直接结果打开的，例如单击页面元素或跳到链接然后按 ENTER。

事实上，您的代码根本不适合我，IE 默认弹出窗口阻止程序只是阻止了它。我认为这是不可接受的，因为大多数用户都不允许这样做。

我通过在按下 enter 时将焦点移动到隐藏链接（与 tab 键相同）来解决它（很重要，因为在 keyup 之后为时已晚），当它被释放时，它与在那个时按下 enter 相同链接以便弹出窗口打开。

HTML：

```
<input class="txtHeaderSearch">
<a id="hidden-link" href="#">needs to have content</a> 
```

CSS：

```
#hidden-link {
    position: absolute;
    left: -9999px;
    top: -9999px;
} 
```

Javascript：

```
$('.txtHeaderSearch').bind('keydown', function(e) {
    if (e.which === 13) { // which is normalized by jQuery
        $("#hidden-link").focus();
    }
});

$("#hidden-link").click(function() {
    var win = window.open('/search.aspx?phrase=' + $('.txtHeaderSearch').val());
    //win.focus(); 
    //The above is optional, if the window opens but doesn't focus then uncomment the above line
}); 
```

演示：

[http://jsfiddle.net/UCcqM/2/](http://jsfiddle.net/UCcqM/2/)

同样的解决方法不适用于其他浏览器，因此您需要检测 IE 并根据浏览器有条件地使用适当的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:47:52.330

当有人在文本框内按回车键时，使用它来单击按钮：

```
// press enter key when textbox has focus to simulate button click:
$('.txtHeaderSearch').keyup(function(e) {
    if ( e.keyCode === 13 ) { // 13 is enter key
        $(".btnHeaderSearch").click();    
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:48:01.830

您可以尝试在 .txtHeaderSearch keyup 事件上点击 .btnHeaderSearch ，就像这样。

```
$('.txtHeaderSearch').bind('keyup', function(e) {
    e.preventDefault();
    if (e.keycode === 13) {   
        $('.btnHeaderSearch').click();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:43:45.667

可能问题出在动态绑定中，下面的链接对我有用， [http://jsfiddle.net/madhuvana/McaXj/2/](http://jsfiddle.net/madhuvana/McaXj/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:14:36.257

例如：

```
 <form action="page2" method="get" onsubmit="return func()">
      <input type="text" name="search"/>
    </form> 
```

在文本框中写入内容并按下回车 func() 将被调用，当返回 true 时，将提交表单（http://example.com?search=....）

因此，对于您的问题，您只需替换示例中的值并定义一个函数来处理预提交作业。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:45:08.393

我在 IE8 中测试了这个

[http://jsfiddle.net/74mtV/2/](http://jsfiddle.net/74mtV/2/)

当它第一次发生时，它会发出弹出警告，并且没有打开任何窗口，但是在允许它之后，两个事件都会打开一个新的弹出窗口，并将焦点设置为它。

在正常模式和启用兼容性的情况下进行了测试。

# java - 播放带静态参数的框架反向路由

> ID：11690129
> 
> 赞同：1
> 
> 时间：2012-07-27T14:43:00.917
> 
> 标签：java, playframework, playframework-1.x

无法解决以下问题：

我正在尝试使用反向路由生成 URL：

```
Router.reverse(action).url 
```

这条路线：

```
GET /admin/productgroups ProductGroupController.renderListView(modelClass:'models.ProductGroup') 
```

我尝试了以下方法：

```
Router.reverse("ProductGroupController.renderListView").url
Router.reverse("ProductGroupController.renderListView(modelClass:'models.ProductGroup'").url 
```

但我总是

```
No route found

No route able to invoke action views.ProductGrouController.renderListView() with arguments {} was found. 
```

例外......需要一些帮助，不知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:01:48.823

尝试在这样的映射中将模型类名称作为字符串参数传递：

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("modelClass", "models.ProductGroup");

Router.reverse("ProductGroupController.renderListView", map).url 
```

当您将静态参数传递给您的路由文件时，必须始终这样做。

# jsf-2 - 无法在 JSF 2 + Glassfish 3 上使用 JDBC 领域登录

> ID：11690133
> 
> 赞同：1
> 
> 时间：2012-07-27T14:43:39.353
> 
> 标签：jsf-2, forms-authentication, glassfish-3

我正在尝试向基于 JSF 2 的应用程序添加身份验证。我是按照[本](http://jugojava.blogspot.com/2011/02/jdbc-security-realm-with-glassfish-and.html)教程开始的。

以下是我的数据库中的导出：

```
CREATE TABLE `authentication_groups` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(45) NOT NULL,
  `description` varchar(255) default NULL,
  `create_time` timestamp NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

INSERT INTO `authentication_groups` VALUES (1,'Guest','Anonymous user','2012-07-18 13:54:34'),(2,'Member','Standart user','2012-07-18 13:54:34'),(3,'Admin','Administrator','2012-07-18 13:54:34');

CREATE TABLE `users` (
  `id` int(11) NOT NULL auto_increment,
  `username` varchar(45) NOT NULL,
  `password` varchar(128) NOT NULL,
  `first_name` varchar(45) default NULL,
  `last_name` varchar(45) default NULL,
  `create_time` timestamp NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `username_UNIQUE` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

INSERT INTO `users` VALUES (1,'admin','8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918','Samuil','Yanovski','2012-07-24 06:41:56');

CREATE TABLE `users_authentication_groups_link` (
  `id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `authentication_group_id` int(11) NOT NULL,
  `create_time` timestamp NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `uag_link_users_fk` (`user_id`),
  KEY `uag_link_authentication_groups_fk` (`authentication_group_id`),
  CONSTRAINT `uag_link_authentication_groups_fk` FOREIGN KEY (`authentication_group_id`) REFERENCES `authentication_groups` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `uag_link_users_fk` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

INSERT INTO `users_authentication_groups_link` VALUES (1,1,3,'2012-07-24 06:42:25');

SELECT `u`.`username` AS `username`,
       `u`.`password` AS `password`,
       `g`.`name`     AS `name`
FROM   ( (`observer`.`users_authentication_groups_link` `ug`
          JOIN `observer`.`users` `u`
            ON(( `u`.`id` = `ug`.`user_id` )))
         JOIN `observer`.`authentication_groups` `g`
           ON(( `g`.`id` = `ug`.`authentication_group_id` ))); 
```

我有一个用户名“admin”和密码“admin”（使用 SHA-256 和十六进制编码加密）的用户。

我在 Glassfish 管理控制台中创建了一个 JDBC 连接池，它正在成功地 ping 数据库。我已将此池分配给名为“jdbc/observer”的 JDBC 资源。之后在**Configuration -> server-config -> Security -> Realms**中，我使用以下配置创建了“ObserverRealm”：

![在此处输入图像描述](../Images/87fbb9c2bb71f94cfd6943cedc7d32cd.png)

这是我的**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>jdbcRealm</realm-name>
        <form-login-config>
            <form-login-page>/faces/login.xhtml</form-login-page>
            <form-error-page>/faces/loginError.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Admin</web-resource-name>
            <url-pattern>/faces/private/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>Admin</role-name>
        </auth-constraint>
    </security-constraint>
</web-app> 
```

和**glassfish-web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <security-role-mapping>
    <role-name>Admin</role-name>
    <principal-name>Admin</principal-name>
    <group-name>Admin</group-name>
  </security-role-mapping>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

login.xml**非常**基本：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/master.xhtml"
                xmlns:h="http://java.sun.com/jsf/html">

    <ui:define name="content">
        <p>Login to access secure pages:</p>  
        <h:messages />  
        <h:form id="loginForm">  
            <h:panelGrid columns="2">  
                <h:outputLabel for="username" value="Username:" />  
                <h:inputText id="username" value="#{authBackingBean.username}" />  

                <h:outputLabel for="password" value="Password:" />  
                <h:inputSecret id="password" value="#{authBackingBean.password}" />  

                <h:commandButton id="loginButton" value="Login" action="#{authBackingBean.login}" />  
            </h:panelGrid>  
        </h:form> 
    </ui:define>
</ui:composition> 
```

和**AuthBackingBean**：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package yanovski.observer.jsf;

import java.security.Principal;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.bean.ManagedBean;
import javax.enterprise.context.RequestScoped;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;

/**
 *
 * @author Intuitiv-06
 */
@ManagedBean(name = "authBackingBean")
@RequestScoped
public class AuthBackingBean {

    private static final Logger log = Logger.getLogger(AuthBackingBean.class.getName());
    private String username;
    private String password;

    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();

        try {
            request.login(username, password);
        } catch (ServletException e) {
            context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Login failed!", null));
            return "login";
        }

        //you can fetch user from database for authenticated principal and do some action  
        Principal principal = request.getUserPrincipal();
        log.info("Authenticated user: " + principal.getName());

        if (request.isUserInRole("Admin")) {
            return "/admins/admins?faces-redirect=true";
        } else {
            return "/users/users?faces-redirect=true";
        }
    }

    public String logout() {
        String result = "/index?faces-redirect=true";

        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();

        try {
            request.logout();
        } catch (ServletException e) {
            log.log(Level.SEVERE, "Failed to logout user!", e);
            result = "/loginError?faces-redirect=true";
        }

        return result;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

你能告诉我我做错了什么吗，因为我在尝试进行身份验证时总是收到“登录失败”错误 - 使用 admin/admin 作为用户名/密码。如果您需要任何其他详细信息，请告诉我 - 如果有人想看一下，我也可以提供该项目的档案。

提前谢谢你，很抱歉这么长的帖子。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:44:55.010

我们在使用 Glassfish v3 和 PostgreSQL 数据库的 Lubuntu 服务器上遇到了类似的问题。确保您已在 Glassfish 域中安装 PostgreSQL 驱动程序。

复制到：

> \glassfish\domains\YOURDOMAIN\lib

一个 JDBC 4 驱动程序，你可以在这里找到：

[http://jdbc.postgresql.org/download.html](http://jdbc.postgresql.org/download.html)

必须帮助:)

# firefox - 如何从 Firefox 扩展连接到邮件服务器？

> ID：11690134
> 
> 赞同：1
> 
> 时间：2012-07-27T14:43:41.510
> 
> 标签：firefox, firefox-addon, imap, smtpclient

我正在尝试在没有用户干预的情况下从 GMail 帐户发送和接收已知结构的邮件。

有没有一种优雅的方法可以从 Firefox 扩展建立 IMAP 和 SMTP 连接，而不会通过涉及[C++](https://developer.mozilla.org/en/Creating_Custom_Firefox_Extensions_with_the_Mozilla_Build_System)或[Python](http://code.google.com/p/pythonext/)使事情变得过于复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:47:17.000

您必须使用[nsISocketTransportService.createTransport()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsISocketTransportService#createTransport%28%29)打开连接，如下所示：

```
var Cc = Components.classes;
var Ci = Components.interfaces;

var socket = Cc["@mozilla.org/network/socket-transport-service;1"]
               .getService(Ci.nsISocketTransportService)
               .createTransport(["ssl"], 1, "pop.gmail.com", 995, null);

var input = socket.openInputStream(Ci.nsITransport.OPEN_UNBUFFERED, 0, 0);
var scriptableInput = Cc["@mozilla.org/scriptableinputstream;1"]
                        .createInstance(Ci.nsIScriptableInputStream);
scriptableInput.init(input);

var output = socket.openOutputStream(Ci.nsITransport.OPEN_UNBUFFERED, 0, 0); 
```

这将为您提供输入和输出流。您可以通过 接收数据[`nsIScriptableInputStream.read()`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIScriptableInputStream#read%28%29)并通过 发送数据[`nsIOutputStream.write()`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIOutputStream#write%28%29)。但是您仍然必须自己实现 IMAP/SMTP 逻辑（您不能使用 Thunderbird 中的当前实现，因为它是用 C++ 编写的，并且新的基于 JavaScript 的实现还没有准备好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:51:00.360

[https://bugzilla.mozilla.org/show_bug.cgi?id=733573](https://bugzilla.mozilla.org/show_bug.cgi?id=733573)是关于为 Web 应用程序实现 TCP API；这是一项正在进行的工作，最多可能仅在 Firefox 17 中可用。但是，如果您阅读了补丁（[https://bugzilla.mozilla.org/attachment.cgi?id=643432&action=diff#a/b2g/components/TCPSocket.js_sec1](https://bugzilla.mozilla.org/attachment.cgi?id=643432&action=diff#a/b2g/components/TCPSocket.js_sec1)），TCPSocket 对象几乎可以提供制作所需的一切SSL 连接到任意服务器，所以您应该能够窃取此代码！

# java - 使用 Jtextfield 的值作为 java 代码

> ID：11690140
> 
> 赞同：0
> 
> 时间：2012-07-27T14:44:08.417
> 
> 标签：java, textfield, jtextfield

我正在开发一个小型应用程序，我想获得一个数学函数和 x (a,b) 的范围并显示它的图形。

在某些时候，我调用了一个执行 x 函数的方法。我很清楚我从 TextField 获取函数（例如 f(x)= 2*x+1 ）并将其用作 Java 代码

比方说：

```
class Myclass extends JFrame{
    blah blah ...
    JLabel lblFx =new JLebel("f(x=)");
    JTextfield Fx = new JTextField();

    //and lets say that this method calculate the f(x).
    //get as argument the x
    double calculateFx(double x){
        return  2*x+1; // !!!!BUT HERE I WANT TO GET THIS 2*x+1 FROM TextField!!!!!
    }

} 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:54:03.240

您可以使用脚本引擎。请参阅下面的示例，您可以适应使用 JTextField 的内容。

注意：`"2x+1"`不是一个有效的表达式，你需要包含所有的操作符，所以在这种情况下：`"2*x+1"`.

```
public static void main(String[] args) throws ScriptException {
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("JavaScript");

    String formula = "2 * x + 1"; //contained in your jtextfield

    for (double x = 0; x < 10; x++) {
        String adjustedFormula = formula.replace("x", Double.toString(x));
        double result = (Double) engine.eval(adjustedFormula);
        System.out.println("x = " + x + "  ==>  " + formula + " = " + result);
    }
} 
```

* * *

输出：

```
x = 0.0  ==>  2 * x + 1 = 1.0
x = 1.0  ==>  2 * x + 1 = 3.0
x = 2.0  ==>  2 * x + 1 = 5.0
x = 3.0  ==>  2 * x + 1 = 7.0
x = 4.0  ==>  2 * x + 1 = 9.0
x = 5.0  ==>  2 * x + 1 = 11.0
x = 6.0  ==>  2 * x + 1 = 13.0
x = 7.0  ==>  2 * x + 1 = 15.0
x = 8.0  ==>  2 * x + 1 = 17.0
x = 9.0  ==>  2 * x + 1 = 19.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:51:05.910

您要查找的内容[`eval`](http://en.wikipedia.org/wiki/Eval)在某些语言中称为“”；但是，Java 没有直接的东西。

Java 确实有一个名为“ [”的](http://docs.oracle.com/javase/6/docs/api/javax/script/package-summary.html)[脚本接口`javax.script`](http://docs.oracle.com/javase/6/docs/api/javax/script/package-summary.html)，它支持用其他语言（如 JavaScript、Ruby、Python 等）编写的代码的“eval”，还有一个名为“ [”的](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)[工具包`javax.tools`](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)，它提供对 Java 编译器的访问（以及其他工具）。对于高级程序员，另一种方法是使用解析器生成器从文本字段中解析字符串并以某种方式解释它。

不幸的是，对于初学者来说，这些都是高级概念。考虑用另一种直接支持“eval”的语言编写程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T12:12:16.800

我发现了这个很棒[的 Expr](https://github.com/darius/expr)库！

“这个包解析和评估浮点数上的数学表达式，比如 2 + 2 或 cos(x/(2*pi)) * cos(y/(2*pi))。

设计重点是易于使用并带有有用的错误消息、易于集成到小程序中以及良好的性能：快速评估和较短的下载时间。功能和灵活性并不是最重要的，但代码足够简单，应该不难根据您的喜好进行更改。”

在我的例子中

```
class Myclass extends JFrame{
    blah blah ...
    JLabel lblFx =new JLebel("f(x=)");
    JTextfield Fx = new JTextField();
    String formula = Fx.getText();//2*x+1  OR  cos(x) OR lot of other functions

    //and lets say that this method calculate the f(x).
    //get as argument the x
    double calculateFx(double x){
        // The Expr Object that will representing the mathematical expression
        Expr expr = null;

        try {
            // parsing function formula to mathematical expression
            expr = Parser.parse(formula);
        } catch (SyntaxException e) {
            System.err.println(e.explain());
            return;
        }

        // Define(make) what will be the variable in the formula, here x
        Variable vx = Variable.make("x");
        // Set the given value(x) in variable
        vx.setValue(x);

        //return (mathematical) expression's value. See more for Expr lib how work...
        return expr.value();//
    }

} 
```

最后，在您的项目调用`calculateFx(x)`中，对于给定的 x，您将获得 f(x) 值！

# windows - 如何在不打开附加命令提示符的情况下从批处理文件调用 VbScript

> ID：11690142
> 
> 赞同：4
> 
> 时间：2012-07-27T14:44:10.993
> 
> 标签：windows, vbscript, batch-file

我有一个 VBScript 文件，我试图从批处理文件中调用它。我将以下代码处理到记事本并保存为 MyScript.vbs

(http://gallery.technet.microsoft.com/scriptcenter/8bbed56f-a7aa-491f-a296-687dd96098a3#content)

```
 Const HIDDEN_WINDOW = 12 

    strComputer = "." 
    Set objWMIService = GetObject("winmgmts:" _ 
               & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 
    Set objStartup = objWMIService.Get("Win32_ProcessStartup") 

    Set objConfig = objStartup.SpawnInstance_ 
    objConfig.ShowWindow = HIDDEN_WINDOW 
    Set objProcess = GetObject("winmgmts:root\cimv2:Win32_Process") 
    errReturn = objProcess.Create("Notepad.exe", null, objConfig, intProcessID) 
```

创建了一个名为 Run.bat 的批处理文件，并在其中添加了以下代码。

```
 @echo off

    start "C:\\Users\\guest\\Desktop\\123\\MyScript.vbs" 
```

当我尝试通过命令提示符执行批处理文件时，这会打开另一个命令提示符。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T14:47:23.130

```
rem This is the command line version
cscript "C:\Users\guest\Desktop\123\MyScript.vbs" 
```

或者

```
rem This is the windowed version
wscript "C:\Users\guest\Desktop\123\MyScript.vbs" 
```

您还可以添加选项`//e:vbscript`以确保脚本引擎将您的脚本识别为 vbscript。

Windows/DOS 批处理文件不需要`\`像 *nix 那样转义。

你仍然可以使用`"C:\Users\guest\Desktop\123\MyScript.vbs"`，但这需要用户已经`*.vbs`关联到`wscript`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T20:05:22.137

如果要修复 vbs 关联类型

```
regsvr32 vbscript.dll
regsvr32 jscript.dll
regsvr32 wshext.dll
regsvr32 wshom.ocx
regsvr32 wshcon.dll
regsvr32 scrrun.dll 
```

此外，如果您由于管理原因无法使用 vbs，请将您的脚本转换为 vb.net 程序，该程序设计简单、容易，只需 5 分钟。

最大的区别是函数和子函数都使用括号而不是函数来调用。

因此，编译器安装在所有安装了 .NET 的计算机上。

有关如何制作 .NET exe 的信息，请参见此处的这篇文章。请注意，该示例适用于脚本主机。您不能使用它，您必须将您的 vbs 代码作为 .NET 代码放入。

[如何将 VBScript 转换为可执行 (EXE) 文件？](https://stackoverflow.com/questions/4425681/how-can-i-convert-a-vbscript-to-an-executable-exe-file/19214521#19214521)

# optimization - 为什么 GHC 在内联时考虑 LHS *语法*？

> ID：11690146
> 
> 赞同：19
> 
> 时间：2012-07-27T14:44:23.643
> 
> 标签：optimization, haskell, ghc

根据 GHC[文档](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/pragmas.html)：

> ...GHC 仅在完全应用时内联函数，其中“完全应用”意味着应用到函数定义的 LHS 上出现的（语法上）尽可能多的参数。

给出的示例是两个语义等效的定义：

```
comp1 :: (b -> c) -> (a -> b) -> a -> c
{-# INLINE comp1 #-}
comp1 f g = \x -> f (g x)

comp2 :: (b -> c) -> (a -> b) -> a -> c
{-# INLINE comp2 #-}
comp2 f g x = f (g x) 
```

我的问题：

1.  只有在存在 INLINE pragma 的情况下，我们才会得到这种严格的行为（即 LHS 的严格语法视图，RHS 内联无优化）？

2.  当没有给出 INLINE pragma 时，GHC 是否曾经将函数转换`comp2`为`comp1`？

3.  如果不是，为什么？一般来说，编译器是否很难查看函数的语义并决定部分应用和内联的数量和位置？

4.  如果 GHC 只是将所有函数转换为`let... in`具有 lambdas 且在 LHS 上没有绑定的级联表达式，会发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T16:03:50.973

如果在这个例子中，`c`它本身就是一个函数类型呢？我不清楚你的提议在这种情况下会如何运作。

无论如何，在某些情况下，您肯定不希望将函数的所有参数“拉到最前面”。例如，您可能有一些这样的代码：

```
foo :: [Int] -> Int -> Int -> Int
foo list = let
  -- expensive precomputation here
  bar x y = ...
  in \ x y -> bar x y 
```

您*希望* `foo`得到部分应用，然后为生成的函数的多个应用分担昂贵的预计算工作。相反，如果您将其拉为`foo list x y`，您将无法共享昂贵的预计算。（我在严肃的应用程序中遇到过这种情况。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T22:23:23.990

这是一个很好的问题。我通读[了 Glasgow Haskell Compiler Inliner](http://research.microsoft.com/en-us/um/people/simonpj/Papers/inlining/inline.pdf)论文的秘密以获取一些线索，但没有找到太多。

这是一个手动的解释。GHC 实际上有时需要`comp1`——`comp2`它称之为“eta 扩展”。有关详细信息，请参阅此线程：[http ://www.haskell.org/pipermail/glasgow-haskell-users/2011-October/020979.html](http://www.haskell.org/pipermail/glasgow-haskell-users/2011-October/020979.html)

也存在（或曾经）一个问题，即这种 eta 扩展可以巧妙地改变严格性。请参阅对文档的此提交（似乎不在当前文档中，因此它们尚未重建，或者已修复，不确定是哪个）： http: [//permalink.gmane.org/gmane .comp.lang.haskell.cvs.ghc/57721](http://permalink.gmane.org/gmane.comp.lang.haskell.cvs.ghc/57721)

无论如何，上面的线程都有 SPJ 解释为什么我们通常希望尽可能地朝那个方向前进。所以为了改进内联而故意转向另一个方向似乎有点愚蠢。正如秘密论文所讨论的那样，混杂地内联并不是最好的主意 - 使编译指示更像是一把钝锤，因此无论这样做是否有意义，函数都被内联可能会比整体帮助更多，更不用说增加代码膨胀，因为模块必须同时保持不同级别的 eta-shifted 函数。

无论如何，作为一个非常不是核心 GHC 开发人员的人，这对我来说似乎最有可能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-12T09:42:06.077

好吧，我想，迟到总比没有好。

`comp1`并且`comp2`不仅在语义上是等价的，甚至在句法上也是等价的。

在定义的等号的 LHS 上写参数只是语法糖，所以这两个函数是等价的：

```
id1 x = x
id2 = \x -> x 
```

* * *

编辑：我意识到我并没有真正回答你的问题，所以你在这里：

1.  当这些用`INLINE`编译指示注释时，GHC 会有所不同，因为 GHC 在其核心表示中存储函数的展开以及它可以展开的数量（这就是`Guidance=ALWAYS_IF(arity=1,...)`部分），因此它在实践中实际上很重要。

2.  我不认为它确实如此，因为在脱糖到核心后无法区分 和 ，所有优化都在核心上运行`comp1`。`comp2`因此，当 GHC 想要创建一个新的展开时，它可能会为明显的 arity（例如前导 lambda 的数量）这样做。

3.  内联对不饱和绑定大多没有好处，见下文。示例实际上也是如此`comp1`：我们希望发生这种情况的原因并不是我们关心消除函数调用。相反，我们希望`comp1`专门*化*和`f`参数`g`，而不管`x`我们将专门化应用于什么具体。实际上有一个优化过程应该做这种工作，称为*构造函数专门*化（更多内容见下文）。在这里使用甚至完全不合适：这`INLINE`仍然不会专门化像.`comp1 (const 5)``const 5`

4.  因此，这不会有太大的改变，只要你不给每个 let-bound 的东西都撒上`INLINE`pragma。即使那样，这是否带来任何好处也是值得怀疑的：关键是，在没有任何进一步动机（例如，将函数专门化为具体参数）的情况下，内联不饱和调用是没有意义的，而且它只会使代码大小膨胀某个点，所以它甚至可能会使事情变慢。

结束编辑

* * *

我认为为什么不内联对绑定的不饱和调用的一个原因是它们大多不会带来任何新的优化机会。

```
f = \x y -> 1 + (x * y)
g = \x y -> (1 + x) * y 
```

内联`f 16`yield `\y -> 1 + (16*y)`，这并不比`f 16`. 相反，代码大小显着增加（这是内联的最大缺点）。

现在，如果有这样的调用`g 16`会产生`\y -> (1 + 16) * y`优化到`\y -> 17 * y`. 但是这些机会会被另一个优化过程、[构造函数或调用模式专业化](https://www.researchgate.net/publication/221241379_Call-pattern_specialisation_for_Haskell_programs)检测到。这里的见解是，`1 + x`如果我们知道 的值，则可以简化`x`。由于我们`g`使用文字（例如值）进行调用，因此专门`g`针对该特定调用站点是有益的，例如`g16 = \y -> 17 *y`. 无需内联`g`，其他呼叫站点也可能共享为`g16`.

这只是在仍然拥有高效代码的同时不需要进行内联的一个示例。还有许多其他优化可以与内联实现你想要的。例如，Eta-expansion 将确保调用尽可能饱和：

```
main = print (f 2)

f = g 1 
g x y = x + y 
```

由于`f`总是用 1 个参数调用，我们可以对其进行 eta 扩展：

```
f eta = g 1 eta 
```

现在调用`g`已饱和，可以内联。Dito for `f`，所以最终这减少到

```
main = print 3

f eta = 1 + eta
g x y = x + y 
```

模死代码消除。

# c# - 为什么 ICollection 不包含 Add 方法？

> ID：11690147
> 
> 赞同：8
> 
> 时间：2012-07-27T14:44:25.127
> 
> 标签：c#, .net, api-design

如标题所示，有谁知道为什么`ICollection`接口不包含 Add 方法？`ICollection<T>`通用版本, 有一个`Add`但`ICollection`没有，这似乎很奇怪。任何对此有更深入了解的人都会非常有帮助。

至于我为什么关心 - 不幸的是，构建 SharePoint 的开发人员从未了解过泛型，因此 API 中的每个集合都是基于`ICollection`. 我想附加几个扩展方法，`ICollection`其中包括添加到集合中，但这似乎是不可能的（至少在没有反射的情况下是不可能的）。

编辑：

相当多的人*猜测*原因是因为`ICollection.Add`需要一个`Object`，因此不是类型安全的。事实并非如此。`IList` *有*一个`Add`采用`Object`. 您只需要在采用`Object`.

数组实现的论点，`ICollection`因此它不能有一个`Add`也不成立。如果`ICollection`有一个`Add`方法，它只需要在数组上显式实现并抛出一个异常（正如数组当前实现的许多方法一样）。

我真的希望有人参考其中一位设计师的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:51:16.127

对我来说，接口的命名似乎混淆了期望。`ICollection`甚至`ICollection<T>`不在同一个继承链中——大多数集合只是简单地实现了两者。

文档说明了接口的作用，因此仅凭这一点，就不会期望`Add`存在：

> 定义所有非泛型集合的大小、枚举器和同步方法。

我怎么看？就我个人而言，我认为这要么是直接命名错误，要么是设计师第二次（在引入通用接口时）选择放入`Add`，`ICollection<T>`因为这一次更常见的是需要它。

有和继承，而`IList`没有和继承，如.`Add``ICollection``IList<T>``Add``ICollection<T>``Add`

将其归结为类型层次结构设计的演变/成熟。

* * *

至于扩展方法，您可以执行以下操作：

```
public static void AnotherMethod<T>(this ICollection<T> collection, T item) { } 
```

并这样使用它：

```
ICollection<string> s;
s.AnotherMethod(""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:36:10.957

根据[阿尔巴哈里兄弟](http://books.google.co.in/books?id=t1de8nSVYnkC&lpg=PP1&ots=24qgSrPk8A&dq=inauthor%3a%22Ben%20Albahari%22&pg=PA279#v=onepage&q&f=false)

> 泛型和非泛型版本的差异超出了您的预期，尤其是在 ICollection 的情况下。
> 
> 造成这种情况的原因主要是历史原因：**因为泛型出现较晚**，所以泛型接口是在 **事后诸葛亮**的情况下开发的。
> 
> 为此原因，
> 
> `ICollection<T>`不延长`ICollection`，
> 
> `IList<T>`不延长`IList`，
> 
> 并且`IDictionary<TKey, TValue>`不扩展`IDictionary`。

总而言之`ICollection<T>`，通过不犯中所犯的错误而演变`ICollection`。这就是为什么`ICollection<T>`有一个 Add 方法而`ICollection`不是..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:53:17.067

`ICollection`可以是任何东西。它可能只是可枚举的东西。没有理由*应该*有一个`Add`方法，或者确实是一个`Remove`. 如果您更仔细地查看界面，它几乎是只读的。您可以查看有多少元素，并且可以枚举它们。而已。这是完全有道理的，以一种抽象的方式。

当我们到达时`ICollection<T>`，我们现在非常具体。我们确切地知道它持有什么样的对象，因此我们可以：

*   添加新的元素`<T>`。
*   `IEquitable`使用一种界面搜索它们。
*   使用相同的方法删除它们。

从本质上讲，区别在于`ICollection<T>`有些具体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:50:45.497

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa347850.aspx)

当以多态方式代替其他集合或集合接口使用时，您不需要将集合类型添加到已知类型。例如，如果您声明 IEnumerable 类型的数据成员并使用它来发送 ArrayList 的实例，则无需将 ArrayList 添加到已知类型。

当您以多态方式使用集合代替非集合类型时，必须将它们添加到已知类型。例如，如果您声明一个 Object 类型的数据成员并使用它来发送 ArrayList 的实例，请将 ArrayList 添加到已知类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T14:54:23.220

大胆猜测 - ICollection 接口是扩展它的其他接口的基本接口，例如 IList 和 IDictionary。这些接口具有 add 方法的不同实现。IList 需要一个参数，IDictionary 显然需要两个。使用泛型，派生的接口方法签名并没有真正的不同，因为它们采用一个参数 - 一种类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T14:51:30.443

根据[Msdn 定义](http://msdn.microsoft.com/it-it/library/system.collections.icollection%28v=vs.100%29.aspx)，它是

> 为所有非泛型集合定义大小、枚举器和同步方法

这意味着 ICollection 表示您要读取的*流* 或数据*序列*。我想说的是，*可能背后*的决定`SharePoint API`是提供 您从服务器读取的*通用数据流。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T14:51:55.153

一种猜测是，如果`ICollection`确实有这种`Add`方法，它会采取什么措施？`Object`当然。这是在 C# 2.0 之前没有泛型数组的一个大问题。

问题是您可以向同一个集合添加不同的类型

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T14:55:30.637

创建`ICollection`时没有通用接口。这意味着如果上面有`Add`方法，`ICollection`就必须有签名`Add(object)`。 `ICollection`旨在跨任何类型的集合声明一个一致的接口——这将强制每个集合部分地像`object`s 的集合一样行动。

这已经修复在`ICollection<T>`其中有一个方法`Add(T)`。

# java - ExpandableList 不在屏幕上显示列表

> ID：11690151
> 
> 赞同：0
> 
> 时间：2012-07-27T14:44:41.400
> 
> 标签：java, android, listview, expandablelistview

我正在尝试实现 search `Activity`，其中包含`ExpandableList`在不同组中显示的歌曲、专辑、艺术家。

查询一切正常，适配器正在获得正确的搜索结果。但是列表没有显示在屏幕上。

这是代码：

搜索活动：

```
public class SearchActivity extends Activity implements TextWatcher {

    private EditText etSearchBar;
    private ExpandableListView lvExpSearchResult;
    private SearchExpandListAdapter expand_adapter;
    private Cursor cursor;
    int columnIndex;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        etSearchBar = (EditText) findViewById(R.id.etSearchBar);
        lvExpSearchResult = (ExpandableListView) findViewById(R.id.lvExpSearchResult);

        etSearchBar.addTextChangedListener(this);
    }

    @Override
    public void beforeTextChanged(CharSequence paramCharSequence,
            int paramInt1, int paramInt2, int paramInt3) {
    }

    @Override
    public void onTextChanged(CharSequence paramCharSequence, int paramInt1,
            int paramInt2, int paramInt3) {
        ArrayList<ExpandListGroup> groups = new ArrayList<ExpandListGroup>();
        ArrayList<String> result = null;

        ExpandListGroup trackSection = new ExpandListGroup();
        result = getQueryResult(MediaStore.Audio.Media.TITLE);
        trackSection.setName("Tracks");
        trackSection.setItems(result);

        ExpandListGroup albumSection = new ExpandListGroup();
        result = getQueryResult(MediaStore.Audio.Media.ALBUM);
        albumSection.setName("Albums");
        albumSection.setItems(result);

        ExpandListGroup artistSection = new ExpandListGroup();
        result = getQueryResult(MediaStore.Audio.Media.ARTIST);
        artistSection.setName("Artist");
        artistSection.setItems(result);

        groups.add(trackSection);
        groups.add(albumSection);
        groups.add(artistSection);

        expand_adapter = new SearchExpandListAdapter(this, groups);
        Toast.makeText(this, "onTextChanged", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void afterTextChanged(Editable paramEditable) {
        lvExpSearchResult.setAdapter(expand_adapter);
        Toast.makeText(this, "afterTextChanged", Toast.LENGTH_SHORT).show();
        Toast.makeText(this, ((Integer)expand_adapter.getChildrenCount(1)).toString(), Toast.LENGTH_SHORT).show();
    }

    private ArrayList<String> getQueryResult(String columnToDisplay) {
        String searchQuery = etSearchBar.getText().toString();
        ArrayList<String> result = new ArrayList<String>();

        if (searchQuery.length() > 0) {
            String[] projection = { MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media.DISPLAY_NAME,
                    MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.TITLE,
                    MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM };

            String queryString = MediaStore.Audio.Media.IS_MUSIC + "!=" + 0
                    + " AND " + columnToDisplay + " LIKE \"%" + searchQuery
                    + "%\"";

            cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                    projection, queryString, null, columnToDisplay
                            + " COLLATE NOCASE");

            for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor
                    .moveToNext()) {
                columnIndex = cursor.getColumnIndexOrThrow(columnToDisplay);
                result.add(cursor.getString(columnIndex));
            }
        } else {
            result.clear();
        }
        return result;
    }
} 
```

适配器类：

```
public class SearchExpandListAdapter extends BaseExpandableListAdapter {

    Context context;
    ArrayList<ExpandListGroup> groups;

    public SearchExpandListAdapter(Context c, ArrayList<ExpandListGroup> groups) {
        this.context = c;
        this.groups = groups;
    }

    public void addItem(String item, String group) {
        if (!groups.contains(group)) {
            Toast.makeText(context,
                    "Error while adding item in group " + group,
                    Toast.LENGTH_SHORT).show();
            return;
        }
        int index = groups.indexOf(group);
        ArrayList<String> children = groups.get(index).getItems();
        children.add(item);
        groups.get(index).setItems(children);
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        ArrayList<String> children = groups.get(groupPosition).getItems();
        String child = children.get(childPosition);
        return child;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View view, ViewGroup parent) {
        String child = (String) getChild(groupPosition, childPosition);
        if (view == null) {
            LayoutInflater inflator = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inflator.inflate(R.layout.expandlist_child_item, null);
        }
        TextView tvChild = (TextView) view.findViewById(R.id.tvChild);
        tvChild.setText(child);
        return view;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        ArrayList<String> children = groups.get(groupPosition).getItems();
        return children.size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isLastChild, View view,
            ViewGroup parent) {
        ExpandListGroup group = (ExpandListGroup) getGroup(groupPosition);
        if (view == null) {
            LayoutInflater inflator = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inflator.inflate(R.layout.expandlist_group_item, null);
        }
        TextView tvGroup = (TextView) view.findViewWithTag(R.id.tvGroup);
        tvGroup.setText(group.getName());
        return view;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int paramInt1, int paramInt2) {
        return true;
    }
} 
```

# .net - 将 system._comobject 转换为 .net 字符串

> ID：11690156
> 
> 赞同：1
> 
> 时间：2012-07-27T14:44:46.773
> 
> 标签：.net, com, com-interop

我在尝试获取类属性的值时遇到了一些麻烦。实现结构如下：

1.  用 C# 编写的 COM 对象有一个 COM 可见包装类，该类使用两个具有 ComVisible(false) 属性的类。
2.  COM 对象从经典的 ASP 页面调用以执行一些工作。

非 COM 可见类具有 .NET 类型（主要是字符串类型）的一些属性。问题是，在类中的各种方法中访问这些属性时，属性返回 System._ComObject 作为它们的值，而不是它们的实际内容。我尝试使用 ToString()，将它们显式转换为它们的 .NET 类型，并在获取属性类型后使用 InvokeMember()。但是，当使用 InvokeMember 时，似乎没有给出属性的实际内容值，它给出了某些属性的实际内容。我得到的只是 System._ComObject。

所以我的问题是如何获得这些属性的实际值，而不仅仅是获得 System._ComObject？

更新 1：

我正在做的代码示例：

```
[ComVisible(false)]
public class Node
{
   public int Id
   {
       get;
       set;
   }
   public string Name
   {
       get;
       set;
   }
   public string DataType
   {
      get;
      set;
   }
  }

[ComVisible(false)]
public class Builder
{
   public Node Root;
   ASPTypeLibrary.Response response;
   public void SetUpProperties(object resp, string name, string dataType){
        response =   (ASPTypeLibrary.Response)resp;
       Root = new Node();
       Root.Name = name;
       Root.DataType = dataType;
       response.Write(Root.Name.ToString());   // This works fine
       response.Write(Root.DataType.ToString()); // This works fine
       PrintNode();
   }    

   public void PrintNode()
   {
     response.Write(Root.Name.ToString()); // This works fine. Prints actual content.
     response.Write(Root.DataType.ToString()); // This prints System._ComObject
   }
}

[ComVisible(true)]
public class Wrapper
{
  /* Required constructors are definded */

  public void Start(object resp)
  {
    Builder bld = new Builder();
    bld.SetUpProperties(resp, "Node 1", "Type 1");
  }
} 
```

Builder 类被实例化，SetProperties() 是从 Wrapper 类调用的，后者是使用 Server.CreateObject() 在经典 ASP 页面中创建的。System._ComObject 在 PrintNode() 中打印。我不确定除了 ToString() 我应该使用什么其他方法来获取属性的内容。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:35:58.953

你试过这个：`System.Runtime.InteropServices.Marshal.PtrToStringBSTR()`？

# html - 使用 css 的图像布局

> ID：11690157
> 
> 赞同：0
> 
> 时间：2012-07-27T14:44:47.157
> 
> 标签：html, css, image, layout

我试图在我的网站主页上连续显示三张图片。这在我的机器上显示为我想要的，但是在其他机器上尝试时，布局切换到一行上的 2 个图像，然后在新行上切换到第三个图像。继承人的代码：

```
<body>
<div id="container">
    <div id="header">
        <h1>
            <!--<a href="#"><img src="tracylogo7.jpg" alt="Millington and Hope" /></a> -->
            <a href="#"><img src="tracylogoup6.jpg" alt="Millington and Hope" /></a>
        </h1>
        <h2>
            <!--<a href="#"><img src="tracylogo5_header.jpg" alt="Millington and Hope" /></a> -->
        </h2>   
    </div>
    <ul id="nav">
        <li><a href="index.html">Home</a></li><!--
        --><li><a href="stock.html">Stock</a></li><!--
        --><li><a href="events.html">Events</a></li><!--
        --><li><a href="contact.html">Contact</a></li>
    </ul>
    <div id="box">
            <a href="#"><img src="home4.jpg" alt="Image 1" /></a>

            <a href="#"><img src="home_mir.jpg" alt="Image 2" /></a>

            <a href="#"><img src="home_urn.jpg" alt="Image 3" /></a>
    </div>
    <div id="box2">
        <a href="#"><img src="tracylogosmall.jpg" alt="Logo" /></a>
    </div>
    <div id="footer">
        <p class="client">Tel: 07858740&nbsp;&nbsp;&nbsp;&nbsp;E-mail: contact@millingtonandhope.com</p>

    </div>
</div>      
</body>
<style type="text/css">

html,body
{
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

body
{
    background:rgb(171,163,144);
    text-align: center;
    min-width: 600px;
}

#container
{
    margin:0 auto;
    background:rgb(171, 163, 144);
    width:80%;

}       

#header
{
    padding: 0px;
    color: white;
    width:100%;
    text-align:center;
}

#footer {
   position:fixed;
   left:0px;
   bottom:0px;
   height:25px;
   width:100%;
   background:rgb(151,143,124);
   border-top:solid 1px white;
}

.client
{
    color:white;
    margin:3px auto;
    text-indent:1cm;
    text-align:left;
}   

#sold
{
    color: red;
}

#box
{
    position:relative;
    margin:0 auto;
    width:100%;
    height:200px;
    margin-top:100px;
}
#box img
{
    margin:0 auto;
    border:solid 1px white;
    margin: 10px;
}

#box2
{
    position:relative;
    margin-top:260px;
    width: 100%;
}

#box2 img
{
    margin:0 auto;
    opacity:0.5;
    filter:alpha(opacity=50);

} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:59:31.480

您将框定义为相对，这最终意味着它考虑了浏览器大小等因素。最好的办法是将所有内容都确定为绝对位置，这样无论发生什么情况，它们都始终处于该位置。如果图像太大并超过浏览器的大小，它会导致滚动条等，但它会允许所有 3 个图像在所有窗口大小中并排放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:55:06.400

The problem with horizontal float is that it is dependent on the width of the page (or browser window). Assuming you have the widths and heights of your images, make the height of the wrapper the height of the tallest image and make the width equal to the sum of the tree images' widths. This will prevent the page/window size from influencing the appearance.

However, as arkascha said, without viewing your CSS I cannot re-create the problem and must assume that it is a sizing issue.

# c++ - 清除 Linux 内核链表

> ID：11690158
> 
> 赞同：2
> 
> 时间：2012-07-27T14:44:54.450
> 
> 标签：c++, c, linux, list

我正在尝试修改一些使用 linux 内核中使用的 C 链表的代码，例如fbida 中使用的这个[。](http://www.kraxel.org/cgit/fbida/tree/list.h)但我需要真正清除列表并从头开始，我不确定最安全的方法。我也找不到网上的例子。

关于如何安全清除列表并释放所有内存的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:00:20.773

“最安全的方式”......“释放内存”......引用的代码没有分配，完全取决于调用者/实现者来分配内存。因此，调用者/实现者必须释放分配的内存。

根据“cnicutar”，它只是遍历列表的工作，调用 list_del()，对找到的每个项目调用函数，然后根据对象的分配方式释放或删除对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:55:32.393

也许我找到了答案（数字......）像下面这样的工作吗？

```
void delete_all(struct list_head *head)
{
    struct list_head *iter;
    struct foo *objPtr;

  redo:
    __list_for_each(iter, head) {
        objPtr = list_entry(iter, struct foo, list_member);
        list_del(&objPtr->list_member);
        free(objPtr);
        goto redo;
    }
} 
```

# html - 网页是否有“建议的最喜欢的名称”之类的东西？

> ID：11690161
> 
> 赞同：3
> 
> 时间：2012-07-27T14:45:12.553
> 
> 标签：html, browser

由于网页搜索结果中良好展示的重要性占据了网页设计师的头脑，页面标题变得非常冗长，类似于“Acme 产品——地球上几乎所有东西的优质来源”，而不是“Acme 产品”。因为这就是谷歌向客户展示的东西。这样做的副作用是，每次您想将页面添加到收藏夹/书签时，您都必须将标题缩短为易于管理的标题。

在 HTML 中是否有一个点 - 元标记或其他东西 - 我可以指定一个短标题，适合放置到 Faves 中，浏览器会识别？最好是 HTML5 之前的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:14:11.210

没有我知道的。如果您的标题太长而无法成为一个好的收藏夹条目，您可能需要考虑将其收紧一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:17:12.543

我不相信有一个标签可以提供您建议的缩短标题。您可能可以通过 javascript 进行操作，但我不确定这一点，因为我认为浏览器书签总是直奔标题标签。

# javascript - 如何在 jquery 中只使一个 UL 元素不可拖动？

> ID：11690163
> 
> 赞同：0
> 
> 时间：2012-07-27T14:45:14.440
> 
> 标签：javascript, jquery, jquery-ui

我正在使用可拖动的 jquery sdk，并且我只想根据[jQuery UI 照片管理器演示](http://jqueryui.com/demos/droppable/#photo-manager)使 UL 成员之一不可拖动，而其他所有成员都可拖动。

例如，我想让第一张照片不可拖动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:48:34.090

代替：

```
$( "li", $gallery ).draggable 
```

选择器，使用这个：

```
$( "li:gt(0)", $gallery ).draggable 
```

*   [:gt() 文档](http://api.jquery.com/gt-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:48:32.690

如[文档中所示](http://jqueryui.com/demos/draggable/#option-cancel)

```
$( ".selector" ).draggable({ cancel: ".special" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:48:02.203

如果你想要不可拖动的元素，只需使用[`not`](http://api.jquery.com/not-selector/)选择器：

```
$( "li:not(.notdragabble)" ).droppable(); 
```

* * *

如果你想要不接受的元素：

使用[`accept`](http://jqueryui.com/demos/droppable/#option-accept)选项和[`not`](http://api.jquery.com/not-selector/)选择器：

```
$( ".selector" ).droppable({ accept: "not(.notdragabble)" }); 
```

以 HTML 为例：

```
<ul>
   <li>sdfsdf</li>
   <li>sdfsdf</li>
   <li class="notdragabble">sdfsdf</li>   
</ul 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:49:56.653

当您将某些东西指定为可拖动时，您将可拖动性应用于 jQuery 对象。在您发送的链接示例中，他们有：

```
$( "li", $gallery ).draggable([options]); 
```

要使某些东西不可拖动，您需要做的就是确保 jQuery 中的选择器只包含您希望可拖动的那些。最简单的方法是将一个名为“可拖动”的类或其他东西放在您想要可拖动的项目上。

# css - Rails Bootstrap 不会使用制表。（这是一个 Rails - CSS 问题）

> ID：11690165
> 
> 赞同：0
> 
> 时间：2012-07-27T14:45:30.293
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

一如既往，我想我错过了一些基本的东西，但我希望你能提供帮助。

我有一个网站正在开发中。我选择 bootstrap 作为一个基本的 CSS 框架。我试图在视图上建立一个选项卡。

```
<div class="text_area">
  <ul class="nav nav-tabs">
    <li><a href="#tarot" data-toggle="tab">Tarot Jóslás</a></li>
    <li><a href="#iching" data-toggle="tab">I Ching Jóslás</a></li>
    <li><a href="#igennem" data-toggle="tab">Igen Nem Jóslás</a></li>
  </ul>

  <div class="tab-pane fade active in" id="tarot">1
  </div>

  <div class="tab-pane fade" id="iching">2
  </div>    

  <div class="tab-pane fade" id="igennem">3s
  </div>
</div> 
```

有了这个视图，我的标签不会列表。昨天它工作正常，现在它堆叠起来了。我检查了其他项目，如果我启动服务器，我会错过一些文件：

这是我在另一个项目中所拥有的：

```
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/sessions.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/static_pages.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/users.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<script src="/assets/jquery.js?body=1" type="text/javascript"></script> 
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script> 
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script> 
<script src="/assets/sessions.js?body=1" type="text/javascript"></script> 
<script src="/assets/static_pages.js?body=1" type="text/javascript"></script> 
<script src="/assets/users.js?body=1" type="text/javascript"></script> 
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

这就是我现在所拥有的：

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<link href="/assets/static_pages.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script> 
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script> 
<script src="/assets/static_pages.js?body=1" type="text/javascript"></script> 
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

少了几行。这是问题的根源吗？或者我想念什么？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:49:33.823

溶液是澄清的。我忘记添加所需的代码：

```
//= require bootstrap 
```

至：

就在对 //= require_tree 的调用之上。在 app/assets/javascripts/application.js 中。

归功于[Tim K.](https://stackoverflow.com/users/43043/tim-k)因为：

[“bootstrap-sass”不适用于 rails 3.2.2](https://stackoverflow.com/questions/9715470/the-bootstrap-sass-doesnt-work-with-rails-3-2-2)

# javascript - 使用严格的 DOCTyPE 定义时，jQuery 可拖动对象得到扩展

> ID：11690169
> 
> 赞同：0
> 
> 时间：2012-07-27T14:45:51.830
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, doctype

好的，我有一个可拖动的 div #reportBox_1。当我拖动这个 div 时，它的宽度增加到原来宽度的 3 倍左右。现在这个 #reportBox_1 的宽度为 29%，但似乎扩展是从 #wrapper 样式的两个级别继承而来的。

这实际上是更大页面的一部分，但是将代码缩减以缩小问题范围，我注意到这个问题仅在我有严格的 DOCTYPE 定义时才会出现。下面是我正在使用的相同代码。如果我删除 DOCTYPE 定义，拖动宽度问题就解决了。

现在我想保留这个严格的 DOCTYPE 定义，因为由于某种原因，IE9 在使用“border-radius”样式时将不再显示我的圆形边框，但我想这是另一个问题。

现在IE8和IE9都会出现这种可拖动宽度扩展问题。有人可以帮忙吗？我是 jQuery 的新手。下面是我的代码：

更新：当我将整个页面恢复正常并删除 DOCTYPE 定义时，问题仍然存在。然后我删除了定义标签，它现在可以工作了。下面是我使用的元定义。

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

不知道为什么这会导致 jQuery 可拖动问题，但似乎是导致问题的 DOCTYPE 和元标记的组合。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>

<style type="text/css">
body{
    height:800px;
    background-color: #CCCCCC;
    overflow: auto;
}

.mainWrapper{
    width: 1300px;
    height: 800px;
}  

.directoryContainer{
    width: 40%;
    height: 800px;
    background-color: #CCCC33;
    float: left;
} 

.preSelectedReportDisplayBox{
    float: left;
    height: 120px;
    width: 29%;
    background-image: url(picts/reports/report_display_box.jpg);
    text-align: center;
    margin-left: 21px;
    padding-top: 20px;
    border: 1px solid;
    border-color: #3399FF;
}

</style>  

<link type="text/css" href="scripts/jqueryui_1.8/css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />  
<script type="text/javascript" src="scripts/jqueryui_1.8/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/jqueryui_1.8/js/jquery-ui-1.8.21.custom.min.js"></script>

<script type="text/javascript">

    function initialize(){
        makeReportsDraggable(); 
    }   

    function makeReportsDraggable(){

            $('#reportBox_1').draggable({
                helper: 'clone'
            });

    }

</script>   

</head> 
<body onload="initialize()">

    <div id="wrapper" class="mainWrapper">
        <div id="directoryContainer" class="directoryContainer">

                    <div id="reportBox_1"  class="preSelectedReportDisplayBox">

                      Box1

                    </div>

        </div>              

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:47:19.980

父 DIV 是百分比宽度，例如 30%。我只是将宽度更改为像素。不确定我的 DIV 设计是否搞砸了，但将其设置为固定大小可以解决问题。我想这对我现在有用...... DOCTYPE 和元标记的东西没有改变。

# tridion - Tridion Content Delivery 从其数据库中获取哪些内容？

> ID：11690171
> 
> 赞同：1
> 
> 时间：2012-07-27T14:46:01.773
> 
> 标签：tridion

我们正在使用 Tridion 5.3。

我希望在内容交付方面进行更多探索。我们有内容交付的 .NET 实现。

要将内容部署到数据库，我们在 IIS 中配置了一个网站（其中我们有 httpupload.asp 文件）。该网站通常将内容放入 MS SQL Server 数据库。

我们在 IIS 中还有一个站点服务于我们的网站。

我想了解如何从数据库中获取内容并通过该网站提供服务。因为当我看到这个网站的主目录时，我可以在文件夹本身中找到几乎所有页面（.aspx）。

那么任何人都可以帮助我了解它们是如何从数据库中获取并保存在主目录中的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:11:57.470

.aspx 页面***不是***从数据库中获取的，而是放在您的 docroot 上。您的 HttpUpload 正在这样做，请检查您的`cd_broker_conf.xml`.

我建议阅读文档以了解 cd_broker_conf.xml 中的绑定（在 5.3 中，SDL Tridion R5 Content Delivery Project Planning Guide 5.3 SP1.pdf）。您将拥有页面和内容的绑定，您可以配置内容或页面的存储位置（发布节点上的 Docroot 属性）。

您可能只是将内容（组件/组件演示）和元数据存储在数据库中，但将二进制文件和页面存储在文件系统上，这很常见。我不相信 Tridion 5.3 您可以选择将页面存储在 DB 中（不记得在我的脑海中 - 除非您使用 CWA）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T08:07:34.080

您可以在 .NET 和 Java 演示站点之间使用几乎相同的存储（代理）内容交付 API，一直到 R5.3。例如检索或过滤：

*   **组件元数据**（在交付端称为自定义元数据）
*   **组件表示**，呈现的内容以 .ascx 形式发布或发布到数据库（对于 ASP.NET，尽管其他选项可用）
*   **二进制文件**
*   **页面**
*   **链接信息**（例如浴到二进制）

页面*可能*来自 Tridion，也可能是您的 .NET 网站或应用程序的一部分。

在 5.3 中使用代理查询的基础是选择性地过滤和检索选择的组件标识符 (tcmids)，然后检索适当的动态组件表示。具体设置取决于要求。

我相信至少对于*带有 .NET*的 R5.3 来说，获取类别和关键字信息更加困难（但对于一些创造性的 XSLT 来说可能）。

如果您只能使用 R5.3 一个月，我建议您专注于 Tridion 2011，除非这包括交付端代码升级。否则，请访问[这篇关于 ASP.NET 方法的适当日期（大约 2009 年）的 TridionWorld 文章](https://www.sdltridionworld.com/articles/tridionandaspnet.aspx)。

# playframework - playframework 2.x logback 日志只有一半工作？

> ID：11690175
> 
> 赞同：0
> 
> 时间：2012-07-27T14:46:23.563
> 
> 标签：playframework, playframework-2.0

我将 logging.xml 文件添加到我的 conf 目录中，我看到播放日志格式更改（好）但级别没有更改为调试。它似乎只遵守 application.conf 中设置的日志级别，这很烦人。我想在 logger.xml 文件中设置不同的级别，但这个文件似乎根本不起作用（它忽略了级别）。这是故意的吗……？

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <layout class="ch.qos.logback.classic.PatternLayout">
            <pattern>%date{ISO8601} %logger %method%n%level: %message%n</pattern>
        </layout>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:04:49.610

配置 logback 的文件名是 logger.xml

删除 application.conf 文件中的日志记录属性，您将获得 logger.xml 文件中的配置。

它适用于 Play 2.1.0。

示例：[https ://github.com/fasar/Ingredienty/](https://github.com/fasar/Ingredienty/)

# android - android 2.3.x 和 4.0.3 中的 HttpURLConnection 差异

> ID：11690176
> 
> 赞同：2
> 
> 时间：2012-07-27T14:46:23.797
> 
> 标签：android, httpurlconnection

这是我正在尝试做的事情的描述：我想通过 HttpURLConnection 向网站发送登录表单。所以首先我向登录页面发送一个 GET 请求，以检查它是否存在以及我尚未登录。在关闭连接和输入流之后，我将参数设置为发送。然后我发出一个 POST 请求以实际登录。

编码：

```
url = new URL("http://www.example.com/login/");
con = (HttpURLConnection) url.openConnection();
in = con.getInputStream();
if(con.getResponseCode()==HttpURLConnection.HTTP_OK){
    loginData = getResponseData(in); // InputStream to String
    in.close();
    if(isBlank(loginData)){
        return StatusCode.CONNECTION_FAILED; // no login page
    }
    if (Login.getLoginStatus(loginData)) {
        return StatusCode.NO_ERROR; // already logged in
    }
}
con.disconnect();

String params = "password="+URLEncoder.encode(login.second,"UTF-8")+
        "&username="+URLEncoder.encode(login.first,"UTF-8");

url = new URL("http://www.example.com/login/login.php");
con = (HttpURLConnection) url.openConnection();
con.setDoOutput(true);
con.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
con.setFixedLengthStreamingMode(params.getBytes().length);
out = con.getOutputStream();
out.write(params.getBytes());
out.close();
in = con.getInputStream(); \\ THIS IS WHERE IT GETS STUCK
if(con.getResponseCode()==HttpURLConnection.HTTP_OK){
    loginData = getResponseData(in);
    in.close();
    if(isBlank(loginData)){
        return StatusCode.CONNECTION_FAILED; // no login page
    }
    if (Login.getLoginStatus(loginData)) {
        return StatusCode.NO_ERROR; // logged in
    }   
    if (loginData.contains("Invalid username and//or password.")) {
        return StatusCode.WRONG_LOGIN_DATA; // wrong login
    }
}
con.disconnect(); 
```

在 2.3.x 版本中，它返回响应代码：302，InputStream 中没有数据（`con.getInputStream()`非常快），我可以在 Eclipse 调试模式下看到所有标题。

在 4.0.3 版本中，它返回响应代码：200，InputStream 中的所有数据（`con.getInputStream()`卡住了大约 2 分钟），在调试模式下我可以阅读以下内容：

```
con.ResponseCode = -1
con.ResponseMessage = null
con.redirectionCount = 1 
```

你知道为什么会有差异，以及我如何设法让它在 2.3.x 及更高版本的每个版本中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:48:51.987

在 4.0.3 中，重定向会自动为您处理（这就是为什么您甚至看不到 302 响应代码的原因）。

类上有一个[`getInstanceFollowRedirects`](http://developer.android.com/reference/java/net/HttpURLConnection.html#getInstanceFollowRedirects%28%29) 方法（或`getFollowRedirects`静态方法），`HttpURLConnection`您可以使用它来查看是否自动遵循重定向。使用它们对应的**setter**对应项（`setInstanceFollowRedirects`或 static `setFollowRedirects`），您可以更改此行为。

# php - 面试 - 如何计算文本文件中每个单词的频率

> ID：11690178
> 
> 赞同：-6
> 
> 时间：2012-07-27T14:46:41.930
> 
> 标签：php

我有一次面试，我可以使用任何我想使用的语言来计算每个单词在文本文件中出现的次数。

我在 C 中通过读入每个单词并将其添加到树结构中来解决它 - 如果单词在结构中已准备好，算法将向我添加到节点中的计数器添加一个。

那个人说我有很多代码而且很乱，并说我可以用大约 3 行代码在 PHP 中完成。

我开始使用 将`explode()`字符串分成单词数组，但之后就卡住了。

有谁知道这可以用几行代码在 PHP 中完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:48:27.187

一个简单的方法是用 读取完整的文件作为字符串[`file_get_contents()`](http://php.net/file_get_contents)，将其拆分为空格，然后运行生成的数组[`array_count_values()`](http://php.net/array_count_values)

```
$file = file_get_contents( 'text_file.txt');
$array = preg_split( '/\s+/', $file); 
$counts = array_count_values( $array); 
```

完毕！

但是，这并不完美，因为标点符号会打乱您的计数。因此，正如 Mark Ba​​ker 所指出的，我们可以回到我原来的方法，用 获取文件中的所有单词[`str_word_count()`](http://php.net/str_word_count)，然后通过 运行该数组`array_count_values()`：

```
$file = file_get_contents( 'text_file.txt');
$words = str_word_count( $file, 1);
$counts = array_count_values( $words); 
```

# wcf - wcf 声明性 wf 服务：web.config 设置

> ID：11690179
> 
> 赞同：0
> 
> 时间：2012-07-27T14:46:45.807
> 
> 标签：wcf, web-config, wcf-binding

技术人员——我收到了一条非常流行的消息：“已超出传入消息的最大消息大小配额 (65536)。要增加配额，请在适当的绑定上使用 MaxReceivedMessageSize 属性”。这里没有什么新东西——我需要按照消息中的内容去做。我的麻烦是我不确定在服务 web.config 文件中的哪个位置进行设置。

这是我第一次使用声明式工作流服务，所以请和我一起呆在那里。看起来生成的 web.config 文件比为其他类型的 wcf 服务生成的文件要轻一些。这是开箱即用的默认设置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
 </behaviors>
 <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
 </system.serviceModel>
 <system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

当我运行 svcutil.exe 来为此生成代理类时，生成的内容如下：

```
 <?xml version="1.0" encoding="utf-8"?>
 <configuration>
 <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_TelaPointSMService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false"
                hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" 
                maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" 
                 maxArrayLength="16384"
                 maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                  <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                   <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:18781/TelaPointSMService.xamlx"
            binding="basicHttpBinding"
             bindingConfiguration="BasicHttpBinding_TelaPointSMService"
            contract="TelaPointSMService" name="BasicHttpBinding_TelaPointSMService" />
    </client>
   </system.serviceModel>
   </configuration> 
```

因此，在工作流服务的 web.config 文件中，我要声明什么/如何声明以确保该服务可以处理大于默认设置的消息？我认识到客户端绑定中的设置也必须更改——但是在哪里进行更改是很清楚的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:42:44.973

看起来您使用的是 4.0，因此由于默认端点和绑定，配置文件会更轻。如您所见，这样做的问题在于默认绑定具有默认设置。

要解决此问题，您可以在服务的配置文件中显式定义一个默认绑定，该绑定将用于具有该绑定的任何服务。为此，您像往常一样定义绑定，但省略了`name`属性，因此您将拥有如下内容：

```
<system.serviceModel>     
  <bindings>         
    <basicHttpBinding>             
      <binding maxReceivedMessageSize="5242880" />
    </basicHttpBinding> 
  </bindings>
  <!-- The rest of your services config file -->
</system.serviceModel> 
```

您可能还需要增加其他值（可能是缓冲区大小），因此您可以像添加它们一样添加它们`maxReceivedMessageSize`。值 5242880 是我过去使用的值，但您可能需要更大的值（或者更小的值可能适合您）。

# appledoc - Appledoc - 按类别对类进行分组

> ID：11690180
> 
> 赞同：1
> 
> 时间：2012-07-27T14:46:51.067
> 
> 标签：appledoc

我正在使用 Appledoc 生成评论。在基本变体中，我得到这样的页面[http://sdk.quickblox.com/ios/](http://sdk.quickblox.com/ios/)

我想得到这样的东西[http://qblx.co/OrAHzE](http://qblx.co/OrAHzE) - 按类别分组的类。

我读了这个文档[http://gentlebytes.com/appledoc-docs-comments/](http://gentlebytes.com/appledoc-docs-comments/)，没有找到任何关于这个的信息。有人做过这样的事情吗？坦克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:57:23.573

As answered on email, this is not currently supported.

From perspective of the author of appledoc: one of the goals of appledoc was to generate documentation looking as close to Apple's own as possible. As Apple doesn't use "sections" on index pages, such functionality wasn't implemented on appledoc as well and also isn't planned.

# java - 使用 onPreferenceClick 启动 Activity

> ID：11690182
> 
> 赞同：0
> 
> 时间：2012-07-27T14:47:00.713
> 
> 标签：java, android, android-activity, launch, preference

我正在尝试从我的偏好屏幕启动一项活动，任何帮助将不胜感激。这是我一直在玩的一些代码。

```
 Preference customerPref2 = (Preference) findPreference("community");
  customerPref2.setOnPreferenceClickListener(new  OnPreferenceClickListener() {

   public boolean onPreferenceClick(Preference preference) {
              Toast.makeText(getBaseContext(),
                "Launching Activity", 
              Toast.LENGTH_SHORT).show();
          Intent intent = new Intent();                                                                 
          intent.setClassName("com.xxx.xxxx", "Community" );
          intent.setClass(Prefs.this, Community.class);
          startActivity(intent); 
```

我不知道要使用这段代码的哪一部分，所以我同时包含了 setClassName 和 setClass

首选项.xml

```
 <Preference
            android:title="Checkout this Activity"
            android:summary="Launch the Activity"
            android:key="community">

     <intent android:action="android.intent.action.VIEW"
         android:targetPackage="com.xxx.xxxx"
         android:targetClass="com.xxx.xxxx.Community 
```

我还发现人们说要确保您的清单是正确的，因为当我尝试启动该活动时，有时会说它无法找到它。这是我的清单

```
 <activity android:name=".Community" android:label="@string/gotodashboard">
        <intent-filter>
            <action android:name="android.intent.category.VIEW" />
            <category android:name="android.intent.category.PREFERENCE" />
        </intent-filter>
    </activity> 
```

任何帮助或源代码示例都将帮助我解决这个问题。谢谢盖西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:09:16.040

我已经通过将我的 prefs java 文件中的代码更改为此来解决了这个问题。

```
 public boolean onPreferenceClick(Preference preference) {
     Intent myIntent = new Intent(Prefs.this, Community.class);
     Prefs.this.startActivity(myIntent);
     return true;
   } 
```

# .net - 无法将自定义活动添加到 VS 2012 工作流

> ID：11690186
> 
> 赞同：3
> 
> 时间：2012-07-27T14:47:11.570
> 
> 标签：.net, workflow-foundation-4, workflow-foundation, visual-studio-2012, workflow-activity

我在 Visual Studio 2012 中创建并构建了一个工作流活动库项目，并创建了一个 HelloWorld.xaml 活动，如下所示：

![打印的活动](../Images/690be0f34ea609a900f3323d3f4e7cac.png)

很基本，没有多余的装饰。但是，我似乎无法将此活动添加到我复制的工作流模板中。活动在工具箱中显示得很好，但是当我尝试将它拖到图表上适当位置的设计器中时，鼠标光标会变为标准的“不允许”圆形图像，并且活动不是t 放置。

这里有什么我从根本上想念的东西吗？我的理解是工具箱中的任何活动都应该能够拖放到设计器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:53:28.770

确保您拥有对要添加到工作流程中的活动项目的引用。

# php - PHP中限制数组的长度

> ID：11690187
> 
> 赞同：11
> 
> 时间：2012-07-27T14:47:13.957
> 
> 标签：php, arrays

`LIMIT`是否可以像MySQL一样限制数组中的成员数量？例如，如果我有`$array`成员`x`，我只想返回前 50 个成员，我该怎么做？

我应该使用 and 的组合`count()`，`array_slice()`还是有更简单的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-27T14:50:35.420

使用[array_slice](http://php.net/manual/en/function.array-slice.php)应该可以解决问题。

```
array_slice($array, 0, 50); // same as offset 0 limit 50 in sql 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T14:56:19.413

使用 SPL（更好的内存占用）：

```
// Using fixed array
$fixedArray = SplFixedArray::fromArray($array);
$fixedArray->setSize(min(50, count($array));

// Using iterator
$limitIterator = new LimitIterator(new ArrayIterator($array), 0, 50); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:52:00.743

确保`$array`只有 50 长：

```
array_splice($array, 50); 
```

或者返回前 50 个：

```
$new_array = array_slice($array, 0, 50); 
```

你期望它有多容易？;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:52:21.347

对于数组本身，没有办法限制其中的元素数量。

您可以使用循环实现自己的方法来获取数组的前 50 个元素（甚至是某个偏移后的前 50 个元素）（我建议使用循环，因为使用关联数组`array_splice()`将不起作用）：

```
function limit($array, $limit, $offset = 0) {
    $return = array();
    $end = ($limit + $offset);
    $count = 0;
    foreach ($array as $key => $val) {
        if ($count++ > $offset) {
            $return[$key] = $val;
        }
        if ($count == $end) break;
    }
    return $return;
} 
```

**编辑**：此函数提供与使用相同的结果`array_slice($array, $offset, $limit, true);`；第四个参数保留关联数组中的键。

# javascript - 从 HTTP 到 HTTPS 的跨域请求立即中止

> ID：11690191
> 
> 赞同：21
> 
> 时间：2012-07-27T14:47:29.590
> 
> 标签：javascript, https, xmlhttprequest, cors

我正在尝试从 HTTP 页面对 HTTPS 服务进行跨域 Web 服务调用。

我已经在服务器上设置了正确的 CORS 标头（它适用于 HTTP-HTTP 和 HTTPS-HTTPS）。

如果我将请求更改为 JSONp，它*确实有效。*

我在 Chrome 和 Firefox 中看到的是 HTTPS 请求*永远不会发送*，它会立即*中止*，并且服务器永远不会看到该请求。

值得注意的是，预检`OPTIONS`请求被中止（并且它没有到达服务器）。

我找不到任何解释这确实是不可能的来源（HTTP 到 HTTPS），更好的是：解释*为什么*。我可以理解 HTTPS 到 HTTP 是不安全的，但其他方式应该没问题吧？这对我来说似乎很愚蠢，因为 JSONp 有效（但它很乱）。

**笔记**

我也`withCredentials`设置了`true`并且我正在发送一些自定义标题和自定义`Content-Type`：`application/json`

我正在使用常规 XMLHTTPRequest 并在 IE<=9 中回退到 JSONp

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T12:32:33.233

好的，我想通了。我用于 HTTPS 域的证书是自签名且未经验证的。将其添加到受信任的第三方机构列表中为我修复了它。

您可以通过 IE 在 Windows 7 中安装证书。这对我有用： [http](http://productforums.google.com/forum/#!topic/chrome/bds-Ao9LigA%5B1-25%5D) ://productforums.google.com/forum/#!topic/chrome/bds-Ao9LigA%5B1-25%5D 发帖确保您**以管理员身份**`zacharysyoung 2/11/09` 运行 IE(9) ，否则安装将失败- 虽然它说它安装正确。

 **> 1.  打开 Internet Explorer (IE) 并导航到托管自签名证书的站点。
> 2.  IE 应显示一个页面警告，“此网站的安全证书存在问题。”
> 3.  单击“继续访问此网站（不推荐）”链接。
> 4.  页面加载后，查看地址栏的右侧。标有“证书错误”的红色/粉色按钮应该可见。单击该按钮。
> 5.  将出现一个名为“不受信任的证书”的弹出窗口。单击弹出窗口底部的“查看证书”链接。
> 6.  将出现另一个名为“证书”的弹出窗口。单击“安装证书...”按钮。
> 7.  将启动“证书导入向导”。单击“下一步”按钮。
> 8.  ** 对于 XP：选择“自动选择证书...”选项，然后单击“下一步”按钮。** 对于 Vista：选择“将所有证书放入以下存储”选项，然后单击“浏览”按钮。湾。单击“显示物理商店”复选框。C。展开“第三方根证书颁发机构”文件夹，然后选择“本地计算机”。单击“确定”按钮。d。单击“下一步”按钮。
> 9.  这应该会显示“完成证书导入向导”对话框。单击“完成”按钮。
> 10.  将出现“安全警告”弹出窗口。该警告通知您证书的来源实际上无法验证。您应该知道证书的来源。如果这样做，请单击“是”按钮安装证书。
> 11.  将显示最后一个弹出窗口，通知您“导入成功”。单击“确定”按钮。
> 12.  重新启动/打开 Chrome 并导航到相关站点。您*不*应该被安全警告页面打招呼。

除此之外，我想我可能在 Chrome 中发现了一个错误。请参阅： [https ://code.google.com/p/chromium/issues/detail?id=141839](https://code.google.com/p/chromium/issues/detail?id=141839)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:11:56.510

[设置类似easyXDM](http://easyxdm.net/wp/)的东西可能更容易。它上手相当快，并且会为您完成所有向后兼容性（一直到 IE6）。它可能不是您正在寻找的本土解决方案，但如果您想要快速跨域（您可以访问双方），它符合要求。

您总是可以编写自己的 iframe (postMessage) 界面，但为什么要重新发明轮子（如果您使用不同的子域，请不要忘记设置您的 document.domain）。**

# javascript - Chrome 的 div 的 Javascript 定时刷新

> ID：11690192
> 
> 赞同：0
> 
> 时间：2012-07-27T14:47:35.667
> 
> 标签：javascript, cross-browser

目前，我正在使用以下代码来刷新`<div name="content">`网页的一部分

> ```
> <script type="text/javascript">
>   window.onload = setupRefresh;
> 
>  function setupRefresh() {
>      setInterval("refreshFrame();", 5000);
>  }
>  function refreshFrame() {
>     parent.content.location.reload();
>  }
> </script>
> 
> </head>
> <body>
> <div id="header">
>   <h1>Arbitrary Header</h1>
> </div>
> <div name="content">
>   <?php
>   //Code here
>   ?>
> </div> 
> ```

这在 Firefox 中效果很好，但 Chrome 似乎忽略了它。有关如何使 Chrome 以类似方式工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:11:57.950

做就是了

```
parent.location.reload(); 
```

与

```
parent.content.location.reload(); 
```

对于 Chrome，它工作得很好。

*编辑：这对我来说在所有三个浏览器上都可以正常工作。*

但是，您确定不想每五秒使用 AJAX 调用提取数据，而不是重新加载整个页面吗？JQuery 让这一切变得超级容易，无论是同步的还是异步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:17:39.523

我同意上面的评论，也许您需要 AJAX 来刷新页面的特定部分。但是以防万一您仍然想要进行整页刷新。您可以尝试在标题中添加以下元标记。

```
<meta http-equiv="refresh" content="5"> 
```

这将每 5 秒刷新一次页面。

# r - 时间序列直方图

> ID：11690194
> 
> 赞同：6
> 
> 时间：2012-07-27T14:47:43.393
> 
> 标签：r, d3.js, time-series, histogram

是否可以使用 R 或 D3.js创建一个像[本](http://www.slideshare.net/postwait/its-all-about-telemetry)演示文稿（幻灯片 36-39）中描述的那样的时间序列直方图？还是有更好的方法将分桶数据显示为时间序列？

编辑：这是一些预先存储的[示例数据](https://gist.github.com/3188612)。理想情况下，D3 或 R 会自己进行分桶。是的，如果不清楚，我知道我可以自己写这个。我只是想知道是否已经有一个包可以做到这一点，而我还没有遇到它。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T23:10:16.773

这是 D3 中的一个版本，以 @bdemarest 使用 ggplot2 的回答为模型：

[![D3 热图](../Images/5090fbea5c335845baa83d084d6803c6.png)](http://bl.ocks.org/3202354)

这个版本使用[平铺的矩形元素](http://bl.ocks.org/3202354)。[如果您有一个大型数据集，您可能会从基于像素的热图](http://bl.ocks.org/3074470)获得更好的性能。

如果要使用 D3 计算存储桶，可以使用[d3.nest](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest)按天和按值对数据进行分组。还有[d3.layout.histogram](https://github.com/mbostock/d3/wiki/Histogram-Layout)，但由于您可能希望每天都有均匀间隔的垃圾箱和相同的垃圾箱，因此 d3.nest 应该就足够了。

一个微妙的考虑：我在瓷砖之间的刻度上放置了刻度线，以便直观地指示值是如何分箱的。例如，左下角的桶对应于 7 月 20 日 800 到 900 之间的所有值（其中 7 月 20 日是午夜到午夜的时间间隔）；至少，这是我通过查看您的数据所假设的。这比标记矩形的中间要清楚一些，因为它表明这些值是取整的而不是四舍五入的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T19:19:59.540

这是使用 R 和 ggplot2 的一种可能解决方案。

您的数据，准备粘贴到 R 控制台：

```
dat = structure(list(date = structure(c(15541, 15541, 15541, 15541, 
    15541, 15541, 15541, 15541, 15541, 15541, 15541, 15541, 15541, 
    15541, 15541, 15541, 15541, 15542, 15542, 15542, 15542, 15542, 
    15542, 15542, 15542, 15542, 15542, 15542, 15542, 15542, 15542, 
    15542, 15543, 15543, 15543, 15543, 15543, 15543, 15543, 15543, 
    15543, 15543, 15543, 15543, 15543, 15543, 15543, 15543, 15543, 
    15543, 15543, 15544, 15544, 15544, 15544, 15544, 15544, 15544, 
    15544, 15544, 15544, 15544, 15544, 15544, 15544, 15544, 15544, 
    15544, 15544, 15544, 15544, 15544, 15545, 15545, 15545, 15545, 
    15545, 15545, 15545, 15545, 15545, 15545, 15545, 15545, 15545, 
    15545, 15545, 15545, 15545, 15546, 15546, 15546, 15546, 15546, 
    15546, 15546, 15546, 15546, 15546, 15546, 15546, 15546, 15546, 
    15546, 15546, 15546, 15547, 15547, 15547, 15547, 15547, 15547, 
    15547, 15547, 15547, 15547, 15547, 15547, 15547, 15547, 15547, 
    15547, 15547, 15547, 15547), class = "Date"), bucket = c(800L, 
    900L, 1000L, 1100L, 1200L, 1300L, 1400L, 1500L, 1600L, 1700L, 
    1800L, 1900L, 2000L, 2100L, 2200L, 2300L, 2400L, 800L, 900L, 
    1000L, 1100L, 1200L, 1300L, 1400L, 1500L, 1600L, 1700L, 1800L, 
    1900L, 2000L, 2100L, 2200L, 900L, 1000L, 1100L, 1200L, 1300L, 
    1400L, 1500L, 1600L, 1700L, 1800L, 1900L, 2000L, 2100L, 2200L, 
    2300L, 2400L, 2500L, 2600L, 2800L, 800L, 900L, 1000L, 1100L, 
    1200L, 1300L, 1400L, 1500L, 1600L, 1700L, 1800L, 1900L, 2000L, 
    2100L, 2200L, 2300L, 2400L, 2500L, 2600L, 2700L, 2800L, 800L, 
    900L, 1000L, 1100L, 1200L, 1300L, 1400L, 1500L, 1600L, 1700L, 
    1800L, 1900L, 2000L, 2100L, 2200L, 2300L, 2400L, 800L, 900L, 
    1000L, 1100L, 1200L, 1300L, 1400L, 1500L, 1600L, 1700L, 1800L, 
    1900L, 2000L, 2100L, 2200L, 2300L, 2400L, 1300L, 1400L, 1500L, 
    1600L, 1700L, 1800L, 1900L, 2000L, 2100L, 2200L, 2300L, 2400L, 
    2500L, 2600L, 2700L, 2800L, 2900L, 3000L, 3200L), cnt = c(119L, 
    123L, 173L, 226L, 284L, 257L, 268L, 244L, 191L, 204L, 187L, 177L, 
    164L, 125L, 140L, 109L, 103L, 123L, 165L, 237L, 278L, 338L, 306L, 
    316L, 269L, 271L, 241L, 188L, 174L, 158L, 153L, 132L, 154L, 241L, 
    246L, 300L, 305L, 301L, 292L, 253L, 251L, 214L, 189L, 179L, 159L, 
    161L, 144L, 139L, 132L, 136L, 105L, 120L, 156L, 209L, 267L, 299L, 
    316L, 318L, 307L, 295L, 273L, 283L, 229L, 192L, 193L, 170L, 164L, 
    154L, 138L, 101L, 115L, 103L, 105L, 156L, 220L, 255L, 308L, 338L, 
    318L, 255L, 278L, 260L, 235L, 230L, 185L, 145L, 147L, 157L, 109L, 
    104L, 191L, 201L, 238L, 223L, 229L, 286L, 256L, 240L, 233L, 202L, 
    180L, 184L, 161L, 125L, 110L, 101L, 132L, 117L, 124L, 154L, 167L, 
    137L, 169L, 175L, 168L, 188L, 137L, 173L, 164L, 167L, 115L, 116L, 
    118L, 125L, 104L)), .Names = c("date", "bucket", "cnt"), 
    class = "data.frame", row.names = c(NA, -125L)) 
```

绘图代码：

```
library(ggplot2)

plot_1 = ggplot(dat, aes(x=date, y=bucket, fill=cnt)) +
         geom_tile() +
         scale_fill_continuous(low="#F7FBFF", high="#2171B5") +
         theme_bw()

ggsave("plot_1.png", plot_1, width=6, height=4) 
```

![在此处输入图像描述](../Images/b5b1ff3cec4f6c4f87821a78dd530690.png) 如果您在数据中包含零桶值的行，该图可能看起来更好。然后您可以更改`low="#F7FBFF"`为`low="white"`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T15:01:48.750

将您的数字放入矩阵并使用“图像（垫）”？看起来就是这样。一个网格。一个光栅。还是我错过了什么？

还有一些方法可以用 ggplot、raster 和其他方法来做到这一点。

# css - 切换到 HTML 5 时 CSS 焦点代码不起作用

> ID：11690195
> 
> 赞同：1
> 
> 时间：2012-07-27T14:47:44.747
> 
> 标签：css, html, focus, css-selectors

当您将鼠标放在输入上时，我有一些代码用于使输入具有漂亮的背景颜色：

```
<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
    <style type="text/css">
    input[type="text"]:focus
    {
    background-color: #bfd0eb;
    }
    </style>
</head>
<body>
    <form method="post">
    <input type="text" name="input1" id="input1" value="" />
    <input type="text" name="input2" id="input2" value="" />
    </form>
</body>
</html> 
```

这对 XHTML 1.0 过渡效果很好，但是当我切换到 HTML 5 时，如果我单击“input2”，它会将焦点从我单击的“input2”上移开，而始终关注“input1”。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:52:37.963

由于我还不能发表评论，我已将您的代码添加到 jsFiddle 并且工作正常，[http://jsfiddle.net/kuWWg/1/](http://jsfiddle.net/kuWWg/1/)

如果你想让它悬停，你需要使用`:hover`选择器而不是`:focus` [http://jsfiddle.net/kuWWg/2/](http://jsfiddle.net/kuWWg/2/)

# javascript - getElementsByClassName 什么都不返回

> ID：11690200
> 
> 赞同：0
> 
> 时间：2012-07-27T14:47:57.977
> 
> 标签：javascript, html, function

我正在使用以下脚本 -

```
<HTML>
<meta http-equiv='Content-Type' content='text/xml; charset=windows-1252'>

<script type="text/javascript">
    function show(){
        var navLinks = document.getElementsByClassName('a');
        for (var i = 0; i < navLinks.length; i++) {
            var link = navLinks[i];
            var title = link.title;
            alert(title);
    }
}
    </script>

<HEAD>
<TITLE>Properties</TITLE>
</HEAD>
<BODY>
<button type="button" onClick="show()">Close</button>

<table cellpadding=0 cellspacing=0>

<tr>
    <td>Contact</td>
    <td class="a">(01) 234 5678</td>
</tr>

</table>

</BODY>
</HTML> 
```

我想要做的就是显示一个警告框，`(01) 234 5678`但是 IE8 什么都不做，Chrome 显示一个空白的警告框。

我是 Javascript 新手，但我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:52:43.937

您不需要像这样获取获取 innerHTML 所需的链接标题：

```
var title = link.innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:56:00.347

我错了。我使用 firebug 并尝试 console.log 输出。navLinks 可以得到正确的结果

```
<td class="a">(01) 234 5678</td> 
```

但是您没有 title 属性，因此不返回任何内容。尝试

```
<td class="a" title="(01) 234 5678">(01) 234 5678</td> 
```

我让它在我的机器上工作

# android - 超出背景图像的按钮

> ID：11690202
> 
> 赞同：1
> 
> 时间：2012-07-27T14:48:00.897
> 
> 标签：android, android-layout

我想我找不到标题的正确单词，所以我会尝试正确解释。

所以我有这张图片作为我的布局的背景：http: [//imageshack.us/photo/my-images/607/fond1g.png/](http://imageshack.us/photo/my-images/607/fond1g.png/)

我想把按钮正确地放进去。

因为左边和右边都有一些透明度。所以按钮超出了工作表。

有什么可以说“嘿，这是透明的，我不想要任何东西”吗？或者“嘿，这就是我想放所有东西的（床单）？

我试图放置另一个 LinearLayout 但我不知道如何提供良好的宽度。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:06:49.900

从您的问题中，我了解到您希望避免将按钮放在背景图像的左右透明边缘中。为此，您可以使用`android:layout_marginLeft`and `android:layout_marginRight`。对于您的代码，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:background="@drawable/fond"
>

<ImageView
    android:id="@+id/imageView1"
    android:contentDescription="@string/desc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/top" 
    android:layout_gravity="top" 
    android:adjustViewBounds="true" 
/>

<LinearLayout 
    android:layout_below="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/fond1"
    >

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp" <!--Use the correct dp value, i just use it for example -->
        android:layout_marginRight="30dp" <!--Use the correct dp value, i just use it for example -->
        android:weightSum="3"
        >

        <Button 
            android:id="@+id/button_garçon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Bg"
            android:background="@drawable/button_purple" 
            android:layout_weight="1"
            android:textColor="#ffffff"
            android:onClick="actionGarçon"
        />
        <Button 
            android:id="@+id/button_mixte"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Bm"
            android:background="@drawable/button_purple" 
            android:layout_weight="1"
            android:textColor="#ffffff"
            android:onClick="actionMixte"
        />

        <Button
            android:id="@+id/button_fille"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Bf"
            android:background="@drawable/button_purple" 
            android:layout_weight="1"
            android:textColor="#ffffff"
            android:onClick="actionFille"           
        />

    </LinearLayout>

</LinearLayout>  

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:59:58.547

这是我的代码的简化部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="@drawable/fond"
   >

    <ImageView
        android:id="@+id/imageView1"
        android:contentDescription="@string/desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/top" 
        android:layout_gravity="top" 
        android:adjustViewBounds="true" 
    />

    <LinearLayout 
        android:layout_below="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@drawable/fond1"
        >

        <LinearLayout 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:weightSum="3"
            >

            <Button 
                android:id="@+id/button_garçon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Bg"
                android:background="@drawable/button_purple" 
                android:layout_weight="1"
                android:textColor="#ffffff"
                android:onClick="actionGarçon"
            />
            <Button 
                android:id="@+id/button_mixte"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Bm"
                android:background="@drawable/button_purple" 
                android:layout_weight="1"
                android:textColor="#ffffff"
                android:onClick="actionMixte"
            />

            <Button
                android:id="@+id/button_fille"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Bf"
                android:background="@drawable/button_purple" 
                android:layout_weight="1"
                android:textColor="#ffffff"
                android:onClick="actionFille"           
            />

        </LinearLayout>

    </LinearLayout>  

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:56:18.850

如果您使用的是`LinearLayout`图像，则可以将背景设置为图像。然后你可以在里面放任何东西`LinearLayout`，所有东西都会正确地放入你的图像中。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"       
    android:background="#ffffff"
    android:orientation="vertical">

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="320dp"
        android:layout_height="512dp"       
        android:background="@drawable/scaled"
        android:orientation="vertical" >

    <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="25dp"        
        android:text="Button" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/eaa5e39189c32b56dff8a6c7991952fd.png)

希望有帮助。

# ruby-on-rails - 无法使用 Rails 中的 redis gem 在 Redis 中正确保存图像

> ID：11690205
> 
> 赞同：4
> 
> 时间：2012-07-27T14:47:59.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, redis, binary-data

我正在尝试将图像保存到 Redis，稍后将在 Resque 任务中获取并上传到我们的图像服务器。

ImageHandle 类将为我们获取图像。目前，我只关心从 Redis 中获取图像。

```
class ImageHandle < ActiveRecord::Base
  attr_accessible :uploaded, :image
  after_save :save_image

  def image_data
    $redis.get(redis_key)
  end

  def image=(value)
    @image = value
  end

  private

  def redis_key
    @redis_key ||= "image_handle:#{id}:image"
  end

  def save_image
    $redis.set(redis_key, @image.read)
  end
end 
```

$redis 在初始化程序中设置的位置：

```
$redis = Redis.new 
```

这是我的测试文件：

```
require 'test_helper'

class ImageHandleTest < ActiveSupport::TestCase
  include ActionDispatch::TestProcess

  setup do
    clear_redis
  end

  test 'saves an image' do    
    image = fixture_file_upload('screaming-eagle.jpg', 'image/jpg')
    # You can only read from a file fixture once
    same_image = fixture_file_upload('screaming-eagle.jpg', 'image/jpg')

    image_handle = ImageHandle.create(image: image)

    expected = same_image.read
    actual   = image_handle.image_data

    puts "length of expected: #{expected.length}"
    puts "length of actual:   #{actual.length}"

    assert_equal expected, actual
  end
end 
```

结果是：

```
length of expected: 81500
length of actual:   78524
F 

Finished tests in 0.270385s, 3.6984 tests/s, 3.6984 assertions/s.

  1) Failure:
test_saves_an_image:23 
```

我不知道是怎么回事。

当我尝试设置 ("b" * 81500) 然后获取它时，我将其恢复为预期的 81500 长度。

感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:19:21.817

redis-rb 将字符串转换为默认的外部编码`Encoding::default_external`，通常是 UTF-8。见[https://github.com/redis/redis-rb/commit/61fa1f884a643cd7dea8e0e56498860594058a39](https://github.com/redis/redis-rb/commit/61fa1f884a643cd7dea8e0e56498860594058a39)

您可以在存储二进制数据之前将它们编码为 Base64，并在检索后从 Base64 解码：

```
class ImageHandle < ActiveRecord::Base
  attr_accessible :uploaded, :image
  after_save :save_image

  def image_data
    Base64.decode $redis.get(redis_key)
  end

  def image=(value)
    @image = value
  end

  private

  def redis_key
    @redis_key ||= "image_handle:#{id}:image"
  end

  def save_image
    $redis.set redis_key, Base64.encode(@image.read)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T16:25:30.743

您可以将字符串转换为 ASCII-8BIT 而不会丢失数据。更新此方法：

```
def image_data
  $redis.get(redis_key).force_encoding(Encoding::ASCII_8BIT)
end 
```

它比 Base64 更快更简单。

# javascript - 高性能 CSS3 全屏滑块

> ID：11690210
> 
> 赞同：1
> 
> 时间：2012-07-27T14:48:13.160
> 
> 标签：javascript, css, client-side

在实现灯箱或图像滑块时，我通常的方法是将包含幻灯片的元素嵌套在具有 的固定宽度和高度元素中`overflow:hidden;`，如下所示。

![CSS3滑块图](../Images/3ef916cd39d9fdec3931a3cc0f4f8be3.png)

通过为边缘设置动画，我们可以流畅地移动幻灯片通过可见区域。

我最近一直在实现这样一个使用全屏幻灯片并针对 Retina 显示 iPad 的滑块。幻灯片不是图像，而是不同的 HTML 块，其中一些带有高分辨率的嵌入式媒体。该设备的性能是可以接受的，但绝对可以改进。

我的问题是**，在尝试优化此类 Web 应用程序的客户端性能时，我应该考虑哪些因素？**例如，我知道 CSS3 过渡被认为是硬件加速的结果。

有没有办法让 WebKit 更喜欢布局 DOM？

“延迟加载”不可见页面是否会产生真正的影响？如果是这样，是否值得积极删除已经被视为控制 DOM 大小的旧元素？

当前每张幻灯片都是异步加载的`onLoad`。一次向浏览器提供所有 HTML 是否会对性能产生影响（除了保存一些 HTTP 请求）？

如果您能提出任何提示或技巧，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:56:50.257

好的，这里有几件事要记住。

1.  避免重绘。如果你可以使用变换和过渡，那就去做吧。因为浏览器知道你在做什么，它可以避免在不需要的时候重新绘制。几年前我写了这个： http: [//css3.bradshawenterprises.com/sliding/](http://css3.bradshawenterprises.com/sliding/)，它解释了如何做到这一点。回退到使用 jQuery animate 是一种流行的选择。我在这里写了一个非常丑陋的方法来做到这一点：http: [//css3.bradshawenterprises.com/legacy/](http://css3.bradshawenterprises.com/legacy/)，但你可能会考虑如何以更好的方式编写它，现在事情已经发生了一些变化。例如，jQuery 1.8 抽象掉了供应商前缀，避免了我很多丑陋的代码！

2.  `transform: translate3d(0,0,0);`尽可能使用 3D 变换，您可以通过在移动位上添加一个来作弊。这迫使它进入 Webkit 中的一个新层，这可以帮助某些版本的 webkit。

3.  关于内存使用和 DOM 对象，请使用 Chrome 或 Safari 中的 Timeline Inspector 使用滑块记录自己，然后检查发生了什么。如果您可以访问 iOS 6.0，则可以在 Safari 中连接到设备以直接在设备上使用检查器。

4.  [https://developer.apple.com/videos/wwdc/2012/?id=601](https://developer.apple.com/videos/wwdc/2012/?id=601)是一个处理这类事情的视频，值得一看。如果您无法访问该页面，我相信您可以通过 iTunes U 获取视频，但也许这只是因为我也是开发人员......无论哪种方式，视频的标题都是“优化 UIWebViews 中的 Web 内容”和 iOS 上的网站”。

简而言之，测量、记录、分析和实验！

# bash - 为“替换文本”字段输入一个字符串到 sed

> ID：11690211
> 
> 赞同：2
> 
> 时间：2012-07-27T14:48:17.570
> 
> 标签：bash, scripting, sed

我有一个命令输出一些我想输入到 sed 的“替换文本”字段的文本。但我得到了

```
sed: -e expression #1, char 24: unterminated `s' command error. 
```

这是重要的片段：

```
input=$(./mid 1 10 random.txt)       
echo $input       
cat $1 |sed "s/times/$input/g" > tester5.txt 
```

这是命令行输出：

```
$ ./Batchtest tester.txt      
some random text some random text some random text some random text      
sed: -e expression #1, char 24: unterminated `s' command 
```

如您所见，“./mid 1 10 random.txt”输出了一些我想插入到 sed 的“替换文本”字段的文本，但它不起作用。我尝试在 $input 周围添加引号，但这没有帮助。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:55:59.310

`$input`可能包含一些对 . 具有特殊含义的字符`sed`。您可以尝试引用它们（即在它们前面加上反斜杠）或使用更高级的工具进行替换，例如 Perl：

```
perl -e '$input = `./mid 1 10 random.txt`;
         while (<>) {
             s/times/$input/g;
             print;
         }' "$1" > tester5.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:18:11.467

`-v`使用 awk，您可以使用选项将输出放入变量中。使用这种方法，您不必担心输出中 sed 语法的特殊字符。

```
input=$(./mid 1 10 random.txt)
awk -v input="$input" '{ gsub(/times/,input); print }' "$1" > tester5.txt 
```

# magento - 如何“强制” Magento 仅加载一个模板

> ID：11690215
> 
> 赞同：2
> 
> 时间：2012-07-27T14:48:29.630
> 
> 标签：magento, magento-1.7

我有一个通用模板文件，我希望将其用于每个页面。我目睹了一位同事向他的 local.xml 或 page.xml 布局文件添加了一个参数，该参数强制每个页面使用特定的布局文件，而不管数据库值如何。他已经离开了公司，所以我不能问他是怎么做到的。我已经尝试了[如何使用 local.xml 在 Magento 1.5 中设置默认布局中建议的答案？](https://stackoverflow.com/questions/5550764/how-to-set-a-default-layout-in-magento-1-5-using-local-xml)但这没有用。

如何强制 Magento (1.7) 仅加载我想要的模板/布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:07:58.383

遗憾的是，您不仅可以使用单个选项来确保所有页面布局都将使用您的模板，而且您可以应用布局句柄，该句柄将在每个页面布局句柄中设置您的自定义模板。

所以在你的 local.xml 中应该有如下内容：

```
<your_custom_handle>
     <action method="setTemplate" block="root"><template>your/template.phtml</template></action>
</your_custom_handle>

<page_empty>
     <update handle="your_custom_handle" />
</page_empty>

<page_one_column>
     <update handle="your_custom_handle" />
</page_one_column>

<page_two_columns_left>
     <update handle="your_custom_handle" />
</page_two_columns_left>

<page_two_columns_right>
     <update handle="your_custom_handle" />
</page_two_columns_right>

<page_three_columns>
     <update handle="your_custom_handle" />
</page_three_columns> 
```

布局更新的第一部分，创建您自己的句柄，将模板设置为根块。所有其他人都将您的自定义句柄包含到不同的页面布局中。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:46:49.110

作为 Ivans 回答的替代方案，您还可以使用事件观察器来设置模板。有关更长的解释，请参[见此答案](https://stackoverflow.com/questions/11577155/magento-add-content-block-at-the-end-of-the-structual-block-content/11599046#11599046)。这是您可以使用的代码：

应用程序/设计/前端/yourpackage/yourtheme/layout/local.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

    <!-- your other adjustments for default, category_product_view and so on go here -->

    <set_root_template>
        <reference name="root">
             <action method="setTemplate"><template>your/template.phtml</template></action>
        </reference>
    </set_root_template>
</layout> 
```

app/code/yourpool/Company/Extension/Model/Observer.php

```
 <?php

    class Company_Extension_Model_Observer
    {
        /**
         * Sets the template file for the root block.
         * 
         * Uses the event 'controller_action_layout_load_before'.
         * 
         * @param Varien_Event_Observer $observer
         * @return YourCompany_YourExtension_Model_Observer
         */
        public function setRootTemplate(Varien_Event_Observer $observer)
        {
            $layout = $observer->getEvent()->getLayout()->getUpdate();
            $layout->addHandle('set_root_template');
            return $this;
        }
    } 
```

app/code/yourpool/Company/Extension/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
    <modules>
        <Company_Extension>
            <version>0.0.1</version>
        </Company_Extension>
    </modules>

    <frontend>
        <events>
            <controller_action_layout_load_before>
                <observers>
                    <company_extension_set_root_template>
                        <type>singleton</type>
                        <class>company_extension/observer</class>
                        <method>setRootTemplate</method>
                    </company_extension_set_root_template>
                </observers>
            </controller_action_layout_load_before>
        </events>
        <!-- declaring your layout xml etc. -->
    </frontend>

    <global>
        <!-- declaring your block classes etc. -->
        <models>
            <company_extension>
                <class>Company_Extension_Model</class>
            </company_extension>
        </models>
    </global>
</config> 
```

应用程序/etc/modules/Company_Extension.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Company_Extension>
            <active>true</active>
            <codePool>local</codePool>
        </Company_Extension>
    </modules>
</config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T09:47:57.790

作为另一种选择。（但与@MatthiasZeis 的建议基本相同）。我只是还提供了一个模块来做它）

我有同样的问题，我想出了相同的想法，即使用观察者事件将自定义句柄注入 magento。

因此我的代码注入了一个名为 'load last' 的句柄`<GLOBAL_OVERRIDE>`，然后允许您通过布局指令设置根模板。

由于它是最后加载的，因此任何先前设置的用于更改模板的布局指令都将替换为`<GLOBAL_OVERRIDE>`

```
<GLOBAL_OVERRIDE>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>
    </GLOBAL_OVERRIDE> 
```

您可以轻松地使用它来全局删除另一个句柄，或取消设置整个站点的子块

我将代码放在github中：

[https://github.com/ProxiBlue/GlobalHandle](https://github.com/ProxiBlue/GlobalHandle)

# oracle - 优化对两个值都匹配的记录的查询

> ID：11690218
> 
> 赞同：2
> 
> 时间：2012-07-27T14:48:38.853
> 
> 标签：oracle, optimization

我正在尝试优化 Oracle 查询。现在它运行得很慢，因为该表有大约 1M 的记录。我有两张桌子，`item_location`桌子和`tariffs`桌子。一条`item_location`记录有一个双键，`item_no`and `item_loc`。`tariffs`记录使用密钥存储，该密钥是`tariff_code`随机的三位标识符，具有字段`import_tariff`和`export_tariff`. `item_tariff_code`是项目记​​录的外键`tariffs`。

为简单起见，这是一个[SQLFiddle](http://sqlfiddle.com/#!4/ae221/1)。

我试图找到`item_no`与`export_tariff`' 匹配两个值（包括）的位置。

例如，如果我想查找同时`export_tariff`等于“1111111111”和“2222222222”的项目，它将返回“12345”，因为这些记录在数据库中：

```
 item_no  |  item_loc  |  export_tariff
----------------------------------------
  12345    |  B1        |  1111111111
  12345    |  B2        |  2222222222 
```

但由于这条记录，它不应该找到“67890”：

```
 item_no  |  item_loc  |  export_tariff
----------------------------------------
  67890    |  B1        |  1111111111 
```

因为它没有`export_tariff`“2222222222”。

[我已经在SQLFiddle](http://sqlfiddle.com/#!4/ae221/1)添加了到目前为止我一直在使用的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:05:01.650

像这样的东西？

```
SELECT 
  l1.item_no
FROM 
  item_location AS l1
CROSS JOIN
  item_location AS l2 ON l2.item_no = l1.item_no
JOIN 
  tariffs AS t1 ON l1.item_tariff_code = t1.tariff_code
JOIN
  tariffs AS t2 ON l2.item_tariff_code = t2.tariff_code
WHERE
  t1.export_tariff LIKE '1111111111' 
  AND
  t2.export_tariff LIKE '2222222222' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:01:59.123

像下面这样的东西应该可以工作：

```
SELECT
  FIRST.ITEM_NO, FIRST.ITEM_LOC, FIRST.ITEM_TARIFF_CODE, FIRST.EXPORT_TARIFF, SECOND.ITEM_TARIFF_CODE, SECOND.EXPORT_TARIFF
FROM (
   -- using a simple inner join of item_location and tariffs,
   -- create a right outer join by joining the inner join on itself 
    SELECT A.ITEM_NO, A.ITEM_LOC, A.ITEM_TARIFF_CODE, B.EXPORT_TARIFF
    FROM
      ITEM_LOCATION A INNER JOIN TARIFFS B ON (A.ITEM_TARIFF_CODE = B.TARIFF_CODE)
    ) FIRST
  RIGHT OUTER JOIN (
    -- SAME INNER JOIN
    SELECT A.ITEM_NO, A.ITEM_LOC, A.ITEM_TARIFF_CODE, B.EXPORT_TARIFF
    FROM
      ITEM_LOCATION A INNER JOIN TARIFFS B ON (A.ITEM_TARIFF_CODE = B.TARIFF_CODE)
    ) SECOND
  ON (FIRST.ITEM_NO = SECOND.ITEM_NO)
WHERE
  -- select the export tariffs you want
  FIRST.EXPORT_TARIFF = '6808417805' AND SECOND.EXPORT_TARIFF = '6046232842'
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:25:52.193

如果你不能使用临时表，Oracle 有 WITH 子句，可以以几乎相同的方式使用：

```
WITH t as (SELECT tariff_code FROM tariffs WHERE 
    (export_tariff LIKE '3916906000%' OR export_tariff LIKE '39191080%'))
SELECT t1.item_no FROM
(SELECT * FROM item_location il, t WHERE il.item_tariff_code = t.tariff_code) t1,
(SELECT * FROM item_location il, t WHERE il.item_tariff_code = t.tariff_code) t2
WHERE t1.item_no = t2.item_no AND t1.item_tariff_code <> t2.item_tariff_code 
```

顺便说一句，感谢 SQLFiddle，这是一个很棒的网站。

PS：我看不到如何避免`item_location`两次扫描表，因为您确实必须在`item_no`. 如果你想快速解决这个问题，你可以使用这样的查询来改变执行顺序：

```
WITH il AS (
  SELECT
    il1.item_no,
    il1.item_tariff_code AS tc1,
    il2.item_tariff_code AS tc2
  FROM item_location il1
  JOIN item_location il2
    ON il1.item_no = il2.item_no AND
       il1.item_loc <> il2.item_loc)
SELECT item_no FROM il
JOIN tariffs t1
  ON il.tc1 = t1.tariff_code
JOIN tariffs t2
  ON il.tc2 = t2.tariff_code
WHERE
  t1.export_tariff LIKE '3916906000%' AND
  t2.export_tariff LIKE '39191080%' 
```

在[SQLFiddle上查看](http://sqlfiddle.com/#!4/42d0a/21)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:19:55.360

如果您在 export_tariff 上被索引，也许您可​​以进行两次索引查找并结合结果来查找感兴趣的项目？

```
SELECT DISTINCT a.item_no, a.item_loc
  FROM ( SELECT item_no, item_loc
           FROM item_location
           WHERE export_tariff = '1111111111'
       ) a
      ,( SELECT item_no, item_loc
           FROM item_location
           WHERE export_tariff = '2222222222'
       ) b
  WHERE a.item_no = b.item_no 
```

# python - python byRef // 复制

> ID：11690220
> 
> 赞同：6
> 
> 时间：2012-07-27T14:48:46.293
> 
> 标签：python

我是 Python 新手（而且对编程不太了解），但我记得读过 Python 通常不会复制值，因此任何语句 a = b 都会使 b 指向 a。如果我跑

```
a = 1
b = a
a = 2
print(b) 
```

给出结果 1。那不应该是 2 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T14:52:23.333

不，结果应该是 1。

将赋值运算符 ( `=`) 视为对引用的赋值。

```
a = 1 #a references the integer object 1
b = a #b and a reference the same object
a = 2 #a now references a new object (2)
print b # prints 1 because you changed what a references, not b 
```

在处理*可变*对象（例如 和 等不可`lists`变*对象*）时`int`，这整个区别确实是最重要的。`float``tuple`

现在考虑以下代码：

```
a=[]  #a references a mutable object
b=a   #b references the same mutable object
b.append(1)  #change b a little bit
print a # [1] -- because a and b still reference the same object 
        #        which was changed via b. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:54:12.927

当您执行`b = a`时，它使 b 引用相同的值 a 引用。然后，当您执行时`a = 2`，它会引用一个新值。b 不受影响。

Python中的赋值规则：

1.  赋值只是使名称引用值。

2.  对名称的赋值永远不会影响引用旧值的其他名称。

3.  数据永远不会被隐式复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:58:30.697

@mgilson 有一个很好的[答案](https://stackoverflow.com/a/11690298/1403780)，但我发现它有点难以掌握。我提出这个答案是为了尝试以不同的方式解释它。

```
a = 1 # This makes a point to a location in memory where the Integer(1) is located
b = a # This makes b point to the same place.
a = 2 # This makes a point to a different location in memory where Integer(2) is located
print(b) # b still points to the place where Integer(1) was stored, so it prints out 1. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:56:32.050

只需进行一点小改动，您就可以看到您所期待的结果。这两个变量确实开始指向同一个对象，如果该对象是可变的，您可以同时看到两个位置的变化。

```
>>> a = [1]
>>> b = a
>>> a[0] = 2
>>> print b
[2] 
```

您对示例所做的更改`a`是使其不再引用 object`1`而是引用 object `2`。那左边`b`仍然指的是`1`.

# c++ - 在 VS2010 的 Add Property Wizard 中定义数组/向量属性类型

> ID：11690221
> 
> 赞同：0
> 
> 时间：2012-07-27T14:48:48.493
> 
> 标签：c++, visual-studio-2010

在我的 Visual Studio 解决方案中，在我的“.odl 文件”中，我想要一个向量/数组属性类型“样本”，并且样本的这个数组/向量将保存一个列表，以便跨平台访问它。为此，我必须单击正确的文件以在类视图中添加一个属性。

我正在尝试在 VS2010 的添加属性向导中添加数组/向量属性类型，但似乎没有此类与数组/向量相关的属性类型。我还尝试设置自己的属性类型vector，这给了我一个错误，“属性类型必须是列表中与变体兼容的类型。”

但是，我在列表中没有看到任何支持数组/向量的属性类型。有没有办法做到这一点？

# c# - 是否可以为 Windows 编译 NDesk.DBus 和 NDesk.DBus.GLib？

> ID：11690222
> 
> 赞同：0
> 
> 时间：2012-07-27T14:48:50.410
> 
> 标签：c#, mono, dbus

我使用cygwin编译它，我得到以下错误。

```
{"Unable to load DLL 'libc': The specified module could not be found. (Exception from HRESULT: 0x8007007E)"} 
```

当调用以下方法时。

```
[DllImport ("libc", SetLastError=true)]
protected static extern int socket (int domain, int type, int protocol); 
```

我的谷歌搜索没有发现任何有用的东西。c# 是否还有其他 Windows dbus 客户端/绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:37:48.623

DBus 是一种 Linux 技术，查看 NDesk.Dbus 代码，我可以看到它仅使用 unix 功能，也没有 Windows 实现。此外，据我所知，C# 实现在过去 2 年没有更新（但这并不意味着它不完整），而且据我所知，dbus 的 glib 包装器也只是 unix。

如果您如此热衷于在 Windows 上使用 Dbus，我想您将不得不自己编译它 - [http://www.freedesktop.org/wiki/Software/dbus#Windows_port](http://www.freedesktop.org/wiki/Software/dbus#Windows_port)并编译 glib dbus 绑定，然后编译 ndesk.dbus。油嘴滑舌。

编辑：还要检查这个错误报告，它有一些指向 Windows 构建和 dbus 库的指针：[http ://code.google.com/p/inkboardng/issues/detail?id=5](http://code.google.com/p/inkboardng/issues/detail?id=5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:52:00.017

尝试在您的项目中包含文件并将“复制到输出目录”设置为“始终复制”

# html - HTML -- 两个并排的表格

> ID：11690223
> 
> 赞同：48
> 
> 时间：2012-07-27T14:48:51.180
> 
> 标签：html, html-table

> **可能重复：**
> [试图让表格彼此水平相邻](https://stackoverflow.com/questions/8917235/trying-to-get-tables-next-to-each-other-horizontal)

我已经创建了两个 html 表。我怎样才能将它们并排放置而不是 1 在另一个之上？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-27T15:01:51.667

Depending on your content and space, you can use floats or inline display:

```
<table style="display: inline-block;">

<table style="float: left;"> 
```

Check it out here: [http://jsfiddle.net/SM769/](http://jsfiddle.net/SM769/)

**Documentation**

*   CSS `display` on MDN - [https://developer.mozilla.org/en/CSS:display](https://developer.mozilla.org/en/CSS:display)
*   CSS `float` on MDN - [https://developer.mozilla.org/en/CSS/float](https://developer.mozilla.org/en/CSS/float)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-27T14:57:09.933

You can place your tables in a div and add style to your table "float: left"

```
<div>
  <table style="float: left">
    <tr>
      <td>..</td>
    </tr>
  </table>
  <table style="float: left">
    <tr>
      <td>..</td>
    </tr>
  </table>
</div> 
```

or simply use css:

```
div>table {
  float: left
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T14:59:53.263

```
<div style="float: left;margin-right:10px">
  <table>
    <tr>
      <td>..</td>
    </tr>
  </table>
</div>
<div style="float: left">
  <table>
    <tr>
      <td>..</td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:54:34.657

# asp.net-mvc - 如何在 MVC3 中创建动态文本框并将其存储在 SQL 数据库中？

> ID：11690227
> 
> 赞同：0
> 
> 时间：2012-07-27T14:48:59.287
> 
> 标签：asp.net-mvc

我是新手，我阅读了 MVC Movie App 教程并基于该教程创建了一个地址簿，我正在使用 ADO.NET Entity DataModel 在数据库表中检索值，因为我不知道其他方式，我将以下值存储在我的表中- ID（主键自动）名称性别电话号码（这是我想添加多个电话号码的问题，我想在单击“添加”链接时添加文本框）

我不仅要在视图中添加文本框，还要将其存储在数据库表中，我该怎么做？记住我是新手保持简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:52:05.013

如果同一联系人需要多个电话号码。这是**一对多的**关系。这意味着您需要一个单独的表格来存储您的电话号码

我会创建一个名为`PhoneNumber`这样结构的新表

```
PHONE_NUMBER_ID (INT) PRIMARY KEY
PHONE_NUMBER (VARCHAR)
CONTACT_ID (INT) - Foreign key to the Contact table 
```

您的示例数据将如下所示

```
PHONE_NUMBER_ID     PHONE_NUMBER    CONTACT_ID
---------------     ------------     ----------
1                   734578956         1
2                   987546563         2
3                   987645643         2 
```

这意味着联系人 1 有一个电话号码，联系人 2 有 2 个电话号码。

现在您需要`Collection`在 Contact 类中使用一个属性来存储 PhoneNumbers

```
public class Contact
{
  public int ID { set;get;} 
  public string FirstName { set;get;}
  //Other contact related proerpties

  IList<string> PhoneNumbers { set;get;}

 public Contact()
 {
   if(PhoneNumbers==null)
       PhoneNumbers=new List<string>();
 }
} 
```

# jquery - jQuery UI 对话框在 tablesorter 寻呼机的第二页上不起作用

> ID：11690228
> 
> 赞同：0
> 
> 时间：2012-07-27T14:49:13.440
> 
> 标签：jquery, jquery-ui, pagination, jquery-ui-dialog, tablesorter

我通常会在我的问题中包含很多代码，但我不确定我应该在其中包含什么！

我在表格中有一个用户列表，我一次只显示 10 个用户，使用 tablesorter 寻呼机（分页）插件[http://tablesorter.com/docs/example-pager.html](http://tablesorter.com/docs/example-pager.html)

在每一行中，每个用户都有一个删除按钮。当您单击删除按钮时，会弹出一个对话框“您要删除此用户等等等等...” [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

我遇到的问题是，当我转到表格分页的第 2 页（或任何其他不是第一个页面）时，jQuery 对话框不会“触发”，您可以在没有对话框警告的情况下删除用户。

有没有人有串联使用这两个插件的经验，或者当我通过分页移动到新页面时，我需要调用某种函数来“刷新” UI 插件。

总而言之：tablesorter/pager 按预期工作，jQuery UI 对话框按预期工作，但 jQuery UI 对话框在分页器上不是 1 的页面上时不会加载。

希望这是有道理的，如果有任何人需要帮助我解决这个问题的任何其他信息/代码，请询问，我会添加。

**编辑**

这是调用对话框的脚本。

```
<script type="text/javascript">
    $('#dialog-confirm').hide();
        $('.delete-recip').bind('click',function(e){
            e.preventDefault();
            var targetUrl = $(this).attr("href");
        $( "#dialog-confirm" ).dialog({
                resizable: false,
                height:140,
                modal: true,
                buttons: {
                    "&{'recipientlist.DeleteUserButton'}": function() {
                        $( this ).dialog( "close" );
                        window.location.href = targetUrl;
                    },
                    &{'recipientlist.DeleteUserCancel'}: function() {
                        $( this ).dialog( "close" );
                    }
                }
            });
    });

 });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:35:35.320

需要将函数委托给静态元素......分页元素是在 DOM 之后创建的，因此它们不会绑定任何事件。

使用 jQuery 1.7 的委托`.on()`->

```
 $(document).on('click', '.delete-recip', function(){ 
   // copy function code here
 }); 
```

# php - 用 PHP 解析这个 app_data 字符串格式的最佳方法？

> ID：11690237
> 
> 赞同：0
> 
> 时间：2012-07-27T14:49:36.483
> 
> 标签：php, facebook, string, parsing

给定一个具有这种格式的 facebook URL：

`....&app_data=eid~423423|pid~23982938|admin~1`

我想要一个数组：

`[ 'eid' => '423423', 'pid => '23982938', 'admin' => '1' ];`

这就是我的做法：

`$app_data = $signed_request['app_data']; parse_str(str_replace('~','=',str_replace('|','&',$app_data)), $app_data_params);`

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:52:00.613

试试explode()

```
$appData = explode("|", $signed_request['app_data']); 
```

这至少会给你

```
array(3) {
    [0] => "eid~4234234",
    [1] => "pid~23982398",
    [2] => "admin~1"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:12:38.810

```
$_GET['app_data']= "eid~423423|pid~23982938|admin~1";

$a = str_replace('~','=', $_GET['app_data']);
$b = str_replace("|","&", $a);
parse_str($b);

echo $eid;
echo $pid;
echo $admin; 
```

还有另一种方法。Gaaah，@Chris 打败了我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:21:35.113

您可以使用`preg_replace`来消除对 的两个调用`str_replace`，但我怀疑您会看到这样做的任何性能优势。你已经在做的方式没有错。

```
$str = 'eid~423423|pid~23982938|admin~1';
parse_str(
    preg_replace(
        array('/\~/','/\|/'), 
        array('=','&'), 
        $str
    ), 
    $app_data_params
);
print_r($app_data_params);
// Array ( [eid] => 423423 [pid] => 23982938 [admin] => 1 ) 
```

**文档**

*   `preg_replace`- [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)
*   `parse_str`- [http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T15:03:40.120

```
//  incoming GET string
$_GET['app_data']= "eid~423423|pid~23982938|admin~1";

$bits = explode("|", $_GET['app_data']);

foreach( $bits as $bit ){
$res = explode('~', $bit);
$result[$res[0]] = $res[1];
}

var_dump($result);
array
'eid' => string '423423' (length=6)
'pid' => string '23982938' (length=8)
'admin' => string '1' (length=1) 
```

不确定这是否更快。

# internet-explorer-9 - 左右浮动 s闯入即-为什么？

> ID：11690239
> 
> 赞同：0
> 
> 时间：2012-07-27T14:49:40.600
> 
> 标签：internet-explorer-9, css-float

我编造了这个 jsfiddle，它在除 ie 之外的所有浏览器中都能正确显示（在 ie9 上测试）：http: [//jsfiddle.net/uxaPM/1/](http://jsfiddle.net/uxaPM/1/)

如您所见，这个想法是将文本的第一部分浮动到左侧，将第二部分浮动到右侧，同时将每个 li 内的所有内容保持在一行。但是，`<li>`我的示例中的第三个中断，即第三个`<li>`被分成两行。我发现我可以通过向 each 添加一个 min-width 来修复它`<li>`，但我想知道为什么会发生这种情况，以及是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:00:21.983

我认为你应该为 ul 元素指定一个 % 的宽度。我已经尝试给它一个 80% 的宽度并且它有效，如果你没有定义任何元素的大小，我也会在 IE-9 中找出许多问题

# ruby-on-rails - Carrierwave 无法批量分配受保护的属性：使用 jquery-fileupload-rails 上传时的路径

> ID：11690240
> 
> 赞同：0
> 
> 时间：2012-07-27T14:49:44.050
> 
> 标签：ruby-on-rails, file-upload, carrierwave, fog

我正在尝试使用

*   jquery-fileupload-rails
*   载波
*   多雾路段

我找不到以下错误的原因

```
Started POST "/pictures" for 127.0.0.1 at 2012-07-27 15:19:37 +0100
Processing by PicturesController#create as JSON
  Parameters: {"utf8"=>"✓",
  authenticity_token"=>"NKek0e/kfVRUk4SVBjokO5rL446dKvHo9+7mKuH0HKs=", "picture"=>   
  {"path"=>#  <ActionDispatch::Http::UploadedFile:0x00000002d48fa8 
  @original_filename="IMG_0001.JPG", @content_type="image/jpeg", @headers="Content-
  Disposition: form-data; name=\"picture[path]\"; filename=\"IMG_0001.JPG\"\r\nContent-
  Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20120727-7807-1bcbfof>>}}
Completed 500 Internal Server Error in 1ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: 
path):
  app/controllers/pictures_controller.rb:9:in `new'
  app/controllers/pictures_controller.rb:9:in `create' 
```

模型、控制器和视图取自

[https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6)

该错误消息使我认为我需要使“路径”可访问，但是如何？请注意 jquery-file-upload 位正在工作（我有引导按钮，图片出现在屏幕上等，只有文件上传本身显然不起作用！）

为了完整起见，这是picture.rb：

```
class Picture < ActiveRecord::Base

  include Rails.application.routes.url_helpers
  attr_accessible :avatar
  mount_uploader :avatar, AvatarUploader

  def to_jq_upload
    {
      "name" => read_attribute(:avatar),
      "size" => avatar.size,
      "url" => avatar.url,
      "thumbnail_url" => avatar.thumb.url,
      "delete_url" => picture_path(:id => id),
      "delete_type" => "DELETE" 
    }
  end
end 
```

对应的控制器是

```
class PicturesController < ApplicationController  

  def index
    @pictures = Picture.all
    render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
  end

  def create
    @picture = Picture.new(params[:picture])
    @picture.save!
    if @picture.save
      respond_to do |format|
        format.html {  
          render :json => [@picture.to_jq_upload].to_json, 
          :content_type => 'text/html',
          :layout => false
        }
        format.json {  
          render :json => [@picture.to_jq_upload].to_json     
        }
      end
    else 
      render :json => [{:error => "custom_failure"}], :status => 304
    end
  end

  def destroy
    @picture = Picture.find(params[:id])
    @picture.destroy
    render :json => true
  end

end 
```

这是上传器类：

```
class AvatarUploader < CarrierWave::Uploader::Base

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:55:26.987

该错误是由以错误方式安装的上传程序引起的。可能有错字：

```
mount_uploader :avater, AvatarUploader 
```

它应该是

```
mount_uploader :avatar, AvatarUploader 
```

试试看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:40:14.370

我自己想出了解决方案：错误出现在视图中，而不是 :path 它应该显示为 :avatar，并且 :avatar 需要可访问。还可以在[https://github.com/apotry/jquery_fileupload_carrierwave_fog中找到还设置了 jQuery File Upload 选项的示例实现](https://github.com/apotry/jquery_fileupload_carrierwave_fog)

# c# - UDP绑定方法

> ID：11690242
> 
> 赞同：6
> 
> 时间：2012-07-27T14:49:49.317
> 
> 标签：c#, multithreading, udp

我正在尝试在两台计算机之间建立 UDP 通信链接。一台计算机正在运行客户端应用程序，另一台计算机正在运行服务器应用程序。客户端应用程序给出错误：

**在执行此操作之前，您必须调用 Bind 方法。**

下面是我为下面的客户端编写的代码，我已经评论了错误发生的位置：

```
 public delegate void ShowMessage(string message);
    UdpClient udpClient = new UdpClient();
    Int32 port = 11000;
    public ShowMessage myDelegate;
    Thread thread;

private void Form1_Load(object sender, EventArgs e)
    {
        thread = new Thread(new ThreadStart(ReceiveMessage));
        thread.IsBackground = true;
        thread.Start();
    }

    private void ReceiveMessage()
    {
        while (true)
        {
            IPEndPoint remoteIPEndPoint = new IPEndPoint(IPAddress.Any, port);

            //Error on this line
            byte[] content = udpClient.Receive(ref remoteIPEndPoint);

            if (content.Length > 0)
            {
                string message = Encoding.ASCII.GetString(content);

                this.Invoke(myDelegate, new object[] { message });
            }

        }

    } 
```

任何帮助将不胜感激。

来源-> [http://lamahashim.blogspot.com/2009/06/using-c-udpclient-send-and-receive.html](http://lamahashim.blogspot.com/2009/06/using-c-udpclient-send-and-receive.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T15:06:41.817

我相信你需要先调用`Bind`监听服务器：

```
udpServer.Client.Bind(new IPEndPoint(IPAddress.Any, 11000)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T15:47:31.190

您需要告诉 udpclient 监听哪个端口。您传递接收方法的 IPEndpoint 可以设置为您喜欢的任何内容，因为它会填充发送者的详细信息。它不会指示 udpclient 侦听端口 11000。实际上，您正在尝试侦听端口 0，它指示 udpclient 选择它自己的端口。

看看[http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.receive.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.receive.aspx)

您将看到使用要侦听的端口调用构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T09:22:02.993

我遇到了这个问题并试图用 解决`Bind`，但是这种方法有一个限制：

*   创建 后`udpClient`，您可以使用`Bind`来分配所需的`IPEndPoint`.
*   当您尝试再次`IPEndPoint`将相同的`udpClient`后缀分配给其他时出现问题：它会出错。我想它会发生在您作为示例编写的代码中（因为循环）。要解决这种情况，您必须关闭 udpClient `udpClient.Close()`并再次生成， `udpClient.new()`然后您可以再次使用该`Bind`方法并分配一个新的`IPEndPoint`.

原因是该`Bind`方法仅适用于`udpClient`具有`IPEndPoint=null`

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-10T19:01:29.213

好吧..我没有做很多搜索..但我使用了它并且它有效：

```
UdpClientv4.Client.Connect(ipEndPointv4); 
```

我使用 Connect 而不是 Bind。可能是 Connect 正在调用 Bind。

# jquery - 更改 jquery ui 组合框字体

> ID：11690247
> 
> 赞同：2
> 
> 时间：2012-07-27T14:50:05.903
> 
> 标签：jquery, html, css, jquery-ui

如何更改 jquery ui 组合框和下拉列表中的字体我的代码是：

```
.ui-autocomplete-input {
                margin: 0;
                padding: 0.3em;
                font-family:"Times New Roman", Times, serif;
            }
            .ui-autocomplete 
            {
                font-family:"Times New Roman", Times, serif;
                max-height: 200px;
                overflow-y: auto;
                /* prevent horizontal scrollbar */
                overflow-x: hidden;
                /* add padding to account for vertical scrollbar */
                z-index:1000;
            } 
```

但没有任何改变我不知道错误在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:54:15.487

尝试这个：

```
 .ui-menu .ui-menu-item {
     font-family:"Times New Roman", Times, serif;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:54:26.650

如果你想改变你的 jQuery UI 外观，你应该使用开发者提供的工具[——themeroller](http://jqueryui.com/themeroller/)。即使您找到了一种根据需要设置字体的方法，您也可能没有完全了解主题设置及其评估方式，这意味着有时您可能会得到正确的行为，而有时您不会。

话虽如此，如果您添加`!important`到 CSS 设置的末尾，它会覆盖其他样式：

```
font-family:"Times New Roman", Times, serif !important; 
```

但你可能不应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:52:17.227

它会被其他一些 CSS 覆盖。你可以使用[这个](http://jqueryui.com/themeroller/)来为你的 jQuery UI 设置主题。

# css - 流体导航背景悬停

> ID：11690248
> 
> 赞同：0
> 
> 时间：2012-07-27T14:50:15.073
> 
> 标签：css, image, navigation, hover, fluid

我不太确定如何解释这一点，但基本上我想要导航栏的“流畅”背景图像。我将尝试在下图中解释它。

有谁知道如何做到这一点？我想使用所有导航选项的相同图像来减少页面加载时间。这是[我当前的页面](http://www.s-hosting.nl/creepypastaindex)（也是我不想在那里发生的一个例子**）**提前谢谢！

![在此处输入图像描述](../Images/7affd648c047fa22faf5af88f34b0705.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:01:16.097

快速了解如何使用 CSS3 进行操作

[http://jsfiddle.net/Sn3p2/](http://jsfiddle.net/Sn3p2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:03:52.180

要使用背景图像做你想做的事情，你需要图像。一个作为 LI 元素的背景，一个作为 LI 内 A 标签的背景。

A 标签内的背景图像会相对较薄，并与 A 标签的右侧对齐。

希望有帮助。

# javascript - 元刷新重定向到顶部框架

> ID：11690253
> 
> 赞同：5
> 
> 时间：2012-07-27T14:50:25.057
> 
> 标签：javascript, html, redirect, refresh, meta-tags

我有以下代码：

```
<html>
<head>
<title>title of this stuff</title>
<script language="JavaScript"> 
  if (top != self) top.document.title = document.title;
</script>
<meta http-equiv="refresh" content="2;     URL=javascript:window.open('certainpage.html','_top');">
</head>
<body>
Body of this page
</body>
</html> 
```

这不起作用。我已经为此进行了谷歌搜索，并在任何地方得出了相同的结论：这应该可行。但事实并非如此。谁能帮我弄清楚为什么这个页面不是：1.只要我有javascript就可以刷新（是的，我的浏览器中启用了js）2.刷新到顶部框架中的新页面

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T14:45:07.107

Javascript 不能在这样的*刷新*元标记中工作。

无论如何，您都在使用 javascript，请保持简单，如下所示：

```
<script type="text/javascript">
    window.top.location = 'http://domain.tld/whatever/';
</script> 
```

但也有更好（因为更聪明）的方法来做到这一点。这不需要您对每个页面的 URL 进行硬编码。它检查页面是否在最顶层，如果不是，是否将页面的 URL 调用到*顶部*：

```
<script type="text/javascript">
    if(window.top.location != window.location) 
    {
        window.top.location.href = window.location.href; 
    }
</script> 
```

如果您希望完全避免使用 javascript（某些用户将禁用），还有一种更简单的方法可以做到这一点。将以下内容添加到您的*head*部分，该页面上的所有链接都将打开“最顶层”：

```
<base target="_top"> 
```

您所要做的就是选择这三个选项之一。所有这些都应该让你过得很好。

# ruby-on-rails - Rails：如何下载以前上传的文档？

> ID：11690257
> 
> 赞同：8
> 
> 时间：2012-07-27T14:50:30.720
> 
> 标签：ruby-on-rails, file, download, carrierwave

我需要我的用户在他们的个人资料上上传广告 pdf 和 txt 等文件。我使用 Carrierwave 做到了这一点，所以我有一个带有标题和 URL 的文档列表。

**但是我怎样才能让其他用户下载这些文件呢？我必须使用宝石还是因为我对 Rails 很陌生，所以我什至不知道本地的东西？**

谢谢

编辑：

社会.rb

```
class Society < ActiveRecord::Base
  ...
  has_many :documents, :dependent => :destroy
end 
```

文件.rb

```
class Document < ActiveRecord::Base
  belongs_to :society    
  mount_uploader :url, DocumentUploader    
end 
```

然后在我要下载文件的视图中：

```
 <% @society.documents.each do |doc| %>
    <%= link_to "Download it", doc.url %>    //url is the column name of the saved url
  <% end %> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T14:57:37.273

我不使用 Carrierwave，但我想它类似于 Paperclip。

因此你应该能够使用这样的东西

```
 link_to 'Download file', user.file.url 
```

这是假设您有一个来自具有“文件”载波属性的模型的用户实例化对象。将此替换为您的属性名称。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T14:55:10.350

You can use the [`send_file`](http://apidock.com/rails/ActionController/Streaming/send_file) method for this. Which could look like:

```
class MyController
  def download_file
    @model = MyModel.find(params[:id])
    send_file(@model.file.path,
          :filename => @model.file.name,
          :type => @model.file.content_type,
          :disposition => 'attachment',
          :url_based_filename => true)
  end
end 
```

Check the apidock link for more examples.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-25T11:15:08.340

或者你可以放置锚标签：

在您的控制器中：

```
@doc = "query to get the document name from your database"
@docpath = request.base_url+"/uploads/"+@doc 
```

在你看来：

```
<a href="@docpath" download>Download File</a>. 
```

# sql - 数据库中的有序树

> ID：11690260
> 
> 赞同：1
> 
> 时间：2012-07-27T14:50:37.917
> 
> 标签：sql, sql-server

我有一个需要存储在数据库中的文件夹结构。每个文件夹都有其父文件夹的名称、主键和外键。所以一个文件夹可以有子文件夹。

我遇到的问题是当用户想要向上或向下移动或添加新的子文件夹（添加子文件夹添加在树的末尾）并且我想记录子文件夹的顺序时。

如何在表格中记录用户订购？

因此，如果我在 A 下（按该顺序）有子文件夹 B、C 和 D，并且我将 D 向上移动，那么顺序是 B、D，然后是 C。您如何在数据库中反映这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:53:53.030

如果您正在寻找创建子层次结构，您可以应用带有整数的 order by 子句进行排序。例如

```
ID, ParentID, SortOrder, Name 
```

哪里`SortOrder`是 0 和 foldercount-1 之间的整数，然后只需应用

```
ORDER BY SortOrder ASC 
```

我还建议您在表中添加一个 Lineage 和 Depth 字段，这样您就可以轻松地更快地上下遍历树，而无需进行昂贵的查询。看看[这篇文章](http://www.sqlteam.com/article/more-trees-hierarchies-in-sql)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:56:20.547

有另一种方法可以将层次结构保存在一个表中，称为嵌套集。该模型允许通过交替树的价格更快地查询子节点或父节点。

考虑表

```
id    left    right    node

0     0       9        root node
1     1       4        left node
2     5       8        right node
3     2       3        left sub node 
```

.... ETC

为了得到节点 N 的所有父节点，我们需要找到 (left-i; right-i) 将包含集合 (letf-N; right-N) 的所有记录

为了获取节点 N 的所有子节点，您需要找到 (left-i; right-i) 包含在 (left-N; right-N) 中的所有记录

因此嵌套集模型允许在没有递归的情况下进行简单的分层查询。

这是关于嵌套集模型的[wiki](http://en.wikipedia.org/wiki/Nested_set_model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:00:28.217

也许您正在寻找的是[分层查询](http://blog.crowe.co.nz/archive/2007/09/06/Microsoft-SQL-Server-2005---CTE-Example-of-a-simple.aspx)。这使您能够自动对分层表进行深度优先查询，并在层次结构的任何级别上定义排序顺序（以便对每个文件夹进行排序，但在每个项目之后，您将在获得下一个项目之前获得其子项目该文件夹中的项目）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:58:02.907

你考虑过`HierarchyID`数据类型吗？

[http://msdn.microsoft.com/en-us/library/bb677290](http://msdn.microsoft.com/en-us/library/bb677290)

请参阅[http://msdn.microsoft.com/en-us/magazine/cc794278.aspx](http://msdn.microsoft.com/en-us/magazine/cc794278.aspx)

# vim - 在 Windows 上使用 Vim 打开 UCS-2le 文件

> ID：11690263
> 
> 赞同：4
> 
> 时间：2012-07-27T14:50:45.997
> 
> 标签：vim, encoding, ucs2

我在 WinXP 上使用 Vim 7.3。我在工作中使用由应用程序生成的 XML 文件，该应用程序使用 UCS-2le 编码编写它们。在 vim wiki 上阅读了几篇关于编码的文章后，我发现了以下建议，即在 vimrc 中设置我的文件编码：

```
set fileencodings=ucs-bom,utf-8 
```

有问题的文件以 FF EE 作为第一个字符（已确认使用 HxD 查看），但 Vim 无法正确打开它。我*可以*在我的 vimrc 中正确打开我的 UCS-2le 文件：

```
set fileencodings=ucs-2le, utf-8 
```

但是现在我的 UTF-8 文件一团糟！

任何建议如何进行？我通常在没有 MSwin 的情况下运行 Gvim（如果重要的话）。我使用的插件很少。我关于文件编码的实际 vimrc 设置是：

```
set encoding=utf-8
set fileencodings=ucs-bom,utf-8,ucs-2le,latin1 
```

第三个位置的 ucs-2le 条目似乎没有什么区别。据我了解，第一个条目（设置编码）是 Vim 在其缓冲区内部使用的编码，而第二个（设置文件编码）处理 vim 读取和写入文件时的文件编码。因此，在我看来，由于文件具有字节顺序标记，因此 ucs-bom 作为 setfileencodings 中的第一个条目应该捕获它。据我所知，vim 似乎无法识别该文件是每个字符 16 个字节。

注意：我可以/确实通过在打开 ucs-2le 文件时手动设置文件编码来解决问题：

```
edit ++enc=ucs2-le 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:01:57.710

解决了。我不确定我做了什么，但所提到的修复程序现在可以完美地读取和写入我的 UCS-2 文件 - 尽管由于未知原因没有立即（我刚刚重新启动 Vim 吗？）。我可以尝试扭转修复以查看哪个是关键更改，但这就是我所做的（另请参阅我在上面 7 月 27 日的评论）：

*   将 AutoFenc.vim 插件放在我的插件文件夹中（自动检测文件编码（[AutoFenc.vim](http://www.vim.org/scripts/script.php?script_id=2721)）。
*   将 iconv.dll 和新版本的 libintl.dll 添加到我的 vim73 文件夹 ( [Vim.org](http://www.vim.org/download.php#pc) )
*   编辑 vimrc 如下

vimrc 现在包含（最后一位只是通过在状态行中显示文件编码来更容易地查看文件编码发生了什么）：

```
"use utf-8 by default
set encoding=utf-8
set fileencodings=ucs-bom,utf-8,ucs-2le,latin1

"always show status line
set laststatus=2

"show encoding in status line http://vim.wikia.com/wiki/Show_fileencoding_and_bomb_in_the_status_line
if has("statusline")
 set statusline=%<%f\ %h%m%r%=%{\"[\".(&fenc==\"\"?&enc:&fenc).((exists(\"+bomb\")\ &&\ &bomb)?\",B\":\"\").\"]\ \"}%k\ %-14.(%l,%c%V%)\ %P
endif 
```

一切都很好。

# javascript - 使用 JQuery 从 href 属性字符串中提取值

> ID：11690267
> 
> 赞同：3
> 
> 时间：2012-07-27T14:51:14.717
> 
> 标签：javascript, jquery

我想使用 JQuery 从 href 属性字符串中提取值

```
$(this).attr("href") 
```

会给我

```
?sortdir=ASC&sort=Vendor_Name 
```

我需要的是这些值被解析成一个数组

```
myArray['sort']

myArray['sortdir'] 
```

有任何想法吗？谢谢！

顺便说一句，我在 SO 的其他地方看到以下类似的想法与查询字符串一起使用。我还不能根据我的需要调整它。

```
var urlParams = {};
    (function () {
        var match,
    pl = /\+/g,  // Regex for replacing addition symbol with a space
    search = /([^&=]+)=?([^&]*)/g,
    decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
    query = window.location.search.substring(1);

        while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);
    })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:06:24.237

尝试以下操作：

```
var href = $(this).attr("href")
href = href.replace('?', "").split('&');

var myArr = {};
$.each(href, function(i, v){
   var s = v.split('=');
   myArr[s[0]] = s[1];    
}); 
```

[演示](http://jsfiddle.net/sv75f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:05:20.503

你可以从这里使用 jQuery BBQ 的 deparam 函数：

[http://benalman.com/code/projects/jquery-bbq/examples/deparam/](http://benalman.com/code/projects/jquery-bbq/examples/deparam/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:07:13.150

尝试这个

```
function getURLParameter(name, string) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(string)||[,null])[1]
    );
}

var string = $(this).attr("href");

alert(getURLParameter("sort",string)); 
```

演示在这里[http://jsfiddle.net/jbHa6/](http://jsfiddle.net/jbHa6/) 您可以更改 var 字符串值并玩弄。

**编辑**

删除了第二个示例，因为该代码不是那么好并且没有达到目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:03:59.190

也许有更好的解决方案，但要快我应该做这样的事情

```
var url = $(this).attr("href");
url = url.replace("?sortdir=", "");
url = url.replace("sort=", "");
myArray['sort'] = url.split("&")[1]; // Or use a temporary tab for your split
myArray['sortdir'] = url.split("&")[0]; 
```

该解决方案取决于您的网址是否仍然像 ?sortdir=ASC&sort=Vendor_Name

# ios - 如何在 IOS 中添加新的自定义 UIViewController

> ID：11690272
> 
> 赞同：0
> 
> 时间：2012-07-27T14:51:28.287
> 
> 标签：ios, xcode, uiviewcontroller, addsubview

我是这个领域的新手

当我在 AppDelegate 中添加SubView 时出现问题

我有一个自定义控制器，如下所示：

```
@interface mainViewController : UIViewController <UITableViewDelegate> 
{
    UITabBarController *myTad;
    UITableView *myTable;
    aModel *myModel
    // ......
}
//Some methods and @property 
```

我想要的只是制作一个视图控制器，让其他控制器也连接到模型。这是做所有事情的地方

并在 AppDelegate 中以适当的方式添加。

```
[window addSubview: myController.view];
[window makeKeyAndVisible];
return YES 
```

但它只是没有工作？

**问题是 loadView，我在 mainViewController 中重写的方法没有做任何事情。它只是通过**

我没有错过什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:48:36.150

您需要将新的视图控制器推入堆栈，如下所示：

```
[self.navigationController pushViewController:myController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:53:29.487

使用 UINavigationController 来控制和“连接”您的视图。这将允许您正确推动它们并通过后退按钮导航回来。

# android - 有没有办法从中心偏移视图？

> ID：11690274
> 
> 赞同：25
> 
> 时间：2012-07-27T14:51:32.830
> 
> 标签：android, android-layout, android-view, center, android-relativelayout

我试图将我的按钮不完全定位在中心，但假设在屏幕高度的 2/5 秒内，我正在寻找属性不成功，所以我尝试了这种方法

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:padding="20dp" >

 <ImageButton
    android:id="@+id/flashlight_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_above="@+id/fakeView"
    android:background="@null"
    android:contentDescription="@string/flashlight_button_description"
    android:src="@drawable/freeml_bright" />

   <View
    android:id="@+id/fakeView"
    android:layout_width="10dp"
    android:layout_height="10dp"
    android:layout_centerInParent="true"
    android:background="#FFAABB" />

</RelativeLayout> 
```

但是，即使我在假视图上设置了边距，它也不起作用。

填充属性有效，但是因为它是一个大图像，如果我希望它从屏幕高度的 2/5 开始，它会覆盖屏幕的中心点，所以如果我使用填充属性它可以工作，但它会将它推离中心并且不允许它覆盖它。

虽然，我使用 来使它工作`LinearLayout`，我想避免这种情况，因为顶部和底部有更多的视图彼此相邻，所以它会导致使用线性布局的嵌套视图。不幸的是，我认为这是唯一的选择。

`height=0dp`它基本上使用了另一种线性布局，用and填充顶部和底部视图未使用的剩余空间，`weight=1`并将其重心设置为中心。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="20dp">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/application_logo_description"
        android:src="@drawable/mylight" />

     <ImageButton
        android:id="@+id/settings_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:background="@null"
        android:contentDescription="@string/settings_button_description"
        android:src="@drawable/settings_button" /> 
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/flashlight_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="@string/flashlight_button_description"
        android:src="@drawable/flashlight_button_selector" />

    <View
        android:id="@+id/fakeView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="60dp"
        android:background="#FFAABB" />
</LinearLayout>

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|center_horizontal"
    android:contentDescription="@string/powered_by_description"
    android:src="@drawable/powered_by" />

<ImageButton
    android:id="@+id/ad_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|center_horizontal"
    android:background="@null"
    android:contentDescription="@string/ad_button_description"
    android:src="@drawable/freeml" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-27T14:57:42.037

根据目标设备的屏幕大小，X dp 的填充可能会将其移动超过高度的五分之一。

您可能必须自己编写此动作的代码。但是，没有什么能阻止您这样做：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="@drawable/background"
 android:padding="20dp" >

<View
android:id="@+id/fakeView"
android:layout_width="10dp"
android:layout_height="10dp"
android:layout_centerInParent="true"
android:background="#FFAABB" />

<ImageButton
android:id="@+id/flashlight_button"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true"
android:layout_above="@+id/fakeView"
android:marginBottom="50dp"
android:background="@null"
android:contentDescription="@string/flashlight_button_description"
android:src="@drawable/freeml_bright" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T14:53:26.230

不要使用边距，使用填充（顶部），如下所示：

```
<View
android:id="@+id/fakeView"
android:layout_width="10dp"
android:layout_height="10dp"
android:layout_centerInParent="true"
android:paddingTop="80dp"
android:background="#FFAABB" /> 
```

这应该可以工作，虽然我没有测试过！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:55:09.413

try using attribute android:layout_toLeftOf="@+id/fakeView"

# c# - 处理这些 PDFSharp 表格限制的最佳方法是什么？

> ID：11690276
> 
> 赞同：4
> 
> 时间：2012-07-27T14:51:36.443
> 
> 标签：c#, pdf, pdfsharp, migradoc

我正在使用 PDFSharp 将表格导出为 PDF（使用常规 MigraDoc.DocumentObjectModel.Tables.Table 对象）。它工作得很好，除了我遇到了一些问题：

1.  如果表格中单个单元格的内容长于页面高度，则内容似乎被截断了。一个表本身可以跨越多个页面，但一行似乎只能是 1 页高，而且它似乎不会延伸到下一页。

是否有任何解决方法，或者这只是库中的一个错误？

2.  同样对于跨多页的表格，有没有办法让表格上的标题行显示在每页的顶部？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T17:08:22.830

关于第一个问题：
据记载，MigraDoc 不会在多个页面上破坏表行。这不是一个错误，这是一个限制。因此，由您来设计不会导致问题的表。
IIRC 在 PDFsharp 论坛上发布了一个 hack，它增加了页面高度来解决这个问题。如果您只需要 PDF 文件，这可能是一种解决方法。

编辑：我发帖时没有找到链接，但今天我再次尝试时找到了它：这是解决方法：http:
[//forum.pdfsharp.net/viewtopic.php?p=4311#p4311](http://forum.pdfsharp.net/viewtopic.php?p=4311#p4311)
我没有自己试试。

关于第二个问题：
标记为标题行的行将在每个新页面上重复。只需将这些行的 HeadingFormat 属性设置为 true。

# iphone - 肥皂信封的响应为 0

> ID：11690280
> 
> 赞同：1
> 
> 时间：2012-07-27T14:51:40.960
> 
> 标签：iphone, ipad, wsdl

```
2012-07-27 20:15:53.523 ProjectDemo[1697:40b] Done. received Bytes 0
2012-07-27 20:15:53.524 ProjectDemo[1697:40b] the xml Data is

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMessage length]];
[theRequest addValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue:@"ManageCase" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

我从肥皂信封得到的响应是 0。

任何人都可以建议我在什么情况下响应将为 0。

@提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:56:50.220

尝试使用 "text/xml; charset=utf-8" 作为您的 Content-Type 标头字段值。

还可以尝试将整个命名空间包含在 SOAPAction 标头中，例如“http://www.yournamespace.com/ManageCase”

这是一个 SOAP 1.1 Objective-C 代码示例：

```
NSString *soapAction = @"Login";
NSString *messageLength = [NSString stringWithFormat:@"%d", [message length]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:serverURL];
[request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request addValue:[NSString stringWithFormat:@"http://www.namespace.com/%@", soapAction] forHTTPHeaderField:@"SOAPAction"];
[request addValue:messageLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[message dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# java - 刷新从 xml 转换的 html 页面

> ID：11690281
> 
> 赞同：0
> 
> 时间：2012-07-27T14:51:49.393
> 
> 标签：java, javascript, html

我编写了一个 java 程序，使用 mytest.xslt 将 mytest.xml 转换为 mytest.html。可以说我已经更新了 mytest.xml。现在，我想在 mytest.html 页面上添加一个“刷新”链接。单击此“刷新”链接应调用 java 程序将更新的 mytest.xml 转换为 mytest.html。“刷新”链接还应该在浏览器中重新加载 html 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:01:04.347

在网络服务器上托管您的 HTML 并注册一个 servlet。在 servlet 中，您调用转换链。现在，每次您请求 HTML 时，实际的 XML 都会被处理和转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:07:56.270

通常这样做的方式是让 Java 程序将 HTML 写入文件，而不是将其写入标准输出。然后，当您通过 Web 服务器访问该 Java 程序时（如果您为 Java 正确设置了它），Web 服务器将运行您的 Java 程序并输出 Java 程序输出的任何内容。因此，当您的 Java 程序输出 HTML 时，Web 服务器将获取该 HTML 并输出它。然后，客户端的 Web 浏览器获取该 HTML 并显示它。

如果您进行了此设置，则可以非常轻松地将原始 XML（将被转换为 HTML）的链接添加到 Java 程序。因此，当用户单击链接时，它将联系 Web 服务器，该服务器将再次调用您的 Java 程序。

# php - “if”语句被忽略

> ID：11690283
> 
> 赞同：0
> 
> 时间：2012-07-27T14:51:54.610
> 
> 标签：php, if-statement

对此可能有一个非常简单的解决方法，但我对 php 很陌生，而且非常无知。我一直试图解决这个问题，但无济于事。这是代码：

```
echo $slot['slot_type'];
echo "<br><br>";
if ($slot['slot_type']='tree')          echo "This place is full of life, and can be used for hunting, gathering, logging, or other activities.";
if ($slot['slot_type']='town_hall')     echo "The town hall houses the governors, and is propriety of the King.";
if ($slot['slot_type']='farm1')     echo "Townspeople attempt to grow a selection of wild plants on these crops, hoping for a steady food supply.";
if ($slot['slot_type']='farm2')     echo "Farming is hard work, but a full storehouse of food is a great comfort."; 
```

第一行`echo $slot['slot_type'];`是我试图理解为什么我的“if”语句不起作用的尝试。但是，它会打印正确的字符串，在本例中为“tree”。

因此，在实践中，浏览器不会打印建议的文本字符串之一，而是打印所有四个字符串，就好像它完全忽略了我的 IF 语句一样。再次，很抱歉问了一个看起来如此愚蠢的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:53:02.497

你需要像这样使用它：

```
if ($slot['slot_type']=='tree') 
```

您正在将值插入`$slot['slot_type']`而不是进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:53:28.430

您在语句中使用了赋值运算符`=`, `if`。您应该使用比较运算符`==`.

详细说明这是如何工作的：该`if`语句将评估给定的条件以查看它是否匹配。使用您当前的赋值运算符，PHP 引擎将实际完成该命令（即，*将*值分配`tree`给您的`slot_type`），因为该命令成功完成，它返回 true。`if`然后执行该语句的其余部分。其余的`if`语句也会发生同样的情况（因为您正在将值重新分配给您的`slot_type`没有错误的语句），然后它也会执行其他分支。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:56:31.533

您需要将所有单曲更改`=`为`==`或其他一些逻辑检查。

您实际上所做的是`$slot['slot_type']`在您的条件右侧分配值，这些值将始终返回 true。

在这里阅读 php 手册[http://uk.php.net/manual/en/language.operators.php](http://uk.php.net/manual/en/language.operators.php)

顺便说一句，使用语句`if`创建结构可能会更好。`switch`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:56:06.873

我的看法：始终在选项卡中打开 php.net：

[http://uk3.php.net/manual/en/language.operators.assignment.php](http://uk3.php.net/manual/en/language.operators.assignment.php)

[http://uk3.php.net/manual/en/language.operators.comparison.php](http://uk3.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T14:59:23.677

将 = 更改为 == 。this: = 仅用于赋予变量值（赋值），而 this == 用于将其与某物进行比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T14:58:57.793

案例1：=（分配）

```
$var = 'hello'; 
```

案例2：==

类型杂耍后的平等

```
if(0 == "a") {
    print("hi");
} 
```

* 将打印 "hi" 因为字符串 "a" 实际上会被 PHP 转换为 0

案例3：===

身份测试（类型必须相同）

```
if(0 === "a"){
    print("hi");
} 
```

***不会**打印“hi”，因为这两个操作数显然不是同一类型。

在您的情况下，您希望案例 2 来测试是否相等，或者您可以使用案例 3。

# android - Android 的优雅、线程间、异步请求/响应实现？

> ID：11690291
> 
> 赞同：0
> 
> 时间：2012-07-27T14:52:07.383
> 
> 标签：android, multithreading, handler

正如标题所说，我正在寻找一种优雅的方式来实现 Android 中线程之间的通用异步请求/响应机制。

我需要能够：

*   使用不同类型的参数异步向另一个对象发送请求
*   通过将响应发布到发送者的队列，让该对象可选择地异步响应

假设我有扩展线程的管理器类型的对象。每个这样的 Manager 都有一个 Handler 和一个 Looper，这样它们就可以异步地将消息推送到彼此的队列中。

简单地说，在伪代码中，我会像这样实现它：

```
Manager extends Thread
{
    // loop forever, pulling a request from the queue and handling it
    listenToRequests()
    {
        Looper.prepare()
        m_handler = new Handler()
        {
            handleMessage(msg)
            {
                switch(msg.what)
                {
                    case REQUEST_TYPE_0:
                        handleRequestType0(msg.object, msg.args);
                        break;

                    case REQUEST_TYPE_1:
                        handleRequestType1(msg.object, msg.args);
                        break;

                    ...
                }
            }
        }
    } 
```

其他管理器实例需要分配一条消息，填充它并将其发送到目标管理器：

```
msg = targetManager.getHandler().obtainMessage();
    msg.what = REQUEST_TYPE_0;
    msg.object = this;
    msg.args = ...;

msg.sendToTarget(); 
```

然后目标管理器可以在发送者上获取Message()，填充响应消息并发送它。

上面代码的问题在于，虽然它确实满足了这两个要求，但对于每条消息都有很多烦人的样板代码需要实现：

*   在某些枚举中定义消息类型（例如 REQUEST_TYPE_N）
*   将大量参数放入消息中，以便对它们进行编组
*   添加一个 switch case 来调度消息并处理它

使用 Runnable 确实解决了打包参数和消除消息调度的问题（通过 switch/case）：

```
public void doRequest0(args)
{
    handler.post(new Runnable() 
    {
        @Override
        public void run() 
        {
            // do stuff with args...

            args.sender.request0Response(...);
        }
     });
} 
```

这样做的问题是，代替回调，我必须声明和实现响应接口。在每个这样的接口函数中，我都必须用 handler.post(new Runnable() ... 进行装饰，这似乎也是很多样板代码。

我还有其他选择吗？看起来我的要求很谦虚，但我的解决方案在语法上过于复杂。

# jquery - Knockout post JSON 表单数据 post null

> ID：11690292
> 
> 赞同：2
> 
> 时间：2012-07-27T14:52:08.380
> 
> 标签：jquery, ajax, json, knockout.js

我要拔头发了！！我已经阅读了所有示例、教程等，其他人使这看起来很简单，但我是 Knockout 的新手，无法让它工作。

我有一个用户配置文件表单，我想绑定来自 jquery ajax 请求的值。本质上，我希望能够从服务器中提取配置文件并将任何以前保存的数据加载到表单值中。我能够从 API 请求 JSON 并使用映射插件将值加载到表单中（我在数据库中预先填充了配置文件）。

```
$.getJSON("api/profile/" + "<?php echo $_SESSION['id']; ?>",function(json){

    var viewModel = ko.mapping.fromJS(json);     
    ko.applyBindings(viewModel);  

}); 
```

这工作正常。我遇到的问题是在发布方面。如果用户第一次填写表单并单击保存按钮，则所有值都以 JSON 形式回传到服务器 - 但是 - 如果您仅更改一个字段然后再次保存，则只有已更改的值会被发布并且所有其他值都发布为*null*

我正在使用的视图模型（我已经尝试过使用 ko.observalbe()，使用 "" 值等！）

```
viewModel ={} 
```

这是我的保存电话：

```
viewModel.save = function(){

              $.ajax({
                   url:"api/profile/" + "<?php echo $_SESSION['id']; ?>",
                   contentType: 'application/json',
                   data: ko.mapping.toJSON(viewModel),
                   type: "POST",
                   dataType: 'json',
                   success: function(data) {

                        alert("What's UP!");

                        alert(data)

                    },
                    error: function (data) { alert("error" + data); }
                    });
        } 
```

我知道这与保存中的“数据”行以及 Knockout 如何绑定到值有关，但对于我的生活，我无法弄清楚。任何帮助将不胜感激！

这是最终适用于那些搜索的最终代码：

```
<script type="text/javascript">

        var viewModel;

        function callback(data) {
            if (viewModel) {
                // model was initialized, update it
                ko.mapping.fromJS(data, viewModel); 
            } else {
                // or initialize and bind
                viewModel = ko.mapping.fromJS(data);
                ko.applyBindings(viewModel);
            }
        }

    save = function() {

             $.ajax({
                    url:"api/profile/" + "<?php echo $_SESSION['id']; ?>",
                    contentType: 'application/json',
                    data: ko.mapping.toJSON(viewModel),
                    type: "POST",
                    dataType: 'json',
                    success: function(data) {

                   alert( ko.mapping.toJSON(viewModel));    
                    },
                    error: function (data) { alert("error" + data); }
                    });
        }        

    $.ajax({
                url: "api/profile/" + "<?php echo $_SESSION['id']; ?>",
                contentType: 'application/json',
                type: "GET",
                dataType: 'json',
                success: function(data) {
                 callback(data);         

                }       
        });

  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:15:14.547

当我使用淘汰映射插件时，我总是创建变量（可以是全局的或在任何应用程序命名空间中）并且只初始化一次模型，所有其余的 ajax 请求只是更新模型，可能你错过了更新步骤。

这是下面的代码（当然是简化了javascript代码）：

```
var model; // it is undefined, I just need to have the way to find whether the model was initialized or not
function callback(data) {
    if (model) {
        // model was initialized, update it
        ko.mapping.fromJS(data, model); 
    } else {
        // or initialize and bind
        model = ko.mapping.fromJS(data);
        ko.applyBindings(model);
    }
}

// do ajax request and call callback(data) on success callback 
```

它是否帮助您解决了您的问题？

# facebook - facebook用户和朋友权限未显示在范围内

> ID：11690293
> 
> 赞同：-1
> 
> 时间：2012-07-27T14:52:13.763
> 
> 标签：facebook

我有一个简单的登录应用程序可以将 oAuth 用于 facebook。
我将需要访问有关用户的一些信息，因此我在
`User & Friend Permissions`

![在此处输入图像描述](../Images/8dc0c40e22e90d53a6a111615f21068a.png)

我等待服务器传播超过 24 小时，但是当我调试令牌时，我没有看到将这些权限添加到范围 ![在此处输入图像描述](../Images/c9a5a87d55be59a21414b1ab969e40f0.png)

**我通过以下方式抓住了令牌：**

```
<?php
require '../src/facebook.php';
$facebook = new Facebook(array( 
        'appId'  => '**************',
    'secret' => '**********************************'
));

// Get User ID
$user = $facebook->getUser();

$token = $facebook->getAccessToken();
echo $token;

if ($user) {
    try {
        $facebook->setFileUploadSupport(true);

        $album = $facebook->api('/me/albums ');
        print_r($album);

    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
}

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <title>php-sdk</title>
        <style>
            body { font-family: 'Lucida Grande', Verdana, Arial, sans-serif; }
            h1 a { text-decoration: none; color: #3b5998; }
            h1 a:hover { text-decoration: underline; }
        </style>
    </head>
    <body>
        <h1>php-sdk</h1>

        <?php if ($user): ?>
            <a href="<?php echo $logoutUrl; ?>">Logout</a>
        <?php else: ?>
            <div>
                Login using OAuth 2.0 handled by the PHP SDK:
                <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
            </div>
        <?php endif ?>

        <h3>PHP Session</h3>
        <pre><?php print_r($_SESSION); ?></pre>

        <?php if ($user): ?>
            <h3>You</h3>
            <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

            <h3>Your User Object (/me)</h3>
            <pre><?php print_r($user_profile); ?></pre>
        <?php else: ?>
            <strong><em>You are not Connected.</em></strong>
        <?php endif ?>

        <!--h3>Public profile of Naitik</h3>
        <img src="https://graph.facebook.com/naitik/picture"-->
        <?php //echo $naitik['name']; ?>
    </body>
</html> 
```

我错过了什么？
请提供任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:47:11.847

在用户安装后更改所需的权限使您需要请求新的权限。

所以你可以卸载重新安装，或者做一个JS来检查你的用户是否有必要的权限，如果没有，使用FB.ui询问

# php - drupal中的自定义cron任务

> ID：11690303
> 
> 赞同：1
> 
> 时间：2012-07-27T14:52:41.607
> 
> 标签：php, drupal, cron

我有用于 drupal 7 的模块，称为 Parser。但是这个模块没有使用 cron 的选项。而且由于我不擅长drupal模块编码，我想问是否有任何选项可以将我的任务从Parser手动添加到cron？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:37:17.007

您可能想了解 Drupal 挂钩的作用。

```
function hook_cron() {
  // Do something when cron runs.
} 
```

因此，如果您想编辑解析器模块，您将使用

```
function parser_cron() {
  // Add your code that should be run on every cron run.
} 
```

您可能还想查看规则，因为您可以通过这种方式获得所需的结果。如果不了解有关您正在尝试做什么的更多信息，就很难知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:01:26.247

在您的情况下，您必须实现钩子“cron”：

```
function parser_cron() {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:08:29.707

上面的帖子是正确的，您需要挂钩到模块中的 cron

这可能有助于进一步[http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7)

# python - 在 python psycopg2 的更新查询中定义参数

> ID：11690306
> 
> 赞同：0
> 
> 时间：2012-07-27T14:52:51.970
> 
> 标签：python, psycopg2

这是我的 python 代码，用于通过读取 csv 文件执行更新操作。我也试过[这个](http://speeves.erikin.com/2010/09/python-update-query-with-psycopg2.html)。它行不通。

```
for i  in cin:
    try:
        conn=psycopg2.connect("dbname=pharmaflare user=postgres")
        cursor=conn.cursor()
        cursor.execute("UPDATE pharmaflare_drug_interaction SET se_interaction ='%s' WHERE primary_drug ='%s' AND secondary_drug ='%s' AND side_effect ='%s'"%(i[3],i[0],i[1],i[2]))
        conn.commit()
        cursor.close()
        conn.close()
        #print "done",i[0],i[1],i[2],i[3]
    except Exception as e:
        cerr.writerow(i)
        ferr.flush()
        traceback.print_exc(file=sys.stdout)
        continue 
```

由于 QUOTE 的问题，我在这里面临语法错误等异常：无论单引号出现在哪里，都会出现此异常。

```
 Traceback (most recent call last):
  File "<ipython console>", line 5, in <module>
  ProgrammingError: syntax error at or near "S"
  LINE 1: ...secondary_drug ='NEUER' AND side_effect ='MENIERE'S DISEASE' 
```

是否有任何替代方法可用于定义查询语句而不会困扰 Quotes 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:31:06.493

有几种方法可以解决它。简单/破解的方法是使用[re.escape() 函数](http://ayaz.wordpress.com/2007/04/22/reescape-pythons-equivalent-of-phps-addslashes/)。该函数可以被认为是[PHP 的 addlashes() 函数](http://php.net/manual/en/function.addslashes.php)的等价物，尽管进行这种比较让我很痛苦。

话虽如此，我的阅读表明 psycopg2 利用了[PEP 249](http://www.python.org/dev/peps/pep-0249/)。如果这是真的，那么您应该能够传入参数化查询并让它[为您转义它们](https://stackoverflow.com/questions/1466741/parameterized-queries-with-psycopg2-python-db-api-and-postgresql)。

# asp.net-mvc - 创建 asp.net 成员表

> ID：11690309
> 
> 赞同：0
> 
> 时间：2012-07-27T14:53:04.850
> 
> 标签：asp.net-mvc, ef-code-first, asp.net-membership

我首先使用实体​​框架代码，因此请继续删除并重新创建数据库。我的 asp.net 成员表也不断消失——在构建服务器上尤其烦人。

到目前为止，我发现创建表的最佳方法涉及运行 aspnet_sql.exe 的构建后事件，但连接字符串需要进行硬编码，这使得登台发布环境变得困难。

有没有一种优雅的方法可以在代码中创建表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:45:19.470

看看[Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)。那么你就不需要使用aspnet_sql.exe了。

也使用迁移而不是删除和重新创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:05:57.883

为什么你经常删除和重新创建表？也许迁移可以为您解决这个问题。

# cruisecontrol.net - 如何获得 CCTray

> ID：11690310
> 
> 赞同：16
> 
> 时间：2012-07-27T14:53:06.803
> 
> 标签：cruisecontrol.net

我已经通过 CruiseControl.Net 1.8.0.0 在 windows 7 32 位平台上成功安装了 CruiseControl.Net 服务器。设置文件。但是这里没有 CCTray 。请让我知道如何获得 CCTray。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-30T07:27:40.097

从官方源下载（文件为 CruiseControl.NET-CCTray-1.8.0.0-Setup.exe）：
[http ://build.nauck-it.de/download/CruiseControl.NET-package/1.8.0.0/](http://build.nauck-it.de/download/CruiseControl.NET-package/1.8.0.0/)

您也可以从**您的**CC.NET 服务器获取它。
![在此处输入图像描述](../Images/fe3005853c673e0f19ad33cc81e96540.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T15:30:13.550

如果您访问 Web 仪表板，通常会有一个下载托盘的链接。通常在右上角。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T10:09:31.690

我在 CC.Net 1.5.x 上遇到了同样的问题 - 在没有 IIS 的情况下安装它，但没有找到 Web 仪表板（开始）。我想控制 CCNet 服务器。

我不确定 1.8 的 CCTray 应用程序是否只能从 SF 单独下载： [http ://en.sourceforge.jp/projects/sfnet_ccnet/releases/](http://en.sourceforge.jp/projects/sfnet_ccnet/releases/)

在我的情况下，1.5.7256.1，CCTray 的安装程序在那里，在：

```
Program Files(x86)/CruiseControl.Net/webdashboard/cctray 
```

您可以在主 CC.NET 安装后安装它。

# php - 如何将 $_FILE 和 $_POST 数据传递到表单中？

> ID：11690320
> 
> 赞同：2
> 
> 时间：2012-07-27T14:54:01.037
> 
> 标签：php, zend-framework2

到目前为止，这就是我所知道的将数据从帖子传递到表单的方式。

```
$form->setData( $this->getRequest()->getPost() ); 
```

我认为这可能有效

```
$form
    ->setData( $this->getRequest()->getPost() )
    ->setData( $this->getRequest()->getFiles() ); 
```

它没有。查看框架源代码，我确认它不应该。所以我正在考虑将文件数据合并到帖子数据中。这肯定不是理想的解决方案吗？这不像 getPost() 和 getFiles() 返回容易合并的数组，它们返回 Parameter 对象。

**请注意，这是 Zend Framework 2 特定的。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:58:31.197

您是否尝试过`getFileInfo`现在知道或注意您使用 Zend 的事实。通常以每个文件为基础`$_FILE`是一个基于正在上传的文件信息的数组。文件名、扩展名等。Zends`getFileInfo`以类似的方式输出这些信息。虽然好久没玩了，但是值得一看

示例概念（我知道更多关于多个文件上传的信息，但与一个很好的概念一起使用，以防万一你想在路上添加第二个或更多文件）

```
$uploads = new Zend_File_Transfer_Adapter_Http();
$files  = $uploads->getFileInfo();

foreach($files as $file => $fileInfo) {
    if ($uploads->isUploaded($file)) {
        if ($uploads->isValid($file)) {
            if ($uploads->receive($file)) {
                $info = $uploads->getFileInfo($file);
                $tmp  = $info[$file]['tmp_name'];
                $data = file_get_contents($tmp);
                // here $tmp is the location of the uploaded file on the server
                // var_dump($info); to see all the fields you can use
            }
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:05:11.513

在尝试使用 Zend 的文件传输适配器后，我在控制器中使用了一种解决方法。我认为表单类中的 setData() 应该将项目合并到数据中，而不是替换它们。（恕我直言）

```
protected function getPostedData()
{
    if ( is_null($this->postedData) )
    {
        $this->postedData = array_merge(
            (array) $this->getRequest()->getPost(),
            (array) $this->getRequest()->getFiles()
        );
    }
    return $this->postedData;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:48:56.293

我正在使用**array_merge**：

```
 $form    = $this->getForm('my_form');
    $request = $this->getRequest();

    if($request->isPost())
    {

        $file    = $this->params()->fromFiles('name_of_file');
        $form->setData(array_merge(
            $request->getPost()->toArray(),
            array('arquivo' => $file['name'])
        ));

        if ($form->isValid()) {
        // now i can validate the form field 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:44:26.613

我使用本文解释的变量变量[来](http://www.onlineaspect.com/2009/05/31/how-to-use-variable-variables-in-php/)创建变量，然后将它们作为每个表单条目的值进行回显。

例子：

```
// create array of GET/POST variables then convert each variable to a local variable
$fields = array_keys($_REQUEST);
foreach ($fields as $field) {
   $$field = $_REQUEST[$field];
} 
```

# c# - 如何让 CustomValidator（使用 JS）验证 OnBlur 或 OnChange

> ID：11690324
> 
> 赞同：1
> 
> 时间：2012-07-27T14:54:04.610
> 
> 标签：c#, javascript, asp.net, validation

我目前正在使用一个 CustomValidator，它使用 JavaScript 来验证其中一个/或文本框中是否有数字。当我满足验证错误时，消息在提交之前不会清除。我该如何解决这个问题，以便像我的其他开箱即用的验证器一样清除它？我正在使用带有 C# 的 ASP.NET。

```
 <script type="text/javascript">

               function testnumbers(source, args) {
                   var s1 = document.getElementById('<%=arubaBox.ClientID%>').value; var s2 = document.getElementById('<%=shipBox.ClientID%>').value;

                   if (s1 == "" && s2 == "")

                       args.IsValid = false;
                   else if (s1 == "" && s2 != "")

                       args.IsValid = true;
                   else if (s1 != "" && s2 == "")

                       args.IsValid = true;
                   else if (s1 != "" && s2 !== "") args.IsValid = true;

               }

        </script>

   <asp:TextBox ID="aBox" runat="server" MaxLength="7"></asp:TextBox>

  <asp:CustomValidator 
    ID="CustomValidator1" runat="server"                       ClientValidationFunction="testnumbers" 
    ErrorMessage="CustomValidator"
     ValidationGroup="Contact"
     Text=" Please provide A # or Shipping Account #" 
    CssClass="errormessage"
     Display="Dynamic" >
    </asp:CustomValidator>

 &nbsp<asp:RegularExpressionValidator
        id="RegularExpressionValidator1"
        runat="server"
        ErrorMessage="Field not valid!"
        ControlToValidate="aBox"
        ValidationExpression="[0-9a-zA-Z]{5,}"
        ValidationGroup="Contact"
         />&nbsp

 <asp:RegularExpressionValidator 
    ID="NumErrAru" 
    runat="server"
    ControlToValidate="aBox"
     CssClass="errormessage" 
     ErrorMessage=" Numbers Only"
     ValidationExpression="^[0-9]+$"
     ValidationGroup="Contact" 
    Display="Dynamic" 
    Text=" Numbers Only">
    </asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:08:14.377

您可以使用 Page_ClientValidate 方法和 Page_Validators 集合来控制页面验证：

```
function jsValidation(){
    Page_ClientValidate();
    $.each(Page_Validators, function(key, value) { 
        if( value.IsValid == false) {
            //- error in validation, locate failing input control 
            var oE = value.ControlToValidate; 
            //- you can for example set focus back to it, if needed
            oE.focus();
        }
    });
} 
```

当元素失去焦点时，使用[blur](http://docs.jquery.com/Events/blur#fn)事件调用您的函数：

```
$('#<%=element.ClientID%>').blur(function() {   jsValidation(); }); 
```

此实现使用 jQuery 并且尚未经过测试，但应该可以正常工作。如果需要，您还可以简单地删除 jQuery 交互并使用经典 js。

希望这可以帮助。

# python - 是否可以从python中的函数返回两个列表

> ID：11690333
> 
> 赞同：34
> 
> 时间：2012-07-27T14:54:34.563
> 
> 标签：python, python-2.7, iterable-unpacking

我是 python 编程的新手，需要您的以下帮助：

我想从 python 中的函数返回两个列表。我怎样才能做到这一点。以及如何在主程序中阅读它们。示例和插图将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-27T14:55:14.277

您可以返回一个列表元组，在调用函数时使用序列解包将它们分配给两个不同的名称：

```
def f():
    return [1, 2, 3], ["a", "b", "c"]

list1, list2 = f() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-27T15:20:02.150

您可以通过用逗号分隔值来返回任意数量的值：

```
def return_values():
    # your code
    return value1, value2 
```

您甚至可以将它们括在括号中，如下所示：

```
return (value1, value2) 
```

为了调用该函数，您可以使用以下替代方法之一：

```
value1, value2 = return_values() #in the case where you return 2 values

values= return_values() # in the case values will contain a tuple 
```

# google-analytics - 谷歌分析计数器？

> ID：11690335
> 
> 赞同：2
> 
> 时间：2012-07-27T14:54:42.363
> 
> 标签：google-analytics, counter

我已经阅读了很多可以使用 Google Analytics 计算的地方。我已经在我的网站上使用它来跟踪访问者。

我如何跟踪有多少人点击了一个特定的按钮并显示它在另一个页面上被点击的次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:50:49.770

您想要实现[事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)。至于在另一个页面上显示结果，Google 不支持在 Google Analytics 网站之外显示图表/图形。[但是您可以在Apps Gallery](http://www.google.com/analytics/apps/)上找到执行此操作的 3rd 方应用程序开发人员。我正是为此目的创建了[EmbeddedAnalytics 。](http://www.embeddedanalytics.com)我们还支持维度过滤，因此您可以创建一个图表来显示您的特定操作点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:19:16.700

[您可以在https://developers.google.com/analytics/devguides/reporting/core/v3/reference](https://developers.google.com/analytics/devguides/reporting/core/v3/reference)了解 Google Analytics API，甚至可以使用[http://ga-dev-tools.appspot.com](http://ga-dev-tools.appspot.com/explorer/)以交互方式试用它[/探索者/](http://ga-dev-tools.appspot.com/explorer/)

如果您使用 Drupal，您可以轻松安装[Google Analytics Counter](http://drupal.org/project/google_analytics_counter)模块，该模块将自动获取并显示由 Google Analytics 收集的综合浏览量。其他 CMS 当然也有类似的插件。

# asp.net - ASP.NET 会话可以记住对象吗？

> ID：11690337
> 
> 赞同：0
> 
> 时间：2012-07-27T14:54:55.103
> 
> 标签：asp.net, session, session-variables

我从一个例子开始我的问题。我认为它会更简单。

我想要做的是从我的 Android 设备发送 REQUEST_1 到等待 JSON 请求的 asp 页面，例如 {"Year":2012}。页面获取此 json 字符串，并将其保存到对象（示例 arraylist）。一分钟后，我将 REQUEST_2 发送到同一个 ASP 页面，其中包含数据：{"Command","WhatIsCurrentYear"}，然后我想得到响应：{"Year",2012}（仍应存储在数组列表中） .

有机会这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:02:50.557

Session 有一个属性 Session.TimeOut。会话在时间到期后到期。默认情况下，在 asp.net 会话超时时间为 20 分钟此外，如果用户关闭浏览器会话，如果它的模式是 InProc（Cookies 或没有 cookie）也会过期。在 InProc 会话提供程序中，IIS 可以随时回收应用程序池（不活动期间，达到某些 CPU/内存阈值，...）而不会发出警告，使该会话的内容无效。每次回发时都会初始化变量，因此如果之前您将数据保存在数组列表对象中，它就会丢失。要在回发期间保存数据，您可以使用 ViewState。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:09:37.220

我创建了一个用于访问会话的类

```
public static IPerson User
{
    get
    {
        if (HttpContext.Current.Session == null || HttpContext.Current.Session[UserConstant] == null)
            return new Student();
        return (IPerson)HttpContext.Current.Session[UserConstant];
    }
    set
    {
        HttpContext.Current.Session[UserConstant] = value;
    }
} 
```

您可以用您想要的任何对象替换 IPerson。

# javascript - 在不关闭硬件加速的情况下优化 CSS3 动画会使其在 GPU 上运行得更快吗？

> ID：11690344
> 
> 赞同：1
> 
> 时间：2012-07-27T14:55:16.057
> 
> 标签：javascript, css, webkit, css-transitions, css-animations

起初这听起来像是一个奇怪的问题 - 但请耐心等待。

我编写了一个基于 setTimeout 的基准测试（类似于[stats.js](https://github.com/mrdoob/stats.js/)）——其想法是比较动画在不同条件下的执行情况（例如添加不同的 CSS3 属性）。对于（简单）示例，我将制作带有旋转和框阴影动画的东西，然后在第二次运行中删除旋转，在第三次运行中删除框阴影。之后，我将有 3 个基准数字来比较每个动画的执行情况。

只要动画不是 GPU 加速的（出于显而易见的原因，即硬件加速将动画从页面的单进程结构中删除），这种方法就可以很好地工作。

但这也让我想到了百万美元的问题——如果我优化某些东西以在没有 GPU 加速的情况下运行得更好，这是否意味着相同的优化动画在 GPU 加速打开的情况下会运行得更好（更快或更少的内存使用）？还是适用不同的规则？

让我给你一个更简单的例子。CSS3 box-shadow 会影响几乎所有动画的性能。在更简单的情况下，您可以通过将 CSS3 box-shadow 替换为类似阴影的光栅化（PNG？）图像来提高性能。然而，使用 GPU 时，其好处对肉眼来说并不那么明显，因为两种动画的运行速度几乎一样快（因为再次 - 我无法跟踪使用 GPU 时的性能变化）。再说一遍 - GPU-on 和-off 是否适用相同的规则？

我最初的冲动是 - 一旦优化了某些东西 - 无论 GPU 开启还是关闭，它都会运行得更好。但是就像我在下面的评论中提到的那样（如果我理解错了请纠正我），但是硬件加速的元素被缓存为 GPU 上的预渲染光栅纹理。如果那是真的 - 如果我的阴影是 CSS3 框阴影或基于图像的 PNG 阴影，为什么会有任何不同？我的意思是这两个元素在 GPU 上都会变成光栅化纹理，对吧？所以我的优化对 GPU 没有任何意义？（除非内存使用再次出现某种差异......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:04:52.593

是的，一点没错。[在这里](http://www.html5rocks.com/en/tutorials/speed/html5/)查看一些关于 GPU 加速的作用和不影响的信息。但总体思路是，是的，它将保留您的大部分优化。现在，在相对意义上，给定的优化将在 GPU 卸载后对性能产生*多大*影响。这是一个很难回答的问题。

# android - xml解析android代码

> ID：11690345
> 
> 赞同：0
> 
> 时间：2012-07-27T14:55:22.607
> 
> 标签：android, xml, parsing

我正在为 Android 制作一个应用程序，我需要显示[此页面的 XML 文件：](http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=7009)在应用程序中显示`Compra="481.3" Venta="485"`但我不能`"DOLAR SPOT INTERBANCARIO" and Var_por="-0,53" Var_pes="-2,60" hora="10:35"`。请帮我写代码。

XML 图像![XML](../Images/f0f786dd1eb8d0513d572e2cffe4e638.png)

这是 ExampleHandler 代码

```
public class ExampleHandler extends DefaultHandler {

private boolean in_Root = false;
private boolean in_Registro = false;

private ParsedExampleDataSet myParsedExampleDataSet = new ParsedExampleDataSet();

public ParsedExampleDataSet getParsedData() {
    return this.myParsedExampleDataSet;
}

@Override
public void startDocument() throws SAXException {
    this.myParsedExampleDataSet = new ParsedExampleDataSet();
}

@Override
public void endDocument() throws SAXException {
}

@Override
public void startElement(String namespaceURI, String localName,
        String qName, Attributes atts) throws SAXException {
    if (localName.equals("Root")) {
        this.in_Root = true;
    }else if (localName.equals("Registro")) {
        this.in_Registro = true;
        // Extract an Attribute
        String attrValue = atts.getValue("Compra");
        Float compra = Float.parseFloat(attrValue);
        myParsedExampleDataSet.setExtractedCompra(compra);

        String attrValue2 = atts.getValue("Venta");
        Float venta = Float.parseFloat(attrValue2);
        myParsedExampleDataSet.setExtractedVenta(venta);

        **String attrValue3 = atts.getValue("Var_por");
        Float por = Float.parseFloat(attrValue3);
        myParsedExampleDataSet.setExtractedPor(por);**
        //its my wrong code for  Var_por    
    }
}

@Override
public void endElement(String namespaceURI, String localName, String qName)
        throws SAXException {
    if (localName.equals("Root")) {
        this.in_Root = false;
    }else if (localName.equals("Registro")) {

    }
}

/** Gets be called on the following structure: 
 * <tag>characters</tag> */
@Override
public void characters(char ch[], int start, int length) {
    if(this.in_Registro){
        //myParsedExampleDataSet.setExtractedStruct(new String(ch, start, length));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:59:32.943

您可以查看 SimpleXML 以获得类似的小东西。它在 Android 上运行良好。

[SimpleXML 解析器](http://simple.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:19:10.873

[我最近使用Jsoup](http://jsoup.org/)实现了这个问题的解决方案。下面概述的解决方案将从提供的 URL 获取数据并将其解析为字符串数组。

**设置**

.jar 文件可以在[这里](http://jsoup.org/download)找到。

有关如何将其包含在 Android 应用程序中的说明，请参见[此处](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)。

**执行**

使用的进口：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import java.io.IOException;
import java.util.ArrayList; 
```

功能代码：

```
public static ArrayList<String> parseDocument() 
{
    ArrayList<String> values = new ArrayList<String>();

    Document doc;
    try {
        doc = Jsoup.connect("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=7009").get(); // Timeout is in milliseconds
        Elements nodes = doc.select("Registro");

        values.add( nodes.attr("tipo") );
        values.add( nodes.attr("Compra") );
        values.add( nodes.attr("Venta") );
        values.add( nodes.attr("Var_por") );
        // etc

    } catch (IOException e) {
        e.printStackTrace();
    }
    return values;
} 
```

返回函数后，您需要做的就是从 ArrayList 中读取值。

# c# - 连续（美国）州检查

> ID：11690351
> 
> 赞同：4
> 
> 时间：2012-07-27T14:55:46.110
> 
> 标签：c#, .net, graph-theory

给定一个州列表，就像在美国州一样，我正在尝试编写一个算法来判断这些州是否是连续的。顺序无关紧要，可以重新访问状态。

例子：

*   `AZ, CA, OR, WA`是连续的
*   `AZ, CA, NM, UT`是连续的
*   `AZ, NM, OR, WA`不连续

假设：

1.  我有一组代表状态的字符串。
2.  我有一组状态连接。

    ```
    class StateConnection
    {
        public string OriginState { get; set; }
        public string ConnectingState { get; set; }
    } 
    ```

这个集合有两个方向的记录：

*   `OriginState = AZ, ConnectingState = CA`
*   `OriginState = CA, ConnectingState = AZ`

我尝试了什么？

**尝试 1：** 对于集合中的每个状态，检查列表中是否至少存在一个与另一个状态的 StateConnection。

**为什么它不起作用？** 这允许第三个示例，其中有两个单独的连续范围要通过。

**尝试 2：** 检查后从候选连接状态列表中删除状态。这将需要一个完整的路径来触及每个状态一次。

**为什么它不起作用？** 这不允许第二个示例，其中一个状态充当多个状态的中心。

我有一段时间没有解决任何图论问题，所以我有点生疏。

我不寻找最短路径或旅行推销员之类的东西。我不在乎走哪条路或使用了多少步。我只关心是否有差距。

我正在写这是 C#，但请随时用其他语言给出答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:02:41.977

看看图论中的[洪水填充](https://stackoverflow.com/questions/1348783/finding-all-disconnected-subgraphs-in-a-graph)。您可能希望“绘制”树中的每个连接节点，然后在最后检查您的任何状态是否保持未连接。无论您如何遍历图形来进行绘画（BFS 或 DFS），但这会突出显示间隙（或未连接的节点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:04:45.830

听起来最好的解决方案只是通过状态图进行广度优先搜索。类似于（以第一个列表为例）：

*   创建要检查的状态队列。一开始，它是空的。
*   选择列表中的一个状态，例如`CA`，将其添加到队列中。

然后循环如下：

*   从队列中取出一个状态。将其标记为已访问。
*   检查它的任何直接邻居（尚未访问过的）是否在列表中。如果是，请将它们添加到队列中。
*   例如，在 的情况下`CA`，我们在列表中找到了两个邻居：`OR`和`AZ`; 将它们添加到要检查的下一个状态队列中。稍后，在检查 时`OR`，我们会看到`WA`和`CA`是它的邻居并且在列表中；但`CA`已经被访问过，所以我们只会添加`WA`到要访问的状态列表中。

继续，直到没有更多的状态可以出队。如果到那时我们已经访问了初始列表中的所有状态，那么该列表是连续的。否则不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:04:48.773

创建相关状态子集的连接矩阵（一个`N*N`布尔矩阵，其中包含子集中每个状态的行和列，`m[i,j]==true`当且仅当状态`i`和`j`彼此相邻时）。

运行以下算法：

```
for (int k=0 ; k != N ; k++)
    for (int i=0 ; i != N ; i++)
        for (int j=0 ; j != N ; j++)
            m[i,j] |= (m[i,k] && m[k,j]); 
```

验证三个循环完成后的所有元素是否`m[i,j]`都设置为。`true`如果任何元素是`false`，则状态不连续。

如果你忘记了什么是“那个三环的东西”，那就是著名的[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)，用于寻找图的传递闭包。

# android - ListView 底部的“Glooming”效果层

> ID：11690357
> 
> 赞同：3
> 
> 时间：2012-07-27T14:56:03.020
> 
> 标签：android

目前，我有一个`Activity`,`ListView`在顶部和`LinearLayout`底部。

![在此处输入图像描述](../Images/550cd0d0342fef5b2b3059879ed49cf0.png)

当`ListView`滚动 my 中的一行并部分显示该行时，它看起来像这样。（`LinearLayout`是带有**价值**措辞的那个）

但是，我希望有以下效果。

![在此处输入图像描述](../Images/fdd1df0f0241d11ecdaa482a0c24c00e.png)

似乎`LinearLayout`在`ListView`. - 我敢肯定这不是错觉。:)

我怎样才能达到这样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:28:58.933

添加

```
android:requiresFadingEdge="vertical" 
```

on`ListView`会解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:02:27.573

我现在想到的一个想法是[创建一个](http://androidresearch.wordpress.com/2012/03/24/drawing-shapes-in-android/)具有透明渐变颜色的形状。`View`然后在上面创建一个`LinearLayout`并将Shape作为背景。

另一个想法是在上面放置一个透明图像，而不是形状`LinearLayout`。

# ruby-on-rails - 铁轨可以使用 100 年

> ID：11690362
> 
> 赞同：1
> 
> 时间：2012-07-27T14:56:09.990
> 
> 标签：ruby-on-rails, arrays, select

如何获得过去 100 年的动态数组？

```
 def years_options
    (100.years.ago.to_date..Date.today).map{ |year| year.strftime("%Y") }
 end 
```

返回大约 36000 个值，因为它返回`year`这两个日期之间的每一天。我怎样才能得到一系列年份？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:02:00.803

你为什么不简单地：

```
def years_options
    this_year = Date.today.year
    (this_year-100..this_year)
end 
```

# ios - iOS 虚拟键盘。删除上一个下一个按钮，保留 PhoneGap 应用顶部键盘中的完成按钮

> ID：11690371
> 
> 赞同：3
> 
> 时间：2012-07-27T14:56:34.677
> 
> 标签：ios, cordova, keyboard, customization

正如下一个链接所说，我已经从键盘上删除了黑条，但为了实际使用，我想只保留“完成”按钮可用的黑条。有人知道这在iOS中是否可行，或者只是从键盘上删除整个栏。

[如何从 Sencha Touch / Phonegap 应用程序的虚拟键盘中删除 Next 和 Prev 按钮](https://stackoverflow.com/questions/6073846/how-do-you-remove-the-next-and-prev-buttons-from-virtual-keyboard-in-sencha-touc)

比你。

# .net - .NET：将日期时间转换为十进制

> ID：11690372
> 
> 赞同：4
> 
> 时间：2012-07-27T14:56:35.277
> 
> 标签：.net, datetime, decimal

在 SQL Server(T-SQL) 中，您可以将 DateTime 变量转换为十进制值，如下所示：

```
CONVERT(DECIMAL(20,10),@mytime)
Sample Input: 2012-07-27 08:29:20.000
Sample Output: 41115.3537037037 
```

是否有任何等效的方法可以将 .NET（C# 或 VB）中的 DateTime 转换为相同类型的小数？

我想比较不同日子的时间。

计算

```
41115.3537037037 % 1 = .3537037037 
```

这将使我能够轻松地比较不同日期的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:59:19.153

看起来这是“自 1900 年 1 月 1 日以来的天数”。在这种情况下，您将使用：

```
DateTime epoch = new DateTime(1900, 1, 1);
TimeSpan difference = date - epoch;
double days = difference.TotalDays; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T21:27:27.577

我知道您指定要比较天数（获取小数部分），但由于标题是如何将 DateTime 转换为小数，以下是如何将整个数值合为一（整数和小数部分）。您可以执行以下操作（VB.NET），它将等效于 SQL Server：

```
Dim TimeZero As New DateTime(1900, 1, 1)
Dim MyTime As DateTime = DateTime.Parse("2012-07-27 08:29:20.000")
Dim DecResult As Decimal = DateDiff(DateInterval.Day, TimeZero, MyTime) + (MyTime.TimeOfDay.TotalSeconds / (24*3600)) 
```

# c - C中的优先级和联想

> ID：11690374
> 
> 赞同：0
> 
> 时间：2012-07-27T14:56:37.980
> 
> 标签：c

在代码段中，我看到了这种未压缩的形式：

```
while(p1>=str1)
 {
  *p2 = *p1;
  p1--;
  p2++;
} 
```

而压缩的形式看起来像这样：

```
 while(p1>=str1)
 {
   *p2++ = *p1--;
 } 
```

代码的作用就像以未压缩的形式清楚地显示，它首先复制指针的内容，然后递增 p2 并递减 p1，但是如果 ++ 优先级高于 C 中的赋值运算符，那怎么可能呢？我认为可能有一些 () 运算符来强制执行此操作，但在书中它是正确的。谁能解释一下？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:00:07.200

优先级只是影响代码的解析方式，即`++`引用的内容。这就是为什么：

```
*p2++ = *p1--; 
```

相当于：

```
(*(p2++)) = (*(p1--)); 
```

但是 的语义`++`是评估原始值，然后再增加值。`p1`因此赋值将使用and的旧值`p2`，然后在执行赋值后，将递增和递减它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:59:29.713

`p2++`表达式产生`p2`和 not的值`p2 + 1`。递增操作是在序列点完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:01:01.047

和`++`后缀`--`运算符在执行完它们所包含的语句后生效。优先级会影响标记的分组方式以及语句的语法树（我可能在这里使用了错误的词汇表）的生成方式。

基本上`*p2++ = *p1--;`相当于`*p2 = *p1; p2 += 1; p1 -= 1;`

不过，请注意后置和前缀运算符；我相信，做类似的事情`p2 = p1++ * p1--;`被认为是未定义的行为。

# javascript - 将侦听器添加到已创建的 GridPanel

> ID：11690379
> 
> 赞同：0
> 
> 时间：2012-07-27T14:57:00.217
> 
> 标签：javascript, extjs

我已经检查了 API，并且应该存在来自 GridPanel 的 addLister 方法，所以我尝试使用它：

```
function showCreatePatientCoincidencesWindow(matches, patientData, actuallyCreate) {
    var grid = new GridPanel('idGrid', '', null, 250);
        grid.addColumn(new GridColumn('idgridColumn0LC', 'Nombre', "cName"));
        grid.addColumn(new GridColumn('idgridColumn1LC',' Apellido1', "cSurname1"));
        grid.addColumn(new GridColumn('idgridColumn2LC', 'Apellido2', "cSurname2"));
        grid.addColumn(new GridColumn('idgridColumn3LC', 'Documento', "cDoc"));
        grid.addColumn(new GridColumn('idgridColumn4LC', 'Fecha Nacimiento', "cDate"));
        grid.addColumn(new GridColumn('idgridColumn5LC', 'Sexo', "cGender"));
        grid.addListener('show',showHandler,this);     
    var gridStore = new Ext.data.GroupingStore({
        root:'matches',
        reader: new Ext.data.JsonReader({
        .
        .
        .
        . 
```

之前的代码是我正在执行的代码，它显然会继续，但问题是我从 chrome 调试器中得到了这个错误：

> 未捕获的类型错误：对象#GridPanel 没有方法“addListener”

这怎么可能？我做错了什么？我的库是 3.4，我检查了 Ext JS 2.3、3.4 和 4.1 的 API，它们都有这个方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:31:13.183

您的 gridpanel 构造函数没有[按照 3.4 docs](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.GridPanel-method-constructor)正确格式化。

应该只有一个参数是一个配置*对象*（即带有配置键并包裹在 curlies 中`{}`）。

全名也是习惯性的`Ext.grid.GridPanel`vs `GridPanel`。如果您在 JS 中需要，我认为您可以解决这个`Ext.grid.GridPanel.js`问题，但我不知道您是否正在这样做。

我可能没有将您的参数正确映射到正确的配置，但这应该给您一个想法：

```
var grid = new Ext.grid.GridPanel({id: 'idGrid', title: '', data: null, width: 250}); 
```

您可能还想定义列并存储在构造函数中：

```
var grid = new Ext.grid.GridPanel({
    id: 'idGrid', 
    title: '', 
    data: null, 
    width: 250,
    columns: [{
        id: 'idgridColumn0LC',
        header: 'Nombre',
        field: 'cName'
    }, {
        id: 'idgridColumn1LC',
        header: 'Apellido1',
        field: 'cSurname1'
    }, {
        id: 'idgridColumn2LC',
        header: 'Apellido2',
        field: 'cSurname2'
    }, {
        id: 'idgridColumn3LC',
        header: 'Documento',
        field: 'cDoc'
    }, {
        id: 'idgridColumn4LC',
        header: 'Fecha Nacimiento',
        field: 'cDate'
    }, {
        id: 'idgridColumn5LC',
        header: 'Sexo',
        field: 'cGender'
    }],
    store: new Ext.data.GroupingStore({
        root:'matches',
        reader: new Ext.data.JsonReader({
            // reader configs
}); 
```

# trigger.io - 来自相机或画廊的图像上传 - 设置大小问题

> ID：11690385
> 
> 赞同：2
> 
> 时间：2012-07-27T14:57:31.953
> 
> 标签：trigger.io, parse-platform

我正在使用[文档](http://docs.trigger.io/en/v1.4/modules/file.html)`getImage`中描述的方法。我的代码看起来像这样：

```
var params = { width: 500, height: 500 };

if (isKindleFire()) {
   // Prevents major crash since there is no camera.
   params.source = "gallery";
}

forge.file.getImage(params, function(file) {
   // Upload file using Parse
}); 
```

在我的 iPhone 3G 上一切正常，图像已成功上传/发布到 Parse。我登录 Parse 以浏览数据（和图像）......但是在将图像下载到我的桌​​面后，尺寸为 750 宽和 1000 高。我错过了什么？我希望图像是 500x500 不？

trigger.io 如何调整图像大小？在记忆中？trigger.io 是否需要访问用户存储？（我没有启用权限，因为图像只是存储在默认图库中）。

**2012 年 8 月 10 日更新**

Android 4.x 似乎正在调整大小。但是 iOS 和 Android 2.x 没有调整大小。

# html - 回来时锚定

> ID：11690389
> 
> 赞同：0
> 
> 时间：2012-07-27T14:57:49.033
> 
> 标签：html, anchor, back

也许有人知道如何做这样的功能？

我需要每次人们回到我的页面时，他们都会在链接所在的地方得到准确的信息，而不是在页面的顶部（开始）。Facebook有这样的功能。

我知道有一个带有锚点的链接，但是如何通过按钮返回来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:00:50.970

尝试这个 ：`mysite.com/mylink.html#anchor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:23:02.527

尝试这个

功能是：

> 功能返回（网址）{
> 
> > > window.open(url,'_self');
> 
> }

你可以像这样使用它：

> <input type="button" onclick="GoBack('YourUrl#Anc')" value="Go Back" />

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:46:24.117

当用户单击链接时，您可以`[url of the page]`使用 javascript 创建一个名为 scrollpos 的 cookie。当页面再次加载时，您可以取回 cookie 并滚动到该位置。丑陋但做的工作..

# ios - 我的 iOS 应用使用 8000 赫兹采样率的音频单元返回失真的声音

> ID：11690395
> 
> 赞同：0
> 
> 时间：2012-07-27T14:58:24.003
> 
> 标签：ios, core-audio, audiounit, distortion, sample-rate

我真的需要帮助解决这个问题。我正在开发一个带有音频单元的 iOS 应用程序，录制的音频需要使用 alaw 格式以 8bit / 8000 赫兹的采样率。我如何从扬声器中听到失真的声音。

我在网上看到了这个示例：

[http://www.stefanpopp.de/2011/capture-iphone-microphone/comment-page-1/](http://www.stefanpopp.de/2011/capture-iphone-microphone/comment-page-1/)

在尝试调试我的应用程序时，我在他的应用程序中使用了我的 audioFormat，我得到了相同的失真声音。我猜我的设置不正确，或者我需要做其他事情才能使其正常工作。鉴于链接中的应用程序和下面的音频格式，谁能告诉我我做错了什么或遗漏了什么？我对这方面了解不多，谢谢。

音频格式：

```
AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate         = 8000;
    audioFormat.mFormatID           = kAudioFormatALaw;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 1;
    audioFormat.mBitsPerChannel     = 8;
    audioFormat.mBytesPerPacket     = 1;
    audioFormat.mBytesPerFrame      = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:24:53.100

终于可以正常播放了。我在这里发帖是为了帮助其他面临类似问题的人。

我面临的主要问题是模拟器和实际设备之间存在巨大差异。在设备上运行应用程序，音质更好，但它每隔一两秒就跳一次，我发现一个似乎可以解决这个问题的设置和一个更改缓冲区大小/持续时间的设置。（持续时间设置在模拟器上不起作用，我的一些问题需要它以一定的速度运行才能与其他东西同步，这导致声音失真）

```
status = AudioSessionInitialize(NULL, kCFRunLoopDefaultMode, NULL, audioUnit);
UInt32 audioCategory = kAudioSessionCategory_PlayAndRecord;
status = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory), &audioCategory);
[self hasError:status:__FILE__:__LINE__];

Float32 preferredBufferSize = 0.005805; // in seconds
status = AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration, sizeof(preferredBufferSize), &preferredBufferSize);
[self hasError:status:__FILE__:__LINE__];

status = AudioSessionSetActive(true); 
```

第一个音频会话属性是停止跳过使其播放更流畅的原因。第二个调整缓冲区持续时间，这是以秒为单位的回调被触发的频率，并将为您提供不同的缓冲区大小。它的最大努力意味着它将尽可能接近您提供的值，但它似乎有一个可用尺寸列表并选择最接近的。

请参阅我在我的问题中链接到的帖子，以获得一个非常好的教程/示例程序来开始使用这些东西。

# javascript - 监控特定的 js 事件以及作为自动化测试的一部分执行它们所需的时间？

> ID：11690396
> 
> 赞同：3
> 
> 时间：2012-07-27T14:58:30.177
> 
> 标签：javascript, performance, testing, selenium, automated-tests

我试图找到一种可靠的方法来测试 webapp 以获得某些性能指标。webapp 主要使用 Javascript 来执行其各种操作/请求等。

我想要做的是测量两个特定事件之间的时间，例如，在我登录到网站后，某物出现在用户面前所花费的时间——目前我可以使用 Selenium Webdriver 来近似这一点，如下所示：

```
WebElement element4 = driver.findElement(By.linkText("Login"));
element4.click();

long start = System.currentTimeMillis();
WebElement element5 = wait3.until(ExpectedConditions.visibilityOfElementLocated(By.linkText("New")));

long finish = System.currentTimeMillis();
long time = finish - start;
System.out.println("Time taken for New element to load: " + time + "ms"); 
```

或使用：

```
WebElement element6 = driver.findElement(By.linkText("New")); 
```

代替

```
wait3.until(ExpectedConditions.visibilityOfElementLocated(By.linkText("New"))); 
```

然而，这将给出的结果通常并不准确。我想知道是否有办法使用 Selenium 更准确地做到这一点，或者是否有另一种工具可以用来可靠地以可管理的格式获取这些数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T12:34:58.243

您需要多少准确度？总会有一个误差范围，您必须为您的场景定义可接受的范围。

在这种情况下，可能会有一些开销，例如由于 Selenium 本身（特别是如果您正在运行远程 WebDriver）。我会假设可能还有其他随机的外部因素影响它。

也就是说，您可以通过运行“校准”测试来提高准确性，这将帮助您确定您自己的测试环境/设置固有的误差范围。

您的校准可能如下所示：

1.  打开正在测试的页面
2.  等到一切都加载完毕
3.  测量`wait.until()`您知道已经存在的元素需要多长时间
4.  重复（3）多次以获得一些统计意义

最后你有一个测量列表。获取例如它的中值，您就会知道以后在运行实际测试时必须从测量的延迟中减去多少。或者，您可以简单地将误差范围和标准偏差作为附加信息添加到性能测试结果中。

请注意，在 Selenium 的情况下，您使用哪种方法在页面上查找元素也会有所不同（例如，通过 ID 查找可能比通过“linkText”查找更快），因此您可能需要增强上面的步骤 3 来测量所有不同元素查找机制的`wait.until()`错误。

# xml - 简单的 Clojure XML 编辑

> ID：11690398
> 
> 赞同：2
> 
> 时间：2012-07-27T14:58:32.257
> 
> 标签：xml, clojure, xml-generation

假设我有一个地图矢量

```
[{:username "kbee" :firstname "Kay" :lastname "Bee"},
 {:username "jcee" :firstname "Jay" :lastname "Cee"}] 
```

我想为每个地图生成 xml 文件，如下所示

```
 <user>
   <username>kbee</username>
   <firstname>Kay</firstname>
   <lastname>Bee</lastname>
  </user> 
```

我如何只使用 clojure 核心库来实现这一点。（我看了 enlive 和fleet 但它们对我来说似乎有点复杂。）

理想情况下，我想做以下事情

```
(map #(spit (str (:username %) ".xml") (gen-xml sometemplate %) map-of-users)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:34:51.897

你试过 clojure.xml/emit-element 吗？：

```
(use 'clojure.xml)
(def v [{:username "kbee" :firstname "Kay" :lastname "Bee"},
        {:username "jcee" :firstname "Jay" :lastname "Cee"}])

(defn to-xml [m] (doseq [[k v] m] 
                  (emit-element {:tag k :content [v]}) )) 
```

在 REPL 试用：

```
user> (to-xml (first v))
<username>kbee
</username>
<firstname>Kay
</firstname>
<lastname>Bee
</lastname>
nil 
```

然后，您所需要做的就是用用户标签包装 to-xml 中的内容。

# java - 意外的EOF；期待元素的关闭标签

> ID：11690402
> 
> 赞同：1
> 
> 时间：2012-07-27T14:58:41.803
> 
> 标签：java, tomcat, jboss, xml-parsing

我正在使用 stax 解析 xml 文件并将提取的数据写入数据库。它适用于小文件，但是当我解析一个大文件时，它会抛出这个异常。查看xml文件，根据给定的行列是gud。谁能告诉我，为什么会这样？

```
com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element <attribute>
at [row,col   {unknown-source}]: [787,1401]
at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:686)
at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2730)
at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1019)
at com.ctc.wstx.evt.WstxEventReader.nextEvent(WstxEventReader.java:196)

sun.reflect.GeneratedMethodAccessor3625.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at org.jboss.aop.joinpoint.MethodInvocation.invokeTarget(MethodInvocation.java:122)
 at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:111) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-19T12:58:39.670

我面临着同样的问题。wstx-asl.jar 和 stax2-api-3.1.1.jar 中的文件结构类似。因此，它不是从 stax2-api-3.1.1.jar 中提取，而是从 wstx-asl.jar 中错误地提取，因此发生了异常。从类路径中删除 wstx-asl.jar 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T05:46:44.187

问题不在库或代码中。请检查您的服务器和 wsdl 服务器之间的连接。如果你尝试 curl 。它可能会收到自定义的网络消息，该消息不能拆分您的代码。因此，请咨询您的网络团队和安全团队以允许此 URL。它会解决问题

# visual-studio-2010 - 在 VS2010 中可视化编辑 AXML 文件

> ID：11690403
> 
> 赞同：2
> 
> 时间：2012-07-27T14:58:44.910
> 
> 标签：visual-studio-2010, xamarin.android, xamarin

我的 VS2010 不允许我直观地编辑 AXML 文件。我想在 VS 中配置“打开方式...”功能来运行可视化编辑器。

通过右键单击解决方案中的文件，可以使用“打开方式”功能。

我的另一个 VS 安装具有此功能，所以我知道这是可能的。Xamarin 安装中一定有一些东西有时无法设置此功能。

有谁知道如何通过“打开方式...”选择对话框手动设置？

现在，我在 Mono Develop 和 VS 之间来回切换……真痛苦……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T09:35:14.243

情况并非如此，您应该只能从 Resources/Layout 文件夹中选择文件，并可以选择 Source/Design 视图。如果您无法做到这一点，只需像以前一样使用 Xamarin Studio，但也可以使用 DroidDraw 网站 www.droiddraw.org/ 来使用 GUI 来设计您的界面。

希望这会有所帮助，詹姆斯

# javascript - jquery在元素之间多次插入html

> ID：11690404
> 
> 赞同：0
> 
> 时间：2012-07-27T14:58:53.210
> 
> 标签：javascript, jquery, html, each

我的 html 中有多个 div，需要在 div 和 p 之间添加一个元素

```
<div class="ui-state-error ui-corner-all">
 <p><b>Reversed</b></p>
</div> 
```

我想要的是在两者之间添加跨度的html

```
<div class="ui-state-error ui-corner-all">
<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
 <p><b>Reversed</b></p>
</div> 
```

但是我尝试过的函数无法为每个类执行一次，如果有 13 个类，则该函数在 13 个类中的每一个上放置 13 个 s，无论我只是使用选择器还是 each()，insertBefore( )、之前()、之后()等

这是我尝试过但没有奏效的方法

```
 <script type="text/javascript">        
       $(function () {                 
html = '<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>';

           $('.ui-state-error').each(function(i){
                $('.ui-state-error').eq(i).before('p').append(html);
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:01:47.200

尝试这样做：

```
$(document).ready(function(){
    html = '<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>';
    $('.ui-state-error').prepend(html);
}); 
```

这是关于[prepend的文档](http://api.jquery.com/prepend/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:01:46.660

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/fXpBe/3/)**

```
 $(function () {                 
html = '<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;">your span</span>';

           $('.ui-state-error').each(function(i){
                $(this).prepend(html);           
            });

        });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:23:14.393

这可能对您有用：

`$(function(){ html = '<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>'; $(html).prependTo('.ui-state-error'); });`

我的回答与 PoulsQ 的类似。但不同的是 $.prepend() 仅适用于一个匹配的元素（我认为这是第一个匹配的元素），而 $.prependTo() 是前置所有匹配的元素。此规则也适用于 append() 和 appendTo()；before() 和 insertBefore(); 之后（）和插入之后（）；

希望这会有所帮助。

# javascript - Marionette.CompositeView 中的模板助手

> ID：11690406
> 
> 赞同：2
> 
> 时间：2012-07-27T14:58:58.897
> 
> 标签：javascript, backbone.js, marionette

我不知道为什么这段代码不起作用。
阅读[文档](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html)，应该调用
。`templateHelpers`

我的目标是将 传递`this.collection.length`给模板。

有什么提示吗？谢谢。

我正在使用 Backbone.Marionette v0.9.5

* * *

```
return Marionette.CompositeView.extend({
    className: 'user-board',

    template: usersTemplate,

    itemView: userItemView,

    initialize: function () {
        this.collection = new UseList();
        this.collection.fetch();
    },

    appendHtml: function (collectionView, itemView) {
        collectionView.$el.find('ul.users-list').append(itemView.el);
    },

    templateHelpers: function () {
        console.log(this.collection.length);
    },

    serializeData: function () {
        return {
            weekly: this.options.weekly,
            users_length: this.collection.length // here the length is zero
                                           // after the fetch the length is > 0
                                           // but in template remains 0
        };
    }
}); 
```

* * *

要解决我的问题，我必须执行以下操作...

```
 initialize: function () {
        _.bindAll(this, 'render');
        this.collection = new NewCollection();
        this.collection.fetch({
            success: this.render
        });
    } 
```

有没有更好的方法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:34:01.790

阅读[Marionette Documentation](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-12) `serializeData`方法，即 using `mixinTemplateHelpers`，仅在[此处](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-24)`Item View.render`的方法上调用，而在您当前的代码中，您根本不渲染

更新：这样每次集合收到新数据时，它都会更新您的视图新长度

```
initialize: function () {
    _.bindAll(this, 'render');
    this.collection = new NewCollection();
    this.collection.fetch();
    this.collection.bind('reset', this.render);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:09:13.007

这段代码只声明了一个视图。你能分享实例化视图并显示它的代码吗？`templateHelpers`将在**模板渲染时**被调用并将数据传递给模板。也就是说，您要么需要在隐式调用视图上的`render`方法的区域中显示视图，要么显式调用该`render`方法。

为了有用，`templateHelpers`应该返回一个对象。例如：

```
templateHelpers: function() {
    return {colLength: this.collection.length};
} 
```

要记住的一件重要事情：`fetch`触发异步完成的 AJAX 请求。如果您想在渲染视图之前等待`fetch`成功，那么您需要使用[Marionette.Async](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.async.md)。

* * *

***根据更新问题更新***

为避免`render`从视图调用`initialize`并且仅在外部调用时`render`进行调用，请将代码更改为：

```
return Marionette.CompositeView.extend({
    className: 'user-board',

    template: usersTemplate,

    itemView: userItemView,

    initialize: function () {
        this.collection = new UseList();
        var that = this;
        this.defer = $.Deferred();
        this.collection.fetch({
            success: that.defer.resolve,
            error: that.defer.resolve
        });
    },

    appendHtml: function (collectionView, itemView) {
        collectionView.$el.find('ul.users-list').append(itemView.el);
    },

    templateHelpers: function () {
        console.log(this.collection.length);
        // For greater flexibility and maintainability, don't override `serializeData`.
        return {
            weekly: this.options.weekly,
            users_length: this.collection.length
        };
    },

    render: function() {
        var that = this,
            args = arguments;
        $.when(this.defer).done(function() {
            Marionette.CompositeView.prototype.apply(that, args);
        });
    }
}); 
```

我正在解决`this.render`成功和错误，否则如果出现错误，视图将永远不会呈现（除非这是你想要的）。

请注意，如果您使用 Marionette.Async，那么您将返回`this.defer`视图`beforeRender`，而 Marionette.Async 将负责延迟渲染。

另请注意，一旦`this.defer`解决，未来的渲染将在调用时运行，因为没有什么可等待的，直到`this.defer`以编程方式重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T19:58:05.937

至少在 Marionette v1.0.3 中，我喜欢在调用 Region.show() 期间自动处理渲染的模式，所以我从具有集合的控制器对象调用它，然后在实例化时将其传递给视图显示视图。我什至不必将此逻辑放在获取成功回调中或显式绑定到“重置”事件，因为 Marionette 复合/集合视图已经知道在获取成功时（重新）呈现自身（调试器将显示你）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T21:06:39.387

在使用了详细的设置之后，您还可以使用比目前描述的更有用的模板助手。

**例如，**

如果您只是将 <%= functionName %> 放入模板中，在该模板中您试图让数字显示在前端页面上（因为您想要 .length 我看到了），木偶将简单地为您完成工作。

所以像这样：

```
--Template File--
<div id="followerCount"> <%= showCount %> </div>

--Helper Function in View--
templateHelpers: {
    showCount: function(){
                   return this.collection.length;
    } 
} 
```

希望这是有道理的，或者至少可以帮助其他人，他们可能正在寻找一种更简单的方法来将数据库返回的 json 集成到他们的模板中。

# c# - vb6 COM dll 无法加载 C# 程序集

> ID：11690408
> 
> 赞同：0
> 
> 时间：2012-07-27T14:59:00.447
> 
> 标签：c#, asp.net, com, vb6, assemblies

我有一个调用中间 C# dll 的 asp.net 应用程序，它将通过 COM 调用旧版 vb6 dll。在实际通话期间，我在 vb6 dll 的日志中发现错误：

“无法加载文件或程序集，'Generic_C#_DLL.DataAccess，Version=1.0.0.0，Culture=neutral，PublicKeyToken=f0​​c9890f55677d2'或其依赖项之一。系统找不到指定的文件”

为什么我的 vb6 COM dll 试图加载我的其他一些 C# dll？是因为调用 vb6 COM dll 的 dll 也引用了“Generic_C#_DLL.DataAccess”吗？

我***想***我通过引用'Interops.VB6dll'在调用COM的C# dll中正确引用了vb6 dll，并且我已经用regasm.exe正确注册了vb6 dll......所以到目前为止我有点不知道为什么会发生这种情况，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:15:24.300

我们需要查看代码才能最好地帮助解决这个问题。但是，请注意，这也表示“或其依赖项之一”，这可能表明存在另一个负载故障阻止了这个。

有一些非常有用的工具可以解决 DLL 加载问题：

*   [Fuslogvw.exe（程序集绑定日志查看器）](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)
*   [依赖行者 2.2](http://www.dependencywalker.com/)
*   [进程监视器 v3.03](http://technet.microsoft.com/en-us/sysinternals/bb896645)

# c++ - 运行时的策略模式？

> ID：11690410
> 
> 赞同：0
> 
> 时间：2012-07-27T14:59:04.970
> 
> 标签：c++, design-patterns

我有一个策略模式，例如想在游戏的主循环中运行它。问题是如果我不删除实例，就会出现内存泄漏，并且我还想在其他地方使用该实例。如何以策略模式处理内存分配/释放。

```
CompressionContext *ctx = new CompressionContext();
//we could assume context is already set by preferences
ctx->setCompressionStrategy(new ZipCompressionStrategy());    
//get a list of files
ctx->createArchive(fileList); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:14:18.963

使用 an[`std::shared_ptr<CompressionContextBase>`](http://en.cppreference.com/w/cpp/memory/shared_ptr)而不是 a `CompressionContextBase*`（即原始指针）。

* * *

编辑：这只是一个建议，根据您提供的信息，可能还有其他具有不同语义的智能指针实现，例如 eg `unique_ptr`，这*可能*更适合。正如@akappa 所建议的那样，您可能需要更多地阅读该主题，以做出更好的决定——同样，根据问题中的信息，您可能想要一个`shared_ptr`，但您可能会忽略其他考虑因素。

# jfreechart - jFreeChart LineChart 调整刻度

> ID：11690425
> 
> 赞同：1
> 
> 时间：2012-07-27T14:59:41.283
> 
> 标签：jfreechart, linechart

我确定答案就在这里，但我真的找不到。

我有一个包含很多条目的 LineChart（比如说 1000 个）。在图中，我可以很好地看到（并调整（参见 A））Y 轴。只是 X 轴让我发疯！对于 1000 个条目，图的底部没有编号。

A：有了这个，我可以很好地调整 Y 轴。final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis(); rangeAxis.setRange(0.00, 1.00); rangeAxis.setTickUnit(new NumberTickUnit(0.2)); rangeAxis.setVerticalTickLabels(false);

我想对 X 轴做同样的事情。

请帮帮我。非常感谢

* * *

-> 第一个答案的问题 | 具有 100 个数字和 50 间隔的域轴

![具有 100 个数字和 50 间隔的域轴](../Images/81b6a4e507c1f58c63af942535001bdb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:38:50.707

恐怕你得修改 JfreeChart 的代码，Opensource 很棒吗？

我的 BarChart 之前遇到过这个问题，我所做的是自定义 x 轴上的刻度，我只为 CategoryAxis.java 实现了这个。我希望这能给你一些启发。

请注意变量“tickInterval”，我将此属性添加到类中，例如您有1000个数字，如果将tickInterval设置为99，则只会显示0、100、200、300 ...。

对了，我的 freechart 版本是 1.0.5

```
public List refreshTicks(Graphics2D g2, 
                         AxisState state,
                         Rectangle2D dataArea,
                         RectangleEdge edge) {

    List ticks = new java.util.ArrayList();

    // sanity check for data area...
    if (dataArea.getHeight() <= 0.0 || dataArea.getWidth() < 0.0) {
        return ticks;
    }

    CategoryPlot plot = (CategoryPlot) getPlot();
    List categories = plot.getCategoriesForAxis(this);
    double max = 0.0;

    if (categories != null) {
        CategoryLabelPosition position 
                = this.categoryLabelPositions.getLabelPosition(edge);
        float r = this.maximumCategoryLabelWidthRatio;
        if (r <= 0.0) {
            r = position.getWidthRatio();   
        }

        float l = 0.0f;
        if (position.getWidthType() == CategoryLabelWidthType.CATEGORY) {
            l = (float) calculateCategorySize(categories.size(), dataArea, 
                    edge);  
        }
        else {
            if (RectangleEdge.isLeftOrRight(edge)) {
                l = (float) dataArea.getWidth();   
            }
            else {
                l = (float) dataArea.getHeight();   
            }
        }
        int categoryIndex = 0;
        Iterator iterator = categories.iterator();
        while (iterator.hasNext()) {
            Comparable category = (Comparable) iterator.next();
            if(categoryIndex>0 && tickInterval>0)
            {
                if((categoryIndex+1) % (tickInterval+1) > 0)
                {
                    category = "";
                }
            }

            TextBlock label = null;
            if(tickInterval> 0)
            {
                label = this.createSingleLabel(category, l * r, edge, g2);
            }
            else
            {
                label = createLabel(category, l * r, edge, g2);
            }
            if (edge == RectangleEdge.TOP || edge == RectangleEdge.BOTTOM) {
                max = Math.max(max, calculateTextBlockHeight(label, 
                        position, g2));
            }
            else if (edge == RectangleEdge.LEFT 
                    || edge == RectangleEdge.RIGHT) {
                max = Math.max(max, calculateTextBlockWidth(label, 
                        position, g2));
            }
            Tick tick = new CategoryTick(category, label, 
                    position.getLabelAnchor(), position.getRotationAnchor(), 
                    position.getAngle());
            ticks.add(tick);
            categoryIndex = categoryIndex + 1;
        }
    }
    state.setMax(max);
    return ticks;

} 
```

# java - Java：如何暂停 1 个类的运行？

> ID：11690428
> 
> 赞同：0
> 
> 时间：2012-07-27T14:59:47.200
> 
> 标签：java

当我使用时`Thread.sleep();`，它会暂停我的整个程序。有没有什么可以在不使用多线程的情况下暂停一个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:01:40.867

您不会暂停课程，而是暂停线程。在您暂停唯一线程的那一刻，您也暂停了整个应用程序。所以没有办法暂停你唯一的线程并期望应用程序继续运行。如果您希望您的应用程序做的不仅仅是等待，您将需要多个线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:01:54.300

我认为您在这里混淆了一些概念。类和对象不运行。线程运行，它们运行的​​是类和对象定义的指令（代码）。

所以不，你不能暂停一个类或对象，只能暂停一个线程。此外，如果您的应用程序是单线程的，那么您只有一个“主”线程，如果您暂停该线程，那么您的整个应用程序将暂停。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:01:39.823

您不能暂停“课程”本身。一个类只是一个“死”的容器。

您可以做的是暂停线程或任务。

通常，您会创建一个单独的线程来运行您想要暂停的任务，并在您喜欢时暂停它 - 因为它在单独的线程中运行，它不会挂起您的整个程序。

请参阅这个简单的示例，您可以运行该示例以更好地了解线程如何并行运行：

```
public static void main(String[] args) throws InterruptedException {
    Runnable lazyTask = new Runnable() {

        @Override
        public void run() {
            System.out.println("Lazy: I feel like sleeping for a second");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {}
            System.out.println("Lazy: I feel better now");
        }
    };

    new Thread(lazyTask).start();
    //Let's wait a bit until the lazy task goes to sleep
    Thread.sleep(100);
    //now you can do something that will not hang
    System.out.println("Main: I'm sleeping too, but only half a second");
    Thread.sleep(500);
    System.out.println("Main: And I can continue my job while that lazy task is still asleep");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:01:27.777

你不能。你有主线程。睡眠会暂停它。如果你想停止运行某些东西而不影响主线程，你需要从主线程分叉它，通过使用附加线程

# c# - 我在 gridview 上的复选框不会触发事件

> ID：11690430
> 
> 赞同：0
> 
> 时间：2012-07-27T14:59:54.607
> 
> 标签：c#, asp.net, events, gridview, checkbox

我使用此代码在其中创建了带有复选框的网格视图。

```
<asp:GridView ID="GridView1" runat="server" Width="366px" autogeneratecolumn="false">
        <Columns>
            <asp:TemplateField>
                <HeaderTemplate>
                    <asp:CheckBox ID="SelectAllCheckBox" runat="server" AutoPostBack="true" oncheckedchanged="SelectAllCheckBox_OnCheckedChanged" />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="EachCheckBox" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

我尝试选中/取消选中它。 [在此处输入链接描述](http://image.ohozaa.com/view2/wed9EBjiOdjLMAq0)

```
protected void SelectAllCheckBox_OnCheckedChanged(object sender, EventArgs e)
    {
        String test = "test";
        test = "newtest";
        GridView1.DataSource = null;
        GridView1.DataBind();
    } 
```

但它不会触发任何事件。 [在此处输入链接描述](http://image.ohozaa.com/view2/wed9EXhZ5UMnrzQe)

我正在尝试找到我的代码丢失的地方，并且到目前为止已经搜索过，但仍然找不到。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:13:22.063

您必须使用 OnItemCreated 或 OnItemDataBound 并将您的复选框与您的委托链接

```
 void Item_Created(Object sender, DataGridItemEventArgs e) 
   {

      CheckBox cbx = (CheckBox)e.Item.FindControl("SelectAllCheckBox");
      cbx.CheckedChanged += SelectAllCheckBox_OnCheckedChanged;

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:43:58.903

代码看起来不错，对我有用。

我怀疑您可能会在每次回发时绑定 GridView。

当您单击附加了事件的 CheckBox 时，它会导致页面刷新。如果您在 Page_Load 上绑定 CheckBox（或在每次访问服务器时发生的任何方法），它将在您每次单击 CheckBox 时绑定网格。在这种情况下，它永远不会触发您的事件。

如果是这样，请在绑定 GridView 之前尝试检查回发。

例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Gridview1.DataSource = myDataSource;
        GridView1.DataBind();
    }
} 
```

# version-control - 将 Mercurial 1.5 升级到 2.2

> ID：11690432
> 
> 赞同：1
> 
> 时间：2012-07-27T14:59:58.403
> 
> 标签：version-control, mercurial

我正在将我的服务器从 Mercurial 的旧版本 1.5 升级到最新版本。我想知道 Mercurial 的 2.2 版本是否可以稳定地同时供多个用户使用。升级时是否还有任何问题，例如我的自定义挂钩不起作用，或者 buildslave 对象不起作用？我之前没有在源代码控制服务器上进行过重大升级，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:39:03.953

Mercurial 以对兼容性非常严格而闻名。你检查过[升级说明](http://mercurial.selenic.com/wiki/UpgradeNotes)吗？它列出了版本之间的所有重大更改。对我来说最大的变化是`hgweb`在 1.6 中引入。

兼容性规则的最大例外是钩子。Mercurial 不保证任何事情，所以唯一的办法就是尝试。

还可以考虑分两个阶段进行更新。例如先到 1.9，再到 2.2。

# c# - 在默认浏览器中打开 YouTube 嵌入式播放器链接

> ID：11690435
> 
> 赞同：3
> 
> 时间：2012-07-27T15:00:11.087
> 
> 标签：c#, browser, embedded-flashplayer

我在 C# WebBrowser 控件中托管 YouTube Embedded Player。当我单击“在 YouTube 上观看”按钮时，IE 会打开。有什么方法可以在默认网络浏览器中打开链接，例如 Chrome？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:04:21.803

像这样的例子：

```
 private void browser_Navigating(object sender, WebBrowserNavigatingEventArgs e)
 {
 System.Diagnostics.Process.Start(e.Url.ToString());
 e.Cancel = true;
 } 
```

说明：更改导航处理程序以处理 URL 并触发诊断中的链接（这将在用户的默认浏览器中打开 URL）。

# c# - 比较服务器上的 WindowsIdentity.Current.Name

> ID：11690436
> 
> 赞同：2
> 
> 时间：2012-07-27T15:00:15.100
> 
> 标签：c#, .net, wcf, windows-identity

我目前正在审查一个带有 wcf 服务的系统和一个使用 Windows Auth 通过 tcp 连接到它的客户端应用程序。

在某些操作中，需要将用户名存储在对象属性上，将其发送到服务并将其与从客户端传递的凭据进行比较。然后对该对象进行进一步处理。

客户最近发现，这并不总是按预期工作。我研究了这个问题，发现在某些情况下，客户端和服务器端使用了不同的用户名（大小写的用法不同）。

我已经安装了一个解决方法（显然在 string.Equals 中使用了 IgnoreCase 选项）但是我对真正的修复很感兴趣。

在客户端它使用 WindowsIdentity.Current.Name 作为字符串，在服务端它使用 ServiceSecurityContext.Current.WindowsIdentity.Name 作为字符串。

进行这种比较的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:48:56.797

客户端和服务器是否在同一个域中？如果是这样，请存储并比较对象`User`上的属性`WindowsIdentity`而不是用户名。这是用户的安全标识符 (SID)，它是（简化）Windows 世界中唯一的数字用户 ID。

`SecurityIdentifier`您可以使用其`Value`属性存储对象的字符串表示形式：

```
string storedSid = WindowsIdentity.Current.User.Value; 
```

然后，您可以使用它重建 SecurityIdentifier，并在服务端进行比较：

```
SecurityIdentifier sid = new SecurityIdentifier(storedSid);
// SecurityIdentifer defines operator ==
bool equalUsers = sid == ServiceSecurityContext.Current.WindowsIdentity.User; 
```

# c# - 动态按钮 EventArgs 点击

> ID：11690439
> 
> 赞同：0
> 
> 时间：2012-07-27T15:00:22.853
> 
> 标签：c#, winforms, button

我有一个为列表中的每个项目创建一个按钮的方法。像这样的东西：

```
foreach (Product p in productsList)
{
    b = new Button();
    b.Name = p.Name;
    b.Tag = p.Name;
    b.Text = p.Name;
    b.Size = new Size(93, 23);
    b.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowOnly;
    b.AutoSize = true;
    b.Click += new System.EventHandler(this.b_Click);

    this.ProdutosFlowPanel.Controls.Add(b);
} 
```

现在，当用户单击其中一个按钮时，我想显示不同的视图。但是按钮具有相同的标识符，因此显示的视图始终是创建的最后一个按钮。我该如何解决我的问题？有任何想法吗？

谢谢你。

最好的问候，玛丽亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:07:43.877

您可以使用按钮标签：

```
b.Tag = p; 
```

在你的处理程序中：

```
Product p = ((Product)((Button)sender).Tag); 
```

然后根据原产品做逻辑。

编辑：将 DataContext (WPF) 更改为 Tag (WinForms)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:03:45.120

尝试使用此代码

```
protected void Submit_Click(object sender, EventArgs e)
    {
        var flag = ((Button)sender).Text;
        if (flag == "case 1")
        {
           ....
        }

        else if (flag == "case 1")
        {
           ....
        }
        ..... 
```

# java - Spring Security 和 AspectJ Neo4j 存储库自动装配

> ID：11690442
> 
> 赞同：1
> 
> 时间：2012-07-27T15:00:29.400
> 
> 标签：java, spring-security, aspectj, neo4j

我有一个应用程序，我们试图通过授权检查来保护我们的服务层，以确保授权用户具有执行更新的适当权限。我们的第一个简单规则是对象的所有者可以更新对象，因此安全检查将登录用户与对象的所有者进行比较。不幸的是，这不起作用，因为该对象存储在 Neo4j 图形数据库中，该数据库使用 AspectJ 生成存储库级别的对象。当我尝试构建使用@PreAuthorize 保护的服务层的应用程序时，我收到一条错误消息，指出在 AutoWire 链中它无法自动连接 Neo4j 存储库对象......这对我来说很有意义，因为被 AutoWired 的对象实际上是一个接口AspectJ 构建成一个对象供我们使用。

我尝试更新到 Spring-Security 3.1.0，我设置了 aspectj-autoproxy，我尝试将 type="aspectj" 属性添加到我的 global-method-security 定义中，但是编译器将“type”标记为无效属性并且我仍然遇到自动接线问题。

在对模型进行了更多审查之后，我有点担心这种方法注定会失败。各种控制器和其他业务逻辑单元直接调用服务层，我相信这最终会完全绕过 spring-security 代理对象。

有没有办法使用从 AspectJ 自动生成的 Neo4j 存储库对象作为 spring-security 检查中的数据存储库？

有没有办法使用 spring-security 保护服务层？还是直接调用服务层会完全绕过安全层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:56:53.123

用户1557993,

手册中有一节是关于这个的，你看过吗？

[http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#tutorial_security](http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#tutorial_security)

问候，

拉斯

# php - 长矛; 不是所有的 .Net 库都可用？

> ID：11690444
> 
> 赞同：0
> 
> 时间：2012-07-27T15:00:47.653
> 
> 标签：php, .net, phalanger

我无法访问某些 .NET 库。Phalanger 承诺能够利用所有 .NET 库；但是我似乎无法访问很多。例如，我不能这样做：

```
$table = new System\Data\DataTable; 
```

这是一个标准的 .NET 库。我不确定为什么会发生这种情况，因为他们的文档有点枯燥。知道这里发生了什么吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:22:17.747

解决这个问题的方法相当简单。Phalanger 将导入

```
 <add assembly="System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

根据文档。但是，如果您需要 .NET 中存在的任何额外库（假设它们已安装），您可以执行以下操作：

```
 <add assembly="System.Data"/> 
```

这将允许您基于 Phalanger 的应用程序进入库！确保将其添加到

```
 <classLibrary></classLibrary> 
```

堵塞！

# php - 回显“{FORUM_NAME}”并忽略“{}”

> ID：11690447
> 
> 赞同：0
> 
> 时间：2012-07-27T15:00:59.770
> 
> 标签：php, tags, phpbb

我正在寻找对我来说真的很难做的事情。我真的试图在网上搜索解决方案，但我似乎找不到任何解决方案。我也尝试这样做了几个小时。

* * *

我在做什么：为 PHPBB2 制作主题，安装了一个可以在主题中包含 PHP 的 MOD。问题是什么：当我在 php 中做 {} 标签时，它无法回显这些标签。假设我有一个为我创建表的函数，如下所示：

```
CreateMyTable(Name,Size,Color); 
```

我将这些字符串放入函数中：

```
CreateMyTable("{FORUM_NAME}",1000,red); 
```

标题保持空白，我实际上希望它回显 {FORUM_NAME}。我怎样才能做到这一点？

PS：我不能这样做

```
CreateMyTable(?>{FORUM_NAME}<?php , 1000, red); 
```

它不会起作用，因为`<? = <!-- PHP --> , ?> = <!-- ENDPHP -->`.

*   谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:12:25.393

如果您查看 PHPbb2 模板类，您会发现该模板只是使用 eval() 函数评估的 PHP 集。您可以在使用 eval() 解析 PHP 之前打印它的内容，然后使用模板提供的变量名称，例如 IE（这可能无法正常工作，具体取决于您的模板的设置方式）：

```
CreateMyTable(((isset($this->_tpldata['.'][0]['FORUM_NAME'])) ? $this->_tpldata['.'][0]['FORUM_NAME'] : '' ),1000,randomcolor()); 
```

请注意，为了与上述方式类似，您实际上必须将其插入到您的模板类中。

An much better solution is to avoid using the mod that allows PHP in templates and use JavaScript in the templates to create the function, then print a call to that JavaScript function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:05:08.730

这将起作用：

```
CreateMyTable(FORUM_NAME,1000,red); 
```

我还注意到`red`不带引号使用 - 这也是一个常数吗？如果它是一个变量，它需要`$`在它前面有一个。如果它是一个字符串，它应该在引号之间。

```
CreateMyTable(FORUM_NAME,1000,"red"); 
```

# c++ - 通知一个班级另一个班级的变化

> ID：11690450
> 
> 赞同：3
> 
> 时间：2012-07-27T15:01:03.647
> 
> 标签：c++, design-patterns

拥有类`Container`,`Item`和`Property`，每当项目中的属性发生变化时，都会通知容器。

容器是项目的所有者，需要信息来根据它们的属性正确管理它们。

我已经想到了2个选项：

1.  观察者模式。
2.  代理对象。

在我看来，观察者模式似乎对这项任务来说太重了。代理对象可以很好地工作，但是在这种情况下，我会违反 DRY 原则，因为我必须将调用从代理转发到实际对象。

要求是对用户隐藏详细信息。要求不需要调用某些`update_item()`函数或类似的函数，即把通知容器的责任交给用户，这可能会导致使用问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:06:05.237

在这种简单的情况下，我看不到使用`Observer`. 由于 an`Item`一次只能在一个容器中，因此我只需提供`Item`指向它所在容器的引用或指针即可。

当某些更改时`Property`，`Item`它能够`Container`通过该指针通知它

`Observer`如果您需要通知许多对象，模式很有用。

**编辑**

使用接口和极其简洁的设计来做每一件简单的事情也可能会伤害你。我认为这句话`zen of Python`很好地解释了我的意思：

```
Special cases aren't special enough to break the rules. //make Interfaces
Although practicality beats purity. //but not everywhere 
```

所以你应该在纯度和实用性之间取得平衡

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:09:15.967

您应该使用最容易理解和维护的模式，并且需要最少的专门组件的发明。在我工作的环境（objective-C）中，观察者模式非常简单。当您的通知要求发生变化时，它还提供了灵活性。

Andrew 的回答是事件更简单——对象之间的直接通信不需要代理的发明或通知处理的开销。但是，如果您将来需要它，它的灵活性较小。

我不确定“太重”是什么意思。也许你可以解释一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:11:31.450

正如之前提到的，观察者在这里非常过分，但解决方案非常简单。你只需要“冒泡”事件。

*   当一个属性发生变化时，它会通知它的父项。
*   当一个项目发生变化时（属性变化的副作用，或者对项目更不可或缺的东西），它会通知它的容器/父项）。
*   当通知容器时，您就完成了。如果容器可以嵌套，那么我猜它可以在必要时向其父容器引发事件。

# mysql - mysql select a different field is a field is null

> ID：11690456
> 
> 赞同：0
> 
> 时间：2012-07-27T15:01:10.663
> 
> 标签：mysql

我有一张员工桌

```
id  int(11) 
names   varchar(120)
family_names    varchar(100)
nickname    varchar(100) 
```

以及谁在工作的表格

```
 id    int(11)
  personid int(11)
  titleid    int(11)
  typeid    int(11)
  at_work   datetime
  status int(11) 
```

我的问题是我需要生成一份报告，在其中检查谁在工作并显示姓名、姓氏和头衔。由于人们是通过昵称来称呼的，我需要先检查昵称是否存在，所以我在这个网站上找到了这个例子

```
SELECT IF(LENGTH(nickname)>0, nickname, names) FROM staff_list 
```

我将获得昵称或名称，但这并不能解决我的请求，因为我需要搜索 mu who_is_at_work 表，然后让工作人员在工作并创建该列表。

是否可以在选择中进行选择以获取我需要的三个字段

昵称/姓名、姓氏、头衔

过了一会儿，我想出了如何去做。

我找到了解决方案，感谢发布。这就是我最终要做的。

```
SELECT p.id AS ID, 
   IF(LENGTH(p.nickname)>0, p.nickname, p.names) AS 'Names/Nickname',
   p.family_names AS 'Family name', 
   r.rank AS 'Rank'
   FROM atworklist AS who
   LEFT JOIN stafflist as p on p.id = who.personid   
   LEFT JOIN title AS r ON r.id = p.titleid
   where who.shipid= 2 and who.status in (2,3)
   ORDER BY r.sortorder 
```

对我来说就像一个魅力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:04:29.807

如果你想摆脱空值，你可以使用合并。

```
select coalesce(nickname, names) from staff_list 
```

[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

如果你想检查空字符串，你可以这样做：

```
 select case when nickname = '' then names else nickname end from staff_list 
```

# ruby-on-rails - Rails Carmen 从代码中获取国家名称和州名称

> ID：11690462
> 
> 赞同：4
> 
> 时间：2012-07-27T15:01:23.683
> 
> 标签：ruby-on-rails, carmen

我正在使用 Carmen gem 在 Rails 中呈现国家/地区选择。国家在数据库中存储为代码。如何从此代码中取回“全名”？

gem 'carmen-rails', '~> 1.0.0.beta3'

```
<%= f.country_select :country, prompt: 'Please select a country' %> 
```

我尝试了几个选项，到目前为止没有一个有效！例如：

```
Carmen::country_name(@profile.country) 
```

导致错误：

> Carmen:Module 的未定义方法“country_name”

第二次尝试：

在profiles_controller：

```
@profile = Profile.find(params[:id])
@country = Carmen::Country.named( @profile.country ) 
```

在配置文件索引视图中：

```
<%= @country.official_name %> 
```

这会导致错误：

> nil:NilClass 的未定义方法“official_name”

为什么我的应用程序失败？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T01:18:57.773

在 github 上查看 carmen 的测试规范：

[https://github.com/jim/carmen/blob/master/spec/carmen/country_spec.rb](https://github.com/jim/carmen/blob/master/spec/carmen/country_spec.rb)

```
@country = Carmen::Country.coded(@profile.country)

<%= @country.name %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-29T10:32:32.153

这是国名

```
@country = Carmen::Country.coded(@profile.country)

<%= @country.name %> 
```

对于州名

```
@subregions = @country.subregions
@state = @subregions.coded(@profile.state_code)
<%= @state.name %> 
```

希望这个答案是完整的。

# macos - 如何通过 Mac OSX 应用程序访问 SVN

> ID：11690468
> 
> 赞同：2
> 
> 时间：2012-07-27T15:01:36.600
> 
> 标签：macos, svn, asihttprequest, nstask

我想通过我为 Mac OS X 平台构建的新应用程序访问 SVN，使用本机可可库。我相信，我需要通过 NSTask 调用 SVN 命令行应用程序，以便在后台运行它。我这里有两个问题

1.  如何将凭据传递给 SVN？
2.  如何查看SVN运行状态？

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-23T17:04:47.133

您应该阅读[文档](http://svnbook.red-bean.com/en/1.8/svn.developer.html)并使用 Subversion 的 API 来构建您的应用程序。

# jquery - jQuery Isotope 添加自定义类并计算过滤项

> ID：11690469
> 
> 赞同：2
> 
> 时间：2012-07-27T15:01:37.107
> 
> 标签：jquery, count, jquery-isotope

如何将自定义类添加到此 jQuery Isotope 过滤并计算同位素中过滤的项目：

```
 $(function(){
var $container = $('#wrap-planspiel'),
      filters = {};

  $container.isotope({
        animationEngine : 'css',
        itemSelector : '.hexblock'
  });

  // filter buttons
  $('select').change(function(){
    var $this = $(this);

    // store filter value in object
    // i.e. filters.color = 'red'
    var group = $this.attr('data-filter-group');

    filters[ group ] = $this.find(':selected').attr('data-filter-value');
    // console.log( $this.find(':selected') )
    // convert object into array
    var isoFilters = [];
    for ( var prop in filters ) {
      isoFilters.push( filters[ prop ] )
    }
    console.log(filters);
    var selector = isoFilters.join('');
    $container.isotope({ filter: selector });
    return false;
  });

      $('.filter a').click(function() {
          var $this = $(this);
          if ( $this.hasClass('selected') ) {
        return;
      }

      var $optionSet = $this.parents('.option-set');
      // change selected class
      $optionSet.find('.selected').removeClass('selected');
      $this.addClass('selected');
          var group = $this.parent().data('filter-group');
          filters[ group ] = $this.data('filter-value');
          var isoFilters = [];
            for ( var prop in filters ) {
              isoFilters.push( filters[ prop ] )
            }
            console.log(filters);
            var selector = isoFilters.join('');
            $container.isotope({ filter: selector });
            return false;
      });      

}); 
```

有一个来自 desandro 的示例，但在重置所有过滤器后该类仍然存在：http: [//jsfiddle.net/desandro/3nY9V/](http://jsfiddle.net/desandro/3nY9V/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:14:33.707

您可以像这样简单地计算过滤后的项目[http://jsfiddle.net/3nY9V/1/](http://jsfiddle.net/3nY9V/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:06:42.320

好的，很抱歉理解这么慢，现在在 Chrome 的 devtools 中查看。所以：

1.  第一次加载您的页面（沙盒或小提琴）时，会显示所有 28 个同位素项目；例如，一个项目具有“produkt-element flutlicht w-100w warmwhite isotope-item”类，但没有元素具有“is-filtered”类，因为尚未进行过滤
2.  然后，例如在下拉菜单中选择*Flutlicht*
3.  现在，该项目还在之前的类中添加了“is-filtered”类
4.  然后，从下拉菜单中选择*Alle Leuchtenarten*
5.  现在，页面看起来像**1.**但该项目仍然具有“is-filtered”类

好吧，这并不奇怪，因为现在您总是**在**过滤器功能中，所以所有项目确实都被过滤了 - 但过滤了*Alle Leuchtenarten*和*Alle Lichtfarben*和*Alle Leistungen*，这就是为什么所有 28 个项目都显示**为好像**您的页面有第一次加载 :) 但是 - 为什么要担心呢？你明白我的意思吗？

发现另一个问题：当您执行上述操作时，有时在返回显示所有 28 个项目时，您的盒子中的项目之间会出现间隙。您需要在某处调用 reLayout，或者您必须依靠查看器来调整窗口大小以启动布局填充机制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-28T07:11:48.363

刚刚发现[同位素文档](http://isotope.metafizzy.co/events.html)中给出了这个确切的例子（计算可见项目） 。

```
$container.isotope( 'on', 'layoutComplete',
  function( isoInstance, laidOutItems ) {
    console.log( 'Isotope layout completed on ' +
      laidOutItems.length + ' items' );
  }
); 
```

# javascript - 延迟 javascript 以避免 API 限制

> ID：11690470
> 
> 赞同：1
> 
> 时间：2012-07-27T15:01:37.497
> 
> 标签：javascript, jquery, google-maps-api-3

我正在做一个应用程序，我必须对每个请求的几百个项目进行地理编码。所以非常天真我只是做了一个调用谷歌地图地理编码API的for循环。发生的情况是我的代码在很短的时间内对 API 进行了太多调用，因此在 5-10 次迭代后，地理编码 API 只会以`OVER_QUERY_LIMIT`限制回答。参考 Google API 参考，发生这种情况是因为：

> 网页在太短的时间内超过了请求限制。

我的循环目前是这样的：

```
for (var i = 0; i < dict.nodes.length; i++) {
    (function (i) {
        g.geocode({'address': dict.nodes[i].location}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                dict.nodes[i]["geocoded_location"] = results
            }
        })
    })(i);
} 
```

如何实现类似 sleep() 函数来随机延迟地理编码函数的调用以避免 API 限制。我实现了一个愚蠢的while循环，但它也让CPU哭了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:05:16.937

为什么不只使用一个简单的`setInterval`，将其设置为每 100 毫秒或其他什么？

```
var i = 0;

var setAPI = setInterval( function () { 

    if ( i < dict.nodes.length ) {
        g.geocode({'address': dict.nodes[i].location}, function (results, status) {
             if (status == google.maps.GeocoderStatus.OK) {
                dict.nodes[i]["geocoded_location"] = results
             }
        });
    }

    i++;

  }, 
100); //100ms delay 
```

现在您可以在任何时候：`clearInvterval(setAPI);`阻止它运行。

`Engineer`这与使用 setTimeout 并调用所指出的函数非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:10:52.950

你可以实现这样的东西，而不是`for`循环：

```
(function nextCall(i){
    if(i < dict.nodes.length){
        g.geocode({'address': dict.nodes[i].location}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                dict.nodes[i]["geocoded_location"] = results;
            }
        });
        setTimeout(function(){   nextCall(i+1)   },100);
    }
})(0); 
```

当然，如果`'100'`延迟超过限制，你可以增加它。

# javascript - 对使用`new`创建的数组上的`map`行为感到困惑

> ID：11690471
> 
> 赞同：17
> 
> 时间：2012-07-27T15:01:37.823
> 
> 标签：javascript, arrays, map, new-operator

我对`map`ping 创建的数组的结果感到困惑`new`：

```
function returnsFourteen() {
    return 14;
}

var a = new Array(4);
> [undefined x 4] in Chrome, [, , , ,] in Firefox
a.map(returnsFourteen);
> [undefined x 4] in Chrome, [, , , ,] in Firefox

var b = [undefined, undefined, undefined, undefined];
> [undefined, undefined, undefined, undefined]
b.map(returnsFourteen);
> [14, 14, 14, 14] 
```

我希望`a.map(returnsFourteen)`返回`[14, 14, 14, 14]`（与 相同`b.map(returnsFourteen)`，因为根据[数组上的 MDN 页面](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)：

> 如果传递给 Array 构造函数的唯一参数是 0 到 2**32-1（含）之间的整数，则使用该数量的元素创建一个新的 JavaScript 数组。

我解释这意味着`a`应该有 4 个元素。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T15:08:18.433

当您像这样创建数组时：

```
var arr1 = new Array( 4 ); 
```

你得到一个长度为 的数组`4`，但它*没有*元素。这就是为什么`map`不转换数组的原因 - 数组没有要转换的元素。

另一方面，如果你这样做：

```
var arr2 = [ undefined, undefined, undefined, undefined ]; 
```

你得到一个长度也为 的数组`4`，但它*确实*有 4 个元素。

请注意没有元素和拥有值为 的元素之间的区别`undefined`。不幸的是，属性访问器表达式在这两种情况下都将评估为该`undefined`值，因此：

```
arr1[0] // undefined
arr2[0] // undefined 
```

但是，有一种方法可以区分这两个数组：

```
'0' in arr1 // false
'0' in arr2 // true 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-27T15:08:09.447

```
var a = new Array(4); 
```

这定义了一个显式长度为 4 但没有元素的新数组对象。

```
var b = [undefined, undefined, undefined, undefined]; 
```

这定义了一个隐含长度为 4 的新数组对象，其中包含 4 个元素，每个元素的值为`undefined`。

从[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)：

> 回调仅针对已分配值的数组索引调用；对于已被删除或从未被赋值的索引，它不会被调用。

对于 array `a`，没有元素被赋值，所以它什么也不做。

对于 array `b`，有四个元素被赋值（是的，`undefined`是一个值），所以它将所有四个元素映射到 number `14`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T15:16:06.223

`new Array(len)`创建一个空数组，并做一些不同于用`undefined`值填充它的事情：它将它的长度设置为`len`. 因此，它转换为以下代码：

```
var newArr = [];
newArr.length = len; 
```

让我们玩得开心`newArr`（假设`len = 4`）：

```
newArr.length; //4
newArr[1] === undefined; //true
newArr.hasOwnProperty(1); //false 
```

这是因为虽然 4 项长，但它不包含这 4 项中的任何一项。想象一个空的子弹夹：它有空间可以容纳 20 颗子弹，但它不包含任何子弹。它们甚至没有设置为 value `undefined`，它们只是......未定义（这有点令人困惑。）

现在，`Array.prototype.map`愉快地沿着你的第一个数组走，唧唧喳喳，每次看到一个数组项，它就会调用一个函数。但是，当它沿着空弹夹走时，它没有看到任何子弹。当然，子弹有空间，但这并不意味着它们存在。在这里，没有值，因为映射到该值的键不存在。

`undefined`对于用值填充的第二个数组，*值*是`undefined`，键也是。or里面有*东西*，但是没有定义；但不在乎，只要它有一个键，它就会对任何值进行操作。`b[1]``b[3]``Array.prototype.map`

如需进一步检查规范：

*   `new Array(len)`：[http ://es5.github.com/#x15.4.2.2](http://es5.github.com/#x15.4.2.2)
*   `Array.prototype.map`：[http](http://es5.github.com/#x15.4.4.19) : //es5.github.com/#x15.4.4.19（密切关注步骤8.b）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T15:16:44.927

关于`console.log`. 很简单，输出是*糖*，技术上是**错误**的。

让我们考虑这个例子：

```
var foo = new Array(4),
    bar = [undefined, undefined, undefined, undefined];

console.log( Object.getOwnPropertyNames(bar) );
console.log( Object.getOwnPropertyNames(foo) ); 
```

正如我们在结果中看到的，`.getOwnPropertyNames`函数返回

```
["length"] 
```

对于`foo`数组/对象，但是

```
["length", "0", "1", "2", "3"] 
```

对于`bar`数组/对象。

所以，只是在输出只有定义但没有实际属性分配的`console.log`输出时才会愚弄你。`Arrays``.length`

# scala - 如何将 List[List[Map[String,String]]] 转换为 List[Map[String,String]]

> ID：11690479
> 
> 赞同：1
> 
> 时间：2012-07-27T15:01:48.910
> 
> 标签：scala

我有一个类型的结果，`List[List[Map[String,String]]]`我想将其转换为`List[Map[String,String]]`. 我将如何在 Scala 中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T15:04:04.243

没有给定约束：

```
list.flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:05:46.443

这有助于我了解 flatten 的工作原理。

 [```
val a = List( List( Map( 11 -> 11 ), Map( 12 -> 12 ) ), List( Map( 21 -> 21 ), Map( 21 -> 21 ) ) )

def flatten(ls: List[Any]): List[Any] = ls flatMap {
    case ms: List[_] => flatten(ms)
    case e => List(e)
}

flatten( a ) 
```](http://scala.masgui.cloudbees.net/50141b2be4b0ee9926e62590) 

```
/** Converts this $coll of traversable collections into
   *  a $coll in which all element collections are concatenated.
   *
   *  @tparam B the type of the elements of each traversable collection. 
   *  @param asTraversable an implicit conversion which asserts that the element
   *          type of this $coll is a `Traversable`.
   *  @return a new $coll resulting from concatenating all element ${coll}s.
   *  @usecase def flatten[B]: $Coll[B]
   */
def flatten[B](implicit asTraversable: A => /*<:<!!!*/ TraversableOnce[B]): CC[B] = {
    val b = genericBuilder[B] // incrementally build
    for (xs <- sequential)    // iterator for your collection
      b ++= asTraversable(xs) // am i traversable ?
    b.result                  // done ... build me
} 
```

# java - 在java中快速加载部分图像

> ID：11690485
> 
> 赞同：1
> 
> 时间：2012-07-27T15:01:56.757
> 
> 标签：java, image, memory, tile

我目前正在为 2D、基于瓷砖的游戏制作地图编辑器。当我创建一个新地图时，tileset 被加载到内存中并显示在 JScrollPane 内的 JPanel 中，因此我可以选择我想要绘制的图块。

起初，我只是绘制完整的图像，但滚动速度很慢，所以现在我只绘制它的可见部分并且效果很好。我担心的是内存使用情况，因为图块集非常大。我没有收到任何 OutOfMemory 错误，但我想尽我所能优化一切。

我尝试将 ImageReader 与 ImageReadParam.setSourceRegion(); 一起使用 并且使用的内存要少得多，但是滚动会变慢，并且滚动时图像会像疯了一样闪烁-可能是因为从磁盘读取图像需要一些时间。

那么，有没有一种快速加载大图像的一部分而不完全加载它的好方法呢？或者也许有一种方法可以完全加载它但以压缩的方式？

# python - 超出递归深度 - Python 双链表

> ID：11690489
> 
> 赞同：1
> 
> 时间：2012-07-27T15:02:18.433
> 
> 标签：python, fifo, doubly-linked-list

我正在创建一个实现为双向链表的 FIFO，但我不知道为什么会收到递归错误。我已经发布了我的代码和我在下面收到的错误。任何帮助将非常感激！

```
"""DLList.py"""

class DLList(object):
    """A doubly-linked list

    attributes: nl = node list"""
    def __init__(self, nl=[]):
        self.nl = nl

    def __str__(self):
        return str(self.nl)

    def __len__(self):
        return len(self.nl)

    def append(self, node):
        if not isinstance(node, DLNode):
            raise TypeError
        try:
            node.pn = self.nl[-1]
            node.pn.nn = node
            self.nl.append(node)
        except:
            self.nl.append(node)

    def pop(self):
        rn = self.nl.pop(0)
        try:
            self.nl[0].pn = None
        except:
            pass
        return rn

class DLNode(object):
    """A node in a doubly-linked list.

    attributes: self.pn = previous node, self.data = data, self.nn = next node"""
    def __init__(self, data):
        self.pn = None
        self.data = data
        self.nn = None

    def __str__(self):
        return '[%s, %s, %s]' % (self.pn, self.data, self.nn)

a = DLNode(17)
b = DLNode(15)
c = DLNode(12)
d = DLNode(46)
e = DLNode(46)

ages = DLList()
ages.append(a)
ages.append(b)
ages.append(c)
ages.append(d)
ages.append(e)

print ages.pop() 
```

我收到了这个错误：

```
File "C:\python\swampy-2.0\DLList.py", line 43, in __str__
    return '[%s, %s, %s]' % (self.pn, self.data, self.nn)
RuntimeError: maximum recursion depth exceeded 
```

问题是，我从未打算使用递归，而且我无法弄清楚为什么我进入了递归循环。ages.pop() 旨在返回 DLNode 的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:09:56.827

当您打印节点时，您正在尝试打印 self.pn 和 self.nn。其中每一个都是对另一个节点的引用，当打印时将尝试打印其下一个节点和前一个节点，依此类推，直到无限。您要求打印一个无限的节点镜像大厅。

您无法跟踪已打印的内容，因此递归将永远持续下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:42:58.210

也许我建议`collections.deque`改用？[您可以在库](http://docs.python.org/py3k/library/collections.html#collections.deque)中阅读它的文档。除非您将实现编写为学术练习，否则`deque`可能会更好。

# mysql - 计算两个表之间的匹配

> ID：11690491
> 
> 赞同：0
> 
> 时间：2012-07-27T15:02:23.320
> 
> 标签：mysql, count, left-join

我有一张单词表和一张短语表。我想计算每个单词包含多少个短语。

这个查询给了我一个（单词，短语）对的列表；我如何得到计数？有没有更有效的方法来做到这一点？

选择 words.word、phrase.phrase

from words left join 词组

关于phrase.phrase rlike concat('(^|[^az])', words.word, '($|[^az])');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:12:14.683

使用您现有的查询，您可以添加一个`GROUP BY`子句和一个`COUNT`：

```
SELECT
    words.word,
    COUNT(phrases.phrase) as Count
FROM
    words
    LEFT JOIN phrases
        ON phrases.phrase RLIKE CONCAT('(^|[^a-z])', words.word, '($|[^a-z])')
GROUP BY
    words.word 
```

或者，您可以使用子查询而不是连接来实现此目的：

```
SELECT
    words.word,
    (SELECT COUNT(*)
        FROM phrases
        WHERE phrase RLIKE CONCAT('(^|[^a-z])', words.word, '($|[^a-z])')
    ) AS Count
FROM words 
```

# mysql - 编写多个 UPDATE 查询的更有效方法

> ID：11690494
> 
> 赞同：1
> 
> 时间：2012-07-27T15:02:35.900
> 
> 标签：mysql, sql, database, oracle

是否有更好/更有效/更短的方法来编写此 SQL 查询：

```
UPDATE mTable SET score = 0.2537 WHERE user = 'Xthane' AND groupId = 37;
UPDATE mTable SET score = 0.2349 WHERE user = 'Mike' AND groupId = 37;
UPDATE mTable SET score = 0.2761 WHERE user = 'Jack' AND groupId = 37;
UPDATE mTable SET score = 0.2655 WHERE user = 'Isotope' AND groupId = 37;
UPDATE mTable SET score = 0.3235 WHERE user = 'Caesar' AND groupId = 37; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T15:06:14.953

```
UPDATE mTable 
SET score = 
    case user
        when 'Xthane' then 0.2537
        when 'Mike' then 0.2349
        when 'Jack' then 0.2761
        when 'Isotope' then 0.2655
        when 'Caesar' then 0.3235
        else score
    end
where groupId = 37 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:07:06.397

您可以使用一个[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)语句来执行这种类型的`UPDATE`.

```
UPDATE mTable
SET score 
   = CASE user
        WHEN 'Xthane' THEN 0.2537
        WHEN 'Mike' THEN 0.2349
        WHEN 'Jack' THEN 0.2761
        WHEN 'Isotope' THEN 0.2655
        WHEN 'Caesar' THEN 0.3235
        ELSE score
     END
WHERE groupId = 37 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:30:19.417

您可以为要更新的所有记录创建一个临时表，插入分数、用户和 groupid，然后执行以下操作：

```
UPDATE
FROM mTable m
INNER JOIN tmpTable t
  ON m.groupId = t.groupId
  AND m.user = t.user
SET m.score = t.score; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:32:47.787

您的原始语句看起来很短，并且很容易理解，并且您可以确定每个单独的 UPDATE 语句中是否有任何行受到影响。

然而，对于大量语句，“往返”到数据库以执行每个单独的语句会产生大量开销。通过在单个语句执行中将更新“批处理”在一起，您可以获得更快的执行速度（更短的运行时间）。

因此，这取决于您要达到的目标。

更好的？取决于你如何定义它。（这些语句是否应该更易于理解、更易于调试、资源占用更少？

更高效？就减少经过的时间而言，是的，还有其他方法可以完成这些相同的更新，但这些陈述不像你的那样容易理解。

更短？就字符较少的 SQL 语句而言，是的，有一些方法可以实现。（其他答案中显示了一些示例，但请注意，其中一些答案中的陈述的效果与您的陈述明显不同。）

这些替代方案的实际性能实际上将取决于行数和可用索引。（例如，如果您有数十万行 groupId = 37，但只更新其中 5 行）。

# ms-access - 大量数据

> ID：11690495
> 
> 赞同：0
> 
> 时间：2012-07-27T15:02:38.497
> 
> 标签：ms-access, database-design, ms-access-2010

我使用 MS Access 2010 已经有一段时间了，而且大部分情况下一切正常。耶。但是，我有大量数据最终要绘制（x 轴 y 轴对），这些数据来自我用于工作的一件设备。我可以将这些数据作为单独的表导入，但我并不特别喜欢让我的数据库超载纯粹用于存储这些数据的单独表的想法。据我了解，每个表都应该代表一个适合数据库大上下文的实体。此外，对于我现在使用的设备，所有 x 轴数据都是多余的。问题是，划分数据以进行有效存储的最佳方法是什么？

注意事项：我一直遇到与我思考这个问题相同的问题。假设在任何一种情况下，我都制作了两个表，一个用于存储 x 轴数据，另一个用于存储 y 轴数据，然后在两者之间有一个链接表，允许多对多关系。

一方面，我可以为每个记录存储一个值（一列中的所有值）。但是，这两个表中的每一个都需要一个标签字段，从而破坏了拆分的目的。

另一方面，我可以为每个字段存储一个值（一个行中的所有值），在我的情况下，每个表中将产生超过 2000 个字段。

还有第三种选择，即我目前正在使用的选择，将每行一对存储在一个表中。但是，有很多冗余。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:42:17.380

你应该坚持你目前的方法。这是迄今为止最简单的检索和添加数据的方法。下面我对你的其他建议有我的反应。

> 假设在任何一种情况下，我都制作了两个表，一个用于存储 x 轴数据，另一个用于存储 y 轴数据，然后在两者之间有一个链接表，允许多对多关系。

如果 X 和 Y 不是整数，这可能会稍微改善硬盘空间。但是，这会使事情变得非常复杂，从而产生可疑的好处。

> 一方面，我可以为每个记录存储一个值（一列中的所有值）。但是，这两个表中的每一个都需要一个标签字段，从而破坏了拆分的目的。

这会使处理数据变得更加复杂，而且是个坏主意。您需要使用复杂的查询来获取同一行中的两个数据点。您可以这样做，但它会使输入和检索变得复杂。

> 另一方面，我可以为每个字段存储一个值（一个行中的所有值），在我的情况下，每个表中将产生超过 2000 个字段。

如果你这样做，你会后悔的。这将使以后几乎不可能进行任何有意义的数据分析。

> 还有第三种选择，即我目前正在使用的选择，将每行一对存储在一个表中。但是，有很多冗余。

这是理想的。您可以轻松地将数据导入两列，数据很容易检索。除非值不相关，否则冗余并不重要。

# ruby-on-rails - Rails - 带有单选按钮的动态表单

> ID：11690496
> 
> 赞同：0
> 
> 时间：2012-07-27T15:02:39.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

基本上我正在尝试使用以下代码在网站上列出我的数据库中的所有事件：

```
<table class="table">
            <thead>
            <tr>
                <th>Event</th>
                <th>Join Event?</th>
            </tr>
            </thead>
            <tbody>        
           <% @events.each do |e| %>    
           <p>              
            <tr>            
              <td>
              <div>
                <%= e.name %>
              </div>
              </td>
              <td>
              <div class="btn-group" data-toggle="buttons-radio">                                       
                 <button class="btn" class-toggle="btn-success"><i class="icon-ok"></i></button>
                 <button class="btn btn-danger active" class-toggle="btn-danger"><i class="icon-remove"></i></button>                                               
              </div>    
              </td>
            </tr>           
           </tbody>                 
            <% end %>              
           </table> 
```

您可以通过单击单选按钮轻松加入活动。现在我的问题是如何在 Rails 中保存这个表单？在此示例中，我已加入（=单击）事件 2。将此表单保存回数据库的最佳方法是什么。理想情况下，我在网站末尾有一个“更新”或“保存”按钮，这对我来说是这样的。

但是当我在我的表单中添加一个像这样的简单提交按钮时

```
...same code as above
          </td>
        </tr>           
       </tbody>  
            <%= f.submit 'Save form' %>        
        <% end %>              
       </table> 
```

然后每次单击我的单选按钮之一时都会触发我的提交按钮。有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:56:27.153

好吧，做一个 event[] 单选按钮是相当简单的，当提交时将提交一个选定选项的数组。

按钮标签看起来像这样，调整你的类等。

```
<%= radio_button_tag event[], e.id %> 
```

那么控制器看起来像

```
def create
  ...
  user.events = params[:event] unless params[:event].empty?
  user.save
  ...
end 
```

这个粗略的假设你的用户模型中有一个列来存储他们要去的事件。一个更灵活的模型是让 user :has_many events :through => user_events。相同的控制器逻辑将适用，除了它看起来像

```
def create
  ...
  if params[:event]
    params[:event].each do |e|
      user.user_event.new(:event_id => e)
    end
  end
  ....
end 
```

资源：表单标签助手：[此处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag) 使用：has_many：通过关联：[此处](http://guides.rubyonrails.org/association_basics.html)（第 2.4 节）

# java - 业务逻辑应该在哪里（那是什么？）真正存在以及如何使用 Spring 做到这一点？

> ID：11690499
> 
> 赞同：8
> 
> 时间：2012-07-27T15:02:45.650
> 
> 标签：java, spring, dependency-injection, business-logic, business-objects

我刚刚在读这篇文章：

[http://www.tutorialized.com/view/tutorial/Spring-MVC-Application-Architecture/11986](http://www.tutorialized.com/view/tutorial/Spring-MVC-Application-Architecture/11986)

我觉得很棒。它很好地解释了层架构，我很高兴我正在使用的架构几乎就是他所描述的。

但有一件事，我似乎没有得到：

第一：究竟什么是业务逻辑，什么不是？他在文章中说（而且他不是唯一一个），业务逻辑应该放在领域模型中。所以一个`Account`类应该有一个`activate()`知道如何激活`Account`. 据我了解，这可能涉及一些持久性工作。但是领域模型不应该依赖于 DAO。只有服务层应该知道 DAO。

那么，业务逻辑是否只是领域实体可以对自身做的事情？就像该`activate()`方法将`active`属性设置为`true`，再加上将属性设置`dateActivated`为`new Date()`，然后服务的任务是首先调用`account.activate()`和第二个`dao.saveAccount(account)`？服务需要什么外部依赖项？这就是我到目前为止所做的大部分工作。

```
public AccountServiceImpl implements AccountService
{
  private AccountDAO dao;
  private MailSender mailSender;

  public void activateAccount(Account account)
  {
     account.setActive(true);
     account.setDateActivated(new Date());
     dao.saveAccount(account);
     sendActivationEmail(account);
  }
  private void sendActivationEmail(Account account)
  {
    ...
  }
} 
```

这与他所说的相反，我想，不是吗？

我也没有得到关于如何拥有 Spring 线域对象的示例，例如`Account`. 如果 Account 自己发送电子邮件，则需要这样做。

鉴于此代码：

```
import org.springframework.mail.MailSender;  
import org.springframework.mail.SimpleMailMessage;  

public class Account {  
   private String email;  
   private MailSender mailSender;  
   private boolean active = false;  

   public String getEmail() {  
      return email;  
   }  

   public void setEmail(String email) {  
      this.email = email;  
   }  

   public void setMailSender(MailSender mailSender) {  
      this.mailSender = mailSender;  
   }  

   public void activate() {  
      if (active) {  
      throw new IllegalStateException("Already active");  
      }  

      active = true;  
      sendActivationEmail();  
   }  

   private void sendActivationEmail() {  
      SimpleMailMessage msg = new SimpleMailMessage();  
      msg.setTo(email);  
      msg.setSubject("Congrats!");  
      msg.setText("You're the best.");  
      mailSender.send(msg);  
   }  
} 
```

如果我使用 Hibernate，我可以使用`DependencyInjectionInterceptorFactoryBean`in 来连接`mailSender`. 如果我改用 JDBC，我真的会编写以下繁琐的代码吗？另外，当我在 MVC 控制器中为 Account 创建一个新实例时，假设将其填充到模型中？

```
 BeanFactory beanFactory = new XmlBeanFactory(  
     new ClassPathResource("chapter3.xml"));  
  Account account = new Account();  
  account.setEmail("email@example.com");  
  ((AutowireCapableBeanFactory)beanFactory).applyBeanPropertyValues(  
        account, "accountPrototype");  
  account.activate(); 
```

这不可靠而且很麻烦，不是吗？每当我看到 Account 的实例时，我都会问自己该对象是在哪里创建的。另外，如果我采用这种方法：我没有一个可以通过的 appContext.xml，而是几个，一个用于持久性，一个用于服务配置。我该怎么做？另外，每次创建这样的实例时都会创建一个全新的上下文，或者我错过了什么？

没有更好的解决方案吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T10:39:03.807

我认为*发送激活电子邮件*操作在这里不是业务层的一部分，您的域逻辑在这里是*帐户激活*操作，该逻辑应该存在于 `DomainObject`with name `Account`( `activate()`method ) 中。*发送激活电子邮件*`infrastructure`操作是层的一部分`application`。

服务是处理账户激活请求和连接业务层等的对象。服务获取给定帐户，激活它们并执行*MailSenderService*或类似的*发送激活电子邮件*操作。

 *短样本：

```
public AccountServiceImpl implements AccountService
{
 private AccountDAO dao;
 private MailSenderService mailSender;

 public void activateAccount(AccountID accountID)
 {
   Account account = dao.findAccount(accountID);
   ....
   account.activate();
   dao.updateAccount(account);
   ....

   mailSender.sendActivationEmail(account);
 }

} 
```

我可以建议的下一步是将业务层和基础设施层完全分离。这可以通过引入业务事件来获得。服务不再需要执行发送电子邮件的操作，它会创建事件通知其他层有关帐户激活的信息。

在 Spring 中，我们有两个处理事件的工具，`ApplicationEventPublisher`以及`ApplicationListener`.

简短的示例，发布域事件的服务：

```
public AccountActivationEvent extends ApplicationEvent {
    private Account account;

    AccountActivationEvent(Account account) {
       this.account = account;
    }

    public Account getActivatedAccount() {
       return account;
    }
}

public AccountServiceImpl implements AccountService, ApplicationEventPublisherAware
{
 private AccountDAO dao;
 private ApplicationEventPublisher epublisher;

 public void setApplicationEventPublisher(ApplicationEventPublisher epublisher) {
    this.epublisher = epublisher;
 }

 public void activateAccount(AccountID accountID)
 {
  Account account = dao.findAccount(accountID);
  ....
  account.activate();
  dao.updateAccount(account);
  ....

  epublisher.publishEvent(new AccountActivationEvent(account));
 }

} 
```

和域事件监听器，在基础设施层：

```
public class SendAccountActivationEmailEventListener 
      implements ApplicationListener<AccountActivationEvent> {

  private MailSenderService mailSender;

  .... 

  public final void onApplicationEvent(final AccountActivationEvent event) {
   Account account = event.getActivatedAccount():
    .... perform mail ...
   mailSender.sendEmail(email);
  }
 } 
```

现在您可以添加其他激活类型、日志记录、其他基础设施支持而无需更改并污染您的域（业务）层。

啊，你可以在文档中了解更多关于 spring 事件[的信息](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#context-functionality-events)。*

# android - 如何使用 View.OnTouchListener 而不是 onClick

> ID：11690504
> 
> 赞同：51
> 
> 时间：2012-07-27T15:02:54.170
> 
> 标签：android, android-layout, user-input

我正在为客户开发一个 Android 2.2.2 应用程序，他想要执行以下操作：

现在我有一个带有 onClick 事件的按钮，但他不喜欢，他想检测用户何时释放按钮。

我找到[了 View.OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)，我认为这是我需要使用的，但是，是否有可能像我对 onClick 所做的那样将此事件添加到 xml？

```
<ImageButton
    android:id="@+id/btnSaveNewGate"
    android:layout_width="@dimen/btnSaveNewGate_width"
    android:layout_height="@dimen/btnSaveNewGate_height"
    android:layout_below="@+id/radioGrGateType"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="@dimen/btnSaveNewGate_marginTop"
    android:background="@null"
    android:contentDescription="@string/layout_empty"
    android:onClick="onSaveNewGateClick"
    android:scaleType="fitXY"
    android:src="@drawable/save_gate_selector" /> 
```

我还有两个问题：

用户松开手指时关联的事件是什么？

是否有任何禁止使用`View.OnTouchListener`代替的准则`onClick`？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-27T15:12:21.000

用户松开手指的事件是`MotionEvent.ACTION_UP`. 我不知道是否有任何准则禁止使用 View.OnTouchListener 而不是 onClick()，很可能取决于具体情况。

这是一个示例代码：

```
imageButton.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP){

            // Do what you want
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-09-20T07:59:39.133

据推测，如果一个人想使用 an`OnTouchListener`而不是 an `OnClickListener`，那么需要额外的功能`OnTouchListener`。这是一个补充答案，以显示如何使用 an 的更多细节`OnTouchListener`。

**定义监听器**

把它放在你的活动或片段中的某个地方。

```
private View.OnTouchListener handleTouch = new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        int x = (int) event.getX();
        int y = (int) event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                Log.i("TAG", "touched down");
                break;
            case MotionEvent.ACTION_MOVE:
                Log.i("TAG", "moving: (" + x + ", " + y + ")");
                break;
            case MotionEvent.ACTION_UP:
                Log.i("TAG", "touched up");
                break;
        }

        return true;
    }
}; 
```

**设置监听器**

将侦听器设置为`onCreate`（对于 Activity）或`onCreateView`（对于 Fragment）。

```
myView.setOnTouchListener(handleTouch); 
```

**笔记**

*   `getX`并`getY`为您提供相对于视图的坐标（即视图的左上角）。当移动到您的视图上方或左侧时，它们将是负面的。如果您想要绝对屏幕坐标，请使用`getRawX`and 。`getRawY`
*   您可以使用`x`和`y`值来确定滑动方向等内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T15:07:00.730

OnClick 在用户释放按钮时触发。但如果您仍想使用 TouchListener，则需要在代码中添加它。只是：

```
myView.setOnTouchListener(new View.OnTouchListener()
{
    // Implementation;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-01T15:12:47.063

对于使用示例触摸监听器，您只需要此代码

```
@Override
public boolean onTouch(View view, MotionEvent motionEvent) {

    ClipData data = ClipData.newPlainText("", "");
    View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
    view.startDrag(data, shadowBuilder, null, 0);

    return true;
} 
```

# c# - 使用带有 SQLite 的通用存储库来解决困境

> ID：11690505
> 
> 赞同：0
> 
> 时间：2012-07-27T15:02:58.773
> 
> 标签：c#, sqlite, repository, domain-driven-design, xamarin.android

问候。我正在使用通用存储库来方便访问两个不同且必要的数据存储；一个本地 SQLite DB 和一个远程 REST WS（在 C# 中用于移动 MonoDroid 应用程序）。

```
interface IRepository<T>
{
  List<T> Read(ICond cond);
}

class RepositorySQL<T>: IRepository where T : new()
{
  List<T> Read(ICond cond)
  {
    sqlArgs = convertCond(cond);   // convert cond to sql arguments

    List<object[]> results = dbLayer.DBSelect(sqlARgs);  // sqlite SELECT wrapper

    List<T> returnList = new List<T>();

    for(int i=0; i < results.Count; i++)
    {
      object[] oa = results[i];

      T t = new T();

      // cast/convert oa to T
      ///////////////////////////

      t = (T)oa;                // override cast operator ???
      t = oa;                   // override = operator ???
      t.Convert(oa);            // use a method/delegate somehow ???

      returnList.Add(t);
  }
} 
```

`object[]`我的问题是，在将其添加到`T`return 之前，我需要对其进行转换或强制转换`List<T>`，但我不确定最好的方法是什么。我的 DB 层方法`DBSelect`构建并返回 a ，因为这是从该方法`List<object[]>`获取查询结果的最直接和通用的方式（我认为）（每个是一行，每一列 a 。我也可以通过调用将行存储到 a 中，但仍然会有铸造/转换问题）。`SqliteDataReader``GetValue(i)``object[]``object``string[]``GetString(i)`

我真的很想在这里使用通用存储库，即使静态类型的存储库是一个快速修复。我也坚持使用两个存储库（我已经阅读了许多关于存储库的帖子，其中的答案指出了为什么不应该使用两个存储库来解决数据重复问题，等等......）。除此之外，我愿意接受任何和所有建议。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:34:37.917

您需要以任何方式映射。因此，这只是代码组织的问题，该代码将驻留在强类型存储库类或实体类中。

类 foo : IDataReader publit void Construct(Object[] row)

然后您的存储库将是 IRepository 其中 T: IDataReader

# git - 在 ubuntu 上发布 git repo 时出错

> ID：11690506
> 
> 赞同：0
> 
> 时间：2012-07-27T15:03:06.043
> 
> 标签：git, publish, redmine

我正在尝试在 Ubuntu 虚拟机（一个 turnkeylinux redmine 设备）上发布一个存储库。

在机器上还有其他 git repos 正常工作。

*   我创建了一个新项目，位于`/my/path/to/proj/`

*   跑`git init`

*   提交测试文件

*   跑`touch /my/path/to/proj/.git/git-daemon-export-ok`

*   跑`chmod -x /my/path/to/proj/.git/git-daemon-export-ok`

*   尝试克隆`git::/my_server/git/proj/.git`它说

> 致命：远端意外挂断
> 
> git 没有完全退出（退出代码 128）

有什么线索吗？请记住，其他 git 存储库在同一个 VM 上运行得很好

回购应该与其他工作回购在同一个地方吗？如何告诉 git 守护进程在`git::/my_server/git/proj/.git`and之间映射`/my/path/to/proj/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:23:29.637

`git-daemon`在这个系统上运行如何？请特别注意在命令行中特别列出的 、 或 目录的特定`--base-path`参数。是在这些地方之一（或在开始的目录中）？`--interpolated-path``--user-path``/my/path/to/proj``git-daemon`

# sql-server - 触发用户或逻辑权限

> ID：11690515
> 
> 赞同：1
> 
> 时间：2012-07-27T15:03:47.233
> 
> 标签：sql-server, sql-server-2008, triggers

我想在我的表上应用写/删除/更新权限，但通过应用逻辑。

> 如果用户具有写入/删除/更新权限，则 OK。
> 
> 如果用户没有写入/删除/更新权限，则必须写入/删除/更新到另一个表，并对 INSERTED/DELETED SQL 表进行逻辑操作

我的表上有一些触发器（大部分是 FOR INSERT/UPDATE/DELETE）。我不想更改所有触发器并使其 INSTEAD OF 并根据用户凭据/属性在表上写入 OR NOT 并应用我的逻辑。

还有另一种方法可以做到这一点，例如“逻辑触发器”或“逻辑权限”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:43:05.717

不幸的是，您不能在 sql server 中拥有“一个触发器来统治它们”（如[本问题](https://stackoverflow.com/questions/7174066/sql-server-create-single-trigger-that-runs-for-all-tables-in-the-database)所述）。您唯一的选择是在每个表上放置一个触发器，然后设置角色触发器的优先级，使其在任何其他触发器之前执行。那，或者只是在每个触发器的其余触发器代码之前添加您的角色代码。

# ruby-on-rails - 如何将多个设计模型重定向到多个特定 url？

> ID：11690516
> 
> 赞同：4
> 
> 时间：2012-07-27T15:03:46.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我得到了三个独立的设计模型，因此我得到了三个不同的登录屏幕。这三个都有一个仪表板：

```
devise_for :md1
devise_for :md2
devise_for :md3

match 'md1/dashboard' => 'md1#dashboard', :via => :get
match 'md2/dashboard' => 'md2#dashboard', :via => :get
match 'md3/dashboard' => 'md3#dashboard', :via => :get 
```

我希望当 mdX 成功登录时，它会重定向到 mdX#dashboard，如果可以通过 GET。我试过：

```
devise_scope :md1 do
  root :to => 'md1#dashboard'
end
devise_scope :md2 do
  root :to => 'md2#dashboard'
end
devise_scope :md3 do
  root :to => 'md3#dashboard'
end 
```

然后，当我使用 md1 成功登录时，我被重定向到 md1 仪表板，但是当我使用 md2 成功登录时，我被重定向到 md1 的 sign_in 屏幕。然后我尝试了：

```
def after_sign_in_path_for resource
  dashboard_path resource
end 
```

但是没有这样的方法。有没有一种简单的方法可以做到这一点，或者它必须与`if`每个模型的语句一起使用？

## 更新

一些路线可以更好地理解和更多信息以获得更好的解决方案

```
md1_dashboard GET    /md1/dashboard(.:format)        md1#dashboard
md2_dashboard GET    /md2/dashboard(.:format)        md2#dashboard
md3_dashboard GET    /md3/dashboard(.:format)        md3#dashboard 
```

**提前致谢**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T10:42:58.783

当你写这个时：

```
devise_scope :md1 do
  root :to => 'md1#dashboard'
end
devise_scope :md2 do
  root :to => 'md2#dashboard'
end
devise_scope :md3 do
  root :to => 'md3#dashboard'
end 
```

您正在定义三个具有相同名称的根路由。由于它们有冲突，因此只使用第一个。这就是为什么只有 md1 起作用的原因。你可能打算这样写：

```
scope :md1 do
  root :to => 'md1#dashboard'
end
scope :md2 do
  root :to => 'md2#dashboard'
end
scope :md3 do
  root :to => 'md3#dashboard'
end 
```

在这种情况下，您将在三个不同的范围内定义三个不同的根路由（`rake routes`再次检查）。注意`scope`是一种路由方法，它限制您的路由，`devise_scope`不限制任何路由，它只是告诉您要使用哪个设计范围，除非设计明确要求您这样做，否则您不需要告诉您（您会知道什么时候这样做）。

进行此更改后，一切都应按预期工作。请注意，默认情况下，Devise`#{scope}_root_path`在成功登录后使用重定向，这就是上面的代码有效的原因（检查`rake routes`，你会看到你`md1_root`，，`md2_root`等现在已定义）。

# java - 在 JPA 中存在 distinct 问题

> ID：11690518
> 
> 赞同：1
> 
> 时间：2012-07-27T15:03:58.387
> 
> 标签：java, oracle11g, jpa-2.0, distinct

使用 JPA，我想为特定操作类型选择所有 Log 对象。我想从日志对象中获取用户（log.getUser()），但用户在结果列表中出现了多次。我试过了`distinct`，但它没有用，我想是因为我无法定义，究竟必须是什么`distinct`。这是我的 JPA 查询：

```
SELECT DISTINCT log 
  FROM Log AS log JOIN log.action AS action 
              JOIN log.user AS user 
 WHERE action.actionType = :actionType 
```

如果我说`SELECT DISTINCT user`，那么我最终没有整个日志对象。

任何帮助或提示将不胜感激。

**编辑：** 我的日志类的一部分：

```
public class Log {

    private int logId;
    private Calendar logDate;
    private User user;
    private Action action;
    private String description;
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:04:16.650

## 两个查询解决方案

由于您需要`Log`对象和`distinct User`对象，因此您可以执行两个查询，第一个查询检索`Log`对象，第二个查询检索`distict User`对象。

```
// first one to select Log objects
String logQuery = "SELECT l FROM Log l WHERE l.actionType = :actionType";
...
List<Log> logs = logJpaQuery.getResultList();

// second one to select distinct users from this objects
String usersQuery = "SELECT distinct l.user FROM Log l where l.logId in (:logIds)";
...
userJpaQuery.setParameter("logIds", logs);
List<User> users = userJpaQuery.getResultList(); 
```

使用这种方法，您可以拥有 select`Log`对象的不同用户。

# android - 如何在 Action Bar Sherlock 中实现搜索小部件？

> ID：11690525
> 
> 赞同：29
> 
> 时间：2012-07-27T15:04:39.347
> 
> 标签：android, actionbarsherlock

我试图让搜索框在 Action Bar Sherlock 上工作。

这是我的`PreLocationActivity`：

```
 @ContentView(R.layout.search)
    public class PreLocationActivity extends RoboSherlockActivity {

        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.map_layout);
        } 

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            //Used to put dark icons on light action bar
             menu.add("Search")
             .setIcon(R.drawable.ic_search_inverse)
             .setActionView(R.layout.collapsible_edittext)
             .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
                return true;
        }

        @Override
        public boolean onSearchRequested() {
            return super.onSearchRequested();
        }
    } 
```

这是我的`SearchableActivity`：

```
@ContentView(R.layout.search)
public class SearchableActivity extends RoboSherlockFragmentActivity {

    @InjectView(R.id.addressListView) ListView addressView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the intent, verify the action and get the query
        Intent intent = getIntent();
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
          String query = intent.getStringExtra(SearchManager.QUERY);
          doGeoSearch(query);
        }
}

    public void doGeoSearch(String query){
        Geocoder geocoder;
        ArrayList<Address> addresses;
        ArrayList<String> address = new ArrayList<String>() ;
        geocoder = new Geocoder(this, Locale.getDefault());
        try {
            addresses = (ArrayList<Address>) geocoder.getFromLocationName(query, 6);
            Log.d("Address",String.valueOf(addresses));
            for(int i = 0;i<addresses.size();i++)
            {
            String addr = new String();
            addr.concat(addresses.get(i).getAddressLine(0));
            addr.concat(addresses.get(i).getAddressLine(1));
            addr = addresses.get(i).getAddressLine(0) + addresses.get(i).getLocality() + addresses.get(i).getAdminArea();
            //addr.concat(addresses.get(i).getAddressLine(2));
            Log.d("addr",addr);
            address.add(addr);

            }

            SearchAddressAdapater addressList = new SearchAddressAdapater(getApplicationContext(),R.layout.search_list,addresses, SearchableActivity.this);
            addressView.setAdapter(addressList);
            //ListView addressListView = new ListView();
        } catch (IOException e) {
                //Handle exception
        }
    } 
```

根本没有成功。例如，当我在 Prelocation Activity 上键入内容并按 Enter 键时，没有搜索任何内容。我是否必须将其视为一个`EditText`并为它编写一个文本侦听器，然后调用它`geoCoder`并获取我的位置，或者是否有更聪明的方法来解决它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-29T20:14:19.813

## Android 支持库（v4 + v7）：

**支持库 v7：http:** [//developer.android.com/tools/support-library/features.html#v7-appcompat](http://developer.android.com/tools/support-library/features.html#v7-appcompat)

**Google 现在支持将 ActionBar 兼容性回溯到 Android 2.1(API 7)。**

由于方法名称相同和/或非常相似，因此很容易进行转换。

**使用资源添加支持库：http:** [//developer.android.com/tools/support-library/setup.html#libs-with-res](http://developer.android.com/tools/support-library/setup.html#libs-with-res)

**你的清单：AndroidManifest.xml**

```
<uses-sdk
  android:minSdkVersion="7"
  android:targetSdkVersion="17" /> 
```

**您的菜单：menu.xml**

```
<item
    android:id="@+id/menu_search"
    android:actionViewClass="android.support.v7.widget.SearchView"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="Search"/> 
```

* * *

## ActionBarSherlock [已弃用，使用 appcompat]：

以下是如何在 Android 中通过 ActionBarSherlock 使用标准 SearchView 和 SearchManager！我正在使用此代码并且工作正常。我已经在 Android 2.3(API 10) - Android 4.3(API 18) 上对此进行了测试。

很棒的教程和文档：

[http://developer.samsung.com/android/technical-docs/UI-unification-with-older-Android-versions-using-ActionBarSherlock](http://developer.samsung.com/android/technical-docs/UI-unification-with-older-Android-versions-using-ActionBarSherlock)

**记住：**

使用 ActionBarSherlock 进行自定义搜索（最低 API 7）

带有 ActionBarSherlock 的 SearchView（最低 API 8）

**您的菜单：menu.xml**

```
<item
    android:id="@+id/menu_search"
    android:actionViewClass="com.actionbarsherlock.widget.SearchView"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="Search"/> 
```

* * *

## 对彼此而言：

**你的活动：MainActivity.java**

```
public boolean onCreateOptionsMenu(Menu menu) 
{
        getSupportMenuInflater().inflate(R.menu.menu, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        if (null != searchView )
        {
            searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
            searchView.setIconifiedByDefault(false);   
        }

        SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() 
        {
            public boolean onQueryTextChange(String newText) 
            {
                // this is your adapter that will be filtered
                adapter.getFilter().filter(newText);
                return true;
            }

            public boolean onQueryTextSubmit(String query) 
            {
                // this is your adapter that will be filtered
                adapter.getFilter().filter(query);
                return true;
            }
        };
        searchView.setOnQueryTextListener(queryTextListener);

        return super.onCreateOptionsMenu(menu);
    } 
```

让我知道这是否也适合您，如果您需要更多帮助，请告诉我！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-27T15:13:45.750

```
private EditText search;

public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu)
{
    menu.add(0, 1, 1, R.string.menu_search).setIcon(R.drawable.ic_action_search).setActionView(R.layout.action_search).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item)
{
    switch (item.getItemId())
    {
        case 1:
        search = (EditText) item.getActionView();
        search.addTextChangedListener(filterTextWatcher);
        search.requestFocus();
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
    }
}

private TextWatcher filterTextWatcher = new TextWatcher()
{
    public void afterTextChanged(Editable s)
    {
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count)
    {
        // your search logic here
    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-19T14:12:54.660

这里有一个类似的问题，我在分配适配器时遇到了问题。

[如何使用 SherlockActionbar 实现带有列表视图的搜索小部件？](https://stackoverflow.com/questions/15651429/how-to-implement-search-widget-with-a-listview-using-sherlockactionbar)

我希望它会有所帮助，因为我遇到了同样的问题。

要使用适配器，最好的方法是类实现 SearchView.OnQueryTextListener，然后您不必创建内部类，您将拥有适配器。

在您的代码中将是：

```
public class MainActivity extends SherlockListActivity implements SearchView.OnQueryTextListener 
```

然后在类中你必须定义方法。适配器将是您在类 ArrayAdapter 适配器中拥有的适配器。但是您应该在类中将其定义为私有。

```
public boolean onQueryTextChange(String newText) {
    // this is your adapter that will be filtered
    adapter.getFilter().filter(newText);
    return true;
}

public boolean onQueryTextSubmit(String query) {
    // this is your adapter that will be filtered
    adapter.getFilter().filter(query);
    return true;
} 
```

在您设置的行中：

```
 searchView.setOnQueryTextListener(queryTextListener); 
```

应该：

```
 searchView.setOnQueryTextListener(this); 
```

如果您有任何问题，请告诉我，我今天遇到了类似的问题，并且没有回答就阅读了您的问题。

# ruby-on-rails - Ruby on Rails 中序列化的 NoMethodError

> ID：11690528
> 
> 赞同：1
> 
> 时间：2012-07-27T15:04:46.837
> 
> 标签：ruby-on-rails, serialization

我正在尝试创建一个应用程序，它有表格，有问题，又有答案。这些问题需要不同类型的答案，例如自由文本或从一组可能的选项中进行选择（多项选择题）。不同类型的问题继承自基类 Question。事实证明，选择题是有问题的。

会有多项选择题，有不同的可能答案集（例如，1-5、1-8 或是/否）。我正在考虑创建一个类 MultipleChoiceQuestion < Question，答案选择以数组形式给出，然后使用序列化保存到数据库中。但是，我根本无法使序列化工作。

通过谷歌搜索，我发现序列化应该通过以下方式工作：

```
class MultipleChoiceQuestion < Question
    serialize :choices, Array
end 
```

现在，如果我打开 rails 控制台，然后输入

```
 q1 = MultipleChoiceQuestion.new
  q1.choices 
```

我只得到一个 NoMethodError 的选择。我还需要做些什么才能使序列化工作吗？我还尝试通过编辑迁移文件并迁移数据库在数据库中添加文本列“选择”，但这也无济于事。

我正在使用 Rails 3.2.6 和 PostgreSQL 9.1。

**更新：**如果我将 MultipleChoiceQuestion 类更改为从 ActiveRecord::Base 而不是 Question 继承，则序列化有效。但是 Question 继承自 ActiveRecord::Base，所以我不明白问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:09.907

我通常会这样做：

```
 class User < ActiveRecord::Base
 serialize :preferences, Hash
end

def preferences
 read_attribute(:preferences) || write_attribute(:preferences, {})
end 
```

以确保其默认值是您所期望的。我标记了正在序列化的文本类型列，因此属性存储为 yaml。

```
user.preferences[:key]  = value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:16:53.137

您还可以为选择添加一个新模型（和一些数据库表），例如：

```
class Choice < ActiveRecord::Base
    belongs_to :multiple_choice_question
end

class MultipleChoiceQuestion < Question
    has_many :choices
end 
```

# java - JNDI 查询返回到 LDAP 服务器的名称中的正斜杠

> ID：11690529
> 
> 赞同：4
> 
> 时间：2012-07-27T15:04:48.590
> 
> 标签：java, escaping, ldap, jndi

我需要对 LDAP 目录服务器进行多次查询，并且我正在使用 JNDI 目录工具。然后我需要使用它们的专有名称对查询结果中的对象进行一些处理。服务器返回的某些条目包含正斜杠字符，因此 JNDI 使用双引号对整个名称进行转义：

```
NamingEnumeration<SearchResult> results = dirContext.search(queryRoot, queryFilter, controls);
for (SearchResult result : Collections.list(results)) {
    String objectName = result.getName();
    System.out.println(objectName);
} 
```

如果查询结果中的一个对象有一个名字，比如'b=id/10,a=1'，它会像这样打印

```
"b=id/10,a=1" 
```

请注意名称周围的双引号。由于这些引号，我无法`javax.naming.ldap.LdapName`直接从中创建：它因`NamingException`“无效名称”而失败。

我知道我可以手动删除这些引号，但这感觉很笨拙。有没有办法避免这种逃避？或者也许有更清洁的方法来做我需要的？

PS 有趣的是，[官方 JNDI 教程](http://docs.oracle.com/javase/tutorial/jndi/ldap/faq.html#20)建议使用`LdapName`来实现“简单的名称操作”，甚至提到了转义问题，但没有提供有关上述问题的任何链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:17:58.357

如果`AttributeValue`具有特定于 LDAP 的语法，则字符将被转换（使用定义的语法规范）为 UTF-8，并且只有以下字符必须转义：

*   `' '`（空格）在字符串的开头
*   `' '`（空格）在字符串的末尾
*   `'"'`
*   `'+'`（加号表示多值 RDN）
*   `,`（逗号字符分隔专有名称的组成部分）
*   `;`
*   `<`
*   `>`
*   `\`

正斜杠是一个有效字符，不需要转义，因此它必须由应用程序和该应用程序使用的 API 处理。正如您所指出的，正斜杠对 JNDI 具有“特殊含义”。JNDI 在很多方面都设计得很糟糕，这只是众多方面之一。考虑将[UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/)用于新代码。

例如，添加以下条目：

```
dn: uid=abc/def,ou=people,dc=example,dc=com
objectClass: top
objectClass: person
objectClass: inetOrgPerson
uid: abc/def
cn: abc/def
sn: abc/def
userPassword: this entry is used to test http://stackoverflow.com/questions/11690529/forward-slashes-in-the-names-returned-by-jndi-query-to-ldap-server 
```

检索刚刚添加的条目：

```
ldapsearch -h localhost -p 10389 -D 'cn=RootDn'  -b dc=example,dc=com -s sub '(uid=abc/def)' 1.1
Enter bind password: 
version: 1
dn: uid=abc/def,ou=people,dc=example,dc=com 
```

### 也可以看看

*   [专有名称的字符串表示](https://www.rfc-editor.org/rfc/rfc4514)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T22:34:55.470

SearchResult.getName() 返回的搜索结果是`CompositeName`. 尝试像这样使用它：

```
Name itemPart = new CompositeName(result.getName())
Name absoluteName = new LdapName(myBasePath).addAll(itemPart)
// or
String sAbsoluteName = ctx.composeName(new LdapName(myBasePath), itemPart) 
```

奇怪的转义将从`absoluteName`.

# c# - 为什么 CLR 不处理清理代码？

> ID：11690534
> 
> 赞同：3
> 
> 时间：2012-07-27T15:04:53.807
> 
> 标签：c#, .net

我刚刚开始使用 .NET 框架。今天，我学习了`IDisposable`接口和`dispose()`方法。我被教导了一些关于它的事情：

`dispose()`应包含与对象对应的清理代码（如关闭任何对象占用的任何资源 - 文件或数据库连接等）

我还被告知，如果我们不在`dispose()`方法中执行此操作，则可以在析构函数中执行相同的操作，但这并不能确保立即执行，我们只能任由 GC 摆布。

如果我们根本不提供任何清理代码，GC 将强制终止与我们的对象持有的资源的所有连接。因此，我们应该自己处理清理代码。

但我很好奇为什么 CLR 不自己处理这个问题？它负责内存管理，负责垃圾收集。因此，它应该非常清楚哪个对象持有哪个资源以及该对象何时消亡。那么，它也应该能够重新分配这些资源？

我问了几个人。我得到的答案是因为我们需要优雅地关闭它，而 GC 会强制关闭它。真的是这个原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:07:05.080

在 .NET中，GC 知道的**远不止托管代码。**涉及大量非托管代码：所有文件句柄、数据库连接、网络套接字……所有这些都是普通的非托管 Win32 代码。您甚至无法相信，在您从漂亮的 C# 应用程序调用的几乎每一个 BCL 函数中，您都会遇到大量用 C++ 编写的非托管函数（愿上帝禁止 VB6），并深入操作系统的内部本身。所有这些函数都在分配非托管内存、句柄……托管世界不知道那里发生了什么。

例如，每次打开文件 ( `FileStream`) 时，您基本上都在调用（当然是在幕后）[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)非托管 Win32 函数。该函数直接从文件系统分配一个非托管文件句柄。.NET 和 GC 严格无法跟踪此非托管代码及其所做的一切。这就是这些类实现 IDisposable 接口的原因。这样您就可以始终将它们的实例包装在[using 语句中](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，并确保始终调用 Dispose 方法，即使在发生异常时也是如此，并且尽可能快。Dispose 方法将负责调用另一个非托管函数来清理它造成的混乱。

所以基本上你可以考虑 IDisposable 接口的方式如下：

> 当我们拥有用完全托管的语言编写的操作系统（例如来自 Microsoft Research 的[Midori](http://en.wikipedia.org/wiki/Midori_%28operating_system%29)）时，我们可能不再需要 IDisposable，因为 GC 将能够完全替换它，因为它知道发生的所有事情在这个系统内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:07:28.563

`IDisposable`的重点`Dispose()`是你应该清理**非托管**内存。那是 .NET 没有分配的内存，它来自外部来源，因此 GC 无法知道它。所以它不能自动为你清理它。本质上，这正是托管内存和非托管内存之间的区别；-)

通常，您应该实现`Dispose()`以清理您的类使用的任何非托管资源并实现终结器来调用`Dispose()`。不过，终结器只是一种保护措施。如果调用者忘记正确处理您的类，它将确保*最终清理这些资源。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:06:36.603

该`IDisposable`界面为您提供了一种清理*非托管*资源的方法。CLR 只为您*管理托管*资源。

换句话说，CLR 只知道如何清理它管理的东西。如果您打开与系统其余部分的连接（如打开文件、数据库连接等），这些都是您的责任，您需要告诉 CLR 您希望它如何为您清理这些连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T15:07:44.367

该`IDisposable`接口只是一个约定，允许您**确定**地处置托管和非托管资源。它本身并不能取代垃圾收集或做任何涉及垃圾收集器本身的事情。

非托管资源更明显，因为除非这些资源被处理（在终结器中或通过确定性处置），否则它们将一直作为内存泄漏，直到进程结束。使用托管内存，如果您不确定地处置项目，GC 将不确定地收集它们（假设最终有资格收集），因为它们是托管的（这也是处置模式不包括托管项目的原因在终结器路线中）。

`IDisposable`它本身不做任何事情，它只是`using`人们在处理使用消耗性资源、非托管内存、外部项目等的项目时期望找到的公认接口（并且在代码中支持关键字）。

CLR 不可能知道外部项目何时完成。这完全取决于您的应用程序的流程。如果您碰巧也不知道何时释放对象，那么**终结**器语法很有用。如果您在自定义类上实现终结器，垃圾收集过程将在最终收集之前运行此终结器。这是你整理自己的最后机会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T15:07:52.270

它只能处理 .NET 对象的内存管理。任何需要使用非托管资源的代码（例如，因为它与 C++ 库交互）都在垃圾收集器的管辖范围之外。需要告知所有代码何时以老式方式释放其资源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-27T15:10:54.517

.Net 框架（和 GC）无法知道如何释放非托管资源。它所能做的就是破坏托管代码对资源的引用。在与数据库服务器的连接上实际调用 .Close() 会好得多（从而告诉它连接应该返回到可用连接的轮询中），而不是仅仅破坏引用并让它自己超时经过一定的秒数。

因此，在引用非托管资源时，请尽可能使用 IDisposable 接口！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-27T15:11:05.003

`IDisposable`当您不希望 GC 处理该特定工件时使用。最常见的示例是连接或文件句柄。您不希望在释放文件之前等待 GC 运行，或者关闭与数据库的连接，因为您不知道什么时候会发生。

大多数人`IDisposable`与非托管资源相关联，这在很大程度上是准确的，但没有记住终结器是处理这些资源的正确 .NET 方式。`IDisposable`如果这对您的程序很重要，则提供一种确定性处理的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T15:10:37.423

我们使用 Dispose 是为了将非托管资源处理为文件访问或连接数据库，因为 GC 没有关于此非托管资源的信息。

您也可以使用 Finalize，但它不是高性能的，因为您将资源保存在 finalization 结构中，并且 GC 通过这个 finalization 结构在 dispose 周期结束时通过，并且它不是高性能的

# python - 使用 Python 自动化 Subversion 命令

> ID：11690538
> 
> 赞同：3
> 
> 时间：2012-07-27T15:05:11.187
> 
> 标签：python, svn, terminal

我对 Subversion 很陌生，在 Python 方面没有那么丰富的经验，但是我正在处理需要在目录中移动的大量媒体文件。使用 Visions GUI，一些文件传输需要很长时间，所以我想通过将操作存储在文本文件中然后让 python 脚本在一夜之间对这些操作进行自动化，从而使这些任务在夜间运行？

例如，文本文件可能包含如下命令：

```
svn mv current desired 
```

如何将此字符串发送到终端以执行命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:10:22.977

您可以进行[os.system](http://docs.python.org/library/os.html#os.system)调用或尝试使用[PySVN](http://pysvn.tigris.org/)，这可以让您在 Python 中对您正在使用的 SVN 存储库进行更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:12:01.147

该`subprocess`模块是执行命令的最佳方式。正如@Abgan 指出的那样，更好的方法可能是使用颠覆库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T16:23:29.580

如果您在 Windows 上，最好使用 SVN 库。在 Linux/Mac/Unix 上，您实际上可以采用任何一种方式，因为它们可以很好地运行子进程——windows 在这方面做得不是很好。

subprocess 今天确实比 os.system 更受欢迎。

使用 subprocess.Popen 而不是 SVN 库（模块）的好处是您不必学习两种访问 SVN 的方法。您的命令行 SVN 知识直接转化为您的代码。

# android - 无法运行 com.android.ide.eclipse.adt.internal.build.AidlProcessor

> ID：11690543
> 
> 赞同：3
> 
> 时间：2012-07-27T15:05:20.167
> 
> 标签：android, eclipse, eclipse-plugin, adt, aidl

我从一位开发人员那里得到了一个项目，该项目已经完成并且在他的计算机上可以正常工作。当我尝试在 Eclipse 中在我的计算机上构建该项目时，我收到以下错误消息：

无法运行 com.android.ide.eclipse.adt.internal.build.AidlProcessor。

开发人员正在项目中使用 AIDL 文件，我认为我的 eclipse 无法运行这些文件......我在互联网上搜索了很多关于此的内容，但没有得到任何帮助。

如果有人对此问题有任何想法，请告诉我。

谢谢，

海浪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:32:14.653

我不知道这对你的情况是否有帮助，但在我的情况下，我删除了项目，删除了 .classpath 文件，然后再次完成了“来自现有源的新 android 项目”工作流程。我不知道原来的 .classpath 出了什么问题，但这似乎起到了作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:26:44.033

我不确定，但也许您还没有为 Eclipse 安装 Android SDK 和 Android ADT，或者您安装不正确？尝试重新安装它们。

这个问题很不寻常，如果你使用 JDK 7 会出现一些不寻常的问题。对于 Android 开发，你应该使用 JDK 6。也检查一下！祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T06:05:55.147

我在导入项目时出错。我删除了 .classpath 文件，然后导入了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:12:13.167

尝试其中之一：

1.  改变你的工作空间。
2.  从**元数据**中删除 **com.android.ide.eclipse.adt**文件夹。**插件**\
*****   将**exported="true"**添加到您的**.classpath中的****classpathentry******

# ruby-on-rails-3 - NameController 中的 NoMethodError#new

> ID：11690546
> 
> 赞同：0
> 
> 时间：2012-07-27T15:05:27.347
> 
> 标签：ruby-on-rails-3, controller, nomethoderror

我在我的应用程序中遇到了一个错误，以解释上下文：一个用户有几辆车，每辆车都可以进行加油，因此我的 TankingLogsController 如下

```
class TankingLogsController < ApplicationController
    def new
        @user = User.find(params[:user_id])  
        @car = @user.cars.find(params[:car_id])
        @tankinglog = @cars.tanking_logs.build
    end
end 
```

这是我的 routes.rb 文件

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :users do
    resources :cars do
    resources :tanking_logs
end
end
... 
```

我遇到了这个错误：

```
NoMethodError in TankingLogsController#new

undefined method `tanking_logs' for nil:NilClass

Application Trace | Framework Trace | Full Trace
app/controllers/tanking_logs_controller.rb:5:in `new' 
```

为什么我的应用程序失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:07:06.547

您有一个非常明显的错误，Ruby 会准确地告诉您它是什么以及在哪里可以找到它。

你写过：

```
@car = @user.cars.find(params[:car_id])
@tankinglog = @cars.tanking_logs.build 
```

您初始化了`@car`在第一行调用的变量，并在第二行引用了第二个未初始化的变量`@cars`。

您从未初始化`@cars`变量，因此它为零。打电话给`@cars.tanking_logs`原因`undefined method 'tanking_logs' for nil:NilClass`，因为你在有效地写作`nil.tanking_logs`。

第二行应该使用`@car.tanking_logs`.

# ios - 没有收到脸书的回复

> ID：11690550
> 
> 赞同：1
> 
> 时间：2012-07-27T15:05:52.787
> 
> 标签：ios, facebook, fbrequest-form

当我从 iPhone 应用程序向墙上发送帖子时遇到问题。我已经实现了所有委托方法和方法：

```
 -(void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response {
    // Keep this just for testing purposes.
    NSLog(@"received response");
} 
```

我的应用程序正常工作，帖子出现在我的墙上，但我的应用程序没有得到任何响应并卡在我的活动指示器上。**NSLog 的控制台中没有出现任何内容。**

有谁知道，问题出在哪里？我要死在这里：-/

**编辑：**

```
- (IBAction)fbButtonPressed:(id)sender {

// Create the parameters dictionary that will keep the data that will be posted.
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"330334280387192", @"app_id",
                               nil];

// Publish.
[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

}

**我正在使用提要对话框进行用户输入**

# format - 更改进度条格式以在 pyQt4 中显示 xx%

> ID：11690551
> 
> 赞同：5
> 
> 时间：2012-07-27T15:06:04.387
> 
> 标签：format, progress-bar, pyqt4

我一直在尝试找出 ProgressBar 的 .setFormat() 方法的正确语法是什么，但我找不到任何相关信息。%p% 只是将百分比显示为“34%”，但我也想像这样显示分数：“33.7%”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T19:29:10.453

是的，您可以简单地添加`self.pbar.setFormat('%.02f%%' % (self.step))`您的代码

如果你想实现更精确的格式化，你可以像这样重新实现 QProgressbar

```
class qProress(QtGui.QProgressBar):
    """docstring for qProress"""
    def __init__(self,args):
        super(qProress, self).__init__(args)
        self.valueChanged.connect(self.onValueChanged)

    def onValueChanged(self, value):
        self.setFormat('%.02f%%' % (self.prefixFloat))

    def setValue(self, value):
        self.prefixFloat = value
        QtGui.QProgressBar.setValue(self, int(value)) 
```

# php - HTTP 标头差异 - 以增量方式加载页面

> ID：11690562
> 
> 赞同：0
> 
> 时间：2012-07-27T15:06:36.260
> 
> 标签：php, zend-framework, http-headers

我有一个 HTML 页面，当它逐步完成一个过程时，它会显示一个进度条。它使用 flush() 将数据发送到浏览器。我试图让它在 Zend 进程中工作，我通过专门发送标头、内容来短路，然后用退出命令结束进程。

HTML 页面正确显示（进度条逐步完成）。Zend/PHP 页面只显示完成的页面（不是步骤）。我假设这是一个标题问题，因为方法 (flush()) 是相同的。

在 Chrome 中，HTML 页面的标题显示为：

```
HTTP/1.1 200 OK
Date: Fri, 27 Jul 2012 14:38:07 GMT
Server: Apache/2.2.16 (Unix) mod_ssl/2.2.16 OpenSSL/0.9.8r DAV/2 PHP/5.3.2
X-Powered-By: PHP/5.3.2
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html 
```

Zend/PHP 页面的标题如下：

```
HTTP/1.1 200 OK
Date: Fri, 27 Jul 2012 14:44:13 GMT
Server: Apache/2.2.16 (Unix) mod_ssl/2.2.16 OpenSSL/0.9.8r DAV/2 PHP/5.3.2
X-Powered-By: PHP/5.3.2
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-cache
Pragma: no-cache
Keep-Alive: timeout=5, max=98
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8 
```

我在 PHP 中指定的唯一标头信息是：

```
header('Content-Type: text/html; charset=utf-8'); 
```

我正在使用此页面中的此代码：[http ://w3shaman.com/article/php-progress-bar-script](http://w3shaman.com/article/php-progress-bar-script)

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:24:59.213

在调用`ob_flush()`之前调用`flush()`Zend 可能会激活输出缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:25:48.147

Mathieu 解决了这个问题。在 Zend/PHP 页面中的 flush() 之前添加 ob_flush() 解决了这个问题。我不确定 Zend 是否按照建议激活了输出缓冲。

# ms-access - 访问表达式编辑器 - 新手访问报告

> ID：11690568
> 
> 赞同：0
> 
> 时间：2012-07-27T15:06:58.003
> 
> 标签：ms-access, report, ms-access-2007, expression

我是 Access 报告和表单的新手。是的，我讨厌承认。我熟悉数据库部分，但不熟悉报告和表单。

我在 Access 表达式生成器中遇到了这个我无法解构的特殊表达式

=IIf(([value1] & ""="") 或 ([value2] & ""=""),"",[value3])

请理解我对 Crystal Reports 有足够的经验，并且我理解什么是 iif 语句。

但我没有遇到过这样的事情

1.  & ""="" 究竟是做什么的？
2.  这是Access中的某种正则表达式吗？
3.  您能否通过提供链接来帮助我，以便我可以深入阅读此内容？

提前致谢 干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:09:16.690

它将一个空字符串附加到该值以避免 Null。

你可以这样说：

```
Value Is Null Or Value = "" 
```

进一步解释重新评论

假设 Value1 为 Null

```
Value1 is not equal to "" 
```

然而

```
Value1 & "" is equal to "" 
```

让我们说 Value1 = ""

```
Value1 is not equal to Null 
```

然而

```
Value1 & "" is equal to "" 
```

让我们说 Value1 = "abc"

```
Value1 & "" is equal to "abc" 
```

# php - $_FILES 数组及其愚蠢的结构

> ID：11690570
> 
> 赞同：6
> 
> 时间：2012-07-27T15:07:02.337
> 
> 标签：php, file, upload

> **可能重复：**
> [你如何遍历 $_FILES 数组？](https://stackoverflow.com/questions/5444827/how-do-you-loop-through-files-array)

出于某种原因，数组真的很吸引我。我最终可以到达那里，但是这个 $_FILES 数组对我来说似乎是倒退的。

我希望能够像这样循环 $_FILES：

```
foreach($_FILES as $file)
{
   echo $file['name'] . "<br>";
   echo $file['type'] . "<br>";
   echo $file['size'] . "<br>";
   echo $file['error'] . "<br>";
} 
```

但显然，以它的结构方式，你不能做到这一点。所以我写了以下内容：

```
echo "<pre>";
                $x=0;
                $file = array();
                foreach($_FILES['attachment']['name'] as $data)
                {   $file[$x]=array(); 
                    array_push($file[$x],$data); $x++;
                }
                $x=0;
                foreach($_FILES['attachment']['type'] as $data)
                    {   array_push($file[$x],$data); $x++;}

                $x=0;
                foreach($_FILES['attachment']['tmp_name'] as $data)
                    {   array_push($file[$x],$data); $x++;}
                $x=0;
                foreach($_FILES['attachment']['error'] as $data)
                    {   array_push($file[$x],$data); $x++;}
                $x=0;
                foreach($_FILES['attachment']['size'] as $data)
                    {   array_push($file[$x],$data); $x++;}
                var_dump($file);
                echo "</pre>"; 
```

这似乎非常冗长和荒谬，但我的想法目前停留在如何正确循环该数组的不同部分以使其工作并按照我想要的方式循环。

一定会有更好的办法？

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:09:57.013

如果它们都具有相同的长度，您可以这样做

```
for($i = 0; $i < count($_FILES['attachment']['name']); $i++)
{
   echo $_FILES['attachment']['name'][$i] . "<br>";
   echo $_FILES['attachment']['type'][$i] . "<br>";
   echo $_FILES['attachment']['size'][$i] . "<br>";
   echo $_FILES['attachment']['error'][$i] . "<br>";

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:13:28.343

从您的代码中，我想您的`<form>`输入如下所示：

```
<input type="file" name="attachment[]">
<input type="file" name="attachment[]"> 
```

如果您为文件字段提供唯一名称，您应该获得所需的`$_FILES`结构：

```
<input type="file" name="attachment0">
<input type="file" name="attachment1"> 
```

结果是这样的：

```
数组（2）{
  '附件0' => 数组（5）{
    '名称' => 字符串（8）“1528.jpg”
    '类型' => 字符串（0）“”
    'tmp_name' => 字符串（0）“”
    '错误' => int(2)
    '大小' => int(0)
  }
  '附件1' => 数组（5）{
    '名称' => 字符串（8）“1529.jpg”
    '类型' => 字符串（0）“”
    'tmp_name' => 字符串（0）“”
    '错误' => int(2)
    '大小' => int(0)
  }
}

```

# c# - 有没有办法在 Visual Studio 项目中制作用户特定的预/后构建事件？

> ID：11690574
> 
> 赞同：9
> 
> 时间：2012-07-27T15:07:05.773
> 
> 标签：c#, visual-studio, post-build-event

我目前正在我的项目中使用构建后事件将我的程序集复制到另一个目录以进行调试。这是我机器的本地文件，仅用于调试目的，所以我更愿意将它放在 * *.csproj.user*文件中，而不是 * *.csproj*文件中。我尝试将负责的元素从 * *.csproj*复制到 * *.csproj.user*，但这不起作用。

**编辑** 为了澄清，我不想将用户特定的命令放在 * *.csproj*文件的构建后事件中。相反，我想将构建后事件命令放在 * *.csproj.user*文件中。（从目前的答案来看，这看起来是不可能的）

为了提供更多上下文，它不是项目参考。我正在将我的程序集复制到在运行时加载程序集的应用程序的目录。（想想插件）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T15:11:20.253

简短的回答是不，不是你想要的方式：|

稍长的答案是排序。理论上，您可以为单个用户触发特定的构建事件，但这些事件仍将在 csproj 文件中。您可以在构建上运行外部事件，然后根据运行它们的用户（作为脚本）允许这些外部事件运行。

如果这仅用于调试，我只需插入它们，在将其上传到您的版本控制系统之前进行构建并将它们拉出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T15:11:20.870

使用 if 语句和环境变量（如果需要，请使用双引号）

```
if "$(Username)" == "MyUser"
  copy /y $(ProjectDir)memcached.$(ConfigurationName).config $(ProjectDir)memcached.config 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:09:25.270

您可以使用具有由环境变量触发的条件的自定义构建[目标。](http://msdn.microsoft.com/en-us/library/t50z2hka.aspx)然后只在您的机器上设置该变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:08:50.047

Pre-/Post-build 事件保存在项目文件中。VS 没有提供任何选项。

您可以引入自定义（外部）工具来执行此类复制，并从菜单或宏中调用它并调用它。

# c# - 如何有效地将大量文档从一个集合复制到另一个集合

> ID：11690575
> 
> 赞同：1
> 
> 时间：2012-07-27T15:07:07.317
> 
> 标签：c#, mongodb

我正在为 Mongo db 使用 C# 驱动程序，并且我想实现调整上限集合的大小。我遵循了这个[答案](https://stackoverflow.com/questions/4225535/how-can-i-resize-a-mongodb-capped-collection-without-losing-data)的建议，该建议建议使用临时名称创建一个新集合，从旧集合中复制文档，删除旧集合并重命名新集合。但是我怎样才能有效地做到这一点？当前集合的大小为 700Mb，复制所有数据需要相当长的时间。我很可能会在运行服务器的机器上运行此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:45:18.183

调整上限集合大小的最有效方法仍然是创建一个新集合，复制文档，然后重命名旧集合并按照引用的[答案](https://stackoverflow.com/questions/4225535/how-can-i-resize-a-mongodb-capped-collection-without-losing-data)中的说明重命名新集合。

**注意**：只需确保在您切换时没有人插入/更新旧集合。如果您在 db.eval("....") 中运行该代码，它将在运行时锁定服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:31:35.040

> 但是我怎样才能有效地做到这一点？

你真的不能。*之前的回答来自 Scott Hernandez，他是 10gen（ MongoDB 背后的公司*）的支持工程师。他和地球上的任何人一样了解 MongoDB，所以如果他的答案不起作用，你需要想出一些*完全不同*的东西。

**对于完全不同的东西......**

通过代码尝试解决方案。

创建一个新的上限集合并修改您的代码以写入新集合，但同时读取新集合和旧集合。它会稍微慢一些（你必须在写之前检查两个集合）。但最终您的所有数据都将在新集合中，您可以停止从旧集合中读取。

# actionscript-3 - 使用 Adob e ActionScript 3.0 自定义 Flash Player：显示当前时间和特殊信息

> ID：11690576
> 
> 赞同：-2
> 
> 时间：2012-07-27T15:07:12.073
> 
> 标签：actionscript-3, flash

我想要的是：

*   我想在播放实时流时在 Flash 播放器上添加当前时间
*   当用户右键单击播放器时，我想打开显示小信息：假设：“这是我的小播放器......版权......等等”

如何使用 Adob​​e ActionScript 3.0 轻松完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:11:16.993

使用 AS3 很容易做到这两点。当前时间就像创建一个新的 Date 对象一样简单。我添加了一些代码以正常时钟的方式格式化日期。

```
now = new Date();
trace(now.hours > 12 ? (now.hours - 12) : now.hours) + ":" + (now.minutes < 10 ? "0" : "") + now.minutes + (now.hours > 12 ? "pm" : "am"); 
```

创建自定义右键单击上下文菜单项也非常简单。这是一个教程： [http ://www.republicofcode.com/tutorials/flash/as3contextmenu/](http://www.republicofcode.com/tutorials/flash/as3contextmenu/)

# vba - 检查一个范围是不是整个工作表？

> ID：11690580
> 
> 赞同：1
> 
> 时间：2012-07-27T15:07:23.837
> 
> 标签：vba, excel, excel-2007

我有这个函数试图检测特定单元格值何时发生变化。问题是，如果用户选择整个电子表格并按下删除，我会在检查范围只是一个单元格时出现溢出：

```
Public Sub Worksheet_Change(ByVal Target As Range)

    'Overflow can occur here if range = whole spreadsheet
    If Not IsError(Int(Target.Cells.Count)) Then 
        If Target.Cells.Count = 1 Then
            If Target.Cells.Row = 4 And Target.Cells.Column = 1 Then
                Sheets("X").Cells(5, 1).Calculate
            End If
        End If
    End If
End Sub 
```

当单个特定单元格值发生更改时，是否有更优雅的方法可以让此代码仅运行？（没有溢出，清除整个工作表时出现问题等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:24:34.893

我假设您使用的是 Excel 2007+，因为这些版本中的行数和列数急剧增加。您可能会更幸运地检查以确保行数和列数 = 1，因为这些最大值将远低于两者的乘积（即单元格数）：

```
If Target.Rows.Count = 1 And Target.Columns.Count = 1 Then 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T09:37:43.103

使用 CountLarge 而不是 Count

```
Private Sub Worksheet_SelectionChange(ByVal target As Range)
    If target.Cells.CountLarge > 1 Then Exit Sub

    'Code...
End Sub 
```

请参阅：[MSDN Range.CountLarge 属性 (Excel)](http://msdn.microsoft.com/en-us/library/office/ff196838.aspx)

# javascript - 如何在 Node.js 中向 Post 请求添加查询

> ID：11690586
> 
> 赞同：1
> 
> 时间：2012-07-27T15:07:37.933
> 
> 标签：javascript, post, request

您好我正在尝试在 Node.js 中向此 Post 请求添加查询。我不知道该怎么做。这是我正在使用的 Post 请求代码，

```
 var options = {
  host: 'ws.ispeech.org',
  port: 80,
  path: '/api/rest/1.5',
  method: 'POST',
};

var http = require('http');
var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:18:09.557

[查询字符串](http://en.wikipedia.org/wiki/Query_string)是 URL 的一部分，node.js 选项对象将其称为“路径” 。因此，您可以简单地将查询字符串添加到路径中：

```
var query = 'foo=bar&abc=123';
var options = {
  host: 'ws.ispeech.org',
  port: 80,
  path: '/api/rest/1.5' + '?' + query,
  method: 'POST',
}; 
```

请注意，还有一个[“查询字符串”模块](http://nodejs.org/docs/latest/api/querystring.html)将为您编码对象属性/值：

```
var query = querystring.stringify({foo:'bar', abc:123});
// query => "foo=bar&abc=123" 
```

# c# - Center aligining text in compact framework?

> ID：11690593
> 
> 赞同：0
> 
> 时间：2012-07-27T15:08:03.803
> 
> 标签：c#, .net, compact-framework

I'm trying to draw a custom button in compact framework, in the 'OnPaint' function I do something like this:

```
protected override void OnPaint(PaintEventArgs e)
{
    System.Drawing.Imaging.ImageAttributes a = new    
    System.Drawing.Imaging.ImageAttributes();
    e.Graphics.DrawImage(pictureBox1.Image, new Rectangle(0, 0, Width, Height),  
                         0, 0, Image.Width, Image.Height, GraphicsUnit.Pixel, a);

    Brush b = new SolidBrush(Color.Black);
    e.Graphics.DrawString(Text, Font, b, 0, 0, ( 
                     new StringFormat(StringFormatFlags.NoWrap)));
} 
```

With this code the font draws in the top left corner of the control (as expected).

My question is, how can I get it to draw centre on the control?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:19:49.703

Figured it out!

For those interested,

```
float fontHeight = e.Graphics.MeasureString("ABC", Font).Height;
e.Graphics.DrawString("ABC", Font, b, new RectangleF(0, Height / 2.0f - fontHeight/2.0f, Width, Height), format); 
```

Did it for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:14:08.897

I see you've already got your answer, so I'm not even going to test to see if this works on Mobile devices.

I'm putting it out there because it's a tool I came across once and I don't see many references to it:

```
/// <summary>
/// [static method] Generates a StringFormat object based on the ContentAlignment object
/// </summary>
/// <param name="ca">ContentAlignment value from a System.Windows.Label object</param>
/// <returns>StringFormat</returns>
private static StringFormat GetStringFormatFromContentAllignment(ContentAlignment ca) {
  StringFormat format = new StringFormat();
  switch (ca) {
    case ContentAlignment.TopCenter:
      format.Alignment = StringAlignment.Near;
      format.LineAlignment = StringAlignment.Center;
      break;
    case ContentAlignment.TopLeft:
      format.Alignment = StringAlignment.Near;
      format.LineAlignment = StringAlignment.Near;
      break;
    case ContentAlignment.TopRight:
      format.Alignment = StringAlignment.Near;
      format.LineAlignment = StringAlignment.Far;
      break;
    case ContentAlignment.MiddleCenter:
      format.Alignment = StringAlignment.Center;
      format.LineAlignment = StringAlignment.Center;
      break;
    case ContentAlignment.MiddleLeft:
      format.Alignment = StringAlignment.Center;
      format.LineAlignment = StringAlignment.Near;
      break;
    case ContentAlignment.MiddleRight:
      format.Alignment = StringAlignment.Center;
      format.LineAlignment = StringAlignment.Far;
      break;
    case ContentAlignment.BottomCenter:
      format.Alignment = StringAlignment.Far;
      format.LineAlignment = StringAlignment.Center;
      break;
    case ContentAlignment.BottomLeft:
      format.Alignment = StringAlignment.Far;
      format.LineAlignment = StringAlignment.Near;
      break;
    case ContentAlignment.BottomRight:
      format.Alignment = StringAlignment.Far;
      format.LineAlignment = StringAlignment.Far;
      break;
  }
  return format;
} 
```

# iphone - iPhone 如何解释来自遥控适配器（例如 iHelicopter 或 rc-car）的数据？

> ID：11690595
> 
> 赞同：1
> 
> 时间：2012-07-27T15:08:11.593
> 
> 标签：iphone, microphone, remote-control

网上有很多通过麦克风插孔连接的 iphone 适配器的示例（+ 应用程序可从 iTunes 商店下载），可以将 iPhone 用作遥控器。还有一些使用带有适配器和应用程序的 iphone 来控制 RC 飞机和汽车的示例。我想知道他们实际上是如何做到的？任何指向在线创意 SDK 或理解概念的资源的链接都值得赞赏。

[http://www.amazon.com/IRB-1-Control-Remote-Adapter-iPhones/dp/B003E1IQ4Y](https://rads.stackoverflow.com/amzn/click/com/B003E1IQ4Y)

我真正想做的是从 iHelicopter 更好地控制我的 iphone RC 控制飞机，比如设计一个新界面。现在有点烂 所以我想了解通过适配器传输什么样的输入/输出。

所有这些都很新，任何关于如何解决我的问题的线索。

# python - 有一个类matplotlib.axes.AxesSubplot，但是模块matplotlib.axes没有属性AxesSubplot

> ID：11690597
> 
> 赞同：30
> 
> 时间：2012-07-27T15:08:17.343
> 
> 标签：python, matplotlib

编码

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax = fig.add_subplot(111)
print type(ax) 
```

给出输出

```
<class 'matplotlib.axes.AxesSubplot'> 
```

然后代码

```
import matplotlib.axes
matplotlib.axes.AxesSubplot 
```

引发异常

```
AttributeError: 'module' object has no attribute 'AxesSubplot' 
```

总而言之，有一个类`matplotlib.axes.AxesSubplot`，但模块`matplotlib.axes`没有属性`AxesSubplot`。到底是怎么回事？

我正在使用 Matplotlib 1.1.0 和 Python 2.7.3。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-27T15:19:13.903

呵呵。那是因为*没有*类`AxesSubplot`..直到需要一个，当一个从`SubplotBase`. 这是通过一些魔术完成的`axes.py`：

```
def subplot_class_factory(axes_class=None):
    # This makes a new class that inherits from SubplotBase and the
    # given axes_class (which is assumed to be a subclass of Axes).
    # This is perhaps a little bit roundabout to make a new class on
    # the fly like this, but it means that a new Subplot class does
    # not have to be created for every type of Axes.
    if axes_class is None:
        axes_class = Axes

    new_class = _subplot_classes.get(axes_class)
    if new_class is None:
        new_class = new.classobj("%sSubplot" % (axes_class.__name__),
                                 (SubplotBase, axes_class),
                                 {'_axes_class': axes_class})
        _subplot_classes[axes_class] = new_class

    return new_class 
```

所以它是即时制作的，但它是以下的子类`SubplotBase`：

```
>>> import matplotlib.pyplot as plt
>>> fig = plt.figure()
>>> ax = fig.add_subplot(111)
>>> print type(ax)
<class 'matplotlib.axes.AxesSubplot'>
>>> b = type(ax)
>>> import matplotlib.axes
>>> issubclass(b, matplotlib.axes.SubplotBase)
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-16T18:10:12.347

另一种查看 DSM 所说内容的方法：

```
In [1]: from matplotlib import pyplot as plt                                                                                                                                                                       

In [2]: type(plt.gca()).__mro__                                                                                                                                                                                    
Out[2]: 
(matplotlib.axes._subplots.AxesSubplot,
 matplotlib.axes._subplots.SubplotBase,
 matplotlib.axes._axes.Axes,
 matplotlib.axes._base._AxesBase,
 matplotlib.artist.Artist,
 object) 
```

使用 dunder[方法解析顺序](https://www.python.org/download/releases/2.3/mro/)，您可以找到某个类的所有继承。

# ios - 在 Xcode 设置中传递 NSString

> ID：11690600
> 
> 赞同：0
> 
> 时间：2012-07-27T15:08:23.300
> 
> 标签：ios, compiler-construction, nsstring

我想知道是否可以在我的代码中检索在我的 Xcode 方案或项目设置中声明的不同 NSString ...如果客户端必须请求一些秘密 URL，这将很有用。他只需要修改方案或设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:03.533

你想要的是~~环境变量。~~预处理器定义。您可以在 Xcode 构建设置的预处理器宏中设置它们。

也看看这里：[通过 Xcode 方案添加预处理器定义](https://stackoverflow.com/questions/8319325/adding-a-preprocessor-definition-via-a-xcode-scheme)

# google-drive-api - InvalidEntryException：尝试为用户提取 Google 文档时请求 URI 无效

> ID：11690602
> 
> 赞同：2
> 
> 时间：2012-07-27T15:08:26.177
> 
> 标签：google-drive-api, google-docs, google-docs-api

尝试从我的应用程序中提取文档时，我经常收到“无效请求 URI”InvalidEntryException。我的应用程序有一个夜间进程，它为许多域上的所有用户提取文档，有些晚上它工作得很好，其他人（在同一用户上）它失败并出现此错误。这不是特定于域的，因为我的应用程序在 50 多个域上运行。以下代码产生错误：

```
String docFeedUrl = "https://docs.google.com/feeds/" + USER_NAME + "/private/full/-/mine?xoauth_requestor_id=" + ADMIN_NAME;

    DocumentListFeed feed = null;
    int retry = 5;
    while (retry > 0) {
        try {
            feed = client.getFeed(new URL(docFeedUrl), DocumentListFeed.class);
            retry=0;
            } catch(Exception e){
            // handle exception
            } 
```

我正在使用带有 Google Marketplace 密钥的 2-legged oauth 进行身份验证。有人有想法么？

# node.js - 托管 Cloud9 IDE 的 Facebook URL 问题

> ID：11690607
> 
> 赞同：1
> 
> 时间：2012-07-27T15:08:39.943
> 
> 标签：node.js, everyauth, cloud9-ide

我一直在构建/测试 Facebook 身份验证（带有everyauth 的 node.js），几周以来一切都很好。然后，C9 提供的 URL 发生了一些事情。

在 IDE 中，当我启动我的应用程序时，C9 说通过[http://myproject.c9.io](http://myproject.c9.io)进行连接。这很好，但是当我尝试在我的应用程序中向 Facebook 进行身份验证时，everyauth 会生成一个类似[http://project-live99823498923.rhcloud.com/](http://project-live99823498923.rhcloud.com/)的 URL ，并且我会收到 Facebook“URL 不属于应用程序”错误。我将我的 FB 设置更改为这个 URL，直到几天前一切都很好，现在 Facebook 登录 URL 似乎没有任何工作，我得到了可怕的“错误 191 URL 不归应用程序所有”。

有人克服这个吗？我在付费的 c9 计划中，并且已经提交了支持票，但无济于事。不确定这是 C9（最近似乎非常不稳定）、Facebook 还是对everyauth 的一些更改（但是我没有触及我的身份验证代码）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:23:22.400

我终于能够弄清楚这一点。不确定这是在 Cloud9 还是 FB 端，但我将 rhcloud.com 添加到 Facebook 应用程序设置的“App Domains”字段中，现在一切正常。我的代码没有任何变化，但似乎 C9 最近做了很多更改，所以我再次不确定是哪一方导致了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T13:11:24.167

如果您使用everyauth，您可以在那里指定您的域：

```
 everyauth.facebook.myHostname("youapp.yourname.c9.io"); 
```

希望这个解决方案对某人有用

# objective-c - 增加搜索栏表格视图单元格的高度

> ID：11690609
> 
> 赞同：1
> 
> 时间：2012-07-27T15:08:45.767
> 
> 标签：objective-c, xcode

我有一个表格视图，单元格高度为 70.im 使用搜索栏..但问题是搜索栏提供的默认表格视图的高度无法增加..是否有任何委托方法... cud u伙计们帮我下面是代码。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
if (tableView == self.tableViewFriendsList) {
return 70; 
}
if (tableView == searchDisplayController.searchResultsTableView) {
    return 70;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:40:23.400

如果正确设置了 searchResultsDelegate（通常设置为`self`），它应该可以正常工作。我刚刚用 Apple 的[TableSearch](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html)示例代码试了一下，然后添加了

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 70.;
} 
```

并且表格视图和搜索表格视图的单元格都使用新的高度。

# colors - 基于两种颜色之间的相对差异重新计算渐变颜色的公式

> ID：11690613
> 
> 赞同：1
> 
> 时间：2012-07-27T15:09:00.320
> 
> 标签：colors, gradient, color-theory

当给定任意颜色值时，我将如何使用该值和渐变偏移量 0（如下）之间的相对差异来调整剩余偏移量的颜色，以便它们与新颜色具有与原始颜色相同的相对关系?

```
<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
<LinearGradientBrush.GradientStops>
    <GradientStop Color="#FFDB0000" Offset="0" />
    <GradientStop Color="#FFB74134" Offset="0.6" />
    <GradientStop Color="#FFBA5643" Offset="0.85" />
    <GradientStop Color="#93C11E00" Offset="1" />
</LinearGradientBrush.GradientStops>
</LinearGradientBrush> 
```

我的挑战是找出用于进行相对调整的数学公式。一旦我有了这个逻辑，在我使用的特定技术（C#/.Net/WPF）中实现它应该相对容易。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:33:58.490

解决方案：

使用色相-饱和度-亮度 (HSL) 模型，我确定：

*   模板渐变的基色和每个模板停止颜色之间的相对色调差异。
*   每个模板停止颜色的绝对饱和度和亮度值。

为了生成新的渐变色标，我采用了用户指定的颜色，并通过上面计算的适当色调偏移量来改变其色调，然后将其饱和度和亮度值设置为上面确定的值。

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)提供了一个 RGB-HSL 公式。[http://blogs.msdn.com/b/cjacks/archive/2006/04/12/575476.aspx](http://blogs.msdn.com/b/cjacks/archive/2006/04/12/575476.aspx)描述了如何进行 HSL 到 RGB 的转换。

# automata - 理解形式语言中的 Σ* 和 Σ

> ID：11690614
> 
> 赞同：1
> 
> 时间：2012-07-27T15:09:01.550
> 
> 标签：automata, formal-languages, computability

如果我有`Σ={a}`，有什么话`Σ*`？

`Σ*= {a,aa,aaa,aaaa.....}`?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:11:34.157

它有你没有提到的空字符串，它还包含所有长度的 a 序列。

[您可以在http://en.wikipedia.org/wiki/Kleene_star](http://en.wikipedia.org/wiki/Kleene_star)找到更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:13:47.470

`Σ={a}`如果 你的字母表是`Σ*= {#, a,aa,aaa,aaaa.....}`所有可能的`n* a`，包括空字符串`# (phi)`。产生该序列的另一种方法是使用语法：

```
S -> S
S -> aS
S -> # 
```

`#`空字符串在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:12:32.193

`*`in`Σ*`通常表示零次*或多次*。所以`Σ*`会有空字符串，以及字母表中的任何字母组合`Σ`。

（由于您的字母表只有`a`，那么`Σ*`将有`a`s*和*空字符串的任意组合。）

如果您的字母表有更多的值`Σ = {a,b}`，那么您将拥有`a`s 和`b`s*以及*空字符串的任意组合。IE`Σ* = {phi, a, b, aa, ab, ba, bb, bab, ...(etc)}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:34:58.207

`Σ*`是一组任意长度的字符串，您可以通过连接从中提取的任意数量的符号`Σ`（包括无符号）来创建。

这是定义的一种方法`Σ*`：

设`Σ^n`为长度为 n over 的字符串集合`Σ`。

那么 Σ* = Σ^0 并集 Σ^1 并集 ...

`Σ^0 = {phi}`因为 phi 是唯一的长度字符串`0`。`Σ*`因此无论是什么，phi总是在`Σ`。

# c++ - c++ CDialog ID改变

> ID：11690615
> 
> 赞同：1
> 
> 时间：2012-07-27T15:09:01.893
> 
> 标签：c++, visual-studio-2008, cdialog

我有一个 CDialog 类，我需要它同时被其他类的总和调用。根据我的理解，这应该可以工作，但它将是对话框的同一个实例，并且我需要与调用类一样多的不同实例。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:15:09.263

同时显示在屏幕上的每个对话窗口必须有一个不同的 CDialog 派生对象与之关联。它们可能都是同一个类，具有相同的资源 ID，但它们必须是不同的对象。

# ruby-on-rails - 未捕获的类型错误：对象 [对象对象] 没有方法 'datepicker'

> ID：11690616
> 
> 赞同：1
> 
> 时间：2012-07-27T15:09:02.943
> 
> 标签：ruby-on-rails, jquery, calendar

我在本地主机上运行 rails 3 并收到错误

```
Uncaught TypeError: Object [object Object] has no method 'datepicker' 
```

在关注 railscasts [http://railscasts.com/episodes/213-calendars](http://railscasts.com/episodes/213-calendars)，并将下面的两行放入我的 application.html.erb 文件中

```
<%= stylesheet_link_tag "http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css", "application" %>
<%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js", "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js", "application" %> 
```

我实际上通过下载 jquery-ui.min.js 文件并将其放入我的 javascripts 项目文件夹中并替换其中一行来解决此错误，结果如下：

```
<%= stylesheet_link_tag "http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css", "application" %>
    <%= javascript_include_tag "application" %> 
```

我也不明白为什么我需要把我的 datepicker 函数放在我的 application.js 中：

```
$(function() {

  $('#start_date').datepicker();
  $('#end_date').datepicker();
}) 
```

并且不能只用以下几行将它放在我的 users.js.coffee 文件中：

```
$('#start_date').datepicker();
$('#end_date').datepicker(); 
```

任何人都可以解释为什么在本地添加 js 文件解决了这个错误，为什么我不能把我的 datepicker 放到我的本地咖啡文件中，或者如果我可以，你能告诉我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:48:46.147

我不是咖啡专家，但我认为你必须这样做。

```
jQuery ->
  ### your code here ### 
```

# algorithm - 将其他对象之间的对象插入到排序集合中

> ID：11690617
> 
> 赞同：2
> 
> 时间：2012-07-27T15:09:14.023
> 
> 标签：algorithm, sorting

我有一个排序的（Mongodb）对象集合：

```
{"_id": ObjectId(...), "person": "Homer", "order": 1},
{"_id": ObjectId(...), "person": "Marge", "order": 2} 
```

我想在两个对象之间添加、附加或插入另一个对象。我已经尝试过使用这样的浮点数：

```
{"_id": ObjectId(...), "person": "Homer", "order": 1},
{"_id": ObjectId(...), "person": "Bart", "order": 1.5},
{"_id": ObjectId(...), "person": "Marge", "order": 2} 
```

顺序值是`order`前一个对象和下一个对象中字段的算术平均值。只要数字看起来不一样，它就可以工作`1.9999999`。然后将其四舍五入为 2，并且该集合未排序。我可以这样使用整数：

```
{"_id": ObjectId(...), "person": "Homer", "order": 1},
{"_id": ObjectId(...), "person": "Bart", "order": 2},
{"_id": ObjectId(...), "person": "Marge", "order": 3} 
```

但这意味着需要修改其他对象，我宁愿避免这种情况。

我考虑过使用字符串和词法排序来防止顺序：

```
{"_id": ObjectId(...), "person": "Homer", "order": aa},
{"_id": ObjectId(...), "person": "Bart", "order": ab},
{"_id": ObjectId(...), "person": "Marge", "order": bb} 
```

但似乎很难实施。有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:34:31.020

我认为浮动方法最有意义。假设您从所有位置开始都是整数，在遇到精度问题之前需要进行**大量交换。**

我建议每当你改变一个项目的“顺序”时，看看它是否离它的邻居太近了。如果是，则重新分配*所有*对象的值（因此它们再次都是整数）。

如果您设置 |xy| 的限制 >= 2**(-50)，这很好，因为 python 为浮点数保留 53 个精度位，在您需要重新分配订单之前，至少需要 50 次不幸的交换。

**编辑**：我刚刚看到您没有专门询问 Python。用对您的系统有意义的任何东西替换精度。

# castle-windsor - AOP 与温莎城堡

> ID：11690622
> 
> 赞同：6
> 
> 时间：2012-07-27T15:09:33.750
> 
> 标签：castle-windsor, castle-dynamicproxy, aop, windsor-3.0

我想要实现的是使用 Castle Windsor 拦截器通过属性实现的 AOP。我取得了一些成功，但在类级别与方法级别的方面存在问题。

*   如果我只使用类级别的属性，所有的方法都会被拦截。
*   如果我只使用方法级别的属性，这些方法将被拦截。
*   如果我添加一个类级别的属性和一个方法级别的属性，这两种拦截都会发生在被赋予属性的方法上，但那些没有被赋予属性的方法不会被拦截。

所以给定这个组件：

```
public interface IMyComponent
{
    void ShouldBeInterceptedByStopWatch_AND_ExceptionLogger();
    void ShouldBeInterceptedByExceptionLogger();
}

[LogExceptionAspect]
public class MyComponent : IMyComponent
{
    [StopwatchAspect]
    public void ShouldBeInterceptedByStopWatch_AND_ExceptionLogger()
    {
        for (var i = 0; i < 2; i++) Thread.Sleep(1000);
    }

    public void ShouldBeInterceptedByExceptionLogger()
    {
        throw new NotImplementedException();
    }
} 
```

我希望记录器方面能够拦截`ShouldBeInterceptedByExceptionLogger()`，但除非我从其他方法中删除秒表方面，或者从类中删除记录器方面并将其添加到`ShouldBeInterceptedByExceptionLogger()`. 但是`ShouldBeInterceptedByStopWatch_AND_ExceptionLogger()`两者都拦截了。

整个示例应用程序可以在 - [https://bitbucket.org/jayala/juggernet-aop找到](https://bitbucket.org/jayala/juggernet-aop)

基本上它所做的是使用一个工具来注册一个`IContributeComponentModelConstruction`，如果它在类级别找到一个方面，它将添加一个拦截器，或者如果它在方法级别找到一个方面，则添加一个拦截器+方法挂钩。

这就是我引导容器的方式：

```
 var container = new WindsorContainer()
            .AddFacility<LogExceptionAspectFacility>()
            .AddFacility<StopwatchAspectFacility>()
            .Register(Component
                .For<IMyComponent>()
                .ImplementedBy<MyComponent>()
                .LifeStyle.Transient); 
```

这些设施正在做的是注册一个拦截器和一个像这样的模型贡献者

```
public abstract class BaseAspectFacility<TAspectAttribute, TAspectInterceptor> : AbstractFacility
    where TAspectAttribute : Attribute
    where TAspectInterceptor : IInterceptor
{
    protected override void Init()
    {
        var interceptorName = Guid.NewGuid().ToString();
        Kernel.Register(Component.For<IInterceptor>()
                                 .Named(interceptorName)
                                 .ImplementedBy<TAspectInterceptor>()
                                 .LifeStyle.Singleton);
        var contributor = new ContributeAspectToModel<TAspectAttribute>(interceptorName);
        Kernel.ComponentModelBuilder.AddContributor(contributor);
    }
} 
```

# vb.net - 使用自己的实体框架的插件 dll

> ID：11690625
> 
> 赞同：0
> 
> 时间：2012-07-27T15:09:41.887
> 
> 标签：vb.net, entity-framework

我编写了一个（可能不必要地）分层的应用程序。有两个独立的应用程序，一个是 UI，一个是 Windows 服务；两者都有在共享项目中驱动应用程序的实际代码（因此当我更新应用程序的运行方式时，我不必同时更新 UI 和服务中的代码）。除了共享的操作代码，共享项目还包含基类和一个接口，该接口定义了其他插件模块（类项目）的API，可以添加、暂停、立即运行等。UI/服务所做的只是告诉每个插件运行，然后通过电子邮件发送每个插件生成的结果。

除了共享项目中的主要数据模型之外，我还希望能够在这些插件项目中生成单独的数据模型。这样做的原因是，我不想每次为插件添加新表时都必须重新安装我的服务；通过将数据模型保留在插件中，我可以刷新插件并让服务或 UI 保持运行。我无法通过“在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。” 错误。我已经将插件的连接字符串从它的 app.config 文件复制到共享项目的 app.config 文件和 UI 的 app.config 文件。我什至将 .edmx 文件从插件复制到共享项目和 UI 项目。然而我' 我仍然想出这个错误。我想知道它是否与连接字符串中引用的 .csdl、ssdl 和 .msl 文件有关（例如。`res://*/ATS.csdl`）。我在拥有 .edmx 文件的所有三个项目的目录中都看到了这些文件`\obj\Debug\edmxResourcesToEmbed`，但是尽管我知道要复制的每条信息都在我想复制的任何地方，但我仍然无法使用我的插件连接到数据库. 有任何想法吗？

**ETA**：我发现如果我从 app.config 文件中逐字复制连接字符串并在创建新实体对象时指定它，它会成功创建连接并能够查询数据库。所以似乎某个地方的某些 app.config 没有连接字符串，但所有应该需要它的地方都有它。

**ETA 2**：我打开了符号调试并挖掘了`System.Data.EntityClient.EntityConnection`它失败的确切部分。它正在查看`ConfigurationManager.ConnectionStrings`集合，但`_items`成员（我希望它包含我的`app.config`文件中列出的所有连接字符串）仅包含 SQLEXPRESS 数据库的“LocalSqlServer”条目。所以当然，当它尝试在我指定的名称下查找连接字符串时，它不能，因为它正在读取的任何配置文件都不包含它。仍在寻找一种方法来使这项工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:32:26.103

我想我解决了这个问题，虽然这是一个笨拙的解决方案，我很想看看是否可以更优雅地完成。然而，多亏了 Kamyar 的提示，我最终做了以下事情：

在我的符号调试中，我开始在课堂上四处寻找`EntityConnection`，我注意到 .NET 并没有像我认为的那样从我的配置文件中提取连接字符串。Kamyar 建议为插件创建一个`.dll.config`文件，我这样做了，但它仍然没有工作......但只是因为实体框架正在寻找主机可执行文件的配置文件，而不是插件 dll。因此，我将主机应用程序的`app.config`文件复制到加载我的独立插件的目录中，将其命名为`[Application].exe.config`，然后它立即将其拾取。

我想知道是否有更好的方法，在某个地方我可以指定一个我的所有插件都应该引用的配置文件，而不是主机配置文件的副本，但我很高兴不必指定连接字符串在我的代码中。

# sql - 从最早日期选择行

> ID：11690627
> 
> 赞同：0
> 
> 时间：2012-07-27T15:09:44.927
> 
> 标签：sql, sql-server, sql-server-2008

我需要所有产品的列表，其中包含 2 列，其中包含产品首次订购的日期和该产品的订购数量。

结构：
tbl_product
- productID
- productName

tbl_orderProduct
- orderProductID
- orderID
- productID
- 数量

tbl_order
- orderID
- orderedDate

```
SELECT p.productName, firstOrder.orderedDate FROM tbl_product p
LEFT JOIN(
    SELECT op.productID, MIN(o.orderedDate) AS orderedDate FROM tbl_orderProduct op
    JOIN tbl_order o ON op.orderID = o.orderID
    GROUP BY op.productID
)
firstOrder ON firstOrder.productID = p.productID 
```

到目前为止，我第一次尝试检索日期有效，但我无法弄清楚如何获取数量，因为我必须获取订单，然后返回 tbl_orderProduct 获取数量。
我不想通过 firstOrder.ordererdDate 通过 select 获取订单，因为它有可能不是唯一的。

此外，我无法通过“左连接”中的选择传递 orderID，因为我还必须将其添加到“分组依据”中，并且它会为包含该产品的每个订单返回一行。所以我必须以某种方式从第一个订单中检索 orderID 或 orderProductID。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:19:46.987

假设您至少使用 SQL-Server2005，您可以使用带有[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.105%29.aspx)函数的 common-table-expression：

```
WITH CTE AS
(
   SELECT p.productName, o.orderedDate, quantity
   , RN = ROW_NUMBER() OVER ( PARTITION BY p.productID ORDER BY o.orderedDate )
   FROM tbl_product p 
   INNER JOIN tbl_orderProduct op ON p.productID=op.productID
   INNER JOIN tbl_order o ON op.orderID=o.orderID
)
SELECT * FROM CTE WHERE RN = 1 
```

# javascript - 使用 JSTween 的动画冒泡问题

> ID：11690631
> 
> 赞同：0
> 
> 时间：2012-07-27T15:09:58.293
> 
> 标签：javascript, jstween

我对 js 的东西有点陌生，但我有一个让我发疯的问题。我使用 jstween 创建了一个简单的动画。我的问题是当我单击启动动画的按钮时，动画效果很好。如果您继续按下按钮，尽管它会重新启动动画，这就是我想要阻止的。

我试过了`stop()`，`stop(true)`但没有用。下面是我的代码：

```
$('.mybtn1').click(function(){

    $('.box1').tween({
    left:{
      start: 0,
      stop: 400,
      time: 0,
      duration: 1,
      units: 'px',
      effect: 'easeInOut',

    }
    });

    $.play();
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:37:16.717

`0`每次运行函数时，您都会传入一个静态值。如果元素已经移动，那么它会跳回到`left: 0`开始补间之前。

运行函数时尝试传入当前的左偏移量。

```
$(".mybtn1").click( function(){

    el = $('.box1');

    el.tween({
        left:{
            start: function() { return el.offset.left; },
            stop: 400,
            time: 0,
            duration: 1,
            units: 'px',
            effect: 'easeInOut',
        }
    });

    $.play();
}); 
```

您可能需要弄乱这里的语法。我不确定是否`offset.left`返回您需要的值（可能是`el.style.left`什么）。

# javascript - 将跨度值存储到 javascript 变量中

> ID：11690632
> 
> 赞同：4
> 
> 时间：2012-07-27T15:10:05.097
> 
> 标签：javascript, jquery, html, css

我正在尝试编写将通过跨度、获取其值并将其存储在可用于执行算术的变量中的 javascript。

```
<span id ="Weekly" class="ServerData" data-tag="WeeklyCarSales">**30**</span>
<span id ="Monthly" class="ServerData" data-tag="DailyCarSales">**6**</span> 
```

关于以上两行，我的功能如下。在当前的设置中，我没有得到任何结果。

```
function divide(n1, n2) {
    ans = n1 / n2;
    document.write(" " + ans + "<BR>");
    return ans;
}
var a = $('#WeeklyCarSales').ServerData;
var b = $('#DailyCarSales').ServerData;
divide(a, b); 
```

我应该得到“5”的答案但一无所获。如果我将整数/浮点值强制放入变量中，我知道实际的算术是有效的。我似乎一直无法锁定“30”和“6”，它们是跨度值。关于如何获取这两个跨度值的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T15:15:23.770

这应该可以解决问题...

```
function divide(n1, n2) {
    var ans = n1 / n2;
    document.write(" " + ans + "<BR>");
    return ans;
}

var a = parseInt($("#Weekly.ServerData").text().replace(/\*/gmi, ""), 10)
  , b = parseInt($("#Monthly.ServerData").text().replace(/\*/gmi, ""), 10);

divide(a, b); 
```

​​这里是工作[JSFiddle](http://jsfiddle.net/dKXep/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:15:22.087

尝试

```
function divide(n1, n2) {
    ans = n1 / n2;
    document.write(" " + ans + "<BR>");
    return ans;
} 
var a  = $('#Weekly').html().replace('*','');
var b = $('#Monthly').html().replace('*','');
divide(a, b); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:17:01.247

这里有很多问题。首先，在 jQuery 中，('#SOMETHING') 构造通过 ID 引用 DOM 元素。因此，您需要使用 $('#Weekly') 和 $('#Monthly') 来引用 span 元素。

其次，应用于标签的 ServerData 类值不是元素上的可用属性，因此尝试引用 $('#Monthly').ServerData 不会为您做任何事情。

您真正要查找的是您将像这样访问的节点的 HTML 内容

```
var a = parseInt($('#Weekly').html()); 
```

我不确定这些星号是否真的存在。如果它们确实存在，则需要像这样删除它们：

```
var a = parseInt($('#Weekly').html().replace('*', '')); 
```

# java - 如何从 Windows 7 64 位上的 java 应用程序运行 msg.exe（或替代方法）？

> ID：11690634
> 
> 赞同：1
> 
> 时间：2012-07-27T15:10:12.057
> 
> 标签：java, windows-7

以下行在我的 Windows XP 上的 java 应用程序中运行良好：

```
Process p = Runtime.getRuntime().exec("msg.exe * this is a test"); 
```

当它在 Windows 7（64 位）上执行时，我收到以下错误：

无法运行程序“msg.exe”：CreateProcess error=2，系统找不到指定的文件

我尝试输入 .exe 的完整路径，但我得到了同样的错误：

```
Process p = Runtime.getRuntime().exec("c:\\Windows\\System32\\msg.exe * this is a test"); 
```

使用 ProcessBuilder 而不是 Runtime 会产生相同的错误：

```
Process p = new ProcessBuilder("msg.exe * this is a test").start(); 
```

我试图通过暂时让每个人完全控制 msg.exe 来排除权限问题，但 Windows 不允许我 - 即使我以管理员身份登录，这些选项也是灰色的。

所以我确认了java进程的用户对msg.exe有读取和执行权限。

我能够从 Windows 7 机器的命令行成功运行命令（作为 java 进程的同一用户）。

在这篇文章的注释中：[C# cannot find file specified](https://stackoverflow.com/questions/4680045/c-sharp-cannot-find-file-specified)，有人提到类似的问题，Windows 64-bit machine not found msg.exe from a C# program，所以也许在 Windows 配置方面我需要一些东西做？

有没有办法让 java 应用程序在 Windows 7 上发送网络消息？还是发送有效的网络消息的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:13:48.307

您可能安装了 32 位 Java，不允许在 Windows 7 上启动 64 位程序。如果您安装了 32 位 Java，请升级到 64 位 Java，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:21:49.323

请试试：`new ProcessBuilder("msg.exe", "* test").start()`

# jsf - JSF 更新复合组件（Primefaces）

> ID：11690635
> 
> 赞同：3
> 
> 时间：2012-07-27T15:10:22.393
> 
> 标签：jsf, primefaces, composite-component

我有以下 UI Primefaces 片段：

```
<pou:growl id="growl" 
               redisplay="false"
               showDetail="false" 
               sticky="false" /> 
```

当我尝试更新此项目时，例如这样：

```
<pou:commandButton value="Update" 
                   update=":growl"/> 
```

一切正常。

然而，当我将咆哮移动到复合组件并尝试调用它时（即像这样）：

```
<ez:growl/> 
```

我收到一条错误消息，上面写着：

```
javax.faces.FacesException: Cannot find component with identifier ":growl" referenced from "j_idt84:j_idt85:testForm:j_idt111". 
```

我的问题是为什么要添加所有这些自动生成的名称以及如何控制它们以便我可以实际访问要更新的组件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T15:15:49.163

这是因为复合组件本质上是从[`UINamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html)（如 as `<h:form>`、`<h:dataTable>`等）扩展而来的，因此在其子组件的客户端 ID 前面加上了自己的 ID。

为了实现您的特定功能需求，首先给您的复合组件一个固定的 ID：

```
<ez:growl id="growl"/> 
```

然后将`<p:growl>`复合组件的实现嵌入到一个普通的 HTML 容器元素中，例如`<div>`或`<span>`使用复合组件的客户端 ID 作为元素 ID：

```
<cc:implementation>
    <span id="#{cc.clientId}">
        <p:growl />
    </span>
</cc:implementation> 
```

现在您可以使用`update=":growl"`通常的方式。

# playframework-2.0 - 如何仅更新/保存更改的字段

> ID：11690638
> 
> 赞同：4
> 
> 时间：2012-07-27T15:10:26.690
> 
> 标签：playframework-2.0, ebean

如何使用 Play 仅将一组特定字段更新到数据库？目前我有一个`User`包含特定字段的模型，我们称之为`isAdministrator`：

```
private boolean isAdministrator; 
```

我有访问器方法：

```
/**
 * @return the isAdministrator
 */
public boolean isAdministrator() {
    return isAdministrator;
}

/**
 * @param isAdministrator
 *            the isAdministrator to set
 */
public void setAdministrator(boolean isAdministrator) {
    this.isAdministrator = isAdministrator;
} 
```

但是，当我通过`isAdministrator`不包含的表单更改用户名时，Play 会重置我的 User 对象并`0`为该用户设置值？

那么，如何仅更新已更改的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:15:40.323

我不直接回答您的问题，但不是有一个布尔值指示您的用户是否是管理员，而是创建一个`Admin`从用户继承的类。

```
public class Admin extends User {
....
} 
```

这是[SOLID的“](http://en.wikipedia.org/wiki/Solid_%28object-oriented_design%29) [S](http://en.wikipedia.org/wiki/Single_responsibility_principle) ” ;-)

**编辑：**

在控制器中，您可以在使用表单值更新之前从数据库中加载旧值：

```
...
User userFromDB = User.findById(anId);
User userFromForm = userForm.get();

// set previous value
userFromForm.setArchived(userFromDB.getArchived());

User.update(userFromForm);
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:30:09.877

除了**尼科的**回答我只能补充，你不需要`Form`在每种情况下都使用类。有时只需从请求中获取数据并手动更新您的对象就足够了，这在您有详细的中间保存级别时尤其适用于 ajax 调用（请参阅[DynamicForm](https://stackoverflow.com/a/11618359/1066240)的使用示例，它可以更短，[您也可以自己验证它](https://stackoverflow.com/a/11359506/1066240)：

```
public static Result updateName(Integer id){
    User user = User.find.byId(id);
    user.name = form().bindFromRequest().get("name");
    user.update(id);
    return ok();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-29T07:13:25.943

您可以指定要更新的字段。假设您要更新*名称*，那么您将这样做：

```
Ebean.update(user, new HashSet<String>(Arrays.asList("name"))); 
```

# c++ - Arduino 内存泄漏（SD 卡 + 字符串）

> ID：11690647
> 
> 赞同：3
> 
> 时间：2012-07-27T15:10:52.577
> 
> 标签：c++, memory-leaks, arduino

我正在尝试将字符串写入[SD 卡](http://en.wikipedia.org/wiki/Secure_Digital)（当服务器连接不可用时触发）。随后它将传感器值记录到 SD 卡（在常规`loop()`功能内），一旦与服务器的连接可用，它就会通过 UDP 将其作为数据包发送。

一旦进入此 SD 卡写入部分，我似乎遇到了一些相当大的内存泄漏，这最终导致 Arduino 耗尽可用内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:13:52.130

好的，我读了那个代码——如果你不为**每次**打开的情况调用 close()，你就会有泄漏——只有一个文件对象（为什么我不知道）。

这是有趣的代码：

```
void File::close() {
  if (_file) {
    _file->close();
    free(_file); 
    _file = 0;

    /* for debugging file open/close leaks
    nfilecount--;
    Serial.print("Deleted ");
    Serial.println(nfilecount, DEC);
    */
  }
} 
```

他们似乎有一些很好的代码可以在那里找到泄漏......也许你应该尝试一下。

也只需将最后的代码更改为如下所示：

```
 dataFile = SD.open("datalog.txt", FILE_WRITE);
        // if the file is available, write to it:
        if (SD.open("datalog.txt", FILE_WRITE)) 
        {
              dataFile.println(dataString);
              // print to the serial port too:
              Serial.println("data logged to SD");
        }
        // if the file isn't open, pop up an error:
        else
        {
              Serial.println("File Error datalog.txt");
        } 
        dataFile.close(); // always close after an open. 
```

* * *

好吧，您没有向我们展示 SD 对象的代码，所以这是一个谜，但我希望您需要调用 dispose 某些东西……也许是 dataFile？

# c# - jquery switch 点击类图片更改

> ID：11690657
> 
> 赞同：0
> 
> 时间：2012-07-27T15:11:28.480
> 
> 标签：c#, javascript, jquery, asp.net

```
<tab>
<div class="switchLeft"></div>

.switchLeft
{

}

.switchRight
{

}

js code

 $("div.switchLeft").click(function () {

          if (className == "switchRight") {
            $(this).removeClass("switchRight");
            $(this).addClass("switchLeft");

        }

        else if (className == "switchLeft") {
            $(this).removeClass("switchRight");
            $(this).addClass("switchRight");
            break;

        }

    }); 
```

但如果在此之后，switch 再次工作并且 switchRight 移除谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:13:42.560

你有

```
 $(this).removeClass("switchRight");
 $(this).addClass("switchRight"); 
```

我怀疑你想要

```
 $(this).removeClass("switchLeft");
 $(this).addClass("switchRight"); 
```

否则你只是添加和删除同一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:17:22.230

要访问您可以使用的课程，`this.className` 或者应该是`$(this).attr('class')`

```
if($(this).attr('class') == "switchRight") {

    $(this).removeClass("switchRight");
    $(this).addClass("switchLeft");

}

else if ($(this).attr('class') == "switchLeft") {
    $(this).removeClass("switchLeft");
    $(this).addClass("switchRight");
    break;

} 
```

使用 this.className

```
if(this.className == "switchRight") {

    $(this).removeClass("switchRight");
    $(this).addClass("switchLeft");

}

else if (this.className == "switchLeft") {
    $(this).removeClass("switchLeft");
    $(this).addClass("switchRight");
    break;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:43:02.440

尝试

```
$("div").click(function () {
    $(this).toggleClass("switchLeft switchRight");
}); 
```

[http://jsfiddle.net/S4WG3/](http://jsfiddle.net/S4WG3/)

**注意：**您的代码不是每次都切换的原因之一是您的原始选择器。 `$("div.switchLeft")`只会拉`div`s with class `switchLeft`，所以`div`s with`switchRight`永远不会切换回来。

# templates - 酒店门户 - 旅游指南 - Joomla 模板

> ID：11690659
> 
> 赞同：0
> 
> 时间：2012-07-27T15:11:33.083
> 
> 标签：templates, joomla, portal

您可以建议我为我所在地区建立酒店门户和旅游指南的任何好的 joomla 模板吗？

我找到了 ja_travel，但如果有人知道更合适的，请告诉我。

除了joomla，wp或drupal还有其他好的模板吗？

任何建议将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:20:20.120

我会为 Joomla 推荐来自不同公司的多个模板。

在商业方面，我会推荐来自[Yootheme](http://yootheme.com)或[Rockettheme](http://rockettheme.com)的任何东西。他们的一些模板可能相当重，但它们非常专业，绝对物有所值。如果您对编辑感兴趣，Yootheme 也有他们的主主题可供免费下载。您在其网站上看到的所有模板也可用于 wordpress。

至于非商业模板，您将不得不四处寻找一些好的模板。大多数免费模板都非常基本且乏味。我遇到了一些我喜欢的，例如[JA Elastica](http://www.joomlart.com/joomla/templates/ja-elastica)和[YooGrids](http://www.youjoomla.com/yougrids-free-joomla-template-yjsg-powered.html)。两者都包含自己的框架，使它们更加灵活。

我所知道的酒店没有特定的扩展名，但是 JED 上有一个房地产类别。我很确定这些扩展可以用于酒店。 [http://extensions.joomla.org/extensions/vertical-markets/real-estate](http://extensions.joomla.org/extensions/vertical-markets/real-estate)

Joomla 2.5 的列表中有 3 个是免费的：

[房地产经理基础](http://extensions.joomla.org/extensions/vertical-markets/real-estate/8529)

[日本电子工业协会](http://extensions.joomla.org/extensions/vertical-markets/real-estate/6755)

[FW地产灯](http://extensions.joomla.org/extensions/vertical-markets/real-estate/13376)

# android - 我可以使用标签操作栏切换活动吗？

> ID：11690662
> 
> 赞同：-1
> 
> 时间：2012-07-27T15:11:39.737
> 
> 标签：android, android-fragments, android-actionbar

我有一些不同布局的不同活动，我在选项卡模式下使用操作栏。因此，当我在操作栏中选择一个选项卡时，我会从一个活动传递到另一个活动。

我能怎么做？？你有什么建议吗？？

我想作为：

在`ActionBar.TabListener` 切换标签时，我调用： `startActivity(new Intent(context, theNewActivity);`

可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:19:01.133

> 我能怎么做？

恕我直言，在选项卡中进行活动的旧模型从来都不是一个好主意，现在已被弃用。

要么将这些活动更改为片段（并使用操作栏中的选项卡在它们之间切换），要么摆脱选项卡并选择其他不涉及选项卡的导航模型。

> 在 ActionBar.TabListener 中，当我切换选项卡时，我调用： startActivity(new Intent(context, theNewActivity);

如果您认为这会在选项卡`theNewActivity` *内*打开，不，那是行不通的。您当然可以`startActivity()`根据单击的选项卡进行调用，但 UX 可能不是您想要的，甚至更不可能是用户想要的。

# python - sweetpie 从非 pk 字段访问数据

> ID：11690663
> 
> 赞同：3
> 
> 时间：2012-07-27T15:11:41.257
> 
> 标签：python, django, web-services, resources, tastypie

我尝试了[Tastypie Cookbook](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-non-pk-data-for-your-urls)中的这个例子。

通过添加此代码以从用户名而不是 id 访问用户资源。

```
 #myapp/api/resources.py
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()

    def prepend_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/(?P<username>[\w\d_.-]+)/$" % self._meta.resource_name, self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
        ] 
```

这是我的网址文件，

```
v1_api = Api(api_name='v1')
v1_api.register(userResource()) 
```

这是所有可用的 URL，

```
^api/ ^(?P<api_name>v1)/ ^(?P<resource_name>users)/$ [name='api_dispatch_list']
^api/ ^(?P<api_name>v1)/ ^(?P<resource_name>users)/schema/$ [name='api_get_schema']
^api/ ^(?P<api_name>v1)/ ^(?P<resource_name>users)/set/(?P<pk_list>\w[\w/;-]*)/$ [name='api_get_multiple']
^api/ ^(?P<api_name>v1)/ ^(?P<resource_name>users)/(?P<pk>\w[\w/-]*)/$ [name='api_dispatch_detail'] 
```

我在寻找什么而不是调用这个 url

[http://myDomain.com:8000/api/v1/users/1/?format=json](http://myDomain.com:8000/api/v1/users/1/?format=json)

我想根据用户名打电话

[http://myDomain.com:8000/api/v1/users/myUserName/?format=json](http://myDomain.com:8000/api/v1/users/myUserName/?format=json)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:55:24.293

你用的是哪个版本的美味派？0.9.11 使用`override_urls`而 0.9.12 (beta) 引入`prepend_urls`，并且这两个版本的食谱不同。您可能仍在使用 0.9.11。

见： [http ://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#using-non-pk-data-for-your-urls](http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#using-non-pk-data-for-your-urls)

# asp.net - 无法让 Web API 在 VS 2010 或 2012 中工作

> ID：11690664
> 
> 赞同：5
> 
> 时间：2012-07-27T15:11:47.137
> 
> 标签：asp.net, json, asp.net-web-api

我有一台运行 VS 2012 和 VS2010 RC 的机器。我正在尝试按照[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)上的代码试用 Web API . 我尝试在网上关注一些关于如何解决问题的不同链接，但仍然无法让 Web API 使用 IIS Express/Cassini 为我的 Windows 7 x64 机器上的主机工作。目前我收到“找不到方法：'Void Newtonsoft.Json.Serialization.DefaultContractResolver.set_IgnoreSerializableAttribute(Boolean)'。” 尝试查看应该是什么产品列表时出错。

我完全按照网页的内容进行操作，没有手动添加任何内容。[我确实为网络堆栈http://www.myget.org/F/aspnetwebstacknightly/](http://www.myget.org/F/aspnetwebstacknightly/)设置了夜间存储库，但不知道这是否导致了问题。如果有帮助，这里是程序上 NuGet 的 Get-Package 的转储。

```
PM> Get-Package

Id                             Version              Description/Release Notes                                                                                                                                                                                      
--                             -------              -------------------------                                                                                                                                                                                      
EntityFramework                5.0.0-rc             Entity Framework is Microsoft's recommended data access technology for new applications.                                                                                                                       
jQuery                         1.6.2                jQuery is a new kind of JavaScript Library....                                                                                                                                                                 
jQuery.UI.Combined             1.8.11               jQuery UI is an open source library of interface components — interactions, full-featured widgets, and animation effects — based on the stellar jQuery javascript library . Each component is built accordin...
jQuery.Validation              1.8.1                This jQuery plugin makes simple clientside form validation trivial, while offering lots of option for customization. That makes a good choice if you’re building something new from scratch, but also when y...
knockoutjs                     2.0.0                A JavaScript MVVM library to help you create rich, dynamic user interfaces with clean maintainable code                                                                                                        
Microsoft.AspNet.Mvc           4.0.20505.0          This package contains the runtime assemblies for ASP.NET MVC. ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that enables a clean separation of concerns and that gives you ...
Microsoft.AspNet.Providers.... 1.0                  ASP.NET Universal Providers add provider support in ASP.NET 4 for all editions of SQL Server 2005 and later and to SQL Azure. If you use these providers to develop your application, the application will b...
Microsoft.AspNet.Providers.... 1.0                  ASP.NET Universal Providers add provider support in ASP.NET 4 for all editions of SQL Server 2005 and later and to SQL Azure. If you use these providers to develop your application, the application will b...
Microsoft.AspNet.Razor         2.0.20505.0          This package contains the runtime assemblies for ASP.NET Web Pages. ASP.NET Web Pages and the new Razor syntax provide a fast, terse, clean and lightweight way to combine server code with HTML to create d...
Microsoft.AspNet.Web.Optimi... 1.0.0-beta2          ASP.NET Optimization introduces a way to bundle and optimize css/js files.                                                                                                                                     
Microsoft.AspNet.WebApi        4.0.20505.0          This package contains everything you need to host ASP.NET Web API on IIS. ASP.NET Web API is a framework that makes it easy to build HTTP services that reach a broad range of clients, including browsers a...
Microsoft.AspNet.WebApi.Client 4.0.20505.0          This package adds support for formatting and content negotiation to System.Net.Http. It includes support for JSON, XML, and form URL encoded data.                                                             
Microsoft.AspNet.WebApi.Core   4.0.20505.0          This package contains the core runtime assemblies for ASP.NET Web API. This package is used by hosts of the ASP.NET Web API runtime. To host a Web API in IIS use the Microsoft.AspNet.WebApi.WebHost packag...
Microsoft.AspNet.WebApi.Web... 4.0.20505.0          This package contains everything you need to host ASP.NET Web API on IIS. ASP.NET Web API is a framework that makes it easy to build HTTP services that reach a broad range of clients, including browsers a...
Microsoft.AspNet.WebPages      2.0.20505.0          This package contains core runtime assemblies shared between ASP.NET MVC and ASP.NET Web Pages.                                                                                                                
Microsoft.jQuery.Unobtrusiv... 2.0.20505.0          jQuery plugin that lets you unobtrusively set up jQuery Ajax.                                                                                                                                                  
Microsoft.jQuery.Unobtrusiv... 2.0.20505.0          jQuery plugin that unobtrusively sets up jQuery.Validation.                                                                                                                                                    
Microsoft.Net.Http             2.0.20505.0          This package provides a programming interface for modern HTTP applications. This package includes HttpClient for sending requests over HTTP, as well as HttpRequestMessage and HttpResponseMessage for proce...
Microsoft.Web.Infrastructure   1.0.0.0              This package contains the Microsoft.Web.Infrastructure assembly that lets you dynamically register HTTP modules at run time.                                                                                   
Modernizr                      2.0.6                Modernizr adds classes to the <html> element which allow you to target specific browser functionality in your stylesheet. You don't actually need to write any Javascript to use it....                        
Newtonsoft.Json                4.5.1                Json.NET is a popular high-performance JSON framework for .NET                                                                                                                                                 
WebGrease                      1.0.0                Web Grease is a suite of tools for optimizing javascript, css files and images. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:46:29.927

我打开了 NuGet 的“包含预发布”，并将所有包更新为最新的夜间版本。它解决了 VS 2012 中的问题。虽然不知道 VS2010。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:57:48.427

其实，是。这种情况下的问题与包有关，即System.Web.Http.WebHost.dll 使用的[http://json.codeplex.com/](http://json.codeplex.com/) (Newtonsoft.Json.dll) 包。

几个月前（夏天之前），我在本地安装了 MVC 4，但在我的托管服务器上 - 更晚了。所以，当我在本地工作时，一切都运行良好......甚至在服务器上运行良好，因为我只是从 svn 更新二进制文件。但是，最近我需要在服务器上调试一些东西并且“找不到方法：'Void Newtonsoft.Json.Serialization”。问题出现了。因此，经过一些简短的探索，我发现了上述问题的原因。

但即使使用 4（不是 4.5）.NET Framework 版本，一切都对我有用。那么，我是否必须在我的服务器上安装 4.5 只是为了一些不使用它的功能的小项目？！！因此，我刚刚从本地 PC 替换了 C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\System.Web.Http.WebHost.dll 以便于编译。在那种情况下，我既没有将 .NET 更新到 4.5，也没有更新 json。但是如果你安装了 4.5，你只需要更新 Newtonsoft.Json.dll。

*无论如何，这在“现代技术”世纪和 .NET 开发的巨大进步中确实是非常奇怪的错误消息（它宁愿提醒一些来自 c/c++ 世界的链接器消息）。可能，这完全是关于免费（和开源）软件的感觉，当开发人员没有太多时间（甚至没有时间）来支持这些功能时。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T07:21:55.863

我使用VS 2010，我更新了最新版本的Json.NET，问题解决了

# vb.net - EWS 按描述查找文件夹

> ID：11690667
> 
> 赞同：0
> 
> 时间：2012-07-27T15:11:53.223
> 
> 标签：vb.net, exchangewebservices

我在 VB.NET 中工作，试图附加到用户帐户中在描述字段中有特定单词的文件夹。在这种特殊情况下，此文件夹将始终是日历文件夹，但并不总是用户的主日历。

使用搜索过滤器应该足够简单，但要使用它，我需要正确的扩展属性定义。据我所知，这应该是 PR_COMMENT_W (0x3004001F)，但我似乎无法弄清楚如何使其适应新的 ExtendedPropertyDefinition 类。就像是：

```
Dim TagComment As ExtendedPropertyDefinition = New ExtendedPropertyDefinition(0x3004001F, MapiPropertyType.String)
Dim view As New FolderView(10)
view.PropertySet = New PropertySet(BasePropertySet.IdOnly)
view.PropertySet.Add(TagComment)
Dim searchFilter As SearchFilter = New SearchFilter.ContainsSubstring(TagComment, "WordToFind")
Dim results As FindFoldersResults = Service.FindFolders(New FolderId(WellKnownFolderName.Root, New Mailbox("EmailAddress")), searchFilter, view) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:09:38.577

```
Dim FolderDescription As ExtendedPropertyDefinition = New ExtendedPropertyDefinition(12292, MapiPropertyType.String) 
```

那行得通=）

# jquery - Python/Jquery/Ajax 级联下拉菜单

> ID：11690668
> 
> 赞同：1
> 
> 时间：2012-07-27T15:11:54.330
> 
> 标签：jquery, cherrypy

我正在尝试使用 python/jquery/ajax 设置级联下拉列表。

第一个下拉菜单是在 html 代码中手动设置的。

第二个/第三个下拉菜单取决于之前的选择。

当我选择第一个下拉列表时，我可以通过 ajax 调用用数据填充第二个下拉列表。问题在于第二个-。第三个下拉菜单。

呼叫根本不是来自客户端。html 代码生成似乎是正确的，因为 firebug 给出了正确的输出。我在想的是客户端没有被刷新以使新的动态内容能够与已经加载的 jquery 一起使用。

我没有添加我的 python 代码，因为第二个 -> 下拉调用甚至没有离开客户端，所以我认为这不是问题。

如果需要，会添加它。

我一直在寻找示例，并看到了一些类似的结果，但没有任何成果

任何帮助表示赞赏。

* * *

## jQuery：

```
$(document).ready(function(){

        $(".dynamic-select").change(function(){
            var url_params = '?' + $(this).attr('name') + '=' + $(this).val() + '&sid=' + $(this).attr('id');
            $.getJSON('ajax' + url_params,function(data) {

                $("#"+ data.element_id).replaceWith(data.data);

    });

        });
    }); 
```

* * *

## html片段

```
 <select class="dynamic-select" id="test1" name="test1">
                <option value="#">Select</option>
                <option value="EU">Europe</option>
                <option value="NA">North America</option>
                <option value="AS">Asia</option>
            </select>

            <select class="dynamic-select" id="test2" name="test2">
                <option value="#">Select First Dropdown</option>
            </select>

            <select class="dynamic-select" id="test3" name="test3">
                <option value="#">Select Second Dropdown</option>
            </select> 
```

* * *

## 从第一个下拉列表中选择 EU 后的 firebug html 输出

```
<select id="test1" class="dynamic-select" name="test1">
<option value="#">Select</option>
<option value="EU">Europe</option>
<option value="NA">North America</option>
<option value="AS">Asia</option>
</select>
<select id="test2" class="dynamic-select" name="test2">
<option value="#">Select EU</option>
<option value="EU_EQ_JA">EU_EQ_JA</option>
<option value="EU_CR_AR">EU_CR_AR</option>
<option value="EU_EQ_MC">EU_EQ_MC</option>
<option value="EU_EQ_CS">EU_EQ_CS</option>
<option value="EU_EQ_CR">EU_EQ_CR</option>
<option value="EU_CR_GS">EU_CR_GS</option>
</select>
<select id="test3" class="dynamic-select" name="test3">
<option value="#">Select Second Dropdown</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:12:03.023

所以我相信你的问题在于`$(".dynamic-select").change()`. 这就像 JQuery 中的 bind 和其他几个事件触发器一样，必须在添加每个元素时再次设置。

如果你使用

```
$("body").on('change','.dynamic-select',function(e){//some stuff here}); 
```

相反，它应该适用于插入 DOM 的所有元素。

# visual-studio-2010 - Visual Studio 2010 构建到错误的文件夹，创建名为“目标”的奇怪目录

> ID：11690674
> 
> 赞同：1
> 
> 时间：2012-07-27T15:12:08.903
> 
> 标签：visual-studio-2010

直到大约一年前，我在这台机器上大量使用了 VS2010 的工作安装，并且仅在去年不经常使用。它过去可以很好地构建我所有的项目，但是在几个月前使用它之后，我打开它，尝试构建一个解决方案，但它无法构建，因为它似乎在准随机位置创建输出文件硬盘。

为了解决这个问题，我简单地创建了一个全新的 WinForms 项目，并且没有更改模板中的任何一行代码，我就构建了它。虽然 VS 很高兴地宣布它已建成，但我看到了同样的问题，这似乎困扰着我的真正解决方案（它实际上由大约 4-5 个解决方案组成，总共大约 160 个项目（C#，一些 C++）：一个名为“目标" 与 .sln 文件在同一个文件夹中创建。在该文件夹内是另一个与解决方案名称相同的文件夹，其中是 bin 文件夹（更进一步是 Debug 和 Release）文件夹。

这是文件夹结构

```
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall.sln
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Release
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug\Test VS after reinstall.exe
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug\Test VS after reinstall.pdb
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\bin
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Form1.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Form1.Designer.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Program.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Test VS after reinstall.csproj
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\bin\Debug
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\bin\Debug\Test VS after reinstall.vshost.exe
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\DesignTimeResolveAssemblyReferences.cache
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\DesignTimeResolveAssemblyReferencesInput.cache
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\GenerateResource.read.1.tlog
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\GenerateResource.write.1.tlog
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\TempPE
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\Test VS after reinstall.csproj.FileListAbsolute.txt
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\Test VS after reinstall.exe
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\Test VS after reinstall.pdb
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\obj\x86\Debug\Test_damn_VS_after_reinstall.Properties.Resources.resources
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties\AssemblyInfo.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties\Resources.Designer.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties\Resources.resx
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties\Settings.Designer.cs
C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\Properties\Settings.settings 
```

您可以看到第 1 行和第 3-8 行似乎不正确。

在我的实际解决方案中，它产生了巨大的差异，因为所有解决方案和项目都配置为构建到一个公共文件夹，并且都由相对路径配置（构建属性中的输出目标）。现在所有的参考资料都搞砸了，各种项目最终出现在硬盘驱动器的各个部分，当然没有任何东西可以正常构建。

我在 Win7SP1 x64、VS2010 Ultimate SP1 上运行。

还值得一提的是，使用预构建步骤并回显一些宏（可扩展的构建变量），我可以看到宏无法解析到正确的文件夹。有趣的是，Visual Studio 显示了一件事（项目属性、构建事件、预构建、编辑预构建、宏按钮）。那里显示以下内容：

```
Outdir: bin\Debug
TargetPath: C:\Users\{user}\Documents\Visual Studio 2010\Projects\Test VS after reinstall\Test VS after reinstall\bin\Debug\Test VS after reinstall.exe 
```

但是，当构建实际运行并且预构建步骤定义为：

```
echo OutDir: $(OutDir)
echo TargetPath: $(TargetPath) 
```

输出是：

```
------ Build started: Project: Test VS after reinstall, Configuration: Debug x86 ------
  OutDir: C:\Users\{user}\documents\visual studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug\
  TargetPath: C:\Users\{user}\documents\visual studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug\Test VS after reinstall.exe
  Test VS after reinstall -> C:\Users\{user}\documents\visual studio 2010\Projects\Test VS after reinstall\target\Test VS after reinstall\bin\Debug\Test VS after reinstall.exe 
```

任何想法 Visual Studio 发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:49:40.433

在 MSDN 论坛上的 MS 家伙的大力帮助下，最终发现了这一切。

[http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/d6a626c0-f43a-4a70-ba4e-0f377fc11b17](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/d6a626c0-f43a-4a70-ba4e-0f377fc11b17)

# android - ELM327 在发送 OBD 命令时返回“错误”

> ID：11690680
> 
> 赞同：2
> 
> 时间：2012-07-27T15:12:23.857
> 
> 标签：android, bluetooth, obd-ii

我目前正在开发一个 Android 应用程序，以通过 ELM327 蓝牙加密狗从车辆的 OBDII 端口读取...

对于那些不太了解 ELM 的人，我会推荐这个数据表，它非常有帮助......

[数据表](http://elmelectronics.com/DSheets/ELM327DS.pdf)

我能够连接到加密狗，并且可以毫无问题地使用每个“AT”命令，但是当我尝试发出 OBD 命令时，例如说“010C”，我收到错误消息，起初我以为波特率可能不正确。我尝试了所有不同的波特率，每次尝试发出 OBD 命令时，我都会收到“错误”响应，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:49:35.470

想通了，必须更改协议，并删除我正在使用的特定加密狗，它会重置缓冲区。您可以在数据表中看到一个 AT 命令，用于自动检测车辆使用的特定协议。这将确保您对尝试从中获取数据的任何车辆使用正确的协议。如果有人需要更多信息，请随时PM我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T09:14:11.267

您的车辆的obd接口协议选择和连接似乎失败。当我尝试请求 010C 命令时，我也遇到了错误。实际上我对任何命令都有错误。当我正确连接到obd时，它解决了我的麻烦。

要正确连接，您应该按照我的答案中提供的步骤进行操作：

[已回答问题：“obd 适配器的初始化”](https://stackoverflow.com/a/29364593/2000405)

# java - javafx，从另一个线程更新 ui

> ID：11690683
> 
> 赞同：34
> 
> 时间：2012-07-27T15:12:28.607
> 
> 标签：java, exception-handling, thread-safety, javafx-2

我有一个 javafx 应用程序和一个通过 实现的工作线程，`javafx.concurrent.Task`它执行一个漫长的过程，即压缩和上传一组文件。
我已通过 将任务进度连接到进度条`progressProperty`。
**除此之外，我希望将有关正在处理的项目的详细状态报告到 ui 中。也就是说，正在处理的文件的名称及其大小以及单个文件进程可能出现的任何错误。** 无法从工作线程中使用这些信息更新 UI，最多我可以将其添加到同步集合中。
但随后我需要一些事件来通知 UI 新数据可用。
javafx 对这个问题有特定的支持吗？

### 更新，更好的配方

我没有像 Platform.runLater 那样设计一个特别的跨线程机制，而是试图让每个属性都可以从其他线程中被监听。就像 Task 提供的 runningProperty 和 stateProperty

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-27T15:37:22.627

我遇到了类似的问题，据我所知，您必须自己处理错误。我的解决方案是通过方法调用更新 UI：

就像是：

```
 try
  {
    //blah...
  }
  catch (Exception e)
  {
    reportAndLogException(e);
  }
  ...
  public void reportAndLogException(final Throwable t)
  {
    Platform.runLater(new Runnable() {
      @Override public void run() {
        //Update UI here     
      }
    });
  } 
```

本质上，我只是手动将其移回 UI 线程进行更新（就像我在几乎任何其他框架中所做的那样）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T17:32:06.093

这个答案使用与丹尼尔的答案相同的概念。

[随附的是来自Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html) javadoc的 Partial Result 示例的副本（针对当前嵌入在 Java 8 javadoc 中的语法错误进行了修复，并添加了更具体的 Generic 类型）。您可以使用它的修改。

将您的异常放在 partialResults 集合中。对于您的情况，您不需要从任务返回异常列表，而是可以将它们放在一些显示异常的 UI 控件中（例如`ListView`带有`CellFactory`异常显示的 a）。请注意，partialResults 集合不需要同步，因为它总是在 JavaFX UI 线程上更新和访问（更新是通过`Platform.runLater()`类似于 Daniel 解决方案的调用发生的）。

```
public class PartialResultsTask extends Task<ObservableList<Rectangle>> {
    private ReadOnlyObjectWrapper<ObservableList<Rectangle>> partialResults =
            new ReadOnlyObjectWrapper<>(
                    this, 
                    "partialResults",
                    FXCollections.observableArrayList(
                            new ArrayList<>()
                    )
            );

    public final ObservableList<Rectangle> getPartialResults() {
        return partialResults.get();
    }

    public final ReadOnlyObjectProperty<ObservableList<Rectangle>> partialResultsProperty() {
        return partialResults.getReadOnlyProperty();
    }

    @Override
    protected ObservableList<Rectangle> call() throws Exception {
        updateMessage("Creating Rectangles...");
        for (int i = 0; i < 100; i++) {
            if (isCancelled()) break;
            final Rectangle r = new Rectangle(10, 10);
            r.setX(10 * i);
            Platform.runLater(() -> partialResults.get().add(r));
            updateProgress(i, 100);
        }
        return partialResults.get();
    }
} 
```

* * *

更新它的可观察属性时，任务首先检查更新是否发生在 FX 应用程序线程上。如果是，它会立即更新。如果不是，则它将更新包装在`Platform.runLater()`调用中。请参阅[任务源代码](http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-concurrent/src/javafx/concurrent/Task.java)以了解这是如何完成的。

也许可以定义一组通用的并发感知属性，但 JavaFX 并没有在其核心提供这样的设施。确实，没必要。除了 javafx.concurrent 包之外，JavaFX 是一个单线程 UI 框架。

# enums - Qt-fy 现有枚举与 Qt 元数据一起使用

> ID：11690684
> 
> 赞同：3
> 
> 时间：2012-07-27T15:12:30.293
> 
> 标签：enums, qt4, qobject

假设我有一个现有的`enum X { A, B }`并希望将它与 Qt 元数据一起使用，例如`QMetaObject`/ `QMetaEnum`。

```
QMetaObject meta = FsxSimConnectQtfier::staticMetaObject;
for (int i=0; i < meta.enumeratorCount(); ++i) {
    QMetaEnum m = meta.enumerator(i);
} 
```

如果我`enum`在一个`Q_OBJECT`类中定义我的，一切都很好，即我可以`MyEnum` [通过元数据系统](https://stackoverflow.com/questions/11679057/qt-no-metadata-by-meta-enumeratorcount-for-enum-in-q-object-why)检索。但是我怎样才能使`X`元数据系统可用呢？

```
class FsxSimConnectQtfier : public QObject
{
    Q_OBJECT
    Q_ENUMS(MyEnum) 
    Q_ENUMS(X) // not working
public:
    explicit FsxSimConnectQtfier(QObject *parent = 0);
    enum MyEnum { G1, G2 };
    // how can I make enum X available for the metadata system
    // I have tried typedef, but did not work
    static const QString simConnectExceptionToString(const unsigned int id);
}; 
```

1.  这是以下内容的后续：[Qt: Meta.enumeratorCount() 没有元数据用于 Q_OBJECT 中的枚举，为什么？](https://stackoverflow.com/questions/11679057/qt-no-metadata-by-meta-enumeratorcount-for-enum-in-q-object-why)
2.  动机：real`enum X`包含很多异常代码，我想使用元数据系统来获取原始描述性文本，和[这里差不多](http://labs.qt.nokia.com/2008/10/09/coding-tip-pretty-printing-enum-values/)。原件`enum`不是（！）一个`Q_OBJECT`。

# portforwarding - 无法通过公网 IP 访问 80 端口

> ID：11690686
> 
> 赞同：1
> 
> 时间：2012-07-27T15:12:36.420
> 
> 标签：portforwarding

我在我的 ISP 的 Arris 路由器后面的本地 IP 上有一个 ubuntu 盒子。我已经在路由器上为端口 80 设置了端口转发，以便它将 TCP/UPD 转发到 ubuntu 机器的本地 IP。

但是，我无法使用公共 IP 进行远程登录，也无法通过公共 IP 在 ubuntu 上访问 apache 的欢迎页面。我可以在端口 80 上从我的 mac telnet 到 ubunut 的本地 ip，也可以 ssh 进入它。我还禁用了 Ubuntu 上的防火墙进行测试，但我仍然无法通过公共 IP 访问 ubuntu。

我检查了公共 IP 上的 80 端口是开放的，所以是 22，但不是 21。

不知道从这里去哪里。有什么建议吗？

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-03T08:25:50.690

似乎您正在通过 Arris 路由器进行端口转发

```
ISP/WAN PublicIP:80 --> InternalIP:80 Ubuntu/Apache 
```

但也许你的 Ubuntu 客户端已经发布/更新了它的 DHCP 租约并收到了一个新的内部 IP，因此如果不保持 Ubuntu 的客户端内部 IP 静态，预期的配置将无法工作......

# android - Android默认代码错误

> ID：11690690
> 
> 赞同：2
> 
> 时间：2012-07-27T15:12:55.317
> 
> 标签：android, netbeans-7

我是 android 开发新手，我在 netbeans 7.1.1 中安装了 SDK。这是我在 netbeans 中创建新的 android 项目时生成的默认代码

```
package android.bug;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity
{
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }
} 
```

默认代码应该没有错误，但我在最后一行出现错误，即“setContentView（R.layout.main）”

```
 error is : package R does not exist 
```

但是当我在上面的代码中导入 R 包时，我在同一行中得到一个不同的错误，即“setContentView(R.layout.main)”

```
 error :cannot find symbol : main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:13:42.523

您的`res`文件夹中可能有一些错误。

`R.java`是自动生成的文件。在您解决`res`文件夹中的所有错误之前，它不会创建。

例如：错误`main.xml`

解决所有错误，清理您的项目并

```
import yourpackagename.R; 
```

看到[类似](https://stackoverflow.com/a/11467781/1289716)的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:15:31.633

我在 Eclipse 中指定了 android SDK 文件夹（窗口 - 首选项，Android SDK 位置），没有尾随 \ 。所以 aapt.exe 工具的路径是错误的（C:\android-sdk-windowsplatform-tools 而不是 C:\android-sdk-windows\platform-tools）并且资源没有构建。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T15:14:01.213

看看这个问题，它对于 R 文件的问题非常全面：[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)

此外，[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-classic-42/junor)是推荐用于 Android 开发的 IDE，您可能想尝试一下。

# c# - 相对于他的旋转 XNA 向前移动模型

> ID：11690691
> 
> 赞同：0
> 
> 时间：2012-07-27T15:13:02.567
> 
> 标签：c#, matrix, xna

如何相对于他的旋转向前移动模型（在 3D 空间中）？例如：

```
rotation = new Vector3(0, MathHelper.ToRadians(90), 0);
obj.Move(Vector3.Forward); 
```

函数 move 必须将对象向左移动一个单位，而不是向前移动一个单位。我试过了：

```
Matrix rotation = Matrix.CreateFromYawPitchRoll(rotation.x, rotation.y, 0);

Vector3 translation = Vector3.Transform(Vector3.Forward, rotation);
this.position += translation;
translation = Vector3.Zero; 
```

但由于某种原因，它使模型向上移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T00:13:38.913

您的 vector3 组件“rotation.Y”意味着您想要偏航（绕 Y 轴旋转）90 度。

Matrix.CreateFromYawPitchRoll() 想要该信息（rotation.Y）作为第一个参数。您已将其列为第二个参数。

只需记住将参数按照它们在函数中命名的顺序放置：Yaw、Pitch 和 Roll。你有它俯仰，偏航，滚动。

# jquery - html中的交互式SVG，正确的方式

> ID：11690693
> 
> 赞同：2
> 
> 时间：2012-07-27T15:13:10.837
> 
> 标签：jquery, html, svg

我需要在我的 html 文档中包含一个 SVG 图像（地图），希望我可以使用 JQuery 来操作它。我在网上查到了这个，有人说你不能直接操作 SVG。有些人建议使用 Keith Wood 的 JQuery SVG 插件，但我无法打开该[链接](http://keith-wood.name/svg.html)。这是一个示例，您可以将 SVG 代码直接包含到 html5 中。一方面，我的 SVG 代码有点长，所以如果我把代码放在那里看起来很糟糕，另一方面，即使我这样做，我仍然不确定如何操作它。

所以我想也许我可以使用一些框架，我尝试了 Raphael，但我需要将我的 SVG 转换为另一种形式，Raphael 会为我渲染图像。但奇怪的是，在我更改了 SVG 图像后，图像变得更小了。而且我很难弄清楚出了什么问题。

我想要实现的与 admob.com 中的[这个页面非常相似。](http://www.admob.com/my_sites/site_stats/geo_stats)此页面似乎直接在页面中包含 SVG 代码。

任何人都可以提供一些建议来实现这样的目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T15:18:24.737

您实际上*不需要*jQuery 来编辑 SVG（但您可以使用它）。使用对象标签包含 SVG 文档，如下所示：

```
<object data="mySVG.svg" type="image/svg+xml" id="mySVG"></object> 
```

然后，您可以通过以下方式操作 SVG 的 DOM `document`：

```
var svgObject = document.getElementById("mySVG");

moSVG.onload = function(){
    var svgDoc = moSVG.contentDocument;
    //Do SVG manipulation here, using svgDoc instead of document
} 
```

注意使用`onload`. 没有它，当 JS 在 SVG 完全加载之前运行时，您可能会遇到错误（特别是如果您在 SVG 中使用图像）。

一旦确定 SVG 已加载，就可以在`onload`语句之外的 JavaScript 中使用它。

另一方面，如果你想将 JavaScript 直接嵌入到 SVG 中，你可以`<script>`像往常一样使用标签，但需要注意：如果你想要外部 JS，则需要使用 xlink（如以下导入 jQuery 的示例）

```
<script type="text/ecmascript" xlink:href="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"/> 
```

内部JS可以这样描述：

如果您决定使用它，请确保`xlink`在开始`<svg>`标签中定义如下（不要更改 url）：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> 
```

但是，请记住，直接在 SVG 中的 JS在您的 HTML 页面上看不到任何内容**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:47:18.390

我投票赞成@SomeKittens 的答案，因为这是做你正在寻找的正确方法，但另一种选择是[Ready Set Raphael](http://readysetraphael.com/)：它为你的 SVG 提供了 Raphael 代码，然后你可以像其他任何东西一样使用它拉斐尔 JS。（显然你应该包括 Raphael 来使用它）。如果您想引用独立元素，您仍然需要找出变量名称。

# c - 你如何优化这个？

> ID：11690696
> 
> 赞同：0
> 
> 时间：2012-07-27T15:13:26.277
> 
> 标签：c, optimization, if-statement

我有一个这样的结构：

```
static struct F_t {
  char *_1;
  char *_2;
  char *_3;
  char *_4;
  char *_5;
  char *_6;
  char *_7;
  char *_8;
  char *_9;
  char *_10;
  char *_11;
  char *_12;
} F = { 0 }; 
```

根据标准输入的一些值，它设置正确。

“问题”是我从字符串中检索它，我需要正确设置它。我目前正在使用此功能：

```
static inline void 
setf(int i, char *value)
{
  /* Nothing to do. */
  if(i > 12)
    return;

  if(i == 1)
    F._1 = value;
  else if(i == 2)
    F._2 = value;
  else if(i == 3)
    F._3 = value;
  else if(i == 4)
    F._4 = value;
  else if(i == 5)
    F._5 = value;
  else if(i == 6)
    F._6 = value;
  else if(i == 7)
    F._7 = value;
  else if(i == 8)
    F._8 = value;
  else if(i == 9)
    F._9 = value;
  else if(i == 10)
    F._10 = value;
  else if(i == 11)
    F._11 = value;
  else if(i == 12)
    F._12 = value;
} 
```

我尝试过使用宏..但由于它是在运行时设置的，所以不可能。我知道如果没有反思，像这样的现代事物等等。但也许有一些我不知道的东西。可能在 C++ 中是可能的。但不是。我想要纯C。

任何建议都非常受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:27:10.367

你为什么不这样做：

```
static struct F_t {
    char ** _;
} F = { 0 }; 
```

此时，只需确保您 malloc 为大小为 12 的双精度数组（在您的情况下），然后您就可以拥有如下功能：

```
setf(int i, char *value)
{
     F._[i] = value;
} 
```

事情看起来好多了，不是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:29:07.433

除了强烈建议考虑@PhillipNordwall 使用数组的建议。假设编译器将打包结构字段而在它们之间没有任何类型的填充，这可能会起作用。

```
static inline void 
setf(int i, char *value)
{
   char **p = &F._1;  /* obtain the address of the first field in the struct */
   p+= i - 1;         /* add an offset to the address according to index */
  /* Nothing to do. */
  if(i > 12)
    return;

   *p = value;        /* set the field's value */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:29:43.500

试试这个：

```
static inline void  setf(int i, char *value) 
{
    char** F_as_array = (char**)(&F._1);

    if (i > 12 || i < 1) 
        return;

    F_as_array[i-1] = value; 
} 
```

（我没有编译它，但我认为它有效）

编辑： F_as_array[i] -> F_as_array[i-1] （根据您提供的代码，我假设第一个索引是 1）

# c++ - 为什么我不能中断这个特定的 boost::thread？

> ID：11690698
> 
> 赞同：3
> 
> 时间：2012-07-27T15:13:39.773
> 
> 标签：c++, boost, boost-thread

我有两个测试来中断 boost::thread。一个有效，另一个无效。谁能告诉我为什么？

**在职的：**

```
#include <iostream>
#include <string>
#include <boost/thread.hpp>
#include <boost/chrono.hpp>
#include <unistd.h>

using namespace std;

void Run(void)
{
    try
    {
        cout << "Run()\n";
        for ( int i = 0; i < 1000; i++ )
        {
            cout << "Thread: " << i << endl;
            boost::this_thread::sleep(boost::posix_time::milliseconds(500));
        }
    } catch (...)
    {
        cout << "INTERRUPTED!\n";
    }
    cout << "Thread returning.\n";
};

int main()
{
    boost::thread my_thread(Run);
    sleep(1);
    cout << "Main() sleeping\n";
    sleep(1);
    cout << "Main() interrupting the thread\n";
    my_thread.interrupt();
    sleep(1);
    cout << "Main() bye!!\n";
} 
```

像这样编译：`g++ test1.cpp -lboost_thread -lboost_system; ./a.out`

输出是：

```
Run()
Thread: 0
Thread: 1
Main() sleeping
Thread: 2
Thread: 3
Main() interrupting the thread
INTERRUPTED!
Thread returning.
Main() bye!! 
```

**破碎的：**

```
#include <iostream>
#include <string>
#include <boost/thread.hpp>
#include <boost/chrono.hpp>
#include <unistd.h>

using namespace std;

class CThread
{
public:
    void Interrupt() { cout << "calling interrupt\n"; ThreadHandle.interrupt(); }

protected:
    static unsigned int Init(void * process);
    virtual int Run(void) =0;
    void StartThread(void);
    boost::thread ThreadHandle;
};

unsigned int CThread::Init(void * process)
{
    cout << "Init()\n";
    return ((CThread *)process)->Run();
}

void CThread::StartThread(void)
{
    boost::thread ThreadHandle(CThread::Init, this);
}

class my_thread_class : public CThread
{
    public:
    my_thread_class();

    int Run(void)
    {
       cout << "Run(), thread running\n";
        for ( int i = 0; i < 1000; i++ )
        {
            cout << "Thread: " << i << endl;
            boost::this_thread::sleep(boost::posix_time::milliseconds(200));
        }
        cout << "Thread returning.\n";
        return 0;
    };
};

my_thread_class::my_thread_class()
{
    StartThread();
}

int main()
{
    my_thread_class my_thread;
    sleep(1);
    cout << "Main() sleeping\n";
    sleep(2);
    cout << "Main() interrupting the thread\n";
    my_thread.Interrupt();
    sleep(5);
    cout << "Main() bye!!\n";
} 
```

相同的编译，损坏的输出是：

```
Init()
Run(), thread running
Thread: 0
Thread: 1
Main() sleeping
Thread: 2
Thread: 3
Main() interrupting the thread
calling interrupt
Thread: 4
Thread: 5
Main() bye!! 
```

所以它似乎并没有打断我的破案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:27:18.777

因为`ThreadHandle`对象不是您为线程启动的对象。

```
class CThread
{
public:
    void Interrupt() { cout << "calling interrupt\n"; ThreadHandle.interrupt(); }

protected:
    static unsigned int Init(void * process);
    virtual int Run(void) =0;
    void StartThread(void);

    // This is a member object
    boost::thread ThreadHandle;
};

void CThread::StartThread(void)
{
    // This is _not_ the member object, you have just hidden
    // the member object with an automatic object of the same
    // name.  This works, because boost::thread doesn't stop
    // the thread when it goes out of scope, it just disconnects
    // boost::thread ThreadHandle(CThread::Init, this);

    // renamed to avoid hiding the member variable.
    boost::thread started_thread(CThread::Init, this);

    // Since you want your member object to actually represent the 
    // thread you started, you should be able to do this:
    ThreadHandle.swap(started_thread);

    // Now your member ThreadHandle, should be associated with the 
    // thread as you expected.
} 
```

# vb.net - VB.NET 在新行上排序文件？

> ID：11690702
> 
> 赞同：0
> 
> 时间：2012-07-27T15:13:42.117
> 
> 标签：vb.net, sorting

我正在考虑在 VB.NET 中创建一个应用程序，并且在对新行上的文件进行排序时遇到了一些问题。

基本上在新行上，我想捕获该行中的数据，并将其存储在一个数组中以备后用。

谁能帮我这个？将不胜感激:)

PHP 中的示例：

```
$data = explode("\n", $a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:18:58.417

好的，[`System.IO.File.ReadAllLines()`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx#Y0)返回 a`string` `Array`所以你可以保存返回值。

或者，您可以使用`for`or`foreach`循环迭代结果，或使用`linq`to 对其进行一些处理。选项很多，取决于你想做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:27:30.127

如果我正确理解您的问题，请使用它来读取文件并逐行加载到数组中。

```
 Dim myArray() = New String() {} 'Corrected array, instantiated. or use myArray(-1)
 Dim x as Integer = 0

Using reader As StreamReader = New StreamReader("file.txt")
    holdData(x) = reader.ReadLine 'Reads line by Line and stores in array.
         x += 1 'Increase array index by 1 before moving to next line
End Using 
```

**编辑：**另一种方法，我不知道，我觉得很有趣的是：

```
Dim path As String = "data.txt"
Dim holdData() As String = IO.File.ReadAllLines(path) 
```

这是两行代码，与我的原始响应相同。非常高效，您需要做的就是使用`holdData()`数组将文本行读取到您希望使用它的 、`textbox`或w/e :)`label``listbox`

# git - 一个项目可以有多个来源吗？

> ID：11690709
> 
> 赞同：253
> 
> 时间：2012-07-27T15:14:00.523
> 
> 标签：git, github, repository

一个项目在 Git 中可以有两个（或更多）“起源”吗？

我想将一个项目推送到[github](https://github.com/)和[Heroku](https://www.heroku.com/)服务器。

具体来说，添加 github 存储库时会出现此错误：

```
$ git remote add origin https://github.com/Company_Name/repository_name.git
fatal: remote origin already exists. 
```

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-07-27T15:22:42.107

您可以拥有任意数量的*遥控器*，但您只能拥有一个名为“origin”的遥控器。名为“origin”的远程没有任何特殊之处，只是它是 Git 在克隆现有存储库时创建的默认远程。您可以配置第二个遥控器，向该遥控器推送/拉取，并设置一些分支以跟踪来自该遥控器而不是来源的分支。

尝试添加一个名为“github”的遥控器：

```
$ git remote add github https://github.com/Company_Name/repository_name.git

# push master to github
$ git push github master

# Push my-branch to github and set it to track github/my-branch
$ git push -u github my-branch

# Make some existing branch track github instead of origin
$ git branch --set-upstream other-branch github/other-branch 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2015-02-05T09:37:46.853

值得注意的是，一次可以将原始推送到**多个**git 存储库服务器。

可以通过使用以下命令将另一个 URL 添加到源远程来实现此目的。

```
git remote set-url --add origin ssh://git@bitbucket.org/user/myproject.git 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2018-02-14T07:58:13.227

这是一个包含多个遥控器、GitHub 和 GitLab 的示例项目：

1.  为 GitHub 添加远程仓库

    ```
    $ git remote add github https://github.com/Company_Name/repository_name.git 
    ```

2.  为 GitLab 添加远程仓库

    ```
    $ git remote add gitlab https://gitlab.com/Company_Name/repository_name.git 
    ```

3.  现在您在项目中有多个遥控器。仔细检查`git remote -v`

    ```
    $ git remote -v
    github https://github.com/Company_Name/repository_name.git (fetch)
    github https://github.com/Company_Name/repository_name.git (push)
    gitlab https://gitlab.com/Company_Name/repository_name.git (fetch)
    gitlab https://gitlab.com/Company_Name/repository_name.git (push) 
    ```

4.  你如何推送到多个存储库？

    ```
    $ git push github && git push gitlab 
    ```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-06-15T23:34:22.697

```
git remote set-url --add --push origin git@github.com:user/my-project.git
git remote set-url --add --push origin git@bitbucket.org:user/my-project.git 
```

现在你有 2 个起源。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-08-20T11:49:46.830

一个**本地存储库**可以链接到多个**远程存储库**。

但是，只能调用其中一个链接`origin`。其余的链接需要有**不同的名称**。

因此，为了正确回答这个问题，我们需要了解什么是起源。

让我用一个例子来解释。

假设您有一个`remote repository`被调用的`amazing-project`，然后您将该远程存储库克隆到您的本地计算机，以便您有一个`local repository`. 然后你会得到如下图所示的内容：

[![在此处输入图像描述](../Images/6c6cef6c34862fc2bbe3eebc2d4d4dc6.png)](https://i.stack.imgur.com/y2r60.png)

因为您克隆了存储库。远程存储库和本地存储库是**链接**的。

如果您运行该命令`git remote -v`，它将列出链接到本地​​存储库的所有远程存储库。在那里，您将看到为了从远程存储库推送或获取代码，您将使用**短名称**“origin”。 [![在此处输入图像描述](../Images/a9fee4d4bffe1d70a476e59e0c0456a1.png)](https://i.stack.imgur.com/a5sJG.png)

现在，这可能有点令人困惑，因为在 GitHub（或远程服务器）中，该项目被称为“amazing-project”。那么为什么看起来远程存储库有两个名称呢？

[![在此处输入图像描述](../Images/a7763b5e1494a3dc9e18e894d8b925db.png)](https://i.stack.imgur.com/rwN5d.png)

好吧，我们的存储库的名称之一是它在 GitHub 或某个远程服务器上的名称。这可能有点像**项目名称**。在我们的案例中，这就是“惊人的项目”。

我们的存储库的另一个名称是它在本地存储库中的**短名称，它与存储库的 URL 相关。**每当我们想从该远程存储库推送或获取代码时，我们将使用它的简称。这种短名称就像 url 的**别名**，它是我们避免使用整个长 url 来推送或获取代码的一种方式。在我们上面的例子中，它被称为`origin`.

那么，什么是**`origin`**？

基本上 origin 是Git 在克隆远程存储库时用于远程存储库的**默认短名称。**所以它只是**默认**的。

在许多情况下，您将拥有指向本地存储**库中多个远程存储库**的链接，并且每个存储库都有不同的短名称。

所以最后一个问题，为什么我们不使用相同的名称？

我将用另一个例子来回答这个问题。假设我们有一个朋友分叉了我们的远程存储库，以便他们可以在我们的项目上帮助我们。假设我们希望能够从他们的远程存储库中获取代码。我们可以使用该命令`git remote add <shortname> <url>`在本地存储库中添加指向其远程存储库的链接。

[![在此处输入图像描述](../Images/14b71cefd62c9ed681ffece3cd26ddff.png)](https://i.stack.imgur.com/sQJbs.png)

在上图中，您可以看到我使用短名称`friend`来引用我朋友的远程存储库。您还可以看到两个远程存储库具有相同的项目名称`amazing-project`，这给了我们一个原因，为什么远程服务器中的远程存储库名称和我们本地存储库中的短名称不应该相同！

有一个非常有用的[视频](https://www.youtube.com/watch?v=LIHIRBz5ZXk) 解释了所有这些，可以在[这里](https://www.youtube.com/watch?v=LIHIRBz5ZXk)找到。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-28T17:58:12.907

您可以通过提供不同的名称而不是来源来将另一个远程帐户添加到您的存储库。您可以使用名称，例如 origin2。所以你的 git 命令可以修改为

```
git remote add origin2 https://github.com/Company_Name/repository_name.git 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-21T07:55:25.837

```
git remote add origin2 https://github.com/Company_Name/repository_name.git 
```

并用于推送：

```
git push -u origin2 master 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-29T13:57:49.660

您可以按照以下步骤将更改从现有存储库推送到新的远程。

```
cd existing_repo 
```

重命名您当前的遥控器（可选）

```
git remote rename origin old-origin 
```

添加新遥控器（此处使用原点）

```
git remote add origin https://github.com/repository_name.git 
```

现在您可以将代码推送到新的`origin`遥控器

```
git push -u origin --all
git push -u origin --tags 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-01T14:29:42.850

您可以使用 GitHub 或 GitLab 而不是 origin

对于 github 代替原产地使用 github

```
git remote add github https://github.com/repository_name.git
git push github branchname 
```

对于 gitlab 代替原产地使用 gitlab

```
git remote add gitlab https://github.com/repository_name.git
git push gitlab branchname 
```

# c# - Visual Studio 2012 RC 中没有 Metro 风格的应用模板

> ID：11690712
> 
> 赞同：6
> 
> 时间：2012-07-27T15:14:06.750
> 
> 标签：c#, visual-studio, microsoft-metro, visual-studio-2012

我正在尝试按照本指南为“hello, word”应用程序创建一个 Metro 风格的应用程序：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh986965.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986965.aspx)

但是在 Visual Studio 2012 RC (Ultimate) 中创建新项目时，我没有任何 Metro 风格的应用程序模板。我从这里得到了我的版本：http: [//www.microsoft.com/visualstudio/11/en-us/downloads#groups](http://www.microsoft.com/visualstudio/11/en-us/downloads#groups)

我读过我应该在第一次启动时被提示获得开发许可证，但我从来没有被提示过。我还读到我应该能够通过 Projects > Store 获得一个，但 Store 项目不在我的项目菜单中。

我究竟做错了什么？我需要不同版本的 Visual Studio 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T15:15:53.163

如果在 Windows 8 上安装了 VS2012，您只能获得 Metro 开发位。

# paypal - 沙盒上的 Paypal Payments Pro 始终返回 #10001“内部错误”

> ID：11690713
> 
> 赞同：2
> 
> 时间：2012-07-27T15:14:08.633
> 
> 标签：paypal, credit-card, paypal-sandbox

我已经测试了一段时间的 Paypal Payments Pro。切换到沙盒我总是得到错误号#10001“内部错误”。

Paypal KB 对这个错误不是很清楚，很多人在 Sandbox 中测试时都会遇到这个问题。有人说 Sandbox env 不是 100% 可靠的，并且不断创建虚假的 Pro 帐户，直到他们找到真正有效的帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:14:08.633

答案是，按照本[指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf)，我必须使用默认的 CC 号码之一，而不是假的（即使您通过 Paypal 沙盒环境生成 CC 号码）。

我花了一段时间才彻底了解它。

# django-cms - Django-CMS 2.3 站点缺少静态内容

> ID：11690721
> 
> 赞同：1
> 
> 时间：2012-07-27T15:14:23.933
> 
> 标签：django-cms

安装后，有些麻烦，django-cms 在 vi​​rtualenv 中运行。我可以加载索引页面以及管理页面。但是，在索引页面上，我在底部看到以下文字

> 如果您在此行末尾没有看到 django CMS 徽标，请确保将 static/cms 文件夹链接到您的静态文件：这里应该是一个徽标

徽标丢失。加载管理页面会加载未经 CSS 和页面其他静态组件修饰的纯黑白 HTML。

加载 www.mysite.com 时，我的 access.log 显示以下内容

```
 ..."GET / HTTP/1.1" 200 4214 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1"
 ..."GET /static/cms/images/pony.jpg HTTP/1.1" 404 526 "http://www.mysite.com/" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1"
 ..."GET /static/cms/images/logo.jpg HTTP/1.1" 404 527 "http://www.mysite.com/" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1" 
```

加载访问日志时会出现类似错误。并不是说在站点生成时没有创建“静态”目录。

我的问题是：我是否只需将 /usr/local/pythonenv/django_cms_venv/lib/python2.7/site-packages/cms/static/ 的内容复制到 settings.py 中定义的 STATIC_ROOT 中？

我的后续行动是，为什么这不能自动完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:44:45.613

您是否尝试过运行`collectstatic`管理命令？

```
./manage.py collectstatic 
```

快速浏览一下[文档](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)也可能会有所帮助:-)

# selenium - 如何使用 selenium grid 2 使用 webdriver 同时启动多个 IE8 窗口？

> ID：11690723
> 
> 赞同：1
> 
> 时间：2012-07-27T15:14:46.410
> 
> 标签：selenium, internet-explorer-8, grid, webdriver

我正在尝试使用我已经拥有的 webdriver 代码设置 selenium grid 2。我正在尝试在谷歌上找到的几个教程，但遇到了同样的问题：每个测试用例一个接一个地开始。我想要的是它们都同时启动（都使用 IE8） 我启动了集线器和节点，当我去的时候，`http://localhost:4444/grid/console`我可以看到两个节点都使用 IE8。这是我的代码，它现在所做的就是去谷歌。请问有什么帮助吗？谢谢！

```
public class CodesIntegrationTestCase {

    private static String SELENIUM_HUB_URL;
    private static String TARGET_SERVER_URL;

    @BeforeClass
    public static void initEnvironment() {
        SELENIUM_HUB_URL = getConfigurationProperty(
           "SELENIUM_HUB_URL",
           "test.selenium.hub.url",
           "http://localhost:4444/wd/hub");
        System.out.println("using Selenium hub at: " + SELENIUM_HUB_URL);

        TARGET_SERVER_URL = getConfigurationProperty(
            "TARGET_SERVER_URL",
            "test.target.server.url",
            "http://google.com");
        System.out.println("using target at: " + TARGET_SERVER_URL);

    }

    private static String getConfigurationProperty(
            String envKey, String sysKey, String defValue) {
        String retValue = defValue;
        String envValue = System.getenv(envKey);
        String sysValue = System.getProperty(sysKey);
        // system property prevails over environment variable
        if (sysValue != null) {
            retValue = sysValue;
        } else if (envValue != null) {
            retValue = envValue;
        }
        return retValue;
    }

    @Test
    public void testIE()
            throws MalformedURLException, IOException {
        DesiredCapabilities browser = DesiredCapabilities.internetExplorer();
        testCodesCrud(browser);
    }

    @Test
    public void testIE2()
            throws MalformedURLException, IOException {
        DesiredCapabilities browser = DesiredCapabilities.internetExplorer();
        testCodesCrud(browser);
    }
 public void testCodesCrud(DesiredCapabilities browser)
            throws MalformedURLException, IOException {
        WebDriver driver = null;
        try {
            driver = new RemoteWebDriver(
                new URL(SELENIUM_HUB_URL), browser);

            // test starts in Codes entity list page
            driver.get(TARGET_SERVER_URL + "/CodesView.do");

            // rest of test commands come here
        } finally {
            if (driver != null) {
                driver.quit();
            }
        }
    }

} 
```

# c# - CollectionViewSource.GetDefaultView 在 SetBinding 之后返回 null

> ID：11690725
> 
> 赞同：6
> 
> 时间：2012-07-27T15:14:53.430
> 
> 标签：c#, .net, wpf

我在 WPF UserControl 的构造函数中有一些代码。基本上我将绑定设置为 XmlDataProvider（我的数据是动态的）。然后我想将视图上的 CustomSort 设置为 MySorter（实现 IComparer）。

问题是，如果在 SetBinding 调用之后直接调用 GetDefaultView，则返回 null - 好像正在进行一些异步处理来设置 ItemsSource。请注意，如果我稍后在按钮 Click 处理程序中调用相同的 GetDefaultView 代码，它工作正常，它不会返回 null 并且排序机制都工作正常且花花公子。

```
MyListBox.SetBinding(ListBox.ItemsSourceProperty, binding);

ListCollectionView view = CollectionViewSource.GetDefaultView(MyListBox.ItemsSource) as ListCollectionView;

view.CustomSort = new MySorter(); // falls over - view is null 
```

我的问题是，为什么 GetDefaultView 在 SetBinding 之后直接调用时返回 null，在调用 GetDefaultView 并获得非 null 响应之前我需要等待一个事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:37:05.780

你是`Users.ItemsSource`一个`ItemCollection`吗？那么可能 view 也是一个，[`ItemCollection`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.aspx)因为它继承自[`CollectionView`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx).

`CollectionViewSource.GetDefaultView`返回一个`ICollectionView`. 还有更多的类仅`CollectionView`从那时继承`ListCollectionView`。确保您的演员不会失败，例如使用以下代码：

```
var view = CollectionViewSource.GetDefaultView(Users.ItemsSource);
Console.WriteLine(view.GetType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:07:26.927

使用 XmlDataProvider 时会发生这种情况。从代码中的对象实例设置 DataContext 时，GetDefaultView 不返回 null。但是，当使用 XmlDataProvider 时，GetDefaultView 返回 null。我发现这是因为在加载 xml 之前它返回 null。

因此，如果使用“Loaded”事件的事件处理程序方法调用 CollectionViewSource.GetDefaultView，它可以正常工作。

```
public MainWindow()
    {
        InitializeComponent();
        this.comboBox1.Loaded += new RoutedEventHandler(ComboBoxLoaded);           
    }

    private void ComboBoxLoaded(object sender, RoutedEventArgs e)
    {
        ListCollectionView view = (ListCollectionView)CollectionViewSource.GetDefaultView(((XmlDataProvider)this.myGrid.DataContext).Data);
        view.SortDescriptions.Add(new SortDescription("Location", ListSortDirection.Ascending));
    } 
```

您可以在此链接之后找到此示例（在第 8 阶段下）：

[http://wpfgrid.blogspot.com/2013/01/simple-combobox-implementation.html](http://wpfgrid.blogspot.com/2013/01/simple-combobox-implementation.html)

# grails - grails：将 grails 域类作为函数参数传递

> ID：11690739
> 
> 赞同：4
> 
> 时间：2012-07-27T15:15:23.900
> 
> 标签：grails, grails-domain-class

我有两个（实际上是 5 个）域类，ClassA 和 ClassB，并且必须在两者上执行相同的查询

```
ClassA.where { a == b }.list() 
```

和

```
ClassB.where { a == b }.list() 
```

我想编写一个服务类来执行传递 Class 对象的这些查询，而不是为每个类创建一个服务。我试过[这个解决方案](https://stackoverflow.com/questions/6338148/grails-find-domain-class-by-name)

```
def clazz = grailsApplication.getDomainClass(domainClass)
clazz.where { a == b }.list() 
```

但我有一个例外告诉我 DefaultGrailsDomainClass 没有“where”方法。

还有其他方法可以做到这一点吗？类似于“ClassA.grailsClass.where {}”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:33:04.907

`getDomainClass`的返回值为`GrailsDomainClass`/ `DefaultGrailsDomainClass`。调用它的`getClazz`方法来获取它包装的类：

```
def clazz = grailsApplication.getDomainClass(domainClass).clazz
clazz.where { a == b }.list() 
```

# ios - 加载 UIImage 并删除原始文件

> ID：11690742
> 
> 赞同：4
> 
> 时间：2012-07-27T15:15:34.300
> 
> 标签：ios, swift, objective-c, uiimage, cgimage

我正在尝试在本地加载图像存储，然后删除原始文件。

所以这里的代码：

```
UIImage *workingCopy = [UIImage imageWithContentsOfFile:workingCopyPath];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error = nil;
[fileManager removeItemAtPath:workingCopyPath error:&error]; 
```

之后，我将此图像加载到我的视图（OpenGL）中。图像看起来像黑色方块。在不删除原始文件的情况下，一切都很完美。

有没有办法将图像完全加载到内存并删除原始文件而不损坏加载的图像？

我试过使用`imageNamed`，但它对我不起作用（只是找不到文件，可能是因为扩展名）......

图片路径如下：/Documents/SavedImages/IMG-186998396.png.working_copy

我将 NSString 传递`IMG-186998396.png.working_copy`给`imageNamed`但它无法加载图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:29:21.710

UIImage 使用缓存机制和延迟加载（图像被注释加载，除非它被渲染）。可能会在显示后推迟删除，或者通过将其绘制到`CGGraphicContext`

更好的是：您可以使用后台线程进行强制加载，请参阅该[问题的答案](https://stackoverflow.com/questions/5266272/non-lazy-image-loading-in-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-14T22:00:32.867

这个问题的答案揭示了一些关于工作方式`UIImage`和`cgImage`工作方式的有趣事情。UIImage 对象不直接保存图像数据，而是保存对数据外部存储的引用。

正如[Apple 的文档所指出的](https://developer.apple.com/documentation/uikit/uiimage)，您可以通过 或 上的任何一个属性来访问它`cgImage`，`ciImage`因此`UIImage`您会认为访问这些属性和调用`myImage.cgImage.copy()`会为您提供此数据的副本，这是可以原谅的。它没有。复制`cgImage`和`ciImage`结构会为您提供这些结构的副本，但副本仍然指向原始数据存储——在本例中，是磁盘上的文件。

这意味着您会得到最初看起来相当令人惊讶的结果。您可以`UIImage`从磁盘成功创建，删除磁盘上的文件，您仍然可以返回一个“工作”非常愉快的非可选`UIImage`，除了图像不再可用于访问或显示有用数据的次要实用性。

答案是在创建新`UIImage`. 使其易于使用的一种方法是在`UIImage`其自身上创建一个扩展：

```
extension UIImage {
    func deepCopy() -> UIImage? {
        UIGraphicsBeginImageContext(self.size)
        self.draw(in: CGRect(x: 0, y: 0, width: self.size.width, height: self.size.height))
        let copiedImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return copiedImage
    }
} 
```

这很好用。除了消耗大量内存的图形上下文之外，如果您在循环中使用它。这很有趣，因为在过去您需要在这种情况下进行一些手动内存管理，但从 Xcode 12.5 开始，如果您尝试过，您会被告知基础管理这些对象的内存。这似乎是真的，只要这些对象在技术上没有泄露。但是它们也不会在有用的时间尺度上发布，并且内存是针对您自己的应用程序计算的。据推测，这些分配最终会被系统耗尽，但如果这样的速度不足以循环数千张图像，并根据我的经验将它们从磁盘复制到核心数据管理中......而您的应用程序不会因内存使用而关闭。不要害怕，有一个更好的选择：

```
extension UIImage {
    func deepCopy() -> UIImage? {
        guard let data = self.pngData() else { return nil }
        return UIImage(data: data, scale: self.scale)
    }
} 
```

它使用内存的速度不如第一种方法……尽管它仍然积累到足以需要考虑如何为大型集合主动管理它。但是对于单个图像或少量数字，它可以这样使用：

```
if let FileManager.default.fileExists(atPath: workingCopyPath),
   let workingCopy = UIImage(contentsOfFile: imagePath),
   let securedImage = workingCopy.deepCopy() {
    do {
        try FileManager.default.removeItem(atPath: imagePath)
        return securedImage
    } catch let error {
        print(error.localizedDescription)
    }
} 
```

UIImage 在默认情况下不能以这种方式工作当然是有原因的，甚至提供了一种方法来做到这一点。您正在将数据读入内存（在第一种情况下实际绘制图像）以创建深层副本。这对于这个问题的意图是必要的——考虑到它对性能的影响，注意何时使用这种方法很重要。

如果在循环中使用这种方法，您需要采取一些额外的步骤来主动管理内存。最重要的是将进程包装在本地自动释放池中，这很简单。然而，这个池的内存只会在你的循环完成时被耗尽，所以如果你正在处理大量的图像，那么就批量处理它们。这是一个如何做到这一点的示例，使用枚举器但每次只在内循环中处理 50 个图像：

```
while try FileManager.default.contentsOfDirectory(atPath: path).count > 0 {
    let enumerator = FileManager.default.enumerator(atPath: peopleImagesURL.path)

    autoreleasepool {
        var count = 0
        while let fileName = enumerator?.nextObject() as? String {
        // Batch to only 50 images before draining pool, to cap memory use.
        guard count < 50 else { break }
        count += 1
        if let workingCopy = UIImage(contentsOfFile: imagePath),
           let securedImage = workingCopy.deepCopy() {
        do {
                ... // do whatever you are going to do with the secured image in the loop.
                try FileManager.default.removeItem(atPath: imagePath)
            } catch let error {
                print(error.localizedDescription)
            }
        }
    }
} 
```

此代码示例的一个限制是它不能处理内部循环由于某种原因无法删除图像的情况。例如，如果由于某种原因您无法将特定图像写入数据库，则会在`...`上面抛出错误，因为该文件您永远无法访问`FileManager.default.removeItem(atPath:)`. 结果，外部循环总是会在目录中找到超过零个文件，并且在处理完所有文件之后，您将不断地重新循环内部循环，如果该特定文件永远无法被重新抛出，则可能会重复抛出相同的错误处理。如果这是一种可能性，那么重新设计上述内容以解决此问题是有意义的。

（感谢此处的原始 Stack Overflow 答案和[此处](https://stackoverflow.com/a/10060742)的Swift 版本[，](https://stackoverflow.com/a/60543725/842106)这是此代码的基础。他们回答了一个相关问题，其中发布者有不同的原因想要进行深度复制，但他们自己的用例实际上是与这里的问题相同。建议将其作为对`UIImage`谎言的扩展而归咎于我。在那张纸条上，您实际上可以删除`self`扩展中的所有引用，它会工作得很好......只是在代码中看起来更清晰示例以包括它们。）

# matlab - 如何将行向量添加到列向量，如矩阵乘法

> ID：11690743
> 
> 赞同：1
> 
> 时间：2012-07-27T15:15:38.063
> 
> 标签：matlab, product, vectorization, addition

我有一个 nx1 向量和一个 1xn 向量。我想以一种特殊的方式添加它们，比如以一种有效的方式（向量化）进行矩阵乘法：

例子：

```
A=[1 2 3]'

B=[4 5 6]

A \odd_add B = 
[1+4 1+5 1+6
 2+4 2+5 2+6
 3+4 3+5 3+6
] 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:19:47.003

您可以使用[`bsxfun`](http://www.mathworks.de/help/techdoc/ref/bsxfun.html)：

```
A=[1 2 3]'

B=[4 5 6]

bsxfun(@plus, A, B) 
```

结果是

```
ans =

     5     6     7
     6     7     8
     7     8     9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:54:23.783

您可以使用该`repmat`函数（复制矩阵）：

```
repmat(A,1,3)+repmat(B,3,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T15:44:28.667

从 R2016b 开始，您可以简单地执行以下操作：

```
A=[1 2 3]'

B=[4 5 6]

A+B

ans =

     5     6     7
     6     7     8
     7     8     9 
```

Matlab 将默默地扩展两个向量并进行元素明智的求和。此功能并非没有争议。您可以在此处查看详细信息：

[Matlab 扩展算术](https://blogs.mathworks.com/loren/2016/10/24/matlab-arithmetic-expands-in-r2016b/)

# vb.net - 消息：无效字符 Internet Explorer

> ID：11690751
> 
> 赞同：2
> 
> 时间：2012-07-27T15:16:01.053
> 
> 标签：vb.net, internet-explorer

我正在尝试调试突然停止工作并出现以下错误的应用程序。当我通过 Google Chrome 运行该应用程序时，一切正常，但当它在 Internet Explorer 中运行时，它不起作用。应用程序已经投入生产很长时间了，但它刚刚开始无法工作我不知道是什么可能导致 Internet Explorer 中的这些错误以及如何调试它们？

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET      CLR 3.5.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)
Timestamp: Fri, 27 Jul 2012 15:11:31 UTC

Message: Invalid character
Line: 1
Char: 2
Code: 0
URI: http://web-davw01/ApTrac/AddContact.aspx

Message: Invalid character
Line: 1
Char: 2
Code: 0
URI: http://web-davw01/ApTrac/AddContact.aspx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:36:44.063

您需要在 IIS Web 服务器上[注册 ASP.NET ：](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.80%29.aspx)

1.  运行`CMD.exe`。
2.  将目录更改为 .NET 框架的最新版本。例如`cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319\`
3.  跑`aspnet_regiis.exe -i`

# ruby - 慢速流式传输或根本没有流式传输

> ID：11690752
> 
> 赞同：2
> 
> 时间：2012-07-27T15:16:02.947
> 
> 标签：ruby, streaming, sinatra, thin

我写了一个小脚本，用 Sinatra 和 Thin 逐字节流式传输文件：

```
#!/usr/bin/env ruby

require 'sinatra'
require "sinatra/streaming"

get '/' do
  stream do |out|
    File.open("/usr/share/doc/ia32-libs/copyright", "r") do |fd|
      fd.each_byte do |byte|
        break if out.closed?
        putc byte.chr
        out << byte.chr unless out.closed?
      end
    end
  end
end 
```

这按预期工作：

```
% ruby streamer.rb
== Sinatra/1.3.2 has taken the stage on 4567 for development with backup from Thin
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:4567, CTRL+C to stop

% curl http://127.0.0.1:4567 
```

并且文件内容两边都写到stdout

如果我删除该行`putc byte.chr`，则服务器崩溃并被杀死`kill -9`

* * *

如果我将此脚本更改为模块化样式并添加一个`config.ru`：

```
#!/usr/bin/env ruby

require 'sinatra/base'
require "sinatra/streaming"

class TestStreamer < Sinatra::Base
  helpers Sinatra::Streaming

  get '/' do
    stream do |out|
      File.open("/usr/share/doc/ia32-libs/copyright", "r") do |fd|
        fd.each_byte do |byte|
          break if out.closed?
#          putc byte.chr
          out << byte.chr unless out.closed?
        end
      end
    end
  end
end 
```

配置.ru：

```
$:.unshift(File.join(File.dirname(__FILE__)))

require 'rubygems'
require 'sinatra/base'
require 'streamer_modular'

map '/' do
  run TestStreamer
end 
```

它启动：

```
% thin start
>> Using rack adapter
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

但是当我发出请求时，文件在双方的发送速度都非常慢，并且在 30 秒后关闭。在这种情况下，Sinatra 不会崩溃。

```
% time curl -v http://127.0.0.1:3000
* About to connect() to 127.0.0.1 port 3000 (#0)
*   Trying 127.0.0.1... connected
* Connected to 127.0.0.1 (127.0.0.1) port 3000 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.21.0 (x86_64-pc-linux-gnu) libcurl/7.21.0 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6
> Host: 127.0.0.1:3000
> Accept: */*
> 
< HTTP/1.1 200 OK
< X-Frame-Options: sameorigin
< X-XSS-Protection: 1; mode=block
< Content-Type: text/html;charset=utf-8
< Connection: close
< Server: thin 1.4.1 codename Chromeo
< 
* Closing connection #0
This package was cre
curl -v http://127.0.0.1:3000  0,01s user 0,00s system 0% cpu 32,559 total 
```

当我删除流助手时，文件会立即写入服务器端的标准输出：

```
#!/usr/bin/env ruby

require 'sinatra/base'
require "sinatra/streaming"

class TestStreamer < Sinatra::Base
  helpers Sinatra::Streaming

  get '/' do
#    stream do |out|
    begin
      File.open("/usr/share/doc/ia32-libs/copyright", "r") do |fd|
        fd.each_byte do |byte|
        #  break if out.closed?
          putc byte.chr
        #  out << byte.chr unless out.closed?
        end
      end
    end
  end
end 
```

* * *

```
% ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux]

% gem list

*** LOCAL GEMS ***

backports (2.6.2)
bundler (1.1.5, 1.1.3)
daemons (1.1.8)
eventmachine (0.12.10)
rack (1.4.1)
rack-protection (1.2.0)
rack-test (0.6.1)
sinatra (1.3.2)
sinatra-contrib (1.3.1)
thin (1.4.1)
tilt (1.3.3)

% gem update
Updating installed gems
Nothing to update

% ls -al /usr/share/doc/ia32-libs/copyright
-rw-r--r-- 1 root root 607403  2\. Jan 2012  /usr/share/doc/ia32-libs/copyright

% head -n2 /usr/share/doc/ia32-libs/copyright
This package was created by Daniel Jacobowitz <dan@debian.org> on Sun, Aug
8th, 2004\.  It was based on the ia32-libs package by Bdale Garbee 
```

我错过了什么吗？你能重现这个，也许能为我找到一个解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:31:03.337

在这种模式下，在 Thin 上逐字节流式传输效率有点低，因为 Thin 基于 EventMachine 需要大量调度和延迟（因此 Mike 关于流式处理在 Thin 上不起作用的评论，Mike 可能有 Rails 背景，其中这种流式处理在 Thin 上确实不起作用）。

但是，Thin（和任何 Rack 服务器）应该能够直接流式传输文件：

```
get '/' do
  File.open("/usr/share/doc/ia32-libs/copyright", "r")
end 
```

# php - 关于发送邮件消息的PHP问题

> ID：11690753
> 
> 赞同：0
> 
> 时间：2012-07-27T15:16:05.477
> 
> 标签：php, mysql

使用 php 代码发送电子邮件时遇到问题。我有一个表单，它将附件发送到文件夹并将附件的名称发送到数据库，以便随后在邮件中发送文件的链接。

问题是文件和所有其他文件都按照它应该的方式进行，但我似乎无法创建链接。

这是代码：

```
$email = $_REQUEST['email'] ;
$to = $_REQUEST['to'] ;
$subject = $_REQUEST['subject'] ;
$message = ''.$_REQUEST['message'].'<a href="http://lamyse.net/images/'.$file_name.'"> download</a>';

$sql="SELECT file  FROM login_admin WHERE user_name='dori'";
$result=mysql_query($sql);
while ($row = mysql_fetch_array($result)) {

$file_name = $row['file'];}

mail($to, $subject, $message, "From:" . $email);

$photo =$_FILES['file']['name'];

$target = "images/";
$target = $target . basename( $_FILES['file']['name']); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:19:49.077

`$file_name`在你尝试使用它之后，你直到几行才得到。快速解决办法是搬家

```
$message = ''.$_REQUEST['message'].'<a href="http://lamyse.net/images/'.$file_name.'"> download</a>'; 
```

在您的`while`循环下方。

# python - 逐步处理日志文件：提取数据并发送到另一个进程（zabbix）

> ID：11690756
> 
> 赞同：1
> 
> 时间：2012-07-27T15:16:14.350
> 
> 标签：python, bash, logging, zabbix

我希望能够从许多日志文件中提取数据。然后将提取的数据发送到 zabbix。

举个例子，假设一个（巨大的）日志文件包含如下信息

```
date: processed 566766 lines
date: processed 324523 lines
date: processed 546747 lines
date: processed 005643 lines 
```

我希望能够将这些数据发送到 Zabbix。

使用 awk 我只会做类似的事情

```
cat logfile | awk '/processed \d+ lines/ { system("zabbix command " $3) }' 
```

我的问题是因为文件很大，并且因为我不想要重复的数据，所以我需要找到一种方法来开始读取日志文件，从上次运行时中断的地方开始

所以它需要记住它直到上次读取的点，并开始只处理新添加的行。

我尝试**了 fetchlog**，但由于某种原因它不起作用并且没有得到维护。

你知道一个可以跟踪不断增长的日志文件的好实用程序，还是一种 Pythonic 方法？

我似乎记得 syslog-ng 或 rsyslog 对此有所帮助，但我认为它们仅适用于 syslog 样式的日志，而我的没有遵循任何标准。

问候

亚历山德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:34:57.170

Zabbix 的人似乎听了我的祈祷：

[http://blog.zabbix.com/zabbix-2-2-features-part-7-value-extracting-from-logfiles-and-more/2272/#more-2272](http://blog.zabbix.com/zabbix-2-2-features-part-7-value-extracting-from-logfiles-and-more/2272/#more-2272)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:52:50.413

Zabbix 2.0 改进了日志文件监控，请参见[此处](http://www.zabbix.com/documentation/2.0/manual/config/items/itemtypes/zabbix_agent#supported_item_keys)。

格式：

```
log[file,<regexp>,<encoding>,<maxlines>,<mode>] 
```

对于正则表达式，您可以在日志文件的每一行中指定一个单词。

对于模式，**skip**告诉 Zabbix 不要处理旧数据。

例子：

```
log[logfile,processed,,,skip] 
```

您也可以编写脚本，只需将运行的每个脚本的最后行号存储在文件中，并将其作为变量存储在脚本中。然后做这样的事情：

```
tail -n +$line_number logfile | awk '{print $3}' 
```

您可以使用 wc 获取最后一行号：

```
wc -1 logfile > /tmp/number_file 
```

您需要为此 +1，这样您就不会两次解析最后一行。

可能值得将所有值存储在文件中，将主机名和项目键添加到每一行，然后使用[zabbix_sender](http://www.zabbix.com/documentation/1.8/manpages/zabbix_sender)。

希望有帮助。

# jquery - 修改 div 内的段落元素

> ID：11690757
> 
> 赞同：0
> 
> 时间：2012-07-27T15:16:27.253
> 
> 标签：jquery, dom

需要在网页中添加一个元素，克隆实际。

```
console.log(($this)); 
```

给出这样的东西：

```
<div id="id" class="class" style="style">
<p style="style">World</p>
</div> 
```

我想在“World”之前添加具有完全相同结构的单词“Hello”

尝试使用 attr() 或 html() 但替换所有属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:20:09.840

单线ftw：

```
$("#id > p").prepend("Hello "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:30:34.623

```
var $hello = $(("#id > p")).clone();
$hello.text("Hello");
$hello.prependTo($("#id")); 
```

[http://jsfiddle.net/VmAPr/](http://jsfiddle.net/VmAPr/)

当然，如有必要，您可以使用*:first*或*:first-child*选择器，并将中间结果分配给变量或一行中的所有内容）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:18:06.670

```
var currentcontent=$("#id").find("p").text();
$("#id").find("p").text("Hello"+currentcontent); 
```

这将只对具有该特定 ID 的一个 DIV 执行此操作（ID 是唯一的）

示例：http: [//jsfiddle.net/trdxg/2/](http://jsfiddle.net/trdxg/2/)

如果要对**n**个具有相同结构的元素执行此操作，可以更改 jQuery 选择器以使用`class`.

```
$(function(){
    $("div.class").each(function(index,item){
       var item=$(this);
        var currentcontent=item.find("p").text();
        item.find("p").text("Hello"+currentcontent); 

    }); 
});​ 
```

示例：http: [//jsfiddle.net/trdxg/7/](http://jsfiddle.net/trdxg/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T15:18:59.493

您提到要“克隆实际”。以下是克隆`$this`和修改克隆内容的方法：

```
var $clone = $this.clone();
$clone.find('p').text(function(i, oldText){
    return "Hello " + oldText;
});
$clone.appendTo('#someContainer'); // now put the copy somewhere else 
```

**编辑：**克隆时请记住，您不希望多个元素具有相同的 id。看起来你只是`id="id"`为了举例而放在那里，但它仍然值得指出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T15:19:07.763

```
$('#id > p').text(function(i,oldValue){
    return "Hello " + oldValue;
}); 
```

# regex - vim 匹配多个 ^M 前面有东西就行了 (ff=unix)

> ID：11690758
> 
> 赞同：1
> 
> 时间：2012-07-27T15:16:30.170
> 
> 标签：regex, vim, match

(^M 这里是^V^M, ff=unix)

`s/^M*$/\^M/`工作正常，在任何行将 0-many ^M 转换为一个 ^M。

但是尝试仅在匹配行上执行此操作，例如“matchtext is here with more and more text^M^M^M”，`s/^matchtext.*\zs^M*$/\^M/`但它不起作用，而是添加了一个 ^M ？

`.*`这是我不明白 的这里的行为，`s/\zs^M*$/\^M/`有效但只是介绍`s/.*\zs^M*$/\^M/`没有。

魔法/魔法问题？`s/.\\*\zs^M*$/\^M/`似乎工作，但又`s/matchtext.\\*\zs^M*$/^M/`没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:44:58.337

您`.*`正在匹配所有内容，包括所有尾随`^M`s，这没有任何内容可供您`^M*`匹配，并且它确实不匹配任何内容，因为它`*`允许匹配 0 个实例。第一个`*`的贪婪支配了第二个的贪婪`*`。

要修复它，您可以制作第一个`*`非贪婪 ( `:help non-greedy`) 但我认为您应该只使用该`:g`命令，如下所示：

```
:g/^matchtext/s/^M*$/\^M/ 
```

# c++ - 编写非虚拟条件成员函数是否安全？

> ID：11690763
> 
> 赞同：0
> 
> 时间：2012-07-27T15:16:54.537
> 
> 标签：c++, oop, c++11, c-preprocessor

1.  这样做[二进制]安全吗？

    ```
    struct Foo {

        #if __cplusplus > 199711L
            Foo( std::initializer_list<int> & list ) {
                /* ... */
            }
        #endif

    }; 
    ```

    我已经看过[这个主题](https://stackoverflow.com/questions/5684071/conditional-member-functions)，但是没有回答 OP 原始问题。

2.  有没有更好的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:18:28.667

它可能很好，DirectX 结构是通过这种方式实现的，但是它支持 C 和 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:42:23.887

我假设你：

*   将此类代码编译到库中，一直在升级您的编译器，现在想用 C++11 编译您的代码（或者因为您没有代码而不能），或者，

*   在 C++11 之前的库中已有代码，现在您已经升级了编译器，您希望使用上述代码并与旧库“兼容”，或者，

*   想要在没有 C++11 的情况下编译代码并将其与使用相同编译器使用 C++11 编译的代码链接。

在每种情况下，答案都不是 C++ 问题，而是编译器 ABI 问题，因为它涉及 (i) 链接阶段是否有效以及 (ii) 类的运行时形式等是否仍然有效在编译器/版本/编译器设置之间有效。

因此，您需要检查您正在使用的编译器的文档，以确定它是否是“二进制安全的”。

**注意＃1：**如果您的编译器已经（/已经）以任何方式更改了异常处理发出的代码设计、类的 RTTI 布局和/或名称修改方案，那么您的答案是，“不，这不安全。” 但这些可能不是唯一的情况。

**注意#2：**如果它使用相同的编译器和不同的设置（例如，使用 C++11 和不使用），那么当您排除某些模块的代码并将其用于其他模块时，您在技术上违反了 ODR（一个定义规则）假设同一个程序。在这种情况下，结果在技术上是实现定义的，但是，由于它不是虚拟的，因此它非常、非常、非常有可能与大多数编译器一起工作，前提是只使用一个编译器的一个版本。

# maven - 如何使用正确的 rpm 名称将生成的 Maven RPM 工件安装到本地 m2 存储库？

> ID：11690764
> 
> 赞同：5
> 
> 时间：2012-07-27T15:16:56.003
> 
> 标签：maven, rpm

所以我可以成功地使用 maven RPM 插件来按预期生成 RPM 工件。

我在 pom.xml（打包为 pom）中使用附加的 rpm 目标，以便 RPM 插件将工件安装到本地 m2 存储库中（因为它绑定到包阶段）。

问题：RPM生成的名字很好，如下：code-module-1.0.3-SNAPSHOT20120727095507.amd64.rpm

但是，当 maven 将其安装到我的本地仓库时，我最终得到：

代码模块-rpm-1.0.3-SNAPSHOT-rpm.rpm

我丢失了全名，RPM 的体系结构部分，而是 Maven 将 rpm 附加到 .rpm 扩展名（我尚未定义的分类器）之前的名称末尾，并使用我的 pom 工件 ID 作为 rpm 名称代替rpm 名称本身。

我尝试使用 build-helper 插件指向目标目录中生成的 RPM，但这不起作用，因为 rpm 名称是动态生成的，并且 build-helper 插件只接受完整的文件名，没有通配符等。

我不想更改工件的最终名称，因为我会打破 maven 约定。

这是Maven输出：

```
[INFO] Installing /home/xzcx/Development/repository/svn/source/parent-project    
/code-module-rpm/target/rpm/code-module/RPMS/amd64/code-module-1.0.3-
SNAPSHOT20120727145507.amd64.rpm to  
/home/xzcx/.m2/repository/com/xpackage/ypackage/codepackage/code-module-rpm/1.0.3-
SNAPSHOT/code-module-rpm-1.0.3-SNAPSHOT-rpm.rpm 
```

请问有什么想法吗？

更新：我注意到 RPM 插件站点声明使用附加的：RPM 目标将允许您使用不同的架构等构建多个 RPM...但基于上述，唯一可行的方法是使用分类器作为RPM 名称的 arch 位不会转移到本地 repo 上的安装中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T20:32:53.723

分类器字段是一个重要的部分，因为文件扩展名通常不足以区分项目工件（例如`foobar-1.0.jar`，`foobar-1.0-javadoc.jar`都`foobar-1.0-sources.jar`具有文件扩展名`jar`）。

> 除了主要工件之外，还有附加到 Maven 项目的附加文件。这样的附加字段可以被它们的分类器识别和访问。

[http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-with-classifiers.html](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-with-classifiers.html)

`project.artifactId`所有项目工件都通过+相互关联， `project.version`因此被命名为`<artifactId>-<version>-<classifier>.<ext>`.

[http://maven.apache.org/plugins/maven-install-plugin/examples/installing-secondary-artifacts.html](http://maven.apache.org/plugins/maven-install-plugin/examples/installing-secondary-artifacts.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-11T19:12:51.057

我有同样的问题，但我想要的主要是从 code-module-rpm-1.0.3-SNAPSHOT-rpm.rpm 中删除 -rpm 因为我觉得它是多余的。我应该被命名为：code-module-rpm-1.0.3-SNAPSHOT.rpm（至少）

# cakephp - 如何以正常格式获取 cakephp 查询结果？

> ID：11690766
> 
> 赞同：1
> 
> 时间：2012-07-27T15:17:05.740
> 
> 标签：cakephp

我有这样的查询 **$this->find('all',$query);** .如何得到这个查询的结果数组，就像在普通的 php 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:42:45.597

```
$this->getResultInNormalFormat($this->find('all',$query),array('alias1','alias2','alias2'));    
    function getResultInNormalFormat($query_result,$tables){
        $extracted_array = array();
        $i = TRUE;
        foreach($tables as $table){
            $extracted_arrays[] =Set::extract($query_result,'{n}.'.$table) ;
            }
        foreach($extracted_arrays as $extracted_array){
            if($i){
              $merged_array = (Set::merge($extracted_array));
            }
            else{
              $merged_array = (Set::merge($extracted_array,$merged_array));
            }
            $i = FALSE;
            }
        return $merged_array;
         } 
```

# python - 数据库访问生成器功能有优势吗？

> ID：11690770
> 
> 赞同：5
> 
> 时间：2012-07-27T15:17:21.960
> 
> 标签：python, generator, mysql-python

编写以下生成器函数是否比仅`.fetchone()`在 while 循环中调用有优势？如果是这样，那将是什么优势？

谢谢。

```
def testf2():
    db = connectToMysqlDB(None)

    sql_statement = " ".join([
        "select d.* ",
        "from dr_snapshot d ",
        "order by d.PremiseID asc, d.last_read asc; "])

    sel_cur = db.cursor()
    rc = sel_cur.execute(sql_statement)

    loop_ok = True
    while loop_ok:
        meter_row = sel_cur.fetchone()
        if meter_row:
            yield meter_row
        else:
            loop_ok = False

    yield None

for read_val in testf2():
   print(read_val)
   #Perform something useful other than print.

('610159000', 6, datetime.datetime(2012, 7, 25, 23, 0), 431900L, 80598726L)
('610160000', 6, datetime.datetime(2012, 7, 25, 23, 0), 101200L, 80581200L)
None 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T17:18:05.323

没有。从功能上讲，它们是相同的，但是如果您想重用代码，将其包装在生成器中会有好处。例如，您可以添加代码以在完成生成器块中的读取后关闭连接/光标。我建议您将其添加到上面的代码中，以便关闭游标。

```
def testf2():
    try:
        db = connectToMysqlDB(None)

        sql_statement = " ".join([
            "select d.* ",
            "from dr_snapshot d ",
            "order by d.PremiseID asc, d.last_read asc; "])

        sel_cur = db.cursor()
        rc = sel_cur.execute(sql_statement)

        loop_ok = True
        while loop_ok:
            meter_row = sel_cur.fetchone()
            if meter_row:
                yield meter_row
            else:
                loop_ok = False
    except ProgrammingError:
        print "Tried to read a cursor after it was already closed"
    finally:
        sel_cur.close() 
```

这将使重用变得更容易，因为您只需在一个地方进行连接管理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T17:22:18.177

看起来我是对的，mySQL 游标**是**可迭代的（[https://stackoverflow.com/a/1808414/138772](https://stackoverflow.com/a/1808414/138772)）。所以你可以这样做而不是你的while循环（但我喜欢将数据库访问代码放在生成器函数中的想法，所以保留它）：

```
for meter_row in sel_cur:
    yield meter_row 
```

另请注意，您可能不想要那个 final `yield None`；`StopIteration`异常用于指示迭代器输出的耗尽，并且是循环`for`用作其标志来停止循环的，因此通过在输出末尾包含`yield None`你最终`None`没有真正的增益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:35:51.520

使用生成器为您在现有代码中使用结果提供了额外的灵活性。例如，您可以将其直接传递给`csv.writer` `writerows`函数。

# php - 如何检查函数是否作为参数传递？

> ID：11690772
> 
> 赞同：0
> 
> 时间：2012-07-27T15:17:22.690
> 
> 标签：php

## 问题：

**如何检查函数是否作为参数传递？**

特别是如果正在传递的函数返回一个字符串等？

IE 在下面的示例中，我不想将函数 html 作为参数传递给 htmlentities，但我确实想要 htmlentities 其他任何东西。还假设可能有多个参数需要稍后使用函数。

### 例子：

```
function html($tag,$content)
{

if(!is_callable($content)){$var=htmlentities($var, ENT_NOQUOTES, "UTF-8");}

return "<".$tag.">".$content."</".$tag.">";

}

echo html(html('Example','Example'),'Example'); 
```

这个例子似乎对我不起作用。当它是一个函数时，我仍然会得到 htmlentitied 内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:00:28.757

虽然您**无法**检测传递给函数的字符串是否是另一个函数的结果，但您可以传递不是字符串但行为类似于字符串的内容。

虽然我并不真正推荐这个，而且副作用可能很多，但这里有*一个可能的*解决方案。

一个假装成字符串的助手类，但它是一个类。

```
class sillyString
{
    private $string = '';

    public function __construct($string)
    {
        $this->string = $string;
    }

    public function __toString()
    {
        return $this->string;
    }
} 
```

你的功能。我稍微调整了一下，但它会检查内容的类型。

```
function html($content, $tag)
{
    if (!is_object($content)) {
        $content = htmlentities($content, ENT_NOQUOTES, "UTF-8");
    }

    return new sillyString("<".$tag.">".$content."</".$tag.">");
} 
```

像以前一样调用你的函数。

```
print html(html('content','tag1'),'tag2'); 
```

所以函数现在可以告诉你没有传递一个字符串，但你仍然可以像函数内部的字符串一样使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:23:14.517

从我在您的示例中可以看出，实现您正在寻找的最佳方法是第三个参数`$escape_var`：

```
function foo( $var, $var2, $escape_var = true)
{
    if( $escape_var === true)
        $var = htmlentities( $var, ENT_NOQUOTES, "UTF-8");

    return $var." ".$var2;
}

echo foo(foo('<Example>','<Example>'),'<Example>', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:26:14.527

不，您无法检查，您没有传递函数，只是传递了函数的返回值。

相反，您可以根据需要执行以下操作。

```
function foo() {
  $vars = func_get_args();
  foreach ($vars as &$var) {
    $var = htmlentities($var, ENT_NOQUOTES, "UTF-8");
  }
  return implode(" ", $vars);
}

// usage
foo('<Example>', '<Example>', '<Example>'); 
```

# c++ - 即使通过 const_cast 更改了 const 变量，也获得相同的值

> ID：11690773
> 
> 赞同：2
> 
> 时间：2012-07-27T15:17:23.697
> 
> 标签：c++

考虑下面的代码片段：

```
int main()
{
    const int i=3;
    int *ptr;

    ptr=const_cast<int*>(&i);
    *ptr=5;

    cout<<"i= "<<i<<endl;  <------------------- statement 1
    cout<<"*ptr= "<<*ptr<<endl;  <------------- statement 2

    return 0;
} 
```

我得到的输出为：

```
i= 3
*ptr= 5 
```

[http://ideone.com/Bvme6](http://ideone.com/Bvme6)

为什么`i`不通过指针改变值？

我知道抛弃显式声明为 const 的变量的 const 特性并修改其值是“未定义的行为”。我很想知道：'编译器用值替换程序中的变量'是否有任何编译器优化机制？这意味着语句 1 被编译器解释为：

```
cout<<"i= "<<3<<endl; 
```

即使声明

```
ptr=const_cast<int*>(&i); 
```

被替换为

```
 ptr=(int*)(&i); 
```

我得到相同的输出：http: [//ideone.com/5lzJA](http://ideone.com/5lzJA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:19:58.713

> 编译器用值替换程序中的变量是否有任何编译器优化机制？

是的; 这就是为什么您看不到价值变化的原因。试图修改`const`对象的行为是未定义的，以便允许这样的优化（以及允许将对象放置在不可写的内存中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:35:46.770

这不是优化。优化是将一个程序转换为另一个具有相同行为但使用较少资源的程序。您的程序没有任何已定义的行为，因此您不可能对其应用任何产生相同行为的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:19:42.383

很可能因为它是一个 const int，编译器正在优化并直接用 i 的值替换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:25:42.987

`i` *可以*存储在内存的受保护区域中以供`ptr`指向。当然，任何事情都可能是这种情况，这就是它**未定义**的原因- 这基本上意味着如果您确实尝试触发未定义的行为，则不要依赖于发生的任何特定行为。

据您所知，它可能会导致您的计算机进入心脏骤停或开始发射激光束，但您永远不知道，因为它是......（等待_等待_它）......**未定义**;）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T12:14:24.217

我有同样的问题，我添加了 volatile，现在它正在修改：

```
#include<iostream>
using namespace std;

int main()
{
  volatile const int a=5;
  int *p = const_cast<int*>(&a);
  *p=6;
  cout<<"a="<<a;
  return 0;
} 
```

输出：

```
a=6 
```

volatile 告诉编译器可以修改标识符（如果不是通过此代码，则由其他代码修改，因此不要执行任何优化）

# android - 阻止应用程序在安卓平板电脑上运行

> ID：11690774
> 
> 赞同：3
> 
> 时间：2012-07-27T15:17:26.290
> 
> 标签：android, manifest, tablet, google-play

我的项目支持手机和 10 英寸平板电脑的单个 apk。然而，手机和平板电脑的用户界面非常不同。我将在下周发布该应用程序，并且我希望该应用程序暂时仅可供电话用户使用。由于测试未完成，平板电脑版本被搁置。清单中的以下声明是否会阻止应用程序在 10 英寸平板电脑上安装/可见

```
<manifest ... >
    <supports-screens android:smallScreens="true"
                      android:normalScreens="true"
                      android:largeScreens="true"
                      android:xlargeScreens="false"/>
    ...
    <application ... >
        ...
    </application>
</manifest> 
```

解决方案应该是：这会从 10 英寸（xLarge）平板电脑中过滤掉应用程序吗？

```
<manifest ... >
<compatible-screens>
    <!-- all small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
</compatible-screens>
...
<application ... >
    ...
<application> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T15:33:34.333

> 清单中的以下声明是否会阻止应用程序在 10 英寸平板电脑上安装/可见

No. With that manifest entry, you are telling Android to allow your app on `-xlarge` devices, with Android doing some extra work to try to make your UI stretch to fill the screen.

To block installation (and be filtered out of the Play Store listings), [you will need to use `<compatible-screens>`](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html).

# jquery - Stellar.js 位置问题

> ID：11690777
> 
> 赞同：4
> 
> 时间：2012-07-27T15:17:51.360
> 
> 标签：jquery, css, positioning

我正在尝试使用 Stellar.js 来制作视差效果，但是 data-stellar-ratio="" 标签让我的元素偏离了位置。我有这个代码：

```
<div class="slider" id="yours" data-slide="3" data-stellar-background-ratio="0.5">
<div class="container">
<div class="outer-ring" data-stellar-ratio="0.6">
<div class="inner-ring" data-stellar-ratio="-0.6" data-stellar-vertical-offset="0">
<div class="core" data-stellar-ratio="-0.3" data-stellar-vertical-offset="0"></div></div></div></div></div> 
```

使用这些 CSS：

```
.outer-ring {
    width: 635px;
    height: 635px;
    background: url(../img/conheca/wheel-1.png) no-repeat;
    position: absolute;
    top: 50%;
    margin-top: -317px;
    left: 50%;
    margin-left: -317px;
}

.inner-ring {
    width: 478px;
    height: 478px;
    background: url(../img/conheca/wheel-2.png) no-repeat;
    position: relative;
    margin: 0px auto;
}

.core {
    width: 360px;
    height: 360px;
    background: url(../img/conheca/wheel-3.png) no-repeat;
    position: relative;
    margin: 0px auto;
} 
```

当标签中没有恒星的“数据比率”时，它很合适，但是当我输入这个参数时，它会改变 .inner-ring 和 .core 的“顶部”。

我在水平定位方面遇到了这样的问题，.container div 有“margin：0 auto”，而子元素在 div 有“position：relative”时离开了 div，但我砍掉了“margin”一段代码恒星脚本，它工作。

对不起，如果我有点困惑，但这件事让我发疯了，因为我一直在关注教程（http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website -using-stellar-js/) 没有提到这一点，也没有提到 Stellar.js 网站。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:48:27.033

Make sure that all parent elements has `position: relative`?

Also, you can set offset when calling the script, and if you only going to work with vertical scrolling you can simply shut off the horizontal scrolling:

```
 $(window).stellar({
    horizontalScrolling: false,
    verticalOffset: 0,
    horizontalOffset: 0
  }); 
```

Good luck!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:47:53.437

试试这个教程： [http ://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)

我发现 stellar.js 尚未完善。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T19:22:16.117

我在这里回答了一个类似的问题 - [stellar.js 背景图像位置问题](https://stackoverflow.com/questions/12484196/problems-with-background-image-position-on-stellar-js/21973205#21973205)

基本上是因为您在恒星功能中将水平滚动设置为“真”。

# android - 简单的游戏错误

> ID：11690780
> 
> 赞同：1
> 
> 时间：2012-07-27T15:18:08.773
> 
> 标签：android, view, surfaceview

我编写了一个具有以下结构的简单游戏。主要 xml 布局有用户视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menuRL"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.sokolovlev.UFOtest03.MenuView
            android:id="@+id/menuView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

</RelativeLayout> 
```

此视图有两个文件。首先是用户MenuView：

```
package com.sokolovlev.UFOtest03;

import android.content.Context;
import android.util.AttributeSet;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MenuView extends SurfaceView implements SurfaceHolder.Callback
{
    private SurfaceHolder mSurfaceHolder; //Draw surface

    public static MenuManager mMenuManager; //Draw manager

    public MenuView(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        // Surface events registration
        mSurfaceHolder = getHolder();
        mSurfaceHolder.addCallback(this);

        mMenuManager = new MenuManager(mSurfaceHolder, context);
    }

    @Override

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {
        mMenuManager.initPositions(height, width);
    }

    @SuppressWarnings("static-access")
    @Override
    public void surfaceCreated(SurfaceHolder holder)
    {
    mMenuManager.setRunning(true);
        try 
        {
            mMenuManager.start();
        } 
        catch (Exception e) { }
    }

    @SuppressWarnings("static-access")
    @Override
    public void surfaceDestroyed(SurfaceHolder holder)
    {
        boolean retry = true;
        mMenuManager.setRunning(false);
        while (retry) 
        {
            try 
            {
                mMenuManager.join(); 
        retry = false;
            } 
            catch (InterruptedException e) { }
        }
    }
} 
```

第二个文件是这个绘图管理器：

```
package com.sokolovlev.UFOtest03;

import ...

public class MenuManager extends Thread
{
    private SurfaceHolder mSurfaceHolder;
    private static boolean mRunning;

    private int _screenHeight;
    private int _screenWidth;

    private ...

    Context c;

    private ...

    public MenuManager(SurfaceHolder surfaceHolder, Context context)
    {
        mSurfaceHolder = surfaceHolder;
        mRunning = false;
        c = context;

        ...
    }

    public static void setRunning(boolean running)
    {
        mRunning = running;
    }
    @Override
    public void run()
    {

        while (mRunning)
        {
            Canvas canvas = null;
            try
            {
                // подготовка Canvas-а
                canvas = mSurfaceHolder.lockCanvas(); 
                canvas.drawRGB(0, 0, 0);

                synchronized (mSurfaceHolder)
                {
                    //All drawing
                }
            }
            catch (Exception e) { }
            finally
            {
                if (canvas != null)
                {
                    mSurfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }
} 
```

一切正常！（步骤№1）但是如果我按下中央按钮，或者我有来电，或者我打电话给任务管理器（步骤№2）并返回我的应用程序 - 我没有我的绘图，只有黑屏（步骤№3） . 但是，如果我继续执行第 2 步，然后在我的应用程序中，我会发现一切正常。 ![在此处输入图像描述](../Images/ba4c1b9bade2c6613471242aa0157afa.png)

我不明白，哪里有重新加载会影响我的图纸！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:06:15.580

要解决此问题，我需要保存设置并重新启动 Surface。然后加载设置。（参见 LunarLander 示例）

# c# - 为什么 RijndaelManaged 加密后返回垃圾数据？

> ID：11690783
> 
> 赞同：1
> 
> 时间：2012-07-27T15:18:15.133
> 
> 标签：c#, rijndaelmanaged

我从[http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)获取了解密代码，并对其进行了如下修改。我有一个加密的例子，它在解码时工作得很好。但是当使用加密函数时，它返回带有奇怪符号的垃圾字符串。以下是加密/解密的功能。

加密字符串“hey”的示例：“???U?b???z?Y???”
再次解码时：“ûc{ÁpÅ`ñ”“Â”

我正在使用此代码将字节数组转换为字符串：

```
private string ByteArrayToString(byte[] input)
    {
        ASCIIEncoding dec = new ASCIIEncoding();
        return dec.GetString(input);
    } 
```

这是加密/解密功能。解密功能工作正常。

```
private string DecryptStringFromBytesAes(byte[] cipherText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");

        // Declare the string used to hold 
        // the decrypted text.
        string plaintext = null;

        // Create an RijndaelManaged object 
        // with the specified key and IV. 
        using (RijndaelManaged aesAlg = new RijndaelManaged())
        {
            aesAlg.Key = Key;
            aesAlg.Padding = PaddingMode.Zeros;
            aesAlg.Mode = CipherMode.ECB;

            // Create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for decryption. 
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {

                        // Read the decrypted bytes from the decrypting stream 
                        // and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            }

        }

        return plaintext;

    }

private byte[] EncryptStringToBytesAes(string plainText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (plainText == null || plainText.Length <= 0)
            throw new ArgumentNullException("plainText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        byte[] encrypted;
        // Create an RijndaelManaged object 
        // with the specified key and IV. 
        using (RijndaelManaged aesAlg = new RijndaelManaged())
        {
            aesAlg.Key = Key;
            aesAlg.Padding = PaddingMode.Zeros;
            aesAlg.Mode = CipherMode.ECB;
            // Create a decrytor to perform the stream transform.
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for encryption. 
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {

                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                    encrypted = msEncrypt.ToArray();
                }
            }
        }
        return encrypted;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:27:48.667

您观察到的是将任意字节（在 0-255 范围内）映射到字符的问题。有意义的字符仅在 32-255 范围内，甚至仅在 32-127 (ASCII) 范围内。低于 32 的值是所谓的不可打印字符，高于 127 的值取决于您使用的字符编码。这就是加密文本看起来像垃圾的原因。因此，桅杆密码系统将字节转换为合理的 ASCII 范围。一种这样的算法是 BASE64。因此，通过 BASE64 处理加密的字节可以得到所有可打印的字符，并且可以通过电子邮件毫无问题。在解密之前，您必须撤消 BASE64 编码。

使加密结果看起来更好的另一种方法是显示它的十六进制表示。例如，如果您有一个字节值`15`print `0F`。您可以使用它以十六进制表示您的字节数组：

```
private string ByteArrayToHexString(byte[] data)
{
    return String.Concat(data.Select(b => b.ToString("x2")));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:40:55.410

为了将您的输出作为数据的十六进制编码，请遵循[此处](https://stackoverflow.com/a/311179/3312)找到的方法。我将它们稍微修改为扩展方法：

```
 public static string ToHexString(this byte[] bytes)
    {
        return bytes == null ? string.Empty : BitConverter.ToString(bytes).Replace("-", string.Empty);
    }

    public static byte[] FromHexString(this string hexString)
    {
        if (hexString == null)
        {
            return new byte[0];
        }

        var numberChars = hexString.Length;
        var bytes = new byte[numberChars / 2];

        for (var i = 0; i < numberChars; i += 2)
        {
            bytes[i / 2] = Convert.ToByte(hexString.Substring(i, 2), 16);
        }

        return bytes;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:23:19.977

加密的字符串看起来像乱码。测试加密是否正常工作的方法是通过解密将字符串传回。如果它在解密时起作用，那么尽管对您来说看起来像是垃圾，但您知道该字符串是正确的。

# git - 如何针对旧版本的代码使用 ivy 集成版本？

> ID：11690787
> 
> 赞同：0
> 
> 时间：2012-07-27T15:18:28.043
> 
> 标签：git, mercurial, ivy, bisect

我的组织正在研究在多项目配置中使用 Apache Ivy 进行依赖管理。我们有一个主项目（称为 MAIN），大部分开发都在其中进行，还有一些辅助库项目（称为 LIBPROJ），我们将它们保存在单独的存储库中。我们现在要做的是在库项目发生变化时为它们构建 jar，并将它们提交到主项目，但这很头疼，并导致项目膨胀。

看起来使用像常春藤这样的东西很合适。我们设想使用我们的 Jenkins 服务器自动为 LIBPROJ 构建一个新的库 jar 并将其发布到 ivy，然后使用“latest.integration”版本自动将最新版本的 LIBPROJ 拉入 MAIN。但是，如果我们必须一分为二才能找出问题何时出现，这怎么能行呢？

我现在能想到的唯一方法是在对 LIBPROJ 进行更改时更改我们在 MAIN 中依赖的 LIBPROJ 的版本，但这并不比检查 jar 本身好多少。

我担心这一点的原因是因为在查看旧版本的 MAIN 的情况下，如果我只是检查一个，它将无法构建和运行，因为它要求最新的构建，即使是我的修订版我现在看的可能几天/几周/几个月不同步。这将破坏任何类型的二等分工具（例如在 git 或 mercurial 中），这是我真的不想做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:37:04.560

使用动态修订是 ivy 的一个正常而强大的功能。显然，您需要小心，因为当 3rd 方项目引入不兼容的更改时，*新*构建的依赖关系可能会失败。

我的使用建议：

*   **latest.release**：用于同一公司（或合作公司）生产的模块。
*   **latest.integration**：用于同一项目中其他团队制作的模块

这里的重点是管理变革。动态修订仅用于内部依赖关系，只有关闭协作团队才能足够快地做出反应，以构建由开发构建引入的失败。

对于第 3 方开源依赖项，我建议设置显式版本并定期检查它们以进行升级。

最后，如果您担心如何重现旧版本，可用的解决方案是在剪切发布时提交已解析的 ivy.xml 的副本。[ivy 交付任务](http://ant.apache.org/ivy/history/latest-milestone/use/deliver.html)可以做到这一点。

```
<ivy:deliver deliverpattern="ivy-resolved.xml" pubrevision="${version}" status="release"/> 
```

并且不要忘记，如果您将一个模块发布到您的 ivy 存储库中，那么解析后的 ivy 文件的副本也将在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:24:07.630

由于您的最后一句话，您不应该使用 latest.integration。恕我直言，最新概念在相同存储库中的项目之间特别有用，您希望将它们一起克隆/签出。

在与您类似的情况下，我正在使用版本号依赖项。不过，您可以自动更新版本号。

你可以创建一个脚本（不是我最喜欢的）：

1) 构建 LIBPROJ 库

2）然后检查主要并修改其依赖版本。

然而，在向我的同事介绍 IVY 时，我并不鼓励这样做。当您想要一个新版本的 LIBPROJ 时，请创建它并以明确的版本推送它。

然后更改 MAIN 中的依赖文件。

1）它不会膨胀二进制文件。

2) 为现在正在使用哪个版本创建跟踪感。

3) 版本控制。

# python - 如何使用 matplotlib？

> ID：11690793
> 
> 赞同：0
> 
> 时间：2012-07-27T15:18:44.813
> 
> 标签：python, numpy, python-3.x, matplotlib

Python 的图形生成文件之一是 Matplotlib(" [http://matplotlib.org/](http://matplotlib.org/) ")。我在 Windows7（64 位）操作系统上使用 Python3.2.1。我正在尝试下载相同的内容来运行 matplotlib.animation。

如果该组的任何一位尊敬的成员可以建议我如何下载相同的。

预先感谢，问候， Subhabrata Banerjee。

我无法导入 matplotlib.pyplot/matplotlib.pylab 如果我必须下载我可以从哪里下载？我在 Windows7（64 位）上使用 Python3.2.1。但是没有单独的下载 matplotlib.animation 怎么会很好呢？问候，苏哈布拉塔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:24:10.027

我不相信对 python 3 的完全支持已添加到 matplotlib 中。这是[状态页面](https://github.com/matplotlib/matplotlib-py3/wiki/)。

[它将在下一个版本中支持它](http://matplotlib.sourceforge.net/users/whats_new.html)。

如果你想在 python 中使用 matplotlib。我相信你应该使用 python 2.7，因为 Python 3 的巨大变化破坏了向后兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:22:16.170

您可以使用[pip](http://pypi.python.org/pypi/pip/)`matplotlib`通过以下命令 安装：`pip install matplotlib`

它将自动为您处理下载和依赖任务。

关于如何`pip`在 Windows 下安装，参考这里：[如何在 Windows 上安装 pip？](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)

# android - Android：构建 SDK？

> ID：11690795
> 
> 赞同：0
> 
> 时间：2012-07-27T15:18:50.587
> 
> 标签：android

我正在构建一个 Android 应用程序，我是一个新手，我想知道推荐什么构建 SDK 和所需的最低 SDK？

还有每一个是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:29:43.923

据我所知，构建 SDK 意味着您正在构建的 Android 操作系统版本和

所需的最低 SDK 是指：您要支持的最低 Android 操作系统版本。

例如

如果构建 SDK = 2.3.3

和所需的最低 SDK = 2.2

那么您的应用程序将在 2.2 及更高版本上运行

# ruby-on-rails - Rails，Ubuntu 12.04 中的分段错误创建项目

> ID：11690801
> 
> 赞同：0
> 
> 时间：2012-07-27T15:19:19.073
> 
> 标签：ruby-on-rails, openssl, rvm, ubuntu-12.04

我全新安装了 Ubuntu 12.04 Server 来设置 Ruby on Rails 开发环境。我按照本指南安装它[http://www.rubypluspl.us/2012/06/ubuntu-1204-ruby-on-rails-development.html](http://www.rubypluspl.us/2012/06/ubuntu-1204-ruby-on-rails-development.html)

在第 4 步之后，它说应该设置环境，我运行

```
$ rails new app 
```

这会导致发生此错误

```
run  bundle install
/home/jarek/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb:318: [BUG] Segmentation fault
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

紧随其后的是这个巨大的文本块。

[http://pastebin.com/Ps8bWxFG](http://pastebin.com/Ps8bWxFG)

我还没有找到任何解决方案。我在 StackOverflow 上尝试解决类似问题的答案是我必须进行全新安装的原因。任何人都可以帮助我启动并运行 Ruby 吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:34:49.737

确保安装以下列出的所有库：

```
rvm requirements 
```

以防万一清理 rvm 包：

```
rm -rf $rvm_path/usr 
```

然后重新安装红宝石：

```
rvm reinstall 1.9.3 
```

# php - Cgridview 使用扩展导出 csv

> ID：11690803
> 
> 赞同：0
> 
> 时间：2012-07-27T15:19:23.563
> 
> 标签：php, csv, yii, yii-extensions, cgridview

我在这里为 eexcelview 实现了包装扩展：http://www.yiiframework.com/extension/toexcel/ 以导出我的 cgridview 数据。但是，此时，我只能弄清楚如何导出整个模型的所有记录。

这是我在模型控制器中的操作

```
 public function actionExcel()
{
    $fileName = 'Packaging_Metric_Data_Export_'. date("m-d-y");
    // Load data (scoped)
    $model = PackagingMetric::model()->findAll();;

        // Export it
    $this->toExcel($model,
        array(
        //'id',
        'date',
        'room',
        'lot',
        'country',
        'total_labor_hours',
        'total_run_time',
        'std_rate',
        ),
        $fileName,
        array(
            'creator' => 'Data Access Portal',
        ),
        'Excel2007'
    );
} 
```

扩展页面上的注释说明使用与此类似的方法来实现此功能。但是，我似乎无法让它发挥作用。

```
$model = YourModel('search');
$model->type = 1; // This will filter out all the results whose type is 1 
$dataProvider = $model->search(); 
```

谁能阐明如何检索要由扩展导出的过滤后的 cgridview 结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:25:45.083

我没有使用过这个模块，但看起来你不是在寻找[CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)，而是某种[数据提供者。](http://www.yiiframework.com/doc/api/1.1/IDataProvider)

话虽如此，在上面的代码中，您有：

```
 $model = PackagingMetric::model()->findAll(); //removed extra ; 
```

我不确定 PackagingMetric 是什么，但它看起来像是在扩展 CActiveRecord，并包含一个[findAll()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail)方法，因此您应该能够使该行类似于：

```
$condition = 'lot = 1';
$model = PackagingMetric::model()->findAll($condition); 
```

# c# - 网站：MSB3270：处理器架构之间存在不匹配

> ID：11690804
> 
> 赞同：9
> 
> 时间：2012-07-27T15:19:26.707
> 
> 标签：c#, asp.net, .net, visual-studio-2010, msbuild

我有一个 Web 表单网站项目。该网站引用了 4 个类库项目。其中 3 个类库引用了第三方程序集。对于 3 个类库项目中的每一个，我都收到以下编译器错误。

> ASPNETCOMPILER：错误 ASPCONFIG：无法加载文件或程序集“myAssembly”或其依赖项之一。试图加载格式不正确的程序。[项目。元项目]

我已经在类库项目中尝试了 AnyCPU/x86/x64 的所有可能组合。我无法在网站项目上更改它。我有第三方 dll 的 x86 和 x64 版本。两个都试过了。

> “ClassLibrary.csproj”（默认目标）（4）->（ResolveAssemblyReferences 目标）-> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1561,5)：警告 MSB3270：那里正在构建的项目“MSIL”的处理器架构与参考“ThirdPartyDll，Version=xxx，Culture=neutral，processorArchitectu re=x86”，“x86”的处理器架构不匹配。这种不匹配可能会导致运行时失败。请考虑通过配置管理器更改项目的目标处理器架构，以便在项目和参考之间调整处理器架构，或者依赖与您项目的目标处理器架构相匹配的处理器架构的参考。[ClassLibrary.cspro j]

下图说明了解决方案配置。注意我不能从这里的“AnyCPU”改变，只能从每个单独的类库项目中改变。

![解决方案配置](../Images/32a0bdf6d78843718602c9bb129779d4.png)

所有 .NET 4

将网站转换为 Web 应用程序不是一种选择。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T16:07:26.027

显然，您有一个本机 32 位 DLL。因此，必须将 IIS 上的应用程序池配置为以 32 位模式运行 .NET 框架。

这可以在 IIS 管理器中进行配置。转到“应用程序池”，选择相关的应用程序池并打开“高级设置...”对话框。32 位选项接近顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:28:12.830

您引用的程序集之一仅适用于 x86，因此引用它的项目链必须仅针对 x86 构建。还要确保在部署应用程序池时配置为 32 位。

# c# - 尝试序列化 PropertyInfo 时引发异常

> ID：11690807
> 
> 赞同：3
> 
> 时间：2012-07-27T15:19:45.470
> 
> 标签：c#, .net, protobuf-net

是否应该支持序列化 PropertyInfo？如果没有，最好的解决方法是什么？我知道可以序列化类型（受支持），然后通过属性查找属性 - 想象一下查找可能很昂贵。

ps PropertyInfo 用于实现类似于 DataLoadOptions.LoadWith [http://msdn.microsoft.com/en-us/library/bb548760.aspx](http://msdn.microsoft.com/en-us/library/bb548760.aspx)的功能。

```
using System.IO;
using System.Reflection;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using ProtoBuf;

[ProtoContract]
public class A
{
    [ProtoMember(1)]
    public PropertyInfo Property { get; set; }
}

[TestClass]
public class UnitTest
{
    [TestMethod]
    public void TestMethod1()
    {
        var value = new A { Property = typeof(string).GetProperty("Length") };
        using (var stream = new MemoryStream())
        {
            // Raises InvalidOperationException
            // "No serializer defined for type: System.Reflection.PropertyInfo"
            Serializer.Serialize(stream, value);
        }
    }
} 
```

`InvalidOperationException`引发时调用堆栈：

```
protobuf-net.dll!ProtoBuf.Meta.ValueMember.BuildSerializer() Line 316   C#
protobuf-net.dll!ProtoBuf.Meta.ValueMember.Serializer.get() Line 188 + 0x24 bytes   C#
protobuf-net.dll!ProtoBuf.Meta.MetaType.BuildSerializer() Line 421 + 0x1f bytes C#
protobuf-net.dll!ProtoBuf.Meta.MetaType.Serializer.get() Line 344 + 0xe bytes   C#
protobuf-net.dll!ProtoBuf.Meta.RuntimeTypeModel.Serialize(int key, object value, ProtoBuf.ProtoWriter dest) Line 592 + 0x44 bytes   C#
protobuf-net.dll!ProtoBuf.Meta.TypeModel.SerializeCore(ProtoBuf.ProtoWriter writer, object value) Line 178 + 0x14 bytes C#
protobuf-net.dll!ProtoBuf.Meta.TypeModel.Serialize(System.IO.Stream dest, object value, ProtoBuf.SerializationContext context) Line 209 + 0xe bytes C#
protobuf-net.dll!ProtoBuf.Meta.TypeModel.Serialize(System.IO.Stream dest, object value) Line 193 + 0x10 bytes   C#
protobuf-net.dll!ProtoBuf.Serializer.Serialize<TestProtoBufNet.A>(System.IO.Stream destination, TestProtoBufNet.A instance) Line 88 + 0x18 bytes    C#
TestProtoBufNet.dll!TestProtoBufNet.UnitTest.TestMethod1() Line 24 + 0x10 bytes C# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:10:27.313

要添加@ikh 已经说过的内容，不，那不是受支持的类型。当我提到标准 BCL 类型时，我指的是*通用数据*类型，而不是反射类型。protobuf 和 protobuf-net 的重点是以数据为中心，但`PropertyInfo`etc 是实现，而不是数据。`PropertyInfo`事实上，WinRT 对于 a应该拥有多少信息有一个非常不同的想法。

然而！`Type` *如果您确定要对其进行序列化*，请注意支持 IIRC。因此，您可能可以通过代理来执行此操作（完全未经测试，我在这里使用的是 iPad！）：

```
[ProtoContract]
public class PropertyInfoSurrogate {
    [ProtoMember(1)]
    public Type Type { get; set; }
    [ProtoMember(2)]
    public string Name { get; set; }

    public static operator implicit PropertyInfoSurrogate(PropertyInfo value) {
        if(value == null) return null;
        return new PropertyInfoSurrogate {
             Type = value.DeclaringType, Name = value.Name
        };
    }
    public static operator implicit PropertyInfo(PropertyInfoSurrogate value) {
        if(value == null) return null;
        return value.Type.GetProperty(value.Name);
    }
} 
```

然后，对您的模型：

```
model.Add(typeof(PropertyInfo), false)
    .SetSurrogate(typeof(PropertyInfoSurrogate)); 
```

重点：完全未经测试，但类似的东西*应该*可以工作。让我知道你是怎么办的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:56:08.950

不幸的是，它看起来`PropertyInfo`不能被 protobuf-net 序列化。要序列化其中的数据，您可能必须创建一个单独的`ProtoContract`类来存储 的相关位`PropertyInfo`并使用它。

具体来说，通读 protobuf-net 如何为复杂类型（[此处](http://code.google.com/p/protobuf-net/source/browse/trunk/protobuf-net/Meta/RuntimeTypeModel.cs)和[此处](http://code.google.com/p/protobuf-net/source/browse/trunk/protobuf-net/Meta/MetaType.cs#738)）找到序列化程序的源代码，看起来 protobuf 只能与具有类似`[DataContract]`属性的类一起使用，特别是以下任何一种：

*   `[ProtoContract]`,
*   [`[DataContract]`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx),
*   [`[XmlType]`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltypeattribute.aspx).

并且不会与他人合作。

一个简单的实验证实了这一点。以下代码将毫无例外地运行，但是如果注释掉`[DataContract]`and ，那么我会得到与您相同的异常：`[DataMember]`

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;
using System.Text;

using ProtoBuf;

namespace ProtobufNetTest2 {
    [DataContract(Name = "Pet", Namespace = "http://www.example.com")]
    public class Pet  {
        [DataMember(Name = "Name")]
        public string Name { get; set; }
    }

    [ProtoContract]
    public class DogMessage {
        [ProtoMember(1)]
        public Pet Dog { get; set; }
    }

    class Program {
        static void Main(string[] args) {
            var dog = new Pet() {
                Name = "The Dog",
            };

            var dogMessage = new DogMessage() {
                Dog = dog,
            };

            using (var stream = new MemoryStream()) {
                Serializer.Serialize(stream, dogMessage);
            }
        }
    }
} 
```

# objective-c - 在 NSPredicate 中使用强制转换

> ID：11690809
> 
> 赞同：1
> 
> 时间：2012-07-27T15:19:46.157
> 
> 标签：objective-c, ios5, nspredicate

我有一个 int 类型的类成员“total”。我在谓词中使用“总计”作为属性：

```
[NSPredicate predicateWithFormat: @"total ==%i", [searchText intValue]]; 
```

此谓词用于在执行搜索时收集匹配项。谓词将存储在 iVar`searchText`中的 text 类型的用户搜索值与 int 类型的属性“total”进行比较。

我可以像这样轻松地检查是否相等：

```
 NSPredicate *filter = [NSPredicate predicateWithFormat: @"total ==%i", [searchText  intValue]]; 
```

我现在想让谓词更健壮，像文本搜索一样工作，所以如果用户在搜索框中键入“5”，谓词将返回 5,52,550 等。

换句话说，我想在我的谓词过滤器中将“total”（一个属性）视为一个字符串，这样我就可以使用**BEGINSWITH 或 CONTAINS**。

我的问题是属性“total”是int类型，而不是字符串，所以我被卡住了。

这是我的意图（伪代码）

```
NSPredicate *filter = [NSPredicate predicateWithFormat: @"[total stringValue] BEGINSWITH %@", searchText]; 
```

或者

```
 NSPredicate *filter = [NSPredicate predicateWithFormat: @"CAST(total, 'NSString' ) BEGINSWITH %@", searchText]; 
```

如果不在我的班级中创建字符串类型，我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:38:26.367

`[NSString stringWithFormat:@"%d"]`是如何将整数从整数转换为字符串。您可以将它与您的谓词声明内联。

至于怎么做

> 不创建字符串类型

我很困惑如何在不创建字符串的情况下将某些内容用作字符串。

您的谓词应如下所示：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                          @"(content BEGINSWITH[c] %@)", [NSString stringWithFormat:@"%d",total]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:20:44.737

您可以这样做的一种（有点粗略）方法是生成一个谓词，例如：

```
total == %d OR total / 10 == %d OR total / 100 == %d OR total / 1000 == %d... 
```

假设您知道总计可能有一个小的最大值。

# c# - UdpClient 不能将许多数据包发送到不同的地址？

> ID：11690812
> 
> 赞同：1
> 
> 时间：2012-07-27T15:19:46.873
> 
> 标签：c#, ip, udpclient

我需要在某个 IP 范围内的本地网络中查找设备。设备可以响应 Udp 数据报。我接下来做：

```
var udpSend = new UdpClient();
foreach (string ip in list)            
   udpSend.Send(new byte[] { 0xCE, 0x56, 0x01 },3, ip, 33333); 
```

列表中有许多地址（10.0.1.1 - 10.0.255.255）。但并非所有设备都会收到我的消息。我尝试了另一种方式：

```
foreach (string ip in list)
        {
            var udpSend = new UdpClient();
            udpSend.Send(new byte[] {0xCE, 0x56, 0x01}, 3, ip, 33333); 
            udp.Close();
        } 
```

但是在 255 个数据包之后 udp.Close(); 开始很慢。

我如何创建像 udp 扫描仪一样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:05:32.097

UDP 不提供有关消息传递的保证。事实上，并非每个数据包都已交付，您只需重试即可。关于多播/广播的评论是一个很好的评论；这样的事情通常是通过多播或广播来完成的。

# delphi - 写入 TMemoryStream 并丢失 unicode

> ID：11690825
> 
> 赞同：-1
> 
> 时间：2012-07-27T15:20:19.053
> 
> 标签：delphi, delphi-xe2

使用 Delphi XE2 将 TMemoryStream（包含 unicode 字符串）复制到另一个 TMemoryStream 时，我遇到了一个奇怪的行为：

我有两个 TMemoryStream 实例。第一个实例包含 unicode 文本 (SourceMS)。我将一些任意数据写入第二个 MemoryStream (DestMS)，然后将第一个流的内容复制到第二个流，如下所示：

```
var
  SomeInt: Integer;
  SomeByte: Byte;
  SourceMS, DestMS: TMemoryStream;
begin
  ...
  DestMS.Write(SomeInt, SizeOf(SomeInt));
  DestMS.Write(SomeByte, SizeOf(SomeByte));
  SourceMS.SaveToFile('c:\SourceMS.txt');  // SourceMS.txt contains the unicode chars
  DestMS.CopyFrom(SourceMS, 0);          // copy the whole content of SourceMS to DestMS   
  DestMS.SaveToFile('c:\DestMS.txt');  // DestMS.txt DOEST NOT contain unicode chars              
end; 
```

如何在不丢失 unicode 的情况下将第一个流的内容复制到第二个流（具有隐式转换）？当我说“丢失 unicode”时，我的意思是：unicode 字符串确实被复制到第二个流中，但是 unicode 丢失了。我只得到 ANSI 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:54:50.277

如果我们仅根据发布的 5 行代码来判断，这就是可能发生的情况。`TMemoryStream`不会以任何方式更改字节，我们必须假设原始字节已成功从一个`.txt`文件复制到另一个文件。两个文件应该包含完全相同的字节，但是在使用文本查看器应用程序查看文件时，这些相同的字节不会以相同的方式解释。

我只能想象这样一种情况：

*   其中一个文件有一个 BOM，很可能是 UTF8。
*   另一个文件没有 BOM，所以它被解释为 ANSI。

哪个文件有 BOM 甚至都无关紧要：经历这样一个过程会改变字节的解释方式。根据 Wikipedia 的说法，绝大多数代码页都是 ASCII 的超集，这意味着可以使用 7bit 写入的所有字节都以与 UTF8 和 ANSI 完全相同的方式解释。OP 抱怨的“Unicode”字符肯定在“扩展”ANSI（8 位）中，或者在使用 UTF8 时，它们由 2 个或更多字节组成。这给出了故障模式：

*   如果原始文件是包含扩展字符（非 ASCII）的 ANSI 文件，如果将它们解释为 UTF8，结果可能看起来有点像垃圾：原始文件的两个（或更多）字符似乎被替换为一些奇怪的角色。
*   如果原始字符是 UTF8，那么所有国际字符都将使用至少两个字节表示：根据 PC 的代码页，当解释为 ANSI 时，这两个字节将表示为两个不同的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:04:51.630

似乎这`DestMS`只是一些任意字节，这`SourceMS`就是您的 Unicode 内容所在的位置。如果附加`source`到`dest`，则`BOM`from`source`将不在内存流的开头。当您在 Windows 中打开保存的文本文件时，它不会看到 ，`BOM`因为它不在文件的开头，因此它不会知道文件后面的其他字符应该被视为 Unicode。

您似乎正试图在 Unicode 内容的前面插入一些内容。

如果这是真的，那么您可以将 Unicode 内容放在符合 Unicode 的控件中，将字符添加到开头，然后从控件中捕获内容。这将保持`BOM`字节流的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:42:22.110

`CopyFrom`确实将整个源流复制到目标流中，但它从目标的当前位置开始。之前写的任意数据依然存在！

您应该`MS1.Position := 0`在调用之前设置`CopyFrom`。

# html - 在绝对定位的 div 中居中文本

> ID：11690828
> 
> 赞同：2
> 
> 时间：2012-07-27T15:20:27.783
> 
> 标签：html, css, vertical-alignment

我有以下

```
 <div class="label" 
    style="position: absolute; top: 20px; left: 20px; width: 200px; height: 40px;">
    Label Text
 </div>

 <div class="label" 
    style="position: absolute; top: 70px; left: 20px; width: 200px; height: 120px;">
    Also several lines of 
    Label Text
    may be included
 </div> 
```

如何垂直对齐 div.label 中的（可能是几行）文本？

如有必要，我可以添加 innerHTML，但我不能更改容器（class="label"）。

[http://jsfiddle.net/austinfrance/CDTk2/](http://jsfiddle.net/austinfrance/CDTk2/)（现在工作的例子）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:27:20.160

你可以使用类似的东西

```
 <div class="label" 
style="position: absolute; top: 70px; left: 20px; width: 200px; height: 120px; display: table; vertical-align: middle; border:1px solid #000">
    <span style="display: table-cell;vertical-align: middle;">
Also several lines of
Label Text
may be included
    </span> 
```

请参阅[http://jsfiddle.net/99F6D/1/](http://jsfiddle.net/99F6D/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:30:05.233

试试这个：

```
 <div class="label" 
 style="position: absolute; top: 20px; left: 20px; width: 200px; height: 40px;">
    <span style="display:inline-block; vertical-align:middle"> Label Text </span>
 </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T21:30:45.043

这是一个老问题，但解决方案非常简单，因为您现在关于 div 的高度只需将具有相同高度值的行高放在 css 样式上。

你的例子一定是`line-height:40px`。

好样的

# php - 在函数内部设置一个钩子以在另一个函数中使用

> ID：11690832
> 
> 赞同：0
> 
> 时间：2012-07-27T15:20:34.050
> 
> 标签：php, if-statement

我正在尝试在函数中设置 IF 语句以确定是否正在使用外部函数。我想我的问题可能有一种方式......我如何在外部函数（app1，app2）中设置挂钩来构建 IF 语句？把他们包在一个班级里？如果是这样，我该如何构造语句？

至少从我的 PHP 知识水平来看，这个逻辑似乎没有任何意义。这样做的目的是，我有 2 个函数（app1 和 app2），每个函数为两个单独的管理面板创建一组不同的选项。每个面板中选项的构造函数和标记是相同的，这将在“包装器”函数中。但目前，不得不使用两个单独的“包装器”函数来处理这个问题。Panel1 的一个功能和 Panel2 的另一个功能。

所以我的任务是组合这两个包装函数，因为拥有两个基本上做同样事情的独立函数有点多余。这是代码的摘要位。如您所见，每个中唯一的区别是“$panel_type = ...”位

```
function app1() {
    $app1_options = array();

    $app1_options[] = array(
        'type' => 'text',
        'name' => 'Text Field',
        'id' => 'text_field_one'
    );

    return $app1_options;
}

function app2() {
    $app2_options = array();

    $app2_options[] = array(
        'type' => 'text',
        'name' => 'Text Field',
        'id' => 'text_field'
    );

    return $app2_options;
}

function wrapper_panel1() {
    $panel_type = app1();

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }
}

function wrapper_panel2() {
    $panel_type = app2();

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }
} 
```

所以真的在寻找某种方法将这两个功能合并在一起，比如：

```
function wrapper() {
    if ( app1() ) {
        $panel_type = app1();
    }

    if ( app2() ) {
        $panel_type = app2();
    }

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }
} 
```

在这上面设置一个类/对象可以做些什么吗？或者任何可以实现这一目标的改变。

非常感谢可以提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:25:08.903

只需将应用程序 ID 传递给包装函数：

```
function wrapper_panel ($appId) {

    $optsFunc = 'app'.$appId;
    $panel_type = $optsFunc();

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }

}

// In app1:
wrapper_panel(1);

// In app2:
wrapper_panel(2); 
```

...或者更好的是，在调用时将选项传递给包装函数：

```
function wrapper_panel ($panel_type) {

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }

}

// In app1
wrapper_panel(app1());

// In app2
wrapper_panel(app2()); 
```

**编辑**

鉴于 Wordpress 施加的限制，我认为最简单且最不可怕的事情是`wrapper_panel()`从`app1()`and`app2()`函数中调用：

```
function app1() {

    $app1_options = array();

    $app1_options[] = array(
        'type' => 'text',
        'name' => 'Text Field',
        'id' => 'text_field_one'
    );

    wrapper_panel($app1_options);

}
function app2() {

    $app2_options = array();

    $app2_options[] = array(
        'type' => 'text',
        'name' => 'Text Field',
        'id' => 'text_field'
    );

    wrapper_panel($app2_options);

}

function wrapper_panel ($panel_type) {

    foreach( $panel_type as $value ) {
        switch ( $value[ 'type' ] ) {
            case 'text':
                // input stuff
            break;
        }
    }

} 
```

...并使用 Wordpress注册`app1`and函数，而不是函数。`app2``wrapper_panel`

# java - 带有 Webview 的布局上的按钮

> ID：11690835
> 
> 赞同：-1
> 
> 时间：2012-07-27T15:20:42.710
> 
> 标签：java, android, layout, button, click

我无法弄清楚为什么这两个按钮不起作用，我有一个布局文件，当用户在我的应用程序中选择某个主题时会在其中创建。有了布局，它有一个 web 视图，它有 2 个按钮可以后退和前进。

```
 <Button 
    android:id="@+id/button1" 
    android:layout_width="wrap_content" 
    android:text="Back" 
    android:layout_alignParentLeft="true" 
    android:layout_height="wrap_content" 
    android:background="@drawable/button_blue" 
    style="@style/ButtonText">
  </Button>

  <Button 
    android:id="@+id/button2" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_alignParentRight="true" 
    android:background="@drawable/button_blue"
    style="@style/ButtonText" 
    android:text="Forward">
 </Button>

  <WebView
    android:id="@+id/webview01"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1.12" > 
```

这不是整个布局文件，但这是我正在为 webview 和 2 个按钮使用的一些东西，现在在我的主要活动中是我的按钮代码。

```
 @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    if (Prefs.theme.equals("Theme1"))
        setContentView(R.layout.main);
    else if (Prefs.theme.equals("Theme2"))
        setContentView(R.layout.main2);
    else if (Prefs.theme.equals("Theme3"))
        setContentView(R.layout.main3);
    else setContentView(R.layout.main);

    btnForward=(Button) findViewById (R.id.button1);
    btnBackward=(Button) findViewById (R.id.button2);
    btnForward.setOnClickListener(this);
    btnBackward.setOnClickListener(this);

    // more code within on create .....

// Later in the code 

public void onClick(View v) {

    switch(v.getId()) {

        case R.id.button1:
            WebViewClientDemoActivity.web.goBack();
           break;

        case R.id.button2:
            WebViewClientDemoActivity.web.goForward();
           break;
    } 
```

//

我的问题是默认情况下它加载 main.xml 而不是 main3（这是 2 个按钮）

LogCat 错误

```
 07-27 16:00:34.802: E/AndroidRuntime(547): FATAL EXCEPTION: main
  07-27 16:00:34.802: E/AndroidRuntime(547): java.lang.RuntimeException: Unable to start activity       ComponentInfo{com.jaisonbrooks.enlighten/com.jaisonbrooks.enlighten.WebViewClientDemoActivity}: java.lang.NullPointerException
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.os.Handler.dispatchMessage(Handler.java:99)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.os.Looper.loop(Looper.java:123)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread.main(ActivityThread.java:3683)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at java.lang.reflect.Method.invokeNative(Native Method)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at java.lang.reflect.Method.invoke(Method.java:507)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at dalvik.system.NativeStart.main(Native Method)
  07-27 16:00:34.802: E/AndroidRuntime(547): Caused by: java.lang.NullPointerException
  07-27 16:00:34.802: E/AndroidRuntime(547):    at com.jaisonbrooks.enlighten.WebViewClientDemoActivity.onCreate(WebViewClientDemoActivity.java:75)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  07-27 16:00:34.802: E/AndroidRuntime(547):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
  07-27 16:00:34.802: E/AndroidRuntime(547):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:26:20.550

它应该工作。确保您没有 2 个相同的按钮`@id`。
当您将按钮与一个相乘时，这是一个常见问题。（复制粘贴）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:47:16.967

首先在您的 onCreate 方法中通过 ids 找到您的按钮：

```
public class YourActivity extends Activity implements OnClickListener {
Button btnForward;
Button btnBackward;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnForward=(Button) findViewById (R.id.btnForward);
        btnBackward=(Button) findViewById (R.id.btnBackward);

        //set listeners
        btnForward.setOnClickListener(this);
        btnBackward.setOnClickListener(this);

        // your code here .... 
    }

@Override
public void onClick(View v ) {
     switch(v.getId()) {

        case R.id.btnBackward:
            WebViewClientDemoActivity.web.goBack();
           break;
        case R.id.btnForward:
            WebViewClientDemoActivity.web.goForward();
           break;
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:22:21.433

```
<Button 
android:id="@+id/button1" 
android:layout_width="wrap_content" 
android:text="Back" 
android:layout_alignParentLeft="true" 
android:layout_height="wrap_content" 
android:background="@drawable/button_blue" 
style="@style/ButtonText" />

<Button 
android:id="@+id/button2" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_alignParentRight="true" 
android:background="@drawable/button_blue"
style="@style/ButtonText" 
android:text="Forward" /> 
```

尝试这个。

然后稍后在java代码中，执行此操作

```
 Button btnNext = (Button) findViewById(R.id.button2);
 btnNext.setOnClickListener(new OnClickListener()
 {
        @Override
    public void onClick(View v)
    {
         WebViewClientDemoActivity.web.goForward();
    }
 });

 Button btnBack = (Button) findViewById(R.id.button1);
 btnNext.setOnClickListener(new OnClickListener()
 {
        @Override
    public void onClick(View v)
    {
         WebViewClientDemoActivity.web.goBack();
    }
 }); 
```

# java - Java 存储过程因 OutOfMemoryError 而停止

> ID：11690837
> 
> 赞同：1
> 
> 时间：2012-07-27T15:20:52.380
> 
> 标签：java, mysql, stored-procedures

我正在开发一个 Java 项目，该项目在连接到 MySQL 数据库的 Tomcat 6 上运行。所有程序都按应有的方式运行，无论是在本地测试还是在我们客户的服务器上进行测试时。但是，有一个例外，即检索大量数据以生成报告的过程。从 MySQL 执行存储过程大约需要 13 分钟。当我在本地运行应用程序并连接到在线数据库时，该过程确实可以工作，唯一不工作的是它在我们客户端的服务器上运行时。

客户对他的服务器非常保护，所以我们对它的控制有限，但他们确实希望我们解决问题。当我检查日志文件时，执行存储过程的函数不会引发任何错误。并将一些调试日志放入代码中，它表明它确实到达了执行调用，但没有在调用后立即记录调试，也没有在 catch 中记录错误，但确实进入了 finally 部分。

他们声称 MySQL 日志中没有超时错误。

如果有人对可能导致此问题的原因有任何想法，我们将不胜感激。

*更新*：

在向服务器管理员唠叨了一番之后，我终于可以访问 catalina 日志了，在这些日志中，我终于发现了一个有意义的错误：

```
Exception in thread "Thread-16" java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOf(Arrays.java:2894)
        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:117)
        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:407)
        at java.lang.StringBuffer.append(StringBuffer.java:241)
        at be.playlane.mink.database.SelectExportDataProcedure.bufferField(SelectExportDataProcedure.java:68)
        at be.playlane.mink.database.SelectExportDataProcedure.extractData(SelectExportDataProcedure.java:54)
        at org.springframework.jdbc.core.JdbcTemplate.processResultSet(JdbcTemplate.java:1033)
        at org.springframework.jdbc.core.JdbcTemplate.extractReturnedResultSets(JdbcTemplate.java:947)
        at org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:918)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:876)
        at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:908)
        at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:113)
        at be.playlane.mink.database.SelectExportDataProcedure.execute(SelectExportDataProcedure.java:29)
        at be.playlane.mink.service.impl.DefaultExportService$ExportDataRunnable.run(DefaultExportService.java:82)
        at java.lang.Thread.run(Thread.java:636) 
```

奇怪的是这不会记录到应用程序日志中，即使它被包装在一个 try catch 中。现在基于错误，问题出在这种方法上：

```
public Object extractData(ResultSet rs) throws SQLException, DataAccessException
  {
    StringBuffer buffer = new StringBuffer();

    try
    {
      // get result set meta data
      ResultSetMetaData meta = rs.getMetaData();
      int count = meta.getColumnCount();

      // get the column names; column indices start from 1
      for (int i = 1; i < count + 1; ++i)
      {

        String name = meta.getColumnName(i);
        bufferField(name, i == count, buffer);
      }

      while (rs.next())
      {

        // get the column values; column indices start from 1
        for (int i = 1; i < count + 1; ++i)
        {
          String value = rs.getString(i);
          bufferField(value, i == count, buffer);
        }
      }
    }
    catch (Exception e)
    {
      logger.error("Failed to extractData SelectExportDataProcedue: ", e);
    }

    return buffer.toString();
  }

  private void bufferField(String field, boolean last, StringBuffer buffer)
  {
    try
    {
      if (field != null)
      {

        field = field.replace('\r', ' ');
        field = field.replace('\n', ' ');

        buffer.append(field);
      }

      if (last)
      {
        buffer.append('\n');
      }
      else
      {
        buffer.append('\t');
      }
    }
    catch (Exception e)
    {
      logger.error("Failed to bufferField SelectExportDataProcedue: ", e);
    }
  } 
```

这些函数的目标是将某个结果集导出到 excel 文件（这发生在更高级别）。

因此，如果有人对此有一些优化建议，我们将非常欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:50:59.443

好的，您的堆栈跟踪为您提供了答案：

```
Exception in thread "Thread-16" java.lang.OutOfMemoryError: Java heap space 
```

这就是为什么您没有记录，应用程序正在崩溃（具体来说是线程）。从您的描述来看，听起来您有一个需要分页的海量数据集。

```
 while (rs.next())
      {

        // get the column values; column indices start from 1
        for (int i = 1; i < count + 1; ++i)
        {
          String value = rs.getString(i);
          bufferField(value, i == count, buffer);
        }
      } 
```

这是你线程死亡的地方（可能）。基本上你的 StringBuffer 内存不足。至于纠正它，有很多选择。在客户端的问题上投入更多内存（通过配置 JVM（这里有一个链接）： [如何设置 JVM 的最大内存使用量？](https://stackoverflow.com/questions/1493913/how-to-set-the-maximum-memory-usage-for-jvm)

或者，如果您已经这样做了，请将更多 RAM 放入设备中。

从编程的角度来看，这听起来像是一份糟糕的报告。您可以将处理的一些数字卸载到 MySQL 而不是在您的一端缓冲（如果可能），或者，如果这是一个巨大的报告，我会考虑将其流式传输到文件，然后通过缓冲流读取以填充报告。

这完全取决于报告是什么。如果它很小，我的目标是在 SQL 中做更多的工作以最小化结果集。如果它是一个巨大的报告，那么缓冲是另一种选择。

您可能缺少的另一种可能性是 ResultSet（取决于实现）可能已缓冲。这意味着您的报表可以直接获取 ResultSet 对象并从中打印，而不是将其全部读取到字符串中。当然，这样做的缺点是一个杂散的 SQL 异常会杀死您的报告。

祝你好运，我会先尝试内存选项。您可能正在运行像 128 这样非常小的东西，它会很简单（我已经看到这种情况在远程管理的机器上发生了很多）。

# java - 使用搜索 API 将具有重复字段名称的文档添加到索引时出现 INVALID_REQUEST 异常

> ID：11690840
> 
> 赞同：0
> 
> 时间：2012-07-27T15:21:04.523
> 
> 标签：java, google-app-engine, gae-search

当每个字段名称都是唯一的时，我可以将文档添加到索引中，但是当我尝试更新文档时（意思是，我使用相同的代码以相同的 id 和相同的字段名称再次添加它，但使用其中一个字段名称重复），我得到一个带有状态代码 INVALID_REQUEST 和消息“无法索引 [MYID]”的 AddException。MYID 是一个有效的 ID。重复字段具有名称“purchase_orderDate”和使用 Field.date(Date date) 截断为月份日期的日期值。我的 Google App Engine SDK 版本是 Java 1.7，我在 1.6 中遇到了同样的异常。

所以我的问题是，Java Google App Engine Search API 是否支持文档中的重复字段？如果是这样，为什么我会得到一个例外？

谢谢，托德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:51:17.417

您可能会遇到异常，因为您尝试添加一个 ID 已存在的文档。搜索当前不支持更新语义。尝试先删除文档，然后“添加”更新版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-21T01:29:47.663

日期和数字类型不允许重复的字段名称。但其他类型都可以。

# java - Spring Transaction Annotations - 获取活动事务

> ID：11690842
> 
> 赞同：0
> 
> 时间：2012-07-27T15:21:11.643
> 
> 标签：java, spring, jdbc

在我的 Spring 应用程序中，我将服务层方法标记为`@Transactional(propagation=Propagation.REQUIRED)`并且正在使用`<tx:annotation-driven />`. 通常，当方法完成时自动提交事务的默认行为就像一个魅力。但在特定情况下，我需要在方法结束前不久提交 - 是的，即使在那之后的部分抛出异常。

在这种方法中是否有办法访问当前事务？我试过这个：

```
TransactionDefinition td = new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_MANDATORY); // make sure we're talking about the same transaction already provided by the annotation
TransactionStatus status = transactionManager.getTransaction(td);

// perform various JDBC operations

transactionManager.commit(status);
methodThatNeedsToBeCalledAfterCommit(); 
```

但是查看我的日志，我只看到“AbstractPlatformTransactionManager.processCommit(752) | 启动事务提交”发生一次，并且从时间戳来看，这似乎是*after* `methodThatNeedsToBeCalledAfterCommit()`，这将是`@Transactional`方法的正常行为。

有没有办法在这种方法中实际强制提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:27:40.023

我不这么认为。此外，Spring 将尝试在您的方法结束时重新提交。所以 2 次提交：不好。

你应该重新考虑你的方法的组织。也许将现有的一种方法分成 2 种方法：一种使用 @Trnasactional，另一种使用剩余的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:25:59.180

这可能是因为默认的事务传播是 PROPAGATION_REQUIRED，因此只有在整个事务完成时才会提交 - 这是您的外部方法。您可以尝试使用 PROPAGATION_REQUIRES_NEW：

`td.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);`

另一种选择是使用[TransactionTemplate](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T03:55:30.073

尝试从要应用事务的程序中调用此方法。

```
 DefaultTransactionDefinition transdefinition = new DefaultTransactionDefinition();
         PlatformTransactionManager manager =new  PlatformTransactionManager(); 
         TransactionStatus status=null;

public void beginTransaction()
    {

        transdefinition.setPropagationBehavior(0); 

         status = manager.getTransaction(transdefinition);
    }

public void commitTransaction()
    {
if(status.isCompleted()){
manager.commit(status);
    }
}

 public void rollbackTransaction()
    {
if(!status.isCompleted()){
       manager.rollback(status);  
    }
} 
```

# c# - 多线程速度问题

> ID：11690846
> 
> 赞同：0
> 
> 时间：2012-07-27T15:21:16.560
> 
> 标签：c#, multithreading

我在代码中添加了多线程部分。

```
 public class ThreadClassSeqGroups
    {
        public Dictionary<string, string> seqGroup;
        public Dictionary<string, List<SearchAlgorithm.CandidateStr>> completeModels;
        public Dictionary<string, List<SearchAlgorithm.CandidateStr>> partialModels;
        private Thread nativeThread;

        public ThreadClassSeqGroups(Dictionary<string, string> seqs)
        {
            seqGroup = seqs;
            completeModels  = new Dictionary<string, List<SearchAlgorithm.CandidateStr>>();
            partialModels   = new Dictionary<string, List<SearchAlgorithm.CandidateStr>>();
        }

        public void Run(DescrStrDetail dsd, DescrStrDetail.SortUnit primarySeedSu,
            List<ushort> secondarySeedOrder, double partialCutoff)
        {
            nativeThread = new Thread(() => this._run(dsd, primarySeedSu, secondarySeedOrder, partialCutoff));
            nativeThread.Priority = ThreadPriority.Highest;
            nativeThread.Start();
        }

        public void _run(DescrStrDetail dsd, DescrStrDetail.SortUnit primarySeedSu,
            List<ushort> secondarySeedOrder, double partialCutoff)
        {
            int groupSize = this.seqGroup.Count;
            int seqCount = 0;
            foreach (KeyValuePair<string, string> p in seqGroup)
            {
                Console.WriteLine("ThreadID {0} (priority:{1}):\t#{2}/{3} SeqName: {4}",
                    nativeThread.ManagedThreadId, nativeThread.Priority.ToString(), ++seqCount, groupSize, p.Key);
                List<SearchAlgorithm.CandidateStr> tmpCompleteModels, tmpPartialModels;
                SearchAlgorithm.SearchInBothDirections(
                        p.Value.ToUpper().Replace('T', 'U'), dsd, primarySeedSu, secondarySeedOrder, partialCutoff,
                        out tmpCompleteModels, out tmpPartialModels);
                completeModels.Add(p.Key, tmpCompleteModels);
                partialModels.Add(p.Key, tmpPartialModels);
            }
        }

        public void Join()
        {
            nativeThread.Join();
        }

    }

class Program
{
    public static int _paramSeqGroupSize = 2000;
    static void Main(Dictionary<string, string> rawSeqs)
    {
        // Split the whole rawSeqs (Dict<name, seq>) into several groups
        Dictionary<string, string>[] rawSeqGroups = SplitSeqFasta(rawSeqs, _paramSeqGroupSize);

        // Create a thread for each seqGroup and run
        var threadSeqGroups = new MultiThreading.ThreadClassSeqGroups[rawSeqGroups.Length];
        for (int i = 0; i < rawSeqGroups.Length; i++)
        {
            threadSeqGroups[i] = new MultiThreading.ThreadClassSeqGroups(rawSeqGroups[i]);
            //threadSeqGroups[i].SetPriority();
            threadSeqGroups[i].Run(dsd, primarySeedSu, secondarySeedOrder, _paramPartialCutoff);
        }

        // Merge results from threads after the thread finish
        var allCompleteModels   = new Dictionary<string, List<SearchAlgorithm.CandidateStr>>();
        var allPartialModels    = new Dictionary<string, List<SearchAlgorithm.CandidateStr>>();
        foreach (MultiThreading.ThreadClassSeqGroups t in threadSeqGroups)
        {
            t.Join();
            foreach (string name in t.completeModels.Keys)
            {
                allCompleteModels.Add(name, t.completeModels[name]);
            }
            foreach (string name in t.partialModels.Keys)
            {
                allPartialModels.Add(name, t.partialModels[name]);
            }
        }
    }
} 
```

但是多线程的速度比单线程慢很多，CPU负载一般<10%。

例如：

输入文件包含 2500 个字符串

_paramGroupSize = 3000, 主线程 + 1 个计算线程花费 200 秒

_paramGroupSize = 400，主线程 + 7 个计算线程花费更多时间（我在运行 10 多分钟后将其杀死）。

我的实施有什么问题吗？如何加快速度？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:30:05.857

在我看来，您正在尝试与多个线程并行处理文件。这是一个坏主意，假设您有一个机械磁盘。

基本上，磁盘的头部需要为每个读取请求寻找下一个读取位置。这是一项代价高昂的操作，并且由于多个线程发出读取命令，这意味着当每个线程轮到运行时，头部会反弹。与单线程进行读取的情况相比，这将大大降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:38:13.750

多线程之前的代码是什么？很难说这段代码在做什么，而且很多“工作”代码似乎隐藏在你的搜索算法中。然而，一些想法：

1.  您提到了一个“输入文件”，但这在代码中没有清楚地显示 - 如果您的文件访问正在被线程化，这不会提高性能，因为文件访问将成为瓶颈。
2.  创建比 CPU 内核更多的线程最终会降低性能（除非每个线程都被阻塞等待不同的资源）。在您的情况下，我建议总共 8 个线程太多了。
3.  似乎可以通过您的类完成大量数据（内存）访问，该类从您的方法中`DescrStrDetail`的变量传递到每个子线程。但是，缺少此变量的声明，因此它的用法/实现是未知的。如果此变量具有阻止多个线程同时访问的锁，那么您的多个线程可能会相互锁定此数据，从而进一步降低性能。`dsd``Main`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:00:44.487

When threads are run they are given time on a specific processor. if there are more threads than processors, the system context switches between threads to get all active threads some time to process. Context switching is *really expensive*. If you have more threads than processors most of the CPU time can be take up by context switching and make a single-threaded solution look *faster* than a multi thread solution.

Your example shows starting an indeterminate number of threads. if `SplitSeqFasta` returns more entries than cores, you will create more threads and cores and introduce a lot of context switching.

I suggest you throttle the number of threads manually, or use something like the thread parallel library and the Parallel class to have it automatically throttle for you.

# android - For 循环读取无穷大

> ID：11690847
> 
> 赞同：0
> 
> 时间：2012-07-27T15:21:18.340
> 
> 标签：android, for-loop

我正在尝试制作一个简单的屏幕，向您显示您每秒赚取的金额，因此我尝试创建一个实时提要类型 textveiw，该页面每秒更新您所赚取的金额，以及我的代码在我的手机上运行它只显示“无穷大”，当我尝试添加 1 秒延迟时，它全部冻结，这是我编写的代码，我正在使用 for 循环，因为如果有人我不知道更好的方法有更好的方法来实现我想做的事情，请告诉我..

```
 // Calculate pay per second
    double PPS = (HW/3600);
    double OTPPS = (OTW/3600);
    double HPDPS = (HPD*3600);
    double money = 0;
    double Reserve = 0;
    loc = 0;
    // Display
    for(int i=0; i<HPDPS & loc!=7; i++)
    {
        money = (PPS+Reserve);
        Reserve = (Reserve+money);
        TextView textView = (TextView) this.findViewById(R.id.yourpay);
        textView.setText(String.valueOf(money));
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

提前感谢您的帮助！

==================================================== =====================================

这是一个经过编辑的版本，但我仍然遇到一个问题，它只是在屏幕上显示无穷大，我该如何解决这个问题？或者我如何使用计时器方法？

```
 public void sendMessage(View view) {
    // Receive messages from options page
    Intent intent = getIntent();
    double HW = intent.getDoubleExtra(Options.MESSAGE_HW, 0);
    double OTW = intent.getDoubleExtra(Options.MESSAGE_OTW, 0);
    double HPD = intent.getDoubleExtra(Options.MESSAGE_HPD, 0);
    // Calculate pay per second
    double PPS = (HW/3600);
    double OTPPS = (OTW/3600);
    double HPDPS = (HPD*3600);
    double money = 0;
    double Reserve = 0;
    // Display
    for(int i=0; i<HPDPS; i++)
    {
        money = (PPS+Reserve);
        Reserve = (Reserve+money);
        TextView textView = (TextView) this.findViewById(R.id.yourpay);
        textView.setText(String.valueOf(money));
    }

    // set textView

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:23:51.663

更好的方法是用户 a`Timer`和`TimerTask`.

编辑：这是用户 Timer 和 TimerTask 的示例应用程序代码：

```
final TextView t1 = (TextView) findViewById(R.id.textView1);

    final Timer t =new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    t1.setText("Hello" + counter++); //Place your text data here

                    //Place your stopping condition over here. Its important to have a stopping condition or it will go in an infinite loop. 
                    if(counter == 10)
                        t.cancel(); 
                }
            }); 
        }
    }, 1000, 1000); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T15:28:58.223

[1] 你在这里做**按位与运算**（按位与运算 -> &）

```
for(int i=0; i<HPDPS & loc!=7; i++)
                     ^ 
```

[2] 你的 loc 总是 0，因为你做了**loc=0**并且在 for 循环中 loc 永远不会更新

所以 loc!=7**总是正确的**

# node.js - NODEJS - SFTP - 处理过程输出

> ID：11690855
> 
> 赞同：0
> 
> 时间：2012-07-27T15:21:58.860
> 
> 标签：node.js, debian, sftp

目前我正在尝试使用[node-sftp](https://github.com/ajaxorg/node-sftp)来为我的 nodejs 脚本提供使用私钥进行 SFTP 的能力。

自节点的 v 0.6 以来，该模块似乎已损坏（tty.open 不再是一种方法）。所以我尝试使用子进程并生成我的 sftp 命令。

现在连接似乎工作正常（我检查了 ftp 服务器日志@/var/log/auth.log）我还可以在节点窗口中看到一些输出...

```
Permanently added '46.x.x.x' (RSA) to the list of known hosts.
Connected to 46.x.x.x.
Changing to: /home/deploy/somefolder 
```

当我使用以下命令直接通过命令行连接时，最终会出现类似**sftp>**的提示，它正在等待我的 FTP 命令

```
sftp -o Port=22 -o PasswordAuthentication=no -o IdentityFile=private_key -o UserKnownHostsFile=/v/null -o StrictHostKeyChecking=no -o BatchMode=yes deploy@46.x.x.x:/home/deploy/somefolder 
```

有人对我可能出错的地方有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:34:17.670

很难说没有更多细节，但我会看看： [https ://github.com/chjj/pty.js/](https://github.com/chjj/pty.js/)

这将模拟一个您可以读写的 tty 设备。

如果您可以提供一些您尝试过的其他代码，我们可能会为您指明更好的方向。

您也可以尝试从以下位置克隆 node-sftp 模块：[https](https://github.com/ajaxorg/node-sftp.git) ://github.com/ajaxorg/node-sftp.git并直接使用该库而不是从 npm，看起来 github 中的最新版本支持节点版本比 0.6 更新

# php - 是否应该在 MySQL 中使用/创建尽可能多的索引？

> ID：11690858
> 
> 赞同：0
> 
> 时间：2012-07-27T15:22:20.400
> 
> 标签：php, mysql, optimization, query-optimization

我意识到，在为用于“ORDER BY”的列创建索引时，对 MySQL 查询的响应会变得更快，例如

```
SELECT username FROM table ORDER BY registration_date DESC 
```

现在我想知道我应该创建哪些索引来优化请求时间。例如，我经常使用以下查询：

```
SELECT username FROM table WHERE
    registration_date > ".(time() - 10000)."

SELECT username FROM table WHERE
    registration_date > ".(time() - 10000)."
    && status='active'

SELECT username FROM table WHERE
    status='active'

SELECT username FROM table ORDER BY registration_date DESC

SELECT username FROM table WHERE
    registration_date > ".(time() - 10000)."
    && status='active'
    ORDER BY birth_date DESC 
```

**问题 1：** 我应该为前三种请求类型设置单独的索引吗？（即“registration_date”列的一个索引，“status”列的一个索引，以及两者组合的另一个列？）

**问题 2：** “WHERE”和“ORDER BY”是否独立使用不同的索引？比如说，我有一个“status”和“registration_date”列的组合索引，还有一个“birth_date”列的索引。我应该为三列（“status”、“registration_date”和“birth_date”）设置另一个组合索引吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:34:10.267

索引或查询优化没有硬性规定。每个案例都需要考虑和审查。

但是，一般来说，您可以并且应该为经常排序或在 WHERE 语句中使用的列添加索引。（**对问题 2 的回答**——*不，相同的索引**可能**用于`ORDER BY`和`WHERE`*）是否执行多列索引或单列索引取决于查询的频率。此外，您应该注意单列索引*可以*由 mySQL 使用索引合并优化组合：

> Index Merge 方法用于检索具有多个范围扫描的行并将其结果合并为一个。合并可以生成其底层扫描的并集、​​交集或交集并集。此访问方法合并来自单个表的索引扫描；它不会跨多个表合并扫描。

（更多阅读：[http](http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html) ://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html ）

多列索引还要求您注意构建查询，以使您对索引列的使用与索引中的列顺序相匹配：

> 如果列不构成索引的最左前缀，则 MySQL 不能使用索引。假设您有此处显示的 SELECT 语句：
> 
> SELECT * FROM tbl_name WHERE col1=val1; SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;
> 
> SELECT * FROM tbl_name WHERE col2=val2; SELECT * FROM tbl_name WHERE col2=val2 AND col3=val3;
> 
> 如果 (col1, col2, col3) 上存在索引，则只有前两个查询使用该索引。第三和第四个查询确实涉及索引列，但是 (col2) 和 (col2, col3) 不是 (col1, col2, col3) 的最左边的前缀。

请记住，索引确实有自己的性能考虑 - 可以“过度索引”表。每次插入记录或修改索引列时，都必须重建索引/索引。这确实需要资源，并且根据表的大小和结构，它可能会在索引构建操作处于活动状态时导致响应能力下降。

用于`EXPLAIN`准确找出查询中发生的情况。分析，实验，不要过度。霰弹枪方法不适用于数据库优化。

**文档**

*   MySQL `EXPLAIN`- [http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)
*   MySQL 如何使用索引 - [http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)
*   索引合并优化 - [http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:30:40.977

引用[此页面](http://www.howtoforge.com/when-to-use-indexes-in-mysql-databases)：

> [索引] 会减慢您的更新和插入速度。

这就是你必须计算的权衡。要优化您的表，您应该*只*将索引放在您最有可能应用条件的列中 - 您拥有的索引越多，您的数据更改操作就越慢。从这个意义上说，我个人认为创建组合索引没有多大好处 - 如果您为 3 列创建所有 7 种可能的索引排列，那么您肯定会在更新和插入上施加更多阻力，而不仅仅是为 3 列使用 3 个索引（甚至这也值得商榷）。另一方面，如果数据的编辑量比编辑量*大得多*`SELECT`，那么索引确实可以帮助您加快处理速度。

其他需要考虑的事情（再次引用上面的页面）：

> 如果您的表非常小[...]，使用索引比将其排除在外并让它进行表扫描更糟糕。索引实际上只在具有大量行的表中派上用场。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:30:41.613

是的，在您经常使用的列上设置索引是个好主意，无论是在 order by 还是在 where 子句中。

但请注意：如果您有索引，UPDATES、INSERTS 和 DELETE 会减慢速度。

那是因为在这样的操作之后，索引也必须更新。

因此，作为一个经验法则：如果您的应用程序是读取密集型的，请使用您认为有帮助的索引。

如果您的应用程序经常更新数据，请小心，因为索引可能会变慢。

如有疑问，您必须弄脏手，并研究 EXPLAIN 的结果。

[http://dev.mysql.com/doc/refman/5.6/en/explain.html](http://dev.mysql.com/doc/refman/5.6/en/explain.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T15:31:08.057

对于前两个示例，您可以通过一个索引来满足它们：{registration_date, status}。这样的索引可以支持对第一项 (registration_date) 或两者的过滤器。

但是，它并不能单独用于状态。关于地位的问题是地位的选择性。也就是说，有多少比例的记录具有状态=“活动”。如果这个比例很高（因此，平均而言，每个数据库页面都会有一条活动记录），那么索引可能没有多大帮助。

订单比较棘手。我不知道mysql是否为此目的使用索引。通常，使用索引对整个记录进行排序的效率低于仅对记录*进行排序。*使用索引会导致对页面中记录的随机访问模式，这可能会导致大于页面缓存的表出现重大性能问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T15:24:40.883

在您的 select 语句中使用 explain 函数来确定您的连接在哪里减慢（引用的行越多，速度越慢）。然后将您的索引应用于这些列。

```
EXPLAIN SELECT * FROM table JOIN table 2 ON a = b WHERE conditions; 
```

# iphone - 无法刷新可重用的 UITableViewCell 数据

> ID：11690860
> 
> 赞同：0
> 
> 时间：2012-07-27T15:22:22.200
> 
> 标签：iphone, ios, uitableview

我有一个带有自定义 UITableViewCell 的 UITableView。

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//create the cell
MyCell *cell = (MyCell*)[tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
cell.label.text = ..
cell.label2.text = ..
cell.label3.text = .. 
```

一切正常，我的所有数据都正确加载，等等。

现在，我在这个视图控制器上有一个按钮，可以打开另一个视图，用户可以在其中选择要显示的标签。因此，例如，显示标签 1 和 3，但不显示 2... 然后，当`Done`单击时，我希望更新 tableView 以反映新选项，但由于单元格加载了reuseCellId，因此没有显示任何更改. 如何强制细胞重新创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:12:08.210

I solved this issue by just destroying the tableview, and recreating it every time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:31:49.270

**这不是一个好方法**
当您想要刷新单元格时，您可以通过使用不同的标识符来做到这一点

我不确定是否还有其他更好的方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:44:30.390

我认为您可以做的最好的事情是将单元格配置存储在某种结构中（此处可以显示带有标签索引的集合）并使用按钮更改此结构并重新加载表格视图。然后，在您的 tableView:cellForRowAtIndexPath: 方法中，您应该检查该配置结构以了解哪些按钮应该可见。

此代码可能会有所帮助：

```
@interface MyViewController : UIViewController
{
    ...
    NSMutableSet *_labelsToShow;
}

...
@property (nonatomic, retain) NSMutableSet labelsToShow

@end

@implementation MyViewController
@synthesize labelsToShow = _labelsToShow;

- (void)dealloc
{
    [_labelsToShow release];
    ...

}

//you may know which button has to add/remove each label, so this needs to be fixed with your logic
- (IBAction)myButtonAction:(id)sender
{
    if (hasToShowLabel)
    {
        [self.labelsToShow addObject:[NSNumber numberWithInteger:labelIdentifier]];
    } else
    {
        [self.labelsToShow removeObject:[NSNumber numberWithInteger:labelIdentifier]];
    }
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"myCell";
    MyCustomCell *cell = (MyCustomCell *)[tableView dequeReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[[MyCustomCell alloc] initWithStyle:UITableViewCellStyleDefault] autorelease];
    }

    cell.label0.hidden = (![self.labelsToShow containsObject:[NSNumber numberWithInteger:0]]);
    cell.label1.hidden = (![self.labelsToShow containsObject:[NSNumber numberWithInteger:1]]);
    cell.label2.hidden = (![self.labelsToShow containsObject:[NSNumber numberWithInteger:2]]);
    ...

    return cell;
}

@end 
```

祝你好运！

# android - ProgressDialog 没有动画

> ID：11690861
> 
> 赞同：0
> 
> 时间：2012-07-27T15:22:24.540
> 
> 标签：android, progressdialog

我的代码：

```
public void showProgress(final Intent intent){
    progressDialog = ProgressDialog.show(this, "", "Loading..");

    new Thread(){
        public void run() {
            try {
                synchronized (this) {
                    startActivity(intent);
                    progressDialog.dismiss();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        };
    }.start();
} 
```

ProgressDialog 出现，但 ProgressBar 没有动画。当我使用 wait(1000); 而是 startActivity(intent); 它工作得很好。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:23:50.343

一旦显示进度对话框，您就开始下一个活动并将其关闭。进度对话框在这里没有真正意义，因为您没有进行任何后台处理。

当您使用`wait(1000);`该程序时，在关闭进度条之前等待 1000 毫秒，因此您可以看到它在旋转。

* * *

**编辑：**

只需使用以下代码：

```
public void showProgress(final Intent intent){
    startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:05:39.957

在 onPause 方法中调用 progressDialog.dismiss。

# url-rewriting - 如果静态文件不存在，则重定向到其他域

> ID：11690864
> 
> 赞同：0
> 
> 时间：2012-07-27T15:22:28.793
> 
> 标签：url-rewriting, nginx

我想配置 nginx 以便

1.  请求的路径是静态文件，提供它；
2.  否则重定向外部域：`http://example.net/`.

我明白我需要使用`try_files`指令，但我不明白如何实现回退机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:22:28.793

多次测试后发现。如果找不到静态文件会发生什么是在`try_files`. 您可以将该参数设置为内部位置。在我的情况下，我使用

```
server {
    ...

    root    /srv/example.org/web/static;
    index   index.html;

    try_files $uri @redirect-to-dot-net;

    location @redirect-to-dot-net {
        rewrite ^ http://example.net redirect;
    }
} 
```

# c - 在 for 循环中交换语句

> ID：11690866
> 
> 赞同：1
> 
> 时间：2012-07-27T15:22:32.273
> 
> 标签：c

这是C语言中的那行代码。
这里的循环条件是++i。
那么编译器如何决定考虑哪个条件，因为这里其他两个作为条件出现？

```
char i=0;
for(i<=5&&i>-1;++i;i>0)
    printf("%d",i); 
```

输出

```
1234..127-128-127....-2-1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:50:15.547

该`for`语句的工作方式如下：

```
for (X; Y; Z)
{
    ...
} 
```

翻译成

```
X;
while (Y)
{
    ...
    Z;
} 
```

所以你的代码从：

```
char i=0;
for(i<=5&&i>-1;++i;i>0)
    printf("%d",i); 
```

至：

```
char i = 0;
i<=5 && i>-1;    // X
while (++i)      // Y
{
    printf("%d", i);
    i > 0;       // Z
} 
```

如您所见，标有`X`和`Z`的行完全没用。所以：

```
char i = 0;
while (++i)
    printf("%d", i); 
```

这意味着它将从 1 打印到结果`++i`为零时。

如果`char`在您的编译器中签名，则行为留给实现，即使它很可能会溢出到负值并工作到零。

如果`char`为正，这将打印正值，直到它溢出回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:54:33.640

这里的循环终止条件是++i。这没有什么神秘之处。当我达到 0 时循环将停止（因为它将是“假”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:49:54.870

它没有。它运行第一部分并`i`设置为任何副作用，然后在第二部分为假时终止，在这种情况下`i`为 0，然后在每个循环中运行第三部分。

所以编译器基本上将其重写为：

```
char i=0;
i<=5&&i>-1;
do {
     printf("%d",i);
     i>0;
} while ( (++i) != 0) 
```

提示：记住 char 是有符号的和二进制补码，所以我会去 1,2,3....128,-127,-126.... 0

# c# - 把大班分成小班

> ID：11690869
> 
> 赞同：2
> 
> 时间：2012-07-27T15:22:43.107
> 
> 标签：c#, oop

我在将主要表单/类拆分为较小的部分时遇到问题。

主要原因是因为控制事件。我不知道如何使类更小，因为它由 20 个控件（至少）组成，每个控件至少有 3 个事件。

甚至一些我实际上设法转移到一个单独的类的方法，它们需要将控件作为方法参数发送，以便它们能够按照最初的预期工作。

一个小例子是

```
public static bool GroupContainsSnippet(TreeView tree, string group, string snippetName)
{
    bool result = false;

    if (tree.Nodes[group] != null)
    {
        result = tree.Nodes[group].Nodes.ContainsKey(snippetName);
    }

    return result;
} 
```

出于某种原因，为了做那种事情而不得不发送控件感觉很奇怪，所以我希望有一种更清晰的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:55:40.540

使用您的示例，我将创建自己的 TreeView 派生类，例如 MyTreeView，并将尽可能多的 TreeView 代码放入其中。例如，

```
public class MyTreeView : TreeView
{
    public bool GroupContainsSnippet(string group, string snippetName)
    {
        return Nodes[group] != null && Nodes[group].Nodes.ContainsKey(snippetName);
    }    
} 
```

这是一种更 oo 的方法，因为它将您的特定 TreeView 行为封装到它自己的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:34:18.477

如果您认为您的班级太大，您是否考虑过部分班级？你的类的大小不会改变，但它会改变你在任何时候必须处理的一个类文件中的代码量。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)

# masstransit - MassTransit 和事件与命令发布

> ID：11690872
> 
> 赞同：12
> 
> 时间：2012-07-27T15:23:02.613
> 
> 标签：masstransit

我是 MassTransit 的新手，在我的理解中我错过了一些东西。

假设我有一个服务器场，所有节点都可以做同样的工作。应用程序框架是 CQRS 的风格。这意味着我有两种基本的消息要发布：

*   命令：必须由其中一个服务器处理，其中任何一个（第一个没有工作槽的）
*   事件：必须由所有服务器处理

我已经构建了一个非常简单的 MassTransit 原型（一个每隔 X 秒发送一次问候的控制台应用程序）。

在 API 中，我可以看到有一个“发布”方法。我如何指定它是什么类型的消息（一个与所有服务器）？

如果我查看“处理程序”配置，我可以指定队列 uri。如果我为所有主机指定相同的队列，所有主机都会收到消息，但我不能将执行限制在一台服务器上。

如果我从主机专用队列中侦听，则只有一个服务器会处理消息，但我不知道如何广播另一种消息。

请帮助我了解我所缺少的。

PS：如果它在乎，我的消息系统是rabbitmq。

为了测试，我用这些类创建了一个通用类库：

```
public static class ActualProgram
{
    private static readonly CancellationTokenSource g_Shutdown = new CancellationTokenSource();

    private static readonly Random g_Random = new Random();

    public static void ActualMain(int delay, int instanceName)
    {
        Thread.Sleep(delay);
        SetupBus(instanceName);

        Task.Factory.StartNew(PublishRandomMessage, g_Shutdown.Token);

        Console.WriteLine("Press enter at any time to exit");
        Console.ReadLine();
        g_Shutdown.Cancel();

        Bus.Shutdown();
    }

    private static void PublishRandomMessage()
    {
        Bus.Instance.Publish(new Message
        {
            Id = g_Random.Next(),
            Body = "Some message",
            Sender = Assembly.GetEntryAssembly().GetName().Name
        });

        if (!g_Shutdown.IsCancellationRequested)
        {
            Thread.Sleep(g_Random.Next(500, 10000));
            Task.Factory.StartNew(PublishRandomMessage, g_Shutdown.Token);
        }
    }

    private static void SetupBus(int instanceName)
    {
        Bus.Initialize(sbc =>
        {
            sbc.UseRabbitMqRouting();
            sbc.ReceiveFrom("rabbitmq://localhost/simple" + instanceName);
            sbc.Subscribe(subs =>
            {
                subs.Handler<Message>(MessageHandled);
            });
        });
    }

    private static void MessageHandled(Message msg)
    {
        ConsoleColor color = ConsoleColor.Red;
        switch (msg.Sender)
        {
            case "test_app1":
                color = ConsoleColor.Green;
                break;

            case "test_app2":
                color = ConsoleColor.Blue;
                break;

            case "test_app3":
                color = ConsoleColor.Yellow;
                break;
        }
        Console.ForegroundColor = color;
        Console.WriteLine(msg.ToString());
        Console.ResetColor();
    }

    private static void MessageConsumed(Message msg)
    {
        Console.WriteLine(msg.ToString());
    }
}

public class Message
{
    public long Id { get; set; }

    public string Sender { get; set; }

    public string Body { get; set; }

    public override string ToString()
    {
        return string.Format("[{0}] {1} : {2}" + Environment.NewLine, Id, Sender, Body);
    }
} 
```

我还有 3 个只运行 ActualMain 方法的控制台应用程序：

```
internal class Program
{
    private static void Main(string[] args)
    {
        ActualProgram.ActualMain(0, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T12:01:17.077

您想要的是竞争消费者（搜索 SO，您会发现更多信息）使用 RabbitMQ 让生活变得轻松，您需要做的就是为您启动的每个消费者指定相同的队列名称，消息将仅由处理其中之一。而不是每次都生成一个唯一的队列。

```
private static void SetupBus(int instanceName)
{
    Bus.Initialize(sbc =>
    {
        sbc.UseRabbitMqRouting();
        sbc.ReceiveFrom("rabbitmq://localhost/Commands);
        sbc.Subscribe(subs =>
        {
            subs.Handler<Message>(MessageHandled);
        });
    });
} 
```

AFAIK，你需要有一个单独的命令处理程序而不是事件处理程序。所有命令处理程序都将`ReceiveFrom`在同一个队列中，所有事件处理程序都将`ReceiveFrom`拥有自己唯一的队列。

另一个难题是如何将消息发送到总线。您仍然可以将发布用于命令，但如果您错误地配置了消费者，您可能会获得多次执行，因为消息将发送给所有消费者，如果您想保证消息最终在一个队列中，您可以使用`Send`而不是`Publish`.

```
 Bus.Instance
         .GetEndpoint(new Uri("rabbitmq://localhost/Commands"))
        .Send(new Message
        {
            Id = g_Random.Next(),
            Body = "Some message",
            Sender = Assembly.GetEntryAssembly().GetName().Name
        }); 
```

# javascript - 如何在单击按钮时显示表单？

> ID：11690873
> 
> 赞同：0
> 
> 时间：2012-07-27T15:23:03.870
> 
> 标签：javascript, ajax, forms, button, onclick

我面临一个问题。我创建了一个表单，用户必须在其中输入候选人的详细信息并上传他/她的图像。问题是表单中有一个按钮，上面写着“单击以添加更多候选人”，因此当单击此按钮时，相同的表单应重新出现在名为“更多候选人”的部门下。现在要实现这一点，我应该怎么做？我想到的事情如下：

1.  要在 javascript 中创建一个完全创建表单内容（即所有输入字段等）和`onclick`“单击以添加更多候选者”按钮的函数，请调用上述部门下的函数。我可以做到这一点，就像过去我做过与此非常相似的事情一样。但是，这一次我不认为再次创建整个表单是个好主意，因为我在两者之间编写了一个 PHP 函数来读取目录。
2.  或者我的第二个想法是将表单代码写在一个名为 Candidate.php 的文件中，并使用 AJAX 调用该文件。这里的问题可能是我可能会再次调用整个表单（而我只想调用表单的内容，例如候选人姓名和其他内容）

我现在很困惑，非常感谢大家的帮助。提前致谢。

我的html代码：

```
<div id="candidateForm">
    <table border="0">
        <form  method="post" action="formDetails.php" enctype="multipart/form-date">
            <tr>
                <td>Candidate Name:</td>
                <td><input class="candidateForm" type="textbox" name="candidateName" placeholder="Candidate's Name"/></td>
            </tr>
            <tr>
                <td>Enroll No:</td>
                <td><input class="candidateForm" type="textbox" name="enrollNumber" placeholder="Enroll No"/></td>
            </tr>
            <tr>
                <td>Candidate Image:</td>
                <td><input class="candidateForm" type="file" name="candidateImage" placeholder="Select a Image"/></td>
            </tr>
            <tr>
                <td>Cadidate Post:</td>
                <?php
                    //This is the target folder that is going to be read.
                    $target="uploads/";

                    //I an using a directory function in PHP scandir() which scans tha contains of the give directory
                    $dir=scandir($target);
                ?>

                <td> 
                    <select name="candidatePost">
                        <option value="candidatePost" select="selected">---------Select---------</option>
                        <?php 
                                foreach($dir as $folders)
                                {
                                    //When we loop throung the target folder/directory we get this annoying two folder that is "." and ".." so just to rule then out i m using an IF condition
                                    if($folders!="."&& $folders!="..")
                                    //echo $folders;
                                    echo "<option class='candidateForm' value=$folders>$folders</option>";
                                }
                        ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td>About The Candidate:</td>
                <td><textarea name="aboutCandidate" cols="40" rows="5"></textarea></td>
            </tr>
            <div id="moreCandidates"> </div>
            <tr>
            <td></td>
            <td><input type="button" value="Click To Add More Candidate"></input> </td>
            </tr>
            <tr>
                <td></td>
                <td><input type="submit" name="candidateFormSubmit" value="Press Here To Submit The Details" onclick=""/></td>
            </tr>
        </form>
    </table>
</div> 
```

# asp.net - 使用 Visual Studio 2010 中的工具箱从 MySQL 服务器中提取数据时，不断报错

> ID：11690878
> 
> 赞同：0
> 
> 时间：2012-07-27T15:23:13.637
> 
> 标签：asp.net, mysql, vb.net

在我名为“test01”的表中，当我运行该站点时，我不断收到错误消息。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“[test01]”附近使用正确的语法
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：MySql.Data.MySqlClient.MySqlException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“[test01]”附近使用正确的语法

据我所知，这是因为当我将工具箱项放入设计视图中时它生成的代码是这样的：

```
SelectCommand="SELECT * FROM [test01]" 
        DeleteCommand="DELETE FROM [test01] WHERE [test_id] = ?" 
        InsertCommand="INSERT INTO [test01] ([test_id], [TestName], [TestDescription]) VALUES (?, ?, ?)" 
        UpdateCommand="UPDATE [test01] SET [TestName] = ?, [TestDescription] = ? WHERE [test_id] = ?"> 
```

当我删除 [ ] 括号时，它工作正常。我可以做些什么来改变它的功能吗？

我希望这个问题是有道理的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:24:40.837

括号是一种 MSSQL 限定内容的方式。你想要 MySQL 的反引号。

```
SELECT * FROM `test01` 
```

# forms - 表单按钮功能提交 - 提交失败后恢复到初始状态

> ID：11690882
> 
> 赞同：0
> 
> 时间：2012-07-27T15:23:20.300
> 
> 标签：forms, function, submit

我的订单有供用户填写的姓名、电子邮件和地址字段。当他们输入信息并提交订单时，我已将按钮图像的底部设置为动画，因此当他们按下它时，他们知道它在“处理”订单，因为很多时候没有它他们会单击按钮两次。

但我发现，如果我将表单字段留空并单击订单按钮，它会将按钮图像位置更改为“请稍候”状态，但它始终保持在该状态。

当表单没有正确填写时，有没有办法让按钮恢复到原来的位置？

这是页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="stylecss" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
function submit_load() {
document.getElementById('submit').style.backgroundPosition = "0px -100px";
document.getElementById('submit').style.cursor = "default";
}
function submit_order() {
document.getElementById('submit').style.backgroundPosition = "0px 0px";
document.getElementById('submit').style.cursor = "pointer";
}
</script>
</head>
<body>
<div id="content2">
<form action="order.php" method="post" id="order" target="orderformx">
<p>Name: *</p>
                <p>
                  <label>
                  <input name="name" type="text" class="oi" id="name" />
                  </label>
                </p>

<p>Email: *</p>
                <p>
                  <label>
                  <input name="email" type="text" class="oi" id="email" />
                  </label>
                </p>

<p>Address: *</p>
                <p>
                  <label>
                  <input name="address" type="text" class="oi" id="address" />
                  </label>
                </p>
<p><input type="submit" value="" id="submit" onclick="submit_load()" name="submit" class="button" /></p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:41:22.267

您实际上是将表单提交到表单标签中指定的 target="orderformx" ，因此您的页面将永远不会在单击提交时刷新，因为对您的请求的响应将是您的目标。尝试这个，

在提交按钮的 onclick 属性中，将事件传递给函数调用。

```
<input type="submit" value="" id="submit" onclick="submit_load(event)" name="submit" class="button" /> 
```

在你的 javascript 中：

```
function submit_load(e) {
  var event = e || window.event; // for IE
  // add javascript validation here
  if (valid) {
    document.getElementById('submit').style.backgroundPosition = "0px -100px";
    document.getElementById('submit').style.cursor = "default";
  } else {
    event.stopPropagation();
    event.preventDefault();
  }
} 
```

# asp.net-mvc - 自定义用户级别和权限 MVC

> ID：11690887
> 
> 赞同：0
> 
> 时间：2012-07-27T15:23:34.673
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

每当调用 GET 或 POST 来创建或编辑文章页面时，我都想使用以下方法：

```
' userId = ID or username of the user logged in
' companyId = ID or name of the company for which the current blog is assigned
' blogId = ID or name of the blog for which the article is being written
' returnSuccessView = the view that will be returned if the user has access
' returnFailView = the view  that will be returned if the user does not have access

return View(CheckUserAccess(userId, companyId, blogId, returnSuccessView, returnFailView)) 
```

有人可以告诉我这个功能是什么样的吗？我的结构是：

> 公司 -> 博客 -> 文章 -> 评论

我想创建权限，以便只有属于某个公司、属于某个博客并具有某些权限的用户才能执行请求的任务。

例如，我的用户模型将有一个 ICollection 的公司，用户可以关联到这些公司，并且他们可以有一个 ICollection 的博客可以关联。他们还可以拥有一个ICollection的权限，比如超级用户、文章作者、文章编辑、版主等。

我将为权限创建一个单独的模型，以便可以通过 UI 添加和删除它们。

该函数应检查所请求的公司、博客和权限是否与用户关联的（在他们的 ICollection 中具有）相匹配。

做这样的事情的最好方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:34:56.420

我建议您使用自定义`[Authorize]`属性处理此问题。举个例子：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // The user is not even authenticated => we can't get much further
            return false;
        }

        // At this stage we know that there's an authneticated user
        // let's see who he is by fecthing his username
        string username = httpContext.User.Identity.Name;

        RouteData rd = httpContext.Request.RequestContext.RouteData;

        // Now, let's read the companyId and blogId parameters that he sent
        // into the request and ensure that he is not cheating on us
        string companyId = rd.Values["companyId"] as string;
        string blogId = rd.Values["blogId"] as string;

        if (string.IsNullOrEmpty(companyId) || string.IsNullOrEmpty(blogId))
        {
            // One of the required parameters were not supplied when the action was invoked
            // => we can't get much further
            return false;
        }

        return IsOwner(username, companyId, blogId);
    }

    private bool IsOwner(string username, string companyId, string blogId)
    {
        // TODO: you know what to do here: 
        // check with your data store or wherever you have stored this info
        throw new NotImplementedException();
    }
} 
```

现在你可以用这个属性来装饰你的控制器/动作：

```
[MyAuthorize]
public ActionResult Edit(string companyId, string blogId)
{
    // if we got that far it means that the user is authorized to edit this blog post
    // and we could allow him to see the edit view
    EditViewModel model = ...
    return View(model); 
} 
```

当然，为了确保用户不会在 POST 操作中欺骗您，您还可以使用以下属性对其进行装饰：

```
[MyAuthorize]
[HttpPost]
public ActionResult Edit(EditViewModel model)
{
    // if we got that far it means that the user is authorized to edit this blog post
    // and we could go ahead and perform the necessary update
    ....
} 
```

# c - 使用 qsort 对数组进行排序结构

> ID：11690889
> 
> 赞同：3
> 
> 时间：2012-07-27T15:23:42.487
> 
> 标签：c, sorting, structure

通常对结构对象数组进行排序很容易。考虑结构数组 (AOS)

```
#define ITEMS 10

typedef struct MyStruct
{
 char a;
 int  b;
}tMyStruct;

tMyStruct arr_mystruct[ITEMS]; 
```

我首先用 < a , b> 对的值填充这个结构数组。

如果我现在想根据整数字段对这个结构数组进行排序，我可以使用 libc qsort 函数通过使用带有两个整数参数的比较函数来完成。

现在考虑我用 SOA 格式替换上面的 AOS 格式的结构

```
#define ITEMS 10

typedef struct MyStruct
{
 char a[ITEMS];
 int  b[ITEMS];
}tMyStruct;

tMyStruct mystruct; 
```

现在我仍然可以使用 qsort 对整数数组 b 字段进行排序，但是这次我需要另外对 a（字符数组）wrt b 的排序顺序进行排序。

**所以我的问题是，对以 SOA 格式而不是通常的 AOS 格式布局的数据进行排序的一种可能有效的方法是什么？**

谁能帮我这个 ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:34:49.937

可能最好的方法是使用辅助数组：

```
int helper[ITEMS];

int helper_cmp(const void *a, const void *b);

for (i = 0; i < ITEMS; ++i)
    helper[i] = i;
qsort(helper, ITEMS, sizeof(*helper), helper_cmp); 
```

该`helper_cmp`函数将`helper`值作为索引`mystruct.b`并比较这些值：

```
int helper_cmp(const void *a, const void *b)
{
    int first = *(const int *)a;
    int second = *(const int *)b;
    int b_first = mystruct.b[first];
    int b_second = mystruct.b[second];
    // compare b_first and b_second
} 
```

然后，在 之后`qsort`，辅助数组将包含重新排列的索引`b`，告诉它应该如何排序。

您可以使用此数组重新排列`mystruct.a`和`mystruct.b`.

* * *

请注意，这不如排序“结构数组”有效。我不知道你的应用程序，但我的猜测是“数组结构”，其中数组的字段是相关的，首先不是一个好主意。也就是说，如果排序`b`影响 排序`a`，它们可能属于同一个概念元素（如果需要，可以将其称为类），最好将它们组合在一起`struct`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:13:43.003

除了辅助建议之外，没有办法使用 qsort() 来执行此操作。对于这样的情况，我会编写自己的排序函数。为了在速度和易于编写之间取得最佳平衡，我发现插入排序适用于小型数组，而合并排序适用于大型数组。

# coffeescript - CoffeeScript：使用 instanceof 与 Class.constructor.name

> ID：11690894
> 
> 赞同：12
> 
> 时间：2012-07-27T15:24:08.543
> 
> 标签：coffeescript

如果我有一堂课：

```
class Haha
  constructor: (@lolAmount = 1) ->
    alert @lolAmount 
```

我想检查一个对象是否属于正确的类，使用是否总是安全的`constructor.name`：

```
haha = new Haha()
unless haha.constructor.name is 'Haha'
  throw Error 'Wrong type' 
```

还是更好地使用`instanceof`：

```
haha = new Haha()
unless haha instanceof Haha
  throw Error 'Wrong type' 
```

我的一个论点`instanceof`是使用时`extends`：

```
class BigHaha extends Haha

bigHaha = new BigHaha
console.log bigHaha instanceof Haha #true 
```

但是，作为一个 JavaScript 操作员，它有多安全——我觉得我应该对此持怀疑态度。

另一方面，`constructor.name`很清楚正在发生什么。是否保证`constructor.name`将在所有对象上设置？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T15:52:22.480

First of all, [`constructor`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor) is also straight JavaScript:

> Returns a reference to the Object function that created the instance's prototype.

So when you say `o.constructor`, you're really doing straight JavaScript, the name `constructor` for the CoffeeScript object initialization function is a separate matter.

So now you have a choice between using JavaScript's `constructor` property or JavaScript's `instanceof` operator. The `constructor` just tells you what "class" was used to create the object, [`instanceof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof) on the other hand:

> [...] tests whether an object has in its prototype chain the `prototype` property of a constructor.

So `instanceof` is the right choice if you want to allow for subclassing.

# asp.net - 无法解析清单：使用 asp.net

> ID：11690896
> 
> 赞同：3
> 
> 时间：2012-07-27T15:24:23.493
> 
> 标签：asp.net, offline-caching, parse-error

我遵循[斯蒂芬沃尔特的](http://stephenwalther.com/archive/2011/01/26/creating-html5-offline-web-applications-with-asp-net.aspx)指南，一切都没有错误。但是，一旦我在 Chrome 中运行该应用程序，就会收到以下错误消息：

```
Application Cache Error event: Failed to parse manifest http://localhost/website/Manifest.ashx 
```

并且没有任何东西被缓存。

根据我从[这里](http://www.fuckyeahtml5.com/2011/06/debugging-html5s-offline-web-apps/#more-71)收集到的信息，我的清单中有一个 type-o。也许您可以看到我做错了什么并导致此错误消息。

**清单.ashx：**

```
<%@ WebHandler Language="C#" Class="JavaScriptReference.Manifest" %>

using System;
using System.Web;

namespace JavaScriptReference {

    public class Manifest : IHttpHandler {

        public void ProcessRequest(HttpContext context) {
            context.Response.ContentType = "text/cache-manifest";
            context.Response.WriteFile(context.Server.MapPath("Manifest.txt"));
        }

        public bool IsReusable {
            get {
                return false;
            }
        }
    }
} 
```

**清单.txt：**

```
CACHE MANIFEST

CACHE:
Images/img1.jpg
Images/img2.jpg
JScript.js
Default.aspx.vb 
# Does Default.aspx.vb even need to be cached? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T19:47:03.517

**TLDR：**不要在清单中添加 CACHE: 条目，不要缓存代码隐藏文件并确保在 Web.Config 中注册了 HttpHandler

**长版：**

要使示例应用程序正常工作，您需要做一些事情。首先你像上面一样创建你的处理程序，C#中的一个例子是：

```
using System.Web;

namespace CacheTest
{
    public class Manifest : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/cache-manifest";
            context.Response.WriteFile(context.Server.MapPath("Manifest.txt"));
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

接下来，您需要在 web.config 中注册处理程序，例如：

```
 <configuration>
        <system.web>        
            <httpHandlers>
                <add verb="*" path="Manifest.ashx" 
                    type="CacheTest.Manifest, CacheTest" />
            </httpHandlers>
        </system.web>
    </configuration> 
```

接下来在您网站的根目录中创建一个 Manifest.txt 并填充它。示例中不应有 CACHE: 标题。工作示例可能如下所示：

```
CACHE MANIFEST

# v30

Default.aspx

Images/leaping-gorilla-logo.png 
```

请注意，我们不缓存文件后面的代码，只缓存浏览器可能请求的实际资源的相对路径。最后，添加一个 Default.aspx 文件。忽略后面的代码，但编辑标记，以便初始 HTML 标记引用 HttpHandler，即完整标记：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="CacheTest.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" manifest="Manifest.ashx">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        This is a sample offline app!
    </div>
    </form>
</body>
</html> 
```

完成此操作后，您现在可以启动您的网站，在 FireFox 中浏览到它，系统会询问您是否允许将其离线。或者，在 Chrome 中启动它，切换到开发人员工具，检查 Resources 选项卡，您将能够看到已在 Application Cache 节点下加载的资源：

![在 Google Chrome 中运行的离线应用程序](../Images/82c31396696f887730321a5d42823a27.png)

为了完整起见，您完成的代码结构将如下所示：

![在此处输入图像描述](../Images/14812110aa44f36bee547ab810169736.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T05:51:49.753

错误“应用程序缓存错误事件：无法解析清单”可能是由文本文件的格式引起的。

我的部署脚本以 Unicode 生成清单文件。该文件在 Chrome 中看起来很好（访问 URL 时），在在线验证器上进行了验证，但在用作清单时会生成此错误。

要修复文件，只需在记事本中打开清单文件，然后转到“另存为”并选择 UTF8。

# c# - 有一个构造函数块是可以接受的风格吗？

> ID：11690901
> 
> 赞同：0
> 
> 时间：2012-07-27T15:24:38.010
> 
> 标签：c#, java, c++, oop

具体示例：控制单元的抽象，它也可以是由套接字表示的远程单元。为了便于使用，我考虑在构造函数中创建套接字并接受（）。

不过，这感觉有点奇怪。这样的构造函数总是会失败。它可能会阻塞。有没有一种方法不会让我感到不舒服，或者只是 OO 并且我必须服用那种药丸？

（这个问题尤其与流行的 OO 语言和那里使用的普遍接受的风格有关）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:54:21.503

虽然锁定构造函数不一定是坏事，但我会考虑对用户隐藏它。就像是：

```
connection establish_connection(); 
```

从用户代码中，如果他们看到：

```
connection c = establish_connection(); 
```

建立连接并返回活动连接似乎是明智的。用户期望代码可能会失败（异常）或阻塞，因此不会有任何意外，因为在许多库中创建 a`socket`是非阻塞调用。

注意：在这段代码中`connection`代表一个活动连接，库应该控制是否`connection`可以直接*创建*，是否可以*关闭*（通过析构函数以外的任何东西，即`connection`对象是否可以活动而不代表活动连接）以及它是否可以复制以及语义是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T15:28:06.513

在 C++ 中，类模板`std::lock_guard`将愉快地阻塞，直到它获得一个互斥锁：

```
std::mutex m;

{
    std::lock_guard<std::mutex> _(m);

    //...
} 
```

这是完全合法的使用，并且是使用 SBRM 成语（“范围绑定资源管理”，以前称为“RAII”）的强烈惯用 C++。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:27:47.077

是的，构造函数可以阻塞。经典示例是表示 RAII 互斥锁的类，在构造时获取互斥锁。该构造函数将阻塞，直到另一个线程释放互斥锁。

如果您完全`accept` *失败*，那么您应该从构造函数中抛出异常以指示此类失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T18:30:04.573

看看抽象工厂设计模式。您可以隐藏从它们自己的接口继承的具体类，避免您以正常方式创建实例。然后，您创建一个可以访问具体类并可以为您构建这些对象的类，例如工厂。例如：

在您的图书馆中：

```
//ConcreteWindow class must not be visible to the final user.
class ConcreteWindow : public AbstractWindow
{
    ...
};

class GUIManager
{
public:
    AbstractWindow* createWindow()
    {
        return new ConcreteWindow();
    }

    ...
}; 
```

在您的应用程序中：

```
GUIManager* gui = new GUIManager();

//ConcreteWindow class not visible.
AbstractWindow* myWindow = gui->createWindow(); 
```

在 C++ 中，您没有对类的访问修饰符，例如 Java 和 C#。但是您可以使用名称空间或标头包含（不包括）来隐藏具体类。您现在被迫“要求”您的工厂类为您创建该对象。

# c# - 我制作了一个 3 层应用程序，我想在表中插入数据，它向我显示一个错误...它向我显示一个空异常

> ID：11690902
> 
> 赞同：0
> 
> 时间：2012-07-27T15:24:38.363
> 
> 标签：c#, c#-4.0, c#-to-vb.net

数据库层......

```
public static void AddEnrollment(StudentScore enrollment)
{
       SqlConnection conn = MyDB.GetConnection();

       string insertStm = "insert into EnrollmentTable (StudentID,CourseID,DateEnrolled,Score) values (@StudentID,@CourseID,@DateEnrolled,@Score)";

       SqlCommand insertComm = new SqlCommand(insertStm, conn);

       insertComm.Parameters.AddWithValue("@StudentID", enrollment.EnrollmentData.StudentData.StudentID);
       insertComm.Parameters.AddWithValue("@CourseID", enrollment.EnrollmentData.CourseData.CourseID);
       insertComm.Parameters.AddWithValue("@DateEnrolled", enrollment.EnrollmentData.DOE);
       insertComm.Parameters.AddWithValue("@Score", enrollment.Score);

       try
       {
           conn.Open();
           insertComm.ExecuteNonQuery();
       }
       catch (SqlException sqlex)
       {
           throw sqlex;
       }
       finally
       {
           conn.Close();
       } 
```

业务层......

```
public class StudentScore
{
    public Enrollment EnrollmentData { get; set; }
    public int Score { get; set; }

    public StudentScore()
    {
    }

    public StudentScore(Enrollment aEnrollmentData, int aScore)
    {
        EnrollmentData = aEnrollmentData;
        Score = aScore;
    }
} 
```

表示层........

```
private void button5_Click(object sender, EventArgs e)
{
        StudentScore enrollment = new StudentScore();

        enrollment.EnrollmentData.StudentData.StudentID = comboBox1.SelectedValue.ToString();
        enrollment.EnrollmentData.CourseData.CourseID = comboBox2.SelectedValue.ToString();
        enrollment.EnrollmentData.DOE = DateTime.Now;

        EnrollmentDB.AddEnrollment(enrollment);

        MessageBox.Show("Student is enrolled this course.");
    } 
```

它告诉我这个错误

> 例外：enrollment.EnrollmentData.StudentData.StudentID = comboBox1.SelectedValue.ToString();

请帮助我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:28:15.733

`enrollment.EnrollmentData`尚未初始化。在没有更多细节的情况下，更改

```
StudentScore enrollment = new StudentScore(); 
```

至

```
StudentScore enrollment = new StudentScore(new Enrollment(), 0); 
```

# xcode - xcode -- conditional compilation based on build configuration

> ID：11690909
> 
> 赞同：3
> 
> 时间：2012-07-27T15:25:11.720
> 
> 标签：xcode, build, preprocessor

I'd like to compile differently based on which build configuration I'm using. Something like

```
#ifdef DEBUG
 // debug code goes here
#endif 
```

I know I can do this by defining preprocessor macros for each build configuration. But I'm wondering if there's already something built-in I can ues. Is there?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:30:17.033

这是我一直用的，而且很干净。当您搜索代码时它也会出现，这很好，因为设置等......可能不会。

# php - php输入类错误处理？

> ID：11690913
> 
> 赞同：0
> 
> 时间：2012-07-27T15:25:26.703
> 
> 标签：php, html, class, input, error-handling

我有一个带有两个输入字段的登录 div。将检查每个输入字段是否有错误。

当我提交数据时，出现了一些问题。这是HTML：

```
<div class="small">
    <?php if (!isset($errors['a'])):?>
          <input type="text" id="a" name="a" value="<?php echo isset ($_POST['a'])? $_POST['a'] : 'Login'; ?>"/>
     <?php endif;?>

     <?php if (isset($errors['a'])):?>
          <input class="log-error" type="text" id="a" name="a" value="<?php echo isset ($_POST['a'])? $_POST['a'] : 'Login'; ?>"/>
      <?php endif;?>
</div>

<?php if (isset($errors['a'])):?>
     <?php echo "<div id='errordiv'></div><div class='error'>";
      echo $errors['a'][0];
      echo "</div>";
endif;?>

<div class="small">
      <?php if (!isset($errors['b'])):?>
           <input type="text" id="b" name="b" value="<?php echo isset ($_POST['b'])? $_POST['b'] : 'Password'; ?>"/>
      <?php endif;?>

      <?php if (isset($errors['b'])):?>
           <input class="log-error" type="text" id="b" name="b" value="<?php echo isset ($_POST['b'])? $_POST['b'] : 'Password'; ?>"/>
       <?php endif;?>
</div>

<?php if ( ( isset($errors['b']) ) && (empty($errors['a'][0]) == true) ):?>
     <?php echo "<div id='errordiv'></div><div class='error'>";
     echo $errors['b'][0];
     echo "</div>";
endif;?> 
```

提交数据时，输入类不会同时显示两个错误。似乎值标签导致了这个问题。

当我从两个输入字段中删除 value-tag 时，它将同时显示两者的错误输入类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:51:03.263

在我看来，这似乎存在逻辑误解。

如果您想同时显示这两个错误 - 替换此行

```
<?php if ( ( isset($errors['b']) ) && (empty($errors['a'][0]) == true) ):?> 
```

有了这个

```
 <?php if (isset($errors['b'])):?> 
```

# java - 在方法定义期间用作参数的一部分时，三个点 (...) 表示什么？

> ID：11690917
> 
> 赞同：18
> 
> 时间：2012-07-27T15:25:51.187
> 
> 标签：java, arrays, parameters, arguments

在方法定义期间用作参数的一部分时，三个点 (...) 表示什么？

另外，这三个点的符号是否有任何编程术语？

我在代码示例中注意到：

```
public void method1 (Animal... animal) {
// Code
} 
```

这个方法是从两个地方调用的。调用时传递的参数在两种情况下都不同：

1.  对象数组作为参数传递给 method1(Animal...)

2.  类 Animal 的对象作为参数传递给 method1(Animal...)

那么，如果您不确定是否将数组的单个元素或整个数组作为参数传递给方法，是否会在方法定义中使用 3 个点作为参数的一部分？

另外，请让我知道这三个点的符号是否有任何编程术语。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T15:26:49.550

它被称为可变参数。

这意味着您可以根据需要传递任意数量的该类型。

它实际上将其转换为您可以像引用任何其他数组一样`method1(Animal[] a)`引用它们。`a[1]`

如果我有以下

```
Cat whiskers = new Cat();
Dog rufus = new Dog();
Dolphin flipper = new Dolphin();

method1(whiskers, rufus, flipper); // okay!
method1(rufus); // okay!
method1(); // okay!
method1(flipper,new Parakeet()); // okay! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T15:27:50.110

这意味着该方法接受该类型的对象数组，但是，当您传递以逗号分隔的多个该类型的对象**时**，该数组会自动创建。

请记住，方法签名中只能有一个给定类型的 vararg 参数，并且在 vararg 之后的签名中不能有另一个相同类型的参数（显然，没有办法区分二）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:29:27.740

这意味着零个或多个 String 对象（或它们的数组）可以作为该函数的参数传递。

也许：

```
x("foo", "bar");
x("foo", "bar", "baz"); 
```

# iphone - Cocoa-Touch 出现奇怪错误（尝试输入两个图像视图时的 SIGABRT）

> ID：11690919
> 
> 赞同：0
> 
> 时间：2012-07-27T15:25:55.337
> 
> 标签：iphone, cocoa-touch, imageview, sigabrt

我在这里遇到了一些非常奇怪的问题。每次我添加第二个图像视图时，程序都会崩溃：“无法向引导服务器注册 ken.word。错误：未知错误代码。这通常意味着该进程的另一个实例已经在运行或挂在调试器。（gdb）”（SIGABRT）

它在这部分代码上使用 SIGABRT：

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

但是当我只添加一个图像视图时，它运行得非常好。我试图重新启动 Xcode，甚至重新启动 mac，但它没有工作。我也尝试创建另一个项目，它也没有工作！

我正在使用 Xcode 4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:31:15.290

退出您的 XCode 和模拟器，然后重试。它会起作用的。并且永远不要在模拟器处于运行模式时退出，先停止程序然后退出。

如果您在设备中运行您的应用程序，则从设备中删除您的应用程序，关闭您的设备，然后打开并尝试。

# javascript - 哪些是 github 上的 Splitview ZIP 中使插件工作所需的文件

> ID：11690920
> 
> 赞同：0
> 
> 时间：2012-07-27T15:26:04.360
> 
> 标签：javascript, jquery, jquery-mobile, github, ipad

我正在尝试实现拆分视图，正如我们在 jquery 移动演示中看到的那样：http: [//jquerymobile.com/demos/1.1.1/](http://jquerymobile.com/demos/1.1.1/)

插件： [http ://asyraf9.github.com/jquery-mobile/](http://asyraf9.github.com/jquery-mobile/)

在存档中，它们是许多（不需要的）文件，作者还包括一个旧的 jquery 移动版本。

我已经拥有最新版本的 jquery mobile，我正在尝试添加我需要的文件以使其工作。

我已经阅读了自述文件，作者展示了一个基本的 html 页面以使其工作，但没有提供任何关于安装的解释。

我很确定我不需要一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:30:26.537

Splitview 在 JQM 内部进行更改（向事件添加一个类 .forgotwhatitwas，以便以后可以从 splitview.js 内部禁用它们）。除非您将这些调整移植到 JQM 的当前版本，否则 splitview 脚本不会让您有任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:31:45.950

最好的方法是打开zip文件中的index.html，检查header中包含哪些文件，这样可以让splitview正常运行。您还需要包含所有这些文件。另一件事是您需要注意 jquery mobile 和 jquery 的不同版本（js 和 css 文件）。根据我的经验，它似乎无法与最新版本的 jquery mobile 和 jquery 一起正常工作。我所做的是打开每个 js 和 css 文件并将它们复制到我的库中。

希望这对您有所帮助。

# java - 找不到文件发现异常 - 但我知道它在那里

> ID：11690922
> 
> 赞同：0
> 
> 时间：2012-07-27T15:26:09.433
> 
> 标签：java

我不断收到“找不到文件异常”，但我知道它就在那里！`File file = new File("C:\\A-small-practice.in");`能够很好地找到文件，但是当我尝试使用`FileInputStream`它时会返回异常。

```
import java.io.*;

public class Solution {

    public static void main(String[] args) {

       File file = new File("C:\\A-small-practice.in");
       System.out.println(file.getAbsolutePath()); //prints C:\A-small-practice.in

       FileInputStream fstream = new FileInputStream(file);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:30:37.573

该[**文件**](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)有一些方法可以帮助你。

```
boolean canExecute();
boolean canRead();
boolean canWrite();
boolean exists();
boolean isFile();
boolean isDirectory();
boolean isAbsolute() 
```

例如，您可以检查：exists() && isFile() && canRead() 并根据您无法读取文件的原因打印更好的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:07:13.290

当你写：

```
 File file = new File("C:\\A-small-practice.in"); 
```

如果一个文件不存在，则会创建一个文件，因此在调用 file.getAbsolutePath()) 时不会出现异常。

但是，如果文件不存在，一旦您尝试为不存在的文件打开输入流，它将引发文件未找到异常。所以我的建议是尝试调用 .exsits()。查看文件是否存在。

此外，找不到文件异常的java文档说明如下：“如果文件确实存在但由于某种原因无法访问，这些构造函数也会抛出它”。所以也许你应该分享一些关于文件本身的信息。

# css - 最后一个，有时是倒数第二个

> ID：11690926
> 
> 赞同：0
> 
> 时间：2012-07-27T15:26:25.400
> 
> 标签：css

我有一组`<li>`元素对齐，以便它们形成两列。使用`nth-last-child`and `nth-child(even)`- 或任何其他选择器的组合 - 是否可以将样式应用于：a）最后两个（假设有相同数量的`<li>`'s）或 b）仅最后一个（假设有一个奇数的个数`<li>`）

有关示例，请参见[我的小提琴或使用下面的代码。](http://jsfiddle.net/chricholson/HFn9Q/2/)我用黄色突出显示了应该应用该样式的那些。

我正在寻找没有服务器端解决方案、html 修改或 Javascript，我很想知道它是否可以单独使用 CSS 完成。浏览器兼容性不是问题，所以一直使用 CSS3。

**代码**

*HTML*

```
<ul>
<li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li style="background: yellow">Hello World</li><!--
--><li style="background: yellow">Hello World</li>
</ul>

<br />

<ul>
<li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li>Hello World</li><!--
--><li style="background: yellow">Hello World</li>
</ul>​ 
```

*CSS*

```
ul {
    padding: 10px;
    width: 400px;
    background: red;
}

li {
    width: 200px;
    display: inline-block;
    background: blue;
}   ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:34:10.857

试试这个 - [http://jsfiddle.net/HFn9Q/4/](http://jsfiddle.net/HFn9Q/4/)

```
/* set the last 2 items bg to yellow */
li:nth-last-child(2) {
    background: yellow;
}

/* clean the pre-last item bg in case of odd <li> number */
li:nth-child(even) {
    background: blue;
}

/* explicitly set the very last item bg to yellow for even <li> number, otherwise the previous rule will give it a blue bg */    
li:last-child {
    background: yellow;
} 
```

# python - 在scikit learn中，如何处理数值和标称值混合的数据？

> ID：11690930
> 
> 赞同：12
> 
> 时间：2012-07-27T15:26:39.837
> 
> 标签：python, machine-learning, scikit-learn, data-mining, mixed

我知道 scikit-learn 中的计算是基于 NumPy 的，所以一切都是矩阵或数组。

这个包如何处理混合数据（数值和标称值）？

例如，产品可能具有属性“颜色”和“价格”，其中颜色是标称的，价格是数字的。我注意到有一个名为“DictVectorizer”的模型来计算名义数据。例如，两种产品是：

```
products = [{'color':'black','price':10}, {'color':'green','price':5}] 
```

'DictVectorizer' 的结果可能是：

```
[[1,0,10],
 [0,1,5]] 
```

如果属性“颜色”有很多不同的值，则矩阵将非常稀疏。而长特征会降低一些算法的性能，比如决策树。

**有没有什么方法可以使用标称值而不需要创建虚拟代码？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:49:24.390

scikit-learn 中的 DecisionTree 类将需要一些重构来有效地处理高基数的分类特征（甚至可能处理自然稀疏的数据，例如文本 TF-IDF 向量）。

AFAIK 还没有人在做这方面的工作。

# java - 如何在 Java 之类的 Objective-C 中实现嵌套类？

> ID：11690932
> 
> 赞同：5
> 
> 时间：2012-07-27T15:26:42.833
> 
> 标签：java, objective-c

我需要实现嵌套类。我如何在objective-c中编写它？
例如，我有这样的代码：

```
public class A {
    private int a;
    private B b;

    class B {
        private int z;
        public void f() {
            a = 1;
        }
    }

    public void fA() {
        b.f();
    }
} 
```

我怎样才能在objective-c中实现这个代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:32:23.433

你不能，因为在 Objective-C 中没有嵌套类。您的`A`类可以动态构建`B`类，然后将其注册到运行时，但这似乎没有多大意义，因为这不是 Objective-C 语言的自然习语。只需创建一个不在您的班级之外使用的普通班级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:29:34.657

据我了解，Objective-C 没有内部类。请尝试以下链接：

[如何从内部类访问变量](https://stackoverflow.com/questions/5334428/how-to-access-a-variable-from-inner-class)

[Objective C 中的私有类](https://stackoverflow.com/questions/7682673/private-classes-in-objective-c)

[http://lists.apple.com/archives/objc-language/2004/Dec/msg00041.html](http://lists.apple.com/archives/objc-language/2004/Dec/msg00041.html)

# excel - Visual Basic Excel：将文本复制为文本

> ID：11690935
> 
> 赞同：2
> 
> 时间：2012-07-27T15:26:49.287
> 
> 标签：excel, vba

我在做

```
Cells(101, 50).Value = Cells(100, 50).Value 
```

并且 Cells(100,50) 中有“001234”。

问题是 Cells(101,50) 在语句执行后得到 1234。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:01:02.140

Another way

```
Sub Sample()
    Cells(101, 50).Formula = "=TEXT(" & Cells(100, 50).Value & ",""000000"")"
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:29:43.713

尝试这个：

```
Cells(101,50).Value = "'" & Cells(100,50).Value 
```

或将目标单元格的格式更改为文本

# android - saxparser 计时器和异步任务

> ID：11690936
> 
> 赞同：-1
> 
> 时间：2012-07-27T15:26:53.077
> 
> 标签：android, timer, android-asynctask, saxparser

我可能有一个愚蠢/奇怪的问题

我是 android 和 java 的新手，我需要一些建议来了解 android 的方法以及如何使用它们

我有一个看起来像这样的主要活动类

 `````
extends  Activity implements OnClickListener{

     private static final String TAG = "ServicesDemo";
     public String myimageURL;
     private EditText Lyrics;
    private ImageView AlbumPic;
    private Button play,  stop;
    private TextView Artist, Song, Album, News, Lyric;
    private UpdateTimeTask m_updateTime;
    private Handler m_handler;
    Parser data;
    /** The delay in milliseconds between updates. */
    private final int DELAY = 20000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Artist =(TextView)findViewById(R.id.tvArtist);
        Song  =(TextView)findViewById(R.id.tvSongTitle);
        Album =(TextView)findViewById(R.id.tvAlbum);
        play = (Button) findViewById(R.id.play);
        stop = (Button) findViewById(R.id.stop);
        Lyrics = (EditText) findViewById(R.id.tvLyrics);
        News = (TextView)findViewById(R.id.tvAnouncement);
        AlbumPic = (ImageView) findViewById(R.id.AlbumPic);

        play.setOnClickListener(this);
        stop.setOnClickListener(this);

        m_updateTime = new UpdateTimeTask();

        m_handler = new Handler();
        m_handler.post(m_updateTime);
    }

    private class UpdateTimeTask implements Runnable {
        public void run() {

            try {

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                URL url = new URL("http://www.mysite.com/AndroidTest.php"); 
                XMLHandler myXMLHandler = new XMLHandler();
                xmlR.setContentHandler(myXMLHandler);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
            }
            data = XMLHandler.data;

            for (int i = 0; i < data.getTitle().size(); i++) {

           Lyrics.setText(data.getLyric().get(i));
                 myimageURL = data.getPic().get(i);

            Song.setText("Title = "+data.getTitle().get(i));

            Artist.setText("Artist = "+data.getArtist().get(i));

            Album.setText("Album = "+data.getAlbum().get(i)); 

 }

 downloadFile(myimageURL );

}

Bitmap bmImg;
void downloadFile(String fileUrl) {
 URL myFileUrl = null;
 try {
    myFileUrl = new URL(fileUrl);
 } catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
 }
 try {
    HttpURLConnection conn = (HttpURLConnection) myFileUrl
          .openConnection();
    conn.setDoInput(true);
    conn.connect();
    InputStream is = conn.getInputStream();

    bmImg = BitmapFactory.decodeStream(is);
    AlbumPic.setImageBitmap(bmImg);
 } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
 }
 m_handler.postDelayed(m_updateTime, DELAY);
 AlbumPic.clearAnimation();
}

} 
````  `代码工作正常

如您所见，我使用计时器和服务

服务代码写在另一个名为“my_service”的类中定时器代码写在主类中

我的问题是我应该把我现在在主类中的定时器代码放在一个单独的类中，例如“定时器类”

然后从主类调用它，就像我为服务所做的那样

还是像现在一样可以

并且因为 xml 在 Internet 服务器上，我应该使用 asynctask 吗？

我是否正确理解异步任务只运行一次所以如果我使用异步任务我必须将它与计时器结合使用以保持 UI 更新

谢谢

ps 是与“类”相同的“线程”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:59:50.237

我会把计时器代码留在那里，除非你想进行一些重大的重构。

这样做的原因是您在 UpdateTimeTask 中访问了您的主要活动的许多私有成员。将其拆分为一个单独的文件，您将无法再访问处于当前状态的这些成员。

如果您准备进行一些重构，则可以使 AsyncTask 工作。当您想要执行您正在执行的单个任务（而不是轮询之类的任务）时，可以使用它们。如果您发现 AsyncTask 导致问题，则使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)与 UI 进行通信。

最后，线程与 Java 中的类不同。类代表特定对象的一组特征和命令，而[线程](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)[代表](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)执行路径。类对象是用于执行动作的东西，而线程是某些动作的集合。``

# python - Python：如何从文本文件中提取字符串以用作数据

> ID：11690939
> 
> 赞同：3
> 
> 时间：2012-07-27T15:27:01.753
> 
> 标签：python

这是我第一次编写 python 脚本，我在开始时遇到了一些麻烦。假设我有一个名为 Test.txt 的 txt 文件，其中包含此信息。

```
 x          y          z      Type of atom
ATOM   1     C1  GLN D  10      26.395      3.904      4.923    C
ATOM   2     O1  GLN D  10      26.431      2.638      5.002    O
ATOM   3     O2  GLN D  10      26.085      4.471      3.796    O 
ATOM   4     C2  GLN D  10      26.642      4.743      6.148    C 
```

我想要做的是最终编写一个脚本来找到这三个原子的质心。所以基本上我想总结那个txt文件中的所有x值，每个数字乘以一个给定的值，具体取决于原子的类型。

我知道我需要为每个 x 值定义位置，但是我无法弄清楚如何将这些 x 值表示为数字而不是字符串中的 txt。我必须记住，我需要将这些数字乘以原子类型，所以我需要一种方法来为每种原子类型定义它们。谁能把我推向正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:48:25.530

```
mass_dictionary = {'C':12.0107,
                   'O':15.999
                   #Others...?
                  }

# If your files are this structured, you can just
# hardcode some column assumptions.
coords_idxs = [6,7,8]
type_idx = 9

# Open file, get lines, close file.
# Probably prudent to add try-except here for bad file names.
f_open = open("Test.txt",'r')
lines = f_open.readlines()
f_open.close()

# Initialize an array to hold needed intermediate data.
output_coms = []; total_mass = 0.0;

# Loop through the lines of the file.
for line in lines:

    # Split the line on white space.
    line_stuff = line.split()

    # If the line is empty or fails to start with 'ATOM', skip it.
    if (not line_stuff) or (not line_stuff[0]=='ATOM'):
        pass

    # Otherwise, append the mass-weighted coordinates to a list and increment total mass.
    else:
        output_coms.append([mass_dictionary[line_stuff[type_idx]]*float(line_stuff[i]) for i in coords_idxs])
        total_mass = total_mass + mass_dictionary[line_stuff[type_idx]]

# After getting all the data, finish off the averages.
avg_x, avg_y, avg_z = tuple(map( lambda x: (1.0/total_mass)*sum(x), [[elem[i] for elem in output_coms] for i in [0,1,2]]))

# A lot of this will be better with NumPy arrays if you'll be using this often or on
# larger files. Python Pandas might be an even better option if you want to just
# store the file data and play with it in Python. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:53:36.370

如果您已`pandas`安装，请检查`read_fwf`导入固定宽度文件并创建 DataFrame（二维表格数据结构）的功能。如果您想进行任何额外的数据操作，它将在导入时为您节省几行代码，并为您提供大量数据处理功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:37:55.467

基本上使用 python 中的[open](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)函数，您可以打开任何文件。因此，您可以执行以下操作： --- 以下代码段不是解决整个问题的方法，而是一种方法。

```
def read_file():
    f = open("filename", 'r')
    for line in f:
        line_list = line.split()
        ....
        ....
    f.close() 
```

从这一点开始，您可以很好地设置您可以使用这些值做什么。基本上第二行只是打开文件进行阅读。第三行定义了一个 for 循环，每次读取一行文件，每一行都进入`line`变量。

该片段中的最后一行基本上将字符串 - 在每个空白处 - 分解为一个列表。所以 line_list[0] 将是您第一列的值，依此类推。从这一点开始，如果您有任何编程经验，您可以使用 if 语句等来获得您想要的逻辑。

** 还要记住，存储在该列表中的值的类型都是字符串，所以如果你想执行任何算术运算，比如加法，你必须小心。

***为语法更正而编辑

# html - 定义自己的光标在 IE 8 中不起作用

> ID：11690945
> 
> 赞同：0
> 
> 时间：2012-07-27T15:27:23.963
> 
> 标签：html, css, internet-explorer, cursor

此页面在 Firefox 和 chrome 中完美运行，但在 IE 中无法正常运行：

```
<html>
  <head>
    <style  rel="stylesheet" type="text/css" > 
      body{ 
        cursor: url("crosshair2nosprinkles.cur") 24 24, default;
      }
    </style>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:08:05.230

`.cur`文件具有内置的热点，因此您无需明确指定它。试试这个：

```
cursor: url("crosshair2nosprinkles.cur"), default; 
```

如果这不能正常工作，请确保光标文件正确定义了热点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:09:32.373

自定义游标语法有点奇怪的跨浏览器。请参阅博客文章*[Cross-browser custom CSS cursors](https://beradrian.wordpress.com/2008/01/08/cross-browser-custom-css-cursors/)*了解这些怪癖，因此您可以确定需要为要支持的浏览器实现哪些光标。

没有看到路径或完整的 HTML 代码（因为我假设你简化了上面的代码），它可能与你的 URL 引用有问题，因为 IE 的光标相对路径不是基于 CSS 的位置，就像大多数`url()`用途一样，而是由源元素。您是否在某些浏览器中遇到任何 404 错误，而在其他浏览器中却没有？链接的指南应该能够引导您完成如何修复它。（或者您可以从代码中向我们提供更多详细信息，包括路径、网络请求和状态、实时示例链接等，我们可以为您提供帮助。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:11:00.720

答案是 IE 不接受热点坐标，所以我必须让自己成为一个带有隐式热点的光标，而且我必须在页面开头定义 DOCTYPE

# jquery - 隐藏提交按钮，直到表单有效

> ID：11690947
> 
> 赞同：4
> 
> 时间：2012-07-27T15:27:36.043
> 
> 标签：jquery, html, ajax

我对 Jquery 很陌生，所以这可能是一个简单的问题，但是有没有办法隐藏表单上的提交按钮，直到所有字段都得到验证。

验证需要是“在您键入时”的解决方案。基本上我有 3 个字段 - 名字、姓氏和电子邮件。我希望提交按钮保持隐藏状态，直到填写了两个“姓名”字段并且在电子邮件字段中输入了有效的电子邮件地址。

表单本身使用 AJAX 将表单数据输入数据库。表单位于灯箱中，单击提交按钮后应自动关闭。

你可以在这里看到一个例子：http: [//testing.xenongroupadmin.com/whatis/pfi](http://testing.xenongroupadmin.com/whatis/pfi)

忽略“关闭此窗口”链接 - 这只是为了方便我，将在最终版本中删除。

下面是表单的 HTML 代码，后面是 JQuery/AJAX 提交代码：

```
<form id="registerform" action="thanks.php" method="POST">
 <ul id="inputform">
  <li>
   <label for="firstname" id="firstnamelabel">First Name</label>
   <input type="text" name="first_name" id="fname" class="registerboxes" />
  </li>
  <li>
   <label for="lastname" id="lastnamelabel">Last Name</label>
   <input type="text" name="last_name" id="lname" class="registerboxes" />
  </li>
  <li>
   <label for="email" id="emaillabel">E-mail Address</label>
   <input type="text" name="emailbox" id="email" class="registerboxes" />
  </li>
 </ul>
 <input type="submit" value="Submit" id="emailbutton" />
</form> 
```

和jQuery：

```
$(document).ready(function(){
 $("form#registerform").submit(function() {
  var fname     = $('#fname').attr('value');
  var lname     = $('#lname').attr('value');
  var email     = $('#email').attr('value');    

 $.ajax({
  type: "POST",
  url: "post.php",
  data: "fname="+ fname +"& lname="+ lname +"& email="+ email,
  success: function(){

 $('div#register-panel, div#lightbox').fadeOut(300);
   }
  });
  return false;
 });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:56:47.057

[http://jsfiddle.net/nickaknudson/KnZaq/](http://jsfiddle.net/nickaknudson/KnZaq/)

```
$(document).ready(function() {
    $('#emailbutton').hide();
    $('input').change(function(e) {
        if ($('#fname').val() && $('#lname').val() && $('#email').val() && validateEmail($('#email').val())) {
            $('#emailbutton').show();
        }
    });
});

var validateEmail = function(email) {
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
};​ 
```

**更新**

抱歉，那个版本的小提琴可能有问题。再试一次？ [http://jsfiddle.net/nickaknudson/KnZaq/3/](http://jsfiddle.net/nickaknudson/KnZaq/3/)

**资源**

*   [在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:56:41.273

我不知道您使用的是哪个验证插件，但我认为它会返回真/假。在您准备好的处理程序中或在 css 中将提交按钮的显示设置为“无”，然后在您验证它之后，使用 JQuery show() 方法。就像是：

```
if (formIsValid) {
    $("#submitID").show();
} 
```

另一个更用户友好的选项是显示按钮，但在表单有效之前将其禁用，然后启用它。

戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:49:29.717

您的表单数据不是那么大，如果您想学习新东西而不是在 javascript 端使用插件和验证，您可以手动执行某些操作（我认为）。

* * *

好吧，我更喜欢通过服务器端来验证，看看这个：

**测试和工作：**

**索引.htm**

```
<html>
<head>
<title>Get more information</title>
</head>
<style>
.error {
    color: red;
}
</style>
<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){

    $('#emailbutton').on('click', function(){
        var fname = $('#fname').val();
        var lname = $('#lname').val();
        var email = $.trim($('#email').val());

        $.post('validate.php', {fname:fname, lname:lname, email:email}, function(data){
            if(data != 1) {
                var obj = $('#' + data + '_msg');
                if(data == 'fname') {
                    obj.html('Invalid first name.').addClass('error').show().fadeOut('slow');
                } else if (data == 'lname') {
                    obj.html('Invalid last name.').addClass('error').show().fadeOut('slow');
                } else if (data == 'email') {
                    obj.html('Invalid email.').addClass('error').show().fadeOut('slow');
                }
            } else if(data == 1) {
                $('#registerform').submit();
            }
        });
    });

});
</script>
<body>
<form id="registerform" action="thanks.php" method="POST">
 <ul id="inputform">
  <li>
   <label for="firstname" id="firstnamelabel">First Name</label>
   <input type="text" name="first_name" id="fname" class="registerboxes" />
   <span id="fname_msg"></span>
  </li>
  <li>
   <label for="lastname" id="lastnamelabel">Last Name</label>
   <input type="text" name="last_name" id="lname" class="registerboxes" />
   <span id="lname_msg"></span>
  </li>
  <li>
   <label for="email" id="emaillabel">E-mail Address</label>
   <input type="text" name="emailbox" id="email" class="registerboxes" />
   <span id="email_msg"></span>
  </li>
 </ul>
 <input type="button" value="Submit" id="emailbutton" />
</form>
</body>
</html> 
```

**验证.php**

```
<?php 
if(isset($_POST['fname']) && isset($_POST['lname']) && isset($_POST['email'])) {

    $fname = $_POST['fname'];
    $lname = $_POST['lname'];
    $email = $_POST['email'];

    if(validateInput($fname, 2, 25)) {
        if(validateInput($lname, 2, 30)) {
            if(validateEmail($email, 5, 150)) {
                print(1);
            } else {
                print('email');
            }
        } else {
            print('lname');
        }
    } else {
        print('fname');
    }
}
function validateInput($value, $minlength, $maxlength) {
    $valid = false;
    try {
        if (strlen(trim($value)) == 0) {
            $valid = false;
        } else if (strlen(trim($value)) < $minlength || strlen(trim($value)) > $maxlength) {
            $valid = false;
        } else {
            $valid = true;
        }
    } catch (exception $e) {
        /* get exception: $e->getMessage() */
        $valid = false;
    }
    return $valid;
}

function validateEmail($email, $minlength, $maxlength) {
    $valid = false;
    try {
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $valid = false;
        } else if (strlen(trim($email)) == 0) {
            $valid = false;
        } else if (strlen(trim($email)) < $minlength || strlen(trim($email)) > $maxlength) {
            $valid = false;
        } else {
            $valid = true;
        }
    } catch (exception $e) {
        /* get exception: $e->getMessage() */
        $valid = false;
    }
    return $valid;
}
?> 
```

**谢谢.php**

```
<?php 
if(isset($_POST['first_name']) && isset($_POST['last_name']) && isset($_POST['emailbox'])) {

$fname = $_POST['first_name'];
$lname = $_POST['last_name'];
$email = $_POST['emailbox'];

echo $fname.' '.$lname.' '.$email;

// Do what you need with your data at this point, don't forget to sanitize values to insert them in your DB :-)

}
?> 
```

# c - 导致系统调用中的段错误返回到用户信号处理程序？

> ID：11690948
> 
> 赞同：3
> 
> 时间：2012-07-27T15:27:38.260
> 
> 标签：c, linux

我一直在使用一种技术来透明地对内存映射数据进行数据转换。这个想法基本上是内存映射所需的文件，并创建第二个读/写保护的匿名区域。当用户访问匿名区域时，会捕获由此产生的段错误，转换数据并更改权限以允许继续访问。

它工作得很好，但有一个小问题。在没有首先接触数据的情况下将指针传递给像 write() 这样的系统调用不会触发段错误处理程序，而是只返回 EFAULT，因为没有调用处理程序来修复权限。有没有办法让系统调用在出现问题时使用用户空间处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:31:47.287

不，当缓冲区错误时，没有办法像`write` make a这样的系统调用。`SIGSEGV`Return`EFAULT`是该`write(2)`系统调用语义的一部分。

`LD_PRELOAD` 如果只关心`libc.so`;你可能会做一些事情 你也可以`ptrace`用来捕捉系统调用 à la `strace`。

另请参阅对您的一个非常相似的问题的[答案。](https://stackoverflow.com/a/11681530/841108)

# c# - 获取 DataTable.ColumnChangedEvent 中已编辑单元格的行索引

> ID：11690957
> 
> 赞同：1
> 
> 时间：2012-07-27T15:28:04.760
> 
> 标签：c#, vb.net, datatable

如何获取使用数据表的 ColumnChangedEvent 编辑的单元格的行 ID

我尝试如下：

```
Private Sub OnColumnChanged(sender As Object, e As DataColumnChangeEventArgs)

    {

    int RowIndex= e.Row.Table.Rows.IndexOf(e.Row);
    } 
```

RowIndex返回为-1可能是因为该行在数据表中没有更新，是这样吗？？？找到单元格的行索引的任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:15:05.357

这是一个新行，尚未提交且不在行集合中，因此返回 -1

# cakephp-2.0 - 在 CakePHP 2 中添加不区分大小写的路由的简单方法

> ID：11690966
> 
> 赞同：1
> 
> 时间：2012-07-27T15:28:22.520
> 
> 标签：cakephp-2.0

```
Router::connect('/(?i:about)', array('controller' => 'pages', 'action'=>'display', 'about')); 
```

[曾经在 CakePHP 1.2 中工作，](https://groups.google.com/forum/?fromgroups#!topic/cake-php/E2Stqi9S708)但在 CakePHP 2.x 中似乎不工作

我看到的唯一其他解决方案是使用选项设置一个正则表达式，该表达式将与 rout 中的 a 标志匹配，但对于如此简单的事情似乎相当复杂：

```
Router::connect('/:aboutFlag', array('controller' => 'pages', 'action'=>'display', 'about'),array("aboutFlag"=>"[aA]bout")); 
```

有没有更简单的解决方案，更类似于蛋糕 1.2 中的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:44:35.780

```
Router::connect('/:aboutFlag', array('controller' => 'pages', 'action'=>'display', 'about'),array("aboutFlag"=>"(?i:about)")); 
```

这源于[此处发布的答案](https://stackoverflow.com/questions/12526099/cakephp-routing-in-php-too)

# c# - 如何在 C# 中从串口读取整数值？

> ID：11690967
> 
> 赞同：1
> 
> 时间：2012-07-27T15:28:22.940
> 
> 标签：c#, serial-port

我有一台通过 RS-232 通信的 Keyence 相机。它被配置为在触发时输出三个整数值。我无法读取整数值。我尝试使用 char 数组缓冲区，但它只读取输出中的第一个 + 符号。我用腻子测试了它，输出是这样的

+346.0,+261.0,098

我想知道是否需要使用任何东西来读取这样的整数值？

```
 static void Main(string[] args)
    {

        char[] buffer1 = new char[200] ;

        SerialPort port = new SerialPort("COM4", 9600, Parity.None, 8, StopBits.One);

        port.Open();
        if (port.IsOpen) { Console.WriteLine("port is now open"); } else { Console.WriteLine("port not opened correctly"); }

        port.Write("T"); //triggers the camera

        port.Read(buffer1, 0, 200);

        for (int i = 0; i < 200; i++)
        {
            Console.WriteLine(buffer1[i]);
        }
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:49:14.190

我之前从串行端口读取而不是读取预期的所有内容时遇到过问题。

原来我正在阅读设备的响应，但尚未完成写入。我认为串行端口对象会继续尝试填充缓冲区，直到达到读取超时，而事实并非如此。

在我的场景中，我知道我将从串行端口读取多少个字符。因此，如果您知道可以在读取时实现重复，直到您的字符缓冲区已满。如果您从 SerialPort.BaseStream 读取数据，我不知道是否同样适用。

```
SerialPort serialPort; 

char[] buffer = new char[expectedLength];
int totalBytesRead = 0;

//continue to read until all of the expected characters have been read
while (totalBytesRead < expectedLength)
{
    totalBytesRead += serialPort.Read(buffer, totalBytesRead, expectedLength - totalBytesRead); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:58:36.703

这是我使用的代码（简化）：

```
public class Scanner : SerialPort
{
    private string _word;
    private int _globalCounter;
    private readonly char[] _rxArray = new char[2047];

    public Scanner()
    {
        DataReceived += MyDataReceivedEventHandler;
    }

    public event EventHandler<CodeScannedEventArgs> CodeScanned;
    private void MyDataReceivedEventHandler(object sender, SerialDataReceivedEventArgs e)
    {
        do
        {
            var rxByte = (byte)ReadByte();

            // end of word
            if (rxByte == 10)
            {
                // first byte (02) and last two bytes (13 and 10) are ignored
                _word = new string(_rxArray, 1, _globalCounter - 2);

                DisplayData(_word);

                _globalCounter = 0;
            }
            else
            {
                _rxArray[_globalCounter] = (char)rxByte;
                _globalCounter++;
            }
        } while (BytesToRead > 0);
    }

    private void DisplayData(string receivedText)
    {
        OnCodeScanned(new CodeScannedEventArgs(receivedText));
    }

    protected void OnCodeScanned(CodeScannedEventArgs e)
    {
        EventHandler<CodeScannedEventArgs> handler = CodeScanned;

        if (handler != null)
        {
            handler(this, e);
        }
    }
} 
```

我使用的扫描仪将字节 02 作为前缀，字节 13 和 10 作为后缀添加到它扫描的所有内容中，因此我很容易将其分解为单词。您显然需要稍微更改实现以使其适合您。

编辑 - CodeScannedEventArgs 类：

```
public class CodeScannedEventArgs : EventArgs
{
    public CodeScannedEventArgs(string scannedCode)
    {
        ScannedCode = scannedCode;
    }

    public string ScannedCode { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:56:54.860

我使用了 port.ReadTo("\r") 并且它可以工作，因为输出以回车结束。

但我想知道使用数据接收事件有什么好处？

# android - Android 上的 AdWhirl - 口粮权重总和为 0 - 不显示广告

> ID：11690970
> 
> 赞同：0
> 
> 时间：2012-07-27T15:29:05.123
> 
> 标签：android, admob, adwhirl

我无法让 Adwhirl 工作。在尝试了官方文档一个小时后，我尝试了通过 XML 的简约路线：

```
 <com.adwhirl.AdWhirlLayout
     android:id="@+id/addwhirlview"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" /> 
```

这段代码与我原来的 AdMob 代码 ( com.google.ads.AdView ) 在同一个地方，运行良好。

我从 LogCat 获得关于 AdWhirl 的以下信息：

```
I/AdWhirl SDK(18641): Creating adWhirlManager...
D/AdWhirl SDK(18641): Locale is: en_US
D/AdWhirl SDK(18641): Hashed device ID is: 7d1dd13a2fa91c0ad174cb69a11549a3
I/AdWhirl SDK(18641): Finished creating adWhirlManager
D/AdWhirl SDK(18641): Prefs{427dbf543f7849e6bd9e8c425a2a52a6}: {"config": "{"extra":{"location_on":1,"background_color_rgb":{"red":0,"green":0,"blue":0,"alpha":1},"text_color_rgb":{"red":255,"green":255,"blue":255,"alpha":1},"cycle_time":30,"transition":8},"rations":[]}
D/AdWhirl SDK(18641): ", "timestamp": 1343402294184}
I/AdWhirl SDK(18641): Using stored config data
D/AdWhirl SDK(18641): Received jsonString: {"extra":{"location_on":1,"background_color_rgb":{"red":0,"green":0,"blue":0,"alpha":1},"text_color_rgb":{"red":255,"green":255,"blue":255,"alpha":1},"cycle_time":30,"transition":8},"rations":[]}
I/AdWhirl SDK(18641): Sum of ration weights is 0 - no ads to be shown 
```

我用谷歌搜索了这个问题，女巫把我带到了这个问题：[Android 上的空 AdWhirl 布局（没有显示广告）](https://stackoverflow.com/questions/5964869/empty-adwhirl-layout-on-android-no-ads-shown) .. 这个人基本上和我的经历一样，说他想通了，但从来没有发布过..

我在清单中得到了我的 AdWhirl 密钥，我将 Admob 设置为我唯一的广告网络，并将应用程序添加到应用程序列表中，等等，所以我相当确定那一边是正确的.. 我做错了什么，什么“口粮权重之和为0”甚至意味着什么？

提前致谢！托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:59:22.287

在 AdWhirl 中，[Ration](http://code.google.com/p/adwhirl/source/browse/src/com/adwhirl/obj/Ration.java?repo=sdk-android)表示有关您已配置的广告网络的信息。广告网络具有名称和网络 ID（AdWhirl 设置这些），以及百分比值和您为该网络指定的任何键（在 AdMob 的情况下，仅使用一个键 - 发布商 ID）。

然后 AdWhirl 提取您的配置，并为您配置的每个网络添加配给权重（百分比）。在您的情况下，百分比加起来为 0。

为什么会这样？您的 JSON 字符串包含`"rations":[]`，这意味着 AdWhirl 提取的配置没有配置任何广告网络。你会注意到日志也说`Using stored config data`，这意味着它缓存了之前拉取的配置。您可能最近更新了配置，但 AdWhirl 仍在缓存旧配置。

您可以在网络浏览器（插入您自己的 SDK KEY）中检查[http://mob.adwhirl.com/getInfo.php?appver=3.2.0&appid=REPLACE_WITH_YOUR_APP_ID](http://mob.adwhirl.com/getInfo.php?appver=3.2.0&appid=REPLACE_WITH_YOUR_APP_ID)以查看 AdWhirl 后端是否提供新配置。如果您正确配置了 AdMob，您应该会在 rations 数组中看到一个条目。

一旦您确认 AdWhirl 后端正在提供正确的配置，您就可以降低 AdWhirl 缓存的积极性。你可以这样做：

```
AdWhirlManager.setConfigExpireTimeout(1000 * 10); 
```

这将使 AdWhirl 仅每 10 秒缓存一次配置，这意味着它基本上会在每次刷新时提取一个新配置。然后，AdMob 应该会出现在下一次配置拉取中，并且一切都应该从那里开始。

请注意，通常最好将配置缓存更长的时间，这样您的应用就不必每次刷新都拉取配置。在正常情况下，您可以考虑缓存大约 30 分钟：

```
AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 30); 
```

# css - Chrome 中的无序列表和 ::selection 格式存在问题

> ID：11690972
> 
> 赞同：0
> 
> 时间：2012-07-27T15:29:08.650
> 
> 标签：css, google-chrome

我正在使用以下 CSS 来修改突出显示文本的颜色：

```
*::selection {
    background: #000;
    color: #fff;
}
*::-moz-selection {
    background: #000;
    color: #fff;
}​ 
```

在 Chrome 中，当您突出显示无序列表时，项目符号具有默认颜色 ![例子](../Images/995b26c79103e2f22e5386e53e3adee9.png)

示例：[这里](http://jsfiddle.net/tarLL/ "这里的例子")

这是一个错误还是你可以使用 CSS 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:43:15.107

它看起来不会`::selection`进入规范，所以没有太多关注这种行为是有道理的。

[http://www.w3.org/TR/css3-selectors/](http://www.w3.org/TR/css3-selectors/)

> 7.3\. 空白的
> 
> 本节特意留空。（本节之前定义了一个 ::selection 伪元素。）

# c++ - 在 C++ 中找不到枚举头文件

> ID：11690977
> 
> 赞同：1
> 
> 时间：2012-07-27T15:29:25.637
> 
> 标签：c++, enums, header

我有一个文件`playback_type.h`，其中只有以下代码：

```
#include <iostream>

enum playback_type {
    NOTE_PB, SONG_PB
}; 
```

Xcode 让我可以很好地包含文件，它甚至可以自动完成文件名，但是当我尝试构建它时，我遇到了各种各样的错误。

```
#include <playback_type.h> // Error: `playback_type.h` file not found

class PlaybackHelper{

private:

    // Singleton methods
    PlaybackHelper();
    PlaybackHelper(PlaybackHelper const&);
    void operator=(PlaybackHelper const&);

    playback_type type; // Error: 'playback_type' does not name a type

public:

    void setPlaybackType(playback_type aType); // Error: 'playback_type' has not been defined

    //singletong method
    static PlaybackHelper &getInstance();

} 
```

任何想法为什么我会得到这些错误？该`.h`文件包含正确，xcode 帮助我自动完成它，所以它应该在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:34:18.323

尖括号 ( `<>`) 用于表示系统头文件，引号 ( `""`) 用于表示本地头文件。通常，预处理器会在您的项目目录中查找本地头文件，但不会在那里查找系统头文件，除非您明确告诉它这样做。因此，您应该为自己的标题使用引号：

```
#include "playback_type.h" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:30:18.427

只需替换为`#include "playback_type.h"`

# emacs - 为什么我不能在 Emacs 24.1 下使用旧的主题样式文件？

> ID：11690980
> 
> 赞同：5
> 
> 时间：2012-07-27T15:29:31.157
> 
> 标签：emacs

我可以在 23.1、23.4 下使用我的样式文件，但是在我将 Emacs 更新到 24.1 后，我无法使用旧的样式文件。例如，我的样式文件之一是[color-theme-arjen.el](https://github.com/credmp/color-theme-arjen/blob/master/color-theme-arjen.el)。链接在这里：

[https://github.com/credmp/color-theme-arjen/blob/master/color-theme-arjen.el](https://github.com/credmp/color-theme-arjen/blob/master/color-theme-arjen.el)

在我的 elisp 文件中，我使用以下代码加载颜色主题：

（加载文件“~/emacs/site-lisp/color-theme/master_color-theme-arjen.el”）（color-theme-arjen）

我不知道为什么颜色主题在 Emacs 23.1 和 23.4 下有效，但在 Emacs 24.1 下无效。

在 Emacs 加载文件时，Emacs 给出以下错误：

Symbol的函数定义为void：plist-to-alist

如果我取消注释上面的代码并且不加载样式文件，则会消除错误。

有谁知道为什么会这样？或者我该如何调试它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-06T14:59:51.227

是的，我也发现了这个错误。Emacs 24 似乎没有“plist-to-alist”功能。所以可能你应该自己写。这是我的。把这个函数放在你的 dot-emacs 文件中就可以了。

```
(defun plist-to-alist (the-plist)
  (defun get-tuple-from-plist (the-plist)
    (when the-plist
      (cons (car the-plist) (cadr the-plist))))

  (let ((alist '()))
    (while the-plist
      (add-to-list 'alist (get-tuple-from-plist the-plist))
      (setq the-plist (cddr the-plist)))
  alist)) 
```

希望能帮助到你 ： ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:06:13.903

颜色主题的东西在 24 年进行了重大改进，emacs 中包含了一个颜色主题包（请参阅 参考资料`M-x customize-themes`），据我所知，旧主题的破坏是预期的。

[据报道，橘子酱](http://marmalade-repo.org/)的颜色主题包也有效。

您可能应该为 color-theme-arjen 打开一个错误报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T12:32:49.607

我不知道为什么，但是在 MacOS X 上的 emacs 24.3.1 中安装 solarized 主题时，我发现如果我把我的 init 行：

```
(load-file "~/lisp/color-theme/color-theme.el")
(load-file "~/lisp/emacs-colors-solarized/color-theme-solarized.el")
(color-theme-solarized 'dark) 
```

在我关闭滚动条后：

```
(if (featurep 'scroll-bar)
    (scroll-bar-mode -1)) 
```

它工作得很好。反过来，我得到上面的错误。我不知道为什么 color-theme-alist 函数会受到缺少滚动条的影响（plist-to-alist 函数调用似乎仅适用于 XEmacs）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T11:33:40.200

我非常感谢 wenjun.yan。但我宁愿在定义函数之前检查函数是否存在：

```
(unless (fboundp 'plist-to-alist) 
(defun plist-to-alist (the-plist)
  (defun get-tuple-from-plist (the-plist)
    (when the-plist
      (cons (car the-plist) (cadr the-plist))))
  (let ((alist '()))
    (while the-plist
      (add-to-list 'alist (get-tuple-from-plist the-plist))
      (setq the-plist (cddr the-plist)))
  alist))) 
```

# c# - 进度条无法正常工作

> ID：11690983
> 
> 赞同：2
> 
> 时间：2012-07-27T15:29:38.430
> 
> 标签：c#

我只是尝试使用 webclient 为进度条编写代码请参阅我的代码。

```
 private void button2_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == "")
        {
            MessageBox.Show("Invalid Php Url");
        }
        else if (Uri.IsWellFormedUriString(textBox1.Text, UriKind.Absolute) == false)
        {
            MessageBox.Show("Invalid Php Url");
        }
        else
        {

            backgroundWorker1.RunWorkerAsync();

        }
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        WebClient client = new WebClient();
        client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(DownloadProgressCallback);
        client.DownloadFileCompleted += new AsyncCompletedEventHandler(DownloadFileCallBack2);
        client.DownloadFile(textBox1.Text, @"D:\test\test.zip");

    }

    void DownloadProgressCallback(object sender, DownloadProgressChangedEventArgs e)
    {
        this.progressBar1.Value = e.ProgressPercentage;
        this.label6.Text = e.ProgressPercentage.ToString();
    }

    void DownloadFileCallBack2(object sender, AsyncCompletedEventArgs c)
    {
        MessageBox.Show("Download Completed");
    } 
```

但是事件不调用为什么？这是因为后台工作人员还是任何其他问题？

请帮我。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:39:10.900

我认为这是因为更新的进度是在后台线程而不是 UI 线程上调用的。尝试将 webclient 传递给 DoWork 线程：

```
WebClient client = new WebClient(); 
client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(DownloadProgressCallback); 
client.DownloadFileCompleted += new AsyncCompletedEventHandler(DownloadFileCallBack2);
backgroundWorker1.RunWorkerAsync(client); 

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)   
{   
    WebClient client = (WebClient)e.Argument;   
    client.DownloadFile(textBox1.Text, @"D:\test\test.zip");   

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T07:48:38.470

您的进度条必须满足以下条件：

-准确 -响应和流畅 -精确 -适当

# grails - 如何在grails webflow中创建链接而不在url中执行状态？

> ID：11690987
> 
> 赞同：1
> 
> 时间：2012-07-27T15:29:48.607
> 
> 标签：grails, spring-webflow, gsp

我想在我的 webflow 中显示来自我的域对象的图像。

域对象有一个包含图像的 byte[] 数组。我的控制器中的“图像”方法将图像传送到浏览器。这工作正常。

在我的网络流中，我正在这样做：

```
<img src="${createLink(controller:'shop', action:'image', id:shopInstance.id)}"> 
```

我可以在我的前端（在浏览器中）看到图像，但是每次我单击“下一步”或更改 webflow 中的状态时它都会重新加载，因为图像 url 包含一个更改 webflow 中每个事件的参数。

创建的图像 url（上面的示例）如下所示：

```
http://localhost:8080/project/shop/image/2?execution=e2s5 
```

我不希望将执行参数传递到我的图像 url 中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T18:53:02.090

我的猜测是这是一个错误。我使用的解决方法如下

```
${createLink(controller: 'controller', action: 'action').replaceAll(/\?.*$/, "")} 
```

这将使用正则表达式来删除执行参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:08:13.100

不确定为什么要获得该执行参数，但您可以尝试：`<img src="${resource(dir: 'shop/image', file: shopInstance.id)}">`并确保 UrlMappings.groovy 文件具有“ship/image”到正确控制器的映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:53:50.520

从 Grails 2.0.4 开始，查看 ApplicationTagLib.groovy，可以看到

```
if (request['flowExecutionKey']) {
    params."execution" = request['flowExecutionKey']
    urlAttrs.params = params
    if (attrs.controller == null && attrs.action == null && attrs.url == null && attrs.uri == null) {
        urlAttrs[LinkGenerator.ATTRIBUTE_ACTION] = GrailsWebRequest.lookup().actionName
    }
} 
```

因此，Grails 强制在 webflow 中呈现的每个链接都包含该执行参数。对我来说它看起来像错误。

# java - 如何从 Java ArrayList 中获取元素

> ID：11690988
> 
> 赞同：3
> 
> 时间：2012-07-27T15:30:03.700
> 
> 标签：java

我有一个基本问题。我有这个 ArrayList：

```
@Named("AccountProfileController")
@ViewScoped
public class AccountProfile implements Serializable
{

    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    private int id;

    // Constructor
    public AccountProfile()
    {
        // get the ID value 
        try
        {
            this.id = Integer.parseInt((String) FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id"));
        }
        catch (Exception e)
        {
            this.id = 0;
        }
    }
    // Create List to store user data
    public ArrayList<userdata> dataList = new ArrayList<>();

    public class userdata
    {

        int userid;
        int groupid;
        String specialnumber;
        String username;
        String passwd;
        Date datetochangepasswd;
        String address;
        String stateregion;
        String country;
        String userstatus;
        String telephone;
        Date dateuseradded;
        Date userexpiredate;
        Date dateuserlocked;
        String city;
        String email;
        String description;

        public userdata(int userid, int groupid, String specialnumber, String username, String passwd, Date datetochangepasswd,
                String address, String stateregion, String country, String userstatus, String telephone, Date dateuseradded,
                Date userexpiredate, Date dateuserlocked, String city, String email, String description)
        {

            this.userid = userid;
            this.groupid = groupid;
            this.specialnumber = specialnumber;
            this.username = username;
            this.passwd = passwd;
            this.datetochangepasswd = datetochangepasswd;
            this.address = address;
            this.stateregion = stateregion;
            this.country = country;
            this.userstatus = userstatus;
            this.telephone = telephone;
            this.dateuseradded = dateuseradded;
            this.userexpiredate = userexpiredate;
            this.dateuserlocked = dateuserlocked;
            this.city = city;
            this.email = email;
            this.description = description;
        }

        public String getAddress()
        {
            return address;
        }

        public void setAddress(String address)
        {
            this.address = address;
        }

        public String getCity()
        {
            return city;
        }

        public void setCity(String city)
        {
            this.city = city;
        }

        public String getCountry()
        {
            return country;
        }

        public void setCountry(String country)
        {
            this.country = country;
        }

        public Date getDatetochangepasswd()
        {
            return datetochangepasswd;
        }

        public void setDatetochangepasswd(Date datetochangepasswd)
        {
            this.datetochangepasswd = datetochangepasswd;
        }

        public Date getDateuseradded()
        {
            return dateuseradded;
        }

        public void setDateuseradded(Date dateuseradded)
        {
            this.dateuseradded = dateuseradded;
        }

        public Date getDateuserlocked()
        {
            return dateuserlocked;
        }

        public void setDateuserlocked(Date dateuserlocked)
        {
            this.dateuserlocked = dateuserlocked;
        }

        public String getDescription()
        {
            return description;
        }

        public void setDescription(String description)
        {
            this.description = description;
        }

        public String getEmail()
        {
            return email;
        }

        public void setEmail(String email)
        {
            this.email = email;
        }

        public int getGroupid()
        {
            return groupid;
        }

        public void setGroupid(int groupid)
        {
            this.groupid = groupid;
        }

        public String getPasswd()
        {
            return passwd;
        }

        public void setPasswd(String passwd)
        {
            this.passwd = passwd;
        }

        public String getSpecialnumber()
        {
            return specialnumber;
        }

        public void setSpecialnumber(String specialnumber)
        {
            this.specialnumber = specialnumber;
        }

        public String getStateregion()
        {
            return stateregion;
        }

        public void setStateregion(String stateregion)
        {
            this.stateregion = stateregion;
        }

        public String getTelephone()
        {
            return telephone;
        }

        public void setTelephone(String telephone)
        {
            this.telephone = telephone;
        }

        public Date getUserexpiredate()
        {
            return userexpiredate;
        }

        public void setUserexpiredate(Date userexpiredate)
        {
            this.userexpiredate = userexpiredate;
        }

        public int getUserid()
        {
            return userid;
        }

        public void setUserid(int userid)
        {
            this.userid = userid;
        }

        public String getUsername()
        {
            return username;
        }

        public void setUsername(String username)
        {
            this.username = username;
        }

        public String getUserstatus()
        {
            return userstatus;
        }

        public void setUserstatus(String userstatus)
        {
            this.userstatus = userstatus;
        }
    }

    // Getter for the data list
    public ArrayList<userdata> getuserdata()
    {

        return dataList;
    }

    @PostConstruct
    public void initData() throws SQLException
    {
        //     settingsMap = new HashMap<String, String>();

        if (ds == null)
        {
            throw new SQLException("Can't get data source");
        }
        // Initialize a connection to Oracle
        Connection conn = ds.getConnection();

        if (conn == null)
        {
            throw new SQLException("Can't get database connection");
        }
        // With SQL statement get all settings and values
        PreparedStatement ps = conn.prepareStatement("SELECT * from USERS where USERID = ?");
        ps.setInt(1, id);
        try
        {
            //get data from database        
            ResultSet result = ps.executeQuery();
            while (result.next())
            {
                // Put the the data from Oracle into Array List

                dataList.add(new userdata(result.getInt("USERID"),
                        result.getInt("GROUPID"),
                        result.getString("SPECIALNUMBER"),
                        result.getString("USERNAME"),
                        result.getString("PASSWD"),
                        toDate(result.getString("DATETOCHANGEPASSWD")),
                        result.getString("ADDRESS"),
                        result.getString("STATEREGION"),
                        result.getString("COUNTRY"),
                        result.getString("USERSTATUS"),
                        result.getString("TELEPHONE"),
                        toDate(result.getString("DATEUSERADDED")),
                        toDate(result.getString("USEREXPIREDATE")),
                        toDate(result.getString("DATEUSERLOCKED")),
                        result.getString("CITY"),
                        result.getString("EMAIL"),
                        result.getString("DESCRIPTION")));

            }
        }
        finally
        {
            ps.close();
            conn.close();
        }
    }
    // Call Crypto library for password convert into SHA hash
    @Inject
    @OSGiService(dynamic = true, waitTimeout = 5)
    transient CryptoSHA SHA;

    // Convert Password String into SHA hash
    public String passwdConvert(String password) throws NoSuchAlgorithmException
    {
        return SHA.ShaEncryptHash(password);
    }

    // Insert the data into Oracle
    public void saveData() throws SQLException, java.text.ParseException, NoSuchAlgorithmException
    {

        String SqlStatement = null;

        if (ds == null)
        {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null)
        {
            throw new SQLException();
        }

        PreparedStatement ps = null;

        try
        {
            conn.setAutoCommit(false);
            boolean committed = false;
            try
            {           /*
                 * insert into Oracle the default system(Linux) time
                 */

                SqlStatement = "UPDATE USERS "
                        + "SET "
                        + "USERID = ?, "
                        + "GROUPID = ?, "
                        + "SPECIALNUMBER = ?, "
                        + "USERNAME = ?, "
                        + "PASSWD = ?, "
                        + "DATETOCHANGEPASSWD = ?, "
                        + "ADDRESS = ?, "
                        + "STATEREGION = ?, "
                        + "COUNTRY = ?, "
                        + "USERSTATUS = ?, "
                        + "TELEPHONE = ?, "
                        + "DATEUSERADDED = ?, "
                        + "USEREXPIREDATE = ?, "
                        + "DATEUSERLOCKED = ?, "
                        + "CITY = ?, "
                        + "EMAIL = ?, "
                        + "DESCRIPTION = ? "
                        + "WHERE USERID = " + id;

                ps = conn.prepareStatement(SqlStatement);

                ps.setInt(1, dataList.get(userid));
                ps.setInt(2, dataList.get(groupid));
                ps.setString(3, dataList.get(specialnumber));
                ps.setString(4, dataList.get(username));
                ps.setString(5, passwdConvert(dataList.get(passwd)));
                ps.setDate(6, toDate(dataList.get(datetochangepasswd)));
                ps.setString(7, dataList.get(address));
                ps.setString(8, dataList.get(stateregion));
                ps.setString(9, dataList.get(country));
                ps.setString(10, dataList.get(userstatus));
                ps.setString(11, dataList.get(telephone));
                ps.setDate(12, toDate(dataList.get(dateuseradded)));
                ps.setDate(13, toDate(dataList.get(userexpiredate)));
                ps.setDate(14, toDate(dataList.get(dateuserlocked)));
                ps.setString(15, dataList.get(city));
                ps.setString(16, dataList.get(email));
                ps.setString(17, dataList.get(description));

                ps.executeUpdate();

                conn.commit();
                committed = true;
            }
            finally
            {
                if (!committed)
                {
                    conn.rollback();
                }
            }
        }
        finally
        {
            /*
             * Release the resources
             */
            ps.close();
            conn.close();
        }

    }
    //!!!! http://stackoverflow.com/questions/11135675/unparseable-date-30-jun-12
    // Convert the Date format

    public Date toDate(String s)
    {
        Date d = null;
        if (s == null || s.trim().isEmpty())
        {
            return d;
        }

        try
        {
            d = Date.valueOf(s);
        }
        catch (Exception x)
        {
            x.printStackTrace();
        }

        return d;
    }
} 
```

我尝试使用此 Java 代码获取元素：

```
ps.setInt(1, dataList.get(userid));
ps.setInt(2, dataList.get(groupid));
ps.setString(3, dataList.get(specialnumber));
ps.setString(4, dataList.get(username));
ps.setString(5, passwdConvert(dataList.get(passwd)));
ps.setDate(6, toDate(dataList.get(datetochangepasswd)));
ps.setString(7, dataList.get(address));
ps.setString(8, dataList.get(stateregion));
ps.setString(9, dataList.get(country));
ps.setString(10, dataList.get(userstatus));
ps.setString(11, dataList.get(telephone));
ps.setDate(12, toDate(dataList.get(dateuseradded)));
ps.setDate(13, toDate(dataList.get(userexpiredate)));
ps.setDate(14, toDate(dataList.get(dateuserlocked)));
ps.setString(15, dataList.get(city));
ps.setString(16, dataList.get(email));
ps.setString(17, dataList.get(description)); 
```

但我在 Netbeans 中遇到错误。你能告诉我从 ArrayList 中获取元素的正确方法是什么吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T15:32:52.157

**使用`for-each loop this is optimize way...`**

```
for(userdata obj : dataList){

   System.out.println("User ID :: " + obj.userid);
   System.out.println("Group ID :: " + obj.groupid);
   .
   .
   .

} 
```

**使用 for 循环**

```
for(int i =0;i<datalist.size();i++){

       userdate obj=datalist.get(i);
       System.out.println("User ID :: " + obj.userid);
       System.out.println("Group ID :: " + obj.groupid);
       .
       .
       .

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T15:34:42.020

```
ArrayList<userdata> dataList = new ArrayList<>();
dataList.add(new userdata(...)); // The ... is for all your params
userdata data = dataList.get(0); // This gets the first element of the list, the one we just added
System.out.println(data.getCity()); // This will print the String called city 
```

附带说明，userdata 应该是 UserData，这是一个 Java 约定，您定义的任何类的第一个字母都使用大写。

编辑：

我知道您现在要做什么，您将希望将插入更改为更像以下内容：

```
for (userdata data : dataList) {
    ps.setInt(1, data.getUserid());
    ps.setInt(2, data.getGroupid());
    ...
} 
```

此外，您还需要为新项目执行插入，并为旧项目执行更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T15:35:48.377

```
ps.setInt(1, dataList.get(i).getUserId()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T15:36:25.933

您的对象 dataList 包含类型为 userData 的对象（顺便说一下，应该是 UserData）。

当您调用`dataList.get(something)`时，该值应该是一个整数值，并且该`get`方法会在该位置检索对象。

如果想用列表中的第一个对象填充 PreparedStatement，你会做的是：

```
UserData user = dataList.get(0);
ps.setInt(1, user.getUserId())
... 
```

如果您想为每个用户做同样的事情：

```
for(userdata obj : dataList){

    ps.setInt(1, obj.userid);
    ...

    //do something with PS for this object.
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T15:38:05.167

试试这个

```
for(userdata datum : dataList)
{ //for each userdata instance in dataList collection
            ps.setInt(1, datum.userid); //ps.setInt(1, datum.getUserid());
            ps.setInt(2, datum.groupid);
            ps.setString(3, datum.specialnumber);
            //... you get the idea
} 
```

基本上，您需要使用 dataList.get(index) 从列表中获取您的用户数据项，然后从用户数据的实例中提取您的字段。

有点像这样

```
for(int i = 0; i < dataList.size(); i++)
{
            ps.setInt(1, dataList.get(i).getUserid()); //ps.setInt(1, datum.getUserid());
            ps.setInt(2, dataList.get(i).getGroupId());
            ps.setString(3, dataList.get(i).specialnumber);
            //... you get the idea
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-27T15:50:46.253

如果您尝试更新列表中的每个项目，则需要遍历每个项目并单独执行它们。

```
 public void saveData() throws SQLException, java.text.ParseException, NoSuchAlgorithmException {
    String SqlStatement = null;
    if (ds == null) {
        throw new SQLException();
    }

    Connection conn = ds.getConnection();
    if (conn == null) {
        throw new SQLException();
    }

    PreparedStatement ps = null;
    try {
        conn.setAutoCommit(false);
        boolean committed = false;
            //removed the userid as that is used in the where to determine what record to update
            //so it will be the same
            SqlStatement = "UPDATE USERS "
                    + "SET "
                    + "GROUPID = ?, "
                    + "SPECIALNUMBER = ?, "
                    + "USERNAME = ?, "
                    + "PASSWD = ?, "
                    + "DATETOCHANGEPASSWD = ?, "
                    + "ADDRESS = ?, "
                    + "STATEREGION = ?, "
                    + "COUNTRY = ?, "
                    + "USERSTATUS = ?, "
                    + "TELEPHONE = ?, "
                    + "DATEUSERADDED = ?, "
                    + "USEREXPIREDATE = ?, "
                    + "DATEUSERLOCKED = ?, "
                    + "CITY = ?, "
                    + "EMAIL = ?, "
                    + "DESCRIPTION = ? "
                    + "WHERE USERID = " + ?; //also changed this to be a parameter

            ps = conn.prepareStatement(SqlStatement);

            for (userdata data: datalist) {
              ps.setInt(1, dataList.getGroupid());
              ps.setString(2, dataList.getSpecialnumber());
              ...
              //continue setting the others variables
              //the last on will be the userid in the where clause
              ps.setInt(17, dataList.getUserId());
              //execute the update
              ps.executeUpdate();
            }
            //now we commit since they have all ran. We want an all or nothing update
            //meaning if one fails, nothing is updated
            conn.commit();
            committed = true;

    }
    finally
    { 
        if (!committed){
          conn.rollback();
        }
        ps.close();
        conn.close();
    }

} 
```

我还合并了 finally 块，因为在这种情况下没有理由有两个。