# StackOverflow 问答 11537000-11537999

# php - 如何在 MySQL 和 PHP 中存储和使用 OAuth 令牌？

> ID：11537000
> 
> 赞同：-3
> 
> 时间：2012-07-18T08:15:08.547
> 
> 标签：php, mysql, twitter, oauth

我正在使用亚伯拉罕的 twitteroauth 库。我一直在尝试将注册我的 Twitter 应用程序的 Twitter 帐户中的 oauth 令牌存储在数据库中，并在 PHP 中检索它们，以便我可以在所有帐户上发布一些内容。帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:18:10.620

你有一个`$_SESSION['access_token'];`. 如果您想处理多个帐户，则需要为每个帐户保留（并使用）访问令牌。

# java - 如何在 GWT 中取消转义字符串

> ID：11537003
> 
> 赞同：4
> 
> 时间：2012-07-18T08:15:21.183
> 
> 标签：java, gwt

我使用了 SafeHtmlUtils.htmlEscape(text) 并且我想使用相反的功能。你能告诉我gwt中是否有像unescapeHtml（）这样的功能

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T22:07:18.013

如果（并且请仅当）您可以信任文本不包含恶意内容，您可以使用

```
import com.google.gwt.user.client.ui.HTML;

String unescaped = new HTML(text).getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:25:28.143

如果没有做任何事情来做这个技巧（比如一些 GWT 项目），你可以使用 javascript snip 在 JSNI 方法中实现它，你可以在这里找到：[[CSS/HTML/Js] Unescaping HTML in javascript](http://erlend.oftedal.no/blog/?blogid=14)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T02:26:04.743

我想要一些易于单元测试的东西，所以我实现了' *htmlUnescape()* '，它可以反转*SafeHtmlUtils.htmlEscape()*和*SafeHtmlBuilder.appendEscapedLines()*的效果。它们都存在于“共享”包中，并且在 JVM 中运行良好。

这个实用程序类可能对您有用...

```
private static class Replacer {
    private final String target;
    private final String replacement;
    private final RegExp re;

    private Replacer(String target, String replacement) {
        this.target = target;
        this.replacement = replacement;
        re = RegExp.compile(RegExp.quote(target), "g");
    }

    public String process(String s) {
        if (s.contains(target)) return re.replace(s, replacement);
        return s;
    }
} 
```

# java - 为什么选择 31 在 hashcode() 实现中做乘法？

> ID：11537005
> 
> 赞同：6
> 
> 时间：2012-07-18T08:15:34.903
> 
> 标签：java, algorithm, hashcode

> **可能重复：**
> [为什么 Java 的 String 中的 hashCode() 使用 31 作为乘数？](https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier)
> [为什么在 hashCode 中使用素数？](https://stackoverflow.com/questions/3613102/why-use-a-prime-number-in-hashcode)

来自[Effective Java](http://books.google.co.in/books/about/Effective_Java.html?id=Ft8t0S4VjmwC&redir_esc=y) **Item 9: Always override hashCode when you override equals**考虑以下相关代码片段，它覆盖了 Object 类中定义的 hashcode()。

```
public final class PhoneNumber {
  private final short areaCode;
  private final short prefix;
  private final short lineNumber;
  ......//Rest ignored on purpose
  .....

private volatile int hashCode; // (See Item 71)
@Override public int hashCode() {
   int result = hashCode;
   if (result == 0) {
    result = 17;
    result = 31 * result + areaCode;
    result = 31 * result + prefix;
    result = 31 * result + lineNumber;
    hashCode = result;
   }
 return result;
 }
} 
```

我明白为什么选择非零初始值“17”。我也理解乘法是在每个步骤中完成的，因此字段的顺序在计算中起着重要作用`hashcode()`。但我不明白选择 31 作为乘法值的原因。有人可以向我解释为什么吗？这就是布洛赫要说的关于 31 的内容，但我真的不明白。我特别无法理解下面斜体字。

> 选择值 31 是因为它是一个奇数素数。*如果它是偶数并且乘法溢出，信息将会丢失，因为乘以 2 相当于移位*。使用素数的优势不太明显，但它是传统的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T08:20:13.983

左移只是在右边引入了一个零，在数字的二进制表示的左边丢失了一点，所以这是一个明显的信息丢失。重复这个过程会逐渐丢失从早期计算中积累的所有信息。这意味着输入哈希码计算的字段越多，早期字段对最终结果的影响就越小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:26:41.123

使用素数的原因是它更有可能产生随机模式。例如，如果您使用 9，则可以以 3 的倍数越过一圈。

AFAIK`31`用于字符串，因为字母表中的字母少于 31 个，这意味着最多 6 个字母的所有单词都具有唯一的哈希码。例如，如果您使用 61（质数小于 64），最多 5 个字母会产生唯一代码，如果您使用 13（质数小于 16），您可能会与两个字母单词发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:51:17.737

我将描述一个不同数字的答案，但我怀疑推理是相似的。对字符 X 的哈希值的贡献是 X*B^k，其中 B 在您的情况下为 31，k 取决于 X 在字符串中的位置及其长度。这种算术通常以字长为模完成。出于这个原因，我们希望 B^k 对于不同的 k 值是不同的。

Now, in "Handbook of Algorithms and Data Structures" by Gonnet and Baeza-Yates section 3.3.1 "Pratical hashing functions" they say "For this function the value B=131 is recommended, as B^i has a maximum cycle mod 2^k for 8 <= k <= 64." I wonder what cycle length 31 has mod 2^32? I believe that 31 will fit into a Sparc immediate operand, but 131 will not.

# javascript - Google Map V3 移除折线覆盖

> ID：11537006
> 
> 赞同：0
> 
> 时间：2012-07-18T08:15:36.247
> 
> 标签：javascript, google-maps

我想我现在必须放弃并问，因为我的截止日期快到了。伙计们，我想在我的谷歌地图中删除我的折线。它在我的研究中说这样做很容易：

```
myInstance.setMap(null); 
```

但是，因为我有这个代码，复杂性就开始了：

```
jQuery.ajax({
        type: "POST",  
        url: url,
        async: false, 
        dataType: 'json',
        data: data,
        success: function(result){
            var size = 0, key;
            for (var i = 0; i < result.data.length; i++) {
                if(i==0){
                    var pointA = new google.maps.LatLng( result.data[i].t.latitude, result.data[i].t.longtitude );
                    Polyline.push(pointA);
                }
                if(i == 1){
                    pointA = pointA;
                    var pointB = new google.maps.LatLng( result.data[i].t.latitude, result.data[i].t.longtitude );
                    var color = result.data[i].t.color;
                    Polyline.push(pointB);
                    LinePath = new google.maps.Polyline({
                        path:Polyline,                                                                                                                              
                        strokeColor:color,
                        strokeOpacity:1.0,
                        strokeWeight:5
                        });
                    polyLinePath.push(LinePath); 
                    LinePath.setMap(map);
                }
                if(i>1){
                    pointA = pointB;
                    Polyline = [];
                    Polyline.push(pointA);
                    var pointB = new google.maps.LatLng( result.data[i].t.latitude, result.data[i].t.longtitude );
                    Polyline.push(pointB);
                    var color = result.data[i].t.color;
                    LinePath = new google.maps.Polyline({
                        path:Polyline,                                                                                                                              
                        strokeColor:color,
                        strokeOpacity:1.0,
                        strokeWeight:5
                        }); 
                    LinePath.setMap(map);
                    polyLinePath.push(LinePath);
                    Polyline = [];
                    Coordinates= [];
                }
            }

}

        }

    }); 
```

LinePath 时不时地被使用，正在输入的数据会发生变化，并且不会在其中保留路径的值。所以每次我调用 clearMap();

```
function clearMap(){
  LinePath.setMap(null);
} 
```

我的地图上没有任何东西被清除。我已经阅读了相关的帖子并对其进行了研究。由于我试图实现我的目标，在我在这里发布之前我实际上有几个注释掉的代码。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:36:46.663

您似乎正在创建多个 LinePath 实例并将它们推入 polyLinePath。

尝试清除所有这些：

```
function clearMap(){
   if (polyLinePath){
       for (var i=0; i<polyLinePath.length; i++){
          polyLinePath[i].setMap(null);
       }
   }
} 
```

# foreign-keys - TYPO3 版本中同一张表上的双向 n:m 关系。4.7.2

> ID：11537007
> 
> 赞同：0
> 
> 时间：2012-07-18T08:15:46.907
> 
> 标签：foreign-keys, typo3, nm

在我们自己的扩展中，我们有一个应该与自身具有 n:m 关系的表。

我将做一个形象化的例子（我们的实际情况与此类似）：我们称表为'employee'。
现在一个员工可以附加到其他员工，例如我编辑员工 A 并将其附加到员工 B。当我打开员工 BI 想看到他对员工 A 有一个附件。

我在 tca.php 中尝试了以下配置：

```
'linked_with' => array (
  'exclude' => 0,
  'label' => 'LLL:EXT:my_ext/locallang_db.xml:my_table.linked_with',
  'config' => array(
    'type' => 'group',
    'internal_type' => 'db',
    'allowed' => 'my_table',
    'size' => 6,
     'MM' => 'my_table_linked_mm',
     'MM_opposite_field' => 'my_table'
  )
) 
```

但是，当我这样做时，它只会保存一个方向的关系，即我在员工 A 中看到它与员工 B 有关系。但是当我打开员工 BI 时，看不到与员工 A 的任何关系。

在数据库中保存了一个条目：

*   uid_local: ###员工 A### 的 UID
*   uid_foreign: ###员工B的UID###
*   排序：0
*   排序外国：1

我究竟做错了什么？我在 Google/Internet 上找不到类似的案例——我发现的只是两张不同的桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:29:33.047

好吧，考虑两个表的情况。

A-MM-B

在这种情况下，您需要表 A 的 TCA 字段通过 MM 表链接到 B（使用 uid_local 作为本地 uid）和表 B 的 TCA 字段通过 MM 表链接到 A（使用 uid_foreign 作为本地 uid )

在这种情况下，您需要相同的内容，即带有镜像配置的 linked_from 和 links_to 字段或类似字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:36:35.400

只是对其他搜索者的简短反馈：
不幸的是，迄今为止 TYPO3（版本 4.7.4）不支持此功能。
要实现此功能，您必须编写一个 userFunction。

# android - ImageButton 甚至在透明像素上检测点击

> ID：11537008
> 
> 赞同：1
> 
> 时间：2012-07-18T08:15:48.093
> 
> 标签：android, layout, imagebutton

使用 ImageButton ，我使用 android:background="@null" 和一个带有透明像素和文本的图像

问题是有时，未检测到点击。我想这与透明像素有关，因为如果我删除 android:background="@null" 我没有任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:20:12.250

您可以尝试使用：

```
android:background="#00000000" 
```

在这里，第一个 2 个零表示您的背景应该是透明的（ARGB 格式），其中 A 是 alpha（透明度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:21:45.373

对于透明背景，我使用：

```
android:background="@android:color/transparent" 
```

# javascript - 为基于 Web 的动画对 FPS 进行基准测试？

> ID：11537015
> 
> 赞同：1
> 
> 时间：2012-07-18T08:16:23.677
> 
> 标签：javascript, css, benchmarking, setinterval, requestanimationframe

我正在寻找编写一个简单的每秒帧数动画基准 Javascript 实用程序。FPS 在这里可能是一个失败的术语，但理想情况下，它可以让我更准确地比较和测量不同动画（CSS3/canvas/webgl）在浏览器和设备之间的执行情况。（所以不是只测试特定代码的东西 - 而是一个包含在页面中并且能够自己完成它的事情的 JS 库）

我正在寻找有关如何最好地处理该主题的想法。

例如，我希望 requestAnimationFrame 是我正在寻找的 - 我已经阅读了一些关于它的内容，似乎每次浏览器可以重绘/动画时都会调用它，对吗？因此，如果（在运行动画时）浏览器不经常可用（例如在空白运行中），按照相同的逻辑 - 我们已经有一些数字可以在那里进行比较。

问题当然是 requestAnimationFrame 没有得到我想要的广泛支持（尤其是在移动设备上）。可以以某种方式在那里使用 setInterval 吗？我知道它不那么可靠，但也许这可以用于我的优势 - 例如，如果我每秒调用它 1000 次，然后将其与每秒实际执行的次数进行比较 - 这已经是一种基准。

这里唯一的问题是该方法会返回任何数量的问题的测量值，而不仅仅是动画 - 例如，我可以想象浏览器跳过一个间隔，因为它在 DOM 中做某事等等。你可能会争辩说浏览器是一种单进程动物，因此 DOM 更改也会影响动画 - 但如果 CSS3 动画是 GPU 硬件加速的，那仍然如此吗？

目前只是一个理论 - 所以任何想法都非常感谢！;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:36:35.860

这看起来应该很容易适应一组适用于您的特定情况的功能（“做自己的事情”）：[https ://gist.github.com/1156092](https://gist.github.com/1156092)

# exist-db - 在 Linux 的文件系统上查找存储在 exists-db 中的 XML 文件

> ID：11537021
> 
> 赞同：3
> 
> 时间：2012-07-18T08:16:43.460
> 
> 标签：exist-db

我在 linux 中运行 eXist-db，但我无法通过 linux 命令（如 find 命令）找到在文件系统中创建的 XML 文件。如何查看这些 XML 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:32:57.103

eXist-db 不会以您所描述的方式将 XML 文档直接存储在文件系统上。它在 $EXIST_HOME/webapp/WEB-INF/data 文件夹中的数据库文件中存储和管理它们。如果您想访问 XML 文档，一种方法是通过 WebDAV 安装驱动器。请参阅 eXist[关于 WebDAV 的文档](http://exist-db.org/exist/webdav.xml)或[搜索邮件列表存档](http://exist-open.markmail.org)以讨论您的特定 WebDAV 客户端（如果文档中未涵盖）。

# git - 无法将代码推送到 github 存储库

> ID：11537025
> 
> 赞同：0
> 
> 时间：2012-07-18T08:16:51.200
> 
> 标签：git, github

我无法将更改推送到 github 存储库，并收到以下错误消息 -

```
D:\Research\scribe-java>git push git@github.com:fernandezpablo85/scribe-java.git master
The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is -----.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly
D:\Research\scribe-java>git push git@github.com:fernandezpablo85/scribe-java.git master
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

谁能帮我理解我在这里做错了什么......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:19:15.840

仅从该错误来看，您的私钥似乎无效。您是否已将您的公钥添加到 github？

另外：[Github 权限被拒绝](https://help.github.com/articles/error-permission-denied-publickey)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:26:37.677

也许您已经创建了具有超级用户权限的密钥，但现在您无法使用它，因为您是普通用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:57:53.243

首先使用创建 ssh 密钥

$ssh-keygen -t rsa

密钥在 ~/.ssh/id_rsa.pub 创建，复制该密钥并添加到 github。可能会奏效

# java - 如何在 Java 中发送带有 xml 正文和 xml 标头的 HTTP POST 请求？

> ID：11537030
> 
> 赞同：1
> 
> 时间：2012-07-18T08:17:08.233
> 
> 标签：java

如何在 Java 中发送带有 xml 正文和 xml 标头的 HTTP POST 请求？

# javascript - 如何使用 rangy 从 iframe 中抓取选定的文本？

> ID：11537032
> 
> 赞同：2
> 
> 时间：2012-07-18T08:17:16.557
> 
> 标签：javascript, rangy

这是一个[后续问题](https://stackoverflow.com/questions/11465253/how-to-wrap-selected-text-with-a-div-in-ipad)。我一直在尝试使用 rangy 从 iframe 中获取选定的文本。该代码似乎适用于非 iframe 内容。根据[rangy 的文档](http://code.google.com/p/rangy/wiki/RangySelection)，它应该可以工作。

这是演示：http: [//jsfiddle.net/codef0rmer/UuJ5G/](http://jsfiddle.net/codef0rmer/UuJ5G/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:28:22.807

您的示例中的问题是 iframe 的文档来自与主文档不同的域，这意味着在主文档中运行的脚本根本无法访问 iframe 中的文档。如果文档来自同一个域，浏览器只允许在文档之间编写脚本。

如果文档确实来自同一个域，那么您可以使用以下方法进行选择`rangy.getIframeSelection()`：

[http://jsfiddle.net/UuJ5G/42/](http://jsfiddle.net/UuJ5G/42/)

Rangy 1.3 放宽了对传递给`rangy.getSelection()`and的参数的限制`rangy.createRange()`：两者都将接受任何窗口、文档或`<iframe>`元素，因此您只需将 iframe 传递给`rangy.getSelection()`：

[http://jsfiddle.net/2d6Bk/56/](http://jsfiddle.net/2d6Bk/56/)

# c# - 检查给定数据是否位于数据表内的两个特定日期之间

> ID：11537035
> 
> 赞同：1
> 
> 时间：2012-07-18T08:17:27.120
> 
> 标签：c#, .net, database, date

我有一个`dt`包含两列`FromDate`和`ToDate`. 我有两个文本框，我在其中输入日期`blackOutFromDate`和`blackOutToDate`. 说，我的 DataTable 中有 7 行`dt`：

```
From Date       To Date      
8/21/2012   To  8/22/2012   
8/23/2012   To  8/24/2012   
8/25/2012   To  8/25/2012   
8/5/2012    To  8/6/2012    
8/26/2012   To  8/27/2012   
8/1/2012    To  8/2/2012    
8/3/2012    To  8/3/2012 
```

如果我在文本框中输入的值`CheckInDate`介于`CheckOutDate`DataTable 的任何匹配日期范围之间`dt`，它应该返回具有此类匹配的行数的计数。

我在做

```
foundRows = _blackOutTable.Select
                               (
                                   "(FromDate <='" +     
blackOutFromDate.ToShortDateString() + "' AND ToDate >= '" + 
blackOutFromDate.ToShortDateString() + "')"
                                   + "OR (FromDate <='" + 
blackOutToDate.ToShortDateString() + "' AND ToDate >='" + 
blackOutToDate.ToShortDateString() + "')"
                                   + "OR (FromDate >='" + 
blackOutFromDate.ToShortDateString() + "' AND FromDate <='" +     
blackOutToDate.ToShortDateString() + "')"
                                   + "OR (ToDate >= '" +   
blackOutFromDate.ToShortDateString() + "' AND ToDate <='" +     
blackOutToDate.ToShortDateString() + "')"
                               );
if (foundRows.Length == 0)
{
} 
```

编辑：我将在 SQl 服务器中归档的 DateFrom 和 DateTo 存储为

```
CAST(MONTH(date1) AS VARCHAR(2)) + '/' + CAST(DAY(date1) AS VARCHAR(2)) + '/' +     
CAST(YEAR(date1) AS VARCHAR(4))  [fromdate],
        CAST(MONTH(date2) AS VARCHAR(2)) + '/' + CAST(DAY(date2) AS 
VARCHAR(2)) + '/' + CAST(YEAR(date2) AS VARCHAR(4))  [todate] 
```

blackOutFromDate 和 blackOutFromDate 属于 DateTime 类型。

但它没有返回正确的值。选择表达式存在一些问题。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:23:59.867

~~这是[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)语法`for` `DateTimes`：~~

 ~~```
foundRows = _blackOutTable.Select("FromDate >= #2012-07-13#") 
```~~ 

~~因此，您需要使用`String.Format`将日期变量放入该字符串中。~~

**编辑**：由于您的日期时间已转换为 varchar 并且您无法更改它，因此您需要将它们解析回日期时间。我建议使用`Linq-To-DataSet`：

```
DataTable tblFiltered;
var invCulture=System.Globalization.CultureInfo.InvariantCulture;
var filteredRows = _blackOutTable.AsEnumerable()
    .Where(r => DateTime.Parse(r.Field<String>("FromDate"), invCulture) >= blackOutFromDate
             && DateTime.Parse(r.Field<String>("ToDate"),   invCulture) <= blackOutToDate);

if (filteredRows.Any())
{
    tblFiltered = filteredRows.CopyToDataTable();
} 
```

您可以使用`foreach`枚举所有行或使用`CopyToDataTable`从`DataTable`过滤的`DataRows`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:33:35.377

你为什么不在数据库上做这个？

```
WHERE (1=1) 
AND 
( 
    @in_ReportingDate BETWEEN Cast(Floor(Cast(ZO_RMArea_DateFrom As Float)) As DateTime) AND Cast(Floor(Cast(ZO_RMArea_DateTo As Float)) As DateTime) 
    OR ZO_RMArea_DateFrom IS NULL 
    OR ZO_RMArea_DateTo IS NULL 
) 
```

还要注意 - 你有 DateTime 值，如果你做 ToShortDateString，它将是 date.00:00:00.000，而 FromDate 可以是 date.23:59:59.995

这就是 Cast(Floor(Cast 的用途。在比较中截断时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:19:41.563

试试这个

```
int rowCount = blackOutTable.AsEnumerable()
            .Count(c => ((DateTime)c["FromDate"]) >= blackOutFromDate && ((DateTime)c["ToDate"]) <= blackOutToDate); 
```

# xslt - XSLT 选择当前以下的特定节点

> ID：11537036
> 
> 赞同：2
> 
> 时间：2012-07-18T08:17:34.607
> 
> 标签：xslt

我正在尝试为其他人解决此问题，但我自己也遇到了问题。

我有 XML：

```
<Process>
  <name>Pro1</name>
  <duration>Dur1</duration>
  <time>Time1</time>
  <name>Pro2</name>
  <duration>Dur2</duration>
  <time>Time2</time>
  <name>Pro3</name>
  <duration>Dur3</duration>
  <time>Time3</time>
  <name>Pro4</name>
  <duration>Dur4</duration>
  <time>Time4</time>
  <name>Pro5</name>
  <duration>Dur5</duration>
  <time>Time5</time>
</Process> 
```

输出：

```
<Process>
  <Process_Info>
    <name>Pro1</name>
    <duration>Dur1</duration>
    <time>Time1</time>
  </Process_Info>
  <Process_Info>
    <name>Pro2</name>
    <duration>Dur2</duration>
    <time>Time2</time>
  </Process_Info>
  <Process_Info>
    <name>Pro3</name>
    <duration>Dur3</duration>
    <time>Time3</time>
  </Process_Info>
  <Process_Info>
    <name>Pro4</name>
    <duration>Dur4</duration>
    <time>Time4</time>
  </Process_Info>
  <Process_Info>
    <name>Pro5</name>
    <duration>Dur5</duration>
    <time>Time5</time>
  </Process_Info>
</Process> 
```

使用 XSLT：

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:variable name ="varProcess" select ="Process"/>

  <xsl:template match="Process">
    <xsl:element name="Process">
      <xsl:for-each select ="name">
        <xsl:variable name ="posName" select ="position()"/>
        <xsl:element name ="Process_Info">
          <xsl:copy-of select ="."/>
          <xsl:copy-of select="$varProcess/duration[$posName]"/>
          <xsl:copy-of select="$varProcess/time[$posName]"/>
        </xsl:element>
      </xsl:for-each>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

但是，`<duration>`and`<time>`节点并不总是存在，并且`<name>`是唯一受保证的节点。因此，如果缺少一个，我的`position()`选择就会失败。

如何更改 XSLT 以使其即使在`<duration>`和/或`<time>`不存在时也能正常工作。

我的理论是您选择当前名称节点下方的两个节点，如果它们是`<duration>`或`<time>`它们被复制？但也不确定这将如何实施。

导致问题的电流输出示例。

输入：

```
<Process>
  <name>Pro1</name>
  <duration>Dur1</duration>
  <time>Time1</time>
  <name>Pro2</name>
  <duration>Dur2</duration>
  <time>Time2</time>
  <name>Pro3</name>
  <duration>Dur3</duration>
  <time>Time3</time>
  <name>Pro4</name>
  <time>Time4</time>
  <name>Pro5</name>
  <duration>Dur5</duration>
</Process> 
```

输出：

```
<Process>
  <Process_Info>
    <name>Pro1</name>
    <duration>Dur1</duration>
    <time>Time1</time>
  </Process_Info>
  <Process_Info>
    <name>Pro2</name>
    <duration>Dur2</duration>
    <time>Time2</time>
  </Process_Info>
  <Process_Info>
    <name>Pro3</name>
    <duration>Dur3</duration>
    <time>Time3</time>
  </Process_Info>
  <Process_Info>
    <name>Pro4</name>
    <duration>Dur5</duration> <!-- Should be in the below process_info -->
    <time>Time4</time>
  </Process_Info>
  <Process_Info>
    <name>Pro5</name>
  </Process_Info>
</Process> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:42:07.010

这可以解决问题，尽管方法有点“手动”。可能有更优雅的方法来实现这一点

```
<xsl:template match="Process">
    <xsl:element name="Process">
        <xsl:for-each select ="name">
            <xsl:element name ="Process_Info">
                <xsl:copy-of select ="."/>
                <xsl:variable name="firstSib" select="local-name(following-sibling::*[1])" />
                <xsl:variable name="secondSib" select="local-name(following-sibling::*[2])" />
                <xsl:choose>
                    <xsl:when test="$firstSib='duration'">
                        <xsl:copy-of select="following-sibling::*[1]"/>
                        <xsl:choose>
                            <xsl:when test="$secondSib='time'">
                                <xsl:copy-of select="following-sibling::*[2]"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <time>SomeDefaultValueForMissingTime</time>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="$firstSib='time'">
                        <duration>SomeDefaultValueForMissingDuration</duration>
                        <xsl:copy-of select="following-sibling::*[1]"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <duration>SomeDefaultValueForMissingDuration</duration>
                        <time>SomeDefaultValueForMissingTime</time>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:element>
        </xsl:for-each>
    </xsl:element>
</xsl:template> 
```

**输入 ：**

```
<Process>
    <name>Pro1</name>
    <duration>Dur1</duration>
    <time>Time1</time>
    <name>NameMissingDuration</name>
    <time>TimeMissingDuration</time>
    <name>NameMissingTime</name>
    <duration>DurMissingTime</duration>
    <name>NameMissingBoth</name>
    <name>NormalName</name>
    <duration>NormalDuration</duration>
    <time>NormalTime</time>
</Process> 
```

**输出**

```
<Process>
  <Process_Info>
    <name>Pro1</name>
    <duration>Dur1</duration>
    <time>Time1</time>
  </Process_Info>
  <Process_Info>
    <name>NameMissingDuration</name>
    <duration>SomeDefaultValueForMissingDuration</duration>
    <time>TimeMissingDuration</time>
  </Process_Info>
  <Process_Info>
    <name>NameMissingTime</name>
    <duration>DurMissingTime</duration>
    <time>SomeDefaultValueForMissingTime</time>
  </Process_Info>
  <Process_Info>
    <name>NameMissingBoth</name>
    <duration>SomeDefaultValueForMissingDuration</duration>
    <time>SomeDefaultValueForMissingTime</time>
  </Process_Info>
  <Process_Info>
    <name>NormalName</name>
    <duration>NormalDuration</duration>
    <time>NormalTime</time>
  </Process_Info>
</Process> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:26:10.067

这是没有`xsl:if`.

这演示了在选择当前名称元素之后的第一个时间（或持续时间）元素时使用该*函数**测试*节点*是否*相等[`generate-id()`](http://www.w3.org/TR/xslt/#function-generate-id "XSL 转换 (XSLT) 版本 1.0 中的函数字符串 generate-id(node-set?)")，并且其第一个前面的*名称*元素是当前元素。

 ***```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="Process">
    <xsl:copy>
      <xsl:apply-templates select="name"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="name">
    <xsl:variable name="this" select="generate-id()"/>
    <Process_Info>
      <xsl:copy-of select="."/>
      <xsl:copy-of select="following-sibling::duration
                           [generate-id(preceding-sibling::name[1]) = $this]
                           [1]"/>
      <xsl:copy-of select="following-sibling::time
                           [generate-id(preceding-sibling::name[1]) = $this]
                           [1]"/>
    </Process_Info>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:47:43.640

根据 nonnb 的响应，所有功劳归于他，最终使用了 XSLT。我的错误是没有包括我不需要填充节点的问题。

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="Process">
    <xsl:element name="Process">
      <xsl:for-each select ="name">
        <xsl:element name ="Process_Info">
          <xsl:copy-of select ="."/>
          <xsl:variable name="firstSib" select="local-name(following-sibling::*[1])" />
          <xsl:variable name="secondSib" select="local-name(following-sibling::*[2])" />
          <xsl:if test ="($firstSib='duration') or ($firstSib='time')">
            <xsl:copy-of select="following-sibling::*[1]"/>
          </xsl:if>
          <xsl:if test ="($secondSib='duration') or ($secondSib='time')">
            <xsl:copy-of select="following-sibling::*[2]"/>
          </xsl:if>
        </xsl:element>
      </xsl:for-each>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```***

# tcp - 如何确定使用哪个 scope-id

> ID：11537038
> 
> 赞同：1
> 
> 时间：2012-07-18T08:17:35.527
> 
> 标签：tcp, ipv6

在尝试连接到远程但本地服务器的 Qt 应用程序上工作。我拥有的信息是要使用的 IPv6 链接本地地址和 TCP 端口号

问题是，当使用链接本地地址时，您必须设置正确的 scope-id，即连接到与远程服务器共享的网络的接口的名称。

假设我知道服务器 IPv6 链接本地地址是端口 5000 上的 fe80::7273:cbff:fed6:e937。要连接到它，我需要使用 IP 地址：fe80::7273:cbff:fed6:e937% zh1

其中 en1 是接口名称。

如果只有一个网卡，这很容易，可以简单地始终使用该接口名称作为范围 ID。但是，当有多个时，困难就来了！

发现使用哪个接口连接到特定远程链接本地地址的最佳方法是什么？

虽然它是一个基于 Qt 的应用程序，但问题显然不仅限于 Qt。

任何建议将不胜感激。提前致谢

# r - 将 cumsum 应用于二进制向量

> ID：11537041
> 
> 赞同：1
> 
> 时间：2012-07-18T08:17:39.840
> 
> 标签：r, binary-data, cumulative-sum

我有一个简单的二进制向量`a`，我尝试`b`使用 R 函数将其转换为向量`cumsum`。但是，`cumsum`并不完全返回 vector `b`。

这是一个例子：

```
a <- c(1,0,0,0,1,1,1,1,0,0,1,0,0,0,1,1)

b <- c(1,2,2,2,3,4,5,6,7,7,8,9,9,9,10,11)

> cumsum(a)
[1] 1 1 1 1 2 3 4 5 5 5 6 6 6 6 7 8 
```

问题是，每当向量中出现 0 时`a`，前一个数字就应该增加 1，但仅限于第一个 0。其余的被赋予相同的值。

任何建议都会很棒！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:36:34.153

诀窍是用来`diff`标记转换：

```
cumsum(as.logical(a+c(0,abs(diff(a)))))
 [1]  1  2  2  2  3  4  5  6  7  7  8  9  9  9 10 11 
```

# java - java图形2d中的二值化文本和单个字符着色

> ID：11537049
> 
> 赞同：1
> 
> 时间：2012-07-18T08:18:10.783
> 
> 标签：java, text, colors, graphics2d

嘿伙计们，我在概念上对文本进行着色和二值化时遇到了麻烦。所以我使用图形 2d 绘制到缓冲图像（并使用 opengl 显示它）。我可以在写作时轻松地通过着色为每个字符着色。

我还可以使用 Otsu 的二值化方法轻松地对图像进行二值化。问题是，当我二值化时，我会丢失连接组件的位置（因为我不知道 i 上的点是否属于那个 i），因此无法着色。如果我保持我的颜色，我就无法二值化。当我旋转和倾斜我的角色（通​​过开放式 GL 映射显示）时，问题也变得更加复杂。

我也尝试过绘图和二值化，然后进行洪水填充 8 连通性，但有些字体不稳定并且损坏（因为某些字符没有真正连接）。我最新的想法是保存每个字符的缓冲图像，然后尝试将二进制图像与保存的图像匹配，但这似乎不太好。

当前生成 3d 文本图像的过程是 graphics2d 到缓冲图像-> 缓冲图像到纹理-> 纹理到 3d 对象（在 openGL 中映射）-> 读取和保存像素-> 保存图像

任何帮助或指导都会很棒！

TLDR：我需要一个程序来创建二进制化和倾斜且不受字体类型影响的文本。谢谢！

# java - 如何在 playframework 2.0 java 中加密数据？

> ID：11537050
> 
> 赞同：1
> 
> 时间：2012-07-18T08:18:13.103
> 
> 标签：java, playframework, playframework-2.0

我创建了一个模板，在将表单保存到数据库之前，我想在其中加密一些细节。所有其他详细信息都可以存储为纯文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:09:00.150

AES 加密/解密包含在 Play 2.1 版中。如果您不想使用不稳定版本的框架，您需要等待其最终发布或手动更改您的版本。查看[此灯塔的门票](https://play.lighthouseapp.com/projects/82401/tickets/574-crypto-interface-incomplete-compared-to-play-1x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:48:49.467

首先 Ebean 支持[Encryption](http://www.avaje.org/ebean/encryption.html)，所以也许这可以解决您的问题。此外，请随意使用我的[Crypto-Implementation](http://bazaar.launchpad.net/~opensource21/permsec/psec2.0.x/view/head:/psec/app/de/ppi/util/Crypto.java)，这很容易。

# javascript - 为什么 Google Analytics（分析）内容实验的结果没有显示？

> ID：11537051
> 
> 赞同：5
> 
> 时间：2012-07-18T08:18:20.443
> 
> 标签：javascript, html, google-analytics, ab-testing

首先，让我快速为您完成我的设置。我们有多个域，因此我使用跟踪代码将流量同时发送到 2 个不同的配置文件。**一个配置文件跟踪该特定域，另一个是从所有**域收集数据的多域配置文件。这就是我域中页面的跟踪代码的样子。UA-XXXXX-11 是多域账户：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-1']);
      _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_trackPageview']);
      _gaq.push(['t2._setAccount', 'UA-XXXXX-11']);
  _gaq.push(['t2._setDomainName', 'none']);
  _gaq.push(['t2._setAllowLinker', true]);
  _gaq.push(['t2._setAllowHash', false]);
  _gaq.push(['t2._trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我的问题是我想在 GA 中使用 Content Experiments 功能，但我没有得到任何数据。首先，我尝试在多域帐户中设置实验。一切都经过了完美验证，并且页面切换功能可以正常工作它还将 utm_expid 和 utm_referrer 解析为 URL，因此它似乎可以正常工作。然而，8天没有数据出现。

因此，我阅读了可能存在的问题并发现（此处：[https](https://productforums.google.com/forum/?fromgroups#!topic/analytics/9ogbbQPZFpk) ://productforums.google.com/forum/? fromgroups#!topic/analytics/9ogbbQPZFpk）人们在使用 setAllowLinker 和 setAllowHash 时遇到了同样的问题。

我从常规配置文件的跟踪代码（上面的 UA-XXXXX-1。它曾经有 SetAllowLinker 和 SetAllowHash）中删除了这些方法，并设置了一个新的内容实验。这次不是在多域配置文件中，而是在常规配置文件中。

同样，一切都得到了完美验证，页面切换正在工作，它正在将 utm_expid 和 utm_referrer 解析为 URL。

但是，我现在已经等了 20 多个小时，但在实验中仍然没有看到任何访问。它说“正在收集数据”，并说“20 小时的数据”，“0 次访问”。

这是什么原因造成的？我现在唯一的想法是多域配置文件的 t2.-methods 可能搞砸了。这似乎不太可能，因为这些方法的名称与常规配置文件调用的方法完全不同。该配置文件甚至不应该注意到那些正在用于多域配置文件，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T07:41:00.327

所以我终于找到了一些关于这个的信息。

如果您使用 setDomainName、setAllowHash false 和/或 setCookiePath，则在 Experiments 代码之前需要一些额外的代码。

**_setDomainName('example.com');** 需要**_udn="example.com";**

**_setAllowHash(false);** 需要 **_uhash="off";**

**_setCookiePath('/');** 需要 **_utcp="/";**

这应该在 Google Analytics 实验代码之前添加，如下所示：

```
<script>
_udn = "example.com";
</script>
<!-- Google Analytics Experiment code -->
... Contents of the experiment code ...
<!-- End of Google Analytics Experiment code --> 
```

希望这对其他人有帮助。

来源： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2658141](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2658141)

# ios - restoreCompletedTransactionsFailedWithError：取消时出现错误代码 0 (SKErrorUnknown)

> ID：11537053
> 
> 赞同：3
> 
> 时间：2012-07-18T08:18:29.990
> 
> 标签：ios, in-app-purchase

所以基本上，我想在由于某些网络/iTunes 特定的原因恢复已完成的交易失败时显示警报，而**不是**当用户在 Apple ID/密码提示上点击“取消”时。

在我的实施中：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error 
```

...我正在测试`error.code`（`SKErrorPaymentCancelled`也许我也应该测试`SKErrorPaymentNotAllowed`，但现在不相关）。

尽管如此，当点击“取消”时，警报仍然显示。NS-Logging 其值表明`error.code == 0`（即`SKErrorUnknown`）。

这发生在 iOS 4.3.1、Xcode 4.2、build 4C199（当然是沙盒商店）上。

我已经检查了类似的问题，但是在我的情况下所回答的不是正在发生的事情（也就是说，我已经在做的事情应该产生正确的行为）......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T01:48:10.347

检查这些。应该够了。

```
// error codes for the SKErrorDomain
enum {
    SKErrorUnknown,
    SKErrorClientInvalid,       // client is not allowed to issue the request, etc.
    SKErrorPaymentCancelled,    // user cancelled the request, etc.
    SKErrorPaymentInvalid,      // purchase identifier was invalid, etc.
    SKErrorPaymentNotAllowed    // this device is not allowed to make the payment
}; 
```

来自[https://stackoverflow.com/a/9017990/129202](https://stackoverflow.com/a/9017990/129202)。

所以我要做的是打开error.code，只在代码不是SKErrorPaymentCancelled时显示错误。用户可能知道他/她按下了取消按钮（当输入用户/通行证时）。

所以`SKErrorPaymentCancelled`应该赶上取消。如果取消按钮抛出另一个错误代码，那么那个 iOS 版本有问题吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-29T05:28:16.330

我发现在 iOS 模拟器上，取消失败并显示错误代码 0 ( `SKErrorUnknown`)。但如果你在设备上运行它，它会正确返回`SKErrorPaymentCancelled`. 这似乎也适用于 iOS 9。

# android - 通过为 x 轴和 y 轴提供字符串值来绘制 TeeChart 线图

> ID：11537058
> 
> 赞同：0
> 
> 时间：2012-07-18T08:18:46.343
> 
> 标签：android, teechart

我正在使用 TeeChartJavaAndroid_3.2012.0202 并且我无法在 X 和 Y 轴上绘制具有字符串值的线。这可能吗 ？？知道 line.add() 方法不需要 2 个字符串值！？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:20:39.390

add() 覆盖仅支持 double、int、float、DateTime 和提到的 X 和 Y 值的数组。您可以在某些覆盖上添加一个字符串作为参数，以作为点标签。然后，该字符串将用于强制轴中突出显示该点（如果轴标签样式设置为 Auto 或 Mark）。

如果您正在寻找采用 XValue、YValue、XLabel 和 YLabel 的 add() 方法的覆盖；作为 XLabel 和 YLabel 要在水平轴和垂直轴标签中表示的字符串，恐怕目前不支持。但是，您可以使用 add() 覆盖，它需要在强制轴中绘制一个字符串，并使用轴 getlabel 事件来格式化非强制轴标签。

# java - 使两个 JList 同时滚动

> ID：11537059
> 
> 赞同：2
> 
> 时间：2012-07-18T08:18:47.720
> 
> 标签：java, swing, user-interface

我目前有两个 JList 实例，一个是`priceList`，另一个是`nameList`. 当它们滚动时，我希望它们一起滚动，因为它们是并排的。目前，我唯一能找到的是使用此代码使它们在用户选择时突出显示相同的索引结果。

```
priceList.setSelectedIndex(nameList.getSelectedIndex());
priceList.ensureIndexIsVisible(nameList.getSelectedIndex()); 
```

还有其他可行的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:42:51.717

您可以尝试从滚动窗格滚动条附加 BoundRangeModel 并将其应用于其他。

```
BoundedRangeModel model = scrollPane1.getHorizontalScrollBar().getModel();
scrollPane2.getHorizontalScrollBar().setModel(model); 
```

这应该会导致两个滚动条自动相互更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:40:48.203

将两个 JList 放入一个 JPanel。

然后将 JPanel 放入 JScrollPane 中。

或者，将信息放在 JTable 中。

# android - 是否可以将多个超链接添加到图像视图的不同位置？

> ID：11537060
> 
> 赞同：-1
> 
> 时间：2012-07-18T08:18:49.387
> 
> 标签：android, android-layout, hyperlink, imageview

我有一个带有 pinchzoom 和 fling 的自定义图像视图。我与我的应用程序集成并且它可以工作。但是我需要向图像的一部分添加超链接。我有 xy 位置，我应该设置这个超链接。是[吗](http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/)可以将多个超链接添加到图像视图的不同位置。实际上它是一个杂志应用程序，所以我需要使用图像视图显示一个页面。该页面包含许多超链接。图像中的链接应该是可点击的那么是否可以动态添加到图像视图的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:23:22.393

您可以使用可点击的透明图像视图覆盖该图像。这样你就可以在任何你喜欢的地方拥有超链接。您可以通过将其颜色设置为此 #80000000 来使图像视图透明。

# tfs - 我的构建是哪个构建代理？

> ID：11537067
> 
> 赞同：0
> 
> 时间：2012-07-18T08:19:01.410
> 
> 标签：tfs, msbuild

在构建完成后，我能否确定我的多个构建代理中的哪一个为我完成了这项工作？报告没有告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:21:48.950

如果您单击报告顶部的“查看日志”，它会告诉您。

在您的日志的前几行中会有一行与此类似的行（除非您出现详细信息）。

> Run On Agent（保留的构建代理 XXXX）

# ip - FreeSwitch IP PBX 服务器

> ID：11537068
> 
> 赞同：1
> 
> 时间：2012-07-18T08:19:02.040
> 
> 标签：ip, asterisk, telephony, freeswitch

我正在做一个与 IP 电话相关的项目。我想在这个项目中使用 IP/PBX 服务器。我知道 Asterisk 并且有一些经验。但我听说 FreeSwitch 在资源消耗方面有点轻。我可以将它用作 IP/PBX 服务器还是只需要通过 Asterisk.Kindly 对它有所了解...

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:01:15.530

FreeSWITCH 几乎可以完全替代 Asterisk。Asterisk 有更广泛的硬件支持，仅仅是因为它是一个较旧的项目。但是，如果您使用 SIP 中继而没有语音硬件，那么 FreeSWITCH 是正确的选择。我会推荐它用于任何新项目。

学习它的最好方法是阅读[这本书](http://www.packtpub.com/freeswitch-1-0-6-build-robust-high-performance-telephony-systems/book)。这将花费您几天的时间，但随后您将能够自己构建一个新系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:18:16.463

我在 2600hz 工作，达伦（另一个回复中链接书的三位作者之一）是该公司的 CEO。FreeSWITCH 很棒而且非常强大。

我们在我们的全栈电信解决方案：Kazoo 中使用 FreeSWITCH 作为媒体服务器。如果您不想亲自动手，它是开源的、可分叉的，并且可以作为 SaaS 从我们这里获得。它具有您想要的所有呼叫控制功能的 API，并且可以使用您最喜欢的脚本语言集成到您想要的任何应用程序中：)。

在这里查看我们的主要网站：http: [//2600hz.com](http://2600hz.com)

在这里查看我们托管的 Kazoo：http: [//kazoo.io](http://kazoo.io)

在这里查看我们的维基：[http ://wiki.2600hz.com](http://wiki.2600hz.com)

在此处查看我们的 GitHub 存储库：[https ://github.com/2600hz/kazoo](https://github.com/2600hz/kazoo)

干杯，约书亚

免责声明：我是 2600hz 的社区经理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T04:43:01.063

是的，freeswitch 对你真的很有帮助。

只需阅读书籍，您就可以对其进行配置。

我配置了我的 freeswitch PBX/服务器，现在它工作正常。

它支持脚本语言，可帮助您实现自动化。

# objective-c - 在objective-C中以编程方式为tableView创建导航栏

> ID：11537069
> 
> 赞同：1
> 
> 时间：2012-07-18T08:19:06.050
> 
> 标签：objective-c, ios, storyboard

我想以编程方式为我的表格视图控制器类创建导航栏，你能帮帮我吗？我无法修复它！

提前致谢！我对 iOS 编程真的很陌生！

这是我的表视图控制器类的代码

```
 @implementation CheckedInOut

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

}

- (void)viewDidUnload
{
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
 return 0;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

 return cell;
}
#pragma mark - Table view delegate

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
/*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib               name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:26:26.933

您没有为表格视图控制器创建导航栏，您应该做的是创建一个导航控制器并将表格视图控制器设置为其根

```
UITableViewController *myTableViewController = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
UINavigationController *tableViewNavigationController = [[UINavigationController alloc] initWithRootViewController:myTableViewController];

//use the navigation controller here instead of how you had used the table view controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:25:24.540

这三行

```
ViewController *vc = [[ViewController alloc]init];// or UITableVC as which VC you have in your file
UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:vc];
    [self.window addSubview:navController.view]; // this is an important line if missed out dont show navController 
```

应该在后面加上

```
 [self.window makeKeyAndVisible]; 
```

在**appDelegate.m** **didFinishLaunchingWithOptions**方法中

# c++ - 有什么方法可以找到分配给映射的内存大小？

> ID：11537097
> 
> 赞同：8
> 
> 时间：2012-07-18T08:20:30.003
> 
> 标签：c++, dictionary

有什么方法可以在 c++ 中找到分配给地图的内存量/大小？有一个函数可以找到映射的大小，即映射中的条目数，但是内存有没有这样的方法。我有一张地图（字符串，字符串）。sizeof() 总是给我 48 的大小。为什么会这样？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:26:36.423

没有*简单*的方法，但如果你真的必须知道（虽然......你为什么会？），那么你可以找到。

默认情况下，所有标准库容器都使用“默认分配器”进行分配，它只不过是一个带有一对包装函数的结构/类，`new`并且`delete`（在内部，它们本身只不过是包装器，`malloc`并`free`带有一点对齐和一个在许多编译器上进行类型转换）。

如果您出于某种原因对默认分配器不满意，您可以为容器模板提供自定义分配器，它会无缝地使用该分配器。

如果您编写一个在分配/解除分配时递增/递减整数的分配器，您就会知道动态分配了多少内存。再加上`sizeof`超精确的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T08:26:26.193

不，那里没有。`.size`但是，对于支持字符串或标准容器等方法的类，您可以实现类似的功能：

```
template <class Key, class Value>
unsigned long mapSize(const std::map<Key,Value> &map){
    unsigned long size = sizeof(map);
    for(typename std::map<Key,Value>::const_iterator it = map.begin(); it != map.end(); ++it){
        size += it->first.size();
        size += it->second.size();
    }
    return size;
} 
```

如果您想知道分配的内存，您可以使用[`.capacity`](http://en.cppreference.com/w/cpp/string/basic_string/capacity)：

```
template <class Key, class Value>
unsigned long mapCapacity(const std::map<Key,Value> &map){
    unsigned long cap = sizeof(map);
    for(typename std::map<Key,Value>::const_iterator it = map.begin(); it != map.end(); ++it){
        cap += it->first.capacity();
        cap += it->second.capacity();
    }
    return cap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T09:33:52.570

map 类的大小为 48。map 的实例将在堆栈中创建，我们插入的任何记录都将存储在堆中。所以 map 对象将只是指向堆中的记录。疑惑可能是为什么插入记录后还是48。？由于记录不与地图对象一起存储，因此大小是恒定的 - 48。正如在答案中提到的，对象大小在运行时不会改变。

地图使用的总大小=

```
((sizeof(key)+sizeof(value))* map.size())+sizeof(map) 
```

map.size() 将给出地图中的记录数

48 是地图实例的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:25:04.677

一个对象在运行时不能改变它的大小。对于地图，与大多数`std`容器一样，内存是在后台动态分配的。**要查找地图占用和管理**的总大小，您可以执行以下操作：

```
std::map<X,Y> mymap;
int totalSize = sizeof(mymap);
int noElements = 0;

for ( std::map<X,Y>::iterator i = mymap.begin() ; i != mymap.end() ; i++ )
   noElements++;

totalSize += noElements * sizeof(X);
totalSize += noElements * sizeof(Y); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T19:14:23.723

由于谷歌把我带到这里，我还是会发布一个迟到的答案——因为接受的答案没有回答这个问题。

这是我所做的（按照 Damon 的建议），这取决于 malloc 的实现。在 glibc/linux 上，返回指针后面的位置给出了分配的大小，因此，可以使用以下代码来跟踪分配/解除分配的字节：

```
#define HEAP_TRACE

#include <new>

static size_t                             heap_trace_allocated_bytes            = 0;
static size_t                             heap_trace_deallocated_bytes          = 0;
static size_t                             heap_trace_allocated_bytes_baseline   = 0;
static size_t                             heap_trace_deallocated_bytes_baseline = 0;

void* operator new(std::size_t size) {
    void* alloc_entry = std::malloc(size);
    if (!alloc_entry) {
        throw std::bad_alloc();
    }
    heap_trace_allocated_bytes += *(size_t*)(((size_t)alloc_entry)-sizeof(size_t));
    //std::cout << "(-1) equals " << size << " : " << *(size_t*)(((size_t)alloc_entry)-sizeof(size_t)) << std::endl << std::flush;
    return alloc_entry;
}

void operator delete(void* alloc_entry) noexcept {
    heap_trace_deallocated_bytes += *(size_t*)(((size_t)alloc_entry)-sizeof(size_t));
    //std::cout << "(-1) : " << *(size_t*)(((size_t)alloc_entry)-sizeof(size_t)) << std::endl << std::flush;
    std::free(alloc_entry);
}

void setHeapTraceBaseline() {
    heap_trace_allocated_bytes_baseline   = heap_trace_allocated_bytes;
    heap_trace_deallocated_bytes_baseline = heap_trace_deallocated_bytes;
}

void getHeapTraceInfo(string title) {
    std::cout << "\t" << title << ":" << std::endl;
    std::cout << "\t\tAllocations:   " << (heap_trace_allocated_bytes   - heap_trace_allocated_bytes_baseline)   << " bytes" << std::endl;
    std::cout << "\t\tDeallocations: " << (heap_trace_deallocated_bytes - heap_trace_deallocated_bytes_baseline) << " bytes" << std::endl;
    std::cout << std::endl << std::flush;
} 
```

* * *

用法如下：

```
setHeapTraceBaseline();
// your algorithms
getHeapTraceInfo("My Algorithm allocation costs"); 
```

希望这可以帮助某人。

注意：这并不意味着在生产中使用，因为我的 new 不是可重入的。不过，我在多线程单元测试时成功运行了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-16T02:52:11.320

这是一个很好的问题，因为其他答案假设地图元素的大小是固定的。在我的情况下，我有一个结构映射的映射，它的 size() 无助于评估。

我通过挂钩 malloc 函数解决了这个问题，然后使用模板函数创建感兴趣对象的直接副本，该模板函数将自动执行每个子对象的分配，给出容器的总大小及其内容。

```
#include <malloc.h>

size_t bucket = 0;

static void* plumber_hook(size_t size, const void* caller);
static void* plumber_hook(size_t size, const void* caller)
{
    void*   result;

    /* Restore all old hooks */
    /* Call recursively */
    __malloc_hook       = 0;
    {
        result = malloc(size);
    }
    __malloc_hook       = plumber_hook;

    bucket += size;

    return result;
}

template<typename T>
size_t plumberTest(T& t)
{
    //begin plumbing
    bucket = 0;

    __malloc_hook   = plumber_hook;
    {
        T newT = t;
    }
    __malloc_hook   = 0;

    return bucket;
}

void plumber()
{
    size_t gross_size = plumberTest(someMap);   
    printf("someMap and its contents uses at least %ld bytes of space\n", gross_size);
} 
```

# mysql - mysql在年份条件下加入表

> ID：11537098
> 
> 赞同：0
> 
> 时间：2012-07-18T08:20:31.697
> 
> 标签：mysql, join

我正在尝试使用 mysql 加入两个表，这并不难，我的问题是我加入的列有一个非标准类型，我加入的生日列可以有多种不同的样式：

```
10/29
01/10/1984
12/32/2007
10/1997
null
1984 
```

如果用户来自同一年，我只想加入列，所以在上面的例子中

```
01/10/1984
1984 
```

将被允许​​加入，而其他人将被忽略。

mysql 是否提供了一种将生日拆分为年份组件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:33:15.020

您可以使用 RIGHT() 函数加入，仅加入日期的最后 4 位，还可以使用 INSTR() 检查最后 4 位是否不包含“/”（即确保它是年）。

像这样的东西：

```
SELECT 
    *
FROM 
    tbl1 t
JOIN tbl2 ON (RIGHT(tbl1.colname, 4) = RIGHT(tbl2.colname, 4) AND INSTR(RIGHT(tbl1.colname, 4), '/') = 0) 
```

这依赖于年份始终是字段的最后四位这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:25:12.020

试试这个

```
set @year:=1984;
Select columns from table
where concat('/',col,'/') like concat('%/',@year,'/%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:30:43.020

使用`YEAR()`功能。

请参考[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:40:25.563

以下查询将返回用户正确填写日期字段或仅输入年份的行。

```
select *
from table
where year(str_to_date(if(length(col_with_date) = 4, concat('01/01/', col_with_date), col_with_date , '%d/%m/%Y')) is not null 
```

请注意分隔符“/”。我想您将需要创建存储过程以将所有可能的分隔符替换为“/”。类似于以下调用：

`replace_word(string_to_replace, what, with)`和例子`replace_words(col_with_date, '|/|,|.|-|', '/')`

希望能帮助到你

# android - 按钮没有获得焦点

> ID：11537099
> 
> 赞同：0
> 
> 时间：2012-07-18T08:20:34.083
> 
> 标签：android

我正在制作一个包含 4 个按钮的应用程序。每当鼠标或某些指针移到它们上方时，我想让它们成为焦点。但我无法做到这一点。请告诉我问题出在哪里。按钮的编码如下。

```
 m_NextButton.requestFocus();
    m_PrevButton.requestFocus();
    m_SubmitButton.requestFocus();
    m_SkipButton.requestFocus(); 
```

xml编码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/button_blue"/> 
    <item android:state_focused="true" android:drawable="@drawable/button_blue"  /> 
    <item  android:drawable="@drawable/button_lightgreen" />

</selector> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:55:27.310

Android 中没有鼠标，android 中没有 hoover，比如 web ...... Galaxy Note 可以有 hoover 事件，但只能通过它的“手写笔”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:31:45.943

这实际上似乎很棘手，但并非不可能。我在 Google 中进行了一些挖掘，并在 Stack Overflow 中发现了一个类似的问题：

[如何将焦点设置在按钮上？](https://stackoverflow.com/questions/6605680/how-to-set-the-focus-on-button)

它有一个链接指向这里，帮助这个人解决了他的问题：[停止 EditText 在 Activity 启动时获得焦点](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)

# java - 迭代 Map 中的键和值

> ID：11537101
> 
> 赞同：2
> 
> 时间：2012-07-18T08:20:47.697
> 
> 标签：java

有时我发现自己复制代码以从 Map 中提取键和值条目（例如，在测试/调试第三方 API 时）。

```
Map<String, String> someMap;
Set<String> keys = someMap.keySet();
for(int j=0;j<someMap.size();j++){
    String key = (String) keys.toArray()[j];
    System.out.println("key > " + key + "  : value = " + someMap.get(key));
} 
```

我知道 Groovy 对此有一些很好的抽象（例如[Get key in groovy maps](https://stackoverflow.com/questions/4898062/get-key-in-groovy-maps)），但我受限于 POJ。当然必须有一种更优雅、更简洁的方式来做到这一点，我的意思是在 Java 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T08:21:51.117

您可以使用[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)`Entry<String,String>`对其进行迭代。您可以使用.`Entry`[`Map.entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)

[`Entry.getKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getKey%28%29)可以使用和提取条目中的键和值[`Entry.getValue()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getValue%28%29)

代码示例：

```
Map<String, String> someMap;
for (Entry<String,String> entry : someMap.entrySet()) {
    System.out.println("key > " + entry.getKey()+ "  : value = " + entry.getValue());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T08:27:33.720

您可以通过使用 for each 循环来简化代码：

```
Map<String, String> someMap;
for(String key : someMap.keySet()){
    System.out.println("key > " + key + "  : value = " + someMap.get(key));
} 
```

或者您使用条目集执行此操作。当我仍在编辑我的答案时，Amit 提供了一些代码；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:25:02.950

根据您要执行的操作，Google 集合有一个[Maps](http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/MapMaker.html) API，它提供了一些帮助函数来转换地图等。

如果您只想漂亮地打印地图，[这篇](https://stackoverflow.com/a/10120408/222867)文章可能会很有用

# abap - IDOC 过滤导致“消息类型 MATMAS 的段 Z* 不存在”错误

> ID：11537102
> 
> 赞同：0
> 
> 时间：2012-07-18T08:20:51.070
> 
> 标签：abap, sap-erp, idoc

我已经扩展`MATMAS05`并使用一些静态代码快速`MATMASEXT`配置了出口：`ZXMGVU03`

```
if segment_name = 'E1MARAM'.

   z1mara1-mseht = 'Kilo'.
   z1mara1-meins = 'KI'.

   ls_idoc_data-sdata = z1mara1.
   ls_idoc_data-segnam = 'Z1MARA1'.
   append ls_idoc_data to idoc_data.

endif. 
```

当我使用 tcode BD10 为材料创建 IDOC 时，此代码可以正常工作并创建一个 idoc。但是，当我`MATMAS`使用植物过滤对 BD64 进行过滤时，BD10 会出现此错误：`Z1MARA1`消息类型的段不存在`MATMAS`。

我已经在互联网上搜索了这个问题，人们通过在 IDOC 控制结构中填充扩展名来解决这个问题。( `EDI_DC40-CIMTYP`)

-像这样：`idoc_control-cimtyp = 'Z1MARA1'.`

但是，我无法像这样填充 cimtype，因为我在用户退出模式中没有相同的值类型。

我的 user-exit`(EXIT_SAPLMV01_002)`的架构是这样的：

```
*"----------------------------------------------------------------------
 *"*"Lokale Schnittstelle:
 *"       IMPORTING
 *"             VALUE(MESSAGE_TYPE) LIKE  EDMSG-MSGTYP
 *"             VALUE(SEGMENT_NAME) LIKE  EDIDD-SEGNAM
 *"             VALUE(F_MARA) LIKE  MARA STRUCTURE  MARA OPTIONAL
 *"             VALUE(F_MAKT) LIKE  MAKT STRUCTURE  MAKT OPTIONAL
 *"             VALUE(F_MARC) LIKE  MARC STRUCTURE  MARC OPTIONAL
 *"             VALUE(F_MARD) LIKE  MARD STRUCTURE  MARD OPTIONAL
 *"             VALUE(F_MFHM) LIKE  MFHM STRUCTURE  MFHM OPTIONAL
 *"             VALUE(F_MPGD) LIKE  MPGD STRUCTURE  MPGD OPTIONAL
 *"             VALUE(F_MPOP) LIKE  MPOP STRUCTURE  MPOP OPTIONAL
 *"             VALUE(F_MPRW) LIKE  MPRW STRUCTURE  MPRW OPTIONAL
 *"             VALUE(F_MVEG) LIKE  MVEG STRUCTURE  MVEG OPTIONAL
 *"             VALUE(F_MVEU) LIKE  MVEU STRUCTURE  MVEU OPTIONAL
 *"             VALUE(F_MKAL) LIKE  MKAL STRUCTURE  MKAL OPTIONAL
 *"             VALUE(F_MARM) LIKE  MARM STRUCTURE  MARM OPTIONAL
 *"             VALUE(F_MEAN) LIKE  MEAN STRUCTURE  MEAN OPTIONAL
 *"             VALUE(F_MBEW) LIKE  MBEW STRUCTURE  MBEW OPTIONAL
 *"             VALUE(F_MLGN) LIKE  MLGN STRUCTURE  MLGN OPTIONAL
 *"             VALUE(F_MVKE) LIKE  MVKE STRUCTURE  MVKE OPTIONAL
 *"             VALUE(F_MLAN) LIKE  MLAN STRUCTURE  MLAN OPTIONAL
 *"             VALUE(F_MLGT) LIKE  MLGT STRUCTURE  MLGT OPTIONAL
 *"       EXPORTING
 *"             VALUE(IDOC_CIMTYPE) LIKE  EDIDC-CIMTYP
 *"       TABLES
 *"              IDOC_DATA STRUCTURE  EDIDD
 *"---------------------------------------------------------------------- 
```

因此，我考虑使用也是 cimtype 的导出值，我使用 Z1MARA1 填充 IDOC_CIMTYPE，如下所示：

*   `idoc_cimtype = 'Z1MARA1'.`

没有像以前那样的语法错误，但在 BD10 上仍然出现错误。

任何人都知道如何解决这个问题？

提前致谢

塔尔哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T12:03:23.153

一旦我也遇到了同样的问题，比如在为特定的消息类型创建 idoc 时，发件人结构 XXXX 不存在，

我试过的解决方案是有效的，你也可以试试这个方法。

1.  发件人结构 XXXX 不存在，
2.  有一种称为转换规则的规则来激活结构，
3.  去 bd55，你可以在那里找到那个特殊的结构。
4.  转到 bd79 并通过引用其他工作结构保持结构 xxxx 中的相同设置。

希望它能为特定的消息类型创建 idoc。

问候，萨西卡拉。

# java - 如何处理 Selenium 中的打印对话框？

> ID：11537103
> 
> 赞同：35
> 
> 时间：2012-07-18T08:20:54.283
> 
> 标签：java, selenium, webdriver

我必须处理打印对话框（在浏览器中单击 ctrl-p 时出现的相同）。我试过：

```
Alert printDialog = driver.switchTo().alert();
printDialog.dismiss(); 
```

但它没有用。我也抓不到它的窗口句柄，因为它不是窗口......

是否可以处理这些对象以及如何处理？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T11:03:43.520

不幸的是，WebDriver 无法处理这些（或任何其他浏览器或操作系统对话框）。此外，它们在浏览器/系统/语言设置之间往往看起来不同，因此可能没有明确的答案。您需要检测并处理所有可能的情况，以使其在任何地方都能正常工作。您的选择包括：

*   该类允许您以编程方式“按”键盘上的任何内容（或盲目单击），因此可以通过按or[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)来摆脱对话框。但是，如上所述，任何高级交互都取决于操作系统/语言/打印机。`Enter``Esc`

    ```
    // press Escape programatically - the print dialog must have focus, obviously
    Robot r = new Robot();
    r.keyPress(KeyEvent.VK_ESCAPE);
    r.keyRelease(KeyEvent.VK_ESCAPE); 
    ```

*   [自动车](http://www.autoitscript.com/site/autoit/)。它是一个 Windows 程序，可用于处理任何系统级自动化。与上述相同的依赖关系。

差不多就是这样。如果可以避免打印对话框，请尝试截取页面并[使用标准 Java 工具进行](http://java.sun.com/javase/technologies/desktop/printing/)打印。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-29T15:56:19.037

一个 CAN 处理在 Chrome 中使用 Selenium 的打印对话框。不确定其他浏览器。

在 ChromeDriver-2.17 中添加了对打印对话框的访问。详细信息可以在这里找到： [https ://bugs.chromium.org/p/chromedriver/issues/detail?id=1087](https://bugs.chromium.org/p/chromedriver/issues/detail?id=1087)

右键单击“打印”对话框->“检查元素”。因此，打印对话框的 DOM 将在单独的窗口中打开。现在，您可以为对话框中的任何元素生成定位器并在测试中使用它们。

要关闭“打印”对话框，可以执行以下操作：

```
//Switch to Print dialog
Set<String> windowHandles = driver.getWindowHandles();
if (!windowHandles.isEmpty()) {
    driver.switchTo().window((String) windowHandles.toArray()[windowHandles.size() - 1]);
}
//Now work with the dialog as with an ordinary page:  
driver.findElement(By.className("cancel")).click(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-07T20:19:10.130

我能够通过添加`--kiosk-printing`完全绕过打印对话框来解决这个问题。我将默认打印设置为 pdf，所以我的下载文件夹中最终有一个 pdf，但至少 selenium 不会挂起。代码如下所示：

```
 ChromeOptions cOptions = new ChromeOptions();
        cOptions.addArguments("kiosk-printing");
        RemoteWebDriver driver = new RemoteWebDriver(hostUrl, cOptions); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-06T22:20:30.330

Slanec 的回答是正确的 - WebDriver 没有本机功能。我在 Windows 中解决这个问题的方法是使用 System.Windows.Forms.SendKeys 对象：

```
 SendKeys.SendWait("^p");
    System.Threading.Thread.Sleep(500);
    SendKeys.SendWait("~");

    // give it a minute to spool onto the printer
    System.Threading.Thread.Sleep(5000); 
```

我实际上已经在循环中打印了一堆语句。奇迹般有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-24T15:55:09.743

您可以在打印对话框出现后简单地关闭浏览器。诚然，这是一个有点过激的措施，但优点是：

*   很简单
*   它不需要任何外部工具
*   它适用于操作系统和浏览器

只需致电：

```
myWebDriver.quit(); 
```

通常，您会运行测试，并像往常一样检查要打印的页面上的元素。即使打印对话框打开，WebDriver 也可以检查页面元素。

完成后，退出浏览器（并为下一次测试启动一个新浏览器）。

* * *

我们已经在一个项目中成功地使用了它。为了让事情变得更简单，我们编写了一个包装类来跟踪“当前的 WebDriver 实例”。我有方法来检索这个实例（根据需要创建一个）并关闭它。这样，您始终可以调用`getCurrentWebDriver()`并获取有效实例（重用或新创建的）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-25T14:01:10.470

另一种选择可能是为 Chrome 编辑 Windows 注册表以禁用打印窗口。

--disable-print-preview - 告诉 Chrome 禁用打印预览的标志

1.  转到注册表编辑器
2.  导航到“计算机\HKEY_CLASSES_ROOT\ChromeBHTML\shell\open\command”
3.  将值设置为：“C:\Program Files (x86)\Google\Chrome Beta\Application\chrome.exe”--disable-print-preview

该解决方案适用于我的具体情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-14T10:25:16.600

使用 Selenium 和 Facebook WebDriver 和 Codeception，我遇到了同样的问题——测试场景将停止运行，因为打印对话框阻止了与页面的任何交互。

我最终没有在`test`环境中打开打印对话框（使用 Symfony 和 Twig 的示例）：

```
{# Selenium can't interact with the OS native print dialog. #}
{# Therefore, it's disabled in the test environment. #}
{% if app.environment != 'test' %}
    $(document).ready(function () {
        var orderShouldBePrinted = window.location.href.indexOf(
            'print=true'
        ) !== -1;

        if (orderShouldBePrinted) {
            window.print();
        }
    });
{% endif %} 
```

这具有不停止测试的优点。但是，它不允许测试打印对话框是否实际出现。

作为冒烟测试，我添加了`$I->seeInCurrentUrl('print=true');`（因为此 URL 参数触发`window.print()`）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-25T14:45:16.317

我试图从一个不允许“全部打印”的网站上的图案列表中打印 100 多页。所以理论上硒会自动帮助我解决这个问题。我对打印对话窗口提出了一个完全非正统的解决方案。

```
##Python code
import time
import threading
from pynput.mouse import Button, Controller
mouse = Controller()

##selenium starting up website stuff here

def website_print_button():
    browser.find_element_by_id('printButton').click()

def push():
    time.sleep(4)    #4 second delay to give the computer time to open print dialog
    mouse.position = [1131, 733] #where my print button is located
    mouse.click(Button.left, 1)

def letsgo():

    for x in range(printing_amount):
        browser.find_element_by_xpath('/html/body/div[1]/form/table[4]/tbody/tr['+str(x+1)+']/td[1]/a/b').click()
        browser.find_element_by_css_selector('ul.light-green.button').click()
        browser.switch_to.window(browser.window_handles[1])
        t2 = threading.Thread(target=push)
        t2.start()
        t1 = threading.Thread(target=website_print_button)
        t1.start()
        time.sleep(5)
        browser.close()
        browser.switch_to.window(browser.window_handles[0])
        browser.find_element_by_class_name('c').click() 
```

当打印对话框窗口打开时，Selenium 通常会卡住等待发生的事情。我使用了我最近学到的一种叫做“线程”的东西，这让我在技术上可以同时做两件事。我会要求在 4 秒内单击以启动（推送功能），然后立即，Selenium 将单击网站打印按钮。当 Selenium 打开打印对话框窗口时，它卡住了等待，但延迟点击仍在运行，并在硒打开打印窗口 4 秒后等待点击。然后单击将执行，并且 selenium 重新控制，因为打印窗口已被处理。

# date - 以 UTC 存储时间总是一个好主意，还是以本地时间存储更好？

> ID：11537106
> 
> 赞同：83
> 
> 时间：2012-07-18T08:21:01.110
> 
> 标签：date, time, timezone, utc, dst

一般来说，最好的做法是在 UTC 中存储时间，如此[处](https://stackoverflow.com/a/5667869/19917)和[此处](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices/)所述。

假设有一个重复发生的事件，假设结束时间总是在同一本地时间，假设 17:00，无论该时区是否开启或关闭夏令时。并且还要求在特定时区的 DST 打开或关闭时不要手动更改时间。还要求任何其他系统通过 API（即 GetEndTimeByEvent）询问结束时间时，它总是以 UTC 格式发送结束时间。

**方法 1：** 如果决定**以 UTC 存储，**则可以将其存储在数据库表中，如下所示。

```
Event      UTCEndTime
=====================
ABC         07:00:00
MNO         06:00:00
PQR         04:00:00 
```

对于第一个事件 ABC，UTC 的结束时间是上午 07:00，如果转换为 2012 年 7 月 1 日从 UTC 显示为本地时间，它将导致本地时间 17:00，如果转换为 2012 年 10 月 10 日（时区 DST 开启的日期）然后将导致下午 6 点，这不是正确的结束时间。

我可以想到的一种可能方法是将 DST 时间存储在附加列中，并在时区启用 DST 时使用该时间。

**方法 2：** 但是，如果将其**存储为以下本地时间**，例如对于事件 ABC，它将始终为任何日期的 17:00，因为没有从 UTC 转换为本地时间。

```
Event      LocalEndTime
=======================
ABC         17:00:00
MNO         16:00:00
PQR         14:00:00 
```

并且应用层将本地时间转换为UTC时间通过（API GetEndTimeByEvent）发送到其他系统。

**在这种情况下，将时间存储在 UTC 中仍然是个好主意吗？如果是，那么如何获得恒定的本地时间？**

相关问题：[是否有充分的理由不以 UTC 存储时间？](https://stackoverflow.com/questions/1127781/is-there-ever-a-good-reason-to-store-time-not-in-utc?rq=1)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-21T07:55:58.850

我认为为了回答这个问题，我们应该考虑使用 UTC 存储时间戳的好处。

我个人认为这样做的主要好处是时间总是（大部分）保证是*一致*的。换句话说，无论何时更改时区或应用 DST，您都不会及时返回或返回。这在文件系统、日志等中特别有用。但是在您的应用程序中是否有*必要*？

想两件事。首先，关于夏令时时钟移位的时间。您的活动是否有可能发生在凌晨 2 点到凌晨 3 点之间（在时钟轮班结束的那一天）？那应该怎么办？

其次，应用程序是否会受到实际时区变化的影响？换句话说，你打算带着它从伦敦飞到华沙，并适当地改变你的电脑时区吗？在这种情况下应该怎么办？

如果您对这两个问题的回答都是*否定*的，那么您最好使用当地时间。它将使您的应用程序更简单。但是，如果您至少回答*过*一次，那么我认为您应该多考虑一下。

* * *

这就是关于数据库的全部内容。另一件事是应用程序内部使用的时间格式，这应该取决于您实际上将使用该时间做什么。

您提到它通过 API 公开时间。应用程序会在每个请求上查询数据库吗？如果您在内部将时间存储为 UTC，您将需要这样做或以其他方式确保在 DST/时区更改时缓存时间将被调整/修剪。

它会对时间本身做些什么吗？就像打印*事件将在 8 小时内发生*或在大约那个时间暂停本身？如果是，那么UTC可能会更好。当然，您需要考虑所有上述问题。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-12-19T16:51:57.693

我喜欢这样想：

计算机并不关心时间作为人类可以理解的表示。他们不关心时区、日期和时间字符串格式或任何这些。只有人类关心如何解释和表示时间。

让数据库做它擅长的事情：将时间存储为一个数字——一个 UNIX 纪元（自 1970-01-01 以来经过的秒数）或一个 UTC 时间戳（没有时区或夏令时信息）。仅在必要时才关心以人类可以理解的方式表示时间。这意味着在您的应用程序逻辑、报告系统、控制台应用程序或人类将查看数据的任何其他地方。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-10T04:55:56.833

以下内容不适用于真正的多租户全球 SaaS 产品，因此此观点针对简单的“业务线”应用程序开发人员。

存储为 UTC 很好，但如果你这样做，有一个要求会导致痛苦：“你能给我写一份报告，告诉我每天发生多少 X 吗？”

如果您将日期存储为 UTC，则此要求将导致痛苦；您需要在应用服务器和您的报告中编写时区调整代码；您对包含日期条件的数据执行的每个临时查询都需要考虑到这一点。

如果您的申请符合以下条件：

1.  每个实例都基于一个时区。
2.  时区转换通常在办公时间之外，或者您并不真正关心事物的“持续时间”，以至于缺少一个小时左右会很重要。

我建议您将日期时间存储为本地日期时间，同时使用将您与服务器时区配置问题隔离开的库（例如 .net 世界中的 Noda.Time）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-20T14:32:27.140

如果您的系统间消息使用 ISO 8601，并且您的数据库正在存储原始本地时间 + 偏移量（例如`datetimeoffset`在 MSSQL 或`ISODate`Mongo 中，因为 ISO 8601 捕获它）并且您仅`DateTimeOffset`在 .NET 或`OffsetDateTime`Java 中使用或在你的代码，那么根本不需要转换。你只是存储它。所有比较功能都可以正常工作。

如果您在持久性中转换为 UTC，那么您就失去了从用户的角度来看的偏移量。显示用户十年前签署文件的时间现在是一个难题。从 UTC 解决这个问题将意味着查找当时在该地区有效的 DST 规则。恶梦。

我相信我们都习惯于转换为 UTC 以实现持久性的原因是因为我们从来没有使用过正确的数据结构/数据类型来允许我们做正确的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T15:34:32.243

我只会存储没有任何区域的时间组件。每当 API 必须为其提供服务时，添加正确的日期并将其作为本地时间转换为该日期的 UTC。

数据库 = 17:00（使用不带日期的时间戳，小时为字节，分钟为字节，字符串）

检索 = 我们想要事件的日期 + 数据库 17:00 => 将其从本地转换为 UTC

这样，您将始终以 UTC 提供正确的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-21T00:50:29.560

您实际上并没有像大多数时间 API 所假设的那样存储特定的时间点。如果您的数据库支持它（PostgreSQL 支持），则使用间隔，或者将其存储为一个整数，表示自午夜或相应的计划开始（星期一、月初等）以来的秒数（分钟/小时）。无论哪种情况，您都不必担心如何在系统之间处理“时间”，而只需在您的视图中将秒数转换为一天中的时间时，您就会感到非常头疼。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-03T21:00:00.787

我们不能总是计算给定 UTC 和时区的本地时间吗？我们不能真正可靠地存储时间本身编码的时间和时区，因为时区的偏移量可能会改变，而 ISO 标准只允许我们对可能改变的偏移量进行编码。所以，我们不能，比如说，存储在本地时区编码的未来时间，因为我们实际上还不知道偏移量！因此，将时间存储在 UTC 中，并将时区存储为单独的条目，并在需要时进行计算，这样更不容易出错。本地时间通常是一个实现细节。似乎当我们存储它时，我们可能会混淆关注点。大部分时间显示相对于时区的时间是视图的业务。通过存储事物的组件并允许计算来组合它们，我们通常可以获得最大的灵活性。

# asp.net-mvc - 在 IIS 7.5 上托管后代码不起作用

> ID：11537107
> 
> 赞同：0
> 
> 时间：2012-07-18T08:21:01.473
> 
> 标签：asp.net-mvc, iis-7.5, executable

我正在做一个 MVC 项目。在这里，我试图获取其他网站的元素。要获取元素，我使用`WebBrowser`Class 对象，语法如下：

```
var a = wb.Document.GetElementById("_menu__tableMenu").GetElementsByTagName("a");<br>
HtmlElement x = a[2]; 
```

其中 wb 是`WebBrowser`类的实例 此代码在我的开发机器和我公司的网络上完美运行（当托管在我们的一个登台服务器中时）但是当我尝试将它托管在客户端的托管服务器上时，它只会抛出“对象引用未设置为实例“问题。

记录错误后，我发现此错误是 `HtmlElement x = a[2];`因为数组 a 没有任何项目。但我无法理解为什么它会以这种方式工作，而我正在寻找的所有元素都存在。

我认为这可能是一个同步问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:34:54.850

几个想法：

您可以尝试使用 html 敏捷包：[http](http://htmlagilitypack.codeplex.com/) ://htmlagilitypack.codeplex.com/我认为它在各种情况下可以更好地处理 DOM。

wb.Document.GetElementById(" *menu* _tableMenu") 是否返回任何内容，或者它也为空？

你能在你提出网络请求的地方显示代码吗？

# c# - 游戏中使用的虚拟机

> ID：11537108
> 
> 赞同：0
> 
> 时间：2012-07-18T08:21:02.627
> 
> 标签：c#, python, scripting, interpreter, vm-implementation

我正在寻找可以嵌入游戏的虚拟机。

我的想法是创建一个游戏世界和两个化身。在头像中我嵌入了一个虚拟机，它可以使用 api 与游戏世界中的头像进行交互，例如：

```
move_forward()
turn_left()
turn_right()
sense()
etc. 
```

在每个滴答声中，我将允许每个 VM 更新每个正在进行的 X 个滴答声。然后将两个不同的程序上传到每个 VM 并独立执行。整个设置应该能够防止 VM 内的程序崩溃。

我更喜欢在 Python 中工作，我的环境是 C#，但我愿意接受建议。

这个想法很大程度上受到了 GunTactyx 游戏的启发，但我发现那里使用的语言过于狭窄，因为我的目标是成为一个学习平台，以进一步进入编程领域。

你知道任何允许我这样做的虚拟机吗？

亲切的问候

杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T18:10:07.803

我会使用 Lua，根据我的经验，它在游戏中的使用比 python 更多。

您可以使用调试钩子或协程来限制一次执行的指令数量。这是一篇关于有人做类似你的事情的帖子：http: [//lua-users.org/lists/lua-l/2009-03/msg00008.html](http://lua-users.org/lists/lua-l/2009-03/msg00008.html)

在抗崩溃的鲁棒性方面：“由于 Lua 是一种扩展语言，经常嵌入在应用程序中，它不能在发生错误时简单地崩溃或退出。相反，每当发生错误时，Lua 会结束当前块并返回到应用程序。 " [http://www.lua.org/pil/8.3.html](http://www.lua.org/pil/8.3.html)

如果你想用 C# 封装 Lua，试试

[http://luaforge.net/projects/luainterface/](http://luaforge.net/projects/luainterface/)

[https://github.com/NLua/NLua](https://github.com/NLua/NLua)

另请查看这篇文章，了解有关 Lua Vs Python 的讨论：

[https://stackoverflow.com/questions/356160/which-game-scripting-language-is-better-to-use-lua-or-python](https://stackoverflow.com/questions/356160/which-game-scripting-language-is-better-to-use-lua-or-python)

# regex - Vim-substitute 命令插入重复

> ID：11537112
> 
> 赞同：2
> 
> 时间：2012-07-18T08:21:10.237
> 
> 标签：regex, vim, substitution

我在 Vim 的`substitute`-command 中遇到了一个我无法真正遵循的行为：

给定以下代码行，其中包含`&&`我想用`&&`with`&&`和换行符替换的序列：

```
return a && b 
```

在我的第一次尝试中，我只是使用了`s/&& /&&^M/g`（`^M`通过 插入`Ctrl-V <Enter>`）。这导致以下代码：

```
return a && && 
b 
```

插入第二个的替换究竟是如何执行的`&&<space>`？我希望第一个（也是唯一的匹配）是`&&<space>`，而这个完整的匹配被替换为`&&^M`?

问题不在于如何执行正确的替换 - 我最终使用`\zs`令牌来重置比赛的开始并只插入换行符。我只是想了解为什么要引入重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:25:07.603

您遇到的问题是替换命令将`&`替换中的特殊标记视为匹配的文本。你需要逃避它。

```
:s/&& /\&\&^M/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:49:42.507

这个简单的命令应该可以工作，在第一行留下一个不雅的尾随空格：

```
:s/&& /&\r 
```

但我不喜欢尾随空格。

这个可以做你想做的事，而不会留下尾随空格：

```
:s/&&\zs /\r 
```

我`&&`用作“标记”，实际匹配 a用回车`<space>`符分隔`\zs`并替换为回车符。

见`:help \zs`。

***编辑***

废话，我完全没有阅读你问题的最后一段。

# asp.net - 从自定义 ASP .NET Extender 服务器端 ExtenderControlBase 编写客户端代码

> ID：11537123
> 
> 赞同：0
> 
> 时间：2012-07-18T08:21:55.027
> 
> 标签：asp.net

我在 ASP .NET 中扩展**ExtenderControlBase控件。**它被称为：

```
public class LookupExtender : ExtenderControlBase 
```

基本上它在类似于自动完成功能的东西中所做的 - 但是是静态的。LookupExtender 具有指定的**TypeName**和**ListName**属性：

*   具有**string[] GetList(string listName)**方法的类
*   将传递给 GetList 方法的列表的名称

现在，LookupExtender 动态创建**TypeName**实例（反射），调用**GetList**方法，我想将**string[]**结果作为数组呈现给客户端，以便扩展器客户端代码具有用于自动建议的静态源。

有没有办法从**LookupExtender**类呈现 JavaScript？

这是我的示例代码（当前自动建议值是硬编码的）：

```
set_TargetTextBoxID: function (value) {
    this._targetTextBoxID = value;

    $(function () {
        var availableTags = [
            "Switzerland",
            "Poland",
            "Europe",
            "USA",
            "Asia"
        ];
        $("#" + value).autocomplete({
            source: availableTags,
            minLength: 0,
            close: function () {
                $(this).blur();
            }
        }).focus(function () {
            $(this).autocomplete("search", "");
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:27:28.273

结果很容易

*   扩展器的服务器端：

    ```
    protected override void RenderInnerScript(ScriptBehaviorDescriptor descriptor)
    {
        var listSource = System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(SourceType) as ILookupExtenderListSource;
        if (listSource == null) return;

        var lookupList = listSource.GetList(SourceList);
        descriptor.AddProperty("LookupArray", lookupList);
    } 
    ```

*   客户端js脚本：

CIPNet.Extenders.LookupBehavior.prototype = { 初始化：function() { CIPNet.Extenders.LookupBehavior.callBaseMethod(this, 'initialize'); },

```
dispose: function() {
    CIPNet.Extenders.LookupBehavior.callBaseMethod(this, 'dispose');
},

//
// Property accessors 
//

get_LookupArray: function() {
    return this._lookupArray;
},

set_LookupArray: function(value) {
    this._lookupArray = value;
},

get_TargetTextBoxID: function() {
    return this._targetTextBoxID;
},

set_TargetTextBoxID: function(value) {
    this._targetTextBoxID = value;
    var that = this;

    $(function() {

        var showSuggestion = function () {
            $(this).autocomplete("search", "");
        };

        var availableTags = that._lookupArray;
        $("#" + value).autocomplete({
            source: availableTags,
            delay: 0,
            minLength: 0
        }).click(showSuggestion);
    });
} 
```

};

# c# - 如何使用 asp:ListView 隐藏 div

> ID：11537125
> 
> 赞同：1
> 
> 时间：2012-07-18T08:21:57.803
> 
> 标签：c#, javascript, asp.net

我有一个带有 <asp:ListView> 的 <div> - 带有搜索结果。我想隐藏这个 div，并在 ListView 已满时显示它（或者更好 - 当这部分代码完成时）

```
 lvSearchResult.DataSource = getSearchResult();
    lvSearchResult.DataBind(); 
```

我怎样才能做到这一点？同时，当这个带有列表视图的 <div> 不可见时，我想显示另一个带有“正在加载”信息的 div。当 ListView 准备就绪时，带有结果的 <div> 将显示出来，带有“正在加载”的 <div> 将被隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:25:49.557

像这样声明你的 div：

```
<div id="searchResultDiv" runat="server" visible="false">...</div>

<div id="loadingDiv" runat="server">...</div> 
```

这`runat="server"`使它们可以在您的 asp.net 代码中访问。

然后在您的代码中您可以更改它们的属性，在这种情况下更改`Visibility`：

```
lvSearchResult.DataSource = getSearchResult();
lvSearchResult.DataBind();
searchResultDiv.Visible = true;
loadingDiv.Visible = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:29:13.410

如果您使用的是更新面板，您可以使用类似于下面的代码来实现。这将在页面更新时在页面上显示一个模式面板。

您可以修改开始和结束请求方法来隐藏/显示包含列表视图的 div

请注意，这使用 jQuery。

```
 <div id="workingDialog" style="display: none" title="Please wait">
        <p>
           Loading Data
        </p>   
     </div>

<div id="listViewDiv" style="display:none">
//List View
</div>

<script>

var _workingDialog;

    //Page Load event
    function pageLoad(sender, args) {
        //Register events
        Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequest);
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequest);

        _workingDialog = $('#workingDialog');
    }

    function beginRequest(sender, args) {
        $(_workingDialog).dialog({ modal: true });
        $('#listViewdiv').hide();
    }

    function endRequest(sender, args) {
        $(_workingDialog).dialog('close');
        $('#listViewdiv').show();
    }

</script> 
```

[http://wraithnath.blogspot.co.uk/2011/12/showing-modal-dialog-while-page-is.html](http://wraithnath.blogspot.co.uk/2011/12/showing-modal-dialog-while-page-is.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:24:43.840

`runat="server"`在你的 div 中使用属性

然后根据任何条件，您可以显示或隐藏 div

```
<div runat="server" id="myDiv">

var result = getSearchResult();    

    if(result!= null){
        myDiv.Visible = true;
        lvSearchResult.DataSource = result;
        lvSearchResult.DataBind();
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:24:46.037

根据您的列表，您可以制作一个广告 2 个 css 类的方法，一个用于列表已满时，一个用于其他情况。所以在一个 css 中你会有 display: none; 在另一个显示中：inline-block；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T08:25:27.770

据我了解，您可以使用css吗？并设置 display:none 并在满足您的条件时将显示更改为阻止/显示？

希望这会有所帮助：[http ://webdesign.about.com/od/dhtml/a/aa101507.htm](http://webdesign.about.com/od/dhtml/a/aa101507.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T08:25:29.043

将 runat="server" 添加到 div，然后您可以设置 visible = false/true

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-18T08:24:43.793

将 AJAX 与 UpdatePanel 一起使用，不是吗？那可行..

# objective-c - 在 MKMapKit MKAnnotation 子类中更改图像

> ID：11537126
> 
> 赞同：0
> 
> 时间：2012-07-18T08:22:08.820
> 
> 标签：objective-c, ios, mkmapview, mkannotation, mkannotationview

我在更改 MKAnnotationView 子类中的图像视图时遇到了一些问题。我有一个计时器，它根据用户在某个点的位置数据更新注释位置。这可以正常工作，并且注释位置已正确更新。我使用以下代码执行此操作：

`[_myAnnotation setCoordinate:point.position];`

在此之下，我还计算用户是向东还是向西。如果用户向东，我调用类`setIsMovingRight:YES`上的方法`MyAnnotation`，并在用户向西时执行相反的操作。

我已经通过在方法内部使用 NSLog 来验证在正确的时间使用正确的值调用该方法，以便在值更改时打印出来。但是，该方法似乎`setIsMovingRight`对注释的视觉外观没有任何影响。每当调用该方法时，我都会尝试将 imageview 的背景颜色设置为红色，但即使这样也没有效果。我试过在各个地方调用 setNeedsDisplay 都没有成功。

我可以添加和重新创建一个注释视图，但是每当位置发生变化时，注释就会闪烁，而且看起来真的不是很好。

以下是我的自定义注释视图“MyAnnotation”的代码。

```
@interface MyAnnotation : MKAnnotationView <MKAnnotation>
{
    UIImageView *_imageView;
    BOOL _currentlyMovingRight;
}

@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@property (nonatomic,retain) UIImage  *image;

-(void)setIsMovingRight:(BOOL)movingRight;

@end

@implementation MyAnnotation

@synthesize coordinate, title, subtitle, image;

-(id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if(self)
    {
        _currentlyMovingRight = NO;
        _imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"right.png"]];
        [self addSubview:_imageView];
    }
    return self;
}

-(void)setIsMovingRight:(BOOL)movingRight
{
    _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    [_imageView setBackgroundColor:[UIColor redColor]]; // THIS LINE NEVER DOES ANYTHING.

    if(movingRight && !_currentlyMovingRight)
    {
        NSLog(@"right now.");
        [_imageView setImage:[UIImage imageNamed:@"right.png"]];
    }
    else if (!movingRight && _currentlyMovingRight)
    {
        NSLog(@"left now.");
        [_imageView setImage:[UIImage imageNamed:@"left.png"]];
    }
    _currentlyMovingRight = movingRight;

    [self addSubview:_imageView];
    [self setNeedsDisplay];
} 
```

我将不胜感激任何人可以提供的任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:38:24.530

我认为注释视图使用 KVO 来监听变化。你试过改变`image`属性吗？就像是`[self setImage:myNewImage]`

# javascript - ExtJS 控制器动作

> ID：11537128
> 
> 赞同：0
> 
> 时间：2012-07-18T08:22:10.283
> 
> 标签：javascript, extjs, tabs, controller, action

我想在选项卡关闭时执行控制器代码。

为此，我使用了带有 ControlQuery 的控制器操作。该查询似乎是正确的，但该操作从未触发...

这是我的小提琴：http: [//jsfiddle.net/charlesbourasseau/sU7Me/](http://jsfiddle.net/charlesbourasseau/sU7Me/)

我究竟做错了什么 ？

# iphone - 如何从facebook获取friendsList中的所有朋友的电子邮件ID

> ID：11537129
> 
> 赞同：0
> 
> 时间：2012-07-18T08:22:13.997
> 
> 标签：iphone

我是 iphone 新手。我的问题是如何在 iPhone 中使用 Graph API 时从 facebook 获取 FriendsList 中好友的所有电子邮件 ID？我能够获取朋友列表中除了电子邮件 ID 之外的所有朋友的照片、姓名、名字和姓氏，我们该怎么做如果有人知道这一点，请帮助我。如果有人为此提供了一些代码这对我会有帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:35:16.500

您不能，由于隐私风险，无法通过 API 为朋友提供电子邮件地址。

请参阅 facebook[权限参考](https://developers.facebook.com/docs/authentication/permissions/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:37:31.500

除了您的应用程序的用户（即授权您的应用程序并且您为其获得 access_token 的人）之外，根本不可能获得 Facebook 用户的电子邮件地址，甚至无法获得用户的朋友。即使是扩展权限也无济于事。

# android - 在 Achartengine 中移动饼图

> ID：11537134
> 
> 赞同：2
> 
> 时间：2012-07-18T08:22:21.567
> 
> 标签：android, achartengine

我正在使用 achartengine 在 android 中创建饼图。现在一切都很好，除了我的饼图可以拖动/移动到布局中的任何位置。我希望我的饼图固定在自己的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:38:19.860

调用对象`renderer.setPanEnabled(false);`。`DefaultRenderer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:05:08.437

您可能还希望与平移一起禁用捏缩放：

```
renderer.setZoomEnabled(false); 
```

# c# - 使用 WT_FPC（WebTrends 跟踪 cookie）获取 cookie。

> ID：11537147
> 
> 赞同：0
> 
> 时间：2012-07-18T08:22:51.080
> 
> 标签：c#, session, c#-4.0, post, cookies

使用 Fiddler 跟踪 POST 包，结果：

```
POST http://site1.do HTTP/1.1
Host: data.bls.gov
Connection: keep-alive
Content-Length: 12
Cache-Control: max-age=0
Origin: http://data.bls.gov
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko)     Chrome/20.0.1132.57 Safari/536.11
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://site1.jsp
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: JSESSIONID=C6395D730AD166AF76AB4E1CC7ECC694.tc_instance3; WT_FPC=id=2859218d72fe8fdf53b1342567507813:lv=1342569213802:ss=1342567507813; fsr.s={"v":0,"rid":"1342592707969_345732","to":2.7,"f":1342594413334}

type=arg1 
```

我必须保留 cookie 才能获得具有相同会话 ID 的另一个站点。所以，我使用 WebClient 和扩展（CookieAwareWebClient 发布在 StackOverflow 上）。一种方法是：

```
 private void ReadCookies(WebResponse r)
    {
        var response = r as HttpWebResponse;
        if (response != null)
        {
            CookieCollection cookies = response.Cookies;
            container.Add(cookies);
        }
    } 
```

但

```
response.Cookies = JSESSIONID=C6395D730AD166AF76AB4E1CC7ECC694.tc_instance3; 
```

丢失有关 WT_FPC 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:09:21.167

好的，这里有一些关于代码的更多信息。所以Webclient扩展：

```
public class CookieAwareWebClient : WebClient
{
    public CookieAwareWebClient(CookieContainer container)
    {
        this.container = container;
    }

    private readonly CookieContainer container = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest r = base.GetWebRequest(address);
        var request = r as HttpWebRequest;
        if (request != null)
        {
            request.CookieContainer = container;
        }
        return r;
    }

    protected override WebResponse GetWebResponse(WebRequest request, IAsyncResult result)
    {
        WebResponse response = base.GetWebResponse(request, result);
        ReadCookies(response);
        return response;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        ReadCookies(response);
        return response;
    }

    private void ReadCookies(WebResponse r)
    {
        var response = r as HttpWebResponse;
        if (response != null)
        {
            CookieCollection cookies = response.Cookies;
            container.Add(cookies);
        }
    }
} 
```

这是客户端代码：

```
 using (CookieAwareWebClient client = new CookieAwareWebClient(Cookies))
        {
            string data = Encoding.Default.GetString(client.DownloadData(m_uri));
            try
            {
                NameValueCollection values = new NameValueCollection { { "type", "arg1" } };
                string URL1 = "http://x/search.jsp";

                client.Headers[HttpRequestHeader.KeepAlive] = "true";
                client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
                client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
                client.Headers[HttpRequestHeader.Accept] = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
                client.Headers[HttpRequestHeader.AcceptEncoding] = "gzip,deflate,sdch";
                client.Headers[HttpRequestHeader.AcceptLanguage] = "en-US,en;q=0.8";
                client.Headers[HttpRequestHeader.CacheControl] = "max-age=0";

                byte[] result = client.UploadValues(URL1, "POST", values);
                string result1String = Encoding.UTF8.GetString(result);
                Console.WriteLine();
} 
```

在 result1String 对象中，我有来自第一个网站的 html 网站。所以什么也没有发生。我使用提琴手进行调查。并查看我的发送包不包含有关 WT_FPC 的信息。所以我尝试 fiddler composer 并使用该信息构建自己的包。网站反应很好！

因此，我尝试在有关 WT_FPC 的代码信息中查找，但没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:09:46.820

客户站点[http://site1.jsp](http://site1.jsp)有我想要发布的表单。

```
<form name="searchForm" method="POST" **action="/oes/site1.do**">
  <table cellspacing="3" cellpadding="2" border="0" width="100%">
    <tr>
      <td>
        <P>
          <STRONG>Please select a search type</STRONG>:
        </P>
        <P>
          <INPUT type="radio" name="type" value="arg1" CHECKED />Multiple occupations for one geographical area
        </P>
        <P>
          <INPUT type="radio" name="type" value="occ_geo"/>One occupation for multiple geographical areas
        </P>
        <P>
          <INPUT type="radio" name="type" value="ind_occ"/>Multiple occupations for one industry
        </P>
        <P>
          <INPUT type="radio" name="type" value="occ_ind"/>One occupation for multiple industries
        </P>
      </td>
    </tr>
    <tr>
      <td>
        <input type="submit" value="Continue">
      </td>
    </tr>
    </table>
</form> 
```

# backbone.js - BackBone 中的信息在哪里？

> ID：11537150
> 
> 赞同：0
> 
> 时间：2012-07-18T08:23:14.827
> 
> 标签：backbone.js, coffeescript, underscore.js

当一个`save`, 或`create`被扔向服务器时，服务器会响应一个新的随机创建的对象。该对象可以是许多不同的类之一，Backbone 响应这些不同的对象并加载一个相对视图。

我似乎只能在引导程序上弄清楚这个逻辑，因为还没有加载任何视图，所以我可以根据我从服务器随机接收到的信息，引导并导航到​​那个特定的路线。

但是，当我保存一个对象并接收我的返回数据时，我一直试图弄清楚如何做到这一点。

这是我的代码分解。

**信息已保存。**

```
@model.save(@model.toJSON(), 
```

**我有一个听众在等待这个保存：**

```
constructor: (options) ->
  super(options)
  @model.bind 'change:verb', _.chooser, options 
```

**_.maestra_chooser 是我在实用工具带中的一个 mixin：**

```
_.mixin
  _chooser : (item) =>
    console.log item 
```

这里有一点需要注意。`item`不幸的是，该变量与`@model`刚刚保存的变量相同。那里没有新数据。

我希望`item`成为来自服务器的新变量数据，这样我就可以获取这些数据，查看它是什么类型的数据，然后路由到相关视图。

这就是我相信我也在提出一个架构上不合理的想法的地方。但由于我理解不够的原因，无法解释。

有谁知道我可以*在哪里*访问服务器的返回数据并将我的应用程序适当地导航到相应的路线？

**附加信息**

这就是我适当地引导它的方式：

```
window.router = new Project.Routers.QuestionsRouter(
{
  words: #{ @words.to_json.html_safe }  
});

Backbone.history.start();

router.navigate("#{@words.kind_of?(Array) ? "bar" : "foo"}", {trigger: true, replace: true}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:05:18.683

改变事件只会给你模型和改变的价值......

您可以将成功回调传递给您的保存：

```
@model.save(@model.toJSON(), success: (model, resp) ->
    # do whatever with resp
) 
```

where`resp`将包含来自服务器的原始响应，`model`并将包含模型的服务器端状态。

如评论中所述，您还可以绑定到模型的同步事件：

```
@model.bind 'sync', _.masetra_chooser, options 
```

回调使用`sync`参数调用：模型、resp 和选项，其中选项是传递给的选项集`save`。 [https://github.com/documentcloud/backbone/blob/9a12b7640f07839134e979b66df658b70e6e4fe9/backbone.js#L383](https://github.com/documentcloud/backbone/blob/9a12b7640f07839134e979b66df658b70e6e4fe9/backbone.js#L383)

不太确定为什么您希望从会更改您页面的保存中获取数据。似乎有点奇怪。

在您的模型中不存在的保存后，您希望收到什么类型的数据？

# javascript - 在jQuery中上下动画和图像

> ID：11537153
> 
> 赞同：2
> 
> 时间：2012-07-18T08:23:24.390
> 
> 标签：javascript, jquery, animation, jquery-animate

我正在尝试使用 jQuery 上下动画和图像。

它的行为应该是这样的：

当页面加载时，它会显示 50% 的图像。如果有人点击图像，它会在页面上设置 div 动画。如果用户再次单击，它会移回页面下方。

html

```
 <div id="slidebottom" class="slide">
     <div class="inner"><img src="images/sze.jpg" alt="" class="try" /></div>
 </div> 
```

jQuery

```
$(document).ready(function() {
    $('.try').click(function() {
        $(".inner").animate({
            top: '-=100px'
        }, 2000);
    });
}); 
```

单击两次后如何反转动画？每次单击时，容器都会向上移动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:31:20.993

您可以尝试使用该`.toggle()`方法，该方法采用两个函数，并在单击时交替执行每个函数：

```
$(document).ready(function(){
  $('.try').toggle(function() {
    $(".inner").animate({top: '-=100px'}, 2000);
  }, function() {
    $(".inner").animate({top: '+=100px'}, 2000);
  });
}); 
```

但是，我个人会使用一个类和 CSS3 过渡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:37:11.570

试试[这个例子](http://jsfiddle.net/menislici/jGfHM/)。另请注意，为了使用`top`css 属性，您应该使用div`position: relatve;`或div。`position: absolute``.inner`

```
 var clicked = false
 $('.try').click(function () {
     if (clicked == true) {
         $(".inner").animate({
             top: '0px'
         }, 2000);
         clicked = false;
     } else {
         $(".inner").animate({
             top: '-100px'
         }, 2000);
         clicked = true;
     }
 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T17:41:04.983

只需在第一个代码行下方放置另一个代码行，它就会按顺序为它们设置动画

```
$(document).ready(function() {
    $('.try').click(function() {
        $(".inner").animate({
            top: '-=100px'
        }, 2000);
        $(".inner").animate({
            top: '+=100px'
        }, 2000);
    });
}); 
```

# android - Android ListView - 加载新项目而不重新加载旧项目 - 如在 Gmail 或 Google Play 中

> ID：11537154
> 
> 赞同：1
> 
> 时间：2012-07-18T08:23:27.850
> 
> 标签：android, listview, add, reloading

我遇到了一个工作正常的 ListView 的问题。

我想将新项目加载到现有的 listView 中，就像在 Gmail 或 Google Play 应用程序中一样 - 我显示了 15 个项目，当用户单击下一步加载时，其他 15 个将被加载，因此我们将显示 30 个项目。

一切都像这样正常工作，除了 ImageView，它是 ListView 中每个项目的一部分并且是异步加载的。每次单击下一步加载时，都会重新加载现有项目中的所有图像。

我怎样才能避免这种行为？有什么建议么？

它看起来不太好，从缓存中加载图像的速度非常快，所以就像所有图像的短暂闪烁一样。

我正在考虑以某种方式覆盖 notifydatasetchanged() - 但我希望 ListView 中有一个方法，我可以在其中设置是否应该重新加载整个 ListView，或者只是新项目。所有项目都将 fill_parent，因此宽度不是问题。

# c++ - 从结构数据继承

> ID：11537155
> 
> 赞同：3
> 
> 时间：2012-07-18T08:23:32.020
> 
> 标签：c++, factory-pattern

想象以下情况：

我想创造各种怪物工厂。这些怪物工厂根据`struct`数组提供的数据创建怪物。怪物只是在这些统计数据上有所不同，因此为每个怪物创建一个子类是矫枉过正的。

```
struct monster_data
{
    int HP;
    int strength;
    int speed;
    // even more attributes
}; 
```

一个类`monster`可以处理基于 a 的怪物的所有行为`monster_data`：

```
class monster
{
    public:
        monster(monster_data* initial_stats, int length);

    void attack();
    void walk();
    void die();
    // and so forth
}; 
```

到目前为止，一切都很好。现在我有一个`monster_factory`基于硬编码`monster_data`数组创建怪物的类：

```
const monster_data district1_monsters[]
{
    { 500, 20,  4 }, // monster1
    { 550,  5, 12 }, // monster2
    { 420,  8, 10 }, // monster3
    { 310, 30,  7 }, // monster4
    // 100 more monsters
};

class monster_factory
{
    public:
        monster_factory(monster_data* monster_to_create) ;
        monster* create_random_monster();
}; 
```

我的问题是我必须支持几个`monster_factories`地区的几个，列表中的差异很小：

```
const monster_data district1_monsters[]
{
    { 500, 20,  4 }, // monster1
    { 550,  5, 12 }, // monster2
    { 420,  8, 10 }, // monster3
    { 310, 30,  7 }, // monster4
    // 100 more monsters
};

const monster_data district2_monsters[]
{
    { 500, 20,  4 }, // monster1
    { 750,  5, 12 }, // MONSTER2B <<
    { 420,  8, 10 }, // monster3
    { 310, 30,  7 }, // monster4
    // monsters 5 - 80 from district 1
};

const monster_data district3_monsters[]
{
    { 500, 20,  4 }, // monster1
    { 550,  5, 12 }, // monster2
    { 720, 80, 10 }, // MONSTER3B <<
    { 310, 30,  7 }, // monster4
    // monsters 8 - 90 from district 1
}; 
```

我不想复制和粘贴数组数据，而是想以某种方式继承它，因为不同版本之间的数据基本保持不变。复制整个`struct`数组声明只是为了有一个稍微不同的变体似乎是错误的方式。太糟糕了，第 2 区和第 3 区只是**不**附加数据，它们修改并省略了现有条目。当然，它们也改变了不止一个怪物。

此外，1区怪物数据的变化也应适用于2区和3区。

另一个问题是有些地区的怪物数据与地区 1,2 和 3 完全无关。

```
const monster_data district4_monsters[]
{
    { 100, 20, 10 }, // monster 401
    { 200, 50, 20 }, // monster 402
    { 300, 40,  5 }, // monster 403
    { 400, 30, 30 }, // monster 404
    // 20 more monsters unrelated to district 1,2 & 3
}; 
```

**现在的问题是**：如何更改概述的设计，以`monster_data`避免多余的声明，并且可以添加`monster_data`从现有声明派生或使用全新声明的地区？

奖励积分，如果您的设计确保怪物统计列表的每个变体只能有一个工厂实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:56:12.513

这可以通过[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)优雅地解决，方法是用每一层的变化装饰“默认”表：

```
class MonsterTable
{
  public:
    virtual monster_data const* getMonsterForIndex(int i)=0;
};

class DefaultMonsterTable : public MonsterTable
{
  public:

    monster_data const* getMonsterForIndex(int i)
    {
      return district1_monsters+i;
    } 
};

class OverlayMonsterTable : public MonsterTable
{
public:
  //public for brevity, should be private in real code - can also be std::map
  std::unordered_map<int, monster_data> OverlayData;

  // Init this with the "previous layer", which is always the Default table in your examples
  MonsterTable* Decorated;

  monster_data const* getMonsterForIndex(int i)
  {
    typedef std::unordered_map<VGLindex, monster_data>::const_iterator Iterator;
    Iterator Overlay=OverlayData.find(i);
    if (Overlay!=OverlayData.end()) // Monster data was changed in this layer
      return &Overlay->second;

    return Decorated->getMonsterFromIndex(i); // Defer to next layer
  } 
}; 
```

然后，您会将较高区域中的所有“更改”添加到 OverlayData，并让 OverlayMonsterTable 引用默认表 (district1)。

为了支持省略数据，您可以添加另一个重新映射索引的装饰器“层”（例如，将 [0...80] 映射到 [0...10]、[30...100]），或者集成将此功能添加到现有的 OverlayMonsterTable 中。无论哪种方式，您都拥有充分的灵活性。例如：

```
class OmitMonsterTable : public MonsterTable
{
public:
  int OmitBegin, OmitEnd;
  MonsterTable* Decorated;

  monster_data const* getMonsterForIndex(int i)
  {
    if (i > OmitBegin)
      i += OmitEnd;

    return Decorated->getMonsterForIndex(i);
  } 
}; 
```

你的工厂只需要一个 MonsterTable 指针/引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:20:40.090

你一直使用“继承”这个词，但我绝对不会在这里考虑继承，你只有一种行为，即一种工厂类，你只想用不同的数据初始化工厂。

我会有一个包含所有不同`monster_data`值的大数组：

```
const monster_data all_data[] = {
  // district1_monsters
  { 500, 20,  4 }, // monster1
  { 550,  5, 12 }, // monster2
  { 420,  8, 10 }, // monster3
  { 310, 30,  7 }, // monster4
  // 100 more monsters
  // ...
  // district 2 monsters (index 104)
  { 750,  5, 12 }, // MONSTER2B <<
  // district 3 monsters (index 105)
  { 720, 80, 10 }, // MONSTER3B <<
  // district4 monsters (index 106)
  { 100, 20, 10 },
  { 200, 50, 20 },
  { 300, 40,  5 },
  { 400, 30, 30 },
  // 20 more monsters unrelated to district 1,2 & 3
  // ...
}; 
```

然后创建包含正确序列的序列：

```
typedef std::vector<monster_data> data_seq;

data_seq district1_data(all_data, all_data + 104);

data_seq district2_data(all_data, all_data + 80);
district2_data[2] = all_data[104];

data_seq district3_data(all_data, all_data + 3);
district3_data.push_back( all_data[105] );
district3_data.insert(district3_data.end(), all_data+8, all_data+90);

data_seq district4_data(all_data+106, all_data + 126); 
```

然后从这些序列创建工厂：

```
class monster_factory
{
public:
  monster_factory(const data_seq& monsters) ;
  monster* create_random_monster();
};

monster_factory district1_factory(district1_data);
monster_factory district2_factory(district2_data);
monster_factory district3_factory(district3_data);
monster_factory district4_factory(district4_data); 
```

如果`monster_data`类型只有三个整数应该没问题。如果它是一个更大的类，那么你可以制作`data_seq`一个`vector<const monster_data*>`，所以它只保存指向`all_data`数组元素的指针。这避免了复制`monster_data`对象，它们只存在于主`all_data`数组中，其他所有内容都通过指针引用这些主副本。这将需要更多的工作来创建向量对象，因为您需要用数组元素的地址填充它，而不是元素的简单副本，但这是您只需要在程序启动时做一次的事情，所以写更多的代码来做正确的事情是值得的：

```
struct address_of {
  const monster_data* operator()(const monster_data& m) const
  { return &m; }
};

// ...

typedef std::vector<const monster_data*> data_seq;

data_seq district1_data;
std::transform(all_data, all_data + 104,
               std::back_inserter(district1_data), address_of());

data_seq district2_data;
std::transform(all_data, all_data + 80,
               std::back_inserter(district2_data), address_of());
district2_data[2] = &all_data[104];

data_seq district3_data;
std::transform(all_data, all_data + 3,
               std::back_inserter(district3_data), address_of());
district3_data.push_back( all_data[105] );
std::transform(all_data+8, all_data + 90,
               std::back_inserter(district3_data), address_of());

data_seq district4_data;
std::transform(all_data+106, all_data + 126,
               std::back_inserter(district4_data), address_of()); 
```

为每个地区初始化序列的另一种可能更易于维护的方法是为每个地区设置索引数组：

```
int district1_indices[] = { 0, 1, 2, 3, 4, ... 103 };
int district2_indices[] = { 0, 1, 104, 3, 4, ... 79 };
int district3_indices[] = { 0, 1, 2, 105, 7, 8, 9, 10 ... 89 };
int district4_indices[] = { 106, 107, 108, 109 ... 125 }; 
```

然后用其中一个数组（及其长度）构造一个工厂。工厂可以从列表中选择一个索引，然后使用它来索引`all_data`以获得一个`monster_data`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:34:36.387

将数据存储在二进制文件中通常是不好的做法，并且无法扩展，尤其是在数据量很大的情况下。定义自己的支持简单数据继承的迷你语言，然后将其解析为包含`unordered_map`. 如果您需要的话，这将使您还能够实现简单的数据共享和更复杂的属性系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:46:14.360

为了完整起见，我将在 ltjax 发布他的答案之前发布我想出的设计，尽管我的效果较差。由于它采用不同的方法，因此其他人可能会感兴趣。

它把工厂和它的桌子结合在一起，因为桌子本身没有什么意义。表格的填充是在工厂的构造函数中完成的。这样其他工厂可以继承构造函数并对表进行更改。缺点是每个工厂都会创建自己的完整表，因此在运行时存储冗余数据。至少维护变得更容易。

这可以通过移动辅助方法来改进，`add`并`replace`移动`remove`到单独的表类以正确封装它们。但`monster_factory_abstract`在这种情况下基本上是空的，IMO。

```
class monster_factory_abstract
{
    private:
        monster_data* table; // or map with sequential indices
        int table_length;

        protected:
        // add monster to table
        void add(int HP, int strength, int speed, etc.); 

        // index starts with one to match monster names in this example
        void replace(int index, int HP, int strength, int speed, etc.); 
        void remove(int index); // nulls an entry
        void remove(int from, int to);

    public:
        virtual monster* create_random_monster();
}

class monster_factory_district1 : public monster_factory_abstract
{
    public:
        monster_factory_district1()
        {
            table_length = 0;

            add( 500, 20,  4 ); // monster1
            add( 550,  5, 12 ); // monster2
            add( 420,  8, 10 ); // monster3
            add( 310, 30,  7 ); // monster4
            // add 100 more monsters
        }
}; 

class monster_factory_district2 : public monster_factory_district1
{
    public:
        monster_factory_district2() : monster_factory_district1
        {
            replace( 2, 750,  5, 12 ); // MONSTER2B <<
            remove(81, 100);
        }
};

class monster_factory_district3 : public monster_factory_district1
{
    public:
        monster_factory_district3() : monster_factory_district1
        {
            replace( 3, 720, 80, 10 ); // MONSTER3B <<
            remove(5, 8);
            remove(91, 100);
        }
};

class monster_factory_district4 : public monster_factory_abstract
{
    public:
        monster_factory_district4() : monster_factory_abstract
        {
            table_length = 0;

            add( 100, 20, 10 ); // monster 401
            add( 200, 50, 20 ); // monster 402
            add( 300, 40,  5 ); // monster 403
            add( 400, 30, 30 ); // monster 404
        }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:23:11.463

一种解决方案可能是有一个包含“标准”怪物数据的基表，然后对于每个区域，您都有一个仅包含修改后怪物列表的表。

像这样的东西：

```
const monster_data base_monsters[] = {
    { 500, 20,  4 }, // monster1
    { 550,  5, 12 }, // monster2
    { 420,  8, 10 }, // monster3
    { 310, 30,  7 }, // monster4
    // 100 more monsters
};

struct monster_change_data
{
    int monster;               /* Index into base table */
    struct monster_data data;  /* Modified monster data */
};

const struct monster_change_data district2_monsters[] = {
    { 1, { 750,  5, 12 } }, // MONSTER2B
};

const struct monster_change_data district3_monsters[] = {
    { 2, { 720, 80, 10 } }, // MONSTER3B
}; 
```

这样你只需要列出改变的怪物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T08:33:21.523

当我要一个怪物时，我会在一个工厂经过该地区。然后我可以做类似的事情（仅限伪代码）

```
getMonster(int district)
{
    monster_data dat = getRandomBaseMonster();
    // dat has to be a copy so we don't stomp in the base data
    if (district == 2) {
        dat.HP += 10;
    }
    return dat;
} 
```

# java - Restlet + Embedded jetty + webapp

> ID：11537158
> 
> 赞同：1
> 
> 时间：2012-07-18T08:23:47.790
> 
> 标签：java, jetty, restlet, restlet-2.0

只是想知道这种设置是否可行：

1.  **Java 应用程序**运行和监控嵌入式码头服务器
2.  **部署在嵌入式码头中的**Restlet应用程序暴露 RESTful API****
***   基于 Java 的**Web 应用**程序（Spring、Play 等）部署在嵌入式码头并通过 Ajax 与 RESTful API 对话**

 **我知道 Restlet 可以通过码头连接器充当 HTTP 服务器的角色，但这并不是我真正需要的。我想要的是从 java 应用程序运行的 servlet 容器（嵌入式码头）并公开两个 Web 应用程序：RESTful API 和 webapp 客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:28:29.977

好的，所以就我而言，事实证明这比我想象的要容易。通过[此示例代码](http://www.restlet.org/documentation/2.1/jse/api/org/restlet/resource/Directory.html)指示 Restlet 提供一些静态内容就足够了：

```
Directory directory = new Directory(getContext(), "file:///user/data/files/");
Router router = new Router(getContext());
router.attach("/static/", directory); 
```

这不能完全回答我的问题，但它解决了我的问题。由于没有更多答案，我将关闭此问题。**

# javascript - 视频完成后重定向

> ID：11537163
> 
> 赞同：0
> 
> 时间：2012-07-18T08:24:02.267
> 
> 标签：javascript, html, video

> **可能重复：**
> [使用 html5 视频播放器播放视频后重定向页面](https://stackoverflow.com/questions/5208561/redirecting-the-page-after-a-video-plays-using-an-html5-video-player)

有没有办法重定向这个视频

```
<video class="video-js vjs-default-skin" id="player1" controls="controls" poster="video/image.jpg"    preload="auto" data-setup="{}" autoplay="autoplay">
        The browser you are using does not support viewing HTML5 Video,please open it in Chrome or Firefox .
</video> 
```

停止播放后？

我试过这个但没有用。

```
<script>
var video = document.getElementsById('player1');
    video.onended = function(e) {
      window.location.replace("http://stackoverflow.com");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:35:21.867

你可以做的是：

创建一个播放视频的按钮并设置一个带有视频长度的计时器。

类似的东西（我没有检查这个，只是一个快速的事情）

```
<script>
$("#button").click(function() {
$('#videoId').get(0).play();
setInterval(function(){window.location.replace("http://stackoverflow.com")}, $('#videoId').duration();
});
</script> 
```

# ruby - 在示例 RabbitMQ 应用程序中处理许多 unix 进程/线程

> ID：11537169
> 
> 赞同：1
> 
> 时间：2012-07-18T08:24:28.207
> 
> 标签：ruby, multithreading, scala, process, rabbitmq

我在玩[rabbitmq 教程](http://www.rabbitmq.com/getstarted.html)。我创建（在 jruby 中）生产者和几个消费者，并测试它发送简单的文本消息。我打开了许多终端（每个消费者一个）来获取输出。这是“丑陋”的解决方案，有什么更好的方法来做到这一点？

我想咨询一下如何使用 linux 程序、proccess、jruby thereads、线程、反应器模式来处理它。我也渴望了解有关此主题的更多信息。什么是推荐读物（维基百科、博客文章、书籍、免费电子书）？

也欢迎举例！

# haskell - 为什么haskell中的递归列表这么慢？

> ID：11537170
> 
> 赞同：6
> 
> 时间：2012-07-18T08:24:27.743
> 
> 标签：haskell, recursion

我对 Haskell 很陌生，我在 Haskell 中定义了一个函数：

```
febs :: (Integral a)=> a -> a
febs n 
    | n<=0 =0
    | n==1 =1
    | n==2 =1
    | otherwise =febs(n-1)+febs(n-2) 
```

但是，它运行得很慢，当我执行“febs 30”时，大约需要 10 秒，而我在 C++ 中执行相同的函数，它运行得非常快。

```
int febs(int n)
{
    if(n == 1 || n ==2)
    {
        return 1;
    }
    return febs(n-1)+febs(n-2);
} 
```

有什么方法可以提高我的 haskell func 速度吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-18T08:30:10.040

这是一个奇怪的比较，原因如下：

1.  你没有说你是否正在编译 Haskell 代码，或者有什么选项。如果您只是在 ghci 中运行它，那么它当然会很慢 - 您正在将解释代码与编译代码进行比较。

2.  您的 Haskell 代码是多态的，而您的 C++ 代码是单态的（也就是说，您使用了类型类`Integral a => a -> a`而不是具体类型`Int -> Int`）。因此，您的 Haskell 代码比您的 C++ 代码更通用，因为它可以处理任意大的整数，而不是被限制在`Int`. 编译器可能会对此进行优化，但我不确定。

如果我将以下代码放入文件 fib.hs

```
fibs :: Int -> Int
fibs n = if n < 3 then 1 else fibs (n-1) + fibs (n-2)

main = print (fibs 30) 
```

并编译它，`ghc -O2 fib.hs`然后它运行得足够快，以至于它对我来说是瞬时的。您应该尝试一下，看看它与 C++ 代码的比较。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T08:28:44.353

尝试使用优化进行编译。使用带有 -O2 的 GHC 7.4.1，您的程序运行得非常快：

```
$ time ./test 
832040

real    0m0.057s
user    0m0.056s
sys     0m0.000s 
```

这是与`main = print (febs 30)`.

* * *

关于 Chris Taylor 的回答中的多态性考虑，这里是`febs 40`OP 的多态斐波那契函数：

```
$ time ./test 
102334155

real    0m5.670s
user    0m5.652s
sys     0m0.004s 
```

这是一个非多态的，即用 OP 的签名替换为`Int -> Int`：

```
$ time ./test 
102334155

real    0m0.820s
user    0m0.816s
sys     0m0.000s 
```

根据 Tikhon Jelvis 的评论，看看加速是由于替换`Integer`为`Int`还是由于摆脱了多态性会很有趣。这又是同一个程序，除了`febs`根据 Daniel Fischer 的评论移动到一个新文件，并且 with `febs :: Integer -> Integer`：

```
$ time ./test 
102334155

real    0m5.648s
user    0m5.624s
sys     0m0.008s 
```

同样，`febs`在不同的文件中，并且具有与最初相同的多态签名：

```
$ time ./test 
102334155

real    0m16.610s
user    0m16.469s
sys     0m0.104s 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T08:35:14.517

你也可以这样写函数：

```
fibs = 0:1:zipWith (+) fibs (tail fibs) 
```

它非常快，即使对于大的“n”立即执行：

```
Prelude> take 1000 fibs 
```

# php - 无法将 HTTP 请求发送到后端服务器

> ID：11537172
> 
> 赞同：0
> 
> 时间：2012-07-18T08:24:35.093
> 
> 标签：php, android

我正在开发一个 android 应用程序来将 HTTP 数据发送到虚拟机中的后端服务器。

```
try{
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("192.168.1.150/application/check.php");
    params.add(new BasicNameValuePair("device", Build.SERIAL));
    params.add(new BasicNameValuePair("person", "A"));
    UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
    post.setEntity(ent);
    HttpResponse responsePOST = client.execute(post);  
    HttpEntity resEntity = responsePOST.getEntity();  
    if (resEntity != null) {    
        Log.i("RESPONSE",EntityUtils.toString(resEntity));
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

下面是php代码：

```
<?php
$file = "C:/wamp/www/application/file.txt";
$data = "device:".$_POST['device']." person:".$_POST['person'];
file_put_contents($file, $data);
?> 
```

但是，无法创建文件，因为我看不到输出，所以我无法确定应用程序是否可以成功连接到后端服务器。我的移动设备和服务器机器都在同一个wifi网络中，所以通过输入虚拟地址，我的应用程序应该能够连接到服务器，不是吗？

以下是 logcat 中的错误消息：

```
07-18 16:36:06.407: W/System.err(24598): android.os.NetworkOnMainThreadException
07-18 16:36:06.415: W/System.err(24598):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
07-18 16:36:06.415: W/System.err(24598):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
07-18 16:36:06.415: W/System.err(24598):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
07-18 16:36:06.415: W/System.err(24598):    at libcore.io.IoBridge.connect(IoBridge.java:112)
07-18 16:36:06.415: W/System.err(24598):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
07-18 16:36:06.415: W/System.err(24598):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
07-18 16:36:06.415: W/System.err(24598):    at java.net.Socket.connect(Socket.java:842)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-18 16:36:06.415: W/System.err(24598):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-18 16:36:06.423: W/System.err(24598):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-18 16:36:06.423: W/System.err(24598):    at android.reader.Reader$1.onClick(Reader.java:106)
07-18 16:36:06.423: W/System.err(24598):    at android.view.View.performClick(View.java:3511)
07-18 16:36:06.423: W/System.err(24598):    at android.view.View$PerformClick.run(View.java:14105)
07-18 16:36:06.423: W/System.err(24598):    at android.os.Handler.handleCallback(Handler.java:605)
07-18 16:36:06.423: W/System.err(24598):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-18 16:36:06.423: W/System.err(24598):    at android.os.Looper.loop(Looper.java:137)
07-18 16:36:06.423: W/System.err(24598):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-18 16:36:06.423: W/System.err(24598):    at java.lang.reflect.Method.invokeNative(Native Method)
07-18 16:36:06.423: W/System.err(24598):    at java.lang.reflect.Method.invoke(Method.java:511)
07-18 16:36:06.423: W/System.err(24598):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-18 16:36:06.423: W/System.err(24598):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-18 16:36:06.423: W/System.err(24598):    at dalvik.system.NativeStart.main(Native Method) 
```

修改应用程序后，logcat 中显示消息：

```
07-18 17:35:05.899: E/WindowManager(28043): Activity android.reader.Reader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416c3630 that was originally added here
07-18 17:35:05.899: E/WindowManager(28043): android.view.WindowLeaked: Activity android.reader.Reader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416c3630 that was originally added here
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
07-18 17:35:05.899: E/WindowManager(28043):     at android.app.Dialog.show(Dialog.java:278)
07-18 17:35:05.899: E/WindowManager(28043):     at android.reader.Reader$GrabURL.onPreExecute(Reader.java:219)
07-18 17:35:05.899: E/WindowManager(28043):     at android.reader.Reader$1.onClick(Reader.java:101)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.View.performClick(View.java:3511)
07-18 17:35:05.899: E/WindowManager(28043):     at android.view.View$PerformClick.run(View.java:14105)
07-18 17:35:05.899: E/WindowManager(28043):     at android.os.Handler.handleCallback(Handler.java:605)
07-18 17:35:05.899: E/WindowManager(28043):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-18 17:35:05.899: E/WindowManager(28043):     at android.os.Looper.loop(Looper.java:137)
07-18 17:35:05.899: E/WindowManager(28043):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-18 17:35:05.899: E/WindowManager(28043):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 17:35:05.899: E/WindowManager(28043):     at java.lang.reflect.Method.invoke(Method.java:511)
07-18 17:35:05.899: E/WindowManager(28043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-18 17:35:05.899: E/WindowManager(28043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-18 17:35:05.899: E/WindowManager(28043):     at dalvik.system.NativeStart.main(Native Method)
07-18 17:35:05.899: D/OpenGLRenderer(28043): Flushing caches (mode 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:32:21.777

首先，您的`HtttpPost`请求网址..

```
HttpPost post = new HttpPost("192.168.1.150/application/check.php"); 
```

应该是这样的，

```
HttpPost post = new HttpPost("http://192.168.1.150/application/check.php"); 
```

现在，其次，检查您的应用程序的清单文件是否有权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

第三个，

将完整的 Web 请求代码放在**后台线程**或 AsyncTask 中`doInBackGround()`，而不是在应用程序的**MainUI 线程**中。

最后，检查来自您的 Http 请求的**响应**，您得到了什么..

另外，如果可能的话，调试您的 Web-Request 代码，这样您就可以找到问题所在。

**解决方案：**

**根据您的Logcat**错误，我们得出结论，您正在尝试对Activity 的`MainUI Thread`. 因此，正如我在第三步中建议的那样，使用[AsyncTask进行此操作。](http://developer.android.com/reference/android/os/AsyncTask.html)

我回答的第三步。

将所有**HttpRequest**代码放入`AsyncYAsk's doInBackGround()`.

# codenameone - 进入主屏幕后应用程序重新启动

> ID：11537179
> 
> 赞同：2
> 
> 时间：2012-07-18T08:24:45.937
> 
> 标签：codenameone

我有一个使用[代号一设计的 android 应用程序](http://www.codenameone.com)

1）我运行我的应用程序

2）我点击手机的主页按钮。我的应用程序从我的应用程序中删除，主屏幕显示给我。

3）从菜单导航到我的应用程序后，我再次单击它。

我希望我的应用程序的状态能够恢复。但是会发生什么，我的应用程序重新启动。

此外，这种行为是任意的。有时应用程序会重新启动，有时应用程序会恢复其状态。大多数时候它会重新启动。

如何确保我的应用程序始终恢复其旧状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:07:06.113

Android 在某些情况下会重新启动正在运行的应用程序以保留 RAM、电池等。如果您使用任务切换器，应用程序将正常恢复，但重新启动它通常会重新启动它。

我们正在努力在 Codename One 的下一次更新中改进此行为，但您可以使用 stop 方法将应用程序状态存储到存储中，并使用 start 方法恢复应用程序状态。

# php - 如果字符串超过一定数量的字符，如何使用 MySQL 回显部分 UTF-8 varchar 字符串？

> ID：11537182
> 
> 赞同：0
> 
> 时间：2012-07-18T08:24:49.440
> 
> 标签：php, text, utf-8, substr

我目前正在使用 substr() 函数，该函数适用于用英文书写的字符。但是，当我将其应用于用希腊语书写的字符时，文本会在 3 个句号 (...) 之前出现一个奇怪的字符（菱形内的问号）。下面是代码，谢谢：

```
$string //a varchar string written in greek and called from the database 
if (strlen($string) > 200) {
    echo substr($string, 0, 200).'...';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:27:15.000

像这样使用[多字节函数](http://www.php.net/manual/en/ref.mbstring.php)：

```
mb_internal_encoding( "UTF-8" );

if( mb_strlen( $string ) > 200 ) {
   echo mb_substr( $string, 0, 200 ) . "...";
} 
```

普通函数适用于字节，并且没有您期望的任何字符意识。在 UTF-8 中使用常见英文字符的文本都是每个字符 1 个字节，因此正常功能意外地适用于它们。

# c# - 在 WinForms 中设计一个可取消的操作（保存挂起的更改）

> ID：11537183
> 
> 赞同：0
> 
> 时间：2012-07-18T08:24:51.090
> 
> 标签：c#, .net, winforms

我们正在开发一个使用一些自定义控件的 .NET 应用程序。

一个特定的控件是一个简单的“文本编辑器”，如控件，根据用户的选择将一些内容加载到其中。

如果用户修改此控件中的文本，然后做出不同的选择来覆盖该内容，我们希望通常的弹出窗口显示“您要保存挂起的更改吗？是/否/取消”。

我正在考虑应用程序的哪个级别应该对此负责：控件本身还是使用它的代码？

我一直在研究现有的 CancelEventArgs 类，并考虑使用它，但是我不确定这是否适合这种特定情况。

我正在考虑的示例代码：

设置自定义控件的文本时，引发“BeforeChanged”事件。这将被处理并允许取消操作。

```
public void SetText(string text)
{
    CancelEventArgs args = new CancelEventArgs();

    // Raise the BeforeTextChanged event.
    BeforeTextChanged(args);

    // If the user cancelled the operation - do not modify text.
    // For example, user code will check if needs saving, show the popup, etc.
    if (args.Cancel)
    {
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:34:07.793

在这两种情况下看起来都不错，但要保持逻辑一致；如果您已将文件加载/上下文加载封装在用户控件中，则保留使用事件。否则，在目标表单/控件上处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:59:52.157

我认为你不需要用事件来处理这个问题——它只会使事情复杂化。这是线性问题，弹出对话框会暂停当前线程，并为您提供足够的控制权来处理用户的决定。这种情况下的事件是“UserSelectionChanged”事件。不需要更多。

# javascript - chrome 扩展中的自定义打印预览

> ID：11537185
> 
> 赞同：3
> 
> 时间：2012-07-18T08:24:52.590
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发一个 Chrome 扩展，它需要自定义打印预览对话框（计算页数、实时开/关图像和字体大小更改）。

有没有办法将 javascript 插入到 chrome 打印预览中？或者，可能是，如何使用分页和其他打印预览属性创建我自己的预览？

# java - 在 android jni 中执行 shell 时出现以下错误

> ID：11537194
> 
> 赞同：1
> 
> 时间：2012-07-18T08:25:24.807
> 
> 标签：java, c++, c, java-native-interface, android-4.0-ice-cream-sandwich

我需要在**android native jni**中更改文件名（/system/etc/asound.conf） 。我可以通过运行 shell cmd 在串口中执行此操作：

```
mount -o remount rw /system
busybox mv /system/etc/asound.conf /system/etc/asoundback.conf
mount -o remount r /system 
```

首先，我通过调用 Runtime.getRuntiem(String) 在 java 中运行上面的 shell 脚本。这将导致所有 android 系统服务重新加载。所以我没有这样做。

我通过像这样调用 system() 在 jni 中运行 shell 脚本：

```
android_media_AudioSystem_changeFileName(JNIEnv *env, jobject thiz, jstring from, jstring to) 
{
    const jchar* c_from = env->GetStringCritical(from, 0); 
    String8 c_from8;
    if (from) {
        c_from8 = String8(c_from, env->GetStringLength(from));
        env->ReleaseStringCritical(from, c_from);
    }   

    const jchar* c_to = env->GetStringCritical(to, 0); 
    String8 c_to8;
    if (to) {
        c_to8 = String8(c_to, env->GetStringLength(to));
        env->ReleaseStringCritical(to, c_to);
    }   

    LOGV("*********** android_media_AudioSystem_changeFileName from: %s  ,to: %s" ,c_from8 ,c_to8);
    char buff[4096];
    sprintf(buff ,"mount -o remount rw /system;busybox mv %s %s;mount -o remount r /system" ,c_from8 ,c_to8);
    if(system(buff) == -1) return -1; 
    return 0;
} 
```

这没用。日志是：

```
[  197.520000] mclkdiv = 2, bitclkdiv = 12
D/ALSAModule( 1160): open called for devices 00000002 in mode 0...
E/ALSALib ( 1160): external/alsa-lib/src/pcm/pcm.c:2203:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback_Speaker_normal
E/ALSALib ( 1160): external/alsa-lib/src/pcm/pcm.c:2203:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback_Speaker
E/ALSALib ( 1160): external/alsa-lib/src/pcm/pcm.c:2203:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback
I/ALSAModule( 1160): Initialized ALSA PLAYBACK device defaul
D/SoundSettings( 2041): ******* audio channel: codec
D/SoundSettings( 2041): ******* before asound-----> asoundback
I/AudioSystem( 2041): *********** android_media_AudioSystem_changeFileName
F/libc    ( 2041): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
I/DEBUG   ( 1155): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 1155): Build fingerprint: 'android:4.0.3/IML74K/eng.android.20120717.210618:eng/test-keys'
I/DEBUG   ( 1155): pid: 2041, tid: 2041  >>> com.android.settings <<< 
I/DEBUG   ( 1155): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaadI/DEBUG   ( 1155):  r0 deadbaad  r1 00000001  r2 40000000  r3 00000000
I/DEBUG   ( 1155):  r4 00000000  r5 00000027  r6 62100021  r7 411afa18
I/DEBUG   ( 1155):  r8 be9b8644  r9 be9b864c  10 4786445b  fp be9b8684
I/DEBUG   ( 1155):  ip ffffffff  sp be9b8618  lr 40068f01  pc 40065660  cpsr 60000030
I/DEBUG   ( 1155):          #00  pc 00017660  /system/lib/libc.so
I/DEBUG   ( 1155):          #01  pc 0006f9de  /system/lib/libandroid_runtime.so
I/DEBUG   ( 1155):          #02  pc 0001ebf0  /system/lib/libdvm.so (dvmPlatformInvoke)
I/DEBUG   ( 1155):          #03  pc 00058c38  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
I/DEBUG   ( 1155):
I/DEBUG   ( 1155): code around pc: 
I/DEBUG   ( 1155): 40065640 4623b15c 2c006824 e026d1fb b12368db  \.#F$h.,..&..h#.
I/DEBUG   ( 1155): 40065650 21014a17 6011447a 48124798 24002527  .J.!zD.`.G.H'%.$
I/DEBUG   ( 1155): 40065660 f7f47005 2106ef70 effef7f5 460aa901  .p..p..!.......F
I/DEBUG   ( 1155): 40065670 f04f2006 94015380 94029303 ebc8f7f5  . O..S..........
I/DEBUG   ( 1155): 40065680 4622a905 f7f52002 f7f4ebd2 2106ef5c  .."F. ......\..!
I/DEBUG   ( 1155):
I/DEBUG   ( 1155): code around lr: 
I/DEBUG   ( 1155): 40068ee0 41f0e92d 46804c0c 447c2600 68a56824  -..A.L.F.&|D$h.h
I/DEBUG   ( 1155): 40068ef0 e0076867 300cf9b5 dd022b00 47c04628  gh.....0.+..(F.G
I/DEBUG   ( 1155): 40068f00 35544306 37fff117 6824d5f4 d1ee2c00  .CT5...7..$h.,..
I/DEBUG   ( 1155): 40068f10 e8bd4630 bf0081f0 000285fa 41f0e92d  0F..........-..A
I/DEBUG   ( 1155): 40068f20 fb01b086 9004f602 461f4815 4615460c  .........H.F.F.F
I/DEBUG   ( 1155):
I/DEBUG   ( 1155): memory map around addr deadbaad: 
```

有人可以帮助我吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:29:36.510

我不是跟踪日志方面的专家，但据我所知，你有：

```
1\. Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

这意味着内存损坏，deadbaad 意味着内存损坏..

```
2\. I/DEBUG   ( 1155): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaadI/DEBUG   ( 1155):  r0 deadbaad  r1 00000001  r2 40000000  r3 00000000 
```

这意味着注册表为空或 0..

我无法进一步帮助，因为我不知道你在做什么，但我猜你在某个地方读错了..

# eclipse - 在 Eclipse 构建路径中包含文件？

> ID：11537201
> 
> 赞同：2
> 
> 时间：2012-07-18T08:25:56.790
> 
> 标签：eclipse, buildpath

通过右键单击，构建路径并从构建路径中排除，我从 Eclipse 的构建路径中排除了几个文件。现在我想在构建路径中再次包含这些文件。我找不到任何可以再次包含的选项。任何建议。

我正在使用 Eclipse 3.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:28:35.390

右键单击项目并选择“构建路径..”-> 配置构建路径。然后您可以将它们包含在适当的选项卡中（可能是“源”选项卡）。

# objective-c - 如何使 UIScrollView 对捏不那么敏感

> ID：11537204
> 
> 赞同：1
> 
> 时间：2012-07-18T08:26:12.877
> 
> 标签：objective-c, uiscrollview, uigesturerecognizer

我有一个启用缩放的 UIScrollView。此启用缩放的滚动视图位于另一个 UIScrollView 内。外部滚动视图应接收两个手指平移/滑动以切换页面。这是我的问题，UIScrollView 可以将两个手指平移/滑动视为手指，但如果内部滚动视图启用缩放，则内部滚动视图中的捏合手势识别器将非常敏感。任何微小的两指移动都将被解释为捏合手势，它会阻止外部滚动视图接收两指平移。是否可以更改 UIScrollView 中捏合的灵敏度。

我确实看到 UIPinchGestureRecognizer 中有一个名为 _scaleThreshold 的 @package 变量，但它是包变量，无法在外部访问。我不可能改变它。

我想知道是否有办法使 UIScrollView 中的捏合手势的阈值更大。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:26:09.910

您可以设置 UIPinchGestureRecognizer 的比例和速度道具，其中之一可能适合您想要的。

**编辑：**或者你可以调用 requireGestureRecognizerToFail:recognizerYouDontWantInterfering merhod 你想要生效的任何手势。

# javascript - 复杂的 JS 对象

> ID：11537205
> 
> 赞同：0
> 
> 时间：2012-07-18T08:26:15.993
> 
> 标签：javascript, json, google-visualization, webtrends

我正在处理一个相当复杂的 JSON 数组，包括在下面。我正在尝试创建包含访问的 Country 对象数组。这是数组的示例：

```
{
   "data":[
      {
         "period":"Month",
         "start_date":"2012-06",
         "end_date":"2012-07",
         "attributes":{

         },
         "measures":{
            "Visits":1000000
         },
         "SubRows":[
            {
               "Unknown":{
                  "measures":{
                     "Visits":1000
                  },
                  "SubRows":null
               },
               "**":{
                  "measures":{
                     "Visits":1000
                  },
                  "SubRows":null
               },
               "Afghanistan":{
                  "measures":{
                     "Visits":1000
                  },
                  "SubRows":null
               },
               "Aland Islands":{
                  "measures":{
                     "Visits":1000
                  },
                  "SubRows":null
               },
               "Albania":{
                  "measures":{
                     "Visits":100
                  },
                  "SubRows":null
               },
            }
         ]
      }
   ]
} 
```

我过去常常使用`data[0].SubRows[0]`一系列国家对象，但现在我很难过如何在下面进行一个，因为每个子对象的名称都不同？我的预期输出是针对 Google Visualization API，如下所示：

```
var data = google.visualization.arrayToDataTable([
  ['Country', '% Visits'],
    ['United Kingdom', 1000],
    ['United States', 1000],
    ['France', 1000],
    ['Australia', 1000],
]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:33:01.993

用于...在语句中：

```
var Country = JSONObject['data']['SubRows'];
var Data = {};
for(name in Country)
{
    Data[name] = Country[name]['measures']['Visits'];
} 
```

应该很容易将其与您的需求相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:43:00.660

Glibnes 提出了`for in`建议，坚持使用您的变量名（顺便说一句：在 JS 中，这些是对象，而不是数组……好吧，数组是对象，但我不会那么迂腐）。

```
var measures = {};
for (var cName in data[0].SubRows[0])//your country objects
{//it's always a good idea to check if a property is set directly to the object
 //if not, inheritance chain properties will show up here, too
    if (data[0].SubRows[0].hasOwnProperty(cName))
    {
        //assuming this object will Always be set, if not: check first
        measures[cName] = data[0].SubRows[0][cName].measures.Visits;
    }
} 
```

`measures`现在将是一个一级对象，其中国家是键，值是访问。随意添加额外的检查，或直接使用这些值来构建内容或......

如果我理解正确的话，你真正需要的是一个数组数组：

```
var result = [['Country', '% Visits']];
for (var cName in data[0].SubRows[0])//your country objects
{
    if (data[0].SubRows[0].hasOwnProperty(cName))
    {
        result.push([cName,data[0].SubRows[0][cName].measures.Visits]);
    }
} 
```

`result`现在将是一个数组，由数组组成，每个数组有 2 个值。`result[x][0]`-> 国家和`result[x][1]`-> 措施的价值。访问：

```
result[1][0] === 'United Kingdom' && result[1][1] == 1000 
```

# windows-phone-7 - Windows 8 开发中 Metro 风格应用程序的数据库？

> ID：11537206
> 
> 赞同：3
> 
> 时间：2012-07-18T08:26:17.473
> 
> 标签：windows-phone-7, windows-8, microsoft-metro

嗨，我正在开发一个 Metro 风格的应用程序，我将在其中连接到 Web 服务并从 Web 服务获取数据，并将其绑定到 UI。

但是我的要求是在我的应用程序中我需要创建表并提供表之间的关系并将数据转储到该本地数据库中并使用该数据调用我的服务应用程序中存在的其他方法（通过传递一些东西作为输入）。

您能否向我解释以下内容：-

Metro 风格应用程序支持的数据库是什么？

如何创建数据库并创建表并转储作为服务应用程序响应的数据？

我是 Metro 风格应用程序开发的新手，请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:42:06.297

首先，WinRT 对数据库的支持很差。大多数此类事情是由 Web 服务、OData 等完成的

但我几乎 100% 确定您可以使用 SQLite。在 codeplex 上有从 Win8 Metro 应用程序到 SQLite DB 的连接器，因此请查看此主题。我还在 MS 页面的某处看到 SQLite 在某种程度上得到了支持。核实

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:41:10.207

Fixus 说的是对的。就个人而言，由于我的应用程序没有大量数据要在本地存储（它违反 Metro 准则来存储大量数据）我将对象序列化而不是本地存储。需要时，如果互联网可用，将调用服务并更新本地数据。

如果您选择使用 SQLlite，请确保您使用的是真正的交易而不是第三方数据库，因为如果您想让应用程序被 Windows 商店接受，数据库库必须得到 Microsoft 的批准。我什至不确定 SQLite 是否已获得批准，但从表面上看，它们将是。

Tim Heuer 总是写关于这个主题的精彩文章，[这篇文章可能会对你有所帮助](http://timheuer.com/blog/archive/2012/06/05/howto-video-using-sqlite-in-metro-style-app.aspx)

如果您需要有关在 WinRT 中进行序列化的帮助，请告诉我。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:36:50.047

我们建议使用带有[LinqConnect](http://www.devart.com/linqconnect/)的 SQLite 数据库- Devart 的 LINQ to SQL 兼容解决方案，它支持 SQLite 引擎（由[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)提供）。您可以在我们的产品中使用 LINQ 和 ADO.NET 接口。从 4.0 版本开始，LinqConnect 支持 Windows Metro 应用程序：http: [//blogs.devart.com/dotconnect/linqconnect-for-metro-quick-start-guide.html](http://blogs.devart.com/dotconnect/linqconnect-for-metro-quick-start-guide.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T11:53:56.960

如果您要构建的应用程序必须在没有任何网络连接的情况下继续工作，并且需要在某个时间点进行同步，则有必要保留一个本地数据库。

您可以阅读以下文章，其中包含一些基本指南和示例。

[http://blogs.msdn.com/b/win8devsupport/archive/2013/01/10/using-database-in-windows-store-apps-i.aspx](http://blogs.msdn.com/b/win8devsupport/archive/2013/01/10/using-database-in-windows-store-apps-i.aspx)

# objective-c - 无法分配 iOS MFMailComposeViewController

> ID：11537207
> 
> 赞同：1
> 
> 时间：2012-07-18T08:26:18.697
> 
> 标签：objective-c, ios, sendmail

我下载了一个使用的示例项目，`MFMailComposeViewController`要求是框架 MessageUI，并设置了`MFMailComposeViewControllerDelegate`.

但是当单步执行代码时

```
MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
mailController.mailComposeDelegate = self; 
```

`mailController`没有得到有效的地址 0x0，这意味着它没有分配内存。不知道不能分配。我检查了示例代码并正确分配了它。

有什么不同？为什么不能分配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:36:44.993

杰森，

您可能没有在设备/模拟器上配置任何邮件帐户。您可能应该首先检查设备是否可以使用

```
+ (BOOL)canSendMail 
```

[MFMailComposeViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)类的方法。

MessageUI 框架中的一般方法是，如果未配置帐户，则在创建时返回 nil 对象。

# java - 为什么我们要创建一个 PoolableConnectionFactoryObject

> ID：11537213
> 
> 赞同：0
> 
> 时间：2012-07-18T08:26:31.810
> 
> 标签：java, jdbc-pool

所以，我意识到数据库池可能有比 JDBC 更好的选择，但仍有一些东西让我发疯。在所有示例代码中，他们建议像这样进行池化。

```
GenericObjectPool connectionPool = new GenericObjectPool(null);

ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(url, un, pw);

PoolableConnectionFactory poolableConnectionFactory = 
           new PoolableConnectionFactory(connectionFactory, connectionPool, null, "SELECT 1", false, true);
PoolingDataSource dataSource = new PoolingDataSource(connectionPool);

return dataSource; 
```

为什么要创建 PoolableConnectionFactory？它从未使用过，从查看源代码来看，我看不出它实际上将构造函数中的任何东西联系在一起，或者除了设置它自己的私有变量之外还有什么神奇的作用。JDBC 站点的信息相当神秘，我对源代码的所有挖掘都让我感到困惑。有理由这样做吗？显然，您也可以只用 new 实例化对象，而无需实际将其分配给变量，这就足够了……让我更加困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:32:15.843

假设这些类是 commons-DBCP 类，则将`PoolableConnectionFactory`正在创建的实例注册为作为参数传递的池的工厂的构造函数：

```
_pool = pool;
_pool.setFactory(this); 
```

因此，创建工厂会创建它，并让池在需要时使用它来创建新连接。

# sitecore - 在 Sitecore 中的所有项目上删除安全设置并重置布局和插入选项？

> ID：11537217
> 
> 赞同：1
> 
> 时间：2012-07-18T08:26:42.247
> 
> 标签：sitecore, sitecore6

我有一个 Sitecore 6.5 项目，我已经从早期版本升级了所有内容。但是在升级过程中似乎出了点问题，这导致所有项目都具有`extranet\everyone`可以`deny read`访问的安全设置，即使情况并非如此。此外，布局和插入选项需要重置并从模板标准值中获取值。

我可以在 Sitecore UI 中手动执行此操作，但这需要相当长的时间，因为有 3000 多个项目。

有什么办法可以用某种快速修复来修补它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:24:02.093

您可以在 ASPX 中编写一个为您执行此操作的脚本，也可以安装 PowerShell 模块并使用它编写脚本。这取决于您的经验以及可用的工具。不幸的是，没有用于重置所有内容项的布局和插入选项的内置方法。

# php - PHP：在某些地方运行函数（preg_callback？）

> ID：11537221
> 
> 赞同：0
> 
> 时间：2012-07-18T08:27:10.340
> 
> 标签：php, preg-replace, eval, preg-replace-callback

只要有 [%xxx%] （如果愿意，可以充当占位符），我都会尝试运行一个函数，例如：

```
Bla bla bla blabla. Blablabla bla bla.
[%hooray%]
Blabla hey bla bla. [%yay%] blabla bla. 
```

我几乎是一个 PHP 初学者，但我设法破解了我的头脑并想出了以下内容（对我来说是的 - 我不知何故设法理解了正则表达式的基础知识！）：

```
$maintext = preg_replace("#\[%(.{1,20})%\]#", "display_products('$1')"), $maintext);
echo $maintext; 
```

我尝试使用**e**修饰符，我尝试使用 preg_replace_callback，这一切都有些工作 - 但我不需要在回显 $maintext 变量之前运行该函数。

对这些人有帮助吗？

**编辑** 正则表达式不是问题 - 工作正常。只有当我回显 $maintext 时，我才需要弄清楚如何运行该函数... preg_replace_callback 立即运行该函数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:51:50.103

因为 PHP 是一种单线程过程式脚本语言¹，所以它不能按照您希望的方式工作。

`echo`^(只有当您调用2)时才能触发函数运行，您需要的是一个额外的变量。

```
$newVariable = preg_replace_callback("#\[%(.{1,20})%\]#", function($matches) {
  // Do your thang here
}, $maintext);

// $maintext remains the same as it was when you started, do stuff with it here

// When you come to output the data, do...
echo $newVariable; 
```

还有其他解决这个问题的方法，比如将上面的代码包装在一个可以按需调用的函数中，并使用输出缓冲回调（参见脚注#2），但是在字里行间阅读我认为所有这些都太过分了是一个比较简单的问题。

作为记录，我认为如果您将允许的内容缩小到它的范围内，您的正则表达式会更好，它可能会匹配您不想要的字符。我怀疑这会更好：

```
#\[%(\w{1,20})%\]# 
```

这将只允许`a-zA-Z0-9_`占位符中的字符。

* * *

¹ *其他人可能会告诉您 PHP 现在是一种面向对象的语言，但他们错了。它在底层仍然基本工​​作，它仍然是一种脚本语言，但现在提供了许多 OO 功能。*
² *可以做一些与此非常接近的事情，但这很少是一个好主意，而且对于处理这个问题来说太先进了。*

* * *

**编辑**

需要注意的是，当使用任一方法通过回调（`e`修饰符或`preg_replace_callback()`）传递替换时，回调函数应*返回*新字符串，而不是直接输出。

这是因为任何语句中的代码都是由内而外执行的，而“内”`echo`语句（在回调函数中）会在“外”`echo`语句（在`preg_replace()`被调用的那一行）之前执行，所以事情的顺序输出将不正确。

例如：

```
$str = "This is my string which contains a %placeholder%";

echo preg_replace_callback('/%(\w+)%/', function($matches) {
  echo "replacement string";
}, $str);
// Wrong - outputs "replacement stringThis is my string which contains a "

echo preg_replace_callback('/%(\w+)%/', function($matches) {
  return "replacement string";
}, $str);
// Right - outputs "This is my string which contains a replacement string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:18:07.010

如果您有一个多次使用 echo 的脚本并且您希望修改打印的文本，您可以使用输出缓冲：

```
ob_start();
/*
 * Lots of php code
*/

$maintext = ob_get_clean(); // now you capture the content in $maintext 

// than you modify the output
$maintext = preg_replace("#\[%(.{1,20})%\]#", "display_products($1)", $maintext);
echo $maintext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:40:01.583

ob_start 接受一个回调函数，你可以阅读更多关于这个主题： [让所有 PHP 文件输出在显示之前通过一个“过滤文件”](https://stackoverflow.com/questions/1164392/making-all-php-file-output-pass-through-a-filter-file-before-being-displayed)

# java - 出于语法原因，是否值得使用长度为 2 的数组而不是两个变量？

> ID：11537224
> 
> 赞同：4
> 
> 时间：2012-07-18T08:27:32.493
> 
> 标签：java, arrays, performance, syntax

所以我正在实现我自己的二叉搜索树，并注意到一个丑陋的 if 语句经常以我的方式出现（这可能不是最好的方式，但这不是我们正在讨论的），基于是否节点的孩子是左孩子或右孩子，例如：

```
if (leftChild)
    parent.setLeft(child.getRight());
else
    parent.setRight(child.getRight()); 
```

然后我想到了这个：

```
parent.setChild(childIndex, child.getRight()); 
```

其中 childIndex 是一个早先确定的字节，其中 leftChild 将被确定。

正如您所看到的那样更简洁，但是要以这种方式使用它，我要么必须在 setChild 方法中使用 if 语句，要么将子项表示为长度为 2 的数组。如果我们在这里假装这个 BST 需要最大化性能/空间效率，将子节点引用的存储切换为 2 元素数组，而不是一对变量（甚至只是将 if 语句隐藏在 setChild 方法中）会是一种什么样的权衡。

我知道在现实世界中这可能并不重要，但我仍然对哪种方法是最好的方法感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T08:33:29.573

据我了解，您要问的是，以下两者中哪一个更有效：

```
if (condition)
    x = value
else
    y = value 
```

和

```
xyArray[index] = value 
```

首先，任何答案都取决于编译器和/或 JVM 实现，因为 JLS 没有提及任何类型语句的任何执行时间。

话虽如此，我*怀疑*`if`- 语句会稍微快一些，因为 JVM 不必计算任何数组偏移量并检查数组边界。

无论如何，这对我来说听起来像是**过早的优化**。根据**哪种方法最容易*阅读*和*调试***来选择方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:41:31.627

我相信，如果存储为两个字段，您将不会只有一个`if`，您的代码将与它们一起爬行。`if`有两个字段而不是另一个堆分配的对象——一个完整的对象，具有通常的开销，这很可能更有效，并且在内存方面也更有效。如果你的树真的非常非常大（数百万个节点），这**是**一个问题。此外，如果每个节点的有效负载与开销相比很小。

# c# - 在 db 字段数组上调用 LINQ to SQL Any() 时抛出 ArgumentException

> ID：11537226
> 
> 赞同：0
> 
> 时间：2012-07-18T08:27:36.170
> 
> 标签：c#, linq, linq-to-sql, search

我尝试重构以下代码（按类别和搜索词过滤一些数据库记录）：

```
from entry in _DB.TheTable
join otherEntry in _DB.AnotherTable
on entry.PrimaryKey equals otherEntry.Field
where category.Any(String.IsNullOrWhiteSpace) 
   || category.Contains(entry.ProductGroup)
where String.IsNullOrWhiteSpace(searchTerm)
   || entry.ProductNumber.Contains(searchTerm)
   || otherEntry.Name1.Contains(searchTerm)
   || otherEntry.Name2.Contains(searchTerm)
   || otherEntry.Name3.Contains(searchTerm)
select new {entry.Something, entry.SomethingElse}; 
```

看起来像这样：

```
from entry in _DB.TheTable
join otherEntry in _DB.AnotherTable on entry.PrimaryKey equals otherEntry.Field
let searchFields = new[]{entry.ProductNumber, otherEntry.Name1, otherEntry.Name2,/*...*/}
where category.Any(String.IsNullOrWhiteSpace) 
   || category.Contains(entry.ProductGroup)
where String.IsNullOrWhiteSpace(searchTerm) 
   || searchFields.Any(field=>field.Contains(searchTerm))
select new {entry.Something, entry.SomethingElse}; 
```

不幸的是，LINQ to SQL 似乎无法做到这一点：我`ArgumentException`从代码中得到一个`searchFields.Any(field=>field.Contains(searchTerm))`说明

> 参数`value`类型错误。预期：`System.String.`实际：`System.String[].`

我该如何调整它才能工作？

编辑：对不起，忘了说`searchTerm`是一个`string`，`category`是一个`string[]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:20:08.907

我发现的唯一解决方法是将所有要搜索的字段连接到一个字符串中，并检查搜索词是否包含在其中。当然，这可能会返回误报，并且必须在字段之间插入分隔符以防止这种情况发生。

```
from entry in _DB.TheTable
join otherEntry in _DB.AnotherTable on entry.PrimaryKey equals otherEntry.Field
let searchFields = entry.ProductNumber + otherEntry.Name1 + otherEntry.Name2 
                   + otherEntry.Name3
where category.Any(String.IsNullOrWhiteSpace) 
        || category.Contains(entry.ProductGroup)
where String.IsNullOrWhiteSpace(searchTerm)
        || searchFields.Contains(searchTerm)
select new {entry.Something, entry.SomethingElse}; 
```

我仍然愿意寻求更好的解决方案，如果他们提供其他答案，我会接受。与此同时，我已经回到问题中显示的原始版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:46:40.933

**编辑**：这里给出的解决方案不正确

*您遇到的问题是包含只能获取字符串值，并且您正在传递字符串 []。我在想也许你可以`searchTerm.Contains(field)`正确设置`Any`函数的条件，因为`field`变量是一个字符串，你正在寻找的值`searchTerm` 我希望这可以帮助你。再见！*

# asp.net-mvc-3 - 将 elmah 记录器与 nuget 安装程序一起使用并修改 Web 配置

> ID：11537229
> 
> 赞同：0
> 
> 时间：2012-07-18T08:27:44.017
> 
> 标签：asp.net-mvc-3, elmah

我在我的 asp.net mvc 应用程序中使用了以前版本的 elmah，我不得不修改 web 配置。例如，我必须添加以下行：

```
<system.webServer>
.....
    <handlers>
          <remove name="MvcHttpHandler" />
          <remove name="UrlRoutingHandler" />
          <add name="Elmah" verb="POST,GET,HEAD" path="elmah.axd" preCondition="integratedMode" type="Elmah.ErrorLogPageFactory, Elmah" />
          <add name="MvcHttpHandler" preCondition="integratedMode" verb="*" path="*.mvc" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        </handlers>
</system.webServer>

    <system.web>
....
 <httpHandlers>
      <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    </httpHandlers>
</system.web> 
```

但是现在，安装了nuget，是否需要手动修改 web.config ？

# java - 使用 Vagrant 时为 Chef 预缓存下载

> ID：11537233
> 
> 赞同：4
> 
> 时间：2012-07-18T08:28:21.850
> 
> 标签：java, chef-infra, vagrant

我正在使用 Vagrant 和 Chef 来自动设置开发节点。我需要安装 Oracle Java，遗憾的是不能再从 Oracle 自动下载：

> 重要说明 自 2012 年 3 月 26 日起，您将无法再从 Oracle 网站直接下载 JDK，而无需使用成熟的浏览器。出于这个原因，java::oracle 配方会强制您设置一个可通过 HTTP 访问的私有存储库。最好使用角色覆盖虚拟 URL。

我想将下载的 JDK 与我的 Vagrantfile 捆绑在一起，以便可以自动安装它，而无需在内部 Web 服务器上发布 JDK。有没有办法可以将文件注入到 chef-solo 的文件缓存中，以便在安装配方时找到它？

chef-solo 食谱似乎不支持 file_cache_path 属性。我曾想过将其设置为 Vagrant 共享的文件夹，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T16:50:44.010

使用社区 java 食谱并设置

```
override['java']['oracle']['accept_oracle_download_terms'] = true 
```

这就是我在所有服务器上安装 java 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:46:53.420

对于我们安装的许多软件包，我们如何解决这个问题是创建一个本地 squid 代理服务器，供我们使用 Vagrant 启动的实例使用。

我们第一次下载包时，它会按照您的预期运行。但是在接下来的运行中，东西被缓存在本地并且运行得更快。

当然，这并不能解决您使用 Oracle JDK 的具体问题，因为您无法将其作为配方的一部分下载。

# sql - SQL+Openxml+如何存储NVARCHAR数据

> ID：11537242
> 
> 赞同：0
> 
> 时间：2012-07-18T08:28:57.917
> 
> 标签：sql, openxml

您好，我正在使用以下存储过程将 xml 数据插入表中。

```
PROCEDURE [dbo].[ExpertSystem_SET_QuestionData]
@XmlQue     NVARCHAR(MAX)
AS
set nocount on
 DECLARE @XmlHdl INT 

BEGIN

SET @XmlQue=N''+@XmlQue

EXEC sp_xml_preparedocument @XmlHdl OUTPUT,@XmlQue

    INSERT INTO ExpertSystem_Master 
    SELECT QIdx,@TemplateId,QDetailsx,IsYesx,IsNox,Eligibleyesx,Eligiblenox,0,0
    FROM 
    OPENXML(@XmlHdl,'/Template/QueInfo',1)
    WITH
    (    QIdx           INT '@QId',
         QDetailsx      Ntext '@QDetails',
         IsYesx         Ntext  '@IsYes', 
         IsNox          Ntext  '@IsNo', 
         Eligibleyesx   CHAR(1) '@Eligibleyes',
         Eligiblenox    CHAR(1) '@Eligibleno'
    )
   END 
```

在这种情况下，我将值传递给参数

```
ExpertSystem_SET_QuestionData '<?xml version="1.0" encoding="UTF-16"?><Template TId="1"><QueInfo QId="1" QDetails="Are you " IsYes="Yes" IsNo="No" Eligibleyes="Y" Eligibleno="N"/><QueInfo QId="2" QDetails="  राज्य  " IsYes="Yes" IsNo="No" Eligibleyes="Y" Eligibleno="N"/><QueAns QId="1" isMsgFlag="N" Msg="you are not Eligible"/><QueAns QId="2" isMsgFlag="N" Msg="you are not eligible"/></Template>' 
```

数据已插入，但插入为**?????** 而不是**“राज्य”**。

当我将程序称为

```
ExpertSystem_SET_QuestionData 'N<?xml version="1.0" encoding="UTF-16"?><Template TId="1"><QueInfo QId="1" QDetails="Are you Domicile of maharashtra" IsYes="Yes" IsNo="No" Eligibleyes="Y" Eligibleno="N"/><QueInfo QId="2" QDetails="Have you passed Secondary  School 10th Examination?महाराष्ट्र राज्य मार्ग परिवहन महामंडळ " IsYes="Yes" IsNo="No" Eligibleyes="Y" Eligibleno="N"/><QueAns QId="1" isMsgFlag="N" Msg="you are not Eligible"/><QueAns QId="2" isMsgFlag="N" Msg="you are not eligible"/></Template>' 
```

我收到错误消息“XML 解析错误 0xc00ce556 发生在第 1 行，靠近 XML 文本“N”

你能帮我解决这个问题吗，因为该过程是在运行时调用的，所以任何数据都可以传递给@XmlQue 变量。那么我应该如何在@XmlQue 变量中附加“N”？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:45:18.133

应该在`N`xml 值之前。

```
ExpertSystem_SET_QuestionData N'<?xml version="1.0" ... 
```

# php - 如何使用 FTP 将 WordPress 网站从 localhost 上传到实际的网站 URL？

> ID：11537244
> 
> 赞同：-4
> 
> 时间：2012-07-18T08:29:08.063
> 
> 标签：php, mysql, wordpress, hosting

我想将我的 wordpress 网站从本地主机上传到我的实际网站。

> 我应该怎么做才能使网站可以访问远程服务器上的 MySQL 数据库，就像它在 localhost 上一样？我无权访问远程服务器，它的 mysql 用户 ID 和密码。

第二，

> 当用户注册并等待接收帐户激活链接时，我也无法通过我的网站从本地主机发送电子邮件。如何分别在 localhost 和远程服务器上配置它？

以后想在本地进行修改，然后上传到真实的URL。我怎样才能做到这一点？

我的本地主机使用：

*   FileZilla
*   PHP 5.3
*   MySQL 5
*   WordPress 3.4.1
*   phpMyAdmin

在 Windows 上

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:02:35.357

您必须更改 wp-config.php 并将 localhost 替换为您数据库中的网站路径。

```
Like: http://localhost/wordpress

with

http://www.abc.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:38:11.640

**您需要将数据库结构复制到您的网站主机，如果您使用 phpmyadmin 导出数据库然后在您的主机上重新导入它，您将需要在wp_options**表中将 localhost 替换为您的 URL ，查找 siteurl 和 home 字段。

将数据库复制到复制网站文件之后，您将需要编辑 wp-config.php 文件以指向新数据库。

# ios - 带有故事板的 RSS 提要 iOS 应用程序？

> ID：11537249
> 
> 赞同：2
> 
> 时间：2012-07-18T08:29:26.760
> 
> 标签：ios, xcode, storyboard

我见过带有 .xib 版本的 RSS 提要的应用程序。是否有任何可以在故事板 iOS5 上运行的示例 RSS 提要应用程序？

# c++ - 从 OSx 上的自定义 url 打开 carbon c++ 程序

> ID：11537252
> 
> 赞同：0
> 
> 时间：2012-07-18T08:29:49.877
> 
> 标签：c++, macos, url, command-line-arguments, macos-carbon

我已经能够为我的项目设置 plist 以使用给定的 url 打开项目。但是，我无法将参数传递给应用程序（自定义 url 是基于用户构建的）

有没有办法将参数作为命令行参数传递？

该方案本质上是 url:userid

我需要能够在应用程序中获取用户 ID。有没有办法做到这一点？我知道使用可可你可以创建一个应用程序委托来处理这个问题，但我需要一种碳方式来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:03:43.337

安装 Apple 事件处理程序以识别 URL（套件和事件名称都具有相同的四字符代码“GURL”）。

事件的直接对象是一个 URL 字符串。我希望该字符串包含整个原始 URL，包括编码到其中的任何参数（例如，如果您的自定义方案是`xyz://some/data?param1=abc&param2=def`，您应该收到所有这些）。

另一个重要步骤是在您的文件中注册为该 URL 类型的处理程序`Info.plist`。继续阅读以`CFBundleURLTypes`了解更多信息。

# python - 检查某些扩展名但它不起作用

> ID：11537253
> 
> 赞同：0
> 
> 时间：2012-07-18T08:29:55.187
> 
> 标签：python

所以我有以下问题，这不起作用：

```
if any(x in pageName for x in ('.jpg','.gif','.txt','pdf','.msi','print'
                                   '.ppt','.pptx','javascript:',
                                       '.xls','#','.xlsx','.doc', 'ftp'
                                '.docx','mailto:','.xml','.tar.gz','.png'
                                )):  
            print pageName
            return [] 
```

这是有效的，所以我的代码中有什么问题，任何想法：

```
if any(x in pageName for x in ('print')):  
        print pageName
        return [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:33:30.613

```
any(x in pageName for x in ('print')) 
```

`True`如果任何字母`p`、`r`、 和出现在 中`i`，则返回。这真的是你想要的吗？`n``t``pagename`

要检查`"print"`你只需要

```
if "print" in pagename: 
```

如果您确实想让它可扩展，请使用

```
if any(x in pageName for x in ('print',)): 
```

（注意逗号？这会创建一个元组。否则，括号将被忽略。）

# php - 是否有可能知道该函数是否从 PHP 的 eval() 中调用？

> ID：11537254
> 
> 赞同：2
> 
> 时间：2012-07-18T08:29:55.097
> 
> 标签：php, eval

我正在寻找一个函数，该函数将根据它的调用方式返回。

如果我从一个 php 类或函数中调用该函数，它将返回一个数组，而如果它是从一个`eval()`语句中调用的，那么它将返回一个字符串。

说函数如下：

```
function GetName(){
    return isEval ? 'John Doe' : array('John','Doe');
} 
```

是否可以用某种东西替换 isEval 以检测它是否是从内部调用的`eval()`？

更新：这将成为 CMS 系统的一部分。我需要提供一些已经内置的功能才能公开使用。我知道使用 eval() 会产生安全风险，但仍然想知道是否有可能。

传递参数肯定可以完美地工作，但如上所述，不想通过提供该选项而被滥用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:51:13.550

唯一包含您想要的信息的函数是`debug_backtrace`. 因此，您可以执行以下操作：

```
function getName(){
    $debug = debug_backtrace();

    //check $debug array. I think it should
    //be in the 2nd element of array:
    if ($debug[1]['function'] == 'eval') { 
       //Do Eval stuff.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:32:57.360

为什么不在函数中添加参数？如果 eval 则为 true，否则为 false。

```
function GetName(eval){
    if(eval)
       //TODO IF EVAL
    else
       //TODO IF NOT EVAL
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:37:49.853

当您从`eval`pass`true`作为参数调用时，以下函数应该可以工作。

```
function GetName(isEval = false){
    return isEval ? 'John Doe' : array('John','Doe');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:51:49.883

鉴于这里已经有两个答案，建议将参数传递给函数，这让我想到了重载函数，所以你可以亲自传递另一个参数来表明它不是通过 an 传递的，`eval()`但当然[PHP 不会支持函数重载](http://www.php.net/manual/en/language.oop5.overloading.php)。

*但是*，您可以编写函数来接受可选参数，然后使用 func_num_args() 和 func_get_arg() 来确定已发送的内容。如果未发送可选参数，您可以轻松安全地假设它正在被`eval()`'ed 并且您可以使其相应地采取行动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:19:19.530

```
function isEval()
{
    foreach(array_reverse(debug_backtrace()) as $v) {
        return $v['function'] === 'eval';
    }
}

function isEval() { // updated by code90
    foreach(array_reverse(debug_backtrace()) as $v) {
        if($v['function'] === 'eval') return true;
    }

    return false; }

function myFunc()
{
    return isEval() ? "is eval\n" : "is not eval\n";
}

function callAnotherFunction()
{
    return myFunc();
}

function myFunctionWithEval()
{
    eval('$return = myFunc();');
    return $return;
} 
```

测试

```
echo "myFunc() without eval: " . myFunc();
eval("echo 'myFunc() whit eval: ' . myFunc();");

echo "callAnotherFunction() without eval: " . callAnotherFunction();
eval("echo 'callAnotherFunction() with eval: ' . callAnotherFunction();");

echo 'myFunctionWithEval() with eval: ' . myFunctionWithEval(); 
```

输出

```
myFunc() without eval: is not eval
myFunc() whit eval: is eval
callAnotherFunction() without eval: is not eval
callAnotherFunction() with eval: is eval
myFunctionWithEval() with eval: is not eval <--- PROBLEM! 
```

myFunctionWithEval 使用 eval 调用 myFunc。你不能保证它什么时候被调用 eval。可以给出假阳性。

你应该考虑另一种方法来进行。**不应该使用**这种方法！

另一种选择，但我始终建议**不要使用**：

```
function isEval()
{
    return isset($GLOBALS['__MyEval']) && $GLOBALS['__MyEval'] === true;
}

function myFunc()
{
    return isEval() ? "is eval\n" : "is not eval\n";
}

function myFunctionWithEval()
{
    $GLOBALS['__MyEval'] = true;
    eval('$return = myFunc();');
    $GLOBALS['__MyEval'] = null;

    return $return;
}

echo "myFunctionWithEval() with eval: " . myFunctionWithEval(); 
```

# java - 如何使用 Java 反射或任何其他技巧实现接口？

> ID：11537255
> 
> 赞同：0
> 
> 时间：2012-07-18T08:29:55.163
> 
> 标签：java, android, reflection, interface

有没有办法实现我用于开发的Android SDK版本中不存在但通过反射或其他方式存在于更高版本的Android版本中的接口？

我需要实现接口“WebViewClassic.TitleBarDelegate”，它（以及 WebViewClassic 类）出现在 API-16 中，但在早期的 API 中不存在。不将开发升级到 API-16 怎么办？

它必须由我从 WebView 派生的自定义类实现，因为 WebView 实现调用此接口的方法。

因此，或者可以在调用时在运行时将一种方法替换为另一种方法？

或者也许最终出现了一些在一个包中发布不同 API 版本的方法？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:39:50.073

也许您可以从 Android Sources 中获取相关文件并将它们放入您的项目中？当有人需要稍微调整这些课程时，我已经在某些课程中看到了这一点。不过不确定你的情况。

# css - LESS CSS：嵌套时滥用 & 运算符？

> ID：11537260
> 
> 赞同：13
> 
> 时间：2012-07-18T08:30:15.740
> 
> 标签：css, css-selectors, less

Less 使用`&`Operator 来增强[嵌套的可能性](http://lesscss.org/features/#features-overview-feature-nested-rules)。

```
.header        { color: black;
  .navigation  { font-size: 12px;
    &.class    { text-decoration: none }
  }
} 
```

这会导致`&`用父选择器替换 ，并导致将实际选择器权串联到父选择器：`.header .navigation.class`而不是正常的附加，这将导致`.class`成为后代：`.header .navigation .class`。

现在还可以进行以下操作（[另请参见此处](https://stackoverflow.com/a/11522508/1047823)）：

```
.header        { color: black;
  .navigation  { font-size: 12px;
    #some-id & .foo   { text-decoration: none }
  }
} 
```

这将导致以下结果：`#some-id .header .navigation .foo` [try here](http://winless.org/online-less-compiler)。替换发生了，我在我的父选择器**前面添加**了一个选择器 ( )。`#some-id`

除了我永远不会这样编码的事实，因为这可能很快就会弄乱你的样式表，我的问题是：

**由于没有记录此功能，它是一个功能还是更可能是一个错误？
哪些是可能的副作用？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T15:22:51.863

[自从我们在您提到的那个问题中](https://stackoverflow.com/questions/11519931/less-css-accessing-classes-further-up-the-dom-tree-from-within-a-nested-class/11522508#11522508)遇到它以来，我也一直在进一步思考这种用途。虽然我不能明确地回答这是一个“错误”用途`&`（BoltClock 似乎提出了一个很好的论点，即它*不是*错误），但我想论证它的价值（它认为这不是逻辑上的错误）立场）。

然而，在逻辑论证之前，我确实找到[了另一个简短的引用](https://github.com/cloudhead/less.js/wiki)（在“嵌套规则”部分中），这似乎表明它至少不是无意的：“`&`代表当前选择器父级。” 就是这样。正如 BoltClock 所说，前置或附加似乎无关紧要。所有的意图是它是那个“选择器父级”的占位符，直到那个时候。它总是与语言的“嵌套”使用一起提到的事实意味着它旨在指定嵌套的完整选择器字符串，直到它所在的嵌套点。如何使用该字符串（预先或附加）似乎取决于编码器。

现在，您提到（和之前提到的）您“永远不会以这种方式编码”，但我发现自己看到了似乎非常有价值的用途。考虑以下论点。

## 插图的 HTML 设置

假设，为了说明，在`body`元素上存在三个可能的类（'light'、'medium'、'dark'主题）的动态设置来改变站点的“外观”。我们有两列，我们希望在每个主题的每一列中以不同的方式设置一些不同类型的链接（`textLink`, `picLink`, ）。`textWithIconLink`

```
<body class="light">
  <div class="leftCol">
     <a class="textLink"></a>
     <a class="picLink"></a>
     <a class="textWithIconLink"></a>
  </div>
  <div class="rightCol">
     <a class="textLink"></a>
     <a class="picLink"></a>
     <a class="textWithIconLink"></a>
  </div>
</body> 
```

***现在要问的问题是，只需查看以下两种方法的链接，它们...***

1.  LESS 中的代码更少
2.  最好的组织 LESS 中的代码
3.  在 CSS 中输出更少的代码
4.  最好的组织输出的 CSS

“最佳”可能有点主观。我会让你从下面自己权衡这些证据。

## 选项 #1 典型嵌套

**LESS**（大约 99 行代码）

```
/*Light Color Theme */
    .light {
      .leftCol {
        .textLink {
          color: fooL1;
          &:hover { color: barL1;}
        } 
        .picLink {
          background-image: url(/fooL1.jpg);
          &:hover { background-image: url(/barL1.jpg);}
        }
        .textWithIconLink {
          color: fooL2;
          background-image: url(/fooL2.jpg);
          &:hover { color: barL2; background-image: url(/barL2.jpg);}
        }   
      }
      .rightCol {
        .textLink {
          color: fooL3;
          &:hover { color: barL3;}
        } 
        .picLink {
          background-image: url(/fooL3.jpg);
          &:hover { background-image: url(/barL3.jpg);}
        }
        .textWithIconLink {
          color: fooL4;
          background-image: url(/fooL4.jpg);
          &:hover { color: barL4; background-image: url(/barL4.jpg);}
        }   
      }
    }
/*Medium Color Theme */
    .medium {
      .leftCol {
        .textLink {
          color: fooM1;
          &:hover { color: barM1;}
        } 
        .picLink {
          background-image: url(/fooM1.jpg);
          &:hover { background-image: url(/barM1.jpg);}
        }
        .textWithIconLink {
          color: fooM2;
          background-image: url(/fooM2.jpg);
          &:hover { color: barM2; background-image: url(/barM2.jpg);}
        }   
      }
      .rightCol {
        .textLink {
          color: fooM3;
          &:hover { color: barM3;}
        } 
        .picLink {
          background-image: url(/fooM3.jpg);
          &:hover { background-image: url(/barM3.jpg);}
        }
        .textWithIconLink {
          color: fooM4;
          background-image: url(/fooM4.jpg);
          &:hover { color: barM4; background-image: url(/barM4.jpg);}
        }   
      }
    }
/*Dark Color Theme */
    .dark {
      .leftCol {
        .textLink {
          color: fooD1;
          &:hover { color: barD1;}
        } 
        .picLink {
          background-image: url(/fooD1.jpg);
          &:hover { background-image: url(/barD1.jpg);}
        }
        .textWithIconLink {
          color: fooD2;
          background-image: url(/fooD2.jpg);
          &:hover { color: barD2; background-image: url(/barD2.jpg);}
        }   
      }
      .rightCol {
        .textLink {
          color: fooD3;
          &:hover { color: barD3;}
        } 
        .picLink {
          background-image: url(/fooD3.jpg);
          &:hover { background-image: url(/barD3.jpg);}
        }
        .textWithIconLink {
          color: fooD4;
          background-image: url(/fooD4.jpg);
          &:hover { color: barD4; background-image: url(/barD4.jpg);}
        }   
      }
    } 
```

**CSS 输出**（大约 87 行输出，当然按主题组织）

```
 /*Light Color Theme */
.light .leftCol .textLink { color:fooL1; }
.light .leftCol .textLink:hover { color:barL1; }
.light .leftCol .picLink { background-image:url(/fooL1.jpg); }
.light .leftCol .picLink:hover { background-image:url(/barL1.jpg); }
.light .leftCol .textWithIconLink {
  color:fooL2;
  background-image:url(/fooL2.jpg);
}
.light .leftCol .textWithIconLink:hover {
  color:barL2;
  background-image:url(/barL2.jpg);
}
.light .rightCol .textLink { color:fooL3; }
.light .rightCol .textLink:hover { color:barL3; }
.light .rightCol .picLink { background-image:url(/fooL3.jpg); }
.light .rightCol .picLink:hover { background-image:url(/barL3.jpg); }
.light .rightCol .textWithIconLink {
  color:fooL4;
  background-image:url(/fooL4.jpg);
}
.light .rightCol .textWithIconLink:hover {
  color:barL4;
  background-image:url(/barL4.jpg);
}
/*Medium Color Theme */
.medium .leftCol .textLink { color:fooM1; }
.medium .leftCol .textLink:hover { color:barM1; }
.medium .leftCol .picLink { background-image:url(/fooM1.jpg); }
.medium .leftCol .picLink:hover { background-image:url(/barM1.jpg); }
.medium .leftCol .textWithIconLink {
  color:fooM2;
  background-image:url(/fooM2.jpg);
}
.medium .leftCol .textWithIconLink:hover {
  color:barM2;
  background-image:url(/barM2.jpg);
}
.medium .rightCol .textLink { color:fooM3; }
.medium .rightCol .textLink:hover { color:barM3; }
.medium .rightCol .picLink { background-image:url(/fooM3.jpg); }
.medium .rightCol .picLink:hover { background-image:url(/barM3.jpg); }
.medium .rightCol .textWithIconLink {
  color:fooM4;
  background-image:url(/fooM4.jpg);
}
.medium .rightCol .textWithIconLink:hover {
  color:barM4;
  background-image:url(/barM4.jpg);
}
/*Dark Color Theme */
.dark .leftCol .textLink { color:fooD1; }
.dark .leftCol .textLink:hover { color:barD1; }
.dark .leftCol .picLink { background-image:url(/fooD1.jpg); }
.dark .leftCol .picLink:hover { background-image:url(/barD1.jpg); }
.dark .leftCol .textWithIconLink {
  color:fooD2;
  background-image:url(/fooD2.jpg);
}
.dark .leftCol .textWithIconLink:hover {
  color:barD2;
  background-image:url(/barD2.jpg);
}
.dark .rightCol .textLink { color:fooD3; }
.dark .rightCol .textLink:hover { color:barD3; }
.dark .rightCol .picLink { background-image:url(/fooD3.jpg); }
.dark .rightCol .picLink:hover { background-image:url(/barD3.jpg); }
.dark .rightCol .textWithIconLink {
  color:fooD4;
  background-image:url(/fooD4.jpg);
}
.dark .rightCol .textWithIconLink:hover {
  color:barD4;
  background-image:url(/barD4.jpg);
} 
```

## 选项 #2 结束目标分组

我将其命名为“结束目标分组”，因为这就是我看到的`&`以其他方式添加父选择器的方式。现在一个是根据实际设置样式的最终目标元素进行编码。

**LESS**（大约 88 行代码）

```
/*Links */
/*Text  Links*/
.textLink {
  .light .leftCol &  {
      color: fooL1;
      &:hover { color: barL1;}
    }      
  .light .rightCol &  {
      color: fooL3;
      &:hover { color: barL3;}
    } 
  .medium .leftCol &  {
      color: fooM1;
      &:hover { color: barM1;}
    } 
  .medium .rightCol &  {
      color: fooM3;
      &:hover { color: barM3;}
    } 
  .dark .leftCol &  {
      color: fooD1;
      &:hover { color: barD1;}
    } 
  .dark .rightCol &  {
      color: fooD3;
      &:hover { color: barD3;}
    } 
}
/*Picture Links */
.picLink {
  .light .leftCol &  {
      background-image: url(/fooL1.jpg);
      &:hover { background-image: url(/barL1.jpg);}
    } 
  .light .rightCol &  {
      background-image: url(/fooL3.jpg);
      &:hover { background-image: url(/barL3.jpg);}
    } 
  .medium .leftCol &  {
      background-image: url(/fooM1.jpg);
      &:hover { background-image: url(/barM1.jpg);}
    } 
  .medium .rightCol &  {
      background-image: url(/fooM3.jpg);
      &:hover { background-image: url(/barM3.jpg);}
    } 
  .dark .leftCol &  {
      background-image: url(/fooD1.jpg);
      &:hover { background-image: url(/barD1.jpg);}
    } 
  .dark .rightCol &  {
      background-image: url(/fooD3.jpg);
      &:hover { background-image: url(/barD3.jpg);}
    } 
}
/*Text with Icon Links */
.textWithIconLink {
  .light .leftCol &  {
      color: fooL2;
      background-image: url(/fooL1.jpg);
      &:hover { color: barL2; background-image: url(/barL1.jpg);}
    } 
  .light .rightCol &  {
      color: fooL4;
      background-image: url(/fooL3.jpg);
      &:hover { color: barL4;  background-image: url(/barL3.jpg);}
    } 
  .medium .leftCol &  {
      color: fooM2;
      background-image: url(/fooM1.jpg);
      &:hover { color: barM2; background-image: url(/barM1.jpg);}
    } 
  .medium .rightCol &  {
     color: fooM4;
      background-image: url(/fooM3.jpg);
      &:hover { color: barM4; background-image: url(/barM3.jpg);}
    } 
  .dark .leftCol &  {
     color: fooD2;
      background-image: url(/fooD1.jpg);
      &:hover { color: barD2; background-image: url(/barD1.jpg);}
    } 
  .dark .rightCol &  {
      color: fooD4;
      background-image: url(/fooD3.jpg);
      &:hover { color: barD4; background-image: url(/barD3.jpg);}
    } 
} 
```

**CSS**（大约 88 行输出 [由于一个额外的注释]，按最终目标元素组织；但请注意，由于类结构，仍然按主题进行子组织）

```
/*Links*/
/*Text  Links*/
.light .leftCol .textLink { color:fooL1; }
.light .leftCol .textLink:hover { color:barL1; }
.light .rightCol .textLink { color:fooL3; }
.light .rightCol .textLink:hover { color:barL3; }
.medium .leftCol .textLink { color:fooM1; }
.medium .leftCol .textLink:hover { color:barM1; }
.medium .rightCol .textLink { color:fooM3; }
.medium .rightCol .textLink:hover { color:barM3; }
.dark .leftCol .textLink { color:fooD1; }
.dark .leftCol .textLink:hover { color:barD1; }
.dark .rightCol .textLink { color:fooD3; }
.dark .rightCol .textLink:hover { color:barD3; }
/*Picture Links */
.light .leftCol .picLink { background-image:url(/fooL1.jpg); }
.light .leftCol .picLink:hover { background-image:url(/barL1.jpg); }
.light .rightCol .picLink { background-image:url(/fooL3.jpg); }
.light .rightCol .picLink:hover { background-image:url(/barL3.jpg); }
.medium .leftCol .picLink { background-image:url(/fooM1.jpg); }
.medium .leftCol .picLink:hover { background-image:url(/barM1.jpg); }
.medium .rightCol .picLink { background-image:url(/fooM3.jpg); }
.medium .rightCol .picLink:hover { background-image:url(/barM3.jpg); }
.dark .leftCol .picLink { background-image:url(/fooD1.jpg); }
.dark .leftCol .picLink:hover { background-image:url(/barD1.jpg); }
.dark .rightCol .picLink { background-image:url(/fooD3.jpg); }
.dark .rightCol .picLink:hover { background-image:url(/barD3.jpg); }
/*Text with Icon Links */
.light .leftCol .textWithIconLink {
  color:fooL2;
  background-image:url(/fooL1.jpg);
}
.light .leftCol .textWithIconLink:hover {
  color:barL2;
  background-image:url(/barL1.jpg);
}
.light .rightCol .textWithIconLink {
  color:fooL4;
  background-image:url(/fooL3.jpg);
}
.light .rightCol .textWithIconLink:hover {
  color:barL4;
  background-image:url(/barL3.jpg);
}
.medium .leftCol .textWithIconLink {
  color:fooM2;
  background-image:url(/fooM1.jpg);
}
.medium .leftCol .textWithIconLink:hover {
  color:barM2;
  background-image:url(/barM1.jpg);
}
.medium .rightCol .textWithIconLink {
  color:fooM4;
  background-image:url(/fooM3.jpg);
}
.medium .rightCol .textWithIconLink:hover {
  color:barM4;
  background-image:url(/barM3.jpg);
}
.dark .leftCol .textWithIconLink {
  color:fooD2;
  background-image:url(/fooD1.jpg);
}
.dark .leftCol .textWithIconLink:hover {
  color:barD2;
  background-image:url(/barD1.jpg);
}
.dark .rightCol .textWithIconLink {
  color:fooD4;
  background-image:url(/fooD3.jpg);
}
.dark .rightCol .textWithIconLink:hover {
  color:barD4;
  background-image:url(/barD3.jpg);
} 
```

## 结论性想法

其他一些考虑：

首先，您的大多数主题颜色（以及可能的其他主题方面）将设置有变量，即使使用上面的选项＃2，也可以按主题将其分组在 LESS 代码的顶部——因此具有输出的主题结构CSS 本身散落在代码中不一定是坏事。

其次，任何类型元素的“标准”代码都定义在任何主题代码之上。我的示例没有显示这一点，而是说所有`.textLink`元素都已`text-decoration: none;`设置。这将在选项 #2 下发生一次，无需任何进一步的选择器代码，并将出现在下面所有主题更改的上方。对于选项#1，我需要设置一个新的、*未嵌套* `.textLink`的选择器（至少另一行代码）以将其应用于所有主题链接，并且该类的“基本”代码将再次与 where 无关主题链接信息的其余代码是。

第三，作为开发人员，如果我的`picLinks`（页面上的特定类型元素）有问题，选项 #2 可以更轻松地检查我遇到问题的元素的代码，因为我的所有代码都适用于所有主题就在一处。

***显然，最终 LESS 和 CSS 的组织方式将成为人们如何看待其价值的主要因素。***我的意思是仅仅证明有一个非常有用的、合乎逻辑的理由以`&`这种方式将父级选择器添加到`&`引用中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T08:40:30.803

这根本不是对`&`组合器的滥用；您可以将它*放在*嵌套选择器中的任何位置，它会被它上面的任何东西替换（它所谓的父选择器）：

> `&`当您希望将嵌套选择器连接到其父选择器而不是充当后代时，使用[组合器]。

请注意，它说的是“连接”；它并不是说您只能将父选择器添加或附加到嵌套选择器。连接仅在任何特定方向上都不起作用。

此外，“后代”一词与嵌套选择器的性质有关，它们被视为默认情况下由后代组合器链接。这绝不会固有`&`地仅限于后代的使用，也不意味着父选择器必须以嵌套选择器只能附加到它的方式来表示父或祖先元素，而不是前置或什至插入它的中间。

# javascript - jquery 源代码，带有换行符的类名？

> ID：11537261
> 
> 赞同：3
> 
> 时间：2012-07-18T08:30:16.333
> 
> 标签：javascript, jquery

今天看了一下jQuery函数removeClass的源码：
有如下一行：

```
className = (" " + elem.className + " ").replace( rclass, " " ); 
```

r类：

```
rclass = /[\n\t\r]/g, 
```

在 David Flanagan 的《JavaScript The Definitve Guide》一书中，第 6 版，第 438 页有以下句子：

> ...，因此 HTML 类属性可用于使用名称 className 的 JavaScript 代码。...并且 class 属性包含一个以空格分隔的类名列表。

为什么 jQuery 编码人员假设类名也可以由制表符和换行符分隔？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T08:33:07.133

许多网络“开发人员”对他们在做什么几乎一无所知，因此编写了包含例如制表符或换行符分隔的类名的蹩脚代码。

“读之宽，写之严”是一个共同的原则，即接受不真正遵循$标准的东西，但从不创造这样的东西。

# java - 与 Web 应用程序对话的独立 java 类

> ID：11537263
> 
> 赞同：0
> 
> 时间：2012-07-18T08:30:21.647
> 
> 标签：java, spring, hibernate

我正在开发一个基于 Spring 框架和 hibernate 的非常复杂的 java web 应用程序，我必须创建一个普通的 java 类（使用 main 方法）并将其导出为 .jar 文件；此类包含一个由操作员每月手动安排的程序。调度的结果将在 Web 应用程序页面 (JSP) 上进行查询。

我需要像这样使用 jar 文件：java -jar myfile.jar arguments ....

有没有办法做到这一点 ？

如何导出从 spring 和 hibernate 派生的所有依赖项？

PS 我尝试使用 MyEclipse 导出 jar 文件，但是当我尝试运行 jar 时，它找不到 spring 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:35:58.280

首先标题是错误的，你需要一个独立的应用程序。

其次，每个像样的 java IDE 都应该提供导出 jar 的选项。例如，在日食中：

1.  右键单击项目
2.  选择导出
3.  选择可运行的 jar 文件

另一种选择是使用[ant](http://ant.apache.org/)或[maven](http://maven.apache.org/)等构建工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:36:23.240

打包依赖是一个与 Hibernate、Spring、Guice 或用于为狗生成随机名称的 Java 库没有严格联系的主题。

*   您需要的第一件事是构建系统，如果您正在处理一个非常复杂的 java web 应用程序，我希望您拥有它，并且您不会让您的 ide 构建。

*   一旦您的构建系统（例如 Maven）正常工作，您就可以查看打包扩展。在 Maven 中，这称为程序集插件。

# iphone - 具有奇怪行为的 UINavigationController

> ID：11537265
> 
> 赞同：0
> 
> 时间：2012-07-18T08:30:27.133
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uinavigationcontroller

我正在开发具有以下结构的应用程序， ![在此处输入图像描述](../Images/15d74ee71945726bad01fae4ff8ed030.png)

这三个组件中的每一个都有一个与之关联的 UINavigationController。

此应用程序旨在与 facebook 相同。

我的问题是，在横向模式下，导航的“POP”动作有一个奇怪的表现，使动画从底部到顶部，好像导航没有完成旋转，尽管布局被更改为横向。

我把所有的导航控制器都放在：

```
 [navCenter.navigationBar setAutoresizesSubviews:YES];
 [navCenter shouldAutorotateToInterfaceOrientation:YES]; 
```

知道为什么会这样吗？

提前致谢。

编辑：如果我删除我的

```
[self addChildViewController:self.mainConteinar]; 
```

动画效果很好。但是现在，NavigationBars 没有调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:44:50.747

你应该检查你所有的

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

您所描述的听起来好像您忘记在您的一个子视图控制器中为横向返回 YES 。

# python - 结合 Qgraphics 和 sqlalchemy 时出现元类错误

> ID：11537266
> 
> 赞同：1
> 
> 时间：2012-07-18T08:30:32.493
> 
> 标签：python, sqlalchemy, pyside, metaclass

我想`QGraphicsItem`使用 sqlalchemy 使 s 持久化。轻松地将 Base 类与 PySide 类结合起来会产生关于元类的错误。metaclsses 主题是 Python 的魔力，我不想在不需要时深入研究它。有没有一种简单的方法来解决这个元类冲突？

```
class MarketItem(Base, QtGui.QGraphicsEllipseItem, QtGui.QListWidgetItem):
    """
    """
        __tablename__       = "marketitem"
    Id                  = Column(Integer(4), primary_key=True)
    name                = Column(String(40))
    x_pos               = Column(Integer(4))
    y_pos               = Column(Integer(4))
    def __init__(self, x_pos, y_pos, scene, name, style=QtCore.Qt.SolidLine,
                 rect=None, matrix=QtGui.QTransform(), cat = None):
        super(MarketItem, self).__init__()
        self.setFlags(QtGui.QGraphicsItem.ItemIsSelectable|
                      QtGui.QGraphicsItem.ItemIsMovable|
                      QtGui.QGraphicsItem.ItemIsFocusable)
        self.pos = QtCore.QPoint(x_pos, y_pos)
        self.x_pos = x_pos
        self.y_pos = y_pos
        self.name = name 
```

给出错误：

```
 File "C:\Users\Richard\Documents\manAmpl\aptana\mampl\pm15ConeModel.py", line 47, in <module>
    class MarketItem(Base, QtGui.QGraphicsEllipseItem, QtGui.QListWidgetItem):
TypeError: Error when calling the metaclass bases
    metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:43:19.827

之前有人问过一个类似的问题，它[的答案](https://stackoverflow.com/a/7314847/241039)帮助我为你找到了一个可能的解决方案。

```
class CommonMetaclass(type(QtCore.Qt), type(Base)):
    pass

class MarketItem(QtGui.QGraphicsEllipseItem, QtGui.QListWidgetItem, Base):
    __metaclass__ = CommonMetaclass
    __tablename__ = "marketitem"
    ... 
```

我能够像这样声明这个类，不确定它是否真的可用。

如果有问题，请尝试在这两个类定义中更改父类的顺序。

对于 Python 3，此代码段必须稍作修改，但您对 Python 3 只字未提，遗憾的是，版本 2 现在是“默认”...

# vb.net - 我想在 Visual Basic 中使用字符串动态设置一些对象的属性

> ID：11537267
> 
> 赞同：0
> 
> 时间：2012-07-18T08:30:37.080
> 
> 标签：vb.net

我正在尝试在 Visual Basic 中做一些相当简单的事情。

我希望能够指定以下对象属性

```
coltitle1.visible= false

coltitle2.visible= false

coltitle3.visible= false

coltitle4.visible= false

coltitle5.visible= false

coltitle6.visible= false

coltitle7.visible= false

coltitle8.visible= false
coltitle9.visible= false
coltitle10.visible= false 
```

我想像这样使用 for next 循环......

```
 Dim f
  Dim output As String = ""
    For f = 1 To 10
       output = String.Concat("coltitle", f)
      output.visible = False
    Next 
```

但是，我知道 (output.visible = False) 行是错误的。如何使用我创建的字符串来设置对象的属性？

任何帮助将不胜感激。并为糟糕的编码道歉:)

干杯，卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:55:14.523

您在代码中所做的只是创建一堆字符串，然后将它们命名为类似的方式。您需要做的是遍历对象（一切都是对象），然后设置属性。在您的情况下，您需要遍历对象，然后将每个对象的可见属性设置为 False。

由于我在工作，我没有时间编写一些示例代码，但下面的链接应该可以帮助您解决问题。

希望你做得好

麦克风

[http://www.techrepublic.com/article/iterating-through-all-controls-on-the-form-with-vbnet/6157618](http://www.techrepublic.com/article/iterating-through-all-controls-on-the-form-with-vbnet/6157618)

[http://justinberke.blogspot.co.uk/2010/02/loop-through-controls-in-vb.html](http://justinberke.blogspot.co.uk/2010/02/loop-through-controls-in-vb.html)

# android - 下载和缓存图像的最佳解决方案

> ID：11537274
> 
> 赞同：0
> 
> 时间：2012-07-18T08:30:56.510
> 
> 标签：android, image, caching

我有一个关于缓存下载图像的最佳解决方案的问题。从互联网上下载了我想用 specifig 标签显示的图像的 URL。在其他一些活动中将显示图像预览，单击预览后将显示全尺寸图像和他的描述。我的想法是将有关图像的信息保存到数据库中，并带有以缓存目录中的标记命名的目录的路径。当应该显示预览时，我会缓存，如果有图像，很好，如果没有图像将被下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:35:07.093

也许使用命名约定，这样您就不需要使用数据库？

像这样：用户 1 的个人资料图片将在 tmp/mypackage/pic_cache/user_pic_1.jpg

# command-line - 使用 sed 删除指定字符之间的单词

> ID：11537275
> 
> 赞同：1
> 
> 时间：2012-07-18T08:31:00.043
> 
> 标签：command-line, sed

我有一个这种格式的文件：

字 1 ：“字 2”字 3

我想删除“Word2”

那么文件必须是这样的：

字 1 : 字 3

我怎么能用 sed 做到这一点？

注意：Word2 是可变的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:38:12.443

如果 input_file 中没有多余的内容，只需将每个引用的短语替换为空字符串：

```
sed 's/"[^"]*"//' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:55:01.407

如果 file.txt 是您的文件，您可以从命令行尝试：

```
sed -e "s_: \"[a-zA-Z0-9]*\" _: _g" -i file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:58:46.123

基于给定的输入。比如说，Word2 可以是任何东西，但 Word1 和 Word3 是固定的。sed/awk oneliner 可以完成这项工作 4 u：

```
kent$  echo 'Word1 : "Word2" Word3'|sed -r 's/(Word1 :) "[^"]*"( Word3)/\1\2/g' 
Word1 : Word3

kent$  echo 'Word1 : "Word2" Word3'|awk -F"\"" '{print $1,$3}' 
Word1 :   Word3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:42:48.517

从命令行尝试

```
$ sed -i 's/\"Word2\"//g' /path/to/file.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T08:51:29.340

如果 test 是您的文件，请尝试：

```
# cat test | sed -r 's/\".+\"\ //' 
```

# database-design - 好的设计：2个表的外键指向同一个主键

> ID：11537276
> 
> 赞同：0
> 
> 时间：2012-07-18T08:31:10.677
> 
> 标签：database-design

我想知道我是否遵循了一个好的设计来跟踪数据库表。

表：

*   项目建议书
*   里程碑_提案
*   资源_提案
*   项目
*   里程碑_项目
*   资源_项目

两个里程碑表具有相同的列，两个资源表具有相同的列。

我的问题是我是否应该

1.  合并里程碑_提案与里程碑_项目
2.  将 Resources_Proposal 与 Resources_Project 合并
3.  创建一列“TYPE”以标识这些表中的数据是属于项目还是属于项目提案
4.  根据“类型”值，在里程碑和资源中定义指向 Project_Proposal 或 Project 表的外键。

设计将是这样的：

*   项目建议书
*   项目
*   里程碑
*   资源

非常感谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:16:44.620

You have the same fields, but they "point" (through foreign keys) to different tables, so you can't just merge them into a single field. What you'll end-up with is a CHECK that allows one field or the other to contain a non-NULL value, based on the type field.

Which is perfectly fine in this simple case. You are essentially following the strategy #1 out of the [3 possible strategies](https://stackoverflow.com/a/9178524/533120) for implementing inheritance.

# c# - 使用 MVVM 如何从许多可视组件或选项中更新标签？

> ID：11537284
> 
> 赞同：2
> 
> 时间：2012-07-18T08:32:02.027
> 
> 标签：c#, .net, xaml, mvvm

我试图了解每次使用 WPF (XAML) 修改窗口上的选项时如何调用 Resfresh() 或 Work() 方法。我已经问了这个问题，但我还不够清楚。所以我会用一个更好的例子再问一次。

我想知道如何从许多视觉组件中更新标签。假设我们有 10 个标签为 0 到 9 的复选框，如果它们被选中，我想做它们的总和。

在经典 Winform 中，我将创建一个事件处理程序 OnClick() 并在每个 CheckBox 状态更改时调用该事件。OnClick 调用 Refresh() 全局方法。刷新评估是否检查了每个 CheckBox 并在需要时将它们相加。在 Refresh() 方法结束时，我将 Label Text 属性设置为我的总和。

如何使用 XAML 和数据绑定来做到这一点？

```
<CheckBox Content="0" Name="checkBox0" ... IsChecked="{Binding Number0}" />
<CheckBox Content="1" Name="checkBox1" ... IsChecked="{Binding Number1}" />
<CheckBox Content="2" Name="checkBox2" ... IsChecked="{Binding Number2}" />
<CheckBox Content="3" Name="checkBox3" ... IsChecked="{Binding Number3}" />
<CheckBox Content="4" Name="checkBox4" ... IsChecked="{Binding Number4}" />
...
<Label Name="label1" ... Content="{Binding Sum}"/> 
```

在我的 ViewModel 中，每个复选框都有一个数据绑定属性，Sum 有一个属性

```
private bool number0;
public bool Number0
{
    get { return number0; }
    set
    {
        number0 = value;
        NotifyPropertyChanged("Number0");
        // Should I notify something else here or call a refresh method?
        // I would like to create something like a global NotifyPropertyChanged("Number")
        // But how can I handle "Number" ???
    }
}

// Same for numer 1 to 9 ...

private bool sum;
public bool Sum
{
    get { return sum; }
    set
    {
        sum = value;
        NotifyPropertyChanged("Sum");
    }
}

private void Refresh() // or Work()
{ 
    int result = 0;
    if (Number0)
        result = result + 0; // Could be more complex that just addition
    if (Number1)
        result = result + 1; // Could be more complex that just addition
    // Same until 9 ...
    Sum = result.ToString(); 
} 
```

我的问题是我应该如何以及何时调用此 Refresh 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:04:38.860

你的设计中有几处错误。这是我要做的：

而不是拥有`Number0...9`，做一个`BindingList<bool> Numbers`

然后在 XAML 中，显示如下复选框：

```
<ItemsControl ItemsSource="{Binding Numbers}">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <CheckBox IsChecked="{Binding} Content="Name the checkbox here" />
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl>

<Label Content="{Binding Numbers, Converter={StaticResource NumbersToSumConverter}}" /> 
```

作为`NumbersToSumConverter`一个[`IValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，例如：

```
public NumbersToSumConverter : IValueConverter
{
   public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
   {
      var numbers = value as BindingList<bool>();
      //Do your sum here.
   }

   public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
   {
      throw new NotImplementedException();
   }
} 
```

这是如何在 MVVM 中完成的示例，如果您需要在 中存储的不仅仅是 bool `BindingList<T>`，
创建一个实现的新类`INotifyPropertyChanged`，并根据需要添加任意数量的属性（确保`PropertyChanged`在它们的 setter 中引发）。
然后将其用作您的`BindingList<T>`.

希望这可以帮助，

呸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:51:09.967

尝试类似的东西 -

```
private bool number0;
    public bool Number0
    {
        get { return number0; }
        set
        {
            number0 = value;
            NotifyPropertyChanged("Number0");
            NotifyPropertyChanged("Sum");
        }
    }

    public bool Sum
    {
        get { return this.EvaluateSum(); }
    }

    private bool EvaluateSum() 
    {
        int result = 0; 
        if (Number0) 
            result = result + 0; // Could be more complex that just addition 
        if (Number1) 
            result = result + 1; // Could be more complex that just addition 
        // Same until 9 ... 

        return result.ToString(); 
    } 
```

## 注意：这未经测试。

如果您不喜欢上述内容，则可以进行以下更改：

声明新类

```
public class SomeClass: INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private bool number0;
    public bool Number0
    {
        get { return number0; }
        set
        {
            number0 = value;
            this.NotifyPropertyChanged("Number0");
        }
    }

    private bool sum;
    public bool Sum
    {
        get { return sum; }
        set
        {
            sum = value;
            this.NotifyPropertyChanged("Sum");
        }
    }

    protected void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null))
        {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

注意：相应更改Binding

关于 SomeClass 的属性更改：

```
void SomeClass_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName.Contains("Number"))
        {
            (sender as SomeClass).Sum = EvaluateSum(); // put or call the sum logic
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:24:54.077

就个人而言，我会`Refresh()`按照您的建议调用每个数字设置器。

我不热衷于直接`PropertyChanged`在其他属性的设置器中发出通知。如果某些其他属性由于其中一个属性的更改而发生更改，将来会发生什么`Number*`？您还必须遍历每个 setter 并`PropertyChanged`为该属性引发事件。这违背了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。`Number*`setter 是用来设置属性的，不用担心其他属性改变的结果。

使用专用`Refresh()`函数，该函数负责更新其他属性，并且它们会像往常一样引发自己的更改事件。

是的，调用`Refresh()`setter 并不好，但“正确”的做法是让您的视图模型订阅自己的`PropertyChanged`事件并调用`Refresh()`事件处理程序。这增加了不必要的复杂性 IMO，并且`Refresh()`在每个 setter 中调用实际上是相同的逻辑。

# performance - 应用程序未使用 100% 的 CPU

> ID：11537291
> 
> 赞同：1
> 
> 时间：2012-07-18T08:32:47.857
> 
> 标签：performance, profiling, theory, cpu-usage

当我在一台机器上运行我编写的应用程序时，Windows 7 Professional 32 位 SP 1，它运行得很好并且使用了系统中 100% 的 CPU。

但是，当我在 Windows Server 2008 上运行相同的应用程序时，我没有看到 100% 的 CPU 使用率。

为什么它也不使用 100% 的 CPU，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:55:31.913

好吧，通常你不想使用 100% 的 CPU，因为你想在负载增加时留出自己的空间。通常一个程序不会一直使用 CPU，因为它会开始受到其他因素的限制，通常是 I/O。

以 GUI 应用程序为例，直到用户单击某些东西，它什么也不做，然后继续等待用户输入。

你可能会愚蠢地把它写成

```
while(true){
  if(there is user input){
    use the user input
  }
} 
```

这会烧毁 CPU，因为它会非常快地运行这个循环。因此，精明的购物者可能会意识到用户可以应对点击和响应之间长达 50 毫秒的延迟。所以加入某种睡眠，比如......

```
while(true){
  if(there is user input){
    use the user input
  }
  sleep for 50 ms
} 
```

重要的是让 CPU 有机会做其他事情，因为它们很重要，否则你的程序就像那个只是把头伸到冰淇淋机下面的胖孩子，从不让任何人吃到美味可口的冰淇淋。

**编辑**

我爱我一个比喻，所以这里有一个给你。

将 CPU 使用率视为道路，将程序视为汽车，如果道路都畅通无阻，那么您的汽车燃烧橡胶并尽可能快地在街道上行驶是相对安全的。车越多，他们就越要为对方**让步**，让等待人们关闭或打开。

如果您将道路 (CPU) 专用于赛车（游戏）之类的东西，您会倾向于删除行人和非赛车（其他程序）之类的东西，以便您可以更安全地尽可能快地行驶。

现在，我从来没有说过我擅长隐喻。记住安全驾驶，享受冰淇淋！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:18:07.023

程序使用的 CPU 百分比与它的效率*无关。*

它与CPU有关，只是有时感觉像是在做其他事情*。*

事实上，如果您的程序执行任何 I/O，CPU 百分比将下降，因为当您的程序正在等待它时，它没有运行。

# windows - 在 Windows 8 Metro 上编译 OpenSSL

> ID：11537295
> 
> 赞同：2
> 
> 时间：2012-07-18T08:32:58.807
> 
> 标签：windows, windows-8, windows-runtime

我必须将 OpenSSL 移植到 winRT（x86 而非 ARM 上的 windows 8 Metro），所以我计划开始为 WinRt 编译。我已经从[http://www.openssl.org/source/下载了源代码](http://www.openssl.org/source/)

在源代码中，我看到了一些特定于操作系统的文件夹，如 MacOS、OS2 和 ms 文件夹，但我没有看到任何 Visual Studio 项目。到目前为止我所读到的关于编译 OpesSSL 的任何内容都谈到了 makefile 和 mingw，但我对 makefile 不太满意，而且不确定 Windows 8 是否支持 cygwin 和 perl。所以我正在寻找一些关于如何编译 OpenSSL 的想法在 Windows 8 上使用 Visual Studio。请分享您的知识或向我指出可以帮助我做到这一点的方向。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:43:24.950

OpenSSL 将在 Windows 8 下构建，仅用于桌面模式。Metro/WinRT 不再提供 Winsock（或与 API 兼容的替代方案），因此您将无法直接为 WinRT 进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:48:06.437

Metro 风格的 SSL 加密解决方案运行良好。但是，如果您没有连接到 Web 服务，则存在一些缺点：
- 您无法控制 SSL 握手的参数（如密码、服务器证书验证）
- 无法出示用户证书以向服务器验证客户端
-依赖微软升级 SSL 堆栈新加密等。

有些人致力于将 openssl 移植到 Windows 运行时。见 [http://openssl.6102.n7.nabble.com/winrt-random-td42100.html](http://openssl.6102.n7.nabble.com/winrt-random-td42100.html)
表示只配置和构建openssl，不支持winsock（只有内存BIO），替换一些不支持的功能。

因此可以做到这一点，但还没有开箱即用的支持，与内置解决方案相比，还有相当多的工作。但是如果你想移植一些已经使用 openssl 的软件，这可能是一个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:13:42.537

为什么要在 WinRT 中使用 OpenSSL？

如果仅出于安全目的使用它，则可以省略它 inmetro 风格的 WinRT。因为 WinRT 本身为 Metro 风格的套接字编程提供了安全性，例如

```
//0: A plain socket with no encryption.
socket->ConnectAsync(hostname, serviceName, SocketProtectionLevel::PlainSocket);

//1: A socket that must use the SSL for encryption. This value requires encryption and never allows a NULL cipher.
socket->ConnectAsync(hostname, serviceName, SocketProtectionLevel::Ssl);

//2: A socket that prefers to use the SSL for encryption. This value prefers that full encryption be used, but allows a NULL cipher (no encryption) based on the server configuration.
socket->ConnectAsync(hostname, serviceName, SocketProtectionLevel::SslAllowNullEncryption); 
```

# java - java套接字生成xml

> ID：11537297
> 
> 赞同：0
> 
> 时间：2012-07-18T08:33:05.297
> 
> 标签：java, multithreading, sockets

我正在尝试使用 java 套接字创建一个客户端-服务器程序。我有一些客户端和服务器。客户端将有关其 CPU 负载的信息发送到服务器，然后来自客户端的所有信息都由服务器保存到一个 xml 文件中。客户端会定期（例如每 5 分钟）发送此信息。

从技术上讲，我有一个问题需要控制，以及在每个客户端都发送了他们的 CPU 负载之后如何解决这个问题。任何人都可以帮忙吗？这是我的代码的一部分，

```
public void listenSocket(){ 
        int client=0;
        while(client<2){
            ClientWorker w;
              try{  
                    w = new ClientWorker(server.accept());
                    Thread t = new Thread(w);
                    t.start();
                    CpuLoad[client]=w.getLoad();
                    Ip[client]=w.getIP();
              } catch (IOException e) {
                    System.out.println("Accept failed: 4444");
                    System.exit(-1);
              }
           client++;
        }

        XmlGenerator xml = new XmlGenerator();

        try{
            xml.generate(CpuLoad, Ip);
            System.out.println("file generated");
        }catch(Exception e){
            System.out.println("Can't generate file");
        }

} 
```

我以为我的算法是对的，但还是有错误：

```
Exception in thread "main" java.lang.NullPointerException
           at server.ServerOne.listenSocket(ServerOne.java:39) 
```

这是一类客户工作者

```
class ClientWorker implements Runnable{
    Socket client;
    String ip;
    String load;
    String data[]=new String[7];

    ClientWorker(Socket client){
    this.client = client;
}

public void setIP(String ip){
        this.ip = ip;
    }

    public void setData(String load){
        this.load = load;
    }

    public String getIP(){
        return ip;
    }

    public String getData(){
        return load;
    }

public void run(){

    BufferedReader in = null;
    PrintWriter out = null;

    try{
      in = new BufferedReader(new InputStreamReader(client.getInputStream()));
      out = new PrintWriter(client.getOutputStream(), true);
    } catch (IOException e) {
      System.out.println("in or out failed");
      System.exit(-1);
    }

            try{
                String a = in.readLine();
                setData(a);
                String b = client.getInetAddress().toString();
                setIP(b);
        //Send data back to client
                out.println(a);
                System.out.println(a);     
            }catch (IOException e) {
                System.out.println("Read failed");
            }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:43:22.900

此代码中的问题是您的 ClientWorker 和“master”之间缺乏同步机制。您为工作人员启动一个线程，然后在 1 条指令后询问其任务的结果。这就像老师给你作业，一分钟后问结果。你打算说什么？“对不起，我没有”，或者翻译成你的代码，“空指针异常”。

你需要一种方法让 Worker 完成它的工作。只有在工人有事情要报告后，您才要求结果。这是作业，我不会完成你的代码。你应该调查：

*   [线程同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)

*   [等待/通知](http://www.java-samples.com/showtutorial.php?tutorialid=306)

*   [并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

还有我最喜欢的：

*   [Java 并发 API](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)

我读过的关于这个主题的最好的书：

*   [Java 并发实践](http://jcip.net/)

随时发布有关特定问题的新问题。

# css - 为什么 twitter 在调整大小时会在 Google Chrome 上启动“打嗝”？

> ID：11537299
> 
> 赞同：7
> 
> 时间：2012-07-18T08:33:07.337
> 
> 标签：css, google-chrome, twitter-bootstrap, responsive-design

当我注意到 Twitter Bootstrap 页面在某些情况下似乎“使 google chrome 失败”时，我正在通过更改我的 Google Chrome 窗口大小来使用自适应 CSS。

重现步骤（从台式计算机）：

1.  从一个空白的谷歌浏览器标签开始，全屏
2.  访问[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)
3.  逐渐使窗口变窄，每 100 像素左右松开鼠标。
4.  继续前进，直到获得大约 400 像素的“完全移动版本”（蓝色的“在 github 上查看项目”按钮位于白色“下载引导”按钮的顶部，它们都是全角的）。
5.  现在再次使窗口变厚，让鼠标每 20 像素左右移动一次。

在执行第 4 步或第 5 步时，您可能会遇到奇怪的行为 - Chrome 对尺寸感到困惑，或者忘记绘制页面的垂直区域（呈现为白色）。在极少数情况下，我还设法获得了“幻像侧窗格”。

我在两台不同的计算机上尝试过，但仍然遇到同样的问题（都使用 Ubuntu 12）

问题是，其他响应式网站没有这个问题。参见例如[http://css-tricks.com/](http://css-tricks.com/)。你可以随心所欲地改变它的大小，Chrome 在渲染它拥有的多个布局时从来不会遇到任何问题（事实上，它的布局比 twitter bootstrap 多）。

所以我只能得出结论，这个问题是 twitter-bootstrap 特有的。可能与 CSS 规则或 HTML 内容的编写方式有关，或者可能与文件的结构方式有关。

我正在使用 twitter bootstrap 作为我的一个网站的基础，我想解决这个问题。有没有人对如何进行有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:58:52.117

如果您认为这是特定于引导程序的，则应将其发布到 Twitter Bootstrap Github 页面而不是 SO。但是，我一直在参与发行票证。在我们指出我们无法在与 OP 相同的浏览器版本的 Chrome / OS X 和 Chrome / Win 7 上重现该错误后，此页面已关闭。这表明这是一个特定于平台的 chrome 错误，而不是 Bootstrap 工具包的问题。话虽如此，我会向 chrome 团队提出一张票，包括您的构建号和操作系统/平台设置。

[链接到 Github 问题](https://github.com/twitter/bootstrap/issues/4299#issuecomment-7558473)

# php - MySQL Query 使用 NOT 可能吗？

> ID：11537302
> 
> 赞同：-1
> 
> 时间：2012-07-18T08:33:25.627
> 
> 标签：php, mysql

我有一个订单状态数据库，我想返回该行的值不是 Complete 的行数。

我该怎么办？我有以下显示有多少行具有“新”作为订单状态。但我想显示除 od_status 为 Complete 的行之外的所有行。

```
<?php
$query = "SELECT od_status FROM tbl_order WHERE od_status = 'New'"; 
$result = mysql_query($query) or die(mysql_error());
$num_rows = mysql_num_rows($result);
echo "$num_rows";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:34:47.577

```
<?php
$query = "SELECT od_status FROM tbl_order WHERE od_status != 'Complete'"; 
$result = mysql_query($query) or die(mysql_error());
$num_rows = mysql_num_rows($result);
echo "$num_rows";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:35:01.180

```
$query = "SELECT od_status FROM tbl_order WHERE od_status <> 'Complete'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:35:38.853

```
$query = "SELECT COUNT(*) FROM tbl_order WHERE od_status != 'Complete'";
$result = mysql_query($query);
var_dump($result); 
```

COUNT 计算行数，!= 选择不等于 Complete 的位置。

# c++ - 继承的引用成员的构造函数中的 C++ 默认初始化

> ID：11537304
> 
> 赞同：3
> 
> 时间：2012-07-18T08:33:30.197
> 
> 标签：c++, inheritance, reference, constructor, initialization

我有一个更新外部引用的基类，我想构建一个继承类，将这个引用作为成员嵌入。引用的一种默认初始化。

我想出了以下解决方案：

```
#include<iostream>

class Statefull
{
public:
    Statefull( int& ref ) : _base_ref(ref) {}
    int& _base_ref;
    // update the extern variable
    void work() { std::cout << ++_base_ref << std::endl; }
};

class Stateless : public Statefull
{
public:
    // use a temporary allocation
    Stateless( int* p = new int() ) :
        // we cannot initialize local members before base class:
        // _dummy(), Statefull(_dummy)
        // thus, initialize the base class on a ref to the temporary variable
        Statefull(*p),
        _tmp(p),
        _dummy()
    {
        // redirect the ref toward the local member
        this->_base_ref = _dummy;
    }
    int* _tmp;
    int _dummy;
    // do not forget to delete the temporary
    ~Stateless() { delete _tmp; }
};

int main()
{
    int i = 0;
    Statefull full(i);
    full.work();

    Stateless less;
    less.work();
} 
```

但是在构造函数的默认参数中需要临时分配似乎很丑陋。有没有更优雅的方法来实现这种默认初始化，同时在基类构造函数中*保留引用？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:40:04.207

好吧，`Stateless`班级违反了三人规则。但我认为这是因为这只是展示真正问题的示例代码。

现在，要实际解决这个问题：将引用绑定到未初始化的变量是完全有效的，只要在初始化实际发生之前不使用它的值。

```
Stateless() : Statefull(_dummy), _dummy() {} 
```

目前的解决方案有效，但似乎对它*为什么*有效存在一些误解。

```
 // redirect the ref toward the local member
    this->_base_ref = _dummy; 
```

您不能“重定向”引用。您只能绑定一次引用：在初始化时。分配给引用会分配给它所引用的对象。在这种情况下，`this->_base_ref = _dummy` *与 完全相同* `*_tmp = _dummy`：它将值分配给`_dummy`to `*_tmp`。`_base_ref`但是，仍然是指`*_tmp`（您可以使用 进行测试`assert(&_base_ref == tmp)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:46:17.270

我认为这可能有效：

```
StateLess(): Statefull(*new int) {}
~StateLess() { delete &_base_ref; } 
```

你不能没有临时对象，但它们不必在类定义中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:16:23.820

一切都可以使用更多的类来解决

```
class StateForStateful
{
protected:
    int state;
};

class Stateless: private StateForStateful, public Stateful // order is important
{
public:
     Stateless():Stateful(this->state) {}
}; 
```

# javascript - stringByEvaluatingJavaScriptFromString 不返回正确的值

> ID：11537307
> 
> 赞同：0
> 
> 时间：2012-07-18T08:33:39.967
> 
> 标签：javascript, ios, uiwebview

```
[wvPage stringByEvaluatingJavaScriptFromString:
    @"function getDes(){var attrs = document.getElementsByClassName('description')[0];"
        "attrs = attrs.getElementsByClassName('table')[0]"
        "attrs = attrs.getElementsByTagName('li);"
        "var result='',i;"
        "for(i=0; i<attrs.length; i++)"
        "{"
        "  result += attrs[i].getElementsByTagName('span')[0].innerHTML + ':' + attrs[i].getElementsByTagName('p')[1].innerHTML"
        "  if(i+1!=attrs.length)"
        "     result += '|'"
        "}"
    "return result;}"];

NSString* attribute_list = [wvPage stringByEvaluatingJavaScriptFromString:@"getDes()"]; 
```

我使用这些行来获取一个字符串，但没有返回任何内容。怎么了？？

目标 HTML 在这里：[http ://d.pr/n/WT5a](http://d.pr/n/WT5a)

# excel - 带有填充零单元格的报告显示为#VALUE！在 Excel 中

> ID：11537308
> 
> 赞同：3
> 
> 时间：2012-07-18T08:33:43.087
> 
> 标签：excel, reporting-services, ssrs-2008

我在表格中有一个单元格，其值设置为整数。

单元格`Format`的 设置为`000`在报表查看器或其他导出格式（如 PDF）中显示时导致所述整数填充零

但是，当我将此报告导出到 Excel 时，单元格中显示的值为`#VALUE!`.

**如何在 Excel 中将值显示为填充零？**

我想知道这是否可以在没有嵌入（.net）代码或更改 SQL 查询的情况下在 SSRS 设计中本地完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:12:40.183

这可以解决它；

```
=Right("000" & Fields!MyInt.Value.ToString, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:36:27.233

`#VALUE!`值无法在单元格中显示时显示。格式看起来正确，因此请检查该列是否足够宽以显示该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:04:24.070

＃价值！在公式中使用错误类型的参数或操作数时显示。

检查返回到 Excel 的数据是否不包含前导“=”、“-”或“+”

如果确实如此，Excel 会将其视为公式。

如果只有#VALUE！在单元格中，则 SSRS 正在传递一个无效值。

还可以查看单元格中的格式以查看从 SSRS 传递的内容。我希望看到“000”或“000;000”或“000;000;000;”的格式。

这些是正数、负数、零和文本的格式，从左到右。

# linux - 在 Linux 上使用 g++ 编译 RInside 程序

> ID：11537313
> 
> 赞同：1
> 
> 时间：2012-07-18T08:34:14.660
> 
> 标签：linux, r, g++, rcpp, rinside

**我已经通过 RPM（使用 Yast）安装了 R。**

```
anisha@linux-y3pi:~> locate RInside.so
/usr/lib64/R/library/RInside/lib/libRInside.so
/usr/lib64/R/library/RInside/libs/RInside.so

anisha@linux-y3pi:~> locate Rcpp.so
/usr/lib64/R/library/Rcpp/lib/libRcpp.so
/usr/lib64/R/library/Rcpp/libs/Rcpp.so 
```

* * *

我要编译的文件 ( `rinsidetest.cpp`) 包含：

```
#include <RInside.h>
#include <Rcpp.h>

int main (int argc, char *argv[])
{
    RInside R (argc, argv);
    return 0;
} 
```

* * *

这是我编译它的方法：

```
anisha@linux-y3pi:~> g++ rinsidetest.cpp -I /usr/lib64/R/library/RInside/include/ -I /usr/lib64/R/library/Rcpp/include/ -I /usr/lib64/R/include/ -L /usr/lib64/R/library/RInside/libs/ -L /usr/lib64/R/library/Rcpp/libs/ 

/tmp/ccUfdjgZ.o: In function `main':  
rinsidetest.cpp:(.text+0xb7): undefined reference to `RInside::RInside(int, char const* const*, bool)'  
rinsidetest.cpp:(.text+0xc8): undefined reference to `RInside::~RInside()'  
collect2: ld returned 1 exit status 
```

* * *

信息：

```
> sessionInfo() 
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tcltk_2.15.1 tools_2.15.1
> 
```

`RInside`版本：`0.2.6`
`Rcpp`版本：`0.9.13`

**是否有解决此问题的方法，或者我“必须”删除 rpm 安装并通过从源代码编译来启动所有内容？**

编辑

```
anisha@linux-y3pi:~/Desktop/abc> g++ rinsidetest.cpp -I /usr/lib64/R/library/RInside/include/ -I /usr/lib64/R/library/Rcpp/include/ -I /usr/lib64/R/include/ -L /usr/lib64/R/library/RInside/lib/ -L /usr/lib64/R/library/Rcpp/lib/ -lRInside

anisha@linux-y3pi:~/Desktop/abc> ls  
a.out  rinsidetest.cpp

anisha@linux-y3pi:~/Desktop/abc> ./a.out   
./a.out: error while loading shared libraries: libRInside.so: cannot open shared object file: No such file or directory 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:39:02.693

尝试将以下内容添加到 g++ 构建的末尾

```
 -lRInside -lRcpp 
```

这样你就有

```
g++ rinsidetest.cpp -I /usr/lib64/R/library/RInside/include/ -I /usr/lib64/R/library/Rcpp/include/ -I /usr/lib64/R/include/ -L /usr/lib64/R/library/RInside/libs/ -L /usr/lib64/R/library/Rcpp/libs/ -lRInside -lRcpp 
```

就目前而言，您似乎没有链接到您需要的库。当您有一个名为的库时，`libXYZ`您需要使用 g++ 链接到它`-lXYZ`，但您似乎还没有这样做。这可能会解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:12:22.297

如果您删除新的测试文件

```
rinsidetest.cpp 
```

进入一个包含准备好的 Makefile 的目录——例如`examples/standard/`，那么你只需要说

```
make 
```

并且将构建正确的可执行文件。它通过嵌入目录来处理运行时链接问题。

这个想法是让用户获取提供的 Makefile，并根据需要进行调整/复制。

# sharepoint-2010 - Sharepoint 2010 中任务列表的自定义搜索控件

> ID：11537319
> 
> 赞同：1
> 
> 时间：2012-07-18T08:34:45.083
> 
> 标签：sharepoint-2010

我正在 Visual Studio 中开发一个顺序的 Sharepoint Foundation (Share point 2010) 工作流。我可以使用 CreateTaskWithContentType 活动创建服装任务，我需要为此任务列表创建符合我业务的自定义搜索控件，请您指导我

谢谢

# iphone - iPhone：什么是 MPMusicPlaybackStateInterrupted？它和 MPMusicPlaybackStatePaused 有什么区别

> ID：11537321
> 
> 赞同：1
> 
> 时间：2012-07-18T08:34:55.503
> 
> 标签：iphone, ios, mpmusicplayercontroller

`MPMusicPlayerController`我对的`playbackState`属性有一些疑问。

在文档中，`MPMusicPlaybackStateInterrupted`定义`MPMusicPlaybackStatePaused`如下：

**MPMusicPlaybackStateInterrupted**
音乐播放器已被中断，例如来电。

**MPMusicPlaybackStatePaused**
音乐播放器暂停。

我无法查看来电，因为我现在没有 iPhone。
但只有几次我在`MPMusicPlaybackStateInterrupted`用 iPod touch 播放音乐时得到状态。

（不知道为什么会出现中断状态。除了播放音乐，没有来电，也没有其他操作）。

在那些时候，`MPMusicPlayerController`只是暂停播放音乐。

**Question1**和 和
有什么不一样？`MPMusicPlaybackStateInterrupted``MPMusicPlaybackStatePaused`

**Question2**除了来电外，
什么时候会发生？`MPMusicPlaybackStateInterrupted`

**Question3**
拿到后该怎么办`MPMusicPlaybackStateInterrupted`？
例如，当我得到`MPMusicPlaybackStatePaused`or时`MPMusicPlaybackStateStopped`，我应该更改播放/暂停按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:30:57.427

我用 iOS 5.1.1 确认了以下信息。

**Question1**和 和
有什么不一样？`MPMusicPlaybackStateInterrupted``MPMusicPlaybackStatePaused`

`MPMusicPlaybackStatePaused`播放器暂停时发生。
`MPMusicPlaybackStateInterrupted`当播放器被其他音频输出（例如来电或 Apple 时钟应用程序的计时器）中断时，就会发生这种情况。

**Question2**除了来电外，
什么时候会发生？`MPMusicPlaybackStateInterrupted`

`MPMusicPlaybackStateInterrupted`当时钟应用程序的计时器响起时发生。
`-applicationWillResignActive:`当计时器响起时也会调用。
但是`MPMusicPlaybackStatePaused`不会发生，并且在中断（定时器的闹钟）完成后会自动恢复播放音乐。

其他中断示例包括 Siri/语音控制（按住主页按钮）、耳机远程控制（如果您使用应用程序MusicPlayer）、来电。
按下耳机遥控器的播放按钮不会使应用程序退出活动。中断永远不会结束。

`MPMusicPlaybackStateInterrupted`当通知横幅出现在屏幕顶部时，不会发生并且播放状态不会改变。
VoiceOver 也不会产生中断。

**Question3**
拿到后该怎么办`MPMusicPlaybackStateInterrupted`？
例如，当我得到`MPMusicPlaybackStatePaused`or时`MPMusicPlaybackStateStopped`，我应该更改播放/暂停按钮。

您不必在回调发生`MPMusicPlayerControllerPlaybackStateDidChangeNotification`时做任何`MPMusicPlaybackStateInterrupted`事情。
因为播放音乐中断后会自动恢复。

**编辑**
我发现不经常播放的音乐不会自动恢复。（这意味着你不能依赖自动恢复。）

在以下情况下，播放音乐不会自动恢复。

*   当按下耳机的遥控按钮时。（如果您使用 applicationMusicPlayer）

*   当计时器响起时，您双击主页按钮，切换应用程序，停止计时器，然后切换回应用程序。

*   当您在接听来电后呼叫时切换回应用程序时。

# android - 如何使用文本格式将字符串数组保存在 sdcard 中？

> ID：11537324
> 
> 赞同：0
> 
> 时间：2012-07-18T08:35:04.720
> 
> 标签：android, byte, fileoutputstream

```
 String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };
        Log.d("list",TextUtils.join(",", values));
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

              String a="hi  is";
                File myFile = new File("/sdcard/mysdcardfile.txt");
                try {
                    myFile.createNewFile();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                try {
                    //byte[] anotherArray = new byte[values.length];
                    byte data[] = new byte[1024];
                    int count;
                    long total = 0;
                    FileOutputStream output = new FileOutputStream(myFile);
                    while ((count = values.length) != -1) {

                        total += count;
                //  FileWriter fos = new FileWriter(myFile);
               //   BufferedWriter bis = new BufferedWriter(fos);
                    output.write(data, 0, count);
                    //bis.close();
                    //fos.close();
                    output.close();
                    } 
```

这里我的值以文本格式存储在我的 SD 卡中。但是当我打开文本文件时，它包含字节。这里的值存储在字节中。当我写文件输出流时如何将字节更改为字符串。我想得到文本文件中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:51:42.140

如果要将其写为文本，请不要使用`DataOutputStream`. 流（InputStream 和 OutputStream）用于读取和写入二进制数据，而不是文本。如果要编写文本，请使用 a`Writer`而不是`OutputStream`. 例如：

```
String[] array = ...  // wherever you get this from;  

File file = new File("StringFile.txt");  
PrintWriter out = new PrintWriter(new FileWriter(file));  

// Write each string in the array on a separate line  
for (String s : array) {  
    out.println(s);  
}  

out.close(); 
```

别忘了放

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

在应用程序的清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:39:00.253

读取字节数组中的文件并将其转换为字符串，如下所示。

```
 byte[] array = new byte[1000]; // 1000 is just given u can change it accordingly
      String s= new String(array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:41:06.823

为什么不使用 SQLite 数据库或 ContentProvider ？

您可以使用 DataOutputStream.writeUTF() 和 DataInputStream.readUTF() 代替，因为这些方法将字符串的长度放入文件中并自动读回正确数量的字符。

# c# - 赋值表达式列表

> ID：11537330
> 
> 赞同：2
> 
> 时间：2012-07-18T08:35:24.427
> 
> 标签：c#, linq, c#-4.0

我已经弯曲了一段时间，但我想我错过了一些东西，所以可能有人会提供帮助。

假设我有以下映射器类：

```
public class Mapping<TSource, TResult>
{
    private readonly Action<TSource, TResult> setter;

    public Mapping(Expression<Func<TSource, TResult>> expression)
    {
        var newValue = Expression.Parameter(expression.Body.Type);
        var body = Expression.Assign(expression.Body, newValue);
        var assign = Expression.Lambda<Action<TSource, TResult>>(body, expression.Parameters[0], newValue);

        setter = assign.Compile();
    }

    public void Assign(TSource instance, TResult value)
    {
        setter(instance, value);
    }
} 
```

它工作正常：

```
 [Test]
    public void ShouldMapProperty()
    {
        var testClass = new TestClass();

        var nameMapping = new Mapping<TestClass, string>(x => x.Name);
        var ageMapping = new Mapping<TestClass, int>(x => x.Age);

        nameMapping.Assign(testClass, "name");
        ageMapping.Assign(testClass, 10);

        Assert.AreEqual("name", testClass.Name);
        Assert.AreEqual(10, testClass.Age);       
    } 
```

问题是，我想将单个对象类型的映射保留到某个集合中，而 TResult 会妨碍，只要不同的属性具有不同的类型。如何很好地摆脱 TResult？

**更新：** 看起来我不够清楚，所以这将是我将如何使用它的示例：

```
 public class Mapping<TSource, TResult>
{
    private readonly Action<TSource, TResult> setter;
    private readonly string columnName;

    public Mapping(Expression<Func<TSource, TResult>> expression, string columnName)
    {
        this.columnName = columnName;            

        var newValue = Expression.Parameter(expression.Body.Type);
        var body = Expression.Assign(expression.Body, newValue);
        var assign = Expression.Lambda<Action<TSource, TResult>>(body, expression.Parameters[0], newValue);

        setter = assign.Compile();
    }

    public void Assign(TSource instance, DataRow row)
    {
        setter(instance, row[columnName]);
    }
} 
```

然后我会有一些 MappingConfiguration 类，它可以让我这样做：

```
MappingConfiguration.For<TestClass>()
  .Map(x => x.Name, "FirstName")
  .Map(x => x.Age, "Age"); 
```

最后是一些 MappingEngine 类，它将 DataTable 和 MappingConfiguration 作为输入并`IEnumerable<TestClass>`作为输出产生。

**更新 2：** 我已将初始版本修改为：

```
public class Mapping2<TSource>
{
    private readonly Delegate setter;

    public Mapping2(Expression<Func<TSource, object>> expression)
    {
        var newValue = Expression.Parameter(expression.Body.Type);
        var body = Expression.Assign(expression.Body, newValue);
        var assign = Expression.Lambda(body, expression.Parameters[0], newValue);            

        setter = assign.Compile();
    }

    public void Assign(TSource instance, object value)
    {
        setter.DynamicInvoke(instance, value);
    }
} 
```

它几乎可以工作。
几乎我的意思是它适用于引用类型属性，并且我得到了值类型属性：

> System.ArgumentException：表达式必须是可写的
> 参数名称：左

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:02:19.627

我已经做到了，下面的源代码。它的运行速度比 Automapper 快一些（不确定我的 Automapper 配置是否是该任务最快的），基准测试不是防弹的，但在我的机器上使用我的书面映射器映射 500 万行需要 20.16 秒，使用 Automapper 需要 39.90 秒，虽然看起来Automapper 使用更少的内存来完成这项任务（尚未测量它，但有 1000 万行 Automapper 给出了结果，而我的映射器因 OutOfMemory 而失败）。

```
public class MappingParameter<TSource>
{
    private readonly Delegate setter;

    private MappingParameter(Delegate compiledSetter)
    {
        setter = compiledSetter;
    }

    public static MappingParameter<TSource> Create<TResult>(Expression<Func<TSource, TResult>> expression)
    {
        var newValue = Expression.Parameter(expression.Body.Type);
        var body = Expression.Assign(expression.Body, newValue);
        var assign = Expression.Lambda(body, expression.Parameters[0], newValue);

        var compiledSetter = assign.Compile();

        return new MappingParameter<TSource>(compiledSetter);
    }

    public void Assign(TSource instance, object value)
    {
        object convertedValue;
        if (!setter.Method.ReturnType.IsAssignableFrom(typeof(string)))
        {
            convertedValue = Convert.ChangeType(value, setter.Method.ReturnType);
        }
        else
        {
            convertedValue = value;
        }

        setter.DynamicInvoke(instance, convertedValue);
    }
}

public class DataRowMappingConfiguration<TSource>
{
    private readonly Dictionary<string, MappingParameter<TSource>> mappings =
        new Dictionary<string, MappingParameter<TSource>>();

    public DataRowMappingConfiguration<TSource> Add<TResult>(string columnName,
                                                             Expression<Func<TSource, TResult>> expression)
    {
        mappings.Add(columnName, MappingParameter<TSource>.Create(expression));
        return this;
    }

    public Dictionary<string, MappingParameter<TSource>> Mappings
    {
        get
        {
            return mappings;
        }
    }
}

public class DataRowMapper<TSource>
{
    private readonly DataRowMappingConfiguration<TSource> configuration;

    public DataRowMapper(DataRowMappingConfiguration<TSource> configuration)
    {
        this.configuration = configuration;
    }

    public IEnumerable<TSource> Map(DataTable table)
    {
        var list = new List<TSource>(table.Rows.Count);

        foreach (DataRow dataRow in table.Rows)
        {
            var obj = (TSource)Activator.CreateInstance(typeof(TSource));

            foreach (var mapping in configuration.Mappings)
            {
                mapping.Value.Assign(obj, dataRow[mapping.Key]);
            }

            list.Add(obj);
        }

        return list;
    }
}

public class TestClass
{
    public string Name { get; set; }
    public int Age { get; set; }
}

[TestFixture]
public class DataRowMappingTests
{      
    [Test]
    public void ShouldMapPropertiesUsingOwnMapper()
    {            
        var mappingConfiguration = new DataRowMappingConfiguration<TestClass>()
            .Add("firstName", x => x.Name)
            .Add("age", x => x.Age);

        var mapper = new DataRowMapper<TestClass>(mappingConfiguration);                      

        var dataTable = new DataTable();
        dataTable.Columns.Add("firstName");
        dataTable.Columns.Add("age");

        for (int i = 0; i < 5000000; i++)
        {
            var row = dataTable.NewRow();
            row["firstName"] = "John";
            row["age"] = 15;

            dataTable.Rows.Add(row);                
        }

        var start = DateTime.Now;

        var result = mapper.Map(dataTable).ToList();

        Console.WriteLine((DateTime.Now - start).TotalSeconds);

        Assert.AreEqual("John", result.First().Name);
        Assert.AreEqual(15, result.First().Age);
    }

    [Test]
    public void ShouldMapPropertyUsingAutoMapper()
    {
        Mapper.CreateMap<DataRow, TestClass>()
            .ForMember(x => x.Name, x => x.MapFrom(y => y["firstName"]))
            .ForMember(x => x.Age, x => x.MapFrom(y => y["age"]));

        var dataTable = new DataTable();
        dataTable.Columns.Add("firstName");
        dataTable.Columns.Add("age");

        for (int i = 0; i < 5000000; i++)
        {
            var row = dataTable.NewRow();
            row["firstName"] = "John";
            row["age"] = 15;

            dataTable.Rows.Add(row);
        }

        var start = DateTime.Now;

        var result = dataTable.Rows.OfType<DataRow>().Select(Mapper.Map<DataRow, TestClass>).ToList();         

        Console.WriteLine((DateTime.Now - start).TotalSeconds);

        Assert.AreEqual("John", result.First().Name);
        Assert.AreEqual(15, result.First().Age);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:47:19.187

可能是这样的：

```
public class Mapping<TSource>
{
    public void Assign<TResult>(TSource instance, TResult value)
    {
        var property = typeof(TSource).GetProperties().FirstOrDefault(p => p.PropertyType == typeof(TResult)));
        if (property != null)
        {
            property.SetValue(instance, value, new object[0]);
        }

    }
} 
```

***但是您的对象需要具有每种类型的一个属性才能准确***

我们甚至可以让它更通用，但更危险：

```
 public void Assign<TResult>(TSource instance, TResult value)
    {
        var property = typeof(TSource).GetProperties().FirstOrDefault(p => p.PropertyType.IsAssignableFrom(typeof(TResult)));
        if (property != null)
        {
            property.SetValue(instance, value, new object[0]);
        }

    } 
```

（如果您有 2 个从同一个基类继承的属性，这将不起作用）...

# c# - 创建正则表达式以接受空格/空格或十进制值

> ID：11537335
> 
> 赞同：0
> 
> 时间：2012-07-18T08:35:41.993
> 
> 标签：c#, .net, regex

我想在 c# 中创建正则表达式，它为具有空白/空格/空值或具有 2 个小数点的十进制值的值返回 true。因此不接受除此之外的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:29:11.487

虽然可能不是最有效的，但这个正则表达式应该做你想做的事：

```
^((\d+[\.]\d{2})|([\.]\d{2})|()|\s*)$ 
```

它要求任何十进制数都有两位小数，但它确实接受 0.99 或 .99 作为示例。

如果您想允许用户输入 9 或 9.0 或 9.01（即不强制用户输入两位小数），您可以像这样修改上面的内容：

```
^((\d+([\.]\d{0,2})*)|([\.]\d{0,2})|()|\s*)$ 
```

它只是将量词设置为 {0,2} 而不是 {2}，并使小数位的存在可选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:24:29.483

我建议使用这种模式来处理数字和空字符串场景。

```
^[-+]?\d*(\.\d{2})?|\s*$ 
```

Reagrding `NULL`，我经历过，当我们`null`在 RegEx 中作为输入传递时，它会抛出`ArgumentNullException`。所以我的建议是通过匹配来验证`NULL`使用运算符：`!=``null`

```
if(str != null && RegEx.IsMatch(str,@"^[-+]?\d*(\.\d{2})?|\s*$"))
   // valid data 
```

在哪里：

str = 包含验证数据的字符串

上述模式还允许： -. **00**或**-0.00**作为验证小数。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:40:02.420

```
^\s*(?:[+-]?\d*\.\d{2})?\s*$ 
```

匹配恰好有两个小数位的数字，可选地用空格或空/仅空格字符串包围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:42:57.307

使用这个正则表达式`^(\s+)|(([+-])?\d+[,\.]\d{2})|()|(null)$`**

# javascript - getElementsByTagName 和 getElementsByClassName 在 IE8 中不起作用

> ID：11537336
> 
> 赞同：1
> 
> 时间：2012-07-18T08:35:48.200
> 
> 标签：javascript, internet-explorer, internet-explorer-8

样本来源：

```
 <div>      
            <br />
         <a name="IDATLQHE"></a>
        <h2 class="subhead" xmlns="">
         <div class="dummy">
             <div class="dummyy">
                <span>abcd</span>
            </div>

            <div class="dummyyy">
                <span>
                        <a title="google" href="http://google.com">google.com</a>
                </span>
          </div>                
        </div>
        </h2>       
    </div> 
```

需要的输出：

我想用元素的内容替换`<a>`元素中的`<div class="dummyyy">` 元素内容`<div class="dummyy">`。

JavaScript 编写：

```
<script type="text/javascript">
    var divs = document.getElementsByClassName('dummy');
    for(var i = 0, len = divs.length; i < len; i++)
    {
        var div = divs[i],
        h2 = div.getElementsByClassName('dummyyy'),
        h3 = div.getElementsByClassName('dummyy');
        if(h2.length === 1)
        {
            var aa= h2[0],
            aaa=aa.getElementsByTagName('a');
            if(h2.length === 1 && h3.length === 1)
            {
                aaa[0].innerHTML = h3[0].innerHTML;
                h3[0].innerHTML=null;
            }
        }
    } 
```

该脚本在 Firefox 中运行良好，但在 IE 中无法正常运行。

错误：

```
 getElementsByClassName 
 aaa=aa.getElementsByTagName('a') 
```

任何人都可以帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:38:37.443

`getElementsByClassName`IE8 不支持。如果不需要 IE7 支持，可以替换为`div.querySelectorAll(".dummyy")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:40:37.230

`getElementsByClassName()`由当前所有浏览器实现，除了 IE8 和更早版本。IE8确实支持`querySelectorAll()`

# c - 无法从 ac 程序生成 .exe 文件

> ID：11537339
> 
> 赞同：0
> 
> 时间：2012-07-18T08:35:50.550
> 
> 标签：c

我正在尝试为以下程序生成 .exe 文件，该程序运行正确但不生成 .exe 文件。相反，它会生成一个 .depend 文件。

* * *

我在 Windows 7 平台上使用 gcc 编译器和 CodeBlocks IDE。

* * *

```
#include <stdio.h>
#include <stdlib.h>

int max(int  a,int b)
{
int c=(a>b)?a:b;
return c;
}

int maxCoins(int n)
{
int arr[n+1],i;
arr[0]=0;
arr[1]=1;
arr[2]=2;
arr[3]=3;

if(n>2)
{

for(i=3;i<=n;i++)
{
    int k= arr[(int)(i/2)]+arr[(int)(i/3)]+arr[(int)(i/4)];
    arr[i]=max(i,k);
}
}

 return arr[n];
}

int main(void)
{
int coins;

while((scanf("%d", &coins)) != EOF)
{
    printf("%d\n",maxCoins(coins));
}

getchar();

return 0;
} 
```

* * *

可能是什么问题呢 ？我能够轻松编译其他文件。这与我如何接受输入有关吗？

# nhibernate - 休眠映射，多对一

> ID：11537345
> 
> 赞同：0
> 
> 时间：2012-07-18T08:36:19.340
> 
> 标签：nhibernate

我有实体房子，除了图像的其他属性列表之外。每张图片都将作为单个动作上传，使用 js 裁剪技术一张一张地上传。

**更新：** 所以一所房子可以有很多图像。

```
public House
{
  public Guid Id {get; set;}
  ....
  List<Image> Images {get; set;}
}

public class Images 
{
  public House House {get; set;}
  public string Path {get;set;}
  public string Name {get;set;}
  public string Description {get;set;}    
} 
```

我的数据库表如下：

```
House 
 Id
 Name, ...
 On this side I don't have relation to the Image table

Image table
 Id
 HouseId
 Path
 Name
 Description 
```

这种方法可以吗？如何使用 nhibernate orm 映射这些对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:06:57.060

声明您的实体，然后在映射文件中将 Image`HouseId`与`House`类的实体相关联。您应该在数据库中有外键。由于 xml 答案已经在这里，我会添加流利的 nhibernate 方式。

```
public class House
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    ....
}

public class Image 
{
    public virtual int Id { get; set; }
    public virtual House HouseEntity { get; set; }
    ....
}

public class HouseMap : ClassMap<House>
{
    public HouseMap()
    {
        Table("House");

        Id(x => x.Id).GeneratedBy.Identity();            
        Map(x => x.Name);
        .....
    }
}

public class ImageMap : ClassMap<Image>
{
    public ImageMap()
    {
        Table("Image");

        Id(x => x.Id).GeneratedBy.Identity();
        References(x => x.House);
        //References(x => x.House, "foreignKeyName"); There is also way to reference with specifying foreign key field
        Map(x => x.Name);
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:59:20.500

House.hbm.xml：

```
<bag name="Images" cascade="all-delete-orphan" inverse="true">
    <key column="HouseId" />
    <one-to-many class="Image" />
</bag> 
```

图片.hbm.xml：

```
<id type="int" column="Id">
    <generator ... />
</id>

<many-to-one name="House" column="HouseId" cascade="none" /> 
```

由于您在 images 表中有一个主键并且在您的域对象中没有*Id*属性，因此 id-mapping 应该没有 name-attribute。

# opengl - 通过顶点着色器进行纹理映射？

> ID：11537356
> 
> 赞同：2
> 
> 时间：2012-07-18T08:36:49.260
> 
> 标签：opengl, glsl

[我在这个例子](https://stackoverflow.com/a/3585515/807893)中添加了一个顶点着色器：

```
void main()
{   
    gl_Position = ftransform();
} 
```

然后我得到这张图片：

![在此处输入图像描述](../Images/4f8f6f3fa58b28238bb4a69e696499d6.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:53:12.037

对于使用顶点着色器的纹理映射，您还需要将纹理坐标以及顶点位置传递给片段着色器。可以在[此处找到示例，包括以下示例](http://nehe.gamedev.net/article/glsl_an_introduction/25007/)

```
void main()
{
    // Transforming The Vertex
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;

    // Passing The Texture Coordinate Of Texture Unit 0 To The Fragment Shader
    texture_coordinate = vec2(gl_MultiTexCoord0);
} 
```

# ios - Xcode Interface Builder 在方向更改时自动调整视图大小

> ID：11537360
> 
> 赞同：0
> 
> 时间：2012-07-18T08:36:54.060
> 
> 标签：ios, xcode, uiview, interface-builder, autoresizingmask

我的视图控制器内容由 3 个视图组成。我在 Xcode4 上使用界面生成器。在纵向模式下类似的东西：（ [来源：][[gyazo.com](http://gyazo.com/a43f88e8f2dd52b2ca41c10d3cdc76e3.png?1342602312)][）][![在此处输入图像描述](../Images/4b720d539e6bc07e0db82bd1571a390d.png)](https://i.stack.imgur.com/mw84s.png)

我需要在方向更改为横向时自动调整此内容的大小：视图 2 具有恒定宽度，1 和 3 视图必须增加横向模式的宽度才能与视图 2 具有接近的边界。

是否可以通过界面构建​​器自动调整掩码来实现此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:50:33.170

为此，您可以再使用一个助手`UIView`（比如说**N4**）。将视图 2 和 3 放在视图**N4**内。根据需要将**视图 1**与 **视图 4对齐，然后在****N4**内对**视图 2**和**视图 3**`autoresize mask`执行相同操作。

# c++ - 不做任何事情的结构的构造函数

> ID：11537362
> 
> 赞同：17
> 
> 时间：2012-07-18T08:37:14.513
> 
> 标签：c++, constructor, struct

编辑：为了清楚起见，结构没有做任何事情，因为它没有任何功能。我想我给人的印象是我认为使用初始化列表并将构造函数的主体留空是手头的问题。

假设我正在使用一个结构来保存两个值，并且我有一个构造函数，所以我可以创建一个像这样的任意结构：

```
struct twoValues
{
    int x;
    int y;

    twoValues(int x_, int y_):y(y_),x(x_)
    {}
};

someFunction(twoValues(1,2)); 
```

这使我不必这样做：

```
twoValues anInstance;
anInstance.x=1;
anInstance.y=2;
someFunction(anInstance); 
```

编辑：你是对的，我也可以使用以下内容进行初始化：

```
twoValues anInstance = {1,2}; 
```

我认为这没有任何问题，但我从 C++ 测试中得到了一些反馈，其中一个负面反馈标记是“不做任何事情的结构的构造函数”。我和那个测试我的人接触有限，所以从来没有问过为什么。

这是一件坏事，为什么？我宁愿继续做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T09:01:11.473

这取决于结构的用途。正如其他人所说，构造函数意味着该类不再是 POD，并且不能对其使用聚合初始化。特别是，您不能在命名空间范围内拥有一些东西，例如：

```
TwoValues const table[] =
{
    { 1, 2 },
    { 3, 4 },
    // ...
}; 
```

你可以有：

```
TwoValues const table[] =
{
    TwoValues(  1, 2  ),
    TwoValues(  3, 4  ),
    // ...
}; 
```

但它更冗长，并且它意味着动态初始化，这可能会导致初始化顺序问题。

另一方面，如果没有构造函数，您将无法动态创建临时实例。代替：

```
extern void f( TwoValues const& );
//  ...

f( TwoValues( 1, 2 ) ); 
```

你必须写：

```
extern void f( TwoValues const& );
//  ...

TwoValues tmp = { 1, 2 };
f( tmp ); 
```

如果对象是动态分配的，那就更糟了，因为您要么必须先分配，然后初始化，要么如上所述创建一个临时对象，然后编写`new TwoValues( tmp )`并使用隐式复制构造函数。

你必须选择。根据结构的用途，首选其中一个；一方面，我有很多专门用于静态表的结构，并且故意没有构造函数（并且只包含支持静态初始化的类型），并且大量使用它们来配置代码。另一方面，我也有很多类内部的结构，沿着`Node`树或图中的线；这些几乎总是有一个构造函数，以方便动态创建它们。如果不知道结构在您的应用程序中的作用，就没有“正确”的答案。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T08:40:55.317

### 声明一个空的构造函数有副作用..

即使你的构造函数有一个空的*主体*，它仍然被认为是一个构造函数，因此某些对象属性将会丢失 - 例如对象是 POD。

某些情况需要使用*Plain Old Data* -types，这可能会导致在没有特定原因的情况下执行您所做的事情是不可取的。

在下一节中阅读有关没有默认构造函数的初始化的更多信息。

* * *

### [c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题") && [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

您可以使用值初始化您的成员，而无需显式定义*“不做任何事情的构造函数”*，只需使用以下代码段中的大括号初始化语法。

```
struct Obj {
  int x, y;
}; 
```

```
Obj a = {1,3}; /* a.x = 1, a.y = 2 */ 
```

* * *

### [c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题")

`= { ... }`没有构造函数的缺点是在编写*C++03*时无法在某些情况下使用初始化对象。

*C++11*为您解决了这个问题，相关示例请参见下一节。

* * *

### [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

在 C++11 中，使用大括号 ( `= { ... }`) 进行的初始化被赋予了更多的功能。

从下面的代码片段中可以看出，`Obj`即使我们使用与本文前面相同的初始化形式，也调用了定义的构造函数。

```
struct DoubleBoth {
  DoubleBoth (int x, int y)
    : x(x*2), y(y*2) 
  {}  

  int x, y;
}; 
```

**下面的代码片段在 C++11 之前都是非法的**：

```
DoubleBoth a = {1,2}; /* a.x = 2, a.y = 4 */ 
```

```
struct Wrapper {
  Wrapper ()
    : value {3,4}
  {}

  DoubleBoth value;
}; 
```

```
void func (DoubleBoth v = {1,2}) {  // c++11 only
  ...
}

func ({4,5}); // c++11 only, c++03 requires `DoubleBoth obj (0,1); func (obj);` 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T08:44:06.167

您已不再`twoValues`是 POD，并已阻止结构的实例被默认或值初始化，这通常是理想的属性。就个人而言，如果您需要一种简单的 C++03 友好方法，我更愿意使用免费功能来制作临时实例。

例如

```
twoValues makeTwoValues(int x_, int y_)
{
    twoValues tmp = { x_, y_ };
    return tmp;
}

void f() {
    someFunction(makeTwoValues(1,2));
} 
```

* * *

例如初始化一个类型的成员`twoValues`

```
class X {
    twoValues tv;
public:
    X(int x, int y) : tv(makeTwoValues(x, y)) {}
}; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T08:47:45.703

拥有这种构造函数比使用列表初始化要安全得多。

当您使用列表进行初始化时：

```
twoValues anInstance = {1, 2}; 
```

这实际上取决于结构中成员的顺序。在大多数情况下，一开始是完全随机的。

如果另一个程序员碰巧添加了另一个成员，或者按字母对成员进行排序，它将无法正常工作。

拥有一个通过 NAME 将值分配给正确成员的构造函数要安全得多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-18T08:40:46.960

可能是因为你可以这样初始化它：

```
twoValues anInstance = {1, 2}; 
```

但是，如果没有构造函数，您将无法`anInstance`在 C++03 中的另一个结构的初始化程序列表中初始化 a。例如：

```
struct Bar {
  twoValues v_;
  Bar() : v_(1,2) {} // error!
  Bar() { v_ = {1,2}; } // have to assign value in constructor body
  Bar() : v_{1,2} {} // OK in C++11
}; 
```

所以实际上构造函数做了一些事情，它在 C++03 中确实起到了非常有用的作用。在 C++11 中这不是一个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T08:42:02.220

这个构造器没有任何问题。

此外，它**会做一些事情**，它会影响 x 和 y 的值，这是我对这样一个构造函数的期望。

但是，也许你的公司有一些编码规则说你应该用另一种方式来做。在这种情况下，我建议您询问给您反馈的人并进行必要的修改。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-18T08:42:27.810

构造函数使结构成为非 POD，这在某些情况下可能是不可取的。

如果您的结构没有构造函数，那么您的结构将是 POD ¹，并且您将被允许像这样初始化：

```
twoValues anInstance = {1,2}; //C++03 and C++11 both!
twoValues anInstance {1,2};   //C++11 only 
```

哪个好。

^(1.实际上还有其他的东西使结构非 POD。因此，仅仅因为您的结构没有构造函数并不一定意味着它是 POD。你想看看[这篇文章](https://stackoverflow.com/questions/5666321/what-is-assignment-via-curly-braces-called-and-can-it-be-controlled)来了解其他的东西是什么。)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T08:43:23.050

结构可以有构造函数，语法与 C++ 中的类相同。类和结构之间的区别在于，类成员默认是私有的，而结构成员默认是公共的，但是联合不允许在结构中使用构造函数。不过，您可以在联合上创建一个构造函数。

# c++ - 带有字符串流的 strdup 会导致 valgrind 错误

> ID：11537367
> 
> 赞同：5
> 
> 时间：2012-07-18T08:37:37.107
> 
> 标签：c++, valgrind

我有以下问题：我正在编写一个必须环绕 C 库的 C++ 程序，因此当我与库交互时，我总是必须使用`char*`而不是`std::string`所有操作。为了尽可能避免使用`char*`，我使用字符串流进行格式化，例如：

```
#include <iostream>
#include <sstream>
#include <string.h>
#include <cstdlib>

using namespace std;

int main(int argc, char** argv)
{
  ostringstream str;

  str << argv[0] << "+" << "hello";

  const char *s = str.str().c_str();

  char *y = strdup(s);

  // this I would give to a library function

  cout << y << endl;

  free(y);

  return 0;
} 
```

就输出而言，程序正确输出“./test+hello”。但是，valgrind 给了我很多类型的错误

```
==30350== Invalid read of size 1
==30350==    at 0x402B858: __GI_strlen (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==30350==    by 0x4213475: strdup (in /usr/lib/libc-2.16.so)
==30350==    by 0x41B2604: (below main) (in /usr/lib/libc-2.16.so)
==30350==  Address 0x4341274 is 12 bytes inside a block of size 25 free'd
==30350==    at 0x4029F8C: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==30350==    by 0x410387A: std::string::_Rep::_M_destroy(std::allocator<char> const&) (in /usr/lib/libstdc++.so.6.0.17)
==30350==    by 0x41B2604: (below main) (in /usr/lib/libc-2.16.so) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:45:13.733

```
 const char *s = str.str().c_str(); 
```

str() 返回一个字符串对象。您使用 c_str 获得指向它的一些内部数据的指针，然后在行尾删除字符串对象。但是您仍然有一个指向已删除内部字符串的指针。

你需要这样做 -

```
std::string s = str.str();
const char* s = s.c_str() 
```

以确保不删除字符串。

# matlab - 单个matlab simulink模型的并行计算

> ID：11537368
> 
> 赞同：1
> 
> 时间：2012-07-18T08:37:39.667
> 
> 标签：matlab, simulink

我有一个 simulink 模型，它使用来自 6 个网络摄像头的输入进行实时视频处理。为此，我使用 6 个“来自视频设备”块。这些块的输出经过处理以生成 (x,y) 坐标形式的输出。一次并行处理所有 6 个网络摄像头输出。但是，如果我使用 3 个以上的网络摄像头，matlab 会挂起并停止模拟。我想使用 Parallel Computing Toolbox 在两个处理器内核之间划分 6 个处理块。但是在任何地方都找不到合适的指令来在多个处理器内核之间分配单个 simulink 模型。我正在使用 Matlab R2011a。

好吧，我不能发布我的代码或我的模型，但我可以告诉你我的模型做了什么。它从 6 个 USB 摄像头获取输入，在每个摄像头的每一帧中跟踪一个移动对象，并在 (x,y) 坐标中给出移动对象的位置。因此，我一次得到 6 个 (x,y) 坐标作为输出。在我使用 3 个摄像头并生成 3 个 (x,y) 输出之前，我的模型运行良好。添加第四个摄像头会挂起 matlab 并停止模拟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:09:00.680

恐怕您没有找到将 Simulink 模型扩展到多个内核的说明的原因是因为这些说明当前不存在（直到并包括 R2012b）。Parallel Computing Toolbox 只允许您在不同的内核上同时进行多个单独的模拟（即研究参数变化的影响等）。

对于您的应用程序，您最好使用“正确”的 Matlab 并在 m 函数和/或脚本中编写所有内容。这样，您将能够通过使用诸如`parfor`.

# c++ - URL-编码一个字节字符串？

> ID：11537371
> 
> 赞同：0
> 
> 时间：2012-07-18T08:38:02.787
> 
> 标签：c++, windows, urlencode, sha1, bittorrent

我正在写一个 Bittorrent 客户端。其中一个步骤要求程序向跟踪器发送一个 HTTP GET 请求，其中包含部分 torrent 文件的 SHA1 哈希。我使用 Fiddler2 拦截 Azureus 发送给跟踪器的请求。

Azureus 发送的哈希是 URL 编码的，如下所示：%D9%0C%3C%E3%94%18%F0%C5%D9%83X%E03I%26%2B%60%8C%BFR

哈希在 URL 编码之前应如下所示：d90c3ce39418f0c5d98358e03349262b608cbf52

我注意到它并不像每两个字符放置一个'％'符号那么简单，所以我将如何对这个 BYTE 字符串进行编码以获得与 Azureus 相同的值。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:44:08.537

实际上，您可以每两个字符放置一个 % 符号。Azureus 不这样做，因为例如，`R`它是 URL 中的安全字符，并且`52`是 的十六进制表示`R`，因此它不需要对其进行百分比编码。使用 `%52`代替是等效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:44:16.930

从左到右遍历字符串。如果遇到 a `%`，输出接下来的两个字符，将大写转换为小写。如果遇到其他问题，请使用小写字母以十六进制输出该字符的 ASCII 代码。

```
%D9 %0C %3C %E3 %94 %18 %F0 %C5 %D9 %83 X %E0 3 I %26 %2B %60 %8C %BF R 
```

X 的 ASCII 码是 0x58，所以变成`58`. 3 的 ASCII 码是 0x33。

（我有点困惑你为什么要问。你的问题清楚地表明你认为这是 URL 编码的。）

# ios - iOS：NSMutableArray alloc/init 和 arrayWithObjects 之间的区别：

> ID：11537372
> 
> 赞同：0
> 
> 时间：2012-07-18T08:38:03.937
> 
> 标签：ios, cocoa

和有什么**区别**

```
NSMutableArray* p = [[NSMutableArray alloc] initWithObjects:...] 
```

和

```
NSMutableArray* p = [NSMutableArray arrayWithObjects:...] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:46:55.703

在第一个中，您拥有数组对象的所有权并且您必须释放它们。

```
NSMutableArray* p = [[NSMutableArray alloc] initWithObjects:...];
[p release]; 
```

& 最后一个你不需要释放，因为你没有数组对象的所有权。

```
NSMutableArray* p = [NSMutableArray arrayWithObjects:...]; //this is autoreleased 
```

如果您在此调用 release，那么它将使您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:42:03.787

`[NSMutableArray arrayWithObjects:]`是相同的`[[[NSMutableArray alloc] initWithObjects:] autorelease]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T08:39:58.387

实际上，如果您使用 ARC，则没有区别。

后者基本上只是 的简写`[[NSMutableArray alloc] initWithObjects: ...]`，除了返回的数组是自动释放的（如果您仍在进行手动引用计数，这很重要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:44:11.613

我认为区别在于：`initWithObjects`是实例方法，`arrayWithObject`是类方法。

# java - 在将任何数据放入其中之前创建按值排序的 Map

> ID：11537373
> 
> 赞同：0
> 
> 时间：2012-07-18T08:38:04.157
> 
> 标签：java

我知道这个问题的答案已在许多变体中提供，但我无法为我的特定查询找到它。

我想要一个按值排序的地图，我需要在将数据放入其中之前创建它。我想出了下面的代码来创建它

```
private Map<String, Integer> mapUserScore = new ConcurrentSkipListMap<>(new Comparator<String>() {
    @Override
    public int compare(String o1, String o2) {
        int i1=mapUserScore.get(o2);
        int i2=mapUserScore.get(o1);
        if(mapUserScore.get(o2)!=null && mapUserScore.get(o1)!=null){
            int compare =  mapUserScore.get(o2)-(mapUserScore.get(o1));
            if(compare==0)compare=-1;
            return compare;
        }else
            return 0;
    }
}); 
```

所以基本上我希望地图中的条目按整数值降序排序，以便得分最高的人排在首位。但是，在插入第一个键值对时执行此操作，程序退出并出现以下异常

```
Exception in thread "Thread-0" java.lang.StackOverflowError
at java.util.concurrent.ConcurrentSkipListMap.comparable(ConcurrentSkipListMap.java:658)
at java.util.concurrent.ConcurrentSkipListMap.doGet(ConcurrentSkipListMap.java:821)
at java.util.concurrent.ConcurrentSkipListMap.get(ConcurrentSkipListMap.java:1626) 
```

跟踪后，我发现**int i1=mapUserScore.get(o2)**行会导致此异常。谁能帮我理解这里stackoverflow的原因是什么？我在想，因为在任何项目存储在地图中之前，代码试图通过使用 get() 方法对其进行排序来获取它，因此它会进入一些递归调用并导致异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:56:28.817

如果我理解正确，您希望能够快速获得与名称相关联的分数（因此需要地图），并且您希望能够首先迭代具有最高分数的名称-分数对。

我只会使用 a `HashMap<String, NameScore>`（其中键是名称，值是名称-分数对）。这将为您提供 O(1) 查找。当您需要按分数排序的名称-分数对时，`ArrayList<NameScore>`从`values()`地图中创建一个新的，对其进行排序并返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:45:59.197

get() 方法使用比较器来查找值。您不能在比较器中使用 get ，否则您将获得堆栈溢出。

一个简单的解决方法是将分数包含在键中并对其进行排序。

```
class NameScore implement Comparable<NameScore> {
     String name;
     int score;

} 
```

顺便说一句：当比较器返回 0 时，这意味着它是重复的，它被丢弃了。除非您希望每个分数只有一个名称，否则您需要比较分数和名称。

# python - Matplotlib 底图：弹出框

> ID：11537374
> 
> 赞同：7
> 
> 时间：2012-07-18T08:38:09.073
> 
> 标签：python, events, popup, matplotlib, matplotlib-basemap

我想知道如何在底图中创建一个弹出框。当我将鼠标悬停在某个位置时，它应该会触发弹出框。

这可能吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-19T07:46:18.730

是的，这要归功于 matplotlib 的事件处理框架。我找不到一个已经写好的例子来做你特别感兴趣的事情，所以我写了一个（我将提出它以包含在 matplotlib 源代码中）。

我会彻底阅读[http://matplotlib.sourceforge.net/users/event_handling.html](http://matplotlib.sourceforge.net/users/event_handling.html)以最好地了解发生了什么。请注意，尽管听起来完美的解决方案“pick_event”是针对鼠标单击而不是针对鼠标悬停事件，并且在这种情况下不起作用。

我的代码可以很好地客观化，看起来像：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = plt.axes()

points_with_annotation = []
for i in range(10):
    point, = plt.plot(i, i, 'o', markersize=10)

    annotation = ax.annotate("Mouseover point %s" % i,
        xy=(i, i), xycoords='data',
        xytext=(i + 1, i), textcoords='data',
        horizontalalignment="left",
        arrowprops=dict(arrowstyle="simple",
                        connectionstyle="arc3,rad=-0.2"),
        bbox=dict(boxstyle="round", facecolor="w", 
                  edgecolor="0.5", alpha=0.9)
        )
    # by default, disable the annotation visibility
    annotation.set_visible(False)

    points_with_annotation.append([point, annotation])

def on_move(event):
    visibility_changed = False
    for point, annotation in points_with_annotation:
        should_be_visible = (point.contains(event)[0] == True)

        if should_be_visible != annotation.get_visible():
            visibility_changed = True
            annotation.set_visible(should_be_visible)

    if visibility_changed:        
        plt.draw()

on_move_id = fig.canvas.mpl_connect('motion_notify_event', on_move)

plt.show() 
```

希望一切都应该是相当可读的。代码的高级概述如下：

*   创建 [point, annotation] 对的列表，默认情况下注释不可见
*   注册一个函数“on_move”，每次检测到鼠标移动时调用
*   on_move 函数遍历每个点和注释，如果鼠标现在位于其中一个点上，则使其关联的注释可见，如果不是，则使其不可见。（包含方法[在此处记录](http://matplotlib.sourceforge.net/api/artist_api.html#matplotlib.artist.Artist.contains)）

![结果截图](../Images/5a20164e0b080c17e64cade4fa2f88c9.png)

# excel - 按条件选择单元格组？

> ID：11537377
> 
> 赞同：4
> 
> 时间：2012-07-18T08:38:13.367
> 
> 标签：excel, excel-formula

我有一个这样的excel表：

```
类别 性别 年龄 最大男性年龄
上午 49
              F 38
              F 47
              中号 41
BM 49
              F 38
              F 47
              中号 41

```

我想显示最大值。每个类别的男性年龄。每个类别的人数不是固定的。这可能使用excel公式，还是我必须使用VBA？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:57:30.827

你可以这样做

1.  填写您的类别
2.  在约会时使用数据透视表

![在此处输入图像描述](../Images/35a166f494e9a4632d2a294c72785884.png)

**填写A栏**

*   选择 A 列
*   按 F5 .... 特殊
*   选择空白并点击“确定”
*   在公式栏中输入 =A2（您的第一个类别单元格）
*   点击[cntrl](/questions/tagged/cntrl "显示标记为“cntrl”的问题")一起[输入](/questions/tagged/enter "显示标记为“输入”的问题")

[请参阅 Debra Dalgleish 的网站以获取有关此方法](http://www.contextures.com/xlDataEntry02.html)的良好参考

**插入数据透视表**
- 选择您的数据（我的屏幕截图中的 A1:C9）
- 插入 .... 数据透视表（在 Excel 2010 中）
- 作为`Row`类别中的`Column`标签拖动，性别中的标签拖动 -`Values`年龄中的拖动，然后左键单击领域和选择`Max`

再次，黛布拉的一个很好的[参考](http://www.contextures.com/xlPivot01.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:55:30.147

您必须用值填充整个类别列（双击 A2 单元格的右下角以填充整个范围，等等每个类别）。
但是您将拥有每一行的最大年龄。

![在此处输入图像描述](../Images/c02a2447f33303c60a75c9fb7cf64d5c.png)

在 D 列中添加的公式：

```
{=MAX(($A$2:$A$12=A2)*($B$2:$B$12="M")*$C$2:$C$12)} 
```

`Ctrl`这是您需要使用++验证的数组`Shift`公式`Enter`

# javascript - Javascript新关键字-代码解释请求

> ID：11537382
> 
> 赞同：1
> 
> 时间：2012-07-18T08:38:26.867
> 
> 标签：javascript

你能解释一下下面的代码吗？它在我的浏览器控制台中工作。那么这是如何工作的呢？new 关键字根本不会创建新实例，或者它是怎么回事？

```
 var myObject = new Object(); // Produces an Object() object.
    myObject['0'] = 'f';
    myObject['1'] = 'o';
    myObject['2'] = 'o';
    console.log(myObject); // Logs Object { 0="f", 1="o", 2="o"}

    var myString = new String('foo'); // Produces a String() object.
    console.log(myString); // Logs foo { 0="f", 1="o", 2="o" 
```

请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:45:46.113

> 如果它是一个新实例，它如何将 myObject 的值携带到 myString 变量上

它没有。您正在使用字符串文字初始化您的 String 对象：

```
new String('foo'); 
```

该*foo**与*您分配给对象的三个属性的字符完全不同。为了比较，[将第二个 foo 替换为 bar](http://jsfiddle.net/AExQP/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:45:15.420

这是完全正常的行为：

`new String`创建一个`Object`，如果您键入`"var myString = new String('moo')"`，您将获得另一个具有不同值的对象。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/#se‌​ction_7](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/#se%E2%80%8C%E2%80%8Bction_7)

# java - 在 Eclipse 和 Tomcat 中进行网站开发和测试：javascript 被缓存

> ID：11537389
> 
> 赞同：2
> 
> 时间：2012-07-18T08:38:41.280
> 
> 标签：java, javascript, eclipse, tomcat

我正在 Eclipse 3.7.2 中开发一个带有 jsp 页面的 Web 应用程序，并使用 Tomcat v6.0 对其进行测试。

我的环境几乎是完美的，因为对我的 jsp 或 java 代码的所有更改都可以立即在 Eclipse 的浏览器中使用，因此我可以直接测试任何更改。

但是...我也使用 jQuery，但不是 ;-)，并且我的 javascript 文件中的更改不会立即生效。看起来它们被缓存或复制一次并且不会被替换。即使在重建或重新启动 tomcat 之后，旧文件仍会继续使用。

关于如何解决这个问题的任何想法？

非常感谢，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:41:39.230

这些文件可能已被浏览器缓存。

ctrl-F5 可能会有所帮助，但如果您可以将服务器配置为不为 js 和 css 设置缓存，那也应该有所帮助。

另一种解决方案是通过加载器加载所有此类文件，

```
/load.<site extension, ex php>?file=myscript.js 
```

并让那个“代理”不设置缓存。

我们将其与电子标签一起使用，以便能够将内部版本号用作电子标签，每次构建时都会强制向客户端发送一个新版本，然后缓存到下一次构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:44:14.050

如果您在浏览器中使用[**firebug**](http://getfirebug.com/)，则可以默认关闭缓存，而无需向页面添加代码：

**单击网络**按钮右侧的箭头，然后选择**禁用浏览器缓存**选项。

# android - 如何在新 Activity 中从以前的 Spinner 和 Radiobuttons 恢复状态？

> ID：11537396
> 
> 赞同：0
> 
> 时间：2012-07-18T08:39:20.570
> 
> 标签：android, radio-button, spinner, state

我的问题是：

我在我的第一个活动中实例化了图形 android Spinner 和 radiogroup（包含 2 个单选按钮）等对象。

这些对象的返回值在我的 SQLite 数据库中返回给我。

我想知道状态如何从这些对象中恢复以在另一个视图中重新发布。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:38:25.747

您需要将有关选择了哪些微调器项目的信息传递给主要活动。您可以通过使用用于启动活动的**附加功能**`Intent`来做到这一点，或者您可以将此信息存储在`SharedPreferences`.

# javascript - Javascript：如何在函数完成运行之前对文档进行更改？

> ID：11537398
> 
> 赞同：0
> 
> 时间：2012-07-18T08:39:25.867
> 
> 标签：javascript, html, dom

我想创建一个函数，在调用时会显示“正在加载...”消息，并在完成后立即显示结果。当我这样做时：

```
function load() {
    $('#status').html("loading...");

    /* do something */
    ...

    $('#status').html("done");
    $('results').html(result);
} 
```

“加载”消息永远不会出现，一段时间后用户看到的只是“完成”消息和结果。我怎样才能让“加载”文本出现在我想要的那一刻？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:41:47.437

如果“做某事”是同步的，则浏览器永远不会有机会在两次内容更改之间更新 UI。

要显示更改，您需要执行以下操作：

```
$('#status').html('loading...');
setTimeout(function() {
     // do something

     $('#status').html('done');
}, 0); 
```

该`setTimeout`调用使 UI 有机会在跳入您的“某事”之前更新显示。

请注意，如果可能，您应该尝试确保“某事”*不会*长时间占用您的浏览器。尝试将任务分成多个块，每个块也使用`setTimeout()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:46:37.993

没有看到“东西”部分很难说，但我希望这会有所帮助；

```
function load() {
  $('#status').html("loading...");

  function onLoaded(result) {
    $('#status').html("done");
    $('results').html(result);
  }

  // do your stuff here

  // Not being able to see the "stuff", I guess you do some AJAX or something
  // else which is asynchronous? if you do, at the end of your callback, add
  // onLoaded(result)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:51:04.133

关键在于“做某事”。这取决于你想做什么，但我希望你想使用 jQuery 的[load()](http://api.jquery.com/load/)函数。

许多 jQuery 函数接受任务完成后执行的“回调函数”。load() 文档的回调函数部分应该解释一切。

# smtp - 检测公网IP地址是动态的还是静态的

> ID：11537401
> 
> 赞同：8
> 
> 时间：2012-07-18T08:39:39.790
> 
> 标签：smtp, ip, ip-address, detection

有几个电子邮件服务器拒绝与公共动态 IP 地址的客户端连接。例如，许多接收电子邮件的 smtp 服务器只接受与具有静态 IP 地址的客户端的连接，以避免直接从具有动态 IP 地址的计算机发送的垃圾邮件。

当我使用谷歌寻找答案时，我只发现无法区分静态/动态地址的信息。那么电子邮件服务器是如何做到的呢？是否有任何数据库提供特定 IP 范围的信息？

查看`t-online.de`（德国最大的电子邮件提供商之一）的 MX 记录。尝试`mx00.t-online.de:25`在具有动态 IP 地址的计算机上使用 Putty（原始模式）进行连接。邮件服务器立即关闭连接，甚至不允许客户端发送任何命令，而具有静态 IP 的服务器的连接不会被拒绝。

或者查看以下 SMTP 会话的摘录：

```
220 mailin.rzone.de [joses mi173] ESMTP RZmta 29.19 ready
EHLO Home-PC
250-mailin.rzone.de [joses mi173] greets 87.179.163.89
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-PIPELINING
250-DELIVERBY
250-SIZE 104857600
250 HELP
MAIL FROM:<sender@example.com>
250 2.1.0 <sender@example.com> Sender ok
RCPT TO:<recipient@example.org>
550 5.7.1 87.179.163.89 is a dynamic IP 
```

这是德国托管公司 Strato 的客户的电子邮件服务器，该公司也拒绝访问具有动态 IP 地址的客户。电子邮件地址已更改。我使用了可接受的收件人地址`mailin.rzone.de`，因此不存在中继问题。

[http://whatismyipaddress.com/blacklist-check](http://whatismyipaddress.com/blacklist-check)还指出以下内容：

> 仅仅因为 IP 列在特定黑名单中并不意味着您正在发送垃圾邮件，只是该特定黑名单建议不要直接接受来自该 IP 地址的邮件。大多数[动态分配](http://whatismyipaddress.com/dynamic-static)的住宅 Cable/DSL IP 地址将表明它们已被列入黑名单，这意味着您应该从 ISP 的邮件服务器发送，而不是在您自己的 Internet 连接上运行的邮件服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T23:10:25.333

这可能是使用基于 ISP 提供的有关其哪些 IP 地址被授权直接发送电子邮件的信息的 DNS 黑名单的结果。有关示例，请参阅 Spamhaus 的[策略阻止列表。](http://www.spamhaus.org/pbl/)

**这些信息不能独立发现。** 参与的 ISP 必须向 DNSBL 服务提供有关其网络的信息。

但是，对于其中一些列表，例如 Spamhaus，在某些条件下，公众可以查询信息。您无法直接检测 IP 是静态的还是动态的，但仍然可以检查任何特定的 IP。

您提到 whatismyipaddress.com 错误地将您当前的 IP 地址列为静态。将[他们的黑名单检查工具](http://whatismyipaddress.com/blacklist-check)与您的 IP 87.179.190.52 一起使用，我发现他们目前错误地将其显示为 Spamhaus 的 PBL （以及其他）未列出的。我连接的 IP 被正确描述为动态的，并在 PBL 中列出，暗示这可能是他们的信息基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:17:35.987

我相信您所指的那些电子邮件服务器只会进行反向 DNS 检查，因此只要您有该 IP 地址的 PTR 记录，我认为*应该*没问题。

底线，我不认为动态 IP 分配是邮件服务器的问题。

关于这个问题，我能想到的唯一方法是查看 WHOIS 信息，有一个名为`NetType`. 显然，您不能依赖它，但至少它可以让您了解 ISP 是否确实提供了该信息。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2016-04-28T05:26:04.007

一些 ISP 列出的静态/公共 IP 地址如下 123.123.123.4 static.yourisp.isfine.com

WHILE 动态列出：123.123.123.5 dhcp.mx1.coldservice.com

看？

# c - C: I/O - 从文件中读取整数的最快/最佳方式

> ID：11537404
> 
> 赞同：0
> 
> 时间：2012-07-18T08:39:42.820
> 
> 标签：c, io

目前正在尝试使用 CI/O。我有一个只包含整数的文件，每行只有一个.. 不是逗号等.. 读取它们的最佳方法是什么：

```
//WHILE NOT EOF
    // Read a number
    // Add to collection 
```

我正在创建 2 个工作正常的文件。但最终，我想将它们都读入，将它们加入一个集合中，对它们进行排序，然后将它们打印到一个新文件中。你不需要为我做所有这些，但请帮助解决上述问题..这是我到目前为止的努力：

```
void simpleCopyInputToOutput(void);
void getSortSave(void);

int main()
{
    //simpleCopyInputToOutput();
    getSortSave();

    system("PAUSE");
    return 0;
}

void getSortSave(void)
{
    FILE *fp1;
    FILE *fp2;
    FILE *fpMerged;

    printf("Welcome. You need to input 2 sets of numbers.\n");
    printf("Please input the first sequence. Press 0 to stop.\n");

    if ((fp1 = fopen("C:\\seq1.txt", "w")) == NULL)
    {
        printf("Cannot open or create first file!\n");
        exit(1);
    }

    int num;
    int i = 1;
    while (num != 0)
    {
        printf("Please input value # %d\n", i);
        scanf("%d", &num);

        if (num == 0)
        {
            break;
        }

        fprintf(fp1, "%d\n", num);
        i++;
    }

    printf("Please input the second sequence. Press 0 to stop.\n");
    if ((fp2 = fopen("C:\\seq2.txt", "w")) == NULL)
    {
        printf("Cannot open or create second file!\n");
        exit(1);
    }

    num = -1;
    i = 1;
    while (num != 0)
    {
        printf("Please input value # %d\n", i);
        scanf("%d", &num);

        if (num == 0)
        {
            break;
        }

        fprintf(fp2, "%d\n", num);
        i++;
    }

    fclose(fp1);
    fclose(fp2);

    if ((fp1 = fopen("C:\\seq1.txt", "r")) == NULL)
    {
        printf("Cannot open first file!\n");
        exit(1);
    }

    //WHILE NOT EOF
    // Read a number
    // Add to collection

    //TODO: merge ints from both files, sort and output to new file
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:50:03.727

我建议你使用`fgets`：

```
char buffer[16];
while (fgets(buffer, sizeof(buffer), fp1))
{
    long value = strtol(buffer, NULL, 10);

    /* Use the value... */
}

/* fgets failed ro read, check why */
if (!feof(fp1))
    printf("Error: %s\n", strerror(errno)); 
```

**编辑：**如何获取文件中的条目数：如果您不以任何其他方式跟踪它（例如，将项目数作为第一行），唯一的解决方案可能是读取文件两次。一次计算行数，一次读取实际数字。在计数之后使用`fseek`或`rewind`将读取指针“倒回”到文件的开头。

我个人会把计数放在一个单独的函数中，还有实际的读数。这样，如果您想从多个文件中读取，您就不必重复代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:15:48.150

您的问题可以分为三个不同的部分：读取两个文件、对数据进行排序以及将输出写入文件。我在这里假设两个输入文件尚未排序。如果是这样，问题将大大简化（如果是这种情况，请使用 Google 搜索）。

如果要打开文件进行读取，则必须使用`"r"`而不是`"w"`作为文件打开模式标志。在您的示例代码中，读/写部分以某种方式与您上面描述的内容相反。然后您应该使用 fscanf 从 FILE* 读取格式化输入。`scanf(...)`只是`fscanf(stdin, ...)`. 您可以通过以下方式访问文件：

```
FILE *fin1 = fopen("seq1.txt", "r");
FILE *fin2 = fopen("seq2.txt", "r");
FILE *fout = fopen("out.txt", "w");

if (fin1 && fin2 && fout) {
    // Do whatever needs to be done with the files.
}
if (fout)
    fclose(fout);
if (fin2)
    fclose(fin2);
if (fin1)
    fclose(fin1); 
```

使用动态内存来存储整数是很困难的。`realloc`当您向其中写入越来越多的数据时，您需要使用来增加缓冲区，最后用于`qsort`对数据进行排序。如果需要，其他人可以希望能提供更多的洞察力。

# jquery - 通过 feedBurner 使用事件加载

> ID：11537406
> 
> 赞同：0
> 
> 时间：2012-07-18T08:39:56.523
> 
> 标签：jquery, load

我正在使用 google feedburner 在我的网站上显示提要。脚本如下所示：

```
<div>
<script src="http://feeds.feedburner.com/nu/gbKB?format=sigpro" type="text/javascript" ></script></div> 
```

如您所见，我已将其放置在 div 中。问题是我不想在页面加载/文档准备好时加载脚本。我宁愿通过单击按钮加载 div。所以我尝试了 Jquery 事件加载。我将脚本放在一个空白文档上并保存为 html 页面。然后，我将此 html 页面放在我的服务器上，并尝试使用 jquery 调用它，如下所示：

```
$('#button').click( function(event) {
$('div').load('feed.html');
}); 
```

这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:51:38.070

您可以使用 AJAX 获取内容，如果该内容是 JS，您可以使用`eval`.

# c# - 使用 c# 的当前页面 HTML 输出

> ID：11537409
> 
> 赞同：0
> 
> 时间：2012-07-18T08:40:02.140
> 
> 标签：c#, asp.net

我在一个 asp.net 网站上工作。我需要在 Page Load 事件中获取当前页面的 HTML 输出。我尝试了以下代码。但我没有得到任何输出，它连续执行。

```
protected void Page_Load(object sender, EventArgs e)
{
        Http(Request.Url.ToString());
}

public void Http(string url)
{
    if (url.Length > 0)
    {
        Uri myUri = new Uri(url);
        // Create a 'HttpWebRequest' object for the specified url. 
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(myUri);
        // Set the user agent as if we were a web browser
        myHttpWebRequest.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.4) Gecko/20060508 Firefox/1.5.0.4";

        HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
        var stream = myHttpWebResponse.GetResponseStream();
        var reader = new StreamReader(stream);
        var html = reader.ReadToEnd();
        // Release resources of response object.
        myHttpWebResponse.Close();
        Response.Write(html);
    }
} 
```

这里有什么问题？

有没有其他方法可以使用 c# 获取当前页面的 HTML 输出？

我也尝试了以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    Page pp = this.Page;
    StringWriter tw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(tw);
    pp.RenderControl(hw);

    string theOut = tw.ToString().Trim();
    string FilePath = @"D:\Home.txt";

    Stream s = new FileStream(FilePath, FileMode.Create);

    StreamWriter sw = new StreamWriter(s);
    sw.WriteLine(theOut);
    sw.Close(); 
} 
```

通过使用该代码，我能够在“.txt”文件中获取 HTML。但是执行此代码会导致“一个页面只能有一个服务器端表单标签。” 错误。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:25:34.383

**Page_Render**事件负责为页面生成 HTML，然后调用 Unload 事件。在这种情况下，您应该能够获得页面的 HTML 输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:47:06.270

好吧，您将不得不弯曲时空连续体，因为在 Page_Load 事件中没有 html 输出，并且自然地您在 http 方法中的请求（这不是很糟糕的名字吗？）将再次调用 Page_Load。

开个玩笑，您不能在 Page_Load 事件中输出 html，因为它尚未生成。

更新：

您可以使用 HttpFilter 按页面对生成的输出进行更改，看看这个 SO 答案：

[https://stackoverflow.com/a/10215626/351383](https://stackoverflow.com/a/10215626/351383)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:25:30.630

你可以试试这个...

```
public override void Render(HtmlTextWriter writer):
    {
        StringBuilder renderedOutput = new StringBuilder();
        Streamwriter  strWriter = new StringWriter(renderedOutput);
        HtmlTextWriter tWriter = new HtmlTextWriter(strWriter);
        base.Render(tWriter);

        string html = tWriter.InnerWriter.ToString();

        string filename = Server.MapPath(".") + "\\data.txt";
        outputStream = new FileStream(filename, FileMode.Create);
        StreamWriter sWriter = new StreamWriter(outputStream);
        sWriter.Write(renderedOutput.ToString());
        sWriter.Flush();

        //render for output
        writer.Write(renderedOutput.ToString());
    } 
```

# xcode - 加载视图时，如果模拟器没有，iPad 会崩溃

> ID：11537412
> 
> 赞同：0
> 
> 时间：2012-07-18T08:40:06.300
> 
> 标签：xcode, ipad, crash, nsarray, ios-simulator

当我打开一个新视图时，我的应用程序在 iPad 上崩溃，即使在模拟器中它就像一个魅力。

非常感谢任何帮助！

提前致谢

**控制台输出：**

```
2012-07-18 10:32:19.783 Coverdale[3484:707] *** Terminating app due to uncaught exception  'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 4 beyond bounds [0 .. 3]' 
```

* * *

```
First throw call stack:
(0x3757688f 0x315eb259 0x374bf9db 0x37745 0x35c3f 0x306e3c8b 0x30708481 0x306ccbd5 0x3078f359 0x306d53b5 0x306d53d1 0x306d5263 0x3078f31f 0x307446cb 0x3074400f 0x3078dc05 0x3078c367 0x307e76a7 0x2c4fb 0x3075c93d 0x307d6627 0x33093933 0x3754aa33 0x3754a699 0x3754926f 0x374cc4a5 0x374cc36d 0x376c5439 0x306d8cd5 0x22103 0x220a8)
terminate called throwing an exception(lldb) 
```

**崩溃报告**

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3757688f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x315eb259 objc_exception_throw + 33
2   CoreFoundation                  0x374bf9db -[__NSArrayM objectAtIndex:] + 271
3   Coverdale                       0x00092745 -[PreparationViewController setDetails:newFile:] (PreparationViewController.m:376)
4   Coverdale                       0x00090c3f -[PreparationViewController viewDidLoad] (PreparationViewController.m:70)
5   UIKit                           0x306e3c8b -[UIViewController view] + 167
6   UIKit                           0x30708481 -[UIViewController nextResponder] + 21
7   UIKit                           0x306ccbd5 -[UIResponder _containsResponder:] + 37
8   UIKit                           0x3078f359 -[UINavigationController defaultFirstResponder] + 57
9   UIKit                           0x306d53b5 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 25
10  UIKit                           0x306d53d1 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 53
11  UIKit                           0x306d5263 -[UIResponder(Internal) _promoteDeepestDefaultFirstResponder] + 31
12  UIKit                           0x3078f31f -[UIWindowController transitionViewDidStart:] + 83
13  UIKit                           0x307446cb -[UITransitionView _didStartTransition] + 71
14  UIKit                           0x3074400f -[UITransitionView transition:fromView:toView:] + 999
15  UIKit                           0x3078dc05 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 4937
16  UIKit                           0x3078c367 -[UIViewController presentViewController:withTransition:completion:] + 3123
17  UIKit                           0x307e76a7 -[UIViewController presentModalViewController:animated:] + 31
18  Coverdale                       0x000874fb -[IntroTableViewController tableView:didSelectRowAtIndexPath:] (IntroTableViewController.m:498)
19  UIKit                           0x3075c93d -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 945
20  UIKit                           0x307d6627 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 159
21  Foundation                      0x33093933 __NSFireDelayedPerform + 415
22  CoreFoundation                  0x3754aa33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 15
23  CoreFoundation                  0x3754a699 __CFRunLoopDoTimer + 365
24  CoreFoundation                  0x3754926f __CFRunLoopRun + 1207
25  CoreFoundation                  0x374cc4a5 CFRunLoopRunSpecific + 301
26  CoreFoundation                  0x374cc36d CFRunLoopRunInMode + 105
27  GraphicsServices                0x376c5439 GSEventRunModal + 137
28  UIKit                           0x306d8cd5 UIApplicationMain + 1081
29  Coverdale                       0x0007d103 main (main.m:17)
30  Coverdale                       0x0007d0a8 start + 40

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3291b32c __pthread_kill + 8
1   libsystem_c.dylib               0x34c90208 pthread_kill + 48
2   libsystem_c.dylib               0x34c89298 abort + 88
3   libc++abi.dylib                 0x3229ef64 abort_message + 40
4   libc++abi.dylib                 0x3229c346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x315eb350 _objc_terminate + 140
6   libc++abi.dylib                 0x3229c3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3229c44a std::terminate() + 14
8   libc++abi.dylib                 0x3229d81e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x315eb2a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x374cc506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x374cc366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x376c5432 GSEventRunModal + 130
13  UIKit                           0x306d8cce UIApplicationMain + 1074
14  Coverdale                       0x0007d0fc main (main.m:17)
15  Coverdale                       0x0007d0a0 start + 32 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:55:47.070

我删除了 iPad 上的应用程序并再次运行它。

看起来从我正在读取的文本文件生成的数组的`componentsSeparatedByString:`条目比我访问的要少。

# c# - 如何为项目而不是 TreeViewItem 获取此绑定？

> ID：11537416
> 
> 赞同：0
> 
> 时间：2012-07-18T08:40:24.250
> 
> 标签：c#, .net, wpf, treeviewitem, hierarchicaldatatemplate

我得到以下代码：

```
<HierarchicalDataTemplate x:Key="AssignedRate" ItemsSource="{Binding Children}" DataType="{x:Type local:UnitRateCatElement}">
    <ContentControl>
        <ContentControl.Template>
            <ControlTemplate>
                <StackPanel Tag="{Binding DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">
                    <TextBlock Text="{Binding Category.Description}" />
                    <StackPanel.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Add Unit Rate"
                                      Command="{Binding Path=PlacementTarget.Tag.AddUnitRateCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
                        </ContextMenu>
                    </StackPanel.ContextMenu>
                </StackPanel>
            </ControlTemplate>
        </ContentControl.Template>
        <ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=IsDefined, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TreeViewItem}}}" Value="True">
                        <Setter Property="Template">    
                            <Setter.Value>
                                <ControlTemplate>
                                    <TextBlock Text="Hello, it works!" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</HierarchicalDataTemplate> 
```

行中的绑定： `<DataTrigger Binding="{Binding Path=IsDefined, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TreeViewItem}}}" Value="True">`

不正确（VS 这么说）。我怎样才能让它工作？该类`local:UnitRateCatElement`确实有一个`IsDefined`属性。但我无法获得指向该对象的绑定权。我怎样才能正确绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:44:25.700

尝试

```
Binding="{Binding Path=DataContext.IsDefined, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TreeViewItem}}}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:48:46.297

我认为你应该这样做 -

```
<DataTrigger Binding="{Binding Path=DataContext.IsDefined, 
             RelativeSource={RelativeSource Mode=FindAncestor, 
             AncestorType={x:Type TreeViewItem}}}" Value="True"> 
```

由于您的`RelativeSource`绑定指向`TreeViewItem`没有`IsDefined`属性的 ，它存在`DataContext`于`TreeViewItem`.

更新：

对于您的第二个问题（触发器不起作用），这是因为您正在显式设置模板，即具有更高[优先级](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)`Triggers`的本地值；这应该工作 -

```
<ControlTemplate x:Key="DefaultTemplate">    
    <StackPanel Tag="{Binding DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">    
        <TextBlock Text="{Binding Category.Description}" />    
        <StackPanel.ContextMenu>    
            <ContextMenu>    
                <MenuItem Header="Add Unit Rate"    
                          Command="{Binding Path=PlacementTarget.Tag.AddUnitRateCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>    
            </ContextMenu>    
        </StackPanel.ContextMenu>    
    </StackPanel>    
</ControlTemplate> 

<ControlTemplate x:Key="DefinedTemplate">      
    <TextBlock Text="Hello, it works!" />      
</ControlTemplate>   

<HierarchicalDataTemplate x:Key="AssignedRate" ItemsSource="{Binding Children}" 
    DataType="{x:Type local:UnitRateCatElement}">      
    <ContentControl>     
        <ContentControl.Style>      
            <Style TargetType="{x:Type ContentControl}">     
                <Setter Property="Template" Value={StaticResource DefaultTemplate}>   
                <Style.Triggers>      
                    <DataTrigger Binding="{Binding Path=DataContext.IsDefined, RelativeSource=
                       {RelativeSource Mode=FindAncestor, AncestorType={x:Type TreeViewItem}}}" 
                        Value="True">      
                       <Setter Property="Template" Value={StaticResource DefinedTemplate}>    
                    </DataTrigger>      
                </Style.Triggers>      
            </Style>      
        </ContentControl.Style>      
    </ContentControl>      
</HierarchicalDataTemplate> 
```

# python - Python：写入文件时如何保留 Ä,Ö,Ü

> ID：11537423
> 
> 赞同：0
> 
> 时间：2012-07-18T08:40:51.757
> 
> 标签：python, encoding, utf-8

我在 Python 中打开 2 个文件，更改和替换其中的一些内容，并将新输出写入第三个文件。我的 2 个输入文件是 XML，以“UTF-8 without BOM”编码，其中包含德语 Ä、Ö、Ü 和 ß。当我在 Notepad++ 中打开输出 XML 文件时，未指定编码（即“编码”选项卡中未检查编码）。我的 Ä,Ö,Ü 和 ß 被转换成类似的东西

```
&#252; 
```

当我在 Python 中创建输出时，我使用

```
with open('file', 'w') as fout:
  fout.write(etree.tostring(tree.getroot()).decode('utf-8')) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:28:50.607

要将`ElementTree`对象写入使用字符编码`tree`命名的文件：`'file'``'utf-8'`

```
tree.write('file', encoding='utf-8') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:44:25.873

我认为这应该有效：

```
import codecs

with codecs.open("file.xml", 'w', "utf-8") as fout:
    # do stuff with filepointer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T08:45:06.220

写入原始字节串时，您希望以二进制模式打开文件：

```
with open('file', 'wb') as fout:
    fout.write(xyz) 
```

否则，该[`open`调用](http://docs.python.org/py3k/library/functions.html#open)以文本模式打开文件并需要 unicode 字符串，并将为您编码它们。

解码，就是解释编码（如 utf-8），输出是 unicode 文本。如果您确实想先解码，请在以文本模式打开文件时指定编码：

```
with open(file, 'w', encoding='utf-8') as fout:
    fout.write(xyz.decode('utf-8')) 
```

如果您不指定编码，Python 将使用默认值，这通常是一件坏事。请注意，由于您已经开始*使用*UTF-8 编码的字节字符串，因此这实际上是无用的。

请注意，python 文件操作永远不会将现有的 unicode 点转换为[XML 字符实体](https://en.wikipedia.org/wiki/Character_entity_reference)（例如`&#252;`），您拥有的其他代码可以做到这一点，但您没有与我们分享。

在理解编码和 unicode 时，我发现[Joel Spolsky 关于 Unicode 的文章非常宝贵。](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T10:42:31.737

`xml.etree.ElementTree`Python 2 及其函数的一些解释`parse()`。该函数将源作为第一个参数。或者它可以是一个打开的文件对象，也可以是一个文件名。该函数创建`ElementTree`实例，然后将参数传递给`tree.parse(...)`如下所示：

```
def parse(self, source, parser=None):
    if not hasattr(source, "read"):
        source = open(source, "rb")
    if not parser:
        parser = XMLParser(target=TreeBuilder())
    while 1:
        data = source.read(65536)
        if not data:
            break
        parser.feed(data)
    self._root = parser.close()
    return self._root 
```

您可以从第三行猜测，如果传递了文件名，则文件将以二进制模式打开。这样，如果文件内容采用 UTF-8 格式，则您正在处理具有 UTF-8 编码的二进制内容的元素。如果是这种情况，您还应该**以二进制模式打开输出文件**。

另一种可能性是`codecs.open(filename, encoding='utf-8')`用于打开输入文件，并将打开的文件对象传递给`xml.etree.ElementTree.parse(...)`. 这样，`ElementTree`实例将**使用 Unicode 字符串**，并且您应该在写回内容时将结果编码为 UTF-8。如果是这种情况，您也可以使用**`codecs.open(...)`UTF-8 来编写**. 您可以将打开的输出文件对象传递给提到的`tree.write(f)`，**或者**让**`tree.write(filename, encoding='utf-8')`**文件为您打开。

# scala - 我们所有的模型类都应该是案例类吗？

> ID：11537427
> 
> 赞同：2
> 
> 时间：2012-07-18T08:41:05.983
> 
> 标签：scala

我对 Scala 非常陌生，并试图了解它的各种构造及其用例，因此归结为案例类，它们非常适合模式匹配等。

那么从 MVC 的角度来看，我们所有的模型都应该是案例类来利用这个特性吗？

我查看了 play 框架的示例代码片段，发现了一个将模型类定义为案例类的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:48:05.677

如果您有[摆动组件模型](http://zetcode.com/tutorials/javaswingtutorial/swingmodels/)中的模型，例如表格模型，那么案例类可能不是最佳选择。当案例类（观察上）不可变时，案例类是一个不错的选择，如果您使用它们来表示从数据库中检索的数据，通常就是这种情况。然而，对于摇摆模型，情况可能并非如此，例如，如果允许用户更改表格数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:52:41.717

这并不罕见。有各种库，例如用于 MongoDB 的[Salat](https://github.com/novus/salat/)，它们将从您选择的数据存储中存储和检索案例类实例。

# ruby-on-rails - 无法正确安装 rbenv

> ID：11537429
> 
> 赞同：2
> 
> 时间：2012-07-18T08:41:07.063
> 
> 标签：ruby-on-rails, rbenv

我已按照 rbenv 的安装说明进行操作： [https ://github.com/sstephenson/rbenv/](https://github.com/sstephenson/rbenv/)

但是，没有使用 shim，例如，在运行时，`bundle`它会尝试使用位于目录中`/usr/local/bin/bundle`而不是`/.rbenv/`目录中的二进制文件（并且失败）。它抱怨我的 Ruby 版本应该是 1.9.2 或更高版本 - 但它是！

跑步`rbenv rehash`似乎无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:10:22.100

您是否遵循“例如，要安装 Ruby 1.9.2-p290，下载并解压源代码，然后运行”？

您必须访问[Ruby 网站](http://www.ruby-lang.org/en/)并下载要安装的 ruby​​ 版本。下载后，解压存档并将目录更改为解压后的存档，然后运行命令

```
./configure --prefix=$HOME/.rbenv/versions/1.9.3-p194 
```

那应该行得通。

# image - JavaFX：在 .FXML 文件中嵌入编码图像

> ID：11537434
> 
> 赞同：8
> 
> 时间：2012-07-18T08:41:37.360
> 
> 标签：image, base64, javafx, fxml

我想将编码图像嵌入到 FXML 中（我需要这个，因为我正在编写 svg 和 fxml 之间的转换器）。我试过这个：

```
<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
    <children>
        <ImageView fitHeight="150.0" fitWidth="200.0" layoutX="153.0" layoutY="94.0" pickOnBounds="true" preserveRatio="true">
            <image>
                <Image url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYEAYAAACw5+G7AAAABmJLR0T///////8JWPfcAAAA CXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAYAAAAGAB4TKWmAAAI1UlEQVRYw61YS4gc VRf+7r1Vt+pWdfdMd0/P9PTMOCGJBpNI4gPiRrPQnSKIigQEN4LgQoTgwpU7QYOggop7UVA3 ESMEDKiJmIlEhUwS85pM5tGP6Wemn/V2cVJ2xxjCr//d3K66davOd873nXNus+jGwH8cjuM4 jgN0Op1OpwOEYRiGIcAY54wBQgihaUAqlUwmkwDnnEcRwBhjmvbvv8v+VwCO43muC1y6dOHC 0hJQKhWL5TIghKYJARQK09PpNDA1lc9nMoBlWVYyCdRqtdrmJrC+vr5eqQAAYwAwOzs3VygA 09NTU1NTBIhW/k8AoigMgwBYWbl2rVgEfvnl998XF4F6vVq9dg2YmUkmGQNyOSn7fYBzxlx3 uF8IIYQANE3XlaI7ySRQrfq+YQBra9Vqrwdks7nczAzw6KOPPPLww0AymUwmEncGdFsAnud5 vg9cvbq8fPUq0GiUSpUK0GqVSouLgBC9XqkEWBbn3S6g62HougDnUaTrIx9gjHE+vA4C8r3r apquA5ubvp9IAL0eY9kskMnMzc3PA/feu3v3nj0UmXz+9gD+Yl8URVEQEHejCKhUyuVKBbBt KcMQaDY3N5eWgPHxKNrYIGo4Du2UEghDQCkgioRgDBg1enTE9w2DZtsG+n2g23Wc1VVASt9P JoFOp93u9YBqVdMaDWBiIpNJp2+NyC3yKZfJ8EwmnVYKuHLl119//BHQ9SCoVgEpLcs0ASkB 0xz1LGNCAFE09LIQAOdCcA6EITkoikjcntfrtVo0dzr0PgBw3VrtwgXAMAqFmRmA87Ex2wba 7Xa70wFSqVQqmfwHAO02IfZ9ikCjsbp6/jwA9HrlMpBIJBKmCWhaFHFOESNvxlnmDmJjBKDV qtfX1gDfJ8OF4FzXAc41jTHAMDgfDIBy+cKFEyeA3bvn5rZvB8rlanVjA0gkSBucUyT+AlAs rq8Xi0A6nUgwBpRKKyvnzgGZjG1ns2TCKLfjEYacB8HNstd1Sp+jhl+/XqksLwOu2+/3+yRu 0wTCUNelJACjtJOSMd8HVlfPnv3pJ0CpfH7vXqBebzSaTSCXy2YzGUCL02K93my2WgBjjUal AqTTqVQqBei6rqdSQBRx7vv/5NmbRfp3rnc6jcb6OjAYtNutFqAUGRqGJOIo4lxKQErSjqZR vYjXB4NajbSRyVAkKpUwHAGwsVGt1moAY0KEIeC6m5uNBpDLFQrT08Tt2POGAXz00a5djz0G vPLK2bPHjo36nQrSxx/v3Ll/P/DSSwsLX30FNJvV6vo68O23L7546BDw9NOff/7GG8DXXx84 8NZbuON4/vkjR95/H+h2iXqtFucTE0AQBEEQAFq/3+12uwBjvh+GgKZJSRRQKp0G4ir5wQfb tu3bB7z22tLSwgLw3ntbt+7bB7z66pUrCwuxEoajUllZuXiR9ofhaMQMI5EAnnnm8OG33yYq cQ588cWTT77+OnDgwNGjH344rNxxpR4Mer1GA/A8XbdtYDAYDBwH0FzXdXs9yt+eB1iWlEoR EEqLN5d6IegF8TBNw5CSPFQqjT4XRf0+oGk3c1sITaP3kYGc0/xXVtE0zTQBxug5IhYQBI7j +6Q53wc870YEhkWM8zAEut1Op9EA0unBoNEAdF2psbGbuT1aadfW/vjj1Cmg3a7Xy+VRQ4TQ 9SGnRx1gWeRhKYdiH64bBj3PuWHQfs4BxrrdXo9ieJPWDMMwLGt4o9msVFZWgMXF48e/+QZ4 553Z2fvvH64fOjQ398ADw+vPPnv88ZdfJs+N1nPGdJ2Kla6P1ovYcM6lpAjcvM65ZeVygBDj 44UCucI0KVK0j3NNA3T9RouilG3bNlCrNRpKAUqZplJAGHpevT588VNPffrpwYNAFGmaYVDa Mwzg8OFnn33zTfKUlMBzzx058u67wJdfPvHEwYPD/S+88N13n3wypEYQUG8kpWUlEsPnUqlC Yds2IJXK5ebngXL5zJnvvweEsKxUCjAMxmwbME3TNAyAua7rel4ULSycPn36NJDLed7KCtBu Ly+fPDnsMjknT0QReUCIeI65SpRhjICRCqjAUaEiT3NOkeGccyEApXK5LVuAZHJmZscOIAg8 z/OG1Lt06dSpo0cBy5qc3L4d6HTC0DCA++7btWvnToDruq5rGpDJjI+PjQHj41u27NkDhKFS 2ezQ8JjTUlJ+FsIwTBMQQkoSHYk5zh6apmlKAbpO67HhsWFC0LVtp1L5PNDr9XrtNqCUZY2N Af1+rXb5MsC5UrZN30kkgOnpfH5ycoRy8Y/ZWeo9XJdzpYBCYdeu/fupDihFBpD4yJNxtogB MsZYbGicRWiWcnRfvC5lJjMzAwBKSQkopZRhAI6zuVkqAcXi0tL588D8/D337N0L+D4lkGw2 k6HO4G8Ahk0SNWUTE3fdtXs3oFQ2Oz8PBEEUUV4misSejimkaYYRAzUMQEqaY0/HAHSdOC8E JY8goN5L0+hEd+3amTM//wyY5sTE3XcD/b7nCUEHpOnpW7vRW5qAQoFORrVao9HpANnsli17 9wKDAR1EHIfOCYah61T6yTAhYmDDCBClqNfRNF3XdaKUUiRC6oWo8p87d/LksWNAq9XvRxHg OIZBVKFWw7ZtezRb3hZAfIKani4U8nng+vUgME3A88bHd+wAVlZ6PaWAy5fL5XYbcJzBgAoW Y2FInyONxE0aaccwbDuVogIURcDS0rlzv/0G/PDDiRPHjwOLi+Wy4wCDgaZNTgJjY4mEZQHZ bDabTuO247bH6RjI9u1bt87PEzWkBNbWqOlbXS2VlpeBzc0w9DxgYqLbbTYByzLNdhswDCnj dCsl4PvVar0OuK7nUb0ZDACgWh0MDIN6r/l5YM+ehx568MEhgDuNf32ov3jx0qWrV4FisVQa bSFmZ6em0mlgbq5QKBTI84kEUC4Xi6USsLFRrzebQ63Nzs7MFApAPj85mc1SZb7T2eI/Afj7 iHf7vu8HAdDtUr/vODeaLY1zzgHTVMo0qXeiyFCd+K9/q/wJwRXXOxs1rPEAAAAASUVORK5C YII= " preserveRatio="false" smooth="false" />
            </image>
        </ImageView>
    </children>
</AnchorPane> 
```

如您所见，我使用了对 HTML 或 CSS 执行的标准方式，通过图像的 Base64 编码传递数据 url。在这种情况下，它不会返回任何错误，但不会显示图像（将 url 传递给与文件相同的图像有效，但这不是我想要的）。

有人可以帮助我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T05:18:29.387

我能够做到这一点，但不是在 FXML

```
String rocketImgStr = "iVBORw0KGgoAAAANSUhEUgAAADIAAAAdCAYAAADoxT9SAAAACXBIWXMAAAsYAAALGAGJqbUQAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAACHRJREFUeNrMmH9s1OUdx1/fH/e9u2/vrgdtaaXt9ZDRXoeGEsAxN0EWGWwoohFnTGrqZkxMxEW00TkzFrcpuKgJJFIyzeIgGzAX4485nSmdKM2mrGUtIBMKpfWoHOXo9bi77933x7M/er3Qlh9lk+mTPMl9c8/3+X7ez/v9fJ7P85YYaQGgRoVZHoj4ITIVaqZAuR+KPeBWgAw4Q5D4DI73QbuAt4F2viKtGegAEl8DcQ+IjSB2gTgKIgVCnNNtEDEQfwXxAGQD8Aeg5ssGIQGzgXLApUJAgakyVHhGGKmuhJo6CC0A9zfzg+VzJtgD3AMdR2EF8PmXCeRS/weBmcCCErj5u3DTQ6DNA1z5QbuBpfBMDp4AyoDpwLT87yDgBRTAGVEoZ4AYcCLfh640kPO1xdfClm1QFwb+DewFfuF2x/Sqqu5QKHT1jBkzplVVVekVFRVScXExPp8PRVGwLItUKsXQ0BADAwPi+PHjZ48cOTJw9OjRgydPntwLfAB0Asn/BxCA394iy02ltbV45s3j6oULmXfNNdSEQgSDQYLBILIsT2qiXC5HNBqlq6uL999/39q1a9cn3V1d7zhC/BH4+ErI8Brgyfr6+r0PrlmT3f7GG+Jgb68YSqWEkc2KVColEomEiMfj4vTp0yKZTArTNMXltqGhIfHmW2+J+XPmZHzwGrDsi2DEAywOBoP3Lly48PuGYfg3btxIfX09lmWRy+WwLAshxIQXhRDIsoymabjdblRVRZImL4DmpiYWvfIKHXPmOC8ODr4Ri0bXA/+40PhL8X/37bff/vbWrVt/8PTTT/vD4TC6rpNOp0mlUpimeV4QAJIkIYTAMAyGh4dJJpPYtj1pIDnbJgKsi8flv91336rGxsZWCX6ZTx6XDaR0+fLlcm1tLYlEAsMwsG37gsFfCJCmadi2zb59+2hra+PAgQNYlnXx92QZA6C/n/pNm/jdDTcU7dix46dXh8NvAXPHj1cvEYcVi8WIRqOcOXMGy7IuSx4AHo+HQ4cOsX37djKZDJqqkDMtinw+Ghsbqa2txbZtXC4XiqIU5h+zWPE4PPAAq9evZ35b27cebm5+5/VXX30I2DFZRrBtG8dx/qvsoGkan376KZs2bULXvUiqi88NC9mlobs1nnvuOQ4fPkwulyORSJBIJEilUhiWhRj/TduG5mZmbNjAzi1bpj3+1FNbJUlaM1kgWZfbjUfX0bxeZFXFU1SE7vNN6F5dH8OWJElYlsW2bdsIhULET51i6bJlfOPBtfQ23Eh3NEaospKdO3cWmLAsC8MwMLLZC0fU0oJ25508c++9rl+3tGyUVPVRAFWFh70j2Wm88C3gxo9bW4n19JDJZOg/cICXX3gBn883hiXbcdCDQe646y50XcdxHFRV5ciRI6TOniVn2yy95VZWfm85BlDx9ZlszZokD+3BMk0GBgaYNm0aQggkSbq0fFtbYdEiHtm8mTOPPrrh2WefTal18PydgH0eJABn33uPHKAB3wZOdnfz+Tl5WwJyQKffz9Jbby2AlGWZ06dPo7lcxA2Lw5WzSQM6sFKGvrnXsr+zjakelWQySXl5+eXp9tgxWLWKnyxeLO9U1Z+rh+ChDeC+ACPfWbZ8+cpwOIxhGHzQ0cGKFSsQQCaTKayc7TjcUVpKMM8GgOM4BAIBsrkcJbrO7o5/MX12NbcpI4VXTf9+orobK5fD7/efdx+ejxcBpPLdbxj87N137WPwpGrDpvRFstZ1S5asXLRoEUNDQ8SzWe5oakJVVbLZbOFDjhD4fT68Xm8hINu2CYfDuDSN0mAx/bvfZIfkcGJOhOpjB/mgtZXAlCm4AgEqKiowTXMCiGy+wpTyq5oGhvOVZymwDsTz8Ajwm0ulX3c2k+Hs8DDJRIJMKsVnfX2UlJQUAh7VdTAQGJMyHcfB6/WyevVqWlpamFtXx2BnG51/f5c+r5tgSQnRaJTm5maEEBPOplEgfYCZD94CpgB+4DHIvQQ/BlomlX4TiQSxWIzBwUFM05ywGWVZpqSkBF3XJwRjmiZz587l/vvvZyAWI5tJM1UBI5XCMAzWrl1LdXX1BDbGS8vKBxrOs3IPDLwEd4+CmMyBqKqqOuagGl9P6bpOUVFRAdT41TVNk/nz5xOJROjp6WF4eJiysjJmzZqFoihkL5JqRZ6JkjwTbwKPw+4+WAN0Xc7Jfqq9vd0uLi5WSktLUVUVVVULwUqSRDqd5sSJE3g8HrxeL5qm4XK5CswJITBNE6/XS0NDA7IsY9s2pmletPYSeQnVAfuBJyC5DZ5npA9fbony+z179vR1dnY2RSKRm1VVDbrdbkpLS0mn0xiGUaiCc7kcyWQSRVFwuVwFQKPgFUXBNE1kWS6wey7YcySArutoLhc9wE6wW+C1QVgP/POLuFjVAysjkchtNy5Z0nDd4sXuSCRCSSCA7DiYeTCjJc1ocJIkFYKXZRlFUcY8jwIdLfVTqRQdnZ38at269CddXW+nYTOw60rdEF9eJUk/9NfWojU0MHPBAmbX1VE1fTo+nw+Xy1WQn+M4E4CNgnAch2w2Szwep6enh48++shsb2/f393d/RfgT3l358rd2efBlpegzgaOAgeAFrf7pF5Zua+6qmpmKBQqr6io0MvKyhS/34/H40FRFGzbLtxPTp06Zff39yd7e3ujvb29B2Ox2F7gQ2BfPjldORflKrh5Fdz0GGiVQDy/yf4M/AieMUdclKnAVee4KMVAUT6DOvlD+QwwCAzkXZQk/2M7r6+lQIUONVOhugZqZkPoenBfD1SOm+B1YA109H/JvtYYp3EmiCYQm0F8COIzELlxTmMCxGEQr4JohKzvK+Q0TvB+AxAphppiKC+CYm2kqCSb934H4PjAiOf7lfF+/zMAVaPsnAfVjSoAAAAASUVORK5CYII=";
BASE64Decoder base64Decoder = new BASE64Decoder();
ByteArrayInputStream rocketInputStream = new ByteArrayInputStream(base64Decoder.decodeBuffer(rocketImgStr));

Image rocketImg = new Image(rocketInputStream); 
```

希望有帮助。

# c++ - 我们可以使用已经打开的套接字创建 boost 套接字吗？

> ID：11537436
> 
> 赞同：4
> 
> 时间：2012-07-18T08:41:39.017
> 
> 标签：c++, sockets, boost, boost-asio

我有一个代码可以通过 stunServer 为我的点对点软件创建一个套接字，我想知道是否可以创建一个已打开套接字的 boost::udp::socket ？

我已经在 boost 文档中进行了搜索，但我没有发现任何允许这样做的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:53:29.903

是的。

```
io_service ios;
ip::udp::socket socket(ios);
int native_socket = ::socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
socket1.assign(ip::udp::v4(), native_socket); 
```

有关更多信息，请参阅[此示例代码](http://svn.netlabs.org/repos/ports/boost/trunk/libs/asio/test/ip/udp.cpp)。

# xml - 如何将大量 XML 放在一起并在 Windows 中进行转换

> ID：11537441
> 
> 赞同：0
> 
> 时间：2012-07-18T08:41:52.850
> 
> 标签：xml, windows, xslt, cmd

我在文件夹中有很多 XML 文件 - 一本书的一页一个 XML。我需要将所有 XML 放在一个根 XML 文件中，然后使用 XSL 进行第一次转换以删除命名空间和不需要的属性（我有一个 XSL 样式表），保存新的 XML，然后使用另一个样式表再次转换它（我也准备好了）并保存结果文本文件。我在家里用一个 XML 文件在 Oxygen 中完成它，但我需要使这个过程自动化，用一些脚本运行它。我必须在 Windows 中工作，没有 Oxygen，客户没有任何软件，想自己制作。如何在不使用 !ENTITY 标签编写根 XML 的情况下将 XML 放在一起？我可以使用哪些软件工具（用于 XSL 转换）？如何为 Windows 制作这样的脚本？我用 Python 和一些 Java 编程。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:55:21.823

要将 XML 文件放在一起以便您可以将它们作为一个文件进行处理，一种选择是编写一个 cmd.exe 批处理脚本，该脚本会生成一个根 XML 文件，其中包含对所有 XML 文件的外部实体引用。

也许是这样的（假设没有扩展名的 XML 文件名是允许的实体名称）：

```
@echo off
del root.xml 2> nul
(
    echo ^<!DOCTYPE root [
    for %%f in (*.xml) do (echo ^<!ENTITY %%~nf SYSTEM "%%f"^>)
    echo ]^>
    echo ^<root^>
    for %%f in (*.xml) do (echo ^&%%~nf;)
    echo ^</root^>
) > root.tmp
move root.tmp root.xml > nul 
```

或者，您可以只使用一些 XML 标记输出文件名，然后使用`document()`XSLT 中的函数访问这些文件。

要从命令行运行 XSLT 转换，您可以使用例如[msxsl.exe](http://www.microsoft.com/en-us/download/details.aspx?id=21714)命令行实用程序，它是可能已经安装在您的系统上的 MSXML 库的前端。

```
msxsl root.xml stylesheet.xsl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:02:13.480

请参阅 XSLT 规范以了解如何使用[多个源文档](http://www.w3.org/TR/xslt20/#document)。

# iphone - 使 ImageView 出现在 Safari Top Sies 中

> ID：11537452
> 
> 赞同：1
> 
> 时间：2012-07-18T08:42:36.810
> 
> 标签：iphone, ios

您可能已经看到，当我们打开 Safari 浏览器并单击 Net Tab 时，图像被放置在曲面屏幕中。它列在顶级站点下。所以我的问题是我有一个 UIImageview，我需要像在 Safari 中一样使该图像视图弯曲。我怎样才能做到这一点？我可以使用 QuartzCore 吗？请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:04:43.093

是的你可以。您只需要从 QuartzCore/QuartzCore.h 对 CATransform3D 进行研究。您将能够根据需要缩放/旋转/透视您的图像，为它们提供与 Safari 相同形式的站点视图。不幸的是，实施取决于您，这是一项艰巨的工作。

只是为了不让你“独自在黑暗中”，这里是一个图像的透视图：

```
UIView *myView = (UIView*)instance_to_your_UIImageView;
    CALayer *layer = myView.layer;
    CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
    rotationAndPerspectiveTransform.m14 = 1.0 / 500;
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 0.0f, 0.0f, 1.0f, 0.0f);
    layer.transform = rotationAndPerspectiveTransform; 
```

下面是“之前”和“之后”：

![前](../Images/c3fb4f5ab4c12e3c09ab1325efd6c908.png) ![后](../Images/ef5a8f157919a46fd4d37c334dd62bfb.png)

干杯!

# hibernate - 无法将工厂绑定到 JNDI 需要在环境或系统属性中指定类名

> ID：11537453
> 
> 赞同：10
> 
> 时间：2012-07-18T08:42:36.873
> 
> 标签：hibernate

* * *

你好 ，

我正在尝试运行导入的开源，但运行后出现此错误：它让我发疯，这是一个巨大的项目，我不知道应该从哪里开始。

```
Running test.hibernate.softdelete.jointablewhere.SoftDeleteAssociationTest
main INFO [org.hibernate.cfg.Configuration] - configuring from resource: softdelete/softdelete-hibernate.cfg.xml

main INFO [org.hibernate.cfg.Configuration] - Configuration resource: softdelete/softdelete-hibernate.cfg.xml

main INFO [org.hibernate.cfg.Configuration] - Configured SessionFactory: java:hibernate/SessionFactory

main INFO [org.hibernate.cfg.AnnotationBinder] - Binding entity from annotated class: test.hibernate.softdelete.jointablewhere.Parent

main INFO [org.hibernate.cfg.annotations.EntityBinder] - Bind entity test.hibernate.softdelete.jointablewhere.Parent on table Parent

main INFO [org.hibernate.cfg.AnnotationBinder] - Binding entity from annotated class: test.hibernate.softdelete.jointablewhere.Child

main INFO [org.hibernate.cfg.annotations.EntityBinder] - Bind entity test.hibernate.softdelete.jointablewhere.Child on table Child

main INFO [org.hibernate.cfg.search.HibernateSearchEventListenerRegister] - Unable to find org.hibernate.search.event.FullTextIndexEventListener on the classpath. Hibernate Search is not enabled.

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - Using Hibernate built-in connection pool (not for production use!)

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - Hibernate connection pool size: 20

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - autocommit mode: false

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - using driver: org.h2.Driver at URL: jdbc:h2:mem:softdelete

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - connection properties: {user=sa, password=****}

main INFO [org.hibernate.dialect.Dialect] - Using dialect: org.hibernate.dialect.H2Dialect

main INFO [org.hibernate.engine.jdbc.JdbcSupportLoader] - Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4

main INFO [org.hibernate.cfg.SettingsFactory] - Database ->
       name : H2
    version : 1.2.144 (2010-10-15)
      major : 1
      minor : 2

main INFO [org.hibernate.cfg.SettingsFactory] - Driver ->
       name : H2 JDBC Driver
    version : 1.2.144 (2010-10-15)
      major : 1
      minor : 2

main INFO [org.hibernate.transaction.TransactionFactoryFactory] - Using default transaction strategy (direct JDBC transactions)

main INFO [org.hibernate.transaction.TransactionManagerLookupFactory] - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)

main INFO [org.hibernate.cfg.SettingsFactory] - Automatic flush during beforeCompletion(): disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Automatic session close at end of transaction: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - JDBC batch size: 15

main INFO [org.hibernate.cfg.SettingsFactory] - JDBC batch updates for versioned data: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Scrollable result sets: enabled

main INFO [org.hibernate.cfg.SettingsFactory] - JDBC3 getGeneratedKeys(): enabled

main INFO [org.hibernate.cfg.SettingsFactory] - Connection release mode: auto

main INFO [org.hibernate.cfg.SettingsFactory] - Default batch fetch size: 1

main INFO [org.hibernate.cfg.SettingsFactory] - Generate SQL with comments: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Order SQL updates by primary key: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Order SQL inserts for batching: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory

main INFO [org.hibernate.hql.ast.ASTQueryTranslatorFactory] - Using ASTQueryTranslatorFactory

main INFO [org.hibernate.cfg.SettingsFactory] - Query language substitutions: {}

main INFO [org.hibernate.cfg.SettingsFactory] - JPA-QL strict compliance: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Second-level cache: enabled

main INFO [org.hibernate.cfg.SettingsFactory] - Query cache: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Cache region factory : org.hibernate.cache.impl.NoCachingRegionFactory

main INFO [org.hibernate.cfg.SettingsFactory] - Optimize cache for minimal puts: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Structured second-level cache entries: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Statistics: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Deleted entity synthetic identifier rollback: disabled

main INFO [org.hibernate.cfg.SettingsFactory] - Default entity-mode: pojo

main INFO [org.hibernate.cfg.SettingsFactory] - Named query checking : enabled

main INFO [org.hibernate.cfg.SettingsFactory] - Check Nullability in Core (should be disabled when Bean Validation is on): disabled

main INFO [org.hibernate.impl.SessionFactoryImpl] - building session factory

main INFO [org.hibernate.impl.SessionFactoryObjectFactory] - Factory name: java:hibernate/SessionFactory

main INFO [org.hibernate.util.NamingHelper] - JNDI InitialContext properties:{}

main WARN [org.hibernate.impl.SessionFactoryObjectFactory] - Could not bind factory to JNDI
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.getNameParser(Unknown Source)
    at org.hibernate.util.NamingHelper.bind(NamingHelper.java:75)
    at org.hibernate.impl.SessionFactoryObjectFactory.addInstance(SessionFactoryObjectFactory.java:113)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:367)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.cfg.Configuration$buildSessionFactory.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)
    at test.hibernate.softdelete.jointablewhere.SoftDeleteAssociationTest.setup(SoftDeleteAssociationTest.groovy:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.spockframework.runtime.BaseSpecRunner.invokeRaw(BaseSpecRunner.java:235)
    at org.spockframework.runtime.BaseSpecRunner.invoke(BaseSpecRunner.java:217)
    at org.spockframework.runtime.BaseSpecRunner.invokeSetup(BaseSpecRunner.java:198)
    at org.spockframework.runtime.BaseSpecRunner.runSimpleFeature(BaseSpecRunner.java:181)
    at org.spockframework.runtime.BaseSpecRunner.doRunFeature(BaseSpecRunner.java:174)
    at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.spockframework.runtime.BaseSpecRunner.invokeRaw(BaseSpecRunner.java:235)
    at org.spockframework.runtime.BaseSpecRunner.invoke(BaseSpecRunner.java:217)
    at org.spockframework.runtime.BaseSpecRunner.runFeature(BaseSpecRunner.java:152)
    at org.spockframework.runtime.BaseSpecRunner.runFeatures(BaseSpecRunner.java:129)
    at org.spockframework.runtime.BaseSpecRunner.doRun(BaseSpecRunner.java:96)
    at sun.reflect.GeneratedMethodAccessor30.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.spockframework.runtime.BaseSpecRunner.invokeRaw(BaseSpecRunner.java:235)
    at org.spockframework.runtime.BaseSpecRunner.invoke(BaseSpecRunner.java:217)
    at org.spockframework.runtime.BaseSpecRunner.run(BaseSpecRunner.java:73)
    at org.spockframework.runtime.Sputnik.run(Sputnik.java:57)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:127)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:51)
    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:103)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
    at $Proxy0.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)

main INFO [org.hibernate.impl.SessionFactoryImpl] - closing

main INFO [org.hibernate.connection.DriverManagerConnectionProvider] - cleaning up connection pool: jdbc:h2:mem:softdelete

main INFO [org.hibernate.impl.SessionFactoryObjectFactory] - Unbinding factory from JNDI name: java:hibernate/SessionFactory

main INFO [org.hibernate.util.NamingHelper] - JNDI InitialContext properties:{}

main WARN [org.hibernate.impl.SessionFactoryObjectFactory] - Could not unbind factory from JNDI
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

这是softdelete-hibernate.cfg.xml

```
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<!-- a SessionFactory instance listed as /jndi/name -->
<session-factory name="java:hibernate/SessionFactory">
    <!-- properties -->
    <property name="connection.url">jdbc:h2:mem:softdelete</property>
    <property name="connection.driver">org.h2.Driver</property>
    <property name="connection.username">sa</property>
    <property name="connection.password">sa</property>
    <property name="dialect">org.hibernate.dialect.H2Dialect</property>
    <property name="hbm2ddl.auto">create</property>
    <property name="hbm2ddl.import_files">softdelete/import.sql</property>
    <property name="validator.apply_to_ddl">false</property>
    <property name="javax.persistence.validation.mode">none</property>
</session-factory>
   </hibernate-configuration> 
```

请问有什么想法吗？先感谢您

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T10:11:29.840

在 softdelete-hibernate.cfg.xml 中，删除会话工厂名称。尝试仅使用

```
<session-factory>
   <!-- ... -->
</session-factory> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-08T03:10:32.023

只需`name`从 `<session-factory`name="SessionFactory"中删除`>`

# magento - magento - 初始化时如何向 eav 模型添加属性

> ID：11537454
> 
> 赞同：0
> 
> 时间：2012-07-18T08:42:36.963
> 
> 标签：magento, model, entity-attribute-value

我无法在*初始化*时将 _data array() 中的属性添加到 EAV 模型（扩展产品模型） ，例如通过集合调用（Mage::getResourceModel('catalog/product_collection')）。

我尝试用 setValue() 扩展 _construct()，但不起作用，这里 _data 是空的！

**何时填充_data？**

当我设置了 _data 的产品模型并且我可以*在初始化阶段*对其进行操作时？

我不想在 db 中设置一个属性，因为这个属性是动态的。

谢谢回复！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:11:26.703

你总是可以在`_load_after`观察者中做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:41:29.893

加载哪些属性以及何时加载它们取决于您“站立”的位置以及您是否启用了平面目录。

一般来说，要将属性加载到目录/产品集合中，您需要像这样指定它：

```
<?php
$collection = Mage::getResourceModel('catalog/product_collection')->addAttributeToSelect('my_custom_attribute') 
```

# android - 如何将列表存储到 sqlitedatabse 中？

> ID：11537465
> 
> 赞同：0
> 
> 时间：2012-07-18T08:43:35.067
> 
> 标签：android, emulation, contacts, store, sqlite

我需要将联系人列表存储到 sqlite 数据库中。我已经使用 Contacts Content Provider 在我的项目应用程序中显示了联系人。我只需要将列表从模拟器存储到数据库中。有谁知道怎么做？请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:48:01.427

没有大碍。

将您的`ContactModel`转入`ContentValue`：

```
ContentValues values = new ContentValues();
values.put("name", name);
values.put("number", number); 
```

然后将其插入数据库：

```
database.insertOrThrow(databaseTable.getTableName(), null, values) 
```

但请记住，从 SQLite 数据库获取联系人总是和从 SQLite 数据库获取联系人一样快，`ContentProvider`因为它是相同的技术。

# java - 获取时间戳并将其转换为字符串

> ID：11537467
> 
> 赞同：7
> 
> 时间：2012-07-18T08:43:41.037
> 
> 标签：java

我正在使用它以秒为单位获取当前时间戳并将其添加到字符串`Double.toString((System.currentTimeMillis()/1000))` 中但是我得到的不是十进制表示法，而是“1.23213E9”。如何切换到十进制表示法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T08:47:14.843

试试这个：

```
TimeUnit.MILLISECONDS.toSeconds(((System.currentTimeMillis()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T08:48:44.217

最短的是

```
String secs = "" + System.currentTimeMillis() / 1000; 
```

如果你想保留毫秒，你可以使用

```
String secs = String.format("%.3f",  System.currentTimeMillis() / 1000.0); 
```

产生一个类似的字符串

```
1342604140.503 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T08:46:38.043

```
String.valueOf(System.currentTimeMillis() / 1000) 
```

这应该够了吧？无需将其转换为双精度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:52:01.097

如果您需要处理 Double 您可以执行以下操作：

```
double myNum = 1.23213E9;
String myString = NumberFormat.getInstance().format(myNum);
System.out.print(myString); 
```

# java - 如何表示数组 。班级

> ID：11537468
> 
> 赞同：6
> 
> 时间：2012-07-18T08:43:41.747
> 
> 标签：java, collections

我有一个需要 Object.class 参数的方法，例如

```
 method(Object.class) 
```

如何将类设置为此类的数组？就像是

```
 method(ArrayList<Object>.class) 
```

我试过

```
 method(new ArrayList<Object>() {}) 
```

也是。它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T08:44:37.767

您可以使用`Object[].class`.

（`int[].class`,`String[].class`等`double[][][].class`也适用于此。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T11:39:45.713

您可以通过从 ArrayList 扩展您的自定义类来做到这一点

```
class UserList extends ArrayList<User>{} 
```

现在你可以这样做

```
UserList.class 
```

# c# - 项目名称错误做法的句号？

> ID：11537470
> 
> 赞同：0
> 
> 时间：2012-07-18T08:43:47.680
> 
> 标签：c#, .net, coding-style

拥有一个名为“Importer”的解决方案，然后拥有多个名为 Importer.[projectname] 的项目，是否会被归类为不好的做法？

想象一下项目名称就像 Importer.Model 等。

那是好还是不好？

我想与其他开发者确认我的想法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:47:36.523

不，这不是坏习惯，只要你选择合适的名字。

Visual Studio 将假定项目名称提供默认命名空间，因此对于名为您的项目，`Foo.Bar`您将拥有`Foo.Bar`命名空间。

当您处理一组适合父命名空间下的库时，这很有用。例如，您可能希望将您的公司名称用作命名空间的第一部分，并将库名称用作后一部分，例如`MyCorp.MailLib`,`MyCorp.ReportsLib`等。

# php - Plesk 锁定和无法使用的服务器问题

> ID：11537471
> 
> 赞同：0
> 
> 时间：2012-07-18T08:43:56.537
> 
> 标签：php, security, plesk

我的一个网站有一些奇怪的问题，Plesk 控制面板经​​常锁定 - 与托管支持人员交谈后，他们将范围缩小到以下代码：

未定义的索引：第 xx 行 /var/www/vhosts/admin.ourwebsite.com/httpdocs/index.php 中的 HTTP_HOST

这个错误一遍又一遍地发生 - 托管支持人员说比利时、新加坡和曼谷的人在 10 分钟内可以访问（该站点纯粹基于英国）并且这些 IP 正试图使用​​反向 DNS 来查找漏洞服务器 - 他认为漏洞存在于上面的 php 代码中 - 可能是这种情况吗？

当我们遇到问题时，站点的“前端”非常好，但是我们无法通过 Plesk 一次长时间进入 MySQL 数据库。

任何人都可以提出任何解决方案 - 我们在其他服务器上运行几乎相似的代码而没有任何这些问题，尽管他们使用 CPanel 而不是 Plesk（我真的不喜欢）

我希望这看起来很清楚，任何建议都会有用 - 在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:42:29.237

改为使用 Navicat 访问数据库 - 已修复。

# html - 如何使用 sed 等 linux 命令向 html 添加一些标签

> ID：11537473
> 
> 赞同：0
> 
> 时间：2012-07-18T08:43:56.987
> 
> 标签：html, linux, sed

我有一些表格的 html 页面，我需要使用 bash 脚本在页面上添加新表格作为第一个表格，我知道它可以使用 sed 或 smt 来完成，但我不知道它是如何工作的......有人可以帮忙吗想办法吗？

html页面示例：

```
<html>
<head></head>
<body>

THERE SHOULD BE ADDED NEW TABLE ROW LIKE BELOW 

<tr>
<td rowspan="2" bgcolor="#fff1cc" class="style4"><div align="center">
<h4>2012-07-17</h4>
</div></td>
</tr>
<tr>
<td height="2" bgcolor="#fff1cc" class="style4"><a ref="07_17_ef47efb/index.html">sha1:ef47efb</a></td>
<td bgcolor="#fff1cc" class="style4" align="center"><img src="../Pictures/green.gif" width="35" height="37"></td>
</tr>

<tr>
<td rowspan="2" bgcolor="#fff1cc" class="style4"><div align="center">
<h4>2012-07-17</h4>
</div></td>
</tr>
<tr>
<td height="2" bgcolor="#fff1cc" class="style4"><a href="07_17_ef47efb/index.html">sha1:ef47efb</a></td>
<td bgcolor="#fff1cc" class="style4" align="center"><img src="../Pictures/green.gif" width="35" height="37"></td>
</tr>

<tr>
<td rowspan="2" bgcolor="#fff1cc" class="style4"><div align="center">
<h4>2012-07-17</h4>
</div></td>
</tr>
<tr>
<td height="2" bgcolor="#fff1cc" class="style4"><a href="07_17_ef47efb/index.html">sha1:ef47efb</a></td>
<td bgcolor="#fff1cc" class="style4" align="center"><img src="../Pictures/green.gif" width="35" height="37"></td>
</tr>
</body>
</html> 
```

应在 html 页面中添加为 FIRST 的表行示例：

```
<tr>
<td rowspan="2" bgcolor="#fff1cc" class="style4"><div align="center">
<h4>$date</h4>
</div></td>
</tr>
<tr>
<td height="2" bgcolor="#fff1cc" class="style4"><a ref="$path/index.html">sha1:$rev</a></td>
<td bgcolor="#fff1cc" class="style4" align="center"><img src="../Pictures/green.gif" width="35" height="37"></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:05:44.200

1）你的html没有`<table></table>`是对的吗？

2）如果您要添加的行是固定的，您可以将它们保存到一个文件中，比如 rows.txt。然后尝试将`<body>`标签替换为`<body>`rows.txt 的内容。但是，如果您的 foo.html 中有嵌套`<table>`的 s。它可能很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:13:46.417

我找到了一个解决方案 - [SED: change/insert/append lines after matching a pattern](http://mohammednv.wordpress.com/2009/11/15/sed-changeinsertappend-lines-after-matching-a-pattern/)。

# vb6 - 如何使 activex exe 正确地将消息发布到集群 msmq

> ID：11537474
> 
> 赞同：0
> 
> 时间：2012-07-18T08:43:58.840
> 
> 标签：vb6, activex, cluster-computing, msmq

我们有一个项目 ProjectA，它是一个标准的 exe，而 ProjectB 是一个 Activex exe，在 ProjectA 中被引用。两者都是使用 vb6 开发的。两个项目都会向 msmq 发送消息（发送到同一个队列）。ProjectB 旨在提供线程功能。ProjectA 将首先启动，取决于将使用“CreateObject”方法创建的输入 ProjectB 实例的数量。

在正常环境中，它工作正常，exe 向 msmq 的发布消息都正确。当应用在集群环境中实现时，标准的exe正确的将消息发布到集群的msmq，但是activex exe(ProjectB)将消息发布到本地的msmq。

谁能解释一下为什么activex exe的行为是这样的:(

此处 ProjectA 在集群管理中添加为 aresource，但未添加 ProjectB。我们是否需要将 PRojectB 也添加为集群中的资源。

提前致谢

# java - 如何在 Spring MVC 中正确配置 TilesViewResolver？

> ID：11537476
> 
> 赞同：1
> 
> 时间：2012-07-18T08:44:06.030
> 
> 标签：java, spring, spring-mvc, tiles

我有 Spring MVC 项目，我想使用 Apache Tiles 在我的应用程序中构建视图。我在我的`pom.xml`文件中添加了一些依赖项。我想知道我有太多但我有一些关于缺少类的例外，所以我在一些包中找到了它们并将它们添加到类路径中。

```
<!-- Tiles -->
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-extras</artifactId>
        <version>2.2.2</version>
    </dependency>         
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-servlet</artifactId>
        <version>2.1.4</version>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-digester3</artifactId>
      <version>3.2</version>
      <classifier>with-deps</classifier>
    </dependency>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.3</version>
    </dependency> 
```

这是我`ViewResolvers`在 Dispatcher Servlet 上下文中的配置。我想知道如何将它们正确配置在一起。

```
<beans:bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/tiles-definitions.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 

<beans:bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
    <beans:property name="order" value="0" />
</beans:bean>

<beans:bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
    <beans:property name="order" value="1" />
</beans:bean> 
```

我已阅读此问答：[如何在 Spring 中使用多个 ViewResolver？](https://stackoverflow.com/q/1029193/845220)但这对我没有帮助。目前，上述配置`jsp`视图可以正常工作，但对于我得到的瓷砖地址`HTTP Status 404`。

**编辑**

这是我的控制器。与“家”相关的视图正在工作，但其他视图 - 瓷砖不工作。

```
 @RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {        
    return "home";
}

@RequestMapping(value = "/pets", method = RequestMethod.GET)
public String pets(Locale locale, Model model) {
    return "pets-tiles";
}   

@RequestMapping(value = "/dogs", method = RequestMethod.GET)
public String dogs(Locale locale, Model model) {
    return "dogs-tiles";
}   

@RequestMapping(value = "/cats", method = RequestMethod.GET)
public String cats(Locale locale, Model model) {
    return "cats-tiles";
} 
```

这是我的`tiles-definitions.xml`文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
 <tiles-definitions>

  <definition name="template-main" template="/WEB-INF/views/layouts/main.jsp">
   <put-attribute name="banner-content" value="/WEB-INF/views/sections/banner.jsp" />
   <put-attribute name="title-content" value="Pet Type" />
   <put-attribute name="primary-content" value="" />
   <put-attribute name="footer-content" value="/WEB-INF/views/sections/footer.jsp" />
  </definition>

  <definition name="template-detail" template="/WEB-INF/views/layouts/detail.jsp">
   <put-attribute name="banner-content" value="/WEB-INF/views/sections/banner.jsp" />
   <put-attribute name="title-content" value="Pet Type" />
   <put-attribute name="subtitle-content" value="" />
   <put-attribute name="primary-content" value="" />
   <put-attribute name="footer-content" value="/WEB-INF/views/sections/footer.jsp" />
  </definition>

  <definition name="pet-tiles" extends="template-main">
   <put-attribute name="primary-content" value="/WEB-INF/views/contents/pets.jsp" />
  </definition>

  <definition name="dog-tiles" extends="template-detail">
   <put-attribute name="subtitle-content" value="Canines" />
   <put-attribute name="primary-content" value="/WEB-INF/views/contents/dogs.jsp" />
  </definition>

  <definition name="cat-tiles" extends="template-detail">
   <put-attribute name="subtitle-content" value="Felines" />
   <put-attribute name="primary-content" value="/WEB-INF/views/contents/cats.jsp" />
  </definition>

 </tiles-definitions> 
```

它们来自本教程： http: [//krams915.blogspot.com/2010/12/spring-mvc-3-tiles-2-integration.html](http://krams915.blogspot.com/2010/12/spring-mvc-3-tiles-2-integration.html)但不适用于我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:54:20.620

我已经解决了我的问题。我不知道为什么它不起作用，但此刻一切似乎都很好。

我`AutoTilesView`从这个 url 找到并实现了类：http: [//forum.springsource.org/showthread.php?78312-Spring-MVC-Noob-help-with- site-templates](http://forum.springsource.org/showthread.php?78312-Spring-MVC-Noob-help-with-site-templates)

为什么默认设置`TilesView`不起作用？`AutoTilesView`类看起来像：

```
public class AutoTilesView extends TilesView {

private static final String PREFIX = "/WEB-INF/views/";
private static final String SUFFIX = ".jsp";

@Override
protected void renderMergedOutputModel(Map<String, Object> model,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    ServletContext servletContext = getServletContext();
    TilesContainer container = ServletUtil.getContainer(servletContext);

    if (container == null) {
        throw new ServletException("Tiles container is not initialized. " +
                "Have you added a TilesConfigurer to your web application context?");
    }

    AttributeContext attributeContext = container.getAttributeContext(request, response);

    StringBuilder builder = new StringBuilder();
    builder.append(PREFIX);
    builder.append(this.getUrl());
    builder.append(SUFFIX);     

    attributeContext.putAttribute("body", Attribute.createTemplateAttribute(builder.toString()));

    super.renderMergedOutputModel(model, request, response);
}
} 
```

这是来自我的 Serlvet Dispatcher Context 的代码：

```
<beans:bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/tiles-definitions.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 

<beans:bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <beans:property name="viewClass" value="cos.tam.AutoTilesView" />
</beans:bean> 
```

我已经删除了`org.springframework.web.servlet.view.InternalResourceViewResolver`。

# android - Android：HttpURLConnection 重定向 - doInBackground

> ID：11537479
> 
> 赞同：0
> 
> 时间：2012-07-18T08:44:09.683
> 
> 标签：android, httpurlconnection, urlconnection

我正在使用 HttpURLConnection 与后端服务器进行通信，并且我应该在 doInBackground 方法中的异步任务中这样做。

现在我需要能够遵循 302 重定向，但我遇到了一些问题。问题是新位置通常位于另一台主机上，但是在执行重定向请求时，它似乎没有将 URL 更改为新主机，因此我收到 404 错误，说明指定的路径不存在。

现在我知道我可以设置 HtppURLConnection.setFollowRedirect 但我需要对重定向有更多的控制权，所以不应该盲目地遵循它们。重定向行为应该由调用 asynctask 的对象控制（当创建 asynctask 对象时，您将创建它的对象传递给名为 _callback 的参数）。

这是我当前的代码：

```
protected HttpResponse doInBackground(String... req) {
HttpURLConnection urlConnection = null;
try {
    urlConnection = (HttpURLConnection) this._url.openConnection();
    urlConnection.setConnectTimeout( (int) this._timeout*1000);
    String body = req[0];

    // set headers / write information to output stream if request is post

    // create the response object
    HttpResponse responseObject = null;
    try
    {
        // get status, contenttype, charset...

        InputStream in = null;
        if (urlConnection.getResponseCode() != -1 && urlConnection.getResponseCode() < 300)
        {
            in = new BufferedInputStream(urlConnection.getInputStream(), 8192);
        }
        else 
        {
            in = new BufferedInputStream(urlConnection.getErrorStream(), 8192);
        }
        responseObject = new HttpResponse(in, status, contentType, charset);
        // if redirect
        if (status == 302 && this._callback.onRedirect(responseObject) == true)
        {
            // recall
            String url = urlConnection.getHeaderField("location");
            Log.v("Async Task", "Redirect location: " + url);
            this._url = null;
            this._url = new URL(url);
            urlConnection.disconnect();
            urlConnection = null;
            responseObject = this.doInBackground(req);
        }

    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    // return the response
    return responseObject;

} 
// catch some other exceptions
finally 
{
    if (urlConnection != null)
    {
        urlConnection.disconnect();
    }   }
} 
```

如前所述，问题在于重定向请求似乎改变了 URL 的路径，而不是主机。URL 对象本身似乎包含正确的信息，所以我不知道为什么会这样。（我收到 HTML 作为响应，这是一个 404 错误页面，其中包含旧服务器的服务器名称）

谢谢你的帮助！

注意： HttpResponse 只是我创建的一个对象，用于保存有关响应的相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:41:51.310

这是因为我发送了相同的标头并且没有更改请求的“主机”标头，这导致 Apache 看起来很困惑。

# actionscript-3 - 用于 AS3/AIR 的 MediaScannerConnection？

> ID：11537485
> 
> 赞同：0
> 
> 时间：2012-07-18T08:44:19.547
> 
> 标签：actionscript-3, flash, air, import

导入 android.media.MediaScannerConnection；导入 android.media.MediaScannerConnection.MediaScannerConnectionClient；

这些是 Java 中可用的类，用于刷新 Android 设备上 SD 卡上检测到的图像。

如果您将图像保存到 SD 卡，它就在那里，但不可见，除非您安装设备，卸载设备。这些 Java 类解决了这个问题。

但是我正在使用 AS3 和 AIR 构建一个应用程序，有人知道 AIR、AS3 的等效类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:44:14.893

您可以使用[Adob​​e Air 的 File 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)来查看设备（另请参阅[使用文件](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7d8e.html)）。一旦你弄清楚是什么代码让你进入 USB 设备，你可以将它加载为 a`ByteArray`并将其转换为图像。

如果您正在寻找图像导入/转换代码，只需搜索您需要的；那里有很多帖子，答案相当标准化。

# iphone - 在 cocos2d 中添加 UIViewController

> ID：11537491
> 
> 赞同：3
> 
> 时间：2012-07-18T08:44:34.720
> 
> 标签：iphone, ios, uiviewcontroller, cocos2d-iphone

我想在 cocos2d 项目中显示 UIViewController，所以我在我的 CCLayer 类中这样做：

```
-(void)displayMainMenu {
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    [CCMenuItemFont setFontName:@"Marker Felt"];
    [CCMenuItemFont setFontSize:26];

    CCMenuItemFont *openViewC = [CCMenuItemFont itemWithString:@"Open View" target:self selector:@selector(loadMyViewController)];
    mainMenu = [CCMenu menuWithItems:openViewC, nil];
    [self addChild:mainMenu z:0];
}

-(void) loadMyViewController{

    //Add the tableview when the transition is done
    myView = [[MyViewController alloc] init];
    UIView *viewHost = hostView.view;

    [[[CCDirector sharedDirector] view] addSubview:viewHost];
} 
```

然后在我的 ViewController 中返回我的 CCLayer 我这样做：

```
- (IBAction)exitAction:(id)sender
    {
    [self.view removeFromSuperview];

    [[CCDirector sharedDirector] pushScene: [MainMenu scene]]; //i need it or not?
} 
```

一切正常，我使用 cocos2d v2.0，但我想知道是否有更好的方法在 cocos2d 场景中添加 UIViewController，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T01:57:55.740

由于 cocos2d 2.0 中的 director 是 UIViewController 的子类，作为加载在 AppDelegate 中的导航控制器的根，如果您愿意，实际上有一个非常简单的方法可以利用 UIKit 动画。它还使场景完好无损，而无需真正担心内存管理。您可以将您的 -loadMyViewController 方法更改为：

```
- (void)loadMyViewController {
     myView = [[MyViewController alloc] init];
     AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];
     [app.navController pushViewController:myView animated:YES];
     [CCDirector sharedDirector].pause;
} 
```

然后简单的恢复director，当你想返回cocos2d场景时调用[app.navController popViewController...]。或者，您可以在推送视图控制器而不是暂停时使用 stopAnimation 方法，类似于 cocos2d 处理应用程序进入后台的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:04:16.953

如果你想弹出一个视图，你可以使用一个简单的代码，只需导入 yourviewcontroller.h 文件并使用支持所有 cocos2d 版本的代码

```
- (void)loadMyViewController {

     yourviewcontroller  *myView = [[yourviewcontroller alloc] init];

     UIView *viewHost = myView.view;

    [[[CCDirector sharedDirector] openGLView] addSubview:viewHost]; 
```

}

//如果你想减少内存使用或只是暂停它，更换屏幕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T06:53:01.817

或者您可以使用此代码..

```
ViewController *vc = [[ViewController alloc] init];

AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

[[app navController] presentModalViewController:vc animated:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T12:10:38.860

如果是cocos2D 2.0，那就用这个。

```
AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
        [app.navController.view addSubview:newView]; 
```

贝娄 cocos2d 2.0

```
AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [app .viewController.view addSubview:newView]; 
```

# ruby-on-rails - Ruby on Rails：下拉菜单中元素的唯一性

> ID：11537492
> 
> 赞同：2
> 
> 时间：2012-07-18T08:44:36.187
> 
> 标签：ruby-on-rails, ruby, database, menu, unique

我对 ROR 很陌生，我在使下拉菜单中的元素独一无二时遇到了问题。该菜单允许用户从数据库中选择公司。目前，菜单列出了数据库中的每家公司，因为数据库多次保存同一家公司，而我只希望该公司出现一次。

```
<%= f.label :company_name %><br />
<%= f.select( :company_name, Company.all.map {|c| [c.company_name]} ) %> 
```

我知道这应该很容易解决，但我似乎找不到答案。希望有人可以提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:20:13.613

而不是调用 uniq! 在获取的数组上，我宁愿使用范围来执行此操作...在您的模型中：

```
named_scope :unique_by_name, :select => 'DISTINCT name', :order => 'name ASC' 
```

然后你可以使用：

```
Company.unique_by_name.map { |company| company.name } 
```

这样做的好处是可以直接从您的数据库后端选择唯一的公司作为唯一的公司，而不是昂贵地检索它们并在之后使用 uniq 过滤它们！方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:49:18.643

你可以使用：

```
Company.all.map {|c| c.company_name}.uniq! 
```

但要小心公司的 ID 以及您将如何使用它们。

希望能帮助到你！

# django - Procfile 在 Heroku 中声明类型 -> (none)

> ID：11537501
> 
> 赞同：2
> 
> 时间：2012-07-18T08:45:03.903
> 
> 标签：django, heroku, python-2.7

我被困在通过 Procfile 在 Heroku 上运行 Django 1.4 应用程序。我已阅读所有相关帖子，并且我确定这不是区分大小写的相关问题，因为我正确命名为 Procfile。这是我的项目结构。注意 Procfile 与 manage.py 处于同一级别

```
.
├── README.md
├── docs
├── project
│   ├── Procfile
│   ├── client
│   │   ├── __init__.py
│   │   ├── __init__.pyc
│   │   ├── models.py
│   │   ├── templates
│   │   │   └── welcome.html
│   │   ├── tests.py
│   │   ├── views.py
│   │   └── views.pyc
│   ├── manage.py
│   └── wings
│       ├── __init__.py
│       ├── __init__.pyc
│       ├── settings.py
│       ├── settings.pyc
│       ├── urls.py
│       ├── urls.pyc
│       ├── wsgi.py
│       └── wsgi.pyc
├── requirements.txt
├── static
│   ├── css
│   ├── images
│   └── js
├── tests
└── uploads 
```

这是Procfile：

```
web:python manage.py runserver 
```

这里是在本地运行它的工头的输出（工作正常）

```
10:29:28 web.1     | started with pid 595 
```

我正在推动heroku：

```
Procfile declares types -> (none) 
```

尝试通过 heroku toolbelt 对其进行缩放：

```
$ heroku ps:scale web=1 --app myapp
Scaling web processes... failed
!    Record not found. 
```

我总是通过网络创建我的应用程序，所以我总是需要放置 --app 参数。可能与我如何创建我的应用程序相关的任何问题？

我还尝试了以下方法：

```
MacBook-Pro-de-Sergio:myapp sergio$ heroku run python project/manage.py runserver
Running `python project/manage.py runserver` attached to terminal... up, run.1
Validating models...

0 errors found
Django version 1.4, using settings 'wings.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C. 
```

这是我的应用程序的日志：

```
2012-07-18T09:18:51+00:00 heroku[run.1]: Starting process with command `python       project/manage.py runserver`
2012-07-18T09:18:51+00:00 heroku[run.1]: State changed from starting to up
2012-07-18T09:19:16+00:00 heroku[router]: Error H14 (No web processes running) -> GET peoplewings.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-18T09:19:16+00:00 heroku[router]: Error H14 (No web processes running) -> GET peoplewings.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

**回答**

正如 Neil 指出的那样，Procfile 应该位于 git repo 的根目录中。我还必须在 Procfile 上设置主机和端口，因为默认 Web 服务器指向 127.0.0.1:8000，这在 heroku 上不起作用

```
web: python project/manage.py runserver 0.0.0.0:$PORT 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:31:36.653

您的 Procfile 需要位于推送到 Heroku 的 git 存储库的根目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:12:57.013

记录名称和内容之间的空格似乎很重要：

采用：

`web: python manage.py runserver`

并不是

`web:python manage.py runserver`

# php - jquery keypress 上的权限被拒绝 IE8（回车）

> ID：11537502
> 
> 赞同：0
> 
> 时间：2012-07-18T08:45:04.217
> 
> 标签：php, jquery, html, internet-explorer-8

IE8 不断抛出错误**Permission denied**：

*   jquery-1.7.2.min.js | 行：2，字符：21695
*   jquery-1.7.2.js | 行：1712，字符：4

（取决于我使用的版本）。

当我按下回车键时会发生这种情况（'回车'上的[功能在tabindexes周围跳转）。](https://stackoverflow.com/questions/10742349/focus-on-next-tabindex-of-html-element-onenter-keypress-by-jquery/11205952#11205952)它只发生在使用 IE8 的特定服务器和特定 PC 组上。

[编辑] 调用时发生

```
$("[TabIndex='"+tabindex+"']").focus()
$("[TabIndex='"+tabindex+"']").blur() 
```

完整代码

```
//WALKING with ENTER
        var tabindex = 1; //start tabindex || 150 is last tabindex
        $(document).keypress(function(event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if(keycode == '13') { //onEnter
                if($("[TabIndex='"+tabindex+"']").attr('id') == 'submit_btn'){ //if on 'sbm - button' click!
                    $("#submit_btn").click();
            return false;
                };
                $("[TabIndex='"+tabindex+"']").blur()//.removeClass('highlight_input');
                tabindex++;
                //while element exist or it's readonly and tabindex not reached max do
                while(($("[TabIndex='"+tabindex+"']").length == 0 || $("[TabIndex='"+tabindex+"']:not([readonly])").length == 0) && tabindex != 150 ){
                    tabindex++;
                }
                if(tabindex == 150){ tabindex = 1 } //reseting tabindex if finished
                $("[TabIndex='"+tabindex+"']").focus()//.addClass('highlight_input');
                return false;
            }
        }); 
```

我只能重现此错误注销/重新登录 Windows（XP）-> 返回此界面并按“Enter”。F5 之后：一切正常。

以前有没有人经历过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:09:37.677

**调用blur()**或**focus()**时出现问题，所以我必须找到解决方法。任务是调用（几乎）纯 javascript 而不是调用 jquery 焦点/模糊。

```
//Focus workaround for IE8 (exception)
var elid = $('input[tabindex='+tabindex+']').attr("id");
var element = document.getElementById(elid); 
element.blur(); 

var elid = $('input[tabindex='+tabindex+']').attr("id");
var element = document.getElementById(elid); 
element.focus(); 
```

代替

```
$("[TabIndex='"+tabindex+"']").blur()
$("[TabIndex='"+tabindex+"']").blur() 
```

如果您有任何问题或遇到同样的问题，请发表评论。

# c# - SurroundsWith Snippet for VS2012 提供了一个选择

> ID：11537507
> 
> 赞同：2
> 
> 时间：2012-07-18T08:45:16.520
> 
> 标签：c#, visual-studio-2010, code-snippets

由于我定义了以下代码段，因此在尝试使用环绕时总是会得到不需要的选择。

```
<CodeSnippet Format="1.0.0">
<Header>
  <Title>Dependency Properties region</Title>
  <Shortcut>#regiondp</Shortcut>
  <Description>
    Umschliesst die Selektion mit einer region namens Dependency Properties
  </Description>
  <SnippetTypes>
    <SnippetType>Expansion</SnippetType>
    <SnippetType>SurroundsWith</SnippetType>
  </SnippetTypes>
</Header>
<Snippet>
  <Code Language="csharp" Kind="method decl">
    <![CDATA[
        #region Dependency Properties
          $selected$
        #endregion
        ]]>
  </Code>
</Snippet> 
```

在 C# 文件中使用“Surround with...”时，为什么 VS2010 现在询问我是要使用“C#Snippets”还是“Visual C#”片段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:05:54.023

它之所以问你，是因为你有自己的代码片段和 Visual Studio 安装附带的 MS 预安装的代码片段。

如果它打扰您，您可以将您的代码片段放在以下位置：%ProgramFiles(x86)%\Microsoft Visual Studio 10.0\VC#\Snippets\1033\Visual C#

在 MS 的所有片段中。
高温高压

# php - 文件锁定后PHP计数器仍然丢失命中？

> ID：11537508
> 
> 赞同：0
> 
> 时间：2012-07-18T08:45:16.373
> 
> 标签：php, counter

我正在使用以下基本 PHP：

```
<?php

    if (file_exists('count_file.txt')) 
    {
        $fil = fopen('count_file.txt', r);
        $dat = fread($fil, filesize('count_file.txt')); 
        echo $dat+1;
        fclose($fil);
        $fil = fopen('count_file.txt', w);
        fwrite($fil, $dat+1);
    }

    else
    {
        $fil = fopen('count_file.txt', w);
        fwrite($fil, 1);
        echo '1';
        fclose($fil);
    }
?> 
```

作为一个命中计数器（我宁愿没有一个，但我们坚持要这样做）。txt 文件记录了点击次数并且它可以工作......但是计数器随机（有时在几周后，有时在几个月后）决定跳闸并从 4300 下降到 11。

有人告诉我解决方法是使用文件锁定，所以我更改为以下代码：

```
<?php 

        $dat = file_get_contents('count_file.txt'); 
        $fil = fopen('count_file.txt', 'w'); 
        if (flock($fil, LOCK_EX)) { 
            echo $dat+1; 
            fwrite($fil, $dat+1); 
            flock($fil, LOCK_UN); 
        } 
        fclose($fil); 

    ?> 
```

现在几天后它再次从5000多个下降到13个。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:50:29.807

您 fopen() 用于写入的文件会截断文件。如果您无法获得锁定，则关闭可能被截断的文件然后为零字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:04:58.607

使用 fopen "a" 而不是 fopen "w" 然后截断文件：

```
<?php
    $dat = file_get_contents('count_file.txt'); 
    $fil = fopen('count_file.txt', 'a'); 
    if (flock($fil, LOCK_EX)) { 
        ftruncate($fil,0);
        echo $dat+1; 
        fwrite($fil, $dat+1); 
        flock($fil, LOCK_UN); 
    } 
    fclose($fil); 
?> 
```

# android - LinearLayout 或其 LinearLayout 父级没用，我可以忽略警告消息吗？

> ID：11537511
> 
> 赞同：5
> 
> 时间：2012-07-18T08:45:19.063
> 
> 标签：android, android-layout, layout, android-linearlayout, android-lint

我面临嵌套布局问题并抛出一些异常。错误是“此 LinearLayout 布局或其 LinearLayout 父级无用......”。我知道我可以通过这个设置忽略它这个警告。

设置：Build Path->Configure Build Path.... 在 Android Lint Preferences 下查找 UselessParent 并将其严重性设置为忽略或单击 Ignore All。

但是，Eclipse 图形布局无法显示任何内容并显示错误消息 - “Index:0, Size 0, Exception details are logged in Window > Show View > Error Log”。

如何使图形布局显示嵌套布局？

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="@drawable/menu_bg2"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_item1"
            android:src="@drawable/alarm2x" />

        <ImageButton
            android:id="@+id/imageButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_item2"
            android:src="@drawable/bank2x" />

        <ImageButton
            android:id="@+id/imageButton3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_item3"
            android:src="@drawable/brief_case2x" />

        <ImageButton
            android:id="@+id/imageButton4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_item4"
            android:src="@drawable/trolley2x" />

        <ImageButton
            android:id="@+id/imageButton5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_item5"
            android:src="@drawable/calculator2x" />

    </LinearLayout>
</LinearLayout> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:26:51.970

因为在第一个LinearLayout中，里面只有1个view，而且是一个LinearLayout。

这是图示的结构：

```
LinearLayout
    LinearLayout
        ImageButton
        ImageButton
        ImageButton
        ImageButton
        ImageButton
    // You should add another View or ViewGroup for the first LinearLayout 
```

LinearLayout 是 ViewGroup 的子类，旨在对至少 2 个（CMIIW）的一些视图进行分组。

因此，发出警告是因为它假定您的第一个 LinearLayout 没有任何要分组的内容，或者您​​忽略它也没关系。

对不起，如果我的英语解释不好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:56:13.223

你有两个`LinearLayout`，其中一个到现在都没用。此警告建议您删除其中一个。像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/LinearLayout1"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:background="@drawable/menu_bg2"
          android:orientation="vertical" >

     <!-- your other ImageView etc.-->
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-26T12:26:19.060

您可以将其添加到您的父 LinearLayout：

```
tools:ignore="UselessParent" 
```

默认情况下，如果这些警告无用，Android Studio 会显示这些警告。`tools:ignore="UselessParent"`防止出现此警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:58:55.637

您打开了 2 个线性布局，但只有 1 个线性布局关闭。

但是，第二个线性布局没有意义，因为您将一个盒子放在一个盒子内，然后在第二个盒子中插入项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T11:03:07.717

也许可以帮助您：

```
android:layout_alignWithParentIfMissing ="true" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T08:50:27.837

你可以试试

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_bg2"
    android:orientation="vertical" > 
```

但是我从不相信 Eclipse 中的图形布局。

编辑 ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" > 
```

# python - 能否在 XPath 定位器上使用 CSS 属性来确保元素可见？

> ID：11537514
> 
> 赞同：0
> 
> 时间：2012-07-18T08:45:39.190
> 
> 标签：python, xpath, selenium, webdriver

我有一个 div 块，您可以单击它们以手风琴风格显示内容。

我正在用 selenium 运行这个块以将它们全部打开，然后最终捕获屏幕截图。但是，我不确定如何最好地检查手风琴项目是否已显示，然后再继续下一个项目。

目前我的测试通过但最终的屏幕截图显示一些项目仍然关闭。我的代码：

```
detailsAccordion = self.ff.find_elements_by_class_name('accordion')
index = 1
for option in detailsAccordion:
    try:
        WebDriverWait(self.ff, 10).until(lambda driver : driver.find_element_by_xpath("//div[@class='accordionContainer']/div["+
            str(index) +"]/h3[1]")).click()
        # Need a WebDriverWait here for style='display: block;' on the current div
    except:
        print "Can't access div #" + unicode(index)
    index = index + 1 
```

如果我添加一行；

```
WebDriverWait(self.ff, 10).until(lambda driver : driver.find_element("//div[@class='accordionContainer']/div["+
                str(index) +"][@style='display: block;']")) 
```

我得到了我的异常打印，那么是否可以在每个 div 的显示属性上添加一个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:08:30.233

您可以使用selenium API 提供的[is_displayed()](http://selenium-python.readthedocs.org/en/latest/api.html#selenium.webdriver.remote.webelement.WebElement.is_displayed)方法检查任何 WebElement 是否可见。

当您在网页上通过 xpath 查找元素时，selenium 驱动程序将自动等待页面加载，然后再将控制权交给您的代码。我没有看到需要使用 WebDriverWait。

如果元素不存在，代码将给出元素未找到异常，但如果存在，is_displayed() 将根据它是否可见返回 true 或 false。

在截屏之前，检查手风琴项是否可见，如果可见则截屏。

也许使用implicitWait 会帮助你 -

```
from selenium import webdriver

  ff = webdriver.Firefox()
  ff.implicitly_wait(10) # seconds 
```

# java - 使用 Java 桌面应用程序打印

> ID：11537515
> 
> 赞同：-1
> 
> 时间：2012-07-18T08:45:38.633
> 
> 标签：java, printing

使用桌面应用程序，我可以知道机器是否连接了打印机？

我想确定打印机是否已连接，如果没有向用户发送警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:48:02.037

使用 jdk1.5+ 的 Java Print Service API

# pointers - fortran 90 可分配数组已在调用类型绑定过程中分配

> ID：11537519
> 
> 赞同：0
> 
> 时间：2012-07-18T08:45:53.857
> 
> 标签：pointers, runtime-error, fortran90, user-defined-types

我在我的 fortran 代码中遇到了这个奇怪的运行类型错误。我有一个指向用户定义类型 A 的指针作为用户定义类型 B 的元素。当我从类型 B 中的过程调用与类型 A 关联的过程时，我得到已分配数组已分配运行时错误。有没有人看到这个错误？

抱歉无法显示代码。但这大致是正在发生的事情。

```
type B
   type(A),pointer :: obj
 contains
    procedure :: do_something
 end type B
type A 
    integer,allocatable:: long_array(:) 
  contains
    procedure :: do_something_to_long_array
end type A

 program main
  type(B) :: obj1
  type(A) ,target :: obj2

  allocate(obj2%long_array(10))
  obj1%obj=>obj2
  call obj1%obj%do_something_to_long_array()
 end program main 
```

对 do_something_to_long_array 的调用给了我这个错误。该过程在我的代码中实现，并在直接在对象上调用时起作用。我也可以访问 long_array 中的值。但我无法调用子程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:05:50.607

看起来你已经解决了问题，但只是为了它，“A 型”中的可分配数组是不确定的。直到最近，在许多版本的 FORTRAN90 中都无法在类型定义中包含可分配数组。“已分配”错误是它崩溃时返回的错误。我认为这可能就是为什么你的新编译器工作而旧编译器没有工作的原因。

# android - 在滚动时检测 Listview 最后一行 - Android

> ID：11537520
> 
> 赞同：4
> 
> 时间：2012-07-18T08:45:57.967
> 
> 标签：android

我想在显示最后一行时在列表视图中加载数据。我正在为列表视图编写滚动事件。

现在如何检测列表视图显示最后一行？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:48:34.783

```
 lv.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // Check if the last view is visible
            if (++firstVisibleItem + visibleItemCount > totalItemCount) {

                // if so, download more content

                }
            }
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:34:47.023

在列表视图中试试这个..它对我来说很好..

```
((ScrollView) findViewById(R.id.scrollDowns)).fullScroll(View.FOCUS_DOWN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:53:27.227

slezadav 的上述实现可能会在边缘条件下导致错误。页面中第一个可见项目和项目的总和可能比预期多或少 1 个计数。在我改用新方法之前，我一直在使用相同的东西。我所做的是在listview的适配器上放置一个侦听器，并在getview中检查是否（位置==要显示的数组中项目的totalItemCount），如果是，我从适配器调用我的侦听器，侦听器将从api中提取更多数据. 非常简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:48:55.547

您可以使用[Amazing ListView](http://code.google.com/p/android-amazing-listview/)来自动加载下一页（即最后一项上的“正在加载...”）。

![列表视图与](../Images/20b517ddca4266232c0b6825f9749ef1.png)

根据文档实现这些方法：

> *   `onNextPageRequested`当用户滚动列表直到“加载”指示器可见时调用。这是在 UI 线程上调用的，因此如果您有一些网络请求，请确保在后台执行此操作。还给出了页码。
> 
> 默认情况下，您将被视为在最后一页，并且您不会在列表底部看到任何“正在加载...”消息。您需要控制是否还有页面要显示。
> 
> *   `notifyMayHaveMorePages`表示我们还有更多数据，因此将显示“正在加载...”消息。
> *   `notifyNoMorePages`表示我们已经加载了所有数据，因此不再显示“正在加载...”消息。
> *   `nextPage`增加页码。在将新数据附加到适配器时执行此操作。
> *   `resetPage`将页码重置为 1（或由 指定的值`setInitialPage`）。

所以你需要做的是在**`onNextPageRequested`**被调用时获取更多数据。并**`nextPage`**在您将新数据附加到适配器时调用。

# javascript - 完整的日历 - 将可点击的图标与事件相关联？

> ID：11537525
> 
> 赞同：2
> 
> 时间：2012-07-18T08:46:16.450
> 
> 标签：javascript, jquery, jquery-plugins, fullcalendar

我想在日历上为每个事件附加 4 个图标。每个图标应该在点击事件上调用不同的函数。老实说，我的 CSS 不太好。我尝试了以下代码，但未调用这些图标的单击事件。而是调用事件事件。无论如何要附加4个带有可点击事件的图标吗？先感谢您

```
eventRender: function(event,element,calEvent) {
    element.find(".fc-event-title").after($("<span class=\"fc-event-icons\"></span>").html("<img src=\"/images/pass.png\" onclick=\"javascript:icons("+this.id+");\" /><img src=\"/images/pass.png\" onclick=\"javascript:icons("+this.id+");\" /><img src=\"/images/pass.png\" onclick=\"javascript:icons("+this.id+");\" /><img src=\"/images/pass.png\" onclick=\"javascript:icons("+this.id+");\" />"));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:03:36.373

我认为您需要使用该`.on()`函数将事件处理程序注册到您的图标。

检查这个小提琴：http: [//jsfiddle.net/100thGear/rpc23/](http://jsfiddle.net/100thGear/rpc23/)

点击事件被触发并由处理程序进行适当`.on()`处理。让我知道这是否有帮助！

# php - Wordpress 密码错误时更改默认重定向

> ID：11537527
> 
> 赞同：0
> 
> 时间：2012-07-18T08:46:16.877
> 
> 标签：php, wordpress

我创建了一个 wordpress 模板并通过代码添加了一个登录表单：

```
<form action="<?php echo get_option('home'); ?>/wp-login.php" method="post">
    <input type="text" name="log" id="log" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" size="20" /><br />
    <input type="password" name="pwd" id="pwd" size="20" /><br />
    <input type="submit" name="submit" value="Login" class="button" />
    <p>
        <label for="rememberme">
        <input name="rememberme" id="rememberme" type="checkbox" checked="checked" value="forever" /> Remember me
    </label>
        <input type="hidden" name="redirect_to" value="<?php echo $_SERVER['REQUEST_URI']; ?>" />
    </p>
</form> 
```

它工作正常，但是当有人输入错误的密码时，它会进入 wp-login.php 页面。我想更改它并将其指向我的模板网址。

问题是......我在哪里改变这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T12:25:41.563

自定义登录表单页面是不够的：当由于密码错误导致登录失败时，会显示标准的 wp-login.php 页面。

通过将其添加到以下内容，我设法重定向到我的自定义登录表单页面`functions.php`：

```
add_action('wp_login_failed', 'redirect_login_failed');
function redirect_login_failed() {
    wp_redirect(get_bloginfo('url') . '/?myLoginFormPage&login=failed' );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:53:39.510

最好在函数文件中向 login_redirect 添加过滤器

你看过这个[http://codex.wordpress.org/Customizing_the_Login_Form](http://codex.wordpress.org/Customizing_the_Login_Form)

# jquery-validate - jQuery Validation 插件，验证现有的填充字段

> ID：11537529
> 
> 赞同：1
> 
> 时间：2012-07-18T08:46:18.250
> 
> 标签：jquery-validate

如果我有一个已经填写的表单字段并且我按下提交按钮验证不会发生但如果我对字段进行更改（如添加一个或两个字符，则验证发生.. ……

```
<form id="form_state_edit" method="post" action="javascript:void(0);">
                <fieldset class="fieldset">
                <legend class="legend">Add a new State</legend>
                 <div id="form-wrapper-state-modal" style="width: 20rem;margin-left:5rem;margin-bottom:0.5rem;margin-top:-14px;"></div>
                <div style="">
                <p class="button-height inline-label">
                    <label class="label" for="state_name" style="display:inline;">State Name</label>
                    <input type="text" value="<?=$state_name?>" class="input  validate[required,custom[onlyLetterSp]]" id="state_name" name="state_name" style="width: 15rem;" />
                    <input type="hidden" value="<?=$state_arr[1]?>" id="state_id" name="state_id" />
                    <input type="hidden" value="edit" id="state_action" name="state_action" />

                    <button id="submit_state" class="button glossy mid-margin-right" type="submit">
                    <span class="button-icon">
                    <span class="icon-tick"></span>
                    </span>
                    Save
                    </button>
                    <div id="state_table_temp" style="display:none;"></div>
                </p></div>

                </fieldset>
            </form>

$("#form_state_edit").validationEngine('attach', {

          onSuccess: function(form, status){
            alert("The form status is: " +status+", it will never submit");
} ,
           onValidationComplete: function(form, status){
             alert("The form status is: " +status+", it will never submit");

           } 
```

基本上 - 如果没有变化（因为我什至不点击表单字段并且不输入任何内容） - onValidationComplete 执行并且状态 = true

如果我确实进行了更改- onSuccess 执行...

我必须写什么以便即使该人没有对表单字段进行任何更改（也没有单击表单字段），它也会进行验证并转到成功部分...

在验证开始之前，似乎不需要“激活”提交的 ofr。

\任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:02:37.707

在插件的首页，[在这里](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)，可以看到如下代码

```
 alert( $("#formID1").validationEngine('validate') ); 
```

尝试在提交按钮的点击事件中使用它，而不是在警报对话框中，就像这样

```
$('#submit_state').click(function () {
   return $("#form_state_edit").validationEngine('validate');
}); 
```

最后，我建议将您的 jQuery 代码包装在文档就绪事件处理程序中。虽然这里不需要。如果您的代码需要引用在它之后声明的 DOM 元素，它是约定俗成的，可以让您省去麻烦。

```
$(document).ready(function () {
    //enter code here
}); 
```

* * *

请记住，我以前没有使用过这个插件，但我很确定这应该可以工作

# java - 使 MySQL 以英语存储所有数字（而不是波斯语）

> ID：11537533
> 
> 赞同：1
> 
> 时间：2012-07-18T08:46:30.167
> 
> 标签：java, mysql, numbers, persian

当用户在 JTextField 中插入波斯数字时，我希望它以英文格式保存。我可以通过在持久化之前手动转换数字来处理 Java 中的这个问题。但是有这么多实体（比如 200 个），每个实体都有 10-15 个字段。因此，将所有这些字段手动转换为英文会很痛苦：

```
//before persisting the entity
person.setPhoneNumber(getEnglishFormat(txtPhoneNumber.getText()));
person.setSocialNumber(getEnglishFormat(txtSocialNumber.getText()));
person.setAge(getEnglishFormat(txtAge.getText()));
//...
//persist to db 
```

最简单的方法是让 MySQL 默认以英文存储所有数字。有没有人知道这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:53:01.243

如果你这样做，你不会有问题：

*   使用数字列的数字格式定义表格（不是 varchar）
*   使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)进行插入，并使用将数字作为输入的 setInt 和 setFloat 方法

# struts2 - 如何维护Struts2 Session

> ID：11537534
> 
> 赞同：0
> 
> 时间：2012-07-18T08:46:36.273
> 
> 标签：struts2, session-state

我在我的应用程序中使用 Struts2。在我的应用程序中，我有一个登录表单和一个主页。成功登录后，我调用了主页，并在该主页内调用了另一个操作。到目前为止，一切正常，成功登录后也会显示页面，但是当我按下`F5`或单击浏览器刷新按钮时，它会给我登录页面，但我想要触发`F5`或刷新按钮的同一页面。我怎样才能做到这一点，我`struts.xml`的如下..

...

```
<action name="mytable" class="MyDataTable">

        <result name="success" type="json"/>            
        <result name="error">messages.jsp</result>

    </action>
    <action name="edit" class="MyEditAction">

        <result name="input" type="json"></result>
        <result name="success" type="json"></result>
        <result name="error">messages.jsp</result> 

    </action>
    <action name="Login" class="LoginAction">

        <result name="input">login.jsp</result>
        <result name="success">main.jsp</result>            
        <result name="error">messages.jsp</result>

    </action>
    <action name="Logout" class="LogoutAction"> 
        <result name="success">login.jsp</result>
    </action> 
```

...

登录后我调用 main.jsp 并从 main.jsp 我调用**mytable**操作。在向我显示主页后，浏览器的地址栏仍然向我显示登录操作

所以请帮助我如何保持会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:59:42.760

首先，您必须考虑使用安全框架。我建议使用[Spring Security](http://static.springsource.org/spring-security/site/)。有很多事情你可以自己做错实施安全性。这将确保用户得到正确的身份验证，并保护您免受许多攻击。从您给我们的代码来看，您似乎没有这样做。

对于您的方案，您希望使用所谓的[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。此模式将确保在发布后将浏览器重定向到 GET url。这将确保用户不会两次提交表单。它还确保浏览器指向新的 url。

要在 Struts2 中执行此操作，您必须使用[Redirect Action Result](http://struts.apache.org/2.1.6/docs/redirect-action-result.html)。[这里](http://www.vitarara.org/cms/struts_2_cookbook/post_and_redirect)也有一个例子。

在你的情况下，这将是这样的：

```
...
<action name="Login" class="LoginAction">

    <result name="input">login.jsp</result>
    <result name="success" type="redirect">
        <param name="actionName">displaySalesOrder</param>
        <param name="namespace">/yournamespace</param>
    </result>            
    <result name="error">messages.jsp</result>

</action>

<action name="main" class="MainAction"> 
    <result name="success">main.jsp</result>
</action>
... 
```

# apache - wamp 服务器突然停止工作，出现错误 403

> ID：11537539
> 
> 赞同：0
> 
> 时间：2012-07-18T08:46:53.873
> 
> 标签：apache, localhost, wamp

我的 wamp 服务器从过去几个月开始运行良好，但突然停止工作。每当我运行我的文件时，我都会收到错误 403 并显示以下消息：

```
**Forbidden**

You don't have permission to access *name_of_file* on this server. 
```

请谁能告诉我如何纠正这个错误。

httpd.conf 的内容

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
# with ServerRoot set to "C:/Program Files/Apache Software Foundation/Apache2.2" will be interpreted by the
# server as "C:/Program Files/Apache Software Foundation/Apache2.2/logs/foo.log".
#
# NOTE: Where filenames are specified, you must use forward slashes
# instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
# If a drive letter is omitted, the drive on which Apache.exe is located
# will be used by default.  It is recommended that you always supply
# an explicit drive letter in absolute paths to avoid confusion.

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "c:/wamp/bin/apache/apache2.2.21"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 80

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule authn_alias_module modules/mod_authn_alias.so
#LoadModule authn_anon_module modules/mod_authn_anon.so
#LoadModule authn_dbd_module modules/mod_authn_dbd.so
#LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
#LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
#LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule cache_module modules/mod_cache.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
#LoadModule charset_lite_module modules/mod_charset_lite.so
#LoadModule dav_module modules/mod_dav.so
#LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule dav_lock_module modules/mod_dav_lock.so
#LoadModule dbd_module modules/mod_dbd.so
#LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
#LoadModule expires_module modules/mod_expires.so
#LoadModule ext_filter_module modules/mod_ext_filter.so
#LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule filter_module modules/mod_filter.so
#LoadModule headers_module modules/mod_headers.so
#LoadModule ident_module modules/mod_ident.so
#LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
#LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
#LoadModule ldap_module modules/mod_ldap.so
#LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
#LoadModule log_forensic_module modules/mod_log_forensic.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule mime_module modules/mod_mime.so
#LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
#LoadModule proxy_module modules/mod_proxy.so
#LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
#LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
#LoadModule proxy_connect_module modules/mod_proxy_connect.so
#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
#LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
#LoadModule speling_module modules/mod_speling.so
#LoadModule ssl_module modules/mod_ssl.so
#LoadModule status_module modules/mod_status.so
#LoadModule substitute_module modules/mod_substitute.so
#LoadModule unique_id_module modules/mod_unique_id.so
#LoadModule userdir_module modules/mod_userdir.so
#LoadModule usertrack_module modules/mod_usertrack.so
#LoadModule version_module modules/mod_version.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule php5_module "c:/wamp/bin/php/php5.3.10/php5apache2_2.dll"

<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon

</IfModule>
</IfModule>

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin admin@localhost

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
ServerName localhost:80

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "c:/wamp/www/"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "c:/wamp/www/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride all

    #
    # Controls who can get stuff from this server.
    #

#   onlineoffline tag - don't remove
    Order Allow,Deny
    Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.php index.php3 index.html index.htm
</IfModule>

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "c:/wamp/logs/apache_error.log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common

    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "c:/wamp/logs/access.log" common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "logs/access.log" combined
</IfModule>

<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://localhost/bar

    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.

    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAlias /cgi-bin/ "cgi-bin/"

</IfModule>

<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock logs/cgisock
</IfModule>

#
# "C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig conf/mime.types

    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php .php3

    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi

    # For type maps (negotiated resources):
    #AddHandler type-map var

    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile conf/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://localhost/subscription_info.html
#

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

# Supplemental configuration
#
# The configuration files in the conf/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf

# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
Include conf/extra/httpd-autoindex.conf

# Language settings
#Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf

# Virtual hosts
Include conf/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf

# Various default settings
#Include conf/extra/httpd-default.conf

# Secure (SSL/TLS) connections
#Include conf/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>

Include "c:/wamp/alias/*" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:29:16.323

您的 wamp 似乎正在使用虚拟主机 (vhost)。

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

这可能是问题所在。默认情况下，wamp 没有运行 vhost，所以你可能取消注释该行并在那之后遇到问题..？

您是否记得在主机文件和 httpd-vhosts.conf 中指定了虚拟主机？

文件位于以下位置： C:\wamp\bin\apache\apache2.4.2\conf\extra\httpd-vhosts.conf C:\Windows\System32\drivers\etc

我的猜测是重新安装后您的 wamp 恢复为默认值：

```
# Virtual hosts
#Include conf/extra/httpd-vhosts.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:50:02.853

检查文档根目录及其父文件夹的权限

# java - 有人知道 extjs 和消息代理（JMS 或类似的东西）的例子吗？

> ID：11537550
> 
> 赞同：1
> 
> 时间：2012-07-18T08:47:37.337
> 
> 标签：java, ajax, extjs, jms

有人知道如何使用**extjs**和**消息代理**（**JMS**或类似的东西）创建应用程序吗？有什么例子吗？我真的不知道是否可以将 extjs 代理连接到消息代理 **生产者**以及如何**使用**消息。

非常感谢您的帮助，在此先感谢。

# google-maps - 通过全景 ID 而不是位置加载 Google Street View Image API

> ID：11537555
> 
> 赞同：5
> 
> 时间：2012-07-18T08:47:46.720
> 
> 标签：google-maps, google-static-maps, google-street-view

[此处记录](https://developers.google.com/maps/documentation/streetview/)的街景图像 API提供特定位置的静态图像。但是，它不接受用于加载特定全景图的全景图 ID 参数。

最近添加到谷歌地图的街景图像已经“不在地图上”，只能通过全景 ID（panoid URL 参数）访问，例如[这些热水浴缸猴子](https://maps.google.com/maps?t=m&hl=en&ll=36.732625,138.462174&z=17&layer=c&cbll=36.732633,138.462177&cbp=13,120.39,,0,17.04&panoid=-_0l0tU3lKz0JtaEsqJk7w)或[这头驴](https://maps.google.com/maps?q=North+5th+and+Bedford+in+brooklyn&hl=en&sll=37.0625,-95.677068&sspn=35.768112,86.572266&hnear=Bedford+Ave+%26+N+5th+St,+Brooklyn,+Kings,+New+York+11211&t=m&layer=c&cbll=40.717571,-73.963103&panoid=dvn5EBkjcD0NPCE_Fqp2fw&cbp=12,252.03,,1,0&ie=UTF8&hq=&ll=40.717571,-73.963103&spn=0.003326,0.006706&z=18&vpsrc=0)。如果您从 URL 中删除 panoid，则[猴子不会加载](https://maps.google.com/maps?t=m&hl=en&ll=36.732625,138.462174&z=17&layer=c&cbll=36.732633,138.462177&cbp=13,120.39,,0,17.04&panoid=)。相比之下，这张树[的图片](https://maps.google.com/maps?t=h&hl=en&ll=36.552295,-118.761381&z=19&layer=c&cbll=36.552371,-118.761633&cbp=12,75.73768037238169,,1,5.095531419705196)不需要 panoid 来加载街景全景图。

通过 API 加载这些全景图时，也会出现同样的行为。[Google Maps API 文档](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanorama)对panoid 有以下说法：

> 返回街景全景图的当前全景图 ID。此 id 仅在浏览器的当前会话中是稳定的。

但是，如上图所示，全景图 ID 与当前会话无关。

我的问题是 Google Street View Image API 不接受 panoid，所以我无法找到获得猴子的静态图像。树的[静态图像](http://maps.googleapis.com/maps/api/streetview?size=482x323&location=36.552371,-118.761633&fov=40&heading=75.73768037238169&pitch=-5.09553141971&sensor=false)有效，但我得到[猴子的](http://maps.googleapis.com/maps/api/streetview?size=482x323&location=36.732633,138.462177&fov=40&heading=75.73768037238169&pitch=-5.09553141971&sensor=false)“没有图像” 。

为什么这些街景在 API 上按位置不可用，有没有办法从全景 ID 加载静态图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:47:42.420

我认为这有点骇人听闻，但这是您的猴子：

[http://cbk0.google.com/cbk?output=thumbnail&w=500&h=500&panoid=-_0l0tU3lKz0JtaEsqJk7w](http://cbk0.google.com/cbk?output=thumbnail&w=500&h=500&panoid=-_0l0tU3lKz0JtaEsqJk7w)

我用[这个](http://jamiethompson.co.uk/web/2010/05/15/google-streetview-static-api/)网站作为参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T18:37:02.917

您缺少三个参数：pov、heading 和 pitch，因此您无法看到猴子图像。

使用 pano id 调用街景图像 API 时，请尝试使用 &pano=#panoid。

[猴子](http://maps.googleapis.com/maps/api/streetview?size=482x323&pano=-_0l0tU3lKz0JtaEsqJk7w&fov=100&heading=125&pitch=-5&sensor=false)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-14T09:16:38.607

这是使用 PanoID 的网址

> [https://maps.googleapis.com/maps/api/streetview?size=300x150&pano=](https://maps.googleapis.com/maps/api/streetview?size=300x150&pano=) **YOUR_PANOID** &heading= **0** &pitch=0&key= **YOUR_API_KEY**

您可以通过提供航向值来移动全景视图。在上面的例子中默认为零。

# android - 哪个java ORM适用于android OS并支持惰性列表？

> ID：11537561
> 
> 赞同：9
> 
> 时间：2012-07-18T08:48:16.303
> 
> 标签：android, sqlite, orm

我想为 android 选择一个最合适的 ORM 库以在我的应用程序中使用。我知道 GreenADO 和 ORMLite，但了解不多。

您能否比较它们并提及它们的优点/缺点？并且还告诉哪一个支持惰性列表？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T09:34:26.147

我使用 GreenDAO，因为它速度快（[见性能](http://greendao-orm.com/features/)）。它易于使用，您可以非常轻松地进行延迟加载。我认为 ORMLite 有一个更大的社区，但似乎速度较慢。

关于延迟加载，在 ORMLite 中您必须使用返回迭代器的 DAO.iterator(Query)，因此您需要一个自定义适配器。使用 greendao，您可以使用 Query.lazyList()，它返回一个列表。

我建议你去GreenDAO。

# android - 从数据库中检索表：“对字段槽的错误请求”

> ID：11537562
> 
> 赞同：0
> 
> 时间：2012-07-18T08:48:27.583
> 
> 标签：android, database

我有一个数据库，里面有 2 个表。在 1 个表中，我有 id group 2 列。现在我想要的是我必须检索表中的组数据。

我的取货地点：

```
db.open();
     for(int i=1;i<=5;i++)
     {       
     if(i==1)
         group1=db.getspintitle(1);
     if(i==2)
         group2=db.getspintitle(2);
     if(i==3)
         group3=db.getspintitle(3);
     if(i==4)
         group4=db.getspintitle(4);
     if(i==5)
         group5=db.getspintitle(5);     
     } 
```

我的数据库代码：

```
public String getspintitle(int rowId)throws SQLException
{   
    String sumtotal="";
    Cursor cursor1 = db.rawQuery(
             "SELECT spin from spinner WHERE _id=rowId", null);  
//   sumtotal=cursor1.toString();   
//   cursor1.close();       
    for(int i=rowId;i<cursor1.getCount();i++)
    {
    if (cursor1 != null && cursor1.getCount() > 0)
    {          cursor1.moveToNext();         
    sumtotal= cursor1.getString(i);          
    cursor1.close();    
    }   
    }
    return sumtotal;        

//  String spin="SELECT spin from spinner WHERE _id='rowId' ";
//  return spin;
} 
```

我的日志是：

```
07-18 14:12:01.890: E/CursorWindow(27405): Bad request for field slot 0,1\. numRows = 6, numColumns = 1
07-18 14:12:01.898: D/AndroidRuntime(27405): Shutting down VM
07-18 14:12:01.898: W/dalvikvm(27405): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
07-18 14:12:01.962: E/AndroidRuntime(27405): Uncaught handler: thread main exiting due to uncaught exception
07-18 14:12:02.000: E/AndroidRuntime(27405): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.budget1/com.budget1.Report}: java.lang.IllegalStateException: get field slot from row 0 col 1 failed
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.os.Looper.loop(Looper.java:123)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread.main(ActivityThread.java:4363)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at java.lang.reflect.Method.invokeNative(Native Method)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at java.lang.reflect.Method.invoke(Method.java:521)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at dalvik.system.NativeStart.main(Native Method)
07-18 14:12:02.000: E/AndroidRuntime(27405): Caused by: java.lang.IllegalStateException: get field slot from row 0 col 1 failed
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.database.CursorWindow.getString_native(Native Method)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.database.CursorWindow.getString(CursorWindow.java:329)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at com.budget1.DBadapter.getspintitle(DBadapter.java:208)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at com.budget1.Report.onCreate(Report.java:65)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-18 14:12:02.000: E/AndroidRuntime(27405):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
07-18 14:12:02.000: E/AndroidRuntime(27405):    ... 11 more
07-18 14:12:02.078: I/dalvikvm(27405): threadid=7: reacting to signal 3
07-18 14:12:02.198: I/dalvikvm(27405): Wrote stack trace to '/data/anr/traces.txt'
07-18 14:17:02.150: I/Process(27405): Sending signal. PID: 27405 SIG: 9
07-18 14:17:04.198: I/System.out(6293): subbu 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:51:50.773

```
Cursor cursor1 = db.rawQuery("SELECT spin from spinner WHERE _id="+rowId, null);  
                                                                  ^^^^^^^
sumtotal= cursor1.getString(0);// zero instead of i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:56:06.163

顺便看看

```
cursor.getString(cursor.getColumnIndexOrThrow("spin")) 
```

这应该更容易！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:57:45.227

您可以尝试[查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法进行澄清，如下所示：

```
Cursor cursor1 = db.query(true, "spinner", new String[]{"spin"}, "_id"+ "=" + rowId,null,null,null,null,null); 
```

# android - 如何将参数从android本机应用程序传递到swf文件

> ID：11537564
> 
> 赞同：1
> 
> 时间：2012-07-18T08:48:29.543
> 
> 标签：android, flash, air, adobe

我的资产文件夹中有一个 swf 文件，我可以使用 Adob​​e AIR 在本机上显示其内容。现在我需要将参数（源）从我的 android 本机应用程序动态传递到该 swf 文件中，以便它可以显示不同的内容。如何将参数从 android 传递到 swf 文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:22:26.727

您可以创建 HTML 代码来加载您的 swf 文件。然后将该HTML放入`WebView`显示。传递参数将与您在网页中所做的完全一样。

一些示例代码，应该可以帮助您：

```
String htmlSource = "<object type=\"application/x-shockwave-flash\" data=\"file:///android_asset/yourFile.swf\" width=\"360\" height=\"280\">
                 <param name=\"movie\" value=\"file:///android_asset/yourFile.swf\" />
                 <param name=\"source\" value=\"valueForSourceParam\" />
                 <param name=\"someOtherParam\" value=\"valueForSomeOtherParam\" />
               </object>";

    WebView webView= new WebView(this);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true);
    webView.loadDataWithBaseURL(null, htmlSource, "text/html, "utf-8", null); 
```

# java - 使用 UISpec4J 或 FEST 的利弊

> ID：11537571
> 
> 赞同：2
> 
> 时间：2012-07-18T08:49:04.737
> 
> 标签：java, swing, unit-testing, automated-tests

我们有一个遵循 MVC 模式的应用程序，因此有一个很大的 GUI 部分需要测试。

我从阅读各种帖子中筛选出来的是，目前最好的两个选择是`UISpec4J`和`FEST`。

每个选项的优缺点是什么？有什么`UISpec4J`可以或不可以做到的，另一个可以吗？

两者都是建立在 JUnit 之上还是它们自己的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:11:17.953

它们都建立在 JUnit 之上。UISpec4J 最糟糕的事情之一是它从大约 2 年以来就不受支持，因此它目前不适用于 jre1.7。特别是在 XToolkit 使用的 unix 基础操作系统上。我认为使用 FEST 就足够了。

# android - android XML 片段的编程等效项

> ID：11537573
> 
> 赞同：-2
> 
> 时间：2012-07-18T08:49:10.537
> 
> 标签：android, android-intent

任何人都可以提及以下 XML 代码的编程等效项（用于在 android 活动过渡动画中使用它）

```
<set xmlns:android="http://schemas.android.com/apk/res/android"> 
    <translate android:fromXDelta="-100%p" android:toXDelta="0" android:duration="@android:integer/config_shortAnimTime"/> 
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="@android:integer/config_shortAnimTime" /> 
</set> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:20:24.007

愿这对你有所帮助。

```
 final AnimationSet showanim = new AnimationSet( true );
    Animation trans = new TranslateAnimation( 0, 0, 100, 0); 
    trans.setDuration( 5000 );
    showanim.addAnimation( trans ); 
```

然后将其添加到您的 ui 元素中。例如，如果您使用 TextView 然后使用

```
yourtext.setAnimation(showanim); 
```

# django - 多个Backbonejs请求获取相关模型数据

> ID：11537575
> 
> 赞同：0
> 
> 时间：2012-07-18T08:49:18.200
> 
> 标签：django, django-models, backbone.js, tastypie

我用这两个资源（用tastepie）构建了一个RESTful API：

```
class PhotographerResource(ModelResource):
    album = fields.ToManyField('core.api.AlbumResource', 'album_set')
    class Meta:
        queryset = Photographer.objects.all()
        resource_name = 'photographer'
        authorization = Authorization()

class AlbumResource(ModelResource):

    artist = fields.ForeignKey(PhotographerResource, 'photographer', full=True)

    class Meta:
        queryset = Album.objects.all()
        resource_name= 'albums'
        authorization = Authorization() 
```

现在，当我访问时，`/api/v1/albums/1`我得到以下结果：

```
{
"album": ["/api/v1/albums/4/", "/api/v1/albums/5/"],
"photographer_name": "Jimi Hendrix",
"photographer_thumbnail": "http://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Katatonia_in_2004.jpg/300px-Katatonia_in_2004.jpg",
"biography": "Jimmi Hendrix is an awesome musician man...",
"id": "1",
"page_link": "http://ahmetkaya.com/",
"resource_uri": "/api/v1/artists/1/",
"slug": "jimi-hendrix"
} 
```

现在在我的前端 Backbonejs 中，当我想获取摄影师的相册时，我必须创建一个`album`对象，`fetch`即来自服务器的数据以在视图中呈现它。现在我的问题是，这种方法（向服务器发送许多请求）不会减慢页面的加载速度并对用户体验和应用程序性能产生负面影响吗？有没有更好的方法来设计我的资源之间的关系？`save`或者，用处理and的 Django 视图替换 RESTful API 是否更好`fetch`，或者这不是“正确”的做法？我想在学习时遵循约定和最佳实践，但是 Backbonejs 似乎真的没有约定..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:50:52.497

在主干方面，您可以创建一个专辑集合并将其 url 设置为 /api/v1/albums 并在集合上调用 fetch。这将在一个 http 请求中提取所有专辑。如果您需要通过 /api/v1/albums/byname/jonathancoulton 或 /api/v1/albums/bytitle/codemonkey 等方式提供过滤，则 url 也可以是一个函数。如果您经常使用此功能，我还在集合上设置了自定义提取功能

# matlab - 检查与 Matlab 版本兼容性的工具？

> ID：11537577
> 
> 赞同：9
> 
> 时间：2012-07-18T08:49:22.333
> 
> 标签：matlab, compatibility

我有几个脚本（m 文件），我们的客户有不同的 Matlab 版本。是否有工具可以检查每个脚本与某些 Matlab 版本的兼容性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:32:25.990

You might be able to do what you want with the `checkcode` function. Alternatively, you can use functions such as `version` and `verLessThan` to write your scripts and functions such that they check which version they are being run on and take appropriate action.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-20T16:58:55.690

**仅适用于 MATLAB R2017b 及更高版本：**

是的，我们确实有一个工具可以为当前工作文件夹和子文件夹创建[codeCompatibilityReport 。](https://www.mathworks.com/help/matlab/ref/codecompatibilityreport.html#mw_6593a034-66c0-429d-9e69-cf7e7cdb82af)此功能是在 MATLAB R2017b 中引入的。代码兼容性报告在 MATLAB Web 浏览器中打开。升级到较新版本的 MATLAB 后，您可以使用此报告来确定现有代码中的潜在兼容性问题。

在 MATLAB 中导航到托管您希望为其运行代码兼容性报告的 M 文件的目录。然后，执行以下命令：

```
>> codeCompatibilityReport 
```

代码兼容性报告包含可帮助您将代码升级到新版本 MATLAB 的信息。它包含这些部分。

**不兼容和语法错误**- 包含有关分析代码中的语法错误和不兼容注意事项的详细信息的表格。例如，“在此上下文中不允许使用 ~ 忽略值，或者 'wavfinfo' 已被删除。请改用 'AUDIOINFO'。”

**警告和其他建议**- 包含有关警告和其他改进代码机会的详细信息的表格。例如，“不建议以编程方式使用 DISPLAY。请改用 DISP 或 FPRINTF。”

**执行**的检查 - 详细说明对指定代码执行的检查。

**文件**- MATLAB 分析代码兼容性的文件列表。

**这是 MATLAB Answers Post 的链接，其中包含更多信息：** [https ://www.mathworks.com/matlabcentral/answers/364764-is-there-a-tool-to-check-for-compatibility-between-different-matlab -版本](https://www.mathworks.com/matlabcentral/answers/364764-is-there-a-tool-to-check-for-compatibility-between-different-matlab-versions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:12:52.843

根据您要迁移到的 Matlab 版本，有一个称为 Upgrade Advisor 的功能可以检查这类事情（它与 Simulink Model Advisor 非常相似）。

# c# - asp.net mvc3 返回另一个视图

> ID：11537578
> 
> 赞同：0
> 
> 时间：2012-07-18T08:49:23.507
> 
> 标签：c#, asp.net-mvc, razor

这是问题所在

```
 public ActionResult One()
 {
   if(condition)
     return View()
   else
     return Two()
 }

 public ActionResult Two()
 {
   return View()
 } 
```

我怎样才能做到这一点没有错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:54:12.637

将您的代码更改为：

```
public ActionResult One()
 {
   if(condition)
     return View();
   else
     RedirectToAction("Two");
 }

 public ActionResult Two()
 {
   return View();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:52:45.807

只需按名称 ( `return view("nameOfView")`) 返回视图，或使用`RedirectToAction`或`RedirectToRoute`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T08:52:47.933

只需使用：

```
 public ActionResult One()
 {
   if(condition)
     return View()
   else
     return View("Two")
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:52:37.810

哦，我已经解决了问题

```
 public ActionResult Two()
 {
   return View("Two")
 } 
```

# gwt - 使用 GWT 设计管理界面

> ID：11537579
> 
> 赞同：2
> 
> 时间：2012-07-18T08:49:27.333
> 
> 标签：gwt, user-interface

我需要开发简单的管理界面。侧面和主窗口上有菜单的东西。我考虑用`GWT`它来构建它。

管理应用程序需要使用 RPC 与服务器端通信并获取系统的状态等。

我不喜欢从头开始设计，而是建立在众所周知的通用 UI 之上。我想知道是否有任何 GWT 项目模板/示例可以完成这样的工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:59:28.813

一些 UI 框架：

*   GXT：[http ://www.sencha.com/products/gxt/](http://www.sencha.com/products/gxt/)
*   智能 GWT：[http ://code.google.com/p/smartgwt/](http://code.google.com/p/smartgwt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T08:13:01.290

的确，GXT UI 框架中有很多功能。但是要为管理员构建一个漂亮的 UI，我会建议 GWT-Bootstrap 具有非常棒的组件。

参考以下教程： [gwtbootstrap3 demo](http://gwtbootstrap3.github.io/gwtbootstrap3-demo/#home)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-08T21:01:55.993

Bootstrap 将是一个不错的选择，尽管我最终认为这对我想做的事情来说有点矫枉过正。移动友好的简单性是关键。我可以不使用 5 种“下拉按钮”。

投资于样式而不是跳到 SmartGWT 等第三方库。我已经浪费了四年才终于受够了。它严重阻碍了 GWT，更不用说性能和错误了。

我花了一天时间来设计我的 UI 以产生流畅的移动友好外观和感觉。GWT 内置了所有功能，但它不提供任何预建样式，并且在它的展示页面上找到的标准颜色和渐变看起来有点粗糙。

# jboss - Jboss Portal Render switch on liferay 什么？

> ID：11537584
> 
> 赞同：0
> 
> 时间：2012-07-18T08:49:46.837
> 
> 标签：jboss, liferay, render

您好，我现在这个问题很笼统，但我必须问它:) 我在 liferay 门户上更改了 Jboss 门户，现在我有这样的课程

```
 myclass1 extends AbstractObjectRenderer implements RegionRenderer //A region renderer is responsible to create the markup container for a set of portlets on a page region. 
***methods
    renderHeader(final RendererContext rendererContext, final RegionRendererContext rrc)
    public final void renderBody(final RendererContext rendererContext, final RegionRendererContext rrc)
    public final void renderFooter(final RendererContext rendererContext, final RegionRendererContext rrc)
***methods

     myclass2 extends AbstractObjectRenderer implements WindowRenderer 
***methods 
         public final void render(final RendererContext rendererContext, final WindowRendererContext wrc)//
***methods   

     myclass3 extends AbstractObjectRenderer implements PortletRenderer 
***methods
            public final void render(final RendererContext rendererContext, final PortletRendererContext prc)//Render the markup of a portlet.
***methods

    and last one 

 myclass4   extends AbstractObjectRenderer implements DecorationRenderer 
***methods
            public final void render(final RendererContext rendererContext, final DecorationRendererContext drc)//Create the markup for the portlet decoration 
***methods 
```

这 4 个类用于提供一些元素，如颜色、文本、图片等。我已经准备好了所有东西，我需要的是来自 liferay 门户的工具，它可以做同样的工作。我找到了 AssetRender，但它只支持资产资产框架中的资产，无法检查这个问题，找不到任何关于资产渲染以外的其他用途的教程。正如我所说，我已经准备好了一切，我只需要渲染一些东西。

我知道这看起来很糟糕 :) 但我正在寻找在 liferay 中具有类似功能的工具、类或其他东西。我拿走你所拥有的一切:) 短样本

```
public final void render(final RendererContext rendererContext, final WindowRendererContext wrc)
throws RenderException {
PrintWriter out = rendererContext.getWriter();
out.print("<div class=\"portlet-container\">");
out.print("<table cellspacing=\"1\" border=\"5\" width=\"88%\">");
out.print("<tbody>"); 
...
    out.print("</table>");
    out.print("</div>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:24:15.770

您能否详细说明您要实现的目标？似乎您想要定义一些显示在每个页面上的标记，对吗？在这种情况下，您需要使用[Liferay 主题](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7)。您可以在主题中定义包装标记及其样式。还有一些布局可以定义页面是 1 列、2 列还是更复杂的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:23:23.263

我刚刚发现 Custom Global Markup 6.1.0.1 它可以像 jboss Portal add 一样放置一些 HTML。但也许有经验的人可以告诉我更多关于这个工具的信息，例如，它是否提供了一些我可以像上面的 jboss 类一样使用的 api，我可以在哪里找到更多信息，也许有人知道好的来源。提前感谢。

# opencv - 我在哪里可以找到 haar cascades xml 文件？

> ID：11537585
> 
> 赞同：39
> 
> 时间：2012-07-18T08:49:51.930
> 
> 标签：opencv

我正在寻找一个网站来下载 haar cascades xml 文件。它可以用于任何对象，只要它是一个正常工作的级联。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T08:52:23.713

转到 opencv 文件夹并检查数据文件夹。你会发现眼睛、脸、耳朵、上半身的 haar-cascades...:) 而且它们确实工作正常。

这是一个站点 [http://alereimondo.no-ip.org/OpenCV/34/](http://alereimondo.no-ip.org/OpenCV/34/) 不知道它们是否有效。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-07T06:13:01.560

由于上一个答案中的链接似乎已失效，您也可以尝试从[此处的 OpenCV GitHub 存储库下载它们](https://github.com/Itseez/opencv/tree/master/data/haarcascades)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-29T16:37:30.533

如果您使用来自 python 的 opencv，则可以使用此代码片段来使用内置的 haar 级联：

```
import os
import cv2

cv2_base_dir = os.path.dirname(os.path.abspath(cv2.__file__))
haar_model = os.path.join(cv2_base_dir, 'data/haarcascade_frontalface_default.xml') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-10T03:44:13.843

无论你在哪里克隆了`opencv-contrib`（如果你是从源代码中克隆的），之后都遵循这条路径，在 OpenCV3.1.0 中我有`Python`这些`Ubuntu16`：

```
mona@mona:~/computer_vision/face_detection/opencv_contrib/modules/face/data/cascades$ ls
haarcascade_mcs_eyepair_big.xml    haarcascade_mcs_nose.xml
haarcascade_mcs_eyepair_small.xml  haarcascade_mcs_rightear.xml
haarcascade_mcs_leftear.xml        haarcascade_mcs_righteye_alt.xml
haarcascade_mcs_lefteye_alt.xml    haarcascade_mcs_righteye.xml
haarcascade_mcs_lefteye.xml        haarcascade_mcs_upperbody.xml
haarcascade_mcs_mouth.xml 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-06T06:36:23.187

在openCV的官方repo`data`文件夹中：[https ://github.com/opencv/opencv/tree/master/data](https://github.com/opencv/opencv/tree/master/data)

请记住：不是每个人都使用最新版本的 openCV，因此您可以通过 git repo 中的标签选择库的版本。

干杯

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-28T00:16:04.843

在 opencv 3.1 你可以找到

C:\opencv3\data\lbpcascades

C:\opencv3\data\haarcascades_cuda

C:\opencv3\opencv_contrib-master\modules\face\data\cascades

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-25T05:48:54.580

在寻找 HAAR Cascades 时，降落在这里 - 似乎这个链接应该帮助我们所有人搜索/创建我们自己的 HAAR + HOG ---

[http://web.missouri.edu/~duanye/course/cs8680-fall-2016/lecture-notes/HoG.pdf](http://web.missouri.edu/~duanye/course/cs8680-fall-2016/lecture-notes/HoG.pdf)

PS：- 我正在寻找一个 HAAR 级联 - 为 HUMAN Head [发际线，耳朵等] 请指导 - 自己已经到达这里 -

[https://github.com/Computer-Vision-Dhankar-Rohit/Computer-Vision---Open-Source_1](https://github.com/Computer-Vision-Dhankar-Rohit/Computer-Vision---Open-Source_1)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-18T05:55:39.873

您无需去其他网站查找级联分类器文件。你只需要去 opencv 发布站点。那里下载适当的发行版。然后打开下载的文件。在那里直接如下：来源>数据> haarcascades；在该文件中，您应该找到所有默认的 haarcascade 文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-29T06:23:36.987

这是从 github 链接下载 haar-cascade-files 的直接链接：-

[https://github.com/anaustinbeing/haar-cascade-files](https://github.com/anaustinbeing/haar-cascade-files)

只需克隆或下载为 zip 即可获取所有 haar 级联 xml 文件

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-05T14:46:15.633

如果您想从*GITHUB*分叉 OpenCv 文件： [https ://github.com/opencv/opencv/tree/master/data/haarcascades](https://github.com/opencv/opencv/tree/master/data/haarcascades)

或者，您可以从以下位置下载 zip 文件：

[https://github.com/manishsingh7163/OpenCv-Haarcascade-XML-files](https://github.com/manishsingh7163/OpenCv-Haarcascade-XML-files)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-27T00:31:05.090

这就是我用[git v2.25.0](https://raw.githubusercontent.com/git/git/master/Documentation/RelNotes/2.25.0.txt)做的，也用 v2.26.2 测试过。此技巧不适用于 v2.30.1

### TLDR

```
git clone --no-checkout --filter=tree:0 https://github.com/opencv/opencv
cd opencv

# requires git 2.25.x to 2.26.2
git sparse-checkout set data/haarcascades 
```

您可以使用[Docker](https://docs.docker.com/get-docker/)来避免安装特定版本的 git

```
git clone --no-checkout --filter=tree:0 https://github.com/opencv/opencv
cd opencv

# requires git 2.25.x to 2.26.2
docker run --rm -it -v $PWD/:/code/ --workdir=/code/ alpine/git:v2.26.2 sparse-checkout set data/haarcascades 
```

## 完整的解决方案

```
# bare minimum clone of opencv
$ git clone --no-checkout --filter=tree:0 https://github.com/opencv/opencv
...
Resolving deltas: 100% (529/529), done.

# Downloaded only ~7.3MB , takes ~3 seconds
# du = disk usage, -s = summary, -h = human-readable
$ du -sh opencv
7.3M    opencv/

# Set target dir
$ cd opencv
$ git sparse-checkout set data/haarcascades
...
Updating files: 100% (17/17), done.
# Takes ~10 seconds, depending on your specs

# View downloaded files
$ du -sh data/haarcascades/
9.4M    data/haarcascades/
$ ls data/haarcascades/
haarcascade_eye.xml                      haarcascade_frontalface_alt2.xml      haarcascade_licence_plate_rus_16stages.xml  haarcascade_smile.xml
haarcascade_eye_tree_eyeglasses.xml      haarcascade_frontalface_alt_tree.xml  haarcascade_lowerbody.xml                   haarcascade_upperbody.xml
haarcascade_frontalcatface.xml           haarcascade_frontalface_default.xml   haarcascade_profileface.xml
haarcascade_frontalcatface_extended.xml  haarcascade_fullbody.xml              haarcascade_righteye_2splits.xml
haarcascade_frontalface_alt.xml          haarcascade_lefteye_2splits.xml       haarcascade_russian_plate_number.xml 
```

## 参考

*   [git-sparse-checkout-blog](https://github.blog/2020-01-17-bring-your-monorepo-down-to-size-with-sparse-checkout/#sparse-checkout-and-partial-clones)
*   [git-sparse-checkout-docs](https://git-scm.com/docs/git-sparse-checkout)
*   [git-filter-props-docs](https://git-scm.com/docs/git-rev-list)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-09T04:11:27.937

xml文件可以像这样直接从cv2访问

```
cv2.data.haarcascades 
```

这是一个更详细的例子

```
face_cascade_name = cv2.data.haarcascades + 'haarcascade_frontalface_alt.xml'
face_cascade = cv2.CascadeClassifier()
if not face_cascade.load(cv2.samples.findFile(face_cascade_name)):
    print("Error loading xml file")
    exit(0) 
```

# java - RestTemplate -- 默认超时值

> ID：11537591
> 
> 赞同：38
> 
> 时间：2012-07-18T08:50:11.820
> 
> 标签：java, web-services, spring, http, rest

使用 Spring 时的默认超时值是`RestTemplate`多少？

例如，我正在调用这样的 Web 服务：

```
RestTemplate restTemplate = new RestTemplate();
String response = restTemplate.getForObject("http://webservice.com/item/3455", String.class); 
```

是否有任何内置超时值`RestTemplate`？我不打算更改超时值，但是，我想确保每个请求都有合理的超时。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-05-12T01:38:52.517

要明确回答问题...

默认超时是无限的。

默认情况下，RestTemplate 使用 SimpleClientHttpRequestFactory，而后者又使用 HttpURLConnection。

默认情况下，HttpURLConnection 的超时为 0 - 即无限，除非它已由以下属性设置：

```
-Dsun.net.client.defaultConnectTimeout=TimeoutInMiliSec 
-Dsun.net.client.defaultReadTimeout=TimeoutInMiliSec 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-18T09:14:20.777

我认为您可以使用 SimpleClientHttpRequestFactory 作为超时参数。SimpleClientHttpRequestFactory 的实例可以通过构造函数或 setter 方法设置为 rest 模板。

默认情况下，RestTemplate 使用 SimpleClientHttpRequestFactory，因此您可以直接将值设置为 restTemplate。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-14T14:49:50.633

spring-android RestTemplate 的一个不错的功能是根据操作系统的版本使用适当的（由 Google 推荐）实现 RequestFactory。

> Google 建议在 Gingerbread（2.3 版）和更新版本上使用 J2SE 工具，而之前的版本应该使用 HttpComponents HttpClient。根据此建议，RestTemplate 会检查您的应用运行的 Android 版本并使用适当的 ClientHttpRequestFactory。

所以前面的答案并不完整，因为没有考虑到 HttpComponentsClientHttpRequestFactory（spring-android 用于 Android OS 版本 < 2.3）。

我的解决方案是这样的：

```
public class MyRestTemplate extends RestTemplate {
    public MyRestTemplate() {
        if (getRequestFactory() instanceof SimpleClientHttpRequestFactory) {
            Log.d("HTTP", "HttpUrlConnection is used");
            ((SimpleClientHttpRequestFactory) getRequestFactory()).setConnectTimeout(10 * 1000);
            ((SimpleClientHttpRequestFactory) getRequestFactory()).setReadTimeout(10 * 1000);
        } else if (getRequestFactory() instanceof HttpComponentsClientHttpRequestFactory) {
            Log.d("HTTP", "HttpClient is used");
            ((HttpComponentsClientHttpRequestFactory) getRequestFactory()).setReadTimeout(10 * 1000);
            ((HttpComponentsClientHttpRequestFactory) getRequestFactory()).setConnectTimeout(10 * 1000);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-29T11:02:53.523

您可以在 RestTemplate 构造函数中使用 ClientHttpRequestFactory 参数：

```
private final int HTTP_CONNECT_TIMEOUT = 15000;
private final int HTTP_READ_TIMEOUT = 10000;

private ClientHttpRequestFactory getClientHttpRequestFactory() {
    HttpComponentsClientHttpRequestFactory clientHttpRequestFactory = new HttpComponentsClientHttpRequestFactory();
    clientHttpRequestFactory.setConnectTimeout(HTTP_CONNECT_TIMEOUT);
    clientHttpRequestFactory.setReadTimeout(HTTP_READ_TIMEOUT);
    return clientHttpRequestFactory;
} 
```

当你需要一个新的 RestTemplate 时，像这个例子一样创建它：

```
RestTemplate rt = new RestTemplate(getClientHttpRequestFactory()); 
```

# java - 尝试从 Android 上的 Facebook SDK 检索信息时出现强制关闭错误

> ID：11537592
> 
> 赞同：1
> 
> 时间：2012-07-18T08:50:21.107
> 
> 标签：java, android, facebook, graph

尝试从 Facebook Graph API 接收数据，但我似乎得到了 NullPointerException。有人可以帮忙吗？这是我的带有 xml 和 logCat 输出的活动文件。

```
package com.example.fbtest; 
```

// 省略所有导入语句。

```
 public class TestActivity extends Activity implements OnClickListener {

String APP_ID;
Facebook fb;
private SharedPreferences sp;
TextView tv;
ImageView login;
Button b;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);
    APP_ID = getString(R.string.APP_ID);
    fb = new Facebook(APP_ID);
    sp = getPreferences(MODE_PRIVATE);
    String access_token = sp.getString("access_token", null);
    long expires = sp.getLong("access_expires", 0);

    if (access_token != null) {
        fb.setAccessToken(access_token);
    }
    if (expires != 0) {
        fb.setAccessExpires(expires);
    }

    login = (ImageView) findViewById(R.id.login);
    login.setOnClickListener(this);
    b=(Button)findViewById(R.id.button1);
    b.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_test, menu);
    return true;
}

private void post() {
    if (fb.isSessionValid()) {
        login.setImageResource(R.drawable.logout_button);
        JSONObject obj;
        try {
            obj = Util.parseJson(fb.request("ronakshah"));
            String id = obj.optString("id");
            String name = obj.optString("name");
            tv.setText("Welcome, " + name + id);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        } catch (FacebookError fe) {

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.login:

        if (fb.isSessionValid()) {
            // button close our session - log out of facebook
            try {
                fb.logout(getApplicationContext());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else {
            // login to facebook
            fb.authorize(TestActivity.this, new String[] { "email",
                    "read_stream" }, new DialogListener() {

                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(TestActivity.this, "fbError",
                            Toast.LENGTH_SHORT).show();
                }

                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(TestActivity.this, "onError",
                            Toast.LENGTH_SHORT).show();
                }

                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    Editor editor = sp.edit();
                    editor.putString("access_token", fb.getAccessToken());
                    editor.putLong("access_expires", fb.getAccessExpires());
                    editor.commit();
                }

                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(TestActivity.this, "onCancel",
                            Toast.LENGTH_SHORT).show();
                }
            });
        }
    case R.id.button1:
        post();
    }
} 
```

}

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical"
>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".TestActivity" />

<ImageView
    android:id="@+id/login"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/login_button"
    android:text="Button" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

日志猫：

```
07-18 14:10:42.636: I/dalvikvm(385): Jit: resizing JitTable from 512 to 1024
07-18 14:10:47.216: D/dalvikvm(385): GC_CONCURRENT freed 555K, 52% free 2998K/6151K, external 908K/1038K, paused 9ms+8ms
07-18 14:13:39.126: D/dalvikvm(385): GC_CONCURRENT freed 492K, 52% free 2988K/6151K, external 918K/1038K, paused 9ms+9ms
07-18 14:13:39.235: D/webviewglue(385): nativeDestroy view: 0x270d38
07-18 14:13:40.525: D/dalvikvm(385): GC_CONCURRENT freed 554K, 54% free 2867K/6151K, external 726K/1038K, paused 14ms+10ms
07-18 14:13:41.395: D/AndroidRuntime(385): Shutting down VM
07-18 14:13:41.395: W/dalvikvm(385): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-18 14:13:41.416: E/AndroidRuntime(385): FATAL EXCEPTION: main
07-18 14:13:41.416: E/AndroidRuntime(385): java.lang.NullPointerException
07-18 14:13:41.416: E/AndroidRuntime(385):  at com.example.fbtest.TestActivity.post(TestActivity.java:73)
07-18 14:13:41.416: E/AndroidRuntime(385):  at com.example.fbtest.TestActivity.onClick(TestActivity.java:136)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.view.View.performClick(View.java:2485)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.view.View$PerformClick.run(View.java:9080)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.os.Handler.handleCallback(Handler.java:587)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.os.Looper.loop(Looper.java:123)
07-18 14:13:41.416: E/AndroidRuntime(385):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-18 14:13:41.416: E/AndroidRuntime(385):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 14:13:41.416: E/AndroidRuntime(385):  at java.lang.reflect.Method.invoke(Method.java:507)
07-18 14:13:41.416: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-18 14:13:41.416: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-18 14:13:41.416: E/AndroidRuntime(385):  at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:32:18.243

你永远不会为你的`tv`变量分配任何东西。

假设你想`TextView`在你的 XML 文件中引用 ，你必须给它一个 id：

```
android:id="@+id/welcomeText" 
```

然后将其分配给您的`tv`变量：

```
tv = (TextView) findViewById(R.id.welcomeText); 
```

# matlab - 两个单元阵列之间的叉积

> ID：11537599
> 
> 赞同：3
> 
> 时间：2012-07-18T08:50:48.653
> 
> 标签：matlab, for-loop, cross-product

我有以下两个向量场：

```
>> orient

orient = 

    [1x3 double]    [1x3 double]    [1x3 double]
    [1x3 double]    [1x3 double]    [1x3 double]
    [1x3 double]    [1x3 double]    [1x3 double]

>> distance

distance = 

    [1x3 double]    [1x3 double]    [1x3 double]
    [1x3 double]    [1x3 double]    [1x3 double]
    [1x3 double]    [1x3 double]    [1x3 double] 
```

我需要取成对元素的叉积，即

```
b = (cross(orient{1,1},distance{1,1}) + cross(orient{1,2},distance{1,2})..... and so on 
```

然后重塑以匹配距离和方向的尺寸。

我可以在不使用 for 循环的情况下执行此操作吗？

如果我有

```
orient{1,1} = 

[1x3 double]

distance = 

        [1x3 double]    [1x3 double]    [1x3 double]
        [1x3 double]    [1x3 double]    [1x3 double]
        [1x3 double]    [1x3 double]    [1x3 double] 
```

我该怎么办

sum1 = (cross(orient{1,1},distance{1,1}) + cross(orient{1,1},distance{1,2}) +...) sum2 = (cross(orient{1, 2},distance{1,1}) + cross(orient{1,2},distance{1,2}) +...)

其中每个“和”只是单个方向元素的迭代，与距离的所有元素相交，然后将这些叉积​​相加。然后我会有：

```
mastersum = sum1 sum2 sum3
            sum4 sum5 sum6
            sum6 sum8 sum9 
```

在哪里

```
sum1 = 

[1x3 double] 
```

我只是把它放在一个令人困惑的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:59:29.507

您需要使用[`cellfun`](http://www.mathworks.com/help/techdoc/ref/cellfun.html)来遍历没有`for`-loop 的单元格数组。

对于两个向量场（两个元胞数组），您应该这样做：

```
crosses = cellfun(@(u, v)cross(u, v)', orient, distance, 'UniformOutput', 0);
b = sum(cell2mat({crosses{:}})', 1)  %# Summing all vectors in all cells 
```

`orient`来自的单个单元格的类似过程`orient{1, 2}`是：

```
u = orient{1, 2};
crosses = cellfun(@(v)cross(u, v)', distance, 'UniformOutput', 0);
b = sum(cell2mat({crosses{:}})', 1)  %# This command remains the same 
```

`orient`要在没有循环的情况下获取所有向量的结果`for`，请改为：

```
b_func = @(u)sum(cell2mat(cellfun(@(v)cross(u,v)', {distance{:}}, 'Un', 0))', 1);
U = cellfun(b_func, orient, 'UniformOutput', 0) 
```

Now`U`也是一个元胞数组（与 具有相同的维度`orient`）：`U{1, 1}`具有 、 等的`orient{1, 1}`交叉`U{1, 2}`总和`orient{1, 2}`...

# android - 位图上的 android TransalteAnimation

> ID：11537600
> 
> 赞同：1
> 
> 时间：2012-07-18T08:50:52.413
> 
> 标签：android, android-animation

我需要在画布中绘制可移动位图，我需要通过 TransalteAnimation 中的矩阵移动它

我有这个代码：

```
float[] values = new float[9];  
TranslateAnimation slide = new TranslateAnimation(-100,100, 0, 0);
slide.setDuration(100);
slide.setRepeatCount(TranslateAnimation.INFINITE);
slide.setRepeatMode(TranslateAnimation.REVERSE);
slide.setFillAfter(true);
Transformation transform = new Transformation();
slide.start();
slide.getTransformation(AnimationUtils.currentAnimationTimeMillis(), transform);
            transform.getMatrix().getValues(values); 
```

但它从未改变，值总是： [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]

我在哪里犯错？

**它适用于任何其他类型的动画：RotateAnimation、AlphaAnimation 等。它不适用于 Translate Animation**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:54:31.750

找到答案，需要打电话 `slide.initialize(0, 0, 0, 0);`

# c# - 从 Application_Error 抛出 http 异常（未经授权）

> ID：11537607
> 
> 赞同：6
> 
> 时间：2012-07-18T08:51:13.367
> 
> 标签：c#, asp.net-mvc-3, http-status-code-403, httpexception

我试图从 Global asax Application_Error 中抛出这一行

```
throw new HttpException((int)HttpStatusCode.Unauthorized, "Forbidden"); 
```

但由于某种原因，我在浏览器中得到 200 而不是 401，你知道为什么吗？

**更新：**

```
protected void Application_Error(object sender, EventArgs e)
{        
    throw new HttpException((int)HttpStatusCode.Unauthorized, "Forbidden");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-25T03:22:12.903

此代码可以帮助您

```
 protected void Application_Error(object sender, EventArgs e)
 {
     Response.StatusCode = (int)HttpStatusCode.Unauthorized;
     Server.ClearError();
 } 
```

但是，您应该在 web.config 中应用身份验证和授权，而不是在 Global.asax 中设置状态代码

# google-chrome - 链接内容之前的 CSS 在设置为无的下划线上有幻影文本阴影

> ID：11537608
> 
> 赞同：0
> 
> 时间：2012-07-18T08:51:13.430
> 
> 标签：google-chrome, css

我正在尝试设计一个简单的 a 标签，使其具有前面的图标，我已经达到了我对它相当满意的程度（尽管我仍然不确定我是否以最好的方式做到这一点）。

我正在使用带有周围 CSS 圆圈的图标本身的文本。

唯一的问题是，在 Chrome 中，当我将鼠标悬停在链接或图标上时，文本阴影会出现在下方图标中的文本字符下方，尽管这设置为无（我需要字符本身的文本阴影。

我设置了一个 jsFiddle 示例来说明：http: [//jsfiddle.net/4Etbm/6/](http://jsfiddle.net/4Etbm/6/)

任何帮助将不胜感激或提出更好的方法建议。

我在 StackOverflow 上只看到过一个这样的例子，但解决方案并不完全符合我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:00:46.463

在文本周围环绕一个跨度可以解决问题[http://jsfiddle.net/4Etbm/9/](http://jsfiddle.net/4Etbm/9/)

```
<div>
    <a href="#" class="iconLinkQuestion"><span>Need help now?</span></a>
</div>​ 
```

你还需要改变

```
.iconLinkQuestion:hover {
    text-decoration: underline;
} 
```

到

```
.iconLinkQuestion:hover span {
    text-decoration: underline;
} 
```

# sql - ROW_NUMBER 错误

> ID：11537609
> 
> 赞同：1
> 
> 时间：2012-07-18T08:51:17.243
> 
> 标签：sql, sql-server-2008

```
SELECT [Column1] FROM VIEW1 WHERE ROW_NUMBER = 5; 
```

给出一个错误：

> 消息 207，级别 16，状态 1，第 2 行无效的列名称“ROW_NUMBER”。

关于为什么的任何建议？ROW_NUMBER 自动以粉红色着色，这意味着据我所知“关键字” - 那么为什么 Sql Server 认为它应该是一个列并说该列不存在？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:54:12.897

您不能`ROW_NUMBER`在这种情况下使用。`ROW_NUMBER`在这里可以看到在 WHERE 子句中使用的示例：

```
USE AdventureWorks2012;
GO
WITH OrderedOrders AS
(
    SELECT SalesOrderID, OrderDate,
    ROW_NUMBER() OVER (ORDER BY OrderDate) AS RowNumber
    FROM Sales.SalesOrderHeader 
) 
SELECT SalesOrderID, OrderDate, RowNumber  
FROM OrderedOrders 
WHERE RowNumber BETWEEN 50 AND 60; 
```

来源：http: [//msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T08:59:45.953

您处理查询的方式是错误的，因为

***ROW_NUMBER 返回结果集分区内行的序号，每个分区的第一行从 1 开始。***

你可以试试

```
Select 
from 
(
        Select row_number() over (partition by x order by x)SrNo,* from x
)A
where A.SrNo=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:58:21.907

你不能像那样使用 ROW_NUMBER()

```
SELECT * FROM 
(
    SELECT [Column1], ROW_NUMBER() OVER(ORDER By [Column1] ASC) As Row
    FROM VIEW1
) x
WHERE Row = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:36:14.443

你必须先定义`ROW_NUMBER`。试试这个...

```
SELECT [column1] FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY key ASC) AS rownumber,
    [column1]
  FROM <tablename>
) AS xyz
WHERE rownumber = 5 
```

例如：

```
SELECT EmpName FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY empId ASC) AS rownumber,
    EmpName
  FROM EmpMaster
) AS EmpTable
WHERE rownumber = 5 
```

您可以使用*View*而不是*Table*

# c++ - 函数接受一个参数并返回它

> ID：11537610
> 
> 赞同：1
> 
> 时间：2012-07-18T08:51:23.763
> 
> 标签：c++, functional-programming

有件事在我的脑海里萦绕了很久。只需考虑这个函数：

```
template<typename T>
T foo(const T& value)
{
    return value;
} 
```

它是任何给定值的最简单的函数包装器。但是，我一直想知道它是否有一个“标准名称”（许多人会认出，例如 map、filter、sqrt 等函数）。它们是需要使用这种功能的众所周知的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T08:57:51.443

原则上它是一个恒等函数，但在实践中它强制一个参数的副本。

所以，如果`T`有值语义，它仍然是一个真实的身份。否则，它是一个克隆功能。

一个完美的身份将是

```
template<typename T>
const T& identity(const T& value)
{
    return value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:53:24.117

这是一个身份功能。例如，当您必须将投影传递给其他函数并且不想要任何投影时，它很有用。不，不是非常有用，但这是您可以从基本上什么都不做的功能中获得的最好效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T08:55:05.440

如果不对函数内部的参数进行任何更改，我不确定它是否具有任何编程命名法。

您也不能说这是一个完整的身份，因为返回的对象不是同一个对象，因为您按值返回。

我会说这是一个**克隆功能**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:53:15.393

这是身份*功能的*[解释](http://en.wikipedia.org/wiki/Identity_function)

# c++ - 打印字符数组的地址

> ID：11537621
> 
> 赞同：4
> 
> 时间：2012-07-18T08:52:05.887
> 
> 标签：c++, char, cout, ostream

```
int *i = new int(1);
cout << i << endl; 
```

将打印整数的地址。

```
 char *c="cstring";
    cout << c << endl;
    cout << &(*c) << endl; 
```

都会打印“cstring”。我想这种行为可以简单地用`ostream& operator<< (ostream& out, const char* s );`IOstream 库中的实现来解释。

但是如果你真的想打印 c 引用的数据的地址怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:54:29.167

```
cout << reinterpret_cast<void*>(c) << endl; 
```

要不就

```
cout << (void*)c << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:56:06.163

尝试将其转换为`const void*`：

```
cout << static_cast<const void*>(c) << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:24:35.853

刚刚怎么样

```
cout << &c << endl; 
```

为我工作:)

# xpages - 本地化和 enableModifiedFlag

> ID：11537622
> 
> 赞同：0
> 
> 时间：2012-07-18T08:52:09.437
> 
> 标签：xpages

使用 enableModifiedFlag 时，您可以在 modifiedMessage 中设置自定义消息。但是，在提示中，其余文本是英文的：

您确定要离开此页面吗？并按 OK 继续，或按 Cancel 留在当前页面。

有没有办法翻译这个文本或让它遵循本地化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:55:43.733

无法确认这一点：在本地化的 xpages 应用程序中，我刚刚定义了属性 enableModifiedFlag = true 并在“modifiedMessage”中输入了一些固定字符串：

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    modifiedMessage="Wollen Sie wirklich speichern?"
    enableModifiedFlag="true"> 
```

这会自动在两个属性文件中为本地化“xpageName.properties”和“xpageName_en.properties”生成相应的条目，如下所示：

```
/xp\:view[1]/@modifiedMessage=Wollen Sie wirklich speichern? 
```

和

```
/xp\:view[1]/@modifiedMessage=[en| Wollen Sie wirklich speichern? ] 
```

（如您所见，我的源语言是 [de]，而 [en] 是辅助语言）。相应地设置应用程序属性（见屏幕截图）

![在此处输入图像描述](../Images/10823d386cbdecab9f58d18075f2f09c.png)

# ruby-on-rails - 配置 Rails 以观察用户注册

> ID：11537631
> 
> 赞同：0
> 
> 时间：2012-07-18T08:52:44.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionmailer, observer-pattern

这是我在 UserController 中的操作 do_registration

```
 def do_registration

    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        UserMailer.welcome_email(@user).deliver
        format.html { render action: "do_registration" }
      else
        format.html { render action: "registration" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end 
```

我想使用 UserObserver 而不是在操作中调用 ActionMailer 所以我在observers/user_observer.rb 中写了这些代码行：

```
class UserObserver < ActiveRecord::Observer
  observe User

  def after_save(user)
    UserMailer.welcome_email(@user).deliver
  end
end 
```

我加了

```
config.active_record.observers = :user_observer 
```

在我的 environment.rb 中，但是当我注册新用户时，没有发送邮件。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:35:07.230

您不必`observe User`在观察者中编写此行，因为您使用模型名称创建了它，默认情况下它会观察用户类。但是如果要明确提及它应该是这样`observe :user`的。

# objective-c - 导入协议的子类

> ID：11537637
> 
> 赞同：0
> 
> 时间：2012-07-18T08:53:05.367
> 
> 标签：objective-c, import, protocols, subclass

给出了以下类结构：

```
clprotocol.h
cla
cla1
cla2
cla3
clb
clb1
clb2
clb3

foo.h 
```

所有类都实现了 clprotocol。clxn 是 ob clx 的子类。

我想通知 foo.h 所有实现 clprotocol.h 的类的存在。直接的方法当然是导入 foo.h 中的所有标头。但尤其是对于大型类集群，这是一项非常乏味的任务。有没有更优雅的方法，也关于如果必须在其他类中导入这个集群的事实呢？

我觉得我在这里遗漏了一些基本原则，但我不能指望它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:32:17.650

将您的变量声明为`id<CLProtocol>`而不是`CLA*`或类似。如果您只关心它们是否符合协议，那就是您所需要的。

# python - 如何从键值对列表中删除值

> ID：11537642
> 
> 赞同：1
> 
> 时间：2012-07-18T08:53:20.477
> 
> 标签：python, bash, text, awk

我有一个包含多个 KV 对的文件。

输入：

```
$ cat input.txt
k1:v1 k2:v2 k3:v3
... 
```

我只对价值观感兴趣。键（名称）只是为了记住每个值的含义。本质上，我正在寻找`cut`键，以便我可以绘制值列。

输出：

```
$ ...
v1 v2 v3 
```

他们是可以帮助我实现这一目标的单行 bash 命令吗？

更新

* * *

这就是我目前的做法（看起来很难看）

```
>> cat input.txt | python -c "import sys; \
   lines = sys.stdin.readlines(); \
   values = [[i.split(':')[1] for i in item] for item in \
   [line.split() for line in lines]]; \
   import os; [os.system('echo %s'%v) for v in \
   ['\t'.join(value) for value in values]]" > output.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:12:19.860

你可以吗？

```
sed -r 's/\w+://g' yourfile 
```

测试：

```
kent$  echo "k1:v1 k2:v2 k3:v3"|sed -r 's/\w+://g'                                    
v1 v2 v3 
```

**更新** 好，如果您的密钥包含“-”等：见下文

```
kent$  echo "k1#-$%-^=:v1 k2:v2 k3:v3"|sed -r 's/[^ ]+://g'  
v1 v2 v3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:10:47.903

```
awk -v FS=':' -v RS=' ' -v ORS=' ' '{print $2}' foo.txt 
```

[http://www.gnu.org/software/gawk/manual/gawk.html#Field-Separators](http://www.gnu.org/software/gawk/manual/gawk.html#Field-Separators)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:49:25.953

我看到`sed`,`awk`和`python`, 所以这里很简单`bash`：

```
while IFS=' ' read -a kv ; do printf '%s ' "${kv[@]#*:}" ; done < input.txt 
```

只是为了更好的衡量，这里有一个`perl`版本：

```
perl -n -e 'print(join(" ",values%{{@{[split(/[:\s]/,$_)]}}})," ")' < input.txt 
```

但是，值的顺序会发生变化，因此它可能不是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:03:23.710

尝试这个

**输入.txt**

k1:v1 k2:v2 k3:v3

**代码**

```
 awk -F " " '{for( i =1 ; i<=NF ;i+=1) print $i}' Input.txt | cut -d ":" -f 2 | tr '\n' ' ' 
```

**输出**

v1 v2 v3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:08:58.817

使用**awk**的解决方案：

```
awk '{split($0,p," "); for(kv in p) {split(p[kv],a,":"); printf "%s ",a[2];} print ""}' foo.txt 
```

# objective-c - 将文件上传到服务器 - Objective C/Xcode/Mediawiki

> ID：11537648
> 
> 赞同：0
> 
> 时间：2012-07-18T08:53:48.793
> 
> 标签：objective-c, ios, xcode, ipad, mediawiki

我想上传一个`UIImage`到服务器。为此，我使用以下代码行::

```
- (void)imagePickerController:(UIImagePickerController *)picker 
    didFinishPickingImage:(UIImage *)image
              editingInfo:(NSDictionary *)editingInfo
{

imageView.image = image;    

NSData *pngData = UIImagePNGRepresentation(imageView.image);

NSString *imageFile = @"image.png";   
NSString *docDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *filePath = [docDir stringByAppendingPathComponent:imageFile]; 
NSString *dataIS=[NSString base64StringFromData:pngData length:[pngData length]];
[pngData writeToFile:filePath atomically:YES];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"image\"; filename=\"image.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:pngData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

[self.parentViewController dismissModalViewControllerAnimated:YES];

} 
```

但是，我在 gdb 中收到以下错误 ::

`Your request could not be processed. Request could not be handled`.

我也对正确使用感到困惑，`urlString`即我怀疑我是否正确使用它。

但是，如果我使用以下内容，则`urlString`可以将图像文件上传到服务器::

```
NSString *urlString = [NSString stringWithFormat:@"http://xxxx.com/mediawiki/api.php?action=upload&filename=image.png&url=%@&token=%@", url, token] ; 
```

参考`API`for `mediawiki`（http://www.mediawiki.org/wiki/API:Upload），有人可以帮我整理一下吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-27T10:38:18.753

我在上传多个图像和数据时遇到同样的问题，但我使用 AFNetworking 类并将多个图像上传到服务器。

```
NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"your URL"]];

AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
path = [[NSString alloc] initWithString:[URL absoluteString]];
vdict = @{
            // Your Parameter Pass
        };

[self checkmultiple:vdict];

-(void)checkmultiple:(NSDictionary*)vdict
{

AFHTTPRequestOperation *op = [manager POST:path parameters:vdict constructingBodyWithBlock:^(id<AFMultipartFormData> formData)
                              {
                                  for(i = 0;i<[appDelegate.gblarrydata count];i++)
                                  {
                                      NSString *paths = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]stringByAppendingPathComponent:@"New Folder"];
                                      // NSLog(@"%@",paths);
                                      NSString *documentsDirectory = paths;

                                      NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:[[appDelegate.gblarrydata objectAtIndex:i]valueForKey:@"nameimage"]];

                                      NSData *data1 =[[NSData alloc]initWithContentsOfFile:getImagePath];
                                      NSString *data2 =[[appDelegate.gblarrydata objectAtIndex:i] valueForKey:@"Note"];

                                      [formData appendPartWithFileData:data1 name:[NSString stringWithFormat:@"pimage%d",i+1] fileName:[NSString stringWithFormat:@"pimage%d.jpg",i+1] mimeType:@"image/jpeg"];

                                      if(![data2 isEqualToString:@""])
                                      {
                                          [formData appendPartWithFormData:[data2 dataUsingEncoding:NSUTF8StringEncoding]
                                                                      name:[NSString stringWithFormat:@"pnotes%d",i+1]];
                                      }

                                  }

                              }
                             success:^(AFHTTPRequestOperation *operation, id responseObject)
                              {
                                  NSLog(@"Upload success");

                                  NSString *returnString = [NSString stringWithFormat:@"%@",[responseObject JSONRepresentation]];
                                  NSLog(@"Reg Date:%@",returnString);

                              }

                             failure:^(AFHTTPRequestOperation *operation, NSError *error)
                              {
                                  NSLog(@"Error:%@",error);
                              }];
[op start];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T08:16:54.197

我有同样的问题。我使用 [ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)来上传文件，它工作正常。

**上传：**

**图像文件：**

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addPostValue:@"Ben" forKey:@"names"];
[request addPostValue:@"George" forKey:@"names"];
[request addFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photos"];
[request addData:imageData withFileName:@"george.jpg" andContentType:@"image/jpeg" forKey:@"photos"]; 
```

**同时使用其他数据：**

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

// Upload a file on disk
[request setFile:@"/Users/ben/Desktop/ben.jpg" withFileName:@"myphoto.jpg" andContentType:@"image/jpeg"
forKey:@"photo"];

// Upload an NSData instance
[request setData:imageData withFileName:@"myphoto.jpg" andContentType:@"image/jpeg" forKey:@"photo"]; 
```

**下载到所需路径：**

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDownloadDestinationPath:@"/Users/ben/Desktop/my_file.txt"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:08:58.573

如果要将图像发送到服务器，以编码形式发送数据，服务器可以处理图像的编码形式，他们将从编码中获取图像数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T01:06:47.623

// UIImage * img = [UIImage imageNamed:@"min.png"];

// NSData *imageData = UIImageJPEGRepresentation(img,0.2);

```
NSString *strUrl =[NSString stringWithFormat:@"%@/upload_file.php", [globalApp sharedUser].vg_dominio ];
//strUrl = @"http://192.168.1.100/mismedicinas/upload_file.php";

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:strUrl]];
request.HTTPMethod = @"POST";
request.timeoutInterval = 60;
request.HTTPShouldHandleCookies = false;

//[request setHTTPMethod:@"POST"];

NSString *boundary = @"----------SwIfTeRhTtPrEqUeStBoUnDaRy";

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];

[request setValue:contentType forHTTPHeaderField:@"Content-Type"];
//[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *body = [NSMutableData data];
NSMutableData *tempData = [NSMutableData data];

[tempData appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[tempData appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\"iphoneimage.xml\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[tempData appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

//[tempData appendData:[NSData dataWithData:imageData]];  ///IMAGEN
[tempData appendData:[NSData dataWithData:cData]];

[tempData appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData: tempData];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setValue: [NSString stringWithFormat:@"%d", body.length ] forHTTPHeaderField:@"Content-Length"];

request.HTTPBody =body;

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"finalizacion %@", returnString); 
```

# ssis - 为什么没有将所有记录从 CSV 复制到 SSIS 包中的 SQL 表

> ID：11537657
> 
> 赞同：2
> 
> 时间：2012-07-18T08:54:32.327
> 
> 标签：ssis

我正在尝试使用 SSIS 将数据从平面文件复制到 SQL 表。我有一个数据流任务，我创建了一个指向 csv 文件的平面文件源和一个指向我想要数据的表的 OLE DB 目标。我面临的问题是当我运行包时，我只得到 2621复制到 SQL 目标表的行，我在 csv 中有大约 1,70,000 条记录。不知道为什么会这样。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:27:14.847

这可能是很多事情。这就是我想到的：

1.  平面文件的连接字符串被变量表达式或包配置覆盖。检查`SSIS -> Package configurations`或`Expressions`连接管理器上的属性。
2.  平面文件连接管理器上的`DataRowsToSkip`属性设置为一个值。
3.  平面文件的元数据定义在连接管理器中配置不正确。`Format`查看, `Row delimiter`,等属性`Column delimiter`。使用预览功能查看输出。
4.  平面文件源上的错误输出设置为`Ignore failure`，这意味着 SSIS 无法处理的行（例如，由于数据类型不兼容）将被忽略而不会发出警告。

# c - sqlite3_exec 函数忽略 sql buildup 函数值

> ID：11537658
> 
> 赞同：0
> 
> 时间：2012-07-18T08:54:34.033
> 
> 标签：c

我得到了以下 sql_buildup_method... 代码有点脏，但事实并非如此

```
char *build_up_sql(char *inputName,char *inputMessage)
{
   char firstPartStatement[1064] ="INSERT INTO User (name, msg) VALUES (";
    char *endPartStatement =");";
    char *lightener = "'";  
    char *statement;

strcat(firstPartStatement,lightener);
strcat(firstPartStatement,inputName);
strcat(firstPartStatement,lightener);
strcat(firstPartStatement,",");
strcat(firstPartStatement,lightener);
strcat(firstPartStatement,inputMessage);
strcat(firstPartStatement,lightener);
strcat(firstPartStatement,endPartStatement);

statement = firstPartStatement; 

return statement;

}

void create_input(sqlite3 *handler,char *inputName,char *inputMessage)
{
    char *sql;

    sql = build_up_sql(inputName,inputMessage);
 // sql ="INSERT INTO User (name, msg) VALUES ('Susanne','hi all');";   
    printf("%s\n",sql);
    sqlite3_exec(handler,sql, NULL, NULL, NULL);
} 
```

printf 给出输出： INSERT INTO User (name, msg) VALUES ('Susanne','hi all'); 这完全没问题......但是 sqlite3_exec 忽略它并且没有生成新的数据库输入......如果我离开这条线**sql ="INSERT INTO User (name, msg) VALUES ('Susanne','hi all' );";** 在代码中 sqlite3_exec 工作正常....也将所有内容放在一个函数中也解决了问题，但这不应该是一种选择.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:17:26.603

这里的问题是您正在返回一个指向局部变量的指针，这是*未定义的行为*。返回时`build_up_sql`，堆栈上用于局部变量的空间被重用。

最好的解决方案可能是添加一个`build_up_sql`用于放入字符串的参数。例如：

```
char *build_up_sql(char *inputName, char *inputMessage, char *outputSql)
{
    const char firstPartStatement[] = "INSERT INTO User (name, msg) VALUES (";
    const char endPartStatement[] = ");";
    const char lightener[] = "'";

    strcpy(outputSql, firstPartStatement);
    strcat(outputSql,lightener);
    strcat(outputSql,inputName);
    strcat(outputSql,lightener);
    strcat(outputSql,",");
    strcat(outputSql,lightener);
    strcat(outputSql,inputMessage);
    strcat(outputSql,lightener);
    strcat(outputSql,endPartStatement);

    return outputSql;
}

void create_input(sqlite3 *handler, char *inputName, char *inputMessage)
{
    char sql[1024];

    char *sqlstr = build_up_sql(inputName, inputMessage, sql);

    printf("%s\n", sqlstr);
    sqlite3_exec(handler, sqlstr, NULL, NULL, NULL);
} 
```

# ios - 如何解释来自 atos 符号化命令的结果

> ID：11537660
> 
> 赞同：1
> 
> 时间：2012-07-18T08:54:42.547
> 
> 标签：ios, crash-reports, symbolicate

我正在使用 atos 命令来表示崩溃日志。

我有这个崩溃堆栈：

```
0   MyApp                               0x001c4389 MyApp + 1848201
1   MyApp                               0x001c49f1 MyApp + 1849841
2   libsystem_c.dylib                   0x33f1f7ed _sigtramp + 48
3   libsystem_c.dylib                   0x33f1520f pthread_kill + 54
4   libsystem_c.dylib                   0x33f0e29f abort + 94
5   MyApp                               0x00021843 MyApp + 133187
6   MyApp                               0x00005569 MyApp + 17769
7   MyApp                               0x00022b9b MyApp + 138139
8   MyApp                               0x0000637b MyApp + 21371 
```

让我们符号化第 6 行：

```
atos -arch armv7 -o MyApp.app/MyApp 0x00005569
=> -[MyAppCoreDataManager persistentStoreCoordinatorForUpdate] (in MyApp) (MyAppCoreDataManager.m:176) 
```

完美，但第 5 行：

```
atos -arch armv7 -o Popcarte.app/Popcarte 0x00021843
=> 0x00021843 (in MyApp) + 47 
```

我认为它引用了@synthesize，但我不确定，我想知道是哪一个。

有没有办法更多地了解这个结果？

# google-chrome - 我可以将 Watir webdriver 与 Chromium 一起使用吗？

> ID：11537661
> 
> 赞同：3
> 
> 时间：2012-07-18T08:54:44.247
> 
> 标签：google-chrome, watir, watir-webdriver, chromium, selenium-chromedriver

我只设法使用 Google Chrome 执行测试（使用 chromedriver）。

谁能举例说明如何开始使用 Chromium 执行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:11:40.170

确保您的 Chromium 二进制文件可以被定位或明确设置。

```
Selenium::WebDriver::Chrome.path = '/usr/bin/chromium'
driver = Selenium::WebDriver.for :chrome
browser = Watir::Browser.new driver 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:42:09.830

我认为这应该是可能的，你只需要提供通往 Chromium 的路径。您应该检查几页：

*   [http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)
*   [http://watirwebdriver.com/chrome/](http://watirwebdriver.com/chrome/)
*   [在 Chromium 浏览器中使用 Selenium](https://stackoverflow.com/questions/5731953/use-selenium-with-chromium-browser)

# android - 如何在活动中进行无限循环

> ID：11537665
> 
> 赞同：1
> 
> 时间：2012-07-18T08:55:09.783
> 
> 标签：android

当有人在做一些游戏时，他们可以这样做：`mainActivity`which extends`Activity`并且在这个主要活动中有一个方法，例如：

```
setContentView(BouncingBallView); 
```

`BouncingBallView`扩展`View`，我们有方法：`onDraw()` `invalidate()`这些方法用于更新，它们在所有帧中执行。

我的问题是我想要一些像“onDraw-invalidate”这样的方法，它们是更新的，但在类`Activity`中而不是在`View`.

我想知道是否有一些主循环，一直在执行的方法`update()`？我知道`Activity`里面有：`onCreate()`; `onStart()`; `onRestart()`; `onResume()`; `onPause()`; `onStop()`; 和`onDestroy()`，但我看不到更新？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:06:51.307

您想要定期更新吗？那么计时器可能是一种方法。在您的活动的 onStart 中创建一个计时器实例，并安排一个具有所需延迟的更新任务，如下所示：

```
public class MyActivity extends Activity {
  ...
  private Timer timer;
  private BouncingBallView ballView;

  ...

  @Override
  public void onResume() {
    timer = new Timer();
    // This timer task will be executed every 1 sec.
    timer.schedule(new TimerTask() {
      @Override
      public void run() {
        ballView.update();
      }
    }, 0, 1000);
  }

  ...

  @Override
  public void onSuspend() {
    // Suspend the updates when the activity is inactive.
    timer.cancel();
  }
} 
```

请注意，计时器任务在单独的线程中运行，并且在 Android 中，在与创建它们的线程不同的线程中修改 UI 元素可能会导致问题。如果您遇到这些问题，处理程序 (android.os.Handler) 会很有帮助，并且在 Honeycomb 中有更好的解决方案，但 Timer/Handler 组合在旧版本中效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:09:27.357

这是可以指导您完成游戏更新循环的最佳示例。

[Android 游戏编程 3\. 游戏循环和动画。](http://www.javacodegeeks.com/2011/07/android-game-development-game-loop.html)

这肯定会帮助你。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:58:58.253

您的主要问题是实现游戏循环。有很多方法可以做到这一点，您可以在一些教程或书籍中找到这些方法。其中一种方法是： http: [//obviam.net/index.php/a-very-basic-the-game-loop-for-android/](http://obviam.net/index.php/a-very-basic-the-game-loop-for-android/)

# python - 使用边界的 Python/Django mime 多部分电子邮件

> ID：11537670
> 
> 赞同：2
> 
> 时间：2012-07-18T08:55:32.887
> 
> 标签：python, django, email, multipart, boundary

在 Django（使用 python）中，如何构建如下所示的电子邮件：

我需要的是一封开头的电子邮件：

```
Content-Type: multipart/alternative;
boundary="=_5f8686714d769f9476ce778798b84ff4" 
```

边界是放置纯文本的地方：

```
--=_5f8686714d769f9476ce778798b84ff4
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

This e-mail is in HTML-format. Click the following link: 

 http://www.company.nl/enews/7
--=_5f8686714d769f9476ce778798b84ff4 
```

之后我需要一个相关的 Content-Tye：

```
Content-Type: multipart/related;
boundary="=_e49477d06c604958b9b2bc038628a26f" 
```

边界是放置html的地方

```
--=_e49477d06c604958b9b2bc038628a26f 
Content-Type: text/html; charset="ISO-8859-1" 
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.= w3.org/TR/html4/loose.dtd"> <html style=3D"height: 100%"> <head>/head> <body></body> </html>
--=_e49477d06c604958b9b2bc038628a26f 
```

最终它看起来像这样：

```
Received: (qmail 6116 invoked by uid 48); 16 Jul 2012 18:00:49 +0200
Date: 16 Jul 2012 18:00:49 +0200
To: my@email.nl
Subject: Something
MIME-Version: 1.0
From: Company <company@company.nl>

Content-Type: multipart/alternative;
    boundary="=_5f8686714d769f9476ce778798b84ff4"
Message-ID: <m79ghd.ezdd6g@company.nl>

--=_5f8686714d769f9476ce778798b84ff4
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

This e-mail is in HTML-format. Click the following link: 

 http://www.company.nl/enews/7
--=_5f8686714d769f9476ce778798b84ff4

Content-Type: multipart/related;
    boundary="=_e49477d06c604958b9b2bc038628a26f"

--=_e49477d06c604958b9b2bc038628a26f
Content-Type: text/html; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.=
w3.org/TR/html4/loose.dtd">
<html style=3D"height: 100%">
<head>/head>
<body></body>
</html>
--=_e49477d06c604958b9b2bc038628a26f 
```

我用 Django 的 EmailMessage(Alternatives)、python MimeMultipart 尝试了这个，但我无法按照确切的顺序得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:40:53.983

如果您尝试发送电子邮件的纯文本和 HTML 版本（纯文本版本仅指 URL），[EmailMultiAlternatives](https://docs.djangoproject.com/en/1.4/topics/email/#sending-alternative-content-types)类似乎对我来说很好用。

文档中示例的略微修改版本：

```
from django.core.mail import EmailMultiAlternatives

subject, from_email, to = 'hello', 'from@example.com', 'to@example.com'
text_content = 'This e-mail is in HTML-format. Click the following link:\n\nhttp://www.company.nl/enews/7'
html_content = '<p>This is an <strong>HTML-format</strong> version.</p>'
msg = EmailMultiAlternatives(subject, text_content, from_email, [to])
msg.attach_alternative(html_content, "text/html")
msg.send() 
```

此电子邮件中的结果（使用[控制台后端](https://docs.djangoproject.com/en/1.4/topics/email/#console-backend)）：

```
Content-Type: multipart/alternative;
 boundary="===============2514609180855632526=="
MIME-Version: 1.0
Subject: hello
From: from@example.com
To: to@example.com
Date: Wed, 18 Jul 2012 10:31:22 -0000
Message-ID: <20120718103122.11355.59803@localhost6.localdomain6>

--===============2514609180855632526==
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit

This e-mail is in HTML-format. Click the following link:

http://www.company.nl/enews/7
--===============2514609180855632526==
Content-Type: text/html; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit

<p>This is an <strong>HTML-format</strong> version.</p>
--===============2514609180855632526==-- 
```

虽然它没有`multipart/related`Content-Type，但它确实适用于纯文本（显示链接）和 HTML 客户端（显示 HTML 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:07:34.087

直接使用[email](http://docs.python.org/library/email.html#module-email)和[smtplib](http://docs.python.org/library/smtplib.html)模块。

Django 内置的电子邮件处理方法非常有限。

# iphone - 当我缩小时，MKMapView 会自动放大到当前位置

> ID：11537671
> 
> 赞同：0
> 
> 时间：2012-07-18T08:55:32.350
> 
> 标签：iphone, objective-c, ios, xcode

我已经创建`MKMapView`并用于`UIBarButtonItem`显示`zoom out`所有`regions`. 它在 iPhone 模拟器上运行良好，但是当我在设备上尝试时，它`zoom`会在 3-5 秒或有时 10 秒后恢复`current location`。我不知道这里出了什么问题。感谢您的任何建议。

以下是我的代码

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import "MapListViewController.h"

@class MCLocation;

@interface MapViewController : UIViewController <MKMapViewDelegate, CLLocationManagerDelegate, MapListViewControllerDelegate>
{
    CLLocationManager *locationManager;
    NSArray *locations;

    __weak IBOutlet MKMapView *worldView;
    __weak IBOutlet UISegmentedControl *mapTypeControl;
}
@property (nonatomic, strong) MCLocation *item;
@property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext;

- (IBAction)changeMapType:(id)sender;
- (void)zoomLocation:(CLLocationCoordinate2D)i;

@end 
```

**MapViewController.m**

```
#import "MapViewController.h"
#import "MCLocation.h"
#import "MCLocationStore.h"
#import "MapDetailViewController.h"

#define METERS_PER_MILE 1609.344

@interface MapViewController ()

@end

@implementation MapViewController
@synthesize item;
@synthesize fetchedResultsController;
@synthesize managedObjectContext;

- (id)init 
{
    self = [super initWithNibName:@"MapViewController" bundle:nil];
    if (self) {
        [[self navigationItem] setTitle:@"Map"];

        UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:nil];
        [[self navigationItem] setBackBarButtonItem:backButton];

        UIImage *userImage = [UIImage imageNamed:@"User.png"];
        UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithImage:userImage style:UIBarButtonItemStyleBordered target:self action:@selector(showUser)];

        UIImage *locationImage = [UIImage imageNamed:@"Pin.png"];
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithImage:locationImage style:UIBarButtonItemStyleBordered target:self action:@selector(showLocation)];

        [[self navigationItem] setLeftBarButtonItems:leftButton];
        [[self navigationItem] setRightBarButtonItems:rightButton];
    }
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    return [self init];
}

- (MKCoordinateRegion)regionForAnnotations:(NSArray *)annotations
{
MKCoordinateRegion region;

if ([annotations count] == 0) {
    region = MKCoordinateRegionMakeWithDistance(worldView.userLocation.coordinate, 1000, 1000);

} else if ([annotations count] == 1) {
    id <MKAnnotation> annotation = [annotations lastObject];
    region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 1000, 1000);

} else {
    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for (id <MKAnnotation> annotation in annotations)
    {
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    }

    MKCoordinateSpan span;
    span.latitudeDelta = 2.0;
    span.longitudeDelta = 0.5;

    region.span = span;
    region.center = worldView.userLocation.coordinate;

return [worldView regionThatFits:region];
}

- (IBAction)showUser 
{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(worldView.userLocation.coordinate, 250, 250);
    [worldView setRegion:[worldView regionThatFits:region] animated:YES];
}

- (IBAction)showLocation 
{
    MKCoordinateRegion region = [self regionForAnnotations:locations];
    [worldView setRegion:region animated:YES];
}

- (void)updateLocations 
{
    if (locations != nil) {
        [worldView removeAnnotations:locations];
    }

    locations = [self.fetchedResultsController fetchedObjects];
    [worldView addAnnotations:locations];
}

- (void)zoomLocation:(CLLocationCoordinate2D)i 
{
    CLLocationCoordinate2D zoomLocation = i;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);

    MKCoordinateRegion adjustedRegion = [worldView regionThatFits:viewRegion];

    [worldView setRegion:adjustedRegion animated:YES];
}

- (void)performFetch 
{
    NSError *error;
    if (![self.fetchedResultsController performFetch:&error]) {
        FATAL_CORE_DATA_ERROR(error);
        return;
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [worldView setShowsUserLocation:YES];

    [self performFetch];
    [self loadMapTypePref];
    [self updateLocations];

    // If we have locations, then show them on the map. If there are no
// locations, then let the map view figure out how to center on the
// user's position. It will usually do a pretty good job.
    if ([locations count] > 0) {
        [self showLocation];
    }

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        [mapTypeControl setHidden:YES];

        CLLocationCoordinate2D coord = [item coordinate];
        [worldView setCenterCoordinate:coord animated:NO];
        [self zoomLocation:coord];
    }
}

- (void)viewDidUnload
{
    worldView = nil;
    mapTypeControl = nil;
    locations = nil;
    fetchedResultsController = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc 
{
    [locationManager setDelegate:nil];
}

#pragma mark - MKMapViewDelegate

- (void)mapView:(MKMapView *)mapView 
didUpdateUserLocation:(MKUserLocation *)userLocation 
{
    CLLocationCoordinate2D loc = [userLocation coordinate];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(loc, 250, 250);
    [worldView setRegion:region animated:YES];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView 
        viewForAnnotation:(id<MKAnnotation>)annotation 
{   
    static NSString *LocationIdentifier = @"Location";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[worldView dequeueReusableAnnotationViewWithIdentifier:LocationIdentifier];

    if ([annotation isKindOfClass:[MCLocation class]]) {
        if (!annotationView) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:LocationIdentifier];
        } 
        [annotationView setAnnotation:annotation];
        [annotationView setPinColor:MKPinAnnotationColorRed];
        [annotationView setEnabled:YES];
        [annotationView setAnimatesDrop:YES];
        [annotationView setCanShowCallout:YES];
        [annotationView setCalloutOffset:CGPointMake(-5, 5)];
        [annotationView setUserInteractionEnabled:YES];

        UIButton *rightButton = nil;
        UIImage *logoImage = [UIImage imageNamed:@"monkcup-map-pin.png.png"];
        UIImageView *leftButton = [[UIImageView alloc] initWithImage:logoImage];

        rightButton = [UIButton buttonWithType:UIButtonTypeInfoLight];

        [annotationView setRightCalloutAccessoryView:rightButton];
        [annotationView setLeftCalloutAccessoryView:leftButton];

        return annotationView;
    } else {
        [[worldView userLocation] setTitle:@"You're here"];
    }

    return nil;
}

- (void)mapView:(MKMapView *)mapView 
 annotationView:(MKAnnotationView *)view 
calloutAccessoryControlTapped:(UIControl *)control 
{
    // Call out code
}

#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    NSTimeInterval t = [[newLocation timestamp] timeIntervalSinceNow];
    if (t < -180) {
        return;
    }
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
{
    //
}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController 
{
    if (fetchedResultsController) {
    return fetchedResultsController;
    }

    // Create and configure a fetch request with the Book entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    MCLocationStore *ls = [MCLocationStore sharedStore];
    self.managedObjectContext = ls.context;

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MCLocation" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Create the sort descriptors array.
    NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"storeName" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sd, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    // Create and initialize the fetch results controller.
    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"MapView"];

    return fetchedResultsController;
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:45:09.847

您已经实现了地图视图的`didUpdateUserLocation`委托方法，并在其中将地图缩放到用户的位置。

只要设备获得位置更新，就会调用该委托方法。

因此，在您缩放或平移之后，如果有另一个位置更新，则调用委托方法并将其缩放回用户位置。

一种选择是保留一个布尔值 ivar（比如），并且在该方法中，如果标志是`didZoomToUserLocation`，您应该只缩放（即 call ） 。调用后在该方法中设置标志。`setRegion``NO``YES``setRegion`

在 iOS 5 及更高版本中，您还可以尝试[将 设置`userTrackingMode`](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205-CH3-SW62)为`MKUserTrackingModeFollow`而不是手动缩放。我认为该模式为用户提供了一些自由平移，同时仍跟随用户。

# javascript - 使用 JavaScript 更改 iframe src

> ID：11537677
> 
> 赞同：0
> 
> 时间：2012-07-18T08:55:50.430
> 
> 标签：javascript, iframe

我有三个不同的页面；`player_lo.html`,`player_hi.html`和`player_med.html`.

这三个页面是不同质量的流播放器流页面。我想使用 JavaScript 来更改`iframe`'s 的来源。

我有这个脚本，但它不起作用：

```
<a href="/player/player_lo.html" class="button grey" onclick="$('#player').attr('src', 'player_lo.html'); $(this).parent().find('a').removeClass('red'); $(this).parent().find('a').addClass('grey'); $(this).addClass('red').removeClass('grey'); return false;">Low Quality</a>
<a href="/player/player_med.html" class="button red" onclick="$('#player').attr('src', 'player_med.html'); $(this).parent().find('a').removeClass('red'); $(this).parent().find('a').addClass('grey'); $(this).addClass('red').removeClass('grey'); return false;">medium quality</a>
<a href="/player/player_hi.html" class="button grey" onclick="$('#player').attr('src', 'player_hi.html'); $(this).parent().find('a').removeClass('red'); $(this).parent().find('a').addClass('grey'); $(this).addClass('red').removeClass('grey'); return false;">high quality/a> 
```

有关我正在尝试做的示例，请查看以下内容：[http](http://slon.ru/tvrain/)
: //slon.ru/tvrain/ 当您单击Низкое качество - 这是另一个框架，如果是下一个，另一个等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:52:52.080

您在`href`链接中使用绝对路径（例如`"/player/player_lo.html"`），但在 JavaScript 中使用相对路径（例如`'player_lo.html'`）。这可能是你的问题。

*   尝试在您的 JavaScript 中使用相同的（绝对）路径。
*   确保页面确实存在。
*   密切注意浏览器的错误控制台，看看出了什么问题。

您可能会发现有用的其他提示：

不要使用名为**red**和**gray**的两个类（它们是互斥的类，意味着一个按钮不能同时是两个类），而是尝试使用一个描述差异的类，例如**active**。然后，使用 CSS 将按钮的样式设置为默认为灰色，或者当它们具有 class 时为红色`active`。另一个优点是颜色没有在类名中编码（例如，您可以在将来将活动颜色更改为蓝色或其他颜色）。

此外，不要使用 inline`onclick`属性，而是尝试将事件处理程序绑定到[JavaScript 本身](http://api.jquery.com/click/)`<a>`的标签。这样，您可以轻松地使用现有的，而且您可以重用使单击的按钮处于活动状态所需的代码。`<a>``href`

HTML：

```
<a href="/player/player_lo.html" class="button">Low Quality</a>
<a href="/player/player_med.html" class="button">medium quality</a>
<a href="/player/player_hi.html" class="button">high quality/a> 
```

JavaScript：

```
$('.button').click(function(event) {
    var button = $(this);
    $('#player').attr('src', button.attr('href'));
    makeActive(button);
    return false;
});

function makeActive(button) {
    $('.button').removeClass('active');
    button.addClass('active');
} 
```

CSS：

```
.button {
    color: grey;
}
.button.active {
    color: red;
} 
```

文档：

*   [jQuery .click()](http://api.jquery.com/click/)

# java - 使用 java 类进行 JSP 验证

> ID：11537679
> 
> 赞同：0
> 
> 时间：2012-07-18T08:55:54.387
> 
> 标签：java, validation, jsp, servlets

如何通过 java 类 ( servlet ) 验证 jsp 页面并根据结果向前或返回错误消息？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:59:31.707

*   将表单从 jsp 发布到 setvlet
*   在`doPost()`servlet中，接收数据
*   对接收到的数据进行验证

如果验证正确，有条件地将请求转发到成功页面，或者在验证失败的情况下，在请求属性中设置错误消息并再次将请求转发到 FORM 页面

[**例如**](https://stackoverflow.com/tags/servlets/info)

```
// Prepare messages.
Map<String, String> messages = new HashMap<String, String>();
request.setAttribute("messages", messages);

// Get and validate name.
String name = request.getParameter("name");
if (name == null || name.trim().isEmpty()) {
    messages.put("name", "Please enter name");
} else if (!name.matches("\\p{Alnum}+")) {
    messages.put("name", "Please enter alphanumeric characters only");
}

// Get and validate age.
String age = request.getParameter("age");
if (age == null || age.trim().isEmpty()) {
    messages.put("age", "Please enter age");
} else if (!age.matches("\\d+")) {
    messages.put("age", "Please enter digits only");
}

// No validation errors? Do the business job!
if (messages.isEmpty()) {
    messages.put("success", String.format("Hello, your name is %s and your age is %s!", name, age));
}

request.getRequestDispatcher("/WEB-INF/hello.jsp").forward(request, response); 
```

[查看详细信息](https://stackoverflow.com/tags/servlets/info)

# javascript - 如何将假服务器从诗浓转换为茉莉花。

> ID：11537681
> 
> 赞同：1
> 
> 时间：2012-07-18T08:56:00.820
> 
> 标签：javascript, jasmine, sinon

我找到了一个如何使用 Sinon 创建假服务器的示例。
这是代码（1），（2）。

只用茉莉花就可以做同样的事情吗？
如果是。我应该如何重写代码 (1) 和 (2) ？

* * *

(1)

```
 beforeEach(function () {
            this.server = sinon.fakeServer.create();
            this.server.respondWith(
                'GET',
                Routing.generate('api_get_url') + '/' + this.model.get('id'),
                JSON.stringify(this.fixtureResponse)
            );
        }); 
```

* * *

(2)

```
 it('should the response not change', function() {
            this.model.fetch();
            this.server.respond();
            expect(this.fixtureResponse).toEqual(this.model.attributes);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:04:11.880

取决于您的代码如何访问服务器，但如果它使用 jQuery`$.ajax`或`$.get`（或类似的集中式）Backbone 的方式，您可以将其存根并返回虚假响应。因此，在 CoffeeScript 中，#1 大致如下所示：

```
spyOn($,'get').andCallFake (options) =>
  if options.url == Routing.generate('api_get_url') + '/' + @model.get('id')
    options.success(JSON.stringify @fixtureResponse) 
```

另请参阅：[使用 Backbone 防止 Jasmine 和 Sinon 的 AJAX 调用](https://stackoverflow.com/questions/11550926/preventing-ajax-call-with-jasmine-and-sinon-using-backbone)

# magento - Magento 1.7-注册后新添加字段的值未显示在后端

> ID：11537690
> 
> 赞同：1
> 
> 时间：2012-07-18T08:56:21.717
> 
> 标签：magento

我在前端和后端都添加了一个名为“Association”的字段。但是，用户完成注册后，数据并没有显示在后端的客户->管理客户中。

“关联”也添加到表“eav_attribute”中。如何使值显示在后端？提前致谢！

# java - 检票口附加奇怪的数字

> ID：11537696
> 
> 赞同：3
> 
> 时间：2012-07-18T08:56:41.757
> 
> 标签：java, wicket, wicket-1.5

我发现 Wicket 1.5.x 存在一个奇怪的问题。突然之间，wicket 开始在每个看起来像 mydomain.com/home?1 的 url 上附加一个数字。对于我单击的每个可书签链接，检票口都会向浏览器发送一个重定向，增加该数字。尝试清理 url 并调用 mydomain.com/home 时也会发生同样的情况，我最终会得到另一个重定向和增加的数量。

更糟糕的是，在 Google App Engine 上，单击链接时的版本号会增加两倍，这似乎也会导致提交表单时出现问题，而这些表单只是......好吧......什么都没有！？

我尝试使用 setVersioned(false)/true 和 setStatelessHint(false)/true 没有任何结果。那可能是什么，如何摆脱它以及它如何影响我的应用程序无法在 GAE 上运行？

非常感谢亚历克斯

编辑：

看起来 wicket 总是在增加我的页面的版本，因为我的基本页面是有状态的（如果模型中有用户名，则显示用户名）。但是网站上没有任何变化但是点击我的书签链接到我的主页会随着每次点击增加它的页面ID，所以如果用户在主页链接上点击10次，他的历史就会被*完全相同*页面的10个条目污染，因为没有任何变化..这根本没有任何意义，所以我很好奇如何在不失去有状态的情况下解决这个问题！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:30:53.983

数字代表页面的版本。它在页面有状态时出现（因此服务器必须跟踪其状态）。

只需要设置无状态提示就可以使页面无状态。您必须避免在服务器端保持状态的任何组件，并使用无状态替代方案（`StatelessForm`代替`Form`，`StatelessLink`代替`Link`）。

我用一个无状态页面的例子回答了这个问题：[用 Wicket 制作一个主要是无状态的 Web 应用程序很难吗？](https://stackoverflow.com/questions/3431326/is-it-difficult-to-make-a-mainly-stateless-web-application-with-wicket)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-07T18:17:40.493

有一张 Jira 票证：[setVersioned(false) 应该强制](https://issues.apache.org/jira/browse/WICKET-4087)使用有关此问题的单个页面版本。该问题也在[邮件列表中](http://apache-wicket.1842946.n4.nabble.com/Stateful-versioned-bookmarkable-td4661990.html)进行了讨论。预期的复杂性：[提交非版本化页面时页面重新加载](https://issues.apache.org/jira/browse/WICKET-4087)

# javascript - javascript（原型）如果元素没有属性

> ID：11537704
> 
> 赞同：0
> 
> 时间：2012-07-18T08:57:23.457
> 
> 标签：javascript, prototypejs

在原型中，我有这个运行良好的“if”语句：

```
if(parentForm.hasAttribute('action')){
 console.log('hello world')
} 
```

但是，如何将其转换为“如果 parentForm 没有属性操作”语句？

非常感谢，阿迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:58:15.453

[使用逻辑非运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators#Logical_NOT_%28!%29)简单地否定条件；

```
if(!parentForm.hasAttribute('action')){
 console.log('hello world')
} 
```

# image - 无法在 HTTPS 中的 JSP 中显示 Blob 图像

> ID：11537706
> 
> 赞同：0
> 
> 时间：2012-07-18T08:57:42.610
> 
> 标签：image, jsp, https, blob

我正在尝试从数据库中检索一个 blob 并在 jsp 中显示它这是代码：

```
response.setContentType("image/bmp");
con = dbMon.connect(Con_id);
stmt = con.createStatement(); 
rs = stmt.executeQuery(sql);   
while (rs != null && rs.next()) {
  out.clear(); 
  OutputStream os = response.getOutputStream(); 
  os.write(rs.getBytes("IMAGE"));  
  out.flush(); 
  dbMon.close(con);
} 
```

代码在我们使用 http 的 uat 环境中运行良好，但在使用 HTTPS 的生产环境中运行失败安全交付？此网页包含不会使用安全 HTTPS 连接交付的内容，这可能会危及整个网页的安全性。”

1.  如果我选择 Yes ，图像将不会显示。
2.  如果我选择否，只会显示一个糟糕的图像标志（红十字）有人知道吗？请帮忙谢谢

# jquery - 如何获取元素中的文本值

> ID：11537708
> 
> 赞同：1
> 
> 时间：2012-07-18T08:57:45.057
> 
> 标签：jquery, html

我的html是：

```
<div>
   Some text
   <span>label text</span>
</div> 
```

查询：

```
?? 
```

我希望输出打印为 -

```
"Some text" 
```

当我这样做时`$("div").text()`，我得到`Some textLabel text`
，当我这样做时`$("div").html()`，我得到`Some text<span>Label text</span>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:01:30.863

试试这个请：

**工作演示** [http://jsfiddle.net/f8Vff/](http://jsfiddle.net/f8VFf/)你也可以寻找`innerHTMl`和`outterHTML`

```
jQuery.fn.justtext = function() {

    return $(this).clone()
            .children()
            .remove()
            .end()
            .text();

};
alert($('div').justtext());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:04:04.050

干得好。;)

```
var tmp = $('div').clone();
tmp.children().remove();

alert(tmp.text()); 
```

预览 - [http://jsfiddle.net/Z3qaN/](http://jsfiddle.net/Z3qaN/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:05:42.083

这可以工作：

```
var txt = $('div').contents().filter(function() {
    return this.nodeType == 3;
});

alert(txt.text()); 
```

# c# - 从多个不同的列表创建一个通用列表

> ID：11537714
> 
> 赞同：0
> 
> 时间：2012-07-18T08:57:59.663
> 
> 标签：c#, wcf, generics

我正在编写一个 Silverlight 和 WCF 项目。

我使用 Silverlight 中的实体框架从数据库中获取数据，我有多个使用 EF 的页面。

现在，我有 100 多种类型的实体类，因此有多种已知的列表类型。

在我的 WCF 界面中，我想创建一个通用函数，我可以在其中接受所有这些列表类型作为一个通用参数。

所以我的 WCF 函数应该是

```
public string TestBadal(List<Object> list)
    {
        return "test";

    } 
```

我的问题是，如何将所有已知列表转换为 List。我对此相当陌生，因此将不胜感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:41:51.120

你可以使用 T

```
public static List<T> o<T>(List<T> a)
        {
             return a = new List<T>();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:57:58.190

正如[Sophex](https://stackoverflow.com/a/11538530/659190)所说，您可以编写一个通用函数来处理 a[`List<>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)或更好[`IList<>`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)的任何东西。

所以你的例子会变成，

```
public string TestBadal<T>(IList<T> list)
{
    return "test";
} 
```

这是非常通用的，并且几乎不需要并且暗示关于`T`. 这对于您想要执行的处理可能已经足够了，但是您不会说。

通常，您应该将方法签名视为调用者必须对函数做出的承诺。您应该将承诺限制在您的功能完成其工作所需的范围内。这样，promise 更容易实现，并且您的函数可以被更多地重用，而调用者的承诺更少。

就目前而言，您的函数实际上并不需要参数，最好将其定义为`string const`但是说，您要做的就是枚举可以使用的项目，

```
public string TestBadal<T>(IEnumerable<T> entities)
{
    foreach(T entity in entities)
    {
        ...
    }
} 
```

如果您的处理与您可以执行的数据源的[EF](http://msdn.microsoft.com/en-us/library/bb341748.aspx)特性特别相关，

```
public string TestBadal<TEntity>(EntitySet<TEntity> entities)
    where TEntity : class
{
    ...
} 
```

如果您需要了解列表中的类型，那么您有两个明智的选择。要么您需要类型来实现某个接口，这本质上使您的函数非泛型，并且与 EF 结合使用可能会很尴尬。

```
public string TestBadal(IEnumerable<IDefinedType> definedTypeInstances)
{
    foreach(IDefinedType instance in definedTypeInstances)
    {
       var x = instance.SomeDefinedProperty;
    }
} 
```

或者，您可以将函数的非通用部分作为[类型化委托](http://msdn.microsoft.com/en-us/library/bb549151.aspx)参数，保持函数通用，可能是这样的。

```
public string TestBadal<T>(
        IList<T> list,
        Func<T, string> stringSelector)
{
    var result = new StringBuilder();

    for(var i = 0; i < list.Count; i++)
    {
        result.AppendLine(stringSelector(list[i])
    }

    return result.ToString();
} 
```

您可以使用类似这样的 lambda 表达式调用此函数，

```
var result = TestBadal(entities, e => e.SomeStringProperty); 
```

我希望这个答案既能给你一些想法，又能说明我的观点，即正确的答案取决于你希望你的函数实现什么。

# blackberry - 调用drawtext（）时如何自定义换行符？

> ID：11537716
> 
> 赞同：0
> 
> 时间：2012-07-18T08:58:06.670
> 
> 标签：blackberry, newline, drawtext

这是一个列表字段。

```
public class Custom_ListField extends ListField {
private String[] title, category, date, imagepath;
private int[] newsid, catsid;
private List_News newslist;
private Bitmap imagebitmap[], localimage = Bitmap
        .getBitmapResource("image_base.png");
private BrowserField webpage;
private Custom_BrowserFieldListener listener;
private boolean islatest;

private Vector content = null;
private ListCallback callback = null;

private int currentPosition = 0;

public Custom_ListField(Vector content, boolean islatest) {
    this.content = content;
    this.islatest = islatest;
    newsid = new int[content.size()];
    title = new String[content.size()];
    category = new String[content.size()];
    date = new String[content.size()];
    imagepath = new String[content.size()];
    catsid = new int[content.size()];
    imagebitmap = new Bitmap[content.size()];

    for (int i = 0; i < content.size(); i++) {
        newslist = (List_News) content.elementAt(i);
        newsid[i] = newslist.getID();
        title[i] = newslist.getNtitle();
        category[i] = newslist.getNewCatName();
        date[i] = newslist.getNArticalD();
        imagepath[i] = newslist.getImagePath();

        if (!imagepath[i].toString().equals("no picture")) {
            imagebitmap[i] = Util_ImageLoader.loadImage(imagepath[i]);
        } else {
            imagebitmap[i] = localimage;
        }
        catsid[i] = newslist.getCatID();
    }

    initCallbackListening();
    this.setRowHeight(localimage.getHeight() + 10);
}

private void initCallbackListening() {
    callback = new ListCallback();
    this.setCallback(callback);
}

private class ListCallback implements ListFieldCallback {

    public ListCallback() {
        setBackground(Config_GlobalFunction
                .loadbackground("background.png"));
    }

    public void drawListRow(ListField listField, Graphics graphics,
            int index, int y, int width) {
        currentPosition = index;
        graphics.drawBitmap(
                Display.getWidth() - imagebitmap[index].getWidth() - 5,
                y + 3, imagebitmap[index].getWidth(),
                imagebitmap[index].getHeight(), imagebitmap[index], 0, 0);
        graphics.setColor(Color.WHITE);
        graphics.drawRect(0, y, width, imagebitmap[index].getHeight() + 10);

        graphics.setColor(Color.BLACK);
        graphics.setFont(Font.getDefault().derive(Font.BOLD, 20));
        graphics.drawText(title[index], 5, y + 3, 0, Display.getWidth()
                - imagebitmap[index].getWidth() - 10);

        graphics.setColor(Color.GRAY);
        graphics.setFont(Font.getDefault().derive(Font.BOLD, 15));
        graphics.drawText(date[index], 5, y + 6
                + Font.getDefault().getHeight() + 3);

        if (islatest) {
            graphics.setColor(Color.RED);
            graphics.setFont(Font.getDefault().derive(Font.BOLD, 15));
            graphics.drawText(category[index], Font.getDefault()
                    .getAdvance(date[index]) + 3, y + 6
                    + Font.getDefault().getHeight() + 3);
        }
    }

    public Object get(ListField listField, int index) {
        return content.elementAt(index);
    }

    public int getPreferredWidth(ListField listField) {
        return Display.getWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        return content.indexOf(prefix, start);
    }
}

public int getCurrentPosition() {
    return currentPosition;
}

protected boolean navigationClick(int status, int time) {
    int index = getCurrentPosition();
    if (catsid[index] == 9) {
        if (Config_GlobalFunction.isConnected()) {
            webpage = new BrowserField();
            listener = new Custom_BrowserFieldListener();
            webpage.addListener(listener);

            MainScreen aboutus = new Menu_Aboutus();
            aboutus.add(webpage);
            Main.getUiApplication().pushScreen(aboutus);

            webpage.requestContent("http://www.orientaldaily.com.my/index.php?option=com_k2&view=item&id="
                    + newsid[index] + ":&Itemid=223");
        } else
            Config_GlobalFunction.Message(Config_GlobalFunction.nowifi, 1);
    } else
        Main.getUiApplication().pushScreen(
                new Main_NewsDetail(newsid[index]));
    return true;
}
} 
```

请看

```
graphics.setColor(Color.BLACK);
graphics.setFont(Font.getDefault().derive(Font.BOLD, 20));
graphics.drawText(title[index], 5, y + 3, 0, Display.getWidth()
                - imagebitmap[index].getWidth() - 10); 
```

这只会绘制一行文本。我做了研究，发现没有内置函数，必须自定义一个函数使文本自动下一行。

像这样的功能

```
private int numberoflines(int availablespace){
    ...
    return numberlines
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:39:04.440

Rupak 显示的链接很好，尽管其中一个引用了通用 Java 问题（并提出了一个需要为 BlackBerry 更改的 Swing 结果），而另一个引用了外部（非堆栈溢出）链接。

如果您想要另一个选项，并且不希望算法找出在**哪里**进行换行符，您可以使用它。此代码假定您将 '\n' 字符放入字符串中，您希望将文本拆分为多行。您可能会将此代码放入`paint()`方法中：

```
 // store original color, to reset it at the end
     int oldColor = graphics.getColor();

     graphics.setColor(Color.BLACK);
     graphics.setFont(_fieldFont);
     int endOfLine = _text.indexOf('\n'); 
     if (endOfLine < 0) {
        graphics.drawText(_text, _padding, _top);
     } else {
        // this is a multi-line label
        int top = _top;
        int index = 0;
        int textLength = _text.length();
        while (index < textLength) {
           // draw one line at a time
           graphics.drawText(_text,
                 index,             // offset into _text
                 endOfLine - index, // number of chars to draw
                 _padding,          // x
                 top,               // y
                 (int) (DrawStyle.HCENTER | DrawStyle.TOP | Field.USE_ALL_WIDTH), // style flags
                 _fieldWidth - 2 * _padding);                                     // width available

           index = endOfLine + 1;
           endOfLine = _text.indexOf('\n', index); 
           if (endOfLine < 0) {
               endOfLine = textLength;
           }
           top += _fieldFont.getHeight() + _top;  // top padding is set equal to spacing between lines
        }
     }

     graphics.setColor(oldColor); 
```

在这里，您将初始化我在其中使用的一些变量。根据您发布的代码，我**认为**这些是正确的，但您需要仔细检查：

```
 String _text = title[index];   // text to draw
     int _padding = 5;              // left and right side padding around text
     int _top = y + 3;              // the y coordinate of the top of the text

     Font _fieldFont = Font.getDefault().derive(Font.BOLD, 20);

     // the total width reserved for the text, which includes room for _padding:
     int _fieldWidth = Display.getWidth() - imagebitmap[index].getWidth(); 
```

# c# - 如何在 Javascript 中在运行时确定页面 URL？

> ID：11537718
> 
> 赞同：0
> 
> 时间：2012-07-18T08:58:18.400
> 
> 标签：c#, javascript, url, web

我想确定 Javascript 中页面的 URL。这可能吗？我怎样才能做到这一点？非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:00:06.687

看[`window.location`对象](https://developer.mozilla.org/en/DOM/window.location)。

根据您是否需要哈希、查询字符串等，有许多不同的属性可用。

例如，在此页面上；

```
window.location.hash: "#11537761";
window.location.host: "stackoverflow.com";
window.location.hostname: "stackoverflow.com";
window.location.href: "http://stackoverflow.com/questions/11537718/how-to-determine-the-page-url-at-run-time-in-javascript/11537761#11537761";
window.location.origin: "http://stackoverflow.com";
window.location.pathname: "/questions/11537718/how-to-determine-the-page-url-at-run-time-in-javascript/11537761"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:59:45.330

快速谷歌：

```
<SCRIPT LANGUAGE="JavaScript">
  alert(location.href);
</SCRIPT> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:00:03.707

在 JavaScript 中你有[document.URL](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-46183437)

```
alert(document.URL); 
```

# ruby-on-rails - 与 Pycharm 非常相似的 Rails IDE

> ID：11537721
> 
> 赞同：0
> 
> 时间：2012-07-18T08:58:25.773
> 
> 标签：ruby-on-rails, pycharm

我最近从 rails 转移到了 pycharm。我已经尝试过 Netbeans 和 Aptana Studio 进行 Rails 开发，但它们不像 python 的 pycharm 那样工作。其中缺少自动保存、错误标记等功能。

能否请您告诉我在 Rails 上开发的最佳 IDE。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:04:17.917

你可能对[红宝石感兴趣](http://www.jetbrains.com/ruby/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:37:29.983

您可以考虑使用带有**Ruby**和**Python**插件的[IntelliJ IDEA Ultimate](http://www.jetbrains.com/idea/) ，以便在单个 IDE（以及更多）中同时获得[PyCharm](http://www.jetbrains.com/pycharm/)和[RubyMine功能。](http://www.jetbrains.com/ruby/)

 ****否则就去[RubyMine](http://www.jetbrains.com/ruby/)。

IntelliJ IDEA Ultimate 将 WebStorm、PhpStorm、PyCharm 和 RubyMine 产品的所有功能合二为一（除了一些小例外，例如直接从远程服务器打开文件夹和创建项目）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:26:03.453

[Rubymine](http://www.jetbrains.com/ruby/)，来自 JetBrains 的 IDE - PyCharm 的作者。****

# iphone - 获取 PayPal 会话超时页面，但没有关闭按钮 - iPhone

> ID：11537722
> 
> 赞同：0
> 
> 时间：2012-07-18T08:58:28.600
> 
> 标签：iphone, objective-c, ios, paypal

我是这项技术的新手。

在 PayPal 结帐快递中遇到问题

用户在登录屏幕上停留很长时间并按 (X) 按钮关闭后，用户将被重定向到 PayPal 会话超时页面。在此页面中，没有与登录页面相同的关闭按钮，因此用户无法作为其 iPhone 设备返回。这使应用程序卡在一个屏幕上。关于这个问题的任何建议都会非常有帮助。

![在此处输入图像描述](../Images/0886ed6a6ef03e5b051e45444d27d3a3.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:53:32.930

我假设您使用的是 UIWebView？您可以在顶部添加一个 NavBar 并给它某种调用的后退按钮

```
goBack 
```

这将有助于再次尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:45:35.793

我向 PayPal 报告了这个问题，他们回复说这个问题很快就会解决。

我暂时通过添加解决了这个问题，`NSTimer`8 分钟后，我将用户重定向到交易失败屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T03:45:03.963

这是一个猜测。配置“返回网址”。并且关闭按钮将可见。PS：在Javascript中工作。

# java - Apache CXF：jax-rs 客户端 - 获取对象数组

> ID：11537723
> 
> 赞同：4
> 
> 时间：2012-07-18T08:58:29.413
> 
> 标签：java, rest, collections, cxf, jax-rs

我想通过 GET 从我的服务中获取一个对象数组。

所以我尝试了：

```
 reader.setEntityClass(ObjectDTO[].class); 
 res = client.get();    
 List<ObjectDTO> objects = (List<ObjectDTO>) res.getEntity(); 
```

错误：

```
 Object; cannot be cast to java.util.List 
```

服务：

```
 @GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public List<ObjectDTO> getObjects(); 
```

我的依赖：

```
 <dependency>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-rt-frontend-jaxrs</artifactId>
  <version>2.6.0</version>
</dependency> 
```

完整的堆栈跟踪：

```
 org.apache.cxf.jaxrs.client.ClientWebApplicationException: .Problem with reading the response message, class : class javax.ws.rs.core.Response, ContentType : application/xml.
        at org.apache.cxf.jaxrs.client.AbstractClient.reportMessageHandlerProblem(AbstractClient.java:614)
        at org.apache.cxf.jaxrs.client.AbstractClient.readBody(AbstractClient.java:452)
        at org.apache.cxf.jaxrs.client.WebClient.handleResponse(WebClient.java:782)
        at org.apache.cxf.jaxrs.client.WebClient.doChainedInvocation(WebClient.java:766)
        at org.apache.cxf.jaxrs.client.WebClient.doInvoke(WebClient.java:696)
        at org.apache.cxf.jaxrs.client.WebClient.invoke(WebClient.java:242)
        at org.apache.cxf.jaxrs.client.WebClient.get(WebClient.java:268)
        at com.bachelor.cxf.CxfClientTest.getEstatesWebClient(CxfClientTest.java:313)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
        Caused by: org.apache.cxf.jaxrs.client.ClientWebApplicationException: No reader for Response entity java.util.List
        at org.apache.cxf.jaxrs.client.ResponseReader.readFrom(ResponseReader.java:92)
        at org.apache.cxf.jaxrs.client.ResponseReader.readFrom(ResponseReader.java:77)
        at org.apache.cxf.jaxrs.client.ResponseReader.readFrom(ResponseReader.java:40)
        at org.apache.cxf.jaxrs.client.AbstractClient.readBody(AbstractClient.java:450)
        ... 30 more 
```

编辑：

我也尝试了另一种方法：

```
 List<ObjectDTO> objects = (List<ObjectDTO>) client.get(ObjectDTO.class); 
```

我得到：

```
 1435 [main] WARN org.apache.cxf.jaxrs.provider.AbstractJAXBProvider - javax.xml.bind.UnmarshalException
    - with linked exception:
    [javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"objectDTOes"). Expected elements are <{}objectDTO>]
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:425)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:362)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:332)
        at org.apache.cxf.jaxrs.provider.JAXBElementProvider.unmarshalFromInputStream(JAXBElementProvider.java:258)
        at org.apache.cxf.jaxrs.provider.JAXBElementProvider.doUnmarshal(JAXBElementProvider.java:215)
        at org.apache.cxf.jaxrs.provider.JAXBElementProvider.readFrom(JAXBElementProvider.java:182)
        at org.apache.cxf.jaxrs.client.AbstractClient.readBody(AbstractClient.java:450)
        at org.apache.cxf.jaxrs.client.WebClient.handleResponse(WebClient.java:782)
        at org.apache.cxf.jaxrs.client.WebClient.doChainedInvocation(WebClient.java:766)
        at org.apache.cxf.jaxrs.client.WebClient.doInvoke(WebClient.java:696)
        at org.apache.cxf.jaxrs.client.WebClient.invoke(WebClient.java:324)
        at org.apache.cxf.jaxrs.client.WebClient.get(WebClient.java:435)
        at com.bachelor.cxf.CxfClientTest.getEstatesWebClient(CxfClientTest.java:314)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
    Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"objectDTOes"). Expected elements are <{}objectDTO>
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:642)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:254)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:249)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:116)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1049)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:478)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:459)
        at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleStartElement(StAXStreamConnector.java:242)
        at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:176)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)
        ... 35 more
    Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"objectDTOes"). Expected elements are <{}objectDTO>
        ... 45 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:39:25.480

是的，我没有注意到 getCollection 方法。现在它只是：

```
 (List<ObjectDTO>) client.getCollection(ObjectDTO.class); 
```

它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:08:56.547

改变：

```
reader.setEntityClass(Object[].class); 
```

到：

```
reader.setEntityClass(java.util.List.class); 
```

# android - 我们可以从 Web View 打印吗？

> ID：11537726
> 
> 赞同：6
> 
> 时间：2012-07-18T08:58:48.100
> 
> 标签：android, printing

我的简单问题是我们可以通过 WIFI 打印从 Web 视图打印页面吗？
我已经制作了一页并显示在 Web 视图中，我可以打印该页吗？
在模拟器中它没有任何选项，但在 android wifi 支持手机中有打印选项。
请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-18T12:38:06.020

试试下面的代码

```
public  void createWebPagePrint(WebView webView) {
		/*if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) 
            return;*/
	    PrintManager printManager = (PrintManager) getSystemService(Context.PRINT_SERVICE);
	    PrintDocumentAdapter printAdapter = webView.createPrintDocumentAdapter();
	    String jobName = getString(R.string.webapp_name) + " Document";
	    PrintAttributes.Builder builder = new PrintAttributes.Builder();
	    builder.setMediaSize(PrintAttributes.MediaSize.ISO_A5);
	    PrintJob printJob = printManager.print(jobName, printAdapter, builder.build());

	    if(printJob.isCompleted()){
	    	Toast.makeText(getApplicationContext(), R.string.print_complete, Toast.LENGTH_LONG).show();
	    }
	    else if(printJob.isFailed()){
	    	Toast.makeText(getApplicationContext(), R.string.print_failed, Toast.LENGTH_LONG).show();
	    }
	    // Save the job object for later status checking
	}
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-28T14:08:32.980

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.print.PrintAttributes;
import android.print.PrintDocumentAdapter;
import android.print.PrintJob;
import android.print.PrintManager;
import android.webkit.JavascriptInterface;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;
import android.widget.Toast;

public class TempActivity extends Activity {
    private WebView mMainWebview;
    private WebView print_webview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mMainWebview = new WebView(TempActivity.this);
        setContentView(R.layout.activity_temp);// mention layout of you activity here
        FrameLayout webViewpar = (FrameLayout) findViewById(R.id.webViewParent);
        webViewpar.addView(mMainWebview);
        print_webview = (WebView) findViewById(R.id.print_view); //view on which you want to take a printout
        mMainWebview.addJavascriptInterface(new TempActivity.WebViewJavaScriptInterface(this), "androidapp"); //
        // "androidapp is used to call methods exposed from javascript interface, in this example case print
        // method can be called by androidapp.print(String)"
        // load your data from the URL in web view
        if (savedInstanceState != null) {
            mMainWebview.restoreState(savedInstanceState);
        } else {
            mMainWebview.loadUrl("your website URL");
        }
    }

    public class WebViewJavaScriptInterface {

        /*
         * Need a reference to the context in order to sent a post message
         */
        public WebViewJavaScriptInterface(Context context) {

        }

        /**
         * method defined by developer, which will be called by web page , from web developer
         * this you can call when want to take a print, either on click of a button or directly
         * Convert HTML data, to be printed,  in form of a string and pass to this method.
         *
         * @param data
         */
        @JavascriptInterface
        public void print(final String data) {

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    doWebViewPrint(data);

                }
            });
        }
    }

    private void doWebViewPrint(String ss) {

        print_webview.setWebViewClient(new WebViewClient() {

            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                return false;
            }

            @Override
            public void onPageFinished(WebView view, String url) {

                createWebPagePrint(view);
                super.onPageFinished(view, url);
            }
        });
        // Generate an HTML document on the fly:
        print_webview.loadDataWithBaseURL(null, ss, "text/html", "UTF-8", null);
    }

    public void createWebPagePrint(WebView webView) {

        PrintManager printManager = (PrintManager) getSystemService(Context.PRINT_SERVICE);
        PrintDocumentAdapter printAdapter = webView.createPrintDocumentAdapter();
        String jobName = getString(R.string.webapp_name) + " Document";
        PrintAttributes.Builder builder = new PrintAttributes.Builder();
        builder.setMediaSize(PrintAttributes.MediaSize.ISO_A5);
        PrintJob printJob = printManager.print(jobName, printAdapter, builder.build());

        if (printJob.isCompleted()) {
            Toast.makeText(getApplicationContext(), R.string.print_complete, Toast.LENGTH_LONG).show();
        } else if (printJob.isFailed()) {
            Toast.makeText(getApplicationContext(), R.string.print_failed, Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-21T07:28:08.373

某些 android/Ios 版本不允许使用 window.print() 直接打印。所以选项是放置一个浮动按钮来打印页面。

# ruby - Haml - 如何将 ruby 变量放入类标识符的名称中

> ID：11537727
> 
> 赞同：10
> 
> 时间：2012-07-18T08:58:49.087
> 
> 标签：ruby, class, syntax, haml

这是一行，我用它来格式化我的链接：

```
%a.accordion-toggle.toggle-6{:href => "#"} #{name} 
```

我需要有一个选项来输入这个类**toggle-6**我自己的数字，例如**toggle-1**等。

如何在 HAML 语法中做到这一点？我试过类似的东西

```
%a.accordion-toggle.toggle-#{id}{:href => "#collapseOne"} #{name} 
```

但这会返回

```
Illegal element: classes and ids must have values. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T09:06:40.327

您可以将动态值指定为属性：

```
%a{class: "accordion-toggle toggle-#{id}", href: "#collapseOne"} #{name} 
```

# javascript - 一次选择 4 个复选框并将页面重定向到新页面

> ID：11537728
> 
> 赞同：0
> 
> 时间：2012-07-18T08:58:53.360
> 
> 标签：javascript, jquery, html, css

谁能帮帮我。我有一个带有复选框的图像。像这样，我有 4 个带有 4 个复选框的图像。如果只选择所有复选框，我想直接导航到新页面。

如果用户单击了一个复选框，则如果用户单击“全选”，或者如果用户一一选中所有复选框，则页面不应重定向到新页面，则页面也应重定向到新页面。

任何人都可以帮助我并做必要的事情。

**HTML**

```
 <table border="1">
    <tr>
        <th><input type="checkbox" id="selectall"/></th>
    </tr>
    <tr>
        <td align="center"><input type="checkbox" class="case" name="case" value="4"/></td>
        <td align="center"><img src="images/1.jpg" /></td>
    </tr>
    <tr>
        <td align="center"><input type="checkbox" class="case" name="case" value="4"/></td>
        <td align="center"><img src="images/2.jpg" /></td>
    </tr>
    <tr>
        <td align="center"><input type="checkbox" class="case" name="case" value="4"/></td>
        <td align="center"><img src="images/3.jpg" /></td>
    </tr>
    <tr>
        <td align="center"><input type="checkbox" class="case" name="case" value="4"/></td>
        <td align="center"><img src="images/4.jpg" /></td>

    </tr>

    </table> 
```

**JS**

$(函数(){

```
// add multiple select / deselect functionality
$("#selectall").click(function () {
      $('.case').attr('checked', this.checked);
});

$(".case").click(function(){

    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }

}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:16:20.040

`window.location.href = newURL;`检查是否选中了所有复选框后尝试添加：

```
if($(".case").length == $(".case:checked").length) {
    window.location.href = "www.stackoverflow.com";
} 
```

确保在两种情况下都测试此条件：

1.  如果用户单击了一个复选框
2.  如果用户单击“全选”

# c# - AutoMapper - 嵌套映射，同时保留选定的子属性

> ID：11537734
> 
> 赞同：1
> 
> 时间：2012-07-18T08:58:59.837
> 
> 标签：c#, c#-4.0, automapper, automapper-2

所以我有这个；

```
public class Parent
{
  public string SomeProperty { get; set; }
  public Child ChildProperty { get; set; }
}
public class Child
{
  public string ChildProperty { get; set; }
  public string OtherChildProperty { get; set; }
}
public class Flat
{
  public string SomeProperty { get; set; }
  public string ChildProperty { get; set; }
} 
```

然后我这样做；

```
Flat source = new Flat { SomeProperty = "test", ChildProperty = "test" };
Parent dest = GetParentFromDataContext();

Mapper.Map<Flat,Parent>(source,dest); 
```

然后我的期望是它`dest.ChildProperty.OtherChildProperty`仍然设置为从数据上下文中提取时的状态。但是我正在努力做到这一点。

如果我`CreateMap`是这样，那么我会得到一个“必须解决到顶级成员”的异常；

```
Mapper.CreateMap<Flat,Parent>()
  .ForMember(dest => dest.Parent.ChildProperty.ChildProperty,
    options => options.MapFrom(source => source.ChildProperty))
  .ForMember(dest => dest.Parent.ChildProperty.OtherChildProperty,
    options => options.Ignore()); 
```

但是，如果我执行以下操作，则`new Child {}`替换`Child`从数据上下文中提取的内容基本上是清除`OtherChildProperty`；

```
Mapper.CreateMap<Flat,Parent>()
  .ForMember(dest => dest.Child
    options => options.MapFrom(source => new Child { ChildProperty = source.ChildProperty } )); 
```

我如何映射它并保留我希望忽略的子属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:15:27.503

您正在尝试使用 automapper 反转展平过程，而这对这项工作来说是错误的工具。请参阅[这个](https://stackoverflow.com/questions/3145062/using-automapper-to-unflatten-a-dto)SO 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:07:23.503

不优雅，但这行得通；

```
Mapper.CreateMap<Flat,Parent>()
  .ForMember(dest => dest.ChildProperty, options => options.Ignore());
Mapper.CreateMap<Flat,Child>()
  .ForMember(dest => dest.OtherChildProperty, options => options.Ignore());

Mapper.Map<Flat,Parent>(source,dest);
Mapper.Map<Flat,Child>(source,dest.Child); 
```

# javascript - 使用 d3.js 附加时如何使用 jquery 查找 div

> ID：11537735
> 
> 赞同：1
> 
> 时间：2012-07-18T08:58:59.930
> 
> 标签：javascript, jquery, d3.js

我目前正在使用 JavaScript jquery 和 d3.js 库。我遇到了问题，需要专家的帮助

这是我的代码

```
<div id="d1", style="height: 200px; width: 540px" ></div>> 
```

现在我已经使用 d3.js 编写了代码

```
 var p_div = "d1"
 div =  d3.select('#' + p_div).append('div')
                              .attr('id' , 'child' + p_div)
                              .attr('width', 340)
                              .attr('height', 200px)
                              .attr('style', 'float: left;'); 
```

我的问题从这里开始我想要使用 jquery 的内部 div 的左侧和顶部位置，所以我编写了以下代码行

```
var par_div = "d1";
alert ($('#child' + par_div).position().left); 
```

但我收到一个错误

> 未捕获的类型错误：无法读取 null 的属性“左”

我认为问题是因为我使用 d3.js 制作了 div。任何人都可以指导我如何找到我的孩子 div 的左侧位置

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:00:53.420

看起来像一个错字：

```
$('#child' + par_div) 
```

应该：

```
$('#' + par_div) 
```

# java - Easy Struts 插件需要 'org.eclipse.update.ui.forms

> ID：11537736
> 
> 赞同：2
> 
> 时间：2012-07-18T08:59:01.987
> 
> 标签：java, eclipse, eclipse-plugin, struts, helios

我无法在 eclipse helios 中安装 easy struts 插件。我面临下一个：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Easy Struts plugin 0.6.3 (com.cross.easystruts.eclipse.feature.feature.group 0.6.3)
  Missing requirement: Easy Struts plugin 0.6.3 (com.cross.easystruts.eclipse.feature.feature.group 0.6.3) requires 'org.eclipse.update.ui.forms 0.0.0' but it could not be found 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:48:11.393

Easy Struts 是一个*非常*古老的工具，它是为 Eclipse 2.x 编写的。我很确定它不再受支持。该`org.eclipse.update.ui.forms`插件不再是 Eclipse 的一部分（至少 6 或 7 年没有），所以您根本无法将该版本的 Easy Struts 安装到任何最新版本的 Eclipse 中。

顺便说一句，当你用谷歌搜索时，第一个链接`org.eclipse.update.ui.forms`会回答这个问题。

# responsive-design - 在 Google 协作平台中使用响应式设计

> ID：11537744
> 
> 赞同：13
> 
> 时间：2012-07-18T08:59:21.113
> 
> 标签：responsive-design, google-sites

有没有办法将响应式设计原则与[Google 协作平台](https://sites.google.com/)一起使用。有没有人试过。你能引导我到一个示例网站吗？我查看了[这个谷歌帮助主题](https://web.archive.org/web/20130118125736/http://support.google.com/sites/bin/answer.py?hl=en&answer=1260297&topic=1260296&ctx=topic)，但那应该是关于专门的移动网站。

我的主要关注点是一个针对网络优化的普通网站，而不是主要针对移动网站。

或者，在这种情况下，Blogger 是一个更好的选择，因为它允许更改 CSS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:10:26.657

我认为你的负面印象是对的。它没有实现您在响应式设计中所期望的功能。

您问题的关键是 Google 协作平台不使用视口声明（head 元素中的元视口）。如果您没有，那么设备浏览器会将您视为仅限桌面的旧网站。他们假设您将完全低于〜830px，并相应地设置页面最小宽度。对我来说，这听起来不像是响应式设计。

Google 协作平台不允许您编写自己的 CSS 或 HTML HEAD，因此您无法自己实现更具响应性的设计。

公平地说，您可以选择不设置固定的页面宽度。如果您使用“水平导航”功能，导航按钮也会在相对较窄的窗口上重排。后者不是很好的设计，但至少它优雅地退化了。

在管理站点 -> 常规下有一个选项“自动将站点调整为手机”。但是很多人建议最好不要使用它:)。[我尝试在旧网站](https://sites.google.com/site/jardinepoetryhistory/)上启用它，预览页面，然后选择“在移动设备中预览”。至少在我原来的上网本（800px 宽）上的 Firefox 上，它没有响应。它没有扩展为正确使用 800px 屏幕。

顺便说一句，换行（或没有换行）是我网站的一个预先存在的问题。你可以把这归咎于我没有测试它:)。但是，它说明了 Google 协作平台中所见即所得编辑器的局限性。它不会显示、检查或过滤导致此问题的格式。

![谷歌网站移动预览](../Images/77841ffcca4aacf6d16be3a5eb2a6f2a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-09T19:14:14.803

移动是的，响应式的没有。

我今天搞砸了 Google 协作平台，你可以让网站变得对移动设备友好（我必须来这里才能开始使用！）。我只是用“空白模板”来搞乱。

您确实需要激活（就像其他人提到的那样）：

**选项（齿轮图标）> 管理站点>（向下滚动到移动）检查.. 自动调整手机。** *是的，让我们把这个选项埋在底部！*

*考虑到 2015 年春季实施的整个移动“推送”谷歌，对于任何新创建的谷歌站点，这应该默认为开启。*

只需选择该选项即可创建一个好的（基本）移动网站。不是响应式网站。因此，在我的 iPhone 上，它确实可以正确缩放照片以适合设备并将主水平菜单切换到“汉堡包”图标/菜单。但是折叠桌面浏览器窗口不会产生响应结果。 [https://sites.google.com/site/rwstws51/](https://sites.google.com/site/rwstws51/)

作为测试，我上传了一张太大的照片（2.5mb），看不出会发生什么。通过 Google PageSpeed Insights 运行该网站，它没有显示任何“优化照片”警告，因此似乎为手机和台式机提供了优化的照片。

我猜基本的主题实际上叫做“滑雪”。我尝试了“Legal Pad”主题，但它在移动设备上完全没用。*我认为由于标题和内容区域背景图像。*

对我来说，如果您已经对 Google 的其他产品（驱动器、文档、Google+、webmastertools、分析等）很感兴趣，那么 Google 站点是理想的选择。因为它具有在编辑时添加这些类型项目的链接。或者需要一个快速协作的网站，因为您可以轻松设置网站访问权限，例如 YouTube、Drive 项目。

此外，您可以添加的 html 非常有限。尝试保存时，尝试添加脚本标签会被删除。因此，根据用途，肯定还有其他选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-01T00:47:33.490

适用于旧的“经典”谷歌网站的答案是否定的。

如果您使用应用程序脚本创建自己的自定义 HTML 表单，则可以将 @media 视口等添加到这些页面/表单的 css 中，这样会有所帮助...等级。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-05-05T06:43:40.143

现在有可能制作一个响应式的 Google 网站。由于谷歌在“管理站点”选项按钮中增强了此功能“自动将站点调整为手机”选项。

找到选项 - 转到>管理站点>常规>，在常规设置页面的下部，您可以看到一个名为“自动将站点调整为手机”的单选按钮。只需勾选单选按钮，您就增强了该功能。

**请参阅使用响应式 Google 网站**制作的示例网站 **`www.jyotiprokashmusic.com`**

# c# - 在 c# 中使用数据集时，我的 datagridview 上没有出现数据，我在这里缺少什么？

> ID：11537754
> 
> 赞同：0
> 
> 时间：2012-07-18T08:59:56.613
> 
> 标签：c#

```
SqlCommand cmd = new SqlCommand("Select sur_accounttype from tsys_user",conSQL ) ;
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds,"tsys_user");
dataGridView1.DataSource = ds;
ds.Dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:01:49.353

~~从您的代码中删除它~~

`ds.Dispose();`

ds.Dispose 实际上[什么也没做](https://stackoverflow.com/questions/913228/should-i-dispose-dataset-and-datatable)。问题在于将数据源指定为数据集中的表。

```
dataGridView1.DataSource = ds.Tables[0].DefaultView; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:07:43.693

尝试设置`DataMember`属性。

```
dataGridView1.DataSource = ds;
dataGridView1.DataMember="tsys_user"; 
```

或者创建一个*DataTable*并填充它。

```
DataTable dt=new DataTable();
da.Fill(dt);
dataGridView1.DataSource = dt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:02:58.220

将数据集添加到网格后立即处理数据集

# c# - 实体框架中的多重连接

> ID：11537757
> 
> 赞同：2
> 
> 时间：2012-07-18T09:00:00.843
> 
> 标签：c#, sql, sql-server, entity-framework

我在 TSQL 中有以下查询

```
select * from users 
inner join linkUserPhoneNumber on users.UserId = linkUserPhoneNumber.UserId
INNER JOIN PhoneNumber ON PhoneNumber.PhoneNumberId =
    linkUserPhoneNumber.PhoneNumberId
    where UserName = 'superuser' and password ='password' 
```

我在实体框架中有以下查询

```
var query = (from u in myEntities.Users
  join link in myEntities.linkUserPhoneNumbers on u.UserId equals link.UserId 
  join p in myEntities.PhoneNumbers on p.PhoneNumberId equals link.PhoneNumberId
  where u.UserName == Username && u.Password == Password
  select u).ToList(); 
```

当我尝试编译它时，我得到

> 错误 3 名称 'p' 不在 'equals' 左侧的范围内。考虑交换 'equals' 两边的表达式。
> 错误 4 名称 'link' 不在 'equals' 右侧的范围内。考虑交换 'equals' 两边的表达式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T09:10:57.677

正是错误在说什么

```
p.PhoneNumberId equals link.PhoneNumberId 
```

应该

```
link.PhoneNumberId equals p.PhoneNumberId 
```

完整代码

```
var query = (from u in myEntities.Users
  join link in myEntities.linkUserPhoneNumbers on u.UserId equals link.UserId 
  join p in myEntities.PhoneNumbers on link.PhoneNumberId equals p.PhoneNumberId
  where u.UserName == Username && u.Password == Password
  select u).ToList(); 
```

# html - IE7 不支持边框半径

> ID：11537760
> 
> 赞同：2
> 
> 时间：2012-07-18T09:00:05.860
> 
> 标签：html, border, css

我知道边框半径属性在**IE7**中不支持。

`IE7`在浏览器中是否有任何 css 技巧来做边界半径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:04:11.463

您可以使用[CSS3 PIE](http://css3pie.com/)来完成这项工作。

要获得它，请将 pie.htc 文件添加到您网站的根目录。在要使用边框半径的 CSS 文件中添加以下代码：

```
behavior: url(path/to/PIE.htc); 
```

在普通 CSS 中，url 是相对于 CSS 文件的。对于 htc 文件，它是相对于您网站的根目录的。这很重要，否则它将无法正常工作。责怪微软。

**笔记：**

如果它仍然不起作用，请将其添加到您的选择器中：

```
position: relative;
z-index: 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:02:31.450

在不支持“border-radius”CSS 属性的浏览器中，有很多“技巧”可以让圆角变得圆润。只需在 Google 上搜索“圆角 css”即可。[例如，这](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)似乎很有希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:03:53.237

目前，IE 9 和 10 是唯一支持边框半径的 IE 版本。IE 8 及以下不支持边界半径。

检查这个[http://css3pie.com/](http://css3pie.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T12:56:45.960

**使用在Photoshop中制作曲线边框.ping图像并使用它.....因为border-radius-bottomleft，border-radius-bottom right等在ie6-8上不起作用......**

**使用该代码使边框半径运行良好....**

**

```
background-color: #E8EDEF;
    border-radius: 10px 10px 10px 10px;
    display: block;
    margin-left: 78px;
    width: 591px;
behavior: url(pie/PIE.htc); 
```

**

**并查看边界半径[http://css3pie.com/](http://css3pie.com/)**

**文件中详细给出**

# ruby - 类方法：描述“#my_class_method”还是描述“#self.my_class_method”？

> ID：11537774
> 
> 赞同：4
> 
> 时间：2012-07-18T09:01:07.457
> 
> 标签：ruby, testing, rspec

我尝试进行符合最佳实践的 RSpec 测试，并且我知道在测试实例方法时，可以这样做

```
describe "#my_instance_method" do ... end 
```

但是类方法呢？我应该`self.`在描述字符串中添加一个吗？

```
describe "#self.my_class_method" do ... end 
```

感谢您的意见！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T09:11:35.050

来自“[如何命名 RSpec 描述方法的块](http://grosser.it/2010/06/18/how-to-name-rspec-describe-blocks-for-methods/)”：

*   使用磅`#method`作为实例方法
*   `.method`对类方法使用点

在您的示例中：

```
describe "#my_instance_method" do ... end
describe ".my_class_method" do ... end 
```

# iphone - 我怎样才能解雇几个控制器？

> ID：11537781
> 
> 赞同：1
> 
> 时间：2012-07-18T09:01:20.427
> 
> 标签：iphone, ios5

使用 storyboard ，我调用 segue （将类型设置为模态）以显示第二个控制器，并以相同的方式显示第三个控制器。A->B->C。我希望 B 和 C 一起解散，然后返回 A。没有导航视图控制器，没有`popToRootViewControllerAnimated:`。

在文档中：

如果您连续呈现多个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。发生这种情况时，只有最顶层的视图会以动画方式消失；任何中间视图控制器都简单地从堆栈中删除。最顶层的视图使用其模态转换样式被解除，这可能与堆栈中其他视图控制器使用的样式不同。

我尝试了各种方法，但都失败了。我错过了一些非常简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:13:55.897

试试这个

```
[self.presentingViewController.presentingViewController dismissModalViewControllerAnimated:YES] 
```

也试试这个

```
[self.parentViewController.parentViewController dismissModalViewControllerAnimated:YES]; 
```

# c# - 一台客户电脑上的 Math.Round 奇怪行为

> ID：11537782
> 
> 赞同：2
> 
> 时间：2012-07-18T09:01:22.897
> 
> 标签：c#, .net, vb.net

我有一个非常奇怪的问题，我的许多客户中只有一台电脑上发生了这种问题。我已经追踪到`Math.Round`方法。

在这款全新的 win7 电脑上**`Math.Round(1.59999,2)`**回归**`1.59`**！应该是**`1.6`**，在所有其他情况下也是如此。

我了解银行家四舍五入的怪癖，`Math.Round`并且我也知道重载中的各种中点舍入选项，但无论如何`1.59999`都应该始终如此`1.6`。

我们已尝试修复 PC 上的 .NET Framework (3.5 sp1) 并进行全面病毒扫描。这种行为的原因可能是什么，我该如何进一步调查这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:08:36.680

您的核心问题是您是`double`但您期望有意义的十进制数字。如果十进制数字有意义，

我还怀疑舍入时没有引入主要区别：您总是会得到一个非常接近但不等于`1.6`. `1.6`不能完全用 来表示`double`。有可能您在不同的 PC 上得到的值略有不同，特别是如果同一进程中的其他一些 dll 更改了浮点标志。

我怀疑观察到的差异发生在您转换为字符串的过程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:25:12.460

我首先要看的是数字`1.59999`的来源。

它是在发送到之前被解析为浮点数的字符串的结果`Math.Round`吗？如果是这样，是不是该字符串被截断了？您能确定传递给的值`Math.Round`实际上是`1.59999`而不是`1.59`吗？

# open-source - 哪个 OSS 许可证适合“始终保持我的部分打开”

> ID：11537784
> 
> 赞同：0
> 
> 时间：2012-07-18T09:01:28.663
> 
> 标签：open-source, licensing

我希望许可证是普遍许可的，但是：

1.  您可以将我的软件嵌入到您的软件中，但我的部分源代码必须与您的产品一起分发，并保持我的部分许可不变。
2.  您可以更改和重命名我的软件，但必须保留更改日志的历史记录部分。
3.  您可以在您的网络服务中使用我的软件，但必须有一个源代码下载链接（我的部分）在网页中明显可见的地方。

好吧，可能没有完全等效的许可证，但您认为哪个许可证最合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:10:50.853

我认为不存在具有所有这些条件的通用许可证。

听起来你想要两者的元素：

*   LGPL - 满足 1 并且通常具有“我的部分必须是开放的”理念
*   Affero GPL，如果软件通过网络使用，则需要共享代码（您的第 3 点）

但是，我的建议是选择最接近您想要的常用许可证。转到[http://opensource.org/licenses/category](http://opensource.org/licenses/category)并查看“流行且广泛使用或拥有强大社区的许可证”

我猜 LGPL 将是最合适的（它不能满足您的 Web 服务要求，但这是一个不常见的要求并且无论如何都难以执行）。对于您希望库本身的代码保持开放但不介意以通常允许的方式使用库的库，LGPL 是一个很好的选择。

# c++ - Boost-bjam：链接结果与预编译库

> ID：11537786
> 
> 赞同：1
> 
> 时间：2012-07-18T09:01:29.687
> 
> 标签：c++, linux, bjam

我应该在我的 jamroot.jam 文件中添加什么，以便 libAPLibrary.so 与 MyProject 编译的结果相关联？

```
根
  |-我的项目
  | |-jamroot.jam
  |
  |-另一个项目
      |-库
          |-libAPLibrary.so

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:14:01.823

如果库 libAPLibrary.so 已经编译，您应该声明它并将其链接到项目，这样：

```
lib libAPLibrary : : 
    # watch out for empty spaces, they are mandatory
    <file>../AnotherProject/lib/libAPLibrary.so ;

exe MyProject
    : 
        # your project sources here
        # this is a generic filter but you 
        # can replace it with file names
        [ glob *.c* ] 

        # external libraries
        libAPLibrary
; 
```

# wordpress - Wordpress 本地文件权限

> ID：11537789
> 
> 赞同：0
> 
> 时间：2012-07-18T09:01:45.710
> 
> 标签：wordpress

我有一个本地安装的 wordpress。

我做噩梦设置权限。

如果将其全部设置为 777，则错误为 500，我将其设置为 644，但仍然相同！

apache2下的正确设置到底是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:04:25.610

首先，我`m developing wp plugins for a long time now and I`从未见过关于 777 权限的内部错误 500。向我们提供有关您的服务器配置的更多详细信息可能是个好主意。给你一个关于权限的答案有点复杂，因为它因服务器而异，但通常我使用它如下：

```
wp-admin 755 
wp-includes 755 
wp-content 755 
wp-content/images 777 
.htaccess 644 
wp-admin/index.php 644 
wp-content/themes/your-theme/files 666 
wp-config.php 640 
Other files 640 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:08:43.630

由于它是本地版本，您是否尝试将**整个 wordpress 文件夹**设置为权限 777？您使用什么操作系统？我曾经在 Ubuntu 下得到这个。您是否尝试过添加一个简单的 php 文件来测试您使用的链接是否良好？

回答有关权限的问题： http: [//codex.wordpress.org/Changing_File_Permissions#Permission_Scheme_for_WordPress](http://codex.wordpress.org/Changing_File_Permissions#Permission_Scheme_for_WordPress)和[http://wordpress.org/support/topic/wordpress-file-permissions](http://wordpress.org/support/topic/wordpress-file-permissions)将对您有所帮助。

# key - LWUIT 中不能捕获物理按键事件

> ID：11537792
> 
> 赞同：1
> 
> 时间：2012-07-18T09:01:55.673
> 
> 标签：key, lwuit, lcdui, pressed

我有一部只有一个物理键的电话，单击它作为 BACK 操作。但关键事件不能在 LWUIT 1.5 中捕获。这是我的代码：

```
 import com.sun.lwuit.Command;
    import com.sun.lwuit.Form;
    import com.sun.lwuit.events.ActionEvent;

    public class CustomForm extends Form {

        public CustomForm() {
            Command backCmd = new Command("BACK", 2) {
                public void actionPerformed(ActionEvent evt) {
                    System.out
                            .println("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! back cmd evt: "
                                    + evt);
                }
            };
            this.addCommand(backCmd, 0);
        }

        public void keyPressed(int aKeyCode) {
            System.out.println("@@@@@@@@@@@@@@@@@@@@@@@@@ key code = " + aKeyCode);
            super.keyPressed(aKeyCode);
        }

        public void keyReleased(int keyCode) {
            System.out
                    .println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ key released code: "
                            + keyCode);
            super.keyReleased(keyCode);
        }
    } 
```

但是，可以使用 LCDUI 表单捕获关键事件。这是 LCDUI 的代码：

```
 import javax.microedition.lcdui.Command;
    import javax.microedition.lcdui.CommandListener;
    import javax.microedition.lcdui.Display;
    import javax.microedition.lcdui.Displayable;
    import javax.microedition.lcdui.Form;
    import javax.microedition.lcdui.StringItem;
    import javax.microedition.midlet.MIDlet;
    import javax.microedition.midlet.MIDletStateChangeException;

    public class Test extends MIDlet implements CommandListener {

        protected void destroyApp(boolean arg0) throws MIDletStateChangeException {
            // TODO Auto-generated method stub

        }

        protected void pauseApp() {
            // TODO Auto-generated method stub

        }

        protected void startApp() throws MIDletStateChangeException {
            Form form = new Form("Hello World");
            StringItem str = new StringItem("HI", "BYE");
            form.append(str);
            Command bc = new Command("Back", Command.BACK, 1);
            form.addCommand(bc);
            form.setCommandListener(this);

            Display.getDisplay(this).setCurrent(form);
        }

        public void commandAction(Command c, Displayable d) {
            System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~ Got command: "
                    + c.getCommandType() + " " + c.getLabel());
            if (c.getCommandType() == Command.BACK) {
                // Application logic for Back button press
            }
        }

    } 
```

也许LWUIT忽略了一些关键事件？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:20:50.633

Back 被发送到 back 命令并且不会向前传播。

# syntax - 如何在 Latex 伪代码中放置圆括号

> ID：11537802
> 
> 赞同：2
> 
> 时间：2012-07-18T09:02:38.353
> 
> 标签：syntax, latex

我在乳胶中有以下伪代码

```
\begin{algorithm}
\begin{algorithmic}
.....
\State i = (i + 1) \% CAPACITY
.....
\end{algorithmic}
\end{algorithm} 
```

但是，当我编译这个时，圆括号没有出现，而不是得到`i = (i + 1) % QCAPACITY`，我得到`i = i + 1 % QCAPACITY`. 我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:08:56.363

你确定你的代码是正确的吗？我已将此代码粘贴到[ScribTeX 中](http://www.scribtex.com)，并且我做对了。

```
\documentclass[12pt]{article}
\usepackage{amsmath}

\begin{document}

\begin{algorithm}
\begin{algorithmic}

\State i = (i + 1) \% CAPACITY

\end{algorithmic}
\end{algorithm}

\end{document}​ 
```

# api - 具有经过身份验证的用户的 REST API 的无状态性

> ID：11537807
> 
> 赞同：23
> 
> 时间：2012-07-18T09:02:58.593
> 
> 标签：api, http, rest, hateoas

我目前正在设计一个 REST Http api。（使用 HATEOAS 的东西，让客户“更简单”，避免客户做复杂的事情，而不是让 api 告诉他们该做什么......）

由于应用程序的社交特性，为了与应用程序交互，需要对用户进行身份验证，每个用户对数据的“视图”都会略有不同。我们以推特为例，它对每个人都会更容易。

为了对用户进行身份验证，我们将使用 OAuth，很简单。

因此，在客户端（ios 应用程序...）中，随机用户可能会看到一个用户列表，应该看到：

```
Adrien: Following
John:   Not Following
Rambo:  Not Following 
```

另一个用户可能会看到：

```
Adrien: Following
John:   Not Following
Rambo:  Following 
```

为了实现这一点，第一个解决方案是客户端（在 oauth 术语中，iphone/web/etc 应用程序）获取经过身份验证的用户关注的所有用户的列表，并且每次客户端显示列表时，比较每个具有关注用户列表的用户，以了解它是否应该显示“未关注”或“关注”。

请求/响应将是：

```
GET /users
Authorization: OAuth token...

[
  {"id": 1, "name": "Adrien"},
  {"id": 2, "name": "John"},
  {"id": 3, "name": "Rambo"}
] 
```

和

```
GET /users/{myid}/following
Authorization: OAuth token...

[1, 3, 25, 1210, 9] 
```

这似乎是相当的，无国籍的。好的。

现在，如果我想让客户端开发人员的生活更轻松，并直接在用户列表响应中嵌入每个用户相对于经过身份验证的用户的关系，该怎么办：

```
GET /users
Authorization: OAuth token...

[
  {"id": 1, "name": "Adrien", "relationship": "Following"},
  {"id": 2, "name": "John", "relationship": "Not Following"},
  {"id": 3, "name": "Rambo", "relationship": "Following"}
] 
```

**所以，问题：**

*   它似乎打破了“无状态”的东西，它真的打破了**REST**无状态约束吗？
*   接下来，您认为 api 这样做是好还是坏？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T23:22:51.570

您绝对应该将关系嵌入到用户列表响应中。强迫客户计算它是不好的做法。

这不会破坏 REST 的无状态约束，因为它是无状态的交互，而不是系统。服务器几乎总是必须存储和维护状态。例如，服务器将需要维护谁在关注谁的状态。

最后，我认为您并没有完全理解 Hypermedia 作为应用程序**状态**引擎的“状态”部分。基本上，资源是状态机。当您`GET`使用资源时，呈现的有效状态转换在响应中具有超媒体控件（链接和表单）。通过这些链接并提交表单，客户可以更改这些资源的状态。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T15:08:09.253

在响应正文中包含关系类型的描述并没有打破无状态约束。无状态约束意味着 Web 服务器可以响应请求而不依赖于任何先前的请求（正如[Tom](https://stackoverflow.com/a/11596590/241294)、[Jacob](https://stackoverflow.com/a/11596651/241294)和[kgb](https://stackoverflow.com/a/11538298/241294)所提到的）。

我没有资格说您所做的是否是“最佳实践”，但总的来说，Roy 给出了以下支持和反对使您的 API 无状态的原因（参见他的[论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)的第 5.1.3 节）。就像生活中的许多事情一样，需要权衡取舍：

### 无状态系统的问题

*   请求可能需要更大。由于请求之间没有将数据存储在服务器上，因此每个请求可能需要一遍又一遍地包含相同的内容。

*   在无状态系统中，服务器依赖于客户端正确维护状态。

### 无状态系统的好处

*   您仅根据请求的内容就知道请求试图实现什么。

*   可靠性，因为它“简化了从部分故障中恢复的任务”。有关更多信息，请参阅[Roys 论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)中引用的[参考文献 133](https://labs.oracle.com/techrep/1994/smli_tr-94-29.ps "分布式计算注意事项")。

*   改进的可扩展性。管理请求之间的状态，尤其是在分布式环境中，可能非常复杂。这里首先想到的是[ASP.NET InProc session state](https://stackoverflow.com/a/4857241/241294)，它适用于单个服务器、单个进程实例，但它不能很好地扩展。

### RESTful 资源

此外，根据 Roy 对资源的定义，我对我认为您定义资源的方式提出质疑，每个用户*对数据的“视图”略有不同*。Roy 将资源定义为随时间变化的隶属函数（参见[论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)中的第 5.2.1.1 节）。您在上面定义的用户列表资源因时间和 Authorization 标头而异。两个不同的客户端同时请求 /users 很可能会得到完全不同的结果。~~这将使缓存结果更加困难。~~

**编辑：**使用 HTTP 变化标头将允许它被缓存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T09:29:45.727

如果您认为向打破无状态约束的用户添加“关系”属性，那么在请求中包含“/following”时添加它也会破坏它。

我会说“无状态”意味着没有响应取决于其他请求/响应。

HTTP 是一种[无状态](http://en.wikipedia.org/wiki/Stateless_protocol)协议，但它可以在请求/响应标头中存储大量有关用户的数据（我不是在谈论会话/cookies）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T23:35:30.907

来自 Roy Fieldings*架构风格和基于网络的软件架构的设计*：

```
3.4.3 Client-Stateless-Server (CSS)

The client-stateless-server style derives from client-server with the additional
constraint that no session state is allowed on the server component. 
Each request from client to server must contain all of the information necessary 
to understand the request, and cannot take advantage of any stored context on 
the server. Session state is kept entirely on the client. 
```

链接： http: [//www.ics.uci.edu/~fielding/pubs/dissertation/top.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)

因此，您直接在响应中嵌入实体数据不会使您的解决方案成为无状态的。

关于良好做法：

实际提供用户数据比提供数字列表让客户弄清楚如何处理要好得多。

但是，根据每个用户的数据量，您可以考虑提供指向用户资源的链接列表并声明“关注”关系。然后客户端可以获取所需用户的详细信息。您选择哪种解决方案应取决于您认为客户将需要什么，您最终可能会使用多种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T12:53:52.887

我没有看到将“关系”信息嵌入`/users`资源和无状态约束之间的相关性。所以我认为没有问题。

但是，我认为您正在打破“资源识别”约束。

`/Users`对你和`/Users`对我来说，这将展示一组完全不同的关系。我认为这是两种不同的资源，因此应该有不同的 URI。

在某些情况下，您可以根据用户是谁（例如出于安全原因）更改表示，但这种情况对我来说变化太大了。

# python - 使用 Python 获取 Outlook 联系人

> ID：11537808
> 
> 赞同：5
> 
> 时间：2012-07-18T09:03:08.323
> 
> 标签：python, outlook

我的任务是使用 Python 从 (Microsoft)Outlook 中获取所有联系人。我试过这个：

```
import win32com.client
object = win32com.client.Dispatch("Outlook.Application")
ns = object.GetNamespace("MAPI")
print ns 
```

它给了我输出：

```
<win32com.gen_py.Microsoft Outlook 12.0 Object Library._NameSpace instance at 0x12528376> 
```

我知道这`ns`现在是一个对象，但它能让我访问`Outlook`联系人吗？如果是，那么我应该如何获取联系人？
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:14:59.453

```
import win32com.client
import pywintypes

o = win32com.client.Dispatch("Outlook.Application")
ns = o.GetNamespace("MAPI")
profile = ns.Folders.Item("Profile Name")
contacts = profile.Folders.Item("Contacts") 
```

# javascript - 使用 jquery 检查互联网是否处于活动状态

> ID：11537810
> 
> 赞同：1
> 
> 时间：2012-07-18T09:03:22.080
> 
> 标签：javascript, jquery, listener, internet-connection

我有以下侦听器来检查用户是否有活动的互联网连接：

```
$(function() {  
$( window ).bind(
        "online offline",
        function( event ){
          console.log("-------------------window bind------------------------------");
            if(hasInternets()){
                console.log("window bind online---------------------------------------------");
                sendAllPendingData();
            }else {
                console.log("window bind offline--------------------------------------------");
            }
        }
        );

});

function hasInternets() {
    console.log("hasInternets: " + window.location.href.split("?")[0] + "?" + Math.random());
    var s = $.ajax({ 
        type: "HEAD",
        url: window.location.href.split("?")[0] + "?" + Math.random(),
        async: false
    }).status;
        console.log("s: " +s);
    //thx http://www.louisremi.com/2011/04/22/navigator-online-alternative-serverreachable/ 
    return s >= 200 && s < 300 || s === 304;
} 
```

它在我的笔记本电脑上运行良好。我不确定它在其他机器和设备上是否正常工作。我对这些东西不熟悉。因此，如果有人可以提供建议，我将不胜感激。顺便说一句，在我做研究的时候，我在 jquery 插件上偶然发现了这个 TrueOnline，有人试过吗？ [http://archive.plugins.jquery.com/project/trueonline](http://archive.plugins.jquery.com/project/trueonline)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:07:17.620

`online`&事件是 HTML5的`offline`一部分，因此不适用于旧版浏览器。

要支持这些浏览器，您应该`hasInternets()`定期启动（例如 via `setInterval`），并根据响应是否成功做出相应的响应。

您也可能知道`window.navigator.onLine`，但请注意[浏览器变体/错误的数量惊人](https://developer.mozilla.org/en/DOM/window.navigator.onLine#Browser_compatibility)；所以这是我会尽量避免的属性。

# c# - 如何在字符串中找到子字符串？

> ID：11537813
> 
> 赞同：-8
> 
> 时间：2012-07-18T09:03:26.963
> 
> 标签：c#, asp.net, .net

我收到 EmailIds 输入，例如“companyby_1234@gmail.com”、“companyby_1256@gmail.com”，并希望找到包含文本“companyby”的电子邮件 ID 并过滤它们，但我不知道它在字符串中的位置.

我想做这个检查 c# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:07:33.083

使用 lambda 表达式

```
var filteredList = IEnumerable<Emails>.Where(email => email.Contains(companyby)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:13:34.377

包含对于大量数据来说太慢了，而且它也匹配域和中间事件。

所以使用 StartsWith

```
System.Data.DataTable dt = //Whatever
foreach(System.Data.DataRow dr in dt.Rows)
{
    //string email = dr("email");
    string email = "companyby_1234@gmail.com";

    if (email != null && email.StartsWith("companyby", StringComparison.OrdinalIgnoreCase)) {
        // do whatever here
    }
} 
```

使用 Linq：

```
var filteredList = IEnumerable<Emails>.Where(email =>  email != null ? email.StartsWith("companyby", StringComparison.OrdinalIgnoreCase) : false) 
```

对于 Linq，您需要 .NET Framework > 3.0 并且需要添加

```
using System.Data;
using System.Linq; 
```

因为里面有扩展方法。

# javascript - JavaScript/jQuery 悬停函数的行为很有趣 - 数组问题？

> ID：11537815
> 
> 赞同：1
> 
> 时间：2012-07-18T09:03:30.897
> 
> 标签：javascript, jquery, html, css, animation

所以我有这个代码：

**HTML**

```
<p id="lorem">
    <span class="red" id="n01">L</span>
    <span class="red" id="n02">o</span>
    <span id="n03">r</span>
    <span id="n04">e</span>
    <span class="blue" id="n05">m</span> 
    <span id="n06">i</span>
    <span class="blue" id="n07">p</span>
    <span class="red" id="n08">s</span>
    <span id="n09">u</span>
    <span class="blue" id="n10">m</span>
</p>

<br />

<div id="bar-red"></div>
<div id="bar-blue"></div> 
```

**JS**

```
function legend( elem ) {
    var timer;
    var k;
    var h = $( elem );

    if( elem == ".red" ) {
        k = $("#bar-red");
    }

    if( elem == ".blue" ) {
        k = $("#bar-blue");
    }

    h.hover(function() {
        console.log(h);
        if(timer) {
            clearTimeout(timer);
            timer = null
        }

        timer = setTimeout(function(){
            k.animate({width: "30px"}, 200);
        }, 300)
    },
    function(){
            k.animate({width: "10px"}, 200);
    });
}

legend(".blue");
legend(".red"); 
```

为了更好地理解这个问题，我还创建了一个[Fiddle](http://jsfiddle.net/QR76j/)。​ 当您将鼠标悬停在一个蓝色字母上并让鼠标在那里停留一小段时间时，蓝色条会扩展。红色字母和红色条也是如此。问题是，有时会出现滞后，栏保持扩展或不会真正扩展。为什么会这样？

在我的生产环境中，我有大约 150 个字母，并且悬停基本上无法使用。或者这可能是因为我动态添加了类（而不是在 Fiddle 中）？

此外，在使用 Firebug 进行调试时，我发现了一些奇怪的东西。我将鼠标悬停在一个元素上并记录 h，它显示了该类的所有元素。这就是为什么我认为我可能在这个函数中有某种逻辑错误。也许它一次触发多次，这就是它滞后的原因？

任何举行表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:16:54.477

您不需要使用计时器来防止鼠标悬停动画冲突，[stop()](http://api.jquery.com/stop/)方法就可以了。您也可以尝试 stop(true,false) / stop(false,true) 来找到问题的最佳解决方案。

如果您坚持使用计时器，请查看我的答案的编辑版本。最后一个我用计时器做的。

[这是jsfiddle。](http://jsfiddle.net/QR76j/9/)

```
h.bind({
  mouseenter: function() {
     k.stop().animate({width: "30px"}, 200);
  },
  mouseleave:    function(){
     k.stop().animate({width: "10px"}, 200);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:15:28.160

试试这个代码，

```
 function legend( elem ) {
    var timer;
    var k;
    var h = $( elem );

    if( elem == ".red" ) {
        k = $("#bar-red");
    }

    if( elem == ".blue" ) {
        k = $("#bar-blue");
    }

    h.hover(function() {
        /*console.log(h);
        if(timer) {
            clearTimeout(timer);
            timer = null
        }*/
        k.stop().animate({width: "30px"}, 200);
       /* timer = setTimeout(function(){
            k.animate({width: "30px"}, 200);
        }, 300)*/
    },
    function(){
            k.stop().animate({width: "10px"}, 200);
    });
}

legend(".blue");
legend(".red"); 
```

# java - OSGI：是否可以在不激活捆绑包的情况下导入包？

> ID：11537817
> 
> 赞同：2
> 
> 时间：2012-07-18T09:03:41.813
> 
> 标签：java, osgi

是否可以从另一个包中导入包而不调用其激活器？这个包不需要任何捆绑初始化。我知道这是一个糟糕的设计，但我无法改变它。

例外：

```
org.osgi.framework.BundleException: The activator my-package.Activator for bundle my-bundle is invalid
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:157)  
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:750)  
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:352)  
at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:370)  
at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1068)  
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:557)  
at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:464)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:248)  
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:445)  
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:220)  
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:330) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:39:49.327

是的，这是可能的，这是 OSGi 规范允许的，这甚至不是坏习惯。

让我看看我是否理解你的正确。您有包 A，它在其清单中导出一个包，以及包 B，它导入它。您想在不启动捆绑包 A 的情况下做到这一点，对吗？

是的，这是可能的。如果 bundle A 的唯一目的是提供一些 java 类和包，比如库，它甚至可能没有激活器。根据 OSGi 规范，捆绑包的所有导出包在捆绑包进入已解决状态（即已安装，依赖关系已解决，但尚未启动）后立即可供其他捆绑包使用。

使用捆绑包 A 的捆绑包 B 的状态无关紧要。包 B 是否使用导入包中的类也无关紧要。您也不必做任何特别的事情，只需以通常的 OSGi 方式声明依赖项：

Bundle A 清单：Export-Package: com.acme.aaa

Bundle B 清单：Import-Package: com.acme.aaa

您应该安装 bundle A 并检查它是否已进入 RESOLVED 状态，即系统是否满足其依赖关系。如果是，您可以这样保留它并在捆绑包 B 中使用它。

上面的人可能会将导入包与在 OSGi 中使用 SERVICE 混淆。提供 SERVICE（即“实时”java 对象）需要启动包并调用其激活器。只是导出包不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:08:17.000

根据[OSGi 规范](http://www.osgi.org/Design/LazyStart)，这是不可能的。您唯一的选择是急切激活和延迟激活，这两种方法都发生在您观察捆绑包中的任何类之前。

顺便说一句，如果您真的只是导入一个包而没有引用任何类，那么延迟激活的包将不会被激活。不过，我怀疑这是你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:11:37.717

如果捆绑包处于已解决状态，您可以导入它的包，它尚未启动（还没有？）。

所以：只需安装捆绑包，不要启动它。我想这取决于上下文是否是一个好主意。

# ios - iPhone 应用程序运行时的内存泄漏检测

> ID：11537818
> 
> 赞同：1
> 
> 时间：2012-07-18T09:03:45.000
> 
> 标签：ios, objective-c, cocoa-touch, memory, memory-leaks

有没有办法以编程方式在 iPhone 应用程序运行时找出内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:06:42.600

也许不是以编程方式......但是有与 Instruments 和 XCode 捆绑在一起的[Leaks 工具。](http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:13:11.600

您可以使用 vm_statics 对象以编程方式查找当前内存统计信息。通过这些链接找到 vm_statistics 的实现：

1)http://gamesfromwithin.com/whered-that-memory-go

2)http://landonf.bikemonkey.org/code/iphone/Determining_Available_Memory.20081203.html

# java - 扫描目录并在textview中显示

> ID：11537820
> 
> 赞同：0
> 
> 时间：2012-07-18T09:03:52.527
> 
> 标签：java, android

我正在递归扫描目录，但我想在 TextView 中显示扫描的文件。我正在使用线程，但无法在 textView 中显示文件名。你能给我一个例子吗？

```
new Thread(new Runnable() { 
    public void run(){
        fw.walk(new File("/"));
    }

}).start();

for (File f : list) {
    if (f.isDirectory()) {
        walk(f);
    } else {
        Log.d("sdf", "File: " + f.getAbsoluteFile());

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:22:40.037

使用此代码.. 它从根目录开始，递归地遍历所有目录和子目录以在文本视图中打印文件名。

根据您的需要格式化文本输出。这是逻辑...

* * *

更新：好的，我忍不住自己尝试一下，这是工作代码。

这是 AsyncTask 内部类，在您拥有 textView 的活动中定义它，您必须在其中显示文件名。AsyncTask 类使用上面给定的函数，所以在同一个活动中保持原样。

```
private class fileNames extends AsyncTask<String, Integer, String> {
    TextView tv,tv_temp;
    File f;
    ProgressDialog pg;

    public fileNames(File f,TextView tv, Context c) {
this.f=f;
this.tv=tv;
tv_temp=new TextView(c);
pg =new ProgressDialog(c);
    }

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();

    pg.setTitle("loading");
    pg.show();
}

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        System.out.println("Start : fileNames : doInBackground");
        printFileNames(f,tv_temp);

        return tv_temp.getText().toString();

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        tv.setText(result);
        pg.dismiss();

    }

} 
```

功能定义：

```
public void printFileNames(File fName,TextView tv){
    int count=0;
    if(fName.listFiles()!=null)
    for (File f : fName.listFiles()) {
        if (f.isDirectory()){

            String name = f.getName();
            System.out.println("Dir:"+ name + "\n" );
            tv.setText(tv.getText().toString()+"\n" + "Dir:"+ name + "\n" );
            printFileNames(f, tv);
         }else{
             String name = f.getName();
             System.out.println("    File:"+ name +"\n" );
                tv.setText(tv.getText().toString()+ "    File:"+ name +"\n" );
                count++;

         }

    }
    } 
```

将此代码放在 Activity 中的任何位置，[在您的 onCreate() 中，例如]：

```
TextView fileNameTextView = (TextView)findViewById(R.id.thisfile);
File sdCardRoot = Environment.getExternalStorageDirectory();
new fileNames(sdCardRoot,fileNameTextView ,YourCurrentActivity.this).execute(); 
```

# tridion - 如何从当前的自动化活动中设置下一个活动？

> ID：11537828
> 
> 赞同：10
> 
> 时间：2012-07-18T09:04:11.690
> 
> 标签：tridion, tridion-2011

我正在尝试从当前活动中决定下一个活动（自动决策活动）以下是我的代码。如何设置下一个活动？

```
public void DebugUserCheck(string workitemid)
{
  CoreServiceSession client = new CoreServiceSession();
  SessionAwareCoreServiceClient csClient = client.GetClient();
  var readoption = new ReadOptions();
  WorkItemData workitem = (WorkItemData)csClient.Read(workitemid, readoption);          

  ActivityInstanceData currentactivity = (ActivityInstanceData)csClient.Read(workitem.Activity.IdRef, readoption);
  TridionActivityDefinitionData activitydefinition = (TridionActivityDefinitionData)csClient.Read(currentactivity.ActivityDefinition.IdRef, readoption);
  ProcessDefinitionData processdefinition = (ProcessDefinitionData)csClient.Read(activitydefinition.ProcessDefinition.IdRef, readoption);
  IList<ActivityDefinitionData> activityDefinitions = new List<ActivityDefinitionData>(processdefinition.ActivityDefinitions);

  string superuseractivitytitle = "";
  string superuseractivityid = "";
  string normaluseractivitytitle = "";
  string normaluseractivityid = "";

  foreach (var activity in activityDefinitions)
  {
    if (activity.Title == "Override")
    {
      superuseractivitytitle = activity.Title;
      superuseractivityid = activity.Id;                    
    }
    if (activity.Title == "Author Decision")
    {
      normaluseractivitytitle = activity.Title;
      normaluseractivityid = activity.Id;
    }
  }

  UserData user = csClient.GetCurrentUser();

  if (user.Id == "tcm:0-141-65552")
  {
    ActivityDefinitionData nextactivity = (ActivityDefinitionData)csClient.Read(superuseractivityid, readoption);
    ActivityFinishData finishdata = new ActivityFinishData();
    finishdata.Message = "Automatic decision activity finished";
    csClient.FinishActivity(currentactivity.Id, finishdata, readoption);
  }
  else
  {
    ActivityDefinitionData nextactivity = (ActivityDefinitionData)csClient.Read(normaluseractivityid, readoption);
    ActivityFinishData finishdata = new ActivityFinishData();
    finishdata.Message = "Automatic decision activity finished";
    csClient.FinishActivity(currentactivity.Id, finishdata, readoption);
  }            

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T09:32:54.390

而不是`ActivityFinishData`使用`DecisionActivityFinishData`

```
var decisionActivityFinishData = new DecisionActivityFinishData
{
  NextActivity = new LinkToActivityDefinitionData{IdRef = "next activity ID"}
};
csClient.FinishActivity(currentactivity.Id, decisionActivityFinishData, 
                        readoption); 
```

# encoding - ffmpeg API h264 编码的视频不能在所有平台上播放

> ID：11537830
> 
> 赞同：3
> 
> 时间：2012-07-18T09:04:15.537
> 
> 标签：encoding, ffmpeg, h.264, libavcodec

**编辑：**在以前的版本中，我使用了一个非常古老的 ffmpeg API。我现在使用最新的库。问题只是略有变化，从“主要”变为“高”。

我正在使用 ffmpeg C API 在 C++ 中创建 mp4 视频。

我希望生成的视频具有“约束基线”配置文件，以便生成的视频可以在尽可能多的平台上播放，尤其是移动设备，但我每次都得到“高”配置文件，即使我对编解码器进行了硬编码profile 为**FF_PROFILE_H264_CONSTRAINED_BASELINE**。因此，该视频无法在我们所有的测试平台上播放。

这就是“ffprobe video.mp4 -show_streams”讲述我的视频流的内容：

```
 Metadata:
major_brand     : isom
minor_version   : 512
compatible_brands: isomiso2avc1mp41
creation_time   : 1970-01-01 00:00:00
encoder         : Lavf53.5.0
  Duration: 00:00:13.20, start: 0.000000, bitrate: 553 kb/s
Stream #0:0(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 320x180,
424 kb/s, 15 fps, 15 tbr, 15 tbn, 30 tbc
Metadata:
  creation_time   : 1970-01-01 00:00:00
  handler_name    : VideoHandler
Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, s16, 12
kb/s
Metadata:
  creation_time   : 1970-01-01 00:00:00
  handler_name    : SoundHandler
-------VIDEO STREAM--------
[STREAM] 
index=0
codec_name=h264
codec_long_name=H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10

profile=High <-- This should be "Constrained Baseline"

codec_type=video
codec_time_base=1/30
codec_tag_string=avc1
codec_tag=0x31637661
width=320
height=180
has_b_frames=0
sample_aspect_ratio=N/A
display_aspect_ratio=N/A
pix_fmt=yuv420p
level=30
timecode=N/A
is_avc=1
nal_length_size=4
id=N/A
r_frame_rate=15/1
avg_frame_rate=15/1
time_base=1/15
start_time=0.000000
duration=13.200000
bit_rate=424252
nb_frames=198
nb_read_frames=N/A
nb_read_packets=N/A
TAG:creation_time=1970-01-01 00:00:00
TAG:language=und
TAG:handler_name=VideoHandler
[/STREAM]
-------AUDIO STREAM--------
[STREAM]
index=1
codec_name=aac
codec_long_name=Advanced Audio Coding
profile=unknown
codec_type=audio
codec_time_base=1/44100
codec_tag_string=mp4a
codec_tag=0x6134706d
sample_fmt=s16
sample_rate=44100
channels=2
bits_per_sample=0
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/44100
start_time=0.000000
duration=13.165714
bit_rate=125301
nb_frames=567
nb_read_frames=N/A
nb_read_packets=N/A
TAG:creation_time=1970-01-01 00:00:00
TAG:language=und
TAG:handler_name=SoundHandler
[/STREAM] 
```

这是我用来添加视频流的功能。来自 ptr-> 的所有值都是从外部定义的，这些值是否必须是特定值才能获得正确的配置文件？：

```
static AVStream *add_video_stream( Cffmpeg_dll * ptr, AVFormatContext *oc, enum   CodecID codec_id )
{
AVCodecContext *c;
AVStream *st;  
AVCodec* codec;

// Get correct codec
codec = avcodec_find_encoder(codec_id);
if (!codec) {
    av_log(NULL, AV_LOG_ERROR, "%s","Video codec not found\n");
    exit(1);
}

// Create stream
st = avformat_new_stream(oc, codec);
if (!st) {
    av_log(NULL, AV_LOG_ERROR, "%s","Could not alloc stream\n");
    exit(1);
}

c = st->codec;

/* Get default values */
codec = avcodec_find_encoder(codec_id);
if (!codec) {
    av_log(NULL, AV_LOG_ERROR, "%s","Video codec not found (default values)\n");
    exit(1);
}
avcodec_get_context_defaults3(c, codec);

c->codec_id = codec_id;
c->codec_type = AVMEDIA_TYPE_VIDEO;

c->bit_rate = ptr->video_bit_rate;
av_log(NULL, AV_LOG_ERROR, " Bit rate: %i", c->bit_rate);

    c->qmin = ptr->qmin;
    c->qmax = ptr->qmax;
    c->me_method = ptr->me_method;
    c->me_subpel_quality = ptr->me_subpel_quality;
    c->i_quant_factor = ptr->i_quant_factor;
    c->qcompress = ptr->qcompress;
    c->max_qdiff = ptr->max_qdiff;

    // We need to set the level and profile to get videos that play (hopefully) on all platforms
    c->level = 30;
    c->profile = FF_PROFILE_H264_CONSTRAINED_BASELINE;

c->width = ptr->dstWidth; 
c->height = ptr->dstHeight; 

c->time_base.den = ptr->fps;
c->time_base.num = 1;
c->gop_size = ptr->fps;
c->pix_fmt = STREAM_PIX_FMT;
c->max_b_frames = 0;

// some formats want stream headers to be separate
if(oc->oformat->flags & AVFMT_GLOBALHEADER)
    c->flags |= CODEC_FLAG_GLOBAL_HEADER;

return st;
} 
```

**附加信息：**

作为参考视频，我使用 Mozilla 提供的 gizmo.mp4 作为在每个平台/浏览器上播放的示例。它绝对具有“受约束的基线”配置文件，并且绝对适用于我们所有的测试智能手机。[你可以在这里下载。](http://www.808.dk/pics/video/gizmo.mp4)我们自己制作的视频并不适用于所有平台，我相信这是因为个人资料。

在创建 mp4 之后，我还使用**qt-faststart.exe**将标题移动到文件的开头，因为这不能直接在 C++ 中以一种好的方式完成。这可能是问题吗？

显然，我做错*了什么*，但我不知道它可能是什么。我会感谢每一个提示；）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:46:28.273

我有解决办法。在 ffmpeg 错误跟踪器中花费了一些时间和讨论并浏览了配置文件设置示例后，我终于找到了解决方案。

需要使用 av_opt_set(codecContext->priv_data, "profile", "baseline" (或任何其他所需的配置文件), AV_OPT_SEARCH_CHILDREN)

所以在我的情况下，这将是：

**错误的：**

```
// We need to set the level and profile to get videos that play (hopefully) on all platforms
c->level = 30;
c->profile = FF_PROFILE_H264_CONSTRAINED_BASELINE; 
```

**正确的：**

```
// Set profile to baseline
av_opt_set(c->priv_data, "profile", "baseline", AV_OPT_SEARCH_CHILDREN); 
```

完全不直观且与 API 的其他用法相反，但这是 ffmpeg 的理念。你不需要了解它，你只需要了解如何使用它;)

# asp.net - 如何在 asp.net 应用程序中找到经过身份验证的 cookie

> ID：11537833
> 
> 赞同：1
> 
> 时间：2012-07-18T09:04:17.823
> 
> 标签：asp.net, asp.net-ajax

我是.net初学者，当登录请求以表单身份验证从客户端发送到服务器时
，服务器将在成功登录后将经过身份验证的cookie发送回客户端，每次请求cookie都会发送到服务器。

如果是的话，我们可以在浏览器上看到这个cookies吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:10:42.760

可以使用以下方式读取 Cookie：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

我认为 .NET 框架 cookie 不会暴露给客户端，但可能是错误的。一些 cookie，如果启用了设置（称为 HttpOnly）是服务器专用的 cookie，无法在客户端读取。cookie 的名称可在 web.config 的元素中配置。

HTH。

# java - \r\n 从 DB 和 Java 读取时出现编码问题

> ID：11537836
> 
> 赞同：0
> 
> 时间：2012-07-18T09:04:25.640
> 
> 标签：java, database, encoding

我有一个 Java 程序，它将“test1\r\ntest2”之类的消息存储到 DB 中——当我打印出来时，它给了我新的一行。另一个线程正在从 DB 中读取字符串并将它们发送到带有 "\r\n" 的输出，当我尝试打印它时它不会给我换行符 - 它只是打印出 "test1\r\ntest2" 我应该改变输出的编码？

该应用程序部署在具有 UTF-8 编码集的 tomcat 上。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:09:11.007

字符串实际上是否以“\r\n”的形式存储在数据库中？

在那种情况下，我认为你必须做一个

```
字符串正确 = dbString.replace("\\r\\n","\r\n")
```

从数据库返回的字符串。

# asp.net - 如何处理空值？

> ID：11537844
> 
> 赞同：0
> 
> 时间：2012-07-18T09:05:13.530
> 
> 标签：asp.net, linq, entity-framework, null, object-reference

我正在编写一个 LINQ 来从实体中选择数据。我有具有不同属性的数据列表。属性之一可以为空。所以当它为空时，它会给我一个以下错误

错误：

```
Object reference not set to instance of an object 
```

这是LINQ代码：

```
var maxName = NameLookup.Select(c => c.DESC.Length).Max() 
```

如果 DESC 具有空值，那么它也应该是可以接受的。我的意思是说我想处理它是否包含空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:06:38.783

试试这个：

```
var maxName = NameLookup.Select(c => (c.DESC != null) ? c.DESC.Length : 0).Max() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:15:00.460

```
var  maxName = NameLookup.Max(c => c.DESC!= null ? c.DESC.Length : 0); 
```

# excel - 从 R 中删除 Excel 中的列

> ID：11537846
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:05:21.750
> 
> 标签：excel, r

我有一个xls。包含以下信息的文件

![Excel文件](../Images/9d6c05446ef6db44dc5fe91b198f73dc.png)

我想从 R 列 D 和 E 中删除，当然 F 的数据向左移动。我怎么能在 R 中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:25:43.117

Read the .xls file into R with one of the several packages (eg. xlsReadWrite:read.xls()), delete the columns :

```
data$Column <- NULL 
or 
data <- data[ ,-c(4,5)] 
```

and then write the new data to a .xls file with one of the mentioned packages.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:58:26.837

您可以将其转换为 csv 文件并使用`read.csv`函数将其加载到 R 中。然后，删除您想要的列并将其保存为`write.csv`.

# vb.net - 将两个 MsgBoxStyles 与 VB.NET 合二为一

> ID：11537850
> 
> 赞同：4
> 
> 时间：2012-07-18T09:05:31.617
> 
> 标签：vb.net, winforms, button, styles

我正在尝试创建一个`MsgBox()`同时具有`MsgBoxStyle.Critical`样式和`MsgBoxStyle.RetryCancel`按钮样式的样式。到目前为止，我尝试过的是：

```
Private Sub DoSomething()
    Dim Answer as MsgBoxResult
        Answer = MsgBox("Error", MsgBoxStyle.RetryCancel & MsgBoxStyle.Critical, _
        "Some sort of error.")
    If Answer = MsgBoxResult.Retry Then
        'REM: Try code again
    Elseif Answer = MsgBoxResult.Cancel Then
        Exit Sub
    End If
End Sub 
```

这是按钮当前的样子：

![应该是重试/取消](../Images/9d831d90c8a4b18b20b66fbcc1d56da0.png)

消息框上没有`Critical`图标。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T09:10:11.787

按位“组合”称为`Or`.

```
MsgBoxStyle.RetryCancel Or MsgBoxStyle.Critical 
```

* * *

`MsgBoxStyle.RetryCancel & MsgBoxStyle.Critical`计算结果为`"5" + "16"`，计算结果为`"516"`，计算结果为`516`，神奇地等于`MsgBoxStyle.YesNo Or MsgBoxStyle.DefaultButton3`并因此被解释为这样。

不要将字符串连接运算符`&`用于按位逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T09:11:45.860

使用`MessageBox`而不是`MsgBox`. 尝试这个：

```
 Dim _result As DialogResult = MessageBox.Show("Do you want to retry", "Confirm Retry", MessageBoxButtons.RetryCancel, MessageBoxIcon.Error)
    If _result = Windows.Forms.DialogResult.Retry Then
        ' try again code
    Else

    End If 
```

![消息框示例](../Images/29ef8bd85718ada90a76261a0ea5ca7e.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-12T12:22:16.320

使用 msgbox：代替 & 使用 + 符号，例如

```
MsgBoxStyle.RetryCancel + MsgBoxStyle.Critical 
```

应该可以工作，你也可以尝试这个数字，所以 5 (RetryCancel) + 16 (Critical) = 21。例如

```
MsgBox("Error", 21, "Some sort of error.") should work. 
```

* * *

```
msgboxStyle codes:
OKOnly  = 0
OKCancel = 1
AbortRetryIgnore = 2
YesNoCancel = 3
YesNo = 4
RetryCancel = 5
Critical = 16
Question = 32
Exclamation = 48
Information = 64
DefaultButton1 = 0
DefaultButton2 = 256
DefaultButton3 = 512 
```

# css - CSS中的隐藏字符

> ID：11537851
> 
> 赞同：3
> 
> 时间：2012-07-18T09:05:34.263
> 
> 标签：css

我已经用了几个小时的代码不起作用，我找不到问题。我简化了问题以找到它。最后我找到了一个隐藏的角色，一个我看不见但让一切都出错的角色。

我真的很惊讶；如果它可以帮助某人，我会发布它。

这个隐藏的字符就在蓝色 css 之后，使后面的一切都变得不可见。如果有人删除该空间，红色就会变得可见！

我在三个地方发布这个。你可以看到这个令人惊讶的问题：

> [http://codepen.io/anon/pen/riKkn](http://codepen.io/anon/pen/riKkn)
> [http://dabblet.com/gist/3135074](http://dabblet.com/gist/3135074)
> [http://jsbin.com/exokub/edit#html,live](http://jsbin.com/exokub/edit#html,live)

对我来说，这真是令人震惊。我找了这么多小时。有谁知道为什么会这样？有没有办法让这些破坏一切的隐藏角色可见？

CSS：

```
#blue {position: absolute;width: 200px; height:100px;top: 50px;left: 150px; background-color: blue;}​

#red {position: absolute; width: 200px; height:100px;top: 200px;left: 150px; background-color:red;}​ 
```

HTML：

```
<div id="blue"></div>
<div id="red"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:13:05.533

该字符是一个 UTF-8 零宽度空格：`e2 80 8b`. 当 CSS 解析器到达这个字符时，它会停止读取文件。

解决方案就是不要把这些放在首位。它们作为 CSS 的一部分无效。如果您有需要删除的现有文件，您可以使用十六进制编辑器打开文件以识别它们的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T14:42:28.300

在尝试了很多东西之后。我找到了两个显示错误的免费编辑器：
- TextWrangler：如果我去查看 > 文本显示 > 显示不可见，它会显示一个易于删除的红色 ​¿。
- Aptana Studio：在边界显示一个红十字，在空白处显示一个点。

我仍然不知道这个空白是如何或为什么出现的。对我来说这是一个重要的问题，因为它可以折叠一个项目，并且在我当前的编辑器 Dreamweaver 中无法看到它，无论我尝试哪个版本。在 JsFiddle、Jsbin、CodePen 或 Dabblet 等协作工具中都无法检测到此空白。

正如我所说，TextWrangler 和 Aptana 是一种易于使用且免费的解决方法。如果有人可以告诉其他编辑或像我这样的非专家查看它的简单方法，那就太好了。

# linux - 如何知道Linux进程是否正在运行

> ID：11537852
> 
> 赞同：0
> 
> 时间：2012-07-18T09:05:34.170
> 
> 标签：linux, bash

给定一个pid，比如29264，如何知道进程是否在运行？

有什么简单的方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:15:36.793

`kill -0 29264`，并检查错误（如果有）

[链接到在线 linux (man 2) 手册](http://www.kernel.org/doc/man-pages/online/pages/man2/kill.2.html)

[链接到在线 linux (man 1) 手册](http://www.ma.utexas.edu/cgi-bin/man-cgi?kill%201)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:11:54.147

进程状态 ( `ps`) 提供您正在寻找的信息：

```
ps -p 29264 
```

进程运行时的输出（我的 Mac 上的快速示例，在 Linux 上的工作方式相同）：

```
PID     TIME       CMD
127     4:54.03    /System/Library/CoreServices/Finder.app/Contents/MacOS/Finder 
```

否则：

```
PID     TIME       CMD 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T09:13:09.453

获取进程状态：

```
ps -p 29264 > /dev/null; echo $? 
```

# java - 域无法使用 Api，未安装 Groups 服务

> ID：11537856
> 
> 赞同：0
> 
> 时间：2012-07-18T09:05:46.390
> 
> 标签：java, google-api, gdata-api

我正在尝试向 url [https://www.googleapis.com/groups/v1/groups/](https://www.googleapis.com/groups/v1/groups/) "+group_id 发送一个获取请求，其中组 id 是一个唯一的组 id，我希望得到一个描述设置的响应一个小组，但我得到了回应

> { "error": { "errors": [ { "domain": "global", "reason": "authError", "message": "Domain cannot use Api, Groups service is not installed.", "locationType": "header", "location": "Authorization" } ], "code": 401, "message": "Domain cannot use Api, Groups service is not installed." } }

我在我的项目 api 中启用了我的组设置 api，并且我的域中的组服务已打开，谁能告诉我为什么会收到此错误以及如何摆脱此错误？我正在使用 google 应用程序进行商业版免费试用. 这是我在java中发送get请求的java代码

```
package org.ritesh;

    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.net.HttpURLConnection;
    import java.net.MalformedURLException;
    import java.net.URL;

    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class Group_Detail extends HttpServlet{

        public void doGet(HttpServletRequest req, HttpServletResponse resp){
        resp.setContentType("text/HTML");
        String access_token=req.getParameter("access_token");
        String group_id=req.getParameter("group");
        String url="https://www.googleapis.com/groups/v1/groups/"+group_id+"?alt=json";

    URL ur;
    try {
        ur = new URL(url);
        HttpURLConnection conn=(HttpURLConnection) ur.openConnection();
        conn.setDoOutput(true); 
        conn.setRequestMethod("GET");

          conn.setRequestProperty("Authorization", "OAuth "+access_token);

          InputStream str= conn.getInputStream();
          BufferedReader reader=new BufferedReader(new InputStreamReader(str));
          String l="";
          resp.getWriter().println("<html><head>Group Detail</head><body>");
          while((l=reader.readLine())!=null)
          {resp.getWriter().println(l);

          }
         } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        }
    } 
```

我在请求参数中获得了 access_token 和 groupid ，它们肯定是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:57:18.773

当我在 45 分钟后尝试此代码时，我在问这个问题前几分钟启用了群组服务，这工作正常

# java - 构建接口以定义两个用于键入字段的最终类

> ID：11537858
> 
> 赞同：0
> 
> 时间：2012-07-18T09:05:51.953
> 
> 标签：java

我有两个`final`班：`Scanner`和`CsvReader`。

我想要一个字段：`private MyInterface scan;`能够接收*Scanner 实例*或*CsvReader 实例*，并且只有那些类型。

如何构建*MyInterface*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:17:14.480

最好的解决方案是提供工厂方法，这些方法采用 Scanner 或 CsvReader 并创建匿名类，将行为委托给它们。

```
interface MyInterface {
        void read();
    }

public class TestClass {

    class CsvReader {
        public void read() {
            System.out.println("CSV reader is reading");
        }
    }

    class Scanner {
        public void read() {
            System.out.println("Scanner is reading");
        }
    }

    public static MyInterface newInstance(final CsvReader reader) {
        return new MyInterface() {
            @Override
            public void read() {
                reader.read();
            }
        };
    }

    public static MyInterface newInstance(final Scanner scanner){
        return new MyInterface() {
            @Override
            public void read() {
                scanner.read();
            }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:07:48.073

您需要同时拥有`Scanner`并`CsvReader`实施`MyInterface`.

然后你可以`MyInterface`通过包含所有方法来构建`Scanner`并`CsvReader`共享 - 例如一个`read`方法。

现在你可以写：

```
MyInterface scan1 = new Scanner();
MyInterface scan2 = new CsvReader();

scan1.read();
scan2.read(); 
```

# java - java中整数和字符串的通用属性类型

> ID：11537861
> 
> 赞同：1
> 
> 时间：2012-07-18T09:05:56.587
> 
> 标签：java, hibernate

我创建了一个方法，其参数为 Integer 以使用休眠从 Db 获取数据库记录。现在我有相同场景的字符串类型参数。我可以将该方法签名更改为可序列化以支持整数和字符串吗？如果我将 Serializable 作为方法参数，会有什么问题吗？

```
public Object get(final Class classObject, final Serializable id)
            throws PersistenceException {
        LOGGER.debug(LOG_PREFIX + "get::Begin");
        Object obj = this.runInSession(new PersistentUnitOfWork() {
            public Object run() throws PersistenceException {
                return getPersistenceContext().get(classObject, id);
            }
        });
        LOGGER.debug(LOG_PREFIX + "get::End");
        return obj;
    } 
```

有什么问题是因为这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:09:59.963

如果您使用 Hibernate API，则会话的 get 方法支持可序列化类型的 id。如果 API 正式支持，我预计不会出现任何问题

[http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#get(java.lang.Class,java.io.Serializable](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#get(java.lang.Class,java.io.Serializable)

如果你不能使用它，拥有这样一个 API 又有什么意义呢？

# android - onFling 在 vi ewSwitcher 中的工作原理

> ID：11537863
> 
> 赞同：0
> 
> 时间：2012-07-18T09:05:55.657
> 
> 标签：android, android-2.1-eclair, onfling, viewswitcher

我在 viewSwitcher 中有 2 个布局，我需要在滑动时进行更改。

```
package slide.trys.one;

import android.app.Activity;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.widget.ViewSwitcher;

public class SlideActivity extends Activity implements OnGestureListener {

private ViewSwitcher switcher;
private GestureDetector gesturedetector = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    gesturedetector = new GestureDetector(this, this);

}

@Override
public boolean onTouchEvent(MotionEvent event) {
        return gesturedetector.onTouchEvent(event);
}

int SWIPE_MIN_VELOCITY = 100;
int SWIPE_MIN_DISTANCE = 100;

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) {

    float ev1X = e1.getX();
    float ev2X = e2.getX();

    final float xdistance = Math.abs(ev1X - ev2X);

    final float xvelocity = Math.abs(velocityX);

    if( (xvelocity > SWIPE_MIN_VELOCITY) && (xdistance > SWIPE_MIN_DISTANCE) )
    {
        if(ev1X > ev2X)
        {
            switcher.showNext(); //Error in this part
        }
        else
        {
            switcher.showPrevious(); //Error in this part
        }
    }

    return false;
}

public void onLongPress(MotionEvent e) {

}

public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,float distanceY) {
    return false;
}

public void onShowPress(MotionEvent e) {

}

public boolean onSingleTapUp(MotionEvent e) {
    return false;
}

public boolean onDown(MotionEvent e) {
    return false;
}

} 
```

我也是java和Android的新手。请帮助我，我在哪里做错了？我得到错误`switcher.showNext()`和`switcher.showPrevious()`。

请帮忙。我的例子是使用 android 4.0.3，但我需要在 2.1 上工作。我不知道如何解决这个问题。

viewSwitcher 可以在 Android 2.1 上运行吗？

我的 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ViewSwitcher
    android:id="@+id/viewSwitcher"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inAnimation="@anim/in_animation"
    android:outAnimation="@anim/out_animation" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/imageView2"
            android:contentDescription="@string/app_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/footer" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
           android:id="@+id/imageView1"
           android:contentDescription="@string/app_name"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:src="@drawable/blue_header" />

    </RelativeLayout>        

    </ViewSwitcher>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:14:55.980

更好地使用 ViewFlipper 在布局之间切换。

首先，了解 ViewFlipper 和 ViewSwitcher 的区别。此外，对于 2.1，对于 ViewFlipper，存在一个错误（直到 Android 2.3.4），解决方法在这里：

[http://daniel-codes.blogspot.com/2010/05/viewflipper-receiver-not-registered.html](http://daniel-codes.blogspot.com/2010/05/viewflipper-receiver-not-registered.html)

因此，您扩展 ViewFlipper 并解决该错误，并在 xml 中访问您的 CustomViewFlipper，如下所示：

```
<com.mypackage.MyViewFlipper
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/news_layout_flipper"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <LinearLayout
        android:id="@+id/first_to_show">
    </LinearLayout>
    <LinearLayout
        android:id="@+id/second_to_show">
    </LinearLayout>
</com.mypackage.MyViewFlipper> 
```

# winforms - 一个表单的多个实例的控件

> ID：11537866
> 
> 赞同：0
> 
> 时间：2012-07-18T09:06:11.630
> 
> 标签：winforms

我有一个 WinForms 应用程序（使用 DevExpress v 10.2）。我必须解决以下任务。我有一个“子”表单——它由几个控件组成，可以封装成一个控件；让我们称之为“儿童控制”。

我需要创建一个包含一系列“子”表单实例的“父”表单。“孩子”位于父表单中，从上到下播种。换句话说，每个“子控件”都占据了父窗体的整个宽度；第一个“子控件”位于父表单的顶部；第二个“儿童控制”位于第一个下方，依此类推。

“子控件”的数量是几十个，所以父窗体应该有垂直滚动。

实现这一点的最佳方法是什么 - 使用标准 WinForms 控件，或者 DevExpress WinForms 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:10:56.450

查看 FlowLayoutPanel 或 TableLayoutPanel。要么会按照你的建议去做。

# python - 在 numpy 中正确执行以下操作的正确方法

> ID：11537869
> 
> 赞同：2
> 
> 时间：2012-07-18T09:06:21.777
> 
> 标签：python, numpy

我有一个有趣的谜题。假设您有一个 numpy 二维数组，其中每一行对应一个测量事件，每一列对应不同的测量变量。此数组中的另一列指定进行测量的日期。这些行根据时间戳进行排序。每天有几次（或多次）测量。目标是识别对应于新一天的行，并从当天的后续行中减去相应的值。

我通过一个循环来解决这个问题，该循环在几天内循环，创建一个布尔向量来选择正确的行，然后减去第一条选定的行。这种方法有效，但感觉不优雅。有没有更好的方法来做到这一点？

只是一个小例子。下面的行定义了一个矩阵，其中第一列是日期，其余两列是测量值

```
before = array([[ 1,  1,  2],
   [ 1,  3,  4],
   [ 1,  5,  6],
   [ 2,  7,  8],
   [ 3,  9, 10],
   [ 3, 11, 12],
   [ 3, 13, 14]]) 
```

在该过程结束时，我希望看到以下数组：

```
array([[1, 0, 0],
   [1, 2, 2],
   [1, 4, 4],
   [2, 0, 0],
   [3, 0, 0],
   [3, 2, 2],
   [3, 4, 4]]) 
```

PS 请帮我为这篇文章找到一个更好、信息更丰富的标题。我没主意了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:14:58.787

[`numpy.searchsorted`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html) is a convenient function for this:

```
In : before
Out:
array([[ 1,  1,  2],
       [ 1,  3,  4],
       [ 1,  5,  6],
       [ 2,  7,  8],
       [ 3,  9, 10],
       [ 3, 11, 12],
       [ 3, 13, 14]])

In : diff = before[before[:,0].searchsorted(x[:,0])]

In : diff[:,0] = 0

In : before - diff
Out:
array([[1, 0, 0],
       [1, 2, 2],
       [1, 4, 4],
       [2, 0, 0],
       [3, 0, 0],
       [3, 2, 2],
       [3, 4, 4]]) 
```

**Longer explanation**

If you take the first column, and search for itself you get the minimum indices for those particular values:

```
In : before
Out:
array([[ 1,  1,  2],
       [ 1,  3,  4],
       [ 1,  5,  6],
       [ 2,  7,  8],
       [ 3,  9, 10],
       [ 3, 11, 12],
       [ 3, 13, 14]])

In : before[:,0].searchsorted(x[:,0])
Out: array([0, 0, 0, 3, 4, 4, 4]) 
```

You can then use this to construct the matrix that you will subtract by indexing:

```
In : diff = before[before[:,0].searchsorted(x[:,0])]

In : diff
Out:
array([[ 1,  1,  2],
       [ 1,  1,  2],
       [ 1,  1,  2],
       [ 2,  7,  8],
       [ 3,  9, 10],
       [ 3,  9, 10],
       [ 3,  9, 10]]) 
```

You need to make the first column `0` so that they won't be subtracted.

```
In : diff[:,0] = 0

In : diff
Out:
array([[ 0,  1,  2],
       [ 0,  1,  2],
       [ 0,  1,  2],
       [ 0,  7,  8],
       [ 0,  9, 10],
       [ 0,  9, 10],
       [ 0,  9, 10]]) 
```

Finally, subtract two matrices to get the desired output:

```
In : before - diff
Out:
array([[1, 0, 0],
       [1, 2, 2],
       [1, 4, 4],
       [2, 0, 0],
       [3, 0, 0],
       [3, 2, 2],
       [3, 4, 4]]) 
```

# php - 如何停止 json_encode() 编码两次？

> ID：11537871
> 
> 赞同：0
> 
> 时间：2012-07-18T09:06:24.057
> 
> 标签：php, pdo, json

```
$file_db = new PDO('sqlite:test.db');
if($file_db){
    $result = $file_db->query('SELECT id FROM sample');
    $encodable = array();
    while($obj = $result->fetch())
    {
        $encodable[] = $obj;
    }

    $encoded = json_encode($encodable);
    echo $encoded;
}else{
    die("unable to conenct to db");
} 
```

我只想输出`{"id":"1"}`，但它也给了我`"0":"1"`. 有谁知道为什么？

结果：

```
[{"id":"1","0":"1"},{"id":"2","0":"2"},{"id":"3","0":"3"},{"id":"4","0":"4"},{"id":"5","0":"5"},{"id":"6","0":"6"},{"id":"7","0":"7"},{"id":"8","0":"8"},{"id":"9","0":"9"},{"id":"10","0":"10"},{"id":"11","0":"11"},{"id":"12","0":"12"},{"id":"13","0":"13"},{"id":"14","0":"14"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:12:14.767

是因为您使用 PDO 获取数据的方式。[`PDOStatement::fetch`](http://php.net/manual/en/pdostatement.fetch.php)使您可以选择是否需要关联数组、索引数组等。默认是两者都有。将其更改为具有您期望的行为：

`while($obj = $result->fetch(PDO::FETCH_ASSOC))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:09:34.690

从数据库返回的 $encodable 包含所有值的索引（数字）和键（列名）。因此，它为键提供一次，为索引提供一次。

您可以迭代结果并将所需的值推送到数组中。然后对其进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:09:54.617

尝试更改此行

```
while($obj = $result->fetch()) 
```

至

```
while($obj = $result->fetch(PDO::FETCH_ASSOC)) 
```

来自 fetch() 常量的 php 文档
*控制如何将下一行返回给调用者。此值必须是 PDO::FETCH_* 常量之一，默认为 PDO::FETCH_BOTH。*

* * *

***PDO::FETCH_ASSOC:**返回一个按列名索引的数组，如结果集中返回的那样*

# php - javascript 从选定的国家/地区值中选择城市

> ID：11537872
> 
> 赞同：0
> 
> 时间：2012-07-18T09:06:26.987
> 
> 标签：php, javascript, jquery, ajax, json

我有来自这里的国家数据库[http://www.webmasterworld.com/html/3018309.htm](http://www.webmasterworld.com/html/3018309.htm) 有 239 个国家，每个国家都有价值。在选项中选择了另一个国家后，如何使用新值的区域更新区域列表？

```
$country_query = mysql_query("SELECT * FROM country WHERE status = '1' ORDER BY name ASC");
$zone_query = mysql_query("SELECT * FROM zone WHERE country_id = '" . (int)$country_id . "' AND status = '1'");

<select name="country_id">
          <option value=""><?php echo '$text_select;' ?></option>
          <?php while ($country=mysql_fetch_array($country_query)) { ?>
          <?php if ($country['country_id'] == $country_id) { ?>
          <option value="<?php echo $country['country_id']; ?>" selected="selected"><?php echo $country['name']; ?></option>
          <?php } else { ?>
          <option value="<?php echo $country['country_id']; ?>"><?php echo $country['name']; ?></option>
          <?php } ?>
          <?php } ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:40:40.580

第一次默认加载县列表..加载区域使用这个

```
<select name="country" id='country'>
          <option value=""><?php echo '$text_select;' ?></option>
          <?php while ($country=mysql_fetch_array($country_query)) { ?>
          <?php if ($country['country_id'] == $country_id) { ?>
          <option value="<?php echo $country['country_id']; ?>" selected="selected"><?php echo $country['name']; ?></option>
          <?php } else { ?>
          <option value="<?php echo $country['country_id']; ?>"><?php echo $country['name']; ?></option>
          <?php } ?>
          <?php } ?>
</select> 
```

这里需要在国家改变时调用ajax

**查询：**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){

    $('#country').change(function(){

        $.post('ajax/getZones', 
                   {Country : $('#country').val()}, 
                   function(response){
                     //prepare the zones html code
                     //write that code to zone dropdown 
                  }, 'json');

    });

});
</script> 
```

这里**'ajax/getZones'**指**getZones**是**ajax**控制器中的方法

**在getZones** (ajax)中编写 getZones 查询在ajax 控制器中使用**$_POST['Country']**获取 Country id

尝试实现ajax控制器一切正常..

# python - Python 随着时间的推移失去了写入磁盘的性能

> ID：11537873
> 
> 赞同：0
> 
> 时间：2012-07-18T09:06:29.047
> 
> 标签：python, file, data-mining, shelve

我编写了一个代码来从一个非常大的数据文件中获取输入，对其执行一些简单的处理，然后将其存储为搁置字典格式。我有 4100 万个条目要处理。但是，在我将 3500 万个条目写入搁置字典后，性能突然下降并最终完全停止。知道我能做些什么来避免这种情况吗？

我的数据在 twitter 上，它将用户屏幕名称映射到他们的 ID。像这样：

```
Jack 12
Mary 13
Bob 15 
```

我需要非常快速地按名称访问其中的每一个。喜欢：当我给`my_dict[Jack]`它时返回`12`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:43:34.163

考虑使用更底层的东西。不幸的是，搁置性能可能非常低。不过，这并不能解释您所看到的减速。

对于许多基于磁盘的索引，如果您可以将它们初始化为预期的大小，这将有所*帮助*，因此它们不需要即时重新组织自己。我已经看到这对各种库中的磁盘哈希表具有*巨大*的性能影响。

至于您的实际目标，请查看：

[http://docs.python.org/library/persistence.html](http://docs.python.org/library/persistence.html)

特别是`gdbm, dbhash, bsddb, dumbdbm`和`sqlite3`模块。

`sqlite3`可能不是最快的，但最容易使用的。毕竟，它有一个命令行 SQL 客户端。`bsddb`可能更快，特别是如果您`nelem`根据数据大小调整和类似参数。它也有很多语言绑定；可能甚至超过 sqlite。

尝试*创建*初始大小为 4100 万的数据库，以便针对此大小进行优化！

# javascript - 如何使用 JavaScript 或 jQuery 提供预览功能？

> ID：11537879
> 
> 赞同：0
> 
> 时间：2012-07-18T09:06:41.827
> 
> 标签：javascript, jquery, ajax, live-preview, preview-pane

我有 3 个模板（静态 html 页面）。

根据我的选择，一个模板将以弹出窗口的形式打开。当我想以弹出窗口的形式显示该模板时，我必须向该模板添加一些内容。现在我正在使用 using 展示该模板`window.open(url)`。

但是我无法在以弹出窗口的形式显示时将内容添加到该模板（当我单击表单中的“**预览**”按钮时，弹出窗口将生成带有一些表单数据的预定义 HTML 模板）。

基本上我正在寻找使用 JavaScript 或 jQuery 的预览功能，所以请提供相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:12:49.023

创建一个 test.html 页面并将此代码粘贴到 HTML 文档的 HEAD 部分。

```
function displayHTML(form) {
  var inf = form.htmlArea.value;
  win = window.open(", ", 'popup', 'toolbar = no, status = no');
  win.document.write("" + inf + "");
} 
```

将此代码粘贴到 HTML 文档的 BODY 部分

```
<form>
  <textarea name="htmlArea" cols=45 rows=6></textarea>
  <br>
  <input type="button" value=" view " onclick="displayHTML(this.form)">
</form> 
```

在浏览器中测试它..

如果发现有帮助，请在您的代码中执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:13:10.007

如果你使用`window.open()`你可以给你的窗口一个名字，然后操作那个窗口的内容：

```
var win = window.open(url, 'mywindow');
win.document.write('<h1>Popup Test!</h1>'); 
```

如果名称为“mywindow”的窗口不存在，它将打开一个新窗口，否则将使用现有窗口

# c# - 如何使用 c# winform 将 10,000 行数据从存储过程移动到 excel

> ID：11537886
> 
> 赞同：4
> 
> 时间：2012-07-18T09:07:07.750
> 
> 标签：c#, sql-server, winforms, excel, openxml

情况如下——

*   UserX 想要有关 PlayerY 的信息。
*   目前，我获得了有关 PlayerY 的详细信息并运行了两个返回两个数据集的 sql 脚本——每个数据集大约有 10,000 条记录。
*   然后，我手动将这些集合复制并粘贴到 Excel 工作簿中，并将其通过电子邮件发送给 UserX

目前计划的方法：

1.  我将为 UserX 创建一个简单的 WinForm 或 WPF，它将接受 PlayerY 的详细信息的输入。
2.  我将创建两个接受表单输入的存储过程。

数据如何从数据库到 UserX 的客户端？

我问是因为数据集非常大，并且由于规模的原因，某些方法可能会出现无法预料的问题。存储过程是否应该首先将数据移动到实际的服务器表中，然后再进行第二步并将数据从服务器表移动到 Excel 中？还是应该让存储过程返回数据集，因为无需任何中间服务器表就可以很容易地将它们直接移动到 XL 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:57:18.213

如果您打算通过 c# 获取记录，

而不是一次获取 10000 条或更多记录，而是获取特定的编号。记录例如 1000、10 次。这将使过程更快和更少的内存负载。

您不需要创建任何中间服务器表来存储数据集。

使用 C# 中的 DocumentFormat.OpenXml.Spreadsheet，您可以将该数据集写入 Xlsx 格式或使用 System.xml 创建 xml 文件或使用第三方工具/创建自己的 excel xml，以创建 xls 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:33:40.467

我建议您使用 C# 根据存储过程在运行时返回的结果创建 .csv 文件，可以在 Excel 中打开一个 .csv 文件，因此最后您仍然拥有 excel 作为应用程序

另请参阅此链接，因此我不建议您使用 Office 自动化

> **段落摘自[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)** Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET）的 Microsoft Office 应用程序自动化、DCOM 和 NT 服务），因为当 Office 在此环境中运行时，Office 可能会表现出不稳定的行为和/或死锁。

# php - Lighttpd 403 禁止 PHP 文件

> ID：11537888
> 
> 赞同：20
> 
> 时间：2012-07-18T09:07:29.307
> 
> 标签：php, lighttpd, http-status-code-403

我刚刚在我的专用服务器上安装了 lighttpd，启用了 mod_fastcgi，所以我在`lighttpd.conf`文件中添加了以下行：

```
fastcgi.server = ( ".php" =>
( "localhost" =>
                     (
                        "socket" => "/tmp/php-fastcgi.socket",
                        "bin-path" => "/usr/local/bin/php-cgi"
                      )
                   )
) 
```

但这仍然没有帮助，因为`403 - Forbidden`当我尝试在我的网络浏览器中输入 PHP 文件时收到消息......当我`index.php`从我的网络根目录中删除文件并将其放置在`index.html`那里时，一切都很好，并且没有错误，无论`index.php`文件有 100 行还是只有 1 行 -`<?php echo 'test'; ?>`它总是显示为`403 - Forbidden`，我现在没有想法。

为什么会这样？

`ls -la`我的网络根目录：

```
#
total 6

    drwxr-xr-x  15 root  wheel   1536 Jul 18 10:23 .
    drwxr-xr-x   4 root  wheel    512 Jul 18 08:45 ..
    drwxr-xr-x   2 www   www      512 Jul  1 02:36 cache
    drwxr-xr-x   2 www   www      512 Jul  1 02:36 config
    drwxr-xr-x   6 www   www      512 Jul  1 02:36 inc
-rw-r--r--   1 www   www        9 Jul 18 11:02 index.php 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T08:18:28.053

您的 php 配置不正确。检查您的 lighttpd error.log 它将显示如下内容：

```
(mod_fastcgi.c.1397) [ERROR]: spawning fcgi failed. 
```

我用：

```
fastcgi.server = ( ".php" => ((                                      
                     "bin-path" => "/bin/php-cgi",             
                     "socket" => "/tmp/php.socket",              
                     "max-procs" => 1,                                     
                     "bin-environment" => (                         
                       "PHP_FCGI_CHILDREN" => "16",                    
                       "PHP_FCGI_MAX_REQUESTS" => "10000"           
                     ),         
                     "broken-scriptfilename" => "enable"
                 ))) 
```

确保在 modules.conf 中启用了 fastcgi

```
server.modules = (
  "mod_access",
  "mod_fastcgi",
#  "mod_alias",
#  "mod_auth",
#  "mod_evasive",
#  "mod_redirect",
#  "mod_rewrite",
#  "mod_setenv",
#  "mod_usertrack",
) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-05T06:52:12.620

同样的问题，Mint 的修复是安装 php5-cgi 包。
`sudo apt-get install php5-cgi`
启用 fastcgi 模块
`sudo lighttpd-enable-mod fastcgi fastcgi-php`
并最终重新加载
`sudo service lighttpd force-reload`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-16T20:38:57.057

我遇到过同样的问题。修复就像移动配置文件一样简单，因此启用了。我所做的只是...

```
$ ln -s /etc/lighttpd/conf-available/10-fastcgi.conf /etc/lighttpd/conf-enabled/
$ ln -s /etc/lighttpd/conf-available/15-fastcgi-php.conf /etc/lighttpd/conf-enabled/ 
```

并重新加载...

```
$ service lighttpd force-reload 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-03T17:03:22.170

在 ubuntu 上，你可以这样做：

```
sudo lighty-enable-mod fastcgi 
sudo lighty-enable-mod fastcgi-php 
```

来源：[https ://wiki.ubuntu.com/Lighttpd%2BPHP](https://wiki.ubuntu.com/Lighttpd%2BPHP)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T02:19:50.757

不太可能，但应注意作为“403 Forbidden”响应的另一个可能原因。

检查配置文件 (lighttpd.conf) 中的任何访问模块 (mod_access) 语句

例子：

```
 url.access-deny = ( "", ".php"); 
```

[文档：模块 mod_access](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModAccess)

# sql - SQL 查询内连接

> ID：11537891
> 
> 赞同：1
> 
> 时间：2012-07-18T09:07:39.590
> 
> 标签：sql, sql-server-2008

我正在研究 SQL Server 2008 R2。我有两张桌子让我们说`TblGroup`和`TblComplatedDetails`。

TblGroup 包含组的名称以及`MemberId`和`GroupType (i.e. in Daily, Weekly, Start, End)`并`TblComplatedDetails`包含`GroupId (i.e. foreign key of TblGroup)`完成的日期时间。现在，只有在 TblCompletedDetails 中没有记录的情况下，我才想要`MemberId`除AND“开始”类型的组之外的所有特定组。`GroupType="End"`所以记录集如下所示：

```
TblGroup 
==================================
Id  MemberId    GroupType
==================================
1   1       Daily
2   2       Daily
3   3       Daily
4   1       Weekly
5   1       Start
6   2       Weekly 
7   2       Start 
8   2       End
9   1       End
10  1       End

TblCompletedDetails
======================================
Id  GroupId     CompletedDate
======================================
1   1       xxxxxxxxxxxxxx
2   2       xxxxxxxxxxxxxx
3   3       xxxxxxxxxxxxxx
4   4       xxxxxxxxxxxxxx
5   1       xxxxxxxxxxxxxx
6   2       xxxxxxxxxxxxxx
7   3       xxxxxxxxxxxxxx
8   5       xxxxxxxxxxxxxx
9   6       xxxxxxxxxxxxxx 
```

因此，对于 MemberId = 1，所需的组可以是：

```
=======
GroupId
=======
1
4 
```

但是对于 MemberId = 2 所需的结果是：

```
=======
GroupId 
=======
2
6
7 
```

因为 7 是“开始”类型的组，在 TblCompletedDetails 中没有外键。任何人都可以有想法吗？等待您的宝贵回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:03:43.623

```
select g.ID GroupID
  from TblGroup g
 where g.MemberID = @MemberID
   and g.GroupType <> 'end'
   and
   (
       -- Row is qualified if it is not start
          g.GroupType <> 'start'
       -- Or, if it is, does not have an entry in TblCompletedDetails
       or not exists (select *
                        from TblCompletedDetails d
                       where d.GroupId = g.ID)
   ) 
```

# android - 安卓。单选按钮文本将无法正确显示

> ID：11537893
> 
> 赞同：1
> 
> 时间：2012-07-18T09:07:44.660
> 
> 标签：android

我有下面的 xml 代码，用于在对话框中显示。问题是“Easy”中的字母“E”显示在单选按钮本身的下方。所以它是不可见的。这是为什么？其余部分正确显示在每个相应 RadioButton 的右侧。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RadioGroup
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/radioBtnEasy"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Easy"
        android:layout_weight="1" />

    <RadioButton
        android:id="@+id/radioBtnMedium"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="Medium"            
        android:layout_weight="1" />

    <RadioButton
        android:id="@+id/radioBtnHard"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Hard"
        android:layout_weight="1" />
</RadioGroup> 
```

**编辑**

应 Padma Kumar 的要求，我发布了其余的代码。这就是我显示对话框的方式。我使对话框的宽度适合屏幕的宽度，而不是环绕内容。我删除了它，但它仍然错误地显示了 Easy 文本。

```
 //Define a new dialog window
    Dialog dialog = new Dialog(this);
    //Load the predefined layout onto this dialog
    dialog.setContentView(R.layout.new_session_dialog);
    //Set title of dialog
    dialog.setTitle("Create new session");
    //Set the width of the dialog to fill the width of the screen 
    dialog.getWindow().setLayout(WindowManager.LayoutParams.FILL_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);

    //Show the dialog
    dialog.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:15:01.773

0dp 宽度很可能是问题所在，

否则，如果只显示第一个字符“E”，则在 Easy 之前放置一个空格。

例）用“简单”代替“简单”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:22:01.070

感谢您发布这个问题。我遇到了同样的问题：第一个单选按钮中的图标踩在它后面的文本中的第一个字母上。我正在使用 Android 1.6 模拟器。安装我的应用程序后，启动我的应用程序并显示收音机组，我看到了问题。但是，当我使用返回键将我带回主屏幕并启动我的应用程序并再次显示收音机组时，我没有看到问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:14:25.507

使用 android:ems 属性，但在所有密度设备上管理您的文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:12:59.510

尝试首先删除 layout_weight=1 并将 fill_parent 放在 RadioButton 宽度上。然后进行必要的调整。

# python - 在类中声明函数

> ID：11537898
> 
> 赞同：0
> 
> 时间：2012-07-18T09:08:14.787
> 
> 标签：python, class, syntax

> **可能重复：**
> [python'self'解释](https://stackoverflow.com/questions/2709821/python-self-explained)

我是 Python 的初学者。当我怀疑自己无法向自己解释时，我正在阅读有关类和迭代器的教程。下面的程序文本是计算面积的类的一部分。

```
def __init__(self,len,wid):
    self.length=len
    self.width=wid

def calculate_area(self)
    return self.length*self.width

def print_area(self)
    print 'Area='+str(self.calculate_area()) 
```

我无法理解的是为什么函数的参数列表有“自我”？它的作用是什么？为什么每个变量都用“self”解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:12:51.530

这类似于 C++ 中的 this 指针（如果您有 C++ 背景）典型的用法是，如果有歧义，对象的成员可以由 self 引用。例如

```
def calculate_area(self, length)
    return self.length*self.width 
```

上述长度是 calculate_area 函数的参数。如果对象也有长度成员，那么它可以通过使用 self.length 来解决

在此处参考现有答案：

[自我的目的是什么？](https://stackoverflow.com/questions/2709821/python-self-explained)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:12:53.353

我真的不知道我对 Python 世界太陌生，但我认为 Python 不像`this`C# 或 Java 那样提供价值，所以这是 Python 用来在其类中定义自身的机制。

无论如何，你可以看到你不需要`self`在函数调用中传递 as 参数，因为 Python 会为你做。

这是我的理论，但我也有兴趣了解它，所以如果有人能对此多说一些，我想我们将非常感激。

再见！

# css - 当只有一个孩子可用时，最后一个孩子的样式会覆盖第一个孩子的样式

> ID：11537901
> 
> 赞同：11
> 
> 时间：2012-07-18T09:08:25.850
> 
> 标签：css, css-selectors

![在此处输入图像描述](../Images/c3e30ad48c8482fc5d24e4909a8cb359.png)

```
ul li:first-child a {
   border-radius: 5px 5px 0 0;
}

ul li:last-child a {
   border-radius: 0 0 5px 5px;
} 
```

当只有一个孩子时，最后一个孩子的样式会覆盖第一个孩子的样式。有没有办法同时应用（因为它是第一个和最后一个孩子）

我希望在没有 JS 的帮助下仅使用 CSS 来实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T09:13:46.407

只需单独应用您的边框：

```
ul li:first-child a {
   border-top-left-radius: 5px;
   border-top-right-radius: 5px;
}

ul li:last-child a {
   border-bottom-left-radius: 5px;
   border-bottom-right-radius: 5px;
} 
```

这样，最后应用的规则不会覆盖前一个规则（`border-radius: 5px 5px 0 0;`将底部边框半径重置为零）。

演示：http: [//jsfiddle.net/vUz5Z/5/](http://jsfiddle.net/vUz5Z/5/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T09:23:12.183

您可以使用`:only-child`. 只需添加

```
ul li:only-child a {
   border-radius: 5px;
} 
```

在他们之后。它在 IE8（或更早版本）中不起作用，但我猜这不是问题，因为`border-radius`在 IE8 中也不起作用。

`ul {border-radius: 5px}`或者如果可能的话，使用列表本身的边界半径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T09:18:19.197

为什么不把边界半径放在容器上呢？

```
ul,li { margin:0; padding:0; list-style:none; }
ul { border-radius: 10px; overflow:hidden }
a { display:block; margin-bottom:2px; padding:3px; background-color:#f00 }
ul li:last-child a {
 margin: 0;
} ​ 
```

[http://jsfiddle.net/BanEg/](http://jsfiddle.net/BanEg/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:53:47.097

您还可以使用 0px 值的 auto insead。前任。（较少的）：

```
&:first-child{
    .border-radiuses (5px, auto, auto, 5px);

}
&:last-child{
    .border-radiuses (auto, 5px, 5px, auto);
} 
```

# javascript - 使用字符串方法更改 Javascript 对象中的 DOM 元素参数

> ID：11537906
> 
> 赞同：0
> 
> 时间：2012-07-18T09:08:41.323
> 
> 标签：javascript

如果我有一个对象：

```
 function myClass(id) {
   this.em = document.getElementById(id);
   this.html = function(data) {
     this.em.html = data;
   }
 } 
```

*现在我能 ：*

```
 var em = new MyClass("id");
  em.html("NEW HTML HERE"); 
```

*我需要 ：*

```
em.html = "NEW HTML HERE"; 
```

**可能吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:12:45.437

在 HTML5 中，您可以在属性上定义一个`set`方法（请参阅 参考资料）`html`[`defineProperty()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty#Browser_compatibility)

```
function myClass(id) {
    this.em = document.getElementById(id);    

    Object.defineProperty(this, 'html', {
        set: function(val) {
            this.em.html = val;
        }
    });
} 
```

...但这仅适用于最[现代的浏览器](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty#Browser_compatibility)；IE8、Chrome 5、Firefox 4。

在此处查看上述工作的演示；[http://jsfiddle.net/sskKc/](http://jsfiddle.net/sskKc/)

# qlikview - Qlikview 集合表达式中的不等式

> ID：11537908
> 
> 赞同：0
> 
> 时间：2012-07-18T09:08:50.580
> 
> 标签：qlikview

Qlikview 帮助中的示例：

```
sum( {$<Year = {“&gt;1978<2004”}>} Sales ) 
```

我尝试了这段代码，但它没有用

```
Count( {$<Damages.DamageDate = {">Min(OtherDate)"}>} Damages.Id) 
```

看起来 qlikview 不支持不等式中的日期。无论如何，如果anyowne知道如何做这样的事情，请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:41:20.840

我记得，您必须在集合表达式中使用美元符号扩展。在手册中查找“使用美元符号扩展设置修饰符”。然后将评估 Min 函数，因此 set 表达式应该可以工作。

它看起来像这样：

```
Count( {$<Damages.DamageDate = {">$(=Min(OtherDate))"}>} Damages.Id) 
```

也许

```
Count( {$<Damages.DamageDate = {">$(#=Min(OtherDate))"}>} Damages.Id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T13:15:54.433

我会用

```
// Reopen or share this result by using the following Url:
// http://tools.qlikblog.at/SetAnalysisWizard/?sa=J0LC

Count({$<[Damages.DamageDate]={">$(=Min(OtherDate))"}>}[Damages.Id]) 
```

注意：我认为您应该为合格的字段名称加上方括号，例如“Damages.DamageDate”。您可以使用 Set Analysis Wizard 更改表达式。

希望这可以帮助！

问候斯特凡

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-15T19:00:13.727

您的问题的另一个可能性是创建一个变量，例如：`vMinDate = Min(OtherDate)`

然后你可以像这样在表达式中使用你的变量：

```
Count( {$<Damages.DamageDate = {'$(vMinDate)'}>} Damages.Id) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T14:05:06.037

我没有找到如何在 qlikview 中计算我需要的方法，但我通过在 sql 查询中进行所有计算来解决它。

**更新：**

count 和 if 的组合也可能会有所帮助。并且不要忘记在表达式中使用之前将用户选择的值放入文档变量中

# jquery - jQuery从url获取信息

> ID：11537914
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:09.790
> 
> 标签：jquery, html, url, jquery-selectors, get

我正在寻找一个类似于 PHP 的 $_GET 的 jQuery 代码。在这样的链接中，`http://example.com/index.php?page=pics&action=show`我想获取“页面”和“操作”值。在 PHP 中它很容易完成，但我在 jQuery 中需要它。我试图获取整个网址，`$(location).attr('href');`但后来我不得不过滤它，我很确定有一种更简单的方法。

谢谢指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:12:33.933

[这里](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)列出了很多方法来做到这一点。我推荐[JQuery URL Parser](https://github.com/allmarkedup/jQuery-URL-Parser)。

只需将 URL 解析器脚本添加到您的页面并按以下方式使用它

```
$.url('http://xyz.com?param1=abc&param2=def').param('param1'); // returns 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:06:25.100

我已经为上述解决方案完成了完整的垃圾箱。

请按照以下步骤操作：

1) 包括最新的 jquery.js 文件。

2) 包含 querystring-0.9.0.js 用于在 js 中获取查询字符串变量值。

3）HTML：

```
<a href="#?param1=abc&param2=def">
  abc
</a> 
```

在这里，我使用了“#?​​param1=abc¶m2=def”，因为在 bin 上不可能重定向页面并执行我们的 java 脚本，所以我刚刚在同一页面上添加了查询字符串并对其进行了测试。

4）脚本标签中的jQuery：

```
$(function() {
    $("a").click(function() {
        setTimeout(function() {
            var param1 = $.QueryString("param1");
            var param2 = $.QueryString("param2");
            alert(param1);
            alert(param2);
        }, 300);

    });
}); 
```

上面的脚本工作正常，如果在同一页面上添加了查询字符串，但对于不同的页面导航，您必须删除 setTimeout 函数但保留脚本在其中并在您所在的页面上执行如下语句使用查询字符串导航。因此，不同的导航需要首先包含 jquery 和 querystring-0.9.0.js 这两个 java 脚本文件。

```
 $(function() {
           var param1 = $.QueryString("param1");
           var param2 = $.QueryString("param2");
           alert(param1);
           alert(param2);
 }); 
```

你可以试试[http://codebins.com/bin/4ldqpac](http://codebins.com/bin/4ldqpac)

# jquery - 如何从外部 php jquery 加载内容

> ID：11537916
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:11.273
> 
> 标签：jquery, ajax, this, href

我笨，对不起。但我真的不明白它的工作！我希望从外部 php 文件加载内容。

例如 myfeed.php 。

内容包含在一个名为“myfeed”的类中。

```
$(document).ready(function(){
$.ajaxSetup({cache:false});
$("#bestseller a").click(function(){

    var post_id = $(this).attr("rel")
    $(".featureline").html("loading...");
    $(".featureline").load(jQuery(this).attr("href") + " .myfeed")
    return false;
}); 
```

});

谁能告诉我如何修改上面的代码以使其正常工作？Ajax 加载工作 - 但我没有加载外部文件。

非常感谢！广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:12:10.383

这`+ " .myfeed")`行看起来不合适：

```
 $(".featureline").load(jQuery(this).attr("href") + " .myfeed") 
```

删除它，您的查询将起作用。

```
$(".featureline").load(jQuery(this).attr("href")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:12:15.313

```
$(".featureline").load(FileURL); 
```

`FileURL`应该是您的文件的路径，例如。`myfeed.php`.

# python - 如何在 django admin 中更改内联表单？

> ID：11537918
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:16.207
> 
> 标签：python, django

在我的 django 项目中，我有 2 个相关模型“Vehicle”（父模型）和 ParamConf（子模型）。ParamConf 有“程序”字段，我想修复其中的一些错误值。
（管理员.py）：

```
class ParamConfFormSet(BaseInlineFormSet):
    def clean(self):
        super(ParamConfFormSet, self).clean()

        for form in self.forms:
            if hasattr(form, 'cleaned_data') and 'program' in form.cleaned_data:

                program = form.cleaned_data['program'].lower() # <<< I want to save this changed value
                form.cleaned_data['program'] = program # <<< but this doesn't work :^(

class ParamConfInline(admin.TabularInline):
    model = models.ParamConf
    formset = ParamConfFormSet

class VehicleAdminForm(forms.ModelForm):
    class Meta:
        model = models.Vehicle

class VehicleAdmin(admin.ModelAdmin):
    inlines = [ ParamConfInline, ]
    form = VehicleAdminForm 
```

我什至为 ParamConf 编写了 save() 方法，但是 django 不想在保存 Vehicle 表单后调用它（Vehicle 的 save 方法还可以）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:25:46.703

如果字段值实际更改（并且我试图在不编辑字段的情况下保存表单），Django 会为内联参数发出保存信号。对不起，是我的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T20:15:07.887

我知道这个问题已经很老了，但其他人可能仍在寻找答案......即使它没有改变也保存一个内联：

```
Class EntityInline(admin.TabularInline):
    extra = 0
    model = Entity
    form = AlwaysChangedModelForm 
```

# javascript - 允许订阅者列表注册但阻止脚本

> ID：11537919
> 
> 赞同：1
> 
> 时间：2012-07-18T09:09:17.583
> 
> 标签：javascript, security, ddos, subscriptions

我网站上的用户有一个公开可见的个人资料，他们通过一个简单的 HTML 表单接受订阅。这些订阅将合并到该用户的电子邮件列表中。

有人可以编写一个脚本来不断地注册电子邮件以破坏/淹没用户的列表。这可以通过使用基于 IP 的速率限制来缓解，但如果脚本在分布式环境中运行，此解决方案将不起作用。

我能想到的唯一策略是使用验证码，但我真的很想避免这样做。我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:51:43.653

您的问题基本上归结为“如何在不使用 CAPTCHA 的情况下区分人类和计算机？”

这确实是一个相当复杂的问题，有很多不同的答案和方法。在下文中，我将尝试列举一些。一些想法取自[这篇文章（德语）](http://www.heise.de/ix/artikel/Gestaffelte-Abwehr-506871.html)。

我个人认为某种验证码将是一个完美的解决方案。这不一定是图像中的扭曲文本，您也可以使用逻辑谜题或简单的计算。但是通过以下方法，您可以尝试避免验证码；请记住，这些方法总是比需要用户交互的 CAPTCHA 更容易绕过。

1.  在表单中使用隐藏字段作为蜜罐（`type=hidden`或者使用 CSS）。如果此字段已填写（或具有超出您预期的其他值），则您已检测到一个机器人（垃圾邮件机器人通常不执行语义分析，因此它们会填写它们找到的所有内容）。但是，如果机器人专门针对您，或者只是了解字段的名称并避免它，这将无法正常工作。

2.  使用 JavaScript 检查表单提交的速度。当然，人类需要一些时间（至少几秒钟）来填写表格，而机器人要快得多。您还应该检查表单是否在短时间内多次提交。如果您使用 AJAX 表单和/或服务器端，这可以通过 JavaScript 完成。缺点是（正如您自己提到的），它不适用于分布式系统。

3.  使用 JavaScript 检测焦点事件、点击或其他表明您正在与人类打交道的鼠标事件。这个方法在[这篇博客文章](http://www.webdesignfromscratch.com/javascript/human-form-validation-check-trick/)中有描述（包括一些源代码示例）。

4.  检查用户是否使用标准的网络浏览器；垃圾邮件发送者有时会使用自己编写的程序。您可以检查用户代理字符串，但这很容易操作。特征检测将是另一种可能性。

当然，如果用户禁用了 JavaScript，方法 2-4 将不起作用。`<noscript>`例如，在这种情况下，您可以在标签中显示常规验证码。在任何情况下，您都应该始终结合多种方法来获得有效且用户友好的测试。

我最终想到的（在您的特定情况下）是检查输入的电子邮件地址的有效性（不仅在语法上，而且还要检查地址是否真的存在）。这可以通过多种方式完成（请参阅[SO 上的这个问题](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email)） - 但是，它们都不是真正可靠的。因此，再次，您必须结合不同的方法才能可靠地区分人类和机器人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:53:13.477

假设谁开始向您的网站发送垃圾邮件专门针对您的网站（不是随机垃圾邮件机器人）并且会尝试积极解决所有对策，那么唯一的选择就是某种验证码，因为可以自动避免其他任何事情。

所有防止虚假/垃圾邮件提交的非验证码方法都可以通过利用脚本中的缺陷进行自动提交或分析提交的内容来工作。对于提交的类型，内容分析在这里并不是一个真正的选择。所以剩下的就是用于对抗垃圾邮件评论的各种各样的自动提交预防：

*   基于 CSS 的解决方案（例如：[http](http://wordpress.org/extend/plugins/spam-honeypot/) ://wordpress.org/extend/plugins/spam-honeypot/ ）
*   基于 JS 的解决方案：隐藏字段由 javascript 计算的数据填充 - 如果内容是由诸如不支持 java 脚本的垃圾邮件脚本之类的简单内容提交的，则很容易检测到

如果攻击者知道它们在那里，则可以绕过这两个 - 例如，当您的网站是选定的而不是随机的目标时。

总而言之：有很多解决方案可以非常成功地阻止随机提交的垃圾邮件，但如果有人专门针对您的网站，唯一可行的就是计算机不擅长的东西 - 验证码。

# xml - 在 Clojure 中搜索 xml

> ID：11537923
> 
> 赞同：13
> 
> 时间：2012-07-18T09:09:36.517
> 
> 标签：xml, clojure

我有以下示例 xml：

```
<data>
  <products>
    <product>
      <section>Red Section</section>
      <images>
        <image>img.jpg</image>
        <image>img2.jpg</image>
      </images>
    </product>
    <product>
      <section>Blue Section</section>
      <images>
        <image>img.jpg</image>
        <image>img3.jpg</image>
      </images>
    </product>
    <product>
      <section>Green Section</section>
      <images>
        <image>img.jpg</image>
        <image>img2.jpg</image>
      </images>
    </product>
  </products>
</data> 
```

我知道如何在 Clojure 中解析它

```
(require '[clojure.xml :as xml])
(def x (xml/parse 'location/of/that/xml')) 
```

这将返回一个描述 xml 的嵌套映射

```
{:tag :data,
 :attrs nil,
 :content [
     {:tag :products,
      :attrs nil,
      :content [
          {:tag :product,
           :attrs nil,
           :content [] .. 
```

这个结构当然可以用标准的 Clojure 函数遍历，但它可能会变得非常冗长，尤其是与使用 XPath 查询它相比时。有没有帮助遍历和搜索这样的结构？例如，我该怎么做

*   获取所有列表`<product>`
*   仅获取其`<images>`标签包含`<image>`带有文本“img2.jpg”的产品
*   获取`section`“红色部分”的产品

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T14:59:39.223

在这里使用来自[data.zip的](http://clojure.github.com/data.zip/)[Zippers](http://en.wikipedia.org/wiki/Zipper_%28data_structure%29)是您的第二个用例的解决方案：

```
(ns core
  (:use clojure.data.zip.xml)
  (:require [clojure.zip :as zip]
            [clojure.xml :as xml]))

(def data (zip/xml-zip (xml/parse PATH)))
(def products (xml-> data :products :product))

(for [product products :let [image (xml-> product :images :image)]
                       :when (some (text= "img2.jpg") image)]
  {:section (xml1-> product :section text)
   :images (map text image)})
=> ({:section "Red Section", :images ("img.jpg" "img2.jpg")}
    {:section "Green Section", :images ("img.jpg" "img2.jpg")}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-13T13:04:20.453

[这是一个使用data.zip](https://github.com/clojure/data.zip/)的替代版本，适用于所有三个用例。我发现了这一点，`xml->`并且`xml1->`内置了非常强大的导航，在向量中带有子查询。

```
;; [org.clojure/data.zip "0.1.1"]

(ns example.core
  (:require
   [clojure.zip :as zip]
   [clojure.xml :as xml]
   [clojure.data.zip.xml :refer [text xml-> xml1->]]))

(def data (zip/xml-zip (xml/parse "/tmp/products.xml")))

(let [all-products (xml-> data :products :product)
      red-section (xml1-> data :products :product [:section "Red Section"])
      img2 (xml-> data :products :product [:images [:image "img2.jpg"]])]
  {:all-products (map (fn [product] (xml1-> product :section text)) all-products)
   :red-section (xml1-> red-section :section text)
   :img2 (map (fn [product] (xml1-> product :section text)) img2)})

=> {:all-products ("Red Section" "Blue Section" "Green Section"),
    :red-section "Red Section",
    :img2 ("Red Section" "Green Section")} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T09:17:23.510

您可以使用类似的库[`clj-xpath`](https://github.com/kyleburton/clj-xpath/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:34:22.650

在许多情况下，线程优先宏以及 clojures 映射和向量语义是访问 xml 的适当语法。在许多情况下，您想要一些更特定于 xml 的东西（例如 xpath 库），但在许多情况下，现有语言几乎与不添加任何依赖项一样简洁。

```
(pprint (-> (xml/parse "/tmp/xml") 
        :content first :content second :content first :content first))
"Blue Section" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T02:50:32.870

[Tupelo 库](https://github.com/cloojure/tupelo)`tupelo.forest`可以使用树数据结构轻松解决此类问题。请[参阅此问题以获取更多信息](https://stackoverflow.com/questions/44422024/remove-specific-xml-nodes-using-clojure/44425524#44425524)。API 文档[可以在这里找到](http://cloojure.github.io/doc/tupelo/tupelo.forest.html)。

在这里，我们加载您的 xml 数据并先将其转换为 enlive，然后再将其转换为`tupelo.forest`. 库和数据定义：

```
(ns tst.tupelo.forest-examples
  (:use tupelo.forest tupelo.test )
  (:require
    [clojure.data.xml :as dx]
    [clojure.java.io :as io]
    [clojure.set :as cs]
    [net.cgrand.enlive-html :as en-html]
    [schema.core :as s]
    [tupelo.core :as t]
    [tupelo.string :as ts]))
(t/refer-tupelo)

(def xml-str-prod "<data>
                    <products>
                      <product>
                        <section>Red Section</section>
                        <images>
                          <image>img.jpg</image>
                          <image>img2.jpg</image>
                        </images>
                      </product>
                      <product>
                        <section>Blue Section</section>
                        <images>
                          <image>img.jpg</image>
                          <image>img3.jpg</image>
                        </images>
                      </product>
                      <product>
                        <section>Green Section</section>
                        <images>
                          <image>img.jpg</image>
                          <image>img2.jpg</image>
                        </images>
                      </product>
                    </products>
                  </data> " ) 
```

和初始化代码：

```
(dotest
  (with-forest (new-forest)
    (let [enlive-tree          (->> xml-str-prod
                                 java.io.StringReader.
                                 en-html/html-resource
                                 first)
          root-hid             (add-tree-enlive enlive-tree)
          tree-1               (hid->hiccup root-hid) 
```

hid 后缀代表“Hex ID”，它是唯一的十六进制值，其作用类似于指向树中节点/叶的指针。在这个阶段，我们刚刚加载了森林数据结构中的数据，创建了 tree-1，它看起来像：

```
[:data
 [:tupelo.forest/raw "\n                    "]
 [:products
  [:tupelo.forest/raw "\n                      "]
  [:product
   [:tupelo.forest/raw "\n                        "]
   [:section "Red Section"]
   [:tupelo.forest/raw "\n                        "]
   [:images
    [:tupelo.forest/raw "\n                          "]
    [:image "img.jpg"]
    [:tupelo.forest/raw "\n                          "]
    [:image "img2.jpg"]
    [:tupelo.forest/raw "\n                        "]]
   [:tupelo.forest/raw "\n                      "]]
  [:tupelo.forest/raw "\n                      "]
  [:product
   [:tupelo.forest/raw "\n                        "]
   [:section "Blue Section"]
   [:tupelo.forest/raw "\n                        "]
   [:images
    [:tupelo.forest/raw "\n                          "]
    [:image "img.jpg"]
    [:tupelo.forest/raw "\n                          "]
    [:image "img3.jpg"]
    [:tupelo.forest/raw "\n                        "]]
   [:tupelo.forest/raw "\n                      "]]
  [:tupelo.forest/raw "\n                      "]
  [:product
   [:tupelo.forest/raw "\n                        "]
   [:section "Green Section"]
   [:tupelo.forest/raw "\n                        "]
   [:images
    [:tupelo.forest/raw "\n                          "]
    [:image "img.jpg"]
    [:tupelo.forest/raw "\n                          "]
    [:image "img2.jpg"]
    [:tupelo.forest/raw "\n                        "]]
   [:tupelo.forest/raw "\n                      "]]
  [:tupelo.forest/raw "\n                    "]]
 [:tupelo.forest/raw "\n                   "]] 
```

接下来，我们使用以下代码删除所有空白字符串：

```
blank-leaf-hid?      (fn [hid] (and (leaf-hid? hid) ; ensure it is a leaf node
                                 (let [value (hid->value hid)]
                                      (and (string? value)
                                        (or (zero? (count value)) ; empty string
                                          (ts/whitespace? value)))))) ; all whitespace string

blank-leaf-hids      (keep-if blank-leaf-hid? (all-hids))
>>                   (apply remove-hid blank-leaf-hids)
tree-2               (hid->hiccup root-hid) 
```

产生更好的结果树（打嗝格式）

```
[:data
 [:products
  [:product
   [:section "Red Section"]
   [:images [:image "img.jpg"] [:image "img2.jpg"]]]
  [:product
   [:section "Blue Section"]
   [:images [:image "img.jpg"] [:image "img3.jpg"]]]
  [:product
   [:section "Green Section"]
   [:images [:image "img.jpg"] [:image "img2.jpg"]]]]] 
```

然后，以下代码计算上述三个问题的答案：

```
product-hids         (find-hids root-hid [:** :product])
product-trees-hiccup (mapv hid->hiccup product-hids)

img2-paths           (find-paths-leaf root-hid [:data :products :product :images :image] "img2.jpg")
img2-prod-paths      (mapv #(drop-last 2 %) img2-paths)
img2-prod-hids       (mapv last img2-prod-paths)
img2-trees-hiccup    (mapv hid->hiccup img2-prod-hids)

red-sect-paths       (find-paths-leaf root-hid [:data :products :product :section] "Red Section")
red-prod-paths       (mapv #(drop-last 1 %) red-sect-paths)
red-prod-hids        (mapv last red-prod-paths)
red-trees-hiccup     (mapv hid->hiccup red-prod-hids)] 
```

结果：

```
 (is= product-trees-hiccup
   [[:product
     [:section "Red Section"]
     [:images
      [:image "img.jpg"]
      [:image "img2.jpg"]]]
    [:product
     [:section "Blue Section"]
     [:images
      [:image "img.jpg"]
      [:image "img3.jpg"]]]
    [:product
     [:section "Green Section"]
     [:images
      [:image "img.jpg"]
      [:image "img2.jpg"]]]] )

(is= img2-trees-hiccup
  [[:product
    [:section "Red Section"]
    [:images
     [:image "img.jpg"]
     [:image "img2.jpg"]]]
   [:product
    [:section "Green Section"]
    [:images
     [:image "img.jpg"]
     [:image "img2.jpg"]]]])

(is= red-trees-hiccup
  [[:product
    [:section "Red Section"]
    [:images
     [:image "img.jpg"]
     [:image "img2.jpg"]]]])))) 
```

完整的示例可以[在 forest-examples 单元测试](https://github.com/cloojure/tupelo/blob/master/test/tst/tupelo/forest_examples.cljc)中找到。

# c++ - 将文件读入结构时出现问题

> ID：11537925
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:45.843
> 
> 标签：c++, struct, binary

我已经定义了这个结构来读取二进制文件

```
struct cabecera{            
  unsigned long time;
    short lrec;
    short eddimdat;
    short edmaxdat;
    short edncn;
    short estindefmax;
    long maxiedisc;
  long edbuit;
    long edusat;
    short estindefusat;
    long libdoff;
    long vidoff;
    long dgoff;
  long estindefoff;
    long estinoff;
    long sedoff;
  long esdoff;
    int libvers;
    long offie;
    long tiueoff;
}; 
```

我有一个从 fstream 扩展来读取数据的类

```
open(fNombre.c_str(),ios::in|ios::binary);
if(fail()||bad()) return;

int pos = 160 ;
cabecera cb={};
seekg(pos,ios::beg);
read((char*)&cb, sizeof(cb)); 
```

但是变量 maxiedisc 得到一个错误的值（1052835858），其余的变量也来自这里如果我在没有结构的情况下读取这个变量，我获得的值是正确的（1200000）

```
int tmLong = sizeof(long);
int tmULong = sizeof(unsigned long);
int tmShort = sizeof(short);   
int pos = 160 + tmULong  + (tmShort*5);
seekg(pos,ios::beg);
long maxiedisc;                        
read((char*)&maxiedisc, tmLong); 
```

结构有什么问题？为什么我得到不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:15:58.993

几乎可以肯定你的结构中有*填充*。编译器在 estindefmax 和 maxiedisc 成员之间放置了两个额外的字节。这就是为什么直接读入结构是一个坏主意的原因，除非您使用完全相同的结构编写文件。

做你的第二种方式，没有结构。如果这是您需要的，请稍后填写结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:04:07.007

直接从内存读取和写入文件到磁盘是不可移植的。

您可能遇到的一些问题是

*   **内存填充**。（取决于编译器）您可以使用`#pragma pack`(vs) 来避免这种情况，但这些结构将被 CPu 以更低效的方式使用。
*   **字节序**。整数类型可以以 Little-Ending 或 Big-Endian 格式存储（取决于平台）。可以使用`boost::endian`函数族进行转换
*   **保存复杂的数据结构**（STL 列表、向量等）
*   **结构版本控制**。在较新的程序中加载旧版本的结构。

正确的方法是使用已经封装了所有这些问题的序列化库（如`Boost::serialization`或 google 的`ProtoBuff`），或者如果库的开销太大而无法自己编写一个小序列化程序。这比听起来容易。只需编写两个成员函数（保存/加载），将成员写入流/从流中读取。您应该处理自己的字节序和版本控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:22:33.687

正如@john 所提到的，问题似乎是结构填充。

您有两种解决方案来消除填充，第一个是逐个编写每个结构组件（但在这种大小的结构中不是最好的方法），第二个是按照其他用户的建议禁用填充。

```
#ifndef LINUX
#pragma pack(1)
#endif
struct cabecera
{
    // your stuff...
}__attribute__((packed));
#else
};
#endif 
```

PS：不要在你的代码中混合语言，它看起来很傻；）“ *si programas en inglés, usa el inglés para nombrar variables y datos* ”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:18:25.217

您需要禁用编译器的填充。它将向您的结构添加填充字节，使其比您预期的要大。
由于您没有提及您使用的编译器：[这](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)是在 msvc 上完成的。如果我记得正确 gcc 具有相同的语法。但Inever试过了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T09:18:45.193

看起来像填充问题

使用 gcc 直接读入结构体

```
struct my_struct {
    /* ... */
} __attribute__((packed)); 
```

这确保不使用填充

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T09:44:36.690

您可以使用 Google [protobuf](http://code.google.com/p/protobuf/)之类的东西为您执行结构的序列化/反序列化。这种方法更安全，并且可以跨编译器和系统边界工作。另一种方法是单独序列化每个字段。打包有时是最快的选择，但在编译器兼容性和系统之间的二进制兼容性方面存在问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T09:50:49.360

```
#pragma pack(push,1)
// struct definition
#pragma push 
```

# cordova - 如何从phonegap警报中删除标题

> ID：11537927
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:50.790
> 
> 标签：cordova, alert

我们正在使用 navigator.notification.confirm(alertMesg, onConfirm, ' ', buttonNamesForIos); 使用 phonegap 显示确认框。但是上面的函数浪费了标题的空间，因为我们不显示标题。如何从框中删除标题空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:35:58.093

你用什么平台？

一个简单的 NULL 会使它保持空白。

# xpages - XPage Dojo DateTextBox NotSerializableException

> ID：11537929
> 
> 赞同：0
> 
> 时间：2012-07-18T09:09:58.887
> 
> 标签：xpages, xpages-extlib

我有一个包含dojo DateTextBox 的xpage。如果我保存文档，一切正常。但是如果我重新打开文档，我会得到以下异常：

```
Unexpected runtime error
The runtime has encountered an unexpected error.
Error source
Page Name:/OfferAccount.xsp

Exception
java.io.NotSerializableException: lotus.domino.local.DateTime
lotus.domino.local.DateTime

Stack Trace:

com.ibm.xsp.FacesExceptionEx: java.io.NotSerializableException: lotus.domino.local.DateTime
    com.ibm.xsp.application.AbstractStateManager.saveSerializedView(AbstractStateManager.java:121)
    com.ibm.xsp.application.StateManagerImpl.saveSerializedView(StateManagerImpl.java:152)
    com.ibm.xsp.application.ViewHandlerExImpl._saveViewState(ViewHandlerExImpl.java:445)
    com.ibm.xsp.application.ViewHandlerExImpl.saveViewState(ViewHandlerExImpl.java:439)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:323)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335) 
```

这是我的 xpage 中 DateTextBox 的代码：

```
<xe:djDateTextBox
id="periodOfInsuranceBeginn" value="#{offerAccount.d_offerPolicyBegin}">
<xe:this.defaultValue><![CDATA[#{javascript:var today:NotesDateTime = 
session.createDateTime(@Today());   
return I18n.parseDate(today.getDateOnly());}]]></xe:this.defaultValue>
<xp:this.converter>
<xp:convertDateTime type="date" dateStyle="short">
</xp:convertDateTime>
</xp:this.converter>
</xe:djDateTextBox> 
```

如果我使用 dateTime 类型的 EditBox，也会发生此异常。

有任何想法吗？谢谢马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:50:13.743

您似乎在代码中使用了 Notes 对象 (NotesDateTime)。Notes 对象不可序列化。将它们存储为 Java 日期，如果您访问它们，则将它们转换回 NotesDateTime 对象。

# java - 输出json时可以使用Eclipselink MOXy移动一个元素成为key吗

> ID：11537931
> 
> 赞同：1
> 
> 时间：2012-07-18T09:10:02.170
> 
> 标签：java, json, jaxb, eclipselink, moxy

从我的 JAXB 模型中，我可以输出这个 xml

```
<metadata xmlns="http://musicbrainz.org/ns/mmd-2.0#" xmlns:ext="http://musicbrainz.org/ns/ext#-2.0">
    <work-list>
        <work id="4ff89cf0-86af-11de-90ed-001fc6f176ff">
            <relation-list target-type="artist">
                <relation type="composer">
                    <direction>backward</direction>
                </relation>
            </relation-list>
        </work>
    </work-list>
</metadata> 
```

目前使用 MOXy 和 oxml.xml 我可以输出以下 JSON

```
{
   "work" : [ {
      "relations": [ {
         "target-type" : "artist",
         "relation" : [ {
            "type" : "composer",
            "direction" : "backward",
            },
         } ]
      } ]
   } ]
} 
```

（在我的 oxml.xml 中，我扁平化了工作列表和关系列表对象，并将关系重命名为关系。）

但实际要求是一个更复杂的转换，我不知道如何用正确的术语来解释它，但这里是一个所需输出的例子。

```
{
   "work" : [ {
      "relations": {
         "artist": [{
            "direction": "backward",
            "type": "composer",            
          }
         ],
       }
   }]
} 
```

这可以在 eclipselink MOXy 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:28:54.477

以下是如何做到这一点的示例：

**登记处**

您将需要一个带有注释的类，该类为五个不同的元素值中的每一个都`@XmlRegistry`标记了方法。`@XmlElementDecl`

```
package forum11537931;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.namespace.QName;

@XmlRegistry
public class Registry {
    private static final String ARTIST = "artist";
    private static final String FOO = "foo";

    @XmlElementDecl(name=ARTIST)
    public JAXBElement<Relation> createArtist(Relation relation) {
        return new JAXBElement<Relation>(new QName(ARTIST), Relation.class, relation);
    }

    @XmlElementDecl(name=FOO, substitutionHeadName=ARTIST)
    public JAXBElement<Relation> createFoo(Relation relation) {
        return new JAXBElement<Relation>(new QName(FOO), Relation.class, relation);
    }

} 
```

**关系适配器**

我们将使用 an`XmlAdapter`将`Relations`对象转换为更好地映射到 JSON 表示的东西。我们将利用`@XmlElementRef`注释来执行此操作（请参阅[http://blog.bdoughan.com/2010/12/represent-string-values-as-element.html](http://blog.bdoughan.com/2010/12/represent-string-values-as-element.html)）。

```
package forum11537931;

import java.util.*;

import javax.xml.bind.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.namespace.QName;

public class RelationsAdapter extends XmlAdapter<RelationsAdapter.AdaptedRelations, Relations> {

    @Override
    public Relations unmarshal(AdaptedRelations v) throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public AdaptedRelations marshal(Relations relations) throws Exception {
        AdaptedRelations adaptedRelations = new AdaptedRelations();
        for(Relation relation : relations.relations) {
            adaptedRelations.relations.add(new JAXBElement<Relation>(new QName(relations.targetType), Relation.class, relation));
        }
        return adaptedRelations;
    }

    @XmlSeeAlso({Registry.class})
    public static class AdaptedRelations {

        @XmlElementRef(type=JAXBElement.class, name="artist")
        public List<JAXBElement<Relation>> relations = new ArrayList<JAXBElement<Relation>>();

    }

} 
```

**oxm.xml**

由于您不想将`XmlAdapter`其应用于 XML 表示，我们将使用 MOXy 的外部映射文档指定它（请参阅[http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)）。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11537931">
    <java-types>
        <java-type name="Work">
            <java-attributes>
                <xml-element java-attribute="relations">
                    <xml-java-type-adapter value="forum11537931.RelationsAdapter"/>
                </xml-element>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**输入.xml**

出于本示例的目的，我简化了您的 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<work id="4ff89cf0-86af-11de-90ed-001fc6f176ff">
    <relation-list target-type="artist">
        <relation type="composer">
            <direction>backward</direction>
        </relation>
    </relation-list>
</work> 
```

**演示**

```
package forum11537931;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        // XML
        JAXBContext jc = JAXBContext.newInstance(Work.class, Registry.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11537931/input.xml");
        Work work = (Work) unmarshaller.unmarshal(xml);

        // JSON
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11537931/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        JAXBContext jsonJC = JAXBContext.newInstance(new Class[] {Work.class, Registry.class}, properties);
        Marshaller jsonMarshaller = jsonJC.createMarshaller();
        jsonMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        jsonMarshaller.marshal(work, System.out);
    }

} 
```

**输出**

```
{
   "work" : {
      "relations" : [ {
         "artist" : [ {
            "type" : "composer",
            "direction" : "backward"
         } ]
      } ]
   }
} 
```

* * *

领域模型

**工作**

```
package forum11537931;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Work {

    @XmlElement(name="relation-list")
    List<Relations> relations;

} 
```

**关系**

```
package forum11537931;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Relations {

    @XmlAttribute(name="target-type")
    String targetType;

    @XmlElement(name="relation")
    List<Relation> relations = new ArrayList<Relation>();

} 
```

**关系**

```
package forum11537931;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Relation {

    @XmlAttribute
    String type;

    String direction;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

# javascript - 用 JavaScript 制作的 NoCopy 函数在 Firefox 中不起作用

> ID：11537937
> 
> 赞同：-1
> 
> 时间：2012-07-18T09:10:19.697
> 
> 标签：javascript, html, function, firefox

我正在尝试使我的网页受 DO-NOT-COPY 保护.. 我得到以下代码.. 它适用于 chrome 和 IE，但不适用于 firefox..

```
<script type="text/JavaScript">
    function NoCopy(e)
    {
        return false
    }
    function ReActivate()
    {
        return true
    }

    document.onselectstart = new Function ("return false")

    if(document.sidebar)
    {
        document.onmousedown = NoCopy
        document.onclick = ReActivate
    }</script> 
```

谁能帮我这个？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:18:52.877

您不能使用 Javascript 限制用户复制文本。如果内容是从您的服务器发送的，那么用户可以用它做任何事情。

用户可以在不支持 Javascript 的网站上查看您的网站，或者用户可以在 php 中使用 CURL 函数并阅读内容。有很多选择。所以使用版权保护您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:13:37.390

那么如果你想通过选择文本来防止复制，上面的方法**并不**好。而是添加一个`copyright notice/license`或我建议您使用**CSS**：

```
body {
   -webkit-touch-callout: none;
   -webkit-user-select: none;
   -khtml-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
   user-select: none;
} 
```

# javascript - 丢了第一行，stringByEvaluatingJavaScriptFromString 的怪事

> ID：11537939
> 
> 赞同：0
> 
> 时间：2012-07-18T09:10:22.807
> 
> 标签：javascript, ios, dom, uiwebview

stringByEvaluatingJavaScriptFromString 总是丢失第一行，这是怎么回事？

```
 NSString* attribute_list2 = [wvPage stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerHTML;"] 
```

![在此处输入图像描述](../Images/5b24da7181f21401e653b519ad4f49b1.png)

如上，结果丢失了

```
<html> 
```

线。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:15:34.607

元素的[`innerHTML`](https://developer.mozilla.org/en/DOM/element.innerHTML)仅包含描述节点后代的 HTML 片段，因此它不会包含元素本身。

您可能想[`outerHTML`](https://developer.mozilla.org/en/DOM/element.outerHTML)改用它，它是包含元素本身及其后代的 HTML 片段。

# php - 将用户上传的 CSV 导入 MySQL

> ID：11537941
> 
> 赞同：0
> 
> 时间：2012-07-18T09:10:35.083
> 
> 标签：php, mysql, csv

我正在尝试编写一个脚本，将用户上传的 CSV 文件的内容保存到 MySQL 数据库中。我对将文件永久保存在服务器上不感兴趣——重点是只允许用户通过批量上传在 MySQL 数据库中创建多个条目。

这是我到目前为止所拥有的。

HTML 上传表单

```
<form enctype="multipart/form-data" action="BulkUploadStudents.php" method="POST">
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

将 CSV 文件的内容保存到 MySQL 数据库的 PHP 脚本

```
<?php

$username="";
$password="";
$database="";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$file_handle = fopen("http://www.example.com/file.csv", "r");

while (!feof($file_handle) ) {

$line_of_text = fgetcsv($file_handle, 1024);

$query = "INSERT INTO students VALUES ('','$line_of_text[0]','$line_of_text[1]','$line_of_text[2]')";
mysql_query($query);

}

fclose($file_handle);

echo "<p><b>Records succesfully imported</b></p>";

?> 
```

我基本上只需要一些关于如何连接两者的建议。我认为这就像命名 PHP 脚本 BulkUploadStudents.php 一样简单，为上传的文件名创建一个变量，然后用该变量替换“example.com/file.csv”。不过，不确定具体情况。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:36:54.530

只需打开插入 url 的临时文件：

```
$file_handle = fopen($_FILES["uploadedfile"]['tmp_name'], "r"); 
```

# c# - sql server 中的加密

> ID：11537947
> 
> 赞同：0
> 
> 时间：2012-07-18T09:10:59.160
> 
> 标签：c#, sql, sql-server

这段代码可以转换成sql存储过程吗

```
 string key = "test";

        MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
        keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
        hashmd5.Clear();

        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        tdes.Key = keyArray;
        tdes.Mode = CipherMode.ECB;
        tdes.Padding = PaddingMode.PKCS7;

        ICryptoTransform cTransform = tdes.CreateEncryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
        tdes.Clear();
        return Convert.ToBase64String(resultArray, 0, resultArray.Length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:19:53.740

`HASHBYTES`可以做第一部分。

其次，看看`ENCRYPTBYKEY`哪个可以使用三重 DES 密钥进行加密。

有关示例，请参见[http://msdn.microsoft.com/en-us/library/ms179331(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms179331(v=sql.100).aspx)

或者，您可能需要考虑 SQL CLR 过程。

# c++ - 计算字符串/数组元素的十六进制，然后将它们转换为十进制

> ID：11537948
> 
> 赞同：0
> 
> 时间：2012-07-18T09:11:02.477
> 
> 标签：c++, wxwidgets

我有一个用 wxwidgets 设计的 UI，我在其中输入用户名。我想要所有元素的十六进制总和，然后将其转换为十进制。这就是我所做的：

```
wxArrayString TextAlia = wxT("");//declared global

    TextBox1 = new wxTextCtrl(this, TEXT_BOX1, wxT(""), wxPoint(300, 10), wxSize(100, 20), wxTE_PROCESS_ENTER | wxTE_PROCESS_TAB | wxTE_LEFT, wxDefaultValidator, wxT("WxTextBox"));

void MyFrame::OnGenerateKey(wxCommandEvent& WXUNUSED(event)) {
int i;
char name[i];

TextAlia = TextBox1->GetValue();

i = strlen(TextAlia);
for (i = 0; i < strlen(TextAlia); i++) {

char buffer[3];char Temp[3];

_itoa( name[i], buffer, 16 );

 } 
```

这是我试图做的，请帮助我。

现在 id 所做的是：

```
int lengtharray = sizeof(name)/sizeof(name[0]);

for (int j=0; j<lengtharray; j++)
{
   name[j] = ?//i need to write something here so that the name[1] is changed to 45 for     
  capital "E"
  // avariable may be of type hex just like sum that keeps on incrementing the value

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:00:26.617

如果我理解正确，您想对字符串中字符的数字表示求和。我对 wxwidgets 不熟悉，我认为它使用自己的字符串类型，但我将展示如何使用 c 风格的字符串和 c++ 来做到这一点`std::string`。首先要注意的是，`char`它只是一个数字类型，至少能够存储数字 0 到 127。你可以直接在 sum 中使用它。只是当您将其打印出来时，它才会变成可识别的字母。

我在这里粘贴了一个简单的程序：http: [//ideone.com/dqIE5](http://ideone.com/dqIE5)，其中有两个函数显示如何循环字符串中的字符并将它们求和。在这两种情况下，您只需对字符进行循环，添加到运行总和。

您显示的代码中也有几个错误。第一的：

```
int i;
char name[i]; 
```

这里有两个错误。您尝试使用`i`而不初始化它（给它一个值）。你期望有多大`name`？其次，数组的大小必须是一个常数，在编译时就知道了。所以你可以做类似的事情

```
const int i = 10;
char name[i]; 
```

另一个可能的错误：

```
i = strlen(TextAlia);
for (i = 0; i < strlen(TextAlia); i++) { 
```

您设置`i`为 的长度，`TextAlia`然后立即将其设置为`0`。然后`strlen`一遍又一遍地打电话。也许你想要：

```
int length = strlen(TextAlia);
for (i = 0; i < length; ++i) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:51:29.473

```
i = strlen(TextAlia);
int sum = 0;
for (int j = 0; j < i; ++j) {
    sum += TextAlia[j]
}

char* a = new char[40];
sprintf(a, "%d", sum); // decimal value
sprintf(a, "%x", sum); // hexadecimal value 
```

# c# - 实例化一个类和使用它的方法和使方法静态并在不实例化类的情况下使用它们有什么区别

> ID：11537950
> 
> 赞同：0
> 
> 时间：2012-07-18T09:11:15.440
> 
> 标签：c#, static-methods

我知道这是一个非常基本的问题。第二部分也不适合 OO 世界。然而，当我在谷歌上搜索答案时，我得到了很多结果，其中一些结果相互矛盾，所以我想清除所有的东西。我还想知道这些方法在内存分配方面的区别。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:22:06.207

我们在 OO 编程中使用类的原因是我们可以*封装状态*。静态方法（充其量）只会维持一个状态。实例化的对象可以维护该实例唯一的状态，并且单独的实例不会相互影响（除非明确实现）。

例如，想象一个简单的类，它维护一个方法被调用的次数，并通过一个属性公开该计数。仅使用静态成员，您只能有一个计数。使用实例成员，您可以创建多个对象，并且每个对象都将保持自己的不同计数。

如果一个成员根本没有任何状态（也就是说，一个方法不使用未在该方法中声明或作为参数传递给该方法的变量），那么将其设为静态是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:14:00.917

这取决于用途。如果您需要几个方法来做不同的事情**，或者**如果您没有任何非静态成员，您应该使用静态类。

如果您的方法依赖于彼此处理的数据并且您需要创建变量和属性，您应该坚持使用非静态类，因为用户可以同时初始化多个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:14:15.170

如果您希望您的方法自己执行一些实用程序任务而无需维护任何上下文，您可以创建静态方法。

然而，要实例化的类在成员变量和成员对象方面维护一些上下文。这些函数使用这些上下文为您执行一些操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:32:29.193

假设您想在项目的不同位置使用某些函数假设它计算一些东西，所以它没有任何变量，所以在它完成后你不需要它，你将它声明为静态

对不起我糟糕的英语

# selenium-ide - 通过 selenium ide 中的 .htaccess 弹出窗口让 Selenium 登录

> ID：11537955
> 
> 赞同：0
> 
> 时间：2012-07-18T09:11:35.657
> 
> 标签：selenium-ide

我需要在 selenium ide 中自动化这个 htaccess 弹出窗口。尝试录制，但没有成功。谁能给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:13:12.817

在测试文件中以 username:password@url 形式输入 url

# ios - UISearchBar 和听写支持

> ID：11537961
> 
> 赞同：7
> 
> 时间：2012-07-18T09:11:50.497
> 
> 标签：ios, uisearchbar, uitextinput

我有用户界面，`UISearchBar`我实现了`UISearchBarDelegate`'s`searchBarSearchButtonClicked:`来执行搜索。我没有支持听写的设备来测试这个，所以我要在这里推测......

在支持听写的设备上，我想在听写结束后立即执行搜索，而不需要用户手动点击搜索按钮。

*   这是开箱即用的吗？
*   还是我需要以编程方式处理它？

从 iOS 5.1 开始，协议中有新的方法，`UITextInput`理论上我可以连接到`dictationRecordingDidEnd`. 这是要走的路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:59:11.243

是的，您会想要使用`dictationRecordingDidEnd`协议方法。Apple 的文档说明了[dictationRecordingingDidEnd](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITextInput/dictationRecordingDidEnd)：

> 如果您想响应口述短语的识别完成，请实施此可选方法。

也就是说，我还没有在 Apple 的人机界面指南中找到任何关于这种方法的预期用途的内容。

您可能还想查看[dictationRecongitionFailed](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITextInput/dictationRecordingDidEnd)以及[UIDictationPhrase 类](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDictationPhraseClass/Reference/Reference.html)。

# php - .htaccess 中的 php_flag

> ID：11537965
> 
> 赞同：1
> 
> 时间：2012-07-18T09:12:04.337
> 
> 标签：php, apache, .htaccess

我运行一个 apache-server，我只需要一个 php_flag 就可以不同于虚拟主机中的全局配置。

我在那个虚拟主机目录中没有 .htaccess 文件，所以我只是添加了它，其中包含

```
php_flag flagname On 
```

我的 httpd.conf 包含

```
<Directory "/path/to/host">
AllowOverride All
</Directory> 
```

我使用标准服务器 API，而不是 suPHP 或任何东西

无论如何，phpinfo 一直告诉我，我设置为 On 的标志仍然是 Off。标志是 suhosin.simulation，应该可以在 .htaccess 中设置。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:13:06.913

`php_flag`只能设置**PHP_INI_ALL**和**PHP_INI_PERDIR**类型指令。您可能需要在 vhost 配置的范围`php_admin_flag`内使用 a 。`<Directory xxxxxxxxxx>` `</Directory>`您将需要重新启动 Apache 以锁定它。

# mysql - 如何在 ubuntu 10.04 32 位上安装 mysql 5.5.25？

> ID：11537967
> 
> 赞同：0
> 
> 时间：2012-07-18T09:12:12.413
> 
> 标签：mysql, linux, ubuntu-10.04

我的mysql版本申请要求是5.5.14以上。我已经成功安装了 mysql 5.5.12 但是对于更高版本的 mysql 5.5.14 ，我找不到可以简单地安装 mysql 5.5.14 或更高版本的最好的东西。请告诉我下载和安装 mysql 5.5.14 或我可以在我的 ubuntu 10.04 环境中安装的任何更高版本的简单方法。

请帮帮我。

谢谢

尼特什·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:24:24.397

试试[MySQL 沙盒](http://mysqlsandbox.net/)。您可以使用它从 MySQL 二进制发行版安装，并并排安装多个版本。

# ruby-on-rails-3.1 - 使用 Shopify API、Ruby on Rails 为产品选择特定元字段

> ID：11537968
> 
> 赞同：5
> 
> 时间：2012-07-18T09:12:13.303
> 
> 标签：ruby-on-rails-3.1, shopify

在液体模板中，这是这样实现的：

```
{{ product.metafields.book.author }} 
```

它返回 'author' 的值，因为它的键 'book'

我正在使用 Shopify API 和 Ruby on Rails，并已成功遍历给定产品的每个元字段：

**在控制器中：**

```
@products = ShopifyAPI::Product.find(:all, :params => {:limit => 10}) 
```

**在视图中：**

```
<% @products.metafields.each do |metafield| %>
<%= metafield.key %> : <%= metafield.value %>
<% end %> 
```

正如预期的那样，这将返回产品的所有元字段。如何仅返回与上例中的特定键（即“书”）匹配的元字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T01:32:11.580

```
# add metafield
product = ShopifyAPI::Product.find(product_id)
product.add_metafield(ShopifyAPI::Metafield.new({
   :description => 'Author of book',
   :namespace => 'book',
   :key => 'author',
   :value => 'Kurt Vonnegut',
   :value_type => 'string'
}))

# retrieve metafield
author = ShopifyAPI::Metafield.find(:first,:params=>{:resource => "products", :resource_id => product.id, :namespace => "book", :key => "author"}).value 
```

更多信息：[http ://www.shopify.com/technology/3032322-new-feature-metafields](http://www.shopify.com/technology/3032322-new-feature-metafields)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:38:00.000

这似乎可以解决问题：

```
<% product.metafields.each do |metafield| %>
    <% if metafield.key == "book" %>
        <%= metafield.key %>: <%= metafield.value %><br/>
    <% end %>
<% end %> 
```

或者

```
<% product.metafields.each do |metafield| %>
    <% if metafield.key.include?("book") %>
        <%= metafield.key %>: <%= metafield.value %><br/>
    <% else %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:46:29.093

这有效：

```
ShopifyAPI::Metafield.find(:first,:params=>{:resource => "products", :resource_id => 94549954, :key => "book"}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:43:31.657

```
ShopifyAPI::Metafield.find(:all,:params=>{:product_id => product.id, :key=> 'book'}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T01:36:02.160

您可以获得产品的所有元字段

```
@product = ShopifyAPI::Product.find(params[:id]) 
```

之后，你可以得到它的元字段

```
@metafields = @product.metafields 
```

或者，如果您只需要该产品的特定元字段

```
@metafield = ShopifyAPI::Product::Metafield.find(:all, where: {"product_id = ? AND metafield.key = ?", product.id, "book"}) 
```

# php - 如何处理邮件功能中的撇号和\r\n？

> ID：11537972
> 
> 赞同：0
> 
> 时间：2012-07-18T09:12:23.240
> 
> 标签：php, html-email

我有从文本区域获取邮件消息的邮件功能。但只要有撇号和新行，它就会如下所示。

***示例输出：*** *评论：您的邮寄地址错误。你不能提供另一个吗？调查答案：项目：你做得很好。不是吗？\nitem2 : 最好喝杯茶？\n*

1) 有三个斜线和撇号。会不会和魔法逃跑有关？stripslashes 函数是更好的选择吗？

2) 新行转换为\r\n。问题是 \r\n 可能是 Windows 工件。在 Linux 服务器上，它可能只是 \n。使用 str_replace('\r\n', "\n", $message); 就足够了吗？? 然后 str_replace("\n", "
", $message); ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:14:56.607

1) 尝试添加stripslashes($message); 应该解决问题;)。

2）如果在使用 str_replace() 之后删除它，为什么还要添加 \n ？更好的解决方案是在消息中使用 HTML。在消息中添加支持 html 的标头，并进行中断。

编辑：我不确定第二个问题的答案是否正是您所说的。如果没有，请再描述一下，以便我可以帮助您:)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:20:42.587

$string = str_replace(array("\n","\r\n","\"), '', $string);

# objective-c - 以编程方式选择 NSMatrix 的项目

> ID：11537973
> 
> 赞同：0
> 
> 时间：2012-07-18T09:12:24.190
> 
> 标签：objective-c, cocoa, nsmatrix

如何以编程方式选择 NSMatrix 中的一项？我相信它是一个 NSControl，所以我正在查看那个特定的文档，但是我找不到关于特定主题的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:27:24.097

What about

```
-(void)selectCellAtRow:(NSInteger)row column:(NSInteger)column 
```

in NSMatrix?

# java - Android Dx Error1，无法转换为 Dalvik 格式

> ID：11537975
> 
> 赞同：2
> 
> 时间：2012-07-18T09:12:31.260
> 
> 标签：java, android, dalvik

我对这个问题感到绝望：我想导出/运行我的 Android 应用程序，`.jar`并在构建路径中添加了一个额外的应用程序。我确定我添加正确，还包括 5 个其他 .jar，它们都可以正常工作。

有了这个特殊的，我得到了提到的错误。我已经尝试了可以​​在这个问题中找到的所有内容： [外部 JAR 上的“Conversion to Dalvik format failed with error 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

和其他几个链接谷歌吐出。主要问题是，我实际上不明白我附加的消息想要告诉我什么，因为如果我将所有 jar 添加到“普通”javaproject 中，它运行得非常好......

> 在 Android 4.0.3 上开发，
> 
> proguard 4.8,
> 
> 广告 16.0.1.v201112150204-238534,
> 
> 日食 3.7.1.r37

请帮我

> [2012-07-18 10:45:48 - myapp] Dx 警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类 (iaik.xml.crypto.XSecProvider$1) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。
> 
> ……
> 
> [2012-07-18 10:45:48 - myapp] Dx 警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类 (iaik.xml.crypto.XSecProvider$2) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。
> 
> 不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。
> 
> 这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。
> 
> 但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。
> 
> 如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机分发的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。
> 
> 如果您继续使用“--core-library”但实际上是在构建应用程序，那么请预先警告您的应用程序在某些时候仍然无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。
> 
> 如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。
> 
> [2012-07-18 10:45:48 - myapp] Dx 1 错误；中止
> 
> [2012-07-18 10:45:48 - myapp] 转换为 Dalvik 格式失败，错误 1

这就是我的项目在资源管理器中的样子： ![http://s14.directupload.net/images/120718/zzy6mmym.jpg](../Images/0187afe57868be3871d32b87453485fd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:44:31.727

问题是您包含的 jar 在 java.* 或 javax.* 命名空间中有一个类。dx 不允许这样做，如上一条大错误消息中所述。

如果您确实需要这些类，则需要使用 jarjar 工具之类的工具将它们移动到不同的包中。否则，您需要将它们从 jar 中删除——我不确定，在一切都得到 dx'd 之前，proguard 可能会删除它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-17T07:56:11.777

我遇到了同样的问题，我终于通过明确导出我的私有库来解决它。

喜欢：项目>>属性>> Java构建路径>>库>>添加外部罐子。

注意：从 libs 文件夹中删除了我所有的私有库。我知道这是不正确的，但它对我有用。

谢谢，阿尼尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-05T07:11:59.413

执行以下操作：

```
project
  > properties
    > java build path
      > libraries
        > remove all including android jars 
```

现在，进入项目浏览器，右键单击您正在处理的项目，然后

```
android tools
  > fix project properties. 
```

做一个干净然后构建。

重启eclipse，就不会再出现错误了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T09:30:10.313

如果您在 Win7 上工作，请更改此行：

```
call %java_exe% -jar "%PROGUARD_HOME%"\lib\proguard.jar %* 
```

在`proguard.bat`文件中：

```
call %java_exe% -jar "%PROGUARD_HOME%"\lib\proguard.jar %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

`proguard.bat`位于：

> 【Android SDK安装目录】\tools\proguard\bin\proguard.bat

**编辑**：
我希望这些组合可以帮助您：
1-尝试`libraries projects`从您的项目中删除。
2-尝试导出您的项目（作为存档文件），从工作区删除项目及其源代码，然后再次导入。
3-尝试从路径中删除您的 jar，进行干净构建，然后将它们再次添加到您的项目中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T03:33:48.633

使用我自己的混淆 lib jar 时，我遇到了同样的错误。

我的日志：

*警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类的 InnerClasses 属性。此类可能由不针对现代 .class 文件格式的编译器引以为豪...*

我像这样解决了它：在混淆我的 jar 之前，我将“-keepattributes EnclosureMethod”添加到 proguard.cfg（或最新的 android adt 版本中的 proguard-project.txt）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T10:00:41.413

同意hasanghaforian。最简单的解决方案是删除库项目。右键单击您的项目-> 属性-> Java 构建路径，然后删除库项目

# mongodb - 副本集上的 RS102 MongoDB

> ID：11537977
> 
> 赞同：2
> 
> 时间：2012-07-18T09:12:34.597
> 
> 标签：mongodb, gridfs

我已经设置了一个包含 4 个服务器的副本集。

出于测试目的，我编写了一个脚本来使用 GridFS 将我的数据库填充到大约 1.5 亿行照片。我的照片约为 15KB。（将gridfs用于小文件应该不是问题吗？！）

几个小时后，大约有 5000 万行，但**我在日志中有这条消息**：

```
replSet error RS102 too stale to catch up, at least from 192.168.0.1:27017 
```

**这是 replSet 状态：**

```
 rs.status();
{
"set" : "rsdb",
"date" : ISODate("2012-07-18T09:00:48Z"),
"myState" : 1,
"members" : [
    {
        "_id" : 0,
        "name" : "192.168.0.1:27017",
        "health" : 1,
        "state" : 1,
        "stateStr" : "PRIMARY",
        "optime" : {
            "t" : 1342601552000,
            "i" : 245
        },
        "optimeDate" : ISODate("2012-07-18T08:52:32Z"),
        "self" : true
    },
    {
        "_id" : 1,
        "name" : "192.168.0.2:27018",
        "health" : 1,
        "state" : 3,
        "stateStr" : "RECOVERING",
        "uptime" : 64770,
        "optime" : {
            "t" : 1342539026000,
            "i" : 5188
        },
        "optimeDate" : ISODate("2012-07-17T15:30:26Z"),
        "lastHeartbeat" : ISODate("2012-07-18T09:00:47Z"),
        "pingMs" : 0,
        "errmsg" : "error RS102 too stale to catch up"
    },
    {
        "_id" : 2,
        "name" : "192.168.0.3:27019",
        "health" : 1,
        "state" : 3,
        "stateStr" : "RECOVERING",
        "uptime" : 64735,
        "optime" : {
            "t" : 1342539026000,
            "i" : 5188
        },
        "optimeDate" : ISODate("2012-07-17T15:30:26Z"),
        "lastHeartbeat" : ISODate("2012-07-18T09:00:47Z"),
        "pingMs" : 0,
        "errmsg" : "error RS102 too stale to catch up"
    },
    {
        "_id" : 3,
        "name" : "192.168.0.4:27020",
        "health" : 1,
        "state" : 3,
        "stateStr" : "RECOVERING",
        "uptime" : 65075,
        "optime" : {
            "t" : 1342539085000,
            "i" : 3838
        },
        "optimeDate" : ISODate("2012-07-17T15:31:25Z"),
        "lastHeartbeat" : ISODate("2012-07-18T09:00:46Z"),
        "pingMs" : 0,
        "errmsg" : "error RS102 too stale to catch up"
    }
],
"ok" : 1 
```

该设备仍在接受数据，但是由于我的 3 台服务器“停机”，我应该如何进行修复（比删除数据和重新同步要好，这需要很长时间，但会起作用）？

**尤其是：** 这是因为剧本过于暴力吗？这意味着它几乎从未在生产中发生过？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T10:21:38.167

您无需修复，只需执行完全重新同步即可。

在辅助上，您可以：

1.  停止失败的mongod
2.  删除 dbpath 中的所有数据（包括子目录）
3.  重新启动它，它会自动重新同步自己

按照[此处](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)的说明进行操作。

在您的情况下发生的情况是您的辅助节点已经过时，即它们的 oplog 和主节点上的 oplog 没有共同点。查看此[文档](http://docs.mongodb.org/manual/reference/replica-status/)，其中详细说明了各种状态。对主要成员的写入必须复制到辅助节点，而您的辅助节点无法跟上，直到它们最终变得陈旧。您将需要考虑调整[oplog](http://docs.mongodb.org/manual/tutorial/change-oplog-size/?highlight=resizing%20your%20oplog.)的大小。

关于 oplog 大小，这取决于您随时间插入/更新的数据量。我会选择一个允许您使用数小时甚至数天的 oplog 的大小。

此外，我不确定您正在运行哪个操作系统。但是，对于 64 位 Linux、Solaris 和 FreeBSD 系统，MongoDB 会将 5% 的可用可用磁盘空间分配给 oplog。如果此数量小于 1 GB，则 MongoDB 将分配 1 GB 的空间。对于 64 位 OS X 系统，MongoDB 为 oplog 分配 183 MB 的空间，对于 32 位系统，MongoDB 为 oplog 分配大约 48 MB 的空间。

记录有多大，你想要多少？这取决于您只是在测试的这种数据插入是典型的还是异常的。

例如，对于 1KB 的文档，如果每秒处理 2000 个文档，那么每分钟可以净赚 120MB，而 5GB 的 oplog 将持续大约 40 分钟。这意味着如果辅助节点离线 40 分钟或落后超过 40 分钟，那么您已经过时并且必须进行完全重新同步。

[我建议在这里](http://docs.mongodb.org/manual/core/replication-internals/)阅读 Replica Set Internals 文档。您的副本集中有 4 个成员，不建议这样做。您应该有一个奇数的[投票选举（主要）过程](http://www.mongodb.org/display/DOCS/Replica+Sets+-+Voting)，因此您需要添加一个仲裁器、另一个辅助节点或删除一个辅助节点。

最后，这里有一份关于[RS 管理](http://docs.mongodb.org/manual/administration/)的详细文档。

# python - Eclpise 和 pyDev

> ID：11537981
> 
> 赞同：0
> 
> 时间：2012-07-18T09:12:44.363
> 
> 标签：python, eclipse, pydev

可能重复，但我找不到。我已经下载了 python 并且无法将其加载到 eclipse 中，有没有人有一个傻瓜式的地面解决方案，它可以正常工作。这是我试过的，

Window--preferences--new--specified(Python 32) 和 C:\ 目录文件到 python.exe 但它不断吐出无效的解释器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:17:28.447

正如他们[在这里](https://stackoverflow.com/questions/2567895/eclipse-pydev-installation-difficulties?rq=1)所说的卸载，删除 .metadata 文件夹并重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:51:08.897

我的猜测是问题在于您可能指向的是快捷方式而不是实际的可执行文件，那么，您能否检查一下您是否真的在解释器配置过程中提供了可执行文件（而不是快捷方式）？

如果不是这种情况，请在此过程中在错误日志中发布您可能拥有的详细信息。

# php - 输入未添加到我的 mysql 服务器？

> ID：11537993
> 
> 赞同：0
> 
> 时间：2012-07-18T09:13:17.030
> 
> 标签：php, mysql, sql-server, database

所以在这里我试图用一些简单的 php 创建一个日志。

问题是我创建的数据库中没有添加任何内容。每当我检查数据库时，在留言簿表单上添加和提交文本后，我只会得到一个空数据集。

任何人都可以看到我的代码有任何问题吗？

```
<?php
$sql = mysql_connect("localhost" , "root") or die(mysql_error);
mysql_select_db("guestbook" , $sql);

if($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    $name = mysql_real_escape_string($_POST['name']);
    $email = mysql_real_escape_string($_POST['email']);

    $query = mysql_query("INSERT INTO message (name , email) VALUES ('$name' ,      '$email')");
    echo ("Message succesfully added.");
}
?>

<html>
    <head>
        <title>Guestbook</title>
    </head>
    <form action="index.php" method="post">
        Name: <input type="text" name="name"/><br>
        Email: <input type="text" name="email"/><br>
        <input type="submit" value="Post!"/>
    </form>
</html>

<?php
$result = mysql_query("SELECT * FROM message ORDER BY id DESC");
while($row = mysql_fetch_array($result))    
{
?>

<table>
    <tr>
        <td>Name:</td>
        <td><?php echo $row['name'] ?></td>
    </tr>
    <tr>
        <td>Message:</td>
        <td><?php echo $row['email'] ?></td>
    </tr>
</table>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:15:38.950

我认为这`name`是mysql中的保留字不是吗？

您可能必须按如下方式修改插入脚本：

```
$query = mysql_query("INSERT INTO message (`name` , email) VALUES ('$name', '$email')"); 
```

话虽如此，您的脚本很容易受到注入攻击。在将数据粘贴到 SQL 语句之前，您应该使用 PDO 并验证数据。当您的用户输入`bob;drop table users;`他的姓名并且您的查询运行时，您会怎么做？

编辑：另外，您缺少一个括号。

编辑 2：如果您仍然遇到错误，请运行此命令并告诉我们您看到的内容：

```
$sql = "INSERT INTO message (`name` , email) VALUES ('$name', '$email')";
echo $sql; 
```

您很有可能看到其中一个变量为空。

编辑3：

```
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    $name = mysql_real_escape_string($_POST['name']);
    $email = mysql_real_escape_string($_POST['email']);

    if(!empty($name) && !empty($email))
    {
        $query = mysql_query("INSERT INTO message (name , email) VALUES ('$name' ,      '$email')");
        echo ("Message succesfully added.");
    }
    else
    {
        echo "It seems that either name or email was empty, so not inserting data.<br>";
    }
}
?> 
```

编辑 4 - 又名*天哪！* 我还注意到我没有在从您的问题中复制的代码中添加额外的括号。从现在开始，我已经对其进行了编辑以包含它。

```
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    $username = mysql_real_escape_string($_POST['username']);
    $username = mysql_real_escape_string($_POST['useremail']);

    if(!empty($name) && !empty($email))
    {
        $query = mysql_query("INSERT INTO message (name , email) VALUES ('$username', '$useremail')");
        echo ("Message succesfully added.");
    }
    else
    {
        echo "It seems that either name or email was empty, so not inserting data.<br>";
    }
}

<html>
    <head>
    <title>Guestbook</title>
    </head>
    <form action="index.php" method="post">
    Name: <input type="text" name="username"/><br>
    Email: <input type="text" name="useremail"/><br>
    <input type="submit" value="Post!"/>
    </form>

?>
// Make sure you stick this </html> at the BOTTOM of you php file.
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:40:37.230

代替

```
mysql_query("INSERT INTO message (name , email) VALUES ('$name' , '$email'"); 
```

和

```
mysql_query("INSERT INTO message (name , email) VALUES ('$name' , '$email')"); 
```

# gwt - 是否可以干扰或规避 Google 的 GWT JS 代码生成？

> ID：11537994
> 
> 赞同：0
> 
> 时间：2012-07-18T09:13:22.100
> 
> 标签：gwt

我有兴趣使用静态 iframe 而不是默认创建的动态 iframe。

```
 var frameInjected;
  function maybeInjectFrame(){
    if (!frameInjected) {
      frameInjected = true;
      var iframe = $doc.createElement($intern_36);
      iframe.src = $intern_37;
      iframe.id = $intern_1;
      iframe.style.cssText = $intern_38;
      iframe.tabIndex = -1;
      $doc.body.appendChild(iframe);
      $stats && $stats({moduleName:$intern_1, sessionId:$sessionId, subSystem:$intern_2, evtGroup:$intern_8, millis:(new Date).getTime(), type:$intern_39});
      iframe.contentWindow.location.replace(base + initialHtml);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:52:30.663

是的，可以自定义 GWT 的 JS 生成。研究 GWT 链接器。

# facebook - Facebook分享按钮：它正式死了吗？

> ID：11537996
> 
> 赞同：27
> 
> 时间：2012-07-18T09:13:25.220
> 
> 标签：facebook, facebook-sharer

自 7 月 17 日起，旧的分享按钮在我管理的所有网站上停止工作。

我已经阅读了其他面临类似问题的用户的报告，但我找不到任何官方信息。

您知道是否有任何官方资源可用于此？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-08T15:45:48.193

**更新：** 截至 2020 年 5 月，Facebook 文档并未*明确*提及对 URL 的支持，但[Share Button](https://developers.facebook.com/docs/plugins/share-button)`/sharer.php`页面生成的片段仍引用该路径。

* * *

自从第一次被问到这个问题已经过去了一段时间，但 Facebook 文档中的一些新信息使我们有可能看到一些官方“证据”，证明`sharer.php`共享链接的方法仍然有效，仍然受到支持并且是活跃的。

参考是[文档的这一页，](https://developers.facebook.com/docs/reference/plugins/share-links/)还给出了一些示例：

> 这是共享对话框最简单的用法：
> 
> ```
> <a href="https://www.facebook.com/sharer/sharer.php?u=example.org" target="_blank">
>   Share on Facebook
> </a> 
> ```

并且：

> 您可以在新窗口或弹出窗口中指向此 URL。如果您使用 JavaScript 弹出新窗口，您还可以将当前共享页面的 URL 引用为 location.href。这为您提供了可以在所有页面上使用的代码：
> 
> ```
> var sharer = "https://www.facebook.com/sharer/sharer.php?u=";
> window.open(sharer + location.href, 'sharer', 'width=626,height=436'); 
> ```

总而言之，确实有一段时间的行为`sharer.php`是不可预测的。人们普遍认为该方法已被弃用并且使用它是不明智的。**现在，这已被正式破坏**，因为它`sharer.php`已添加到 Facebook 的文档中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-18T09:30:38.953

**更新 #3（2016 年 6 月）：**

它又消失了：文档中没有更多对 sharer.php 的引用。尽管您可以选择使用[共享对话框](https://developers.facebook.com/docs/sharing/reference/share-dialog)而不以任何形式与 facebook sdk 集成。一个重要的区别是所需的`app_id`参数。这是文档中的一个示例：

```
<a id="facebook" href="https://www.facebook.com/dialog/share?app_id=145634995501895&display=popup&href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2F&redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fexplorer" target="_blank">share me</a> 
```

* * *

**更新#2：**

请参阅@Lix 的答案。

* * *

**更新＃1：**

正如 Sean 指出的（感谢他），您可以使用 FBML 版本的分享按钮。FBML 版本的代码片段：

```
<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#" lang="en" style="overflow:hidden;">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
        <meta charset="utf-8">
        <title>Test</title>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOUR_APP_ID"; // appId must be valid
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
        <fb:share-button type="button_count" href="http://www.foobar.com">
        </fb:share-button>
    </body>
</html> 
```

注意：此版本的共享按钮（与 Facebook 当前的所有社交插件一样）会创建一个带有参数的 cookie，该`datr`参数可能对用户隐私构成威胁。如果您必须遵守隐私政策，则应牢记这一点。

sharer.php 版本的代码片段：

```
<a id="fb-share" style='text-decoration:none;' type="icon_link" onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=foo&amp;p[summary]=bar&amp;p[url]=https://www.foobar.com/&amp;p[images][0]=https://www.foobar.com/thumb.gif','sharer','toolbar=0,status=0,width=580,height=325');" href="javascript: void(0)">
    <img src="img/share.gif" width="62" height="18" alt="Share"/>
</a> 
```

* * *

**原始答案：**

分享按钮已在不久前被弃用。它现在可能完全死了，或者只是暂时的，只有 Facebook 知道。官方已弃用。

从[文档](https://developers.facebook.com/docs/reference/plugins/like/)中：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮 [...]

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T17:25:28.873

这里使用的代码，

```
<a name="fb_share" type="button_count" share_url="..." href="facebook.com/sharer.php" rel="nofollow">Share</a>

<script src="static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script> 
```

几年前已弃用，Facebook 于周一转而使用新的 JS SDK 代替它。

正式版的分享按钮是使用[JS SDK](https://developers.facebook.com/docs/reference/javascript/)并使用

```
<fb:share ..... /> 
```

也就是说，我们现在正在为它提供新的 SDK，我计划`<a name="fb_share" ...`今天让旧标签恢复活力 :) 抱歉。

但也许是时候更新到新的 SDK 了？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-19T09:20:46.637

所以总结一下，**如果你这样做，它仍然有效**：

```
<a target="_blank" style='text-decoration:none;' type="icon_link" href="http://www.facebook.com/sharer.php?u=URL-TO-SHARE-HERE"><img style="width:26px;height:26px;" src=".../facebook2.png"%>"/></a> 
```

它将打开共享弹出窗口，该弹出窗口在发布后将自行关闭。

但是每个人都应该尽快转向新的“喜欢”和“发送”按钮......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-05T17:10:18.520

我认为这似乎是一个很好的未来安全折衷方案，取自[fb 文档：](https://developers.facebook.com/docs/reference/dialogs/feed/ "facebook 开发文档")

> 直接 URL 示例
> 
> 您还可以通过显式将人们定向到 /dialog/feed 端点来调出 Feed 对话框：
> 
> [https://www.facebook.com/dialog/feed](https://www.facebook.com/dialog/feed)？app_id=458358780877780&
> 链接= [https://developers.facebook.com/docs/reference/dialogs/&](https://developers.facebook.com/docs/reference/dialogs/&)
> 图片= [http://fbrell.com/f8.jpg&](http://fbrell.com/f8.jpg&) name=Facebook%20Dialogs&
> caption=Reference%20Documentation&
> description=Using%20Dialogs %20to%20interact%20with%20users.&
> redirect_uri= [https://mighty-lowlands-6381.herokuapp.com/](https://mighty-lowlands-6381.herokuapp.com/)

您必须制作一个应用程序才能获得应用程序 ID 才能在此方法中使用，但您不必在提示用户发布之前获得用户的许可，并且您可以使用任何您喜欢的图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T20:50:28.830

7 月 18 日，Facebook 发布了一项更新——所有通过外部应用程序发布到页面的帖子现在都有一个分享按钮。以前人们使用了一些技巧来自己添加分享按钮（使用sharer.php），但现在应该删除它，因为通过应用程序发布的所有帖子都会自动获得一个分享按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-10T13:12:53.670

首先，他们弃用了分享按钮，转而支持点赞按钮（尽管分享继续有效，但就我的经验而言，它有问题）。但似乎，现在（2013 年 11 月 10 日）facebook 推出了新的分享按钮，它又可以正常工作了

检查这些链接

[https://developers.facebook.com/docs/plugins/share-button/](https://developers.facebook.com/docs/plugins/share-button/)

[https://developers.facebook.com/blog/post/2013/11/06/introducing-new-like-and-share-buttons/](https://developers.facebook.com/blog/post/2013/11/06/introducing-new-like-and-share-buttons/)

# android - 在安卓应用中记住密码

> ID：11537999
> 
> 赞同：1
> 
> 时间：2012-07-18T09:13:34.287
> 
> 标签：android

我已经开发了一个登录表单（用户名、密码和提交按钮），通过我的android应用程序中的soap webservices使用MySQL连接。在这里我希望添加一个“记住密码字段”。我在活动的 XML 资源中编写了这段代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/tf_userName"
    android:layout_width="194dp"
    android:layout_height="wrap_content"
    android:layout_x="106dp"
    android:layout_y="80dp" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="23dp"
    android:layout_y="93dp"
    android:text="User name" />

<EditText
    android:id="@+id/tf_password"
    android:layout_width="189dp"
    android:layout_height="wrap_content"
    android:layout_x="108dp"
    android:layout_y="161dp"
    android:inputType="textPassword" />

<TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="23dp"
    android:layout_y="176dp"
    android:text="Password" />
   <CheckBox android:layout_below="@+id/passwordview"
    android:layout_width="wrap_content" android:text="Remember Password!"
    android:layout_height="wrap_content" android:id="@+id/rempasswordcheckbox" 
    android:layout_x="23dp"
    android:layout_y="200dp" />

<Button
    android:id="@+id/btn_login"
    android:layout_width="106dp"
    android:layout_height="wrap_content"
    android:layout_x="50dp"
    android:layout_y="273dp"
    android:text="Login" />
<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="50dp"
    android:layout_y="350dp"
    android:text="Forget My password ?: Click here" />

<Button
    android:id="@+id/btn_reg"
    android:layout_width="106dp"
    android:layout_height="wrap_content"
    android:layout_x="175dp"
    android:layout_y="273dp"
    android:text="Register" />
 <Button
    android:id="@+id/btn_logout"
    android:layout_width="106dp"
    android:layout_height="wrap_content"
    android:layout_x="215dp"
    android:layout_y="25dp"
    android:text="Logout" />

<TextView
    android:id="@+id/tv_status"
    android:layout_width="151dp"
    android:layout_height="38dp"
    android:layout_x="26dp"
    android:layout_y="234dp"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

我的 Login.java 文件是：

```
package com.truebranches;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Login extends Activity {
private final String NAMESPACE = "http://ws.userlogin.com";
private final String URL = "http://192.168.1.168:8085/Login/services/Login?wsdl";
private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    Button register = (Button) findViewById(R.id.btn_reg);
    register.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), Register.class);
            startActivity(i);
        }
    });
    Button logout = (Button) findViewById(R.id.btn_logout);
    logout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), Login.class);
            startActivity(i);
        }
    });
    TextView forgetpassword = (TextView) findViewById(R.id.TextView03);
    forgetpassword.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), ForgetPassword.class);
            startActivity(i);
        }
    });
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

  public void onClick(View arg0) {
  loginAction();

  }
 });
 }

  private void loginAction(){
  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

           if(status.equals("Success!"))
            {
               Intent intent = new Intent(Login.this,HomePage.class);
               intent.putExtra("username",userName.getText().toString());
               startActivity(intent);

            }
           else
            {
               Intent i = new Intent(getApplicationContext(), Login.class);
               startActivity(i);
            }
           }

    catch(Exception e){

    }
   }

   } 
```

但是如何创建 Java 代码？我似乎无法做到这一点。请指导我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:16:39.613

编辑 - - - - - - -

```
import....
import android.widget.CheckBox;         // <--- Add
import android.content.SharedPreferences;   // <--- Add
import android.widget.EditText; // <--- Add
.
.
.
.
private static final String SPF_NAME = "vidslogin"; //  <--- Add this
private static final String USERNAME = "username";  //  <--- To save username
private static final String PASSWORD = "password";  //  <--- To save password
CheckBox chkRememberMe; //      <--- You even not taken CheckBox, SILLY WORKER
EditText etUserName, etPassword;    //      <--- You even not taken CheckBox,     SILLY WORKER

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    chkRememberMe = (CheckBox) findViewById(R.id.rempasswordcheckbox);  //      <---  Instantiate CheckBox...
    etUserName = (EditText) findViewById(R.id.tf_userName); //  <---  Instantiate     EditText...
    etPassword = (EditText) findViewById(R.id.tf_password); //  <---  Instantiate EditText...

    //  ADD THIS  TO  READ  SAVED  username & password  NEXT-TIME OPENING Application
    SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME,
            Context.MODE_PRIVATE);
    etUserName.setText(loginPreferences.getString(USERNAME, ""));
    etPassword.setText(loginPreferences.getString(PASSWORD, ""));
.
.
.
.
.
.
private void loginAction() {
.
.
.
.
if (status.equals("Success!"))
{
    //   ADD  to save  and  read next time
        String strUserName = etUserName.getText().toString().trim();
        String strPassword = etPassword.getText().toString().trim();
        if (null == strUserName || strUserName.length() == 0)
                    {
            //  showToast("Enter Your Name");
            etUserName.requestFocus();
        } else if (null == strPassword || strPassword.length() == 0)
                    {
                //      showToast("Enter Your Password");
            etPassword.requestFocus();
        } else
                    {
            if (chkRememberMe.isChecked())
                            {
                SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                loginPreferences.edit().putString(USERNAME, strUserName).putString(PASSWORD, strPassword).commit();
            } else
                            {
                SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                loginPreferences.edit().clear().commit();
                            }
//      OVER

    Intent intent = new Intent(Login.this, HomePage.class);
    intent.putExtra("username", userName.getText().toString());
    startActivity(intent);
} 
```

* * *

如果 YourCheckBox 找到**isChecked()==true**

在登录按钮时**单击**

只需将用户名和密码保存到**SharedPreference。**

```
Declare PREFRENCES_NAME = "Name You Like"
Save Data:-

SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
settings.edit().putString("name", strName).putString("pwd", strPass).commit();

Retrieve Data:-

SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
String name = settings.getString("name", "");
String password = settings.getString("pwd", "");

Clear Data:-

SharedPreferences settings = getSharedPreferences(
PREFRENCES_NAME, Context.MODE_PRIVATE);
settings.edit().clear().commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:15:34.500

如果在登录时选中该复选框

*   将密码存储在[本地存储中](http://developer.android.com/guide/topics/data/data-storage.html)
*   在运行时检索，只要登录活动启动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:19:02.813

使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)是最简单的方法。

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putString(PREFERENCE_IDENTIFIER, usersPassword);
editor.commit(); 
```

健康）状况

```
if (rememberPasswordCheckbox.isChecked()) {
// save password here
} 
```