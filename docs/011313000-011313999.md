# StackOverflow 问答 11313000-11313999

# c# - 棋盘中的拖动问题

> ID：11313006
> 
> 赞同：0
> 
> 时间：2012-07-03T14:24:15.573
> 
> 标签：c#, drag-and-drop

我有国际象棋桌，我的元素现在按照规则移动。但是当我拖出规则时，我的按钮消失了......我该如何解决？（红色按钮显示我可以去哪里我的元素）例如骑士现在正在按照规则移动（如果我没有越过红色按钮没有问题）但是当我越过红色的地方并且如果我掉到那里骑士消失了，红色的地方变回了原来的颜色（没有更多的红色地方表明我的骑士可以去哪里）。我试图进行调试，但由于我是 C# 的新手并且调试我还没有解决问题。如果你启发我的方式，我会很高兴。我该如何解决？谢谢

```
 void btn_DragEnter(object sender, DragEventArgs e)
        {
        Button button = (Button)sender;
        e.Effect = DragDropEffects.Move;
        for (int x = 0; x <= 7; x++)
        {
        for (int y = 0; y <= 7; y++)
        {
        btn[x, y].Image = null;
        if ((x + y) % 2 == 0)
        btn[x, y].BackColor = Color.Black;
        else
        btn[x, y].BackColor = Color.White;
        }
        }
        }

        void btn_DragDrop(object sender, DragEventArgs e)
        {
        Button button = (Button)sender;
        button.Image = (Bitmap)e.Data.GetData(DataFormats.Bitmap);

        int[] dizi = (int[])button.Tag;
        int x = dizi[0];
        int y = dizi[1];

        for (int a = 0; a <= 7; a++)
        {
        for (int b = 0; b <= 7; b++)
        {
        btn[a, b].AllowDrop = false;
        }
        }

        if ((x + 1 >= 0 && y + 2 <= 7) && (y + 2 >= 0 && x + 1 <= 7))
        {
        btn[x + 1, y + 2].BackColor = Color.Red;
        btn[x + 1, y + 2].AllowDrop = true;
        }
        if ((x + 1 >= 0 && y - 2 <= 7) && (y - 2 >= 0 && x + 1 <= 7))
        {
        btn[x + 1, y - 2].BackColor = Color.Red;
        btn[x + 1, y - 2].AllowDrop = true;
        }
        if ((x - 1 >= 0 && y + 2 <= 7) && (y + 2 >= 0 && x - 1 <= 7))
        {
        btn[x - 1, y + 2].BackColor = Color.Red;
        btn[x - 1, y + 2].AllowDrop = true;
        }
        if ((x - 1 >= 0 && y - 2 <= 7) && (y - 2 >= 0 && x - 1 <= 7))
        {
        btn[x - 1, y - 2].BackColor = Color.Red;
        btn[x - 1, y - 2].AllowDrop = true;
        }
        if ((x + 2 >= 0 && y + 1 <= 7) && (y + 1 >= 0 && x + 2 <= 7))
        {
        btn[x + 2, y + 1].BackColor = Color.Red;
        btn[x + 2, y + 1].AllowDrop = true;
        }
        if ((x + 2 >= 0 && y - 1 <= 7) && (y - 1 >= 0 && x + 2 <= 7))
        {
        btn[x + 2, y - 1].BackColor = Color.Red;
        btn[x + 2, y - 1].AllowDrop = true;
        }
        if ((x - 2 >= 0 && y + 1 <= 7) && (y + 1 >= 0 && x - 2 <= 7))
        {
        btn[x - 2, y + 1].BackColor = Color.Red;
        btn[x - 2, y + 1].AllowDrop = true;
        }
        if ((x - 2 >= 0 && y - 1 <= 7) && (y - 1 >= 0 && x - 2 <= 7))
        {
        btn[x - 2, y - 1].BackColor = Color.Red;
        btn[x - 2, y - 1].AllowDrop = true;
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:41:01.017

DoDragDrop is called only when actually dropping the piece. Your logic for determining where the piece can be dropped should be run when starting the drag, in MouseDown or MouseMove, before the call to DoDragDrop. It also seems you are clearing the red buttons in the DragEnter function. That also should be done in the MouseDown/MouseMove function, after the call to DoDragDrop.

# python - 使用 PyUSB 通过 USB 发送数据

> ID：11313008
> 
> 赞同：2
> 
> 时间：2012-07-03T14:24:16.960
> 
> 标签：python, pyusb

我需要使用 Python 通过 USB 发送数据，我正在使用 PyUSB (http://sourceforge.net/apps/trac/pyusb/) 我寻找任何可用的 USB 端口，并尝试发送一条消息：

```
devList = usb.core.find(find_all=True)
for dev in devList:
    for cfg in dev:
        for intf in cfg:
            sys.stdout.write('\t' + str(intf.bInterfaceNumber) + ',' + str(intf.bAlternateSetting) + '\n')
            for ep in intf:
                sys.stdout.write('\t\t' + str(ep.bEndpointAddress) + '\n')
                if ep.bEndpointAddress:
                    try:
                        dev.write(ep.bEndpointAddress, 'test', intf.bInterfaceNumber)
                    except Exception:
                        print "\t\terror : dev.write("+str(ep.bEndpointAddress)+", 'test', "+str(intf.bInterfaceNumber)+")" 
```

结果是：

```
 0,0
            129
            error : dev.write(129, 'test', 0)
    0,1
            129
            error : dev.write(129, 'test', 0)
    0,0
            136
            error : dev.write(136, 'test', 0)
            10
            error : dev.write(10, 'test', 0)
    1,0
            139
            error : dev.write(139, 'test', 1)
            13
            error : dev.write(13, 'test', 1) 
```

没有 try catch 它给出：

```
usb.core.USBError: [Errno None] usb_claim_interface: could not claim interface 0, invalid configuration 0 
```

怎么了？有没有通过usb与python进行通信的最佳方式？因为我刚刚找到了这个库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:02:06.190

如[教程](http://pyusb.sourceforge.net/docs/1.0/tutorial.html)中所述：

> [...] 设备在没有设置配置的情况下无法工作，即使它只有一个配置！[...]

显然大多数时候只有一种配置。假设所有这些配置来自不同的设备，您可以执行以下操作：

```
for dev in devList:
    for cfg in dev:

        cfg.set()

        for intf in cfg: 
```

如果由于“资源繁忙”而无法设置配置，则需要卸载其接口内核驱动程序：

```
dev.detatch_kernel_driver(interface) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T06:41:04.130

我有这个问题。通过使用得到纠正

```
dev.set_configuration() 
```

[pyUSB 教程](https://github.com/walac/pyusb/blob/master/docs/tutorial.rst)

# amazon-web-services - 免费的亚马逊 AWS/RDS 实例

> ID：11313013
> 
> 赞同：3
> 
> 时间：2012-07-03T14:24:23.363
> 
> 标签：amazon-web-services, amazon-rds

我在 AWS 和 RDS 上为关系数据库托管了一个服务器应用程序。虽然我选择了免费帐户，但 RDS 的费用为每小时 0.0025 美元，相当于每月 18 美元。

我阅读了一些文档，但仍然无法弄清楚这一点。是这样还是有办法获得免费的 RDS 帐户以进行测试？

感谢 OpenTube

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-12T18:02:38.533

I've just started setting this up and I realized quickly that it was allowing me to make selections that couldn't possibly be free. When setting up your free teir instance, look on the left hand side of the screen for

> Your current selection is eligible for the free tier.

Once you select something like "Multi-AZ Deployment" or use any DB Instance Class other than "db.t2.micro" it will slyly change the left column display:

> The following selections disqualify the instance from being eligible for the free tier:
> 
> > Multi-AZ Deployment

Just be careful in your selections and usage to maintain the free teir.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T15:05:43.413

您正在运行什么类型的数据库？免费套餐仅适用于 SQL Server 微型数据库实例：

> 750 小时的 Amazon RDS for SQL Server Micro DB 实例使用（在单个可用区中运行 SQL Server Express Edition）

请参阅[http://aws.amazon.com/free/](http://aws.amazon.com/free/)

MySQL 和 Oracle 还有 60 天免费试用：

请参阅[http://aws.amazon.com/rds/free-trial/](http://aws.amazon.com/rds/free-trial/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T11:15:47.247

您最简单的选择是在您的实例上安装数据库。

或者，您可以考虑使用提供的托管 MySQL 服务，例如[http://xeround.com/](http://xeround.com/)或[http://www.cleardb.com/](http://www.cleardb.com/)，两者都有有限但免费的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T20:59:20.993

自 2012 年 10 月 1 日起，AWS 免费使用套餐现在包括 Amazon RDS。免费层适用于 MySQL 的单可用区部署、Oracle“自带许可 (BYOL)”许可模式和 SQL Server Express Edition。

有关更多详细信息，请参阅亚马逊的此链接： [https ://aws.amazon.com/about-aws/whats-new/2012/10/01/amazon-rds-aws-free-tier/](https://aws.amazon.com/about-aws/whats-new/2012/10/01/amazon-rds-aws-free-tier/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-31T15:54:06.683

你应该使用 t1.micro。它位于选项的底部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-28T15:51:35.907

重要的是不要选择RDS Aurora。如果您选择 MySql 或 Postgres，网页将显示模板 Free Tier。选择它时，所有默认配置都适用于免费层。

部分截图： [https ://www.golery.com/pencil/zr](https://www.golery.com/pencil/zr)

# iphone - iPhone 崩溃报告框架

> ID：11313015
> 
> 赞同：4
> 
> 时间：2012-07-03T14:24:34.123
> 
> 标签：iphone, ios, crash

我想为我的 iPhone 应用程序添加崩溃报告功能。那种在崩溃后下次启动应用程序时提示您发送崩溃报告的类型（我在 NYTines iPhone 应用程序中看到了此功能，但我相信肯定还有其他应用程序也这样做）。这是一个可以轻松包含在任何应用程序中的第 3 方框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:26:11.227

这些框架有很多，关于它们的好文章可以在[这里找到](http://www.jeremyfuller.net/2011/06/the-battle-of-the-ios-crash-reporters/)

但是我建议使用[http://www.crittercism.com/](http://www.crittercism.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:26:21.543

[Crittercism](https://www.crittercism.com/)满足我目前的需求。支持团队也很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:29:39.730

我正在使用[QuincyKit](http://quincykit.net/)。不过请注意——您需要从主站点重新下载崩溃报告器框架——Quincy 站点的构建在某些 Xcode/iOS 组合上行为不端。

但是服务器端安装很容易，符号化基础设施也很容易设置。

# matlab - 下标分配尺寸不匹配

> ID：11313016
> 
> 赞同：0
> 
> 时间：2012-07-03T14:24:38.900
> 
> 标签：matlab

过去，这对我来说是一个相当微不足道的错误，但我在这里没有看到。

```
 >> rmatrix = zeros(size(Rx,1), size(Rx,2));
 for k = 1:size(Rx,1)
     for l = 1:size(Rx,2)
         rmatrix(k,l) = [Rx(k,l).^2, (Ry(k,l)).^2];
     end
 end
??? Subscripted assignment dimension mismatch. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T14:28:25.163

```
rmatrix(k,l) = [Rx(k,l).^2, (Ry(k,l)).^2]; 
```

您正在尝试将矩阵分配`1x2`给`1x1`矩阵

也许您打算执行以下操作：

```
rmatrix = zeros(size(Rx,1), size(Rx,2),2);
for k = 1:size(Rx,1)
    for l = 1:size(Rx,2)
        rmatrix(k,l,:) = [Rx(k,l).^2, (Ry(k,l)).^2];
    end
end 
```

//edit: 你可以用它做的更容易：

```
rmatrix = cat(3,Rx,Ry).^2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:27:49.047

```
 >> rmatrix = zeros(size(Rx,1), size(Rx,2));
 for k = 1:size(Rx,1)
     for l = 1:size(Rx,2)
         rmatrix(k,l) = [Rx(k,l).^2, (Ry(k,l)).^2];  % CHECK THIS LINE
     end
 end
??? Subscripted assignment dimension mismatch. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:29:10.833

问题肯定是这个？？

```
 rmatrix(k,l) = [Rx(k,l).^2, (Ry(k,l)).^2]; 
```

您将向量分配给数组的标量元素。这不是问题吗？

# wcf - C# ConcurrentQueue - Enqueue 发生时引发事件？

> ID：11313018
> 
> 赞同：4
> 
> 时间：2012-07-03T14:24:39.850
> 
> 标签：wcf, triggers, concurrent-collections

我有一个托管在 Windows 服务中的 WCF 服务。

WCF 服务被注入一个`ConcurrentQueue<SomeClass>`.

Windows 服务（托管 WCF 服务）也注入了`ConcurrentQueue<SomeClass>`.

Windows 服务启动 WCF 服务，并产生一个工作线程。

工作线程将 ( `Enqueue`) 对象推`SomeClass`送到`ConccurrentQueue`.

我希望以某种方式在对象入队时触发 WCF 服务，`ConcurrentQueue`以便它可以将其（以及可能在队列中的任何其他对象）出列，并向所有连接的客户端发送消息。

.

**两个问题：**

1.  如何使 WCF 服务“挂钩”注入的 ConccurentQueue 的“入队”方法，以便在将对象推入队列时 - WCF 服务会对此做些什么？

2.  如果我设法以某种方式挂钩“入队”事件，并且现在 Windows 服务中的工作线程已将**两个**对象入队 - 这意味着它还会“触发”两次 WCF 服务的“入队挂钩” - 那些两个触发事件发生在不同的线程中？我需要以某种方式确保 WCF 服务按顺序从队列中提取对象。我不想突然看到对于每个 Enqueue 操作 - WCF 服务在单独的线程中触发并将对象拉出......

我希望我的问题足够清楚......

.

**[更新]**

与 Chris 聊天后，我得出的结论是，最好的方法是将工作线程与 WCF 服务分开，并让工作线程作为客户端调用 WCF 服务。这意味着我不必摆弄队列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:36:56.937

将 ConcurrentQueue 包装在一个简单的类中，该类公开 Enqueue 和 Dequeue 调用，然后将您的钩子放在此类中。每当调用 YourClass.Enqueue 时，触发 WCF 活动，该活动可以调用 YourClass.Dequeue。YourClass.Dequeue 将排空队列并将其放入 WCF 服务可以按顺序处理的有序枚举中。

# linux - 比赛后grep

> ID：11313021
> 
> 赞同：2
> 
> 时间：2012-07-03T14:24:48.997
> 
> 标签：linux, bash, grep

我在文本文件中有以下几行

```
myname aaa age 22
age 23 myname bbb 
```

如何使用 linux *grep命令找到***myname**之后的单词。？

 *我希望输出是 myname 之后的单词（ aaa 和 bbb ）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:42:00.660

```
$ grep -Po '(?<=myname\s)\w+' inputFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:31:56.880

```
$ grep -o "myname [[:alnum:]]\+" /tmp/sample | cut -f2 -d' '
aaa
bbb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:37:27.127

解决方案`sed`：

```
sed -n '/myname/{s/.*myname \([^ ]*\).*/\1/;p}' 
```*

# sql-server - SQL Server ON DELETE 和继承

> ID：11313024
> 
> 赞同：0
> 
> 时间：2012-07-03T14:24:53.533
> 
> 标签：sql-server, entity-framework, database-design

我有 3 个表：Notifications、NewItemNotifications 和 Items。
我在 NewItemNotifications 和 Items 表上设置了 ON DELETE 规则，当我删除某些项目时，它会删除 NewItemNotification 行。
问题是 Notifications 表中的父行仍然存在，我该如何处理？

![在此处输入图像描述](../Images/ff5807570fe8494a7287711238c6c67a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:48:03.210

`NewItemNotification`是依赖表 - 它永远不会通过数据库约束触发删除父记录。唯一的方法是在依赖记录被删除后写入数据库触发器`NewItemNotification`以在表中执行删除。`Notification`

问题是如果 EF 将尝试删除此类触发器可能会导致问题，`NewItemNotification`因为它不知道触发器存在。它首先删除了在没有 EF 知道的情况下`NewItemNotification`触发删除项目的记录。`Notification`然后 EF 将再次尝试删除`Notification`记录，但该记录已被删除。我认为这会导致并发异常。

在这种情况下，最好的选择是不使用级联删除并自己处理删除。

# javascript - Javascript/Facebox getElementById 不返回任何内容

> ID：11313026
> 
> 赞同：1
> 
> 时间：2012-07-03T14:24:56.497
> 
> 标签：javascript, html, css, getelementbyid, facebox

我正在使用带有表单的 facebox 打开一个小型模式对话框，然后尝试使用 javascript 访问该表单上的文本字段内的值。这是 HTML 代码 -

```
<div id="dialog-form95" style="display:none">
<div class="block">
  <form action="" method="post" name="form95">
    <h3>Setting URL</h3>
    <p></p>
    <p><label>URL : </label></p><input type="text" class="text" id="du95" name="url"/>
    <p><input type="submit" class="submit small" value="save" onclick="updateUrl(95,109); return false;"/></p>
  </form>
</div>
</div> 
```

这是 javascript onclick -

```
function updateUrl(bid, cid){
    alert(document.getElementById('du'+bid).value);
} 
```

我什至尝试硬编码“du95”。每当我更新文本框中的任何内容并提交时，它都会显示一个空白警报对话框。js 控制台中也没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:26:58.267

那是因为它没有价值。试试看会发生什么：

```
 <input type="text" class="text" id="du95" name="url" value="testing" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:28:40.977

出于某种原因，你有`display: none`你的容器 div。

删除后，它似乎在 jsfiddle 中工作正常：http: [//jsfiddle.net/8bSdK/](http://jsfiddle.net/8bSdK/)

# php - 重定向前 Magento 中的事件调度

> ID：11313030
> 
> 赞同：3
> 
> 时间：2012-07-03T14:25:03.660
> 
> 标签：php, session, magento, redirect

在 Magento 中使用事件调度时遇到了问题。

我正在使用 controller_action_predispatch 从 URL 中的参数设置前端会话变量。

现在，问题似乎是，当用户最初访问该站点时，他们可能会借用一个页面，该页面会将他们重定向到基本 URL（例如 example.com 到 www.example.com）。但是由于某种原因，重定向后，会话变量丢失了......

有任何想法吗？

谢谢你。

编辑：

添加使用的代码：

```
public function grabRef($observer) {
    $ref = Mage::app()->getRequest()->getParam('ref', $default);
    if (isset($ref) && !is_null($ref) and !empty($ref)) {

        Mage::getSingleton('core/session',array('name'=>'frontend'))->setRefid($ref);

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T21:07:26.063

在此重定向之前仅调度了两个远程有用的事件，但它们并不特定于重定向：

*   `controller_front_init_before`
*   `controller_front_init_routers`

重定向取决于**System > Configuration > Web > Url Options**中的“自动重定向到基本 URL”设置，该设置由[`Mage_Core_Controller_Varien_Front->_checkBaseUrl()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Core/Controller/Varien/Front.php#L300). 此重定向发生在任何调度发生之前，并且它不会附加 GET 或 POST 数据，因此会丢失您尝试捕获的参数。

通常会话在`adminhtml`或`frontend`基于正在使用的控制器类的会话命名空间下初始化（参考动作控制器超类方法[`Mage_Core_Controller_Varien_Action->preDispatch()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Core/Controller/Varien/Action.php#L494)。您应该能够将观察者配置移动到下`global/events/controller_front_init_before`。***请注意，您必须在`global`事件区域中执行此操作，作为前端事件配置部分直到此事件被调度后才会加载。***那个特定的场景花了我一个小时一次！

# c++ - Openscenegraph - 如何创建一个相机无法超越的不可见边界

> ID：11313031
> 
> 赞同：2
> 
> 时间：2012-07-03T14:25:04.797
> 
> 标签：c++, 3d, openscenegraph, scenegraph

我是 3d 编程的新手，所以就到这里。我正在尝试模拟一个房间。我没有加载墙壁的图像，但我想在代码中模拟边界。请问我该怎么做？

下面是处理相机移动的代码

```
bool calcMovement()
{
    // return if less then two events have been added.
    if (_ga_t0.get()==NULL || _ga_t1.get()==NULL) return false;

    //calcIntersect();

    double dt = _ga_t0->getTime()-_ga_t1->getTime();

    if (dt<0.0f)
    {
        OSG_INFO << "warning dt = "<<dt<< std::endl;
        dt = 0.0;
    }

    double accelerationFactor = _height*10.0;

    switch(_speedMode)
    {
        case(USE_MOUSE_Y_FOR_SPEED):
        {
            double dy = _ga_t0->getYnormalized();
            _velocity = _height*dy;
            break;
        }
        case(USE_MOUSE_BUTTONS_FOR_SPEED):
        {
            unsigned int buttonMask = _ga_t1->getButtonMask();
            //add cases here for finding which key was pressed. 
            if (buttonMask==GUIEventAdapter::LEFT_MOUSE_BUTTON || wPressed)
            {
                // pan model.

                _velocity += dt*accelerationFactor;

            }
            else if (buttonMask==GUIEventAdapter::MIDDLE_MOUSE_BUTTON ||
                buttonMask==(GUIEventAdapter::LEFT_MOUSE_BUTTON|GUIEventAdapter::RIGHT_MOUSE_BUTTON))
            {

                _velocity = 0.0;

            }
            else if (buttonMask==GUIEventAdapter::RIGHT_MOUSE_BUTTON || sPressed)
            {

                _velocity -= dt*accelerationFactor;

            }
            break;
        }
    }

    osg::CoordinateFrame cf=getCoordinateFrame(_eye);

    osg::Matrixd rotation_matrix;
    rotation_matrix.makeRotate(_rotation);

    osg::Vec3d up = osg::Vec3d(0.0,1.0,0.0) * rotation_matrix;
    osg::Vec3d lv = osg::Vec3d(0.0,0.0,-1.0) * rotation_matrix;
    osg::Vec3d sv = osg::Vec3d(1.0,0.0,0.0) * rotation_matrix;

    // rotate the camera.
    double dx = _ga_t0->getXnormalized();

    double yaw = -inDegrees(dx*50.0*dt);

#ifdef KEYBOARD_PITCH
    double pitch_delta = 0.5;
    if (_pitchUpKeyPressed) _pitch += pitch_delta*dt;
    if (_pitchDownKeyPressed) _pitch -= pitch_delta*dt;
#endif

#if defined(ABOSULTE_PITCH)
    // absolute pitch
    double dy = _ga_t0->getYnormalized();
    _pitch = -dy*0.5;
#elif defined(INCREMENTAL_PITCH)
    // incremental pitch
    double dy = _ga_t0->getYnormalized();
    _pitch += dy*dt;
#endif

    osg::Quat yaw_rotation;
    yaw_rotation.makeRotate(yaw,up);

    _rotation *= yaw_rotation;

    rotation_matrix.makeRotate(_rotation);

    sv = osg::Vec3d(1.0,0.0,0.0) * rotation_matrix;

    wPressed = false;
    sPressed = false;

    // movement is big enough the move the eye point along the look vector.
    if (fabs(_velocity*dt)>1e-8)
    {
        double distanceToMove = _velocity*dt;

        double signedBuffer;
        if (distanceToMove>=0.0) signedBuffer=_buffer;
        else signedBuffer=-_buffer;

        // check to see if any obstruction in front.
        osg::Vec3d ip, np;
        if (intersect(_eye,_eye+lv*(signedBuffer+distanceToMove), ip, np))
        {
            if (distanceToMove>=0.0)
            {
                distanceToMove = (ip-_eye).length()-_buffer;
            }
            else
            {
                distanceToMove = _buffer-(ip-_eye).length();
            }

            _velocity = 0.0;
        }

        // check to see if forward point is correct height above terrain.
        osg::Vec3d fp = _eye + lv*distanceToMove;
        osg::Vec3d lfp = fp - up*(_height*5.0);

        if (intersect(fp, lfp, ip, np))
        {
            if (up*np>0.0) up = np;
            else up = -np;

            _eye = ip+up*_height;

            lv = up^sv;

            computePosition(_eye,_eye+lv,up);

            return true;

        }

        // no hit on the terrain found therefore resort to a fall under
        // under the influence of gravity.
        osg::Vec3d dp = lfp;
        dp -= getUpVector(cf)* (2.0*_modelScale);

        if (intersect(lfp, dp, ip, np))
        {

            if (up*np>0.0) up = np;
            else up = -np;

            _eye = ip+up*_height;

            lv = up^sv;

            computePosition(_eye,_eye+lv,up);

            return true;
        }

        // no collision with terrain has been found therefore track horizontally.

        lv *= (_velocity*dt);

        _eye += lv;
    }

    return true;
} 
```

# javascript - EXTJS 3，如何显示要弹出的网格？

> ID：11313034
> 
> 赞同：0
> 
> 时间：2012-07-03T14:25:14.030
> 
> 标签：javascript, extjs

在 EXTJS 3 中，如何在弹出窗口中显示网格？

我有这个编码，为什么它不起作用？

```
 var myData = [['ddd', '1111'], ['eee', '2222']];

            var store = new Ext.data.ArrayStore({
                fields: [
                   { name: 'FLD' },
                   { name: 'VAL' }
                ]
            });
            store.loadData(myData);

            var grid = new Ext.grid.GridPanel({
                store: store,
                loadMask: true,
                colModel: new Ext.grid.ColumnModel({
                    defaults: {
                        width: 120,
                        sortable: true
                    },
                    columns: [
                        { header: 'FLD', dataIndex: 'FLD' },
                        { header: 'VAL', dataIndex: 'VAL' }
                    ]
                }),
                viewConfig: {
                    forceFit: true
                }
            });

            var myWin = Ext.create("Ext.Window", {
                layout: 'fit',
                title: 'Exception Detail',
                width: 400,
                height: 300,
                closable: false,
                buttonAlign: 'center',
                items: [grid],
                modal: true
            });
            myWin.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:30:49.923

这段代码完全没有问题，但是如果你在 JSFiddle 上尝试过，它就不起作用，我不知道为什么。我尝试使用本地的 Ext 3.4，它工作正常。这是我的代码。

```
<html>
<head>
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type='text/javascript' src='ext-3.4.0/ext-all.js'></script>
</head>
<body>
</body>
<script>
Ext.onReady(function() {

var myData = [['ddd', '1111'], ['eee', '2222']];

    var store = new Ext.data.ArrayStore({
        fields: [
            { name: 'FLD', type: 'string' },
            { name: 'VAL', type: 'string' }
        ]
    });

    store.loadData(myData);

    var grid = new Ext.grid.GridPanel({
        store: store,
        loadMask: true,
        columns: [
            { header: 'FLD', dataIndex: 'FLD' },
            { header: 'VAL', dataIndex: 'VAL' }
        ],
        viewConfig: {
            forceFit: true
        }
    });

    var myWin = new Ext.Window({
        layout: 'fit',
        title: 'Exception Detail',
        width: 400,
        height: 300,
        closable: false,
        buttonAlign: 'center',
        items: [grid],
        modal: true
    });
    myWin.show();});
</script> 
```

# c# - 处理 WPF 菜单 HeaderStringFormat 和访问键等

> ID：11313037
> 
> 赞同：4
> 
> 时间：2012-07-03T14:25:22.910
> 
> 标签：c#, wpf, mvvm, menuitem, access-keys

好的。所以我希望我的应用程序在其主菜单中显示“保存”和“另存为...”项，就像 Visual Studio 一样；即“保存{当前文件}”和“将{当前文件}另存为...”

我还想要普通的访问键（分别为“S”和“A”）。

我提出了两种解决方案，但都不是很理想。

*   我可以在 MainWindowViewModel 中创建所有主菜单，而不是专门在 xaml 中创建主菜单，这样我就可以完全控制生成的 MenuItems 中的内容。但是，我觉得这违反了 MVVM（这次我试图非常严格地遵守），因为我必须在 ViewModel 中包含对每个 MenuItem 图标的引用。另外，它似乎有点乱。

*   我可以像这样规定这两个特定菜单项（可能还有未来的）的标题，但最终我得到一个菜单项，它不仅在标题中有下划线，而且不包含访问密钥。

```
<MenuItem Header="{Binding CurrentFileName}"
          HeaderStringFormat="Save {0} _As..."> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:46:42.253

咳咳，想通了。至少关于如何使用 XAML 中描述的整个主菜单完成它。只需将标题内容设置为 AccessText 控件而不是字符串，它就像一个魅力。

```
<MenuItem>
    <MenuItem.Style>
        <Style TargetType="{x:Type MenuItem}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding HasSelection}" Value="false">
                    <Setter Property="IsEnabled" Value="false"/>
                    <Setter Property="Header">
                        <Setter.Value>
                            <AccessText Text="Save Selected File _As..."/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding HasSelection}" Value="true">
                    <Setter Property="IsEnabled" Value="true"/>
                    <Setter Property="Header">
                        <Setter.Value>
                            <AccessText Text="{Binding SelectedFile.Filename, StringFormat=Save {0} _As...}"/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </MenuItem.Style>
</MenuItem> 
```

# c# - 64 位托管 DirectX

> ID：11313041
> 
> 赞同：0
> 
> 时间：2012-07-03T14:25:38.377
> 
> 标签：c#, .net, 64-bit, directx

我正在编写一个 64 位应用程序。它必须在 Windows 7 上作为 64 位应用程序运行，也就是说不允许 32 位兼容模式。我想使用托管 DirectX 来完成一些多媒体播放。在哪里/如何获得 DirectX 的托管 64 位 DLL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:30:08.757

没有托管 DirectX。该程序已被[XNA](http://en.wikipedia.org/wiki/Microsoft_XNA)取代，这可能不是您想要的。也许您应该研究[DirectShow](http://directshownet.sourceforge.net/)或[MediaFoundation](http://en.wikipedia.org/wiki/Media_Foundation) ( [.NET](http://mfnet.sourceforge.net/) )，因为 DirectX 不是执行媒体播放的推荐方式。如果您出于其他原因使用 DirectX，则可以通过互操作实现 DirectX 的其他实现（请参阅其他答案）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:31:49.003

托管 DirectX 已弃用。但是，您可能想看看[SlimDX](http://slimdx.org/)（它们支持 64 位）或[sharpdx](http://code.google.com/p/sharpdx/)。

# javascript - When to use window.opener / window.parent / window.top

> ID：11313045
> 
> 赞同：103
> 
> 时间：2012-07-03T14:25:49.707
> 
> 标签：javascript, window

In JavaScript when to use `window.opener` / `window.parent` / `window.top` ?

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-07-03T14:34:05.660

*   `window.opener` refers to the window that called `window.open( ... )` to open the window from which it's called
*   `window.parent` refers to the parent of a window in a `<frame>` or `<iframe>`
*   `window.top` refers to the top-most window from a window nested in one or more layers of `<iframe>` sub-windows

Those will be `null` (or maybe `undefined`) when they're not relevant to the referring window's situation. ("Referring window" means the window in whose context the JavaScript code is run.)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-03T14:35:49.573

I think you need to add some context to your question. However, basic information about these things can be found here:

`window.opener` [https://developer.mozilla.org/en-US/docs/Web/API/Window.opener](https://developer.mozilla.org/en-US/docs/Web/API/Window.opener)

I've used window.opener mostly when opening a new window that acted as a dialog which required user input, and needed to pass information back to the main window. However this is restricted by origin policy, so you need to ensure both the content from the dialog and the opener window are loaded from the same origin.

`window.parent` [https://developer.mozilla.org/en-US/docs/Web/API/Window.parent](https://developer.mozilla.org/en-US/docs/Web/API/Window.parent)

I've used this mostly when working with IFrames that need to communicate with the window object that contains them.

`window.top` [https://developer.mozilla.org/en-US/docs/Web/API/Window.top](https://developer.mozilla.org/en-US/docs/Web/API/Window.top)

This is useful for ensuring you are interacting with the top level browser window. You can use it for preventing another site from iframing your website, among other things.

If you add some more detail to your question, I can supply other more relevant examples.

**UPDATE:** There are a few ways you can handle your situation.
You have the following structure:

*   Main Window
    *   Dialog 1
        *   Dialog 2 Opened By Dialog 1

When Dialog 1 runs the code to open Dialog 2, after creating Dialog 2, have dialog 1 set a property on Dialog 2 that references the Dialog1 opener.

So if "childwindow" is you variable for the dialog 2 window object, and "window" is the variable for the Dialog 1 window object. After opening dialog 2, but before closing dialog 1 make an assignment similar to this:

```
childwindow.appMainWindow = window.opener 
```

After making the assignment above, close dialog 1. Then from the code running inside dialog2, you should be able to use `window.appMainWindow` to reference the main window, window object.

Hope this helps.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T14:39:03.953

top, parent, opener (as well as window, self, and iframe) are all window objects.

1.  `window.opener` -> returns the window that opens or launches the current popup window.
2.  `window.top` -> returns the topmost window, if you're using frames, this is the frameset window, if not using frames, this is the same as window or self.
3.  `window.parent` -> returns the parent frame of the current frame or iframe. The parent frame may be the frameset window or another frame if you have nested frames. If not using frames, parent is the same as the current window or self

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-21T11:34:49.920

when you are dealing with popups window.opener plays an important role, because we have to deal with fields of parent page as well as child page, when we have to use values on parent page we can use window.opener or we want some data on the child window or popup window at the time of loading then again we can set the values using window.opener

# android - 如何构建超级用户.apk

> ID：11313048
> 
> 赞同：2
> 
> 时间：2012-07-03T14:26:11.983
> 
> 标签：android, root

我正在尝试从 CM7 源代码树重建 Superuser.apk。在获取 envsetup.sh 并在 Superuser 根目录中执行 mm 后，什么都没有完成，并显示消息“make: nothing to be done for 'all_modules'”。我查看了 Android.mk，在我看来（可能）Superuser.apk 是从预构建中复制的，但完整的源代码树仍然存在。谁能告诉我如何重新构建 Superuser.apk？

我的目标：我想禁止显示“XXX 已被授予超级用户权限”消息。

我试过的：

1.  在 Android.mk 的末尾添加了 $(BUILD_PACKAGE)
    这*确实*导致了构建活动，但出现了许多“错误：错误：找不到匹配的资源：给定名称：attr 'android:displayOptions'”类型的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:49:17.493

呃，我发现我可以使用股票超级用户应用程序中的“首选项”来做我需要的事情。所以我最初的问题虽然很有趣，但现在只是学术兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:23:55.443

您需要编辑`device.mk`关联到您的目标平台（三星、摩托罗拉、HTC？）。我在熊猫板上工作，然后这个文件就属于`device/ti/panda/device.mk`我了。然后将超级用户添加到 PRODUCT_PACKAGES：

```
PRODUCT_PACKAGES += \
    make_ext4fs \
    com.android.future.usb.accessory \
    annotations \
    Superuser 
```

Android 会发现你需要这个包。`mm`之后运行`packages/apps/Superuser`最终会做你想做的事。我遇到了一些[注释问题](https://stackoverflow.com/questions/12611043/how-to-make-android-build-system-embed-annotations-jar-in-an-app)，但您可能不会遇到这些问题......

# python - 用户如何在字典中添加值；方法返回期望值并且没有

> ID：11313050
> 
> 赞同：0
> 
> 时间：2012-07-03T14:26:13.373
> 
> 标签：python, class, methods, dictionary

我有两个问题。

1 - 用户如何在字典中添加值？我看到的所有关于 dict 的例子，它们已经由程序员预定义了。

2 - 我写了这门课

```
class Imovel:                                       
    tamanho = 0                                     
    cor = ''

    def __init__(self, tamanho, cor):               
        self.tamanho = tamanho
        self.cor = cor

    def verificarDisponibilidade(self, situacao):   
        self.situacao = situacao
        if(situacao == True):
            print 'Imovel disponivel'
        else:
            print 'Imovel indisponivel' 
```

当我调用 verificarDisponibilidade() 并将 True 作为参数传递时，我期望“ *Imovel disponivel* ”，但我得到了：

```
Imovel disponivel
None 
```

我想知道返回的“无”是什么。

谢谢大家，抱歉英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:30:06.650

向字典添加值很容易：

```
d={}
d['somekey']=somevalue 
```

或者您可以在创建字典期间执行此操作：

```
d={'some_key':some_value,'some_other_key':some_other_value} 
```

或者，您可以将一本字典添加到另一本字典中：

```
d1={}
d2={'foo':'bar'}
d1.update(d2) 
```

至于您的函数返回，所有 python 函数都会返回`None`，除非另有`return`声明：

```
def foo():
   #prints to the screen and returns None
   print "Hi"

def bar():
   #prints to the screen and returns "Hi"
   print "Hi"
   return "Hi" 
```

在不相关的说明中，最好让您的类继承自`object`.

```
class Imovel(object):
    ... 
```

这使它成为一个新式课程，通常比旧式课程更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:29:16.133

您看到的是打印输出，然后是该函数的返回值。由于您没有`return`声明，`None`因此隐式返回。这就是你所看到的。

尝试并比较：

```
def verificarDisponibilidade(self, situacao):   
    self.situacao = situacao
    if(situacao == True):
        return 'Imovel disponivel'
    else:
        return 'Imovel indisponivel' 
```

# php - 解析错误：语法错误，意外的 '('，期待 ',' 或 ';' in

> ID：11313051
> 
> 赞同：18
> 
> 时间：2012-07-03T14:26:15.570
> 
> 标签：php, syntax-error

我收到以下解析错误：

> 解析错误：语法错误，第 7 行的 H:\Programs\USBWebserver v8.5\8.5\root\oopforum\func\register.class.php 中出现意外的 '('，期待 ',' 或 ';'

这与我班级中的以下代码行有关：

```
private $random_name = rand(1000,9999).rand(1000,9999).rand(1000,9999).rand(1000,9999); 
```

我看不出为什么这行代码会导致解析错误？

这是一些周围的代码：

```
class register{
    public $post_data = array();
        private $dbh;
        private $allowed_type = array('image/jpeg','image/png','image/gif');
        private $random_name = rand(1000,9999).rand(1000,9999).rand(1000,9999).rand(1000,9999);
        private $path = 'img/thumb_/'.$random_name. $_FILES['file']['name'];
        private $max_width = 4040;
        private $max_height = 4040;
        private $max_size = 5242880;
        private $temp_dir = $_FILES['file']['tmp_name'];
        private $image_type = $_FILES['file']['type'];
        private $image_size = $_FILES['file']['size'];
        private $image_name = $_FILES['file']['name'];
        private $image_dimensions = getimagesize($temp_dir);
        private $image_width = $image_dimensions[0]; // Image width
        private $image_height = $image_dimensions[1]; // Image height
        private $error = array();

        public function __construct($post_data, PDO $dbh){
        $this->post_data = array_map('trim', $post_data);
        $this->dbh = $dbh;
        }
} 
```

是什么导致解析错误？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-03T14:27:40.420

您无法将成员变量初始化为非静态的任何内容，并且您正在尝试调用函数。

从[手册](http://www.php.net/manual/en/language.oop5.properties.php)：

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

解决方法是在构造函数中设置变量：

```
private $random_name;
public function __construct() { 
    $this->random_name = rand(1000,9999).rand(1000,9999).rand(1000,9999).rand(1000,9999);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T14:28:23.207

你不能这样做：

```
private $image_dimensions = getimagesize($temp_dir); 
```

不能调用函数、变量和其他任何非静态的东西来设置类变量。

# php - Zend Framework partialLoop 与模型的关联数组

> ID：11313055
> 
> 赞同：1
> 
> 时间：2012-07-03T14:26:19.140
> 
> 标签：php, zend-framework, partial-views

我正在 Zend Framework 中制作一个 Web 应用程序。我已经到了*清理*的阶段。由于事情经常发生，我有一些杂乱无章的视图脚本已经变得完全不可读（大量的`(v)sprintf`'s 和循环）。

有一种观点绝对是一场噩梦......（没有/不准确的评论，速记......所有事情都被认为是致命的罪过）。只是一个例子：

```
$rows[$c] .= '<div>'.sprintf('<select id="%s" name="%1$s">',$t.'['.$ref->getCode().']').str_replace('>'.$ref->getCValue().'<',' selected="selected">'.$ref->getCValue().'<','<option>'.implode('</option><option>',$this->vals['P']).'</option>').'</select></div>'; 
```

在这种特殊情况下，我有一组看起来像这样的模型：

```
$arr = array('FOO'=> $Mylib_Model_Person,'BAR'=> $Mylib_Model_Person2);//1~50 mdls 
```

我想使用部分循环，但是有一个问题：

```
$this->partialLoop('controller/_myPartial.phtml',array('model'=>$arr));
//in the partial loop:
Zend_Debug::dump($this->m); 
```

我正确地看到了我所有的模型，但是它们的键都已经变成了属性。

```
$this->FOO->someMethod();//works fine 
```

Bur 我希望它是：

```
<span><?php echo $key; ?></span><span><?php echo $model->someMethod(); ?></span> 
```

我也尝试过使用`$this->partialLoop()->setObjectKey('Mylib_Model_Person');`，但这似乎没有任何区别，然后让我感到困惑。

我看到的唯一解决方案是`array_map`，但这会破坏这一点（我试图以一个干净的视图脚本结束）；或重写我的服务层的一部分，以返回准备好的结构化数据，并保留在`array_map`那里。

我不禁想到我想做的事情，基本上使用 partialLoop 作为`array_map`回调，是可能的。如果不是，是否有替代方案？有什么想法吗？

我已经尝试过`get_object_properties($this)`，并遍历对象属性，但无济于事，循环根本没有被执行（？！）

* * *

事实证明`$this->partialLoop()->setObjectKey('Mylib_Model_Person');`应该是`$this->partialLoop()->setObjectKey('model');`。如果我确实改变了这一点，并通过 dump 开始部分循环`$this->model`，我会看到我的模型。然而：

```
echo $this->model->someMethod(); //throws error: method on non-object
Zend_Debug::dump(get_class_methods($this->model));//shows all methods, including someMethod() 
```

并且雪上加霜，眼泪和混乱。该模型实现了 toArray-thing，所以我尝试了：

```
echo $this->model['someData'];//Error: cannot use object of type Mylib_Model_Person as array!! 
```

因此，当我尝试使用方法时它不是一个对象，当我尝试以数组的形式访问数据时它是一个对象，而当使用魔术 getter 方法 ( `$this->model->some_Data`) 时它什么也不做。没有错误，但也没有输出。视图按原样呈现。

* * *

* * *

我想我遇到了一个错误。我会报告的。考虑一下：

```
$methods = get_class_methods($this->model);
while($m = array_shift($methods))
{
    if (substr($m,0,3) === 'get')
    {
        Zend_Debug::dump($m);//e.g getName
        Zend_Debug::dump($this->model->{$m}());//'Foobar'
        $m = 'someMethod';//copy-paste, so typo's aren't to blame
        Zend_Debug::dump($this->model->{$m}());//'the data I was after'
    }
} 
```

所以这行得通，但是，如果我尝试：

```
$this->model->{'someMethod'}();//Error again
//or even:
$m = 'someMethod';
echo $this->model->{$m}();//Error... 
```

这不可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:01:07.867

我发现了问题所在。我们的开发服务器过去在错误报告方面设置*得更好*
： 我认为`E_ALL | E_STRICT`是 ，但我看了看才发现它变成了一个粗糙的`E_COMPILE_ERROR | E_ERROR | E_CORE_ERROR`. 鉴于数组中的某些值可能`false`不是一个对象，因此在 partialLoop 脚本中的某个时间点，应该发出一个通知——当然，使用正确的 ini 设置。

这就是意外行为的原因；那，还有一两个愚蠢的错误。

# iphone - iphone：没有调用 didReceiveAuthenticationChallenge 和 canAuthenticateAgainstProtectionSpace 以获得安全的休息服务

> ID：11313061
> 
> 赞同：0
> 
> 时间：2012-07-03T14:26:27.630
> 
> 标签：iphone, objective-c, ios, ipad, ssl

我正在尝试从安全的宁静服务中获取数据。我关注了许多其他帖子

[如何使用 NSURLConnection 与 SSL 连接以获得不受信任的证书？](https://stackoverflow.com/questions/933331/how-to-use-nsurlconnection-to-connect-with-ssl-for-an-untrusted-cert)

但在我的情况下 didReceiveAuthenticationChallenge 和 canAuthenticateAgainstProtectionSpace 没有被调用。

如果您能解决问题或为我提供一些很好的例子来调用安全的宁静服务，请提供帮助。

```
 NSURL *url = [NSURL URLWithString:@"https://76.69.53.126:8443/jaxrs/tdgateway/getCountries"];

NSError * error = nil;   
NSMutableURLRequest *urlRequest=[NSMutableURLRequest requestWithURL:url];
[ NSURLConnection sendSynchronousRequest: urlRequest returningResponse: nil error: &error ];

NSLog(@"This is %@",url);

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    NSLog(@"This is canAuthenticateAgainstProtectionSpace");
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"This is didReceiveAuthenticationChallenge");
    [[challenge sender] cancelAuthenticationChallenge:challenge];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:56:59.987

它可能与 不同`NSURLAuthenticationMethodServerTrust`，所以试试这个开始：

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return YES;
} 
```

您不应该立即取消它：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"This is didReceiveAuthenticationChallenge");
    [[challenge sender] cancelAuthenticationChallenge:challenge];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T13:06:39.650

```
NSString *XAPIKEY = @"myapikey";
NSString *LOGINUSER = @"login username";
NSString *LOGINPASS = @"passwords";

// Setup NSURLConnection
- (void) postRequest:(NSString *) requestFun requestData:(NSDictionary *) sendDataDic{
    NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", @"http://api.domain.com/index.php/api/", requestFun]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL
                                             cachePolicy:NSURLRequestUseProtocolCachePolicy
                                         timeoutInterval:30.0];
    [request setValue:@"application/x-www-form-urlencoded; charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
    [request setValue:XAPIKEY forHTTPHeaderField:@"X-API-KEY"];
    if(sendDataDic != nil){
        NSString *stringData = [self urlEncodedString:sendDataDic];
        [request setHTTPBody:[stringData dataUsingEncoding:NSUTF8StringEncoding]];
        [request setValue:[NSString stringWithFormat:@"%lu", (unsigned long)[stringData length]] forHTTPHeaderField:@"Content-Length"];
    }
    [request setHTTPMethod:@"POST"];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
}

- (void) getRequest:(NSString *) requestFun requestData:(NSDictionary *) sendDataDic{

    NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", @"http://api.domain.com/index.php/api/", requestFun]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    [request setValue:@"application/json; charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
    [request setValue:XAPIKEY forHTTPHeaderField:@"X-API-KEY"];

    if(sendDataDic != nil){
        NSString *stringData = [self urlEncodedString:sendDataDic];
        [request setHTTPBody:[stringData dataUsingEncoding:NSUTF8StringEncoding]];
        [request setValue:[NSString stringWithFormat:@"%lu", (unsigned long)[stringData length]] forHTTPHeaderField:@"Content-Length"];
    }
    [request setHTTPMethod:@"GET"];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];

}

static NSString *toString(id object) {
    return [NSString stringWithFormat: @"%@", object];
}

static NSString *urlEncode(id object) {
    NSString *string = toString(object);
    return [string stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
}

-(NSString*) urlEncodedString:(NSDictionary*) ObjDic {
    NSMutableArray *parts = [NSMutableArray array];
    for (id key in ObjDic) {
        id value = [ObjDic objectForKey: key];
        NSString *part = [NSString stringWithFormat: @"%@=%@", urlEncode(key), urlEncode(value)];
        [parts addObject: part];
    }
    return [parts componentsJoinedByString: @"&"];
}

// NSURLConnection Delegates
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge previousFailureCount] == 0) {
        NSLog(@"received authentication challenge");
        NSURLCredential *newCredential = [NSURLCredential credentialWithUser:LOGINUSER
                                                                    password:LOGINPASS
                                                                 persistence:NSURLCredentialPersistenceForSession];
        NSLog(@"credential created");
        [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
        NSLog(@"responded to authentication challenge");
    } else {
        NSLog(@"previous authentication failure");
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
    NSLog(@"response status code: %ld", (long)[httpResponse statusCode]);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSString *strData = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@", strData);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"responded to authentication challenge");
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
   NSLog(@"responded to authentication challenge");
} 
```

# android - 在发布模式下使用 manifestmerger 时出现问题

> ID：11313062
> 
> 赞同：2
> 
> 时间：2012-07-03T14:26:29.783
> 
> 标签：android, android-manifest

在[最后一个 Android SDK 工具](http://developer.android.com/tools/sdk/tools-notes.html)中，您可以使用 manifestmerger.enabled 属性从库中合并 AndroidManifest：

> 构建系统添加了库项目清单文件的自动合并到包含项目的清单中。使用 manifestmerger.enabled 属性启用此功能。

它工作得很好......但仅限于调试模式！实际上，当我使用“右键单击 projet”>“导出...”>“导出 Android 应用程序”在 Eclipse 中发布我的应用程序时，apk 中包含的生成的 AndroidManifest.xml 不包含我的库中的元素。任何想法 ？我是否必须使用 Ant 脚本来发布我的应用程序并使合并功能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:38:19.117

尝试使用最新的 Android SDK 和 ADT 插件。您提到的问题已经根据以下帖子解决：

[android - 使用新的“manifestmerger”属性](https://stackoverflow.com/a/11455240/142239)

他们可以在这里找到：

[Android SDK](http://developer.android.com/sdk/index.html) （点击“下载其他平台”）

[ADT 插件](http://developer.android.com/sdk/installing/installing-adt.html)

# apache - apr_table_get 是否返回数据的副本？

> ID：11313068
> 
> 赞同：1
> 
> 时间：2012-07-03T14:26:59.167
> 
> 标签：apache, apr

如果我调用 apr_table_get，我会得到数据的副本还是只是指向包含数据的池的指针？（我想以某种方式更改值，不知道我是否会破坏池数据。）另外，我是否需要释放数据。手册页（[Table and Array Functions](http://apr.apache.org/docs/apr/1.2/group__apr__tables.html#g4db13e3915c6b9a3142b175d4c15d915)）没有回答这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:05:08.273

您将获得指针的副本。所以不行。如果您想要它指向的数据的副本，则需要制作一个。

这就是为什么返回类型是 const！

# c# - 使用 c# 处理套接字读取和写入数据库的最佳方法

> ID：11313069
> 
> 赞同：0
> 
> 时间：2012-07-03T14:27:00.290
> 
> 标签：c#, multithreading, tcplistener

我编写了 ac# 代码来监听端口（使用 TCP 监听器）并将数据写入数据库（SQL 服务器）。我目前的方法涉及以下内容：

*   当新设备条目到达时创建一个线程。
*   从流中读取数据并写入数据库。

这一切正常，直到 4-5 个设备将数据发送到端口。一旦超过这个值，完整的方法就会失败。

只是想知道是否有任何替代方案。我认为一种方法是让一组线程写入队列，另一组线程（限制为 3-4）从队列中读取并写入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:35:54.013

我建议使用阻塞集合，您可以让多个线程添加数据和多个线程读取该数据。因为它阻塞线程在等待新数据时将非常有效。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

# c# - 使用 lib 文件夹安装 .net windows 服务

> ID：11313070
> 
> 赞同：6
> 
> 时间：2012-07-03T14:27:00.143
> 
> 标签：c#, windows-services

我想为我的 Windows 服务创建一个设置。我的 windows 服务的 dll 放在 /Lib/ 文件夹中。

我在服务中添加了一个安装程序类。并在设置项目上添加了自定义操作。

问题是当我尝试安装该服务时 - 它失败并出现错误：错误 1001。无法获取安装程序类型...

发生此错误是因为 dll 与服务 .exe 不在同一目录中。我在服务配置中使用探测并且安装工具无法识别探测..

我想找到解决该问题的方法，并尝试以多种方式使用服务控制器（sc.exe）创建服务。尝试使用 cmd.exe 将其作为自定义操作运行。ETC..

这应该是一个常见问题..有人找到合适的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T13:11:38.187

我遇到了同样的问题，这篇文章或 MSDN 中建议的选项都没有帮助。我想出了另一个解决方案：

通过在 InstallUtil.exe 上使用 Reflector，我发现**InstallUtil 只是一个用于`System.Configuration.Install.ManagedInstallerClass.InstallHelper(args)`**在 try/catch 块内调用的瘦包装器（它还设置当前线程的 UI 文化并显示版权）。`ManagedInstallerClass.InstallHelper`它本身位于 System.Configuration.Install.dll 程序集中，每个人都可以访问。因此，我只是修改了`Program.Main`我的服务方法以允许安装。请参阅下面的快速和肮脏的代码：

```
static class Program
{
    static void Main(string[] args)
    {
        if (args != null && args.Any(arg => arg == "/i" || arg == "/u"))
        {
            // Install or Uninstall the service (mimic InstallUtil.exe)
            System.Configuration.Install.ManagedInstallerClass.InstallHelper(args);
        }
        else
        {
            // Run the service
            System.ServiceProcess.ServiceBase[] ServicesToRun;
            ServicesToRun = new System.ServiceProcess.ServiceBase[] 
            { 
                new MyService() 
            };
            System.ServiceProcess.ServiceBase.Run(ServicesToRun);
        }
    }
} 
```

您可以这样做，或创建您自己的 InstallUtil 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:15:00.893

在您的配置中，您可以添加探测路径 - 它提示运行时在哪里寻找程序集 [http://msdn.microsoft.com/en-us/library/823z9h8w%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/823z9h8w%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:43:36.640

您应该绑定到[`AppDomain.AssemblyResolve`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件并在事件处理程序中进行自定义加载。

可以在[这个 SO question](https://stackoverflow.com/questions/1373100/how-to-add-folder-to-assembly-search-path-at-runtime-in-net)的第一个答案中找到一个示例。

# c# - 使用 ServiceStack.Text 序列化 ExpandoObject

> ID：11313078
> 
> 赞同：5
> 
> 时间：2012-07-03T14:27:36.683
> 
> 标签：c#, .net, json, servicestack

我正在尝试使用库[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)序列化对象。这有效

```
using System.Dynamic;
using ServiceStack.Text;
var x = new {Value= 10, Product = "Apples"};                
Console.WriteLine(JsonSerializer.SerializeToString(x)); 
```

我明白了，正如我所料

```
{"Value":10,"Product":"Apples"} 
```

然而

```
dynamic x = new ExpandoObject();
x.Value = 100;
x.Product = "Apples";
Console.WriteLine(JsonSerializer.SerializeToString(x)); 
```

我大吃一惊

```
[{"Key":"Value","Value":100},{"Key":"Product","Value":"Apples"}] 
```

为什么！这是怎么回事？

**其次**，*我怎样才能得到我想要的？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:55:57.133

`ExpandoObject`实现`IConnection<KeyValuePair>`和`IEnumerable<KeyValuePair>`：

```
public sealed class ExpandoObject :
    IDynamicMetaObjectProvider,
    IDictionary<string, object>,
    ICollection<KeyValuePair<string, object>>,
    IEnumerable<KeyValuePair<string, object>>,
    IEnumerable, INotifyPropertyChanged 
```

我的猜测是，在内部，ServiceStack 序列化程序将`ExpandoObject`视为`IEnumerable<KeyValuePair>`，因此它序列化为键/值对的 JSON 数组。

* * *

这与您的第一个（工作）代码片段不同，因为 .NET 实际上为您的数据构建了一个真实的（匿名）类，基本上它使：

```
public class SomeNameTheCompilerMakesUp {
    internal int Value { get; set; }
    internal string Product { get; set; }
} 
```

自动为您服务，因此当它被发送到序列化程序时，它正在使用具有真实属性的真实类，而`ExpandoObject`实际上是由`object[]`内部支持的。

* * *

在旁注中，微软的`System.Web.Helpers.Json`行为方式相同。该测试通过：

```
 [TestMethod]
    public void ExpandoObjectSerializesToJsonArray()
    {
        dynamic anonType = new { Value = 10, Product = "Apples" };

        dynamic expando = new ExpandoObject();
        expando.Value = 10;
        expando.Product = "Apples";

        var anonResult = System.Web.Helpers.Json.Encode(anonType);
        var expandoResult = System.Web.Helpers.Json.Encode(expando);

        Assert.AreEqual("{\"Value\":10,\"Product\":\"Apples\"}", anonResult);
        Assert.AreEqual("[{\"Key\":\"Value\",\"Value\":10},{\"Key\":\"Product\",\"Value\":\"Apples\"}]", expandoResult);
    } 
```

* * *

***最后一次编辑：***

您可以通过将您的`ExpandoObject`变成`Dictionary<string, object>`. 这段代码需要注意的是，它将数据复制到字典中，因此您在内存中有 2 个副本（或略少于，因为从技术上讲，字符串可能被保留）。

```
 [TestMethod]
    public void TestMethod1()
    {
        dynamic expando = new ExpandoObject();
        expando.Value = 10;
        expando.Product = "Apples";

        // copy expando properties to dictionary
        var dictionary = ((ExpandoObject)expando).ToDictionary(x => x.Key, x => x.Value);

        var expandoResult    = System.Web.Helpers.Json.Encode(expando);
        var dictionaryResult = System.Web.Helpers.Json.Encode(dictionary);

        Assert.AreEqual("[{\"Key\":\"Value\",\"Value\":10},{\"Key\":\"Product\",\"Value\":\"Apples\"}]", expandoResult);
        Assert.AreEqual("{\"Value\":10,\"Product\":\"Apples\"}", dictionaryResult);
    } 
```

虽然，对于以后遇到这种情况并且实际上正在使用的任何人，`System.Web.Helpers.Json`最好的办法就是将你`ExpandoObject`的包装成`DynamicJsonObject`这样：

```
 [TestMethod]
    public void TestMethod1()
    {
        dynamic expando = new ExpandoObject();
        expando.Value = 10;
        expando.Product = "Apples";

        var dictionaryResult = System.Web.Helpers.Json.Encode(new DynamicJsonObject(expando));

        Assert.AreEqual("{\"Value\":10,\"Product\":\"Apples\"}", dictionaryResult);
    } 
```

Ans 一旦我解决了这个问题，我在这里发现了一个类似的问题：[How to flatten an ExpandoObject returned via JsonResult in asp.net mvc?](https://stackoverflow.com/questions/5156664/how-to-flatten-an-expandoobject-returned-via-jsonresult-in-asp-net-mvc)

# python - 开箱即用支持 MongoDB 的 Python 框架？

> ID：11313081
> 
> 赞同：5
> 
> 时间：2012-07-03T14:27:41.233
> 
> 标签：python, mongodb, frameworks

我想在现实世界的项目中练习 MongoDB，所以我想知道支持 MongoDB 作为开箱即用的主数据库的 Python 框架是什么（并且有据可查）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:32:37.783

如果您在谈论 Web 框架，那么Flask或[Flask-PyMongo中的](http://flask-pymongo.readthedocs.org/en/latest/index.html)[Tornado](http://codevoyeur.com/Downloads/Presentations/PHL-Mongo-Philly-Tornado-2011.pdf)或[Mongo-kit](http://flask.pocoo.org/docs/patterns/mongokit/)对 MongoDB 有很好的支持，但归根结底，它们都很容易插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T06:02:36.233

您可以使用[django-mongokit](https://github.com/peterbe/django-mongokit.git)作为您项目的优秀框架。它使用 MongoKit ODM（对象文档映射器）将 Django 连接到 MongoDB。

由于 Django 在许多项目中得到了最广泛和成功的使用，它有很大的社区支持，并且有很多可以在项目中轻松实现的包。

我们已经在我们的项目中成功实现了它，该项目可在[github 上](https://github.com/gnowledge/gstudio)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:27:31.860

我不确定您所说的“开箱即用”是什么意思，但我已经在多个项目中成功地将 MongoDB 与 Tornado Web 服务器一起使用。

您可以使用多个库非常轻松地与 MongoDB 交互。我最喜欢的是：

1.  PyMongo：[http ://api.mongodb.org/python/2.2/](http://api.mongodb.org/python/2.2/)
2.  Mongoengine：[http ://mongoengine.org/](http://mongoengine.org/)

IMO Mongonegine 是通过 Python 与 Mongo 进行通信的出色工具，并且文档相对完善。我特别喜欢 Mongoengine 在文档中提供具体示例的事实（这对初学者来说非常好）。

# php - 如何为查找数据库表定义 ActiveRecord，使其与枚举常量一样有用？

> ID：11313093
> 
> 赞同：3
> 
> 时间：2012-07-03T14:28:02.587
> 
> 标签：php, database-design, activerecord, yii

我们有一个基于 Yii 的 PHP 应用程序，它对不同类型的对象执行一些通用操作（例如与社交网络“分享”或在内部网上商店中“购买”）。

现在开发人员使用类常量来分隔不同类型的对象。像这样：

在**模型**中：

```
class Referral extends CActiveRecord {
    //... a lot more stuff here...
    const ITEM_TYPE_PRODUCT = 'product';
    const ITEM_TYPE_DESIGN = 'design';
    const ITEM_TYPE_BRAND = 'brand';
    const ITEM_TYPE_INVITE = 'invite';
    const ITEM_TYPE_DESIGNER = 'designer';
    //... a lot more stuff here...
} 
```

然后在一些**控制器**中：

```
// calling static method of Referral and pass a type IDs to change it's behavior
$referral_params = Referral::buildReferallParams(
    Referral::TYPE_PINTEREST, 
    Referral::ITEM_TYPE_PRODUCT
) 
```

类常量的这种使用导致了我想摆脱的主要代码重复。

我个人认为我们应该为类型添加一个查找表，如下所示：

```
CREATE TABLE `item_type` (
    id int primary key auto_increment,
    name varchar(255)
); 
```

并创建一个名为`ItemType`从表中提取 ID 的 Yii 模型类。

但这会导致另一个问题：无论如何我们都需要在代码中使用这种类型 ID，并且需要这样做很长时间。我们需要以某种方式为 ID 创建一个符号名称。现在调用like`Referral::ITEM_TYPE_PRODUCT`很方便，改成Yii-flavored`ItemType::model()->findByAttributes(array('name' => 'Product'))`是完全不能接受的。

我想避免在其中维护相同的类常量列表（现在通过我们的代码库复制），`ItemType`因为每次添加新类型都需要添加新常量，这只是等待发生的不同步问题。

因此，问题如下：如何使查找表的 ActiveRecord 与类似“枚举”的数字常量集同样有用？

我使用 ItemType 的子类提供了以下一些漂亮的解决方案：

```
ProductItemType::id(); // returns lazy-loaded ID for 'Product' item type
BrandItemType::id();   // the same for 'Brand' item type
// ... and so on 
```

但是如果现在需要单个基类的五个子类，以后可能需要另外六个。有没有可行的架构解决方案？

**编辑**

重复的问题是：声明类型 ID 的类常量*在每个*需要以某种方式区分不同项目类型的类中重新定义。我知道最“真实”的解决方案是将其从里到外反转并将取决于对象类型的功能移动到对象本身，但是我们有没有任何测试覆盖的遗留代码，这个解决方案现在只是一个梦想. 现在我想做的就是删除这个重复。还有常数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:34:16.380

好吧，如果您想一次性定义所有这些，并从数据库中获取。这意味着你需要做一个行为，有类似静态的方法来检索这些（所以常量将成为函数），你需要创建正确的魔术方法[__call](http://www.yiiframework.com/search/?type=api-suggest&q=__call)来覆盖这些不存在的函数来调用你的数据库，你可以附加这个你正在使用的任何 yii 类的行为。

**组件行为的使用**

一个组件支持[mixin](http://en.wikipedia.org/wiki/Mixin)模式并且可以附加一个或多个行为。行为是一个对象，其方法可以通过收集功能而不是专门化（即普通类继承）的方式由其附加组件“继承”。一个组件可以附加多个行为，从而实现“多重继承”。

行为类必须实现`IBehavior`接口。大多数行为都可以从`CBehavior`基类扩展。如果需要将行为附加到模型，它也可以从[CModelBehavior](http://www.yiiframework.com/doc/api/1.1/CModelBehavior)或[CActiveRecordBehavior](http://www.yiiframework.com/doc/api/1.1/CActiveRecordBehavior)扩展，后者实现了特定于模型的附加功能。

要使用行为，必须首先通过调用行为的`attach()`方法将其附加到组件。然后我们可以通过组件调用行为方法：

```
// $name uniquely identifies the behavior in the component
$component->attachBehavior($name,$behavior);
// test() is a method of $behavior
$component->test(); 
```

可以像组件的普通属性一样访问附加的行为。例如，如果一个名为 tree 的行为附加到一个组件，我们可以使用以下方法获取对该行为对象的引用：

```
$behavior=$component->tree;
// equivalent to the following:
// $behavior=$component->asa('tree'); 
```

可以暂时禁用行为，使其方法无法通过组件使用。例如，

```
$component->disableBehavior($name);
// the following statement will throw an exception
$component->test();
$component->enableBehavior($name);
// it works now
$component->test(); 
```

附加到同一组件的两个行为可能具有相同名称的方法。在这种情况下，第一个附加行为的方法将优先。

当与[事件](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event)一起使用时，行为更加强大。一个行为，当被附加到一个组件时，可以将它的一些方法附加到组件的一些事件上。通过这样做，行为有机会观察或改变组件的正常执行流程。

行为的属性也可以通过它所附加的组件来访问。属性包括公共成员变量和通过行为的 getter 和/或 setter 定义的属性。例如，如果行为具有名为 xyz 的属性，并且该行为附加到组件 $a。然后我们可以使用表达式`$a->xyz`来访问行为的属性。

更多阅读：
[http ://www.yiiframework.com/wiki/44/behaviors-events](http://www.yiiframework.com/wiki/44/behaviors-events)
[http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/](http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/)

# wpf - wpf usercontrol定位不会在绑定的TextBox时立即更新

> ID：11313095
> 
> 赞同：0
> 
> 时间：2012-07-03T14:28:04.507
> 
> 标签：wpf, binding, textbox, viewmodel

我在用户控件 (InfoControl) 中有 2 个文本框，绑定到实现 INotifyPropertyChanged 的​​ VM 中的 Point 属性。

我有另一个包含可拖动矩形的 UserControl (DesignerControl)。Rectangle 的 Canvas.Left 和 Canvas.Bottom 绑定到同一 VM 的 ConvPoint 属性。ConvPoint 属性 (0 => ActualWidth) 是 Point 属性 (0 => 1) 的转换版本

当我拖动我的矩形时，ConvPoint VM 属性和文本框中的值会立即更新，但是当我用新值更新我的文本框时，VM Point 属性会立即更新，但只有当我再次拖动矩形时才会定位矩形并且不是立即。

一点代码解释一下：

一、我的ViewModel的Position属性

```
public class MyVM : ViewModelBase
{
    private DependencyPoint position;
    public DependencyPoint Position
    {
        get { return this.position; }
        set
        {
            this.position = value;
            RaisePropertyChanged("Position");
        }
    }

    public DependencyPoint ConvPosition
    {
        get { return new Point(this.Position.X * MainVM.ActualWidth, this.Position.Y * MainVM.AcutalHeight);}
        set
        {
            Point p = new Point(value.X/MainVM.ActualWidth,value.Y/MainVM.ActualHeight);
            this.position = p;
            RaisePropertyChanged("ConvPosition");
        }
    }
} 
```

**编辑：** 我为此使用一个类 DependencyPoint 来通知 X 和 Y 属性：

```
public class DependencyPoint : DependencyObject
{

    public enum PointOrder
    {
        isStartPoint,
        isEndPoint,
        isPoint1,
        isPoint2
    }

    public DependencyPoint()
    {
    }

    public DependencyPoint(Double x, Double y, PointOrder po)
    {
        this.X = x;
        this.Y = y;
        this.Order = po;
    }

    public DependencyPoint(DependencyPoint point)
    {
        this.X = point.X;
        this.Y = point.Y;
        this.Order = point.Order;
    }

    public DependencyPoint(Point point, PointOrder po)
    {
        this.X = point.X;
        this.Y = point.Y;
        this.Order = po;
    }

    public Point ToPoint()
    {
        return new Point(this.X, this.Y);
    }

    public PointOrder Order
    {
        get { return (PointOrder)GetValue(OrderProperty); }
        set { SetValue(OrderProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Order.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty OrderProperty =
        DependencyProperty.Register("Order", typeof(PointOrder), typeof(DependencyPoint), new UIPropertyMetadata(null));

    public Double X
    {
        get { return (Double)GetValue(XProperty); }
        set { SetValue(XProperty, value); }
    }

    // Using a DependencyProperty as the backing store for X.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty XProperty =
        DependencyProperty.Register("X", typeof(Double), typeof(DependencyPoint), new UIPropertyMetadata((double)0.0));

    public Double Y
    {
        get { return (Double)GetValue(YProperty); }
        set { SetValue(YProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Y.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty YProperty =
        DependencyProperty.Register("Y", typeof(Double), typeof(DependencyPoint), new UIPropertyMetadata((double)0.0));
} 
```

然后在我的信息控制中：

```
<Grid Grid.Row="0" DataContext="{Binding Position}">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <DockPanel Margin="3,3,0,1" Grid.Row="0" LastChildFill="True">
                    <TextBlock Foreground="White" Padding="0,3,0,0" Margin="2,0,0,0" DockPanel.Dock="Left" Text="StartPoint.X :"/>
                    <TextBox FontWeight="DemiBold" Foreground="Black" Background="#efefef" Width="Auto" Margin="7,0,0,0" Text="{Binding X, Converter={StaticResource StDConverter}, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"/>
                </DockPanel>
                <DockPanel Margin="3,3,0,1" Grid.Row="1" LastChildFill="True">
                    <TextBlock Foreground="White" Padding="0,3,0,0" Margin="2,0,0,0" DockPanel.Dock="Left" Text="StartPoint.Y :"/>
                    <TextBox FontWeight="DemiBold" Foreground="Black" Background="#efefef" Width="Auto" Margin="7,0,0,0" Text="{Binding Y, Converter={StaticResource StDConverter}, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"/>
                </DockPanel>
            </Grid> 
```

在 DesignerControl 中：

```
<UserControl>
    <Canvas>
        <Rectangle x:Name="Point" Width="10" Height="10" Canvas.Bottom="{Binding ConvPosition.Y, Mode=TwoWay}" Canvas.Left="{Binding ConvPosition.X, Mode=TwoWay}" />
    </Canvas>
</UserControl> 
```

我可以访问 actualWidth 并且我的 Rectangle 位于 Canvas 中。

我知道我在虚拟机中的属性或有点脏，但我不知道另一种方法可以正确地完成它并管理转换。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:38:40.497

因为 ConvPosition 取决于 Position，所以您应该在 Position 设置器中为 ConvPosition 提出 NotificationChanged。

```
public Point Position
{
    get { return this.position; }
    set
    {
        this.position = value;
        RaisePropertyChanged("Position");
        RaisePropertyChanged("ConvPosition");
    }
} 
```

ConvPosition 你可以改成这个

```
public Point ConvPosition
{
    get { return new Point(this.Position.X * MainVM.ActualWidth, this.Position.Y * MainVM.AcutalHeight); }
    set
    {
        this.Position = new Point(value.X/MainVM.ActualWidth, value.Y/MainVM.ActualHeight);
    }
} 
```

**编辑**

我认为 MyVM 中的两个附加属性将是最简单的解决方案。

```
public double X
{
    get { return Position.X; }
    set
    {
        Position = new Point(value, Position.Y);
        RaisePropertyChanged("X");
    }
}

public double Y
{
    get { return Position.Y; }
    set
    {
        Position = new Point(Position.X, value);
        RaisePropertyChanged("Y");
    }
} 
```

仅在网格中更改：

```
<Grid DataContext="{Binding}"> 
```

# php - PHP生成的Word文档的显示方式

> ID：11313098
> 
> 赞同：4
> 
> 时间：2012-07-03T14:28:18.703
> 
> 标签：php, ms-word

我想将页面导出到 .doc 文件，但是当我打开生成的 .doc 时，它会在 weblayout-view 而不是 print-view 中打开。这是丑陋和令人困惑的。有没有办法将其设置为打印视图？

我用来生成文档的脚本：

```
<?php  if(isset($_GET['word'])) {
    header("Content-Type: application/vnd.ms-word");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("content-disposition: attachment;filename=test.doc");
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
  <title>Example</title>
  <style type="text/css"> /* SOME STYLING */ </style>
</head>
<body>
  <h1>Hello StackOverflow!</h1>
  <p>Lorem ipsum...</p>
</body>
</html> 
```

现在我在这里可以添加单词复选框☒和单词输入字段吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:12:16.513

这对我有用：

```
<?php
header("Cache-Control: ");// leave blank to avoid IE errors
header("Pragma: ");// leave blank to avoid IE errors
header("Content-type: application/octet-stream");
header("content-disposition: attachment;filename=FILENAME.doc"); 
?>
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>title</title>
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Print</w:View>
  <w:DoNotHyphenateCaps/>
  <w:PunctuationKerning/>
  <w:DrawingGridHorizontalSpacing>9.35 pt</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>9.35 pt</w:DrawingGridVerticalSpacing>
 </w:WordDocument>
</xml><![endif]-->
<style>
</head>
<body>
  Yes printview!
</body>
</html> 
```

# html - css中的'>'符号是什么意思？

> ID：11313099
> 
> 赞同：7
> 
> 时间：2012-07-03T14:28:20.833
> 
> 标签：html, css, css-selectors

任何知道的人都可以在这里轻松点。我正在寻找关于它 ( `>`) 的含义以及应该如何使用它的详细答案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:36:37.930

无效的`<`CSS，您不应在 CSS 中的任何地方使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T14:38:14.270

CSS中没有有效的符号`<`。如果你使用它，你将使你的 css 无效。

但是，您可能想要使用`>`-[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。

CSS4 将引入一个主题选择器。目前它被标记为`$`。

所以

```
$#parent a:hover{
   /* styles */
} 
```

所以这些规则不适用于悬停状态的 a，但它是具有`parent`-ID 的父级。[CSS4 规范](http://www.w3.org/TR/selectors4/#subject)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:36:21.540

您可能正在考虑`>`（大于符号）选择器。

此选择器称为子组合器选择器。

这意味着它只会选择父级的直接子级。例如：

```
ul > li 
```

因此，例如，如果您想这样设置嵌套无序列表的样式：

```
<ul>
<li></li>
    <li>
       <ul>
       </ul>
    </li>
</ul> 
```

您必须将其设置为：

```
ul > li > ul 
```

但这仅适用于使用`>`, 子组合选择器的情况。

# mysql - 我可以在 MySQL 查询中使用“AND”代替“WHERE”，这是错误还是功能

> ID：11313101
> 
> 赞同：1
> 
> 时间：2012-07-03T14:28:23.203
> 
> 标签：mysql

我在 MySQL 中发现做连接时，我可以使用这个词`AND`来代替`WHERE`：

```
SELECT * FROM `mySchema`.`tblOne`
LEFT JOIN `mySchema`.`tblTwo` ON `tblOne`.`FIELDX` = `tblTwo`.`FIELDY`
AND `FIELDZ` = 'FooBar'; 
```

这是一个错误还是有一个功能？在某些情况下这可能有用吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:29:50.280

your `AND`is 用于`ON`子句，这与子句无关`WHERE`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:32:14.440

如果您查看`JOIN`( [link](http://dev.mysql.com/doc/refman/5.0/en/join.html) ) 的文档，您会看到，在`ON`关键字之后有一个`conditional_expr`.

这与从句`conditional_expr`中使用的相同。`WHERE`所以基本上你可以在一个`ON`喜欢之后做同样的事情`WHERE`。

之后，您还可以在那里使用`AND`and `OR`、括号和所有其他条件运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:45:02.137

请注意， using`ON ... AND ...`可以给出不同的结果`ON ... WHERE`：

```
SELECT * FROM `mySchema`.`tblOne` 
LEFT JOIN `mySchema`.`tblTwo` ON `tblOne`.`FIELDX` = `tblTwo`.`FIELDY` 
AND `FIELDZ` = 'FooBar'; 
```

如果 FIELDZ 在 tblTwo 中（从上面不清楚），这将返回 tblTwo 中的**所有**行`tblOne`，并连接 tblTwo 中的匹配行（即具有 FIELDY = tblOne.FIELDX 和 FIELDZ = 'FooBar' 的行）

```
SELECT * FROM `mySchema`.`tblOne` 
LEFT JOIN `mySchema`.`tblTwo` ON `tblOne`.`FIELDX` = `tblTwo`.`FIELDY` 
WHERE `FIELDZ` = 'FooBar'; 
```

如果 FIELDZ 在 tblTwo 中，这将加入`tblOne`. `FIELDX`= `tblTwo`。`FIELDY`，然后按`tblTwo.FIELDY = 'FooBar'过滤。它实际上与 INNER JOIN 相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:32:52.273

这也适用于 SQL Server 2008。我不明白这将是一个错误。JOIN 的“ON”部分类似于“WHERE”。基本上你的查询说的是：

```
WHERE tblOne.FIELDX = tblTwo.FIELDY AND FIELDZ = 'FooBar'; 
```

你可以使用：

```
ON FIELDX = FIELDY AND FIELDZ = 'FooBar' 
```

或者：

```
ON FIELDX = FIELDY
WHERE FIELDZ = 'FooBar' 
```

# f# - 如何仅评估惰性序列的一部分？

> ID：11313104
> 
> 赞同：1
> 
> 时间：2012-07-03T14:28:29.873
> 
> 标签：f#, functional-programming

延迟评估对于处理无法一次性放入主内存的大文件是一个很大的好处。但是，假设序列中有一些我想立即评估的元素，而其余的可以懒惰地计算——有什么方法可以指定吗？

*具体问题：（如果有助于回答问题）*

具体来说，我使用一系列 IEnumerables 作为多个序列的迭代器——这些序列是从使用 BinaryReader 流打开的文件中读取的数据（每个序列负责从其中一个文件中读取数据）。这些上的 MoveNext() 将按特定顺序调用。例如。`iter0`然后`iter1`然后`iter5`....`iter3`等等。此顺序在另一个序列`index`=中指定`{0,1,5,3,....}`。然而序列是惰性的，评估自然只在需要时进行。因此，文件读取（对于从磁盘上文件读取的开头的序列）发生在序列的 IEnumerables 移动时。这导致非法文件访问 - 一个进程正在读取的文件再次被访问（根据错误消息）。

诚然，非法文件访问可能是出于其他原因，在尽我最大努力调试其他原因之后，可能值得一试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:00:46.897

虽然我同意 Tomas 的评论：如果文件共享处理得当，你不应该需要这个，这里有一种方法可以急切地评估前*N*个元素：

```
let cacheFirst n (items: seq<_>) =
  seq {
    use e = items.GetEnumerator()
    let i = ref 0
    yield! 
      [ 
        while !i < n && e.MoveNext() do
          yield e.Current
          incr i
      ]
    while e.MoveNext() do
      yield e.Current
  } 
```

例子

```
let items = Seq.initInfinite (fun i -> printfn "%d" i; i)

items
|> Seq.take 10
|> cacheFirst 5
|> Seq.take 3
|> Seq.toList 
```

输出

```
0
1
2
3
4
val it : int list = [0; 1; 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:45:01.897

丹尼尔的解决方案是合理的，但我认为我们不需要另一个操作员，只是`Seq.cache`在大多数情况下。

首先缓存您的序列：

```
let items = Seq.initInfinite (fun i -> printfn "%d" i; i) |> Seq.cache 
```

渴望评估，然后从一开始就进行惰性访问：

```
let eager = items |> Seq.take 5 |> Seq.toList
let cached = items |> Seq.take 3 |> Seq.toList 
```

这将评估前 5 个元素一次（在 期间`eager`），但将它们缓存以供辅助访问。

# iphone - 如何根据当前时间加载不同的视图控制器（使用-（void）didTap ...）？

> ID：11313105
> 
> 赞同：0
> 
> 时间：2012-07-03T14:28:33.647
> 
> 标签：iphone, objective-c, ios

我有一个按钮，可以使用点击加载视图控制器

```
- (void)didTap_imageButton3:(id)sender forEvent:(UIEvent *)event {
  TramvajViewController *controller = [[TramvajViewController alloc] init];
  [self.navigationController pushViewController:controller animated:NO];
  [controller release];
} 
```

我怎样才能让它在特定时间段内（例如从午夜到 5 点）转到另一个控制器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:30:52.067

你可以使用以下

```
- (void)didTap_imageButton3:(id)sender forEvent:(UIEvent *)event {
    NSDate *date = [NSDate date];
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [calendar components:NSHourCalendarUnit fromDate:date];
    NSInteger hour = [components hour];

    //Basing on the hour present a different view controller
    if (5 < hour && hour < 10) {
        TramvajViewController *controller = [[TramvajViewController alloc] init];
        [self.navigationController pushViewController:controller animated:NO];
        [controller release];
    }
    else {
        //Load other VC
    }
} 
```

# c# - 在没有 openFile 对话框 C# 的情况下填充富文本框

> ID：11313106
> 
> 赞同：0
> 
> 时间：2012-07-03T14:28:34.093
> 
> 标签：c#, visual-studio-2010, richtextbox

我一直在尝试从文本文件中填充富文本框。通常我会说这很容易，并且这里有很多解决方案。我唯一的问题是我不希望打开文件对话框填充它我希望它在表单的 onload 事件中填充，并在此处从网络驱动器上的已知文本文件填充。我找到的每个解决方案似乎都要求用户输入打开我不想要的文件。这是因为当编辑文本文件时（通常是这样），我希望文本框模仿这一点，而不是硬编码一个过时的版本。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:33:34.270

使用 System.IO.FileSystemWatcher 监视文件的更改，然后使用 System.IO.File.ReadAllText 将文件的内容读入文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:43:43.503

如果你知道位置然后

```
const string Myfile = @"c:\test\myfile.rtf";

richTextBox1.Loadfile(Myfile); 
```

您可以使用 UNC 等，但如果找不到文件可能会出错 - 所以我建议文件检查等。

# javascript - jQuery链接滑块显示值

> ID：11313107
> 
> 赞同：1
> 
> 时间：2012-07-03T14:28:40.720
> 
> 标签：javascript, jquery, uislider

我正在使用一个自动调整的 jquery 滑块，因此这两个滑块只显示 100%。

一切正常我只需要显示两个数字，这可能吗？

我的代码是：

```
<script type="text/javascript">
    $(function () {
        $('div.basicLinked').slider().linkedSliders();
        $('div.basicLinked:first').slider('value', 50);
    });
</script> 
```

然后使用以下方式显示：

```
<div class="basicLinked"></div>
<div class="basicLinked"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:59:56.070

My guess:

```
$('div.basicLinked:first').slider('value')
$('div.basicLinked:last').slider('value') 
```

Is that what you need?

Try to explain your problem better.

# jquery - Jquery 无法读取 Internet Explorer 上的自定义标记文本

> ID：11313110
> 
> 赞同：3
> 
> 时间：2012-07-03T14:28:43.940
> 
> 标签：jquery, html, custom-tags

我想在我的 html 页面中使用自定义标签并使用 jquery 来读取其中的文本，例如：

```
<desc>Hello world</desc> 
```

然后使用 jquery 我阅读了文本：

```
desc_text=$("desc").first().text(); 
```

在 Firefox 和 Chrome 上，它可以工作，我得到了“Hello world”，但在 Internet Explorer (IE 9) 上没有。

经过调试，问题似乎来自 IE :`<desc>`并且`</desc>`被视为两个不同的 DOM 节点。`Hello world`不是 的子节点`<desc>`。这就是它不起作用的原因。如果我使用`span`标签而不是`desc`标签：它可以工作。

有没有办法让它在 IE 上运行，或者 IE 不会像 firefox / Chrome 那样解释我的自定义标签是否正常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:31:28.243

只需在文档的开头添加

```
<script>document.createElement('desc');</script> 
```

这也是`HTML5shiv`使 IE<9 能够正确解析新的 HTML5 元素的基本思想（无论如何请注意，您将无法通过 javascript 将该元素动态地注入 DOM）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:31:01.260

[http://ajaxian.com/archives/adding-custom-tags-to-internet-explorer-the-official-way](http://ajaxian.com/archives/adding-custom-tags-to-internet-explorer-the-official-way)

# php - 如何检索数据库中表的内容（使用 html 标签）

> ID：11313111
> 
> 赞同：0
> 
> 时间：2012-07-03T14:28:49.377
> 
> 标签：php

我在我的数据库表中做了一些输入，并与它的 html 标签一起保存。现在，我希望它由用户下载。我想删除 html 标签。由于我的数据库表中的文件输入没有格式，我希望下载文件作为文档文件下载，并且必须与 MS word 兼容。

到目前为止，我有这个用于下载页面

```
<?php
if(isset($_GET['id']))
{
include 'connect.php';

$id    = $_GET['id'];
$result = mysql_query("SELECT title, content, format FROM activity WHERE id = '$id'");

list($title, $content, $format) = mysql_fetch_array($result);
strip_tags($content);
header("Content-type: $format");
header("Content-Disposition: attachment; filename=$title");
echo $content;

mysql_close;
exit;

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:43:55.600

您的脚本存在不止一个问题：

首先，如果您确定查询只返回 1 个值，请添加 LIMIT 1。然后，要返回您的值，请使用 $contents = $result[0]['content'];

此外，文件名是文件名，而不是内容。最后，阅读一些有关 HTTP 标头的文档： Content-Disposition 不足以发送您的文件，即使您希望与 MSword 兼容...

“将出现下载提示。我下载文件。我在 MS WOrd 中打开它，它显示了我用 html 标签保存的内容”=>也许你只是在数据库中 htmlentities 你的标签。尝试这个：

```
<?php
strip_tags(html_entity_decode($contents));
?> 
```

# java - 如何在使用 javaassist 创建 .class 文件时向方法添加 @Override 注释？

> ID：11313114
> 
> 赞同：5
> 
> 时间：2012-07-03T14:29:06.197
> 
> 标签：java, javassist

如何在`@Override`使用 javaassist 创建类时向方法添加注释？

```
ClassPool pool = ClassPool.getDefault();
CtClass ctClasz = pool.makeClass("test.ExampleImpl");
ctClasz.addInterface(pool.get(MyInterface.class.getName()));
CtMethod method = CtNewMethod.make ("@Override public void print() { System.out.println(\"Hello!    \"); }", ctClasz);
ctClasz.addMethod(method);

System.out.println("Implementd: Interfaces:" + ctClasz.getInterfaces());
System.out.println("Methods: " + ctClasz.getMethods());
ctClasz.writeFile("D:"); 
```

此代码抛出异常如下：

```
 Exception in thread "main" javassist.CannotCompileException: [source error] syntax error    
 near "@Override p"
at javassist.CtNewMethod.make(CtNewMethod.java:78)
at javassist.CtNewMethod.make(CtNewMethod.java:44)
at javaassist.Demo.main(Demo.java:17)
 Caused by: compile error: syntax error near "@Override p"
at javassist.compiler.Parser.parseClassType(Parser.java:983)
at javassist.compiler.Parser.parseFormalType(Parser.java:191)
at javassist.compiler.Parser.parseMember1(Parser.java:51)
at javassist.compiler.Javac.compile(Javac.java:89)
at javassist.CtNewMethod.make(CtNewMethod.java:73)
... 2 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T14:34:42.840

`@Override`不是运行时注释，因此即使您可以添加它，也不会产生任何影响。

对于确实具有运行时效果的注解（`RetentionPolicy.RUNTIME`），您可以看看[这个问题](https://stackoverflow.com/questions/2964180/adding-an-annotation-to-a-runtime-generated-method-class-using-javassist)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:32:46.830

## 精简版

添加注释并不有趣。因为有了这个`@java.lang.annotation.Retention(value=java.lang.annotation.RetentionPolicy.SOURCE)`，它不会有任何区别。所以，你不需要关心这个问题。

我会关心具有`@java.lang.annotation.Retention(value=java.lang.annotation.RetentionPolicy.RUNTIME)`保留的注释。

## 长版

此注释具有`@java.lang.annotation.Retention(value=java.lang.annotation.RetentionPolicy.SOURCE)`保留性，这意味着即使您在生成一些要在运行时使用的类时使用 JAVASSIST 添加它，它也不会改变任何内容。

注释对代码没有任何影响。当 Java 生成源时，这已经被剥离了。由于 JAVASSIST 生成代码，添加它没有任何意义。

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/RetentionPolicy.html)，保留可以配置为：

*   **CLASS**注释将由编译器记录在类文件中，但不需要在运行时由 VM 保留。
*   **RUNTIME**注释将由编译器记录在类文件中，并在运行时由 VM 保留，因此可以反射性地读取它们。
*   **SOURCE**注解将被编译器丢弃。

在 JAVASSIST 中，添加**RUNTIME**或**CLASS**注释会很有趣（但对于 CLASS，它不会那么有趣，请参见[此处](https://stackoverflow.com/a/5971247/1001027)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T19:06:50.630

@Override 仅对编译器有用。

它告诉编译器确保带注释的方法：

```
a. Overrides a method on the superclass
b. Implements an interface method. 
```

当接口或超类发生变化时，这变得特别重要。您的类可能会编译，但您认为在接口上定义功能的方法或超类可能不再这样做。

所以 @Override 注释让编译器在这种情况下对你咆哮。

**编辑**

例子：

```
public interface Foo {
    void bar();
}

public class FooImpl {
    public void bar() { ... }
}

public class MyFooExtension extends FooImpl {
    public void bar() { .... }
} 
```

现在，假设 Foo 和 FooImpl 发生变化：

```
public interface Foo {
    void bar(String input);
}

public class FooImpl {
    public void bar(String input) { ... }
} 
```

你是 MyFooExtension 类仍然可以编译，但该类中的“bar()”方法永远不会被调用。因此，您的方法是无用的。如果您添加@Override 注释，您会收到一个编译错误，告诉您没有方法“void bar()”被覆盖，您必须修复您的类才能使其编译。

# wcf - 为什么将活动放在 Receive 和 SendReply 之间，而不是放在 Workflow Service 之后

> ID：11313116
> 
> 赞同：0
> 
> 时间：2012-07-03T14:29:09.707
> 
> 标签：wcf, workflow-foundation-4, workflowservice

我在 Workflow Services 上看到的大多数示例都将活动置于 Receive 和 SendReply 活动之间。但是，如果活动需要很长时间才能完成服务超时。我可以增加超时时间或将活动放在 SendReply 之后。是否有关于在哪里开展这些活动的最佳做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T06:14:46.510

无需保留接收和发送回复之间的所有活动。您的活动将在完成 SendReply 活动后执行。对于日志运行进程，发送回复可以发送与服务启动或任何异常相关的客户端消息。工作流程将在发送回复完成后执行。

你可以按照这个方法..

```
1\. Put receive activity  as first activity on the workflow.
2\. Apply validation on Data contract used as argument.
3\. Put a code activity that can set WorkflowinstanceID  in out parameter that can return as response from send reply. This is can
be used to control Workflow.
4\. Add another send reply by right click on Receive activity, return response if any validation faults occur.
5\. Put rest of activity below of send reply configure service behavior for any unhandled exception. 
```

# database - Rails中的自动表单填充？

> ID：11313119
> 
> 赞同：1
> 
> 时间：2012-07-03T14:29:13.377
> 
> 标签：database, ruby-on-rails-3, forms, auto-populate

我对这个有点重头。在我的网站：www.mystorkparty.com 上，一位用户为她的婴儿送礼会创建了一个大型注册表。无论如何创建和保存填充的注册表，然后让用户只需单击自动填充，她的注册表表单有一个预填充的表单，她可以进一步编辑？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:32:10.017

您是指表单的预定义代码吗？在这种情况下，是的，你可以。Rails 旨在将重复编码保持在最低限度，您可以创建自己的 .gem 文件，例如“myForm.gem”，它将为您生成正确的代码并将其路由到为您提供 MVC 结构的控制器。

# c# - 将数据源分配给绑定源会引发异常

> ID：11313120
> 
> 赞同：0
> 
> 时间：2012-07-03T14:29:13.697
> 
> 标签：c#, winforms, datagridview

我的代码中有以下逻辑。

```
Initialize(){
    DataGridView view = new DataGridView();
    view.BindingSource = bs;
    bs.dataSource = dataTable;

    //Fill Data Table using Adapter.
    da.fill(dataTable);
}

CallMeEveryFewMinutes(DataTable dataTable){
    List<String> changed = findChangedOjbects();
    // Fill datatable2 with changed objects.
    da2.fill(datatable2, changed)     

    Refresh(dataTable, datatable2);
    // dataTable is now refreshed. Bind it again so changes are reflected.

    // ********** PROBLEM AREA ***************
    // once in a while it throws the below exception.
    bs.dataSource = dataTable;
} 
```

不仅如此，它还会为 datagridview.sort(...) 抛出相同的异常 - 偶尔..

任何指针都会非常有帮助。

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称： System.Windows.Forms.DataGridView.GetCellAdjustedDisplayRectangle(Int32 columnIndex, Int32 rowIndex, Boolean cutOverflow) 处 System.Windows.Forms.DataGridView.GetCellDisplayRectangle(Int32 columnIndex, Int32 rowIndex, Boolean cutOverflow) 处的 rowIndex .DataGridView.InvalidateCellPrivate(Int32 columnIndex, Int32 rowIndex) 在 System.Windows.Forms.DataGridView.OnCellCommonChange(Int32 columnIndex, Int32 rowIndex) 在 System.Windows.Forms.DataGridView.DataGridViewDataConnection.ProcessListChanged(ListChangedEventArgs e) 在 System.Windows.Forms .DataGridView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:37:16.033

我发现了一个很好的提示

[http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/279d3c64-c1c2-4927-b0cc-79866c09e035/](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/279d3c64-c1c2-4927-b0cc-79866c09e035/)

“我想通了，但发布在另一个线程上。基本上，已经建立了自己的数据索引的货币管理器正在变得异常。在我的集合对象中，我允许自己传入 datagridview 对象，这样如果任何东西都会被删除，我可以调用 bindingmanager.resetcurrentbindings。如果你在删除后重置绑定，那么这将避免这个错误。

所以，我稍微改变了我的代码，问题（看起来）现在已经解决了。

```
Initialize(){
    DataGridView view = new DataGridView();
    view.BindingSource = bs;
    bs.dataSource = dataTable;

    //Fill Data Table using Adapter.
    da.fill(dataTable);
}

CallMeEveryFewMinutes(DataTable dataTable){
    List<String> changed = findChangedOjbects();
    // Fill datatable2 with changed objects.
    da2.fill(datatable2, changed)     

    Refresh(dataTable, datatable2);
    // dataTable is now refreshed. Bind it again so changes are reflected.

    // ********** PROBLEM AREA -- SOLVED ***************
    // once in a while it throws the below exception.
    //bs.dataSource = dataTable; don't rebind the same datatable, but rather reset the bindings.
    bs.ResetBindings(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:25:34.363

我在这里的假设是，由于您修改数据并将其重新绑定到控件，因此正在调用一些侦听网格本身的事件。无论是 SelectionChanged 还是 RowRemoved，您基本上都是在尝试对没有数据的 Gridview 运行这些调用。

检查您的事件侦听器，看看您是否有任何对尝试访问网格中数据的方法的调用。您甚至可以在程序中放置一些断点，以查看这些方法被调用的顺序。重新绑定发生时，请注意调用代码的顺序。

为了解决这个问题，在事件监听器上检查 dgv.Rows.Count 是否等于 0。

# c# - BackgroundWorker 超时

> ID：11313122
> 
> 赞同：5
> 
> 时间：2012-07-03T14:29:16.537
> 
> 标签：c#, wpf, timeout, backgroundworker

我`System.ComponentModel.BackgroundWorker`在我的**WPF**应用程序中使用。

如何设置**超时**`BackgroundWorker`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:32:26.940

我的建议如下

**backgroundworker1**完成工作 - 它接受取消，因此您可以让它停止。

**backgroundworker2**在超时未决时执行循环，并且超时完成。

如果**backgroundworker1**仍在运行，则`RunWorkerComplete`this 会`BackgroundWorker`杀死**backgroundworker1** ..

这也应该接受***取消***，以便如果**backgroundworker1**完成并且仍在运行，您可以取消它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T14:57:10.067

BackgroundWorker 不直接支持超时，但确实支持取消。如果正在完成的工作是一个循环或其他结构，您可以定期检查 CancellationPending 成员然后中止，这将很有效。您将需要其他一些东西来告诉后台工作人员在超时后取消。在这里，我使用了一个动作的异步调用。

```
 static void Main( string[] args )
    {
        var bg = new BackgroundWorker { WorkerSupportsCancellation = true };
        bg.DoWork += LongRunningTask;

        const int Timeout = 500;
        Action a = () =>
            {
                Thread.Sleep( Timeout );
                bg.CancelAsync();
            };
        a.BeginInvoke( delegate { }, null );

        bg.RunWorkerAsync();

        Console.ReadKey();
    }

    private static void LongRunningTask( object sender, DoWorkEventArgs eventArgs )
    {
        var worker = (BackgroundWorker)sender;
        foreach ( var i in Enumerable.Range( 0, 5000 ) )
        {
            if ( worker.CancellationPending )
            {
                return;
            }
            else
            {
                //Keep working
            }
        }
    } 
```

如果这并不真正适合您想要完成的任务，您可能会对在[实现返回值的函数上的超时](https://stackoverflow.com/questions/1370811/implementing-a-timeout-on-a-function-returning-a-value)或[实现 C# 通用超时](https://stackoverflow.com/questions/299198/implement-c-sharp-generic-timeout)中找到的通用超时解决方案感兴趣。您可以在 BackgroundWorker 中使用它们。

# perl - 使用 Lib:XSLT 创建文本文件时的额外 xml 标记

> ID：11313125
> 
> 赞同：1
> 
> 时间：2012-07-03T14:29:28.620
> 
> 标签：perl, xslt

交叉发布[http://perlmonks.org/index.pl?node_id=979710](http://perlmonks.org/index.pl?node_id=979710)

我正在尝试使用 Perl 和 Lib::XSLT 从一些 XML 创建一个文本文件，我的转换工作正常，除了 Lib::XSLT 在文件开头添加了一个不需要的 ?xml 版本标记，我怎样才能阻止它这样做?

这是我的 XSLT：

```
<xslt:stylesheet version="1.0" xmlns:data="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/generic" xmlns:xslt="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:message="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" omit-xml-declaration="yes"/>
<xslt:param name="sep">|</xslt:param>
<xslt:output method="text" />
<xslt:template match="message:MessageGroup">
<xslt:for-each select="data:DataSet">
<!-- get dimensions (but not time) and store in dimensions variable -->
<xslt:for-each select="data:Series">
<xslt:variable name="dimensions">
<xslt:for-each select="data:SeriesKey">
<xslt:for-each select="data:Value">
<xslt:value-of select="@value" />
<xslt:value-of select="$sep" />
</xslt:for-each>
</xslt:for-each>
</xslt:variable>
<!--get obs statuses and store in obs statuses variable-->
<xslt:variable name="obsStatuses">
<xslt:for-each select="data:Attributes">
<xslt:for-each select="data:Value">
<xslt:value-of select="@value" />
</xslt:for-each>
</xslt:for-each>
</xslt:variable>
<!--write out dimensions variable, time, observation, obsstatuses variable-->
<xslt:for-each select="data:Obs">
<xslt:value-of select="$dimensions" />
<xslt:value-of select="data:Time" />
<xslt:value-of select="$sep" />
<xslt:value-of select="data:ObsValue/@value" />
<xslt:value-of select="$sep" />
<xslt:value-of select="data:Attributes/data:Value/@value"/>
<xslt:text>
</xslt:text>
</xslt:for-each>
</xslt:for-each>
</xslt:for-each>
</xslt:template>
</xslt:stylesheet> 
```

这是 Perl：

```
use Lib::XSLT;
my $parser = XML::LibXML->new();
my $xslt = XML::LibXSLT->new();
my $source = XML::LibXML->load_xml(location => "$xmlFile");
my $style_doc = $parser->parse_file(Path::Class::File->new("$xsltFile"));
my $stylesheet = $xslt->parse_stylesheet($style_doc);
open OUTPUTFILE, ">>$outputFile" or die("Unable to open $outputFile, $!");
print OUTPUTFILE $stylesheet->transform($source);
close OUTPUTFILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:50:20.210

存储 $stylesheet->transform() 的结果并使用 $stylesheet->output_file() 可以解决这个问题，例如：

```
use Lib::XSLT;
my $parser = XML::LibXML->new();
my $xslt = XML::LibXSLT->new();
my $source = XML::LibXML->load_xml(location => "$xmlFile");
my $style_doc = $parser->parse_file(Path::Class::File->new("$xsltFile"));
my $stylesheet = $xslt->parse_stylesheet($style_doc);
my $results = $stylesheet->transform($source);
$stylesheet->output_file($results, $outputFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:41:43.850

为什么`<?xml>`不需要声明？它是有效的 XML，并且对解析器没有影响。

# android - 多个 SQLite 表

> ID：11313128
> 
> 赞同：1
> 
> 时间：2012-07-03T14:29:30.813
> 
> 标签：android, sqlite, multiple-tables, android-sqlite

我已经尝试了将近一个星期来创建一个包含多个表的 SQLite 数据库，但没有成功。我已经搜索了几个小时并查看了有关该主题的所有主题here，但我不知道我做错了什么。

这是我从互联网上获得的用于一张桌子的代码，我刚刚添加了另一张桌子，它不再起作用了。

适配器：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class WorkingAdapter {

    public static final String WORKINGDATABASE_NAME = "WORKING_DATABASE";
    public static final String WORKINGDATABASE_TABLE = "WORKING_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "Content";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_WORKING_DATABASE =
        "create table " + WORKINGDATABASE_TABLE + " ("
        + KEY_ID + " integer primary key autoincrement, "
        + KEY_CONTENT + " text not null);";

    public static final String WORKINGDATABASE_TABLE2 = "MY_TABLE2";
    public static final String KEY_ID2 = "_id2";
    public static final String KEY_CONTENT2 = "Content2";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_WORKING_DATABASE2 =
        "create table " + WORKINGDATABASE_TABLE2 + " ("
        + KEY_ID2 + " integer primary key autoincrement, "
        + KEY_CONTENT2 + " text not null);";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public WorkingAdapter(Context c){
        context = c;
    }

    public WorkingAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, WORKINGDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;    
    }

    public WorkingAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, WORKINGDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this;    
    }

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        return sqLiteDatabase.insert(WORKINGDATABASE_TABLE, null, contentValues);
    }

public long insert2(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT2, content);
        return sqLiteDatabase.insert(WORKINGDATABASE_TABLE2, null, contentValues);
    }

    public int deleteAll(){
        return sqLiteDatabase.delete(WORKINGDATABASE_TABLE, null, null);
    }

    public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_CONTENT};
        Cursor cursor = sqLiteDatabase.query(WORKINGDATABASE_TABLE, columns, 
                null, null, null, null, null);

        return cursor;
    }

    public Cursor queueAll2(){
        String[] columns = new String[]{KEY_ID2, KEY_CONTENT2};
        Cursor cursor = sqLiteDatabase.query(WORKINGDATABASE_TABLE2, columns, 
                null, null, null, null, null);

        return cursor;
    }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
                CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_WORKING_DATABASE);
            db.execSQL(SCRIPT_CREATE_WORKING_DATABASE2);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + WORKINGDATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + WORKINGDATABASE_TABLE2);
            onCreate(db);
        }

    }

} 
```

活动：

```
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class AndroidSQLite extends Activity {

    private WorkingAdapter myWorkingAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ListView listContent = (ListView)findViewById(R.id.contentlist);

        /*
         *  Create/Open a SQLite database
         *  and fill with dummy content
         *  and close it
         */
        myWorkingAdapter = new WorkingAdapter(this);
        myWorkingAdapter.openToWrite();
        myWorkingAdapter.deleteAll();

        myWorkingAdapter.insert("A for Apply");
        myWorkingAdapter.insert("B for Boy");
        myWorkingAdapter.insert("C for Cat");
        myWorkingAdapter.insert("D for Dog");
        myWorkingAdapter.insert("E for Egg");
        myWorkingAdapter.insert("F for Fish");
        myWorkingAdapter.insert("G for Girl");
        myWorkingAdapter.insert("H for Hand");
        myWorkingAdapter.insert("I for Ice-scream");
        myWorkingAdapter.insert("J for Jet");
        myWorkingAdapter.insert("K for Kite");
        myWorkingAdapter.insert("L for Lamp");
        myWorkingAdapter.insert("M for Man");
        myWorkingAdapter.insert("N for Nose");
        myWorkingAdapter.insert("O for Orange");
        myWorkingAdapter.insert("P for Pen");
        myWorkingAdapter.insert("Q for Queen");
        myWorkingAdapter.insert("R for Rain");
        myWorkingAdapter.insert("S for Sugar");
        myWorkingAdapter.insert("T for Tree");
        myWorkingAdapter.insert("U for Umbrella");
        myWorkingAdapter.insert("V for Van");
        myWorkingAdapter.insert("W for Water");
        myWorkingAdapter.insert("X for X'mas");
        myWorkingAdapter.insert("Y for Yellow");
        myWorkingAdapter.insert("Z for Zoo");

        myWorkingAdapter.insert2("W FOR WORKING");

        myWorkingAdapter.close();

        /*
         *  Open the same SQLite database
         *  and read all it's content.
         */
        myWorkingAdapter = new WorkingAdapter(this);
        myWorkingAdapter.openToRead();

        Cursor cursor = myWorkingAdapter.queueAll2();
        startManagingCursor(cursor);

        String[] from = new String[]{WorkingAdapter.KEY_CONTENT};
        int[] to = new int[]{R.id.text};

        SimpleCursorAdapter cursorAdapter =
            new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

        listContent.setAdapter(cursorAdapter);

        myWorkingAdapter.close();

    }
} 
```

我一直在寻找具有多个表的 SQLite 数据库的示例，但没有一个有效，并且完全按照我在该主题上找到的所有页面中阅读的内容进行操作，您能告诉我我做错了什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:44:51.917

改变

```
public static final int MYDATABASE_VERSION = 1; 
```

到

```
public static final int MYDATABASE_VERSION = 2; 
```

并且每次您更改数据库更改递增时，它都会触发 onUpgrade 递减，它将触发 onDowngrade （如果您需要这样做并且您当然会覆盖它）

[您可以从android 开发人员资源](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)中阅读有关构造函数的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:41:17.567

`_id`是表中的特殊列`SQLLite`。它是每个表的主键，如果我没记错的话，如果你不定义它，它将自动创建。我怀疑您将其更改为以`_id2`某种方式引起问题。所以改回来：

```
public static final String KEY_ID2 = "_id"; 
```

并尝试这样。

另请注意，（就像现在一样）您的应用程序将在每次运行时尝试创建表。因此，如果它在第一次运行时创建了第一个表但未能创建第二个表并且您修复了错误并再次运行您的应用程序，这一次它将无法创建第一个表，因为它已经创建。因此，为避免这些问题，请确保您进行全新安装并正确处理数据库版本控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:43:07.773

要尝试的事情：

1.  `SimpleCursorAdapter`需要`_id`在其`Cursor`. 如果`Cursor`不包含名为 的列`_id`，则会引发异常。

    改`_id2`回以`_id`解决此问题。

2.  每次运行（更新的）应用程序时转到`Settings`--> `Apps`--> `[your app]`--> 。`Clear data`这很重要，因为您希望 100% 确定每次运行应用程序时都使用全新的状态。

3.  使用 a`ListActivity`而不是`Activity`. 这使您的生活更轻松（不必`ListView`直接处理）并可能减少出错的可能性。确保你打电话`setListAdapter(adapter)`。`onCreate`

4.  不要使用`startManagingCursor`...它已被弃用为 Android 3.0。您应该使用Android 3.0`CursorLoader`中引入的 s 和`LoaderManager`（并在兼容性包中支持回 Android 1.6）。

5.  不要创建多个`WorkingAdapter`实例（或其他）。这只会让你的代码更混乱，并且更有可能因为`SQLiteDatabase`忘记关闭它而泄露你的代码。您可以在此处阅读有关此内容的更多信息：

    [如何使我的 SQLiteDatabase 成为单例？](https://stackoverflow.com/a/9286006/844882)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:45:13.047

Caner 所说的，您也不需要 KEY_CONTENT2 作为“Content2”，列名在表中是唯一的，因此将其命名为“Content”就足够了。

另外，您是否尝试过清除应用程序数据库？转到设置->应用程序->您的应用程序->清除数据。您的数据库可能是在版本 1 中使用旧版本创建的，但您没有指定版本 2，因此不会调用 onUpgrade() 方法。所以要么清除应用程序数据库，要么将数据库版本提高到 2。

# php - 选择 lis 菜单回显

> ID：11313129
> 
> 赞同：1
> 
> 时间：2012-07-03T14:29:37.173
> 
> 标签：php, mysql

我有 2 种类型的选择列表菜单：

```
<select name="category">
<option>----Select----</option>
<option>Category 1</option>
<option>Category 2</option>
<option>Category 3</option>
<option>Category 4</option>
</select>

<select name="category_product">
<option>----Select----</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
</select> 
```

我喜欢的是当我选择选择列表菜单的“类别 1”时，它与选择列表菜单“category_product”相呼应，我该怎么做？

我正在考虑将 category_product 列表菜单放入变量中，当我选择一个类别时，它会回显 category_products 列表菜单，但我不知道如何检测何时选择了类别。

希望得到一些帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T15:41:12.610

您唯一的方法是使用 JS 或 jQuery 执行此操作，这里是使用 JS 执行此操作的示例，

```
function showProducts(cat){
   document.getElementById(cat).style.display = 'block';
}

<select name="category" onchange="showProducts(this.value)">
<option>----Select----</option>
<option value="category_product">Category 1</option>
<option>Category 2</option>
<option>Category 3</option>
<option>Category 4</option>
</select>

<select style="display:none" id="category_product" name="category_product">
<option>----Select----</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
<option>Product of category 1</option>
</select> 
```

或者，如果您希望结果应该直接来自数据库，那么您必须进行 AJAX 调用的另一种选择。

**更新：**

使用此功能代替上述功能，

```
function showProducts(cat){
   for(var i=1;i<document.getElementsByTagName('select').length;i++){
     document.getElementsByTagName('select')[i].style.display = 'none';
   };
   document.getElementById(cat).style.display = 'block';
} 
```

你可以玩它让我知道任何进一步的帮助。

# java - 将edittext添加到自定义视图中

> ID：11313130
> 
> 赞同：0
> 
> 时间：2012-07-03T14:29:38.783
> 
> 标签：java, android

我有一个看起来有点像速度计的自定义视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:slider="http://schemas.android.com/apk/res-auto"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<com.mysite.view.SeekBar_Speedometer
    android:id="@+id/slider"
    slider:fill_clockwise_color="@color/lightgrey"
    slider:fill_anticlockwise_color="@color/blue"
    slider:fill_handle_color="@color/green"
    slider:fill_handle_width="3"
    slider:angle_start="120"
    slider:angle_end="60"
    slider:fill_start_angle="120"
    slider:score_min="0"
    slider:score_max="300"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

我想在速度计的中心添加一个编辑文本。

就像您可以在画布上绘制文本一样，我可以从视图内部以相同的方式添加编辑文本吗？我不这么认为！

问题是，如何将此编辑文本添加到我的自定义视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:32:47.667

在您的自定义视图类中，您可以执行以下操作：

```
EditText edit = new EditText(context);
addView( edit ); 
```

为此，您的自定义视图必须扩展 ViewGroup（LinearLayout、RelativeLayout、ecc..）

# sublimetext2 - 更改 python 解释器 - Sublime Text 2

> ID：11313131
> 
> 赞同：11
> 
> 时间：2012-07-03T14:29:39.537
> 
> 标签：sublimetext2

我刚开始使用 Sublime Text 2，想知道是否有办法将集成的 python 解释器更改为针对系统 python 安装而不是 Sublime 附带的那个，以使其成为一个功能齐全的 python IDE。原因是因为我想将计算机上的 python 库与 python 解释器一起使用。

我知道使用我的 python 版本在 sublime 中运行 python 代码，如下所示：[如何从 Sublime Text 2 运行 Python 代码？](https://stackoverflow.com/questions/8551735/how-do-i-run-python-code-from-sublime-text-2)

但是，这不会更改您正在运行的 python 解释器的版本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T09:20:27.143

工具 > 构建系统 > 新构建系统。插入文件并使用您的 python 版本：

```
{
  "cmd": ["python3", "-u", "$file"],
  "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
  "selector": "source.python"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T19:10:25.563

根据 Sublime Text 网站本身引用的文档，嵌入式 Python 解释器[不适用于一般开发](http://docs.sublimetext.info/en/latest/basic_concepts.html#your-system-s-python-vs-the-sublime-text-3-embedded-python)。*此限制使用建议甚至适用于 OS X 的 ST2，它*是唯一使用[系统 Python 版本的版本](http://sublime-text-unofficial-documentation.readthedocs.org/en/sublime-text-2/basic_concepts.html#your-system-s-python-vs-the-sublime-text-embedded-python)。所以最好使用 Build System 工作流，或者使用 ST 插件。或者切换到专门构建的 IDE。

# javascript - Javascript定时器算法求助，做一次，然后clearInterval

> ID：11313134
> 
> 赞同：1
> 
> 时间：2012-07-03T14:29:40.273
> 
> 标签：javascript, algorithm, timer, setinterval, reset

在 mousemove 或 scroll 我想重置一个计时器，如果它没有运行并且在计时器函数内部运行一个函数一次。到目前为止，我有这个...

```
var timerId,
    lastActive = new Date().getTime(),
    token;

var timerFunc = function () {

   var currentTime = new Date().getTime();
   var timeDiff = currentTime - lastActive;
   if (timeDiff > 10000) {
     //clearInterval(timerId);
   }

      //I want to do some logic here
      // but only on the first iteration of the timer
      //how can I do that?

};

$(window).on('mousemove scroll', function (e) {
lastActive = new Date().getTime();

 //only restart the timer if its not currently running. How can I do that??
if(resetTimer)
       timerId = setInterval(timerFunc , 10000);            
 });

 timerId = setInterval(timerFunc , 10000); 
```

任何 javascript 大师可以帮助我填写这些内容吗？如果我太简短了，我很抱歉。我会在评论中跟进任何问题。谢谢大家的任何提示、链接、技巧等。干杯。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:35:49.740

我会为第一个间隔使用一个布尔变量（这很简单，只需在计时器之后添加它。你在 if(resetTimer) 中也有正确的想法，检查它是否正在运行只需设置计时器函数运行时和停止时的全局变量。

# entity-framework - 使用Entity Framework Code First时，是否可以为不使用fluent API时创建的多对多链接表指定架构？

> ID：11313139
> 
> 赞同：4
> 
> 时间：2012-07-03T14:29:58.547
> 
> 标签：entity-framework, ef-code-first, many-to-many

我有两个实体：配方和成分。

实体：

```
public class Ingredient
{
    public int IngredientId{get;set;}
    public string Name {get;set;}
    public virtual ICollection<Recipe> Recipies {get;set;}
}

public class Recipe
{
    public int RecipeId{get;set;}
    public string Name {get;set;}
    public virtual ICollection<Ingredient> Ingredients {get;set;}
} 
```

我的两个实体映射到我们数据库中“Web”模式中的各自表：

```
ToTable( "Recipe", "Web" );
ToTable( "Ingredient", "Web" ); 
```

...一切正常。唯一的问题是生成的多对多表是在“dbo”模式中创建的。

`dbo.RecipeIngredients`

如果不定义 Fluent API 中的关系，有没有办法将“Web”指定为用于多对多表的表模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:44:10.203

不可以。数据注释仅支持映射功能的基本子集。如果您想拥有完整的代码优先映射功能集，您必须使用 Fluent API（这也是定义映射的更简洁的方式）。定义与联结表相关的任何内容都被视为高级映射功能，目前仅在 Fluent API 中可用。

# objective-c - 防止自定义 UITableViewCell 重复

> ID：11313141
> 
> 赞同：0
> 
> 时间：2012-07-03T14:30:02.097
> 
> 标签：objective-c, uitableview

我有一个带有 WishInfoTextView 的自定义 UITableViewCell，它只是 UILabel 的一个子类。

```
 static NSString *CellIdentifier = @"Cell";
 NSMutableDictionary* item = [myWishes objectAtIndex: indexPath.row];

WishTableViewCell* cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
if( cell == nil ) {
    cell = [[WishTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    [cell setSelectionStyle: UITableViewCellEditingStyleNone];
    [cell setWishInfo: item];
}    

WishInfoTextView* infoText = (WishInfoTextView*)[cell viewWithTag: kTableInfoText];
infoText.text = [item objectForKey:@"name"];

NSLog(@"\nTaggedText: %@\nNormalText: %@", infoText.wishName, [item objectForKey:@"name"]); 
```

唯一的问题是我有重复的单元格。我读了一些关于设置标签的东西。但是，如果我通过他的标签访问我的标签，则没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:58:59.737

You're using `objectForKey@"name"` every time you want a cell. So you will always get the same thing. If you have an array of strings, use something like `[arrayName objectAtIndex:indexPath.row]` in order to actually get different values.

For example, when I populate a table from an array I use

```
NSArray *nameSection = [appD.data objectForKey:key];
cell.textLabel.text = [nameSection objectAtIndex:indexPath.row]; 
```

`appD.data` is gotten by

```
NSString *DataPath = [Path stringByAppendingPathComponent:@"Primary.plist"];
NSDictionary *data = [[NSDictionary alloc] initWithContentsOfFile:DataPath]; 
```

Where `Primary.plist` is

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>First type</key>
    <array>
        <string>object1</string>
        <string>object2</string>
        <string>object3</string>
    </array>
    <key>Second type</key>
    <array>
        <string>thing1</string>
        <string>thing2</string>
        <string>thing3</string>
    </array>
</dict>
</plist> 
```

# drupal - Drupal、Gmap 不适用于 Firefox。但是用 Chrome 没问题

> ID：11313149
> 
> 赞同：0
> 
> 时间：2012-07-03T14:30:27.443
> 
> 标签：drupal

我第一次在drupal上工作，我对gmap有一点问题。当我在 chrome 上检查它的完美时，在 firefox 上显示图标但地图没有。

谁能告诉我是什么问题？或者我必须使用替代？这是示例的链接：[http ://www.unscalped.com/node/36](http://www.unscalped.com/node/36)

```
Timestamp: 3/7/2012 5:02:41 PM
Error: Image corrupt or truncated: <unknown>
Source File: <unknown>
Line: 0

I got also this error in ERROR CONSOLE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:05:19.810

我得到了答案，

```
.gmap img{max-width:none;} 
```

这个 CSS 行解决了我的问题。图像的属性被设置为继承**最大宽度：100%；**只需将最大宽度设置为无，我认为如果有人在查看地图时遇到问题，这对其他人会有所帮助。

# android - 何时获取自定义视图的宽度和高度属性

> ID：11313153
> 
> 赞同：0
> 
> 时间：2012-07-03T14:30:57.313
> 
> 标签：android, android-fragments, android-view

我有一个`Class`被调用`LineGraphView`的，它是`View`. 我希望能够将一些数据传递给这个视图，以便它可以在其`onDraw()`方法中相应地绘制。

**分析片段（引用视图和调用方法的位置）**

```
LineGraphView altitudeGraph;
LineGraphView speedGraph;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{
    super.onCreateView(inflater, group, saved);

    View view = inflater.inflate(R.layout.analysisfrag, group, false);
    this.altitudeGraph = (LineGraphView) view.findViewById(R.id.linegraph_Altitude);
    this.speedGraph = (LineGraphView) view.findViewById(R.id.linegraph_Speed);

    return view;
} 
```

我的问题是，如果我希望能够使用`getWidth()`and访问该视图的宽度和高度属性`getHeight()`，我什么时候能够这样做，因为到目前为止返回的都是`0`.

我是否需要创建一个侦听器，让`LineGraphView's`父母知道它已准备好被访问？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:42:38.607

如果您已经在创建自己的自定义视图，我只需添加一些带有 getter/setter 的私有变量，以获取您需要传递的信息。从那里，只需在 onDraw() 方法中处理绘图——从那里，您可以获得视图的宽度和高度（或者只是画布的宽度和高度，它们可能是相同的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:40:26.050

答案在这里：[https](https://stackoverflow.com/a/3594216/969325) ://stackoverflow.com/a/3594216/969325 基本上你调用 getWidth/height 太早了（在 onCreate 期间）。我相信您可以在 onCreate 之后使用处理程序来获取它。你也可以试试这个：[https](https://stackoverflow.com/a/10118459/969325) ://stackoverflow.com/a/10118459/969325（使用onWindowFocusChanged）。

# ruby-on-rails - 在 Rails 3 中重用自定义 RESTful 路由的名称

> ID：11313156
> 
> 赞同：0
> 
> 时间：2012-07-03T14:31:01.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想做一些我想像这样的事情：

```
resources :users do
  collection do
    get  'login', :action => 'login_form'
    post 'login', :action => 'login'
    get 'logout'
  end
end 
```

即我希望两个控制器操作使用不同的方法绑定到同一路径。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:01:01.123

您应该阅读有关路线的指南：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

```
resources :users do
    collection do
        match  'login' => "users#login_form", via: :get
        post   'login'
        get 'logout'
    end
end 
```

一个`login_form`动作听起来不太平静。只是说;）

# .net - .NET 获取活动以太网 IPAddress

> ID：11313162
> 
> 赞同：2
> 
> 时间：2012-07-03T14:31:33.673
> 
> 标签：.net, ip-address, network-interface

我正在寻找 .net 中的活动 IPAddress，在这种情况下是与以太网适配器关联的地址。

现在我知道我可以使用以下方法获取当前分配给机器的 IP 列表：

```
IPHostEntry entry = Dns.GetHostEntry(Dns.GetHostName()); 
```

而且我知道我可以使用以下方法获得有关我的不同网络接口的大量信息：

```
NetworkInterface[] networks = NetworkInterface.GetAllNetworkInterfaces(); 
```

我可以使用 NetworkInterfaceType 枚举确定哪些接口是我的以太网接口，以及接口是否为“Up”，但我似乎找不到将此 NetworkInterface 绑定到相应 IPAddress 的方法。从 NetworkInterface 类中，我只能看到如何获取诸如任播地址或网关地址之类的东西，但没有任何东西可以帮助我缩小以太网 IP 的范围。

有谁知道这样做的方法，无论是简单的还是复杂的？

编辑：例如命令行上的 netstat 或 tracert 可以提供所有活动的网络连接。对我来说，.net 没有与此类似的东西似乎很奇怪，对我来说解析命令行结果似乎完全没有必要。GetBestInterface() 之类的东西似乎很有用，但它只会返回可以访问给定其他 IP 的 IP。同样，不是很通用。

如果没有其他方法可以使用 C# 来获取有效的 IPAdresses，那么就这样吧，我将使用命令行，但这似乎是一种流行的编程语言应该能够做到的事情。事实上，如果有人有 C++ 或 C 解决方案，我可以连接到我的 C# 应用程序，它也可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:55:59.063

所以这里有用的统计数据是给定接口上接收到的总字节数。

```
NetworkInterface.GetIPv4Statistics().BytesReceived 
```

结合使用它：

```
NetworkInterface.OperationalStatus 
```

可以告诉您它当前是否“启动”以及过去是否收到过数据包。在无线的情况下，如果当前未连接，则 OperationalStatus 为“Down”，但在以太网的情况下，即使没有插入电缆，它仍保持“Up”。我认为这是因为不需要物理电缆给出一个 IPAddress 但问题是我想知道由于没有连接而尝试使用该地址是否会浪费处理能力。

最后，将该地址绑定到网络非常简单：

```
UnicastIPAddressInformationCollection ipc = NetworkInterface.GetIPProperties().UnicastAddresses; 
```

通过这种方式，您可以访问特定的 NetworkInterface 以获取其 IP 地址。这通常会返回 IPv4 和 IPv6 地址。

# asp.net - Windows 身份验证的 IIS 7 奇怪行为

> ID：11313169
> 
> 赞同：0
> 
> 时间：2012-07-03T14:31:56.397
> 
> 标签：asp.net, iis-7, active-directory

所以我设置了一个带有 Windows 身份验证的 IIS 7 服务器，一切正常。我有一个返回用户名和组的 aspx（测试页）。

代码：

```
 IIdentity WinId = HttpContext.Current.User.Identity;
        WindowsIdentity wi = (WindowsIdentity)WinId;
        string userDomain = wi.Name.ToString(); 
```

userdomain 字符串返回（示例）“DOMAIN/username”

但是，我的域中只有一个用户（与类似用户相同的活动目录组），但他返回“服务器/管理员”。我检查了所有安全组，他不属于他们。所以我没有想法。

编辑：见下面我的答案（想通了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:52:16.653

弄清楚了。他有一个附加到他的用户帐户的证书，该证书在使用远程桌面连接时没有被破坏。不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:51:17.783

有两个地方存储用户帐户，本地 SAM 存储和 Active Directory。

如果您看到“服务器\用户名”，则表示您已使用本地 SAM 存储中的帐户登录到计算机。

如果您看到“域\用户名”，则表示您已使用 Active Directory 中的帐户登录到计算机

当您拥有与域用户帐户具有相同用户名的本地用户帐户时，通常会出现混淆。内置帐户“管理员”通常是导致这种混乱的最常见帐户之一。

为了确保您使用域帐户而不是本地用户帐户登录，您可以在登录时指定完全限定名称。例如域\管理员或服务器\管理员

# c++ - VS2005 如何强制所有指针访问不对齐？

> ID：11313174
> 
> 赞同：2
> 
> 时间：2012-07-03T14:32:04.133
> 
> 标签：c++, pointers, compiler-construction, visual-studio-2005

我有一些代码或更好的说法是从STM32/FreeRTOS复制到OMAP2430/WindowsCE平台的完整项目。

在复制的 C/C++ 文件中，我有一些代码处理在运行时创建和销毁的数据结构，大小和地址对齐完全取决于在每个创建过程中进入数据结构的数据量。

我不想使用任何打包/填充来使地址对齐正确，但想使用任何允许对数据结构进行非对齐访问的编译器选项。现在我一直在使用`__unaligned`数据结构指针的类型修饰符（`UNALIGNED`宏来自`Windef.h`）

我知道它会造成一些性能下降，但我可以在这段特定的代码部分中忍受。

我想从其他程序员那里知道的是，Windows CE 编译器设置中有一个选项可以强制所有内存访问未对齐。我说的是这样的事情[https://blogs.oracle.com/d/entry/on_misaligned_memory_accesses](https://blogs.oracle.com/d/entry/on_misaligned_memory_accesses)

非常感谢任何答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:47:58.020

我相信在 ARM 上，未对齐的访问可能是硬件错误，而不是 x86 上的性能下降。因此，编译器可能*无法*执行这样的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:54:46.130

你有几个选择。

将特定元素设置为 __unaligned 即可。所以将：

```
# pragma pack (1)
struct x_
{
   char a;    // 1 byte
   int b;     // 4 bytes
   short c;   // 2 bytes
} MyStruct;
# pragma pack () 
```

或使用 /Zp1 在编译器命令行上设置打包

如果您的目标处理器支持通过非对齐访问取消引用指针，您将很快知道 - 如果它不支持未对齐访问，您将收到总线错误 (SIGBUS)。

如果您只是在跟随指针之前将指针从数据结构中复制出来，您可能会获得两全其美的效果。例如，只需将其分配给临时函数指针。

# php - 此代码是否从网站流量中获取文件权重？

> ID：11313177
> 
> 赞同：1
> 
> 时间：2012-07-03T14:32:12.830
> 
> 标签：php, readfile, traffic

我有这个代码：

```
$_REQUEST['file'] = "www.xxx.com/file.exe"; //for exemple
header("Content-type: application/x-file-to-save");
header("Content-Disposition: attachment; filename=".$_REQUEST['name']);
header('Content-Length: ' . $contentLength);

readfile($_REQUEST['file']); 
```

它是否占用了服务器流量的文件大小？

编辑：我买了一个网络主机计划，说我每月有 200 GB 的流量。我的网站上有这段代码。除了 PHP 文件的大小之外，READFILE() 是否会影响我的每月流量？因为我使用这个代码每月下载超过 200GB。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:03:13.850

据我了解，您的问题是：

> 使用此页面下载文件是否会占用我的带宽？

我的回答几乎肯定是肯定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:03:34.620

您的每月流量是输入和/或输出的*任何*数据。*
无论流量是*如何*产生的，它都算数。
把它想象成通过网络电缆传输的比特，这很重要。
在您的情况下，它肯定会增加下载流量。如果`$_REQUEST['file']`指向另一个服务器，那么你的服务器必须先下载文件，它也会增加上传流量。

* * *

* 您不指定限制是上传、下载还是合并...

# java - 我应该始终使用 java 首选项 API get() 方法还是将它们加载到内存中并从那里获取它们？

> ID：11313179
> 
> 赞同：4
> 
> 时间：2012-07-03T14:32:14.570
> 
> 标签：java, preferences

我`java.util.prefs`用来存储应用程序设置并在应用程序中定期使用这些设置。在应用程序启动时，我是否应该将这些设置加载到内存中，这样我就不会不断地从首选项文件中检索它们？我从性能和标准编码实践的角度询问。我觉得有一个性能权衡：

*   如果将它们加载到内存中，您可以更快地访问它们，但是当您更改任何设置时，您必须同时更改节点和内存中的参数。
*   如果您将它们仅保留在节点中，那么您就一直在做`myPreferences.get()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:39:35.287

我很确定首选项已被缓存，因此`get()`应该很快。您可以查看[FileSystemPreferences](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/prefs/FileSystemPreferences.java)的代码，它只是进行一些检查并在`Map`.

# algorithm - 如何有效地确定径向渐变中波段真正靠近的位置？

> ID：11313181
> 
> 赞同：3
> 
> 时间：2012-07-03T14:32:26.703
> 
> 标签：algorithm, graphics, gradient, radial-gradients

在将Spread 属性设置为Reflect 或Repeat 的情况下使用我的径向渐变算法时，当条带靠得太近时，我会出现疯狂的莫尔条纹。这个是正常的。

我一直试图了解的是如何弄清楚这种情况发生*在哪里*，或者是否有可能弄清楚这一点。如果我可以确定某种“不同的<->混淆”值，我可以将其用作权重，在给定像素的渐变颜色和所有颜色的加权平均值之间进行混合，从而减轻莫尔条纹。

我知道这是一个相当晦涩的话题，也许这更像是一个数学问题，但是有人有什么想法吗？

作为参考，我的算法类似于[这个实现](http://dev.dorothybrowser.com/?p=297)。

这是我的代码现在给出的内容：

![扩散设置为反射的径向渐变](../Images/4d91d04751ef52aa6961f067c54021f2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:11:11.500

使用 3x3 过滤器并为每个 3x3 像素块计算颜色方差。例如，对于补丁中的每两个相邻像素（例如 pix(0,0) 和 pix(0,1)），获取每个颜色通道之间差异的绝对值，对其进行平方和求和。

所以像：

```
double pixelVariance( pix a, pix b )
{
    double variance = 0;
    variance += ( a.red   - b.red   ) * ( a.red   - b.red   );
    variance += ( a.green - b.green ) * ( a.green - b.green );
    variance += ( a.blue  - b.blue  ) * ( a.blue  - b.blue  );
    return variance;
} 
```

然后是 3x3 补丁的方差：

```
double patchVariance( Patch patch )
{
   double variance = 0;
   variance += pixelVariance( patch( 0, 0 ), patch( 0, 1 )); 
   variance += pixelVariance( patch( 0, 0 ), patch( 1, 0 )); 
   // etc.
   return variance;
} 
```

具有高方差的补丁不是平滑的渐变，几乎可以肯定是高云纹区域。

# java - 为什么在这种情况下会抛出 UnrecoverableKeyException 异常？

> ID：11313189
> 
> 赞同：2
> 
> 时间：2012-07-03T14:32:37.790
> 
> 标签：java

我有一个访问密钥库的代码。当我的密码错误时，我得到一个 type 异常`UnrecoverableKeyException`。所以我把我的代码写成：

```
 try {
            InputStream f = new FileInputStream("<location to file>")
            keyStore.load( f , passwords );
        } catch(UnrecoverableKeyException e){
                 log.error("")

        } 
```

但这并没有抓住例外。因此，在我的`catch`块中，我将代码更改为：

```
catch(Exception e)
{
  log.error(e.getClass(),e)
} 
```

它捕获异常并打印类类型为`class java.io.IOException`. 但是为什么首先我会收到一条异常是的消息`UnrecoverableKeyException`？

究竟发生了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:40:15.773

Javadoc for[`KeyStore.load`](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html#load%28java.io.InputStream,%20char%5b%5d%29)声明它可以抛出`IOException`, 并且：

> 如果错误是由于密码错误，IOException 的原因应该是 UnrecoverableKeyException

这意味着你捕捉到的实际上是一个`IOException`但`e.getCause()`会是一个`UnrecoverableKeyException`. 打印堆栈跟踪时，您会看到链中的所有原因，这可能导致您认为它是一个`UnrecoverableKeyException`.

# core-plot - 计算绘图上2点之间的距离

> ID：11313200
> 
> 赞同：0
> 
> 时间：2012-07-03T14:33:05.037
> 
> 标签：core-plot

我需要计算绘图上 2 个点之间的距离。

我正在使用下面的方法来满足这个需求。我尝试了其他方法，但这是唯一一个实际是情节的方法。在其他方法上，它总是返回 0。

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index 

  NSDecimal plotPoint[2];
        CPTPlotSpace *thePlotSpace = plot.plotSpace;
        CPTPlotArea *thePlotArea   = plot.plotArea;
        CPTCoordinate independentCoord = (NO ? CPTCoordinateY : CPTCoordinateX);

        plotPoint[independentCoord] = [plot cachedDecimalForField:CPTBarPlotFieldBarLocation recordIndex:0];

        CGPoint basePoint;

        basePoint = [plot convertPoint:[thePlotSpace plotAreaViewPointForPlotPoint:plotPoint] fromLayer:thePlotArea];

        plotPoint[independentCoord] = [plot cachedDecimalForField:CPTBarPlotFieldBarLocation recordIndex:1];

        CGPoint basePoint2;

        basePoint2 = [plot convertPoint:[thePlotSpace plotAreaViewPointForPlotPoint:plotPoint] fromLayer:thePlotArea];

        int valor; 
        valor =  basePoint2.x - basePoint.x; 
```

上面的代码几乎总是有效，但我得到了来自上面这段代码的 EXC_BAD_ACESS。

当我评论代码时，exc_bad_access 永远不会发生

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000004
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   Foundation                      0x32f7be56 NSIntegerDivide + 98
1   Foundation                      0x32f7f9e0 NSDecimalDivide + 216
2   InfoTOS007                      0x000e198c CPTDecimalDivide (CPTUtilities.m:496)
3   InfoTOS007                      0x000fd0c8 -[CPTXYPlotSpace     viewCoordinateForViewLength:linearPlotRange:plotCoordinateValue:] (CPTXYPlotSpace.m:384)
4   InfoTOS007                      0x000fd66a -[CPTXYPlotSpace plotAreaViewPointForPlotPoint:] (CPTXYPlotSpace.m:449)
5   InfoTOS007                      0x000bea38 -[GraficoEmbarqueDescarga dataLabelForPlot:recordIndex:] (GraficoEmbarqueDescarga.m:249)
6   InfoTOS007                      0x000ce192 -[CPTPlot relabel] (CPTPlot.m:1016)
7   InfoTOS007                      0x000cb868 -[CPTPlot layoutSublayers] (CPTPlot.m:402)
8   QuartzCore                      0x34272f92 CA::Layer::layout_if_needed(CA::Transaction*) + 210
9   QuartzCore                      0x34277114 CA::Context::commit_transaction(CA::Transaction*) + 220
10  QuartzCore                      0x34276e50 CA::Transaction::commit() + 308
11  QuartzCore                      0x3426ed7e CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 50
12  CoreFoundation                  0x344deb44 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
13  CoreFoundation                  0x344dcd80 __CFRunLoopDoObservers + 252
14  CoreFoundation                  0x344dd0da __CFRunLoopRun + 754
15  CoreFoundation                  0x344604d6 CFRunLoopRunSpecific + 294
16  CoreFoundation                  0x3446039e CFRunLoopRunInMode + 98
17  GraphicsServices                0x30d4bfc6 GSEventRunModal + 150
18  UIKit                           0x32a2873c UIApplicationMain + 1084
19  InfoTOS007                      0x000b3468 main (main.m:16)
20  InfoTOS007                      0x000b340c start + 32 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:58:45.883

看起来问题在于您从未设置 plotPoint[dependentCoord]，因此它试图将未定义的值转换为绘图坐标。只需将其设置为图形范围内的值，如果您担心的是 X 轴，那么 Y 轴值无关紧要。我没有尝试编译以下内容，但它看起来正确。

```
 NSDecimal plotPoint[2];
  CPTPlotSpace *thePlotSpace = plot.plotSpace;
  CPTPlotArea *thePlotArea   = plot.plotArea;
  CPTCoordinate independentCoord =  CPTCoordinateX;
  CPTCoordinate dependentCoord =  CPTCoordinateY;

  plotPoint[independentCoord] = [plot cachedDecimalForField:CPTBarPlotFieldBarLocation recordIndex:0];
  plotPoint[dependentCoord] = CPTDecimalFromInt(1);

  CGPoint basePoint;
  basePoint = [plot convertPoint:[thePlotSpace plotAreaViewPointForPlotPoint:plotPoint] fromLayer:thePlotArea];

  plotPoint[independentCoord] = [plot cachedDecimalForField:CPTBarPlotFieldBarLocation recordIndex:1];
   CGPoint basePoint2;
   basePoint2 = [plot convertPoint:[thePlotSpace plotAreaViewPointForPlotPoint:plotPoint] fromLayer:thePlotArea];

    int valor; 
    valor =  basePoint2.x - basePoint.x; 
```

# android - 将任务移到后面无法正常工作android

> ID：11313201
> 
> 赞同：2
> 
> 时间：2012-07-03T14:33:09.403
> 
> 标签：android, android-activity

我有两个活动 A 和 B，要从 A 移动到 B，您需要登录。在我转移到 BI 后，在 A 上调用 finsih。

在 B 活动中，当按下后退按钮时，我调用 movetoBack。但是，当我回忆起我的应用程序时，它会将我带回 A。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    moveTaskToBack (true);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T14:52:11.823

不要调用`super`，它会调用 BACK 按钮的默认实现......这是`finish()`在当前 Activity 上调用。只需`moveTaskToBack()`在您的 Override 内部调用。

# c# - 生成唯一标识

> ID：11313205
> 
> 赞同：75
> 
> 时间：2012-07-03T14:33:14.750
> 
> 标签：c#, asp.net, .net, uniqueidentifier

我是一名大学生，我们的任务是创建一个搜索引擎。当添加到边界时，我很难生成分配给每个 url 的唯一 ID。我曾尝试使用 SHA-256 散列算法以及 Guid。这是我用来实现 guid 的代码：

```
public string generateID(string url_add)
{
    long i = 1;

    foreach (byte b in Guid.NewGuid().ToByteArray())
    {
        i *= ((int)b + 1);
    }

    string number = String.Format("{0:d9}", (DateTime.Now.Ticks / 10) % 1000000000);

    return number;
} 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-07-03T14:36:14.317

为什么不直接使用 ToString？

```
public string generateID()
{
    return Guid.NewGuid().ToString("N");
} 
```

如果您希望它基于 URL，您可以简单地执行以下操作：

```
public string generateID(string sourceUrl)
{
    return string.Format("{0}_{1:N}", sourceUrl, Guid.NewGuid());
} 
```

如果你想隐藏 URL，你可以在 sourceURL 上使用某种形式的 SHA1，但我不确定这会实现什么。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-03T14:34:54.967

为什么不使用[GUID](http://msdn.microsoft.com/en-us/library/system.guid.aspx)？

```
Guid guid = Guid.NewGuid();
string str = guid.ToString(); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-07-07T00:27:43.677

这是一个类似于 id 生成器的“YouTube-video-id”，例如“UcBKmq2XE5a”

```
StringBuilder builder = new StringBuilder();
Enumerable
   .Range(65, 26)
    .Select(e => ((char)e).ToString())
    .Concat(Enumerable.Range(97, 26).Select(e => ((char)e).ToString()))
    .Concat(Enumerable.Range(0, 10).Select(e => e.ToString()))
    .OrderBy(e => Guid.NewGuid())
    .Take(11)
    .ToList().ForEach(e => builder.Append(e));
string id = builder.ToString(); 
```

它创建大小为 11 个字符的随机 ID。您也可以增加/减少它，只需更改 Take 方法的参数即可。

0.001% 重复 1 亿。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-05-30T07:54:38.173

为什么我们不能如下创建一个唯一的 id。

我们可以使用 DateTime.Now.Ticks 和 Guid.NewGuid().ToString() 组合在一起并制作一个唯一的 id。

添加 DateTime.Now.Ticks 后，我们可以找出创建唯一 ID 的日期和时间（以秒为单位）。

请看代码。

```
var ticks = DateTime.Now.Ticks;
var guid = Guid.NewGuid().ToString();
var uniqueSessionId = ticks.ToString() +'-'+ guid; //guid created by combining ticks and guid

var datetime = new DateTime(ticks);//for checking purpose
var datetimenow = DateTime.Now;    //both these date times are different. 
```

我们甚至可以获取唯一 id 中的刻度部分，并在以后检查日期和时间以供将来参考。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-03T14:45:35.263

如果您想使用 sha-256（guid 会更快），那么您需要执行类似的操作

```
SHA256 shaAlgorithm = new SHA256Managed();
byte[] shaDigest = shaAlgorithm.ComputeHash(ASCIIEncoding.ASCII.GetBytes(url));
return BitConverter.ToString(shaDigest); 
```

当然，它不一定是 ascii，也可以是任何其他类型的哈希算法

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-18T09:21:32.223

这个问题似乎得到了回答，但是为了完整起见，我会添加另一种方法。

您可以使用基于 Twitter 的[Snowflake](https://github.com/twitter/snowflake) id 生成器的唯一 ID 号生成器。C# 实现可以在[这里](https://flakeidgenerators.codeplex.com/SourceControl/latest#FlakeGen/Id64Generator.cs)找到。

```
var id64Generator = new Id64Generator();

// ...

public string generateID(string sourceUrl)
{
    return string.Format("{0}_{1}", sourceUrl, id64Generator.GenerateId());
} 
```

请注意，该方法的一个非常好的特性是可以在独立节点上拥有多个生成器（可能对搜索引擎有用），生成实时的全局唯一标识符。

```
// node 0
var id64Generator = new Id64Generator(0);

// node 1
var id64Generator = new Id64Generator(1);

// ... node 10
var id64Generator = new Id64Generator(10); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-02T10:35:12.997

我们可以做这样的事情

```
string TransactionID = "BTRF"+DateTime.Now.Ticks.ToString().Substring(0, 10); 
```

# visual-studio-2010 - 如何在数据库项目中包含一个 sql 文件而不让其在部署过程中运行

> ID：11313207
> 
> 赞同：1
> 
> 时间：2012-07-03T14:33:21.037
> 
> 标签：visual-studio-2010, sql-server-2008-r2, database-project, vsdbcmd

我的数据库项目需要包含一个带有命令的 SQL 文件，该命令将在另一台服务器中手动运行，以便创建一个链接服务器。我希望这个文件将被 VSDBCMD 解析并复制到带有变量集的输出文件夹中。

我唯一能做的就是将它复制到选择*Copy to Output Directory*选项*Copy Always*的输出文件夹中，但是 VSDBCMD 不解析该文件，因此它的变量没有价值。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:29:16.500

两种选择：

## 将部署目标添加到数据库项目文件

配置“我的项目设置”的部署设置。然后在构建解决方案时，构建服务器将使用这些设置。在本地构建时，使用的设置将来自“我的隔离开发环境”。

1-在数据库项目属性中

部署操作需要设置为'创建部署脚本（.sql）并部署数据库'；这将阻止脚本的执行，它只会创建它。

2- 数据库项目文件

修改数据库项目文件（右键数据库项目，选择Unload，再次右键，选择Edit [ProjectName].dbproj）来自

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0"> 
```

至

```
<Project DefaultTargets="Build;Deploy" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0"> 
```

当构建服务器构建包含数据库项目的解决方案时，添加默认目标也将部署数据库。此构建将使用为“我的项目设置”选择的部署设置。

优点 - 易于设置

缺点 - 开发人员必须管理自己的隔离开发环境设置

## 将调用 vsdbcmd 的调用进程添加到构建模板

遵循此过程：http: [//msdn.microsoft.com/en-us/library/ff805001.aspx](http://msdn.microsoft.com/en-us/library/ff805001.aspx)

优点 - 开发人员不必管理自己的隔离开发环境设置

缺点 - 每次向数据库项目添加或删除变量时，都需要修改构建模板或构建定义以反映这些更改

# c++ - 什么是奇数循环，我如何知道我的图表中是否存在奇数循环？

> ID：11313213
> 
> 赞同：0
> 
> 时间：2012-07-03T14:33:31.717
> 
> 标签：c++, algorithm, graph, cycle, breadth-first-search

我是图论的新手。假设有一个连通无向图。我想知道它是否有一个奇数长度的循环。我可以使用 BFS 找到我的图表中是否存在循环。我还没学过DFS。这是我的代码，它只是查找是否存在循环。提前致谢。

```
#include<iostream>
#include<vector>
#include<queue>
#include<cstdio>
#define max 1000

using namespace std;

bool find_cycle(vector<int> adjacency_list[]);

int main(void)
{
     freopen("input.txt","r",stdin);
freopen("output.txt","w",stdout);

int vertex, edge;
vector<int> adjacency_list[max];

cin >> vertex >> edge;

//Creating the adjacency list
for(int i=1; i<=edge; i++)
{
    int n1, n2;
    cin >> n1 >> n2;

    adjacency_list[n1].push_back(n2);
    adjacency_list[n2].push_back(n1);
}

if(find_cycle(adjacency_list))
    cout << "There is a cycle in the graph" << endl;
else cout << "There is no cycle in the graph" << endl;

return 0;
}

bool find_cycle(vector<int> adjacency_list[])
{
queue<int> q;
bool taken[max]= {false};
int parent[max];

q.push(1);
taken[1]=true;
parent[1]=1;

//breadth first search
while(!q.empty())
{
    int u=q.front();
    q.pop();

    for(int i=0; i<adjacency_list[u].size(); i++)
    {
        int v=adjacency_list[u][i];

        if(!taken[v])
        {
            q.push(v);
            taken[v]=true;
            parent[v]=u;
        }
        else if(v!=parent[u]) return true;
    }
}

return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:03:53.477

属性“2-colorable”也称为“二分”。在这种情况下，使用 DFS 还是 BFS 无关紧要。当您访问图形的节点时，将它们标记为 0 / 1，具体取决于您来自的邻居的颜色。如果您发现一个节点已经被标记，但标记与您在访问时标记的不同，则存在一个奇数长度的循环。如果没有出现这样的节点，则不存在奇数长度的循环。

# java - 将点从坐标系 (0,800) 转换为坐标系 (50,-50) jFrame<->opengl

> ID：11313214
> 
> 赞同：4
> 
> 时间：2012-07-03T14:33:32.080
> 
> 标签：java, math, opengl, awt, coordinates

我在以下坐标系中有一点：

Java AWT：

```
0,0|------------------------|
   |                        |
   |  (middle p. 400,300)   |
   |                        |
   |------------------------|800,600 
```

我想将其转换为以下系统：

OpenGL

```
 50,50|------------------------|
       |                        |
       |     (middle p. 0,0)    |
       |                        |
       |------------------------|-50,-50 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:21:54.263

通常，您要做的是将（矩形）坐标系转换`A`为坐标系`B`。

首先将源坐标系映射`A`到标准化范围`[0, 1]`：

```
double nx = x / (x1 - x0);
double ny = y / (y1 - y0); 
```

`(x0, y0)`左上角在哪里，右下角在哪里`(x1, y1)`。然后将其映射到新的坐标系：

```
double px = X0 + nx * (X1 - X0);
double py = Y0 + ny * (Y1 - Y0); 
```

`(X0, Y0)`新坐标系的左上角在哪里，新坐标系`(X1, Y1)`的右下角在哪里。

这适用于任何两个直角坐标系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:38:58.497

```
public Point awtToOpenGL(Point p) {
  Point newP = new Point();
  newP.setX(50 - (p.getX() / 8));
  newP.setY(50 - (p.getY() / 6));
  return newP;
} 
```

[编辑] 弄错了 origo。新尝试。

由于 openGL 系统是 100 宽而 AWT 是 800 宽，我们需要将 x 值除以 8。按照相同的逻辑，y 需要除以 6。由于 x 和 y 都从 50 开始并向下，所以我们需要然后是从 50 中减去该值。

# iphone - 选择 TableView 项目时如何调出 ViewController？

> ID：11313221
> 
> 赞同：0
> 
> 时间：2012-07-03T14:34:20.380
> 
> 标签：iphone, ipad, uiviewcontroller, uitableview

我正在编写一个有两个主要视图的应用程序。第一个是主屏幕，第二个是 UITableViewController 并填充了一个数组以显示用户的历史记录。TableView 加载良好并且填充良好，问题是当我去打开主视图控制器备份时。如果我使用：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{

    ViewController *myView;

    myView = [[ViewController alloc] initWithNibName:nil bundle:nil];

    [self presentModalViewController:myView animated:YES];

} 
```

ViewController 出现了，但屏幕是黑色的！

如果我使用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{

    ViewController *myView;

    myView = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]];

    [self presentModalViewController:myView animated:YES];

} 
```

应用程序崩溃并告诉我：

> *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle (loaded)' with name 'ViewController'' *** First throw call stack: (0x30f0a88f 0x35fdb259 0x30f0a789 0x30f0a7ab 0x318a434b 0x318123c7 0x316efc59 0x31665c17 0x31670267 0x316701d5 0x3170f59b 0x3170e367 0x317696a7 0x36dc1 0x316de93d 0x31758627 0x3094d933 0x30edea33 0x30ede699 0x30edd26f 0x30e604a5 0x30e6036d 0x3129f439 0x3165acd5 0x3465b 0x34600) terminate called throwing an exception(lldb)

我对 iPhone 和 iPad 的应用程序编程非常陌生，但我认为这将是一项相当简单的任务。我之前在其他应用程序中切换过视图，但这个只是不工作。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:02:32.640

3件事：

1) 真正考虑为像这样的简单应用程序使用更新的 xcode 和故事板（有支持和反对故事板的论据，但如果你是初学者，他们是要走的路）。

这是一个很好的文档，您可以阅读：http: [//developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html)

2）你的代码：

```
myView = [[ViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:myView animated:YES]; 
```

这没有多大意义，除非您正在做一些非常复杂的事情（并且您说您是 iphone 开发的新手） - 这表明您正在完全以编程方式创建自定义 UIViewController。

以下代码更有意义，但错误表明您尚未在项目中创建 ViewController NIB 文件（您使用 Interface Builder 编辑的 ViewController.xib）。

```
myView = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]];
[self presentModalViewController:myView animated:YES]; 
```

3) 你说你创建了几个 ViewController，但是你如何在它们之间转换？通常你会使用 UINavigationController 或 UITabBarController 来处理转换（同样，除非你正在做更复杂的事情）。然后这些包括允许在视图之间切换的机制。

回到我的第一点——使用故事板使管理这些多个视图变得更加简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:39:36.633

由于错误表明您没有名为 ViewController 的 nib 文件，请检查您的项目中是否有名为 ViewController 的 nib 文件

# sql - 尝试在 Jasper 报告中加入 2 个查询

> ID：11313222
> 
> 赞同：1
> 
> 时间：2012-07-03T14:34:23.383
> 
> 标签：sql, jasper-reports

我试图有一个这样的表：

```
Manager     Expert          Adminis. Staff
Dept        A.P. | C.P.     A.P. | C.P.     A.P. | C.P.
Management      1   1       1   0              1    1   
Accounting      1   1       1   1              0    0
IT              1   1       2   1              0    0 
```

AP = 可用位置编号 CP = 当前位置编号

AP 来自名为 Positions 的表：

```
[Positions](
    [id] [numeric](19, 0) IDENTITY(1,1) NOT NULL,   
    [NumOfAvailablePositions] [int] NULL,
    [PositionType] [varchar](255) NULL, 
    [DepartmentId] [numeric](19, 0) NULL
    ) 
```

CP 是 Title 表中 Title_Names 的计数：

```
[Title](
    [id] [numeric](19, 0) IDENTITY(1,1) NOT NULL,   
    [Title_Name] [varchar](50) NOT NULL,    
    [Department_Id] [numeric](19, 0) NULL,  
    [Position_Type] [varchar](255) NULL,
    ) 
```

总之，我试图得到这两个查询的结果：

```
SELECT   DepartmentId, PositionType, NumOfAvailablePositions  
FROM Positions 

SELECT Department_Id, Position_Type, Count (Position_Type) as CurrentPositions
FROM Title group by Department_Id, Position_Type 
```

并将结果连接到一个表中（如上所述）。

我尝试使用以下脚本加入表格：

```
SELECT Department_Id, PositionType, Count(Position_Type) as PositionCountTitle, Positions.DepartmentId, Positions.NumOfAvailablePositions  
FROM Title, Positions 
GROUP BY Position_Type, Department_Id, Positions.DepartmentId, Positions.NumOfAvailablePositions 
HAVING Title.Department_Id = Positions.DepartmentId 
```

但它产生了错误的结果。你有什么建议可以在 Jasper IReports 中解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:42:57.683

尝试`FROM Title, Positions`用

```
FROM Title INNER JOIN Positions ON Title.[Position_Type]=Positions.[Position_Type] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:50:53.063

可能有一种方法可以在不使用子查询的情况下做到这一点，但我发现这通常是了解查询的良好第一步。

```
SELECT title.Department_Id,
       (SELECT NumOfAvailablePositions FROM POSITIONS WHERE Department_Id = position.Department_Id AND PositionType = 'Expert') as expert_ap,
       (SELECT COUNT(*) FROM Title WHERE Department_Id = title.Department_Id AND PositionType = 'Expert') as expert_cp,
       (SELECT NumOfAvailablePositions FROM POSITIONS WHERE Department_Id = position.Department_Id AND PositionType = 'Adminis. Staff') as admin_ap,
       (SELECT COUNT(*) FROM Title WHERE Department_Id = title.Department_Id AND PositionType = 'Adminis. Staff') as admin_cp,
       (SELECT NumOfAvailablePositions FROM POSITIONS WHERE Department_Id = position.Department_Id AND PositionType IS NULL) as rest_ap,
       (SELECT COUNT(*) FROM Title WHERE Department_Id = title.Department_Id AND PositionType IS NULL) as rest_cp,
FROM Title title, Positions position
WHERE Title.Department_Id = Positions.DepartmentId 
```

但是，此查询存在一个固有问题，如果 Positions 表有 Title 表没有的部门，则永远不会在查询中返回。如果您的情况不是这种情况，那么这不是问题。

# html - HTML5：将 video.buffered.end(0) 与 video.duration 进行比较

> ID：11313225
> 
> 赞同：1
> 
> 时间：2012-07-03T14:34:32.403
> 
> 标签：html, html5-video, setinterval

我正在尝试在使用 jQuery 淡入播放器之前比较视频是否已完全下载。为此，我使用了一个使用 setInterval() 函数的循环并比较视频属性“buffered.end(0)”和“持续时间”，但是两者的长度不同 - 因为第一个包含更多小数位（通过3）比第二个：

```
25.946847656 > 25.946847 
```

在显示播放器之前，有什么方法可以检查视频是否已完全下载？

这是我目前所拥有的：

```
var playerObject = {
    init : function(obj) {
        "use strict";
        if (obj.length > 0) {
            if (obj.length > 1) {
                jQuery.each(obj, function() {
                    playerObject.start($(this));    
                });
            } else {
                playerObject.start(obj);
            }
        }       
    },
    start : function(obj) {
        "use strict";
        var thisTime = window.setInterval(function() {
            if (obj[0].buffered.end(0) === obj[0].duration) {
                window.clearInterval(thisTime);
                obj.fadeIn(200);   
                playerObject.create(obj);               
            }
        }, 1000);
    },
    create : function(obj) {
        "use strict";   
        obj.live('click', function() {
            var thisVideo = $(this)[0];
            if (thisVideo.paused === false) {
                thisVideo.pause();
            } else {
                thisVideo.play();               
            }           
        }); 
        playerObject.endVideo(obj); 
    },
    endVideo : function(obj) {
        "use strict";
        var thisTime = window.setInterval(function() {
            if (obj[0].ended == true) {
                  window.clearInterval(thisTime);
                  obj.fadeOut(200);
            }
        }, 1000);
    }
};
$(function() {
    "use strict";
    playerObject.init($('.player'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:05:45.883

HTML 5 规范中似乎没有任何内容会在下载/缓冲完成后触发，但是一旦浏览器确定已下载**足够**的媒体以便可以播放到最后，就会触发[一个`canplaythrough`事件](http://dev.w3.org/html5/spec/media-elements.html#mediaevents)无需停止和缓冲更多媒体。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:39:22.663

我现在修改了**start()**方法，简单地将两者相除，将结果四舍五入并与 1 进行比较，这表明它们都是相同的：

```
start : function(obj) {
    "use strict";
    var thisTime = window.setInterval(function() {
          if (Math.round(obj[0].buffered.end(0) / obj[0].duration) === 1) {
                window.clearInterval(thisTime);
                obj.fadeIn(200);   
                playerObject.create(obj);               
          }
     }, 1000);
} 
```**

# sql-server - SQL Server 2008 - 使用表连接进行关键字搜索

> ID：11313226
> 
> 赞同：0
> 
> 时间：2012-07-03T14:34:32.370
> 
> 标签：sql-server, sql-server-2008, stored-procedures, join

好的，我创建了一个存储过程，除其他外，它正在为特定关键字搜索 5 列。为此，我将关键字参数由函数拆分并作为表返回。然后我使用 LIKE 约束对该表进行左连接。

所以，我让这个工作得很好，然后突然停止工作。现在它返回每一行，而不仅仅是它需要的行。

另一个警告是，如果关键字参数为空，则应忽略它。

鉴于以下内容，是否存在 A) 明显错误，或 B) 解决此问题的更有效方法？

这是我目前拥有的：

```
ALTER PROCEDURE [dbo].[usp_getOppsPaged] 
@startRowIndex int,
@maximumRows int,
@city varchar(100) = NULL,
@state char(2) = NULL,
@zip varchar(10) = NULL,
@classification varchar(15) = NULL,
@startDateMin date = NULL,
@startDateMax date = NULL,
@endDateMin date = NULL,
@endDateMax date = NULL,
@keywords varchar(400) = NULL
AS
BEGIN
SET NOCOUNT ON;

;WITH Results_CTE AS
(
    SELECT opportunities.*,
    organizations.*,
    departments.dept_name,
    departments.dept_address,
    departments.dept_building_name,
    departments.dept_suite_num,
    departments.dept_city,
    departments.dept_state,
    departments.dept_zip,
    departments.dept_international_address,
    departments.dept_phone,
    departments.dept_website,
    departments.dept_gen_list,
    ROW_NUMBER() OVER (ORDER BY opp_id) AS RowNum
    FROM opportunities 
    JOIN departments ON opportunities.dept_id = departments.dept_id 
    JOIN organizations ON departments.org_id=organizations.org_id
    LEFT JOIN Split(',',@keywords) AS kw ON 
        (title LIKE '%'+kw.s+'%' OR
        [description] LIKE '%'+kw.s+'%' OR
        tasks LIKE '%'+kw.s+'%' OR
        requirements LIKE '%'+kw.s+'%' OR
        comments LIKE '%'+kw.s+'%')
    WHERE 
    (
        (@city IS NOT NULL AND (city LIKE '%'+@city+'%' OR dept_city LIKE '%'+@city+'%' OR org_city LIKE '%'+@city+'%'))
        OR
        (@state IS NOT NULL AND ([state] = @state OR dept_state = @state OR org_state = @state))
        OR
        (@zip IS NOT NULL AND (zip = @zip OR dept_zip = @zip OR org_zip = @zip))
        OR
        (@classification IS NOT NULL AND (classification LIKE '%'+@classification+'%'))
        OR
        ((@startDateMin IS NOT NULL AND @startDateMax IS NOT NULL) AND ([start_date] BETWEEN @startDateMin AND @startDateMax))
        OR
        ((@endDateMin IS NOT NULL AND @endDateMax IS NOT NULL) AND ([end_date] BETWEEN @endDateMin AND @endDateMax))

        OR
        (
            (@city IS NULL AND 
            @state IS NULL AND 
            @zip IS NULL AND 
            @classification IS NULL AND 
            @startDateMin IS NULL AND 
            @startDateMax IS NULL AND 
            @endDateMin IS NULL AND 
            @endDateMin IS NULL)
        )
    )
)

SELECT *
FROM Results_CTE
WHERE RowNum >= @startRowIndex
AND RowNum < @startRowIndex + @maximumRows;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:52:55.360

**查询**-

1.  你能告诉我们以前工作的版本吗？
2.  您是否使用任何源代码控制来跟踪所做的更改？

## 我的建议

就像看起来非常昂贵`Predicate`和`%%`缓慢的过程。您可以使用`Full Text Index`吗？

为`local variable`每个`Input Parameter`. 将相应的列名分配给该变量。在 City 的情况下，由于使用了三列，因此为 City 声明三个变量并分配相应的列名，如下所示...

```
Set @Local_city = 'city'
Set @Local_dept_city = 'dept_city' 
```

终于可以在`Where clause`. 这样做将排除以下代码行。

```
OR
 (
       (@city IS NULL AND 
       @state IS NULL AND 
       @zip IS NULL AND 
       @classification IS NULL AND 
       @startDateMin IS NULL AND 
       @startDateMax IS NULL AND 
       @endDateMin IS NULL AND 
       @endDateMin IS NULL) 
```

* * *

> 所以，我让这个工作得很好，然后突然停止工作。现在它返回每一行，而不仅仅是它需要的行。

您确定查询中使用的运算符吗？我的意思是到处都有`OR`运营商。

> 另一个警告是，如果关键字参数为空，则应忽略它。

请检查我的上述建议。

## 最终查询

```
ALTER PROCEDURE [dbo].[usp_getOppsPaged] 
@startRowIndex int,
@maximumRows int,
@city varchar(100) = NULL,
@state char(2) = NULL,
@zip varchar(10) = NULL,
@classification varchar(15) = NULL,
@startDateMin date = NULL,
@startDateMax date = NULL,
@endDateMin date = NULL,
@endDateMax date = NULL,
@keywords varchar(400) = NULL
AS
BEGIN
SET NOCOUNT ON;

Declare @Local_city varchar(100)
declare @Local_dept_city varchar(100)
declare @Local_org_city varchar(100)
Declare @Local_state char(2)
Declare @Local_dept_state char(2)
Declare @Local_org_state char(2)
Declare @Local_zip varchar(10)
Declare @Local_dept_zip varchar(10)
Declare @Local_org_zip varchar(10)
Declare @Local_classification varchar(15)
Declare @Local_startDateMin date
Declare @Local_startDateMax date
Declare @Local_endDateMin date
Declare @Local_endDateMin date
Declare @Local_endDateMax date

Set @Local_city = 'city'
Set @Local_dept_city = 'dept_city'
Set @Local_org_city = 'org_city'
Set @Local_state = 'state'
Set @Local_dept_state = 'dept_state'
Set @Local_org_state = 'org_state'
Set @Local_zip = 'zip'
Set @Local_dept_zip = 'dept_zip'
Set @Local_org_zip = 'org_zip'
Set @Local_classification = 'classification'
Set @Local_startDateMax = 'startDateMax'
Set @Local_endDateMin = 'endDateMin'
Set @Local_endDateMin = 'endDateMin'
Set @Local_endDateMax = 'endDateMax'

;WITH Results_CTE AS
(
    SELECT opportunities.*,
    organizations.*,
    departments.dept_name,
    departments.dept_address,
    departments.dept_building_name,
    departments.dept_suite_num,
    departments.dept_city,
    departments.dept_state,
    departments.dept_zip,
    departments.dept_international_address,
    departments.dept_phone,
    departments.dept_website,
    departments.dept_gen_list,
    ROW_NUMBER() OVER (ORDER BY opp_id) AS RowNum
    FROM opportunities 
    JOIN departments ON opportunities.dept_id = departments.dept_id 
    JOIN organizations ON departments.org_id=organizations.org_id
    LEFT JOIN Split(',',@keywords) AS kw ON 
        (title LIKE '%'+kw.s+'%' OR
        [description] LIKE '%'+kw.s+'%' OR
        tasks LIKE '%'+kw.s+'%' OR
        requirements LIKE '%'+kw.s+'%' OR
        comments LIKE '%'+kw.s+'%')
    WHERE 
    (
        (@city IS NOT NULL AND (city LIKE '%'+@Local_city+'%' OR dept_city LIKE '%'+@Local_dept_city+'%' OR org_city LIKE '%'+@Local_org_city+'%'))
        OR
        (@state IS NOT NULL AND ([state] = @Local_state OR dept_state = @Local_dept_state OR org_state = @Local_org_state))
        OR
        (@zip IS NOT NULL AND (zip = @Local_zip OR dept_zip = @Local_dept_zip OR org_zip = @Local_org_zip))
        OR
        (@classification IS NOT NULL AND (classification LIKE '%'+@Local_classification+'%'))
        OR
        ((@startDateMin IS NOT NULL AND @Local_startDateMax IS NOT NULL) AND ([start_date] BETWEEN @Local_startDateMax AND @Local_startDateMax))
        OR
        ((@endDateMin IS NOT NULL AND @Local_endDateMax IS NOT NULL) AND ([end_date] BETWEEN @Local_endDateMin AND @Local_endDateMax))
    )
)

SELECT *
FROM Results_CTE
WHERE RowNum >= @startRowIndex
AND RowNum < @startRowIndex + @maximumRows;
END 
```

# c# - 在单个 VS2010 项目中作为 Windows 服务、控制台应用程序或 Wpf 应用程序运行

> ID：11313227
> 
> 赞同：0
> 
> 时间：2012-07-03T14:34:33.523
> 
> 标签：c#, wpf, visual-studio-2010, windows-services

我目前有 3 个项目产生 2 个可执行文件

*   1.  类库做的工作
*   1.  使用库 #1 的 Windows 服务项目
*   1.  使用库 #1 的 WPF 应用程序

类库用于执行一些客户端-服务器交互。

我想要的是只有 2 个项目、类库和另一个生成可执行文件的项目，该可执行文件可以作为控制台、WPF 或 Windows 服务运行。这样做是否可能（或可取）？项目输出类型应该是什么？

主要原因是我们需要一些固定文件路径来运行自动化脚本。我想避免复制 WPF 可执行文件和服务/控制台可执行文件的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:18:29.313

我不确定是否能够执行 WPF，但 TopShelf 将允许您将可执行文件作为控制台应用程序或作为服务运行。

[http://topshelf-project.com/](http://topshelf-project.com/)

有两种方法可以将 TopShelf- [exe 用作服务](http://topshelf-project.com/documentation/getting-started/)或[使用搁置](http://topshelf-project.com/documentation/shelving/)。

要作为控制台应用程序运行，您只需运行 yourprogram.exe。要安装为服务，只需安装 yourprogram.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:26:24.280

我知道这个问题有点老了，但是......

您可以将一个新项目作为 WPF 项目启动，然后在解决方案资源管理器中右键单击它并将“Start As”更改为控制台应用程序。您的 WPF 应用程序仍将完全相同地运行，但会出现一个控制台窗口，您可以在其中使用诸如`Console.WriteLine()`调用之类的东西。

然后，您可以接受一个命令行参数，告诉您的应用程序抑制 UI 的其余部分，只留下控制台部分。不过，我认为这不会允许它作为服务运行。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-03T14:39:28.157

你必须去 Windows Communication Foundation aka WCF，点击链接学习基础知识

[http://msdn.microsoft.com/en-us/netframework/dd939784](http://msdn.microsoft.com/en-us/netframework/dd939784)

# java - 比较多维HashMap的键

> ID：11313228
> 
> 赞同：0
> 
> 时间：2012-07-03T14:34:34.290
> 
> 标签：java, hashmap, multidimensional-array

我正在开发一个包含许多自定义数据类的应用程序。我从 2 个不同的地方为我的应用程序输入输入，并希望在两者之间进行交叉引用以帮助确保数据准确。

我有一个`Map.Entry<String,HashMap<String, Integer>>`名为 的对象`chromosome`，其中每个值都称为`marker`.

我还有一个名为的自定义对象`IndividualList individuals`，它扩展`HashMap<Integer,Individual>`了每个对象`Individual`都有一个`Genotype getGenotype()`返回非静态变量的方法`genotype`。`Genotype`延伸`HashMap<String,String[]>`

我想查看`key`我的所有`marker`对象的每一个，并检查它们中的每一个是否都作为 key 存在于*任何* `Individual`'s`genotype`中。每个`Individual`都有相同的键，`genotype`所以我只需要测试一个`Individual`。

我面临的问题是`Individual`要测试哪个，因为它是一个`HashMap`我不能简单地随意选择第一个元素，所以我现在正在做的是将这些值`individuals`作为 a`Collection`然后将它们转换为`ArrayList<Individual>`然后取第一个元素这些元素（这只是一个无序的任意元素）`HashMap`得到一个`Individual`然后取 this`Individual`并`genotype`与. 像这样：`marker.getKey()``genotype`

```
for(Map.Entry<String, MarkerPosition> marker : chromosome.getValue().entrySet())
    if(!(new ArrayList<Individual>(individuals.values()).get(0)
                    .getGenotype().containsKey(marker.getKey())))
            errors.add("Marker " + marker.getKey() + " is not present in genotype"); 
```

但正如你所看到的，这是可怕的、丑陋的，而且太复杂了，所以我想知道是否有一种更简单的方法来实现我所缺少的我想要的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:44:26.077

...这个问题的措辞确实令人困惑且难以理解，但我不清楚您为什么不只是使用

```
 individuals.values().iterator().next() 
```

而不是`new ArrayList<Individual>(individuals.values()).get(0)`.

（如果您可以使用第三方库，那么如果您使用 Guava [`Table`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)，您的代码可能会整体上更加清晰，这是一个通用的、明显“更干净”的替代品`Map<K1, Map<K2, V>>`。披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:45:05.413

为什么不能随意选择一个HashMap的第一个元素？

```
individuals.entrySet().iterator().next()
individuals.values().iterator().next() 
```

这可能每次都是相同的条目。您应该确保地图不为空以避免异常。

# c# - 从主窗体传递布尔值

> ID：11313230
> 
> 赞同：-8
> 
> 时间：2012-07-03T14:34:44.560
> 
> 标签：c#, .net

> **可能重复：**
> [将变量从主表单传递到输入表单](https://stackoverflow.com/questions/1433182/passing-variables-from-main-form-to-input-form)
> [在表单之间传递数据](https://stackoverflow.com/questions/4587952/passing-data-between-forms)

我将如何从主窗体传递布尔函数的结果？基本上是检查用户是否有权编辑程序中的任何内容？我基本上想检查任何处理编辑的事件的布尔值。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:37:12.680

在 FormOptions 上创建一个属性（或方法），比如 GetMyResult：

```
 using (FormOptions formOptions = new FormOptions())
{
    formOptions.ShowDialog();

    string result = formOptions.GetMyResult;

    // do what ever with result...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:37:33.600

它可以通过多种方式完成，

1.  使用 bool 参数编写一个构造函数。通过该论点并做出决定。

2.  创建一个可以从调用方法访问的 bool 属性。

# android - Android 作物错误

> ID：11313231
> 
> 赞同：1
> 
> 时间：2012-07-03T14:34:47.363
> 
> 标签：android, crop

有时我有一个错误，当我试图只在三星 Galaxy s2 中使用相机进行裁剪时。我该如何解决？

```
07-03 17:25:13.643: E/AndroidRuntime(12485): FATAL EXCEPTION: main
07-03 17:25:13.643: E/AndroidRuntime(12485): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cooliris.media/com.cooliris.media.CropImage}: java.lang.NullPointerException
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.os.Looper.loop(Looper.java:137)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread.main(ActivityThread.java:4507)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at java.lang.reflect.Method.invokeNative(Native Method)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at java.lang.reflect.Method.invoke(Method.java:511)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at dalvik.system.NativeStart.main(Native Method)
07-03 17:25:13.643: E/AndroidRuntime(12485): Caused by: java.lang.NullPointerException
07-03 17:25:13.643: E/AndroidRuntime(12485):    at com.cooliris.media.CropImage.loadBitmap(CropImage.java:447)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at com.cooliris.media.CropImage.onCreate(CropImage.java:430)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.Activity.performCreate(Activity.java:4465)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
07-03 17:25:13.643: E/AndroidRuntime(12485):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
07-03 17:25:13.643: E/AndroidRuntime(12485):    ... 11 more
07-03 17:25:13.653: E/android.os.Debug(1973): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error 
```

# php - 如何让一个选择框控制另一个选择框

> ID：11313236
> 
> 赞同：0
> 
> 时间：2012-07-03T14:35:00.523
> 
> 标签：php, javascript, codeigniter

我找不到定义这个的好方法，所以我希望有人能提供帮助。

我有两个选择框（Division 和 Sub-Division）。当用户进来时，他们只看到 Division 选择框。当他们选择一个部门时，子部门选择框会出现在其下方，并且只显示该部门的项目。很像这样。

```
<select name="divisions">
<option value="1">Div1</option>
<option value="2">Div2</option>
</select>

<select name="subdivisions">
<option value="1" division="1">Sub1</option>
<option value="2" division="1">Sub2</option>
<option value="3" division="2">Sub3</option>
<option value="4" division="2">Sub3</option>
</select> 
```

因此，当我选择分区 1 时，我应该会看到第二个选择框弹出，并且仅在该选择框中显示 Sub1 和 Sub2 作为选项。当我选择分区 2 时，第二个选择框应该只显示 Sub3 和 Sub4。我想知道如何使用 PHP 和 javascript 轻松做到这一点。

我正在使用 codeigniter 对该页面进行编码，并且我已经将我的视图发送到 Divisions 和 SubDivisions 对象以及构建选择框所需的数据。我不知道是否必须将这些对象转换为 javascript，但如果可能的话，我想避免这种情况。听起来将我的对象转换为javascript数组然后填充选择框会变得太复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:44:29.680

所以你问如何做到这一点？抱歉，我在您的帖子中没有看到任何问题。如果您尝试在选择一个复选框时创建条件，则其他人可供使用您可以做一些事情。我最喜欢的是使用 jQuery。

```
$(document).ready(function(){

 $('#divthatholdssubboxes').hide()

 $('#checkbox').click(function(){
       $('#divthatholdssubboxes').slideToggle('slow');
    });

    }); 
```

我通常将所有复选框放在一个 div 中以保存所有内容。这是一个很酷的方法，因为它为您的站点提供了一些动态图形界面，但仍然允许您保持程序逻辑的完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:42:00.343

对于第一部分（显示/隐藏分区），您需要使用 javascript 来完成，我会使用 jQuery。

*   将 onChange 事件侦听器附加到选择框[http://api.jquery.com/change/](http://api.jquery.com/change/)
*   检查选择框的值[http://api.jquery.com/val/](http://api.jquery.com/val/)
*   使用 val（只读/禁用属性）或 css [http://api.jquery.com/css/启用/显示细分选择框](http://api.jquery.com/css/)

对于第二部分，使用 CI 表单助手设置值，您还需要一些逻辑来隐藏细分

*   [http://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html) (set_select)

# php - 如何调用activex

> ID：11313244
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:35:39.193
> 
> 标签：php, activex

我们如何调用active x control，这样浏览器会要求安装带有黄色条的active x。

我试图用 Active x 调用 DLL

但它给出了错误：

```
Message: Automation server can't create object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:40:59.843

这是浏览器特定的问题。在 IE 中转到`Tools > Internet Options > Security`，单击自定义级别。在安全设置窗口中，在“ `Activex controls and Plug-ins`> `Initialize and script Activex Control not marked as safe for scripting`”下设置为`Prompt`

# c# - .NET 上最快的 PNG 解码器

> ID：11313251
> 
> 赞同：27
> 
> 时间：2012-07-03T14:35:54.503
> 
> 标签：c#, performance, png, decode, decoding

在将结果发送到 Web 客户端之前，我们的 Web 服务器需要一起处理许多大图像的组合。此过程对性能至关重要，因为服务器每小时可以接收数千个请求。

现在，我们的解决方案从 HD 加载 PNG 文件（每个大约 1MB）并将它们发送到视频卡，以便在 GPU 上完成合成。我们首先尝试使用 XNA API 公开的 PNG 解码器加载我们的图像。我们看到性能不太好。

为了了解问题是从 HD 加载还是 PNG 的解码，我们通过将文件加载到内存流中进行修改，然后将该内存流发送到 .NET PNG 解码器。使用 XNA 或使用 System.Windows.Media.Imaging.PngBitmapDecoder 类的性能差异并不显着。我们大致获得了相同水平的性能。

我们的基准测试显示了以下性能结果：

*   从磁盘加载图像：37.76ms 1%
*   解码 PNG：2816.97ms 77%
*   在视频硬件上加载图像：196.67ms 5%
*   组成：87.80ms 2%
*   从视频硬件获取合成结果：166.21ms 5%
*   编码为 PNG：318.13ms 9%
*   存储到磁盘：3.96ms 0%
*   清理：53.00ms 1%

总计：3680.50ms 100%

从这些结果中，我们看到最慢的部分是在解码 PNG 时。

所以我们想知道是否没有我们可以使用的PNG解码器来减少PNG解码时间。我们也考虑过在硬盘上保留未压缩的图像，但是每个图像的大小将是 10MB 而不是 1MB，并且由于硬盘上存储了数万张这样的图像，因此无法将它们全部存储压缩。

编辑：更多有用的信息：

*   该基准模拟加载 20 张 PNG 图像并将它们合成在一起。这将大致对应于我们将在生产环境中获得的请求类型。
*   合成中使用的每张图像的大小为 1600x1600。
*   该解决方案将涉及多达 10 台负载平衡服务器，就像我们在这里讨论的那样。因此，额外的软件开发工作可能值得节省硬件成本。
*   缓存解码的源图像是我们正在考虑的事情，但是每个合成很可能使用完全不同的源图像完成，因此缓存未命中率很高，而性能增益很低。
*   基准测试是使用糟糕的显卡完成的，因此我们可以预期 PNG 解码使用像样的显卡会成为性能瓶颈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:57:41.750

还有另一种选择。也就是说，您编写自己的基于 GPU 的 PNG 解码器。您可以使用 OpenCL 相当有效地执行此操作（并使用可以与 OpenCL 共享资源的 OpenGL 执行您的合成）。也可以交错传输和解码以获得最大吞吐量。如果这是您可以/想要追求的路线，我可以提供更多信息。

以下是一些与基于 GPU 的 DEFLATE（和 INFLATE）相关的资源。

1.  [使用 GPU 加速无损压缩](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE4QFjAA&url=http://arxiv.org/pdf/1107.1525&ei=qhnzT7PEFIr10gGcq9XoCQ&usg=AFQjCNH_BlNNNTk8KTMw7TMfANof64ApBg)
2.  在 Google 代码上使用 CUDA 进行[gpu-block-compression 。](http://code.google.com/p/gpu-block-compression/)
3.  [在 GPU 上以 75 Gb/s 的速度进行浮点数据压缩](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CGQQFjAE&url=http://www.ece.neu.edu/groups/nucar/GPGPU4/files/oneil.pdf&ei=1BrzT6ukLsrh0QH2_OSLCg&usg=AFQjCNHTVkX4QukaurUugSDpkFVPRopCWw)- 请注意，这不使用 INFLATE/DEFLATE，而是一种对 GPU 更友好的新型并行压缩/解压缩方案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T14:51:18.103

您是否尝试过以下两件事。

1）
多线程，有几种方法可以做到这一点，但一种是“全能”方法。基本上完全生成 X 数量的线程，用于整个过程。

2）
也许考虑让 XX 线程完成所有 CPU 工作，然后将其提供给 GPU 线程。

您的问题非常适合作为新用户，但是有关 senario 的一些信息可能有用吗？我们是在实时讨论批处理作业还是服务图片？10k 图片有变化吗？

**硬件资源**
您还应该考虑您拥有哪些硬件资源。通常，最便宜的两件事是 CPU 功率和磁盘空间，因此，如果您只有 10k 张很少更改的图片，那么将它们全部转换为更快处理的格式可能是可行的方法。

**多线程琐事**
进行多线程时要考虑的另一件事是，使线程处于 BellowNormal 优先级通常很聪明。所以你不会让整个系统“滞后”。您必须对要使用的线程数量进行一些试验，如果运气好的话，您可以获得接近 100% 的速度 pr CORE 增益，但这在很大程度上取决于硬件和您运行的代码。

我通常使用[Environment.ProcessorCount](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx)来获取当前的 CPU 计数并从那里工作:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T23:15:15.900

我写了一个纯 C# PNG 编码器/解码器 ( [PngCs](http://code.google.com/p/pngcs/) )，你可能想看看。但我非常怀疑它会有更好的速度性能 [*]，它没有经过高度优化，而是试图最大限度地减少处理巨大图像的内存使用量（它逐行按顺序编码/解码）。但也许它可以作为样板来插入一些更好的压缩/解压缩实现。正如我所看到的，速度瓶颈是 zlib（inflater/deflater），它（与 Java 相反）不是在 C# 中本地实现的——我使用了 SharpZipLib 库，带有纯 C# 托管代码；这不是很有效。

但是，我有点惊讶，在您的测试中，解码比编码慢得多。这对我来说似乎很奇怪，因为在大多数压缩算法中（也许是全部；当然在 zlib 中）编码比解码更需要计算机密集。您确定吗？（例如，这个读写 5000x5000 RGB8 图像的速度测试（不是很可压缩，磁盘上大约 20MB）给了我大约 4.5 秒的写入时间和 1.5 秒的读取时间）[。](http://code.google.com/p/pngcs/source/browse/TestSpeed/TestSpeed.cs)除了纯PNG解码之外，也许还有其他因素？

[*] 更新：具有多项优化的新版本（从 1.1.14 开始）；如果您可以使用.Net 4.5，特别是它应该提供更好的解码速度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T15:44:51.547

您有多种选择

*   提高解码过程的性能

    您可以实现另一个更快的 png 解码器（libpng 是一个可能更快的标准库）您可以切换到使用更简单/更快的可解码压缩的另一种图片格式

*   并行化

    使用 .NET 并行处理功能进行并发解码。解码可能是单线程的，因此如果您在多核机器上运行，这可能会有所帮助

*   将未压缩的文件存储在可压缩的设备上

    例如压缩文件夹甚至是沙力 ssd。这仍然会压缩，但会有所不同，并且会因解压缩而加重其他软件的负担。我不确定这是否真的会有所帮助，并且只会将其作为最后的手段。

# python - 在 Python 中将可变长度字符串拆分为变量的最佳方法是什么？

> ID：11313256
> 
> 赞同：3
> 
> 时间：2012-07-03T14:36:10.107
> 
> 标签：python

假设我有一串由可变长度的逗号分隔的整数。拆分字符串并将整数存储到变量中的最佳方法是什么？

目前，我有以下内容。

```
input = sys.argv[1]
mylist = [int(x) for x in input.split(',')]
if len(mylist) == 2: a, b = mylist
else: a, b, c = mylist 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T14:38:00.520

添加哨兵，然后将列表限制为 3 个元素：

```
a, b, c = (mylist + [None] * 3)[:3] 
```

现在 a、b 和 c 至少设置为 None，如果项目数超过三个，则仅使用前三个值。

演示：

```
>>> mylist = [1, 2]
>>> a, b, c = (mylist + [None] * 3)[:3]
>>> print a, b, c
1 2 None
>>> mylist = [1, 2, 3, 4]
>>> a, b, c = (mylist + [None] * 3)[:3]
>>> print a, b, c
1 2 3 
```

如果您需要至少 2 个元素，请使用更少的 None 值并捕获 ValueError：

```
try:
    a, b, c = (mylist + [None])[:3]
except ValueError:
    print "You mast specify at least 2 values"
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:55:23.637

只是Martjin的一个附录。把它变成一个函数来展示你为什么会使用它。您可以使用动态哨兵

```
def store(mylist,expsiz = 10, dflt = None):
    return mylist + [dflt]*(expsiz-len(mylist))

>>> mylist = [1,2,5]
>>> fixedlen = store(mylist)
>>> print fixedlen
[1,2,5,None,None,None,None,None,None,None] 
```

# android - Android 的免费 G UI 主题文件？

> ID：11313257
> 
> 赞同：0
> 
> 时间：2012-07-03T14:36:12.367
> 
> 标签：android, themes, look-and-feel

我想为我的 Android 应用程序使用一个外观一致、简约的主题，在 Android 2.2 及更高版本上看起来相同。我很想使用 Halo，但并非在所有设备上都可用。我不确定 Google 希望开发人员在这里做什么，因为早期 Android 版本的默认 GUI 主题非常糟糕。

我见过一些项目试图让你在早期的设备上使用 Halo，但你需要将一个 8mb 的 jar 复制到你的项目中，这并不理想。

有没有我可以免费下载和使用的现有主题？

我很惊讶我找不到任何提供此功能的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:46:54.300

在这里向下滚动一点：

[http://speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/](http://speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/)

有一堆 GUI 工具包。

# android - Android 中第三方推送代码放在哪里？

> ID：11313262
> 
> 赞同：0
> 
> 时间：2012-07-03T14:36:26.393
> 
> 标签：android, service, coding-style, pusher

我必须为 Android 使用“Pusher”库。我想在整个手机使用期间接收推送通知，而不仅仅是在应用程序使用期间。由于它是第三方库，我想知道将它的回调放在哪里。

它应该长期运行`Service`，还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:18:15.047

将 Service 与[startForeground](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)一起使用。应用用户可能会讨厌你。

# javascript - 覆盖的最佳方式

> ID：11313263
> 
> 赞同：2
> 
> 时间：2012-07-03T14:36:28.187
> 
> 标签：javascript, jquery, html, css

有没有办法选择随机的十六进制选择器，但只适用于某些颜色？

我正在尝试重新创建以下图像，但实际上是对其进行编码。

[图片](http://donl.de/Oivc8n)

到目前为止，我已经管理了以下代码。

**HTML**

```
<div id="group">
<div class="sub red panel">

</div><!--sub-->
<div class="sub orange">

</div><!--sub-->
<div class="sub yellow">

</div><!--sub--> 
```

**CSS**

```
body{
    background:#333;
}
#group{
    position:relative;
    float:left;
    width:500px;
   height:300px;
}
.sub{position:relative; float:left; width:96px;}

.pxl{width:7px; position:relative;float:left; height:7px; margin:1px 1px 0 0;}
.red div{background:#f00;}
.orange div{background:#f26607;}
.yellow div{background:#f5e70b;} 
```

**js**

```
var pageLimit=288;

 for(var i = 1; i <= pageLimit; i++) {
  $('.sub').append('<div class="pxl"></div>' )
 }

var randint = function ( ceiling ) {
    return Math.floor( Math.random() * ceiling );
};

setTimeout(function () {
    $( '.pxl' ).each(function () {
        $( this ).delay( randint(5000) ).fadeTo( randint(10000), 0 );
    });
}, 5000 ); 
```

非常感谢任何帮助 [jsFiddle](http://jsfiddle.net/mynameisdonald/GHsBn/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:52:31.110

你可以尝试这样的事情：

**活生生的例子**

[http://jsfiddle.net/GHsBn/8/](http://jsfiddle.net/GHsBn/8/)

**片段示例**

```
var col;
    $('.red .pxl').each(function(i, e) {
            col = 'rgb(255,' + (Math.floor(Math.random() * 150)) + ',' + (Math.floor(Math.random() * 150)) + ')';
            $(e).css('background', col);
        }); 
```

它循环遍历红色类中的每个像素，并构建随机背景颜色。

您可以使用随机值和范围来获得所需的结果。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:40:17.327

您可以使用它并删除数组中的一些字符串，以便它只返回您想要的颜色：http: [//paulirish.com/2009/random-hex-color-code-snippets/](http://paulirish.com/2009/random-hex-color-code-snippets/)

# java - Java的Pexpect等价物？

> ID：11313267
> 
> 赞同：1
> 
> 时间：2012-07-03T14:36:54.897
> 
> 标签：java, python, pexpect

java有没有pexpect等价物？我知道我可以通过使用 commons exec 或 processbuilder 并重定向 stdin/stdout 然后解析流等来复制功能但是，我的问题是，是否有一个即插即用的等价物？

我想要像在 python 中那样运行交互式命令行程序。一个小例子是：

```
def start_binary(input):
   shell_cmd = 'grep '+input+' file4.dat >> file3.dat'
   grep = pexpect.spawn('/bin/bash', ['-c', shell_cmd])
   grep.expect(pexpect.EOF)
   shell_cmd = './myProg -c'
   myProg = pexpect.spawn('/bin/bash', ['-c', shell_cmd])
   myProg.expect('Next DATA file')
   file_list = ['file1.dat', 'file2.dat', 'file3.dat']
   for this_file in file_list:
      myProg.sendline(this_file)
   myProg.sendline()
   return myProg 
```

然后我以交互方式使用 myProg（发送命令、获取/解析结果等）。我可以通过 myProg.before 等获得两次调用之间的结果。

是否有一个包可以在 java 中以相同的简单方式提供相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:24:00.370

一个简单的 Google 搜索“java expect”发现[expect4j](http://code.google.com/p/expect4j/)是列表中的第一项，ExpectJ 是列出的第二项。

# c# - ASP.NET MVC3 。查看页面。由于无法隐式转换类型列表而出现错误 去学校; 请帮忙

> ID：11313269
> 
> 赞同：0
> 
> 时间：2012-07-03T14:37:03.357
> 
> 标签：c#, html, asp.net-mvc-3, list

我在查看页面上收到错误消息：

无法将类型“System.Collections.Generic.List”隐式转换为“SchoolAdministrator.SchoolAdminProductionServices.SchoolTypeRef”

我想知道我是怎么得到这些错误的。我相信我做的一切都是正确的

控制器

```
 [SchoolAuthorizeAttribute(AdminRoles = "ViewSchoolTypeRef")]
    public ActionResult ViewSchoolType()
    {
        try
        {
            Guid SchoolTypeRefId = Request["SchoolTypeRefId"] != null ? new Guid(Request["SchoolTypeRefId"]) : Guid.Empty;
            ViewBag.merchantTypeRef = SchoolAdministrator.Models.SchoolAdminProduction.SchoolTypeRef.LoadSchoolTypeRef(SchoolTypeRefId, string.Empty, string.Empty, string.Empty);
        }
        catch (Exception e)
        {
            Commons.ErrorHandling.ReportError("SchoolAdministrator.Controllers.SchoolController ViewSchoolType",e);
        }
        return View();
    } 
```

模型

```
 public class SchoolTypeRef
{
    /// <summary>
    /// This function allows us to load the School types if parametrs are empty, else load a single user by their ID 
    /// </summary>
    /// <param name="SchoolTypeRef">The merchant type ref id, unique ID</param>
    /// <param name="name">name of the School type</param>
    /// <param name="description">description of the School type</param>
    /// <returns>List of all users or list of a single user</returns>
      public static List<SchoolAdminProductionServices.SchoolTypeRef> LoadSchoolTypeRef(Guid SchoolTypeRef, string name, string description, string fdrSchoolTypeCode)
    {
        try
        {
            SchoolAdminProductionServices.SchoolAdminProductionServicesSoapClient client = new SchoolAdminProductionServices.SchoolAdminProductionServicesSoapClient();
            return client.LoadSchoolTypeRef(SchoolTypeRef, name, description, fdrSchoolTypeCode).ToList<SchoolAdminProductionServices.SchoolTypeRef>();
        }
        catch (Exception e)
        { 
            Commons.ErrorHandling.ReportError("SchoolTypeRef.LoadSchoolTypeRef()",e);
        }
        return new List<SchoolAdminProductionServices.SchoolTypeRef>();
    }
   } 
```

查看这是 <% %> 之间发生错误的地方

```
 <%SchoolAdministrator.DarkstarAdminProductionServices.SchoolTypeRefmerchantTypeRef =
          ViewBag.SchoolTypeRef ??
            new SchoolAdministrator.SchoolAdminProductionServices.SchoolTypeRef();%>
<table>
 <tr>
       <td colspan="2" class="tableHeader"> School Type Ref Details</td>
   </tr> 
   tr>
       td class="label"> Name:</td>
       td class="content"><%=SchoolTypeRef.name%></td>
   /tr>
    tr>
       td class="label"> Description:</td>
       td class="content"><%=SchoolTypeRef.description%></td>
   /tr>
    tr>
       td class="label"> FDR SchoolType Code:</td>
       td class="content"><%=SchoolTypeRef.fdrSchoolTypeCode%></td>
  /tr>
/table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:42:15.657

您的 Web 服务调用返回一个 SchoolRefTypes 的 List<>，但您的视图试图访问该列表，就好像它是 schoolRefTypes 的单个实例一样。与其将 schoolRefTypes 列表分配给 viewbag，不如只分配一个。一个快速的方法是使用 .First() 方法来获取列表中的第一个元素。我想虽然你想以某种方式将它限制为基于 ID 的 MVC 约定的特定 schoolRefType 或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:43:29.177

List 是一个通用列表。学校是您的自定义对象。asp.net 根本无法从您的类型转换为您的类型的通用列表。您应该尝试检查列表是否不为空，然后访问元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:44:08.810

改变

```
<%SchoolAdministrator.DarkstarAdminProductionServices.SchoolTypeRefmerchantTypeRef =     ViewBag.SchoolTypeRef ?? new     SchoolAdministrator.SchoolAdminProductionServices.SchoolTypeRef();%> 
```

到

```
<%SchoolAdministrator.DarkstarAdminProductionServices.SchoolTypeRefmerchantTypeRef SchoolTypeRef =     ViewBag.SchoolTypeRef ?? new     SchoolAdministrator.SchoolAdminProductionServices.SchoolTypeRef();%> 
```

# opencart - opencart 愿望清单访问

> ID：11313270
> 
> 赞同：0
> 
> 时间：2012-07-03T14:37:08.330
> 
> 标签：opencart

我试图弄清楚管理人员如何访问每个客户的愿望清单项目，也许在销售/客户/区域添加一个选项卡，其中一般、交易、奖励积分将用于愿望清单。真的很方便，因为我们与几个拥有“秘密礼物”的组织合作，这些组织总是想送出想要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:34:19.017

这不是 OC 的当前功能，我还没有看到任何功能，但您在正确的轨道上找到了一个理想的位置

# java - 从超类静态主创建子类

> ID：11313271
> 
> 赞同：3
> 
> 时间：2012-07-03T14:37:11.697
> 
> 标签：java, methods, static, instantiation, derived-class

我有一个通用的抽象类（`SuperClass`）。我想有一个`main`方法，这将是每个子类的默认 main 并且会做同样的事情，但是使用派生和调用它的正确子类对象。

像这样：

```
 public abstract class SuperClass {

    // some code here...

    public static void main(String args[]) {
       // here instantiate the subclass
       // extending this SuperClass, and call
       // some methods
    }
 }

 public SubClass extends SuperClass {
      // here just implement some 
      // abstract methods from SupeClass
      // and NOT implement main()
 } 
```

现在我希望能够`SubClass`作为独立程序运行，该程序执行`main`从`SuperClass`. 如何`SubClass`在方法中实例化正确的对象`main`？

*   我不能只做新的，因为`SuperClass`我不知道一个的实际名称`SubClass`
*   我不能使用反射来做到这一点，因为我无法从（[从超类中获取子类的名称）中](https://stackoverflow.com/questions/3417879/getting-the-name-of-a-sub-class-from-within-a-super-class)实现`SubClass`的静态方法中获取名称`SuperClass`

在 C++ 中，AFAIR 中有类似`virtual`方法的修饰符，我想这在这里很有用。在Java中怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T14:39:27.430

静态方法不会被继承，如果您希望您的子类成为您的应用程序入口点，请在子类中编写 main 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:51:18.563

例如，您可以使用[Spring IOC](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)。

创建一个如下所示的 xml 文件并放入您的类路径：

`appconfig.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <bean id="someBean" class="com.company.SubClass"/>

</beans> 
```

然后在您的主代码中，您可以执行以下操作：

```
 public static void main(String args[]) {
       ApplicationContext context = ClassPathXmlApplicationContext("appconfig.xml");
       SuperClass startClass = (SuperClass) context.getBean("someBean");
       startClass.someMethod();
   } 
```

然后你的 SuperClass 将不知道它的子类（但会知道 Spring ......）。

您还必须将一些 Spring jar 文件添加到您的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:52:40.950

您不能在子类中继承静态方法，但如果您想在 c++ 中创建类似虚拟的方法，请将您的方法设为抽象或受保护

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:05:01.970

如果*我希望能够将 SubClass 作为独立程序运行，*您的意思是您希望能够运行类似的东西`java my.app.SubClass`，那是行不通的，因为正如每个人已经指出的那样，静态方法不会被继承。

根据您想要这种奇怪的子类嵌套的原因，您可以通过实现这样的非静态 main 找到解决方法：

```
public class SuperClass{ 
  public static void main(String[] args) {
     SuperClass c = //figure out which class to load via a factor or something
     c.nonStaticMain(args);
  }
  protected void nonStaticMain(String[] args) {
    //do everything from your old main() here
  }
} 
```

# reporting-services - SSRS 报告不向某些最终用户显示订阅选项

> ID：11313273
> 
> 赞同：0
> 
> 时间：2012-07-03T14:37:19.413
> 
> 标签：reporting-services, report, subscription

我们最近从 2007 年升级到 Sharepoint 2010，并且一些 SSRS 报告未在某些用户的“操作”选项卡下显示订阅选项。

请告知可能是什么问题？

谢谢，诺曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T19:07:08.033

用户需要“贡献”权限，请参见：http: [//blogs.msdn.com/b/psssql/archive/2012/08/16/sharepoint-adventures-accessdeniedexception-when-a-user-tries-to-add-订阅.aspx](http://blogs.msdn.com/b/psssql/archive/2012/08/16/sharepoint-adventures-accessdeniedexception-when-a-user-tries-to-add-subscription.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:39:50.540

这可能是权限问题。用户（或他们所在的组）需要具有创建警报权限。升级时是否可能对组进行了更改？

# jasper-reports - 列标题拆分和合并

> ID：11313279
> 
> 赞同：2
> 
> 时间：2012-07-03T14:37:36.813
> 
> 标签：jasper-reports, ireport

我正在使用 iReport 和 Jasper Reports 4.5.0 构建报告。一切正常，除了我有一个要求，在一些我还无法解决的表格的格式中。有些列需要有标题（将两列或更多列分组）和副标题（每个列），我不知道如何实现这一点。

这是所需的最终“样式”的示例：

```
| POSITION |column 2|column 3|
| x  |  Y  |        |        |
------------------------------
| 10 | 20 |value|value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:02:12.903

我觉得你想多了。如果您没有对数据使用分组，根据您的示例，您似乎没有这样做，那么这是非常基本的。

列标题不过是静态文本字段。您可以将它们添加到列标题带中的任何位置。这是一个 JRXML 的示例，因此您可以明白我的意思。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b478862e-b118-4290-8664-eae9b2966b31">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="GROUP_BY" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <field name="x" class="java.lang.String"/>
    <field name="y" class="java.lang.String"/>
    <field name="column1" class="java.lang.String"/>
    <field name="column2" class="java.lang.String"/>
    <columnHeader>
        <band height="40" splitType="Stretch">
            <staticText>
                <reportElement uuid="039d11f3-52eb-4717-9c83-34cbdcb81d6a" x="0" y="20" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[x]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="f0d66af8-19c2-4d50-9d1a-37b1162a75a8" x="100" y="20" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[y]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="44e3960a-31f3-444c-ad32-061af30cf82c" x="200" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[column1]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="6d468249-5242-4cf6-a4db-7995bdea15ba" x="300" y="1" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[column2]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="461dc8bb-a938-42ed-86c5-006732fbba4f" x="0" y="0" width="200" height="20"/>
                <textElement/>
                <text><![CDATA[Position]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="23" splitType="Stretch">
            <textField>
                <reportElement uuid="e2aff92b-0f47-4f78-9f49-c861c04533be" x="0" y="3" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{x}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="6091fb48-0bb6-422e-8520-b6e2d6e5cce1" x="100" y="3" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{y}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="8b32925f-256c-4026-a3f1-8e435a12ccd0" x="200" y="3" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{column1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="8b9d0540-da1a-41bf-b7e8-5f2cf9141fb6" x="300" y="3" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{column2}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-06T18:42:36.373

我能够通过以下过程获得带有多页报告的多行列标题：

[![JasperReports_TwoLineTableHeader](../Images/9d83d85254043c51decb36ab15e6d8fa.png)](https://i.stack.imgur.com/eICaP.jpg)

1.  将表格的列标题高度设置为 40px
2.  第 1 列和第 2 列有一个单行标题，因此它们的文本框高度 = 40px
    *   下面的代码包含第 1 列“收集系统”的 xml，但为便于阅读，第 2 列省略了）
3.  I 将列 3-5 分组
    *   列组宽度=“240”
    *   列标题高度=“40”
    *   textbox1 "分配生产": x="0" y="0" width="240" height="20"
    *   textbox2 "气体 MCF": x="0" y="20" width="80" height="20"
    *   textbox3 "油": x="80" y="20" width="80" height="20"
    *   textbox3 "水": x="160" y="20" width="80" height="20"

第 1 列

```
<jr:column width="200" uuid="5255e943-4959-49c4-9f83-0c6567d56684">
    <jr:groupFooter groupName="GatheringGroup_dsSixMonths">
        <jr:cell style="Alternate_Row" height="20" rowSpan="1">
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
            <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
            <property name="com.jaspersoft.studio.unit.width" value="px"/>
            <textField isStretchWithOverflow="true" pattern="#,##0.00">
                <reportElement x="0" y="0" width="200" height="20" uuid="78a4370a-8d3e-4bae-9a58-47b5b947189c"/>
                <textFieldExpression><![CDATA[$F{GatheringSystem.GatheringSystemName}]]></textFieldExpression>
            </textField>
        </jr:cell>
    </jr:groupFooter>                   
    <jr:columnHeader height="40" rowSpan="1">
        <property name="com.jaspersoft.studio.unit.height" value="px"/>
        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
        <property name="com.jaspersoft.studio.unit.width" value="px"/>
        <staticText>
            <reportElement style="Crosstab_Header" x="0" y="0" width="200" height="40" uuid="9b4976a1-5deb-4edf-a4a7-39bd4375663d">
                <property name="com.jaspersoft.studio.unit.width" value="pixel"/>
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
            </reportElement>
            <text><![CDATA[Gathering System]]></text>
        </staticText>
    </jr:columnHeader>
    <jr:detailCell height="0">
        <property name="com.jaspersoft.studio.unit.height" value="px"/>
        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
    </jr:detailCell>
</jr:column> 
```

第 3-5 列 - 列组有宽度 =“240”像素

```
<jr:columnGroup width="240" uuid="dc55dcaa-91d3-4450-9300-3aaea94c789a">
            <property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [3]"/>
            <property name="com.jaspersoft.studio.unit.height" value="pixel"/>

            <jr:columnHeader style="Table 1_CH" height="40">
                <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
                <property name="com.jaspersoft.studio.unit.height" value="px"/> 
```

第一个文本框“Allocated Production”的高度=“20”像素，宽度=“240”

```
 <staticText>
                    <reportElement style="Crosstab_Header" x="0" y="0" width="240" height="20" uuid="1308d33c-05c3-4a0b-8fb3-6247693a95b6">
                        <property name="com.jaspersoft.studio.unit.height" value="px"/>
                        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
                        <property name="com.jaspersoft.studio.unit.y" value="pixel"/>
                        <property name="com.jaspersoft.studio.unit.width" value="pixel"/>
                    </reportElement>
                    <text><![CDATA[Allocated Production]]></text>
                </staticText> 
```

第二个文本框“Gas MCF”有 height="20"px, width="80", 位于 x=0, y=20

```
 <staticText>
                    <reportElement style="Crosstab_Header" x="0" y="20" width="80" height="20" uuid="3b3cacbb-232c-4a5c-afd7-e069213d6eac">
                        <property name="com.jaspersoft.studio.unit.height" value="px"/>
                        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
                        <property name="com.jaspersoft.studio.unit.y" value="pixel"/>
                        <property name="com.jaspersoft.studio.unit.width" value="pixel"/>
                    </reportElement>
                    <text><![CDATA[Gas MCF]]></text>
                </staticText> 
```

第三个文本框“Oil”位于 x=80, y=20

```
 <staticText>
                    <reportElement style="Crosstab_Header" x="80" y="20" width="80" height="20" uuid="6fd8d11e-b10c-4530-aaa7-2b2066ddc1de">
                        <property name="com.jaspersoft.studio.unit.height" value="px"/>
                        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
                        <property name="com.jaspersoft.studio.unit.y" value="pixel"/>
                    </reportElement>
                    <text><![CDATA[Oil]]></text>
                </staticText> 
```

最后一个文本框“水”位于 x=160, y=20

```
 <staticText>
                    <reportElement style="Crosstab_Header" x="160" y="20" width="80" height="20" uuid="4402b753-1d83-4e19-9467-47c6d5d7b173">
                        <property name="com.jaspersoft.studio.unit.height" value="px"/>
                        <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.FreeLayout"/>
                    </reportElement>
                    <text><![CDATA[Water]]></text>
                </staticText>
            </jr:columnHeader> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T15:15:57.753

我遇到了同样的麻烦，但使用的是[表格组件](https://www.jaspersoft.com/blog-entry/jasperreports-interactivity-the-table-component)，如果没有任何行，则需要第一列不显示（使用列标题方法没有按我的意愿工作）

所以我解决了这个问题，使用`columnGroup`包装我需要的所有列（在你的例子中，位置列）设置为 0 我不想显示的行的高度（在下面的示例 JRXML 部分中，你会在,和)`columnGroup`的标签`tableFooter``columnHeader``columnFooter`

下面的示例是一个表格组件，它会产生类似这样的结果

```
+-------------------+
|     POSITION      |                       
+-------------------+---------------+---------------+
|    x    |    y    |    Column1    |    Column2    |
+---------+---------+---------------+---------------+
|  $F{x}  |  $F{Y}  |  $F{column1}  |  $F{column2}  |
+-------------------+---------------+---------------+ 
```

JRXML 代码：

```
<componentElement>
<reportElement x="0" y="0" width="555" height="100" uuid="b3ffd7ef-3e0f-48be-8405-545f6c9cd313"/>
<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
    <datasetRun subDataset="YOURTABLEDATASET" uuid="5f5f5dc3-96fa-40a7-b9ce-0741bf321af6">
        <connectionExpression>YOURCONNECTIONORDATASOURCE</connectionExpression>
    </datasetRun>
    <jr:columnGroup width="340" uuid="10695d6d-0223-4bf7-93e0-82d8ff720988">
        <property name="local_mesure_unitheight" value="pixel"/>
        <jr:tableHeader height="40">
            <staticText>
                <reportElement x="0" y="0" width="340" height="40" uuid="708fab06-2d51-4e70-b17a-4c3b30ebf188"/>
                <textElement verticalAlignment="Bottom"/>
                <text><![CDATA[POSITION]]></text>
            </staticText>
        </jr:tableHeader>
        <jr:tableFooter height="0"/>
        <jr:columnHeader height="0"/>
        <jr:columnFooter height="0"/>
        <jr:column width="170" uuid="80cd4d4e-f92d-4144-8f03-1fdf8662d52f">
            <jr:columnHeader height="30">
                <staticText>
                    <reportElement x="0" y="0" width="170" height="30" uuid="ae24719f-dd68-41d8-9e1f-fffb458309d0"/>
                    <text><![CDATA[x]]></text>
                </staticText>
            </jr:columnHeader>
            <jr:detailCell height="30">
                <textField>
                    <reportElement x="0" y="0" width="170" height="30" uuid="53731196-ea6f-4378-b99a-22ee9f9ea4ba"/>
                    <textFieldExpression><![CDATA[$F{x}]]></textFieldExpression>
                </textField>
            </jr:detailCell>
        </jr:column>
        <jr:column width="170" uuid="ae1bfc2b-69c6-422e-8db0-150ec8d66973">
            <jr:columnHeader height="30">
                <staticText>
                    <reportElement x="0" y="0" width="170" height="30" uuid="93c5f52e-67d6-40c9-afd8-1e867104d9b0"/>
                    <text><![CDATA[y]]></text>
                </staticText>
            </jr:columnHeader>
            <jr:detailCell height="30">
                <textField>
                    <reportElement x="0" y="0" width="170" height="30" uuid="60320299-d2fa-46d6-87c0-25dbe7b14d92"/>
                    <textFieldExpression><![CDATA[$F{y}]]></textFieldExpression>
                </textField>
            </jr:detailCell>
        </jr:column>
    </jr:columnGroup>
    <jr:column width="100" uuid="a2eed3c8-5862-4026-b5b3-dd516f850b44">
        <jr:columnHeader height="30">
            <staticText>
                <reportElement x="0" y="0" width="100" height="30" uuid="9b694559-1a3d-4e68-abfe-7cd95ad447de"/>
                <text><![CDATA[column1]]></text>
            </staticText>
        </jr:columnHeader>
        <jr:detailCell height="30">
            <textField>
                <reportElement x="0" y="0" width="100" height="30" uuid="6c22c7d4-dde9-42f7-8564-a229e235a186"/>
                <textFieldExpression><![CDATA[$F{column1}]]></textFieldExpression>
            </textField>
        </jr:detailCell>
    </jr:column>
    <jr:column width="100" uuid="d57153ea-a883-4b2e-b351-b0950f4aae0d">
        <property name="local_mesure_unitwidth" value="pixel"/>
        <jr:columnHeader height="30">
            <staticText>
                <reportElement x="0" y="0" width="100" height="30" uuid="e64920ab-19de-4108-a63b-fea1484b5ba3"/>
                <text><![CDATA[column2]]></text>
            </staticText>
        </jr:columnHeader>
        <jr:detailCell height="30">
            <textField>
                <reportElement x="0" y="0" width="100" height="30" uuid="bfafd138-ed50-4fb4-91f4-61df26ab66fa"/>
                <textFieldExpression><![CDATA[$F{column2}]]></textFieldExpression>
            </textField>
        </jr:detailCell>
    </jr:column>
</jr:table> 
```

# javascript - 同步 jQuery 调用，无需将所有内容都放在回调中

> ID：11313283
> 
> 赞同：3
> 
> 时间：2012-07-03T14:38:12.297
> 
> 标签：javascript, jquery, json, deprecated, synchronous

`async: false`是否可以在不使用该选项（显然已被弃用）的情况下在 jQuery 中同步获取 JSON ？我也不希望将所有内容都放入成功功能中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:40:40.583

不，除了 没有其他选择`async: false`。如果有，我不会推荐它。

对于成功函数，您可以简单地传递另一个将要执行的函数。

例如：

```
$.ajax( {
    url: myUrl,
    type: 'POST',
    success: myFunc
} );

function myFunc( datas ) {
    // do what you should do in a success function
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:48:41.277

由于 jQuery 上的 ajax 方法返回一个`Deferred Object`（jQuery 1.5+），您也可以编写

```
$.ajax({
    url: myUrl,
    type: 'POST'
}).done(function() {
  // do what you should do in a success function
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:25:41.703

不合理。尝试在不使用 asyc:false 的情况下强制请求同步是可能的，但在我看来是浪费精力。在几乎所有想要使用 async:true 的场景中，您都可以使用 async:true 完成所有相同的事情，就像使用 async:false 一样。这只是你如何构建代码的问题。

如果您查看执行 AJAX 请求的源文件的当前版本： [https ://github.com/jquery/jquery/blob/master/src/ajax/xhr.js](https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js)

您会看到它仍然使用设置对象上的异步字段，该字段直接传递给 XMLHttpRequest 对象的 Open 方法。所以使用默认实现，你能做的就是设置“async：false”。

```
if ( s.username ) {
    xhr.open( s.type, s.url, s.async, s.username, s.password );
} else {
    xhr.open( s.type, s.url, s.async ); 
} 
```

现在假设您真的很固执并且想要在不设置“async：false”的情况下执行此操作，您可以变得非常大胆并编写自定义 ajaxTransport 并将其注册为自定义数据类型。

这是我编写的一个示例，它使用 send 和 abort 方法创建自定义传输对象，并将其注册为 dataType 'mine'。因此，当您在 ajaxSettings 对象中指定 dataType 'mine' 时，它将使用此自定义传输而不是 jQuery 中内置的传输。[http://jsfiddle.net/xrzc7/](http://jsfiddle.net/xrzc7/) 请注意，有两个 ajax 请求，一个带有显示警报的“我的”数据类型，一个没有不显示警报的数据类型。我在这个例子中的 ajaxTransport 没有完全发挥作用，它只是为了说明你可以在你自己的发送函数中进行交换。

我不建议为 jQuery 编写自己的 ajaxTransport，因为在我看来这确实不是必需的，但为了回答你的问题，我建议将其作为一个选项。

您应该密切注意 jquery 中默认的 ajaxTransport 是如何编写的，以及在编写自定义 ajaxTransport 时它如何与设置对象和回调方法交互。您的发送函数显然会强制将“假”值作为 XMLHttpRequest.open 方法的异步参数。

[https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js](https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js) - 这是默认 ajaxTransport 机制的当前源代码。

希望这会有所帮助，或者可能会说服您始终使用 async:true。:-D

# java - 使用restlet的异步android GAE通信

> ID：11313285
> 
> 赞同：0
> 
> 时间：2012-07-03T14:38:22.750
> 
> 标签：java, android, google-app-engine, restlet

我想反复（每秒）从另一个 android 设备向 GAE 请求消息（对象或值）（如果 android 客户端没有在那里创建或更改某些东西）。我需要快速检查它，但我知道它大约每小时发生一次。

我使用restlet，我不想创建新线程并每秒从该线程获取轮询，因为这非常消耗电池。我也不想使用 C2DM。

有没有可能做到这一点？我在这里找到了一些关于 NIO 非阻塞 http 连接器的信息： [http ://restlet-code.1609877.n2.nabble.com/Push-data-from-server-using-a-live-HTTP-connection-td2906563.html](http://restlet-code.1609877.n2.nabble.com/Push-data-from-server-using-a-live-HTTP-connection-td2906563.html)

但是这里只描述了客户端，我也不知道这个解决方案是否甚至可以在 GAE 上使用以及如何使用。有谁知道更多关于这种方法的信息？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:15:59.133

作为 uniqush 的作者，我在[FAQ](http://uniqush.org/documentation/faq.html)页面中针对这个问题创建了一个条目。

> **我可以在 Google App Engine 上使用 uniqush 吗？**
> 
> 是和不是。
> 
> 如果您只想在 Google App Engine 上使用 GCM，那么 uniqush-push 中有一些代码可以直接使用。
> 
> 但是，由于 Google App Engine 不支持套接字连接，因此无法使用 APNS。在另一项工作中，如果您想在 Google App Engine 上设置服务器，则无论您使用什么软件/库，都无法向 iOS 设备推送任何通知。
> 
> 我确实考虑过将 uniqush 移植到 Google App Engine。但由于这个事实，我认为在 Google 允许我们使用客户端套接字连接或提供某种方式连接到 APNS 服务器之前，最好将其移植。
> 
> 同样，如果您正在考虑使用 Google App Engine 作为您的应用程序的服务器，请注意您现在无法将通知推送到任何 iOS 设备。如果这个事实不打扰你，那就去做吧。
> 
> 就个人而言，我建议您运行具有完全控制权的服务器。现在不贵。Amazon EC2 或类似的云产品可能是运行 uniqush 的不错选择。

正如我上面建议的那样，如果您想支持除 Android 之外的更多平台，使用具有完全控制权的（虚拟）服务器将是一个更好的选择。

如果还有其他问题，请随时回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:05:14.433

For being future proof I would suggest you have a single push notification service for both kind of devices. You can either build on your own, or leverage something like [uniqush](http://uniqush.org/) or [this](http://remotequeries.com/)

Also the Urban Airship's SDK would be a good option to look at, more details [here](http://www.quora.com/How-does-urban-airship-implement-real-time-push-notification-before-C2DM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:55:56.920

[这](http://remotequeries.com)类似于 Urban Airship，但只是成本的一​​小部分。API 允许您通过调用向用户发送 C2DM 消息。实现广播接收器后，当用户安装应用程序时，系统会提示他们接受消息。如果他们接受，则将令牌发送到识别用户的 C2DM 服务器。然后使用此令牌通过 C2DM 平台向他们发送消息。Zend PHP 框架为此内置了函数，但如果可靠性是一个问题，请使用外部提供程序，如 Remote Queries 或 Urban Airship

# wpf - DevExpress Barbuttonitem 与 caliburn micro

> ID：11313287
> 
> 赞同：1
> 
> 时间：2012-07-03T14:38:31.277
> 
> 标签：wpf, mvvm, devexpress

我想知道。如何将 dxb:Barbuttonitem 与 caliburn micro 一起使用。我试着写这段代码。但不幸的是，它没有用。

```
<Window x:Class="WpfApplication1.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
    xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
    Title="ShellView"
    Width="300"
    Height="300">
<Grid>
    <dxb:BarManager Name="barManager1">
        <dxb:BarManager.Items>
            <dxb:BarButtonItem Name="Connect" Content="barButtonItem1" />
        </dxb:BarManager.Items>
        <DockPanel >
            <dxr:RibbonControl  DockPanel.Dock="Top">
                <dxr:RibbonDefaultPageCategory Name="ribbonDefaultPageCategory1" Caption="defaultCategory">
                    <dxr:RibbonPage Caption="Home">
                        <dxr:RibbonPageGroup Name="ribbonPageGroup1" Caption="Tools">
                            <dxb:BarButtonItemLink BarItemName="Connect" />
                        </dxr:RibbonPageGroup>
                    </dxr:RibbonPage>
                </dxr:RibbonDefaultPageCategory>
            </dxr:RibbonControl>
            <dxr:RibbonStatusBarControl  DockPanel.Dock="Bottom" />
        </DockPanel>
    </dxb:BarManager>
</Grid> 
```

```
[Export(typeof(IShell))]
public class ShellViewModel : PropertyChangedBase, IShell
{
    public void Connect()
    {
        MessageBox.Show(string.Format("Hello {0}!", "aaa"));
    }

    public bool CanConnect()
    {
        return false;
    }
} 
```

如果我使用标准按钮，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:43:57.813

这不受 CM 支持，因为 BarButtonItem 继承自 FrameworkContentElement（CM 仅支持 FrameworkElement 上的消息）。

CM论坛帖子可以在[这里找到](http://caliburnmicro.codeplex.com/discussions/218975)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T14:44:17.967

这个问题有一个解决方法，可以让您从 DX 的 Bar 项目中触发操作。您可以使用静态栏项目并将任何标准控件（或按钮）放入其中，然后从这些元素触发操作。例子：

```
 <dxb:BarStaticItem x:Name="LoadAllBarItem">
    <dxb:BarStaticItem.ContentTemplate>
      <DataTemplate>
        <Button Content="Load all"
                cal:Message.Attach="LoadAction"/>
      </DataTemplate>
    </dxb:BarStaticItem.ContentTemplate>
  </dxb:BarStaticItem> 
```

# mysql - 仅当列值不相等时才使用 Sql 过滤命令

> ID：11313289
> 
> 赞同：1
> 
> 时间：2012-07-03T14:38:38.477
> 
> 标签：mysql, database, sql

我有它当前显示的 SQL 命令**

1.  Name (Person'e name) 我只想要以 AR 开头的
2.  国家（任何国家）但按 ASC A 到 Z 排序
3.  Normal_State（以二进制形式给出）其中大多数 3 和 4 相等
4.  Current_State（这也以二进制形式给出）仅在它们不相等时才想要

    1 和 2 我开始工作了，例如，我需要帮助来获得 3 和 4

**

`SELECT NAME, Country, NORMAL_STATE, CURRENT_STATE FROM SOMS_TABLE WHERE SOMS_TABLE.NAME LIKE 'AR%' ORDER BY SOMS_TABLE.Country ASC`

例如对于下面的图片，我只希望红色的出现谢谢 ![桌子](../Images/303dd41d0a0844b9dbb0d455f81d3f20.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:40:16.173

只需添加一个 AND 条件

`AND Normal_State <> Current_State`

有这样的效果：

```
SELECT 
     NAME, 
     Country, 
     NORMAL_STATE, 
     CURRENT_STATE 
FROM SOMS_TABLE 
WHERE SOMS_TABLE.NAME LIKE 'AR%' 
AND NORMAL_STATE <> CURRENT_STATE
ORDER BY SOMS_TABLE.Country ASC 
```

# php - PHP 5：通过 ref 方法返回会产生意想不到的结果

> ID：11313294
> 
> 赞同：1
> 
> 时间：2012-07-03T14:38:55.957
> 
> 标签：php, testing, pointers, byref

我创建了一个简单的类来管理一个看起来很奇怪的树数据结构（后面的代码）。当很明显这不是我的错误时，我创建了一个测试用例，它产生了同样令人费解的行为。这在 5.3 和 5.4 中是相同的。

这是我的测试用例：

```
<?php
class testcaseA {
    public function __construct($one=0, $two=1, $three=2) {
        $this->obj = new testcaseB($one++, $three, $two);
    }
    public function &get($what){
        return $this->obj->get($what);
    } 
}
class testcaseB {
    public function __construct($one, &$two, &$three) {
        $this->one=$one;
        $this->two=$two;
        $this->three=$three;
        echo "\$one={$one}";
    }
    public function &get($what){
        echo "<p>You asked for $what. $what ain't no country I ever heard of.<br />";
        echo "Check: [{$this->one}], {$this->two}, {$this->three}. Is this thing on?</p>";
        $this->obj[$what] = new testcaseB($this->one++,$this->two,$this->three);
        return $this->obj[$what];
    } 
}
ini_set('display_errors',1); 
error_reporting(E_ALL);
$bob = new testcaseA();
$bob->get("What")->get("Spam")->get("America");
$bob->get("What")->get("EU")->get("France");
echo "<pre>";
print_r($bob); 
```

现在我期望的输出是看到 $one 的值增加 1,2,3,1,2,3 并产生一个树形。

这是我实际得到的输出：

```
$one=0

You asked for What. What ain't no country I ever heard of.
Check: [0], 2, 1\. Is this thing on?
$one=0

You asked for Spam. Spam ain't no country I ever heard of.
Check: [0], 2, 1\. Is this thing on?
$one=0

You asked for America. America ain't no country I ever heard of.
Check: [0], 2, 1\. Is this thing on?
$one=0

You asked for What. What ain't no country I ever heard of.
Check: [1], 2, 1\. Is this thing on?
$one=1

You asked for EU. EU ain't no country I ever heard of.
Check: [1], 2, 1\. Is this thing on?
$one=1

You asked for France. France ain't no country I ever heard of.
Check: [1], 2, 1\. Is this thing on?
$one=1

testcaseA Object
(
    [obj] => testcaseB Object
        (
            [one] => 2
            [two] => 2
            [three] => 1
            [obj] => Array
                (
                    [What] => testcaseB Object
                        (
                            [one] => 2
                            [two] => 2
                            [three] => 1
                            [obj] => Array
                                (
                                    [EU] => testcaseB Object
                                        (
                                            [one] => 2
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [France] => testcaseB Object
                                                        (
                                                            [one] => 1
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

) 
```

起初这让我很困惑，但我想知道链接使用是否以我没有预料到的方式设置值。

所以我尝试了在前面的代码之后添加的这个：

```
...same classes and initial code as before...
$a=$bob->get("What");
$b=$a->get("Spam");
$c=$b->get("America");
//$bob->get("What")
$d=$a->get("EU");
$e=$d->get("France");  
print_r($bob); 
```

这产生了一组不同但仍不可预测的结果。

```
You asked for What. What ain't no country I ever heard of.
Check: [2], 2, 1\. Is this thing on?
$one=2

You asked for Spam. Spam ain't no country I ever heard of.
Check: [2], 2, 1\. Is this thing on?
$one=2

You asked for America. America ain't no country I ever heard of.
Check: [2], 2, 1\. Is this thing on?
$one=2

You asked for EU. EU ain't no country I ever heard of.
Check: [3], 2, 1\. Is this thing on?
$one=3

You asked for France. France ain't no country I ever heard of.
Check: [3], 2, 1\. Is this thing on?
$one=3testcaseA Object
(
    [obj] => testcaseB Object
        (
            [one] => 3
            [two] => 2
            [three] => 1
            [obj] => Array
                (
                    [What] => testcaseB Object
                        (
                            [one] => 4
                            [two] => 2
                            [three] => 1
                            [obj] => Array
                                (
                                    [Spam] => testcaseB Object
                                        (
                                            [one] => 3
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [America] => testcaseB Object
                                                        (
                                                            [one] => 2
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                    [EU] => testcaseB Object
                                        (
                                            [one] => 4
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [France] => testcaseB Object
                                                        (
                                                            [one] => 3
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

) 
```

This is still not the behavior that I am after but it is closer. What I need is to use a chain of objects to traverse the tree (as with the first case), a pointer to the values $two and $three which in the real case are arrays and not swapped about. What I don't want to do is copy objects needlessly.

On the other hand I do need to have all the objects share a single pair of variables which they all use.

My guess is that the method `get()` could afford to be `byval` rather than `byref` although instinctively this seems wrong.

Can anyone explain what the `$one` value is doing?

Also can anyone help me understand the behavior of the first test case especially to the values in the array the first time?

**UPDATE**

Making use of the awesome suggestions our test case now looks like:

```
class testcaseA {
    public function __construct($one=0, $two=1, $three=2) {
        $this->obj = new testcaseB(++$one, $three, $two);
    }
    public function &get($what){
        return $this->obj->get($what);
    } 
}
class testcaseB {
    public function __construct($one, &$two, &$three) {
        $this->one=$one;
        $this->two=$two;
        $this->three=$three;
        echo "[New:\$one={$one}]:";
    }
    //public function &get($what){
    public function &get($what){
        //echo "<p>You asked for $what. $what ain't no country I ever heard of.<br />";
        echo "Get:{$what}:[{$this->one}]<br />";
        if(!isset($this->obj[$what])){
            $this->obj[$what] = new testcaseB(++$this->one,$this->two,$this->three);
        }
        return $this->obj[$what];
    } 
}
echo "STARTING:<br />";
ini_set('display_errors',1); 
error_reporting(E_ALL);
echo "REALLY STARTING:<br />";
echo "<pre>";
echo "<p>One at a time:</p>";
$bob = new testcaseA();
$a=$bob->get("What");
$b=$a->get("Spam");
$c=$b->get("America");
$d=$a->get("EU");
$e=$d->get("France"); 
echo "<br />";
print_r($bob); 
echo "<p>Chained:</p>";
$bobby = new testcaseA();
$bobby->get("What")->get("Spam")->get("America");
$bobby->get("What")->get("EU")->get("France");
echo "<br />";
print_r($bob); 
```

The out put of which is:

```
STARTING:
REALLY STARTING:

One at a time:
[New:$one=1]:Get:What:[1]
[New:$one=2]:Get:Spam:[2]
[New:$one=3]:Get:America:[3]
[New:$one=4]:Get:EU:[3]
[New:$one=4]:Get:France:[4]
[New:$one=5]:
testcaseA Object
(
    [obj] => testcaseB Object
        (
            [one] => 2
            [two] => 2
            [three] => 1
            [obj] => Array
                (
                    [What] => testcaseB Object
                        (
                            [one] => 4
                            [two] => 2
                            [three] => 1
                            [obj] => Array
                                (
                                    [Spam] => testcaseB Object
                                        (
                                            [one] => 4
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [America] => testcaseB Object
                                                        (
                                                            [one] => 4
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                    [EU] => testcaseB Object
                                        (
                                            [one] => 5
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [France] => testcaseB Object
                                                        (
                                                            [one] => 5
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

)

Chained:
[New:$one=1]:Get:What:[1]
[New:$one=2]:Get:Spam:[2]
[New:$one=3]:Get:America:[3]
[New:$one=4]:Get:What:[2]
Get:EU:[3]
[New:$one=4]:Get:France:[4]
[New:$one=5]:
testcaseA Object
(
    [obj] => testcaseB Object
        (
            [one] => 2
            [two] => 2
            [three] => 1
            [obj] => Array
                (
                    [What] => testcaseB Object
                        (
                            [one] => 4
                            [two] => 2
                            [three] => 1
                            [obj] => Array
                                (
                                    [Spam] => testcaseB Object
                                        (
                                            [one] => 4
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [America] => testcaseB Object
                                                        (
                                                            [one] => 4
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                    [EU] => testcaseB Object
                                        (
                                            [one] => 5
                                            [two] => 2
                                            [three] => 1
                                            [obj] => Array
                                                (
                                                    [France] => testcaseB Object
                                                        (
                                                            [one] => 5
                                                            [two] => 2
                                                            [three] => 1
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

) 
```

The output numbers seem right but the `$one` are off in the stack.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:00:35.827

If I understand what you are confused about (and I *think* I do) you have run into the subtle difference between [pre- and post-increment](http://php.net/manual/en/language.operators.increment.php). This can be most easily demonstrated in code:

```
$a = 1;
echo $a++; // 1
echo $a;   // 2 
```

On the other hand:

```
$a = 1;
echo ++$a; // 2
echo $a;   // 2 
```

Basically, by placing `++` *before* the value you increment, you will get the new value. By placing it after (as you have done) you will get the old value.

I think the key line in your code is this:

```
$this->obj[$what] = new testcaseB($this->one++,$this->two,$this->three); 
```

...should be this:

```
$this->obj[$what] = new testcaseB(++$this->one,$this->two,$this->three); 
```

With the post-increment, the initial value of `$this->one` will be carried through all subsequent iterations.

As a side note, I don't think you need to worry about returning by reference here, since all objects in PHP5 are passed by reference anyway.

# jquery - 使用缩小版本时 jquery 未定义的问题？

> ID：11313301
> 
> 赞同：1
> 
> 时间：2012-07-03T14:39:07.320
> 
> 标签：jquery, minify

我有一个 core.js 文件，其中包含所有关键的 JS 库和脚本，例如添加到我的 HTML 页面标题中的 jQuery。在页脚中，我有所有非关键的 jQuery 插件和脚本，但是我不断从其中一些插件中收到“jQuery undefined”错误，即使它们被包装在 jQuery(document).ready(function(){ 中。 .. }. 当我从 core.js 文件中删除 jQuery 并在标题中单独链接到它时，没有错误。

```
 <head>
      <script src="core.js"></script>
    </head>

    <body>

     ....
     ....
       <script src="plugins.js"></script>
    </body> 
```

[Core.js (pasetbin)](http://pastebin.com/WTh82D9T)

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:17.137

Well, just looking at the code, you're not ending the `jQuery.extend()` call properly (line 262), so any plugins after that will not be loaded due to a parse error (ASI doesn't help since the following is all parseable).

Why then the jQuery symbol is not exported to other javascript files is a different matter, but since you say loading it in a separate file helps, this is likely part of the problem.

# ruby-on-rails - 数据库锁在 Rails 和 Postgres 中无法正常工作

> ID：11313303
> 
> 赞同：9
> 
> 时间：2012-07-03T14:39:14.670
> 
> 标签：ruby-on-rails, ruby, postgresql, transactions, locking

我在 rails 模型中有以下代码：

```
foo = Food.find(...)
foo.with_lock do
  if bar = foo.bars.find_by_stuff(stuff)
    # do something with bar
  else
    bar = foo.bars.create!
    # do something with bar
  end
end 
```

目标是确保所创建类型的 Bar 不会被创建两次。

在控制台上测试 with_lock 可以确认我的期望。但是，在生产中，似乎在某些或所有情况下，锁都没有按预期工作，并且正在尝试冗余 Bar - 因此， with_lock 不会（总是？）导致代码等待轮到它.

这里会发生什么？

**对所有说“锁定 foo 对你没有帮助”的人表示抱歉**！**我的示例最初没有栏查找。现在已解决。**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T17:28:55.123

你对做什么感到困惑`with_lock`。来自[精美手册](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html#method-i-with_lock)：

> **with_lock(lock = true)**
> 
> 将传递的块包装在事务中，在屈服之前锁定对象。您可以将 SQL 锁定子句作为参数传递（请参阅 参考资料`lock!`）。

如果你检查`with_lock`内部做了什么，你会发现它只不过是一个薄包装[`lock!`](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html#method-i-lock-21)：

> **锁定！（锁定=真）**
> 
> 获取此记录的行锁。重新加载记录以获取请求的锁。

所以`with_lock`只是做一个行锁定和锁定`foo`的行。

不要为所有这些锁定废话而烦恼。处理这种情况的唯一明智的方法是在数据库中使用唯一约束，除了数据库之外没有人可以确保唯一性，除非您想做一些荒谬的事情，例如锁定整个表；然后继续盲目地尝试您的 INSERT 或 UPDATE 并捕获并忽略违反唯一约束时将引发的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-27T20:14:26.777

处理这种情况的正确方法实际上在 Rails 文档中：

[http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/find_or_create_by](http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/find_or_create_by)

```
begin
  CreditAccount.find_or_create_by(user_id: user.id)
rescue ActiveRecord::RecordNotUnique
  retry
end 
```

（“find_or_create_by”不是原子的，它实际上是一个查找然后是一个创建。所以用你的查找替换它然后创建。这个页面上的文档准确地描述了这种情况。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:48:07.430

为什么不使用唯一约束？它是为独特而生的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T09:23:31.413

一个锁在查询缓存中的 Rails 应用程序中不起作用的原因。

如果您尝试在单个请求中多次获取同一行的排他锁，则查询缓存会启动，因此后续锁定查询永远不会到达数据库本身。

[该问题已](https://github.com/rails/rails/issues/867)在 Github 上报告。**

# html - 4 列布局停止在 100%

> ID：11313304
> 
> 赞同：0
> 
> 时间：2012-07-03T14:39:19.417
> 
> 标签：html, css, height, css-position, fluid-layout

我今天早些时候问了一个关于 4 Column 流体布局的问题（在此处查看：[4 Column Position absolute layout](https://stackoverflow.com/questions/11307317/4-column-position-absolute-layout)）。

我认为这是完美的，直到内容开始低于屏幕高度（出现滚动条时）查看此处以了解我的意思：http: [//jsfiddle.net/AdeTd/1/](http://jsfiddle.net/AdeTd/1/)

有什么解决办法吗？认为也许&可能会起作用`max-height: 100%`，但那里没有运气......`html``body`

# spring-mvc - Spring Security - 无需密码的编程登录

> ID：11313309
> 
> 赞同：27
> 
> 时间：2012-07-03T14:39:28.077
> 
> 标签：spring-mvc, spring-security

当用户单击其电子邮件中带有 Spring Security 的链接时，我正在尝试执行自动登录。

我已经看到很多执行编程登录的示例，如下所示：

```
UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);
try {
    Authentication auth = authenticationManager.authenticate(token);
    SecurityContextHolder.getContext().setAuthentication(auth);
    repository.saveContext(SecurityContextHolder.getContext(), request, response);
    rememberMeServices.loginSuccess(request, response, auth);
 .... 
```

我看到的问题是我没有原始密码，所以我无法创建 UsernamePasswordAuthenticationToken。如果我没有纯文本密码（我有编码的密码），还有其他登录用户的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-03T15:35:52.603

请注意，在允许从电子邮件中的链接登录方面，您知道自己在做什么。SMTP 不是一种安全协议，因此依赖拥有电子邮件作为身份验证形式的人通常是不好的。

如果您已经知道它们已通过身份验证，则无需使用 AuthenticationManager。相反，您可以直接设置身份验证，如下所示：

```
Authentication authentication = new UsernamePasswordAuthenticationToken(user, null,
    AuthorityUtils.createAuthorityList("ROLE_USER"));
SecurityContextHolder.getContext().setAuthentication(authentication); 
```

如果您想要一个完整的示例，您可以参考[安全邮件应用程序中的](https://github.com/rwinch/spring-security-samples-securemail)[SignupController](https://github.com/rwinch/spring-security-samples-securemail/blob/master/src/main/java/org/springframework/security/samples/mail/mvc/SignupController.java)，它是 Spring Security 3.1 入门[（InfoQ 演示视频）](http://www.infoq.com/presentations/Spring-Security-3-1)的基础。

# c# - 在 LINQ to SQL 中对记录进行分组和计数，同时包括计数中的所有记录

> ID：11313313
> 
> 赞同：0
> 
> 时间：2012-07-03T14:39:34.423
> 
> 标签：c#, linq-to-sql, linq-to-entities

以下 LINQ to Entities 查询从电子邮件中获取所有链接点击，按 URL 对它们进行分组并将它们投影到模型中。

期望的最终结果将类似于：

```
Clicks  |  URL     |  Clickers
-------------------------------------------------------------------------------------
2          x.com      User 1, User 2...
1          y.com      User 1 
```

我有一个对象`CampaignEmailRecipient`，其中包含单击该链接的所有用户，我还想将其包含在我的模型中的 property 中`Clickers`。

我只是不确定如何在我的小组到位的情况下正确执行此操作，并想知道是否有人可以提供帮助？

**我的模型**

```
public class CampaignEmailReportLinksViewModel
{
    public int Id { get; set; }
    public int CampaignElementId { get; set; }
    public string LinkURL { get; set; }
    public int QtyClicks { get; set; }
    public CampaignEmailRecipient Clickers { get; set; }
} 
```

**我的查询**

```
public List<CampaignEmailReportLinksViewModel> GetCampaignLinksByElementId(int id, int cid, string user)
{
    var items = (from t1 in db.CampaignLinkClicks
                    where
                        (t1.CampaignLink.CampaignElementId == id) &&
                        (t1.CampaignLink.CampaignElement.Campaign.CompanyId == cid)

                    group new {t1} by new
                                        {
                                            t1.CampaignLink.URL,
                                            t1.CampaignLink.CampaignElementId
                                        }
                    into g

                    select new CampaignEmailReportLinksViewModel
                            {
                                LinkURL = g.Key.URL,
                                QtyClicks = g.Count(),
                                Clickers = ???????????
                            }).OrderByDescending(x => x.QtyClicks).ToList();

    return items.ToList();
} 
```

***编辑***

CampaignLinkClick 如下所示：

```
public int Id
public int CampaignRecipientId
public string IP
public datetime Timestamp
public int CampaignLinkId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:53:08.430

如果您考虑您正在尝试做什么，您的 SQL 将按 URL 对项目进行分组，所以如果您有：

```
User  |  URL     
--------------------------------------------------
User1          x.com      
User2          x.com      
User1          y.com 
```

当您按 URL 分组时，您将获得一个结果集，因此 user 的子元素将丢失，因此，

```
URL     
--------------------------------------------------
x.com      
y.com 
```

一种（相当昂贵的）方法是获取每个 URL 的结果，

```
select new CampaignEmailReportLinksViewModel
                            {
                                LinkURL = g.Key.URL,
                                QtyClicks = g.Count(),
                                Clickers = ""
                            }

foreach(var item in items){
    item.Clickers = db.CampaignLinkClicks
                           .Where(x=>x.Url == item.URL)
                           .Clickers.Select(x=>x.Name).ToString();
} 
```

# jakarta-ee - Spring 安全域 ACL 与 EJB3 集成

> ID：11313316
> 
> 赞同：3
> 
> 时间：2012-07-03T14:39:42.320
> 
> 标签：jakarta-ee, spring-security, ejb-3.0, acl, hibernate-4.x

我正在构建一个应用程序，它的服务（EJB3 Stateless Session Beans & Hibernate4）层和客户端 Web 层（Spring MVC）驻留在不同的物理服务器上。

客户端查找所有服务的服务层。所有的数据访问都在服务层完成。

Spring Security 用于 Web 应用层的身份验证。

1) 有没有办法与服务层 EJB 应用程序共享登录的用户详细信息？2) 授权数据访问的最佳选择是什么？有没有办法将 Spring 安全域对象安全 ACL 与 EJB3 集成？

感谢您的时间和答案..

# ios - 滑动手势工具栏

> ID：11313318
> 
> 赞同：0
> 
> 时间：2012-07-03T14:39:51.633
> 
> 标签：ios, toolbar, gesture, swipe

对于我的应用程序，我需要识别工具栏上的滑动手势来更改工具栏上的项目。所以我可以滚动浏览工具栏。

我想使用 XCode 4.3 为 iOS 5.0 或更高版本开发

我只发现了如何使用 swipeGestures 更改 viewController。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:52:11.427

```
-(void)swipeDidHappen:(UISwipeGestureRecognizer*)swipe {
        [self setToolbarItems:secondArray animated:YES];
} 
```

应该淡出/在一些新项目中很棒。请注意，工具栏必须是 UINavigationController 提供的工具栏。要连接它，请在代码中创建一个，然后使用`[[self toolbar]addGestureRecognizer:gesture];`. `secondArray`是 UIBarButtonItems 的数组，必须以编程方式制作（据我所知，您不能对数组进行故事板，也不应该）。

# php - 根据给定的 db 记录显示 css 类

> ID：11313319
> 
> 赞同：2
> 
> 时间：2012-07-03T14:39:57.747
> 
> 标签：php, yii

我正在使用 Yii，但我试图理解一个很好的逻辑来实现这一点，所以即使你不是 Yii 精通我也可以使用帮助。

我们有那些名称可能包含特殊字符的*事件类型，例如：*

“阿姆萨”

“阿利·苏洛”

ETC...

我不能简单地获取这些名称并静态调用视图上的模型来显示这些名称，因为我会得到一个无效的 css 类。

该模型：

```
/**
* @desc Get Event Type Name normalized. 
* @param int $id
* @return object 
*/
 public function getEventTypeName($id) {
  return normalizer_normalize(self::model()->findByPk($id)->name);
 } 
```

风景：

```
<p class="event-resume-<?= function_exists('normalizer_normalize') ? EventType::getEventTypeName($data->event->type) : '';?>"></p> 
```

我尝试使用 normalizer_normalize 但由于单词之间的空格，它不适用于“Áli Çulo”。

**逻辑问题：**

我们可以创建一个方法，它说：

*如果 id 为 1，则返回一个名为“nameoftype1”的常量字符串
如果 id 为 2，则返回一个名为“nameoftype2”的常量字符串*

但这不是一个好方法，因为如果我们以后有另一个数据库是其他 id 的，对应其他类型，我们需要再次更改此方法。

**这里有什么更好的方法？**

我应该提供更多信息吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:49:44.093

您可以获取事件类型的哈希值并使用它来代替：

```
<p class="event-resume-<?= md5( $data->event->type ) ?>"></p> 
```

这可能会导致 .css 文件的可读性降低，但您可以使用注释来解决这个问题。

# mysql - 这个查询使用平均值有什么问题？

> ID：11313321
> 
> 赞同：3
> 
> 时间：2012-07-03T14:40:03.440
> 
> 标签：mysql, sql

课程（cid、cname、描述）

教授（pid，pname）

教学（tid、cid、pid、年、学期、系）

学生（sid、lname、fname、b_date、部门）

Enrolled_stud（sid、tid、enrollment_date、grade、grade_date）

**问题：查询所有平均分最高的学生姓名：**

```
SELECT a.sname,a.avg
FROM (SELECT s1.sname,avg(e.grade)AS avg
      FROM Students s1
      NATURAL JOIN EnrolledStudents e
      GROUP BY s1.sid
      ) as a
where a.avg=(select max(a.avg)) 
```

你可以看到我在我的[SQLFIDDLE](http://sqlfiddle.com/#!2/b0e77/44)中得到的结果，你可以看到我做错了什么，我不明白！这一切对我来说似乎都是正确的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:46:32.910

既然是学习用的，我就先贴出这个提示。想想 where 子句 -`a`是当前行。当然`a.avg`等于`max(a.avg)`。

**更新**

尝试以下操作：

```
SELECT s1.sname, avg(e.grade) AS avg
FROM Students s1
NATURAL JOIN EnrolledStudents e
GROUP BY s1.sid
HAVING avg = (SELECT avg(e.grade) AS avg 
  FROM EnrolledStudents e
  GROUP BY e.sid ORDER BY avg DESC LIMIT 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:14:44.063

好吧，如果没有人有更好看的答案，那么这就是最好的答案：

```
SELECT s.sname
FROM Students s
NATURAL JOIN EnrolledStudents e
GROUP BY s.sid
HAVING avg(e.grade) >= ALL(SELECT AVG(e.grade)
      FROM  EnrolledStudents e
      GROUP BY e.sid) 
```

# silverlight - Silverlight，通过 UserControls 的 TemplateBindings 的路径

> ID：11313322
> 
> 赞同：0
> 
> 时间：2012-07-03T14:40:11.237
> 
> 标签：silverlight, binding, dependency-properties, templatebinding

我有一个带有文本框（绑定文本框文本）的 MainPage.xaml 和一些嵌套的用户控件，它们都有一个带有模板绑定/绑定的文本框（4 个文本框）。
当我在某处更改文本时，我希望每个框中都有相同的文本。

解决方法：[链接](http://dl.dropbox.com/u/76509861/SilverlightCustomControl%20Vers.9.zip)

我该怎么做才能同步所有文本？

谢谢！

MainPage.xaml（TextBoxText 是一个，我喜欢在任何地方显示）

```
<myContDll:DefaultContainerTemplate Caption="NewCaption">
    <StackPanel x:Name="myStackPanel">
        <sdk:Label Content="Binding TextBoxText of MainPage"/>
        <TextBox Text="{Binding TextBoxText}"/>
        <myDll:MyButtonControl x:Name="ButtonControl" Count="44"
                           Button3Caption="NewButton3" 
                           Button3Visibility="Visible"  
                           DisplayText="Form2Text2"
                           TextBoxText="{Binding TextBoxText}"/>
    </StackPanel>
</myContDll:DefaultContainerTemplate> 
```

通用的.xaml：

```
<Style TargetType="local:MyButtonControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:MyButtonControl">
                <StackPanel>
                    <sdk:Label Content="inner control test"/>
                    <sdk:Label Content="TemplateBinding TextBoxText of MyButtonControl"/>
                    <TextBox Text="{TemplateBinding TextBoxText}"/>
                    <Button Content="{TemplateBinding Button3Caption}" Visibility="{TemplateBinding Button3Visibility}" x:Name="Button3"/>
                    <local:CountDisplayControl x:Name="Control1" TextBoxText="{TemplateBinding TextBoxText}" Visibility="{TemplateBinding VisibilityText1}" Count="{TemplateBinding Count}" DisplayText="{TemplateBinding DisplayText1}"/>
                    <local:CountDisplayControl2 x:Name="Control2" TextBoxText="{TemplateBinding TextBoxText}" Visibility="{TemplateBinding VisibilityText2}" Count="{TemplateBinding Count}" DisplayText="{TemplateBinding DisplayText2}"/>
                    <local:CountDisplayUserControl TextBoxText="{TemplateBinding TextBoxText}"/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="local:CountDisplayControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:CountDisplayControl">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <StackPanel>
                        <sdk:Label Content="Control1"/>
                        <sdk:Label Content="{TemplateBinding Count}"/>
                        <sdk:Label x:Name="labelText" Content="{TemplateBinding Text}"/>
                        <sdk:Label Content="TemplateBinding TextBoxText of CountDisplayControl"/>
                        <TextBox Text="{TemplateBinding TextBoxText}"/>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="local:CountDisplayControl2">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:CountDisplayControl2">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <StackPanel>
                        <sdk:Label Content="Control2"/>
                        <sdk:Label Content="{TemplateBinding Count}"/>
                        <sdk:Label x:Name="labelText" Content="{TemplateBinding Text}"/>
                        <sdk:Label Content="TemplateBinding TextBoxText of CountDisplayControl2"/>
                        <TextBox Text="{TemplateBinding TextBoxText}"/>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:49:43.533

尝试设置你`Binding` `Mode`的`TwoWay`绑定：

```
<myContDll:DefaultContainerTemplate Caption="NewCaption">
    <StackPanel x:Name="myStackPanel">
        <sdk:Label Content="Binding TextBoxText of MainPage"/>
        <TextBox Text="{Binding TextBoxText, Mode=TwoWay}"/>
        <myDll:MyButtonControl x:Name="ButtonControl" Count="44"
                    Button3Caption="NewButton3" 
                    Button3Visibility="Visible"  
                    DisplayText="Form2Text2"
                    TextBoxText="{Binding TextBoxText, Mode=TwoWay}"/>
    </StackPanel>
</myContDll:DefaultContainerTemplate> 
```

# google-bigquery - 加载操作中的 BigQuery 错误：令牌无效 - 令牌无效：无状态令牌已过期

> ID：11313331
> 
> 赞同：0
> 
> 时间：2012-07-03T14:40:32.203
> 
> 标签：google-bigquery

我看到以下错误：加载操作中的 BigQuery 错误：令牌无效 - 令牌无效：
无状态令牌已过期

当我尝试上传一个大的纯文本（或gzip'ed）（约9000万条记录）文件时

这是我用来尝试上传数据的命令：

~/bigquery-2.0.6]$ python bq.py 加载 --skip_leading_rows 7 -F"\t" conn_logs.conn /scratch/conn.log /scratch/conn.schema

如果我尝试较小的文件，数据加载就好了。

知道是什么原因造成的，我该如何更新令牌以使其不会过期？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:35:21.323

这实际上是令牌更新处理方式中的一个错误`oauth2client`- 即它不会在上传结束时刷新令牌。它正在内部进行跟踪，但我认为目前还没有修复的 ETA。

最简单的解决方法是将文件上传到 Google Storage，然后使用 Google Storage 路径调用 load。这非常轻松，甚至还有[一个不错的教程](https://developers.google.com/bigquery/docs/hello_bigquery#createtable)。

# javascript - 查找文本区域的可见高度

> ID：11313334
> 
> 赞同：0
> 
> 时间：2012-07-03T14:40:50.930
> 
> 标签：javascript

我正在尝试查找 textarea 的可见高度（即当前对用户可见的行数）。我使用以下 CSS 设置了 textarea 的高度和宽度：

```
textarea
{
height:90%;
width:90%;
} 
```

当我尝试查找 rows 属性时，它返回值 2，这是不正确的。我尝试了各种其他方法，例如 offsetHeight 等，但运气不佳。任何人都可以就如何做到这一点提出任何建议或指出我如何做到这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:44:36.730

> 当我尝试查找 rows 属性时，它返回值 2，这是不正确的。

没错，`rows`属性和`height`属性是互斥的。

* * *

```
var textarea = document.getElementsByTagName('textarea')[0]​​​​​​​;

alert(textarea.scrollHeight);​ 
```

# php - 最佳 Mime 类型方法

> ID：11313335
> 
> 赞同：2
> 
> 时间：2012-07-03T14:40:54.893
> 
> 标签：php, file-upload, mp3, mime-types, mime

确定 mime 类型或文件类型的最佳方法是什么，阻止任何恶意通过并确保错误不会进入您的系统。

在我的示例中，我需要一种筛选方式，因此只需将 .mp3 上传到站点。现在我知道有 mime_content_type 但这会给出奇怪的结果，具体取决于文件的制作方式和您使用的浏览器，看到它从浏览器获取数据，至少我是这么理解的。

这是我使用 mime 类型识别的代码。

```
if(mime_content_type_new($_FILES["userfile"]) == 'audio/mpeg' ) { do stuff } 
```

然后是使用unix命令行并解释它

```
$fileinfo = exec("file -b 'song.mp3'"); echo $filinfo; 
```

这会输出类似这样的东西。

> ID3 版本 2.3.0 的音频文件，包含：MPEG ADTS，第三层，v1，192 kbps，44.1 kHz，立体声

所以我们可以排序并检查它是否与我们的文件类型匹配。

```
$fileinfo = exec("file -b 'song.mp3'");
$filewewant = "MPEG";
$mpeg = stripos($fileinfo, $filewewant);
$filewewant = "layer III";
$mpeg3 = stripos($fileinfo, $filewewant);

if ($mpeg !== False & $mpeg3 !== False)
    { echo "success"; }; 
```

这种方式似乎效果更好，无论命名扩展名如何（例如，它是否将其重命名为.png），但需要先保存文件然后排序，并且不适用于Windows。

我也被指向[http://pear.php.net/package/MIME_Type](http://pear.php.net/package/MIME_Type)

还有其他人有更好的方法吗？识别正在上传到服务器的文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:53:20.323

MIME 类型是（应该）通过查看文件的 MIME 标头获得的，该标头是文件开头的一段数据，指示 MIME。

这正是 mime_content_type_new 和您的 UNIX 命令正在做的事情，所以没有问题。不知道你所说的“更好”的方式是什么意思，你做得对。

如果由于浏览器问题而得到不同的 MIME 类型结果，您可能应该创建一个可接受值的数组并使用该`in_array()`方法检查它。

我不建议将这样的 MIME 类型检查留给客户端代码，尤其是当安全性是一个大问题时。客户端可以访问代码，因此更容易被愚弄。

但是，您可以在客户端和服务器端进行检查。这将为您节省上传错误的带宽，但仍可保护系统免受恶意用户的侵害。

这是关于 Javascript 的 FILE API 和使用 Javascript 处理图像的一个很好的教程。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:48:12.670

这可能不是一个证明解决方案（只是新的/当前的浏览器），但新的 javascript FILE API 允许在不上传文件的情况下读取 MIME-TYPE。对于任何服务器端验证，您必须上传文件 -> 并且您应该验证它们。

# android - 上次联系时间

> ID：11313338
> 
> 赞同：2
> 
> 时间：2012-07-03T14:41:01.587
> 
> 标签：android

android如何计算最后一次联系的值。它以整数格式提供值，但我无法破译给定的值。例如，如果我想比较两个给定值以了解以后联系了哪个联系人怎么办。任何类型的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:06:09.163

您收到的值以**长**格式返回，并保存上次调用的日期和时间信息发生在特定号码上。

它返回该数字的毫秒数。

**供您参考：http:** [//developer.android.com/reference/android/provider/ContactsContract.ContactOptionsColumns.html#LAST_TIME_CONTACTED](http://developer.android.com/reference/android/provider/ContactsContract.ContactOptionsColumns.html#LAST_TIME_CONTACTED)

**现在如何计算日期和时间是链接：** [如何在android中将毫秒转换为日期格式？](https://stackoverflow.com/questions/7953725/how-to-convert-milliseconds-to-date-format-in-android)

**如何比较：** 有“之前”和“之后”功能，可以判断事件日期是在另一个指定日期之前还是之后

**日期类： http:** [//developer.android.com/reference/java/util/Date.html#after(java.util.Date)](http://developer.android.com/reference/java/util/Date.html#after(java.util.Date))

或者

**日历类： http:** [//developer.android.com/reference/java/util/Calendar.html#after(java.lang.Object)](http://developer.android.com/reference/java/util/Calendar.html#after(java.lang.Object))

取决于你想使用哪一个。

我希望它有所帮助，让我知道更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:58:53.623

每次您联系某人（即拨打 Contacts.markAsContacted）时，TIMES_CONTACTED 应该增加 1 并且 LAST_TIME_CONTACTED 应该更新。但是，许多设备制造商已经更改了此功能，并且不再可靠。这个问题有一个未解决的错误，您可以在

[http://code.google.com/p/android/issues/detail?id=8784&q=LAST_TIME_CONTACTED&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=8784&q=LAST_TIME_CONTACTED&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

# iphone - 带有 UISegmentedControl 的 iPhone 自定义单元格

> ID：11313339
> 
> 赞同：1
> 
> 时间：2012-07-03T14:41:03.037
> 
> 标签：iphone, objective-c, uitableview, uisegmentedcontrol

我创建了一个带有 UISegmentedControl 的自定义单元格，并像这样加载了单元格，

```
static NSString *CellIdentifier = @"Cell";

SegmentedCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    NSArray *cells =[[NSBundle mainBundle] loadNibNamed:@"SegmentedCell" owner:nil options:nil];

    for (UIView *view in cells) 
    {
        if([view isKindOfClass:[UITableViewCell class]])
        {
            cell = (SegmentedCell *)view;
            [cell.SegmentedControl addTarget:self
                                                  action:@selector(segmentedControlChanged:)
                                        forControlEvents:UIControlEventValueChanged];        

        }
    }
}

cell.textLabel.text = @"Sample";
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

自定义单元格成功加载，我得到了 SegmentedControl 的操作。但是当我滚动表格视图时，SegmentedControl 的状态发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:49:53.873

当您滚动使用 dequeueReusableCellWithIdentifier 的 tableview 时，您实际上并没有保存所有不同的单元格。要解决您的问题，您需要执行一些操作。

*   将分段控件设置为每次按下时将其值存储到变量中。
*   将此值放入数组
*   在 cellForRowAtIndexPath 方法中，从数组中取出变量并将分段控件的值设置为该变量的值。

# android - 为什么我从 GCM 服务器端得到“MismatchSenderId”？

> ID：11313342
> 
> 赞同：77
> 
> 时间：2012-07-03T14:41:12.023
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试为我的 Android 应用程序创建推送服务，并且我遵循 Google GCM 的文档和示例：

我可以注册/注销我的 Android 应用程序。从我的服务器端，我可以看到我注册了一个订阅，但是当我尝试从服务器向我的 Android 应用程序发送消息时，我总是收到以下错误：

> 向设备 #0 发送消息时出错：MismatchSenderId

对于我的 Android 应用，我使用 SENDER_ID = 200000000001。

对于我的服务器端，正如谷歌所说，我使用 API_KEY = AIzxxxxxxxxxxxxxxxxXxxXxxXxxxXXXXXXxxxxs

我遵循了这份文件：

> [http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

我也在我的 Google API 面板中启用了 GCM，但我会收到那个烦人的错误消息。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-03T15:07:29.440

您的服务器是否使用了 GCM 服务器向您的应用返回的新注册 ID？如果尝试向旧 C2DM 服务器提供的注册 ID 发送消息，我遇到了这个问题。

还要仔细检查发件人 ID 和 API_KEY，它们必须匹配，否则您将收到 MismatchSenderId 错误。在 Google API 控制台中，查看您的项目的 URL：

```
https://code.google.com/apis/console/#project:xxxxxxxxxxx 
```

xxxxxxxxx 是项目 ID，即发送者 ID。

并确保 API 密钥属于“服务器应用程序密钥（具有 IP 锁定）”

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-04-08T06:15:44.743

不使用数字 ID 时会发生不匹配。项目 ID 不是发件人 ID！我花了 9 个小时才弄清楚这一点。对于谷歌造成的所有混乱，请检查以下链接以获取数字 id。

[https://console.cloud.google.com](https://console.cloud.google.com)

代替

[https://console.developers.google.com](https://console.developers.google.com)

希望能帮助到你！！

更新：- 事情又变了。现在发件人ID与firebase一起使用。

转到[https://console.firebase.google.com](https://console.firebase.google.com)并选择您的项目。在设置 -> 云消息下，您可以找到发件人 ID。

它有效！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-24T06:01:25.133

请在您的终端中运行以下脚本

```
curl -X POST \
-H "Authorization: key=  write here api_key" \
-H "Content-Type: application/json" \
-d '{ 
"registration_ids": [ 
"write here reg_id generated by gcm"
], 
"data": { 
"message": "Manual push notification from Rajkumar"
},
"priority": "high"
}' \
https://android.googleapis.com/gcm/send 
```

如果成功或失败，它将给出消息

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-14T08:01:17.427

我最近遇到了同样的问题，我根据项目 ID 为“gcm_sender_id”尝试了不同的值。但是，“gcm_sender_id”值必须设置为“项目编号”。

您可以在以下位置找到此值：菜单 > IAM 和管理 > 设置。

见截图：[GCM 项目编号](http://i.stack.imgur.com/NYppS.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-16T10:31:16.053

当 **服务器密钥**和发送方**ID**参数 HTTP 请求彼此不匹配时，就会发生这种情况。基本上服务器 ID 和服务器密钥都必须属于同一个 firebase 项目。请参考下图。如果混合来自不同 Firebase 项目的这些参数将导致错误**MismatchSenderId** [![在此处输入图像描述](../Images/3dc568ace023ea18ab6bf4772aef8e01.png)](https://i.stack.imgur.com/9klEB.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-02T14:11:07.317

您的 android 应用需要更正 12 位数字 ID（又名 GCM 项目编号）。如果这个 12 位数字不正确，那么您也会收到此错误。

这个 12 位数字可在您的 Google Play 控制台中的特定应用“服务和 API”->“链接发件人 ID”下找到

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-11T23:55:54.117

```
InstanceID.getInstance(getApplicationContext()).getToken(authorizedEntity,scope) 
```

authorizedEntity 是服务器的项目号

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-04T09:29:35.010

检查您的 Android 项目`google-services.json`文件夹中的文件。`app`如果您不确定，请从 Firebase 控制台生成一个新控制台。我在两种情况下遇到了这个错误。

1.  我使用了一个带有测试应用程序的测试 Firebase 项目（包含正确的`google-services.json`文件）。然后我尝试向另一个应用程序发送推送通知并收到此错误（'“error”：“MismatchSenderId”'）。我知道第二个应用程序绑定到另一个具有不同`google-services.json`. 因为服务器密钥不同，所以应该重写请求。

2.  *我在应用程序中进行*了更改`google-services.json`，因为我想用*实际*的. 我生成了正确的文件，更改了请求，但一直收到此错误。第二天它就自行修复了。我怀疑 Firebase 不会同步更新。**`google-services.json`**

 **要获取请求的服务器密钥，请打开[https://console.firebase.google.com](https://console.firebase.google.com)并选择适当的项目。

[![在此处输入图像描述](../Images/65accda33217f584566f241db2a29897.png)](https://i.stack.imgur.com/f7yLf.png)

然后将其粘贴到请求中。

[![在此处输入图像描述](../Images/7dbbaae3ae5d8506546b699481df7fe4.png)](https://i.stack.imgur.com/EV2lT.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-01T22:19:18.463

随着 GCM 的弃用和其 API 的移除，如果您在 2019 年 5 月 29 日之后尝试使用 GCM，您可能会看到 MismatchSenderId。有关更多详细信息，请参阅[Google GCM 和 FCM 常见问题解答](https://developers.google.com/cloud-messaging/faq)。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-03-06T10:17:45.593

使用此处生成的发件人 ID 和 API 密钥：http: [//developers.google.com](http://developers.google.com)（首先浏览 Google Cloud Messaging 并按照说明操作）。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-04-21T21:49:24.923

如果用于原生 Android，请检查您的`AndroidMaifest.xml`文件：

```
<meta-data
        android:name="onesignal_google_project_number"
        android:value="str:1234567890" />  
  <!--             its is correct. --> 
```

反而

```
 <meta-data
        android:name="onesignal_google_project_number"
        android:value="@string/google_project_number" /> 
```

希望能帮助到你！！**

# java - Java中的时间图表绘制

> ID：11313344
> 
> 赞同：1
> 
> 时间：2012-07-03T14:41:29.970
> 
> 标签：java, jfreechart

我对 Java 中的图形可视化有点陌生，我正在尝试使用 JFreeChart 库，

我目前有 2 个数组：

第一个数组是一个整数值数组。

第二个数组是一个日期数组。

我想绘制一个图表，其中日期在 X 轴上，整数值应该在 Y 轴上。任何人都可以帮助我如何创建这样的图表。

我已经检查了 XYLine Chart，但问题是数据集只接受整数作为输入，但我必须输入日期。

任何其他建议我如何创建这样的图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:05:27.740

您的 X 轴需要是`TimeSeriesCollection`.

请参阅以下[时间序列演示](http://www.java2s.com/Code/Java/Chart/JFreeChartTimeSeriesChartDemo1therendererismodifiedtoshowfilledshapes.htm)。
您可以通过搜索[JfreeChart Time Series找到其他示例](http://google.com/search?q=jfreechart%20time%20series)

更新：为了解决一些类和方法已经存在`@deprecated`但示例仍然使用它们的事实 - 您需要按如下方式修改示例：
1）删除任何对：`TimeSeriesCollection::setDomainIsPointsInTime(...)` 它的引用不是必需的，因为：

```
 /* @deprecated This flag is no longer used, as of 1.0.1\.  The
  *             <code>includeInterval</code> flag in methods such as
  *             {@link #getDomainBounds(boolean)} makes this unnecessary.
  */ 
```

2) 从 中删除第二个参数`TimeSeries(..., ...)`。它不是必需的，因为：

```
 /* @deprecated As of 1.0.13, it is not necessary to specify the
  *     <code>timePeriodClass</code> as this will be inferred when the
  *     first data item is added to the dataset.
  */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:10:57.053

You could convert the date to a long with

```
public long getTime() 
```

and then to an Integer by using mathematical means of your choice.

For a Gantt representation, take a look at Jaret Timebars (GPL): [http://jaret.de/timebars/](http://jaret.de/timebars/)

# android - 如何更改已在微调器中的数据

> ID：11313348
> 
> 赞同：0
> 
> 时间：2012-07-03T14:41:49.010
> 
> 标签：android

我有四个微调器，当用户选择微调器项目数据时，第一个微调器显示数据，然后显示其他微调器数据。第一次，当用户选择第一个微调器时，我已将所有数据加载到微调器中，然后应将数据更改为刷新到第二个微调器

第二个微调器中的数据如何更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:48:41.767

首先，您需要获得微调器的参考，例如 -

```
Spinner mySpinner = (Spinner) findViewById(R.id.mySpinner);
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
        this, R.array.myArray, android.R.layout.mySpinnerItem);
 adapter.setDropDownViewResource(android.R.layout.myDropdownItem);
 spinner.setAdapter(adapter); 
```

要更改您将执行的值 -

```
public class MyOnItemSelectedListener implements OnItemSelectedListener {

public void onItemSelected(AdapterView<?> parent,
  View view, int pos, long id) {
     //change content 
  }
}

public void onNothingSelected(AdapterView parent) {
      //do nothing
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:50:55.153

`setOnItemSelectedListener`在您的第一个上设置一个侦听`Spinner`器，并使用适当的代码填充您的第二个`Spinner`。这样，当您更改第一个的值时`Spinner`，第二个`Spinner`将被更新。

# sql - Oracle：如果父表引用的列有值，则自动填充外键

> ID：11313350
> 
> 赞同：0
> 
> 时间：2012-07-03T14:41:52.473
> 
> 标签：sql, oracle, hibernate, foreign-keys

这可能是一个愚蠢的问题，但不知何故我无法绕过它。

我有表格`status`，`logs`两个表格都有`jobId`列。`jobId`是基于序列生成的，所以我想`sequence generated jobId`从`logs`表添加到`status`页面。

我在`status`表中创建了引用`jobId`列到`logs`表的外键，但表中未填充 jobId 值`status`。

当使用序列自动生成时，如何`jobId`在`status`表格中自动填充？`jobId``logs`

**更新**

```
<id name="jobid"
        column="JOBID"
        type="long"
        unsaved-value="-1">
      <generator class="native">
            <param name="sequence">ID_SEQ</param>
        </generator>
    </id> 
```

这是如何为`status`页面生成 id，正如建议的那样，我需要使用 ID_SEQ.curval 但是我如何在休眠中做到这一点，知道吗？

就像是

```
<id name="id"
        column="ID"
        type="long"
        unsaved-value="-1">
      <generator class="native">
            <param name="sequence">ID_SEQ.curval</param>
        </generator>
    </id> 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:56:43.373

只需`currval`在日志表中插入行后使用：

```
insert into logs (jobid) values (seq_jobid.nextval);
insert into status (jobid) values (seq_jobid.currval); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:57:53.637

这取决于您如何使用序列来填充此列，但您很可能希望在填充表`currval`时使用序列`jobID`的`status`。

在最简单的情况下，您有两个表和一个序列

```
SQL> create table logs(
  2    jobID number primary key
  3  );

Table created.

SQL> create table status (
  2    jobID number references logs(jobID)
  3  );

Table created.

SQL> create sequence jobID_seq;

Sequence created. 
```

插入时`logs`，使用`nextval`序列的，插入时`status`使用`currval`序列的。 `currval`为您提供会话的最新值，因此您不会看到`currval`其他会话的值

```
SQL> insert into logs values( jobID_seq.nextval );

1 row created.

SQL> insert into status values( jobID_seq.currval );

1 row created.

SQL> select * from logs;

     JOBID
----------
         5

SQL> select * from status;

     JOBID
----------
         5 
```

如果您使用触发器（我在这里使用 11g 语法——`SELECT jobID_seq.nextval into :new.jobID from dual`如果您使用的是旧版本，则可以使用旧语法）

```
SQL> create trigger trg_logs
  2    before insert on logs
  3    for each row
  4  begin
  5    :new.jobID := jobID_seq.nextval;
  6  end;
  7  /

Trigger created.

SQL> create trigger trg_status
  2    before insert on status
  3    for each row
  4  begin
  5    :new.jobID := jobID_seq.currval;
  6  end;
  7  /

Trigger created. 
```

不过，我不太确定尝试自动填充这样的外键是否真的有意义。例如，在某些情况下，您可能会在子表中为您不只是插入的父行添加行。也许您可以通过向表`IF`上的触发器添加一个条件来解决此问题`status`，以检查是否已经提供了非 NULL 值

```
create trigger trg_status
  before insert on status
  for each row
begin
  if( :new.jobID IS NULL )
  then
    :new.jobID := jobID_seq.currval;
  end if;
end; 
```

# java - 一段时间没有输入后如何执行

> ID：11313351
> 
> 赞同：3
> 
> 时间：2012-07-03T14:41:53.573
> 
> 标签：java, swing, time

我正在尝试实现以下行为：

您按下一个在多个元素之间切换的按钮（在摆动中）。关键是，只有在最后一秒没有发生切换时才会出现消息或其他内容。这意味着您按下`button1`，等待一秒钟，然后出现您按下的消息`button1`；如果您按`button1`，然后（不到一秒钟）按`button2`，消息应该说`button2`被按下。

我发现了一些类似这样的计时器（我现在知道，这是一个 android 示例。也许swing 有类似的东西？？）：

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
  @Override
  public void run() {
    //Do something after 1000ms
  }
}, 1000); 
```

我怎么能停止任务？我不需要任何代码，只是一个提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:52:19.487

对于代码

```
final Handler handler = new Handler();
Runnable runIt = new Runnable() {
  @Override
  public void run() {
  //Do something after 1000ms
  }
}
handler.postDelayed(runIt, 1000); 
```

您可以通过以下方式从队列中删除消息

```
handler.removeCallbacks(runIt); 
```

# python - Django 控制器需要方法

> ID：11313356
> 
> 赞同：0
> 
> 时间：2012-07-03T14:42:07.480
> 
> 标签：python, django

我阅读了以下页面：

[https://docs.djangoproject.com/en/1.2/topics/http/decorators/](https://docs.djangoproject.com/en/1.2/topics/http/decorators/)

基本上，我在控制器中有一个只接受 POST 请求的函数。该页面上的文档允许我这样做。但是，我注意到当用户发送 GET 或 PUT 等时，响应实际上什么都没有。如何发送一般错误或 404 页面或其他内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:50:05.610

它什么也不返回。它返回 405 Method Not Allowed HTTP 状态代码。这向客户端表明不允许请求的方法（如名称所述）。

如果您一心想要退回其他东西，请不要使用装饰器。它所做的只是测试请求的方法是否在允许的方法列表中。只需将以下内容添加到您的视图代码中，您就可以为每个条件做任何您想做的事情：

```
if request.method in ['GET', 'POST']:
    // allowed
else:
    // not allowed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:48:42.380

我不记得它是否`request.method`存在，而且我目前没有在任何机器上安装 Django 进行仔细检查，但是这样的事情可以工作。

```
@require_http_methods(["GET", "POST"])
def my_view(request):
    if request.method == 'GET':
        # return a 404 or something
    # or
    if request.method != 'POST':
        # return a 404 or something 
```

`405 - Method not allowed`但是如果你只允许`POST`例如，你不应该得到你的通用返回页面。到某个控制器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:53:12.103

试试这个 =) 祝你好运！

```
from django.http import HttpResponseNotAllowed

def my_view(request):
    if request.method != 'POST':
        return HttpResponseNotAllowed(permitted_methods=('POST',)) 
```

# java - ubuntu hadoop 类路径

> ID：11313358
> 
> 赞同：0
> 
> 时间：2012-07-03T14:42:09.610
> 
> 标签：java, hadoop

这是我正在关注的教程：

[http://wiki.apache.org/hadoop/Running_Hadoop_On_Ubuntu_Linux_(Single-Node_Cluster](http://wiki.apache.org/hadoop/Running_Hadoop_On_Ubuntu_Linux_(Single-Node_Cluster) )

我正在尝试格式化 hdfs namenode

```
root@alexander-desktop:/usr/local/hadoop/bin# ./hadoop namenode -format
    ./hadoop: line 258: /usr/lib/jvm/java-6-sun/bin/java: No such file or directory
    ./hadoop: line 289: /usr/lib/jvm/java-6-sun/bin/java: No such file or directory
    ./hadoop: line 289: exec: /usr/lib/jvm/java-6-sun/bin/java: cannot execute: No such file or directory 
```

我还包括了我对 / 所做的更改`etc/bash.bashrc`。这些是为了配置路径：

```
export JAVA_HOME=/usr/lib/jvm/java-6-openjdk
export JDK_HOME=$JAVA_HOME
export PATH=$PATH:$JAVA_HOME/bin 
```

我检查了是否设置了 java 变量 `echo $JAVA_HOME`。下面是路径

```
/usr/lib/jvm/java-6-openjdk 
```

`which java``$JAVA_HOME`返回与指向不同的二进制文件。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:00:04.917

Step 1 :

```
export JAVA_HOME=/path/to/java
export HADOOP_HOME=/path/to/hadoop 
```

Step 2 : Set JAVA_HOME path to conf/hadoop-env.sh

Step 3 : conf/core-site.xml:

```
<configuration>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:9000</value>
  </property>
</configuration> 
```

Step 4 : conf/hdfs-site.xml:

```
<configuration>
  <property>
    <name>dfs.replication</name>
    <value>1</value>
  </property>
</configuration> 
```

Step 5 : conf/mapred-site.xml:

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>localhost:9001</value>
  </property>
</configuration> 
```

Step 6 : Login SSH localhost and Format a new distributed-filesystem

```
bin/hadoop namenode -format 
```

Step 7 : Start the hadoop daemons:

```
bin/start-all.sh 
```

Step 8 : Check the NameNode & JobTracker below port

```
http://localhost:50070/
http://localhost:50030/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T07:01:05.790

我找到了一个有趣的解决方案：<br> 如果你`echo $JAVA_HOME`，你可能会得到`/usr/bin/java`
`echo export $JAVA_HOME=/usr/ >> conf/hadoop-env.sh`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T06:23:40.677

您可以对其进行测试：`whereis java` 如果您可以看到 java 的位置，那么您可以键入 `env` 以查看您的路径。如果你有什么问题，你需要重置你的 java 路径和 hadoop 路径。

# gwt - 使用 BrowserMob 进行 Smartgwt 负载测试

> ID：11313361
> 
> 赞同：1
> 
> 时间：2012-07-03T14:42:18.557
> 
> 标签：gwt, smartgwt, load-testing

正如 Smartgwt - AutomatedTesting 文档中所述，我们一直在尝试使用 BrowserMob 进行负载测试，但 selenium ide 创建的脚本无法通过 BrowserMob 的验证。我认为它与 scLocator 相关，因为错误显示了第一个 scLocator 的行。BrowserMob 如何与 Smartgwt - Selenium 脚本一起使用？可以以任何其他方式/工具进行负载测试吗？谢谢你。

--Ubuntu 10.10 --Smartgwt 3.1d --Gwt 2.4

# c++ - 我可以初始化一个 *char 吗？

> ID：11313369
> 
> 赞同：1
> 
> 时间：2012-07-03T14:43:00.073
> 
> 标签：c++

在第 113 页，在 C++ 编程语言（第三版和特别版）中，Stroustrup 指出：

```
struct address {
char * name ; // "Jim Dandy"
long int number ; // 61
//...
};

void f ()
{
address jd ;
jd.name = "Jim Dandy"; // Is this possible?
jd.number = 61 ;
} 
```

由于没有为 jd 的 char* 字段分配任何内存，这可能吗？

更新：谢谢大家的回答！鉴于它不安全，我不会使用它。当我在书中看到它时，它引起了我的注意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:45:17.457

分配了足够的内存来保存指向 的指针`char`，并且分配将指针设置为指向保存字符串的静态缓冲区`"Jim Dandy"`，所以是的，这是可能的。由于没有复制字符串，因此不需要分配。

（但是，`char*`不推荐将 a 设置为字符串文字；请改用 a `char const*`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:47:29.647

内存已分配：足够一个指针。现在它指向包含字符串的静态数组。

如果您期望它将字符串的副本放入结构中，那么这不是 C 样式字符串的工作方式；如果您想要这种行为，请改用 C++`std::string`类。

我希望这个例子继续解释这是多么危险。静态数组是常量，但是语言的一个怪癖意味着您可以分配一个非`const`指针来指向它。这允许您编写尝试修改常量对象的代码，这会在运行时给出未定义的行为：

```
jd.name[0] = 'T'; // BOOM! Undefined behaviour. 
```

如果你幸运的话，编译器可能会警告你这个错误。您可以通过声明指针来防止它`const`：

```
char const * name;
...
jd.name[0] = 'T'; // Gives a friendly compile-time error 
```

# c# - 如何实现 IEnumerable 使用 GetEnumerator()？

> ID：11313373
> 
> 赞同：20
> 
> 时间：2012-07-03T14:43:19.803
> 
> 标签：c#, ienumerable

我希望我的类型实现`IEnumerable<string>`. 我试图简单地遵循 C#，但是出了点问题：

```
public class Simulation : IEnumerable<string>
{
    private IEnumerable<string> Events()
    {
        yield return "a";
        yield return "b";
    }

    public IEnumerator<string> GetEnumerator()
    {
        return Events().GetEnumerator();
    }
} 
```

但我得到构建错误

> 错误 1“EventSimulator.Simulation”未实现接口成员“System.Collections.IEnumerable.GetEnumerator()”。“EventSimulator.Simulation.GetEnumerator()”无法实现“System.Collections.IEnumerable.GetEnumerator()”，因为它没有匹配的返回类型“System.Collections.IEnumerator”。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-03T14:44:50.663

你错过了`IEnumerator IEnumerable.GetEnumerator()`：

```
public class Simulation : IEnumerable<string>
{
    private IEnumerable<string> Events()
    {
        yield return "a";
        yield return "b";
    }

    public IEnumerator<string> GetEnumerator()
    {
        return Events().GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T14:45:24.777

IEnumerable 要求您同时实现类型化方法和泛型方法。

在 msdn[文档](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)的社区部分，它解释了为什么你需要两者。（因为向后兼容是本质上给出的原因）。

# php - 如何避免htaccess重写规则修改php上的链接

> ID：11313374
> 
> 赞同：0
> 
> 时间：2012-07-03T14:43:26.140
> 
> 标签：php, file, .htaccess, rewrite

好吧，我在 Htaccess 上有这个

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*) index2.php?url=$1 
```

我正在尝试在 php 文件中执行以下操作

```
mime_content_type('Doggy.png') 
```

它返回一个错误，说找不到文件的路径，我很确定它确实存在，试图找出错误可能是什么，我最终认为它是 htaccess。

有人可以帮我解决这个问题吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:03:47.430

正如我们已经确定的那样，问题不在于重写规则。

实际上重要的不是**文件**的相对位置，而是图像文件相对于**工作目录**的位置。

例如，如果您的目录结构是：

```
/
/index.php
/inc/imagelib.php
/inc/Doggy.png 
```

并且您正在从 中对 Doggy 进行操作，`imagelib.php`但它实际上*包含*在`index.php`并且您的工作*目录*为`/`*`inc/Doggy.png`*

 ***工作目录**可能会改变，这取决于您在程序中的入口点（如果是 Web 应用程序 - 最初收到请求的文件在哪里），或者（如果是命令行），您在 shell 中的位置执行命令时。

为了避免相对路径出现问题，我建议使用绝对路径。

因此（假设与上一个示例中的场景相同），`imagelib.php`您需要像这样构造图像路径的路径：

```
`$absolute_path = dirname(__FILE__)."/Doggy.png"` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:48:24.310

不，这不是您的 .htaccess 规则。那些只是将*HTTP 请求*重写为文件执行规则。一旦您的 PHP 执行，它们就不再有任何影响。

问题只是**相对于执行此命令的文件而言，**`Doggy.png`该文件不存在。该文件必须与 位于同一目录中，假设该文件包含该行。否则，您需要使用相对路径，例如or 。**`index2.php``mime_content_type('Doggy.png')``mime_content_type('../Doggy.png')``mime_content_type('img/Doggy.png')`***

# c# - 数据表问题

> ID：11313384
> 
> 赞同：1
> 
> 时间：2012-07-03T14:43:53.547
> 
> 标签：c#, database, asp.net-mvc-3, ado.net, ole

```
 public class InnovationSubmission
    {
        public OleDbConnection connectr = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=DatabaseTEST.accdr;Jet OLEDB:Database Password=DWPOIT");
        public OleDbDataAdapter Adaptor = new OleDbDataAdapter();

        private List<SelectListItem> _Area = new List<SelectListItem>();
        private List<SelectListItem> _Team = new List<SelectListItem>();

        public int ID { get; set; }
        [Required(ErrorMessage="Please enter a short description")]
        public string ShortDescription { get; set; }
        [Required(ErrorMessage = "Please enter a detailed description")]
        public string DetailedDescription { get; set; }
        public string Status { get; set; }

        [Required(ErrorMessage = "Please enter your name")]
        public string Originator { get; set; }

        [Required(ErrorMessage = "Please enter your email address")]
        [RegularExpression(".+\\@.+\\..+",
        ErrorMessage = "Please enter a valid email address")]
        public string OriginatorEmail { get; set; }
        [Required]
        public string SelectedArea { get; set; }
        [Required]
        public string SelectedTeam { get; set; }

        public List<SelectListItem> Area
        {
            get { return _Area; }
        }

        public List<SelectListItem> Teams
        {
            get 
            {

                string SQLSelect = ("SELECT * FROM Teams");
                OleDbCommand sCommand = new OleDbCommand(SQLSelect, connectr);
                Adaptor.SelectCommand = sCommand;

                connectr.Open();
                Adaptor.Fill(areaTable);
                connectr.Dispose();

                foreach (DataRow row in areaTable.Rows)
                {
                    _Team.Add(new SelectListItem() { Text = row[1].ToString(), Value = row[1].ToString() });

                }

                return _Team;
            }
        }

        public DataTable areaTable = new DataTable();

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:52:41.220

在我看来，您的连接器对象有问题。可能它在其他地方使用过，这就是你得到异常的原因。打开新连接，进行查询并关闭它。尝试使用`using`来实现这一点并在 using 块中进行查询。

此外，正如评论中已经提到的那样 - 在属性获取器中进行数据库查询并不是一个好主意。看起来很奇怪和hacky...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T14:53:39.740

如果我这样使用它很好！

```
 public List<SelectListItem> Teams
        {
            get 
            {

                string SQLSelect = ("SELECT * FROM Teams");
                OleDbCommand sCommand = new OleDbCommand(SQLSelect, connector);
                Adaptor.SelectCommand = sCommand;

                connector.Open();
                Adaptor.Fill(areaTable);
                connector.Dispose();

                foreach (DataRow row in areaTable.Rows)
                {
                    _Team.Add(new SelectListItem() { Text = row[1].ToString(), Value = row[1].ToString() });

                }

                return _Team;
            }
        } 
```

# ruby-on-rails - 在另一个文件中扩展哈希常量

> ID：11313385
> 
> 赞同：0
> 
> 时间：2012-07-03T14:43:53.637
> 
> 标签：ruby-on-rails, ruby, inheritance, constants

我有一颗宝石，其中一个类是类似的：

```
class Test
    TESTING = {
        :sth1 => 'foo',
        :sth2 => 'bar'
    }

    # p Test.new.show 
    # should print 'cat'
    def show
        p TESTING[:sth3]
    end 

end 
```

我在其他文件中扩展

```
# in other file
class Test 
    TESTING = {
        :sth3 => 'cat'
    }       
end 
```

但是我需要在第一个文件中使用 :sth3 ，因为代码的第一部分代表。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:52:36.227

您没有扩展它，而是用新的哈希替换了哈希。以下是解决方法：

```
# in the other file
Test::TESTING[:sth3] = 'cat' 
```

我建议使用延迟初始化的方法，以便您可以按任意顺序排列分配：

```
class Test
  def self.testing
    @testing ||= {}
  end

  testing[:sth1] = 'foo'
  testing[:sth2] = 'bar'
end

# in the other file
Test.testing[:sth3] = 'cat' 
```

# email - grails 邮件插件错误检测

> ID：11313396
> 
> 赞同：1
> 
> 时间：2012-07-03T14:44:17.200
> 
> 标签：email, grails

我在发送电子邮件时遇到问题，正在尝试确定如何获取有关失败的更多信息。sendMail 调用成功。也就是说，没有抛出异常。但是电子邮件没有送达。有没有办法查看从电子邮件服务器返回的状态？

环境：
`grails 2.0.3
mail plugin 1.0`

# c++ - C++ ProjectEuler #11

> ID：11313397
> 
> 赞同：3
> 
> 时间：2012-07-03T14:44:20.133
> 
> 标签：c++

我正在尝试解决 ProjectEuler.net 上的第 11 个问题。这个问题的目标是在 20x20 的网格中找到最大的乘积，该网格由任意方向（上、下、右、左、对角线）的 4 个相邻数字组成。

我正在使用 BigInteger 库，因为我不知道数字会有多大，而且我不想要溢出 - 但我认为这可能是问题所在。每次我重新启动程序时，我都会得到不同的答案。:/ 我还尝试使用 unsigned long long int 来看看会发生什么 - 答案保持不变。

这是代码（没什么复杂的；我只是测试网格中的每个元素，看它是否在任何方向上都有 3 个相邻的数字，计算乘积并将其设置为新的最大值，如果它大于前一个。最后我打印最大的产品。）：

```
//NO.11
#include <iostream>
#include <BigIntegerLibrary.hh>
#include <windows.h>

int main()
{
    int grid[20][20] =
    {
        { 8,  2, 22, 97, 38, 15,  0, 40,  0, 75,  4,  5,  7, 78, 52, 12, 50, 77, 91,  8},
        {49, 49, 99, 40, 17, 81, 18, 57, 60, 87, 17, 40, 98, 43, 69, 48,  4, 56, 62,  0},
        {81, 49, 31, 73, 55, 79, 14, 29, 93, 71, 40, 67, 53, 88, 30,  3, 49, 13, 36, 65},
        {52, 70, 95, 23,  4, 60, 11, 42, 69, 24, 68, 56, 01, 32, 56, 71, 37,  2, 36, 91},
        {22, 31, 16, 71, 51, 67, 63, 89, 41, 92, 36, 54, 22, 40, 40, 28, 66, 33, 13, 80},
        {24, 47, 32, 60, 99, 03, 45,  2, 44, 75, 33, 53, 78, 36, 84, 20, 35, 17, 12, 50},
        {32, 98, 81, 28, 64, 23, 67, 10, 26, 38, 40, 67, 59, 54, 70, 66, 18, 38, 64, 70},
        {67, 26, 20, 68,  2, 62, 12, 20, 95, 63, 94, 39, 63,  8, 40, 91, 66, 49, 94, 21},
        {24, 55, 58,  5, 66, 73, 99, 26, 97, 17, 78, 78, 96, 83, 14, 88, 34, 89, 63, 72},
        {21, 36, 23,  9, 75,  0, 76, 44, 20, 45, 35, 14,  0, 61, 33, 97, 34, 31, 33, 95},
        {78, 17, 53, 28, 22, 75, 31, 67, 15, 94,  3, 80,  4, 62, 16, 14,  9, 53, 56, 92},
        {16, 39,  5, 42, 96, 35, 31, 47, 55, 58, 88, 24,  0, 17, 54, 24, 36, 29, 85, 57},
        {86, 56,  0, 48, 35, 71, 89, 07, 05, 44, 44, 37, 44, 60, 21, 58, 51, 54, 17, 58},
        {19, 80, 81, 68, 05, 94, 47, 69, 28, 73, 92, 13, 86, 52, 17, 77,  4, 89, 55, 40},
        { 4, 52,  8, 83, 97, 35, 99, 16, 07, 97, 57, 32, 16, 26, 26, 79, 33, 27, 98, 66},
        {88, 36, 68, 87, 57, 62, 20, 72,  3, 46, 33, 67, 46, 55, 12, 32, 63, 93, 53, 69},
        { 4, 42, 16, 73, 38, 25, 39, 11, 24, 94, 72, 18,  8, 46, 29, 32, 40, 62, 76, 36},
        {20, 69, 36, 41, 72, 30, 23, 88, 34, 62, 99, 69, 82, 67, 59, 85, 74, 04, 36, 16},
        {20, 73, 35, 29, 78, 31, 90,  1, 74, 31, 49, 71, 48, 86, 81, 16, 23, 57,  5, 54},
        { 1, 70, 54, 71, 83, 51, 54, 69, 16, 92, 33, 48, 61, 43, 52,  1, 89, 19, 67, 48}
    };

    BigInteger biggestProduct = 0;
    //unsigned long long int biggestProduct = 0;

    for (int row = 0; row < 20; row++)
    {
        for (int col = 0; col < 20; col++)
        {
            BigInteger product;
            //unsigned long long int product;

            //std::cout << grid[row][col] << ":" << std::endl; system("pause>nul");

            //UP
            if ((row-1 >= 0) && (row-2 >= 0) && (row-3 >= 0))
            {
                product = grid[row][col] * grid[row-1][col] * grid[row-2][col] * grid[row-3][col];
                //std::cout << "  U: " << grid[row][col] << "*" << grid[row-1][col] << "*" << grid[row-2][col] << "*" << grid[row-3][col] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }
            //DOWN
            if ((row+1 >= 0) && (row+2 >= 0) && (row+3 >= 0))
            {
                product = grid[row][col] * grid[row+1][col] * grid[row+2][col] * grid[row+3][col];
                //std::cout << "  D: " << grid[row][col] << "*" << grid[row+1][col] << "*" << grid[row+2][col] << "*" << grid[row+3][col] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }
            //RIGHT
            if ((col+1 >= 0) && (col+2 >= 0) && (col+3 >= 0))
            {
                product = grid[row][col] * grid[row][col+1] * grid[row][col+2] * grid[row][col+3];
                //std::cout << "  R: " << grid[row][col] << "*" << grid[row][col+1] << "*" << grid[row][col+2] << "*" << grid[row][col+3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }
            //LEFT
            if ((col-1 >= 0) && (col-2 >= 0) && (col-3 >= 0))
            {
                product = grid[row][col] * grid[row][col-1] * grid[row][col-2] * grid[row][col-3];
                //std::cout << "  L: " << grid[row][col] << "*" << grid[row][col-1] << "*" << grid[row][col-2] << "*" << grid[row][col-3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }

            //UP-RIGHT
            if ((row-1 >= 0) && (row-2 >= 0) && (row-3 >= 0) && (col+1 >= 0) && (col+2 >= 0) && (col+3 >= 0))
            {
                product = grid[row][col] * grid[row-1][col+1] * grid[row-2][col+2] * grid[row-3][col+3];
                //std::cout << "  U-R: " << grid[row][col] << "*" << grid[row-1][col+1] << "*" << grid[row-2][col+2] << "*" << grid[row-3][col+3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }

            //DOWN-RIGHT
            if ((row+1 >= 0) && (row+2 >= 0) && (row+3 >= 0) && (col+1 >= 0) && (col+2 >= 0) && (col+3 >= 0))
            {
                product = grid[row][col] * grid[row+1][col+1] * grid[row+2][col+2] * grid[row+3][col+3];
                //std::cout << "  D-R: " << grid[row][col] << "*" << grid[row+1][col+1] << "*" << grid[row+2][col+2] << "*" << grid[row+3][col+3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }

            //DOWN-LEFT
            if ((row+1 >= 0) && (row+2 >= 0) && (row+3 >= 0) && (col-1 >= 0) && (col-2 >= 0) && (col-3 >= 0))
            {
                product = grid[row][col] * grid[row+1][col-1] * grid[row+2][col-2] * grid[row+3][col-3];
                //std::cout << "  D-L: " << grid[row][col] << "*" << grid[row+1][col-1] << "*" << grid[row+2][col-2] << "*" << grid[row+3][col-3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }

            //UP-LEFT
            if ((row-1 >= 0) && (row-2 >= 0) && (row-3 >= 0) && (col-1 >= 0) && (col-2 >= 0) && (col-3 >= 0))
            {
                product = grid[row][col] * grid[row-1][col-1] * grid[row-2][col-2] * grid[row-3][col-3];
                //std::cout << "  U-L: " << grid[row][col] << "*" << grid[row-1][col-1] << "*" << grid[row-2][col-2] << "*" << grid[row-3][col-3] << "=  \t" << product << std::endl; system("pause>nul");
                if (product > biggestProduct)
                    biggestProduct = product;
            }
        }
    }

    std::cout << biggestProduct;

    return 0;
} 
```

有谁知道出了什么问题？

谢谢，通图尼。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:49:18.350

你的问题是你的范围检查：

例子：

```
// DOWN
if ((row+1 >= 0) && (row+2 >= 0) && (row+3 >= 0)) 
```

应该：

```
// DOWN
//if ((row+1 < 20 ) && (row+2 < 20 ) && (row+3 < 20 ))
//which still contains redundant comparisons (as pointed out by Blastfurnace), 
//and thus can be can be simplified to : 
if( row + 3 < 20 ) 
```

如果您在每次运行程序时都有随机结果，并且您不使用并发、随机数生成器或类似的东西，那么很可能是由未定义的行为引起的随机性，例如读取未分配的内存或使用未初始化的变量读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:49:15.557

看起来您正在阅读底部和右侧边缘：

```
if ((row+1 >= 0) && (row+2 >= 0) && (row+3 >= 0))
if ((col+1 >= 0) && (col+2 >= 0) && (col+3 >= 0)) 
```

和对角线的相同测试。

您应该检查索引是否未达到 20。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T08:45:21.200

访问此链接获取代码 [http://codingloverlavi.blogspot.in/2013/06/project-euler-solution-11.html](http://codingloverlavi.blogspot.in/2013/06/project-euler-solution-11.html)

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>

long find_max(int **);

int main()
{
                FILE *f;
                int **arr,i=0,j;
                arr=(int **)malloc(sizeof(int*)*20);
                for(i=0;i<20;i++)
                                arr[i]=(int *)malloc(sizeof(int)*20);

                f=fopen("D:/b.txt","r");
                if(f)
                                for(i=0;i<20;i++)
                                                for(j=0;j<20;j++)
                                                                fscanf(f,"%d",&arr[i][j]);             
                else
                                printf("file operation not successful\n");

                printf("Answer = %ld\n",find_max(arr));

                system("pause");
}

long find_max(int **arr)
{
                int i,j,k;
                long product,max=0;
                for(i=0;i<20;i++)
                                for(j=0;j<20;j++)
                                {
                                                /*checking for horizontal sequence*/
                                                product=1;
                                                for(k=0;k<4;k++)
                                                {
                                                                if(j+k<20)
                                                                {
                                                                                product*=arr[i][j+k];
                                                                }
                                                }
                                                if(product>max)
                                                                max=product;

                                                /*checking for vertical sequence*/
                                                product=1;
                                                for(k=0;k<4;k++)
                                                {
                                                                if(i+k<20)
                                                                {
                                                                                product*=arr[i+k][j];
                                                                }
                                                }
                                                if(product>max)
                                                                max=product;

                                                product=1;
                                                for(k=0;k<4;k++)
                                                {
                                                                if( (i+k<20) && (j+k<20) )
                                                                {
                                                                                product*=arr[i+k][j+k];
                                                                }
                                                }
                                                if(product>max)
                                                                max=product;

                                                product=1;
                                                for(k=0;k<4;k++)
                                                {
                                                                if( (i+k<20) && (j-k>0) )
                                                                {
                                                                                product*=arr[i+k][j-k];
                                                                }
                                                }
                                                if(product>max)
                                                                max=product;

                                }
                                return max;
} 
```

# html - 当内联块 div 由于页面调整大小而改变位置时创建过渡

> ID：11313404
> 
> 赞同：2
> 
> 时间：2012-07-03T14:44:32.610
> 
> 标签：html, css, css-transitions

我正在尝试向我的网站添加一些 css3 设计。

我有两个`div`使用以下 CSS 类定位的元素：

```
.formDiv {
   vertical-align:top;
   padding-left:10px;
   display:inline-block;
} 
```

使用以下测试代码：

```
 <body>
    <div class="formDiv">TestA</div>
    <div class="formDiv">TestB</Div>
    ... 
```

但是使用此代码，两个 div 都显示在同一 x 轴上，在同一行。

当我在 x 轴上调整浏览器的大小直到两个 div 都没有空间时，第二个 div 降低到第一个 div 以下。

我的问题是，我可以配置第二个 div 低于第一个 div 的移动将在过渡动画中吗？

例如，我想配置，如果我调整浏览器窗口的大小，第二个 div 将需要 2 秒才能移动到第一个 div 下方，并且它将以动画形式发生，而不仅仅是出现在那里。

我尝试将以下内容添加到 div 类

```
 -webkit-transition: all 1s linear; 
```

但它似乎没有完成这项工作。

有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:51:10.893

您想要的那种效果可以通过 CSS 媒体查询来实现。

在这里，[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

这是来自上述链接的演示，[http://css-tricks.com/examples/MediaQueriesSidebar/](http://css-tricks.com/examples/MediaQueriesSidebar/)

尝试调整窗口大小并查看“超级团队”列表中的变化。您可以使用它来创建您想要的效果。

媒体查询和响应式网页设计的更多示例。调整大小并查看它如何适应窗口大小。

[http://designshack.net/articles/css/20-amazing-examples-of-using-media-queries-for-responsive-web-design/](http://designshack.net/articles/css/20-amazing-examples-of-using-media-queries-for-responsive-web-design/)

看到这个，[http://jsfiddle.net/Mke7E/](http://jsfiddle.net/Mke7E/)

# php - 哪个操作系统更适合网络服务器、ubuntu 或 debian 或其他什么？

> ID：11313406
> 
> 赞同：3
> 
> 时间：2012-07-03T14:44:37.650
> 
> 标签：php, ubuntu, webserver, centos, debian

我想建立一个网络服务器，我想知道我应该选择哪个操作系统。人们告诉我我应该在 centOS、ubuntu 或 debian 之间进行选择。

基本上，服务器操作系统必须能够执行以下操作： - 运行一个 php/mysql 网站，每天约有 1000 名访问者访问该网站。- 支持具有raid 配置的服务器。

哪个操作系统是最佳选择，您建议安装哪些软件包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:52:27.407

它们都是为此目的可用的选项 - 公司使用各种平台并获得比您提到的更多的流量。我使用以下操作系统和以下网络服务器平台在网络服务器上运行站点。

*   Windows - Apache HTTP 网络服务器
*   Ubuntu - Apache 2 网络服务器
*   Debian - Apache 2 网络服务器

centOS 也有一个 Apache 网络服务器平台：

[http://www.abixalmon.com/2011/08/centos-web-server-with-latest-apache-php-and-mysql](http://www.abixalmon.com/2011/08/centos-web-server-with-latest-apache-php-and-mysql)

另外，请注意，托管更多访问者的能力不一定依赖于操作系统，而是依赖于 MACHINE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:52:35.410

我会说这是个人偏好，我也使用过 ubuntu，所以我坚持使用它，因为我喜欢包管理器以及它的更新速度有多快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:54:40.453

我更喜欢 Debian。

Ubuntu是基于Debian的，所以也很好，但我喜欢Debian。CentOS 也是很好的服务器端操作系统。

您的问题没有正确答案，操作系统的选择受个人喜好的限制。

# jsf-2 - JSF 2.1.3 - 仅限 IE 8 - mojarra.ab(...) 崩溃浏览器

> ID：11313408
> 
> 赞同：2
> 
> 时间：2012-07-03T14:44:41.663
> 
> 标签：jsf-2, internet-explorer-8

我有一个包含此代码的页面（由在 Glassfish 3.1.1 上运行的 JSF 2.1.3 生成

```
<a class="pagenumber"
   onclick="mojarra.ab(this,event,'click',0,'main:coupon-all main:page-top main:page-bottom');return false"
   href="#"
   id="main:j_idt221:0:j_idt224">1</a> 
```

这是从这部分生成的（在 ui:repeat 中）：

```
<h:commandLink styleClass="pagenumber">
  <f:ajax listener="#{productDetailInfoView.changePage(page)}"
          render=":main:page-top :main:page-bottom :main:coupon-all"/>#{page}
</h:commandLink> 
```

其中： `:main:page-top`是页面顶部导航 `:main:page-bottom`的 ID 是页面底部导航 `:main:coupon-all`的 ID 是 ui:repeat 的 ID，它列出了页面中的所有产品

## 问题：

在大多数浏览器（和往常一样）以及 IE 7 和 IE 9 上，一切都很好。但是在 IE8 上（主要在 Windows XP 上，但也可能在 Vista/8 上），浏览器崩溃并重新加载页面说它已“恢复”它（有时显示“崩溃报告”页面并要求向 MS 发送报告或取消） .

## 附加信息：

我实际上花了很多时间调试这个，问题似乎出在`jsf.js`（我使用 Stage: development 来获取完整版本），在 ajax 响应部分。但是我找不到它的哪个精确部分，因为在调试完该`jsf.ajax.request(...)`部分之后，它都是异步的，我陷入了无处可断的困境。发送请求似乎没问题，因为此调用完成时浏览器崩溃。

现在的问题是，如果我删除要重新渲染的元素之一（导航栏或产品列表之一），其余元素将无错误地渲染。但是我需要渲染所有 3 个元素，而不仅仅是两个...

## 编辑：12/07/05

我发现与该问题高度相关的项目是圆角的[PIE.htc](http://css3pie.com/)。我需要重新渲染的 3 个块中的许多元素都有使用 CSS 的 styleClass，如下所示：

```
.round {
  border-radius: 5px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  behavior: url('../PIE.htc');
  -khtml-border-radius: 5px;
 } 
```

找到了 PIE.htc 文件，并且圆角在 IE7 和 8 中按预期正确显示。然而，它使这些 IE 浏览器上的页面非常慢（我不介意，我已被允许删除 IE 的圆角）。但非常奇怪的是，如果我简单地删除 CSS 中对 PIE.htc 的所有引用，那么我仍然会遇到错误。也许其他`border-radius`人正在制造问题。我目前正在尝试删除任何类型的圆角，即使对于所有浏览器也是如此，并查看它导致的位置。

我的页面也经过 XML 验证。

任何帮助表示赞赏...

# php - 如何更改 PHP 搜索表单中的值（焦点/模糊）？

> ID：11313409
> 
> 赞同：1
> 
> 时间：2012-07-03T14:44:43.927
> 
> 标签：php, wordpress, search-form

在搜索表单中，我想在用户输入搜索字段（焦点）时将搜索字段中的初始值从“您的搜索”更改为“”（无），并在用户离开时将其更改回原始值该字段没有输入搜索（模糊）。我正在使用的样板函数是这样的：

```
 function boilerplate_search_form ( $form ) {
    $form = '<form role="search" method="get" id="searchform" action="' . home_url( '/' ) . '" >
    <div>
    <label class="screen-reader-text" for="s">' . __('Search for:','luchtspin') . '</label>
    <input type="search" placeholder="' . __('', 'luchtspin') . '" value="'. __('Your search','luchtspin') .'" name="s" id="s" />
    <input type="submit" id="searchsubmit" value="'. esc_attr__('Search','luchtspin') .'" />
    </div>
    </form>';
    return $form
    }
    add_filter( 'get_search_form', 'boilerplate_search_form' ); 
```

我正在考虑添加下面的代码，但显然我不能只输入一个 if 语句，而这正是我的 PHP 技能停止的地方。

```
 onfocus=if (form.value == "'. __('Your search','luchtspin') .'") {form.value = '';} onblur=if (form.value == '') {form.value = "'. __('Your search','luchtspin') .'";} 
```

这可能不是太难。为了更好地衡量一个带有搜索表单的网站链接：www.luchtspin.nl。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:46:45.437

只需使用 HTML5`placeholder`属性。`<input type="text" name="query" placeholder="Your Search">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:00:53.067

你可以使用 jQuery 来完成这个任务

```
$("input").blur(function() {
    if($.trim($(this).val()).length == 0)
        $(this).val($(this).data('last_value'));
}).focus(function() {
    $(this).data('last_value', $(this).val());
    $(this).val("")
}); 
```

# javascript - HTML5 拖放：使用 JavaScript 在文本框中加载文本文件

> ID：11313414
> 
> 赞同：10
> 
> 时间：2012-07-03T14:44:53.360
> 
> 标签：javascript, html

我想让用户从他们的计算机中拖放（或选择）一个文件，然后用 JavaScript 将它加载到一个文本框中。

是否可以使用 JavaScript 将本地文件加载到文本框中？如果是，那么如何？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-03T15:10:39.750

我认为您想要的 HTML5 的所有内容都包含在github 上的[remy/html5demos中。](https://github.com/remy/html5demos)

例如，我修改了[http://html5demos.com/file-api](http://html5demos.com/file-api)以接受文本文件并在浏览器中显示它们。

请参阅[jsfiddle](http://jsfiddle.net/jimschubert/DqcUg/)。

**编辑**
相关脚本：

```
// modified from http://html5demos.com/file-api
var holder = document.getElementById('holder'),
    state = document.getElementById('status');

if (typeof window.FileReader === 'undefined') {
    state.className = 'fail';
} else {
    state.className = 'success';
    state.innerHTML = 'File API & FileReader available';
}

holder.ondragover = function() {
    this.className = 'hover';
    return false;
};
holder.ondragend = function() {
    this.className = '';
    return false;
};
holder.ondrop = function(e) {
    this.className = '';
    e.preventDefault();

    var file = e.dataTransfer.files[0],
        reader = new FileReader();
    reader.onload = function(event) {
        console.log(event.target);
        holder.innerText = event.target.result;
    };
    console.log(file);
    reader.readAsText(file);

    return false;
};​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:55:18.467

查看`HTML5 File API`：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

该规范也有一个很好的例子来了解它是如何工作的：

[http://dev.w3.org/2006/webapi/FileAPI/#introduction](http://dev.w3.org/2006/webapi/FileAPI/#introduction)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-18T08:52:20.870

也许这会对你们大多数人有所帮助：

**在可拖动目标（源元素）上触发的事件：**

ondragstart - 当用户开始拖动元素时发生

ondrag - 拖动元素时发生

ondragend - 当用户完成拖动元素时发生

**在放置目标上触发的事件：**

ondragenter - 当被拖动的元素进入放置目标时发生

ondragover - 当被拖动的元素在放置目标上方时发生

ondragleave - 当被拖动的元素离开放置目标时发生

ondrop - 当拖动的元素被放置在放置目标上时发生

# c++ - MFC 比较字符串

> ID：11313415
> 
> 赞同：-2
> 
> 时间：2012-07-03T14:45:01.480
> 
> 标签：c++, mfc

```
sf.pTo = _T("D:\\Test2"); // it 's ok, you can move to folder Test2
CString m_to = EditCtrl_To.GetString();
sf.pTo = m_to;// EditCtrl_To is Edit Ctrol and it's value is "D:\\Test2" 
```

我无法移动到文件夹 Test2。当我比较 _T("D:\Test2") & m_to 时，它不相等。为什么？

请帮助我，非常感谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:00:41.250

基本 C++：

如果您分配一个字符串并使用反斜杠 \，则必须将其转义为`c:\\test2`. 没有它，字符串中有一个制表符。

如果您从编辑控件中复制它，这就是区别所在，因为控件会自动执行此操作。

# google-drive-api - 我可以获取特定文件的关联关键字列表吗？

> ID：11313429
> 
> 赞同：25
> 
> 时间：2012-07-03T14:45:58.820
> 
> 标签：google-drive-api

即对于执行 OCR 的图像，我希望能够获取图像上的文本列表。这可以使用SDK吗？如果是这样，如果没有，是否有任何关于使用谷歌的 OCR 获取图像中的单词的建议。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T15:19:32.787

当您使用 Drive API[创建](https://developers.google.com/drive/v2/reference/files/insert)或[复制](https://developers.google.com/drive/v2/reference/files/copy)文件时，您可以对其执行 OCR 以将其转换为包含 OCR 文本的 Google 文档。相关参数为：

*   `ocr` *boolean* 是否尝试对 .jpg、.png 或 .gif 上传进行 OCR。
*   `ocrLanguage` *字符串* 如果 ocr 为真，则提示要使用的语言。有效值为 ISO 639-1 代码。

# fonts - 有人能认出这个标志上的字体吗？

> ID：11313430
> 
> 赞同：0
> 
> 时间：2012-07-03T14:46:03.917
> 
> 标签：fonts

有人能认出这个标志上的 2 种字体吗？ [http://www.networkdance.com/logo.jpg](http://www.networkdance.com/logo.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:51:26.680

尝试在这个网站上搜索：[http ://www.myfonts.com/WhatTheFont/](http://www.myfonts.com/WhatTheFont/)

您可以上传图片并在其上查找字体。非常有用！

# oracle - 我可以通过命令行访问我的oracle数据库，但不能通过navicat，ORA-12514错误

> ID：11313431
> 
> 赞同：0
> 
> 时间：2012-07-03T14:46:05.723
> 
> 标签：oracle, oracle11g, navicat

我使用命令提示符连接我的 Oracle 数据库。所有功能都可以工作，但是当我尝试使用我的 Navicat 连接到数据库时，它显示以下错误消息：

> ORA-12514:TNS:listener 当前不知道连接描述符中请求的服务。

我对 Navicat 的一般设置是：

```
host type:basic
ip address:127.0.0.1(also try my ip, but still have same problem)
port:1521
service name:orcl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:34:42.020

通过“所有功能工作”，我假设您的意思是您能够连接到数据库并进行查询。你能告诉我们你使用的连接吗？

如果您以这种方式使用 sqlplus，

```
sqlplus userid/password@database1 
```

这意味着您当前的客户端指向正确的 tnsnames.ora。可能是navicat 没有指向正确的tnsnames.ora 文件？该错误表明您要连接到数据库 1，而 Oracle 无法将“数据库 1”映射到正确的服务器、主机和端口号。

您是否浏览过此处的相关详细信息？

[http://www.navicat.com/en/products/navicat_oracle/oracle_detail_win.html](http://www.navicat.com/en/products/navicat_oracle/oracle_detail_win.html)

你的操作系统版本和oracle版本是多少？

# javascript - 焦点后如何刷新页面？

> ID：11313434
> 
> 赞同：11
> 
> 时间：2012-07-03T14:46:20.050
> 
> 标签：javascript, jquery

我想在页面重新成为焦点后刷新页面。对于令人耳目一新的部分，我想我可能会使用：

```
location.reload(); 
```

棘手的部分是如何确定何时刷新？
首先，窗口必须失去焦点（这可以通过`.blur()`我假设来确定）。
只有在失去焦点的窗口重新获得焦点后，才会触发自身的刷新。可以`.focus()`现场使用吗？还是我必须在这里使用其他东西？

我该如何结合这两种情况？

你的方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T15:00:04.637

试试这个：

```
var blurred = false;
window.onblur = function() { blurred = true; };
window.onfocus = function() { blurred && (location.reload()); }; 
```

如果页面被隐藏，这只会重新加载页面

我不建议在 jQuery 中绑定到窗口焦点，页面会在几乎每个用户操作时重新加载。

**更新**

这在很大程度上依赖于 window.onfocus 和 window.onblur 的浏览器实现。Webkit 可能不支持 onblur 事件（在我的 chromium 中不支持），如果页面被隐藏，firefox 会调用模糊。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-06T20:03:59.290

在我的开发环境中，我将此 JS 片段添加到页面中 - 每当页面在变为非活动状态后变为活动状态时，它都会重新加载，例如，如果您在文本编辑器中键入然后单击浏览器，则页面将重新加载一次，而不会出现无限循环. 在同一浏览器会话中链接活动选项卡或活动窗口时，它也可以工作。

```
window.onblur= function() {window.onfocus= function () {location.reload(true)}}; 
```

如上所述，这确实取决于浏览器的实现，但在 chrome 中可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-24T08:48:55.610

@Eamonn 的方法适用于他提到的 chrome。

对于火狐：

```
window.disableResetPrompt;
window.onblur= function() {window.onfocus= function () {location.reload(true)}}; 
```

# javascript - 如何获得动态的 JQuery Mobile Accordion？

> ID：11313435
> 
> 赞同：0
> 
> 时间：2012-07-03T14:46:23.843
> 
> 标签：javascript, jquery, jquery-mobile

我试图使用 PhoneGap 和 JQuery Mobile 设计一个基本的 RSS 提要阅读器。页面首先加载，提要显示需要一些时间。我正在尝试为每个帖子添加一个手风琴，以便用户可以看到帖子标题并在感兴趣的情况下展开帖子。这是我使用的片段：

```
for (var i = 0; i < result.feed.entries.length; i++) {
    var entry = result.feed.entries[i];
    var title = entry.title,
    link = entry.link,
    description = entry.contentSnippet,
    pubDate = entry.publishedDate;
    feedItem = feedItem + '<div data-role="collapsible" data-theme="a" data-content-theme="a"><h3><a href="' + link + '>';
    feedItem = feedItem + '<span class="feeditemtitle">' + title + '</span>';
    feedItem = feedItem + '</a></h3>';
    feedItem = feedItem + '<h6>' + pubDate + '</h6>';
    feedItem = feedItem + '<p>' + description + '</p></div>';
} 
```

我能够在页面上获得帖子，但没有手风琴。它将帖子呈现为纯 HTML。我认为这是因为页面加载*后*加载的帖子。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:22:36.560

您必须*刷新*加载的内容。

假设它已附加到此节点`<div id="loaded-content" data-role="collapsible-set"></div>`，您必须执行以下操作：

```
$('.loaded-content').collapsibleset('refresh'); 
```

您可以查看我的模仿 Ajax 调用的小提琴并延迟创建手风琴：http: [//jsfiddle.net/ooflorent/FkT8H/](http://jsfiddle.net/ooflorent/FkT8H/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:59:07.643

```
for (var i = 0; i < result.feed.entries.length; i++) {
    var entry = result.feed.entries[i];
    var title = entry.title,
    link = entry.link,
    description = entry.contentSnippet,
    pubDate = entry.publishedDate;
    feedItem = feedItem + '<div data-role="collapsible" class="accordItem" data-theme="a" data-content-theme="a"><h3><a href="' + link + '>';
    feedItem = feedItem + '<span class="feeditemtitle">' + title + '</span>';
    feedItem = feedItem + '</a></h3>';
    feedItem = feedItem + '<h6>' + pubDate + '</h6>';
    feedItem = feedItem + '<p>' + description + '</p></div>';
    if(i == result.feed.entries.length-1){
        $(".accordItem").collapsible();
    }
} 
```

# drag-and-drop - 在 KineticJS 中拖动形状/组时突出显示可能的放置目标

> ID：11313436
> 
> 赞同：1
> 
> 时间：2012-07-03T14:46:24.080
> 
> 标签：drag-and-drop, mouseover, kineticjs

我正在使用 KineticJS 来实现图形编辑器。我想拖动一个 KineticJS 组并将其放入另一个形状。到目前为止一切顺利，完成将“dropend”事件绑定到组中的处理程序。但是我想在拖动过程中将颜色更改为潜在的目标形状，同时将其悬停在它上面，以证明它是适合放置的形状。我看不到这样做的方法，也无法在 Kinetic 文档中找到任何帮助。我该怎么办？

谢谢，埃卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:51:24.400

尽管您所做的实际上是有效的，但我发现它很慢。我所做的是替换 kineticjs (v4.0.1) 的第 3142 行：

```
else if(this.targetShape && !go.drag.moving) 
```

和

```
else if (this.targetShape) 
```

它就像一个魅力。和事件现在被触发`mouseout`。 无论如何，我不知道为什么，但是舞台对象的一个​​属性（shaperagging 左右）指向一个潜在的目标，但它已被删除。`mouseover`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:25:07.380

经过一番喃喃自语，我想我找到了解决方案：

```
 var aShape = new Kinetic.Shape(...);
  :
  aShape.on("dragmove", function(evt) {

    // Detect shapes under mouse position
    var pos = aShape.getStage().getUserPosition(evt);
    var collidingShapes = aShape.getStage().getIntersections(pos);
    :
    // If needed, filter out colliding shapes not suitable for drop
    :
    // Highlight drop target candidates, e.g. simulating a "mouseover"
    for (var iTarget = 0; iTarget < collidingShapes.length; ++iTarget)
        collidingShapes[iTarget].simulate("mouseover");

    // If you need to remove highlighting, keep track of previously
    // highlighted shapes and call simulate("mouseout") on those
    // not currently in the candidates set.
  }); 
```

# c++ - 移动 basic_iostream 时 basic_ostream 基础会发生什么情况？

> ID：11313437
> 
> 赞同：3
> 
> 时间：2012-07-03T14:46:25.110
> 
> 标签：c++, c++11, iostream

就在我以为我了解 C++11 中 iostream 的多遍移动构造时（感谢[https://stackoverflow.com/a/8156356/273767](https://stackoverflow.com/a/8156356/273767)的介绍），我遇到了这个问题：

**§27.7.2.5.1[iostream.cons]/3**

> `basic_iostream(basic_iostream&& rhs);`
> 
> `3``basic_istream`效果：通过使用 构造基类，从右值 rhs 移动构造`move(rhs)`。

那么另一个基地会发生什么`basic_ostream`？

我看到 libc++ 提供了`std::basic_ostream`一个[受保护的默认构造函数](http://llvm.org/svn/llvm-project/libcxx/trunk/include/ostream)，它在此处被调用（并且与 §27.7.2.5.1/1 的字母相矛盾，在[basic_iostream 的普通构造函数中](http://llvm.org/svn/llvm-project/libcxx/trunk/include/istream)），并且什么也不做。这就是它应该的样子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:47:58.517

正如您所指出的，规格：

```
explicit basic_iostream(basic_streambuf<charT,traits>* sb); 
```

初始化两个基。我从来没有接受过：

[http://cplusplus.github.com/LWG/lwg-closed.html#135](http://cplusplus.github.com/LWG/lwg-closed.html#135)

因为它会导致**单个** `basic_ios::init()`函数在同一个虚拟基础对象上被调用两次。委员会裁定这种双重初始化是无害的。我非常不同意，以至于我拒绝实施关于这个细节的规范。但是规范说要双重初始化虚拟基类。

当需要指定`basic_iostream`移动构造函数时，我坐在驾驶座上。所以我指定了我认为最好的方式（不要双重初始化`basic_ios`）。该决定尚未受到挑战，但最终可能会受到挑战。

请注意，为了避免双重初始化，`basic_ostream`必须仔细设计默认构造函数以完全不做任何事情。我什么都不是。无零初始化：

```
protected:
    _LIBCPP_ALWAYS_INLINE
    basic_ostream() {}  // extension, intentially does not initialize 
```

幸运的是， 的基类`basic_ostream`实际上在其默认构造函数中被指定为不做任何事情。所以一切正常： `basic_ostream`默认构造并且不触及内存。然后派生的客户只调用`init(basic_streambuf<char_type, traits_type>*)` *一次*来执行`basic_ios`/的实际构造`ios_base`。

这是一个非常混乱的设计。通过拒绝双重初始化虚拟基础，我觉得 libc++ 使设计不那么混乱，并且更可靠。这是移动构造函数的标准行为，而不是采用`streambuf*`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:26:27.330

我同意霍华德的观点，这是标准规范上的一种缺陷。

在我的实现中，我选择对构造函数扩展使用更具体的调用

```
basic_iostream(basic_iostream&& _Other)
   : std::basic_istream<char_type, traits_type>(std::move(_Other)),
     std::basic_ostream<char_type, traits_type>(basic_ostream::_NoInit)
{ } 
```

`protected`在基类中使用特殊的构造函数

```
protected:    
    // special interface for basic_iostream

    enum __no_init_t { _NoInit };

    basic_ostream(__no_init_t)
    { } 
```

净效果是一样的。

# php - 大写 FROM 导致错误 1064

> ID：11313441
> 
> 赞同：1
> 
> 时间：2012-07-03T14:46:45.933
> 
> 标签：php, mysql, mysql-error-1064

我有一个已经编写好的 sql 查询，但是 from 命令是小写的。我喜欢它的格式为大写，但如果我更改它，我会收到错误 1064。

select、where 等也是小写字母，但是当我更改为大写字母时，它们工作正常，只有 WHERE 语句会导致这种情况。

这是sql：

```
 $listing_sql = "SELECT " . $select_column_list . 
                        "p.products_id, p.products_model, p.manufacturers_id, p.products_price, " .
                        "p.products_tax_class_id, IF(s.status, s.specials_new_products_price, NULL) as " .
                        "specials_new_products_price, IF(s.status, s.specials_new_products_price, " .
                        "p.products_price) as final_price ". 
                        "FROM " . 
                        TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p left join " . 
                        TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id left join " . 
                        TABLE_SPECIALS . " s on p.products_id = s.products_id, " . 
                        TABLE_PRODUCTS_TO_CATEGORIES . " p2c WHERE p.products_status = '1' AND " .
                        "p.products_id = p2c.products_id and pd.products_id = p2c.products_id and " .
                        "pd.language_id = '" . (int)$languages_id . "' and p2c.categories_id = '" . 
                        (int)$current_category_id . "'"; 
```

以下是回显时 sql 的样子：

```
SELECT p.products_image,
       pd.products_name,
       p.products_id,
       p.products_model,
       p.manufacturers_id,
       p.products_price,
       p.products_tax_class_id,
       IF(s.status, s.specials_new_products_price, NULL)             AS
       specials_new_products_price,
       IF(s.status, s.specials_new_products_price, p.products_price) AS
       final_price
FROM   products_description pd,
       products p
       LEFT JOIN manufacturers m
              ON p.manufacturers_id = m.manufacturers_id
       LEFT JOIN specials s
              ON p.products_id = s.products_id,
       products_to_categories p2c
WHERE  p.products_status = '1'
       AND p.products_id = p2c.products_id
       AND pd.products_id = p2c.products_id
       AND pd.language_id = '1'
       AND p2c.categories_id = '36' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:43:28.190

（有根据的）猜测是您正在谈论 OsCommerce 安装。

如果不是这种情况，您可能正在使用曾经从它分叉出来的东西（或其前身 tep *）*。

您遇到的问题可能是因为 `splitPageResults`类中的构造函数使用`strpos`区分大小写的 ，而不是`stripos`不区分大小写的 。

所以...总之，它是，

如果这确实是 oscommerce：

编辑两个 split_page_results.php 文件
（1：/catalog/classes/split_page_results.php，2：/catalog/admin/classes/split_page_results.php）

并在构造函数中用 stripos 替换 strpos。

即改变

```
$pos_from = strpos($this->sql_query, ' from', 0); 
```

至...

```
$pos_from = stripos($this->sql_query, ' from', 0); 
```

如果这不是 osCommerce，只需寻找类似的东西。

[strpost](http://php.net/manual/en/function.strpos.php)和[stripos](http://php.net/manual/en/function.stripos.php)的 php 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:24:25.657

尝试加入产品：

```
SELECT p.products_image,
   pd.products_name,
   p.products_id,
   p.products_model,
   p.manufacturers_id,
   p.products_price,
   p.products_tax_class_id,
   IF(s.status, s.specials_new_products_price, NULL) AS specials_new_products_price,
   IF(s.status, s.specials_new_products_price, p.products_price) AS final_price
FROM   products_description pd
   LEFT JOIN manufacturers m
          ON p.manufacturers_id = m.manufacturers_id
   LEFT JOIN specials s
          ON p.products_id = s.products_id,
            products_to_categories p2c
   LEFT JOIN products p ON ( p.products_id = p2c.products_id )
WHERE  p.products_status = '1'
   AND p.products_id = p2c.products_id
   AND pd.products_id = p2c.products_id
   AND pd.language_id = '1'
   AND p2c.categories_id = '36' 
```

# facebook - Facebook API 从 URL 上传照片

> ID：11313442
> 
> 赞同：7
> 
> 时间：2012-07-03T14:46:49.943
> 
> 标签：facebook, facebook-graph-api, image-uploading

我有一个带有照片库的网站，我想将每张照片（一张一张）上传到我的 Facebook**页面**（不是墙）。我设法发布了一条消息，但现在我想通过从服务器上传现有图像 - 特定 URL（我不想在本地再次上传）将照片上传到 FB Page Wall。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T14:49:57.767

是的，您可以做到
示例 在**[Graph Api Explorer](https://developers.facebook.com/tools/explorer?method=POST&path=me/photos)** 中进行呼叫发布，将 url 设置为[https://graph.facebook.com/me/photos](https://graph.facebook.com/me/photos)， 添加带有键和值的字段“任何自定义消息” 添加另一个带有键和值的字段[https://appharbor.com/assets/images/stackoverflow-logo.png](https://appharbor.com/assets/images/stackoverflow-logo.png) 点击提交

`message`
`url`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:45:42.410

您需要知道专辑 ID 并调用 POST 到：

```
https://graph.facebook.com/albumid/photos?access_token=$access_token 
```

您会发现进入相册并查看 URL 的相册 ID。将类似于[https://www.facebook.com/media/set/?set=a.XXXXXXXXXXX.YYYY.ZZZZZZZZZZ&type=3](https://www.facebook.com/media/set/?set=a.XXXXXXXXXXX.YYYY.ZZZZZZZZZZ&type=3)

您的专辑 ID 是 XXXX。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T07:38:19.613

这就是我使用的：

```
$facebook = new Facebook(array(
    'appId' => FACEBOOK_APP_ID,
    'secret' => FACEBOOK_SECRET,
    'cookie' => true,
    'fileUpload' => true,
));

$user = $facebook->getUser(); // Get the UID of the connected user, or 0 if the Facebook user is not connected.

$facebook->setFileUploadSupport(true);

if($user == 0) {
    // If the user is not connected to your application, redirect the user to authentication page
    /**
     * Get a Login URL for use with redirects. By default, full page redirect is
     * assumed. If you are using the generated URL with a window.open() call in
     * JavaScript, you can pass in display=popup as part of the $params.
     * 
     * The parameters:
     * - redirect_uri: the url to go to after a successful login
     * - scope: comma separated list of requested extended perms
     */

    $login_url = $facebook->getLoginUrl($params = array('redirect_uri' => REDIRECT_URI,'scope' => PERMISSIONS_REQUIRED));

    echo ("<script> top.location.href='".$login_url."'</script>");

} else {
    // if the user is already connected, then fetch access_token and user's information or show some content to logged in user.
    try
    {
        $access_token = $facebook->getAccessToken(); // Gives you current user's access_token

        $user = $facebook->api('/me'); // Gets User's information based on permissions the user has granted to your application.

    } catch(FacebookApiException $e){
        $results = $e->getResult();
        // Print results if you want to debug.
    }

}

$img = './upload/'.$image_path;
    $args = array(
       'message' => 'Some Message',
        'access_token'=>urlencode($access_token),
    );
    $args[basename($img)] = '@'.realpath($img);

    $ch = curl_init();
    $url = 'https://graph.facebook.com/me/photos';
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    $response = json_decode($data,true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T20:59:23.050

```
 $config = array('appId' => $config['App_ID'],'secret' => $config['App_Secret']);

            $facebook = new Facebook($config);

            // sets our access token as the access token when we call 
            // something using the SDK, which we are going to do now.
            $facebook->setAccessToken($access_token); 

            $page_id = "XXXXXXXXXXXXXXX";

            $page_access_token = "";

            $result = $facebook->api("/me/accounts");

            foreach($result["data"] as $page) {
                if($page["id"] == $page_id) {
                    $page_access_token = $page["access_token"];
                    break;
                }
            }

            $facebook->setFileUploadSupport(true);
            $photo = "http://cdn.sstatic.net/stackexchange/img/logos/so/so-logo.png";
            $args = array(
                'access_token'  => $page_access_token,
                'message'       => "message here",
                'url' => $photo,
            );
            $post = $facebook->api("/$page_id/photos","post",$args); 
```

# asp.net-mvc-3 - 动态加载局部视图

> ID：11313444
> 
> 赞同：27
> 
> 时间：2012-07-03T14:46:53.533
> 
> 标签：asp.net-mvc-3, razor

如何动态加载局部视图？

我的意思是我有这个视图，可以说`ListProducts`，在那里我选择了一些带有产品等的下拉列表，并从我想要填充部分视图的那些中选择的值，这将在一个不可见的 div 中，但在`onchange()`事件之后将变得可见并且与来自特定选定项目的数据。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T14:57:19.993

将 jQuery 的[$.load()](http://api.jquery.com/load/)与返回部分视图的控制器操作一起使用。
例如：

### HTML

```
<script type="text/javascript">
$(document).ready(function()
{
    $("#yourselect").onchange(function()
    {
        // Home is your controller, Index is your action name
        $("#yourdiv").load("@Url.Action("Index","Home")", { 'id' : '123' }, 
                                        function (response, status, xhr)
        {
            if (status == "error")
            {
                alert("An error occurred while loading the results.");
            }
        });
    });
});
</script>

<div id="yourdiv">
</div> 
```

### 控制器

```
public virtual ActionResult Index(string id)
{
    var myModel = GetSomeData();
    return Partial(myModel);
} 
```

### 看法

```
@model IEnumerable<YourObjects>

@if (Model == null || Model.Count() == 0)
{
    <p>No results found</p>
}
else
{
    <ul>
    @foreach (YourObjects myobject in Model)
    {
        <li>@myObject.Name</li>
    }
    </ul>
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T02:06:41.203

您可以按照以下步骤执行此操作。在您的控制器中，您返回一个局部视图。

```
 [HttpGet]
    public virtual ActionResult LoadPartialViewDynamically()
    {
        var query = _repository.GetQuery();
        return PartialView("_PartialViewName", query);
    } 
```

然后在视图中你有一个空的 div

```
<div id="partialgoeshere"></div> 
```

然后使用 jQuery 加载局部视图：

```
function LoadPartialView() {

    $.get("@Url.Action(MVC.ControllerName.LoadPartialViewDynamically())", { null }, function (data) {

        $("#partialgoeshere").empty();
        $("#partialgoeshere").html(data);

    });

} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:56:39.707

我相信您可以执行类似[此示例](http://www.jfarrell.net/2008/10/using-jquery-load-with-mvc-framework.html)的操作，只需使用下拉列表中的更改事件即可。这是一个简单的 jQuery 调用，您可以在[jQuery](http://api.jquery.com/load/)网站上找到更多信息。

```
$("#dropdown").change(function() {

    $("#destination").load("/Products/GetProduct", $(this).val(),
       function(result) {
         // do what you need to do

       });
}); 
```

第一个参数是您需要调用以获取详细信息的视图。

第二个参数是选择的值。

*$.load*函数的第三个参数是回调函数，你可以在其中解析结果并做你需要做的事情。

如果您有一个多重选择*$(this).val()*，它将为您提供一个包含所选选项的数组。

如果您只想返回一个 Json 对象，您可能需要遵循[此示例](http://keyvan.io/using-jsonresult-in-asp-net-mvc-ajax)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:52:55.527

您可以使用 ajax 调用操作，然后只需使用 jQuery 将 html 字符串插入您希望它出现的页面：

**服务器端：**

[将部分视图](http://www.networkozone.com/snippets/c-sharp/8/render-partial-view-to-string) 呈现为字符串 将服务器上的部分视图呈现为 html 字符串，当您需要通过 AJAX 将部分视图添加到 ASP.NET MVC 页面时很有用。

**客户端：**

```
$('#yourDdl').change(function()
{
  $.get('/InsertPartialViewUsingAjax', function (data) 
  {
     $('#container').html(data);
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:52:43.860

使用 Ajax :)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子：

```
$.post(window.gRootPath + "Customer/PartialView", { Question: questionId})
.done(function (data) {
    $('#partialDiv').html(data.responceText);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-06T20:50:32.023

下面的文章告诉你如何用最少的 javascript 来做到这一点。基本上，您将 html 而不是 JSON 返回到您的响应对象。

[https://www.simple-talk.com/content/article.aspx?article=2118](https://www.simple-talk.com/content/article.aspx?article=2118)

# python - django formset 中的只读字段

> ID：11313446
> 
> 赞同：8
> 
> 时间：2012-07-03T14:46:56.917
> 
> 标签：python, django, django-forms

我正在使用 modelformset 工厂从模型字段生成表单集。在这里，我只想将查询集对象设为只读，将其他（额外形式）设为非只读字段

我怎样才能做到这一点？

```
 AuthotFormSet = modelformset_factory(Author, extra=2,)
  formset = AuthorFormSet(queryset=Author.objects.all()) 
```

在上面的表单集中，我想将所有查询集对象显示为只读，并将剩余的额外表单显示为非只读字段。我怎样才能做到这一点？

如果我用过，

```
 for form in formset.forms:
          form.fields['weight'].widget.attrs['readonly'] = True 
```

这会将所有表单（包括额外的）字段转换为我不想要的只读字段。而且我正在使用 jquery 插件将表单动态添加到表单集

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T14:59:56.037

我建议指定一个用于模型的表单，在该表单中，您可以设置您想要只读的任何属性。

```
#forms.py
class AuthorForm(forms.ModelForm):
    class Meta:
        model = Author

    def __init__(self, *args, **kwargs):
        super(AuthorForm, self).__init__(*args, **kwargs)
        if self.instance.id:
            self.fields['weight'].widget.attrs['readonly'] = True

#views.py
AuthorFormSet = modelformset_factory(Author, extra=2, form=AuthorForm) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-26T16:40:42.197

只需要检查实例是否有 id，如下所示：
`if self.instance.id`

在将其设置为只读之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-24T12:34:23.697

您也可以放入您的模板：

```
{{form.management_form}}
{% for i in form %}
<p>{{ i.instance.readonly_field }}</p>
{{i.as_p}}
{% endfor %} 
```

而不是将 readonly_field 放在 ModelForm.Meta.fields 中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-03T14:57:34.723

我很久以前就用过python。希望[**这会有所帮助**](https://stackoverflow.com/questions/324477/in-a-django-form-how-to-make-a-field-readonly-or-disabled-so-that-it-cannot-b)。但是，如果您希望使用 jquery 控制字段显示

```
$('.class').attr('readonly', true); 
```

或者

```
$('#id').attr('readonly', true); 
```

# php - 使用虚拟机设置具有可切换 PHP 版本的本地网络服务器

> ID：11313448
> 
> 赞同：0
> 
> 时间：2012-07-03T14:47:18.677
> 
> 标签：php, macos, ubuntu, web-development-server

多年来，我一直使用 XAMPP 进行本地 Web 开发，但我对它的局限性越来越感到沮丧，并想切换到不同的解决方案。

我正在寻找的是可以让我轻松地在不同版本的 PHP 之间切换的东西。我现在想到的计划是通过 Parallels 设置本地版本的 Ubuntu（我似乎记得我只需要桌面版的 Ubuntu 而不是服务器添加来做我想做的事) 然后使用它为 Mac OS X 主机提供一个 Web 服务器，该服务器将在`http://localhost/`.

我想理想的解决方案可以让我在同一个 Ubuntu 虚拟机上运行多个 Web 服务器，即`http://localhost-529/`运行 php 5.2.9`http://localhost-531/`的 Web 服务器、运行 PHP 5.3.1 的 Web 服务器等。

这可能吗？是我概述了继续进行的方法，还是有更好的方法让这个设置工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:59:14.463

you should take a look at [VirtualHost](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

eg it could be possible to do the following:

```
<VirtualHost *:80>
   ServerName www.localhost-529
   ServerAlias localhost-529
   LoadModule php5_module        modules/libphp5.so
   ...
</VirtualHost>
<VirtualHost *:80>
   ServerName www.localhost-4
   ServerAlias localhost-4
   LoadModule php4_module        modules/libphp4.so
   ...
</VirtualHost> 
```

the names localhsot-529, localhost-4 have to entered in the hosts file of your clients

# c++ - 函数外代码

> ID：11313450
> 
> 赞同：6
> 
> 时间：2012-07-03T14:47:26.337
> 
> 标签：c++

我在所有函数之外编写了这段代码：

```
int l, k;
for (l = 1; l <= node; l++)
{
    for (k = 1; k <= node; k++)
    {
        flow[i][j] = capacity[i][j];
        flow[j][i] = 0;
     }
} 
```

它在编译时给了我以下错误：

```
shalini@shalini-desktop:~$ g++ -o output fords.cpp
fords.cpp:63: error: expected unqualified-id before ‘for’
fords.cpp:63: error: expected constructor, destructor, or type conversion before ‘&lt;=’ token
fords.cpp:63: error: expected constructor, destructor, or type conversion before ‘++’ tok 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T14:48:54.467

您不能在函数之外编写代码。您可以在函数之外拥有的唯一东西是声明，例如全局变量声明（通常是一个坏主意），函数声明等。尝试将其放在类似的函数中`int main(){}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:50:08.763

函数组织代码，以便指令指针可以到达代码并执行它。

如果编译器允许您在任何函数之外编写代码，它将永远不会运行。

将代码放在函数体中。

C++ 确实允许代码本身写在函数体之外的一种情况，即宏声明，但[宏](http://www.cplusplus.com/doc/tutorial/preprocessor/)必须在函数体中使用才能运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T09:21:50.607

通过声明一个全局类变量，您可以在执行 main() 之前执行代码。将代码放在类构造函数中。

# perl - Excel::Writer::XLSX：LibreOffice 的问题

> ID：11313451
> 
> 赞同：2
> 
> 时间：2012-07-03T14:47:27.210
> 
> 标签：perl, excel-formula, libreoffice

```
#!/usr/bin/env perl
use warnings;
use strict;

use Excel::Writer::XLSX;

my $workbook = Excel::Writer::XLSX->new( 'perl.xlsx' );
my $worksheet = $workbook->add_worksheet();

$worksheet->write_formula( 'A1', '=SUM(1, 2, 3, 4)' );

$workbook->close(); 
```

到目前为止，这在 LibreOffice 上运行良好。但是今天这不再起作用（中的值`A1`是`0`） - 可能是由于一些 LibreOffice 更新（LibreOffice 3.5 Build-ID: 350m1(Build:402)）。

[Excel::Writer::XLSX](http://search.cpan.org/perldoc?Excel%3A%3AWriter%3A%3AXLSX#write_formula%28_%24row,_%24column,_%24formula,_%24format,_%24value_%29)`occasionally`文档的以下部分是否涉及此类情况？

`If required, it is also possible to specify the calculated value of the formula. This is occasionally necessary when working with non-Excel applications that don't calculate the value of the formula. The calculated $value is added at the end of the argument list`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:24:29.533

Excel::Writer::XLSX 不计算它编写的公式的值。相反，它插入 0 并允许用户在需要时指定值。

这不是一个很好的解决方案，但它是可以做到的最好的，因为计算任意复杂的公式超出了模块的范围。

而且，通常 Excel 和其他第三方应用程序会重新计算公式值以供显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-29T14:40:18.590

这是 LibreOffice 中的一个设置。[这是一个解决方案（从这里](https://stackoverflow.com/a/32206534/1886827)引用）：

> LibreOffice 有意不重新计算较旧的电子表格，因为随着公式在版本之间或不同电子表格程序之间的更新，结果可能会有所不同。转到工具 - 选项 - LibreOffice Calc，在“文件加载时重新计算”下，将“Excel 2007 及更高版本”和“ODF 电子表格（未由 LibreOffice 保存）”这两个下拉列表更改为“始终重新计算”。单击确定，关闭电子表格和 LibreOffice。现在在 LibreOffice 中打开文件，您应该会看到公式已重新计算。
> 
> 还要转到工具 - 单元格内容并确保选择了自动计算。

# javascript - Google Analytics（分析）中未跟踪自定义事件

> ID：11313454
> 
> 赞同：0
> 
> 时间：2012-07-03T14:47:49.990
> 
> 标签：javascript, events, google-analytics, event-tracking

这是我正在使用的脚本，直接从 Google 复制：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-CODE']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    function recordOutboundLink(link, category, action) {
        try {
          var myTracker=_gat._getTrackerByName();
          _gaq.push(['myTracker._trackEvent', category ,  action ]);
          setTimeout('document.location = "' + link.href + '"', 100);
        }catch(err){}
    }
</script> 
```

这是我要跟踪的链接：

```
<a href="http://www.website.com/" target="_blank" class="ad" onClick="recordOutboundLink(this, 'Outbound Links', 'Visited website.com');return false;"></a> 
```

然而，在过去的 3 天里，我的事件报告中没有显示任何内容。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:33:47.643

[Google 的出站链接跟踪示例](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)存在问题

假设您只使用一个跟踪器（在您的代码中看起来像），以下将起作用：

```
function recordOutboundLink(link, category, action) {
    try {
      _gaq.push(['_trackEvent', category ,  action ]);
      setTimeout('document.location = "' + link.href + '"', 100);
    }catch(err){}
} 
```

# javascript - 如何通过 URL 将参数传递给 GAE 上的 JavaScript 代码？

> ID：11313456
> 
> 赞同：1
> 
> 时间：2012-07-03T14:47:56.337
> 
> 标签：javascript, jquery, html, google-app-engine

我想将请求 URL 中的参数传递给 GAE 环境中的 JavaScript 代码。

例如，输入了以下 URL。

[http://example.com:8080/hello?key=abc](http://example.com:8080/hello?key=abc)

hello 页面使用 hello.py 和 hello.tmpl 渲染，分别如下所示。

```
'''hello.py'''
key = self.request.get('key')

{# hello.tmpl #} 
<html>
  <div id="key">{{ key }}</div>
  <script src="hello.js"></script>
</html> 
```

为了在 hello.js 中引用 URL 指定的键，该函数可以编写如下。

```
// hello.js
function() {
  console.log($('#key').text());
}; 
```

它运行良好并且满足了我最初的请求，即参数从 URL 传播到 JavaScript 代码。

但是，我觉得这不是一个聪明的方法。我使用 div 标签作为 URL 和 JavaScript 代码之间的缓冲区。有谁知道更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:53:53.983

您可以使用数据扩展而不是添加 div：

```
<body data-key='{{key}}'>
  <...>
</body>

// hello.js
function() {
  console.log($('body').data('key'));
}; 
```

# c# - 使用 WCF 数据服务保存对象及其相关对象

> ID：11313461
> 
> 赞同：2
> 
> 时间：2012-07-03T14:48:12.127
> 
> 标签：c#, entity-framework, wcf-data-services

我正在使用 WCF 数据服务，它适用于大多数事情，但我无法弄清楚如何更新具有相关实体集合的实体。例如，在下面的代码中，我有一个具有相关部门的 Batch 对象。在我的数据库中，这表示为三个表 - Batches、Departments 和 Batches_Departments。EF 将此作为具有 Departments 导航属性的 Batch 对象公开给我。

在下面列出的代码中，创建了 Batch 对象并填充了 Departments 集合，但是当我调用 SaveChanges 时，仅在数据库中创建了 Batch 对象。部门被忽略。如果我在 SaveChanges 行上设置断点，我可以验证 Departments 集合是否已填充。

```
private void Save()
{
  var batch = new DataService.Batch() { Description = txtDescription.Text, Filename = txtFilename.Text };

  foreach (var department in lstDepartments.CheckedItems)
  {
    var dept = _ctx.Departments
      .Select(d => d)
      .Where(d => d.DepartmentID == ((DataService.Department)department).DepartmentID)
      .First();

    batch.Departments.Add(dept);
  }

  _ctx.AddToBatches(batch);
  _ctx.SaveChanges();
} 
```

我确定我遗漏了一些明显的东西，但我似乎找不到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:41:21.943

这是当前生成的代码的一个限制。您还需要将以下代码行添加到您的程序中：

```
context.AddLink(batch, "Departments", dept); 
```

如果您愿意，还可以挂钩到批处理的 PropertyChanged 事件。

编辑：我也找到了另一个选择。您可以执行以下操作，而不是`AddLink`：

```
private void Save()
{
  var batches = new DataServiceCollection<Batch>(_ctx);
  var batch = new DataService.Batch() { Description = txtDescription.Text, Filename = txtFilename.Text };
  batches.Add(batch);

  foreach (var department in lstDepartments.CheckedItems)
  {
    var dept = _ctx.Departments
      .Select(d => d)
      .Where(d => d.DepartmentID == ((DataService.Department)department).DepartmentID)
      .First();

    batch.Departments.Add(dept);
  }

  // _ctx.AddToBatches(batch);
  _ctx.SaveChanges();
} 
```

# ruby-on-rails - Rails 方式用户对话

> ID：11313465
> 
> 赞同：0
> 
> 时间：2012-07-03T14:48:28.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我需要使用用户消息（对话框）构建应用程序。我已经通过这种方式解决了这个问题：

**应用程序/模型/conversation.rb**

```
class Conversation < ActiveRecord::Base
  belongs_to :user
  belongs_to :interlocutor
  has_many :messages
end 
```

**应用程序/模型/message.rb**

```
class Message < ActiveRecord::Base
  belongs_to :conversation
  belongs_to :user
  attr_accessible :message
end 
```

**应用程序/模型/user.rb**

```
class User < ActiveRecord::Base
  ...
  def conversations
    Conversation.uniq.joins(:messages)
      .where("conversations.user_id = ?", self.id)
      .where("conversations.interlocutor_id = ?", self.id)
      .order("messages.created_at DESC")
  end
end 
```

我对**对话方法**感到困惑。这就像 PHP 方式 - 没有灵活性。

它可以通过rails方式重写吗？也许它可以是AR关系？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:32:06.277

考虑确定查询[范围。](http://ablogaboutcode.com/2011/02/19/scopes-in-rails-3/ "范围")

在 Rails 3 中，这看起来像

```
class Conversation < ActiveRecord::Base
  scope :involving, lambda do |user|
    joins(:messages)
      .where("conversations.user_id = ?", user.id)
      .where("conversations.interlocutor_id = ?", user.id)
      .order("messages.created_at DESC")
  end
end 
```

像这样使用它：

```
Conversation.involving(me).all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:57:05.173

为什么 a`User`没有很多`Conversations`？这对我来说最有意义...

```
class User < ActiveRecord::Base
  ...
  has_many :conversations
end 
```

此外，您*已经说过*a `Conversation` `belongs_to`a `User`！你没有完成这段感情的另一半...

# jpa - JPA 和 Play 框架：EntityManager 没有名为更新的持久性提供程序

> ID：11313466
> 
> 赞同：3
> 
> 时间：2012-07-03T14:48:32.880
> 
> 标签：jpa, playframework, playframework-2.0

使用播放！框架 2.0.2，当我将 java 项目中的几个项目添加到我的 H2 测试数据库时，我在 ITEM 表中只看到一个项目。单个项目是我坚持的最后一个条目。我认为这是由于每次提交时都会重新创建数据库。因此，我想在我的 application.conf 文件中添加 JPA.ddl=update 属性。但这只是因以下错误而中断。什么

这是我的代码（在 Item.save() 方法中）：

```
package models;

import java.math.BigDecimal;

import javax.persistence.Entity;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Persistence;

@Entity
public class Item {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public int id;
    public String name;
    public String dev;
    public String type;
    public int quantity;
    public BigDecimal unitPrice;

    public Item() {}

    public Item(String name, String dev, String type, int quantity,
            BigDecimal unitPrice) {
        super();
        this.name = name;
        this.dev = dev;
        this.type = type;
        this.quantity = quantity;
        this.unitPrice = unitPrice;
    }

    /**
     * Insert this new computer.
     */
    public void save() {
        //this.id = id;
        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("defaultPersistenceUnit");
        EntityManager entityManager = entityManagerFactory.createEntityManager();
        entityManager.getTransaction().begin();
        entityManager.persist(this);        
        entityManager.getTransaction().commit();
        entityManager.close();
    }
} 
```

这是错误消息

```
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named update
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69) ~[hibernate-jpa-2.0-api-1.0.1.Final.jar:1.0.1.
Final]
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47) ~[hibernate-jpa-2.0-api-1.0.1.Final.jar:1.0.1.
Final]
        at play.db.jpa.JPAPlugin.onStart(JPAPlugin.java:35) ~[play_2.9.1.jar:2.0.2]
        at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.2]
        at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.2]
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:06:33.827

我相信您需要将 persistence.xml 文件包含在您的 /conf/META-INF/ 目录中，并从那里定义一个持久性单元。我相信这是因为您使用的是 Hibernate 对吗？

您的外观示例

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">

    <persistence-unit name="update">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.connection.url" value="jdbc:h2:mem:events"/>
        </properties>
    </persistence-unit>

</persistence> 
```

在您的标签中，您还需要包含任何`<jar-file>`或`<class>`您将要使用的标签。

# c++ - 未解析的外部符号 receiveThread（这是 _beginthread 的入口点）

> ID：11313471
> 
> 赞同：0
> 
> 时间：2012-07-03T14:48:43.437
> 
> 标签：c++, sockets, udp

我正在尝试让 UDP 连接为我正在制作的游戏工作，套接字的输入通过第二个线程读取，因此游戏可以在等待消息时继续运行。我让它在一个单独的项目中工作，但是当将它移植到我的游戏代码时，我得到一个未解决的外部符号错误：

> LNK2019：未解析的外部符号“void __cdecl receiveThread(void *)”(?receiveThread@@YAXPAX@Z) 在函数“public: bool __thiscall Network::setupServerUDP(void)”(?setupServerUDP@Network@@QAE_NXZ)) 中引用。

我用谷歌搜索了这个，每个人都说运行时库应该设置为多线程，我这样做了（在 MVS 2010 中，我认为甚至不可能将其设置为单线程）但它不能解决错误. 我敢肯定这只是在某个地方设置了错误的一些愚蠢的选项。但我就是想不出它是什么。

我已包含 ws2tcpip.h 并已链接到正确的库：#pragma comment(lib, "Ws2_32.lib")。

我的测试项目和游戏项目之间的唯一区别是测试项目是控制台应用程序，另一个是 Windows 应用程序，但我不明白为什么会有任何问题。想法？

谢谢你的帮助！

干杯，

格言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:09:32.473

未解决的函数不是`_beginthread`，而是`receiveThread`。那是你的函数——你作为参数提供给`_beginthread`. *您是否使用正确的调用约定*编写了该函数？真的`cdecl`吗？如果您将其声明为 cdecl 但在没有显式调用约定的情况下实现，则会导致像这样的链接错误。例如，此代码会导致链接错误：

```
extern "C" { void receiveThread(void*); } //There's a cdecl function somewhere

//...

_beginthread(receiveThread, 0, 0); //Let's refer to it

//...

void receiveThread(void *p) //But this is not it! It's stdcall.
{
     //Do something
} 
```

要修复，请确保您的实现`receiveThread`使用 cdecl 约定或声明为`extern "C"`.

作为记录，`_beginthreadex`需要一个 stdcall 函数，而不是 cdecl。使用`_beginthreadex`，您不必担心约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:10:32.070

该错误告诉您链接器找不到`receiveThread`我猜想在 ws2tcpip.h 中声明的函数的实现

如果`Ws2_32.lib`包含实现，请尝试将其添加到链接器 -> 附加依赖项 -> 项目属性菜单下的输入，假设您使用的是 Visual Studio。

# android - Android 中的 Facebook 样式按钮 (selector.xml)

> ID：11313472
> 
> 赞同：0
> 
> 时间：2012-07-03T14:48:43.657
> 
> 标签：android, facebook, layout, button

现在，我正在我的应用程序中编写 OAuth/Facebook 登录，我想添加一个带有 Facebook 颜色和字体样式的原生按钮（不是带有某种图像作为 src/bg 的 ImageButton）。有谁知道设置组合来创建一个看起来像 facebook 样式的**选择器xml 文件？**我知道从我的角度来说这听起来很懒惰......但我厌倦了通过经验反复试验来尝试达到正确的设置。所以，我希望有人已经知道这个设置。它应该类似于下面的图像：

![在此处输入图像描述](../Images/b2a1d93e6b53ffc2585955cf5f99fb26.png)

提前致谢！

# php - 更新数据库中的谷歌地图 lat/lng

> ID：11313474
> 
> 赞同：0
> 
> 时间：2012-07-03T14:48:55.443
> 
> 标签：php, mysql, google-maps, latitude-longitude

我得到了以下代码，但它似乎没有得到正确的纬度和经度值。它给了我 0,000000 作为回报。当我检查地址时，它会在 json 中为我提供正确的值。

```
mysql_select_db($dbname);

$result = mysql_query("SELECT id, street, postalcode, place, lat, lng FROM stores") or die(mysql_error());  

while($row = mysql_fetch_array( $result )){

$addressbar = $row['street']." ".$row['postalcode']." ".$row['place'];

$address = urlencode($addressbar);

$json = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=$address&sensor=true");
$decoded = json_decode($json);

$lat = $decoded->results[0]->geometry->location->lat;
$lng = $decoded->results[0]->geometry->location->lng;

mysql_query("UPDATE stores SET lat='$lat', lng='$lng' WHERE id=".$row['id']."") or die(mysql_error());
printf( $addressbar."%d\n", mysql_affected_rows());
echo "<br/><br/>";
} 
```

我似乎找不到我做错了什么。我希望任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:58:51.937

一些东西！要调试，我会执行以下操作：

1.  确保使用严格；& 使用警告；位于代码的顶部（您可能这样做了，但它没有显示在代码段中）。
2.  我会打印出 $json，如果您从地图 api 中返回 0，您可能会在 $json 文本中看到错误消息。如果您在 $json 中获取 lat/lng，则在 mysql 查询中添加更多调试或在查询进入 exec 函数之前打印出查询。例如添加更多调试：

    ```
    DBI->connect( $dsn, $username, $password, { 'PrintError' => 1 } ) 
    ```

3.  如果它不在 $json 中，那么我将手动转到地图 api URL 以查看我返回的内容

4.  我猜你是从上面的 URL 中删除了它（我没有看到 &key=AAABB .....），但请仔细检查你的地图 API 密钥是否正确
5.  我确定您相信来自 google 的数据，但请养成在进行任何查询时使用占位符的习惯。占位符 (?) 不是将变量直接放在 SQL 代码中，而是保护您免受 SQL 注入。前任：

    ```
    $mysqlquery = $dbh->prepare( 'UPDATE stores SET lat=?, lng=? WHERE id=?' );
    $mysqlquery->execute( $lat, $lng, $row['id'] ); 
    ```

6.  有时，当我调试打印出我将要发送到 API 的内容时，它会帮助我。不要将 URL 或查询直接发送到函数，而是将其放入变量中，打印出该变量，然后将变量发送到函数/api。您可能会假设它是正确的，但是如果您看到字符串，一些小问题会阻止它工作，这是显而易见的。

希望这对大家有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:29:52.807

谷歌查询码和JSON解码正确；我自己尝试过，如果地址检查（我尝试过的那个），它会正确发出 lat 和 lng。

尝试打印查询并检查从客户端手动执行它。

我想到的唯一可能性是：

*   你没有表的 UPDATE 权限（你应该得到一个错误）
*   也许“商店”是一个不可更新的视图（应该抛出错误 1288）
*   "$lat" 和/或 "$lng" 的值不是数字，而是字符串，甚至是空字符串。这不会给您任何错误，并且值为 0.00000。

*我没有*想到的其他可能性：

*   由于防火墙、网络问题或 OVER_QUERY_LIMIT，Google 无法正确回答。
*   地址的UTF编码问题

我也投票赞成艾伦霍尔曼的建议。

# amazon-elastic-beanstalk - 阻止对 Amazon 的 Elastic Beanstalk 的服务器的 HTTP 访问

> ID：11313475
> 
> 赞同：5
> 
> 时间：2012-07-03T14:48:56.180
> 
> 标签：amazon-elastic-beanstalk

我们有一个在亚马逊的 Beanstalk 上运行的系统。我们希望将对服务器的访问限制为仅 HTTPS。在环境设置上阻止 HTTP 时 - 它阻止通过 beanstalk DNS 访问。但是，如果有人知道任何服务器的公共 IP（或名称） - 他可以直接通过 HTTP 访问它们。似乎LB将请求转发到端口80，因此我们无法更改安全组并删除端口80。有没有简单的方法，将HTTP访问限制为仅来自LB？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:27:37.447

您应该能够通过[EC2 Security Groups](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)执行此操作，这是一个 Elastic Beanstalk 环境属性。

默认情况下，这允许从任何 IP 地址连接到端口 80，但您可以删除该规则或将其替换为您自己的 IP 地址（用于测试目的）。

如果做不到这一点，您可以在应用程序级别将所有 HTTP 流量重新路由到 HTTPS，或者只是测试 CGI 属性 *server_port_secure* 并拒绝回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T18:27:03.443

是的，您需要打开 http/80 才能进行健康检查。您可以选择将所有其他请求（健康检查 URL 除外）重定向到使用 https - 这样虽然端口是打开的，但您“不会以不安全的方式提供任何数据”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-10T20:14:03.543

你至少有两个选择：

1 - 设置仅允许从负载均衡器访问端口 80 的安全组策略。重要的！！！不要在实例的安全组中使用负载均衡器 IP。请改用负载均衡器安全组 ID。

2 - 从实例中删除公共 IP。如果您的所有 EC2 实例都具有私有 IP 并且 ELB 具有公共 IP，那么您应该会很好。

# iphone - UIPageViewControllerSpineLocationMid one doublepage viewcontroller

> ID：11313476
> 
> 赞同：1
> 
> 时间：2012-07-03T14:48:56.710
> 
> 标签：iphone, xcode, ipad, ios5, uipageviewcontroller

我正在开发一个从 xcode 模板开始的基于页面的应用程序。我的问题是我只想为它提供一个 DataViewController 双页大小，中间有脊椎...（文档说我必须提供 2 个 DataViewControllers）

我需要这个是因为我的脊椎上有按钮...

有可能吗？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:44:49.037

如果您可以覆盖`UIPageViewControllerSpineLocationMid`as 默认情况下的实现，则可能如下：

```
enum {
    UIPageViewControllerSpineLocationMid = 2,  // Requires two view controllers.
};
typedef NSInteger UIPageViewControllerSpineLocation; // Only pertains to 'UIPageViewControllerTransitionStylePageCurl'. 
```

并使它只需要一个视图控制器

PS 个人会选择 Flipboard 风格的 3rd 方库

# c - 别名的语法

> ID：11313477
> 
> 赞同：0
> 
> 时间：2012-07-03T14:49:04.413
> 
> 标签：c

我正在查看定义为的[LPSTR](http://msdn.microsoft.com/en-us/library/cc230353%28v=prot.10%29.aspx)

`typedef char* PSTR, *LPSTR;`

文档说 PSTR 是 LPSTR 的别名。取消引用运算符缺失的事实是否足以告诉我它是别名？别名是如何声明的？换句话说，如果我将其更改为

`typedef char* PSTR, PSTR2, *LPSTR;`

我现在有两个别名吗？如果我添加另一个取消引用的变量怎么办？

`typedef char* PSTR, *LPSTR, *LPSTR2;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:52:09.447

别名的意思是

```
typedef char* PSTR, *LPSTR; 
```

相当于

```
typedef char *PSTR;
typedef char *LPSTR; 
```

所以它们是完全相同的类型：`char*`. （您必须在第一种形式中键入两次的事实`*`是 C 声明语法的一个怪癖。）

顺便说一句，这些不是“取消引用的变量”。它们是指针类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:52:50.190

什么都没有。星号周围的空格无关紧要。

这个：

```
typedef char* PSTR, *LPSTR; 
```

是相同的

```
typedef char *PSTR, *LPSTR; 
```

这又与拥有相同

```
typedef char *PSTR;
typedef char *LPSTR; 
```

两者都为类型“pointer to `char`”定义了类型别名，但它们之间没有联系，它们都被声明为相同的`typedef`事实并不重要，主要是在你想要变体时完成（有和没有指针）像这样：

```
typedef struct {
  int x, y;
} Point, *PointPtr; 
```

*顺便说一句，我真的*不鼓励这种做法（就像问题本身的代码一样），因为“隐藏星号”通常是个坏主意。那个星号*很重要*，让它出现而不是隐藏在类型中会使代码更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:54:08.023

```
typedef char* PSTR, PSTR2, *LPSTR; 
```

PSTR 是一个指针，LPSTR 是一个指针，但 PSTR2 是一个字符。我会用不同的方式写它：

```
typedef char *PSTR, PSTR2, *LPSTR; 
```

显示 * 真正关联的位置。

# c# - 如何以编程方式将 Gridview 添加到 UpdatePanel

> ID：11313482
> 
> 赞同：6
> 
> 时间：2012-07-03T14:49:17.760
> 
> 标签：c#, asp.net, gridview, updatepanel

我不知道如何以编程方式将`GridView`带有按钮的`UpdatePanel`.

我可以使用简单的控件（例如按钮和标签）来做到这一点，但是当我尝试添加`GridView`带有按钮的按钮时，会出现完整的`Postback()`情况。

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">

protected override void OnInit(EventArgs e)
{
UpdatePanel up1 = new UpdatePanel();
    up1.ID = "UpdatePanel1";

    Button button1 = new Button();
    button1.ID = "Button1";
    button1.Text = "Submit";
    button1.Click += new EventHandler(Button_Click);

    Label label1 = new Label();
    label1.ID = "Label1";
    label1.Text = "A full page postback occurred.";

    GridView gv1 = new GridView();
    //Where the xml gets bonded to the data grind
    XmlDataSource xds = new XmlDataSource();
    xds.Data = xml;
    xds.DataBind();
    xds.EnableCaching = false;

    gv1.DataSource = xds;
    createButton(gv1, up1);
    gv1.RowCommand += new GridViewCommandEventHandler(CustomersGridView_RowCommand);
    gv1.DataBind();

    up1.ChildrenAsTriggers = true;

    up1.ContentTemplateContainer.Controls.Add(button1);
    up1.ContentTemplateContainer.Controls.Add(label1);

    up1.ContentTemplateContainer.Controls.Add(gv1);

    Page.Form.Controls.Add(up1);
}

protected void Page_Load(object sender, EventArgs e)
{

}
public void CustomersGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "buttonClicked")
    {
        int index = Convert.ToInt32(e.CommandArgument);

    }
}

void createButton(GridView g)
{
    ButtonField tea = new ButtonField();
    tea.ButtonType = ButtonType.Image;
    tea.ImageUrl = "~/checkdailyinventory.bmp";
    tea.CommandName = "buttonClicked";
    tea.HeaderText = "space";
    g.Columns.Add(tea);
}

protected void Button_Click(object sender, EventArgs e)
{
    ((Label)Page.FindControl("Label1")).Text = "Panel refreshed at " +
        DateTime.Now.ToString();
}

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>UpdatePanel Constructor Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button2" runat="server" Text="Button" />
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
    </div>
    </form>
</body>
</html> 
```

那么如何以编程方式将带有按钮的 gridview 添加到 an而不会在单击时`UpdatePanel`导致完整？`PostBack()``GridView`

编辑：我尝试过的其他事情

```
 void gv1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    AsyncPostBackTrigger t = new AsyncPostBackTrigger();
    t.ControlID = e.Row.Cells[0].ClientID;
    t.EventName = "blah";
    up1.Triggers.Add(t);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:26:24.470

那么根据：

> 而且我不介意在设计时创建更新面板。我只需要能够以编程方式添加东西（比如包含包含按钮的网格视图的表），然后能够进行部分回发

基本上我用你的代码做了一些小的改动：

*   从事件中删除绑定并在事件`Init`中执行它`Load`

*   `UpdatePanel`是在设计时使用嵌套面板创建的，您只需将动态控件添加到该面板

此代码将执行此操作（它适用于我的环境）：

### ASPX

```
 <asp:ScriptManager runat="server" />
    <asp:UpdatePanel runat="server">
        <ContentTemplate>
            <asp:Panel runat="server" ID="myPanel">
            </asp:Panel>
            <br />
            <asp:Label runat="server" ID="lblMessage"></asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

### 背后的代码

```
 protected void Page_Init(object sender, EventArgs e)
    {
        Button button1 = new Button();
        button1.ID = "Button1";
        button1.Text = "Submit";
        button1.Click += new EventHandler(Button_Click);

        Label label1 = new Label();
        label1.ID = "Label1";
        label1.Text = "A full page postback occurred.";

        var s1 = Builder<Product>.CreateListOfSize(15).Build();
        GridView gv1 = new GridView();
        gv1.DataSource = s1;
        createButton(gv1);
        gv1.RowCommand += new GridViewCommandEventHandler(CustomersGridView_RowCommand);

        this.myPanel.Controls.Add(button1);
        this.myPanel.Controls.Add(label1);
        this.myPanel.Controls.Add(gv1);
    }

    void createButton(GridView g)
    {
        ButtonField tea = new ButtonField();
        tea.ButtonType = ButtonType.Image;
        tea.ImageUrl = "~/checkdailyinventory.bmp";
        tea.CommandName = "buttonClicked";
        tea.HeaderText = "space";
        g.Columns.Add(tea);
    }

    protected void Button_Click(object sender, EventArgs e)
    {
        ((Label)Page.FindControl("Label1")).Text = "Panel refreshed at " +
            DateTime.Now.ToString();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        this.DataBind();
    }

    public void CustomersGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "buttonClicked")
        {
            //int index = Convert.ToInt32(e.CommandArgument);

            this.lblMessage.Text = DateTime.Now.ToString();
        }
    } 
```

### 输出

![在此处输入图像描述](../Images/5284d98dc09b4c3e54e2bf204debbef5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:41:19.330

难道你不能在设计时把 GridView 放在那里，然后通过设置隐藏它`Visible=false`吗？

如果您不知道需要重复多少个网格视图，则可以将 GridView 包装在 ListView 中。这里引入这个概念：

*   [http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html](http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html)

这可能不是一个完美的解决方案，我只是想我会提供它，因为我假设你到目前为止已经遇到了一个赏金。

# html - CSS：如何在标题（h1）周围换行？

> ID：11313484
> 
> 赞同：-3
> 
> 时间：2012-07-03T14:49:21.463
> 
> 标签：html, css, word-wrap

我有一个设计，页面的标题在`h1`右边，文本在`p`左边，在同一个`div`. 文本应该环绕标题（所以当它与标题“碰撞”时会中断，但在它下面，它应该使用 中的所有空间`div`）。

它与图像的工作方式不同，在这种情况下，您只需`float: left;`将`p`和`float: right;`用于图像，在这种情况下，`h1`.

我可以`h1`将`p`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:18:44.540

只是不要`float:left`用于`<p>`，而仅`float:right`用于`<h1>`

[这里](http://jsfiddle.net/CFnsv/)有一个简单的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:05:25.760

艾丽莎是对的，

您可以通过在标题中创建多个元素并将它们全部浮动来更进一步......

像这样：http: [//jsfiddle.net/jaap/CFnsv/74/](http://jsfiddle.net/jaap/CFnsv/74/)

HTML：

```
<div class="container">
    <h1>
        <span>&ldquo;I love</span> 
        <span>deadlines.</span>
        <span>I love the</span>
        <span>whooshing</span>
        <span>noise they</span>
        <span>make ad</span>
        <span>they go</span>
        <span>by.&rdquo;</span>
    </h1>
    <p>
        Lorem ibh tortor, vulpu...
    </p>
    <p>
        Lorem ipsum dolor s... 
    </p>
</div> 
```

CSS：

```
.container p{
    margin-bottom: 20px;
}
h1{
    font-size:44px;
    font-family: 'Open Sans', sans-serif;
    line-height:36px;
    text-transform: uppercase;
    color: #DAAB2B;
}
h1 span{
    float:right;
    text-align: right;
    clear:both;
    margin-left: 40px;
} 
```

![浮动多个元素的预览](../Images/df6356f152202e92e81eef4685e06ba7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:56:29.347

您可以创建一个包含另外两个 div 的外部 div，一个向左浮动，另一个向右浮动。左边是段落，右边是H1。如果为右边的div指定宽度，左边的div会自动占据所有空间，直到遇到右边的div。

# java - 使用 CardDAV 从 Java 应用程序共享通讯录

> ID：11313485
> 
> 赞同：7
> 
> 时间：2012-07-03T14:49:22.483
> 
> 标签：java, android, iphone, vcf-vcard

我想与我的同事分享一个由我们的应用程序创建并使用/管理的通讯录。我们想通过 与我们的手机分享联系人`CardDAV protocol`。

是否有任何文档库可以实现并帮助我们从**iPhone/Android 电话簿**`CardDAV protocol`访问这些数据？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T17:52:06.413

在服务器端，你可以看看[Milton](http://milton.io/guide/m2/reference/index.html)；对于客户端，您必须自己完成更多繁重的工作，但[Bedeworks](https://www.bedework.org/svn/davutil/trunk/davio/src/org/bedework/http/)看起来像是一个通用 DAV 客户端的良好开端，可用于 Java 中的 CardDAV 访问。对于 iOS，您正在查看类似[http://sabre.io/dav/clients/ios/的内容](http://sabre.io/dav/clients/ios/)**

# vector - 方法 vector::clear 不清除二维向量

> ID：11313488
> 
> 赞同：0
> 
> 时间：2012-07-03T14:49:28.350
> 
> 标签：vector

非常感谢您的回答。

让我考虑检查向量内容的原因是，即使在我覆盖它之后，仍然存在相同的（奇怪的）值。我的目的是迭代生成一些随机变量并将它们放入二维向量中。我给你我的代码，也许我做错了什么：

```
while (nbre_TTI_tempo != 0 ) 

{
   srand(time(NULL)) ;  

 while (nbre_UE_tempo != 0 )
{ 
  vect.clear() ; 

  nbre_PRB_tempo = nbre_PRB ; 

while (nbre_PRB_tempo != 0) 
 {  

 value = rand() % 15 + 1 ;  // generating random variables between 1 and 15

vect.push_back(value) ; 

  nbre_PRB_tempo -- ; 

   }

 All_CQI.push_back(vect) ; 

 nbre_UE_tempo -- ; 

}

// Do business 

All_CQI.clear();

} .// end while 
```

在第一轮，一切顺利，但在第二轮，这是我在使用“clear”方法后在向量中找到的：

158429184 14 15 158429264 10 9 158429440 5 1

当我尝试覆盖它时，我发现： 158429184 14 15 158429264 10 9 158429440 5 1

与使用“push_back”方法之前的值相同。你认为我在我的代码中做错了什么吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:12:11.363

出于您的目的，如果 empty() 返回 true，您应该相信它是空的并且不应该检查单个元素。因此访问空向量的内容是非法的，并且可能导致内存访问错误。

您找到值的原因是因为实际的内存位置不会立即被覆盖——它们只会被标记为无效。在为其他对象分配相同的内存之前，数据可能会保持原样 - 但无法确定 - 实现留给编译器。

看起来您正在使用数组 operator[] 来访问元素。为了更安全，请使用迭代器或 .at() 方法来访问元素。这两种方法都执行边界检查，并且不会让您超出最后一个有效元素

# python - 如何使用 sqlalchemy IntegrityError 查找违规属性

> ID：11313490
> 
> 赞同：14
> 
> 时间：2012-07-03T14:49:29.770
> 
> 标签：python, sqlalchemy, integrity

我有一个非常简单的 SqlAlchemy 模型

```
class User(Base):
    """ The SQLAlchemy declarative model class for a User object. """
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    phone = Column(String, unique=True)
    email = Column(String, unique=True) 
```

插入新用户时，`IntegrityError`如果电子邮件或电话重复，则可能发生。

有什么方法可以检测哪些列违反了完整性错误？或者是进行单独查询以查看或存在值的唯一方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-08T20:39:39.103

您可以使用以下方式获取底层代码、消息，并相应地格式化消息。

```
except exc.IntegrityError as e:
       errorInfo = e.orig.args
       print(errorInfo[0])  #This will give you error code
       print(errorInfo[1])  #This will give you error message 
```

顺便说一句，您必须从 sqlalchemy 导入 exc：`from sqlalchemy import exc` 如果您需要任何其他信息，请告诉我。我可以试试看。

有关 sqlalchemy exc 的更多信息，请查找代码：[https ://github.com/zzzeek/sqlalchemy/blob/master/lib/sqlalchemy/exc.py](https://github.com/zzzeek/sqlalchemy/blob/master/lib/sqlalchemy/exc.py)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-15T15:42:38.683

不幸的是，没有干净的方法可以做到这一点，但我在 IntegrityError 和[parse](https://pypi.org/project/parse/)模块上使用了 orig 属性：

```
try:
    db.session.add(user)
    db.session.commit()
except IntegrityError, e:
    dupe_field = parse('duplicate key value violates unique constraint "{constraint}"\nDETAIL:  Key ({field})=({input}) already exists.\n', str(e.orig))["field"] 
```

这可能不是 IntegrityError 抛出的唯一错误字符串，它可能会在未来对 SQLAlchemy 的更新中发生变化，因此它并不理想

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-24T17:25:42.623

```
try:
    ....
except IntegrityError as e:
    print(e.orig.diag.message_detail) 
```

这对我有用。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-02T10:26:01.420

我通常为此使用try catch。

```
try:
    session.commit()
catch:   
str(sys.exc_info()[0]) + " \nDESCRIPTION:  "+ str(sys.exc_info()[1]) + "\n" + str(sys.exc_info()[2]) 
```

当我遇到完整性错误时，我会收到以下消息，我会跳过该特定事务并继续其余事务

```
DESCRIPTION:  (IntegrityError) duplicate key value violates unique constraint "test_code"
DETAIL:  Key (test_code)=(5342) already exists.
'INSERT INTO test_table (pk, test_code, test_name) VALUES (%(pk)s, %(test_code)s, %(test_name)s)' { 'pk': '1', 'test_code': '5342', 'test_name': 'test' } 
```

# c# - Lync：成功调用 BeginStart 后，AVModality.VideoChannel 的 VideoWindows 为空（COMException HRESULT：0x80029C4A TYPE_E_CANTLOADLIBRARY）

> ID：11313507
> 
> 赞同：1
> 
> 时间：2012-07-03T14:50:01.090
> 
> 标签：c#, video, lync, lync-2010, comexception

我们目前正在尝试将 Lync 通信 (Lync SDK 2010) 合并到我们的应用程序中，但我们遇到了's的`VideoWindows`( `CaptureVideoWindow`, `RenderVideoWindow`) 的问题：它们始终为空，即使在成功调用. 连接肯定建立了。我们可以谈。我们自己的视频显示在远程 Lync 客户端中。是。从到到。`AVModality``VideoChannel``BeginStart``AVModalityState``Connected``VideoChannelState``Connecting``Receive``Send`

我们何时以及如何尝试访问它们并不重要：直接在 之后`BeginStart`，在`AsyncCallback`中`BeginStart`，响应各种状态变化或响应外部触发（用户点击事件）；在主/UI线程或事件/回调线程中。两个视频窗口始终为空。

在示例应用程序“%PROGRAMFILES%\Microsoft Lync\SDK\Samples\AudioVideoConversation”中，一切都按预期工作：一旦`BeginStart`完成，我们就可以访问非空视频窗口。在我们的小型独立原型项目中，它也可以工作。但在我们的实际应用中，它没有。

我们已经仔细检查了所有内容，对于可能导致此问题的原因我们真的已经没有想法了。

任何想法，任何提示？我们应该注意什么？

[（链接到相应的 MSDN 论坛主题）](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/8817ebd3-4fb7-42e4-9283-5bf947891233 "MSDN 论坛主题")

**更新**（2012 年 7 月 4 日，欧洲中部时间 15:46）：

当我们查看 VideoChannel 的成员时，我们发现“Microsoft.Office.Uc”内部发生了 COMException：加载 DLL 时出错，HRESULT：0x80029C4A (TYPE_E_CANTLOADLIBRARY)。[附加截图](https://i.stack.imgur.com/EYIbO.png "附上截图")中的更多细节。

![显示异常的调试会话的屏幕截图](../Images/d439e642af96a31b9d7d217d28ab106a.png "附上截图")

我们对此错误进行了一些研究，但没有发现任何对我们有用的东西。任何想法是什么导致异常？

**更新**（2012 年 7 月 9 日，欧洲中部时间 16:43）：

我们做了一些进一步的测试......

[我们的软件由一个主应用程序和许多通过MEF](http://en.wikipedia.org/wiki/Managed_Extensibility_Framework)加载的类似插件的“应用程序”组成。我们创建了一个进行视频通话的最小测试应用程序：视频窗口不起作用（如预期的那样）。但是，当我们采用相同的代码并在我们的架构之外创建一个单独的解决方案时，它确实起作用了。所以，这是环境的问题，而不是代码的问题。

起初，我们怀疑 MEF 可能是问题所在。因此，我们将 lync 代码侵入到我们的主应用程序中 - 绕过了整个应用程序架构。还是行不通。

然后我们一点一点地切掉我们的整个系统，直到我们最终达到它确实可以工作的地步。经过几次错误的跟踪，我们终于找到了罪魁祸首...... [Quartz.NET](http://quartznet.sourceforge.net/)！

出于某种奇怪的原因，仅仅存在对 Quartz.dll v.1.0.3.3 的程序集引用，即使没有一行 Quartz 代码，也会导致视频窗口无法工作。难以置信，但它是 100% 可重现的：如果我们采用前面提到的测试解决方案，除了添加参考之外什么都不做，它就会停止工作。

知道这样的事情怎么可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:50:02.910

我们解决了！有点儿。对 Quartz.NET DLL 的引用以某种方式导致了该问题。更新问题中的更多详细信息。

目前，我们已经删除了使用 Quartz 的组件。我们目前不需要它。

但我仍然有兴趣进一步输入一个参考如何导致这样的问题。

# php - 单击我的 joomla 网站中的模块标题以指向一篇文章

> ID：11313513
> 
> 赞同：0
> 
> 时间：2012-07-03T14:50:21.823
> 
> 标签：php, javascript, html, joomla2.5

我正在使用这个暂停滚动新闻模块，它是从 joomla 扩展中获得的。

> [http://kksou.com/php-gtk2/Joomla/Pausing-up-down-Scroller-module.php](http://kksou.com/php-gtk2/Joomla/Pausing-up-down-Scroller-module.php)

它还有一个要安装的相关插件，当模块和插件都安装并启用时，它可以工作。是的，这适用于我的网站！

但我的要求是当我点击模块标题时它必须指向另一篇文章，不幸的是这个模块没有这个选项。我需要玩代码。请指导我在此模块中编码的步骤。如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:51:23.210

这是一个内容插件。

您可以编辑文件夹中的代码：your_joomla_site\plugins\content\pausing_up_down_scroller

# git - How can I completely clear just one branch in a git repo?

> ID：11313514
> 
> 赞同：2
> 
> 时间：2012-07-03T14:50:45.810
> 
> 标签：git

I have a prototype version of an app in a repo.

I'd like to store the code from this prototype for future reference but not include any of the files in the next release version of the code which I'll start form scratch on a new branch.

So far, I've created a new branch for the prototype and pushed that to our remote repository - that's safe and not going anywhere.

Back on my local, master branch I'd like to start with a completely clean slate - remove all the files currently listed.

Is there a more gitish way to approach this than simply removing the files?

I remember there was a method I used previously when setting up github pages for a repository but the documentation for that seems to have moved :/

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:17:54.753

Here's a [blog post](https://web.archive.org/web/20170918130215/http://madduck.net/blog/2007.07.11%3acreating-a-git-branch-without-ancestry/) on creating a branch without ancestry. It describes two possible ways, you can try both and see which one works better for you.

*In summary now that the original link is dead:*

The simplest method of creating a new git branch without any ancestors:

```
$ echo ref: refs/heads/newbranch > .git/HEAD
$ git branch
  master
[...]
$ git commit -m 'creating newbranch'
$ git branch
  master
* newbranch 
```

Another option is:

```
$ git symbolic-ref HEAD refs/heads/newbranch
[...] 
```

Which doesn't touch any files in `.git`

# c++ - c++ 中的 malloc 和构造函数

> ID：11313517
> 
> 赞同：2
> 
> 时间：2012-07-03T14:50:56.450
> 
> 标签：c++, constructor, malloc, new-operator

是否可以使用在另一个类的构造函数中将一些参数传递给一个类的构造函数`malloc`？我可以做到这一点`new`。我需要做同样的事情`malloc`：（如果没有意义，请考虑我使用的是自定义分配器而不是 malloc）

```
Class A_Class ... {
       public:
       B_Class *b;
...
     A_Class: ...
      { b = new B_Class (c1, c2, c3);
      } // end of constructor
} 
```

现在使用 malloc：

```
Class A_Class ... {
       public:
       B_Class *b;
...
     A_Class: ...
      { b = (B_Class*) malloc (sizeof(*b)); 
        ??????????????? }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T15:00:31.280

`malloc`分配原始内存。尝试将构造函数参数传递给它是没有意义的，因为它不调用任何构造函数。

如果您必须使用原始内存，您可以使用“ [placement new](https://en.wikipedia.org/wiki/Placement_syntax) ”语法在先前分配的原始内存中构造一个对象

```
...
void *raw_b = malloc(sizeof *b);
b = new(raw_b) B_Class(c1, c2, c3); // <- placement new 
... 
```

在数值上， 的值`b`将与 相同`raw_b`，即无需额外的`raw_b`指针就可以通过。但我更喜欢这样做，使用中间`void *`指针，以避免丑陋的演员表。

当然，在销毁此类物体时要小心。自定义分配需要自定义删除。你不能只是`delete`你`b`的一般情况。对称的自定义删除序列将涉及显式析构函数调用，然后是原始内存释放

```
b->~B_Class(); // <- explicit destructor call
free(b); 
```

PS您可能会考虑采用不同的路线：在您的类中重载`operator new`/`operator delete`而不是每次需要创建对象时都明确说明自定义分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:57:01.423

不，这是不可能的。如果它是为 C++ 设计的，那么您的自定义分配器将有一个`construct`用于此的调用函数（并`rebind`获得一个可以构造不同类型的分配器）。

在 C++03 中，这仅进行复制构造，因此您必须调用`allocator.construct(ptr, B_Class(c1, c2, c3))`并且该类必须是可复制的。在 C++11 中，分配器可以从任何参数构造。

如果您的分配器是为 C 设计的，那么您将不得不使用所谓的“新布局”。当然，`malloc`它是为 C 设计的。您应该自己查找它，但语法是：

```
b = (B_Class*) malloc(sizeof(*b));
new ((void*)b) B_Class(c1,c2,c3); 
```

请记住处理构造函数可能抛出的任何异常以及`free`缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:55:18.117

`malloc`不调用构造函数。没有办法将参数传递给没有被调用的函数。至于自定义分配器，您必须更具体地了解您在做什么。谁在使用自定义分配器分配什么。通常，自定义分配器仅用于分配；他们也不关心构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:01:15.577

您可以创建构造 B 的静态方法：

```
class B_Class
{
     public static B_Class* MallocMe(SomeParam param)
     {
           B_Class* retval = (B_Class*) malloc(sizeof(B_Class));
           retval->Construct(param);
           return retval;
     }
 .... 
```

# c# - 在 C# 中删除重音的最简单方法是什么？

> ID：11313518
> 
> 赞同：2
> 
> 时间：2012-07-03T14:50:58.770
> 
> 标签：c#, silverlight-4.0

> **可能重复：**
> [如何从 .NET 中的字符串中删除变音符号（重音符号）？](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)
> [删除 Silverlight 中的变音符号（String.Normalize 问题）](https://stackoverflow.com/questions/4046937/removing-diacritics-in-silverlight-string-normalize-issue)

我想从 Silverlight 应用程序中的字符串中删除重音，例如，将 Renée 转换为 Renee。一种方法是尝试使用以下 API：

```
System.Text.Encoding.GetEncoding
System.Text.Encoding.UTF8.GetString 
```

但 System.Text.Encoding.UTF8.GetString 不适用于 silverlight 框架。

在 C# 中最简单的方法是什么？

# java - RMI URL 格式之间的区别

> ID：11313526
> 
> 赞同：2
> 
> 时间：2012-07-03T14:51:17.103
> 
> 标签：java, rmi

我已经看到 2 种类型的 RMI URL（可能这个术语不正确）`http://host:port/rmi`和`rmi://host:port/repository_name`. 但我不知道这两者之间有什么区别。有人可以解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-23T01:49:56.157

RMI URL 的格式是以下之一：

```
 rmi://[host][:port][/[object]]

   rmi:[/][object] 
```

如果对象名称不存在，则 URL 将在给定主机和端口处命名注册表。否则，它以提供的名称命名在该注册表中注册的远程对象。如果省略主机，则假定为本地主机。如果省略端口，则假定默认的注册表端口 1099。

[参考这个](http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-rmi.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T00:03:32.123

> 我见过 2 种类型的 RMI URL（可能这个术语不正确）为`http://host:port/rmi`

我使用 RMI 已有 15 年了，我从未见过像“RMI URL”这样描述的东西。你从哪里得到那个的？

> `rmi://host:port/repository_name`

现在*这*是一个 RMI URL。

# c++ - 在 VS2010 中，是否可以使用 static_assert 来验证关于变量从类开始的偏移量的假设？

> ID：11313534
> 
> 赞同：1
> 
> 时间：2012-07-03T14:51:58.240
> 
> 标签：c++, visual-studio-2010, static-assert

这是一个简化的示例：

```
class A
{
    enum {OFFSET = 4};  //Due to packing

    bool m_bool;
};

template<class T>
class B : public A
{
    MyClass<T> m_class;
}; 
```

现在假设 A 类可以通过 MyClass 的基类使用 MyClass 功能的子集，我想做的是验证关于“m_class”相对于 A 类实例的位置的假设。

我在 B 类的成员函数中尝试了以下代码，但它给出了错误（“预期的常量表达式”）：

```
static_assert ((byte *)nullptr + OFFSET ==
    (byte *)&((B<T> *)nullptr)->m_class, "Error 'm_class' incorrectly located!"); 
```

对于当前版本的编译器来说，这是否过于雄心勃勃？

# java - 使用 JMS 发送消息

> ID：11313538
> 
> 赞同：0
> 
> 时间：2012-07-03T14:52:14.060
> 
> 标签：java, c++, jms, activemq

我对**JMS**有一个非常奇怪的问题。

我有两台机器**A-Windows**，**B-Linux**。 **机器 A**初始化 JMS（创建一个生产者和一个消费者）。（**Java代码**）

**机器 B向****机器 A**发送消息。**机器A**收到！消息并将响应发送回**机器 B**。（**C++ 代码**）

我的问题是：当我运行**机器**时，代码一切正常！但是当我在另一台 Windows 机器上运行相同的二进制文件时（我们称之为**机器 C**），来自**机器 B**的消息被接受，但**机器 C**不发送答案。

我嗅探了网络，发现在**机器 A**的情况下，它发送**TCP-ACK**，然后是**TCP PSH-ACK**（带有正确的响应）。但是**机器 C**只发送**TCP-ACK** **而没有** **TCP-PSH-ACK**。

**编辑：** 使用 JConsole 我注意到**机器 C**的主题属性：DequeueCount、DispatchCount、Enqueue Count 都是零。似乎生产者没有发送/排队任何东西（没有抛出异常）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:06:15.847

似乎解决方案是如此明显，我为没有注意到它而感到有些尴尬。**无论如何，机器 A**上运行的代码似乎使用了**非事务**会话，而**机器 C**上的代码使用了**事务**会话而没有**COMMITING** !!!!。

所以我关闭了会话的事务标志（因为它无论如何都符合我的需要），它就像一个魅力！

关于在没有提交 svn 的情况下更改代码的家伙....稍后我会和他谈谈 :)

# c# - 将地理分布表示为线性概率的约束？

> ID：11313542
> 
> 赞同：4
> 
> 时间：2012-07-03T14:52:23.467
> 
> 标签：c#, linear-programming, ms-solver-foundation, lpsolve

我现在正在学习 Solver Foundation。我实际上正在为我的项目插入 lpsolve，但我认为我的问题是如何最好地表示我的约束的一般问题。

我认为，我有一个相当典型的背包或包装问题。我有一组位置，每个位置都有一个“分数”。我想选择满足目标“分数”的最少位置数。

（实际上，它比这要复杂一些——每个位置都有许多不同的属性，我经常会针对多个属性进行定位）。

到目前为止，一切都很好。但是，我有一个额外的限制 - 我想最大化我选择的位置的地理分布。我如何表示该约束？

这是我现在拥有的基本示例：

```
 static void Main(string[] args)
    {
        var locations = new List<LocationWithScore>()
        {
            new LocationWithScore() { LocationID = 0, Latitude = 43.644274M, Longitude = -79.478703M, Score = 20 },
            new LocationWithScore() { LocationID = 1, Latitude = 43.644709M, Longitude = -79.476814M, Score = 20 },
            new LocationWithScore() { LocationID = 2, Latitude = 43.643063M, Longitude = -79.477458M, Score = 20 },
            new LocationWithScore() { LocationID = 3, Latitude = 43.650516M, Longitude = -79.469562M, Score = 20 },
            new LocationWithScore() { LocationID = 4, Latitude = 43.642659M, Longitude = -79.463124M, Score = 20 }
        };

        SolverContext sContext = SolverContext.GetContext();
        sContext.ClearModel();

        Model model = sContext.CreateModel();
        model.Name = "LocationWithScore";
        Set items = new Set(Domain.Any, "candidates");
        Decision take = new Decision(Domain.Boolean, "candidate", items);
        model.AddDecision(take);

        Parameter scoreParam = new Parameter(Domain.RealNonnegative, "score", items);
        scoreParam.SetBinding(locations, "Score", "LocationID");
        model.AddParameters(scoreParam);

        model.AddConstraint("scoreConstraint", Model.Sum(Model.ForEach(items, item => scoreParam[item] * take[item])) >= 60);

        model.AddGoal("locationGoal", GoalKind.Minimize, Model.Sum(Model.ForEach(items, item => take[item])));

        var solution = sContext.Solve(new LpSolveDirective());
        var report = solution.GetReport();
        Console.WriteLine(report.ToString());

        Console.WriteLine("Done");
        Console.ReadKey();
    }

    internal class LocationWithScore
    {
        public int LocationID { get; set; }
        public decimal Latitude { get; set; }
        public decimal Longitude { get; set; }
        public double Score { get; set; }
    } 
```

这将只选择前三个位置，这给了我 60 的目标，但是这三个位置非常接近地聚集在一起。我更希望它选择前三个（ID 0 - 2）和后两个（ID 3 和 4）中的一个，它们分布得更远。

有人可以在这里提供一些指导吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:42:04.523

这个问题比我最初想象的要复杂一些。就像我上面提到的，你需要计算离散度。然而，*地理点的标准差的*计算并不简单。这是[MathWorks](http://www.mathworks.com/help/toolbox/map/f10-6860.html)的解释。

似乎如果您的点不跨越大的地理区域，您可以通过计算二维上的标准偏差来近似分散。否则，您将不得不编写一个类似于 MatLab 中提供的函数[stdm](http://www.mathworks.com/help/toolbox/map/ref/stdm.html)。

**更新**

我花了一段时间，但我想我已经解决了这个问题。我必须说整套 Solver 程序很复杂。我在您提供的示例上测试了以下代码，它正确选择了 0、3 和 4。代码更改如下。

以下部分计算从位置*i*到位置*j*的距离，其中*i*和*j*是提供的目标集的元素。数据绑定到 a `Parameter`，因此可以稍后在目标中查询。

```
var dist = from l1 in locations 
          from l2 in locations 
          select new {ID1 = l1.LocationID, ID2 = l2.LocationID, dist = GetDistance(l1.Latitude, l1.Longitude, l2.Latitude, l2.Longitude)};

Parameter distance = new Parameter(Domain.RealNonnegative, "Location", items, items);
distance.SetBinding(dist, "dist", "ID1", "ID2");
model.AddParameter(distance); 
```

最终目标实际上由两部分组成。第一个目标是最大化得分，第二个目标是最大化位置的分散。在这种情况下，我将分散抽象为所选位置之间的总距离。当我添加 2 个目标时，我遇到了一个例外，“模型有多个目标”，因此我必须将它们组合成一个目标，如下所示。

```
double maxDist = (from distances in dist select distances.dist).Max();
Term goal1 = Model.Sum(Model.ForEach(items, item => take[item] * scoreParam[item]));
Term goal2 = Model.Sum(Model.ForEach(items, i => Model.ForEach(items, j => take[i] * take[j] * distance[i, j])));
model.AddGoal("Dispersion", GoalKind.Maximize, Model.Sum(Model.Sum(goal1, maxDist), goal2)); 
```

`GetDistance()``System.Device.Location.GeoCoordinate`使用;计算 2 个坐标之间的距离 原来有一个 C# 实现。我更改了纬度和经度类型`double`以避免类型转换。此代码在用于大型案例之前需要更新。

```
public static double GetDistance(double lat1, double long1, double lat2, double long2)
{
    GeoCoordinate geo1 = new GeoCoordinate(lat1, long1);
    GeoCoordinate geo2 = new GeoCoordinate(lat2, long2);
    return geo1.GetDistanceTo(geo2);
} 
```

# php - 如何允许 fb 用户在我的应用程序中提交他们的详细信息并存储此信息以供任何其他重复访问？

> ID：11313552
> 
> 赞同：0
> 
> 时间：2012-07-03T14:52:44.233
> 
> 标签：php, mysql, facebook

我需要让用户有机会只提交一次他们的详细信息，然后继续他们对我的应用程序的体验，而不是被要求再次提交，我想知道解决这个问题的最佳方法。如何将他们的 facebook ID 存储在数据库中，为尚未提交的用户提供不同的体验？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:01:05.733

只需在注册时接受任何用户详细信息，将其与用户名和（希望是散列的）密码一起存储在数据库行中，并在他们登录时提供。

Facebook API 有关于身份验证如何工作的大量文档。

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

此外，这里有一篇关于使用 PHP 进行用户身份验证和会话跟踪的相当不错的教程，它向您展示了如何存储用户数据并根据登录用户检索它。

[http://www.sitepoint.com/users-php-sessions-mysql/](http://www.sitepoint.com/users-php-sessions-mysql/)

干杯

# r - 将 scale_fill_brewer() 应用于 ggplot2 中的 geom_line 图

> ID：11313554
> 
> 赞同：1
> 
> 时间：2012-07-03T14:52:46.650
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 绘制时间序列数据。具体来说，我正在尝试生成一个折线图，其中包含五年内绘制的三组数据（年度数据点）。我可以毫无问题地做到这一点。看这里

![基本时间序列图](../Images/d3638f2d01322a38ae5838e88acda0bb.png)

当我尝试对其应用颜色时，我的问题就出现了，在这种情况下使用我的首选方法：scale_fill_brewer()。当我尝试绘制它时，如下所示：

```
> p + geom_line() + scale_fill_brewer(palette = "Set1") 
```

不幸的是，这会产生以下错误：

```
In brewer.pal(n, pal) :
minimal value for n is 3, returning requested palette with 3 different levels 
```

这令人困惑 a​​) 因为我在这里至少有三个组和 b) 因为我可以成功地将 scale_fill_brewer() 应用于条形图。

任何人 scale_fill_brewer() 都足以理解我做错了什么？

**更新**：根据请求，这是我生成 P 的方式。

```
> osr.m
Date                                         Type Revenue
1  5/31/07                        New.software.licenses    5882
2  5/31/08                        New.software.licenses    7515
3  5/31/09                        New.software.licenses    7123
4  5/31/10                        New.software.licenses    7533
5  5/31/11                        New.software.licenses    9235
6  5/31/12                        New.software.licenses    9906 
7  5/31/07 Software.license.updates.and.product.support    8329
8  5/31/08 Software.license.updates.and.product.support   10328
9  5/31/09 Software.license.updates.and.product.support   11754  
10 5/31/10 Software.license.updates.and.product.support   13092
11 5/31/11 Software.license.updates.and.product.support   14796
12 5/31/12 Software.license.updates.and.product.support   16210
13 5/31/07                            Software.revenues   14211
14 5/31/08                            Software.revenues   17843
15 5/31/09                            Software.revenues   18877
16 5/31/10                            Software.revenues   20625
17 5/31/11                            Software.revenues   24031
18 5/31/12                            Software.revenues   26116

p <- ggplot(osr.m, aes(x=Date, y=Revenue, group=Type)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:07:57.053

假设您真的希望使用`fill`而不是`colour`，这就是我要做的：

```
dat <- read.table(text = "Date                                         Type Revenue
1  5/31/07                        New.software.licenses    5882
2  5/31/08                        New.software.licenses    7515
3  5/31/09                        New.software.licenses    7123
4  5/31/10                        New.software.licenses    7533
5  5/31/11                        New.software.licenses    9235
6  5/31/12                        New.software.licenses    9906 
7  5/31/07 Software.license.updates.and.product.support    8329
8  5/31/08 Software.license.updates.and.product.support   10328
9  5/31/09 Software.license.updates.and.product.support   11754  
10 5/31/10 Software.license.updates.and.product.support   13092
11 5/31/11 Software.license.updates.and.product.support   14796
12 5/31/12 Software.license.updates.and.product.support   16210
13 5/31/07                            Software.revenues   14211
14 5/31/08                            Software.revenues   17843
15 5/31/09                            Software.revenues   18877
16 5/31/10                            Software.revenues   20625
17 5/31/11                            Software.revenues   24031
18 5/31/12                            Software.revenues   26116",sep = "",header = TRUE)

dat$Date <- as.Date(dat$Date,"%m/%d/%y")
ggplot(dat,aes(x = Date,y = Revenue)) + 
    geom_area(aes(group = Type,fill = Type)) + 
    scale_fill_brewer(palette = "Set1") +
    opts(legend.position = "none") 
```

![在此处输入图像描述](../Images/6aa9f0383466c8d04f403d492892a688.png)

# silverlight-toolkit - 如何在 Silverlight 工具包图表中的空 DateTimeAxis 上设置间隔

> ID：11313560
> 
> 赞同：0
> 
> 时间：2012-07-03T14:52:56.947
> 
> 标签：silverlight-toolkit

我使用 Silverlight 5 工具包创建了一个图表。它具有没有指定 ItemsSource 的 LinearSeries（稍后在代码中分配）。DateTimeAxis 没有指定最大值或最小值，因为我可能在不同时间绘制不同的数据。但是，无论要绘制的数据是什么，我都希望每 30 秒间隔一次。在 XAML 中指定此项时，页面无法加载（系统内存不足）。当尝试不同的（更大的）时间间隔时，它管理得很好（例如 1 个月的步骤）。似乎如果没有向图表提供数据，则默认间隔为 1 年。

这是一个已知的问题？除了指定 Max/Min 然后在提供一些数据后摆脱它之外，还有什么方法可以解决这个问题？

这是我的代码：

```
<toolkit:Chart Title="Live Use">
    <toolkit:Chart.Series>
        <toolkit:LineSeries
                IndependentValueBinding="{Binding Time}" 
                DependentValueBinding="{Binding Value}" 
                AnimationSequence="Simultaneous" />
    </toolkit:Chart.Series>
    <toolkit:Chart.Axes>
        <toolkit:DateTimeAxis Orientation="X" Location="Bottom" BorderThickness="2" Title="Time" ShowGridLines="True" IntervalType="Months" Interval="3"/>
    </toolkit:Chart.Axes>
</toolkit:Chart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:46:57.980

显然这是工具包图表中的一个错误。我发现这个链接证实了这一点：[http](http://forums.silverlight.net/t/101287.aspx) ://forums.silverlight.net/t/101287.aspx 。问题是默认情况下图表的范围设置为 1 年。现在，如果您尝试将时间间隔设置为 30 秒，它将尝试生成大量标签，这会将其减慢到内存不足的程度。解决方案是手动设置范围或在指定轴上的间隔之前指定 itemsSource。

希望这可以帮助。

# .net - 为什么在事件查看器中出现 VB6 应用程序的 .NET 运行时错误？

> ID：11313561
> 
> 赞同：1
> 
> 时间：2012-07-03T14:53:00.530
> 
> 标签：.net, vb6, crash, event-viewer

我正在查看一个旧版 VB6 应用程序，它在客户端的 64 位机器上崩溃。工作中没有人能够重新创建或找到明显的错误来源，但客户端已从其中一台机器发送事件查看器日志，这表明在附加应用程序错误消息之前存在 .NET 运行时错误。

如果您看到将您的应用程序列为问题根源的 .NET 运行时错误，是否可以安全地假设问题在于调用 .NET 组件（即在调用 .NET 组件的区域周围添加日志记录）或.NET 运行时错误是红鲱鱼吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:20:18.540

它不是。事件日志中的 .NET 运行时错误源仅意味着 .NET 运行时已加载到该进程中并且它首先捕获了它。它仍然应该为您提供异常代码和位置，也许还有一些堆栈信息。

在 Windows 7 上，您还可以配置[用户模式故障转储](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)，以便在发生故障时获取完整的故障转储。

# javascript - 在 html 和 javascript 之间共享一个部分

> ID：11313563
> 
> 赞同：1
> 
> 时间：2012-07-03T14:53:03.220
> 
> 标签：javascript, ruby-on-rails-3, templates, view, partial

我有一个`_slide.html.erb`在我的 SlidesController 的索引操作呈现的页面中使用的部分。此页面上有允许通过 ajax 添加幻灯片的控件。这意味着我需要从我的 ajax 响应处理程序向视图中添加新幻灯片。

我如何使用`_slide.html.erb`这个 javascript 处理程序中的部分来避免重复。我不想拥有存储在 javascript 中并由 javascript 使用的部分的第二个版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:30:05.780

你可以在你的 action.js.erb 模板中渲染你的部分：

```
$('#someelement').html('<%= escape_javascript(render :partial => "slide.html.erb", :locals => {:name => value}) %>'); 
```

# javascript - 带有 js 和谷歌浏览器的 Xpath

> ID：11313564
> 
> 赞同：1
> 
> 时间：2012-07-03T14:53:07.037
> 
> 标签：javascript, jquery, google-chrome, xpath, google-chrome-extension

我有一个在点击时生成 xpath 的代码，但我需要把它放在一个 chrome 扩展中。那么该怎么做呢？

以下是点击时生成 xpath 的代码：

```
function get_XPath(elt)
         {var path = '';
          for (; elt && elt.nodeType==1; elt=elt.parentNode)
              {var idx=$(elt.parentNode).children(elt.tagName).index(elt)+1;
               idx>1 ? (idx='['+idx+']') : (idx='');
               path='/'+elt.tagName.toLowerCase()+idx+path;
              }
          return path;
         }

$(document).ready(function() {
    $('*').click(function(event) {
        event.stopPropagation();
        alert(get_XPath(this));
    });
});​ 
```

你也会在这里看到演示：http: [//jsfiddle.net/CksqX/](http://jsfiddle.net/CksqX/)

我如何构建一个 chrome 扩展，所以当我单击 chrome 当前页面上的某个元素以获取带有我在 textfiled 中的函数的 xpath 时？

如何打包此代码以用作 chrome 扩展程序？

也许代码不是很好，但我会修复它们，所以我需要把它变成谷歌浏览器扩展

抱歉这个小问题，我是网络开发的新手，对我的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T13:57:48.070

[您应该指定此https://developer.chrome.com/extensions/getstarted.html](https://developer.chrome.com/extensions/getstarted.html)的具体部分вщс您不明白，因此我们可以本地化您的问题

# osgi - 如何在使用 javaassist 生成的类文件中使用服务

> ID：11313567
> 
> 赞同：1
> 
> 时间：2012-07-03T14:53:12.713
> 
> 标签：osgi, javassist

我可以在使用 javaassist 生成的类文件中使用服务吗？我怎样才能做到这一点？由于这个类是动态创建的，我如何注册这个类正在使用另一个类提供的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:25:50.893

我在[这里](https://stackoverflow.com/questions/10702295/programmatically-adding-declarative-services)问了一个类似的问题。

“安装”的最小单位是捆绑包。您可以围绕您的类文件生成一种“虚拟包”，包括 OSGI-INF/componentX.xml 描述符，并将其安装到 OSGi 中。

如果它发生变化，请重新生成包并更新 OSGi。

我没有走这条路，因为我有很多生成的代码（大约 4500 个不同的脚本都有依赖项），而且我担心如果我生成那么多捆绑包会遇到问题。

我还得到了关于 Felix 依赖管理器的提示，但我还没有彻底检查过，它可能会做我们需要的事情。

# python - 用 python 字典理解重构

> ID：11313568
> 
> 赞同：3
> 
> 时间：2012-07-03T14:53:14.357
> 
> 标签：python, refactoring, dictionary-comprehension

我有 2 个包含相同键但值对不同的字典。让我们让 dictA 和 dictB 代表有问题的两个字典。

```
dictA = {'key1':'Joe', 'key2':'Bob'}
dictB = {'key1':'Smith', 'key2':'Johnson'} 
```

目前，我正在通过嵌套的 if 语句创建一个基于常见键的新字典。这样做时，共享键的值包含在新字典的列表中。请参阅下面的操作：

```
dictAB = {}  # Create a new dictionary

# Create a list container for dictionary values
for key in dictA.keys():
    dictAB[key] = []

# Iterate through keys in both dictionaries
# Find matching keys and append the respective values to the list container
for key, value in dictA.iteritems():
    for key2, value2 in dictB.iteritems():
        if key == key2:
            dictAB[key].append(value)
            dictAB[key].append(value2)
        else:
            pass 
```

如何使用 python 字典理解把它变成一个更干净的结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T14:55:51.377

使用集合或[键视图（python 2.7）](http://docs.python.org/library/stdtypes.html#dict.viewkeys)：

```
dictAB = {k: [dictA[k], dictB[k]] for k in dictA.viewkeys() & dictB.viewkeys()} 
```

2.7之前：

```
dictAB = dict((k, [dictA[k], dictB[k]]) for k in set(dictA) & set(dictB)) 
```

在 python 3 中，您可以`.keys`直接使用该方法进行此类操作，因为它们是作为视图实现的：

```
dictAB = {k: [dictA[k], dictB[k]] for k in dictA.keys() & dictB.keys()} 
```

演示（python 2.7）：

```
>>> dictA = {'key1':'Joe', 'key2':'Bob'}
>>> dictB = {'key1':'Smith', 'key2':'Johnson'}
>>> dictAB = {k: [dictA[k], dictB[k]] for k in dictA.viewkeys() & dictB.viewkeys()}
>>> print dictAB
{'key2': ['Bob', 'Johnson'], 'key1': ['Joe', 'Smith']} 
```

`&`两个集合或 dict 视图上的运算符创建两个集合的交集；两组中都存在的所有键。

通过使用键的交集，即使 dictA 或 dictB 具有未出现在其他字典中的键，此代码也将起作用。如果您绝对确定键将始终匹配，则可以直接迭代任一 dict 而无需交集：

```
dictAB = {k: [dictA[k], dictB[k]] for k in dictA} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:18:33.593

```
dictAB = { key: [dictA[key],dictB[key]] for key in dictA if key in dictB } 
```

# css - 将鼠标悬停在链接上时，DIV 在 IE7 中移动

> ID：11313571
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:22.040
> 
> 标签：css

将鼠标悬停在菜单链接上时，整个 DIV 在 IE 7 中向上移动。在 Chrome、IE 8,9 中一切正常。

当您将鼠标悬停在“商店”链接上时。DIV 的 LOGO、Search、Basket 向上移动。

这是我拥有的CSS..

```
.storefinderdropdown { position:absolute; top:8px; float:none; width:270px; height:43px; border:5px solid #F1F1EF; background:#F1F1EF; z-index:10; margin:20px 0 0 335px;  font-size:10px; font-weight:bold; text-indent:3px; padding:0; display:block; }
.storefinderdropdown .SLErrorMsg { display:none; color:#f00; line-height:20px;}
.storefinderdropdown .SLbutton { position:relative;  display:inline; float:left; }
.storefinderdropdown .SLbutton input{ float:left; vertical-align:middle; }
.storefinderdropdown .SLbutton a{ float:left; margin:1px 0 0 3px; line-height:10px;  color: #fff !important; border: none; cursor:pointer; font-weight:bold; width:42px; height:14px;  background-image: linear-gradient(bottom, #335649 13%, #335649 57%, #335649 79%); background-image: -o-linear-gradient(bottom, #335649 13%, #335649 57%, #335649 79%); background-image: -moz-linear-gradient(bottom, #335649 13%, #335649 57%, #335649 79%); background-image: -webkit-linear-gradient(bottom, #335649 13%, #335649 57%, #335649 79%); background-image: -ms-linear-gradient(bottom, #335649 13%, #335649 57%, #335649 79%); background-image: -webkit-gradient( linear, left bottom, left top, color-stop(0.13, #335649), color-stop(0.57, #335649), color-stop(0.79, #335649)); background-color:#335649; border-radius:3px; padding: 5px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:48:05.957

我在 IE 中使用了开发人员工具来帮助您解决问题。

看来问题在于您为 #header 和 .logo 设置的边距

```
 #header .logo{
    padding-bottom:0px;
    margin-top:15px;
    ....
    } 
```

在 IE 中快速解决此问题并且仍然希望在其他浏览器中得到相同的结果是用 padding-top 替换 #header 和 .logo 的 margin-top。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:13:02.250

好吧，我尝试了你所有的建议……没有一个对我有用。导致问题的原因是#menubar DIV 在#logo、#searchbar、#basket DIV 之外，并且在所有DIV 之前。

我所做的是，只需将 div 放在所有这些 DIV 之后，并在其周围再添加一个 DIV 包装器，这样它就不会移动。

无论如何，谢谢你们的建议。真的很感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T19:14:04.913

我解决了与 div 所在的主 css 容器样式表上的 display:inline-block 类似的问题。

# php - symfony 1.4：学说：build-sql 问题

> ID：11313572
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:22.433
> 
> 标签：php, symfony1, doctrine, symfony-1.4

我错误地在我的模式中定义了一个名为的列`desc`，它是一个保留关键字。我很快意识到我的错误并更改了我的架构，将我的架构列名修改为`description`.

现在，当我运行`doctrine:build --all`或者`doctrine:build-sql`它仍然根据我过去的错误生成 sql 时。

我验证了这一点，因为它仍在生成语句`desc`中的 sql 语句，该语句已被删除。我已经清除了我的缓存，删除了原始的 sql 文件，并清除了我的日志。

到底是如何`doctrine:build-sql`产生一个被完全删除和删除的错误？我该如何纠正这个问题？

显然，在我能修复它之前，它`doctrine:build`已经坏了。

**编辑：**

这是我的原始架构：

```
ReasonCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    desc: { type: string }

RejectionCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    desc: { type: string }

ConsiderationCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    desc: { type: string } 
```

这是我修改后的架构：

```
ReasonCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    name: { type: string }

RejectionCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    name: { type: string }

ConsiderationCode:
  columns:
    id:          { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    name: { type: string } 
```

这是每次生成的生成的 sql 模式：

```
CREATE TABLE consideration_code (id BIGINT UNIQUE AUTO_INCREMENT, desc TEXT, name TEXT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE reason_code (id BIGINT UNIQUE AUTO_INCREMENT, desc TEXT, name TEXT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE rejection_code (id BIGINT UNIQUE AUTO_INCREMENT, desc TEXT, name TEXT, PRIMARY KEY(id)) ENGINE = INNODB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:02:38.203

`doctrine:build-sql`根据生成的模型（php 类）生成 SQL。您需要首先使用重新生成模型`doctrine:build-model`。

你没有其他`desc`领域`schema.yml`吗？您是否尝试过清空文件夹`cache`？你能贴上你的`schema.yml`吗？

该`desc`字段是否仍在您生成的模型（php 文件）中？

**编辑：**

另一种激进的解决方案：

1.  清空你的`schema.yml`
2.  运行`doctrine:clean-model-files`清理所有旧模型
3.  把你的新`schema.yml`的（更正的）
4.  重新运行`doctrine:build --all`

# c# - Linq to Entites Count Where 子句语法

> ID：11313575
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:26.293
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

`ProgramId`我有一个 Linq to Entites 查询，只有在等于 URL 传入的参数时才需要运行：

```
var PatientFollowUpResult = surveyResponseRepository.Query.Count(r => r.PatientFollowUp); 
```

例如，我如何计算所有的`r.PatientFollowUp`for `r.ProgramId = 1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:04:56.993

如果我理解正确，您可能会根据传递的参数进行多次点击，并且您正在尝试获取每个属性的所有这些匹配项的总数？

在那种情况下，SelectMany 可以解决问题

```
var count = surveyResponseRepository.Query
                      .Where(r => r.ProgramId ==1)
                      .SelectMany(r=>r.PatientFollowUp).Count() 
```

# php - 由于某种原因，此 curl 命令不起作用

> ID：11313576
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:27.070
> 
> 标签：php, curl

我有一个需要从 PHP 脚本“调用”的 URL。该 URL 使用 Tropo 的 API 拨打电话，因此很容易验证它是否被调用。

我的 PHP 看起来像这样：

```
<?php

$oid=$_GET["oid"];
$notify_url = "http://mydomain.com/somepath/".$oid;
echo $notify_url;

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $notify_url);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);

mail('me@gmail.com', 'cURL', "Did a cURL");

?> 
```

这会打印出 $notify_url 变量，当我获取打印的值并将其输入浏览器窗口时，我会得到所需的结果，即我的电话的电话。

我已经在两个声称支持 CURL 的网络主机上尝试过这个，一个是付费的（crazydomains.com.ayu - 刚打完电话支持），另一个是 000webhost.com

难道我做错了什么？这有点令人困惑，因为它应该很简单。

编辑：我按预期收到邮件。

编辑 2：如果您对如何调试它有任何想法，我将不胜感激。

编辑 3：正如 Juhana 建议的那样`echo curl_error();`，我在 curl_exec 之后添加了这个错误......

`Warning: Wrong parameter count for curl_error() in /home/a5352876/public_html/curl.php on line 15`

编辑4：更改`echo curl_error()`为`echo curl_error($ch)`并收到消息`couldn't connect to host`，这似乎是问题所在。

现在的问题是，为什么它不能连接到可以通过浏览器轻松访问的主机，我可以在任何地方寻找它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:01:26.753

如果您的主机启用了 HTTP 包装器，并且启用了`allow_url_fopen`配置选项，那么您就不需要 cURL，尤其是对于这样一个简单的请求。

看起来您需要做的就是打开一个 URL，您可以轻松地使用[`fopen()`](http://php.net/fopen)：

```
$oid = $_GET["oid"];
$notify_url = "http://mydomain.com/somepath/".$oid;
$fh = fopen( $notify_url, 'r');
fclose( $fh); 
```

# php - 模拟 Google 搜索查询

> ID：11313578
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:38.763
> 
> 标签：php, mysql, sql, search

是否可以在 PHP 上模拟**Google 搜索查询引擎？**它需要类似于`MATCH AGAINST`，但它不适用于**InnoDB**（我需要使用 FK）。

我认为这是一个复杂的想法，但也许有一个图书馆可以做到。我需要进行这样的搜索：

```
$search = new MisteriousQuery();
$search->searchOn('firstname', 'lastname', 'email', 'address');
$search->searchBy('David');
$search->generateSQL(); 
```

基本上我需要按相关性进行搜索，谷歌搜索引擎非常好。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:53:33.847

您是否正在寻找一种模糊的方式来匹配给定的字段？

一种方法是使用更好的搜索引擎。例如 lucene 或 sphinx。

另一种方法是使用 SQL 来解决这个问题。调查“like”和“n-gramm”/“fuzzysearch”。

# c++ - 如何使用“PhysicsFS”归档和压缩数据

> ID：11313581
> 
> 赞同：4
> 
> 时间：2012-07-03T14:53:46.447
> 
> 标签：c++, archive

我正在查看“PhysicsFS”文档并寻找存档和压缩数据的方法，但找不到。是否有可能，如果我能做到这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T17:18:55.317

**PhysicsFS zip 支持**

PhysicsFS 支持从安装在其提供的“虚拟文件系统”中任意点的 zip 文件中读取文件。这有效地从 ZIP 存档中提供解压缩。

但是，PhysicsFS 不支持添加或修改 ZIP 存档的内容。它只允许在其文档中所谓的“写入目录”中写入未压缩的文件。

所以，总结一下：PhysicsFS 只支持从 ZIP 档案中读取，不支持写入它。对于您自己的压缩：如果需要，只需使用外部压缩器压缩所有写入的文件。

* * *

**PhysicsFS 使用情况**

[这里](http://icculus.org/physfs/physfstut.txt)有一个 PhysicsFS 的小教程。

使用非常简单：

```
// initialize the lib
PHYSFS_init(NULL);

// "mount" a zip file in the root directory
PHYSFS_AddToSearchPath("myzip.zip", 1);

// set a directory for writing
PHYSFS_setWriteDir(const char *newDir);

// open a file for reading
PHYSFS_file* myfile = PHYSFS_openRead("myfile.txt");

// open a file for writing
PHYSFS_file* myfile = PHYSFS_openWrite("output_file.bin");

// get a file size
PHYSFS_sint64 file_size = PHYSFS_fileLength(myfile);

// read data from a file (decompress only if path is inside a zip mount point)
char* myBuf = new char[file_size];
int length_readed = PHYSFS_read(myfile, myBuf, 1, file_size);

// write data to a file (uncompressed)
char* myBuf = new char[new_file_size];
//...fill myBuf...
int length_writed = PHYSFS_write(myfile, myBuf, 1, new_file_size);

// close a file
PHYSFS_close(myfile);

// deinitialize the lib
PHYSFS_deinit(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T15:55:36.577

您的意思是否可能是“ [PhysFS](http://icculus.org/physfs/) ”。

这是一个从 zipfile 读取文件的库。基本上就像 Quake 引擎一样。

# firefox - Selenium Web 驱动程序 xpath、span 定位器

> ID：11313582
> 
> 赞同：0
> 
> 时间：2012-07-03T14:53:46.767
> 
> 标签：firefox, selenium, webdriver, selenium-rc, xpath

硒网络驱动程序。希望从以下代码中找到新文章。请注意，这是在 iframe 下。

```
<img class="rtbIcon" src="/icons/16/app/shadow/document_add.png" alt="">
                                 <span class="rtbText">New Article</span> 
```

我尝试使用 xpath 和许多其他方式进行定位。但以下是我每次得到的

代码 ：`driver.findElement(By.xpath("id('RadToolBar1'):div:div:div:ul:li[3]:a:span:span:span:span"));`

结果：给定的选择器`id('RadToolBar1'):div:div:div:ul:li[3]:a:span:span:span:span`无效或不生成 WebElement。发生以下错误：

新文章没有名字，id 所以请如果有人可以帮我找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:33:05.703

您的 xpath 似乎是错误的。获取页面上任何元素的 xpath 的最佳方法是安装 mozilla add on- [Fire Bug](http://getfirebug.com/)。您可以使用此插件检查任何元素，还可以复制页面上存在的元素的正确 xpath。

这应该是你的 xpath -

```
driver.findElement(By.xpath("//*[@class='rtbText']")); 
```

或者

```
driver.findElement(By.linkText("New Article")); 
```

其中之一应该工作。如果您遇到任何问题，请告诉我。

# jquery - 使用 bootbox.confirm() 确认表单提交

> ID：11313586
> 
> 赞同：23
> 
> 时间：2012-07-03T14:53:56.057
> 
> 标签：jquery, twitter-bootstrap

我有一个表单，想拦截表单提交以使用[bootbox](http://bootboxjs.com/)显示确认对话框。

1.  用户输入一些数据
2.  用户点击提交
3.  显示确认对话框

如果用户点击`OK`，那么表单应该提交，如果没有，它应该留在页面上。

我试过这个：

```
$('#myForm').submit(function() {
    return bootbox.confirm("Are you sure?");
}); 
```

但是，`bootbox.confirm()`立即返回，确认对话框再次隐藏。

然后我注意到有一个回调参数`bootbox.confirm()`。但是，如果我`$('#myForm').submit()`要从回调中调用，这显然只会再次显示确认对话框。

那么确认表单提交的正确方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-09-20T09:14:18.117

我只是通过阻止默认表单行为来实现这一点，这是下面的解决方案。我在表单列表中使用它，每个表单都有一个提交删除按钮，它工作正常。

```
<script type="text/javascript">
    $('form').submit(function(e) {
        var currentForm = this;
        e.preventDefault();
        bootbox.confirm("Are you sure?", function(result) {
            if (result) {
                currentForm.submit();
            }
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-03T15:03:10.030

与往常一样：就在您提出问题后，您自己会找到答案:-)。请参阅此答案：[https](https://stackoverflow.com/a/2420806/219187) ://stackoverflow.com/a/2420806/219187 （另请注意答案中的评论）。

适应我的问题，解决方案如下：

```
$('#myForm').submit(function() {
    var currentForm = this;
    bootbox.confirm("Are you sure?", function(result) {
        if (result) {
            currentForm.submit();
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T12:56:11.707

这段代码非常适合我......

```
<script type="text/javascript">
$('#myForm').click(function(e) {
    e.preventDefault();
    var msg = 'Souhaitez vous vraiment supprimer ce produit ?';
    bootbox.confirm(msg, function(result) {
        if (result) {
            $('#myForm').submit();
        }
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-11T11:03:06.123

您可以通过使用 .trigger() 方法将其他参数传递给提交处理程序来解决此问题：

```
$('form').submit(function (e, confirmed) {
    var currentForm = $(e.currentTarget);
    if (!confirmed) {
        e.preventDefault();
        bootbox.confirm("Are you sure?", function (result) {
            if (result) {
                currentForm.trigger('submit', { confirmed: true });
            }
        });
    }
}); 
```

首次提交表单时，'confirmed' 参数未定义并显示引导框对话框。如果用户确认对话框中的操作，则使用附加参数再次触发提交事件，并正常提交表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T09:42:46.390

我的解决方案

```
@Html.ActionLink("Delete", "DeleteReport", new { id = item.Id }, new { @class = "btn btn-danger", onclick = String.Format("return ASE.ConfirmAction(this.href, 'Delete {0}?');", item.Name) }) 
```

```
var ASE = {
    ConfirmAction: function (href, text) {
        bootbox.confirm(text, function (result) {
            if (result)
                window.location = href;
        });

        return false;
    }
} 
```

# haskell - 也许 monad 绑定函数优先级

> ID：11313588
> 
> 赞同：6
> 
> 时间：2012-07-03T14:54:00.917
> 
> 标签：haskell, monads, maybe

在[本](http://yannesposito.com/Scratch/en/blog/Haskell-the-Hard-Way/#maybe-monad)教程中，我发现了以下代码段：

```
deposit :: (Num a) => a -> a -> Maybe a
deposit value account = Just (account + value)

withdraw :: (Num a,Ord a) => a -> a -> Maybe a
withdraw value account = if (account < value) 
                         then Nothing 
                         else Just (account - value)

eligible :: (Num a, Ord a) => a -> Maybe Bool
eligible account =
  deposit 100 account >>=
  withdraw 200 >>=
  deposit 100  >>=
  withdraw 300 >>=
  deposit 1000 >>
  return True

main = do
  print $ eligible 300 -- Just True
  print $ eligible 299 -- Nothing 
```

我无法弄清楚该`>>=`功能应该如何工作。起初它接受一个`Maybe a`值作为它的第一个参数：`deposit 100 account >>=`

之后，它似乎将`a -> Maybe a`其作为第一个参数：`withdraw 200 >>=`编译器如何批准？不应该`>>=`总是`Maybe a`作为它的第一个参数吗？

一个可能的解决方案是，如果`>>=`函数的优先级按以下方式工作：`((a >>= b) >>= c) >>= d`

但据我所知，情况恰恰相反：`a >>= (b >>= (c >>= d))`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T14:58:55.243

> 据我所知，情况正好相反：`a >>= (b >>= (c >>= d))`

不。

```
GHCi> :i >>=
class Monad m where
  (>>=) :: m a -> (a -> m b) -> m b
  ...
    -- Defined in `GHC.Base'
infixl 1 >>= 
```

`infixl`意味着它是左结合的，所以`a >>= b >>= c >>= d ≡ ((a >>= b) >>= c) >>= d`.

如果它真的没有多大意义`infixr`，不是吗？`>>=`总是返回一个 monad，它的 RHS 接受一个函数。因此，在*任何*与相关联的一元表达式链中`>>=`都将存在于`(->) r`单子中，这几乎不是最有用的。

# database - 使用来自单独数据库的 VBA 代码关闭数据库

> ID：11313590
> 
> 赞同：1
> 
> 时间：2012-07-03T14:54:15.447
> 
> 标签：database, ms-access, vba, ms-access-2007

是否可以通过另一个数据库（数据库 B）中的 VBA 代码关闭一个 Access 数据库（我们称之为数据库 A）。

在此处的示例中，如果数据库 A 在数据库 B 启动时打开，我希望数据库 A 关闭。这可能使用VBA吗？

我有一个谷歌，但所有答案似乎都与使用 VBA 关闭当前数据库有关，这当然可以通过 DoCmd.Quit 实现。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:58:41.313

你可以劫持它：

```
Dim OtherDB As Object

sOther = "Z:\Documents\other.accdb"
Set OtherDB = GetObject(sOther)
OtherDB.Application.Quit 
```

这可能会使某人的生活变得困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-30T15:46:19.510

我知道这个问题很老，但也许这会对某人有所帮助。我有一个数据库，我在其中使用 VBA 打开另一个数据库并运行一个宏。我想然后关闭数据库。对我有用的代码如下，它包括从打开到关闭的整个过程。

```
Function functionName()

Static acc As Access.Application
Dim db As DAO.Database
Dim dbname As String
dbname = "absolutePathToDBHere.accdb"
Set acc = New Access.Application
acc.Visible = True
Set db = acc.DBEngine.OpenDatabase(dbname, False, False)
acc.OpenCurrentDatabase dbname
acc.DoCmd.RunMacro ("macroName")
acc.DoCmd.Quit acQuitSaveAll

db.Close
Set db = Nothing

End Function 
```

# wicket - 覆盖 setResponsePage() 以构建面包屑

> ID：11313591
> 
> 赞同：0
> 
> 时间：2012-07-03T14:54:17.100
> 
> 标签：wicket, wicket-1.5

我正在尝试构建自己的简单面包屑组件，该组件将 PageRefence 推送到应用程序中每个链接的列表中。

不幸的是， setResponsePage() 是最终的（我使用检票口 6）。

我想到的唯一其他选择是向我的基本页面构造函数添加一个参数。但这需要我更改应用程序中的每个链接..

还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:20:40.997

由于您已经有一个基本页面，因此更容易`onBeforeRender()`在基本页面中覆盖以更新您将存储在`Session`对象中的面包屑列表。

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:14:39.213

回答我自己的问题：

最后我意识到，我不想在每个新页面上都更新面包屑。

因此，我创建了一个包含 Pagereferences 列表的对象。当我导航到新页面时，我会获取当前页面的列表，复制它并添加当前页面。结果列表被粘贴到新页面上。

所有这些都在基本页面中处理。

将其保留在页面中，可以避免多个选项卡/窗口出现问题。

谢谢您的帮助。

# asp.net - ASP.NET 实现无回发的锚点

> ID：11313592
> 
> 赞同：1
> 
> 时间：2012-07-03T14:54:22.953
> 
> 标签：asp.net, anchor

我正在 VS2010，C# 中开发一个 ASP.NET Web 应用程序，我想做类似这个页面的东西：

```
http://www.just-eat.co.uk/restaurants-simplyscrumptious/menu 
```

当您单击左侧的食物类别时，页面跳转到该类别而没有任何回发，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:04:55.490

## 如何在没有回邮的情况下搬家

`#`您可以使用同一页面 url 末尾的锚点以及要移动的名称。

然后在页面内放置一个带有您希望跳转的名称的 anhro

```
<a name="MovePosition"></a> 
```

因此，如果您创建一个像浏览器这样的链接，那么顶部`http://www.site.com/catalog.aspx#MovePosition`的线条就会边缘化。`<a name="MovePosition"></a>`

参考：[http ://www.w3.org/MarkUp/1995-archive/Elements/A.html](http://www.w3.org/MarkUp/1995-archive/Elements/A.html)

## 类别菜单总是在同一点

如果您还注意到左侧的类别保持在同一位置。这可以通过多种方式完成。在这个特定页面中使用脚本来更改他的位置。更好的方法是将类别放在一个 div 中，并在这个 div 上赋予这种额外的样式`position:fixed;bottom:0px;`，并将坚持你放置它相对于他的父 div 的位置。

有很多方法可以使类别菜单保持在同一点上。另一个可以在这里找到：[http](http://www.dynamicdrive.com/dynamicindex1/staticmenu.htm) ://www.dynamicdrive.com/dynamicindex1/staticmenu.htm旧代码也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:12:32.210

除了上一个答案@Aristos

如果在同一页面上，只需执行

```
<a href="#section1">Go to section 1</a> 
```

如果在另一个页面上，那么做

```
<a href="mypage.aspx#section1">Go to section 1 on another page</a> 
```

然后用`<a name="#sectionName"></a>`

```
<a name="section1"></a>
Thi section 1
content for section 1 follows

<a name="section2"></a>
This section 2
content for section 2 follows 
```

# css - CSS3双圆边框，没有2个div可以吗？

> ID：11313593
> 
> 赞同：0
> 
> 时间：2012-07-03T14:54:23.107
> 
> 标签：css, rounded-corners

我想知道是否可以在不嵌套 DIV 的情况下创建双圆角边框？

在此处查看我的示例：http: [//jsfiddle.net/eXDjL/](http://jsfiddle.net/eXDjL/)

第一个框是圆形的，但 ouline 保持方形，第二个框没有圆角，但显示了我想要的边框。

我知道有一个`-moz-outline-radius property`，但其他浏览器有什么吗？

如果不是，我想我会坚持使用两个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:02:04.790

要模仿不同的颜色边框，您可以使用`box-shadow`- [http://jsfiddle.net/eXDjL/3/](http://jsfiddle.net/eXDjL/3/)

```
.genyx_content_full {
    background-color:#f7f7f7;
    border: #fff 1px solid;
    padding: 10px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    box-shadow: 0px 0px 0px 1px #dedede;
} 
```

# c - 数组排序C，对吗？

> ID：11313595
> 
> 赞同：0
> 
> 时间：2012-07-03T14:54:29.210
> 
> 标签：c, arrays, sorting

我写了这个函数来排序数组元素，好用吗？

我仍然是 C 编程的菜鸟，所以我更愿意问。

```
bSortArray(int array[], int arrayL)
{
    int i,j,temp;
    for(i=0;i<arrayL;i++)
    {
        for(j=0;j<arrayL-1;j++)
        {
            if(array[i]<array[j])
            {
                temp=array[i];
                array[i]=array[j];
                array[j]=temp;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:15:25.887

您可以让冒泡排序将较小的值带到数组的开头，或者您可以让冒泡排序将较大的值带到数组的末尾。维基百科页面上的动画显示了第二种情况。参考： [http ://en.wikipedia.org/wiki/Bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort)

这是一个实现，如果它通过 i 而不交换任何东西，它将提前终止循环。 [http://www.c.happycodings.com/Sorting_Searching/code4.html](http://www.c.happycodings.com/Sorting_Searching/code4.html)

请注意，内部循环应将给定索引处的值与其“邻居”进行比较。即数组[j] > 数组[j+1]。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T14:59:24.573

使用 qsort() - [http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)

如果需要，提供更多信息。

# xamarin.ios - Monotouch 错误崩溃日志

> ID：11313597
> 
> 赞同：1
> 
> 时间：2012-07-03T14:54:31.003
> 
> 标签：xamarin.ios

我的发布构建应用程序中有错误。有人有想法吗？

Incident Identifier: 9E3590C1-41C3-4E92-AB35-4E45551931B3 CrashReporter Key: a62caa0c7da6b2d1ddedda18b8354a223eb8d0b9 Hardware Model: iPad2,1 Process: PrintStand [8337] Path: /var/mobile/Applications/669F0F9A-8464-489C-BCFB-A66343F011B7/MediawirePrintStandMobilePresentation.app /PrintStand 标识符：PrintStand 版本：??? (???) 代码类型：ARM（本机）父进程：launchd [1]

```
Date/Time:       2012-07-03 17:50:40.890 +0300
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGABRT)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x37f4c32c __pthread_kill + 8
1   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
2   libsystem_c.dylib               0x33dd8298 abort + 88
3   PrintStand                      0x01276ec6 0x1000 + 19357382
4   PrintStand                      0x0128f9a2 0x1000 + 19458466
5   libsystem_c.dylib               0x33de97e6 _sigtramp + 42
6   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
7   libsystem_c.dylib               0x33dd8298 abort + 88
8   PrintStand                      0x01317eda 0x1000 + 20016858
9   PrintStand                      0x01317efc 0x1000 + 20016892
10  PrintStand                      0x012627ea 0x1000 + 19273706
11  PrintStand                      0x01276a54 0x1000 + 19356244
12  PrintStand                      0x01276b22 0x1000 + 19356450
13  PrintStand                      0x0128e6c6 0x1000 + 19453638
14  PrintStand                      0x00ff5f54 0x1000 + 16731988
15  PrintStand                      0x00ff5f54 0x1000 + 16731988
16  PrintStand                      0x011b6578 0x1000 + 18568568
17  PrintStand                      0x01264cd4 0x1000 + 19283156
18  PrintStand                      0x012dff58 0x1000 + 19787608
19  PrintStand                      0x0132d170 0x1000 + 20103536
20  CoreFoundation                  0x3152e3f6 -[NSObject performSelector:withObject:withObject:] + 46
21  UIKit                           0x3181ce00 -[UIApplication sendAction:to:from:forEvent:] + 56
22  UIKit                           0x3181cdbc -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24
23  UIKit                           0x3181cd9a -[UIControl sendAction:to:forEvent:] + 38
24  UIKit                           0x3181cb0a -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 486
25  UIKit                           0x3181d442 -[UIControl touchesEnded:withEvent:] + 470
26  UIKit                           0x3180fb80 _UIGestureRecognizerUpdate + 5216
27  CoreFoundation                  0x315a8b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
28  CoreFoundation                  0x315a6d50 __CFRunLoopDoObservers + 252
29  CoreFoundation                  0x315a70aa __CFRunLoopRun + 754
30  CoreFoundation                  0x3152a49e CFRunLoopRunSpecific + 294
31  CoreFoundation                  0x3152a366 CFRunLoopRunInMode + 98
32  GraphicsServices                0x32a03432 GSEventRunModal + 130
33  UIKit                           0x3182fcce UIApplicationMain + 1074
34  PrintStand                      0x01020a1c 0x1000 + 16906780
35  PrintStand                      0x00bc30a0 0x1000 + 12329120
36  PrintStand                      0x011b6578 0x1000 + 18568568
37  PrintStand                      0x01264cd4 0x1000 + 19283156
38  PrintStand                      0x012dff58 0x1000 + 19787608
39  PrintStand                      0x012e2c38 0x1000 + 19799096
40  PrintStand                      0x012e6588 0x1000 + 19813768
41  PrintStand                      0x01269728 0x1000 + 19302184
42  PrintStand                      0x012618d6 0x1000 + 19269846
43  PrintStand                      0x00bb3104 0x1000 + 12263684

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x37f3c3a8 kevent + 24
1   libdispatch.dylib               0x3477af04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x3477ac22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x37f3c004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x37f3c1fa mach_msg + 50
2   CoreFoundation                  0x315a83ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x315a7124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3152a49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x3152a366 CFRunLoopRunInMode + 98
6   WebCore                         0x31d4ac9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x33da072e _pthread_start + 314
8   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 3:
0   libsystem_kernel.dylib          0x37f4c628 __semwait_signal + 24
1   libsystem_c.dylib               0x33da4b1a nanosleep + 138
2   PrintStand                      0x0130cf60 0x1000 + 19971936
3   PrintStand                      0x012f38ba 0x1000 + 19867834
4   PrintStand                      0x012f9cee 0x1000 + 19893486
5   PrintStand                      0x0130da2a 0x1000 + 19974698
6   PrintStand                      0x01326a64 0x1000 + 20077156
7   libsystem_c.dylib               0x33da072e _pthread_start + 314
8   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib          0x37f3c06c semaphore_timedwait_trap + 8
1   PrintStand                      0x01312ff6 0x1000 + 19996662
2   PrintStand                      0x012f5724 0x1000 + 19875620
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib          0x37f3c3a8 kevent + 24
1   PrintStand                      0x012f438a 0x1000 + 19870602
2   PrintStand                      0x012f9cee 0x1000 + 19893486
3   PrintStand                      0x0130da2a 0x1000 + 19974698
4   PrintStand                      0x01326a64 0x1000 + 20077156
5   libsystem_c.dylib               0x33da072e _pthread_start + 314
6   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x37f3c06c semaphore_timedwait_trap + 8
1   PrintStand                      0x01312ff6 0x1000 + 19996662
2   PrintStand                      0x012f5724 0x1000 + 19875620
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 7:
0   libsystem_kernel.dylib          0x37f3c054 semaphore_wait_trap + 8
1   PrintStand                      0x01313054 0x1000 + 19996756
2   PrintStand                      0x012ada72 0x1000 + 19581554
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 8:
0   libsystem_kernel.dylib          0x37f4ccd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33d9af36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33d9acc8 start_wqthread + 0

Thread 9:
0   libsystem_kernel.dylib          0x37f4ccd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33d9af36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33d9acc8 start_wqthread + 0

Thread 10:
0   libsystem_kernel.dylib          0x37f4ccd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33d9af36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33d9acc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3ed7ed98      r6: 0x01412612      r7: 0x2fdfd38c
    r8: 0x00000000    r9: 0x00000000     r10: 0x01412630     r11: 0x029da2a4
    ip: 0x00000148    sp: 0x2fdfd380      lr: 0x33ddf20f      pc: 0x37f4c32c
  cpsr: 0x00000010

Binary Images:
    0x1000 -  0x14e8fff +PrintStand armv7  <c1610e88f63f34988be9ffac81e9bdbb> /var/mobile/Applications/669F0F9A-8464-489C-BCFB-A66343F011B7/MediawirePrintStandMobilePresentation.app/PrintStand
 0x5906000 -  0x5916fff  Riven armv7  <46e4d9c7b88d3afca369efb40e3ff4d5> /System/Library/TextInput/Riven.bundle/Riven
0x2fedf000 - 0x2ff00fff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x30372000 - 0x30381fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x30382000 - 0x30384fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x30404000 - 0x30413fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x30414000 - 0x30414fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x30419000 - 0x30463fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x30561000 - 0x305a5fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x305a6000 - 0x305aefff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x305b9000 - 0x305bcfff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x30629000 - 0x30642fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x30643000 - 0x30650fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x30c86000 - 0x30ca3fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x30d98000 - 0x30dddfff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x30dee000 - 0x30deefff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x30df2000 - 0x30e11fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x30e12000 - 0x30e28fff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30ea1000 - 0x30f1afff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x312e8000 - 0x31332fff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x31337000 - 0x31388fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x313c0000 - 0x313c5fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x313c6000 - 0x3140efff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x31416000 - 0x314dcfff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x3150b000 - 0x31514fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x3151b000 - 0x31632fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x31664000 - 0x31667fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x3169c000 - 0x317fbfff  libmecabra.dylib armv7  <06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib
0x317fe000 - 0x31ca0fff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x31ca1000 - 0x32460fff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x32473000 - 0x324a8fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x324df000 - 0x324dffff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x32574000 - 0x32577fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x3259f000 - 0x325edfff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x32711000 - 0x32715fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x327a7000 - 0x327a7fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x327a8000 - 0x327befff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x329ff000 - 0x32a09fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x32b3f000 - 0x32b42fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x32c26000 - 0x32c69fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x32c6a000 - 0x32d8ffff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x32d90000 - 0x32d96fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x32e08000 - 0x32e48fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x32e49000 - 0x32e5dfff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x32e83000 - 0x32ea7fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x32ec4000 - 0x32efcfff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x33008000 - 0x331aefff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x331af000 - 0x331b3fff  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x331d2000 - 0x331d2fff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x331d5000 - 0x331dcfff  StoreKit armv7  <e00b0ead8b1030aaafe473eaeb04cafc> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x3334f000 - 0x33893fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x33b22000 - 0x33bccfff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x33bcd000 - 0x33bd1fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x33bd2000 - 0x33ca2fff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x33ca3000 - 0x33d91fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x33d92000 - 0x33e1efff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x33e2d000 - 0x33f76fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x340f2000 - 0x34237fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x3436e000 - 0x3437dfff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x34421000 - 0x34429fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x34478000 - 0x3449dfff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3449e000 - 0x3449ffff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x344ae000 - 0x3476ffff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x34777000 - 0x3478dfff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x347d6000 - 0x347d7fff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x34817000 - 0x348c4fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x3493a000 - 0x34a11fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x34af7000 - 0x34afbfff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x34d92000 - 0x34e11fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x34e50000 - 0x34e99fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x34e9a000 - 0x34f72fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x35444000 - 0x35535fff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3554e000 - 0x35552fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x35553000 - 0x355a4fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x355a5000 - 0x355b1fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x355b2000 - 0x3560afff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x3576f000 - 0x35775fff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x35776000 - 0x35777fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x35957000 - 0x35959fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x35ae1000 - 0x35b51fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x35b97000 - 0x35b9cfff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x35bb0000 - 0x35be7fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x35c41000 - 0x35c47fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x35c48000 - 0x35c6bfff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x35f07000 - 0x35f0dfff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x35fe9000 - 0x35ff5fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x36131000 - 0x36132fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x362e3000 - 0x364c7fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x364da000 - 0x36526fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x365a9000 - 0x365aafff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x366d1000 - 0x366d1fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x366d2000 - 0x3670dfff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x36965000 - 0x3696ffff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x36b30000 - 0x36b3cfff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x36b91000 - 0x36ba2fff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x36d96000 - 0x36d99fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x36e64000 - 0x36e7afff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x36f2f000 - 0x36f33fff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x36f34000 - 0x36f3bfff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x36f43000 - 0x36f7ffff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x36f83000 - 0x36f98fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x36fb3000 - 0x36ff1fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x36ff2000 - 0x37170fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x371af000 - 0x371b6fff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x371b7000 - 0x371d7fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x371d8000 - 0x371d9fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x373ba000 - 0x373bdfff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x373cb000 - 0x3773afff  TextInput armv7  <8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x3792a000 - 0x37930fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x37933000 - 0x3793efff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x37ac0000 - 0x37ac0fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x37cf1000 - 0x37d3afff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x37d51000 - 0x37d5bfff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x37d7d000 - 0x37f3afff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x37f3b000 - 0x37f51fff  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x37f5e000 - 0x37f5ffff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x37f67000 - 0x37f78fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:19:28.517

我有一个类似的错误。如果您使用的是绑定项目，它是否支持您的 ARM 类型？这是一个有类似错误的帖子：

[MonoTouch 绑定库 - EXC_BAD_ACCESS (SIGSEGV)](https://stackoverflow.com/questions/11303130/monotouch-binding-library-exc-bad-access-sigsegv)

查看此代码的第 4 行：

[https://github.com/mono/monotouch-bindings/blob/master/Kiip/binding/libKiip.linkwith.cs](https://github.com/mono/monotouch-bindings/blob/master/Kiip/binding/libKiip.linkwith.cs)

尝试将其添加到带有文件的链接中，看看是否有帮助。您还可以按照以下步骤更改 ARM：

右键单击您的项目转到 iPhone Build > Advanced 更改 ARM 下拉菜单

# python - 如何将文件的一部分视为文件本身？

> ID：11313599
> 
> 赞同：7
> 
> 时间：2012-07-03T14:54:36.267
> 
> 标签：python, compound-file

我将数据存储在文件集合或单个复合文件中。复合文件是通过连接所有单独的文件形成的，然后在所有内容之前加上一个标题，该标题给出了组成部分的偏移量和大小。我想要一个类似文件的对象，它呈现复合文件的*视图*，其中视图仅代表一个成员文件。（这样，我可以拥有读取数据的函数，这些函数可以接受真实的文件对象或“视图”对象，而且他们不必担心任何特定数据集的存储方式。）哪个库会为我做这件事？

这个[`mmap`](http://docs.python.org/library/mmap.html)类看起来很有希望，因为它是由一个文件、一个长度和一个偏移量构成的，这正是我所拥有的，但是偏移量需要与底层文件系统的分配粒度保持一致，而我正在读取的文件不满足那个要求。该类的*名称*符合[`MultiFile`](http://docs.python.org/library/multifile.html)要求，但它是为电子邮件中的附件量身定制的，而且我的文件没有这种结构。

我最感兴趣的文件操作是`read`,`seek`和`tell`. 我正在阅读的文件是二进制文件，因此面向文本的函数`readline`并不`next`那么重要。我可能最终也需要`write`，但我现在愿意放弃该功能，因为我不确定附加应该如何表现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:46:16.123

我知道你正在寻找一个图书馆，但是当我读到这个问题时，我想我会自己写。所以这里是：

```
import os

class View:
    def __init__(self, f, offset, length):
        self.f = f
        self.f_offset = offset
        self.offset = 0
        self.length = length

    def seek(self, offset, whence=0):
        if whence == os.SEEK_SET:
            self.offset = offset
        elif whence == os.SEEK_CUR:
            self.offset += offset
        elif whence == os.SEEK_END:
            self.offset = self.length+offset
        else:
            # Other values of whence should raise an IOError
            return self.f.seek(offset, whence)
        return self.f.seek(self.offset+self.f_offset, os.SEEK_SET)

    def tell(self):
        return self.offset

    def read(self, size=-1):
        self.seek(self.offset)
        if size<0:
            size = self.length-self.offset
        size = max(0, min(size, self.length-self.offset))
        self.offset += size
        return self.f.read(size)

if __name__ == "__main__":
    f = open('test.txt', 'r')

    views = []
    offsets = [i*11 for i in range(10)]

    for o in offsets:
        f.seek(o+1)
        length = int(f.read(1))
        views.append(View(f, o+2, length))

    f.seek(0)

    completes = {}
    for v in views:
        completes[v.f_offset] = v.read()
        v.seek(0)

    import collections
    strs = collections.defaultdict(str)
    for i in range(3):
        for v in views:
            strs[v.f_offset] += v.read(3)
    strs = dict(strs) # We want it to raise KeyErrors after that.

    for offset, s in completes.iteritems():
        print offset, strs[offset], completes[offset]
        assert strs[offset] == completes[offset], "Something went wrong!" 
```

我编写了另一个脚本来生成“test.txt”文件：

```
import string, random

f = open('test.txt', 'w')

for i in range(10):
    rand_list = list(string.ascii_letters)
    random.shuffle(rand_list)
    rand_str = "".join(rand_list[:9])
    f.write(".%d%s" % (len(rand_str), rand_str)) 
```

它对我有用。我测试的文件不是像你这样的二进制文件，它们也没有你的那么大，但我希望这可能有用。如果没有，那么谢谢你，这是一个很好的挑战：D

另外，我想知道，如果这些实际上是多个文件，为什么不使用某种存档文件格式，并使用它们的库来读取它们呢？

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:29:46.943

根据您需要的复杂程度，这样的事情应该可以工作——我已经省略了一些细节，因为我不知道您需要多接近地模拟文件对象（例如，您会使用`obj.read()`, 或你会一直使用`obj.read(nbytes)`）：

```
class FileView(object):
     def __init__(self,file,offset,length):
         self._file=file
         self._offset=offset
         self._length=length

     def seek(self,pos):
         #May need to get a little fancier here to support the second argument to seek.
         return self._file.seek(self._offset+pos)

     def tell(self):
         return self._file.tell()-self._offset

     def read(self,*args):
         #May need to get a little more complicated here to make sure that the number of
         #bytes read is smaller than the number of bytes available for this file
         return self._file.read(*args) 
```

# c++ - 禁用 g++“注意候选项是..”编译器消息

> ID：11313600
> 
> 赞同：33
> 
> 时间：2012-07-03T14:54:40.480
> 
> 标签：c++, g++

很多时候，当我编译有错字或其他类型不匹配的东西时，我会收到标准的“错误：'functionname' in ...”错误。这很棒。然后，特别是在函数和运算符重载的情况下，g++ 继续列出 10 页候选者，这些候选者只是可怕的海量模板定义。

错误消息很棒，但是有什么方法可以禁止它提示其他功能变体？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T18:19:35.767

据我所知，GCC 中没有编译标志可以在函数调用不明确的情况下禁用建议的候选者。

您唯一的希望可能是修补 GCC 源代码。

挖掘它（版本：*4.7.1*），我发现似乎是相关功能`gcc/cp/pt.c`：

```
void
print_candidates(tree fns)
{
  const char *str = NULL;
  print_candidates_1 (fns, false, &str);
  gcc_assert (str == NULL);
} 
```

作为一个有根据的猜测，我认为您只需要注释掉函数体。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-11T16:27:08.580

做`-Wfatal-errors`你想做的事吗？

它停止了第一个错误之后的**所有**错误，这与简单地抑制候选函数注释不同，但它显着减少了输出：

```
$ cat a.cc
void f() { }
void f(int) { }
void f(char) { }

int main()
{
  f((void*)0);
}
$ g++ a.cc
a.cc: In function ‘int main()’:
a.cc:7: error: call of overloaded ‘f(void*)’ is ambiguous
a.cc:2: note: candidates are: void f(int) <near match>
a.cc:3: note:                 void f(char) <near match>
$ g++ a.cc -Wfatal-errors
a.cc: In function ‘int main()’:
a.cc:7: error: call of overloaded ‘f(void*)’ is ambiguous
compilation terminated due to -Wfatal-errors. 
```

或者，如果你想修补 GCC，这会添加一个`-fno-candidate-functions`开关：

```
--- gcc/c-family/c.opt.orig 2012-07-11 16:37:29.373417154 +0000
+++ gcc/c-family/c.opt      2012-07-11 17:09:47.340418384 +0000
@@ -752,6 +752,10 @@
 fbuiltin-
 C ObjC C++ ObjC++ Joined

+fcandidate-functions
+C++ ObjC++ Var(flag_candidates) Init(1)
+-fno-candidate-functions Do not print candidate functions when overload resolution fails
+
 fcheck-new
 C++ ObjC++ Var(flag_check_new)
 Check the return value of new
--- gcc/cp/call.c.orig      2012-07-11 17:08:34.186424089 +0000
+++ gcc/cp/call.c   2012-07-11 17:09:51.843444951 +0000
@@ -3317,6 +3317,9 @@
   for (n_candidates = 0, cand1 = candidates; cand1; cand1 = cand1->next)
     n_candidates++;

+  if (!flag_candidates)
+    return;
+
   inform_n (loc, n_candidates, "candidate is:", "candidates are:");
   for (; candidates; candidates = candidates->next)
     print_z_candidate (loc, NULL, candidates);
--- gcc/cp/pt.c.orig        2012-07-11 16:37:35.658636650 +0000
+++ gcc/cp/pt.c     2012-07-11 17:10:20.910435942 +0000
@@ -1751,9 +1751,12 @@
 void
 print_candidates (tree fns)
 {
-  const char *str = NULL;
-  print_candidates_1 (fns, false, &str);
-  gcc_assert (str == NULL);
+  if (flag_candidates)
+    {
+      const char *str = NULL;
+      print_candidates_1 (fns, false, &str);
+      gcc_assert (str == NULL);
+    }
 }

 /* Returns the template (one of the functions given by TEMPLATE_ID) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-07T22:58:13.217

我的回答不像补丁那么酷。如果你想要一个不那么冗长的错误消息，这个脚本将删除丑陋的代码，只为候选者留下行号。

```
g++ test.cc 2>&1 | sed 's/^\([^ ]*:[0-9]*: note\):.*/\1/' 
```

因此，它可以在这样的脚本中使用：

```
#!/bin/bash
GXX=/usr/bin/g++
ARGS=()
i=0
show_notes=yes
for arg in "$@" ; do
    if [ "$arg" = "-fterse-notes" ] ; then
        show_notes=no
    elif [ "$arg" = "-fno-terse-notes" ] ; then
        show_notes=yes
    else
        ARGS[$i]="$arg"
        i=$[i+1]
    fi
done
if [ $show_notes = yes ] ; then
    exec ${GXX} "${ARGS[@]}"
else
    exec ${GXX} "${ARGS[@]}" 2>&1 | sed 's/^\([^ ]*:[0-9]*: note\):.*/\1/'
fi 
```

如果此脚本的名称`g++`在您的路径中，则它应该像您添加了一个名为`-fterse-notes`.

# java - OneJar 运行其他类

> ID：11313603
> 
> 赞同：0
> 
> 时间：2012-07-03T14:54:47.503
> 
> 标签：java, jar

使用onejar时是否可以在其他类上运行main方法？它作为可执行文件运行良好，但我希望能够运行其他类而无需重新打包。

例如

```
java -jar myonejar.jar  //works fine

java -cp .;myonejar.jar test.Test //Error: Could not find or load main class 
```

# c# - 找出哪个控件触发了回发

> ID：11313604
> 
> 赞同：3
> 
> 时间：2012-07-03T14:54:49.193
> 
> 标签：c#, asp.net, visual-studio-2010, user-controls

我有 aspx 网站，其中有多个用户控件。我想知道哪个控件（按钮、下拉菜单、单选按钮）从这些用户控件触发了回发。我怎么能做到这一点。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:57:19.667

来自： [http ://ryanfarley.com/blog/archive/2005/03/11/1886.aspx](http://ryanfarley.com/blog/archive/2005/03/11/1886.aspx)

```
string ctrlname = page.Request.Params.Get("__EVENTTARGET");
if (ctrlname != null && ctrlname != string.Empty)
{
    return this.Page.FindControl(ctrlname);
} 
```

# python - 在 Python 中使用 minidom 提取节点引用 ID

> ID：11313605
> 
> 赞同：0
> 
> 时间：2012-07-03T14:54:54.003
> 
> 标签：python, xml, minidom

我在 Python 中使用 minidom，我想搜索节点列表（书），对于属性“名称”等于“统计”的每个书节点，我想打印节点参考。这是我要处理的 XML 文件的示例：

```
<book id='123'>
    <name>statistics</name>
</book>

<book id='234'>
    <name>mathematics</name>
</book>

<book id='345'>
    <name>statistics</name>
</book> 
```

期望的输出是：

```
123
345 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:08:48.997

遍历 book 元素并查看名称节点以查看其统计信息。如果是打印出书节点的属性，id。

```
import xml.dom.minidom
Document = "<books>\
            <book id='123'>\
                <name>statistics</name>\
            </book>\
            <book id='234'>\
                <name>mathematics</name>\
            </book>\
            <book id='345'>\
                <name>statistics</name>\
            </book></books>"

dom = xml.dom.minidom.parseString(Document)
for book in dom.getElementsByTagName("book"):
   node = book.getElementsByTagName("name")[0] 
   if node.firstChild.data.strip().lower() == "statistics":
        print int(book.getAttribute("id").strip()) 
```

输出

```
123
345 
```

# javascript - 哪些库可以在运行时记录 javascript 使用情况？

> ID：11313606
> 
> 赞同：3
> 
> 时间：2012-07-03T14:55:02.783
> 
> 标签：javascript

我们有一个 Web 应用程序，是否有任何库可以添加到代码库中以便在运行时记录任何方法调用？

**编辑** 更多细节..

1）应用程序正在生产中运行，我们需要不时将日志发送回服务器

2）我无法包装任何函数调用，这就是为什么我正在寻找一个可以进行某种检测或其他工作的库..所以本质上我正在寻找一个自动记录器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:58:55.713

JavaScript 在客户端计算机上运行，​​因此您可以看到的任何日志记录都必须

*   在您控制的客户端计算机上（例如用于调试目的），或者
*   在某个时间点将日志文件发送回服务器以供您分析。

如果您询问第一个，[FireBug](http://getfirebug.com/javascript/)可以记录函数调用。

如果您需要更一般的日志记录，*也*可以将结果发送回服务器，[那么 log4javascript](http://log4javascript.org/)值得一看。具体看一下[AjaxAppender](http://log4javascript.org/demos/ajax.html)。

# ruby-on-rails - 如何将字符串数组转换为逗号分隔的字符串？

> ID：11313613
> 
> 赞同：70
> 
> 时间：2012-07-03T14:55:22.820
> 
> 标签：ruby-on-rails, ruby, arrays

我有一个数组：

```
array = ["10", "20", "50", "99"] 
```

我想把它转换成一个简单的逗号分隔的字符串列表，如下所示：

```
"10", "20", "50", "99" 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-03T14:58:41.513

`array.join(',')`几乎会做你想做的事；它不会保留值周围的引号或后面的空格。

保留引号和空格：`array.map{|item| %Q{"#{item}"}}.join(', ')` 这将打印`"\"10\", \"20\", \"50\", \"99\""`. 假设问题确实需要单个字符串，则转义引号是必要的。

`%Q`关于:[字符串文字](http://ruby-doc.org/core-2.1.0/doc/syntax/literals_rdoc.html#label-Strings)的文档。

您*可以*`inspect`按照[另一个答案中的建议](https://stackoverflow.com/a/11313677/385532)使用，我会说这是个人喜好。我不会，去看看[源代码](https://ruby-doc.org/core-2.3.0/String.html#method-i-inspect)并自己选择。

除了有用的：`array.to_sentence`会给​​你一个“1、2、3和4”风格的输出，这很好！

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-07-03T14:58:45.277

```
["10", "20", "50","99"].map(&:inspect).join(', ') # => '"10", "20", "50", "99"' 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-03T14:58:29.683

这里：

```
array.map {|str| "\"#{str}\""}.join(',') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-03T16:57:36.857

几个答案提供了使用`#map`, `#inspect`,的解决方案`#join`。对于涉及元素中嵌入的逗号和/或字符串分隔符的边缘情况，所有这些都无法获得正确的 CSV 编码的某些细节。

使用 stdlib 类[CSV](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)然后自己滚动可能是一个更好的主意。

```
irb> require 'csv'
=> true
irb> a = [10,'1,234','J.R. "Bob" Dobbs',3.14159]
=> [10, "1,234", "J.R. \"Bob\" Dobbs", 3.14159]
irb> puts a.to_csv
10,"1,234","J.R. ""Bob"" Dobbs",3.14159 
```

如果此编码不需要关心嵌入式分隔符，或者仅用于某些内部表示，则 map.join 解决方案就足够了，但如果生成数据以与其他期望逗号分隔值 (CSV) 的程序交换，它们将失败一般理解的表示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-14T07:12:45.617

最简单的解决方案是使用内置的“.to_sentence”方法。

所以

["fred", "john", "amy"].to_sentence 输出 "fred, john, and amy"

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-16T17:39:33.010

这是一个稍微替代的解决方案，如果您需要将带有双引号字符串的数组转换为单引号列表（例如 SQL 查询），则特别方便：

```
"'#{["John Oliver", "Sam Tom"].join("','")}'" 
```

到

```
'John Oliver', 'Sam Tom' 
```

署名：[https ://alok-anand-ror.blogspot.com/2014/04/ruby-join-array-elements-with-single.html](https://alok-anand-ror.blogspot.com/2014/04/ruby-join-array-elements-with-single.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-10T09:24:05.187

这是您可以使用 FCM for Android 设备发送推送通知的方式。假设您想在用户在其状态上发布某些内容时通知关注者，这就是您的操作方式。这是在 Rails 5.2.6 for Rest APIs 中完成的——但您仍然可以将其用于 Web 推送通知。这是为了向许多带有registration_ids的设备发送通知以定位关注者。宝石：控制器中的 fcm：

```
require "fcm"

def create_vibe(user)
  @vibe = user.vibes.new(content: @content, picture: @picture, video: @video, isvideofile: @isvideofile, video_thumbnail: @video_thumbnail, source: @source, background_color: @background_color)
  @followed = user.followers
  if @followed.present?
    @registration = @followed.map { |s| s.registration_id }
  end
  if @vibe.save
    fcm = FCM.new("") # set your FCM_SERVER_KEY

    options = {
      data: {
        notification_type: 1,
        title: "#{@vibe.user.username} " "has posted a new Vibe",
        body: "#{@vibe.content}",
        user_data: {
          vibe_id: @vibe.id,
          user_id: @vibe.user.id,
          background_color: @background_color,

        },
      },
    }
    response = fcm.send(@registration, options)
    puts response
    render :status => 200,
      :json => { :success => true,
                :info => "Vibe posted successfully",
                :vibe_info => {
        :content => @content,
        :picture => @picture,
        :video => @video,
        :video_thumbnail => @video_thumbnail,
        :isvideofile => @isvideofile,
        :source => @source,
        :fcm => options,
      } }
  else
    render :status => 200, :json => { :success => false, :result => "Vibe can't be blank" }
  end
end 
```

# sql - CASE 等效于嵌套的 IIF 语句

> ID：11313616
> 
> 赞同：1
> 
> 时间：2012-07-03T14:55:25.517
> 
> 标签：sql

任何人都可以将以下嵌套 IIF 解码为 SQL 中的 CASE 语句。我知道 SQL Server 2012 中允许使用 IIF，但我发现很难轻松掌握嵌套 IIF 逻辑。以下是我的嵌套 IIF 语句

```
IIF(IIF(TABLE_A.Col_1 = 0, TABLE_A.Col_2 + (2*TABLE_A.Col_3), TABLE_A.Col_1)<=.5, 'A', 'B') AS Result 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:59:44.043

This should be the equivalent:

```
CASE
    WHEN
        CASE
            WHEN TABLE_A.Col_1 = 0
            THEN TABLE_A.Col_2 + (2*TABLE_A.Col_3)
            ELSE TABLE_A.Col_1
        END <= .5
    THEN 'A'
    ELSE 'B'
END As Result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:59:38.230

```
CASE 
    WHEN 
     (CASE 
          WHEN TABLE_A.Col1= 0 
          THEN TABLE_A.Col2_2 + (2*TABLE_A.Col3)
          ELSE TABLE_A.Col1 
      END) <=0.5 
    THEN 'A'
    ELSE 'B'
END
AS result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:07:35.243

我认为这可以归结为一个 CASE 表达式：

```
CASE
  WHEN TABLE_A.Col_1 = 0 AND TABLE_A.Col_2 + (2*TABLE_A.Col_3) <= .5 THEN 'A'
  WHEN TABLE_A.Col_1 <> 0 AND TABLE_A.Col_1 <= .5 THEN 'A'
  ELSE 'B'
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T16:16:52.383

现在这已经过时了，并且还有其他答案已经有效，但是为了好玩，可以将其编写为一个函数表达式，根本不需要任何 CASE 语句，如下所示：

```
char(65 + ceiling(ceiling(COALESCE(NULLIF(TABLE_A.Col_1, 0), TABLE_A.Col_2 + (2*TABLE_A.Col_3))) - .5 / 10000000000000)) 
```

函数式方法在具有良好索引的大型集合上表现得更好的可能性非常小。

这是我的概念验证测试脚本：

> [http://sqlfiddle.com/#!3/a95b3/2](http://sqlfiddle.com/#!3/a95b3/2)

# java - 通过java程序中的批处理文件设置\获取环境变量

> ID：11313617
> 
> 赞同：1
> 
> 时间：2012-07-03T14:55:28.690
> 
> 标签：java

我面临一个问题，我需要从 java 程序运行一个 bat 文件。此批处理文件包含某些 SET ms-dos 命令，我需要在我的应用程序中进一步访问。

我使用 ProcessBuilder 类来调用批处理文件，但 processBuilder.environment() 没有返回批处理文件设置的变量。

DOS SET 命令仅在该提示下设置变量。

我无法找到此问题的解决方案。

有没有针对此类问题的其他方法。我无法更改批处理文件。

问候阿拜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:52:36.163

您的 ProcessBuilder 实例包含子进程使用的环境变量。您应该引用`processBuilder.environment()`而不是引用 中找到的父进程的环境变量`System.getenv()`。

但是，您可能会发现它仍然是一条单行道。您可以在那里设置环境变量以传递给您的进程外壳，但 SET 命令所做的更改将无法在回程中继续存在。

所以，这是另一种方法。编写一个批处理文件作为包装脚本，并将所需的变量输出到更容易访问的地方，如 stdout、stderr 或文件。

```
wrapper.bat
===========
@echo off
call "D:\build\XL_7_12\XL_7_12\build\xl_env.cmd"
echo ROOT=%ROOT%,FOLDER=%FOLDER% 
```

然后你`wrapper.bat`从 Java 中调用你的，并从你的 process.getInputStream() 的最后一行收集和解析 ROOT 和 FOLDER 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:11:35.177

另一种方法是将 ECHO 命令的输出重定向到一个文件，然后稍后从 Java 中读取它。例如。

```
echo ROOT=%ROOT%,FOLDER=%FOLDER% > \temp\vars.txt 
```

然后从 java 中读取 \temp\vars.txt。这可能比读取输入流要容易一些。最后，请注意，您可以向 command.exe interperter 的单个副本发出两个命令，而不是 wrapper.bat 文件，从而共享环境，因此您可以：

```
D:\build\XL_7_12\XL_7_12\build\xl_env.cmd & ECHO %ROOT% > \temp\vars.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:58:06.953

[System.getenv](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv%28java.lang.String%29)让你获得一个环境变量。它也应该在这种情况下工作。还有[另一个版本](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv%28%29)返回`Map`环境变量。

# android - 如何为对话框dialogfragment设置长标题？

> ID：11313619
> 
> 赞同：1
> 
> 时间：2012-07-03T14:55:31.300
> 
> 标签：android

我想要带有书名的标题对话框。问题出在长标题上，似乎默认标题对话框试图修剪超长文本以适应对话框宽度

![在此处输入图像描述](../Images/5f1cda53edd31bdc5159043ad1826e8f.png)

所以我想出了通过这段代码删除默认标题的解决方案

```
setStyle(STYLE_NO_TITLE, 0); 
```

用 textview 小部件替换默认值。这是我的自定义对话框 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/dialog_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

但是它只是弄乱了对话框布局

![在此处输入图像描述](../Images/b6d046596ba9cfccfa37ab7fe8ec21b9.png)

那么任何人都可以更好地处理这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:54:54.603

You can use [google](https://www.google.com.pk/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sa=X&ei=6yLzT_v5F-3N4QTHtMnWCQ&ved=0CEAQvwUoAQ&q=android%20custom%20dialog&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=673242acfd9407a3&biw=1241&bih=567&ion=1) to set custom view to a dialog

but don't forget to `dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);` :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:17:27.610

So in your DialogFragments onCreate you setStyle:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NO_TITLE, R.style.Theme_Dialog);
} 
```

You then use your own very custom xml layout to create the dialog in oncreateview().

# scala - 嵌套宏调用是否安全？

> ID：11313625
> 
> 赞同：6
> 
> 时间：2012-07-03T14:55:57.623
> 
> 标签：scala, macros, scala-2.10

我一直在测试一些嵌套的宏调用，它们按预期工作（......正如我所料！）例如，假设一个虚构的*add*宏和以下表达式：

```
add(1, add(2, 3)) 
```

首先，内部 add 被扩展 (2 + 3)，其次外部 add 完成它的部分 (1 + (2 + 3))。我已经看到外部宏在输入表达式中没有收到来自内部调用的任何噪音，因此内部扩展似乎对它完全透明。这个事实是否总是成立（即使是更复杂的宏和类型）？这样做安全吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T16:39:45.610

最里面的宏总是首先展开（即使它们是作为名称参数提供的）。

# java - Eclipse 中泛型类型的自动完成

> ID：11313628
> 
> 赞同：8
> 
> 时间：2012-07-03T14:56:16.977
> 
> 标签：java, eclipse, generics, autocomplete, effective-java

正如 Effective Java 中提到的，“通过接口引用对象”是一个很好的实践。所以例如我更喜欢

```
List<String> al = new ArrayList<String>(); 
```

超过

```
ArrayList<String> al = new ArrayList<String>(); 
```

在我的代码中。一件烦人的事情是，如果我`ArrayList<String> al = new`在 Eclipse 中键入然后按 Ctrl+Space，我会得到`ArrayList<String>()`建议。但是，如果我键入 List al = new 然后按 Ctrl+Space 我将只得到定义匿名内部类的建议，而不是诸如`new ArrayList<String>()`99% 的情况或例如 new 之类的建议`Vector<String>()`。

**问题**：有没有办法让子类作为泛型类型的建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T15:12:27.367

我建议简单地先写表达式然后点击`Ctrl+2, L`. 然后，您可以命名变量，后跟`Enter, Down, Enter`. 完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:59:15.593

根据您编写此类代码的个人风格，这是受@Ben Schulz 答案启发的替代方法。如果你通常先写作业，比如

```
al = new ArrayList<String>(); 
```

然后您可以使用`Ctrl+1`启动“创建局部变量”快速修复。点击`Tab`现在将直接打开您选择类型的类型选择`List`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T07:58:23.947

JDK 1.7 不需要在等号右边指定泛型类型。首选项 -> Java -> 编译器到 1.6

# c++ - 使用 windows API 处理 txt 文件的内容

> ID：11313630
> 
> 赞同：0
> 
> 时间：2012-07-03T14:56:28.820
> 
> 标签：c++, windows, file, buffer, readfile

我使用如下代码片段来获取文本文件的内容。然而，最后的缓冲区`buff`在一个地方只有数字 8，没有别的。正在打开的文件的唯一内容是“项目”一词。我如何处理（即打印）我应该收到的内容或结果？以下代码有什么问题：

```
 TCHAR buff[20];
        DWORD dwNumRead;
        CString finalPath = path + L"\\" + fileName.c_str();
        HANDLE hfile=CreateFile(finalPath ,GENERIC_READ|GENERIC_WRITE,0,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);

        if(ReadFile(hfile,buff,20,&dwNumRead,NULL))
        {
            CString temp;
            temp.Format(L"%s",&buff[0]);
            ATLTRACE(L"Success %s", temp);
        }
        CloseHandle(hfile); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:32:46.947

问题是您试图打印由带有 %s 宏的宽字符组成的 MFC CString。您需要 %S 宏来打印宽字符。

这有效：

```
 char buff[20] = "";
    DWORD dwNumRead;
    CString finalPath = path + L"\\" + fileName.c_str();;
    HANDLE hfile=CreateFile(finalPath ,GENERIC_READ|GENERIC_WRITE,0,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);

    if(ReadFile(hfile,buff,20,&dwNumRead,NULL))
    {
        CString temp = buff;
        ATLTRACE("Success %S", temp);
    }
    CloseHandle(hfile); 
```

否则，使用以下额外的 C++ defs 以 unicode 编译您的程序。UNICODE,_UNICODE

# java - Java 遍历所有文件和目录中唯一的 RAR 档案

> ID：11313632
> 
> 赞同：1
> 
> 时间：2012-07-03T14:56:37.087
> 
> 标签：java

如何遍历目录中的所有 RAR 档案。我知道如何遍历目录中的文件，但我只对 RAR 档案感兴趣。如果它们是带有扩展名的简单 RAR 档案，`.rar`那将不是问题，但我的目录可以有多个跨区档案，我只想要集合中的第一个/主卷。我还想在目录中有其他文件：

以下是示例目录的内容：

*   `file.txt`
*   `somefile.zip`
*   `hello.rar`
*   `test.part1.rar`
*   `test.part2.rar`
*   `example.rar`
*   `example.r00`

结果：

*   `file.txt`
*   `somefile.zip`
*   `hello.rar`
*   `test.part1.rar`
*   `example.rar`

这就是我在目录上使用的迭代：

```
 import java.io.File;

  ...

  for (File child : (new File(myDirectoryPath)).listFiles()) {
    if (!child.isDirectory()) {
      //Do something with the file
    }
  } 
```

我怎样才能做到这一点？我需要检测它是否是 RAR 存档。如果不是，请使用它。如果是，我需要检查它是否是档案的第一部分。如果是，请执行任何操作，否则忽略它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:20:02.213

寻找解决方案的困难在于，当 .rar 档案跨越多个文件时，没有固定的命名技术。此外，没有什么可以阻止用户创建一个随机文件，该文件被命名为好像它是一个跨越的 rar 部分之一。确定这一点的唯一正确方法是实际读取每个可疑文件的内容，并查看这是否是跨区 rar 文件的延续。除了复杂之外，这也将是令人无法接受的缓慢。

但是，在大多数情况下，拆分文件以`file.rar`（`file.rXX`恰好 2 位数字）作为延续或`file.partXXX.rar`以第一个文件命名`file.part1.rar`（XXX 从 1 开始，一直到最大数字）。因此，您可以尝试使用以下内容来捕捉这两种情况`FilenameFilter`。

这种方法的缺点是，如果文件碰巧被随机命名，它会丢弃文件，例如，`somefile.part2.rar`或者`otherfile.r03`，但是，希望这在很大程度上对您有所帮助。

```
for (File child : (new File(myDirectoryPath)).listFiles(new FilenameFilter() {
    private Pattern p1 = null;
    private Pattern p2 = null;
    public boolean accept(File dir, String name) {

        name = name.toLowerCase();

        if(p1 == null) {
            p1 = Pattern.compile("\\.r\\d\\d");
            p2 = Pattern.compile("\\.part\\d+\\.rar");
        }

        if(name.endsWith(".part1.rar")) {
            return true;
        }
        else if(p2.matcher(name).matches()) {
            return false;
        }
        else {
            return !p1.matcher(name).matches();
        }
    }
}) {
    if (!child.isDirectory()) {
      //Do something with the file
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:35:34.897

我编写了这段代码来识别 RAR 档案，我只考虑了跨区档案的第一卷而忽略了其他档案。

```
/**
 * Checks whether a file is an archive
 *
 * @param    filFile        the file to checks
 * @retuns                  a bollean value indicating the result
 */
 public static Boolean isArchive(File filFile) {  

     try {

         byte[] bytSignature = new byte[] {0x52, 0x61, 0x72, 0x21, 0x1a, 0x07, 0x00};
         FileInputStream fisFileInputStream = new FileInputStream(filFile);

         byte[] bytHeader = new byte[20];
         fisFileInputStream.read(bytHeader);

         Short shoFlags = (short) (((bytHeader[10]&0xFF)<<8) | (bytHeader[11]&0xFF));

         //Check if is an archive
         if (Arrays.equals(Arrays.copyOfRange(bytHeader, 0, 7), bytSignature)) {
             //Check if is a spanned archive
             if ((shoFlags & 0x0100) != 0) {
                 //Check if it the first part of a spanned archive
                 if ((shoFlags & 0x0001) != 0) {
                     return true;
                 } else {
                     return false;
                 }
             } else {
                 return true;
             }
         } else {
             return true;
         }

     } catch (Exception e) {
         return false;
     }

 } 
```

我使用了[官方的 RAR 标头规范](http://net.pku.edu.cn/~course/cs402/2009/resource/rar/technote.txt)。为了实现这一点并解析字节，我在这里进行了讨论：

[如何从二进制文件中读取十六进制值并破译一些包含位标志值的字节？](https://stackoverflow.com/questions/11316637/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:02:54.250

检查您的文件名是否以（“.rar”）结尾并将其放入集合中以确保唯一性

```
Set<String> fileSet=new HashSet<String>();

if(fileName.endsWith(".rar")){
    set.add(fileName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:18:55.327

第1步：`File.listFile(FileFilter)`是你的朋友。正确实施，这将只为您提供 RAR 和跨越文件。

第 2 步：像上面建议的那样，在不同的集合中收集所有名称的前缀。

# regex - 带有正则表达式的 Bash 脚本在 Ubuntu 上不起作用

> ID：11313635
> 
> 赞同：0
> 
> 时间：2012-07-03T14:56:44.837
> 
> 标签：regex, bash, ubuntu

我有一个在我的 OpenSuSE 机器上运行的 Bash 脚本，但是当复制到我的 Ubuntu 机器时，它不起作用。脚本从文件中读取。该文件具有由空格（制表符和空格）分隔的字段。

```
#!/bin/bash
function test1()
{
    while read LINE
    do
        if [[ $LINE =~ "^$" || $LINE =~ "^#.*" ]] ; then
            continue;
        fi
        set -- $LINE
        local field1=$1
        local field2=$2
    done < test.file
}

test1 
```

与 test.file 包含：

```
# Field1Header    Field2Header
abcdef            A-2
ghijkl            B-3 
```

似乎有两个问题：

(1) $field2，带连字符的那个，是空白的

(2) 去除以# 开头的空行和行的正则表达式不起作用

有谁知道怎么了？正如我所说，它在 OpenSuSE 上运行良好。

谢谢，保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:10:47.893

1.  Quoting is wrong, that probably accounts for the regex failing.
2.  No need to use bashisms.
3.  No need to use `set`

Try

```
while read field1 field2 dummy
do
    if ! test "${field1%%#*}"
    then
        continue
    fi
    # do stuff here
done 
```

**EDIT**: The obvious version using `set`

```
while read -r line
do
    if ! test "${line%%#*}"
    then
        continue
    fi
    set -- $line
    do_stuff_with "$@"
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:11:22.827

Apparently, as of bash 3.2 the regular expression should not be quoted. So this should work:

```
#!/bin/bash
while read LINE
do
    if [[ $LINE =~ ^$ || $LINE =~ ^#.* ]] ; then
        continue;
    fi
    set -- $LINE
    local field1=$1
    local field2=$2
done < test.file 
```

Edit: you should probably use Jo So's answer as it's definitely cleaner. But I was explaining why the regex fails and the reason behind the different behavior between OpenSuse and Ubuntu(different version of bash, very probably)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-03T15:10:32.523

On my ubuntu there is no expresion like "=~" for `test` command. Just use this one:

```
if [[ $LINE = "" || ${LINE:0:1} = "#" ]] ; then
    continue;
fi 
```

# unix - 什么是交换文件？

> ID：11313639
> 
> 赞同：4
> 
> 时间：2012-07-03T14:56:59.840
> 
> 标签：unix, vi

使用 vi 我开始编辑一个 html 文件，但我不小心退出了会话，现在当我再次尝试编辑该文件时，我收到此消息：

> E325：注意在打开文件“myfile.html”时发现名为“.myfile.swp”的交换文件日期：2012 年 7 月 3 日星期二 09:55:39
> 
> (1) 另一个程序可能正在编辑同一文件。如果是这种情况，请注意在进行更改时不要以同一文件的两个不同实例结束。退出，或谨慎继续。
> 
> (2) 此文件的编辑会话崩溃。如果是这种情况，请使用 ":recover" 或 "vim -r myfile.html" 来恢复更改（参见 ":help recovery"）。如果您已经这样做了，请删除交换文件“.myfile.html.swp”以避免出现此消息。
> 
> 交换文件“.myfile.html.swp”已经存在！

myfile.html 是否发生任何损坏？

我认为正在发生的是它在我退出会话（交换文件）时存储打开文件的副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T15:00:02.363

From the [Vim documentation](http://vimdoc.sourceforge.net/htmldoc/recover.html):

> Vim stores the things you changed in a swap file. Using the original file you started from plus the swap file you can mostly recover your work.

The documentation also describes [the recovery procedure](http://vimdoc.sourceforge.net/htmldoc/recover.html#recovery) in case you need it.

# objective-c - Objective-c : 加载图像文件的一部分

> ID：11313640
> 
> 赞同：1
> 
> 时间：2012-07-03T14:56:59.770
> 
> 标签：objective-c, opengl, core-graphics

我在 CG API 中进行了搜索，但没有找到任何方法来仅加载给定图像中的像素子集。

我需要在运行时在 openGL 中加载一个非常大的图像（要求是我不能在编译时调整它的大小）。纹理尺寸太大（> GL_MAX_TEXTURE_SIZE），所以我将它细分为其他较小的图像，这样openGL就不会抱怨。

现在这是我加载大图像的方法：

```
NSData *texData = [[NSData alloc] initWithContentsOfFile:textureFilePath];
UIImage *srcImage = [[UIImage alloc] initWithData:texData]; 
```

然后我使用 CG 使用 CGImageCreateWithImageInRect() ... 来细分图像，并准备好将其发送到 openGL。

问题是在 iPod touch 上应用程序崩溃了，因为它在加载大图像后占用了太多内存。我想只加载感兴趣的像素，而不必创建巨大的内存峰值，然后我可以释放内存并加载我需要的下一个块。有人知道这是否可能？

# sql - 在提交到数据库之前裁剪 NVARCHAR(MAX) - 多长？

> ID：11313645
> 
> 赞同：0
> 
> 时间：2012-07-03T14:57:11.290
> 
> 标签：sql, sql-server-2012, nvarchar

我有一个带有类型的 SQL 行

```
summary NVARCHAR(4000) NULL 
```

在我向表中添加任何数据之前，我在代码中检查它并修复它，如果用户输入的字符串对于使用此代码的数据库来说太长

```
if (instanceToCrop.Description != null && instanceToCrop.Description.Length > 4000) instanceToCrop.Description = instanceToCrop.Description.Substring(0, 4000); 
```

如果我这样改变我的桌子

```
ALTER TABLE Timeline
ALTER COLUMN summary NVARCHAR(MAX) 
```

我应该使用什么常量来代替 4000 以将提交的字符串保持在 SQL 服务器拒绝的长度以下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:03:10.110

您可以在 NVARCHAR(MAX) 中存储的最大字符数为 1,073,741,823 或非常接近。如果您的用户可以在您的文本框中输入这么多的文本，那么可能存在一些不理想的情况……他们是在粘贴《圣经》还是所有《指环王》电影的抄本？

我认为你可以设置一个更实际的限制，但我们不能真正告诉你应该是什么...... 50,000 个字符？100,000 个字符？由于网络/数据包原因小于 64KB？不知道，这似乎是一个商业决策，而不是技术决策。

# zend-framework - ZF 最后插入的 id

> ID：11313646
> 
> 赞同：2
> 
> 时间：2012-07-03T14:57:11.310
> 
> 标签：zend-framework, zend-db

这段代码是否给了我最后插入的记录 id，即使在负载很重的页面上也是如此？

```
 db = Zend_Db_Table::getDefaultAdapter();
  $db->insert($this->_name, $fields_values);
  $idAddress = $db->lastInsertId($this->_name); 
```

问候安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T06:12:58.223

我正在使用这个...

```
db = Zend_Db_Table::getDefaultAdapter();
$lastInsertId = $db->insert($this->_name, $fields_values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:55:35.623

该`Zend_Db_Adapter_Abstract::lastInsertId()`方法是`PDO::lastInsertId()`. 根据文档：

> PDO::lastInsertId — 返回最后插入的行或序列值的 ID
> 
> **笔记：**
> 
> 此方法可能不会在不同的 PDO 驱动程序之间返回有意义或一致的结果，因为底层数据库甚至可能不支持自增字段或序列的概念。

现在你知道了。使用它作为您自己的风险！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:48:14.960

```
public function saveData(array $data) {
    $this->_setName('user');

    // this will return all field name for user table in $field variable
    $fields = $this->info($this->getConstCol());

    // By this foreach loop we will set data in $data array
    foreach ($data as $field => $value) 
    {
        if (!in_array($field, $fields)) 
        {
            unset($data[$field]);
        }
    }
    // It will call insert function of (Zend_Db_Table_Abstract Parent of Zend_Db_Table)
    // It will return $pkData which is primary key for user table

    return $this->insert($data); // It will return last insert ID
 } 
```

# ios - 使用 clang 集成汇编器为 iOS 5.1 编译 NEON 时出错

> ID：11313652
> 
> 赞同：1
> 
> 时间：2012-07-03T14:57:27.413
> 
> 标签：ios, assembly, clang, neon

我尝试使用 LLVM clang 集成宏汇编器（XCode 4.3 附带的 LLVM 编译器）编译 NEON 汇编代码并得到以下错误：

```
vld1.8 {D0}, [R0] - invalid operand for instruction 
```

可能是什么原因？为什么这条指令被 GAS 成功编译为 Android 而不能被 'clang -integrated-as ...' 编译为 iOS？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:27:44.673

经过一天的实验，我找到了解决方案。我刚刚从 SVN 源代码库（版本 3.2）编译了 LLVM。与 XCode 4.3.1 附带的 LLVM 3.0svn 相比，LLVM 3.2svn 中集成的宏汇编器对 ARM NEON ISA 的支持要好得多。VLD NEON 指令的问题已自动解决。

那些使用**gas-preprocessor.pl** Perl 脚本的人可能会尝试从 GAS 1.38（它是 Mac OS X 10.7.X 上 LLVM 使用的外部 GNU 汇编器）切换到 LLVM 集成宏汇编器并停止使用不必要的预处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:11:23.847

我没有使用 clang 进行组装，但以下站点可能会有所帮助：[ARM Assembly](http://www.shervinemami.info/armAssembly.html#template)

此外，这可能会有所帮助，因为它解决了其他人的 ARM 程序集问题（选择正确的设备、小写指令等......）：[有用的 Stackoverflow 答案](https://stackoverflow.com/a/10507325/558933)

# java - 在 Android 上使用 PowerMock 进行验证错误

> ID：11313656
> 
> 赞同：6
> 
> 时间：2012-07-03T14:57:33.803
> 
> 标签：java, android, unit-testing, junit, powermock

我正在尝试使用 PowerMock 来模拟一些用于测试我们的 Android 应用程序的类（例如蓝牙套接字）。

我已经在 PowerMock 的谷歌代码页上下载了包含所有依赖项的 zip 文件，并将它们添加到我的 Android 测试项目（包括构建路径）中。

但是，当我尝试像这样使用 PowerMock 时：

```
@RunWith(PowerMockRunner.class )
@PrepareForTest( NetworkUtil.class )
public class TestSendAck extends TestCase{

    @Test
    public void testGenerateURL() {
         PowerMock.mockStatic( NetworkUtil.class );

         EasyMock.expect( NetworkUtil.getLocalHostname() ).andReturn( "triumph" );

         PowerMock.replayAll();
         PowerMock.verifyAll();
    }
} 
```

我得到以下堆栈跟踪：

```
java.lang.ExceptionInInitializerError
at org.easymock.internal.ClassProxyFactory.createEnhancer(ClassProxyFactory.java:249)
at org.easymock.internal.ClassProxyFactory.createProxy(ClassProxyFactory.java:159)
at org.easymock.internal.MocksControl.createMock(MocksControl.java:59)
at org.powermock.api.easymock.PowerMock.doCreateMock(PowerMock.java:2212)
at org.powermock.api.easymock.PowerMock.doMock(PowerMock.java:2163)
at org.powermock.api.easymock.PowerMock.mockStatic(PowerMock.java:287)
at se.metrima.mafield.test.TestSendAck.testGenerateURL(TestSendAck.java:19)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)
Caused by: java.lang.VerifyError: net.sf.cglib.core.ReflectUtils
at net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)
at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
at net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
at net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
... 19 more 
```

我只在将测试项目作为 Android JUnit 测试运行时出现此错误，如果我将它作为常规 JUnit 测试运行，powermock 可以正常工作，但是我所有需要 Android 框架的测试自然会失败。

我该如何解决这个问题？我对单元测试很陌生，所以我还没有真正理解所有概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:51:15.347

在 Android 下的测试的类路径设置中，您可能有不明确的 JUnit 库版本。您是否尝试使用 JUnit 3 或 4 运行？您的代码使用了 4 的注解，还扩展了 3 的 TestCase 基类，您不能将两者混用。现在最好使用 JUnit 4。我对 Android 开发不太熟悉，因此请检查 Android 环境正在寻找的 JUnit 版本。接下来要检查的是您是否使用了正确版本的 PowerMock，因为 JUnit 3 和 4 有不同的版本。

# windows - Emacs Windows - 大写锁定不启用大写输入

> ID：11313658
> 
> 赞同：3
> 
> 时间：2012-07-03T14:57:38.933
> 
> 标签：windows, emacs, capslock

我有适用于 Windows 的 Emacs 24.1.1。当我打开 capslock 键时，Emacs 不启用大写输入。Capslock 在其余的窗口和我的 ssh 终端中工作。我没有做任何修改 capslock 键。`w32-capslock-is-shiftlock`是`nil`。`w32-enable-caps-lock`是`t`。

这是预期的行为还是错误？

# javascript - 多重验证检查 - 逻辑错误

> ID：11313662
> 
> 赞同：0
> 
> 时间：2012-07-03T14:57:54.200
> 
> 标签：javascript, html, forms, validation

我正在为密码表单提供验证功能。我需要能够实现一些验证规则并在提交时检查它们。现在对我来说代码是正确的，但我认为它们可能是我的代码中的一些逻辑错误，我太累了，无法注意到（咖啡机也是如此！）

这是JavaScript：

```
<script type="text/javascript">
<!--
    function validate(registerForm)
    registerForm.onsubmit=function()
    {
        var pw1 = document.forms["register"]["password1"].value;
        var pw2 = document.forms["register"]["password2"].value;

        //Check values are present in both fields
        if(pw1 == '' || pw2 == '')
        {
            alert("Please enter your password twice.");
            return false;
        }
        //Check there no spaces
        else if(document.forms["register"]["password1"].value.indexOf(invalid) > - 1) 
        {
            alert("Spaces are not allowed in passwords!");
            return false;
        }
        //Check passwords are the same
        else
        {
            if(pw1 != pw2) 
            {
                alert("The passwords you entered were not the same. Please try again!");
                return false;
            }
            //Accept passwords
            {
                alert("Password accepted!");
                return true;
            }
        }
    }
-->
</script> 
```

以及与之配套的 HTML 表单：

```
<form id="register">
    <label for="username">Username</label>
    <input type="text" class="input_text" name="username" id="name" placeholder="e.g. AberLibrary01" />
    <br />
    <label for="password">Password</label> 
    <input type="text" class="input_text" name="password1" id="password1" placeholder="e.g. aber01" />
    <br />
    <label for="re-enterpassword">Re-enter password</label>
    <input type="text" class="input_text" name="password2" id="password2" placeholder="e.g. aber01" />

    <input type="submit" class="button" value="Register" />
    </form>

    <script type="text/javascript">
    <!--
        new validate(document.forms['register']);
    -->
    </script> 
```

任何可爱的 StackOverflow 社区的想法？确切的问题是它不会检查密码中的空格或输入的两个密码是否相同。它成功地检查了两个密码字段中至少有一些东西。

谢谢丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:08:18.563

这一行：

```
else if(document.forms["register"]["password1"].value.indexOf(invalid) > - 1) 
```

`invalid`未定义，我怀疑这会导致您面临的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:11:12.260

对您的代码进行了更改使其正常工作[http://jsbin.com/igonec/edit#preview](http://jsbin.com/igonec/edit#preview)

错误

1.  使用 var pw1 = document.forms["register"]["password1"]。它导致了错误
2.  缺别的。
3.  使用无效而不是“”。
4.  错误使用括号。

我省略了您的错误并使解决方案更加优雅。

Javascipt

```
 function validate()
     {
        var pw1 = document.getElementById("password1").value;
        var pw2 = document.getElementById("password2").value;

        //Check values are present in both fields
        if(pw1 ==='' || pw2 === '')
        {
            alert("Please enter your password twice.");
            return false;
        }
        //Check there no spaces
        else if(document.getElementById("password1").value.indexOf(" ") > - 1) 
        {
            alert("Spaces are not allowed in passwords!");
            return false;
        }
        //Check passwords are the same
        else
        {
            if(pw1 !== pw2) 
            {
                alert("The passwords you entered were not the same. Please try again!");
                return false;
            }
            else
            {
                alert("Password accepted!");
                return true;
            }
        }

    } 
```

HTML

```
<form id="register">
    <label for="username">Username</label>
    <input type="text" class="input_text" name="username" id="name" placeholder="e.g. AberLibrary01" />
    <br />
    <label for="password">Password</label> 
    <input type="text" class="input_text" name="password1" id="password1" placeholder="e.g. aber01" />
    <br />
    <label for="re-enterpassword">Re-enter password</label>
    <input type="text" class="input_text" name="password2" id="password2" placeholder="e.g. aber01" />

    <input type="submit" class="button" onclick="validate()" value="Register" />
    </form> 
```

# html - CSS 导航栏集中，按钮之间没有间隙

> ID：11313663
> 
> 赞同：0
> 
> 时间：2012-07-03T14:57:54.363
> 
> 标签：html, css

晚上好，

我想要一个导航栏，它集中在屏幕上，按钮之间没有间隙。我意识到可以通过'float：left'来缩小差距。但是，这会导致导航栏向左刷新。没有'float:left'，将会有间隙但集中。如果有人可以帮助我，将不胜感激。谢谢你！

我的CSS代码如下：

```
#nav {
    list-style: none;
    font-weight: bold;
    margin-bottom: 10px;
    width: 100%;
    text-align: center;
}

#nav ul {
    list-style-type: none;
    margin: 0px;
    padding: 0;
}

#nav li {
    margin: 0px;
    display: inline;
}

#nav li a {
    padding: 10px;
    text-decoration: none;
    font-weight: bold;
    color: #FFFFFF;
    background-color: #086ba9;
    float: left
}

#nav li a:hover {
    color: #FFFFFF;
    background-color: #35af3b;
} 
```

以下是我的部分html代码：

```
<div id="nav">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Crawler</a></li>
        <li><a href="#">Visual Analytics</a></li>
    </ul>
</div> 
```

干杯，ZH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:59:56.093

Here is working code:

[http://jsfiddle.net/surendraVsingh/vU4C8/1/](http://jsfiddle.net/surendraVsingh/vU4C8/1/)

**Changes to be done in CSS:**

```
#nav ul {
 list-style-type: none;
 padding: 0;
 display:inline-block; /* Add This*/
} 
```

**Note:** `display:inline-block` is added so that `ul` will only take width according to its li's unlike other block elements which take 100% width.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T11:45:01.127

我不知道这种方法是否“健康”，但它对我有用

```
#nav ul a{margin:0 -2px;} 
```

# c# - 具有多个 groupby 的 LINQ 查询

> ID：11313664
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:57:54.310
> 
> 标签：c#, linq

我有以下数据结构（简化）： TestClass 类的巨大列表

```
public class TestClass
{
   public string Name { get; set; }
   public int Value { get; set; }
   public DateTime Date { get; set; }
} 
```

我试图找到一个 LINQ 查询来获取一天内具有相同名称和值的项目的数量。我用多个 groupby-Statements 尝试了它，但我没有得到它......示例：

```
Name  | Value | Date
Alice | 42    | 11.02.1900
Bob   | 4211  | 22.03.2030
Bob   | 4211  | 22.03.2030
Bob   | 42    | 22.03.2030
Bob   | 42    | 22.03.2030
Alice | 4711  | 30.01.2045 
```

我想得到的这个数据（最后一个数字很重要）

> 爱丽丝, 42, 11.02.1900, 1
> 鲍勃, 4211, 22.03.2030, 3
> 鲍勃, 42, 22.03.2030, 2
> 爱丽丝, 4711, 30.01.2045, 1

谢谢你的帮助！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:00:42.073

您正在寻找

```
list.GroupBy(o => new { o.Name, o.Value, o.Date })
    .Select(g => new { g.Key.Name, g.Key.Value, g.Key.Date, Count = g.Count() }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:00:58.880

```
from i in coll
group i by new { i.Name, i.Value, i.Date } into g
select new { key = g.Key, count = g.Count() } 
```

# sql - 展平单个表格

> ID：11313669
> 
> 赞同：1
> 
> 时间：2012-07-03T14:58:19.683
> 
> 标签：sql

我正在寻找一个非常基本的扁平化。我在数据库中有一个表，它为不同行中的员工提供每个字段。

```
EX 
  EMPLOYEE         GROUP_NAME
   81               BNEEO55
   81               BNELLIG
   81               LPKAPE
   81               HRFT
   90               BNRETINV
  .... 
```

我想创建一个将数据报告为的视图：

```
EMPLOYEE     Group1      Group2        Group3         Group4         Group5
81           BNEEO55     BNELLIG       LPKAPE         HRFT           NULL
90           NULL        NULL          NULL           NULL           BNRETINV 
```

或者

```
EMPLOYEE    BNEEO55     BNELLIG       LPKAPE         HRFT           BNRETINV
81          YES         YES           YES            YES            NO
90          NO          NO            NO             NO             YES 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:24:30.767

您需要 PIVOT 数据，如果您使用的是 SQL-Server 2008 或更高版本，您可以使用 PIVOT 函数：

```
CREATE TABLE #T (Employee INT, Group_name VARCHAR(50))
INSERT #T VALUES (81, 'BNEEO55'), (81, 'BNELLIG'), (81, 'LPKAPE'), (81, 'HRFT'), (90, 'BNRETINV')

SELECT  Employee, 
        COALESCE([BNEEO55],'No') AS [BNEEO55],
        COALESCE([BNELLIG],'No') AS [BNELLIG],
        COALESCE([BNRETINV],'No') AS [BNRETINV],
        COALESCE([HRFT],'No') AS [HRFT],
        COALESCE([LPKAPE],'No') AS [LPKAPE]
FROM    (   SELECT  *, 'Yes' [Data]
            FROM    #T
        ) d
        PIVOT
        (   MAX(Data)
            FOR Group_Name IN ([BNEEO55], [BNELLIG], [BNRETINV], [HRFT], [LPKAPE])
        ) pvt 
```

但是，如果您的数据正在更改，听起来您需要动态地执行此操作。像下面这样的东西会起作用：

```
DECLARE @SQL NVARCHAR(MAX) = '',
        @Cols NVARCHAR(MAX) = ''

SELECT  @SQL = @SQL + ',' + QUOTENAME(Group_Name),
        @Cols = @Cols + ',COALESCE(' + QUOTENAME(Group_Name) + ',''No'') AS ' + QUOTENAME(Group_Name)
FROM    (   SELECT  DISTINCT Group_Name 
            FROM    #T
        ) T

SET @SQL = '
            SELECT  Employee, ' + STUFF(@Cols, 1, 1, '') + 
            'FROM   (   SELECT  *, ''Yes'' [Data]
                        FROM    #T
                    ) d
                    PIVOT
                    (   MAX(Data)
                        FOR Group_Name IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) pvt'

EXECUTE SP_EXECUTESQL @SQL 
```

这构建了与第一个相同的查询，但意味着当添加新的组名时，不必更改查询。

* * *

**编辑**

要创建并调用它作为存储过程：

```
CREATE TABLE T (Employee INT, Group_name VARCHAR(50))
INSERT T VALUES (81, 'BNEEO55'), (81, 'BNELLIG'), (81, 'LPKAPE'), (81, 'HRFT'), (90, 'BNRETINV')
GO
CREATE PROCEDURE PivotT
AS

DECLARE @SQL NVARCHAR(MAX) = '',
        @Cols NVARCHAR(MAX) = ''

SELECT  @SQL = @SQL + ',' + QUOTENAME(Group_Name),
        @Cols = @Cols + ',COALESCE(' + QUOTENAME(Group_Name) + ',''No'') AS ' + QUOTENAME(Group_Name)
FROM    (   SELECT  DISTINCT Group_Name 
            FROM    T
        ) T

SET @SQL = '
            SELECT  Employee, ' + STUFF(@Cols, 1, 1, '') + 
            'FROM   (   SELECT  *, ''Yes'' [Data]
                        FROM    T
                    ) d
                    PIVOT
                    (   MAX(Data)
                        FOR Group_Name IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) pvt'

EXECUTE SP_EXECUTESQL @SQL
GO
EXECUTE PivotT 
```

# javascript - jquery位置随着.css（）的变化而变化，表现得很奇怪

> ID：11313670
> 
> 赞同：0
> 
> 时间：2012-07-03T14:58:19.980
> 
> 标签：javascript, jquery, animation

我试着做一个 move `img`，它部分工作。如果我按向右、向上或向下按钮，它会向右、向上或向下移动。但是，如果我按下左键，它会非常快速地跳到右边很远，然后回到左边并且不会停止移动（我相信。我说它很快）。

[JSF 中](http://jsfiddle.net/11684/whuX2/)；
Javascript：

```
$(document).ready(function() {
    var up = down = left = right = false;
    var top = 100, left = 500;
    $("body").on("keydown", function(e) {
        if(e.keyCode == 39) {e.preventDefault(); if (right == false) right = setInterval(moveRight, 80);}
        else if(e.keyCode == 37) {e.preventDefault(); if (left == false) left = setInterval(moveLeft, 80);}
        else if(e.keyCode == 38) {e.preventDefault(); if (up == false) up = setInterval(moveUp, 80);}
        else if(e.keyCode == 40) {e.preventDefault(); if (down == false) down = setInterval(moveDown, 80);}
    });
    $("body").on("keyup", function(e) {
        if(e.keyCode == 39) {clearInterval(right); right = false;}
        else if(e.keyCode == 37) {clearInterval(left); left = false;}
        else if(e.keyCode == 38) {clearInterval(up); up = false;}
        else if(e.keyCode == 40) {clearInterval(down); down = false;}
    });

    function moveUp() {
        top -= 2;
        $("#player").css("top", top + "px");
    }
    function moveDown() {
        top += 2;
        $("#player").css("top", top + "px");
    }
    function moveLeft() {
        left -= 2;
        $("#player").css("left", left + "px");
    }
    function moveRight() {
        left += 2;
        $("#player").css("left", left + "px");
    }
}); 
```

这可能不是最好的方法，我愿意接受更好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:09:08.863

您正在定义两个“左”变量，它们相互妨碍。更改其中一个名称（可能是区间变量的 leftInterval），事情应该会变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:13:01.640

变量被覆盖，尝试类似：

```
$("body").on("keydown", function(e) {
    e.preventDefault();
    var elm = $("#player"),
        top = parseInt(elm.css('top')),
        left = parseInt(elm.css('left'));

    switch(e.which) {
        case 37:
            elm.css("left", left-2);
        break;
        case 38:
            elm.css("top", top-2);
        break;
        case 39:
            elm.css("left", left+2);
        break;
        case 40:
            elm.css("top", top+2);
        break;
    }
}); 
```

[小提琴](http://jsfiddle.net/whuX2/4/)

# objective-c - 无法在界面生成器中连接第二次滑动手势

> ID：11313674
> 
> 赞同：2
> 
> 时间：2012-07-03T14:58:39.347
> 
> 标签：objective-c, ios, xcode, interface-builder, gesture

我正在尝试在界面构建器中向 UIView 添加两个手势（向左滑动和向右滑动）。

第一个（向左滑动）有效......但第二个滑动手势（向右滑动）不起作用，我认为这是因为我无法将“新参考插座连接”连接到视图（就像我的第一个手势有）[见附图]。

![无法连接插座集合](../Images/762dd16b3d08a345ff1943fa0362496a.png)

这是原因吗？

我以编程方式实现了这一点，但真的很想了解如何在界面生成器中添加多个手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:14:50.283

查看连接菜单。它们都会自动添加到gestureRecognizers 集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:27:48.593

我制作了一个简短的教程视频，介绍如何在界面构建器中使用多个手势（左右）。不需要编码。我认为视频对你来说是一个更好的解释:) 我的英语不是最好的，但我希望它对你有帮助！:)

[Xcode 连接多个手势](http://www.youtube.com/watch?v=eFZir9SYDC8)

# php - 如何在php中发布整个json对象？

> ID：11313680
> 
> 赞同：0
> 
> 时间：2012-07-03T14:58:51.797
> 
> 标签：php, javascript, json

我有一个看起来像这样的 json 对象：

```
Array ( 
[algorithm] => HMAC-SHA256 
[expires] => 1341331200 
[issued_at] => 1341326884 
[oauth_token] => AAADmtzfo7M4BAEjaqxcD5ofrPIlbAqn6WVV9Az63C5uRxZACrPnkvWddolF9cTW82g13ZAZCcc9z4RBFLZBAFwuflZB1NZAZBI2ZBFqLrm9KQQZDZD 
[user] => Array ( 
  [country] => se 
  [locale] => en_US 
  [age] => Array ( 
    [min] => 21 ) 
  ) 
  [user_id] => 651666483 
) 
```

)

（使用 print_r 打印）我想将它添加到 javascript 变量中。通过将其打印到 html。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:00:48.393

只需使用`json_encode()`( [PHP docu](http://php.net/manual/en/function.json-encode.php) ) 将您的对象转换为 JSON 对象，该对象可直接用作 JavaScript 中的对象/数组文字。

```
// your array
$arr = array( ... );

// echo the JavaScript to set yourJsVar on a global scope
echo '<script> var yourJsVar = ' . json_encode( $arr ) . ';</script>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:01:22.333

在您的 php 页面中尝试此操作：

```
echo json_encode($your_array); 
```

该`json_encode`函数将任何数组格式化为有效的 json 格式字符串。

见： http: [//php.net/json_encode](http://php.net/json_encode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:00:13.427

[json_encode](http://php.net/manual/en/function.json-encode.php)对你有用吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:05:04.427

也许是这样的：

```
<script type="text/javascript">
var myVar = <?php echo json_encode($myvar); ?>
</script> 
```

又快又脏...

# mysql - 在多线程应用程序中使用 libmysqlclient

> ID：11313686
> 
> 赞同：2
> 
> 时间：2012-07-03T14:58:58.460
> 
> 标签：mysql, c, linux, cmake

我正在 Linux 平台上构建一个 C 应用程序。我需要使用 libmysqlclient 来连接数据库。

我下载了Linux源代码包mysql-connector-c-6.0.2.tar.gz。我按照说明编译了它。我得到以下库：

```
libmysqlclient.a     libmysqlclient.so  libmysql.so.16
libmysqlclient_r.so  libmysql.so        libmysql.so.16.0.0 
```

如果我的应用程序是多线程的，我可以将我的应用程序与 libmysqlclient.a 链接吗？根据 mysql 文档（[http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide](http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide)），使用 cmake 工具，客户端始终是线程安全的。

将我的应用程序与 libmysqlclient.a 链接后，我的应用程序崩溃，调用堆栈如下：

```
#0  0x0867878a in my_stat ()
No symbol table info available.
#1  0x08671611 in init_available_charsets.clone.0 ()
No symbol table info available.
#2  0x086720d5 in get_charset_by_csname ()
No symbol table info available.
#3  0x086522af in mysql_init_character_set ()
No symbol table info available.
#4  0x0865266d in mysql_real_connect () 
```

在我的应用程序中，我在线程函数中有以下代码：

```
if (NULL == (pMySQL = mysql_init(NULL)))
{
    return -1;
}

if (NULL == mysql_real_connect(pMySQL, ServerName, UserName, Password, Name, Port, NULL, 0))
{
    mysql_close(pMySQL);
    return -1;  
}

if (0 != mysql_query(pMySQL, pQuery))
{
    mysql_close(pMySQL);
    return -1;
}

mysql_close(pMySQL); 
```

我没有使用 libmysqlclient_r.so，因为我想静态链接到 mysql 客户端库。有什么方法可以用 cmake 生成 libmysqlclient_r.a 吗？

**更新：**

没有做任何其他事情，我只是将 mysql 客户端构建类型更改为调试。现在我在 mysql_init() 函数中崩溃了。

在应用程序控制台上，我得到以下打印：

```
safe_mutex: Trying to lock unitialized mutex at /install/mysqlconnc/mysql-connector-c-6.0.2/mysys/safemalloc.c, line 520 
```

崩溃的调用栈如下：

```
#0  0x00556430 in __kernel_vsyscall ()
No symbol table info available.
#1  0x45fdf2f1 in raise () from /lib/libc.so.6
No symbol table info available.
#2  0x45fe0d5e in abort () from /lib/libc.so.6
No symbol table info available.
#3  0x086833e5 in safe_mutex_lock (mp=0x915e8e0, my_flags=0, 
    file=0x895b9d8 "/install/mysqlconnc/mysql-connector-c-6.0.2/mysys/safemalloc.c", line=520)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/mysys/thr_mutex.c:178
        error = 140915306
        __PRETTY_FUNCTION__ = "safe_mutex_lock"
#4  0x08682715 in _sanity ( 
    filename=0x895a87c "/install/mysqlconnc/mysql-connector-c-6.0.2/mysys/my_error.c", lineno=195)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/mysys/safemalloc.c:520
        irem = 0xf2300468
        flag = 0
        count = 0
#5  0x0868186b in _mymalloc (size=16,
    filename=0x895a87c "/install/mysqlconnc/mysql-connector-c-6.0.2/mysys/my_error.c", lineno=195, MyFlags=16)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/mysys/safemalloc.c:130
        irem = 0x0
        data = 0x0
        _db_stack_frame_ = {func = 0x6d617266 <Address 0x6d617266 out of bounds>, file = 0x65685f65 <Address 0x65685f65 out of bounds>,
          level = 0, prev = 0x0}
#6  0x0867e0e1 in my_error_register (errmsgs=0x89a7760, first=2000, last=2058)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/mysys/my_error.c:194
        meh_p = 0x46087568
        search_meh_pp = 0x1000
#7  0x08655f7e in init_client_errs ()
    at /install/mysqlconnc/mysql-connector-c-6.0.2/libmysql/errmsg.c:238
No locals.
#8  0x08655fe3 in mysql_server_init (argc=0, argv=0x0, groups=0x0)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/libmysql/libmysql.c:128
        result = 0
#9  0x08651fc0 in mysql_init (mysql=0x0)
    at /install/mysqlconnc/mysql-connector-c-6.0.2/libmysql/client.c:1606 
```

**解决方案：**

我在创建线程之前调用了 mysql_library_init()，并在线程终止后调用了 mysql_library_end()。在每个线程中，我在线程函数的开头调用了 mysql_thread_init()，并在线程函数的末尾调用了 mysql_thread_end()。这解决了崩溃的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:45:22.373

**更新**：

看来您需要先调用mysql_library_init [()](http://dev.mysql.com/doc/refman/5.0/en/mysql-library-init.html)`mysql_init()`：

> 您必须在产生任何线程之前调用 mysql_library_init()，或者使用互斥锁来保护调用，无论是调用 mysql_library_init() 还是通过 mysql_init() 间接调用。在任何其他客户端库调用之前执行此操作。

关于你原来的问题，`libmysqlclient_r.so`实际上是一个符号链接到`libmysql.so`. 您可以通过从以下行中删除关键字来更改`libmysql/CMakeLists.txt`以生成静态库 ( )：`libmysql.a``SHARED`

```
ADD_LIBRARY(libmysql          SHARED ${CLIENT_SOURCES} libmysql.def) 
```

但是，我建议 (1) 尝试在不使用线程的情况下运行相同的代码并查看问题是否仍然存在，(2) 构建和使用库的调试版本：

```
cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Debug
make 
```

这样，您可以更详细地调查问题。

# php - php get text file content from folder with split

> ID：11313689
> 
> 赞同：0
> 
> 时间：2012-07-03T14:59:00.577
> 
> 标签：php

On my website, I have an upload story feature with a user written title and story. It uploads it as a text file in a directory. Is there a way to list the content of these files using php or anything? Also, I'd like to only show like 200 chars of the story, and have a 'show full story' button, that would show the full story (I'll use jQuery for this).

Here is my current code for this, though it doesn't work and i can't figure out the problem :(

```
<head>
    <style type="text/css">header {font-size:20pt; color:#ff00e8;} footer {text-align: left; font-weight:bold; padding-left: 5px;} article {padding:20px;}</style>    
</head>
<body>
<h2><a href="../php/upload_story.php" style="font-size:15pt; color:#ff00e8; text-decoration: none;" id="tortenetfeltolt">Van  egy  jó  történeted? Írd meg és kikerülhet az oldalra!</a></h2>

<?php
$dataArray = array();
//Number of chars for the string
$num = 200;

//Check if DIR exists
if ($handle = opendir('../php/biralas_tortenetek/')) {
    //Loop over the directory
    while (false !== ($file = readdir($handle))) {
        //Strip out the . and .. files
        if ($file != "." && $entry != "..") {
           // $dataArray[] = array();
            //Store file contents
            $filecontent = file_get_contents($file);
            //Split the content and store in array
            $length = strlen($filecontent);
            $dataArray[] = array(substr($filecontent, 0, $num), substr($filecontent, $num, $length )); 

        }
    }
    //close the dir
    closedir($handle);
}

?>

<?php foreach($dataArray as $data) { ?>
    <div class="visible">
        <?php echo $data[0]; ?>
    </div> 
    <div class="hidden">
        <?php echo $data[1]; ?>
    </div>
<?php } ?>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:05:37.977

我看到你用过： substr($filecontent, $num, $length );

在 substr 函数中，第二个参数是你想要开始的位置，第三个是长度。您指定 $num = 200，因此 substr 将从位置 200 开始。

# scala - How to build a stand-alone scala executable

> ID：11313694
> 
> 赞同：14
> 
> 时间：2012-07-03T14:59:08.613
> 
> 标签：scala, build, executable

I am trying to create a standalone .exe file (or something equivalent) from a scala project I have started. I need to create this in such a way thet the person using the application has to do the least amount of work possible (double-click an installer or just the .exe file). What are my options?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:43:46.267

看看JProfiler 的创建者[ej-technologies](http://www.ej-technologies.com/index.html)，他们有几个可能对您有用的产品，引用自他们的产品页面：

*   **install4j**一个跨平台 Java 安装程序，可为您的 Java 应用程序生成本机安装程序和应用程序启动器。

*   **exe4j**一个 Java exe 制造商，可帮助您将 Java 应用程序集成到 Windows 操作环境中。

这些都是商业产品，虽然我没有使用过它们，但我已经使用 JProfiler 很多年了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T08:52:31.360

看看一个 OneJar。[这里](https://github.com/sbt/sbt-onejar)还有一个 sbt 插件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T03:41:40.697

我听说过这个：[Lauch4j](http://launch4j.sourceforge.net/index.html)。

根据网站：

> 可以在 Windows、Linux、Mac OS X 和 Solaris 上打包应用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T08:51:54.770

[SBT 的IzPack](http://software.clapper.org/sbt-plugins/izpack.html)插件可能很有用。

甚至 scala 本身也使用它：[他们使用 IzPack](http://izpack.org/we-love-izpack/)

# php - jQuery Mobile and PHP login system not working

> ID：11313700
> 
> 赞同：0
> 
> 时间：2012-07-03T14:59:26.900
> 
> 标签：php, jquery, mobile

I'm trying to create a login system for my jQuery mobile app but it's not doing anything after the login button is clicked. Right now I'm not using a db connection.

index.html

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link href="jquery.mobile-1.1.0/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css">
<link href="jquery.mobile-1.1.0/jquery.mobile.structure-1.1.0.min.css" rel="stylesheet" type="text/css">
<script src="jquery.mobile-1.1.0/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
    $('#loginform').submit(function(){
    $('#output').html('Connecting...');
    var postTo = 'http://www.hedonsoft.com/game/login.php';
    $.post(postTo,{userLbl: $('[name=username]').val(), passwordLbl: $('[name=password]').val()}, function (data){
        if(data.message){
            $('#output').html(data.message);    
        }else{
            $('#output').html("Could not connect"); 
        }
        }, 'json');

        return false;
    });
    }); 
</script>
<script src="jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="custom.css" />
</head>

<body>
<div data-role="page" id="mc_main">
  <div data-role="header" id="header">
    <h1>Main Menu</h1>
  </div>

<div data-role="content">
<div data-role="collapsible" id="logindiv"><h2>Login</h2>
   <form id="loginform" method="post">
 <div data-role="fieldcontain">
      <label for="user">Username:</label>
      <input type="text" name="user" id="user" value=""  />
    </div>
    <div data-role="fieldcontain">
      <label for="pass">Password:</label>
      <input name="pass" type="password" id="pass" value="">
    </div>
    <input type="submit" value="Login" data-icon="check" data-theme="a"/>
   </form>
   <div id="output"></div>
       </div>
</div>
</body>
</html> 
```

login.php

```
<?php
if(isset($_POST['username'] and isset($_POST['password'])) {

 // do logic for logining in (usually query your db)
 if ($_POST['username'] == 'test' and $_POST['password'] == 'test') {
 $data['success'] = true;
 $data['message'] = 'Login succesful';
 } else {
 $data['success'] = false;
 $data['message'] = 'Login failed';
 }
 // return json
 echo json_encode($data);
}
?> 
```

I get 'Connecting...' in #output but that's it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T21:59:34.677

The login.php code has a syntax error on line 2\. It should read:

`if(isset($_POST['userLbl']) && isset($_POST['passwordLbl']))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:07:15.870

您在用户字段中输入的名称是“用户”。

将您的 javascript 更改为如下所示

```
$.post(postTo,{userLbl:$('[name=user]').val(), ... 
```

然后你的 login.php 应该是这样的：

```
<?php
if(isset($_POST['userLbl'] and isset($_POST['passwordLbl'])) {

 // do logic for logining in (usually query your db)
 if ($_POST['userLbl'] == 'test' and $_POST['passwordLbl'] == 'test') {
 $data['success'] = true;
 $data['message'] = 'Login succesful';
 } else {
 $data['success'] = false;
 $data['message'] = 'Login failed';
 }
 // return json
 echo json_encode($data);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:42:09.187

您的服务器返回错误 500。这就是它不起作用的原因！

如果您愿意，可以查看我的小提琴：http: [//jsfiddle.net/ooflorent/7cYae/](http://jsfiddle.net/ooflorent/7cYae/)

# ios - MapView crashing

> ID：11313702
> 
> 赞同：0
> 
> 时间：2012-07-03T14:59:38.020
> 
> 标签：ios, mkmapview

I've been adding MapView into my ViewController. Code as below:

```
MapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
MKCoordinateRegion region;
region.center.latitude = [[myStore.Location objectAtIndex:0] doubleValue];
region.center.longitude = [[myStore.Location objectAtIndex:1] doubleValue];
MKCoordinateSpan span;
span.latitudeDelta  = .0015;
span.longitudeDelta = .0015;
region.span = span;
[MapView setRegion:region animated:YES]; 
```

`myStore.Location` is an array with coordinates. XCode just crashes the app and return the error at `[MapView setRegion:region animated:YES];` which i assume that it cannot init the mapview, can anyone help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:29:19.530

我已经解决了我的问题......纬度和经度被颠倒了。`[myStore.Location objectAtIndex:0]`应该是经度，`[myStore.Location objectAtIndex:1]`应该是纬度......我很傻。

# vb.net - How to define a default button in MS VB Express 2010

> ID：11313708
> 
> 赞同：0
> 
> 时间：2012-07-03T14:59:47.577
> 
> 标签：vb.net, winforms

How to define a default button in MS VB Express 2010.

Anything in DESIGN or code view is fine

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:14:50.633

在窗体的属性窗口中设置 AcceptButton 属性。

# css - Mobile Firefox puts a blue box around

> ID：11313709
> 
> 赞同：0
> 
> 时间：2012-07-03T14:59:50.110
> 
> 标签：css, firefox, mobile, fennec

 Whenever I click on an anchor in Mobile Firefox, it draws a blue border around the `<a>`, which persists after the anchor has been clicked. Here is a screenshot of how this looks:

![enter image description here](../Images/a7a64899e6040ba877608dbbb64d40a7.png)

In order to remove this border, I have tried adding the following to my CSS, to no effect:

```
a {-moz-user-select: none;}

a:link { outline:none; }
a:visited { outline:none; }
a:hover { outline:none; }
a:active { outline:none;  }
a:focus { outline:none; } 
```

I have also tried adding the following snippet to my JavaScript on DOM ready, also to no effect:

```
$("a").live('click',function(event) {
    if (document.selection)
        document.selection.empty();
    else if (window.getSelection)
        window.getSelection().removeAllRanges();
}); 
```

Is this blue border styleable? How can I get rid of it? 

## Minimal Test Case ([example](http://jsfiddle.net/tGJpE/))

Here is a reduced example of a page that manifests this behavior:

```
<!DOCTYPE html><a href="#foo">Test</a> 
```

### Rendering

![enter image description here](../Images/8297c468afcd5c7fbf0cbd472083ec47.png)

# jquery - 单击元素时将jQuery选择器应用于表格

> ID：11313724
> 
> 赞同：0
> 
> 时间：2012-07-03T15:00:16.040
> 
> 标签：jquery, ajax, function, scope, this

我认为当需要对基于 Ajax 返回的元素进行简单的 css 更改时，我的“this”范围存在问题。

```
$('.time_slot_holder').click(function(){
    var data_day=$(this).data('agent_day');
    var data_time=$(this).data('agent_time');
    var data="agent_id="+agent_id+"&day="+data_day+"&time="+data_time
    $.ajax({
        type:"POST",
        url:"admin_includes/book_time.php",
        data:data,
        success:function(html){
            var split_html=html.split("|")
            if(split_html[0]=="B"){
                //booking exists
                alert("Bookings for this time slot exist. Contact Agent to arrange a re-assignment of this appointmnet.");
            }
            if(split_html[0]=="C"){
                //added to db
                $(this, '.time_slot_holder').css('background-color', 'red');
            }
            if(split_html[0]=="D"){

            }
        }
    });//end ajax
}); 
```

我要做的就是用元素 .time_slot_holder 改变网格上的颜色

忽略来自 ajax 请求的笨拙的拆分回调，这只是试图通过数据属性识别元素。基本上我需要通过ajax的回调来获取点击元素的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:01:47.430

您应该将`context`AJAX 请求中的选项设置为`this`;

```
$.ajax({
    type:"POST",
    url:"admin_includes/book_time.php",
    context: this,
    //..
}); 
```

否则，`this`最终成为`jqXHR`对象。

另一种（更常见的）方法是将 的值存储 `this`在另一个变量中；

```
var that = this;

$.ajax({
    type:"POST",
    url:"admin_includes/book_time.php",
    data:data,
    success:function(html){
        // Use `that` instead of `this` in here.
    }
});//end ajax 
```

另外，我不确定`$(this, '.time_slot_holder')`应该选择什么，但我不确定它会起作用（需要查看您的 HTML 标记）。

如果`this`是 的后代`'.time_slot_holder'`，那么它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:09:21.830

使用 jQuery 元素作为上下文

```
$('.time_slot_holder').click(function(){
    var data_day=$(this).data('agent_day');
    var data_time=$(this).data('agent_time');
    var data="agent_id="+agent_id+"&day="+data_day+"&time="+data_time

    $.ajax({
        type:"POST",
        url:"admin_includes/book_time.php",
        data:data,
        context : $(this),
        success:function(html){
            var split_html=html.split("|")
            if(split_html[0]=="B"){
                //booking exists
                alert("Bookings for this time slot exist. Contact Agent to arrange a re-assignment of this appointmnet.");

            }
            if(split_html[0]=="C"){
                //added to db
                $(this).css('background-color', 'red');
            }
            if(split_html[0]=="D"){

            }

        }
    });//end ajax

}); 
```

# html - 如何使用 rspec 测试 html 属性？

> ID：11313725
> 
> 赞同：7
> 
> 时间：2012-07-03T15:00:18.440
> 
> 标签：html, ruby-on-rails-3, rspec

我拥有的 html 是由 ruby​​ 生成的：

```
<%= link_to "change", "http://gravatar.com/emails" %> 
```

这导致：

```
<a href="http://gravatar.com/emails">change</a> 
```

但我想确保链接在新选项卡中打开

```
target="blank" 
```

属性

rspec 测试看起来像：

```
it { should have_link('change', href: 'http://gravatar.com/emails', target: '_blank') } 
```

但是当我没有生成目标属性时，测试仍然通过。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T12:53:30.157

以下适用于 capybara 1.1.2：

```
it { should have_selector("a[href='http://gravatar.com/emails'][target='_blank']") } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:35:09.180

我正在使用 have_selector 来处理每个属性：

```
should have_selector('a',
                     :href => 'http://gravatar.com/emails',
                     :target => '_blank',
                     :content => 'change'
                    ) 
```

我认为你需要水豚来拥有那个匹配器[http://rubydoc.info/github/jnicklas/capybara/Capybara/RSpecMatchers/HaveSelector](http://rubydoc.info/github/jnicklas/capybara/Capybara/RSpecMatchers/HaveSelector)

# iphone - 简单代码中的 EXC_BAD_ACCESS

> ID：11313735
> 
> 赞同：1
> 
> 时间：2012-07-03T15:00:45.350
> 
> 标签：iphone, exc-bad-access

我想用一组对象构造一个字符串

```
for (int n=0; n<[friends count]; n++) {
    User* friend = [friends objectAtIndex:n];
    if (n>=[friends count]-1) {
        NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"}", [friend uid]];
        NSString* sf2 = [[NSString alloc]init];
        sf2= [sf stringByAppendingString:param];
        [sf release];
        sf = [[NSString alloc]initWithString:sf2];
        [sf2 release];
        [param release];
    }else{
        NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"},", [friend uid]];

        NSString* sf2 = [[NSString alloc]init];
        sf2= [sf stringByAppendingString:param];
        [sf release];
        sf = [[NSString alloc]initWithString:sf2];
        [sf2 release];
        [param release];
    }

} 
```

我想知道我做错了什么。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:04:42.107

param 是自动释放的对象，所以你不应该释放它。

编辑：//在此处初始化 sf。

```
for (int n=0; n<[friends count]; n++) {
    User* friend = [friends objectAtIndex:n];
    if (n>=[friends count]-1) {
        NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"}", [friend uid]];
        sf = [sf stringByAppendingString:param];
    }else{
        NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"},", [friend uid]];

        sf = [sf stringByAppendingString:param];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:04:32.500

使用此代码.... 注释 [sf release] 和 [param release]；

```
for (int n=0; n<[friends count]; n++) {
User* friend = [friends objectAtIndex:n];
if (n>=[friends count]-1) {
    NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"}", [friend uid]];
    NSString* sf2 = [[NSString alloc]init];
    sf2= [sf stringByAppendingString:param];
    //[sf release];
    sf = [[NSString alloc]initWithString:sf2];
    [sf2 release];
    //[param release];
}else{
    NSString* param = [NSString stringWithFormat:@"{\"target_id\":\"dummy(%d)\"},", [friend uid]];

    NSString* sf2 = [[NSString alloc]init];
    sf2= [sf stringByAppendingString:param];
    //[sf release];
    sf = [[NSString alloc]initWithString:sf2];
    [sf2 release];
   //[param release];
}

} 
```

这可能会帮助你

# r - R ggplot：在绘图的 y 轴上覆盖内核密度图

> ID：11313739
> 
> 赞同：2
> 
> 时间：2012-07-03T15:00:51.793
> 
> 标签：r, ggplot2

我有一个ggplot图表

```
q3 <- ggplot(y, aes(T,C))+  geom_line() 
```

和核密度

```
den <-density(y$C) 
```

如何在 y 轴上叠加内核密度图？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:47:46.880

跟进 DWin 的想法，这可能是您正在寻找的东西：

```
dat <- data.frame(x = 1:100,
                  y = 1:100,
                  z = rnorm(100))

ggplot(dat) + 
    geom_point(aes(x = y/100,y = x/100)) + 
    geom_density(aes(x = z)) + 
    coord_flip() 
```

![在此处输入图像描述](../Images/10954b9ee37941455abd8bc6aa8ec6b5.png)

`x`注意 中的和`y`美学的颠倒`geom_point`。

# jquery - 如何在模态框中进行服务器端 Ajax 验证

> ID：11313741
> 
> 赞同：1
> 
> 时间：2012-07-03T15:00:53.300
> 
> 标签：jquery, ruby-on-rails, ajax, validation, modal-dialog

我目前有一个使用 twitter 引导模式框的应用程序。模态显示的 div 正在从 /users/new 操作加载 JQuery。如果用户在提交的模式框中输入有效数据，但如果发送到 params 的数据未通过验证，控制器将重定向回新操作，但这一次在模式框之外并且用户之前所在的页面是消失了，这有点违背了使用模态框的目的。

我查看了 Live-Validation 和其他基于 javascript 的客户端验证。这些是一个选项，但为了一致性起见，我更希望能够在用户模型中使用我现有的验证。我有一种好方法可以在提交表单时使模态框保持不变，并使控制器使用 error_messages 重新加载模态框内的页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:25:36.213

是否使用 javascript 将 error_messages 加载到模式中？如果是这样，您可以让页面检查加载时是否有 error_messages，然后弹出打开模式框（如果有）。这不会保存来自模态的任何输入，但会弹出它。

或者，您可以在当前模型之上实现一些轻客户端验证。但是，它的亮度取决于您的模型对其输入的挑剔程度。如果它非常具体地接受/拒绝什么，那么验证一致性会更加困难，并且让某些东西通过客户端验证只是反弹并说它是无效的并不总是很漂亮。

# matlab - MATLAB向量：防止同一范围内的连续值

> ID：11313742
> 
> 赞同：4
> 
> 时间：2012-07-03T15:00:54.643
> 
> 标签：matlab, random, vector, duplicates

好的，这似乎是一个奇怪的问题，但请耐心等待。

所以我在 .m 文件中有一个随机向量，其中内置了某些约束。这是我的代码：

```
 randvecall = randsample(done, done, true);
 randvec = randvecall([1;diff(randvecall(:))]~=0); 
```

“完成”只是我们从中抽取样本的值的范围，所以不用担心。如您所见，此 randsamples 从一系列值中进行采样，然后使用 diff 函数修剪此随机向量，从而删除连续的重复值。向量中仍有可能出现重复值，但它们根本不可能是连续的。

这一切都很好，而且工作得很好。

所以，比如说，randvec 看起来像这样：

```
randvec =

    54
    47
    52
    26
    39
     2
    14
    51
    24
     6
    19
    56
    34
    46
    12
     7
    41
    18
    29
     7 
```

它实际上要长得多，大约有 60-70 个值，但你明白了。

我想要做的是在这个向量上添加一些额外的约束。当我从这个向量中采样时，这些值会根据它们的范围进行分类。所以 1-15 的值是第 1 类，16-30 是第 2 类，依此类推。造成这种情况的原因并不重要，但它是程序中非常重要的一部分。因此，如果您查看我在上面提供的值，您会看到如下部分：

```
 7
    41
    18
    29
     7 
```

这实际上对我的程序不利。因为值范围是分开处理的，所以 41、18 和 29 的使用与 7 不同。因此，出于所有意图和目的，7 连续出现在我的脚本中。我想要做的是在生成向量时以某种方式解析/修改/无论向量，以便某个范围内的相同数字不能“连续”出现两次，无论它们之间有多少来自不同范围的其他数字。这有意义吗/我描述得好吗？所以，我希望 MATLAB 搜索向量，并且对于特定范围内的所有值（1-15、16-30、31-45、46-60），请确保同一范围内的“连续”值不相同。

那么，这就是我想要做的。无论如何，这可能不是最好的方法，因此当然，任何建议/替代方案都值得赞赏。我知道我可以用多个向量做得更好，但是由于各种原因，我需要它是一个单一的长向量（我的脚本的设计方式如果我为每个值范围都有一个单独的向量，它就行不通） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:00:52.290

您可能想要做的是创建四个随机向量，每个类别一个，确保它们不包含任何两个连续相等的值，然后通过从随机类别中有序选取值来构建最终的随机向量，即

```
%# make a 50-by-nCategories array of random numbers
categories = [1,16,31,46;15,30,45,60]; %# category min/max
nCategories = size(categories,2);
randomCategories = zeros(50,nCategories);

for c=1:nCategories
   %# draw 100 numbers for good measure
   tmp = randi(categories(:,c),[100 1]);
   tmp(diff(tmp==0)) = []; %# remove consecutive duplicates

   %# store
   randomCategories(:,c) = tmp(1:50);
end

%# select from which bins to pick. Use half the numbers, so that we don't force the 
%# numbers of entries per category to be exactly equal

bins = randi(nCategories,[100,1]);

%# combine the output, i.e. replace e.g. the numbers
%# '3' in 'bins' with the consecutive entries
%# from the third category
out = zeros(100,1);
for c = 1:nCategories
   cIdx = find(bins==c);
   out(cIdx) = randomCategories(1:length(cIdx),c);
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:11:05.900

首先，我们为每个元素分配它所在范围的 bin 编号：

```
[~,bins] = histc(randvec, [1 16 31 46 61]); 
```

接下来我们循环每个范围，并在这些类别中查找元素。例如，对于 1-16 的第一个范围，我们得到：

```
>> ind = find(bins==1);       %# bin#1 of 1-16
>> x = randvec(ind)
ans =
     2
    14
     6
    12
     7
     7 
```

现在您可以应用相同的过程来删除连续的重复项：

```
>> idx = ([1;diff(x)] == 0)
idx =
     0
     0
     0
     0
     0
     1
>> problematicIndices = ind(idx)   %# indices into the vector: randvec 
```

对所有范围执行此操作，并收集那些有问题的索引。接下来决定如何处理它们（删除它们，在它们的位置生成其他数字，等等......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:30:08.323

这是一种与其他人一直在折腾的方法不同的方法。我在这里工作的前提是您希望在向量中随机排列值而不重复。我不确定在我们提供输入之前您还应用了哪些其他限制。

我的想法是使用[randperm](http://www.mathworks.com/help/techdoc/ref/randperm.html)函数。

这是一些示例代码，它是如何工作的：

```
%randvec is your vector of random values
randvec2 = unique(randvec); % This will return the sorted list of values from randvec.
randomizedvector = randvec2(randperm(length(randvec2)); 
% Note: if randvec is multidimensional you'll have to use numel instead of length 
```

此时`randomizedvector`应包含初始值的所有唯一值`randvec`，但在唯一函数调用后“混洗”或重新随机化。现在，您可以对 randvec 进行不同的播种，以避免需要唯一的函数调用，因为简单地调用`randperm(n)`将返回一个随机向量，其值范围为 1 到 n。

只需 2 美分就可以了 =P 享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:45:51.607

如果我正确理解您的问题，我认为这是一种解决方案。它使用唯一的，但将其应用于向量的每个子范围。在一系列索引中重复的值被识别，以便您可以处理它们。

```
cat_inds = [1,16,31,46,60];  % need to include last element
for i=2:numel(cat_inds)
  randvec_part = randvec( cat_inds(i-1):cat_inds(i) );
  % Find the indices for the first unique elements in this part of the array
  [~,uniqInds] = unique(randvec_part,'first');

  % this binary vector identifies the indices that are duplicated in
  % this part of randvec
  %
  % NB: they are indices into randvec_part
  %
  inds_of_duplicates = ~ismember(1:numel(randvec_part), uniqInds);

  % code to deal with the problem indices goes here.  Modify randvec_part accordingly...

  % Write it back to the original vector (assumes that the length is the same)
  randvec( cat_inds(i-1):cat_inds(i) ) = randvec_part;
end 
```

# java - ROME RSS：如何获取 RSS 图标

> ID：11313743
> 
> 赞同：2
> 
> 时间：2012-07-03T15:00:56.037
> 
> 标签：java, rss, rome

我正在尝试编写一个小型 RSS 阅读器。我使用 ROME 来获取 RSS 提要。到目前为止，这工作正常。但是，我无法获取各个提要的 RSS 图标。有没有办法通过 ROME 获取图标（例如 URL），或者有人知道通过没有 ROME 的 java 实现此目的的简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:22:57.787

favicon.ico 几乎总是在主机的根目录中，例如，对于 stackoverflow，您可以访问此处：[https](https://stackoverflow.com/favicon.ico) ://stackoverflow.com/favicon.ico并重定向到该图标。有时，RSS 提要实际上托管在与网站本身（所有 RSS 项目所在的位置）不同的服务（如 google 或 feedburner）上，因此您需要访问该**`<link>`**元素以获取主机，然后只需访问主机的 favicon.ico .

例如，在 Crunchy Roll，他们使用 feed Burner，RSS feed 看起来像这样：

```
<channel>
 <title>Latest in Anime News by Crunchyroll!</title>
 <description>Read about the latest updates on Crunchyroll.com</description>
 <link>http://www.crunchyroll.com/news</link> 
```

所以如果你有一个`SyndEntry`，

1.  您可以调用[getLink() 方法来访问此链接](http://www.jarvana.com/jarvana/view/net/java/dev/rome/rome/1.0.0/rome-1.0.0-javadoc.jar!/com/sun/syndication/feed/synd/SyndEntry.html#getLink%28%29)，( [http://www.crunchyroll.com/news](http://www.crunchyroll.com/news) )
2.  删除 URI ( [http://www.crunchyroll.com/](http://www.crunchyroll.com/) )
3.  附加**favicon.ico**并获取图标（[http://www.crunchyroll.com/favicon.ico](http://www.crunchyroll.com/favicon.ico)）

这可能并不总是有效，尽管站点确实应该将 favicon.ico 放在其文档根目录中，但某些站点可能会**`<link>`**在页面中使用标签，例如：

```
<link rel="shortcut icon" href="new_category/favicon.ico" type="image/x-icon"> 
```

指示给定页面，使用此其他图标。这并不一定意味着在文档根目录中没有 favicon,ico，只是对于此链接，使用此图标。所以如果你想采取额外的步骤，你可以在上面的**1.**和**2.**之间插入这些步骤：

*   加载链接（[http://www.crunchyroll.com/news](http://www.crunchyroll.com/news)）
*   检查`<link rel="shortcut icon">`标题中的a
*   加载它并收工
*   否则继续第2步

# mysql - 条件 MySQL 列

> ID：11313749
> 
> 赞同：0
> 
> 时间：2012-07-03T15:01:10.267
> 
> 标签：mysql, sql, windows, datagridview

表：qa_selltypes

```
selltype_code, selltype_name
'1', 'unit'
'2', 'pound'
'3', 'box'
'4', 'gallon' 
```

表：qa_items

```
item_code, item_name, selltype_code, item_price
'1', 'PS2 Keyboard', '1', '10.45'
'2', 'Screws', '3', '15.02'
'3', 'Oil', '2', '30.00' 
```

我需要重新填充一个包含四个字段（单位、档位、磅、加仑）的网格，根据与 selltype_code 字段的关系建立 item_price，一个示例：其余将它们设置为 0

DGV：

```
item_code, item_name, unit, box, pound, gallon
'1', 'PS2 Keyboard', '10.45', '0', '0', '0'
'2', 'Screws', '0', '0', '15.02', '0'
'3', 'Oil', '0', '30.00', '0', '0' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:07:36.347

```
select i.item_code, i.item_name, 
    case when q.selltype_name = 'unit' then i.item_price else 0 end as unit,
    case when q.selltype_name = 'box' then i.item_price else 0 end as box,
    case when q.selltype_name = 'pound' then i.item_price else 0 end as pound,
    case when q.selltype_name = 'gallon' then i.item_price else 0 end as gallon
from qa_items i
inner join qa_selltypes q on i.selltype_code = q.selltype_code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:04:52.183

您可以使用`case`. 例子：

```
select case when some_column = 'abc'
            then 'hello'
            else 'good bye'
            end as conditional_column
from your_table 
```

# android - Sqlite 数据库优化，替换已删除的条目

> ID：11313754
> 
> 赞同：0
> 
> 时间：2012-07-03T15:01:30.577
> 
> 标签：android, sqlite

我在 android 中为我的应用程序创建了一个数据库，其中包含列 ID、频道、名称，我可以很好地创建并且一切正常。我的 ID 附加到特定于该频道的命令。当我有 15 个频道并且我去删除频道 4 时，它会创建频道 16 而不是先替换频道 4。

有没有一种方法可以在添加值之前先搜索“空”RowIds？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:22.267

a row will be updated if a unique constraint violation occurs for the insert. So the ID column in your example would need to have a PRIMARY KEY constraint in the database schema for the row to be updated

```
contentValue c;
SQLiteDatabase db=getWritableDatabase();
db.replace("table_name", null, c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:05:30.817

如果 ID 列是 Auto-Increment，则不能替换 4。每次插入时，列值都会增加 1。

您可以删除自动增量来处理您自己的 ID。但为此，您必须在每个插入中搜索缺失的数字（效率不是很高）。也许您还可以将删除的 ID 保存在一些辅助表中。这可以帮助您避免查找。但不确定是否值得...

# c++ - 如何在不同的类中使用 QNetworkAccessManager？类之间一般共享重要数据？

> ID：11313755
> 
> 赞同：6
> 
> 时间：2012-07-03T15:01:34.993
> 
> 标签：c++, oop, qt, qnetworkaccessmanager

我正在开发一个 MainWindow 应用程序来学习 C++ 和 Qt（C++ 和 QT 4.8）。我想在我的应用程序的不同对象中执行 HTTP 请求，例如对话框/向导和 MainWindow。我知道我基本上应该每个应用程序有一个 QNetworkAccessManager。我的问题是，在课堂之间传递这个 QNAM 的正确方法是什么？

目前我把它作为一个指针传递给我的向导的构造函数，但这似乎......不优雅和不灵活。让我的对话框或我决定制作的任何其他类访问我的 QNetworkAccessManager 的正确方法是什么？我想我对我需要让所有东西访问的任何数据都有同样的问题。

这里正确的 C++ 设计的解决方案是什么？单例模式似乎是一种选择，但据我所知是一种糟糕的选择。我这里有一些代码来显示我的问题。

我的 MainWindow 构造函数和启动我的向导的插槽：

```
MyMainWindow::MyMainWindow
{
    qnam = new QNetworkAccessManager();
}

...

MyMainWindow::wizardStarter
{
    mywizard = MyWizard(vari, qnam, this);
} 
```

我的向导构造函数，我在其中发出网络请求并在从用户获取数据后解析数据，因此我需要一个 QNetworkAccessManager：

```
MyWizard::MyWizard(SomeOtherArgument *vari, QNetworkAccessManager *qnam, QObject *parent)
{
    ...
    this->ourQnam = qnam;
    ...
}

MyWizard::launchRequest(QUrl newUrl)
{
    ourQnam->get(QNetworkRequest(newUrl));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:33:41.950

从你的问题来看，我认为你真的在问要使用哪种形式的***依赖注入***（即将你的依赖 QNetworkAccessManager 注入对象）。

在您的情况下，您使用的是***Constructor injection***。这是一种众所周知和公认的注射形式。它强烈地传达您的向导类**依赖于**QNetworkAccessManager，这使您的代码易于人们理解。如果您要使用单例从向导类实现中简单地获取静态 QNetworkAccessManager，虽然它具有删除构造函数注入的好处，但它隐藏了您的向导类使用 QNetworkAccessManager。

另一种众所周知的注入形式是***Setter Injection*** ，即`setDelegate( delegate )`

从专业上讲，您当前的方法没有任何问题，因为它再次清楚地传达了您的向导类**取决于**QNetworkAccessManager 对象。

如果您有兴趣了解有关依赖注入的更多信息，请阅读以下内容。

[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)

[C++ 中的依赖注入](http://adam.younglogic.com/2008/07/dependency-injection-in-c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-08T08:36:18.693

[这篇](https://stackoverflow.com/a/50691392/6407320)文章中显示了另一种方式：

> 管理此类全局应用程序绑定对象的规范方法是将它们作为自动变量保存`main`并使用辅助函数来访问它们。自动跟踪对象的`QPointer`生命周期，因此永远不会悬空。

因此：

**main.h - 接口**

```
QNetworkAccessManager *nMgr(); 
```

**main.cpp - 实现**

```
// This pointer is local to the translation unit, and is an
// implementation detail. It's not used anywhere else.
static QPointer<QNetworkAccessManager> globalManager;

// The global accessor method
QNetworkAccessManager *nMgr() {
  Q_ASSERT(!qApp || QThread::currentThread() == qApp->thread());
  return globalManager;
}

int main(int argc, char *argv[]) {
  QApplication app(argc, argv);
  QNetworkAccessManager mgr;
  globalManager = &mgr;
  ...
} 
```

# c# - 以邮件附件形式回复

> ID：11313759
> 
> 赞同：-2
> 
> 时间：2012-07-03T15:01:47.013
> 
> 标签：c#, asp.net, email, httpresponse

```
using (MemoryStream stream = new MemoryStream())
            {
                compositeLink.PrintingSystem.ExportToPdf(stream);
                Response.Clear();
                Response.Buffer = false;
                Response.AppendHeader("Content-Type", "application/pdf");
                Response.AppendHeader("Content-Transfer-Encoding", "binary");
                Response.AppendHeader("Content-Disposition", "attachment; filename=test.pdf");
                Response.BinaryWrite(stream.GetBuffer());
                Response.End();

            } 
```

我得到这个工作正常。下一步是将此 pdf 文件作为附件发送到邮件中

```
using (MemoryStream stream = new MemoryStream())
            {
                compositeLink.PrintingSystem.ExportToPdf(stream);
                Response.Clear();
                Response.Buffer = false;
                Response.AppendHeader("Content-Type", "application/pdf");
                Response.AppendHeader("Content-Transfer-Encoding", "binary");
                Response.AppendHeader("Content-Disposition", "attachment; filename=test.pdf");
                Response.BinaryWrite(stream.GetBuffer());

                System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
                message.To.Add("someone@example.net");
                message.Subject = "Subject";
                message.From = new System.Net.Mail.MailAddress("someoneelse@example.net");
                message.Body = "Body";
                message.Attachments.Add(Response.BinaryWrite(stream.GetBuffer()));
                System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("192.168.100.100");
                smtp.Send(message);

                Response.End();

        } 
```

我对这条线有疑问：

```
message.Attachments.Add(Response.BinaryWrite(stream.GetBuffer())); 
```

任何帮助如何让它工作？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:14:43.850

尝试这样的事情；

```
message.Attachments.Add(New Attachment(stream, "test.pdf", "application/pdf")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:11:43.243

Response.BinaryWrite 将获取流的内容并将它们写入响应。你不想要那个。

相反，您必须创建一个新的[Attachment](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)对象并将其添加到 message.Attachments。

尝试这个：

```
var ct = new ContentType();
ct.MediaType = MediaTypeNames.Application.Pdf;
ct.Name = "test.pdf";
message.Attachments.Add(new Attachment(stream, ct)); 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/6sdktyws.aspx)找到更多示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:12:53.313

该`Response.BinaryWrite`方法返回`void`，这意味着您没有向该`Add`方法传递任何内容。

您应该考虑做的是直接使用您的流来创建一个`Attachment`实例，并将其添加到消息的集合中。这看起来像：

```
message.Attachments.Add(new Attachment(stream, "file.pdf")); 
```

可以在[此处](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)的 MSDN 上找到发送带有附件的邮件的完整示例。希望有帮助。

# unit-testing - Maven 看不到测试

> ID：11313763
> 
> 赞同：0
> 
> 时间：2012-07-03T15:02:04.663
> 
> 标签：unit-testing, maven, selenium

我正在使用 maven 运行我的 selenium 测试，但它没有找到我把它放在下面的测试`src/test/java`。我的测试类被命名 `SeleniumTest.java`，所以它遵循约定（`*Test.java`）这里是代码：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org   
    /2001/XMLSchema-instance"

    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven- 
     v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.tests.functional.selenium</groupId>
    <artifactId>functionalTestsSelenium</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>functionalTestsSelenium Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.seleniumhq.selenium.client-drivers</groupId>
            <artifactId>selenium-java-client-driver</artifactId>
            <version>1.0.2</version>
            <scope>test</scope>
        </dependency>

    </dependencies>
    <build>
        <finalName>functionalTestsSelenium</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.0.2</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <version>1.0-beta-1</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>selenium-maven-plugin</artifactId>
            </plugin>

            <!-- Start the tomcat server and Deploy the war -->
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <configuration>
                    <wait>false</wait>
                    <container>
                        <containerId>tomcat6x</containerId>
                        <type>installed</type>
                        <home>${env.CATALINA_HOME}</home>
                    </container>
                </configuration>
                <executions>
                    <execution>
                        <id>start-container</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>start</goal>
                            <goal>deploy</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>stop-container</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <!-- Start the selenium server -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>selenium-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>start</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>start-server</goal>
                        </goals>
                        <configuration>
                            <background>true</background>
                            <logOutput>true</logOutput>
                        </configuration>
                    </execution>
                    <execution>
                        <id>stop</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop-server</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <!-- Fire the function tests -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.4.3</version>
                <configuration>
                    <junitArtifactname>
                        org.junit:com.springsource.org.junit
                    </junitArtifactname>
                    <excludes>
                        excluding the test class in the functional tests package
                        during the test phase
                        <exclude>**/functional/*Test.java</exclude>
                    </excludes>
                </configuration>
                <executions>
                    <execution>
                        <!-- Running the tests in the functional tests package during the integration tests phase. -->
                        <id>integration-tests</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <skip>false</skip>
                            <excludes>
                                <exclude>none</exclude>
                            </excludes>
                            <includes>
                                <include>**/functional/*Test.java</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是我的测试课：

```
package functional;
import com.thoughtworks.selenium.SeleneseTestCase;
public class SeleniumTest extends SeleneseTestCase {

    @Override
    public void setUp() throws Exception {
        setUp("http://www.netapsys.fr"); // délégation de la configuration à la classe parente
    }
    public void test() {
        selenium.open("/"); // ouverture de la page
        selenium.waitForPageToLoad("5000");
        assertTrue(selenium.isTextPresent("Netapsys"));
    }
} 
```

这是运行后的控制台结果：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building seleniumproject Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ seleniumproject ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ seleniumproject ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ seleniumproject ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\Users\neila\workspace\seleniumproject\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ seleniumproject ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ seleniumproject ---
[INFO] No tests to run.
[INFO] Surefire report directory: C:\Users\neila\workspace\seleniumproject\target\surefire-reports
 -------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-war-plugin:2.0.2:war (default-war) @ seleniumproject ---
[INFO] Exploding webapp...
[INFO] Assembling webapp seleniumproject in C:\Users\neila\workspace\seleniumproject\target\seleniumproject
[INFO] Copy webapp webResources to C:\Users\neila\workspace\seleniumproject\target\seleniumproject
[INFO] Generating war C:\Users\neila\workspace\seleniumproject\target\seleniumproject.war
[INFO] Building war: C:\Users\neila\workspace\seleniumproject\target\seleniumproject.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.922s
[INFO] Finished at: Wed Jul 04 08:18:56 GMT+01:00 2012
[INFO] Final Memory: 5M/15M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:40:19.360

您的测试属于包`functional`。因此，它不会在测试阶段运行，因为您的 pom 指定`*functional*`应排除任何包：

```
 <configuration>
                <junitArtifactname>
                    org.junit:com.springsource.org.junit
                </junitArtifactname>
                <excludes>
                    excluding the test class in the functional tests package
                    during the test phase
                    <exclude>**/functional/*Test.java</exclude>
                </excludes>
            </configuration> 
```

您的 pom 配置为在`pre-integration-test`和`post-integration-test`阶段启动（和停止）Selenium 服务器。但是，在这些阶段，您不会要求运行任何测试。我建议您查看[故障安全 Maven 插件](http://maven.apache.org/plugins/maven-failsafe-plugin/)以在此阶段运行您的`functional.*`Selenium 测试。`integration-test`

# jquery - 字符计数 - 粘贴时截断字符

> ID：11313765
> 
> 赞同：1
> 
> 时间：2012-07-03T15:02:10.750
> 
> 标签：jquery, jquery-plugins, counter

如果用户输入的字符多于 a 允许的字符`textarea`，我该如何截断它们？

[这](http://cssglobe.com/post/7161/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas)是用于字符计数的插件，[这里](http://cssglobe.com/lab/charcount/01.html)是演示页面。

**相关代码：**

```
<script type="text/javascript">
  $(document).ready(function(){ 
    //default usage
    $("#message1").charCount();

    //custom usage
    $("#message2").charCount({
      allowed: 50,      
      warning: 20,
      counterText: 'Characters left: '  
    });
  });
</script>

<label for="message">Type your message</label>
<textarea id="message1" name="message1"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:22:03.610

```
$("#message1").change(function(){
    var length = 50;
    var text = $(this).text()
    if(text.length > length){
        var myTruncatedString = text.substring(0,length);
        $(this).text(myTruncatedString);
    }
}); 
```

# c# - 在 asp.net 中出现错误“Internet Explorer 无法显示网页”

> ID：11313769
> 
> 赞同：1
> 
> 时间：2012-07-03T15:02:39.633
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个导致“Internet Explorer 无法显示网页”错误的代码块。当我单击提交按钮时，在未选中任何单选按钮的情况下，网页状态栏显示“等待主机响应”，然后显示“Internet Explorer 无法显示网页”。当我在 Visual Studio 中浏览代码时，代码执行得很好，并且没有执行任何 catch 块。

![在此处输入图像描述](../Images/8a4bb81dac40181f9566384822dfee6e.png)

如何**捕获错误并确定**显示错误页面的原因？

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
        try
        {
            if (rbtnSearchBy1.Checked)
            {
                Server.Transfer("ViewEmpHistory.aspx");
            }
            if (rbtnSearchBy2.Checked)
            {
                Server.Transfer("SearchEmp.aspx");
            }
            if (rbtnSearchBy3.Checked)
            {
                Server.Transfer("ViewEmpCard.aspx");
            }
        }

        catch (ThreadAbortException)
        {
            throw;
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:06:27.110

如果你不选择一个单选按钮，你不输入你的 catch 是正常的，因为你的应用程序没有抛出异常。但你可以查看你的事件日志

输入您的 cmd : eventvwr 以访问您的事件日志

![在此处输入图像描述](../Images/39caa76d01b6c96d11c132ed63045bf7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:34:27.653

为了调试这类问题，我经常发现使用 Tracing 更容易。

[您可以在应用程序级别](http://msdn.microsoft.com/en-us/library/0x5wc973.aspx)或[页面级别](http://msdn.microsoft.com/en-us/library/94c55d08.aspx)打开跟踪。

您的方法调用将变为：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    try
    {
        if (rbtnSearchBy1.Checked)
        {
            Server.Transfer("ViewEmpHistory.aspx");
        }
        if (rbtnSearchBy2.Checked)
        {
            Server.Transfer("SearchEmp.aspx");
        }
        if (rbtnSearchBy3.Checked)
        {
            Server.Transfer("ViewEmpCard.aspx");
        }
    }
    catch(Exception ex)
    {
        Trace.Warn("Exception Caught", "Exception: btnSubmit_Click", ex);
    }
} 
```

您可以通过导航到[Trace Viewer 查看](http://msdn.microsoft.com/en-us/library/wwh16c6c.aspx)跟踪日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T01:51:59.243

**无论您的“btnSubmit_Click”在什么 .cs 页面上，都在该**page_load 事件上放置一个断点。
此外，在“ViewEmpHistory.aspx”、“SearchEmp.aspx”和“ViewEmpCard.aspx”的 page_load 事件上放置一个断点。（所以现在你有四个断点）。

再次单步执行项目并确保所有参数值都正确传递，还确保您对`If (!PostbacK)`条件等 具有正确的逻辑（如果适用）。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-14T20:36:33.577

你所做的并不完全是结构良好的。如果这些块是独占的，那就更清楚了——这就是我在下面的代码中添加 else 语句的原因。我还指出了您希望在哪里处理评论中未选中任何按钮的状态。

但是你是对的，没有任何异常被抛出。您的代码没有抛出一个，当您结束处理请求而不返回任何类型的响应时，它不会导致异常。

```
 if (rbtnSearchBy1.Checked)
        {
            Server.Transfer("ViewEmpHistory.aspx");
        }
        else if (rbtnSearchBy2.Checked)
        {
            Server.Transfer("SearchEmp.aspx");
        }
        else if (rbtnSearchBy3.Checked)
        {
            Server.Transfer("ViewEmpCard.aspx");
        }
        else
        {
          // Here's where the logic will flow to if no radio button is clicked.
          // We could 
          // * Server.Transfer to a default location
          // * Throw an exception
          // * Do nothing, which returns no response, and causes
          //   IE to complain that it could not display the webpage.
        } 
```

# objective-c - 简化 GCD 模块和方法

> ID：11313770
> 
> 赞同：2
> 
> 时间：2012-07-03T15:02:39.780
> 
> 标签：objective-c, ios, nsurlconnection, objective-c-blocks, grand-central-dispatch

我发现自己经常编写**复杂的基于 GCD / 块的**方法（类似于下面显示的代码片段）。

1.  **您将**如何将这种方法**分成较小的部分**？

2.  您宁愿**在托管对象的代码中启用 GCD 解析方法，**还是宁愿**将**GCD 代码保留在**视图控制器**中？

3.  如何在**后台队列**中的以下代码中运行**NSURL 请求**（当我使用时，不会调用完成处理程序。**`[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]``NSOperationQueue currentQueue`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:05:58.080

1.  使用 C 函数或实例方法来委派某些进程（例如保存到 XML 文件）。

2.  绝对将其保存在对象的代码中。你破坏MVC太多了，

3.  不要使用`NSURLRequest`，而是使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)或[RestKit](http://restkit.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:11:29.200

我会把它分开，这样你就可以真正看到其中的 MVC 设计。所以我会：

1.  这`UIViewController`
2.  `UIViewController`一个管理器类，用于处理、`NSURLConnection`和 XML 解析器之间的交互
3.  处理`NSURLConnection`（或您想要的任何第 3 方）的类。
4.  处理 XML 解析和后写的类。

为了建立沟通，我会使用委托。这样你就会有不同的工作块。所以当需要更改XML Parse 时，只需切换类即可；如果您需要在其他地方使用此逻辑，只需切换`UIViewController`. 保持简单和干净。

**PS：**有时候，无论你做什么，代码本身就是复杂的，请使用注释，稍后你会感谢自己......**

# mongodb - 将数据从 db.currentOp 打印到网页

> ID：11313771
> 
> 赞同：2
> 
> 时间：2012-07-03T15:02:42.473
> 
> 标签：mongodb

我正在使用带有 Codeigniter (Cimongo) 的 MongoDB，我需要在网页上打印出命令 db.currentOp 的结果，以便我可以使用数据进行调试。

我怎样才能做到这一点？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:03:48.423

基于从 MongoDB 文档[查看和终止当前操作](http://www.mongodb.org/display/DOCS/Viewing+and+Terminating+Current+Operation)`db.currentOp()`，该命令只是对数据库特殊`$cmd.sys.inprog`集合的查询。您也可以通过 JS shell 确认这一点：

```
$ mongo
MongoDB shell version: 2.1.0
connecting to: test
> db.currentOp
function (arg) {
    var q = {};
    if (arg) {
        if (typeof arg == "object") {
            Object.extend(q, arg);
        } else if (arg) {
            q.$all = true;
        }
    }
    return this.$cmd.sys.inprog.findOne(q);
} 
```

我没有使用过 CodeIgniter 或 Cimongo，但是查看[Cimongo.php](https://github.com/vesparny/cimongo-codeigniter-mongodb-library/blob/master/libraries/cimongo/Cimongo.php)，您应该能够使用`get()`with 方法`$cmd.sys.inprog`来接收光标，然后您可以使用它来读取第一个元素。似乎没有任何抽象`MongoCollection::findOne()`，但这将是我在原始 PHP 中执行此操作的首选：

```
$mongo = new Mongo();
$inprog = $mongo->selectCollection('test', '$cmd.sys.inprog');
var_dump($inprog->findOne()); 
```

# jquery - 使用jquery取消选中选中的复选框

> ID：11313772
> 
> 赞同：0
> 
> 时间：2012-07-03T15:02:47.293
> 
> 标签：jquery

我需要编写一个函数来“取消选中”组中的旧“选中”框。基本上，是A组和B组，一旦检查并提交了A组的项目，它显示了A组的项目以及与B组相同的内容B组的相同内容。A组的项目仍然出现。jQuery中是否有任何内置函数可以解决问题。代码设置在[http://jsfiddle.net/rexonms/mJgcK/](http://jsfiddle.net/rexonms/mJgcK/)

HTML

```
<h1>Find Services You Need</h1>
<select class="selectOne">
<option>Please Select One</option>
<option name="one">Basic Needs</option>
<option name="two">Disabilities Services for Adults</option>

</select><!--selectOne-->

<div class="options">
<div class="option one">
    <h3>Basic Needs</h3>
    <input type="checkbox" name="oneA">Employment services<br>
    <input type="checkbox" name="oneB">Financial assistance<br>
    <input type="checkbox" name="oneC">Food<br>
    <input type="checkbox" name="oneD">Housing<br>
    <input type="checkbox" name="oneE">Legal issues<br>
</div><!--optionOne-->

<div class="option two">
    <h3>Disabilities Services for Adults </h3>
    <input type="checkbox" name="twoA">Advocacy<br>
    <input type="checkbox" name="twoB">Coordinated Care<br>
    <input type="checkbox" name="twoC">Employment Support<br>
    <input type="checkbox" name="twoD">Housing<br>
    <input type="checkbox" name="twoE">Recreation & Social Activities<br>
    <input type="checkbox" name="twoF">Referrals & Financial Options<br>
    <input type="checkbox" name="twoG">Services for the Deaf and Hard of Hearing<br>
</div><!--optionOne-->

</div><!--options-->

<div id="showMeContainer"><div id="showMe">Show Me</div>

</div><!--button-->

<div class="answers">
<div class="answerTitle"><h3>Title Here</h3></div><!--answerTitle-->

<div class="one">

    <div class="oneA answer">
        <p>Employment services</p>
    </div><!--oneA-->
    <div class="oneB answer" >
        <p>Financial assistance</p>
    </div><!--oneB-->
    <div class="oneC answer">
        <p>Food</p>        
    </div><!--oneC-->
    <div class="oneD answer">
        <p>Housing</p>
    </div><!--oneD-->
    <div class="oneE answer">
        <p>Legal Issues</p>
    </div><!--oneE-->
</div><!--answer-->

<div class="two">
    <div class="twoA answer">
        <p>Advocacy</p>
    </div><!--oneA-->
    <div class="twoB answer" >
        <p>Cordinated Care</p>
    </div><!--oneB-->
    <div class="twoC answer">
        <p>Employment Support</p>        
    </div><!--oneC-->
    <div class="twoD answer">
        <p>Housing</p>
    </div><!--oneD-->
    <div class="twoE answer">
        <p>Recreation & Social Activities</p>
    </div><!--oneE-->
    <div class="twoF answer">
        <p>Referrals & Financial Options</p>
    </div><!--oneF-->
    <div class="twoG answer">
        <p>Services for the Deaf and Hard of Hearing</p>
    </div><!--oneF-->
</div><!--two-->

</div><!--answers-->​ 
```

还有 jQuery 1.2.6（我没有使用更新版本的特权）

```
$(document).ready(function(){

$('.option').hide();//Hiding all options
$('.answer').hide(); //Hiding all the answers   
$('#showMeContainer').hide(); //Hiding the show me button
$('.answerTitle').hide();

$('.selectOne').change(function(event){

    var name = $('.selectOne option:selected').attr('name');
    //alert(name);
    $('#showMeContainer').hide(); 
    $('.option').hide();
    $('.' + name).show();
    $('#showMeContainer').show(); 

});

$('#showMe').click(function(event) {  
    $('.answer').hide();
    $('.answerTitle').hide();
    var checked = $('.option').find(':checked');
    $.each(checked, function() {
        var name = this.name;
        $('.' + name).show();
         $('.answerTitle').show();

    });

    var x = $('#compBody').height() + 50;// Getting the height on the div
    $('#pageBody').css('height',x); // updating the height of the outer div

});
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:15:17.723

只需添加以下行

```
$(".options [type=checkbox]").attr('checked', false); 
```

在`$('.selectOne').change()`

当列表选择更改时，这将取消选中所有复选框。

[**演示**](http://jsfiddle.net/mJgcK/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:50:25.123

我不确定你是否还在寻找答案，但你可以在这个[演示中看到](http://jsfiddle.net/mJgcK/61/)

我只是将每个复选框与其单击事件连接起来，这样您就可以删除其他组的选中复选框，这样他们就可以选择任何组，而不必担心复选框被取消选中

# javascript - JavaScript - 检查这个（当前元素）是否有一个以结尾的类

> ID：11313775
> 
> 赞同：1
> 
> 时间：2012-07-03T15:02:55.100
> 
> 标签：javascript, jquery, jquery-selectors

要选择以 I 结尾的输入，`-top`请执行以下操作：

`$("input[class$='-top'],input[class*='-top ']")`

但是，如何检查这是否以 结尾`-top`？

```
$('Input').keyup( function(){

 // How to check if $(this).prop('class') end with  "-top"

}); 
```

如何检查是否`$(this).prop('class') end with "-top"`

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:04:15.293

您正在寻找`.is()`：

```
if ($(this).is('[class*=-top]')) { ... } 
```

*编辑*——当然，用您选择的选择器替换...

# c# - 如何在没有任何公共成员的情况下引用 dll？

> ID：11313776
> 
> 赞同：0
> 
> 时间：2012-07-03T15:03:00.030
> 
> 标签：c#, sqlite, assembly-references

我正在开发一个集成测试工具，它为开发人员提供了针对我们的集成数据库或 SQLite 内存数据库执行方法的能力。

因为我的工具没有引用任何实际的 SQLite 代码，所以我必须添加虚拟代码以确保 msbuild 复制 DLL：

```
namespace References {
    internal interface IReferenceUnusedDependencies {
        SQLiteException e { set; } // Reference System.Data.SQLite.dll
        IMappingEngineRunner r { set; } // Reference AutoMapper.dll
    }
} 
```

但是，我不知道如何从中引用代码`System.Data.SQLite.Linq.dll`——它包含的所有类和接口都是内部的。

是否有可能以某种方式进行这些参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:08:24.677

将此程序集属性添加到您的主项目

```
using System.Runtime.CompilerServices;
[assembly: InternalsVisibleTo( "MyTestDLLName" )] 
```

重新阅读问题，您是否只需将引用的程序集复制到您的bin？

如果是这样，您可以在解决方案资源管理器的项目属性下选择复制到 Visual Studio（反过来使用 MSBuild）中的属性。

在 References 文件夹中选择引用，然后选择复制本地。（其他 MSBuild 属性也可用）

# iphone - iPhone Web 表单 - 禁用上一个/下一个 | 自动填充 | 完成吧

> ID：11313782
> 
> 赞同：0
> 
> 时间：2012-07-03T15:03:10.600
> 
> 标签：iphone, html

是否可以禁用或禁止显示在具有（上一个|下一个）自动填充和完成按钮的 Web 表单上的栏？

我看过有关在本机应用程序中添加或抑制它的帖子，但我正在开发一个网络应用程序，并且好奇它是否只是添加到表单的属性，例如如何禁用输入字段的自动大写和自动更正.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:19.433

没有没有办法压制吧。

该栏没有公开，甚至在使用`UIWebView`.

# html - 我认为 CSS3 transform translateZ 在某种程度上等于 scale

> ID：11313783
> 
> 赞同：17
> 
> 时间：2012-07-03T15:03:11.417
> 
> 标签：html, css, transform, scale

在某些情况下，我认为`translateZ`和`scale`具有相同的效果，就像放大或缩小一样。

我认为它们之间有一些计算联系，如果我知道它们中的一个值，比如`translateZ(-1000px)`和父`perspective`值，我可以计算出`scale`具有相同效果的值等于`translateZ`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-22T04:02:19.730

你是对的。当一个物体向你移动时（即`translateZ`），它看起来更大（即`scale`）。

如此图所示，`perspective`定义了查看者相对于容器的位置，并`translateZ`定义了主题相对于容器的位置。

> ![translateZ的示意图](../Images/3044eb4589eb8a37ec80d60bec4ae1d0.png)

从 scale 到 translateZ（和返回）的公式：

![scale=perspective/(perspective-translateZ)](../Images/d9bffb208fdd9acc4e6729f9778006db.png)-或者-![在此处输入图像描述](../Images/e807acf0ea6c27e3558494b56ebed4e5.png)

我将把数学证明留给数学高手，但我对[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)做了一些检查，一切都解决了。

### 例子：

假设您距离容器 100px：`#container { perspective: 100px; }`

1.  如果你`translateZ(50px)`，对象已经向你移动了一半，并且将出现两倍大，使其成为 2 倍。
2.  如果你`translateZ(75px)`，对象又移动*了*一半，并且将再次加倍，使其成为 4 倍。
3.  如果您继续这样做，随着您越来越接近`translateZ(100px)`，主题将接近无限大。

试试看。这是一个[JSFiddle](http://jsfiddle.net/ansonhoyt/83jtA/)，可以直观地比较不同的示例。

### 限制：

如果对象直接向您移动，则此方法有效，但如果您执行诸如在 3D 空间中旋转对象之类的操作，则此方法会分崩离析。也有数学，但它变得复杂。查看维基百科上的[3D 投影](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)。

# jquery - jQuery可拖动错误

> ID：11313788
> 
> 赞同：0
> 
> 时间：2012-07-03T15:03:36.253
> 
> 标签：jquery, jquery-ui

我在 jsfiddle 上创建了一个示例，该示例在对话框[http://jsfiddle.net/didierg/dNyYQ/](http://jsfiddle.net/didierg/dNyYQ/)上有选项卡，我做了一些更改。首先，我添加了一个标题栏，[http://jsfiddle.net/wwDpD /1/](http://jsfiddle.net/wwDpD/1/)然后将 draggable 设置为 true [http://jsfiddle.net/wzF5Y/2/](http://jsfiddle.net/wzF5Y/2/)

最后的小提琴令人惊讶地在 jsfiddle [http://jsfiddle.net/wzF5Y/2/](http://jsfiddle.net/wzF5Y/2/)上运行，但是当我运行浏览器 FF 12.0 的示例时，对话框隐藏在最顶部的 div 上方；即在打开对话框按钮上方。

我能错过什么？

图片： ![错误截图](../Images/00357a025893516bc04c374de27c2319.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:56:52.247

似乎对话框（以及覆盖）被限制为`div`with `id="force"`。`div`考虑到其子元素的大小，Firefox 会尽量保持其大小。因此，当您尝试拖动对话框时，它会在 force 内向上推`div`，因为`div`它只覆盖了页面的顶部。在其他浏览器中，力的尺寸`div`被最大化，因此您可以将对话框拖动到页面上的任何位置。您可以通过添加以下 CSS 获得与其他浏览器相同的行为：

```
#force {
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:53:58.320

您是否尝试设置对话框的 z-index。此外，如果您可以发布您在 FF 中看到的内容的快照，那就太好了。

# android - 插件 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1 需要 Maven 版本 [3.0.3,)

> ID：11313789
> 
> 赞同：3
> 
> 时间：2012-07-03T15:03:36.550
> 
> 标签：android, maven

在 Eclipse 中构建我的 android 项目时遇到问题。错误是：

```
Build errors for MyAndroidProject; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources (default-generate-sources) on project MyAndroidProject: The plugin com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1 requires Maven version [3.0.3,) 
```

这是我的 Pom.xml 插件：

```
 <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.1.1</version>
            <extensions>true</extensions>
        </plugin>
    </plugins> 
```

关键是我在本地环境和 Eclipse 中使用 maven 3.0.3。

```
Apache Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100) 
```

知道这个错误来自哪里以及如何解决它吗？

提前谢谢了 ;）

鲁本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:42:51.743

If you are running the build from a custom run configuration in Eclipse you may need to specify what Maven runtime to use. Try downloading Maven 3.0.4 and add it as a custom Maven runtime in Eclipse then select the 3.0.4 Maven runtime under Run Configurations for your particular build.

I remember having problems also with the embedded 3.0.3 while 3.0.4 works fine.

# java - 在不启动事务的情况下通过 Hibernate 对 MySQL 数据库运行查询有什么影响？

> ID：11313792
> 
> 赞同：1
> 
> 时间：2012-07-03T15:03:53.947
> 
> 标签：java, mysql, hibernate, jdbc, guice-persist

在我看来，我们有一些代码尚未启动事务，用于只读操作，我们通过 JPA/Hibernate 和直接 SQL 的查询似乎可以工作。我们的框架会打开一个 hibernate/jpa 会话，但是对于遗留代码中的一些地方，我们发现没有打开任何事务。

似乎最终发生的事情是代码通常只要不使用 EntityManager.persist 和 EntityManager.merge 就可以运行。但是偶尔（可能是 1/10）次 servlet 容器会因此错误而失败...

```
Failed to load resource: the server responded with a status of 500 (org.hibernate.exception.JDBCConnectionException: The last packet successfully received from the server was 314,024,057 milliseconds ago.  The last packet sent successfully to the server was 314,024,057 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.) 
```

据我所知，我们的应用程序代码中只有少数几个在查询之前没有启动事务的地方会出现这个问题。有没有其他人认为可能是导致这种行为的非事务性查询运行？

仅供参考，这是我们的堆栈...

-Guice -Guice-Persist -Guice-Servlet -MySql 5.1.63 -Hibernate/C3P0 4.1.4.Final -Jetty

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:03:15.120

是的，我认为。

如果不打开事务就开始查询，这个事务会被底层自动打开。此连接带有已打开的事务，将返回到连接池并提供给另一个用户，该用户将接收到已打开事务的连接，这可能导致状态不一致。

在我的公司，过去我们在只读非事务性查询方面遇到了很多问题，并调整了我们的框架来处理这个问题。除此之外，我们与 BoneCP 开发人员进行了交谈，他们同意开发一组功能来帮助处理这个问题，比如自动回滚返回池的未提交事务，并打印一个堆栈跟踪，说明哪个方法忘记提交事务。

这个问题在这里讨论过：http: [//jolbox.com/forum/viewtopic.php ?f=3&t=98](http://jolbox.com/forum/viewtopic.php?f=3&t=98)

# c# - JSON.NET - 将 JSON 反序列化为对象，该类类型在内部字段中

> ID：11313793
> 
> 赞同：0
> 
> 时间：2012-07-03T15:03:54.990
> 
> 标签：c#, .net, json, serialization, json.net

通常我们通过这段代码使用 JSON.NET 反序列化

```
JsonConvert.DeserializeObject<CLASS TYPE> (text, settings); 
```

想象一下，我们有这样的 JSON 请求：

```
{
  "command" : "register_user",
  "params" : {
    "@c" : "register_params",
    "name" : "sdfsd",
    "email" : "sdfsd@ddkdk",
    "password" : "JDFffJJJd"
  }
} 
```

我们如何自动检测到我们需要使用 JSON.NET 将“名称”、“电子邮件”和“密码”字段反序列化为一个 register_params 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T02:29:11.910

使用 TypeName 值“$type”。

我已经写了两种方法来做到这一点：

```
//T can be an interface or a derived type
public static T DeserializeObject<T>(string json) where T : class
//Uses "$type" to determine the object
public static object DeserializeObject(string json) 
```

来源： [https ://gist.github.com/ricjac/b84a1d550cfe469f3945](https://gist.github.com/ricjac/b84a1d550cfe469f3945)

# lisp - cl-who 和格式

> ID：11313795
> 
> 赞同：2
> 
> 时间：2012-07-03T15:03:57.767
> 
> 标签：lisp, common-lisp, sbcl, hunchentoot, cl-who

我正在尝试使用 cl-who 生成以下 html 代码：

```
<html>
<body>
<div id="cnt_1"></div>
<div id="cnt_2"></div>
<div id="cnt_3"></div>
</body>
</html> 
```

这是我认为可行的代码：

```
(with-html-output-to-string (*standard-output* nil)
 (:html
  (:body
   (do ((cnt 1 (+ cnt 1)))
       ((> cnt 3))
     (htm (:div :id (format t "cnt_~A" cnt))))))) 
```

但相反，我得到以下输出：

```
<html><body><divcnt_1></div><divcnt_2></div><divcnt_3></div></body></html> 
```

似乎 :id 不适用于函数调用。这是否意味着我不能在 cl-who 中使用格式？我应该改用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:42:39.733

那是因为您不想直接在流中写入。

```
CL-USER> (with-html-output-to-string (s) (:div :id "test"))
"<div id='test'></div>"

CL-USER> (with-html-output-to-string (s)
           (:html
            (:body
             (do ((cnt 1 (+ cnt 1)))
                 ((> cnt 3))
               (htm (:div :id (format nil "cnt_~A" cnt)))))))

"<html><body><div id='cnt_1'></div><div id='cnt_2'></div><div id='cnt_3'></div></body></html>" 
```

顺便说一句，如果您想直接在流中写入，请使用 CL-WHO:FMT。

# c# - AntiForgeryToken 根据请求更改

> ID：11313804
> 
> 赞同：9
> 
> 时间：2012-07-03T15:04:32.127
> 
> 标签：c#, .net, asp.net-mvc, security, csrf

我正在使用`AntiForgeryToken`辅助方法。根据我对 AntiForgeryToken 的了解，它是会话基础，因此每个用户都有相同的令牌，但另一个用户将有不同的令牌（前提是您对所有表单使用相同的盐）。我的“问题”是`AntiForgeryToken`为具有相同盐的同一用户生成不同的令牌。例如 ...

**控制器**

```
public ActionResult Test()
{
    return View();
} 
```

**看法**

```
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken("Salty!")
} 
```

**输出请求 #1**

```
<input name="__RequestVerificationToken" type="hidden" value="K1sijFuYvyGUJjGg33OnLjJaU3tFpGFDutRt9TOFSkZ6FcrhJMMQPnOqjIHuTwBXs/sPBXEiE+1qyV9l63nnSO161b+OtLbaBoPC7K3/7wxtnuSY+N0o/fqBgVoDyac4dNVp+OvanKBSrHINKfc3WEg9269BHOJNzFowC6Aeac/afAGTGrBypxUHfqrKVowD" /> 
```

**输出请求 #2**

```
<input name="__RequestVerificationToken" type="hidden" value="mOpP6LMQXnCmjr5/Wdtnhguh3PyZxWj7GWf8LYzZXPKcJBBT+DbAHvynquSD65O0DBw1RKR7DxCNg372ukftCOWms+o75CraMyFMnvjGk7RU+znIQm05eRQvr5H6d/MDyn+0DWm3jLnMBM9GplsgMRqbdAHzSe69/cS2x9A4X/9jFTZQHUWXXHUr0xewF8Rk" /> 
```

使用相同盐的相同会话的密钥不同。我对 CRSF 保护有根本的误解吗？或者这是一个新功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T15:14:03.290

反 XSRF 令牌通过将相同的**随机**值加密到会话 cookie 和您的表单中来工作。会话 cookie 仅在您从您生成的表单中发帖时提交。

这种方法也适用于所有服务器共享加密密钥的服务器群（在负载平衡场景中）。验证仅通过比较来自发布的表单数据的解密值和来自发布的会话 cookie 的解密值来进行。这称为[双重提交cookie](http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html)方法。

所以每个请求得到不同的值是很正常的。[这是一篇](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)关于 ASP.NET MVC XSRF 令牌的好文章。

# c - 打开文件时发送命令行参数

> ID：11313809
> 
> 赞同：1
> 
> 时间：2012-07-03T15:04:48.007
> 
> 标签：c, cocoa, command-line

我已经在我的应用程序外部生成了一个 pdf 文件，一旦完成，我想打开我的应用程序并将其传递给适当的文件路径以供使用。我查看了[Cocoa Scripting Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptableCocoaApplications/SApps_handle_AEs/SAppsHandleAEs.html)，但我不确定这是否是我需要的。我真正想要的只是通过命令行将 pdf 的路径作为参数传递。谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:15:47.657

我假设您想从某种 shell 脚本运行它？如果是这样，您应该能够使用`open`命令 ( [manpage](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html) ) 来启动它：

```
$ open /Applications/MyApp.app --args /path/to/file.pdf 
```

# asp.net-mvc - 如何将editmodel/postmodel突变为域模型

> ID：11313822
> 
> 赞同：9
> 
> 时间：2012-07-03T15:05:30.603
> 
> 标签：asp.net-mvc, viewmodel, automapper, editmodel

在 ASP.NET MVC 项目中，我们使用 AutoMapper 从域模型映射到视图模型 - 有时还会在这样做的同时展平层次结构。这就像一个魅力，使我们的视图的渲染逻辑非常精简和简单。

当我们想要从视图模型（或后模型或编辑模型）到域模型的另一种方式时，**尤其是在更新对象时**，混乱就开始了。我们不能使用自动/双向映射，因为：

1.  我们将不得不展开扁平的层次结构
2.  域模型上的所有属性都必须是可变的/具有公共设置器
3.  来自视图的更改并不总是被映射回域的平面属性，但有时需要调用诸如“ `ChangeManagerForEmployee()`”或类似的方法。

这也在 Jimmy Bogards 的文章中有所描述：[AutoMapper 中的双向映射案例](http://lostechies.com/jimmybogard/2009/09/18/the-case-for-two-way-mapping-in-automapper/)，但没有详细描述解决方案，只是他们去：

> 从 EditModel 到 CommandMessages——从松散类型的 EditModel 到强类型的中断消息。单个 EditModel 可能会生成六条消息。

在类似的[SO question中，](https://stackoverflow.com/a/2020620/1499046) [Mark Seeman](https://stackoverflow.com/users/126014/mark-seemann)有一个回答，他提到

> 我们使用抽象映射器和服务将 PostModel 映射到域对象

但是细节 - 概念和技术实现 - 被遗漏了。

我们现在的想法是：

1.  在控制器的操作方法中接收 FormCollection
2.  获取原始域模型并将其展平为 viewModelOriginal 和 viewModelUpdated
3.  使用将 FormCollection 合并到 viewModelUpdated 中`UpdateModel()`
4.  使用一些通用的辅助方法来比较 viewModelOriginal 和 viewModelUpdated
5.  A）像 Jimmy Bogard 那样生成 CommandMessage 或 B）通过属性和方法将差异直接变异到域模型中（可能直接通过 AutoMapper 映射 1-1 属性）

有人可以提供一些示例，说明它们是如何从 FormCollection 通过editmodel/postmodel 到域模型的吗？“CommandMessages”还是“抽象映射器和服务”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:23:50.533

I use the following pattern:

```
[HttpPost]
public ActionResult Update(UpdateProductViewModel viewModel)
{
    // fetch the domain model that we want to update
    Product product = repository.Get(viewModel.Id);

    // Use AutoMapper to update only the properties of this domain model
    // that are also part of the view model and leave the other properties unchanged
    AutoMapper.Map<UpdateProductViewModel, Product>(viewModel, product);

    // Pass the domain model with updated properties to the DAL
    repository.Update(product);

    return RedirectToAction("Success");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T23:28:48.053

您可能要考虑 CQRS（命令查询责任分离 - 我认为这可能是您缺少的概念），甚至可能使用事件溯源。

它基本上是一种分离从数据源读取和写入数据源的逻辑的做法，甚至可能意味着读取和写入具有不同的数据模型。

这可能是一个很好的起点：[http ://abdullin.com/cqrs/](http://abdullin.com/cqrs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:51:32.213

这里与我一直在做的事情有一些相似之处。我的视图模型层次结构与其等效的域对象相比只是有些扁平化，但我确实必须处理在保存时调用显式服务方法来执行诸如添加到子集合、更改重要值等之类的事情，而不是简单地反向映射。我还必须比较快照之前和之后。

我的保存是将 Ajax 作为 JSON 发布到 MVC 操作，然后输入该操作，该操作神奇地绑定回 MVC 的视图模型结构。然后我使用 AutoMapper 将顶级视图模型及其后代转换回其等效的域结构。我已经为客户端上添加了新的子项（我正在使用 Knockout.js）并且我需要调用显式服务方法的情况定义了许多自定义 AutoMapper ITypeConverters。就像是：

```
 foreach (ChildViewModel childVM in viewModel.Children)
        {
            ChildDomainObject childDO = domainObject.Children.Where(cdo => cdo.ID.Equals(childVM.ID))).SingleOrDefault();
            if (childDO != null)
            {
                Mapper.Map<ChildViewModel, ChildDomainObject>(childVM, childDO);
            }
            else
            {
                MyService.CreateChildDO(someData, domainObject); // Supplying parent
            }
        } 
```

我对删除做了类似的事情，这个过程很好地贯穿整个结构。我猜一个扁平的结构可能更容易使用或更难 - 我有一个带有 ID 的 AbstractDomainViewModel，我用它来进行上述匹配，这有帮助。

我需要在更新之前和之后进行比较，因为我的服务层调用触发器验证，这会影响对象图的其他部分，这决定了我需要返回什么 JSON 作为 Ajax 响应。我只关心与 UI 相关的更改，因此我将保存的域对象转换回新的视图模型，然后使用辅助方法来比较两个视图模型，结合使用手动前期检查和反射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:01:40.587

选项 C：把它全部放在控制器动作中。接下来，如果这变得很麻烦，请分解为服务（抽象映射器）或消息作为方法（命令消息方式）。

命令消息方式：

```
public ActionResult Save(FooSaveModel model) {
    MessageBroker.Process(model);

    return RedirectToAction("List");
} 
```

和处理器：

```
public class FooSaveModelProcessor : IMessageHandler<FooSaveModel> {

    public void Process(FooSaveModel message) {
        // Message handling logic here
    }

} 
```

这实际上只是将表单的“处理”从控制器动作中移到单独的、专门的处理程序中。

但是，如果控制器动作变得多毛，我只会真正走这条路。否则，只需填写表格并根据需要对域模型进行适当的更新。

# osgi - 如何通过 org.osgi.framework.Bundle 对象获取 bundle 的绝对 jar 路径？

> ID：11313826
> 
> 赞同：0
> 
> 时间：2012-07-03T15:05:39.083
> 
> 标签：osgi

我有一个 org.osgi.framework.Bundle 实例，我试过了

```
bundle.getLocation();
bundle.getClass().getProtectionDomain().getCodeSource().getLocation(); 
```

它们都不能返回特定依赖 jar 文件的绝对路径。所以我的问题是如何通过这个捆绑实例获取路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:24:17.013

你不能......因为stackoverflow至少需要30个字符......你真的无法得到它......框架可以自由地以他们认为合适的任何方式存储JAR。

# google-docs-api - 可恢复创建媒体链接

> ID：11313833
> 
> 赞同：0
> 
> 时间：2012-07-03T15:05:59.333
> 
> 标签：google-docs-api, google-drive-api

我正在创建一个 iOS 应用程序，它将文件上传到 Google Docs 中的特定集合。如何获取该集合的可恢复创建媒体链接？

当我按照此处的建议对集合执行获取请求时：[https ://groups.google.com/forum/?fromgroups#!topic/google-documents-list-api/LOxHfIxVAec](https://groups.google.com/forum/?fromgroups#!topic/google-documents-list-api/LOxHfIxVAec)

我得到以下 xml（遗憾的是没有 resumable-create-media）

```
<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns='http://www.w3.org/2005/Atom'
         xmlns:docs='http://schemas.google.com/docs/2007' 
         xmlns:batch='http://schemas.google.com/gdata/batch' 
         xmlns:gd='http://schemas.google.com/g/2005'>
     <id>https://docs.google.com/feeds/documents/private/full/folder%3A0B4Xm3k31FF25MXZzbjZvNzhZU00</id>
     <published>2012-07-03T14:38:35.068Z</published>
     <updated>2012-07-03T14:38:35.068Z</updated>
     <category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/docs/2007#folder' label='folder'/>
     <title type='text'>My Collection</title>
     <content type='application/atom+xml' src='https://docs.google.com/feeds/folders/private/full/folder%3A0B4Xm3k31FF25MXZzbjZvNzhZU00'/>
     <link rel='alternate' type='text/html' href='https://docs.google.com/#folders/folder.0.0B4Xm3k31FF25MXZzbjZvNzhZU00'/>
     <link rel='http://schemas.google.com/docs/2007#icon' type='image/png' href='https://ssl.gstatic.com/docs/doclist/images/icon_9_collection_list.png'/>
     <link rel='self' type='application/atom+xml' href='https://docs.google.com/feeds/documents/private/full/folder%3A0B4Xm3k31FF25MXZzbjZvNzhZU00'/>
     <link rel='edit' type='application/atom+xml' href='https://docs.google.com/feeds/documents/private/full/folder%3A0B4Xm3k31FF25MXZzbjZvNzhZU00/h47320jg'/>
     <author><name>xxxx</name>
     <email>xxxx@gmail.com</email></author>
     <gd:resourceId>folder:0B4Xm3k31FF25MXZzbjZvNzhZU00</gd:resourceId>
     <gd:lastModifiedBy><name>stayaway</name><email>xxxx@gmail.com</email></gd:lastModifiedBy>
     <gd:quotaBytesUsed>0</gd:quotaBytesUsed>
     <docs:writersCanInvite value='true'/>
     <gd:feedLink rel='http://schemas.google.com/acl/2007#accessControlList' href='https://docs.google.com/feeds/acl/private/full/folder%3A0B4Xm3k31FF25MXZzbjZvNzhZU00'/>
</entry> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:54:21.977

[Google Drive API](https://developers.google.com/drive/v2/reference/)已取代 Documents List API。

一个示例 Objective-C 应用程序演示了 Drive API 的使用，包括上传和下载文件，在[这里](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/DriveSample/DriveSampleWindowController.m)。

# c++ - 为什么 C++ 复制构造函数会失败？

> ID：11313836
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:06:18.450
> 
> 标签：c++

```
#include <iostream>
#include <string>

using namespace std;

class A
{
public:
    A() { i=1; j=2;};
    A (A &obj) { i= obj.i+100; j= obj.j+100;};
     int i;
     int j;
};

class B:public A
{
public:
    B():A() {i=10; j=20; k=30;};

    B(A &obj) {  A::A(obj); k=10000; };//

    int k;
};

int main()
{ 
    A dog;
    B mouse(dog);
    cout<<mouse.i<<endl;
    cout<<mouse.k<<endl;

    return 0;
} 
```

我尝试为派生类编写一个复制构造函数，以利用基类的复制构造函数。我预计`mouse.i`应该是 101，但实际上编译结果是 1。 的值`mouse.k`是 10000，这是预期的。我想知道我的代码有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:10:53.600

您必须使用初始化列表来调用父级的构造函数（您也应该为所有其他成员执行此操作）：

```
B(A const& obj) : A(obj), k(10000) {} 
```

此外，复制时您不会修改原始对象，因此您应该`const`引用它。这将允许您从常量对象（或通过常量引用）复制，提高常量正确性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T15:11:12.700

在这个构造函数中：

```
B(A &obj) {  A::A(obj); k=10000; }; 
```

`A::A(obj);`不初始化基础子对象；相反，它创建了一个本地对象，也称为`obj`. 等价于`A::A obj;`, 等价于`A obj;`. [更新：或者它可能做了其他事情，或者它的格式不正确——无论如何，这是错误的。]

您想使用初始化列表：

```
B(A & obj) : A(obj), k(10000) {} 
```

此外，您几乎肯定希望构造函数参数为`A const &`，以允许从常量对象或临时对象进行构造。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T15:10:15.740

您应该像这样初始化基类：

```
B(A &obj):A(obj) {  k=10000; } 
```

（更多关于[调用超类构造函数的规则是什么？](https://stackoverflow.com/questions/120876/c-superclass-constructor-calling-rules)）。附带说明：`const`用于复制构造函数参数：

```
A (const A &obj) {...} 
```

**编辑**：

初始化实例成员的首选方法是通过初始化列表，因此您的 ctor 看起来像

```
B(A &obj):A(obj), k(10000) { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:22:50.860

```
#include <iostream>
#include <string>

using namespace std;

class A
{
public:
A()
{
    i=1;
    j=2;
}

A (A &obj)
{
    i= obj.i+100;
    j= obj.j+100;
}

 int i;
 int j;
};

class B:public A
{
public:
B():A() {i=10; j=20; k=30;}

B(A &obj)
:A(obj)
 {
  //A::A(obj);
  k=10000;
  }//

int k;
};

int main()
{
    A dog;
    B mouse(dog);
    cout<<mouse.i<<endl;
    cout<<mouse.k<<endl;

    return 0;
} 
```

这对我有用

```
B(A &obj)
{
    A::A(obj)
} 
```

在 gcc 编译器上是非法的

# ios - 如何更改 UIImagePicker 中的条形颜色？

> ID：11313838
> 
> 赞同：0
> 
> 时间：2012-07-03T15:06:20.127
> 
> 标签：ios, uiimagepickercontroller

我正在尝试将相机视图中的条形图着色为黑色。到目前为止，以下方法均无效。我要更改 2 个视图，第一个带有相机图标和“取消”，第二个带有“重拍”和“使用”按钮。有任何想法吗？

```
- (void)openCamera {
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    picker.navigationBar.barStyle = UIBarStyleBlackOpaque;
    picker.toolbar.barStyle = UIBarStyleBlackOpaque;
    picker.navigationBar.tintColor = [UIColor blackColor];
    [self presentModalViewController:picker animated:NO];
}

- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    UIImagePickerController *picker = (UIImagePickerController *)navigationController;
    if((picker)&&(picker.sourceType == UIImagePickerControllerSourceTypeCamera))
    {
        picker.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque;
        picker.navigationController.toolbar.barStyle = UIBarStyleBlackOpaque;
        picker.navigationBar.tintColor = [UIColor blackColor];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:11:38.603

使用`UIAppearance`. 查阅[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:35:34.523

您可以使用`UIImagePickerController` `showsCameraControls`and`cameraOverlayView`在`UIImagePickerController`. 将该`showsCameraControls`值设置为 NO 将隐藏`UIImagePickerController`除相机视图之外的所有内容。`cameraOverlayView`允许您将自己的视图置于相机视图之上。然后，您可以使用您自己的底栏、您自己的按钮……创建一个视图，并将其放在 UIImagePicker 的前面。

```
UIView *overlayView = [[UIView alloc] init];
/* Customize overlayView with your bottomBar and button */
UIImagePickerController imagePickerController = [[UIImagePickerController alloc] init];
/* Configure your UIImagePickerController for picture and/or video */
imagePickerController.showsCameraControls = NO; //Must be set to NO if you want to use the cameraOverlayView
imagePickerController.cameraOverlayView = overlayView;
overlayView = nil; 
```

不幸的是，如果你想使用这种方法，你必须重新创建原始`UIImagePickerController`视图的所有按钮（闪光模式按钮、选项按钮……），并且你必须创建自己的导航控制器才能进入视图使用“重拍”和“使用”按钮。然而，它的实现非常简单。

# actionscript-3 - 在 Actionscript for Flex Mobile App 中预加载动态创建的视图

> ID：11313843
> 
> 赞同：0
> 
> 时间：2012-07-03T15:06:29.710
> 
> 标签：actionscript-3, apache-flex, air, flex4.5, flex-mobile

我遇到了以下问题，我的老板希望我让我们的应用程序响应更快，而无需在切换视图之间等待时间。它曾经是一个“标准”应用程序，`ViewNavigator`但只有一个`View`被破坏并根据用户对他自己创建的选项卡的选择使用不同内容重新创建的应用程序。视图已使用默认值切换`SlideViewTransition`。如下所述，我现在使用稍微更轻量级的方法将时间缩短到半秒，但是半秒仍然太多了。

该应用程序是一个选项卡式应用程序，用户可以在其中自己创建和编辑新视图，因此可以创建/编辑/删除选项卡及其相应的选项卡。我当前的实现基于用于显示“视图”的a`ButtonBar`和 a 。`Group`组的内容是根据选定的选项卡创建的。内容基于存储构建“视图”所需的所有信息的 XML 数据。自然地，删除和创建组件需要一点时间（我谈到的半秒），所以我正在寻求另一个解决方案。

我想到的是`ViewNavigator`在应用程序启动时使用并创建所有存储的视图。

非常像这样：

```
for each (var _view:XML in _allViewsConfig.children()) {
    var compView:View = new View();
    compView.percentHeight = 100;
    compView.percentWidth = 100;
    compView.name = _view.label;

    for each (var _groupElement:XML in _view.vgroup) {
        var group:VGroup = new VGroup;
        group.percentWidth = 100;
        group.percentHeight = 100;

        for each (var _windowElement:XML in _groupElement.window) {
            var window:WindowContainer = new WindowContainer;
            for each (var _componentElement:XML in _windowElement.component) {                  
                var component:UIComponent = _componentManager.create(_componentElement.@type, _componentElement);
                window.addElement(component);
            }

            group.addElement(window);
        }
        compView.addElement(group); 
    }
    views.addItem(compView); 
```

}

`views`是一个 ArrayList，用于存储创建的视图。

我现在唯一遇到的问题是我不能`View`在对应的`ViewNavigator`.

我按照通常的方式尝试了它，即`navigation.pushView(_viewCreator.views.getItemAt(0) as Class);` 这个，但是不起作用，没有错误或任何东西，`ViewNavigator`只是没有做任何事情，所以我想`View`不能像这样创建一个类。

那么我怎样才能使这项工作呢？另外，你们是否认为这是解决问题的正确方法，尤其是考虑到应用程序的整个动态特性（基于选项卡）？自然地，幻灯片转换将被完全禁用，因为我们的复杂组件非常慢。

任何帮助、评论或想法将不胜感激！

编辑：再想一想，简单地使用`Groups`而不是应该使它更轻量级，`ViewNavigator`并`View`解决视图不被推送的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:46:34.547

实际上`ViewNavigator pushView()`是一种创建给定类（方法参数）实例的机制。

出于所有导航历史的目的，`ViewNavigator`使用`NavigationStack`对象来存储相关值（您也可以自定义）。

我没有直接的答案给你，但我认为你必须实现自己的自定义`ViewNavigator`机制（扩展`ViewNavigator`以利用现有的有用方法并覆盖其他方法）。

# java - 如何在 Google AppEngine 中实现 GCM？

> ID：11313846
> 
> 赞同：0
> 
> 时间：2012-07-03T15:06:44.613
> 
> 标签：java, android, servlets, push-notification, google-cloud-messaging

我是一名 PHP 开发人员和网页设计师。在我的工作中，一位合作伙伴问我是否可以设置 Google Cloud Messaging 服务器。

我阅读了文档，但找不到设置此服务器的清晰教程。

我对Java一无所知，所以这让我的工作变得更加困难。[正如GCM Demo Tutorial](http://developer.android.com/guide/google/gcm/demo.html)所说，我可以使用ant“编译”一个war文件。但我无法将它部署到我的 AppEngine 服务器上进行试用（这也是我第一次使用 AppEngine）。

你能给我一些步骤来创建我自己的 GCM 服务器吗？

对不起我的英语不好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:12:41.637

将 gcm-server-demo 导入 eclipse 的简单方法：

①下载“Eclipse IDE for Java EE Developers”，创建一个动态的Web项目。

②从 gcm-server-demo 中复制 'src' 和 'webcontent' 覆盖 web 项目。

③添加一个像tomcat或jetty这样的服务器来运行项目。

注册 ID 由 Android 应用程序通过“发布”请求发送。您可以使用 servlet 或 PHP 来处理它

# hibernate - JSF、休眠、弹簧安全？

> ID：11313850
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:06:59.527
> 
> 标签：hibernate, jsf, authentication, spring-security

我正在开发一个 jsf 应用程序，我想使用 Spring-Secrity 来验证我的用户，我正在使用休眠，需要： - 使用 Spring-Security 验证用户。- 已认证的用户保存在会话 bean 中。- 我需要一个注销方法。- 我需要确切地知道要添加到我的项目中的罐子。- 在我的数据库中，每个用户都有一个角色（用户或管理员）。

我发现的教程的问题是，在身份验证后没有保存有关当前用户的信息，而我的情况是，我的会话 bean 中确实需要一个 currentuser。

我怎么能做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:26:53.200

我会看一下[Spring Web Flow primefaces 示例](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/htmlsingle/spring-webflow-reference.html#whatsnew-samples)。它演示了与 JSF 的集成，提供了与 Spring Security 集成的 JSF 标签库等。就能够从会话 bean 访问当前用户而言，您可以使用[SecurityContextHolder](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/technical-overview.html#d0e1833)从应用程序中的任何位置获取当前用户（包括会话 bean）。例如：

```
Authentication authentication = SecurityContextHolder.getContext()
    .getAuthentication();
UserDetails userDetails = (UserDetails) authentication.getPrincipal(); 
```

# database - 服务间数据的参照完整性

> ID：11313851
> 
> 赞同：5
> 
> 时间：2012-07-03T15:07:01.860
> 
> 标签：database, database-design, service, soa

在 SOA 中，我一直困惑于处理来自不同数据库甚至不同服务的数据的服务如何具有引用完整性，以便在数据库或服务之间复制最少的数据。

例如，您在某种身份验证数据库中有一个用户表，并且您希望在另一个数据库中重用此用户信息。您还希望强制该用户的记录存在于身份验证数据库中。假设您要将身份验证数据库中的用户帐户与另一个数据库中的新闻文章相关联。这是怎么做的？您将如何使用 LDAP 之类的东西来做到这一点？

如果身份验证信息包含在同一个数据库中，只是一个不同的表，那么我可以看到您如何只使用外键来创建新闻文章和用户帐户之间的关联。

我一直在尝试寻找有关此问题的答案，但我必须使用错误的短语，因为我没有提出任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:48:11.750

有些平台允许数据库之间的外键约束，有些则不允许。如果您需要数据库之间的参照完整性，您需要选择一个支持它的平台。规范化——一个不同的问题——从不说“将这些列移动到不同的数据库”。

在多租户数据库中，您通常会选择不同的架构。（您通常不会将所有用户的身份验证放在一个数据库中，而他们经过身份验证的内容可以在另一个数据库中使用。）

浏览标记为“多租户”的问题；这可能是一个对你有帮助的术语。[MSDN](http://msdn.microsoft.com/en-us/library/aa479086.aspx)有一个相当好的鸟瞰图。

# linux - 根据分隔符将一个文件拆分为多个文件

> ID：11313852
> 
> 赞同：98
> 
> 时间：2012-07-03T15:07:02.837
> 
> 标签：linux, unix, awk, split

我`-|`在每个部分之后都有一个带有分隔符的文件...需要使用 unix 为每个部分创建单独的文件。

输入文件示例

```
wertretr
ewretrtret
1212132323
000232
-|
ereteertetet
232434234
erewesdfsfsfs
0234342343
-|
jdhg3875jdfsgfd
sjdhfdbfjds
347674657435
-| 
```

文件 1 中的预期结果

```
wertretr
ewretrtret
1212132323
000232
-| 
```

文件 2 中的预期结果

```
ereteertetet
232434234
erewesdfsfsfs
0234342343
-| 
```

文件 3 中的预期结果

```
jdhg3875jdfsgfd
sjdhfdbfjds
347674657435
-| 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-07-03T16:07:14.033

一个班轮，没有编程。（除了正则表达式等）

```
csplit --digits=2  --quiet --prefix=outfile infile "/-|/+1" "{*}" 
```

* * *

测试： `csplit (GNU coreutils) 8.30`

# Apple Mac 上的使用注意事项

“对于 OS X 用户，请注意`csplit`操作系统附带的版本不起作用。您需要 coreutils 中的版本（可通过 Homebrew 安装），称为`gcsplit`.” — @Danial

“只是补充一点，您可以获得适用于 OS X 的版本（至少与 High Sierra 一起使用）。您只需要稍微调整一下参数`csplit -k -f=outfile infile "/-\|/+1" "{3}"`。似乎不起作用的功能是`"{*}"`，我必须具体说明" `-k`_ `--digits`_ `-n`_ — @Pebbl

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-03T16:04:39.550

```
awk '{f="file" NR; print $0 " -|"> f}' RS='-\\|'  input-file 
```

解释（编辑）：

`RS`是记录分隔符，此解决方案使用 gnu awk 扩展，允许它包含多个字符。`NR`是记录号。

print 语句将一条记录打印`" -|"`到一个文件中，该文件的名称中包含记录号。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-03T15:42:42.810

Debian 有`csplit`，但我不知道这是否对所有/大多数/其他发行版都通用。如果不是，那么追踪源代码并编译它应该不会太难......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-01T00:27:02.377

我解决了一个稍微不同的问题，其中文件包含一行名称，后面的文本应该放在哪里。这个 perl 代码对我有用：

```
#!/path/to/perl -w

#comment the line below for UNIX systems
use Win32::Clipboard;

# Get command line flags

#print ($#ARGV, "\n");
if($#ARGV == 0) {
    print STDERR "usage: ncsplit.pl --mff -- filename.txt [...] \n\nNote that no space is allowed between the '--' and the related parameter.\n\nThe mff is found on a line followed by a filename.  All of the contents of filename.txt are written to that file until another mff is found.\n";
    exit;
}

# this package sets the ARGV count variable to -1;

use Getopt::Long;
my $mff = "";
GetOptions('mff' => \$mff);

# set a default $mff variable
if ($mff eq "") {$mff = "-#-"};
print ("using file switch=", $mff, "\n\n");

while($_ = shift @ARGV) {
    if(-f "$_") {
    push @filelist, $_;
    } 
}

# Could be more than one file name on the command line, 
# but this version throws away the subsequent ones.

$readfile = $filelist[0];

open SOURCEFILE, "<$readfile" or die "File not found...\n\n";
#print SOURCEFILE;

while (<SOURCEFILE>) {
  /^$mff (.*$)/o;
    $outname = $1;
#   print $outname;
#   print "right is: $1 \n";

if (/^$mff /) {

    open OUTFILE, ">$outname" ;
    print "opened $outname\n";
    }
    else {print OUTFILE "$_"};
  } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-07T19:40:56.473

以下命令对我有用。希望能帮助到你。

```
awk 'BEGIN{file = 0; filename = "output_" file ".txt"}
    /-|/ {getline; file ++; filename = "output_" file ".txt"}
    {print $0 > filename}' input 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-03T16:00:01.680

您也可以使用 awk。我对 awk 不是很熟悉，但以下内容似乎对我有用。它生成了 part1.txt、part2.txt、part3.txt 和 part4.txt。请注意，生成的最后一个 partn.txt 文件是空的。我不知道如何解决这个问题，但我相信它可以通过一些调整来完成。有什么建议吗？

**awk_pattern 文件：**

```
BEGIN{ fn = "part1.txt"; n = 1 }
{
   print > fn
   if (substr($0,1,2) == "-|") {
       close (fn)
       n++
       fn = "part" n ".txt"
   }
} 
```

**bash 命令：**

`awk -f awk_pattern input.file`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-24T20:10:56.437

`csplit`有的话就用。

如果你没有，但你有 Python……不要使用 Perl。

## 懒惰读取文件

您的文件可能太大而无法一次全部保存在内存中 - 逐行阅读可能更可取。假设输入文件名为“samplein”：

```
$ python3 -c "from itertools import count
with open('samplein') as file:
    for i in count():
        firstline = next(file, None)
        if firstline is None:
            break
        with open(f'out{i}', 'w') as out:
            out.write(firstline)
            for line in file:
                out.write(line)
                if line == '-|\n':
                    break" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-19T19:33:57.303

这是一个 Python 3 脚本，它根据分隔符提供的文件名将文件拆分为多个文件。示例输入文件：

```
# Ignored

######## FILTER BEGIN foo.conf
This goes in foo.conf.
######## FILTER END

# Ignored

######## FILTER BEGIN bar.conf
This goes in bar.conf.
######## FILTER END 
```

这是脚本：

```
#!/usr/bin/env python3

import os
import argparse

# global settings
start_delimiter = '######## FILTER BEGIN'
end_delimiter = '######## FILTER END'

# parse command line arguments
parser = argparse.ArgumentParser()
parser.add_argument("-i", "--input-file", required=True, help="input filename")
parser.add_argument("-o", "--output-dir", required=True, help="output directory")

args = parser.parse_args()

# read the input file
with open(args.input_file, 'r') as input_file:
    input_data = input_file.read()

# iterate through the input data by line
input_lines = input_data.splitlines()
while input_lines:
    # discard lines until the next start delimiter
    while input_lines and not input_lines[0].startswith(start_delimiter):
        input_lines.pop(0)

    # corner case: no delimiter found and no more lines left
    if not input_lines:
        break

    # extract the output filename from the start delimiter
    output_filename = input_lines.pop(0).replace(start_delimiter, "").strip()
    output_path = os.path.join(args.output_dir, output_filename)

    # open the output file
    print("extracting file: {0}".format(output_path))
    with open(output_path, 'w') as output_file:
        # while we have lines left and they don't match the end delimiter
        while input_lines and not input_lines[0].startswith(end_delimiter):
            output_file.write("{0}\n".format(input_lines.pop(0)))

        # remove end delimiter if present
        if not input_lines:
            input_lines.pop(0) 
```

最后是你如何运行它：

```
$ python3 script.py -i input-file.txt -o ./output-folder/ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-03T15:49:01.670

```
cat file| ( I=0; echo -n "">file0; while read line; do echo $line >> file$I; if [ "$line" == '-|' ]; then I=$[I+1]; echo -n "" > file$I; fi; done ) 
```

和格式化版本：

```
#!/bin/bash
cat FILE | (
  I=0;
  echo -n"">file0;
  while read line; 
  do
    echo $line >> file$I;
    if [ "$line" == '-|' ];
    then I=$[I+1];
      echo -n "" > file$I;
    fi;
  done;
) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-03T16:00:50.963

这是一个 perl 代码，它将做这件事

```
#!/usr/bin/perl
open(FI,"file.txt") or die "Input file not found";
$cur=0;
open(FO,">res.$cur.txt") or die "Cannot open output file $cur";
while(<FI>)
{
    print FO $_;
    if(/^-\|/)
    {
        close(FO);
        $cur++;
        open(FO,">res.$cur.txt") or die "Cannot open output file $cur"
    }
}
close(FO); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-03T17:17:59.197

这是我为以下问题编写的上下文拆分问题： [http ://stromberg.dnsalias.org/~strombrg/context-split.html](http://stromberg.dnsalias.org/~strombrg/context-split.html)

```
$ ./context-split -h
usage:
./context-split [-s separator] [-n name] [-z length]
        -s specifies what regex should separate output files
        -n specifies how output files are named (default: numeric
        -z specifies how long numbered filenames (if any) should be
        -i include line containing separator in output files
        operations are always performed on stdin 
```

# jquery-mobile - 淘汰赛、JQMobile 和生成可折叠集似乎不太正常

> ID：11313853
> 
> 赞同：5
> 
> 时间：2012-07-03T15:07:05.610
> 
> 标签：jquery-mobile, knockout-2.0, collapsable

我检查了许多样本，但没有一个与我正在尝试做的完全一样。

我所拥有的大部分都有效，但它并不完全正确。

这是一个小提琴来说明这个问题。

[http://jsfiddle.net/5yA6G/4/](http://jsfiddle.net/5yA6G/4/)

请注意，顶部集工作正常，但它是静态定义的。

底部集合（Tom、steve、bob）基本上“工作”，但标题元素最终出现在可折叠标题和隐藏的可折叠部分中。

好像我一定做错了什么，但我一直无法弄清楚是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T01:37:40.123

仅供参考和其他任何遇到此问题的人，事后看来至少有些明显。

Knockout 内置的“匿名”模板在许多情况下都非常有效，但对于 JQMobile，它可能有点古怪。

这是因为 JQMobile 将在页面加载时调整匿名模板的内容，就像它对所有其他内容所做的那样。

然后，稍后，当您使用 knockout 的 ApplyBindings 函数时，knockout 将添加适用的元素，就像它应该做的那样。正如许多帖子和答案所暗示的那样，您必须通过类似这样的方式在新创建的元素上调用 collapsible()。

```
$("div[data-role='collapsible']").collapsible({refresh: true}); 
```

那里没问题。但是，如果 JQM 已经应用了格式，那么匿名模板已经被 JQM “渲染”了，所以通过调用 collapsible 再次渲染它会导致各种时髦的结果，包括双标题、嵌套可折叠等。

我的解决方案是使用 Knockout 的“命名模板”功能，只需将模板将可折叠元素呈现到标签中，如下所示：

```
<script type="text/html" id="alarm-template">
    <div data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u" data-enhance="false">
        <h3 data-bind="text:name"></h3>
        <p>The content here</p>
        <p data-bind="text: name"></p>
    </div>
</script> 
```

这样做可以防止 JQM 在页面加载时“呈现”模板元素，因此它们会在实际生成时正确呈现。

编辑：以上适用于不在可折叠集中的可折叠，但是，如果它们在一个集中，我发现元素的样式（特别是圆角表示属于一个集）不工作正常。

据我所知，有两个问题：

首先是仅仅触发“创建”并不会真正刷新集合中所有可折叠项的样式。要做到这一点，你必须做...

```
$("div[data-role='collapsible-set']").collapsibleset('refresh'); 
```

但是，还有一个更严重的问题。JQM 将集合中的最后一项“标记”为“最后一项”。然后这个事实被用来确定如何在最后一个项目被展开/折叠时为其设置样式。

由于 Knockout 实际上并没有重建整个集合（为了速度），因此每次调用 refresh 方法时，JQM 都会尽职尽责地将最后一项标记为“最后一项”，但从不删除先前项上的标记。结果，如果您从一个空列表开始，每个项目最终都被标记为“最后一个”，并且样式因此而失败。

我在问题报告中详细介绍了 github 上的修复。

[https://github.com/jquery/jquery-mobile/issues/4645](https://github.com/jquery/jquery-mobile/issues/4645)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T17:21:45.543

我实际上找到了一个更简单的方法来做到这一点：

1.  像往常一样设置你的 foreach 绑定，对我来说它看起来像这样

    ```
    <div data-bind="foreach: promotions">

        <h3 data-bind="text: Title"></h3>
            <p>Creator:<span data-bind="text: Creator"></span></p> 
            <p>Effective Date:<span data-bind="text: EffectiveDate"></span></p>
            <span data-bind="text: Description"></span>
            <a data-bind="text: ButtonText, attr: {href: ButtonLink}"></a> 
    ```

2.  用 class="collapsible 把它包装在一个 div 中，就像这样

    ```
    <div data-role="collapsible-set" data-bind="foreach: promotions">

    <div class="collapsible">
        <h3 data-bind="text: Title"></h3>
            <p>Creator:<span data-bind="text: Creator"></span></p> 
            <p>Effective Date:<span data-bind="text: EffectiveDate"></span></p>
            <span data-bind="text: Description"></span>
            <a data-bind="text: ButtonText, attr: {href: ButtonLink}"></a> 
    ```

3.  像这样进行绑定后，通过 jquery mobile 应用可折叠小部件：

    ```
    $(document).ready(function () {
        ko.mapping.fromJS(data, dataMappingOptions, PromotionViewModel.promotions);
        ko.applyBindings(PromotionViewModel);
        $('.collapsible').collapsible();
    }); 
    ```

4.  对于可折叠集，只需在 foreach div 上设置 class="collapsible-set" 即可应用相同的想法。希望这可以帮助

# oracle - Hibernate：如何在休眠中获取数据库序列的当前值和下一个值？

> ID：11313854
> 
> 赞同：1
> 
> 时间：2012-07-03T15:07:05.987
> 
> 标签：oracle, hibernate

我正在使用 hibernate 访问 oracle 序列

```
<id name="id"
        column="ID"
        type="long"
        unsaved-value="-1">
      <generator class="native">
            <param name="sequence">ID_SEQ</param>
        </generator>
    </id> 
```

现在让我们说如果我想从序列中找到序列的当前值或下一个值，我该如何使用休眠来做到这一点？

# sql - 更新触发器多久触发一次多记录更新？

> ID：11313856
> 
> 赞同：7
> 
> 时间：2012-07-03T15:07:08.443
> 
> 标签：sql, triggers, sql-update

我创建了一个`on update`触发器。

如果我在单个语句中更新表中的 5 条记录，触发器将执行多少次？如果我有多个语句更新单个事务中的记录，它会改变吗？

它是执行 5 次，还是在所有事务完成后只执行一次？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T16:20:31.983

这完全取决于您使用的触发器类型。

*   将针对受 DML 语句影响的每一行触发行级触发器（请注意`INSERT`，对于基于 a`SELECT`或使用多行语法一次插入多行的语句也是如此）
*   语句级触发器将为整个语句触发一次。

Oracle、PostgreSQL 和 DB2 都支持行级和语句级触发器。Microsoft SQL Server 仅支持语句级触发器，MySQL 仅支持行级触发器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T15:14:16.500

使用 SQL 2008：如果您正在执行更新 5 行的 1 次更新，则触发器应该只执行一次。

这就是为什么您必须使用表“INSERTED”和“DELETED”才能检测到所有修改的行。

如果您正在执行 5 次更新以更新 1 行，则触发器将执行 5 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:13:37.507

考虑到您使用的是 SQL Server，触发器只会在每次更新时触发一次。

如果这不是您想要的，您可以考虑使用不同的更新语句来确保触发器每次都会触发。

你可以看看[这个](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm)关于 SQL 触发器的教程。它涵盖了一切。

请注意，如果您使用的是 Oracle，则触发器可以基于行。不在 SQL Server 中。

# advantage-database-server - 使用 Foxpro 表和 Advantage Data Architect

> ID：11313857
> 
> 赞同：0
> 
> 时间：2012-07-03T15:07:11.183
> 
> 标签：advantage-database-server, visual-foxpro

我主要想利用优势来访问大于 2 gig 的 Fox 表。我的程序很简单，可以从命令窗口运行。我安装了 Adv Data Archetect 并安装了 ODBC 驱动程序。
我对连接等不是很了解。有人可以向我解释，提供链接或提供我需要能够使用和创建 2 gig + 表的代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:09:29.480

我无法从 OP 中得知您实际做了什么，但听起来您希望能够将 ODBC 驱动程序与现有的 Visual FoxPro 应用程序一起使用，而无需从直接表访问中更改应用程序。这是不可能的。

以下是[截屏视频的链接，](http://devzone.advantagedatabase.com/jeremym/fox_large/foxprolarge.html)该链接显示了使用 ODBC 访问超过 2GB 限制的表的示例。如果我没记错的话，它展示了如何使用视图来访问数据；这样做可以最大限度地减少您需要进行的更改数量。[可以在此处找到](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_remote_views.htm)有关远程视图的更多信息。

[您还可以通过 SQL 传递](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_sql_pass_through.htm)语句“直接”使用 ODBC 。如果您更喜欢 ODBC，也可以将 OLE DB 与[游标适配器一起使用。](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_cursor_adapters.htm)

# jquery - 使用 jQuery 向表中添加了行，但添加的行会随着浏览器刷新而消失

> ID：11313859
> 
> 赞同：0
> 
> 时间：2012-07-03T15:07:22.997
> 
> 标签：jquery, html, html-table, row

我使用 jQuery 在 html 表中添加了行，但是当我刷新浏览器时，这些行消失了。我怎样才能让这些行留下来？

```
<TABLE id="dataTable" width="100%" align="center">
    <TR align="center" border="1">
        <TH></TH>
        <TH>ID </TH>
        <TH>Name</TH>
        <TH>Status</TH>
    </TR>
    <TR align="center">
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" value="Submission 1" /> </TD>
        <TD>Working version</TD>
    </TR>
</TABLE>

<script type="text/javascript">

$(document).ready(function(){
$('#createNew').click(function() {
    var table = document.getElementById('dataTable');

    var rowCount = table.rows.length;

    $('#dataTable tr:last').after('<TR align="center"><TD><INPUT type="checkbox" name="chk"/></TD><TD>'+ rowCount + '</TD><TD> <INPUT type="text" value="Submission 1" />   </TD><TD>Working version</TD></TR>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:34.760

With only jQuery you can't.

You need to save your change on a database for example.

Edit : Or you can use php, $_SESSION, $_COOKIE .... I don't know, you have lots of way, but not with only jQuery.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:12:46.780

这将取决于您从哪里获取数据以首先创建表。如果您要从数据库中检索数据并将其粘贴到 tablem 中，则需要通过 ajax 回调将数据插入到数据库中。

有关详细信息，请参阅[此](http://www.9lessons.info/2009/05/insert-and-load-record-using-jquery-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:55:06.657

这只是一个建议，但您可以尝试将新行存储在 cookie 中，如下所示：
[如何在 jquery cookie 中存储数组？](https://stackoverflow.com/questions/1959455/how-to-store-an-array-in-jquery-cookie)

这样在页面刷新后您将获得您的行（当然您需要在页面再次加载时读取 cookie 并添加行）。

但最好的解决方案是使用服务器端代码将新行存储到数据库中，并在每次刷新页面时加载它们，这样访问该页面的每个人都可以看到新记录（或者只有特定用户，如果你'将添加用户标识，但这有点偏离您的问题）。

查看@Kell 回答的文章，这真的很容易实现:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:17:02.493

您可以使用`.data`函数将数据绑定到表，然后尽可能多地复制它？？`.data`防止数据发生内存泄漏，您可以在`api.jquery.com`

# matrix - 八度：如何将“xy 值\n”格式的测量值排列成矩阵？

> ID：11313868
> 
> 赞同：1
> 
> 时间：2012-07-03T15:08:08.543
> 
> 标签：matrix, octave

我有测量数据。它以 xy 值的格式存储

```
 x         y      value

   64        4     2743
   64        8     3531
   64       16     4543
   64       32     5222
   64       64     5730
  128        4     2778
  128        8     3500
  128       16     4657
  etc 
```

如何将其重新排列为格式矩阵

```
 y= 4    8    16   32   64
x=
64    2743 3531 4543 5222 5730
128   2778 3500 4657 …    …  
256   …    …    …    …    …
512   …    …    …    …    … 
```

在八度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:52:16.923

在这里，我假设您对 x 和 y 值的每个组合都有测量值，否则我们无法创建矩阵。此外，x 和 y 值的序列应该像您的示例一样重复。

```
% raw data is in a matrix D
% Unique will tell us all the values in the order in which they appear
x = unique(D(:, 1));
y = unique(D(:, 2));
% Reshape can create a matrix from a vector in column-major order
d = reshape(D(:, 3), length(y), length(x))'; % note transpose

newData = [x d]; 
```

输出：

```
octave> D
D =

     64      4   2743
     64      8   3531
     64     16   4543
     64     32   5222
     64     64   5730
    128      4   2778
    128      8   3500
    128     16   4657
    128     32   4512
    128     64   7854
octave> y'
ans =

    4    8   16   32   64

octave> newData
newData =

     64   2743   3531   4543   5222   5730
    128   2778   3500   4657   4512   7854 
```

# unix - 按大小排序目录

> ID：11313871
> 
> 赞同：0
> 
> 时间：2012-07-03T15:08:25.957
> 
> 标签：unix, ssh

我正在寻找从服务器根目录返回所有目录的列表，按大小从大到小排序。

此外，有没有办法只列出哪个文件夹自己占用的空间最多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:15:21.030

这将完成所有这一切......我想。

```
du -H / | sort -n -r > bla.txt && head -1 bla.txt 
```

# ruby-on-rails - 创建rails连接表后如何链接表单

> ID：11313872
> 
> 赞同：2
> 
> 时间：2012-07-03T15:08:29.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

嗨，我的 Rails 3.1 应用程序中有一个产品模型，如下所示：

```
+----------------+---------------+------+-----+---------+----------------+
| Field          | Type          | Null | Key | Default | Extra          |
+----------------+---------------+------+-----+---------+----------------+
| id             | int(11)       | NO   | PRI | NULL    | auto_increment |
| type           | text          | YES  |     | NULL    |                |
| title          | text          | YES  |     | NULL    |                |
| description    | text          | YES  |     | NULL    |                |
| price          | text          | YES  |     | NULL    |                |
| img_src        | text          | YES  |     | NULL    |                |
| source         | text          | YES  |     | NULL    |                |
| sr_id          | text          | YES  |     | NULL    |                |
| categories     | text          | YES  |     | NULL    |                |
+----------------+---------------+------+-----+---------+----------------+ 
```

我使用以下迁移创建了 Categories_Products（未创建模型）：

```
class CreateCategoriesProducts < ActiveRecord::Migration
  def change
    create_table :categories_products, :id => false do |t|
      t.references :product
      t.text :categories
      t.timestamps
    end
  end
end 
```

1）如何设置我的产品表单，以便在填写类别 text_field 时，它将更新我刚刚创建的连接表。我从产品表中删除了类别列。

2）我这样做的全部原因是因为我最初在一个字段中有多个类别 ID，并且需要将它们分解，以便我可以轻松地执行不同的计数等。用户需要能够为每个产品添加多个类别，我如何告诉 Rails 将添加的每个类别保存到数据库中的新行中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:19:53.223

一个产品可以有多个类别，一个类别可以引用多个产品，对吧？如果是这样，您想创建第三个关联表，我们称之为`product_categories`，并使用标准 Rails 习惯用法来支持它：

```
# file: app/models/product.rb
class Product < ActiveRecord::Base
  has_many :categories, :through => :product_categories
  has_many :product_categories, :dependent => :destroy
end

# file: app/models/category.rb
class Category < ActiveRecord::Base
  has_many :products, :through => :product_categories
  has_many :product_categories, :dependent => :destroy
end

# file: app/models/product_category.rb
class ProductCategory < ActiveRecord::Base
  belongs_to :product
  belongs_to :category
end 
```

...以及您的表格/迁移：

```
# file: db/migrate/xxx_create_products.rb
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      ... 
      t.timestamps
    end
  end
end

# file: db/migrate/xxx_create_categories.rb
class CreateCategories < ActiveRecord::Migration
  def change
    create_table :categories do |t|
      t.string :name
      t.timestamps
    end
  end
end

# file: db/migrate/xxx_create_product_categories.rb
class CreateProductCategories < ActiveRecord::Migration
  def change
    create_table :product_categories do |t|
      t.references :product
      t.references :category
      t.timestamps
    end
  end
end 
```

这样，“为每个产品添加多个类别”变得容易：

```
my_product.categories.create(:name => "toy") 
```

这将创建一个名为“toy”的类别以及关联 my_product 和该新类别的 ProductCategory。如果您想要完整的描述，[本指南](http://guides.rubyonrails.org/association_basics.html)是一个起点。

# android - 使用 Flash 和 WebView 在 Android 中播放 RTMP 流

> ID：11313873
> 
> 赞同：1
> 
> 时间：2012-07-03T15:08:36.323
> 
> 标签：android, android-webview, flash, rtmp

我正在尝试使用[此答案](https://stackoverflow.com/a/7142295/370073)中介绍的解决方案。一切正常，页面加载没有任何问题。唯一的问题是它说没有安装 Flash Player，而它是。
我在 SDK 内部工作。在 SDK 中使用基于 Flash 的内容是否有问题？我的 API 级别是 10 (2.3.3)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T12:52:47.787

添加这两行：

```
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setPluginState(PluginState.ON); 
```

这应该使它工作我已经让它在我的应用程序中工作了:)

还要确保为您的设备安装了正确版本的 Flash 播放器。

# java - ant 脚本中无法识别环境变量

> ID：11313876
> 
> 赞同：2
> 
> 时间：2012-07-03T15:09:04.123
> 
> 标签：java, ant, junit, environment-variables

我有一个简单的 Ant 脚本，我想使用环境变量 JUNIT_HOME 传递给标签。环境变量在回显时似乎是有效的：

```
<echo message = "JUNIT_HOME: ${env.JUNIT_HOME}" /> 
```

产生正确的输出：

*JUNIT_HOME：“C:\Program Files (x86)\eclipse\plugins\org.junit_4.8.2.v4_8_2_v20110321-1705”*

但是当我以下列方式使用它时，构建失败并声称它找不到 junit。

```
<target name="compile" depends="checkJUnitHome, init" description="compile the source ">
    <javac srcdir="${src}" destdir="${build}" classpath="${env.JUNIT_HOME}\junit.jar">
        <classpath refid="project.classpath" />
    </javac>
</target> 
```

如果我用完整路径替换环境变量。它工作正常。

我错过了什么？

亲切的问候，

马克·科尔曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:15:11.453

您必须先进行设置`<property environment="env"/>`，然后才能访问环境。

*编辑*

您可以尝试将类路径变量作为属性移动到内部类路径元素。看到这个：

```
<target name="compile" depends="checkJUnitHome, init" description="compile the source ">
    <javac srcdir="${src}" destdir="${build}">
        <classpath>
            <path refid="project.classpath" />
            <path location="${env.JUNIT_HOME}\junit.jar" />
        </classpath>
    </javac>
</target> 
```

也许它被覆盖了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:39:38.883

正如罗伯特指出的那样，环境变量已用双引号保存。删除这些解决了问题。

谢谢。

# google-maps - 谷歌地图上缺少标记

> ID：11313881
> 
> 赞同：-2
> 
> 时间：2012-07-03T15:09:23.053
> 
> 标签：google-maps, google-maps-api-3

我们已将自己的脚本移至 bbcode。

但是在谷歌地图上有一个问题。我们看不到标记。

你可以在这里看到代码：[https ://github.com/Kunena/Kunena-2.0/blob/master/administrator/components/com_kunena/libraries/bbcode/bbcode.php#L887](https://github.com/Kunena/Kunena-2.0/blob/master/administrator/components/com_kunena/libraries/bbcode/bbcode.php#L887)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:34:43.930

您的标记未正确定义。看起来您可能希望在“amsterdam”的地理编码结果中看到一个。该标记未正确定义（没有地图属性和位置属性，两者都是必需的）。

[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

代替：

```
var marker = new google.maps.Marker({
    zoom: 10,
    disableDefaultUI: 0,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    }); 
```

和：

```
var marker = new google.maps.Marker({
    position: results[0].geometry.location,
    map: kgooglemap1
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:29:39.117

您的代码正在执行此操作：

```
var marker = new google.maps.Marker({
    zoom: 10,
    disableDefaultUI: 0,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}); 
```

这都是错误的。标记没有任何这些属性（查看文档：[https](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions) ://developers.google.com/maps/documentation/javascript/reference#MarkerOptions ）。您应该执行以下操作：

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(24.696554,-81.328238),
    map: map
}); 
```

这是一篇介绍添加地图标记的一些基础知识的文章：http: [//duncan99.wordpress.com/2011/09/25/google-maps-api-adding-markers/](http://duncan99.wordpress.com/2011/09/25/google-maps-api-adding-markers/)

# android - get the Bitmap from ImageView in a ListView

> ID：11313884
> 
> 赞同：0
> 
> 时间：2012-07-03T15:09:44.763
> 
> 标签：android

I have a `ListActivity` that displays two pieces of information in each line of the list (one image sett in an `ImageView` and a text description set in a `TextView`). These information I get through a XML file from a download. Every thing works fine!!!!! :-).

On `OnListItemClick`, I would like to get the `Bitmap` from the `ImageView` that the user selected.

To get an image from an `ImageView`, I use this :

```
ImageView img = (ImageView) l.findViewById(R.id.imageViewXYZ);
img.buildDrawingCache();
Bitmap b = img.getDrawingCache(); 
```

But inside the `onClick` event of the `ListActivity`, how can I get the this bitmap?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:15:40.963

```
yourListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(final AdapterView<?> adapterView, final View view, final int position, final long id) {
            final ImageView imageView = (ImageView) view.findViewById(R.id.imageViewXYZ);
            final BitmapDrawable bitmapDrawable = (BitmapDrawable) imageView.getDrawable();
            final Bitmap yourBitmap = bitmapDrawable.getBitmap();
        }
    }); 
```

代码假定，您在 ListViews ImageView 项目中设置了一个位图`setImageBitmap`（强制转换为 BitmapDrawable）

# android - Android code - Remember last played song

> ID：11313886
> 
> 赞同：0
> 
> 时间：2012-07-03T15:09:48.583
> 
> 标签：android

Is there a way to get the details of last played song in the android music player.

I am developing a music player.

whenever the my music player application is launched I need to start it with the last played song as in the stock android music player.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:35:30.320

> 有没有办法在 android 音乐播放器中获取最后播放歌曲的详细信息。

欢迎您联系每个“android 音乐播放器”的作者，并询问他们是否有可以用于此目的的 API。

> 我需要从最后播放的歌曲开始，就像在股票 android 音乐播放器中一样

没有单一的“股票安卓音乐播放器”。设备制造商可以提供他们想要的任何音乐播放器，而且很多都提供自己的。

Music AOSP 应用程序和 Play Music 应用程序都没有用于检索最后播放的歌曲信息的文档化和受支持的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-19T14:09:04.093

在退出应用程序之前，将音乐文件的路径保存在数据库中。应用程序启动时加载路径。

代码应该在 try catch

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T09:00:33.997

音乐播放器关闭时将曲目或歌曲 ID 保存到 XML 文件中，并在音乐播放器启动时从该 XML 资源文件中获取它。

# sharepoint-2010 - SharePoint permissions issue

> ID：11313888
> 
> 赞同：1
> 
> 时间：2012-07-03T15:09:53.477
> 
> 标签：sharepoint-2010, permissions

I am a little confused in my about permissions, in my dev environment I have a setup the following permission groups:

*   GroupOwners (Full controls).
*   GroupMembers (Contribute, Approve).
*   GroupVisitors (Read).

I have the following site collections:

SampleBlog/

With the following sites: SampleBlog/News/Contacts/Marketing/Finance/Property

I want to give design permissions to three users only for the following sites:

*   User1 has design permissions only for SampleBlog/Contacts.
*   User2 has design permissions only for SampleBlog.Marketing.
*   User3 has design permissions only for SampleBlog/Finance.

The above users should be visitors for the rest of the sites.

How do I achieve this. Any suggestion will be greatly appreciated?

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:33:17.117

首先，您必须删除站点上的权限继承：SampleBlog/Contacts SampleBlog/Marketing SampleBlog/Finance

然后在每个站点上设置权限，例如：

Site SampleBlog/Contacts 为 User1 访问者 User2,User3 设计权限

用户 2 访问者用户 1、用户 3 的站点示例博客/营销设计权限

站点示例用户 3 访问者用户 1、用户 2 的博客/财务设计权限

问候

# java - c:out value behavior

> ID：11313901
> 
> 赞同：0
> 
> 时间：2012-07-03T15:10:37.673
> 
> 标签：java, jsp, jstl

I am relatively new to working with JSPs and I have a feeling I'm overlooking something simple. I have a segment that appends a key onto a URL before sending the user back to where they came from. The key is a string value and when it consists of only numberic values(for example 12345) it works fine, but when it contains non-numerics(for example abcde) it simply appends "#" to the url and stays on the same page.

```
<core:when test="${dataTransferObject.someBoolean}">
<a href="#" onclick="javascript:location='path/back/to/their/home.request?cachekey='+<core:out value="${dataTransferObject.stringVariable}"/>;return false;">Back to Home </a>
</core:when> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:14:13.407

当它是一个字符串时，JavaScript 将是非法的——它会认为您正在尝试引用一个不存在的 JavaScript 变量。您将在 JavaScript 控制台中看到一个错误。

不要做任何 JavaScript 操作；JSP 在客户端看到之前在服务器端进行评估：

```
onclick="javascript:location='path/back/to/their/home.request?cachekey=<core:out value="${dataTransferObject.stringVariable}"/>';return false;" 
```

更好的是，使用 JSP EL：

```
onclick="javascript:location='path/back/to/their/home.request?cachekey=${dataTransferObject.stringVariable}';return false;" 
```

此外，如果这是 JSTL 核心标记库，则规范前缀为`"c"`.

# r - Package IQCC in R

> ID：11313903
> 
> 赞同：2
> 
> 时间：2012-07-03T14:58:38.503
> 
> 标签：r

> **Possible Duplicate:**
> [Error: could not find function … in R](https://stackoverflow.com/questions/7027288/error-could-not-find-function-in-r)

I have entered this example:

```
mu <- c(5.682, 88.22)
Sigma <- symMatrix(c(3.770, -5.495, 13.53), 2)
datum <- data.1(20, 10, mu, Sigma)
estat <- stats(datum, 20, 10, 2)
datum2 <- data.2(estat, 10, p = 2)
T2II <- T2.2(datum2, estat, 10)

#Not showing the phase I data set.
cchart.T2.2(T2II, 20, 10, 1, 25, 2)
datum3 <- data.2(estat, 10, p = 2)
add.data(datum3, estat, T2II, 10, 2)

#Showing the phase I data set.
cchart.T2.2(T2II, 20, 10, 1, 25, 2, datum = datum)
datum3 <- data.2(estat, 10, p = 2)
add.data(datum3, estat, T2II, 10, 2, 20) 
```

and I have dowloaded package IQCC but i have this message of error

```
> mu <- c(5.682, 88.22)
> Sigma <- symMatrix(c(3.770, -5.495, 13.53), 2)
Erreur : impossible de trouver la fonction "symMatrix"  (impossible to find the function..)
> datum <- data.1(20, 10, mu, Sigma)
Erreur : impossible de trouver la fonction "data.1"
> estat <- stats(datum, 20, 10, 2)
Erreur : impossible de trouver la fonction "stats"
> datum2 <- data.2(estat, 10, p = 2)
Erreur : impossible de trouver la fonction "data.2"
> T2II <- T2.2(datum2, estat, 10)
Erreur : impossible de trouver la fonction "T2.2"
> #Not showing the phase I data set.
> cchart.T2.2(T2II, 20, 10, 1, 25, 2)
Erreur : impossible de trouver la fonction "cchart.T2.2"
> datum3 <- data.2(estat, 10, p = 2)
Erreur : impossible de trouver la fonction "data.2"
> add.data(datum3, estat, T2II, 10, 2)
Erreur : impossible de trouver la fonction "add.data"
> #Showing the phase I data set.
> cchart.T2.2(T2II, 20, 10, 1, 25, 2, datum = datum)
Erreur : impossible de trouver la fonction "cchart.T2.2"
> datum3 <- data.2(estat, 10, p = 2)
Erreur : impossible de trouver la fonction "data.2"
> update.packages(ask='graphics') 
```

For the first function `symMatrix`, I have downloaded (MiscTools) the same problem still present, impossible to find the function. Does anyone know a solution?

# c# - LINQ query with List<> and asking if is null

> ID：11313908
> 
> 赞同：-1
> 
> 时间：2012-07-03T15:10:59.260
> 
> 标签：c#, .net, linq, linq-to-sql, generic-list

I have some method with linq query. Logic is next, if I pass null for list of role ids, I want all roles to be included in process, but if it has value, I want only those with id in the list. I am receiving exeption.

```
public static List<NameEmail> GetNameEmailPairs(Guid guid, List<int> recipientRoles)
        {
            using (var tc = TransactionContext())
            {
                var dc = tc.DataContext;

                var nameEmailPairs = (
                                 from email in dc.Emails
                                 join logon in dc.Logons on email.GUID equals logon.GUID                                     
                                 join eLogon in dc.ELogons on logon.UID equals eLogon.LogonGUID                         
                                 join role in dc.Roles on entityLogon.PrimaryPermissionRoleID equals role.RoleID
                                 where
                                     (recipientRoles == null || recipientRoles.Contains(role.RoleID))

                                 select new NameEmail
                                            {
                                                Email = email.EmailAddress,
                                                FullName = GetName(logon.GUID)
                                            } 
                             )
                    .ToList();
                return nameEmailPairs;
            }
        } 
```

This part is breaking (recipientRoles == null || recipientRoles.Contains(role.RoleID)). Can you please help me with this, what should I do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:42:53.187

为了使调试更容易，将您的查询分解成如下部分：

```
var nameEmailPairs = (
  from email in dc.Emails
  join logon in dc.Logons on email.GUID equals logon.GUID                                     
  join eLogon in dc.ELogons on logon.UID equals eLogon.LogonGUID                         
  join role in dc.Roles on entityLogon.PrimaryPermissionRoleID equals role.RoleID
  select new {email, role}
);

if(recipientRoles != null)
{
    nameEmailPairs = nameEmailPairse.Where(
        recipientRoles.Contains(p => p.role.RoleID)
    );
}

var nameEmailPairs = (from p in nameEmailPairs
                     select new NameEmail
                                {
                                  Email = email.EmailAddress,
                                  FullName = GetName(logon.GUID)
                                }).ToList(); 
```

# django - scrape just what has been added since last scrape

> ID：11313909
> 
> 赞同：1
> 
> 时间：2012-07-03T15:10:59.400
> 
> 标签：django, scrapy

I need to crawl a website, which basically has links like this:

```
www.website.com/link/page_1.html
www.website.com/link/page_2.html
www.website.com/link/page_3.html
... 
```

The scraped content is going directly into the database through pipelines.

It is easy to tell django something like:

```
if item exists do not insert it, otherwise insert it 
```

But is there any way to scrape the rest of the links which have been added since last scrape?

For example, after website.com inserts new items:

```
/link/page_1.html becomes /link/page_2.html
new items populate /link/page_1.html 
```

At this point, what do I need to tell scrapy just scrape the new added items since last scrape?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:08:30.717

最新的 scrapy 支持将请求序列化到磁盘 [1]，还有 Rolando 的 Redis 集成 [2]。

*   [1] [http://scrapy.readthedocs.org/en/latest/topics/jobs.html](http://scrapy.readthedocs.org/en/latest/topics/jobs.html)
*   [2] [https://github.com/darkrho/scrapy-redis](https://github.com/darkrho/scrapy-redis)

# ios5 - MKPointAnnotation：标题始终可见。是否可以？

> ID：11313919
> 
> 赞同：5
> 
> 时间：2012-07-03T15:11:39.590
> 
> 标签：ios5, map, mkmapview, mkannotation, mapkit

我添加标记和标题的代码是这样的：

```
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
annotationPoint.coordinate = coord;
annotationPoint.title = currentTitle;
[mapView addAnnotation:annotationPoint]; 
```

是否可以在标记显示后立即在标记上显示标题并且始终可见？非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T09:47:28.883

```
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
annotationPoint.coordinate = coord;
annotationPoint.title = currentTitle;
[mapView addAnnotation:annotationPoint];
[mapView selectAnnotation:annotationPoint animated:NO]; 
```

或者

```
- (void)mapView:(MKMapView *)map didAddAnnotationViews:(NSArray *)views{

    for (MKAnnotationView *av in views){

        if ([av.annotation isKindOfClass:[MKPointAnnotation class]]){
            [mapView selectAnnotation:av.annotation animated:NO];
            break;
        }

    }

} 
```

# silverlight - How do I add a dynamic list of MediaElements to a StackPanel in Silverlight 5?

> ID：11313920
> 
> 赞同：0
> 
> 时间：2012-07-03T15:11:42.183
> 
> 标签：silverlight, itemscontrol, silverlight-5.0, mediaelement, stackpanel

I am working in C# and Silverlight 5, and I am trying to display one or more audio and/or video files that have been retrieved from a database table as a byte array. I decided the best way to get those byte arrays into a usable format was to create an ObservableCollection list in my ViewModel that gets populated during the service call:

```
mediaFiles = new ObservableCollection<MediaElement>();
foreach (FileUpload fu in FileUploadMediaTable)
{
   using (MemoryStream ms = new MemoryStream(fu.bytes, 0, fu.bytes.Length))
   {
      MediaElement me = new MediaElement();
      me.SetSource(ms);
      mediaFiles.Add(me);
   }
} 
```

Now, my only problem is figuring out how to add these media elements into the view. I was thinking of creating a new ItemsControl with a custom DataTemplate that defines the buttons for playback that embeds the MediaElements in a StackPanel, but how would I associate each of the buttons with that specific MediaElement?

**EDIT:** Of course, I guess I could just create a list of byte arrays and add a MediaElement object to the DataTemplate and pass the byte array in the source with a Bytes2ImageConverter defined. Of course, maybe I could skip that step and just bind the MediaElement's source to a MemoryStream object created on each byte array. I am not sure of the best way to proceed (or if this stuff is even possible).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:31:44.060

您可以创建一个模型类，该类将包含媒体源（将绑定到 MediaElement Source 属性）和所需的附加数据（标题、作者等）。您可以使用列表框来显示所有这些视频。您应该创建一个项目模板并将其用于列表框项目。这个项目模板将包含一个媒体元素和一个播放/停止按钮，您将在其中绑定一个命令。命令将放置在您的 ViewModel 类中，您可以将模型绑定为命令参数。因此，您可以访问应该播放的媒体源（模型类）。播放/停止视频怎么样：您可以创建一个媒体元素助手，它将包含一个附加的依赖属性（例如：IsPlaying，在您的模型类中）。您将为播放/停止视频绑定一个真/假值。就这样。

# java - 图片下载压缩后打不开

> ID：11313925
> 
> 赞同：0
> 
> 时间：2012-07-03T15:11:51.787
> 
> 标签：java, image, zip, png

在托管在谷歌应用引擎上的服务器上，我正在尝试从另一台服务器下载文件，压缩（使用 util.zip）它们并上传 zip 文件以供以后下载。

我在文件夹中有文件（html 和 png 文件）。下载并压缩并上传成功。我可以下载所需的 zip，但是我无法打开 png 文件，即使我可以打开原始文件。它说该程序不支持该文件格式。有趣的是，zip 中的 html 文件没有问题。有人知道这里可能是什么问题吗？

先感谢您。

- 编码 -

```
public boolean generateZip(){
    byte[] application = new byte[1500000];
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipOutputStream out = new ZipOutputStream(baos);

    //This will get the desired file names and locations from the other server
    ArrayList<String> others = getFileNames(this); 
    for(String s: others){
            URL url = new URL("http://otherserver.com/" + s);
            BufferedReader reader = null;
            try{
                                    //I need only the file names not the full directory name
                int toSub = s.lastIndexOf("/");
                String entryString = s.substring(toSub+1);
                out.putNextEntry(new ZipEntry(entryString));

                reader = new BufferedReader(new InputStreamReader(url.openStream()));   
                byte[] buffer = new byte[3000000];
                int bindex = 0;
                int b = reader.read();
                while(b != -1){
                    buffer[bindex] = (byte) b;
                    bindex++;
                    b = reader.read();
                }
                out.write(buffer,0,bindex); 
                out.closeEntry();
                reader.close();

                System.out.println(entryString + " packaged...");
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }

    out.close();
    } catch (IOException e) {
        System.out.println("There was an error generating ZIP.");
        e.printStackTrace();
    }
            return uploadZip(baos.toByteArray());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:05:13.670

最后我找到了解决方案。对于任何有兴趣的人：

```
for(String s: others){

            URL url = new URL("http://otherserver.com" + s);
            System.out.println("Reading " + s);
            try{
                int toSub = s.lastIndexOf("/");
                String entryString = s.substring(toSub+1);
                out.putNextEntry(new ZipEntry(entryString));

                BufferedInputStream in = new BufferedInputStream(url.openStream());
                ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
                BufferedOutputStream out2 = new BufferedOutputStream(baos2);
                int i;
                while ((i = in.read()) != -1) {
                    out2.write(i);
                }
                out2.flush();
                byte[] data = baos2.toByteArray();
                // closing all the shits
                out2.close();
                in.close();
                out.write(data,0,data.length);  
                out.closeEntry();

                System.out.println(entryString + " packaged...");
            }catch(Exception e){
                e.printStackTrace();
            }           
    } 
```

# ruby-on-rails-3 - RoR 翻译插值 - 使用其他翻译的值？

> ID：11313929
> 
> 赞同：1
> 
> 时间：2012-07-03T15:12:01.530
> 
> 标签：ruby-on-rails-3

假设我有这些翻译：

```
en:
  article:
    name: "article" 
```

是否可以执行以下操作：

```
test1: "We have zero #article.name.pluralize"
test2: "There is an error in your #article.name"
test3: "Title for this page is: My #article.name.pluralize.capitalize" 
```

我对 1 和 3 不太在意（即对变量执行附加功能），但 test2 会很有帮助。

这也引出了一个问题：这是构建翻译文件的好方法吗？我问这个是因为其他语言可以以完全不同的方式构建。我只是在想办法弄干我的翻译文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:28:56.657

您可以定义这样的翻译：

```
test1: "We have zero %{things}" 
```

然后，在您的代码中的某处，您可以像这样使用它：

```
I18n.t(:test1, :scope => [:flashes], :things => t(:name, :scope => [:article] )) 
```

或者，使用不同的符号：

```
I18n.t("flashes.test1", :things => I18n.t("article.name")) 
```

# c - 将位域成员分配给 char

> ID：11313932
> 
> 赞同：1
> 
> 时间：2012-07-03T15:12:13.683
> 
> 标签：c

我这里有一些代码使用位集将许多 1 位值存储到一个字符中。

基本上

```
struct BITS_8 {
  char _1:1;
  (...)
  char _8:1;
} 
```

现在我试图将这些位之一作为参数传递给函数

```
void func(char bit){
  if(bit){
    // do something
  }else{
    // do something else
  }
}

// and the call was
struct BITS_8 bits;
// all bits were set to 0 before
bits._7 = 1;
bits._8 = 0;
func(bits._8); 
```

解决方案是在调用函数时将位单独列出：

```
func(bits._8 & 0x80); 
```

但我继续进入`//do something`，因为设置了其他位。我想知道这是否是正确的行为，或者我的编译器是否损坏。该编译器是一种嵌入式编译器，可为飞思卡尔 ASIC 生成代码。

编辑：2个错误：参数的传递和bits._8应该是0，否则错误将毫无意义。

**澄清**

我对标准对作业的评价很感兴趣

```
struct X{
   unsigned int k:6;
   unsigned int y:1;
   unsigned int z:1;
}

X x;
x.k = 0;
x.y = 1;
x.z = 0;

char t = X.y; 
```

现在应该`t`包含`1`or `b00000010`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:03:03.440

我认为您*不能*将 1 位*char*设置为 1。剩下一位来确定它是否已签名，因此您最终会得到`0`and之间的区别`-1`。

你想要的是一个`unsigned char`, 来隐藏这个签名位。然后你可以只使用 1 和 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:27:27.263

多年来，当谈到这些特定的编译器时，我变得有点怀疑，通常他们对可以描述的 C 标准的细节的解释不是很好。在这些情况下，更务实的方法可以帮助您避免精神错乱并完成工作。在这种情况下，这意味着，如果编译器的行为不合理（您可以将其定义为与 gcc 所做的完全不同的行为），您可以帮助它一点。

例如，您可以将 func 修改为：

```
void func(char bit){
  if(bit & 1){ // mask off everything that's none of its business
    // do something
  }else{
    // do something else
  }
} 
```

并且 wrt 你的插件问题： t 应该包含 1。它不能包含 10 二进制，因为变量只有 1 位宽。

[C99 上一个公开可用的草稿中](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)的一些阅读材料

第 6.7.2.1 段

> 4 位域的类型应为 _Bool、signed int、unsigned int 或其他一些实现定义的类型的合格或不合格版本。

（对我而言，这意味着编译器至少应该正确处理您的第二个示例）和

> 9 位域被解释为由指定位数组成的有符号或无符号整数类型。107) 如果值 0 或 1 存储到 _Bool 类型的非零宽度位域中，则位域的值字段应与存储的值进行比较。

由于您的编译器是为嵌入式使用而设计的，其中位域是一个相当重要的特性，我希望它们的实现是正确的——如果他们声称实现了位域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T06:19:59.237

如果 Bool 类型定义为 unsigned int 或类似类型，或者您的编译器不支持打包枚举，我可以理解为什么您可能想要使用 char 来存储标志。您可以使用宏设置一些“标志”（我在下面将它们命名为它们的位置值，但按照它们的含义命名它们更有意义）如果 8 个标志还不够，这可以扩展到其他类型，直到 sizeof(类型）* 8 个标志。

```
/* if you cannot use a packed enum, you can try these macros 
 * in combination with bit operations on the "flags"
 * example printf output is: 1,1,6,4,1 
 * hopefully the example doesn't make it more confusing
 * if so see fvu's example */

#include <stdio.h> /* for printf */
#define ONE ((char) 1)
#define TWO (((char) 1)<<1)
#define FOUR (((char) 1)<<2)
#define EIGHT (((char) 1)<<3)
#define SIXTEEN (((char) 1)<<4)
#define THIRTYTWO (((char) 1)<<5)
#define SIXTYFOUR (((char) 1)<<6)
#define ONETWENTYEIGHT (((char) 1)<<7)

int main(void){
printf("%d,%d,%d,%d,%d\n",ONE & ONE, ONE | ONE, TWO | 6, FOUR & 6, sizeof(ONE));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:32:15.533

好的，这是一个编译器错误。我写了生产编译器的人，他们证实了这一点。只有当您有一个带有内联函数的位域时才会发生这种情况。

他们推荐的解决方案是（如果我不想等待补丁）

```
func((char)bits._8)); 
```

关于正确的行为，其他答案是正确的。我仍然将这个标记为答案，因为它是我的问题的答案。

# python - 尝试使用 SQLAlchemy 捕获完整性错误

> ID：11313935
> 
> 赞同：19
> 
> 时间：2012-07-03T15:12:20.560
> 
> 标签：python, sqlalchemy, pyramid

我在尝试捕获错误时遇到问题。我正在使用 Pyramid/SQLAlchemy 并使用电子邮件作为主键制作了一个注册表单。问题是当输入重复的电子邮件时，它会引发 IntegrityError，所以我试图捕捉该错误并提供一条消息，但无论我做什么我都无法捕捉到它，错误不断出现。

```
try:
    new_user = Users(email, firstname, lastname, password)
    DBSession.add(new_user)
    return HTTPFound(location = request.route_url('new'))
except IntegrityError:
    message1 = "Yikes! Your email already exists in our system. Did you forget your password?" 
```

当我尝试时，我得到了相同的消息`except exc.SQLAlchemyError`（尽管我想捕获特定的错误而不是一揽子捕获所有）。我也尝试过`exc.IntegrityError`，但没有运气（尽管它存在于 API 中）。

我的 Python 语法有什么问题，还是我需要在 SQLAlchemy 中做一些特别的事情来捕捉它？

* * *

我不知道如何解决这个问题，但我对可能导致问题的原因有一些想法。也许 try 语句没有失败而是成功了，因为 SQLAlchemy 本身正在引发异常，而 Pyramid 正在生成视图，因此`except IntegrityError:`永远不会被激活。或者，更有可能的是，我完全错误地理解了这个错误。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T17:27:59.797

在 Pyramid 中，如果您已将会话（脚手架自动为您执行）配置为使用`ZopeTransactionExtension`，则在视图执行之前不会刷新/提交会话。如果您想自己在视图中捕获任何 SQL 错误，则需要强制 a`flush`将 SQL 发送到引擎。`DBSession.flush()`应该在`add(...)`.

**更新**

我用一个保存点的例子来更新这个答案，只是因为很少有关于如何使用事务包做到这一点的例子。

```
def create_unique_object(db, max_attempts=3):
    while True:
        sp = transaction.savepoint()
        try:
            obj = MyObject()
            obj.identifier = uuid.uuid4().hex
            db.add(obj)
            db.flush()
        except IntegrityError:
            sp.rollback()
            max_attempts -= 1
            if max_attempts < 1:
                raise
        else:
            return obj

obj = create_unique_object(DBSession) 
```

请注意，如果不使用表级锁定，即使这样也容易在事务之间重复，但它至少显示了如何使用保存点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T16:23:02.070

您需要做的是捕获一般异常并输出其类；那么您可以使异常更具体。

```
except Exception as ex:
    print ex.__class__ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T16:49:49.857

可能没有数据库操作，直到`DBSession.commit()`在堆栈中稍后在已经返回`IntegrityError`的控制器代码之后引发。`try/except`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-16T15:46:57.170

编辑：上面编辑的答案是使用回滚的更好方法。

--

如果您想在金字塔应用程序的中间处理事务或在序列末尾执行自动事务提交的事情，那么不需要发生任何魔法。

如果前一个事务失败，请记住启动一个*新事务。*

像这样：

```
def my_view(request):
   ... # Do things
   if success:
     try:
       instance = self._instance(**data)
       DBSession.add(instance)
       transaction.commit()
       return {'success': True}
     except IntegrityError as e:  # <--- Oh no! Duplicate unique key
       transaction.abort()
       transaction.begin() # <--- Start new transaction
       return {'success': False} 
```

请注意，在成功的事务上调用 .commit() 很好，因此没有必要在成功调用后启动新事务。

如果事务处于失败状态，您只需要中止事务并启动新事务。

（如果事务不是这样的 poc，您可以使用保存点并回滚到保存点而不是开始新事务；遗憾的是，这是不可能的，因为尝试提交会使已知的先前保存点无效。好东西啊？） （编辑：<---原来我错了......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-20T21:22:56.597

我就是这样做的。

```
from contextlib import(
        contextmanager,
        )

@contextmanager
def session_scope():
    """Provide a transactional scope around a series of operations."""
    session = Session()
    try:
        yield session
        session.commit()
    except:
        session.rollback()
        raise
    finally:
        session.close()

def create_user(email, firstname, lastname, password):

    new_user = Users(email, firstname, lastname, password)

    try:

        with session_scope() as session:

            session.add(new_user)

    except sqlalchemy.exc.IntegrityError as e:
        pass 
```

[http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#when-do-i-construct-a-session-when-do-i-commit-it-and-when-do-i-关闭它](http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#when-do-i-construct-a-session-when-do-i-commit-it-and-when-do-i-close-it)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-26T15:50:17.527

刷新会话后在 finally 语句中捕获异常。

```
try:
    new_user = Users(email, firstname, lastname, password)
    DBSession.add(new_user)
    return HTTPFound(location = request.route_url('new'))
finally:
    try:
        DBSession.flush()
    except IntegrityError:
        message1 = "Yikes! Your email already exists in our system. Did you forget your password?" 
```

# ruby - 基于终端的蛇游戏：输入线程操纵输出

> ID：11313936
> 
> 赞同：0
> 
> 时间：2012-07-03T15:12:23.123
> 
> 标签：ruby, multithreading, terminal

我正在为终端编写一个蛇游戏，即通过打印输出。

以下工作正常：

```
while status[snake_monad] do
  print to_string draw canvas, compose_all([
    frame,
    specs,
    snake_to_hash(snake[snake_monad])
  ])

  turn! snake_monad, get_dir
  move! snake_monad, specs

  sleep 0.25
end 
```

但我当然不希望`turn!`ing 阻塞。所以我把它放入一个新线程并让它循环：

```
Thread.new do
  loop do
    turn! snake_monad, get_dir
  end
end

while status[snake_monad] do
  ...
  # no turn! here
  ...
end 
```

这在逻辑上也有效（蛇正在转动），但输出以某种方式穿插了换行符。一旦我杀死输入线程（`^C`），它看起来又正常了。

那么线程为什么以及如何对我的输出产生影响呢？我该如何解决这个问题？
（我对线程知之甚少，对 ruby​​ 中的线程了解甚少。在同一个终端上同时输入和输出使事情变得更糟，我猜......）

另外（不是很重要）：希望我的程序尽可能纯净，在传递所有内容的同时以非阻塞方式获取输入是否有点容易？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:27:19.070

您不想要**非阻塞**IO - 您想要**无缓冲**IO。

这里不需要线程 - 您只需将终端置于正确模式，然后等待主事件循环上的按键。

这是一个完全荒谬的例子。

```
require 'io/wait'

def ping
  term = `stty -g`
  `stty raw -echo cbreak`
  loop do
    if STDIN.ready?
      #command thy snake!
      ret = STDIN.getc 
    end
    if ret
      #process the snake command if there was one
      STDOUT.write("you told the snake to #{ret}\n")
    else
      #slither around bitin' fools and hustling apples.
    end
  end
ensure
  `stty #{term}`
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:27:33.353

我找到了一个肮脏的解决方案：

`\r`我只需要在函数中的每个换行符后添加一个回车符 ( ) `to_string`，因此在它之后打印的所有内容都将被覆盖。由于它是换行符，因此它失去了作用。现在一切似乎都很好。

但我更想知道为什么会发生这种情况并干净地修复它（如果可能的话）。

# android - Android 2.3.3 - 消息：对话概览中的错误状态信息

> ID：11313939
> 
> 赞同：1
> 
> 时间：2012-07-03T15:12:27.360
> 
> 标签：android, sms, status

在装有 Android 2.3.3 的 HTC Desire Z 上，我不时遇到问题，即状态信息错误。这意味着状态信息表明，有一条未读、未发送或失败的短信，但该短信已被删除。有谁知道，我在哪里可以重置此信息？它必须存储在任何地方

```
ContentResolver of 
content://mms-sms/conversations or
content://sms/conversations 
```

在线程级别，但我不知道。示例：我在未发送短信概览中删除了一些失败的短信后，未发送短信的状态并未在消息对话概览中重置，尽管在每个对话中都没有留下任何未发送短信。

**编辑/解决方法：** 我找不到这个问题的编程解决方案，但我找到了解决方法：我使用了 GO SMS PRO。起初出现同样的错误显示。但是在我进入对话的详细视图并返回后，错误的发送状态标志被删除。如果我然后回到股票消息程序并做某事，错误的显示也会在那里被删除。我必须为每个发送状态显示错误的对话执行此操作。

# perl - 如何检查本地网络中的IP地址是否有共享网络文件夹。perl 怎么可能？

> ID：11313945
> 
> 赞同：0
> 
> 时间：2012-07-03T15:12:47.580
> 
> 标签：perl, directory, shared, shared-directory

如何检查本地网络中的IP地址是否有共享网络文件夹。perl 怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:30:53.100

```
require IPC::System::Simple;
use autodie qw(:all);
system qw(smbclient -L 192.168.0.1); 
```

# c# - 将“const float *”从 C++ 翻译成 C#

> ID：11313947
> 
> 赞同：0
> 
> 时间：2012-07-03T15:13:01.343
> 
> 标签：c#, c++

如何将此 C++ 代码片段翻译成 C#？

```
void fm_getAABB(..., const float *points, ...)
{    
   // ...
   const unsigned char *source = (const unsigned char *) points;
   //...    
   const float *p = (const float *) source;
   //...
} 
```

我已经尝试使用[C++ 到 C# 转换器](http://tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_CSharp_Converter_Details.html)，但它似乎也无法翻译它。

**编辑：**
这是整个功能：

```
void fm_getAABB(unsigned int vcount, const float *points, unsigned int pstride,
    float *bmin, float *bmax)
{
    const unsigned char *source = (const unsigned char *) points;

    bmin[0] = points[0];
    bmin[1] = points[1];
    bmin[2] = points[2];

    bmax[0] = points[0];
    bmax[1] = points[1];
    bmax[2] = points[2];

    for (unsigned int i = 1; i < vcount; i++)
    {
        source+=pstride;
        const float *p = (const float *) source;

        if ( p[0] < bmin[0] ) bmin[0] = p[0];
        if ( p[1] < bmin[1] ) bmin[1] = p[1];
        if ( p[2] < bmin[2] ) bmin[2] = p[2];

        if ( p[0] > bmax[0] ) bmax[0] = p[0];
        if ( p[1] > bmax[1] ) bmax[1] = p[1];
        if ( p[2] > bmax[2] ) bmax[2] = p[2];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:21:43.323

一种选择是使用 C# 的不安全模式按原样进行翻译。C# 完全能够通过少量修改运行此代码。例如，您需要删除 const 修饰符。

如果您设法制作一个仅限托管的版本，那当然会更好。但是，这甚至是可能的并不完全清楚：您的函数正在执行某些指针操作，这可能会导致未对齐的访问。托管阵列不能使用仅托管功能以非对齐方式访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:22:02.823

在 C# 中使用指针没有一种安全的方法，C# 是一种比 C++ 更安全的语言，但这也可能使其在这种情况下更具限制性。

C++ 将允许您做许多其他语言不能做的事情，因为它将安全性留给了程序员，但是 C# 将安全性放在首位，因此限制了此类事情的发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:14:30.767

很难说没有看到更多的上下文。我希望您能够用浮点数组替换所有指针的使用。

通常，C++ 指针用于单个项目或项目数组，但我不能确定从您的示例代码中分辨出哪个 - 但复数“点”的使用似乎表明它是一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:25:51.587

要在字符（字节）数组和其他值之间进行转换，请使用 BitConverter 类。

[http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)

这是类型双关语的 C# 答案 `const unsigned char *source = (const unsigned char *) points;`

但它需要深入了解这个函数的作用，并基本上以 C# 的方式重新实现它。

# java - 我有一个因某种原因没有被捕获的 ConnectException

> ID：11313949
> 
> 赞同：4
> 
> 时间：2012-07-03T15:13:13.593
> 
> 标签：java, android, sockets, exception, connectexception

我正在开发一个使用套接字的 Android 应用程序。我有一个名为 initializeStreams() 的函数，它打开套接字并尝试连接。如果无法建立连接，此函数将引发 ConnectException。但由于某种原因，在调用具有 ConnectException 捕获块的 initializeStreams() 的代码中，日志打印出它自己的异常堆栈跟踪，而不是转到捕获块。即使抛出了确切的异常，也永远不会到达 catch 块。这是代码：

尝试块：

```
try {
        initializeStreams();

            /* other code */

    } catch (ConnectException e) {
        Log.i(TAG, "caught connect exception");

    } 
```

初始化流（）：

```
 public void initializeStreams() throws ConnectException {
    try {
        Log.i(TAG, "Attempting to connect");

        requestSocket = new Socket(SERVER_ADDR, PORT);

                    /* other code */

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我无法弄清楚这一点，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:29:34.233

您需要将异常链接到`catch`块中。尝试以下操作：

```
public void initializeStreams() throws ConnectException {
try {
    Log.i(TAG, "Attempting to connect");

    requestSocket = new Socket(SERVER_ADDR, PORT);

                /* other code */

} catch(ConnectException e){
    throw e;
}

catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:48:26.387

`ConnectException`扩展`SocketException`，而后者又扩展`IOException,`，因此捕获 for `IOException`in`initializeStreams()`捕获`ConnectException.`我将完全删除该`try/catch`块：在没有连接的情况下从该方法干净地返回没有多大意义。

# python - 比较两个 python 列表的复杂性顺序是什么？

> ID：11313950
> 
> 赞同：6
> 
> 时间：2012-07-03T15:13:15.027
> 
> 标签：python

假设列表仅包含可散列对象。

顺便说一句，我不确定这个问题是否有意义，因为在涉及复杂性和学术问题时，我是一个完全的菜鸟。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T15:15:44.893

如果两个列表的长度为 n，比较两个列表的复杂度为 O(n)，如果两个列表的长度不同，则为 O(1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T15:33:51.403

这在很大程度上取决于“比较”一词的含义。

如果您比较相等性，@Sven-Marnach 的答案适用：相同长度为 O(n)，不同长度为 O(1)。

如果您将许多列表相互比较，则使用哈希函数可以帮助您：对于不同的列表（具有不同的哈希）它是 O(1)，对于具有相同哈希的列表可能仍然是 O(n)，因为哈希值可能冲突，你必须做一个真正的比较。这可以通过使用多个哈希函数来缓解，因此冲突的概率大大降低。

请注意，仍然需要 O(n) 来计算长度为 n 的列表的哈希值，所以这里没有免费的午餐。

如果您想比较两个列表的相似性，您可能需要[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，它在简单的情况下是时间的二次方，但可以通过惰性求值使其成为线性距离，这可能会耗费大量内存。

如果您想计算完整的更改列表以从另一个列表中生成一个列表 ( [`diff`](http://en.wikipedia.org/wiki/Diff))，它在 Wikipedia 中提到的最佳实现中是二次的。

# objective-c - UITableViewController 和 UITextField 键盘

> ID：11313951
> 
> 赞同：11
> 
> 时间：2012-07-03T15:13:20.907
> 
> 标签：objective-c, ios

我有一个带有分组静态 UITableView 的 UITableViewController。我正在为故事板上的静态表格视图定义单元格。其中一个单元格中有一个文本字段。调用此文本字段时，键盘会弹出，但是，tableview 不会像通常在 table view 控制器上那样自动调整大小。所以现在键盘部分覆盖了文本字段，我无法向上滚动。

我的理解是，当您使用 UITableViewController 和 tableview 时，可视区域应在调用键盘时自动缩小。它确实在我的应用程序的其他部分按预期工作，只是不适用于这个静态表格视图。它不适用于静态表吗？还有什么我想念的吗？有没有简单的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-08T05:48:35.563

**回答**

它与静态单元格无关。他们应该工作。

如果您的控制器已经是 UITableViewController，请检查您是否使用了方法`viewWillAppear`。如果你这样做了，你必须打电话`[super viewWillAppear:YES]`让“自动行为”工作。

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:YES]; // This line is needed for the 'auto slide up'
   // Do other stuff
} 
```

这个问题很容易出现，因为控制器的样板代码没有随`viewWillAppear`方法调用一起提供，如果你在控制器中定义它，你会覆盖它。

**额外的信息**

看看这个链接。

[Apple 表视图编程指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html#//apple_ref/doc/uid/TP40007451-CH5-SW7)

> 注意：UITableViewController 在 iOS 3.0 中有新功能。表格视图控制器支持表格视图行的内联编辑；例如，如果行在编辑模式下嵌入了文本字段，它会在显示的虚拟键盘上方滚动正在编辑的行......等等......

**重要的一点**

> UITableViewController 类通过重写 loadView、viewWillAppear: 和其他继承自 UIViewController 的方法来实现上述行为。在你的 UITableViewController 的子类中，你也可以重写这些方法来获得特殊的行为。如果您确实重写了这些方法，请确保调用该方法的超类实现，通常作为第一个方法调用，以获得默认行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T14:59:40.960

对于斯威夫特

```
override func viewWillAppear(animated: Bool) {

   super.viewWillAppear(animated)

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:27:11.903

如果选择其中一个表格形式进行编辑，则向上推视图（需要键盘通知实现）

```
- (void) keyboardDidShow:(NSNotification *)aNotification
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
    [UIView commitAnimations];
    isRaised = [NSNumber numberWithBool:YES];
} 
```

调整表格的大小（将高度除以 2）。把它换成键盘确实显示方法。此外，您可以使用键盘确实隐藏方法来撤消这些东西。

```
CGRect temp = CGRectMake(mineTable.frame.origin.x, mineTable.frame.origin.y, mineTable.frame.size.width, mineTable.frame.size.height/2);
mineTable.frame = temp; 
```

# linux - -x 和 -c 字符串比较选项有什么作用？

> ID：11313952
> 
> 赞同：1
> 
> 时间：2012-07-03T15:13:22.633
> 
> 标签：linux, string, bash, sh, hp-ux

当我遇到以下情况时，我正在移植另一个 shell 脚本：

```
if [[ ! -x $DVDREC ]]; then
  print "ERROR: $DVDREC not found. Exiting ..."
  exit 1
fi

if [[ ! -c ${DVDDEV} ]]; then
  print "ERROR: ${DVDDEV} not found. Exiting ..."
  exit 1
fi 
```

我想知道 -c 和 -x 选项实际上对存储在 DVDREC 和 DVDDEV 中的字符串有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:16:48.660

从 bash shell 中的“帮助测试”：

> ```
>  -c FILE        True if file is character special.
>   -x FILE        True if the file is executable by you. 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:16:53.880

// 人工测试

```
 -c FILE
          FILE exists and is character special

   -x FILE
          FILE exists and execute (or search) permission is granted 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T15:16:54.867

引用`man test`：

> ```
>  -c FILE
>           FILE exists and is character special
> 
>    -x FILE
>           FILE exists and execute (or search) permission is granted 
> ```

# php - 如何使用 php 从此 JSON 数组中获取评论总数？

> ID：11313954
> 
> 赞同：1
> 
> 时间：2012-07-03T15:13:30.050
> 
> 标签：php, facebook, facebook-graph-api

我想在我的网站上显示一个文章列表，文章下方有作者、日期和**评论**字段，以便用户在打开文章之前就可以看到文章的评论数量。

评论来自facebook，我使用graph api每篇文章返回以下JSON代码，我如何从中获得评论总数？谢谢

我试过 json_decode 但得到的数组都是零计数。

```
{
   "http://www.withinzambia.com/technology-and-it/your-modem-isnt-that-fast.html": {
      "comments": {
         "data": [
            {
               "id": "10151004341202332_23086817",
               "from": {
                  "name": "Cindi Mutale",
                  "id": "1045450015732187"
               },
               "message": "Glad someone finally pointed this out.",
               "can_remove": false,
               "created_time": "2012-07-02T19:46:58+0000",
               "like_count": 0,
               "user_likes": false
            },
            {
               "id": "10151002332_23094740",
               "from": {
                  "name": "Chanda Mike",
                  "id": "1000034452054679"
               },
               "message": "my modem is 7mbps, so that's not 7MB per second?",
               "can_remove": false,
               "created_time": "2012-07-03T13:51:24+0000",
               "like_count": 0,
               "user_likes": false
            },
            {
               "id": "10151004341202332_23094782",
               "from": {
                  "name": "Precious Chulu",
                  "id": "100242343243281187"
               },
               "message": "The max for the modem in the picture is 7mbps, which is actually about 900kb when you divide by 8, so you will never download at more than 1mb per second with these modems even when MTN or Airtel upgrades the network.",
               "can_remove": false,
               "created_time": "2012-07-03T13:57:56+0000",
               "like_count": 0,
               "user_likes": false
            }
         ],
         "paging": {
            "next": "https://graph.facebook.com/10151004341202332/comments?value=1&redirect=1&limit=25&offset=25&__after_id=10151004341202332_23094782"
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:19:32.173

```
<?php
  ...
  $count = 0;
  $array = json_decode($input, true);
  foreach($array AS $website) {
    $count += count($website['comments']['data']);
  }
  ...
?> 
```

$count 是答案。

[奖金 ：）](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:23:06.980

```
$jsonArr = ' ..your JSON array.. ';

$decodedArr = json_decode($jsonArr);

$num_comments = count($decodedArr->{'http://www.withinzambia.com/technology-and-it/your-modem-isnt-that-fast.html'}->comments->data);

echo $num_comments; 
```

tested and works. be aware that if you load your JSON into a string, like i did here, single quotes will need to be escaped.

# php - PHP：Max 和 Min 返回不正确的结果

> ID：11313957
> 
> 赞同：0
> 
> 时间：2012-07-03T15:13:41.947
> 
> 标签：php, max, percentage, min

我确信这是因为最后的“g”，但这是我尝试计算比率百分比时的场景和结果。我总是想将两个数字中的最高值除以最低值。

```
$item1 = "200.00g";
$item2 = "50.00g";
$calc = round((max($item1,$item2) / min($item1,$item2))*100) . "%";
// result: $calc = "400%"

$item1 = "100.00g";
$item2 = "5.00g";
$calc = round((max($item1,$item2) / min($item1,$item2))*100) . "%";
// result: $calc = "2000%"

PROBLEM RESULT:
$item1 = "8.00g";
$item2 = "14.00g";
$calc = round((max($item1,$item2) / min($item1,$item2))*100) . "%";
// result: $calc = "57%"
// I am expecting (14.00g / 8.00g)*100 = "175%" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:17:33.017

这是类型转换；

```
$item1 = "8.00";
$item2 = "14.00";
$calc = round((max($item1,$item2) / min($item1,$item2))*100) . "%"; 
```

结果将是 175%

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:17:41.733

当您想在数学运算中使用您的字符串，并且您知道该单元在您的示例中放置在末尾时，您可以将变量转换为浮点数：

```
$item1_numeric = (float) $item1; 
```

但显然，在变量/数据库中将值和单位分开会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:17:16.040

使用： substr($item1, 0, -1) instade of $item1, substr($item2, 0, -1) instade of $item2 当你做回合时。

您不能将 2 个字符串与 round() 进行比较。

编辑：如果 $item1 = "200g"，ma 解决方案是可以的，但如果 $item1 = "200.00g" 你需要删除 "." 在 round() 之前，例如 pregreplace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:38:17.980

哦，YAPHPB——也是我最喜欢的一个。即使它写在[Doc](http://php.net/manual/en/function.max.php)中：

```
When [max()] given a string it will be cast as an integer when comparing. 
```

...这只是部分事实：如果至少一个比较值是数字或数字字符串。

否则，所有字符串都将作为*字符串*进行比较：将比较每个字符串的前 {0} 个字符，然后是 {1}，然后是 {2}... 等等。

所以基本上这就是这里发生的事情：

```
echo max("200.00g", "50.00g"); // 50.00g, as '5' > '2'
echo max("200.00g", 50);       // "200.00g", as it gets converted to int (become 200) 
```

这更疯狂：

```
echo max("200.00g", "1000.00"); // "200.00g", as '2' > '1'
echo max("200.00", "1000.00");  // "1000.00", as we tried to help you, no, really! 
```

后一种结果实际上可以由了解[数字](http://php.net/manual/en/function.is-numeric.php)概念的人预测：当两个字符串都是纯数字时，它们在比较时会转换为数字。尽管如此，至少可以说，我发现这种行为不可靠。

The bottom line: if you need to compare numbers, compare numbers, period. Type conversion in PHP can get real messy - and bite you in the bottom real hard when you least expect it. )

# c# - wp7 app + skydrive，查看文件有问题

> ID：11313974
> 
> 赞同：0
> 
> 时间：2012-07-03T15:14:44.990
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我能够进行身份验证并能够获取文件的直接 url。它看起来像这样：[https ://skydrive.live.com/MobileProtocol?ptcl=office%3a&dav=https%3a%2f%2fd.docs.live.net%2f9808b4a6c33c1bc4%2ffirst.xlsx](https://skydrive.live.com/MobileProtocol?ptcl=office%3a&dav=https%3a%2f%2fd.docs.live.net%2f9808b4a6c33c1bc4%2ffirst.xlsx)

我能够使用 WebBrowserTask 打开此文件，但不能使用内置电话：WebBrowser 控件。WebBrowserTask 的问题是，它在我的应用程序之外打开，不能用于安全文档。

有什么建议么？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:20:36.883

AFAIK，这是使用 WP7 打开文档的唯一方法。您无法使用当前的 SDK 绕过此限制。也许 Windows Phone 7.8 或 WP8 可能会更好。

# javascript - Node.js 的嘻哈 PHP？

> ID：11313975
> 
> 赞同：3
> 
> 时间：2012-07-03T15:14:47.367
> 
> 标签：javascript, node.js

有什么方法可以实现将 Node.js 脚本编译为本机代码，就像 Hip-Hop 对 PHP 所做的那样？

我不是在谈论库/api。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:18:00.190

Node.js 使用 Google 的 V8 javascript 引擎，该引擎将所有 javascript 编译为本机代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:18:57.870

不，您不能将 Node.js 编译为本机代码。但是您可以使用 v8 在 c++ 中编写部分应用程序。但要注意，从 js 到 c++ 世界的过渡时间很长。

您也可以尝试从 v8 获取中间编译。但我没有看到有人这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:57:24.677

你真的不需要自己预编译。IIRC，在节点中，V8 在运行单行之前编译你的 js。因此，使用 PHP 时，您的代码会不断被解释（除非您有一些操作码缓存），使用节点时，您的代码会在您启动应用程序时编译一次，并且（如果您正在运行服务器）连接的用户将调用在服务器启动时已编译的相同代码。

# ember.js - 路由期间的 Ember 数据类型错误

> ID：11313979
> 
> 赞同：1
> 
> 时间：2012-07-03T15:14:52.023
> 
> 标签：ember.js, ember-data

尝试使用 Ember 路由时出现此 JS 错误：

```
Uncaught TypeError: Object <DS.Store:ember215> has no method 'create' ember-data-latest.js:3677
    Ember.onLoad.app.registerInjection.injection ember-data-latest.js:3677
    Ember.Application.Ember.Namespace.extend.initialize ember-latest.js:10381
    Ember.Application.Ember.Namespace.extend.initialize ember-latest.js:10380
    Ember.Application.Ember.Namespace.extend.initialize ember-latest.js:10379
    (anonymous function) app.js:6 
```

这是来自 GitHub 的最新 Ember.js 和 Ember Data（主版本，而不是发布版本）。我知道使用当前版本可能会导致类似的问题，但到目前为止这似乎不寻常。

回顾这些行，Ember 路由代码似乎调用了 Ember Data 函数，这会导致错误（并阻止路由正常工作）。

有什么解决方案吗？

**jsFiddle：http:** [//jsfiddle.net/bkjT4/2/](http://jsfiddle.net/bkjT4/2/)

```
App = Ember.Application.create({});

App.Store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create()
});

App.Router = Ember.Router.extend({
  root: Ember.State.extend({
    index: Ember.State.extend({
      route: '/'
    })
  })
});

App.router = App.Router.create({
    location: 'history' // does the same with hash
});

App.initialize(App.router); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:59:36.233

好吧，关于 的问题`has no method create()`是因为您命名了您的商店`App.Store`（大写字符串“Store”）并且它是一个实例。Ember.js 中的约定是您命名类`UpperCase`和实例`lowerCase`（请参阅[emberist 的](http://www.emberist.com/2012/04/09/naming-conventions.html)一篇好博文）。这是一个问题，因为在 ember-data 中注册了一个注入，它会自动实例化一个`Store`类，如果已定义，请参见[此处](https://github.com/emberjs/data/blob/0047d674391652da82596bd5f7a84c7cb216610e/packages/ember-data/lib/system/application_ext.js#L9-11)。长话短说：如果你把它改成`App.store = Ember.Store.create({...})`或者`App.Store = Ember.Store.extend({...})`这个问题就解决了。

解决了这个问题之后，又出现了另一个问题：你`Ember.State`在`Ember.Router`你应该使用的地方使用`Ember.Route`。所以最终的代码看起来像这样，见[http://jsfiddle.net/pangratz666/5Y2PX/](http://jsfiddle.net/pangratz666/5Y2PX/)：

```
App = Ember.Application.create({});

App.store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create()
});

App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/'
    })
  })
});

App.router = App.Router.create({
    location: 'history'
});

App.initialize(App.router); 
```

​</p>

# android - 更新后无法同时运行多个android模拟器

> ID：11313980
> 
> 赞同：3
> 
> 时间：2012-07-03T15:14:55.290
> 
> 标签：android, android-emulator

在 SDK Manager 中安装更新之前，它运行良好。但是我不能同时运行两个模拟器。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:20:56.480

我遇到了同样的问题。

为了解决这个问题，我创建了新的 AVD 并尝试运行它。

**或者** `emulator-arm -avd <AVD>`

现在我也可以运行旧的 AVD

它解决了我的问题。希望这会帮助你。

# java - 运行独立 jar 时编码文件的问题

> ID：11313981
> 
> 赞同：3
> 
> 时间：2012-07-03T15:14:58.177
> 
> 标签：java, maven, encoding, maven-2, character-encoding

我遇到了最奇怪的问题。我有一个将一些数据写入文件的 java 类。当我在 Eclipse 中执行它时，一切正常（以正确的编码写入数据）。但是当我将它作为独立的 JAR 运行时，编码被破坏了。

我的项目中有这个（在 pom.xml 中）：

```
<properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

我的java类在eclipse（右键单击->属性）文件编码设置为：UTF-8。

这是截断的 java 代码，它执行附加：

```
 //class field
    static BufferedWriter wr;
public static void main(String[] args) throws IOException {
        OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(args[0], true), "UTF-8");
        wr = new BufferedWriter(writer);
        //.processing logic, building up what needs to be in the file, line by line
        wr.close();
    } 
```

附加到 .csv 文件的相关方法：

```
private void writeToCSVFile(String content){

        try {
            System.out.println(content);
            wr.write(content);
            wr.write("\n");
            wr.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

同样，当我在 Eclipse 中打印时，输出看起来就像在我要附加到的文件中一样。但是当作为独立的 jar 编码运行时，由于某种原因会中断。这就是我配置相关插件的方式：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <finalName>Worker</finalName>
                    <appendAssemblyId>false</appendAssemblyId>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <mainClass>com.test.automation.Testing</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin> 
```

我真的不知道下一步该做什么。有任何想法吗？

**此代码没有任何异常，不会在任何地方失败。当我检查写入结果的文件时，在 Eclipse 中完全按照预期运行。**

它也可以作为独立的 jar 使用，但只有当我检查写入结果的文件时，编码才会被搞砸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:46:50.010

您向我们展示的所有设置确实指定了用于编辑和编译代码的编码。

它没有说明您运行代码时使用的编码。

显然，eclipse 使用的 jvm 使用 UTF-8 作为其`file.encoding`属性。

您的独立 jvm 对其 file.encoding 属性使用另一个值。

此外，当您读取数据时会出现问题，而不是在您为输出明确指定“UTF-8”编码时写入数据时出现问题。

您有 2 个解决方案：

**解决方案1：**

您永远不会使用默认编码读取任何内容（始终通过指定正确的编码来创建阅读器）。

**解决方案2：**

你告诉你的 jvm 它的默认编码应该是什么：

```
java -Dfile.encoding=UTF-8 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:54:11.423

您必须了解您的 Eclipse 环境与独立环境不同，我将把钱花在您的 jar 文件中缺少的类上。当您在 Eclipse 中导出 jar 文件时，请确保打包引用的 jar，否则您的程序将失败。程序失败时是否有任何堆栈跟踪？

# javascript - hasOwnProperty 是否仍应与 for..in 语句一起使用

> ID：11313982
> 
> 赞同：13
> 
> 时间：2012-07-03T15:14:59.653
> 
> 标签：javascript

有很多博客说`hasOwnProperty`每当使用循环时都应该使用检查`for..in`，但我不明白为什么会这样。无论有没有检查，我们都会得到相同的结果。

看看[这个小提琴](http://jsfiddle.net/mothi_gautham/gFmXM/)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T15:18:38.230

如果您使用 来创建一个基本对象`{}`，或者使用 来从 JSON 中获取它`JSON.parse`，那么`hasOwnProperty`全局无用。

但是，如果您正在扩展“类”（使用*原型*），那么它可以帮助您了解您是否正在访问“自己的属性”（直接属性，包括直接函数）。

请注意，一个基本对象至少有一个（不是直接的）属性，您可能会用`console.log({});`or发现它，`console.log({}.toString)`但[它不是可枚举的，也不能](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)在`for... in`循环中看到：

> for...in 循环不会迭代不可枚举的属性。从 Array 和 Object 等内置构造函数创建的对象从 Object.prototype 和 String.prototype 继承了不可枚举的不可枚举属性，例如 String 的 indexOf 方法或 Object 的 toString 方法。循环将遍历对象的所有可枚举属性，或者它从其构造函数的原型继承（包括任何覆盖内置属性的属性）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-03T15:25:22.703

没有`hasOwnProperty`您不知道该属性是对象的本机属性还是继承自它的原型。

**[你修改过的小提琴](http://jsfiddle.net/poikl/gFmXM/2/)**

```
var obj1 = {a:"10",b:"20"};

Object.prototype.c = "prototype:30";

var i;
for(i in obj1) {
    document.getElementById("div1").innerHTML += obj1[i]+" ";
}
// result 10 20 prototype:30

for(i in obj1) {
    if(obj1.hasOwnProperty(i)) {
        document.getElementById("div2").innerHTML += obj1[i] +" ";
    }          
}
// result 10 20
​ 
```

在这种情况下，从它的 Prototype`obj1`继承该属性，您将错误地在您的第一个循环中列出它。`c``Object`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T15:29:55.347

通常你会得到相同的结果有或没有`hasOwnProperty`，但后者会忽略继承而不是直接存在于相关对象上的属性。

考虑这个基本的继承系统。狗继承自主 Animal 类。

```
function Animal(params) { this.is_animal = true; }
function Dog(params) { for (var i in params) this[i] = params[i]; }
Dog.prototype = new Animal();
var fido = new Dog({name: 'Fido'}); 
```

如果我们查看`fido`，`hasOwnProperty`可以帮助我们确定哪些是它自己的属性（名称），哪些是继承的。

```
for (var i in fido) if (fido.hasOwnProperty(i)) alert(i+' = '+fido[i]); 
```

...警报`name=Fido`但不是`is_animal=true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-23T16:59:55.377

这就是为什么我们需要在 for..in 语句中使用 hasOwnProperty() 方法：这不是无用的，这对于使您的代码安全并使其始终做正确的事情非常重要。因为某些库或某些依赖项可能会触及 Object.prototype在您的程序上下文中，如果没有 hasOwnProperty 检查，您的 for...in 语句可能会迭代意外的键。因此，您需要使用 hasOwnProperty() 使您的 for...in 语句安全。

```
var obj = {
  a: 1,
  b: 2
};
Object.prototype.haha = 3;
for (var k in obj) {
   if (obj.hasOwnProperty(k)){
  console.log(k); // prints a, b
  }
}   

var obj = {
  a: 1,
  b: 2
};

Object.prototype.haha = 3;

for (var k in obj) {
  console.log(k); // prints a, b, haha
}
```

# php - 如何创建一个顶部有水平菜单选项卡可供选择的 HTML 文本框？

> ID：11313984
> 
> 赞同：0
> 
> 时间：2012-07-03T15:15:06.070
> 
> 标签：php, javascript, html, css, tabs

我希望我的问题不会让任何人感到困惑。我不知道那种文本框到底是什么叫做:(我正在寻找的是创建一个顶部有不同菜单的HTML文本框，即文本框的尺寸保持不变，但每个菜单标题在文本框下面会有一些文本，当用户单击它时会打开。

让我给你看演示： [http ://www.e-conservationline.com/content/view/28/113/](http://www.e-conservationline.com/content/view/28/113/)

在页面上向下滚动一点，查看**提交的一般规则：具有****语言**、**字数限制**、**版权**等 菜单

如何创建类似类型的文本框，并为每个标题菜单填充文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:18:43.153

您应该使用一些 Javascript 解决方案来实现此目标。例如，JQuery UI 有一个[选项卡功能](http://jqueryui.com/demos/tabs/)。

同样的高度，一点点CSS就能满足你！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:45:02.367

每个“文本框”都有一个按钮（顺便说一下，它不是文本框，它是一个 div）。例如

*   div #1 有按钮 1
*   div #2 有按钮 2
*   ... 很快

当时只显示一个 div。当用户单击一个按钮时，它会显示一个与该按钮相关的 div 并隐藏所有其余部分。这就是它的工作原理

# ios5 - UIView.frame 和 CALayer.frame 之间有什么关系？（前后 CATransform3D）

> ID：11313991
> 
> 赞同：8
> 
> 时间：2012-07-03T15:15:32.670
> 
> 标签：ios5, uiview, uiimageview, calayer

a`CALAyer.frame`与它的关系如何`UIView.frame`？（在这种情况下特别是 a `UIImageView.frame`）。

考虑到 a 的值`CALayer.frame`可能与转换`UIView.frame`后的值不同`CAtransform3D`，它们是否不再有任何联系？（随后，我是否应该更关心管理 my 的维度`CALayer`而不是`UIImageView`my superview 中的维度？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T06:41:36.267

如果你正在使用*Core Animation*和图层，你应该关注以下`CALayer`属性：

1.  位置
2.  界限
3.  锚点
4.  转换

来自 Apple Technical Q&A QA1620 的报价可[在此处](http://developer.apple.com/library/ios/#qa/qa1620/_index.html)获得：

> 问：当我尝试为 CALayer 的框架设置动画时，没有任何反应。为什么？
> 
> 答：当我尝试为 CALayer 的框架设置动画时，没有任何反应。为什么？
> 
> CALayer 的 frame 属性是派生的属性，依赖于层的位置、锚点、边界和变换。您应该为位置或边界设置动画，而不是为框架设置动画，具体取决于您要实现的效果。

# c++ - 从 MFC 客户端调用远程 COM 组件？

> ID：11313993
> 
> 赞同：0
> 
> 时间：2012-07-03T15:15:40.237
> 
> 标签：c++, com, mfc, dcom

我有一个最初用 Visual Studio 6 编写的 COM 组件。它位于我的一台开发机器上运行的 Windows 服务中。我已经编写了一个快速的 MFC 测试应用程序来调用它，当从这台机器上运行时它工作正常，代码看起来像

```
COSERVERINFO si; 
MULTI_QI qi; 
COAUTHINFO cai = { RPC_C_AUTHN_NONE, RPC_C_AUTHZ_NONE, 0,RPC_C_AUTHN_LEVEL_NONE, RPC_C_IMP_LEVEL_IMPERSONATE,0, EOAC_NONE };
si.dwReserved1 = 0; 
si.pwszName =L"{machine name}"; 
si.pAuthInfo = &cai; 
si.dwReserved2 = 0; 

qi.pIID = &IID_IMyComponent; 
qi.pItf = NULL;
qi.hr = 1; 

HRESULT hr = CoCreateInstanceEx(CLSID_MyComponent,NULL,CLSCTX_REMOTE_SERVER ,&si,1,&qi); 
```

但是，当我将 MFC 测试应用程序移动到我的另一台开发机器并尝试调用另一台机器上的组件时，它失败了。从 CoCreateInstanceEx 返回的 hresult 是 -2147024891

我已经创建了代理存根 DLL 并在两台机器上注册了它。我还缺少其他东西吗？

**更新：我现在将 COUTHINFO 结构更新到下面并且它可以工作。**

```
 COAUTHINFO cai = { RPC_C_AUTHN_WINNT, RPC_C_AUTHZ_NONE, 0, RPC_C_AUTHN_LEVEL_DEFAULT, RPC_C_IMP_LEVEL_IMPERSONATE,0, EOAC_NONE }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:21:38.047

ERROR_ACCESS_DENIED 很可能是由于 COAUTHINFO 提供的参数错误。您将身份验证、授权级别设置为无，这不足以获得与远程计算机连接的权限。尝试设置这些值：RPC_C_AUTHN_DEFAULT（让 COM 协商最佳身份验证服务）、RPC_C_AUTHZ_NONE、RPC_C_AUTHN_LEVEL_DEFAULT、RPC_C_IMP_LEVEL_IMPERSONATE。另见 MSDN 源码 - [COAUTHINFO 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688552%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:32:42.053

-2147024891（或转换为十六进制时为 0x80070005）的 HRESULT 为 ERROR_ACCESS_DENIED。因此，尝试连接到远程计算机时出现权限错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:37:17.160

该错误表示 E_ACCESS_DENIED。确保当前用户有权访问该组件。在服务器框上运行`dcomcnfg`（或“组件服务”），在“DCOM 配置”下找到正确的组件，在“安全”下更改权限以允许调用用户激活和访问。

或者确保调用用户是服务器框上的管理员。

# google-apps-script - 如何添加目录

> ID：11313995
> 
> 赞同：2
> 
> 时间：2012-07-03T15:15:41.913
> 
> 标签：google-apps-script

我有一个使用标题生成的文档，并希望生成一个目录，但我在文档中找不到如何插入 AutogeneratedRegion 的示例：[https ://developers.google.com/apps-脚本/class_tableofcontents](https://developers.google.com/apps-script/class_tableofcontents)

有人可以给我一个如何添加这个的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:12:06.520

Apps 脚本中尚无此类选项可用于生成目录。[您可以在此处](http://code.google.com/p/google-apps-script-issues/issues/entry?template=Feature%20request%20from%20user)提交功能请求

# javascript - 创建一个什么都不做的Javascript对象

> ID：11313996
> 
> 赞同：3
> 
> 时间：2012-07-03T15:15:42.757
> 
> 标签：javascript, mocking

作为禁用功能的一种有点 hacky 的方法，我想出了使用这样的一些 javascript 的想法：

```
//fakefrob.js
var frob = function () {
    return {
        myFunc: function(){},
        myFunc1: function(){},
        myFunc2: function(){return 2;},
        myFunc3: function(){},
        myFunc4: function(){}
    };
}(); 
```

在这个例子中，真正的 frob 具有这些功能的实现。显然这是一个 hack（这些函数大多什么都不做或有占位符返回值）。如果我将 foobar 添加到 realfrob.js，我必须将 foobar 的空实现添加到 fakefrob.js。有没有办法（理想情况下不使用库）来编写 fakefrob.js，使得`frob.foobar`foobar 的行为被定义为`function(){};`，而不实际将 foobar 添加到 fakefrob.js？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:19:57.363

> 有没有办法（理想情况下不使用库）来编写 fakefrob.js，使得`frob.foobar`foobar 的行为被定义为`function(){};`，而不实际将 foobar 添加到 fakefrob.js？

你的意思是，一个包罗万象的属性，映射到一个无操作函数？不，JavaScript（目前）根本没有包罗万象的属性。（我相信他们正在考虑一些机制*，*作为在某个阶段出现的代理内容的一部分。）

但是，如果您可以访问`frob`代码中的真实值，`fakefrob`则可以完全自动生成：

```
// Assumes `frob` already exists
(function() {
    var mock;
    var name;

    // Build the mock, with a function for each function
    // on the real object.
    mock = {};
    for (name in frob) {
        if (typeof frob[name] === "function") {
            mock[name] = function() { };
        }
    }

    // Replace the original    
    frob = mock;
})(); 
```

当然，如果你想复制非函数属性，你可以同时这样做。

请注意，我故意没有*包含*在`hasOwnProperty`上面的循环中，因为我假设您希望您的模拟包含函数，即使`frob`它们是从原型继承的。

如果`frob`继承了一些函数并且你希望你的 mock 对`hasOwnPropety`它们表现出与原始 frob 相同的行为，你可以获得更多创意：

```
// Assumes `frob` already exists
(function() {
    var mock;
    var mockProto;
    var name;

    function FakeFrob() {
    }

    mockProto = FakeFrob.prototype;

    // Build the mock, with a function for each function
    // on the real object.
    mock = new FakeFrob();
    for (name in frob) {
        if (typeof frob[name] === "function") {
            if (frob.hasOwnProperty(name)) {
                mock[name] = function() { };
            }
            else {
                mockProto[name] = function() { };
            }
        }
    }

    // Replace the original    
    frob = mock;
})(); 
```

现在，如果原件`frob`有自己的`foo`( `frob.hasOwnProperty("foo")`is `true`) 但继承的`bar`( `frob.hasOwnProperty("bar")`is `false`)，`hasOwnProperty`那么在您的模拟中会说完全相同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-05T16:25:57.500

正如[TJ Crowder 建议](https://stackoverflow.com/a/11314074/18192)的那样， [受支持的浏览器](https://caniuse.com/#search=proxy)可以使用[代理对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)来完成此操作：

```
var frob = new Proxy({}, {get: function(){return function(){}}}) 
```

这是如何工作的：
这将创建一个代理，它拦截所有属性获取器，将结果替换为一个空函数。通常，代理对象用于拦截并最终将调用转发到我们的目标（这里，目标是`{}`）。但是，这段代码盲目地返回一个空函数，完全忽略了目标。

# python - 为什么 python math.factorial(x) 非常快？

> ID：11313998
> 
> 赞同：20
> 
> 时间：2012-07-03T15:15:43.427
> 
> 标签：python

我有一个问题，为什么python数值计算非常快？例如下面的代码运行时间少于一秒

```
import  math
print math.factorial(10000) 
```

为什么？？？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-03T15:17:24.573

该[`math`模块的功能](http://docs.python.org/library/math.html)在 C 中实现：

> 它提供对 C 标准定义的数学函数的访问。

通过在 C 中使用高效的算法，您可以获得快速的结果。

如果您问为什么这个特定的操作如此之快，那么请参阅[为什么 Python 2.x 中的 math.factorial 比 3.x 慢得多？](https://stackoverflow.com/questions/9815252/why-is-math-factorial-much-slower-in-python-2-x-than-3-x)和[C 代码本身](http://hg.python.org/cpython/file/7937aa6b7e92/Modules/mathmodule.c#l1218)。