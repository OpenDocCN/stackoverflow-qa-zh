# StackOverflow 问答 12306000-12306999

# c++ - 指向数组困境的指针

> ID：12306002
> 
> 赞同：2
> 
> 时间：2012-09-06T18:14:00.700
> 
> 标签：c++, c, pointer-arithmetic

我有一个关于数组和指向数组的指针的相当简单的问题。考虑这个代码片段..

```
int (*ptr)[3];               //A pointer to an array of 3 ints
int arr1[3] = {2,4,6,};      
ptr = &arr1;                //ptr now points to arr1

//3 different ways to express  the same address
cout << &arr1 << "\t" << arr1 << "\t" << &arr1[0] << endl; 
```

现在如果：

```
&arr1 == arr1 == &arr1[0].. 
```

为什么这段代码不正确：

```
ptr = arr1; 
```

或者

```
ptr = &arr1[0]; 
```

这一直让我发疯......所以请任何解释都将不胜感激。也请不要说这不是一个家庭作业问题，只是我试图掌握的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:17:35.917

在

```
ptr = arr1; 
```

`arr1`被转换为`int*`，因此您尝试从不兼容的指针类型进行分配。`&arr1[0]`直接是一个`int*`，没有转换，所以再次不兼容。

```
&arr1 == arr1 == &arr1[0] 
```

是错误的，因为实体有不同的类型。它们只指向相同的地址，因此在打印输出时，它们会给出相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:26:00.723

在大多数情况下，具有数组类型的表达式被隐式转换为指向该数组第一个元素的指针，如 6.3.2.1p3 所述：

> 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串字面量，否则类型为*数组*的表达式将转换为类型为*指向类型的指针*的表达式数组对象的初始元素，不是左值。

因此，您的作业的右侧

```
ptr = arr1; 
```

被隐式转换为不兼容的指针类型（`int*`vs. `int (*)[3]`），并且不能在没有强制转换的情况下存储到指针变量中。

这并不是任何规则的真正例外，因为您也需要将一元运算`&`符与其他类型一起使用：

```
T val, *ptr;
ptr = &val; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-10T10:45:05.840

> 下面的程序将帮助您更好地理解 pointer_to_first_member_of_array、pointer_to_1D_array、pointer_to_2D_array 之间的区别。请仔细查看程序，执行它并查看输出。

```
#include<stdio.h>

int priv_element = 88;

int array[2][5] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

int next_element = 99;

main (int argc, char *argv[])
{

  int *ptr_to_first_element = &array[0][0];

  int (*ptr_to_1d_arry)[5] = &array[0];

  int (*ptr_to_2d_arry)[2][5] = &array;

  printf ("Print first num of first array of 2-Dim array: %d\n",
      *ptr_to_first_element);

  ptr_to_first_element += 5;

  printf ("Print first num of second array of 2-Dim array: %d\n",
      *ptr_to_first_element);

  printf ("Print first num of first array of 2-Dim array: %d\n",
      (*ptr_to_1d_arry)[0]);

  ptr_to_1d_arry++;

  printf ("Print first num of second array of 2-Dim array: %d\n",
      (*ptr_to_1d_arry)[0]);

  printf ("Print first num of first array of 2-Dim array: %d\n",
      (*ptr_to_2d_arry)[0][0]);

  ptr_to_2d_arry++;

  printf
    ("Now you increased to point end of 2d-array space. So next to it is next_element on data-seg: %d\n",
     (*ptr_to_2d_arry)[0][0]);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:32:00.880

当您打印各种表达式时，它表明它们的**值**是相同的。但是，它们没有相同的**类型**。

C 和 C++ 包含类型功能，以减少人为错误并使编写复杂代码变得更容易。假设您在某个指针 p 中有一个地址，并且 C/C++ 允许您执行以下任一操作：

```
float *f = p; 
```

或者：

```
int *i = p; 
```

这将是一个错误，因为通常情况下，内存中 p 处的任何位都不代表有用的 int 和有用的 float。通过强制执行有关类型的规则，该语言可以防止程序员在这里犯错；指针 p 只能分配给兼容类型的另一个指针，除非程序员使用强制转换显式覆盖规则。

同样， your`ptr`是一个指向三个数组的指针`int`。起初，您似乎`arr1`也是一个由三个 int 组成的数组，因此您应该能够分配`ptr = arr1;`. 这是错误的，因为`ptr`它只是一个指针，而是`arr1`一个完整的数组对象。您不能将整个数组放入指针中；您需要将指向数组的指针放入指针中。要获取指向数组的指针，请使用`&`运算符：`ptr = &arr1;`。

这里令人困惑的另一件事是 C/C++ 包含一个自动快捷方式：它将数组转换为指向数组第一个元素的指针。在`arr1`大多数情况下出现时，它会自动更改为`&arr1[0]`. 这没有很大的哲学原因。它只是为了方便我们经常使用数组的方式。所以`ptr = arr1;`将等同于`ptr = &arr1[0];`，这也是不允许的。在这种形式中，你可以看到`arr1`已经变成了一个指向 int 的指针，所以你不能将它赋给一个指向 int 数组的指针。即使指针具有您想要的**值**，它也是错误的**类型**。

当数组作为`&`or`sizeof`或的操作数出现时`_Alignof`，不会发生这种自动转换。所以`&arr1`结果是数组的地址。

在初始化中使用的字符串文字，例如`char a[] = "abc";`经过特殊处理，不会如上所述自动转换。

# java - 尝试使用 Spring WebFlow 在 Hibernate 中配置 c3p0 池

> ID：12306004
> 
> 赞同：0
> 
> 时间：2012-09-06T18:14:20.907
> 
> 标签：java, spring, hibernate, spring-webflow, c3p0

我正在使用 Spring 在 Hibernate 中配置内置的 c3p0 池，但它给了我错误，它不喜欢任何 C3P0 的东西，例如：

```
<prop name="hibernate.c3p0.min_size" value="2" />
<prop name="hibernate.c3p0.max_size" value="5" /> 
```

有人可以告诉我为什么吗？

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate.LocalSessionFactoryBean">
    <!--suppress InjectionValueTypeInspection -->
    <property name="mappingResources" ref="hibernateMappingList" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">net.sf.hibernate.dialect.Oracle9Dialect</prop>
            <prop key="transaction.factory_class">
                net.sf.hibernate.transaction.JDBCTransactionFactory
            </prop>
            <prop key="hibernate.transaction.factory_class">
                net.sf.hibernate.transaction.JDBCTransactionFactory
            </prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.cglib.use_reflection_optimizer">false</prop>
            <prop key="hibernate.jdbc.batch_size">0</prop>

            <prop name="hibernate.c3p0.min_size" value="2" />
            <prop name="hibernate.c3p0.max_size" value="5" />
            <prop name="hibernate.c3p0.timeout" value="600" />
            <prop name="hibernate.c3p0.max_statements" value="0" />
            <prop name="hibernate.c3p0.idle_test_period" value="300"/>
            <prop name="hibernate.c3p0.acquire_increment" value="1" />
      </props>
    </property>
</bean> 
```

这是我的数据库源信息：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">

        <!-- these are C3P0 properties -->
        <property name="acquireIncrement" value="${database.acquireIncrement}" />
        <property name="minPoolSize" value="${database.minPoolSize}" />
        <property name="maxPoolSize" value="${database.maxPoolSize}" /> 
        <property name="maxIdleTime" value="${database.maxIdleTime}" />

        <property name="driverClass" value="${database.driver}" />
        <property name="jdbcUrl" value="${database.url}" />
        <property name="user" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:24:25.630

XML 是错误的。在下一节中

```
 <prop name="hibernate.c3p0.min_size" value="2" />
       <prop name="hibernate.c3p0.max_size" value="5" />
       <prop name="hibernate.c3p0.timeout" value="600" />
       <prop name="hibernate.c3p0.max_statements" value="0" />
       <prop name="hibernate.c3p0.idle_test_period" value="300"/>
       <prop name="hibernate.c3p0.acquire_increment" value="1" /> 
```

使用与其他属性相同的格式替换它

```
 <prop key="key">value</prop> 
```

该`prop`元素使用与该元素不同的属性`property`。

# php - 优化ajax同步调用

> ID：12306005
> 
> 赞同：0
> 
> 时间：2012-09-06T18:14:25.503
> 
> 标签：php, javascript, ajax

我有一些 ajax 脚本可以触发大约 250 个同步 PHP 调用。这是我的脚本

```
$(document).ready(function(){ 
      $("#generate").html("<div class='modal'><p>Initializing...</p></div>");
      $.ajax({
          url:'/fetch around 250 url from database.php',
          async:false,
          dataType: 'json',        
          success: function(data){      
               $.each(data,function(key,val){
                    $("#generate").html("<div class='modal'><p>Fetching "+val.url+"</p></div>");
                    saveimage(val.url); 
              }
              $("#generate").html("<div class='modal'><p>done</p></div>");    
                    finalcreate();
          },
     });
   });
   function saveimage(){
        $.ajax({
             url: 'do some php work.php',
             async: false,
        });
    }
    function finalcreate(){
        $.ajax({
             url: 'do some php work.php',
             async: false,
         });
    } 
```

在第一部分中，脚本从数据库中获取超过 250 个 url，并为每个 url 脚本使用另一个 ajax 调用进行一些 php 计算。当循环结束脚本做最后的ajax调用。

当我在 Firefox 中运行此程序时，它仅成功运行 40 个 url，然后浏览器显示对话框，其中包含用户是否要停止此脚本的选项，如果用户要运行此脚本，则脚本再次运行下一个 40 个 url ，相同的过程发生到最后。我如何优化这个脚本，我不希望浏览器显示选项来停止这个脚本。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:29:24.430

试试这个：

```
function nextrequest() {
    if (requests.length == 0) {
        $("#generate").html("<div class='modal'><p>done</p></div>");
        finalcreate();
        return;
    }
    var val = requests.pop();
    $("#generate").html("<div class='modal'><p>Fetching "+val.url+"</p></div>");
    saveimage(val.url);
}
var requests = [];
$(document).ready(function(){
  $("#generate").html("<div class='modal'><p>Initializing...</p></div>");
  $.ajax({
      url:'/fetch around 250 url from database.php',
      dataType: 'json',
      success: function(data){
        requests = data;
           nextrequest();
      },
 });
});
function saveimage(){
    $.ajax({
         url: 'do some php work.php',
         success: function(data) {
            // do something...
            nextrequest();
         }
    });
}
function finalcreate(){
    $.ajax({
         url: 'do some php work.php',
     });
} 
```

您将所有 URL 存储在一个全局变量中，每次请求完成时，您都会获得下一个，直到所有 URL 都被消耗`(requests.length == 0)`完，您才调用最终请求。

这样用户仍然可以在页面上执行其他操作，并且您可以在每次请求完成时显示进度。此外，一件好事是您可以一次或多次拨打 2 个电话，以加快处理速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:19:06.370

Ajax 调用需要很长时间才能完成，因为它与远程服务器通信。最慢的事情是对服务器的查询。您应该向服务器发送一个包含所有所需数据的批处理请求，该请求应该分离数据并处理它。一切都应该以大约 250 倍的速度完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:29:58.750

为每个 ajax 请求设置一些时间间隔

```
 success: function(data){      
                   $.each(data,function(key,val){
                        $("#generate").html("<div class='modal'><p>Fetching "+val.url+"</p></div>");
                        setTimeout(saveimage(val.url),3000); 

                  } 
```

# c# - 试图避免使用我的泛型进行强制转换

> ID：12306006
> 
> 赞同：2
> 
> 时间：2012-09-06T18:14:29.253
> 
> 标签：c#, .net, generics

我有一个严重依赖泛型的架构设置。在某一时刻，我确实必须转换为基本类型，出于好奇，我想知道我是否可以回避它。

背景是我们有许多想要打印到网页的生产线组。由于每个组的生产线有一些相同的信息，但也有一些不同的信息，我使用了一个抽象类：

```
public abstract class ProductionLine
{
    public int LineNumber { get; set; }
    public string Name { get; set; }
    public double Target { get; set; }
    public double Actual { get; set; }
    public double Variance { get; set; }
} 
```

这是一个示例具体实现：

```
public class TissueProductionLine : ProductionLine
{
    public double Budget { get; set; }
    public double PercentOnTarget { get; set; }
} 
```

由于我们讨论的是生产线组，因此我创建了一个抽象对象来存放组的名称及其所有生产线：

```
public abstract class ProductionLineGroup<T> where T : ProductionLine
{
    public string Name { get; set; }
    public List<T> ProductionLines { get; set; }
} 
```

这是一个组的具体实现：

```
public class TissueProductionLineGroup : ProductionLineGroup<TissueProductionLine>
{
    public string TissueType { get; set; }

} 
```

一切都很好，但我希望能够将生产线组呈现为 HTML 作为一系列表格。为了分离我的关注点，我创建了将使用组并发出所需标记的格式化程序。使用工厂，我将选择适当的格式化程序：

```
public static class ProductionLineGroupFormatterFactory<T> where T : ProductionLine
{
    public static ProductionLineGroupFormatter<T> GetProductionLineGroupFormatter(ProductionLineGroup<T> group)
    {
        if (typeof(T) == typeof(TissueProductionLineGroup))
        {
            return new TissueProductionLineGroupFormatter<T>();
        }
        throw new ApplicationException("Could not find an appropriate formatter for this Production Line type:" + typeof(T).ToString());
    }
} 
```

工厂方法返回一个基类型为 ProductionLineGroupFormatter 的对象：

```
public abstract class ProductionLineGroupFormatter<T> where T : ProductionLine
{
    public abstract string Render(ProductionLineGroup<T> group);
} 
```

实际进行渲染的派生类型是 TissueProductionLineGroupFormatter：

```
public class TissueProductionLineGroupFormatter<T> : ProductionLineGroupFormatter<T> where T : ProductionLine
{
    public override string Render(ProductionLineGroup<T> group)
    {
            foreach (ProductionLine line in group.ProductionLines)
            {
                TissueProductionLine tLine = (TissueProductionLine)line;
                sb.Append(@"<tr>
                                <td>" + tLine.Name + @"</td>
                                <td>" + tLine.Actual + @"</td>
                                <td>" + tLine.Target + @"</td>
                                <td>" + tLine.Variance + @"</td>
                                <td>" + tLine.PercentOnTarget + @"</td>
                        </tr>");
            }
        }
        return sb.ToString();
    }
} 
```

请注意我需要在我的 foreach 循环中进行的演员表。我不知道是否可以避免它。我最初试图将 T 限制为 TissueProductionLine，因为它是从 ProductionLine 派生的，但我收到错误消息“没有从 'T' 到 'TissueProductionLine' 的隐式引用转换。然后我尝试创建一个隐式运算符，以便可以进行转换在 ProductionLine 和 TissueProductionLine 之间创建，但您不能对基本类型和派生类型执行此操作。

如果有人能对此有所了解，我将不胜感激满足我的好奇心！谢谢！

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:20:20.670

你应该能够做到这一点：

```
public class TissueProductionLineGroupFormatter : 
  ProductionLineGroupFormatter<TissueProductionLine> {
  ...
} 
```

**更新**

对于工厂，您可以实现特定于类型的方法，而不是使用条件逻辑来测试类型：

```
public static class ProductionLineGroupFormatterFactory {
  public static ProductionLineGroupFormatter<TissueProductionLine> GetProductionLineGroupFormatter(ProductionLineGroup<TissueProductionLine> group) {
    return new TissueProductionLineGroupFormatter();
  }
  // .. other factory methods....
} 
```

也许您可以创建更好的命名方法，这将消除对参数的需求：

```
public static class ProductionLineGroupFormatterFactory {
  public static ProductionLineGroupFormatter<TissueProductionLine> GetTissueProductionLineGroupFormatter() {
    return new TissueProductionLineGroupFormatter();
  }
  // .. other factory methods....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:12:56.023

如果你让你的类实现这个接口，并让你的工厂返回一个`IProductionLineGroupFormatter<T>`，这应该可以工作。

```
public interface IProductionLineGroupFormatter<out T> where T : ProductionLine
{
    public string Name { get; set; }
    public IEnumerable<T> ProductionLines { get; set; }
} 
```

就像 Jordão 的解决方案一样：

```
public class TissueProductionLineGroupFormatter : 
  ProductionLineGroupFormatter<TissueProductionLine>, IProductionLineGroupFormatter<TissueProductionLine> {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:42:34.607

我会这样做：

```
public abstract class ProductionLineGroupFormatter<T> where T : ProductionLine 
{ 
    public string Render(ProductionLineGroup<T> group) 
    { 
        foreach (T line in group.ProductionLines) 
        { 
            AppendProductionLine(line);
        } 
        return sb.ToString(); 
    }
    protected abstract void AppendProductionLine(T line);
} 

public class TissueProductionLineGroupFormatter : ProductionLineGroupFormatter<TissueProductionLine>
{ 
    protected override void AppendProductionLine(TissueProductionLine line)
    { 
        sb.Append(@"<tr> 
                        <td>" + line.Name + @"</td> 
                        <td>" + line.Actual + @"</td> 
                        <td>" + line.Target + @"</td> 
                        <td>" + line.Variance + @"</td> 
                        <td>" + line.PercentOnTarget + @"</td> 
                </tr>"); 
    } 
} 
```

# php - 在 PHP 数组中检索和存储 XML 属性

> ID：12306010
> 
> 赞同：0
> 
> 时间：2012-09-06T18:14:54.540
> 
> 标签：php, xml

我在 PHP 变量中有一个这样的 XML 字符串。此字符串是通过使用 PHP 中的 nusoap 对服务的 REST 请求生成的

```
<exception name="xyz.TestException" message="Invalid Username.jake"/> 
```

如何使用 PHP 检索数组中的 XML 字符串属性，以便将它们用于消息传递？

```
Ex: The result PHP array should look like this.
$attrArray = array();
$attrArray["name"]= "xyz.TestException" 
$attrArray["message"] = "Invalid Username.jake" 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:39:54.707

你可以这样做，不是很干净：

```
 $string = '<exception name="xyz.TestException" message="Invalid Username.jake"/>';

    $parser = new SimpleXMLElement($string);
    $attrs  = array();
    // Convert attributes to string
    foreach($parser->attributes() as $key => $value)
            $attrs[$key] = "$value"; // Object to string conversion using quotes

    print_r($attrs); 
```

您还可以直接更干净地访问`$parser["name"]`和`$parser["message"]`.

# jquery - 如何在某个元素之前获取类的元素数量

> ID：12306013
> 
> 赞同：2
> 
> 时间：2012-09-06T18:14:56.490
> 
> 标签：jquery

我想知道在单击某个元素之前某个类的多少元素出现在 DOM 中。

```
<html>
  <div class="a">
  </div>
  <div class="b">
      <div class="a">
      </div>
  </div>
  <button>CLick me!</button>
  <div class="a">
  </div>
</html> 
```

所以在前面的 DOM 树中，如果要单击的元素是按钮，并且我正在寻找具有类“a”的 div，它应该返回 2，即使在整个树中有 3 个，但“之前”按钮只有2.

我怎么能那样做？

谢谢

[编辑] 元素的搜索从 DOM 树的开头开始，直到被点击的元素。不要假设元素是单击元素的兄弟姐妹的结构，它可以具有任何类型的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:23:51.803

获取所有先前的节点匹配`.a`，然后获取所有先前节点的后代匹配`.a`并相加：

```
var count = $('button').prevAll( '.a' ).length;
count += $('button').prevAll().find('.a').length;
console.log( count ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:26:41.837

您可以使用[.not()进行过滤](http://api.jquery.com/not/)

```
$('button').click(function(){
    var $this = $(this);
    console.log(
             $('.a')
                   // get all with class=a not including all after..descendants after  
                   .not($this.nextAll('.a'), $('.a',$this.nextAll('*')))
                   // get number of elements returned
                   .length
     );

});​ 
```

[http://jsfiddle.net/Gz9v2/](http://jsfiddle.net/Gz9v2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:24:04.847

试试这个，获取与类匹配的所有 prev 元素，然后是与类匹配的那些 prev 元素的所有子元素。

```
$("button").click(function() {
    var prev = $(this).prevAll(this.className);
    console.log( prev.length + prev.find(this.className).length );
}); 
```

虽然没有测试。

# javascript - jquery.inArray() 函数不起作用

> ID：12306015
> 
> 赞同：0
> 
> 时间：2012-09-06T18:15:09.703
> 
> 标签：javascript, jquery

我有一个数组如下

```
 var nameIDHashMap = [];
       nameIDHashMap.push({
            key: name,
            value: xmlLength
       });
     startToEnd.push({
          key: $(this).attr("startFrom"),
          value: $(this).attr("endTo")
    }); 
```

我正在尝试使用如下所示的 inArray() 函数

```
 var variablestart = startToEnd[0].key;
            alert("The variable Start is :"+variablestart);
            var toEnd;
            if(jQuery.inArray(variablestart,nameIDHashMap) > -1) {
                alert('found');
            }
            if ($.inArray(variablestart, nameIDHashMap) != -1) 
            {
                alert("Found");
            //  toEnd = startToEnd[connectWindow].value
            }
            else
                alert("Fail"); 
```

我不知道为什么总是调用 else 循环。没有一个 if 循环被调用。两个数组都存在相同的键。请让我知道我在哪里做错了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:20:47.600

`variablestart`是数组中元素的属性，而不是数组中的元素。

```
var nameIDHashMap = [];
nameIDHashMap.push({
    key: 'foo',
    value: 'bar'
});

$.inArray(nameIDHashMap[0].key, nameIDHashMap); // this is not an element, -1
$.inArray(nameIDHashMap[0], nameIDHashMap); // this is an element, 0 
```

您实际上是在尝试将 object 等同于`{ key: 'foo', value: 'bar' }`string `'foo'`，它们不相等。

[http://jsfiddle.net/jbabey/kgYSe/](http://jsfiddle.net/jbabey/kgYSe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:19:53.193

这不是如何`.inArray()`工作的。它搜索等于您传入的值的数组元素。它没有任何比较函数的规定。

即使它确实有效，您在那里组装的也不是“哈希表”。如果你想通过键进行有效的查找，你可以在一个简单的对象上创建命名属性：

```
var map = {};
map.someKey = someValue; 
```

该`.inArray()`方法及其类似方法在数组中执行线性时间搜索，如果您要拥有“有趣”数量的键/值对，这不是一种非常有效的方法。

*编辑*——如果你真的必须保持一个命名属性的线性未索引列表，你可以使用这样的查找函数：

```
function find( list, key, test ) {
  test = test || function(e) { return e ? e.key == key : false; };

  for (var i = 0; i < list.length; ++i)
    if (test(list[i])) return i;
  return -1;
} 
```

要使用它，您只需执行以下操作：

```
if (find(nameIDHashMap, someKey) >= 0) {
  alert("Found!");
} 
```

# ruby - Ruby 中的 if 语句冲突

> ID：12306016
> 
> 赞同：1
> 
> 时间：2012-09-06T18:15:11.157
> 
> 标签：ruby, if-statement, ide, ruby-1.8.7, puts

我尝试在支持 Ruby 1.8.7 的在线 IDE 中运行此代码，但`elsif`无法识别该语句；例如，如果我输入“85”，它仍然会返回“Over-Weight”。

```
def prompt
 print ">> "
end

puts "Welcome to the Weight-Calc 3000! Enter your weight below!"

prompt; weight = gets.chomp()

if weight > "300" 
 puts "Over-weight"
elsif weight < "100"
 puts "Under-weight"
end 
```

但是，当我运行以下命令时，它工作得很好：

```
def prompt
 print ">> "
end

puts "Welcome to the Weight-Calc 3000! Enter your weight below!"

prompt; weight = gets.chomp()

if weight > "300" 
 puts "Over-weight"
elsif weight > "100" && weight < "301"
 puts "You're good."
end 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:18:20.887

问题是您尝试比较从左到右评估的字符串，而不是数字。

将它们转换为整数（或浮点数），并进行比较。

```
weight = Integer(gets.chomp())

if weight > 300
 puts "Over-weight"
elsif weight < 100
 puts "Under-weight"
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T18:18:40.803

和

```
if weight > "300" 
```

您正在比较两个字符串。

它应该是

```
if weight.to_i > 300 
```

# tomcat - 提供静态内容 GlassFish

> ID：12306021
> 
> 赞同：4
> 
> 时间：2012-09-06T18:15:28.847
> 
> 标签：tomcat, servlets, glassfish, war, web.xml

我希望 GlassFish 提供我在项目的 war 文件中插入的静态内容（jpg、css、js）。

我将默认的 servlet 与 tomcat 一起使用，它可以工作。这是 web.xml 中的声明：

```
<servlet>
  <servlet-name>DefaultServlet</servlet-name>
  <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>DefaultServlet</servlet-name>
  <url-pattern>/images/*</url-pattern>
  <url-pattern>/css/*</url-pattern>
</servlet-mapping> 
```

我找到了一些说明如何操作的帖子，但都指使用保存静态内容的外部目录。就我而言，我希望内容在战争中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:55:27.663

您可以将图像和 css 存储在 Web-Inf 文件夹中，并使用 getServletContext 来使用内容。

# xml - XML 语法问题

> ID：12306024
> 
> 赞同：0
> 
> 时间：2012-09-06T18:15:51.747
> 
> 标签：xml, syntax, syntax-error

我在尝试编译 URL 的 XML 代码时产生了一个错误。代码是这样的：

```
<href>http://ezproxy.uis.edu:2048/login?url=http://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=27h</href> 
```

编译器告诉我，我需要在配置文件后加一个分号——但这会破坏 URL。通常，这不会是一个问题（其他 URL 工作正常），但有相当多的 URL 采用这种格式。我能做些什么来修复它？另外，我对 XML 还很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:18:29.177

`&`在 XML 中必须编码为`&amp;`. 否则，之后的任何内容都将被视为使用实体的错误尝试。

# python - py2app 无法加载扩展

> ID：12306030
> 
> 赞同：0
> 
> 时间：2012-09-06T18:16:39.537
> 
> 标签：python, sqlalchemy, py2app

在构建使用 sqlalchemy 的应用程序时，出现此错误：

```
creating python loader for extension 'sqlalchemy.cprocessors'
error: /Users/paul/Source/Python/build/bdist.macosx-10.6-intel/python2.7-standalone/app/temp/sqlalchemy/cprocessors.py: No such file or directory 
```

我查看了站点包，没有 cprocessors.py，而是 cprocessors.so - 所以它可能只是在寻找错误的扩展名

我尝试添加`"sqlalchemy.cprocessors"`到 py2app 中的包含列表，但这没有帮助。

我想知道我是否可以通过在构建时将一个空的 cprocessors.py 放入其中来愚弄它，然后将其换成 so，但我确信有更好的方法，我不相信它甚至可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:24:14.223

一段时间后我解决了这个问题。

该错误是由于在同一个构建脚本中多次调用 setup 以及构建之间的状态泄漏引起的。

解决方案是通过设置 py2app 选项`bdist_base`和`dist_dir`

```
OPTIONS = {
    ...
    "bdist_base": os.path.join("build",APP_NAME),
    "dist_dir": os.path.join("dist",APP_NAME)
}

setup(
    ...
    options={"py2app": OPTIONS}
    ...
) 
```

# java - 当我们清除日期时，struts2 datetimepicker 中的所有日期都被 NaN 替换

> ID：12306031
> 
> 赞同：0
> 
> 时间：2012-09-06T18:16:42.807
> 
> 标签：java, struts2, datetimepicker, nan

当我们在 Struts2 datetimepicker 中清除日期时，它会显示一个日历，所有日期和年份都被 NaN 替换，月份被 undefined 替换。

我正在使用 struts2-dojo-plugin 2.1.6 这是我的代码

```
<sx:datetimepicker name="application.openDate" id="opendate" displayFormat="MM/dd/yyyy" cssClass="body_1"/> 
```

如何解决这个问题？

# c# - Linq to entity - 2个键之间的字符串的第一个字母

> ID：12306034
> 
> 赞同：3
> 
> 时间：2012-09-06T18:17:11.247
> 
> 标签：c#, linq, entity-framework

我正在使用实体框架，并且遇到了对某些扩展缺乏支持的问题。

我有 2 个键（均为 char）`fromKey`，`toKey`并且正在寻找构建一个`Where`语句，该语句将搜索 的列表`Stores`，并选择第一个字母在和`Store.Name`之间的位置。`fromKey``toKey`

`string[0]`不工作，`Substring`不工作 - 有人知道如何解决这个问题吗？

子字符串方法的代码：

```
public static IQueryable<Store> FindActiveByName()
{
    var r = new ReadRepo<Store>(Local.Items.Uow.Context);

    Tuple<string, string> range = Tuple.Create("0", "9");
    return r.Find().Where(s => range.Item1 <= s.Name.Substring(0, 1) &&
                               s.Name.Substring(0, 1) <= range.Item2);
} 
```

给我一个错误：

> 运算符 <= 不能应用于字符串

更新

Anwser 由 nemesV 提供

```
 public static IQueryable<Store> FindActiveByName()
    {
        Tuple<char, char> range = Tuple.Create('R', 'S');

        var r = new ReadRepo<Store>(Local.Items.Uow.Context);

        var keys = Enumerable
            .Range(range.Item1, (int)range.Item2 - (int)range.Item1 + 1)
            .Select(k => ((char)k).ToString());

        return r.Find(s => keys.Contains(s.Name.Substring(0, 1)));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:51:37.843

我手头没有 EF，所以也许这也不起作用，但您可以尝试以下解决方法：

首先生成一个带有`from` `to`字母的字符串。然后您可以使用`Contains`检查 的第一个字符是否`Name`在生成的字母中：

```
public static IQueryable<Store> FindActiveByName()
{
    var r = new ReadRepo<Store>(Local.Items.Uow.Context);

    Tuple<char, char> range = Tuple.Create('0', '9');

    var letters = Enumerable
                     .Range(range.Item1, (int)range.Item2 - (int)range.Item1 + 1)
                     .Select(x => ((char)x).ToString()

    return r.Find().Where(s => letters.Contains(s.Name.Substring(0, 1)));
} 
```

或者您有明显的解决方法：

*   用 SQL 编写查询（EF 有 API 可以执行任意查询并构建实体）
*   在这将强制查询评估`.ToArray()`之前插入一个，比较将在客户端完成。`Where``Name.Substring`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:31:01.350

你可以尝试这样的事情：

```
string[] data = { "Alex", "Bob", "John", "Danny", "Roy" };
char fromKey = 'A', toKey = 'D';
var query = data.Where(d => (int)d.First() >= (int)fromKey && (int)d.First() <= (int)toKey); 
```

查询包含`Alex, Bob and Danny`

它只是一个例子。您可以根据需要进行更改。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:08:23.527

您的代码实际存在的唯一问题是 .NET`string`类没有重载`<=`和`>=`运算符。因此，代码无法编译（它与实体框架无关）。`string.CompareTo`您可以使用以下方法代替运算符：

```
public static IQueryable<Store> FindActiveByName()
{
    var r = new ReadRepo<Store>(Local.Items.Uow.Context);

    Tuple<string, string> range = Tuple.Create("0", "9");
    return r.Find().Where(s => 
        range.Item1.CompareTo(s.Name.Substring(0, 1)) <= 0 &&
        s.Name.Substring(0, 1).CompareTo(range.Item2) <= 0);
} 
```

这将编译并使用 Entity Framework 并创建此 SQL：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
FROM [dbo].[Stores] AS [Extent1]
WHERE (@p__linq__0 <= (SUBSTRING([Extent1].[Name], 0 + 1, 1)))
  AND ((SUBSTRING([Extent1].[Name], 0 + 1, 1)) <= @p__linq__1) 
```

这两个 SQL 参数将设置为您传入的值`p__linq__0`以及执行查询的时间。`p__linq__1``"0"``"9"`

# java - 如何删除列及其基础数据而不将其隐藏在 jtable 中

> ID：12306042
> 
> 赞同：0
> 
> 时间：2012-09-06T18:17:29.810
> 
> 标签：java, swing, jtable

我在删除要删除的特定列下的实际数据时遇到困难。我实际上想删除该列及其基础数据。我可以插入新列，但是当我删除并再次插入时，我之前删除的旧列会再次弹出。

任何形式的帮助表示赞赏。

预先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:41:04.227

数据存储在`TableModel`.

从 中删除列`ColumnModel`只会阻止视图（`JTable`）显示它。

为了删除它，您还需要告诉`TableModel`删除列数据。

根据您的实施，您可以使用`JTable.setValueAt(value, row, column)`or `TableModel.setValueAt(value, row, column)`，哪个更方便。

这当然假设您已经实现了该`setValueAt`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:19:41.323

public void removeColumnAndData(JTable table, int vColIndex) { MyTableModel model = (MyTableModel)table.getModel();

```
 TableColumn col =table.getColumnModel().getColumn(vColIndex);
     int columnModelIndex = col.getModelIndex();
     Vector data = model.getDataVector();
     Vector colIds = model.getColumnIdentifiers();

  // Remove the column from the table
     table.removeColumn(col);

  // Remove the column header from the table model
     colIds.removeElementAt(columnModelIndex);

  // Remove the column data
     for (int r=0; r<data.size(); r++) {
        Vector row = (Vector)data.get(r);
        row.removeElementAt(columnModelIndex);
     }
     model.setDataVector(data, colIds);

  // Correct the model indices in the TableColumn objects
  // by decrementing those indices that follow the deleted column
     Enumeration<TableColumn> enum1 = table.getColumnModel().getColumns();
     for (; enum1.hasMoreElements(); ) {
        TableColumn c = (TableColumn)enum1.nextElement();
        if (c.getModelIndex() >= columnModelIndex) {
           c.setModelIndex(c.getModelIndex()-1);
        }
     }
     model.fireTableStructureChanged();
  } 
```

/ ******* *MyDefaultTableModel 类******* /

```
 class MyTableModel extends DefaultTableModel
  {
     String columns[];
     int size;

      public MyTableModel(String col[],int size)
     {
        super(col,size);
        columns = col;
        this.size=size;
     }

      public Vector getColumnIdentifiers()
     {
        return columnIdentifiers;
     }
  } 
```

# javascript - 将文本输入验证为数字 - JavaScript

> ID：12306048
> 
> 赞同：0
> 
> 时间：2012-09-06T18:17:43.497
> 
> 标签：javascript, numbers, validation

我正在尝试验证用户输入以确保他们输入的内容（如果有的话 - 不需要字段）是一个数字。现在我不在乎这个数字是多少，但它必须是一个整数。消极的，积极的，无论以后验证什么。到目前为止，这是我的测试样本：

```
var a=["",0,"0",-2,"-2",2,"2",-2.2,"-2.2",2.2,"2.2",-1,"-1",undefined,null,NaN,Infinity,-Infinity],x;

for(x=0;x<a.length;x++){
    console.log(a[x],(isNaN(+a[x]) || Math.round(+a[x]) != +a[x] || +a[x] === null || +a[x]+1==+a[x])?false:true);
} 
```

如果您在控制台中运行它，它会为 a 中将通过验证的任何元素显示为 true，否则为 false。此验证在 Chrome 中按预期工作（`false`显示所有小数，以及`undefined`以后的所有内容。

我的问题是，这是否适用于所有主要浏览器（包括 IE 6+），并且我是否已针对所有可能的输入进行了全面检查？

作为说明：

*   `+`用于`a[x]`类型转换（以及修剪字符串 -`" 2 "`被转换为`2`.

*   最后一项检查`+a[x]+1===+a[x]`是针对`(+/-)Infinity`.

谢谢 ：） 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:41:52.160

试试这个功能

```
function is_int(value){
   if((parseFloat(value) == parseInt(value)) && !isNaN(value)){
      alert("Is an Integer");
     } else {
      alert("Is not an Integer");
     }
   }

is_int(1); //Output - Is an Integer
is_int("a"); //Output - Is not an Integer 
```

# javascript - 单击事件以在 IE 中为 Raphael Path Broken 设置动画

> ID：12306051
> 
> 赞同：1
> 
> 时间：2012-09-06T18:17:49.310
> 
> 标签：javascript, jquery, dom, raphael

我已经创建了一个 Raphael 文档，并且正在存储这样的位置：

```
 var R = Raphael("paper", 600, 500);
  var attr = {
      fill: "#fff",
      stroke: "#fff",
      "stroke-width": 1,
      "stroke-linejoin": "round"
  }; 
```

-- 从分配给`object`'ausData' 的 db 中获取坐标并创建一个`object`'aus' --

```
$.each(ausData,function(i,obj) {
  attr.fill = myData[i].color;
  aus[i] = R.path(obj).attr(attr);
  aus[i].id = myData[i].id;
  mapIdObj[stateData[i].id] = R.getById(stateData[i].id);//aus[i].id;
}); 
```

所以路径对象存储在对象mapIdObj中

然后我试图通过单击链接来更改路径对象。在 .success 中，`jQuery.post.success`我遍历所有元素，并将锚标记附加到页面，然后`jQuery.post.complete`尝试绑定单击：

```
$('#superHappyDiv').append('<a id="button'+st.id+'" class="superButton" name="button'+st.id+'" ref="'+st.id+'" class="" href="javascript:;" title="" target="">x</a>');

$('.superButton').live('click onmousedown',function() {
  if (window.console) console.log($(this).attr('ref'));
  var thisPath = mapIdObj[$(this).attr('ref')];
  thisPath.animate({ 'transform': 's2', opacity: .9 }, 300, "<>");
}); 
```

其他[答案](https://stackoverflow.com/questions/8461716/adding-ids-to-raphael-objects "答案")指出这是有效的，它确实有效，但至少在 IE 7 和 8 中没有！

有没有更有效的方法可以让这个工作，或者在 IE 中工作？！

干杯，博

# asp.net - 在 WebForm 标签中转义 HTML 实体并避免 HTML 注入？

> ID：12306053
> 
> 赞同：7
> 
> 时间：2012-09-06T18:17:57.303
> 
> 标签：asp.net, webforms, escaping, html-entities

所以，我认为我是一个“资深”的 ASP.NET WebForms 开发人员；但是，我最近遇到了这个问题，并且（不愉快地）对输出*没有*转义感到惊讶：

```
<asp:Label Text='<%# Eval("UserData") %>' runat="server" /> 
```

成像 Eval 返回的位置`"<h1>joke is on you"`或对页面的正确呈现/安全性更有害的东西。

存在标签而不是`<%# %>`直接标签的原因是，正如*错误地假定*的那样，“UserData”的内容将被正确地转义为 HTML。然而，这显然*不是*这种情况，上述场景导致在`<h1>`HTML 标记中创建元素。

那么问题可以提炼为：

**给定任意用户输入，即显示为“纯文本”，将数据插入页面（跨度）并正确转义的简单/可靠/安全方法是什么？**

如上所述，它应该在数据绑定控件的上下文中运行。我知道[HttpUtility.HtmlEncode](https://stackoverflow.com/questions/1005264/escape-text-for-html)，但我*想*考虑仍然使用控件的想法 - 也许我错过了这个任务的标准控件 - 来安全地表示这种情况，而不需要包装`Eval`. 如果这是基于逻辑或经验的误导，最好将其包含在回复中。我不会否认我在这种情况下使用 Label 是完全不合适的。

不幸的是，由于需要在 SharePoint 2010 上下文中运行，我将 ASP.NET 用于 .NET 3.5，而*不是*ASP.NET 4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:26:30.847

关于什么：

```
<asp:Label Text='<%#: Eval("UserData") %>' runat="server" /> 
```

这会转义 eval 的输出，这仅适用于 .NET 4。

对于 .NET 3.5，解决方案可以是：

代码隐藏：

```
public object EvalEncode(object container, string expression)
{
  string ouput = DataBinder.Eval(container, expression).ToString();
  return HttpUtility.HtmlEncode(ouput);
} 
```

标记：

```
<%# EvalEncode(Container.DataItem, "Text") %> 
```

与其使用`HttpUtility.HtmlEncode`，不如使用 AntiXSS 库。对于 .NET 4 用户，它已经支持到框架中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T19:27:41.163

您可以使用`<asp:Literal ...></asp:Literal>`控件而不是标签。文字有一个`Mode`属性，您可以使用它来告诉控件对其输出进行 html 编码。

而不是这个：

```
<asp:Label Text='<%# Eval("UserData") %>' runat="server" /> 
```

尝试使用：

```
<asp:Literal Text='<%# Eval("UserData") %>' Mode="Encode" runat="server"></asp:Literal> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:28:13.057

为此，请使用 microsoft 提供的[Microsoft Web Protection Library （Anti-XSS library）。](http://wpl.codeplex.com/)

安全很难，不要试图自己做。总有一些更聪明的黑客。

您可以按如下方式使用它：

```
<asp:Label Text='<%= Microsoft.Security.Application.AntiXss.HtmlEncode(Eval("UserData")) %>' runat="server" /> 
```

# android - 需要在android中将listitem的背景从getView()中更改出来

> ID：12306061
> 
> 赞同：0
> 
> 时间：2012-09-06T18:18:30.007
> 
> 标签：android, listview, background

我有列表视图。通过适配器设置列表项时，我在 getView() 中为特定位置的项目设置了背景。当我单击列表项时，我需要为该项目设置背景，并删除我在适配器类的 getView() 中设置的项目的背景。我已经实现了在单击列表项时设置背景。但我无法删除我在 getView() 中设置的背景。我没时间了。需要帮忙。

列表点击：

```
View lastView;

     lv_school.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> pa, View v, int pos,long row1) {
    if(lastView==null){                       
    v.setBackgroundResource(R.drawable.list_selected);                      
    lastView=v;
    }
    else{
    lastView.setBackgroundColor(Color.WHITE);                          
    v.setBackgroundResource(R.drawable.list_selected);
                                lastView=v;
                                }

                        }
                    }); 
```

我的适配器类是：

```
public class SchoolAdapterSetting extends BaseAdapter {
            private Activity activity;
            List<String>data=new ArrayList<String>();
            private LayoutInflater inflater = null;
            public SchoolAdapterSetting(Activity a, List<String> school_name_List) {
                // TODO Auto-generated constructor stub
                activity = a;
                data = school_name_List;

                inflater = (LayoutInflater) activity
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return data.size();
            }

            @Override
            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return position;
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return position;
            }

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                View vi = convertView;

                    vi = inflater.inflate(R.layout.school_item, null);
                final TextView info = (TextView) vi.findViewById(R.id.schl_text);
                Typeface type1 = Typeface.createFromAsset(getAssets(),"CORBEL.TTF"); 
                info.setTypeface(type1);
                if(position==5)
                {
                    info.setBackgroundResource(R.drawable.list_selected);
                    pressedView=vi;
                }
                info.setText(data.get(position));
                return vi;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:16.983

> 我没时间了。需要帮忙。

Stack Overflow 永远不应该是你最后一次寻求帮助的尝试，这看起来很像*家庭作业*，你的问题应该有`homework`标签。

无论如何，您`getView()`的效率非常低下。请观看 Android 的[Romain Guy 解释适配器和 getView()](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。但它确实有效。

* * *

**解决您当前的问题：**我注意到`pressedView`保存为第一个“选定”行，只要您`pressedView`这样声明：

```
public class SchoolAdapterSetting extends BaseAdapter {
    public View pressedView;
    ... 
```

那么解决方案很简单：

```
if(lastView==null){
    ((SchoolAdapterSetting) pa.getAdapter()).pressedView.setBackgroundColor(Color.WHITE)
    v.setBackgroundResource(R.drawable.list_selected);                      
    lastView=v;
}
else{
    lastView.setBackgroundColor(Color.WHITE);                          
    v.setBackgroundResource(R.drawable.list_selected);
    lastView=v;
} 
```

中提琴！

* * *

**专业提示：**
您是否注意到每个 if-else 块中的三行中有两行是相同的？你可以把它们拉出来。

如果您在初始化适配器后立即设置`pressedView`为：`lastView`

```
SchoolAdapterSetting adapter = new SchoolAdapterSetting(...)
lastView = adapter.pressedView; 
```

那么您可以完全删除 if-else ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:06:28.440

我只是想通了。我使用清除列表项`lv_school.setAdapter(null);`并再次调用适配器。这是我的代码。

```
 lv_school.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> pa, View v, int pos,
                            long row1) {

                        lv_school.setAdapter(null);
                        schl_adapter = new SchoolAdapterSetting(Setting.this,
                                school_name_List, pos);
                        lv_school.setAdapter(schl_adapter);
                        schl_adapter.notifyDataSetChanged();
                        lv_school.setSelection(pos);
                        spinner_selected_school_name = school_name_List.get(pos);
                        spinner_selected_school_id = schooltagid_List.get(pos);

                    }
                });

public class SchoolAdapterSetting extends BaseAdapter {
        private Activity activity;
        public View pressedView;
        private int highlight_pos;
        List<String> data = new ArrayList<String>();
        private LayoutInflater inflater = null;

        public SchoolAdapterSetting(Activity a, List<String> school_name_List,
                int pos) {
            // TODO Auto-generated constructor stub
            activity = a;
            data = school_name_List;
            highlight_pos = pos;
            inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return data.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView( int position, View convertView,
                ViewGroup parent) {
            View vi = convertView;

            vi = inflater.inflate(R.layout.school_item, null);
            final TextView info = (TextView) vi.findViewById(R.id.schl_text);
            Typeface type1 = Typeface
                    .createFromAsset(getAssets(), "CORBEL.TTF");
            info.setTypeface(type1);
            if (position == highlight_pos) {
                info.setBackgroundResource(R.drawable.list_selected);
            }
            info.setText(data.get(position));
            return vi;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:39:34.060

您可以通过调用`V.setBackgroundResource(0)`视图来删除背景。

我遇到了类似的情况，因此设计了一个解决方案来满足我的需求。检查一下，可能对你有帮助。[链接到我的答案](https://stackoverflow.com/a/12132156/398802)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:28:35.723

我想做类似的事情并开发了自己的逻辑来实现它。我的代码用于突出显示当前选定的 ChildView，如果您看到代码，您可以为 ParentView 和 ChildViews 实现它。

```
 public int _groupPosition = -1;
    View _lastColored;
    private int _highlightedGroup = -1;
    private int _highlightedChild;

    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {

        _groupPosition = groupPosition;
        _highlightedGroup = groupPosition;
        _highlightedChild = childPosition;
        if (_lastColored != null) {
            _lastColored.setBackgroundColor(Color.TRANSPARENT);
        }
        _lastColored = v;
        v.setBackgroundColor(Color.rgb(214, 214, 214)); // whatever colour you want to set
             ..... // your code here
} 
```

**注意：**以上代码适用于 ExapandableListView，但我相信您可以根据自己的要求对其进行修改。

无需在 XML 文件中使用任何选择器。这段代码完成了所有工作。祝你好运！

# r - 从 R 中的向量中提取值

> ID：12306063
> 
> 赞同：-8
> 
> 时间：2012-09-06T18:18:34.320
> 
> 标签：r

我有一个包含大量条目的向量（380）。我想绘制一个值的图表，但要做到这一点，我需要提取每个值的频率。例如，在向量 (1,2,2,3,4) 中，数字 1、3 和 4 出现一次，数字 2 出现两次。我应该怎么做才能获得这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:21:04.793

该功能`table`是您的朋友：

```
plot(table(myvector)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:25:32.700

请注意，如果您想处理输出并进行进一步的操作，可以用 as.data.frame 将其括起来以获取数据帧。

```
df <- as.data.frame(table(myvector)) 
```

**编辑添加** 正确，您必须创建一个新对象才能对其进行操作，如下面的评论所述。

# php - 简单的 PHP 回显不起作用？

> ID：12306068
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:18:48.300
> 
> 标签：php, function, echo

我的代码有问题。我很确定它与引用有关。让我演示一下。

这工作正常：

```
<?php if ( $is_latest_post ) echo '
hello world
'; ?> 
```

这不起作用：

```
<?php if ( $is_latest_post ) echo '
<a class="recent<?php $category = get_the_category(); echo $category[0]->category_nicename; ?>" href="<?php bloginfo('url'); ?>/<?php echo $category[0]->category_nicename; ?>"><?php echo $category[0]->cat_name; ?></a>
'; ?> 
```

为什么它不起作用？我可以改变什么来让它发挥作用？代码的`a class`一部分在`if ( $is_latest_post )`语句之外完美地工作。感谢我刚刚开始学习 PHP 编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:21:37.850

当您将字符串封装在单引号中时，它将将该字符串视为文字。PHP 不会解析您在该字符串中的代码。

你需要的是串联。点运算符`.`允许您将多个字符串混合在一起。

```
<?
if ( $is_latest_post ) {
    $category = get_the_category();
    echo '
    <a class="recent' . $category[0]->category_nicename . '" href="' . bloginfo('url') . '/'. $category[0]->category_nicename . '">' . $category[0]->cat_name . '</a>';
}
?> 
```

您可以将任意许多东西连接在一起。

```
<?
    $a = 1;
    $b = 2.0;
    $c = 'string';
    $d = function_call();

    $string = $a . $b . 'random text' . $c . $d;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:38:55.107

```
 <?
    if ( $is_latest_post ) {
        $category = get_the_category();
        echo "<a class=\"recent" . $category[0]->category_nicename . "href=\"" . bloginfo('url') . "/". $category[0]->category_nicename. "\">" .$category[0]->cat_name."</a>";
}
    ?> 
```

除了凯文的回答，我更喜欢使用双引号而不是单引号，并在需要时转义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:39:24.100

您不能在字符串文字中执行 php 代码。浏览器不会显示空标签，因为其中没有可呈现的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:33:24.373

您正在使用单引号作为初学者。这永远不会评估任何 php 代码 - 它只会打印出来。

**编辑**：如果 blogInfo() 返回一个字符串（返回 $somevar）然后使用下面的代码。

```
<?php

if ( $is_latest_post ) 
{
    $category = get_the_category(); 
    $template = '<a class="recent%s" href="%s/%s">%s</a>';
    $blogInfo = bloginfo('url');

    echo sprintf(
        $template,
        $category[0]->category_nicename,
        $bloginfo,
        $category[0]->category_nicename,
        $category[0]->cat_name
    );
}
?> 
```

如果 blogInfo() 在屏幕上回显数据（echo $somevar），则使用下面的代码。

```
<?php

if ( $is_latest_post ) 
{
    $category = get_the_category(); 
    $prefix   = '<a class="recent%s" href="';
    $suffix   = '/%s">%s</a>';

    echo sprintf(
        $prefix,
        $category[0]->category_nicename,
    );

    bloginfo('url');

    echo sprintf(
        $suffix,
        $category[0]->category_nicename,
        $category[0]->cat_name
    );
}
?> 
```

[sprintf](http://php.net/manual/en/function.sprintf.php)允许您在模板中“注入”一个变量。

我强烈建议您重新访问您的代码并尝试使其尽可能简单。在表示层（即回显）中有一堆赋值和函数调用将使您的代码非常难以理解和维护。

# c# - 来自fileuploader的C#文件路径无法被streamreader asp.net读取

> ID：12306072
> 
> 赞同：0
> 
> 时间：2012-09-06T18:18:53.197
> 
> 标签：c#, asp.net, relative-path, streamreader

遇到流作家的问题

我有一个网页，在登录视图中有一个 FileUploader 来访问它我正在使用

```
var fileuploader = (FileUpload)LoginView.FindControl("FileUploader");
string filepath =  System.IO.Path.GetFullPath(fileuploader.FileName.ToString()); 
```

然后我将该数据传递给我的流式阅读器（在不同的类中）

```
 using (StreamReader reader = File.OpenText(filename)) 
```

它传入的文件路径是 C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\sample.txt

我从 C:\fasta\sample.txt 中选择它

我看过一些关于这个的帖子，但不涉及 asp.net 应用程序。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:23:35.150

[**FileUpload**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)类允许**客户端上传/选择文件**。所以你能得到的只是一个**clientPath**。这样的路径对你来说是不需要的！因此，您可以做的是使用该`fileUpload.FileName`属性*并将其与其他路径相结合。*

```
var fileuploader = (FileUpload)LoginView.FindControl("FileUploader");
string filepath =  Path.Combine(Server.MapPath("."), fileuploader.FileName);
fileuploader.SaveAs(filePath); // will save the selected file on your server 
```

[**Server.MapPath(..)**](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)将虚拟路径（在服务器上）映射到服务器上的真实路径。调用它`"."`意味着此调用将返回*您的 webApplication 根目录*。无论如何，**在将文件上传到哪里时，您应该非常小心**！在最坏的情况下，有人上传了一个潜在的危险文件（例如 .aspx 扩展名）并且可以在您的服务器上执行代码！

此外，没有必要也*没有办法直接从服务器访问客户端的文件*。您只能在 HTTP 请求中获取这些项目。所以*selectedFile 已经在 Request 中了*，你可以直接把它保存到你的服务器硬盘上！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:28:51.583

我建议在 FileUpload 控件上使用 SaveAs 方法 (http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)。

请记住，该文件实际上是从网站上传给您的，并且您永远不会真正想关心它在客户端计算机上的位置（恰好服务器和客户端对您来说是同一台计算机） . 如果您从另一台计算机将文件上传到站点，则 Web 服务器将永远无法访问客户端路径上的资源。FileUpload 控件为您准备了文件，因此只需将文件放在您想要的位置，然后您就可以访问它并使用它做任何您想做的事情。

Cliffs：即使您获得了资源的客户端路径，您的服务器也无法对其执行任何操作，因为它位于您的服务器无权访问的另一台机器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:42:16.910

如果要上传文件：

**.aspx**

```
...
<asp:FileUpLoad id="FileUpLoad1" runat="server" />
... 
```

**代码隐藏**

```
...
if (FileUpLoad1.HasFile)
{
    FileUpLoad1.SaveAs(@"C:\temp\" + FileUpLoad1.FileName);
}
else
{
   // No file uploaded
}
... 
```

* * *

如果您想要文件路径，客户端在浏览器控件中设置的路径：

**你不能**。出于安全目的，浏览器永远不会发布完整文件的路径。

# c - 我该如何解决以下代码？

> ID：12306075
> 
> 赞同：-3
> 
> 时间：2012-09-06T18:19:04.880
> 
> 标签：c, function, recursion, operators

> **可能重复：**
> [什么是真正的递归并解释这个程序的输出？](https://stackoverflow.com/questions/11759397/what-is-recursion-really-and-explain-the-output-of-this-program)
> [这段代码到底发生了什么？](https://stackoverflow.com/questions/12265477/what-is-really-happening-in-this-code)

我有一个我不明白的递归函数。我什至不知道代码是否有效：

```
int count(int x) // suppose x is 3
{
  if(x>0)
  {
    count(--x);
    printf(x);
    count(--x);  // control reaches here or not?
  }
} 
```

这只是伪代码。取初始变量为3。请结合上下文解释堆栈的概念。这段代码让我困惑了好几天，我真的找不到这段代码的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:08:06.230

好的，只是因为我需要唤醒我的大脑一点:-)

`count(3)`将进入函数并调用`count(2)`（第 2 级）。
`count(2)`将进入函数并调用`count(1)`（3:rd 级别）。
`count(1)`将进入函数并调用`count(0)`（第 4 级）。
`count(0)`将进入函数，但由于`x>0`为假，它不会做任何事情，只是返回到`x`仍然为 0 的第 4 层。

**4:th level 将输出`0`, 并调用`count(-1)`(5:th level)**

`count(-1)`将进入函数，但由于`x>0`是假的，它不会做任何事情，只是返回到`x`仍然是 -1 的第 4 层。
4:th level 返回到 3:rd level`x`仍然是 1。

**3:rd level 将输出`1`和调用`count(0)`(4:th level)**

`count(0)`将进入函数，但由于`x>0`为假，它不会做任何事情，只是返回`x`仍为 0的
第 3 级。第 3 级返回`x`仍为 2 的第 2 级。

**2:nd level 将输出`2`和调用`count(1)`(3:rd level)**

`count(1)`将进入函数并调用`count(0)`（第 4 级）。
`count(0)`将进入函数，但由于`x>0`为假，它不会做任何事情，只是返回到`x`仍然为 0 的 3:rd 级别。

**3:rd level 将输出`0`和调用`count(-1)`(4:th level)**

`count(-1)` will enter the function, but since `x>0` is false, it won't do anything and just return to 3:rd level where `x`is still -1\.

3:rd level returns to 2:nd level where `x` is still 1.
2:nd level returns to 1:st level and we're done.

Output is `0 1 2 0`.

I suggest that if you really want to understand this, try it yourself with count(4).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:48:40.650

这个函数根本不会返回任何东西。在过去的几天里，我已经看到这个问题在这里发布了很多次。这是一些带有注释的工作代码，可帮助您理解：

```
/*function declaration so that the program can utilize it*/
int count(int x);

/*main routine that calls the function*/
int main(void)
{
    count(3);    //call the function
    return 0;
}      

/*function prototype*/
int count(int x)
{
    if(x > 0)
    {
         printf("%d", x - 1); //print the value of x - 1 to the screen 
         return count(--x);   //Have the function call itself again with a new argument (the value of x after being decremented)
    }
    return x;                 //x is no longer greater than 0 so return it's value
} 
```

请注意`return`此示例中的使用，并阅读其`return`作用。现在这只是一些更正的代码。理解递归函数在做什么（在我看来）的最好方法是将它写在纸上。

# coff - Microsoft Visual C 2010 Express：转换为 COFF 时失败：文件

> ID：12306080
> 
> 赞同：0
> 
> 时间：2012-09-06T18:19:31.373
> 
> 标签：coff

当我想制作构建解决方案时，我收到以下错误。

> LINK：致命错误 LNK1123：转换为 COFF 时失败：文件无效或损坏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:36:50.403

我正在使用 VS 2010 C++，但出现此错误。我在网上搜寻修复程序，最后做了什么（我应该更早做的是更新到 VS 2010 C++ SP1。希望这适用于您并有所帮助。

# azure - EF 与 Azure - 处理事务的推荐方式是什么？

> ID：12306091
> 
> 赞同：1
> 
> 时间：2012-09-06T18:20:20.390
> 
> 标签：azure, azure-sql-database

基本上我需要调用 DbContext.SaveChanges 几次，最后提交事务或回滚。它是一个基于 .NET 4.5 和 EF 5 的 MVC 应用程序，托管在 Windows Azure 上。

**-- 已编辑 --**

我发现 TransactionScope 在 Windows Azure 中运行良好，只要您只有一个连接（轻量级事务）。

我得到的异常是由于我在同一个事务中使用 DbContext 和 A Membership Provider 。

[我在这里开始了一篇新文章，其中包含更多详细信息和代码。](https://stackoverflow.com/questions/12321659/wrapping-membership-provider-and-dbcontext-on-single-transaction)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:32:21.783

您应该考虑使用 TransactionScope：

[TransactionScope 类](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

[在 ADO.NET Entity 框架中使用事务的简单方法](http://www.dotnetfunda.com/articles/article1690-simple-way-of-using-transactions-in-adonet-entity-framework.aspx)

# c# - 如何在 UserControl 中设置 ComboBox ItemsSource 的绑定？

> ID：12306092
> 
> 赞同：0
> 
> 时间：2012-09-06T18:20:38.227
> 
> 标签：c#, wpf, binding

这是我的用户控件中的组合框：

```
<Combobox ItemsSource="{Binding ComboItemsProperty}" /> 
```

我试过了：

```
Binding bind = new Binding();
bind.Mode = BindingMode.OneWay;
bind.Source = this;
bind.Path = new PropertyPath("ComboItemsProperty");
this.SetBinding(ComboBox.ItemsSourceProperty, bind); 
```

但是，这不起作用。我认为我在做 bind.Source 错误，但我不确定将 Source 设置为什么。此代码在我的 UserControl.xaml.cs 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:29:30.763

你可以试试（替换这个）

```
Binding bind = new Binding();
bind.Mode = BindingMode.OneWay;
bind.Source = yourCollectionSourceOrClass; //<--Replace with your collection
bind.Path = new PropertyPath("ComboItemsProperty");
this.SetBinding(ComboBox.ItemsSourceProperty, bind); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:29:31.880

您需要设置包含您的属性**ComboItemsProperty**的实例的上下文。因此，您应该将其设置为“this.DataContext”或其他包含您定义的 ItemSource 属性的类对象实例，而不是“this”。

试试这个，

```
Binding bind = new Binding();  
bind.Mode = BindingMode.OneWay;  
bind.Source = this.DataContext;  
bind.Path = new PropertyPath("ComboItemsProperty");  
this.SetBinding( ComboBox. ItemsSource Property, bind); 
```

（手机发帖）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T15:54:45.667

我已经尝试了很多方法来做到这一点，但是，似乎没有任何效果。

相反，当 .xaml 文件被保存时，我将序列化绑定。这似乎工作得很好。绑定将不再需要在代码中设置。

# javascript - 访问在子命名空间中定义的 javascript 对象和被导入 HTML 的 js 文件

> ID：12306094
> 
> 赞同：1
> 
> 时间：2012-09-06T18:20:51.440
> 
> 标签：javascript, javascript-namespaces

如何访问命名空间中的对象。1）我有一个导入脚本文件的 html

一个脚本定义命名空间应用程序，另一个脚本将对象附加到它

我如何访问对象并开始使用它

## 应用程序.js

```
var app = (function(jQuery){
    if (!jQuery) {
        alert(app.resources["MISSING_LIB"]);
        return null;
    }

    return {
        init: function() {
            //code for init the app related variables and subnamspaces
        }
    };
})(jQuery);

jQuery(document).ready(function(){
    app.init();
}); 
```

* * *

个人.js

```
function(app){
    if (app) {
        app.Cache = function(nativeStorage,serializer ) {
            this.storage = nativeStorage;
            this.serializer = serializer;
        }

        app.Cache.prototype = {
            setItem: function( key, value ){
                this.storage.setItem(key, this.serializer.stringify( value ));
                return( this );
            }
        };

        var personalcontentstorage = new app.Cache(localStorage,JSON);
    } else {
        alert("app is undefined!");
    }
})(app); 
```

* * *

## 我的html.html

```
<html>
<head>
<script src="${ '/js/app.js'" type="text/javascript"></script>
<script src="${ '/js/personal.js'" type="text/javascript"></script>
</head>
<body>

    <h1>
        Exploring HTML5's localStorage
    </h1>

    <script type="text/javascript">
        jQuery(document).ready(function(){
            personalcontentstorage.setItem("mykey","myValue") ;
        });
    </script>
</body>
</html> 
```

如何访问对象“personalcontentstorage”以便我可以使用它的方法。访问 hte 对象时出现未定义的错误。我无法按照上面写的方式访问对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:05.193

如果您在函数中定义变量，则该变量在函数外部不可见，例如

```
(function () {
    var foo;
}());

// foo is not visible here 
```

唯一随处可见的变量是*全局变量*（或者更准确地说，全局对象的属性，在浏览器的情况下是`window`）。这些可以通过三种方式定义：

1.  使用`var`，但不在函数内部：

    ```
    var foo;

    (function () {
        // foo is visible here
    }());

    // foo is also visible here 
    ```

2.  将变量显式附加到`window`对象：

    ```
    (function () {
        window.foo = 7;
    }());

    // foo is visible here 
    ```

3.  不要`var`在第一次为变量赋值时使用。这绝对是错误的做事方式：对于阅读您打算创建全局变量的代码的人来说，这并不明显。

全局变量具有各种风险和缺点。如果您在页面中包含第三方脚本，它们可能会使用相同的全局变量名称并干扰您自己的脚本。通常最好将您使用的全局变量的数量保持在最低限度。

我经常使用这种模式，创建一个全局变量来包含项目的所有代码（您可以替换`MySite`为项目名称）：

```
// Create a global variable that can contain everything else
window.MySite = {};

// Add something to the namespace
MySite.foo = (function () {
    // Code that isn't visible globally here

    return someValueForFoo;
}());

// Elsewhere in my code I can easily access `someValueForFoo`:
MySite.foo 
```

将此应用于您的项目：

```
window.MySite = {};

// In app.js
MySite.App = (function (jQuery) {
    // ...
}(jQuery));

// In personal.js
MySite.storage = (function (jQuery) {
    // ...
    return new MySite.App.Cache(localStorage,JSON);
}(jQuery));

// Elsewhere in your code
MySite.storage.setItem('foo', 'bar'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:36:48.887

您不能只引用在这样的另一个范围内声明的变量。这就是存在范围的原因。如果要获取`personalcontentstorage`变量，只需返回它：

```
// assign your IIFE to a variable
var something = (function(app){
    if (app) {
        // snip
        return new app.Cache(localStorage,JSON);
    } else {
        alert("app is undefined!");
    }
})(app);

jQuery(document).ready(function() {
    // use the variable your IIFE's return was stored in
    something.setItem("mykey","myValue") ;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:37:38.873

从您的 personal.js 函数中返回它怎么样？

```
var Personal = (function(app) {
    if (app) {
        app.Cache = function(nativeStorage, serializer) {
            this.storage = nativeStorage;
            this.serializer = serializer;
        }

        app.Cache.prototype = {
            setItem: function(key, value) {
                this.storage.setItem(key, this.serializer.stringify(value));
                return (this);
            }
        };

        var personalcontentstorage = new app.Cache(localStorage, JSON);
    } else {
        alert("app is undefined!");
    }

    return {
        storage: personalcontentstorage
    };
}(app)); 
```

然后在您的 HTML 文件中，您只需引用：

```
Personal.storage.setItem("myKey", "myValue"); 
```

不确定这是否正是您要寻找的。您的代码很难阅读，而且您自己也承认这不是您的代码，只是有点像它。请尝试使用结构良好、功能性强的代码发布您的问题。:-)​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:32:15.360

有问题`app.js`，`app`变量不是你想的那样：

```
var app = (function(jQuery){
    // function body
})(jQuery); 
```

分配给`app`的是等号后自执行匿名函数的返回值。这是未定义的（或者`null`，如果 jQuery 是假的）。您必须让函数返回要分配给`app`var 的内容。

# data-structures - Excel单元格/范围逻辑作为数组逻辑

> ID：12306100
> 
> 赞同：2
> 
> 时间：2012-09-06T18:21:06.380
> 
> 标签：data-structures, excel, excel-2007, vba

我正在处理来自大型机的字母数字数据。由于访问点的性质，GetString 方法在网络浏览器界面中用于从大型机中提取数据。我正在重构我的代码以及旧代码以使用数据结构而不仅仅是范围对象，因为范围对象代码在大型数据集上花费的时间要长得多。

作为[一般优化实践](http://www.cpearson.com/excel/optimize.htm)的一部分，我运行所有大型数据集宏`Application.ScreenUpdating = False`并`Application.Calculation = xlCalculationManual`激活。为了计时，在将 Counter 与状态栏结合使用后，我将[QueryPerformanceCounter](https://stackoverflow.com/questions/198409/how-do-you-test-running-time-of-vba-code)与 DoEvents 一起使用，以便它为我提供完成特定宏所需的时间。QueryPerformanceCounter 位于类模块中，在执行我的代码的[域逻辑/业务逻辑中没有直接作用。](http://en.wikipedia.org/wiki/Business_logic)

例如，我最近重构了从大型机屏幕中提取大约 10,000 个字符串并通过循环将它们放入工作表的代码。当重构为数据结构循环时，代码在将字符串放入数组时大约需要 70 秒。代码也更便携，因为这些字符串可以很容易地转移/放置到字典中进行排序或集合中进行解析。因此，我将所有 VBA 代码从基于范围的代码切换到数据结构，这是我的问题的引入/背景。

我在一个分析项目中遇到了一些旧代码，这些代码有一些有趣的逻辑来从大型机中提取内容。本质上，代码以这种布局形式从服务器拉取内容：

![从服务器提取的原始数据到 Excel 表](../Images/8c93c98fe8f1ef447a4a2a38a77dce33.png)

然后使用 Worksheet/Cell 逻辑作为框架将内容解析为 Excel 表单中的此表单：

![从服务器解析到 Excel 工作表的数据](../Images/e19d58296ddae1e02d91ec08b1bcfae9.png)

没有登录/访问逻辑以及没有子程序声明的代码如下：

```
Sub AcquireData()

    CurrentServerRow = 13

    WhileLoopHolder = 1

    If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) <> "" Then

        NewWorksheetLine_Sub

    End If

    Do While WhileLoopHolder = 1

        If CurrentSession.Screen.Getstring(CurrentServerRow, 9, 1) = "-" Then

            If Trim(CurrentSession.Screen.Getstring(CurrentServerRow + 1, 15, 1)) <> "" Then

                NewWorksheetLine_Sub

            End If

        ElseIf Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) = "" Then

            If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14)) <> "" Then
                Cells(WorksheetRow, ValueSets) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))
                ValueSets = ValueSets + 1
            End If

        Else

            If CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1) = "" Then

                Cells(WorksheetRow, WorksheetColumn) = "X"

            Else

                Cells(WorksheetRow, WorksheetColumn) = CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1)

            End If

            Cells(WorksheetRow, WorksheetColumn + 1) = CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)
            Cells(WorksheetRow, WorksheetColumn + 2) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 17, 39))
            Cells(WorksheetRow, ValueSets) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))
            WorksheetColumn = WorksheetColumn + 3
            ValueSets = ValueSets + 1

        End If

        CurrentServerRow = CurrentServerRow + 1

        If CurrentServerRow > 41 Then

            WhileLoopHolder = 0

        End If

    Loop

End Sub

Sub NewWorksheetLine_Sub()

        WorksheetRow = WorksheetRow + 1
        WorksheetColumn = 1
        ValueSets = 10

End Sub 
```

这段代码嵌套在另一个程序的循环中，从而拉出数千行并整齐地组织它们。它还需要数小时并浪费宝贵的时间，这些时间可用于分析从服务器获取的数据。我设法将基本代码重构为数据结构，并利用我的学习重构其他代码。不幸的是，我错误地重构了这段代码，因为我无法正确地模仿业务逻辑。我的片段如下：

```
Sub AcquireData()
'This code refactors the data into a datastructure from a range object, but does not really capture the logic.
'Also, There is an error in attempting to insert a variant array into a collection/dictionary data structure.

CurrentServerRow = 13

ReDim SourceDataArray(10)

WhileLoopHolder = 1

If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) <> "" Then

    NewWorksheetLine_Sub

End If

Do While WhileLoopHolder = 1

    If CurrentSession.Screen.Getstring(CurrentServerRow, 9, 1) = "-" Then

        If Trim(CurrentSession.Screen.Getstring(CurrentServerRow + 1, 15, 1)) <> "" Then

            NewWorksheetLine_Sub

        End If

    ElseIf Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) = "" Then

        If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14)) <> "" Then

            ReDim Preserve SourceDataArray(ValueSets)
            SourceDataArray(ValueSets) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))

            ValueSets = ValueSets + 1
            ReDim Preserve SourceDataArray(ValueSets)
        End If

    Else

        If CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1) = "" Then

            ReDim Preserve SourceDataArray(WorkSheetColumn)
            SourceDataArray(WorkSheetColumn) = "X"

        Else

            SourceDataArray(WorkSheetColumn) = CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1)

        End If

        SourceDataArray(WorkSheetColumn + 1) = CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)

        SourceDataArray(WorkSheetColumn + 2) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 17, 39))

        SourceDataArray(ValueSets) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))

        WorkSheetColumn = WorkSheetColumn + 3
        ValueSets = ValueSets + 1
        ReDim Preserve SourceDataArray(ValueSets)

    End If

    CurrentServerRow = CurrentServerRow + 1

    If CurrentServerRow > 41 Then

        WhileLoopHolder = 0

    End If

Loop

End Sub

Sub NewWorksheetLine_Sub()

SourceIndexAsString = SourceCollectionIndex

   SourceDataCollection.Add SourceDataArray(), SourceIndexAsString

    SourceCollectionIndex = SourceCollectionIndex + 1
    WorkSheetColumn = 1
    ValueSets = 10

End Sub 
```

我考虑过，为了使用相同类型的“单元”逻辑，我可能想使用嵌套在数组中的数组，然后将其转置到工作表中。然而，在过去的几周里，我迄今未能成功实施任何此类解决方案。此外，可能存在将逻辑重构为数据结构形式的更好方法。但是，我一直无法确定如何成功地做到这一点。

总而言之，我的问题如下：我可以通过什么方式将基于“单元”的逻辑转换为数据结构逻辑？这样做的最佳数据结构是什么？在这种特殊情况下，如何使用此业务逻辑实现数据结构逻辑的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:21:23.417

的一些使用`ReDim Preserve`似乎有问题。

```
If CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1) = "" Then
  ReDim Preserve SourceDataArray(WorkSheetColumn)
  SourceDataArray(WorkSheetColumn) = "X" 
```

因此，如果`WorksheetColumn`有该值`1`，我们将`SourceDataArray`在大小上减少为一个条目，并丢弃数组中较高位置的所有数据。

```
Else
  SourceDataArray(WorkSheetColumn) = CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1)
End If

SourceDataArray(WorkSheetColumn + 1) = CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)

SourceDataArray(WorkSheetColumn + 2) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 17, 39)) 
```

现在我们可能正在查看`SourceDataArray`不存在的条目（即，当`If`遵循上面的分支而不是`Else`分支时）并且我们应该得到“下标超出范围”错误

`ReDim Preserve`只保留对新数组大小有意义的数组元素的数据。因此，如果我们有`ReDim a(10)`然后以后有`ReDim Preserve a(5)`（并假设数组从元素 0 开始 - 即 no `Option Base 1`），那么`a(5)`到`a(9)`现在都无法访问并且它们包含的数据会丢失

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:15:45.757

要将使用单元格引用的代码重构为数组，您需要使用*二维数组*。
单元格引用是基于 1 的，因此您也应该在数组中坚持这一点。

`Range.Value`您可以使用属性将范围复制到数组和从数组中复制

```
' Range to array
Dim a as Variant
a = Range("A1:J100").Value 
```

将导致`a`成为大小的变体数组`1 To 100, 1 To 10`

```
' Array to Range
Dim a(1 To 100, 1 To 10) as Variant
' populate a
' ...
' Put a into a range
Range("A1:J100").Value = a 
```

这两个代码片段产生相同的输出，但第二个运行*得*更快

```
Dim r as Long, c as Long
For r = 1 To 1000
For c = 1 To 100
    Cells(r, c) = r * c
Next c, r

Dim r as Long, c as Long
Dim a() as Variant 
Redim a(1 To 1000, 1 To 100)   
For r = 1 To 1000
For c = 1 To 100
    a(r, c) = r * c
Next c, r
Range("A1:CV1000") = a 
```

* * *

`ReDim Preserve`是一项相对昂贵的操作，因此`ReDim`分块更快

而不是这个

```
Redim a(1 To 10, 1 To 1)
For 1 = 1 to 100000
    Redim Preserve a(1 To 10, 1 To i)
    a(i) = SomeValue
Next 
```

改为这样做

```
Redim a(1 To 10, 1 To 1000)
For 1 = 1 to 100000
    If i > UBound(a) Then
        Redim Preserve a(1 To 10, 1 To UBound(a) + 1000)
    End If
    a(i) = SomeValue
Next
Redim Preserve a (1 To 10, 1 To i - 1) 
```

* * *

`Redim Preserve`只能改变多维数组的最后一维。

例如，这行得通

```
Redim a(1 to 100, 1 To 10)
Redim Preserve a(1 to 100, 1 To 20) 
```

这不起作用

```
Redim a(1 to 100, 1 To 10)
Redim Preserve a(1 to 200, 1 To 20) 
```

通常在使用表示范围的数组时，其行数变化最大。这提出了一个问题，因为`Range.Value`数组是`(1 To Rows, 1 To Columns)`

一种解决方法是实际标注您的数组`(1 To Columns, 1 To Rows)`。 `Redim`根据需要的行数，然后`Transpose`进入目标范围

```
Dim r As Long, c As Long
Dim a() As Variant
ReDim a(1 To 100, 1 To 200)
For r = 1 To 1000
For c = 1 To 100
    If r > UBound(a, 2) Then
        ReDim Preserve a(1 To UBound(a, 1), 1 To UBound(a, 2) + 200)
    End If
    a(c, r) = r * c
Next c, r
Range("A1:CV1000") = Application.Transpose(a) 
```

如果您需要更改两个维度，则更改第一个维度将需要创建一个所需大小的新数组并将数据从旧数组复制到新数组。再一次，像这样大块地重新调整以避免过多的重新调整

最后一件事：您似乎没有`Dim`变量（除非您刚刚将这部分从您的帖子中删除）。我建议您使用`Option Explicit`和`Dim`所有变量。这有助于避免数据类型错误，也可以避免使用`Variant`一切。 `Variants`当你需要时很好，但当你不需要时，其他数据类型通常更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:53:39.527

有一次我花了几周时间将其他宏从基于范围的逻辑重构为抽象的数据结构逻辑，当我回到这个宏时，我得到了答案。如果我只是模仿范围逻辑以便更快地完成宏，那么我只需要填充数组，使其在转置后与范围匹配。这意味着我不需要修剪数组或以任何方式操纵它的形式——我只需要以数组形式填充数据结构，然后将其转置到电子表格中。一旦数组被填满，我也可以替代使用数据。

这是解决方案代码：

```
Sub AcquireData()

'The array 'MyArray' was dimensioned as a dynamic array in the declarations section at the top of the module.
'Redim the array to a big 2 dimensional array that fits the needs of the data/macro.
ReDim MyArray(1 To 20, 1 To 20000)

'From here on, simply mimic the logic of the range macro... [i]
CurrentServerRow = 13

WhileLoopHolder = 1

If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) <> "" Then

    NewWorksheetLine_Sub

End If

Do While WhileLoopHolder = 1

    If CurrentSession.Screen.Getstring(CurrentServerRow, 9, 1) = "-" Then

        If Trim(CurrentSession.Screen.Getstring(CurrentServerRow + 1, 15, 1)) <> "" Then

            NewWorksheetLine_Sub

        End If

    ElseIf Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)) = "" Then

        If Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14)) <> "" Then

            '[i] ... except, move the values into the array in Column, Row logic form.
            MyArray(ValueSets, WorksheetRow) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))
            ValueSets = ValueSets + 1
        End If

    Else

        If CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1) = "" Then

            MyArray(WorksheetColumn, WorksheetRow) = "X"

        Else

            MyArray(WorksheetColumn, WorksheetRow) = CurrentSession.Screen.Getstring(CurrentServerRow, 5, 1)

        End If

        MyArray(WorksheetColumn + 1, WorksheetRow) = CurrentSession.Screen.Getstring(CurrentServerRow, 9, 7)
        MyArray(WorksheetColumn + 2, WorksheetRow) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 17, 39))
        MyArray(ValueSets, WorksheetRow) = Trim(CurrentSession.Screen.Getstring(CurrentServerRow, 58, 14))
        WorksheetColumn = WorksheetColumn + 3
        ValueSets = ValueSets + 1

    End If

    CurrentServerRow = CurrentServerRow + 1

    If CurrentServerRow > 41 Then

        WhileLoopHolder = 0

    End If

Loop

ArrayToWorkSheet_Sub

End Sub

Sub NewWorksheetLine_Sub()

    WorksheetRow = WorksheetRow + 1
    WorksheetColumn = 1
    ValueSets = 10

End Sub

'When finished with the loop, push the array to the worksheet, and transpose it to provide the correct column to row relationship in the spreadsheet.
Sub ArrayToWorkSheet_Sub()

Dim ArrayLimit As Long

Dim LastCell As Long

Dim MyRange As Range

'This level of precision in setting the range appears unnecessary, but in theory I think it could speed up tranposing the array - [ii]
'[ii]but that is just speculation. Performance improvements for the tranposition appear to be minor, perhaps due to the fact that [iii]
'[iii]most - if not nearly all - of the intense computations occur earlier.
With Sheets("Sheet2")

ArrayLimit = UBound(MyArray, 2)

LastCell = ArrayLimit + 1

Set MyRange = .Range("A2:S" & LastCell)

MyRange = WorksheetFunction.Transpose(MyArray)

End With

End Sub 
```

虽然两者在减少宏运行时间`Application.ScreenUpdating = False`方面`Application.Calculation = xlCalculationManual`都非常宝贵，但我在将这两行与抽象数据结构的使用结合起来方面获得了非常积极的经验。在某些情况下，数据结构似乎有助于优化性能，尤其是在宏观过程中涉及大量逐行数据提取的情况下。

# c# - 尝试让 main/form1 以外的类相互交互是不是不好的形式？

> ID：12306106
> 
> 赞同：6
> 
> 时间：2012-09-06T18:21:28.210
> 
> 标签：c#, class, architecture

我正在尝试学习在我的代码中使用类的正确方法，当它不像一组客户、从动物继承的狗等那样明显时。

我已将大部分代码分解为“功能”，例如`Installer.cs`, `Downloader.cs`, `UiManager.cs`. 我可以找到让这些类与彼此的属性和方法交互的唯一方法是使它们全部静态，我在另一个问题中被告知这是错误的方法。

所以我的问题是三件事之一：

1.  有一种方法可以让班级互相交谈，但我还不明白。

2.  类永远不应该尝试相互交谈，而是执行一次性操作，然后返回一些东西给`main/form1`，然后主类可以使用它来传递给另一个类以进行一次性操作。

3.  类实际上只对创建大量实例有用，并且我需要完全了解一些其他结构，以便从主类中抽象出大量功能。

我能找到的所有教程和观看的讲座似乎只告诉你课程是如何*运作*的，而不是何时以及如何在实际产品中使用它们。

编辑 - 一个更具体的例子：

假设我有一个字符串，它是整个应用程序的核心，每个班级都可能需要查看和/或修改。如何在代码中移动这些信息而不将所有内容都放在一个类中或使其成为静态？

我看不到在`Form1`不使其成为静态的情况下让该字符串存在的方法（因为所有表单事件和函数都需要能够看到它才能将其传递给一个类）。

我看不到将字符串放入另一个类而不必使字符串和整个类静态的方法，因此其他类可以看到它。

也许我在实际实例化类和使对象相互交互方面缺少一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:39:57.457

我认为你所有的直觉都是对的。

1.  不，没有。静态或实例。

2.  这是一种设计选择（那里有很多）。我是一个务实的人，所以我认为生成 spaguethi 代码的设计模式是一个糟糕的设计模式选择。但是一个项目的糟糕设计模式可能是另一个项目的好设计模式。尝试阅读 Head First Design Pattern 这本书。

3.  是的，有接口和抽象类。

还有一些想法：

我不认为必须避免使用静态方法或类。必须避免的是错误使用静态方法或类，例如错误使用语言中的所有内容。但是很难定义什么是对 static 的误用，而且由于静态方法或类特别危险，人们喜欢说完全避免使用 static 关键字。除非您结束应用程序，否则静态方法将在内存中，因此如果您不在静态方法中处理连接，您将度过非常糟糕的一天。

我有一个实用程序项目，在实用程序项目中我有一个数据类。数据类提供对数据库的访问。这是一个静态类。为什么？

好吧，首先，它是静态的，因为连接字符串来自 webconfig。所以我有一个静态构造函数（在应用程序启动并提到类时运行一次），它读取 webconfig 并将字符串存储在静态私有成员变量中。我认为这比阅读 webconfig 文件并每天创建一个作用域变量 100 亿次要好得多。这些方法是静态的，因为它们足够简单，这意味着它们不需要大量配置即可工作，它们只需要几个参数并且仅在数据访问项目中使用。我所有的网站用户都在使用相同的方法实例（静态方法），但是每个人都使用具有不同参数的静态方法，因此他们得到不同的响应（他们共享管道，但他们喝不同的水）。它' s 只需要在方法内部额外注意清理所有内容（处理每个作用域实例），因为如果不这样做，它们将保留在内存中。最后，我的业务是关于数据操作，非静态数据类比静态数据类意味着更多的内存使用（两种模式的 cpu 使用率几乎相同）。

```
public abstract class Data
{

    [...]

    static Data()
    {
        #if DEBUG
            _Connection = ConfigurationManager.AppSettings["debug"];
        #endif

        #if RELEASE
            _Connection = ConfigurationManager.AppSettings["release"];
        #endif

        [...]
    }

    [...]

} 
```

归根结底，我在以下情况下使用静态：

1.  如果它足够简单（我可以控制每个方面）；
2.  如果它足够小（我使用扩展方法进行验证，它们是静态的）并且；
3.  如果是重度使用。

除此之外，我使用图层来组织我的项目（poco + 工厂模式）。我有一个实用项目，然后是实体模型项目，然后是访问项目，然后是业务逻辑项目，然后是网站、api、管理器等等。实用程序项目中的类不相互交互，但实体模型项目中的类可以交互（一个类中可以有另一个类的实例）。实体模型项目不与实用程序项目交互，因为它们具有相同的级别，它们在另一个级别，在访问项目中相互交互，但在数据操作项目中更直观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:50:19.460

类在有引用时相互交谈，为了让 A 将消息传递给 B，A 需要对 B 的引用（实例或静态引用）

类可以相互通信，也可以将信息返回给另一个控制整个过程的类（这实际上是一种设计模式）

为了从主类（或任何类）中抽象信息，你有接口和抽象类

四人组的设计模式书在这种情况下是必读的。另外要记住的是设计的简单性，有时试图适应设计模式只是因为最终可能会创建更多的 spaguethi 代码。根据经验，总是尝试将演示功能与逻辑分开，并将类视为彼此交谈和执行工作的人（这有点奇怪，但有时它可以帮助我这样想）

# android - OpenGL ES 2.0 中的 glBlendEquation(GL_MIN) 替换

> ID：12306112
> 
> 赞同：1
> 
> 时间：2012-09-06T18:21:40.763
> 
> 标签：android, opengl-es, opengl-es-2.0

我四处搜索，似乎 glBlendEquation 在 Android 中有一些[问题](https://stackoverflow.com/questions/7841763/android-gles20-glblendequation-not-working)，-GL_MAX/MIN 甚至没有在 opengles[规范中列出](http://www.khronos.org/opengles/sdk/docs/man/)

我需要找到 GL_MIN blendEquation 模式的解决方法。那可能吗？只有当 alpha 大于我要写入的像素的 alpha 时，我才想写入颜色缓冲区。是否可以在没有任何扩展或使用超过 1 个纹理的情​​况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:30:55.970

我试图避免的肮脏解决方案就是这个。使用帧缓冲区对象和着色器来模拟颜色缓冲区和混合模式：

```
Modify existing shaders to blend the scene with an FBO_1, into FBO_2.
Render FBO_2 to the screen. 
```

下一个绘图调用将 FBO_1 与 FBO_2 交换，因为 FBO_2 等于颜色缓冲区。

一个“非侵入式”且效率更低的替代方案是使用 3 个 FBO 和一个着色器，并进行额外的传递。

```
Render scene to FBO_1 //without any modification to existing shaders
Blend FBO_1 with FBO_2 into FBO_3 //with new shader.
Render FBO_3 to the screen. 
```

下一个绘图调用将 FBO_2 与 FBO_3 交换。这种替代方案的唯一优点是我不必修改现有的绘图逻辑。

我真的不喜欢这些想法。我很乐意接受更好的答案！

# ruby - 如何按 created_at 和计数基数降序对该哈希进行排序

> ID：12306113
> 
> 赞同：0
> 
> 时间：2012-09-06T18:21:53.970
> 
> 标签：ruby, hash

我按下面列出的顺序制作哈希，并按升序对其进行排序，但是当我想按降序对其进行排序时，我没有得到正确的结果。

哈希是这个

```
hash_answers = {}
unless answers.blank?
  answers.each_with_index do |ans, index|
    voted_up_users = ans.votes_up_by_all_users(ans)
    voted_down_users = ans.votes_down_by_all_users(ans)

    hash_answers[ans.id] = {
        :id => ans.id,
        :count => voted_up_users.count - voted_down_users.count,
                                       :created_at => ans.created_at
    }
  end
end 
```

当我按升序排序`created_at`并计算基数时，上面的代码可以正常工作

```
 answers = hash_answers.sort_by { |k, v| [ v[:count] , v[:created_at] ] } 
```

但是我如何才能`created_at`根据计数按降序对该哈希进行排序。

如果有人可以帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:47:05.443

您可以在排序方法中使用块，在块中您应该提供排序规则，在您的情况下可能是这样的：

```
temp = hash_answers.sort do |h1,h2| 
  v1 = h1.last; v2 = h2.last
  [v2[:count],v2[:created_at]] <=> [v1[:count],v1[:created_at]]
end

answer = Hash[temp] 
```

# c# - 使用 BitmapSource、PngBitmapEncoder/Decoder 时，在 PNG 中保存 8 位索引数据会改变原始字节

> ID：12306114
> 
> 赞同：4
> 
> 时间：2012-09-06T18:22:00.957
> 
> 标签：c#, png, bytearray, bitmapsource

使用 BitmapSource 和 PngBitmapEncoder/Decoder 保存和加载 PNG 时出现问题。基本上，我希望能够保存一个源自字节数组的图像，并且当 PNG 加载到我的程序中时，重新加载完全相同的字节。原始数据的保存很重要。

同时，我希望 PNG 使用自定义调色板（256 色的索引数组）。

我正在尝试使用自定义索引调色板保存我的 8 位数据。原始数据的范围可以是 0-255。调色板可以是“阈值”调色板（例如，0-20 是颜色#1，21-50 是颜色#2，等等）。

我发现当我保存数据、重新加载并执行 CopyPixels 以检索“原始”数据时，数据值是根据调色板设置的，而不是原始字节数组值。

有没有办法在*不*丢失自定义调色板的情况下保留 PNG 中的原始字节数组？还是有不同的方法从 BitmapSource 检索字节数组？

以下是我的保存例程：

```
 // This gets me a custom palette that is an array of 256 colors
      List<System.Windows.Media.Color> colors = PaletteToolsWPF.TranslatePalette(this, false, true);
      BitmapPalette myPalette = new BitmapPalette(colors);

      // This retrieves my byte data as an array of dimensions _stride * sizeY
      byte[] ldata = GetData();

      BitmapSource image = BitmapSource.Create(
        sizeX,
        sizeY,
        96,
        96,
        PixelFormats.Indexed8,
        myPalette,
        ldata,
        _stride);

      PngBitmapEncoder enc = new PngBitmapEncoder();
      enc.Interlace = PngInterlaceOption.On;
      enc.Frames.Add(BitmapFrame.Create(image));

      // save the data via FileStream
      enc.Save(fs); 
```

这是我的加载程序：

```
 // Create an array to hold the raw data
    localData = new byte[_stride * sizeY];

    // Load the data via a FileStream
    PngBitmapDecoder pd = new PngBitmapDecoder(Fs, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
    BitmapSource bitmapSource = pd.Frames[0];    

    // When I look at the byte data, it is *not* the same as my original data 
    bitmapSource.CopyPixels(localData, _stride, 0); 
```

任何建议，将不胜感激。谢谢。

附录#1：我发现部分问题在于 PNG 被保存为 32 位颜色，尽管我将它设置为 Indexed8 并使用 256 项调色板。这似乎也取决于设置的调色板。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-09T10:00:39.490

我知道为什么您的 PNG 文件以高颜色保存。实际上，它们*不是*“保存为高彩色的 8 位图像”；问题是，从它们包含透明度的那一刻起，它们就被.Net 框架*加载*为高颜色。图像本身非常好，只是框架把它们弄乱了。

解决方法已在此处发布：

[A：正确加载索引彩色图像文件](https://stackoverflow.com/a/45100442/395685)

[正如**wip**所说](https://stackoverflow.com/questions/12306114/saving-8-bit-indexed-data-in-a-png-alters-original-bytes-when-using-bitmapsource/48165612#comment30332293_12306114)，如果你想保留原始字节，调色板的实际更改应该使用块来完成，而不是通过 .Net 图形类，因为 .Net 重新编码将不可避免地改变字节。而且，有趣的是，我刚刚给出的调色板问题的修复已经包含了你需要的一半代码，即块读取代码。

块*编写*代码将是这样的：

```
/// <summary>
/// Writes a png data chunk.
/// </summary>
/// <param name="target">Target array to write into.</param>
/// <param name="offset">Offset in the array to write the data to.</param>
/// <param name="chunkName">4-character chunk name.</param>
/// <param name="chunkData">Data to write into the new chunk.</param>
/// <returns>The new offset after writing the new chunk. Always equal to the offset plus the length of chunk data plus 12.</returns>
private static Int32 WritePngChunk(Byte[] target, Int32 offset, String chunkName, Byte[] chunkData)
{
    if (offset + chunkData.Length + 12 > target.Length)
        throw new ArgumentException("Data does not fit in target array!", "chunkData");
    if (chunkName.Length != 4)
        throw new ArgumentException("Chunk must be 4 characters!", "chunkName");
    Byte[] chunkNamebytes = Encoding.ASCII.GetBytes(chunkName);
    if (chunkNamebytes.Length != 4)
        throw new ArgumentException("Chunk must be 4 bytes!", "chunkName");
    Int32 curLength;
    ArrayUtils.WriteIntToByteArray(target, offset, curLength = 4, false, (UInt32)chunkData.Length);
    offset += curLength;
    Int32 nameOffset = offset;
    Array.Copy(chunkNamebytes, 0, target, offset, curLength = 4);
    offset += curLength;
    Array.Copy(chunkData, 0, target, offset, curLength = chunkData.Length);
    offset += curLength;
    UInt32 crcval = Crc32.ComputeChecksum(target, nameOffset, chunkData.Length + 4);
    ArrayUtils.WriteIntToByteArray(target, offset, curLength = 4, false, crcval);
    offset += curLength;
    return offset;
} 
```

我使用的函数是[Sanity Free Coding CRC implementation](http://www.sanity-free.org/12/crc32_implementation_in_csharp.html)`Crc32.ComputeChecksum`的数组内改编。将其调整为给定数组内的可变起始和长度应该不难。

字节写入类`ArrayUtils`是我制作的一个工具集，用于在具有指定字节顺序的数组中读取和写入值。[它在此答案](https://stackoverflow.com/a/46424800/395685)末尾的 SO 上发布。

# backbone.js - 从视图#2 调用视图#1 的 Backbone.js 方法

> ID：12306116
> 
> 赞同：3
> 
> 时间：2012-09-06T18:22:05.067
> 
> 标签：backbone.js

如何从主干中的 view#2 调用 View#1 的方法？

```
view#1 = Backbone.View.extend({
    plot_markers:function(){
        /*some code */
    } 
});

view#1 = Backbone.View.extend({
    initialize:function(){
        view#1.plot_markers();
    }
}); 
```

我如何在主干中设置全局方法。许多视图可以使用相同的方法

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:48:59.230

View#2 必须具有对 View#1 的引用，但这可能很危险，因为创建循环引用很容易。解决此问题的更好方法是让中介（例如控制器）执行方法调用。View#1 将触发控制器侦听的事件，然后调用 View#2 上的正确方法，反之亦然。这个想法是让你的观点彼此不了解，因为这遵循了“关注点分离”的整个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:35:52.777

根据您的应用程序的结构以及视图之间的相互关系，您可以 1) 触发路由器侦听的事件并执行另一个操作作为响应（如 Brendan Delumpa 建议的那样），或 2) 创建一个全局事件聚合器，您可以在任何地方收听并在任何地方触发事件。

Derick Bailey 写过关于[如何以及何时在 Backbone 中使用事件聚合器的](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)文章。这是一个简单的例子：

```
App = {};
App.events = _.extend({}, Backbone.Events);

// Subscribe to your:event
App.events.on("your:event", function(){
  // Carry out whatever's supposed to happen when the event
  // has been triggered here.
});

// Publish your:event
App.events.trigger("your:event"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:26:41.290

尝试这个，

```
view1 = Backbone.View.extend({

    plot_markers:function(){
        //add your code here,..
        alert('called....'); 
    } 
});

view2 = Backbone.View.extend({
    initialize:function(){
        var v1 = new view1();
        v1.plot_markers();
    }
});
var v2 = new view2(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T21:53:10.433

你可以让 View2 扩展 View1

```
class View1 extends Backbone.View
  plot_markers: -> # dot stuff 

class View2 extends View1
  initialize: ->
     @plot_markers() 
```

# java - 在 javafx.scene.control.TextArea 中按 ALT+ENTER 时如何禁用声音？

> ID：12306117
> 
> 赞同：3
> 
> 时间：2012-09-06T18:22:06.260
> 
> 标签：java, javafx, javafx-2

```
 val textArea = new TextArea(text) {
      addEventFilter(KeyEvent.ANY, (event: KeyEvent) => {
        if (event.getEventType == KeyEvent.KEY_PRESSED && event.getCode == KeyCode.ENTER) {
          event.consume()
          if (event.isAltDown)
            insertText(getCaretPosition,"\n")
        }
      })
    } 
```

在 javafx.scene.control.TextArea 中按 ALT+ENTER 时如何禁用声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T13:17:49.670

只需创建一个将所有当前声音静音的方法。

```
sound.setVolume(0); (For audioclip)
mediaPlayer.setMute(true); (For MediaPlayer) 
```

希望这可以帮助。

# cordova - 使用 phonegap 从 sap 获取数据的教程

> ID：12306119
> 
> 赞同：1
> 
> 时间：2012-09-06T18:22:09.110
> 
> 标签：cordova, sybase, sap

我正在尝试了解 phonegap 和 sap 集成。我一直在寻找一些教程，解释如何使用 phonegap 从 sap 中检索一些简单数据表。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:04:33.660

由于您正在构建 Web 应用程序，因此您应该能够使用任何 javascript 库通过 Web 服务或 RFC 连接到 SAP。

# dns - 如何在 DNS 条目中指定服务 CherryPy 应用程序的端口？

> ID：12306120
> 
> 赞同：1
> 
> 时间：2012-09-06T18:22:13.297
> 
> 标签：dns, cherrypy

当我尝试在端口 80 上服务我的 CherryPy 应用程序时，我收到“端口 80 不是免费的”消息。我看到的大多数示例显示人们使用其他端口。如果我使用另一个端口，如何在 DNS 条目中指定为我的 CherryPy 应用程序服务的端口？

我们使用的是 Easy DNS，据我所知，无法在 DNS 条目中指定端口。这个标准还是我们的供应商的限制？

想要实现这样的目标：

```
XXX.XXX.XXX.XXX  -  www.domain.com:9595 
```

提前致谢！

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:07:05.857

要在 DNS 中为您的网站发布 TCP 端口号，您可以创建一个[SRV 记录](http://en.wikipedia.org/wiki/SRV_record)，但是这样做没有任何意义，因为实际上可能存在完全零个 Web 浏览器来查询 SRV 记录以找出要连接的端口到。

因此，由于 SRV 不起作用，因此对您的问题的简短回答是，您不能。如果您的 Web 服务器运行在不同于 80（对于 HTTP）或 443（对于 HTTPS）的端口上，则只能通过直接在 URL 中指定端口号来访问它，例如**http://www.domain.com： 9595/**。

如果您真的希望您的网站出现在端口 80（用于 HTTP）或 443（用于 HTTPS）上，并且已经有另一个 Web 服务器在该端口上侦听，那么您可以查看是否可以将另一个 Web 服务器配置为对您的 Web 服务器的代理请求。例如，如果其他 Web 服务器运行 Apache，则：

```
<Location /foo>
    ProxyPass http://localhost:9595/
    ProxyPassReverse http://localhost:9595/
</Location> 
```

# grails - 在 Grails 中设置默认的 joda 持续时间/周期格式

> ID：12306123
> 
> 赞同：3
> 
> 时间：2012-09-06T18:22:30.027
> 
> 标签：grails, jodatime

在 Grails 中使用[joda 时间时](http://joda-time.sourceforge.net/apidocs/index.html)，您可以设置默认的[LocalDate](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)格式，就像他们在[此处](https://stackoverflow.com/questions/11180431/how-change-joda-time-default-datetime-format-in-grails)所做的那样。我想对[Duration](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html)和[Period](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)做同样的事情，所以我不必输入类似的东西

```
durationFormatter.print(exampleObject.myDuration) 
```

每次我想显示持续时间或期间。我想要调用/对象的`toString()`方法并让它以所需的格式打印。`Duration``Period`

我试图在我的配置文件中实现[PeriodFormatter](http://joda-time.sourceforge.net/apidocs/index.html?org/joda/time/format/PeriodFormatter.html)就像他们在[这里](https://stackoverflow.com/questions/1440557/joda-time-period-to-string)所做的一样，但无济于事。到目前为止，这是我的配置文件中的内容：

```
jodatime {
    format.org.joda.time.LocalDate = "yyyy-MM-dd"
    format.org.joda.time.PeriodFormatter = { new format.org.joda.time.PeriodFormatterBuilder()
        .appendMonths()
        .appendSuffix( " month", " months" )
        .appendWeeks()
        .appendSuffix( " week", " weeks" )
        .appendDays()
        .appendSuffix( " day", " days" )
        .appendHours()
        .appendSuffix( " hour", " hours" )
        .toFormatter();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:43:17.780

班级

```
ISOPeriodFormat 
```

场地

```
cStandard 
```

这是默认的周期格式化程序。该字段是`private static`并且还没有设置器。但是您可以使用 java-reflection API 更改此值

```
 final Field f = ISOPeriodFormat.class.getDeclaredField("cStandard");
  f.setAccessible(true);
  f.set(null, yourPeriodFormatter); 
```

# gwt - gwt 模块不加载到 gae

> ID：12306127
> 
> 赞同：0
> 
> 时间：2012-09-06T18:22:48.293
> 
> 标签：gwt

[在我们网站http://www.sakshum.org/ui/page/JoinUs.jsp](http://www.sakshum.org/ui/page/JoinUs.jsp)的特定页面上，该页面是使用 gwt 构建并部署在 GAE 上的，模块不会加载。

这在 eclipse 中的开发环境中运行良好，并且在控制台中通过 firebug 查看时没有错误。

请告知这里可能出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:01:00.330

查看 AE 日志。firebug 只会显示客户端的东西。这可能是一个类路径问题——比如你在本地有一些东西但没有上传那个 jar ......等等。

**编辑：**

请发布您的 JoinUs.jsp

我通过AE上的jsp页面调用我的gwt模块没问题。也许您的脚本标记中指向 *.nocache.jsp 文件的路径以某种方式关闭。通常当事情在本地解决但不是在 AE 上解决时，对我来说，问题是 appengine-web.xml 和设置包含和排除路径。我在那里必须小心，因为本地和部署的工作方式不同——尤其是使用通配符。

此外，在仪表板（ae 管理页面）下查找 uri 错误。未找到的静态资源将显示在那里，而不是在 ae 日志中，因为它们是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T02:58:18.860

谢谢大家的帮助。所以，问题完全不同。实际上，由于 jsp 中 if 语句的编码错误，div 标记根本没有呈现。在修复它开始工作

# c# - 如何在运行时保存自定义配置部分？

> ID：12306130
> 
> 赞同：1
> 
> 时间：2012-09-06T18:22:54.883
> 
> 标签：c#, wpf, app-config, configurationsection

我的应用程序允许用户将其他项目添加到组合框中，这些项目保存在自定义配置部分中。问题是 save() 调用失败，因为我的应用程序安装到 C:/Program Files... 没有读写权限，因此用户必须以管理员身份运行我的应用程序。

有没有更巧妙的方法来保存用户添加的持续存在的 UI 元素？我查看了用户设置，但似乎没有办法保存收藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:33:35.323

.NET 并不真正支持在运行时写入 app.config。你可以这样做，但你会遇到允许的情况。在运行时写入 app.config 通常表示用户范围的配置。这通常通过 Properties.Settings 中的用户范围配置项来完成，该配置项将默认值存储在 app.config 中，并将新的/更改写入用户的 AppData。

在自定义配置方面，使用用户范围的设置，它真的不适用。您可以在设置设计器中简单地使用您自己的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:32:38.943

用户设置 (http://msdn.microsoft.com/en-us/library/bb397750(v=vs.90).aspx) 是您想要的最佳匹配。您可以将集合序列化为 JSON 并将其保存为字符串类型的设置。

# java - 这个线程示例有什么问题？

> ID：12306131
> 
> 赞同：0
> 
> 时间：2012-09-06T18:22:56.833
> 
> 标签：java, amazon-s3

> **可能重复：**
> [尝试将 InputStream 放入 Amazon S3 时进程终止](https://stackoverflow.com/questions/12304950/process-dies-when-trying-to-put-inputstream-to-amazon-s3)

*   我有`API`一个方法`OutputStream getOutputStream(String id)`
*   这`API`有两个具体的实现 -`FileService`和`S3Service`
*   我有一个执行以下操作的 documentManager

> ```
> public void putDocument(@Nonnull final Document document) throws IllegalArgumentException, PersistenceException {
>         final OutputStream stream = persistenceService.getOutputStream(document.getUniqueId());
>         try {
>             jaxbContext.createMarshaller().marshal(document, stream);
>         } catch (final JAXBException e) {
>             LOGGER.error(e.getMessage(), e);
>             throw new PersistenceException("Failed to marshall document " + document.getUniqueId() + ": " + e.getMessage(), e);
>         } finally {
>             try {
>                 stream.close();
>             } catch (IOException e) {
>                 throw new PersistenceException("Failed to close output stream for " + document.getUniqueId());
>             }
>         }
>     } 
> ```

persistenceService 返回的写入`DocumentManager`位置`outputStream`

*   此实现适用于`FileService`
*   `S3Service`，我们必须将其转换`OutputStream`为`InputStream`符合`Amazon S3 API`（[此处](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#putObject%28java.lang.String,%20java.lang.String,%20java.io.InputStream,%20com.amazonaws.services.s3.model.ObjectMetadata%29)）
*   所以我确实跟着`S3Service.getOutputStream`

    ```
    public OutputStream getOutputStream(@Nonnull final String uniqueId) throws PersistenceException {
         final PipedOutputStream outputStream = new PipedOutputStream();
         final PipedInputStream inputStream;
         try {
             inputStream = new PipedInputStream(outputStream);
             new Thread(
                     new Runnable() {
                         @Override
                         public void run() {
                             ObjectMetadata objectMetadata = new ObjectMetadata();
                             objectMetadata.setContentType("application/octet-stream");
                             PutObjectRequest putObjectRequest = new     PutObjectRequest("haritdev.sunrun", "sample.file.key",
                                         inputStream, objectMetadata);
                             PutObjectResult result =      amazonS3Client.putObject(putObjectRequest);
                             LOGGER.info("result - " + result.toString());
                             try {
                                 inputStream.close();
                             } catch (IOException e) {

                             }
                         }
                     }
             ).start();
         } catch (AmazonS3Exception e) {
             throw new PersistenceException("could not generate output stream for " + uniqueId, e);
         } catch (IOException e) {
             throw new PersistenceException("could not generate input stream for S3 for " + uniqueId, e);
         }
          try {
             return new GZIPOutputStream(outputStream);
         } catch (IOException e) {
             LOGGER.error(e.getMessage(), e);
             throw new PersistenceException("Failed to get output stream for " + uniqueId + ": " + e.getMessage(), e);
         }
     } 
    ```

当我调试这个时，我看到进程在一段时间后死掉并且没有写入文档，这个实现不正确吗？

# powershell - PowerShell 的“-Version”参数和 CLR 版本

> ID：12306134
> 
> 赞同：2
> 
> 时间：2012-09-06T18:23:13.490
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我已经安装了 PowerShell v3 的发行版，但在使 -Version 参数正常工作时遇到了一些麻烦。我有很多需要 .NET 4.0 的模块，并且我一直在使用 PowerShell v2，使用以下 powershell.exe.config 文件没有问题：

```
<?xml version="1.0"?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0.30319"/>
        <supportedRuntime version="v2.0.50727"/>
    </startup>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
    </runtime>
</configuration> 
```

这将允许我使用 .NET 4.0 CLR 运行 PowerShell v2。一切正常。

我现在已经安装了 PowerShell v3 的发布版本，并且每当我使用命令“powershell -version 2”并检查`$PSVersionTable`变量时，它显示它已经加载了 PowerShell v3（使用 .NET 4.0）。如果我删除`powershell.exe.config`上面的文件并运行相同的命令，则表明 PowerShell v2 已加载但正在使用 .NET 2.0。

所以我的问题是：有没有办法像我在安装 PowerShell v3 之前那样加载 PowerShell v2 并让它使用 .NET 4.0 CLR？还是 PowerShell v3 不允许这样做？

另外，我应该提一下我为什么要这样做 - 主要是为了以防我们切换到 V3 时可能会出现任何不兼容问题。我计划使用 V3 测试所有内容，但是能够回退到 V2 可以让我们免于很多麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T20:13:57.177

发生的情况如下：

*   从...开始`-Version 2`
*   Powershell 启动，绑定到 v2 运行时/程序集。到现在为止还挺好。
*   App.config 指示应加载 .NET 4 运行时
*   随着程序集绑定的进行，有一个 .NET 发布者策略会在可能的情况下自动将针对 v2 构建的任何应用重定向到 v3
    *   这通常是您想要的 - 如果有新版本，请自动使用它
*   结果是 v3 运行时/程序集被加载，尽管您最初打算（和 Powershell 的）运行 v2。
    *   如果没有 .NET 4 解决方法，这不会发生，因为默认情况下 v2 将在 .NET 2 下加载，因此发布者策略无法将其重定向到需要 .NET 4 的 v3。

很简单吧？！

因此，如果您想在 .NET 4 上保留 PSv2，您需要做的是手动禁用发布者策略。这可以在 app.config 文件中完成，请参阅[此处](https://stackoverflow.com/a/12063399/1366219)的相关帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:30:38.860

如果您安装了 v3，我不明白为什么要将 v2 与 CLR 4 一起使用。如果您的模块需要 .NET 4，请使用 PowerShell v3：它已经使用 CLR 4。

# ruby-on-rails - 我需要在 Ruby on Rails 应用程序中使用多个数据库吗？

> ID：12306144
> 
> 赞同：1
> 
> 时间：2012-09-06T18:23:53.810
> 
> 标签：ruby-on-rails, database

我正在使用 Ruby on Rails 设计 CRM。您如何看待，我是否需要为每个客户公司建立一个单独的数据库？或者我应该为每个人使用相同的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:47:31.073

如果它们是独立的公司或竞争公司（例如白标 CRM），您肯定会希望运行单独的实例，因为这样您就可以可靠地声称完全沙盒。否则，如果您无意中编写了代码，以某种方式允许一个数据显示另一个，那么游戏就结束了。你的客户会跑到山上，告诉每个人他们对你的产品的糟糕体验。

我什至建议您为每个客户运行单独的应用程序实例。Heroku 提供了一种超级简单的方式来部署 RoR 应用程序，因此每当您添加新客户时启动一个新应用程序是一种合理的方法。当然，如果您想要一个允许人们只需注册一个帐户的更全面的解决方案，您将必须有一个实例来在代码中强制执行客户数据沙盒。显然可以做到，但分离并不是在基础设施级别完成，这最终是最安全的方式。

最好的祝福。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:56:35.797

我用一个数据库来做，像这样：

```
class Company < ActiveRecord::Base
  has_many :records

  def recent_records
   records.desc(:created_at)
  end
end

class Record < ActiveRecord::Base
  belongs_to :company
end 
```

然后，在控制器中，我可以写：

```
@records = @company.recent_records 
```

并将其传递给视图。

希望这可以帮助。

# oracle - 检测存储为 clob 的 xml 结构的变化

> ID：12306146
> 
> 赞同：0
> 
> 时间：2012-09-06T18:24:02.460
> 
> 标签：oracle

我有一个表，其中包含一个存储为 clob 的 xml 文档。

```
TabA
----
Name varchar2(30) (PK)
Definition clob
other attributes 
```

注意：“定义”是存储 XML 的 clob 列。典型数据量：1500 行。

我的要求是进行某种侦察，并且每天只处理那些已经对 XML 进行更改的行，并处理那些作为新出现的行。识别新出现的行并仅处理它们很容易，并且可以通过名称上的“减号”来完成。但是，有没有一种好方法可以识别现有行中发生变化的 XML？

例如：如果 XML 中的元素已被删除或其属性从前一天更改，那么我应该能够处理该“名称”行。

表中典型 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataMart asOfDriver="EFFECTIVE_DATE" chainedData="false" classification="" convertUsingFxRate="false" coreEntityIndicator="false" createdAt="2011-12-22T17:41:11.002" createdBy="user1" description="" entitled="false" entitlementDriver="false" hierarchicalFlag="false" innerJoin="false" intent="Intermediate" lastUpdatedAt="2012-07-26T16:11:42.424" lastUpdatedBy="p459807" martType="SPOT" martUsage="Persistent" ownerRole="Meta Model SSC" preAggregatedData="false" referenceDataIndicator="false" retention="" rollupFunction="" staticAggregationOnly="false" status="ACTIVE" tags="">
<name>Name1</name>
<sources>
    <source isDefault="false" name="S1"></source>
</sources>
<rowType-mapping>
    <rowType identifier="0">
    <element alias="E1" name="E1" source="" sourceAlias="" sourceType="system" trackSource="false">
      <description localDescription="false"></description>
          <validationRule type="None"></validationRule>
          <mapping columnName="E1" function="" tableName="TABA"></mapping>
          <Opaque />
    </element>
    More element tags
    ...<element> </element>
    </rowType>
</rowType-mapping>
<parameters>
    <parameter filter="N" name="P1">
      <![CDATA[PM]]>
    </parameter>
</parameters>
</dataMart> 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:30:36.137

我建议使用[trigger](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm) r 将更改的项目记录到另一个表中。处理特定日期在日志表中记录的内容。

关于如何比较两个 XML，请参阅[此](http://ellebaek.wordpress.com/2011/02/01/comparing-xml-in-oracle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:41:16.527

只有在更新新 XML 之前在日志或临时表中保留以前（旧）xml 的记录，这才有可能。

从问题的外观来看，您似乎不仅想将 XML 与其以前的版本进行比较，而且还想找出“发生了什么变化？”。

比较和查找已更改内容的一个好方法是`diff`在新旧 XML 之间进行比较。[这](http://pastebin.com/eLHhPzPn)是一个对`CLOB`. 看看您是否可以使用它来满足您的需求。

或者

您可以将其转换`CLOB`为`Varchar`using `dbms_lob.substr( clob_column, for_how_many_bytes, from_which_byte );`，然后执行以下操作以`diff`在两个新的`VARCHAR`s-上执行

```
SELECT LTRIM(RTRIM(TRANSLATE('abcdef','abc',RPAD(' ',LENGTH('abcdef'))))) val
  FROM dual;

VAL
----------
def 
```

# xml-parsing - 使用 Nokogiri::XML::Reader 处理无效 XML

> ID：12306152
> 
> 赞同：2
> 
> 时间：2012-09-06T18:24:21.620
> 
> 标签：xml-parsing, nokogiri

我发现 Nokogiri xml 阅读器对 xml 语法很严格，因此如果它在 xml 中遇到无效字符，例如非转义的 & 符号（例如`<tag> Garage & Driveway </tag>`），将导致抛出错误。

因此，当我按如下方式使用阅读器时：

```
Nokogiri::XML::Reader(infile).each do |node|
  # does stuff with node
end 
```

抛出错误：

```
Entity: line 1056614: parser error : xmlParseEntityRef: no name
            <tag>The & is invalid</tag>
                      ^

transmogrifier/gems/nokogiri-1.5.5/lib/nokogiri/xml/reader.rb:106:in `each' 
```

使用这样的 XML：

```
<root> 
  <items>
    <tag>The & is invalid</tag>
  </items>
  <items>  ...  </items>
<root> 
```

在解析大型文档的中途。我注意到 Nokogiri::XML::Parser 处理这个（更）优雅，并删除所有无效字符，这给了我一个更优雅的解决方案的希望。

理想情况下，我希望能够捕获错误并继续进行每个解析（因为很少有项目具有无效字符）。关于如何优雅地处理这个问题的任何建议？

我注意到你可以传入 ParseOptions，但没有任何运气使用这些。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T05:28:06.700

从更宽容 XML 错误的切换`Nokogiri::XML`到可能会有所帮助。`Nokogiri::HTML`

# wordpress - WordPress 的 web.config 问题

> ID：12306160
> 
> 赞同：0
> 
> 时间：2012-09-06T18:25:11.210
> 
> 标签：wordpress, web-config, http-status-code-404, permalinks

我有一个网站位于[这里](http://pontis.inspecttech.com/)。我创建的任何链接都会导致 404 错误，所以我假设这与 WordPress 永久链接和 web.config 文件有关。同时，我已将 WordPress 的永久链接设置更改为默认设置，但我想将其更改回来。我在下面包含了 web.config 的当前设置：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <defaultDocument>
            <files>
                <add value="index.php" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration> 
```

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:00:48.117

当您将永久链接更改为“postname”时，请检查它是否在其他网站文件所在的根文件夹中创建 .htaccess。如果它没有创建 .htaccess 则在此处手动添加一个名为 .htaccess 的空白文件，然后将永久链接更改为默认值，然后更改为 "postname" 。

希望它会工作..

# objective-c - 使用 SDWebImage 时构建失败

> ID：12306161
> 
> 赞同：14
> 
> 时间：2012-09-06T18:25:11.827
> 
> 标签：objective-c, xcode, sdwebimage

我正在尝试在我的项目中使用[SDWebImage的类。](https://github.com/rs/SDWebImage)

我已将这些类添加到我的项目中，当我尝试构建它时，出现 7 个错误：

```
 Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MKAnnotationView", referenced from:
      l_OBJC_$_CATEGORY_MKAnnotationView_$_WebCache in MKAnnotationView+WebCache.o
  "_CGImageSourceCreateIncremental", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceUpdateData", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceCopyPropertiesAtIndex", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceCreateImageAtIndex", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_kCGImagePropertyPixelHeight", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_kCGImagePropertyPixelWidth", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我是 XCode 和 Objective-c 的新手，所以我不知道这个错误是什么意思。

任何人？

谢谢你。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-06T18:26:21.777

看起来您需要添加`MapKit`和`ImageIO`到项目中。

要做到这一点：

1.  单击 Xcode 中项目导航器顶部的项目。
2.  选择“构建阶段”选项卡。
3.  打开“将二进制文件与库链接”框。
4.  单击“+”。
5.  应用 MapKit 和 ImageIO 框架。

# openwrt - 如何为 OpenWRT 和/或 dd-wrt 编写 Hello World

> ID：12306165
> 
> 赞同：4
> 
> 时间：2012-09-06T18:25:35.630
> 
> 标签：openwrt, broadcom, dd-wrt

我正在运行 dd-wrt ​​或 OpenWRT 的 Linksys WRT54G-V4 上运行 Hello World 程序。

现在这个路由器正在运行 dd-wrt，原因我将在下面解释。我想将此路由器切换到 OpenWRT，因为我无法构建 dd-wrt ​​或其工具链。我“假设”OpenWRT 工具链应该生成可以在 dd-wrt ​​上运行的可执行二进制文件。

OpenWRT 构建起来非常简单，因为它有一个很好的菜单驱动的制作系统。使用这个方便的工具，我构建了一个工具链，可以从我的 x86 Ubuntu 机器交叉编译到 MIPS 目标。

按照说明，我已经能够构建 OpenWRT 并为 brcm47xx 和 brcm63xx 生成图像。

例如，这是我的 Hello World 小程序的成功编译：

```
jim@ubuntu:~/Desktop/tests$ cat helloC.c
#include <stdio.h>
int main (int argc, char **argv)
{
  printf("Hello World\n");
  return 0;
}
jim@ubuntu:~/Desktop/tests$
jim@ubuntu:~/Desktop/tests$ mipsel-openwrt-linux-gcc -o HelloWorld helloC.c
jim@ubuntu:~/Desktop/tests$
jim@ubuntu:~/Desktop/tests$ file HelloWorld
HelloWorld: ELF 32-bit LSB executable, MIPS, MIPS32 version 1, dynamically linked (uses shared libs), with unknown capability 0xf41 = 0x756e6700, with unknown capability 0x70100 = 0x3040000, not stripped
jim@ubuntu:~/Desktop/tests$ 
```

可悲的是，当我尝试在运行 dd-wrt ​​的 WRT54G-V4 上运行 HelloWorld 时，我遇到了段错误。

查看维基百科，我看到这个路由器使用的是 Broadcom BCM5352。

当我在 OpenWRT/trunk 目录中运行 make menuconfig 时，我看不到 BCM5352 的选项，这就是为什么我不愿意用我在 brcm47xx 或 brcm63xx 目录中创建的图像之一来刷新我的路由器。我不想猜错和砖路由器。

**问题 1** - 我应该使用 make menuconfig 选择哪种 Broadcom 配置来针对我的 WRT54G-V4 及其 BCM5352 芯片组？

**问题 2** - 我上面生成的“HelloWorld”可执行文件应该直接从 54G 上的命令行运行，还是必须按照[http://www.gargoyle-router.com/wiki/doku.php?id将其作为一个包=openwrt_coding](http://www.gargoyle-router.com/wiki/doku.php?id=openwrt_coding)？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-23T12:18:15.007

您可以按照官方howto（来自：[http](http://www.dd-wrt.com/forum/viewtopic.php?p=21499&sid=de90601a8d51747d1c8ccec29284127d) ://www.dd-wrt.com/forum/viewtopic.php?p=21499&sid=de90601a8d51747d1c8ccec29284127d ）

```
1\. The helloworld.c source
Code:   
#include <stdio.h>

int main ( void ) {
        printf( "Hello world!\n" );
}   

2\. Get and unpack the toolchain in your homedir
Code:   
cd ~
wget ftp://ftp.dd-wrt.com/sourcecode/toolchains.x86.debian.sp1.tar.bz2
tar -jxf toolchains.x86.debian.sp1.tar.bz2  

3\. Add the path to your cross-compiler executable to your path environment variable and compile helloworld.c
Code:   
PATH=~/toolchains/4.1.0-uclibc-0.9.28/bin:$PATH mipsel-linux-uclibc-gcc helloworld.c -o helloworld  

4\. Check if its correctly compiled with the cross-compiler
Code:   
file helloworld
helloworld: ELF 32-bit LSB executable, MIPS, version 1 (SYSV), dynamically linked (uses shared libs), not stripped  

5\. Finally, transfer the helloworld binary file to your router, set the executable bit and run it. 
```

使用 Ubuntu 6.06.1 LTS 测试。

# api - 带有 API 的邮箱/电子邮件托管服务

> ID：12306166
> 
> 赞同：5
> 
> 时间：2012-09-06T18:25:47.643
> 
> 标签：api, email, hosting

我正在尝试创建一个电子邮件服务 Web 应用程序，但我不想处理邮件服务器。我只对创建前端 Web 界面感兴趣。

理想的情况是当新用户注册时，我在所述服务上创建一个邮箱。我还将使用该服务从邮箱中提取电子邮件，写入这些邮箱（电子邮件标签），并可能使用相同的服务来发送邮件。

我能找到的最接近的东西是 mailGun.com，但此时它使用纯文本 -_- 存储邮箱密码。他们表示，这将在未来得到解决。

我还查看了邮戳和 emailYak。

有人知道其他服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T16:56:24.017

我正在使用为电子邮件托管提供 API 的 Qboxmail：

[http://www.qboxmail.com/it/documentazione/api-email-hosting](http://www.qboxmail.com/it/documentazione/api-email-hosting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T13:18:39.640

我没有用过它们，但是[context.io怎么样](http://context.io/)

# objective-c - 检查进程是否是 OSX 中的窗口进程

> ID：12306168
> 
> 赞同：0
> 
> 时间：2012-09-06T18:25:54.820
> 
> 标签：objective-c, c, macos, cocoa, unix

给定一个进程的PID，我如何检查它是否是一个窗口进程？我正在寻找 OSX 上的解决方案。

需要 Objective-C/C 解决方案。我在 OSX Mountain Lion 上。

我将窗口进程定义为在活动监视器中选择“窗口进程”选项卡时可以看到的进程。[http://cl.ly/FeXR](http://cl.ly/FeXR)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:08:29.653

```
[NSWorkspace runningApplications] 
```

`NSArray`这将返回 a中`NSRunningApplication`具有属性的所有用户应用程序`processIdentifier`。

或者您可以`runningApplicationWithProcessIdentifier:`直接使用来获取具有指定PID的应用程序。

这是示例代码：http: [//developer.apple.com/library/Mac/#samplecode/AppList/Introduction/Intro.html](http://developer.apple.com/library/Mac/#samplecode/AppList/Introduction/Intro.html)

通过 的`activationPolicy`属性，`NSRunningApplication`您可以获得 Windowed 状态。我修改了`AppList`代码，使其仅显示窗口应用程序，如下所示。这与活动监视器显示的内容相匹配。

![在此处输入图像描述](../Images/cfd051b42eb3adda64d201607867e4a0.png)

特别是，您正在寻找`NSApplicationActivationPolicyRegular`.

但是请注意限制。这仅适用于用户拥有的进程。

所有其他方法均已弃用，将来可能无法使用。不再推荐像`GetBSDProcessList`和 Carbon's这样的方法。`GetProcessInformation`

# objective-c - Objective-C 正确的内存管理和使用 ARC 清理

> ID：12306170
> 
> 赞同：1
> 
> 时间：2012-09-06T18:25:59.267
> 
> 标签：objective-c, memory-management, automatic-ref-counting

来自托管内存的世界，想知道在使用 ARC 时清理对象的正确方法是什么。

例如：如果在 C# 中声明一个实例变量，.NET 将允许 GC 在它离开作用域（方法/循环体等）后拾取它

在 Objective-C 中清理的正确方法是什么？只需将引用/指针设置为 nil 或调用 dealloc 或者一旦执行离开范围并为您完成工作，ARC 是否会检测到没有外部引用指向实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:30:24.093

> 一旦执行离开范围并为您完成工作，ARC是否会检测到没有外部引用指向实例

基本上，是的，这正是 ARC 要做的。使用 ARC 时不需要清理对象；事实上，您不能（它会阻止您尝试执行手动内存管理）。

您可能想查阅我书中的相关讨论：

[http://www.aeth.com/iOSBook/ch12.html#_memory_management](http://www.apeth.com/iOSBook/ch12.html#_memory_management)

它解释了幕后真正发生的事情（实际上是如何管理内存的），然后继续描述 ARC 如何保护您免受其中大部分的影响。

请注意（正如我在上面引用的 URL 中解释的那样），它主要不是由垃圾收集之类的东西完成的：它是通过在整个代码中插入不可见的显式内存管理来完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:34:27.627

ARC 的意思是“自动引用计数”，它只是让编译器为您添加对// 的调用的一种`retain`方式。它与 GC 不同，但在大多数情况下，您可以考虑自动为您管理对象的生命周期，就像在 GC 中一样。`release``autorelease`

如果您想了解更多信息，您应该阅读[ARC 上的 LLVM 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#general)

最后一点：**永远不要给`dealloc`自己**打电话。`dealloc`是对象的终结器，一旦 ObjC 运行时确定对象引用计数已达到 0，就会调用它。此方法仅意味着被子类覆盖。在 ARC 模式下，您通常不需要这样做，除非您的对象引用了在对象本身完成后需要完成的非对象 ivars。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T21:32:52.143

好吧，在过去，iOS 程序员负责通过向对象发送释放消息来告诉系统他们何时使用了他们分配的对象。这是根据称为手动引用计数的内存管理系统完成的。从 Xcode 4.2 开始，程序员不再需要担心这一点，并且可以依靠系统来处理必要的内存释放。这是通过称为自动引用计数或简称 ARC 的机制完成的。当您使用 Xcode 4.2 或更高版本编译新应用程序时，ARC 默认启用。

您还可以禁用 ARC，在您的 Xcode 界面中，转到您的主项目（不是 main.h）您的实际 Xcode 项目，然后选择它，您应该会在 Xcode 中看到一个显示项目设置的窗口，会有一个如果您来自数据管理和内存领域你说过，但请记住，你会更容易保持更新到 iOS 新功能系统，这对程序员来说更容易编程，它只会让我们的生活更轻松。

现在，使用 ARC 的“在 Xcode 中清理的正确方法”是使用“alloc”和“init”。

**使用 Xcode 中的 ARC，您无需担心现在 Xcode 的工作就是“清理”**，您只需要：

1) 创建一个变量。

2) 分配。

3) 初始化。

就是这样。

这里有一个例子：

```
int main (int argc, char * argv[])
{
   @autoreleasepool {
      Variable  *myVariable;

      // Create an instance of a Variable and initialize it

      myVariable = [Variable alloc];
      myVariable = [myVariable init];

      // Set variable to 4/20

      [myVariable setNumerator: 4];
      [myVariable setDenominator: 20];

      // Display the variable using the print method

      NSLog (@"The value of myVariable is:");
      [myVariable print];
   }

   return 0;
} 
```

只需分配然后初始化，你不需要做任何其他事情。

请记住 getter 和 setter。

# php - PHP-FPM 使用大量内存

> ID：12306172
> 
> 赞同：0
> 
> 时间：2012-09-06T18:26:01.920
> 
> 标签：php, nginx, fastcgi

我正在使用 PHP-FPM 通过 fastcgi 向 nginx 提供动态内容。一切正常，除了 PHP-FPM 进程使用了​​这么多内存。根据新的遗物进程监视器，PHP-FPM 有 6 个进程正在运行，它们组合使用 220+ MB。在我看来不正常？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:38:09.137

需要检查的几件事是/在开发环境中调试的提示：

*   您能否将 php memory_limit 设置为 35M 并查看 PHP 错误出在哪里？
*   是否正在运行任何大型数据库查询？
*   您是否将 APC 与 PHP 一起使用，您的共享内存大小 (shm) 是多少？
*   如果您熟悉 xDebug (http://xdebug.org/)。您可以使用 xDebug 分析器 (http://xdebug.org/docs/profiler) 查看正在使用内存的内容。那是您最好的选择。
*   PHP-FPM 允许您设置最大请求参数（pm.max_requests），该参数将在一定数量的请求后重新启动子进程。注意将其设置为低可能会导致性能不佳和负载下的奇怪行为。

老实说，每个进程 37M 是很高的，但是我已经看到像 Magento 这样的应用程序接近这个，所以可能没有问题。希望有帮助。

# android - 在 Android Manifest 中使用 arrays.xml 进行意图过滤器

> ID：12306174
> 
> 赞同：1
> 
> 时间：2012-09-06T18:26:09.840
> 
> 标签：android, arrays, android-manifest, intentfilter

我有一个 3rd 方意图（各种音乐播放器）的集合，存储在 ressources 下的 arrays.xml 中。现在我想在 Android Manifest 中使用它们。我明确地要求这个静态。我知道我也可以在代码中执行此操作，但这会破坏应用程序的目的。

无论如何，因为恐怕我知道答案：是否有不同的方法来维护某种清单，该清单将从清单中引用？

在此先感谢，斯特夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:18:46.697

抱歉，它们是静态的，不能那样做。

> 意图过滤器是 IntentFilter 类的一个实例。但是，由于 Android 系统在启动该组件之前必须知道该组件的功能，因此 Intent 过滤器通常不在 Java 代码中设置，而是在应用程序的清单文件 (AndroidManifest.xml) 中作为元素设置。

[http://developer.android.com/guide/components/intents-filters.html#ifs](http://developer.android.com/guide/components/intents-filters.html#ifs)

# ios - 构建 iOS 静态库时没有设置标题可见性的选项

> ID：12306177
> 
> 赞同：2
> 
> 时间：2012-09-06T18:26:22.573
> 
> 标签：ios, xcode, static-libraries

我正在使用**Xcode4.4**构建一个 iOS 静态库。但是当我设置标题的可见性时，我看不到任何选项。通常应该有一些选项，如**Public、Private、Project**。与其他一些lib项目相比，我仍然找不到问题......

我选择**Hellor.h**时文件检查器的屏幕截图如下所示：

![Hellor.h 的文件检查器视图](../Images/0de1bf2c133a9daeb5f7c51bf354668e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:31:32.490

自 Xcode 4.4 以来，情况确实发生了变化。我向 Apple 开发者技术支持寻求帮助，以下是回复：

**在最新的 Xcode 中，导出的头文件是在目标库的 Build Phases 下设置的。默认情况下，静态库模板会创建“复制文件”阶段。添加到此阶段的任何标头都将被复制到库的包含目录中，因此“公开”。如果您的项目缺少“复制文件”构建阶段，请按照“在 iOS 中使用静态库”指南的“创建库”部分中“配置导出的标头”下的说明创建和配置该阶段。[https://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/creating.html](https://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/creating.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:10:24.587

没有与静态库关联的“头文件”——你得到的只是一个 .a 文件。你想要的是创建一个“框架”项目，它现在似乎可以用于 Xcode 4 中的 iOS 项目。

# java - WINDOWS 内存提升

> ID：12306181
> 
> 赞同：0
> 
> 时间：2012-09-06T18:26:32.673
> 
> 标签：java

您好，我有一个使用 java.swing.timer 的应用程序，这是在循环中。问题是我的 Windows 内存进程仍然发光，并且不会停止。我试图清理我的变量，使用 System.gc() 等......但不工作。我制作了一个示例来使用线程、timerstack 和 swing timer 进行测试，我在 jcombobox 中添加了 itens 并且内存仍在增加。

代码如下：

//我的计时器

```
@Action
public void botao_click1() {
    jLabel1.setText("START");
    timer1 = new java.util.Timer();
    timer1.schedule(new TimerTask() {

        @Override
        public void run() {
            adicionarItens();
            limpar();
        }
    }, 100, 100);
}

@Action
public void botao_click2() {
    thread = new Thread(new Runnable() {

        public void run() {
            while (true) {
                adicionarItens();
                try {
                    Thread.sleep(100);
                    limpar();
                } catch (InterruptedException ex) {
                    Logger.getLogger(MemoriaTesteView.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    });
    thread.start();
}

private void limpar() { // CleanUp array and jcombobox

    texto = null;

    jComboBox1.removeAllItems();
    jComboBox1.setVisible(false);
    //jComboBox1 = null;

    System.gc();

}

private void adicionarItens() { //AddItens

    texto = new String[6];

    texto[0] = "HA";
    texto[1] = "HA";
    texto[2] = "HA";
    texto[3] = "HA";
    texto[4] = "HA";
    texto[5] = "HA";

    //jComboBox1 = new javax.swing.JComboBox();

    jComboBox1.setVisible(true);

    for (int i = 0; i < texto.length; i++) {
        jComboBox1.addItem(texto[i].toString());
    }

    System.out.println("System Memory: "
            + Runtime.getRuntime().freeMemory() + " bytes free!");

} 
```

请帮忙！=(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:43:12.043

## 目前尚不清楚您发布的一小段代码实际上是否存在问题。

### 无论哪种方式，你都无法控制你想控制的东西

`-Xmx`仅控制 Java 堆，它不控制JVM 对*本机内存*的消耗，根据实现，其消耗完全不同。

来自以下文章[感谢内存（了解 JVM 如何在 Windows 和 Linux 上使用本机内存）](http://www.ibm.com/developerworks/java/library/j-nativememory-linux/)

维护堆和垃圾收集器使用您无法控制的本机内存。

> 需要更多的本机内存来维护维护 Java 堆的内存管理系统的状态。收集垃圾时，必须分配数据结构来跟踪空闲存储和记录进度。这些数据结构的确切大小和性质因实现而异，但许多与堆的大小成正比。

`javac`并且 JIT 编译器像使用本机内存一样

> 字节码编译使用本机内存（与 gcc 等静态编译器需要内存才能运行一样），但 JIT 的输入（字节码）和输出（可执行代码）也必须存储在本机内存中。包含许多 JIT 编译方法的 Java 应用程序比较小的应用程序使用更多的本机内存。

然后你有使用本机内存的类加载器

> Java 应用程序由定义对象结构和方法逻辑的类组成。它们还使用 Java 运行时类库中的类（例如 java.lang.String），并且可能使用第三方库。只要使用这些类，就需要将它们存储在内存中。类的存储方式因实现而异。

我什至不会开始引用有关线程的部分，我认为您的想法是， `-Xmx`它无法控制您认为它控制的内容，它控制 JVM 堆，并非所有内容都进入 JVM 堆，并且堆占用更多您指定用于管理和簿记的本机内存。

## 我在任何地方都没有看到任何提及`OutOfMemoryExceptions`。

**你所关心的你无法控制，反正不是直接**

您应该关注的是您可以控制的内容，这确保您不会保留比您需要的时间更长的引用，并且您不会不必要地重复事物。Java 中的垃圾收集例程经过高度优化，如果您了解它们的算法是如何工作的，就可以确保您的程序以最佳方式运行，以使这些算法能够正常工作。

**Java 堆内存不像其他语言中的手动管理内存，这些规则不适用**

在其他语言中被认为是*内存泄漏*的事情/根本原因与 Java 中的垃圾收集系统不同。

在 Java 中，内存很可能不会被一个正在泄漏的 uber-object 消耗（其他环境中的悬空引用）。

中间对象可能被垃圾收集器保留的时间比预期的要长，因为它们所处的范围以及在运行时可能会发生变化的许多其他事情。

**示例：**垃圾收集器可能会确定有候选者，但因为它认为还有大量内存可用，所以在那个时间点将它们刷新出来可能过于昂贵，它会等到内存压力越来越大。

垃圾收集器现在真的很好，但它不是魔法，如果你在做退化的事情，它会导致它不能以最佳方式工作。互联网上有很多关于所有 JVM 版本的垃圾收集器设置的文档。

这些未引用的对象可能只是没有达到垃圾收集器认为需要它们才能从内存中清除它们的时间，或者可能存在对它们的引用由其他对象（`List`）持有，例如你不实现仍然指向该对象。这就是 Java 中最常见的*泄漏*，更具体地讲是引用泄漏。

**示例：**如果您知道需要`String`使用`StringBuilder`创建它而`new StringBuilder(4096);`不是默认值（例如 32）来构建 4K，并且将立即开始创建垃圾，这些垃圾可以代表您认为对象大小的许多倍。

您可以发现使用 VisualVM 实例化了多少类型的对象，这将告诉您需要了解的内容。不会有一个大闪光灯指向单个类的单个实例，说“这是大内存消耗者！”，除非只有一个实例`char[]`你正在阅读一些大量的文件到，这也是不可能的，因为许多其他类在`char[]`内部使用；然后你几乎已经知道了。

**我没有看到任何提及`OutOfMemoryError`**

您的代码可能没有问题，垃圾收集系统可能没有承受足够的压力来启动和释放您*认为*应该清理的对象。您**认为**的问题可能不是，除非您的程序因`OutOfMemoryError`. 这不是 C、C++、Objective-C 或任何其他手动内存管理语言/运行时。您无法以您期望的详细程度来决定内存中的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T18:34:27.027

从理论上讲，Java 不受基于 C 语言的那种“泄漏”的影响。但是，设计一个以或多或少无限制的方式增长的数据结构仍然很容易，无论您是否打算这样做。

而且，当然，如果您安排基于计时器的任务等，它们将一直存在，直到时间到期并且任务完成（或取消），即使您不保留对它们的引用。

此外，一些 Java 环境（Android 因这一点而臭名昭著）以不受普通 GC 操作约束的方式分配图像等，并可能导致堆以无限制的方式增长。

# groovy - Groovy 抽象类的构造函数和继承

> ID：12306186
> 
> 赞同：5
> 
> 时间：2012-09-06T18:26:46.457
> 
> 标签：groovy, constructor, abstract-class, subclass

我有一个抽象的 java 类，它有一个构造函数，我正在从一个 groovy 类扩展它。（这个想法是将java类作为一个契约保留在应用程序中，并加载实现某些构造函数和方法的外部groovy类）

如何在 Groovy 中强制实现抽象超类的构造函数？Groovy 是否允许强制实现抽象父类的构造函数？

问题是 Eclipse Groovy IDE 并没有强迫我在子类中实现父类的构造函数，我认为 Groovy 会自动创建它，所以这就是不强制它的原因。但是，在运行时尝试使用 java 反射获取构造函数失败，如果我没有在子类中定义父构造函数，它会失败。

（我在 Groovy 的经验为 0）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T16:00:41.737

它看起来像是编译器中未经检查的情况。反编译后，扩展类得到一个空的构造函数。测试应该让您有所了解，因为这种情况在运行时不起作用。

我不知道如何使用这个类；我尝试了我知道的方法：

```
abstract class AbstractClass {
  String string
  Integer integer
  AbstractClass(String string, Integer integer) {
    this.string = string
    this.integer = integer
  }
}

class ImplClass extends AbstractClass { }

// every constructor fails
abs1 = new ImplClass('a', 1)

abs2 = [string: 'b', integer: 2] as ImplClass

abs3 = new ImplClass(abs: 'c', a: 3)

abs4 = ImplClass [string:'d', integer:4] 
```

他们都没有在运行时工作，但编译得很好;-)。这种情况更多的是关于编译错误与运行时错误。也许填写JIRA？

另一方面，如果您需要继承构造函数，则可以`@groovy.transfom.InheritConstructors`在扩展类中进行。这样，您将拥有构造函数，而无需`super()`显式调用。

# css - IE 替代 Column-Count & Column-Gap

> ID：12306188
> 
> 赞同：17
> 
> 时间：2012-09-06T18:26:51.633
> 
> 标签：css, internet-explorer

我想知道是否有 IE 替代使用`column-count`and `column-gap`？

我发表了这篇关于创建一个列表[的帖子](https://stackoverflow.com/questions/12305389/auto-create-columns-using-single-plain-list)，该列表会为每五个元素自动创建一个新列。Leniel 提出了一个使用但不受 IE 支持的解决`column-count`方案`column-gap`。我正在寻找一个后备解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T06:13:55.343

我发现了这个：[使用 CSS3 的多列布局](http://webdesign.about.com/od/css3/a/css3-multi-columns.htm)。阅读标题为*CSS3 多列浏览器支持*的部分。它声明如下：

> 如果您需要支持不支持多列的浏览器，那么您应该为这些浏览器提供备用选项。这是使用[Modernizr](http://modernizr.com)脚本的方法...

1.  将以下 SCRIPT 标记放在您的 HEAD 中的任何其他样式表之后：

    ```
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script> 
    ```

2.  在上面的行下面添加另一个 SCRIPT，内容如下：

    ```
    <script>
    Modernizr.load({
      test: Modernizr.csscolumns,
      yep: 'columns.css',
      nope: 'no-columns.css'
    });
    </script> 
    ```

3.  创建一个包含多列 CSS 的 CSS 样式表，并将其保存为同一目录中的 columns.css。

4.  创建一个包含您的备用 CSS 的 CSS 样式表（例如带有浮动的列）并将其保存为同一目录中的 no-columns.css。在 IE 和 Chrome、Safari 或 Opera 中测试您的页面。

* * *

如果您有兴趣采用这种方式，[多列](http://css-tricks.com/snippets/css/multiple-columns/)页面提供了 JavaScript 后备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-02T09:23:03.717

这是如何使用多列创建菜单的解决方案，它看起来与使用 column-count 属性创建的菜单相同，并且适用于**ALL BROWSERS**。

这是通过浮动元素完成的，但这里的技巧是在 javascript（或服务器端）中重新排序元素，以便它们**自然流动看起来像从上到下而不是从左到右**

***项目 1 项目 4 项目 7***

***项目 2 项目 5 项目 8***

***第 3 项 第 6 项***

示例：http: [//jsfiddle.net/xrd5Y/16/](http://jsfiddle.net/xrd5Y/16/)

```
// number of columns
var columns = 4;

var $ul = $('ul.multicolumn'),
    $elements = $ul.children('li'),
    breakPoint = Math.ceil($elements.length/columns);
    $ordered = $('<div></div>');

function appendToUL(i) {
    if ($ul.children().eq(i).length > 0) {
        $ordered.append($ul.children().eq(i).clone());
    } 
    else $ordered.append($('<li></li>'));
}

function reorder($el) {
    $el.each(function(){
        $item = $(this);

        if ($item.index() >= breakPoint) return false;

        appendToUL($item.index());
        for (var i = 1; i < columns; i++) {
            appendToUL(breakPoint*i+$item.index());
        }
    });

    $ul.html($ordered.children().css('width',100/columns+'%'));
}

reorder($elements); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T22:07:10.577

这对我有用：您可以直接在样式表中使用 Modernizr 的类，而不是使用 JS 或仅限 IE 的条件。

如果你在我们的网页上做一个 Inspect Element，你会看到在 html 标签中添加了很多 CSS 类：

![如果你在我们的网页上做一个 Inspect Element，你会看到有很多 CSS 类添加到了 html 标签中](../Images/f858074fa636213b3f1c345efa635a4a.png)

如果用户的浏览器不支持 css 列，您将看到一个“no-csscolumns”类，您可以使用它来浮动元素。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-03-24T07:05:30.333

这是我为 IE 和 IE Edge 发现的简单解决方案，只需按段落分隔每一列`<p> your text </p>`column-2 `<p> your text </p>`，它对我有用。

```
#subfootera {
    with:100%;
    text-align:left;
    padding-top: 20px;
    padding-bottom: 20px;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 14px;
    font-weight: bold;
    color: #000;
    text-shadow:1px 1px 1px #999;

}

.subfooterb {
    -webkit-column-count: 2; /* Chrome, Safari, Opera */
    -moz-column-count: 2; /* Firefox */
    column-count: 2;
    -webkit-column-gap: 10px; /* Chrome, Safari, Opera */
    -moz-column-gap: 10px; /* Firefox */
    column-gap: 10px;
}

  <div id="subfootera">
    <div class="subfooterb">
    <p>Your Text.</p>
    <p>Your text or an img</p>
     </div>
  </div> 
```

# html - 在导航下方添加社交媒体图标

> ID：12306192
> 
> 赞同：0
> 
> 时间：2012-09-06T18:27:11.367
> 
> 标签：html, css, navigation, positioning

我正在尝试在右侧导航下方添加社交媒体图标，但我只是不确定我应该在哪里放置图像链接以实现这一点。任何帮助将不胜感激！我在下面添加了我的网站 css 和 html。网站：[http ://customjtw.virb.com/](http://customjtw.virb.com/)

**CSS：**

```
 /*
---------------------------------------
APOLLO
---------------------------------------
by Ryan Clark
www.ryanvsclark.com
---------------------------------------                                                                                                          
*/

/* ---------- GLOBAL STYLING RULES & RESETS ---------- */
* {
    margin: 0px;
    padding: 0px;
}

<virb get="customize.fonts.font_face" />

body {
    background: <virb get="customize.colors.background_footer" />;
    font: normal <virb get="customize.fonts.body_size" /> <virb get="customize.fonts.body_family" />;
    color:<virb get="customize.colors.text" />;
    line-height: 1.5;
    font-family: <virb get="customize.fonts.body_family" />,serif; 
}

hr { display: none; }

#page hr {
    display: block;
    border: none 0; 
    border-top: 1px solid <virb get="customize.colors.line_page" />;
    width: 100%;
    height: 1px;
    margin: 0 0 20px 0;
}

input, option, textarea, 
button {
    font: normal <virb get="customize.fonts.body_size" /> <virb get="customize.fonts.body_family" />;
}

ul, ol {
    list-style-type: none;
}

q:before, q:after { content: ""; }

big   { font-size: 12px; }
small { font-size: 9px; }

img   { border: none; }

a {
    color: <virb get="customize.colors.link" />;
    text-decoration: none;
    outline: none;
}

a:hover {
    color: <virb get="customize.colors.link_hover" />;
}

#footer a {
    color: <virb get="customize.colors.footer_link" />;
    text-decoration: none;
    outline: none;
}

#footer a:hover {
    color: <virb get="customize.colors.footer_link_hover" />;
}

p, h1, h2, h3, h4, h5, h6,
ol, ul {
    line-height: 1.5;
}
#container_right p {
    line-height: 150%;
}
#page #description h2, #page #blog .text h3 {
    font-size: 1.5em;
    font-family: <virb get="customize.fonts.body_family" />;
}

.homepage #page #description h2 {
    margin: 10px 0 0 0;
    font-size: 1.5em;
}

.homepage #page #description h3 {
    font-size: 1.2em;
    font-family: <virb get="customize.fonts.body_family" />;
    color:#888;
}

#header_wrapper, #page_wrapper, #footer_wrapper  {
    width:100%;
    position:relative;
}

/* ---------- HEADER ---------- */

div#header_wrapper {
    width:100%;
    background: <virb get="customize.colors.background_header" />;
    z-index: 2;
}

div#header {
    width:960px;
    margin:0 auto;
    padding:35px 0 20px;
}
    #header h1 {
        font: normal <virb get="customize.fonts.site_size" /><virb get="customize.fonts.site_family" />;
        line-height: 100%;
    }

        #header h1 a,
        #header h1 a:hover {
            color: <virb get="customize.colors.site_name" />;
        }

        #header h1 img {
            display: block;
            max-width: 300px;
        }

    #header h2 {
        font-weight: bold;
        font-size: <virb get="customize.fonts.tagline_size" />;
        font-family: <virb get="customize.fonts.header_family" />;
        color: <virb get="customize.colors.tagline" />;
        line-height: 110%;
        padding-top: 6px;
    }

    #header #page_title {
       float:left;
    }
    #header #site_nav {
       float:right;
       margin-top: 54px;
    }

#display_name {width: 300px;}

    #display_name h2 {color:<virb get="customize.colors.tagline" />; text-transform: uppercase;}

/* ---------- NAVIGATION ---------- */

div#site_nav {
    display: block;
    max-width: 700px;
}

#site_nav ul li {
    display: inline;
    position: relative;
    font-size: <virb get="customize.fonts.nav_size" />;
    font-family: <virb get="customize.fonts.header_family" />;
    font-weight: bold;
    letter-spacing: .2px;
    text-transform: uppercase;
}

#site_nav div.clear {
    display: none;
}

    #site_nav li.section:after { content: " "; }

    #site_nav li.section ul { display: none; } 
    #site_nav li.section:hover ul { display: block; }
    #site_nav li.section ul {
        position: absolute;
        top: <virb get="customize.fonts.nav_size" />;
        left: 10px;
        width: 200px;
        z-index: 111;
        padding-top: 10px;
    }
        #site_nav li.section ul li {
            float: none;
            display: block;
            font: normal <virb get="customize.fonts.nav_size" />;
            background: <virb get="customize.colors.nav_dropdown" />;
            margin: 0;
            padding: 7px 7px 5px 7px;
            letter-spacing: 0;
            text-align: left;
            line-height: 1.5;
            border-bottom: 1px solid <virb get="customize.colors.background_header" />;
        }
            #site_nav li.section ul li:last-child {border-bottom: none;}

            #site_nav li.section ul li a {
                text-transform: none;
                letter-spacing: 0;
                padding: 4px 7px 4px 3px;
                font: <virb get="customize.fonts.header_family" />;
                display: block;
            }

    #site_nav ul li a, 
    #site_nav ul li.section {
        cursor: pointer;
        padding: 0 12px;
        font: <virb get="customize.fonts.header_family" />;
        color: <virb get="customize.colors.nav_link" />;
    }
    #site_nav ul li a:hover,
    #site_nav ul li.section:hover {
        color: <virb get="customize.colors.nav_hover" />;
    }
    #site_nav ul li.active, #site_nav ul li.active a {
        color: <virb get="customize.colors.nav_hover" />;
    }

    #site_nav ul li.active ul li a {
        color: <virb get="customize.colors.nav_link" />;
    }

    #site_nav ul li.active ul li a:hover {
        color: <virb get="customize.colors.nav_hover" />;
    }

    #site_nav ul li.active ul li.active a {
        color: <virb get="customize.colors.nav_hover" />;
        cursor: default;
    }

/* ---------- PAGE ---------- */

div#page_wrapper {
    background: <virb get="customize.colors.background_page" />;
    z-index: 1;
    overflow: hidden;
}

div#page {
    width:960px;
    margin:0 auto;
    padding:25px 0 15px;
    overflow: hidden;
    border-top: 1px solid <virb get="customize.colors.line_page" />;
    border-bottom: 1px solid <virb get="customize.colors.line_page" />;
}

body.index div#page {padding-bottom: 0;}

#page div#description {
    position: relative;
    padding: 0;
    width:600px;
}
    #page #description p, #page #description h2, #page #description h3, #page #description h4, #page #description h5, #page #description h6 {
        padding: 0 0 15px 0;
    }

    #page #description ul li, #page #description ol li {padding: 0 0 5px 0;}

    #page #description h2 {line-height: 1.3;}

div#share {
    display: block;
    position: relative;
    clear: both;
    padding: 10px 0 0 0;
}

#page #title {
    display: yes;
    font-size: 22px;
    color:#527fb1;
    padding: 0 0 12.5px 0;
}

/* ---------- SIDEBAR ---------- */

div#widgets {
    font-size: 11px;
    overflow: hidden;
    line-height: 0;
    font-family: <virb get="customize.fonts.footer_family" />;
}

div#widgets:after {
    display: block;
    visibility: hidden;
    clear: both;
    content: "\00A0";
}

    #widgets .module {
        display: block;
        float: left;
        width: 300px;
        padding: 0 0 20px 0;
        margin: 0 30px 0 0;
    }
    #widgets .last_module {margin: 0;} 

        #widgets .module h4 {
            font: italic <virb get="customize.fonts.body_size"/> <virb get="customize.fonts.footer_family" />;
            color: <virb get="customize.colors.widget_text" />;
            letter-spacing: .2px;
            padding: 0 0 10px 0;
            margin-bottom:10px;
            border-bottom: 1px solid <virb get="customize.colors.line_footer" />;
        }
            #widgets h4 a { color: <virb get="customize.colors.footer_link" />; }
            #widgets h4 a:hover { color: <virb get="customize.colors.footer_link_hover" />; }

        #widgets .module p {
            font-size: <virb get="customize.fonts.body_size" />;
            line-height: 150%;
            padding: 0;
        }

            #widgets .module.twitter ul li span a,
            #widgets .module.lastfm ul.recent_plays li span {
                color: <virb get="customize.colors.footer_link" />;
            }
            #widgets .module.twitter ul li span a:hover {
                color: <virb get="customize.colors.text" />;
            }

        #widgets .module.lastfm ol {
            list-style-type: decimal;
            list-style-position: inside;
        }

            #widgets .module.rss-feed ul,
            #widgets .module.blog-posts ul, 
            #widgets .module.twitter ul, 
            #widgets .module.lastfm ul.upcoming_events,
            #widgets .module.lastfm ul.recent_plays {
                margin-bottom: -10px;
            }

            #widgets .module.rss-feed ul li,
            #widgets .module.blog-posts ul li,
            #widgets .module.twitter ul li,
            #widgets .module.lastfm ul.upcoming_events li,
            #widgets .module.lastfm ul.recent_plays li {
                padding-bottom: 10px;
            }

                #widgets .module.lastfm ol li img { display: none; }

        #widgets .count_2, #widgets .count_5, #widgets .count_8, #widgets .count_11, #widgets .count_14, #widgets .count_17 {
            margin: 0;
        }

    /* AUDIO PLAYER */

    .module.audio_player ul {
        display: block;
        width: 278px;
        background: #fff;
        border: solid 1px #ddd;
        border-radius: 5px;
        padding: 10px 10px 15px 10px;
        overflow: hidden;
    }
    .module.audio_player li .album_image {
        height: 75px;
        width: 75px;
        padding: 5px 15px 5px 5px;
        margin-bottom: 10px;
        display: block;
        float:left;
    }
    .module.audio_player li .album_image img {
       height:75px;
       width:75px;
    }

    .module.audio_player li {
        display: none;
    }
    .module.audio_player li.selected {
        display: block;
    }
    #widgets .module.audio_player li h3 {
        text-align: left;
        font-size: <virb get="customize.fonts.body_size" />;
        padding-bottom: 2px;
    }
        #widgets .module.audio_player li h3 .download {
            display: none;
        }
    #widgets .module.audio_player ul h4 {
        display: block;
        text-align: left;
        font: normal 12px <virb get="customize.fonts.footer_family" />;
        text-transform: none;
        border: none;
        letter-spacing: 0;
        padding: 0 0 2px 0;
        margin: 0;
        color: <virb get="customize.colors.text" />;
    }
    .module.audio_player .controls {
        display: block;
        float: left;
        margin:5px 0 10px 0;
        text-align: left;
        padding-bottom: 10px;
        width: 180px;
        border-bottom: 1px solid <virb get="customize.colors.line_page" />;
    }
        .module.audio_player .controls .prev,
        .module.audio_player .controls .next {
            display: inline-block;
            width: 20px;
            height: 30px;
        }
        .module.audio_player .controls .prev a,
        .module.audio_player .controls .next a {
            display: inline-block;
            width: 20px;
            height: 30px;
            overflow: hidden;
            text-indent: 1000px;
            -moz-border-radius: 7px;
            -webkit-border-radius: 7px;
            border-radius: 7px;
        }
        .module.audio_player .controls .prev a {
            background: url(<virb get="theme.assets.url" />graphics/sprite_controls.png) no-repeat left -7px;   
        }
        .module.audio_player .controls .next a {
            background: url(<virb get="theme.assets.url" />graphics/sprite_controls.png) no-repeat right -7px;
        }

        .module.audio_player .controls .playpause {
            display: inline-block;
            height: 30px;
            width: 35px;
            overflow: hidden;
        }
            .module.audio_player .controls .playpause a {
                display: block;
                height: 30px;
                width: 35px;
                overflow: hidden;
                text-indent: 1000px;
                background: <virb get="customize.colors.text" /> url(<virb get="theme.assets.url" />graphics/sprite_controls.png) no-repeat center -7px;
                -moz-border-radius: 7px;
                -webkit-border-radius: 7px;
                border-radius: 7px;
            }
            .module.audio_player .playing .controls .playpause a {
                background: <virb get="customize.colors.link" /> url(<virb get="theme.assets.url" />graphics/sprite_controls.png) no-repeat center -52px;
            }

    .module.audio_player audio {
        width: 150px;
        padding: 15px 5px 0px 5px;
    }

    .module.audio_player .length {
        display: block;
        height: 6px;
        width: 150px;
        border: solid 1px #ddd;
        background: #ddd;
        -moz-border-radius: 2px;
        -webkit-border-radius: 2px;
        border-radius: 2px; 
        position: relative; 
        margin-top: 9px;
        float:left;
        margin-left:95px;
    }
        .module.audio_player .length .load {
            height: 6px;
            width: 0%;
            display: block;
            background: <virb get="customize.colors.text" />;
            position: absolute;
        }
        .module.audio_player .length .progress {
            height: 6px;
            width: 0%;
            display: block;
            background: <virb get="customize.colors.link" />;
            position: absolute;
        }
        .module.audio_player .length .time {
            color: <virb get="customize.colors.text" />;
            font-size: <virb get="customize.fonts.body_size" />;
            position: absolute;
            left: 157px;
            top: -4px;
        }

/***** @group Cart widget *****/

.cart-widget {
  width: 75px;
  text-align: center;
  position: fixed;
  top: 100px;
  right: 0;
  z-index: 2000;
}

  .cart-widget .cart {
    background: <virb get="customize.colors.line_page" />;
    font-family: <virb get="customize.fonts.body_family" />;
    font-size: <virb get="customize.fonts.body_size" />;
    color: <virb get="customize.colors.text" />;
    padding: 10px;
  }
    .cart-widget .cart span {
      display: block;
    }
    .cart-widget .cart span.label {
      font-size: .65em;
      text-transform: uppercase;
    }
    .cart-widget .cart span.cart-total {
      font-weight: bold;
    }

  .cart-widget .checkout {
    background: <virb get="customize.colors.link_hover" />;
    padding: 5px 10px;
    text-transform: uppercase;
    color: <virb get="customize.colors.background_page" />;
    font-size: 9px;
    display: block;
    margin-top: 1px;
    -webkit-transition: all .2s linear;
       -moz-transition: all .2s linear;
         -o-transition: all .2s linear;
            transition: all .2s linear;
  }
    .cart-widget .checkout:hover {
      background: <virb get="customize.colors.link" />;
    }

/***** @group Cart widget *****/

/* ---------- FOOTER ---------- */

div#footer {
    width:960px;
    margin:0 auto;
    padding:25px 0;
    font-family: <virb get="customize.fonts.footer_family" />;
    color: <virb get="customize.colors.widget_text" />;
}       

span#virb_customize_footer {
    color: <virb get="customize.colors.footer_text" />;
    padding-top: 10px;
    width:100%;
    display: block;
}

/* ie7 specific styles */

.ie7 .audio_player .controls .playpause a, 
.ie7 .audio_player .controls .prev a, 
.ie7 .audio_player .controls .next a {
  font-size:0;
  display: block;
  line-height: 0;
}

/* ---------- SOCIAL LINKS WIDGET ---------- */
div.social-links ul {
    margin:0;
    padding:0;
    list-style: none;
    overflow: hidden;
    }

    div.social-links ul li a {
        float:left;
        display:block;
        text-indent: -9999px;
        }       

    div.social-links ul.large a {
        width:64px;
        height:64px;
        margin:0 5px 5px 0;
        }

        div.social-links ul.large.simplebutton li a,
        div.social-links ul.large.shinycircle li a,
        div.social-links ul.large.shinybutton li a {
            width:64px;
            height:66px;
            margin:0 5px 5px 0;
        }

    div.social-links ul.small li a {
        width:32px;
        height:32px;
        margin:0 5px 5px 0;
        }

        div.social-links ul.small.simplebutton li a,
        div.social-links ul.small.shinycircle li a,
        div.social-links ul.small.shinybutton li a {
            width:32px;
            height:33px;
            margin:0 5px 5px 0;
        } 
```

**HTML：**

```
 <!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie ie9"> <![endif]-->
<html>
  <head>
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<style type='text/css'>  
.accordion {margin:0px;border-bottom: 1px solid #e5e5e5;width: 300px}.accordion dt{padding-top:0px;padding-bottom:10px;font: 14px arial}.accordion dd {padding-top: 0px;padding-bottom: 10px;font-size: 12px}.accordion a {display: block;color: black;font-weight: bold;text-decoration: none}body{font: 12px arial}​ 
</style>

<script type='text/javascript'>//<![CDATA[ 
  $(function(){
      (function($) {

         var allPanels = $('.accordion > dd').show();

         $('.accordion > dt > a').click(function() {
              $(this).parent().next('dd').slideUp();

         if($(this).parent().next().is(':hidden'))
         {
              $(this).parent().next().slideDown();
         }

         return false;
        });

     })(jQuery);
   });//]]>  

</script>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<style type='text/css'>  
.accordionbr {margin:0px;border-bottom: 1px solid #e5e5e5;width: 300px}.accordionbr dt{padding-top:0px;padding-bottom:10px;font: 14px arial}.accordionbr dd {padding-top: 0px;padding-bottom: 10px;font-size: 12px}.accordionbr a {display: block;color: black;font-weight: bold;text-decoration: none}body{font: 12px arial}​ 
</style>

<script type='text/javascript'>//<![CDATA[ 
  $(function(){
      (function($) {

         var allPanels = $('.accordionbr > dd').hide();

         $('.accordionbr > dt > a').click(function() {
              $(this).parent().next('dd').slideUp();

         if($(this).parent().next().is(':hidden'))
         {
              $(this).parent().next().slideDown();
         }

         return false;
        });

     })(jQuery);
   });//]]>  

</script>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<style type='text/css'>  
.accordion2 {margin:0px;border-bottom: 1px solid #e5e5e5;width: 640px}.accordion2 dt{padding-top:0px;padding-bottom:10px;font: 14px arial}.accordion2 dd {padding-top: 0px;padding-bottom: 10px;font-size: 12px}.accordion2 a {display: block;color: black;font-weight: bold;text-decoration: none}body{font: 12px arial}​ 
</style>

<script type='text/javascript'>//<![CDATA[ 
  $(function(){
      (function($) {

         var allPanels = $('.accordion2 > dd').show();

         $('.accordion2 > dt > a').click(function() {
              $(this).parent().next('dd').slideUp();

         if($(this).parent().next().is(':hidden'))
         {
              $(this).parent().next().slideDown();
         }

         return false;
        });

     })(jQuery);
   });//]]>  

</script>

    <!-- APOLLO -->
    <virb load="title" />
    <virb load="meta" />
    <virb load="css" />
    <virb load="icon" />

    <!--[if lt IE 8]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
    <![endif]-->
  </head>

  <body class="get[page.type] get[page.format] get[page.class]">   

    <!-- HEADER WRAPPER -->
    <div id="header_wrapper">

      <!-- HEADER -->
      <div id="header">

        <div id="site_nav">
          <virb load="nav" />
        </div>

        <div class="module" id="display_name">
          <h1><a href="get[site.url]"><virb customize="logo" /></a></h1>
          <h2 id="virb_customize_tagline"><virb customize="tagline" /></h2>
        </div> 

      </div>
      <!-- END HEADER -->

    </div>
    <!-- END HEADER WRAPPER -->

    <!-- PAGE WRAPPER -->
    <div id="page_wrapper">

      <!-- PAGE -->
      <div id="page">
        <virb load="template" />
      </div>
      <!-- END PAGE -->

    </div>  
    <!-- END PAGE WRAPPER -->  

    <!-- FOOTER WRAPPER -->
    <div id="footer_wrapper">

    <!-- FOOTER -->
      <div id="footer">

        <!-- WIDGETS/SITE --> 
        <div id="widgets"> 
            <virb load="widgets" />
        </div> 
        <!-- END SIDEBAR --> 

        <p><virb customize="footer" /></p>

      </div>
      <!-- END FOOTER -->

    </div>
    <!-- END FOOTER WRAPPER -->

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:51:04.093

有点难以分辨，因为这不是纯 HTML（那些 virb 标签是模板标签，用于标记要注入的实际 html 的位置），但我怀疑将它们放置在`#site_nav`div中的最佳位置是在标签之后`<virb load="nav" />`-这样，它们将位于添加的导航列表下方，但它们仍将浮动到右侧。像这样：

```
<!-- HEADER -->
      <div id="header">

        <div id="site_nav">
          <virb load="nav" />
          <a href="..."><img src="..."/></a>
          <a href="..."><img src="..."/></a>
        </div>

        <div class="module" id="display_name">
          <h1><a href="get[site.url]"><virb customize="logo" /></a></h1>
          <h2 id="virb_customize_tagline"><virb customize="tagline" /></h2>
        </div> 

      </div>
<!-- END HEADER --> 
```

然后继续添加您需要的任何 CSS 类或样式，以根据需要放置图像。

# javascript - 从 GWT 中的 HighCharts 库中以编程方式在股票图表上选择一个点（也在本机 JS 中）

> ID：12306194
> 
> 赞同：3
> 
> 时间：2012-09-06T18:27:20.513
> 
> 标签：javascript, gwt, highcharts, highstock

我正在为 GWT 使用来自 HighCharts API 的 Stockchart。我想在单击按钮时选择一个点。

我有这样的事情：

```
 public void onClick(ClickEvent event) {

        System.out.println("Clicked + i ." + i + "- >" + points[i].getX() ) ;
        chart.getSeries()[0].getPoints()[i].select(true, false);
        select(true, false);
        i++;
        if (i == 4) {
            i = 0;
        }
    } 
```

现在，这适用于 Highchart 图形，但对于 StockChart（相同的 API，只是不同的图表对象），它不起作用。股票图表不支持此功能吗？也许是因为导航？请帮忙。

**编辑：** 我还测试了这两种图表类型，这就是结果。在我看来，要么 StockChart 不支持此功能（可能是因为导航选项），要么它可能需要一些额外的配置。以下是测试：
[股票测试](http://jsfiddle.net/sURzE/9)
[HighChart 测试](http://jsfiddle.net/sURzE/8)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:01:29.820

您必须启用标记。

尝试添加这个：

```
 Marker marker = new Marker();
 marker.setEnabled(true);

 SeriesPlotOptions spo = new SeriesPlotOptions();
 spo.setMarker(marker);

 Series series1 = chart.createSeries()
 .setPlotOptions(spo) 
```

# twitter-bootstrap - 如何使用 Twitter Bootstrap 将 2 个文本输入放在嵌套流体布局中的单行上？

> ID：12306197
> 
> 赞同：2
> 
> 时间：2012-09-06T18:27:35.563
> 
> 标签：twitter-bootstrap, fluid-layout

我正在尝试创建一个布局，其中我的文本框填充它们所在的列。在此示例中，我有一个“ContactBlock_FirstName”和“ContactBlock_LastName”。我希望它们出现在同一行，每个占它们所在行的 50%。

正如您从下面的代码中看到的那样，我正在使用具有（2 x 10 列）高级容器的流体行。在 span10 中，我有我的控制组并将其拆分，以便每个输入有 6 列（因为我使用的是流体布局，嵌套行应该始终添加到 12）。

谁能告诉我为什么文本框出现在 2 行上，即使它们的宽度看起来是正确的。这是输出的屏幕截图。 [http://screencast.com/t/XEziHbs7X](http://screencast.com/t/XEziHbs7X)

我正在从 Foundation Grid 切换到 Bootstrap，因此我的布局可能存在其他一些问题，请随时指出它们。谢谢！

```
<div class="container">
    <div class="row-fluid">
        <div class="span2">
            <h3>
                Left Nav</h3>            
        </div>
        <div class="span10">
            <form>
            <h3>
                Body</h3>
            <div class="row-fluid">
                <div class="span6">
                    <h4>
                        Column A</h4>
                    This is just same plain text. This is just same plain text. This is just same plain
                    text. This is just same plain text. This is just same plain text. This is just same
                    plain text. This is just same plain text. This is just same plain text. This is
                    just same plain text. This is just same plain text.
                </div>
                <div class="span6">
                    <h4>
                        Column B</h4>
                    This is just same plain text. This is just same plain text. This is just same plain
                    text. This is just same plain text. This is just same plain text. This is just same
                    plain text. This is just same plain text. This is just same plain text. This is
                    just same plain text. This is just same plain text.
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Name<span class="required">*</span></label>
                <div class="controls controls-row">
                    <input class="span6 required" id="ContactBlock_FirstName" name="ContactBlock.FirstName"
                        placeholder="First Name" type="text" value="" />
                    <input class="span6 required" id="ContactBlock_LastName" name="ContactBlock.LastName"
                        placeholder="Last Name" type="text" value="" />
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    Save</button>
                <a href="#" class="btn">Cancel</a>
            </div>
            </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:28.653

新答案似乎是左边的边距打破了它。您可以使用 css 手动更改它（尽管您需要使用不同大小的媒体查询。一个例子是这样的

```
#ContactBlock_LastName
{
   margin-left:0px;  /* or whatever value you think looks best */
} 
```

### 旧答案

您的控件行不是流动的，因此您希望输入为 span5，跨度 5 最多填充 10 而不是 12。非流动行加起来是它们的总空间，而不是 12。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:16:34.057

正如@ben336 所提到的，这看起来像是一个问题，因为控制行不流畅。他的建议应该可以正常工作我暂时决定这样做......请随时建议更改此答案。

```
 <div class="row-fluid control-group">
        <label class="control-label">
            Name<span class="required">*</span></label>
        <div class="controls">
            <div class="span6">
                <input class="span12 required" id="ContactBlock_FirstName" name="ContactBlock.FirstName"
                    placeholder="First Name" type="text" value="" />
            </div>
            <div class="span6">
                <input class="span12 required" id="ContactBlock_LastName" name="ContactBlock.LastName"
                    placeholder="Last Name" type="text" value="" />
            </div>
        </div>
    </div> 
```

# scheme - 数字出现的次数

> ID：12306200
> 
> 赞同：2
> 
> 时间：2012-09-06T18:27:53.833
> 
> 标签：scheme, racket

好的，我上学期考了scheme，我知道你不可能在一个学期内把scheme搞得这么好。一位朋友问我如何计算某个数字出现在一个数字中的次数。如果它是一个列表，我知道该怎么做。起初我认为这是对内建商或余数的简单使用，但最终并没有像我想象的那样。例如，我如何计算数字中出现五的次数： (numfives 125458563) 应该返回 3。感谢任何帮助。

Ps：我不是在帮助他的硬件，我是为自己做的。我喜欢挑战。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:34:57.090

用于将`string->list`字符串转换为字符列表。然后像处理列表一样继续操作，您说您已经知道该怎么做。（您可以使用各种格式化函数将数字转换为字符串。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:47:22.100

我不喜欢所有基于字符串的解决方案。

在我看来，最好的方法是在每个阶段通过将（和修改）除以 10 来查看每个数字，然后进行比较。例子：

```
(define (count-digit num digit)
  (let loop ((num num)
             (count 0))
    (if (zero? num) count
        (loop (quotient num 10)
              (+ count (if (= digit (remainder num 10)) 1 0)))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:30:43.987

这是一种可能的方法：将参数转换为字符列表，并计算与作为参数接收`number`的字符对应的字符的数量：`digit`

```
(define (num-digits number digit)
  (let ((n (number->string number))
        (d (integer->char (+ (char->integer #\0) digit))))
    (count (lambda (x) (char=? x d))
           (string->list n)))) 
```

编写上述过程的另一种方法，更短但更难阅读：

```
(define (num-digits number digit)
  (count (curry char=? (integer->char (+ (char->integer #\0) digit)))
         (string->list (number->string number)))) 
```

另一种选择是通过算术运算依次处理每个数字，如@ChrisJester-Young 的回答，但考虑到数字和数字都为零的边缘情况，并避免重新定义内置 -在`count`过程中 - 还要记住，这仅适用于整数 >= 0 和以 10 为底的整数。方法如下：

```
(define (num-digits number digit)
  (if (= number digit 0)
      1
      (let loop ((num number)
                 (counter 0))
        (cond ((zero? num)
               counter)
              ((= digit (remainder num 10))
               (loop (quotient num 10) (add1 counter)))
              (else
               (loop (quotient num 10) counter)))))) 
```

上面基于字符串的解决方案可能看起来有点笨拙，但编写起来更短，并且具有处理负数、带小数的数字、与 10 不同的基数等的额外优势。无论如何，这将适用于任何版本：

```
(num-digits 125458563 5)
> 3 
```

这将适用于基于字符串的版本：

```
(num-digits -123.1234152 1)
> 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:34:39.727

将数字转换为列表，然后找出数字出现在数字中的次数。将数字转换为列表[请参阅此示例。](https://stackoverflow.com/questions/8014453/convert-number-to-list-of-digits)

# android - 如何为图像的某些像素设置颜色

> ID：12306202
> 
> 赞同：2
> 
> 时间：2012-09-06T18:28:08.057
> 
> 标签：android

我在 ImageView 中有一个图像。我想将某些像素设置为红色。我取得了一些进展，但创建的图像失去了颜色。

```
 iv.setImageBitmap(processingBitmap(bitmap));

  private Bitmap processingBitmap(Bitmap src){

        Bitmap dest = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());

        for(int x = 0; x < src.getWidth(); x++){
         for(int y = 0; y < src.getHeight(); y++){
          int pixelColor = src.getPixel(x, y);
          int newPixel= Color.rgb(pixelColor, pixelColor, pixelColor);
          dest.setPixel(x, y, newPixel);
         }
        }

        for (int i=5; i<50; i++)
        {
        dest.setPixel(i, i, Color.rgb(255, 0, 0));
        }

        return dest;
       } 
```

![在此处输入图像描述](../Images/c0ed32472a9a5f7ae0b71efa615e7502.png)

如果我使用 `Bitmap dest = src.copy(src.getConfig(), src.isMutable());`而不是 `Bitmap dest = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());`我得到一个错误的 `iv.setImageBitmap(processingBitmap(bitmap));`行：

> 09-06 18:03:37.226：E/AndroidRuntime(811)：原因：java.lang.IllegalStateException 09-06 18:03:37.226：E/AndroidRuntime(811)：在 android.graphics.Bitmap.setPixel(Bitmap .java:847)

我也不知道为什么我必须复制粘贴所有像素，然后将这些像素设置为我想要的红色。如果我只使用

```
 for (int i=5; i<50; i++)
        {
        dest.setPixel(i, i, Color.rgb(255, 0, 0));
        } 
```

我得到带有红线的黑色图像。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-31T11:54:54.133

Color.rgb() 占用 3 个字节，分别为 Red、Green、Blue。您正在尝试为它们中的每一个设置像素颜色。最好尝试这样的事情

```
byte blue = (byte) ((pixelColor & 0xff));
byte green = (byte) (((pixelColor >> 8) & 0xff));
byte red = (byte) (((pixelColor >> 16) & 0xff));
int newPixel= Color.rgb(red , green , blue); 
```

# c# - 从 WinRT XAML 中的滑块控件中删除工具提示

> ID：12306207
> 
> 赞同：0
> 
> 时间：2012-09-06T18:28:22.073
> 
> 标签：c#, .net, vb.net, xaml, windows-runtime

有没有办法从 WinRT XAML 中的滑块控件中删除工具提示？这就是我所指的：

![工具提示](../Images/6b789bcafc68d55c3ace98fae2b5e1ce.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T22:18:34.730

将此 **IsThumbToolTipEnabled="False"**设置为您的滑块。

# php - 如何在 PHP 中生成令牌以发布基于 Express 的应用程序？

> ID：12306209
> 
> 赞同：1
> 
> 时间：2012-09-06T18:28:34.023
> 
> 标签：php, node.js, csrf

我有一个带有 express-csrf 模块的节点应用程序。我还有另一个在不同域上用 PHP 构建的站点。我想在我的 PHP 网站上创建一个提交到基于节点的网站的表单。有了 csrf 保护，我显然不能这样做。

如何在 PHP 中生成令牌以发布基于 Express 的应用程序？

# java - 使用骆驼生产者模板和http时没有得到http响应正文

> ID：12306211
> 
> 赞同：1
> 
> 时间：2012-09-06T18:28:39.120
> 
> 标签：java, spring, apache-camel

我正在尝试使用[http://camel.apache.org/http.html](http://camel.apache.org/http.html)上指定的 producertemplate 调用我的简单 GET 休息服务调用。我在这里以 google.com 为例。这是来自未在任何容器上运行的独立客户端。我没有在这里做什么？

```
SpringCamelContext camelcontext = (SpringCamelContext) springContext.getBean("camelcontextbean");

ProducerTemplate template = camelcontext.createProducerTemplate();
camelcontext.start();
Exchange exchange = template.send("http://www.google.com/search", new Processor() {
            public void process(Exchange exchange) throws Exception {
                exchange.getIn().setHeader(Exchange.HTTP_QUERY, "hl=en&q=activemq");
            }
   });

   Message out = exchange.getOut();
System.out.println("Response from http template is "+exchange.getOut().getBody());
   System.out.println("status header is "+out.getHeader(Exchange.HTTP_RESPONSE_CODE)); 
```

我没有得到任何回应。输出是：

来自 http 模板的响应为空

状态标头为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T22:41:14.397

它与您从 Spring 创建 camelContext 的方式有关，因为如果我删除它并从 DefaultCamelContext 中获取CamelContext*我**看*不到问题：

 *```
import org.apache.camel.*;
import org.apache.camel.impl.DefaultCamelContext;

public class Main {

    public static void main(String ... args){
        CamelContext camelContext = new DefaultCamelContext();
        ProducerTemplate template = camelContext.createProducerTemplate();

        Exchange exchange = template.send("http://www.google.com/search", new Processor() {
            public void process(Exchange exchange) throws Exception {
                exchange.getIn().setHeader(Exchange.HTTP_QUERY, "hl=en&q=activemq");
            }
        });

        Message out = exchange.getOut();
        System.out.println("Response from http template is "+exchange.getOut().getBody());
        System.out.println("status header is "+out.getHeader(Exchange.HTTP_RESPONSE_CODE));
    }

} 
```

产量

```
Response from http template is org.apache.camel.converter.stream.CachedOutputStream$WrappedInputStream@26659db7
status header is 200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T20:24:10.383

send 方法是一种 in only 模式，使用 request 方法可能会更幸运（参见官方[文档](http://camel.apache.org/producertemplate.html)）

```
Exchange exchange = template.request("http://www.google.com/search", new Processor() {
        public void process(Exchange exchange) throws Exception {
            exchange.getIn().setHeader(Exchange.HTTP_QUERY, "hl=en&q=activemq");
        }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T11:48:18.023

您可以通过以下方式访问您的回复`exchange.getIn().getBody(String.class)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T12:14:01.483

```
Exchange exchange = template.request("http://www.google.com/search", new Processor() {
        public void process(Exchange exchange) throws Exception {
            exchange.getIn().setHeader(Exchange.HTTP_QUERY, "hl=en&q=activemq");
        }
}); 
```

如果我有正文和标题，如何调用邮政服务。*

# c++ - 从 OpenCV 文件中读取算法参数

> ID：12306213
> 
> 赞同：2
> 
> 时间：2012-09-06T18:28:46.187
> 
> 标签：c++, opencv

我正在尝试从 XML 文件中读取经过训练的期望最大化模型的参数以供以后使用。为了存储我调用的模型

```
cv::FileStorage fs("model.xml",cv::FileStorage::WRITE);
classifier.write(fs);  //classifier is of type cv::EM 
```

这将创建包含看起来像模型数据的文件。这是文件的样子（从一开始的前几行）：

```
StatModel.EM 1
<_ type_id="opencv-matrix"> 3 3 d
1.2159868951764311e+01 0\. 0\. 0\. 1.9776824566023249e-01 0\. 0\. 0\.  .2204460492503131e-16     
<_ type_id="opencv-matrix"> 3 3 d
3.2869203526862529e+00 0\. 0\. 0\. 1.1631692248472096e+00 0\. 0\. 0\. 2.2204460492503131e-16     
<_ type_id="opencv-matrix"> 3 3 d
2.9815870012055705e+00 0\. 0\. 0\. 6.5049770685681069e+03 0\. 0\. 0\. 6.8510191786605528e+03 
<_ type_id="opencv-matrix"> 3 3 d 
4.6608996548002040e+00 0\. 0\. 0\. 3.7558131457318683e+02 0\. 0\. 0\. 2.2204460492503131e-16 
```

请注意，缺少 XML 标头。现在为了读取我正在使用的数据

```
cv::FileStorage fs("model.xml",cv::FileStorage::READ); 
```

cv::Algorithm::read() 函数必须以文件节点作为参数调用。我不确定要使用哪个节点。因为我希望我尝试的文件中只有一个节点

```
classifier.read(fs[0]); 
```

但是该算法之后没有训练。我需要做什么才能恢复原始参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:32:04.427

我只是使用

```
 const FileStorage fs(filename, FileStorage::READ);
        EM model;
        if (fs.isOpened()) {
            const FileNode& fn = fs["StatModel.EM"];
            model.read(fn);
        } 
```

有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T19:23:16.333

相反，您可以不使用“写”：

```
fs<<"my_model"<<classifier; 
```

然后在打开 FileStorage 进行阅读后，像这样阅读它：

```
cv::EM EModel;
fs["my_model"] >> EModel; 
```

**编辑：以上不适用于 cv::EM 因为它不包含在重载中。**

[此](http://docs.opencv.org/doc/tutorials/core/file_input_output_with_xml_yml/file_input_output_with_xml_yml.html)链接提供了一个很好的示例，说明如何在 XML/YAML 文件中编写和读取自定义类。据此，您为您的类创建“写入”和“读取”方法，因此您是定义和命名节点的人。

如果您自己没有编写这些方法并且它们是 cv::Algorithm 的一部分（可能这是新的，我在使用的 2.2 中找不到它），那么我建议检查 xml 文件以查看创建的节点的名称，然后使用 >> 运算符或执行以下操作获取它们：

```
FileNode myFilenode = fs["node_name"];
classifier.read(myFilenode); 
```

根据`StatModel.EM 1 <_ type_id="opencv-matrix">`您提供的内容和链接中的 xml 示例，我猜这个节点的名称实际上是“_”（如果您在编写时没有提供任何名称，这可能是默认值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T18:45:49.743

另一种语法是

```
 FileStorage fs(filename, FileStorage::READ);
    Mat mat;
    if (fs.isOpened()) {
        fs["mat_name"]>>mat;
    }
    fs.release(); 
```

# c# - 如何匹配不同的邮政地址？

> ID：12306215
> 
> 赞同：5
> 
> 时间：2012-09-06T18:28:47.270
> 
> 标签：c#

我需要在导入过程中匹配美国邮政地址。问题是地址行可以用几种不同的方式输入。例子：

```
123 Main Street

123 Main St.

123 Main St 
```

如何标准化地址以便进行匹配？我们一次导入 10,000 个地址，所以我不想使用 Google、Yahoo 或 USPS 之类的服务。是否有不是 COM 组件的用于地址标准化的开源或商业库？我不在乎地址是否真实，我只关心匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T19:05:26.613

这类事情非常复杂。一些公司完全基于提供此功能。

我不建议这样做，现有的图书馆和服务可以做到这一点：

[https://www.usps.com/business/address-management-products.htm](https://www.usps.com/business/address-management-products.htm)

[http://smartystreets.com/products/liveaddress-api](http://smartystreets.com/products/liveaddress-api)

如果这些不是选项，并且引用的链接（[地址匹配密钥算法](http://stackoverflow.com/questions/824588/address-match-key-algorithm)）对您没有帮助，那么您基本上必须将所有内容归结为一些共同点。例如，将字符串拆分为组成部分（街道编号、街道编号后缀、单元/套房编号、街道名称、街道类型和街道方向）。然后，将每个（如果适用）的所有可能缩写转换为该公分母。对于街道类型“St.”，您可以选择“street”作为公分母，在这种情况下，您将转换为“St.”。或“St”到“Street”，然后进行任何匹配——假设数据库中的所有数据都包含该街道类型的“street”。

# python - python calendar.timegm 实现？

> ID：12306221
> 
> 赞同：1
> 
> 时间：2012-09-06T18:28:56.740
> 
> 标签：python, time, calendar

在 $PYTHONHOME/lib/python2.7/calendar.py 中，timegm 定义为

```
EPOCH = 1970
_EPOCH_ORD = datetime.date(EPOCH, 1, 1).toordinal()

def timegm(tuple):
    """Unrelated but handy function to calculate Unix timestamp from GMT."""
    year, month, day, hour, minute, second = tuple[:6]
    days = datetime.date(year, month, 1).toordinal() - _EPOCH_ORD + day - 1
    hours = days*24 + hour
    minutes = hours*60 + minute
    seconds = minutes*60 + second
    return seconds 
```

有什么理由不计算天数：

```
days = datetime.date(year, month, day).toordinal() - _EPOCH_ORD 
```

谁能想到前一个表达式会中断的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:44:59.493

```
datetime.date(year, month, day).toordinal() 
```

“范围检查” `day`（结合年和月）是有效`datetime.date`.

`datetime.date(year, month, 1)`不 - 或者更确切地说，只需要`year`并且`month`是有效的。

显然，一些用户正在利用这个“功能”（不检查当天），并且为了向后兼容（与 Python2.2！），开发人员保留了这种行为。请参阅 Raymond Hettinger 在[提交 #27881](http://hg.python.org/cpython/rev/148d8c0b9647)中的评论。

PS。`calendar.py`您可以通过运行找到更改此行的提交

```
hg blame cpython/Lib/calendar.py 
```

（前提是你有`hg clone`CPython 存储库）。

```
10940: def timegm(tuple):
11691:     """Unrelated but handy function to calculate Unix timestamp from GMT."""
11691:     year, month, day, hour, minute, second = tuple[:6]
27881:     days = datetime.date(year, month, 1).toordinal() - _EPOCH_ORD + day - 1 
```

然后，要查找有关 commit #27881 的更多信息，您可以搜索[http://hg.python.org/](http://hg.python.org/)

# xcode - 如何使用 iconutil 手动创建 icns 文件？

> ID：12306223
> 
> 赞同：127
> 
> 时间：2012-09-06T18:28:58.533
> 
> 标签：xcode, macos, cocoa, icons, iconutil

当我验证我的应用程序时，我收到此错误：

> 应用程序包不包含 ICNS 格式的图标，同时包含 a`512x512`和`512x512@2x`图像。

我曾经使用[Img2icns](http://www.img2icnsapp.com/)应用程序制作 icns 图标，直到今天它一直正常工作。但是现在我遇到了这个错误，没有办法让它工作。我试图在[Img2icns 中将](http://www.img2icnsapp.com/)`512x512`两个 PNG 文件（和`1024x1024`）放在一起，但我总是得到那个错误。我还尝试按照 Apple 的 OS X 人机界面指南中的说明进行操作，但是当我尝试制作图标集时，我得到了这个终端错误：

> -bash：意外标记“换行符”附近的语法错误

我对终端命令不是很好，所以也许我做错了什么。我写：

```
iconutil -c icns </Users/myname/SDK Mac Apps/MyApp/grafica/icon.iconset> 
```

如果有人可以提供帮助，将不胜感激。谢谢，马西。

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2013-12-20T12:24:29.927

这是一个将 1024x1024 png（名为“Icon1024.png”）转换为所需 icns 文件的脚本。将其保存到您的 png 文件所在的文件夹中名为“CreateICNS.src”的文件中，然后在终端“cd”中将其保存到同一文件夹中，然后键入“source CreateICNS.src”来调用它：

```
mkdir MyIcon.iconset
sips -z 16 16     Icon1024.png --out MyIcon.iconset/icon_16x16.png
sips -z 32 32     Icon1024.png --out MyIcon.iconset/icon_16x16@2x.png
sips -z 32 32     Icon1024.png --out MyIcon.iconset/icon_32x32.png
sips -z 64 64     Icon1024.png --out MyIcon.iconset/icon_32x32@2x.png
sips -z 128 128   Icon1024.png --out MyIcon.iconset/icon_128x128.png
sips -z 256 256   Icon1024.png --out MyIcon.iconset/icon_128x128@2x.png
sips -z 256 256   Icon1024.png --out MyIcon.iconset/icon_256x256.png
sips -z 512 512   Icon1024.png --out MyIcon.iconset/icon_256x256@2x.png
sips -z 512 512   Icon1024.png --out MyIcon.iconset/icon_512x512.png
cp Icon1024.png MyIcon.iconset/icon_512x512@2x.png
iconutil -c icns MyIcon.iconset
rm -R MyIcon.iconset 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-09-06T23:15:33.603

查看以下说明（[链接](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)）：

> **使用 iconutil 手动创建 icns 文件**
> 
> `iconutil`命令行工具将文件`iconset`夹转换为可部署的高分辨率 icns 文件。`man iconutil`（您可以通过输入终端找到此工具的完整文档。）使用此工具还会压缩生成的`icns`文件，因此您无需执行额外的压缩。
> 
> **将一组图标转换为 icns 文件**
> 
> 在终端窗口中输入以下命令：
> 
> `iconutil -c icns <iconset filename>`
> 
> `<iconset filename>`包含要转换为的图标集的文件夹的路径在哪里`icns`。输出将写入与 相同的位置`iconset file`，除非您指定输出文件，如下所示：
> 
> `iconutil -c icns -o <icon filename> <iconset filename>`

换句话说，您需要用`<iconset filename>`路径替换：

```
/Users/myname/SDK Mac Apps/MyApp/grafica/icon.iconset 
```

由于路径包含空格，所以需要使用双引号，例如：

```
iconutil -c icns "/Users/myname/SDK Mac Apps/MyApp/grafica/icon.iconset" 
```

该命令应该可以正常工作。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-09-24T16:01:14.380

虽然使用各种脚本将高分辨率`PNG`图像转换为大量不同的低分辨率副本可能看起来很方便（确实如此），但不要忘记这种自动调整大小会呈现**明显不完美的图像**。

# 分辨率越小——图标越模糊！

我的意思是，我`imagemagick`也喜欢，但它不是完成这项任务的正确工具！

相反，您应该始终向您的设计师请求某种矢量格式的徽标，例如`SVG`. 有了这个，您可以手动准备`PNG`所有所需分辨率的完美文件，然后制作一个`.icns`文件，这将使您的应用程序图标在每个屏幕上看起来都很漂亮，从便宜的 iPhone SE 到一些最新的高端 Retina 显示器iMac。您可以使用 Photoshop、GIMP 或您选择的任何其他工具来生成这些 PNG。

根据 2020 年最新[的 Apple 人机界面指南](https://developer.apple.com/design/human-interface-guidelines/macos/icons-and-images/app-icon#app-icon-sizes)，您应该准备以下`PNG`文件：

```
+---------------------+--------------------+--------------+
|      filename       | resolution, pixels | density, PPI |
+---------------------+--------------------+--------------+
| icon_16x16.png      | 16x16              |           72 |
| icon_16x16@2x.png   | 32x32              |          144 |
| icon_32x32.png      | 32x32              |           72 |
| icon_32x32@2x.png   | 64x64              |          144 |
| icon_128x128.png    | 128x128            |           72 |
| icon_128x128@2x.png | 256x256            |          144 |
| icon_256x256.png    | 256x256            |           72 |
| icon_256x256@2x.png | 512x512            |          144 |
| icon_512x512.png    | 512x512            |           72 |
| icon_512x512@2x.png | 1024x1024          |          144 |
+---------------------+--------------------+--------------+ 
```

准备好所有 PNG 文件后，将它们放入带有`.iconset`扩展名（`Logos.iconset`例如）的某个目录中，然后从以下位置执行以下命令`Terminal`：

```
iconutil --convert icns Logos.iconset 
```

如果执行此命令后没有错误，则所有文件都已正确处理，并且您将`Logos.icns`文件放在同一目录中，其中包含适用于任何现代屏幕的应用程序的所有漂亮清晰徽标。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-04-05T03:13:37.813

有一个命令行节点模块可以完成将 PNG 文件转换为图标集目录的所有工作：

```
npm install -g node-icns
nicns --in adventure-cat.png --out adventure-cat.icns 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-10-29T17:59:23.827

这些命令（在终端中输入）帮助我将旧的 icns 文件转换为新格式：

```
cd Folder_With_Icns_File
iconutil -c iconset Your_Icon_Name.icns 
rm Your_Icon_Name.icns 
iconutil -c icns Your_Icon_Name.iconset
rm -R Your_Icon_Name.iconset 
```

### 更新

`-c`不再支持 iconutil的参数。改用`--convert`：

```
cd Folder_With_Icns_File
iconutil --convert iconset Your_Icon_Name.icns 
rm Your_Icon_Name.icns 
iconutil --convert icns Your_Icon_Name.iconset
rm -R Your_Icon_Name.iconset 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-07-30T15:08:19.370

附加说明，当您创建*.icns 文件时，您需要重命名所有带有前缀“icon_* ”的图片文件，否则，iconutil 将失败并显示错误消息：“.iconset:error: Failed to generate ICNS”。这根本没有信息。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-05-26T07:00:36.583

与@Henry（上面的评论）相同，但将 PNG 文件名作为参数并输出具有相同名称的 ICNS。

**注意：** PNG 文件名预计只有 1 点来分隔扩展名，即 xpto.png 。

（针对 shell 脚本进行了更新）

因此，将下面的代码保存到您的 png 文件所在文件夹中名为“CreateICNS.sh”的文件中，并授予其执行权限。

### 代码：

```
#!/bin/bash
IFS='.' read -ra ADDR <<< "$1"
ICONSET=${ADDR[0]}.iconset
mkdir $ICONSET
sips -z 16 16     $1 --out $ICONSET/icon_16x16.png
sips -z 32 32     $1 --out $ICONSET/icon_16x16@2x.png
sips -z 32 32     $1 --out $ICONSET/icon_32x32.png
sips -z 64 64     $1 --out $ICONSET/icon_32x32@2x.png
sips -z 128 128   $1 --out $ICONSET/icon_128x128.png
sips -z 256 256   $1 --out $ICONSET/icon_128x128@2x.png
sips -z 256 256   $1 --out $ICONSET/icon_256x256.png
sips -z 512 512   $1 --out $ICONSET/icon_256x256@2x.png
sips -z 512 512   $1 --out $ICONSET/icon_512x512.png
cp $1 $ICONSET/icon_512x512@2x.png
iconutil -c icns $ICONSET
rm -R $ICONSET 
```

**如何使用 ：**

然后在终端中，“cd”到同一个文件夹并输入：

```
./CreateICNS.sh {PNG filename} 
```

其中 {PNG filename} 是您的 PNG 文件的名称，即 xpto.png 。

如果您的文件将命名为 abc.png，您将使用：

```
./CreateICNS.sh abc.png 
```

# 更新 2021-05-20：

我有这个的更新版本，但我不确定我在哪里找到它留下正确的参考所以如果有人是这个的所有者或知道某个互联网页面上的链接，请发表评论，以便我可以更新学分：

这是一个完整的 bash 脚本，因此您应该将其保存为示例`png2icns.sh`并授予其执行权限。

然后你可以调用`png2icns.sh pngfile1.png`它，它会生成 ICNS 文件以及一个 iconset 文件夹，其中包含 16x16 和 512x512 之间的所有图标分辨率。

```
#!/bin/bash
# Creates an icns file from a source image

src_image="$1"
if [ -z "$1" ]; then
    echo "No source image was passed to this script"
    exit 1
fi

icns_name="$2"
if [ -z "$2" ]; then
    icns_name="iconbuilder"
fi

if [ "${src_image:(-3)}" != "png" ]; then
    echo "Source image is not a PNG, making a converted copy..."
    /usr/bin/sips -s format png "$src_image" --out "${src_image}.png"
    if [ $? -ne 0 ]; then
        echo "The source image could not be converted to PNG format."
        exit 1
    fi
    src_image="${src_image}.png"
fi

iconset_path="./${icns_name}.iconset"
if [ -e "$iconset_path" ]; then
    /bin/rm -r "$iconset_path"
    if [ $? -ne 0 ]; then
        echo "There is a pre-existing file/dir $iconset_path the could not be deleted"
        exit 1
    fi
fi

/bin/mkdir "$iconset_path"

icon_file_list=(
    "icon_16x16.png"
    "icon_16x16@2x.png"
    "icon_32x32.png"
    "icon_32x32@2x.png"
    "icon_128x128.png"
    "icon_128x128@2x.png"
    "icon_256x256.png"
    "icon_256x256@2x.png"
    "icon_512x512.png"
    "icon_512x512@2x.png"
    )

icon_size=(
    '16'
    '32'
    '32'
    '64'
    '128'
    '256'
    '256'
    '512'
    '512'
    '1024'
    )

counter=0    
for a in ${icon_file_list[@]}; do
    icon="${iconset_path}/${a}"
    /bin/cp "$src_image" "$icon"
    icon_size=${icon_size[$counter]}
    /usr/bin/sips -z $icon_size $icon_size "$icon"
    counter=$(($counter + 1))
done

echo "Creating .icns file from $iconset_path"
/usr/bin/iconutil -c icns "$iconset_path"
if [ $? -ne 0 ]; then
    echo "There was an error creating the .icns file"
    exit 1
fi

echo "Done"
exit 0 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-06-30T23:41:54.417

我重构了@Henry 的脚本，让它看起来更好：

```
#!/bin/zsh
NAME=$(basename $1 .png); DIR="$NAME.iconset"
mkdir -pv $DIR
for m r in 'n' '' '((n+1))' '@2x'; do
    for n in $(seq 4 9 | grep -v 6); do
        p=$((2**$m)); q=$((2**$n))
        OUT="$DIR/icon_${q}x${q}${r}.png"
        sips -z $p $p $1 --out $OUT
    done
done
iconutil -c icns $DIR
rm -frv $DIR 
```

**更新**

`-c`不再支持 iconutil的参数。改用`-—convert`：

```
#!/bin/zsh
NAME=$(basename $1 .png); DIR="$NAME.iconset"
mkdir -pv $DIR
for m r in 'n' '' '((n+1))' '@2x'; do
    for n in $(seq 4 9 | grep -v 6); do
        p=$((2**$m)); q=$((2**$n))
        OUT="$DIR/icon_${q}x${q}${r}.png"
        sips -z $p $p $1 --out $OUT
    done
done
iconutil -—convert icns $DIR
rm -frv $DIR 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-12-06T16:12:22.553

## 死简单 .png .icns

1.  下载[IconMaker.app](https://raw.githubusercontent.com/stylekit/img/master/iconmaker.app.zip) - 它只是一个 .applescript 不会咬人
2.  将您的 .png 拖放到您刚刚创建的 IconMaker.app 上。

**更多信息**： [http ://eon.codes/blog/2016/12/06/Creating-an-app-icon/](http://eon.codes/blog/2016/12/06/Creating-an-app-icon/)

**高山脉更新** `iconutil`现在对源 .png 大小更加严格。跳转后的博客文章中有关此的更多信息。✌️

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-12-14T16:08:43.890

我编写了一个 bash 脚本，用于从 svg 文件制作 icns：

```
#!/usr/bin/env bash 
sizes=(16 32 64 128 256 512)
largfile='icon_512x512@2x.png'
if [ ! -f "$largfile" ]; then
  convert -background none -resize 1024x1024 "$1" "$largfile"
fi
for s in "${sizes[@]}"; do
  echo $s
  convert -background none -resize ${s}x${s} "$largfile" "icon_${s}x$s.png"
done

cp 'icon_32x32.png'     'icon_16x16@2x.png'
mv 'icon_64x64.png'     'icon_32x32@2x.png'
cp 'icon_256x256.png'   'icon_128x128@2x.png'
cp 'icon_512x512.png'   'icon_256x256@2x.png'

mkdir icon.iconset
mv icon_*x*.png icon.iconset
iconutil -c icns icon.iconset 
```

确保在 mac 上安装了带有 librsvg 支持的 imagemagick：

```
brew install imagemagick --with-librsvg 
```

这个脚本对我很有帮助。

* * *

# 更新

为了进行更彻底的处理，我创建了一个命令行工具（用 Swift 编写）以`AppIcon.appiconset`正确的布局和格式生成：

[https://github.com/kindlychung/genicon](https://github.com/kindlychung/genicon)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-14T22:41:41.397

Apple 的旧版 Icon Composer 2.2 版运行良好，您只需打开其中的 .ICNS，按 1024x1024 按钮并添加您的图像。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-09-07T06:48:01.353

> 当我验证我的应用程序时，我收到此错误：
> 
> > 应用程序包不包含 ICNS 格式的图标，包含 512x512 和 512x512@2x 图像。
> 
> ⋮</p>
> 
> 我对终端命令不是很好，所以也许我做错了什么。我写：
> 
> ```
> iconutil -c icns </Users/myname/SDK Mac Apps/MyApp/grafica/icon.iconset> 
> ```

一方面，正如我在对安妮的回答的评论中提到的那样，您可能不需要使用 iconutil。您应该能够将图标集添加到您的项目中，并让 Xcode 为您转换它作为构建的一部分。

无论哪种方式，这可能是您的问题：

> 我试图将两个 PNG 文件放在一起（512x512 和 1024x1024）……但我总是得到错误。

没有 1024 x 1024 点大小。[1024 x 1024 像素元素（在 Mountain Lion 之前是 1024 点）现在用于 512 x 512 点@2x。](http://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW4)

您的 PNG 文件必须正确命名：icon_512x512@2x.png

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-07-22T01:10:05.813

@dardo82 的 shell 代码很好用。这是 sh 中的一个更简单的（适用于所有 *nix 的）和更快的（就像它真的很重要）：

```
#!/bin/sh
#   This runs silent, be as verbose as you wish
NAME=$(basename ${1} .png)
DIR="${NAME}.iconset"
mkdir -p ${DIR}
for i in 16 32 128 256 512 ; do
    x=""
    for p in $i $(($i+$i)) ; do
        sips -z $p $p ${1} --out "${NAME}.iconset/icon_${i}x${i}${x}.png"
        x="@2x"
    done
done >/dev/null  # /dev/null in lieu of a "-s" silent option
iconutil -—convert icns $DIR
rm -r $DIR 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-09T13:31:41.057

跑`iconutil -c icns Icon.iconset`

笔记

*   Icon.iconset 是一个文件夹
*   名称以小写开头`icon_`
*   当您看到`Icon.icns`正确的图像时，您就知道它有效

[![在此处输入图像描述](../Images/3d22b24c391868d27d99d3e15927980c.png)](https://i.stack.imgur.com/wXWyw.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-06-12T22:08:18.640

这是一个主要基于[Henry 示例](https://stackoverflow.com/a/20703594/499581)的函数（可能在 中有用`~/.bash_profile`）：

```
mkicns() {
    if [[ -z "$*" ]] || [[ "${*##*.}" != "png" ]]; then
        echo "Input file invalid"
    else
        filename="${1%.*}"
        mkdir "$filename".iconset
        for i in 16 32 128 256 ; do
            n=$(( i * 2 ))
            sips -z $i $i "$1" --out "$filename".iconset/icon_${i}x${i}.png
            sips -z $n $n "$1" --out "$filename".iconset/icon_${i}x${i}@2x.png
            [[ $n -eq 512 ]] && \
            sips -z $n $n "$1" --out "$filename".iconset/icon_${n}x${n}.png
            (( i++ ))
        done
        cp "$1" "$filename".iconset/icon_512x512@2x.png
        iconutil -c icns "$filename".iconset
        rm -r "$filename".iconset
    fi
} 
```

**用法**：

```
$ mkicns "filename.png"  # double-quote if spaces exist in filename 
```

> `16x16`从到创建 10 个尺寸`512x512@2x`；仅接受 `.png`格式的输入图像。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-02-23T20:11:00.323

有 2 个任务：
- 创建 10 个正确的 icns 文件
- 让您的 Xcode 项目正确使用它们

由于我在这两项任务上都遇到了长达一小时的问题，而且我也不喜欢我没有“看到”正在发生的事情，所以这里是谨慎的道路：

**创建 10 个正确的 icns 文件：**
我使用了上面来自 Henry 的脚本：它仍然适用于 HighSierra 和 Xcode 9.2，包括“c”命令。
我得到的 icns 文件在 Finder/Quicklook 中仅显示为一种图标大小，而在预览中仅显示 10 种尺寸中的 8 种。
所以我使用终端，将 cd 带到我的文件夹并使用命令： iconutil -c iconset (icns filename) 在刚刚创建的 icns 文件上将 icns 文件恢复到 iconset 文件夹，然后 - 瞧 - 我可以看到我新创建的 10 个图标文件。使用图标集文件夹上的快速查看（并使用全屏模式能够使用滑块放大它们），我可以检查所有尺寸实际上看起来都很好。

顺便说一句：它们看起来比我使用 PSE 调整大小的尝试更好，很可能是因为我没有花时间使用 PSE 中的所有调整大小选项。如果您确实使用 PSE，请确保您的 png 文件在没有颜色配置文件的情况下保存。另外，承认我的无知，对我来说，256x256@2 文件与 512x512 文件相同 - 都是 72dpi。试图遵循上面的 144 dpi 评论对我不起作用。

**让你的 Xcode 项目正确使用它们：**
首先，我删除了我在 Xcode 中的所有徒劳无功的尝试，并将一个干净的版本提交到 git 存储库（聪明的做法是先提交一个干净的版本 - 在我疯狂地启动图标之前添加奥德赛）。
我还确保在 info.plist 文件中没有链接到“图标文件”条目的指针，并且在我的常规项目设置中，我为 App Icons 选择了 AppIcon。
然后我添加了 assets.asset 目录，并在资产目录中为 OS 添加了一个新的“AppIcons and Launch Images”AppIcon 文件夹。
然后我将每个 png 图片文件从 iconset 文件夹中复制（按下选项拖放）到相应的 AppIcon Spaceholder 中。再次，我可以看到正在发生的事情。Xcode 确实将其转换为 icns 文件，或者 - 作为我从 icns 文件夹派生的图标集文件夹 - 文件格式被接受。

然后存档并验证，上传或验证时不会出现错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-26T01:07:57.667

我需要这个，但对于 CMake。我还想要给它一个 SVG 的选项。

这是要点：[https ://gist.github.com/Qix-/f4090181e55ea365633da8c3d0ab5249](https://gist.github.com/Qix-/f4090181e55ea365633da8c3d0ab5249)

和 CMake 代码：

```
# LICENSE: CC0 - go nuts.

# Hi :) This is what I used to generate the ICNS for my game, Tide.
# Both input formats (SVG vs PNG) work just fine, but in my experience
# the SVG came out with noticeably better results (although PNG wasn't
# a catastrophe either). The logo for the game was simple enough that
# SVG was indeed an option.

# To use:
#
#    make_icns( INPUT "path/to/img.{svg,png}"
#               OUTPUT ICNS_PATH )
#
# Then add it as a custom target or use it as a
# dependency somewhere - I give you that option.
#
# For example:
#
#    add_custom_target( my-icns ALL DEPENDS "${ICNS_PATH}" )
#
# For the associated utilities:
#
# - PNG: brew install imagemagick
# - SVG: brew cask install inkscape
#
# Enjoy!

function (make_icns_from_png)
    cmake_parse_arguments (
        ARG
        ""             # Boolean args
        "INPUT;OUTPUT" # List of single-value args
        ""             # Multi-valued args
        ${ARGN})

    find_program (
        convert_exe
        NAMES "convert" "convert.exe"
        DOC "Path to ImageMagick convert")
    if (NOT convert_exe)
        message (FATAL_ERROR "Could not find ImageMagick's 'convert' - is ImageMagick installed?")
    endif ()

    get_filename_component (ARG_INPUT_ABS "${ARG_INPUT}" ABSOLUTE BASE_DIR "${CMAKE_CURRENT_SOURCE_DIR}")
    get_filename_component (ARG_INPUT_ABS_BIN "${ARG_INPUT}" ABSOLUTE BASE_DIR "${CMAKE_CURRENT_BINARY_DIR}")
    get_filename_component (ARG_INPUT_FN "${ARG_INPUT_ABS_BIN}" NAME_WE)
    get_filename_component (ARG_INPUT_DIR "${ARG_INPUT_ABS_BIN}" DIRECTORY)

    set (sourceimg "${ARG_INPUT_ABS}")

    set (basepath "${ARG_INPUT_DIR}/${ARG_INPUT_FN}")
    set (output_icns "${basepath}.icns")
    set (iconset "${basepath}.iconset")

    set (deplist "")

    foreach (size IN ITEMS 16 32 128 256 512)
        math (EXPR size2x "2 * ${size}")

        set (ipath "${iconset}/icon_${size}x${size}.png")
        set (ipath2x "${iconset}/icon_${size}x${size}@2x.png")

        list (APPEND deplist "${ipath}" "${ipath2x}")

        add_custom_command (
            OUTPUT "${ipath}"
            COMMAND "${convert_exe}" ARGS "${sourceimg}" -resize "${size}x${size}" "${ipath}"
            MAIN_DEPENDENCY "${sourceimg}"
            COMMENT "ICNS resize: ${ipath}"
            VERBATIM)

        add_custom_command (
            OUTPUT "${ipath2x}"
            COMMAND "${convert_exe}" ARGS "${sourceimg}" -resize "${size2x}x${size2x}" "${ipath2x}"
            MAIN_DEPENDENCY "${sourceimg}"
            COMMENT "ICNS resize: ${ipath2x}"
            VERBATIM)
    endforeach ()

    add_custom_command (
        OUTPUT "${output_icns}"
        COMMAND iconutil ARGS --convert icns --output "${output_icns}" "${iconset}"
        MAIN_DEPENDENCY "${sourceimg}"
        DEPENDS ${deplist}
        COMMENT "ICNS: ${output_icns}"
        VERBATIM)

    if (ARG_OUTPUT)
        set ("${ARG_OUTPUT}" "${output_icns}" PARENT_SCOPE)
    endif ()
endfunction ()

function (make_icns_from_svg)
    cmake_parse_arguments (
        ARG
        ""             # Boolean args
        "INPUT;OUTPUT" # List of single-value args
        ""             # Multi-valued args
        ${ARGN})

    set (CMAKE_FIND_APPBUNDLE NEVER) # otherwise, it'll pick up the app bundle and open a shit ton of windows
    find_program (
        inkscape_exe
        NAMES "inkscape" "inkscape.exe"
        DOC "Path to Inkscape"
        PATHS "/usr/local/bin" "/usr/bin")

    message (STATUS "Inkscape path: ${inkscape_exe}")

    if (NOT inkscape_exe)
        message (FATAL_ERROR "Could not find Inkscape - is it installed?")
    endif ()

    get_filename_component (ARG_INPUT_ABS "${ARG_INPUT}" ABSOLUTE BASE_DIR "${CMAKE_CURRENT_SOURCE_DIR}")
    get_filename_component (ARG_INPUT_ABS_BIN "${ARG_INPUT}" ABSOLUTE BASE_DIR "${CMAKE_CURRENT_BINARY_DIR}")
    get_filename_component (ARG_INPUT_FN "${ARG_INPUT_ABS_BIN}" NAME_WE)
    get_filename_component (ARG_INPUT_DIR "${ARG_INPUT_ABS_BIN}" DIRECTORY)

    set (sourceimg "${ARG_INPUT_ABS}")

    set (basepath "${ARG_INPUT_DIR}/${ARG_INPUT_FN}")
    set (output_icns "${basepath}.icns")
    set (iconset "${basepath}.iconset")

    set (deplist "")

    foreach (size IN ITEMS 16 32 128 256 512)
        math (EXPR size2x "2 * ${size}")

        set (ipath "${iconset}/icon_${size}x${size}.png")
        set (ipath2x "${iconset}/icon_${size}x${size}@2x.png")

        list (APPEND deplist "${ipath}" "${ipath2x}")

        add_custom_command (
            OUTPUT "${ipath}"
            COMMAND "${inkscape_exe}" ARGS -z -e "${ipath}" -w ${size} -h ${size} "${sourceimg}"
            MAIN_DEPENDENCY "${sourceimg}"
            COMMENT "ICNS resize: ${ipath}"
            VERBATIM)

        add_custom_command (
            OUTPUT "${ipath2x}"
            COMMAND "${inkscape_exe}" ARGS -z -e "${ipath2x}" -w ${size2x} -h ${size2x} "${sourceimg}"
            MAIN_DEPENDENCY "${sourceimg}"
            COMMENT "ICNS resize: ${ipath2x}"
            VERBATIM)
    endforeach ()

    add_custom_command (
        OUTPUT "${output_icns}"
        COMMAND iconutil ARGS --convert icns --output "${output_icns}" "${iconset}"
        MAIN_DEPENDENCY "${sourceimg}"
        DEPENDS ${deplist}
        COMMENT "ICNS: ${output_icns}"
        VERBATIM)

    if (ARG_OUTPUT)
        set ("${ARG_OUTPUT}" "${output_icns}" PARENT_SCOPE)
    endif ()
endfunction ()

function (make_icns)
    cmake_parse_arguments (
        ARG
        ""             # Boolean args
        "INPUT;OUTPUT" # List of single-value args
        ""             # Multi-valued args
        ${ARGN})

    if (NOT ARG_INPUT)
        message (FATAL_ERROR "INPUT is required")
    endif ()

    if (NOT IS_ABSOLUTE "${ARG_INPUT}")
        get_filename_component (ARG_INPUT "${ARG_INPUT}" ABSOLUTE BASE_DIR "${CMAKE_CURRENT_SOURCE_DIR}")
    endif ()

    if (NOT EXISTS "${ARG_INPUT}")
        message (FATAL_ERROR "INPUT does not exist: ${ARG_INPUT}")
    endif ()

    file (RELATIVE_PATH ARG_INPUT "${CMAKE_CURRENT_SOURCE_DIR}" "${ARG_INPUT}")

    get_filename_component (ARG_INPUT_EXT "${ARG_INPUT}" EXT)
    if ("${ARG_INPUT_EXT}" STREQUAL ".png")
        make_icns_from_png (INPUT "${ARG_INPUT}" OUTPUT child_output)
    elseif ("${ARG_INPUT_EXT}" STREQUAL ".svg")
        make_icns_from_svg (INPUT "${ARG_INPUT}" OUTPUT child_output)
    else ()
        message (FATAL_ERROR "INPUT must refer to a .png or .svg, but a ${ARG_INPUT_EXT} was provided")
    endif ()

    if (ARG_OUTPUT)
        set ("${ARG_OUTPUT}" "${child_output}" PARENT_SCOPE)
    endif ()
endfunction () 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-12-13T10:38:02.733

**您好，根据我的需要，我制作了一个可以单独拖放图标或在文件夹中搜索图标的液滴（我仅限于文件夹，因为搜索所有图标的卷可能需要很多时间）。因此，在拖放中，您可以拖放文件夹或应用程序，以及任何可以包含图标的东西。创建的图标集带有原始图标的名称，它被放置在目录“/aaaicones”和图标的路径中。文件夹“/aaaicones”中的示例如果您提交 xcode.app，您会发现“/aaaicones/Applications/xcode.app/access.iconset”和/aaaicones/Applications/xcode.app/access.icns（重新创建的图标）将是一个文本文件，其中跟踪图标的完整路径，以及相应图标集示例的路径“/Applications/xcode.app/Contents/Applications/Instruments.**

```
on open draggedItems
    set input to draggedItems
    set fich to draggedItems

    set media to {}

    set theInfo to {}

    set n to "0"
    repeat with currentItem in draggedItems
        set dirchoisi to POSIX path of fich
        if ".icns" is not in dirchoisi then
            if "Volumes" is not in dirchoisi then

                set origi to do shell script "echo   /aaaicones" & dirchoisi
                set fich to do shell script "echo " & fich & " | xxd -p -c 100000 | sed 's#3a#2f#g' | xxd -r -p | sed 's#" & dirchoisi & "#" & "/aaaicones" & dirchoisi & "#g' | xxd -p -c 100000 | sed 's#2f#3a#g' | xxd -r -p"
                tell application "Finder"
                    if exists (folder fich) then
                        set nn to "0"
                        repeat with nn from 1 to 5
                            set origi to do shell script "echo  " & origi & "/" & " | sed 's#//#" & nn & "/" & "#'"
                            set fich to do shell script "echo " & fich & " | sed 's#:aaaicones*.*#" & origi & "#'" & " | xxd -p -c 100000 | sed 's#2f#3a#g' | xxd -r -p"

                            if not (exists folder (fich as Unicode text)) then
                                try
                                    set origi to do shell script "echo  " & origi
                                    exit repeat
                                end try
                            end if
                        end repeat
                    end if
                end tell
                tell application "Finder"
                    if not (exists folder (fich as Unicode text)) then
                        do shell script "mkdir -p -m 0777 " & quoted form of origi
                    end if
                end tell
                try
                    set theInfo to do shell script "find " & (quoted form of dirchoisi) & " -name *.icns "
                end try

                set AppleScript's text item delimiters to return

                set theList to text items of theInfo

                set AppleScript's text item delimiters to ""

                set n to count theList
                repeat with i from 1 to n
                    if "Volumes" is not in item i of theList then
                        set end of media to item i of theList
                    end if
                end repeat
                set n to count media
                set cheminicns to do shell script " > " & quoted form of (origi & "aalisticones.txt") & " |  chmod 777 " & quoted form of (origi & "aalisticones.txt")
                set cheminicns to do shell script "ls " & quoted form of (origi & "aalisticones.txt")

                tell application "Finder"
                    set letext to (POSIX file cheminicns as alias)
                    set label index of letext to 2
                end tell

                repeat with i from 1 to n

                    set hdd to item i of media
                    try

                        set input to do shell script "echo   " & hdd & " | sed 's#//#/#g; s#(#\\(#g;s#)#\\)#g' "
                        do shell script "echo   " & quoted form of input & " >>" & quoted form of cheminicns
                        set png to do shell script "echo " & quoted form of input & " | sed 's#.*/##' "

                        do shell script "cp -f " & quoted form of input & " " & quoted form of origi
                        set input to do shell script "iconutil -c iconset  " & quoted form of (origi & png)
                        do shell script "echo   " & quoted form of (origi & png) & " | sed 's#.icns#.iconset#' >>" & quoted form of cheminicns
                    end try
                end repeat
                tell application "Finder"
                    if exists (folder fich) then
                        open fich
                    end if
                end tell

            end if
        else

            set input to do shell script "echo   " & dirchoisi & " | sed 's#//#/#g; s#(#\\(#g;s#)#\\)#g' "
            set png to do shell script "echo " & quoted form of input & " | sed 's#.*/##' "
            set origi to do shell script "echo " & quoted form of ("/aaaicones/aIconeseule/" & input) & " | sed 's#/Volumes/##; s#" & quoted form of png & "##'"
            do shell script "mkdir -p -m 0777 " & quoted form of origi
            do shell script "echo   " & quoted form of input & " >>" & quoted form of origi & "aalisticones.txt"

            do shell script "cp -f " & quoted form of input & " " & quoted form of origi
            set input to do shell script "iconutil -c iconset  " & quoted form of (origi & png)
            do shell script "echo   " & quoted form of (origi & png) & " >>" & quoted form of origi & "aalisticones.txt"
        end if
    end repeat
end open 
```

# c++ - 这个赋值运算符后面的 & 是什么意思？

> ID：12306226
> 
> 赞同：51
> 
> 时间：2012-09-06T18:29:03.440
> 
> 标签：c++, c++11, assignment-operator, default-implementation

我正在阅读这个关于“五规则”的[好答案](https://stackoverflow.com/a/4782927/1174378)，我注意到一些我不记得以前见过的东西：

```
class C {
  ...
  C& operator=(const C&) & = default;
  C& operator=(C&&) & = default;
  ...
}; 
```

放置在复制赋值运算符和移动赋值运算符`&`前面的字符的目的是什么？`= default`有人对此有参考吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-06T18:36:44.933

它是允许 C++11 非静态成员函数区分它们是在左值还是右值上调用的功能的一部分。

在上述情况下，此处默认的复制赋值运算符只能在左值上调用。这使用了成熟的左值和右值引用绑定规则；这只是建立他们`this`。

在上述情况下，只有当被复制到的对象可以绑定到非 const 左值引用时，才会默认复制赋值运算符。所以这很好：

```
C c{};
c = C{}; 
```

这不是：

```
C{} = c; 
```

这里的临时值不能绑定到左值引用，因此不能调用复制赋值运算符。并且由于此声明将阻止创建通常的复制赋值运算符，因此此语法有效地阻止*了对 temporaries*的复制分配（或移动分配） 。为了恢复它，您需要添加一个`&&`版本：

```
C& operator=(const C&) && = default;
C& operator=(C&&) && = default; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-06T18:35:59.373

这意味着该函数只能在左值上调用。所以这将失败，因为赋值运算符函数是在右值对象表达式上调用的：

```
C() = x; 
```

# java - 使用预定义值填充哈希图（java）

> ID：12306229
> 
> 赞同：16
> 
> 时间：2012-09-06T18:29:18.563
> 
> 标签：java, hashmap, auto-populating

我遇到了一个我以前没有处理过的问题。我正在为java中的数据库编写一个补丁，它基本上转换存储在某些行中的数据。为了做到这一点，我有一个转换表，告诉我什么值变成了什么。

例如，如果我读入“RC”、“AC”、“GH”-> 将值更新为“T1”。（这些只是随机示例，它基本上是将一个字符串转换为另一个字符串。）

我需要一种存储这些转换的好方法。我在想一个哈希图：KEY,VALUE: (RC,T1) (AC,T1) (GH,T1) 等等等等。

现在，有几十个。补丁初始化时填充此哈希图的好方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-06T18:32:51.440

我会在设置 HashMap 时进行初始化

例如

```
private static final Map<String, String> m = new HashMap<String, String>() {{
    put("RC", "T1");
    put("AC", "T1");
}}; 
```

然后你会确保所有的东西都在你的代码中设置好。

我认为@Nambari 提出了一个很好的观点，尽管它可能将值作为一个列表而不仅仅是一个字符串。不过，这确实会交换您的键和值。

例如

```
 private static final Map<String, List<String>> m = new HashMap<String, List<String>>() {{
    put("T1", Arrays.asList("RC", "AC");
}}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-27T14:44:48.583

使用 Java 11，您可以使用`Map.of("RC", "T1", "AC", "T1");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:30:30.867

可能是其他方式，List`RC,AC,GH`作为 value，T1 作为 hashmap 的 key，这样可以减少 map 中的条目数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:55:06.673

您可以使用apache commons 中的[PropertiesConfiguration](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/PropertiesConfiguration.html)。

> value 可以包含值分隔符，然后将被解释为标记列表。默认值分隔符是逗号','。所以下面的属性定义

```
key = This property, has multiple, values 
```

# java - 内存分配和变量的寿命

> ID：12306234
> 
> 赞同：1
> 
> 时间：2012-09-06T18:29:45.987
> 
> 标签：java

我的问题或更确切地说问题如下：

1）静态变量驻留在哪里。有些文章说它们驻留在堆上，有些文章说它们位于类定义的 perm gen 区域中，因为它们是类属性。我理解第二个选项可能是正确的，因为它是一个类属性。
2）最终变量在哪里以及它的生命是什么，如果：a）它是原始类型的实例变量b）它是原始类型方法的局部变量c）它是引用类型的实例变量b）它是局部的类型引用方法的变量
3) 如果引用局部变量是本地的，那么它们存储在哪里。
4）在数组的情况下，内存分配是否有任何差异，因为它们是实例变量或局部线程变量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:37:41.647

`Where does the static variable reside`

**-**静态变量位于 中`Method Area`，而 permgen 位于 Method 区域内。

```
Where does the final variable reside and what is its life if
Its an instance variable of type primitive 
```

**-**如果它的实例变量，它停留在`Heap inside the Object`它所属的对象上，并且由于没有对持有它的对象的引用而超出范围。

`Its a local variable of a method of type primitive`

**-**它停留在堆栈上，并且在到达方法右括号时超出范围......

`Its an instance variable of type reference`

**-**它停留在`Heap inside the Object`它所属的对象上，并且超出范围，因为没有对持有它的对象的引用。

`Its a local variable of a method of type reference`

**-**它停留在堆栈上，并且在到达方法右括号时超出范围......

`Where are the reference local variables stored if they are local.`

**-**在堆栈上...

`In case of arrays is there any difference in memory allocation as in they are instance` `variable or local thread variable.`

**-** Array**是一个**存储它的**对象**`Heap`....但是从`Java 6u23`版本开始，已经引入`Escape Analysis`了**堆栈，而不是堆......**

# windows - 如何使用充满服务器名称的记事本文件使用批处理执行命令？

> ID：12306240
> 
> 赞同：1
> 
> 时间：2012-09-06T18:29:51.660
> 
> 标签：windows, batch-file, cmd

我使用 sc 命令查询机器上运行的服务，并且使用的代码类似于：

```
 sc \\"server_name" query | find "SERVICE_NAME" > servicelist2.txt 
```

所以基本上所有的服务器名称都列在这个记事本文件中。其中有 100 多个。手动输入每个名称并编写 100 多行代码太难了。有没有办法我可以使用批处理本身指向记事本文件并遍历其中写入的所有服务器名称，然后将它们放回“sc”命令？

编辑：如果不明显的话，我在 Windows 上。使用上述批处理脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:37:19.147

假设您在同一目录中有一个名为**servers.list的文件，您可以使用它：**

```
for /f %%a in (%~d0%~p0servers.list) do (
  ECHO %%a > servicelist2.txt
  sc \\%%a query | find "SERVICE_NAME" > servicelist2.txt
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:37:12.740

你可以用[for /f](http://ss64.com/nt/for_f.html)做到这一点：

```
OR /F "usebackq tokens=*" %%G IN ("C:\My Documents\servers.txt") DO (
 sc \\%%G query | find "SERVICE_NAME" > servicelist2.txt
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T16:32:08.823

```
@echo off
echo Starting to list query services...
for /f %%i in (servieslist2.txt) do sc query %%i > output.txt
echo Finished query services... 
```

以上将遍历 serviceslist2.txt 中指定的 100 个服务名称中的每一个，并将其输出到与批处理文件位于同一目录中的名为 output.txt 的文件中

# javascript - 如何设置整个按钮集的宽度？

> ID：12306242
> 
> 赞同：0
> 
> 时间：2012-09-06T18:30:04.100
> 
> 标签：javascript, jquery, html, css, jquery-ui

请在这里考虑这段代码，也给出了这个小提琴：http: [//jsfiddle.net/DPNc6/](http://jsfiddle.net/DPNc6/)

HTML：

```
<div style="width:500px" id="radio">
    <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
    <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
    <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
</div>​ 
```

JS；

```
$('#radio').buttonset()​ 
```

正如大家所看到的，我试图让整个按钮集填充 500 像素的宽度，但是使用这个样式属性似乎没有做任何事情。如何将整个按钮集的宽度设置为一些像素？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:39:35.787

尝试：

```
$('#radio input').css('width', '30%'); 
```

由于填充和边距，它可能会溢出一点，因此您可能需要进行一些更正：

```
var $inputs = $('#radio input');
var w = (500 / 3) - ($inputs.length * ($inputs.css('padding-left') +
                                       $inputs.css('padding-right')));
// I'm assuming the buttons are still `display: inline` so let's position them
// absolutely and give them some margin.
var margin = 5;
w -= ($inputs.length - 1) * margin;

var l = 0 - margin;
$('#radio').css('position', 'relative');
$inputs.each(function() {
  $(this).css({
    'width' : w,
    'position' : 'absolute',
    'left' : l
  });
  l += w + m;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:41:08.640

我相信适用于可变数量按钮的最佳跨浏览器兼容解决方案是将其包装在表格中：http: [//jsfiddle.net/DPNc6/1/](http://jsfiddle.net/DPNc6/1/)

# javascript - 文件不在根目录时的图像预加载器问题

> ID：12306246
> 
> 赞同：0
> 
> 时间：2012-09-06T18:30:16.170
> 
> 标签：javascript

我正在使用一些现有的代码，并且有一个预加载器可以为导航翻转状态加载一些图像。它看起来像这样：

```
<body onload="MM_preloadImages('Images/Home-over.png','Images/Signup-over.png','Images/Costs-over.png','Images/Team-over.png','Images/Process-over.png','Images/Scholarships-over.png','Images/Login-over.png','Images/FAQ-over.png','Images/Contact-over.png','Images/About-over.png')"> 
```

使用上述导航项目之一的示例如下：

```
 <div id="Layer-15" class="Contact"  > <a href="contact.html"><img src="Images/Contact.png" alt="Contact" name="Contact" width="98" height="56" border="0" class="pngimg" id="Contact" onmouseover="MM_swapImage('Contact','','Images/Contact-over.png',1)" onmouseout="MM_swapImgRestore()" /></a></div> 
```

现在以上所有内容都在根文件夹中。

当我深入一个文件夹时，导航会中断：

我的代码看起来与上面发布的完全一样，除了我在每个引用图像前加上'../'，例如'../Images/Home-over.png' 以首先将其发送回根文件夹。

不幸的是，这不起作用。

由于没有其他问题，在我看来，图像没有被预加载，这很可能是因为图像路径错误。

但是我不确定它是怎么回事或者我如何找出正确的路径？

感谢所有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:31:03.023

这背后的问题是，由于我的 php 中有重复的“包含”语句，整个页面代码都被重复了，这阻止了导航栏的样式。

# extjs - 过滤商店记录 - 不同

> ID：12306251
> 
> 赞同：1
> 
> 时间：2012-09-06T18:30:32.597
> 
> 标签：extjs, extjs4

我正在获取一些记录，并使用如下所示的过滤器属性；

```
store = Ext.getStore('PEOPLE');
store.on('load', function() {
    store.filter({
        filterFn: function(f) {
            return f.get('Name') == "SAM"; 
        }
    });
});
store .load(); 
```

上面的代码将过滤**所有**具有 name 的 Names `SAM`。但是，我希望它只返回 1 个名称（**只**返回 SAM（**一次**））。

例如，在数据库中，我们使用关键字**DISTINCT**仅获取 1 条记录（如果有多条记录）。我怎么能在我的场景中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T20:14:02.167

这可能是您正在寻找的吗？

```
store = Ext.getStore('PEOPLE');
store.on('load', function() {
    store.filter({
        filterFn: function(f) {
            return f.get('Name') == "SAM"; 
        }
    });
    if(store.getTotalCount() > 1)
        store.remove(store.getRange(1));
});
store.load(); 
```

# jquery - jquery选择器不接受管道字符|？

> ID：12306252
> 
> 赞同：10
> 
> 时间：2012-09-06T18:30:33.680
> 
> 标签：jquery, jquery-selectors

我有一个要调用的 html ID。它有一个像这样的特定名称构建`name_|_anyting` 但是当我尝试使用 Jquery 的选择器获取 elemetn 时出现错误

```
$("#name_|_anyting") 
```

> 错误：语法错误，无法识别的表达式：|_anyting

所以我的问题是：在 jquery 选择器中是否不允许管道字符作为 Id？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T18:32:13.427

`|`是选择器语法中的特殊字符，这意味着您不能直接在 ID 选择器中使用它。如果您无法更改标记中的 ID 以适应您的选择器，您将不得不转义选择器以诱使 jQuery 选择元素：

```
$("#name_\\|_anything") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T08:20:28.770

管道字符“|” 必须使用双反斜杠进行转义。

> ## 选择器
> 
> 借用 CSS 1-3，然后添加自己的，jQuery 提供了一组强大的工具来匹配文档中的一组元素。
> 
> 如果您希望使用任何元字符（例如**!"#$%&'()*+,./:;<=>?@[]^`{** | **}** ~**** ）作为名称的文字部分，您必须使用两个反斜杠转义字符：\\。例如，如果您有一个 id="foo.bar" 的元素，您可以使用选择器 $("#foo\\.bar" ). W3C CSS 规范包含有关有效 CSS 选择器的完整规则集。Mathias Bynens 关于标识符的 CSS 字符转义序列的博客条目也很有用。

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-07T20:30:29.167

更新一个旧问题...在 jQuery 3.0 中，您现在可以使用[$.escapeSelector(selector)](https://api.jquery.com/jQuery.escapeSelector/)。例子：

```
$('#' + $.escapeSelector('crazy|id.selector') + 'Wrapper').show();
$('.' + $.escapeSelector(divClassVariable)).each(function() {...}) 
```

和（来自文档）

```
$( "div" ).find( "." + $.escapeSelector( ".box" ) ); 
```

# python - 使用 ctypes 将结构指针从 C 返回到 Python - 64 位系统上的 32 位 python

> ID：12306254
> 
> 赞同：1
> 
> 时间：2012-09-06T18:30:43.227
> 
> 标签：python, pointers, struct, ctypes, fftw

我正在尝试访问一个使用 ctypes 返回结构指针的 C 函数。我正在使用来自 EPD 的 32 位 ipython。我在 64 位 CentOS 机器上，但我必须使用 32 位 Python，因为共享库是 32 位的。当我尝试获取结构指针时，出现分段错误。我不需要访问结构字段，因为我只是将结构用作另一个 C 函数的输入。代码看起来像这样。

```
from ctypes import *

libfoo = CDLL("libfoo.so")

func1 = libfoo.func1
func2 = libfoo.func2

func1.restype = c_void_p

obj = func1() # This is where it stops with segfault

func2 (data, obj) 
```

* * *

C代码

* * *

```
typedef struct
{
    int int1;
    int int2;
    float float1;
    float *arr;
    fftwf_plan fft;
} mystruct;

mystruct *func1(void)
{
    mystruct *bar = (mystruct *) malloc (sizeof(mystruct));

    bar->int1 = 1;
    bar->int2 = 2;
    bar->float1 = 1.0;
    ....

    bar->arr = (float *) fftwf_malloc (sizeof(float) * (FFT_LEN + 2));
    bar->fft = fftwf_plan_dft_r2c_1d (FFT_LEN, ch->arr, (fftwf_complex *)ch->arr, FFTW_MEASURE);

    return bar;
}

void func2 (float *data, mystruct *bar)
{
    ....
} 
```

我也尝试创建一个 ctypes 结构对象，但仍然出现段错误。如果可能的话，我想简单地将指针传递给 func2，而不必创建 ctypes 结构。我读过几篇有类似问题的帖子，但没有一个是真正匹配的。

# java - Java编程-帮助初始化（地毯）

> ID：12306255
> 
> 赞同：0
> 
> 时间：2012-09-06T18:30:44.350
> 
> 标签：java

我已经开始学习 Java 编程，但在做作业时遇到了问题：ps 这是 ac 编程作业，用它来做 java 编程：

> 考虑一个（可能是大型商业）房间，其地板尺寸长度为 len 和宽度为 wd。地板的面积由 len 乘以 wid 得出。
> 
> 地毯砖以单独的正方形（2 英尺乘 2 英尺）的形式提供。编写、编译和运行一个 C 程序，carpet.c，它
> 
> - 计算从终端输入尺寸（len 和 wid）（测量单位为英寸）的房间所需的最小地毯块数。注意：可以切割地砖以适合房间的边缘 - 尽量减少浪费。
> 
> - 计算需要多少个方块地毯包。供应商只提供十个一包的方块地毯（即不能单独购买单个方块）。
> 
> - 计算购买了最少数量的包后剩余的备用瓷砖数量。
> 
> - 将所有这些结果连同订单的总成本打印在一张整洁的表格中。（前四包每包瓷砖的价格为 50 美元，随后每包价格降至 45 美元。）
> 
> 仔细想想你将如何测试你的程序？计算很重要，很容易出错。如果您的程序不起作用，那么您将浪费公司大量资金，并且您可能会失去提供软件的合同。
> 
> 你应该写出一些测试用例（手写），涵盖所有可能发生的不同可能性。不要忘记考虑各种边界情况 - 这些通常是检测到错误的地方。

到目前为止，我已经完成了：

```
import java.util.Scanner;

public class carpet {
    public static void main (String args[]){
    Scanner scanf = new Scanner (System.in);

        float len, wid;
        float area;

        int roundTiles;
        int roundPacks;

        float tarea;
        float tpack;
        float NoOfTiles;
        float NoOfPacks;
        float tspares1;
        float tspares2;
        int packCost;
        int cost;

        tarea= 12* 12;
        tpack= 10;

        System.out.format("Enter the length of the room, Inches: ");
        len = scanf.nextFloat();

        System.out.format("Enter the width of the room, Inches: ");
        wid = scanf.nextFloat();

        area = len * wid;

        NoOfTiles = area/ tarea;
        NoOfPacks = NoOfTiles/tpack;

        roundTiles = (int) Math.ceil(NoOfTiles);
        roundPacks = (int) Math.ceil(NoOfPacks);

        tspares1 = roundPacks * 10;
        tspares2 = tspares1 - roundTiles;

        if (roundPacks <= 4)
            packCost =50;
        else if(roundPacks > 4)
        {
            packCost = 45;
            packCost = packCost + 20;   *<<-----******LINE 50-----*********

        }

        cost =roundPacks * packCost; *<<*******---ERROR-------------*********

        System.out.println(cost);

        }

} 
```

**错误提示：** *“局部变量 packCost 可能尚未初始化”*

**并且编译器说：** *“线程“main”java.lang.Error中的异常：未解决的编译问题：局部变量packCost可能没有在carpet.main（carpet.java:50）初始化“*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:34:37.960

您需要 通过替换当前行来初始化变量**packCost ：**

```
int packCost; 
```

经过

```
int packCost=0; 
```

您正在条件语句中初始化您的 packCost 变量，而编译器不够聪明，无法检测到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:33:08.833

您需要初始化`packetCost`：

```
int packCost = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:40:01.237

使用 else 而不是 else-if 可以使编译器清楚地知道将执行其中一个条件，因此始终设置 packCost：

```
if (roundPacks <= 4)
    packCost = 50;
else
{
    packCost = 45;
    packCost = packCost + 20;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:37:07.273

在 Java 中，需要初始化局部变量。如果这是一个字段变量，它将有一个隐含的默认值 0（零）。

这是一个解释这一点的链接：[http](http://www.janeg.ca/scjp/lang/defaults.html) ://www.janeg.ca/scjp/lang/defaults.html （免责声明：不是我的页面）

从这个页面：

*   字段变量（类成员）自动初始化为默认值
*   局部变量（方法或构造函数变量）不会自动初始化

# ssis - SSIS 数据流如何删除重复行但在 SSIS 中记录重复项

> ID：12306256
> 
> 赞同：4
> 
> 时间：2012-09-06T18:30:51.643
> 
> 标签：ssis, duplicates, duplicate-removal

我从[删除 SSIS 数据流中的重复项](https://stackoverflow.com/questions/6430282/remove-duplicates-in-ssis-data-flow)中学到了如何使用排序转换来删除具有重复数据值的行。

就我而言，我正在读取一个分隔文件，需要消除重复项，*并记录具有重复键的行*。我需要将这些行输出到另一个分隔文件，并将其通过电子邮件发送回客户，以便他们更正数据并重试。

不过，我无法完全弄清楚如何做到这一点。我将尝试使用 Aggregate 和 Merge Join，但我希望有一个已知的模式可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T21:05:50.010

Hi my answer gonna work with any data, because some solutions in internet need primary key of rows, **for my solution primary key is not required**. Here sample structure and sample dataset:

```
a   b
1   23
1   23
16  59
12  12
13  45
12  12
45  56 
```

![enter image description here](../Images/0202af4a1ffe3ea2b5487e957257879b.png)

Just group by all columns and add last column - count all (If there are more than two columns or more, you just need in "Aggregate" element put all columns and foreach set group by and in the end put "Count All" column):

![enter image description here](../Images/79150138c128311b550c147513b663aa.png)

Then just add conditional split element and take all rows where are more than 1 same row:

![enter image description here](../Images/9ef30dbaef1444f4aedd28f55dd3f002.png)

Real Example:

![enter image description here](../Images/1c8c8034d22d0b0a8b3e95fbec735eb6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:10:59.677

我[通过博客上的一些选项](http://toddmcdermid.blogspot.com/2009/01/eliminating-duplicate-primary-keys-in.html)从数据流中删除重复项，这里有一个关于如何“保存”重复行以进行备用处理[的小脚注。](http://toddmcdermid.blogspot.ca/2009/01/extracting-duplicate-primary-key-rows.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:55:52.630

**可能通过脚本实现。**

首先，您将[使用脚本遍历数据集](http://sqlblog.com/blogs/andy_leonard/archive/2007/10/14/ssis-design-pattern-read-a-dataset-from-variable-in-a-script-task.aspx)并以编程方式识别重复项。[然后，您可以将条目写入日志文件以查找您发现的骗子](http://www.databasejournal.com/features/mssql/article.php/3916711/Script-Task-and-Event-Logging-in-SSIS.htm)。

# javascript - 按 .elements id 对 .container .elements 进行排序

> ID：12306259
> 
> 赞同：1
> 
> 时间：2012-09-06T18:31:03.610
> 
> 标签：javascript, jquery, sorting

我正在尝试使用该`.sort()`函数对列表进行排序：

```
<div class="centerCnt">
    <div class="widgetHelp" id="5">a</div>
    <div class="widgetHelp" id="1">b</div>
    <div class="widgetHelp" id="2">c</div>
    <div class="widgetHelp" id="3">d</div>
</div> 
```

我试过类似的东西：

```
list = $(".widgetHelp");
list.sort(function(a, b) {
    var aProp = parseInt($(a).attr('id').replace('help_id_','')),
        bProp = parseInt($(b).attr('id').replace('help_id_',''));
    return (aProp > bProp ? 1 : aProp < bProp ? -1 : 0);
}); 
```

结果很糟糕……有人可以给我看灯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:34:12.737

jQuery 没有公开实现该`.sort`方法，它是一个隐藏方法，因为它没有实现通常的类似 jquery 的接口，并且仅供内部使用。话虽如此，您仍然可以使用它，自从它添加到库以来它没有改变。试试这个：

```
list = $(".widgetHelp");
parent = list.parent();
list.sort(function(a, b) {
    var aProp = parseInt($(a).attr('id').replace('help_id_','')),
        bProp = parseInt($(b).attr('id').replace('help_id_',''));
    return (aProp > bProp ? 1 : aProp < bProp ? -1 : 0);
});
parent.append(list); 
```

[http://jsfiddle.net/rz5gL/](http://jsfiddle.net/rz5gL/)

# flume - Avro sink 被删除为空

> ID：12306261
> 
> 赞同：0
> 
> 时间：2012-09-06T18:31:07.497
> 
> 标签：flume

出于某种原因，我的 Flume 1.2 avro sink 被从配置中删除，因为它是空的。我在下面包含了代理配置和调试输出。

```
#Flume agent configuration
collector_agent.sources = tailSource1
collector_agent.sinks = avroSink1
collector_agent.channels = memChannel1

collector_agent.sources.tailSource1.type = exec
collector_agent.sources.tailSource1.command = tail -n0 -F /f/f2-traffic/logs/archive_epc.log
collector_agent.sources.tailSource1.channels = memChannel1
collector_agent.sources.tailSource1.batchSize = 5
collector_agent.sources.tailSource1.restart = true

collector_agent.sinks.avroSink1.type = avro
collector_agent.sinks.avroSink1.channels = memChannel1
collector_agent.sinks.avroSink1.hostname = 10.11.14.83
collector_agent.sinks.avroSink1.port = 4545

collector_agent.channels.memChannel1.type = memory
collector_agent.channels.memChannel1.transactionCapacity = 5

#Console log output:
bin/flume-ng agent --conf conf/ --conf-file ../test_epc_config.conf --name collector_agent -Dflume.root.logger=DEBUG,console
+ exec /usr/java/latest/bin/java -Xmx20m -Dflume.root.logger=DEBUG,console -cp '/root/flume_test/apache-flume-1.2.0/conf:/root/flume_test/apache-flume-1.2.0/lib/*' -Djava.library.path= org.apache.flume.node.Application --conf-file ../test_epc_config.conf --name collector_agent
2012-09-06 11:09:26,590 (main) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] Starting lifecycle supervisor 1
2012-09-06 11:09:26,594 (main) [INFO - org.apache.flume.node.FlumeNode.start(FlumeNode.java:54)] Flume node starting - collector_agent
2012-09-06 11:09:26,597 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.start(DefaultLogicalNodeManager.java:187)] Node manager starting
2012-09-06 11:09:26,599 (lifecycleSupervisor-1-2) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider.start(AbstractFileConfigurationProvider.java:67)] Configuration provider starting
2012-09-06 11:09:26,599 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] Starting lifecycle supervisor 10
2012-09-06 11:09:26,600 (lifecycleSupervisor-1-0) [DEBUG - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.start(DefaultLogicalNodeManager.java:191)] Node manager started
2012-09-06 11:09:26,601 (lifecycleSupervisor-1-2) [DEBUG - org.apache.flume.conf.file.AbstractFileConfigurationProvider.start(AbstractFileConfigurationProvider.java:86)] Configuration provider started
2012-09-06 11:09:26,601 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:188)] Checking file:../test_epc_config.conf for changes
2012-09-06 11:09:26,601 (conf-file-poller-0) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:195)] Reloading configuration file:../test_epc_config.conf
2012-09-06 11:09:26,606 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:avroSink1
2012-09-06 11:09:26,607 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:992)] Created context for avroSink1: type
2012-09-06 11:09:26,607 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:avroSink1
2012-09-06 11:09:26,607 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:902)] Added sinks: avroSink1 Agent: collector_agent
2012-09-06 11:09:26,607 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:avroSink1
2012-09-06 11:09:26,607 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:avroSink1
2012-09-06 11:09:26,608 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.isValid(FlumeConfiguration.java:295)] Starting validation of configuration for agent: collector_agent, initial-configuration: AgentConfiguration[collector_agent]
SOURCES: {tailSource1={ parameters:{restart=true, command=tail -n0 -F /f/f2-traffic/logs/archive_epc.log, batchSize=5, channels=memChannel1, type=exec} }}
CHANNELS: {memChannel1={ parameters:{transactionCapacity=5, type=memory} }}
SINKS: {avroSink1={ parameters:{port=4545, hostname=10.11.14.83, channels=memChannel1, type=avro} }}

2012-09-06 11:09:26,613 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.validateChannels(FlumeConfiguration.java:450)] Created channel memChannel1
2012-09-06 11:09:26,626 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.validateSinks(FlumeConfiguration.java:649)] Creating sink: avroSink1 using AVRO
2012-09-06 11:09:26,628 (conf-file-poller-0) [WARN - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.validateSinks(FlumeConfiguration.java:668)] Configuration empty for: avroSink1.Removed.
2012-09-06 11:09:26,629 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.isValid(FlumeConfiguration.java:353)] Post validation configuration for collector_agent
AgentConfiguration created without Configuration stubs for which only basic syntactical validation was performed[collector_agent]
SOURCES: {tailSource1={ parameters:{restart=true, command=tail -n0 -F /f/f2-traffic/logs/archive_epc.log, batchSize=5, channels=memChannel1, type=exec} }}
CHANNELS: {memChannel1={ parameters:{transactionCapacity=5, type=memory} }}

2012-09-06 11:09:26,629 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:117)] Channels:memChannel1

2012-09-06 11:09:26,629 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:118)] Sinks null

2012-09-06 11:09:26,629 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:119)] Sources tailSource1

2012-09-06 11:09:26,629 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:122)] Post-validation flume configuration contains configuration  for agents: [collector_agent]
2012-09-06 11:09:26,629 (conf-file-poller-0) [INFO - org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.loadChannels(PropertiesFileConfigurationProvider.java:249)] Creating channels
2012-09-06 11:09:26,629 (conf-file-poller-0) [DEBUG - org.apache.flume.channel.DefaultChannelFactory.create(DefaultChannelFactory.java:68)] Creating instance of channel memChannel1 type memory
2012-09-06 11:09:26,668 (conf-file-poller-0) [INFO - org.apache.flume.instrumentation.MonitoredCounterGroup.<init>(MonitoredCounterGroup.java:68)] Monitoried counter group for type: CHANNEL, name: memChannel1, registered successfully.
2012-09-06 11:09:26,669 (conf-file-poller-0) [INFO - org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.loadChannels(PropertiesFileConfigurationProvider.java:273)] created channel memChannel1
2012-09-06 11:09:26,669 (conf-file-poller-0) [DEBUG - org.apache.flume.source.DefaultSourceFactory.create(DefaultSourceFactory.java:74)] Creating instance of source tailSource1, type exec
2012-09-06 11:09:26,678 (conf-file-poller-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.startAllComponents(DefaultLogicalNodeManager.java:92)] Starting new configuration:{ sourceRunners:{tailSource1=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource@100c62c8 }} sinkRunners:{} channels:{memChannel1=org.apache.flume.channel.MemoryChannel@1d2940b3} }
2012-09-06 11:09:26,679 (conf-file-poller-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.startAllComponents(DefaultLogicalNodeManager.java:99)] Starting Channel memChannel1
2012-09-06 11:09:26,679 (conf-file-poller-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.startAllComponents(DefaultLogicalNodeManager.java:114)] Waiting for channel: memChannel1 to start. Sleeping for 500 ms
2012-09-06 11:09:26,680 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.instrumentation.MonitoredCounterGroup.start(MonitoredCounterGroup.java:82)] Component type: CHANNEL, name: memChannel1 started
2012-09-06 11:09:27,181 (conf-file-poller-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.startAllComponents(DefaultLogicalNodeManager.java:138)] Starting Source tailSource1
2012-09-06 11:09:27,182 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.source.ExecSource.start(ExecSource.java:145)] Exec source starting with command:tail -n0 -F /f/f2-traffic/logs/archive_epc.log
2012-09-06 11:09:27,184 (lifecycleSupervisor-1-0) [DEBUG - org.apache.flume.source.ExecSource.start(ExecSource.java:163)] Exec source started 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:33:19.300

错字基于 AvroSink 上的 Flume 用户指南中的复制和粘贴。这

```
 collector_agent.sinks.avroSink1.channels 
```

实际上应该是

```
 collector_agent.sinks.avroSink1.channel 
```

因为一个 Sink*只能有 1 个通道*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:17:57.033

正如您所提到的， .channel 是接收器的正确属性。

我们今天提交了一个补丁来修复所有损坏的接收器示例（它们都包含相同的错误！）：[https ://issues.apache.org/jira/browse/FLUME-1613](https://issues.apache.org/jira/browse/FLUME-1613)

# .net - 如何正确标记代码度量的设计器代码以忽略它

> ID：12306263
> 
> 赞同：3
> 
> 时间：2012-09-06T18:31:11.430
> 
> 标签：.net, winforms, windows-forms-designer

我用 InitializeComponent 标记了所有实例

```
<CodeDom.Compiler.GeneratedCode("WinForms Designer", "")> 
```

所以这些不会在代码度量分析过程中出现。生成的其余代码仍然是我的，尤其是每个控件的 setter 和 getter。使用 GeneratedCode 标记整个部分类（winforms 设计器部分）会使整个类从代码指标中消失，因此即使是我的自定义逻辑。我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:55:05.397

Code Metrics 不会故意忽略 Form 类，请参阅[http://msdn.microsoft.com/en-us/library/bb385914.aspx](http://msdn.microsoft.com/en-us/library/bb385914.aspx)

> 为 Windows 窗体生成的代码不会被忽略，因为它是开发人员可以看到和更改的代码。

也许[Code Metrics Viewer](http://visualstudiogallery.msdn.microsoft.com/9f35524b-a784-4dbc-bd7b-6babd7a5a3b3)扩展会做你想做的事。

# ios - 为什么我的操作没有响应选择器？

> ID：12306265
> 
> 赞同：0
> 
> 时间：2012-09-06T18:31:12.637
> 
> 标签：ios, uilabel, subclass

我对 UILabel 进行了子类化，并添加了 2 个如下所示的属性：

```
@property (nonatomic, assign) SEL action;
@property (nonatomic, assign) id target; 
```

然后我实现了 UIView 的触摸开始方法，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    if ([target respondsToSelector:@selector(action)]) {
        [target performSelector:@selector(action) onThread:[NSThread mainThread] withObject:nil waitUntilDone:NO];
    }
} 
```

在包含子类 UILabel 的类中，我将目标和操作设置如下：

```
 label.target = self;
    labek.action = @selector(myMethod);
    label.userInteractionEnabled = YES; 
```

包含标签的类确实有方法 myMethod，所以它应该响应它。任何想法为什么它可能不会？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:42:22.570

您正在像这样设置您的操作`label.action = @selector(myMethod);`，然后使用操作并将其传递给第二个选择器`[target respondsToSelector:@selector(action)]`。这是行不通的。

你想这样做：

```
if ([target respondsToSelector:self.action]) {
    [target performSelector:self.action onThread:[NSThread mainThread] withObject:nil waitUntilDone:NO];
} 
```

基本上，if 语句失败是因为目标不响应该选择器。因此，它永远不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:38:23.207

您在调试控制台中是否遇到任何错误？

怎么样

```
@selector(myMethod:) // with colon. 
```

[Objective C 中的选择器](https://stackoverflow.com/questions/738622/selectors-in-objective-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:39:33.280

确保标签包含在超级视图的边界中

# wordpress - WAMP WordPress 谷歌日历事件错误

> ID：12306267
> 
> 赞同：1
> 
> 时间：2012-09-06T18:31:15.363
> 
> 标签：wordpress, plugins, calendar, wamp

我正在使用 WAMP 在本地计算机上开发 WordPress 网站。

我收到以下错误：

> “没有可用的 HTTP 传输可以完成请求的请求。请确保您的提要 URL 正确。”

我怀疑这是 WAMP 配置问题。有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T19:09:06.140

您的 php.ini 文件有问题。

注释掉该行`;extension=php_curl.dll`并重新启动 WAMP。

# wpf - 将 XAML 画布导入表达式设计？

> ID：12306269
> 
> 赞同：6
> 
> 时间：2012-09-06T18:31:19.450
> 
> 标签：wpf, silverlight, xaml, expression-blend, expression-design

我有一个在 Expression Blend 中用于 WPF 4 项目的 XAML（画布/路径）图标。我现在想使用 Expression Design 来修改图标，但我找不到打开、导入或复制图标到 Expression Design 的方法。

我发现很多关于如何将图像从设计移动到混合的讨论，但不是相反。

这可以做到吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T23:10:39.130

你可以使用 Inkscape。

*   [http://inkscape.org/](http://inkscape.org/)

它允许加载 XAML 文件，您可以另存为各种不同的格式。

您可以选择 .emf（增强型元文件格式）作为输出...因为它是 Expression Designer 可以读取的格式之一。

请注意，转换可能并不完美......这取决于每种格式对表示不同元素的支持以及它们可以表示的紧密程度。

已经展示了一个示例，我从 KAXAML 中的一些 XAML 开始......我在 Inkscape 中加载....保存为 .emf，然后在 Expression Designer 中加载。

![在此处输入图像描述](../Images/7a0445726ef5ac5ff92d41ba9fa98593.png)

![在此处输入图像描述](../Images/3656f4490f51e789035bca503423970e.png)

![在此处输入图像描述](../Images/2991157989678dbc7f0285cf17adca3d.png)

# javascript - 使用javascript移动背景按钮

> ID：12306271
> 
> 赞同：0
> 
> 时间：2012-09-06T18:31:20.103
> 
> 标签：javascript, background, position, move

```
function changeBackground() {
    var myVar = 100;
    $('div.seventh').css({"background-position": myVar});
} 
```

这是我使背景图像移动的代码。它可以工作，但只能工作一次......我试图让它不止一次工作的解决方案是这样的：

```
function changeBackground() {
    var myVar = ($('div.seventh').css('backgroundPositionX'))+100;
    $('div.seventh').css({"background-position": myVar});
} 
```

问题是这似乎不像我想要的那样工作。我得到了我想要的正确号码：

```
alert($('div.seventh').css('backgroundPositionX')); 
```

但这只是行不通...

有任何想法吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:57:43.597

您可以使用以下[`animate()`](http://api.jquery.com/animate/)功能：

```
$('div.seventh').animate({
    'background-position' : '+=50px'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:52:51.930

你可以试试这个技巧：

```
$('div.seventh').css({"background-position": "+=50px"}); 
```

希望这会有所帮助。

# asp.net - 防止 ASP.NET 中的 SQL 注入

> ID：12306272
> 
> 赞同：0
> 
> 时间：2012-09-06T18:31:26.240
> 
> 标签：asp.net

我注意到[这里](http://msdn.microsoft.com/en-us/library/ff648339.aspx)不再支持“防止 ASP.NET 中的 SQL 注入”页面。ASP.NET 2.0 之后出现了哪些替换参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:15:57.287

如前一条评论所述，使用[Microsoft Anti Cross Site Scripting Library/Security Runtime Engine。](http://wpl.codeplex.com/)

我建议在从表单到 SQL 查询以及从数据库返回到表单的任何字段上使用 AntiXSS。

来形成：

```
<%@ Import Namespace="Microsoft.Security.Application" %>
<%# Encoder.HtmlAttributeEncode(Eval("FROMDB").ToString()) %> 
```

数据库：

```
using Microsoft.Security.Application;
string DBVAR = Encoder.HtmlAttributeEncode(txtField.Text); 
```

[如何设置为您的 Web 应用程序的默认编码器](http://weblogs.asp.net/jgalloway/archive/2011/04/28/using-antixss-4-1-beta-as-the-default-encoder-in-asp-net.aspx)

文档不是最好的，但它作为白名单方法效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T16:14:19.200

您始终可以恢复到更多技术通用但特定于安全的网站，例如 OWASP，其[OWASP Sql Injection Prevention Cheat Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)描述了有关如何防止此安全问题的 C# 特定示例。

# php - parent:: 是否自动确定类和对象调用上下文？

> ID：12306273
> 
> 赞同：0
> 
> 时间：2012-09-06T18:31:33.553
> 
> 标签：php, class, object, parent

在第一种情况下，我们在对象上下文中调用函数。在第二种情况下，我们有类上下文。parent:: 是否根据上下文同时像这样和 self 一样工作？

```
class par_parent{
    private $var='value1';
    private static $val='value2';
    public function call(){
        var_dump('Object '.$this->var);
    }
    public static function staticCall(){
        var_dump('Static '.self::$val);
    }
}

class par_child extends par_parent{
    public function callObj(){
        parent::call();
    }

    public static function callStatic(){
        parent::staticCall();
    }
}

$obj=new par_child();
$obj->callObj();
**//string 'Object value1' (length=13)**
par_child::callStatic();
**//string 'Static value2' (length=13)** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:43:14.883

`parent::`像关键字一样被绑定，`self::`总是看到它被定义代码的上下文，而不是从它被调用的地方，所以本质上它就像`self::`关键字一样工作。如果您需要它像`$this`使用提供的后期静态绑定一样工作`static::`。考虑这个例子：

```
class A { 
    protected static $v = 'a';
    public static function staticsay() {
        print static::$v;
    }

}
class B extends A { 
    protected static $v = 'b';
    public static function say(){
        print parent::$v;
    }
}
class C extends B { 
    protected static $v = 'c';
    public static function selfsay(){
        print parent::$v;
    }
} 

C::say(); // prints 'a'
C::selfsay(); // prints 'b'
C::staticsay(); // prints 'c' 
```

在这里，我们调用它的`say()`方法`C`来自类`B`，所以它的`parent::`意思`A`是`A::$v`'a'，所以它打印出来。

虽然`parent::`in`C`指向类`B`并且它认为它`$v`是'b'。

php 5.3 附带了后期静态绑定和`static::`关键字，可让您访问`static`基类静态方法中的变量和方法，以便从类中`A::staticsay`看到。`$v``C`

# google-app-engine - Google GO：路由请求处理神秘声明？

> ID：12306275
> 
> 赞同：3
> 
> 时间：2012-09-06T18:31:52.930
> 
> 标签：google-app-engine, go

我第一次在 Google GO 上闲逛。我已经扩展了“hello world”应用程序以尝试在 init 部分中定义路径。这是我到目前为止所做的：

```
package hello

import (
    "fmt"
    "net/http"
)

func init() {
    http.HandleFunc("/service", serviceHandler)
    http.HandleFunc("/site", siteHandler)
    http.HandleFunc("/", handler)
}

func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Hello, there")
}

func serviceHandler( w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "this is Services")
}

func siteHandler( w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "this is Sites")
} 
```

只有`handler()`回调被执行——其他的被忽略。例如：`http://myserver/service/foo`打印`Hello, there`。我曾希望它会是`this is Services`。

有没有更好的方法来做服务路由？理想情况下，无论如何我希望这些是单独的脚本，但看起来 Go 只有一个脚本，基于 app.yaml`_go_app`在脚本声明中需要一个特殊字符串这一事实。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:51:04.697

根据以下文档： http: [//golang.org/pkg/net/http/#ServeMux](http://golang.org/pkg/net/http/#ServeMux)

没有尾部斜杠的路径规范仅与该路径完全匹配。像这样在末尾添加一个斜杠：`http.HandleFunc("/service/", serviceHandler)`它会按您的预期工作。

# javascript - 如何将函数的名称作为参数传递，然后稍后引用该函数？

> ID：12306283
> 
> 赞同：1
> 
> 时间：2012-09-06T18:32:37.400
> 
> 标签：javascript, jquery, function, parameters, parameter-passing

我想将函数“testMath”的名称作为字符串传递给名为“runTest”的包装函数作为参数。然后在'runTest'中我会调用传递的函数。我这样做的原因是因为我们有一组通用数据，无论测试如何，它们都会填充到变量中，然后可以根据用户想要测试的任何内容调用特定的测试。我正在尝试使用 javascript/jquery 来做到这一点。实际上，该函数要复杂得多，包括一些 ajax 调用，但这种情况突出了基本挑战。

```
//This is the wrapper that will trigger all the tests to be ran
function performMytests(){
     runTest("testMath");    //This is the area that I'm not sure is possible
     runTest("someOtherTestFunction");
     runTest("someOtherTestFunctionA");
     runTest("someOtherTestFunctionB");
}

//This is the reusable function that will load generic data and call the function 
function runTest(myFunction){
    var testQuery = "ABC";
    var testResult = "EFG";
    myFunction(testQuery, testResult); //This is the area that I'm not sure is possible
}

//each project will have unique tests that they can configure using the standardized data
function testMath(strTestA, strTestB){
     //perform some test
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:36:09.697

你需要函数名作为字符串吗？如果没有，您可以像这样传递函数：

```
runTheTest(yourFunction);

function runTheTest(f)
{
  f();
} 
```

否则，您可以致电

```
window[f](); 
```

这是可行的，因为“全局”范围内的所有内容实际上都是窗口对象的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:34:11.263

在 runTests 中，使用如下内容：

```
window[functionName](); 
```

不过，请确保`testMath`在全局范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:40:49.157

我更喜欢在传递参数时使用应用/调用方法：

```
...
myFunction.call(this, testQuery, testResult); 
... 
```

更多信息[在这里](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx)。

# c# - 无论如何要在 ListView 中包装文本

> ID：12306285
> 
> 赞同：0
> 
> 时间：2012-09-06T18:32:43.280
> 
> 标签：c#, winforms

我的消息太长，无法放入该列。我有四列的表格，我的第四列是“消息”，它有字符串长字符串，它不适合列宽。我想将列中的文本设置为 Warp，以便用户可以看到所有文本。

```
 ListViewItem lv = new ListViewItem();
                    lv.Text = det_view.filename;
                    lv.SubItems.Add(det_view.number.ToString());
                    lv.SubItems.Add(det_view.Date_Time.ToString());
                    lv.SubItems.Add(det_view.Message); // here the string too long and need wrap the message
                    listView1.Items.Add(lv); 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T11:54:53.930

如果您觉得某些许可证问题`ObjectListView`，您可以使用本机 .Net `ListView`。

它还可以自动换行`view=Details` **和**设置`smallImageList`

（图片高度 = 32 或更高）。

![原生 ListView 示例](../Images/ba6ee04a7dba1e4dba882bb54d8232f5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:32:37.357

如果没有您的 listviewitems ownerdrawn，您可能会看一下[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html)。它会自动换行，并且可以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T14:07:45.467

这是一个继承自 ListView 的类，它将增加行高以适合列中的文本。相信默认不会断字。所以如果你想要的话，你需要实现分词。

```
class WordWrapListView : ListView
{
    private const int LVM_FIRST = 0x1000;
    private const int LVM_INSERTITEMA = (WordWrapListView.LVM_FIRST + 7);
    private const int LVM_INSERTITEMW = (WordWrapListView.LVM_FIRST + 77);

    private Graphics graphics;

    public WordWrapListView()
    {
        this.graphics = this.CreateGraphics();
        base.View = View.Details;

        this.AutoSizeRowHeight = true;

    }

    //overriding WndProc because there are no item added events
    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            // Detect item insert and adjust the row size if necessary based on the text
            // add in LVM_DELETEITEM and LVM_DELETEALLITEMS and reset this.rowHeight if you want to reduce the row height on remove
            case WordWrapListView.LVM_INSERTITEMA:
            case WordWrapListView.LVM_INSERTITEMW:
                {
                    ListViewItem lvi = this.Items[this.Items.Count - 1];

                    for (int i = 0; i< lvi.SubItems.Count; ++i)
                    {
                        ListViewItem.ListViewSubItem lvsi = lvi.SubItems[i];

                        string text = lvsi.Text;

                        int tmpHeight = 0;
                        int maxWidth = this.Columns[i].Width;

                        SizeF stringSize = this.graphics.MeasureString(text, this.Font);

                        if (stringSize.Width > 0)
                        {
                            tmpHeight = (int)Math.Ceiling((stringSize.Width / maxWidth) * stringSize.Height);

                            if (tmpHeight > this.rowHeight)
                            {
                                this.RowHeight = tmpHeight;
                            }
                        }
                    }
                }
                break;

            default:
                break;
        }
        base.WndProc(ref m);
    }

    private void updateRowHeight()
    {
        //small image list hack
        ImageList imgList = new ImageList();
        imgList.ImageSize = new Size(this.rowHeight, this.rowHeight);
        this.SmallImageList = imgList;
    }

    [System.ComponentModel.DefaultValue(true)]
    public bool AutoSizeRowHeight { get; set; }

    private int rowHeight;
    public int RowHeight 
    {
        get
        {
            return this.rowHeight;
        }
        private set
        {
            //Remove value > this.rowHeight if you ever want to scale down the height on remove item
            if (value > this.rowHeight && this.AutoSizeRowHeight)
            {
                this.rowHeight = value;
                this.updateRowHeight();
            }
        }
    }

    // only allow details view
    [Browsable(false), Bindable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden), EditorBrowsable(EditorBrowsableState.Never)]
    public new View View
    {
        get
        {
            return base.View;
        }
        set
        {

        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T11:13:21.437

你可以试试[Better ListView](http://www.componentowl.com/better-listview)组件，它支持多行项目，具有多种文本换行和修剪方法：

![在此处输入图像描述](../Images/b1a93882b1b34e105815a4a74e7efdc6.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T20:56:30.013

可能不是您需要的，但我的解决方案是切换到内置 DataGridView 控件。

# vsto - 加载用于调试 MSProject 加载项的特定测试文件

> ID：12306289
> 
> 赞同：1
> 
> 时间：2012-09-06T18:32:51.350
> 
> 标签：vsto, visual-studio-debugging, ms-project, project-properties

我正在使用 VSTO 开发一个 MSProject 加载项，我有一个关于调试的问题。

如何使用**Start Option->Command line arguments**加载特定的 MS Project 文件？

我试过使用`[drive:][path]filename.mpp`，但文件没有加载。

否则一切都很好。我可以手动加载文件并正确调试。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:50:12.233

您可以使用以下命令行示例加载带有特定 MPP 文件的**MS Project ：**

> winproj "c:\projects\Annual Report Preparation.mpp"

对于**Visual Studio Project->Debug->Start Options->Command Line arguments** - 您可以使用引号中的路径。这里的问题是您还必须分配**Start Action->Start External 程序**才能使其工作 - 这是一个 VS 错误。

> "c:\projects\Annual Report Preparation.mpp"

使用`...`和设置**启动外部程序**（*取决于您的 Office 版本*）：

> C:\Program Files (x86)\Microsoft Office\Office15\WINPROJ.EXE

有关 MS Project 命令行参考的更多信息，请参阅[MS Office](http://office.microsoft.com/en-us/project-help/command-line-switches-for-microsoft-office-project-HA010165551.aspx)。

# facebook - Facebook 喜欢我们的字段

> ID：12306294
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:33:05.110
> 
> 标签：facebook, drupal

我想在我的 Drupal 站点上添加一个功能，如下所示，希望有人能提供帮助。

我有一个名为链接的字段，其中包含下载内容的链接，并且对所有人可见。我希望访问者在 Facebook 上第一次喜欢我们，然后才能看到链接。

我正在为 Facebook 模块使用 Drupsl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:37:34.733

Like-Buttons 受 fb 限制。要实现您的项目，您必须在 graph.facebook 上发起请求，如果用户喜欢您的……随便什么。

# html - Watir/Selenium2 在 Internet Explorer 9 中单击 iframe 内的元素后没有任何反应

> ID：12306297
> 
> 赞同：4
> 
> 时间：2012-09-06T18:33:15.340
> 
> 标签：html, ruby, watir-webdriver, selenium-webdriver

我在 Ubuntu for web 上使用 Watir-WebDriver 和 Ruby 1.9.2 编写自动测试。我有一些包含几个元素的 iframe。我需要单击这些项目并检查会发生什么。`<iframe>`看起来像：

```
<iframe id="iframe" align="top" some_attribute="some_attribute">
    <html>
        <head>
            <title> Some title </title>
        </head>
        <body>
            <div>
                <button id="id_button" type="button" class="some_class"/>
            </div>
        </body>
    </html>
</iframe> 
```

当我单击按钮时，它应该创建菜单。但是当我点击带有 watir-webdriver 的按钮时，什么也没有发生，好像他没有按下一样。Watir 不打印任何异常，但不要按下按钮。

此问题仅在 Internet Explorer 中仍然存在。对于 Firefox 和 Chrome，没有问题。我的代码如下所示：

```
browser = Watir :: Browser.new (: remote,: url => "http://some_ip:4444/wd/hub",: desired_capabilities =>: internet_explorer)
browser.goto ("http://some_http.com")
browser.iframe.button (: id, "id_button"). click 
```

如果我写

```
browser.iframe.button(: id, "id_button").attribute_value("class") 
```

它回来了`"some_class"`。这表明该项目已被识别，但仍然没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:33:45.377

请尝试此代码

```
browser.iframe(:id, "iframe").button (: id, "id_button").click 
```

如果您需要更多信息，请查看此链接

[http://wiki.openqa.org/display/WTR/Frames](http://wiki.openqa.org/display/WTR/Frames)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:16:27.823

您是否尝试过使用 javascript 命令？

例如：

```
browser.iframe.button(:id, "id_button").fire_event("onclick") 
```

如果这不起作用，请尝试使用 IRB 进行调试。

PS：我会这样写：

```
browser.iframe(:id, /iframe/).button(:id, /button/).fire_event("onclick") 
```

# css - 是否有两个元素在其容器悬停时出现，然后在另一个元素特别悬停时消失？

> ID：12306302
> 
> 赞同：3
> 
> 时间：2012-09-06T18:33:32.703
> 
> 标签：css, css-selectors

我有两个导航元素，它们设置为图像两侧的列。你可以在[我的网站上看到它们，这里](http://www.element17.com/)。单击任何图像，加载后，将鼠标悬停在其上。

我要完成的工作如下：

1.  当光标在图像之外时，两个导航按钮都设置为 0% 不透明度。
2.  当图像悬停在中心时（不在两个导航按钮上），两个导航按钮都设置为 50% 的不透明度。
3.  当任一导航按钮直接悬停时，它设置为 100% 不透明度，而另一个导航按钮设置为 0% 不透明度。

目前这行不通。HTML如下：

```
<div id="sb-body">
    <a id="sb-nav-previous" class="sb-bignav" title="Previous" onclick="Shadowbox.previous()"></a>
    <a id="sb-nav-next" class="sb-bignav" title="Next" onclick="Shadowbox.next()"></a>
    <div id="sb-body-inner">
        <img style="position: absolute;" src="Corrosion.jpg" id="sb-player" height="405" width="609">
    </div>
</div> 
```

CSS如下：

```
 #sb-nav-next {
    right:0;
    background:url('../images/nav-right.png') center center no-repeat;
}

#sb-nav-previous {
    left:0;
    background:url('../images/nav-left.png') center center no-repeat;
}

#sb-body:hover .sb-bignav {
    opacity:0.5;
    -webkit-opacity:0.5;
    -moz-opacity:0.5;
}

#sb-nav-next:hover #sb-nav-previous, 
#sb-nav-previous:hover #sb-nav-next {
    opacity:0;
    -webkit-opacity:0;
    -moz-opacity:0;
}

.sb-bignav {
    cursor:pointer;
    position:absolute;
    width:200px;
    height:100%;
    top:0;
    z-index:400;
    opacity:0;
    -webkit-opacity:0;
    -moz-opacity:0;
    transition: opacity .125s ease-in;
    -webkit-transition: opacity .125s ease-in;
    -moz-transition: opacity .125s ease-in;
}

.sb-bignav:hover {
    opacity:1.0;
    -webkit-opacity:1.0;
    -moz-opacity:1.0;
}​ 
```

演示：http: [//jsfiddle.net/zNkcQ/](http://jsfiddle.net/zNkcQ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:49:37.207

这*可以*使用纯 CSS 来完成，但是，您需要将前一个和下一个元素移动到内部主体元素之外。

演示：http: [//jsfiddle.net/SO_AMK/c5Xn3/](http://jsfiddle.net/SO_AMK/c5Xn3/)

CSS：

```
#sb-body-inner { 
    height: 405px; 
} 
/* This is the height of the image inside the slider.
If you do not change this line than #sb-body-inner will be about 20px tall and 
will not trigger the hover event */

#sb-body-inner:hover ~ #sb-nav-previous.sb-bignav,
#sb-body-inner:hover ~ #sb-nav-next.sb-bignav { 
    opacity: 0.5; 
}

#sb-nav-previous.sb-bignav:hover,
#sb-nav-next.sb-bignav:hover {
    opacity: 1.0;
    -webkit-opacity: 1.0;
    -moz-opacity: 1.0;
}

.sb-bignav {
    cursor: pointer;
    position: absolute;
    width: 200px;
    height: 100%;
    top: 0;
    z-index: 400;
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    transition: opacity .125s ease-in;
    -webkit-transition: opacity .125s ease-in;
    -moz-transition: opacity .125s ease-in;
}

#sb-nav-next {
    right: 0;
    background: url('http://www.element17.com/images/nav-right.png') center center no-repeat;
}

#sb-nav-previous {
    left: 0;
    background: url('http://www.element17.com/images/nav-left.png') center center no-repeat;
}​ 
```

HTML：

```
<div id="sb-body">
    <div id="sb-body-inner">
        <img style="position: absolute;" src="http://www.element17.com/gallery/01_CONSTRUCTS/Shear.jpg" id="sb-player" height="405" width="609">
    </div>
    <a id="sb-nav-previous" class="sb-bignav" title="Previous" onclick="Shadowbox.previous()"></a>
    <a id="sb-nav-next" class="sb-bignav" title="Next" onclick="Shadowbox.next()"></a>
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:47:40.233

只是一个想法......也许你可以通过在`anchor`标签中放置 2 个克隆导航来做到这一点......我做了一个小提琴：http: [//jsfiddle.net/zNkcQ/5/](http://jsfiddle.net/zNkcQ/5/)

```
<div id="sb-body">
    <a id="sb-nav-previous" class="sb-bignav" title="Previous" onclick="Shadowbox.previous()">               
        <span class="sb-img-next"></span>              
        <span class="sb-img-previous"></span>
    </a> 
    <a id="sb-nav-next" class="sb-bignav" title="Next" onclick="Shadowbox.next()">              
        <span class="sb-img-previous"></span>              
        <span class="sb-img-next"></span>
    </a>
    <div id="sb-body-inner">
        <img style="position: absolute;" src="Corrosion.jpg" id="sb-player" height="405" width="609">
    </div>
</div>
.sb-img-previous{
    left:0;
    pointer-events: none;
    background:url('http://www.element17.com/images/nav-left.png') center center no-repeat;
}
.sb-img-next{
    right:0;
    pointer-events: none; 
    background:url('http://www.element17.com/images/nav-right.png') center center no-repeat;
}
.sb-img-previous, .sb-img-next{
    position: fixed;
    width: 200px;
    height: 100%;
    etc...
}
#sb-nav-previous .sb-img-next,
#sb-nav-next .sb-img-previous,
#sb-nav-previous:hover .sb-img-previous,
#sb-nav-next:hover .sb-img-next{
    opacity: 0.5;
    pointer-events: none; //So each button will not be burdened by its duplicate...
}
#sb-nav-previous .sb-img-previous,
#sb-nav-next .sb-img-next,
#sb-nav-previous:hover .sb-img-next,
#sb-nav-next:hover .sb-img-previous{
    opacity: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T20:23:43.537

好吧，我已经用尽了所有关于这个问题的 CSS 解决方案的参考资料。问题是您永远不会让左侧导航覆盖变得透明，因为无法选择元素的前一个兄弟。我 `#sb-body .sb-bignav:hover ~ .sb-bignav { opacity: 0; }` 成功地使用了正确的导航覆盖以变得透明，但仅此而已。

我建议使用 jQuery 来做到这一点：

**老的**

```
$('.sb-bignav:hover').siblings().css('opacity', 0); 
```

**新的**

```
$('.sb-bignav').hover( function(){
    var self = $(this);
    self.css('opacity', 1);
    self.siblings('.sb-bignav').css('opacity', 0);
}, function(){
    var self = $(this);
    self.css('opacity', .5);
    self.siblings('.sb-bignav').css('opacity', .5);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T20:26:29.227

第一个问题是每个选择器的特殊性。更具体（更多点）覆盖不太具体（更少点）。

身份证：100分

等级：10分

要素：1分

那么，这条规则有 110 分：

```
#sb-body:hover .sb-bignav {
    opacity:0.5;
    -webkit-opacity:0.5;
    -moz-opacity:0.5;
} 
```

下面，该规则有 10 分，并被前面的规则用 110 覆盖：

```
.sb-bignav:hover {
    opacity:1.0;
    -webkit-opacity:1.0;
    -moz-opacity:1.0;
}​ 
```

试试这个 CSS：

```
#sb-nav-next {
    right:0;
    background:url('http://www.element17.com/images/nav-right.png') center center no-repeat;
}

#sb-nav-previous {
    left:0;
    background:url('http://www.element17.com/images/nav-left.png') center center no-repeat;
}

#sb-body:hover .sb-bignav {
    opacity:0.5;
    -webkit-opacity:0.5;
    -moz-opacity:0.5;
}

#sb-body .sb-bignav:hover {
    opacity:1.0;
    -webkit-opacity:1.0;
    -moz-opacity:1.0;
}

.sb-bignav {
    cursor:pointer;
    position:absolute;
    width:200px;
    height:100%;
    top:0;
    z-index:400;
    opacity:0;
    -webkit-opacity:0;
    -moz-opacity:0;
    transition: opacity .125s ease-in;
    -webkit-transition: opacity .125s ease-in;
    -moz-transition: opacity .125s ease-in;
} 
```

演示：http: [//jsfiddle.net/DmAVQ/](http://jsfiddle.net/DmAVQ/)

​ 第二个问题是你不能只用 CSS 做第三项。

“当任一导航按钮直接悬停时，它设置为 100% 不透明度，而另一个导航按钮设置为 0% 不透明度。”

您需要使用 JavaScript 来执行此操作。

# css - 似乎 css 优先级比 w3.org 解释的要多

> ID：12306304
> 
> 赞同：1
> 
> 时间：2012-09-06T18:33:50.537
> 
> 标签：css, css-selectors

我有两种简单的 CSS 样式：

```
div
{
color: white;
}    

body
{
color: gray;
} 
```

其中每一个的优先级值为 0,0,0,1。因此，根据规则，第二个样式应该覆盖第一个样式，并且包含在 div 中的所有文本都应该是灰色而不是白色。这不是发生的事情；div 样式无论其位置如何都优先。据推测，有些地方说一个更具体的元素优先于一个不太具体的元素或类似的元素，但我找不到任何这样说的东西。谁能告诉我这种行为可能记录在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T20:06:20.617

您是正确的，这两个规则具有相同的特异性 - 0,0,0,1 - 但是它们没有以相同的方式定位 div 元素。

body 规则（灰色文本）匹配 div，但只能通过继承 - div 规则（白色文本）直接匹配 div。

当一个元素从其父元素继承一个值时，它继承了它的计算值，并且正如 W3C 规范中所声明的，每个元素都经过四步计算。

[http://www.w3.org/TR/CSS2/cascade.html#value-stages](http://www.w3.org/TR/CSS2/cascade.html#value-stages)

> 属性的最终值是四步计算的结果：值通过规范确定（“指定值”），然后解析为用于继承的值（“计算值”），然后转换必要时转化为绝对值（“使用值”），最后根据当地环境的限制进行转化（“实际值”）。

所以在 div 上，白色是唯一的“指定”值，因此优先。灰色只是一个计算值，通过从 body 标签继承而来。

至少，这就是我对规范的解释。

# sql - 带日期/时间的 SQL 数学

> ID：12306311
> 
> 赞同：0
> 
> 时间：2012-09-06T18:34:12.360
> 
> 标签：sql, math

我有一个表，它不断在 SQL 数据库中记录错误，并使用以下格式的时间戳记录它

2012-09-05 13:46:59.383

我怎样才能从这个错误日志中只提取最后 48 小时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:37:16.453

如果这是用于 Sql Server，请尝试

```
Select * from myLog where datediff(h, myTimestamp, getdate()) < 48 
```

# email - Debian 不能再发送电子邮件了

> ID：12306314
> 
> 赞同：0
> 
> 时间：2012-09-06T18:34:25.697
> 
> 标签：email, debian, virtual-machine

我的运行 Debian 6 的 VM-Ware 虚拟机没有发送电子邮件，因为我用另一个调制解调器/路由器搬到了另一个房子。我完全重新安装了 Debian，但仍然无法发送电子邮件。我的网络适配器设置为“桥接”（启用了“复制物理网络连接状态”）。我安装了一个需要发送电子邮件才能正常工作的应用程序。但我无法完成它，因为我根本没有收到电子邮件。

`date | mail test@example.com`在命令行上也不起作用，因此它与应用程序无关。

我是否需要配置我的路由器才能从我的虚拟机发送外部电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:39:40.253

我设法解决了邮寄问题！

我需要做两件事：

1.  为 Postfix 设置 SMTP 服务器，因为我的 ISP 不允许在不使用其 SMTP 服务器的情况下使用端口 25。有关操作方法，请参阅[此](http://www.cyberciti.biz/faq/postfix-smtp-authentication-for-mail-servers/)参考。
2.  然后我需要配置一个“发送地址”，因为默认情况下电子邮件是从本地主机电子邮件地址发送的。SMTP 服务器不认为这是有效的并阻止发送电子邮件。有关操作方法，请参阅[此](https://groups.google.com/forum/?fromgroups=#!topic/list.postfix.users/NSgncRg3dK0)参考。

我花了几乎几天的时间来解决它，但现在我可以从我的 Debian 系统接收到传出的电子邮件:)。

# c# - 从 CurrencyNegativePattern 获取关联的模式字符串

> ID：12306320
> 
> 赞同：0
> 
> 时间：2012-09-06T18:34:43.267
> 
> 标签：c#, string, globalization, currency, number-formatting

在 ( [CurrencyNegativePattern](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern) ) 的 msdn 文档中，我注意到每个数字代表一个关联的模式字符串。

有什么方法可以让这个关联的模式字符串传递相应的数字？

例如：

```
<someClass>.GetNegativeAssociatedPattern( 9 ) // returns "-$ n"
<someClass>.GetNegativeAssociatedPattern( 3 ) // returns "$n-" 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:41:50.183

由于该表似乎是固定的，您可以简单地使用代码中的模式定义一个数组：

```
string[] patternStrings = { "($n)", "-$n", "$-n", "$n-", "(n$)", 
                            "-n$", "n-$", "n$-", "-n $", "-$ n",
                            "n $-", "$ n-", "$ -n", "n- $", "($ n)",
                            "(n $)" };    

int GetNegativeAssociatedPattern(int index)
{
    return patternStrings[index];
} 
```

# perl - 在 Perl 中用空格连接字符串。有内置的吗？

> ID：12306328
> 
> 赞同：3
> 
> 时间：2012-09-06T18:35:48.757
> 
> 标签：perl

在 Perl 中，我可以连接多个字符串，它们之间有空格，如下所示：

```
my $long_string = $one_string . " " . $another_string . " " . $yet_another_string . " " . 
$and_another_string . " " $the_lastr_string 
```

但是，输入这个有点麻烦。

是否有内置功能可以使这项任务更容易？

例如：

```
concatenate_with_spaces($one_string, $another_string, $yet_another_string, ...) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T18:38:14.597

你想要[`join`](http://perldoc.perl.org/functions/join.html)：

```
my $x = 'X';
my @vars = ( 1, 'then', 'some' );
my $long_string = join ' ', $x, 2, @vars;   # "X 2 1 then some" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T18:50:24.460

Zaid 给出了惯用的解决方案，使用`join`. 但是，还有更多方法可以做到这一点。

```
my @vars = ($one, $two, $three);
my $str1 = "@vars";               # Using array interpolation
my $str2 = "$one $two $three";    # interpolating scalars directly 
```

插入数组使用预定义变量[`$"`](http://perldoc.perl.org/perlvar.html#%24%22)（*列表分隔符*），默认设置为空格。插入变量时，您不需要使用`.`将空格连接到字符串，它们可以直接在双引号字符串中使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T18:38:02.250

```
my @list_of_strings = ($one_string, $two_strings );
my $string = join(' ', @list_of_strings );
print $string; 
```

# kerberos - 传递 kinit 自定义 krb5.conf 文件

> ID：12306330
> 
> 赞同：23
> 
> 时间：2012-09-06T18:35:54.157
> 
> 标签：kerberos

我正在使用 kinit 登录到我的系统管理员没有预料到我们会使用的服务器。配置文件的默认位置似乎是`/etc/krb5.conf`，但我没有 root 访问权限，因此无法编辑此文件以添加新服务器。如何传递 kinit 自定义配置文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T20:51:13.947

OK，解决问题：可以通过设置[`KRB5_CONFIG`环境变量来覆盖默认的配置文件位置](http://web.mit.edu/kerberos/krb5-current/doc/user/user_config/kerberos.html#kerberos-7)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-19T15:59:12.337

我今天有同样的问题。这是对我有用的命令，以供将来参考：

```
env KRB5_CONFIG=/path/to/custom/krb5.conf kinit <your..args..here> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-06-08T13:21:51.093

尝试使用

赢 **`-Djava.security.krb5.conf=C:/IBM/IBMSSO/krb5.ini`**

在非赢 **`-Djava.security.krb5.conf=/opt/IBM/IBMSSO/krb5.conf`**

Windows 上的示例（使用 IBM Java）

```
java -Djava.security.krb5.conf=C:/IBM/IBMSSO/krb5.ini com.ibm.security.krb5.internal.tools.Kinit -k -t C:/IBM/IBMSSO/SSOICNTilo.keytab HTTP/myserver.123.com@123.COM 
```

# bash - 已经运行的会话上的 matlab 命令（来自 bash / 命令行）

> ID：12306333
> 
> 赞同：9
> 
> 时间：2012-09-06T18:36:07.497
> 
> 标签：bash, matlab

```
$ matlab -nodesktop -nojvm & 
```

如何在刚刚创建的会话上执行 matlab 命令？

换句话说，我希望在后台运行一个 matlab 会话，并在任何给定时间从任意终端执行 matlab 命令和/或脚本，而无需创建新会话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T20:23:49.763

*我会建议与carandraug*类似的解决方案，只是我更喜欢`tmux`作为多路复用器。正确传递命令可能有点棘手，因此请创建一个处理细节的 shell 脚本。

假设您`matlab`在这样的终端中开始：

```
tmux new -s matlab "matlab -nodesktop -nojvm" 
```

现在一个`tmux`名为 matlab 的会话正在运行没有 gui 的 matlab。

创建这个 shell 脚本：

**MX**

```
#!/bin/bash

if [[ $# -eq 0 ]]; then
  while read; do
    tmux send-keys -t matlab "$REPLY"$'\n'
  done
else
  tmux send-keys -t matlab "$@"$'\n'
fi 
```

在不同的终端中，您现在可以运行引用的 matlab 命令：

```
mx "A = reshape(1:9, 3, 3)" 
```

甚至通过管道传递命令：

```
for mat in A B C; do echo "$mat = reshape(1:9, 3, 3)"; done | mx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T19:26:18.093

一种可能性是启动一个[屏幕](http://www.gnu.org/software/screen/)会话，然后在其上启动 matlab，并从中分离。任何时候你想使用它，只需启动一个终端并重新连接该屏幕会话。

基本上启动屏幕（只需`screen`在终端输入），然后启动您的 matlab 会话。然后从会话中分离（`Ctrl`+`A`然后按`D`），您将返回终端。您可以关闭窗口没问题，在屏幕上启动的任何进程都将继续运行。每当您想再次获取它（称为重新附加会话）时，只需使用`screen -r`. 查看手册页以了解所有其他选项。

请注意，一个屏幕会话可以有任意数量的窗口，您也可以同时拥有多个屏幕会话。祝您好运在线上的一些教程，这是一个非常有用的工具，特别是但不仅限于，如果您将很多连接到可能需要运行长时间作业的其他系统。

# node.js - node.js 应用程序不使用 iisnode 自动更新

> ID：12306335
> 
> 赞同：1
> 
> 时间：2012-09-06T18:36:14.357
> 
> 标签：node.js, iisnode

当我对我的 app.js 文件进行更改并保存它时，我的 node.js 应用程序似乎没有自动更新，即使在默认的 60,000 毫秒之后也是如此。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:45:57.910

您可以尝试在 iisnode.yml（https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/iisnode.yml#L68）或 web.config（https://github .com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config#L123) 明确列出 app.js？

如果这没有帮助，请在[https://github.com/tjanczuk/iisnode/issues/new](https://github.com/tjanczuk/iisnode/issues/new)上打开一个问题（并在此处发回链接以供交叉参考）。

# java - Jasper Reports + WebSphere 7，ExceptionInInitializerError 异常

> ID：12306339
> 
> 赞同：1
> 
> 时间：2012-09-06T18:36:26.247
> 
> 标签：java, jakarta-ee, jasper-reports, websphere

我们在调用 JasperFillManager.fillReport() 时遇到以下异常。令人困惑的方面是它发生在我们的“生产”环境中，但在我们的测试环境中工作正常。

显然这个问题发生在静态属性的初始化过程中，我们认为它可能与 Jasper 所做的多线程（ThreadLocal-stuff）有关。

正如一些建议所表明的那样，我们已经尝试了 java.awt.headless=true J​​VM 设置，但没有任何变化。我们确实需要有关故障排除的建议，或者关于在一种环境中可能导致这种情况但在另一种环境中不会导致这种情况的线索。据我们所知，它们是相同的，但显然*有些*不同，我们没有要检查的想法。所以问题真的是...... **我们如何解决这样的问题？**

Jasper Reports 4.7（也出现在 3.7 中）

Java 1.6，Flex（服务器上的 GraniteDS）/Spring/Hibernate
（我们不使用 EJB，我们通过一个简单的 war 文件进行部署）

```
FunctionName: com.ibm.ws.webcontainer.servlet.ServletWrapper.service
SourceId: com.ibm.ws.webcontainer.servlet
Category: SEVERE
ExtendedMessage: SRVE0068E: Uncaught exception created in one of the service methods of the servlet ReportServlet in application B
AO. Exception created : java.lang.ExceptionInInitializerError
at java.lang.J9VMInternals.initialize(J9VMInternals.java:222)
at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:121)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:88)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:103)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:61)
at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:153)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:55)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:407)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:824)
at gov.bao.util.JasperWork.execute(JasperWork.java:36)
at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1997)
at gov.bao.dao.ReportDao.generateJasperReport(ReportDao.java:246)
at gov.bao.service.ReportService.getTracerReport(ReportService.java:258)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy65.getTracerReport(Unknown Source)
at gov.bao.servlet.ReportServlet.doGet(ReportServlet.java:110)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:359)
at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:275)
at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:344)
at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:272)
at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:81)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ib***BUFFER OVERFLOW***Y
Trace: 2012/09/06 08:43:55.556 01 t=8C9CF0 c=UNK key=P8 (00000011)
Description: Log Java Message
Message: SRVE0068E: Uncaught exception created in one of the service methods of the servlet ReportServlet in application BAO. Exce
ption created : java.lang.ExceptionInInitializerError
at java.lang.J9VMInternals.initialize(J9VMInternals.java:222)
at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:121)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:88)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:103)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:61)
at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:153)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:55)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:407)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:824)
at gov.bao.util.JasperWork.execute(JasperWork.java:36)
at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1997)
at gov.bao.dao.ReportDao.generateJasperReport(ReportDao.java:246)
at gov.bao.service.ReportService.getTracerReport(ReportService.java:258)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy65.getTracerReport(Unknown Source)
at gov.bao.servlet.ReportServlet.doGet(ReportServlet.java:110)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:359)
at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:275)
at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:344)
at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:272)
at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:81)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ib***BUFFER OVERFLOW***Y com.ibm.ws.webcontainer.servlet.ServletWrapper.service 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:28:27.013

要解决此问题，您需要获取静态初始化程序引发的原始异常。通常，该异常链接到 ExceptionInInitializerError，第一次尝试加载包含静态初始化程序的类。

因此，您需要做两件事：

1.  确保您能够获得整个堆栈跟踪。您发布的堆栈跟踪似乎被截断（请参阅`***BUFFER OVERFLOW***`标记）。
2.  获取第一次尝试初始化类时引发的异常的堆栈跟踪。如有必要，重新启动应用程序或服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T08:06:46.873

*帖子作者（@Mifune）的原始答案*：

通过添加两个库解决：

*   jasperreports-javaflow.jar
*   Apache commons-javaflow.jar

# ios - 如何打印核心数据调试值？

> ID：12306343
> 
> 赞同：23
> 
> 时间：2012-09-06T18:36:42.143
> 
> 标签：ios, sqlite, debugging, core-data

如何在使用 Core Data SQL Debug 时打印发送到 sqlite 数据库的值？

在我的“ **Arguments Passed on Launch** ”调试选项中使用“ **-com.apple.CoreData.SQLDebug 1** ”可以很好地打印 SQL 结构

 **（你可以在这里查看如何使用它：[XCode4 and Core Data: How to enable SQL Debugging](https://stackoverflow.com/questions/6428630/xcode4-and-core-data-how-to-enable-sql-debugging)）

但问题是打印的 NSLog 类似于`UPDATE ZTABLE SET ZCOLUMN = ? WHERE ZID = ?`，如果您试图查看完整的 SQL 语句和/或发送到数据库的数据是什么，它根本没有帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-06T18:49:50.503

在 Xcode 中打开“Product -> Scheme -> Edit Scheme...”并添加到“Arguments Passed on Launch”：

```
-com.apple.CoreData.SQLDebug 3
-com.apple.CoreData.Logging.stderr 1 
```

（iOS 10/macOS 10.12 或更高版本上的 Core Data 调试需要第二个启动参数，请参阅[com.apple.CoreData.SQLDebug not working](https://stackoverflow.com/questions/39431407/com-apple-coredata-sqldebug-not-working)了解更多信息。）

您将看到 SQL 语句绑定到的所有值。示例输出：

```
test56[1588:c07] CoreData: sql: BEGIN EXCLUSIVE
test56[1588:c07] CoreData: sql: INSERT INTO ZEVENT(Z_PK, Z_ENT, Z_OPT, ZTIMESTAMP) VALUES(?, ?, ?, ?)
test56[1588:c07] CoreData: details: SQLite bind[0] = (int64)13
test56[1588:c07] CoreData: details: SQLite bind[1] = (int64)1
test56[1588:c07] CoreData: details: SQLite bind[2] = (int64)1
test56[1588:c07] CoreData: details: SQLite bind[3] = "368650709.435904"
test56[1588:c07] CoreData: sql: COMMIT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-28T11:13:27.497

如果您使用的是 Xcode 8，您还需要添加额外的参数

```
-com.apple.CoreData.Logging.stderr 1 
```**

# c# - ComboBox的值加倍c#

> ID：12306350
> 
> 赞同：2
> 
> 时间：2012-09-06T18:37:07.850
> 
> 标签：c#, combobox

我有以下代码：

```
private void nameTextBox_Leave(object sender, EventArgs e)
{                  
    var names = ConfigurationManager.AppSettings.AllKeys
                        .Where(k => k.StartsWith("name"))
                        .ToArray();

    // Add names to combobox
    comboBox.Items.AddRange(names);
} 
```

问题是每次我`Tab`从文本框中按下时，组合框元素都会加倍。如果里面有*Ken、John、Tim*，如果我再次按 Tab，它会显示两次。

我尝试在上面的名称中使用 distinct ，但这并没有做任何事情，因为每次都会创建新的实例并保存以前的实例。我不能在添加名称后立即使组合框为空，因为它在代码中单击后面的按钮中使用。

我认为唯一的替代方法是声明一个全局变量并确保其值为 0，然后仅在组合框中插入值，并在插入值后将其更改为 1。但这似乎不是一个好的编码习惯。

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:39:19.663

在. `comboBox.Items.Clear()`_ `AddRange`所以整个区块应该是。

```
private void nameTextBox_Leave(object sender, EventArgs e) 
{                   
    var names = ConfigurationManager.AppSettings.AllKeys 
                        .Where(k => k.StartsWith("name")) 
                        .ToArray(); 

    // Add names to combobox 
    comboBox.Items.Clear();
    comboBox.Items.AddRange(names); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:46:03.267

我不确定我是否完全理解，但为什么你不能在填充之前清除项目？

```
comboBox.Items.Clear()
comboBox.Items.AddRange(names); 
```

您也可以尝试不使用 Items，而是使用 DataSource：

```
comboBox.DataSource = names; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:50:54.037

首先清除组合框的建议应该可以解决您的问题，但是如果您也在页面加载时加载组合框，那么我认为这不是最好的解决方案（只是掩盖了真正的问题）。如果您在页面加载*时填充组合框，则在其中添加 Page.IsPostBack 签入：*

例子：

```
if(!Page.IsPostBack)
{
    //Populate the initial values into the combobox
} 
```

如果你*不是*那么清晰的解决方案应该没问题。

# php - 每年将生日事件添加到 jQuery 完整日历中

> ID：12306351
> 
> 赞同：2
> 
> 时间：2012-09-06T18:37:09.273
> 
> 标签：php, javascript, jquery, mysql, fullcalendar

我正在尝试插入`jQuery`完整的日历事件数据，在这种情况下代表用户的生日。我正在从`MySQL`数据库中检索生日。让我们看一下脚本

`php`：

```
if ($birthday_r = $connection->query("SELECT CONCAT(name,' ',surname),MONTH(birthday),DAY(birthday) FROM users")){
    while ($birthday_row = $birthday_r->fetch_row()){
        $birthday_array[] = array(
        'title' => $birthday_row[0],
        'start' => Date("Y") . "-" . $birthday_row[1] . "-" . $birthday_row[2]
        );
    }
    $json = json_encode($birthday_array);
    birthday_r->free();
} 
```

那么您如何看待将此 json 编码信息存储到`$json`变量中

`javascript`：

```
jQuery("#calendar").fullCalendar({ // initialize full calendar
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        <?php if (isset($json_encode)){echo "events: " . $json . ",";} ?>
        viewDisplay: function(view){
            var i = view.title.slice(-4);
        },
        renderEvent: function(event){

        }
    }); 
```

加载页面时效果很好，但我希望在更改议程后（例如按下一个或上一个按钮），每年的生日都会显示在日历中。为此，我建议使用`viewDisplay`and`renderEvent`函数，但我不能在 php 中以及在 javascript 中修改 year 变量。在`viewDisplay`函数变量`i`中是年份的数值（如 2012 年）。我的问题是以某种方式将变量更新`Date("Y")` 为`i`函数`renderEvent`。我也尝试将检索到的信息存储到 javascript 变量中，就像这样 =>

在这个例子中认为在 php 中给出

```
'start' => $birthday_row[1] . "-" . $birthday_row[2] // php

// below JavaScript code
var json_obj = <?php if (isset($birthday_array)){echo $birthday_array;} ?>

var d = new Date();

for (var i=0;i<json_obj.length;i++){
    json_obj[i] = d.getFullYear() + "-" + json_obj[i];
} // this scripts works as well but I can not manipulate after prev or next buttons are pressed on calendar 
```

PS。我想伙计们，了解我想要做什么，请帮助我如何做到这一点。提前非常感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:54:05.540

那么最简单的解决方案可能是更改您的 PHP 循环并为您的事件添加“多个”年份。

```
while ($birthday_row = $birthday_r->fetch_row()){
    $yearBegin = date("Y");
    $yearEnd = $yearBegin + 10; // edit for your needs
    $years = range($yearBegin, $yearEnd, 1);

    foreach($years as $year){
        $birthday_array[] = array(
            'title' => $birthday_row[0],
            'start' => $year . "-" . $birthday_row[1] . "-" . $birthday_row[2]
        );
    }
} 
```

两个缺点：

*   你不能管理不同的生日（所以一个人的生日可能会出现，即使在他死后）
*   它会导致成倍的成本

您还可以查看带有重复事件的[演示](http://arshaw.com/js/fullcalendar-1.5.4/demos/basic-views.html)以构建前端解决方案。

# css - 从帖子中的微笑中删除边框

> ID：12306356
> 
> 赞同：0
> 
> 时间：2012-09-06T18:35:23.580
> 
> 标签：css

您好，在我学习了大约 4 年之后，我终于掌握了 CSS。这个问题虽然让我难倒了几个小时，所以我放弃了，决定寻求帮助并以这种方式学习。

我网站中的所有表情符号都有用于评论图像的 img 边框。

这里的例子 - [http://onlinebanter.com/node/5334](http://onlinebanter.com/node/5334)

我已经在我的网站的其他地方删除了边框：无边框，但我似乎无法改变这一点。任何人都可以为我建议一些东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:58:34.480

使用适用于 Firefox 的 Firebug 插件的快速检查元素显示这是因为您的一个 css 文件中有以下规则。

```
#comments .b2-postcontent img {
    border: 2px solid #CCCCCC;
    ...
} 
```

将其更改为`border: none;`应该可以解决此问题。不确定您是否使用 css 文件打包器，因为 css 文件似乎是`css_9f04d02d9bb1b7bc07fd70d30ee1b762.css`. 所以也许只是在所有文件中搜索`#comments .b2-postcontent img`，然后更改适当的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:09:56.390

感谢山。我是萤火虫山的忠实粉丝。这虽然有我。我有一种感觉，我可能也尝试过你的建议。我认为它从我不需要的评论图像中删除了边框。我想那时我只需要以它本身为目标。让我去试试，谢谢。

也感谢香肠。我认为这只是删除了我所有的图像边框。也许我把这一切都设置在了错误的水平上。我马上回来。

# html - 如何删除 div 和页面之间的空间

> ID：12306357
> 
> 赞同：0
> 
> 时间：2012-09-06T18:37:23.513
> 
> 标签：html, css

当浏览器尺寸变小时，我在 div 和浏览器窗口边距之间的右侧有一个空格。如何删除该空格？

我的屏幕截图在这里 [https://fbcdn-sphotos-ga.akamaihd.net/hphotos-ak-ash3/538697_4098812043002_480328736_n.jpg](https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-ash3/538697_4098812043002_480328736_n.jpg)

我的编码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="c.css" rel="stylesheet" type="text/css" />
<style type="text/css">
body {
    background-color: #0CF;
    background-image:url(tile.png);
    background-attachment:fixed;
    background-repeat: repeat;

}
</style>
</head>

<body topmargin="0" leftmargin="0" bottommargin="0" rightmargin="0">
<div id="dd" style="background-color:#0094d6; width:100%; height:75px;" class="center div_border"><div id="a" style="width:967px; height:75px; background-color:#000000;background:url(xx.png); font-family:Arial, Helvetica, sans-serif; font-size:11px; color:#003; " class="inner">

  <table width="100%" border="0" >
    <tr >
      <td width="1%" height="14">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="33%">&nbsp;</td>
      <td width="12%">&nbsp;</td>
      <td width="32%">&nbsp;</td>
      <td width="5%">&nbsp;</td>
      <td width="1%">&nbsp;</td>
      <td width="7%">&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td colspan="3"><div style="background-color:#006d9e;border-radius:3px; width:250px; height:34px; display: table;
vertical-align: middle; color:#FFF; ">
        <table width="100%" border="0" >
          <tr >
            <td width="43%" style="text-align:center"> Start to bump !</td>
            <td width="29%"><input name="login_btn" type="submit" class="login_button" id="login_btn" value="Log in" /></td>
            <td width="28%"><input name="register_btn" type="submit" class="register_button" id="register_btn" value="Register" /></td>
          </tr>
        </table>
      </div></td>
      </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td style="color:#FFF; font:Arial, Helvetica, sans-serif; font-size:9px; text-align:right;">Beta Version</td>
      </tr>
  </table>

</div></div>
<div class="center box2" style="width:967px;background-color:#f1f5f6;">
<div style="width:967px; height:75px;">

</div>
<div id="aa" class="center" style="width:967px">
<p> ***********START**********************************lorem ipsum  lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum
 lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum
  lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum
   lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum
    lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsumrem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum </p>

    </div>
    </div>
<div id="dd" style="background-color:#0094d6; width:1366; height:45px; " ><div id="a" style="width:967px; height:45px; background-image:url(footer.png); position:relative;"class="inner"   >
<table width="100%" border="0">
        <tr>

          <td>&nbsp;</td>
          <td style="font-family:Arial, Helvetica, sans-serif;font-size:10px; color:#FFF; text-align:center">  Copyright © LCB 2013, All rights reserved. </td>
          <td>&nbsp;</td>
        </tr>
        <tr >
          <td width="30%">&nbsp;</td>
          <td width="43%">&nbsp;</td>
          <td width="27%">&nbsp;</td>
        </tr>
      </table>
</div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:06:34.600

在您的 css 文件中尝试：

```
* { 
    margin:0;
    padding:0;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:03:10.460

删除你的正文标签上的上边距、下边距、左右边距，然后简单地放置边距：0；在您的身体风格在标题中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T21:15:27.437

始终使用 CSS 重置。有很多，但我喜欢使用[Eric Meyer](http://meyerweb.com/eric/)创建的这个：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100%;
    font-family: inherit;
    vertical-align: baseline;
}
/* remember to define focus styles! */
:focus {
    outline: 0;
}
body {
    line-height: 1;
    color: black;
    background: white;
}
ol, ul {
    list-style: none;
}
/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: separate;
    border-spacing: 0;
}
caption, th, td {
    text-align: left;
    font-weight: normal;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: "";
}
blockquote, q {
    quotes: "" "";
}​ 
```

哦拜托！不要使用内联样式！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:07:54.293

在您的页面中使用 reset.css。它会重置所有浏览器中的所有 css 属性。

# css - 编辑了 Joomla 2.5（gk 联盟新闻模板）中间距的 CSS，Firefox 无法识别任何新代码

> ID：12306358
> 
> 赞同：2
> 
> 时间：2012-09-06T18:37:25.223
> 
> 标签：css, firefox, joomla2.5

我们的组织正在使用 Joomla 2.5 对我们的网站进行大修，包括使用新模板 (gk_league_news)。

我们不喜欢某些元素之间有多少空格，所以我在这里更改了：（[ ] 表示我的代码）

```
/* Columns */
aside#gkLeft,aside#gkInset1,section#gkContent,section#gkComponentWrap,aside#gkInset2,aside#gkRight,#gkBanner1,#gkBanner2 {
  /* Main columns */
-webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  float: left;
}
[
#gkBanner1 {
  padding-top: 30px; 
}

#gkBanner2 {
  padding-top: 27px;
  padding-left: 60px;
}] 
```

和这里

```
 /* base spaces */
body > footer,body > header,body > section,section#gkPage > section,section#gkContent > section,section#gkComponentWrap > section 
  /* top margins for containers */

[section#gkPage {

  margin-top: -23px;

}] 
```

尽管 Chrome、Safari 和（令人惊讶的）IE9 都可以使用此代码，但 Firefox (15.0) 根本不会改变它所看到的内容。我已强制刷新（ctrl+F5），清除缓存，更改计算机和 wifi 热点，但它不会读取对 css/layout.css 所做的任何更改，模板看起来完全一样。

那里有什么东西特别会绊倒 Firefox 吗？或者是其他浏览器中需要修复的漏洞？这是我处理这个问题的第二天。

提前致谢。

***更新***它只是在这一实例中无法识别间距，今天所做的更改在 Firefox 中有效，但昨天更改的间距仍然无法正常工作。

这就是它的样子：[http](http://screencast.com/t/SSjQ8DwLNvk) ://screencast.com/t/SSjQ8DwLNvk 这就是它的样子：[http ://screencast.com/t/X1Or7igQu5Fn](http://screencast.com/t/X1Or7igQu5Fn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:03:03.933

它可能与您的问题无关，但我在开发组件时遇到了类似的此错误实例。有一段时间我认为这是服务器问题，但是当我在不同的 Joomla 安装上安装该组件时，问题就消失了，一切都开始刷新就好了。因此，我的解决方案是重新安装核心 Joomla 文件。

由于您在 Chrome、IE 等中没有看到问题，我不知道新的 Joomla 核心安装是否会解决您的问题。但是，如果您只是弄乱模板文件，您可以尝试在另一个目录中安装 Joomla，然后上传模板以查看该安装是否继承了相同的问题。

# php - AND 和 OR 在 IF 语句中的优先级

> ID：12306365
> 
> 赞同：0
> 
> 时间：2012-09-06T18:37:47.690
> 
> 标签：php, if-statement, logic, conditional-statements

这些陈述是等价物吗？

```
if ($a || $b && $c)
{
    // ...
}

if (($a || $b) && $c)
{
    // ...
} 
```

**编辑**

怎么打！但值得……谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:39:41.237

答案：**没有**。它们不是等价的。

查看[PHP 运算符优先级表](http://www.php.net/manual/en/language.operators.precedence.php)。它清楚地列出了`&&`之前`||`。

在此处查看实际操作：http: [//viper-7.com/cPycas](http://viper-7.com/cPycas)

* * *

如果要使用优先级而不是括号，可以使用更详细的`AND`：

```
if ($a || $b AND $c)
{
    // ...
} 
```

[这是演示](http://viper-7.com/39rmzT)，但我建议你不要这样做，因为它不像括号那么清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:40:34.133

的`&&`优先级高于`||`，所以不，它们不相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:40:39.483

否。在 PHP 中，`($a || $b && $c)`被评估为：`($a || ($b && $c))`

见： http: [//php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T18:41:25.447

将AND视为乘法，**或将****OR**视为加法，您将获得真实性和优先级。

```
$a = 1; 
$b = 0;
$c = 0;

if ($a + $b * $c)
{
    // ...
}

if (($a +  $b) * $c)
{
    // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T18:43:19.330

&& 优先于 ||。[运算符优先级](http://www.php.net/manual/en/language.operators.precedence.php)

# mysql - Mysql 查询，在电子邮件中包含一个字符串，然后是 3 个数字

> ID：12306366
> 
> 赞同：0
> 
> 时间：2012-09-06T18:37:49.973
> 
> 标签：mysql, sql, regex

我有一个 mysql 数据库，其中包含一个包含网站用户输入的电子邮件地址的表。

我将如何选择电子邮件字段包含任意数量的字符，然后是 3 个数字和 @yahoo.com 的所有记录

即 testemail639@yahoo.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:40:35.110

一种简单的方法是`REGEXP`在您的 SELECT 语句中使用。

```
SELECT * FROM records WHERE email REGEXP '^\w+\d{3}\@.*$' 
```

上述陈述未经测试，但应该会引导您走上更好的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:42:13.893

```
SELECT * FROM table WHERE email REGEXP '[0-9]{3}@yahoo\.com' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:59:21.107

尝试这个

```
SELECT * FROM records WHERE email REGEXP '^\w+([\.-]?\w+)?([0-9]{3})@\w+([\.-]?\w+)*(\.\w{2,4})+$' 
```

`^\w+([\.-]?\w+)?([0-9]{3})@\w+([\.-]?\w+)*(\.\w{2,4})+$`严格检查不包含空格的**电子邮件**中后跟*3 个数字模式的**字符串*

# ios - 在旋转视图之间传输值 - iOS

> ID：12306374
> 
> 赞同：3
> 
> 时间：2012-09-06T18:38:31.213
> 
> 标签：ios, rotation, landscape, portrait

只需要一些一般性的指导。

我已经对我的应用程序进行了编程，以在两个旋转视图之间切换。我已经通过 Apple 的建议重新通知并调用一种方法来呈现我的故事板景观视图等的模态视图来做到这一点。

我的主视图由两个计时器、6 个左右的按钮、8 个标签和一个包含 Tableview 的弹出视图组成。

我寻求的建议是如何最好地在两种旋转视图之间传递值？

我确实有一个单例类设置，用于在主视图和设置屏幕之间传输信息。我会采取同样的方式吗？将我所有的数据和 iVar 等放入一个单例类并让两个视图访问它？

任何建议将不胜感激。

问候

保尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:37:59.337

您可以在两个接受 an`NSDictionary`作为输入的视图中实现一个公共方法，并在旋转的情况下调用它（在呈现模态视图之前）。

将变量放入 an`NSDictinary`并将其传递给方法

# sql - 显示在特定日期之后创建的所有表

> ID：12306376
> 
> 赞同：1
> 
> 时间：2012-09-06T18:38:40.787
> 
> 标签：sql, database, oracle11g, database-table

我正在使用 Oracle11g 创建数据库应用程序。我的问题是我的数据库中有近 100 个不同的表，我想列出在特定日期之后创建的所有表。有没有办法列出这些表。有人可以说如何完成这个简单的事情。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:41:10.940

```
SELECT object_name, owner, created
FROM all_objects
WHERE object_type = 'TABLE' 
AND created >= TO_DATE('20120901', 'YYYYMMDD') 
```

和thanx Ben： [all_objects](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1155.htm#REFRN20146)定义

# javascript - 在 node.js 应用程序中接收 JMS 消息？

> ID：12306377
> 
> 赞同：5
> 
> 时间：2012-09-06T18:38:43.143
> 
> 标签：javascript, node.js, jms

是否可以订阅 JMS，并从 node.js 应用程序中接收消息？是否有允许这样做的 node.js 模块，例如用于 amqp 消息的 amqp 模块？

当前，消息由 Java 应用程序接收。但是，我正在尝试切换到 javascript。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T21:36:59.650

简短的回答：没有。

更长的答案：JMS 只不过是 Java 中的 API 接口规范。没有 Java 就不能真正使用 JMS。因此，要使用通用 JMS（任何供应商），您需要在 JMS 实现和您的 JavaScript (node.js) 应用程序之间有一些 Java 胶水代码（例如 seam 或更多定制的东西）。

另一方面，AMQP 不仅仅是一个 API。它实际上是一种标准化的有线协议，因此可以用任何语言实现。JMS 没有这种奢侈。

也就是说，如果您选择与特定供应商合作，您可能会有一些选择。

我完全知道 Apache ActiveMQ 支持 AJAX，IBM WebSphere MQ 和 JBoss HornetQ (http://www.jboss.org/hornetq/rest.html) 也是如此（至少部分支持）。

除了 REST/AJAX 之外，其他选项正在尝试实现或找到不同 JMS 供应商使用的不同 Wire 协议的实现。对于支持 AMQP 的 Apache QPid，这很容易。STOMP 是另一个由多个 JMS 实现支持的轻量级协议，例如 ActiveMQ 和 HornetQ，您可以在 Internet 上找到 node.js/java 脚本库。

一个更耗时的选择是使用特定的实现 C/C++ API（如果有的话..）为 node.js 编写扩展并使用它进行连接。它（可能）比 REST/AJAX 方法更可靠，但也更耗时

# php - 向没有文件扩展名的 url 发出 curl 请求？

> ID：12306378
> 
> 赞同：0
> 
> 时间：2012-09-06T18:38:52.397
> 
> 标签：php, curl

我有以下网址

[http://www.davesinclairstpeters.com/auto2_inventorylist?i=37647&c=12452&npg=1&ns=50&echo=2](http://www.davesinclairstpeters.com/auto2_inventorylist?i=37647&c=12452&npg=1&ns=50&echo=2)

我想使用 curl 检索此 url 的内容，但每次我发出此请求时，它都会向我显示错误，因为它没有传递必需的参数

下面是我的代码

```
    $ch = curl_init(); // 开始卷曲
    curl_setopt($ch, CURLOPT_URL, $json_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPGET, true);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);      
    $response = curl_exec($ch);

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:53:07.980

该页面没有提供任何说明信息未正确传递的信息。其实就是告诉你信息*已经*收到了——通过查看源码，可以看到：

```
<!--
javax.servlet.forward.request_uri = /auto2_inventorylist
...
javax.servlet.forward.servlet_path = /auto2_inventorylist
...
javax.servlet.forward.query_string = i=37647&c=12452&npg=1&ns=50&echo=2
--> 
```

这告诉您信息实际上已收到。

因此，您的代码没有问题，但网站本身有问题。您应该确保您使用的 URL 有效，或联系该网站以获取更多信息。

关于您的代码本身 -`curl_setopt($ch, CURLOPT_HTTPGET, true);`不是必需的，因为这已经默认设置，您也可以将 URL 作为`curl_init`函数的参数传递。不会影响性能，但会使代码更整洁。

```
$ch = curl_init($json_url); // start CURL
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);      
$response = curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:55:26.487

您的代码非常好，如果返回错误，只需将此 URL 粘贴到您的网络浏览器并检查结果。在这种情况下，网站只是由于某些原因而失败。您对此无能为力，因为问题**不在**您身边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-04T23:09:44.927

此 URL 会生成一个汽车页面，其中包含指向更多汽车的链接。看起来您开始使用的 URL 是旧的，或者具有某种不明显的过期因素。

不知道您要使用哪种过滤参数..除了您的起始 URL 不好之外，很难说我还有什么问题。

工作网址：

```
http://www.davesinclairlincolnstpeters.com/all-inventory/index.htm?listingConfigId=auto-new%2Cauto-used&compositeType=&year=&make=&start=0&sort=&facetbrowse=true&quick=true&preserveSelectsOnBack=true&searchLinkText=SEARCH&showInvTotals=false&showRadius=false&showReset=true&showSubmit=true&facetbrowseGridUnit=BLANK&showSelections=true&dependencies=model%3Amake%2Ccity%3Aprovince%2Ccity%3Astate&suppressAllConditions=false 
```

# css - 使用 CSS3 堆叠媒体查询

> ID：12306382
> 
> 赞同：2
> 
> 时间：2012-09-06T18:39:00.473
> 
> 标签：css, media-queries

我正在尝试在 CSS 中堆叠媒体查询，但似乎无法使其正常工作。我想要实现的是为**任何**媒体查询设置一组 CSS 规则。我知道通常我可以使用**and**让它适用于不同的规则，但在这种情况下，我试图处理特定于供应商的前缀，因此浏览器不会满足所有条件。

这是我到目前为止所得到的：

```
@media only screen and (min--moz-device-pixel-ratio: 2),
@media only screen and (-o-min-device-pixel-ratio: 2/1),
@media only screen and (-webkit-min-device-pixel-ratio: 2),
@media only screen and (min-device-pixel-ratio: 2) {
    /* My rules go here */
} 
```

像这样堆叠规则的正确方法是什么？另外，如果有任何关于这个主题的进一步阅读，我想看看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:42:32.233

正确的方法是在一开始只有一个`@media`，然后是一个以逗号分隔的媒体查询列表：

```
@media only screen and (min--moz-device-pixel-ratio: 2),
       only screen and (-o-min-device-pixel-ratio: 2/1),
       only screen and (-webkit-min-device-pixel-ratio: 2),
       only screen and (min-device-pixel-ratio: 2) {
    /* Your rules go here */
} 
```

`@media`*仅在声明不同的*媒体规则时才允许，并且不用于在单个规则中分隔多个媒体查询。

# spring - 不支持 Spring test-mvc PUT

> ID：12306384
> 
> 赞同：1
> 
> 时间：2012-09-06T18:39:14.577
> 
> 标签：spring, spring-test-mvc

这是我的控制器方法：

```
 @RequestMapping(method = RequestMethod.PUT,produces="application/json", headers = "content-type=application/json")
    public @ResponseBody User updateUser(@RequestBody User user) throws PropertyErrorException, ItemNotFoundException {         
        return service.UpdateUser(user);     
    } 
```

使用 Spring test-mvc 我想写一个单元测试用例：

```
@Test
public void UpdateUser() throws Exception {     
    mockMvc.perform(put("/r01/users").body(userJsonString.getBytes())
        .accept(MediaType.APPLICATION_JSON))
        .andExpect(status().isOk())
        .andExpect(content().type(MediaType.APPLICATION_JSON))
        .andExpect(content().string(userString));
} 
```

运行这个测试用例会生成：

```
WARN org.springframework.web.servlet.PageNotFound - Request method 'PUT' not supported 
```

此外，从不调用 updateUser 方法，响应代码为 405。

我已经编写了很多测试，所有的 GET 请求，并且它们工作正常。这意味着我对 ContextConfiguration 很有信心。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:18:35.133

您在 @RequestMapping 方法中明确期望内容类型的标头，但没有在您的请求中发送内容类型，我认为这就是请求失败的原因..试试这个。

```
mockMvc.perform(put("/r01/users").contentType(MediaType.APPLICATION_JSON).body(userJsonString.getBytes())
    .accept(MediaType.APPLICATION_JSON))
    .andExpect(status().isOk())
    .andExpect(content().type(MediaType.APPLICATION_JSON))
    .andExpect(content().string(userString)); 
```

# c - 了解此函数中的按位运算

> ID：12306386
> 
> 赞同：0
> 
> 时间：2012-09-06T18:39:22.797
> 
> 标签：c, binary, bit-manipulation

为了简单起见，让我们假设我传递给这个函数的整数`9`是`1001`二进制的。

一段时间以来，我的目标是在`C`. 我用来以简写形式计算数字二进制值的方法如下（使用`9`如上所述）：

```
9 / 2 = 4.5 (remainder)            = 1
4 / 2 = 2   (no remainder)         = 0
2 / 2 = 1   (no remainder)         = 0
1 / 1 = 1   (remainder)            = 1 
```

因此，如果您反转我们得到的结果，您将得到仍然是`1 0 0 1`的二进制值。`9``1 0 0 1`

但是在查看这个站点之后，我发现整数的二进制值可以通过一些“简单”的按位算术找到。我在本网站的另一篇文章中找到了一个函数，并将其改编为我自己的函数：

```
char *itob(int integer)
{
    char *bin = 0X00, *tmp;
    int bff = 0;
    while(integer)
    {
        if(!(tmp = realloc(bin, bff + 1)))
        {
            free(bin);
            printf("\nError! Memory allocation failed while building binary string.");
            return 0x00;
        }
        bin = tmp;
        if(integer & 1) bin[bff++] = '1';
        else bin[bff++] = '0';
        integer >>= 1; 
    }
        bin[bff+1] = 0x00; 
    return bin;
} 
```

以下是我如何理解正在发生的事情以及我的问题（显示为评论）

```
1001 & 1 = 1 so put a 1 into the buffer //what is & doing that makes it equate to 1? Is it because the first digit in that sequence is a 1?
shift the bits in 1001 to the right one time
0010 & 1 != 1 so move a 0 into the buffer //same question as before is & just looking at the 0 because it is the first digit in the sequence?
shift the bits in 0010 to the right one time
0100 & 1 != 1 so move a 0 into the buffer //same question as before
shift the bits in 0100 to the right one time
1000 & 1 = 1 so put a 1 into the buffer //same question as before (at this point I'm thinking my theory is correct but I'm still not entirely sure)
shift the bits in 1000 to the right one time
loop ends 
```

因此，正如我在评论中提到的，这就是我认为我的程序中正在发生的事情，但我不是 100% 确定。另外我不确定这是否是将十进制转换为二进制的最佳方法。（我已经知道，如果`integer`出于某种原因成为 a，`0`我最终会`NULL pointer`在尝试释放分配的内存`itob()`以及其他一些问题时尝试取消引用 a）但是除了我之前已经问过的问题之外，还有一个更好的方法或更合适的方法来进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:56:19.303

不，测试和轮班的顺序是

```
1001 & 1 => 1   then shift right
 100 & 1 => 0   "
  10 & 1 => 0   "
   1 & 1 => 1   " 
```

结果整数 0 使循环终止。所以它的作用是测试从最低有效位开始的每个位，并在缓冲区中*附加*一个 0 或 1。我想说的是倒退，因为当作为字符串打印时，位序列与最常用的位序列相反，其中最低有效位是最右边的位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:07:00.473

这似乎是正确的推理

唯一的事情是上面的函数将二进制结果反向返回，这可能是不想要的......

你不会用数字 9 (1001) 发现它，因为它的二进制表示在两种方式都是相同的，但你会用数字 4 (0100)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:09:37.913

仿照我链接中的那个。未经测试，但应该没问题。

```
char * bit2str(unsigned int num ) 
{

    unsigned int bit,pos;
    char *dst;

    dst = malloc(1+CHAR_BIT*sizeof bit) ;
    if (!dst) return NULL;

    for(pos=0,bit = 1u << (CHAR_BIT*sizeof bit -1); bit; bit >>= 1 ) {
         dst[pos++] = num & bit ? '1' : '0' ;
    }
    dst[pos] = 0;
    return dst;
} 
```

# wysiwyg - Magento 自定义模块 - 所见即所得图像浏览问题

> ID：12306394
> 
> 赞同：4
> 
> 时间：2012-09-06T18:39:40.373
> 
> 标签：wysiwyg, magento

我有一个带有内容字段的自定义模块（所见即所得编辑器）

当我选择插入图像按钮时，会出现以下弹出窗口。由于某种原因，图片 URL 旁边的“浏览”按钮消失了。有人可以指出我正确的方向以恢复图像图标吗？（什么块/控制器等）

将功能齐全的所见即所得编辑器添加到自定义 magento 模块时需要什么？

![图片网址旁边没有浏览图标](../Images/a35bbe46ad99dd987525a84b9cf55df7.png)

这是我在 Form.php 中的表单字段元素（块）

```
$fieldset->addField('post_content', 'editor', array(
    'name'      => 'post_content',
    'label'     => Mage::helper('faqs')->__('Answer'),
    'title'     => Mage::helper('faqs')->__('Answer'),
    'style'     => 'width:700px; height:500px;',
    'wysiwyg'   => true,
)); 
```

谢谢你。

强尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-22T08:09:23.410

不得不找出困难的方法，但解决方案很简单：

请**检查**您的管理员在 unser **System=>Permissions=>Roles中的角色权限**

您可以在选项卡“**角色资源**”中找到复选框“**媒体库**”。确保选中此复选框！

然后，清理缓存，注销并再次登录，它应该可以工作。

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:59:47.577

我设法通过向该字段添加一些配置选项来对此进行排序，

在您所见即所得的 addField() 上方添加以下代码，

```
$configSettings = Mage::getSingleton('cms/wysiwyg_config')->getConfig( 
array( 'add_widgets' => false, 'add_variables' => false, 'add_images' => false,  'files_browser_window_url'=> $this->getBaseUrl().'admin/cms_wysiwyg_images/index/')); 
```

添加代码后，您需要向名为“config”的 addField 添加另一个参数，调用您的 $configSettings 变量。

```
$fieldset->addField('post_content', 'editor', array(
    'name'      => 'post_content',
    'label'     => Mage::helper('faqs')->__('Answer'),
    'title'     => Mage::helper('faqs')->__('Answer'),
    'style'     => 'width:700px; height:500px;',
    'wysiwyg'   => true,
    'config' => $configSettings
)); 
```

# mongodb - 那里有什么好的大数据演示/示例应用程序吗？

> ID：12306397
> 
> 赞同：0
> 
> 时间：2012-09-06T18:39:51.003
> 
> 标签：mongodb, hadoop, cassandra, redis, bigdata

我正在寻找一个多服务器大数据示例应用程序，它可用于 (a) 尝试安装和配置大数据应用程序，以及 (b) 作为开发此类应用程序的示例起点 - 编辑代码，进行一些更改等... 在大多数技术（例如 Java EE）中，此类应用程序非常常见，并且作为起点非常有用。
如果它可以用于基准测试，那就更好了。

如果它使用 Hadoop、Cassandra、HBase、MongoDB、Hive、Redis 中的一个（或多个），那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T00:12:48.337

您可以使用 TeraSort，这是与 Hadoop 一起打包的基准测试。它对数 TB 的数据进行排序，并用于对新的 Hadoop 集群进行压力测试。`hadoop-x.y.z-examples.jar`它是 Hadoop 安装附带的文件的一部分。

要使用它，请使用 Teragen 将数据生成到 HDFS，然后运行 ​​Terasort。

# java - 尝试使用 Spring WebFlow 和 MySQL 在 Hibernate 中使用 C3P0 池设置池

> ID：12306403
> 
> 赞同：0
> 
> 时间：2012-09-06T18:40:14.117
> 
> 标签：java, spring, hibernate, spring-webflow, c3p0

我正在尝试使用 Spring WebFlow 和 MySQL 在 Hibernate 中使用 C3P0 Pooling 设置池，但我想让 Hibernate 管理池而不是 mysql，所以我设置我的 jdbc.properties 文件和我的 database.xml 文件并运行我的项目并检查了与数据库的连接，看起来如果我在 MySQL 端更改 database.minPoolSize 属性，它可以工作，但如果我在 Hibernate 大小上更改它们，它就不起作用。有人可以查看我的文件并让我知道您的想法：

jdbc.properties：

```
#
# database
#
database.driver=com.mysql.jdbc.Driver
database.url=jdbc:mysql://xxx
database.user=xxx
database.password=xxx
database.acquireIncrement=1
database.minPoolSize=5
database.maxPoolSize=25
database.maxIdleTime=1
#
# Hibernate
#
hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
hibernate.show_sql=false
format_sql=false
hibernate.use_sql_comments=false;
#
# C3P0
#
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=25
hibernate.c3p0.timeout=600
hibernate.c3p0.max_statements=0
hibernate.c3p0.idle_test_period=300
hibernate.c3p0.acquire_increment=5 
```

这是我的 database.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />

    <context:component-scan base-package="org.uftwf" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">

        <!-- these are C3P0 properties -->
        <property name="acquireIncrement" value="${database.acquireIncrement}" />
        <property name="minPoolSize" value="${database.minPoolSize}" />
        <property name="maxPoolSize" value="${database.maxPoolSize}" /> 
        <property name="maxIdleTime" value="${database.maxIdleTime}" />

        <property name="driverClass" value="${database.driver}" />
        <property name="jdbcUrl" value="${database.url}" />
        <property name="user" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <!-- <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" 
        destroy-method="close"> <property name="driverClassName" value="${database.driver}" 
        /> <property name="url" value="${database.url}" /> <property name="username" 
        value="${database.user}" /> <property name="password" value="${database.password}" 
        /> </bean> -->

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.schoolvisit.model.VisitModel</value>
                <value>org.uftwf.schoolvisit.model.NameID_lookupModel</value>
                <value>org.uftwf.schoolvisit.model.School_lookupModel</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>

                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
                <prop key="hibernate.c3p0.min_size">10</prop>
                <prop key="hibernate.c3p0.max_size">25</prop>
                <prop key="hibernate.c3p0.timeout">600</prop>
                <prop key="hibernate.c3p0.max_statements">0</prop>
                <prop key="hibernate.c3p0.idle_test_period">300</prop>
                <prop key="hibernate.c3p0.acquire_increment">5</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

为什么 C3P0 不使用休眠属性而是使用 mysql 一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:03:56.920

您正在`C3P0` `bean`使用普通属性定义您的。更改`${database...}`为所需的关联键。

# php - ios开发。检查上传文件

> ID：12306404
> 
> 赞同：0
> 
> 时间：2012-09-06T18:40:17.650
> 
> 标签：php, ios, file-upload

我正在向服务器发送文件。就像在本教程中一样：http: [//zcentric.com/2008/08/29/post-a-uiimage-to-the-web/#comment-8145](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/#comment-8145)

```
- (IBAction)uploadImage {
/*
 turning the image into a NSData object
 getting the image back out of the UIImageView
 setting the quality to 90
*/
NSData *imageData = UIImageJPEGRepresentation(image.image, 90);
// setting up the URL to post to
NSString *urlString = @"http://iphone.zcentric.com/test-upload.php";

// setting up the request object now
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

/*
 add some header info now
 we always need a boundary when we post a file
 also we need to set the content type

 You might want to generate a random boundary.. this is just the same 
 as my output from wireshark on a valid html post
*/
NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

/*
 now lets create the body of the post
*/
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name="userfile"; filename="ipodfile.jpg"rn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[request setHTTPBody:body];

// now lets make the connection to the web
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(returnString);
} 
```

从服务器端：

```
$uploaddir = './uploads/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "http://iphone.zcentric.com/uploads/{$file}";
} 
```

任何人都可以请回答我：

*   检查文件是否已完全上传或是否存在错误并将过程结果从服务器发送到应用程序的任何方式。
*   如果出现中断（例如按下主页按钮或打电话或网络下降），应用程序将在应用程序再次处于活动状态时完成上传。

基本上我必须在文件上传时更新数据库，但我必须确保没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:57:17.047

只要您的服务器以上传文件的 URL 响应（这意味着它已成功上传），您就可以检查`returnString`是否为非空且包含有意义的 URL 以及返回的代码和错误。

```
NSHTTPURLResponse* response;
NSError* err;
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
if (err) {
    //Network error happened (DOESN'T mean HTTP error code)
    NSLog(@"Error: %@", err);
    return;
}
if ([response statusCode] != 200) { 
    //Server returned HTTP error code
    NSLog(@"Error: Server returned non 200 code");
    return;
}
if (![NSURL urlWithString:returnString]) { 
    //URL is not valid
    NSLog(@"File URL returned from server is not valid");
    return;
}
//File uploaded
NSLog(@"File uploaded successfully"); 
```

此示例假设您在项目中使用 ARC（因此没有发布）。

要正确处理应用程序挂起，请查看[后台任务](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。您可以从文件上传代码制作后台任务，如果应用程序移至后台，它应该继续上传。

# ruby-on-rails - 如何/在何处覆盖 ActiveSupport CoreExtensions 字符串中定义的方法

> ID：12306411
> 
> 赞同：1
> 
> 时间：2012-09-06T18:40:36.117
> 
> 标签：ruby-on-rails, activesupport

我想覆盖 Rails 3 中 ActiveSupport::CoreExtensions::String::Inflections.foreign_key 的行为，不确定如何正确执行。

在 Rails 2.3 中，我创建了一个打开类并重新定义方法的插件，但它似乎在 3.0 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:50:23.883

`ActiveSupport::CoreExtensions::String::Inflections#foreign_key`代表`ActiveSupport::Inflector.foreign_key`实际逻辑在哪里，所以我建议修补后者。

试着把它放到`config/initializers/extensions.rb`：

```
require 'inflector_extensions' 
```

然后你的代码进入`lib/inflector_extensions`：

```
module ActiveSupport::Inflector
  def foreign_key(class_name, separate_class_name_and_id_with_underscore = true)
    underscore(demodulize(class_name)) + '_my_legacy_suffix'
  end
end 
```

这应该给出：

```
$ ./script/rails c
Loading development environment (Rails 3.0.11)
>> "whetever".foreign_key
=> "whetever_my_legacy_suffix" 
```

# ruby-on-rails - 带有 Twitter Bootstrap 的 Datatable-Rails fnResizeButtons/aButtons

> ID：12306413
> 
> 赞同：1
> 
> 时间：2012-09-06T18:40:45.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datatables

我认为这是一个相当普遍的问题。所以我为 UI 使用了 twitter 引导程序，并为数据表安装了 datatable-rails gem。这基本上就是我所做的。

```
 tradeTable = $("table#create_trades").dataTable(
    "sDom": "T<'row-fluid'>t<'row-fluid'<'span6'p>>"
    "bPaginate": false
        "oTableTools": 
            "aButtons": [ "copy","csv" ]
  )

  $('a[href="#tab3"]').on('show', (e) ->
    oTableTools = TableTools.fnGetInstance('create_trades')
    if ( oTableTools != null && oTableTools.fnResizeRequired() )
      oTableTools.fnResizeButtons()
  ) 
```

首先，aButtons 不限制按钮的数量。其次，fnResizeButtons 仍然不起作用，在代码之后，组件（Copy，csv ..）仍然具有 0 宽度和高度。我已经浏览了 javascript 代码，发现 fnResizeRequired() 确实是真的，并且 fnResizeButtons() 确实被调用了。这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:47:55.447

所以经过我所有的努力，我终于弄清楚了如何做到这一点。出于某种原因，datatable-rails gem 无法正确调整大小。但唯一需要调整大小的是嵌入的 Flash 组件。所以我所做的基本上只是调整组件的大小，如下所示：

```
 $('a[href="#tab3"]').one('show', (e) ->
    $('[id^=ToolTables_] embed').each( 
      -> 
        $(this).attr(
          'width': '47px'
          'height': '32px'
        )
    )
  ) 
```

# mysql - PHP PDO 简洁的 mySQL SELECT 对象

> ID：12306416
> 
> 赞同：1
> 
> 时间：2012-09-06T18:40:50.697
> 
> 标签：mysql, function, object, pdo

使用 PDO，我构建了一个简洁的对象，用于从数据库中检索行作为 PHP 对象，第一列值是名称，第二列值是所需值。

```
$sql = "SELECT * FROM `site`"; $site = array();
foreach($sodb->query($sql) as $sitefield){
    $site[$sitefield['name']] = $sitefield['value'];
} 
```

我现在想将它应用于具有 2 个参数的函数，第一个包含表，第二个包含任何 where 子句，然后产生相同的结果。

```
function select($table,$condition){
    $sql = "SELECT * FROM `$table`";
    if($condition){
        $sql .= " WHERE $condition";
    }
    foreach($sodb->query($sql) as $field){
        return $table[$field['name']] = $field['value'];
    }
} 
```

可以这样称呼的想法：

```
 <?php select("options","class = 'apples'");?> 
```

然后以与第一种方法相同的格式在页面上使用。

```
<?php echo $option['green'];?> 
```

给我一个名为 value 的列的值，它与名为 field 的列中名为“green”的值位于同一行。

问题当然是该函数不会像那样返回 foreach 数据。也就是这一点：

```
 foreach($sodb->query($sql) as $field){
            return $table[$field['name']] = $field['value'];
        } 
```

不能返回这样的数据。

有没有办法做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:16.077

嗯，这个：

```
$sql = "SELECT * FROM `site`"; $site = array();
foreach($sodb->query($sql) as $sitefield){
    $site[$sitefield['name']] = $sitefield['value'];
} 
```

很容易变成这样：

```
$sql = "SELECT * FROM `site`";
$site = array();
foreach( $sodb->query($sql) as $row )
{
    $site[] = $row;
}

print_r($site);

// or, where 0 is the index you want, etc.
echo $site[0]['name']; 
```

因此，您应该能够将所有列映射到多维数组`$site`中。

此外，不要忘记在将输入直接转储到该查询之前对其进行清理。PDO 的好处之一是使用占位符来保护自己免受恶意用户的侵害。

# xml - xml 文件向下钻取

> ID：12306417
> 
> 赞同：0
> 
> 时间：2012-09-06T18:40:59.457
> 
> 标签：xml

首先，我的 xml 文件设置正确吗？我是使用 xml 数据的新手。我已经相应地设置了我的文件。我希望能够根据我发送函数的 statename 参数将所有县名拉到下拉列表中。

这是一个 xml 示例，真实文件具有以这种方式构造的每个状态

```
<data>
<states>
 <state>
  <name>Delaware</name>
  <counties>
    <county>Kent County</county>
    <county>New Castle County</county>
    <county>Sussex County</county>
  </counties>
</state>
</states>
</data> 
```

我可以到达州一级，但不确定如何根据州名提取县。

```
Public Shared Function CountiesfromState(statename As String) As List(Of String)
    Dim doc As New XmlDocument()

    'Load XML from the file into XmlDocument object
    doc.Load("StateCounties.xml") 'this needs    
    Dim root As XmlNode = doc.DocumentElement

    'Select all nodes with the statename indicated by the nodestring variable
    Dim nodeList As XmlNodeList = root.SelectNodes("states/state")
    For Each elem As XmlElement In nodeList

    Next
    Return (From node As XmlNode In nodeList Select node.InnerText).ToList()
End Function 
```

# jquery - 我只能在此代码中访问 iframe 内容一次

> ID：12306425
> 
> 赞同：0
> 
> 时间：2012-09-06T18:41:35.570
> 
> 标签：jquery

我已经使用下面的代码来访问 iframe 内容，但它不止一次工作..

```
 var str = "http://***/";
 $('body').append('<iframe id="ifr" style="position:absolute;top:0px;left:0px;width:100%;height:100%" src="' + str + $('#htmNum').val() + '.html"></iframe>');
    document.domain = "****.com";
    $('#ifr').load(function () {
        var body = $('#ifr').contents().find('body');
        body.find('img').each(function () {
            var path = $(this).attr('src');
            $(this).attr('src', str + path.split('/')[path.split('/').length - 1]);
        });
        alert(body.find('img').length); // Is not working
 }); 
```

有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:45:54.983

尝试删除 iframe 加载功能

```
 var str = "http://***/";
 $('body').append('<iframe id="ifr" style="position:absolute;top:0px;left:0px;width:100%;height:100%" src="' + str + $('#htmNum').val() + '.html"></iframe>');
    document.domain = "****.com";
        var body = $('#ifr').contents().find('body');
        body.find('img').each(function () {
            var path = $(this).attr('src');
            $(this).attr('src', str + path.split('/')[path.split('/').length - 1]);
        });
        alert(body.find('img').length); // Is not working 
```

**已编辑**

```
var str = "http://***/";
 $('body').append('<iframe id="ifr" style="position:absolute;top:0px;left:0px;width:100%;height:100%" src="' + str + $('#htmNum').val() + '.html"></iframe>');
    document.domain = "****.com";
        var body = $('#ifr').contents();
        body.find('img').each(function () {
            var path = $(this).attr('src');
            $(this).attr('src', str + path.split('/')[path.split('/').length - 1]);
        });
        alert(body.find('img').length); // must work now 
```

# gwt - Jenkins 中的 GWTTestCase 超时

> ID：12306428
> 
> 赞同：0
> 
> 时间：2012-09-06T18:41:40.877
> 
> 标签：gwt, maven, gwttestcase

当我启动通过 Maven 运行 GWTTestCase 的 Jenkins 作业时，该作业随机失败并出现相同的异常。我无法在 Eclipse 中重现此行为。下面是例外。

```
<testcase time="300.144" classname="client.gdo.model.impl.GwtTestLevelOfDetailDefinition" name="testGetAttributesAfterJsonParse">
    <error message="The browser did not complete the test method WebFrameworkClientTest.JUnit:client.gdo.model.impl.GwtTestLevelOfDetailDefinition.testGetAttributesAfterJsonParse in 300000ms.
  We have no results from:
161.134.22.175 / Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.19) Gecko/2010031422 Firefox/3.0.19
Actual time elapsed: 300.144 seconds.
Try increasing this timeout using the &apos;-testMethodTimeout minutes&apos; option
" type="com.google.gwt.junit.client.TimeoutException">com.google.gwt.junit.client.TimeoutException: The browser did not complete the test method WebFrameworkClientTest.JUnit:client.gdo.model.impl.GwtTestLevelOfDetailDefinition.testGetAttributesAfterJsonParse in 300000ms.
  We have no results from:
161.134.22.175 / Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.19) Gecko/2010031422 Firefox/3.0.19
Actual time elapsed: 300.144 seconds.
Try increasing this timeout using the &apos;-testMethodTimeout minutes&apos; option

at com.google.gwt.junit.JUnitShell.notDone(JUnitShell.java:1031)
at com.google.gwt.junit.JUnitShell.runTestImpl(JUnitShell.java:1381)
at com.google.gwt.junit.JUnitShell.runTestImpl(JUnitShell.java:1309)
at com.google.gwt.junit.JUnitShell.runTest(JUnitShell.java:653)
at com.google.gwt.junit.client.GWTTestCase.runTest(GWTTestCase.java:441) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:20:13.027

我相信这是因为根据您的架构，`GWTTestCase`执行时间可能会很长。

尝试按照错误日志中的指示增加超时。

# jsf-2 - Primefaces 3.3.1 和 JSF 2.0

> ID：12306433
> 
> 赞同：1
> 
> 时间：2012-09-06T18:42:03.927
> 
> 标签：jsf-2, primefaces, liferay-6

我在我的应用程序中使用 Primefaces 3.3.1、JSF 2.0 和 Liferay 6.0。我的 JS 文件包含在 portal_normal.vm 中，如下所示

**portal_normal.vm**

```
<html class="#language("lang.dir")" dir="#language("lang.dir")" lang="$w3c_language_id">

<head>
    <title>$the_title - $company_name</title>
        <script src="$javascript_folder/jquery-1.7.2.min.js"></script>
        <script src="$javascript_folder/javascript.js"></script>
        <script src="$javascript_folder/jquery.tablesorter.min.js"></script>
        <script src="$javascript_folder/jquery.tablesorter.pager.js"></script>
        <script src="$javascript_folder/jquery.autocomplete.js"></script>
        <script src="$javascript_folder/jquery.simplemodal.1.4.2.min.js"></script>
         <script src="$javascript_folder/jquery.scrollTo.js"></script>
        <script src="$javascript_folder/ui.datepicker.js"></script>

    $theme.include($top_head_include)
</head>
<body></body>
</html> 
```

**示例.xhtml：**

```
<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
    lang="en" xml:lang="en" style="padding-bottom: 8px;">
    <h:head>
        <script type="text/javascript" src="#{lookupBean.themePath}/js/jquery-1.7.2.min.js" />
        <script type="text/javascript" src="#{lookupBean.themePath}/js/javascript.js" />
        <script type="text/javascript" src="#{lookupBean.themePath}/js/jquery.tablesorter.min.js" />
        <script type="text/javascript" src="#{lookupBean.themePath}/js/ui.datepicker.js" />
    </h:head>
        <h:body></h:body>
</div> 
```

Prime 面需要 h:head 包含在视图中。当我将 h:head 添加到我的 xhtml 时，没有任何 js 文件被导入。您能否让我知道如何将 .js 添加到 h:head 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T21:24:36.163

portal_normal.vm 文件被设计为门户页面的模板，包含在 Liferay 主题中。您不需要将任何 PrimeFaces 或 jQuery 相关资源添加到此模板的 head 部分。相反，只需创建一个 PrimeFaces portlet 并在您的 Facelet 视图中使用 h:head。如果您这样做，那么 PrimeFaces 将在 JSF 生命周期中自动添加所需的资源，Liferay Faces Bridge 将负责为您将它们注入到门户页面的 <head>...</head> 部分。我建议您查看[primefaces3-portlet](http://www.liferay.com/community/liferay-projects/liferay-faces/demos#primefaces3-portlet)演示以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:43:55.643

JSF 2 期望所有资源都位于 webapp - 资源下

在这里你可以放置你的脚本。您可能想要创建一个名为“scripts”的子文件夹，然后使用此标签：

```
<h:outputScript library="js" name="common.js" /> 
```

完整指南在这里：

[http://www.mkyong.com/jsf2/how-to-include-javascript-file-in-jsf/](http://www.mkyong.com/jsf2/how-to-include-javascript-file-in-jsf/)

编辑：是的，您的视图确实需要命名空间。试试这个标题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"> 
```

# html - 下拉菜单 3 级（水平后跟 2 个垂直）

> ID：12306439
> 
> 赞同：2
> 
> 时间：2012-09-06T18:42:28.750
> 
> 标签：html, css

我有一个菜单栏。菜单栏是水平的。然后在悬停时垂直扩展子菜单。此子菜单中的项目包括管理主题、手动爬取、爬取间隔和存档列表。当鼠标悬停在管理主题上时，它应在其右侧提示另一个下拉列表以生成子子菜单。但是，我可以使这个子子菜单出现在右侧。它重叠了我的子菜单。因为我对 CSS 很陌生，所以我在这方面肯定需要帮助。我有一种感觉，我什至没有编辑#menu ul li ul li ul、#menu ul li ul li:hover ul、#menu ul li ul li:hover ul li 和#menu ul li ul li ul li a:hover。谢谢你。

HTML

```
<div id="menu">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Executive Summary</a></li>
        <li><a href="#" > Visual Analytics</a></li> 
        <li><a href="#" >Settings</a>
            <ul>                                      
                <li><a href="#" >Manage Subject</a></li>
                    <ul>
                        <li><a href="#">Add Subject</a></li>
                        <li><a href="#">Edit Subject</a></li>
                        <li><a href="#">Delete Subject</a></li>
                        <li><a href="#">Export Subject</a></li>
                    </ul>
                <li><a href="#">Manual Crawl</a></li>
                <li><a href="#">Crawl Interval</a></li> 
                <li><a href="#">Archive List</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

CSS

```
 #menu {
    position: relative;
    float: left;
    width: 1200px;
    height: 35px;
    font-family: Arial, Helvetica, sans-serif; 
    font-size: 13px;
    padding: 0;    
    background-color:#000;
    text-align: center;
    z-index:1;
}

#menu ul {
    position: relative;
    list-style: none;
    display: inline-block;
    margin: 0;
    padding: 0;
}

#menu ul li {
    position: relative;
    float: left;
    height: 100%;
    padding: 0;
    line-height: 35px; 
}

#menu ul li a {
    position: relative;
    height: 100%; 
    width: auto;
    float: left;
    text-decoration: none;
     padding: 0px 10px 0px 10px;   
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu ul li ul {
   display: none;
   width: 150px; /* Width to help Opera out */
   background-color: rgba(0,0,0,0.5);
}

#menu ul li:hover ul {
    display:block;
   position: absolute;
   top: 35px;
   left: 0;
   margin: 0;
   padding: 0;
   z-index: 1;
   width:150px; 
}

#menu li li a{
    height: 35px; 
    width: 150px;
    float: left;
    text-decoration: none;
    padding: 0px; 
    margin: 0 0px;
    color: #fff;
    text-align: center;
}

#menu ul li ul li a:hover{
   background: rgba(255,255,255,0.5);
   width:150px;
   float:left;
}
#menu ul li ul li ul{ display:none; position:absolute;background-color:rgba(28,28,240,0.5);}
#menu ul li ul li:hover ul { display:block; position:absolute; top:0px;background-color:#fff;}
#menu ul li ul li:hover ul li { list-style:none; float:none; margin-left:1px; padding:0px; position:relative;background-color:#fff;}
#menu ul li ul li ul li a:hover{
   background-color: rgba(28,28,240,0.5);
   width:150px;
   float:left;
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:20:16.973

## 第一个问题

您必须将子菜单包装`ul`在更高级别的菜单项`li`中以使其正确显示。这是 html 结构的一个简单示例。

```
<ul id="menu">
    <li><a>mainmenu</a></li>
    <li><a>mainmenu</a></li>
    <li><a>mainmenu</a>
        <ul>
            <li><a>first level submenu</a></li>
            <li><a>first level submenu</a></li>
            <li><a>first level submenu</a>
                <ul>
                    <li><a>second level submenu</a></li>
                    <li><a>second level submenu</a></li>
                    <li><a>second level submenu</a></li>
                    <li><a>second level submenu</a></li>
                </ul>
            </li>
            <li><a>first level submenu</a></li>
            <li><a>first level submenu</a></li>
        </ul>
    </li>
    <li><a>mainmenu</a></li>
    <li><a>mainmenu</a></li>
</ul> 
```

## 第二个问题

将第二级子菜单向右移动的诀窍是给他们属性`left:150px`。

```
#menu ul ul{
    left:150px;               
} 
```

## Stylecheet 的改进

顺便注意，您可以先在 css 中指定初始隐藏框的所有属性。然后你的`:hover`选择器只需要设置`display:block`规则来显示元素。如果它被`display:none`已经设置的背景颜色隐藏将不可见。

但是你也可以在其他方面改进你的风格。例如，您可以使用选择器为所有子菜单设置属性`#menu ul`（如果您的 ul 菜单具有 id `menu`），因为它们都是菜单中的列表。如果你只想为第一级子菜单设置一些东西，你可以使用`#menu > li > ul`它，因为它只接近直接子菜单。对于二级子菜单，请使用`#menu ul ul`.

使用这些技术，您的样式表更加抽象。我的解决方案也适用于无限数量的子菜单级别。例如，您可以仅通过添加 html 代码来实现第三级子菜单。stylecheet 可以处理它。

## 例子

这是您示例的工作小提琴：http: [//jsfiddle.net/m8Bcb/4/](http://jsfiddle.net/m8Bcb/4/)

在那里你可以看到改进的源代码（html 和 css）和一个工作现场演示。并且通过此编辑，还对 stylecheet 进行了评论以供您理解。我希望对您有所帮助，并且您将继续学习 css！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:21:44.430

您的子菜单需要位于父菜单的列表项内。

像这样修改您的 HTML：

```
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Executive Summary</a></li>
    <li><a href="#" > Visual Analytics</a></li> 
    <li><a href="#" >Settings</a>
        <ul>                                      
            <li><a href="#" >Manage Subject</a>
                <ul>
                    <li><a href="#">Add Subject</a></li>
                    <li><a href="#">Edit Subject</a></li>
                    <li><a href="#">Delete Subject</a></li>
                    <li><a href="#">Export Subject</a></li>
                </ul>
            </li>
            <li><a href="#">Manual Crawl</a></li>
            <li><a href="#">Crawl Interval</a></li> 
            <li><a href="#">Archive List</a></li>
        </ul>
    </li>
</ul> 
```

请注意，我所做的只是将 移动`</li>`到`</ul>`子菜单的之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:29:07.763

像这样改变你的CSS

```
#menu ul li:hover > ul {
display:block;
position: absolute;
top: 35px;
left: 0;
margin: 0;
padding: 0;
z-index: 1;
width:150px; 
} 
```

当您将 li 悬停在整个 ul 显示时，这就是您必须选择直接兄弟姐妹的原因。

并添加

```
#menu ul li ul li ul {
display: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-03T09:10:08.633

只是为了添加到 danijar 的 js fiddle 解决方案中。

您可能希望所有子菜单都相对于第一个列表（“主菜单项”）显示，但是更好的解决方案可能是相对于其父列表项显示列表或“子菜单”。

```
/* ensure each submenu displays relative to it's parent list item */
#menu ul li {
  position: relative;
} 
```

这是一个菜单示例，您可能希望为其添加上述样式：http: [//jsfiddle.net/codk1sgm/5/](http://jsfiddle.net/codk1sgm/5/)

# ruby-on-rails - 哪个日期时间选择器仅适用于活动管理员 0.5.0

> ID：12306445
> 
> 赞同：2
> 
> 时间：2012-09-06T18:42:52.513
> 
> 标签：ruby-on-rails, activeadmin

我正在寻找**仅适用**于活动管理员 0.5.0的**经过测试**的日期和时间选择器。

 **我现在正在挖掘几个小时，我已经阅读了数十个关于 stackoverflow 的现有讨论以及网络中的许多其他资源。

我几乎遇到过任何日期时间选择器脚本的问题。例如，activeadmin 的 wiki 页面将日期时间[选择器与 active_admin 组合](https://github.com/gregbell/active_admin/wiki/Combine-datetime-picker-with-active_admin)不再适用于 0.5.0。结果看起来[像这样](http://tinypic.com/r/2wqe4j9/6)。

其中一些受到 CSS 继承的影响——活跃的管理员应用了很多样式，如果选择器的作者没有避免这种情况，它需要手动设置无限量的 CSS 属性来恢复更改。

我不能依赖这样的脚本。这不是因为我懒惰，或者我无法修复它们。如果更新与活动管理员相关的任何依赖宝石/库，则破坏此类黑客的风险太大。

任何人都可以推荐不会遇到此类问题的可行解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T21:06:27.383

我刚刚为此创建了一个宝石：

[https://github.com/saepia/just-datetime-picker](https://github.com/saepia/just-datetime-picker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T07:19:33.247

**just-datetime-** picker gem自去年以来似乎没有得到维护，所以最好使用**pickadate-rails gem**。

签出此[Integrating datepicker and timepicker with active admin](http://kiprosh.com/blog/integrating-datepicker-and-timepicker-with-active-admin)**

# ssis - 如何在平面文件目标中分配文本限定符？

> ID：12306446
> 
> 赞同：1
> 
> 时间：2012-09-06T18:42:53.213
> 
> 标签：ssis, flat-file, qualifiers

我们有一个 SSIS 包，它从数据库中读取数据，根据该信息创建一个平面文件，然后将其放入文件服务器。

我最近对用于数据库的包查询进行了更新，调整了列映射，并将其放在之前运行 SSIS 包的 SQL 作业下。

问题是平面文件中的文本限定符应该是引号：**"**。但是当我检查它生成的平面文件时，显示的文本限定符是：**_ *x0022* _**

我调查了 DestinationConnectionFlatFile 的 Text Qualifier 属性，并将其设置为引号：**“**

如何确保平面文件具有引号的文本限定符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:45:35.937

这是我在发生这种情况时找到的先前答案：

[SSIS 将数据导出到平面文件将双引号呈现为十六进制字符](https://stackoverflow.com/q/7954939/236348)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T08:10:06.830

此外 ，

出现此问题是因为安装问题。因此，如果您看到此类问题，这意味着如果您从文件数据库表中加载并且文件包含 100 条记录，那么只有 99 条记录将被加载到数据库中，而不是 100 条记录，最后一条记录将被跳过。

我有同样的问题，要解决我重新安装的问题

1) MS Visual Studio 2) MS BI Studio

按照上面提到的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T10:18:47.530

下面给出了两种解决方案：

解决方案1：在记事本中打开包并将特定对象的“TextQualifier”中存在的值编辑为“”。

对象名称"

解决方案2：打开包并将平面文件连接管理器（FFD，SRC，SOURCE）的“TextQualifier”中的值替换为“\”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T10:23:29.140

解决方案 1：在记事本中打开包并将特定对象的“TextQualifier”中存在的值编辑为 (") " 后跟分号

对象名称"

谢谢， Prakash.A

# asp.net-mvc-3 - MVC3 CkEditor 性能渲染问题

> ID：12306447
> 
> 赞同：0
> 
> 时间：2012-09-06T18:42:59.713
> 
> 标签：asp.net-mvc-3, performance, rendering, ckeditor

我有一个 C# .Net MVC3 Web 应用程序。我们正在使用 CkEditor 控件。我们喜欢控件，但是我们遇到了性能问题。我们的一个页面显示了一个动态的对象列表。对于列表中的每一行，我们有两个 CkEditor 文本区域。列表越大，我们的应用程序就越慢。72 行的列表需要一分半钟才能领先。呈现的页面在页面的开头和结尾都有时间标签。时间标签显示页面需要 2 秒来创建。剩下的时间花在客户端渲染页面上。性能下降与页面上 CkEditor 控件的数量成正比。

有任何想法吗？我们是否在我们的代码中加载了超出我们需要的框架，并在网络上获取每个控件的属性？

原来的开发者已经不在了，我是 CkEditor 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:01:36.560

我找到了答案。这不是好消息，但它是一个答案。IE是罪魁祸首。Firefox 加载相同 URL 的速度要快 6 到 7 倍。来自 CkEditor 支持的附加文章是我的线索

[CkEditor 对性能下降的支持](http://dev.ckeditor.com/ticket/7208#comment:2)

# java - 如何避免 GAE 写入限制

> ID：12306448
> 
> 赞同：0
> 
> 时间：2012-09-06T18:43:10.807
> 
> 标签：java, google-app-engine

我们正在构建 GAE 服务，这将有很多要求。

我们需要的是用户注册，我们希望每秒注册一次以上。这意味着超过 1 次写入操作/秒。我们不打算将用户存储到祖先组中，因为注册应该为每个用户返回唯一的 id。

您可以写入同一实体组的速率限制为 1/s 我想知道这个限制是否对我们来说是个问题，以及如何避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:00:41.233

你在这里有些困惑。

实体组并不意味着您没有每个用户的唯一 ID。数据存储中的每个实体都有一个唯一键，无论它是否在实体组中。只是键然后变成了它自己的 ID 和它的祖先的组合。

但是，由于您根本不想使用组，因此这无关紧要。实际上，这意味着每个实体都成为自己的组 - 因此 1/s 更新率仅适用于每个实体本身，而不适用于所有实体的集合作为一个整体。

# xmlsec - 添加对 keyInfo 的引用的操作

> ID：12306450
> 
> 赞同：0
> 
> 时间：2012-09-06T18:43:13.357
> 
> 标签：xmlsec, xades4j

我需要在我的 cades 签名中引用 Keyinfo（在每种情况下），我在声明中的 SignerBES.java 类 xades4j 进程引用中看到了这一点：

```
 Map<DataObjectDesc, Reference> referenceMappings = this.dataObjectDescsProcessor.process(
            signedDataObjects,
            signature); 
```

生成keyinfo后的dataStructure。

你能建议我把对象的创建放在哪里以`Reference`获得对 keyingo 对象的引用吗？

谢谢，

PS我看到xades4j可以选择设置为签署keyinfo元素，但我看到这个关于1.2的错误报告（ [http://code.google.com/p/xades4j/issues/detail?id=32](http://code.google.com/p/xades4j/issues/detail?id=32) ） .0 版本，我不明白 1.3.0 是否修复了这个错误

M。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:34:13.500

这是我为 KeyInfo 所做的。

修改 SignerBES.java

```
 this.keyInfoBuilder.buildKeyInfo(signingCertificate, signature);
    /* Add line below */
    signature.getKeyInfo().setId("KeyInfo"); 
```

使用 Transform 将 DataObjectReference 定义为 Id = #KeyInfo。

```
 DataObjectDesc obj2 = new DataObjectReference("#KeyInfo").withTransform(new ExclusiveCanonicalXMLWithoutComments("")); 
```

结果签名：

```
`</ds:Reference>
<ds:Reference Id="xmldsig-12eced92-9bab-4aa4-b38d-a0646c0b57b4-ref1" URI="#KeyInfo">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList=""/></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<ds:DigestValue>6lQav16xHEPBwQANI4gO57OtHxXjmLWa+kJf9gZJRqI=</ds:DigestValue>
</ds:Reference>
` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:09:51.947

目前有一些基本签名选项的[提供程序](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/providers/BasicSignatureOptionsProvider.html)，使您能够签署签名证书。当您要求签署证书时，xades4j 的当前实现实际上签署了整个 KeyInfo 元素。这不会让你控制变换，我不确定它应该。

我愿意接受关于这个的建议，因为关于这个还有另一个问题。一种可能的方法是添加一种新类型，`DataObjectDesc`其语义是签署 KeyInfo 或签署证书元素。

# objective-c - 如何调试核心数据验证错误代码零（0）？

> ID：12306452
> 
> 赞同：0
> 
> 时间：2012-09-06T18:43:14.877
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

当我在模拟器（iOS 5.1.1、XCode 4.4.1）中运行应用程序时在 Core Data 托管对象上下文上调用 save 时，出现以下两个验证错误：

```
Error Domain=CollectionItemError Code=0 "The operation couldn’t be completed. (CollectionItemError error 0.)" 
```

由于错误代码为零 (0)，我不确定如何调试该问题。建议？

# java - 菜单图标不会出现

> ID：12306454
> 
> 赞同：1
> 
> 时间：2012-09-06T18:43:21.010
> 
> 标签：java, android

我正在尝试将一些带有图标的菜单项添加到菜单中。这些项目出现但没有左侧的图标，它只是文本......

顺便说一句，我正在使用 Holo Light 主题...

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/menu_market" 
        android:title="View on Play Store"
        android:icon="@drawable/ic_playstore_colorful"/>
</menu> 
```

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:15:18.190

好的，所以我找到了这篇 android 博客文章，[http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)，他们提到了整个菜单范式在 ICS 中是如何变化的，他们说现在使用操作栏，需要 API 11 或更高版本：

我在 /res/menu/activity_main XML 目录中有这个：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/firstmenu"
        android:title="@string/menu_settings" 
        android:icon="@drawable/ic_launcher"
        android:showAsAction="always|withText">
        <menu>
            <item android:id="@+id/submenu"
                android:title="SubMenu">                
                </item>

                </menu>
        </item>
        <item android:id="@+id/secondmenu"
            android:title="seconditem"
            android:icon="@drawable/ic_launcher"
            android:showAsAction="always|withText">

        </item>
</menu> 
```

这当然是来源：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{

    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
        return true;
} 
```

工作得很好，看起来不错。

# c - C中的内存错误

> ID：12306456
> 
> 赞同：0
> 
> 时间：2012-09-06T18:43:28.483
> 
> 标签：c, debugging

我是 C 新手，使用 Zed Shaw 的 Learn C the Hard Way 进行学习。我在找出为什么会出现以下内存错误时遇到了一些麻烦。我很确定我没有泄漏内存，因为我使用 Valgrind 检查我的代码。

以下是我的代码有问题的行：

```
 :  int main(int argc,char *argv[]){

        if (argc<3) die ("USAGE : ex17 <dbfile> <action> [action params]");
       ...char *filename=argv[1];// how are we able to get away with one dimension?
        char action =argv[2][0];
        /*Line 166*/:struct Connection *conn=Database_open(filename,action);// error throwing line 
```

函数 Database_open 定义为：

```
/*Line 61*/:struct Connection *Database_open(const char *filename, char mode)
{
    /* data */
    struct Connection *conn= malloc(sizeof(struct Connection));

    if(!conn->db) die("Memory Error");//?

    if(mode=='c'){
        conn->file=fopen(filename,"w");
    }
    else{
        conn->file=fopen(filename,"r+");

    if(conn->file){
        Database_load(conn);
    }
    }

        if(!conn->file) die("Failed to open file");
        return conn;
    }; 
```

这是我使用的 die 函数：

```
void die (const char *message)
{
        if(errno){
            perror(message);
        }
        else{
            printf("ERROR :%s\n", message);
        }
        exit(1);
} 
```

当我使用 Valgrind 运行代码时，我得到：

```
==6112== Command: ./ex17 db.dat c
==6112== 
==6112== Conditional jump or move depends on uninitialised value(s)
==6112==    at 0x80487B3: Database_open (ex17.c:61)//Marked above
==6112==    by 0x8048BAA: main (ex17.c:166)// Line numbers marked above
==6112== 
ERROR :Memory Error
==6112== 
==6112== HEAP SUMMARY:
==6112==     in use at exit: 8 bytes in 1 blocks
==6112==   total heap usage: 1 allocs, 0 frees, 8 bytes allocated
==6112== 
==6112== LEAK SUMMARY:
==6112==    definitely lost: 0 bytes in 0 blocks
==6112==    indirectly lost: 0 bytes in 0 blocks
==6112==      possibly lost: 0 bytes in 0 blocks
==6112==    still reachable: 8 bytes in 1 blocks
==6112==         suppressed: 0 bytes in 0 blocks
==6112== Rerun with --leak-check=full to see details of leaked memory
==6112== 
==6112== For counts of detected and suppressed errors, rerun with: -v
==6112== Use --track-origins=yes to see where uninitialised values come from
==6112== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0) 
```

**编辑**

结构连接

```
struct Connection
{
    /* data */
    FILE *file;
    struct Database *db;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:49:07.337

```
struct Connection *conn = malloc(sizeof(struct Connection));

if(!conn->db) die("Memory Error"); // ? 
```

您期望在不设置新创建变量`conn->db`的内容的情况下成为非零值。`conn`也许那个地方偶然有一个零。请记住，使用`malloc()`不能保证返回的内存的初始内容是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:02:41.150

感谢您提供有关结构的详细信息`Connection`。如所见，该结构包含两个指针元素作为成员。

分配结构后，您必须专门`malloc`指定其中的元素`Database *db`。

就像是：

```
struct Connection *conn= malloc(sizeof(struct Connection));
conn->db = malloc(sizeof(struct Database)); 
```

希望这可以帮助。

# android - 雅虎财经和安卓

> ID：12306457
> 
> 赞同：0
> 
> 时间：2012-09-06T18:43:41.967
> 
> 标签：android, exception, yahoo-finance

我正在尝试制作一个新应用程序，我想获得股票更新、货币兑换更新等。我已经尝试过 Google Finance API。不使用的原因：已弃用并即将关闭，这将使我的应用程序过时。

然后我转到雅虎财经，发现[http://learnandroidfast.blogspot.in/2012/02/yql-open-api.html](http://learnandroidfast.blogspot.in/2012/02/yql-open-api.html)。

这是我的代码：

```
 /*
     * To convert the InputStream to String we use the
     * BufferedReader.readLine() method. We iterate until the BufferedReader
     * return null which means there's no more data to read. Each line will
     * appended to a StringBuilder and returned as String.
     */
private static String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}

/*
 * This is a test function which will connects to a given rest service and
 * prints it's response to Android Log with labels "Praeda".
 */
public static String[] connect(String url) {
    HttpClient httpclient = new DefaultHttpClient();
    String[] str = new String[5];

    // Prepare a request object
    HttpGet httpget = new HttpGet(url);

    // Execute the request
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        Log.d(TAG, response.getStatusLine().toString());

        // Get hold of the response entity
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        // to worry about connection release

        if (entity != null) {

            // A Simple JSON Response Read
            InputStream instream = entity.getContent();
            String result = convertStreamToString(instream);
            Log.d(TAG, result);

            // A Simple JSONObject Creation
            JSONObject json = new JSONObject(result);
            Log.d(TAG, "<jsonobject>\n" + json.toString()
                    + "\n</jsonobject>");

            // A Simple JSONObject Parsing
            // JSONArray nameArray=json.names();
            // Log.i("query",nameArray.toString());
            // JSONObject query=json.getJSONObject("query");
            // Log.i("query",query.toString());
            // JSONArray results=query.getJSONArray("results");
            // Log.i("rslts",results.toString());
            // JSONArray quote=results.getJSONArray("quote");
            // JSONObject quote=results.getJSONObject("quote");
            // Log.i("quote",quote.toString());
            JSONObject query = json.getJSONObject("query");
            Log.d(TAG, query.toString());
            JSONObject results = query.getJSONObject("results");
            Log.d(TAG, results.toString());
            JSONObject quote = results.getJSONObject("quote");
            Log.d(TAG, quote.toString());
            for (int i = 0; i < quote.length(); i++) {

                // Log.i("Praedafor","<jsonname"+i+">\n"+nameArray.getString(i)+"\n</jsonname"+i+">\n"
                // +"<jsonvalue"+i+">\n"+valArray.getString(i)+"\n</jsonvalue"+i+">");
                // JSONObject quotes = results.getJSONObject(i)
                // .getJSONObject("quote");
                // Log,i
                // Log.i("name",quote.getString("Name"));
                // Log.i("name","pahunch");
                // Log.i("name",quote.getString("Symbol"));

                // Log.i("name",quote.getString("DaysLow"));

                // Log.i("name",quote.getString("DaysHigh"));

                // Log.i("name",quote.getString("Open"));

                // Log.i("name",quote.getString("PreviousClose"));
                String symbol = quote.getString("Symbol");
                str[0] = symbol;
                String dayslow = quote.getString("DaysLow");
                str[1]=dayslow;
                // tv1.setText(quote.getString("DaysLow"));
                str[2]= quote.getString("DaysHigh");
                str[3]= quote.getString("Open");
                str[4]= quote.getString("Change");
            }

            // A Simple JSONObject Value Pushing
            // json.put("execution-start-time", "sample value");
            Log.d(TAG, "<jsonobject>\n" + json.toString()
                    + "\n</jsonobject>");
            // Log.i("Praeda12",json.get("").toString());

            // Closing the input stream will trigger connection release
            instream.close();
        }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.getMessage();
    }
    return str;
} 
```

`我叫它：

```
RestClient.connect("http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote"); 
```

我得到以下异常：

```
`09-07 00:00:26.675: W/System.err(469): java.net.UnknownHostException: finance.yahoo.com
09-07 00:00:26.755: W/System.err(469):  at java.net.InetAddress.lookupHostByName(InetAddress.java:513)
09-07 00:00:26.755: W/System.err(469):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:278)
09-07 00:00:26.755: W/System.err(469):  at java.net.InetAddress.getAllByName(InetAddress.java:242)
09-07 00:00:26.755: W/System.err(469):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
09-07 00:00:26.755: W/System.err(469):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-07 00:00:26.755: W/System.err(469):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-07 00:00:26.765: W/System.err(469):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
09-07 00:00:26.765: W/System.err(469):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-07 00:00:26.765: W/System.err(469):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-07 00:00:26.765: W/System.err(469):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-07 00:00:26.765: W/System.err(469):  at RestClient.connect(RestClient.java:65)
09-07 00:00:26.765: W/System.err(469):  at ExchangeUpdateService.buildUpdate(ExchangeUpdateService.java:43)
09-07 00:00:26.765: W/System.err(469):  at ExchangeUpdateService.onStart(ExchangeUpdateService.java:31)
09-07 00:00:26.765: W/System.err(469):  at android.app.Service.onStartCommand(Service.java:420)
09-07 00:00:26.765: W/System.err(469):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3059)
09-07 00:00:26.765: W/System.err(469):  at android.app.ActivityThread.access$3600(ActivityThread.java:126)
09-07 00:00:26.765: W/System.err(469):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2101)
09-07 00:00:26.765: W/System.err(469):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-07 00:00:26.765: W/System.err(469):  at android.os.Looper.loop(Looper.java:123)
09-07 00:00:26.765: W/System.err(469):  at 
android.app.ActivityThread.main(ActivityThread.java:4633)
09-07 00:00:26.765: W/System.err(469):  at java.lang.reflect.Method.invokeNative(Native Method)
09-07 00:00:26.765: W/System.err(469):  at java.lang.reflect.Method.invoke(Method.java:521)
09-07 00:00:26.765: W/System.err(469):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-07 00:00:26.765: W/System.err(469):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-07 00:00:26.765: W/System.err(469):  at dalvik.system.NativeStart.main(Native Method)` 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:46:33.183

日志的第一行给了你一个非常明确的答案`09-07 00:00:26.675: W/System.err(469): java.net.UnknownHostException: finance.yahoo.com`...... 由于某种原因，finance.yahoo.com 无法解析。

最可能的问题是您的网络连接。没有理由（基于此日志）怀疑问题出在您的应用程序上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:57:53.473

事实证明有两个问题

1.  `Internet permission`清单文件中未提及。
2.  传递的 URL 不正确。
    它应该是：

`"http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=parseExchangeRate"`

# visual-studio-2010 - 对 Visual Studio 2010 解决方案和 TFS 的 DLL 依赖项

> ID：12306459
> 
> 赞同：1
> 
> 时间：2012-09-06T18:44:07.063
> 
> 标签：visual-studio-2010, dependencies, solution, build-dependencies

如何在 Visual Studio 中制作解决方案，以便驻留在其他目录中的 .dll 依赖项与解决方案本身受“获取最新”影响的位置完全不同。

我尝试的是在解决方案本身内创建一个 Dependencies 解决方案文件夹并将 dll 添加到其中，这样即使它们不属于解决方案的目录结构，它们也属于解决方案。

因此，例如 .sln 文件位于：

D:\tfs\repository\main\SolutionA\solution.sln

并且 dll 位于：

d:\tfs\repository\main\SolutionX\Dependencies\Binaries

我真正想要实现的是有一个万无一失的方法来构建解决方案，包括以下场景：

1-全新安装windows、visual studio等
2-打开visual studio
3-在TFS上找到solution.sln，双击，这样visual studio就可以得到解决方案中的每一个项目和文件，并打开解决方案4-成功构建

当我尝试 Dependencies 解决方案文件夹方法并重复上述场景时会发生什么，它将获取解决方案中的所有项目，打开它，但不会从 TFS 中提取依赖项解决方案内容（尽管 Visual Studio 在解决方案资源管理器中显示它们)，我认为这是有缺陷的。

一些不涉及创建前/后构建脚本的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:35:10.617

当您第一次尝试使用 TFS 打开解决方案时`Source Control Explorer`，您可能会发现并非所有的依赖项都会被检索 - 波浪线可能会突出显示您丢失的一些`References`。

一种解决方法是...

**解决方案设置**

1.  从 TFS 签出所有源代码（即`Main`和所有子目录）
2.  在 Visual Studio 中打开您的解决方案（即`MyApplication.sln`）
3.  在解决方案资源管理器中，创建一个`New Solution Folder`被调用`ThirdPartyDll`的 ，然后添加适当的程序集引用（即`Assembly1.dll`, `Assembly2.dll`...）
4.  将您的解决方案签入 TFS

**示例文件结构**

*   主要的
    *   我的应用程序.sln
    *   来源
        *   我的项目A
            *   我的项目A.csproj
        *   我的项目B
            *   MyProjectB.csproj
    *   依赖项
        *   Assembly1.dll
        *   Assembly2.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:26:45.003

您遇到了“从源代码管理中打开”功能的限制。如果您从 Visual Studio 将解决方案添加到源代码管理，您应该会看到以下消息：

“您尝试添加到源代码管理的项目可能会导致其他源代码管理用户难以打开此解决方案或获取它的更新版本。为避免此问题，请从其他源的绑定根目录下方的位置添加项目解决方案中的受控项目。”

从源代码管理中打开将为解决方案根目录 (D:\tfs\repository\main\SolutionA) 创建一个工作区映射，但不会为与 SolutionA 对等的 SolutionX 文件夹创建一个单独的工作区映射。在“新”机器上，您需要手动创建到 d:\tfs\repository\main 的工作区映射，以获取 SolutionA 和 SolutionX 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:32:30.263

创建一个解决方案文件夹并将依赖项添加到其中，这样当 VS 获得最新的解决方案时，它将下载这些文件。有点脆弱，因为人们需要维护该文件夹，但它可以工作。

或者，创建一个 nuget 包并在构建时使用还原包。当您创建一个新的开发人员框（需要添加您的 nuget 包存储库）时，它将需要几个额外的步骤，但它适用于所有未来的项目，并且比解决方案文件夹方法更脆弱。

# php - 在 MVC 中使用视图

> ID：12306460
> 
> 赞同：1
> 
> 时间：2012-09-06T18:44:19.073
> 
> 标签：php, model-view-controller

（使用 PHP 风格的代码）

不要想象我们有控制器，其中我们有字符串数据数组：

```
class Controller {
    private $data = array('a', 'b', 'c', 'd', 'e');
} 
```

现在控制器必须将该数据传递给 View 以生成让我们说这样的 HTML：

```
<p>a</p>
<p>b</p>
<p>c</p>
<p>d</p>
<p>e</p> 
```

**问题：**

我们是否应该将所有数组传递给 View 以便它处理自身内部的数组数据，例如：

```
class Controller {
  private $data = array('a', 'b', 'c', 'd', 'e');
  function __construct($data) { // Assigns data array to view
    $view = new View;
    $view->produceHTML($data)
  }
}

class View {
  public function produceHTML($data) {
    foreach($data as $value) {
      echo "<p>$value</p>" . PHP_EOL; // PHP_EOL - PHP Predifined constant (End Of Line)
    }
  }
} 
```

或者我们应该为每个元素定义不同的视图，例如：

```
class Controller {
  private $data = array('a', 'b', 'c', 'd', 'e');
  function __construct($data) { // Assigns data array to view
    $view = new View;
    $view->produceHTML($data)
  }
}

class View {
  public function produceHTML($data) {
    foreach($data as $value) {
      $this->produceP($value);
    }
  }

  private function produceP($value) {
    echo "<p>$value</p>" . PHP_EOL;
  }
} 
```

使用短数据值仅用于示例。在大多数情况下，我遇到了更复杂的视图，它们会产生`div`带有大量嵌套元素的大 s。

但是将元素集合发送到 View 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:46:56.550

在正确的 MVC 中，控制器不应将任何数据“发送”到视图。视图是应用程序的一个活动层，它应该从模型层检索数据。控制器应该*只*改变模型的状态，而不应该检索任何数据。

# c - 将 R CMD SHLIB 与 OpenMP 一起使用不用于包构建

> ID：12306462
> 
> 赞同：1
> 
> 时间：2012-09-06T18:44:20.593
> 
> 标签：c, r, shared-libraries, openmp

我正在编写的 (R) 程序有时能够编写包含 OpenMP 指令的 C 源代码文件，以加速生成的程序（这些文件主要包含一组微分方程，其结果被写入数组 - 如这些步骤可以独立执行，我认为使用 omp 部分将它们并行化是个好主意）。由于以这种方式生成的文件应该在我的程序的另一部分中使用，我还使用 R`system(R CMD SHLIB...)`在运行时编译它们，因为这种方法似乎具有这样的优势，即使用`R CMD SHLIB`，不需要对用户。

我现在面临的问题是我无法将`-fopenmp`（或`-openmp`）编译器指令传递给`R CMD SHLIB`，并且在不构建 R 包时无法使用提供额外编译器标志（或理想情况下`$SHLIB_OPENMP_CFLAGS`）的 Makevars 文件 - 我是在这种情况下不做，所以`R CMD SHLIB`编译我给它的文件。但是，如果没有 OpenMP 并行化，我看不出`SHLIB`在这种情况下如何将相应的标志传递给。

是否有任何可能`R CMD SHLIB`用于此任务，或者我是否必须通过内部指定用于 OpenMP 编译的编译器来牺牲可移植性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:07:01.610

您也可以在 R 中使用：

```
system("R CMD COMPILE filename.c CFLAGS=-fopenmp")
system("R CMD SHLIB filename.o") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:59:03.430

如果您必须使用`R CMD SHLIB`而不是 Makefile 或包，我认为您想要修改环境变量，例如`PKG_CPPFLAGS`or `PKG_CXXFLAGS`，您可以从 R 内部通过`Sys.setenv()`.

R 本身现在使用 OpenMP，并且您想要的编译器选项在最近的 R 系统上可用：

```
edd@max:~$ grep OPENMP /etc/R/Makeconf 
SHLIB_OPENMP_CFLAGS = -fopenmp
SHLIB_OPENMP_CXXFLAGS = -fopenmp
SHLIB_OPENMP_FCFLAGS = -fopenmp
SHLIB_OPENMP_FFLAGS = -fopenmp
edd@max:~$ 
```

那来自 Debian / Ubuntu 系统上的标准 R 2.15.1。

# firefox - 从 cookie 中获取主机

> ID：12306464
> 
> 赞同：3
> 
> 时间：2012-09-06T18:44:30.063
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox 的 Addon SDK (v1.9) 构建和扩展。

我的应用程序应该在基于匹配 URI 的数据库添加（或更改）cookie 时删除它们。

我通过向“cookie-changed”添加观察者并实现[nsICookie](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICookie)来识别匹配的 cookie 并实现[nsICookieManager](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICookieManager)以在找到匹配时删除 cookie 来完成此任务。

**问题**

我需要知道每个 cookie 是从哪个网站 (URL) 添加/更改的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:23:56.763

不幸的是，当 cookie 管理器发送`cookie-changed`信息已经丢失的通知时 - cookie 管理器只知道为哪个主机添加了 cookie（如果使用了参数，它可能不是设置 cookie 的页面的主机`domain`）。甚至可能一开始就没有 URL，例如，如果 cookie 是由扩展设置的。

你可以做的是为`http-on-examine-response`通知注册一个观察者。您可以查看频道的`Set-Cookie`标题以及频道 URL，以便`cookie-changed`稍后发送通知时，您将知道哪个网站负责。像这样的东西：

```
var observer = require("observer-service");
observer.add("http-on-examine-response", function(subject, data)
{
  subject.QueryInterface(Ci.nsIHttpChannel);
  var cookieNames = [];

  // There can be more than one Set-Cookie header, cannot use getResponseHeader
  subject.visitResponseHeaders(function(header, value)
  {
    if (header.toLowerCase() == "set-cookie")
    {
      var match = /^([^\s=]+)=/.exec(value);
      if (match)
        cookieNames.push(match[1]);
    }
  });

  if (cookieNames.length)
  {
    var url = channel.URI.spec;

    // Remember that this url set the cookies or just clear the header
    if (!isAllowedToSetCookies(url, cookieNames))
      channel.setResponseHeader("Set-Cookie", "", false);
  }
}); 
```

*注意*：此代码未经测试。

文档：[观察者通知](https://developer.mozilla.org/en-US/docs/Observer_Notifications#HTTP_requests)，[nsIHttpChannel](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel)

# gradle - 重命名项目名称不起作用

> ID：12306466
> 
> 赞同：0
> 
> 时间：2012-09-06T18:44:40.620
> 
> 标签：gradle

在我的 settings.gradle 文件中，我最初有这个工作

```
include 'server', 'webapp' 
```

我把它修改成这个，它就坏了

```
include 'server', 'webapp'

modifyProjectNames(rootProject, "sdi-")

def modifyProjectNames(project, prefix) {
  project.children.each {
        it.name = prefix + it.name
  }
} 
```

它说“在根项目'SDI'中找不到路径'：webapp'的项目”，所以我将文件修改为此

```
include 'master', 'sdi-webapp'

modifyProjectNames(rootProject, "sdi-")

def modifyProjectNames(project, prefix) {
  project.children.each {
        it.name = prefix + it.name
  }
} 
```

我得到了同样的失败，但我在 settings.gradle 中没有 :webapp 所以它必须是我的主要 gradle 构建文件所以我现在也将该项目重命名为 :sdi-webapp 所以现在错误稍微更改为

```
Project with path ':sdi-webapp' could not be found in root project 'SDI'. 
```

我有一个像这样的项目结构

SDI - 服务器 - webapp

我希望所有项目名称都是 sdi-server 和 sdi-webapp 等。但我希望调用目录

```
/SDI/server instead of /SDI/sdiserver
/SDI/webapp instead of /SDI/sdiwebapp 
```

IE。在那里多余是没有意义的。

**编辑**

我在另一个项目上尝试了第一个答案，就像这样

```
include 'master', 'toneserver','webserver'

modifyProjectNames(rootProject, "sdi-")

def modifyProjectNames(project, prefix) {
  project.children.each {
        it.name = prefix + it.name
  }
}

rootProject.children.each {proj ->
  proj.projectDir = file(proj.name - "sdi-")
} 
```

它只是失败了

```
Project with path ':toneserver' could not be found in root project 'stserver' 
```

如果你浏览你的 build.gradle 文件并修改每个引用以也有前缀，这有点工作，这会破坏试图不重复自己的编程规则 :( :( 所以如果我想修改前缀，我必须做一个丑陋的查找和替换:(...ick。但它确实有效。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:39:04.230

作为一种解决方法，您可以尝试在包含调用中使用您喜欢的项目名称（SDI-...）并更改每个子项目的 projectDir：

```
rootproject.children.each{proj->
    proj.projectDir = file(proj.name - "SDI-")
} 
```

干杯，雷内

# java - 如何将“1+23-56”之类的字符串转换为数字

> ID：12306468
> 
> 赞同：-4
> 
> 时间：2012-09-06T18:44:51.103
> 
> 标签：java, string, numbers

> **可能重复：**
> [评估以字符串形式给出的数学表达式](https://stackoverflow.com/questions/3422673/java-evaluate-string-to-math-expression)

如何将表示数学表达式的字符串（如“1+23-56”）转换为数字？我正在尝试在 Java 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:55:15.783

您必须使用自己的语法创建自己的语言规范，然后实现它，有几个示例说明如何为计算器编写语言。

基本原则是首先进行语法分析，生成语法树并使用您的语言规则对其进行解析，即语义分析。

这里有些例子：

*   [http://www.dabeaz.com/ply/ply.html#ply_nn4](http://www.dabeaz.com/ply/ply.html#ply_nn4)
*   [http://www.dabeaz.com/ply/ply.html#ply_nn24](http://www.dabeaz.com/ply/ply.html#ply_nn24)

# r - ggplot2：geom_line 的大小和位置

> ID：12306469
> 
> 赞同：2
> 
> 时间：2012-09-06T18:44:59.080
> 
> 标签：r, ggplot2

这是我要修改的绘图的数据：

```
mdfr <- read.table(textConnection("
 name stadio   variable      value rating
541B      1 start_date 22/02/2011      5
541B      2 start_date 24/05/2011      5
541B      3 start_date 01/06/2011      5
541B      4 start_date 20/09/2011      5
579B      1 start_date 07/06/2011      5
579B      2 start_date 08/02/2012      5
579B      3 start_date 09/02/2012      5
579B      4 start_date 24/04/2012      5
635B      1 start_date 03/05/2012      5
635B      2 start_date 29/06/2012      5
635B      3 start_date 05/07/2012      5
635B      4 start_date 11/09/2012      5
700B      1 start_date 29/02/2012      5
700B      2 start_date 29/02/2012      5
700B      3 start_date 29/02/2012      5
700B      4 start_date 08/05/2012      5
558B      1 start_date 30/05/2011      5
558B      2 start_date 17/10/2011      5
558B      3 start_date 27/01/2012      5
558B      4 start_date 06/04/2012      5
725B      1 start_date 28/12/2011      5
725B      2 start_date 23/02/2012      5
725B      3 start_date 02/03/2012      5
725B      4 start_date 31/05/2012      5
727B      1 start_date 23/12/2011      5
727B      2 start_date 03/02/2012      5
727B      3 start_date 16/02/2012      5
727B      4 start_date 18/05/2012      5
733B      1 start_date 30/12/2011      5
733B      2 start_date 23/02/2012      5
733B      3 start_date 02/03/2012      5
733B      4 start_date 07/06/2012      5
734B      1 start_date 16/03/2012      5
734B      2 start_date 16/03/2012      5
734B      3 start_date 16/03/2012      5
734B      4 start_date 25/04/2012      5
719B      1 start_date 29/06/2012      5
719B      2 start_date 10/07/2012      5
719B      3 start_date 19/07/2012      5
719B      4 start_date 16/10/2012      5
737B      1 start_date 22/06/2012      5
737B      2 start_date 25/07/2012      5
737B      3 start_date 01/08/2012      5
737B      4 start_date 23/10/2012      5
541A      1 start_date 22/02/2011      3
541A      2 start_date 24/05/2011      3
541A      3 start_date 01/06/2011      3
541A      4 start_date 20/09/2011      3
579A      1 start_date 07/06/2011      3
579A      2 start_date 08/02/2012      3
579A      3 start_date 09/02/2012      3
579A      4 start_date 08/05/2012      3
635A      1 start_date 03/05/2012      3
635A      2 start_date 31/07/2012      3
635A      3 start_date 31/07/2012      3
635A      4 start_date 23/10/2012      3
700A      1 start_date 22/03/2012      3
700A      2 start_date 22/03/2012      3
700A      3 start_date 22/03/2012      3
700A      4 start_date 12/06/2012      3
558A      1 start_date 30/05/2011      3
558A      2 start_date 17/10/2011      3
558A      3 start_date 27/01/2012      3
558A      4 start_date 06/04/2012      3
725A      1 start_date 28/12/2011      3
725A      2 start_date 23/02/2012      3
725A      3 start_date 02/03/2012      3
725A      4 start_date 31/05/2012      3
727A      1 start_date 23/12/2011      3
727A      2 start_date 03/02/2012      3
727A      3 start_date 16/02/2012      3
727A      4 start_date 18/05/2012      3
733A      1 start_date 30/12/2011      3
733A      2 start_date 23/02/2012      3
733A      3 start_date 02/03/2012      3
733A      4 start_date 07/06/2012      3
734A      1 start_date 16/03/2012      3
734A      2 start_date 16/03/2012      3
734A      3 start_date 16/03/2012      3
734A      4 start_date 25/04/2012      3
719A      1 start_date 10/07/2012      3
719A      2 start_date 17/07/2012      3
719A      3 start_date 26/07/2012      3
719A      4 start_date 09/10/2012      3
737A      1 start_date 01/07/2012      3
737A      2 start_date 06/07/2012      3
737A      3 start_date 26/07/2012      3
737A      4 start_date 16/10/2012      3
541B      1   end_date 24/05/2011      5
541B      2   end_date 01/06/2011      5
541B      3   end_date 20/09/2011      5
541B      4   end_date 28/09/2012      5
579B      1   end_date 08/02/2012      5
579B      2   end_date 09/02/2012      5
579B      3   end_date 24/04/2012      5
579B      4   end_date 29/10/2012      5
635B      1   end_date 29/06/2012      5
635B      2   end_date 05/07/2012      5
635B      3   end_date 11/09/2012      5
635B      4   end_date 04/02/2013      5
700B      1   end_date 29/02/2012      5
700B      2   end_date 29/02/2012      5
700B      3   end_date 08/05/2012      5
700B      4   end_date 12/11/2012      5
558B      1   end_date 17/10/2011      5
558B      2   end_date 27/01/2012      5
558B      3   end_date 06/04/2012      5
558B      4   end_date 09/09/2012      5
725B      1   end_date 23/02/2012      5
725B      2   end_date 02/03/2012      5
725B      3   end_date 31/05/2012      5
725B      4   end_date 30/11/2012      5
727B      1   end_date 03/02/2012      5
727B      2   end_date 16/02/2012      5
727B      3   end_date 18/05/2012      5
727B      4   end_date 19/11/2012      5
733B      1   end_date 23/02/2012      5
733B      2   end_date 02/03/2012      5
733B      3   end_date 07/06/2012      5
733B      4   end_date 30/11/2012      5
734B      1   end_date 16/03/2012      5
734B      2   end_date 16/03/2012      5
734B      3   end_date 25/04/2012      5
734B      4   end_date 04/07/2012      5
719B      1   end_date 10/07/2012      5
719B      2   end_date 19/07/2012      5
719B      3   end_date 16/10/2012      5
719B      4   end_date 28/02/2013      5
737B      1   end_date 25/07/2012      5
737B      2   end_date 01/08/2012      5
737B      3   end_date 23/10/2012      5
737B      4   end_date 28/02/2013      5
541A      1   end_date 24/05/2011      3
541A      2   end_date 01/06/2011      3
541A      3   end_date 20/09/2011      3
541A      4   end_date 17/01/2013      3
579A      1   end_date 08/02/2012      3
579A      2   end_date 09/02/2012      3
579A      3   end_date 08/05/2012      3
579A      4   end_date 19/12/2012      3
635A      1   end_date 31/07/2012      3
635A      2   end_date 31/07/2012      3
635A      3   end_date 23/10/2012      3
635A      4   end_date 22/03/2013      3
700A      1   end_date 22/03/2012      3
700A      2   end_date 22/03/2012      3
700A      3   end_date 12/06/2012      3
700A      4   end_date 18/12/2012      3
558A      1   end_date 17/10/2011      3
558A      2   end_date 27/01/2012      3
558A      3   end_date 06/04/2012      3
558A      4   end_date 10/01/2013      3
725A      1   end_date 23/02/2012      3
725A      2   end_date 02/03/2012      3
725A      3   end_date 31/05/2012      3
725A      4   end_date 30/11/2012      3
727A      1   end_date 03/02/2012      3
727A      2   end_date 16/02/2012      3
727A      3   end_date 18/05/2012      3
727A      4   end_date 19/11/2012      3
733A      1   end_date 23/02/2012      3
733A      2   end_date 02/03/2012      3
733A      3   end_date 07/06/2012      3
733A      4   end_date 30/11/2012      3
734A      1   end_date 16/03/2012      3
734A      2   end_date 16/03/2012      3
734A      3   end_date 25/04/2012      3
734A      4   end_date 20/09/2012      3
719A      1   end_date 17/07/2012      3
719A      2   end_date 26/07/2012      3
719A      3   end_date 09/10/2012      3
719A      4   end_date 21/12/2012      3
737A      1   end_date 06/07/2012      3
737A      2   end_date 26/07/2012      3
737A      3   end_date 16/10/2012      3
737A      4   end_date 28/12/2012      3
")->con,header=T);close(con) 
```

我使用以下命令创建了一个绘图

```
ggplot(mdfr, aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) +
    geom_line(size = 5) +
    xlab("") + ylab("") + labs(colour="Title") +
    scale_colour_brewer(pal="RdYlGn",breaks = c("1", "2", "3","4"), labels = c("Label 1", "Label 2", "Label 3","Label 4")) 
```

我需要您的帮助来执行以下操作：

1.  更改名称以 . 结尾的行的条形大小`A`。也就是说`geom_line(size = 5)`，我希望大小等于 variable 的值，而不是 using ，`rating`即 5 用于以 B 结尾的名称，3 用于以 A 结尾的名称。

2.  是否可以使名称中具有相同数字的条看起来像成对，以便看起来像有 11 对而不是 22 对单独的？例如 737A 比 734B 更接近 737B。（所以看起来像[那个图表](http://support.sas.com/rnd/app/or/gifs/gantt_annotate2.gif)）。

3.  如果出现第二个（或第三个）图例，如何抑制所选图例的出现？- 因为使用`opts(legend.position = "none")`会使它们全部不可见。

4.  为什么这个 ggplot 命令会在 ggplot 0.9.1 中生成错误，而如果我使用 ggplot 0.8.9 就可以了？（scale_map.discrete(scale, df[[j]]) 中的错误：尝试应用非函数）。我应该如何修改它？

提前致谢

**编辑**

我在第 4 号中发现了问题。我应该给调色板 =“RdYlGn”，而不是 pal="RdYlGn"。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:24:30.323

```
library(ggplot2)
library(stringr)

# This solves issue #2
mdfr <- mdfr[order(mdfr$name), ]

# This grabs the last letter (A or B)
mdfr$letter_size <- ifelse(str_sub(mdfr$name, start=-1)=="B", 5, 3)

# This solves #1 for you by scaling the size of the bar by letter.
# the scale_size() option removes it from the legend and solves #3.
ggplot(mdfr, aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) +
    geom_line(aes(size = mdfr$letter_size)) + 
    scale_size(guide="none") + 
    xlab("") + ylab("") + 
    labs(colour="Title")  + 
    scale_colour_brewer(palette = "RdYlGn", breaks = c("1", "2", "3","4"), 
        labels = c("Label 1", "Label 2", "Label 3","Label 4")) 
```

![在此处输入图像描述](../Images/6490132b3c04e7957d6af8c19d989093.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:17:45.203

编辑，我误读了第一个问题

1）使用带有尺寸的评级作为美学。

2）使用您提供的数据，以这种方式绘制数据，但您可以在 ggplot 中按顺序对其进行排序。

3)`guide = none`在您想要去除的刻度中使用。

```
ggplot(mdfr[order(mdfr$name),], aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) +
  geom_line(aes(size = as.factor(rating))) +
 labs(colour="Title", x = "", y = "") +
 scale_size_manual(breaks = c("3","5"), values = c(3,5), guide = "none")+
  scale_colour_brewer(palette="RdYlGn",breaks = c("1", "2", "3","4"), 
                      labels = c("Label 1", "Label 2", "Label 3","Label 4")) 
```

![在此处输入图像描述](../Images/3080757a3ea2fdb888c8adc26a96a52c.png)

# php - 是否可以创建未排序的 mongoDB 索引？

> ID：12306473
> 
> 赞同：0
> 
> 时间：2012-09-06T18:45:12.497
> 
> 标签：php, mongodb

我有一个通过 PHP 创建的 mongoDB 集合。现在我想索引几个字段，但是 php 文档没有讨论如何不对索引应用排序！

例如，我想对 field1、field2、field3 进行索引，并让整个事物按 field3 排序。

由于我将根据 field1、field2 搜索集合，因此我想确保它们具有索引，但是当集合从 find() 操作返回时，我只是希望它按 field3 排序。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:44:00.393

我认为在完全回答您的问题之前给您一些背景信息对我很有用：

当 mongo 在集合上创建索引时，它本质上是根据索引键对集合进行排序。因此，当您从使用索引的查询中获取结果时，结果将按该索引的键排序。如果您的查询使用 field1 上的基本索引，则根据定义，结果将按该索引排序。

然而，有几种方法可以解决这个问题。一种简单的方法是

1) 查询field1

2) 使用 field3 对 1) 的结果进行排序

如果我正确理解您的评论，这将为您提供所需的输出。但是，它的缺点是需要 2 项主要工作，根据数据的大小，这可能会很昂贵。

还有另一种方法可以解决您的问题：复合索引。复合索引使用多个键来生成基于这两个键排序的索引。这里有一些文档：[http](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys) ://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys如果你想更深入地研究这个主题，还有很多关于复合索引的堆栈溢出问题。

此外，如果您想了解有关 mongodb 中索引（和复合索引）的一般信息，请查看[http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-1.Thesortcolumnmustbethelastcolumnusedintheindex](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-1.Thesortcolumnmustbethelastcolumnusedintheindex)。我希望整个文档对您非常有用。

使用复合索引，虽然优雅且合适，但肯定比在查询后使用排序更复杂。如果您愿意花时间研究它，但我相信您会发现它会帮助您找到一个不错的解决方案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:53:49.970

不，您不能将复合索引的整体排序顺序与单个索引组件的排序顺序分开。

因此，在您的示例中，对 field1、field2 的查询以及对 field3 的排序将需要复合 field1、field2、field3 索引来支持索引辅助排序。但是，如果结果中返回了多个 field1,field2 组合，则该索引将无助于排序；在这种情况下，需要进行内存排序。

# c++ - C/C++ 图形库按属性查询节点

> ID：12306478
> 
> 赞同：2
> 
> 时间：2012-09-06T18:45:41.013
> 
> 标签：c++, graph, attributes, structure, igraph

是否有一个 C++ 图形库，您可以在其中按属性值查询顶点？

就像蟒蛇版本一样。igraph:

```
seqIDs = myGraph.vs.select(attribute1, attribute2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:48:28.767

您已经看过 Boost Graph Library ( [BGL](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/index.html) ) 了吗？它允许对顶点进行参数化，因此您将能够使用标准算法来查看它们。

# java - Java：转换 ArrayList 的最佳方法是什么 到字节[]？

> ID：12306481
> 
> 赞同：2
> 
> 时间：2012-09-06T18:45:53.163
> 
> 标签：java

```
ArrayList<Byte> bytes = new ArrayList<Byte>();
try {
    int data = putObjectRequest.getInputStream().read();
    bytes.add((byte) data);
    while (data != -1) {
        data = putObjectRequest.getInputStream().read();
        bytes.add((byte)data);
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

我想将其转换为`byte[]`. 这是唯一的方法吗？

```
byte[] byteArray = new byte[bytes.size()];
for (int i = 0; i < bytes.size(); i++) {
   byteArray[i] = bytes.get(i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:14:00.930

我建议使用 a`ByteArrayOutputStream`而不是 an`ArrayList<Byte>`来收集您的输入：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
try {
    int data = putObjectRequest.getInputStream().read();
    while (data != -1) {
        bos.write(data);
        data = putObjectRequest.getInputStream().read();
    }
} catch (IOException e) {
    e.printStackTrace();
}
byte[] byteArray = bos.toByteArray(); 
```

这避免了装箱和拆箱每个字节的可怕开销。`-1`（我还修复了原始代码中的一个小错误，如果`putObjectRequest`为空，您将在该错误中编写。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:09:30.337

在 Apache Commons 中使用[ArrayUtils ：](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)

```
byte[] byteArray = ArrayUtils.toPrimitive(bytes.toArray(new Byte[bytes.size()])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T18:52:50.230

```
byte[] byteArray = new byte[bytes.size()];
for (int i = 0; i < bytes.size(); i++) {
   byteArray[i] = bytes.get(i);
} 
```

是的，这是唯一的方法。

```
byte[] byteArray = bytes.toArray(new byte[bytes.size()]); 
```

`toArray()`按照另一个答案中的建议使用**不起作用**，因为该方法无法自动将包装器类型转换`Byte`为原始类型`byte`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T18:48:11.723

没有。更轻松：

```
Byte[] byteArray = bytes.toArray(new Byte[bytes.size()]); 
```

如果你真的想要原语：

```
byte[] primitives = new byte[byteArray.length]
for (int i = 0; i < byteArray.length; i++) {
  primitives [i] = (byte)byteArray[i];
} 
```

这保证了链表和调整数组大小实现的线性时间复杂度。

从 5.0 开始支持：

http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray(T[])

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T18:49:18.173

你总是可以使用类似[`TByteList`](http://trove4j.sourceforge.net/javadocs/gnu/trove/list/TByteList.html)from的东西[`trove4j`](http://trove4j.sourceforge.net)，而不是你的`ArrayList<Byte>`. 您的算法将变为：

```
TByteList bytes = new TByteArrayList();
try {
    int data = putObjectRequest.getInputStream().read();
    bytes.add((byte) data);
    while (data != -1) {
        data = putObjectRequest.getInputStream().read();
        bytes.add((byte)data);
    }
} catch (IOException e) {
    e.printStackTrace();
}

byte[] byteArray = bytes.toArray(); 
```

# asp.net-mvc-3 - MVC 3 验证：想要将与验证失败的控件相对应的标签变为红色

> ID：12306489
> 
> 赞同：7
> 
> 时间：2012-09-06T18:46:19.063
> 
> 标签：asp.net-mvc-3

![在此处输入图像描述](../Images/5a57e90be283ad836c2c32bf1b9aec2a.png)

我正在使用 MVC 3 验证。我的产品经理希望每个有错误的控件的标签变为红色。

所以“学生名字”标签应该变成红色。“电子邮件地址”标签应变为红色。

我试图将每个错误消息包装在一个 div 中并检查每个 div 的长度

```
<div id="divValStudentFirstName">@Html.ValidationMessageFor(m => m.studentFirstName)</div> 
```

在一个 js 文件中：

```
$(document).ready(function () {

    if ($("#divValStudentFirstName").length > 1) {
                ("#divStudentFirstName").css("color", "red");

    } 
```

但我没有成功。验证检查是在没有完全刷新的情况下完成的，因此，当验证命中时，我的 $(document).ready 不会被触发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T19:37:26.803

客户端验证已禁用：

```
public static IHtmlString ValidationLabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, string labelText = null) {
            var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
            var name = ExpressionHelper.GetExpressionText(expression);
            string resolvedLabelText = labelText ?? metadata.DisplayName ?? metadata.PropertyName ?? name.Split('.').Last();
            if (String.IsNullOrEmpty(resolvedLabelText)) {
                return MvcHtmlString.Empty;
            }

            var tag = new TagBuilder("label");
            tag.Attributes.Add("for", TagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name)));
            tag.GenerateId(name);
            tag.SetInnerText(resolvedLabelText);
            ModelState modelState;
            string fullName = html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name);
            if (html.ViewData.ModelState.TryGetValue(fullName, out modelState)) {
                if (modelState.Errors.Count > 0) {
                    tag.Attributes.Add("style", "color:red");
                }
            }
            return new MvcHtmlString(tag.ToString());
        } 
```

**编辑**

启用客户端验证

我真的不是 js 的王者，但这似乎有效（至少在一个简单的情况下）

```
$('form').submit(function () {
        var form = $(this);
        $('label').removeClass('field-validation-error');
        if (!form.valid()) {
            $('.input-validation-error')
                .each(function () {
                    $("label[for='" + $(this).attr("id") + "']").addClass('field-validation-error');
                });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T22:02:34.517

下面是一个 JQuery 函数，它通过在单击提交按钮时添加（或删除）错误类来为包含的 div 标签着色。可以轻松更改以将类添加到标签。

```
 $('form').submit(function () {

    if ($(this).valid()) {
        $(this).find('div.form-group').each(function () {
            if ($(this).find('span.field-validation-error').length == 0) {
                $(this).removeClass('error-colored');
            }
        });
    }
    else {
        $(this).find('div.form-group').each(function () {
            if ($(this).find('span.field-validation-error').length > 0) {
                $(this).addClass('error-colored');
            }
        });
    }
}); 
```

# c# - ISponsor 和 ILease 接口如何工作？

> ID：12306497
> 
> 赞同：5
> 
> 时间：2012-09-06T18:47:05.990
> 
> 标签：c#, .net, .net-remoting, object-lifetime

我创建了一个继承自`MarshalByRefObject`and的对象`ISponsor`。在我的实现中，`ISponsor`我只返回一个时间跨度来指示我希望对象更新多长时间。

当我调用`InitializeLifetimeService()`以获取`ILease`要传递给我的`ISponsor`对象的引用时，它似乎从未在[我见过的示例](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.lifetime.isponsor.aspx)中使用过。

`ISponsor`似乎只是返回一个 TimeSpan 而没有实际使用`ILease`参考。但我确信这里还有更多事情要做，因为涉及到远程处理。

特别是在对象生命周期更新方面如何`ISponsor`工作？`ILease`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-14T18:34:40.787

在您想要延长远程对象租约的客户端应用程序中，您通常会通过调用获取对象的 ILease 接口

```
ILease lease = (ILease)RemotingServices.GetLifetimeService( remoteObject ); 
```

然后将您的自定义赞助商对象传递给它

```
lease.Register( customSponsor ); 
```

您的自定义赞助商类将如下所示：

```
private class CustomSponsor : MarshalByRefObject, ISponsor
{
    public TimeSpan Renewal(ILease lease)
    {
        Debug.Assert(lease.CurrentState == LeaseState.Active);
        //Renew lease by 5 minutes

        return TimeSpan.FromMinutes(5);
    }
} 
```

有关更多信息，请查看有关租赁和赞助的有用 MSDN 文章。 [http://msdn.microsoft.com/en-us/magazine/cc300474.aspx](http://msdn.microsoft.com/en-us/magazine/cc300474.aspx)

该链接不再有效 - 它是在 2003 年 12 月的问题中，但可以从同一页面以 CHM 格式下载。

回程机链接在这里：

[https://web.archive.org/web/20080906214332/http://msdn.microsoft.com/en-us/magazine/cc300474.aspx](https://web.archive.org/web/20080906214332/http://msdn.microsoft.com/en-us/magazine/cc300474.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T19:14:51.020

`InitializeLifetimeService`在父 AppDomain 中，您可以通过或者`GetLifetimeService`调用新 AppDomain 中的对象的代理实例来获取 ILease 对象。您永远不需要`ILease`自己实现（除了测试您的`ISponsor`实现）。

比您注册您的自定义赞助商对象，该对象`ISponsor`通过`ILease.Register`调用实现并配置`ILease`具有超时的对象。

当您的 Sponsor 对象被调用时，`Renewal`您可以说出使对象保持活动状态的时间，并且还可以调整/显示传入`ILease`实例的属性。

# ruby-on-rails-3 - 在rails 3中呈现共享的js erb模板

> ID：12306499
> 
> 赞同：1
> 
> 时间：2012-09-06T18:47:12.247
> 
> 标签：ruby-on-rails-3, erb, ujs

我正在尝试在 Rails 3 中呈现共享的 javascript 模板。

我有两个控制器动作，都命名为更新。

对于每个控制器操作，我都有一个“update.js.erb”文件，我希望它看起来像这样：

```
<%= render 'shared/_update.js.erb' > 
```

甚至更好：

```
<%= render 'shared/update' %> 
```

但是当我这样做时，我会在我的 erb 元素周围遇到解析错误，例如：

`/Users/ipd/Projects/master/app/views/shared/_update.js.erb:15: syntax error, unexpected keyword_when, expecting keyword_end '); when Activity::Rating`

渲染 js 模板的正确方法是什么？

谢谢！

**更新：**我通过删除模板中的额外空格解决了案例语法错误问题。`<% when :case %>`每行之间都有空格。（！！！）

但是，当使用部分时，我仍然无法让 js 执行。

# xsd - 在 XSD 中的许多元素上重用属性

> ID：12306500
> 
> 赞同：3
> 
> 时间：2012-09-06T18:47:20.013
> 
> 标签：xsd, attributes

XML Schema 中是否有一种方法可以定义/命名一组可以在许多元素定义中重用的属性，而无需将整个属性定义剪切/粘贴到每个元素定义中？

例如，如果我想要 xsd 中 20 个不同元素的三个属性，我可以以某种方式将它们命名为一个组并引用它们，而不必将相同的完整定义作为所有 20 个元素的一部分重复吗？

```
<xs:attribute name="lang" type="xs:string" use="required"/>
<xs:attribute name="page" type="xs:string"/>
<xs:attribute name="alphabet" type="xs:string"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:53:18.903

是的，为此目的有' [xs:attributeGroup '。](http://www.w3.org/2002/ws/databinding/examples/6/09/AttributeGroup/)

# ios - 处理 iOS 游戏和应用程序中的层次结构破坏效果

> ID：12306503
> 
> 赞同：4
> 
> 时间：2012-09-06T18:47:31.007
> 
> 标签：ios, architecture, hierarchy, paradigms

大约一年半前，我开始担任 iOS 开发人员，但在软件架构和组织方面遇到了一些麻烦。我使用 Apple 推荐的 Model-View-Controller 范例，而且我的代码通常是非常分层的：如果一个屏幕（例如）有一个 HUD、一个控制面板和一个显示区域，我有一个用于屏幕的主控制器和一个子控制器HUD、控制面板和显示区域的控制器。子控制器通常不知道它们的相邻控制器，并使用主控制器中的方法与它们交互。

然而，尤其是在游戏中，我经常遇到无法用这个模型优雅地解决的层次结构问题。例如，假设我在控制面板区域中有一枚硬币，我想制作它飞向 HUD 的动画。我可以将原始硬币动画到新位置，这需要在控制面板子控制器中使用 animateCoinToPosition: 之类的方法，在主控制器中使用 getPositionForFinalCoinPositionInHUD 之类的方法；或者，我可以隐藏原始硬币并在主控制器或 HUD 控制器中创建一个重复的硬币，这需要像 animateCoinToHUDFromStartingPosition: 这样的委托方法。我不喜欢在我的控制器中使用这种奇怪的特定方法，因为它们只是为了解决一个问题而存在，并且还暴露了层次结构。我理想的解决方案是使用一个名为 animateCoinToHUD 的方法，但这需要展平整个层次结构并将三个控制器合并为一个，这显然不值得。（或者让子控制器访问他们的兄弟姐妹——但这基本上会产生相同的效果。然后子控制器将相互依赖，创建一个凌乱的蜘蛛网控制器而不是主控制器和三个大部分独立的子控制器控制器。）

而且它经常变得更糟。如果我想在移动硬币时显示全屏动画或粒子效果怎么办？如果我的硬币比具有许多子视图和细节的简单精灵复杂得多，以至于使用 animateCoinToHUDFromStartingPosition: 创建重复硬币效率低下怎么办？如果硬币飞到 HUD 后又返回控制面板怎么办？我是否将硬币视图“借给”主控制器，然后在动画完成时将其取回，保留原始位置/z-order/等。在临时变量中以便可以恢复它们？还有一件事：逻辑上，涉及多个子控制器的代码属于主控制器，但如果这些交互很常见，主控制器就会增长到数千行——我在许多项目中都看到过这种情况，

是否有一致的方法来处理这些不需要重复代码或资产、不会使我的控制器膨胀并优雅地允许我在子控制器之间共享对象的破坏层次结构的效果和操作？还是我完全使用了错误的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:44:12.143

所以，我想你可能有点过于字面地考虑“永不上升”的层次结构。

我认为这个想法是您不*具体*知道父对象是什么，但是您可以定义一个协议并知道无论您的父对象是什么，它都会响应所述协议。理想情况下，您在代码中进行测试以确认它响应该协议。然后使用该协议以一种通用方式发送消息，其中您将硬币对象传递给父对象，并让父对象将其动画化离开屏幕并进入 HUD。

然后子控制器有一个`id<parent_protocol> parent;`实例变量，它们的初始化方法将其中一个作为参数。鉴于您的描述，您已经有了类似的东西，或者至少足以实现“子控制器通常不了解其相邻控制器并使用主控制器中的方法与它们进行交互”，正如您所说。

因此，从设计的角度来看，这个想法是硬币拾取发生在显示面板中，它所知道的是它的父对象有一个`pickupCoin:`方法可以对拾取的硬币执行*任何适当的操作。*显示面板不知道它进入 HUD 或其他什么，只是拾取的硬币由父控制器的`pickupCoin:`方法处理。

这里的 OOP 设计理念是将父级的所有知识都封装在协议定义中。这使得孩子和父母更加松散耦合，因此您可以交换*任何*实现该协议的父母并且孩子仍然可以正常工作。

您可以使用更松散的耦合（例如全球发布的通知），但在您描述的情况下，我认为像我所概述的那样可能更合适并且可能更高效。

这有帮助吗？

# ms-access-2010 - 用于保护 Access 2010 数据库的密码有哪些限制？

> ID：12306504
> 
> 赞同：1
> 
> 时间：2012-09-06T18:47:32.760
> 
> 标签：ms-access-2010

根据此页面： http: [//office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx](http://office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx)

密码中的最大字符数为 14。

但此页面鼓励您在密码中使用 14 个*或更多*字符：http: [//office.microsoft.com/en-us/access-help/introduction-to-access-2010-security-HA010341741.aspx ?CTT=3](http://office.microsoft.com/en-us/access-help/introduction-to-access-2010-security-HA010341741.aspx?CTT=3)

我自己的测试表明我最多可以使用 20 个字符。

有没有人在 Access 2010 密码上找到更好（或更一致的文档）？或者也许做了一些广泛的测试来确定真正的限制是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:48:48.200

这是一个不同的资源，它确认了您在 MS Access 2010 中的 20 个字符限制。

[http://www.databasezone.com/techdocs/acclimit.html](http://www.databasezone.com/techdocs/acclimit.html)

它列出了直到 MS Access 2003，最大密码长度实际上是 14 个字符。在 MS Access 2007 中，.accdb 格式的引入取消了用户帐户密码，并选择了更强大的加密 API，它最多支持 20 个字符。

我不确定为什么 Microsoft 网站指定最多 14 个字符。我只能推测这是为了涵盖那些使用 MS Access 2007+ 以使用不支持完整 20 个字符的密码的旧 .mdb 格式数据库的用户。

此外，虽然不一定是密码本身的限制，但在 .accdb 格式的数据库上使用密码时，加密会强制对数据库进行页面级别锁定 - 这可能会限制用户在共享环境中针对底层数据发出事务的能力（[http://office.microsoft.com/en-us/access-help/introduction-to-access-2010-security-HA010341741.aspx——](http://office.microsoft.com/en-us/access-help/introduction-to-access-2010-security-HA010341741.aspx) 搜索“页面级”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-01T18:07:51.000

我意识到这个页面已经很老了，而且关于密码长度的访问规范页面还没有更新过。

但是，最近在另一个 Access 论坛中提出问题后，我做了一些测试。访问 APPEARS 让您输入超过 20 个字符作为密码。事实上，我成功地测试了 26、256 甚至 512 个密码字符。然而，这是一种错觉，只有输入的前 20 个字符被保存。限制仍然为 20 个字符，但有一个附加条件。如果您在链接的 BE 表中使用 20 个字符的密码，则该链接有效，但您在打开表时会收到“不是有效密码”错误。链接数据库中表的有效限制 = 19

# php - 当它不可用时，它是 bcrypt 加密的良好 php 替代品吗？

> ID：12306511
> 
> 赞同：0
> 
> 时间：2012-09-06T18:47:51.410
> 
> 标签：php, encryption, mcrypt, bcrypt

我刚刚了解到我的主机提供商在共享主机上不提供 bcrypt。他们建议我使用 mcrypt，但我不太确定它的安全性。bcrypt 的最佳替代品是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:46:23.343

这就像比较苹果和梨。Bcrypt 是密码的密钥派生函数。Mcrypt 是一个密码库。

mcrypt 最大的问题是缺乏一个好的随机数生成器，以及缺乏如何使用这个库的好例子。我会给设计一个微薄的 5/10。

如果您需要 PHP 版本的 bcrypt，请查看以下链接：

*   [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)
*   [http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

这意味着您可以使用 openssl 包装器或直接在 PHP 中选择 bcrypt。检查您的提供程序是否受支持，不要忘记 bcrypt/scrypt 故意使用 CPU 周期和/或内存访问来减慢速度。您的提供商可能不太喜欢这样（当然取决于流量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:49:46.603

[之前在这里](https://stackoverflow.com/questions/8362103/alternative-to-bcrypt-when-saving-passwords-in-php-5-2)问过

> 该`hash_hmac()`函数似乎是生成哈希的可靠系统。hmac 本身不是散列函数，它改进了现有的散列算法，例如 sha 或ripemd。如何使用示例：

```
hash_hmac('ripemd256', $dataToHash, $key); 
```

> 您可以在 Wikipedia - HMAC 中找到有关 hmac 的更多信息。

# php - 如何在表单提交后打开带有位置标题的 submit.php 的颜色框？

> ID：12306512
> 
> 赞同：0
> 
> 时间：2012-09-06T18:47:59.233
> 
> 标签：php, javascript, mysql, submit, colorbox

为了防止用户在提交表单后点击他们的后退按钮，我想在颜色框模式中打开下一页。我的表单操作是调用一个 php 页面，该页面将数据提交到 MySql，然后使用位置标头重定向到 page.php，然后要求他们提交照片作为提交过程中的第二步。

这是我在第一页上使用的带有提交按钮的代码，它打开了颜色框模式“

```
<script>
  jQuery(document).ready(function(){
  jQuery(".modal").colorbox({modal:true, width:"748px", height:"92%"});
  });
</script>

<form action='submit.php' method='post' enctype='multipart/form-data' name='form1' onSubmit='jQuery.fn.colorbox()'>

// input data

<input name='save_button' type='submit' id='save_button' value='Save Settings'> 
```

这是我的 submit.php 页面的代码：

```
<?php
  // updatequery code
  header("Location: page.php");
?> 
```

单击提交按钮时，颜色框会打开一个模式，但随后会立即关闭，同时 submit.php 页面中的代码会重定向到 page.php

如何让表单 action=submit.php 和随后的位置标头重定向 page.php 出现在颜色框模式中？

# javascript - 在 javascript 中处理小数

> ID：12306513
> 
> 赞同：1
> 
> 时间：2012-09-06T18:48:01.230
> 
> 标签：javascript, numbers, decimal

我有一个 javascript 函数，可以将英尺转换为一个可用的对象，该对象将获取总英尺并将其分解为英尺/英寸/分数。

在下面的示例中，小数部分应为零，我的英寸应为 4

可以说我有以下内容。

```
var inches = 40; 
```

现在当我像这样调用下面的函数时 unPackDecimalFeet(40 /12);

```
 unPackDecimalFeet: function (feetInchFraction) {

        var inchFraction = (feetInchFraction - ~~feetInchFraction) * 12;
        return {
            feet: ~~feetInchFraction,
            inch: ~~inchFraction,
            fraction: inchFraction - ~~inchFraction
        };
    } 
```

我的返回值低于。

```
feet: 3
fraction: 0.9999999999999964
inch: 3 
```

**上面的返回值应该是这样的。

```
feet: 3
fraction: 0
inch: 4 
```

我需要如何处理脚才能获得正确的返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:51:09.980

我会说一开始就乘以`1000`，然后进行计算，然后除以`1000`。IEEE 浮点算法是这里的问题。如果您需要更多计算，请查看 BigInteger 库。（BigInt，有时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:28:56.000

```
var inchesIn;
inchesIn = 40;
document.writeln('Feet: ' + Math.floor(inchesIn/12));
document.writeln('Inches: ' + inchesIn%12); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:42:59.283

您正在做很多工作来尝试将自己从整个代码中微小的无关紧要的分数问题中拯救出来。我认为也许更简单更好：

```
unPackDecimalFeet : (function (feet) {
    var flooredFeet = 0 | feet,
        flooredInches = 0 | ((feet - flooredFeet) * 12),
        inchFraction = (feet * 12) - (0 | (feet * 12));

    return {
        feet: flooredFeet,
        inch: flooredInches,
        fraction: +(inchFraction.toFixed(2)) //Rounded to two decimals
    };
}) 
```

唯一的“技巧”是 with`0 |`作为`Math.floor()`. `Math.floor()`如果它让您对可维护性感觉更好，请随意使用。此外，我将响应的“分数”部分四舍五入到最接近的 100 英寸。如果需要，您可以更精确地舍入，但鼓励进行一些舍入以防止`0.9999999999999994`由于 IEEE-754 变得疯狂或其他任何事情。

# mercurial - 如何将文件从分支添加到 Mercurial 中的另一个分支？

> ID：12306514
> 
> 赞同：3
> 
> 时间：2012-09-06T18:48:09.497
> 
> 标签：mercurial, branching-and-merging, mercurial-extension

我在本地存储库中有两个分支：`default`和`s1`.

在`default`分支中，有一个名为 的文件`def.txt`。该`s1`分支有名为 , 等的文件`set3.txt`。`set1.txt`我也想将分支添加到`set1.txt`分支。`s1``default`

`hg add set1.txt`当工作目录位于`default`分支时，我尝试使用命令。但是，由于`default`分支没有该文件，我无法添加它，并且它总是给我一个错误消息，例如`"no set1.txt file found"`.

我不想使用`merge`命令，因为我不想将所有其他文件从`s1`一个分支合并到另一个`default`分支。我只想添加一个文件，`set1.txt`. 我也尝试`hg transplant -b s1`过，但似乎没有达到同样的目的。

那么知道如何解决这个问题吗？我的目标是让这两个分支如下所示：

*   `default`:`def.txt`等`set1.txt`。

*   `s1`:`set1.txt`等`set3.txt`。

我的机器是 Red Hat Linux Workstation 6，它有 Mercurial 1.7.3 和 TortoiseHG 1.5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T19:30:10.030

您可以使用一个技巧：将文件“还原”`set1.txt`到分支`s1`。由于分支是修订版，因此这将起作用：

```
$ hg revert -r s1 set1.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:37:28.653

`hg revert`是一个可爱的把戏。但是，我更倾向于使用`hg cat -r s1 set1.txt > set1.txt`它，它更明确地满足您的期望。我认为最终这两个命令之间没有任何区别。

直观地说，您正在尝试将单个文件从一个分支合并到当前分支。一个快速的谷歌出现了这篇文章在 DVCS 中探索这个概念：http: [//josefbetancourt.wordpress.com/2011/01/13/merge-single-file-hg/](http://josefbetancourt.wordpress.com/2011/01/13/merge-single-file-hg/)

# c# - 使用 HTTPS 的 Windows WCF 服务

> ID：12306518
> 
> 赞同：0
> 
> 时间：2012-09-06T18:48:13.587
> 
> 标签：c#, wcf, ssl, service, app-config

我有一个工作的 WCF 服务，我也在尝试添加 SSL 安全性。我按照教程创建了开发证书，我想我已经完成了所有设置；但是，当我安装并尝试启动我的服务时，它会失败而没有错误。我正在使用 installutil [servicename.exe] 并安装了服务。然后我尝试启动服务，它不会启动。我在以前工作的应用程序配置中所做的唯一更改如下：

我通过以下方式添加了传输安全性：

```
<security mode="Transport">
  <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
</security> 
```

我将基地址从`"http://localhost/service" to "https://localhost/service"`

我添加了一个服务行为以通过以下方式允许 httpsGets：

```
<serviceMetadata httpsGetEnabled="true" /> 
```

我希望我有更多关于错误的详细信息，但基本上它只是说 Windows 服务无法启动，这使得故障排除非常困难。任何建议或提示都会有所帮助。

提前致谢！！！

# javascript - JavaScript 多种返回类型

> ID：12306523
> 
> 赞同：3
> 
> 时间：2012-09-06T18:48:40.077
> 
> 标签：javascript, json

我希望能够在 JavaScript 中调用一个函数并返回一个原始值，但也可以返回数据。例如，假设我想验证密码。有时我想知道它是否有效（满足最低要求），有时我想知道它有多强，而其他时候我想知道它在文字上有多强（“弱，强”等。 ）。

所以基本上我希望这是有效的：

`if (validate.checkPassword(password)) ...`

而且这个工作：

```
if (validate.checkPassword(password).strength === "strong")
if (validate.checkPassword(password).rating >= 6) 
```

既然一个对象既可以是函数也可以有数据，那么 JSON 返回值是否可以既有原始类型基值又有其他数据成员呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:51:38.187

```
return { strength: 'abc', rating: -1 } 
```

javascript 中的真实性将使 if 语句起作用，然后您可以检查 JSON 以获取所需的任何值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:52:46.173

不，事物不能是多类型的。但是，您可以向该数据结构添加一个布尔值

```
if (validate.isValidPassword(passWord).isValid)... 
```

但是你应该强烈地重新考虑你的命名法，因为那是一些令人困惑的东西。

否则，`null`是错误的，所以如果你只在有效的块内使用后面的语句，那么你应该没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T19:00:36.333

首先，JSON 只是 JavaScript 对象的符号，而不是对象本身的名称。在 JavaScript（未序列化）中，它只是一个对象。

话虽如此，您似乎想从您的验证方法返回一个对象，然后该对象将公开您希望返回的各种信息。例如

```
function isValidPassword(pw){
  var result = {
    strength: 'weak',
    rating: 0,
    valid: false
  };

  // test and change result.strength, result.rating and result.valid
  // based on the input

  return result;
} 
```

这是一个非此即彼的场景，因此您无法返回“真/假”并获取额外的元信息。请注意，返回的任何对象都会在`true`测试时产生结果，因此鉴于上述情况：

```
var validPassword = validate.isValidPassword(null);

// always true, we have an object
if (validPassword){
}

// instead, you'd now need to check:
if (validPassword.valid){
} 
```

*（我也会忽略一个名字，比如`isValidPassword`暗示一个真/假结果而不是一个对象结果，所以如果你正在制作一个公共库，如果你打算更改结果，我鼓励你重命名该函数）*

但是，您可以使用多种方法来打破您正在寻找的详细程度，这可以`isValidPassword`按预期进行简单的工作，但随后添加诸如`getPasswordStrength`,`getPasswordRating`等功能：

```
function isValidPassword(pw){
  // return true/false;
}
function getPasswordStrength(pw){
  // return "weak","strong",etc.
}
function getPasswordRating(pw){
  // return 1,2,etc.
} 
```

这也使隐含的结果在可读性方面更加清晰易读，同时仍然提供了获取所需信息的替代方法。

```
if (!validator.isValidPassword(pw)){
  error = pw + ' is unacceptable (' + validator.getPasswordStrength(pw) + ')';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T18:52:29.010

据我所知，您只能从函数中返回一个“事物”，但该函数可以包含其他“事物”。

我认为您最好的结果是按照以下方式返回一个对象：

```
{
    valid: 
    strength: 
    rating: 
} 
```

然后你可以做你想做的事情，除了你需要做的默认类型：

```
if (validate.isValidPassword(password).valid) 
```

编辑：作为每次返回对象的轻微理由。在我的脑海中，我曾想象过您总是想检查密码为何有效或无效的状态。简单地返回 false 将为您提供是否通过的 y/n，但不会为您提供确定“为什么”密码无效所需的信息。如果您想显示一些“您必须包含大写、小写并确保在星期一输入第一个字母”类型的消息，那么在每种情况下都返回密码“结果”对象似乎是明智的。对我来说似乎更灵活。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T18:53:10.210

考虑：

```
function PasswordInfo(strength, rating)
{
    this.strength = strength;
    this.rating = rating;
}

function isValidPassword(password)
{
    return new PasswordInfo('strong', 10);
}

function validate()
{
    var info = isValidPassword('password');

    if (info.strength === 'strong' && info.rating >== 6)
    {
        alert('good password);
    }
    else
    {
        alert('bad password);
    }
} 
```

这个实例中的函数`PasswordInfo`实际上是一个类/构造函数。

# c# - 如何使用 url 命令（测试句柄）登录，而不是在每个步骤中输入？

> ID：12306524
> 
> 赞同：0
> 
> 时间：2012-09-06T18:48:45.643
> 
> 标签：c#, selenium, webdriver

因此，该场景是使用格式化的 url 登录到所述网站，而不是执行如下所示的操作。在阅读有关 Selenium 等的文档后，我读到这是不好的做法（不包括登录测试用例）。我了解我询问的方法不适用于生产级别。
url 方法是否从数据库中提取登录信息？

```
//ENTER AGENT LOGIN ID
                IWebElement LoadAgentLoginID2 = selenium.FindElement(By.Id("MainContent_txtAgentID"));
                LoadAgentLoginID2.Click();
                LoadAgentLoginID2.SendKeys(AgentLoginIDs[0]);

                //ENTER ARC NUMBER
                IWebElement LoadARCnumber2 = selenium.FindElement(By.Id("MainContent_txtArcNbr"));
                LoadARCnumber2.Click();
                LoadARCnumber2.SendKeys(System.String.Format("{0}", ARCnumbers[1]));

                //ENTER PASSWORD
                IWebElement LoadPassword2 = selenium.FindElement(By.Id("MainContent_txtPassword"));
                LoadPassword2.Click();
                LoadPassword2.SendKeys(AgentPasswords[0]); 
```

任何帮助是极大的赞赏。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:18:25.703

url 方法需要 Web 应用程序支持。如果支持这一点，那么它将是这样的：

driver.get("http://www.mywebapp.com?username=JohnP&password=ABCD");

如果 Web 应用程序不支持这一点，那么您应该尝试将上面的登录逻辑封装到一个单独且可重用的方法中。

# java - Java - 使用 java.Scanner 的文件似乎相同，但未评估为“相等”

> ID：12306526
> 
> 赞同：2
> 
> 时间：2012-09-06T18:48:48.890
> 
> 标签：java, encoding, diff, filereader

我已经设置了一个 JUnit 测试，该测试正在测试一种称为`copy(File src, File dest)`简单地将文件内容复制`src`到`dest`文件的方法。我正在使用扫描仪同时迭代每个文件（当然是两个不同的扫描仪），然后将每个扫描仪`next()`与`.equals()`.

该测试失败，告诉我文件不相等。但这怎么可能呢？当我打印它们时，这些字符串看起来是一样的，更不用说我`hex dump`在调用之后立即做了一个文件`copy()`，这些看起来也一样。但是，当我打印以字节为单位的每个值时`next()`，我确实得到了不同的字节模式。我很困惑为什么会发生这种情况，以及我可以对我的代码进行哪些更改来解决这个问题？

我的想法是它与文件的编码有关，也许用于创建文件的编码方法`copy()`与程序中其他地方使用的编码方法不同？真的不太确定，任何帮助表示赞赏！这是我正在为测试单元工作的内容：

```
// The @Rule and @Before blocks are used as set up helper methods for @Test.
    @Rule
    public TemporaryFolder tmp = new TemporaryFolder();

    private File f1, f2;

    @Before
    public void createTestData() throws IOException {
        f1 = tmp.newFile("src.txt");
        f2 = tmp.newFile("dest.txt");

        BufferedWriter out = new BufferedWriter(new FileWriter(f1));
        out.write("This should generate some " +
                "test data that will be used in " +
                "the following method.");
        out.close();
    }

    @Test
    public void copyFileTest() throws FileNotFoundException, 
    Exception {
        try {
            copyFile(f1, f2);
        } catch (IOException e) {
            e.getMessage();
            e.printStackTrace();
        }

        Scanner s1 = new Scanner(f1);
        Scanner s2 = new Scanner(f2);

        // FileReader is only used for debugging, to make sure the character
        // encoding is the same for both files.
        FileReader file1 = new FileReader(f1);
        FileReader file2 = new FileReader(f2);
        out.println("file 1 encoding: " +file1.getEncoding());
        out.println("file 2 encoding: " +file2.getEncoding());

        while (s1.hasNext() && s2.hasNext()) {
            String original = s1.next();
            String copy = s2.next();

            // These print out to be the same ...
            out.println("\ns1: " +original);
            out.println("s2: " +copy);

            // Nevertheless, this comparison fails!
            // These calls to getBytes() return different values.
            if (!(s1.equals(s2))) {
                out.println("\nComparison failed!! \ns1 in bytes: " +original.getBytes()+ 
                        "\ns2 in bytes: " +copy.getBytes());
                fail("The files are not equal.");
            }
        }
    } 
```

这是我的输出：

```
file 1 encoding: UTF8
file 2 encoding: UTF8

s1: This
s2: This

Comparison failed!! 
s1 in bytes: [B@16f5b392
s2 in bytes: [B@5ce04204 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:58:53.340

`Scanner`不覆盖`Object.equals()`，所以它比较引用，在你的情况下是不相等的，因为你有两个单独的`Scanner`对象。

# java - Mongodb 更新和设置嵌入文档中的字段

> ID：12306527
> 
> 赞同：0
> 
> 时间：2012-09-06T18:49:04.497
> 
> 标签：java, mongodb, mongodb-java, mongodb-query

我有一个包含嵌入式文档的集合。

```
 System
 {
     System_Info: "automated",

     system_type:
     {
         system_id:1,

          Tenant: [ 
                  { 
                Tenant_Id: 1, 
                Tenant_Info: "check", 
                Prop_Info: ...
                  }, 
                  { 
                 Tenant_Id: 2, 
                 Tenant_Info: "sucess", 
                  Prop_Info: ...
                  } ]
                  }} 
```

我需要更新 Tenant_Id 中的字段 Tenant_Info 并将其设置为“失败”：2

我需要使用 mongodb java 来完成。我知道在租户数组中插入另一个租户信息。但在这里我需要使用 java 代码设置字段。

谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T20:09:36.933

像这样的东西怎么样（未经测试）：

```
db.coll.update(
    {
        "System.system_type.Tenant.Tenant_Id" : 2
    },
    {
        $set : {
            "System.system_type.Tenant.$.Tenant_Info" : "failed"
        }
    }, 
    false, 
    true
); 
```

`Tenant_id`对于所有顶级文档，它应该将集合中的第一个嵌套文档更新为 2。如果您需要定位特定的顶级文档，则需要将其添加到`update`调用中第一个对象参数的 as 字段中。

和Java中的等价物：

```
BasicDBObject find = new BasicDBObject(
    "System.system_type.Tenant.Tenant_Id", 2
);

BasicDBObject set = new BasicDBObject(
    "$set", 
    new BasicDBObject("System.system_type.Tenant.$.Tenant_Info", "failed")
);

coll.update(find, set); 
```

# android - Android ListView 位图优化

> ID：12306533
> 
> 赞同：2
> 
> 时间：2012-09-06T18:49:21.403
> 
> 标签：android, listview

我有一个显示位图图片的 ListView。这些位图变得非常大。当我在 ListView 上滚动时，它似乎很重。我可以使用哪些技术来优化 ListView ？这可能包括在内存中压缩位图，或增强列表视图内存管理的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:53:29.387

首先，阅读本文，

> [http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

它讨论了视图持有者模式，以及在线程中加载图像。也，读这个，

> [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

这将讨论如何为位图构建有效的内存缓存。

如果这还不够，您可以采用的另一种技术是避免在滚动停止之前加载图像。如果用户说扔到列表底部，这可以防止列表视图加载所有图像。基本上，像这样的东西，

```
 pagerList.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState != OnScrollListener.SCROLL_STATE_IDLE) {
                return;
            }
            // load images for adapter views between first and first+count.
            // depending on your memory requirements, you can pre-load additional
            // images before first and after first+count to give a better
            // user exp
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            first = firstVisibleItem;
            count = visibleItemCount;
        }
    }); 
```

这要求您`ImageView`为适配器中的每个项目保留一个句柄，以便稍后找到它并将适当的位图设置到其中。这可以像在适配器中保留一组图像视图一样简单，其中索引 == 列表视图中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T06:56:17.747

我主要使用 LruCache 来优化列表并从缓存[LruCache加载图像](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

在 BaseAdapter 类的 getView 中添加它

```
@Override
    public View getView(.....
   ..... . .  
     Bitmap image = getBitmapFromMemCache(name);
        if (image == null)
        {
         image = decodeSampledBitmapFromUri(image_path.get(position), 64,64);
        }
        else
        {
            Log.i("loding. ", "from cache "+name);
        }
        // Bitmap ThumbImage = ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(details), 64, 64);
         holder.img.setImageBitmap(image);
         addBitmapToMemoryCache(name, image); 
```

# java - 如何检查其中一个线程是否失败？

> ID：12306535
> 
> 赞同：1
> 
> 时间：2012-09-06T18:49:39.777
> 
> 标签：java, multithreading

我有一个多线程 Java 应用程序。我希望整个应用程序失败是线程之一遇到任何异常。

我不认为`System.exit();`在线程内部做会退出整个应用程序。

有人可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:54:20.277

实际上，调用`System.exit()` *将*退出整个应用程序，但这通常不是您在库代码中想要的（例如，它使单元测试变得困难）。

一个更好的实现是拥有一个共享的“错误处理程序”引用，以及您控制的实现。在单元测试中，您可以只记录异常。在您的真实应用中，您可以调用`System.exit()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:55:41.900

放入`try-catch`Thread 的 run 方法并在 catch 块中`System.exit(0);`它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:53:22.683

一种简单的方法是在每个线程上尝试{} catch{}，当您捕获异常时，您可以调用退出应用程序的静态函数。

# javascript - HTML5 中新增的 inline-js 属性是什么？

> ID：12306543
> 
> 赞同：2
> 
> 时间：2012-09-06T18:50:44.397
> 
> 标签：javascript, html, inline, attr

我需要一个可以接受内联 JS 的所有属性的列表。（是的，由于 javascript: 能力，我会将 href 标签算作这样的属性）。

我已经在谷歌上搜索了很多，但到目前为止，只有与“为什么不应该使用内联 JS”相关的结果。我什至尝试过查找 HTML5 属性期间的列表。我设法找到了 HTML4 列表（[http://www.w3.org/TR/html4/index/attributes.html](http://www.w3.org/TR/html4/index/attributes.html)），所以我拥有所有 HTML4 内联代码属性...

但是，我不知道 HTML5 是否引入了任何使用内联 js 的新属性。有任何想法吗？

编辑：我很抱歉 - 我没有说清楚：

我不是想使用内联 JS——我是想阻止其他人使用它。

我正在为一个网站开发一个项目，该网站多年来一直没有任何类型的过滤 HTML。我们经历了一次又一次的攻击。我终于说服了网站的创建者让我创建一个函数来过滤掉 HTML 中的所有 JS。我完成这个只是发现我完全忘记了内联 JS。我想要一个所有内联 JS 属性的完整列表，以便我也可以阻止它们。

编辑：感谢乔约翰逊的出色回答，我为那些也对完整属性列表感兴趣的人找到了许多资源：

HTML4 事件属性：
[http](http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#events-module) ://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#events-module （谢谢乔！）
[http://www.w3。 org/TR/html4/index/attributes.html](http://www.w3.org/TR/html4/index/attributes.html)

HTML5 新事件属性：
[http ://www.w3schools.com/html5/html5_ref_eventattributes.asp](http://www.w3schools.com/html5/html5_ref_eventattributes.asp)

浏览器特定属性：
iOS：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)
IE：[reference.sitepoint.com/html/extended-event-attributes](http://reference.sitepoint.com/html/extended-event-attributes)
火狐：[developer.mozilla.org/en-US/docs/Gecko-Specific_DOM_Events](http://developer.mozilla.org/en-US/docs/Gecko-Specific_DOM_Events)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:54:47.373

据我所知，在事件处理程序之外没有接受 javascript: 协议（例如 href）或内联 JS 的新属性。然而，HTML5 引入了许多新的事件处理程序（on[click,mouseenter,mouseleave,etc]——但这些并不是新的，只是示例）。

我讨厌在这里打败一匹死马......但是，你发现的一切都是一针见血——尽量避免使用内联 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:58:33.627

为什么要使用过时的技术来催生新技术？

旧的内联 js 仍然适用于所有 html5 元素：[HTML4 内联在 HTML5 元素上](http://jsfiddle.net/jwCmU/ "演示")，但不要！

事件新的 html5 事件内联工作[http://www.w3schools.com/html5/html5_ref_eventattributes.asp](http://www.w3schools.com/html5/html5_ref_eventattributes.asp)

[HTML5 内联与 ​​HTML5 元素上的新 HTML5 事件](http://jsfiddle.net/3E5e8/ "演示")

# facebook-like - 管理员选项未显示在我的喜欢按钮旁边

> ID：12306551
> 
> 赞同：0
> 
> 时间：2012-09-06T18:51:04.580
> 
> 标签：facebook-like, admin, facebook-page

我有个问题。我在 FB 中创建了一个应用程序，然后使用该应用程序创建了一个赞按钮。FB 说当我登录时，我应该在我的网站上的我的喜欢按钮旁边看到一个管理员链接。

我在 meta 中设置了 fb:app_id 和 fb:admins，但我仍然没有看到链接。我需要它有两个原因。

一种是访问页面的管理员，这样我就可以为喜欢我的网站的人发送消息，我还想建立一个粉丝页面，一旦我可以根据 facebook 文档访问网站的管理员，我可以把它变成这样的粉丝页面（FB页面）不会失去喜欢。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:54:45.317

该功能已被弃用，Facebook 的开发人员网站上有一个[迁移指南](https://developers.facebook.com/docs/reference/plugins/like/migration/)，解释了如果您想保留该功能的一部分，如何将您的 OG 页面移动到常规页面

# wordpress - 将自定义字段添加到搜索和结果

> ID：12306553
> 
> 赞同：2
> 
> 时间：2012-09-06T18:51:09.873
> 
> 标签：wordpress

我正在使用插件“WP Search Suggest”在搜索字段中提出建议。现在，该插件运行良好，但它只建议和搜索标题。

我查看了插件，发现了这个：

```
 $query_args = apply_filters(
        'wpss_search_query_args',
        array(
            's'             =>  $s,
            'post_status'   =>  'publish',
            'post_type'     =>  'movie',
        ),
        $s
    );

    $query = new WP_Query( $query_args );

    if ( $query->posts ) {

        foreach ( $query->posts as $post ) {
            $results[] = $post->post_title;
        }

        $results = apply_filters(
            'wpss_search_results',
            $results,
            $query
        );

        echo join( $results, "\n" );

    } 
```

我尝试通过添加以下内容来添加对自定义字段的支持：

```
'meta_key'      =>  'somthing',
'meta_value'        =>  '$s' 
```

但我没有工作，也没有找到“回显”结果的方法，因为“$query->posts”数组不包含元键或值......

# java - 可以修改主线程的run方法吗

> ID：12306554
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:51:24.777
> 
> 标签：java

我很想知道是否可以像在其他线程中一样修改主线程的运行方法，我们重写运行方法并定义所需的行为。

我也可以知道我们在 main 方法中编写的代码是否真的被添加到主线程的 run 方法中，因为这是在主线程运行时执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:14:41.360

通常，main 方法在整个应用程序生命周期中都不会使用。您只需使用它来初始化和运行其他线程，然后让它终止：

```
class Main {
  public static void main(String[] args) {
    new firstThreadImplementation().start();
    // new secondThreadImplementation().start();
    new initGuiThread().start();
    // we are finished here and don't need this thread anymore
  }
} 
```

所以你可以直接控制`run()`启动线程的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:45:12.827

不，您不能覆盖用于执行您的`main()`方法的线程。该线程通过 JVM 魔法而存在，并且它的`run()`方法永远不会被调用（更准确地说，它的`start()`方法永远不会被调用；您可以在源代码中看到关于该效果的注释）。它的存在只是为了维护一个常规的线程模型（即，每个线程都可以调用`Thread.currentThread()`并取回一些东西）。

# actionscript-3 - as3 使用补间擦除淡入淡出 alpha

> ID：12306561
> 
> 赞同：2
> 
> 时间：2012-09-06T18:51:46.503
> 
> 标签：actionscript-3, flash, transition, alpha, tween

**是否可以使用 as3 tween 通过软擦除过渡淡化 alpha？**

我想也许[http://www.greensock.com](http://www.greensock.com)可能有答案，但我什么也没找到。我希望图像从一侧逐渐消失到另一侧。软溶解。

我认为也许可以使用蒙版，但我认为蒙版不接受 alpha，否则可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:12:59.983

实际上面具允许阿尔法。这是一种黑客行为。您应该尝试在代码中编写此代码：

```
maskMC.cacheAsBitmap = true;
objMC.cacheAsBitmap = true;
objMC.mask = maskMC; 
```

其中 objMC 是您的动画影片剪辑，而 maskMC 是您的蒙版，其中包含具有透明度的渐变形状。在此处查看示例：[链接](https://dl.dropbox.com/u/20444548/Stack%20Overflow/GradientMask.fla)

您也可以使用 Greensock 实现此效果。代码如下所示：

```
TweenLite.to(objMC, 1, {"alpha":0, "x":objMC.x + 10}); 
```

使用 TweenLite 时，您需要提供动画对象、动画持续时间和`Object`类的实例（这是我们在花括号之间编写的内容）。这个实例包含我们想要逐渐改变的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:58:38.667

您可以使用 ALPHA 混合模式来完成此操作。

制作一个具有渐变的形状，其 alpha 从完全变为无，然后将其设置为混合模式 ALPHA，将其放在与要遮罩的项目相同的容器中。

然后将容器 blendmode 设置为 LAYER

伪代码：

```
container.blendMode = BlendMode.LAYER;  //container holds both the mask and the thing you want masked
maskObj.blendMode = BlendMode.ALPHA;

drawMaskGradients(); 
```

这是我过去用来通过代码创建所述掩码的函数：（itemContainer 是我要掩码的对象）但是，您可以使用设计工具在 Flash IDE 中完成所有这些操作。

```
 softMaskSprite = new Sprite();

    this.blendMode  = BlendMode.LAYER;
    softMaskSprite.blendMode = BlendMode.ALPHA;
    softMaskSprite.mouseChildren = false;
    softMaskSprite.mouseEnabled = false;
    this.addChildAt(softMaskSprite,this.getChildIndex(itemContainer)+1);

    //Create Sides
    var top:Shape = new Shape();
    var matr:Matrix = new Matrix();
    matr.createGradientBox(areaWidth + (softMaskWidth * 2), softMaskWidth, 90 * (Math.PI / 180), 0, 0);

    top.graphics.beginGradientFill(GradientType.LINEAR, [0xFF0000, 0x0000FF], [0,1], [0,255], matr, SpreadMethod.PAD);  
    top.graphics.drawRect(0, 0, areaWidth + (softMaskWidth * 2), softMaskWidth);
    top.graphics.endFill();

    top.x = softMaskWidth * -1;
    top.y = softMaskWidth * -1;
    softMaskSprite.addChild(top);

    //BOTTOM
    var bottom:Shape = new Shape();
    matr = new Matrix();
    matr.createGradientBox(areaWidth + (softMaskWidth * 2), softMaskWidth, 90 * (Math.PI / 180), 0, 0);

    bottom.graphics.beginGradientFill(GradientType.LINEAR, [0xFF0000, 0x0000FF], [1,0], [0,255], matr, SpreadMethod.PAD);  
    bottom.graphics.drawRect(0, 0, areaWidth + (softMaskWidth * 2), softMaskWidth);
    bottom.graphics.endFill();

    bottom.y = areaHeight;
    bottom.x = softMaskWidth * -1;
    softMaskSprite.addChild(bottom); 
```

# operating-system - 如何深入学习操作系统并实现自己的操作系统

> ID：12306563
> 
> 赞同：6
> 
> 时间：2012-09-06T18:51:49.760
> 
> 标签：operating-system

我正在学习操作系统，它们的不同观点，例如不同的调度算法等。我的问题是：我可以制作自己的操作系统作为最后一年的项目吗？请推荐一些好的资源（即视频培训很受欢迎），这些资源可以帮助我理解并且主要使我能够开发至少一个小型操作系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:57:16.033

查看 Andrew Tanenbaum 的[“Operating Systems, Design & Implementation](http://www.pearsonhighered.com/educator/academic/product/0,,0131429388,00%2ben-USS_01DBC.html) and [Minix](http://www.minix3.org/) ”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:54:15.100

恐龙书（Silberschatz 的 OS 概念）是必不可少的。

大多数人不再从头开始开发自己的操作系统，因为系统集成（BIOS、硬件等）非常困难。大多数人最终都是从某种形式的 Linux 或 Unix 开始的。

如果您正在尝试学习操作系统概念，我建议您查看 OS/161 和 System/161。它们是在哈佛开始的项目，用于向本科生教授操作系统课程。它运行按比例缩小的 Unix，并包含所有基础知识，包括线程和进程、调度、同步原语、内存管理和文件系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T04:50:16.907

[Linux 系统编程：直接与内核和 C 库对话](https://rads.stackoverflow.com/amzn/click/com/0596009585)

这本书是为那些打算开始学习操作系统的人准备的，它告诉你操作系统的功能和编程方面，以保持它的趣味性。Andrew Tanenbaum 的“操作系统、设计与实施”是一本较难入门的书。

# c# - 使用应用程序访问令牌访问页面的流数据

> ID：12306564
> 
> 赞同：0
> 
> 时间：2012-09-06T18:51:56.097
> 
> 标签：c#, facebook, httpwebresponse

嗨，我正在为一家拥有多个官方 facebook 产品页面的公司构建应用程序。在应用程序中，我们希望在新闻提要中显示这些页面的所有官方页面帖子。如何使用应用程序访问令牌而不是以用户身份查询 fb？当我尝试以下查询时出现错误，说明需要授予读取流权限。

“查询多个 source_id 需要一个非零查看器，该查看器已授予 read_stream 权限”

```
string _requestURL = "https://api.facebook.com/method/fql.query?query=SELECT post_id, message, permalink, likes, actor_id, comments, created_time FROM stream WHERE source_id in (1,2,3, 4)  AND actor_id  in (1,2,3, 4) AND message != '' LIMIT 100&format=json&access_token=appID|AppSecret"; 
```

知道怎么做吗？

谢谢，

朗达

# ios - GameCenter - 每个级别都有一个排行榜

> ID：12306565
> 
> 赞同：0
> 
> 时间：2012-09-06T18:52:19.090
> 
> 标签：ios, game-center

在包含数十个级别（超过一百个）的游戏中，我希望显示/存储每个级别的最高分数。

我在[API 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/LeaderBoards/LeaderBoards.html#//apple_ref/doc/uid/TP40008304-CH6-SW13)中看到最多可以创建 25 个排行榜类别...

有没有办法实现这种逐级高分管理？使用一个带有特殊参数的排行榜来指示级别编号？或者有没有办法自动生成所有级别的排行榜？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T12:18:04.307

Game Center 排行榜系统显然不适合这种方法（每个级别一个排行榜）。

我认为这个想法是存储全局分数，例如每个难度级别都有一个排行榜。

我可能不得不重新设计我的评分系统以适应游戏中心的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T21:49:00.543

查看 GKScore 的上下文属性 - 这是一个 64 位无符号整数 - 这样您就可以为不同级别的上下文分配不同的值，并在您从排行榜获得分数时过滤该数据（这可能需要你可以使用自己的 UI 来显示高分，而不是通用的 GKLleaderboardViewController）——祝你好运，让我知道它是怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:03:33.600

您不能创建超过 25 个排行榜。但是您可以使用其他解决方案来执行此操作。

# php - 如何根据查询结果循环我的函数

> ID：12306567
> 
> 赞同：0
> 
> 时间：2012-09-06T18:52:41.480
> 
> 标签：php, mysql

我编写了一个生成随机 id 的函数`makeid();`只是为了确保 id 是唯一的，我有一个 SQL 语句来检查 id 是否已经存在。

```
$does_id_exist = mysql_query("SELECT COUNT(*) AS count FROM signups WHERE affid='$affid'");
if(mysql_num_rows($does_id_exist) == 1) 
  { 
  #loop function and perform query again
  }
else
  {
  #insert record
  } 
```

所以我在循环函数时遇到了麻烦。如何循环我的函数`makeid()`并执行`$does_id_exist`检查以确保每个函数`ID`都是唯一的。

--更新--只是为了澄清-我的代码制作了一个像`YES@281E`但在我将此 id 插入用户记录之前的 id。我只需要验证是否有任何其他用户已经拥有此 ID。如果另一个用户有这个 id 事件必须触发我的函数来创建一个新的 id 例如`WOW!29E3`并再次检查 sql/query 以确保没有其他用户有*那个 id*。如果失败则继续循环或结束，如果 id 可用则插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:57:31.990

您可以只在数据库表上使用主键，也可以像这样：

```
<?php
    // the id to insert
    $newId = null;

    // populate with results from a SELECT `aff_id` FROM `table`
    $currentIds = array(); 

    // prepopulate
    for( $i=0; $i<100000; $i++ )
    {
        $currentIds[] = "STRING_" + rand();
    }

    // generate at least one id
    do
    {
        $newId = "STRING_" + rand();
    }
    // while the id is taken (cached in $currentIds)
    while( in_array($newId, $currentIds) );

    // when we get here, we have an id that's not taken.
    echo $newId;    
?> 
```

输出：

> STRING_905649971（运行时间95ms）；

我绝对不建议重复运行查询。如果您的流量足够高，也许在您插入之前进行最后检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T19:02:08.867

不要这样做`COUNT(*)`，因为您不需要知道有多少行（它应该是 0 或 1，因为您需要唯一的 Id），所以即使 DB 找到您的行，它仍然会检查整个表的计数。你真的很关心你是否有 1 行，所以只需选择具有该 ID 的行，这就足够了。您还应该避免使用`rand()`- 如您所见，这无济于事，并且您无法预测在找到“空闲插槽”之前可以执行多少循环。使用可预测的东西，例如日期前缀或每天**递增的前缀。**任何可以帮助您缩小数据集的东西。但是现在（伪代码！）：

```
$id = null;
while( $id == null ) {
  $newId = 'prefix' . rand();

  mysql_query("SELECT `affid` FROM `signups` WHERE `affid`='${newId}'");
  if( mysql_num_rows() == 0) {
    $id = newId;
    break;
  } 
} 
```

确保你有数据库索引，以加快速度。

编辑：我确实同意任何缓存都有助于加快速度（您可以根据@Josh 示例轻松添加它），不过，我认为这是在错误的地方修复。如果可能，请重新考虑生成 ID 的方式。它实际上并不需要自动递增，而是比`rand()`对您有帮助的更可预测的东西。如果您的 ID 不需要很容易记住，并且将它们按顺序排列也没有任何安全问题，则可以使用基数不是 10 的数字（即使用 26 将使用所有数字 + 字母，因此您将以 结尾`PREFIX-AX3TK`，因此字符串为你想要，同时你可以很容易地快速生成下一个 Id

# html - 导航栏故障

> ID：12306572
> 
> 赞同：0
> 
> 时间：2012-09-06T18:52:51.650
> 
> 标签：html, css, nav

当我更改导航栏的分辨率时，它会出现故障。这是我的 HTML；

```
<!--Start header-->
    <div id="header">

        <div id="nav_header">
          <ul id="list-nav">
            <a href="index.htm" id="home">Troll Happy</a>
<li><a href="iphone.htm" id="fail">iPhone Fail</a></li>
  <li><a href="forever.htm" id="alone">Forever Alone</a></li>
  <li><a href="rage.htm" id="rage">Rage Comics</a></li>
  <li><a href="derphina.htm" id="Derp">Derpina</a></li>
  <li><a href="okay.htm" id="okay">Okay face</a></li>
  <li><a href="http://forums.trollhappy.co.uk/xenforo/forum/index.php" id="forums">Forums</a></li>
        </ul>
        </div>
    </div>
<!--End header--> 
```

还有我的 CSS；

```
 #header {
        height:66px;
        background-color:#000;
            position: absolute;
            width: 100%;
        left:0;
    }

#nav_header {
    height:50px;
    margin-left:100px;
}

ul#list-nav {
  list-style:none;
  margin:20px;
  padding:0;
}

ul#list-nav li {
  display:inline;
  font-family: Century Gothic, sans-serif;
  font-size:13px;
  font-weight:bold;
}

ul#list-nav li a {
  text-decoration:none;
  padding:15px 0;
  width:110px;
  color:#eee;
  float:left;
  text-align:center;
  border-right:1px solid #353535;
} 
```

你可以看到这里发生了什么；

trollhappy.co.uk

如您所见，如果您更改分辨率，导航栏就会出现故障！

再次感谢男孩和女孩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:29:46.317

您的`<li><a>`元素正在向左浮动，这意味着如果由于容器水平太小而无法全部容纳在一行中，它们将溢出容器。

为简单起见，您只想隐藏链接，而不是为较小的屏幕实现一些漂亮的优雅降级（只需确保它在 960 像素宽的浏览器窗口中看起来不错）。只需将`overflow: hidden;`样式应用于`#nav_header`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:40:48.377

```
 you just small mistakes, it follows;
   u remove the margin-left:100px, insted  margin:0px auto; and set width:840px;
   #nav_header {
    height: 50px;
    margin: 0 auto;
    width: 840px;
   }

   ok i understand the misstake, u set the body tag then work perfectly,,,, 

   body{
       margin:-18px 0px 0px 0px;
    } 

    ok friend on small changes do this,u add the min-width:1000px;

    #header {

   background-color: #000000;
   height: 70px;
   left: 0;
   min-width: 1000px;
   position: absolute;
   right: 0;
 } 
```

# javascript-events - 将文档实体传递给 JavaScript 函数

> ID：12306573
> 
> 赞同：0
> 
> 时间：2012-09-06T18:52:54.943
> 
> 标签：javascript-events

这是一个初级问题（我认为），不好意思在这里问。它可能已经被回答了，但我找不到我的搜索。

在最简单的形式中，有两个复选框，每个 CheckBox 都有一个与之关联的控件（例如，TextBox 或 DropDownList）。当 CheckBox 的选中状态发生变化时，必须启用或禁用关联的控件。

JavaScript 函数：

```
<script type="text/javascript:>
function enable(bValue, control)
{
   document.getElementByID(control).Enabled = bValue;
}
</script> 
```

在下面的 HTML 中，我将此函数称为事件过程，例如 enable(this.Checked, "expJob") 和 enable(this.Checked, "itemJob")：

```
<body>
    Billable? <asp:CheckBox ID="expBillable" runat="server" Checked="false" OnCheckedChanged="enable(this.Checked, "expJob");" />
    to <asp:DropDownList ID="expJob" runat="server" Enabled="true" />
    <br /><br />
    Billable? <asp:CheckBox ID="itemBillable" runat="server" Checked="false" OnCheckedChanged="enable(this.Checked, "itemJob");" />
    to <asp:DropDownList ID="itemJob" runat="server" Enabled="true" /> 
```

问题是，由于使用了引号，我无法在 HTML 中指定“expJob”参数。即使使用单引号也不起作用。

那么问题来了：这种方法行得通吗？什么是正确的语法？

编写和使用这样的函数的最佳方法是什么？我确信在必须遍历网格中的行时需要使用这种函数。

有趣的是，我看到的所有问题/答案都使用了控件的 disabled 属性。我只能使用 Enabled 属性。有人可以解释为什么，有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:00:17.573

1.  您必须使用单引号 ('itemJob')
2.  我认为 OnCheckChanged 是一个服务器事件。当你想使用它时，Asp.net 需要在后面的代码中有一个处理程序。这就是你收到错误的原因。当您想要触发客户端事件时，请找到正确的客户端事件。注意触发回发，但复选框的默认值无论如何都是“不自动回发”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-04T17:32:30.127

请注意，javascript 区分大小写，所以 `document.getElementById`好， `document.getElementByID`不好（注意大写的 ID 不好）

# django - django-rosetta 在 Chrome 中点击“保存并翻译下一个块”时不保存翻译

> ID：12306574
> 
> 赞同：1
> 
> 时间：2012-09-06T18:52:55.643
> 
> 标签：django, internationalization, django-admin, django-rosetta

`django-rosetta`在 Chrome 中点击“保存并翻译下一个块”时不会保存翻译。不过，它似乎在 Firefox 中运行良好。我尝试清除缓存，所以这似乎不是问题。

在 Chrome 上，输入翻译后的文本并点击“保存..”按钮后，我被重定向到主屏幕，而我的更改没有保存。

我更新到最新版本的 Rosetta，认为 Issue13 修复可以解决我的问题，但它没有。

我还确保我的 .po 和 .mo 文件具有 777 权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:43:17.097

好久不见，不知道能不能解决？

我有一个在 Lion 上运行 Django 1.4.2 和 Rosetta 0.6.8 的开发环境，它运行完美。`python manage.py runserver`我用命令设置它。

然后，当我想将它部署到我的 Ubuntu 12 服务器时，Rosetta 开始表现得很奇怪。我将 Nginx 安装为代理，并使用 wsgi 运行 apache。除此之外相同的版本。不仅没有保存翻译的字符串，而且导航变得绝对随机。不管我按下什么按钮，我都怀疑代理配置没有正确设置，因为我可以在我的开发人员本地运行它。

长话短说，我最终关闭了 nginx 和 apache，只使用内置运行 django，因此在我的终端中获得了 django 日志。它有很多错误，使服务器每隔几秒钟就会重新启动一次。这显然解释了应用程序有些不可靠的行为。我在生产中转储数据库并重新同步它。现在，当我`runserver`在生产中时，它的效果和我的开发中一样好。当我插入 apache 来完成这项工作时（暂时绕过 nginx），问题仍然存在，但不像以前那么糟糕。浏览器没有任何区别。

确实弹出的错误之一是这个

```
Unhandled exception in thread started by <bound method Command.inner_run of         <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1781710>>
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 50, inapport_excepthook
    if not enabled():
TypeError: 'NoneType' object is not callable 
```

仍然没有解决这个问题，但是当我这样做时会发布解决方案。

**编辑：** 划掉了良好的 ol´ apache wsgi 设置并改用 Gunicorn。现在工作得很好，不知道那是怎么回事，但无论如何我对新设置非常满意。这是一个很好的设置指南

[http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/](http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/)

希望这对将来的人有所帮助！

# ruby-on-rails - TODO 任务 Rails 项目规划

> ID：12306579
> 
> 赞同：1
> 
> 时间：2012-09-06T18:53:12.370
> 
> 标签：ruby-on-rails

我已经完成了 O'Really 的 Learning Rails 3，现在是时候在真实项目中试验知识了，我将部署到 Red Hat 的 OpenShift 平台。在我的笔记本电脑代码项目文件夹中搜索，我找到了一个简单的 TODO 任务管理器，我曾经用 C++ 编写过一次。因此，让该项目重新焕发生机是个好主意，这次是作为 Rails 中的 Web 任务管理服务，允许使用 OmniAuth 进行身份验证。

最初的 C++ 项目是从 OOP 的角度计划的。您可以创建一个带有当前 ID 号、文本字符串、日期和时间的“任务”对象。任务的每个部分都作为不同的 C++ 类。Eash one 在构造函数上包含了它的验证。然后将任务保存到 sqlite 或将它们导出为纯文本，您可以在应用程序上共享或再次阅读。

所以，回到正题，我正在尝试使用 MVC 将这个小应用程序改编为 Rails 中更复杂的东西。

我考虑过添加一个脚手架，它可以让表单填充任务的文本字段并将其传递给控制器​​。控制器将设置当前日期和时间，保存到数据库时默认设置 ID。验证应该在模型上进行，我将创建一个迁移以在该字段上构建一个表。由于我将使用 OmniAuth 添加多用户支持（因此每个用户都可以保存自己的任务），我应该创建一个包含用户信息的新数据库表。

但是我应该为每个用户创建一个新的任务表，然后将它们映射到用户表吗？或者只是创建一个任务表并将每个用户的任务放入其中，然后将所有任务映射到那里？

我想不出将用户任务保存到数据库的好处。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:08:22.397

这是假设一个用户可以有许多任务，但一个任务只能属于一个用户。

您将拥有一张`tasks`桌子并将所有用户的任务放在那里。

您需要在表 ( ) 中添加一`user_id`列并将以下内容添加到模型中 -`tasks``rails g migration add_user_id_to_tasks user_id:integer`

```
class Task < ActiveRecord::Base
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :tasks
end 
```

参考：[Rails Guide to ActiveRecord 关联](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:17:10.407

您的模型将如下所示：

```
class User < ActiveRecord::Base
  has_many :tasks
end
class Task < ActiveRecord::Base
  belongs_to :user
end 
```

您的表格将如下所示（以伪临时符号表示）：

```
Users table => id:integer, name:String
Tasks table => id:integer, task:Text, user_id:integer 
```

这有帮助吗？

# android - 从 Android 设备发送到服务器的文件大小合理

> ID：12306582
> 
> 赞同：0
> 
> 时间：2012-09-06T18:53:19.123
> 
> 标签：android, http

我知道这个问题没有具体的答案，但我相信其他开发人员的经验可能对社区有用。

我想从 Android 设备向服务器发送文件，因为该设备上的互联网连接不可靠且速度慢（在世界大部分地区）。

**我的问题**

我应该尝试可靠地从设备发送到服务器的文件的最大大小应该是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:39:06.043

使用[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)，

> 下载管理器是处理长时间运行的 HTTP 下载的系统服务。客户端可能会请求将 URI 下载到特定的目标文件。下载管理器将在后台进行下载，处理 HTTP 交互并在失败或跨连接更改和系统重新启动后重试下载。

我认为你应该更关心带宽的使用而不是可靠性。由于间歇性连接，短时间下载可能会失败或暂停/延迟。重要的是您从错误中恢复并向用户报告正在发生的事情的状态。

智能应用程序将具有“仅通过 wifi 下载”选项，默认情况下可能设置为 true。此外，“此应用程序传输大量数据”警告可能是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:07:31.443

我认为您的问题非常广泛，并且有几个参数会影响答案：

1）您的用户的平均互联网速度是多少？它变化很大（从 EDGE 到 4G，其速度可能有 100 到 1000 倍的差异）。

2) 您使用的会按兆字节收费吗？如果是这样，上传大量数据并不明智

3）您要发送什么类型的信息？例如，如果是用户输入的文本，很可能您根本不需要担心大小（因为用户将无法输入兆字节的文本）。如果是视频 - 您可能需要应用一些限制。

我的建议是 - 让用户决定。选择一些默认的最大大小（比如说 10Mb）。并使其可配置，因此如果用户尝试上传大于最大大小的文件，您将显示一些通知，表明它超过了最大大小并且用户可以更改它。

# java - 实现接口的枚举的 Java 参数和返回类型

> ID：12306584
> 
> 赞同：4
> 
> 时间：2012-09-06T18:53:22.493
> 
> 标签：java, interface, enums

经过大量搜索，我发现了很多与普通课程相关的问题，但没有一个与枚举真正相关。

这工作正常：

```
package list;

public interface Testing { 
    //treat as a tag interface.
} 
```

```
package list;

public class Foo implements Testing {
} 
```

```
package list;

import java.util.ArrayList;
import java.util.List;

public class Bar {
    public Bar(){
        List<Foo> myList = new ArrayList<Foo>();
        myList.add(new Foo());
        testList(myList);
        testMethod(new Foo());
    }

    public void testMethod(Testing myInstance){
        //do nothing
    }

    public <Testing> void testList(List<Testing> myList){
        //do nothing
    }
} 
```

但是，我的问题在于理解当我尝试用 `Enums` 而不是 做同样的事情时会发生什么 `Foo`

这里的例子是有一个接口定义，它被定义为接受一个接口参数，实际上，它是由一个实现接口的枚举实现的：

我有两个接口：

```
public interface MyEnumInterface {
  //implemented by Enums
} 
```

```
import java.util.List;

public interface SecondInterface {
    public MyEnumInterface testMe(String myString);
    public <MyEnumInterface> List<MyEnumInterface> testingList();
    public List <MyEnumInterface> enumTestOne(String anotherString);
    public List <MyEnumInterface> enumTestTwo(String anotherString);
} 
```

两个emum如下：

```
public enum MyEnum implements MyEnumInterface{
    VALUE_ONE,
    VALUE_TWO,
    VALUE_THREE;
} 
```

```
public enum MyEnum2 implements MyEnumInterface{
    VALUE_A,
} 
```

还有一个测试java类：

```
import java.util.ArrayList;
import java.util.List;

class MyClass implements SecondInterface{

    public MyClass(){
        single(testMe(""));
        enumTestOne("");
        enumTestTwo("");
    }
    public MyEnum testMe(String someParam){
            return MyEnum.VALUE_ONE;
    }

    public List<MyEnumInterface> enumTestOne(String anotherString) {
        List<MyEnum> returnL = new ArrayList<MyEnum>();
        returnL.add(MyEnum.VALUE_ONE);
        returnL.add(MyEnum.VALUE_THREE);
        return returnL;
    }

    public List<MyEnumInterface> enumTestTwo(String anotherString) {
        List<MyEnum2> returnL = new ArrayList<MyEnum2>();
        returnL.add(MyEnum2.VALUE_A);
        return returnL;
    }

    public List<MyEnum> testingList(){
        List<MyEnum> returnL = new ArrayList<MyEnum>();
        returnL.add(MyEnum.VALUE_ONE);
        returnL.add(MyEnum.VALUE_THREE);
        return returnL;
    }

    public void single(MyEnumInterface val){
        System.out.println("Value is " + val);
    }

    public static void main(String[] args){
        MyClass clazz = new MyClass();
    }
} 
```

我正在与 enumTestOne(..) 的返回类型编码为 List 但接口指定一个 List 的问题作斗争。当它是 Enum 'MyEnum' 的单个实例时，它工作正常，但是当它是一个值列表时，它似乎失败了：

> “错误：类 MyClass 中的方法列表不能应用于给定类型；必需：找到列表：列表原因：实际参数列表无法通过方法调用转换转换为列表”

我不确定解决这个问题的方法 - 我已经尝试添加您在上面看到的声明，以便它读取 `public <MyEnumInterface> List<MyEnumInterface> testingList();` 但是然后给我关于未经检查的演员的“警告”，同时继续失败

这一切都源于我对泛型以及它们与枚举的关系缺乏更深入的了解。

我已经看到了一些有趣的声明， `<? extends Enum<E> & SecondInterface>` 但这扩展了我的理解。请帮忙！

顺便说一句，我认为返回类之前的泛型声明用于指定“T”用于类型侵蚀目的是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:03:32.233

泛型是`invariant`自然的。所以`List<String>`不是的子类型`List<Object>`

您将不得不更改您的方法以包含列表`MyEnumInterface`而不是单独的枚举类。

```
public List<MyEnumInterface> enumTestOne(String anotherString) {
    List<MyEnumInterface> returnL = new ArrayList<MyEnumInterface>();//Change
    returnL.add(MyEnum.VALUE_ONE);
    returnL.add(MyEnum.VALUE_THREE);
    return returnL;
}

public List<MyEnumInterface> enumTestTwo(String anotherString) {
    List<MyEnumInterface> returnL = new ArrayList<MyEnumInterface>();//Change
    returnL.add(MyEnum2.VALUE_A);
    return returnL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:48:56.090

如果要允许实现类定义`MyEnumInterface`使用哪个实现，可以将接口方法的返回类型指定为 a `List`of any `MyEnumInterface`。

```
public List<? extends MyEnumInterface> enumTestOne(String anotherString);
public List<? extends MyEnumInterface> enumTestTwo(String anotherString); 
```

然后这些方法的实现可以定义具体的返回类型。

```
public List<MyEnum> enumTestOne(String anotherString) {
    List<MyEnum> returnL = new ArrayList<MyEnum>();
    returnL.add(MyEnum.VALUE_ONE);
    returnL.add(MyEnum.VALUE_THREE);
    return returnL;
}

public List<MyEnum2> enumTestTwo(String anotherString) {
    List<MyEnum2> returnL = new ArrayList<MyEnum2>();
    returnL.add(MyEnum2.VALUE_A);
    return returnL;
} 
```

顺便说一句，您可以在“反向”中使用`super`. 这指定可以使用作为给定类型的超类型的任何类型。

```
public void addToList(List<? super MyEnum> list) {
    list.add(MyEnum.VALUE_ONE);
}

addToList(new ArrayList<MyEnum>());
addToList(new ArrayList<MyEnumInterface>()); 
```

### 也可以看看

> [Java 泛型（通配符）](https://stackoverflow.com/questions/252055/java-generics-wildcards)
> 
> [为什么 SomeClass 不等同于 Java 泛型类型中的 SomeClass？](https://stackoverflow.com/questions/251298/why-is-someclass-super-t-not-equivalent-to-someclasst-in-java-generic-types)

# asp.net - 带有模拟的 ASP.NET 远程文件访问

> ID：12306587
> 
> 赞同：1
> 
> 时间：2012-09-06T18:53:33.440
> 
> 标签：asp.net, file, share

我有一个 ASP.NET Web 应用程序试图读取与模拟用户的远程共享。具体来说，我正在尝试使用以下代码来读取远程共享上的目录..

```
DirectoryInfo rootDir = new DirectoryInfo(strPath);

foreach (DirectoryInfo dir in rootDir.EnumerateDirectories())
{
    TreeNode folderNode = new TreeNode(dir.Name, dir.FullName);
    folderNode.PopulateOnDemand = true;
    folderNode.ImageUrl = "~/img/Folder.png";
    nodeList.Add(folderNode);
} 
```

当网页运行此代码时，我收到以下错误消息...

> 拒绝访问路径“\remoteserver\remoteshare\”。

这是我的 web.config ...

```
<authentication mode="Windows"/>
<identity impersonate="true" />
<authorization>
  <deny users="?"/>
</authorization> 
```

当我登录网站时，我知道模拟正在工作，因为我可以执行 HttpContext.Current.User.Identity.Name 并查看我的用户名。我在 IIS 7.5 下的域上运行此应用程序。我也知道这不可能是 Kerberos“双跳”问题，因为我可以连接到远程 SQL 服务器（从 Web 服务器）并通过 Windows Authenticated 凭据并返回查询结果。

我在 Web 服务器上使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来确定哪些凭据被传递到远程共享。当我查看显示 ACCESS DENIED 的捕获时，它给了我这个描述......

> 所需访问权限：读取数据/列表目录、同步、处置：打开、选项：目录、同步 IO 非警报、打开以供备份、属性：不适用、共享模式：读取、写入、删除、分配大小：不适用、模拟: 域\用户名

其中 DOMAIN\username 是我从 Web 服务器模拟的用户名。

Process Monitor 还显示 NT AUTHORITY\NETWORK SERVICE 是发出请求的 Web 服务器上的用户，这让我认为 Web 服务器实际上不是通过模拟用户来读取远程文件共享。这几乎就像专门针对远程文件共享访问存在“双跳”问题一样。

我还将 Web 服务器配置为“信任此计算机以委托给任何服务（仅限 Kerberos）”。同样，如果我可以从 Web 服务器访问远程 SQL 服务器，这不会是双跳问题，或者可以吗？任何帮助或指示将不胜感激，我花了 2 天时间寻找可能的解决方案，但没有任何效果。

# javascript - Twitter 嵌入式时间线小部件

> ID：12306588
> 
> 赞同：4
> 
> 时间：2012-09-06T18:53:39.220
> 
> 标签：javascript, css, twitter

我继续下载[http://platform.twitter.com/widgets.js](http://platform.twitter.com/widgets.js)

和[http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css](http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css)

嵌入式时间线小部件使用的两个文件。

我要做的就是自定义小部件的 css，并且由于 twitter 只为您提供一些设计选项，如链接颜色和深色/浅色主题，我认为下载文件并自己修改它们会更容易。

唯一的问题是，我在尝试将***widgets.js***中的 css 文件位置指向我的 webapp 上的副本时遇到了一些困难

widget.js 中的一行，在***twitters***服务器上定位 css 文件，它与一些变量绑定在一起，这些变量结合了前缀***platform.twitter.com/***值或其他东西

```
provide("tfw/assets",...{"default":"embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css", 
```

我不需要对***widget.js***进行多少编辑，但我猜它只有几行？

如果任何精通 javascript 的人不介意看一下并告诉我**“不值得努力”**或**“很简单，只需将 __ 更改为 __”**，请告诉我。

> ***widgets.js***是上面的第一个超链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:13:48.053

（请参阅下面的编辑以获得更好的解决方案）这似乎对我有用，并且不需要太多时间来实施：

在 widgets.js 中，找到

```
function Z(a,b,c) 
```

在函数 Z 中更改它：

```
d.href=twttr.widgets.config.assetUrl()+"/"+b 
```

像这样：

```
d.href=b 
```

assetUrl 只是获取文件（例如 CSS 文件）的基本 URL，该文件位于 Twitter 拥有的域中。b 将是您在整个 JS 中指定的路径（例如 embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css ）。将所有 CSS（如timeline.xyz.default.css）上传到您想要的位置，然后您可以自定义这些文件并将它们保存在您自己的服务器上。您无法通过简单地将规则添加到服务器上的 CSS 文件来修改 CSS，因为 Twitter 提要位于来自不同域的 iframe 中。不允许使用这种类型的源（即不是来自您自己的域）修改 iframe 中的 CSS，以防止劫持类型的问题，但如果 iframe 引用您自己服务器上的 CSS，那么您可以修改内容。

您可能还需要检查其他一些内容，以确保您拥有所有必需的文件。您还应该获得在 Twitter CSS 文件中引用的 sprite.png。我能够以这种方式自定义 CSS，并且效果很好。

**编辑：**

我在 IE7/6 中的上述解决方案和 Jelly Bean 中的 Chrome 中遇到了问题，因此找到了一个更好的解决方案，它可以让您将自己的自定义 CSS 文件注入 iframe，同时在自己的域中坚持使用 Twitter 的所有 CSS。我从一个新的 widgets.js 中添加了以下内容：

```
;d=c.createElement("link"),
d.id="custom-css-1",
d.rel="stylesheet",
d.type="text/css",
d.href="http://mydomain.com/css/timeline.custom.css";
c.getElementsByTagName("head")[0].appendChild(d); 
```

之后立马

```
c.getElementsByTagName("head")[0].appendChild(d) 
```

在以 widgets.js 开头的行上

```
provide("tfw/widget/timeline" 
```

（再次在函数 Z 中）这似乎工作得更好，您所需要的只是[http://platform.twitter.com/widgets.js](http://platform.twitter.com/widgets.js)上的 widgets.js 的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T17:41:34.557

看起来如果我下载 wigdet.js 和 custom.css 然后小部件不会拾取 data-chrome="transparent"

我下载 [了 http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css](http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css)

将其重命名为timeline.custom.css

更改 wigdet.js 链接到我的 css

```
function b(e,t,n){
            var r;
            n=n||document;
            if(n.getElementById(e))return;
            r=n.createElement("link"),
            r.id=e,r.rel="stylesheet",
            r.type="text/css",
            r.href= "../css/timeline.custom.css",
            n.getElementsByTagName("head")[0].appendChild(r)
        } 
```

指向css的链接是否正确？还是 twitter 使用最新版本的 css？ [http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css](http://platform.twitter.com/embed/timeline.4d0955f67d15e8ef0601086ae2d5fcd0.default.css)

如何制作小部件以拾取 data-chrome="transparent"

我使用了小部件脚本

```
<a class="twitter-timeline"    
data-dnt="true"  
href="https://twitter.com/search?q=%23My_hush"                          
data-tweet-limit="1"
data-theme="dark" 
data-screen-name="some_name"                        
data-chrome="noscrollbar noheader transparent noborders nofooter"                        
      data-widget-id="My_id">
      Tweets about "#My_hush"</a> 
```

# ios - IOS 使用 CLLocationManager 从 lat/long 获取位置

> ID：12306590
> 
> 赞同：0
> 
> 时间：2012-09-06T18:53:58.110
> 
> 标签：ios, cllocationmanager

我正在尝试从我在应用程序中获得的 Lat/Long 值反转地理编码位置，我想从这个坐标中找到城市名称、国家名称和 ISO。

我目前正在使用 CLLocationManager 通过以下代码获取实际位置信息：

```
//Auto geolocation and find city/country
locationManager.delegate=self;

//Get user location
[locationManager startUpdatingLocation];
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     locatedAtcountry = placemark.country;
     locatedAtcity = placemark.locality;
     locatedAtisocountry = placemark.ISOcountryCode;

     //Print the location to console
     NSLog(@"Estas en %@",locatedAtcountry);
     NSLog(@"Estas en %@",locatedAtcity);
     NSLog(@"Estas en %@",locatedAtisocountry);

     [cityLabel setText:[NSString stringWithFormat:@"%@,",locatedAtcity]];
     [locationLabel setText:[NSString stringWithFormat:@"%@",locatedAtcountry]];

     //Set the label text to current location
     //[locationLabel setText:locatedAt];

 }]; 
```

它工作得很好，但是，可以从我已经保存在设备中的 Long/Lat 值做同样的事情，而不是像实际代码中的当前位置？

**更新和解决方案：**

**感谢 Mark**的回答，我终于使用以下代码从保存的坐标中获取信息：

```
 CLLocation *location = [[CLLocation alloc] initWithLatitude:37.78583400 longitude:-122.40641700];

[self.geoCoder reverseGeocodeLocation: location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     locatedAtcountry = placemark.country;
     locatedAtcity = placemark.locality;
     locatedAtisocountry = placemark.ISOcountryCode;

     //Print the location to console
     NSLog(@"Estas en %@",locatedAtcountry);
     NSLog(@"Estas en %@",locatedAtcity);
     NSLog(@"Estas en %@",locatedAtisocountry);

     [cityLabel setText:[NSString stringWithFormat:@"%@",locatedAtcity]];
     [locationLabel setText:[NSString stringWithFormat:@"%@",locatedAtcountry]];

     //Set the label text to current location
     //[locationLabel setText:locatedAt];

 }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:04:42.277

是的。使用保存的纬度/经度值的方法创建一个`CLLocation`对象`initWithLatitude:longitude:`，并将其传递给`reverseGeocodeLocation:`.

我很惊讶您说这是有效的（尽管，如果您在模拟器上，无论如何都会模拟位置服务，这可能是原因），因为当您调用时`startUpdatingLocation`，您的 CLLocationManagerDelegate 方法的实现`locationManager:didUpdateToLocation:fromLocation:`会被调用。（你实现了这些对吗？）只有当这个（和其他）委托方法被调用时，你才能确定你已经成功地确定了用户的位置。

您可能需要阅读Apple 记录的`CLLocationManagerDelegate`协议和[定位服务最佳实践。](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497-CH1-SW1)

# c - 使用 scanf() 读取不超过大小的字符串

> ID：12306591
> 
> 赞同：46
> 
> 时间：2012-09-06T18:54:05.800
> 
> 标签：c, string, scanf, format-specifiers

编辑：对于我的班级，我必须使用`scanf`. 所以推荐其他输入方式不是我正在寻找的解决方案（如果有涉及scanf的解决方案）。

* * *

如果我正在阅读一个小项目（例如游戏）的用户输入。可以说我问`would you like to play?` 这会接受一个`yes`或`no`答案。所以我写了一些这样的简单代码：

```
#include <stdio.h>

int main(void)
{
     char string[3]; //The max number of letters for "yes".

     printf("Would you like to play?");
     scanf("%s", string);
} 
```

所以这段代码应该只是要求他们输入`yes`or `no`。我正在将我的长度设置`char array`为 size `3`。这样它就足够大了`yes`，也可以容纳`no`。但是，如果有人输入无效输入，例如`yesss`，我知道如何在之后比较字符串以处理此类事件，但这不会在技术上/可能覆盖我已声明的其他局部变量，因为它会延伸到我的数组长度之外? 如果是这样，有没有办法处理这个限制3个输入字符或什么？如果不是，为什么/如何知道只输入 3 的大小？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-06T18:56:25.490

您的数组需要能够容纳四个`char`s，因为它还必须包含 0 终止符。在固定的情况下，在格式中指定最大长度，

```
scanf("%3s", string); 
```

确保`scanf`读取不超过 3 个字符。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-16T06:27:28.813

最安全的方法是使用

```
fgets(string, 4, stdin); 
```

在这里您最多可以存储 3 个字符，包括为`NULL`( `'\0'`) 字符保留的 1 个空格。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-06-20T21:09:22.400

您应该使用*宽度*修饰符[`scanf()`](http://www.cplusplus.com/reference/cstdio/scanf/)并将其设置为*比*字符串的大小小一，以确保存在用于`NULL`终止符的空间。

所以，如果你想存储“是”，你首先需要一个比你拥有的更大的数组；一个大小为 4、3 个字符加 1 个用于空终止符。此外，您应该指示`scanf()`读取不超过*size - 1 个*字符，其中 size 是数组的长度，因此在这种情况下为 3，如下所示：

```
#include <stdio.h>

int main(void)
{
     char string[4];
     scanf("%3s", string);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T19:00:49.157

[http://www.cplusplus.com/reference/clibrary/cstdio/scanf/](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)

使用“宽度”修饰符；

```
%[*][width][modifiers]type 
```

# web-services - AWS S3 的动态使用

> ID：12306592
> 
> 赞同：2
> 
> 时间：2012-09-06T18:54:05.893
> 
> 标签：web-services, amazon-s3, amazon-ec2, amazon-web-services

我试图探索 AWS S3，我发现我们可以存储数据并有一个可以在网站上使用的文件的 URL，但我的目的是将文件存储在 S3 上，并让我网站的用户发布和检索文件到/来自 S3 没有我的干预。我正在尝试将我的服务器和 JSP/Servlets 页面放在运行 Tomcat（和 MySQL 服务器）的 EC2 上。这可能吗？如果可以，我该如何实现。

谢谢，标清

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:47:11.707

是的，这是可能的。这个问题的完整答案相当于一次咨询演出，但一些资源应该让你开始：

*   [S3 API](http://docs.amazonwebservices.com/AmazonS3/latest/API/Welcome.html)
*   [适用于 Web 层的 Elastic Beanstalk](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/Welcome.html)
*   [用于 MySQL 的 Amazon RDS](http://docs.amazonwebservices.com/AmazonRDS/latest/GettingStartedGuide/Welcome.html)

# entity-framework - 使用 EF 更新通用存储库的问题

> ID：12306602
> 
> 赞同：0
> 
> 时间：2012-09-06T18:54:48.797
> 
> 标签：entity-framework, repository-pattern

我已经创建了通用存储库，并且我有两个需要在事务中更新的实体。这就是我在做什么..

```
ProductOrganizationEntity poDataContext= new ProductOrganizationEntity();
IRepository<tblProductInfo> productRepo = new GenericRepository<ProductOrganizationEntity, tblConfirmation>(poDataContext); 
```

导致问题的代码就是这个。

```
 using (TransactionScope txScope = new TransactionScope())
 {
                    productRepo.Attach(productEntity);
                    productRepo.SaveChanges();
                    new ProductLocation().SaveLocation(productEntity.Locations, productEntity.productCode);
                    txScope.Complete();
 } 
```

**productRepo.SaveChanges();** 这就是它给我带来错误的地方。错误是

```
The operation could not be performed because OLE DB provider "SQLNCLI10" for linked server "Venus" was unable to begin a distributed transaction. 
```

（我们确实有名为 Venus 的服务器，但它在这些事务中根本无法访问。其次，正如我所说，这在没有事务块的情况下工作）。

如果从事务块中取出，这段代码可以正常工作。

ProductLocation.SaveLocation 正在为 Location 创建存储库。这是保存位置的代码。

```
IRepository<LocationInfo> locRepo= new GenericRepository<ProductOrganizationEntity, LocationInfo>(new ProductOrganizationEntity());

 if (loc.locID <= 0) // This is a new Location to be added.
      locRepo.Add(locEntity);
 else
     locRepo.Attach(siteToAdd);

 locRepo.SaveChanges(); 
```

这是我在我的通用存储库中为这些方法所做的

```
 public void Attach(TEntity entity)
    {
        if (entity == null)
            throw new ArgumentException("Update : Supplied Entity is Null.");

        _currentDbSet.Add(entity);
        System.Data.Entity.Infrastructure.DbEntityEntry entry = _dataContext.Entry(entity);
        entry.State = System.Data.EntityState.Modified;
    } 
```

这就是我在通用存储库中 SaveChanges 中的内容。

```
 public virtual void SaveChanges()
    {
        if (_dataContext == null)
            throw new Exception("SaveChanges: DataContext is not initialized.");

        _dataContext.SaveChanges();
    } 
```

我在这里做错了什么。

我很感激任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:58:36.507

您的服务器可能在数据库级别链接到另一个 SQL 服务器。

也许看看这个：http: [//msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

必须承认我从未使用过链接服务器（至少现在还没有），但是在错误中看到“链接服务器”让我想到了这一点。

# java - 变量可能已经被赋值

> ID：12306608
> 
> 赞同：0
> 
> 时间：2012-09-06T18:55:07.003
> 
> 标签：java, constructor, constructor-chaining, variable-initialization

以下代码有错误：

```
class A
{

  private final String val;

  public A(){
    this.val = null;
  }

  public A(String val){
    this();
    this.val = val;
  }
} 
```

错误是“可能已经分配了变量 val

是否有解决此错误的方法，而无需重新编写默认构造函数中可能存在的任何代码？这是一个最小的工作示例；如果您问自己“默认构造函数中有哪些代码”，请记住，一个真实的示例可能包含大量您不想在其他构造函数中重复的代码（分配其他最终变量等）。

还请记住，这是一个最小的例子，同样的问题存在于大量的构造函数中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:55:07.003

你在错误的方向链接。我也花了一段时间才弄清楚，但是像这样改变你的例子：

```
class A
{

  private final String val;

  public A(){
    this(null);
  }

  public A(String val){
    this.val = val;
  }
} 
```

# c - C stdin 无限读取文件

> ID：12306610
> 
> 赞同：0
> 
> 时间：2012-09-06T18:55:07.900
> 
> 标签：c, stdin, infinite

我有一个需要从标准输入读取输入的基本 C 程序。首先，它通过使用从输入文件中读取

```
./Program <input 
```

然后它循环读取，直到没有更多

```
while(scanf("%s",command)!=EOF){
    printf("%s\n",command);
} 
```

之后我需要再次从键盘读取，但它会继续无限地垃圾邮件从我的输入文件中读取最后一行，而不是让我使用我的键盘进行输入。

```
 while(1){

 scanf("%s",command);
 if(!strcasecmp(command,"exit"))
  exitProg();
 else if(!strcasecmp(command,"help"))
  helpMess();
 else
  printf("Command \"%s\" not recognized, use command \"help\" for a list.\n",command);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:02:50.463

阅读[文档`scanf`](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)，特别是关于返回值的部分，摘录如下：

> # 返回值
> 
> 成功时，该函数返回成功读取的项目数。如果发生匹配失败，此计数可以匹配预期的读数数量或更少，甚至为零。如果在成功读取任何数据之前输入失败，则返回 EOF。

您遇到的问题是，一旦文件用完数据，程序的标准输入不会恢复到控制终端，它会停留在空文件的末尾。您的 scanf 呼叫静默失败，保留`command`未修改的内容。如果您希望能够从两者中读取，则需要找到另一种处理方式。

您的 shell 可能支持此功能。

# php - 使用与帐户地址不同的送货地址下订单

> ID：12306612
> 
> 赞同：0
> 
> 时间：2012-09-06T18:55:21.013
> 
> 标签：php, ebay-api

我正在尝试基于他们的 API 构建一些 eBay 应用程序，但我找不到如何：

1.  使用 API 注册新用户

2.  使用与 eBay API 帐户中的地址不同的送货地址下订单

你能指点我在哪里找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:39:13.927

**1)**我不认为 Ebay 允许您通过 API 注册新用户。或者至少交易 API 不能。浏览此[文档和工具](https://www.x.com/developers/ebay/documentation-tools)，也未提及此类功能

**2）**这可能是可行的。查看[XML 流教程：购买商品](http://developer.ebay.com/Devzone/xml/docs/HowTo/XML_ListingAndSelling/ListingAndSelling_buying.html)和[XML 流教程：完成销售](http://developer.ebay.com/Devzone/xml/docs/HowTo/XML_ListingAndSelling/ListingAndSelling_completingSale.html)。看`PlaceOffer`，，，。`GetItemTransactions`_`CompleteSale`

**但**请注意*第 5 步*：

> Bountiful Buyer 对 Magical Bookseller 的回应感到满意，并继续付款。此步骤不涉及 eBay Trading API。例如，它可以通过 PayPal API 或通过向卖家发送纸质支票来执行。有关 PayPal API 的更多信息，请参阅交易 API 指南中的“将 PayPal 与您的 eBay 应用程序集成”。

# javascript - 试图将可移动 div 之外的所有内容涂黑

> ID：12306615
> 
> 赞同：7
> 
> 时间：2012-09-06T18:55:36.907
> 
> 标签：javascript, jquery, css

我写了一个悬停缩放插件，我试图弄清楚如何使悬停缩放框之外的所有内容变暗，并使缩放框本身透明，但是我很难弄清楚我需要做什么它。我使用不透明度吗？我使用背景图片吗？

现在它只是在一个较深的黑色不透明度背景上显示一个白色的 0.5 不透明度，但我有点挠头试图弄清楚这一点。任何建议都会非常有帮助。

我正在尝试做的事情：

![在此处输入图像描述](../Images/2bd4cb67a546f20fbd6cd3e59670f8ef.png)

演示：[jsfiddle](http://jsfiddle.net/someprimetime/9bsmt/46)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:12:38.900

这是一个解决方案的示例，但它需要您进行一些更改。

如果您将缩放正方形设置为具有与基础图像相同的背景图像，并通过 css 将其背景位置调整为相对于原始图像的位置的负值...我是否正确解释了这一点？

[http://jsfiddle.net/moopet/Be9AA/](http://jsfiddle.net/moopet/Be9AA/)

重要的部分是

```
var left = Math.min(Math.max(relX - 100, 0), $origImg.width() - $zoomBox.width()),
    top = Math.min(Math.max(relY  - 100, 0), $origImg.height() - $zoomBox.height());

$zoomBox.css({
    left: left,
    top: top
});

$zoomBox.css({ backgroundPosition: (-left) + "px " + (-top) + "px" }); 
```

而且我已经在 CSS 中为小提琴设置了缩放元素的背景，但是如果您需要为多个图像执行此操作，您可以通过复制`src`属性在 JS 中执行此操作。

# php - 在 PHP 中使用 if 语句和 $GET 的正确方法

> ID：12306621
> 
> 赞同：1
> 
> 时间：2012-09-06T18:56:14.787
> 
> 标签：php, html, sql-server, if-statement

我对 PHP 相当陌生，并且正在制作一个基本的 CRUD 样式管理系统。我有一个更新页面，它显示新闻表中的数据，并用它填充表单。当前图片 ?(reference) 被拉出并显示在表单上。但是，如果用户想要更改图片，他们可以按“删除”按钮，然后我编写了一些 PHP 来显示上传按钮，将数据库中的图像值设置为 null 并隐藏删除按钮，允许用户上传新图片。

删除按钮仅从数据库中删除图片的引用（路径），它不会删除实际图片。

这是显示图像和删除按钮的 HTML 控件。它还显示了删除按钮的工作原理：

```
 <td align="right">Image 1:</td>
 <td align="left"><img src="uploads/newsimages/<?php echo $row["Image"]; ?>" width="230" border="0">&nbsp;<a href="UpdateNews.php?change=imagex&cid=<?php echo $row["NewsID"]; ?>">delete</a></td> 
```

如您所见，单击它会设置 change=imagex 和 cid= 当前新闻 id。

然后我写了一个 if 语句，但它似乎不仅仅在单击删除按钮**时才被激活。**因为我总是收到“cid”未定义的错误。如下：

```
<?php
if (isset($_GET['change'] = "image1") {
    $query = "UPDATE  Table_Name SET Image = '' WHERE NewsID =".$_GET['cid']." ";
}

?> 
```

我很确定我缺乏 PHP 知识让我失望，我试图以错误的方式解决这个问题，因为但是我更改了 if 语句，它总是给我一个错误。首先它是**cid**未定义，所以我更改为**id**但我已经将它用于其他东西，另一个查询/函数。我希望一切都有意义，谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:58:34.563

您缺少括号 + 您必须单独指定：

```
if (isset($_GET['change'] = "image1") { 
```

改成：

```
if (isset($_GET['change']) && $_GET['change'] == "image1") { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:44:02.463

还有一些需要考虑的事情：

1) 不要在 mysql 查询中直接使用来自 $_GET 的未经处理的值

```
WHERE NewsID =".$_GET['cid']." 
```

很容易通过一些时髦的 sql 注入来利用它（参见[http://xkcd.com/327/](http://xkcd.com/327/)）。

如果您使用 cid 的数值，则应将 $_GET 值转换为整数以防止 sql 注入：

```
$cid = (int)$_GET['cid];
$query = '(...)WHERE NewsID = '.$cid.' limit 1'; 
```

甚至更好：

```
$cid = (int)(array_key_exists('cid', $_GET) ? $_GET['cid'] : 0);
if ($cid) {
  $query = (...)
} 
```

如果您需要在不同的地方进行这种清理，您应该考虑为其编写一个辅助函数以保持您的代码可读性。

2) 不要使用 GET 请求来更改服务器上的数据

想象一个 google bot 浏览您的网站并跟踪您用来删除图像的所有链接。其他场景涉及用户的浏览器预取插件（例如 Fasterfox）。此外，GET 请求可能会被代理和浏览器缓存，这样如果您单击链接，请求就不会到达服务器。

HTTP 规范附带了许多请求方法，最重要的是：

*   `GET`从服务器获取内容
*   `PUT`在服务器上存储新信息
*   `POST`更新服务器上的现有信息

要更新您的新闻记录（通过删除图像），适当的方法是`POST`. 要发送 POST 请求，您可以使用`<form method="POST">`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:58:26.390

试试这个

```
<?php
if (isset($_GET['change']) && $_GET['change'] == "image1") {
    $query = "UPDATE  Table_Name SET Image = '' WHERE NewsID =".$_GET['cid']." ";
}

?> 
```

# scala - 使用 Scala Dispatch 发送证书文件

> ID：12306623
> 
> 赞同：5
> 
> 时间：2012-09-06T18:56:24.113
> 
> 标签：scala, scala-dispatch

我需要能够发送证书文件（我认为是 .pem），并使用 scala 和调度进行获取请求。

你是怎样做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T09:53:38.550

基于@sbridges 示例中的Java 代码，我使用dispatch 提出了以下Scala 代码。它创建一个自定义 SSL 上下文，其中包含您提供的证书（并且仅包含那些证书；在验证远程主机时，此代码不使用受信任的根证书的默认存储）。

```
 class SslAuthenticatingHttp(certData: SslCertificateData) extends Http {
      override val client = new AsyncHttpClient(
        (new AsyncHttpClientConfig.Builder).setSSLContext(buildSslContext(certData)).build
      )

      private def buildSslContext(certData: SslCertificateData): SSLContext = {
        import certData._

        val clientCertStore = loadKeyStore(clientCertificateData, clientCertificatePassword)
        val rootCertStore = loadKeyStore(rootCertificateData, rootCertificatePassword)

        val keyManagerFactory = KeyManagerFactory.getInstance("SunX509")
        keyManagerFactory.init(clientCertStore, clientCertificatePassword.toCharArray)
        val keyManagers = keyManagerFactory.getKeyManagers()

        val trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm())
        trustManagerFactory.init(rootCertStore)
        val trustManagers = trustManagerFactory.getTrustManagers()

        val context = SSLContext.getInstance("TLS")
        context.init(keyManagers, trustManagers, null)

        context
      }

      private def loadKeyStore(keyStoreData: Array[Byte], password: String): KeyStore = {
        val store = KeyStore.getInstance(KeyStore.getDefaultType)
        store.load(new ByteArrayInputStream(keyStoreData), password.toCharArray)
        store
      }
    }

    case class SslCertificateData (
      clientCertificateData: Array[Byte],
      clientCertificatePassword: String,
      rootCertificateData: Array[Byte],
      rootCertificatePassword: String) 
```

这将用于：

```
 val certificateData = SslCertificateData(/* bytes from .jks file for client cert here */, "secret!",
                                             /* bytes from .jks file for root cert here */, "also secret!")
    val http = new SslAuthenticatingHttp(certificateData)
    val page = http(req OK as.String)
    println(page()) 
```

请注意，这会将证书数据保存在内存中，这不是最安全的方法，并且会不必要地消耗内存。在许多情况下，将 InputStream 或文件名存储在 SslCertificateData 案例类中可能更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:22:26.833

我假设您想使用客户端证书执行 https。我认为这需要在 jvm 级别设置，这里有一个很好的解释[如何](https://stackoverflow.com/questions/1666052/java-https-client-certificate-authentication)做到这一点。

似乎有一种方法可以直接用 ning 来做，正如[这里](https://groups.google.com/d/msg/asynchttpclient/17YdwAMHYSM/ubAxqsfOBe4J)所解释的，代码复制如下，

```
// read in PEM file and parse with commons-ssl PKCS8Key
// (ca.juliusdavies:not-yet-commons-ssl:0.3.11)
RandomAccessFile in = null;
byte[] b = new byte[(int) certFile.length()];
in = new RandomAccessFile( certFile, "r" );
in.readFully( b );
char[] password = hints.get( "password" ).toString().toCharArray();
PKCS8Key key = new PKCS8Key( b, password );

// create empty key store
store = KeyStore.getInstance( KeyStore.getDefaultType() );
store.load( null, password );

// cert chain is not important if you override the default KeyManager and/or
// TrustManager implementation, IIRC
store.setKeyEntry( alias, key.getPrivateKey(), password, new DefaultCertificate[0] );

// initialize key and trust managers -> default behavior
KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance( "SunX509" );

// password for key and store have to be the same IIRC
keyManagerFactory.init( store, password );
KeyManager[] keyManagers = keyManagerFactory.getKeyManagers();

TrustManagerFactory tmf = TrustManagerFactory.getInstance( TrustManagerFactory.getDefaultAlgorithm() );
tmf.init( store );
TrustManager[] trustManagers = tmf.getTrustManagers();

// override key and trust managers with desired behavior - for example
// * 'trust everything the server gives us' -> TrustManager#checkServerTrusted
// * 'always return a preset alias to use for auth' -> X509ExtendedKeyManager#chooseClientAlias, X509ExtendedKeyManager#chooseEngineClientAlias
for ( int i = 0; i < keyManagers.length; i++ )
{
    if ( keyManagers[i] instanceof X509ExtendedKeyManager )
    {
    AHCKeyManager ahcKeyManager = new AHCKeyManager( (X509ExtendedKeyManager) keyManagers[i] );
    keyManagers[i] = ahcKeyManager;
    }
}

for ( int i = 0; i < trustManagers.length; i++ )
{
    if ( tm instanceof X509TrustManager )
    {
    AHCTrustManager ahcTrustManager = new AHCTrustManager( manager, (X509TrustManager) trustManagers[i] );
    trustManagers[i] = ahcTrustManager;
    }
}

// construct SSLContext and feed to AHC config
SSLContext context = SSLContext.getInstance( "TLS" );
context.init( keyManagers, trustManagers, null );

ahcCfgBuilder.setSSLContext(context); 
```

# cvs - 提交 cvs 时导致“业力不足”错误的原因是什么

> ID：12306625
> 
> 赞同：1
> 
> 时间：2012-09-06T18:56:40.107
> 
> 标签：cvs, commit

当使用 Eclipse 将文件的更改提交到 CVS 中的项目分支时，它会失败，以下是 Eclipse 中的 CVS 控制台（已去除细节）

```
***
cvs ci -m "comment for the commit" -l "/PROJECT/path/to/file/fileName.java"
    **** Access denied: Insufficient Karma (userName|PROJECT/path/to/file|branchName)
    cvs commit: Pre-commit check failed
    cvs [commit aborted]: correct above errors first!
The server reported an error while performing the "cvs commit" command. (took 0:00.209)
   Error: PROJECT: cvs commit: Pre-commit check failed
   Error: PROJECT: cvs [commit aborted]: correct above errors first!
*** 
```

我能够在 2 天前成功提交（使用 Eclipse）。

CVS 中的 Karma 是什么，这个错误信息是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:27:10.113

问题是 CVS 服务器文件的更新`$CVSROOT/CVSROOT/avail`，该文件删除了提交权限。感谢@Jarry 指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:07:34.873

我在尝试提交到只读存储库目录时看到了该错误消息。通常是在分支准备好发布或合并的时候。

# mysql - mySQL - 可以根据以前的记录值选择记录吗？

> ID：12306634
> 
> 赞同：1
> 
> 时间：2012-09-06T18:57:47.450
> 
> 标签：mysql

我有一张表格，里面有用户需要完成的任务。在任务 A 完成之前，任务 B 无法启动，因此我的表格如下所示：

```
taskID   |   jobID   |   assignedTo   |   taskName   |   completedTime
----------------------------------------------------------------------
1               1           Carl            blah 1          11235512
2               1           Mike            blah 2          13578423
3               1           Steve           blah 3          0
4               2           Alex            blah 4          12481235
5               2           Chris           blah 5          0
6               2           Steve           blah 6          0 
```

看看史蒂夫，我想选择工作 1 - taskid 3 条目，因为他之前的每项任务（在同一个工作中）都已完成，现在是他为该工作完成任务的时候了。但是，我不想为 Steve 选择工作 2 - taskid 6，因为 Chris 尚未完成工作 2 - taskid 5。

有没有办法在一个查询中做到这一点？或者我是否必须获取史蒂夫所有任务的列表，然后遍历每个任务并验证它是完成时间为 0 的每个作业的最低任务 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:06:33.617

```
SELECT
nowtable.* -- or whatever fields you want
FROM yourtable AS nowtable
LEFT JOIN yourtable AS beforetable
  ON nowtable.jobID=beforetable.jobID 
  AND beforetable.taskID<nowtable.taskID
WHERE nowtable.assignedTo="Steve"
GROUP BY nowtable.taskID
HAVING IFNULL(COUNT(beforetable.taskID),0)=0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:13:03.517

任务总是按顺序添加吗？目前除了 taskID 之外没有其他方法可以告诉 taskID 1 和 2 应该在 3 之前完成。

```
select top 1 *
from tblTasks 
where completedTime = 0 
 and jobID = (select top 1 jobid from tblTasks where assignedTo = @username and completedTime = 0 order by jobID)
 and assignedTo = @username
 order by taskID; 
```

# c# - 来自资源文件的 Silverlight 动画样式

> ID：12306635
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:57:51.857
> 
> 标签：c#, silverlight, silverlight-4.0

我想在鼠标进入边框时为按钮阴影效果颜色设置动画。我尝试了这段代码，但对我不起作用。而且我不知道问题出在哪里？

```
 <Style x:Name="HeaderButton" TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="Border" BorderBrush="#FF550211" BorderThickness="0" CornerRadius="4">
                    <Border.Triggers>
                        <EventTrigger RoutedEvent="Border.MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetProperty="Color" Storyboard.TargetName="MenuButtonShadow"
                                                    From="#FFFFFFFF" To="#FF000000" Duration="0:0:0.3"></ColorAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Border.Triggers>
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFAF1232" Offset="0" />
                            <GradientStop Color="#FFB60329" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <ContentPresenter Margin="8, 0" VerticalAlignment="Center" HorizontalAlignment="Center" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Effect">
        <Setter.Value>
            <DropShadowEffect x:Name="MenuButtonShadow" ShadowDepth="0" BlurRadius="4"></DropShadowEffect>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="White"></Setter>
    <Setter Property="Margin" Value="4"></Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:38:56.677

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb979699%28v=vs.95%29.aspx)：

> 在 Silverlight 中，可用于 EventTrigger 的唯一事件是 Loaded 事件。对于其他事件，您应该在 Resources 属性中声明一个故事板，为故事板提供一个 Name 值，并编写一个事件处理程序来调用命名故事板上的 Begin 方法。

我想你可以在你的 XAML 中做这样的事情（虽然我没有测试过）：

```
<Storyboard x:Name="MenuButtonShadowStoryboard">
    <ColorAnimation Storyboard.TargetProperty="Color" Storyboard.TargetName="MenuButtonShadow"
                    From="#FFFFFFFF" To="#FF000000" Duration="0:0:0.3">
    </ColorAnimation>
</Storyboard>

<ControlTemplate TargetType="Button">
    <Border x:Name="Border" MouseEnter="Border_MouseEnter">
        <!-- omitted for brevity -->
    </Border>
</ControlTemplate> 
```

然后您的事件处理程序将调用情节提要上的 Begin 方法：

```
private void Border_MouseEnter(object sender, MouseEventArgs e)
{
    MenuButtonShadowStoryboard.Begin();
} 
```

您可能想要为 MouseLeave 事件添加类似的内容，这会使颜色返回到 #FFFFFFFF。

# php - 使用 mod_rewrite 将请求传递给子文件夹中的 CodeIgniter

> ID：12306637
> 
> 赞同：0
> 
> 时间：2012-09-06T18:58:05.543
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我正在尝试将请求从我的 url 的根目录传递到子文件夹，而不使用 mod_rewrite 进行重定向。（注意：我在 Rackspace 云站点上执行此操作。）

我将 CI .htaccess 移至根文件夹，然后将其更改为：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|public|robots\.txt)
RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
```

对此：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|public|robots\.txt)
RewriteBase /ci/
RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
```

这给了我一个内部服务器错误。我不相信这种有错误日志，这可能就是为什么我一直认为 mod_rewrite 是炼金术。

也许你可以看到出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:03:59.533

它不是 mod_rewrite，它是服务器。我能够在我的服务器上运行它没有问题。如果你能提供一个网址，我可以看更多。但就目前而言，它似乎是它运行的服务器。

# c# - OpenAccess ORm 连接到数据库

> ID：12306638
> 
> 赞同：0
> 
> 时间：2012-09-06T18:58:08.043
> 
> 标签：c#, .net, telerik-open-access, openaccess

我是 Telerik 的新手，正在探索作为 ORM 的一个选项。我正在尝试做简单的事情，例如使用以下方法将记录写入数据库：

```
Database db = Database.Get("MyConnectionNameIUsedToGenerateClasses");
IObjectScope scope = db.GetObjectScope();
scope.Transaction.Begin();
LookUpType l = new LookUpType();
l.IsActive = true;
l.Name = "test";
scope.Add(l);
scope.Transaction.Commit(); 
```

它引发以下错误：在从“内部生成的OpenAccess”遍历的配置文件中找不到ID为“MyConnectionNameIUsedToGenerateClasses”的连接部分。我在设置中缺少什么吗？Telerik确实将connectionString添加到我的web.config文件中它生成了类。请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:22:07.280

OpenAccess ORM 应该知道应用程序使用的所有程序集。程序集应列在配置文件中的参考部分下：

*   打开web应用项目中的web.config文件；
*   找到引用节点；
*   更改引用节点，使其获得以下形式：

> ```
> <references>
>      <reference assemblyname="AssemblyName" configrequired="True" />
> </references> 
> ```

[此处](http://www.telerik.com/help/openaccess-orm/configuration-file-format.html)描述了配置文件格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:46:58.507

正如我在上面的评论中提到的，以下代码可以工作并完成我的工作：

```
Telerik.OpenAccess.Data.Common.OAConnection dbConnection = dbContext.Connection;
LookUpType l = new LookUpType();
l.IsActive = true;
l.Name = "test123";

LookUpType lkup = new LookUpType();
lkup.IsActive = true;
lkup.Name = "someTest";

dbContext.Add(new LookUpType[] { l, lkup });
dbContext.SaveChanges(); 
```

# java - 服务器客户端发送对象

> ID：12306645
> 
> 赞同：0
> 
> 时间：2012-09-06T18:58:34.340
> 
> 标签：java, swing

我想在客户端和服务器之间来回发送一个类。想要从客户端运行 Panel 类。请问谁能告诉我该怎么办？？

**客户类别**：

```
import java.net.*;
import java.io.*;
import java.awt.*;
import javax.swing.*;

public class Client
{
    private static Socket socket = null;
    public static void main (String args[]) throws IOException, ClassNotFoundException, EOFException
    {
        try {
            socket = new Socket("localhost", 4444);
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: localhost");
            System.exit(1);
        }
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        socket.close();
    }
} 
```

当我想从客户端读取面板对象时，会出现一个错误，提示找不到主类。如何从客户端访问面板类？？？

**服务器类**：

```
import java.net.*;
import java.io.*;
import javax.swing.*;
import java.awt.*;

public class Server {
    public static void main(String[] args) throws IOException, ClassNotFoundException{
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(4444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444.");
        System.exit(-1);
    }
    Socket socketOut = serverSocket.accept();
    ObjectOutputStream oos = new ObjectOutputStream(socketOut.getOutputStream()) ;
    socketOut.close();
    serverSocket.close();
 }
} 
```

**面板类**

```
import javax.swing.*;
import java.awt.*;

public class Panel extends JPanel {
    public Panel()
    {
        JTextField n = new JTextField(10);
        n.setText("Hello");
        JButton q = new JButton("Who are you?");
        setSize(300,300);
        add(n);
        add(q);
        setLayout (new FlowLayout());
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:16:55.570

要通过套接字将对象发送到不同的进程，您需要序列化该对象。所以Panel类需要实现Serializable接口：http: [//java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

至于主类没找到嘛。我假设这两个类必须是两个单独的进程。在这种情况下，您可能会发现，如果您在 IDE 中构建它，那么两个项目的主类定义都是 Server。您可能需要更正此问题。确保有两个独立的构建结果和两个独立的主类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:49:47.967

**服务器类：**

```
import java.net.*;
import java.io.*;

class ServerThread extends Thread {
    private Socket socket = null;

    public ServerThread(Socket socket) {
    super("ServerThread");
    this.socket = socket;
    }

    public void run() {

    try {
            ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()) ;
            EagleEye y = new EagleEye();
            Object object = y;
            oos.writeObject(object);
            oos.flush();
            oos.close();
            socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    }
}

public class Server {
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = null;
        boolean listening = true;

        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(1);
        }

        while (listening)
        new ServerThread(serverSocket.accept()).start();

        serverSocket.close();
    }
} 
```

**客户端类：**

```
public class Client {
    private static Socket socket = null;
    public static void main (String args[]) throws IOException, ClassNotFoundException, EOFException{
    try {
            socket = new Socket("localhost", 4444);
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: localhost");
            System.exit(1);
        }
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        EagleEye y = (EagleEye)ois.readObject();
        socket.close();
    }
} 
```

**EagleEye（普通 Jframe 类）：**

```
public class EagleEye extends JFrame implements Serializable {
    private JLabel label1;
    private Icon photo;

    public EagleEye(){
        super("EAGLE EYE");
        photo= new ImageIcon( getClass().getResource( "Untitled.jpg" ) );
        label1= new JLabel();
        label1.setIcon(photo);
        label1.setBounds(0, 0, 800, 600);
        add(label1);

        label1.addMouseListener(new MouseAdapter(){  
            public void mousePressed(MouseEvent e)  
            {
                int x= e.getX();
                int y=e.getY();
                System.out.println();
                if(x>120 && x<150 && y>80 && y<110){
                    drawCircle(667,280);
                }
                if(x>174 && x<214 && y>125 && y<170){
                    drawCircle(667,280);
                }
                if(x>250 && x<270 && y>150 && y<240){
                    drawCircle(667,320);
                }
                if(x>375 && x<402 && y>75 && y<112){
                    drawCircle(670,359);
                }
                if(x>440 && x<490 && y>180 && y<215){
                    drawCircle(675,397);
                }
                if(x>535 && x<615 && y>110 && y<140){
                    drawCircle(670,437);
                }
                removeMouseListener(this);
            }  
        });

        setSize(800,600);
        setVisible(true);
        setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    }

    public void drawCircle(int x, int y) {
        Graphics g = getGraphics();
        g.setColor(Color.RED);
        g.drawOval(x,y,70,30);
    }
    public static void main(String[] args){
        EagleEye e= new EagleEye();
    }
} 
```

# java - 为什么要在 Java 中声明一个不可变类 final？

> ID：12306651
> 
> 赞同：88
> 
> 时间：2012-09-06T18:59:18.527
> 
> 标签：java, immutability, final

我读到要使 Java 中的[类不可变](https://en.wikipedia.org/wiki/Immutable_object)，我们应该执行以下操作，

1.  不提供任何设置器
2.  将所有字段标记为私有
3.  使课程最终

为什么需要第 3 步？我为什么要给班级打分`final`？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-09-06T19:02:56.587

如果你不标记 class `final`，我可能会突然让你看似不可变的类实际上是可变的。例如，考虑以下代码：

```
public class Immutable {
     private final int value;

     public Immutable(int value) {
         this.value = value;
     }

     public int getValue() {
         return value;
     }
} 
```

现在，假设我执行以下操作：

```
public class Mutable extends Immutable {
     private int realValue;

     public Mutable(int value) {
         super(value);

         realValue = value;
     }

     public int getValue() {
         return realValue;
     }
     public void setValue(int newValue) {
         realValue = newValue;
     }

    public static void main(String[] arg){
        Mutable obj = new Mutable(4);
        Immutable immObj = (Immutable)obj;              
        System.out.println(immObj.getValue());
        obj.setValue(8);
        System.out.println(immObj.getValue());
    }
} 
```

请注意，在我的`Mutable`子类中，我重写了`getValue`读取子类中声明的新的可变字段的行为。结果，您的类最初看起来是不可变的，但实际上并不是不可变的。我可以将这个`Mutable`对象传递到任何需要对象的地方`Immutable`，假设该对象是真正不可变的，这可能会对代码造成非常糟糕的事情。标记基类`final`可以防止这种情况发生。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-08T02:30:10.640

与许多人认为的相反，不需要创建一个不可变*的*`final`类。

 *制作不可变类的标准论点`final`是，如果你不这样做，那么子类可以增加可变性，从而违反了超类的契约。该类的客户将假定不变性，但当某些东西从他们下面发生变异时会感到惊讶。

如果你把这个论点带到它的逻辑极端，那么*所有*的方法都应该被创建`final`，否则一个子类可能会以一种不符合其超类契约的方式覆盖一个方法。有趣的是，大多数 Java 程序员认为这很荒谬，但对不可变类应该是`final`. `final`我怀疑这与 Java 程序员一般不完全接受不变性的概念有关，也许与Java 中关键字的多重含义有关的某种模糊思维有关。

**遵守超类的合同并不是编译器可以或应该始终强制执行的事情。**编译器可以强制执行合同的某些方面（例如：最小的方法集及其类型签名），但是编译器无法强制执行典型合同的许多部分。

不变性是类契约的一部分。它与人们更习惯的一些事情有点不同，因为它说明了类（和所有子类）*不能*做什么，而我认为大多数 Java（通常是 OOP）程序员倾向于将合同视为与一个类*可以*做什么，而不是它*不能*做什么。

不变性不仅影响单个方法——它影响整个实例——但这与Java 的工作方式`equals`和工作方式并没有太大的不同。`hashCode`这两种方法在`Object`. 这份合同非常仔细地列出了这些方法*不能*做的事情。该合同在子类中更加具体。它很容易被覆盖`equals`或`hashCode`以违反合同的方式。事实上，如果您只覆盖这两种方法中的一种而没有另一种，那么您很可能违反了合同。那么应该`equals`并且`hashCode`已经被宣布`final`以`Object`避免这种情况？我想大多数人会争辩说他们不应该。同样，没有必要创建不可变类`final`.

也就是说，您的大多数类，无论是否不可变，都可能*应该*是`final`. 请参阅*Effective Java Second Edition*第 17 条：“设计和记录继承或禁止它”。

因此，第 3 步的正确版本应该是：“使类成为最终类，或者在设计子类时，清楚地记录所有子类必须继续是不可变的。”

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-07T21:21:25.687

不要将整个班级标记为最终。

如其他一些答案中所述，允许扩展不可变类是有正当理由的，因此将类标记为最终类并不总是一个好主意。

最好将您的属性标记为私有和最终的，如果您想保护“合同”，请将您的吸气剂标记为最终的。

通过这种方式，您可以允许扩展类（甚至可能通过可变类），但是您的类的不可变方面受到保护。属性是私有的，不能被访问，这些属性的 getter 是最终的，不能被覆盖。

任何其他使用不可变类实例的代码都将能够依赖类的不可变方面，即使它传递的子类在其他方面是可变的。当然，由于它需要你的类的一个实例，它甚至不会知道这些其他方面。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T19:01:17.890

如果它不是最终的，那么任何人都可以扩展该类并做任何他们喜欢的事情，例如提供设置器、隐藏您的私有变量以及基本上使其可变。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-06T18:59:55.703

这限制了其他类扩展你的类。

final 类不能被其他类扩展。

如果一个类扩展了您想要使其不可变的类，则由于继承原则，它可能会改变类的状态。

只需澄清“它可能会改变”。子类可以覆盖超类行为，例如使用方法覆盖（如 templatetypedef/Ted Hop 答案）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-06T19:05:38.000

如果你不让它最终我可以扩展它并使其不可变。

```
public class Immutable {
  privat final int val;
  public Immutable(int val) {
    this.val = val;
  }

  public int getVal() {
    return val;
  }
}

public class FakeImmutable extends Immutable {
  privat int val2;
  public FakeImmutable(int val) {
    super(val);
  }

  public int getVal() {
    return val2;
  }

  public void setVal(int val2) {
    this.val2 = val2;
  }
} 
```

现在，我可以将 FakeImmutable 传递给任何期望 Immutable 的类，并且它不会像预期的合约那样表现。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-07-22T07:23:05.837

对于创建不可变类，不必将类标记为`final`.

让我从标准库本身举一个这样的例子： `BigInteger`是不可变的，但它不是`final`。

实际上，不变性是一个概念，根据该概念，对象一旦创建就无法修改。

让我们从 JVM 的角度来思考。从 JVM 的角度来看，这个类的对象应该在任何线程可以访问它之前完全构造，并且对象的状态在构造之后不应该改变。

不变性意味着一旦创建对象就无法更改其状态，这是通过三个拇指规则实现的，这些规则使编译器认识到类是不可变的，它们如下：

*   所有非`private`字段都应该是`final`
*   确保类中没有可以直接或间接更改对象字段的方法
*   类中定义的任何对象引用都不能从类外部修改

有关详细信息，请参阅[此 URL](http://javaunturnedtopics.blogspot.in/2016/07/can-we-create-immutable-class-without.html)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-13T12:51:25.830

假设您有以下课程：

```
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class PaymentImmutable {
    private final Long id;
    private final List<String> details;
    private final Date paymentDate;
    private final String notes;

    public PaymentImmutable (Long id, List<String> details, Date paymentDate, String notes) {
        this.id = id;
        this.notes = notes;
        this.paymentDate = paymentDate == null ? null : new Date(paymentDate.getTime());
        if (details != null) {
            this.details = new ArrayList<String>();

            for(String d : details) {
                this.details.add(d);
            }
        } else {
            this.details = null;
        }
    }

    public Long getId() {
        return this.id;
    }

    public List<String> getDetails() {
        if(this.details != null) {
            List<String> detailsForOutside = new ArrayList<String>();
            for(String d: this.details) {
                detailsForOutside.add(d);
            }
            return detailsForOutside;
        } else {
            return null;
        }
    }

} 
```

然后你扩展它并打破它的不变性。

```
public class PaymentChild extends PaymentImmutable {
    private List<String> temp;
    public PaymentChild(Long id, List<String> details, Date paymentDate, String notes) {
        super(id, details, paymentDate, notes);
        this.temp = details;
    }

    @Override
    public List<String> getDetails() {
        return temp;
    }
} 
```

在这里我们对其进行测试：

```
public class Demo {

    public static void main(String[] args) {
        List<String> details = new ArrayList<>();
        details.add("a");
        details.add("b");
        PaymentImmutable immutableParent = new PaymentImmutable(1L, details, new Date(), "notes");
        PaymentImmutable notImmutableChild = new PaymentChild(1L, details, new Date(), "notes");

        details.add("some value");
        System.out.println(immutableParent.getDetails());
        System.out.println(notImmutableChild.getDetails());
    }
} 
```

输出结果将是：

```
[a, b]
[a, b, some value] 
```

正如您所看到的，虽然原始类保持其不变性，但子类可以是可变的。因此，在您的设计中，您无法确定您正在使用的对象是不可变的，除非您将您的类设为 final。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-06T19:06:38.170

假设以下类不是`final`：

```
public class Foo {
    private int mThing;
    public Foo(int thing) {
        mThing = thing;
    }
    public int doSomething() { /* doesn't change mThing */ }
} 
```

它显然是不可变的，因为即使子类也不能修改`mThing`. 但是，子类可以是可变的：

```
public class Bar extends Foo {
    private int mValue;
    public Bar(int thing, int value) {
        super(thing);
        mValue = value;
    }
    public int getValue() { return mValue; }
    public void setValue(int value) { mValue = value; }
} 
```

现在，可分配给类型变量的对象`Foo`不再保证是可变的。这可能会导致诸如散列、相等、并发等问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-26T10:09:43.923

设计本身没有价值。设计总是用来实现一个目标。这里的目标是什么？我们想减少代码中的意外数量吗？我们想防止错误吗？我们是否盲目遵守规则？

此外，设计总是要付出代价的。[每一个名副其实的设计都意味着你有一个目标冲突](https://blog.pdark.de/2012/12/17/designing-a-garbage-bin/)。

考虑到这一点，您需要找到以下问题的答案：

1.  这将防止多少明显的错误？
2.  这将防止多少微妙的错误？
3.  这多久会使其他代码更复杂（= 更容易出错）？
4.  这会使测试更容易还是更难？
5.  您项目中的开发人员有多优秀？他们需要多少大锤指导？

假设您的团队中有许多初级开发人员。他们会拼命尝试任何愚蠢的事情，只是因为他们还不知道解决问题的好方法。使类最终可以防止错误（好），但也可以使他们想出“聪明”的解决方案，例如将所有这些类复制到代码中各处的可变类中。

另一方面，在一个类被广泛使用之后创建一个类将是非常困难的，但是如果你发现你需要扩展它`final`就很容易创建一个`final`类。`final`

如果您正确使用接口，则可以通过始终使用接口，然后在需要时添加可变实现来避免“我需要使这个可变”问题。

结论：这个答案没有“最佳”解决方案。这取决于你愿意付出什么样的代价以及你必须付出什么样的代价。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-09T21:37:58.897

equals() 的默认含义与引用相等相同。对于不可变数据类型，这几乎总是错误的。所以你必须重写 equals() 方法，用你自己的实现替换它。[关联](http://web.mit.edu/6.005/www/fa15/classes/15-equality/#equality_of_immutable_types)*

# json.net - 如何使用 JSON.NET 序列化实现 IDynamicMetaObjectProvider 的类型的静态属性

> ID：12306657
> 
> 赞同：2
> 
> 时间：2012-09-06T18:59:50.273
> 
> 标签：json.net, dynamic-language-runtime

我有一个实现 IDynamicMetaObjectProvider 的类，以便除了已经在该类上定义的编译时属性之外还支持动态属性。当我使用 JsonConvert.SerializeObject 序列化这种类型的实例时，生成的 JSON 字符串似乎只包含动态属性。是否有设置让它序列化动态和静态定义的属性？

# php - 循环通过选项值检测选定值

> ID：12306670
> 
> 赞同：0
> 
> 时间：2012-09-06T19:00:48.283
> 
> 标签：php, html

关于是否以及如何将 Mysqli 和查询与 PHP switch 语句结合使用以根据当前选择的 HTML 选择框的哪个选项来填充文本框的任何想法？到目前为止，我只能在初始页面加载时填充一个文本框，这只是通过 PHP switch 语句的默认情况。到目前为止，我的工作如下：

```
$mysql = new mysqli($db_host, $db_username, $db_password, $db_name)

switch("Not sure what to put here")
{
    case "corresponds with first <option> of select box but not sure how to do this" :
       $result = $mysql->query(---placeholder for SQL query---);

       while ($row = $result->fetch_object())
       {
          $queryResult = $row->---placeholder for column name---;
       }
       $textboxValue = $queryResult;
       break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:29:53.253

看起来您将希望使用 javascript/jquery 和对 php 类的 ajax 调用，该类将进行数据库调用并将您需要存储的数据返回到文本框。

这是一个ajax调用的例子。您可以复制 javascript 代码并对其进行编辑以调用您自己的 php 类。

[http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)（是的，它是 w3schools .. 但这段代码完成了工作）

替换`xmlhttp.open("GET","ajax_info.txt",true);`您要使用的php页面的链接，即`xmlhttp.open("GET","loadTextBox.php?id=3",true);`

更多信息：[http ://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

# asp.net - 使用 User.Identity.Name 在 MVC3“互联网”应用程序中获取用户名

> ID：12306671
> 
> 赞同：1
> 
> 时间：2012-09-06T19:00:50.843
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

每当我尝试在控制器中检索登录的用户名时，我都会得到一个空字符串。当我第一次创建应用程序时，我选择了“Internet 应用程序”模板。我还删除了默认帐户控制器、帐户模型和 _logon 视图，因为我不需要它们。我使用的是我自己的样式，所以我也从项目中删除了 site.css。

在玩了一段时间的 web.config 之后，我发现如果我将 web.config 中的身份验证模式更改为 windows，“User.Identity.Name”实际上可以工作。如果我将其保留为“表单”身份验证模式，那么每当我尝试获取用户名时，我只会得到一个空字符串。

最近，我将身份验证模式更改为 Windows，并在我的一个控制器中使用 User.Identity.Name 来获取用户名，但是每当我运行该应用程序时，我都会在浏览器上收到错误消息，指出“localhost/Account/LogOn/ ...”没有找到。（不是针对我通常的观点）（我也没有在 Global.asax 中进行任何更改。）

如果我将身份验证模式改回表单，我的视图工作正常，但我看不到用户名（只是一个空字符串）。无论如何我可以找到解决这个问题的方法。路由有什么问题吗？我无法使用“Intranet Application”模板重新开始。

我是 MVC 的初学者，所以任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:04:52.790

如果您使用的是 asp.net mvc，请尝试`System.Environment.UserName`

在您的 web.config 中，使用

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

你得到的错误是因为你删除了一个登录视图，它仍然必须在你的应用程序中的某个地方被引用，所以如果你不需要登录视图，请确保你从你的代码中删除了所有对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:49:20.420

听起来您甚至没有先进行身份验证，因此没有用户名：

```
@if (Request.IsAuthenticated) {
    <span>@User.Identity.Name</span>
}
else {
    <span>You aren't authenticated</span>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:23:11.727

Internet 应用程序默认使用表单身份验证。Windows 身份验证的目的是用于 Intranet，其中 Web 应用程序在 Windows 用户下运行。然后身份验证“自动”工作。

如果你想拥有一个注册用户的互联网应用程序，你应该在 web.config 中放入以下配置：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

然后您需要一个 AccountController（在默认模板中存在并且您可能已删除）和控制器中的 Logon 操作。您还需要帐户控制器的所有视图（登录、注册、更改密码等）。最好的办法是创建一个新的 Internet 应用程序并检查那里的所有内容。只需将您需要的内容复制到您的应用程序中即可。

您还需要一个用户数据库。默认使用带有标准表和存储过程的 express 数据库。如果需要，您可以使用自己的表，然后您必须重写帐户控制器中的方法或编写自己的成员资格提供程序。

您看不到用户名的原因是因为您没有登录。

编辑：如果要显示 Windows 用户名，则应将身份验证模式设置为 windows（或仅删除身份验证部分，因为它是默认设置）。然后您可以访问用户名。但是你必须删除标签。

```
<authentication mode="Windows" /> 
```

# parsing - 一个词法分析器规则可以只应用于一个解析器规则吗？

> ID：12306677
> 
> 赞同：1
> 
> 时间：2012-09-06T19:01:24.373
> 
> 标签：parsing, antlr, lexical-analysis

我们在使用 ANTLR 时遇到的问题是我们有一个语法可以解析如下内容：

```
Hello, my name is bob.
bob offset: 5 
```

请记住“鲍勃”。第一行是动态的，可以是任何东西。其中之一是“鲍勃”。“bob offset”行不是动态的，它存在于我们正在解析的每个类型的文件中。

所以，为了解析这个，我们有几个规则：

```
greeting: 'Hello, my name is' id1=IDENT '.' NEWLINE
    { System.out.println("Name: " + $id1.text"); }
    ;

bob_offset: 'bob offset:' id1=5 NEWLINE
    { System.out.println("bob offset: " + $id1.text); }
    ; 
```

因此，问题在于“bob offset:”是词法分析器读取的标记。现在，当`greeting`规则执行时，会抛出一个错误，因为它试图将 'bob' 匹配到 'bob offset:'，但它不能。

理想的解决方案是如果 ANTLR 有某种方式来指定上下文或解析器规则特定的词法分析器规则。这样，'bob offset:' 标记就不会在语法中的其他任何地方出错。

对此问题的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:54:02.267

我们最终不得不使用更多的解析器规则来解决这个问题，以便更具体地为 ANTLR 充实它。

# php - 需要显示按日期排序但按周分隔的mysql表

> ID：12306679
> 
> 赞同：1
> 
> 时间：2012-09-06T19:01:38.193
> 
> 标签：php, mysql, date, sorting

我正在使用 PHP 和 MySQL。我有一个页面，显示由人员创建的会议，并带有查看详细信息的链接。现在我只使用一个简单的表格来显示按日期排序的所有内容。数据库中的表称为“会议”，有 3 列 -

'meetingid' (int)

“时间”（日期时间）

“创作者”（文字）

我的问题是，当创建了很多会议时，它看起来有点凌乱且难以阅读，因为它们都只是一大堆。我想按周将它们分开（从周一开始，周日结束 - 或者周日至周六，如果这样更容易的话）。我已经链接到底部的文档，显示了我目前拥有的内容（第一页）以及更像我想要的内容（第二页）。只要有预定的会议，周标签（例如 9 月 3 日 - 9 月 9 日）就需要继续。因此，如果最近一次会议是 10 月 7 日，那么显示的最后一周应该是“10 月 1 日 - 10 月 7 日”。弄清楚如何按月将它们分开似乎很容易，但我无法弄清楚如何按周进行。我假设有一些 php 日期函数会对此有很大帮助，但我可以 找不到它。希望大家能帮忙。

做这个的最好方式是什么？

我还没有决定是否要在没有会议的周显示周标签。（例如，9 月 10 日至 9 月 16 日之间没有会议。 - 显示或不显示该标签。

示例链接（无需登录谷歌） [https://docs.google.com/document/d/16cvRfPmovNBsx9QQ0U5qhVoW8bo0xjEABil3wTtEurA/edit](https://docs.google.com/document/d/16cvRfPmovNBsx9QQ0U5qhVoW8bo0xjEABil3wTtEUrA/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:16:39.597

使用 date("W") 获取一年中的周数。然后您可以根据周数分隔结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:21:38.947

不知道您的数据是如何构成的；您可以使用该`date()`函数返回的周数来跟踪您所在的周并以这种方式将其分解。

```
$currentWeekNumber = -1;
$rows = array(
    array('id' => 5, 'started_by' => 'Ben', 'when' => '2012-09-06 09:00:00'),
    array('id' => 6, 'started_by' => 'Julie', 'when' => '2012-09-07 18:00:00'),    
    array('id' => 18, 'started_by' => 'Ben', 'when' => '2012-09-18 20:00:00')
);

foreach($rows as $row) {
    $eventSeconds = strtotime($row['when']);

    $rowWeek = intval(date('W', $eventSeconds));

    if( $rowWeek !== $currentWeekNumber && $currentWeekNumber !== -1) {
        echo "----- Week Break ------\n";
    }

    $currentWeekNumber = $rowWeek;
    echo "Meeting #{$row['id']}, started by {$row['started_by']}, occurs at ".strftime('%c', $eventSeconds)."\n";
} 
```

产生以下输出：

```
Meeting #5, started by Ben, occurs at Thu Sep  6 09:00:00 2012
Meeting #6, started by Julie, occurs at Fri Sep  7 18:00:00 2012
----- Week Break ------
Meeting #18, started by Ben, occurs at Tue Sep 18 20:00:00 2012 
```

# drupal-7 - Drupal 中是否有内容类型“根”默认模板？

> ID：12306681
> 
> 赞同：0
> 
> 时间：2012-09-06T19:01:53.480
> 
> 标签：drupal-7, content-type

我创建了一个新的内容类型，比如“产品”。是否有某种基于内容类型的默认路由和模板？

例如，我可以通过访问 www.example.com/products/ 访问我的“根”内容类型吗？

我是否还需要为该内容类型“根”页面编辑某个 tpl（例如列出所有产品的 /products/ 页面？

目前，我的解决方案是创建一个名为“Products”的“Page”类型节点，创建一个视图并将该视图分配给 Products 页面。然后，为此节点创建一个 TPL（将列出产品）。

我发现这个解决方案有点长..还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T21:36:35.590

> 我创建了一个新的内容类型，比如“产品”。是否有某种基于内容类型的默认路由和模板？

*   不，您只能通过管理界面编辑（按核心）内容类型字段等。

> 目前，我的解决方案是创建一个名为“Products”的“Page”类型节点，创建一个视图并将该视图分配给 Products 页面。然后，为此节点创建一个 TPL（将列出产品）。

*   您可以使用[视图](http://drupal.org/project/views)模块来创建数据列表。使用 tpl.php 文件（请参阅[模板建议](https://drupal.org/node/1089656)）来显示每个页面、节点、块等。我建议不要通过代码在节点 tpl 内添加视图，而是作为块添加视图。

我理解的好吗？

# android - 在一个 Activity 中准备 MediaPlayer 的同步，在另一个 Activity 中播放

> ID：12306683
> 
> 赞同：1
> 
> 时间：2012-09-06T19:01:59.747
> 
> 标签：android, asynchronous, streaming, media-player

我正在开发一个应用程序，除其他外，播放一些视频文件（流媒体）。我想在一个活动中准备 MediaPlayer，但在另一个活动中准备好后播放视频，以便用户可以浏览第一个活动的内容以消磨时间。这可能吗？

Application 类中定义了一个静态 MediaPlayer，如下所示：

```
public class EGDF_App extends Application {

    private static MediaPlayer mediaPlayer = null;

    public static MediaPlayer getMediaPlayer() {
        if(mediaPlayer == null)
            return new MediaPlayer();
        else
            return mediaPlayer;
    }

} 
```

我有一个带有文本的按钮（加载视频）。此文本在视频准备就绪时更改，当用户单击它时，它会触发以下活动。

问题是我在 LogCat 中收到以下错误：

```
09-06 20:43:34.606: D/ChapterPlayer(31999): surfaceCreated called
09-06 20:43:34.684: V/ChapterPlayer(31999): startVideoPlayback
09-06 20:43:34.684: E/MediaPlayer(31999): start called in state 1
09-06 20:43:34.684: E/MediaPlayer(31999): error (-38, 0)
09-06 20:43:34.684: D/ChapterPlayer(31999): surfaceChanged called
09-06 20:43:34.700: E/MediaPlayer(31999): Attempt to call getDuration without a valid mediaplayer
09-06 20:43:34.715: E/MediaPlayer(31999): Error (-38,0)
09-06 20:43:34.715: D/ChapterPlayer(31999): onCompletion called
09-06 20:43:34.751: E/MediaPlayer(31999): Attempt to call getDuration without a valid mediaplayer 
```

这是第一个 Activity 中包含的代码：

```
public void watchChapter(View view){
    Log.i("Button", "Watch chapter button PRESSED");
    Button b = (Button) view;
    String loadChapter = getString(R.string.load_chapter_button_text);
    String watchChapter = getString(R.string.watch_chapter_button_text);

    if(((String) b.getText()).equals(loadChapter)){ 
        prepareVideo(view);

    }else if(((String) b.getText()).equals(watchChapter)){  

        Intent intent = new Intent(this,ChapterAsyncMediaPlayerActivity.class);
        intent.putExtra(Constants.chapterVideoResParse, getIntent().getExtras().getString(Constants.chapterVideoResParse));
        intent.putExtra("duration", String.valueOf(duration));
        startActivity(intent);
    }

}

private void prepareVideo(View view){
    MediaPlayer mMediaPlayer;
    String path;
    final Button button = (Button) view;
    String resource = extras.getString(Constants.chapterVideoResParse);
    path = SecurityHandler.obtainURL(resource, this.getResources().openRawResource(R.raw.output), 10);

    try {
        // Gets the media player and set the listeners
        mMediaPlayer = EGDF_App.getMediaPlayer();
        mMediaPlayer.setDataSource(path);
        mMediaPlayer.prepareAsync();
        mMediaPlayer.setOnPreparedListener(new OnPreparedListener(){

            @Override
            public void onPrepared(MediaPlayer mp) {
                button.setText(getString(R.string.watch_chapter_button_text));
                Log.i("MediaPlayer", "MediaPlayer ready");
                duration = mp.getDuration();
                Log.i("Video duration", String.valueOf(mp.getDuration()));
            }

        });
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这是第二个活动中的代码：

```
public class ChapterAsyncMediaPlayerActivity extends Activity implements
OnBufferingUpdateListener, OnCompletionListener,
OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback, MediaPlayerControl {

    private static final String TAG = "ChapterPlayer";
    private int mVideoWidth;
    private int mVideoHeight;
    private MediaPlayer mMediaPlayer;
    private MediaController mController;
    private SurfaceView mPreview;
    private SurfaceHolder holder;
//  private String path;
//  private boolean mIsVideoSizeKnown = false;
    private boolean mIsVideoReadyToBePlayed = false;

    private Handler handler = new Handler();

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_chapter_media_player);
        mPreview = (SurfaceView) findViewById(R.id.mediaPlayerSurface);
        holder = mPreview.getHolder();
        holder.addCallback(this);
        holder.setKeepScreenOn(true);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        mController.show();
        return false;
    }

    private void playVideo() {
        doCleanUp();
        try {

            // Create a new media player and set the listeners
            mMediaPlayer = EGDF_App.getMediaPlayer();
//          mMediaPlayer.setDataSource(path);
            mMediaPlayer.setDisplay(holder);
//          mMediaPlayer.prepareAsync();
            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            mMediaPlayer.setScreenOnWhilePlaying(true);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mController = new MediaController(this);

        } catch (Exception e) {
            Log.e(TAG, "error: " + e.getMessage(), e);
        }
    }

    public void onPrepared(MediaPlayer mediaplayer) {
        Log.d(TAG, "onPrepared called");
        mIsVideoReadyToBePlayed = true;
        mController.setMediaPlayer(this);
        mController.setAnchorView(findViewById(R.id.mediaPlayerSurface));
        handler.post(new Runnable(){

            @Override
            public void run() {

                mController.setEnabled(true);
                mController.show();

            }
        });
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {

            startVideoPlayback();
        }
    }

    public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
        Log.d(TAG, "surfaceChanged called");

    }

    public void surfaceDestroyed(SurfaceHolder surfaceholder) {
        Log.d(TAG, "surfaceDestroyed called");
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "surfaceCreated called");
        playVideo();
        mIsVideoReadyToBePlayed = true;
        mController.setMediaPlayer(this);
        mController.setAnchorView(findViewById(R.id.mediaPlayerSurface));
        handler.post(new Runnable(){

            @Override
            public void run() {

                mController.setEnabled(true);
                mController.show();

            }
        });
        if (mIsVideoReadyToBePlayed) {
            startVideoPlayback();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        mMediaPlayer.pause();
    }

    @Override
    protected void onRestart() {
        super.onPause();
        mMediaPlayer.start();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
        doCleanUp();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    private void doCleanUp() {
        mVideoWidth = 0;
        mVideoHeight = 0;
        mIsVideoReadyToBePlayed = false;
    }

    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        holder.setFixedSize(mVideoWidth, mVideoHeight);
        mMediaPlayer.start();
        mMediaPlayer.setScreenOnWhilePlaying(true);
    }

    @Override
    public boolean canPause() {
        return true;
    }

    @Override
    public boolean canSeekBackward() {
        return true;
    }

    @Override
    public boolean canSeekForward() {
        return true;
    }

    @Override
    public int getBufferPercentage() {
        return 0;
    }

    @Override
    public int getCurrentPosition() {
        if(mMediaPlayer != null)
            return mMediaPlayer.getCurrentPosition();
        else
            return 0;
    }

    @Override
    public int getDuration() {
        if(mMediaPlayer != null)
            return mMediaPlayer.getDuration();
        else
            return 0;
    }

    @Override
    public boolean isPlaying() {
        if(mMediaPlayer != null)
            return mMediaPlayer.isPlaying();
        else
            return false;
    }

    @Override
    public void pause() {
        if(mMediaPlayer != null)
            mMediaPlayer.pause();       
    }

    @Override
    public void seekTo(int pos) {
        mMediaPlayer.seekTo(pos);       
    }

    @Override
    public void start() {
        if(mMediaPlayer != null)
            mMediaPlayer.start();
    }

    public void onBufferingUpdate(MediaPlayer arg0, int percent) {
        Log.d(TAG, "onBufferingUpdate percent:" + percent);

    }

    public void onCompletion(MediaPlayer arg0) {
        Log.d(TAG, "onCompletion called");
    }

    @Override
    public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height + ")");
            return;
        }
        mVideoWidth = width;
        mVideoHeight = height;
        if (mIsVideoReadyToBePlayed) {
            startVideoPlayback();
        }
    }
} 
```

我将不胜感激一些帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:05:38.117

I don't think you're saving the MediaPlayer in your application, you're just returning a new instance of it. Try changing it as so:

```
public static MediaPlayer getMediaPlayer() {
    if(mediaPlayer == null) {
        mediaPlayer = new MediaPlayer();
    }
    return mediaPlayer;
} 
```

# mongodb - 在 mongodb 启动后让 Chef 执行 mongodb 脚本

> ID：12306684
> 
> 赞同：3
> 
> 时间：2012-09-06T19:02:05.370
> 
> 标签：mongodb, provisioning, chef-infra

我们目前正在使用 chef 来配置我们的服务器，并且我们希望我们的食谱/食谱在安装和运行后自动将一些数据添加到 mongo 数据库中。

这是我们开始遇到问题的地方。我们使用*执行*资源来运行 mongo 脚本，如下所示：

```
execute "install-mongodb-config" do
  command "mongo #{node[:mongodb][:mongo_db_host]}/#{node[:mongodb][:mongo_db]} \"#{node[:mongodb][:mongo_add_config_script]}\""
  action :run
end 
```

无论我们尝试什么，这部分食谱总是失败！我不会详细介绍我们在这里尝试的所有内容（除非我需要），但可以说我已经用尽了订阅和通知的所有可能性（我认为）。

问题源于我们使用 mongodb::10gen_repo 来安装 mongodb。当 apt-get 安装软件包时配方退出，然后 chef 继续执行更多资源。

我们尝试在 mongodb::10gen_repo 之后直接执行上述资源，但似乎 mongodb 不可用并且 mongo shell 无法连接并运行脚本。我们看到的错误有点像这样：

```
MongoDB shell version: 2.0.2
Thu Sep  6 18:40:45 ReferenceError: setTimeout is not defined mongotest.js:2
failed to load: mongoAddConfig.js 
```

我们尝试过的任何事情都无法以一种*不错的*厨师方式解决这个问题。我们采用的方法是将执行资源替换为以下内容：

```
execute "install-mongodb-config" do
  command "sleep 60; mongo #{node[:mongodb][:mongo_db_host]}/#{node[:mongodb][:mongo_db]} \"#{node[:mongodb][:mongo_add_config_script]}\""
  action :run
end 
```

这只是在运行 mongo 脚本之前使命令休眠 60 秒。我知道这不是**正确**的方法，但它现在有效。

谁能提出正确的方法来做到这一点？我有一种感觉，我需要与创建 mongodb chef 脚本并请求功能的人交谈！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T18:59:23.530

首先。去掉这个“sleep 60”。这可以由厨师来完成：所有资源都有[共同的属性](http://wiki.opscode.com/display/chef/Resources#Resources-CommonAttributes)，“重试”和“重试延迟”是其中的一部分。所以最简单的方法是：

```
execute "install-mongodb-config" do
  command "mongo some_command"
  action :run
  retries 6
  retry_delay 10
end 
```

如果您有超过 2-3 个地方，您必须在 mongo 数据库上运行一些命令，请考虑创建 LWRP，类似于在此[mongodb 食谱](http://community.opscode.com/cookbooks/mongodb/source)中创建的一个。（特别检查库/mongodb.rb 文件）。您可以隐藏等待服务器响应的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:44:12.953

安装软件的同一厨师运行也注入初始配置是否重要？构建食谱和食谱的“主打”方法是防止幂等性，以确保它们可以一遍又一遍地运行而不会产生意外结果。

在这种特殊情况下，我会将第一个配方限制为仅安装和启动 mongodb。如果它看到 mongodb 已经在主机上运行，​​这个配方将什么也不做。然后，我会有另一个配方，只有当它看到 mongo 已设置并正在运行时才会运行。它将查询 mongodb 以查看初始配置是否已完成。如果是这样，它会简单地返回。如果没有，它将运行您的配置例程。

通过这种方式，这些食谱可以在您的机器上随时运行。即使有人卸载了 mongodb，厨师也会设法确保它重新设置并保持原始状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T21:12:05.887

所以，我对厨师一无所知。但是您的问题似乎是您在启动服务器后尝试立即连接。

当您启动服务器时，它们不会立即可用，因为在选择主服务器、获取所有服务器状态等方面会产生一些开销。

您可以通过尝试调出一个副本集并立即尝试在一个简单的脚本中连接到它来在没有厨师的情况下重新创建它。所以这不是厨师特定的。

不确定是否有解决服务器启动延迟的方法，因为与仅向集合中添加节点相比，启动主节点的情况相对较少。

我看到的唯一可能的更清洁的解决方案是为配置中形成的连接添加更长的超时时间。您可以在此处的 mongodb 文档中找到如何执行此操作：[http ://www.mongodb.org/display/DOCS/Connections](http://www.mongodb.org/display/DOCS/Connections)

您感兴趣的标志可能是 connectTimeoutMS

# java - JavaMail - javax.mail.MessagingException

> ID：12306685
> 
> 赞同：6
> 
> 时间：2012-09-06T19:02:08.063
> 
> 标签：java, jakarta-mail, exchange-server-2010

我正在尝试编写一个简单的邮件发件人类，它将接收一堆参数，并使用这些参数将使用我们的 Exchange 2010 服务器发送一封电子邮件。虽然身份验证等似乎工作正常，但当代码实际尝试发送电子邮件时（我认为），我收到以下异常。我已确保身份验证正常工作，并且我从会话中获得了传输，但它仍然失败。任何人都可以对我做错或错过的事情发表一些看法吗？谢谢。

**例外：**

```
javax.mail.MessagingException: [EOF]
       at com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:1481)
       at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1512)
       at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1054)
       at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:634)
       at javax.mail.Transport.send0(Transport.java:189)
       at javax.mail.Transport.send(Transport.java:140)
       at com.ri.common.mail.util.MailSender.sendHTMLEmail(MailSender.java:75)
       at com.ri.common.mail.util.MailSender.main(MailSender.java:106) 
```

**相关代码：**

```
import java.util.Properties;

import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class MailSender
{
    public static void sendHTMLEmail( String fromEmailId, String toEmailId, String host, String hostUserName,
            String hostPassword, String mailSubject, String mailBody )
    {
        // Get system properties.
        Properties props = System.getProperties();
        // Setup mail server
        props.put( "mail.transport.protocol", "smtp" );
        props.put( "mail.smtp.host", host );
        props.put( "mail.smtp.auth", "true" );

        final String hostUName = hostUserName;
        final String hPassword = hostPassword;

        Authenticator authenticator = new Authenticator()
        {
            protected PasswordAuthentication getPasswordAuthentication()
            {
                return new PasswordAuthentication( hostUName, hPassword );
            }
        };

        // Get the default Session object.
        Session session = Session.getDefaultInstance( props, authenticator );

        try
        {
            // Create a default MimeMessage object.
            MimeMessage message = new MimeMessage( session );

            // Set From: header field of the header.
            message.setFrom( new InternetAddress( fromEmailId ) );

            // Set To: header field of the header.
            message.addRecipient( Message.RecipientType.TO, new InternetAddress( toEmailId ) );

            // Set Subject: header field
            message.setSubject( mailSubject );

            // Send the actual HTML message, as big as you like
            message.setContent( mailBody, "text/html" );

            // Send message
            Transport.send( message, message.getAllRecipients() );
            System.out.println( "Sent message successfully...." );
        }
        catch( Exception mex )
        {
            mex.printStackTrace();
        }

    }

    public static void main( String[] args )
    {

        String to = "someCorrectEmailID@xyz.com";
        String from = "someCorrectEmailID@xyz.com";
        String host = "correctHostForExch2010";
        String user = "correctUser";
        String password = "CorrectPassword";
        String subject = "Test Email";
        String body = "Hi there. This is a test email!";

        MailSender.sendHTMLEmail( from, to, host, user, password, subject, body );
    }
} 
```

编辑：我打开调试，它说

```
MAIL FROM:<someCorrectEmailID@xyz.com> 530 5.7.1 Client was not authenticated 
DEBUG SMTP: got response code 530, with response: 530 5.7.1 Client was not authenticated. 
```

为什么会在会话身份验证成功时出现这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T20:52:43.337

谢谢亚历克斯和比尔。我通过启用以下属性使其工作。

```
props.put("mail.smtp.starttls.enable", "true"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:20:46.260

两种可能：

1.  由于您使用[Session.getDefaultInstance](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes) ，它实际上并没有尝试进行身份验证。
2.  它没有进行身份验证，因为它没有找到客户端和服务器都支持的任何身份验证机制，可能是因为服务器希望您在发送任何身份验证信息之前使用 SSL。尝试将“mail.smtp.starttls.enable”设置为“true”。

如果我们可以看到更多您的调试输出，我们可以告诉您其中哪一种是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T17:09:30.327

我也有这个错误跟踪我的更正是：

对于操作系统 centos7：进入 vi /etc/hosts 并验证 IP 地址是否正确

# jquery - jQuery：选择一个类的所有成员

> ID：12306688
> 
> 赞同：0
> 
> 时间：2012-09-06T19:02:28.437
> 
> 标签：jquery, jquery-selectors

按照下面函数注释中的说明，我尝试选择“piece”类的每个成员，将其分成两半（使用 :even :odd 选择器），然后向它们添加两个不同的类。但我收到一条错误消息，说每个班级有 0 个成员。我选错了吗？

```
function setUpPieces() {
    //select all the divs with class 'piece'
    //add the 'light' class to half of them
    //add the 'dark' to the other half
    $('.piece:even').addClass('light');
    $('.piece:odd').addClass('dark');

} 
```

更新：

这些是说明

```
The jQuery selectors :even and :odd may be useful.

An example:

$('div:even')
selects half of the divs on the page: the first one (the one at index 0) and then every second div after it (the ones at indicies 2,4,6 ...)

$('div:odd')
selects the other half. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:08:19.303

setUpPieces 函数何时运行？确保在文件准备好后应用它。您必须添加类的代码看起来是正确的。这是一个 Fiddle 显示它的实际操作：

[http://jsfiddle.net/DeGeb/](http://jsfiddle.net/DeGeb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:07:06.160

您需要使用 :nth-child 来选择奇数和偶数元素。

```
 $('.piece:nth-child(even)').addClass('light');
    $('.piece:nth-child(odd)').addClass('dark'); 
```

**更新：**这是一个工作演示[http://jsfiddle.net/Fy6FC/](http://jsfiddle.net/Fy6FC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:09:47.607

您可以遍历所有 .piece 元素，它会更快。

```
function setUpPieces() {
    //select all the divs with class 'piece'
    //add the 'light' class to half of them
    //add the 'dark' to the other half
    $('.piece').each(function(i) {
        $(this).addClass(i%2 === 0 ? "light" : "dark");
    });
} 
```

# sql-server - SQL Server 2008 View with LEFT OUTER JOIN 在实体框架 4 上失败

> ID：12306689
> 
> 赞同：2
> 
> 时间：2012-09-06T19:02:30.190
> 
> 标签：sql-server, sql-server-2008, entity-framework, entity-framework-4

*   SQL Server 2008R2
*   实体框架 4.x（早期版本）

我最近更改了 SQL Server 2088 R2 实例中的视图，使其现在包含一些`LEFT OUTER JOINS`，而不是`INNER JOINS`导致某些字段现在包含 NULL。这留下了一个例外，即不允许此字段为空，因为它们是实体键。

![请注意，所有文件都是实体键](../Images/c2cebe5ad9634b9ecd46e4e80ac87453.png)

请注意，所有显示的内容都必须是实体键，并且图像仅显示整个视图的一部分。

那么我做错了什么吗？周围有什么解决办法，还是我必须忍受它。

这是错误之一

> 错误 213 运行转换：关键部分：类型 OrderSummary 的“WorkStepId”无效。密钥的所有部分都必须不可为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T20:50:38.377

实体键不允许为 NULL。实体框架必须能够通过一个或多个键的组合来确定实体的唯一性。我不知道您的确切数据情况，但可能有办法解决这个要求，但它不是很干净。

一种可能的解决方法是在您的视图 T-SQL 中包含逻辑，以将 NULL 值合并为已知的“虚拟”值。例如，使用上面的数据，您可以在读取时将两个 NULL 值设置为 -1。然而：

*   您将不得不在保存时使用某种验证逻辑或存储过程，以防止在进行写入时将不良数据持久化到数据库中。
*   您必须确保只能返回一行，其中**每个 Id**的 WorkStepId 和 StepStatusId 有两个 NULL 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T20:47:28.800

EF 生成视图以将所有字段作为键，并且键必须具有值。使用左连接，您将拥有空列。因此，您将需要修改您现在可以为空的类型字段，以便它们不是键。目前我还没有机会在本地进行测试，所以我不能说您是否只需要修改概念级别或需要进入 DBML 来手动调整 SSDL 中的键。

# focus - WP7 - 如何让文本框拒绝焦点

> ID：12306697
> 
> 赞同：0
> 
> 时间：2012-09-06T19:02:57.710
> 
> 标签：focus, windows-phone-7.1

silverlight 工具包中的 phonetextbox 控件存在错误，因为点击文本框内的操作项会导致文本框获得焦点并调出键盘。在操作项的处理程序中，phonetextbox 然后将焦点返回到根，但这会导致键盘出现然后消失。

在 iOS 上，我会简单地检测按钮按下将接受焦点处理程序并拒绝焦点。是否存在将接受 Windows Phone 控件的焦点？这样，如果您不想集中注意力，您可以点击测试并返回 false。

或者，如果有人知道是否有另一种方法可以让键盘不出现在焦点上，这样它就不会闪烁进出。

如果没有，我将简单地在控件之外添加一个按钮以清除其内容，除非有人有其他想法。在我的 iOS 应用程序中，我还有一个文本框内部历史图标，我也想实现，但在我的谷歌搜索中没有看到任何这样的东西。这是一个字典搜索控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:39:57.267

如果我理解正确，您可以使用[IsReadOnly](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.isreadonly.aspx)属性，并将其绑定到一个检查焦点是否被接受的布尔值。这只会限制 GUI 处理控件的方式，因此您仍然可以以编程方式设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:51:33.687

你只需使用 this.Focus(); 关闭 SIP（​​软输入面板）。它将从键盘上移除焦点并将其设置为页面。它对我有用。

快乐编码。

谢谢

# c# - 有 2 个列表，您如何在 C# 中找到它们之间的重叠？

> ID：12306699
> 
> 赞同：3
> 
> 时间：2012-09-06T19:03:01.657
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual C# 2010 Express。我有 2 个邮政编码列表，每个列表本身不包含重复项（列表项都是不同的）。但是，在比较 2 个列表时存在一些重叠，我想制作第三个列表，其中仅包含重叠。有没有我可以使用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T19:04:47.370

您可以使用[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)：

```
var duplicates = list1.Intersect(list2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T19:09:47.827

如果它们仍然不同，您也可以使用`HashSet<T>`.

它有一个方法[`IntersectWith`](http://msdn.microsoft.com/en-us/library/bb293080.aspx)，例如：

```
HashSet<String> set1 = new HashSet<String>(list1);
HashSet<String> set2 = new HashSet<String>(list2);
set1.IntersectWith(set2); 
```

MSDN：

> 修改当前 HashSet 对象以仅包含该对象和指定集合中存在的元素。

这是一个简单的测量（`HashSet.IntersectWith`vs. `IEnumerable.Intersect)`。如您所见，在此示例中 HashSet 比列表方法快得多。

```
var list1 = new List<String>();
for (int i = 0; i < 1000000; i++)
    list1.Add("Item" + i);
var list2 = new List<String>();
for (int i = 500000; i < 5000000; i++)
    list2.Add("Item" + i);

var watch1 = new System.Diagnostics.Stopwatch();
HashSet<String> set1 = new HashSet<String>(list1);
HashSet<String> set2 = new HashSet<String>(list2);
watch1.Start();
set1.IntersectWith(set2);
watch1.Stop();

var watch2 = new System.Diagnostics.Stopwatch();
watch2.Start();
List<String> intersectingList = list1.Intersect(list2).ToList();
watch2.Stop();

var hashSetTime = watch1.Elapsed.ToString();  // 0.27 seconds
var listTime = watch2.Elapsed.ToString();  // 1.46 seconds 
```

所以比 .`Enumerable.Intersect`慢近 6 倍`HashSet.IntersectWith`。`ToList`是必需的，因为您想*“制作仅包含重叠的第三个列表”*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:05:07.410

假设邮政编码只是`string`s（或`int`s），您可以使用 Linq 的`Intersect`方法获得重叠：

```
 List<string> overlap = zips1.Intersect(zips2).ToList(); 
```

# java - Java Socket程序中的PrintWriter

> ID：12306708
> 
> 赞同：0
> 
> 时间：2012-09-06T19:03:33.573
> 
> 标签：java

我正在编写一个使用套接字进行 2 路通信的程序。客户端程序向用户提供一些选项，当用户选择该选项时，服务器程序会对其进行处理并将结果返回给客户端程序。我在使用服务器程序时遇到了一些问题，因为如果我将 PrintWriter 语句放在我的条件语句中，它不会处理它，如下所示。

客户：

```
Socket socket = null;

    try
    {
        System.out.println("Connecting to Server");

        socket = new Socket("192.168.0.104", 7003);
        socket.setSoTimeout(10000);
        System.out.println("Connected");

        DataOutputStream os = new DataOutputStream(socket.getOutputStream());

        InputStreamReader userInput = new InputStreamReader(System.in);
        BufferedReader userBuffer = new BufferedReader(userInput);

        InputStreamReader serverInput = new InputStreamReader(socket.getInputStream());
        BufferedReader serverBuffer = new BufferedReader(serverInput);
        PrintWriter print = new PrintWriter(socket.getOutputStream(), true);

        System.out.println("Option 1");
        System.out.println("Option 2");
        System.out.println("Option 3");
        String userOption = userBuffer.readLine();

        os.writeBytes(userOption);

        if (userOption.equals("1"))
        {
            String line = serverBuffer.readLine();              
            System.out.println(line);               
        }

        System.out.println("Closing Client Connection");
        serverBuffer.close();
        serverInput.close();
        print.close();
        socket.close();
        os.close();
        System.exit(0);

    } 
```

服务器：

```
ServerSocket serverSock = null;
    Socket standSock = null;

    try
    {
        serverSock = new ServerSocket(7003);
        standSock = serverSock.accept();

        InputStreamReader input = new InputStreamReader(standSock.getInputStream());
        BufferedReader read = new BufferedReader(input);
        PrintWriter print = new PrintWriter(standSock.getOutputStream(), false);

        String dateTime = (Calendar.getInstance()).getTime().toString();

    if (read.readLine().equals("1"))
    {
        System.out.println("Option 1");
        print.println("You're connected to the Server at: " + dateTime);
    }

        System.out.println("Closing Server Connection");
        read.close();
        input.close();
        print.close();
        standSock.close();

    } 
```

我已经测试了来自客户端程序的用户输入并正确获取它，但问题是如果我移动

```
print.println("You're connected to the Server at: " + dateTime); 
```

在条件语句中，程序只是挂起并最终超时，但是如果我将该语句移到条件语句之外，它就可以工作。如果我把它放在我的条件语句中，为什么它不能工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:17:59.597

`os.writeBytes(userOption);`in Client 从来没有真正写过返回。您正在服务器上调用 readline() ，因此它会一直等到您输入返回值。您从 System.in 调用的 readline() 实际上会丢弃您输入的返回值，因此永远不会传输。添加`+ \n"`到`os.writeBytes(userOption);`应该可以解决问题。

可能更好的选择是实际使用您在客户端中创建的 PrintWriter，它会在调用后自动刷新 StreamBuffer `print.println(userOption)`。它不需要额外的`\n`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:17:49.040

问题是 DataOutputStream 仅在换行符之后或关闭流时才真正发送信息，但是关闭流也会关闭套接字。

我建议坚持使用 PrintWriter，因为它更易于管理，尤其是在构造函数中，您可以将第二个参数设为 true，这样它就会“自动刷新”，因此每当您对该 PrintWriter 对象执行 println() 时，它都会自动发送信息。

# windows - mecurial on windows 错误中止：对 vpn 的无效争论

> ID：12306714
> 
> 赞同：0
> 
> 时间：2012-09-06T19:04:24.290
> 
> 标签：windows, version-control, vpn, tortoisehg

全部，

我正在运行 windows 7 64 位，最新版本的 TortoiseHg 64 位，并且在 windows server 2008 上安装了最新版本的 mecurial 64 位。当我尝试将更改推送到服务器时，我收到以下错误：

c:\hg\staged>hg push staged 推送到 \MyServer\hg\staging 搜索更改 添加更改集 添加清单 事务中止！回滚完成中止：无效参数 c:\hg\staged>

这只发生在 vpn 上，而不是当我在办公室时。

如果我继续尝试推动 vpn，我最终会提交它，但通常需要 3 到 4 次。

有谁知道为什么会在 vpn 上发生这种情况以及我该如何解决？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:01:29.977

我不得不停止在 vpn 上直接使用 TortoiseHg 尝试提交到共享网络文件夹上的 mecurial 存储库。这只是为了放慢速度并出错。相反，我连接到 vpn，然后将远程桌面连接到内部网络上装有 Visual Studio 和 TortoiseHg 的计算机并使用这台计算机。这样我就直接在内部网络中的一台电脑上，现在我使用 TortoiseHg 或 mecurial 没有任何问题或错误。简而言之 - TortoiseHg 和 Windows 的 mecurial 似乎不能直接在 vpn 上运行。如果你谷歌你会发现一些其他的帖子也说明了这一点。

# java - Java LWJGL 更改纹理的 alpha 值

> ID：12306726
> 
> 赞同：0
> 
> 时间：2012-09-06T19:05:03.750
> 
> 标签：java, textures, lwjgl, alphablending

我可以使用 LWJGL 中的代码来更改纹理的 alpha 值吗？或者渲染具有特定 alpha 值的纹理而不创建具有不同 alpha 值的纹理的几个图像？

编辑：

想通了，您更改为将纹理绑定到的四边形的颜色，然后使用以下方法设置 alpha 级别：

```
glColor4f(1f,1f,1f,alphaValue); 
```

# javascript - 使用 Javascript 读取 CSS 文件并动态更改页面

> ID：12306728
> 
> 赞同：6
> 
> 时间：2012-09-06T19:05:22.963
> 
> 标签：javascript, css, responsive-design

所以 CSS`@media`查询在 IE8 中不起作用。

```
@media (min-width: 768px) {
/* some css */
}
@media (min-width: 972px) and (max-width: 1024px){
/* different css */
} 
```

现在，我*可以*`IE_min768.css`创建名为and的单独 CSS 文件，`IE_min972_max1024`并使用 Javascript 在调整页面宽度时动态加载和卸载文件。但这违反了 DRY，并且在多个地方维护 CSS 会很痛苦。

是否可以使用 Javascript（仅在 IE 中）来实际读取 CSS 文件、检测`@media`部分并在正确的情况下将该 CSS 动态应用到浏览器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T19:07:22.843

不要重新发明轮子。只需使用[**respond.js**](https://github.com/scottjehl/Respond)。

来自 GitHub 上的自述文件：

> 此脚本的目标是提供一个快速且轻量级（3kb 缩小/1kb gzipped）的脚本，以在不支持 CSS3 媒体查询的浏览器中启用响应式网页设计 - 特别是 Internet Explorer 8 及以下版本。它的编写方式可能会修补对其他不支持的浏览器的支持（很快就会有更多信息）。

# php - REST API 的身份验证

> ID：12306734
> 
> 赞同：1
> 
> 时间：2012-09-06T19:05:47.223
> 
> 标签：php, codeigniter, rest, authentication, https

> **可能重复：**
> [HTTP 摘要式身份验证与 SSL](https://stackoverflow.com/questions/599048/http-digest-authentication-versus-ssl)

我在 CodeIgnitor 中使用 REST 控制器来实现 REST Api。我想知道基于 https 的基本身份验证是否足够好，或者我应该去了解一下。我还认为摘要需要更多时间来处理，但安全性仍然更重要。

还请让我知道什么是 API 密钥，以及如何使用它们来增加额外的安全层。

# algorithm - 具有恒定组合时间的递归算法的时间界限

> ID：12306735
> 
> 赞同：2
> 
> 时间：2012-09-06T19:05:48.580
> 
> 标签：algorithm, math, recursion

假设我有一个递归算法，它将输入分成 2 个大小为 n-1 的输入并递归求解它们。它在一个恒定的时间内组合结果，比如 c。

所以为此制定一个方程，

> T(n) = 2T(n-1) + c

为了找到这个的复杂性，我使用了递归树的方法。由于输入在每一步都被分成 2，因此每一步节点的数量都会得到平方，而由于只有一个元素被消除，每一级将只从列表中丢失一个元素。

所以我认为这个问题的复杂度应该是Θ(n ² )

我在这个思考过程中是否正确。如果没有，我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:09:39.043

每个步骤的节点数不会平方。相反，它在每个级别都翻倍。例如，节点数

*   问题大小 n：1
*   问题大小 n - 1: 2
*   问题大小 n - 2: 4
*   问题大小 n - 3: 8
*   问题大小 n - 4: 16
*   ...
*   问题大小 n - i: 2 ^i

结果，递归树中的节点总数将为 1 + 2 + 4 + 8 + ... + 2 ^n = 2 ^(n+1) - 1。因此，完成的工作将是 c2 ^(n+1) - c ，即 Θ(2 ^n )。这是指数时间，而不是二次时间。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:11:53.317

复杂性实际上是指数级的：`Omega(2^n)`.

[让我们用数学归纳法](http://en.wikipedia.org/wiki/Mathematical_induction)来证明它。为简单起见 - 假设`c=1`

```
Claim: T(n) >= 2^n
Base: T(0) = 1 (Let's take it as assumption)
Assume the claim is true for each k<n and using it let's prove:
T(n) = 2*T(n-1) + 1 >= 2*2^(n-1) + 1 = 2^n + 1 > 2^n 
```

现在，总结一下，让我们展示它也是`O(2^n)`，我们将得出结论`Theta(2^n)`：

```
Claim: T(n) <= 2*2^n - 1
Base: T(0) = 1 = 2 -1 
Assume the claim is true for each k<n and using it let's prove:
T(n) = 2*T(n-1) + 1 <= 2 * (2*2^(n-1) -1 ) + 1 = 2*2^n -2 + 1 = 2*2^n -1 
```

如您所见，我们实际上得到了准确`2*2^n-1`的结果（在上面的证明中，<= 可以很容易地替换为 =），这符合 @templatetypedef 所示的内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:13:08.573

从 T(n+1)=2T(n)+c 我们有：

```
T(n+1) + c = 2T(n) + 2c
T(n+1) + c = 2( T(n) + c )
T(n+1) + c = 2^n (T(0) + c)
T(n+1) = 2^n (T(0) + c) - c 
```

这会产生 Θ(2^n) 复杂度。

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法序列化 CPDistributedMessagingCenter

> ID：12306736
> 
> 赞同：0
> 
> 时间：2012-09-06T19:05:50.067
> 
> 标签：ios, cordova, phonegap-plugins

我是 Objective-C 的新手，想知道如何调试这个问题：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法序列化 CPDistributedMessagingCenter userInfo：属性列表对格式无效（属性列表不能包含“CFNull”类型的对象）”

我应该寻找什么以及如何解决这个问题？

（这个问题源于一个phonegap插件：[https](https://github.com/phonegap/phonegap-plugins/issues/779) ://github.com/phonegap/phonegap-plugins/issues/779 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:18:19.073

问题是双重的——首先是cordova 2.1.0rc2有问题——见[https://issues.apache.org/jira/browse/CB-1385](https://issues.apache.org/jira/browse/CB-1385)

InAppPurchaseManager.m 中的所有 JSONString 实例也必须替换为 cdvjk_JSONString

# asp.net-mvc - 如何为 Kendo UI DropDownList 和 ComboBox 启用 ASP.Net MVC 客户端验证？

> ID：12306737
> 
> 赞同：6
> 
> 时间：2012-09-06T19:05:50.467
> 
> 标签：asp.net-mvc, jquery-validate, kendo-ui, unobtrusive-validation

当我在 MVC Razor 视图中使用 Kendo UI ComboBox 和 DropDownList 控件时，客户端验证不会触发。这是一个例子：

```
@using Kendo.Mvc.UI
@model KendoDropDownTest.Models.TestModel

@{
    ViewBag.Title = "Kendo Drop Down and Combo Box Test";
}

<h2>Kendo Drop Down and Combo Box Test</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary()

        <div>
            @Html.LabelFor(x => x.DropDownValue)
            @(Html.DropDownListFor(x => x.DropDownValue, Model.Options, "-- Select an Option --"))
            @Html.ValidationMessageFor(x => x.DropDownValue)
        </div>

    <fieldset>
        <legend>Kendo</legend>
        <div>
            @Html.LabelFor(x => x.KendoComboValue)
            @(Html.Kendo().ComboBoxFor(x => x.KendoComboValue)
                  .BindTo(Model.Options.Select(x => x.Text)))
            @Html.ValidationMessageFor(x => x.KendoComboValue)
        </div>

        <div>
            @Html.LabelFor(x => x.KendoDropDownValue)
            @(Html.Kendo().DropDownListFor(x => x.KendoDropDownValue)
                .OptionLabel("-- Select an Option --")
                .BindTo(Model.Options))
            @Html.ValidationMessageFor(x => x.KendoDropDownValue)
        </div>
    </fieldset>

    <input type="submit" value="Submit" />
} 
```

以及对应的型号：

```
public class TestModel
{
    [Required]
    public string DropDownValue { get; set; }
    [Required]
    public string KendoComboValue { get; set; }
    [Required]
    public string KendoDropDownValue { get; set; } 

    public SelectListItem[] Options = new[]
    {
        new SelectListItem
        {
            Text = "Option 1",
            Value = "1"
        }, 
        new SelectListItem
        {
            Text = "Option 2",
            Value = "2"
        }, 
        new SelectListItem
        {
            Text = "Option 3",
            Value = "3"
        }, 
    };
} 
```

提交表单时，非 Kendo UI 下拉菜单会适当地显示验证错误，但 Kendo 控件不会。请让我知道是否有一种方法可以为这些控件启用客户端验证，而无需手动连接它。

以下剑道论坛帖子附有完整的示例解决方案： [http ://www.kendoui.c​​om/forums/mvc/dropdownlist/mvc-client-validation-not-working.aspx](http://www.kendoui.com/forums/mvc/dropdownlist/mvc-client-validation-not-working.aspx)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T17:05:40.233

根据 Kendo 论坛上的回复，验证不起作用的原因是 jquery validate 默认情况下不验证隐藏字段。最简单的更改方法是使用 $.validate.setDefaults 方法来覆盖该行为，如下所示：

```
$.validator.setDefaults({
    ignore: ""
}); 
```

这仍然没有将“input-validation-error”类添加到组合框或下拉列表中，但至少它添加了验证错误，并防止表单被提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-30T13:54:25.953

在尝试了很多东西之后，我得出一个结论，使用 jQuery unobtrusive js 库的 ASP.NET MVC 验证和 kendo 验证是两个不同且不兼容的野兽。我连接了服务器端和客户端代码以验证 kendo 多选控件，但没有真正起作用，包括 jQuery 验证器 ($.validator) 上的 setDefaults() 方法。我终于找到了这篇文章[http://www.macaalay.com/2014/02/15/enabling-asp-net-mvc-client-validation-for-kendo-ui-components/](http://www.macaalay.com/2014/02/15/enabling-asp-net-mvc-client-validation-for-kendo-ui-components/)并且不得不单独连接剑道验证，需要注意的是它没有集成到 ASP.NET MVC 验证摘要控件和一般的 ASP.NET MVC 验证 API 中。

这是演示必须做什么的代码片段。同样，可能会有更清洁和更好的方法。在我的示例中，此代码段与我的 ViewModel 对象上的绑定属性“SelectedIDs”上的必需验证属性结合使用。“divCategories”是包含剑道多选控件的 div 元素。这个现在对我有用，直到我得到一种更清洁的方法：

```
Html.Kendo().MultiSelectFor(m => m.SelectedIDs)
            .Name("SelectedIDs")
            .BindTo(CategoryItems)
            .HtmlAttributes(new { @class = "height100pc", @onchange= "$('#divCategories').kendoValidator().validate();" }) 
```

无论如何，您都可以将内联 javascript 分成脚本标记或实用程序 javascript 文件。

祝走这条路的人好运..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T20:57:24.380

最好使用这个脚本：

```
<script>
    $(function () {
        $("form").kendoValidator();
    });
</script> 
```

你可以参考这个链接。

[http://www.macaalay.com/2014/02/15/enabling-asp-net-mvc-client-validation-for-kendo-ui-components/](http://www.macaalay.com/2014/02/15/enabling-asp-net-mvc-client-validation-for-kendo-ui-components/)

# visual-studio-2010 - Fortran 90 模块的神秘本质

> ID：12306740
> 
> 赞同：8
> 
> 时间：2012-09-06T19:06:35.800
> 
> 标签：visual-studio-2010, fortran, fortran90, fortran95, intel-fortran

Fortran 90 模块是短暂的生物。我使用了一段时间的（单一）模块并取得了一些成功（使用 Intel Visual Fortran 和 Visual Studio 2010 进行编译）。然后我写了另一个模块并尝试在另一个函数中使用它，然后收到此错误：

```
 error #7002: Error in opening the compiled module file.  Check INCLUDE paths. 
```

所以我删除了有问题的模块。但是现在我在尝试访问我的原始模块后收到了同样的错误！

我怎样才能找到这些神秘的生物？为什么一个模块可以工作而不是两个？我假设我需要删除并重新编译它们，或者告诉编译器以某种方式包含它们。我知道源代码的文件位置，但不*知道它们编译到*的位置。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T23:59:47.837

对于该特定处理器（许多其他 Fortran 处理器具有类似特性，但细节不同）：

*   成功编译模块后，编译器会生成一个 .mod 文件（可能还有一个 .obj 文件），其中包含有关模块提供的实体的信息。您引用的错误消息所指的是这个 mod 文件。编译器在编译其他源代码时遇到模块的 USE 语句时需要此 mod 文件。（在链接阶段使用 obj 文件。）

*   因此，在使用模块之前，编译器必须在某个时间编译模块的源代码。这意味着模块的源代码 (MODULE...END MODULE) 必须在源文件中出现在 USE 语句之前，或者必须在一个单独的文件中，该文件在源文件之前使用 USE 语句编译。

*   在 Visual Studio 中使用英特尔 Fortran 项目进行编译时，构建环境将自动尝试为项目中的源文件安排适当的编译顺序。从命令行使用 ifort 命令编译时，程序员负责管理编译顺序。

*   接收生成的 mod 文件的目录由提供给编译器的第一个 /module 命令行选项指定。在 Visual Studio 中，此选项是使用 Fortran > 输出文件 > 模块路径属性设置的。默认情况下，Visual Studio 中的 Fortran 项目将此属性设置为当前配置的名称，因此 mod 文件出现在名为 Debug 或 Release 的项目的子目录中。在没有 /module 命令行选项的情况下，mod 文件出现在当前目录中。

*   /module 命令行选项（或等效的 Visual Studio 属性）指定的目录也用于搜索 mod 文件。此外，还会搜索由 /I 命令行选项指定的目录（在 Visual Studio 中，Fortran > 常规 > 附加包含目录）。

从您的问题中不清楚您是如何在源文件中分发模块的，无论您有一个 Visual Studio 项目还是多个项目等。如果您只处理一个项目，那么通常所需要做的就是将所有 Fortran 文件添加到项目的源文件中，默认设置应该“有效”。查找 mod 文件时出错可能是因为：

*   模块的关联源不在项目的源文件之一中；

*   由于某些其他原因，模块源代码的编译失败（是否在构建序列前面列出了其他错误？）

*   模块在特定源文件中使用后定义；

*   模块之间存在循环依赖关系（模块 A 使用模块 B，模块 B 使用 A 或类似的 - 这是语言规则所不允许的）；

*   一些混淆构建顺序的自动确定的源结构（旧版本的构建系统被 F2003 形式的 use 语句与双冒号混淆，另外可能会混淆 USE 语句，使得构建系统无法识别它们）但这些方面非常模糊。

对于 Visual Studio 中的多个 Fortran 项目，可能需要修改依赖项目的模块搜索目录，以便他们可以在项目依赖树中找到以前项目编译的 mod 文件。如果 Visual Studio 中的项目间依赖关系设置正确，英特尔 Fortran 的更高版本也会自动处理此方面。

# c# - 这个解密需要编码吗？

> ID：12306744
> 
> 赞同：0
> 
> 时间：2012-09-06T05:55:25.270
> 
> 标签：c#, .net, encryption, character-encoding

我有一个加密 - 解密方案，如下所示。

> //[明文ID字符串作为输入]--[(ASCII GetByte)+编码]--[作为字节数组加密]--[数据库列在VarBinary中]--[将字节[]作为VarBinary参数传递给SP比较]
> 
> //[ID在数据库中存储为VarBinary]--[读取为字节数组]--[（解密为字节数组）+编码+（ASCII获取字符串）]-在UI中显示为字符串

我的问题是在解密场景中。解密后我得到一个字节数组。之后我正在进行编码（IBM037）。这是正确的吗？上面显示的流程有问题吗？

```
private static byte[] GetEncryptedID(string id)
{
    Interface_Request input = new Interface_Request();
    input.RequestText = Encodeto64(id);
    input.RequestType = Encryption;

    ProgramInterface inputRequest = new ProgramInterface();
    inputRequest.Test_Trial_Request = input;

    using (KTestService operation = new KTestService())
    {
        return ((operation.KTrialOperation(inputRequest)).Test_Trial_Response.ResponseText);
    }
}

private static string GetDecryptedID(byte[] id)
{
    Interface_Request input = new Interface_Request();
    input.RequestText = id;
    input.RequestType = Decryption;

    ProgramInterface request = new ProgramInterface();
    request.Test_Trial_Request = input;

    using (KTestService operationD = new KTestService())
    {
            ProgramInterface1 response = operationD.KI014Operation(request);
            byte[] decryptedValue = response.ICSF_AES_Response.ResponseText;
            Encoding sourceByteFormat = Encoding.GetEncoding("IBM037");
            Encoding destinationByteFormat = Encoding.ASCII;

            //Convert from one byte format to other (IBM to ASCII)
            byte[] ibmEncodedBytes = Encoding.Convert(sourceByteFormat, destinationByteFormat,decryptedValue);
            return System.Text.ASCIIEncoding.ASCII.GetString(ibmEncodedBytes);

        }
    }

    private static byte[] EncodeTo64(string toEncode)
    {
        byte[] dataInBytes = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
        Encoding destinationByteFormat = Encoding.GetEncoding("IBM037");
        Encoding sourceByteFormat = Encoding.ASCII;

        //Convert from one byte format to other (ASCII to IBM)
        byte[] asciiBytes = Encoding.Convert(sourceByteFormat, destinationByteFormat, dataInBytes);
        return asciiBytes;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:27:28.817

我找到了答案——在解密过程中，解密后我将 IBM037 字节转换为 ASCII 字节。这就是出现编码的原因。我也更新了问题中的代码（带有更多解释变量）

# ruby-on-rails-3 - Rspec 应该在没有 lambda 的情况下更改计数

> ID：12306749
> 
> 赞同：11
> 
> 时间：2012-09-06T19:07:13.040
> 
> 标签：ruby-on-rails-3, rspec, shoulda

我试图找出另一种编写应该更改计数测试的方法（没有 lambda）。我正在使用 Rails 3。我也在使用 shoulda matcher gem

原因 - 所有测试用例都采用格式

```
describe "some stuff" do
   it { should ... }
 end 
```

但是我无法遵循相同的模式来测试应该更改计数

这是我所拥有的

```
describe "some stuff" do
    it "should change count by one" do 
        lambda { ... }.should change(Model, :count).by(1)
    end 
end 
```

有没有办法写

```
describe "some stuff" do
   it { should change(Model, :count).by(1) }
 end 
```

非常感谢 ！！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-06T19:15:01.067

```
subject { lambda { ... } }

it { should change(Model, :count).by(1) } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-16T16:30:02.393

您还可以使用期望语法：

```
describe "some stuff" do
  expect { ... }.to change(Model, :count).by(1)
end 
```

# mysql - 查询以连接多行中的数据

> ID：12306751
> 
> 赞同：1
> 
> 时间：2012-09-06T19:07:19.357
> 
> 标签：mysql

假设我有以下数据：

```
id     PGroup   Number
103     AAA         9946
103     BBB         8847
103     CCC         7260
103     DDD         1531
103     EEE         473
103     FFF         106
111     BBB         15353
111     AAA         15243
111     CCC         7615
111     DDD         2111
111     EEE         930
111     GGG         807
111     HHH         123
113     BBB         15585
113     AAA         12714
113     CCC         4343
113     DDD         2561
113     EEE         1063
113     GGG         406
113     HHH         69
123     AAA         11448
123     BBB         9560 
```

对于每个 ID，我想得到 AAA + BBB 的总和。可以一键查询吗？

```
103      AAA+BBB    18793
103     CCC         7260
103     DDD         1531
103     EEE         473
103     FFF         106
111     AAA+BBB     30596
111     CCC         7615
111     DDD         2111
111     EEE         930
111     GGG         807
111     HHH         123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:09:47.857

[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)`PGroup`如果您接受省略不是`'AAA'`或的行，将允许您执行类似的操作`'BBB'`：

```
SELECT
    id, 
    GROUP_CONCAT(PGroup SEPARATOR '+'),
    SUM(Number)
FORM tbl
WHERE PGroup IN ('AAA', 'BBB')
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:17:31.313

您可以使用`CASE`语句将 AAA 和 BBB 值组合成一行，如下所示：

```
select id as id,
  (case when PGroup in ('AAA','BBB') then 'AAA+BBB' else PGroup end) as super_group,
  sum(number) as total
from your_table
group by id,super_group 
```

# jquery - jQuery Resizable 改变其他元素的位置

> ID：12306757
> 
> 赞同：3
> 
> 时间：2012-09-06T19:07:43.663
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我在一个父 div 中有 3 个 div，当您第一次想重新调整元素的大小时，其他元素的位置会发生变化， [JSFIDDLE](http://jsfiddle.net/WRL8u/2/)

这是我的代码：

**HTML**

```
<div class="parent">
<div class="element" >BOX1</div>
<div class="element" >BOX2</div>
<div class="element" >BOX3</div>
</div> 
```

**CSS**

```
.parent { 
    width:300px;
    height:300px;
    background:#e0e0e0
}
.element {
    width:100px;
    height:20px;
    background:red;
} 
```

**JS**

```
$(document).ready(function() {
    var x = 0;
    $('.element').each(function() {
        x++;
        $(this).draggable({
            containment: $('.parent')
        });
        $(this).resizable({
            containment: $('.parent')
        });
        $(this).css('left', x * 50);
        $(this).css('top', x * 50);
    });
}); 
```

[JSFIDDLE](http://jsfiddle.net/WRL8u/2/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T19:13:41.053

您的元素有一个`position:relative`，这意味着每次更改其中一个框时，它都会变为绝对并从页面流中“取出”，因此其他框向上移动以填充它留下的空间。

更改`.element`框以`position:absolute;`解决此问题。

```
.element {
width:100px;
height:20px;
background:red;
position:absolute;
} 
```

示例：http: [//jsfiddle.net/WRL8u/3/](http://jsfiddle.net/WRL8u/3/)

# php - 为什么 Magento 销售订单视图为空白？

> ID：12306758
> 
> 赞同：0
> 
> 时间：2012-09-06T19:07:43.727
> 
> 标签：php, magento, magento-1.7

我们最近将一个客户站点从一个临时域移到了他们的实时域。这样做时，销售订单 ( ) 的第一个屏幕`/sales_order/view/order_id/x`现在变为空白。

当我们单击选项以创建发票或订单流程的任何其他元素时，就会出现订单数据。

`Interface_Adminhtml_Default`我们已经看到了一种解决方案，即通过 Magento Connect重新安装；然而这并没有解决我们的问题。

关于我们可以做些什么来解决这个问题的任何建议？

深入研究这一点，我在代码中看到以下内容：

```
<li>
  <a href="#" id="sales_order_view_tabs_order_info" name="order_info" title="Order Information" class="tab-item-link ">
    <span><span class="changed" title="The information in this tab has been changed."></span><span class="error" title="This tab contains invalid data. Please solve the problem  before saving."></span>Information</span>
  </a>
  <div id="sales_order_view_tabs_order_info_content" style="display:none;"></div>
</li>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T06:11:13.327

我们在使用 php 5.4 时遇到了同样的问题，当我们回滚到 php 5.3 时，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:02:43.430

艾伦是对的。但是，让我扔给你一根骨头……

互联网上有一些脚本可以让您删除所有测试订单、测试客户、测试发票、测试交付和测试退款（是的，这是英国术语）。现在您可能想要清除所有测试事务，然后查看它是否有效。这只是一个想法，无助于理解问题，但可能会让您返回销售订单视图并让您的客户网站上线。

您可能感兴趣的另一个工具是 Magento 的数据库修复工具。它会标记您的数据库有任何问题。

听起来您已经检查了管理代码一切正常，清理数据库可能是可行的方法，因为没有随时可用的日志错误。

# javascript - 如何使 Javascript 适合浏览器端？

> ID：12306764
> 
> 赞同：0
> 
> 时间：2012-09-06T19:08:07.463
> 
> 标签：javascript, node.js, browser

我目前正在编写一个 node.js 应用程序，它是一个简单的 Snake/Tron 风格的游戏，但是我已经编写了我想在服务器端和浏览器端使用的类（像素图）。我在节点端有一条线，即：

```
module.exports = Map; 
```

但这在浏览器端不起作用（我收到一条关于模块未定义的消息），因此地图不会加载，我的游戏也不会绘制到屏幕上。

我已经尝试过在此之前有一条线，例如：

```
if (!document)
    module.exports = Map; 
```

但这会使节点崩溃，并显示“ReferenceError：文档未定义”。有什么办法可以在服务器端和客户端使用相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:26:14.217

浏览器没有 node 的 commonJS 规范。您可以尝试使用[Require.js 之](http://requirejs.org/)类的模块加载器。它可以在客户端和nodejs中使用。

另一种选择是[Browserify](https://github.com/substack/node-browserify)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:27:41.010

```
if (typeof module !== 'undefined') {
  module.exports = foo;
} else {
  this.foo = foo; // or window.foo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:23:31.557

对于[string.js](http://stringjs.com)，我只是简单地做：

```
if (window) {
  //you are in browser
} else {
  // you are in Node.js
} 
```

希望有帮助。

# magento - Magento Block 不能使用参考

> ID：12306765
> 
> 赞同：0
> 
> 时间：2012-09-06T19:08:11.440
> 
> 标签：magento, module, block

我正在为前端创建一个新的 Magento 1.7.0.2 模块，但我无法让我的一个块附加到页面的任何体面点。目前它隐藏在其页面底部，所有默认内容都在其上方。我还没有真正搞砸前端，所以这是一个相当新鲜的 Magento 安装。我已经尝试过引用标签，但如果我目前包含它们，无论我在名称引号中添加什么，我的块都会完全消失。

我的布局：

```
<?xml version="1.0"?>

<layout version="0.1.0">
    <default>
    </default>
    <!--<reference name="root">-->
        <makeorder_index_index>
            <block type="makeorder/testblock" output="toHtml" name="orderdispaly"
                    template="makeorder/orderdisplay.phtml"/>
        </makeorder_index_index>
    <!--</reference>-->
</layout> 
```

我当前的模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test Block</title>
</head>
<body>
    <h2>Hello!</h2>
    <div class="Test1">
        <?php echo $this->displaystyles();?>
    </div>
    <br /><hr /><br />
    <div class="test2">
        <?php echo $this->displaypapers();?>
    </div>

</body>
</html> 
```

我想让块进入页面中间。任何帮助将不胜感激，因为我显然错过了一些重要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:52:42.953

您的布局 xml 中有几个错误，但我不会更正它们，而是以这种方式作为开始（除非您有理由想在自己的模板中重新创建完整的页面布局？？）

**布局：**

```
<?xml version="1.0"?>

<layout version="0.1.0">
    <makeorder_index_index>
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="makeorder/testblock" name="orderdispaly" template="makeorder/orderdisplay.phtml" />
        </reference>
    </makeorder_index_index>
</layout> 
```

**模板：**

```
<h2>Hello!</h2>
<div class="Test1">
    <?php echo $this->displaystyles();?>
</div>
<br /><hr /><br />
<div class="test2">
    <?php echo $this->displaypapers();?>
</div> 
```

# unit-testing - TDD 重复断言

> ID：12306767
> 
> 赞同：1
> 
> 时间：2012-09-06T19:08:18.717
> 
> 标签：unit-testing, tdd, qunit

共识似乎是在做 TDD 时不要测试私有方法。

[私有/受保护的方法是否应该进行单元测试？](https://stackoverflow.com/questions/5601730/tdd-should-private-protected-methods-be-under-unit-test)

我一直在遇到同样的情况。我有一个私有方法（例如，它将所有选项都关闭）。它改变了很多状态，并被一些公共方法调用。无论调用哪个公共方法（所有选项都设置为关闭），私有方法对状态所做的更改都将保持不变。

在不添加许多有效地做同样事情的测试的情况下，测试这个私有方法的功能的最佳方法是什么？

顺便说一句，我正在使用 QUnit 来测试 Javascript 对象。

这是我的课的一个过于简化的版本。

[http://jsfiddle.net/twistedinferno/UMgAx/](http://jsfiddle.net/twistedinferno/UMgAx/)

**编辑**

我在这里真正想问的不是“我应该还是不应该测试私有方法”，因为这已经得到了回答，而答案是否定的。我想知道如何最好地测试每个公共方法，记住由于使用了我的私有方法，许多断言将是相同的。许多公共方法调用相同的私有方法。是否可以有很多重复的断言来测试当许多公共方法中的每一个调用我的私有方法时发生的状态变化？

带有测试的新小提琴 [http://jsfiddle.net/twistedinferno/JHzWh/](http://jsfiddle.net/twistedinferno/JHzWh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:12:47.213

测试公共方法。

或者，更一般地，测试对象的外部可见界面。

如果私有方法被公共方法使用，它的使用将被测试作为结果。但是私有方法本身是私有的，与该对象之外的*任何东西（包括测试）无关。*

这些测试不应该知道或关心这样的私有方法是否存在，更不用说他们是否正在测试它。他们应该测试所有公共功能。

如果许多测试都在做同样的事情，这是否表明公共功能中存在不必要的重叠？也许那里有重构的空间？当然，这完全是猜测，没有看到任何代码。你能举个例子吗？

**编辑**

额外的断言重复了相同的击键，但测试明显不同，因为它们正在测试不同的面向外部的功能。您始终可以将重复的断言重构为每个测试调用的单个函数。一种自定义聚合断言。只要公共方法继续具有相同的可观察（和可测试）行为，那就没问题了。一旦改变，它的测试当然也需要改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T02:35:42.967

鉴于您正在练习 TDD，我假设如果没有需要编写的测试，所讨论的私有方法中的每一行代码都不会存在。这意味着不需要独立于公共接口测试私有函数。

谢谢！

布兰登

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T03:46:20.603

我同意 bcariso 和 David 的观点。你不应该测试，也不应该测试私有方法。

需要注意的一点是，如果您的私有方法如此庞大和重要，以至于您觉得必须对其进行测试，您应该考虑将其提取为它自己的辅助类的公共方法。

在 Javascript 中，原则相同，只是您将其设为公开可见的函数或模块（如果您使用该模式）。

# regex - 在 Bash 中使用正则表达式和 x=${...} 重命名文件？

> ID：12306769
> 
> 赞同：4
> 
> 时间：2012-09-06T19:08:22.697
> 
> 标签：regex, linux, bash, shell

我有一堆文件，其中包含括号中的前缀代码。我想把这些前缀变成后缀，像这样：

```
Finance-(4BF)-001.doc   --> Finance-001-4BF.doc
Corporate-(K04)-001.doc --> Corporate-001-K04.doc 
```

我之前编写了一个非常简单的 VBScript 来在 Windows 机器上执行此操作，但现在我需要在 Linux 上执行此操作。经过一些繁琐的搜索后，我找不到一种简单而优雅的方法来将正则表达式应用于文件名并使用正则表达式匹配重命名它。

到目前为止，我有这个：

```
#!/bin/bash
for i in *.doc
do
    x=${i//[\(\)]/}
    echo "$i renames to: $x"
done 
```

这个的输出是：

```
Corporate-(K04)-001.doc renames to: Corporate-K04-001.doc
Finance-(4BF)-001.doc renames to: Finance-4BF-001.doc 
```

我知道上面的正则表达式只是将括号 () 从文件名中去掉......但肯定有一种方法可以匹配它们的内容（例如`\((\w)\)`），然后在重命名命令中使用该匹配项（例如`$1`）？

作为一个 Linux 新手，我不明白`x=${...}`在做什么，因为我不知道它叫什么，所以我无法谷歌它。我认为它正在对字符串应用正则表达式，`i`但在那种情况下，为什么我不能从中提取匹配项`$1`等等`$2`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:24:24.483

该构造`${...}`称为“参数扩展”，可以在 Bash 手册中找到。

替换功能非常基本，不支持反向引用 ( `$1`)。您可以`sed`改用：

```
x=$(sed -E 's/\(([[:alnum:]]+)\)-([[:alnum:]]+)/\2-\1/' <<< "$i") 
```

请注意，这与其他语言`[[:alnum:]]`相同`\w`，但 POSIX 正则表达式没有后者。详情请参阅`man re_format`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T19:28:52.600

`${parameter/pattern/string}`Bash[参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)中的语法*不是*正则表达式；它是一个球体（`#`经过`%`特殊处理）。

Bash 具有采用正则表达式的`[[ =~ ]]` [条件表达式](http://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html)，它将捕获的组放入`${BASH_REMATCH[@]}`数组中。

```
#!/bin/bash
for i in *.doc; do
    if [[ $i =~ ^(.*)-\((.*)\)-([^.]*)(..*)?$ ]]; then
        x="${BASH_REMATCH[1]}-${BASH_REMATCH[3]}-${BASH_REMATCH[2]}${BASH_REMATCH[4]}"
        echo "$i renames to: $x"
    fi
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T19:33:04.890

根据您运行的系统，应该有一个重命名实用程序，它实际上是一个 perl 脚本并允许您使用正则表达式。我知道在较新的 Ubuntu 版本中他们有这样的命令，而在我的 Slackware 发行版中我没有。

但是，您可以尝试按如下方式使用它：

`rename 's/-\((.{3})\)-(.{3})/-$2-$1/' *.doc`

否则，您必须依赖 sed 或 awk。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:34:19.453

试试这个：

```
#!/bin/bash
for i in *.doc; do
  x=${i#*(}
  x=${x%)*}
  echo "$i renames to: ${i%%-*}-$x-${i##*-}"
done 
```

# javascript - 突出显示 onclick 菜单链接

> ID：12306774
> 
> 赞同：1
> 
> 时间：2012-09-06T19:08:39.947
> 
> 标签：javascript, jquery, html, css

我无法突出显示“当前”链接。链接的布局很简单，如下所示：

**主页 | 关于 | 乔丹**

例如，一旦用户点击一个链接，该特定链接将被突出显示。

我试过使用这个功能：

```
$(document).ready(function() {
$("#menu li a").click(function (e) {
        e.preventDefault();
        $("#menu li a").addClass("current").not(this).removeClass("current");
}); 
}); 
```

HTML

> ```
>  <div class="main">
>         <div id="menu">
>             <ul>
>                 <li><a onclick="window.location='index.action'" href="#" class="current">Home</a></li>
>                 <li><a onclick="window.location='about.action?c=azuki'" href="#">About</a></li>
>                 <li><a onclick="window.location='about.action?c=jordon'" href="#">Jordon</a></li>
>                 <li>                </ul>           </div>
>                 </div> 
> ```

CSS

> #menu li a.current {颜色:#3558b0}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:10:13.420

```
$('#menu').on( 'click', 'a', function() {
$('#menu a').removeClass( 'current' );
$(this).addClass( 'current' );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:34:12.607

如果您可以摆脱`onclick`（即使用），那么您可以**仅使用 CSS**`href`来做到这一点。你不需要 jQuery 代码。看这里：

 **CSS：

```
#menu li a.current {color:#3558b0}

#menu li a:active,
#menu li a:focus{
 color:#fff;
background-color:red;   
} 
```

HTML

```
<div class="main">
        <div id="menu">
            <ul>
                <li><a  href="#" class="current">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a  href="#">Jordon</a></li>
                <li>                </ul>           </div>
                </div> 
```

这是一个 jfiddle：http: [//jsfiddle.net/fUL3w/10/](http://jsfiddle.net/fUL3w/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:19:24.297

元素级事件将在 jQuery（或任何其他附加的库）之前触发。你的问题是执行顺序。

初学者试试这个：

```
<div id="menu">
  <a onclick="alert('First');">Helllo, World!</a>
</div>

$('a').on('click',function(e){
  alert('Second');
  e.preventDefault();
  return false;
}); 
```

`onclick``window.location`在 jQuery 有机会`preventDefault()`/取消事件之前触发并设置。我的建议是按`href`预期使用并在 HTML 上进行 jQuery 调整。

经验法则：为标记保留标记，为脚本保留脚本；不要混合。（例如避免使用`onclick`属性）。

如果您遵循该规则，您将向后兼容旧浏览器/禁用 JavaScript 的浏览器，同时仍为新浏览器提供扩展功能。您现在还可以通过允许缓存功能而不是在每个标签中嵌入重复任务来节省带宽。

话虽如此，试试这个：

```
<div id="menu">
  <ul>
    <li><a href="index.action" class="current">Home</a></li>
    <li><a href="about.action?c=azuki">About</a></li>
    <li><a href="about.action?c=jordon">Jordon</a></li>
  </ul>
</div>

$(function() {
    $('#menu a').on('click',function (e) {
        var $this = $(this);
        $this.closest('ul').find('a').removeClass('current');
        $this.addClass('current');
        e.preventDefault();
    }); 
}); 
```

我仍然不确定您希望完成什么，因为`window.location`加载后您应用的任何类都将在下一页访问时没有实际意义（除非您使用 AJAX）。但是，您可以参考`$this.prop('href')`并在单击事件中使用它来满足您的任何需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:20:26.240

虽然您的 JQuery 代码有效，但您的标记不正确。我为您提供了以下工作演示：

[JSFIDDLE](http://jsfiddle.net/refhat/Sp82g/2/)**

# iphone - 无法使用 Sharekit。“使用前必须配置ShareKit”

> ID：12306775
> 
> 赞同：1
> 
> 时间：2012-09-06T19:08:42.007
> 
> 标签：iphone, ios, sdk, sharekit

如果我使用 DefaultSHKConfigurator 类，它会告诉我它需要在使用前进行配置。

```
 *** Terminating app due to uncaught exception 'IllegalStateException', reason: 'ShareKit must be configured before use. Use your subclass of DefaultSHKConfigurator, for more info see https://github.com/ShareKit/ShareKit/wiki/Configuration. Example: ShareKitDemoConfigurator in the demo app' 
```

因此，如果我创建一个自定义 SHK 配置器而不是扩展 DefaultSHKConfigurator 它说有一个`'Duplicate Interface Definition for class 'DefaultSHKConfigurator''`

在这种情况下，这是我正在创建配置器的 applicationDiDfinishLaunching：

```
-(void)applicationDidFinishLaunching:(UIApplication *)application{
    NSLog(@"application did finish launching.");   
    DefaultSHKConfigurator *configurator = [[CustomSHKConfigurator alloc] init];
    [SHKConfiguration sharedInstanceWithConfigurator:configurator];
} 
```

如果它使用的是 DefaultSHKConfigurator，我会更改代码来分配和初始化 DefaultSHKConfigurator.... 但是，这两种方法都不会阻止我收到这个我不太理解的错误。

使固定：

它需要被调用。

*   (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:22:00.467

FIX：需要调用它

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
```

# javascript - javascript中的这个call（）方法是如何工作的？

> ID：12306776
> 
> 赞同：1
> 
> 时间：2012-09-06T19:08:58.070
> 
> 标签：javascript

我正在学习 Javascript 中的 call() 方法并试图理解这个 ex。现在我的问题是：

*   为什么我在控制台（浏览器）中看不到任何内容；console.log() 方法；不管用？
*   这个匿名函数是如何工作的？

谢谢你的时间！

> ```
> var animals = [
>   {species: 'Lion', name: 'King'},
>   {species: 'Whale', name: 'Fail'}
> ];
> 
> for (var i = 0; i < animals.length; i++) {
>   (function (i) {
>     this.print = function () {
>       console.log('#' + i  + ' ' + this.species + ': ' + this.name);
>     }
>   }).call(animals[i], i); // I cant understand this anonymus func ? :(
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:12:05.170

尝试将此代码添加到示例的末尾：

```
animals[0].print(); 
```

调用匿名函数时使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)它来设置`this`函数体内的上下文。所以当匿名函数使用 时`this`，它实际上是从外部获取对当前动物的引用。

该函数`this`使用一种方法来扩充对象（即 currnet 动物）`print`。仅此一项不会在控制台中显示任何内容。它仅仅意味着该`print`方法已被添加到动物对象中。但是您可以使用上面的代码访问对象的此方法。

展开循环，代码有效地执行以下操作：

```
animals[0].print = function () {
    console.log('#' + 0  + ' ' + this.species + ': ' + this.name);
}

animals[1].print = function () {
    console.log('#' + 1  + ' ' + this.species + ': ' + this.name);
} 
```

理解这个例子的关键是要认识到，如果不使用`call`，匿名函数中的`this`引用会自动引用全局`window`对象。它会用一个方法扩展`window`对象`print`，这显然不是我们想要的。

下一步示例是通过向`print`对象原型添加方法来获得相同的结果。（这很可能是你书中的下一个例子）

# android - Phonegap Android：应用程序数据保存在哪里？是否可以移动到SD卡？

> ID：12306777
> 
> 赞同：1
> 
> 时间：2012-09-06T19:09:00.963
> 
> 标签：android, cordova

我正在 Phonegap 中开发一个 Android 应用程序，我有大量文件要保存。我一直在寻找 Phonegap 中的最佳存储选项。为此，我需要知道我的应用程序是使用 LocalStorage 还是 sqlite 数据库，应用程序数据将保存在哪里？我认为它将保存在内部存储器中。如果是这样，如何将其移动到 SD 卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:20:02.043

您可以使用文件系统保存它。[关联](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)

我不知道你是否也可以访问 SD 卡。根据您的设备，它可能会有所不同。

您还可以使用 HTML5 的本地存储功能，这是浏览器数据，据我所知只有您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:52:48.890

它将存储在 SD 卡中。您可以在模拟器的“mnt/sdcard/”文件夹中看到它。

# c# - 异常插入列表 在 RavenDB 中

> ID：12306780
> 
> 赞同：2
> 
> 时间：2012-09-06T19:09:07.507
> 
> 标签：c#, .net, ravendb

```
public class Question
    {
        public int Id { get; set; }
        public int? Score { get; set; }
        public string Title { get; set; }
        public List<string> Tags { get; set; }
        public Owner Owner { get; set; }
        public Uri Link { get; set; }
        public bool IsAnswered { get; set; }
    }

public class Owner
    {
        public int? ID { get; set; }
        public String Name { get; set; }
        public int Reputation { get; set; }
        public Uri Link { get; set; }
    }

public static dynamic CallStackOverFlow()
        {
            var client = new RestClient("https://api.stackexchange.com/2.1");
            var request = new RestRequest("/search/advanced", Method.GET);
            request.RequestFormat = DataFormat.Json;
            request.AddParameter("site", "stackoverflow");
            request.AddParameter("tagged", "C#");
            request.AddParameter("pagesize", "1");
            var response = client.Execute(request);
            var content = response.Content; // raw content as string
            dynamic deserialised = JsonConvert.DeserializeObject(content);
            return deserialised;
        }

//go call stackoverflow
            var d = StackOverflow.CallStackOverFlow();
            var questions = new List<Question>();
            foreach (var q in d.items)
            {
                Console.WriteLine(q);
                var question = new Question
                {
                    Id = q.question_id,
                    IsAnswered = q.is_answered,
                    Link = new Uri(q.link == null ? "" : (string)q.link),
                    Owner = new Owner
                    {
                        ID = q.owner.user_id,
                        Link = new Uri(q.owner.link == null ? "" : (string)q.owner.link),
                        Name = q.owner.display_name,
                        Reputation = q.owner.reputation
                    },
                    Tags = (q.tags as JArray).Values().Select(v => v.ToString()).ToList(),
                    Score = q.score,
                    Title = q.title
                };

                questions.Add(question);
            }
            using (IDocumentStore documentStore = new DocumentStore() { Url = "http://localhost:8080", DefaultDatabase = "StackOverflow" })
            {
                documentStore.Initialize();
                using (IDocumentSession session = documentStore.OpenSession())
                {
                    session.Store(questions);
                    session.SaveChanges();
                }
            } 
```

我刚开始使用 RavenDb，如果这听起来有点愚蠢，请原谅我。我浏览了客户端 api...无法弄清楚为什么会出现以下异常..

```
Object serialized to Array. RavenJObject instance expected. 
```

我确实尝试将列表强制转换为数组...即使感觉不对..也失败了..此外，为什么我必须使用`RavenJObject`and`RavenJArray`而不是附带的默认值`Json.net`..我是猜测引擎盖下正在进行漂亮的工作..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T23:11:41.643

发生异常是因为您在调用时尝试存储一系列问题：`session.Store(questions);`

该 api 期望接收一个实体而不是数组或集合。

您可能希望使用批处理操作来处理一堆问题的加载：[http ://ravendb.net/docs/client-api/advanced/databasecommands/batch](http://ravendb.net/docs/client-api/advanced/databasecommands/batch)

# android - 下载的 jpg , apk 文件永远不会打开，但 mp3 文件会打开

> ID：12306781
> 
> 赞同：-1
> 
> 时间：2012-09-06T19:09:08.087
> 
> 标签：android, download, random-access, download-manager

我对这个奇怪的问题感到震惊。

我正在使用以下方法下载文件：

```
public boolean downloadSection(String link,String fileLocation,long currentlyDownloadedBytes){

     try {

                RandomAccessFile file = new RandomAccessFile(fileLocation, "rw");
                file.seek(currentlyDownloadedBytes+1);

                URL imageUrl = new URL(link);
                HttpURLConnection conn  =(HttpURLConnection)imageUrl.openConnection();
                conn.setRequestProperty("Range", "bytes=" + currentlyDownloadedBytes + "-");
                conn.setConnectTimeout(100000);
                conn.setReadTimeout(100000);
                conn.setInstanceFollowRedirects(true);

                InputStream is=conn.getInputStream();
                byte buffer[]=new byte[1024];;
                while (true) {
                    // Read from the server into the buffer
                    int read = is.read(buffer);
                    if (read == -1) {
                        break;
                    }
                   // Write buffer to file
                    file.write(buffer, 0, read);
                 }

                file.close();
                return true;
                } catch (Exception ex){
                      ex.printStackTrace();
                      return false;
                      }

 } 
```

当我使用此代码下载 mp3 文件时，下载文件**打开得很好**，但是下载的 android 应用程序（.apk 文件）在打开时会出现**包解析错误**，并且**图像永远不会打开**。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:27:35.997

有几件事看起来很奇怪：

a) 看起来您为这个问题手动添加了方法的签名（因为链接没有类型，所以它甚至不会编译）。

b) 有两个变量/参数 - alreadyDownloadedBytes 和 currentDownloadedBytes。我认为这是由#a引起的

c）您正在执行以下操作

```
file.seek(currentlyDownloadedBytes+1); 
```

你应该这样做

```
file.seek(currentlyDownloadedBytes); 
```

原因是因为你寻求抵消。因此，例如，如果您只读取 1 个字节，则必须寻求偏移 1（这将是文件中的第二个字节）。

d) 检查是否有任何异常被抛出和捕获。

e) 您在哪里更新 currentDownloadedBytes 或 alreadyDownloadedBytes？

f) 我的最终建议是调试您的应用程序并确保下载整个文件

# ruby-on-rails - 如何在 Rails 中加载 ActiveRecord 但在启动应用程序时跳过连接到数据库

> ID：12306783
> 
> 赞同：3
> 
> 时间：2012-09-06T19:09:16.953
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

我正在尝试根据用户提供的连接字符串构建一个基于每个会话连接到数据库的应用程序。我正在考虑将其作为 ApplicationController 中的过滤器。

问题是，当我启动服务器甚至运行生成器时，我的应用程序仍会尝试加载 database.yml。我该如何跳过这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:53:34.330

你可以使用这个[null-db 适配器](https://github.com/woodie/activerecord-nulldb-adapter)。它只是一个什么都不做的适配器。

# javascript - 从表单获取用户输入执行计算（操作顺序）并输出回该表单

> ID：12306784
> 
> 赞同：3
> 
> 时间：2012-09-06T19:09:22.117
> 
> 标签：javascript, xhtml

我正在尝试从 Form (INPUT1) 的一个元素中获取输入并执行一个基本上 OUTPUT1=((INPUT1/20) *.58)* .30 的计算，我已经看到了许多将 CM 转换为英寸等的示例..但是没有操作顺序。请帮忙！墙和我的头相遇了太多次。这是我到目前为止所拥有的，（这不起作用）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transititonal//EN"
""http://www.w3.org/TR/XHTML1/DTD/xhtml1-transitional.dtd">

<html>
<head></head>
<body>

<form name="TESTING">
<table border="1" width="600" height="200" cellpadding="10" cellspacing="3">
<tr><th colspan="2"><h1>TESTING</h1></th></tr>
<tr>  <th><h3>INPUT</h3></th>
<th><h3>OUTPUT</h3></th>    </tr>
<tr></tr>
<td><input type="number" name="INPUT1"/></td>
<td><input type="number" name="OUTPUT1"></td>
<table>

</form>

<script type="text/javascript">
var USERINPUT1 = document.TESTING.INPUT1.value;
var CALC1 = USERINPUT1/20;
var CALC2 = CALC1*.585;
var CALC3 = CALC2*.30;
var CALC3 = OUTPUT1;

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:23:37.757

你做错了几件事。

首先，必须在某个时间读取输入值。例如，当按下按钮时，当输入字段的值发生变化或类似情况时。在您的情况下，当输入字段没有任何值时，文档一经解析就被读取。

其次，您没有将结果写入输出字段。此行`var CALC3 = OUTPUT1;`重新声明 CALC3 变量并为其赋予值 OUTPUT1。您想要的是将字段 OUTPUT1 的值设置为 CALC3

尝试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transititonal//EN"
""http://www.w3.org/TR/XHTML1/DTD/xhtml1-transitional.dtd">

<html>
<head></head>
<body>

<form name="TESTING">
<table border="1" width="600" height="200" cellpadding="10" cellspacing="3">
<tr><th colspan="2"><h1>TESTING</h1></th></tr>
<tr>  <th><h3>INPUT</h3></th>
<th><h3>OUTPUT</h3></th>    </tr>
<tr></tr>
<td><input type="number" name="INPUT1" id="input" onchange="calculate();"/></td>
<td><input type="number" name="OUTPUT1" id="output"></td>
<table>

</form>

<script type="text/javascript">
function calculate() {

var USERINPUT1 = document.TESTING.INPUT1.value;
var CALC1 = USERINPUT1/20;
var CALC2 = CALC1*.585;
var CALC3 = CALC2*.30;
document.TESTING.OUTPUT1.value = CALC3;

}

</script>
</body>
</html> 
```

当第一个输入字段的值发生变化时，它会调用函数calculate() ( `onchange="calculate();"`)，然后自动更新第二个字段（您写入值就像您读取它一样`document.TESTING.OUTPUT1.value = CALC3;`）。

[编辑] 代码的第一个版本与您的非常相似，因此您将能够更容易地理解它，但您也应该看看这个。你有一些错位的表格行标签和一些不整洁的代码，所以我也清理了一点。它距离最佳实践还很远，但它是您页面的改进版本

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>
<body>
    <form name="TESTING">
        <table border="1" width="600" height="200" cellpadding="10" cellspacing="3">
            <tr>
                <th colspan="2">
                    <h1>TESTING</h1>
                </th>
            </tr>
            <tr>  
                <th>
                    <h3>INPUT</h3>
                </th>
                <th>
                    <h3>OUTPUT</h3>
                </th>    
            </tr>
            <tr> 
                <td>
                    <input type="number" name="INPUT1" id="input" onchange="calculate();"/>
                </td>
                <td>
                    <input type="number" name="OUTPUT1" id="output">
                </td>
            </tr>
        </table>
    </form>

<script type="text/javascript">
    function calculate() {
        var USERINPUT1 = document.TESTING.INPUT1.value,
            RESULT = (USERINPUT1/20) * .585 * .30;
        document.TESTING.OUTPUT1.value = RESULT;
    }
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:28:53.550

你能用jQuery吗？

如果是这样，那么这将使用您提供的内容：http: [//jsfiddle.net/vuYMs/](http://jsfiddle.net/vuYMs/)

否则我可以修改它以在没有 jQuery 的情况下工作。

**编辑：**

这是一个更面向 javascript 的解决方案：http: [//jsfiddle.net/vuYMs/3/](http://jsfiddle.net/vuYMs/3/)

```
var input1 = document.getElementsByName("INPUT1")[0];
var output1 = document.getElementsByName("OUTPUT1")[0];

function changeInput(e){ 
    var calc = (((input1.value/20)*0.585)*0.30);
    output1.value = calc;
}

input1.onchange = changeInput; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:48:28.640

下面的代码将构建需要的自动计算器。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function calculate(ele)
{
    var result = ((ele / 20) * 0.585) * 0.30;
    document.getElementById("output1").value = result;
}
</script>

<style type="text/css">
body                    { font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:18px; margin:0; padding:0; }
.container              { background:#0CC; border:1px dotted #bbb; margin:40px auto 0 auto;  padding: 20px; width:500px; }
h1                      { font-family:Georgia, "Times New Roman", Times, serif; font-style:italic; font-weight:bold; text-align:center; text-decoration:underline;  }
input                   { border:1px solid #eee; }
.container p label      { width:100px; float:left; }
p                       { clear:both; }
</style>
</head>
<body>

<form name="testing" method="post" action="">
<div class="container">
    <h1> My Calculator</h1>
    <p><label>Input : </label><input type="number" name="input1" value="" onBlur="calculate(this.value);"/></p>
    <p><label>Output : </label><input type="number" name="output1" id="output1"></p>
</div>
</form>

</body>
</html> 
```

# php - 我可以将该功能添加为 ON DUPLICATE KEY UPDATE

> ID：12306785
> 
> 赞同：0
> 
> 时间：2012-09-06T19:09:27.750
> 
> 标签：php, mysql, csv, insert-update

我有一个使用cvs importer向mysql插入数据的函数有问题的原始代码如下：

```
{
      $sql = "LOAD DATA INFILE '".@mysql_escape_string($this->file_name).
             "' INTO TABLE `".$this->table_name. 
             "` FIELDS TERMINATED BY '".@mysql_escape_string($this->field_separate_char).
             "' OPTIONALLY ENCLOSED BY '".@mysql_escape_string($this->field_enclose_char).
             "' ESCAPED BY '".@mysql_escape_string($this->field_escape_char).
             "' ".
             ($this->use_csv_header ? " IGNORE 1 LINES " : "")
             ."(`".implode("`,`", $this->arr_csv_columns)."`)";
      $res = mysql_query($sql);
      $this->error = mysql_error();
    } 
```

我的问题是，如果只有在不重新插入新记录的情况下将记录更新到该表，我怎么能做到这一点，因为我想插入多条记录，然后再次上传它们，但有一个字段#LL，该字段首先为空，然后更新将采用值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:35:21.003

看起来[MySQL 支持临时表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)，因此一种解决方案是将 CSV 数据插入到临时表中，然后将其 JOIN 到永久数据以识别要更新的行。

简化示例（假设您的目标表名为`datatable`，有一个名为 的主键`data_id`，列`field_a`和`field_b`）：

```
CREATE TEMPORARY TABLE temp_bulk_inserted_datatable LIKE datatable;

LOAD DATA INFILE '/path/to/data.csv' INTO TABLE temp_bulk_inserted_datatable;

-- Update rows that already exist with new data from the file
UPDATE
    datatable as OLD
JOIN
    -- Inner Join, so that only matching rows will be touched
    temp_bulk_inserted_datatable as NEW
    ON OLD.data_id = NEW.data_id
SET
    OLD.field_a = NEW.field_a,
    OLD.field_b = NEW.field_b;

-- Insert new rows from the CSV file which don't yet exist
INSERT INTO datatable
    ( data_id, field_a, field_b )
SELECT
    NEW.data_id, NEW.field_a, NEW.field_b
FROM
    temp_bulk_inserted_datatable as NEW
LEFT JOIN
    -- Left Outer Join: we want to know about non-matches...
    datatable as OLD
    ON OLD.data_id = NEW.data_id
WHERE
    -- ...in fact, we want ONLY the non-matches
    OLD.data_id IS NULL;

DROP TABLE temp_bulk_inserted_datatable; 
```

（请注意，我实际上并没有使用 MySQL，所以我的一些语法可能略有偏差，但从我在手册中阅读的内容来看，上述内容应该是正确的。）

# java - 如何禁用对 jamon 管理页面的公共访问？

> ID：12306796
> 
> 赞同：1
> 
> 时间：2012-09-06T19:09:56.420
> 
> 标签：java, spring, jakarta-ee, jamon

如何在 Spring/Java EE Web 应用程序中禁用对 Jamon 管理 jsp 页面的公共访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:10:42.757

[Spring 安全性](http://www.springsource.org/spring-security)是一种方法。

标准 Java EE 安全性是另一个问题。它在[Servlet 规范](http://jcp.org/en/jsr/detail?id=315)中有详细描述，您可以在 Web 上搜索“Java EE servlet 安全性”之类的示例。

# sql - 子查询和链接服务器

> ID：12306797
> 
> 赞同：1
> 
> 时间：2012-09-06T19:09:57.327
> 
> 标签：sql, sql-server, sql-server-2008

**此查询有效**

```
select c.claimid, c.member, c.authno, c.claim_type, c.provider, c.vendor, 
    c.claimdeny, c.date_approved, c.date_received, c.lob 
from xxx.xxx.dbo.clm c 
where c.claimid in (
    select **top 12** d.DENIAL_CLAIM_ID 
    from DN_APPEAL_REQUEST d 
    where d.DENIAL_TYPE='C' order by APPEAL_ID
) 
```

**此查询不起作用**

```
select c.claimid, c.member, c.authno, c.claim_type, c.provider, c.vendor, 
    c.claimdeny, c.date_approved, c.date_received, c.lob 
from xxx.xxx.dbo.clm c 
where c.claimid in (
    select **top 13** d.DENIAL_CLAIM_ID 
    from DN_APPEAL_REQUEST d 
    where d.DENIAL_TYPE='C' order by APPEAL_ID
) 
```

xxx.xxx 是链接服务器

第二个查询运行了一段时间，然后失败并显示一条错误消息，指出先前的 sql 语句格式错误。

* * *

**第一个子查询的结果**

```
913900133      
916303197      
833701140      
028100832      
028100832      
028100832      
835900898      
205407041      
214402039      
112504239      
213601714      
314700730 
```

**第二个子查询的结果**

```
913900133      
916303197      
833701140      
028100832      
028100832      
028100832      
835900898      
205407041      
214402039      
112504239      
213601714      
314700730      
214301493 
```

dn_appeal_request 只有 18 条记录。我尝试分别对每个claimid 的链接服务器表运行查询。它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:33:21.523

您可能会发现[这个使用答案](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/136ebc28-cce5-4c88-a534-973ad04c8b65)。

# php - 带有 INSERT 语句的 MySQL 语法错误 1064

> ID：12306799
> 
> 赞同：1
> 
> 时间：2012-09-06T19:10:15.983
> 
> 标签：php, mysql, mysql-error-1064

使用此查询时出现 MySQL 语法错误 (1064)。我一直在搜索 SO 上的几十个 mysql 语法问题，疯狂地搜索，盯着这个 SQL 语句无济于事。在执行语句之前，我使用的是mysqli的real_escape_string()。我曾尝试（绝望地）从查询中删除所有换行符，但这无济于事。是什么导致了错误？

```
INSERT INTO `file_upload`.`files` (
    `id`,
    `name`,
    `user_id`
) 
VALUES (
    NULL,
    'filename.txt',
    1
) 
```

我收到的错误消息是：

> ...检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '\'filename.txt\',1)' 附近使用正确的语法

编辑

这是PHP代码。Connection 是一个 mysqli 对象。

```
public function add_file_to_user($file, $user_id) {
    $query = "INSERT INTO `file_upload`.`files` (`id`,`name`,`user_id`) VALUES (NULL,'$file->name',$user_id)";
    $res = $this->query($query);
    die($this->connection->errno . $this->connection->error);
}

private function query($str) {
    $str = $this->connection->real_escape_string($str);
    return $this->connection->query($str);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:21:11.293

你去：

```
private function query($str) {
    $str = $this->connection->real_escape_string($str);
    return $this->connection->query($str);
} 
```

您正在逃避整个查询；你只需要转义你传递给它的变量。

```
public function add_file_to_user($file, $user_id) {
    $filename = $this->connection->real_escape_string($file->name);

    $query = "INSERT INTO `file_upload`.`files` (`id`,`name`,`user_id`) VALUES (NULL,'$filename',$user_id)";
    $res = $this->query($query);
}

private function query($str) {
    return $this->connection->query($str);
} 
```

（虽然我没有测试过它是否有效）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:13:05.447

很可能你似乎在某个时候过度逃避。检查代码，这*不是*您正在执行的查询。

我怀疑，不是转义字符串，而是转义整个查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T19:13:42.860

查看您的错误（`'\'filename.txt\',1)'`），似乎文件名周围的单引号被转义，导致引发此错误。看来您可能正在逃避您的`INSERT`查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T19:19:41.853

尝试一下：

```
 $query = "INSERT INTO `file_upload`.`files` (`id`,`name`,`user_id`) VALUES (NULL,'$file->name',$user_id)"; 
```

或者

```
 $query = "INSERT INTO `file_upload`.`files` (`id`,`name`,`user_id`) VALUES (NULL,'$file->name','$user_id')"; 
```

# java - Gson如何反序列化空对象属性

> ID：12306800
> 
> 赞同：3
> 
> 时间：2012-09-06T19:10:21.833
> 
> 标签：java, json, gson

我有一些 json，有一系列看起来像这样的条目（我已经简化它以专注于相关问题，这就是为什么它看起来有点多余）：

> {"name":"ISPC Seychelles","company":{"name":"ISPC Seychelles","id":3427640}}

但有时公司属性设置为空：

> {"name":"京都威斯汀都酒店", "company":null}

我已经这样定义了我的类（对不起，公共访问修饰符，当我得到这段代码工作时会改变这些:)）：

```
class Entry {
  public String name=;
  public Company company;
  public String toString() {
      return  name + ";" + company;
  }
}

class Company {
    public String name;
    public int id;
    public String toString() {
        return "Company: " + name;
    }
} 
```

在我的代码中，我尝试使用 gson 反序列化包含在名为 output 的变量中的 JSON：

```
while ((output = br.readLine()) != null) {
    Gson gson = new Gson();
    Reply reply = gson.fromJson(output, Reply.class); 
    Entry[] entries = reply.entries;
    for (int i=0; i < entries.length; i++) {
        System.out.print(entries[i]+ "\n") ;
    }
} 
```

当按照 JSON 中的第一个示例填充公司元素时，这可以正常工作：

> ISPC塞舌尔；公司：ISPC塞舌尔

但是，如果没有像第二个示例中那样填充元素，我会得到以下输出：

> 京都威斯汀都酒店；空值

我想要的是以下输出：

> 京都威斯汀都酒店；公司：无

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:37:12.347

的`toString()`表示`Company`由对象控制，因此如果对象为空`Company`，则无法获得所需的表示。`Company`做到这一点的唯一方法是在你的`Entry`班级中有以下类似的东西' `toString()`：

```
class Entry {
  ...
  ...

    public String toString() {
        return  name + "; " + (company != null ? company : "Company: null");
    }
} 
```

# mysql - 如何从 2 个表中选择行，其中每个表的 1 列可以通过共同目的合并？

> ID：12306801
> 
> 赞同：0
> 
> 时间：2012-09-06T19:10:29.170
> 
> 标签：mysql, sql, database

我有 2 个具有相似但不同数据的表。两个表都有自己的插入时间戳列。

```
Table A                      Table B
+------------+----------+    +------------+----------+
| a_created  | a_data   |    | b_created  | b_data   |
+------------+----------+    +------------+----------+
| 2012-09-01 | A        |    | 2012-09-03 | C        |
| 2012-09-05 | B        |    | 2012-09-04 | D        |
+------------+----------+    +------------+----------+ 
```

我想从这些表中获取所有数据，通过合并的日期列按两个创建日期排序。即我想要以下结果

```
+------------+----------+----------+
| x_created  | a_data   | b_data   |
+------------+----------+----------+
| 2012-09-01 | A        | NULL     |
| 2012-09-03 | NULL     | C        |
| 2012-09-04 | NULL     | D        |
| 2012-09-05 | B        | NULL     |
+------------+----------+----------+ 
```

这甚至可以在不改变架构的情况下实现吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:14:31.177

```
select a_created as x_created,a_data,'null' as b_data from table_a
union all 
select b_created as x_created,'null' as a_data,b_data from table_b
order by x_created 
```

[sqlfiddle](http://sqlfiddle.com/#!2/fc1bb/1)

我使用了带引号的“null”，因为当您想添加字符串时它会很方便，但是如果您想要真正的 NULL 值，请按照 Ike Walker 的建议进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:21:19.627

通过添加您要求的排序并使用真正的 NULL，以 mrmryb 的答案为基础：

```
select a_created as x_created,a_data,NULL as b_data 
from table_a
union all 
select b_created as x_created,NULL as a_data,b_data 
from table_b
order by 1 
```

# android - 该字段永远不会在本地读取（catch-22）

> ID：12306802
> 
> 赞同：0
> 
> 时间：2012-09-06T19:10:32.053
> 
> 标签：android, eclipse

有人面临这样的问题吗？

一些标有警告“该字段永远不会在本地读取”的字段：

![在此处输入图像描述](../Images/e7042c58a2a1d51c5e43ec91d7f661d0.png)

但是当我禁止警告时，Eclipse 开始声称这是不必要的：

![在此处输入图像描述](../Images/975350e85451a0b09b68327b732c53cb.png)

结果，我无法摆脱警告。

Eclipse SDK 3.6.2

**编辑：**

BlockBase 类是抽象的。但是向`abstract`类添加关键字并将构造函数可见性更改为`protected`不会改变任何内容。我猜想这种行为的真正原因是类市场是私有的，因此编译器假定应该从类可见性区域内部访问字段。它没有考虑到这些字段可能会从具有另一种可见性 ( `public class DataBlock extends BlockBase`) 的子项访问。

我将`BlockBase`可见性更改为`protected`，它**解决**了问题。我不喜欢将其更改为 public，因为它会导致`BlockBase`从父类外部可见，但是将可见性更改为`protected`不会改变任何内容，因为我的父类没有继承类。

*但无论如何，这种编译器行为是不正确的。*

![在此处输入图像描述](../Images/c87afbc8bf12ac8acf50aa2a441f3589.png)

**编辑 2**

-或者-

**如何重现问题**

*1.第一个文件：*

```
public class testClass {

    private abstract class x
    {
        public int theProblem;
    }

    public class y extends x 
    {
    }

} 
```

*2.第二个文件：*

```
public class anotherClass {

    public void accessToTheProblem()
    {
        testClass.y a = (new testClass()).new y();
        a.theProblem = 5;
        Log.i("TEST", "See, I can read theProblem: " + a.theProblem);
    }

} 
```

在 Eclipse SDK 3.6.2 下，您将看到`theProblem`带有警告的声明市场：

> 该字段永远不会在本地读取

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:33:25.073

也许你打算`BlockBase`成为一个`abstract`像这样的班级[`BaseAdapter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/widget/BaseAdapter.java)？

*   如果您不打算声明一个`BlockBase`对象，`blockBase = new BlockBase(widget);`那么添加`abstract`到您的类定义并删除您的构造函数。编译器将了解您计划在子类中使用这些变量，并将删除警告。

*   否则编译器是正确的，您应该删除这些变量，因为它们永远不会在`BlockBase`. （如果您打算在 中使用它们`DataBlock`，则将它们剪切并粘贴在那里，但它们对 没有意义`BlockBase`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:09:39.303

在某些情况下，编译器会添加合成方法来模拟对嵌套/外部类字段的访问。也许这会混淆这里的支票。您应该能够通过将 Eclipse 编译器警告首选项“访问封闭类型的不可访问成员”设置为高于“忽略”的值来验证这是否起作用。

除此之外，我建议升级到 3.8 或 4.2，也许我们正在推测一个长期修复的错误。

# ruby-on-rails - Rails、简单表单和客户端验证不起作用

> ID：12306811
> 
> 赞同：0
> 
> 时间：2012-09-06T19:11:20.253
> 
> 标签：ruby-on-rails, simple-form, client-side-validation

我的模型：

```
class Hotel < ActiveRecord::Base
attr_accessible :name
belongs_to :user
has_many :room_types
validates :user_id, presence: true
validates :name, presence: true, length: { in: 2..15 }
end 
```

表格代码：

```
 <%= simple_form_for @hotel, :validate => true do |f| %>
    <%= f.input :name %>
    <%=  f.submit 'Create Hotel' , :class => 'btn btn-primary', :type => 'submit' %>
   <% end %> 
```

似乎没有执行任何客户端验证。我可以在不填写任何信息的情况下提交表格。有任何想法吗？

编辑：好的，我查看了我的页面的来源，它有这个错误：

window['new_hotel'] = {"type":"SimpleForm::FormBuilder","error_class":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.error_class 已弃用且无效。（在 (eval):1 从 error_class 调用)","error_tag":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.error_tag 已弃用且无效。（在 (eval):1 处从 error_tag 调用）","wrapper_error_class":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm。 wrapper_error_class 已弃用且无效。（从 (eval):1 的 wrapper_error_class 调用）","wrapper_tag":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.wrapper_tag 已弃用且无效。（从 (eval) 的 wrapper_tag 调用:1)","validators":{"hotel[name]":{"presence":{"message":"不能为空"},"length":{"messages":{"maximum":"太长(最多15个字符)"},"maximum":15}}}};

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:16:03.810

您必须在文件中设置`browser_validations`选项`config/initializers/simple_form.rb`

```
# Tell browsers whether to use default HTML5 validations (novalidate option).
# Default is enabled.
config.browser_validations = true 
```

PS不要忘记运行

```
$ rails g simple_form:install 
```

生成初始化程序。

# c# - 在 .NET 4 中捕获 AccessViolation。好还是坏？

> ID：12306812
> 
> 赞同：4
> 
> 时间：2012-09-06T19:11:34.620
> 
> 标签：c#, .net, exception, error-handling, corrupted-state-exception

文件中有 SECURITY_IDENTIFIER 结构类型的对象。我需要从此结构中获取所有者 SID。为了做到这一点，我调用`GetSecurityDescriptorOwner`WinAPI 函数并创建`System.Security.Principal.SecurityIdentifier`（它具有以 IntPtr 作为参数的重载）

问题是文件中的这个结构有时会被破坏，所以我从 GetSecurityDescriptorOwner 获得的指针无效。它不是 IntPtr.Zero，它是无效的，所以当我创建`SecurityIdentifier`我得到的类型的对象时`AccessViolationException`，使用简单的 try-catch 是无法用 .NET 4 捕获的。

我知道允许捕获此类异常的属性，所以我暂时使用它，但我不喜欢这个解决方案。不建议捕获损坏状态异常 (CSE)，但我没有看到任何其他解决方案。这个 WinAPI 函数返回给我无效的指针，我看不出有什么方法可以检查它的有效性。有任何想法吗？

**更新**

WinAPI

```
BOOL WINAPI GetSecurityDescriptorOwner(
  _In_   PSECURITY_DESCRIPTOR pSecurityDescriptor,
  _Out_  PSID *pOwner,
  _Out_  LPBOOL lpbOwnerDefaulted
); 
```

外部定义

```
[DllImport("Advapi32.dll")]
static extern bool GetSecurityDescriptorOwner(
   IntPtr pSecurityDescriptor,
   out IntPtr owner,
   out bool defaulted); 
```

**更新**

```
private static SecurityIdentifier GetSecurityIdentifier()
{
    // Allocate managed buffer for invalid security descriptor structure (20 bytes)
    int[] b = new int[5] {1, 1, 1, 1, 1};

    // Allocate unmanaged memory for security descriptor 
    IntPtr descriptorPtr = Marshal.AllocHGlobal(b.Length);

    // Copy invalid security descriptor structure to the unmanaged buffer
    Marshal.Copy(b, 0, descriptorPtr, b.Length);

    IntPtr ownerSid;
    bool defaulted;

    if (GetSecurityDescriptorGroup(descriptorPtr, out ownerSid, out defaulted))
    {
        // GetSecurityDescriptorGroup returns true, but `ownerSid` is `1`
        // Marshal.GetLastWin32Error returns 0 here
        return new SecurityIdentifier(ownerSid);
    }

    return null;
} 
```

此代码有时会从 SecurityIdentifier 构造函数中抛出 Corrupted State Exceptions。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:41:55.487

你试过打电话`IsValidSecurityDescriptor`吗？

```
[DllImport("Advapi32.dll")]
static extern bool IsValidSecurityDescriptor(IntPtr pSecurityDescriptor);

if (IsValidSecurityDescriptor(descriptorPtr) && 
    GetSecurityDescriptorOwner(descriptorPtr, out ownerSid, out defaulted))
{
     return new SecurityIdentifier(ownerSid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:22:32.487

**更新：**

试试这个：

```
 [DllImport("Advapi32.dll")]
    static extern bool GetSecurityDescriptorOwner(
       [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.U4)]
       Int32[] securityDescriptor,
       [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.U1)] 
       out Byte[] owner,
       out Boolean defaulted);

    [DllImport("Advapi32.dll")]
    static extern bool IsValidSecurityDescriptor(
        [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.U4)] 
        Int32[] securityDescriptor);

    private static SecurityIdentifier GetSecurityIdentifier()
    {
        // Allocate managed buffer for invalid security descriptor structure (20 bytes)
        Int32[] b = new[] { 1, 1, 1, 1, 1 };

        Byte[] ownerSid;
        bool defaulted;

        if (IsValidSecurityDescriptor(b) &&
            GetSecurityDescriptorOwner(b, out ownerSid, out defaulted))
        {
            return new SecurityIdentifier(ownerSid, 0);
        }

        return null;
    }

    static void Main()
    {
        for (Int32 index = 0; index < 1000; index++)
        {
            SecurityIdentifier identifier = GetSecurityIdentifier();
            String text = identifier == null ? "(none)" : identifier.Value;
            Console.WriteLine(text);
        }

        Console.ReadKey();
    } 
```

# vim - Netbeans IDE 的 Vim 插件

> ID：12306816
> 
> 赞同：15
> 
> 时间：2012-09-06T19:12:15.793
> 
> 标签：vim, netbeans, ide, vim-plugin

我为 Eclipse 找到了几个 Vim 插件，但有些计算机在 Eclipse 中存在性能问题。

所以，我想知道是否有任何适用于 Netbeans IDE 的插件，它在较弱的计算机上运行更流畅。

如果重要的话，我对对 Java、Python 和 C++ 的支持很感兴趣。（欢迎任何关于其中之一的答案）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-30T05:50:02.010

找到了这些，显然它们甚至有一些我的 eclipse 插件没有的功能：

[http://sourceforge.net/projects/viex/](http://sourceforge.net/projects/viex/)

[http://sourceforge.net/projects/jvi/](http://sourceforge.net/projects/jvi/)

来自：[是否可以在 NetBeans 中使用 VI 或 VIM 键盘映射？](https://stackoverflow.com/questions/483962/is-it-possible-to-use-vi-or-vim-keymap-in-netbeans?rq=1)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-09T15:02:26.007

我以这种方式在 Mac OS 上为我的 NetBeans 8.1 和 8.0.2 获得了 jVi：

1.  [从http://sourceforge.net/projects/jvi/](http://sourceforge.net/projects/jvi/)下载 nbvi-1.5.3.zip 。
2.  在某处解压。
3.  工具 > 插件 > 已下载
4.  单击“添加插件...”按钮。
5.  导航到这些 *.nbm 所在的文件夹并选择所有这些。
6.  安装 *.nbm 文件并重新启动。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-06T19:31:22.880

工具 -> 插件 -> 可用插件 -> 搜索：`vi`

该插件称为“jVi for NB”。如果您搜索`vim`，结果将为空。

事实上，*为*NetBeans 找到和安装 vi[m] 模拟器真的很*容易*。您甚至不必输入整个三个字母。

![在此处输入图像描述](../Images/c69dd79920d138a023228d71845df937.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-07T23:14:28.223

通过执行以下操作，我在 Windows 10 上的 NetBeans IDE 8.0.2 上获得了 vim 编辑模式：

1.  工具 > 插件 > 检查更新
2.  单击可用插件选项卡
3.  搜索“jVI”
4.  安装“jVi for NB-7.0 更新中心”
5.  单击可用插件选项卡
6.  点击“检查最新”
7.  搜索“jVI”
8.  安装 jVI，然后重新启动 NetBeans
9.  hjlkhjlhlkjhlkjhkjlh

# exchangewebservices - Exchange Web 服务 - 错误的 .Net 版本

> ID：12306821
> 
> 赞同：1
> 
> 时间：2012-09-06T19:12:47.737
> 
> 标签：exchangewebservices, assemblyversions

我很困惑。我下载了最新版本的 EWS，但它符合 .net 2.0。

我的项目是 4.0，两者不能一起工作。当然，我犯了一个愚蠢的错误。有人可以告诉我我在做什么吗？

我从使用它的类库中得到的警告是“引用的程序集 Microsoft.Exchange.Webservices 由于依赖于 System.Web 版本 4.0.0.0，因此无法解析”

我添加了该程序集，但收到了相同的错误消息。

我认为这与版本有关，但我觉得我又回到了 DLL 地狱的日子。任何人的任何建议？

# php - 如何从MySQL表中获取多对多关系数据，用php排序和显示？

> ID：12306829
> 
> 赞同：1
> 
> 时间：2012-09-06T19:13:08.147
> 
> 标签：php, mysql, many-to-many, sql-order-by

我对 php 和 mysql 很陌生。我正在努力学习，并被困在这个问题上。

我有一个多对多的关系。这些表是：用户和状态。用户表中的许多公司在许多州运营，每个州都有许多不同的公司。user 表上的每个公司都有一个唯一的 id，它存储在 state 表中。然后，状态表有一个列表示公司运营所在的州名称。在状态表中为公司所在的每个州创建一个新行。这一切似乎都正常。

我编写了以下 php 代码，从任何给定状态（$state）的状态表中提取所有公司 ID，然后显示在给定状态下运行的所有公司名称（从带有公司 ID 的用户表中提取）。

我的问题是我想按字母顺序排列在任何给定州运营的公司的列表。此代码不会这样做。谁能提供一种更好的方法来执行此操作，以允许对列表进行排序（或者通常会更有效和更好）？

```
$state=$_GET['state'];
echo $state;
$aid=array();
$result=mysql_query("SELECT * FROM state WHERE state='$state'");
while($row=mysql_fetch_assoc($result)){
$v=$row['company_id'];
array_push($aid,$v);};

foreach($aid as $val){
$result1=mysql_query("SELECT * FROM users WHERE company_id='$val'");
$row1=mysql_fetch_assoc($result1);
$company=$row1['company'];
echo $company.'<br/>';}; 
```

表结构为：

**用户**

```
company_id
company
(other columns that are not relevant) 
```

**状态**

```
index
company_id
state
(no additional columns) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:23:14.743

您通常会在关系数据库中引入第三个表来表达多对多关系。该表可以是 users_states，并且只有字段：user_id 和 state_id。所以你的表应该看起来像这样：

您在 SQL 中进行排序。因此查询可能如下所示：

```
SELECT u.*, s.*
FROM users AS u
INNER JOIN users_states AS us ON u.user_id = us.user_id
INNER JOIN states AS s ON us.state_id = s.state_id
WHERE s.state_id = ?
ORDER BY u.name ASC 
```

在这里，我假设一个字段`name`是您想要排序的字段，并且您将过滤为 state_id 传递的某些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:15:30.920

请参阅此网址：-

[多对多关系选择和排序](https://stackoverflow.com/questions/10056960/many-to-many-relationship-select-and-order-by)

大概是这样的：

```
SELECT
    a.person_id
FROM
    table AS a,
    table AS b
WHERE
    a.person_id = b.person_id AND
    a.favorite_id = 1 AND
    b.favorite_id = 2
ORDER BY
    ( IF( a.is_main_favorite = "y", 1, 0 )
      +
      IF( b.is_main_favorite = "y", 1, 0 ) ) DESC 
```

顺便说一句：您可能希望在数据库中存储 1/0 而不是 y/n，这样您就不需要 IF 调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:20:32.480

试试这个 SQL 语句：

```
SELECT 
    s.state, u.company 
FROM 
    states s, users u 
WHERE 
    s.company_id = u.company_id 
AND 
    s.state = "$state" 
GROUP BY 
    s.state 
ORDER BY 
    s.state, u.company 
```

这应该为您提供每个所选州的公司按字母顺序排列的列表。ORDER BY 首先使用状态，以防您决定扩展查询以获得多个状态。

# java - 在 scheduleExpression 中排除日期

> ID：12306830
> 
> 赞同：1
> 
> 时间：2012-09-06T19:13:13.603
> 
> 标签：java, jakarta-ee, timer, ejb, javabeans

我有一个 EJB 计时器，其时间在 scheduleExpression 中指定。有没有办法在时间表中排除日期列表，即：

不要在周末和其他日期的一些列表中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:19:34.810

在所有日子而不是周末执行它很容易：您可以设置

```
scheduleExpression.dayOfWeek("Mon-Fri") 
```

在我看来，仅使用一个日程表表达式来排除特定日期的离散列表会更加棘手。也许您可以使用多个并使用开始和结束字段。

更多细节在这里：[http ://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html](http://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html)

# c++ - 在运行时查找模板参数

> ID：12306832
> 
> 赞同：3
> 
> 时间：2012-09-06T19:13:23.143
> 
> 标签：c++, templates

可以访问模板“类型”，例如在 std

```
std::vector<int>::size_type 
```

作为模板参数传递的对象是否可以具有相同的东西？例如：

```
template<int i>
class A {
//?
};

A<3> instance;
int number = instance::???? //<--- assigns 3 to number 
```

是否有可能在运行时再次获得对象类型中的 3？无需在 A 类中创建特定成员（这会增加对象的大小）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:17:16.087

编译器在编译时就知道变量的类型，这只是让它放弃它的问题。

```
template<int i>
int get(const A<i> & instance)
{
    return i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:18:15.833

```
template<int i>
class A { 
public:
  enum { number = i };
};

int main() {
  A<3> instance;
  std::cout << instance.number;
  return 0;
} 
```

# iphone - 使用 Xcode 访问 iPad 上的照片库

> ID：12306834
> 
> 赞同：0
> 
> 时间：2012-09-06T19:13:30.507
> 
> 标签：iphone, ipad, camera, xcode4.3

我可以使用以下代码访问 iPhone 照片库。我需要添加什么才能访问 iPad 上的照片库。我知道它与 UIPopOver 有关，但不知道如何实现它。

```
- (void) useCamera
{
if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeCamera])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType =
    UIImagePickerControllerSourceTypeCamera;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker
                            animated:YES];

    newMedia = YES;
}
}

- (void) useCameraRoll
{
if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType =
    UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker animated:YES];

    newMedia = NO;
}
}

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
NSString *mediaType = [info
                       objectForKey:UIImagePickerControllerMediaType];
[self dismissModalViewControllerAnimated:YES];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    UIImage *image = [info
                      objectForKey:UIImagePickerControllerOriginalImage];

    imageView.image = image;
    if (newMedia)
        UIImageWriteToSavedPhotosAlbum(image,
                                       self,

@selector(image:finishedSavingWithError:contextInfo:),
                                       nil);
}
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
{
    // Code here to support video if enabled
}
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
contextInfo:(void *)contextInfo
{
if (error) {
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: @"Save failed"
                          message: @"Failed to save image"\
                          delegate: nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
    [alert show];    
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:47:16.960

以下是在支持 iPhone 和 iPad 的现有应用程序中对我有用的一些代码：

注意：SSiOSUtilities 是我创建的一个类，其中包含确定您使用的是 iPad 还是 iPhone 的代码。

```
- (IBAction)fromCamera:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    [picker setDelegate:self];

    [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [picker setAllowsEditing:YES];

    if ([SSiOSUtilities isIPad])
    {
        UIPopoverController *tempPopOver = [[UIPopoverController alloc] initWithContentViewController:picker];
        [tempPopOver presentPopoverFromRect:[[self cameraButton] frame] inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        [self setPopOver:tempPopOver];
    }
    else
    {
        [self presentModalViewController:picker animated:YES];
    }

    [picker release];
}

- (IBAction)fromLibrary:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    [picker setDelegate:self];

    [picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [picker setAllowsEditing:YES];

    if ([SSiOSUtilities isIPad])
    {
        UIPopoverController *tempPopOver = [[UIPopoverController alloc] initWithContentViewController:picker];
        [tempPopOver presentPopoverFromRect:[[self libraryButton] frame] inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        [self setPopOver:tempPopOver];
    }
    else
    {
        [self presentModalViewController:picker animated:YES];
    }

    [picker release];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
    if ([SSiOSUtilities isIPad])
    {
        [[self popOver] dismissPopoverAnimated:YES];
        [[self popOver] release];
    }

    [picker dismissModalViewControllerAnimated:YES];

    // rest of code for image here....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T16:51:18.190

这是我使用的一些代码。它创建一个 UIImagePickerController，然后将它用作 UIPopoverController 的内容视图控制器。变量 vc 在 .h 中声明，是一个 UIPopoverController。

注意：iOS 7 刚出来，我发现当我运行这段代码时，屏幕会稍微变暗，好像要显示照片库，但是弹出框控制器没有出现。

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
{
    if (vc == nil)  //show the popover if it is not being displayed
    {
        imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;
        imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        vc = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
        [vc presentPopoverFromBarButtonItem:chooseButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
    }
    else    //hide the popover if it is already being displayed
    {
        [vc dismissPopoverAnimated:YES];
        vc = nil;
    }
} 
```

# ruby-on-rails-3 - 安全重定向到 Rails 中的嵌套资源

> ID：12306835
> 
> 赞同：0
> 
> 时间：2012-09-06T19:13:40.483
> 
> 标签：ruby-on-rails-3, redirect, nested-resources, brakeman

我最近将 Brakeman gem 添加到我的 Gemfile 中，并且必须看到，我应该使用

```
:only_path => true 
```

使其更安全。但我正在使用嵌套资源并且不知道具体如何，这是我的控制器中的部分。

```
if @comment.update_attributes(params[:comment])
  redirect_to [@message, @comment], notice: 'Comment was successfully updated.' 
```

我该怎么做，我只看到了 url_for 助手的 only_path 属性。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:29:49.293

简短的回答是，无论如何，在这种情况下，刹车手都会抱怨。有一个修复程序（https://github.com/presidentbeef/brakeman/issues/143）。

照原样，您的代码是安全的。第一个参数传递给 url_for，在这种情况下，它会根据您的模型构建多态路由。

> 请注意，默认情况下 :only_path 为 true，因此您将获得相对的“/controller/action”，而不是像“example.com/controller/action”这样的完全限定 URL</p>

但是要回答您的问题，它会在第一个参数解析为字符串的任何形式上发出警告，尽管是弱置信度警告。这将得到修复。

切线警报。假设您要重定向到@message.some_url。这将生成一个高置信度警告，您可以通过以下方式修复它：

```
redirect_to URI.parse(url_for(@message.some_url)).path, notice: 'Comment was successfully updated' 
```

# python - 在python中使用整数参数进行for循环

> ID：12306837
> 
> 赞同：2
> 
> 时间：2012-09-06T19:13:41.050
> 
> 标签：python

这里是 python 的新手，我正在尝试使用整数作为 for 循环的参数。我使用的代码

```
from sys import argv

script, numberofposts = argv
postsint = int(numberofposts)

for x in range(0,"%d" % postsint):
    print 'on time'

print "number %d" % postsint 
```

**给我这个错误**-

```
Traceback (most recent call last):
  File "forarg.py", line 6, in <module>
    for x in range(0,"%d" % postsint):
TypeError: range() integer end argument expected, got str. 
```

我在这里做错了什么？我认为这是一个语法问题，但错误似乎表明 for 循环需要一个整数，如您所见，我试图强制执行该整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:15:16.373

`for x in range(postsint): # start at beginning as mgilson suggested`

应该可以正常工作。您已经将其转换为整数，您不应该从中创建字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T19:17:36.583

这是因为`"%d"`用于字符串格式化，它只返回字符串：

```
In [18]: type( "%d" % 3)
Out[18]: <type 'str'> 
```

使用 just ，`range(0,4)`或者`xrange(0,4)`如果您使用的是 python 2.x：

```
In [19]: range(0,4)  #0 is the default value of the first argument, so range(0,4)==range(4)
Out[19]: [0, 1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:15:27.913

您正在将格式化的字符串作为范围的第二个参数。

在您使用的情况下，您说的是从 1 开始，然后上升到一个带有数字的字符串`postint`。

这是错误的。你想做`range( 1, postint )`

# jquery - 将其他数据获取到 django 表单下拉选择中

> ID：12306841
> 
> 赞同：5
> 
> 时间：2012-09-06T19:14:02.913
> 
> 标签：jquery, mysql, django, django-forms

我有一个动作模型，它有一个外键，它指定动作重复发生的频率：

```
class Reoccurance(models.Model):
    label = models.CharField("Label", max_length=50, unique = True)
    days = models.IntegerField("Days")

    def __unicode__(self):
        return self.label

    class Meta:
        ordering = ['days']

class Action(models.Model):
    name = models.CharField("Action Name", max_length=200, unique = True)
    complete = models.BooleanField(default=False, verbose_name="Complete?")
    reoccurance = models.ForeignKey(Reoccurance, blank=True, null=True, verbose_name="Reoccurance") 
```

我正在制作一个导致重复出现的 HTML 代码的 action 的 modelForm（基于重复出现表中存在的数据库值）：

```
<select id="id_reoccurance" class="select" name="reoccurance">
    <option value="" selected="selected">---------</option>
    <option value="12">2 Days</option>
    <option value="1">3 Days</option>
    <option value="2">5 Days</option>
    <option value="10">6 Days</option>
    <option value="9">1 Week</option>
    <option value="3">10 Days</option>
    <option value="4">2 Weeks</option>
    <option value="11">3 Weeks</option>
    <option value="5">1 Month</option>
    <option value="13">6 Weeks</option>
    <option value="6">1 Quarter</option>
    <option value="7">6 Months</option>
    <option value="8">1 Year</option>
</select> 
```

如您所见，尽管选择是按天数升序排列的，但值是无序的，因为它们是无序输入到数据库中的。

我想创建一些 jquery 来动态计算动作再次发生的日期。它将采用今天的日期并添加与用户选择的选项相对应的天数。但是使用我在表格中获得的数据，我无法将选择转换为设定的天数。即使选项项的值是有序的，它仍然不表示说“1 年”等于 365 天。

但是，此数据位于 Reoccurance 表中。对于标签 =“1 年”，天数 = 365。对于重复表中的所有项目也是如此。

有没有办法重写我的 modelForm 以便每个下拉项目的选项值等于该选择的天数？因为那时，我可以访问天数：

```
$("#id_reoccurance").change(function() {
    alert( $(this).val() );
}); 
```

这是否会对我将正确的重复选择与重复表的正确行联系起来的能力产生不利影响？有没有另一种方法可以在我的表单模板上访问 jquery 中的这一天/标签领带？

**更新**

感谢 Joseph 建议检查[这篇文章](https://stackoverflow.com/questions/5089396/django-form-field-choices-adding-an-attribute)，我能够在我的选项元素中包含一个标题：

```
from django.utils.html import conditional_escape, escape
from django.utils.encoding import force_unicode

class SelectWithTitles(forms.Select):
    def __init__(self, *args, **kwargs):
        super(SelectWithTitles, self).__init__(*args, **kwargs)
        # Ensure the titles dict exists
        self.titles = {}

    def render_option(self, selected_choices, option_value, option_label):
        title_html = (option_label in self.titles) and \
            u' title="%s" ' % escape(force_unicode(self.titles[option_label])) or ''
        option_value = force_unicode(option_value)
        selected_html = (option_value in selected_choices) and u' selected="selected"' or ''
        return u'<option value="%s"%s%s>%s</option>' % (
            escape(option_value), title_html, selected_html,
            conditional_escape(force_unicode(option_label)))

class ChoiceFieldWithTitles(forms.ChoiceField):
    widget = SelectWithTitles

    def __init__(self, choices=(), *args, **kwargs):
        choice_pairs = [(c[0], c[1]) for c in choices]
        super(ChoiceFieldWithTitles, self).__init__(choices=choice_pairs, *args, **kwargs)
        self.widget.titles = dict([(c[1], c[2]) for c in choices])

class ActionForm(forms.ModelForm):
    reoccurance = ChoiceFieldWithTitles()

    def __init__(self, *args, **kwargs):
        super(ActionForm, self).__init__(*args, **kwargs)   

        choices = []
        for pt in Reoccurance.objects.all():
            choices.append((pt.id, pt.label, pt.days))
        self.fields['reoccurance'] = ChoiceFieldWithTitles(choices = choices) 
```

极好的。所以现在我在我的模板中得到以下内容：

```
<select id="id_reoccurance" class="selectwithtitles" name="reoccurance">
    <option value="12" title="2" >2 Days</option>
    <option value="1" title="3" >3 Days</option>
    <option value="2" title="5" >5 Days</option>
    <option value="10" title="6" >6 Days</option>
    <option value="9" title="7" >1 Week</option>
    <option value="3" title="10" >10 Days</option>
    <option value="4" title="14" >2 Weeks</option>
    <option value="11" title="21" >3 Weeks</option>
    <option value="5" title="30" >1 Month</option>
    <option value="13" title="42" >6 Weeks</option>
    <option value="6" title="90" >1 Quarter</option>
    <option value="7" title="180" >6 Months</option>
    <option value="8" title="365" >1 Year</option>
</select> 
```

好吧，看起来我们快到了，但我被绊倒了。在 jquery 中，我正在尝试以下方法来获取所选选项的标题：

```
$(function() {
    $("#id_reoccurance").change(function() {
        alert($(this).attr('title'));
    }); 
}); 
```

问题是它以未定义的形式返回！

**更新**知道了

```
$(function() {
    $("#id_reoccurance").change(function() {
        alert($(this).find("option:selected").attr("title"));
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:22:06.233

基于[这个问题/答案](https://stackoverflow.com/questions/3700445/add-additional-options-to-django-form-select-widget)（这是粗略的，未经测试，希望是一个开始）：

```
class myClassForm(forms.Form):
    class Meta:
        model = myClass
        fields=["name"]

    reoccurrance = forms.ChoiceField(label="Reoccurance", choices=(),
                                   widget=forms.Select(attrs={'class':'selector'}))

def __init__(self, *args, **kwargs):
    super(myClassForm, self).__init__(*args, **kwargs)
    choices = []
    for pt in Reoccurance.objects.all():
      choices.append((pt.id, unicode(pt.days)))
    self.fields['reoccurrance'].choices = choices 
```

# python - 检索特定文本 freebase/WEX python re

> ID：12306842
> 
> 赞同：0
> 
> 时间：2012-09-06T19:14:04.763
> 
> 标签：python, regex, tags, freebase

假设我有这样的文本/字符串

```
This is something before any tag, today's date is 09-06-2012 blah blah
<firsttag> content of first tag </firsttag> <sentence> This is the
first sentence in my paragraph that needs to be <bold> displayed.
</bold> </sentence> <secondtag> blah blah blah <italics> another blah
</italics></secondtag> <sentence> This is the second sentence in my
paragraph that needs to be displayed and it has some weird contents
like \n\n\n and inbetween reference tags like <link> http://google.com
</link></sentence> <thirdtag>blah blah </thirdtag><sentence>Tennis is
a great sport, I'm really sad that <link
synthetic="True"><target>Roger Federer </link></target>Roger Federer
lost yesterday.</sentence> 
```

输出应该是这样的

> 这是我的段落中需要显示的第一句话。这是我的段落中需要显示的第二句，它有一些奇怪的内容，比如参考标签之间，比如网球是一项很棒的运动，我真的很难过罗杰·费德勒昨天输了。

我的正则表达式解析后的输出应该只有我们里面的内容和标签。所有标签、奇怪的 \n\n 字符、里面的所有垃圾内容都需要删除，比如“Roger Federer”，因为链接只是指向 Roger Federer 的页面，因为这是一个 Freebase-wiki (WEX)我正在处理的数据集。一个简单的python re 代码来帮助我解决这个问题将非常有用。我正在尝试的代码是这样的。

```
for line in fileinput.input():
        p = re.sub('<[^>]*>', '', line)
        p = re.sub('\n','',p)
print p 
```

由于我正在处理大型文件，因此如果您可以帮助我使用 map-reduce (hadoop) 代码，那也会非常有帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:38:47.563

我为您的问题修改了一个自定义解决方案。您必须输入您的字符串作为参数`s`。

```
def convert_with_regex(s):
    sents = re.compile(r"<sentence>(.*?)</sentence>", re.S)
    fin = re.compile(r"<(.*)>(.*?)</.*>|[\n]+", re.S)
    result=[]
    for sent in sents.findall(s.replace("<bold>","").replace("</bold>","")):
        result.append(fin.sub("",sent))
    return ''.join(result) 
```

我知道它不是那么优雅，而是“形式遵循功能”:)

# php - php在静态函数中没有重载

> ID：12306844
> 
> 赞同：4
> 
> 时间：2012-09-06T19:14:19.740
> 
> 标签：php, overloading, static-methods

我似乎不明白为什么下面的代码只打印两次“TEST”。

```
<?php

class A {
    private $test = "TEST<br />";

    public static function getInstance() {
        return new self();
    }

    public static function someStaticMethod() {
        $a = new self();
        $a->test;
    }

    public function __get($args) {
        echo $this->$args;
    }
}

/* echo's "TEST" */
$a = new A();
$a->test;

/* echo's "TEST" */
$a2 = A::getInstance();
$a2->test;

/*
No output... eeerhm... how come?
Why is $a->test (inside someStaticMethod()) not being overloaded by __get ??
*/
A::someStaticMethod();

?> 
```

PHP网站说（[链接](http://php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.members)）：

> 属性重载仅适用于对象上下文。这些魔术方法不会在静态上下文中触发。因此这些方法不应该被声明为静态的。从 PHP 5.3.0 开始，如果其中一个魔术重载方法被声明为静态，则会发出警告。

但我认为他们试图说你应该将魔法方法声明为静态的。例如：

**公共静态函数 __get(){}**

再加上我实际上在对象上下文中使用它的事实。$a = 新的自我（）；从变量 $a 中返回类 A 的实例。然后我使用 $a->test (object context imo?) 来获取私有的“test”变量，而这个变量又应该被重载......

我很困惑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:21:46.767

从[手册](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)：

*当与尚未声明或在当前范围内不可见的属性或方法交互时，将调用重载方法。*

当您调用静态方法`someStaticMethod()`时，私有 $test 在当前范围内可见，因此不会调用魔术 __get 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:25:58.477

似乎，在 的上下文中`A:: someStaticMethod`，PHP 允许您直接访问私有变量`$test`，因此魔术方法没有执行。如果你`echo $a->test;`从那里，你会看到它正在被访问。

根据[PHP 手册](http://ca3.php.net/manual/en/language.oop5.visibility.php#language.oop5.visibility-other-objects)，这是预期的行为：

> 相同类型的对象将可以访问彼此的私有成员和受保护成员，即使它们不是相同的实例。这是因为在这些对象内部时，特定于实现的细节是已知的。

# c# - 我如何在 LinqPad 中使用 join 来对抗 SE DE？

> ID：12306845
> 
> 赞同：-1
> 
> 时间：2012-09-06T19:14:22.637
> 
> 标签：c#, linq, wcf-data-services, odata, linqpad

我将StackExchange[数据资源管理器](https://data.stackexchange.com/stackoverflow/atom)服务与 LinqPad 一起使用，并使用此代码选择所有用户：

```
from m in Users
select m 
```

现在我想选择用户的所有帖子

```
from u in Users
join p in Posts on u.Id equals p.OwnerUserId
select u 
```

但它不起作用。我的问题在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:19:00.553

您的问题不在于 LinqPad，而在于 OData 协议。它目前不支持 JOIN 概念。

请参阅此[SO 问题](https://stackoverflow.com/questions/4878567/how-do-i-get-an-inner-join-in-a-wcf-data-service)并点击另一个论坛的链接，在该论坛中对此进行了更详细的讨论。

我希望这有帮助。

# html - 无法弄清楚如何解析表格行和某些列并导出到 CSV

> ID：12306850
> 
> 赞同：1
> 
> 时间：2012-09-06T19:14:49.427
> 
> 标签：html, ruby, csv, html-parsing, nokogiri

首先，让我承认我是 Ruby 的新手。我只用了几天，但取得了相当大的成功。我已经能够解析在多个 HTML 文件中单独存在的某些项目并导出为 CSV；但是，我一直在解析多个 HTML 文件上的整个数据表。我能够提取超出我需要的内容，但生成的 CSV 导出将每个 HTML 文件的所有数据作为一个数组包含在 CSV 的单个单元格中。

这是我正在查看的数据的简化版本（每页重复大约 20-30 行）：

```
 <tbody id="threadbits_forum_406"> 
  <tr>
    <td class="alt1" id="td_threadstatusicon_######"> IMG </td> 
    <td class="alt2" align="center" valign="middle"> 
      <a href="http://I.NEED.THIS">
          <div style="height:75px; width:150px; overflow:hidden; background:url(http://I.NEED.THIS/TOO) center 25%;"> </div>
      </a> 
     </td> 
     <td class="alt1" id="td_threadtitle_######" title="blah">[...]</td> 
     <td class="alt2" title="blah"> <div class="smallfont" style="text-align:right; white-space:nowrap"> <a href="dontcare"> </a> </div> </td> 
     <td class="alt1" align="center">[...]</td> 
     <td class="alt2" align="center">[...]</td>
  </tr> 
```

由于该列的类被使用了几次，我无法理解使用什么 CSS 或 XPATH 技巧来提取 DIV 中的背景图片和第二列上的 HREF 链接。DIV 没有其他列中使用的类。

如果有人能给我一点指导，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T05:26:19.503

```
doc.search('tr td:eq(2)').each do |td|
  puts td.at('a')['href'] # http://I.NEED.THIS
  if td.at('div')['style'] =~ /url\((.+)\)/
    puts $1 # http://I.NEED.THIS/TOO
  end
end 
```

# java - Java 中 Wrapper 类的行为

> ID：12306853
> 
> 赞同：3
> 
> 时间：2012-09-06T19:14:57.350
> 
> 标签：java, wrapper

> **可能重复：**
> [为什么 128==128 在此代码中返回 false 而 127==127 返回 true？](https://stackoverflow.com/questions/1700081/why-does-128-128-return-false-but-127-127-return-true-in-this-code)

下面的一段 Java 代码返回 true

```
Integer i1=1;
Integer i2=1;
System.out.println(i1==i2); 
```

那么我们在 Java 中拥有字符串字面量常量池概念的方式，在 Java 中的包装类的情况下是否也有类似的概念？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T19:16:17.677

Java 也有用于小整数之间的整数池，`-128 to 127`因此它对于整数的行为也与字符串常量池相似

您将在`Integer`课堂上找到以下代码

```
private static class IntegerCache {
    static final int high;
    static final Integer cache[];

    static {
        final int low = -128;

        // high value may be configured by property
        int h = 127;
        if (integerCacheHighPropValue != null) {
            // Use Long.decode here to avoid invoking methods that
            // require Integer's autoboxing cache to be initialized
            int i = Long.decode(integerCacheHighPropValue).intValue();
            i = Math.max(i, 127);
            // Maximum array size is Integer.MAX_VALUE
            h = Math.min(i, Integer.MAX_VALUE - -low);
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k < cache.length; k++)
            cache[k] = new Integer(j++);
    }

    private IntegerCache() {}
} 
```

也如毒药在下面的回答中所述：

[第 5 章转换和促销](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)

> 如果被装箱的值 p 是真、假、一个字节或 \u0000 到 \u007f 范围内的一个字符，或者一个介于 -128 和 127（包括）之间的 int 或短数字，则令 r1 和 r2 为p 的任意两个拳击转换。r1 == r2 总是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:17:04.140

对象池是 VM 和/或运行时环境的产物。出于性能原因，它们可能会在那里，但您永远不应该依赖它们。使用 .equals()。

JLS 指定了装箱行为，正如评论中向我指出的那样，这部分在 Integer 类本身中实现；但是，另一个有趣的注意事项是，即使这个池的大小也可以通过 VM 参数进行调整。从整数.java：

```
585       /**
586        * Cache to support the object identity semantics of autoboxing for values between
587        * -128 and 127 (inclusive) as required by JLS.
588        *
589        * The cache is initialized on first usage.  The size of the cache
590        * may be controlled by the -XX:AutoBoxCacheMax=<size> option.
591        * During VM initialization, java.lang.Integer.IntegerCache.high property
592        * may be set and saved in the private system properties in the
593        * sun.misc.VM class.
594        */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:22:43.020

[5.1.7\. 拳击转换] [http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)

> 被装箱的值 p 是 true、false、一个字节或一个在 \u0000 到 \u007f 范围内的字符，或者一个介于 -128 和 127（包括）之间的 int 或短数字，那么让 r1 和 r2 是任何的结果p的两次拳击转换。r1 == r2 总是如此。

但总的来说，依赖它是愚蠢的，因为您首先必须检查数字是否在缓存范围内，然后有条件地使用 == 或 equals()。对原始类型、类和枚举使用 ==，对其他所有类型使用等于。

# jquery - 我需要 Coldfusion 轻松处理从 AJAX 调用返回的 JSON 数据

> ID：12306855
> 
> 赞同：2
> 
> 时间：2012-09-06T19:15:05.590
> 
> 标签：jquery, ajax, coldfusion, coldfusion-9, cfc

我有一个对远程 CFC 的 AJAX 调用，并以我喜欢的方式使用 JSON 取回数据，但是我在输出数据时遇到了麻烦，而不必猜测具有硬编码索引值的结构索引，例如：$('#result' ).val(obj.DATA[0][3]);

如果我硬编码索引，例如 [3]，如果我更改 CFC 中的查询，我必须更改 AJAX 结果。所以我想通过列名来引用返回的数据，但无法弄清楚。这是我的 AJAX 和远程 CFC 的结果：

```
$.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            //pass the data 
            data: {
                method: "getCreativeByID",
                creativeID: $('#hdnCreativeID').val(),
                datasource: "shopping_cart",
        queryformat: "column"
                 },
            success: function(response){
                var obj = $.trim(response);
        var obj = jQuery.parseJSON(obj);
                //alert("response");
                $('#txtSubject').val( obj.COLUMNS["SUBJECT"][0] );
                }
            }

        }); 
```

氟氯化碳：

```
<!---gets the data for the creative--->
    <cffunction name="getCreativeByID" returntype="any" returnformat="JSON" access="remote" output="No">
        <cfargument name="creativeID" required="Yes" type="numeric" />
        <cfargument name="datasource" required="Yes" type="string" />

        <!--- Select creatives and {clickurl} --->
        <cfquery name="qGetCreativeData" datasource="#arguments.datasource#">
            exec sp_get_email_creative @creativeid = #arguments.creativeID#
        </cfquery>

        <cfreturn qGetCreativeData />

    </cffunction> 
```

结果：

![这是 CFC 的结果](../Images/af1bd8a3a58a47e7d4595ebae2c6ae27.png)

任何帮助，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:36:32.040

这适用于除 IE8 及以下版本之外的所有内容。如果您需要完全兼容，您可以编写自己的 indexOf JS 方法。

```
$('#result').val( obj.DATA[0][ obj.COLUMNS.indexOf('Creativename') ] ); 
```

如果你需要它，这个页面有关于在不直接支持它的浏览器中将 indexOf 添加到数组原型的说明：[http ://www.tutorialspoint.com/javascript/array_indexof.htm](http://www.tutorialspoint.com/javascript/array_indexof.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:34:23.300

您还可以使用 SerializeJSON(data, true) 以 JSON 格式返回查询，其中列名作为每行数据的键。因此，在您的 cfc 中，删除 returnformat="JSON"，然后替换

和

在您的 JavaScript 代码中，您现在应该能够逐行遍历返回的 JSON 字符串的数据部分，并通过列名引用这些值。

# sql - SQL Server 的索引列是多少对数据库效率有影响吗？

> ID：12306856
> 
> 赞同：0
> 
> 时间：2012-09-06T19:15:11.770
> 
> 标签：sql, sql-server, performance, tsql, indexing

我正在创建一个新的 SQL Server 2008 数据库，我一直在想，从效率的角度来看，将索引列放在哪里重要吗？

例如，这个：

```
--ID is primary key
CREATE TABLE tbl (ID INT, dtIn DATETIME2, dtOut DATETIME2, Type INT)
INSERT tbl VALUES
(1, '01:30', '02:00', 1),
(2, '02:30', '03:00', 1),
(3, '10:30', '11:00', 2)

CREATE INDEX idx_Type ON tbl(Type) 
```

与此相比：

```
--ID is primary key
CREATE TABLE tbl (ID INT, Type INT, dtIn DATETIME2, dtOut DATETIME2)
INSERT tbl VALUES
(1, 1, '01:30', '02:00'),
(2, 1, '02:30', '03:00'),
(3, 2, '10:30', '11:00')

CREATE INDEX idx_Type ON tbl(Type) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:14:41.280

嗯，听起来很有趣，取决于你如何实现

```
Single column index -it does not matter 

Multi-column index - order of the column does matter in the index,
                     but not in the table 
```

[本有一个证明](http://www.mssqltips.com/sqlservertip/2718/sql-server-index-column-order--does-it-matter/)在这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:32:46.770

不，表中的列放置与使用的资源量无关

# c# - LINQ to Entities 中的 Enum.HasFlag？

> ID：12306858
> 
> 赞同：14
> 
> 时间：2012-09-06T19:15:27.040
> 
> 标签：c#, linq, c#-4.0, lambda, linq-to-entities

我有一面旗帜，例如

```
[Flags]
public enum DaysOfTheWeek
{
    Monday = 1,
    Tuesday = 2,
    Wednesday = 4,
    Thursday = 8,
    Friday = 16,
    Saturday = 32,
    Sunday = 64
} 
```

如果我想使用 Linq 根据包含特定标志的变量进行过滤，我可以尝试在 lambda 语句中使用[Enum.HasFlag](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)来过滤多个标志，例如

```
DaysOfWeek weekendFilter = DaysOfTheWeek.Saturday | DaysOfTheWeek.Sunday;
var weekends = allDays.Where(d => d.DayOfWeek.HasFlag(weekendFilter)); 
```

这目前给出：

> LINQ to Entities 无法识别方法 'Boolean HasFlag(System.Enum)' 方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-06T19:17:21.093

枚举标志基于二进制操作。

```
HasFlag = (allDays & (DaysOfTheWeek.Saturday | DaysOfTheWeek.Sunday)) != 0; 
```

如果您愿意，可以将其抽象为扩展方法。

具体回答你的问题：

```
DaysOfWeek weekendFilter = DaysOfTheWeek.Saturday | DaysOfTheWeek.Sunday;
var weekends = allDays.Where(d => (d.DayOfWeek & weekendFilter) != 0); 
```

我知道您可以将此谓词与 LINQ to SQL 一起使用。它将被翻译成 SQL（SQL Server 支持二进制算术就好了）。不确定 EF 是否具有与其 LINQ 支持相同的能力，通常远不如 L2S。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-08T19:32:23.423

[看起来](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/3951293-support-enum-hasflag)它已在 EF 6.1 中修复。

但是，关于 EF Core，请检查[此](https://github.com/aspnet/EntityFramework/issues/2852).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:05:44.070

该解决方案结合了@usr 的答案，以及对我正在使用的EntityFramework 版本的理解。EF4 不支持保存枚举，所以实体保存一个 int? 并且对象上的枚举属性未映射到 EF。枚举的属性将映射到其 get/set 的成员。

例如

```
public int? DayOfWeekValue { get; set; }
[NotMapped]
public DaysOfWeek DayOfWeek
{
    get { return (DaysOfWeek)DayOfWeekValue; }
    set { DayOfWeekValue= (int)value; }
} 
```

正如@usr 的回答，过滤器需要通过二进制操作来完成。这可以通过将标志设置为扩展字节来完成

```
[Flags]
public enum DaysOfTheWeek : byte
{
    Monday = 1,
    Tuesday = 2,
    Wednesday = 4,
    Thursday = 8,
    Friday = 16,
    Saturday = 32,
    Sunday = 64
} 
```

然后将值和过滤器转换为字节以执行二进制操作：

```
var weekends = allDays.Where(d => (((byte)d.DayOfWeekValue.Value) & (byte)weekendFilter) != 0); 
```

# iphone - 如何检查 UITableViewCell 在 heightForRowAtIndexPath 内是否不为零（已初始化）？

> ID：12306865
> 
> 赞同：3
> 
> 时间：2012-09-06T19:15:52.580
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个`UITableViewCell`我需要在用户类型时调整大小。该单元格有一个`UITextView`作为子视图。

在 heightForRowAtIndexPath 中，我需要检查当前单元格是否为 nil 或已初始化。

如果它为零，我会根据字符串属性中的文本计算它的高度。

如果它不是 nil（即已初始化），我希望它检索单元格子视图的 text 属性（我知道如果单元格已初始化，我可以访问它）。

**如何检查 UITableViewCell 是否为零`heightForRowAtIndexPath:`？**我试过

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([overviewTableView cellForRowAtIndexPath:indexPath] !=nil)
    {    NSLog(@"YEEHAW!");
    }
} 
```

但它会导致错误（可能是因为`cellForRowAtIndexPath:`期望单元格被初始化，而不是零）。另外，我注意到`cellForRowAtIndexPath:`调用`heightForRowAtIndexPath:`（导致递归循环）。

我在网上看到了许多“替代方案”，但我只是想知道这种方法是否可行（或根本有效）。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T19:22:08.093

您可以检查`indexPath`感兴趣的单元格是否可见：

```
if ([[overviewTableView indexPathsForVisibleRows] containsObject:indexPath])
{
    //Do something here
} 
```

希望这可以帮助！

# c# - 拖动时在flowlayoutpanel中滚动？

> ID：12306866
> 
> 赞同：0
> 
> 时间：2012-09-06T19:15:55.757
> 
> 标签：c#, .net, winforms, scroll, flowlayoutpanel

我有一个 Windows 窗体应用程序，它使用 FlowLayoutPanel 控件来显示动态构建的图片框。我已经启用了拖放效果，因为他们可能想要重新排序它们，这仅适用于几个图片框（现在屏幕显示大约 6 个）但如果有更多你尝试在控件下方拖动一个项目它不会滚动，因此您不能将当前在屏幕上的图像（例如图像 4）放到可见图像下方的图像（例如图像 13）。

我看过几篇应该使用 ScrollControllIntoViewMethod 的帖子，我在几个地方尝试过都没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:08:11.443

这就是我最终要做的。

在 DragLeave 事件上创建事件
获取控件的位置
计算控件的高度以获取下边界。
检查鼠标位置，如果超出界限，则将垂直滚动（或水平滚动）更改为常量中的值。

```
private void thumbFlow_DragLeave(object sender, EventArgs e)
{
    int BegY_ThumbFlow = this.thumbFlow.FindForm().PointToClient(this.thumbFlow.Parent.PointToScreen(this.thumbFlow.Location)).Y;
    int thumbFlowBound_Y = this.thumbFlow.Height + BegY_ThumbFlow;
    int mouseY = this.thumbFlow.FindForm().PointToClient(MousePosition).Y;

    while (mouseY >= thumbFlowBound_Y)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value + DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }

    while (mouseY <= BegY_ThumbFlow)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value - DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }
} 
```

希望这对其他人有帮助。

# java - jarsigner 验证失败

> ID：12306867
> 
> 赞同：0
> 
> 时间：2012-09-06T19:15:56.273
> 
> 标签：java, jarsigner

我们使用新安装的 JDK 1.7 对 JAR 文件进行签名。之后，我们立即使用相同的 jarsigner 和相同的密钥库验证它，然后......它失败并显示以下消息：

> 无效的 SHA256 哈希...

签名/验证代码很简单（windows批处理中的两个后续行）：

```
%JAVADIR%\jarsigner -keystore \path\to\SBBJavaCodeSigningStore -storepass my_password SecureBlackbox.JCE.jar sbbjavacodesigningkey
%JAVADIR%\jarsigner -verify -keystore \path\to\SBBJavaCodeSigningStore -storepass my_password SecureBlackbox.JCE.jar 
```

最糟糕的是，问题似乎是随机的，当验证失败时，jarsigner 甚至没有设置 errorlevel（退出代码）。

它是Java签名者或加密类的错误还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:54:20.483

我将解决方案放在这里作为其他用户的教训。

似乎后来在批处理文件中，我们对所有 JAR 进行了批处理，并且这个特定的 JAR 被签名了两次。jarsigner 允许您执行第二个签名并以这种方式破坏第一个签名。

# sql-server-2008 - 有条件地从列表中删除服务器上的数据库

> ID：12306870
> 
> 赞同：1
> 
> 时间：2012-09-06T19:16:09.473
> 
> 标签：sql-server-2008, tsql

我已经根据一组条件创建了一个我想要删除的数据库列表，并`delete_table`在主数据库中为其命名（这已经不包括 master、tempdb、model 和 msdb）。此表中唯一的一列`name`包含应删除的确切数据库名称。

我将如何编写脚本以根据此列表删除服务器上的数据库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:22:06.780

如果您想要一种快速编写`DROP DATABASE`命令脚本的方法：

```
--set database in single user mode, rolling back active transactions...be careful!
SELECT 'ALTER DATABASE ' + QUOTENAME(name) + ' SET SINGLE_USER WITH ROLLBACK IMMEDIATE;' FROM sys.databases WHERE name IN (...)
UNION
--drop database
SELECT 'DROP DATABASE ' + QUOTENAME(name) + ';' FROM sys.databases WHERE name IN (...); 
```

`...`用逗号分隔的数据库名称列表替换（例如`N'DatabaseOne', 'DatabaseTwo'`，等）。运行选择查询，然后使用结果执行。

我不明白需要用户表来解决这个问题。作为旁注，您应该避免在`master`数据库中创建用户对象。当然，除了基于美学的原因之外，我想不出其他原因，但这似乎是*错误*的。

**更多关于系统数据库中用户创建的对象...**

[MSDN](http://msdn.microsoft.com/en-us/library/ms187837.aspx)声明不应在 中创建用户对象`master`，但我认为提供的原因很薄弱。一个更实质性的论点涉及在服务包/版本升级期间对系统数据库对象发生的情况缺乏控制。

我并不是说下一次服务包升级会清除用户在 中创建的对象`master`，但谁知道呢。将您的实用程序和管理类型对象放入用户创建的数据库中，这样就不会混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:04:28.417

快捷方式

```
DECLARE @SQL VARCHAR(MAX) = ''
SELECT @SQL = @SQL+ 'DROP DATABASE ' + QUOTENAME(name) + ';' 
FROM delete_table
EXECUTE (@SQL) 
```

一种更安全的方法来确保数据库存在并且每个数据库只被编写一次脚本以防你有重复

```
DECLARE @SQL VARCHAR(MAX) = ''
SELECT @SQL = @SQL+ 'DROP DATABASE ' + QUOTENAME(name) + ';' 
FROM sys.databases WHERE name IN (SELECT name FROM delete_table); 
EXECUTE (@SQL) 
```

**编辑**添加alter database只需添加这一行

```
DECLARE @SQL VARCHAR(MAX) = ''
SELECT @SQL = @SQL+ 
'ALTER DATABASE '+ QUOTENAME(name) + 'SET SINGLE_USER WITH ROLLBACK IMMEDIATE;' +
'DROP DATABASE ' + QUOTENAME(name) + ';' 
FROM sys.databases WHERE name IN (SELECT name FROM delete_table); 
EXECUTE (@SQL) 
```

# ruby-on-rails - 不同的更新日期取决于上下文

> ID：12306872
> 
> 赞同：0
> 
> 时间：2012-09-06T19:16:18.973
> 
> 标签：ruby-on-rails, json, jbuilder

当我在列表上下文中访问特定模型的数据时，updated_at 日期没有更改，但是，当我在单个（显示）上下文中访问同一记录时，日期似乎确实发生了更改。

**列出上下文**

![在此处输入图像描述](../Images/a41d81d2562ff3f9c441d56d7a49372c.png)

**显示上下文**

![在此处输入图像描述](../Images/a23d00c32e607e8fa85b2b5d8b1c1120.png)

我将 jbuilder 用于 JSON 视图。它们看起来像这样：

**列表上下文 (index.json.jbuilder)**

```
json.array! @media_files do |json, media_file|
  json.(media_file, :id, :name, :description, :category_id, :mime, :media_file_type_id, :size, :shareable, :deleted, :keywords, :updated_at, :version)
  json.url signed_url(media_file.url)
  json.thumb_url signed_url(media_file.thumb_url)
end 
```

**显示上下文 (show.json.jbuilder)**

```
json.(@media_file, :id, :name, :description, :category_id, :mime, :media_file_type_id, :size, :shareable, :deleted, :keywords, :updated_at, :version)
json.url signed_url(@media_file.url)
json.thumb_url signed_url(@media_file.thumb_url) 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:08:59.590

所以我最终只是在生产中禁用了缓存。这是我的临时解决办法。我很想听到一些关于解决此问题的更好方法的反馈，因为这实际上只是一种解决方法。

# android - 值中带有逗号的 Android DefaultHttpClient Cookie

> ID：12306873
> 
> 赞同：0
> 
> 时间：2012-09-06T19:16:25.090
> 
> 标签：android, cookies, httpclient

我正在尝试在我有一段时间的 Android 应用程序中使用 DefaultHttpClient。我一直在通过身份验证的服务器最近更改了他们的一些东西，因此它破坏了我的应用程序。我一直在试图找出原因，我认为这与他们发送给我的 cookie 值中有逗号有关；我正在使用的系统管理员能够向我展示我应该拥有的价值，并且我通过将 cookie 打印到日志中看到了我的应用程序获得的价值。他发给我的：

Cookie：LastMRH_Session=f9d0e6b4；MRHSession=2ab4fe11c9258eb12ebe60d6f9d0e6b4；F5_ST=1,1,1,1346792510,604800; ...

当我打印名称和值时，我在日志中得到的只是 F5_ST 和 1。

有没有人遇到过这种情况或知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:32:38.617

好吧，没有解决我遇到的问题，但我得到了整个 cookie 供以下人员使用：

```
params.setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.NETSCAPE); 
```

不确定对我其他连接的影响，但至少现在它似乎把整个 cookie 还给了我。

# sql - 从多个相关表中删除

> ID：12306879
> 
> 赞同：3
> 
> 时间：2012-09-06T19:17:01.233
> 
> 标签：sql, sql-server-2008

我对 SQL Server 还很陌生，仍在学习一些交易技巧，而另一个教我的人一周没有工作，通常我会先运行他的语句，然后运行它。

我要做的是删除此 select 语句中返回的所有内容：

```
SELECT * from LOCATIONS a Join CONTACTS b on a.location_ID = b.Location_ID 
join CONTACTS_SOURCES c on b.contact_ID = c.Contact_ID  where c.Source_ID = 10014918 
```

我需要删除此语句从 CONTACTS 表和 LOCATIONS 表返回的内容。这样做时，哪条路线是最好的路线？

路线A：

```
delete from LOCATIONS a
Join CONTACTS b
on a.location_ID = b.Location_ID
join CONTACTS_SOURCES c
on b.contact_ID = c.Contact_ID  where c.Source_ID = 10014918 
```

或路线 B。

```
DELETE from LOCATIONS where (SELECT * from LOCATIONS a
Join CONTACTS b
on a.location_ID = b.Location_ID
join CONTACTS_SOURCES c
on b.contact_ID = c.Contact_ID  where c.Source_ID = 10014918)

DELETE FROM CONTACTS where (SELECT * from LOCATIONS a
Join CONTACTS b
on a.location_ID = b.Location_ID
join CONTACTS_SOURCES c
on b.contact_ID = c.Contact_ID  where c.Source_ID = 10014918) 
```

我感觉 Route A. 不会从 LOCATIONS 和 CONTACTS 表中删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T19:20:24.573

您的感觉是对的：DELETE 查询（实际上是任何 DML 查询）只能影响单个表。Route B 的问题是第二个查询不起作用，因为第一个查询删除了所有可能成为连接候选的行。

怎么样：

```
SELECT l.Location_ID, c.Contact_ID
  INTO #x
  FROM dbo.LOCATIONS AS l
  INNER JOIN dbo.CONTACTS AS c
  ON l.location_ID = c.Location_ID
  INNER JOIN dbo.CONTACTS_SOURCES AS cs
  ON c.contact_ID = cs.Contact_ID 
  WHERE cs.Source_ID = 10014918;

DELETE dbo.CONTACTS_SOURCES WHERE Contact_ID IN (SELECT Contact_ID FROM #x);

DELETE dbo.CONTACTS WHERE Contact_ID IN (SELECT Contact_ID FROM #x);

DELETE dbo.LOCATIONS WHERE Location_ID IN (SELECT Location_ID FROM #x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:23:14.710

如果您在所有 3 个表（联系人、位置和联系人来源）上都具有参照完整性，那么您需要按顺序从叶删除到父表：

1.  联系方式_来源
2.  联系人
3.  地点

# c++ - C++98 / C++03 中聚合末尾的附加逗号

> ID：12306885
> 
> 赞同：0
> 
> 时间：2012-09-06T19:17:24.217
> 
> 标签：c++

为什么我不能在 C++98/C++03 中聚合的初始化列表末尾使用额外的逗号？

**ISO/IEC 14882:2003**

> 8.5 初始化器 [dcl.init]
> 
> = 初始化子句（表达式列表）初始化程序子句：赋值表达式 {初始化程序列表，选择}{}初始化程序列表：初始化程序子句初始化程序列表，初始化程序子句

在带有 opt 说明符的初始化列表之后还有额外的逗号，对吗？为什么我不能使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:26:15.700

这里的标准非常清楚：允许使用尾随逗号*（*枚举中的常量声明存在类似的功能）。您不能使用它的事实是您正在使用的实现质量问题。

# ruby - 撬命令不可用（Linux Mint Maya）

> ID：12306886
> 
> 赞同：2
> 
> 时间：2012-09-06T19:17:24.667
> 
> 标签：ruby, gem, pry, linux-mint

当我输入 pry 以启动 pry gem shell 时，我的终端（Gnome 3.4.1.1）响应：

```
$ pry
No command 'pry' found, did you mean:
 Command 'pr' from package 'coreutils' (main)
pry: command not found 
```

我安装了撬使用`$ gem install pry`

如标题中所述，我正在运行 Linux Mint Maya (13)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-21T15:59:57.720

如果您使用 rbenv 安装了 pry，那么您需要在终端中运行以下命令。

`rbenv rehash`

rbenv 将当前的 Ruby 可执行文件缓存为所谓的 shim。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:54:08.240

我也遇到了这个问题，通过在终端输入命令解决了：

```
rvm rubygems current 
```

# php - 自动评论 Cron 作业不再工作：致命错误：未捕获 OAuthException：签名错误

> ID：12306890
> 
> 赞同：2
> 
> 时间：2012-09-06T19:17:54.150
> 
> 标签：php, facebook-access-token

几个月前，我编写了一个小应用程序，它可以解析来自我客户博客页面的字符串，并将其作为评论发布到他们的 Facebook 墙上，我拥有管理凭据。

客户只需验证我的应用程序一次，然后，通过现在已弃用的“offline_access”权限，我可以代表他们将其发布到他们的墙上。

无论我使用旧 SDK 还是最新 SDK，代码都不再有效。我试图将我的代码（如下）迁移到最新版本的 SDK 和用于处理身份验证的最新协议，但无济于事。我还让客户使用“manage_pages”范围（我从第一天就开始使用）重新验证了我的应用程序，没有任何区别。

我得到的错误是`Fatal error: Uncaught OAuthException: Bad signature`

我一直在 Facebook 的文档和 Stack Overflow 的智者之间徘徊，我无计可施。我认为我的问题在于无法生成“长期存在的”访问令牌，但我必须能够做到这一点，而客户端不必每次都登录 Facebook（或者根本不登录） . 那么其他应用程序（例如那些将用户的 Twitter 状态镜像到 Facebook 的应用程序）如何在没有后续用户登录/身份验证的情况下处理离线发布？

我注意到如果我使用 Facebook 的 Graph API Explorer，我的代码就可以工作。但这需要我看到对话，这在我的客户的情况下不起作用。（几个月前从不需要登录/重新验证。）

在过去的一周里，我一直在努力寻找答案，我一直在绕圈子：

[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens)

[https://developers.facebook.com/roadmap/offline-access-removal](https://developers.facebook.com/roadmap/offline-access-removal)

[Facebook API：如何在不登录的情况下发布到自己的应用程序墙](https://stackoverflow.com/questions/5205602/facebook-api-how-to-post-to-own-application-wall-without-login)

[http://facebook.stackoverflow.com/questions/11839544/how-to-avoid-fatal-error-uncaught-oauhexception-when-using-cron-job](http://facebook.stackoverflow.com/questions/11839544/how-to-avoid-fatal-error-uncaught-oauthexception-when-using-cron-job)

...仅举几例。我感觉自己就像一只困在浴缸里的蜘蛛。

如果有人可以分享一个适合我的特殊情况的实用代码示例，那将不胜感激，谢谢。这是我试图适应最新的 Facebook PHP SDK 和协议的代码：

```
<?php

require_once 'facebook.php';

$facebook_access_token_url = "https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=" . FACEBOOK_APP_ID . "&client_secret=" . FACEBOOK_APP_SECRET;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $facebook_access_token_url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$facebook_access_token = curl_exec($ch); 
curl_close($ch);

$config['appId'] = FACEBOOK_APP_ID;
$config['secret'] = FACEBOOK_APP_SECRET;
$config['fileUpload'] = false; // optional
$facebook = new Facebook($config);

$facebook->setAccessToken($facebook_access_token);

$page_id = FACEBOOK_APP_PAGE_ID;
$facebook_access_token = "";
$result = $facebook->api('/' . FACEBOOK_ACCOUNT_ADMIN_ID . '/accounts');
foreach($result['data'] as $page){
    if($page['id'] == $page_id) {
        $facebook_access_token = $page['access_token'];
        break;
    }
}

$facebook->setAccessToken($facebook_access_token);
$attachment = array(
    'access_token' => $facebook_access_token,
    'message' => 'Test message',
    'scope' => 'manage_pages,publish_stream,publish_actions'
);

$result = $facebook->api('/' . $_GET['post_id'] . '/comments', 'post', $attachment);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:39:43.070

如果您使用**长期**用户访问令牌获取页面访问令牌，则默认情况下页面令牌不会过期 - 因此在这种情况下，不推荐使用 offline_access 并没有实际问题。

# rally - SDK2查询计数：哪个更高效？

> ID：12306891
> 
> 赞同：1
> 
> 时间：2012-09-06T19:18:03.170
> 
> 标签：rally

我有一个应用程序显示有关项目中缺陷的指标。

我可以选择进行一个返回所有缺陷的查询，从中我可以分解出大约四个不同的指标（在 90 天、180 天内有多少缺陷逃脱了 QA，然后再次使用相同的指标，但只计算 sev1/sev2缺陷）。

我可以进行四个查询并将结果限制为一个，这样我就可以对每个查询进行计数。或者我可以进行一个包含所有问题的查询（所有在 180 天内逃脱 QA 的缺陷），然后计算差异。

我在计算最坏的情况，在过去六个月中逃脱 QA 的缺陷数量通常会少于 100 个，最坏的情况肯定会少于 500 个。

你会做什么——四个查询，每个查询一个结果，或者一个查询平均可能返回 50，也许最坏的情况下返回 500？

我想关键问题是——拐点在哪里？也许明天我有更多的指标（谁知道，8 个？）和不同的平均缺陷数。有没有我可以用来帮助选择哪种方法的经验法则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:33:31.770

好吧，我可能会进行一系列四个查询并使用结果计数。如果您预计 500 个缺陷最终将成为三个查询，每个查询都有 200 个缺陷。

您执行每个单独查询并使用总结果计数的解决方案即使存在大量缺陷也是安全的。另外，我通常认为认为我知道应用程序将要处理的数据集是一个糟糕的计划。我的大多数应用程序最终的寿命都比我预期的要长得多，并且被用于更大的数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:35:52.053

最大页面大小为 200，因此听起来您需要 1 到 3 个页面来获取所有数据，而页面大小为 1 并使用 TotalResultCount 的 4 个查询...

如果您使用多查询方法（让服务器根据您提供的过滤器为您进行计数），您肯定会编写更少的聚合代码。

我猜这 4 个独立的查询可能会更快，但听到你的实验结果会很有趣......

# matlab - 通过设置 tspan=[to:very_small_step:tf] 会影响 ode45 求解器的步长吗？

> ID：12306893
> 
> 赞同：0
> 
> 时间：2012-09-06T19:18:19.033
> 
> 标签：matlab, ode

我知道`ode45`求解器具有由 Matlab 程序本身控制的自适应步长。以下描述由[Matlab 网站](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/ode45.html)给出：

> 指定具有两个以上元素的 tspan 不会影响 > 求解器用于遍历从 tspan(1) 到 tspan(end) 的区间的内部时间步长。ODE >suite 中的所有求解器都通过基本公式的连续扩展获得输出值。尽管 >a 求解器不一定精确到 tspan 中指定的时间点，但在指定时间点产生的 >solutions 与在内部时间点计算的 >solutions 具有相同的精度顺序。

但是，如果我在 中指定`very_small_step`，`tspan=[to:very_small_step:tf]`这是否会影响程序控制的步长。这个强制步长会小于 的值`very_small_step`吗？OR matlab会在指定时间点进行插值计算得到对应的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:02:47.070

从你的报价

> 指定具有两个以上元素的 tspan 不会影响内部时间步长

还存在[MaxStep](http://www.mathworks.ch/help/techdoc/ref/odeset.html#f92-1039598)属性来配置最大步长。[对于求解器之间的步骤，请使用此处](http://www.mathworks.ch/help/techdoc/ref/odeset.html#oderefine)描述的连续扩展公式。

你为什么还要问？你遇到什么问题？

# qt - 在 QGLFramebufferObject 上渲染时错误的 alpha 混合

> ID：12306894
> 
> 赞同：5
> 
> 时间：2012-09-06T19:18:24.400
> 
> 标签：qt, opengl

我为我的应用程序编写了一个基于 OpenGL 的矢量图形渲染器。它需要渲染到帧缓冲区对象而不是直接渲染到屏幕。由于我在 Qt 中编写应用程序，因此我使用 QGLFramebufferObject，它是 OpenGL 帧缓冲区对象的包装类。

我创建了一个最小的示例，它显示了在渲染更复杂的东西时我也得到了错误的结果（例如，使用片段着色器将颜色设置为非一个 alpha 值）。我只是在黑色清除屏幕上渲染一个红色圆圈和一个半透明的绿色圆圈，然后在 FBO 上同样如此：

```
void MainWidget::initializeGL()
{
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glClearColor(0, 0, 0, 0);
}

void MainWidget::resizeGL(int w, int h)
{
    glViewport(0, 0, w, h);
}

void MainWidget::paintGL()
{
    // DRAW ON THE SCREEN
    {
        glClear(GL_COLOR_BUFFER_BIT);
        glPointSize(100);
        glEnable(GL_POINT_SMOOTH);
        glBegin(GL_POINTS);
        glColor4f(1, 0, 0, 1);
        glVertex2f(-.2, 0);
        glColor4f(0, 1, 0, .5);
        glVertex2f( .2, 0);
        glEnd();
    }

    QGLFramebufferObject fbo(width(), height());
    fbo.bind();

    // DRAW ON THE FBO USING THE SAME CODE AND THE SAME CONTEXT
    {
        glClear(GL_COLOR_BUFFER_BIT);
        glPointSize(100);
        glEnable(GL_POINT_SMOOTH);
        glBegin(GL_POINTS);
        glColor4f(1, 0, 0, 1);
        glVertex2f(-.2, 0);
        glColor4f(0, 1, 0, .5);
        glVertex2f( .2, 0);
        glEnd();
    }

    fbo.release();
    fbo.toImage().save("debug.png");
} 
```

结果在屏幕上看起来像这样（缩放 400%）：

![在此处输入图像描述](../Images/099abac2f5f9b21f7e8f5f7e80806454.png)

渲染到 QGLFramebufferObject 看起来像这样（也缩放 400%）：

![在此处输入图像描述](../Images/e2adaa5979983eff00fc3996e276af68.png)

请注意，此图像不是完全不透明的，因此这里是相同的图像，后面添加了一个棋盘：

![在此处输入图像描述](../Images/7238abc51eaaccc4e626fd44031bcdb9.png)

即使两个圆圈重叠的区域也不是完全不透明的。而且抗锯齿看起来很丑。

**这是怎么发生的？我该如何解决这个问题？**

我已经尝试过：

*   不同的混合功能。
*   显式禁用 QGLFramebufferObject 上的深度缓冲区、模板缓冲区和采样。我不确定 QGLFramebufferObject 默认格式是否添加了我不想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:40:55.070

尝试以下操作：

```
QGLFramebufferObjectFormat fmt;
fmt.setSamples(1); // or 4 or disable this line
fmt.setInternalTextureFormat(GL_RGBA8);
QGLFramebufferObject fbo(width(), height(), fmt); 
```

这会强制使用特定的像素格式，并且还会通过使用多重采样禁用渲染到纹理（否则 QT 总是渲染到纹理）。这可能会产生不同的结果。您也可以尝试这种格式。

另外，你的硬件是什么？我的最大点大小只有 64 像素（GTX 260），您正在尝试渲染 100 像素点。这可能是个问题。是否产生任何 OpenGL 错误？小点也会发生同样的情况吗？

您也可以尝试提示（如果在 QT 中可能）：

```
glHint(GL_POINT_SMOOTH_HINT, GL_NICEST); 
```

但我不希望这会改变任何事情。

# javascript - 删除对象时杀死 setInterval

> ID：12306897
> 
> 赞同：3
> 
> 时间：2012-09-06T19:18:31.623
> 
> 标签：javascript

我有以下 HTML 页面：

```
<html>
<script>
   var global = {};
   global.obj = {
      // when called this function will cause 'hello' to be output to the
      // console every 1 second
      repeat: function () {
         setInterval(function () {
            console.log('hello');
         }, 1000);
      }
   }

   global.obj.repeat();
   global.obj = [];

   // even after we overwrite global.obj, 'hello' 
   // continues to be output to the console every second
</script>
</html> 
```

我想写一个类似repeat的函数，除了global.obj被覆盖的时候，setInterval会停止被调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:33:10.773

你会想要使用 getter/setter，[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Working_with_Objects#Defining_getters_and_setters)在这方面有一些很好的文档。

您可能需要稍微调整一下：

```
var intervalRef = null;

var global = {objRef: {}};
global.__defineSetter__("obj", function(o) {
  if (intervalRef)
    clearInterval(intervalRef);
  intervalRef = null;
  global.objRef = o;
});

global.__defineGetter__("obj", function() {
  return global.objRef;
});

global.obj = {
  repeat: function () {
     intervalRef = setInterval(function () {
        console.log('hello');
     }, 1000);
  }
}

global.obj.repeat();
setTimeout(function() { //this just demonstrates that you can let it run for 5 secs before clearing the timer.
  global.obj = [];
}, 5000); 
```

我对此进行了测试并验证了它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:41:42.910

看到[这个](http://jsfiddle.net/rcTjH/1/)小提琴：

```
// html
<p id="stopper">Click</p>​

// js
var counter = new Object();

counter.timer = setInterval( function(){
    console.log("Hello!");
}, 1000 );

$("#stopper").click(function(){
    console.log("Stopping");
    clearInterval(counter.timer);
});
​ 
```

# javascript - 从 IE 中的不同元素调用文件输入控件时无法正确触发

> ID：12306902
> 
> 赞同：1
> 
> 时间：2012-09-06T19:18:41.813
> 
> 标签：javascript, jquery, html, css

我试图重新创建 gmail 的文件上传功能——而不是使用默认的文件输入类型——我隐藏了该元素并使用 href 来模拟点击默认控件。

这部分我在所有浏览器中都工作过，但我使用文件控件的 onchange 句柄来启动文件上传（提交临时表单/将结果发布到 iframe）。问题是在选择文件后，控件在 IE 中显示为空白，但在 FF 和 Chrome 中工作正常。我只需要支持 IE 8+。

最后一个棘手的问题 - 这发生在现有表单中，因此我使用 jQuery 将表单附加到文档的底部。

```
<a id ="upper">Upload</a> 
```

触发这个 jQuery

```
$("#upper").click(function() {
  $('#dynamic_files').click();
}); 
```

动态添加表单

```
 $().ready(function() {
            $('body').append('<form id="my_form" name="upload" action="/fil/upload"       
method="POST" enctype="multipart/form-data" target="my_iframe">
<iframe id="my_iframe" name="my_iframe" src="" style="display:block;"></iframe>  
<input type="file" name="files[resource_file]" id="dynamic_files"  
onChange="this.form.submit();" /></form>');
       }); 
```

还想指出，在 IE 中，如果我单击默认文件选择器控件而不是我的“快捷方式”链接，则此代码有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:23:27.933

这是 IE 8 的限制。Gmail 使用 flash 来绕过使用文件输入控件。您可以伪造它的一种方法是将控件的不透明度设置为 0 并将其覆盖在您的按钮上，如本示例所示：

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

还有一堆预先构建的解决方案可以从你那里抽象出来。我过去使用的一个是 PLUpload：

[http://www.plupload.com/](http://www.plupload.com/)

# raphael - 为 Raphael 路径添加填充/边界以对鼠标悬停事件宽大处理

> ID：12306903
> 
> 赞同：0
> 
> 时间：2012-09-06T19:18:50.030
> 
> 标签：raphael

考虑一个用 Raphael 绘制的路径（它是一条线），它带有一个将光标设置为悬停的 mouseover 事件。对于细路径/线，很难将鼠标悬停在该路径上。

有没有办法为路径添加不可见的边框/填充/边界，以便更容易将鼠标悬停在路径上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:53:06.510

实现这一点的一个非常简单的方法如下：

1.  使用 复制您用作悬停触发器的路径`element`。`clone`
2.  使用 将克隆移动到当前路径的前面`element`。`insertAfter`
3.  使用`element`. `attr`将克隆的不透明度设置为略高于 0，这样它实际上是不可见的，但仍会接收单击事件，并具有等于原始路径的 stroke-width + 您所需的边距的 stroke-width 属性；
4.  将悬停事件添加到克隆的元素。

这将为您提供一个比原始路径更粗的不可见路径，它能够接收鼠标事件来代替原始的、更细的路径。

我在[这里](http://voidblossom.com/tests/clickMargin.php)对此进行了模拟，并设置了光标属性，因此当鼠标悬停在代理路径上时，您会看到十字准线。

# java - 前瞻性思考：工作场所的图书馆依赖处理

> ID：12306907
> 
> 赞同：0
> 
> 时间：2012-09-06T19:19:05.480
> 
> 标签：java, svn, maven, versioning

目前我的工作有点奇怪。我在一个非官方的工程团队工作，该团队为出现的问题创建工具/解决方案。我们的许多工作都是在团队成员的旧工作的基础上逐步建立的，以实现快速开发。但随着我们代码库的增长，信息管理的噩梦随之而来。

目前我们正在使用 Ant-Libraries 并将项目的所有库存储在“包含”文件夹中。这意味着我们有很多过时/坏的库可以快速包含在项目中。我一直在寻找一种将某些东西合并到 Subversion 中的方法，该方法可以使我们的库保持最新，并有助于使我们标准化和保持最新，同时对工作流程的干扰最小（编辑 pom.xml 以制作 maven 项目有点令人生畏）以前没有使用过它的人。

有谁知道任何处理依赖项并允许简单地上传/下载库/项目以供团队使用/工作的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:24:53.750

听起来你只需要一个依赖管理器。您已经引用了最流行的 Maven 之一。Maven 比它看起来更容易使用。如果您对源代码和测试源代码使用标准化的目录结构，则可以使用单个命令构建/测试/部署。

即使不使用标准化结构，也有好处。我工作的开发商店也使用 Ant 进行构建，而我们的构建非常陈旧、脆弱且无法移动（很多硬编码路径）。然而，maven 的 ant 插件允许您使用 Maven 来进行依赖管理，同时仍然使用您的 ant 构建脚本。这将允许您消除包含目录并仅引用您的 pom 文件。

[Maven Ant 插件](http://maven.apache.org/ant-tasks/index.html)

我听说过的另一个选择是与 Ant 紧密合作的 Apache Ivy。我没有这方面的经验。

# c# - 在插入/添加之前如何检查 C# 中的列表的内容？谓词类有什么用？

> ID：12306909
> 
> 赞同：0
> 
> 时间：2012-09-06T19:19:18.457
> 
> 标签：c#, list

在使用 List 类时，我注意到我正在寻找的布尔值是：

```
 if(lstInts.Exists(x)){...} 
```

X 是 T 的谓词，与 lstInts 相同。我很困惑为什么在这种情况下你不能将 int 传递给 int，以及为什么 X 的类型不是 T 类型。

示例我正在测试：

```
List<int> listInt = new List<int>();
int akey = Convert.toInt32(myMatch.Value);
Predicate<int> pre = new Predicate<int>(akey);  //akey is not the correct constructor param.
if(listInt.Exists(pre)){
   listInt.add(akey);
} 
```

有没有理由有额外的谓词步骤，或者....如果我的逻辑不正确？

*我还注意到谓词结构不采用 T 类型的项目。对于它是如何工作的有点困惑。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:23:05.677

您也可以使用[Contains()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)方法

```
List<int> listInt = new List<int>();
int akey = Convert.toInt32(myMatch.Value);

if(listInt.Contains(akey)){
  listInt.add(akey); 
} 
```

或者交替使用[Any()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)

```
if(listInt.Any(I => I == akey)) { 
  // Do your logic 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:23:21.887

`Predicate<T>`是一个委托（返回`bool`），它允许您找到一个符合某些条件的项目（这就是为什么要检查的项目被传递给它并作为一个参数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T19:25:27.047

[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)对于不允许重复的集合类型（只是默默地忽略它们），这将是一个很好的用途。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:42:07.690

好吧，对于您的场景，您应该在类上使用该`Contains`方法。`List`

那么你可能会问，存在的目的是什么？好吧，该`Contains`方法使用`Equals`对象上的方法来确定您正在检查的项目是否包含在列表中。这仅在类重写了`Equals`相等检查的方法时才有效。如果没有，那么您认为相等的事物的两个单独实例将不被视为相等。

除此之外，也许您想使用该`Equals`方法提供的不同逻辑。现在，确定列表中是否存在某些内容的唯一方法是自己迭代它，或者编写自己的 EqualityComparer 来检查实例的相等性。

因此，列表类所做的是公开一些方法，`Exists`以便您可以轻松地提供自己的逻辑，同时为您进行样板迭代。

**例子**

考虑您有一个`Dog`类型列表。现在，狗类已经覆盖了该`Equals`方法，所以没有办法检查一只狗是否与另一只狗相等，但他们有一些关于狗的信息，比如它的名字和主人。所以考虑以下

```
List<Dog> dogs = new List<Dog> {
    new Dog { Name = "Fido", Owner = "Julie" },
    new Dog { Name = "Bruno", Owner = "Julie" },
    new Dog { Name = "Fido", Owner = "George" }
};

Dog fido = new Dog { Name = "Fido", Owner = "Julie" }; 
```

*   `List.Contains(fido)`
    *   返回 false（因为`Equals`方法尚未被覆盖）
*   `List.Exists(x => fido.Name == x.Name && fido.Owner == x.Owner)`
    *   返回 true，因为您正在检查属性的相等性，这些属性是字符串，具有相等性覆盖。

如果您要查看列表类的源代码，您可能会看到类似这样的内容。

```
public bool Exists(Predicate<Dog> predicate) {
    foreach (Dog item in Items) {
        if (predicate(item))
            return true;
    }

    return false;
} 
```

现在，如果您填写我上面的谓词，该方法将如下所示

```
public bool Exists(Dog other) {
    foreach (Dog item in Items) {
        if (item.Name == other.Name && item.Owner == other.Owner)
            return true;
    }

    return false;
} 
```

# c# - 为什么此实体框架 LINQ 查询不会导致 SELECT DISTINCT？

> ID：12306913
> 
> 赞同：2
> 
> 时间：2012-09-06T19:19:26.247
> 
> 标签：c#, sql, entity-framework, linq-to-entities, distinct

给定实体：

```
[Table("Clients")]
public class Client
{
    [Column("txtClientId")]
    public string ClientId { get; set; }

    [Column("OrganizationName")]
    public string ClientName { get; set; }
} 
```

和 LINQ 查询：

```
var clients = (from c in database.Clients
                where c.ClientId.Contains(term) || c.ClientName.Contains(term)                
                select c).Distinct(); 
```

'clients' 的 VS 调试显示以下查询：

```
SELECT 
    [Extent1].[txtClientId] AS [txtClientId], 
    [Extent1].[OrganizationName] AS [OrganizationName]
FROM [dbo].[Clients] AS [Extent1]
WHERE ([Extent1].[txtClientId] LIKE @p__linq__0 ESCAPE N'~') OR 
    ([Extent1].[OrganizationName] LIKE @p__linq__1 ESCAPE N'~') 
```

请注意，没有“不同”。我对此进行了搜索，发现了一些解决方法，例如分组、匿名类型或在代码中执行不同的操作（即 ToList().Distinct()），但理想情况下，我想要 SQL：

```
SELECT DISTINCT
    [Extent1].[txtClientId] AS [txtClientId], 
    [Extent1].[OrganizationName] AS [OrganizationName]
FROM [dbo].[Clients] AS [Extent1]
WHERE ([Extent1].[txtClientId] LIKE @p__linq__0 ESCAPE N'~') OR 
    ([Extent1].[OrganizationName] LIKE @p__linq__1 ESCAPE N'~') 
```

我已经尝试使用标记为“[Key]”的“ClientId”，但行为没有变化。

为什么这没有生成我期望的查询，我该如何让它这样做？由于我有解决方法，我更感兴趣的是了解我在这里缺少什么以及获得所需 SQL 的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:27:50.680

您正在调用[`Queryable.Distinct`](http://msdn.microsoft.com/en-us/library/bb348456.aspx)，这绝对可以翻译为 Sql。

也许 LinqToEntities 将您在类上使用 Distinct 理解`Client`为“引用不同”。数据库中的每一行都是一个引用不同的实例，即使没有主键也是如此。

尝试将您想要的列投影到匿名类型（应该使用值相等而不是引用相等）：

```
select new {c.ClientId, c.ClientName} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:44:36.137

我相信这与在链接查询中使用“.Contains()”有关。
也许您应该尝试使用 LINQ 链接而不是查询语法。
IE

```
database
    .Clients
    .Where (client => client.ClientId.Contains(term) || client.ClientName.Contains(term))
    .Distinct(); 
```

# .net - 为什么程序不喜欢从 Cygwin 运行？

> ID：12306914
> 
> 赞同：-1
> 
> 时间：2012-09-06T19:19:27.923
> 
> 标签：.net, command-line, console, cygwin, cmd

我喜欢使用 Cygwin/rxvt 作为我选择的终端，因为 cmd.exe 真的很烂。我有一个程序的问题，因为它不会在大多数情况下从 rxvt 运行。基本上，我可以显示帮助文本，但仅此而已。我尝试做的所有其他事情都以程序静默退出而告终。该程序在 cmd.exe 中运行良好，从 Cygwin 执行该程序有什么不同？

此外，仅供参考，该程序是一个我可以访问源代码的 .Net 程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:36:26.413

我住在 Cygwin 中，使用我编写的以及我没有编写的 .NET 二进制文件。然而，由于 Cygwin 是一个 Linux 仿真层，您的工具可能不喜欢那个环境。如果你有源代码，调试它退出的原因是你最好的选择。

话虽如此，请确保您已为运行 Windows EXE 配置了 Cygwin 安装：

*   确保您运行的是最新的 Cygwin（[我在 1.7.15 中遇到了一些二进制文件的问题](https://stackoverflow.com/questions/10804710/nant-hanging-when-run-in-cygwin)）
*   将您的`CYGWIN`环境变量设置为“pipe_byte”（无引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:47:14.173

只是一个猜测，但 Windows 路径 v unix 路径可能是罪魁祸首吗？

我会尝试将传递给程序的任何路径转换为 ​​Windows 格式

`cygpath -w $path`

（确保在必要时引用它们以避免空格问题）。

# javascript - 在 JavaScript 中将 ISO 时间转换为 H:MM am|pm

> ID：12306916
> 
> 赞同：0
> 
> 时间：2012-09-06T19:19:36.037
> 
> 标签：javascript, time, iso

> **可能重复：**
> [JavaScript 秒到时间，格式为 hh:mm:ss](https://stackoverflow.com/questions/6312993/javascript-seconds-to-time-with-format-hhmmss)

在我看来，这是一项简单的任务，但我还没有设法完成这项工作。

本质上，我从一个包含 ISO 格式时间 (HH:MM:SS) 的字符串开始，我想知道如何使用 JavaScript 将其转换为 H:MM am|pm。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:23:02.160

你好，这可能对你有帮助......它是一个名为moments的jquery插件......

用于解析、操作和格式化日期的轻量级 (4.8k) javascript 日期库。

[Moment.js](http://momentjs.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T19:38:12.283

这个简单的函数应该可以解决问题：

```
function convertTime (isoTime) {
  var hours   = parseInt(isoTime.substring(0, 2), 10),
      minutes = isoTime.substring(3, 5),
      ampm    = 'am';

  if (hours == 12) {
    ampm = 'pm';
  } else if (hours == 0) {
    hours = 12;
  } else if (hours > 12) {
    hours -= 12;
    ampm = 'pm';
  }

  return hours + ':' + minutes + ' ' + ampm;
} 
```

应该是不言自明的。例如，请参阅此 jsfiddle：http: [//jsfiddle.net/nscXP/3/](http://jsfiddle.net/nscXP/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T19:57:50.967

仅仅因为出现了无法正确处理中午或午夜时间的解决方案，我将把我的帽子扔进戒指，即使它与提供的没有什么不同（除了它正常工作的事实):

```
var isoToCommonTime = function(iso) {
    var groups = iso.match(/^(\d\d):(\d\d)/),
        hour = +groups[1],
        ampm = (hour >= 12) ? "pm" : "am";

    if(hour > 12) {
        hour -= 12;
    } else if(hour === 0) {
        hour = 12;
    }

    return hour + ":" + groups[2] + " " + ampm;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:34:58.240

像这样的东西会起作用......

```
input = "12:34:45";
groups = input.match(/(.+):(.+):(.+)/);

if (groups[1] > 12) {
    hour = groups[1] - 12;
    unit = "pm";
} else {
    hour = groups[1];
    unit = "am";
}

minutes = groups[2]; 
```

**编辑**：关于中午和午夜的问题的评论中有一些要点。我将把解决这些问题作为练习留给读者。（*我觉得这里真正有趣的部分是进行字符串解析*）

# objective-c - Objective-C malloc 与 c 数组数组

> ID：12306919
> 
> 赞同：1
> 
> 时间：2012-09-06T19:19:53.340
> 
> 标签：objective-c, ios, c, memory-management, memory-leaks

我在视图中有一个属性，这样的数组数组：

```
@interface MyView : UIView

@property (nonatomic) CGPoint **matrix;

@end 
```

在拥有此视图的控制器中，我已在 -viewDidLoad 中加载数据并在 -viewDidUnload 中释放内存，如下所示：

```
- (void)viewDidLoad
{

    self.myView.matrix = malloc(sizeof(CGPoint*) * array1Size);
    for (int k = 0; k < array1Size; k++) {
        self.myView.matrix[k] = malloc(sizeof(CGPoint) * innerArraySize);
    }
}

- (void)viewDidUnload
{
    for (int k = 0; k < array1Size; k++) {
        free(self.myView.matrix[k]);
        self.myView.matrix[k] = nil;
    }
    free(self.myView.matrix);
    self.myView.matrix = nil;
    [self setMyView:nil];
    [super viewDidUnload];
} 
```

在分析时，我在这里看到了泄漏。有人可以帮我在哪里错吗？

谢谢

**更新**：

我尝试从 viewDidUnload 中删除免费代码并像这样使用 dealloc：

```
-(void)dealloc {
    [self freeArray];
}

- (void) freeArray {

    for (int k = 0; k < 5; k++) {
        free(self.myView.matrix[k]);
        self.myView.matrix[k] = NULL;
    }

    free(self.myView.matrix);
    self.myView.matrix = NULL;
} 
```

然后我将初始化代码嵌入：

```
if (self.graphView.matrix == NULL) {
    ...
} 
```

现在不再泄漏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:29:29.853

您的代码不能确保矩阵的每个设置都与一个拆解完全匹配。例如，`viewDidUnload`不保证被调用。此外，您无法防止重复设置或拆除。

如果您真的需要 C 数组数组，更好的方法是在视图（`initWithFrame:`或`initWithCoder:`）的初始化程序中创建它并在其`dealloc`.

**编辑：**为了减轻您对`dealloc`和 ARC 的担忧：

您当然可以在 ARC 中覆盖 dealloc 并依赖它被调用。唯一的区别是您不能*显式*调用被覆盖的实现 ( `[super dealloc]`)。ARC 将为您插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:49:47.793

使用 CGPoint 数组：

```
@property (nonatomic) CGPoint *matrix;

.... init ...
{
   ...
   matrix = (CGPoint*) malloc(arraySize * sizeof(CGPoint));
 ...
}

- (void) dealloc
{
    free(matrix);
} 
```

然后您只需直接在数组中设置/获取 CGPoint 结构：

```
CGPoint someCGPoint = {0,0};
matrix[i] = someCGPoint;

someCGPoint = matrix[i]; 
```

这将比 CGPoint** 更快，内存效率更高。你的泄漏消失了。

# c# - 在单击事件中的 ajax 请求后重定向

> ID：12306921
> 
> 赞同：1
> 
> 时间：2012-09-06T19:19:58.360
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我正在使用 JScript + ASP.NET。我得到了一个带有 2 个输入（用户和密码）和一个按钮的表单。我想做的是：

`1- Fire a click event`
`2- Look inside a database if the user exist`
`3- Give back the answer`
`4- If the answer is true, POST some data to an other page AND redirect to it.`

我首先尝试使用 ASP.NET 来实现这一点。要使用 ASP.NET 发布数据，我需要使用 PostBackUrl 属性，但问题是 PostBackUrl 忽略了我的点击事件。

然后我尝试用 jscript 做到这一点。在我的点击事件（jquery）中，我使用 $.ajax 来发布数据以访问我的数据库，在 json 中给出答案......我被困在那里。在这两种方法中，我都停留在第 4 点。

ASP.NET

```
protected void SignIn_OnClick(object sender, EventArgs e)
    {
        Clients client = (Clients)clientDAO.getUsername(text1.Text, password2.Text);
        if (client != null)
        {
            Session.Add("SessionNoClient", "1272");
            Session.Add("CurrentQuote", "-1");
            Session.Add("UnitSystem", "0");
            Session.Add("SessionAdministrator", "0");

            //How to redirect with POST here

        }
    } 
```

脚本：

```
$("#m_bLogin").click(function () {
    var username = $("#text1").val();
    var password = $("#password2").val();
    var form = $("#formClient");
    $.ajax({
        url: '../../Class/LoginAjax.asmx/GetLoginInformation',
        data: "{ 'Name':'" + username + "','Password':'" + $("#password2").val() + "'}",
        dataType: "json",
        type: "POST",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            //My Json returns {"'Name':'Bob','Password':'1234'} and I'm not able to access Name or Password property. I tried data.d, data.d.Name, eval(data.d.Name) etc...
            form.submit();
        },
        error: function (XMLHttpRequest, textStatus, error) {
            alert(error);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:35:12.597

你可以这样做：

```
$.ajax({
    url: '../../Class/LoginAjax.asmx/GetLoginInformation',
    data: "{ 'Name':'" + username + "','Password':'" + $("#password2").val() + "'}",
    dataType: "json",
    type: "POST",
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        //My Json returns {"'Name':'Bob','Password':'1234'} and I'm not able to access Name or Password property. I tried data.d, data.d.Name, eval(data.d.Name) etc...
        form.submit();
    },
    error: function (XMLHttpRequest, textStatus, error) {
        alert(error);
    }
}).done(function() { 
                      window.location.href = "YourNewPage.aspx";
                   }); 
```

# javascript - 使用答案运行 PHP 函数时弹出警报是/否

> ID：12306923
> 
> 赞同：0
> 
> 时间：2012-09-06T19:20:01.920
> 
> 标签：javascript, php, onclick, popup, dom-events

我想在 PHP throw`onclick`按钮中运行删除写入的 SQL 函数。我想问是/否弹出窗口将答案保存在变量中，如果`variable==ok` 运行 SQL 函数，有人可以帮助我吗？这是在 PHP 上编写的 SQL 查询：

```
function DeleteProduct($thisCatalog) {

    $connB = new ProductDAO();
    $connB->Connect();
    $pro_query = "DELETE * FROM Ikea WHERE `CatalogNumber` = $thisCatalog";
    $db_result = $connB->ExecSQL($pro_query);

    $html_result = 'Your Product Has Been Deleted! ';

    $connB->Disconnect();
    return $html_result;
} 
```

这是删除按钮

```
<p align=center> <img src="pic/trash.png" title="Delete Product" onclick="conf();submit();"> 
```

在哪里放置删除函数调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:26:31.277

我认为这就是你想要的：

```
$(document).ready(function() {
    var answer = confirm("Delete?")
    if(answer) {
        $.ajax({
            url: "delete.php",
            type: "post",
            data: $('#yourForm').serialize(),
            error: function(data) {
                alert("There was an error while deleting from the database.");
            },
            success: function(data) {
                // do something
            });
        });
    }
    else {
        // do something
    }
}); 
```

# css - 如何在 CSS 中选择 UNTAG 元素

> ID：12306924
> 
> 赞同：1
> 
> 时间：2012-09-06T19:20:09.597
> 
> 标签：css, css-selectors

我在这里有这个，想看看如何选择未标记的元素/文本。我想在以下示例中选择文本“j.smith”：

```
<td class='dev'>
  <u>assigned</u>
  j.smith
</td> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:07:04.197

在CSS中你不能这样做。对于样式，您可以使用 jquery 来查找这样的内容：

```
$("td.dev").contents().filter(function(){ return this.nodeType != 3; }).css('color', 'red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:22:58.750

你不能因为“j.smith”文本不是一个元素，它只是一个属于它的 parent 的文本节点`<td>`。

CSS4 中有一些提议可能允许与您正在寻找的行为类似的行为，但在此之前，解决方法是撤消对任何子元素的更改，如下所示：

```
td.dev { font-weight: bold; }
td > * { font-weight: normal; } /* this undoes the change to any children of the `<td>` */ 
```

# ruby-on-rails - 使用 content_tag 为字符串的一部分加下划线

> ID：12306925
> 
> 赞同：0
> 
> 时间：2012-09-06T19:20:11.930
> 
> 标签：ruby-on-rails, ruby, content-tag

目前，我在控制器助手中使用 content_tag 来减少视图中正在执行的大量逻辑。我知道让嵌套的 content_tags 工作，但让我一直挂断的一件事是，如果我有以下

```
<div id="content"><u>Click here</u> to unlock</div> 
```

那么我怎么能使用 content_tag 来做到这一点，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:40:00.873

试试这个

```
content_tag(:div, content_tag(:u, 'Click here') + ' to unlock', id: 'content') 
```

# ruby-on-rails - 如何在 ActiveRecord 查询界面中做一个简单的 NOT？

> ID：12306927
> 
> 赞同：1
> 
> 时间：2012-09-06T19:20:17.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我非常熟悉在 ActiveRecord 查询中使用散列参数，例如：

```
SomeModel.where(association_id: something.id, status: ACTIVE_STATUSES).exists? 
```

和类似的。但是如果你想做一个简单的 NOT EQUAL or `!=`or or `<>`type 条件呢？我的简单案例只是从查询中排除当前对象。

我能想到的唯一方法是：

```
SomeModel.where("id != ?", self.id).where(association_id: something.id,...) 
```

但这似乎不太像rails。

有没有更简单的方法，或者`!=`在哈希条件中包含的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T20:28:12.673

您可以放到 Arel 表中。Arel 上有一个很棒的（专业的）Railscast。 [http://railscasts.com/episodes/355-hacking-with-arel](http://railscasts.com/episodes/355-hacking-with-arel)

您也可以使用 Squeel gem。
[http://erniemiller.org/projects/squeel/](http://erniemiller.org/projects/squeel/)
[http://railscasts.com/episodes/354-squeel](http://railscasts.com/episodes/354-squeel)

在斯奎尔：

```
SomeModel.where{ id != my_id } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T11:16:53.943

Rails 4 有`not`：

```
SomeModel.where.not(id: self.id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:36:24.853

你是对的，在查询中包含 != 的唯一方法是使用

```
SomeModel.where("id != ?", self.id) 
```

除此之外，ActiveRecord 将其他结构转换为正确的 SQL 查询，例如：

```
where(:id => [1,2,3]) 
```

这将生成 "where id in (1,2,3)" ，但是对于 != ， > ， < 等这是唯一的解决方案（尽管我很高兴发现其他情况）

# javascript - 从有序对构建图

> ID：12306933
> 
> 赞同：3
> 
> 时间：2012-09-06T19:20:47.783
> 
> 标签：javascript, svg, d3.js

我有一些生成数组的代码；在每个索引处都有一个带有 x 和 y 坐标的数组。我想使用 d3.js 将这些点绘制为图形，但不知道该怎么做。

我查看了该站点和示例，但没有发现任何可以帮助我完成这项任务的东西。此处的此[链接](http://socr.ucla.edu/htmls/HTML5/charts/SOCR_JS_ViolinChart/)是我尝试创建的图形类型的示例，但我希望能够在一个网格上创建多个图形。

我基本上需要一些关于如何开始的指导，因为我完全迷失了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:41:54.883

这可能最好是评论，但我没有评论访问权限。首先，您在问题中链接到的图表类型的名称是什么？这不是您的基本饼图或条形图。

如果你想在一个图表上多组数据，你想要什么类型的图表？我无法想象您要做什么，所以我不知道如何最好地提供帮助。这是一个很好[的教程列表](https://github.com/mbostock/d3/wiki/Tutorials)，链接到如何使用 D3 的示例。

# krl - KRL搜索多个域的注释规则，为每个域插入div，无论域是否匹配

> ID：12306935
> 
> 赞同：2
> 
> 时间：2012-09-06T19:20:55.977
> 
> 标签：krl

我的 KRL 搜索注释规则集包含 4-5 个规则，每个规则都根据搜索结果中的域进行注释。我得到了很好的结果，因为注释几乎是它们应该在何时何地进行的。但是，当我在浏览器中查看源代码时，**每条规则都会在 html 中插入一个 div，无论该域是否应该出现任何注释**。页面上没有任何可见的建议，但我不想添加任何不必要的代码并保持这种状态。

**有没有办法指示那些不为结果注释的规则不要将任何代码放入页面？**（顺便说一句 - 现在我正在使用所有本地数据 - 在经过测试并意识到这将解决这个问题后，我将稍后进行远程调用）。

### 我的两条规则：

```
rule search_annotate_party is active {
select using "google.com|bing.com/search|search.yahoo.com/search" setting()
every {
  emit <<
    function annotate_party(toAnnotate, wrapper, data) {
      if (data.domain == "www.mydomain.com" ) {
        wrapper.append("<div style='border: 1px dashed orange'><a href='http://www.mydomain.com/search.do?query=some+product' target='_blank'><img src=https://dl.dropbox.com/u/3287029/product_image.png width='100%'></a></div>");
        wrapper.show();
      }
    }
  >>;
  annotate:annotate("party") with
    annotator = <| annotate_party |>;
  }
}

rule search_annotate_jiffy is active {
select using "google.com|bing.com/search|search.yahoo.com/search" setting()
every {
  emit <<
    function annotate_jiffy(toAnnotate, wrapper, data) {
      if (data.domain == "www.hisdomain.com" ) {
        wrapper.append("<div style='border: 0px solid red'><img    src=http://dl.dropbox.com/u/3287029/company_logo.jpg>");
        wrapper.show();
      }
    }
  >>;
  annotate:annotate("jiffy") with
    annotator = <| annotate_jiffy |>;
  }
} 
```

# jquery - 在 link_to 中传递字符串

> ID：12306937
> 
> 赞同：0
> 
> 时间：2012-09-06T19:20:59.420
> 
> 标签：jquery, ruby-on-rails-3, html

这应该很简单，我相信它适合你。我是 Rails 和 jQuery 新手，正在阅读用于 link_to 的 Rails API，它建议 html_options = {} 但我找不到示例。下面是我想要结束的 html，因为我想将 jquery 插件用于联系表单的模式对话框（如果有更简单的 Rails 方式，我很高兴听到）：

```
 <a href="http://mywebsite.com/contact-us.html" name="box" class="close-reveal-modal" data-reveal-id="myModal">Get more info.</a> 
```

根据我对 api 的阅读，这是我最好的猜测，但它失败了：

```
 <%= link_to 'Get more info', contact_us_path, :class => 'close-reveal-modal', html_options = {"data-reveal-id = 'myModal'"} %> 
```

抽出 html_options 部分有效，但没有调用插件。我得到的是关于缺少关闭括号的错误，但这没有意义，因为一切都已关闭。我误解了 html_options 吗？，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:26:57.577

您必须在选项中使用 ruby​​ 哈希。ERB 代码可能如下所示

```
<%= link_to 'Get more info', contact_us_path, :class => 'close-reveal-modal', :data => { 'reveal-id' => 'myModal'} %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:27:12.773

你实际上根本不需要`html_options`。Rails 3 支持`data`接受散列并将散列转换为单独`data-*`属性的选项：

```
<%= link_to 'Get more info', contact_us_path, :class => 'close-reveal-modal', :data => { :reveal_id => 'myModal' } %> 
```

该选项的文档实际上在[`ActionView::Helpers::TagHelper#tag`方法](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag)上。

# c# - WebBrowser 按名称而不是 ID 填充值

> ID：12306938
> 
> 赞同：-1
> 
> 时间：2012-09-06T19:21:03.290
> 
> 标签：c#, browser, selenium-rc

我正在开发一个表单填写软件，我想知道如何通过网络浏览器通过名称属性甚至 CSS 选择器/XPath（如 selenium）选择一个字段？而不是`findbyid`?

还是 Selenium RC 是我唯一的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:41:16.520

您可以使用 XPath 来选择您的元素。

示例在此页面上：[http ://wiki.openqa.org/display/SEL/Help+With+XPath](http://wiki.openqa.org/display/SEL/Help+With+XPath)

*Selenium 支持许多不同的定位器类型。对 XPath 定位器使用“xpath=”前缀，除非“xpath”已经在方法名称中。*

```
//form//input[@name="myFormFieldName"] 
```

**编辑** 在[http://google.com上进行测试](http://google.com)

```
Command: type
Target: //form//input[@name="q"]
Value: TEST 
```

运行此命令后，google.com 上的输入框应该会写上 TEST 字样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:55:22.883

Selenium 不是您*唯一*的答案，但如果您尝试使网站自动化，它是*为数不多*的答案之一。单独的网络浏览器无法完成这项工作。

# python - Python 不会使用 for 循环正确地从字典中提取值

> ID：12306941
> 
> 赞同：1
> 
> 时间：2012-09-06T19:21:07.920
> 
> 标签：python

我试图使用字典来检查为特定 SQL 备份成功或失败列出的给定数量的服务器。到目前为止，我的问题是当我运行此代码时：

```
for serverChk in srvrDict['Server']: 
```

它在每个新行上将服务器名称作为单个字符返回，例如：
S
E
R
V
E
R
所以在我的试用中，我看到这个“连接到**T**以检查操作系统版本时出错”，其中 T 是服务器名称的第一个字符。我似乎无法将手指放在它上面，我所做的所有搜索都让我提出了要求。谢谢！

```
class checkstatus:
#def getServers(self):
    chkbkpstats = csv.reader(file('c://temp//networkerservers.csv'))
    for row in chkbkpstats:
        srvrDict = {}
        srvrDict['Server'] = row[0]
        srvrDict['Instance'] = row[1]
        print srvrDict

for serverChk in srvrDict['Server']:
        try:
            c = wmi.WMI(server)
            for os in c.Win32_OperatingSystem():
                osVer = os.caption
        except:                 
            print 'Error connecting to %s to check OS version' % serverChk

        if '2003' in osVer:
            print 'w2k3'
        if '2008' in osVer:
            print 'w2k8' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:24:36.620

我想您已经在字典中存储了一个字符串。所以该行`for serverChk in srvrDict['Server']`转换为`for serverChk in yourSavedString`。这就是为什么您要获得单个字符的原因。要访问单个字典项，您应该执行`for k,v in srvrDict.iteritems()`where`k`是键和`v`是值的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:23:48.723

您在循环的每次迭代中都覆盖了`Server`和`Instance`值，而不是像您期望的那样实际为日志文件中的每个项目生成一个包含条目的数据序列。您需要创建一个包含字典的列表，并将其附加到每次迭代中。您可能正在寻找类似的东西：`srvrDict``chkbkpstats`

```
chkbkpstats = csv.reader(file('c://temp//networkerservers.csv'))
srvrs = []
for for row in chkbkpstats:
    srvrs.append({'Name' : row[0], 'Instance' : row[1]})
for srvr in srvrs:
    try:
        c = wmi.WMI(srvr['Instance'])
    except:                 
        print 'Error connecting to %s to check OS version' % srvr['Name']
    else:
        osVer = c.Win32_OperatingSystem()[0].Caption
        if '2003' in osVer:
            print 'w2k3'
        elif '2008' in osVer:
            print 'w2k8' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:34:02.747

您的代码存在一些问题。

`srvrDict`首先，每次执行第一个循环时都创建一个新的`for`，覆盖上次存储在此变量中的值。我认为，您实际上打算做的是：

```
srvrDict = {}
for row in chkbkpstats:
    srvrDict[row[0]] = row[1] 
```

现在，`srvrDict`将包含一个条目，如`{'P1RT04': ['THP06ASU']}`中的每一行`chkbkpstats`，将服务器名称映射到该服务器上运行的实例列表。

然后，在第二个循环中，使用`for serverChk in srvrDict:`迭代字典中的所有条目。但是，我不确定变量`server`in`c = wmi.WMI(server)`来自哪里。如果这是`row[1]`第一个循环中的内容，那么您应该使用`srcvDict[serverChk]`从字典中检索值。

这样，整个过程将如下所示：

```
chkbkpstats = csv.reader(file('c://temp//networkerservers.csv'))
srvrDict = {}
for row in chkbkpstats:
    name, instance = row[0], row[1]
    if name not in srvrDict:
        srvrDict[name] = []
    srvrDict[name].append(instance)

for server in srvrDict:
    for instance in srvrDict[server]:
        try:
            c = wmi.WMI(instance)
        except:                 
            print 'Error connecting to %s to check OS version' % server
        else:
            osVer = c.Win32_OperatingSystem()[0].caption
            if '2003' in osVer:
                print 'w2k3'
            elif '2008' in osVer:
                print 'w2k8'
            else:
                print 'unknown OS' 
```

PS.：我不确定`c.Win32_OperatingSystem()`. [...]**更新：**感谢 sr2222 指出这一点。代码已修复。

更新：编辑代码以允许一台服务器托管多个实例。

# java - 在多台服务器上运行一个文件

> ID：12306946
> 
> 赞同：0
> 
> 时间：2012-09-06T19:21:45.483
> 
> 标签：java, deployment, environment-variables

现在我的团队处理大约 4-5 个不同的服务器和大约 2-3 个不同的数据库服务器，我们正在使用环境变量来决定我们在哪个服务器上以及要使用什么服务器配置。

随着我的团队不断扩大，有没有更好的方法来做到这一点？我已经考虑过编译器标志/参数，但它似乎并不那么健壮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:42:57.673

从我的角度来看，在 java 中，你基本上有 3 种方法来破解这个 cookie：

1.  环境变量
2.  -D JVM 参数（系统属性）
3.  属性文件

您已经发现了环境变量，这几乎是获得您想要的效果的“unix 方式”；与通用二进制文件不同的配置，为正在执行的环境定制正在运行的应用程序。

系统属性实际上是环境变量的 Java“道德等价物”。它们通过应用程序命令行上的 -D 参数进入，例如...

```
java -Dlogback.configurationFile=/opt/dm/logback.xml -cp app.jar org.rekdev.App 
```

[在 Java 中处理http://docs.oracle.com/javase/tutorial/essential/environment/properties.html](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)的显式属性文件是您经常看到的第三种变体，它与 -D 结合使用可以获得类似默认行为的东西，可以在从命令行运行时。这就是上面 logback.xml 配置的基本情况，JAR 文件里面有一个 logback.xml 将被使用，除非存在名为“logback.configurationFile”的系统属性，此时应用程序将加载它.

当您尝试弄清楚如何在多服务器环境中保持这一切同步并正常工作时，请考虑使用 chef [http://wiki.opscode.com/display/chef/Home](http://wiki.opscode.com/display/chef/Home)进行部署并将每个厨师控制的特定环境的定制。将厨师“食谱”放在版本控制中，瞧，配置管理。

装运它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:43:08.217

我可以看到两种情况

1.  您在包中嵌入了所有不同的属性（可以是 war、ear、jar 或文件系统`/yourapp/etc/`）
2.  您只嵌入了一个属性文件，并且这个属性文件是在构建期间创建的（使用 ant 或 maven）

假设您的应用名为`foo`

**解决方案 1**

它的优点是您的应用程序可以按原样放置在任何受支持的服务器上（所有在您的应用程序包中都有属性文件的服务器）。您的属性将被命名为`foo.dev.properties`, `foo.test.properties`, `foo.prod.properties`, `foo.damien.properties`, `foo.bob.properties`。

另一个优点是每个工作的开发人员都有自己的开发文件，他可以安全地推送到 svn/git/whatever 上，并确保其他开发人员不会破坏他的配置。

在运行时，应用程序可以检查`-D`参数甚至动态检索主机名，以便加载正确的属性文件。

**解决方案 2**

它的优点是您的包不会被不必要的属性文件污染。

您必须配置很多 ant 任务/maven 目标才能为特定环境构建。您的源目录中还将包含环境的属性文件，但您的应用程序只会附带一个。这个`foo.properties`只有值的占位符，并且将使用`foo.ENV.properties`正确的 ant 任务/maven 目标在其中推断值。

在我的实际工作和之前的工作中，我们确实使用了解决方案 1，我认为它带来了灵活性。某些参数（如数据库用户/密码）是直接从 Unix 服务器上的环境变量中获取的（因此只有服务器管理员知道凭据）。

您可以安全地混合这些解决方案，以达到您认为对您和您的团队有更大灵活性的地方。

# java - Java作业刽子手

> ID：12306955
> 
> 赞同：0
> 
> 时间：2012-09-06T19:22:26.457
> 
> 标签：java

因此，对于一个班级，我们必须制作一个刽子手游戏，它可以接受用户输入的单词，然后让另一个人来解决它。它必须能够识别单词中的多个重复字母，否则我就完蛋了。下面是我的代码，它工作得很好，直到我删除了我的 checkformatch 方法中的 break 语句，以便它超越了最初发现的字母。有了中断，它永远不会找到第二个第三个等重复的字母，没有它，它会返回每个不是搜索到的字母的字母都是未命中的，并减少了我的生命计数。我需要的是一些关于如何在我的数组中搜索作为猜测输入的字母并返回它们在数组中的索引位置的提示，而不是认为数组中不是猜测的每个字符都是错误的输入。先感谢您。

```
package hangman;

import java.util.Scanner;

class Game {
int livesRemaining;
String letterGuessed;
String wordInput;
  char[] hiddenWord;
  char[] aOfWord ;

Scanner input = new Scanner(System.in);
boolean isFound;
int a;

public Game()
{
    this.setLives(8);
    //this.output();

    System.out.println("Player 1 please enter the word to be searched: ");
    wordInput = input.nextLine();

    aOfWord = wordInput.toCharArray();

    hiddenWord = new char[aOfWord.length];

    for(int j = 0; j < hiddenWord.length; j++)
        hiddenWord[j] = '*';

    this.output();

    while(livesRemaining > 0)
    {
        System.out.println("Please choose a letter: ");
        letterGuessed = input.nextLine();

        this.checkForMatch(letterGuessed);
        if(isFound == true)
    {
        hiddenWord[a] = letterGuessed.charAt(0);
    }
    else
    {
        System.out.println("Is not found!");
        this.reduceLives();
    }
    this.output();

  }

}

public void setLives(int a)
{
    this.livesRemaining = a;
}

public void reduceLives()
{
    livesRemaining = livesRemaining -1;
    System.out.println("Lives remaining: " + this.getLives());

}

public int getLives()
{
    return livesRemaining;
}

public void output()
{
    System.out.println("Lives remaining: " + this.getLives());
    System.out.println("Word found so far ");

    for(int i = 0; i < hiddenWord.length; i++)
    {
        System.out.print(hiddenWord[i] + "\n");
    }

}

public void checkForMatch(String l)
{

    for(int i = 0; i < aOfWord.length; i++)
        {
            //System.out.println("Comparing " + l.charAt(0) + " To " + aOfWord[i]);
            if(l.charAt(0) == aOfWord[i])   
            { 
               isFound = true;
               a = i;
               break;
            }
            else
            {
                isFound = false;  
            } 
        }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:44:24.007

首先，如果要返回字符的索引，则需要将它们添加到某处，我建议返回一个包含所有值的 ArrayList。这是因为如果 ArrayList 太小，它的大小可能会增长，而您真的不需要担心越界问题。

您当前的`checkForMatch`工作形式可以满足您的需求，但请考虑返回 a`boolean`而不是将您的 isFound 字段设置为 true/false。还有一个包含 String 类的方法，您可以调用它，因此您的 checkForMatch 的替代方法可能有点像

```
String yourString = "Hello";
String yourChar = "e";
System.out.println(yourString.contains(yourChar)); 
```

这当然会打印出来！

现在，要获取索引，您已经遍历数组并比较方法中的字符`checkForMatch()`，为什么不简单地`ArrayList<Integer> matchedIndices = new ArrayList<Integer>();`在方法顶部创建一个，而不是将 isFound 设置为 true，`matchedIndices.add(i);`如果字符匹配则调用，然后在最后返回数组列表？

您当然必须将返回类型从 void 交换为 ArrayList，但是有很多方法可以解决这个问题，这只是我想到的第一个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:40:23.930

你的算法看起来不错。但是，它只会为您提供最后一个匹配的字符，因为`a`只要他找到匹配的字符就会被重写。我认为一个非常简单的解决方案是在您的`checkForMatch`方法中执行此操作：

```
if(l.charAt(0) == aOfWord[i])   
{ 
    isFound = true;
    hiddenWord[i] = l.charAt(0);
} 
```

还有这个在你的`game`方法中......

```
if(!isFound)
{
    System.out.println("Is not found!");
    this.reduceLives();
} 
```

顺便说一句，您不必使用`this.`。这仅在某些情况下是必要的。看看[这个](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

# encryption - 使用 Crypto++ 的 AES 示例

> ID：12306956
> 
> 赞同：68
> 
> 时间：2012-09-06T19:22:27.690
> 
> 标签：encryption, cryptography, aes, crypto++

我一直在互联网上搜索***好的***c++ AES 代码示例/教程，它教授加密技术的基础知识和库的使用，但到目前为止，我还没有获得像样的材料。

好：易于理解（只是随时随地学习的基础知识）。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-06T19:32:21.400

[Crypto++ AES](http://www.cryptopp.com/wiki/Advanced_Encryption_Standard)的官方文档是一个好的开始。从我的档案中，AES 的基本实现如下：

更多解释请参考[这里](https://web.archive.org/web/20150315102342/http://www.cryptopp.com/fom-serve/cache/79.html)，我建议您先了解[算法](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)，然后尝试逐步了解每一行。

```
#include <iostream>
#include <iomanip>

#include "modes.h"
#include "aes.h"
#include "filters.h"

int main(int argc, char* argv[]) {

    //Key and IV setup
    //AES encryption uses a secret key of a variable length (128-bit, 196-bit or 256-   
    //bit). This key is secretly exchanged between two parties before communication   
    //begins. DEFAULT_KEYLENGTH= 16 bytes
    CryptoPP::byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];
    memset( key, 0x00, CryptoPP::AES::DEFAULT_KEYLENGTH );
    memset( iv, 0x00, CryptoPP::AES::BLOCKSIZE );

    //
    // String and Sink setup
    //
    std::string plaintext = "Now is the time for all good men to come to the aide...";
    std::string ciphertext;
    std::string decryptedtext;

    //
    // Dump Plain Text
    //
    std::cout << "Plain Text (" << plaintext.size() << " bytes)" << std::endl;
    std::cout << plaintext;
    std::cout << std::endl << std::endl;

    //
    // Create Cipher Text
    //
    CryptoPP::AES::Encryption aesEncryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Encryption cbcEncryption( aesEncryption, iv );

    CryptoPP::StreamTransformationFilter stfEncryptor(cbcEncryption, new CryptoPP::StringSink( ciphertext ) );
    stfEncryptor.Put( reinterpret_cast<const unsigned char*>( plaintext.c_str() ), plaintext.length() );
    stfEncryptor.MessageEnd();

    //
    // Dump Cipher Text
    //
    std::cout << "Cipher Text (" << ciphertext.size() << " bytes)" << std::endl;

    for( int i = 0; i < ciphertext.size(); i++ ) {

        std::cout << "0x" << std::hex << (0xFF & static_cast<CryptoPP::byte>(ciphertext[i])) << " ";
    }

    std::cout << std::endl << std::endl;

    //
    // Decrypt
    //
    CryptoPP::AES::Decryption aesDecryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Decryption cbcDecryption( aesDecryption, iv );

    CryptoPP::StreamTransformationFilter stfDecryptor(cbcDecryption, new CryptoPP::StringSink( decryptedtext ) );
    stfDecryptor.Put( reinterpret_cast<const unsigned char*>( ciphertext.c_str() ), ciphertext.size() );
    stfDecryptor.MessageEnd();

    //
    // Dump Decrypted Text
    //
    std::cout << "Decrypted Text: " << std::endl;
    std::cout << decryptedtext;
    std::cout << std::endl << std::endl;

    return 0;
} 
```

安装细节：

*   [如何在 Visual Studio 2010 Windows 7 中安装 Crypto++？](https://stackoverflow.com/questions/6619042/how-do-i-install-crypto-in-visual-studio-2010-windows-7)
*   [*nix 环境](http://www.cryptopp.com/wiki/Linux)
*   对于 Ubuntu，我做了：

`sudo apt-get install libcrypto++-dev libcrypto++-doc libcrypto++-utils`

# php - PHP - 检查链接中是否存在 URL

> ID：12306972
> 
> 赞同：0
> 
> 时间：2012-09-06T19:23:17.997
> 
> 标签：php, html, url

这是我想做的..

假设我在[http://example.com/test.html](http://example.com/test.html)的文件中寻找链接“example.com ”。

我想采用一个在上述网站中查找的 PHP 脚本。但是，如果`<A>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:26:28.967

见下面网址

[如何通过 PHP 检查 URL 是否存在？](https://stackoverflow.com/questions/2280394/check-if-an-url-exists-in-php)

或尝试一下

```
$file = 'http://www.domain.com/somefile.jpg';
$file_headers = @get_headers($file);
if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    $exists = false;
}
else {
    $exists = true;
} 
```

从这里：[http ://www.php.net/manual/en/function.file-exists.php#75064](http://www.php.net/manual/en/function.file-exists.php#75064)

...在上述帖子的正下方，有一个 curl 解决方案：

```
function url_exists($url) {
    if (!$fp = curl_init($url)) return false;
    return true;
} 
```

**更新代码：-**

您可以使用 SimpleHtmlDom 类在标签中查找 id 或类

请参阅以下网址

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

[http://simplehtmldom.sourceforge.net/manual_api.htm](http://simplehtmldom.sourceforge.net/manual_api.htm)

[http://sourceforge.net/projects/simplehtmldom/files/](http://sourceforge.net/projects/simplehtmldom/files/)

[http://davidwalsh.name/php-notifications](http://davidwalsh.name/php-notifications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:23:17.997

这是我发现的以防其他人也需要它！

```
 $url = "http://example.com/test.html";
  $searchFor = "example.com"
  $input = @file_get_contents($url) or die("Could not access file: $url");
  $regexp = "<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>";
  if(preg_match_all("/$regexp/siU", $input, $matches, PREG_SET_ORDER)) {
    foreach($matches as $match) {
      echo $match[2];
      if ($match[2] == $searchFor)
      {
          $isMatch = 1;
      } else {
          $isMatch= 0;
      }
      // $match[0] = A tag
      // $match[2] = link address
      // $match[3] = link text
    }
  }

      if ($isMatch)
      {
          echo "<p><font color=red size=5 align=center>The page specified does contain your link. You have been credited the award amount!</font></p>";
      } else {
          echo "<p><font color=red size=5 align=center>The specified page does not have your referral link.</font></p>";
      } 
```

# android - 新手对括号感到困惑

> ID：12306981
> 
> 赞同：0
> 
> 时间：2012-09-06T19:24:06.470
> 
> 标签：android

我正在编写我的第一个应用程序，我是编程新手......这个程序正在进行中，但我想看看它到目前为止的样子，如果我能编译它！我认为括号有问题，每次我修复一个错误时，另一个错误就会出现在其他地方......有没有一种简单的方法来发现丢失的括号？谢谢！

```
package com.Jenko.votingapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import android.content.Intent;

public class MainActivity extends Activity {

    @Override public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button createNew = (Button)findViewById(R.id.newPoll);
        createNew.setOnClickListener(new View.OnClickListener() {
            public void onClick (View view) {
                startActivityForResult(new Intent("com.Jenko.votingapp.CREATENEWPOLL"), 1);
                finish();
            }

            public void onActivityResult(int requestCode, int resultCode, Intent data) {
              if (requestCode ==1) {
                  if (resultCode == RESULT_OK) {
                      //something will eventually happen here...
                  }

                  Button seePrevious = (Button)findViewById(R.id.prevPoll);
                  seePrevious.setOnClickListener(new View.OnClickListener() {
                      public void onClick (View view) {
                          startActivityForResult(new Intent("com.Jenko.votingapp.SEEPREVIOUSPOLL"), 2);
                          finish();
                      }
                  });
              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:31:30.680

正确缩进非常重要。如果缩进正确，任何缺少的括号都会很容易被注意到。这里是缩进和固定的括号/括号：

```
package com.Jenko.votingapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import android.content.Intent;

public class MainActivity extends Activity {

    @Override
    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );
        setContentView( R.layout.activity_main );

        Button createNew = (Button)findViewById( R.id.newPoll );
        createNew.setOnClickListener( new View.OnClickListener() {

            public void onClick( View view ) {
                startActivityForResult( new Intent( "com.Jenko.votingapp.CREATENEWPOLL" ), 1 );
                finish();
            }
        });
    }

    public void onActivityResult( int requestCode, int resultCode, Intent data ) {
        if( requestCode == 1 ) {
            if( resultCode == RESULT_OK ) {// something will eventually happen here...}
                Button seePrevious = (Button)findViewById( R.id.prevPoll );
                seePrevious.setOnClickListener( new View.OnClickListener() {

                    public void onClick( View view ) {
                        startActivityForResult( new Intent( "com.Jenko.votingapp.SEEPREVIOUSPOLL" ), 2 );
                        finish();
                    }
                });
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:34:00.930

如果您没有 IDE，养成的一个好习惯是在您键入开始的那一刻立即添加右括号、大括号或圆括号。两者都有后，您可以填写其余部分。你永远不会那样添加孤儿。

我将支持所有那些说一致的代码样式和布局在这里有帮助的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:27:04.403

使用 IDE（eclipse、IntelliJ 等）。对你来说太重了吗？emacs 或 vim 编辑器怎么样？它们都具有括号匹配功能。编程编辑器是一毛钱在那里。选择一个，学习它，然后继续您定期安排的编程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:46:54.337

大多数编码标准将左括号直接放在语句或函数之后，并为右括号提供自己的行，就像这样

```
 function() {
        do stuff here
    } 
```

或者就在语句或函数之后，没有其他类似的东西

```
 function()
    {
        do stuff here
    } 
```

这使得发现打开和关闭括号更容易。您上面的代码重构以满足这些标准看起来像这样

```
 public class MainActivity extends Activity { <-- missing closing bracket

        @Override
        public void onCreate(Bundle savedInstanceState) { <-- missing closing bracket
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Button createNew = (Button)findViewById(R.id.newPoll);
            createNew.setOnClickListener(new View.OnClickListener() { <-- missing closing bracket
                public void onClick (View view) {
                    startActivityForResult(new Intent("com.Jenko.votingapp.CREATENEWPOLL"), 1);
                    finish();
                } //end onClick

                public void onActivityResult(int requestCode, int resultCode, Intent data) { <-- missing closing bracket
                    if (requestCode ==1) {
                        if (resultCode == RESULT_OK) {
                            //something will eventually happen here...
                        }//end if

                        Button seePrevious = (Button)findViewById(R.id.prevPoll);
                        seePrevious.setOnClickListener(new View.OnClickListener() {
                            public void onClick (View view) {
                                startActivityForResult(new Intent("com.Jenko.votingapp.SEEPREVIOUSPOLL"), 2);
                                finish();
                            } //end onClick

                        }); //end View.OnClickListener
                    } //end if 
```

您缺少以下括号：

MainActivity
public void onCreate(Bundle savedInstanceState)
public void onActivityResult
createNew.setOnClickListener

正如已经提到的，正确的代码缩进有很大帮助

# php - Kohana ORM 只找到第一条记录？

> ID：12306982
> 
> 赞同：2
> 
> 时间：2012-09-06T19:24:12.767
> 
> 标签：php, orm, kohana

我在 Kohana 中使用 ORM，我想获得一些 id = 2 的记录，但是当我使用时：

```
$user = ORM::factory('user');
$user->find(2);
echo $user->name; 
```

结果总是向我显示 table 中第一条记录的值，`users`它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:30:33.160

根据代码，`find()`不需要参数：

> [https://github.com/kohana/orm/blob/3.2/master/classes/kohana/orm.php#L894](https://github.com/kohana/orm/blob/3.2/master/classes/kohana/orm.php#L894)

并根据文档：

> [http://kohanaframework.org/3.2/guide/api/ORM#find](http://kohanaframework.org/3.2/guide/api/ORM#find)

并且`find()`仅从数据库加载第一条记录。为避免这种情况，只需使用：

```
$user = ORM::factory('user');
$user = $user->where('id', '=', 2)->find();
echo $user->name; 
```

请测试一下，因为我已经很长时间没有使用Kohana了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T19:35:22.347

As @Tadeck says, `find()` doesn't expect arguments.

Try using the id in the `ORM::factory` call:

```
$user = ORM::factory('user', 2); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T19:32:31.877

您是否尝试过设置 ORM 对象的主键？

受保护的 $_primary_key

[http://kohanaframework.org/3.0/guide/api/ORM#find](http://kohanaframework.org/3.0/guide/api/ORM#find)表示 find 尝试根据主键定位项目。

# powershell - 格式化 repadmin 的输出 - powershell

> ID：12306987
> 
> 赞同：0
> 
> 时间：2012-09-06T19:24:31.620
> 
> 标签：powershell, formatting, windows-server-2003, dsquery

我正在创建一个脚本，告诉我 AD 对象的创建/修改日期和其他信息，以确定大型域中机器的升级状态。我在 Server 2008 中以格式良好且易于阅读的方式完成此操作没有问题，因为它具有 Active Directory 模块，但在 Server 2003 中并非如此。

对于服务器 2003，我不得不对脚本使用不同的方法来收集我想要的信息，但我不确定如何格式化。

这是我当前的脚本：

```
$filePath = “$ENV:UserProfile\Desktop\output.txt”
## Enter the name of the Domain controller below
$DCName = “Exchange”
$computers = dsquery computer domainroot -name * -limit 0

Foreach ($computer in $computers) {
                repadmin /showattr $DCName $computer /atts:"WhenChanged,WhenCreated,OperatingSystem" /long | out-file –append $filepath
                } 
```

这是示例输出：

```
DN: CN=Sample-Object,CN=Computers,DC=Contoso,DC=com

    1> whenCreated: 07/04/2011 14:00:02 Pacific Standard Time Pacific Daylight Time
    1> whenChanged: 08/09/2012 11:24:22 Pacific Standard Time Pacific Daylight Time
    1> operatingSystem: Windows 7 Professional 
```

在服务器 2008 中，我可以使用字符串格式**('"{0}","{1}"' -F $computer.name, $computer.whatever)** amd 将其输出到 .csv 以使其易于呈现，但我不要认为相同的方法将适用于 repadmin 的结果。

我的最终目标是简单地拥有一个带有计算机名称的 CSV，以及我从 repadmin 中提取的三个或多个属性。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:47:40.960

试一试，您可以将其导出为 CSV 并将其作为对象导入：

```
$result = dsquery computer domainroot -name * -limit 0 | foreach {
    repadmin /showattr $DCName $_ /atts:"WhenChanged,WhenCreated,OperatingSystem" /long
} | Out-String

$result.split([string[]]'DN:',[StringSplitOptions]::RemoveEmptyEntries) | Foreach-Object{

    $attr = $_.Split("`r`n",[StringSplitOptions]::RemoveEmptyEntries)

    New-Object -TypeName PSObject -Property @{
        DN = $attr[0].Trim()
        whenCreated = $attr[1].Trim() -replace '^1> whenCreated: '
        whenChanged = $attr[2].Trim() -replace '^1> whenChanged: '
        operatingSystem = $attr[3].Trim() -replace '^1> operatingSystem: '
    }

} 
```

# java - 对 Java 中的后期绑定/转换感到困惑

> ID：12306991
> 
> 赞同：0
> 
> 时间：2012-09-06T19:24:38.447
> 
> 标签：java, casting

```
class Person { void f() {} }
class Student extends Person { void f() {} } 
```

所以当我执行以下代码时：

```
Person p = new Student();
((Person) p).f(); 
```

为什么`f()`将变量转换为 Person 时调用 Student 类中的函数？我理解为什么`f()`在它只是 时调用该函数`p.f()`，但我想我只是对演员表的确切作用感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:26:24.747

您始终可以将子类型转换为类型，但是在 java 中始终允许这种转换，因为实例是子类型的子类型方法将被执行。

您可以[在此处](https://stackoverflow.com/questions/2233902/java-rules-for-casting)查看更多信息在 Java 中有两种类型的引用变量转换：

*   **Downcasting**：如果你有一个引用变量引用一个子类型对象，你可以将它分配给子类型的一个引用变量。您必须进行显式强制转换才能做到这一点，结果是您可以使用这个新的引用变量访问子类型的成员。
*   **Upcasting**：您可以显式或隐式地将引用变量分配给超类型引用变量。这是一个本质上安全的操作，因为赋值限制了新变量的访问能力。

是的，您需要直接或间接地实现接口，以便将您的类对象引用分配给接口类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:28:02.583

调用方法时，由于 ploymorphsim，它将始终在对象类型上执行，而不是在引用类型上执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:28:07.857

这是面向对象的基石之一：多态性。您有各种 Person 实体，每个实体都以自己的方式执行 f()！它是对象的实际实例，而不是 f() 所转换的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:29:25.500

无论您是否将 Student 转换为 Person，都会调用相同的方法——Student 中的方法。

向上转换引用（从子类到超类）没有真正的功能（实际上通常在内部是无操作的）。另一方面，向下转换告诉 JVM，您认为超类属于指定的子类，如果不是，则会引发转换错误。

（我会感谢 gefei 指出上面的一个遗漏：强制转换 ALSO 告诉编译器类型，编译器使用此信息来了解对象（假定）具有哪些方法和字段。这对于编译Java 程序到字节码，但它确实允许编译器进行通常的编译时有效性检查。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T19:28:21.460

向上转型在这里是无关紧要的。如果存在，将始终调用被覆盖的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T19:30:56.830

你的例子中的演员是完全没用的。编译器知道它`p`是 type `Person`。更有趣的是缩小范围：

```
Person p = getPerson();
if (p instanceof Student) {
    Student s = (Student) p;
    // do something Student-specific with s
} 
```

在 Java 中强制转换引用类型*不会*改变对象的性质；它只告诉编译器可以对对象做出哪些假设。在运行时，对象的实际类型用于确定调用什么方法。（请注意，原始类型并非如此；将 an`int`转换为 a`byte`将更改数据。）

# html - 将 div 的高度设置为浏览器的高度

> ID：12306992
> 
> 赞同：0
> 
> 时间：2012-09-06T19:24:46.167
> 
> 标签：html, css, height

我正在尝试制作一个幻灯片 div 列表，其中包含内容，与 Foo Fighter 的内容非常相似，在他们的网站上：[http ://www.foofighters.com/us/discography](http://www.foofighters.com/us/discography)

我想弄清楚的主要事情是如何在调整浏览器大小时让每个“幻灯片”自动调整为适当的高度。你可以在我链接的唱片页面上自己查看。有没有办法做到这一点？我假设这将是一个 javascript/jquery 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:02:30.103

重要的是要知道块元素的高度为 100%，所有父元素也必须设置为 100% 高度。

例如，我的 if html 如下所示：

```
<!DOCTYPE html>
<html>
<body>

<div id="wrapper">
   <div id="myDiv">This is my div!</div>
</div>    

</body>
</html> 
```

使 myDiv 100% 高度所需的 CSS 将是

```
<style type="text/css">
   html, body, #wrapper, #myDiv { height: 100%; }
</style> 
```

请注意，#myDiv 的所有父级也都设置为 100% 高度。这是实现块元素 100% 动态高度的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:45:28.770

将 a`div`调整为浏览器窗口高度的示例：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html, body {
    height: 100%;
    background-color: black;
    margin: 0;
    padding: 0;
}
#mydiv {
    height: 100%;
    width: 400px;
    background-color: white;
    margin: auto;
    text-align: center;
}
</style>
</head>
<body>

<div id="mydiv">TEST</div>

</body>
</html> 
```

在 Chrome、IE9、Firefox 和 Opera 中测试，均在 Windows 上运行。IE9 需要指定 DOCTYPE 才能正常工作，其他浏览器似乎并不关心。

JQuery 替代方案：[根据视口高度动态设置 DIV 高度](https://stackoverflow.com/questions/6564752/set-div-height-dynamically-based-on-viewport-height)

# linux - 删除某种类型的所有文件，除了linux终端中的一种类型

> ID：12306994
> 
> 赞同：3
> 
> 时间：2012-09-06T19:24:52.347
> 
> 标签：linux, ubuntu, terminal

在我运行 Ubuntu 的计算机上，我有一个文件夹，里面有数百个文件，所有文件都命名为“index.html.n”，其中 n 从 1 开始并继续向上。其中一些文件是实际的 html 文件，一些是图像文件（png 和 jpg），还有一些是 zip 文件。

我的目标是永久删除除 zip 存档之外的每个文件。`rm`我认为它是and的某种组合`file`，但我不确定确切的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:38:33.953

如果它适合您的参数列表并且没有文件名包含冒号，`xargs`则应该使用简单的管道：

```
file * | grep -vi zip | cut -d: -f1 | tr '\n' '\0' | xargs -0 rm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:37:30.647

首先`find`查找匹配文件，然后`file`获取文件类型。`sed`消除其他文件类型，并从`file`. 最后，`rm`删除：

```
find -name 'index.html.[0-9]*' | \                
    xargs file | \                                
      sed -n 's/\([^:]*\): Zip archive.*/\1/p' |  
        xargs rm 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:39:11.967

我会跑：

```
for f in in index.html.*
do
  file "$f" | grep -qi zip
  [ $? -ne 0 ] && rm -i "$f"
done 
```

如果您有足够的信心，请删除 -i 选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:44:42.667

这是我要使用的方法；它不是完全自动化的，但它比其他一些方法更不容易出错。

```
file * > cleanup.sh 
```

或者

```
 file index.html.* > cleanup.sh 
```

这会生成`index.html.*`当前目录中所有文件（不包括点文件）或所有文件的列表，并将列表写入`cleanup.sh`.

使用您最喜欢的文本编辑器（我的恰好是 vim），编辑`cleanup.sh`：

*   添加`#!/bin/sh`为第一行
*   删除所有包含字符串“ `Zip archive`”的行
*   在每一行上，删除从`:`到 行尾的所有内容（在 vim 中，`:%s/:.*$//`）
*   将每一行的开头替换为“ `rm`”，后跟一个空格

退出编辑器，更新文件。

```
chmod +x cleanup.sh 
```

您现在应该有一个 shell 脚本，它将删除除 zip 文件之外的所有内容。

在运行之前仔细检查脚本。注意拼写错误，以及名称中包含 shell 元字符的文件。您可能需要在文件名中添加引号。

（请注意，如果您将其作为单行 shell 命令执行，则在实际删除它们之前，您没有机会检查要删除的文件列表。）

一旦您对脚本正确感到满意，请运行

```
./cleanup.sh 
```

从您的外壳提示符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T19:44:28.763

```
for i in index.html.*
do
    $type = file $i;
    if [[ ! $file =~ "Zip" ]]
    then
        rm $file
    fi
done 
```

将 更改`rm`为 a`ls`以进行测试。

# php - 在数组中使用闭包

> ID：12306999
> 
> 赞同：3
> 
> 时间：2012-09-06T19:25:26.050
> 
> 标签：php

我有一个类似的代码：

```
$name = '_DBR'; // This comes from a function call

$this->_Inits['_DBR'] = function () { return get_library('Database')->getConnection('users', 'read'); };

$inits = $this->_Inits[$name];
$result = $inits(); // ERROR: Function name must be a string

return $result; 
```

我得到的错误是：

```
Function name must be a string in xxxx 
```

有什么方法可以使用数组来存储多个闭包，有没有一种可行的方法来访问它们？

我使用 PHP 5.4.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:30:31.397

是的，改用 call_user_func 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T19:33:03.670

这在 php 5.3.10 中对我来说很好。

```
$m = array();
$m['fish'] = function() { print "Hello\n"; };
$f = $m['fish'];
$f(); 
```