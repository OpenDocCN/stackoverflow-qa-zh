# StackOverflow 问答 12101000-12101999

# objective-c - 重新分配块objective-c

> ID：12101004
> 
> 赞同：3
> 
> 时间：2012-08-23T22:41:01.063
> 
> 标签：objective-c, ios5, objective-c-blocks

该块是GridScrollView中定义的一个属性：

```
typedef BoxView* (^RenderBlock)(NSDictionary* json, CGRect);
@interface GridScrollView : PagingScrollView
@property (nonatomic, copy) RenderBlock renderBlock; 
```

我想像这样使用它：

```
switch(current.tag)
{
    case 1:
        scrollView.renderBlock = ^(NSDictionary* json, CGRect frame)
        {
             //returns a boxview
        }
        break;
     case 2:
        scrollView.renderBlock = ^(NSDictionary* json, CGRect frame)
        {
             //returns a different boxview
        }
        break;
} 
```

虽然此代码第一次运行良好，但当它被重新分配时，我得到一个 EXC_BAD_ACCESS (code=2, address=0x0) 错误。这里发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:51:16.530

由于对块的调用本身正在执行对象的声明，因此请尝试在其周围添加一对额外的大括号：

```
case 1: {
            scrollView.renderBlock = ^(NSDictionary* json, CGRect frame) {
             //returns a boxview
            }
        }
        break; 
```

虽然我不知道为什么它会像第一次那样运行然后崩溃。

# sql-server - 查找 3930 SQL Server 错误的原因

> ID：12101005
> 
> 赞同：3
> 
> 时间：2012-08-23T22:41:01.797
> 
> 标签：sql-server, debugging, error-handling

我有一个我写的脚本，它在特定行上给我一个 3930 错误。这是一个简单的更新语句，当我在脚本中运行它时它会失败，但是如果我从脚本中打印变量并手动运行它，则该行执行得很好。有人知道我如何追踪这个错误吗？

该行在游标中执行，并在此循环之前正确运行数百次。如果我让它处理所有记录或更新我的游标查询以仅选择这一记录，我会收到错误消息。

完整的错误信息是：

> *消息 3930，级别 16，状态 1，第 160 行
> 当前事务无法提交，并且无法支持写入日志文件的操作。回滚事务。*

违规行是：

```
UPDATE [DBName].[dbo].[TableName] 
SET [XXX] = @XXX, [DateEdited] = GETDATE(), [EditedBy] = 'MyUser' 
WHERE [YYY] = @YYY 
```

编辑：

我对查询进行了清理，以便可以将其发布在这里；见下文。有几点需要注意。

1) 对于承包商“ABCDEF”，[FactoryDB].[dbo].[AuditInformation] 中只有一条记录，因此该记录不需要光标 B。我尝试删除光标并保留所有包含的代码，但这修复了错误

2) 删除解析年龄的 try-catch 块也可以修复错误，即使剩余的任何代码都没有使用它。仅供参考，代码会出错并且 catch 块会执行。

```
--TABLE TO HOLD ERROR MESSAGES
declare @errors TABLE (FormId int, FactoryContractorCode nvarchar(50), FactoryId nvarchar(50), ErrorMessage nvarchar(1000) )

--DECLARE VARIABLES
DECLARE @factoryCode nvarchar(50)
DECLARE @factoryId nvarchar(50)
DECLARE @formId int
DECLARE @auditDate DateTime
DECLARE @totalEmployees int
DECLARE @ageRange nvarchar(50)
DECLARE @ageAverage int
DECLARE @percentageFemale int
DECLARE @percentageMale int
DECLARE @rowIdToUpdate nvarchar(50)

DECLARE @tempFormId int
DECLARE @tempDateString nvarchar(50)
DECLARE @tempAuditDate DateTime

--CURSOR TO LOOP THROUGH ALL FACTORY CODES
DECLARE a CURSOR FOR
    SELECT DISTINCT [FactoryCode] FROM [FactoryDB].[dbo].[AuditInformation] WHERE [FactoryCode] = 'ABCDEF'
OPEN a
FETCH a into @factoryCode
WHILE(@@FETCH_STATUS = 0)
BEGIN
BEGIN TRANSACTION

    --RESET VARIABLES TO NULL
    SET @totalEmployees = NULL
    SET @ageRange = NULL
    SET @formId = NULL
    SET @rowIdToUpdate = NULL
    SET @tempAuditDate = NULL
    SET @auditDate = NULL
    SET @ageAverage = NULL
    SET @percentageFemale = NULL
    SET @percentageMale = NULL
    SET @tempFormId = NULL
    SET @tempDateString = NULL
    SET @factoryId = NULL

    SELECT @factoryId=[ContractorID] FROM [DataDB].[dbo].[ContractorIdentifier] WHERE [ContractorCode] = @factoryCode

    --FIND THE FORM ID WITH THE MOST RECENT DATE
    DECLARE b CURSOR FOR
        SELECT [FormId],[StartDate] FROM [FactoryDB].[dbo].[AuditInformation] WHERE [FactoryCode] = @factoryCode AND NOT [StartDate] IS NULL
    OPEN b
    FETCH b into @tempFormId, @tempDateString
    WHILE(@@FETCH_STATUS = 0)
    BEGIN
        --PARSE THE FORM DATE
        BEGIN TRY
            SET @tempAuditDate = CAST(@tempDateString AS DateTime)
        END TRY
        BEGIN CATCH
            INSERT INTO @errors ([FormId],[FactoryContractorCode],[FactoryId],[ErrorMessage]) VALUES (@tempFormId, @factoryCode, @factoryId, 'Unable to parse date value of: '''+@tempDateString+'''')
        END CATCH

        --FIRST TIME
        IF (@auditDate IS NULL)
        BEGIN
            SET @auditDate = @tempAuditDate
            SET @formId = @tempFormId
        END

        --UPDATE IF THE NEW DATE IS MORE RECENT THAN THE PREVIOUS ONE
        IF(@tempAuditDate > @auditDate)
        BEGIN
            SET @auditDate = @tempAuditDate
            SET @formId = @tempFormId
        END

    FETCH b into @tempFormId, @tempDateString
    END
    CLOSE b
    DEALLOCATE b

    --IF A FORM WAS FOUND WITH A PARSABLE DATE
    IF (NOT @formId IS NULL)
    BEGIN
        --GET AUDIT INFORMATION
        SELECT TOP 1
            @totalEmployees = m.[TotarEmployees]
            ,@ageRange = m.[EmployeeAgeRange]
        FROM [FactoryDB].[dbo].[AuditInformation] g
        INNER JOIN [FactoryDB].[dbo].[AuditData] m on g._form_id = m._form_id
        WHERE g.[_form_id] = @formId

        --PARSE THE AVERAGE AGE FROM THE VARCHAR COLUMN
        BEGIN TRY
            DECLARE @low int
            DECLARE @high int

            SET @low = CAST(LTRIM(RTRIM(SUBSTRING(@ageRange,0,CHARINDEX('-',@ageRange)))) AS int)
            SET @high = CAST(LTRIM(RTRIM(SUBSTRING(@ageRange,CHARINDEX('-',@ageRange)+1,LEN(@ageRange)))) AS int)
            SET @ageAverage = ROUND((@low+@high)/2, 0)
        END TRY
        BEGIN CATCH
            INSERT INTO @errors ([FormId],[FactoryContractorCode],[FactoryId],[ErrorMessage]) VALUES (@formId, @factoryCode, @factoryId, 'Unable to parse age value of: '''+@ageRange+'''')
        END CATCH
    END

    --UPDATE THE FACTORY VIEW TABLE
    SELECT TOP 1 @rowIdToUpdate = [Id] FROM [DataDB].[dbo].[DataTable] WHERE [ContractorID] = @factoryId  AND [DateEdited] < @auditDate ORDER BY [DateEdited] DESC

    IF (NOT @rowIdToUpdate IS NULL)
    BEGIN

        IF(NOT @totalEmployees IS NULL)
            UPDATE [DataDB].[dbo].[EmployeeStats] SET  [TotalEmployees] = @totalEmployees, [DateEdited] = GETDATE(), [EditedBy] = 'LstAD' WHERE [RowIDs] = @rowIdToUpdate
        ELSE
            INSERT INTO @errors ([FormId],[FactoryContractorCode],[FactoryId],[ErrorMessage]) VALUES (@formId, @factoryCode, @factoryId, 'Did not update Total Employees. Value was null or unable to be calculated.')
    END

ROLLBACK
FETCH a into @factoryCode
END
CLOSE a
DEALLOCATE a

--DO SOMETHING WITH THE ERRORS TABLE VARIABLE
SELECT * FROM @errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:28:09.580

事实证明，即使它在 Try/Catch 块中，错误也会阻止事务被提交。我不知道这一点。在尝试进行数学运算之前，我重新编写了“--PARSE THE AVERAGE AGE FROM THE VARCHAR COLUMN”代码以使用 ISNUMERIC 作为检查，从而解决了问题。感谢评论者的帮助。否则我不会想出来的。

# php - PHP：“move_uploaded_file()”在没有任何有用信息的情况下失败

> ID：12101008
> 
> 赞同：1
> 
> 时间：2012-08-23T22:41:08.910
> 
> 标签：php, file-upload

我有一个上传的文件，当试图将它保存到文件系统时，它只是失败了。
我的`var_export($_FILES['bom_file'])`产品

```
array (
  'name' => '_bomUpload.tester.csv',
  'type' => 'application/octet-stream',
  'tmp_name' => 'C:\\wamp\\tmp\\php837A.tmp',
  'error' => 0,
  'size' => 265,
) 
```

这是我的`move_uploaded_file()`尝试：（我尝试了几个差异文件路径）

```
$file_path = 'C:/wamp/NetBeansProjects/BomProject/application/uploads/boms/testfile.csv';  // For Testing ---->
$testVar = move_uploaded_file($_FILES['bom_file']['name'], $file_path);
echo ($testVar)? 'The file has been uploaded': 'There was an error uploading the file';
echo '<pre>UPLOAD?: ', var_export($testVar), '</pre>';  // For Testing ----> 
```

我一直收到错误消息并且`$testVar`是错误的。

我错过了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:47:46.100

改变

```
$testVar = move_uploaded_file($_FILES['bom_file']['name'], $file_path); 
```

到

```
$testVar = move_uploaded_file($_FILES['bom_file']['tmp_name'], $file_path); 
```

这`name`只是文件的“名称”。实际上传的文件引用在`tmp_name`数组键中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:54:48.070

尝试`$testVar = move_uploaded_file($_FILES['bom_file']['tmp_name'], $file_path);`-该文件仍应位于 tmp_name 中

# android - 修改 Android 布局时的 Eclipse XML 图形问题

> ID：12101020
> 
> 赞同：1
> 
> 时间：2012-08-23T22:42:31.520
> 
> 标签：android, eclipse

通过多次安装和项目，我已经有这个问题很长时间了。我试过搜索无济于事，我已经设法解决它，但它最终激怒了我，*几乎肯定会死*......

**我正在使用 Oracle JDK 1.7.0_05 在 Windows 7 x64 上的 Eclipse 3.7.2 上运行最新版本的 ADT**

发生的情况是，在图形所见即所得编辑器中编辑布局并将 TextView 设置为某些文本后，当我切换到文本/XML 视图时，会发生以下情况：

![截图 1](../Images/a53db3d8d493215bdc6d32916b4ed158.png)

如您所见，LinearLayout 的结束标记位于底部，没有行号。出于某种原因，文本编辑器会将所有可见文本偏移一行。如果我突出显示它，它*有时会*自我纠正，而且只是部分纠正：

![截图 2](../Images/d9efea3aa1ca69786d6a3449ff9782bd.png)

还有其他人有这个问题吗？我不可能是唯一的。谢谢

**编辑：**尝试了 Eclipse 4.2，同样的问题。

![截图 3](../Images/afa976181249635f312281d558315dee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:04:13.550

在图形编辑器中进行更改后，我肯定有这个问题。

我发现如果你全选，用退格键删除然后撤消，它会自行解决。它发生的太多了，我现在的捷径不过是一种不便

~~**编辑：**好的，所以问题是 Eclipse 3.7。更新到 4.2 为我解决了这个问题。~~

看来不是。对我来说，故障似乎只发生在使用所见即所得编辑器更改视图属性时

# javascript - 防止滚动事件

> ID：12101021
> 
> 赞同：1
> 
> 时间：2012-08-23T22:42:37.083
> 
> 标签：javascript, jquery, scroll

设置属性时有什么方法可以防止触发`onscroll`事件？`scrollTop`

```
var a = $(".elem");
a.scrollTop(100); // will fire onScroll 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:05:31.243

[这段代码](http://jsfiddle.net/d8YLS/)有点骇人听闻，但它完成了工作：

```
var p1 = $('.one'), p2 = $('.two');
//var lock;
$('p').scroll(function() {
    //if (lock) return;
    //lock = true;
    var scrollTop = $(this).scrollTop();
    var other = $(this).hasClass('one') ? p2 : p1;
    other.scrollTop(300 - scrollTop);
    console.log('To:', 300 - scrollTop);
    //lock = false;
});​ 
```

我们似乎都做出的一个基本假设是事件将*同时*运行，但仔细观察后我们意识到 Javascript 运行在单个线程上，这意味着它们不会同时运行。因此，注释掉的锁定功能是无用的。如果你只是想同步滚动，上面的代码应该可以正常工作，但老实说我不太确定如何从那里开始。

# java - 从 POJO 生成 JSON 样本

> ID：12101023
> 
> 赞同：11
> 
> 时间：2012-08-23T22:42:42.313
> 
> 标签：java, json, pojo

我们正在寻找一种方法（可能是现有框架或类似框架）来基于 POJO（源代码或二进制文件）生成示例 JSON 片段。例如：

```
public class foo {
   String var1;
   String var2;

   public String getVar1() { return var1; }
   public void setVar1(String var1) { this.var1 = var1; }

   public String getVar2() { return var2; }
   public void setVar2(String var2) { this.var2 = var2; }
} 
```

会产生一个 JSON 样本，如下所示：

```
{
  "var1": "string1",
  "var2": "string2"
} 
```

有任何想法吗？我们当然可以手动编写代码。只是想看看那里是否已经有东西了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:11:12.133

还有另一个名为 Genson 的库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。

实际上，Genson 比 Gson 更快，具有更多功能，并且性能接近 jackson（但它更轻量级），请参见[http://code.google.com/p/genson/wiki/Metrics](http://code.google.com/p/genson/wiki/Metrics)。它使用流式 api 而不是 dom 模型，带来更好的可扩展性，并且在 Web 应用程序中很好，您可以在输入到达时处理转换。

Genson 非常适合各种用例，从简单的转换到所有流程的完全定制。您可以配置很多东西（使用字段和/或方法，使用带参数且不带任何注释的构造函数，按可见性过滤属性等等）。你应该看看维基。

它的最新版本 (0.91) 在 maven 中央存储库中可用。

```
<dependency>
    <groupId>com.owlike</groupId>
    <artifactId>genson</artifactId>
    <version>0.91</version>
</dependency> 
```

免责声明：我是图书馆的作者，但我尽量做到客观（尤其是在基准测试中）。

**编辑** 关于 Gson 和 Jackson 的几句话。我已经使用 Jackson 2 年多了，还有一点 Gson。首先要注意的是，Jackson 是目前最快的 json/java 库（Gesnon 试图击败它，但它很难）。Jackson 还有很多功能和配置可能性（大多数基于注释）。我对 Jackson 有标准和高级的使用，在我需要 Jackson 没有提供的功能之前，这很好。我发现这个库真的很难扩展（对于我的用例，如果不重写大部分是不可能的）。

然后我尝试了Gson。关于 Gson，首先要注意的是它不使用 getter/setter，而只使用字段！它的表现并不好（尤其是与杰克逊或根森相比）。随着最新版本的改进，它们还提供了流式 API，但仍然不够快。一开始，它的主要优势是对 Java 泛型的良好支持，但 Jackson 和 Genson 也提供了它。另请注意，Gson 的开箱即用功能比 Genson 或 Jackson 少。我还尝试在 Gson 中实现我需要的功能，但我发现 Beans 数据绑定部分不可扩展（几乎没有扩展点的单个类中的所有内容），所以我必须重写它。这是毫无疑问的，这就是我最终创建 Genson 的方式。

如果您不想使用 Genson，我真的建议您使用 Jackson 而不是 Gson。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T22:54:00.100

你也可以看看[Gson](http://code.google.com/p/google-gson/)（它直接读/写字段，不需要 getter/setter）：

```
Foo foo = ...
Gson gson = new Gson();
String json = gson.toJson(foo); 
```

帮自己一个忙，不要手动编码 JSON（或 XML，或任何可以避免的结构化数据格式）。这是不必要的重新发明轮子。以前有人做过，已经为你解决了逃逸、嵌套和各种边界情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T22:46:39.673

见这里：http: [//jackson.codehaus.org/](http://jackson.codehaus.org/)

快速入门指南：[http ://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T10:54:14.430

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用**EclipseLink JAXB (MOXy)**将您的对象模型转换为 JSON（和/或 XML）。下面是一个完整的例子。

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的演示代码可用于从`foo`. 请注意如何仅使用标准 JAXB API。自 Java SE 6 以来，JAXB API 一直在 JDK/RE 中。

```
package forum12101023;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(foo.class);

        foo foo = new foo();
        foo.setVar1("string1");
        foo.setVar2("string2");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输出**

```
{
   "var1" : "string1",
   "var2" : "string2"
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T22:54:35.617

使用[GSON](http://code.google.com/p/google-gson/)：

```
Foo foo = new Foo();
foo.setVar1("string1");
foo.setVar2("string2");

Gson gson = new Gson();      
String json = gson.toJson(foo); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-10T16:46:33.320

您可以使用 Gson 来执行此操作。

```
Gson gson = new Gson();   
String fooJSON= gson.toJson(foo); 
```

检查[此](http://atechiediary.blogspot.in/2013/06/javajsextjs-convert-serialize-java.html)链接以获取详细说明以及如何在 JS/Extjs 中执行此操作以及从 JSON 反序列化为 POJO

# asp.net-mvc - 使用 jQuery.ajax 在同一调用中将对象和文件发布到服务器

> ID：12101028
> 
> 赞同：1
> 
> 时间：2012-08-23T22:42:59.923
> 
> 标签：asp.net-mvc, jquery, client-side, multipartform-data

我正在尝试将客户端发布到以下 MVC 操作方法：

```
[HttpPost]
public void Create(ProductModel product, HttpPostedFileBase imageFile)
{
    productServices.AddProduct(product, imageFile);
} 
```

使用 type="submit" 按钮很简单，但是在我的特殊情况下，我需要使用 ajax 调用来完成。

我可以很容易地将 ProductModel 作为 JSON 传递。

```
$.ajax({
    url: '/Product/Create',
    type: 'POST',
    data: JSON.stringify({product: {
            Id: 1,
            Name: "SomeName"
        }
    }),
    contentType: 'application/json; charset=utf-8',
    success: function (data) {
        alert("Product Created!");
    }
}); 
```

我也可以将文件作为 FormData 传递

```
var imageFileData = new FormData();
imageFileData.append('imageFile', myFileObject);

$.ajax({
    url: '/Product/Create',
    data: imageFileData,
    cache: false,
    contentType: false,
    processData: false,
    type: 'POST',
    success: function (data) {
        alert(data);
    }
}); 
```

但是，我似乎无法在同一个调用中将 2 组合为单独的参数，因为它们是根本不同的 contentTypes。

这可能吗？我会以错误的方式解决这个问题吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:54:15.357

您可以像添加文件一样将 json 添加到 FormData

```
var imageFileData = new FormData();
imageFileData.append('imageFile', myFileObject);
imageFileData.append('product', JSON.stringify({product: {
            Id: 1,
            Name: "SomeName"
        });

$.ajax({
    url: '/Product/Create',
    data: imageFileData,
    cache: false,
    contentType: false,
    processData: false,
    type: 'POST',
    success: function (data) {
        alert(data);
    }
}); 
```

你们可以将表单本身添加到 FormData

```
$.ajax({
    url: '/Product/Create',
    data: new FormData(theFormElement),
    cache: false,
    contentType: false,
    processData: false,
    type: 'POST',
    success: function (data) {
        alert(data);
    }
}); 
```

# vba - MS Access LisBox On_click ItemsSelected 为空

> ID：12101031
> 
> 赞同：1
> 
> 时间：2012-08-23T22:43:17.993
> 
> 标签：vba, ms-access

我不确定为什么会这样，但是在 Click 事件中，我需要获取列表框中的选定项，但是当循环初始化时，没有可用的选定项。

```
 Private Sub lstUPSCs_Click()
        On Error GoTo Err_lstAttribute_Change

                    Dim strSelect  As String
                    Dim sQuery As String
                    Dim sUPSC As String 
                    Dim itm As Variant

                    For Each itm In Me.lstUPSCs.ItemsSelected
                      strSelect = strSelect & "," & LTrim(RTrim(Mid(lstUPSCs.Column(0, itm), 1, 8)))

                    Next

END SUB 
```

请帮忙解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:48:58.400

对于多选列表框，以下代码应返回第一列（第 0 列）中的值列表。我通常不会对多选列表框使用单击事件。

```
For Each itm In Me.lstUNSPSCs.ItemsSelected
  strSelect = strSelect & "," & Me.lstUNSPSCs.Column(0, itm)
Next

strSelect = Mid(strSelect,2) 
```

对于没有多选的列表框，列表框的默认值是绑定列的值。上面的代码行不通，但你可以简单地说：

```
Me.lstUNSPSCs 
```

或者

```
Me.lstUNSPSCs.Column(2) 
```

其中数字是从零开始的任何有效列号。

顺便说一句，不需要 LTrim，RTrim - Trim 涵盖了两者。

# asp.net - web.config 授权规则容易被绕过

> ID：12101041
> 
> 赞同：0
> 
> 时间：2012-08-23T22:44:50.707
> 
> 标签：asp.net, web-config, asp.net-membership, authorization

我想知道是否可以**绕过**我应用于网站目录的**授权**规则？我的意思是有人可以（通过使用任何技巧或黑客）在没有**特权**的情况下访问资源？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:51:40.527

永远不要依赖 web.config 来保护 ASP.Net MVC 应用程序。我不确定这是否同样适用于 ASP.Net Web 表单。

> 您不能使用路由或 web.config 文件来保护您的 MVC 应用程序。保护 MVC 应用程序的唯一受支持的方法是将 Authorize 属性应用于每个控制器，并在登录和注册操作上使用新的 AllowAnonymous 属性。根据当前区域做出安全决策是一件非常糟糕的事情，并且会使您的应用程序容易受到漏洞攻击。

[http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:05:07.910

如果可能的话，我们（ASP.NET 团队）将被迫修补它。我们宣传开发人员可以使用基于 URL 的授权来可靠地保护 WebForms 页面。

您*不得*使用基于 URL 的授权来保护 MVC 操作或通过路由管道的其他内容。这是因为很容易陷入可以通过多个 URL 访问特定 MVC 控制器或操作的情况，并且通常很难找出每一个排列并通过 config.xml 将其关闭。有关更多信息，请参阅 Eric 发布的链接。****

# c++ - 使用带有 C++ 和 IMAP 协议的 Libcurl 的 IMAP 命令

> ID：12101046
> 
> 赞同：1
> 
> 时间：2012-08-23T22:45:21.377
> 
> 标签：c++, imap, libcurl

我正在创建一个小型电子邮件客户端，它通过 Imap 协议登录到 Gmail 并搜索特定的电子邮件发件人，然后下载该特定邮件的内容。

我正在使用 C++ 和 libcurl。

我已成功登录，标题后返回的响应是我收件箱中的第一封电子邮件。

我想知道如何通过可配置为与 Libcurl 一起使用的 Imap 协议发送请求/命令。对 RFC 规范的简要阅读表明了以下形式

```
<COMMAND> <argument> 
```

虽然这可能在使用 telnet 或 curl 的命令行上工作，但它与 C/C++ 不兼容。

我通过表单的 URL 字符串（确切地说是 char *）登录

```
"imaps://" <username> ":" <password> "@imap.gmail.com:993" 
```

并将其作为 curl 启动的 url 传递，但我无法形成相同形式的任何其他请求。

使用 Libcurl 向 gmail/imap 发送命令的正确方法是什么？

提前致谢

任何帮助深表感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:06:50.993

我想说粗略的语法描述看起来类似于

```
imap://[<username>:<password>@]<hostname>[:portnum]/[mailboxname] 
```

# windows-phone-7 - 如何停留在列表框屏幕上的最后一个项目上

> ID：12101047
> 
> 赞同：0
> 
> 时间：2012-08-23T22:45:21.080
> 
> 标签：windows-phone-7

我在 MainPage.xaml 上使用了一个列表框。通过使用鼠标上下移动，我可以看到内容消失并显示在 Windows Phone 模拟器屏幕上。松开鼠标后，内容将从第一项开始。假设我想选择列表框中的最后一项。如何保留屏幕上的最后一项？希望你能帮助我或给我一个例子或一个想法来解决这个问题。提前致谢。

**编辑：**

有我的用户控制：

```
<UserControl x:Class="CMSPhoneApp.QueueListControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480"
xmlns:local="clr-namespace:CMSPhoneApp"  >

<UserControl.Resources>       
    <local:VisibilityConverter x:Key="VisibilityConverter"/>
    <local:ColumSpanConverter x:Key="ColumSpanConverter"/>        
</UserControl.Resources>

<Grid x:Name="LayoutRoot"  Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">       
            <ListBox x:Name="lst" HorizontalAlignment="Left" Margin="6,6,0,0"   VerticalAlignment="Top" Width="400"    
                  ItemsSource="{Binding Path=MyQueue}"  
                      SelectedItem="{Binding Path=CurrentQueue, Mode=TwoWay}"  >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1,1,1,1" BorderBrush="Blue">
                            <Grid Width="auto" HorizontalAlignment="Stretch" >                                  
                                    <Grid.RowDefinitions>                                          
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="250"/>
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Image Source="{Binding Type}" Grid.Row="0" Grid.Column="0"/>
                                    <TextBlock  Grid.Row="0" Grid.Column="1"  Grid.ColumnSpan= "{Binding isSpan, Converter={StaticResource ColumSpanConverter}}" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"  />
                                    <Button x:Name="btnAction" Grid.Row="0" Grid.Column="3" ClickMode="Press" Click="btnAction_Click" Style="{StaticResource ButtonStyle1}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}"
                                         Tag="{Binding callNumber}">

                                        <Button.Content>
                                            <TextBlock Width="85" Height="70" Text="{Binding ActionCaption}" 
                                                       Style="{StaticResource LabelStyle_20}"     />
                                        </Button.Content>
                                    </Button>

                                </Grid>
                                </Border>
                    </DataTemplate>                    

                </ListBox.ItemTemplate>
            </ListBox>

    </Grid>
</Grid> 
```

xaml 页面使用上述用户控件。

```
 <phone:PhoneApplicationPage xmlns:my="clr-namespace:CMSPhoneApp"  
x:Class="CMSPhoneApp.TestPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True"
xmlns:local="clr-namespace:CMSPhoneApp"
  xmlns:toolkit="clr- namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
  >

<phone:PhoneApplicationPage.Resources>

    <local:QueueItemViewModel x:Key="TestViewModel"/>
    <DataTemplate x:Name="PickerItemTemplate">
        <StackPanel Orientation="Horizontal" >
            <TextBlock Text="{Binding city}" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Name="PickerFullModeItemTemplate">
        <StackPanel Orientation="Horizontal" >
            <TextBlock Text="{Binding city}" Margin="16 0 0 0" FontSize="24" FontFamily="{StaticResource PhoneFontFamilyLight}" />                        
        </StackPanel>
    </DataTemplate>

</phone:PhoneApplicationPage.Resources>
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent" DataContext="{StaticResource TestViewModel}">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>           
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28"  >
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Test page" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <StackPanel x:Name="City" Grid.Row="1" Margin="12,0,12,0"  Orientation="Horizontal">
        <toolkit:ListPicker   x:Name="listPicker" ItemTemplate="{StaticResource PickerItemTemplate}"  
              Header="Location"   CacheMode="BitmapCache" Width="194" 
                        SelectedItem="{Binding city}"        />

    </StackPanel>
    <!--ContentPanel - place additional content here-->       
        <my:QueueListControl x:Name="lst" Grid.Row="2"/>     
    <StackPanel Grid.Row="3" Orientation="Horizontal" >
        <Button x:Name="btnQueue" Style="{StaticResource ButtonStyle1}" Content="Queue"/>
        <Button x:Name="btnRefresh" Style="{StaticResource ButtonStyle1}" Content="Refresh"/>
        </StackPanel>

</Grid> 
```

获取GetResponseStream后设置itemSource的代码：

```
 Dispatcher.BeginInvoke(new Action(() => lst.lst.ItemsSource = ar.cmsQueue)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:18:04.333

你在这。您没有设置列表框的高度，因此它从其父级获取其高度，即自动（这意味着列表框的高度没有边界）。因此，通过按住鼠标，您可以滚动到任何项目，但不能停在特定项目。将高度固定到 ListBox 400 左右，然后检查。希望这可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:39:03.330

您是否在代码的任何地方做类似的事情？

`listbox.ScrollIntoView(0);`，其中 listbox 是您的 mainPage.xaml 上的 ListBox 的名称

尽量避免使用这样的代码行。除此之外，如果没有一些代码，我无法理解您的问题的性质。希望能帮助到你

# php - 我在 mysqli 中收到错误和警告

> ID：12101053
> 
> 赞同：0
> 
> 时间：2012-08-23T22:46:09.533
> 
> 标签：php, mysql, sql, mysqli

更新：

我在 mysqli 中有几个需要帮助的错误和警告：

```
Fatal error: Call to undefined method mysqli_stmt::get_result() in ... on line 63 
```

在我下面的代码中，有人知道如何处理这些警告和错误吗？

```
$query = "SELECT * FROM Teacher WHERE TeacherAlias = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$getid);
// execute query
$stmt->execute();  
//get results
$result = $stmt->get_result(); 

$numrows = mysqli_num_rows($result);
if ($numrows == 0){   

       // don't use $mysqli->prepare here
$query = "SELECT * FROM Teacher WHERE TeacherUsername = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$getuser);
// execute query
$stmt->execute(); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:55:53.920

您需要先检索一个[mysqli_result](http://www.php.net/manual/en/class.mysqli-result.php)对象，例如...

```
$res = $stmt->get_result(); 
```

...然后从此对象中获取行数（不是`$stmt`）：

```
$numrows = mysqli_num_rows($res); 
```

**更新：** `get_result`方法仅在 PHP 5.3+ 中可用，对于旧版本，应使用以下方法：

```
// $stmt preparing code goes here...

$stmt->execute();
$stmt->store_result();
$num_rows = $stmt->num_rows;
doSomethingWith($num_rows);

// processing cycle:
$stmt->bind_result($some_param, $another_param);
while ($stmt->fetch()) {
   doSomethingElseWith($some_param, $another_param);
}
$stmt->free_result();
$stmt->close(); 
```

作为旁注，有两个建议：1）在这里使用单个查询并同时在 TeacherAlias 和 TeacherUsername 字段中查找值可能会更快（使用 OR 运算符，如`TeacherAlias = ? OR TeacherUsername = ?`）；`SELECT id, TeacherAlias AS alias, TeacherUsername AS username...`2) 在查询中使用明确声明的列 ( ) 而不是仅使用 ( )会更容易`SELECT *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:02:00.483

我不习惯使用 msqli 但我会尝试回答你，所以首先，你说程序，“如果请求的结果等于 0 则重新启动所有。这不是很好，你'正在无用地使用资源。就像raina77ow说的，你想使用

```
$res = $stmt->get_result(); 
```

还有这个：

```
$numrows = mysqli_num_rows($res); 
```

那么你不再需要你的条件如果......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:04:37.953

您需要先获取数据，或者`free_result()`.

```
$stmt->fetch(); 
```

然后将其传递给`mysqli_num_rows()`

我建议的是，如果您不需要它并执行以下操作，请跳过获取：

```
$stmt->num_rows; 
```

这将计算结果中的行数，而无需获取它，并清除游标。

# html - 这些新网站如何加载几乎类似于 AJAX 的页面但更新历史记录？

> ID：12101056
> 
> 赞同：2
> 
> 时间：2012-08-23T22:46:20.920
> 
> 标签：html, performance, browser, browser-history

我承认。我自己没有做太多研究（该死的我）。

有一些网站（Gizmodo、Hulu）具有快速的重新加载时间并且看起来是 AJAXian，但更新了历史记录。它的功能类似于整页加载，但没有整页加载行为。供参考：我正在使用 Chrome，但 Safari 也这样做。

我已经寻找了预渲染标签，但这似乎并没有奏效。这真的只是超快速加载的情况吗？每个拥有精益堆栈的人都会受益吗？我没有看到它，所以也许我做错了什么。

这是浏览器增强功能吗？如果是这样，我该怎么做才能利用？

我最终会弄清楚的*。*在深入研究 tcpdump 和 AJAX 逆向工程的地下城之前，我只是想先了解一下 SO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T22:48:25.273

您正在[`pushState`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)从“HTML5”API 集中寻找。这些页面使用 ajax 仅拉入需要更改的部分并使用 URL 推送更改`pushState`- 然后它们侦听`popstate`事件并在您使用浏览器`back`和`forward`按钮时更新页面。

也可以看看：

*   [`location.hash`已死 - HTML5 万岁`pushstate`](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)
*   [W3 的规格（感谢@TheZ！）](http://dev.w3.org/html5/spec/history.html#the-history-interface)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:48:59.950

我的猜测是它涉及[HTML5 History API](http://diveintohtml5.info/history.html)，可能是[pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)函数。

# git - 如何组合两个独立的 git 存储库

> ID：12101061
> 
> 赞同：1
> 
> 时间：2012-08-23T22:46:55.883
> 
> 标签：git, version-control, github, repository

我在本地服务器上有一个 Web 项目的本地副本。一切都好。适用于 git 和 github。

但是我在另一台服务器上有（几乎）相同的存储库。问题是 repo 是用自己的`git init`命令初始化的，因此两个 repos 是分开的。

有没有办法同步这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:26:02.210

我已经成功使用了这个

```
git remote add upstream git://another-server.com/repo.git
git fetch upstream
git merge upstream/master 
```

# php - PHP 睡眠功能（电子邮件限制）冻结整个服务器

> ID：12101082
> 
> 赞同：2
> 
> 时间：2012-08-23T22:49:34.007
> 
> 标签：php, email, sleep

我在一个标准的共享 Hostgator 上，每小时限制为 500 封邮件。

我正在尝试限制我的电子邮件脚本，使其每 8 秒仅发送 1 封电子邮件...

```
$query=mysql_query("SELECT email FROM users WHERE verified='1' ORDER BY balance DESC");
while($arr=mysql_fetch_array($query)){
set_time_limit(30);
$mail->AddAddress($arr[0]);
$mail->Send();
$mail->ClearAddresses();
echo "Sent to ".$arr[0]."<br><br>";
sleep(8);
} 
```

我正在使用 PHPMailer。该脚本本身运行良好，它每 8 秒发送一次电子邮件......

但是域的其余部分完全冻结了。

是否有另一种我可以使用的睡眠方法不会冻结我的整个域？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:51:18.353

我建议使用 cron 作业 (Unix) 或计划任务 (Windows) 在设定的持续时间内调用此脚本。

[或者使用Mandrill](https://mandrill.com/)之类的东西来处理批量电子邮件的发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:58:53.350

Cronjobs 不能秒执行，只能分分钟执行。`*/1`在分钟字段中将每 1 分钟运行一次脚本，但您无法获得比这更精细的信息。

睡眠没有问题，但不要从浏览器运行命令。您锁定域的原因是因为您的 Apache 线程在脚本上处于休眠状态。在完成之前，您的请求将被阻止并排队。

我建议你保留你的脚本，然后每小时或每隔几个小时使用一次 cronjob 执行它。它真的需要多久运行一次？一天一次？

下面将在每晚午夜 5 点运行它，并将其扔到后台。

```
5 0 * * * user php -f /path/to/file & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T22:52:48.677

这不能直接在脚本中实现，除非它不断运行并在每次请求后重新读取数据库。

我建议每 8 秒运行一次 cron 作业，然后从数据库中读取第一个条目，如果存在，发送电子邮件：

1.  设置 cron 作业以每 8 秒调用一次脚本
2.  脚本查询数据库以获取表中的第一个条目
3.  如果数据存在，请根据该数据发送电子邮件
4.  删除行
5.  脚本结束

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T22:54:47.867

您正在使用 while 循环锁定您的服务器。每 8 秒执行一次循环，然后再等待 8 秒。其他一切都必须等到它完成。尝试使用 cron 作业。

# java - Sipdroid 构建错误

> ID：12101089
> 
> 赞同：1
> 
> 时间：2012-08-23T22:51:22.413
> 
> 标签：java, android, eclipse, compiler-errors, sipdroid

我正在尝试在 Eclipse Juno 中构建 sipdroid。我进入属性并将项目设置为平台 2.2/API 8，进入 Java 构建路径并勾选 Android 2.2 框。但我仍然收到其中的 9 个构建错误。有人遇到过这个问题吗？

InCallScreen 类型的 onAccuracyChanged(Sensor, int) 方法必须覆盖超类方法

InCallScreen 类型的 onSensorChanged(SensorEvent) 方法必须覆盖超类方法

VideoCamera 类型的 onLongClick(View) 方法必须覆盖超类方法

VideoCamera 类型的 onError(MediaPlayer, int, int) 方法必须覆盖超类方法

VideoCamera 类型的 onClick(View) 方法必须覆盖超类方法

Settings 类型的方法 onClick(DialogInterface, int) 必须覆盖超类方法

Sipdroid 类型的 onDismiss(DialogInterface) 方法必须覆盖超类方法

PlainDatagramSocketImpl 类型的方法 getOption(int) 必须覆盖超类方法

PlainDatagramSocketImpl 类型的方法 setOption(int, Object) 必须覆盖超类方法

![](../Images/146cf56c1136d7d08e423caaeb8ffa26.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:52:48.897

您可能正在使用 java 5 进行编译，它不允许使用

```
 @Override 
```

关于接口实现。

# c# - 解密用 c# AES/CBC/PKCS&Padding - 256bit 加密的 Java 文件

> ID：12101091
> 
> 赞同：0
> 
> 时间：2012-08-23T22:51:43.720
> 
> 标签：c#, java, encryption, key

> **可能重复：**
> [Java 中的 AES 加密和 C# 中的解密](https://stackoverflow.com/questions/5295110/aes-encryption-in-java-and-decryption-in-c-sharp)

我有一个用 C# 加密的文件 alg 有我的 IV 和密钥，IV 是 16 字节，密钥是 32。加密属性是 AES/CBC/PKCS7Padding。完成加密后，我存储了密钥，因为这是一个 256 字节的加密，bytes[] 包含范围从 0 到 255 的数字。我已经证明，如果我使用小于 128 的所有数字加密文件，我的 Java 代码将正确解密文件. 但是，当我尝试解密 byte[] 包含大于 127 的内容的任何文件时，它无法解密，因为密钥不正确。当我查看 Java 中的字节时，它们会自动转换为有符号的，这意味着 241 被转换为 -14。我在想这些位应该是相同的，它应该可以工作，但事实并非如此。在 Java 代码中，我将字节放在一个字符串中，以验证它们正是 C# 中用于加密的内容，并且可以在 C# 上进行解密。但是当它们被放入传递的 byte[] 中时，它们会被翻译。

请帮忙

bool Encrypt(string fileIn,string fileOut, Guid archiveKey, SymmetricAlgorithm alg) { // 首先我们要打开文件流 var fsIn = new FileStream(fileIn, FileMode.Open, FileAccess.Read, FileShare.None); var fsOut = new FileStream(fileOut, FileMode.OpenOrCreate, FileAccess.Write, FileShare.None);

```
 // Now create a crypto stream through which we are going
        // to be pumping data. 
        // Our fileOut is going to be receiving the encrypted bytes. 
        var x = alg.CreateEncryptor();
        var cs = new CryptoStream(fsOut,
            x, CryptoStreamMode.Write);

        // Now will will initialize a buffer and will be processing
        // the input file in chunks. 
        // This is done to avoid reading the whole file (which can
        // be huge) into memory. 
        bufferLen = Shared.GetFileAttributes.ProcessingBufferSize;
        buffer = new byte[bufferLen];

        do
        {
            // read a chunk of data from the input file 
            bytesRead = fsIn.Read(buffer, 0, bufferLen);

            // encrypt it 
            cs.Write(buffer, 0, bytesRead);
            var inc = bytesRead == Shared.GetFileAttributes.ProcessingBufferSize ? 1 : bytesRead / Shared.GetFileAttributes.ProcessingBufferSize;
        } while (bytesRead != 0);

        // close everything 

        // this will also close the unrelying fsOut stream
        cs.Close();
        fsIn.Close();
        return true;
    } 
```

Java 代码 public void DecryptTheFile(String fileName, String fileOut, String keys) 抛出异常

```
 {
  setupKeys(IV, KEY,keys);

  // setup the cipher with the keys
  Cipher cipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
  SecretKeySpec key = new SecretKeySpec(KEY, "AES/CBC/PKCS7Padding");
  IvParameterSpec ips = new IvParameterSpec(IV);
  cipher.init(Cipher.DECRYPT_MODE, key,ips);

  // decrypt a file
  byte[] buffer = new byte[1024];
  InputStream iFile = new FileInputStream(fileName);
  OutputStream oFile = new FileOutputStream(fileOut);

  iFile = new CipherInputStream(iFile, cipher);

  int r = 0;
  while ((r = iFile.read(buffer, 0, 1024)) > 0) {
   oFile.write(buffer, 0, r);
  }
  oFile.close();
  iFile.close();
 }
 private void setupKeys(byte[] IV,byte[] KEY,String keys)
 {
     String[] keyparts = keys.split(",");
     for (int i = 0; i < 16; i++)
     {
         Long l = Long.parseLong(keyparts[i]);
         IV[i] = (byte) (l.byteValue() );
         if (siv == null) siv = l.toString();
         else    siv = siv + l.toString();
     }
     for (int i = 16; i < 47; i++)
     {
         Long l = Long.parseLong(keyparts[i]);
         KEY[i - 16] = (byte) (l.byteValue() & 0xff);
         if (skey == null ) skey = l.toString();
         else            skey = skey + l.toString();
     }

 } 
```

# sql-server-2005 - SQL Server 表连接问题

> ID：12101092
> 
> 赞同：0
> 
> 时间：2012-08-23T22:51:44.110
> 
> 标签：sql-server-2005

我正在尝试加入三个表，并且我正在获取跨行数据（获取 6 行而不是 3 行）。我尝试了内，左和右加入相同的结果。请你帮助我好吗。

**表格1**

```
SELECT PATIENT,TDACTDATE,TDACTTIME,TDVALUE 
FROM NurDocumentedResults A 
WHERE (INTBASE = '400130') 
    AND (TDQUERY = 'NURPTVALUE') 
    AND (TDACTDATE = '20120425') 
AND TDVALUE >='8.0' AND A.PATIENT='F126' 
```

结果我得到

```
F126    20120425    1715    8.8
F126    20120425    1840    8.4
F126    20120425    2300    9.7 
```

**表 2**

```
SELECT B.PATIENT,A.TESTRESULTDATE,A.TESTRESULTTIME,A.RESULT 
FROM LabLSpecResultTests A
INNER JOIN LabLSpecimenFile B 
    ON A.URN=B.URN 
    AND A.TESTRESULTDATE=B.COLLECTIONDATE 
WHERE A.TESTRESULTDATE='20120425' 
    AND (A.TEST IN ('100.0100', '100.0120', '100.0130', '100.0110')) 
    AND (A.RESULT > '8.0') 
    AND B.PATIENT='F126' 
```

结果我得到

```
F126    20120425    1756    8.5
F126    20120425    2335    9.2 
```

**当我加入所有三个表时，**

```
SELECT D.PATIENT,TDACTDATE,TDACTTIME,TDVALUE,A.RESULT,A.RESULTTIME,A.TESTRESULTDATE,A.TESTRESULTTIME
FROM NurDocumentedResults D 
LEFT OUTER JOIN LabLSpecimenFile B 
    ON D.PATIENT=B.PATIENT AND D.TDACTDATE=B.COLLECTIONDATE
INNER JOIN LabLSpecResultTests A 
    ON A.URN=B.URN 
    AND A.TESTRESULTDATE=B.COLLECTIONDATE
WHERE (INTBASE = '400130') 
    AND (TDQUERY = 'NURPTVALUE') 
    AND (TDACTDATE = '20120425') 
    AND TDVALUE >='8.0' 
    AND A.TESTRESULTDATE='20120425' 
    AND  (A.TEST IN ('100.0100', '100.0120', '100.0130', '100.0110')) 
    AND (A.RESULT > '8.0') 
    AND D.PATIENT='F126' 
```

**我得到以下结果**

```
F126    20120425    1715    8.8 8.5 2463    20120425    1756
F126    20120425    1840    8.4 8.5 2463    20120425    1756
F126    20120425    2300    9.7 8.5 2463    20120425    1756
F126    20120425    1715    8.8 9.2 22789   20120425    2335
F126    20120425    1840    8.4 9.2 22789   20120425    2335
F126    20120425    2300    9.7 9.2 22789   20120425    2335 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:01:22.977

建议：您可以从第一个表连接到连接其他两个表的 Select 语句。很抱歉没有写实际的查询我在这台机器上没有 sql 来写查询，因为我在 linux 上

尝试类似 Select TableA.* from TableA LEFT JOIN (SELECT Fields From TableB LEFT JOIN TABLEC ON TableB ... = TableC ) AS JOIN_TABLE ON TableA.Field = JOIN_TABLE.Field

尝试这样的事情，它可能会如你所愿。

# javascript - 如何使用 JavaScript 模拟 x86 无符号 32 位整数乘法？

> ID：12101093
> 
> 赞同：4
> 
> 时间：2012-08-23T22:51:47.777
> 
> 标签：javascript, x86, unsigned, emulation, emscripten

使用 Emscripten 编译此代码：

```
#include <stdio.h>
int main() {
unsigned long d1 = 0x847c9b5d;
unsigned long q =  0x549530e1;
printf("%lu\n", d1*q);
return 0;
} 
```

产量（使用`-g`）：

```
 $d1=-2072208547; //@line 3 "minusmul.c"
  $q=1419063521; //@line 4 "minusmul.c"
  var $2=$d1; //@line 5 "minusmul.c"
  var $3=$q; //@line 5 "minusmul.c"
  var $4=((($2)*($3))|0); //@line 5 "minusmul.c" 
```

`js`使用(SpiderMonkey 我相信？) 或执行此操作`node`，我得到结果`3217488896`。执行本机可执行文件（使用 GCC 编译），我得到`3217489085`. 如何使用 JavaScript 模拟 x86 无符号 32 位整数乘法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:40:02.917

Javascript 使用[IEEE-754](http://grouper.ieee.org/groups/754/)标准（[另请参阅](http://en.wikipedia.org/wiki/IEEE_floating_point)）作为其内部数字表示。这是浮点运算，因此您将不得不提出自己的库函数来模拟大整数的按位运算。存在多个库，例如[BigInt](http://leemon.com/crypto/BigInt.html)和[BigNumber](http://jsfromhell.com/classes/bignumber)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:20:32.000

Emscripten 要么不支持精确的 32 位乘法，要么就是一个错误。由于他们在主页上提到他们有 64 位数学的软件仿真，我认为这是一个错误。我发现你可以使用 CHECK_OVERFLOWS 并且它会发现溢出。它似乎并没有“修复”它。要使程序以 CHECK_OVERFLOWS 结束，您需要增加计数，在生成的源代码中标记为“XXX”。

# jquery - 使用 jquery 隐藏和显示多个 div

> ID：12101095
> 
> 赞同：0
> 
> 时间：2012-08-23T22:51:56.933
> 
> 标签：jquery, html, twitter-bootstrap, hover

这是我的代码，我不知道为什么它不起作用。我正在尝试显示和隐藏多个 div。我使用了几种方法来尝试隐藏和显示，我尝试切换结果令人讨厌。基本上底部的div需要显示一个英雄部分

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Robert Eilers - Interview Test</title>

        <!-- BEGIN: css -->
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css" /> 
        <link href="assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div class="container">
    <div class="row">
        <div class="span12 product" id="showdiv1">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

        <div class="span12 product" id="showdiv2">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

        <div class="span12 product" id="showdiv3">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

        <div class="span12 product" id="showdiv4">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

        <div class="span12 product" id="showdiv5">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

        <div class="span12 product" id="showdiv6">
            <div class="span3">
                <p><img src="assets/images/01_md.jpg" /><p>
            </div>
            <div class="span3">
                <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
                <ul>
                    <li>ENERGY STAR&#174; qualified</li>
                    <li>NSF&#174; Certified Sanitary cycles</li>
                    <li>FanFresh? option</li>
                </ul>    
            </div>
            <div class="span3">
                <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
                <p>$1,599.00</p>
            </div>
        </div>

    </div>

    <div class="row">
        <div class="span3 product" id="div1">
            <p><img src="assets/images/01_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>
        </div>

        <div class="span3 product" id="div2">
            <p><img src="assets/images/02_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>

        </div>
        <div class="span3 product" id="div3">
            <p><img src="assets/images/03_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>

        </div>
    </div>

     <div class="row">
        <div class="span3 product" id="div4">
            <p><img src="assets/images/04_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>
        </div>

        <div class="span3 product" id="div5">
            <p><img src="assets/images/05_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>
        </div>
        <div class="span3 product showInfo" id="div6">
            <p><img src="assets/images/06_sm.jpg" /><p>
            <h6>Whirpool 4.5 Cu. Ft. Duet&#174; Steam Front Load Washer (Color: Cranberry Red) ENERGY STAR&#174;</h6>
            <p><input type="submit" value="Add to Cart" class="btn btn-danger btn-large"></p>
            <p>$1,599.00</p>

        </div>
    </div>

</div>

    <!-- BEGIN: js -->
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
    $('#div1').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv1').show();
    });
    $('#div2').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv2').show();
    });

    $('#div3').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv3').show();
    });

    $('#div4').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv4').show();
    });
     $('#div5').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv5').show();
    });
     $('#div6').hover(function() {
        $('showdiv[id^=showdiv]').hide();
        $('#showdiv6').show();
    });

})
 </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:02:12.883

```
 $('showdiv[id^=showdiv]').hide(); 
```

应该

```
 $('[id^=showdiv]').hide(); 
```

第一个尝试选择`<showdiv>`以 showdiv 开头的 id 不存在的 s，我认为您只想要 id 以 showdiv 开头的元素

# c# - Global.asax 错误处理程序或自定义 IHttpModule 错误处理程序未捕获到未处理的异常

> ID：12101097
> 
> 赞同：7
> 
> 时间：2012-08-23T22:52:26.353
> 
> 标签：c#, asp.net, error-handling, principalpermission

我有一个类 (DPCal_EventMove) 的方法，我想限制对使用角色的访问。我有一个 Global.asax.cs 错误处理程序和一个自定义 IHttpModule 错误处理程序，旨在捕获未处理的异常并将它们传送到 GlobalExceptionHandler.aspx，它检查错误是否是源自失败的 PrincipalPermission 检查的 SecurityExceptions。由于某种原因，由 PricipalPermission-decorated 方法引起的未处理异常未通过我的任何一个错误处理程序进行路由。我的问题是：这个异常被路由到哪里以及如何捕获和处理它？

```
public partial class DayView : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // Do some stuff
    }

    [PrincipalPermission(SecurityAction.Demand, Role = "Investigator")]
    [PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]
    protected void DPCal_EventMove(object sender, DayPilot.Web.Ui.Events.EventMoveEventArgs e)
    {
        // If no overlap, then save
        int eventId = Convert.ToInt32(e.Value);
        MembershipUser user = Membership.GetUser();
        if (!CommonFunctions.IsSchedulingConflict(eventId, e.NewStart, e.NewEnd) && 
            Page.User.HasEditPermission(user, eventId))
        {
            dbUpdateEvent(eventId, e.NewStart, e.NewEnd);
            GetEvents();
            DPCal.Update();
        }
    }
} 
```

下面是我的 Global.asax.cs 文件：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Error(object sender, EventArgs e)
    {
        Server.Transfer("~/GlobalExceptionHandler.aspx?ReturnUrl=" + Request.Path);
    }
} 
```

下面是我的自定义 IHttpModule 处理程序：

```
public class UnhandledExceptionModule : IHttpModule
{
    private HttpApplication _context;
    private bool _initialized = false;

    public void Init(HttpApplication context)
    {
        _context = context;
        _initialized = true;
        context.Error += new EventHandler(Application_Error);
    }

    public UnhandledExceptionModule()
    {
        _initialized = false;
    }

    public void Dispose()
    {
        if (_initialized)
            _context.Dispose();
    }

    public void Application_Error(object sender, EventArgs e)
    {
        if (_initialized)
            _context.Server.Transfer("~/GlobalExceptionHandler.aspx?ReturnUrl=" + _context.Request.Path);
    }
} 
```

永远无法达到 GlobalExceptionHandler.aspx 上的 Page_Load。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:14:16.010

原来问题是因为 DPCal_EventMove 方法作为页面回调执行的。幸运的是，DayPilot 日历组件具有更改此行为的选项。一旦我将 DayPilot:DayPilotCalendar 控件的 EventMoveHandling 属性更改为“PostBack”而不是“CallBack”，我就能够捕获并处理安全异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:48:30.563

你有没有尝试过：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Error(object sender, EventArgs e)
    {
        Server.Transfer("~/GlobalExceptionHandler.aspx?ReturnUrl=" + Request.Path);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:59:15.793

添加：

```
private void Page_Error(object sender, System.EventArgs e)
{
        //errorcode
} 
```

到您页面的代码，看看是否在错误期间调用它？

# javascript - Jquery错误未定义？

> ID：12101099
> 
> 赞同：-4
> 
> 时间：2012-08-23T22:52:35.997
> 
> 标签：javascript, jquery, html

我一直在做一个股票行情，现在它坏了。我做错了什么，我该如何解决？www.codtelevision.com

我已经添加了`<script src="http://code.jquery.com/jquery-latest.js"></script>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:55:54.880

应该在调用 jqueryUI 代码之前调用 jquery-latest.js。顺序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:56:40.553

好的。我在 Firebug 中看到了这个错误，它来自 jQuery UI 文件：

```
ReferenceError: jQuery is not defined
[Break On This Error]   

...=="hidden")return false;e=e&&e==="left"?"scrollLeft":"scrollTop";var a=false;if(.. 
```

更改是您在 jQuery 本身之前引用 jQuery UI 脚本。由于 jQuery UI 依赖于 jQuery，您必须以正确的顺序引用脚本，即先 jQuery，然后是 jQuery UI。

是的，您首先使用当前代码引用 jQuery UI：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js" type="text/javascript">
<link media="screen" type="text/css" href="http://www.codtelevision.com/nivo/css/nivo-slider.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-latest.js"> 
```

试试这个方法：

```
<link media="screen" type="text/css" href="http://www.codtelevision.com/nivo/css/nivo-slider.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-latest.js">
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js" type="text/javascript"> 
```

# javascript - Twitter Bootstrap 2.1 - 模态无法正常工作

> ID：12101104
> 
> 赞同：11
> 
> 时间：2012-08-23T22:53:05.220
> 
> 标签：javascript, html, css, twitter-bootstrap, twitter-bootstrap-2

我试图集成 twitter 引导模式，但由于某种原因它不起作用。

问题是模式在页面加载时显示。

我在我的`<head>`

```
 <script type="text/javascript">
    $('#myModal').modal({show: false,keyboard: false});
    </script> 
```

但是没有效果。

我使用的代码：（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）

```
<-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<-- Modal -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

它在页面加载后直接呈现，如果我再次按下模式按钮它会消失，并且第二次出现但整个页面都变暗（甚至模式本身也变暗了）

有人遇到过同样的问题吗？

我把它推到heroku，这样你就可以看到问题了。[http://elobeast.com/](http://elobeast.com/) （右上角“启动演示模式”）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T22:59:05.087

您需要将该类添加`.hide`到模态框的主容器中以隐藏它，直到它被调用。

# php - 在新选项卡中打开框架内容

> ID：12101105
> 
> 赞同：0
> 
> 时间：2012-08-23T22:53:12.410
> 
> 标签：php, javascript, jquery, css

我试图通过重新格式化我的网站以使用带有 iframe 的一个主索引页面来显示内容来减小我的文件大小。但是，我希望能够让我的观众有机会将 iframe 的内容打开到新标签中进行打印，而无需打印出现在我的索引页面上的所有广告。我尝试编写一个 java 小程序，它将识别 iframe 中当前显示的任何内容并在新选项卡中打开文件，但没有成功。CSS、jquery、javascripts 和 php 在这种情况下同样没有帮助。我不想为所有内容创建两个单独的链接，一个针对 iframe，另一个针对新标签。我想要一个链接，单击它会将框架中显示的任何文件打开到新选项卡中。我希望太多还是可以创建这样的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:58:43.230

我认为您需要`target="_blank"`链接中的属性，如果没有，我不太清楚您的意思

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:19:30.507

Use the `target="_parent"` attribute on a link within the iFrame.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:27:03.303

CSS似乎是要走的路。

您可以为 iframe 之外的所有内容分配一个“NotForPrint”类。然后，您将使用 media 属性并在您的页面上有两个不同的样式表，一个用于媒体屏幕，另一个用于媒体打印。媒体打印样式表将隐藏除 iframe 之外的所有内容。或者你可以有一个“打印预览”按钮，并且 onclick 有一个 JavaScript 函数来切换 NotForPrint 类的显示。

反之亦然，将“ForPrint”类分配给 iframe。

在这种情况下，您不使用新选项卡，一切都发生在同一个窗口中。

# regex - r 中最后一位或两位数字的正则表达式

> ID：12101106
> 
> 赞同：1
> 
> 时间：2012-08-23T22:53:26.530
> 
> 标签：regex, r

是否可以在以下向量上使用正则表达式：

```
u<-c("first1","sec2","thir33","fourth4","fifth25","sixth16",
     "seven7","eight8","nine9","ten10","eleven11") 
```

获得：

```
[1] "first.1" "sec.2" "thir3.3" "fourth.4" "fifth2.5" "sixth1.6" "seven.7" "eight.8"
[9] "nine.9" "ten.10" "eleven.11" 
```

这与我得到的一样接近：

```
gsub("([A-Za-z]*)([1]{0,1})([0-9]$)","\\1\\.\\2\\3",u)
#[1] "first.1"   "sec.2"     "thir3.3"   "fourth.4"  "fifth2.5"  "sixth.16"  "seven.7"   "eight.8"   "nine.9"    "ten.10"   
#[11] "eleven.11" 
```

注意第六个元素不正确：“sixth.16”应该是“sixth1.6”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:50:10.337

我没有看到一个内部正则表达式方法可以“知道”或访问向量中的位置，但肯定可以将它传入并在模式中使用其“as.character”强制值。

```
sapply(seq_along(u), function(x) sub(
                                     paste("(^.+)(", as.character(x), "$)", sep=""),
                                     "\\1.\\2", u[x]) )
 [1] "first.1"   "sec.2"     "thir3.3"   "fourth.4"  "fifth2.5"  "sixth1.6"  "seven.7"   "eight.8"   "nine.9"   
[10] "ten.10"    "eleven.11" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:29:02.227

使用 DWin 的答案作为起点，您可以通过知道元素 1:9、10:99、100:999 等都应该在相同的情况下处理来获得一些速度（假设您的真正问题处理更长的向量）各自的方式。

所以，得到一些更大的数据

```
u<-c("first1","sec2","thir33","fourth4","fifth25","sixth16",
     "seven7","eight8","nine9","ten10","eleven11")
u[12:101981]<-NA

set.seed(1)
for(i in 12:101981)u[i]<-paste0(paste(sample(c(LETTERS,1:9),5),collapse=""),i)

lengthu<-length(u)
maxLength<-nchar(lengthu)
theStart<-10^(seq_len(maxLength)-1)
theEnd<-c(theStart[-1]-1,lengthu) 
```

然后`sapply`不要在 中的每个元素上使用`u`，而是在一个长度序列上使用`maxLength`

```
tempans<-sapply(seq_len(maxLength),function(x){
  sub(paste0("(^.*)(\\d{",x,"})"),"\\1.\\2",u[theStart[x]:theEnd[x]])
})
tail(unlist(tempans))
# [1] "DWY96.101976" "UWFCO.101977" "UR5L8.101978" "XBQ9V.101979" "48MTI.101980"
# [6] "75LIS.101981"

head(unlist(tempans))
# [1] "first.1"  "sec.2"    "thir3.3"  "fourth.4" "fifth2.5" "sixth1.6" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:43:32.327

这不是特别漂亮，但您可以一步完成：

```
gsub("([A-Za-z]+)(10|11)?(?:(\\d)(\\d))?([0-9]{0,1}?)$","\\1\\3\\.\\2\\4\\5",u) 
```

或者，您可以将其分解为几个步骤。先取个位数，再分别处理2位数的情况。

```
v <- gsub("([A-Za-z]+)(\\d)$","\\1.\\2",u)
v <- gsub("([A-Za-z]+)(10|11)$","\\1.\\2",v)
v <- gsub("([A-Za-z]+\\d)(\\d)$","\\1.\\2",v) 
```

# ruby-on-rails-3 - 如何使一个非常大的常量表可用于测试？

> ID：12101107
> 
> 赞同：2
> 
> 时间：2012-08-23T22:53:31.227
> 
> 标签：ruby-on-rails-3, rspec

我的应用程序实际上是一个常量数据库表。它很大——它包含约 125K 行，每行 14 个字段——重建它大约需要五分钟。

对于开发和生产工作，我将重建作为数据库播种的一部分。但是对于测试，我不想每次运行测试都等待五分钟。

在这种情况下，您会建议什么技术或工作流程？（如果可能的话，一种方法可能是在测试期间将 development_constant_table 别名为 test_constant_table。）

## 更新

我应该提到 db/seeds.rb 文件看起来像这样：

```
# file: db/seeds.rb
require "#{Rails.root}/db/time_dimension_loader"
TimeDimensionLoader.perform_lengthy_table_creation 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:26:14.357

好的，托尼霍普金森指向 stackoverflow.com/questions/1574797/ 的指针指明了方向。

首先，创建一个 rake 文件：

```
# lib/tasks/test_seed.rake
namespace :db do 
  namespace :test do
    task :prepare => :environment do
      Rake::Task["db:seed"].invoke
    end
  end
end 
```

然后，当您调用标准时`rake db:test:prepare`，您的新 rake 任务将在标准`db:test:prepare`运行后执行。所以是的，运行 rake 任务需要一段时间，但此后该表存在（并持续存在），因此您不必在每次运行 RSpec 或自动测试时重建表。

# ios - UIResponder 和多个 UIControlEvents

> ID：12101108
> 
> 赞同：3
> 
> 时间：2012-08-23T22:53:32.240
> 
> 标签：ios, uiresponder, uicontrolevents

有没有办法为多个 UIControlEvents 调用选择器？

这不起作用，但它会让你知道我正在尝试做什么。

```
[self.slider addTarget:self action:@selector(sliderDidStopDragging:) forControlEvents:UIControlEventTouchUpInside, UIControlEventTouchUpOutside]; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T14:24:09.407

只有`OR`他们：

```
[self.button addTarget:self action:@selector(selector0:) forControlEvents:(UIControlEventTouchUpInside|UIControlEventTouchUpOutside)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-02T11:28:02.260

它们现在是一个选项集，因此您可以用于： [.touchUpInside, .touchUpOutide]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:20:53.990

试试这种方式：

```
// same selector for different events
[self.button addTarget:self action:@selector(selector0:) forControlEvents:UIControlEventTouchUpInside];
[self.button addTarget:self action:@selector(selector0:) forControlEvents:UIControlEventTouchUpOutside];
// etc... 
```

或者你可以使用这个：

```
// different selectors for same event
[self.button addTarget:self action:@selector(selector1:) forControlEvents:UIControlEventTouchUpInside];
[self.button addTarget:self action:@selector(selector2:) forControlEvents:UIControlEventTouchUpInside];
// etc... 
```

# java - Android - WebView（保存 Bundle 以避免在屏幕旋转时丢失数据）

> ID：12101109
> 
> 赞同：0
> 
> 时间：2012-08-23T22:53:45.373
> 
> 标签：java, android, rotation, android-mapview, bundle

所以我明白，当我旋转屏幕时，内容将被设置回原来的样子，因为活动是为新布局创建和销毁的。

这对我来说是一个问题，因为我在 WebView 中显示的 Web 应用程序向用户显示了独特的信息，当他们将手机侧向转动时，数据会丢失。现在，我知道我必须重写的两种方法，但我不完全确定我可以在 onSaveInstanceState 中放入什么来使用完全相同的数据恢复确切的页面。我会尝试存储 URL 并使用它，但页面使用随机功能，因此会有所不同。

到目前为止，我所拥有的是：

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
} 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:18:20.677

如果您只是通过将清单中的条目修改为类似于以下内容来使您的 Activity 在配置更改期间不重新启动，则可能会更简单：

```
 <activity android:name=".MyActivity"
        android:configChanges="orientation|keyboardHidden" /> 
```

从[WebView 的参考页面](http://developer.android.com/reference/android/webkit/WebView.html)：

> 当设备方向或任何其他配置发生变化时，Activity 的标准行为将被销毁并重新创建。这将导致 WebView 重新加载当前页面。如果你不想这样，你可以设置你的活动来处理方向和键盘隐藏的变化，然后只留下 WebView。它会根据需要自动重新定向。

**更新**：

根据[这个答案](https://stackoverflow.com/a/6968189/1023092)，我们应该使用

```
 <activity android:name=".MyActivity"
        android:configChanges="orientation|screenSize" /> 
```

代替带有 Honeycomb 及以上版本的设备。请试一试 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:35:02.217

和我一起试试这个工作

```
 if (savedInstanceState == null)
{
  web.loadUrl(webURL);
} 
```

加法

```
@Override
protected void onSaveInstanceState(Bundle outState )
{
super.onSaveInstanceState(outState);
web.saveState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
super.onSaveInstanceState(savedInstanceState);
web.restoreState(savedInstanceState);
} 
```

链接：[Android - 防止 WebView 在旋转时重新加载](https://stackoverflow.com/questions/12131025/android-preventing-webview-reload-on-rotate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:02:57.827

据我了解，您的问题在于 Web 应用程序，而不是 Android 客户端实现。如果存储 URL 还不够，您将不得不寻找另一种方法将这些“随机数据”发送到您的主机应用程序，可能是通过 cookie 或 javascript 变量。

# python - 将基于numpy的数组保存在excel文件的不同行中

> ID：12101110
> 
> 赞同：4
> 
> 时间：2012-08-23T22:53:47.730
> 
> 标签：python, excel, numpy

我有一个`numpy.array`在每个循环中生成的代码。我想将数组保存为excel文件中的一行*（即第一个循环中创建的数组成为第一行，第二个循环中生成的数组成为第二行，依此类推）*。数组是通过以下方式创建的：

for循环`range(0,10)`：

```
Array1 = ..... 

Array2 = ......

Array3 = numpy.concatenate((Array1,Array2),axis=0) 
```

知道如何将 Array3 放入 Excel 文件的 10 行不同的行中吗？*（如果数组是 5 维的，则 excel 文件应该包含 10 行和 5 列）*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T19:02:35.130

假设这`data`是您的阵列*列表*，并且您确保所有阵列具有相同的大小，您可以按照@Qnan 的建议将您的阵列`np.savetxt`保存到 TSV/CSV 文件中`data`

```
np.savetxt(your_output_file, np.array(data), delimiter="\t") 
```

如果需要，请查看`np.savetxt`文档以获取有关如何格式化字段的更多信息。

这个想法是一次写入文件，而不是逐行写入。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T22:55:37.263

导出到 TSV 或 CSV（制表符/逗号分隔值）文件，Excel 可以打开这些文件。

基本上，如果您将值逐行打印到一个简单的文本文件中，并用制表符 ( ) 分隔同一行中的值`'\t'`，Excel 将能够读取该文件。您可能必须将其称为`.xls`文件。

# python - 防止 pandas 自动推断 read_csv 中的类型

> ID：12101113
> 
> 赞同：15
> 
> 时间：2012-08-23T22:54:04.330
> 
> 标签：python, pandas

我有一个 # 分隔的文件，其中包含三列：第一列是整数，第二列看起来像浮点数，但不是，第三列是字符串。我尝试将其直接加载到 python 中`pandas.read_csv`

```
In [149]: d = pandas.read_csv('resources/names/fos_names.csv',  sep='#', header=None, names=['int_field', 'floatlike_field', 'str_field'])

In [150]: d
Out[150]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1673 entries, 0 to 1672
Data columns:
int_field          1673  non-null values
floatlike_field    1673  non-null values
str_field          1673  non-null values
dtypes: float64(1), int64(1), object(1) 
```

`pandas`尝试变得聪明并自动将字段转换为有用的类型。问题是我实际上并不希望它这样做（如果我这样做了，我会使用这个`converters`论点）。如何防止`pandas`自动转换类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T20:12:00.853

我计划在 Pandas 0.10 中即将进行的文件解析器引擎大修中添加显式列 dtype。我不能 100% 投入，但随着新基础设施的整合，它应该非常简单 (http://wesmckinney.com/blog/?p=543)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T22:15:41.020

我认为您最好的选择是首先使用 numpy 将数据作为记录数组读取。

```
# what you described:
In [15]: import numpy as np
In [16]: import pandas
In [17]: x = pandas.read_csv('weird.csv')

In [19]: x.dtypes
Out[19]: 
int_field            int64
floatlike_field    float64  # what you don't want?
str_field           object

In [20]: datatypes = [('int_field','i4'),('floatlike','S10'),('strfield','S10')]

In [21]: y_np = np.loadtxt('weird.csv', dtype=datatypes, delimiter=',', skiprows=1)

In [22]: y_np
Out[22]: 
array([(1, '2.31', 'one'), (2, '3.12', 'two'), (3, '1.32', 'three ')], 
      dtype=[('int_field', '<i4'), ('floatlike', '|S10'), ('strfield', '|S10')])

In [23]: y_pandas = pandas.DataFrame.from_records(y_np)

In [25]: y_pandas.dtypes
Out[25]: 
int_field     int64
floatlike    object  # better?
strfield     object 
```

# iphone - UITableView 搜索后应用崩溃

> ID：12101116
> 
> 赞同：2
> 
> 时间：2012-08-23T22:54:42.797
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

如果我这样做，我的应用程序会崩溃：

1.  我在我的 UITableView 上进行搜索

2.  搜索后，我点击 UITableView 的`searchDisplayController`UITableViewCell 并转到另一个视图控制器

3.  然后我回到主 UITableView——`questionTable`我在其中搜索的那个，然后点击最后一个单元格，或者任何大于我之前搜索结果数量的单元格。

4.  应用程序因此错误而崩溃：

    ```
    *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 12 beyond bounds [0 .. 0]'
    *** First throw call stack:(0x35aa188f 0x37e48259 0x359ea9db 0x155fd 0x3384df5b 0x153ed 0x3358793d 0x33601627 0x355bb933 0x35a75a33 0x35a75699 0x35a7426f 0x359f74a5 0x359f736d 0x37693439 0x33503cd5 0x95a3 0x9548) terminate called throwing an exception(lldb) 
    ```

我怀疑问题出在我的代码上，因为搜索 UITableView 对我来说是一个新话题。我就是这样做的：

1.我的VC符合这些协议`<UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate, UISearchBarDelegate>`

2.我有这些变量：

```
@property (nonatomic, retain) NSMutableArray *searchResults;
@property (nonatomic, copy) NSString *savedSearchTerm; 
```

3\. 在`viewDidLoad`我设置我搜索的 UITableView 的来源：

```
 self.questionList = [[NSArray alloc]
                     initWithObjects: MY OBJECTS HERE, nil];

if ([self savedSearchTerm])
{
    [[[self searchDisplayController] searchBar] setText:[self savedSearchTerm]];
} 
```

4.我有这个动作来处理搜索：

```
- (void)handleSearchForTerm:(NSString *)searchTerm
{
[self setSavedSearchTerm:searchTerm];

if ([self searchResults] == nil)
{
    NSMutableArray *array = [[NSMutableArray alloc] init];
    [self setSearchResults:array];
}
[[self searchResults] removeAllObjects];

if ([[self savedSearchTerm] length] != 0)
{
    for (NSString *currentString in [self questionList])
    {
        if ([currentString rangeOfString:searchTerm options:NSCaseInsensitiveSearch].location != NSNotFound)
        {
            [[self searchResults] addObject:currentString];
        }
    }
}   
} 
```

5) 以下是我设置 UITable 视图的方式：

```
 (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
    {
    NSInteger row = [indexPath row];
    NSString *contentForThisRow = nil;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        contentForThisRow = [[self searchResults] objectAtIndex:row];
    else
        contentForThisRow = [[self questionList] objectAtIndex:row];

    static NSString *CellIdentifier = @"questionsCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    [[cell textLabel] setText:contentForThisRow];
    return cell;
    } 
```

6）这是我的`numberOfRowsInSection`方法的样子：

```
(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
NSInteger rows;

if (tableView == [[self searchDisplayController] searchResultsTableView])
rows = [[self searchResults] count];
else
rows = [[self questionList] count];
return rows;
} 
```

7）最后，我有这两种方法：

```
(BOOL)searchDisplayController:(UISearchDisplayController *)controller 
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self handleSearchForTerm:searchString];
    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

(void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    [self setSavedSearchTerm:nil];
    [[self questionTable] reloadData];
} 
```

对于这个冗长的问题，我真的很抱歉。我在代码中犯了一些错误，我希望有人能告诉我正确的方法。搜索栏控制器已在 IB 中正确链接任何帮助将不胜感激！

**新编辑：** 我正在推动一个新的 VC `didSelectRowAtIndePath`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"toAnswer" sender:indexPath];
} 
```

我正在那里更新一个 NSString 。当我只使用一个 TableView 时它工作得很好

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    ((QandADetailsViewController *)segue.destinationViewController).delegate=self;

    NSIndexPath *indexPath = (NSIndexPath *)sender;

    QandADetailsViewController *mdvc = segue.destinationViewController;

    if (self.searchResults == nil) {
        mdvc.questionName = [self.questionList
                             objectAtIndex:indexPath.row];
    } else {
        mdvc.questionName = [self.searchResults
                             objectAtIndex:indexPath.row];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:08:36.587

在为 segue 做准备时，对 searchResults == nil 的检查可能不正确。没有理由期望在第一次搜索后它会为零。这意味着您将始终在后续表选择中取消引用搜索数组，从而解释索引超出范围。

我认为，解决方法是询问`if ([self.searchDisplayController isActive])`搜索结果是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:00:38.920

看来您的数组是空的。

我建议您在执行每个步骤后记录您的阵列，这样您就可以看到它在哪里变空。

还记录行号和方法名称，请参阅此，如何记录：

```
NSLog(@"%s\n [Line: %d]\n  array:%@\n\n", __PRETTY_FUNCTION__, __LINE__, yourArray); 
```

# grammar - 在 Microsoft 语音语法中匹配通配符/听写

> ID：12101120
> 
> 赞同：1
> 
> 时间：2012-08-23T22:55:02.437
> 
> 标签：grammar, speech, microsoft-speech-api

我正在使用 Microsoft Speech API 加载 grxml 语法：

```
Grammar grammar = new Grammar(file);
grammar.Enabled = true;

SpeechRecognitionEngine sre = GetEngine();
sre.LoadGrammarAsync(grammar); 
```

基于 MSDN，我找不到与通配符/口语文本匹配的标签，例如：

```
<item>My message is {dictation}</item> 
```

似乎可以使用带有 DictationGrammar 和 appendDictation() 的代码。WSMacro XML 也可以使用 * 但我不知道如何在 XML 中做到这一点？

跳过文本，但我需要识别它。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:24:15.577

对于我的项目[SARAH](http://encausse.wordpress.com/s-a-r-a-h)

*   我加载所有 XML 语法
*   然后我创建一个听写语法
*   某些用户的操作启用/禁用听写模式

我知道应该有更好的方法，因为[WSMacro](http://www.microsoft.com/en-us/download/details.aspx?id=13045)使用 '*' 但我不知道该怎么做。

可能是[一个线索](http://msdn.microsoft.com/en-us/library/system.speech.recognition.grammarbuilder.appendwildcard.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:16:13.713

如果您使用的是 Kinect 语音引擎，则根本无法使用听写；引擎根本不支持它。

有关更多详细信息，您可以查看我对[这个问题](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re/2982910#2982910)的回答。

# jquery - 选择的导轨宝石不起作用

> ID：12101121
> 
> 赞同：5
> 
> 时间：2012-08-23T22:55:14.193
> 
> 标签：jquery, css, ruby-on-rails, jquery-chosen

我已经阅读了许多其他相关问题，但无法让这个 gem 工作：

[https://github.com/tsechingho/chosen-rails](https://github.com/tsechingho/chosen-rails)

正如自述文件所说，我有

```
-included *= require chosen in my application.css

-included //= require chosen-jquery in my application.js 
```

此外，我尝试将以下内容添加到`application.js`文件底部：

```
jQuery(function($){
    $('.chzn-select').chosen();
}); 
```

我还替换`.chzn-select`为`#user_education_ids`并`#user_school_ids`基于我的模型和视图：

```
<% @schools = Education.all.map { |e| [ e.school, e.school ] } %>
              <%= select_tag "school_ids", options_for_select((@schools), params[:education_id]), { :include_blank => true, :multiple => true } %> 
```

我试过添加`, :class=>'chzn-select'`到末尾`:multiple => true`，没有运气

（一个用户有很多教育，也有很多学校通过教育）

不知道为什么这给我带来了这么多麻烦，但确实如此。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:47:08.183

我知道这有点晚了，但我在让它工作时也遇到了问题。

我通过将行“gem 'chosen-rails'”移到 Gemfile 中的 :assets 块之外来使其工作（我注意到您对相关 Railscast 的评论，Ryan 将它放在 :assets 块中，所以我假设你也这样做了）。

我不确定这是否是“正确”的解决方案，或者可能会产生什么副作用，但它现在似乎正在起作用。

# c++ - 数组声明中的常量表达式

> ID：12101124
> 
> 赞同：4
> 
> 时间：2012-08-23T22:55:32.010
> 
> 标签：c++, arrays, constexpr

[C++ Primer](https://rads.stackoverflow.com/amzn/click/com/0321714113)说

> 数组维度必须在编译时已知，这意味着维度必须是常量表达式

一个单独的观点是

```
unsigned count = 42;           // not a constant expression
constexpr unsigned size = 42;  // a constant expression 
```

我会，然后期望以下声明失败

```
a[count];                      // Is an error according to Primer 
```

然而，事实并非如此。编译并运行良好。

同样奇怪的是，`++count;`数组声明之后也没有引起任何问题。

`-std=c++11`使用标志编译的程序`g++4.71`

这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T23:11:12.660

您的代码实际上*不是*合法的 C++。一些编译器允许可变长度数组作为扩展，但它不是标准的 C++。要让 GCC 抱怨这一点，请通过`-pedantic`. 通常，您应该始终将至少这些警告标志传递给 GCC：

```
-W -Wall -Wextra -pedantic 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T22:58:57.927

根据此链接：[http](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html) : //gcc.gnu.org/onlinedocs/gcc/Variable-Length.html，GCC 在 C90 模式和 C++ 中支持可变长度 C 数组。由于它不是标准的 C++，因此您应该将其视为编译器扩展，因此假定它不可移植。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:47:48.263

其他答案已经提供了解决方案，g++ 允许可变长度数组 (VLA) 作为 C++ 中的扩展（从技术上讲，VLA 是 C90 的 C 功能）。为确保您使用的是符合标准的 C++，请传递`-pedantic`以获取警告并将`-pedantic -Werror`警告变为硬错误。

在调试模式下编译时，我推荐以下内容：

> g++ -std=c++11 -O0 -g3 -pedantic -pedantic-errors -Wall -Wextra -Werror -Wconversion

`O0`是一个[优化标志](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)，`-g3`用于[调试](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)。当您想要使用优化并且不需要调试时，需要更改这些。但是，`-Werror -Wconversion`有时可能需要删除，因为您可能由于某些原因（例如使用第三方库时）无法更改代码。有关每个功能的描述，请参阅[此处](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)。

# regex - 正则表达式只允许数字、连字符、空格、括号，并且应该以数字结尾（javascript）

> ID：12101125
> 
> 赞同：4
> 
> 时间：2012-08-23T22:55:32.037
> 
> 标签：regex, phone-number

> **可能重复：**
> [美国电话号码验证](https://stackoverflow.com/questions/175488/us-phone-number-verification)

我需要验证美国电话号码。它可以是以下格式：

```
xxx-xxx-xxxx
(xxx) xxx xxxx
(xxx)-xxx-xxxx
xxxxxxxxxx 
```

但不应该

```
xxx-xxx-xxxx-
-xxx-xxx-xxxx 
```

它应该接受数字、连字符、空格和括号。

目前我使用

```
^\[0-9 \-\. ]+$ 
```

它不会在开头或结尾验证破折号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T22:58:56.720

```
^\(?\d{3}\)?[- ]?\d{3}[- ]?\d{4}$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T23:07:14.180

好吧，我的想法（经过一番搜索）根本不是新的！看这个：

[用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

顺便说一句，这是一个很好的建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T23:05:29.493

这一个可能是正确的（假设某些解析错误取决于您使用的正则表达式引擎。它也很丑陋:(。

```
(?:\d{3}(?:\d{7}|\-\d{3}\-\d{4}))|(?:\(\d{3}\)(?:\-\d{3}\-)|(?: \d{3} )\d{4}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T23:33:36.143

```
(^\(?[0-9]{3}\)?\-?\s?[0-9]{3}\-?\s?[0-9]{4}[^-]) 
```

我在[http://regexhero.net/tester/](http://regexhero.net/tester/)上对此进行了测试，并让它选择以下模式：

```
xxx-xxx-xxxx 
(xxx) xxx xxxx 
(xxx)-xxx-xxxx
xxxxxxxxxx 
```

它忽略了以下模式：

```
xxx-xxx-xxxx- 
-xxx-xxx-xxxx 
```

我希望这会有所帮助，或者至少能让你朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T23:13:47.553

这应该可以解决问题：

```
/^([\d]{6}|((\([\d]{3}\)|[\d]{3})( [\d]{3} |-[\d]{3}-)))[\d]{4}$/ 
```

*   它首先检查前 6 位数字是否为`xxxxxx`,
*   如果不是，它看起来是前三位数字是`(xxx)`还是只是`xxx`
    *   如果其中之一它检查接下来的三个是`xxx`或`-xxx-`
*   最后它检查是否有四个尾随数字`xxxx`

# android - 在 Android 中使用加密的 OBB 文件

> ID：12101126
> 
> 赞同：6
> 
> 时间：2012-08-23T22:55:33.107
> 
> 标签：android

我想知道人们是否成功地在 Android 中创建/安装加密的 OBB（不透明二进制 Blob）文件？[这是对这个问题](https://groups.google.com/forum/?fromgroups=#!searchin/android-developers/obbtool/android-developers/x_kTCgMfGG8/JVjLKm3v7zEJ) [1](https://groups.google.com/forum/?fromgroups=#!searchin/android-developers/obbtool/android-developers/x_kTCgMfGG8/JVjLKm3v7zEJ)的跟进：[什么是 Android 开发网站中的 OBB（不透明二进制 Blob）？](https://stackoverflow.com/questions/4524981/what-is-obbopaque-binary-blob-in-android-develop-site)，按照该帖子中的指示，我执行了以下操作（从 ICS 4.01 基线开始，在 Ubuntu 10.10-32 位和 Ubuntu 12.4-64 位上都试过）：

```
sudo modprobe cryptoloop
sudo modprobe twofish
sudo modprobe vfat
./mkobb.sh -d /tmp/obb/ -kblahblah -o /tmp/out.obb -v
obbtool a -n com.test.blah -v 1 -s 997ff9b1516a6788 /tmp/out.obb # 997ff... is the salt from the mkobb step
obbtool i /temp/out.obb # verify the obb file
adb push /temp/out.obb /sdcard/ 
```

从这里我将 out.obb 文件复制到手机上的 /sdcard/ 中。并使用以下代码安装：

```
String obbFile = Environment.getExternalStorageDirectory() + "/out.obb";
mgr = (StorageManager) getSystemService(Context.STORAGE_SERVICE);  // mgr is a member varible of my main activity
Log.i("OBB", "trying to mount : " + obbFile + " does it exist? " + new File(obbFile).exists());

if (mgr.mountObb(obbFile, "blahblah", new OnObbStateChangeListener(){

    @Override
    public void onObbStateChange(String path, int state) {
        Log.i("OBB", String.format("onObbStateChange:Path [%s] State=%d", path, state));
        if (state == OnObbStateChangeListener.ERROR_COULD_NOT_MOUNT){
            Log.i("OBB", "THIS IS THE ERROR I GET");
        }
    }})) 
{
    Log.i("OBB", "Attempting to mount");
} else {
    Log.i("OBB", "Mount failed");   // this isn't happening
} 
```

这样做的最终结果是：

```
 E/MountService( 2004): Couldn't mount OBB file: -1
 I/OBB     (21219): onObbStateChange:Path [/mnt/sdcard/out.obb] State=21
 I/OBB     (21219): THIS IS THE ERROR I GET 
```

有人看到这有什么问题吗？似乎它应该工作！

注意：我确实有 android.permission.WRITE_EXTERNAL_STORAGE 并且我从以下位置获得预期信息：

```
ObbInfo info = ObbScanner.getObbInfo("/sdcard/out.obb"); // this returns expected info, so the file is there and able to be read. 
```

[编辑：在此处](https://groups.google.com/forum/?fromgroups=#!searchin/android-developers/obbtool/android-developers/x_kTCgMfGG8/JVjLKm3v7zEJ)链接到 Android-Developer 组问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:19:51.620

您应该先格式化使用 obb 文件（out.obb）创建的虚拟设备（device-mapper 设备），然后才能挂载它。

具体来说，您应该在 VolumeManager::mountObb() 中添加一些这样的代码。

```
if (Fat::format(dmDevice, 0)) {
    SLOGE("OBB FAT format failed (%s)", strerror(errno));
    return -1;
} 
```

也许这是android的错误？

# php - 如何提交包含多个输入文本元素的数组？

> ID：12101137
> 
> 赞同：0
> 
> 时间：2012-08-23T22:56:57.200
> 
> 标签：php, arrays, input, pdo

我正在使用 jQuery 插件来动态添加输入文本字段。`name`输入元素的变为`name="cl[]"`, `name="ingredient[]"`。

现在我需要以某种方式将这些字段提交到数据库......
如果只有一个应该添加的文本字段，我想我可以`foreach`像这样做一个简单的循环：

```
foreach($ingredient as $val){
    //  do an ordinary PDO sql insert statement on each of them
} 
```

但我需要在每个字段上提交两个文本字段，以及上一个查询中最后插入的 ID。如果我添加两个字段，我将总共提交三个字段；像这样：

```
<input type="text" name="oz[]" id="cl_1" placeholder="cl" class="cl" >
<input type="text" name="ingredient[]" id="ingredient_1" placeholder="ingredient name" class="ingredient" />

<input type="text" name="oz[]" id="cl_2" placeholder="cl" class="cl" >
<input type="text" name="ingredient[]" id="ingredient_2" placeholder="ingredient name" class="ingredient" />

<input type="text" name="oz[]" id="cl_3" placeholder="cl" class="cl" >
<input type="text" name="ingredient[]" id="ingredient_3" placeholder="ingredient name" class="ingredient" /> 
```

这些字段是插入单独表中的饮料成分，最后一个 id 是关系键。

关于我如何做到这一点的任何建议？

更新：我只是尝试添加一个带有名称的隐藏文本字段并在该字段`raw_materials[]`上执行 ẁhile`-loop。
然后在这个 while 循环中执行一个 sql insert 语句。也许我正在做某事，但这没有用：

```
while($raw_materials){
    $ins_ingredients = $con->prepare(
        'INSERT INTO recipes_ingredients (
            recipe_id, raw_material_id, amount
        ) VALUES (
            :last_id, :material, :amount
        )'
    );
    $ins_ingredients->bindValues(':last_id',$last_id);
    $ins_ingredients->bindValues(':material',$ingredient);
    $ins_ingredients->bindValues(':amount',$oz);
    $ins_ingredients->execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:06:35.393

看看这个：

```
$values = array_map(null, $_POST['oz'], $_POST['ingredient']);  // You can add other arrays after this
foreach ($values as $value)
{
    list($oz, $ingredient) = $value;
    // Insert data in DB
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:11:29.423

一组中的 cl 和成分字段具有相同的数字，因此您应该使用 for 循环而不是 foreach 循环：

```
for($x=0, $x<count($_POST['cl']); $x++) {
    // now you can use $_POST['cl'][$x] and $_POST['ingredients'][$x]
} 
```

# javascript - JS/jQuery 根据单选/选择值显示文本框

> ID：12101140
> 
> 赞同：2
> 
> 时间：2012-08-23T22:57:05.783
> 
> 标签：javascript, jquery, html, css

基本上，如果用户想要将它们发送到收件人电子邮件，我会尝试根据用户选择的数量显示 1 到 10 个文本框。

我有一个下拉选择，其中包含 1-10 个选项/值、两个单选按钮和十个支持 div 的文本框。我正在使用以前的开发人员（我所占据的位置）使用的代码片段，我只能假设它是 jQuery，但我有一些我所拥有的小 Javascript 知识与它混合在一起。不确定我是否可以这样做。:/ Javascript/jQuery 是我的克星。

这是我到目前为止所拥有的（实时服务器）： http: [//www.dealraiser.net/gift](http://www.dealraiser.net/gift)

使用的 Javascript/jQuery：

```
<script type="text/javascript">
// SHOW HIDDEN TEXTBOXES
function updateDisplay(select) {
    // ACCESS RADIO OBJECT
    var radioValue = getRadioCheckedValue('sending');
    // SHOW FIELD IF RADIO IS SET TO 'R'
    if (radioValue == 'r') { showField(); }
}

// BORROWED FROM GOOGLE - EASIER TO USE PRE-EXISTING
function getRadioCheckedValue(radio_name) {
   var oRadio = document.forms[0].elements[radio_name];

   for(var i = 0; i < oRadio.length; i++) {
      if(oRadio[i].checked) {
         return oRadio[i].value;
      }
   }

   return '';
}
// DISPLAY FIELD, HIDE OTHERS
function showField() {
    // HIDE ALL EXTRA OPTIONS
    for (i=1, i<10, i++) {
        $("#re"+i).hide();;
        $('#r'+i).removeClass('required');
    }

    if (radio.value == 'r') {
        // DETERMINE NUMBER OF EMAILS TO SHOW
        var giftNumber = document.getElementById('giftnumber').value;

        // DISPLAY ONLY THE RIGHT AMOUNT OF EMAIL INPUTS
        for (i=1, i<=giftNumber, i++) {
            $("#re"+i).show();
            $('#r'+i).addClass('required');
        }
    }
}

// TOGGLE RADIO ON/OFF
function doToggle(radio) {
    // HIDE ALL EXTRA OPTIONS
    for (i=1, i<10,i++) {
        $("#re"+i).hide();
        $('#r'+i).removeClass('required');
    }

    if (radio.value == 'r') {
        // DETERMINE NUMBER OF EMAILS TO SHOW
        var giftNumber = document.getElementById('giftnumber').value;

        // DISPLAY ONLY THE RIGHT AMOUNT OF EMAIL INPUTS
        for (i=1, i<=giftNumber, i++) {
            $("#re"+i).show();
            $('#r'+i).addClass('required');
        }
    }
}

</script> 
```

这是HTML：

```
<h3>1\. How many subscriptions would you like to gift?   
    <select name="giftnumber" size="1" id="giftnumber" onChange="updateDisplay(this)" style="width: 48px">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
  </select></h3>
  <h3>2\. Sending options</h3>
  <p>
    <label>
      <input type="radio" name="sending" id="sending" value="b" onChange="doToggle(this)" />
      Send the pre-paid codes to my email and I will forward them.</label>
  </p>
  <p>
    <label>
      <input type="radio" name="sending" id="sending" value="r" onChange="doToggle(this)" />
      Send the pre-paid codes to the recipient email address(es).</label>
  </p>
  <div id="re1" name="re1" style="display:none;">
      <p>Recipient Email: <input name="r1" id="r1" type="text" /></p>
  </div>
  <div id="re2" name="re2" style="display:none;">
      <p>Recipient Email: <input name="r2" id="r2" type="text" /></p>
  </div>
  <div id="re3" name="re3" style="display:none;">
      <p>Recipient Email: <input name="r3" id="r3" type="text" /></p>
  </div>
  <div id="re4" name="re4" style="display:none;">
      <p>Recipient Email: <input name="r4" id="r4" type="text" /></p>
  </div>
  <div id="re5" name="re5" style="display:none;">
      <p>Recipient Email: <input name="r5" id="r5" type="text" /></p>
  </div>
  <div id="re6" name="re6" style="display:none;">
      <p>Recipient Email: <input name="r6" id="r6" type="text" /></p>
  </div>
  <div id="re7" name="re7" style="display:none;">
      <p>Recipient Email: <input name="r7" id="r7" type="text" /></p>
  </div>
  <div id="re8" name="re8" style="display:none;">
      <p>Recipient Email: <input name="r8" id="r8" type="text" /></p>
  </div>
  <div id="re9" name="re9" style="display:none;">
      <p>Recipient Email: <input name="r9" id="r9" type="text" /></p>
  </div>
  <div id="re10" name="re10" style="display:none;">
      <p>Recipient Email: <input name="r1" id="r10" type="text" /></p>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:18:08.433

There is ';' missing at line 180

before:

for (i=1, i<10, i++)

after:

for (i=1; i<10; i++)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:18:23.067

Use something like this:

```
function showtextareas(sel) {
    var value = sel.options[sel.selectedIndex].value;  
    if(value==1) { 
       //show one textarea 
    }
    else if(...) { ... }
}

<select onchange="showtextareas(this)">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
// ......
<option value="10">10</option>
</select> 
```

BTW I dunno why color formatting is weird...

# javascript - Jquery UI 可选的“多个实例”

> ID：12101144
> 
> 赞同：0
> 
> 时间：2012-08-23T22:57:43.770
> 
> 标签：javascript, jquery, jquery-ui

这可能吗？我当然希望是这样。我有多个 ui-selectable 实例，当我单击它们时，我希望其他实例也关闭。目前它切换每个 div 之一。有没有办法修改我的javascript或让它们切换两个实例的方法？

例子：

```
<script type='text/javascript'>
$(window).load(function(){
$(".ui-selectable").selectable();
});
</script>

<div class="ui-selectable">
<ul>
<li>text</li>
<li>text</li>
</ul>
</div>

<div class="ui-selectable">
<ul>
<li>text</li>
<li>text</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:13:29.357

问题是当它应该是无序列表（ul）时，您正在使 DIV 可选。这是一个演示：http: [//jsfiddle.net/H8fPL/21/](http://jsfiddle.net/H8fPL/21/)。需要帮助请叫我。

**编辑：**

我想这就是你要找的。这是演示：http: [//jsfiddle.net/H8fPL/60/](http://jsfiddle.net/H8fPL/60/)

我还提供了下面的代码......

JAVASCRIPT：

```
$( ".selectable" ).selectable({
stop: function(event, ui) {
    var el_id = $(this).children("ul").attr("id");

    $("ul.ui-selected").not("#" + el_id).each(function(index, element) { 
       $(element).toggleClass("ui-selected");
        if($(element).children("li").hasClass("ui-selected")){
           $(element).children("li").removeClass("ui-selected");
           }
    });
}
}); 
```

HTML：

```
<div id="div1" class="selectable">
<ul id="ul1">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
    <li>Item 7</li>
</ul>
</div>
<div id="div2" class="selectable">
<ul id="ul2">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
    <li>Item 7</li>
</ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:24:28.503

试试这个：

$('.ui-selectable').each(function (){ $(this).toggle(); });

# c# - 如何将 CF_DIBV5 转换为 BitmapSource？

> ID：12101146
> 
> 赞同：1
> 
> 时间：2012-08-23T22:57:55.487
> 
> 标签：c#

我正在寻找将`CF_DIBV5`格式从剪贴板转换为`BitmapSource`对象。到目前为止，这是我的代码，基于我以前用于将普通 DIB 转换为`BitmapSource`. 为了转换一个普通的 DIB，我发现我只需要获取标题，并将其添加到位图的原始字节中。

不幸的是，当我尝试使代码兼容 DIBV5 时，程序现在抛出以下异常。

> 未找到适合完成此操作的成像组件。

当我使用`BitmapFrame`'s`Create`方法时会发生这种情况。完整的代码可以在下面看到。

```
var infoHeader =
    ApiHelper.ByteArrayToStructure<BITMAPV5HEADER>(buffer);

var fileHeaderSize = Marshal.SizeOf(typeof(BITMAPV5HEADER));
var infoHeaderSize = infoHeader.bV5Size;
var fileSize = fileHeaderSize + infoHeader.bV5Size + infoHeader.bV5SizeImage;

var fileHeader = new BITMAPV5HEADER();
fileHeader.bV5CSType = BITMAPV5HEADER.LCS_sRGB;
fileHeader.bV5Size = (uint) fileSize;
fileHeader.bV5Reserved = 0;

byte[] fileHeaderBytes =
    ApiHelper.StructureToByteArray(fileHeader);

var bitmapStream = new MemoryStream();
bitmapStream.Write(fileHeaderBytes, 0, fileHeaderSize);
bitmapStream.Write(buffer, 0, buffer.Length);
bitmapStream.Seek(0, SeekOrigin.Begin);

BitmapFrame bitmap = BitmapFrame.Create(bitmapStream); 
```

关于我做错了什么，或者我做错了什么的任何想法？我在盲目地摸索，不幸的是，对于像我这样的 C# 程序员来说，文档很少。我了解一点 C++，但不足以从 C++ 转换为 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-20T22:34:59.040

将此[图像](https://en.wikipedia.org/wiki/Portable_Network_Graphics#/media/File:PNG_transparency_demonstration_1.png)复制到剪贴板。您还需要将 Image 控件添加到 MainWindow。这需要一段时间才能弄清楚，所以我可能错过了添加所需参考的解释。

```
using System;
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Interop;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace WpfApp1
{
    public partial class MainWindow : Window
    {
        [DllImport("User32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool IsClipboardFormatAvailable(uint format);

        [DllImport("User32.dll", SetLastError = true)]
        private static extern IntPtr GetClipboardData(uint uFormat);

        [DllImport("User32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool OpenClipboard(IntPtr hWndNewOwner);

        [DllImport("User32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool CloseClipboard();

        [DllImport("Kernel32.dll", SetLastError = true)]
        private static extern IntPtr GlobalLock(IntPtr hMem);

        [DllImport("Kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool GlobalUnlock(IntPtr hMem);

        const uint CF_DIBV5 = 17;

        public enum BitmapCompressionMode : uint
        {
            BI_RGB = 0,
            BI_RLE8 = 1,
            BI_RLE4 = 2,
            BI_BITFIELDS = 3,
            BI_JPEG = 4,
            BI_PNG = 5
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct BITMAPV5HEADER
        {
            public uint bV5Size;
            public int bV5Width;
            public int bV5Height;
            public UInt16 bV5Planes;
            public UInt16 bV5BitCount;
            public uint bV5Compression;
            public uint bV5SizeImage;
            public int bV5XPelsPerMeter;
            public int bV5YPelsPerMeter;
            public UInt16 bV5ClrUsed;
            public UInt16 bV5ClrImportant;
            public UInt16 bV5RedMask;
            public UInt16 bV5GreenMask;
            public UInt16 bV5BlueMask;
            public UInt16 bV5AlphaMask;
            public UInt16 bV5CSType;
            public IntPtr bV5Endpoints;
            public UInt16 bV5GammaRed;
            public UInt16 bV5GammaGreen;
            public UInt16 bV5GammaBlue;
            public UInt16 bV5Intent;
            public UInt16 bV5ProfileData;
            public UInt16 bV5ProfileSize;
            public UInt16 bV5Reserved;
        }

        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        public struct RGBQUAD
        {
            public byte rgbBlue;
            public byte rgbGreen;
            public byte rgbRed;
            public byte rgbReserved;
        }

        public MainWindow()
        {
            InitializeComponent();
            AttemptConversion();
        }

        private void AttemptConversion()
        {
            WindowInteropHelper helper = new WindowInteropHelper(this);

            bool gotIt = OpenClipboard(helper.Handle);
            if (!gotIt) return;

            bool formatAvail = IsClipboardFormatAvailable(CF_DIBV5);
            if (!formatAvail) return;

            IntPtr hBitmap = IntPtr.Zero;
            hBitmap = GetClipboardData(CF_DIBV5);
            IntPtr ptr = GlobalLock(hBitmap);

            BitmapSource bmpSrc = CF_DIBV5ToBitmapSource(hBitmap);

            img.Width = (int)bmpSrc.Width;
            img.Height = (int)bmpSrc.Height;
            img.Source = bmpSrc;

            if (ptr != IntPtr.Zero) GlobalUnlock(hBitmap);
            if (gotIt) CloseClipboard();
        }

        private BitmapSource CF_DIBV5ToBitmapSource(IntPtr hBitmap)
        {
            IntPtr scan0 = IntPtr.Zero;
            var bmi = (BITMAPV5HEADER)Marshal.PtrToStructure(hBitmap, typeof(BITMAPV5HEADER));

            int stride = (int)(bmi.bV5SizeImage / bmi.bV5Height);
            long offset = bmi.bV5Size + bmi.bV5ClrUsed * Marshal.SizeOf<RGBQUAD>();
            if (bmi.bV5Compression == (uint)BitmapCompressionMode.BI_BITFIELDS)
            {
                offset += 12; //bit masks follow the header
            }
            scan0 = new IntPtr(hBitmap.ToInt64() + offset);

            BitmapSource bmpSource = BitmapSource.Create(
                bmi.bV5Width, bmi.bV5Height,
                bmi.bV5XPelsPerMeter, bmi.bV5YPelsPerMeter,
                PixelFormats.Bgra32, null,
                scan0, (int)bmi.bV5SizeImage, stride);

            return bmpSource;
        }
    }
} 
```

# php - 警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源

> ID：12101151
> 
> 赞同：-1
> 
> 时间：2012-08-23T22:58:13.893
> 
> 标签：php, sql

谁能帮助我。我收到错误警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源...

我的代码：

```
include("../connection.php");

$con=mysql_connect($host, $username, $password, $db_name) or die ("insert error message");

mysql_select_db("db") or die ("Couldn't find database"); 

$story=mysql_query("SELECT hand_story.username, hand_story.age, hand_story.occupation,    
hand_story.star_sign, hand_story.cats_and_dogs, hand_story.holiday, hand_story.single, 
hand_story.story, big_hand_images.username, big_hand_images.url 
FROM hand_story    
INNER JOIN big_hand_images
ON hand_story.username=big_hand_images.username
WHERE big_hand_images.url='$guess'");

echo (mysql_error());

while($row = mysql_fetch_assoc($story)){

$age = $row['age'];
$occupation = $row['occupation'];
$star_sign = $row['star_sign'];
$cats_and_dogs = $row['cats_and_dogs'];
$holiday = $row['holiday'];
$single = $row['single'];
$story = $row['story'];
} 
```

我可以从数据库中回显结果，所以它可以工作，但我不知道为什么我也会收到错误消息。

任何人都可以帮忙吗？这与我的 SQL 查询有关吗？塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:02:06.787

试试这个：
WHERE big_hand_images.url='" . $guess . "'");

注意mysql注入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:06:40.270

任何时候你遇到这种类型的错误，都知道你的 sql 查询中有错误，因此 MySQL 没有返回行。

解决方案：复制 sql 语句并在 phpmyadmin 或类似的东西中运行，并确保查询在那里工作。打印出查询将显示 PHP 发送到 MySQL 的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:28:58.917

我可以看到我现在做了什么。

使用相同的变量名 -$story。将我的查询名称更改为 $story1 并消除了错误。

# javascript - 如果 ajax 结果为真，我需要该函数返回真

> ID：12101153
> 
> 赞同：0
> 
> 时间：2012-08-23T22:58:37.110
> 
> 标签：javascript, jquery, ajax

这是我的代码：

```
 function validateField(field, input) {

    if (field && input) { 

        $.ajax({
            type: 'POST',
            url: '<?php echo site_url("ajax/verify"); ?>',
            dataType: 'json',
            data: { 'field' : field, 'input' : input},
            success: function(result) {
                var available = result.available;
                if (available == 1) {

                   // return true (for the entire function);
                }

            }
        });
    } 

    return false;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T23:02:51.430

如今，最正确的做法是使用[`$.Deferred`](http://api.jquery.com/category/deferred-object/)：

```
function validateField(field, input) {
    if (field && input) { 
        return $.ajax({
            type: 'POST',
            url: '<?php echo site_url("ajax/verify"); ?>',
            dataType: 'json',
            data: { 'field' : field, 'input' : input}
        }).pipe(function(result) {
            var available = result.available;
            return available == 1;
        });
    }

    return $.Deferred().resolve(false);
}

validateField('somefield', 'someinput')
    .done(function(result) {
        if (result) {
            alert('it is true');
        } else {
            alert('it is false');
        }
    }); 
```

和基于回调的解决方案（我不喜欢它;-)：

```
function validateField(field, input, callback) {
    var cb = $.isFunction(callback) ? callback : $.noop;

    if (field && input) { 
        $.ajax({
            type: 'POST',
            url: '<?php echo site_url("ajax/verify"); ?>',
            dataType: 'json',
            data: { 'field' : field, 'input' : input},
            success: function(result) {
                var available = result.available;
                cb(available == 1);
            }
        });
        return;
    }

    cb(false);
}

validateField('somefield', 'someinput', function(result) {
    if (result) {
        alert('it is true');
    } else {
        alert('it is false');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:03:46.503

做到这一点的唯一方法是使请求同步（`async: false`）并在成功函数的外部范围内切换布尔变量的值。**从 jQuery 1.8 开始，不建议这样做，甚至不支持。**Ajax 基于回调模式，如果满足某些条件，则触发某些函数。如果有效，最好在 ajax 回调的成功函数中执行您所做的任何事情。

```
function validateField(field, input, success) {
    var valid = false;

    if (field && input) { 
        $.ajax({
            type: 'POST',
            async: false,
            url: '<?php echo site_url("ajax/verify"); ?>',
            dataType: 'json',
            data: { 'field' : field, 'input' : input},
            success: function(result) {
                var available = result.available;
                if (available == 1) {

                   // return true (for the entire function);
                    valid = true;

                    // BETTER TO CALL doSomethingIfValid(); here
                }

            }
        });
    }

    return valid;
}​ 
```

# magento - 一种查找 Magento 信用卡信息的方法？

> ID：12101165
> 
> 赞同：0
> 
> 时间：2012-08-23T22:59:35.113
> 
> 标签：magento

我的 Magento 网站上的一位客户最近使用一次性信用卡购买了一件商品。长话短说，我们退还了客户，他们已经销毁了卡，所以他们无法收到钱。

我想知道 Magento 是否有办法从购买中检索完整的信用卡号码，以便客户可以联系信用卡公司？我们使用 Authorize.net 作为我们的支付网关。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:14:37.763

您可能应该联系 Authorize.net 以查看他们是否可以手动帮助您。我相信 Authorize.net 支付方式不存储信用卡 - Saved Credit Card 支付方式可以存储它们开箱即用。

但是您应该知道，自己存储信用卡是不可取的，这通常会违反 PCI 合规性。

# c - 多个文件的结构

> ID：12101167
> 
> 赞同：1
> 
> 时间：2012-08-23T22:59:47.840
> 
> 标签：c, struct

我需要定义一个结构，比如说

```
//globalstruct.h
typedef struct _GlobalStruct {
    int a, b;
} GlobalStruct 
```

然后`GlobalStruct`在我想要的任何地方使用`globalstruct.h`

例如：

```
//test.c
#include globalstruct.h
void test(GlobalStruct *gs){...} 
```

我怎样才能做到这一点？

问候

- - 编辑 - -

我想我需要再澄清一点我的问题，因为我完全被困住了。

```
//main.c
#include "gstruct.h"
#include "a.h"
#include "b.h"

...
void something(GlobalStruct *gs){...} 
```

.

```
//gstruct.h
#ifdef gstruct_h
#define gstruct_h
typedef struct _GlobalStruct{
    int a, b;
} GlobalStruct;
#endif 
```

.

```
//a.h
#ifdef a_h
#define a_h
#include "gstruct.h"
GlobalStruct a_something(...);
#endif 
```

.

```
//a.c
#include "gstruct.h"
#include "a.h"
GlobalStruct a_something(...){...} 
```

.

```
//b.h
#ifdef b_h
#define b_h
#include "gstruct.h"
GlobalStruct b_something(...);
#endif 
```

.

```
//b.c
#include "gstruct.h"
#include "b.h"
GlobalStruct b_something(...){...} 
```

.

这个可以吗？因为如果是的话，我会错过一些非常愚蠢/小/愚蠢的东西。

顺便说一句，我正在编译`gcc main.c a.c b.c -o the_thing`

---第二次编辑----

我刚刚创建了一个在线示例，您可以查看、下载并试用。它已准备好编译，但在编译时会失败。

[https://compilr.com/alexandernst/c-headers](https://compilr.com/alexandernst/c-headers)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:03:09.653

您快到了。需要修复三个错误：

1.  在 include 指令中添加引号：

    ```
    #include "globalstruct.h" 
    ```

2.  在 typedef 声明的末尾需要一个分号。

3.  您不能使用下划线大写名称，因为这些名称是保留的。而是使用类似的东西：

    ```
    typedef struct GlobalStruct_struct { /* ... */ } GlobalStruct; 
    ```

（感谢@chris 发现第二名！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T01:35:01.830

在头文件中，#ifdef 应该是 #ifndef

# php - 如何在 SQL SELECT LIKE 语句中搜索 \r\n？

> ID：12101168
> 
> 赞同：1
> 
> 时间：2012-08-23T22:59:59.763
> 
> 标签：php, mysql, select, line-breaks

我正在为一个没有正确清理他们的一些表单数据的客户开发一个网站。特别是，他们没有做任何事情来解释从 textareas 收到的换行符。因此，在数百个 db 行中有`\r\n`and`\r\n\r\n`和`\r\n\r\n\r\n`...你明白了。我需要以某种方式只提取必须`\r\n`清理数据的行。我不能为我的生活建立一个选择这些行的查询！我意识到我必须以某种方式逃避斜线，但我没有成功。

我尝试了以下方法：

```
SELECT Id,Description FROM lakes WHERE Description LIKE '%\r\n%';
SELECT Id,Description FROM lakes WHERE Description LIKE '%\\r\\n%';
SELECT Id,Description FROM lakes WHERE Description LIKE '%\\\r\\\n%';
SELECT Id,Description FROM lakes WHERE Description LIKE '%\\\\r\\\\n%'; 
```

我当然可以继续添加斜线，但我觉得如果 4 个斜线不起作用，我可能会遗漏一些重要的东西。

这些查询中的每一个都返回结果，但没有一个结果与其中的结果相同`\r\n`。最后一个查询（带有 4 个斜杠）确实返回了 2 行确实有`\r\n`，以及 138 行没有。

另外，因为我知道有人会提到它，所以我确实知道`nl2br()`. 由于某种原因，它不能处理表中的原始数据。现在，我很高兴能够拉出这些行并清理它们。

提前致谢！

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:02:32.943

这是 SQL 真正不擅长的一个例子。

使用 PHP 编写一个简单的脚本，返回所有行（或一次 20 行）并使用 php 正则表达式来查找您所需要的行。然后对数据做任何你想做的事情并更新数据库。SQL 不够复杂，无法做你想做的事，用 PHP 做起来要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T17:53:55.147

在 Postgresql 中，您可以使用：

```
SELECT Id,Description FROM lakes WHERE Description LIKE E'%\r\n%'; 
```

请参阅[https://www.postgresql.org/docs/current/sql-syntax-lexical.html](https://www.postgresql.org/docs/current/sql-syntax-lexical.html)：

> PostgreSQL 还接受“转义”字符串常量，这是对 SQL 标准的扩展。转义字符串常量通过在开始单引号之前写入字母 E（大写或小写）来指定，例如 E'foo'。（当跨行继续转义字符串常量时，仅在第一个开始引号之前写 E。）在转义字符串中，反斜杠字符 () 开始类似 C 的反斜杠转义序列，其中反斜杠和后续字符的组合（s ) 表示一个特殊的字节值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T07:45:26.927

```
[Description] LIKE '%'+CHAR(10)+'%' 
```

# iphone - UITableViewCell textLabel 宽度不变

> ID：12101170
> 
> 赞同：2
> 
> 时间：2012-08-23T23:00:10.750
> 
> 标签：iphone, ios, uitableview

我正在尝试使 UITableViewCell 的 textlabel 中的文本从单元格的右侧包裹大约 30 个像素。然而，它从右边最多大约 5 或 10 个像素。我尝试编辑我在 cellForRowAtIndex 中设置的所有值，但是唯一改变的是单元格的高度，而不是单元格的 textLabel 有多大是的，我无法找到错误，希望这里有人能看到错误。

我一直在做进一步的测试，我发现如果我使用`sectionIndexTitlesForTableView`UItableViewCell textLabel 将减小到下面代码中概述的正确大小。但是如果我禁用此方法，那么它不会注意我试图在下面的代码中设置宽度。

这是我的代码如下。

```
//These Constants are used for dynamic cell height
#define FONT_SIZE 18.0f
#define CELL_CONTENT_WIDTH 290.0f
#define CELL_CONTENT_MARGIN 10.0f

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell using custom cell

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        [cell.textLabel setLineBreakMode:UILineBreakModeWordWrap];
        [cell.textLabel setMinimumFontSize:FONT_SIZE];
        [cell.textLabel setNumberOfLines:0];
        [cell.textLabel setFont:[UIFont boldSystemFontOfSize:FONT_SIZE]];
        [cell.textLabel setTag:1];

        [[cell contentView] addSubview:cell.textLabel];
    }

    //Customize cell here
    cell.selectionStyle = UITableViewCellSelectionStyleNone; // no blue selection

    //Replaces previously selected cells accessory view (tick)
    if ([indexPath isEqual:oldCheckedIndexPath]){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }else{
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    //Display cells with data that has been sorted from startSortingTheArray
    NSMutableArray *keys = [self.letterDictionary objectForKey:[self.sectionLetterArray objectAtIndex:indexPath.section]];

    NSString *key = [keys objectAtIndex:indexPath.row];

    CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

    CGSize size = [key sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    //Applise current key value to cell text label
    [cell.textLabel setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 25.0f))];

    [cell.textLabel setText:key];

    return cell;
}

//Cell size for word wrapping So the user can see all of the details of a submodel etc.
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    //Display cells with data that has been sorted from startSortingTheArray
    NSArray *keys = [self.letterDictionary objectForKey:[self.sectionLetterArray objectAtIndex:indexPath.section]];
    NSString *key = [keys objectAtIndex:indexPath.row];

    CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

    CGSize size = [key sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    CGFloat height = MAX(size.height, 25.0f);

    return height + (CELL_CONTENT_MARGIN * 2);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T23:59:43.680

单元格的 layoutSubviews 方法将覆盖您在 cellForRow （或大多数其他地方）中尝试执行的任何操作。最好的解决方案是继承 UITableViewCell 并覆盖 layoutSubviews。确保您调用 super，然后自定义您的文本标签框架。

编辑：

只需在您的实现和使用上面包含这个（当然是修改的）

```
 CustomTableViewCell *cell = [tableView dequeReusableCell... 
```

和

```
 cell = [[CustomTableViewCell alloc] initWithStyle... 
```

反而。不需要额外的 .xib。

```
 @interface CustomTableViewCell : UITableViewCell
    @end

    @implementation CustomTableViewCell
    - (void)layoutSubviews
    {
        [super layoutSubviews];
        cell.textLabel.frame = theFrameYouWant;
    }
    @end 
```

# ruby-on-rails - rails 国际化撇号

> ID：12101171
> 
> 赞同：1
> 
> 时间：2012-08-23T23:00:12.590
> 
> 标签：ruby-on-rails, ruby, internationalization, apostrophe

我有一个文件 config/locales/events.en.yml：

```
en:
  im_going: im going 
```

我希望它是

```
en:
  im_going: i'm going 
```

但是当我这样做时，我会在代码的随机部分中遇到几个错误。有人知道如何用撇号国际化字符串吗？

在此先感谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T22:27:58.487

从这里：http: [//yaml.org/spec/current.html#id2534365](http://yaml.org/spec/current.html#id2534365)

```
en:
  im_going: 'i''m going' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T23:19:18.743

This is one of those little things that have always annoyed me about YML. Anyway, quote your string and everything should be okay:

```
en:
  im_going: "i'm going" 
```

Hope that helps!

# rspec - 使用 Selenium 远程 webdriver 和 HTTP Basic auth 进行 rspec 测试的挑战

> ID：12101175
> 
> 赞同：0
> 
> 时间：2012-08-23T23:01:32.313
> 
> 标签：rspec, internet-explorer-9, capybara, selenium-webdriver, basic-authentication

嗨，智者社区！在使用 Remote Webdriver 进行测试时，有什么想法可以处理 Selenium 2（rpec 和 capybara）的 Basic Auth？喜欢 Internet Explorer 9？

我尝试过的：我没有使用 RackTest。我确实使用 Selenium Grid 和 Remote Webdriver。我不想使用访问“http://user:password@somewhere.com/”，因为这对 IE9 不起作用（并且允许它的 Reg 键更改对 Win7/IE9 不起作用）。

我已阅读[http://code.google.com/p/selenium/issues/detail?id=34](http://code.google.com/p/selenium/issues/detail?id=34)。很多具体的想法，但我看不到支持 Remote Webdriver 和 IE9。

似乎`page.driver.basic_auth(auth_name, auth_pw)`只对机架测试有用（不是我）。webdriver 2似乎`selenium.addCustomRequestHeader`不支持。

运行外部脚本工具与浏览器交互并不疯狂。（代理或 AutoIT）

也许有一天 Selenium 会原生地支持这一点，但在那之前，其他人发现了什么可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:58:02.093

所以，不幸的是，我发现解决这个问题的唯一方法就是避免它。我选择为应用程序创建一个 IP 白名单，这样我的测试机器就不必处理 Basic Auth。

我更喜欢 Selenium / Capybara 有一种本地处理的方法。

# batch-file - 替换特定文本的批处理命令

> ID：12101178
> 
> 赞同：0
> 
> 时间：2012-08-23T23:02:01.617
> 
> 标签：batch-file

我必须编写一个批处理文件来搜索文件中的特定行，并将其替换为文件名。

具体来说，一个文件：

```
data
data
data
ABCD xyz <- this is the line that i have to replace. abcd always the same xyz always different
data
data 
```

我想将 xyz 值更改为不带扩展名的文件名。所以如果文件是 blabla.tpo 那么文件看起来像：

```
data
data
ABCD blabla
data
.... 
```

我希望你们能帮助我。我不是程序员，这些是 3d 文件，我有 1000 个。我已经用谷歌搜索了各种方式，写了数百个不工作的批处理文件。尝试过 FAR，notepad++，谁知道还有多少没有成功。如果程序可以做到，那么我必须一个一个地打开文件，否则它无法插入文件名，只能插入精确的字符串......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:05:57.383

如果您有 Perl，请尝试：

```
perl -ne 'if (/^(ABCD ).*$/) { print "$1blabla\n"; } else { print $_; }' inputfile.txt 
```

shell 本身对于这类任务来说并不是非常好。您可能可以进行逐行阅读（例如通过`read`Bash 中的方式），但替换逻辑不像 Perl 那样精巧或强大。

# javascript - Javascript: var RocknCoder = RocknCoder || {};

> ID：12101181
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:02:11.243
> 
> 标签：javascript, object

有谁知道这段代码是做什么的？它是用 Javascript 编写的。

```
var RocknCoder = RocknCoder || {}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:04:32.117

短缺：

```
if (!RocknCoder) var RocknCoder = {}; 
```

`{}`是一个对象初始化器。尝试用语言表达它，它更有意义：

```
set variable RocknCoder equal to RocknCoder or {} 
```

我相信使用缩写形式比简单的形式更好，因为如果变量尚未在范围内声明，`if`它会阻止 a`ReferenceError`在条件上发生。不过，在声明上可能会通过提升来避免这种情况。`if``var`

# c# - 在导入 Excel 之前从 ASP.NET 操作 HTML

> ID：12101188
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:03:04.150
> 
> 标签：c#, asp.net, regex, excel, hyperlink

我在 ASP.NET 中使用 HTMLTable 导出，使用 Response.Write 将所有 HTML 表代码写入 Excel 文件。

我现在需要做的是从这个 Excel 文件中删除所有超链接。有没有比使用正则表达式更好的方法来做到这一点？

如果正则表达式是最好的方法，我怎样才能消除标签而不是中间的 ID？

```
 <td class="header">Details ID</td>
      <td>
         <div class="id"><a class="details" href="details?id=1232" target="_blank">1232</a></div>
      </td>
      <td>
         <div class="id"><a class="details" href="details?id=1233" target="_blank">1233</a></div>
      </td>
      <td>
         <div class="id"><a class="details" href="details?id=1234" target="_blank">1234</a></div>
      </td>
   </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:07:20.447

这个简单的正则表达式可以做到：

```
</?(a|A).*?> 
```

这是一个使用您的输入进行测试的链接：

[http://regexhero.net/tester/?id=c1458e14-de87-4f57-9850-3ee00e573566](http://regexhero.net/tester/?id=c1458e14-de87-4f57-9850-3ee00e573566)

![在此处输入图像描述](../Images/568d5c2672075dd64ddc2d9ff8655cb2.png)

如果您不喜欢像 John Saunders 那样使用 Regex 解析 HTML，可以使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)：

```
class Program
{
    static void Main(string[] args)
    {
        RemoveHyperlinksButKeepText();
    }

    private static void RemoveHyperlinksButKeepText()
    {
        var htmlDoc = new HtmlDocument();
        htmlDoc.Load(@"C:\YourHtmlFile.html");

        var links = htmlDoc.DocumentNode.SelectNodes("//a");

        string html = htmlDoc.DocumentNode.OuterHtml;

        foreach (HtmlNode link in links)
        {
            var linkText = link.InnerText;

            html = html.Replace(link.OuterHtml, linkText);
        }

    }
} 
```

# regex - 如何从存储在 Ant 属性中的文件路径中删除前缀？

> ID：12101190
> 
> 赞同：2
> 
> 时间：2012-08-23T23:03:09.513
> 
> 标签：regex, ant

我有一个文件路径，例如`/repo/java/projects/myproj`在 Ant 属性中。如何删除`/repo/java`结果并将其存储`projects/myproj`在另一个属性中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:49:49.580

`pathconvert`Ant 任务可以与嵌套一起使用以`mapper`从路径中删除前两个目录（或获取前两个目录）。

# 删除前缀`/repo/java/`

## 匹配'/'文件分隔符

```
<property name="path" value="/repo/java/projects/myproj"/>

<target name="test1">
  <pathconvert property="path.fragment" pathsep="${line.separator}">
    <propertyresource name="path" />
    <mapper type="regexp"
        from="^/[^/]+/[^/]+/(.*)"
        to="\1"/>
  </pathconvert>
  <echo message="${path.fragment}" />
</target> 
```

**输出**

```
test1:
     [echo] projects/myproj

BUILD SUCCESSFUL
Total time: 0 seconds 
```

## 匹配平台文件分隔符

```
<property name="path" value="/repo/java/projects/myproj"/>

<target name="test2">
  <pathconvert property="path.fragment" pathsep="${line.separator}">
    <propertyresource name="path" />
    <mapper type="regexp"
        from="^${file.separator}[^${file.separator}]+${file.separator}[^${file.separator}]+${file.separator}(.*)"
        to="\1"/>
  </pathconvert>
  <echo message="${path.fragment}" />
</target> 
```

**输出**

```
test2:
     [echo] projects/myproj

BUILD SUCCESSFUL
Total time: 0 seconds 
```

# 获取前缀`/repo/java/`

## 匹配'/'文件分隔符

```
<property name="path" value="/repo/java/projects/myproj"/>

<target name="test3">
  <pathconvert property="path.fragment" pathsep="${line.separator}">
    <propertyresource name="path" />
    <mapper type="regexp"
        from="^(/[^/]+/[^/]+/).*"
        to="\1"/>
  </pathconvert>
  <echo message="${path.fragment}" />
</target> 
```

**输出**

```
test3:
     [echo] /repo/java/

BUILD SUCCESSFUL
Total time: 0 seconds 
```

## 匹配平台特定的文件分隔符

```
<property name="path" value="/repo/java/projects/myproj"/>

<target name="test4">
  <pathconvert property="path.fragment" pathsep="${line.separator}">
    <propertyresource name="path" />
    <mapper type="regexp"
        from="^(${file.separator}[^${file.separator}]+${file.separator}[^${file.separator}]+${file.separator}).*"
        to="\1"/>
  </pathconvert>
  <echo message="${path.fragment}" />
</target> 
```

**输出**

```
test4:
     [echo] /repo/java/

BUILD SUCCESSFUL
Total time: 0 seconds 
```

# mysql - 如果任何值为 NULL，GROUP_CONCAT 返回 NULL

> ID：12101191
> 
> 赞同：6
> 
> 时间：2012-08-23T23:03:13.963
> 
> 标签：mysql, group-by, group-concat

如果有任何列是，我该如何`GROUPT_CONCAT`退货？`NULL``NULL`

这是一个测试表：

```
CREATE TABLE gc (
  a INT(11) NOT NULL,
  b VARCHAR(1) DEFAULT NULL
);

INSERT INTO gc (a, b) VALUES
(1, 'a'),
(1, 'b'),
(2, 'c'),
(2, NULL),
(3, 'e'); 
```

我的查询：

```
SELECT a, GROUP_CONCAT(b)
FROM gc
GROUP BY a; 
```

这就是我得到的：

```
a | GROUP_CONCAT(b)
--+----------------
1 | a,b
2 | c
3 | e 
```

这就是我要的：

```
a | GROUP_CONCAT(b)
--+----------------
1 | a,b
2 | NULL
3 | e 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T23:06:40.993

在`IF`表达式中检查组中是否有任何值为 NULL。我可以想到几种方法：

1）计算非空值并将其与组中的行数进行比较：

```
SELECT a, IF(COUNT(b) = COUNT(*), GROUP_CONCAT(b), NULL) AS bs
FROM gc
GROUP BY a 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/f671b/5)

2) 使用以下方法计算空值的数量`SUM`：

```
SELECT a, IF(SUM(b IS NULL) = 0, GROUP_CONCAT(b), NULL) AS bs
FROM gc
GROUP BY a 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/f671b/8)

# vba - 使用多个条件查找所有结果

> ID：12101192
> 
> 赞同：2
> 
> 时间：2012-08-23T23:03:19.227
> 
> 标签：vba, excel, excel-formula

我有一个包含多列的表，我想使用条件过滤表并接收带有匹配项的范围。(1) 我知道我可以使用循环轻松地在表中进行迭代，或者 (2) 我可以在列中添加过滤器。

我不喜欢（1），因为表中的迭代太慢了，但我可以做到这一点。

Excel 是否有一个函数可以一步返回一个按特定条件过滤的范围？类似'function multipleVlookup(...) As Range'

**编辑：** 回答后我的代码：（感谢亚历山大）

```
Set tableRange = Range("A1:M" & lastRow)

' Filter 
With tableRange
    Call .AutoFilter(5, "test1")
    Call .AutoFilter(11, "test2")
    Call .AutoFilter(9, myDate)
End With

Set filteredRange = tableRange.SpecialCells(xlCellTypeVisible)

' Disable Filter
With tableRange
    Call .AutoFilter(5)
    Call .AutoFilter(11)
    Call .AutoFilter(9)
End With

' Do something with this result
For Each c In f.Cells.Rows
    actualRow = c.Row
    If actualRow <> 1 Then
        ' Do something
    End If
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:08:14.800

如果您可以过滤数据，则可以使用该表`Range`并调用如下`SpecialCells`方法：

```
Dim table_range as Range
Dim filtered_range as Range

Set table_range = Range(...)
table_range.AutoFilter field:=... criteria1:=...
Set filtered_range = table_range.SpecialCells(xlCellTypeVisible) 
```

这将返回一个`Range`仅包含原始范围的可见单元格的对象。

# directshow - 媒体基础与 DirectShow 和媒体容器。（WEBM 和 OGG THEORA）

> ID：12101195
> 
> 赞同：1
> 
> 时间：2012-08-23T23:04:03.757
> 
> 标签：directshow, ogg, ms-media-foundation, webm

为什么所有新的视频/媒体容器格式都对媒体基础提供很少的支持，而为 DirectShow 提供更多支持，因为知道 DirectShow 正在消亡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T05:59:53.970

Because Media Foundation offers inferior feature set and availability to DirectShow. DirectShow is primary API for formats and codecs in Windows, nevertheless Microsoft stopped its development almost 10 years ago. The extensibility of this API is so good, and it is still so well applicable to multimedia tasks and processing.

# ajax - Jquery - 确保在 AJAX 调用完成后执行代码块？

> ID：12101197
> 
> 赞同：1
> 
> 时间：2012-08-23T23:04:16.350
> 
> 标签：ajax, jquery, jquery-deferred

我目前有一些 JQuery 代码，我试图确保只有在第一个块中的 AJAX 调用完成后才执行一个代码块。但是，我遇到了一些问题-我尝试使用 JQuery Deferred 方法来执行此操作（下面的代码），但是第一个或第二个代码块都没有运行，所以我认为我走错了路。

我是 Deferred 方法的新手，所以我希望有人能指出我正确的方向，或者指出另一种（也许更好）的方法。

```
function makeChains(){
    $('.chained_to_vehicle_make_selector').remoteChainedTo('.chained_parent_vehicle_make_selector', '/models.json');
    $('.chained_to_vehicle_model_selector').remoteChainedTo('.chained_parent_vehicle_model_selector', '/trims.json');
    $('.chained_to_vehicle_trim_selector').remoteChainedTo('.chained_parent_vehicle_trim_selector', '/model_years.json');
}

var chainCall = $.Deferred(function() {
    makeChains();
});

chainCall.done(function() { 
    $(".chzn-select").chosen();
    $(".chained_parent_vehicle_make_selector").chosen().change( function() {$(".chained_to_vehicle_make_selector").trigger("liszt:updated"); });
    $(".chained_parent_vehicle_model_selector").chosen().change( function() {$(".chained_to_vehicle_model_selector").trigger("liszt:updated"); });
    $(".chained_parent_vehicle_trim_selector").chosen().change( function() {$(".chained_to_vehicle_trim_selector").trigger("liszt:updated"); });
    $(".chained_child").chosen();
}); 
```

我也尝试添加`chainCall.resolve();`到最后，但无济于事。

有人可以帮忙吗？

编辑：我在这里查看了解决方案：[Waiting for jQuery AJAX response(s)](https://stackoverflow.com/questions/6250022/waiting-for-jquery-ajax-responses?rq=1)这似乎可行，但我认为问题可能是`remoteChainedTo`似乎没有内置回调？我是否需要修改代码以添加回调才能使其正常工作，还是 JQuery 能够帮助我？remoteChainedTo 插件`getJSON`用于从 url 中提取数据。

编辑 2：对这个问题不太喜欢 - 有什么进一步的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:53:02.887

考虑到 remoteChained 方法返回一个 jqXHR 对象（延迟），您可能想尝试类似：

```
var dfds = [],
list = ['vehicle_make_selector','vehicle_model_selector','vehicle_trim_selector'],
urls = ['/models.json','trims.json','/model_years.json'];

for(var i=0;i<list.length;i++){
    dfds.push( $('chained_to_' + list[i]).remoteChainedTo('chained_parent',urls[i]);
}

$.when.apply($,dfds).done(function(){
     $(".chzn-select").chosen();
     //... rest of the code.
}) 
```

# forms - 为什么这些引导程序会绊倒自己？

> ID：12101208
> 
> 赞同：3
> 
> 时间：2012-08-23T23:05:30.187
> 
> 标签：forms, twitter-bootstrap

[这是我在 jsfiddle 上的 Bootstrap 表单](http://jsfiddle.net/nxWXd/)。它具有以下基本结构：

```
-------------------------------------------------
|                    Span 12                    |
|   ----------------------------   ----------   |
|   |  ----------  ----------  |   |        |   |
|   |  |        |  |        |  |   |        |   |
|   |  | Span 4 |  | Span 4 |  |   | Span 4 |   |
|   |  |        |  |        |  |   |        |   |
|   |  ----------  ----------  |   |        |   |
|   |           Span 8         |   |        |   |
|   ----------------------------   ----------   |
|                                               |
------------------------------------------------- 
```

例如

```
<div class="span12">
    <div class="row">
        <div class="span8">
            <div class="row">
                <div class="span4"></div>
                <div class="span4"></div>
            </div>
            <div class="row"></div>
        </div>
        <div class="span4"></div>
    </div>
</div>​ 
```

我的问题是表格似乎相互绊倒。例如，有一个标签叫做“**一个异常长的标签**”，之后的标签并没有干净地转到下一行，而是停留在它的右边。我认为我的**Date**和**Facility**标签也发生了类似的事情，因为**Facility**位置不合适。最后，表格实际上并没有留在他们的盒子里。右侧 Span4 块中的标签与左侧的 Span4 重叠。我在做什么导致所有这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:19:19.200

伙伴，

如果您想使用固定宽度布局和表单水平来完成该布局，则表单将不适合 span4 列。您可以为此目的使用基本形式，通过使用

```
 <form class="well">. 
```

此外，您必须实现行和列的正确嵌套。像这样，

```
<div class="row-fluid">
    <div class="span8">
        <div class="row-fluid">
            <div class="span4">
                Some Content Here...
            </div>
            <div class="span4">
                Some Content Here...
            </div>
        </div><!-- row-fluid end-->
    </div><!-- span8 end-->

    <div class="span4">
        Some Content Here...
    </div><!-- span4 left-col end-->
</div><!--row fluid end--> 
```

如果你想用表格填充列，这里有一个例子......

```
<div class="row">
<div class="span8">
    <div class="row">
        <div class="span4">
            <form class="well">
                <label>Label name</label>
                <input type="text" placeholder="Type something…" class="span3">
                <p class="help-block">Example block-level help text here.</p>
                <label class="checkbox">
                  <input type="checkbox"> Check me out
                </label>
                <button class="btn" type="submit">Submit</button>
            </form>
        </div>
        <div class="span4">
        <form class="well">
            <label>Label name</label>
            <input type="text" placeholder="Type something…" class="span3">
            <p class="help-block">Example block-level help text here.</p>
            <label class="checkbox">
              <input type="checkbox"> Check me out
            </label>
            <button class="btn" type="submit">Submit</button>
        </form>
        </div>
    </div>
</div><!-- span8 end-->

<div class="span4" id="side">
    <form class="well">
        <label>Label name</label>
        <input type="text" placeholder="Type something…" class="span3">
        <p class="help-block">Example block-level help text here.</p>
        <label class="checkbox">
          <input type="checkbox"> Check me out
        </label>
        <button class="btn" type="submit">Submit</button>
    </form>
 </div><!--row fluid end--> 
```

上面的代码应呈现类似于图像的输出![在此处输入图像描述](../Images/206e77c24a374acda645137cabeef42b.png)

# sql - 关键字“截断”附近的语法不正确。必须声明标量变量'@table'

> ID：12101210
> 
> 赞同：1
> 
> 时间：2012-08-23T23:05:36.517
> 
> 标签：sql, sql-server, visual-studio-2010

我对 SQL 很陌生，我不确定为什么下面的代码会在标题中产生错误：

```
CREATE PROCEDURE Truncate (@table varchar(50))
AS
BEGIN
    SET NOCOUNT ON;
    EXEC ('TRUNCATE TABLE ' + @table);
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:11:32.070

由于 Truncate 是保留字，因此不能在未加引号的过程名称中使用它。你可以这样做：

```
CREATE PROCEDURE dbo.[Truncate] (@table varchar(50)) 
AS BEGIN     
  SET NOCOUNT ON;     
  EXEC ('TRUNCATE TABLE ' + @table); 
END 
```

但是当你运行它时，你必须说

```
dbo.[Truncate] 'tablename' 
```

或者将过程的名称更改为 TruncateTable：

```
CREATE PROCEDURE dbo.TruncateTable (@table varchar(50)) 
AS BEGIN     
  SET NOCOUNT ON;     
  EXEC ('TRUNCATE TABLE ' + @table); 
END 
```

那么你可以称它为

```
EXEC TruncateTable 'tablename' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T23:11:49.147

`TRUNCATE`是一个关键字，因此您应该将您的过程命名为其他名称，例如：

```
CREATE PROCEDURE TruncateTable (@table varchar(50))
AS
BEGIN
    SET NOCOUNT ON;
    EXEC ('TRUNCATE TABLE ' + @table);
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T23:11:57.683

TRUNCATE 是 SQL Server 中的保留关键字或关键字。只需将名称更改为其他名称。避免像 [TRUNCATE] 那样将 [ ] 放在它周围

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T23:18:19.297

Use some other name for the procedure instead of `Truncate` e.g. use `trucateMyTable`

**Reason:**

`Truncate` is a key word and

A **variable/procedure/function name** can not be a keyword.

# mysql - MySQL Parent 详细信息（如果它是子帐户）

> ID：12101212
> 
> 赞同：2
> 
> 时间：2012-08-23T23:06:00.277
> 
> 标签：mysql, sql, join

我有一个包含如下数据的表

```
id    name      created         parent
------------------------------------------------
1     Alpha     11385209583     0
2     Bravo     11385209619     0
3     Bravo-A   11385209701     2
4     Bravo-B   11385209777     2 
```

这样 Bravo-A 和 Bravo-B 是 Bravo 的孩子。

还有另一个包含电子邮件地址的表（帐户 a JOIN emails e ON a.id = e.account_id），但只有父帐户有电子邮件。也就是说，Bravo-A 的电子邮件是 Bravo 的。

如果我有 accounts.id 号码，是否可以编写一个查询，为我提供正确帐户的 emails.email 字段（其中，当 id 为 1 时 account_id = 1，当 id 为 2、3 时 account_id = 2，或4)?

（如果这有点冗长或不重要，我很抱歉，我很难用语言表达它！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:13:17.877

为什么不加入`acount`'s `parent`专栏`email`？

```
SELECT  a.*, 
        e.emailadd as parentEAdd, 
        COALESCE(b.emailadd,'') as ChildEAdd -- can contain null values when 
                                             -- parentID is 0
FROM    `accounts` a 
             INNER JOIN `emails` e 
                  ON a.id = e.account_id
             LEFT JOIN `emails` b
                  ON a.parent = b.account_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:10:46.103

最简单的方法是在帐户表中放置另一个字段（例如“mail_id”），将每封电子邮件的 id 存储在那里并根据该字段进行连接。这样，如果您愿意，孩子们可能会收到相同或不同的邮件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:50:18.107

自己回答了！

```
SELECT a.id, e.email 
FROM account a 
         INNER JOIN emails.e 
              ON e.account_id = IF(a.parent <> 0, a.parent, a.id) 
```

我在 SQL 中发现的一点是，总有一种更优雅的方式！

# viewcontroller - “This Class Is Not Key Value Coding-Compliant For the Key”有办法追踪这个错误吗？

> ID：12101213
> 
> 赞同：0
> 
> 时间：2012-08-23T23:06:06.087
> 
> 标签：viewcontroller, xcode4.4

运行项目时出现此错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<DetailViewController 0x6a38b60> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key detailDescriptionLabel.' 
```

但问题是我的 ViewController 中没有任何 detailDescriptionLabel 插座，我的 XIB 中也没有。我只有一个 XIB，我在 XIB 中添加了其他东西，在代码中。有没有办法找到这个错误在哪里或者我需要删除什么链接？我正在尝试调试我的项目，但我找不到这个错误来自哪里......

我正在使用 XCODE 4.4

这是我的项目：[链接](http://dl.dropbox.com/u/63305852/GRB.zip)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:42:11.437

You hooked up something in the wrong way in your XIB or storyboard. Go to your storyboard/XIB and in the `Document Outline` right click on the view controller; you should be able to see the details of it with all the connections. Probably, you'll see the bad connection with the warning sign, so just remove it and redo it the right way.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T13:03:20.603

我有同样的问题。检查您是否没有删除 DetailViewController 中包含的默认标签，它的名称是“detailDescriptionLabel”。删除它，它应该可以工作。

# javascript - 对象事件中的分号是或否

> ID：12101214
> 
> 赞同：5
> 
> 时间：2012-08-23T23:06:29.317
> 
> 标签：javascript, javascript-events

我已经搜索过，但没有找到这个问题的答案。HTML DOM 事件，如 onChange、onSelect、onKeyUp、onFocus、onClick 等是否应该包含分号，例如下面的两行。

```
onChange="this.form.submit();" OR onChange="this.form.submit()" 
```

“是”或“否”或“无关紧要”

我想这无关紧要，但同样，最好、最正确的做法是什么？

谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T23:09:03.903

没关系。

事件处理程序属性值被视为一系列语句，这些语句包装在类似于以下的函数签名中

```
 function (event) {
   with (event.target.ownerDocument) {
     with (event.target) {
       // attribute body goes here
     }
   }
 } 
```

因此您可以将任何一组[`SourceElement`](http://es5.github.com/#x14)s 放入属性值中，并且可以按照 JavaScript 通常的[分号插入规则省略分号](http://es5.github.com/#x7.9)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:08:56.027

从来没有用过分号，所以我想没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:13:46.113

不，您不需要分号。我不知道它是否可以使用它，但没有它很好。如果您需要了解有关 HTML、CSS 或 Javascript 等 Web 语言的任何信息，请访问 www.w3school.com 以获取参考或教程。Javascript 部分的链接是：[http](http://www.w3schools.com/js/default.asp) ://www.w3schools.com/js/default.asp 您所要求的示例的链接是：[http://www.w3schools.com/js/js_popup。 asp](http://www.w3schools.com/js/js_popup.asp) 此示例使用您在问题中提到的 onclick。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T23:37:17.940

这真的是风格问题。与任何 JavaScript 代码片段一样，您可以根据需要省略明确的分号。（我更喜欢把它们放进去。）

# android - 如何以编程方式更改 Sherlock 操作栏文本颜色？

> ID：12101224
> 
> 赞同：1
> 
> 时间：2012-08-23T23:07:45.823
> 
> 标签：android, android-actionbar, actionbarsherlock

如何从 Java 代码更改操作栏的选项卡文本颜色？不切换到 XML 文件中定义的不同主题，而是切换到 .setTextColor(Color.GREEN) 之类的主题。

如果有办法获取当前（非自定义）视图，也许我可以尝试从那里获取 TextView 并更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:33:46.207

想通了......你可以传入一个 SpannableString：

```
SpannableString spannable = new SpannableString(myString);
spannable.setSpan(new ForegroundColorSpan(Color.GREEN), 0, myString.length(), 0);
myTextView.setText(spannable); 
```

也许使用标准操作栏就足够了（还没有尝试过），但是对于 Sherlock，您还需要按照 Sam 的回答在 xml 中静态设置它。否则，Sherlock 似乎忽略了跨度颜色。您在 xml 中设置的颜色无关紧要，因为将使用跨度颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:14:25.373

我不相信有一种方法可以控制这一点。但是请阅读这个问题： [ActionBar text color](https://stackoverflow.com/q/5861661/1267661)

最佳答案有 Jake Wharton 的流行评论，ActionBar Sherlock 是*他的*项目，正如他所说：“[这是正确的方法](https://stackoverflow.com/a/5881739/1267661)。”

# jquery - 使用 jQuery 和 REGEX 获取特定的页面 URL

> ID：12101225
> 
> 赞同：1
> 
> 时间：2012-08-23T23:07:57.970
> 
> 标签：jquery, regex

我一直在试图找出最好的方法来做到这一点。目前，我有一个只从页面 URL 中提取文件名的函数。

例如。[http://www.example.com/example1/thepage.php?page=1/](http://www.example.com/example1/thepage.php?page=1/)将返回 thepage.php?page=1。

如何告诉函数只返回“thepage.php”，并在第一个问号处停止？

当前代码：

```
var pageName = location.href.substr(location.href.lastIndexOf("/")+1,location.href.length); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:26:04.170

您可以只使用已经存在的 JavaScript `window.location.pathname`，它将返回`/thepage.php`问题中的示例。我想你只需要去掉第一个斜线。

有关该 JavaScript 对象的综合指南，请参阅MDN 上的[window.location 。](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# datetime - 用于标签点击的 jquerymobile datebox

> ID：12101226
> 
> 赞同：0
> 
> 时间：2012-08-23T23:08:04.127
> 
> 标签：datetime, jquery-mobile, datebox

datebox 的当前 jquerymobile 实现（或像 jtsage 之类的插件）会弹出一个用于文本输入的日期框。无论如何，是否可以将其扩展到当用户单击标签（或任何随机文本）时我想显示日期框的情况？

例如，在我的情况下[http://jsfiddle.net/sonyisme/UEmh3/1/](http://jsfiddle.net/sonyisme/UEmh3/1/)，我想在用户单击文本“8/1/2012-8/7/2012”时显示日期框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:55:42.703

当然，[datebox](http://dev.jtsage.com/jQM-DateBox/demos/opt/open.html)有一个`open`方法

所以你可以做类似的事情

```
$('#myLabel').on('click', function() {
  $('#mydate').datebox('open');
}); 
```

编辑：

好的，所以您根本不希望显示输入，正如我在评论中提到的那样，我曾经使用`Datebox`插件做过类似的事情，我需要做的是将它包装在一个 div 中，我只是通过设置它从视口中隐藏它z-index 为 -1。问题是`z-index`必须在代码中进行更改（基本上是在插件初始化之后）。这是一些示例代码

HTML

```
 <div  class="hdnDateBoxCnt width25Percent"> 
                  <input type="date" name="myDateBox" id="myDateBox" data-role="datebox"
                     data-options='{"mode":"calbox",  "disableManualInput": true, "noButtonFocusMode": true}' />
  </div> 
```

CSS

```
.hdnDateBoxCnt 
{
  position:absolute;
  /* z index needs to be set in code */   
} 
```

JS

```
$('.hdnDateBoxCnt').css('z-index', '-1'); 
```

只是一个注释，我使用了早期版本的代码/标记，`datebox`所以`data-options`可能已经改变了一点。我已经切换到使用[MobiScroll](http://mobiscroll.com/)插件。

# file - Windows XP VB 中的文件大小

> ID：12101229
> 
> 赞同：2
> 
> 时间：2012-08-23T23:08:23.580
> 
> 标签：file, vbscript, windows-xp, size

嗨，这听起来可能很奇怪，下面是我的 VB 代码

```
Const ForReading = 1, ForWriting = 2, ForAppending = 8

Set filesys = CreateObject("Scripting.FileSystemObject")
'Set fileapp = filesys.OpenTextFile("C:\TEST.txt", ForAppending, True) 
Set filewrt = filesys.OpenTextFile("C:\TEXT.txt", ForWriting, True) 
Set filesize = filesys.GetFile("C:\TEXT.txt")

filewrt.Write("HELOOO")
msgbox filesize.size
filewrt.close 
```

此脚本在 Windows 7 中将 6 字节的值“6”显示为文件大小，但在 XP 中它显示为 0，即使文件大小为 6 字节....有什么想法吗？

编辑：

我想通了，必须先关闭文件，然后为 XP 显示 filesize.size 以显示正确的文件大小。

仍然不知道为什么这适用于 Windows 7 ......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:26:57.543

我最好的猜测是更改两个版本的 Windows 之间的文件缓存或`FileSystemObject`

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa364218%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364218%28v=vs.85%29.aspx)

根据[http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.84%29.aspx](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.84%29.aspx)

> Close 方法刷新缓冲区并关闭文件。

因此，在将 IO 刷新到磁盘之前，XP 版本不会看到文件大小。

# ruby-on-rails-3 - 在 Rails 中创建一个由 3 部分组成的 AJAX 选择表单

> ID：12101230
> 
> 赞同：1
> 
> 时间：2012-08-23T23:08:37.943
> 
> 标签：ruby-on-rails-3, jquery

我正在尝试制作一个以 3 个选择下拉菜单开头的表单。很标准——

`The selection of drop down 1 populates the options in drop down 2`

然后，

`The selection of drop down 2 populates the options in drop down 3`

我在`sled`这里遵循了对一个类似问题的回答，[https](https://stackoverflow.com/a/6864321/766817) ://stackoverflow.com/a/6864321/766817但我不知道（使用他的示例）如何将第三个元素添加到组合中。这是我到目前为止...

**_form.html.erb**

```
<%= select_tag  :first_select,
("<option>Product Grade...</option>" + options_from_collection_for_select(@product_grades, "id", "product_grade")).html_safe,
  :'data-remote' => 'true',
  :'data-url' => url_for(:controller => 'product_grades', :action => 'getdata'), 
  :'data-type' => 'json'
%>

<%= select_tag  :second_select,
  :'data-remote' => 'true',
  :'data-url' => url_for(:controller => 'vendors', :action => 'getdata'), 
  :'data-type' => 'json'
%>

<%= select_tag :third_select %> 
```

**应用程序.js**

```
$('#first_select').live('ajax:success', function(evt, data, status, xhr) {

  var selectbox2 = $('#second_select');

  selectbox2.empty();

  $.each(data, function(index, value) {
    var opt = $('<option/>');

    opt.attr('value', value[0]);
    opt.text(value[1]);
    opt.appendTo(selectbox2);
  });
});

$('#second_select').live('ajax:success', function(evt, data, status, xhr) {

  var selectbox3 = $('#third_select');

  selectbox3.empty();

  $.each(data, function(index, value) {
    var opt = $('<option/>');
    opt.attr('value', value[0]);
    opt.text(value[1]);
    opt.appendTo(selectbox3);
  });
}); 
```

最后，我`getdata`在 the`ProductGradesController`和 the`VendorsController`

**产品等级控制器**

```
def getdata
  @data_from_select1 = params[:first_select]
  @data_for_select2 = Vendor.where(:product_grade_id => @data_from_select1).all
  render :json => @data_for_select2.map{|c| [c.id, c.vendor_name]}
end 
```

**供应商控制器**

```
def getdata
  @data_from_select2 = params[:second_select]
  @data_for_select3 = ItemCode.where(:vendor_id => @data_from_select2).all
  render :json => @data_for_select3.map{|a| [a.id, a.item_code]}
end 
```

目前，前两个步骤有效，但是第三步会生成一个选择框，但当您从前两个步骤中选择一个选项时，不会填充任何数据。

我对 jQuery AJAX 查询等很陌生，所以我确定我在那里做错了什么，但是有什么想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:08:50.323

好的，所以对于以后遇到类似问题的任何人，我实际上最终采取了不同的路线......

这些下拉列表将处理的数据量不会很多，所以我实际上将非 AJAX 方法与一个名为`jQuery Chained`(https://github.com/tuupola/jquery_chained)的 jQuery 插件集成在一起

这只是根据上一个下拉菜单中的选择启用/禁用下拉选项。**如果您的下拉列表中填充了大量数据库数据，或者您需要在下拉列表中显示的内容上有一个安全层，这将不是一个很好的解决方案，因为选项是从 DOM 中添加/删除的，这意味着通过查看源代码，某人很容易看到所有数据。**

HomeOnRails 博客有一篇很棒的文章，介绍了如何将这个 jQuery 链式插件集成到您的 rails 应用程序中。(http://homeonrails.blogspot.com/2012/01/rails-31-linked-dropdown-cascading.html)

享受和好运！

# dom - 使用“PHP Simple HTML DOM Parser”从 HTML 代码解析数字时出现空白页

> ID：12101231
> 
> 赞同：0
> 
> 时间：2012-08-23T23:08:49.493
> 
> 标签：dom, curl, domparser

我正在使用 [PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net)我有一些 HTML 代码，我想从中提取第一个数字出现，在这个例子中是' `735438`'：

```
<!-- Some Tds without onclick atribute ->
<td onclick="StatsAnnonce ('735438');" style="CURSOR:pointer;"  onmouseover="return escape('<img  src=/images/icon_stats.gif border=0 width=13 height=14> <b>Statistiques de cette annonce</b><li>Affichages des détails annonce</li><li>Classement par mois et par pays.</li>');">&nbsp;&nbsp;<img  src="/images/icon_stats.gif" border="0" width="13" height="14" alt="Statistique annonce">&nbsp;Stats&nbsp;</td>
<td onclick="ModifAnnonce ('735438','1','302528');" style="CURSOR:pointer;"  onmouseover="return escape('<img  src=/images/button_edit.gif border=0 width=13 height=14> <b>Editer cette annonce</b><li>Modifier : titre, texte, prix</li><li>Ajouter/Supprimer des photos</li>');">&nbsp;&nbsp;<img  src="/images/button_edit.gif" border="0" width="13" height="14" alt="Modifier l'annonce">&nbsp;Modif&nbsp;</td>
<td onclick="ProlongerAnnonce ('735438');" style="CURSOR:pointer;"  onmouseover="return escape('<img  src=/images/button_calendar.gif border=0 width=14 height=14> <b>Renouveler cette annonce</b>');"><img  src="/images/button_calendar.gif" border="0" width="14" height="14" alt="Renouveler l'annonce">&nbsp;Renouv&nbsp;</td>
<td onclick="DeleteAnnonce('735438','06/08/2012 00:50','302528','Bon appart s+1');" style="CURSOR:pointer;"  onmouseover="return escape('<img  src=/images/button_trash.gif border=0 width=13 height=14> <b>Supprimer cette annonce</b>');"><img  src="/images/button_trash.gif" border="0" width="13" height="14" alt="Supprimer l'annonce">&nbsp;Suppr&nbsp;</td> 
```

我已尝试使用此代码（根据文档说明）但无法正常工作：

```
$html = str_get_html('page.html');

// Find all <td> with the 'onclick' as attribute
$ret = $html->find('td[onclick]');

// Find just all <td>
$ret = $html->find('td');

foreach($ret as $val)
{
echo $val."<br/>";
} 
```

结果只是一个没有代码的空白页面......我也是新的 HTML DOM Parser，如果有人使用过这个库，请帮助我......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:25:44.193

First, I'd make sure that you're actually reading in the document (I'm pretty sure you're not at this point). You should be using:

```
$html = file_get_html('page.html');  // This!
//$html = str_get_html('page.html'); // Not this! 
```

Assuming you're trying to extract information from the `onclick` attribute, it seems you should use this in your `foreach` loop:

```
echo $val->onclick . "<br/>";  // This!
//echo $val."<br/>";  //Not this! 
```

`$val` is still an html element at this point - I'm not sure what you'll get if you echo it out, but I'm guessing it's not what you're looking for.

# javascript - Js：变量在点击时被覆盖

> ID：12101236
> 
> 赞同：0
> 
> 时间：2012-08-23T23:09:29.093
> 
> 标签：javascript, jquery

我被这个难住了，也许你能帮帮我。

这是我的html：

```
<ul class="wpsc_product_list_categories wpsc_product_list_categories_js">
<li><a href="#" id="products_all">All products</a></li>
<li><a href="#" class="wpsc_category_link "><span class="product_category_15">cat 1</span></a>
</li>
<li><a href="#" class="wpsc_category_link "><span class="product_category_12">cat 2</span></a></li>
</ul> 
```

这是我的js：

```
jQuery(".wpsc_product_list_categories_js a").click( function() {    
    jQuery('.wpsc_product_list_categories a').removeClass('wpsc-current-cat');  
    jQuery(this).addClass('wpsc-current-cat');

    var className = jQuery(this).children().attr('class');

    jQuery('.products_list_product').fadeOut(300, function() { 
        jQuery('.products_list_product').removeClass('product_item_last');
        i = 2
        jQuery('.' + className).each(function(j){
            i = i + 1;
            if (i == 3) {
                jQuery(this).addClass('product_item_last'); 
                i = 0;
            }
        });
    });
    alert(className);
    jQuery('.' + className).fadeIn(300);
    return false;
}); 
```

这个想法是当您单击其中一个链接时，跨度的类存储在变量“className”中。当您单击它一次时，它工作正常。当您再次单击它时，变量突然变为“the_original_class_name”和“product_item_last”。这不应该发生，但我不知道为什么。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:23:45.090

您在`this`函数内部使用，但您试图`this`在另一个范围内引用。

```
jQuery(".wpsc_product_list_categories_js a").click( function() {    
    jQuery('.wpsc_product_list_categories a').removeClass('wpsc-current-cat');  
    jQuery(this).addClass('wpsc-current-cat');

    var className = jQuery(this).children().attr('class');

    jQuery('.products_list_product').fadeOut(300, function() { 
        jQuery('.products_list_product').removeClass('product_item_last');
        var $this = $(this);      //this is the "this" that you want(i think)!!!!
        i = 2
        jQuery('.' + className).each(function(j){
            i = i + 1;
            if (i == 3) {
                $this.addClass('product_item_last');  //and use it here!!!!!
                i = 0;
            }
        });
    });
    alert(className);
    jQuery('.' + className).fadeIn(300);
    return false;
});​ 
```

![在此处输入图像描述](../Images/c9471bdf6e28439efd6fbb4ec3b26331.png)

# php - 如何计算存储数据在数据库中的时间并在浏览器中显示？

> ID：12101237
> 
> 赞同：0
> 
> 时间：2012-08-23T23:09:38.867
> 
> 标签：php, codeigniter

我正在使用 codeigniter 开发应用程序。在我的应用程序中，我想计算存储在数据库中的内容的时间段。例如 facebook 在浏览器中显示上传的时间。有没有办法使用codeigniter来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:19:46.683

If you've got direct access to the database in question, add a TIMESTAMP column to the table which contains the data you'd like to associate with a time. Use the 'DEFAULT CURRENT_TIMESTAMP' during table creation to have the new column store the time the data was initially inserted, and use the 'ON UPDATE CURRENT_TIMESTAMP' during table creation to have the column's timestamp automatically updated when the data gets modified. See [here](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:16:40.150

I don't use codeigniter but I think you can do this, in your database you create a date/hour field and in your script you simply use your system date to know the difference in hours, days or whatever you want to use to display.

something like this :

```
function (diference) {
    //all your sql traitement
    $time_elapsed = $system_date - $your_sql_result
    echo $time_elapsed;
} 
```

And you can even do this with an SQL line too.

# python - Python中的多个ping脚本

> ID：12101239
> 
> 赞同：21
> 
> 时间：2012-08-23T23:09:43.433
> 
> 标签：python, networking, ping

我找不到任何关于 python 和网络的易于学习的好文档。在这种情况下，我只是想制作一个简单的脚本，我可以 ping 一些远程机器。

```
for ping in range(1,10):
   ip="127.0.0."+str(ping)
   os.system("ping -c 3 %s" % ip) 
```

像这样的简单脚本可以很好地 ping 机器，但我想让脚本返回“活动”“无响应”，这让我觉得我也必须查找时间模块，我想`time.sleep(5)`和之后那，会有一个break语句。这让我觉得 for 里面应该有一个 while 循环。我不能 100% 确定，我可能完全走错了方向：/ 如果有人可以帮助或指出一些很棒的文档的方向。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T23:21:56.223

试试`subprocess.call`。它保存所使用程序的返回值。

根据我的 ping 手册，成功时返回 0，发送 ping 但未收到回复时返回 2，任何其他值表示错误。

```
# typo error in import
import subprocess

for ping in range(1,10):
    address = "127.0.0." + str(ping)
    res = subprocess.call(['ping', '-c', '3', address])
    if res == 0:
        print "ping to", address, "OK"
    elif res == 2:
        print "no response from", address
    else:
        print "ping to", address, "failed!" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-23T23:15:10.940

这个脚本：

```
import subprocess
import os
with open(os.devnull, "wb") as limbo:
        for n in xrange(1, 10):
                ip="192.168.0.{0}".format(n)
                result=subprocess.Popen(["ping", "-c", "1", "-n", "-W", "2", ip],
                        stdout=limbo, stderr=limbo).wait()
                if result:
                        print ip, "inactive"
                else:
                        print ip, "active" 
```

将产生类似这样的输出：

```
192.168.0.1 active
192.168.0.2 active
192.168.0.3 inactive
192.168.0.4 inactive
192.168.0.5 inactive
192.168.0.6 inactive
192.168.0.7 active
192.168.0.8 inactive
192.168.0.9 inactive 
```

如果您替换`limbo`为`subprocess.PIPE`并`communicate()`在`Popen`对象上使用，则可以捕获输出：

```
p=Popen( ... )
output=p.communicate()
result=p.wait() 
```

这样您就可以获得命令的返回值并可以捕获文本。如果您需要灵活性，按照[手册](http://docs.python.org/library/subprocess.html)，这是操作子流程的首选方式：

> 该模块中的底层进程创建和管理由 Popen 类处理。它提供了很大的灵活性，以便开发人员能够处理便利功能未涵盖的不太常见的情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-23T20:27:01.933

非常感谢你做的这些。我已对其进行了修改以与 Windows 一起使用。我还设置了一个低超时，所以没有返回的 IP 不会等待每个 5 秒。这是来自 hochl 源代码。

```
import subprocess
import os
with open(os.devnull, "wb") as limbo:
        for n in xrange(200, 240):
                ip="10.2.7.{0}".format(n)
                result=subprocess.Popen(["ping", "-n", "1", "-w", "200", ip],
                        stdout=limbo, stderr=limbo).wait()
                if result:
                        print ip, "inactive"
                else:
                        print ip, "active" 
```

只需更改您的方案的 ip= 和主机的 xrange 即可。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-16T16:53:35.803

我是一个初学者，编写了一个脚本来 ping 多个主机。要 ping 多个主机，您可以使用 ipaddress 模块。

```
import ipaddress
from subprocess import Popen, PIPE

net4 = ipaddress.ip_network('192.168.2.0/24')
for x in net4.hosts():
    x = str(x)
    hostup = Popen(["ping", "-c1", x], stdout=PIPE)
    output = hostup.communicate()[0]
    val1 = hostup.returncode
 if val1 == 0:
    print(x, "is pinging")
 else:
    print(x, "is not responding") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T01:11:44.053

要一次 ping 多个主机，您可以使用`subprocess.Popen()`：

```
#!/usr/bin/env python3
import os
import time
from subprocess import Popen, DEVNULL

p = {} # ip -> process
for n in range(1, 100): # start ping processes
    ip = "127.0.0.%d" % n
    p[ip] = Popen(['ping', '-n', '-w5', '-c3', ip], stdout=DEVNULL)
    #NOTE: you could set stderr=subprocess.STDOUT to ignore stderr also

while p:
    for ip, proc in p.items():
        if proc.poll() is not None: # ping finished
            del p[ip] # remove from the process list
            if proc.returncode == 0:
                print('%s active' % ip)
            elif proc.returncode == 1:
                print('%s no response' % ip)
            else:
                print('%s error' % ip)
            break 
```

如果您可以以 root 身份运行，则可以使用[纯 Python ping 脚本](https://stackoverflow.com/a/317206/4279)或[`scapy`](http://www.secdev.org/projects/scapy/doc/usage.html#icmp-ping)：

```
from scapy.all import sr, ICMP, IP, L3RawSocket, conf

conf.L3socket = L3RawSocket # for loopback interface
ans, unans = sr(IP(dst="127.0.0.1-99")/ICMP(), verbose=0) # make requests
ans.summary(lambda (s,r): r.sprintf("%IP.src% is alive")) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-22T05:27:30.873

Python 实际上有一个非常好的[方法](https://docs.python.org/3/library/ipaddress.html)，它会“在网络中的可用主机上返回一个迭代器”。（将 strict 设置为 false 会遍历所有 IP）

例如：

```
import subprocess
import ipaddress

subnet = ipaddress.ip_network('192.168.1.0/24', strict=False)
for i in subnet.hosts():
    i = str(i)
    subprocess.call(["ping", "-c1", "-n", "-i0.1", "-W1", i]) 
```

等待间隔 (-i0.1) 可能对自动化很重要，即使是一秒超时 (-t1) 也可能永远超过 .0/24

**编辑**：所以，为了跟踪 ICMP（ping）请求，我们可以这样做：

```
#!/usr/bin/env python

import subprocess
import ipaddress

alive = []
subnet = ipaddress.ip_network('192.168.1.0/23', strict=False)
for i in subnet.hosts():
    i = str(i)
    retval = subprocess.call(["ping", "-c1", "-n", "-i0.1", "-W1", i])
    if retval == 0:
        alive.append(i)
for ip in alive:
    print(ip + " is alive") 
```

这将返回如下内容：

```
192.168.0.1 is alive
192.168.0.2 is alive
192.168.1.1 is alive
192.168.1.246 is alive 
```

即所有响应 ICMP 的 IP 都在整个 /23 范围内——非常酷！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-12T07:29:30.327

```
import subprocess
import os
'''
servers.txt contains ip address in following format
192.168.1.1
192.168.1.2
'''
    with open('servers.txt', 'r') as f:
        for ip in f:
            result=subprocess.Popen(["ping", "-c", "1", "-n", "-W", "2",    ip],stdout=f, stderr=f).wait()
            if result:
                print(ip, "inactive")
            else:
                print(ip, "active") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-02T23:56:34.677

```
import subprocess,os,threading,time
from queue import Queue
lock=threading.Lock()
_start=time.time()
def check(n):
    with open(os.devnull, "wb") as limbo:
                ip="192.168.21.{0}".format(n)
                result=subprocess.Popen(["ping", "-n", "1", "-w", "300", ip],stdout=limbo, stderr=limbo).wait()
                with lock:                    
                    if not result:
                        print (ip, "active")                    
                    else:
                        pass                        

def threader():
    while True:
        worker=q.get()
        check(worker)
        q.task_done()
q=Queue()

for x in range(255):
    t=threading.Thread(target=threader)
    t.daemon=True
    t.start()
for worker in range(1,255):
    q.put(worker)
q.join()
print("Process completed in: ",time.time()-_start) 
```

我认为这会更好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-12T20:25:29.827

我在 python 2.7 中使用多线程对上述代码进行了一些修改：

```
import subprocess,os,threading,time
import Queue

lock=threading.Lock()
_start=time.time()
def check(n):
    with open(os.devnull, "wb") as limbo:
                ip=n
                result=subprocess.Popen(["ping", "-n", "2", "-w", "300", ip],stdout=limbo, stderr=limbo).wait()
                with lock:
                    if not result:
                        print ip, "active"
                    else:
                        print ip, "Inactive"

def threader():
    while True:
        worker=q.get()
        check(worker)
        q.task_done()
q = Queue.Queue()

for x in range(255):
    t=threading.Thread(target=threader)
    t.daemon=True
    t.start()

ip = ["13.45.23.523", "13.35.23.523","23.23.56.346"]
for worker in ip:
    q.put(worker)
q.join()
print("Process completed in: ",time.time()-_start) 
```

# java - java.lang.NoClassDefFoundError: org/w3c/tidy/Tidy，Maven 项目

> ID：12101240
> 
> 赞同：1
> 
> 时间：2012-08-23T23:09:59.817
> 
> 标签：java, jakarta-ee, maven-2

我正在尝试从命令提示符运行在 Maven 2 中构建的 java 应用程序

在命令提示符下，我做了“mvn package”并在应用程序的目标文件夹中获取了 jar

然后我做了：-

java -cp 目标/TempestApp.jar foo.App

我得到了例外： -

```
Exception in thread "main" java.lang.NoclassDefFoundError: org/w3c/tidy/Tidy
      at foo.htmltoxml.HtmlToXMLConvertor(htmltoxml.java:29)
      at foo.app.main(App.java:35) 
```

该应用程序包含一个 JTidy。POM.xml 中提到了谁的依赖关系

应用程序在 Eclipse 中运行良好，但不能从命令提示符运行。

我什至尝试将 JTidy jar 放在类路径变量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:11:27.320

您可以让 maven 使用类路径中的所有 jar 启动您的应用程序。使用`exec-maven-plugin`.

将此添加到您的`pom.xml`：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <mainClass>com.company.package.YourApplicationMain</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后，当您想在同一命令中构建和执行时：

```
mvn package exec:java 
```

如果您只想运行应用程序：

```
mvn exec:java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:06:37.000

有两种选择：

`java -cp /path/to/jitidy.jar;target/TempestApp.jar TempestMainClass`

或者

`java -cp /path/to/jitidy.jar -jar target/TempestApp.jar`

如果 MainClass 在 Manifest.mf 中设置

清单.mf

... 主类：package.to.your.MainClass <- NEWLINE！！！

# git - 如何让 p4merge 识别由 `git cherry-pick` 引起的冲突，就像使用 `git merge` 一样？

> ID：12101245
> 
> 赞同：1
> 
> 时间：2012-08-23T23:10:45.270
> 
> 标签：git, merge, cherry-pick, mergetool

我遵循这个[部分地用 git 挑选提交](https://stackoverflow.com/questions/1526044/partly-cherry-picking-a-commit-with-git) 来挑选仅对某些文件的更改。

在挑选之后，一些文件发生了冲突，即文件有如下部分：

```
<<<<<<<<<<<<
>>>>>>>>>>>> 
```

通常使用 git merge，我使用我心爱的 p4merge 来解决冲突，非常直观且无错误。

但是使用cherry-pick，当我使用git mergetool时，它说不需要合并，尽管文件`<<<<<<`中有。所以我不得不手动编辑和解决冲突。

那么我怎么能让 git 知道存在冲突呢？

谢谢杨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:56:56.343

如果`git cherry-pick`由于冲突而停顿，则射击`git mergetool`将弥补冲突；这并不意味着其他地方出了问题，并且 Git 以某种方式决定冲突已经解决。

如果您运行`git blame -L '/^<<<</,/^>>>>/' -- {filename}`，它将在更改标记之间注释您的文件，显示这些合并标记的引入位置。有两种可能：

*   更改标记被标记为“尚未提交”。在这种情况下，Git 以某种方式确定文件已经被合并，要么是由于调用失败`git mergetool`，要么是可疑调用`git add`.

    我知道从中恢复的唯一方法是中止樱桃选择（使用`git cherry-pick --abort`）并重试，但可能有更好的选择。

*   更改标记标有特定的提交。在这种情况下，有人对他们的提交很傻。如果您查看给出的提交，它应该会告诉您提交的人以及提交的内容；您可以通过查看它的来源并重新解决来恢复。

# vba - 有什么方法可以在 DAO 和 MS Access 中使用长文本（备忘录）参数？

> ID：12101247
> 
> 赞同：5
> 
> 时间：2012-08-23T23:10:48.983
> 
> 标签：vba, ms-access, parameters, dao, ms-access-2010

我已经到处搜索了这方面的信息，似乎 Access 中的 DAO 参数被限制为 255 个字符。

真的吗？仍然？即使在 Office 2010 中？这似乎很荒谬。我不想切换到 ADO，但在这一点上，我似乎不得不这样做。

在使用 DAO 和 VBA 代码的同时，有什么办法可以解决这个问题吗？

是否有任何方法允许在长度超过 255 个字符的查询中使用命名参数，DAO 或其他？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T23:14:19.520

恐怕您的选择是动态 sql、记录集或 ADO。

[访问规范 2010](http://office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx)

据我从测试中得知，2013 年也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:34:47.540

我曾经在 access 2000 中做过这个，包括 sql 语句中 memo 字段的内容，而不是作为参数。为了做到这一点，我必须首先对备忘录字段进行预处理，以复制备忘录中的每个 "。

希望能帮助到你。

# sql-server - 对所有数据库中的所有表运行操作

> ID：12101258
> 
> 赞同：2
> 
> 时间：2012-08-23T23:12:09.683
> 
> 标签：sql-server, sp-msforeachdb

我正在尝试创建一个 SQL Server 脚本，该脚本将一些操作应用于所有数据库中的所有表。如果遵守某些条件，我需要重命名一些表，否则截断表。

这是我的脚本

```
EXEC sp_MSforeachdb
@command1 = '
IF not exists(select 1 where ''?'' in (''master'',''model'',''msdb'',''tempdb''))
EXEC [?].dbo.sp_MSforeachtable
@command1 = ''
IF(substring(&, 1, 3)=pv_ and right(&, 5) != _data and right(&, 4) != _BCK)
       exec sp_RENAME & , &_BCK''
ELSE IF (right(&, 4) != _BCK)
       TRUNCATE  TABLE &
@replacechar = ''&''' 
```

我遇到了一些错误，但我是 SQL Server 的新手，我不知道如何修复这个脚本。

有什么建议么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:20:37.417

这是开始的解决方案。它不会很快，但它会循环服务器上所有数据库的所有表。在第二个光标内，您可以决定如何处理表格。

（查询没有优化，只是一个快速的解决方案）

```
DECLARE @DBName NVARCHAR(50)
DECLARE @TableName NVARCHAR(100)
DECLARE @DynamicSQL NVARCHAR(300)

DECLARE @DBCursor CURSOR
SET @DBCursor = CURSOR FOR
 SELECT NAME FROM SYS.DATABASES
 WHERE NAME NOT IN ('master','tempdb','model','msdb')

OPEN @DBCursor
FETCH NEXT FROM @DBCursor INTO @DBName

WHILE @@FETCH_STATUS = 0
 BEGIN

 CREATE TABLE #TempTableDatas
 (
 name varchar(100),
 objectID int
 )

  SET @DynamicSQL = 'INSERT INTO #TempTableDatas
  SELECT name, object_id FROM [' + @DBName + ']' + '.sys.Tables '
  EXEC SP_EXECUTESQL @DynamicSQL

    DECLARE @TableCursor CURSOR
    SET @TableCursor = CURSOR FOR
     SELECT name FROM #TempTableDatas

      OPEN @TableCursor
      FETCH NEXT FROM @TableCursor INTO @TableName
      WHILE @@FETCH_STATUS = 0
      BEGIN

        SELECT @TableName, @DBName

       FETCH NEXT FROM @TableCursor INTO @TableName
      END

    CLOSE @TableCursor
    DEALLOCATE @TableCursor 
    DROP TABLE #TempTableDatas
  FETCH NEXT FROM @DBCursor INTO @DBName
 END

CLOSE @DBCursor
DEALLOCATE @DBCursor 
```

# javascript - jquery csv函数，如何返回一个值？

> ID：12101271
> 
> 赞同：1
> 
> 时间：2012-08-23T23:14:02.057
> 
> 标签：javascript, jquery, ajax

我有以下代码。我可以调用函数“titlename”并执行 StatList 函数来读取 CSV 文件。但是我无法返回任何值。通过在线浏览我发现这个问题可能与 Ajax 有关，但我不知道 Ajax。我想在以下示例中返回“titles”变量。

```
function titlename(title_number)
{   
    jQuery.get('TitleName.csv', function StatList(data) 
    { 
            var titles = new Array();
        var title_array = jQuery.csv(undefined, undefined, '\r\n')(data);
        for (var i=0; i<title_number.length; i++){
            for (var j = 1; j< title_array.length; j++)
            {
                var tmp_compare = title_array[j].slice(0,title_array[j].length-1);
                if(tmp_compare.toString() == title_number[i]){
                    var title = title_array[j][(title_array[j].length-1)];
                    //console.log(title);
                    titles.push(title);
                    break;
                }
            }
        }
        return titles;
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:28:04.573

由于 AJAX 是异步的，因此您不能简单地从对`titlename`. 一旦信息到达，您可以使用该信息调用另一个函数并将您想要获取的数据作为参数传递。您可以在现场处理数据，也可以在您运行的函数中处理它。出于演示目的，我将保留您的代码。

下面是一个潜在的下一步示例：

```
var handleTitleData = function(titles){
     // Do whatever you want now that you have the titles
}
var titlename = function(title_number){   
    jQuery.get('TitleName.csv', function StatList(data){
         var titles = new Array();
         var title_array = jQuery.csv(undefined, undefined, '\r\n')(data);
         for (var i=0; i<title_number.length; i++){
             for (var j = 1; j< title_array.length; j++){
                 var tmp_compare = title_array[j].slice(0,title_array[j].length-1);
                 if(tmp_compare.toString() == title_number[i]){
                     var title = title_array[j][(title_array[j].length-1)];
                     titles.push(title);
                     break;
                 }
             }
         }
         handleTitleData(titles);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T23:30:57.730

正如其他人所说，当您调用异步函数时，JavaScript 将继续其正常执行，*而无需等待*它完成，因此它会在`titles`定义之前返回。为了得到异步调用的结果，可以使用一个[`$.Deferred`](http://api.jquery.com/category/deferred-object/)对象：

```
function titlename(title_number) {   
    return jQuery.get('TitleName.csv').pipe(function (data) { 
        var titles = new Array();
        var title_array = jQuery.csv(undefined, undefined, '\r\n')(data);
        for (var i=0; i<title_number.length; i++) {
            for (var j = 1; j< title_array.length; j++) {
                var tmp_compare = title_array[j].slice(0,title_array[j].length-1);
                if(tmp_compare.toString() == title_number[i]){
                    var title = title_array[j][(title_array[j].length-1)];
                    //console.log(title);
                    titles.push(title);
                    break;
                }
            }
        }
        return titles;
    });
}

titlename([1,2,3]).done(function(titles) {
  // do what you want with the returned titles
}).fail(function() {
  // deal with a failure in getting the .csv
}); 
```

# exception - Best way to Handle Exceptions in C# Catch Block

> ID：12101284
> 
> 赞同：1
> 
> 时间：2012-08-23T23:16:29.913
> 
> 标签：exception, exception-handling, try-catch

Best way to Handle Exceptions in C# Catch Block.I have no other choice but to Log the error to SQL DB in Catch block.Howver i am wondering what is the best way to catch exception if caught in Catch block itself?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:16:17.547

我将创建一个单独的类来处理错误报告，并公开一个函数来处理在数据库中记录错误。
我发现本指南很有用：

[http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

我过去使用的一些代码如下所示：

```
try{
    throw;
}
catch(Exception ex){
    LoggingClass.LogError(some paramaters,ex.tostring());
} 
```

然后你的日志记录类可能看起来像

```
public static class LoggingClass {

    public static void LogError(some paramaters, ex.tostring()){

        //try to log to database

        //catch and report error in some other way
    }

} 
```

过去我使用这篇文章作为参考，因为我喜欢记录到文本文件（在发生数据库错误时）然后向用户显示“好”消息的想法。

[C# 最佳实践错误处理和传递错误消息](https://stackoverflow.com/questions/1448025/c-sharp-best-practice-error-handling-and-passing-error-messages)

# postgresql - How to lock tables with SQL Alchemy (PostgreSQL)?

> ID：12101287
> 
> 赞同：3
> 
> 时间：2012-08-23T23:17:20.230
> 
> 标签：postgresql, concurrency, sqlalchemy

I'm using session with a room reservation app that uses SQL Alchemy. The app until now works fine, but, I tested with 2 persons using it at the same time, using different user accounts, and the reserves can be done at the same room, and hour of the day.

This didn't happen when using just one account, i tested the room check code a lot, so must be a concurrency problem (both users use the check when is empty and the make it). I'm using PostgreSQL as DBMS, is there a way lock the table while making the commit to the DB and then unlock it when it's done??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:42:00.057

这正是发明[排除约束的那种情况。](http://www.postgresql.org/docs/9.0/static/sql-createtable.html#SQL-CREATETABLE-EXCLUDE)当 9.2 发布时，您将能够将它们与[timestamptz 范围](http://www.postgresql.org/docs/9.2/static/rangetypes.html)一起使用；对于 9.0 和 9.1 版本，您需要安装[temporal](http://pgfoundry.org/projects/temporal)和[btree_gist](http://www.postgresql.org/docs/9.0/static/btree-gist.html)模块。

有关更多信息，请参阅[Jeff Davis 的这篇博客文章](http://thoughts.davisjeff.com/2010/09/25/exclusion-constraints-are-generalized-sql-unique/)，他提出了这个想法并实施了它。

# outlook - Get MailItem Recipient using Redemption.ISafeMailItem object

> ID：12101289
> 
> 赞同：1
> 
> 时间：2012-08-23T23:17:23.910
> 
> 标签：outlook, c#-2.0, outlook-addin, outlook-redemption

I am writing simple Outlook program in C# which records MailItem’s Recipients for sent mail. To build that I am hooking into Outlook Mailitem `Send` event to get `Recipient` collection. Also to avoid Outlook security prompt I am using Redemption `SafeMailItem`.

For reading `Recipient` collection I am assigning `MailItem` to `SafeMailItem` and read `Recipients`. However `Recipient` collection won’t be same if `MailItem` has unsaved changes. In order to copy `Recipient` collection, `MailItem` requires to be saved and then access via Redemption `SafeMailItem`.

### Here is example.

```
//event handler
void _MailItemSend(ref bool Cancel)
{
    SafeMailItem safeMailItem = (SafeMailItem)Activator.CreateInstance(Type.GetTypeFromProgID(RDOCustomClasses.SafeMailItem));
    SafeRecipients recipients = null;

    safeMailItem.Item = mailItem; // Assigning original mailItem which getting sent by outlook without saving it (just compose & send email before it get autosaved by outlook or manually)
    recipients = safeMailItem.Recipients

    // If mailItem have unsaved changes safeMailItem.Recipients will be different. 
    recipients.Count != mailItem.Recipients.Count;
} 
```

So I believe calling `Save()` makes sense but I am not changing anything and calling `Save()` is causing another issue. When I try to quit Outlook it says:

> there are unsaved changes “ do you want to save change”.

I tried accessing directly `Mailitem.Recipients` (*it has latest and unsaved recipient list before mail getting send*) but it creates Outlook security prompt. If I used Redemption it requires call to save before accessing it which creates other issue.

Is there a better way to receive Outlook **Sent Mail Recipients** in safe manner without modification ? Your suggestion will be appreciated.

# python - 如何使用 django 在生产服务器上修复模板不存在错误？

> ID：12101290
> 
> 赞同：2
> 
> 时间：2012-08-23T23:17:40.593
> 
> 标签：python, django, templates, settings, production

**更新：见自我回答。进行更改时，我未能重新启动 apache。**

当我尝试在生产服务器中运行我的 django 应用程序时，我收到以下关于查找模板的错误。我相信这与模板的存储位置有关；我已经更改了设置文件中的目录，但我想我可能错过了另一个地方。

我试图找到引用“C:/django/booking/reserve”的位置，因为这是给出的路径，但我似乎无法弄清楚在哪里。有什么建议吗？

```
Exception Type: TemplateDoesNotExist
Exception Value:    reserve/templates/index.html
Exception Location: /home/sharataka/webapps/django/lib/python2.7/django/template/loader.py in find_template, line 138
Python Path:    ['/home/sharataka/webapps/django',
 '/home/sharataka/webapps/django/booking',
 '/home/sharataka/webapps/django/reserve',
 '/home/sharataka/webapps/django/lib/python2.7',
 '/home/sharataka/lib/python2.7/South-0.7.5-py2.7.egg',
 '/home/sharataka/lib/python2.7/pip-1.1-py2.7.egg',
 '/home/sharataka/lib/python2.7/django_debug_toolbar-0.9.4-py2.7.egg',
 '/home/sharataka/lib/python2.7',
 '/usr/local/lib/python27.zip',
 '/usr/local/lib/python2.7',
 '/usr/local/lib/python2.7/plat-linux2',
 '/usr/local/lib/python2.7/lib-tk',
 '/usr/local/lib/python2.7/lib-old',
 '/usr/local/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/site-packages',
 '/usr/local/lib/python2.7/site-packages/PIL']

Django tried loading these templates, in this order:
•   Using loader django.template.loaders.filesystem.Loader:
o   /home/sharataka/C:/django/booking/reserve/templates/index.html (File does not exist 
```

# 设置.py

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

STATIC_ROOT = '/webapps/django/'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    "/webapps/django",
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:28:50.643

当我进行更改时，我未能重新启动 apache...我是 django 菜鸟 :)

# android - 单击按钮时如何显示随机活动

> ID：12101292
> 
> 赞同：1
> 
> 时间：2012-08-23T23:17:56.647
> 
> 标签：android

我在主要活动中使用了以下代码

```
public void button(View v){

         //Create an intent to start the new activity.
            // Our intention is to start secondActivity
         Intent intent = new Intent();
         intent.setClass(this,Activity.class);
         startActivity(intent);
        } 
```

单击按钮时如何显示随机活动？请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:25:55.027

调试了上面的一些代码，因为 setClass() 中存在错误。这个有效：

```
Random rnd = new Random();
int x=rnd.nextInt(3)+1;
Intent myIntent = new Intent();
switch(x){
case 1:
myIntent.setClass(view.getContext(),Scrn1.class);
break;
case 2:
myIntent.setClass(view.getContext(), Scrn2.class);
break;
case 3:
myIntent.setClass(view.getContext(), Scrn1.class);
break;
}
startActivity(myIntent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T01:00:22.590

将所有活动的名称存储在一个数组中，生成随机数并获取与随机生成的数字对应的活动。示例片段

```
 String[] title = new String[] { "Act1.class", "Act2.class","Act1.class","Act4.class","Act5.class"};

public String getRandomActivity(){
    Random randomGenerator = new Random();
            int randomInt = randomGenerator.nextInt(5);// pass number of elements as parameters
        return title[randomInt-1];//this should return class name

        }

Intent intent = new Intent(this,getRandomActivity())
startActivity(intent) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:30:21.563

试试这个，假设你有 3 个活动：

```
public void button(View v){
Random rnd = new Random();
int x=rnd.nextInt(3)+1;
         Intent intent = new Intent();
switch(x){
 case 1:
  intent.setClass(this,Activity1.class);
  break;
 case 2:
  intent.setClass(this,Activity2.class);
  break;
 case 3:
  intent.setClass(this,Activity3.class);
  break;
 }
 startActivity(intent);        
} 
```

# java - 放心 - 不能 POST 带有参数和正文

> ID：12101297
> 
> 赞同：14
> 
> 时间：2012-08-23T23:18:26.810
> 
> 标签：java, rest, rest-assured

我正在使用 Rest Assured 测试 REST api。尝试使用 url 和正文内容中的参数进行 POST 时遇到错误。这在手动测试时可以正常工作。从 url 中删除参数不是一个选项

测试代码：

```
String endpoint = http://localhost:8080/x/y/z/id?custom=test;
String body = "[{\"boolField\":true,\"intField\":991},
                {\"boolField\":false,\"intField\":998}]";
expect().spec(OK).given().body(body).post(endpoint); 
```

运行时会引发以下错误

```
You can either send parameters OR body content in the POST, not both!

java.lang.IllegalStateException: You can either send parameters OR body content in the POST, not both!
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:77)
at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:102)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:198)
at com.jayway.restassured.internal.RequestSpecificationImpl.sendRequest(RequestSpecificationImpl.groovy:282)
at com.jayway.restassured.internal.RequestSpecificationImpl.this$2$sendRequest(RequestSpecificationImpl.groovy)
at com.jayway.restassured.internal.RequestSpecificationImpl$this$2$sendRequest.callCurrent(Unknown Source)
at com.jayway.restassured.internal.RequestSpecificationImpl.post(RequestSpecificationImpl.groovy:83)
... 
```

为什么 Rest Assured 不允许在 POST 中同时使用参数和正文内容？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-28T06:26:49.537

您需要将参数指定为 queryParameter 而不是“param”或​​“parameter”。POST 的参数将默认为在请求正文中发送的表单参数。

IE

```
given().
        queryParam("name, "value").
        body(..).
when().
        post(..); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:25:42.673

我对rest-assured不太熟悉，但是您应该能够将这些参数移动到body上。这就是典型的 POST 参数的工作方式。将参数作为请求 URL 的一部分通常仅用于 GET。也许尝试将“custom = test”作为正文的第一行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T06:34:00.147

您必须将参数指定为 queryParam。这是示例：

```
RequestSpecification request=new RequestSpecBuilder().build();
ResponseSpecification response=new ResponseSpecBuilder().build();
@Test
public void test(){
  User user=new User();
  given()
  .spec(request)
  .queryParam(query_param1_name, query_param1_name_value)
  .queryParam(query_param2_name, query_param2_name_value)
  .contentType(ContentType.JSON)
  .body(user)
  .post(API_ENDPOINT)
  .then()
  .statusCode(200).log().all(); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T18:25:47.490

在我看来没有通过

```
.header("Content-Type", "application/json") 
```

在正文之后，您的呼叫将产生状态码 415

# mysql - GROUP_CONCAT a select statement

> ID：12101298
> 
> 赞同：3
> 
> 时间：2012-08-23T23:18:52.620
> 
> 标签：mysql, sql, database

So here's the SQL I have

```
SELECT c.name AS 'name',
  COUNT(sc.condition_id) AS 'conditions_count'
FROM reviews r, strain_conditions sc
LEFT JOIN conditions c ON sc.condition_id = c.id
WHERE sc.strain_id = 1 && sc.review_id = r.id && r.moderated = 1
GROUP BY sc.condition_id
ORDER BY conditions_count DESC
LIMIT 3; 
```

Which returns

```
+---------------+------------------+
| name          | conditions_count |
+---------------+------------------+
| Fiber Myalgia |                2 |
| Anxiety       |                2 |
| ADHD          |                1 |
+---------------+------------------+ 
```

What I need to do is GROUP_CONCAT the name results so my end result is simply

"Fiber Myalgia, Anxiety, ADHD"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:22:01.637

您需要嵌套选择，因为它`LIMIT`应该只适用于子查询。

```
SELECT GROUP_CONCAT(name) AS name
FROM
(
    SELECT c.name AS name
    FROM reviews r, strain_conditions sc
    LEFT JOIN conditions c ON sc.condition_id = c.id
    WHERE sc.strain_id = 1 && sc.review_id = r.id && r.moderated = 1
    GROUP BY sc.condition_id
    ORDER BY conditions_count DESC
    LIMIT 3  
) AS T1 
```

如果您希望它们按降序排列，您应该`ORDER BY`在`GROUP_CONCAT`.

```
SELECT GROUP_CONCAT(name ORDER BY conditions_count DESC) AS name
FROM
(
     -- your query here
) AS T1 
```

如果您还想要逗号后的空格，请使用`SEPARATOR`：

```
SELECT GROUP_CONCAT(name ORDER BY conditions_count DESC SEPARATOR ', ') AS name
FROM
(
     -- your query here
) AS T1 
```

有关更多详细信息，请参阅 的手册页[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T23:22:41.373

将其包装在子查询中。尝试这个，

```
SELECT GROUP_CONCAT(f.name) as `name`
FROM
(
    SELECT c.name AS 'name',
           COUNT(sc.condition_id) AS 'conditions_count'
    FROM reviews r, strain_conditions sc
    LEFT JOIN conditions c ON sc.condition_id = c.id
    WHERE sc.strain_id = 1 && sc.review_id = r.id && r.moderated = 1
    GROUP BY sc.condition_id
    ORDER BY conditions_count DESC
    LIMIT 3
) f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:22:46.870

您需要将其放在子选择中：

```
SELECT GROUP_CONCAT(name) AS name
FROM
(
  SELECT c.name AS 'name',
    COUNT(sc.condition_id) AS 'conditions_count'
  FROM reviews r, strain_conditions sc
  LEFT JOIN conditions c ON sc.condition_id = c.id
  WHERE sc.strain_id = 1 && sc.review_id = r.id && r.moderated = 1
  GROUP BY sc.condition_id
  ORDER BY conditions_count DESC
  LIMIT 3
) x 
```

# javascript - Website scrolls bby following mouse

> ID：12101300
> 
> 赞同：0
> 
> 时间：2012-08-23T23:19:23.720
> 
> 标签：javascript

> **Possible Duplicate:**
> [Body scroll with mouse position?](https://stackoverflow.com/questions/11913229/body-scroll-with-mouse-position)

I am currently working on a website that revolves around the idea of a cartoon room, and the user clicks on different objects in the room to bring up information. However, I have made the room a specific amount of pixels and sometimes it is too big for a certain resolution, thereby causing scroll bars. I was wondering if there is some javascript/jquery that could follow the mouse cursor so that as the user moves around the room, the whole room moves around with them, and the scroll bars can be hidden. Any ideas what could do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:40:45.833

你当然可以。问题是你是否应该这样做。

你需要css：

```
body, html {
  overflow: hidden;
} 
```

然后你监听 mousemove 事件。示例：[javascript onmousemove 获取相对坐标](https://stackoverflow.com/questions/4657457/javascript-onmousemove-get-relative-coordinates)

然后相应地调整 document.body.scrollTop 和 document.body.scrollLeft。

这是一个 jQuery 示例：[Body scroll with mouse position?](https://stackoverflow.com/questions/11913229/body-scroll-with-mouse-position)

另一个例子：[正确使用onmousemove](https://stackoverflow.com/questions/7439420/proper-use-of-onmousemove)

# r - simple integration

> ID：12101301
> 
> 赞同：3
> 
> 时间：2012-08-23T23:19:25.537
> 
> 标签：r

```
 constant <- function(x){1}

 integrate(constant,lower=1,upper=10) 
```

this is probably more than ridiculously simple, but any reason as to why this isn't working?

is there a different way I should be writing the function for constants?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T23:34:38.443

您可以使用该`Vectorize`函数将非矢量化函数转换为`integrate`需要的函数类型：

```
> constant <- function(x){1}
> Vconst <- Vectorize(constant)
>  integrate(Vconst,lower=1,upper=10)
9 with absolute error < 1e-13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T23:29:12.693

来自`?integrate`：

> 一个 R 函数，采用数字第一个参数并返回相同长度的数字向量。返回非有限元素将产生错误。

您需要返回一个与 x 长度相同的向量。尝试：

```
constant <- function(x){rep(1,length(x))} 
```

# javascript - 如何在 jQuery.css() 方法中为所有浏览器编写 CSS？

> ID：12101302
> 
> 赞同：2
> 
> 时间：2012-08-23T23:19:25.327
> 
> 标签：javascript, jquery, json, dom, css

我正在添加一个需要多浏览器 CSS 的动态渐变；如果针对一个浏览器它可以工作，甚至如果写在 CSS 文件中也可以工作，但是在 jquery 中使用 .css() 方法它无法加载背景。要了解我在这里尝试做的事情是我的代码示例，该示例在添加所有浏览器 CSS 时不起作用......

```
if ($jj(this).scrollTop() > 200 && $el.css('position') != 'fixed'){
            $jj('.fixedElement').css({
                'position': 'fixed', 'top': '0px', 'z-index': '9999',
                'width': '120%','paddingRight': '20%', 'paddingLeft': '20%',
                'marginLeft': '-10%', 'left': '0', 'boxShadow': '0 3px 5px #888888',
                'lineHeight': '100%',
                'background': '#00172A',
                'background': '-moz-linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'background': '-o-linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'background': '-webkit-gradient(linear, left top, left bottom, color-stop(80%,#00172A), color-stop(100%,#2F71B3))',
                'background': '-webkit-linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'background': '-ms-linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#00172A\', endColorstr=\'#2F71B3\',GradientType=0 )',
                'background': 'linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'color': '#ffffff'
            }); 
```

在使用单个“后台”调用时，它将在所选浏览器中工作，例如这在 Firefox 中工作......

```
if ($jj(this).scrollTop() > 200 && $el.css('position') != 'fixed'){
            $jj('.fixedElement').css({
                'position': 'fixed', 'top': '0px', 'z-index': '9999',
                'width': '120%','paddingRight': '20%', 'paddingLeft': '20%',
                'marginLeft': '-10%', 'left': '0', 'boxShadow': '0 3px 5px #888888',
                'lineHeight': '100%',
                'background': '-moz-linear-gradient(top, #00172A 80%, #2F71B3 100%)',
                'color': '#ffffff'
            }); 
```

[您可以在http://www.thediabetesnetwork.com](http://www.thediabetesnetwork.com)上找到实时代码。 **编辑：通过从 json 对象中删除 css 并使用 jquery api 来修复。请注意调用是如何包装在 json 括号中并使用 json 语法的。这就是问题所在。现在看起来像这样。**

```
if ($jj(this).scrollTop() > 200 && $el.css('position') != 'fixed'){
            $jj('.fixedElement').css('background', 'linear-gradient(top, #00172A 80%, #2F71B3 100%)');
            $jj('.fixedElement').css('background', '-ms-linear-gradient(top, #00172A 80%, #2F71B3 100%)');
            $jj('.fixedElement').css('background', '-moz-linear-gradient(top, #00172A 80%, #2F71B3 100%)');
            $jj('.fixedElement').css('background', '-o-linear-gradient(top, #00172A 80%, #2F71B3 100%)');
            $jj('.fixedElement').css('background', '-webkit-linear-gradient(top, #00172A 80%, #2F71B3 100%)');
            $jj('.fixedElement').css('background', '-webkit-gradient(linear, left top, left bottom, color-stop(80% #00172A), color-stop(100%,#2F71B3))');
            $jj('.fixedElement').css(
                {
                'position': 'fixed',
                'top': '0',
                'z-index': '9999',
                'width': '120%',
                'paddingRight': '20%',
                'paddingLeft': '20%',
                'marginLeft': '-10%',
                'left': '0',
                'boxShadow': '0 3px 5px #888888',
                'lineHeight': '100%',
                'paddingTop': '0',
                'paddingBottom': '0',
                'color': '#ffffff'
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:21:54.133

请参阅此处：[http](http://blog.jquery.com/2012/08/09/jquery-1-8-released/) ://blog.jquery.com/2012/08/09/jquery-1-8-released/您需要做的就是使用`linear-gradient`，jQuery 会自动填充其余部分。

不要忘记安装[CSS Pie](http://css3pie.com/)以在较旧的 IE 中支持渐变。

然而，这确实引发了 jQuery 中 css-pie polyfill 的问题......

# python - not able to undertand cursors in appengine

> ID：12101313
> 
> 赞同：4
> 
> 时间：2012-08-23T23:20:57.877
> 
> 标签：python, google-app-engine

I'm trying to fetch results in a `python2.7` appengine app using cursors, but each time I use `with_cursor()` it fetches the same result set.

```
query = Model.all().filter("profile =", p_key).order('-created')

    if r.get('cursor'):
        query = query.with_cursor(start_cursor = r.get('cursor'))
        cursor = query.cursor()

    objs = query.fetch(limit=10)     
    count = len(objs)

    for obj in objs:
        ... 
```

Each time through I'm getting same 10 results. I'm thinkng it has to do with using `end_cursor`, but how do I get that value if `query.cursor()` is returning the `start_cursor`. I've looked through the docs but this is poorly documented.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:41:05.877

顺便说一句，您的格式有点古怪。查看您的代码（这是不完整的，因此可能会遗漏一些内容。）我不得不假设您在获取结果后忘记存储光标（或返回给用户 - 我假设 r 是一个请求？）。

因此，在您获取一些数据后，您需要在查询中调用 cursor()。例如，此函数使用游标计算所有实体。

```
def count_entities(kind):
    c = None
    count = 0
    q = kind.all(keys_only=True)
    while True:

        if c:
            q.with_cursor(c)
        i = q.fetch(1000)
        count = count + len(i)
        if not i:
            break
        c = q.cursor()
    return count 
```

看看在调用 fetch() 之后是如何`c=q.cursor()`调用的，它在下一次循环中被用作光标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:13:09.973

这是最终奏效的方法：

```
query = Model.all().filter("profile =", p_key).order('-created')

if request.get('cursor'):
    query = query.with_cursor(request.get('cursor'))

objs = query.fetch(limit=10) 
cursor = query.cursor()                

for obj in objs:
    ... 
```

# php - Deprecated : Function split() php error

> ID：12101315
> 
> 赞同：0
> 
> 时间：2012-08-23T23:21:19.780
> 
> 标签：php, file, function, directory, split

> **Possible Duplicate:**
> [Deprecated: Function split() is deprecated. How to rewrite this statement?](https://stackoverflow.com/questions/3453915/deprecated-function-split-is-deprecated-how-to-rewrite-this-statement)

I'm getting a Deprecated: function split() is deprecated error on this code.

```
function getFileExt($filename) {
$filename = strtolower($filename) ;
$exts = split("[/\\.]", $filename) ;
$n = count($exts)-1;
$exts = $exts[$n];
return $exts; 
```

I'm meant to rewrite it or something but I have no idea how!

If somebody could help many thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:24:17.220

尝试：

```
function getFileExt($filename) {
    $filename = strtolower($filename) ;
    $exts = explode(".", $filename) ;
    $n = count($exts)-1;
    $exts = $exts[$n];
    return $exts; 
} 
```

同样只是在“。”上使用爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:24:13.093

函数 split 是一个旧函数。您可以使用爆炸来拆分。

[http://www.php.net/explode](http://www.php.net/explode)

# android - ./fastboot: No such file or directory

> ID：12101316
> 
> 赞同：7
> 
> 时间：2012-08-23T23:21:27.073
> 
> 标签：android, linux, ubuntu, fastboot

I've struggled with this for awhile! I'm beating my head against the wall.

I am trying to run fastboot (android-linux-tools/platform-tools/fastboot) and I am getting a `No such file or directory` message.

I am on ubuntu 12.04 x64\. I am not new to linux, I'm baffled.

```
$ cd ~/android-sdk-linux/platform-tools
$ ./fastboot
-bash: ./fastboot: No such file or directory
$ ./adb devices
-bash: ./adb: No such file or directory
$ ls -la
...
-rwxrwxr-x  1 nick nick   159644 Apr 16 21:10 adb
...
-rwxrwxr-x  1 nick nick   149928 Aug 16 21:10 fastboot
... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T02:38:39.570

这是你刚刚下载SDK的新机器吗？由于您运行的是 64 位发行版，请检查您是否安装了 SDK 可执行文件运行所需[的 ia32-libs 包：](http://developer.android.com/sdk/installing/index.html)

> sudo apt-get install ia32-libs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:35:48.150

试试苏。

我对 .android 目录也有同样的问题，即使使用 ls 命令我也看不到它（即使在 su 之后）。在 su 之后我可以在目录中 cd

# c++ - C ++ MFC将文件写入插入的USB驱动器

> ID：12101317
> 
> 赞同：1
> 
> 时间：2012-08-23T23:21:33.080
> 
> 标签：c++, mfc, usb, hid, read-write

我正在使用此[代码](http://www.codeproject.com/Articles/14500/Detecting-Hardware-Insertion-and-or-Removal)来确定 USB 驱动器何时连接到计算机（我想查找某个，如果插入了该驱动器，则程序会执行某些操作）。

我坚持的部分是如何写入该驱动器。如果我使用 CFile 指定文件位置，我如何知道分配给该 USB 驱动器的驱动器号窗口？这就是我的问题所在。我如何写入该 USB 驱动器。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:28:38.303

当您收到有关`WM_DEVICECHANGE`USB 磁盘的消息时，`lParam`将包含指向该[`DEV_BROADCAST_VOLUME`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363249.aspx)结构的指针。确认它`dbcv_devicetype`是之后，`DBT_DEVTYP_VOLUME`您可以查看它的`dbcv_unitmask`成员，其中显示磁盘具有哪些驱动器号。

# c# - 无法使用 C# 中的 HttpWebRequest 将照片上传到 Appcelerator 云服务

> ID：12101339
> 
> 赞同：0
> 
> 时间：2012-08-23T23:24:38.693
> 
> 标签：c#, upload, httpwebrequest, cloud, appcelerator

我正在用 C# 开发一个连接到 Appcelerator 云服务的应用程序，到目前为止，我可以进行查询并创建自定义对象，现在问题是当我尝试在 ACS 中创建照片时。我查看了[这个](https://stackoverflow.com/questions/1874410/webrequest-post-with-both-file-and-parameters)链接并修改了我的代码，如下所示：

```
Image img = pbPhoto.Image;
img.Save(Application.StartupPath + "\\tmp.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); //saving the image temporally in hard drive

url = "https://api.cloud.appcelerator.com/v1/photos/create.json?key=appkey&_session_id=" + session;
HttpWebRequest wrGetUrl = (HttpWebRequest)WebRequest.Create(url);

String boundary = "B0unD-Ary";
wrGetUrl.ContentType = "multipart/form-data; boundary=" + boundary;
wrGetUrl.Method = "POST";

String postData = "--" + boundary + "\nContent-Disposition: form-data\n\n";;
postData += "\n--" + boundary + "\nContent-Disposition: form-data; name=\"file\" filename=\"" + Application.StartupPath + "\\tmp.jpg" + "\"\nContent-Type: image/jpeg\n\n";
byteArray = Encoding.UTF8.GetBytes(postData);

byte[] filedata = null;
using (BinaryReader readerr = new BinaryReader(File.OpenRead(Application.StartupPath + "\\tmp.jpg")))
    filedata = readerr.ReadBytes((int)readerr.BaseStream.Length);

wrGetUrl.ContentLength = byteArray.Length + filedata.Length;
wrGetUrl.GetRequestStream().Write(byteArray, 0, byteArray.Length);
wrGetUrl.GetRequestStream().Write(filedata, 0, filedata.Length);

objStream = wrGetUrl.GetResponse().GetResponseStream();
reader = new StreamReader(objStream); 
```

我试过了，但出现以下错误

> 远程服务器返回错误：(500) 内部服务器错误。

我检查了我的 ACS 日志，但请求没有出现（猜是因为它是 500 错误）。我应该在我的代码中更改什么以上传照片并在 ACS 中创建照片？感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:00:08.123

找到了这个问题的解决方案：

```
byte[] filedata = null;
using (BinaryReader readerr = new BinaryReader(File.OpenRead(pathToImage)))
    filedata = readerr.ReadBytes((int)readerr.BaseStream.Length);
string boundary = "-_1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
Stream stream = request.GetRequestStream();
request.ContentType = string.Format("multipart/form-data; boundary={0}", boundary);
StreamWriter writer = new StreamWriter(stream);   
writer.Write("--");
writer.WriteLine(boundary);
writer.WriteLine(@"Content-Disposition: form-data; name=""{0}""; filename=""{1}""", "your_name", "your_photo_file_name");
writer.WriteLine(@"Content-Type: application/octet-stream");
writer.WriteLine(@"Content-Length: " + filedata .Length);
writer.WriteLine();
writer.Flush();
Stream output = writer.BaseStream;
output.Write(filedata , 0, filedata .Length);
output.Flush();
writer.WriteLine();
writer.Write("--");
writer.Write(boundary);
writer.WriteLine("--");
writer.Flush(); 
```

**编辑：**我改变了将标头写入RequestStream的方式，我编写它的方式不是将图片发送到Appcelerator云服务的正确方式，通过curl发送请求并检查我能够登录的ACS想出正确的标题。

希望这可以帮助任何有类似问题的人。

# cloud-foundry - Cloudfoundry 中具有多租户单数据库插件 URL 实现的 Grails 应用程序

> ID：12101341
> 
> 赞同：0
> 
> 时间：2012-08-23T23:25:08.633
> 
> 标签：cloud-foundry

我目前正在使用实现多租户单数据库插件的 Grails 创建一个 Web 应用程序。该插件允许我在单个数据库上拥有多个租户，使用租户 ID 来区分租户。该插件检测到女巫租户将通过为每个租户使用不同的域/子域解析来处理在我的应用程序上发出的当前请求。

例如：

*   租户 1 = companyA.myapp.com
*   租户 2 = companyB.myapp.com

在我运行 Grails 开发模式的本地机器上，我能够通过更改我的 /etc/hosts 来实现不同的主机，并且每个租户都有自己的子域。

我目前有兴趣使用 Cloud Foundry 作为我的云平台，但是当我将我的应用程序部署到 Cloud Foundry 时，它已经使用我的应用程序名称作为 Cloud Foundry 的子域。

例如： - myapp.cloudfoundry.com

1.  是否可以更改或控制 Cloud Foundry 中的域名解析器？
2.  有人知道如何处理上面在云铸造中解释的多租户子域吗？可能提供使用云代工实现这一点的步骤？
3.  使用云代工来实现这一点的最佳方法是什么？

我的应用程序使用 Grails 2.0.4 和多租户单数据库插件 0.8.2。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:22:21.520

不幸的是，当前的测试版 CloudFoundry 不允许修改 cloudfoundry 子域。计划是在今年年底推出 GA，并在秋季早些时候提供该网站版本的私人预览版。那时您可以自定义子域。因此，您可能需要在 TenantResolver 中进行一些更改，以仅检查变化的子域。

为了实现您的要求，您是否尝试安装 grails cf 插件？如果没有，你可以从[这里](http://grails.org/plugin/cloud-foundry)开始。

如果您使用的是 cli，安装插件只需要在项目工作区中的命令：

```
grails install-plugin cloud-foundry 
```

当您的应用准备好部署时，将其推送到 cloudfoundry：

```
grails cf-push 
```

请注意，您必须在 grails 配置文件中配置您的 cf 凭据。之后，您可以映射您想要使用的多个 URL：

```
grails cf-map user1.yourapp.cloudfoundry.com 
```

如果您已经知道 vmc 是 cf 的客户端命令行界面，您可以通过以下方式查看与您的应用程序映射的 url

```
vmc apps 
```

如果没有，您可以参考[安装指南](http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html)开始，如果您想这样做。

如果您使用的是 STS/eclipse，事情会更容易。首先，您需要安装 grails-support 扩展以及云代工集成。有关 cf 集成的详细文档，请参阅[此处](http://docs.cloudfoundry.com/tools/STS/sts-eclipse.html)。

部署应用程序后，右键单击项目并选择“Grails 工具”->“打开 Grails 命令提示符”。这将使您能够拥有与 CLI 相同的 grails cf 插件命令。

希望这可以帮助您在 Cloudfoundry 世界中前进。如果您有更多问题，请告诉我。

谢谢，威廉

# django - 基于 cookie 在两台服务器之间路由流量

> ID：12101342
> 
> 赞同：2
> 
> 时间：2012-08-23T23:25:11.580
> 
> 标签：django, cookies, nginx, url-routing

我们目前正在重写一个生产中的 Django 站点。我们希望将新站点与旧站点并行部署，并使用以下方案将流量从旧站点缓慢转移到新站点：

*   新帐户转到新站点
*   现有帐户转到旧网站
*   现有帐户可能有机会选择加入新网站
*   转移到新站点的帐户可能会选择退出并返回到旧站点

我很清楚这涉及到一个 cookie，并且 Nginx 能够基于 cookie 重写请求：

*   [如果 cookie 存在，Nginx 重定向](https://stackoverflow.com/questions/2936329/nginx-redirect-if-cookie-present)
*   [如何在同一域后面运行两个 Rails 应用程序并根据 cookie 进行 nginx 路由请求？](https://stackoverflow.com/questions/6718264/how-do-i-run-two-rails-apps-behind-the-same-domain-and-have-nginx-route-requests)

cookie 是如何设置的对我来说仍然是一个谜。这似乎是一个先有鸡还是先有蛋的问题。有没有人成功运行过这样的计划？你是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:14:43.680

我认为最适合您的问题的解决方案是：

1.  Nginx 在每次请求时都应该检查一些特定的 cookie，`route`
2.  如果它出现并且 equals `old`，请求转到一个`old`站点
3.  否则请求转到该`new` 站点。
4.  每个站点（新旧站点）都应检查该 cookie 的请求 ( `route`)
5.  如果 cookie 未显示（或错误），您的应用应将其设置为正确的值，如果请求是针对该站点的，则继续执行。
6.  如果不是，它应该发送`redirect`，我们从 step 重新开始`1`

# javascript - 来自 jqgrid 自定义格式化程序的 cellUpdate

> ID：12101344
> 
> 赞同：0
> 
> 时间：2012-08-23T23:25:34.490
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqgrid 并尝试从 web 服务请求数据，对其进行解析，并使用该值更新网格单元格。我希望能够使用自定义格式化程序来执行此操作，但我无法连接此函数异步部分的点。

我也准备好使用 gridLoaded { } 调用这种类型的功能可能更明智，但在我看来，我下面的代码应该可以工作......

调用格式化程序函数，进行异步查询，完成后触发回调函数，进而更新网格单元格。

任何关于我可能遗漏的建议将不胜感激！

谢谢！

```
function recentPostsFormatter(cellValue, options, jsonVal) {

var encodedUrl = jsonVal.urlId;   
var globalHTML = "";
var wsquery = 'webservice query goes here';

$.getJSON(wsquery, function (result) {
    var html = "";
    for (var i = 0; i < result.response.docs.length; i++) {
        html += "<b>" + result.response.docs[i].title + "</b><br>" + result.response.docs[i].blogLink + ", " + result.response.docs[i].author + "<br>";

    }

$("#blogListTable").jqGrid('setCell', object.rowId, 'recentPosts', html);           

});

} 
```

# ios - 滚动视图中的子视图框架在模拟器和设备上表现不同

> ID：12101346
> 
> 赞同：0
> 
> 时间：2012-08-23T23:25:39.060
> 
> 标签：ios, uiscrollview, ios-simulator, frame, device

所以在 layoutSubviews 中，我调用 positionTextView 来调整我的 UIScrollView 子视图（一个 UIImageView）的框架，其中包含以下代码。

```
CGRect frame = informationTextView.frame;
frame.origin = CGPointMake(self.contentOffset.x, self.contentOffset.y + 414-44);
informationTextView.frame = frame;
overlayView.frame = frame; 
```

因此在模拟器上，子视图的框架位置保持固定（根据 contentOffset），但是在设备上进行测试时，框架正在移动，就好像它没有考虑 contentOffset 一样。

我错过了模拟器和设备的行为之间的区别吗？

# c# - SoundPlayer 并播放无缝连续的声音

> ID：12101348
> 
> 赞同：1
> 
> 时间：2012-08-23T23:25:45.247
> 
> 标签：c#, soundplayer

我想要做的是播放循环 wav，但具有特定的循环开始位置，如音乐模块文件（.it、s3m..mod 等）中使用的样本。SoundPlayer 没有这个功能，所以我创建了两个单独的文件：原始 wav 和开头截断到循环开始处的 wav。我想**无缝地**连续播放这两个文件，首先是使用 PlaySync() 的原始 wav 文件，然后是使用 PlayLooping() 的循环部分。

不幸的是，在我 PlaySync() 第一个 wav 之后，它和 PlayLooping() 开始播放循环 wav 之间有一个*瞬间*中断。

```
 private static void PlayThread(SoundPlayer soundPlayer, byte[] wav, byte[] loop)
    {
        MemoryStream stream1 = new MemoryStream(wav);
        MemoryStream stream2 = new MemoryStream(loop);
        soundPlayer.Stream = stream1;
        soundPlayer.PlaySync();
        // here is where the split second interruption occurs
        soundPlayer.Stream = stream2;
        soundPlayer.PlayLooping();
    } 
```

这在播放两个不同的不同声音时可能不明显，但在尝试拉出我想要的循环机制时非常明显。声音 wav 是乐器样本，非常小（通常不超过 0x1000 字节）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:24:32.130

与其尝试连续播放多个 SoundPlayer 对象，不如尝试动态连接 .wav 文件，并将合并的 .wav 文件加载到一个 SoundPlayer 对象中。

下载此[WaveIO 类](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=15187&zep=Concatenation%20Waves/Concatenation%20Waves/WaveIO.cs&rzp=/KB/audio-video/Concatenation_Wave_Files//concatenation_waves.zip)，将其添加到您的项目中，然后在您希望连续无缝播放多个声音的地方尝试以下代码：

```
string[] files = new string[3] { @"filepath1.wav", @"filepath2.wav", @"filepath3.wav" };

WaveIO wa = new WaveIO();
wa.Merge(files, @"tempfile.wav");

System.Media.SoundPlayer sp = new System.Media.SoundPlayer(@"tempfile.wav");
sp.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:26:14.023

这是我的测试的样子：

```
 string sMediaPath = @"C:\Windows\Media";
        SoundPlayer soundPlayer = new SoundPlayer();

        soundPlayer.Stream = File.OpenRead(Path.Combine(sMediaPath, "chimes.wav"));
        soundPlayer.PlaySync();

        soundPlayer.Stream = File.OpenRead(Path.Combine(sMediaPath, "chord.wav"));
        soundPlayer.PlaySync(); 
```

我发现这个测试完全按照你的意愿工作 - 文件之间没有突然停止。这可能是由于其他原因，最有可能与文件本身有关

*   比特率：文件的采样率是多少？
*   声音文件是否交错（立体声）？
*   声音文件有多大？

也许在播放之前预加载您的声音可能会有所不同？

```
 string sMediaPath = @"C:\Windows\Media";
        SoundPlayer soundPlayer = new SoundPlayer();

        List<Stream> oSoundStreams = new List<Stream>();
        oSoundStreams.Add(File.OpenRead(Path.Combine(sMediaPath, "chimes.wav")));
        oSoundStreams.Add(File.OpenRead(Path.Combine(sMediaPath, "chord.wav")));

        soundPlayer.Stream = oSoundStreams[0];
        soundPlayer.PlaySync();

        soundPlayer.Stream = oSoundStreams[1];
        soundPlayer.PlaySync(); 
```

**编辑：**

通过为每个要播放的声音创建一个 SoundPlayer 对象，似乎可以减少您遇到的短暂差距：

```
 string sMediaPath = @"C:\Users\Foogle\Desktop\";
        SoundPlayer soundPlayer1 = new SoundPlayer();
        SoundPlayer soundPlayer2 = new SoundPlayer();

        soundPlayer1.Stream = File.OpenRead(Path.Combine(sMediaPath, "W.wav"));
        soundPlayer1.Load();

        soundPlayer2.Stream = File.OpenRead(Path.Combine(sMediaPath, "P.wav"));
        soundPlayer2.Load();

        for (int i = 0; i < 10; i++)
        {
            soundPlayer1.PlaySync();
            soundPlayer2.PlaySync();
        } 
```

也许您可以创建一组 SoundPlayer 对象并根据需要播放它们？

希望这可以帮助。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:53:59.463

我对 SoundPlayer 一无所知，但可能会消除第 3+4 行，而是将第二波写入第一个流，而不是创建一个新流。这样，您实质上就是在向流中添加更多数据以供播放。假设您可以比播放它更快地写入它，您应该能够做到这一点。我不确定 MemoryStream 是否允许同时读/写。我做了类似的事情，但手头没有代码，它可能略有不同。

另外， Play() 是否阻塞？即下一行在完成播放之前不会运行。如果是这样，那么暂停是当第 3 行正在读取 wav 文件时。因此，您需要将 .Play 移动到另一个线程，以便您可以在播放第一波时开始加载下一波。即使您发现无法写入第一个内存流，并且必须创建一个新的内存流，至少您会将 wav 文件加载到内存流中，并在第一个完成后立即准备好播放。这将显着减少暂停。

考虑具有 MP3 播放列表的媒体播放器。当一个 MP3 接近完成时，媒体播放器通常会继续从磁盘加载下一个 mp3，并在第一个播放完成之前将其加载到内存中。

# visual-studio - Visual Studio 2012 - EntityFramework 并从 GAC 中清除它

> ID：12101353
> 
> 赞同：0
> 
> 时间：2012-08-23T23:26:49.153
> 
> 标签：visual-studio, gac

Visual Studio 2012 问题：

最近安装的 2012（2010 已经在这里了）...从 TFS 下载项目...去运行该项目，它需要 EntityFramework ...从 NuGet 安装 EntityFramework ...

这是问题所在：现在它抛出了一个错误：

> 无法加载文件或程序集 'EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=...' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

有了这个错误，我们搜索并发现解决这个问题的一种方法是从 GAC 中清除该实例。我使用以下命令从 Visual Studio 命令提示符（顺便说一句，它只出现了 2010 命令提示符）中清除了 GAC：

`gacutil /u "EntityFramework ..."`

哪个返回：

*   找不到匹配的程序集：EntityFramework
*   卸载的程序集数 = 0
*   失败次数 = 0

所以我想知道是否有人可能遇到过这个问题并找到了解决方案 - 或者 - 是否有人可以解决整个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:03:09.013

看起来有些东西硬编码了对 EntityFramework 4.1 版的引用。

EntityFramework（根据[nuget](http://nuget.org/packages/EntityFramework)）目前在版本 5 上（尽管我相信程序集版本号是 4.4.0.0）。

为了解决这个问题，您可以安装特定版本的包（参见[此处）或使用程序集绑定重定向来强制它使用更高版本（](http://nuget.org/packages/EntityFramework/4.1.10715.0)[此处](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/3f6f5d3a-5a19-4b13-a57f-50fd344a40bf)显示了一个示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T21:55:13.910

我跟着这个：

[http://msdn.microsoft.com/en-us/library/aa559881.aspx](http://msdn.microsoft.com/en-us/library/aa559881.aspx)

但是我试图卸载的 dll 被“卡住”了。

这导致我这样做：

[http://support.microsoft.com/kb/873195](http://support.microsoft.com/kb/873195)

我删除了注册表项。

现在`gacutil /u`工作了。

错误消失了。

在我进行注册表调整后，我的完全卸载看起来像这样：

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" /u "EntityFramework,Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
```

# ios - 在 iOS 上，如何在新线程中检查 ViewController 视图中 UISwitch 的值？

> ID：12101356
> 
> 赞同：1
> 
> 时间：2012-08-23T23:27:06.400
> 
> 标签：ios, multithreading

在 iOS 上，如果有一个单一视图应用程序，并且使用以下命令创建一个新线程：

```
[NSThread detachNewThreadSelector:@selector(consumeData:) 
     toTarget:self.consumer withObject:self.queue]; 
```

其中`consumer`是一个`Consumer`对象，它将在方法内部处理数据`consumeData`，而`queue`是一个`Queue`对象，它是消费者处理数据的来源。

但是如果线程需要检查主视图上的 Switch 是设置为 on 还是 off 怎么办？那就是切换`Consumer`对象是否应该在此刻完成工作或暂停。应该`withObject:self`改为使用，以便将整个 ViewController 引用传递给线程，然后线程将用于`viewController.view.______`访问开关的值，并用于`viewController.queue`访问队列，还是有更好或替代的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:30:01.827

绝对不。任何与 UI 相关的东西都不能从另一个线程中触及。这根本不安全。如果其他线程需要知道开关的当前值，那么它需要在请求之前回调主线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:17:35.207

如果您创建一个子类，您可以将您的状态存储在对象的变量中，然后从任何线程访问这些变量；当然这些操作不调用 UIKit 定义的方法。

# optimization - 使用 ARC+ASIHTTPRequest 进行任何优化级别的 iPhone SIGSEGV 崩溃

> ID：12101362
> 
> 赞同：2
> 
> 时间：2012-08-23T23:28:11.663
> 
> 标签：optimization, crash, automatic-ref-counting, asihttprequest, segmentation-fault

1.  我目前使用 ASIHTTPRequest 进行同步请求
2.  我最近重构了我的代码以符合 ARC 并使用编译器标志省略了 ASIHTTPRequest 类`-fno-objc-arc`
3.  当我使用任何类型的优化时，我都会遇到`_mh_execute_header`SIGSEGV 崩溃

虽然关闭所有优化允许我的应用程序运行 - 我需要能够使用 iOS 默认设置来优化应用程序`Fastest, Smallest [-Os]`

由于这是一个与内存相关的问题，并且由于唯一手动管理的内存驻留在 ASIHTTPRequest 中 - 将 ASI 与 ARC 一起使用是我的问题吗？

堆栈跟踪：

```
Thread: Unknown Name (Crashed)
    0     libobjc.A.dylib                     0x37b9ef7e objc_msgSend + 21
    1     Test                          0x000dcda5 _mh_execute_header + 126373
    2     Test                          0x000dc4b9 _mh_execute_header + 124089
    3     Test                          0x000cd801 _mh_execute_header + 63489
    4     Test                          0x000ce39d _mh_execute_header + 66461
    5     Test                          0x000cf561 _mh_execute_header + 71009
    6     Test                          0x000d3e3d _mh_execute_header + 89661
    7     UIKit                               0x3334ccbd -[UITextField keyboardInput:shouldInsertText:isMarkedText:] + 148
    8     UIKit                               0x3334cc1f -[UIFieldEditor keyboardInput:shouldInsertText:isMarkedText:] + 94
    9     UIKit                               0x3334cbb9 -[UIKeyboardImpl callShouldInsertText:] + 108
    10   UIKit                               0x3334bb5b -[UIKeyboardImpl addInputString:fromVariantKey:] + 114
    11   UIKit                               0x3334bae1 -[UIKeyboardImpl handleStringInput:fromVariantKey:] + 164
    12   UIKit                               0x3334a775 -[UIKeyboardImpl handleKeyEvent:] + 1320
    13   UIKit                               0x334e48a3 -[UIKeyboardLayoutStar sendStringAction:forKey:isPopupVariant:] + 486
    14   UIKit                               0x33348dcd -[UIKeyboardLayoutStar touchUp:] + 3196
    15   UIKit                               0x333480fd -[UIKeyboardLayout touchesEnded:withEvent:] + 380
    16   UIKit                               0x3324b92b -[UIWindow _sendTouchesForEvent:] + 318
    17   UIKit                               0x3324b319 -[UIWindow sendEvent:] + 380
    18   UIKit                               0x33231695 -[UIApplication sendEvent:] + 356
    19   UIKit                               0x33230f3b _UIApplicationHandleEvent + 5826
    20   GraphicsServices                    0x373f022b PurpleEventCallback + 882
    21   CoreFoundation                      0x357d1523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
    22   CoreFoundation                      0x357d14c5 __CFRunLoopDoSource1 + 140
    23   CoreFoundation                      0x357d0313 __CFRunLoopRun + 1370
    24   CoreFoundation                      0x357534a5 CFRunLoopRunSpecific + 300
    25   CoreFoundation                      0x3575336d CFRunLoopRunInMode + 104
    26   GraphicsServices                    0x373ef439 GSEventRunModal + 136
    27   UIKit                               0x3325fcd5 UIApplicationMain + 1080
    28   Test                          0x000bfc1b _mh_execute_header + 7195 
```

# django - Django查询按ManyToMany对象的数量过滤

> ID：12101363
> 
> 赞同：11
> 
> 时间：2012-08-23T23:28:13.053
> 
> 标签：django, filter, count, views, many-to-many

我在多对多关系中有两个模型（事件和用户配置文件）。我只想选择那些关联的用户数量少于一定数量的事件。因此，应选择迄今为止注册人数少于 4 人的活动。

在 views.py 我有这样的东西，但它不工作：

```
proposed_event_list = Event.objects.all().filter(userprofile__lt=4) 
```

models.py 的相关部分如下所示：

```
class Event(models.Model):
    name = models.CharField(max_length=100)
    date = models.DateTimeField('Event date')

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    event_commitments = models.ManyToManyField(Event, null=True, blank=True) 
```

我想我没有正确过滤每个事件的所有用户配置文件，但我不知道该怎么做。

你能帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T23:58:18.460

```
Event.objects.annotate(c=Count('userprofile')).filter(c__lt=4) 
```

# android - Java 代码效率。我应该使用开关吗？

> ID：12101364
> 
> 赞同：1
> 
> 时间：2012-08-23T23:28:13.677
> 
> 标签：android, switch-statement

好的，我的问题是这个

```
 switch (charType) {
    case Mush:
        switch (charColor) {
        case Blue:
            switch (charDirec) {
            case Left:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.l_blue_m);
                break;
            case Right:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.r_blue_m);
                break;
            case Bounce:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.b_blue_m);
                break;
            case Walk:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.w_blue_m);
                break;
            }
            break;
        case Red:
            switch (charDirec) {
            case Left:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.l_red_m);
                break;
            case Right:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.r_red_m);
                break;
            case Bounce:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.b_red_m);
                break;
            case Walk:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.w_red_m);
                break;
            }
        case Tan:
            switch (charDirec) {
            case Left:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.l_tan_m);
                break;
            case Right:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.r_tan_m);
                break;
            case Bounce:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.b_tan_m);
                break;
            case Walk:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.w_tan_m);
                break;
            }
            break;
        }
        break;
    case Slime:
        switch (charColor) {
        case Blue:
            switch (charDirec) {
            case Left:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.l_blue_s);
                break;
            case Right:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.r_blue_s);
                break;
            case Bounce:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.b_blue_s);
                break;
            case Walk:
                bitmap = (Bitmap) BitmapFactory.decodeResource(
                        mainContext.getResources(), R.drawable.w_blue_s);
                break;
            }
            break;
        }
        break;
    } 
```

有什么更好的方法来处理这个问题？或者这是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:34:44.507

您可以首先将您的方法拆分为两个更简单的方法。一种方法应该找到正确的资源 ID，另一种方法实际获取`Bitmap`：

```
int resourceId = getResourceId(charType, charColor, charDirec);
bitmap = (Bitmap)BitmapFactory.decodeResource(
    mainContext.getResources(), resourceId); 
```

这个简单的更改已经删除了很多重复的代码。

在您的`getResourceId`方法中，您可能需要考虑使用映射来查找资源 id 而不是嵌套开关。

```
Map<CharKey, Integer> map = new HashMap<CharKey, Integer>();

int getResourceId(charType, charColor, charDirec)
{
    CharKey key = new CharKey(charType, charColor, charDirec);
    return map.get(key).intValue();
} 
```

剩下的就是在程序启动时填充字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:54:54.530

我假设您正在使用 charType、charColor、charDirec 的枚举 - 如果您更改为 ints，您可以简单地创建一个 3D 数组，并将它们用作索引。在应用程序启动时预填充一次，这看起来像

```
int[][][] resources;

public void initResources(int numTypes, int numColors, int numDirections) {
  resources = new int[numTypes][numColors][numDirections];
  resources[MUSH][BLUE][LEFT] = R.drawable.l_blue_m;
  resources[MUSH][BLUE][RIGHT] = R.drawable.r_blue_m;
  // etc etc
} 
```

然后您可以稍后访问 ID，如下所示：

```
int resourceID = resources[charType][charColor][charDirec];
bitmap = (Bitmap) BitmapFactory.decodeResource(
                    mainContext.getResources(), resourceID); 
```

This way your application doesn't need to navigate a switch statement every time it wants to look up a bitmap ID, just access the relevant index in a multidimensional array.

# asp.net-membership - Lightswitch 2012 中的无效登录尝试和需要QuestionAndAnswer

> ID：12101365
> 
> 赞同：0
> 
> 时间：2012-08-23T23:28:15.343
> 
> 标签：asp.net-membership, visual-studio-lightswitch

在我的 Lightswitch 2012 应用程序中，如果我提供了 5 次错误密码，它会将我锁定为“已超过最大登录尝试次数”。

我的 web.config 中有这个默认的成员资格配置：

```
<add name="AspNetMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="_IntrinsicData" applicationName="BMS" requiresUniqueEmail="false" **requiresQuestionAndAnswer="false"** /> 
```

[根据 MSDN，这不应该发生](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.maxinvalidpasswordattempts.aspx)：“如果*RequiresQuestionAndAnswer 属性设置为 false，*则不会跟踪无效的密码回答尝试。”

我将此设置为 False... 我可以关闭 InvalidPasswordAttempt 跟踪的唯一方法是添加一个高得离谱的**maxInvalidPasswordAttempts="100000"**（这有效但看起来很笨拙）。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:14:26.363

嗯，我自己没有这种经历（但我从未尝试过 5 次密码错误），所以我不能说这是否是处理它的正确方法，但不太可能。正如您所说，必须这样做似乎是一个“黑客”。

如果 LS 忽略*RequiresQuestionAndAnswer*属性，那么我认为这是一个错误。然而，这*可能*是有原因的。您可以在[LS Connect](https://connect.microsoft.com/site1231/feedback/CreateFeedbackForm.aspx?FeedbackFormConfigurationID=4960&FeedbackType=1)网站上记录错误，并查看那里的响应。或者您可以在[Visual Studio LightSwitch - 一般问题](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/threads/)论坛中提问（我不知道团队是否在这里监控问题，但我知道他们在 LS 论坛中很活跃）。

# javascript - 当站点不是其 URL 的根时如何在 getJSON 调用中定位 API

> ID：12101373
> 
> 赞同：2
> 
> 时间：2012-08-23T23:29:36.853
> 
> 标签：javascript, asp.net-mvc-4

要调用 ASP.NET MVC 4 Web API，我使用以下约定来调用其服务

```
 $.getJSON("api/products/", ... 
```

如果我的网站 url 是根目录，例如`http://localhost:10234`，一切都很好。

但是一旦 url 变成`http://localhost/SomeApp`了，ajax 调用就失败了，因为

.getJSON 实际上调用`http://localhost/api/products`而不是`http://localhost/SomeApp/api/products`. 在这种情况下我应该怎么做才能更正位置。“/api/products/”或“~/api/products”不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:29:30.910

在我的 _Layout.cshtml 的第一部分，我把

```
<script type="text/javascript">
    appFolder = @Url.Content("~/");
</script> 
```

并将我在 javascripts 中的调用更改为

```
$.getJSON(appFolder+"api/products/" 
```

这解决了问题。

# jquery - 向下滚动时表格变为固定

> ID：12101375
> 
> 赞同：0
> 
> 时间：2012-08-23T23:29:41.670
> 
> 标签：jquery, css, css-position

这是我正在处理的页面示例：http: [//tommywebdesigner.com/Vision.html](http://tommywebdesigner.com/Vision.html)

我想要 Title *Vision General*中的部分，直到向下滚动页面时向下的*图标箭头*固定在顶部。你能告诉我实现这一目标的最佳方法吗？

基本上，我已经看到了一个[示例](http://oberoncinematografica.com/cine_post/dictado_cine/?lang=es)，当页面到达 div 时，类变得固定。我的情况应该类似，但没有像本[例](http://oberoncinematografica.com/cine_post/dictado_cine/?lang=es)中那样固定菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:39:53.730

通过查看其他示例，我找到了为您处理该问题的 javascript。他们使用 jQuery。这是代码，对不起，它很长：

```
/*
 *
 * Fold/unfold header
 *
*/
var snapped = false;
function fixHeader(){
    $('#headercontainer, body').addClass('fixed')
}

function headerUnfold(){
    $("header").animate({
        "height" : 157
    },300, "swing");

    //if header is fixed
    if($('body.fixed').length && !snapped){
        $('#content').animate({
            'margin-top' : 185
        },300, "swing");
    }
    if($('body.fixed').length && snapped){
        $('#submenucontainer').animate({
            'margin-top' : 90
        },300, "swing");
    }

    $("nav, #menu_aux").fadeIn('fast');
    $("#menuback").hide();
    $("header").bind('mouseleave' , function(){
        headerFold(true);
    })
    }

    function headerFold(animate){
    $("header").unbind('mouseleave');
    if(animate){
        time = 300;
    }else{
        time = 0;
    }
    $("header").animate({
        "height" : 65
    },time, "swing")

    //if header is fixed
    if($('body.fixed').length && !snapped){
        $('#content').animate({
            'margin-top' : 80
        },300, "swing");
    }

    if($('body.fixed').length && snapped){
        $('#submenucontainer').animate({
            'margin-top' : 0
        },300, "swing");
    }

    if(animate){
        $("nav, #menu_aux").fadeOut('fast');
    }else{
        $("nav, #menu_aux").hide();
    }

    $("#menuback").css({
        "left" : -10
    }).show().animate({
        "left" : 20
    },time)
    }

    $("#menuback").bind('mouseenter', function(){
    headerUnfold();
    }) 
```

只需制作您想要效果的元素 id `submenucontainer`。如果您想要更直接的 JS 链接，请[点击此处](http://oberoncinematografica.com/wp-content/themes/boilerplate/js/script-starter.js?ver=3.3.1)。

# nhibernate - 使用 NHibernate 通过单个查询和复合键检索一组记录

> ID：12101376
> 
> 赞同：1
> 
> 时间：2012-08-23T23:29:50.097
> 
> 标签：nhibernate, composite-key

我正在使用 Nhibernate，它是按代码映射的风格，可以使用复合键列表检索一组记录。我正在使用这样的复合键：

```
public class PersonAccountKey : IKey
{
        public virtual string PersonId { get; set; }
        public virtual string AccountNo{ get; set; }

        public override bool Equals(object obj)
        {
            if (obj == null)
                return false;
            var t = obj as PersonKey;
            if (t == null)
                return false;
            if (PersonId == t.PersonId && AccountNo == t.AccountNo)
                return true;
            return false;
        }
        public override int GetHashCode()
        {
            return (PersonId).GetHashCode() + "|" + (AccountNo).GetHashCode();
        }
} 
```

使用 PersonAccountKey 对象列表，我试图让 NHibernate 将单个查询发送到数据库。我想查询看起来像这样：

```
Select PersonId, AccountNo, AccountNickName 
From PersonAccount 
Where (PersonId = '11' and AccountNo = '10001111') 
or (PersonId = '22' and AccountNo = '10001150') 
```

我不确定如何实现这一目标？我尝试将 Criteria 与复合键一起使用，但我认为它不应该一起使用。我现在正在尝试 Linq 2 NHibernate，但也没有真正到达任何地方。

理想情况下，我想要一种采用 IEnumerable 等键的方法`Session.Get<T>(IEnumerable<object>)`，但这在我的搜索中不存在。

NHibernate 可以开箱即用吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:29:16.553

MSDN 上有一篇关于[Enumerable.Contains](http://msdn.microsoft.com/en-us/library/bb339118.aspx)的文章，它可以满足我的需求。

我不知道 NHibernate 的 linq 是否完全支持这一点。它可能会拒绝这样做，但有例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:29:32.913

与标量 ID 不同，没有直接支持使用复合键列表作为查询参数。这是应避免使用复合键的另一个示例。

这是一个简单的解决方法：

```
IEnumerable<PersonAccountKey> keys = GetKeys();
var query = session.CreateCriteria<PersonAccount>();
var keyCriterion = Restrictions.Disjunction();
foreach (var key in keys)
    keyCriterion.Add(Restrictions.Eq("id", key));
query.Add(keyCriterion);
var result = query.List<PersonAccount>(); 
```

# javascript - 使用Javascript，根据开始和结束标签之间的文本获取元素的方法是什么？

> ID：12101379
> 
> 赞同：1
> 
> 时间：2012-08-23T23:30:17.687
> 
> 标签：javascript, html, dom

我是初学者，搜索后找不到答案。

在我的例子中，我正在寻找一个

```
<a href="bla" onclick="dah">some text here</a> 
```

我想找到这个特定的元素，所以我可以用它做一些事情。

编辑：我唯一知道该元素的独特之处是文本“这里有一些文本”，这就是为什么我想根据它找到它的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:33:28.900

将 id 放在元素上：

```
<a href="bla" onclick="dah" id='myEl'>some text here</a> 
```

来自 javascript：

```
var myEl = document.getElementById('myEl') // gives the element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:35:19.547

您还可以将伪选择器 :contains 与[jQuery 库](http://api.jquery.com/contains-selector/)一起使用。

示例 2

```
$('div:contains("test")').css('background-color', 'red');​ 
```

[http://jsfiddle.net/9z5du/](http://jsfiddle.net/9z5du/)

示例 2

```
<script>
    $("div:contains('John')").css("text-decoration", "underline");
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:42:45.527

如果您知道该元素是一个链接，您可以先调用[`getElementsByTagName` *^([docs])*](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)来缩小搜索范围：

```
var elements = document.getElementsByTagName('a'); 
```

然后你必须遍历元素并测试哪个包含你正在寻找的下一个：

```
var element = null;
for(var i = 0, l = elements.length; i < l; i++) {
    if(elements[i].innerHTML === 'some text here') {
        // found the element
        element = elements[i];
        break;
    } 
}

if(element) {
    // found the element, lets do something awesome with it
} 
```

有多种方法可以获取元素的内容，使用`Node#innerText`(IE) 或`Node#textContent`(W3C) 是另一种选择。在比较之前，您可能必须先[修剪文本。](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

如果 HTML 如您的帖子中所示，

```
if(elements[i].firstChild || elements[i].firstChild.nodeValue) 
```

更加优雅。

[有关 DOM](https://developer.mozilla.org/en-US/docs/DOM)的MDN 文档可能会有所帮助。

如果您可以修改 HTML，那么添加 ID 并使用`getElementById`将是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T23:47:03.490

试试这个

```
function getit()
{
  var elems = document.getElementsByTagName('a');

  for(var i=0; i<elems.length; i++)
  {
     var text = elems[i].childNodes[0] != null ? elems[i].childNodes[0].nodeValue : '';

     if(text == "some text here")
       doSomethingWith(elems[i]);
  }
} 
```

# symfony - Doctrine2 select distinct with orderby (case when)

> ID：12101381
> 
> 赞同：0
> 
> 时间：2012-08-23T23:30:30.243
> 
> 标签：symfony, doctrine-orm

我在教义2上遇到了一些麻烦。我想订购查询，但要按星期几。

我是什么意思：

如果给定日期的日期在哪里`Tuesday`，我希望它由`Tuesday, Wednseday, ..., Sunday, Monday`.

但是一场演出可以有好几天。

我在这里得到的代码可以通过

```
public function getValidPerformancesByDay2($date, $max = 25, $from, $asSql = false){

    $myday = intVal(date('w',strtotime($date)));
    $q = $this->getEntityManager()
             ->createQueryBuilder()
             ->select('DISTINCT textdesc, 
              CASE WHEN (perfdays.id < '. $myday .') THEN perfdays.id + 8 
                   ELSE perfdays.id END AS HIDDEN sortvalue')
             ->from ('sys4winsegundaBundle:Performance','textdesc')
             ->join('textdesc.days', 'perfdays')
             ->where ('textdesc.enddate >= :date')
             ->andWhere('textdesc.isvalid = true')
             ->orderBy('sortvalue','ASC')
             ->setMaxResults($max)
             ->setFirstResult($from)
             ->setParameter('date',$date)
             ;

    $query = $q->getQuery();                   
    if ($asSql){
        return $query;
    }

    return $query->getResult();
} 
```

但不幸的是，当我查看已发送的查询时，它是：

```
SELECT DISTINCT p0_.id AS id0, p0_.name AS name1, p0_.duration AS duration2,
 p0_.addedby AS addedby3, p0_.startdate AS startdate4, p0_.enddate AS enddate5,
 p0_.starthour AS starthour6, p0_.flyer AS flyer7, p0_.price AS price8,
 p0_.discount AS discount9, p0_.isvalid AS isvalid10, 
 p0_.archivedon AS archivedon11, p0_.description AS description12,
 p0_.weblink AS weblink13, p0_.techinfo AS techinfo14, p0_.slug AS slug15,
 CASE WHEN (d1_.id < 4) THEN d1_.id + 8 ELSE d1_.id END AS sclr16,
 p0_.place_id AS place_id17, p0_.gallery_id AS gallery_id18 FROM performances
 p0_ INNER JOIN performance_day p2_ ON p0_.id = p2_.performance_id
 INNER JOIN days d1_ ON d1_.id = p2_.day_id WHERE p0_.enddate >= ? AND
 p0_.isvalid = 1 ORDER BY sclr16 ASC OFFSET 0
Parameters: ['2012-08-23']
Time: 5.13 ms 
```

这意味着如果一个表演每周发生 3 次，我会得到 3 次。

有人知道吗？

* * *

**编辑** 我的英语很糟糕，我会尝试以不同的方式解释它：嗯，我有不同日子发生的艺术表演。

我想做的是按最近发生的时间对它们进行排序。但是我将它发送到数据库的方式是开始日期，结束日期，然后是它发生的日期（星期二，星期三......）

我的查询是这样做的（按最近的排序），但是由于例如在周三和周五发生了一些性能，我的查询将返回该性能 2 次（在周三，另一次在周五），而我应该只在每个发生时检索性能但顺序相同（最近的优先）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:42:03.253

如果您希望每周发生 1 次，请使用

```
$q->groupBy() 
```

对于转换为周数的日期。并在您的选择中使用 count()。我不确定我是否理解你的问题。

# solr - solr 方面的整数和字符串值之间是否存在任何有意义的性能差异？

> ID：12101382
> 
> 赞同：4
> 
> 时间：2012-08-23T23:30:31.273
> 
> 标签：solr, facets

我们正在向我们的 solr 文档集中添加一个 facet 字段，该字段定义它属于哪个组 - 数据来自 mysql，我可以选择将整数 id (mysql pk) 放入 solr 的 facet 值中，或者放入短名称(mysql varchar(32)) 在构面值中。

使用短名称有一些吸引力，因为我们可以从用户输入（短名称将是 url 的一部分）直接转到 solr 查询，而无需访问 mysql 来查找 pk。

但是，在我走这条路之前，我想知道从性能的角度来看，字符串字段的分面是否与整数值的分面有很大不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:57:30.707

不要将文本字段用于 Faceting。你不会得到想要的行为。

[SolrFaceting概述](http://wiki.apache.org/solr/SolrFacetingOverview)：-

> 由于分面字段通常被指定用于两个目的，即人类可读的文本和向下钻取查询值，因此它们的索引通常与用于搜索和排序的字段不同：
> 
> 1.  它们通常不会被标记为单独的单词
> 2.  它们通常不会映射成小写
> 3.  通常不会删除人类可读的标点符号（双引号除外）
> 4.  通常不需要存储它们，因为存储的值看起来很像索引值，并且分面机制用于值检索。

尝试使用字符串字段，它会足够好，没有任何开销。

# php - OpenCart 和选择标签的奇怪问题

> ID：12101388
> 
> 赞同：0
> 
> 时间：2012-08-23T23:31:08.473
> 
> 标签：php, html, html-select

我使用 OpenCart 开发的扩展有问题。

我有一个选择下拉菜单，我想使用所选功能以便选择某个选项。但是，始终选择顶部条目。

例如这里是我的代码：

```
<select name="agent_status">
    <option value="1" <?php if($status == '1') echo "selected"; ?>>Enabled</option>
    <option value="0" <?php if($status == '0') echo "selected"; ?>>Disabled</option>
</select> 
```

但是，即使我应该是底部选项，顶部选项始终是默认选项。

我可以确认这不是 PHP 错误，因为我检查了源代码并且标签确实以选中结束。我也尝试过使用不同的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:34:51.440

我的错，

它归结为缓存问题！

感谢任何即将回答的人

# jquery - jQuery - 在提交时验证所有复选框

> ID：12101389
> 
> 赞同：0
> 
> 时间：2012-08-23T23:31:14.947
> 
> 标签：jquery, forms, validation, checkbox

我有 3 个复选框和一个提交按钮：

```
<form id="form1" action="/controller/action" method="post">
            <div class="checkbox"><input type="checkbox" name="box1" class="cBox" /><label for="box1" class="label">Box1</label></div>
            <div class="checkbox"><input type="checkbox" name="Box2" class="cBox" /><label for="Box2" class="label">Box2</label></div>
            <div class="checkbox"><input type="checkbox" name="Box3" class="cBox" /><label for="Box3" class="label">Box3</label></div>
            <input type="submit" value="Submit" />
</form> 
```

我有以下 jquery 警告“请勾选所有复选框！” 当没有勾选复选框时：

```
$(document).ready(function() {
    $('#form1').submit(function() {
        if ($('input:checkbox', this).is(':checked')) {
            // everything's fine...
        } else {
            alert('Please tick all checkboxes!');
            return false;
        }
    });
}); 
```

使用 jQuery 我需要：

如果已勾选所有复选框，则单击提交按钮后会发出警报：“所有复选框已被勾选”。

如果尚未单击所有复选框，则警告：“请勾选所有复选框！” 在提交。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:40:51.457

您可以检查复选框的数量是否与选中的数量相同：

```
$(document).ready(function() {
    $('#form1').submit(function() {
        if ($('input:checkbox', this).length == $('input:checked', this).length ) {
            // everything's fine...
        } else {
            alert('Please tick all checkboxes!');
            return false;
        }
    });
}); 
```

# php - 多个 foreach 循环和访问外部值

> ID：12101391
> 
> 赞同：0
> 
> 时间：2012-08-23T23:31:29.830
> 
> 标签：php, arrays, variables, associative-array

我正在尝试在`foreach`循环之外的多个循环中访问多个值：

```
foreach(array1 as arr1) {
    $var1 = arr2['value1'];  //$array is associative array with mutliple keys value1
} 
```

然后我还有一个

```
foreach(array2 as arr2) {
    $var2 = arr2['value']; //$array2 is another associative array with multiple keys value
} 
```

所有这些都在另一个大的 foreach 循环中，现在我想在大的内部创建一个数组`foreach`并被`$var1`使用`$var2`。我将要创建的这个数组也将是一个关联数组。任何想法我怎么能做到这一点？

阵列 1：

```
Array
(
  [0] => Array
    (
        [id] => 1
        [id_name] => 251452
        [name] => bob
    )

[1] => Array
    (
        [id] => 2
        [id_name] => 251453
        [name] => bob

    )

) 
```

阵列 2：

```
Array
(
[0] => Array
    (
        [id_person] => 4
        [id_last_name] => 251452
        [last_name] => smith

    )

[1] => Array
    (
        [id_person] => 15
        [id_last_name] => 251453
        [last_name] => johnson
    )

) 
```

假设这些来自数据库中的两个不同查询。

我想从第一个数组中获取每个数组的名字，并从第二个数组中获取每个数组的姓氏，并制作一个包含此数据的数组以及其他数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:54:41.690

看看多维数组。

还可以查看 stdclass 并可能创建一个数组，这些数组可以在单个定义中存储许多变量 - 这可以在很多方面提供帮助。（标准类）

嵌套循环 - 这只会将所有子数组转储到一个对象中 // InnerArray 的对象和数组示例

```
 $Object = new stdclass();
 $AllOfIt = array();
 $cnt = 0;
 foreach($OuterArray as $OuterKey => $InnerArray)
 {
      $cnt++;
      foreach($InnerArray as $InnerKey => $InnerValue)
      {
           $Object->$cnt = $InnerValue;
           $AllOfIt[$cnt] = $InnerValue;
      }
 } 
```

# jquery - jquery 意外令牌

> ID：12101392
> 
> 赞同：0
> 
> 时间：2012-08-23T23:31:47.663
> 
> 标签：jquery

我的 jquery 脚本遇到了一些问题，因为它一直遇到问题

> Uncaught SyntaxError: Unexpected token 。

```
$("#hm_01").mouseover(function(){
    $(.hover_top).delay(700).css(opacity: 1;-webkit-transform:translate(-10px,-10px));
    $(.hover_top).css(opacity: 1;animation: hover 0.7s;-webkit-animation: hover 0.7s);
    $(.hover_bottom).delay(700).css(opacity:1); 
    $(.hover_bottom).css(animation:reveal 1s;-webkit-animation: reveal 1s);
}); 
```

此外，我想知道是否可以通过函数名调用 jquery 脚本。例如，我的 div 有一个*onmouseover="script()"*并且我的*script()*定义为

```
function hm_01(){
    $(.hover_top).delay(700).css(
        opacity: 1;
        -webkit-transform:translate(-10px,-10px);
    );
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:37:12.550

您需要在选择器表达式周围加上引号，即 $(".hover_top") 而不是 $(.hover_top)。

您还需要查看 .css() 函数在 jQuery 中的使用方式 - [http://api.jquery.com/css/](http://api.jquery.com/css/)

# dom - DOMContentLoaded 是否适用于 IE9 中的 SVG 元素？

> ID：12101395
> 
> 赞同：0
> 
> 时间：2012-08-23T23:32:09.550
> 
> 标签：dom, svg, internet-explorer-9

那个标题就概括了。我认为附加到 DOMContentLoaded 或者它在 IE9 的 HTML5 中可以正常工作。但是我没有太多运气与可用于将一堆 SVG 标记完成到 DOM 中的事件联系起来。对此有任何指示吗？我更喜欢使用“纯 SVG”文档，而不是 HTML5。但我有点迷恋 HTML5，因为在头部有元标记会很有帮助，它可以将浏览器切换到支持 IE9 SVG 的呈现模式。请发送有关 IE9 中的 SVG 连接到 Javascript 的问题的帮助！感谢大家。

# php - 未定义索引 $_GET

> ID：12101396
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:32:12.040
> 
> 标签：php, sql, get, indexing, undefined

链接到第二页的第一页

```
<td><a href="moreToysDetail.php?toyInfo=<?=$currentToy["toy_id"];?>">More Detail</a></td> 
```

第二页

```
$toyId=$_GET["toyInfo"];

$question = "SELECT * FROM toy, toyscountry, toysmedia, alltoyscategory WHERE toy_id= '$toyId' AND   toy.toy_country = toyscountry.tCou_id
                                                                     AND toy.toy_id = toysmedia.tMedia_toyId 
                                                                     AND toy.toy_id=alltoyscategory.allToysCat_toyId";
$reply = mysqli_query($dbConnection, $question);
echo $question; 
```

> ECHO 后发现错误 注意：未定义索引：C:\Program Files (x86)\EasyPHP-12.0\www\CA1\moreToysDetail.php 中的第 5 行中的 toyInfo 从玩具、玩具国家、玩具媒体、所有玩具类别中选择 *，其中玩具 ID= 和玩具。 toy_country = toyscountry.tCou_id AND toy.toy_id = toysmedia.tMedia_toyId AND toy.toy_id=alltoyscategory.allToysCat_toyId

他们无法检测到 toyInfo :( 任何可以提供帮助的好心人？非常感谢，我需要在几个小时内交出我的作业>。<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:48:46.590

我发现您的代码可能有 3 个问题：

**第一的：**

```
<td><a href="moreToysDetail.php?toyInfo=<?=$currentToy["toy_id"];?>">More Detail</a></td> 
```

应该看起来像

```
<td><a href="moreToysDetail.php?toyInfo=<? echo $currentToy["toy_id"];?>">More Detail</a></td> 
```

这假设您的 php 配置为接受简写`<?`而不是默认值`<?php`

**第二：**

您在数据库中的玩具 ID 是否未存储为整数？它可能应该，因为它是 id 的最佳实践。这意味着您不需要 SQL 语句中的单引号：

```
...  WHERE toy_id= $toyId AND ... 
```

**第三：**

您的最后一行代码没有多大意义。您正在回显 SQL 语句。我相信你会想要回应这个回复。在这里查看[http://www.php.net/manual/en/class.mysqli-result.php](http://www.php.net/manual/en/class.mysqli-result.php)以了解如何执行此操作，因为回复当前包含一个对象，您不能只使用 echo on 来显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:40:38.737

您的代码有一个意外的“=”，所以这一定是问题所在，您还需要 echo $currentToy["toy_id"];

```
<td><a href="moreToysDetail.php?toyInfo=<? echo $currentToy["toy_id"]; ?>">More Detail</a></td> 
```

# ruby-on-rails - Rails破坏控制器不起作用

> ID：12101397
> 
> 赞同：0
> 
> 时间：2012-08-23T23:33:04.817
> 
> 标签：ruby-on-rails, destroy, railtie

标题里差不多。我和其他人一起做一个项目，然后将 git repo 克隆到我的计算机上，添加了一个新控制器，然后想得更好，于是跑了：

```
rails destroy controller requests 
```

（requests 是控制器的名称），只是得到这个无穷无尽的错误信息：

```
/Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:181:in `default_controller_and_action': missing :controller (ArgumentError)
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `new'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `each'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `match'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:507:in `map_method'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:469:in `get'
    from /Users/sashafklein/rails_projects/meatup/config/routes.rb:3:in `block in <top (required)>'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/sashafklein/rails_projects/meatup/config/routes.rb:1:in `<top (required)>'
from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/sashafklein/rails_projects/meatup/config/environment.rb:5:in `<top (required)>'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application.rb:103:in `require'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
    from /Users/sashafklein/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/commands.rb:25:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

它以前工作过，所以发生了什么？我可能需要重新安装被覆盖的东西吗？

另外，有什么想法为什么在粘贴我正在学习的rails教程的所有内容时出错？我不记得该文本在我的文件中的任何位置？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:39:08.703

看来您的路线可能有错误。您的 routes.rb 中是否添加了任何新路线？如果是这样，请尝试将它们注释掉，然后运行您的命令。

# .net - .NET CalDAV 客户端

> ID：12101401
> 
> 赞同：14
> 
> 时间：2012-08-23T23:33:32.000
> 
> 标签：.net, client, webdav, icalendar, caldav

我需要我的 .NET 应用程序来访问来自各种 CalDAV 服务器的内容。我一直在寻找一个好的 .NET CalDAV 客户端库，但一直找不到适合我需要的任何东西。这样的库是否存在，还是我需要从头开始编写？我正在寻找类似 iPhone 上只需要服务器地址、用户名和密码的东西。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-10-20T11:28:18.297

你可以检查[这个网址](http://www.totaldotnet.com/sub/caldav-library-net-framework)。我希望这个图书馆可以帮助你

根据要求：提供此客户端库是为了方便在 Microsoft Visual Studio 项目中允许 CardDAV/CalDAV 连接。它是一个提供简单 CalDAV / CardDAV 连接的抽象库。

该库还包括一个用于解析日历和联系人属性的原始接口；尽管这仅作为存根提供（实现将涉及采购 VCALENDAR 和 VCARD 的综合解析器）。

注意：这是企业的许可证组件，或者用于商业目的

更多细节可以在@http [://www.arpdev.com/CalDAV_CardDAV_library.aspx找到](http://www.arpdev.com/CalDAV_CardDAV_library.aspx)

# java - 将完整的 PDF 文件附加到 FOP PDF

> ID：12101407
> 
> 赞同：0
> 
> 时间：2012-08-23T23:35:01.110
> 
> 标签：java, apache-fop

我已经创建了一个 xml 文件并将其呈现为通过 servlet 发送的 PDF：

```
TraxInputHandler input = new TraxInputHandler(
   new File(XML_LOCATION+xmlFile+".xml"),
   new File(XSLT_LOCATION)
);
ByteArrayOutputStream out = new ByteArrayOutputStream();

//driver is just `new Driver()`
synchronized (driver) {
  driver.reset();
  driver.setRenderer(Driver.RENDER_PDF);
  driver.setOutputStream(out);
  input.run(driver);
}

//response is HttpServletResponse
byte[] content = out.toByteArray();
response.setContentType("application/pdf");
response.setContentLength(content.length);
response.getOutputStream().write(content);
response.getOutputStream().flush(); 
```

这一切都很好。

但是，我现在有另一个 PDF 文件需要包含在输出中。这只是给`.pdf`我的一个完全独立的文件。有什么方法可以将此文件附加到响应、驱动程序`out`或其他任何内容以将其包含在对客户端的响应中？这甚至会起作用吗？或者还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:44:25.597

我们还使用 FOP 生成一些文档，并且我们接受上传的文档，我们最终将所有这些文档合并为一个 PDF。

您不能只是按顺序将它们从流中发送出去，因为组合结果需要适当的 PDF 文件头、元数据等。

我们使用[iText 库](http://itextpdf.com/)来组合文件，从

```
PdfReader reader = new PdfReader(/*String*/fileName);
reader.consolidateNamedDestinations(); 
```

我们稍后循环将每个 pdf 中的页面添加到新的组合目标 pdf 中，同时调整书签/页码。

AFAIK，FOP 不提供这种功能。

# emacs - 大写锁定反弹到 ctrl 在 emacs 中生成 Ctrl-Shift

> ID：12101414
> 
> 赞同：1
> 
> 时间：2012-08-23T23:36:40.897
> 
> 标签：emacs

我已经将我的大写锁定键反弹为一个额外的 ctrl 键，但在 emacs 中使用反弹键会生成 CS 组合键。按 caps-p 生成序列 CSp，而使用 ctrl 键执行相同操作则生成 Cp。

这会导致一些奇怪的行为，例如 Cn 和 Cp 设置一个标记，然后突出显示我经过的区域。

我没有更改 X 中 caps 键的定义，而是使用我的窗口管理器 (Cinnamon) 中内置的设置。这可能是导致问题的原因，还是此键的预期行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:46:12.183

我之前也遇到过这个问题，我的键盘按键有问题`CTRL`。也许你有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:03:02.310

[这个](https://unix.stackexchange.com/questions/26946/disabling-caps-lock-by-setxkbmap-makes-it-shift-key-in-emacs)问题大概是相关的，基本上就是直接用xmodmap来设置key。当我将大写锁定设置为控制时，它对我有用，我想我当时正在使用 gnome3 classic（Cinammon 是基于它的）。

在相关说明中，我还建议查看[space2ctrl](https://github.com/r0adrunner/Space2Ctrl)，我发​​现一直伸手去拿大写锁定仍然会伤害我的手指。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T08:10:22.077

我在华硕笔记本电脑上运行 CrunchBang 10“Statler”（源自 Debian 6“Squeeze”）
（是的，我现在有点落后）

我目前有 GNU Emacs 23.2.1。`Caps Lock`在我将它重新映射到`Ctrl`使用 xmodmap之前，它甚至没有将键识别为按键。

所以首先我创建了文件 ~/.Xmodmap：

```
! attempting to redefine the <Caps Lock> key to do <Ctrl>                      
remove Lock = Caps_Lock                                                        
add Control = Caps_Lock 
```

显然 Debian 使用 .xsession，而不是 ..xinitrc。

文件 .xsession 是窗口管理器（Openbox）开始执行
的地方 我在 exec 之前插入了 xmodmap 调用：

```
#!/bin/sh                                                                      
# gonna modify the keys so <Caps Lock> is <Ctrl>                               
xmodmap /home/tom/.Xmodmap

exec openbox-session 
```

该`Caps Lock`密钥似乎 现在就像 Emacs中的`Ctrl`密钥一样工作。

# php - 编码和解码脚本？

> ID：12101417
> 
> 赞同：-5
> 
> 时间：2012-08-23T23:37:04.913
> 
> 标签：php, encode

是否可以编码无法解码或至少最安全的方式的 php 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:53:11.673

是的，但 PHP 脚本将无法自行编码和解码。您需要编写另一个程序来代表 PHP 脚本执行此操作。`base64_decode`但是，您可以使用和的组合来混淆文本`eval`。这允许您插入代码，这样某人就无法对可能是外来的函数进行简单的 Ctrl+F 搜索。例如，这是“Hello World”：

```
eval(base64_decode("ZWNobyAiSGVsbG8gV29ybGQiOw==")); 
```

这适用于 PHP 代码的内容，而不是文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:18:24.783

你的意思是你想分发你的代码，但不让其他人阅读/反编译它。

Zend 编写 PHP，所以最好的地方是考虑使用他们的编码器来达到这个目的：[http](http://www.zend.com/en/products/guard/) ://www.zend.com/en/products/guard/您还可以在分发中添加许可。

还有其他一些混淆代码的方法——但混淆并不能阻止人们复制它，而且在许多情况下，如果他们真的想的话，也不会阻止人们编辑它。

# jquery - 如何将变量传递给另一个函数

> ID：12101424
> 
> 赞同：0
> 
> 时间：2012-08-23T23:37:53.280
> 
> 标签：jquery

我正在尝试将变量从一个 jquery 代码块中获取到另一个代码块中以执行特定任务。我有一个用户填写的表格，他们有两个选项，但默认设置一个。选项一，选项二通过单击一个按钮来显示，然后替换选项一。

jQuery

```
$("#opt2").click(function(){
var newopt = $("name").val();
$("#opt1").replaceWith('<input type="text" id="name">');
});

$("#ipload").click(function(){
alert(newopt);
}); 
```

但是当我输入一些数据时会出现未定义的事件，我知道有些人可能会说它不属于前一个函数。所以我的问题是，当我单击 ipload 时，如何让 newopt 提醒第二个功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:40:02.907

因为您在函数中声明了变量 newopt，所以它只能在该函数中访问。

因此，要使 newopt 在其他地方可用，请在任何函数之外声明它，如下所示：

```
var newopt;
$("#opt2").click(function(){
newopt = $("name").val();
$("#opt1").replaceWith('<input type="text" id="name">');
});

$("#ipload").click(function(){
alert(newopt);
}); 
```

但是这段代码*仍然*不起作用 - 你错过了选择器中的 # 来表明你想要带有 id 名称的 div 的值 - 这将起作用：

```
var newopt;
$("#opt2").click(function(){
newopt = $("#name").val();
$("#opt1").replaceWith('<input type="text" id="name">');
});

$("#ipload").click(function(){
alert(newopt);
}); 
```

您可以在此处了解有关 javascript 范围的更多信息 - [http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:40:19.440

您已将 newopt 设为第一个函数的局部变量。因此它不会被第二个看到。尝试这个：

```
var newopt="";

$("#opt2").click(function()
{
    newopt = $("name").val();
    $("#opt1").replaceWith('<input type="text" id="name">');
});

$("#ipload").click(function()
{
    alert(newopt);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:43:50.087

您也可以将变量`$("name").val();`设为全局变量`$("#name").val();`，如果是这样，那么为什么要添加另一个具有相同 id 的元素，id 应该是唯一的。

# javascript - Javascript/ASP.net 在下拉列表更改后触发事件

> ID：12101425
> 
> 赞同：0
> 
> 时间：2012-08-23T23:38:00.797
> 
> 标签：javascript, asp.net, google-maps, dom-events

我有一个国家、城市和地区的三个下拉列表，其中包含初始空白选定值和一个 html 页面上的谷歌地图。当用户从下拉列表中选择位置值时，我正在尝试将地图居中并放大。

所以这是一个我面临问题的场景：

1.  用户从国家下拉列表中选择一个国家。
2.  我必须在下拉列表更改后检索选择的值。
3.  触发事件以更新谷歌地图

我尝试使用 onchange 和更改 javascript 事件，但两者都导致从下拉列表中检索到的文本值成为事件之前的文本值，该事件将空文本（初始空白文本）发送到谷歌地图。

那么，如何在下拉列表更改后触发事件？

这是我的代码：

```
 <asp:DropDownList ID="DropDownList_Country" runat="server" Height="29px" Width="209px"
                            Font-Size="18px" CausesValidation="false" onchange="MapLocationUpdater();">

function MapLocationUpdater() {

                var address = getDropdownListAddress();
                geocoder.geocode({ 'address': address },
                function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);
                        map.setZoom(11);
                        var marker = new google.maps.Marker({
                            map: map,

                            position: results[0].geometry.location
                        });

                    }
                    else {
                        alert("Geocode was not successful for the following reason: " + status);
                    }
                }
                );
            }

            function getDropdownListAddress() {

                var ddlCountry = document.getElementById("<%=DropDownList_Country.ClientID%>");
                var ddlCity = document.getElementById("<%=DropDownList_City.ClientID%>");
                var ddlDistrict = document.getElementById("<%=DropDownList_District.ClientID%>");

                var CountryTxt = ddlCountry.options[ddlCountry.selectedIndex].text;
                var CityTxt = ddlCity.options[ddlCity.selectedIndex].text;
                var DistrictTxt = ddlDistrict.options[ddlDistrict.selectedIndex].text;

                return CountryTxt + " " + CityTxt + " " + DistrictTxt;

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:07:00.557

试试这个：

```
<asp:DropDownList ID="DropDownList_Country" runat="server" Height="29px" Width="209px"
                        Font-Size="18px" CausesValidation="false" onchange="setTimeout('MapLocationUpdater();',1000);"> 
```

# php - 创建一个内置的 Like 按钮

> ID：12101427
> 
> 赞同：1
> 
> 时间：2012-08-23T23:38:24.303
> 
> 标签：php, javascript, facebook, facebook-like

我正在使用 Javascript SDK ，我无法创建内置的 Like 按钮。我阅读了以下来源：[https ://developers.facebook.com/docs/opengraph/actions/builtin/likes/](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

它说要调用这个：

```
curl -X POST \
     -F 'access_token=USER_ACCESS_TOKEN' \
     -F 'object=OG_OBJECT_URL' \
     https://graph.facebook.com/[User FB ID]/og.likes 
```

我真的不知道如何在 JS SDK 中使用它。我对 JS 和 PHP 有中级知识，但我从未使用过。

什么可以让我开始这样做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T19:39:00.040

这只是意味着使用正文中的某些参数/数据发出 POST 请求。你可以用[jquery做到这一点](http://api.jquery.com/jQuery.post/)

# html - 在 CSS/HTML 中使用 Image Re-size 重新定位文本

> ID：12101429
> 
> 赞同：2
> 
> 时间：2012-08-23T23:38:39.233
> 
> 标签：html, css, position

我已经为此工作了几个小时，阅读了 20 多篇文章，但我仍然不知道如何做到这一点。我有一个背景，我希望将文本定位在某个位置。一切都很好，直到我在分辨率更高的显示器上查看它。背景重新调整大小很好，但文本不再在我想要的位置。

这些图像希望能清楚地描述我的情况。

我希望文本如何查看任何分辨率（这是在 1440 x 900 显示器上）[http://dl.dropbox.com/u/9134840/demo/1.PNG](http://dl.dropbox.com/u/9134840/demo/1.PNG)

这是它在 1080p 显示器上的外观：http: [//dl.dropbox.com/u/9134840/demo/2.PNG](http://dl.dropbox.com/u/9134840/demo/2.PNG)

```
 <body>
  <div id="blah">
<p id="pr">This is a paragraph!</p>
</div>
  </body>
</html>

body {background-image:url(back.jpg); background-size:cover;}
#blah{font-size:large; left:300px; top:200px; position:absolute;} 
```

编辑：我尝试了这两个建议，使用 div 并绝对和相对地定位文本，但仍然不行，文本仍然移动。

```
#contain{
position:relative;
width:7000px;
margin:0 auto;}

#blah{font-size:large; left:100px; top:200px; position:absolute;} 
```

我不是在寻找固定的位置，因为我要添加内容，所以我需要垂直滚动页面而不移动文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:46:16.943

您的#blah div 需要位于相对 div 内。如果你绝对定位与身体相关的东西，你可能会遇到问题。将其放置在另一个 div 中或使用固定定位。

```
#containerDiv {position:relative;}
#blah {position: absolute; top:200px; left:300px;}

<div id="containerDiv "><div id="blah"></div></div> 
```

或者

```
#blah {position: fixed; top:200px; left:300px;} 
```

在这种情况下，如果您调整窗口大小，您的 div 将始终保持不变。如果您希望它居中，请使用以下内容：

```
#containerDiv {position:relative; width:700px; margin:0 auto;}
#blah {position: absolute; top:200px; left:300px;} 
```

还要记住 background-size:cover; 在 IE 版本中不起作用。

例子：

[http://jsfiddle.net/mYcXX/1/](http://jsfiddle.net/mYcXX/1/)（绝对）与[http://jsfiddle.net/mYcXX/2/](http://jsfiddle.net/mYcXX/2/)（固定）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:47:51.217

我相信您可以通过将背景图像样式与容器分离来解决此问题。我可能是错的，但尝试这样的事情......

```
body{
  background: url(black.png) top center no-repeat;
}

#container{
  width: 960px;
  margin: 0 auto;
} 
```

我建议尽可能依赖**[dom的自然流动。](http://www.w3.org/DOM/)**`position: absolute`基本上，除非绝对必要，否则不要依赖。即便如此，它也可能是一个黑客攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:05:56.487

好的，我自己想通了，非常感谢 yisela 的指导。最终，这就是我所做的。我查看了一个网站，比如 yahoo.com，发现它们的所有内容都居中并且背景为白色。所以无论你有什么分辨率，它仍然看起来很整洁。考虑到这一点，我确保我的图像是灰色的，并将背景更改为灰色，以便它们融合在一起。

现在，至于容器的东西。我将图像单独放在一个容器中，并将其居中。然后我只是设置相对于容器的段落。这样文本将保持在相同的位置。

```
html{  background-color:gray } 
```

身体{ }

```
#contain{
width:1280px;
height:2000px;
margin-left:auto;
margin-right:auto;
background-size:cover;
background: url(back6.png); 
}

#blah{font-size:large; left:120px; top:230px; position:relative;}

<div id="blah">

<p id="pr">This is a paragraph!</p>

</div>

</div>
  </body>
</html> 
```

现在..我想我会很高兴地回到 c#，在这个美妙的 CSS 体验之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T23:45:43.153

这看起来像固定布局。如果是这样，为什么不剪切背景的中心部分并将其放入具有样式的 div 中：

```
{
  width:960px; // maybe more or less - the width of the central image 
  margin-left:auto;
  margin-right:auto
} 
```

并定位与该容器相关的段落（div）

# ios - 如何判断 TWRequest performRequestWithHandler 是失败还是成功

> ID：12101433
> 
> 赞同：2
> 
> 时间：2012-08-23T23:39:16.050
> 
> 标签：ios, twitter, twrequest

我正在发布请求并检查如下错误：

```
// Send request out on a background thread
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
    [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if ([urlResponse statusCode] == 200) {
            NSLog(@"Tweet Successful");
        }else {
            NSLog(@"Tweet Failed");
            if (responseData) {
                //  Use the NSJSONSerialization class to parse the returned JSON
                NSError *jsonError;
                NSArray *requestResponse =
                [NSJSONSerialization JSONObjectWithData:responseData
                                                options:NSJSONReadingMutableLeaves
                                                  error:&jsonError];

                if (requestResponse) {
                    NSLog(@"%@",requestResponse);
                } else {
                    NSLog(@"%@",jsonError);
                }
            }
        }
    }];
}); 
```

就请求而言，它似乎工作正常。我的意图是将失败的请求排队并在以后重试，或者不取决于错误以及到目前为止失败的尝试次数。我遇到的问题是我发现它经常出现失败，错误 34“未找到页面”实际上请求确实成功，按预期发布，并且可以在 Twitter 流中清楚地看到。

现在，如果我不能相信返回的错误代码，那么我真的不能继续重试。我如何确定它是成功还是失败？

最近的观察：

最近，我尝试直接从 Apple 照片应用程序发布照片，它向我发送了一条警告，上面写着“推文可能没有成功”。这很有趣，因为这基本上是我在这种情况下唯一的选择。这让我觉得即使是 Apple 也不得不承认，当退货未确认时，无法确定该帖子是否失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:16:46.600

根据在研究此问题时发现的每个示例，除了您正在使用的之外，没有一个使用任何其他 API，并且包括[twitter 自己的文档中的这个示例，](https://dev.twitter.com/docs/ios/posting-images-using-twrequest)用于将照片发布到 API，它们都没有首先检查 urlResponse 代码。

似乎做过的最多的是[twitter 文档中的这个示例，](https://dev.twitter.com/docs/ios/making-api-requests-twrequest)其中执行了 GET，然后处理了响应。请注意，它首先检查 responseData，如果存在，则将其视为成功。只有在没有 responseData 的情况下才会尝试查看错误。该示例不会打扰 urlResponse ......我在 10 分钟的谷歌搜索中看到的任何其他示例也没有。

（*最后，我怀疑这很重要，或者可能是因为您清理了显示的示例，但是当您不执行任何 UI 时，您正在处理主队列上的错误。您可以在处理程序中进行处理立即,并将你所做的任何后处理传递给你试图显示它的任何 UI。我怀疑在主队列中对响应进行后处理,而不是在处理程序的队列中(如这里引用的两个示例所示以及我见过的所有其他示例）确实引起了问题，但我想知道它是否可以减少您看到的误报的发生率。至少，它会使您的响应和响应的任何 UI 显示更清洁，更高效。*）

# linux - 将文件迁移到具有 ACL 权限的另一台服务器

> ID：12101435
> 
> 赞同：4
> 
> 时间：2012-08-23T23:39:30.420
> 
> 标签：linux, unix, acl

我正在将我的目录系统从 Solaris 移植到 Linux 机器上。我有很多设置了 ACL [文件访问控制] 的文件。我想制作一个 tar 并将其复制到新盒子中。tar 是否也可以复制 ACL 权限？链接[软和硬]也会被复制到 tar 文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:37:41.083

很长一段时间以来，硬链接和符号链接在 Linux 上都不是问题。[`GNU tar`](http://www.gnu.org/software/tar/) 处理它们就好了。我相信 Solaris`tar`也可以正常工作 - 如果我没记错的话，如果检测到的 inode 的硬链接数不等于其链接数，它甚至可以警告用户。

另一方面，ACL 是另一回事。`GNU tar`既不归档也不恢复 ACL 和扩展属性，我不知道`tar`Solaris 中的实现是否更好。

你最好使用[`star`](http://freecode.com/projects/star)，它支持几乎所有你可能需要的东西......

# android - Android系统是在一个进程中多次向多个接收者发送BOOT_COMPLETED意图还是一次？

> ID：12101436
> 
> 赞同：2
> 
> 时间：2012-08-23T23:39:49.063
> 
> 标签：android, android-intent, broadcastreceiver, ipc, boot

所以基本上我的应用程序中有两个主要功能，A 和 B，它们在启动时都会做一些事情。所以我做了两个BroadcastReceiver R1和R2，它们都接收BOOT_COMPLETED意图。R1 的逻辑相当复杂，处理功能 A。R2 的逻辑非常简单，处理 B。

我的问题是决定是否应该通过保留两个广播接收器并使它们中的每一个都监听 BOOT_COMPLETED 意图来保持代码更清洁，或者是否应该将它们结合起来以提高性能？

接收两个相同的意图而不是一个对性能的影响有多大？send-receive-intent 过程会在我的应用程序中发生一次或两次吗？

另外，只有在启动完全完成后，用户可以启动应用程序时才发送 BOOT_COMPLETED 吗？

编辑：经过测试，两个组件在同一个应用程序中接收相同意图与一个组件之间的差异大约只有几毫秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:03:29.863

您可以使用 android:priority 属性来控制这些接收器，并使它们按特定顺序执行。优先级最高的活动将首先执行。像这样的东西：

```
<activity
     android:name="First activity">
     <intent-filter android:priority="10" >
          <action android:name="android.intent.action.DEVICE_INITIALIZATION_WIZARD" />
     </intent-filter>
</activity>

<activity
     android:name="Second activity">
     <intent-filter android:priority="1" >
          <action android:name="android.intent.action.DEVICE_INITIALIZATION_WIZARD" />
     </intent-filter>
</activity> 
```

[您在此链接中](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)有关于此的信息

> android:priority 在处理过滤器描述的类型的意图方面应该给予父组件的优先级。此属性对活动和广播接收器都有意义：它提供了有关活动如何响应与过滤器匹配的意图的信息，相对于也可以响应该意图的其他活动。当一个意图可以由具有不同优先级的多个活动处理时，Android 将只考虑那些具有较高优先级值的活动作为该意图的潜在目标。它控制执行广播接收器以接收广播消息的顺序。具有较高优先级值的那些在具有较低值的那些之前被调用。（该顺序仅适用于同步消息；对于异步消息，它会被忽略。
> 
> 该值必须是整数，例如“100”。数字越大优先级越高。默认值为 0。该值必须大于 -1000 且小于 1000。
> 
> 另请参阅 setPriority()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T00:01:10.993

除了山姆的回答...

> 另外，只有在启动完全完成后，用户可以启动应用程序时才发送 BOOT_COMPLETED 吗？

它在键盘保护出现时发送。关键是“时间”。启动时接收器有很多，它们都会以不确定的顺序接收广播。请不要对您将获得广播的准确时间或当时系统的准确状态做任何假设（例如，可能没有互联网连接）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:49:53.627

广播接收器本质上独立于任何活动。

*   如果 Activity A 和 Activity B 是同一个应用程序的一部分，我建议将它们结合起来并仅使用一个 BroadcastReceiver。
*   如果它们用于不同的应用程序并且您计划单独发布应用程序，那么它们应该仍然是两个不同的实体。

# macos - '+'（出现一次或多次）不适用于 'sed' 命令

> ID：12101440
> 
> 赞同：86
> 
> 时间：2012-08-23T23:40:05.950
> 
> 标签：macos, bash, sed

我正在尝试通过删除不必要的空格、空行以及括号与它们之间的空格来平衡我的代码，所以：

```
 int a = 4;
    if ((a==4) ||   (b==5))

    a++   ; 
```

应改为：

```
 int a = 4;
    if ( (a==4) || (b==5) )
    a++ ; 
```

它确实适用于括号和空行。但是，它忘记将多个空格减少到一个空格：

```
 int a = 4;
    if ( (a==4) ||   (b==5) )
    a++    ; 
```

这是我的脚本：

```
 #!/bin/bash
    # Script to refine code
    #
    filename=read.txt

    sed 's/((/( (/g' $filename > new.txt
    mv new.txt $filename

    sed 's/))/) )/g' $filename > new.txt
    mv new.txt $filename

    sed 's/ +/ /g' $filename > new.txt
    mv new.txt $filename

    sed '/^$/d' $filename > new.txt
    mv new.txt $filename 
```

另外，有没有办法让这个脚本更简洁，例如删除或减少命令的数量？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-23T23:44:07.660

如果您使用的是**GNU sed**，那么您需要使用`sed -r`哪些力量`sed`来使用扩展的正则表达式，包括`+`. 见`man sed`：

```
-r, --regexp-extended

       use extended regular expressions in the script. 
```

如果您使用**OS X sed**也是如此，但是您需要使用`sed -E`：

```
-E      Interpret regular expressions as extended (modern) regular expressions
        rather than basic regular regular expressions (BRE's). 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-23T23:41:11.387

您必须在前面`+`加上`\`，否则会`sed`尝试匹配字符`+`本身。

为了使脚本“更智能”，您可以将所有表达式累积在一个 sed 中：

```
sed -e 's/((/( (/g' -e 's/))/) )/g' -e 's/ \+/ /g' -e '/^$/d' $filename > new.txt 
```

一些实现`sed`甚至支持启用*就地*`-i`更改文件的选项。

 ** * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-14T02:55:06.600

有时，-r 和 -e 不起作用。我正在使用 sed 4.2.1 版，它们根本不适合我。

一个快速的技巧是改用 * 运算符。所以假设我们想用一个空格替换所有多余的空格字符： 我们想做：

```
sed 's/ +/ /' 
```

但是我们可以使用它来代替：

```
sed 's/  */ /' 
```

（注意双空格）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-28T10:25:47.517

可能不是最干净的解决方案。但是如果你想避免`-E`并`-r`保持与两个版本的 sed 兼容，你可以做一个重复字符`cc*`- 那是 1`c`然后 0 或多个`c`1`==`或多个`c`。

或者只是使用[@cdarke](https://stackoverflow.com/users/736308/cdarke)建议的 BRE 语法来匹配特定的数字或模式`c\{1,\}`。逗号后的第二个数字被排除在外以表示 1 或更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T05:55:50.360

这可能对您有用：

```
sed -e '/^$/d' -e ':a' -e 's/\([()]\)\1/\1 \1/g' -e 'ta' -e 's/  */ /g' $filename >new.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-15T16:31:29.197

在 bash 前面；

首先我做了一个脚本 test.sh

猫测试.sh

```
#!/bin/bash
while IFS='' read -r line || [[ -n "$line" ]]; do
    echo "Text read from file: $line"
    SRC=`echo $line | awk '{print $1}'`
    DEST=`echo $line | awk '{print $2}'`
    echo "moving $SRC to $DEST"
    mv $SRC $DEST || echo "move $SRC to $DEST failed" && exit 1
done < "$1" 
```

然后我们制作一个数据文件和一个测试文件aaa.txt

```
cat aaa.txt
<tag1>19</tag1>
<tag2>2</tag2>
<tag3>-12</tag3>
<tag4>37</tag4>
<tag5>-41</tag5> 
```

然后测试并显示结果。

```
bash test.sh list.txt 
Text read from file: aaa.txt bbb.txt
moving aaa.txt to bbb.txt 
```*

# visual-studio-2010 - trx 输出中的迭代结果

> ID：12101442
> 
> 赞同：2
> 
> 时间：2012-08-23T23:40:19.763
> 
> 标签：visual-studio-2010, mstest, lab-management

我作为构建的一部分运行测试已经有一段时间了（TFS、VS2010、MTM、实验室管理），并且总是通过 .trx 文件在 MTM（在 VS2010 中打开）中收到迭代数据结果。在对要部署和运行测试的虚拟机应用一些更新（部署到服务器并在一个环境中的客户端上运行测试）后，我不再收到迭代数据结果，只收到带有系统数据和日志的整体“通过/失败”（如我在 MTM 中的测试设置中设置的那样）。

我已经将 trx 文件输出与以前的版本进行了比较，过去的版本有如下几行：

```
UnitTestResult executionId="" parentExecutionId="" testId="" testName="Login_Invalid" computerName="client" duration="" startTime="" endTime="" testType="" outcome="Passed" testListId="" relativeResultsDirectory="" dataRowInfo="0" resultType="DataDrivenDataRow" 
```

*我已经删除了大部分文本，这些字段是最重要的。* 现在这些行不见了。

是否必须更改设置才能收集这些数据并将其返回给 MTM？

我打算从中获取迭代数据结果的环境由 Web 服务器（Win Server 2008 R2）和 Web 客户端（XP）组成。不确定还有哪些其他信息是相关的，因为到目前为止我已经调查了很多地方（测试设置、测试控制器配置、测试代理配置），因此请随时发表评论以获取更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:06:11.747

很长一段时间过去了，我没有真正尝试任何具体的东西就开始得到结果。我将列出自那时以来发生的变化，以便其他人受益：

*   重塑整个环境
*   新的测试控制器
*   仔细检查 ServiceAccount 的所有权限
*   安装了 VS2010 的所有更新

这些结果开始返回的确切时间尚不确定，但我们丢失它们的时间似乎与安装 Microsoft 修补程序以减少 TFS 备份大小有关。这不是在重新创建环境时重新安装的，虽然我不能保证，但如果它再次发生，我会寻找它。

希望这对某人有帮助！如果其中一种方法对您有帮助，请发布答案，我将更新已接受的答案。

# android - 如何加密我的 Android 应用程序

> ID：12101443
> 
> 赞同：0
> 
> 时间：2012-08-23T23:40:26.683
> 
> 标签：android

如何加密我的安卓应用程序？我的朋友说他可以看到我的 android 应用的所有类脚本。那么，如何加密我的安卓应用程序？以及如何在 apk 中显示类脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:44:52.873

默认情况下，当您创建 APK 的“发布”版本（与“调试版本”相反，它将使用 proguard 进行混淆。调试版本不是，以便您更轻松地调试运行您的应用程序的实例。

# c# - C# Facebook SDK 将访问令牌延长至 60 天

> ID：12101445
> 
> 赞同：3
> 
> 时间：2012-08-23T23:40:39.543
> 
> 标签：c#, javascript, facebook-c#-sdk, facebook-javascript-sdk, facebook-access-token

主要问题：我应该如何通过 C# SDK 为 60 天访问令牌延长 2 小时访问令牌？您能否提供代码已经被交易为 2 小时访问令牌的那部分的示例？

背景：我一直在这里寻找并尝试各种解决方案，但还没有找到适合我的解决方案。我可以成功拨打 /me 并获取有关当前用户的信息，但是当我尝试扩展访问令牌时它失败了。

这个应用程序的目标是允许用户在设定的时间段内设置帖子并在事后监控喜欢和评论。显然，我们需要 60 天的令牌。

在别人完成了 90% 的工作之后，当你可以申请永久令牌时，我接管了这个项目。我的工作是修复它，以便我们可以使用 60 天令牌。我可能会问非常愚蠢的后续问题。做好准备！

当前流程：用户设置他的帖子，单击一个按钮，我们提示他们通过 javascript sdk 验证我们的应用程序/登录到 facebook。在他们登录后，我们在 javascript 中处理其他不相关的事情，然后将其 AJAX 到 C# 以将一些信息保存到我们的数据库（包括令牌）并发布。一切顺利，我在 javascript 中获得了访问令牌，我可以使用该 2 小时令牌来获取有关已登录用户的信息，但是当我尝试扩展时，我得到两个错误之一，我将在下面提到导致它们的代码。

我试过的：

工作：我相信我在这里的另一篇文章中找到了这个。var fbClient = new FacebookClient(accessToken);

```
 Dictionary<string, object> parameters = new Dictionary<string, object>();
            parameters.Add("client_id", appId);
            parameters.Add("redirect_uri", redirectURI);
            parameters.Add("client_secret", appSecret);
            parameters.Add("code", accessToken);

            var result = fbClient.Get("/me", parameters); 
```

不工作：这来自不同的地方，包括这里和 sdk 文档。我见过有人包括重定向 url，并说它需要与您最初获得 accesstoken 时的那个匹配，但我们在 javascript 中做到了这一点并且没有使用重定向 url。字典参数2 = new Dictionary();

```
 parameters2.Add("client_id", appId);
            //parameters2.Add("redirect_uri", redirectURI);
            parameters2.Add("client_secret", appSecret);
            //parameters2.Add("code", accessToken);
            parameters2.Add("grant_type", "fb_exchange_token");
            parameters2.Add("fb_exchange_token", accessToken);

            var result2 = fbClient.Get("/oauth/access_token", parameters2); 
```

错误：{Newtonsoft.Json.JsonReaderException：解析值时遇到意外字符：a。第 1 行，位置 1。错误 2：如果我注释掉 grant_type 和 fb_exchange_token 并取消注释代码和 redirecturi，我会得到与下一个方法相同的错误......

不工作：这是我从另一个帖子中抓取的，复制/粘贴重命名以匹配我的变量。 [无法获得长期有效的到期令牌](https://stackoverflow.com/questions/11935782/unable-to-get-long-lived-expiration-token)

```
 dynamic result3 = new ExpandoObject();
            try
            {
                dynamic parameters3 = new ExpandoObject();
                parameters3.grant_type = "fb_exchange_token";
                parameters3.fb_exchange_token = accessToken;
                parameters3.client_id = appId;
                parameters3.client_secret = appSecret;
                result3 = fbClient.Get("oauth/access_token", parameters);
            }
            catch (FacebookOAuthException err)
            {
                result3.error = "Error";
                result3.message = err.Message;
            }
            catch (Exception err)
            {
                result3.error = "Error";
                result3.message = err.Message;
            } 
```

错误：{(OAuthException) (OAuthException) 验证码格式无效。}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T00:27:17.730

在作为回调的处理程序文件中使用以下代码与 Facebook.NET 和 Json.NET。

```
public void ProcessRequest (HttpContext context)
    {
        if (context.Request.Params.Get("error_reason") == "user_denied")
        {
            context.Response.Write("Access Denied");
        }
        else if (context.Request.Params.Get("code") != null && context.Request.Params.Get("code") != "")
        {
            string shorttoken = HttpUtility.ParseQueryString(HttpUtil.GetHtmlPage("https://graph.facebook.com/oauth/access_token?client_id=" + APP_ID + "&redirect_uri=http://huadianz.me/mvp/auth/FacebookOAuth.ashx&client_secret=" + APP_SECRET + "&code=" + context.Request.Params.Get("code")))["access_token"];
            string longtoken = HttpUtility.ParseQueryString(HttpUtil.GetHtmlPage("https://graph.facebook.com/oauth/access_token?client_id=" + APP_ID + "&client_secret=" + APP_SECRET + "&grant_type=fb_exchange_token&fb_exchange_token=" + shorttoken))["access_token"];

            Facebook.FacebookClient fc = new Facebook.FacebookClient(longtoken);
            dynamic result = fc.Get("me");

            context.Response.Redirect("/");
            //Store Token here
        }
    } 
```

我的实用程序文件在这里：

```
public static class HttpUtil
{
    public static string GetHtmlPage(string strURL)
    {
        String strResult;
        WebResponse objResponse;
        WebRequest objRequest = HttpWebRequest.Create(strURL);
        objResponse = objRequest.GetResponse();
        using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
        {
            strResult = sr.ReadToEnd();
            sr.Close();
        }
        return strResult;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:20:40.737

请参阅[如何使用其 C# SDK 更新 Facebook 访问令牌](https://stackoverflow.com/questions/11068538/how-to-renew-facebook-access-token-using-its-c-sharp-sdk)。仅仅请求“oauth/access_token”是不够的，你还必须在那里指定参数。那里的技术对我有用。

# ios - iOS - 使用 AVFoundation 录制声音后 iPhone 声音级别低

> ID：12101448
> 
> 赞同：1
> 
> 时间：2012-08-23T23:40:52.087
> 
> 标签：ios, audio, avfoundation

我有一个我正在开发的应用程序，它的一个功能是通过 录制声音`iPhone microphone`并能够回放给我。

问题：在我录制之后，比如说我说话，播放级别非常低。现在我确实切换`AudioToolbox`到了`AVFoundation`，这发生在切换之后。我需要在音量参数中编码`AVFoundation`吗？我在`documentation`.

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:24:14.817

我已经解决了这个问题。在 AppDelegate.m 我有以下内容`didFinishLaunchingWithOptions`

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: &setAudioError]; 

if (setAudioError) { NSLog(@"error setting audio: %@", setAudioError); } 

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (
                         kAudioSessionProperty_OverrideAudioRoute,
                         sizeof (audioRouteOverride),
                         &audioRouteOverride); 
```

这里的重要部分是它不起作用，因为我最初有`AVAudioSessionCategoryPlayer error:&setAudioError`

一旦我将其更改为“PlayandRecord”，我就没有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:31:29.190

在录制音频或配置 Record 或 PlayAndRecord Audio Session 时，iPhone 从使用扬声器（位于底部）切换到使用较小的耳机（靠近前顶部），这会产生较低的音量。

您的应用可以通过将音频会话 kAudioSessionProperty_OverrideAudioRoute 属性设置为 kAudioSessionOverrideAudioRoute_Speaker 来覆盖此默认设置。有关详细信息，请参阅 Apple 的音频会话 API 文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-16T21:43:21.217

在设置中打开飞行模式。你的声音会高很多。

# c# - 包括 sikuli 到 C# webdriver selenium

> ID：12101451
> 
> 赞同：1
> 
> 时间：2012-08-23T23:41:08.850
> 
> 标签：c#, selenium, webdriver, automated-tests, sikuli

我已经搜索了很多，但我没有得到答案......是否可以将（附加或其他）sikuli（使用 dll 或其他东西，一些代码）包含到用 c# 编写的 selenium webdriver 测试中工作室 2010

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:00:52.567

我这样使用它：

```
internal bool FillSingleRow()
    {
        return RunTest("Stryktipset_singleRow.sikuli");
    }

public static bool RunTest(string sikuliTest)
    {
        var sikuliHome = Environment.GetEnvironmentVariable("SIKULI_HOME");
        var execDir = new DirectoryInfo(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location));

        for (var i = 0; i < 2; i++)
        {
            var tempDir = execDir.Parent;
            if (tempDir != null)
            {
                execDir = tempDir;
            }
        }

        Sikuli.StartInfo.UseShellExecute = false;
        Sikuli.StartInfo.RedirectStandardError = true;
        Sikuli.StartInfo.RedirectStandardInput = true;
        Sikuli.StartInfo.RedirectStandardOutput = true;
        Sikuli.StartInfo.WorkingDirectory = sikuliHome;
        Sikuli.StartInfo.CreateNoWindow = true;

        Sikuli.StartInfo.Arguments = "-jar sikuli-script.jar -s " + '\u0022' + execDir.FullName + "\\Sikuli\\" + sikuliTest + '\u0022';
        Sikuli.StartInfo.FileName = "java.exe";
        Sikuli.Start();

        var so = Sikuli.StandardOutput;
        var se = Sikuli.StandardError;
        var error = se.ReadToEnd();

        if (error != string.Empty)
        {
            TestLog.Write(error);
            return false;
        }
        else
        {
            return true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T18:45:03.443

刚刚完成了一个通过 Web 服务公开 Sikuli 核心功能的 java 应用程序。然后，通过编写一个调用这个 java 应用程序的“客户端”库，我能够从一个几乎完全集成的 C# 测试中成功调用 Sikuli。

[https://sourceforge.net/projects/sikuli4net/](https://sourceforge.net/projects/sikuli4net/)

比通过命令行运行快吨（这是我以前的解决方案，通常它会额外增加 30 秒的测试时间），并且客户端库会自动解析来自工具的响应，所以你不需要做对结果进行任何字符串操作！

希望它有所帮助——我知道它不是锡库里的确切港口，但希望它能满足你的需要，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:12:14.437

您是否尝试[过从命令行使用 Sikuli](http://sikuli.org/docx/faq/010-command-line.html)？

我不知道 Selenium 是否内置了对运行外部工具的支持，但是在 C# 中使用 Process 对象来启动另一个程序并等待它的结束非常容易。

```
int exitCode;
var processInfo = new ProcessStartInfo(@"c:\pathto\sikuli.exe", "-parameters for command line");
processInfo.CreateNoWindow = true;
processInfo.UseShellExecute = false;
Process process = Process.Start(processInfo);
process.WaitForExit();
exitCode = process.ExitCode;
process.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:49:45.027

所以...这是我想出的第一种方法。

使用蓝鸭 SDA： [http ://sda.blueducktesting.com/index.php](http://sda.blueducktesting.com/index.php)

这样你就可以从 Selenium（通过 AutoIT）执行你想要的任何东西。

接下来，您将需要 Sikuli 的通过/失败输出。使用这个包装： [http ://code.google.com/p/simplesikuli/wiki/UsageDetails](http://code.google.com/p/simplesikuli/wiki/UsageDetails)

您可能需要也可能不需要查看/使用 simplesikuli 包装器使用的完整机器人框架。 [http://code.google.com/p/robotframework/](http://code.google.com/p/robotframework/)

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-30T08:11:16.860

```
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using NUnit.Framework;
using Sikuli4Net.sikuli_REST;
using Sikuli4Net.sikuli_JSON;
using Sikuli4Net.sikuli_UTIL;
using System.Threading;
using Newtonsoft.Json;

namespace UnitTestProject3
{
    [TestClass]
    public class UnitTest1
    {
        APILauncher launcher = new APILauncher();

        Pattern element1 = new Pattern(@"C:\myfolderforscreens\1.png");
        [Test]
        public void TestMethod1()
        {
            launcher.Start();

            Thread.Sleep(8000);
            Screen test = new Screen();

            test.DoubleClick(element1);

        }
    }
} 
```

试试这个，应该可以的。ps你需要安装Json - 版本“6.0.5”，设置Java_Home和Sikuli_Home

# php - 是否有多个标签的一般经验法则？

> ID：12101453
> 
> 赞同：4
> 
> 时间：2012-08-23T23:41:23.093
> 
> 标签：php, html, css

我有一个在 php 上运行的网页，其中包含一些表格、输入框和一个表单。设计非常基本，但我`<br />`会在需要时使用各种标签。有时我可能连续有两三个，所以间距看起来更好。

`<br />`当一个人使用多个标签时，是否有经验法则？大多数人只是将它们附加在同一行代码上，还是将每个`<br />`标签放在自己的行上？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T23:45:10.620

除了添加额外的 HTML，人们普遍认为，更好的方法是使用 CSS在元素之间而不是标签之间添加空格（例如或）来[将内容与表示分开。](http://en.wikipedia.org/wiki/Separation_of_presentation_and_content)`padding``margin``<br/>`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T23:44:52.077

实际上，经验法则是根本不使用`<br />`标签进行样式设置。您应该使用 css 在不是 html 标记的事物之间创建边距。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-23T23:46:35.947

关于换行没有经验法则——使用有意义的。

也就是说，多个换行符可能表明您使用了错误的方法。它们通常根本没有任何意义。如果您使用换行符来创建空白或定位布局元素，则应该使用 css 填充或边距（或定位）。段落应该被包含在`p`标签中。表格数据应使用`table`.

另外——如果你正在制作**HTML**，标签是`<br>`

> 在 XHTML 中，XML 句法要求规定必须使用显式结束标记（如上）或空元素句法将其明确化。这是通过在右尖括号之前的开始标记的末尾插入一个斜杠来实现的。

参考：[HTML 5 草稿参考](http://dev.w3.org/html5/html-author/#the-br-element)

关于 w3Schools 的说明：您应该知道 w3Schools 不隶属于 w3c 标准机构（HTML 规范的发布者），也不隶属于任何其他标准机构或浏览器供应商。该网站上的某些信息不正确。

为了获得更好的参考，您应该始终检查规范（[html5](http://www.w3.org/TR/html5/)，[html4](http://www.w3.org/TR/html401/) [您应该只使用 5]）。其他可靠的资源包括浏览器供应商或语言出版商。比如[MDN](https://developer.mozilla.org/en-US/)、[php.net](http://www.php.net/)、[MSDN 上的 ASP.net](http://msdn.microsoft.com/library/default.aspx)等。w3Schools**不能**比这些资源更权威、更准确。

**更多阅读**

*   *Ian Hickson*认为将 XML 作为文本/html 提供有害-* [http://hixie.ch/advocacy/xhtml](http://hixie.ch/advocacy/xhtml)*
**   *Jukka Korpela*的 SGML、HTML、XML 和 XHTML 中的空元素-* [http://www.cs.tut.fi/~jkorpela/html/empty.html](http://www.cs.tut.fi/~jkorpela/html/empty.html)***   w3c HTML 验证器 - [http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T02:15:54.577

这一次我得到了简短的回答。BR 标签用于文本中的换行符。就这些。**

# python - 有没有一种简单的方法可以将 vulture 与 django 一起使用？

> ID：12101463
> 
> 赞同：10
> 
> 时间：2012-08-23T23:43:08.503
> 
> 标签：python, django, dependencies

我正在尝试清理 django 中一些纠结的遗留代码。 [Vulture](http://pypi.python.org/pypi/vulture)看起来是个不错的选择，但它似乎不知道如何查找从 urls.py 引用的视图函数。这并不奇怪，因为大多数函数都包含在字符串中：

```
...
url(r'^some-url/$', 'my_app.views.some_url_view'),
... 
```

有没有一种简单的方法可以让 vulture 了解视图功能？

我要做的一件事是：我已经为代码编写了相当广泛的测试。目前，vulture 错过了这些测试，但如果有一些方法可以让 vulture 了解这些测试，我认为所有的观点也会被包括在内。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-05-26T17:52:41.867

> 有没有一种简单的方法可以让 vulture 了解视图功能？

是的，有 - Vulture 将此过程称为“白名单”。基本思想是明确“使用” Vulture 报告为未使用的代码。这可以通过为未使用的代码创建一个模拟对象来完成。由于创建这样的模拟对象是一种相当普遍的做法，Vulture 最近开始`vulture.whitelist_utils.Whitelist`为这个非常特定的目的发布一个抽象类。

对于您提供的示例视图函数，白名单可能如下所示：

```
# whitelists/whitelist_view.py
from vulture.whitelist_utils import Whitelist

view_whitelist = Whitelist()

# Create an attribute named exactly as your
# unused object - a function in this case
view_whitelist.some_url_view 
```

请注意，您还必须将此文件作为参数传递给 Vulture 才能正常工作。在上面的例子中，假设你在`apps`和`tests`目录上运行 Vulture，如果白名单保存为`whitelists/whitelist_view.py`，那么 vulture 的命令应该是：

```
vulture apps/ tests/ whitelists/ 
```

**这是如何运作的？**

由于您还将白名单文件与要分析的文件一起传递，因此 vulture`ast`为它们创建了 's，并且在解析这些抽象语法树时，Vulture 创建了一个通用集来存储已使用和已定义对象的名称。由于误报函数的名称出现在两者中，因此不被视为未使用。

有关如何减少误报的更多方法，请参阅[Vulture 的文档](https://github.com/jendrikseipp/vulture/#usage)。Rahul也有这篇[关于 Vulture 和误报的博客文章。](https://rj722.github.io/blog/2018/05/19/why-use-coverage-to-find-which-python-code-is-run/)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-29T00:30:38.067

单独尝试 Ned 的 Batchelder[`coverage`](http://nedbatchelder.com/code/coverage/ "覆盖范围")或将其与[`nose`](http://nose.readthedocs.org/en/latest/ "鼻子").

只需运行测试用例，`coverage html`就会得到一份漂亮的报告，逐行显示您的代码，并附上详细的覆盖率信息。之后修剪/删除未使用/未经测试的代码。

# visual-studio-2010 - VS2010 构建日志文件不正确

> ID：12101464
> 
> 赞同：3
> 
> 时间：2012-08-23T23:43:22.780
> 
> 标签：visual-studio-2010, logging, incredibuild

我的 VS2010 C++ 项目，发布配置，有一个输出目录：

`$(SolutionDir)\..\_build\Release\`

中间目录是：

`$(SolutionDir)\..\_build\Release\Obj\$(TargetName)\`

构建日志文件只是**默认**设置：

`$(IntDir)\$(MSBuildProjectName).log`

但是，构建日志文件没有写入我期望的位置。相反，它被写入：

`$(SolutionDir)\_build\Release\Obj\$(TargetName)\$(MSBuildProjectName).log`

就好像`..`在写入日志文件时从路径中剥离了 。但是，*所有*其他中间文件都写入正确的目录。

日志编写器是否改变了我的路径？它似乎是 90% 正确，但它缺少一个重要的`..`. 我需要做些什么才能使其正确读取吗？

* * *

### 更新：

在玩弄它之后，我发现是**IncrediBuild**导致了这个问题。在没有 IncrediBuild 的情况下进行构建会将日志文件放在正确的位置，但在使用 IncrediBuild 的情况下，日志文件会进入错误的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T16:24:58.400

尝试

```
<Path>$(SolutionDir)..\Output\$(ProjectName).log</Path> 
```

这个对我有用。SolutionDir 已经`\`结束了，所以你最终`\\`会在路径中，我认为这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:22:32.503

好的，假设我想将日志文件放在比当前解决方案文件位置高一级的输出文件夹中，如下所示：

```
MyTestProject
    |___ MyTestProject.sln
    |___ MyTestProjectFolder
    |___ Debug
Output
    |___ MyTestProject.log 
```

在 vs 2010 项目文件中，而不是使用：

```
<BuildLog>
  <Path>$(SolutionDir)\..\Output\$(ProjectName).log</Path>
</BuildLog> 
```

我必须使用：

```
<BuildLog>
  <Path>$(SolutionDir)\..\..\Output\$(ProjectName).log</Path>
</BuildLog> 
```

这有点奇怪，因为我不必为所有其他路径使用 2“..”，例如 OutDir 和 IntDir。如果我发现任何进一步的信息，我会更新这个答案。

# java - 如何在 Java 中将语言环境格式的数字转换为 BigInteger？

> ID：12101470
> 
> 赞同：2
> 
> 时间：2012-08-23T23:44:06.217
> 
> 标签：java, formatting, numbers, locale, biginteger

我搜索了很多但没有任何帮助:(假设我需要将 12.090.129.019.201.920.192.091.029.102.901.920.192.019.201.920 （葡萄牙语组分隔符：.）转换为 BigInteger 值。如何进行转换？我尝试使用NumberFormat，DecimalFormat 没有任何效果，或者我没有走正确的路:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T23:51:03.883

获取一个[`NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)葡萄牙语的实例[`Locale`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)，然后`parse`是它的数字。这还将处理特定于语言环境的小数分隔符。

```
NumberFormat nf = NumberFormat.getNumberInstance(new Locale("pt", "PT"));
DecimalFormat df = (DecimalFormat)nf;
df.setParseBigDecimal(true);
BigDecimal decimal = (BigDecimal)df.parse("12.090.129.019.201.920.192.091.029.102.901.920.192.019.201.920");
BigInteger big = decimal.toBigInteger(); 
```

**[演示](http://ideone.com/gN65j)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:51:16.013

删除分隔符不是更直接吗？Java 内部并不关注这些。

```
String num = "2.090.129.019.201.920.192.091.029.102.901.920.192.019.201.920";
BigInteger bigInt = new BigInteger(num.replaceAll("\\.", "")); 
```

如果您需要它，那么您可以使用 NumberFormat.format() 来取回该值。

# git - 将分支与主分支上的先前提交合并，然后重新应用以后的主提交的方法

> ID：12101476
> 
> 赞同：0
> 
> 时间：2012-08-23T23:44:45.557
> 
> 标签：git

我有一个 master 分支，它是由另一个开发人员分支出来的，然后他添加了功能。与此同时，我对一些相同的文件进行了更改。虽然线路上没有直接冲突，但我想知道用于将另一个分支合并回 master 的不同方法，冲突最小。

ASCII 艺术可视化：

```
A-B-C-D
\
 1-2-3 
```

我是否最好检查提交 A，将 3 处的分支重新合并，然后重新应用 B 到 D 中的更改？还是我应该将 3 合并回 D 中？或者我确信我缺少一些更好的方法。

我对 git 很陌生，我想我已经掌握了它，但我只是想确保我正确使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:12:04.330

假设 ABCD 的原始分支名称是“orig”。你在“3”，分支名称为“master”。试试这个：

```
git rebase orig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:05:58.123

你所描述的——签出`A`、合并`1`——<code>3，然后应用`B`——<code>D——是一种称为变基的标准 Git 技术。假设没有无法自动解决的冲突，您可以使用单个命令来完成：

```
git rebase --onto {commit 3} {commit A} {commit D} 
```

如果在做 rebase 时有冲突，Git 会告诉你解决它们。

但是，正常的 Git 工作流程只是将分支合并在一起。除非您有理由不这样做，否则我建议您只进行合并。

合并更准确地反映了开发过程；这意味着您可以查看您的历史，并准确了解一个功能是如何开发的，然后合并到主代码中。变基使您的历史看起来人为地干净；有时这很有用，但它确实隐藏了事情的完成方式。

# python - 有没有一个很好的工具来聚合站点的 django 错误消息？

> ID：12101480
> 
> 赞同：2
> 
> 时间：2012-08-23T23:44:58.297
> 
> 标签：python, django, error-handling

我们使用过 Arecibo，但它的配置和处理 AppEngine 很痛苦。有没有人有其他或更好的工具来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:48:18.443

尝试哨兵/乌鸦。[https://www.getsentry.com/welcome/](https://www.getsentry.com/welcome/)和[https://github.com/dcramer/sentry/](https://github.com/dcramer/sentry/)

它是开源的，您可以运行自己的服务器，并且有很好的 Django 集成。如果你只是想快速测试一下，可以使用他们的商业服务的试用版（没有特殊需要，只是省了你设置服务器的时间）。

# asp.net-mvc - 在局部视图中禁用控件

> ID：12101487
> 
> 赞同：0
> 
> 时间：2012-08-23T23:45:46.653
> 
> 标签：asp.net-mvc

我为实体创建和编辑屏幕。它们只有一个控件不同，即在编辑屏幕中间出现一个文本框。我想为这些页面创建一个局部视图，但是如何禁用创建屏幕的文本框控件。我已经将一个对象传递给局部视图，但是如何传递附加信息来禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:00:24.163

您可以根据您正在创建或编辑的项目的唯一标识符将其包装在条件语句中；假设唯一 id 将类似于 0、-1 或 null 用于创建和 > 1 用于现有项目...

# html - 跨度不会在页脚中右对齐

> ID：12101488
> 
> 赞同：1
> 
> 时间：2012-08-23T23:45:57.200
> 
> 标签：html, css, alignment

我有一些跨度元素填充了我的页脚，我试图让版权跨度右对齐，而不是与所有其他元素捆绑在一起。请你能告诉我哪里出错了吗？

```
<footer>

    <span>Blog</span><span>Hire</span><span>About</span><span id="copyright">Copyright &copy; 2012 Max Kramer</span>

</footer>

footer {
    width:  50%;
    height: 100%;
    margin-left: auto;
    margin-right: auto;
}

footer span {
    display: inline-block;
}

footer span #copyright{
    text-align: right;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:47:46.600

首先，删除 span 和它的 ID 之间的空格——它们是同一个元素，而不是嵌套在 span 中的 ID。第二，使用浮动，而不是文本对齐:)

```
footer span#copyright{
  float: right;
} 
```

你也可以这样做：

```
footer #copyright{
  float: right;
} 
```

您也不需要为 span 指定“inline-block”——无论如何，这是它们的“display”默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:49:07.490

跨度是一个流对象，这意味着它没有宽度。为了给它一个宽度，它需要是一个块元素，它会给你一个宽度来右对齐它。但是通过 make 它`block`，它将被推到其他跨度下方的行，这使您需要将其浮动。

你需要：

```
#copyright {
    text-align: right;
    display: block;
    float: right;
} 
```

# .net - 在作为嵌入资源的 resx 文件上使用 TransformXml 任务

> ID：12101490
> 
> 赞同：0
> 
> 时间：2012-08-23T23:46:11.253
> 
> 标签：.net, asp.net-mvc-3, resx, xdt-transform

有没有人有过对 resx 文件执行 xml 转换的经验？我想为每个配置转换一个 resx 文件。每个配置的转换文件可能会替换资源文件中的一些字符串值。例如：

```
<None Include="Resources\Label.Release.resx.config">
  <DependentUpon>Label.resx</DependentUpon>
</None>
<EmbeddedResource Include="Resources\Label.resx">
  <Generator>PublicResXFileCodeGenerator</Generator>
  <LastGenOutput>Label.Designer.cs</LastGenOutput>
</EmbeddedResource> 
```

我正在尝试转换 resx 文件中的一些数据值。在 Label.Release.resx.cofing 中：

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <data name="Title" xml:space="preserve"  xdt:Locator="Match(name)">
    <value  xdt:Tranform="Replace">CEO</value>
  </data> 
</root> 
```

我尝试在 BeforeBuild 任务中玩这个：

```
<Target Name="BeforeBuild">
<MakeDir Directories="$(IntermediateOutputPath)\Resources" 
    Condition="!Exists('$(IntermediateOutputPath)\Resources')"/>
<TransformXml Source="Resources\Label.resx" Transform="Resources\Label.$(Configuration).resx.config" Destination="$(IntermediateOutputPath)\Resources\Label.resx" /> 
```

之后导致 $(IntermediateOutputPath)\Resources 文件夹的 Label.resx 没有进行任何转换。我也不确定这是否是我将转换结果输出到的位置，因为 Lable.resx 最终应该是一个嵌入式资源。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:15:05.843

这就是我最终做的事情：

```
<Target Name="TransLabel">
<MakeDir Directories="$(IntermediateOutputPath)\Resources" Condition="!Exists('$(IntermediateOutputPath)\Resources')" />
<TransformXml Source="Resources\Label.resx" Transform="Resources\Label.$(Configuration).resx.config" Destination="$(IntermediateOutputPath)\Resources\Label.resx" />
<GenerateResource Sources="$(IntermediateOutputPath)\Resources\Label.resx" OutputResources="@(Resx->'$(IntermediateOutputPath)%(Identity).resources')">
</GenerateResource>
<Copy OverwriteReadOnlyFiles="true" SourceFiles="$(IntermediateOutputPath)\Resources\Label.resources" DestinationFiles="$(IntermediateOutputPath)\Ccwa.Resources.Label.resources" />
<RemoveDir Directories="$(IntermediateOutputPath)\Resources" />
</Target>

<Target Name="AfterResGen">
<CallTarget Targets="TransLabel" /> 
```

我通过连接到 AfterResGen 目标来转换 resx 文件，其中发生了正常的资源生成过程。然后我执行我自己的转换并生成我自己的资源文件。然后我替换转换之前已经生成的那个。当构建继续并生成项目 dll 时，我转换的资源文件被拾取。

# jquery - 如果选择了项目，则显示特定项目 | jQuery

> ID：12101492
> 
> 赞同：1
> 
> 时间：2012-08-23T23:46:28.483
> 
> 标签：jquery, html, css

我需要一个特定的 div 仅在选择特定项目时显示。

这是我到目前为止的进展：[进展](http://jsfiddle.net/XwN2L/457/)

您将在 HTML 注释中看到，如果选择了选项 2，则 div5 需要显示，但默认情况下，div5 将设置为不显示。

欢迎所有建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:51:13.090

你不能只添加一个条件来检查是否`data-target='2'`被选中，然后显示`#div5`，否则隐藏它？

喜欢[这个小提琴](http://jsfiddle.net/3e66n/)。

使用的代码：

```
if ($(this).data('target') == "2") {
    $("#div5").show();
} else {
    $("#div5").hide();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T00:00:01.237

您可以指定一个布尔值来显示或隐藏，因此您可以使用[`.toggle()`](http://api.jquery.com/toggle/)以下代码修改代码以简化显示和隐藏并满足特殊条件。

[**演示**](http://jsfiddle.net/SUj73/)

### JavaScript

```
var $options = $('.showSingle');
var $targets = $('.targetDiv');

$('.showSingle').on('click', function () {
    $options.removeClass('selected');
    $targets.hide();

    $(this).addClass('selected');
    $('#div' + $(this).data('target')).show();

    $('#div5').toggle($(this).data('target') === 2);
});

$('.showSingle').first().click(); 
```

### CSS

```
.targetDiv, #div5 {
    dislpay: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T00:06:24.227

所有你需要的是 ：

```
$("#div5").toggle($(this).data('target')==2); 
```

它看起来像这样：

```
$('.showSingle').on('click', function () {
    $(this).addClass('selected').siblings().removeClass('selected');
    $('.targetDiv').hide();
    $('#div' + $(this).data('target')).show();
    $("#div5").toggle($(this).data('target')==2);
}); 
```

[**小提琴**](http://jsfiddle.net/XwN2L/468/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T23:52:22.320

你可以通过点击操作来显示 div5

这是 jsfiddle[演示](http://jsfiddle.net/XwN2L/461/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-23T23:52:42.113

[http://jsfiddle.net/zerkms/SRQTv/1/](http://jsfiddle.net/zerkms/SRQTv/1/)

```
var target = $(this).data('target')
                    .toString()
                    .split(',')
                    .map(function(i) { return '#div' + i; })
                    .join(', ');

$(target).show(); 
```

通过这个修改，我们可以指定依赖逗号分隔的 div，比如`1,2,3`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T23:53:07.150

另一种选择是使用一个类来隐藏/显示项目。假设您有 class `.displayNone`，并且所有 div 都以该 class 开头，那么您只需为选定的 div 删除它。

# c# - 为 ASP.NET 超链接字段传递 SQL 表参数

> ID：12101494
> 
> 赞同：0
> 
> 时间：2012-08-23T23:46:46.633
> 
> 标签：c#, asp.net, sql

我有一个 asp:gridview 填充了 SQL (MSSQL 2008) 数据。这些单元格具有 naivgateurl 字段，因此我可以将用户重定向到带有一些图表的特殊页面。由于表格中显示了多辆车，我希望用户在单击特定行时获得每辆车的特定信息。所以基本上，我希望 URL 转到 ~\charts\load.aspx?ID=1 其中 1 是数据库中该车的 ID 号。谁能指出我正确的方向？我看过一些例子，但它们与我的要求并没有足够的相关性，我无法弄清楚。我的页面使用 C#。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:52:07.570

你可以尝试这样的事情：

```
<asp:GridView ID="oGridView" runat="server" AllowPaging="True" AllowSorting="True" DataSourceID="oObjectDataSource" AutoGenerateColumns="False" Width="100%" CellPadding="3" PageSize="50" GridLines="None">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" HeaderStyle-HorizontalAlign="Left" ReadOnly="true" />
        <asp:HyperLinkField DataNavigateUrlFields="CarID" DataNavigateUrlFormatString="/charts/load.aspx?ID={0}" DataTextField="CarName" HeaderText="CarName" SortExpression="CarName" HeaderStyle-HorizontalAlign="Left" />
    </Columns>
    <PagerSettings Mode="NumericFirstLast" Position="TopAndBottom" />
</asp:GridView> 
```

您需要：

*   将 DataField 值更改为数据源中返回的实际列名
*   在 HyperLinkField 中，确保您已使用来自数据源的适当列名更新了 DataNavigateUrlFields 值和 DataTextField 值

我希望这就是你要找的。

干杯!

# php - 从文件夹自动更新的 AJAX 照片幻灯片

> ID：12101500
> 
> 赞同：0
> 
> 时间：2012-08-23T23:47:19.290
> 
> 标签：php, ajax, slideshow, photos

我正在寻找一种 PHP/AJAX 幻灯片解决方案，它可以从目录中读取图像并在添加或删除照片时在播放时自动更新。图像还应根据浏览器尺寸自动调整大小。我已经搜索了几个小时，但没有找到任何自动更新的内容。Ajax 幻灯片上的主题[没有显示任何内容](https://stackoverflow.com/questions/10135330/ajax-slideshow-does-not-show-anything/12048147#12048147)，但它使用了非动态的元刷新标签。我知道如何使用 PHP 调整它以在每个周期动态生成适当的刷新时间，但这对于页面刷新来说并不理想。非常感谢有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:04:23.863

我会设置一个计时器`window.setInterval(yourfunction, 10000);`，当计时器达到 0 时，在抓取新图片后再次触发它。您可以在同一个函数中进行回调，这更容易。

```
function yourfunction(){window.setInterval(yourfunction, 10000); alert("HELLO");} 
```

对于图片，我会在脚本中的表格上获取列表或动态加载 php 页面（如果您拥有文件夹中的所有图片，则第一个更容易，如果从数据库加载，则第二个更容易）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:52:53.847

你试过这样的东西吗？ [jQuery 示例](http://smashinghub.com/23-most-popular-jquery-photo-gallery-and-slider-plugins.htm)

我个人喜欢这个图书馆。

# php - 简单修复电话号码的正则表达式验证

> ID：12101502
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:47:25.150
> 
> 标签：php, regex

到目前为止，我有一个用于验证表单中的电话号码：

`/^\s*\+?\s*([0-9]+\s*)+\s*(\((\+?[0-9]+\s*)+\))?\s*[0-9-\s]*[0-9]\s*$/`

它适用于那些数字：`+021 (+12) 113-2145`但我需要像这样在它的末尾添加一个扩展名：`+021 (+12) 113-2145 x 123`那么我怎样才能添加 char`x`和之后的数字？

和数字之间的空格也`x`应该是可选的，就像我上面的代码一样。

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:57:35.763

首先，您可以将所有实例替换`[0-9]`为更短的`\d`. （对于十进制数字）

然后，将其添加到原始正则表达式中：

```
(x\s*[\d]{3})? 
```

所以它会是

```
/^\s*\+?\s*([\d]+\s*)+\s*(\((\+?[\d]+\s*)+\))?\s*[\d-\s]*[\d]\s*(x\s*[\d]{3})?$/ 
```

**编辑：**使扩展成为可选

**编辑2：**使用`\d`而不是`[0-9]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:55:42.760

尝试：

```
/^\s*\+?\s*([0-9]+\s*)+\s*(\((\+?[0-9]+\s*)+\))?\s*[0-9-\s]*[0-9]\s*(x\s*[0-9]+)?$/; 
```

补充： (x\s*[0-9]+)?; 编辑：

```
$pattern = '/^\s*\+?\s*([0-9]+\s*)+\s*(\((\+?[0-9]+\s*)+\))?\s*[0-9-\s]*[0-9]\s*(x\s*[0-9]+)?$/';
$subject = '+021 (+12) 113-2145 x 123';
if(preg_match($pattern, $subject))
    echo 'matched'; 
```

# grails - 删除 Grails 中的插件

> ID：12101506
> 
> 赞同：2
> 
> 时间：2012-08-23T23:47:46.280
> 
> 标签：grails

我有`grails 1.3.7`，我升级到`grails 2.1.0`，但是当我运行时`grails run-app`出现以下错误：

```
 http://repo.grails.org/grails/core/org/grails/plugins/yui/[revision]/yui-[revision].zip
        ::::::::::::::::::::::::::::::::::::::::::::::
        ::          UNRESOLVED DEPENDENCIES         ::
        ::::::::::::::::::::::::::::::::::::::::::::::
        :: org.grails.plugins#yui;[2.6.0,): not found
        ::::::::::::::::::::::::::::::::::::::::::::::

| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information): 
```

我试过`grails install-plugin yui`and `grails uninstall-plugin yui`，但他们都没有工作。我真的不需要`yui`插件，但任何解决方案都是可以接受的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T05:10:57.650

确保您没有像`compile ":yui:2.x.x.x"`in your`BuildConfig.groovy`或`plugins.yui 2.x.x.x`in`application.properties`

[街上的消息](http://grails.1312388.n4.nabble.com/Webflow-won-t-stay-installed-td4626244.html)说`grails install-plugin`现在在 Grails 2.x 之后已弃用，修改`BuildConfig.groovy` [是](https://stackoverflow.com/questions/11902753/grails-2-1-0-unable-to-install-webflow-plugin)安装插件的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:44:14.317

我遇到了同样的问题...我只是将我在磁盘上找到的另一个版本复制到了我的应用程序的 lib 文件夹中，如下所示：

cp /tmp/yui_2.7.0.zip 库

光盘库/

cp yui_2.7.0.zip yui-2.6.0.zip

比我开始 grails 编译，当我运行三元组时一切似乎都很好：

grails 升级 grails 编译

它似乎不再有任何抱怨......

therbert@mail:~/grapp/dhc$ grails 编译 | 解析插件 JAR

依赖关系 :: 问题总结 :: :::: ERRORS

```
 Server access Error: Connection refused url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/%5B2.6.0,)/yui-%5B2.6.0,).pom 
```

> ```
>  Server access Error: Connection refused url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/maven-metadata.xml
> 
>     Server access Error: Connection refused url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/%5B2.6.0,)/yui-%5B2.6.0,).zip 
> ```
> 
> | 编译 290 个源文件 注意：一些输入文件使用或覆盖 a> 已弃用的 API。注意：使用 -Xlint:deprecation 重新编译以获取详细信息。
> 
> 注意：某些输入文件使用未经检查或不安全的操作。笔记：
> 
> 使用 -Xlint:unchecked 重新编译以获取详细信息。| 编译28个源码
> 
> 文件。therbert@mail:~/grapp/dhc$ grails 升级 | 环境设置为
> 
> 发展.....
> 
> >
> 
> ```
>  WARNING: This target will upgrade an older Grails application to 2.1.0.
> 
>     Are you sure you want to continue?
> 
>                [y,n] y | Plugin 'hibernate' with version '2.1.0' is already 
> ```
> 
> 安装 | 版本为“2.1.0”的插件“tomcat”已经存在
> 
> 安装 | 项目升级therbert@mail:~/grapp/dhc$ grails compile
> 
> | 编译 290 个源文件 注意：一些输入文件使用或覆盖一个
> 
> 已弃用的 API。注意：使用 -Xlint:deprecation 重新编译以获取详细信息。
> 
> 注意：某些输入文件使用未经检查或不安全的操作。笔记：
> 
> 使用 -Xlint:unchecked 重新编译以获取详细信息。| 编译28个源码
> 
> 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T02:26:51.857

您需要使用“grails dependency-report”显示依赖关系然后您可以使用任何使用“yui”插件的插件查看 HTML 报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:40:13.260

只是想知道这个问题是否有任何答案

从 grails 依赖报告来看，它是 grails-ui 插件，它在冒泡插件中导入，然后导入 yui 插件。

我尝试在 BuildConfig.groovy 中排除冒泡和 yui 插件，但不幸的是这不起作用。@mootinator - 我检查了 BuildConfig.groovy 和我的应用程序属性，这些文件都没有对 yui 的引用

# routing - 访问 ASP.Net Web Api 中的查询字符串？

> ID：12101508
> 
> 赞同：58
> 
> 时间：2012-08-23T23:48:02.007
> 
> 标签：routing, query-string, asp.net-web-api

我正在使用由 Asp.net Web Api 生成的默认模板。我正在使用 Get() 部分：

```
 // GET api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    } 
```

出于某种原因，我认为访问查询字符串唯一要做的就是创建一个输入字符串变量。因此，我为生成的默认控制器创建了另一个功能（我所做的唯一更改）：

```
 public IEnumerable<string> Get(string queryString)
    {
        return new string[] { "value3", "value4" };
    } 
```

我在这两种方法中都设置了一个断点，但即使我添加了一个查询字符串，它也总是会在没有参数的情况下进入函数。所以如果我去`http://mybaseurl/api/values?foo=f` 它仍然会去获取（）而不是获取（字符串查询字符串）。它不像我想的那样工作吗？我知道我可以使用 Get() 函数访问查询字符串，`Request.RequestUri.ParseQueryString();`但如果可能的话，我更喜欢这样分开。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-03-16T02:49:41.373

即使[@Kiran Challa](https://stackoverflow.com/users/1184056/kiran-challa)的回答是正确的，在少数情况下您可能更喜欢直接从 URL获取**URL 参数。**在这些情况下，试试这个：

```
using System.Net.Http;

var allUrlKeyValues = ControllerContext.Request.GetQueryNameValuePairs();

string p1Val = allUrlKeyValues.LastOrDefault(x => x.Key == "p1").Value;
string p2Val = allUrlKeyValues.LastOrDefault(x => x.Key == "p2").Value;
string p3Val = allUrlKeyValues.LastOrDefault(x => x.Key == "p3").Value; 
```

现在对于以下 URL，p1Val 将为“Apple”，p2Val 将为“Banana”，p3Val 将为*null*。

```
.../api/myController?p1=Apple&p2=Banana 
```

## 更新：

感谢您的建议，现在，此测试的源代码在[GitHub](https://github.com/tohidazizi/FreeWebApi/blob/master/Thrita.Web.Api.FreeWebApi/Controllers/ValuesController.cs)中 ，它也可以在 Azure 上运行和测试：

*   [http://freewebapi.azurewebsites.net/api/values?p1=Apple&p2=Banana](http://freewebapi.azurewebsites.net/api/values?p1=Apple&p2=Banana)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-08-24T03:42:37.107

查询字符串键名应与操作的参数名匹配：

/api/值？**查询字符串=f**

```
public IEnumerable<string> Get(string queryString)
    {
        return new string[] { "value3", "value4" };
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-01T11:48:17.733

当您在路由或动态路由中使用通配符时，还有另一种获取查询字符串的方法，如下所示。

```
string query = ControllerContext.HttpContext.Request.QueryString.Value; 
```

奖金：）

```
string path = ControllerContext.HttpContext.Request.Path.ToUriComponent(); 
```

# animation - Cocos2d CCAnimate 在所有变量都还活着的时候给出 EXC_BAD_ACCESS

> ID：12101515
> 
> 赞同：0
> 
> 时间：2012-08-23T23:48:55.110
> 
> 标签：animation, crash, cocos2d-iphone, exc-bad-access, watchpoint

我正在制作坦克游戏，但我在使用 Cocos2d CCAnimate 时遇到了问题——更具体地说，我的 CCAnimation 变量自发地丢失了数据！

它们被用于坦克对象的状态改变器（tank.m）

```
-(void)changeState:(CharacterStates)newState {
    [self stopAllActions];
    id movementAction = nil;
    action = nil;
    //CCLOG(@"Change state from %i to %i",self.characterState, newState);
    [self setCharacterState:newState];

    switch (newState) {
        case kStateIdle:
            action = [CCAnimate actionWithAnimation: idleAnim       //**ANIM
                               restoreOriginalFrame:NO];            //**ANIM
            [action setTag:kStateIdle];
            break;

        case kStateMoving:
            action = [CCAnimate actionWithAnimation: movingAnim  //**ANIM
                               restoreOriginalFrame:NO];         //**ANIM
            break;

    }

    if (action != nil) {
        [self runAction:action];
    }
} 
```

'action' 在坦克的 .h 文件中预定义 - “id action;”

当游戏初始化时，坦克（有四个）初始化没有问题，它们都被设置为“kStateIdle”没有问题。

然后 GameEngine 主循环调用坦克进行更新 - 对其速度进行测试，并检查以确保它们尚未移动或受到伤害，并且状态更改为“kStateMoving” -

```
if (self.characterState != kStateMoving && self.characterState != kStateTakingDamage && abs(velocity)>0.4) {
        [self changeState:kStateMoving]; 
```

但是当游戏开始时

> [CCAnimate actionWithAnimation:movingAnim restoreOriginalFrame:NO];

Cocos2d 在 'CCActionInterval' 中出现 'EXC_BAD_ACCESS' 崩溃，（调试器将 _cmd 报告为 'initWithAnimation: restoreOriginalFrame'）

原因是 CCAnimation 'movingAnim'（和 idleAnim）突然损坏了。如果我在调试器中检查它们，它们有一个内存地址，但没有报告它们的帧值。当坦克初始化时，他们都在那里。他们在玩家坦克上都很好。没有什么可以释放它们（我什至从 Dealloc 方法中删除了它们）。

我已将它们定义为 tank.h 头文件中的（单原子，保留）属性。

那么他们可能去了哪里？有没有办法在他们身上放置一个观察点？（我有 Xcode 4.3.2，所以菜单中没有任何内容）.. 或者有没有办法定义它们以便他们保留数据？

干杯!

卡尔

（PS。哇！然后我开始计算 3259 度的角度，我开始挠头并追踪数字（每当我看到它们就会恢复正常）并且 bam！Xcode 完全关闭。

当编辑器本身开始抛出抖动时，很难调试我的程序！）

# ruby-on-rails - ActiveAdmin 通过 id 提取错误的记录

> ID：12101516
> 
> 赞同：0
> 
> 时间：2012-08-23T23:48:55.773
> 
> 标签：ruby-on-rails, activeadmin

这是我无法深入了解的一个：

我正在使用 ActiveAdmin，并且我有一个用户选项卡（由 Devise 提供支持）。在最长的时间里，一切都很完美。然后今天我去查看其中一个用户，发现由于某种原因，它拉起了我的用户帐户，而不是我点击的用户帐户。我也尝试了显示页面，结果相同。它为所有用户执行此操作。我不知道这是什么时候开始的……在今天之前，我已经有一段时间没有点击这些操作中的任何一个了……至少有几个星期。但关键是我一定是做了*什么*，现在除了我自己之外，我看不到任何用户。

我在访问 /admin/users/153 后检查了日志并看到：

```
Parameters: {"id"=>"153"}
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  AdminUser Load (0.5ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 3 LIMIT 1 
```

它选择我的用户 ID (2) 而不是 params 哈希 (153) 中的用户 ID。我没有在 ActiveAdmin 中修改任何东西，据我所知，我没有使用任何会干扰它的东西......所以我很难过。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:40:50.100

不确定我的回答会对您有所帮助，但我遇到了类似的问题。就我而言，我在 application_controller 中设置了@challenge，我可以在任何控制器的任何位置使用它。当我通过活动管理员编辑挑战记录时出现了问题，它更新了我之前设置的@challenge。我花了几个小时才弄清楚这一点，结果只是因为共享类变量。

# python - 在 python 中分配工作负载

> ID：12101517
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:49:05.923
> 
> 标签：python, performance, multiprocessing

我有一个包含 10,000 个的数据库`adam_id`。对于每一个`adam_id`，我都需要通过 API 拉取信息。

我的表如下所示：

```
`title`
- adam_id
- success (boolean)
- number_of_tries (# of times success=0 when trying to do the pull down) 
```

这是我要创建的功能：

```
def pull_down(cursor):
    work_remains = True
    while work_remains:
        cursor.execute("""SELECT adam_id FROM title WHERE success=0 
                          AND number_of_tries < 5 ORDR BY adam_id LIMIT 1""")
        if len(cursor.fetchall()):
            adam_id = cursor.fetchone()[0]
            do_api_call(adam_id)
        else:
            work_remains = False

def do_api_call(adam_id):
    # do api call
    if success:
        cursor.execute("UPDATE title SET success=1 WHERE adam_id = adam_id")
    else:
        cursor.execute("UPDATE title SET number_of_tries+=1 WHERE adam_id=adam_id") 
```

`n`我将如何使用 python 的多处理功能而不是使用一个同步进程对工作人员执行上述操作？我已经开始查看 Multiprocessing 模块（[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)），但到目前为止对我来说似乎很难消化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:20:39.783

如果工作的主要部分是 api 调用，因为它涉及外部资源，那么这将是您真正想要并行的唯一部分。数据库调用可能非常快。所以你可以试试这个：

1.  `adam_id`在一个查询中批量获取值
2.  将 id 放入进程池以执行 API 调用
3.  获取结果并将其提交到数据库

这是一个粗略的伪代码示例，用于显示逻辑流程：

```
from multiprocessing import Pool

def pull_down(cursor):
    # get all the data in one query
    count = cursor.execute("""SELECT adam_id FROM title WHERE success=0 
                      AND number_of_tries < 5 ORDR BY adam_id LIMIT 1""")
    if count:
        # Step #1
        adam_id_list = [row[0] for row in cursor.fetchall()]

        # Step #2
        pool = Pool(4)
        results = pool.map(do_api_call, adam_id_list)
        pool.close()

        # Step #3
        update_db(results)

def do_api_call(adam_id):
    # do api call
    success = call_api_with_id(adam_id)
    return (adam_id, success)

def update_db(results):
    # loop over results and built batch queries for the success
    # or failed items

    # (obviously this split up could be optimized)
    succeeded = [result[0] for result in results if result[1]]
    failed = [result[0] for result in results if not result[1]]

    submit_success(succeeded)
    submit_failed(failed) 
```

如果您尝试使数据库调用并行，只会使代码复杂化，因为您必须正确地为每个进程提供它自己的连接，而实际上它不会是数据库拖慢您的速度。

# python - 在 python 中绘制矩阵的内容（使用 matplotlib）

> ID：12101519
> 
> 赞同：3
> 
> 时间：2012-08-23T23:49:13.027
> 
> 标签：python, matplotlib

嗨，我需要绘制一个矩阵的内容，其中每一行代表一个不同的特征，每一列是一个不同的时间点。换句话说，我想看到特征随时间的变化，我以矩阵的形式堆叠了每个特征。C是矩阵

```
A=C.tolist() #convert matrix to list.
R=[]
for i in xrange(len(A[0])):
    R+=[[i]*len(A[i])]    
for j in xrange(len(A[0])):
    S=[]
    S=C[0:len(C)][j]
    pylab.plot(R[j],S,'r*')
pylab.show() 
```

这是正确的/有没有更有效的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T01:10:44.270

从[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.plot)：

> ```
> matplotlib.pyplot.plot(*args, **kwargs): 
> ```
> 
> [...]
> 
> ```
> plot(y)            # plot y using x as index array 0..N-1
> plot(y, 'r+')      # ditto, but with red plusses 
> ```
> 
> 如果 x 和/或 y 是二维的，则将绘制相应的列。

因此，如果`A`列中有值，则很简单：

```
pylab.plot(A, 'r*')  # making all red might be confusing, '*-' might be better 
```

如果您的数据在行中，则绘制它的转置：

```
pylab.plot(A.T, 'r*') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T00:34:25.920

您可以提取矩阵 M 的第 i`M[:,i]`列，并且 M 中的列数由 给出`M.shape[1]`。

```
import matplotlib.pyplot as plt

T = range(M.shape[0])

for i in range(M.shape[1]):
    plt.plot(T, M[:,i])

plt.show() 
```

这假设行表示等距的时间片。

# java - Java - 图形 DrawImage 缩放问题

> ID：12101520
> 
> 赞同：0
> 
> 时间：2012-08-23T23:49:34.410
> 
> 标签：java, image, graphics

我正在尝试使用下面的代码缩放图像（即来自精灵表）。

```
Point pos = new Point(100, 100); //this shows where to display the image
Rectangle a = getAnimatedPos(); //just gets the coordinates of a specified image (which works correctly)

g.drawImage(img, pos.x, pos.y, pos.x+getWidth(), pos.y+getHeight(), a.x, a.y, a.x+a.width, a.y+a.height, null);

the function getWidth() returns the width of the frame. The formula is (imageWidth/rows).
the function getHeight() returns the height of the frame. The formula is (imageHeight/cols). 
```

当我缩放图像（通过更改宽度或高度）时，它开始显示其他帧？如果我将图像的宽度或高度保留为默认大小，则它可以工作。我认为通过定义源坐标和目标坐标它不会这样做。

澄清一下，图像是在一个内部框架上绘制/渲染的，比如大小为 640x480。另外，当我指的是框架时，我指的是精灵表，并且表中的每个图像都是一个框架。当然是用于动画。

需要澄清的另一件事是，图像不是绘制在组件之上的。只是一个内部框架。

我应该怎么解决这个问题？

**屏幕截图**

当一切都是默认的，这就是它的样子：[http ://wisemindstudios.com/good.png](http://wisemindstudios.com/good.png)

当我改变一些东西时：[http ://wisemindstudios.com/bad.png](http://wisemindstudios.com/bad.png)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:07:02.933

我不知道这对你是否可行，但是。

基本上，我提取要渲染的帧，然后绘制它。

这使我可怜的小大脑免于因所有参数而崩溃

```
Rectangle frameBounds = //... calculate the frame bounds to be extracted from the sprite sheet
BufferedImage cell = spriteSheet.getSubimage(frameBounds.x, frameBounds.y, frameBounds.width, frameBounds.height);

Rectangle renderBounds = //... calculate the location and size of the sprite to be rendered

g2d.drawImage(cell, renderBounds.x, renderBounds.y, renderBounds.width, renderBounds.height, this); 
```

在我的测试中，这导致了一个非常糟糕的结果。你真的应该看看更好的缩放算法；）

**更新**

我用了这个精灵表

![精灵表](../Images/3e924843e8ab0ae60e5d36e16425c2e5.png)

产生了这个输出

![最后](../Images/d86c74eb7cada433f18f803832169fc1.png)

现在我添加了帧号，将帧边界添加到渲染中以帮助它脱颖而出。

使用此方法可能会从上一帧/下一帧中失败的唯一原因是样式表错误（即帧大小不统一）或当前帧的计算错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:15:53.990

我发现了问题。它在我的 getAnimatedPos 函数中。我传入了框架的新宽度和高度，而不是框架的原始宽度和高度（用于源坐标）。所以，这毕竟是一个非常简单的修复。

我确定这是绘图而不是我的代码有问题。但是，通常总是用户的错（或者在这种情况下是程序员）。那好吧。就是这样。

谢谢你的协助！

# python - python中的扩展切片？

> ID：12101529
> 
> 赞同：9
> 
> 时间：2012-08-23T23:50:30.450
> 
> 标签：python, slice

我正在尝试编写一个 BitArray 类，如果有类似 numpy 的数组，`x[i:j:k] = val`.

我将如何用 Python 编写这个？不与`__setslice__`，对吗？因为这只需要三个参数，而我需要一个来四个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T00:03:32.047

`__setslice__`已弃用 - 您需要使用`__setitem__`slice 参数。

请注意，根据[Python 文档](http://docs.python.org/reference/datamodel.html)，切片只能以以下语法形式完成：`a[i:j:step]`、、`a[i:j, k:l]`或`a[..., i:j]`。基于冒号的语法用于定义单个切片对象，但正如第二个示例所示，您可以有多个切片参数（它们作为切片元组传入）。

这是一个打印`key`参数的示例，以查看其形式：

```
>>> class Foo(object):
>>>     def __setitem__(self, key, value):
>>>         print key
>>> 
>>> a = Foo()
>>> a[1:1] = 1
slice(1, 1, None)
>>> 
>>> a[1:1:1] = 1
slice(1, 1, 1)
>>> 
>>> a[1:1, 1:1] = 1
(slice(1, 1, None), slice(1, 1, None)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:03:08.410

`__setslice__`已弃用，请参阅[Python 3 更改日志](http://docs.python.org/release/3.1.5/whatsnew/3.0.html#operators-and-special-methods)：

> `__getslice__()`，`__setslice__()`并`__delslice__()`被杀。语法`a[i:j]`现在转换为`a.__getitem__(slice(i, j))`（或`__setitem__()`或`__delitem__()`，分别用作分配或删除目标时）。

同样，您可以传递一个 step 值，`slice()`这意味着语法`a[i:j:k]`转换为`a.__getitem__(slice(i, j, k))`.

# mongodb - 使用 JDO 的封顶集合

> ID：12101538
> 
> 赞同：1
> 
> 时间：2012-08-23T23:51:33.717
> 
> 标签：mongodb, jdo

我刚开始使用 MongoDB 和 JDO (DataNucleus。)

我试图弄清楚如何在 JDO 中使用 Capped Collections，任何指针？我是否缺少对象上的某种注释，还是比这更复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:51:26.257

此功能将在 DataNucleus 3.1.2 中提供：[http ://www.datanucleus.org/servlet/jira/browse/NUCMONGODB-104](http://www.datanucleus.org/servlet/jira/browse/NUCMONGODB-104)

# c++ - 存储在共享指针中的对象的线程安全

> ID：12101540
> 
> 赞同：0
> 
> 时间：2012-08-23T23:51:56.540
> 
> 标签：c++, shared-ptr

我有一个`boost::shared_ptr<Map>`，并且这个映射正在被多个线程修改，我需要使用显式互斥锁还是线程通过共享指针修改映射的事实，我会获得某种隐式线程安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:56:30.660

[你甚至看过文档吗？](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety)

> shared_ptr 对象提供与内置类型相同级别的线程安全。多个线程可以同时“读取”（仅使用 const 操作访问）shared_ptr 实例。不同的 shared_ptr 实例可以被多个线程同时“写入”（使用诸如 operator= 或 reset 之类的可变操作访问）（即使这些实例是副本，并且在下面共享相同的引用计数。）
> 
> **任何其他同时访问都会导致未定义的行为。**

编辑：看起来您是在询问指向的对象，而不是指针本身。在这种情况下，根本没有线程安全指标。为什么会有？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:56:48.023

`shared_ptr`与内置类型具有相同级别的线程安全性。

您可以同时从多个线程执行读取 (const) 操作。

您还可以从多个线程同时对不同实例执行写操作（即使用可变操作，例如`operator=`or ）。这包括这些实例共享相同引用计数的情况（因为为引用计数器提供原子增量/减量）。`reset``shared_ptr``shared_ptr`

如果您需要任何其他类型的访问，则需要对其进行同步，否则您将获得未定义的行为。

# python - 在芹菜中结合工作结果

> ID：12101542
> 
> 赞同：6
> 
> 时间：2012-08-23T23:52:03.397
> 
> 标签：python, python-2.7, celery

我正在使用 celery 开发软件升级系统。我有一个我正在努力干净地实施的用例。以下是我的工作：

> **device_software_updates(device_id)**
> 
> ```
> returns a list of software updates that need to be installed on a device 
> ```
> 
> **已安装的设备软件（设备 ID）**
> 
> ```
> returns the software modules that are currently installed on a device 
> ```
> 
> **latest_device_software(device_id)**
> 
> ```
> returns the latest software versions available for a device 
> ```
> 
> **软件更新（已安装软件、最新软件）**
> 
> ```
> returns the latest software modules that are not installed 
> ```

在纯 python 中，device_software_updates 的实现可能看起来像

```
def device_software_updates(device_id):
    return software_updates(installed_device_software(device_id),
                            latest_device_software(device_id)) 
```

在 Celery 3.0 中实现这一点的最干净的方法是什么？我想使用组做一些事情。我当前的实现如下所示：

```
def device_software_updates(device_id):
    return (
        group(installed_device_software.s(device_id),
              latest_device_software.s(device_id)) |
        software_updates.s()
    )() 
```

不幸的是，这意味着 software_updates 的 argspec`software_updates(arg_list)`并不理想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T03:46:48.417

我相信使用*和弦*是处理这个问题的正确方法。

根据[http://docs.celeryproject.org/en/latest/userguide/canvas.html#groups](http://docs.celeryproject.org/en/latest/userguide/canvas.html#groups)上的 Celery 文档，

> 和弦是仅在任务集中的所有任务都完成执行后才执行的任务。
> 
> ...
> 
> 和弦就像一个组，但有一个回调。一个和弦由一个标题组和一个正文组成，其中正文是一个任务，应该在标题中的所有任务完成后执行。

这是一个逐行分解的示例（来自 Celery 文档）

```
callback = tsum.subtask()
header = [add.subtask((i, i)) for i in xrange(100)]
result = chord(header)(callback)
result.get() 
```

在您的情况下，您可以执行类似的操作，例如：

```
@celery.task
def device_software_updates():
    callback = software_updates.subtask()
    header = [
              installed_device_software.subtask(device_id), 
              latest_device_software.s(device_id) 
             ]
    result = chord(header)(callback)
    return result.get() 
```

# pdf - PDF 文件中的 2 个空格被渲染为一个空格

> ID：12101549
> 
> 赞同：0
> 
> 时间：2012-08-23T23:52:30.070
> 
> 标签：pdf, itext

我创建了一个在字符之间有多个空格的 PDF 文件。PDF中就是这样。但是当由 Acrobat 呈现时，它是每个单词之间的一个空格。这导致条形码字体出现问题。

PDF：

```
0 0 0 rg
(Before  after  two  spaces.)Tj 
```

任何想法为什么？（PDF 位于[http://simba.windward.net/temp/PdfSpacing.pdf](http://simba.windward.net/temp/PdfSpacing.pdf)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:09:17.540

如我所见，正好有两个空格。

![在此处输入图像描述](../Images/a4537168c5df7d739e8e43b84ad17437.png)

这是您的案例的一个空间（字体、大小等）

![在此处输入图像描述](../Images/a55ad890d1c73178d3a5ad00701f1bad.png)

空格字形不是“W”字母大小。这取决于设计师的观点。如果您绝对有必要将空格宽度设置为一些真正的 BIG 值，您可以在字体描述符部分中将其设置为空格字符的宽度。

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:36:36.303

您的文档在每个单词之间包含 2 个空格。Foxit、SumatraPDF 和其他 PDF 查看器提取带有 2 个空格的文本。只有 Acrobat 似乎执行某种“优化”并在选择和复制文本时合并空格。
显示文件时，单词之间的空格也对应于 Acrobat 中的 2 个空格，问题仅出现在复制/粘贴操作中。无法禁用 Acrobat 中的此行为。
这会以何种方式影响您的条形码文本？

# date - Excel VBA - 查找上一个日期

> ID：12101554
> 
> 赞同：0
> 
> 时间：2012-08-23T23:52:51.897
> 
> 标签：date, excel, validation, vba

您好我正在尝试对用户输入的日期范围进行一些 UserForm 验证。

需要选择的日期范围是从周一到周日的前一周，例如。2012 年 8 月 13 日至 2012 年 8 月 19 日。因此，如果我今天（2012 年 8 月 24 日）运行报告，我如何才能确定我需要输入的日期是 2012 年 8 月 13 日至 2012 年 8 月 19 日，如果我运行明天报告。

我可以通过计算我运行报告的那一天（例如星期五）的 WeekDayName 来做到这一点，然后使用 DateAdd 减去第一个日期的前一个星期一（-11）并减去前一个星期日（- 5) 第二次约会。

因此，如果用户要输入 2012 年 8 月 14 日和 2012 年 8 月 19 日的日期范围，则会出现一个 msgbox，告诉他们应该输入的日期范围是 2012 年 8 月 13 日到 2012 年 8 月 19 日，他们是否要继续。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:12:09.657

这将起作用：

```
Sub testDate()

    Dim myDate As Date
    myDate = "8/14/2012"

    Dim weekStartDate As Integer
    weekStartDate = 2
    'set for the sunday -> sunday for the given date

    Dim startDate, endDate As Date
    startDate = myDate - Weekday(myDate) + weekStartDate   'take current date, find system weekstart (Sunday), adjust accordingly
    endDate = startDate + 6    'you are only adding 6 days to your week it seems?

    MsgBox ("Please select a date between " & startDate & " and " & endDate)

End Sub 
```

当您使用`Weekday(myDate)`它时，它会返回一个整数，它是自系统周开始以来经过的天数，我相信通常是星期日。所以`Monday = 1`等等。

# c - 对管道实现感到困惑

> ID：12101561
> 
> 赞同：1
> 
> 时间：2012-08-23T23:53:35.717
> 
> 标签：c, unix, pipe

管道的一种实现是：

```
#define STD_INPUT 0
#define STD_OUTPUT 1
pipeline(char *process1, char *process2)
{
    int fd[2];

    pipe(&fd[0]);
    if (fork() != 0) {
        /* The parent process executes these statements. */
        close(fd[0]);
        close(STD_OUTPUT);
        dup(fd[1]);
        close(fd[1]);    /* this file descriptor not needed anymore */
        execl(process1, process1, 0);
    }
    else {
        /* The child process executes these statements. */
        close(fd[1]);
        close(STD_INPUT);
        dup(fd[0]);
        close(fd[0]);   /* this file descriptor not needed anymore */
        execl(process2, process2, 0);
   }
} 
```

我对分别使用每个 dup 调用之后的两个语句感到困惑。

```
close(fd[1]);    /* this file descriptor not needed anymore */ 
```

和

```
close(fd[0]);   /* this file descriptor not needed anymore */ 
```

我被告知不再需要描述符，但对我来说，这些描述符代表管道的每一端，那么为什么不再需要它们呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:56:18.327

该`pipe`调用返回用于单向通信的读取描述符和写入描述符。但是，写入器不需要读取描述符 ( `fd[0]`)。而且，读者不需要写描述符（`fd[1]`）。因此，调用后的每个进程都会`fork`关闭它不需要的描述符，并使用它确实需要的描述符。

因此，父母是您示例中的作者。它`fd[0]`先关闭，然后关闭`STD_OUTPUT`。然后它会复制，因为它可用`fd[1]`，它现在将在其中。`STD_OUTPUT`由于管道的输出描述符现在已复制，因此也不再需要它，因此将其关闭。现在，当作者向 写入内容时`STD_OUTPUT`，它将写入管道的输出描述符。

作为读者的孩子执行类似的逻辑，但在另一个描述符上。它首先关闭`fd[1]`，然后关闭`STD_INPUT`。然后它会复制`fd[0]`，从而导致描述符位于 中`STD_INPUT`。复制后，管道的输入描述符不再需要，因此关闭。现在，当阅读器从 中读取内容时`STD_INPUT`，它将从管道的输入描述符中读取。

# iphone - 仅构建更新模拟器二进制文件，而不是 iPhone 的

> ID：12101564
> 
> 赞同：0
> 
> 时间：2012-08-23T23:54:00.007
> 
> 标签：iphone, ios5, ios-simulator

我有一些运行良好的代码 - 所有行都按预期执行 - 在 iOS 模拟器上。但是当我切换到 iPhone 时，有些代码甚至没有运行！[Xcode 4.4.1] 例如，这里有两行，第一行在原始源中，是几天前的，第二行是今天刚刚添加的：

NSLog(@"原文");

NSLog(@"新增文字");

第二行是最近添加的，当应用程序在 iPhone 上运行时，它根本不会显示在调试输出中，但是当它在模拟器上运行时它就在那里。

看起来我对新版本所做的更改都没有链接到 iPhone 版本中。就好像为 iPhone 版本链接的目标文件在构建期间根本不会更新，即使源已更改。我已经完成了产品->清洁，但它没有帮助......

我会很感激任何帮助/建议，因为我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:33:56.243

您可能正在尝试调试在发布模式下编译的代码。所以很多信息都被优化了。在您的方案配置中设置调试。

# database - 对现有数据库使用 derby ij

> ID：12101567
> 
> 赞同：2
> 
> 时间：2012-08-23T23:54:22.830
> 
> 标签：database, ubuntu, command-line-interface, derby

虽然我在[安装和设置 derby 时遇到了一些问题](https://askubuntu.com/questions/179634/noclassdeffounderror-org-apache-derby-tools-ij)，但我确实取得了部分成功：

```
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
root@dur:~/apache-james-3.0-beta4/var/store/derby# ll
total 36
drwxr-xr-x 5 root root  4096 Aug 23 16:46 ./
drwxr-xr-x 5  501 staff 4096 Aug 23 02:07 ../
-rw-r--r-- 1 root root     4 Aug 23 02:07 dbex.lck
-rw-r--r-- 1 root root    38 Aug 23 02:07 db.lck
-rw-r--r-- 1 root root   187 Aug 23 16:46 derby.log
drwxr-xr-x 2 root root  4096 Aug 23 02:07 log/
drwxr-xr-x 2 root root  4096 Aug 23 02:07 seg0/
-rw-r--r-- 1 root root   868 Aug 23 02:07 service.properties
drwxr-xr-x 2 root root  4096 Aug 23 02:07 tmp/
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
root@dur:~/apache-james-3.0-beta4/var/store/derby# java org.apache.derby.tools.ij
ij version 10.9
ij> quit;
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
```

我现在如何查询这个特定的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T03:15:24.483

一个完整的示例，使用 Derby 和 Squirrel，假设您已经在系统上安装了 Derby 数据库：

1.  将[Squirrel SQL](http://www.squirrelsql.org/#installation)安装到`$HOME/bin/squirrel`
2.  将[Apache Derby](http://db.apache.org/derby/)安装到`$HOME/bin/db-derby`
3.  跑松鼠 ( `cd $HOME/bin/squirrel ; ./squirrel-sql.sh`)
4.  单击**驱动程序**以打开驱动程序面板。
5.  双击**Apache Derby Embedded**。
6.  单击**额外类路径**。
7.  单击**添加**。
8.  选择`$DERBY_HOME/lib/derby.jar`。
9.  将**示例 URL**设置为数据库路径（例如，包含 的目录`seg0`）。
10.  单击**确定**保存。

此时 Apache Derby Embedded 图标不应再有红色 X。

然后：

1.  单击**别名**选项卡。
2.  将**名称**设置为：DerbyDB
3.  确保**驱动程序**设置为：Apache Derby Embedded
4.  验证**URL**是否指向包含`seg0`.
5.  单击**确定**（不需要用户名或密码？）。
6.  单击**连接**。

数据库现在已连接，您应该会看到模式。

然后：

1.  按`Ctrl+n`显示新的 SQL 编辑器窗口，或单击**SQL**选项卡。
2.  类型：`SELECT * FROM SYS.SYSTABLES`
3.  单击 Running human 图标（或按`Ctrl+Shift+Enter`）执行查询。

您现在可以对 Derby 数据库执行 SQL 语句。

注意：这在技术上并不能回答问题，因为这个答案没有解释如何使用交互式命令行界面 ( `ij`)。答案提出了使用 Squirrel 的图形界面查询数据库的可行替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:27:33.610

我仍然不知道如何真正查询数据库本身，但连接起来相当简单，[显然](https://stackoverflow.com/questions/4424892/is-there-a-tool-other-than-ij-to-look-into-a-local-derby-database-folder?rq=1)：

```
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
root@dur:~/apache-james-3.0-beta4/var/store/derby# pwd
/root/apache-james-3.0-beta4/var/store/derby
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
root@dur:~/apache-james-3.0-beta4/var/store/derby# ll
total 24
drwxr-xr-x 4 root root  4096 Aug 23 18:24 ./
drwxr-xr-x 5  501 staff 4096 Aug 23 02:07 ../
-rw-r--r-- 1 root root  1092 Aug 23 18:24 derby.log
drwxr-xr-x 2 root root  4096 Aug 23 02:07 log/
drwxr-xr-x 2 root root  4096 Aug 23 02:07 seg0/
-rw-r--r-- 1 root root   868 Aug 23 02:07 service.properties
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
root@dur:~/apache-james-3.0-beta4/var/store/derby# java org.apache.derby.tools.ij 
ij version 10.9
ij> connect 'jdbc:derby:/root/apache-james-3.0-beta4/var/store/derby';
ij> 
;
ij> show schema;
ERROR 42X01: Syntax error: Encountered "show" at line 1, column 1.
Issue the 'help' command for general information on IJ command syntax.
Any unrecognized commands are treated as potential SQL commands and executed directly.
Consult your DBMS server reference documentation for details of the SQL syntax supported by your server.
ij> 
;
ij> show schemas;
TABLE_SCHEM                   
------------------------------
APP                           
NULLID                        
SQLJ                          
SYS                           
SYSCAT                        
SYSCS_DIAG                    
SYSCS_UTIL                    
SYSFUN                        
SYSIBM                        
SYSPROC                       
SYSSTAT                       

11 rows selected
ij> show tables;
TABLE_SCHEM         |TABLE_NAME                    |REMARKS             
------------------------------------------------------------------------
SYS                 |SYSALIASES                    |                    
SYS                 |SYSCHECKS                     |                    
SYS                 |SYSCOLPERMS                   |                    
SYS                 |SYSCOLUMNS                    |                    
SYS                 |SYSCONGLOMERATES              |                    
SYS                 |SYSCONSTRAINTS                |                    
SYS                 |SYSDEPENDS                    |                    
SYS                 |SYSFILES                      |                    
SYS                 |SYSFOREIGNKEYS                |                    
SYS                 |SYSKEYS                       |                    
SYS                 |SYSPERMS                      |                    
SYS                 |SYSROLES                      |                    
SYS                 |SYSROUTINEPERMS               |                    
SYS                 |SYSSCHEMAS                    |                    
SYS                 |SYSSEQUENCES                  |                    
SYS                 |SYSSTATEMENTS                 |                    
SYS                 |SYSSTATISTICS                 |                    
SYS                 |SYSTABLEPERMS                 |                    
SYS                 |SYSTABLES                     |                    
SYS                 |SYSTRIGGERS                   |                    
SYS                 |SYSVIEWS                      |                    
SYSIBM              |SYSDUMMY1                     |                    
APP                 |JAMES_DOMAIN                  |                    
APP                 |JAMES_MAIL                    |                    
APP                 |JAMES_MAILBOX                 |                    
APP                 |JAMES_MAIL_PROPERTY           |                    
APP                 |JAMES_MAIL_USERFLAG           |                    
APP                 |JAMES_RECIPIENT_REWRITE       |                    
APP                 |JAMES_SUBSCRIPTION            |                    
APP                 |JAMES_USER                    |                    
APP                 |OPENJPA_SEQUENCE_TABLE        |                    

31 rows selected
ij> quit;
root@dur:~/apache-james-3.0-beta4/var/store/derby# 
```

# android - 什么是平均值。移动应用程序的最佳连接超时？

> ID：12101568
> 
> 赞同：16
> 
> 时间：2012-08-23T23:54:23.720
> 
> 标签：android, ios, timeout

这个问题是关于试图找到一个科学或统计上合理的理由来选择超时。我的意思是每个应用程序都必须这样做，但最佳超时时间是多少？我们需要更多的人来回答或评论。+3，+4 不代表问题解决了。一个重要的问题值得更多的答案。我们都可以从这些知识中受益。

基本上试图比较：

```
 a short timeout of say 20 seconds, but two connection attempts are made 
```

对比

```
 one long connection attempt of say 40 or 60 seconds. 
```

哪个最有可能建立连接？我们需要确凿的事实。到目前为止，我得到的数字是 10 多岁、42 多岁、60 多岁。但是什么才是真正的最佳呢？

现在，当然，在 5-10 秒后，无论哪种方式，用户都应该被告知问题，但是建立连接的最佳努力方法是什么。

注意：我知道有很多因素，但作为应用程序开发人员，我们不能总是获得检查 wifi 信号情况等的许可。仍然必须有一些平均最好的合理答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T00:01:47.550

希望您能得到更好的答案，但从个人经验来看，我可以谈谈用户方面的事情。如果我打开一个需要数据连接的应用程序，例如我的网络浏览器或社交客户端，我希望它在 5 秒内超时，因为确定我是否真的有连接不应该花费很长时间.

可以从设备的角度来看待它，但这变化很大（wifi 与 3G、特定网络芯片、操作系统、当前活动的数据连接等），而用户需求可能是最重要的因素。如果数据连接对应用程序来说不一定是关键的，那么您可以在 30 秒内侥幸逃脱，但主要的一点是，技术限制只是您应该为连接超时预算多长时间的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T00:02:33.003

我总是将十秒作为最大值，尽管**这是个人喜好**。想想你是否拿着手机五秒钟等待信息出现。我已经很沮丧了——因此添加双精度值似乎是合适的。如果有问题，我想通过`Toast`页脚视图或其他方式了解它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-12T01:46:50.173

以下是[用户体验研究对用户注意力](https://ux.stackexchange.com/a/56747/3587)的看法（突出显示了有趣的部分）：

> *   超过**1 秒**的时间会打断思绪
> *   超过**10秒**失去用户注意力
> *   最简单的任务应该在**1 分钟内完成**
> 
> 因此，如果这是一项对用户很重要的任务，那么延迟 60 秒是可以的。否则超过 10 秒是个问题。**奇怪的是，20 到 50 秒的时间范围对用户影响没有太大影响——它一直是在“失去注意力”之后但在“将放弃任务”之前。**
> 
> 本质上，如果你不能降低到 10 秒的超时限制，那么不要打扰并以不同的方式解决 UX 问题。

显然，这并不适用于所有情况，因此请持保留态度。

# python - 为什么 pickle.dumps 调用 __getattr__？

> ID：12101574
> 
> 赞同：4
> 
> 时间：2012-08-23T23:55:05.030
> 
> 标签：python, serialization, pickle

```
import cPickle

class Foo(object):
    def __init__(self):
        self._data = {'bar': 'baz'}

    def __getattr__(self, name):
        assert hasattr(self, '_data')
        return self._data[name]

    # I even had to define this just to stop KeyError: '__getstate__'
    def __getstate__(self):
        return self.__dict__

foo = Foo()
bar = cPickle.dumps(foo)
cPickle.loads(bar) 
```

这会引发断言错误。

我以为`pickle`/`cPickle`只是`__dict__`在转储时变成一个字符串，然后`__dict__`在加载时使用该字符串直接设置新对象的。为什么`dumps`需要打电话`bar.__getattr__`？我该如何改变`Foo`以避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:09:05.987

根据 cPickle 的文档：http: [//docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

```
object.__getstate__() 
```

> 类可以进一步影响其实例的腌制方式；如果类定义了方法`__getstate__()`，它会被调用，并且返回状态被腌制为实例的内容，而不是实例字典的内容。如果没有`__getstate__()`方法，则实例的`__dict__`被腌制。
> 
> 笔记
> 
> 在 unpickling 时，可能会在实例上调用一些方法，如`__getattr__()`、 `__getattribute__()`或。`__setattr__()`如果这些方法依赖于某些内部不变量为真，则该类型应该实现`__getinitargs__()`或`__getnewargs__()`建立这样的不变量；否则，既`__new__()`不会也 `__init__()`不会被调用。

由于您试图断言这`hasattr(self, '_data')`是真的，我相信您需要使用`__getinitargs__()`or `__getnewargs__()`。这是因为在使用 pickle 时，`__init__`不会调用 classes 方法。

# java - Java - 2D 字符串数组、动态表和空指针异常

> ID：12101576
> 
> 赞同：0
> 
> 时间：2012-08-23T23:55:27.227
> 
> 标签：java, regex, string, nullpointerexception, multidimensional-array

我正在研究乔姆斯基范式（CNF）动态规划作业，该作业由两部分（I，II）组成：（I）。让用户输入语法和（检查，接受）如果它是有效的 CNF 形式，或者（检查，拒绝）如果它是无效的 CNF 形式，然后（II）。让用户输入一个字符串以生成一个显示字符串派生的二维数组。无论字符串是语法的成员还是不是成员，都必须显示该表。

以下是所需的示例输出，可帮助将其置于上下文中。现在我可以一直询问和接收用户输入的字符串，但是在导出表打印出来的时候，我得到了 5 个 NPE：（

* * *

***********样本输出开始**********

 *** * *

在 CNF 中输入您的上下文无关语法：<- /** 第 (I) 部分的开始。*/

S:AB,A:BB,B:BA,A:a,B:b

================ 你的语法 ================

S -> AB

A -> BB

乙 -> 巴

一个->一个

乙->乙

===============================================<- /* *第（I）部分结束。*/

请输入字符串以生成表格：<-/* *part(II) 开始。*/

啊啊啊

========== 您的 CNF 生产表 =========

* * *

| 一个 | 小号 | 小号 | 小号 | 小号 | 小号 |

* * *

| | 乙| 乙| 乙| 乙| 乙|

* * *

| | | 一个 | | | |

* * *

| | | | 一个 | | |

* * *

| | | | | 一个 | |

* * *

| | | | | | 一个 | <-/** 第二部分结束。*/

* * *

****** *** *******样本输出结束****** *******

 *** * *

请原谅代码的总长度，但我认为我必须发布我的所有三个类，以防任何阅读此内容的人尝试并编译。

***GenerateRules.java 的开始***

```
import java.util.Arrays;
import java.util.Scanner;

public class GenerateRules 
{   

ProduceTable dyTab;

public final String NT1 = "A";
public final String NT2 = "B";
public final String NT3 = "C";

public final String terminal1 = "a";
public final String terminal2 = "b";
public final String terminal3 = "c";

//to store each rule and not overrwrite
//and infinitely loop per the initial 
//problem on 7/31/2012's original submission 
private String startingRule;
private String secondRule;
private String thirdRule;
private String fourthRule;
private String fifthRule;
private String grammarRules;

private String[] rulesArray;
private String[] alphaArray;

private String[][] rulesTable;

private String ruleSeparator = ",";
private String ruleDenoter = ">";
private String start = "S";
private String blank = " ";
private String epsilon = "e";

public GenerateRules()
{

    readStartingCNFRule();
    readSecondCNFRule();
    readThirdCNFRule();
    readFourthCNFRule();
    readFifthCNFRule();
    forgeGrammar();
    //readGrammarInput();

}

protected void readStartingCNFRule()     
{   
    Scanner in = new Scanner(System.in);

    //null condition for UI's first(starting) CNF rule
    String rules_input = null;

    //if rules are valid CNF form or not, default case 
    //set to null 
    boolean is_validRules = false;

    //condition to hold since input is volatile 
    while (!is_validRules)
    {

        try 
        {
            //user prompt for entering starting CNF rule 
            System.out.println("enter starting CNF rule in " +
                    " regex format: S>AB, or S> e,");

            rules_input = in.nextLine();

            //so compiler knows to split each rule by ',' indicator 
            String[] rules = rules_input.split(",");

            //iterate through the length of the rule 
            for (int i = 0; i < rules.length; i++)
            {

                String parts[] = rules[i].split(">");

                //provided format for delineating LHS from RHS
                String format = String.format("Rule: '%s', Yield: " +
                        "'%s'", parts[0], parts[1]);

                System.out.println(format);

        //conditions for ACCEPTING the starting rule
                if(rules_input.startsWith(start)&&rules_input.substring(1).equals(ruleDenoter)
                         &&rules_input.substring(2).contains(NT1)||rules_input.substring(2).contains(NT2)
                         ||rules_input.substring(2).contains(blank)&&rules_input.substring(3).contains(NT1)
                         ||rules_input.substring(3).contains(NT2)||rules_input.substring(3).contains(epsilon)
                         &&rules_input.substring(4).contains(ruleSeparator))
                {
                    System.out.println("success! S>AA, S>AB, S>BA, S>BB, or S> e, are" +
                            " ALL acceptable regexes for starting rule");

                    //stores the input of starting rule for upcoming use
                    startingRule = new String(rules_input);
                    is_validRules = true;
                }

        //conditions for REJECTING the starting rule   
        else if(!rules_input.startsWith(start)&&!rules_input.substring(1).equals(ruleDenoter)
                 &&!rules_input.substring(2).contains(NT1)||!rules_input.substring(2).contains(NT2)
                   &&!rules_input.substring(3).contains(NT1)||!rules_input.substring(3).contains(NT2)
                   ||!rules_input.substring(3).contains(blank)&&rules_input.substring(4).contains(ruleSeparator))
            {
            System.out.println("starting rule MUST match regex" +
                    "of form  S>AA, S>AB, S>BA, S>BB, or S> e, . Please re-enter.");

            is_validRules = false;

            rules_input = in.nextLine();
            }

          }//end of for-loop 

        }//end of try-loop  

        catch (Exception ex)
        {
            System.out.println(ex.getMessage());
        }   
    }//end of while-loop 

  }//end of readStartingCNFRule method  

 protected void readSecondCNFRule()     
{   
    Scanner in = new Scanner(System.in);

    String rules_input = null;

    //if rules are valid CNF form or not, default case 
    //set to null 
    boolean is_validRules = false;

    //condition to hold since input is volatile 
    while (!is_validRules)
    {

        try 
        {
            //user prompt for entering 2nd CNF rule 
            System.out.println("enter 2nd CNF rule in regex " +
                    "A>AA, or B>BB,");

            rules_input = in.nextLine();

            //so compiler knows to split each rule by ',' indicator 
            String[] rules = rules_input.split(",");

            //iterate through the length of the rule 
            for (int i = 0; i < rules.length; i++)
            {

                String parts[] = rules[i].split(">");

                //provided format for delineating LHS from RHS
                String format = String.format("Rule: '%s', Yield: " +
                        "'%s'", parts[0], parts[1]);

                System.out.println(format);

                //conditions for ACCEPTING the second rule 
                if(rules_input.startsWith(NT1)||rules_input.startsWith(NT2)&&rules_input.substring(1).equals(ruleDenoter)
                         &&rules_input.substring(2).contains(NT1)||rules_input.substring(2).contains(NT2)
                         &&rules_input.substring(3).contains(NT1)||rules_input.substring(3).contains(NT2)
                         &&rules_input.substring(4).contains(ruleSeparator))
                {
                    System.out.println("success! A>AA, A>AB, B>BB, or B>BA are " +
                            "ALL acceptable regex for 2nd rule ");

                    //stores the input of 2nd CNF rule for upcoming use
                    secondRule = new String(rules_input);
                    is_validRules = true;
                }

        //conditions for REJECTING the 2nd CNF production 
        else if(!rules_input.startsWith(NT1)||!rules_input.startsWith(NT2)&&!rules_input.substring(1).equals(ruleDenoter)
         &&!rules_input.substring(2).contains(NT1)||!rules_input.substring(2).contains(NT2)
         &&!rules_input.substring(3).contains(NT1)||!rules_input.substring(3).contains(NT2)
         &&!rules_input.substring(4).contains(ruleSeparator))
            {
            System.out.println("2nd CNF rule MUST match regex" +
                    "of either A>AA, A>AB, B>BB, or B>BA. Please re-enter.");

            is_validRules = false;

            rules_input = in.nextLine();
            }

          }//end of for-loop 

        }//end of try-loop  

        catch (Exception ex)
        {
            System.out.println(ex.getMessage());
        }   
    }//end of while-loop 

  }//end of readSecondCNFRule method 

 protected void readThirdCNFRule()     
    {   
        Scanner in = new Scanner(System.in);

        String rules_input = null;

        //if rules are valid CNF form or not, default case 
        //set to null 
        boolean is_validRules = false;

        //condition to hold since input is volatile 
        while (!is_validRules)
        {

            try 
            {
                //user prompt for entering 3rd CNF rule 
                System.out.println("enter 3rd CNF rule in regex " +
                        "A>AA, or B>BB,");

                rules_input = in.nextLine();

                //so compiler knows to split each rule by ',' indicator 
                String[] rules = rules_input.split(",");

                //iterate through the length of the rule 
                for (int i = 0; i < rules.length; i++)
                {

                    String parts[] = rules[i].split(">");

                    //provided format for delineating LHS from RHS
                    String format = String.format("Rule: '%s', Yield: " +
                            "'%s'", parts[0], parts[1]);

                    System.out.println(format);

                    //conditions for ACCEPTING the 3rd rule 
                    if(rules_input.startsWith(NT1)||rules_input.startsWith(NT2)&&rules_input.substring(1).equals(ruleDenoter)
                             &&rules_input.substring(2).contains(NT1)||rules_input.substring(2).contains(NT2)
                             &&rules_input.substring(3).contains(NT1)||rules_input.substring(3).contains(NT2)
                             &&rules_input.substring(4).contains(ruleSeparator))
                    {
                        System.out.println("success! A>AA, A>AB, B>BB, or B>BA are " +
                                "ALL acceptable regexes for 3rd rule ");

                        //stores the input of 3rd CNF rule for upcoming use
                        thirdRule = new String(rules_input);
                        is_validRules = true;
                    }

            //conditions for REJECTING the 3rd CNF production 
            else if(!rules_input.startsWith(NT1)||!rules_input.startsWith(NT2)&&!rules_input.substring(1).equals(ruleDenoter)
             &&!rules_input.substring(2).contains(NT1)||!rules_input.substring(2).contains(NT2)
             &&!rules_input.substring(3).contains(NT1)||!rules_input.substring(3).contains(NT2)
             &&!rules_input.substring(4).contains(ruleSeparator))
                {
                System.out.println("3rd CNF rule MUST match regex" +
                        "of either A>AA, A>AB, B>BB, or B>BA. Please re-enter.");

                is_validRules = false;

                rules_input = in.nextLine();
                }

              }//end of for-loop 

            }//end of try-loop  

            catch (Exception ex)
            {
                System.out.println(ex.getMessage());
            }   
        }//end of while-loop 

      }//end of readThirdCNFRule method 

 protected void readFourthCNFRule()     
    {   
        Scanner in = new Scanner(System.in);

        String rules_input = null;

        //if rules are valid CNF form or not, default case 
        //set to null 
        boolean is_validRules = false;

        //condition to hold since input is volatile 
        while (!is_validRules)
        {
            try 
            {
                //user prompt for entering 4th CNF rule 
                System.out.println("enter 4th CNF rule in regex " +
                        "A>a, or B>b,");

                rules_input = in.nextLine();

                //so compiler knows to split each rule by ',' indicator 
                String[] rules = rules_input.split(",");

                //iterate through the length of the rule 
                for (int i = 0; i < rules.length; i++)
                {

                    String parts[] = rules[i].split(">");

                    //provided format for delineating LHS from RHS
                    String format = String.format("Rule: '%s', Yield: " +
                            "'%s'", parts[0], parts[1]);

                    System.out.println(format);

                    //conditions for ACCEPTING the 4th rule 
                    if(rules_input.startsWith(NT1)||rules_input.startsWith(NT2)&&rules_input.substring(1).equals(ruleDenoter)
                             &&rules_input.substring(2).contains(terminal1)||rules_input.substring(2).contains(terminal2)
                             &&rules_input.substring(3).contains(ruleSeparator))
                    {
                        System.out.println("success! A>a, or B>b are " +
                                "ALL acceptable regexes for 4th rule ");

                        //stores the input of 4th CNF rule for upcoming use
                        fourthRule = new String(rules_input);
                        is_validRules = true;
                    }

            //conditions for REJECTING the 4th CNF rule 
            else if(!rules_input.startsWith(NT1)||!rules_input.startsWith(NT2)&&!rules_input.substring(1).equals(ruleDenoter)
                     &&!rules_input.substring(2).contains(terminal1)||!rules_input.substring(2).contains(terminal2)
                     &&!rules_input.substring(3).contains(ruleSeparator))
                {
                System.out.println("4th CNF rule MUST match regex" +
                        "of either A>a, or B>b,  . Please re-enter.");

                is_validRules = false;

                rules_input = in.nextLine();
                }

              }//end of for-loop 

            }//end of try-loop  

            catch (Exception ex)
            {
                System.out.println(ex.getMessage());
            }   
        }//end of while-loop 

      }//end of readFourthCNFRule method 

 protected void readFifthCNFRule()     
 {  
        Scanner in = new Scanner(System.in);

        String rules_input = null;

        //if rules are valid CNF form or not, default case 
        //set to null 
        boolean is_validRules = false;

        //condition to hold since input is volatile 
        while (!is_validRules)
        {

            try 
            {
                //user prompt for entering 5th CNF rule 
                System.out.println("enter 5th CNF rule in regex " +
                        "A>a, or B>b,");

                rules_input = in.nextLine();

                //so compiler knows to split each rule by ',' indicator 
                String[] rules = rules_input.split(",");

                //iterate through the length of the rule 
                for (int i = 0; i < rules.length; i++)
                {

                    String parts[] = rules[i].split(">");

                    //provided format for delineating LHS from RHS
                    String format = String.format("Rule: '%s', Yield: " +
                            "'%s'", parts[0], parts[1]);

                    System.out.println(format);

                    //conditions for ACCEPTING the 5th rule 
                    if(rules_input.startsWith(NT1)||rules_input.startsWith(NT2)&&rules_input.substring(1).equals(ruleDenoter)
                             &&rules_input.substring(2).contains(terminal1)||rules_input.substring(2).contains(terminal2)
                             &&rules_input.substring(3).contains(ruleSeparator))
                    {
                        System.out.println("success! A>a, or B>b are " +
                                "ALL acceptable regexes for 5th rule ");

                        //stores the input of 5th CNF rule for upcoming use
                        fifthRule = new String(rules_input);
                        is_validRules = true;
                    }

            //conditions for REJECTING the 5th CNF rule 
            else if(!rules_input.startsWith(NT1)||!rules_input.startsWith(NT2)&&!rules_input.substring(1).equals(ruleDenoter)
                     &&!rules_input.substring(2).contains(terminal1)||!rules_input.substring(2).contains(terminal2)
                     &&!rules_input.substring(3).contains(ruleSeparator))
                {
                System.out.println("5th CNF rule MUST match regex" +
                        "of either A>a, or B>b,  . Please re-enter.");

                is_validRules = false;

                rules_input = in.nextLine();
                }

              }//end of for-loop 

            }//end of try-loop  

            catch (Exception ex)
            {
                System.out.println(ex.getMessage());
            }   
        }//end of while-loop 

      }//end of readFifthCNFRule method 
 /**
  * my protected void forgeGrammar() method
  * description: aggregates all CNF rules into one
  * string and removes the commas before converting
  * the rules(grammar) into a 2D array. then, takes
  * ui from user (alphaString) so can pass by reference
  * to ProduceTable.java 
  * @param - no-arg
  * @return - n/a
  */
protected void forgeGrammar()
{

    //this verifies that all 5 rules displayed in the console are valid
    grammarRules = new String(startingRule + secondRule + thirdRule + fourthRule + fifthRule);

    rulesArray = new String[grammarRules.length()];

    //remove the commas from the grammar  
    rulesArray = grammarRules.split("[,]");

    //convert the grammar to a 2D String array
    rulesTable = new String[rulesArray.length][5];
    for (int i = 0; i < rulesTable.length; i++)
    {
        String[] rulesMatrix = rulesArray[i].split(blank);

        for(int j = 0; j < rulesMatrix.length; j++)
        {
            rulesTable[i][j] = rulesMatrix[j];
        }
    }

    for(int i = 0; i < rulesTable.length; i++)
    {
        /**intermittent print out, compilation checkpoint*/
        System.out.println(Arrays.toString(rulesTable[i]));
    }

    //new Scanner instance to receive the alpha string 
    Scanner in = new Scanner(System.in);

    String alpha_input = null;

    //the printout prompt for user to enter the grammar 
    //string  
    System.out.println("enter a string please using only " +
            "terminals a or b with no whitespaces");

    alpha_input = in.nextLine();

    //initialize alphaArray 
    alphaArray = new String[alpha_input.length()];

    //check for valid string entry 
    for(int i = 0; i < alpha_input.length(); i++)
    {
        String temp = Character.toString(alpha_input.charAt(i));
        if(alphaStringTest(temp))
        {
            alphaArray[i] = temp;
        }
        else      
        {
            System.out.println("alpha string must contain only" +
                    "a or b . please re-enter.");
            alpha_input = in.nextLine();
        }
    }

    dyTab = new ProduceTable(rulesTable, alphaArray);
}//end of forgeGrammar method 

/**
 * my public Boolean alphaStringTest method
 * @param String ui - the input string to test
 * (pass by 'reference')
 * @return - (Boolean) whether user input 
 */

public Boolean alphaStringTest(String ui)
{
    String a = "a";
    String b = "b";

    if(ui.equals(a)||ui.equals(b))
    {
        return true;
    }
    return false;
}//end of alphaStringTest method
//end of GenerateRules.java
} 
```

***GenerateRules.java 结束***

接下来是 ProduceTable 类：

***ProduceTable.java 的开始***

```
public class ProduceTable 
{
private String[][] dynamicTable;
private String[][] rulesTable;
private String[] alphaArray;

/**
 * my ProduceTable class constructor
 * @param rt - pass by reference from GR.java (line 573)
 * @param alph - pass by reference from GR.java (line 573)
 */
public ProduceTable(String[][] rt, String[] alph) 
{ 
    //'re'-initializing the rulesTable and the 
    //ui alpha string 
    rulesTable = new String[rt.length][rt[0].length];
            for(int i = 0; i <rt.length; i++)
            {
                for(int j = 0; j <rt[0].length; j++)
                {
                    rulesTable[i][j] = rt[i][j];
                }            
            }
            try
            {
                alphaArray = new String[alph.length]; 

            System.arraycopy(alph, 0, alphaArray, 0, alph.length);
            }
            catch(Exception ex)
            {
                System.out.println("null input string" + ex);
            }

            run716();
}//end of class constructor 

/**
 * my public void run716 method
 * description: algo which implements the proof idea of a context-free grammar
 * in CNF (G) generating the context-free lang. L . in other words,
 * this algo generates a table for L(G) and lets the user know if their alphaString
 * is/is not a member of L(G).
 * @param - no -arg
 * @return - n/a
 * 
 */
public void run716() 
{

        //the dynamic table created as a new string[][] with the 
        //length of the String[] alphaArray, as previously received,
        //as its defaulted input 
        dynamicTable = new String[alphaArray.length][alphaArray.length];

        //call to external method to prevent the word 'null' from printing
        //out in dynamicTable and instead insert blank spaces.
        trim();

                //2,3.iterate through each variable A (we are examining
                //each substring of length 1

                for(int i =0; i < alphaArray.length; i++)
                {       

                        //4.test if A-->b is 
                        //a valid rule at b = wi (where wi.length = 1)
                       for(int a=0;a<rulesTable[0].length;a++)
                       {

                    // boolean condition for wi = 1 
                           if(alphaArray[i].equals(rulesTable[1][a]))
                           {

                               //5\. if A-->b is a rule, place A in the table
                               dynamicTable[i][i] = rulesTable [0][a];
                           }

                       }
                }

                //6\. for l = 2 to n where l = length of substring 
                //this is for iterating upon substrings of min. len. 2
                for(int l=1; l<alphaArray.length;l++)
                {   

                    //7\. i = starting position of substring, i.e. for i = 1
                    //to n - l + 1
                    for(int i=0; i<rulesTable.length-l; i++)
                    {

                        //8\. let j = i + l - 1, (technically, the -1 is covered
                        //in (7, above), where i is iterated until < rulesTable.length - 1,
                        //i.e., wherein j = end position of substring. Hence, j = i + l. 
                        int j = i+l;   

                        //9\. for k = i to j - 1, k < j , where k is the 
                        //'split' position 'declaration' BEFORE the 
                        //A-->BC rule form cases are examined 
                        for(int k=i; k<j ;k++)
                        {   
                            //where substring_marker is used as the 
                            //split marker for each rule A-->BC 
                            for(int substring_marker=0; substring_marker<rulesTable[0].length; substring_marker++)
                            {   
                                //conditions for where the substring length 
                                //is greater than or equal to 2, pivoting from
                                //the second row onward 
                                if(rulesTable[1][substring_marker].length() >= 2)
                                {      

                                //allows a printout for a blank above the diagonal;
                                //i.e., a blank occurs in the table iff the 2 terminals
                                //below it cannot be produced in any one step by any
                                //available rule in the grammar 
                                if(!dynamicTable[i][k].equals(" ") && !dynamicTable
                                        [k+1][j].equals(" "))
                                {   

                                    //10 for each rule A--> BC, if table(i,k) 
                                    //contains B and table(k+1,j) contains
                                    //C, put A in table(i,j),
                                    if(dynamicTable[i][k].equals(rulesTable[1][substring_marker].substring(0,1))
                                            &&dynamicTable[k+1][j].equals(rulesTable[1][substring_marker].substring(1,2)))
                                    {
                                        //11.if table(i,k) contains B and table(k+1,j) 
                                        //contains C, put A in table(i,j)
                                        dynamicTable[i][j]= rulesTable[0][substring_marker]; 
                                    }
                                }
                                }
                            }                    
                        }
                    }
                }

                print7162D();
                grammarMember();

    }//end of run716 method 

/**
 * my public static void printAlgo2d() 
 * description: provides some printout formatting
 * for the table to make it more grid-like and 
 * readable
 * @param - no-arg
 * @return - none 
 */
public void print7162D()
{
    //row iterator for alphaString
    for(int k=0;k<dynamicTable.length;k++)
    {
        //col iterator for alphaString 
        for(int j=0; j<dynamicTable[0].length; j++)
        {
            //prints out vertical line to create a 'grid'-like
            //structure for the table, help with readability,
            //and delineate between variables 
            System.out.print(dynamicTable[k][j] + "|");
        }

            //prints out a space between each row 
            System.out.println();

            //prints horizontal line-dash to help with
            //readability and aesthetic structure between rows
            System.out.println("-----");
     }

}//end of print7162D        

/**
 * my public void trim() method 
 * description: compensates for variation in ui
 * alphaString input length, supplanting the word
 * 'null' with blank whitespace
 * @param - no-arg
 * @return - n/a
 */
public void trim()
{
    for(int k=0;k<dynamicTable.length;k++)
    {
        for(int j=0; j<dynamicTable[0].length; j++)
        {
            dynamicTable[k][j]= " ";
        }
    }
}

/**
 * my public void grammarMember method
 * description: provides the printout for the table
 * @param - no-arg
 * @return - n/a
 */
public void grammarMember()
{
    if (dynamicTable[0][alphaArray.length - 1].indexOf("S") == -1)
    {
        System.out.println("alphaString is not a member of L(G)");
    }
    else
    {
        System.out.println("alphaString is a member of L(G)");
    }
}//end of grammarMember method 
//end of ProduceTable.java 
} 
```

***ProduceTable.java 结束***

最后，一个快速的小 TestHarness 类将它们放在一起

***测试线束.java***

```
public class TestHarness 
{
public static void main(String args[])
{
    String[][] p = null;
    GenerateRules grrr = new GenerateRules ();
    grrr.readStartingCNFRule();
    grrr.readSecondCNFRule();
    grrr.readThirdCNFRule();
    grrr.readFourthCNFRule();
    grrr.readFifthCNFRule();
    grrr.forgeGrammar();
    ProduceTable pt = new ProduceTable(p, args);
    pt.run716();
    pt.print7162D();
    pt.grammarMember();
    pt.trim();

}
} 
```

如果你碰巧编译这个，这里有一个如何在我的程序中输入语法的快速演示：

```
enter starting CNF rule in  regex format: S>AB, or S> e,
S>AB,
Rule: 'S', Yield: 'AB'
yes! S>AA, S>AB, S>BA, S>BB, or S> e, are valid 1st regexes  

enter 2nd CNF rule in regex A>AA, or B>BB,
A>AA,
Rule: 'A', Yield: 'AA'
success! A>AA, A>AB, B>BB, or B>BA are ALL valid 2nd regexes

enter 3rd CNF rule in regex A>AA, or B>BB,
B>BB,
Rule: 'B', Yield: 'BB'
yes! A>AA, A>AB, B>BB, or B>BA are ALL valid 3rd regexes

enter 4th CNF rule in regex A>a, or B>b,
A>a,
Rule: 'A', Yield: 'a'
success! A>a, or B>b are ALL valid regexes for 4th rule 

enter 5th CNF rule in regex A>a, or B>b,
B>b,
Rule: 'B', Yield: 'b'
success! A>a, or B>b are ALL acceptable regexes for 5th rule 
==========Your Grammar:======
Rule: 'S', Yield: 'AB'
Rule: 'A', Yield: 'AA'
Rule: 'B', Yield: 'BB'
Rule: 'A', Yield: 'a'
Rule: 'B', Yield: 'b' 
```

如果有人有任何建议，将不胜感激。谢谢你。5个NPE是在敲回车输入语法字符串后立即生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:50:13.020

ProduceTable.java中的这一行出现了问题：

```
if (rulesTable[1][substring_marker].length() >= 2) 
```

我不确定这些循环到底做了什么，没有时间阅读所有这些。我认为它应该是这样的

```
if (rulesTable[k][substring_marker].length() >= 2) 
```

我将首先检查计数器是否都按预期设置以及数组索引是否正确。

此外，您看到的不是 5 个 NullPointerExceptions，而是 1 个 NPE 的堆栈跟踪。****

# php - 仅提取数据库中的第一条记录

> ID：12101580
> 
> 赞同：0
> 
> 时间：2012-08-23T23:55:50.507
> 
> 标签：php

当我在 PHP 中运行它时，它只提取表中的第一条记录，然后显示它。我需要这个来从表中提取登录用户的数据。希望你明白我的意思：

```
<?php
$getall = mysql_query("SELECT name,username,email FROM users");
$row = mysql_fetch_assoc($getall);

$fullnameDB         = $row['name'];
$emailDB            = $row['email'];
$usernameDB         = $row['username'];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:10:59.943

使用 mysql_fetch_assoc($getall) 您一次只获取一行。这就是为什么你应该使用“while”来获取所有内容！

```
$user_id = 1;
$getall = mysql_query("SELECT name,username,email FROM users WHERE user_id = $user_id");
$arr = array();
while ( $result = mysql_fetch_assoc($getall) ) {
  $arr[] = $result;
}

$date = $arr[0]["date"]; //first row date
$name = $arr[0]["name"]; //first row name
$comments = $arr[0]["comments"]; //first row comments 
```

$arr 是一个包含每一行数据的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:58:54.513

更改查询：

```
SELECT name, username, email FROM users WHERE username = '{YourUsernameHere}' LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:59:37.417

// 按用户id

```
<?php
$user_id = 1;
$getall = mysql_query("SELECT name,username,email FROM users WHERE user_id = $user_id");
$row = mysql_fetch_assoc($getall);

$fullnameDB         = $row['name'];
$emailDB            = $row['email'];
$usernameDB         = $row['username'];
?> 
```

// 通过电子邮件和密码

```
<?php
$email = $_POST["email"];
$password = $_POST["password"];
$getall = mysql_query("SELECT name,username,email FROM users WHERE email = '$email' AND password = '$password'");
$row = mysql_fetch_assoc($getall);

$fullnameDB         = $row['name'];
$emailDB            = $row['email'];
$usernameDB         = $row['username'];
?> 
```

我会通过（codeigniter 模型有查询）来做到这一点：

```
 $this->load->model("ModelName");
 $query = $this->ModelName->functionNameInModel(params);
 $result = $query->result();
 if ($query->num_rows() > 0)
 {
      $row = $query->row(); 
      $var = $row->table_column;
      echo("var = " . $var);
 } else {
// No records returned! HOLY ****! HUSTON WE GOT A PROBLEM!
    // Handle it with some code here...     
 } 
```

# actionscript-3 - 使用 ByteArray 实现 FIFO，并在 FIFO 仍被写入时从 fifo 读取

> ID：12101588
> 
> 赞同：0
> 
> 时间：2012-08-23T23:57:02.907
> 
> 标签：actionscript-3

我确定我错过了与 actionscript 3 相关的一些基本内容，但我没有太多使用它的经验

我的问题的背景：

从麦克风录制的声音需要通过基于 prop http 的协议（使用安全套接字）发送到后端。为此，语音字节每 20 毫秒（或使用编解码器的 80 字节）“成帧”（即在记录字节*之前*注入一些成帧字节），并通过打开的套接字连接推出。

所以我认为实现这一目标的最佳方法是将记录的数据样本存储到一个字节数组 B 中，当我每 80 个字节时，它仍在被写入

*   从 B 读取最后记录的 80 个字节
*   前置帧字节
*   将生成的字节数组推出套接字

现在，如果我从 bytearray B 读取该操作会重置 bytearria 的指针，并且当一个新的语音字节进来时，它肯定会覆盖指针之后的字节？

我怎样才能避免这种情况发生？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:39:09.517

请注意文档状态，您可以重置以下的指针（[位置](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#position)）`ByteArray`：

> 将文件指针的当前位置（以字节为单位）移动或返回到 ByteArray 对象中。这是对 read 方法的下一次调用开始读取或 write 方法开始写入的点。

`position`因此，您可以在执行读取操作之前重置并以这种方式管理 FIFO。

但我认为使用字节数组作为 FIFO 可能会有问题：

*   您想删除刚从 FIFO 中读取的字节，除了`clear()`清除整个数组之外，我没有看到任何 API 可以做到这一点。
*   麦克风的声音可能`SampleDataEvents`会如此频繁地进入，以至于效率降低或有问题

保留从每个 SampleDataEvent 获得的单个 ByteArray 的 FIFO（带有数组）可能会更容易。

# php - 将函数名称作为类共享

> ID：12101593
> 
> 赞同：-1
> 
> 时间：2012-08-23T23:57:45.080
> 
> 标签：php, class

如果我有

```
class root_parser extends doc_parser {
 function xml_parser($filename, &$id)
{

parent::doc_parser($filename) 
}

} 
```

在我的代码和这个

在包含的文件中

```
class doc_parser
{
public function doc_parser( $filename )
{some code here}
} 
```

这将运行函数 doc_parser 还是仅访问该类？因为我在使用 var_dump 时调用未定义函数 doc_parser() 但它显示在我的回溯中

我不想运行该功能，我只想知道它会运行该功能吗？还有为什么当我回溯我的代码时它会出现，

这是我用于回溯的代码

```
array_walk(debug_backtrace(),create_function('$a,$b','print "{$a[\'function\']}()(".basename($a[\'file\']).":{$a[\'line\']}); ";')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:02:12.023

通过重命名函数或类来检查它，然后查看代码是否有效。如果是这样，那么您就知道命名是问题所在。

# .net - .NET 套接字或端口转发问题？

> ID：12101594
> 
> 赞同：0
> 
> 时间：2012-08-23T23:57:48.043
> 
> 标签：.net, sockets, portforwarding

我现在正在编码的应用程序有这个问题。

我正在使用 Sockets .NET 编写服务器和客户端应用程序。服务器运行在静态 IP 为 192.168.1.6 的机器上。客户端通过 LAN 连接到该 IP 地址没有问题。但是当我设置客户端连接到我的 WAN IP 时，无法建立连接。

当然，我立即想到了端口转发，因此我将路由器配置为接受我用于应用程序的端口和机器静态 IP 上的传入连接。我什至使用 portforward.com 的 PFPortChecker 工具检查了端口是否正确转发（确实如此），但我似乎无法让它工作。

有什么我在这里忽略的吗？我真的希望有人能帮助我，因为我现在真的要拔掉最后一根头发了……

编辑：

好的，我已将问题缩小到 .NET 套接字问题。
基本上当我尝试连接以下代码（C#）时：

```
Socket _client;

_client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
_client.Connect("XX.XXX.XXX.X", XXXX); 
```

只能在 LAN 环境中建立连接。但是，当我在我的机器上运行一个服务器实例，并且我尝试使用 PFPortChecker 工具 ping WAN IP 和端口时，我实际上在我的服务器中得到了一个响应，它开始将传入连接作为一个新的客户。

知道如何修复我的代码以便可以通过 WAN 建立连接吗？

编辑2：

好的，所以我弄清楚了问题所在。我无法从我自己的 WAN IP 连接到我自己的 WAN IP。在另一个网络上，我连接到我的服务器没有问题。

无论如何，谢谢你的麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:01:36.487

我首先建议在服务器上运行 Wireshark，看看他是否看到了传入的连接。这将确认路由器是否将该端口上的流量转发到机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:04:52.010

192.168.1.6 是 LAN 子网...您的外部 IP 不同。如果端口转发很好，那可能就是问题所在。谷歌“我的 ip 是什么”，它应该告诉你你的外部 IP 地址

# sql - SQL 查询 - 多列合并为一列

> ID：12101600
> 
> 赞同：3
> 
> 时间：2012-08-23T23:58:20.067
> 
> 标签：sql, sql-server, sql-server-2008

我在这里和谷歌进行了一次狩猎，但无法找到任何东西。

我确实遇到了 CONCAT 函数，但是当我的公司运行 SQL Server 2008 时，这不是一个选项:(

我有一个输出多列/行的查询，我想在一列中显示所有结果。

例子：

```
SELECT client, owner, payer, status
FROM Main
WHERE status = 'Active' 
```

结果：

```
client | owner | payer | status

1      |  2    |  3    | Active
10     |  11   | 12    | Active 
```

我希望它看起来像什么

```
ColumnX  |
1
2
3 
Active
10
11
12
Active 
```

提前感谢您的帮助，我希望这是有道理的:)

干杯，迈克尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T00:04:14.387

您所指的内容称为[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 这需要列并将它们转换为行：

```
SELECT value, field
FROM
(
  select cast(client as varchar(10)) client, 
    cast(owner as varchar(10)) owner, 
    cast(payer as varchar(10)) payer, 
    status
  from main
  where status = 'Active'
) x
unpivot
(
  value 
  for field in (client, owner, payer, status)
) u 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/de73b)

这`UNPIVOT`将为您提供一列中的值列表，然后在另一列中提供它来自的列。

an 所需的`UNPIVOT`是所有字段都具有相同的数据类型，因此您需要执行数据类型的转换，以便它们可以显示在同一列中。

您也可以使用 a`UNION ALL`来执行此操作，但同样您需要`cast()`数据类型相同：

```
SELECT cast(client as varchar(10)) value
FROM main
WHERE status = 'active'
UNION ALL
SELECT cast(owner as varchar(10)) value
FROM main
WHERE status = 'active'
UNION All
SELECT cast(payer as varchar(10)) value
FROM main
WHERE status = 'active'
UNION ALL
SELECT status
FROM main
WHERE status = 'active' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/de73b/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:02:06.570

你看过 SQL Pivot 吗？[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

据我所知，您需要 UnPivot 您的表，这会产生大量堆栈。

# php - 存储和显示多个选择项

> ID：12101603
> 
> 赞同：0
> 
> 时间：2012-08-23T23:58:54.653
> 
> 标签：php, multiple-select

我正在使用一个多选框，如下所示：

```
<select multiple="pages" id="pages" name="pages[]">
    <option value="Home Page">Home Page</option>
    <option value="Contact Us">Contact Us</option>
    <option value="Support">Support</option>
</select> 
```

页面列表是从数据库中的另一个表生成的。

目前我正在内爆 $_POST['pages'] 并将字符串存储在数据库中。存储所选值的更有效方法是什么？

最后，我如何才能显示所有页面（从数据库中的另一个表中检索）并在该多选框中选择用户选择的页面。

例如，用户选择了联系我们 - 当在编辑页面上显示所有页面时，联系我们条目被突出显示（选中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:05:52.260

正常情况是全部折叠在一个数组中，我认为这非常好。

这是一个例子：[http ://www.onlinetools.org/tricks/using_multiple_select.php](http://www.onlinetools.org/tricks/using_multiple_select.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:06:28.807

除了将属性转换为数组位置之外，没有什么更有效的存储`$_POST['pages']`到数据库的方法了。`value`

```
$type = array("Home Page","Contact Us","Support"); 
```

使用数组来维护选定的项目（对于 POST）是完美的。例如：

```
if(isset($_POST['submit'])){
    echo "<select name=\"pages\" id=\"pages\" names=\"pages[]\">";
    foreach($t as $loc=>$type)
        echo "<option value=\"$loc\">$type</option>";
    echo "</select>";
}else{
    echo "<select name=\"pages\" id=\"pages\" names=\"pages[]\">";
     foreach($t as $loc=>$type)
        if($_POST['pages'] == $loc) //select that item
            echo "<option value=\"$loc\" selected=\"selected\">$type</option>";
        else
            echo "<option value=\"$loc\">$type</option>";
    echo "</select>":
} 
```

根据数据库中的数据选择项目只需将`if`第 9 行的语句中的语句替换为`$loc`您存储在数据库中的数组位置。

# sqlite - sqlite3 - 根据现有字段生成唯一 ID

> ID：12101605
> 
> 赞同：1
> 
> 时间：2012-08-23T23:59:14.857
> 
> 标签：sqlite

我有一个创建表、设置触发器[1] 和插入数据的 sql 脚本。在构建我的应用程序期间，通过 sqlite 命令行使用 sql 来创建数据库。基本上我有一个表，其行必须基于三个字段是唯一的。我想根据三个字段自动生成哈希或某种形式的唯一 ID，以用作主键。我的理解是 sqlite 没有内置的散列函数。是否有其他方法可以根据插入前触发器中三个字段的内容生成唯一键？

```
[1] This isn't happening yet as I don't know how to generate a unique key 
```

桌子看起来像这样。我可以使用 3 个字段（firstName、lastName、birthYear）的主键，但是我必须在每个表中使用所有三个字段，我想在其中有一个外键。这 3 个字段是字符串，我想它会是更多的空间，会减慢速度。

```
create table (
  firstName VARCHAR,
  lastName  VARCHAR,
  birthYear CHAR(4)
  ... more fields ...
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:00:11.567

在大多数情况下，最好使用单个自动递增整数列作为主键。然后对自然键进行建模，添加一个`UNIQUE`约束：

```
CREATE TABLE t1(
  id INTEGER PRIMARY KEY,
  firstName VARCHAR,
  lastName  VARCHAR,
  birthYear CHAR(4)
  UNIQUE (firstName, lastName, birthYear)
); 
```

这样，您可以将值`id`用作其他表的外键，而`UNIQUE`约束可以防止您拥有具有相同自然键的重复记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:14:46.907

从这三列创建主键还不够吗？

```
create table test(a int, b int, c int, primary key(a,b,c)); 
```

# java - jndi 对象绑定寿命

> ID：12101606
> 
> 赞同：0
> 
> 时间：2012-08-23T23:59:27.070
> 
> 标签：java, bind, jndi

我已经在我的 Web 应用程序中将一个对象绑定到我的 jndi。如果我关闭浏览器并且不取消绑定我的上下文或关闭它，则该对象仍然“绑定”到 jndi，所以我的 2 个问题是：

对象绑定的生命周期如何工作？我认为只要 jvm 实例启动它就会持续。

一旦用户关闭浏览器，有什么方法可以取消绑定对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:45:17.853

这完全取决于您正在谈论的名称空间。LDAP 是持久的。RMI 的生命周期就是注册表的生命周期。Corba 是 tnameserv 或 orbd 的生命！除非您使用的是持久命名服务。java: 命名空间由容器提供，具有相同的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T00:57:04.520

如果用户关闭浏览器，您现在真的没有办法。离开你的页面有什么不同？如果您正在使用会话，那么您可以在会话到期时取消绑定。用来解绑`unbind`。

# ajax - 使用 ajax，如何生成可以添加书签的 url？

> ID：12101610
> 
> 赞同：0
> 
> 时间：2012-08-23T23:59:43.880
> 
> 标签：ajax, jsp, web-applications, servlets

我正在编写一个简单的 Web 应用程序，使用 tomcat 服务器、servlet 和 jsp 页面。理想情况下，我希望我的网站只有一个页面，我可以在其中加载有关用户操作的内容（jsp 文件）。

然而，同样重要的是，用户将能够“标记”某些 URL 以直接访问他们需要访问的内容。

例如，假设我有一个详细说明我网站的所有注册用户的页面，然后每个用户都有一个个人资料页面。我希望导航到某人个人资料的用户将看到以下网址：

```
http://mywebsite.com/users/some_user_name 
```

并且当他们输入此 url 时，他们将进入 some_user_name 的个人资料。

问题是所有内容都是使用 ajax 生成的，我手动更改了使用 history.pushState 显示的 url - 这样当您输入示例 url 时，您只需获得 404 页面。

我想到的一个简单解决方案是将 servlet 映射到 /users/* 模式，该模式以正确的 jsp 页面响应。这是一个合理的解决方案，还是有其他更好和可接受的方法来处理此类问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:23:30.317

如果您正在使用 pushState 管理历史记录，那么当通过 url 直接访问应用程序时，您可以获取 url 片段并进行 ajax 调用并加载内容。为了实现这一点，您的所有网址都必须符合其他要求，以便在您的情况下轻松加载正确的视图，它可以是这样的

> [http://mywebsite.com/users/profile/some_user_name](http://mywebsite.com/users/profile/some_user_name)

因此，现在加载应用程序时，您可以使用用户名**some_user_name加载****配置文件视图**

 **如果您想要其他视图，例如编辑，则可以

> [http://mywebsite.com/users/profile/edit/some_user_name](http://mywebsite.com/users/profile/edit/some_user_name)

或者

> [http://mywebsite.com/users/profileEdit/some_user_name](http://mywebsite.com/users/profileEdit/some_user_name)

您应该实现一个可以正确路由这些 url 的路由器，以及一个可以从服务器获取数据并将其传递给查看的主要方法。

如果您可以将您的 JSP 代码用作休息 web 服务，这可以很容易地实现，并且有很多库支持这样的事情。你可能想看看 Backbone.js /Knockout.js

[这](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)是带有比较的流行框架列表。

但您可能面临的问题是 SEO。也有一些解决方法。**

# php - 关于 Cookie cURL 和 Digest Auth PHP 的问题

> ID：12101615
> 
> 赞同：0
> 
> 时间：2012-08-24T00:00:25.470
> 
> 标签：php, curl, libcurl, digest, digest-authentication

我有 2 个页面：login.php 和 index.php

当写入 localhost/mysite/login.php 并在表单中写入用户名和密码时，使用 CURLOPT_HTTPAUTH = CURLAUTH_DIGEST 和 CURLOPT_USERPWD = 'user:pass' 的 cURL 请求将被传递到另一个文件，该文件将使用 HTTP 使用这些凭据对用户进行身份验证DIGEST AUTH，将返回 200 表示成功或 401 表示错误的凭据。

如果它得到一个 200 代码，login.php 将重定向到 index.php，它也会向同一个摘要文件发出 cURL 请求，但没有 CURLOPT_HTTPAUTH 或 CURLOPT_USERPWD。这个想法是，因为我已经在 login.php 上执行了此操作，所以这些摘要凭据应该存储在用户浏览器中，但事实并非如此。所以 index.php 最终会再次要求凭据，**这就是问题所在。**

有人建议我使用 CURLOPT_COOKIEFILE 和 CURLOPT_COOKIEJAR，但没有人向我解释它是如何工作的？我知道 CURLOPT_COOKIEFILE 用于检索 cookie 信息，而 CURLOPT_COOKIEJAR 用于保存它们。

所以问题是这样的：

1) 该 cookie 文件的路径（例如 '/tmp/cookies.txt'），在哪里？/tmp/cookies.txt 到底是什么？与login.php 处于同一级别？或在 C:/? 另外，我应该事先创建这个文件吗？还是自动创建的？

2）该文件是在服务器上还是在客户端上？如果在服务器上，我怎么知道哪个 cookie 来自哪个用户，以便 Y 用户最终不会使用 X 用户凭据登录。

3) 另外，当使用这些 cookie 选项时，我到底在保存什么？在身份验证页面中，我应该手动创建一个 cookie 以存储在该文件中吗？如果是这样，什么饼干？我需要保留 Digest Auth Credentials，我认为它是带有 nonce、cnonce、nc、用户名、响应等的标头......不确定这是否真的是解决方法。

提前致谢

# coldfusion - 在 ColdFusion 8 中，有没有办法在失败的 cfquery 中查看 SQL？

> ID：12101616
> 
> 赞同：2
> 
> 时间：2012-08-24T00:00:34.380
> 
> 标签：coldfusion, coldfusion-8, cfquery

我有一个在`<cfquery>`里面生成一些 SQL 的。它失败了，但我不知道为什么。我尝试将它包装在一个`<cftry> <cfcatch>`块中，然后转储结果。但是，结果是不确定的。还有其他方法可以查看 SQL 的样子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T03:23:00.587

在你的内部`<cfcatch>`，这样做：

```
<cfdump var="#cfcatch#"><cfabort> 
```

这应该向您显示它尝试运行的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:58:34.013

如果它失败并且错误没有显示 SQL，那么可能是 cfqueryparam 的问题，可能是数据类型不匹配，您能提供错误的文本吗？甚至可能是 SQL 代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T20:09:55.030

将每个 < 替换为 < 然后cfabort

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T00:18:45.540

删除您的 cfquery 并替换为 cfoutput。您可以删除 cfqueryparam 并仅输出值。您应该生成一个可以在查询分析器中正常运行的 SQL 语句。

# java - Java 集合内集合并发

> ID：12101619
> 
> 赞同：2
> 
> 时间：2012-08-24T00:01:09.560
> 
> 标签：java, collections, concurrency

我正在尝试创建一个使用 set-within-a-map 线程安全的类。我不确定`what`特别需要同步。

该地图被定义为类似于 的东西`Map<Class<K>, Set<V>> map;`。以下是地图在实现内部使用的方式的简化：

```
public void addObject(K key, V object) {
    getSet(key).add(object);
}

public void removeObject(K key, V object) {
    getSet(key).remove(object);
}

public void iterateObjectsInternally(K key, Object... params)
{
    for (V o : getSet(key)) {
        o.doSomething(params);
    }
}

private Set<V> getSet(K key) {
    if (!map.containsKey(key)) {
        map.put(key, new Set<V>());
    }

    return map.get(key);
} 
```

# 地图问题

就使用`map`本身而言，我看到的唯一并发问题是 in ，线程上下文可能在和`getSet(K)`之间切换。在这种情况下，可能会发生以下情况：`containsKey``put`

```
[Thread A] map.containsKey(key)       => returns false
[Thread B] map.containsKey(key)       => returns false
[Thread B] map.put(key, new Set<V>())
[Thread B] map.get(key).add(object)
[Thread A] map.put(key, new Set<V>()) => Thread A ovewrites Thread B's object [!]
[Thread B] map.get(key).add(object) 
```

现在，我目前正在`HashMap`为此实现使用常规。而且，如果我是正确的，使用`Collection.synchronizedMap()`or `ConcurrentHashMap`will 只会解决方法级别的并发问题。也就是说，方法将以原子方式执行。这些并没有说明方法之间的交互方式，因此即使使用并发解决方案，以下情况仍然可能发生。

`ConcurrentHashMap`但是，确实有方法`putIfAbsent`。这样做的缺点是该语句`map.putIfAbsent(key, new Set<V>())`将在每次请求集合时创建一个新集合。这似乎是很多开销。

另一方面，仅仅将这两个语句包装在一个同步块中就足够了吗？

```
synchronized(map) {
    if (!map.containsKey(key)) {
        map.put(key, new Set<V>());
    }
} 
```

有没有比锁定整个地图更好的方法？有没有办法只锁定键，以便读取地图的其他值不会被锁定？

```
synchronized(key) {
    if (!map.containsKey(key)) {
        map.put(key, new Set<V>());
    }
} 
```

请记住，键不一定是同一个对象（它们是特定的`Class<?>`类型），而是通过哈希码相等。如果同步需要对象地址相等，则同步`key`可能不起作用。

# 设置问题

我认为，更大的问题是知道这套设备是否被正确使用。有几个问题：添加对象、删除对象和迭代对象。

将列表包装起来`Collections.synchronizedList`是否足以避免和中的并发`addObject`问题`removeObject`？我假设这会很好，因为同步包装器会使它们成为原子操作。

但是，迭代可能是另一回事。对于`iterateObjectsInternally`，即使集合是同步的，它仍然必须在外部同步：

```
Set<V> set = getSet(key);
synchronized(set) {
    for (V value : set) {
        // thread-safe iteration
    }
} 
```

然而，这似乎是一种可怕的浪费。相反，如果我们将简单地替换为使用`CopyOnWriteArrayList`或`CopyOnWriteArraySet`作为定义会怎样。由于迭代只会使用数组内容的快照，因此无法从另一个线程对其进行修改。此外，`CopyOnWriteArrayList`在 add 和 remove 方法上使用可重入锁，这意味着 add/remove 本质上也是安全的（因为它们是同步方法）。`CopyOnWriteArrayList`看起来很有吸引力，因为内部结构的迭代次数远远超过列表上的修改次数。此外，使用复制的迭代器，无需担心`addObject`或`removeObject`弄乱另一个线程中`iterateObjectInternally`( ) 的迭代。`ConcurrentModificationExceptions`

这些并发检查是否在正确的轨道上和/或足够严格？我是一个有并发编程问题的新手，我可能遗漏了一些明显的或过度思考的东西。我知道有一些类似的问题，但我的实现似乎足够不同，足以保证像我一样具体地提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:53:34.843

你肯定是想多了。根据您的并发特征使用简单的 ConcurrentHashMap 和 ConcurrentSkipListSet/CopyOnWriteArraySet（主要是如果迭代需要考虑数据的动态修改）。使用类似于以下代码段的内容作为 getSet 方法：

```
private Set<V> getSet(K key) {
    Set<V> rv = map.get(key);
    if (rv != null) {
        return rv;
    }
    map.putIfAbsent(key, new Set<V>());
    return map.get(key);
} 
```

这将确保在添加/删除对象时正确的无锁并发，对于迭代，您需要确定丢失更新是否是您的问题域中的问题。如果在迭代期间添加新对象时错过它不是问题，请使用 CopyOnWriteArraySet。

第三，您想深入了解可以使用哪种粒度的并发性，您的要求是什么，在边缘情况下的正确行为是什么，最重要的是，您的代码必须具备哪些性能和并发特性封面 - 如果它在启动时发生两次，我会让所有方法同步并完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:55:54.560

如果您要经常添加到“集合”，CopyOnWriteArrayList 和 CopyOnWriteArraySet 将不可行 - 它们使用太多资源进行添加操作。但是，如果您很少添加并且经常迭代“集合”，那么它们是您最好的选择。

Java ConcurrentHashMap 将每个地图本身放入一个存储桶中 - 如果不存在，则您的 put if 操作将在搜索密钥时锁定列表，然后释放锁定并放入密钥。绝对使用 ConcurrentHashMap 而不是地图。

您的 getSet 方法本身可能会很慢，尤其是在同步时 - 也许您可以尽早预加载所有键和集合。

我建议你按照 Louis Wasserman 所说的去做，看看你在 Guava 实现中的表现是否不错。

# mysql - 从 csv 字符串中按 id 获取行

> ID：12101624
> 
> 赞同：0
> 
> 时间：2012-08-24T00:01:51.330
> 
> 标签：mysql, csv, syntax

我试图通过搜索 ID 从我的表中获取所有行的 ID（ID 是自动递增的）。

我正在尝试这样的事情：

```
SELECT * 
FROM table 
WHERE something = 'yes' AND (csvstring) 
```

csvstring 是这样的： 4, 53, 34, 23

问题是我不认为你能做到这一点。我尝试了“WHERE id IN (csvstring)”，因为我在谷歌上搜索，但这没有用

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:08:41.107

```
SELECT *
FROM table
WHERE something='yes' AND id IN (4,53,34,23) 
```

那不行吗？编辑：刚刚测试过，它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:10:22.383

这样做的原因`id IN (csvstring)`是因为查询解析`csvstring`为整个字符串而不是特定的 id。你想有这样的：`id IN (4, 53, 34, 23)`但查询看到它是这样的`id IN ('4, 53, 34, 23')`

也许**[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)**适合你。

试试这个，

```
SELECT... FROM... WHERE something='yes' AND id IN (4,53,34,23) 
```

# php - 通过 php 标头重定向传输会话变量

> ID：12101625
> 
> 赞同：-1
> 
> 时间：2012-08-24T00:01:53.813
> 
> 标签：php

所以我似乎无法弄清楚如何在 PHP 标头刷新后传输会话变量，代码如下：基本上我的工作流程是用户将表单提交到一个 php 处理页面，该页面对变量进行处理，完成后我想要表单重定向到“offers.php”，保持会话变量不变。

谢谢您的帮助

php进程页面

```
 <?php
    session_start();
    session_write_close();
    header('Location: http://www.examplesite.info/offers.php');

    //Get Variables from form
    $_SESSION['name'] = $_POST['name'];
    $_SESSION['zipcode'] = $_POST['zip'];
    $_SESSION['email'] = $_POST['email'];
    $_SESSION['insType'] = $_POST['insOption'];

    ?> 
```

offer.php 页面

```
 <?php 
    session_start(); 

    $name = $_SESSION['name'];  
    $email = $_SESSION['email'];
    $zip = $_SESSION['zipcode'];
    $ins = $_SESSION['insType']; 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:04:56.867

为什么不在重定向之前放置会话分配

```
//Get Variables from form
$_SESSION['name'] = $_POST['name'];
$_SESSION['zipcode'] = $_POST['zip'];
$_SESSION['email'] = $_POST['email'];
$_SESSION['insType'] = $_POST['insOption'];

header('Location: http://www.examplesite.info/offers.php'); 
```

# javascript - UA PhoneGap 2.0 插件未在 iOS 上正确初始化

> ID：12101629
> 
> 赞同：0
> 
> 时间：2012-08-24T00:02:16.087
> 
> 标签：javascript, ios, object, cordova, urbanairship.com

我正在尝试使用新发布的 Urban Airship 插件在我的 iOS PhoneGap 2.0 应用程序中实现推送通知。当我从提供的示例应用程序将 index.html 加载到我的项目中时，一切正常。但是，当我使用我的应用程序的 index.html 时，该`push`变量无法访问其原型函数。具体来说，在*示例*应用程序中：

```
document.addEventListener("deviceready", function() {
    push = window.PushNotification;
    console.log(typeof window.PushNotification); => 'function'
    console.log(typeof push);                    => 'object' 
```

*但是我的*应用程序中的相同代码会产生：

```
 console.log(typeof push); => 'function' 
```

因此`push.enablePush()`或任何其他原型函数都是不可调用的。我已经尝试过解决方法，但它们最终破坏了设备注册的功能。我不知道为什么会发生这种情况，但我怀疑它可能与`deviceready`触发事件之前执行的另一个插件或代码冲突。

虽然我确定原因是一个非常具体的问题，但我一般并不真正理解将变量分配给函数对象本身将如何导致变量存储实例化对象。不`new`就是为了这个吗？为什么它在他们的代码中有效，但在我的代码中无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:31:37.553

想从 UA 团队与您跟进此事。

看一下示例`index.html`（第 20 行）和`PushNotification.js` （第 261 行）。访问插件的方式`index.html`是这样的：

```
push = window.pushNotification 
```

请注意上的camelCase *，*`pushNotification`而不是`PushNotification`在 stackoverflow 问题中。

在`PushNotification.js`中，我们通过调用来初始化插件：

```
window.pushNotification =  new PushNotification(); 
```

所以`PushNotification`确实是一个函数，只是插件用来引导自身的函数。

纠正这种情况应该可以解决这个问题。

让我知道这是否可以解决问题。

# database - Oracle Reports - 从数据库设置变量

> ID：12101635
> 
> 赞同：1
> 
> 时间：2012-08-24T00:02:37.527
> 
> 标签：database, oracle, variables, report

我试图弄清楚如何分配从 Oracle Reports 数据库中的表中提取的变量值。此代码位于我的用户参数之一中：

```
function Project_idValidTrigger return boolean is
begin
:project_id := 'BMDSA';
SELECT VALUE into project_id from WOS_REPORT_PARAM where parameter = 'PROJECT_ID'and SEQUENCE_NUM := sequenceNum;

return (TRUE);
end; 
```

数据库中的表由 4 列组成：SEQUENCE_NUM、SYS_DATE、VALUE、PARAMETER。

我想做的是用我的表中具有指定参数和sequenceNum的值设置我的用户参数“Project_ID”，sequenceNum由另一个用户参数提供。

希望我能正确传达我需要做的事情，Oracle Reports 和 SQL 对我来说仍然很新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:54:45.140

我认为这就是您正在寻找的（考虑`project_id`并且`sequenceNum`是您的报告参数 -

```
function Project_idValidTrigger return boolean is
begin

 :project_id := 'BMDSA'; 

  SELECT VALUE 
    INTO :project_id   --gets value into the parameter
    FROM WOS_REPORT_PARAM 
   WHERE parameter = 'PROJECT_ID'
     AND SEQUENCE_NUM = :sequenceNum;  --uses the parameter value in the AND clause

  return (TRUE);
end; 
```

要记住的要点 -`:=`用于分配，因此简而言之不能在`SQL`查询中使用。`:`报表参数在参数名称前由运算符表示的函数内充当绑定变量。

# solr - Solr：完全匹配的部分电子邮件搜索

> ID：12101639
> 
> 赞同：1
> 
> 时间：2012-08-24T00:03:29.037
> 
> 标签：solr

我目前正在开发一种搜索，用户需要通过他们的名字、姓氏或电子邮件来搜索人们。对于搜索，我使用 Solr 4.0.0-ALPHA 和 edismax 查询。

我遇到的问题是，如果用户要使用部分电子邮件搜索用户，我只需要返回与该部分电子邮件查询完全匹配的匹配项。

例如查询：lastname@gmail

应该只返回匹配“lastname@gmail”的用户。

例如：名.姓@gmail.com

但现在它匹配所有匹配“姓氏”或“gmail”的所有结果，当只有一个匹配“姓氏@gmail”时，我们的数据库中将有大量结果。我知道如果我用双引号进行查询，例如“lastname@gmail”，我可以得到完全匹配，我当然可以在将搜索发送到 Solr 之前强制客户端上的电子邮件地址为这种格式，但有可能吗在 schema.xml 中以某种方式执行此操作。

这是我当前的 schema.xml

```
<schema name="example" version="1.5">
    <fields>
        <field name="id" type="string" indexed="true" stored="true" required="true" />
        <field name="firstName" type="string_ci" indexed="true" stored="true" />
        <field name="lastName" type="string_ci" indexed="true" stored="true" />
        <field name="email" type="string_email" indexed="true" stored="true" />
    </fields>

    <uniqueKey>id</uniqueKey>

    <types>
        <fieldType name="string" class="solr.StrField" sortMissingLast="true" />

        <fieldType name="string_ci" class="solr.TextField" sortMissingLast="true" omitNorms="true">
            <analyzer>
                <tokenizer class="solr.KeywordTokenizerFactory" />
                <filter class="solr.LowerCaseFilterFactory" />
            </analyzer>
        </fieldType>

        <fieldType name="string_email" class="solr.TextField" sortMissingLast="true" omitNorms="true">
            <analyzer>
                <tokenizer class="solr.StandardTokenizerFactory" />
                <filter class="solr.LowerCaseFilterFactory" />
                <filter class="solr.WordDelimiterFilterFactory" />
            </analyzer>
        </fieldType>
    </types>
</schema> 
```

我知道问题在于我正在使用 StandardTokenizerFactory，它将电子邮件地址拆分为令牌，并且在执行查询时它会像这样解析查询：

```
<str name="parsedquery_toString">
+(lastName:lastname@gmail | id:lastname@gmail | (email:lastname email:gmail) | firstName:lastname@gmail)
</str> 
```

我希望它在哪里做更多这样的事情，当我使用双引号“lastname@gmail”进行查询时会发生这种情况：

```
<str name="parsedquery_toString">
+(lastName:lastname@gmail | id:lastname@gmail | email:"lastname gmail" | firstName:lastname@gmail)
</str> 
```

这是我正在做的搜索：

/select?q=lastname@gmail&qf=id+firstName+lastName+email&defType=edismax&debugQuery=true

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T00:17:41.660

从#solr irc-channel 我得到了如何正确解决这个问题的答案。通过将 autoGeneratePhraseQueries=true 添加到字段中，它将查询放在双引号中，我得到了正确的答案。

```
<fieldType name="text_email" class="solr.TextField" sortMissingLast="true" omitNorms="true" autoGeneratePhraseQueries="true"> 
```

# php - Magento - 在产品循环之外将属性标签转换为属性 ID

> ID：12101640
> 
> 赞同：0
> 
> 时间：2012-08-24T00:03:31.107
> 
> 标签：php, magento, attributes

我正在尝试获取我知道产品循环外部标签的属性的 id。基本上我只想将标签转换为 ID。

属性代码是 new_brands，标签是 TESTONE 我正在尝试获取它的 ID，我知道它是 250。

我将一个类别称为属性标签（TESTONE）并将其存储在这样的变量中

```
$brandname = Mage::registry('current_category')->getName(); 
```

有了这些信息，我想将标签 TESTONE 转换为它的 ID，但在产品循环之外。

目的是我正在为品牌页面构建一个自定义模板，该模板将在这样的过滤器中使用 id

$collection->addFieldToFilter(数组(

```
 array('attribute'=>'pos_brands','eq'=>$brandid),array('attribute'=>'new_brands','eq'=>'250')
)); 
```

否则，我会对反向工作的解决方案感到满意。即从 ID 中获取标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:34:25.050

据我了解，您的属性是一个下拉列表（`$entityType = "catalog_product", $attrCode = "new_brands", $withEmpty = false`）：

```
$data = Mage::getModel('eav/entity_attribute')
  ->loadByCode($entityType, $attrCode)
  ->setSourceModel('eav/entity_attribute_source_table')
  ->getSource()
  ->getAllOptions($withEmpty);

$set = array();
foreach ($data as &$row) {
  $set[$row['label']] = $row['value'];
}
var_dump($set); 
```

# c# - Selenium 2 WebDriver 未按预期评估更新的 DOM

> ID：12101642
> 
> 赞同：2
> 
> 时间：2012-08-24T00:03:38.170
> 
> 标签：c#, javascript, selenium, pageobjects

我在 C# 中使用 Selenium 2 WebDriver 来自动化输入页面。加载 DOM 时隐藏了一个验证摘要控件。这是它在额外负载下的外观。

```
<div id='validation_summary' style='display: none'>
  <div id='validation_message'/> 
```

当我的 pageObject 在 Selenium 中初始化时，WebElement 的 Displayed 属性设置为“false”。这是我所期望的。

单击提交按钮后，dom 更改为：

```
<div id='validation_summary' style='display: block'>
  <div id='validation_message'>
     <div><a>Fix Me</a></div>
  </div> 
```

当我尝试通过以下方式访问 WebElement 时，发出单击验证后，Displayed 属性仍然为“false”并且附加的 div 不可见：

```
var validation = new WebDriverWait(_driver, TimeSpan.FromSeconds(10)).Until<IWebElement>((d)=>d.FindElement(By.Id('validation_message')); 
```

这真的应该工作吗？我是否应该期望 Selenium 足够精明地评估 DOM 的当前状态？它如何实际评估元素的 Displayed 属性？如果我查看 PageSource 属性，我确实看到了文本。我不明白为什么我没有看到 Selenium 反映我的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:48:17.703

尝试这个：

```
var scripter = driver as JavaScriptExecutor;

var result = scripter.ExecuteScript("return $('#validation_message').is(':hidden');").ToString();
if (result.ToLower().Equals("true"))
{
//Do your stuff
} 
```

并且不要羞于使用 javaScript。以我的拙见，Selenium 仍然没有足够的工具，因此您可以仅使用 javaScript 实现自己的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T00:11:39.183

是的，我的回答是使用 Java 伪代码，但是 Selenium 足够聪明，可以始终获取最新版本的元素。在此循环期间，WebElement 实例将继续自我刷新，因此它不会过时：

```
@FindBy( id = 'validation_message')
public WebElement validatorMessageElement;
...
PageFactory.initObjects()
...
for ( infiniteLoop ) {
   boolean isThere = validatorMessageElement.isDisplayed();
   sleep(1 second);
} 
```

# javascript - Knockout 如何更新通过其他函数过滤的 ObservableArrays 上的绑定？

> ID：12101646
> 
> 赞同：2
> 
> 时间：2012-08-24T00:04:19.003
> 
> 标签：javascript, knockout.js, ko.observablearray

我一直在广泛使用 Knockout.js，但是我经常使用一种模式，我想了解它的实际工作原理。

通常我会有一些视图模型的 ObservableArray，例如 productModule.products()。然后，我将拥有各种过滤器函数，例如 productModule.getAvailableProducts()，它使用数组过滤器（我目前使用 Underscore.js）返回一个子集，该函数就是绑定到 UI 的函数。我不太明白的是，鉴于这些函数返回标准数组而不是 ObservableArray，当我更改底层 ObservableArray 时，Knockout 的绑定仍然会更新。这是一个示例小提琴：

[http://jsfiddle.net/4RHks/19/](http://jsfiddle.net/4RHks/19/)

即使通过其他函数，Knockout 是否在绑定时确定特定绑定是否解析为 ObservableArray？如果是这样，链中是否可以存在任意数量的此类函数？

非常感谢任何有助于理解这一点的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:28:40.140

绑定实际上是在用于跟踪依赖关系的计算 observable 中执行的。因此，如果您调用访问可观察对象的函数，那么它们将有助于该元素绑定的依赖关系。当依赖改变时，绑定 s 将再次运行。

这篇文章更详细一点：[http ://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html](http://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html)

# c - 将一个数组的元素与另一个数组的所有元素进行比较

> ID：12101648
> 
> 赞同：0
> 
> 时间：2012-08-24T00:04:25.617
> 
> 标签：c

我想将一个数组的每个元素与另一个数组的所有元素进行比较。我想要实现的是如果一个元素存在于另一个数组中，结果=0，否则结果=1

```
int m,n;

for(int i=0; i<m; i++) {
  for(int j=0; j<n; j++) {
    if(i==j) {
      result =0;
      //perform a task
       break;
    } 

     if(i!=j) {
       result = 1;
      //perform another task
      break
     }

  }
} 
```

但是，我无法在第二个 if () 中实现我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:10:49.297

稍微调整您的代码（替换`char`为您实际使用的任何数据类型）：

```
char A[50];
char B[50];

for(int i=0; i<50; i++) {     // Iterate through A from 0 to 50
  for(int j=0; j<50; j++) {   // Iterate through B from 0 to 50
    if(A[i] == B[j]) {
       // Item from A exists in B
    }
    else {
       // Item from A does not exist in B
    }
  }
} 
```

请注意，“ `else`”代码将为每个元素运行一次。

我们可以做得更好。首先创建一个搜索数组的实用函数：

```
bool item_exists(char item, char[] array, int array_len) {
    for (int i=0; i<array_len; i++) {
       if (array[i] == item)
          return true;
    }
    return false;
} 
```

然后使用它。

```
char A[50];
char B[50];

for(int i=0; i<50; i++) {
    if (item_exists(A[i], B, 50)) {
       // Item from A exists in B
    }
    else {
       // Item from A does not exist in B
    }
} 
```

# php - 数组没有传递正确的值

> ID：12101649
> 
> 赞同：-1
> 
> 时间：2012-08-24T00:04:38.093
> 
> 标签：php

我有以下变量，需要在数组循环中使用它...

```
$jointa="'nike-score', 'pack-cupcake', 'shor-burgundy'";

foreach (array($jointa) as $id) {
    $yourSiteContent[] = array('permalink' => $id, 'updated' => $dated);
} 
```

**但是当我将值直接放在数组循环中时，它的工作正常......**

```
foreach (array('nike-score', 'pack-cupcake', 'shor-burgundy') as $id) {
    $yourSiteContent[] = array('permalink' => $id, 'updated' => $dated);
} 
```

请检查我在哪里做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T00:06:12.557

```
$jointa = array('nike-score', 'pack-cupcake', 'shor-burgundy');

foreach ($jointa as $id) {
    $yourSiteContent[] = array('permalink' => $id, 'updated' => $dated);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:07:11.817

```
$jointa = array('nike-score', 'pack-cupcake', 'shor-burgundy');

foreach ($jointa as $key => $value)
{
    echo($key . " = " . $value)
} 
```

# php - Mysql函数：如果不存在或更新则插入

> ID：12101651
> 
> 赞同：0
> 
> 时间：2012-08-24T00:04:46.063
> 
> 标签：php, mysql

我有一个小问题 - 如果记录不存在或者如果它存在的情况下，我将如何在 mysql 中编写一个函数来插入记录，然后说例如记录已更新默认记录的新副本应该是重新插入，将更新的记录留在表中。让我给一个小场景，请在抨击我之前仔细阅读，我正在尽力解释：

```
table name= Computer.
Columns(2) = comp_id(Auto-increment), comp_name. 
```

我想在表中的默认数据=

```
comp_id= 1, comp_name='Dell' 
```

现在，如果我应该将此信息更新为：

```
comp_name='HP' 
```

该功能应自动添加以前的记录，即：

```
comp_name='Dell' 
```

我想过如果不存在就使用更新，但我正在阅读一篇博客，他们说如果不存在，Mysql 不支持更新。如果您能提供任何建议，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T00:07:15.330

你想在 mysql 中插入重复更新。

[http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# c++ - 文本解密 - 移位出错

> ID：12101656
> 
> 赞同：0
> 
> 时间：2012-08-24T00:05:13.397
> 
> 标签：c++

我正在研究一个 Shit Cipher 并解密一段特定的文本。好的，那么，程序是如何工作的：

1.  从文本文件中获取字符
2.  将每个字符在字母表中向下移动 9 位。

现在，我已经这样做了，但是，我知道字符不能总是移动 9 个位置，所以程序会查看字符在字母 char 数组中的位置，然后如果可以完成，它只需添加 9，然后如果做不到，就拿走 9 （找不同）。但是，它不起作用，我无法弄清楚我哪里出错了。

这是代码：

```
#include <iostream>
#include <fstream> 
using namespace std;

string inputFile = "";
#define MAX_FILE_SIZE 10000
const char alphabet[26] =   {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
const char alphabetUpper[26] =   
{'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};

const int sizeAlpha = sizeof(alphabet)/sizeof(alphabet[0]);
void Data(char* theData)
{
ifstream txtFile(inputFile.c_str());
if(!txtFile.is_open())
{
    cerr << "Cannot open text file";
}
txtFile.read(theData, 520);
}

int main(int argc, char *argv[]) {

char getData[MAX_FILE_SIZE];

Data(getData);

char decrypted[520];

int algorthm;

for(unsigned i=0; (i < 520); i++)
{
    for(unsigned j=0; (j < 26); j++)
    {
        if(getData[i] == alphabet[j] || alphabetUpper[j])
        {
            algorthm = j + 9; // we move 9 places.

            if(sizeAlpha < algorthm)
            {
                decrypted[i] = alphabet[algorthm];

            }else if(algorthm > sizeAlpha || algorthm == sizeAlpha) 
            {
                algorthm = sizeAlpha - j;

                decrypted[i] = alphabet[algorthm];
            }
        }
    }
}

for(unsigned i=0; (i < 520); i++)
{
    cout << decrypted[i]; 
}
} 
```

任何人都知道我要去哪里错了，或者，可以提供一个类似的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:08:55.680

你需要做模：

```
algorthm = (j + 9) % 26; 
```

如果你带走 9 来处理溢出，那么你将引入与其他字符的冲突，并且前 9 个位置将不会被使用。

*[编辑]*只是指出...

您的 if 语句也存在问题：

```
if(getData[i] == alphabet[j] || alphabetUpper[j]) 
```

这不会像您认为的那样起作用，如果确实如此，您的算法无论如何都不会起作用，因为您以后不会区分大小写。您必须复制代码或设置指向正确数组的指针。但这是很长的路要走。

您无需搜索一组字母字符即可进行测试。任何合理的字符编码（我会说 ASCII 是迄今为止最常见的）都会使字母字符保持有序。所以：

```
const int shiftAmt = 9;
char c = getData[i];

if( c >= 'A' && c <= 'Z' )
    c = 'A' + ((c - 'A' + shiftAmt) % 26);
else if( c >= 'a' && c <= 'z' )
    c = 'a' + ((c - 'a' + shiftAmt) % 26);

decrypted[i] = c; 
```

请注意，这也保留了任何非字母字符，而您的代码忘记了它们并将该位置留在未初始化的“解密”数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:17:14.213

> 能做就加9，不能做就减9

这不可能是可逆的，因为您将两个不同的值映射到同一个值。

相反，您必须环绕：

```
unsigned char shiftChar(unsigned char const plain, signed char const by) {
  unsigned char const caseBit = plain & ('a' ^ 'A');
  unsigned char offset = (plain ^ caseBit) - ('a' & 'A');
  offset += ('z' - 'a' + 1) + by; // there's your "shift"
  offset %= ('z' - 'a' + 1);
  return caseBit | (offset + ('a' & 'A'));
} 
```

# ajax - 如何获取通过 Ajax 发布的 Django 中的数组

> ID：12101658
> 
> 赞同：51
> 
> 时间：2012-08-24T00:05:32.113
> 
> 标签：ajax, django, jquery, python-2.7

当我尝试通过 Ajax (jQuery) 向 Django 发送数组时

**JavaScript 代码：**

```
new_data = ['a','b','c','d','e'];
$.get('/pythonPage/', {'data': new_data},function(data){}); 
```

我尝试读取数组：

**Python：**

```
request.GET.get("data[]") 
```

我只得到最后一个数组值：

```
'e' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-24T00:06:56.497

你正在寻找`QueryDict`的`getlist`

```
request.GET.getlist('data')
request.GET.getlist('data[]')
request.GET.getlist('etc') 
```

[https://docs.djangoproject.com/en/2.0/ref/request-response/#django.http.QueryDict.getlist](https://docs.djangoproject.com/en/2.0/ref/request-response/#django.http.QueryDict.getlist)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-01-16T13:59:23.490

相当老的问题，但让我向您展示完整的工作代码。（适合新手：）

**在您的模板中**

```
data = {
    'pk' : [1,3,5,10]
}

$.post("{% url 'yourUrlName' %}", data, 
    function(response){
        if (response.status == 'ok') {
            // It's all good
            console.log(response)
        } else {
            // Do something with errors
        }
    }) 
```

**网址.py**

```
urlpatterns = [
    url(r'^yourUrlName/', views.yourUrlName, name='yourUrlName'), #Ajax
] 
```

**视图.py**

```
from django.views.decorators.http import require_POST
from django.http import JsonResponse

@require_POST
def yourUrlName(request):
    array = request.POST.getlist('pk[]')

    return JsonResponse({
            'status':'ok',
            'array': array,
        }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-17T06:56:35.633

只需使用`request.GET.getlist('data[]')`

# objective-c - 使用字符串而不是对象调用工厂方法

> ID：12101661
> 
> 赞同：1
> 
> 时间：2012-08-24T00:05:57.283
> 
> 标签：objective-c, ios

我只是想知道是否有一种方法（在 Objective-C 和 iPad 中）可以调用工厂方法，在该方法中我使用字符串动态构建对象的名称。

例如我有一个类 XYZ 和几个工厂方法

```
 +(XYZ *) A;
 +(XYZ *) B;
 +(XYX *) C 
```

我通常会这样称呼它

```
 [XYZ A];
 [XYZ B];
 [XYZ C]; 
```

但我希望能够用字符串动态调用它，例如

```
 NSString *s; 
 ...
 s = @"B";
 [XYZ s]; 
```

我希望你明白我的意思。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:14:24.240

是的。您可以使用将 a[`NSSelectorFromString()`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSelectorFromString)转换`NSString*`为 a `SEL`（与提供给您的类型相同`@selector()`）。然后，您可以使用[`-performSelector:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3a)它及其变体来调用它。

```
[XYZ performSelector:NSSelectorFromString(s)]; 
```

`-performSelector:``id`对于不带参数并返回or的方法很有用`void`。[`-performSelector:withObject:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3awithObject%3a)并且[`-performSelector:withObject:withObject:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3awithObject%3awithObject%3a)是采用 1 或 2`id`类型参数的变体。如果您需要更多的参数，或者您需要的参数或返回值不是`id`，那么您可以改用它[`NSInvocation`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/)来设置方法调用。请注意，这`NSInvocation`是（相对）昂贵的，所以只有在没有其他方法的情况下才应该使用它。

# c++ - WinAPI LPWSTR，C++11 u16string？

> ID：12101669
> 
> 赞同：3
> 
> 时间：2012-08-24T00:07:23.720
> 
> 标签：c++, winapi, unicode, c++11

如果我正在为 Windows 开发并且某些 WinAPI 函数要求我使用 LPWSTR 作为字符串数据类型。在我的库中使用 C++11 的 u16string 可以吗？这两种数据类型是一样的吗？

它看起来更像 LPWSTR 是 wchar_t，但没有人喜欢 wchar_t 了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:56:15.230

C++11`char16_t`类型不同于`wchar_t`. 从理论上讲，您可以`reinterpret_cast`在`char16_t*`和 Windows'之间进行选择`wchar_t*`（Windows'`wchar_t`是 16 位）。然而，在实践中，Visual C++ 10.0——我认为也是 Visual C++ 11.0——缺乏对 Unicode 文字的支持，例如`u'A'`or `u"A"`。

总结一下（我发现在 SO 上应该更好地明确所有结论）：

*   “在我的库中使用 C++11 的 u16string 可以吗？”
    *当然，但不是作为字符串的直接插件替代品，`wchar_t`如果您计划支持 Visual C++，那么截至 2012 年目前存在问题（由于缺乏对文字的支持）。*

*   “这两种数据类型是一样的吗？”
    *不。*

*   “没有人喜欢 wchar_t 了……”
    *当然不是这样。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:57:06.167

`wchar_t`并且`char16_t`是不同的类型，因此不能`u16string.c_str()`用作 a `LPWSTR`（没有 a`reinterpret_cast`会导致未定义的行为）。

如果您确信在您的平台上`wchar_t`被编码为 UTF-16，您可以将数据*复制*到：

```
std::wstring my_wstring(my_u16string.begin(), my_u16string.end()); 
```

然后`my_wstring.c_str()`用作 LPWSTR。在函数调用中，您可以使用临时：

```
SomeWindowsAPI(std::wstring(my_u16string.begin(), my_u16string.end()).c_str()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T01:33:35.933

`wchar_t`在 Windows 上是 16 位的，并且`LPWSTR`值是 UTF-16 编码的，所以是的，您可以在与 API 交互时使用`char16_t`和`u16string`值，尽管您必须进行类型转换才能让编译器满意。

# robots.txt - 站长工具说 robots.txt 无法访问，但它存在

> ID：12101670
> 
> 赞同：2
> 
> 时间：2012-08-24T00:07:28.340
> 
> 标签：robots.txt, robot

我在尝试在谷歌网站管理员工具中配置一个新网站时遇到了真正的问题。我不断收到消息“无法访问 robots.txt”，谷歌说它无法抓取我的网站，因为它无法访问 robots.txt 文件。

正如您将看到的，该文件存在，并且我检查了服务器标头，它们返回该文件的状态 200。

http:// 万维网。top5beauty.co.uk / robots.txt（没有空格）

奇怪的是，当我获取 http://top5beauty.co.uk / robots.txt（没有 www）时，它发现没有问题，即使这实际上重定向到 www

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:47:44.983

1.  您可以在您的网站管理员工具中进行“Fetch as Googlebot”测试，以立即查看是否可以访问任何页面/URL/文件

2.  在您设置了一个“禁止：”规则来阻止所有访问。如果你想被索引，你应该尽快删除它。

3.  要了解有关 robots.txt 的更多信息，您应该访问[此官方文档](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)，此外，由于最近 Googlebot 方法的变化，我建议您阅读我最近写的关于该主题的[Googlebot 帖子。](http://www.incapsula.com/the-incapsula-blog/item/395-new-snippet-puts-googlebot-in-the-spotlight)

顺便说一句：尽管我很喜欢我的帖子，但我仍然认为您应该首先阅读 Google 的文档，因为它处理最基本的问题 :)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:26:53.117

robots.txt 最多可能需要 2 天才能获取，如果您刚刚创建文件，则需要等待 :-)

# oracle - Oracle：在删除用户时创建触发器

> ID：12101671
> 
> 赞同：2
> 
> 时间：2012-08-24T00:07:50.883
> 
> 标签：oracle, triggers, oracle11g

可以在删除用户事件时创建触发器吗？如果是这样，我该如何编写触发器 - *** 我想在删除用户后从表中删除与该用户相关的一些行 ***

“删除用户”

你能提供一个例子：

如果用户是 drop 并且 oracle 清除了用户的模式对象，我仍然可以选择要保留或删除的数据行吗？

那么您是说不能在删除用户事件时创建触发器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:41:04.257

当然可以。假设您实际上是删除*用户*而不是表：

您正在寻找[系统触发器](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#LNPLS99887)，而不是模式触发器或数据库触发器。您可以将这些添加到大量[ddl 事件中](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#CIHBDEFD)，包括`DROP`.

从文档中引用：

> 每当 DROP 语句从数据字典中删除数据库对象时，使数据库触发触发器。

您的触发器可能如下所示：

```
create or replace trigger tr_drop_user
  before drop on database

begin
   if dbms_standard.dictionary_obj_type = 'USER' then

      insert into logs ( user, object_name )
      values ( sys_context('USERENV','OS_USER') -- OS User doing the dropping
             , dbms_standard.dictionary_obj_name -- name of object being dropped
              );

   end if;
end;
/ 
```

这使用[没有特别完善的文档](http://www.oracle.com/pls/db112/search?remark=quick_search&word=dbms_standard) `dbms_standard`包来确定正在发生的事情。在我看来，PSOUG 有[更好的文档。](http://psoug.org/reference/system_events.html)

如果您只想针对特定模式而不是针对整个数据库执行此操作，请`before drop on schema`改用。

* * *

就像一点旁注一样，我不相信有必要在触发器中执行此操作。如果您创建了一个包`drop_user`和`create_user`程序，可以在一个地方完成您想要的所有事情，而不是在触发器中隐藏逻辑，那会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:44:18.007

您不能创建`triggers`on 语句（`DDL`或`DML`，*除了在[此处](http://psoug.org/reference/system_trigger.html)*找到的某些系统级语句）。触发器只能在`tables`数据库上创建。在你的问题中，[`drop user <username>;`](http://docs.oracle.com/cd/B12037_01/server.101/b10759/statements_9008.htm)是一个声明。

我引用：

> 使用 DROP USER 语句删除数据库用户并可选择删除用户的对象。
> 
> 当您删除一个用户时，Oracle 数据库还会从回收站中清除该用户的所有模式对象。

注意 - 考虑到您是尝试实际`drop`使用`user`还是尝试使用`drop`名为 的自定义表`user`，以下是您将使用的语句。

要删除数据库用户 -`drop user username [cascade];`

要删除名为 user 的表 -`drop table user [cascade constraints];`

中的选项`[ ]`是可选的。

# iphone - 如何释放多个alloc类？

> ID：12101675
> 
> 赞同：-2
> 
> 时间：2012-08-24T00:08:51.260
> 
> 标签：iphone, ios, cocos2d-iphone

嗨，我很困惑如何释放已经不存储头文件指针的 aclloc 类。在循环之后，我失去了指向类的指针，因为它具有所有相同的实例名称。

```
for(i=0;i<20;i++){
  MyClass *class = [[MyClass init]alloc];
   class.count = i;
  [classArray addObject:class];  
  [self addToScene:class];

} 
```

我了解内存分配和保留的基本概念，但由于我使用 cocos2d 进行编程，我不确定错误的原因是来自 Object-c 还是 cocos2d。所以我只想对object-c中的处理内存有一个清晰的认识。帮我：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:14:32.420

Præ-scriptum：应该交换 alloc 和 init 调用（首先分配，然后才初始化）。

您必须在循环内释放它们 - 将它们添加到数组中会保留它们。

```
for(i = 0;i < 20; i++) {
    MyClass *obj = [[MyClass alloc] init];
    obj.count = i;
    [classArray addObject:obj];
    [obj addToScene:obj];
    [obj release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:12:49.850

如果我理解正确，请将对象存储在 an 中`NSArray`并释放它们。然后在你完成对象后释放数组。这是解决它的一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:14:42.800

该数组保留其自己的内容，因此您只需确保不保留它：

```
// Simpler
{
    MyClass *c = [[[MyClass alloc] init] autorelease];
    ⋮
} 
```

或者：

```
// Less memory
{
    MyClass *c = [[MyClass alloc] init];
    ⋮
    [c release];
} 
```

甚至：

```
// Rely on ARC (simpler and less memory).
{
    MyClass *c = [[MyClass alloc] init];
    ⋮
} 
```

**编辑：**感谢@H2CO3 发现交换的 alloc 和 init 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T07:35:59.657

看，当你将一个**对象添加到 array**时，它的**引用计数**会增加**1**，因为 array 是指该对象。因此，最好在将**分配的对象添加到数组后****释放**它，或者**在分配时将其标记为自动释放**，以便在帧结束时选择所有标记为**自动释放**的对象进行**垃圾回收。**

 ******所以试试这个，

```
MyClass *obj = [[[MyClass alloc] init] autorelease]; 
```

或者这个，

```
MyClass *obj = [[MyClass alloc] init];
....
....
[classArray addObject: obj];
[obj release]; 
```******

# javascript - 为什么此 requestAnimationFrame 设置无法正确执行？

> ID：12101677
> 
> 赞同：1
> 
> 时间：2012-08-24T00:09:29.867
> 
> 标签：javascript, requestanimationframe

渲染我的画布的函数是一个类的原型方法，如下所示：

```
Engine.prototype.renderCameras = function() {
        console.log('渲染正常');
}

```

当我尝试直接运行此代码时，它工作正常：

```
engine.renderCameras()
>>> render ok 
```

当我尝试在 Chrome 或 Firefox 中使用 requestAnimationFrame 运行它时，我得到了这个：

```
window.requestAnimFrame(engine.renderCameras())
>>> render ok
>>> Error: Component returned failure code: 0x80570009 (NS_ERROR_XPC_BAD_CONVERT_JS) [nsIDOMWindow.mozRequestAnimationFrame] 
```

它运行，但它总是抛出一个错误。这不酷。

当我尝试像这样运行它时：

```
window.requestAnimFrame(engine.renderCameras)
>>> 0 
```

它什么也不做。

我能够通过使用闭包来解决这个问题，但我仍然想知道为什么我不能将这样的函数传递给 requestAnimationFrame。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T00:52:45.993

```
window.requestAnimFrame(engine.renderCameras()) 
```

不是将函数传递给`requestAnimFrame`，而是将**返回值**传递`engine.renderCameras`给`requestAnimFrame`。返回值可能不是函数，这就是您收到此错误的原因。

```
window.requestAnimFrame(engine.renderCameras) 
```

而是正确地传递了一个函数引用，但是里面的[`this` *^([docs])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)`renderCameras`不会引用`engine`. 如果你依赖它（我假设基于设置），你要么必须`engine.renderCameras`正确传递一个函数调用：

```
window.requestAnimFrame(function(){
    engine.renderCameras();
}); 
```

或使用[`.bind` *^([docs])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)显式设置（和绑定）`this`：

```
window.requestAnimFrame(engine.renderCameras.bind(engine)); 
```

无论哪种方式，您都必须重复调用`window.requestAnimFrame`以获取下一个动画帧，这意味着您通常使用递归函数。例如：

```
window.requestAnimFrame(function render(){
    engine.renderCameras();
    window.requestAnimFrame(render);
}); 
```

# fft - 基数 32 FFT 实现

> ID：12101679
> 
> 赞同：0
> 
> 时间：2012-08-24T00:09:54.190
> 
> 标签：fft

谁能给我指出Radix 32 FFT的ac代码实现。我正在尝试自己编写代码，因为我需要在 FFT 中添加几个特殊函数调用，所以请不要将我指向库。谢谢回答！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:03:03.820

如果您找不到 radix32 FFT 的现有 C 实现，您可能会很幸运地修改[Kissfft](http://sourceforge.net/projects/kissfft/)以添加 radix32 蝴蝶级。它有 2,3,4,5 根。radix4 阶段最接近您的需要。

# css - 如何在 CSS 中将标题链接居中？

> ID：12101680
> 
> 赞同：3
> 
> 时间：2012-08-24T00:10:00.113
> 
> 标签：css

因此，我在 CSS 中设计了一个网站，并试图将我的导航栏（带有链接的标题）居中，但是当我使用“文本对齐：中心”和“边距：自动”属性时，它不起作用。这是我的 HTML 文件代码：

```
<html>
  <head>
    <meta http-equiv="Content-Type"
         content="text/html;charset=ISO-8859-1">
    <title>Brickwood Fire Dept. - Established 2008</title>
    <link type="text/css"
         rel="stylesheet" href="main_style.css" media="screen"
  </head>
<body>
  <h1>
    Brickwood Fire Department
  </h1>
  <h2>
    Established 2008
  </h2>
  <h3>
    <a class = "home" href = "http://www.brickwoodfiredept.weebly.com">Home</a>
    <a href = "http://www.brickwoodfiredept.weebly.com/contact-us">Contact</a>
    <a href = "http://www.brickwoodfiredept.weebly.com/media.html">Media</a>
    <a href = "http://www.brickwoodfiredept.weebly.com/links">Links</a>
    <a href = "http://www.brickwoodfiredept.weebly.com/newsletter">Newsletter</a>
  </h3>
</body>
</html> 
```

这是我的 CSS 代码：

```
a {
  color : white ;
  background : #32C1DA ;
  width : 30% ;
  text-align : center ;
  font-family : Arial ;
  font-size : 150% ;
  margin : auto ;
  word-spacing : normal
} 
```

剩下的 CSS 代码被省略以节省空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:14:27.820

尝试将 text-align 放在 h3 标签而不是 a 标签上。

```
h3 { text-align:center; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:19:51.387

最简单的答案是：

```
h3 {
    text-align:center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:11:48.067

尝试添加

```
display:block; 
```

到你的 CSS

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T00:13:42.183

您需要`margin:auto;`在父级（h3 标签）和`text-align:center;`子级（a 标签）上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T00:23:50.727

像这样 h3 { width : 30% ; 文本对齐：居中；} 一 { 颜色 : 白色 ; 背景：#32C1DA；宽度：30%；文本对齐：居中；字体系列：Arial；字体大小：150%；边距：自动；字间距：正常}

# windows - 在 XP 的 Windows 资源管理器中更改“其他位置”

> ID：12101685
> 
> 赞同：1
> 
> 时间：2012-08-24T00:10:49.427
> 
> 标签：windows, explorer, shell-extensions

XP中Windows资源管理器左侧面板中的“其他地方”来自哪里（例如在注册表中？）并且可以更改吗？我似乎找不到任何成功改变这一点的人。

# javascript - 嵌套请求被阻塞

> ID：12101687
> 
> 赞同：4
> 
> 时间：2012-08-24T00:11:01.130
> 
> 标签：javascript, node.js, asynchronous, nonblocking

我对nodejs比较陌生。我最近将过去几个月收集的所有集体知识汇集到一个项目中。我相信我在 nodejs 中遇到了我的第一个“阻塞”问题。

我有一个页面加载两个`request()`调用，它们是异步的并相应地嵌套。最内层使用来自最内层的数据来重定向用户。

```
 request(parameters,function(error, response, data){
      //the first request passes a token  
      request(newParamters,function(error, response, data){
          //the second request passes a url
          res.redirect(data.info.url);
      });
  }); 
```

错误是，当我在许多浏览器选项卡中打开它时，它最终在第一对之后中断，然后服务器说`data.info.url`未定义。

我的问题是：**我应该一次只执行一个请求吗？**我可以从第一个保存令牌`request()`并将用户重定向到第二个`request()`，这有帮助吗？我对异步而不是阻塞非常有良心，我对这种情况的发生感到震惊。任何反馈都会很棒！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T05:47:52.023

像这样的嵌套会导致很多问题。

我更喜欢这种模式，我将所有内容分解为更易于阅读的命名函数。

当一个函数完成时，它会调用下一个函数，依此类推。

```
parameters = {};   //define parameters
first(parameters); // call first function to kick things off.

var first = function(parameters) {

      request(parameters,function(error, response, data){
         newParamters = date.something;        
         second(newParamters, data); //call second function         
     });
};

var second = function(newParamters, data){

      request(newParamters,function(error, response, data){
          res.redirect(data.info.url);
     });
} 
```

这种模式是“非阻塞”的，所以当第一个请求发出时，nodejs 进程退出并在收到响应时继续，然后才会调用第二个函数。

当发出第二个请求时，nodejs 进程再次退出。重定向只会在收到响应后发生。

# c# - 在 C# 中使用 RegEx 查找具有优化迭代次数的模式

> ID：12101688
> 
> 赞同：0
> 
> 时间：2012-08-24T00:11:03.400
> 
> 标签：c#, .net, regex, optimization

考虑以下两种情况，在这两种情况下，要测试的字符串都将仅包含任意组合的字符“a”、“t”、“g”和“c”，并且可以是任意长度。例如，它可能只有“t”。

*   测试“a”是否出现超过 5 次。如果字符串的长度为 100，并且字符“a”在前 10 个位置出现五次，则正则表达式不应搜索剩余的字符串。
*   测试是否零个或多个连续的“a”只出现一次，并且字符串不能以“a”结尾。有效示例：ggtcccccccctggtaaaatcg、gctgctcgtccttgcttcg、ag。无效：a、agatcttgcgt、agtcga。

现在我知道如何构建一个基本的正则表达式来测试这两种情况，但我想确保搜索得到优化并且不会浪费不必要的迭代。在上面的第二点中，agatcttgcgt 应该在测试第三个字符后立即终止，因为它违反了连续规则。

优化正则表达式的任何帮助都会有所帮助。此外，这不是主要问题，而是我如何才能看到如何执行搜索的内部信息（迭代次数等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:14:41.820

如果性能至关重要，您可能需要考虑非正则表达式解决方案。例如，您的第一个要求可以通过使用轻松解决`string.Contains`。

正则表达式通常以线性方式从左到右扫描其输入，查看每个字符直到找到匹配项，如果存在回溯，可能会多次查看字符。另一方面，存在一些高级[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm)，它们可以确定子字符串的存在或不存在，而不必检查字符串中的所有字符。例如，要搜索`aaaaa`您只需检查每五个字符，直到找到`a`.

> 此外，这不是主要问题，而是我如何才能看到如何执行搜索的内部信息（迭代次数等）？

您可以使用 RegexBuddy 调试正则表达式并查看需要多少步骤：

![RegexBuddy：调试正则表达式](../Images/3efd3e0bd5231a7f7016287fb1bf4bab.png)

# nginx - 包含空白 spce 的 Nginx 重写

> ID：12101690
> 
> 赞同：5
> 
> 时间：2012-08-24T00:11:09.250
> 
> 标签：nginx, rewrite

我们的一个客户创建了一个 QR 码，其中 url 中有一个空格。我将如何编写处理此问题的 nginx 重定向？

几次尝试在字符串中使用“%20”之类的东西似乎会导致 nginx 出错或配置测试失败

准确地说，二维码是这样的

[http://www.google.com/somestuff/someotherstuf/pagewewant](http://www.google.com/somestuff) _

我需要将其重新定向到

[http://www.google.com/somestuff/someotherstuf/pagewewant](http://www.google.com/somestuff/someotherstuf/pagewewant) （重写后 somestuff 不应显示空白）

谢谢你的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-19T09:25:18.640

问题已经超过两年了，但也许它会让人头疼。

警告词：我不是 nginx 专家。这只是我在找到这个悬而未决的问题后尝试过的事情之一，而且它碰巧奏效了。这可能不是最好的方法。我建议检查 nginx 文档，以防有人正在处理大量此类位置。

对于包含空格的偶尔重写，我将路径放在单引号中：

```
location '/level_one /landingpage.htm' { 
rewrite ^ http://www.foo.bar/level_one/landingpage.htm permanent; } 
```

如果由于某种原因您需要在目标中有空格，请将其放在单引号中：

```
location '/downloads/foo bar.pdf' { 
rewrite ^ 'http://www.foo.bar/documents/foo bar.pdf' permanent; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T13:10:54.457

我遇到了完全相同的问题。您不能使用 %20 的原因是，nginx 将解释 uri，因此 %20 将不匹配：

```
http request line: "GET /something/%20something HTTP/1.1"
http uri: "/something/ something" 
```

我不想为此使用位置，所以我使用了：

```
rewrite ^/something/\ something /something/something permanent; 
```

这对我来说很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-21T11:57:33.420

如果您想从 URL 中删除空格，然后重定向到没有空格的剥离 URL，只需使用以下命令来捕获所有有问题的 URL：

```
rewrite ^(.*)(\s|%20)(.*)$ $1$3 permanent; 
```

这基本上是在捕获组 1 ( )中第一次出现空格`\s`或 URL 编码空格之前抓取所有内容。然后将空间捕获在第 2 组 ( ) 中。然后最后在第 2 组中剩下的任何东西都被捕获到第 3 组 ( )。然后我将捕获组 1 和 3 连接在一起 ( ) 以形成重定向 URL，而捕获组 2 ( ) 中没有空格。`%20``$1``$2``$3``$1$3``$2`

这将适用于整个 URL 中包含多个空格的 URL，但它一次只能工作一个。因此，其中包含 2 个空格的 URL，然后将重定向到具有 1 个空格的 URL，然后最终重定向到没有空格的 URL。

如果您愿意，您当然可以将重定向类型从永久更改。这目前将使用 301 代码重定向。

# r - 在fitdist中更改qq图的线条颜色

> ID：12101692
> 
> 赞同：0
> 
> 时间：2012-08-24T00:11:25.330
> 
> 标签：r

我已经运行 fitdist 并将结果存储在：

```
params = fitdist( data, dist,method="mle" )
results[[i]]<-params 
```

我的问题是当我使用：

```
plot(results[[1]]) 
```

我得到了几个图形，包括一个 qqplot。我想改变qqplot线条的颜色。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T17:48:21.473

如果您使用包中包含的函数`denscomp`、和逐步创建此图，`qqcomp`则可以影响颜色：`cdfcomp``ppcomp``fitdistrplus`

```
# sample dataset:
data <- rnorm(1000, 0, 1)

# calculate fitting:
fitting <- fitdist(data, "norm")

# the original plot:
par(mfrow=c(1,1))
plot(fitting)

# create it graph by graph with different colors:
par(mfrow=c(2,2))
denscomp(fitting, datacol="gray", fitcol="blue")
qqcomp(fitting, fitpch = 20, fitcol="gray", line01col ="blue")
cdfcomp(fitting, datacol="gray", fitcol="blue")
ppcomp(fitting, fitpch = 20, fitcol="gray", line01col = "blue") 
```

# ruby-on-rails - Rspec 无法加载错误

> ID：12101697
> 
> 赞同：0
> 
> 时间：2012-08-24T00:11:51.840
> 
> 标签：ruby-on-rails, rspec

昨天运行这个（bundle exec rspec spec/requests/static_pages_spec.rb）运行良好，但是今天当我回到我的环境（Aptana）时，我收到以下错误：

```
/Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load': c
annot load such file -- /Users/sa/Documents/AptanaWorkspace/receiver/spec/spec/requests/static_pages_spec
.rb (LoadError)
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746
:in `block in load_spec_files'
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746
:in `map'
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746
:in `load_spec_files'
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:i
n `run'
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run
'
        from /Users/sa/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `blo
ck in autorun' 
```

当我检查了所有引用并试图从我的应用程序的根目录运行它时，我感到很困惑。非常感谢所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:18:23.263

```
cannot load such file -- /Users/sa/Documents/AptanaWorkspace/receiver/spec/spec/requests/static_pages_spec.rb (LoadError) 
```

看起来你有一个额外`/spec`的在那里，可能应该是 `/Users/sa/Documents/AptanaWorkspace/receiver/spec/requests/static_pages_spec.rb`。你确定你没有改变任何东西？

# c# - 如何为 DataGridView 伪造“AlternatingColumnsDefaultCellStyle”？

> ID：12101698
> 
> 赞同：0
> 
> 时间：2012-08-24T00:11:54.830
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

DataGridView 有一个“AlternatingRowsDefaultCellStyle”，它就像一个冠军。但我需要相反的分界/装饰。是否有一个属性可以使列背景的颜色与默认颜色不同，或者我是否需要为 CellFormatting 事件编写代码，或者......？

## 更新

好的，这看起来很奇怪：

使用此代码，来自 Ascension：

```
dataGridView1.Columns[i].ItemStyle.BackColor = Color.Blue; 
```

...我得到：

*“System.Windows.Forms.DataGridViewColumn”不包含“ItemStyle”的定义，并且找不到接受“System.Windows.Forms.DataGridViewColumn”类型的第一个参数的扩展方法“ItemStyle”（您是否缺少 using 指令还是汇编参考？）*

但是，如果我只输入第一部分（*dataGridView1.Columns[i].*），我会通过 Intellisense 获得“ItemStyle”作为选择的有效选项，但是当我输入时它会变成红色（可能是 Resharper 效果）。之后的一个点允许选择 BackColor 属性，然后它不是红色的。

为什么会发生这种奇怪的行为，是否有解决方法？

并且：红色 Intellisense 项目是否表示无法访问，如果是，为什么会显示它们？“预告片”成员有什么价值吗？

## 更新 2

这很有效（受 Ascension 的启发，所以我给他/她正确的答案）：

```
DataGridViewCell cell = new DataGridViewTextBoxCell();
cell.Style.BackColor = Color.Wheat;
dataGridView1.Columns[i].CellTemplate = cell; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:17:29.277

您是否尝试通过转到 DataGridView Property -> Misc -> Columns (open collection) -> DefaultCellStyle 为每列设置颜色

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T02:05:49.917

试试这个：

```
DataGridView Property -> Misc -> Columns ... -> ItemStyle -> BackColor 
```

或下面的脚本

```
protected void Page_Load(object sender, EventArgs e)
        {
            for (int i = 0; i < GridView1.Columns.Count; i++)
            {
                if (i % 2 == 0)
                {
                    GridView1.Columns[i].ItemStyle.BackColor = Color.Red;
                }
                else
                {
                    GridView1.Columns[i].ItemStyle.BackColor = Color.Blue; ;
                }
            }
        } 
```

# django - 在 django 中上传整个目录

> ID：12101699
> 
> 赞同：1
> 
> 时间：2012-08-24T00:11:59.810
> 
> 标签：django, file-upload

我正在尝试在 django 中创建一个 Web 界面，供客户将文件夹的全部内容上传到我的网站。当我为拥有大量图像的客户（艺术家/活动策划者/等）构建网站时，这将很有用。尽管获取 zip 文件会更容易，但对于我的...erm...不太技术倾向的客户来说，能够只获取一个目录会更好。那么，无论如何我可以创建一个 django 表单来接受并上传目录中的所有文件吗？

我可以找到很多关于如何处理单个文件的示例，它们看起来很简单，但我真的更喜欢能够获取目录并获取该目录中所有内容的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:47:11.420

可能所有体面的浏览器都会阻止任意文件系统访问。但是，您*可以*使用 javascript 选择目录中的所有文件并对其进行迭代，并在您的多部分表单中为每个文件创建一个上传字段。

那里有一些免费赠品，例如[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:05:51.600

听起来您正在寻找[https://github.com/tstone/django-uploadify](https://github.com/tstone/django-uploadify)。如果您需要更多详细信息，还可以在这里查看：[Uploading multiple files in Django through one form field](https://stackoverflow.com/questions/1706880/uploading-multiple-files-in-django-through-one-form-field)。

刚刚看到，[blueimp 也](http://blueimp.github.com/jQuery-File-Upload/)带有内置的 Django 后端

但是，请注意，您需要“现代”浏览器才能工作:-)，它可能不兼容 IE 6 或 7

# c# - WebClient 不下载文件，但返回 Completed

> ID：12101703
> 
> 赞同：1
> 
> 时间：2012-08-24T00:12:06.433
> 
> 标签：c#, webclient

我的代码如下。我正在尝试下载一个文件，我的应用程序给了我“找不到文件名 - 下载”，然后是“完成”，因为这段代码，但是当我去查看时，实际上并没有下载任何文件。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        download(@"mp3spi.jar", Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\.minecraft\bin\lob\");
    }

    public void download(String filename, String path)
    {
        filenameLabel.Text = filename;
        MessageBox.Show(filename + " Not found - downloading.");
        WebClient webClient = new WebClient();
        webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
        webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
        webClient.DownloadFileAsync(new Uri("http://mysite.com/client/" + filename), path);
    }

    public void ProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }

    private void Completed(object sender, AsyncCompletedEventArgs e)
    {
        MessageBox.Show("Finished.");
    } 
```

有人可以指出我出了什么问题吗？我想也许它需要以管理员身份运行，但这只是做了同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:17:53.327

您的代码尝试保存到文件夹路径 ("...\lob\")，它不是文件名 (...\lob\my_file.ext")。

[WebClient.DownloadFileAsync(Uri Uri地址，字符串文件名)](http://msdn.microsoft.com/en-us/library/ms144196.aspx)

# python - 如何从上一页访问提交按钮传递的值？

> ID：12101705
> 
> 赞同：0
> 
> 时间：2012-08-24T00:12:24.820
> 
> 标签：python, html, forms, url, submit

我有一个表单，它有几个复选框和文本框，它们的值都由一个提交按钮传递到不同的 url。但是，我现在正在尝试编写新的 url 页面，但不知道如何访问这些值。

```
<form name="myform" action="result" method = "get">

        <fieldset>
            <input type="checkbox" value="total_money" name="check" onchange="javascript:toggle('money');" /> Filter by Total Money</br>

                <div id="money" style="display:none" name="option">  

                    <input type="checkbox" value="more" onchange="javascript:toggleLine('money_text');"  name="condition"/> <label for="condition" > > </label>

                        <div id = "money_text" style="display:none"  >
                            <input type="text" id="money_box" name="money_name" value="lower limit" />
                        </div></br>

                    <input type="checkbox" value="less" onClick="javascript:toggleLine('money_text1');" name="condition"/> <label for="condition1"> < </label>

                        <div id = "money_text1" style="display:none;"  >
                            <input type="text" id="money_box1" name="money_name1" value="upper limit" />
                        </div>

                </div>

            <input type="checkbox" value="employees" name="check" onchange="javascript:toggle( 'employees');"/> Filter by Employees</br>

                <div id="employees" style="display:none" name="option"> 

                    <input type="checkbox" value="more" onchange="javascript:toggleLine('employees_text');" name="condition"/> <label for="condition" > > </label>

                        <div id = "employees_text" style="display:none"  >
                            <input type="text" id="employees_box" name="employees_name" value="lower limit" />
                        </div></br>

                    <input type="checkbox" value="less" onClick="javascript:toggleLine('employees_text1');" name="condition"/> <label for="condition1"> < </label>

                        <div id = "employees_text1" style="display:none;"  > 
                            <input type="text" id="employees_box1" name="employees_name1" value="upper limit" />
                        </div>
                </div>                         
        </fieldset>
    <input type="submit" value="Submit" />
</form>​ 
```

我得到的 url 响应看起来像这样（取决于检查或不检查的内容/输入）：

```
url:   http://127.0.0.1:8000/crunchApp/result?check=total_money&condition=more&money_name=lower+limit&money_name1=upper+limit&check=employees&employees_name=lower+limit&condition=less&employees_name1=upper+limit 
```

我需要将此标准用作搜索数据库但似乎无法弄清楚的python方法的参数。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:16:18.623

这可以通过一点搜索找到。

[http://www.daniweb.com/software-development/python/threads/22312/get-posted-form-data-in-python](http://www.daniweb.com/software-development/python/threads/22312/get-posted-form-data-in-python)

```
python cgi script--->addDo.cgi

import cgitb; cgitb.enable()
import cgi
import sys
form = cgi.FieldStorage()

// THIS IS WHERE THE VARIABLE IS READ FROM THE HTTP FORM POST
photos = form["photolist"]

i=0
for photo in photos:
    i = i + 1
    finalPhoto = finalPhoto + "," + photo[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:43:41.723

如果你想使用类似的东西，你可以很容易地在瓶子里做到这一点：

```
from bottle import route,request,static_file,template

@route('/mypage',method="GET")
def get_mypage():
    #return static_file('mypagetopost.html')  #you can use either static_file or template
    return template('mypagetopost.tpl')
@route('/mypage',method="POST")
def post_mypage():
    money_text=request.forms.get("money_text")  #you get the value of the form by getting it by name.
    #return "Your money_text text was:%s" % money_text
    return template('yourposttemplate.tpl',yourpostpagevarformoney_text=money_text) #you can pass variables to your template through returning the template, however you cannot do this with static_file 
```

需要在您的 html 页面中进行调整：添加：`action="/mypage" method="post"`到您的提交中。

另请注意，在默认情况下使用带有 Bottle 的 WSGI 服务器时，您需要设置静态文件处理程序（用于 css/js/static html）并相应地更改您的链接。

# tinymce - Schema 对象的 TinyMCE 问题

> ID：12101706
> 
> 赞同：2
> 
> 时间：2012-08-24T00:12:32.433
> 
> 标签：tinymce

每当我单击媒体插件时，都会显示弹出窗口，但类型：选择列表为空。在我的 Javascript 控制台中，我看到一个错误，这是屏幕截图：

[https://skitch.com/e-etdebruin/eqqgb/developer-tools-http-et.ekklesia.current.dev-vendor-tinymce-plugins-media-media.htm-3.4.0.4](https://skitch.com/e-etdebruin/eqqgb/developer-tools-http-et.ekklesia.current.dev-vendor-tinymce-plugins-media-media.htm-3.4.0.4)

未捕获的类型错误：对象 [object Object] 没有方法“getElementRule”

代码片段位于 tinymce/plugins/media/js/media.js 中：

```
 getMediaTypeHTML : function(editor) {
        function option(media_type, element) {

            if (!editor.schema.getElementRule(element || media_type)) {

                return '';
            }

            return '<option value="'+media_type+'">'+tinyMCEPopup.editor.translate("media_dlg."+media_type)+'</option>';
        } 
```

我相信我们正在使用 Tiny 的最新版本之一。

关于我搞砸了什么的任何指导？

这是我的配置：

```
tinyMCE_GZ.init({
  plugins : 'advimage,advlink,table,fullscreen,paste,media,spellchecker,imagemanager,template,insertform',
  themes : 'advanced',
  languages : 'en',
  disk_cache : true,
  debug : false
});

tinyMCE.init({
  theme : 'advanced',
  plugins : 'advimage,advlink,table,fullscreen,paste,media,spellchecker,imagemanager,template,insertform',
  mode : 'textareas',
  editor_deselector : 'mceNoEditor',
  theme_advanced_toolbar_location : 'top',
  theme_advanced_toolbar_align : 'center',
  theme_advanced_layout_manager : 'SimpleLayout',
  theme_advanced_buttons1: 'bold,italic,underline,strikethrough,separator,justifyleft,justifycenter,justifyright,justifyfull,separator,cut,copy,pastetext,pasteword,selectall,separator,spellchecker,styleselect,formatselect',
  theme_advanced_buttons2: 'link,unlink,anchor,separator,image,insertimage,media,template,insertform,separator,bullist,numlist,blockquote,outdent,indent,separator,code,separator,removeformat,cleanup,separator,fullscreen',
  theme_advanced_buttons3: 'tablecontrols',
  apply_source_formatting : true,
  valid_elements: 
  spellchecker_languages : '+English=en',
  extended_valid_elements : 'script[src|type],form[action|method|id|class|enctype]',
  valid_children : '+body[style]',
  theme_advanced_statusbar_location : 'bottom',
  theme_advanced_resizing : true,
  theme_advanced_resize_horizontal : false,
  theme_advanced_blockformats : 'p,h2,h3,h4,h5,h6,div',
  external_image_list_url : '/vendor/tinymce/monk/clientImageList.php',
  external_link_list_url : '/vendor/tinymce/monk/clientLinkList.php',
  media_external_list_url : '/vendor/tinymce/monk/clientVideoList.php',
  flash_external_list_url : '/vendor/tinymce/monk/clientFlashList.php',
  flash_wmode : 'transparent',
  relative_urls : false,
  content_css : '/vendor/tinymce/monk/contentCss.php',
  template_external_list_url : '/vendor/tinymce/monk/clientMonkletList.php?monklets=true',
  template_popup_width : '400',
  template_popup_height : '250'
}); 
```

我将不胜感激任何反馈。

# ios - 在完成之前取消 UIView animateWithDuration

> ID：12101708
> 
> 赞同：19
> 
> 时间：2012-08-24T00:12:47.717
> 
> 标签：ios, uiview, uianimation, quartz-core

我的项目中有这段代码：

```
- (void) fadeImageView {
    [UIView animateWithDuration:1.0f
                          delay:0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         self.imageView.alpha = 0.0f;
                     }
                     completion:^(BOOL finished) {
                         //make the image view un-tappable.
                         //if the fade was canceled, set the alpha to 1.0
                     }];

} 
```

但是，在某些情况下，我想在 imageview 变得不可见之前取消此操作。有没有办法取消这个动画中间动画？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-03T12:11:56.327

**来自 Apple 文档：** *在 iOS 4.0 及更高版本中不鼓励使用此方法。相反，您应该使用该* `animateWithDuration:delay:options:animations:completion:` *方法来指定您的动画和动画选项。：*

```
[UIView animateWithDuration:1.f
                      delay:0
                    options:UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
                     self.imageView.alpha = 0.0f;
} completion:NULL]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T12:54:30.697

首先，您必须将 UIViewAnimationOptionAllowUserInteraction 添加到选项中，例如..

```
- (void) fadeImageView {
    [UIView animateWithDuration:1.0f
                          delay:0
                        options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         self.imageView.alpha = 0.0f;
                     }
                     completion:^(BOOL finished) {
                         //make the image view un-tappable.
                         //if the fade was canceled, set the alpha to 1.0
                     }];

} 
```

然后做一个这样的方法....

```
-(void)stopAnimation {
    [self.routeView.layer removeAllAnimations];
} 
```

之后，当您想使用 ..... 删除上述方法的动画调用时

```
[self performSelectorOnMainThread:@selector(stopAnimation) withObject:nil waitUntilDone:YES]; 
```

希望对你有帮助

快乐的编码............!!!!!!!!!!!! :)

编辑：

感谢 user1244109 为我提供指导。

对于 iOS7，我们必须再添加一个选项`UIViewAnimationOptionBeginFromCurrentState`，例如：

```
[UIView animateWithDuration:1.0f
                              delay:0
                            options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState
                         animations:^{
                             self.imageView.alpha = 0.0f;
                         }
                         completion:^(BOOL finished) {
                             //make the image view un-tappable.
                             //if the fade was canceled, set the alpha to 1.0
                         }]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-28T22:16:30.457

更新：更喜欢Borut Tomazin 的这个答案[https://stackoverflow.com/a/21527129/194309](https://stackoverflow.com/a/21527129/194309)

# ios - iOS 应用程序构建服务器

> ID：12101710
> 
> 赞同：0
> 
> 时间：2012-08-24T00:12:50.337
> 
> 标签：ios, xcode, xcodebuild, provisioning-profile

我想设置一个 OSX 服务器，可以代表多个开发人员构建 iOS 应用程序。（开发人员将提供用于以定义的方式修改模板应用程序项目的数据，以生成已构建的项目。）

每个开发人员将提供：

1.  代码签名证书
2.  配置文件
3.  其他应用特定数据

服务器将：

1.  用证书做XXXXX
2.  用配置文件做 YYYYY
3.  复制一个模板 Xcode 项目并通过 ZZZZZ 修改它以指向 1) 和 2)
4.  构建项目（我假设使用 xcodebuild）以生成应用程序包

有没有办法设置一个 Xcode 项目来指向配置文件和证书文件本身，而不是通过钥匙串和 Xcode 对配置文件所做的任何事情？（有一个相关的问答提到将配置文件放在 Xcode 使用的某个文件夹中，但在最新的 Xcode 中似乎不再是这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:36:43.603

查看 Jetbrains 的 Teamcity。它是一个免费的、多功能的持续集成服务器，它可以使用方案构建甚至测试 Xcode 项目。以下是一些功能：

*   自动化代码分析、编译和测试过程，提供关于构建进度、问题和测试失败的即时反馈，所有这些都在简单、直观的 Web 界面中；
*   同时在不同的配置和平台下运行多个构建和测试；
*   执行预测试提交，帮助团队其他成员维持不间断的工作流程；
*   通过关于构建持续时间、成功率、代码质量和自定义指标的可定制统计数据了解构建历史；

链接： http: [//www.jetbrains.com/teamcity/](http://www.jetbrains.com/teamcity/)

# clearcase - Clearcase 基于超链接“HlinkToText”属性值查找版本

> ID：12101715
> 
> 赞同：1
> 
> 时间：2012-08-24T00:13:17.703
> 
> 标签：clearcase, cleartool

我们正在使用带有 ClearQuest 集成的基本 ClearCase，并且每当进行签入时，带有 ClearQuest 中 WorkRequest 编号的超链接将附加到签入版本。我可以查看 ClearQuest 中 WorkRequest 的变更集，但希望能够在 ClearCase 中找到所有文件，以便我们可以自动化我们的流程。

无论如何可以根据附加超链接的属性值找到文件的版本？

IE。描述文件列出了超链接：

```
超链接：
    CrmRequest@50304@\java "WorkRequest" -> "HUBUB00081581"

```

然后描述超链接显示属性：

```
属性：
    HlinkFromText = "工作请求"
    HlinkToText = "HUBUB00081581"

```

所以我希望能够找到所有具有名为“CrmRequest”的超链接的文件，其属性“HlinkToText”的值为“HUBUB00081581”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:15:15.210

我决定创建一个签入触发器，该触发器将读取保存相关工作请求编号的缓存文件，然后使用该值将属性应用于相关版本。我们现在可以根据属性值进行查找，而不是深入研究超链接；它通过版本树也更加明显。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:52:46.737

您可以使用 find 命令来显示具有“ `CrmRequest`”超链接的每个版本的值，并在正确的值上使用 grep：

Unix：

```
cleartool find . -version "hltype(CrmRequest)" -nxname -exec 'cleartool desc -l "$CLEARCASE_PN"' | grep HUBUB00081581 
```

视窗：

```
cleartool find . -version "hltype(CrmRequest)" -nxname -exec "cleartool desc -l \"%CLEARCASE_PN%\"" | grep HUBUB00081581 
```

# css - firefox @font-face 不起作用

> ID：12101721
> 
> 赞同：2
> 
> 时间：2012-08-24T00:13:47.913
> 
> 标签：css, firefox, fonts, font-face

我正在尝试在我的博客博客上使用自定义图标字体。如果我理解正确的话，firefox 要求下载文件来自同一个域。它在我的 chrome 上运行良好。我也在使用类似的谷歌网络字体。我用谷歌代码托管图标。

在这里：[http:](http://www.tipsontricks.com/p/test.html) //www.tipsontricks.com/p/test.html Chorme 和其他工作但不是 Firefox

这是我正在使用的代码

```
@font-face {
    font-family: 'JustVector';
    src: url('xyz.eot');
    src: url('xyz.eot?#iefix') format('eot'),
         url('xyz.woff') format('woff'),
         url('xyz.ttf') format('truetype'),
         url('xyz#webfontkw9J4lGf') format('svg');
    font-weight: normal;
    font-style: normal;

}

.iconfont{

font-family: 'JustVector';
} 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:23:12.387

您应该使用以下语法：

```
@font-face {
  font-family: 'WebFont';
  src: url('myfont.eot?#') format('eot'),  /* IE6–8 */
       url('myfont.woff') format('woff'),  /* Firefox 3.6+, IE9, Chrome 6+, Safari 5.1+*/
       url('myfont.ttf') format('truetype');  /* Safari 3—5, Chrome4+, Firefox 3.5, Opera 10+ */
} 
```

这是一篇不错的[Paul Irish 博客文章](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)，

还有[Css3Please的语法](http://css3please.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:38:26.703

这是我使用的格式：

```
@font-face {
    font-family: 'Blah';
    src: url('/fonts/blah-webfont.eot');
    src: url('/fonts/blah-webfont.eot?#iefix') format('embedded-opentype'),
         url('/fonts/blah-webfont.woff') format('woff'),
         url('/fonts/blah-webfont.ttf') format('truetype'),
         url('/fonts/blah-webfont.svg#Blah') format('svg');
    font-weight: 300;
    font-style: normal;
}

body {font-family:'Blah'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T05:13:32.630

我刚刚下载了 Firefox 19.0.2。我在使用带有 Font Squirrel webkit 的 @font-face 时遇到了问题。字体在 Firefox 中无法正常显示，但在 Safari 和 Chrome 中正常。

事实证明，Firefox 中有一个隐藏的首选项需要检查才能让 Firefox 在网页上显示自定义字体。

Firefox 首选项 > 内容 > 字体和颜色 > 高级按钮 > 并选中“允许页面使用自己的字体，而不是我上面的选择”框

这解决了我的问题，今天花了大约 4 个小时尝试了各种无效的代码更改。啊！

现在 Firefox 显示的字体与 Safari 和 Chrome 相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T22:48:27.870

上述答案在 FF 中仍然对我不起作用，但是，我的字体在所有其他浏览器中都有效。

Google Webfonts 的字体与我正在寻找的字体相同，但质量低得离谱。

@Kate，使用我自己的字体的FireFox“首选项”已经是默认设置，如果不是，我会感到惊讶。

对我来说仍然是个谜，为什么像 FF 这样的开发浏览器即使在 2 年后也无法解决问题。我的 FireFox 是最新的。

谢谢大家让我的一天更轻松。

# excel - 在 Excel VBA 中选择范围

> ID：12101722
> 
> 赞同：0
> 
> 时间：2012-08-24T00:13:51.243
> 
> 标签：excel, vba

我想创建一个 VBA 子例程，在表中搜索名为“Phonetic Name”的第一列标题。然后在右下角的表格中找到绝对最后一个单元格，并将变量存储为最后一个单元格上方一行的单元格坐标。然后子程序将选择第一个单元格“Phonetic Name”和“LastCell”变量之间的所有单元格。

```
Dim LastCol As Integer

TL = ActiveSheet.Range("A:A").Find("Phonetic Name", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Row

Set LastRow = Cells.Find("*", [a1], , , xlByRows, xlPrevious)

With ActiveSheet
    LastCol = .Cells(TL, .Columns.Count).End(xlToLeft).Column
End With

Set LastCell = ActiveSheet.Cells(LastRow.Row - 1, LastCol)
'I would like to do something like the following... 
ActiveSheet.Range("TL:LastCell").Select
Selection.Copy 
```

如何以对 VBA 友好的方式重写此逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:52:47.617

```
Dim LastCol As Integer  
Dim TL as Range

Set TL = ActiveSheet.Range("A:A").Find("Phonetic Name", _
                 LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True)  

If Not TL Is Nothing Then

    Set LastRow = Cells.Find("*", [a1], , , xlByRows, xlPrevious)  
    With ActiveSheet     
        LastCol = .Cells(TL.Row, .Columns.Count).End(xlToLeft).Column 
    End With  
    Set LastCell = ActiveSheet.Cells(LastRow.Row - 1, LastCol) 
    ActiveSheet.Range(TL,LastCell).Copy

End If 
```

# php - PHP提交表单

> ID：12101723
> 
> 赞同：0
> 
> 时间：2012-08-24T00:14:05.973
> 
> 标签：php, sql, submission

我正在使用 PHP 制作一个简单的提交表单，但出现此错误...

> 未定义索引：C:\Program Files (x86)\wamp\www\alternate\upload.php 中的用户名

我有两个小的 php 文件，一个用于连接到我的数据库，另一个用于处理提交（未完全完成）。

**连接.php**

```
<?php 
$error="unable to connect.";
$connect = mysql_connect("localhost","user","password") or die($error);
mysql_select_db("test") or die ($error);

session_start();
?> 
```

**上传.php**

```
<?php

include("connect.php");

$_SESSION['username']=='registeredUser';

echo "Welcome, ".$_SESSION['username']."!<p>";

echo "Upload your image:

<form action='upload.php' method='post' enctype='multipart/form-data'>
    <input type='file' name='myfile'> <input type='submit' name='submit' value ='upload'>
</form>

";

?> 
```

此时，我应该能够看到带有注册用户名称的表单，但有人告诉我，我要在其中查找该名称的列不存在。我的数据库是用表设置的，用户占了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:15:46.483

您在回答中使用了双等号，您需要一个单等号

```
$_SESSION['username']=='registeredUser';
//change to
$_SESSION['username']='registeredUser'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:20:29.363

您需要一个等号并`<?php session_start(); ?>`在标题中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T00:18:05.930

您`$_SESSION['username']=='registeredUser';`用于设置会话变量。该`==`运算符是松散类型的比较运算符，而不是赋值运算符。要将值分配给变量，请使用单`=`号，如下所示：`$_SESSION['username']='registeredUser';`

# python - 如何使用 Windows CMD 将包上传到 PyPI？

> ID：12101737
> 
> 赞同：2
> 
> 时间：2012-08-24T00:15:09.540
> 
> 标签：python, windows, linux, macos

我是 Python 的初学者，我拥有一本关于 Python 的书，但我被困在必须将包上传到 PyPI 的部分。这本书展示了如何使用 Mac 和 Linux，而不是 Windows。我试图按照这本书，但它根本不适用于 Windows CMD。我想知道是否有人可以在这个话题上帮助我。任何帮助，将不胜感激！

-- 谢谢=) !!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T03:39:21.443

您是否使用 Windows 安装程序安装了 Python？听起来 Python 脚本没有在 python 运行时注册。

你也可以做

```
> cd C:\Path\To\The\Package\Directory
C:\Path\To\The\Package\Directory> C:\Python27\python.exe setup.py register 
```

（将 Python27 替换为您已安装的版本）。

# java - 减少，异或运算符 (--) 在 if 和 for 语句上

> ID：12101738
> 
> 赞同：0
> 
> 时间：2012-08-24T00:15:28.950
> 
> 标签：java, c++, algorithm, operator-keyword

我是一个试图从 C++ 代码中理解算法的新手，之后我想在 java 中实现它，但我发现理解代码有困难，这里有 3 段代码让我感到困惑

```
inline Edge *Node::NextEdge( Edge *prev)
       {
       for (int i = 0; i < 4; i++)
          prev = (Edge *) ( (int) prev ^ (int) edge[i] );
       return prev;
       } 
```

// ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___**

```
if (nextfrag)
      {
      if ( --nextfrag->degree)
         new_frag( nextfrag, fragnum, len, edge ); 
```

// ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___**

```
for (pedge = edge; pedge->parent; pedge = pedge->parent); 
```

我对第一个代码的问题：迭代如何在按位异或运算中工作？什么`prev = (Edge *) ( (int) prev ^ (int) edge[i] );`意思？return 的价值是`prev`多少？
第二个代码的问题：减少运算符如何`if ( --nextfrag->degree)`在 if 语句中工作？
第三个代码：有没有其他方法可以编写该 for 语句？请向我解释一下 for 语句的意思，因为作为一个新手，我只是习惯于 i= 0; 我=某事；我++

抱歉这个愚蠢的问题，但你的解释会对我有很大帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:42:49.887

```
prev = (Edge *) ( (int) prev ^ (int) edge[i] ) 
```

(Edge *) 将结果转换为指向 Edge 对象（或 struct ）的指针

```
( (int) prev ^ (int) edge[i] ) 
```

该表达式将指针“prev”（边缘）转换为 int 并与数组元素 edge[i] 进行异或（不确定类型，因为此变量超出范围 - 但假设它是指向边缘的指针数组）。指针（地址）大小为 int。不确定算法是什么，但似乎假设这将导致一个新的有效指针地址指向另一个 Edge 用于下一次迭代。

```
--nextfrag->degree 
```

在这种情况下，递减 nextfrag 指向的 degree 成员，它是指向具有“degree”成员的结构的指针。

```
for (pedge = edge; pedge->parent; pedge = pedge->parent); 
```

这将遍历链表，直到 pedge->parent == 0 （链表中的头节点）

此代码非常依赖于打包在字边界上的结构。指针（地址）是 32 位或 64 位的，因此这是非常糟糕的代码，除非您绝对确定它将在其上运行的目标计算机，因为如果不明确打包您的结构，它可能会导致 32 位或 64 位计算机之间的不同结果。请参阅“#pragma 包”。

这并没有使它更容易理解。

# c++ - 程序如何记住上次运行的时间？

> ID：12101741
> 
> 赞同：0
> 
> 时间：2012-08-24T00:15:53.157
> 
> 标签：c++, filesystems, last-modified

我正在制作一个简单的程序，用于复制自上次运行以来创建或修改的文件。存储程序本身上次运行时间的最佳方式是什么？我在想它可以有一个文本文件来存储日期和时间，但是有没有一种不需要外部文件的方法？Windows 有“最后修改”日期，但我不知道“最后使用”日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:28:01.503

> 我正在制作一个简单的程序，用于复制自上次运行以来创建或修改的文件。

这就是[归档标志](http://en.wikipedia.org/wiki/Archive_bit)的用途。每当创建或修改文件时，Windows 都会自动设置此标志。

您的程序只需跳过设置了存档标志的文件，然后复制并重置剩余文件上的存档标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:25:15.397

我认为任何方法都需要一个文件或修改过的文件，包括评论中建议的注册表方法。虽然从技术上讲是一个文件，但 NT 文件系统的[替代数据流](http://support.microsoft.com/kb/105763)功能是一种方法。这是一个很好的描述。[http://www.bleepingcomputer.com/tutorials/windows-alternate-data-streams/](http://www.bleepingcomputer.com/tutorials/windows-alternate-data-streams/)

# php - 如何使用 POST 操作在分页表中显示数据？

> ID：12101746
> 
> 赞同：0
> 
> 时间：2012-08-24T00:17:33.927
> 
> 标签：php, codeigniter, post

我试图找到在使用 POST 检索适当数据的分页表中显示数据的最佳方法。问题是当 POST 值`Inactive`执行然后我导航到数据的第二页显示`Active`数据时。我相信这是由于默认数据存在`Active`并且代码未跟踪先前的搜索造成的。我似乎找不到解决这个问题的正确方法。我是否必须使用一些 AJAX 或 jQuery 来跟踪以前的 POST 值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:53:25.607

`$config['suffix'] = '?'.http_build_query($_GET, '', "&");`

我改变了我`POST`然后`GET`我添加了上面的行，我工作得很好。

参考：[带get参数的codeigniter分页url](https://stackoverflow.com/questions/5384644/codeigniter-pagination-url-with-get-parameters)

谢谢

# jquery - WordPress Jquery 插件

> ID：12101749
> 
> 赞同：0
> 
> 时间：2012-08-24T00:18:15.907
> 
> 标签：jquery, wordpress, plugins

我想知道 Jquery WordPress 插件可以在普通网站上使用吗？我知道这可能听起来像一个菜鸟问题，但只是看一些插件，但他们在标题中说 WordPress 插件我想知道有什么大的区别，如果它适用于普通的 html 网站，为什么要在标题中添加 Wordpress ......

感谢任何可以抽出时间回答我的菜鸟问题的人。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:25:10.733

这些插件将被设计为与 Wordpress 插件架构一起使用 - 因此它们将无法在此之外工作。

要在非 wordpress 网站上使用 jQuery，只需将此行添加到您的页面`<head>`：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

您已经准备好开始在您的页面中使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:38:33.547

在普通网站上运行的 jQuery 插件可以在 WordPress 网站上使用。但是除非您编辑核心文件，否则**很难反过来。**

一个例子是[**jQuery Nivo Slider**](http://nivo.dev7studios.com/pricing/)。他们有 WordPress 和普通版本。如果你有 html 的基础知识并且知道 WordPress 的结构，那么你可以在 WordPress 网站上运行普通版本。

但人们喜欢较少的努力。因此，如果您使用 WordPress 插件版本，则无需了解 HTML 或 WordPress 结构。您可以从管理界面自定义插件。

WordPress 插件选项也保存在 WordPress 数据库中。所以这些东西在正常的网站上是行不通的..

所以只是**车轮不能在公共汽车上工作**！[感谢@zerkms 的好例子 :) ]

# java - 用密码加密。加密失败，解密完美

> ID：12101753
> 
> 赞同：0
> 
> 时间：2012-08-24T00:18:31.473
> 
> 标签：java, android, encryption, mcrypt

**加密货币：**

```
 import java.security.NoSuchAlgorithmException;

    import javax.crypto.Cipher;
    import javax.crypto.NoSuchPaddingException;
    import javax.crypto.spec.IvParameterSpec;
    import javax.crypto.spec.SecretKeySpec;

    public class MCrypt {

            private String iv = "fedcba9876543210";
            private IvParameterSpec ivspec;
            private SecretKeySpec keyspec;
            private Cipher cipher;

            private String SecretKey = "0123456789abcdef";

            public MCrypt()
            {
                    ivspec = new IvParameterSpec(iv.getBytes());

                    keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

                    try {
                            cipher = Cipher.getInstance("AES/CBC/NoPadding");
                    } catch (NoSuchAlgorithmException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    } catch (NoSuchPaddingException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }
            }

            public byte[] encrypt(String text) throws Exception
            {
                    if(text == null || text.length() == 0)
                            throw new Exception("Empty string");

                    byte[] encrypted = null;

                    try {
                            cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                            encrypted = cipher.doFinal(padString(text).getBytes());
                    } catch (Exception e)
                    {                       
                            throw new Exception("[encrypt] " + e.getMessage());
                    }

                    return encrypted;
            }

            public byte[] decrypt(String code) throws Exception
            {
                    if(code == null || code.length() == 0)
                            throw new Exception("Empty string");

                    byte[] decrypted = null;

                    try {
                            cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                            decrypted = cipher.doFinal(hexToBytes(code));
                    } catch (Exception e)
                    {
                            throw new Exception("[decrypt] " + e.getMessage());
                    }
                    return decrypted;
            }

            public static String bytesToHex(byte[] data)
            {
                    if (data==null)
                    {
                            return null;
                    }

                    int len = data.length;
                    String str = "";
                    for (int i=0; i<len; i++) {
                            if ((data[i]&0xFF)<16)
                                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
                            else
                                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);
                    }
                    return str;
            }

            public static byte[] hexToBytes(String str) {
                    if (str==null) {
                            return null;
                    } else if (str.length() < 2) {
                            return null;
                    } else {
                            int len = str.length() / 2;
                            byte[] buffer = new byte[len];
                            for (int i=0; i<len; i++) {
                                    buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                            }
                            return buffer;
                    }
            }

            private static String padString(String source)
            {
              char paddingChar = ' ';
              int size = 16;
              int x = source.length() % size;
              int padLength = size - x;

              for (int i = 0; i < padLength; i++)
              {
                      source += paddingChar;
              }

              return source;
            }
    } 
```

**主要的：**

```
mcrypt = new MCrypt();
/* Encrypt */
String encrypted = MCrypt.bytesToHex( mcrypt.encrypt("Text to Encrypt") );
//Returns 9975e28df055c336a9b7090b03f88689
/* Decrypt */
String decrypted = new String( mcrypt.decrypt( encrypted ) );
//Returns "Text to Encrypt " 
```

问题：

`String encrypted = MCrypt.bytesToHex( mcrypt.encrypt("Text to Encrypt") );`
**加密返回：** 9975e28df055c336a9b7090b03f88689（不正确）
`String decrypted = new String( mcrypt.decrypt( encrypted ) );`
**解密返回：** “Text to Encrypt”（正确反映了加密的内容，Encrypt 后有一个“”）

我把它缩小到这一行：
`encrypted = cipher.doFinal(padString(text).getBytes());`

我尝试更改 padString 函数，`char paddingChar = 0;`而不是`char paddingChar = ' ';`没有运气......

正确加密后，“要加密的文本”应变为“cb4b4ca864213684070465b38783a6c8”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:59:40.370

AES 是一种块密码。它将一个 256 位块（=16 字节）加密为不同的 256 位块。您的纯文本“要加密的文本”是 15 个字符或 248 位。AES 不能按原样加密它，但必须添加一些填充以使其成为一个完整的块。

如果显式添加填充字符，则必须显式删除它。每个不同的填充字符都会对解密产生很大的影响。平均而言，更改输入明文块中的一位将更改输出密文块中 50% 的位。

您最简单的解决方案是在 Java 中使用填充工具中的 buit。您将密码指定为：`"AES/CBC/NoPadding"`。将其更改`"AES/CBC/PKCS5Padding"`为加密和解密。不要担心密文是什么样子，只需检查明文是否与解密后的密文匹配，一个字符一个字符。

一个常见的错误是使用`getBytes()`. 不要那样做，因为它容易出错。您应该准确指定您在字符和字节之间使用的映射。使用类似的东西：

```
byte[] plainBytes = plaintextString.getBytes("UTF-8"); 
```

和另一边类似。不要依赖系统默认值总是相同的。

# hash - 改进散列函数值的分布

> ID：12101755
> 
> 赞同：7
> 
> 时间：2012-08-24T00:19:01.493
> 
> 标签：hash, bigdata

假设我有大量的字符串（比如 100 亿个字符串，每个字符串约 50 个字符）。我想将字符串分配到正好 10 个桶中。每个桶应容纳大约 10% 的字符串。使用哈希函数 h() 我可以：

```
int bucket_for_s = h(s) % 10 
```

然而，这并不能保证分布的均匀性。假设我对所有字符串执行上述操作，发现 30% 进入存储桶 1，5% 进入存储桶 2，依此类推。我的问题是：

给定 h() 分布，有没有办法生成一个新的散列函数 h2() 来更均匀地分布字符串？

或者，有没有一个进程可以生成一系列h2()，h3()...这样1：每个hash函数都比前一个好2：我只需要生成合理数量的hash功能？

我还应该提到，不幸的是我不能简单地将输入分成 10 个部分，因为我的输入分布在多台机器上。我正在寻找一个确定性的解决方案，我可以分别应用于每台机器并获得相同的结果（所以最终“你好”将进入存储桶 x，无论它存储在哪台机器上）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T00:28:59.787

加密可靠的散列函数应该已经在散列输出的所有位上具有非常均匀的分布。

如果您使用的是 Java 之类的东西`hashCode()`，我认为它看起来像

> s[0]*31^(n-1) + s [1](http://code.google.com/p/cityhash/) *31^(n-2) + ... + s[n-1]

您可能会看到不太理想的哈希分布。

尝试使用 SHA-256 等加密哈希作为基础。

Google 的[City Hash](http://code.google.com/p/cityhash/)的分布不如[SHA-256](http://en.wikipedia.org/wiki/SHA-2)好，但速度要快得多。这可以以更少的计算成本提供足够的分布。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T14:20:13.723

链接散列函数或生成一系列散列函数将在计算上不必要地昂贵。您应该使用已经具有开箱即用所需属性的哈希函数。

**可能的候选人**

根据您的描述，散列函数应该是确定性的（您的“hello”示例） - 这适用于所有散列函数 - 并且应该生成均匀分布。

像[SHA-256](http://en.wikipedia.org/wiki/SHA-2)这样的加密散列应该满足您的要求，因为它输出完全不同的散列，即使对于像“hello”和“hallo”这样略有不同的输入也是如此。通过对哈希使用模 (%) 操作，您可以拥有任意数量的存储桶（当然不超过哈希的数量）。

但是，加密哈希函数是为安全和校验和而构建的，并且涉及一些复杂的计算。在您的情况下，您很可能不需要它们提供的强大的安全相关属性。

您可能更愿意寻找所谓的“非加密哈希函数”，它们具有宽松的属性并且更适合查找 - 因此它们针对速度进行了优化。Java 的[hashCode()](http://en.wikipedia.org/wiki/Java_hashCode%28%29)、[MurmurHash](http://en.wikipedia.org/wiki/MurmurHash)和已经提到的 CityHash（[Google 公告](http://google-opensource.blogspot.de/2011/04/introducing-cityhash.html)）可能是一个好的开始。

**散列函数的确定性与散列的均匀分布**

也就是说，由于散列函数对于输入是确定性的，因此某个输入作为“hello”的散列将始终相同，即使您多次调用散列函数也是如此。如果您的数据集包含一些具有大量精确重复的元素（例如，“a”和“the”通常是标记化文本的嫌疑人），那么无论您使用哪种哈希函数，这很容易导致存储桶大小不均匀。

假设您希望使用均匀分布的哈希来均匀分布工作负载，可以使用以下策略来克服这一点。将每个存储桶视为可由任何可用机器处理的工作包或作业。如果您的工作包比机器多（假设 10 台机器有 20 或 30 个包），只要您允许灵活调度，您就可以平均分配工作量。当机器 A 得到一个超大包装并需要一些时间来处理它时，机器 B 可以同时处理两个中小型包装，从而降低了超大包装对整体性能的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:53:22.627

如何解决它的方向简化为 2 个桶而不是 10 或 N。

假设你得到一个`h()`分配`p`给存储桶 1 和`q`存储桶 2 的分布，当然还有`p + q = 1`.

`h2()`现在，目标是使用以下参数找到这样的分布`p1, q1, p2, q2`：给定存储桶 1，它使用机会`p1, q1 (p1+q1=1)`，给定存储桶 2，它使用机会`p2, q2 (p2+q2=1)`：

```
 h()          h2()

                 / bucket1 p*p1 
      bucket1 p -
    /            \ bucket2 p*q1 
 x -
    \            / bucket1 q*p2 
      bucket2 q -
                 \ bucket2 q*q2 
```

我们的目标是使所有 2 个桶的机会均等：

```
p*q1 + q*p2 = 1/2  (total chances for bucket 1 after h2())
p*q2 + q*q2 = 1/2  (total chances for bucket 2 after h2()) 
```

和以前一样：

```
p1 + q1 = 1
p2 + q2 = 1 
```

`p1,q1,p2,q2`这是具有 4 个变量（分布参数）的 4 个方程的线性系统`h2()`。

注意：如果有 10 个桶，我们将`h()`拥有`p1, p2, ..., p10`where `p1 + p2 + ... + p10 = 1`。如果桶数> 2，则方程式少于未知数：对于每个分配，就像`p1`您获得`h2()`with的一个组件一样`p11+p12+...+p1_10=1`。因此，对于 10 个桶，有 100 个未知参数`h2()`和只有 20 个方程。这意味着`h2()`在求解剩余参数的方程之前，可以为 80 个参数赋予一些任意（但可行的）值。不漂亮，但仍然是一个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T12:00:24.283

哈希函数旨在产生均匀分布。如果您的数据不是这种情况，那么您的数据在某种程度上是该特定哈希函数的“部分”逆，当您选择其他数据时问题应该会消失。

鉴于这是一个理论问题，一种方法是：

# 美白彩色噪声

你可以玩`int bucket_for_s`

```
int bucket_for_s = put_in_bucket(s)

put_in_bucket:
    x = h(s) % 10 + 10*((h(s)/10)%10)
    if(0<=x<=2) return 0
    if(3<=x<=5) return 1
    if(6<=x<=9) return 2
    #The previous bucket_1 (30%) is now split into 3 buckets
    if(10<=x<=27) return 0
    #The previous bucket_2 (5%) is now enlarged
    #to incorporate more of the small old buckets (or parts of buckets)
    #This bucket is now bucket_4
    #... more of the same 
    if(83<=x<=99) return 9 
```

您可以将这个想法扩展另一个数字，直到您对“解决方案”感到满意为止

您可以从中取出逻辑`put_in_bucket`并将其投入`h2(s)`使用`h1(s)`。

这种方法用于为白噪声着色（或在本例中为白噪声），因此得名。

# scala - 在 Scala 中转换类型

> ID：12101757
> 
> 赞同：1
> 
> 时间：2012-08-24T00:19:31.127
> 
> 标签：scala, type-conversion

Scala中转换的最佳方法是什么：

选项[整数]

到：

选项[长]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T00:28:05.723

这正是`map`为了：

```
def convert(x: Option[Int]) = x map (_.toLong) 
```

像这样工作：

```
scala> convert(Some(1))
res0: Option[Long] = Some(1)

scala> convert(None)
res1: Option[Long] = None 
```

[`scala.Predef`](http://www.scala-lang.org/api/current/scala/Predef$.html)提供从`Int`to的隐式转换[`RichInt`](http://www.scala-lang.org/api/current/scala/runtime/RichInt.html)，这是该`toLong`方法的来源。

# regex - VB.NET 括号（方括号）之间的匹配字符串

> ID：12101766
> 
> 赞同：3
> 
> 时间：2012-08-24T00:20:48.973
> 
> 标签：regex, vb.net, match, brackets, parentheses

寻找匹配括号之间文本的模式。例如：`"(this is) a (test)"`应该输出

```
"this is"
"test" 
```

使用`Dim m As Match = Regex.Match(str, pattern, RegexOptions.Multiline)`

我已经搜索了 stackOverflow、Google 并尝试了 RegExr 上的示例，但似乎没有什么对我有用。

这些适用于 RegExr 但不适用于 VB.NET

`"\(([^)(]++|(?R))+\)"`- 错误嵌套量词

`"(?<=\<p\>)(.*?)(?=<\/p\>)"`- 量词什么都没有

其他人将返回： `"this is) a (test"`- 匹配远外括号

PS我也可以这样做

`[],"",{}`

对于在 vb.net 下查看的任何人来说，将它们全部放在一个地方会很好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T00:25:17.247

`\((.*?)\)`

您的正则表达式非常复杂！这将抓取两者之间的所有文本`()`并匹配内部文本。[在这里玩](http://regexr.com?31u61)。

# git - 从 git repo 中获取文件并 git 忽略它而不从文件系统中删除它

> ID：12101768
> 
> 赞同：5
> 
> 时间：2012-08-24T00:21:23.597
> 
> 标签：git

因此，一个配置文件以某种方式进入了我们不想要的 git 存储库。但我们确实希望在我们的个人系统上使用它。

当我们的团队成员进行拉取时，有没有办法将文件从存储库中取出，而不会导致文件从单个存储库中删除？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:46:57.897

您需要使用从存储库（不是工作树）中删除它

```
git rm --cached 
```

并告诉您的同事在他们第一次同步（拉取）他们的存储库时进行备份，因为 git 会删除它。
否则，即使文件存在于`.gitignore`，当文件作为存储库的一部分时，git 总是会检测到更改。

# jquery - GreaseMonkey jQuery 脚本只影响一个元素

> ID：12101770
> 
> 赞同：1
> 
> 时间：2012-08-24T00:21:45.487
> 
> 标签：jquery, greasemonkey

我的公司使用基于 Web 的产品，其 UI 要求我们针对某些用例单击 200 多个复选框。我们已请求“取消选中所有”功能，但显然不会。

我尝试编写一个简单的 GreaseMonkey 脚本来解决这个问题：

```
$('img').click(function() {
    $('input.HideQuestion:checked').each(function() {
        $(this).click();
    });
}); 
```

（在我用作点击目标的页面上有一张图片，我们的徽标）

问题是，每次我单击图像时，只有一个（约 270 个）复选框受到影响。每一次额外的点击都会影响下一个复选框。

我可以看到每次选中复选框时网站都会进行 Ajax 调用，但是该 Ajax 调用的响应主体是空的，所以我认为它们只是在更新服务器上的状态，而不是替换页面的一部分。

为什么只有一个复选框最终未被选中？

当我使用替代方法时

```
$(this).prop("checked", true); 
```

所有复选框在视觉上都未选中，但不会发生 Ajax 调用，并且服务器状态永远不会更新。此外，当我选中任何复选框时，所有复选框都会恢复到 GreaseMonkey 之前的状态。

**更新**

我尝试了@BrockAdams 建议的以下两种方法来拦截 Ajax 调用。两个*alert()*都没有被调用。

覆盖 XMLHttpRequest.prototype.open [https://stackoverflow.com/a/7778218/141172](https://stackoverflow.com/a/7778218/141172)

```
(function() {
    var proxied = window.XMLHttpRequest.prototype.open;
    window.XMLHttpRequest.prototype.open = function() {
        alert('A-ha! Open!');
        return proxied.apply(this, [].slice.call(arguments));
    };
})(); 
```

使用 .ajaxSuccess()
[https://stackoverflow.com/a/8252726/141172拦截目标页面的 AJAX](https://stackoverflow.com/a/8252726/141172)

```
// Also tried: unsafeWindow.$('body').ajaxSuccess (
$('body').ajaxSuccess ( 
        function (event, requestData)
        {
            alert('A-ha.  Success!');
        }
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:19:26.137

为此，我们*确实*需要查看目标页面的 JS 代码。但是，听起来目标页面正在等待 AJAX 响应，然后设置内部状态。它也可能用服务器维护的状态覆盖本地状态。

如果这是真的，那么您需要在每次取消选中后等待服务器响应，或者目标页面的 javascript 可能会提供更好的解决方案。

等待您提供更多详细信息（尤其是目标页面是否针对此特定 AJAX 使用 jQuery），这是一种应该有效的通用方法：

1.  用于`$('input.HideQuestion:checked').each()`填充[jQuery 队列](http://www.jqapi.com/#p=jQuery.queue)。

2.  `.ajaxSuccess()`如果可能，使用拦截目标页面的 AJAX 。或者通过覆盖`XMLHttpRequest.prototype.open`，如果不是。

3.  在每次成功的 AJAX 完成时，`dequeue`下一个项目（如果有）从步骤 1 开始保留在队列中。

    设置`dequeue`功能以取消选中其匹配的复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:50:27.607

试试这个：

```
$('img').click(function() {
    $('input[type="checkbox"]:checked').prop('checked', false)
}); 
```

# php - jquery AJAX调用后重定向请求

> ID：12101772
> 
> 赞同：0
> 
> 时间：2012-08-24T00:22:06.850
> 
> 标签：php, jquery, html, joomla

当有人单击按钮时，我希望它播放指定的视频（在移动设备上）。发生的情况是，当有人单击按钮时，我会在客户端进行 AJAX 调用，如下所示：

```
$(".play").click(function(){
    var camerahash = $(this).data('hash');
    var cameratype = $(this).data('type');
    function doAjax(){
        $.ajax({
            url: 'myfile.php',
            success: function(data) {
                if (data == 'Initializing...')
                {
                    setTimeout(doAjax, 2000);
                }
                else
                {
                    $('#quote p').html(data);

                }

            }
        });

    }
    doAjax();
}); 
```

这有这个 div 来向用户打印消息：

```
<div id="quote"><p> </p></div> 
```

服务器代码（myfile.php）：

```
 $r = new HttpRequest('http://localhost...', HttpRequest::METH_GET);
        $r->send();
        $code = $r->getResponseCode();

        switch($code) {
            case 200:
                echo "Starting Stream...    ";
                echo '<a href="http://blah.m3u8">Play Stream</a>';
                echo '<br>';
                break;
            case 450:
                echo "Oops! Camera not found...";
                echo '<br>';
                break;
            case 550:
                echo "Oops! An error occurred...";
                echo '<br>';
                break;
            case 250:
                echo "Initializing...";
                break;
            default:
                echo "Error 600";
                echo '<br>';
                break;  
        } 
```

这可行，但在按下按钮后，您会得到：`Starting stream... Play Stream`其中 Play Stream 是您必须单击才能播放视频的链接。我想要的是在单击按钮后立即开始播放视频（并且在服务器上验证了正确的状态代码）。

我根据这篇非常相似**[的帖子进行了尝试。](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)**

但我无法让 json 工作，所以我不能将 url 与重定向一起放置，例如：`window.location.href = data.redirect;`服务器端`redirect`的 url 在哪里。有什么想法我可以做的吗？

我应该注意到这是 Joomla，所以服务器代码不是 myfile.php，而是实际上是一个组件 url，但我相信这与这个问题无关。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:53:34.387

实际上，这最终变得非常简单。这篇旧**[帖子](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)**确实指出了正确的方向。

我在客户端拥有我需要的一切，所以我只需要使用重定向`window.location`：

```
window.location = 'http://myurl.com/playlist.m3u8'; 
```

因此，这完美地工作：

```
$(".play").click(function(){
var camerahash = $(this).data('hash');
var cameratype = $(this).data('type');
function doAjax(){
    $.ajax({
        url: 'myfile.php',
        success: function(data) {
            if (data == 'Initializing...')
            {
                setTimeout(doAjax, 2000);
            }
            else
            {
                $('#quote p').html(data);
                window.location = 'http://myurl.com/playlist.m3u8';

            }

        }
    });

}
doAjax();
}); 
```

# node.js - node-postgres 是否支持多个结果集

> ID：12101773
> 
> 赞同：5
> 
> 时间：2012-08-24T00:22:13.893
> 
> 标签：node.js, postgresql, node-postgres

我有一个返回多个结果集的 PostgresQL 函数。我可以毫无问题地在 .net 中提取这些结果集（所以我知道我的函数可以正常工作），但是我在使用 node-postgres 时遇到了麻烦。

结果对象返回一个包含 7 个项目的数组，该数组与返回的数据集的数量相匹配。

在 Node 中，7 行中的每一行都只包含一个字符串`<unnamed portal 1>`。

```
connection.query("BEGIN");
connection.query({text: "SELECT getoperationaldatasetmodel($1)", values : [clientid]}, function(err, results) {

  if (err) {
    connection.query("COMMIT");
    self.pool.release(connection);
    callback(err);
  }
  else {
    var opsDataset = null;
    var rows = results.rows;
    // this returns 7 rows but the rows do not contain data but rather the name of the dataset.
  } 
```

那么：node-postgres 是否支持多个结果集，如果支持，关于如何提取的任何建议？

编辑：如果其他人将来需要使用它，这是我与 node-postgres 一起使用的代码。

```
// must wrap in a transaction otherwise won't be able to see the multiple sets.
connection.query("BEGIN");
connection.query({text: "SELECT myfunction($1)", values : [clientid]}, function(err, results) {

  if (err) {

     // handle error here
     connection.query("COMMIT;");
  }
  else {

    connection.query('FETCH ALL FROM "<unnamed portal 1>"',  function(err, r1) {
        // r1.rows will contain the data for the first refcursor
    });
    connection.query('FETCH ALL FROM "<unnamed portal 2>"',  function(err, r2) {
        // r2.rows will contain the data for the second refcursor
    });

    // remember to handle the closure of the transaction

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:05:31.777

**更新**：有关如何获取和管理 refcursor 的说明，请参阅[这个出色的教程。](http://www.sqlines.com/postgresql/how-to/return_result_set_from_stored_procedure)

* * *

由于 node-postgres 无法识别您作为结果集句柄返回的 refcursor，因此它似乎不支持来自 PostgreSQL 的多个结果集。这很公平，因为 PostgreSQL 也不真正支持多个结果集，它们只是用 refcursors 模拟的。

您可以`FETCH`通过`refcursor`SQL 级游标命令[SQL 级游标命令](http://www.postgresql.org/docs/9.1/static/sql-fetch.html)，尽管它的文档很糟糕。您不需要使用[PL/PgSQL](http://www.postgresql.org/docs/current/static/plpgsql-cursors.html)游标处理来执行此操作。只是：

```
FETCH ALL FROM "<unnamed portal 1>"; 
```

注意双引号，这很重要。将从您的函数返回的 refcursor 名称替换为`<unnamed portal 1>`.

另请注意，除非创建了游标，否则创建引用光标的事务必须仍处于打开状态`WITH HOLD`。`HOLD`事务提交或回滚时关闭非游标。

例如，给定虚拟 refcursor-returning 函数：

```
CREATE OR REPLACE FUNCTION dummy_cursor_returning_fn() RETURNS SETOF refcursor AS $$
DECLARE
    curs1 refcursor;
    curs2 refcursor;
BEGIN
    OPEN curs1 FOR SELECT generate_series(1,4);
    OPEN curs2 FOR SELECT generate_series(5,8);
    RETURN NEXT curs1;
    RETURN NEXT curs2;
    RETURN;
END;
$$ LANGUAGE 'plpgsql'; 
```

...返回一组游标，您可以通过将门户名称传递给来获得结果`FETCH`，例如：

```
regress=# BEGIN;
BEGIN
regress=# SELECT dummy_cursor_returning_fn();
 dummy_cursor_returning_fn 
---------------------------
 <unnamed portal 7>
 <unnamed portal 8>
(2 rows)

regress=# FETCH ALL FROM "<unnamed portal 7>";
 generate_series 
-----------------
               1
               2
               3
               4
(4 rows)

regress=# FETCH ALL FROM "<unnamed portal 8>";
 generate_series 
-----------------
               5
               6
               7
               8
(4 rows)

regress=# 
```

# linux - 如何将带引号的字符串作为参数传递给 bash 中的函数？

> ID：12101774
> 
> 赞同：2
> 
> 时间：2012-08-24T00:22:33.403
> 
> 标签：linux, bash, shell, unix

我有一个简单的 bash 函数，其目标是运行作为字符串传入的命令，检查 $? 中的返回码，如果它返回非零，则打印第二个参数中指定的错误并退出。

这是功能：

```
function checkcommand()
{
    $1
    if [ "$?" -ne "0" ]; then
        echo "$2"
        exit 1
    fi
} 
```

该功能效果很好。以下是一些有效的示例：

```
checkcommand "git clone /home/git/framework.git $gitreponame" "git clone failed!
" 
```

当我想使用我的函数来验证提交是否成功时，问题就来了：

```
checkcommand "git commit -m\"remove migrations from release-$todaysrelease-pr
ep\"" "Commit for migrations removal from release-$todaysrelease-prep failed!" 
```

我尝试过（如图所示）baclslash 引用、单引号、单引号和双引号的各种组合等。

感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:33:46.530

将单词列表保留为单词列表；不要将它们引用成一个词，只是为了稍后扩展它：eval 是邪恶的。

典型的`die`函数是一个更简单、更易读的习语：

```
die() {
  echo "$*" >&2
  exit 1
}

git commit -m"remove migrations from release-$todaysrelease-prep" ||
  die "Commit for migrations removal from release-$todaysrelease-prep failed!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:22:40.970

尝试

```
function checkcommand()
{
    eval $1
    if [ "$?" -ne "0" ]; then
        echo "$2"
        exit 1
    fi
} 
```

就像在示例中一样，在命令中使用`\`before 。`"`

# azure - 删除一段时间内未触及的 Azure Blob 存储内容

> ID：12101780
> 
> 赞同：3
> 
> 时间：2012-08-24T00:23:36.780
> 
> 标签：azure, azure-blob-storage, lastaccesstime

我开发的应用程序基本上允许用户上传内容并存储在 Azure Blob Storage 中。

由于内容的性质是用户之间的快速共享，所以很多内容在一段时间后很快就变得不被触动了。但是对于某些内容可以反复使用。

为了阻止 blob 存储空间的空前增长，我打算编写一个工具，该工具基本上可以找到任何一段时间内未使用的 blob 并将它们从存储中删除。

如果它是标准文件系统，我可以使用“上次访问时间”来指示上次使用文件的时间。但是，我似乎找不到 blob 的类似属性来确定上次访问时间。

那么有没有人遇到过这种情况，实现这一目标的最佳方法是什么？还是我太在意这个？

非常感谢任何反馈或建议。

提前谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:58:01.017

我只能看到两种处理方式：

1.  在访问 blob 之前，他们必须访问服务以获取带有 SAS 签名的 blob URL。通过这种方式，您可以计算和监控哪些 blob 正在被访问。删除一段时间后访问权限低/无访问权限的旧 blob。这需要关闭公共访问，这样人们就不能绕过您的 SAS 签名。
2.  打开存储分析并监控 GET 请求。例如，您必须解析一个月的所有 GET 访问（$logs 每小时更新一次）并按资源分组。如果您将其自动化，那就不会太糟糕了。这将为您提供已访问的所有资源的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-18T10:47:32.607

[由于该功能处于预览](https://azure.microsoft.com/en-us/updates/azure-blob-access-time-tracking-and-access-timebased-lifecycle-management-preview/)状态，因此现在可以通过法国中部、加拿大东部和加拿大中部的 Lifecyle Management 获得此功能。

[![在此处输入图像描述](../Images/160194915497578239af71e6153983e9.png)](https://i.stack.imgur.com/IgpWd.png)

更多细节[在这里](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-lifecycle-management-concepts?tabs=azure-portal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T16:34:36.250

如果您使用的是 Blob 存储，那么遵循 Gaurav 建议的方法是您的最佳选择。有关入门的文档，请参见此处：

[https://azure.microsoft.com/en-us/documentation/articles/storage-analytics/](https://azure.microsoft.com/en-us/documentation/articles/storage-analytics/)。

请注意，我们的 .NET 客户端库确实包含对解析日志文件的支持 - 您可以在我们的客户端库单元测试中看到一个演示：

[https://github.com/Azure/azure-storage-net/search?utf8=%E2%9C%93&q=ListLogs](https://github.com/Azure/azure-storage-net/search?utf8=%E2%9C%93&q=ListLogs)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-01T09:09:34.420

现在，使用 Azure Blob 存储对生命周期管理的支持变得更加简单。

***编辑****：正如所指出的，Blob 存储生命周期管理仅允许基于上次修改日期而不是上次访问日期设置规则。*

[管理 Azure Blob 存储生命周期](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-lifecycle-management-concepts)

> Azure Blob 存储生命周期管理为 GPv2 和 Blob 存储帐户提供了丰富的、基于规则的策略。使用该策略将您的数据转换到适当的访问层或在数据生命周期结束时过期。
> 
> 生命周期管理策略允许您：
> 
> *   将 blob 转换到较冷的存储层（热到冷、热到归档或冷到归档）以优化性能和成本
> *   在生命周期结束时删除 blob
> *   定义要在存储帐户级别每天运行一次的规则 将规则应用于容器或 Blob 子集（使用前缀作为筛选器）

[![Azure 生命周期管理规则](../Images/8748e436d6cf07721f1a625407590532.png)](https://i.stack.imgur.com/OJCmz.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-24T01:37:12.590

您可以使用块和页面 blob Properties.LastModifiedUtc 来获取上次修改日期。对于页面或块 blob，您需要使用 GetBlockBlobReference 或 GetPageBlobReference API 以及 FetchAttributes() 来获取 blob 引用，然后您可以查找 LastModifiedUtc。

例如 Block blob 这里是代码片段：

```
CloudBlockBlob blockBlob = container_name.GetBlockBlobReference(uri.ToString());
blockBlob.FetchAttributes();
// blockBlob.Properties.LastModifiedUtc will return the last modified date for the blob. 
```

# javascript - Twitter Bootstrap 的分离器

> ID：12101781
> 
> 赞同：11
> 
> 时间：2012-08-24T00:23:50.193
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap

使用户能够动态更改 Twitter Bootstrap 样式页面的列宽的最佳方法是什么？

例如，在以下示例中添加垂直分隔器/分割器？

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span6 resizeMe">Left</div>
        <div class="span6 resizeMe">Right</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:10:14.167

如果您不介意它不是动画或动态可调的，这是我一直在使用 Bootstrap 进行的与此类似的工作（我使用的是 2.1.0，但这应该适用于任何 2.x 版本）：

设置按钮组：

```
<div class="btn-group">
        <a href="##" rel="tooltip" title="Make the Directories side dominant" class="btn btn-mini" data-action="dirDom" data-placement="left"><i class="icon icon-indent-left"></i></a>
        <a href="##" rel="tooltip" title="Make both sides equal" class="btn btn-mini" data-placement="left" data-action="equality"><i class="icon icon-resize-horizontal"></i></a>
        <a href="##" rel="tooltip" title="Make the Documents side dominant" class="btn btn-mini" data-placement="left" data-action="fileDom"><i class="icon icon-indent-right"></i></a>
        </div> 
```

现在，这是 JQuery 的魔力：

```
$(function(){
$('a[data-action="dirDom"]').click(function (){
    $("#dirList").css('display','inline').removeAttr('class').addClass("span12");
    $("#fileList").removeAttr('class').css("display","none");

});
$('a[data-action="equality"]').click(function (){
    $("#dirList").css('display','inline').removeAttr('class').addClass("span6");
    $("#fileList").css('display','inline').removeAttr('class').addClass("span6");
});
$('a[data-action="fileDom"]').click(function (){
    $("#fileList").css('display','inline').removeAttr('class').addClass("span12");
    $("#dirList").removeAttr('class').css("display","none");
}); 
```

});

我一直在尝试对其进行动画处理，但运气不佳，但这可以使一个尺寸完全可见，然后左侧完全可见，最后回到相同的尺寸。我确信可以编写更好的 JQuery，但是嘿，这是初稿；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:25:00.593

我不相信目前有一种引导方式，但是您可以将一个类添加到您的一个放置`border-left:1px solid #EEE`或`border-right:1px solid #EEE`. 此解决方案的唯一问题是您的 12 组合跨度现在将比正常 span12 宽度多 1px，并且它将其中一个 div 推到下一行。如果可以这样做，您可以通过使第二个 div 仅 span5 来解决此问题，因此您的总数为 span11 + 1px。

如果 bootstrap 有一个不会干扰正常网格系统的类，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-19T01:55:52.063

如果要创建可以通过拖动来调整大小的左侧菜单栏，jsplitter 可能是一个不错的选择 - [https://jsplitter.dilif.com/p/jsplitter/](https://jsplitter.dilif.com/p/jsplitter/)

实时示例 - [https://jsplitter.dilif.com/p/jsplitter/doc/3/3/working-examples/](https://jsplitter.dilif.com/p/jsplitter/doc/3/3/working-examples/)

它有两个选择 -

*   第一个适用于放置在弹性框中的 div
*   第二个适用于将左侧定位为“位置：固定；宽度：X；”的 div 右边一个为“margin-left：X”。这是在大多数网站中添加侧边菜单的方式。

# ruby-on-rails - 如何在rails 3.2.8应用程序的rspec控制器测试中传递变量的值？

> ID：12101784
> 
> 赞同：0
> 
> 时间：2012-08-24T00:24:13.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec2

这是在 rspec 控制器测试中导致模板错误的部分形式：

```
<%= f.label :expense_for, '栏目：'%>
<%= f.select :expense_for, @expense_for.map { |expense| [expense, expense] }, {:include_blank => true, :selected => @expense.expense_for } %> 
```

我们在费用控制器测试中使用 render_views。由于 @expense_for 在创建测试中为零，因此 .map 会导致错误：

```
[31mActionView::Template::Error:←[0m
       ←[31mundefined method `map' for nil:NilClass 
```

导致上述错误的 rspec 代码是：

```
get 'create', :expense => e, :expense_for => ['a','b'] 
```

在费用控制器中，@expense_for 在 new 中定义为：

```
 def new
    if has_create_right?
      @expense = Expense.new(params[:expense], :as => :role_new)
      if @expense.expense_type == 'production'
        @expense_for = return_expense_for_production
      elsif @expense.expense_type == 'overhead'
        @expense_for = return_expense_for_overhead
      else
        @expense_for = []
      end
    end 
```

@expense_for 充满了 ajax 调用。

如何以部分形式将值传递给 @expense_for 以进行 rspec 测试？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:41:45.170

如果`@expense_for`在您的测试中为 nil，`has_create_right?`则为假，因此`@expense_for`永远不会被设置。尝试在操作的开头设置`@expense_for`to ，而不是在 else 子句中。`[]`

# c - populate 2d array with getdelim, works inside loop but not ouside

> ID：12101791
> 
> 赞同：0
> 
> 时间：2012-08-24T00:25:24.833
> 
> 标签：c

So I have a snippet of code that reads a text file with 10 columns and 5 rows of number/letter pairs. I populate and read a 2d array e.g.

```
for (i = 0; i < 5; i++) {
    for (j = 0; j < 10; j++) {

        getdelim(&line, &len, ' ', fp);
        grid[i][j] = line;
        printf("%s ", grid[i][j]);

    }   

    printf("\n");
} 
```

and the output is as expected as:

12 9F H2 FQ 0M CH RD XC W8 4D

VT C8 TM ZQ 0E PQ D1 2J YD KK

XY P5 AW 4Y 41 05 6E HW F2 QQ

YF R5 JV 4N 7F 4J V1 9K MM 0M

CT RF RM WV C6 V9 P6 TW WX MX

But if I re-read the elements of the array in another for loop:

```
for (i = 0; i < 5; i++) {
    for (j = 0; j < 10; j++) {

        printf("%s ", grid[i][j]);

    }   

    printf("\n");
} 
```

I get the very last element in the array for every element in the array e.g.

MX MX MX MX MX MX MX MX MX MX
MX MX MX MX MX MX MX MX MX MX
MX MX MX MX MX MX MX MX MX MX
MX MX MX MX MX MX MX MX MX MX
MX MX MX MX MX MX MX MX MX MX

What gives?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T00:35:38.907

You need to provide the declarations for your array `grid` and `line` buffer.

Anyway, most likely you are referring to the same `line` buffer from each element of your array. When you "populate" your array in the first cycle, you only print the most recently initialized element, which creates an illusion of everything "working" properly. But when you actually try to re-verify the content of the array, the illusion falls apart.

Try printing some previously initialized elements in your first cycle, and you will see that your first cycle does not work either: all of the previously initialized array elements will seem to have the same value and that value will change at each iteration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:37:51.983

i'd say line is of type char* and every time you're writing to its address using getdelim, you're changing the value and not the reference ... in effect, all grid[i][j] are pointing to the same string, hence the resultant behavior

try malloc'ing and strcpy'ing to each grid[i][j] in the loop

```
grid[i][j] = (char*)malloc(3);
strcpy(grid[i][j], line); 
```

# ruby-on-rails - 使用声明式授权强制重新加载授权 rules.rb

> ID：12101793
> 
> 赞同：1
> 
> 时间：2012-08-24T00:25:29.307
> 
> 标签：ruby-on-rails, declarative-authorization

我正在尝试使用声明式授权进行动态授权，因此我将角色和权限存储在数据库中。

我唯一的问题是授权规则只加载一次。

如何强制声明性授权从控制器操作内部重新加载规则，以便当我为角色设置新权限时，它可以按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:51:13.690

对于那些尝试与我尝试过的相同的人，我不得不稍微改变一下宝石。

检查此提交以查看我做了什么：

[https://github.com/bishma-stornelli/declarative_authorization/commit/b508c3c008ed4b72e9fe2ec7802bfafbc6c4590b](https://github.com/bishma-stornelli/declarative_authorization/commit/b508c3c008ed4b72e9fe2ec7802bfafbc6c4590b)

现在我可以通过调用这个方法来强制重新加载授权规则：

```
Authorization::Engine.force_reload 
```

它工作正常。

# java - java的测试套件-它是什么？

> ID：12101796
> 
> 赞同：0
> 
> 时间：2012-08-24T00:26:50.153
> 
> 标签：java, unit-testing, testing

我必须连同测试服一起提交我的项目。我会很感激有人用例子解释它是什么，是否有其他一些构建测试的工具或者它是我自己编写的场景？我以前从未写过它，所以请任何信息都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:56:38.750

Lukasz Siwinski 说：

> “测试套件只不过是一组 UnitTest。”

这并不完全准确。

“测试套件”可以只是一组单元测试。但它也可以包括更大规模的测试（系统测试或集成测试），这些测试旨在测试系统的更大规模行为。

[系统测试](http://en.wikipedia.org/wiki/System_testing)的 Wikipedia 页面提供了可以在系统级别测试的*各种*事物的概述。

* * *

在您的情况下，单元测试可能足以满足项目要求。但我建议你与项目主管澄清这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:53:07.687

测试套件不过是一组 UnitTest。

假设您有几个测试：UserDAOTest、BooksDAOTest、BorrowsDAOTest 等......

```
public class DAOSuite{
    Class[] testClasses = {
        UserDAOTest.class,
        BooksDAOTest.class,
        BorrowsDAOTest.class
    };
    TestSuite = new TestSuite(testClasses);
} 
```

或者，您也可以使用注释样式进行上述操作。然后以与运行 jUnit 测试相同的方式运行测试套件。

附加信息 [1]

[1] [http://www.junit.org/apidocs/junit/framework/TestSuite.html](http://www.junit.org/apidocs/junit/framework/TestSuite.html)

# ios - 在 Retina 显示屏上加载许多具有透明度的大型 PNG

> ID：12101800
> 
> 赞同：1
> 
> 时间：2012-08-24T00:27:30.263
> 
> 标签：ios, ipad, png, transparency

我正在创建最多五个大型 UIView；UIViews 是屏幕的整个高度，宽度是屏幕的许多倍。每一层都以不同的速度滚动，但它们都包含一个平铺的 UIImageView 集合，这些 UIImageView 被回收。

我一直在寻找每个视图的哪个部分在屏幕上，并将可见图块异步加载到 UIImages 中，然后将图像设置回主线程上的 UIImageView 中。（为此使用 NSOperation。）

我在 iPad 2 上达到了超级流畅的地步。然后我拿到了 iPad 3 并将其插入，性能很糟糕。在我滚动的整个过程中，我都会遇到轻微的打嗝或完全停止的延迟。

我认为这是由于在视网膜显示器上进行了大量的 alpha 混合造成的。

我尝试了 CATiledLayer，它修复了滚动运动打嗝，但瓷砖加载速度非常慢。（每次完全加载新图像时，我都会调用 setNeedsDisplay，但速度仍然很慢。）

我只发现了三个似乎有助于提高性能的变化：

1.  我的 UIViews 曾经被切割成一行，有很多列：每列宽 128 点，按设备的全高计算。我将图像分成两行：顶行 128x512 点，底行 128x256 点。（因为我总是横向和仅 iPad。）

2.  确保只有完全透明像素的图块为零，因此它们不会有助于混合。

3.  减少了分层 UIView 的数量。还减小了滚动视图的大小，换句话说，仅将图块加载到屏幕的顶部 2/3。

第 2 点和第 3 点有效，因为它们减少了应用程序必须执行混合操作的像素总数。

但问题是，它们是妥协。当它在 iPad2 上运行得如此流畅时，我不想不得不像这样妥协。

所以我的问题是：我能做些什么来提高图像的混合性能吗？为此，我想留在 OpenGL 之外，如果我去 OpenGL，那将是一个完整的重写，并且代码在 UIKit 中的组合速度更快，而且它与 UIScrollView 一起玩得更好——因为滚动是一种噱头有了这个，保持 UIScrollView 的本机行为会很棒。

所以我希望有一些我不知道的东西可以让 PNG 透明度更快地神奇地混合，或者有一些其他方法可以优化 iPad 3 上的过程。谢谢！

# nhibernate - NHibernate 将如何更新父子表

> ID：12101805
> 
> 赞同：0
> 
> 时间：2012-08-24T00:28:06.260
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在使用 NHibernate 开发 MVC 应用程序。我有一个包含客户信息和订单对象的屏幕。正如猜测的那样，客户实体具有 List 属性，而 Order 实体具有客户属性。

我通过将订单对象存储在会话中来附加它们。用户可以添加/删除订单，因此我已将修改后的订单附加到客户对象。但是当我看到 sql 语句时，它正在插入新订单，这是预期的行为，但对于已删除的订单，它会使用 customer_id = null 进行更新，而不是完全删除它们？

谢谢， Sundeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:06:54.317

您正在寻找[级联选项](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)。
您的订单被删除的原因是您保留了一个空集合，因此 nHibernate 假定该集合是故意清空的，并通过删除关联来更新 Db 中的该集合项。

您最可能想要的行为是`AllDeleteOrphan`删除从您的客户中删除的订单。

# django - {% trans "string" %} 不适用于模板，但 {% trans variable %} 可以

> ID：12101811
> 
> 赞同：9
> 
> 时间：2012-08-24T00:29:03.437
> 
> 标签：django, internationalization, django-templates

我对 Django 很陌生，我正在使用 i18n 开发一个项目，问题是我已经 `.manage.py makemessages / compilemessages` 在我的模板文件上翻译了一些变量，但是当我使用时，我对所有语言都 `{% trans "my string" %}` 得到了相同的结果。`"my string"`

我究竟做错了什么？这是*views.py*和*idioma.html的代码*

* * *

**视图.py：**

*#这里有一些代码...*

```
def idioma(request):
    output = _("Mensaje en espanol")
    return render_to_response( 'idioma/idioma.html', { 'idioma' : output }, context_instance = RequestContext(request) ) 
```

* * *

**成语.html**

```
{% load i18n %}

< form action="/i18n/setlang/" method="post">

        {% csrf_token %}

        < input name="next" type="hidden" value="{{ redirect_to }}" />

        < select name="language" >

        {% get_language_info_list for LANGUAGES as languages %}

        {% for language in languages %}

            < option value="{{ language.code }}">
                {{ language.name_local }} ({{ language.code }})
            < /option>
        {% endfor %}

        </select>

        < input type="submit" value="Go" />

    < /form>

    La cadena es: {% trans idioma  %}

    {% trans "carro" %} 
```

* * *

应用程序从 locale/path/to/language/ 中的 .po 和 .mo 文件转换 idioma 变量

但它不会翻译 {% trans "carro" %} 字符串。

这是怎么回事？

谢谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-31T22:51:52.803

您是否手动翻译了 .po 中的字符串？

`makemessages`只需将“carro”添加到 .po 中，在 .po 文件中生成类似的内容

```
#: idioma.html:45
msgid "carro"
msgstr "" 
```

然后你必须编辑 .po**手动**添加该字符串的翻译，以这种方式：

```
#: idioma.html:45
msgid "carro"
msgstr "car" 
```

然后，当您完成所有 .po 字符串的翻译后，您可以运行`compilemessages`：它会编译您的翻译。

**注意：**永远记得寻找`,fuzzy`翻译。如果您的 .po 中有类似的内容

```
#: idioma.html:45
#, fuzzy
msgid "carro"
msgstr "car" 
```

这意味着 django 出于某种原因试图自行翻译字符串*（这通常发生在您已经在一段不再使用的代码中使用该字符串时）*。

您必须检查翻译并删除该`#, fuzzy`行：任何标记为的`#, fuzzy`翻译都不会在您的页面中翻译。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-05T18:39:00.933

我遇到了类似的问题，并且能够通过`LOCALE_PATHS`在我的设置文件中进行设置来解决它。`LOCALE_PATHS`是 django 查找 .mo 和 .po 文件的目录路径元组。这是一个例子：

```
# settings.py
LOCALE_PATHS = (
    '/path/to/your/project/locale',
) 
```

阅读[django 的官方文档以`LOCALE_PATHS`](https://docs.djangoproject.com/en/dev/ref/settings/#locale-paths)获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-11T12:47:12.897

我整晚跟踪代码，发现了一些线索。主要在 trans_real.py 和 gettext.py 中。您可以在“翻译”函数中放置一个断点。

1.  翻译代码仅在应用启动时执行一次。所以你需要重新加载uwsgi来加载新版本。
2.  po文件从不使用。gettext.py 仅使用“mo”文件。（在我的笔记本电脑中）。所以你必须在更改后编译消息。
3.  语言代码中的“-”将转换为语言环境路径中的“_”。例如“zh-CN”将转换为“zh_CN”。这就是找不到翻译文件的原因。我认为如果只使用两个字符作为语言代码会更好。在Linux系统中要考虑区分大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T06:12:01.077

在某些情况下`{% trans "your string " %}`不起作用。

我建议您使用`blocktrans`字符串而不是 trans。

如何使用块传输：

```
{% blocktrans %} your string {% endblocktrans %} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-23T21:30:12.857

我有同样的问题。[我在另一个类似问题下](https://stackoverflow.com/questions/12826101/django-translation-template-trans-something/38546533#38546533#22695869)的这个链接中详细解释了它。

简而言之，我的问题已通过使用以下代码重新加载服务器来解决：

```
sudo /etc/init.d/uwsgi reload 
```

现在，每次我更改短语并编译语言文件后，我也会重新加载服务器以查看更改。我希望这能解决一些人的问题。

# vba - 仅使用 word 宏更改三列表

> ID：12101814
> 
> 赞同：3
> 
> 时间：2012-08-24T00:29:35.067
> 
> 标签：vba, ms-word, word-2010

以下是我目前用于将大型文档重新格式化为我们公司品牌的宏的摘录。

```
 Selection.Tables(1).Select
    Selection.Columns(1).Width = CentimetersToPoints(5.46)
    Selection.Columns(2).Width = CentimetersToPoints(10.92)
    Selection.Rows.HeightRule = wdRowHeightAtLeast
    Selection.Rows.Height = CentimetersToPoints(0.8) 
```

我得到的文档现在已经包含三个列表和两个列表，我希望这些列的所有列都是 5.46 宽，而我需要两个列表保持我上面指定的宽度以保持所有格式看起来都不错。

我想输入一个“如果，那么”类型的语句，说明如果表有三列，则执行此操作，如果表有两列，则执行此操作，但我不知道如何从 2 个列表中识别 3 个列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T00:58:40.780

编辑：更新以处理列宽不均匀的行。

```
Dim tbl As Table
Dim rw As Row

Set tbl = ActiveDocument.Tables(1)

For Each rw In tbl.Rows
With rw

    .Cells(1).Width = CentimetersToPoints(5.46)

    If .Cells.Count = 2 Then
        .Cells(2).Width = CentimetersToPoints(10.92)
    ElseIf .Cells.Count = 3 Then
        .Cells(2).Width = CentimetersToPoints(5.46)
        .Cells(3).Width = CentimetersToPoints(5.46)
    Else
        'what do do if not 2 or 3?
    End If

    .HeightRule = wdRowHeightAtLeast
    .Height = CentimetersToPoints(0.8)
End With
Next rw 
```

# sql - SQL 查询帮助：可能涉及 Group By

> ID：12101817
> 
> 赞同：2
> 
> 时间：2012-08-24T00:30:34.507
> 
> 标签：sql, join, group-by

我的软件在几个数据库上运行，所以我需要通用（值得注意的是，我认为“distinct on”解决方案可能有效，但这不是标准的）。

假设我有两个表定义为：

```
Table A: id, time (pk: id)
Table B: id(fk), key, value (pk: id, key) 
```

其中表 B 的 id 是表 A 的外键，主键是指定的。

我需要所请求密钥的最新（及时）值。所以，假设我有如下数据：

```
id | key | value
1  | A   | v1
1  | B   | v2
1  | C   | v3
2  | A   | v4
2  | C   | v5
3  | B   | v6
3  | D   | v7 
```

如果 id 的时间在增加，并且我想要键 A 和 C 的值，我希望得到如下结果：

```
key | value
A   | v4
C   | v5 
```

或者对于键 D 和 A：

```
key | value
D   | v7
A   | v4 
```

理想情况下，对于 n 个关键请求，我只会返回 n 行。单个查询可以实现这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:42:37.917

这是它与 SQL Server 2008 R2 一起使用的情况：

**架构**

```
CREATE TABLE B (
   ind integer,
   [key] varchar(8),
   value varchar(16)
);

INSERT INTO B VALUES (1, 'A', 'v1');
INSERT INTO B VALUES (1, 'B', 'v2');
INSERT INTO B VALUES (1, 'C', 'v3');
INSERT INTO B VALUES (2, 'A', 'v4');
INSERT INTO B VALUES (2, 'C', 'v5');
INSERT INTO B VALUES (3, 'B', 'v6');
INSERT INTO B VALUES (3, 'D', 'v7');
INSERT INTO B VALUES (3, 'A', 'v12');
INSERT INTO B VALUES (3, 'C', 'v17');
INSERT INTO B VALUES (3, 'C', 'v101'); 
```

**询问**

```
select [key], max(CAST(SUBSTRING(value, 2, LEN(value)) as INT)) from B
where [key] in ('A', 'C')
group by [key] 
```

如果要保留 v 作为前缀，请执行以下操作：

```
select [key], 'v' + CAST(max(CAST(SUBSTRING(value, 2, LEN(value)) as INT)) as VARCHAR) as Value
from B
where [key] in ('A', 'C')
group by [key] 
```

**输出**

```
| KEY |    VALUE |
------------------
|   A |      v12 |
|   C |     v101 | 
```

要玩的 SQL Fiddle：[http ://sqlfiddle.com/#!3/9de72/1](http://sqlfiddle.com/#!3/9de72/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:15:01.140

我假设没有 ID 值将具有相同的 TIME 值。

我相信以下内容与在尽可能多的数据库上运行的选项一样通用。但是平台灵活性的折衷并没有达到最佳性能。

具有别名 t 的子查询标识每个键可用的最新时间。

```
select a.id,
       a.time,
       b.key,
       b.value
  from tableB as b
  inner join tableA as a
    on a.id=b.id
  inner join (
      select b2.key,
             max(a2.time) time
        from tableB as b2
       inner join tableA as a2 on a2.id=b2.id
       group by b2.key
  ) as t on a.time = t.time and b.key = t.key
  where b.key in ('D','A') 
```

WHERE 子句可以移动到子查询中，它在具有原始优化器的数据库上可能会稍微好一些。但是将 WHERE 子句放在外部查询中可以更容易维护，并且还可以在没有 WHERE 子句的情况下创建视图。然后可以将 WHERE 子句添加到视图中的选择中。

使用 ROW_NUMBER() 的查询会更有效，甚至更好的是使用 Oracle 的 KEEP LAST 之类的查询。但是这些功能会使查询对某些平台更具限制性。

# php - 是否有任何通知服务可以用于我的网站？

> ID：12101818
> 
> 赞同：0
> 
> 时间：2012-08-24T00:30:38.830
> 
> 标签：php, email, notifications

我正在构建一个允许用户定义的通知/警报的站点。我让他们根据用户提供的电子邮件地址进行设置，但是他们停止为 gmail 帐户工作。显然，我的 IP 地址被谷歌列入黑名单。我已经向他们发送了将我从他们使用的黑名单中删除的请求，但他们没有回复。我是一个多月前寄的。我已经阅读了他们的“不被列入黑名单的方法”文档，但这并没有真正帮助我。我已经向谷歌解释说，通知/警报只有在用户请求时才会发出。

我的问题是我可以使用任何服务来解决这个问题（这意味着我可以通过服务发送通知并将其转发到正确的电子邮件地址）？基本上，我希望能够向任何电子邮件提供商发送电子邮件，这样我就可以在计算机上查看它或在手机上收到电子邮件警报。

最后，我的 ubuntu 服务器上没有邮件设置。我使用 php 发送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:00:22.353

如果您以这种方式发送大量电子邮件，很容易被标记为垃圾邮件，尤其是当您在共享主机上时。

从 PHP`mail()`函数发送电子邮件对于您可以在垃圾邮件文件夹中查找的一些测试电子邮件来说是正常的，但如果您需要任何形式的严肃交付，最好将其转包给专业公司。

一些最知名的包括[Postmarkapp](http://postmarkapp.com)、[Mailgun](http://mailgun.net)和[Mailjet](http://mailjet.com)以及已经提到的那些（[Amazon SES](http://aws.amazon.com/ses/)和[Sendgrid](http://sendgrid.com/)）

相信我，这些人会确保他们不会被列入黑名单，并拥有资源和联系人将他们的服务器从黑名单中删除（如果发生）。

**（免责声明：我为 mailjet 工作）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:38:45.860

这个问题没有*答案*。

尽管如此，我还是使用并推荐[SendGrid](http://sendgrid.com)。他们有一个可靠的免费层和一个优秀的、有据可查的 PHP 库。使用这样的服务可能会减轻您描述的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:40:14.243

有许多公司将提供托管 SMTP 服务。比较流行的两个是

*   [发送网格](http://sendgrid.com/)
*   [亚马逊简单电子邮件服务](http://aws.amazon.com/ses/)

远离电子邮件黑名单是一个非常复杂的话题。要记住的事情，如果你自己做，包括：

*   始终从相同的 IP 或 IP 范围发送
*   确保没有*其他人*从您的 IP 发送（共享主机的问题）
*   确保您有[PTR 记录](http://www.spamstopshere.com/blog/2008/05/13/dns-problems-affecting-e-mail-delivery-ptr-records/)
*   仅发送请求的电子邮件
*   提供有效的选择退出
*   使用有意义的主题行，以便人们*记住*他们要求的电子邮件
*   不要一次向单个域发送太多电子邮件（某些速率会限制您）

如果您对可交付性非常认真并且预算充足

*   使用[返回路径](http://www.returnpath.net/)

# c# - 当系统进入睡眠/挂起 C# 时结束线程

> ID：12101820
> 
> 赞同：3
> 
> 时间：2012-08-24T00:31:15.963
> 
> 标签：c#, multithreading, event-handling

我有线程在做一些工作。当工作正在进行时，如果用户让系统进入睡眠/挂起状态，我希望线程自行结束。我现在面临的问题是，当我从睡眠中恢复时，线程还没有结束，我的应用程序挂起。我是否必须让事件处理程序来处理这个问题，如果是的话怎么办？

我的线程是在 UI(C#) 中创建的。睡眠/挂起在 C++ 代码中处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:52:28.173

您可以使用[Windows 电源管理事件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373223%28v=vs.85%29.aspx)来检测系统何时进入睡眠状态并做出反应。

要使用它们，您需要覆盖 WndProc 并监听 WM_POWERBROADCAST 事件

```
protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        case WM_POWERBROADCAST:
        ...
    }
} 
```

这里有一个很好的概述和详细的例子：

[http://www.codeproject.com/Articles/192084/Responding-to-Windows-power-management-events-stan](http://www.codeproject.com/Articles/192084/Responding-to-Windows-power-management-events-stan)

# django - 带有 SSL 的 Django 运行服务器

> ID：12101825
> 
> 赞同：0
> 
> 时间：2012-08-24T00:31:58.520
> 
> 标签：django, ssl, stunnel

我一直在尝试按照此处列出的 stunnel 使用 django runserver 和 ssl 的说明进行操作：

[如何像使用“runserver”的非 https 连接一样轻松地测试与 Django 的 https 连接？](https://stackoverflow.com/questions/8023126/how-can-i-test-https-connections-with-django-as-easily-as-i-can-non-https-connec)

但我遇到了一些麻烦。我有 stunnel 和两个运行服务器，每个都在虚拟环境中运行。每个人似乎都在自己工作。

stunnel.pem 看起来像这样：

```
-----BEGIN RSA PRIVATE KEY-----
(random)
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
(random)
-----END CERTIFICATE----- 
```

dev_https 看起来像这样：

```
pid=

cert = stunnel/stunnel.pem
sslVersion = SSLv3
foreground = yes
output = stunnel.log

[https]
accept=8443
connect=8001
TIMEOUTclose=1 
```

当我尝试访问

```
https://127.0.0.1:8443/ 
```

这是发生的事情：

Stunnel，执行：

```
stunnel4 dev_https 
```

显示了这一点：

```
2012.08.23 20:20:58 LOG5[3818:140280034400000]: Service https accepted connection from 127.0.0.1:44302
2012.08.23 20:20:58 LOG5[3818:140280034400000]: connect_blocking: connected 127.0.0.1:8001
2012.08.23 20:20:58 LOG5[3818:140280034400000]: Service https connected remote server from 127.0.0.1:34622
2012.08.23 20:20:58 LOG5[3818:140280034400000]: Connection closed: 187 bytes sent to SSL, 422 bytes sent to socket 
```

服务器执行：

```
python2.7 manage.py runserver 
```

显示：

```
(nothing) 
```

服务器执行：

```
HTTPS=1 python2.7 managpy runserver 8001 
```

显示：

```
[23/Aug/2012 19:20:58] "GET / HTTP/1.1" 301 0 
```

最后，浏览器中的网页请求显示标准 chrome 错误：

```
This webpage is not available
The server at 127.0.0.1 can't be found, because the DNS lookup failed. 
```

我会很感激任何关于我可以改变什么或我做错了什么的建议。谢谢您的帮助！

**更新** 我现在收到此错误消息：

```
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 52878)  
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 638, in __init__
self.handle()
   File "/usr/lib/python2.7/wsgiref/simple_server.py", line 116, in handle
self.raw_requestline = self.rfile.readline()
  File "/usr/lib/python2.7/socket.py", line 447, in readline
data = self._sock.recv(self._rbufsize)
error: [Errno 104] Connection reset by peer
 ---------------------------------------- 
```

# iphone - 在 ios 5 应用程序中显示我的 Twitter 关注者列表？

> ID：12101826
> 
> 赞同：1
> 
> 时间：2012-08-24T00:32:07.000
> 
> 标签：iphone, ios, ios5, twitter

我正在构建一个基于 twitter 的演示应用程序。我已经建立了一个 twitter 登录，但我希望它也显示我关注的人。有什么方法可以获取我关注的人员列表并显示它？非常感谢提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:46:04.383

您将在以下位置找到您需要的内容：

dev.twitter.com/docs

[http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWRequestClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010942](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWRequestClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010942)

WWDC 2011 第 124 节

# android - 如何在 Android 中以编程方式显示 wifi 状态？

> ID：12101830
> 
> 赞同：0
> 
> 时间：2012-08-24T00:33:06.163
> 
> 标签：android, android-wifi

我只是想编写一个简单的 Android 应用程序，以编程方式显示 WiFi 是启用还是禁用。我无法让它打印 Wifi 状态。我很确定我的代码 99% 正确，但这并不比 0% 正确。

我的代码如下。

```
package com.jasonhsu.wifitest;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

    private LinearLayout ShowWifiStatus;
    TextView TextWifiStatus;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ShowWifiStatus = new LinearLayout (this);
        TextView TextWifiStatus = new TextView (this);
        TextWifiStatus.setText("Sorry, your Wifi status program isn't working.");
        this.registerReceiver(this.WifiStateChangedReceiver, new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION));
        ShowWifiStatus.addView(TextWifiStatus);
        setContentView(ShowWifiStatus);
    }

    private BroadcastReceiver WifiStateChangedReceiver
    = new BroadcastReceiver(){

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            int extraWifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE , 
                    WifiManager.WIFI_STATE_UNKNOWN);

            switch(extraWifiState){
            case WifiManager.WIFI_STATE_DISABLED:
                TextWifiStatus.setText("WIFI STATE DISABLED");
                break;
            case WifiManager.WIFI_STATE_DISABLING:
                TextWifiStatus.setText("WIFI STATE DISABLING");
                break;
            case WifiManager.WIFI_STATE_ENABLED:
                TextWifiStatus.setText("WIFI STATE ENABLED");
                break;
            case WifiManager.WIFI_STATE_ENABLING:
                TextWifiStatus.setText("WIFI STATE ENABLING");
                break;
            case WifiManager.WIFI_STATE_UNKNOWN:
                TextWifiStatus.setText("WIFI STATE UNKNOWN");
                break;
            }

        }};

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:31:03.313

从以下语句中删除第一个“TextView”，以便将新的 TextView 对象分配给成员变量 TextWifiStatus 而不是同名的局部变量。

```
TextView TextWifiStatus = new TextView (this); 
```

问候

陈子腾

# asp.net-mvc-4 - 对于 MVC 4，Microsoft.AspNet.Mvc 和 System.Web.Mvc 有什么区别？

> ID：12101831
> 
> 赞同：8
> 
> 时间：2012-08-24T00:33:10.423
> 
> 标签：asp.net-mvc-4, nuget-package

我有自己的服务器，正在考虑将我的一个解决方案升级到 ASP.NET MVC 4，然后再升级其余的（3+）。

作为其中的一部分，我下载[了 ASP.NET MVC 4 的独立安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=30683)并在我的 Server 2008 R2 机器上运行它，因为 Web Platform Installer 4.0 有工具更新，它想要安装 Express 和大量其他应用程序。

该安装程序`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies`使用 System.Web.Mvc.dll 创建了一个目录。

我浏览[了 MVC 3 到 MVC 4 的手动升级说明，](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)我刚刚遇到了第 3 项：

> 在解决方案资源管理器中，右键单击引用并选择管理 NuGet 包。在左窗格中，选择 Updates\All，然后更新以下内容：
> 
> *   ASP.NET MVC 4
> *   （可选）jQuery、jQuery 验证和 jQuery UI
> *   （可选）实体框架
> *   （可选）Modernizr

据我所知，ASP.NET MVC 4 指的是[这个 NuGet 包](https://nuget.org/packages/AspNetMvc)，它现在包含在 Microsoft ASP.NET MVC 4 ( [Microsoft.AspNet.Mvc](https://nuget.org/packages/Microsoft.AspNet.Mvc) ) 中，似乎用于安装在共享主机和云平台上。

还是我错过了什么？即使我拥有自己的服务器，是否有理由安装此软件包，并且可以根据需要安装/更新 .NET Frameworks？

编辑：请注意，检查标题（我还没有关闭它）确实表明该站点的 MVC 版本是 4.0，并且没有 NuGet 包。是不是还没有被推送到核心包中的修复/功能？它主要用于共享托管环境吗？如果我保留它，如果已经安装了 MVC 4，它是否会导致一些性能损失（我会考虑不必要地增加内存使用量）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T19:25:49.387

据我所知，它们完全相同。即使调用了 NuGet 包`Microsoft.AspNet.Mvc`，它创建的 dll 文件也被命名为`System.Web.Mvc.dll`. `System.Web.MVC`它与 GAC 中的文件具有相同的大小、程序集签名等。

所以现在，即使你引用了这两个程序集，.NET 也应该认识到它们是完全相同的，并且只加载其中一个。随着不基于核心 .NET 4.5 文件的新版本的推出，微软可能正在推动 NuGet 包以使其更容易升级。或者，正如您所猜测的，NuGet 包使您可以在不允许安装 MVC 的系统上运行 MVC 应用程序。

# regex - 正则表达式替换 HTML 标记

> ID：12101833
> 
> 赞同：0
> 
> 时间：2012-08-24T00:33:31.437
> 
> 标签：regex, regex-negation

```
<td width="16%" height="123" class="adult_normal_text"> 
```

`<td height="123" width="86%" colspan="2" class="adult_normal_subheader">`

```
<td width="54%" height="123" > 
```

我有三种格式<td>，

我想摆脱“height=123”，

并且如果在写tbdh123后面的类中存在类

如果没有类添加 class="tbdh123"。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:39:50.917

不要使用正则表达式。使用 HTML 解析器。由于我不知道您使用的是什么语言，因此我无法提供建议，但它很简单，因为您可以轻松浏览您的元素并修改属性。

另请参阅：[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags#1732454)

# assembly - 我需要什么类型的汇编器？

> ID：12101834
> 
> 赞同：0
> 
> 时间：2012-08-24T00:33:35.560
> 
> 标签：assembly, x86, windows-7, x86-64, a86

我正在学习汇编，我真的很喜欢裸 PUSH 和 POP 指令的概念。我真的很喜欢低级的东西。我一直在关注[本](http://www.skynet.ie/~darkstar/assembler/tut2.html)教程，这是一些可以用来制作简单 .exe 的代码：

```
MOV AH,02   ; Function to output a char
MOV DL,"!"      ; Character to output
INT 21h ; Call the interrupt to output "!"
MOV AH,04Ch ; Select exit function
MOV AL,00   ; Return 0
INT 21h ; Call the interrupt to exit 
```

那家伙说你可以用 A86 组装这段代码，但是当我到他们的网站时，它似乎已经灭绝了，程序版本只升级到 Windows XP？是否有适用于 Windows 64 位的 A86 汇编程序？什么类型的汇编器使用这些极其简单的指令？（我不太喜欢 MASM 或 FASM）

谢谢！

PS 我一直在使用 Olly DBG 进行逆向工程程序，这就是为什么我一直在学习更多关于汇编的知识，因此也学习了 PUSH、POP、MOV 和 INT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:12:17.393

好吧，您正在使用的教程是 16 位 DOS 代码，并且不适用于现代操作系统。学习 32 位汇编，你会过得更好。

x86 汇编程序。

```
MASM - Ok, you don't like it
FASM - Now your being too picky.
NASM 
YASM
RoASM
JWasm
GoASM 
```

和其他一些人。如果您不喜欢 FASM，那么您可能也不会喜欢其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-25T19:15:30.377

一个使用普通 x86 指令的简单`example.asm`程序可能如下所示：

```
example PROGRAM Format=PE,Entry=WinMain:
         IMPORT MessageBoxA, Lib=user32.dll ; Declare used Windows functions.
         IMPORT ExitProcess, Lib=kernel32.dll
WinMain: PUSH 0                             ; Show MB_OK button in MessageBox.
         PUSH ="I'm the box caption."       ; Text in MessageBox title.
         PUSH ="I'm the example program!"   ; Text to show within MessageBox.
         PUSH 0                             ; MessageBox belongs to the desktop.
         CALL MessageBoxA                   ; Invoke Windows function.
         PUSH 0                             ; Errorlevel to terminate with.
         CALL ExitProcess                   ; Invoke Windows function. 
        ENDPROGRAM 
```

可以`example.exe`通过[€ASM](https://euroassembler.eu/eadoc/)使用命令转换为`euroasm example.asm`

如果您放弃*简单的汇编编程受虐狂*，并按照@Gunner 的建议学习使用宏，它们将封装无聊的重复内容并让您专注于实际的汇编。使用宏[WinAPI](https://euroassembler.eu/maclib/winapi.htm#WinAPI)的示例会更短：

```
example PROGRAM Format=PE,Entry=WinMain:
         INCLUDE winapi.htm
WinMain: WinAPI MessageBox,Lib=user32.dll,0,="I'm the example program!",="I'm the box caption.",0
         TerminateProgram 0
        ENDPROGRAM 
```

# sqlite - python和sqlite的不同strftime结果

> ID：12101836
> 
> 赞同：0
> 
> 时间：2012-08-24T00:34:08.563
> 
> 标签：sqlite, python-2.7, strftime

我一直在尝试将日期存储为 sqlite 中的字符串，但在查询时无法获得正确的结果。我遇到的问题似乎归结为我在 sqlite 和 python 中使用 strftime 得到了不同的结果。我在每个中将相同的日期转换为秒并得到不同的结果。

```
In [1]: import sqlite3
In [2]: from datetime import datetime as dt
In [3]: conn = sqlite3.connect(':memory:')  
In [4]: cur = conn.cursor()  
In [5]: cur.execute("select strftime('%s','2012-05-01 12:03:33')").fetchone()
Out[5]: (u'1335873813',)
In [6]: dt.strptime('2012-05-01 12:03:33', '%Y-%m-%d %H:%M:%S').strftime('%s')
Out[6]: '1335830613' 
```

我期待两者都会给我相同的结果。我错过了什么吗？

谢谢！——贾里德·基贝勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:43:07.133

SQLite 的 strftime() 使用 UTC。Python 使用早 12 小时（43200 秒）的时区。

# php - 如何仅加载 html（并跳过媒体文件）

> ID：12101838
> 
> 赞同：4
> 
> 时间：2012-08-24T00:34:27.067
> 
> 标签：php, http, curl, web-crawler

我正在优化我的简单网络爬虫（目前使用 PHP/curl_multi）。

目标是在智能的同时抓取整个网站，并跳过非 html 内容。我尝试使用nobody，并且只发送HEAD请求，但这似乎不适用于每个网站（某些服务器不支持HEAD），导致exec暂停很长时间（有时比加载页面本身长得多）。

有没有其他方法可以在不下载整个内容的情况下获取页面类型，或者如果文件不是 html，则强制 CURL 放弃下载？

（编写我自己的 http 客户端不是一个选项，因为我打算稍后将 CURL 函数用作 cookie 和 ssl）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:56:32.347

我没试过，但我明白了`CURLOPT_PROGRESSFUNCTION`。我敢打赌，如果您对正在下载的内容不感兴趣，您可以逐步阅读响应以查找`content-type`标头和可能的[curl_close () 句柄。](http://www.php.net/curl_close)

```
CURLOPT_PROGRESSFUNCTION     The name of a callback function
where the callback function takes three parameters. The first is the
cURL resource, the second is a file-descriptor resource, and the 
third is length. Return the string containing the data. 
```

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:14:18.640

正确的方法是使用

```
curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'curlHeaderCallback'); 
```

回调将接受 2 个参数 - 第一个 CURL 句柄，第二个 - 标头。每次新标头到达时都会调用它。

```
$acceptable=array('application/xhtml+xml',
'application/xml', 'text/plain',
'text/xml', 'text/html');

function curlHeaderCallback($resURL, $strHeader) { 
    global $acceptable;
    if (stripos($strHeader,'content-type')===0) {
        $type=strtolower(trim(array_shift(explode(';',array_pop(explode(':',$strHeader))))));
        if (!in_array($type,$acceptable))
            return 0;
    }
    return strlen($strHeader); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:54:53.627

这对我有用：

```
<?php
$handle = curl_init('http://www.google.com');
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_HEADER, true);
$result = curl_exec($handle);
$type = curl_getinfo($handle, CURLINFO_CONTENT_TYPE);
if(strpos($type, 'text/html') !== false) {
    echo 'The URL is an HTML page.';
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T00:48:06.017

你看过[fsockopen](http://www.php.net/manual/en/function.fsockopen.php)吗？

您可以打开一个到远程页面的套接字，然后只读取必要的内容。一旦`Content-Type`确定了标头，就可以关闭连接。

```
<?php
$type = 'Unknown';
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: www.example.com\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);

    $in = '';
    while (!feof($fp)) {
        $in .= fgets($fp, 128);
        if ( preg_match( '/Content-Type: (.+)\n/i', $in, &$matches ) ) {
            $type = $matches[1];
            break;
        }
    }
    fclose($fp);
}
echo $type;
?> 
```

# sql - 如何使用 DTS 包删除或删除 SQL Server 上的 .txt 文件？

> ID：12101842
> 
> 赞同：0
> 
> 时间：2012-08-24T00:36:02.683
> 
> 标签：sql, sql-server, ssis, dts

我想要实现的是使用 DTS 包按计划删除 .txt 文件，以便另一个包将其拾取，在这种情况下，我使用 SSIS 作为下一步，只是我不知道如何删除使用 DTS 包的文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:54:09.857

在 SSIS 中删除文件的首选方法（现在不需要创建任何恐龙 DTS / activex 包）是使用脚本任务。这是 vb.net 的方式：

确保引用 System.IO：

```
Imports System.IO 
```

然后只需运行以下命令（将文件名值替换为要删除的文件）：

```
Public Sub Main()
    Try
        Dim filename As String = "C:\fileYouWantToDelete.txt"
        If File.Exists(filename) Then
            File.Delete(filename)
        End If
    Catch ex As Exception
        Dts.Events.FireError(0, "File Killer", ex.Message, String.Empty, 0)
    End Try
    Dts.TaskResult = ScriptResults.Success
End Sub 
```

这是 DTS / vbscript 方式的链接（尽管我强烈建议不要创建 dts 包，因为该产品已死，并且有人将不得不在几个月/几年内转换您的代码）：[http://www.codekeep。净/片段/187006e9-bce2-42cd-85fd-231eced17c80.aspx](http://www.codekeep.net/snippets/187006e9-bce2-42cd-85fd-231eced17c80.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T02:28:10.953

您始终可以使用文件系统任务，然后从该任务中选择删除文件选项来删除您的文件。无需执行脚本任务的开销。

文件系统任务将允许您复制、移动或删除文件。

当然这是 SSIS，我同意 brian 比使用 DTS 来实现您的解决方案更好。

我不确定删除文件如何准备另一个包来获取您刚刚删除的文件。

# cocos2d-x - cocos2d-x 应用程序在代码更改后不会更新

> ID：12101843
> 
> 赞同：0
> 
> 时间：2012-08-24T00:36:20.760
> 
> 标签：cocos2d-x, updates

所以我只是按照 Ray Wenderlich 的教程[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started在 Eclipse 上设置了我的 Cocos2d-x 框架](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)

Xcode 方面的一切都很棒，但是，每当我进行任何代码更改并尝试使用 Eclipse 在我的 Android 手机上运行它们时，即使代码已更改并且图像已从项目中删除，也会出现默认的 Hello World 场景. 关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:46:55.353

我认为您需要运行代码

```
./build_native.sh 
```

在您的 android/ 文件夹中并刷新您的 eclipse 项目，然后再将其部署到您的 android 设备上

# maven - Tycho 中如何使用同一个目标平台多个子项目

> ID：12101847
> 
> 赞同：5
> 
> 时间：2012-08-24T00:38:02.853
> 
> 标签：maven, tycho

是否可以为每个 Maven 子项目使用相同的 .target 文件？

来自父 .pom 文件的片段

```
<groupId>root.server</groupId>
<artifactId>root.server</artifactId> 
```

来自子 .pom 文件的片段

```
<groupId>child.project</groupId>
<artifactId>child.project.parent</artifactId>

                <target>
                    <artifact>
                        <groupId>root.server</groupId>
                        <artifactId>root.server</artifactId>
                        <version>${project.version}</version> 
                        <classifier>targetfile</classifier>
                    </artifact>
                </target> 
```

当我在子项目中尝试“mvn clean install”时出现异常：`Could not resolve target platform specification artifact`. 当我在子项目的父项中尝试“mvn clean install”时，一切正常。

有没有办法为所有项目（父项目+子项目）重用一个 .target 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T07:04:41.293

这是可能的，并且是首选方法。

您应该专门为您的`.target`文件创建一个子模块（例如，称为目标定义）。这应该是一个 pom 打包类型的项目。您还应该包括以下片段 - 这是允许其他模块访问 .target 文件的片段：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.3</version>
    <executions>
      <execution>
        <id>attach-artifacts</id>
        <phase>package</phase>
        <goals>
          <goal>attach-artifact</goal>
        </goals>
        <configuration>
          <artifacts>
            <artifact>
              <file>targetFilename.target</file>
              <type>target</type>
        <classifier>targetFilename</classifier>
            </artifact>
          </artifacts>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

[现在在您的父 pom 中，您可以在target-platform-configuration](http://wiki.eclipse.org/Tycho/Target_Platform#Target_files)中引用此模块，您的子模块也将使用它：

```
<plugin>
  <groupId>org.eclipse.tycho</groupId>
  <artifactId>target-platform-configuration</artifactId>
  <version>${tycho-version}</version>
  <configuration>
    <target>
      <artifact>
         <groupId>org.example</groupId>
         <artifactId>target-definition</artifactId>
         <version>1.0.0-SNAPSHOT</version>
         <classifier>targetFilename</classifier>
      </artifact>
    </target>
  </configuration> 
</plugin> 
```

还有一个[增强请求](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383865)为 .target 文件创建打包类型以帮助将来的事情。

# mercurial - 如何获取 Mercurial 中最近提交的分支的名称

> ID：12101848
> 
> 赞同：0
> 
> 时间：2012-08-24T00:38:15.250
> 
> 标签：mercurial, batch-file, repository, hgrc

我想做的是查询 HG repo 以找到最后一次提交的分支名称。

当用户将他们的提交推送到 repo 时，我正在通过中央 repo中的*.hg/hgrc文件中的钩子触发批处理文件。*

在我的本地仓库中使用*hg 分支*可以正常工作，但是我正在运行的批处理文件驻留在中央仓库中，这意味着它总是返回“默认”

我想做的是“获取最后提交的修订并从中提取分支名称”，而不管中央存储库在哪个分支上。

我希望这是可能的，但可能不是 - 任何建议都非常感谢

这是我的批处理文件中的一个片段：

```
setlocal enableextensions
for /f "tokens=*" %%a in (
'hg branch'
) do (
set hg_branch=%%a
)
set dest=\\myrepo-%hg_branch%\ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:43:54.403

`tip`始终是最新的变更集，因此这将打印分支名称：

```
hg log -r tip --template {branch} 
```

# grails - Grails Spring Security 使用电子邮件登录

> ID：12101849
> 
> 赞同：11
> 
> 时间：2012-08-24T00:38:18.957
> 
> 标签：grails, login, spring-security

我的用户域类扩展了 SecUser。

用户有一个属性“电子邮件”。

Spring security 使用 SecUser 的“用户名”登录。

我需要使用“电子邮件”登录。有没有办法做到这一点？

编辑（来自接受的答案）：

我删除了 SecUser 的用户名属性并添加了电子邮件属性。

然后我将此行添加到 Config.groovy：

grails.plugins.springsecurity.userLookup.usernamePropertyName = 'email'

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T01:02:12.040

RTFM 我的朋友 :)

[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#4.1%20Person%20Class](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#4.1%20Person%20Class)

```
userLookup.usernamePropertyName 'username'  User class username field 
```

添加到 Config.grooy：

```
grails.plugins.springsecurity.userLookup.usernamePropertyName='email' 
```

较新版本的 grails 使用前缀

`grails.plugin.springsecurity`代替 `grails.plugins.springsecurity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T15:32:36.290

如果您还使用 Spring Security UI 插件，请注意忘记密码和用户注册电子邮件的默认文本引用用户名字段。

您可以像这样覆盖它们：

```
grails.plugins.springsecurity.ui.register.emailBody = 'Hi \$user.firstName...'
grails.plugins.springsecurity.ui.forgotPassword.emailBody = 'Hi \$user.firstName...' 
```

# php - php - 如何在单独的变量中获取所有变量值

> ID：12101854
> 
> 赞同：0
> 
> 时间：2012-08-24T00:38:45.123
> 
> 标签：php

如何在单独的变量中获取所有可能的变量值.....用逗号分隔

```
$bin="1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code"; 
```

**如何获得所有可能的变量是这样的。**

```
$NN01="1";
$NN02="2";
$NN03="3";
$NN04="4";
$NN05="5";
$NN06="6";
$NN07="ABC";
$NN07="AAA";
$NN08="77";
$NN09="00";
$NN10="11";
$NN11="AS";
$NN12="Code"; 
```

上面的字符串可以用逗号以外的任何运算符分隔，谢谢您的帮助....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T00:41:29.150

您将无法做到这一点，但您可以将它们分解为一个数组。

```
$bin="1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code";
// any delimiter in place of ','
$arr = explode(',',$bin);
echo $arr[0]; 
```

编辑：好的，这是可能的。我错误地表示你将无法做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T00:58:12.480

```
$bin = "1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code";
list ($NN01,$NN02,$NN03,$NN04,$NN05,$NN06,$NN07,$NN07,$NN08,$NN09,$NN10,$NN11,$NN12) = $bin; 
```

或完全动态的东西

```
$i = 0;
foreach ($bin as $val) {
    $temp = 'NN' . str_pad(++$i, 2, '0');
    $$temp = $val;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T01:16:13.173

另一个想法是使用**extract**，并提供所需的前缀。

```
$bin="1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code"; 
```

这将为您提供 $NN_0 .. $NN_11，其中“NN”是您选择的前缀。

```
extract( explode( ',', $bin ), EXTR_PREFIX_ALL, 'NN' ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T00:49:14.903

您可以使用该`explode`函数将初始值转换为数组：

```
$bin="1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code";
$array_of_values = explode(',' $bin); 
```

这将为您提供一个数字索引数组，如下所示：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
    [5] => 6
    [6] => ABC
    [7] => AAA
    [8] => 77
    [9] => 00
    [10] => 11
    [11] => AS
    [12] => Code
) 
```

您可以使用它并通过索引访问各个值：

```
echo $array_of_values[0]; // 1 
```

查看有关数组的更多信息：http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

从那里，如果你想将值设置为变量，你可以使用这个循环，它使用“变量变量”：

```
$bin= "1,2,3,4,5,6,ABC,AAA,77,00,11,AS,Code";
$array_of_values = explode(',', $bin);
$vn = 'NN';
foreach ($array_of_values as $k=>$v) {
  ${$vn.$k} = $v;
}
echo 'NN1:'.$NN1; // NN1:2
echo 'NN2:'.$NN2; // NN2:3
echo 'NN2:'.$NN3; // NN3:4 
```

试试看：[http ://codepad.org/Ee8F9F18](http://codepad.org/Ee8F9F18)

**文档**

*   数组 - [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)
*   `explode`- [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)
*   变量变量 - [http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T00:42:17.590

不确定您要完成什么，但为什么不使用[array()](http://php.net/manual/en/language.types.array.php)？

它工作简单。

```
$YourArray = array ( "NN01" => "1", "NN02" => "2") // And so on 
```

# php - Libreoffice --headless 拒绝转换，除非是 root，不能在 PHP 脚本中工作

> ID：12101855
> 
> 赞同：12
> 
> 时间：2012-08-24T00:38:46.373
> 
> 标签：php, linux, libreoffice

运行无头 Ubuntu 服务器 12.something。

根@服务器：`chown www-data /my/path/ -R`

根@服务器：`chgrp www-data /my/path/ -R`

根@服务器：`chmod 755 /my/path/ -R`

根@服务器：`libreoffice --headless --convert-to pdf:writer_pdf_Export /my/path/foo.ppt --outdir /my/path`

```
convert /my/path/foo.ppt -> /my/path/foo.pdf 
```

奇迹般有效。

* * *

根@服务器：`sudo -i -u www-data`

$`libreoffice --headless --convert-to pdf:writer_pdf_Export /my/path/foo.ppt --outdir /my/path`

```
convert /my/path/foo.ppt -> /my/path/foo.pdf
Error: Please reverify input parameters... 
```

该死。

* * *

根@服务器：`sudo -i -u someotheruser`

$`libreoffice --headless --convert-to pdf:writer_pdf_Export /my/path/foo.ppt --outdir /my/path`

```
convert /my/path/foo.ppt -> /my/path/foo.pdf
Error: Please reverify input parameters... 
```

该死。

有人知道吗？试图研究这个让我更加困惑。这可能是一个错误还是一些依赖怪癖？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-17T02:48:19.037

我终于找到了答案......添加：

```
export HOME=/tmp && 
```

一开始，所以：

```
export HOME=/tmp && libreoffice --headless --convert-to pdf:writer_pdf_Export /my/path/foo.ppt --outdir /my/path 
```

这在 CentOS 6.5 和 PHP 中的 shell_exec() 上对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-27T16:15:11.320

您需要做的所有事情 - 创建文件夹“/var/www/.config”。当您尝试在 www-data 用户 libreoffice 下转换某些文件时，需要用户主目录中的“.config”目录。但是 libreoffice 没有创建此类文件夹的权限。用户 www-data 默认主目录是“/var/www”。所以只需运行命令：

```
sudo mkdir /var/www/.config
sudo chmod 700 /var/www/.config
sudo chown www-data /var/www/.config 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-12T06:36:34.847

`soffice`在作为 NodeJS 应用程序的一部分在 CloudFoundry (Diego) 容器中运行二进制无头文件 (LibreOffice 5.0.5.2) 时，我们遇到了同样的问题。

似乎较新版本的`libreoffice`不期望写入`HOME`，而是尝试写入`TMPDIR`。

`strace`显示： `8349 mkdir("app/tmp", 0777) = -1 ENOENT (No such file or directory) 8349 open("app/tmp/lu8349pzgegi.tmp", O_RDWR|O_CREAT|O_EXCL, 0600) = -1 ENOENT (No such file or directory)`

和`TMPDIR=app/tmp`

我们通过将其设置`TMPDIR`为 App 进程用户可写的目录来修复它，即`TMPDIR=/tmp`在 CloudFoundry 上：

`process.env.TMPDIR = "/tmp";`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-08T10:38:59.233

我有同样的错误，但问题不是root访问。命令是错误的。

这对我有用，从 LibreOffice 4.2 的文档中获取文本。：

```
soffice --headless --convert-to txt:Text file_to_convert.odt 
```

（[http://ask.libreoffice.org/en/question/14130/how-do-i-install-filters-for-the-soffice-command/](http://ask.libreoffice.org/en/question/14130/how-do-i-install-filters-for-the-soffice-command/)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-24T06:27:32.603

对我来说，这是由于不可写的输出文件夹。使用`--outdir`并指定一个可写文件夹。

如果输出文件已经存在，它将自动覆盖。

例子：

```
$ libreoffice --headless --convert-to pdf --outdir myfolder/ myfile.docx 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-30T08:33:35.457

我可以通过先删除文件然后运行转换文件来解决这个问题。看起来由于文件所有者问题，文件的覆盖失败。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-03T21:20:05.283

就像 Jacek 在他的评论中所说的那样，将您尝试执行命令的用户设置为不需要密码的 sudoer。然后将您的 libreoffice 命令更改为

```
sudo libreoffice <rest of command> 
```

为我工作。我遇到过同样的问题。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-05-07T07:58:18.230

您不能使用 www-data 用户运行 libreoffice soffice 二进制文件。请改用具有 sudo 权限的用户。检查我的要点[https://gist.github.com/nathanielvarona/423bda9e4a8a4f0f9bbf#file-soffice-listener-sh](https://gist.github.com/nathanielvarona/423bda9e4a8a4f0f9bbf#file-soffice-listener-sh)

并且因为您将在 PHP 中使用它。也试试 PHP-FPM。安装它，然后修改 /etc/php5/fpm/pool.d/www.conf 文件。

从

```
user = www-data 
group = www-data 
```

至：

```
user = ubuntu
group = ubuntu 
```

我已经在 AWS EC2 以及我的 VBox 虚拟机中成功运行了它。

# objective-c - 如果启用设置为 NO，UITextField 就会变成黑洞

> ID：12101856
> 
> 赞同：0
> 
> 时间：2012-08-24T00:38:49.513
> 
> 标签：objective-c, uitableview, uitextfield

抬头编辑：我在下面发布了（简单）答案。无需浪费时间查看所有这些代码。另请参阅杰克劳伦斯的回答中的结构建议。

* * *

我在 tableViewCell 中设置了一个 UITextField，它以`enabled = NO`. 后来它被更改为，`enabled = YES`以便它可以成为第一响应者并调用键盘等。

但是一旦`enabled`是NO，它就再也不会是YES了：

```
tf.enabled = YES;
printf(" Is tf enabled? %d", [tf isEnabled]); // this prints 0 — it refuses to be re-enabled. 
```

更奇怪的是，如果我继承 UITextField 并给它一个简单的自定义方法，我可以从控制器成功调用该方法——*之前* `enabled`设置为 NO。一旦`enabled`为否，调用自定义方法什么也不做。没有警告或异常；它只是不运行。

所以问题不仅仅是响应者链的一些问题。曾经禁用的文本字段的行为就像一个黑洞。

`enabled`我确实看过 Apple 的单元格中可编辑文本字段的演示，“TaggedLocations”，他们完全不受惩罚地摆弄：`nameField.enabled = NO;`一切都`nameField.enabled = YES;`像发条一样。

还有另一条线索：UIControl 类引用说：“如果启用状态为 NO，则控件会忽略触摸事件，子类可能会以不同方式绘制。” 但是拒绝重新启用？拒绝接受方法调用？我不明白。

* * *

好吧，这可能比你真正想看的要多，但希望其中隐藏着一些线索。

下面是 UITextField 子类的 h 和 m 文件：

```
#import "FooNameFieldForCell.h"

@implementation FooNameFieldForCell

- (BOOL) canBecomeFirstResponder {
    printf("\nCBFR called, self.enabled is %d.", self.enabled); 
    if (self.enabled)
        return YES;
    else
        return NO;
}

- (BOOL) canYouHearMe:(id)sender {
    printf("Yes, I hear you."); 
    return YES;
}

@end

#import <UIKit/UIKit.h>

@interface FooNameFieldForCell : UITextField {

}

- (BOOL) canYouHearMe:(id)sender;

@end 
```

这是 cellForRow 和操作方法：

```
BOOL bPortrait = UIInterfaceOrientationIsPortrait(self.interfaceOrientation);

// Cell Which Layout
NSString *identifier = nil;
UITableViewCell *cellFooList = nil;
switch (indexPath.row) {
    case 0:
        // this textfield is in row 0
        identifier = bPortrait ? @"cellFooListName_portrait" : @"cellFooListName_landscape";
        cellFooList = [tableView dequeueReusableCellWithIdentifier:identifier];
        if (!cellFooList)
            cellFooList = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];
        break;
    // other rows…
}

// Foo
Foo *Foo = [self.frcFoosAllReg_byName.fetchedObjects objectAtIndex:indexPath.section];

// Cell Fill
switch (indexPath.row) {
    case 0: {
        if (cellFooList.tag == 1) {
            for (UIView *subview in cellFooList.subviews) {
                if (subview.tag == 2) {
                    ((FooNameFieldForCell *)cellFooList).text = Foo.FooName;
                    break;
                }
            }
            break;// dequeued cell, already done 
        }

        // button "Edit"
        // (Yes, I know you’re supposed to put this on the navBar, but as a user I have never liked that metaphor. I’m doing the editability by section/row.) 
        UIButton *btnEditFooName = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btnEditFooName addTarget:self action:@selector(presentEditFooName:) forControlEvents:UIControlEventTouchUpInside]; // the selector is where I’m trying to enable the textfield
        // do button setup & framing
        [btnEditFooName setFrame:rectBtnEditFooName];
        [cellFooList.contentView addSubview:btnEditFooName];

        // TEXTFIELD SETUP FOLLOWS   

        // do framing
        FooNameFieldForCell *tfFooName = [[FooNameFieldForCell alloc] initWithFrame:rectFooName]; 
        [tfFooName canYouHearMe:self]; // custom method runs OK here
        tfFooName.text = Foo.FooName;
        tfFooName.enabled = NO;
        tfFooName.tag = 2; // tag to locate among cell's subviews
        [cellFooList.contentView addSubview:tfFooName];
        [tfFooName release];
        // no row selection allowed
        cellFooList.selectionStyle = UITableViewCellSelectionStyleNone;
        // tag as done
        cellFooList.tag = 1;
        break;
    // other cases…
    }
}
return cellFooList;
}

// Called by the Edit button:
- (void) presentEditFooName:(id)sender {

    // Determine which Foo is associated with sender.
    if (![sender isKindOfClass:[UIButton class]])
        return;
    UIView *cell = ((UIButton *)sender).superview.superview;
    if (!cell || ![cell isKindOfClass:[UITableViewCell class]])
        return;
    NSIndexPath *indexPath = [self.tvFooList indexPathForCell:((UITableViewCell *)cell)];
    Foo *Foo = [self.frcFoosAllReg_byName.fetchedObjects objectAtIndex:indexPath.section];

    FooNameFieldForCell *tfFooName = nil;
    for (UIView *subview in cell.subviews) {
        if (subview.tag == 2) {
            tfFooName = subview;
            break;
        }
    }

    // BLACK HOLE
        // because tfFooName is nil. But why? It shows up in the cell.

    tfFooName.enabled = YES; 
    [tfFooName becomeFirstResponder];
    printf("\ntfFooName can become firstResp? %d", tfFooName.canBecomeFirstResponder); // always prints 0, can't be firstResp
    [tfFooName canYouHearMe:self]; // does not run
    printf(" Is tfFooName enabled? %d", [tfFooName isEnabled]); // prints 0, still disabled

} 
```

* * *

好吧，我的神秘黑洞竟然是——空！好的，现在看起来很明显，特别是因为objective-c 允许调用null。但是我还有另一个谜团：该字段的文本出现在单元格中，那么它怎么可能是 nil 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:18:34.820

文本字段本身不是零 - 你是对的，如果它是零，它就不会显示在单元格中。相反，我认为这段代码没有找到单元格：

```
FooNameFieldForCell *tfFooName = nil;
for (UIView *subview in cell.subviews) {
    if (subview.tag == 2) {
        tfFooName = subview;
        break;
    }
} 
```

插入断点并`tfFooName`在 for 循环之后或 if 语句内打印值以进行检查。

考虑使用以下方法之一，而不是搜索子视图或超级视图：

*   使用 Objective-C 运行时的关联对象函数将 NSIndexPath 与编辑按钮相关联，并使用该索引路径检索单元格。
*   使用键值观察将文本字段的文本值“绑定”到对象的值（小心单元重用和核心数据对象错误）
*   创建一个子类`UIButton`并添加一个 indexpath 属性（有点乱）
*   将基于块的事件处理添加到`UIButton`（最困难但最棒的，但那里有教程和预构建的解决方案），只需准确设置您想要在`-tableView:cellForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:05:16.657

有时，如果在这种情况下设置对象的属性时遇到问题，向对象添加公共方法会有所帮助，例如：

```
-(void) setEnabledToYes
{
self.enabled=YES;
} 
```

我知道这是一个陪审团解决方案，但它以前对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T03:37:43.377

像往常一样，当我把头发扯掉时，黑洞之谜原来很简单。

这...

```
FooNameFieldForCell *tfFooName = nil;
for (UIView *subview in cell.subviews) {
    if (subview.tag == 2) {
        tfFooName = subview;
        break;
    }
} 
```

...应该是这样的：

```
FooNameFieldForCell *tfFooName = nil;
for (UIView *subview in ((UITableViewCell *)cell).contentView.subviews) {
    if (subview.tag == 2) {
        tfFooName = subview;
        break;
    }
} 
```

*自定义视图在单元格的contentView*中向下一层，而不是其直接子视图。啊！浪费了这么多时间！

# hard-drive - 如何使用 VB.NET 读取硬盘卷序列号？

> ID：12101857
> 
> 赞同：1
> 
> 时间：2012-08-23T20:06:39.983
> 
> 标签：hard-drive, vb.net

如何使用 VB.NET 读取 HDD 卷序列号，但没有 Visual Studio 的任何第三方插件或任何外部库 - 如果可能，我需要本机 VB.NET 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T18:07:22.097

```
Public Function GetDriveSerialNumber() As String
    Dim DriveSerial As Long
    Dim fso As Object, Drv As Object
    'Create a FileSystemObject object
    fso = CreateObject("Scripting.FileSystemObject")
    Drv = fso.GetDrive(fso.GetDriveName(AppDomain.CurrentDomain.BaseDirectory))
    With Drv
        If .IsReady Then
            DriveSerial = .SerialNumber
        Else    '"Drive Not Ready!"
            DriveSerial = -1
        End If
    End With
    'Clean up
    Drv = Nothing
    fso = Nothing
    GetDriveSerialNumber = Hex(DriveSerial)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:48:36.977

不确定这是否是您要查找的内容，但快速谷歌搜索将我带到该网站：

[http://www.vbgold.com/vb-projects/disk-serial-number.shtml](http://www.vbgold.com/vb-projects/disk-serial-number.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:07:40.880

```
' Function driveser (model)
' Returns the serial number of the drive specified in "model" or an empty string. 
' Please include this is you are going to use it.
' (C) By Zibri 2013
' Free for non commercial use.
' zibri AT zibri DOT org

Function driveser(ByVal model As String) As String
    Dim devid As String = ""
    driveser = ""
    Try
        Dim searcher As New ManagementObjectSearcher( _
            "root\CIMV2", _
            "SELECT * FROM Win32_DiskDrive WHERE Model LIKE '%" + model + "%'")
        For Each queryObj As ManagementObject In searcher.Get()
            If queryObj("SerialNumber") <> "" Then driveser = queryObj("SerialNumber")
            Debug.Print(queryObj("Model") + ":" + driveser)
        Next
    Catch err As ManagementException
        Debug.Print("An error occurred while querying for WMI data: " & err.Message)
    End Try
End Function 
```

# sql - 不在日期范围内

> ID：12101859
> 
> 赞同：2
> 
> 时间：2012-08-24T00:39:42.617
> 
> 标签：sql, date, range, informix

我有一个订单数据库。每个订单可以有多个 SKU。同样，SKU 可以附加到多个订单。每个订单都有一个存储其创建日期的日期字段。

*   表 1 = 存储附加到订单的所有 SKU 信息的详细信息表
*   表 2 = 列出订单 ID 和发货日期的摘要，与表 1 交叉引用以获得每个订单的更多详细信息

我要查找的是在特定日期之后未附加到任何订单的 SKU。换句话说，我想要最近 30 天内未订购的 SKU 列表。

似乎 NOT BETWEEN 应该可以工作，但它会不断返回 2012 年 7 月 21 日之后订购的 SKU。这是我正在使用的查询：

```
SELECT DISTINCT table1.sku, table2.ship_date
FROM table1, table2
WHERE table1.orderID = table2.orderID
AND table2.ship_date NOT BETWEEN  DATE ('2012-07-21') and DATE('2012-08-23')
ORDER BY table1.ship_date ASC; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:53:19.367

您需要使用`not in`并基于 sku 表：

```
SELECT sku
FROM sku_table -- the table with the complete list of skus
where sku not in (
    -- all skus that were ordered after 2012-07-21
    SELECT sku
    from table1
    WHERE order_date > DATE('2012-07-21')
    union -- fyi union removes duplicates
    -- all skus that were shipped after 2012-07-21
    SELECT table1.sku
    from table2
    join table1 on table1.orderID = table2.orderID
    WHERE table2.ship_date > DATE('2012-07-21')
) 
```

此查询还将返回从未订购过的 SKU。

# jquery - 如何让 .getJson 成功

> ID：12101868
> 
> 赞同：1
> 
> 时间：2012-08-24T00:41:00.797
> 
> 标签：jquery, json, asp.net-mvc-3

我第一次尝试 Json，我不确定我在这里做错了什么，但我的成功回调永远被调用。我有一个名为 RIPreset 的下拉菜单，它在更改时调用以下代码。我知道 on change 部分工作正常。在我的 alert("popup1") 代码运行下面的代码中，我的代码后面也有一个断点，可以看到 getPreset 方法被调用并将字符串传递给结果，但我的 . getJSON 调用。即，alert("popup2") 永远不会被调用。我认为这意味着我没有从我的 JsonResult 传递有效数据，但我不确定我做错了什么。任何帮助，将不胜感激。

代码背后

```
 public JsonResult getPreset(int id)
    {
        RIPreset ripreset = db.RIPresets.Find(id);
        return Json(new { Description = ripreset.Description, LaborHours = ripreset.LaborHours, HourlyRate = ripreset.HourlyRate, Amount = ripreset.Amount });

    } 
```

jQuery/Json

```
<script type="text/javascript">
$(document).ready(function () {
    $("#RIPreset").change(function () {

        var selection = $("#RIPreset").val();
        alert("popup1");
        $.getJSON('@Url.Action("getPreset")', { id: selection }, function (ripreset) {
            alert("popup2");
            $("#txtDescription").val(ripreset.Description);
            $("#txtHourlyRate").val(ripreset.HourlyRate);
            $("#txtLaborHours").val(ripreset.LaborHours);
            $("#txtAmount").val(ripreset.Amount);
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:59:27.830

出于安全原因，默认情况下禁用 GET 请求，将您的操作更改为返回

```
public JsonResult getPreset(int id)
    {
        RIPreset ripreset = db.RIPresets.Find(id);
        return Json(new { Description = ripreset.Description, LaborHours = ripreset.LaborHours, HourlyRate = ripreset.HourlyRate, Amount = ripreset.Amount },
                    JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:53:36.030

只需像这样更改您的操作：

```
公共 JsonResult getPreset(int id)
{
    RIPreset ripreset = db.RIPresets.Find(id);
    return Json(new { Description = ripreset.Description, LaborHours = ripreset.LaborHours, HourlyRate = ripreset.HourlyRate, Amount = ripreset.Amount }, JsonRequestBehavior.AllowGet);
}

```

# java - 使用 JasperReports API、现有 jrxml 文件和现有 JDBC 连接创建 XLS

> ID：12101869
> 
> 赞同：1
> 
> 时间：2012-08-24T00:41:04.073
> 
> 标签：java, jasper-reports

我完成了一个 jrxml *iReport*模板。当我使用*NetBeans*插件“预览”它时，它看起来很合适。但是，我在通过 Java 代码生成它时遇到了很多麻烦。

这是我尝试过的：

```
String fileName = [path to the .jasper file]
String outFileName = "test.xls";
HashMap hm = new HashMap();

// Getting datasource
String query = [some query];
ResultSet rset = [some DB scripts that executes the query];
JRResultSetDataSource jasperReports = new JRResultSetDataSource(rset);

JasperPrint print = JasperFillManager.fillReport(fileName, hm, jasperReports);

// Create a XLS exporter
JRExporter exporter = new JRXlsExporter();

// Export the thing
exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, outFileName);
exporter.setParameter(JRExporterParameter.JASPER_PRINT, print);
exporter.exportReport(); 
```

无论如何...这就是我所做的，它返回一个空的*xls*文件。我错过了什么？鉴于*iReport在**NetBeans*中有整个套件来制作*JR*报告，我想有一些简单的方法可以调用这些模板文件并导出我想要的任何数据文件。

我用谷歌搜索了很多，但还没有找到可行的解决方案。

注意：*ResultSet* 100% 工作，所以它是我遇到问题的代码的*JR部分。*

# mysql - mySQL 仅当 count() as col1 <> col2 时才选择行

> ID：12101870
> 
> 赞同：1
> 
> 时间：2012-08-24T00:41:07.480
> 
> 标签：mysql, count, inner-join

我正在使用以下 SQL 语句：

```
SELECT Col1, count(*) as Col2, Col3
FROM table1
WHERE WeekEnding = '08/26/2012' 
GROUP BY Col1 
```

要得到

```
Col1   Col2  Col3
 NY     2     2
 FL     1     2
 TX     1     2
 NJ     1     2
 WA     2     2
 DE     1     3
 MA     4     4
 AL     3     3 
```

如何排除 COL2 = COL3 的记录，所以我得到了。

```
Col1   Col2  Col3
 FL     1     2
 TX     1     2
 NJ     1     2
 DE     1     3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:43:02.580

将其添加到您的`HAVING`条款中

```
SELECT Col1, count(*) as Col2, Col3
FROM table1
WHERE WeekEnding = '08/26/2012' 
GROUP BY Col1
HAVING (count(*) <> col3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:43:58.990

您添加`HAVING`-完成`having`后`group`工作。`Where`在`group`.

```
SELECT Col1, count(*) as Col2, Col3
FROM table1
WHERE WeekEnding = '08/26/2012' 
GROUP BY Col1
HAVING Col2 != Col3 
```

注意：您按 Col1 分组，但不是 Col3 - 这是不合法的，因为您在输出中请求 Col3。

# vb.net - 如何在 vb.net 中使用 waitHandle

> ID：12101873
> 
> 赞同：3
> 
> 时间：2012-08-24T00:42:00.820
> 
> 标签：vb.net, multithreading, suspend, waithandle

我有 VS2010，我正在开发一个 Windows 窗体应用程序。

因此，我动态创建了线程（取决于用户输入），这些线程的处理可能需要一段时间（极端情况下需要几天）。所以我在表单上放了一个按钮，希望能够“暂停”或“暂停”线程。我查看了 .suspend 方法，它已被替换（我尝试过使用它，但有时它确实会失败 - 导致 UI 崩溃）所以我发现的新方法是“waithandle”。我已经阅读了这方面的文档，但我不知道如何使用它。

这是每个线程的基本结构：

```
Do
     'time consuming operations
loop 'a number of times 
```

然后在一个单独的按钮中，我想放置暂停代码。快速暂停并不是那么重要，在循环的下一次运行时暂停就可以了（每次运行都非常快，它只会执行数百次）。我假设我必须将等待句柄检查放在循环的开头，但我实际上并不知道如何实现这一点。这是我的等待句柄暗码：

```
Dim waitHandles As System.Threading.EventWaitHandle = New System.Threading.AutoResetEvent(True) 
```

所有线程都将立即暂停（主 UI 线程除外），所以我认为这意味着我只需要一个等待句柄，但我不确定这一点。

无论如何，如果有人能告诉我哪些代码进入了 do 循环，哪些代码进入了暂停按钮，我想我可以完成其他所有工作。:)

非常感谢！

弗雷泽

* * *

来自评论：

谢谢！我让它工作了。这是我的暗示：

```
Dim mre As New System.Threading.ManualResetEvent(True) 
```

（那是在代码的顶部（就在'public class form 1'下面）然后在它具有的线程中：

```
mre.WaitOne(), 
```

最后在暂停/取消暂停它拥有的线程的按钮中：

```
mre.Reset() 'to resume the threads and, mre.Set() 'to pause the threads 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:19:30.670

为此使用 ManualResetEvent。AutoResetEvent 几乎是一个信号量，因为您必须多次发出信号，因为您有线程正在等待 - 这在某些情况下会变得很尴尬。

创建事件信号，（即设置），并在你的线程中等待它的系统调用等待将对你的线程中的循环产生微不足道的影响的合适的点，即。也许不在最里面的循环中。

清除“暂停”按钮 OnClick() 中的事件，将其设置在“恢复”OnClick() 中。

抱歉，没有实际代码，因为我没有任何 VB，但应该很容易做到 :)

# html - CSS如何使文本对齐背景色顶行

> ID：12101878
> 
> 赞同：3
> 
> 时间：2012-08-24T00:43:13.653
> 
> 标签：html, css

CSS如何使文本对齐背景色顶行 [http://jsfiddle.net/5xR8V/（padding-top：-px](http://jsfiddle.net/5xR8V/)
不起作用）

```
<div class="a">
 texttext
</div>

.a{
position: absolute;
top:100px;
width: 200px;
height: 19px;
background: #000000;
font-size: 20px;
color: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:51:48.327

如果您希望它位于顶部，但底部仍有空间：

```
line-height:19px;
padding-bottom:2px; 
```

或者如果您希望背景颜色与字母的高度相同，则只需行高。19px 将允许大写字母 - 如果您希望它只是小写，您可以将其变小，也许是 13px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:52:00.463

这就是你在说的吗？

[http://jsfiddle.net/5xR8V/](http://jsfiddle.net/5xR8V/)

`line-height:19px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:54:28.570

通过设置行高，您可以将文本移动到背景的最顶部。

```
line-height:13px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T00:56:40.850

CSS 中的文本对齐可以有左、右和居中的值。我猜你说的是垂直对齐或垂直填充颜色，那么在这种情况下阅读“文本对齐”有点奇怪。;)

这是一个小提琴： http: [//jsfiddle.net/PhilippeVay/5xR8V/2/](http://jsfiddle.net/PhilippeVay/5xR8V/2/)，水平线较少，完全黑色，没有文字。这是你想要达到的目标吗？

注意：这高度依赖于使用的字体。默认情况下它是衬线字体（我相信除了 Linux 以外的大部分时间是 Times 或 Times New Roman），值会随着 Arial、Verdana、Helvetica 等而改变

# c# - 从excel电子表格html自动填充表单值

> ID：12101880
> 
> 赞同：0
> 
> 时间：2012-08-24T00:43:22.983
> 
> 标签：c#, html, asp.net-mvc

我有一个大约 100 -150 个字段的 html 大表单。我想知道是否可以在 html 页面中执行诸如拖放/复制和粘贴文本或电子表格之类的操作，以便它自动填充所有表单字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:04:36.703

有许多方法可以使用 C# 自动填写表单。这些解决方案中最好的就是[Selenium Web Driver](http://seleniumhq.org/projects/webdriver/)。

使用任何数量的库也可以轻松地从 Excel 访问值。我真的很喜欢[LinqToExcel](http://code.google.com/p/linqtoexcel/)，但这对你正在做的事情可能有点过头了。

话虽**如此，真正的问题是您需要一种智能方法将电子表格中的值映射到网页中的字段**。这将是一个棘手的问题。

# c# - 使用 C# 的 webbrowser 时如何找到鼠标的位置？

> ID：12101886
> 
> 赞同：0
> 
> 时间：2012-08-24T00:44:02.693
> 
> 标签：c#, winforms, browser, position, mouse

我正在尝试使用 C# Win Forms 中的 WebBrowser 进行一些试验，当我注意到由于某种原因我无法访问 MousePosition 值时，我几乎完成了。我环顾四周，我了解到该功能在 WebBrowser 组件中不可用......我的问题是......有没有办法通过底层表单来获取鼠标的位置？还是我需要完全以另一种方式来做，还是根本不可能？

如果我能以某种方式获得这些值，我的问题就会得到解决，这样我就可以做一些事情：

```
textbox1.Text = MousePosition.X + ":" + MousePosition.Y; 
```

从那时起，我可以看到我的鼠标在哪里，并开始尝试各种可能性。希望你明白我想要什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:02:14.850

您必须使用 Javascript 才能拉动鼠标位置。如果您想将该信息发送到服务器，您可以通过 Ajax 或表单发布。

以下是有关使用 AJAX 发送数据的一些信息：[http ://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-例子.aspx](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)

# html - 如何在不使用任何框架的情况下输入输入后自动验证，只需简单的注册表单代码？

> ID：12101887
> 
> 赞同：-1
> 
> 时间：2012-08-24T00:44:04.577
> 
> 标签：html, css, validation, wamp

我想知道如何在不使用任何框架或复杂代码的情况下在输入后验证输入，因为这仅适用于我的注册表单？

就像我输入电子邮件后的某些网站一样，它们会自动验证，例如电子邮件“已使用”或电子邮件“有效”

我的前端使用 HTML 和 CSS，后端使用 PHP 和 WAMP。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:48:55.607

也许看看[jQuery Validation](http://docs.jquery.com/Plugins/Validation)。它实际上是非常简单的代码来实现，所以希望它正是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:49:02.863

最简单的方法是使用 Javscript 来验证您的字段。更好的方法是将数据发布到服务器上的 PHP 脚本。这可以使用 javascript 和文本字段事件（如 onblur）来完成。因此，当用户在您的文本字段中输入完文本后，您将数据发布到您的服务器。然后，PHP 脚本可以通过检查数据库或它需要做的任何事情来验证它。然后，您可以向您的 javascript 返回响应，指示成功或失败。查找 AJAX 调用。使用 jQuery 可能会更好，它比原始 javascript 更容易一些。

# c# - 使用没有 resx 文件的自定义类本地化 asp.net 控件

> ID：12101888
> 
> 赞同：1
> 
> 时间：2012-08-24T00:44:08.173
> 
> 标签：c#, asp.net, localization, resx

我的测试页面中只有 1 个标签控件，称为 WebForm1.aspx。

```
<asp:Label ID="Label1" runat="server" Text="Label" 
    meta:resourcekey="Label1Resource1"></asp:Label> 
```

我想在不使用 .resx 文件但使用 meta:resourcekey 的概念的情况下对其进行本地化。

我想如何根据我的 web .aspx 页面上的可本地化控件自动生成强类型类。

这个强类型类将从数据库中读取资源值并将其缓存，而不是从 .resx 文件中读取。我现在想完全远离 .resx 文件。

但我真的很喜欢 meta:resourcekey 的概念，其中 .aspx 页面中的所有控件都会自动基于 .resx 文件进行本地化。

可能吗？

我已经阅读了互联网上的不同页面，阅读了 ResXResourceReader 和 PublicResXFileCodeGenerator 之类的内容，并阅读了其他几篇文章，但没有一篇文章解决了我在这里要解决的这个特定设计问题。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:41:06.977

Scott Guthrie 就这个主题发布了一些资源。

[使用数据库资源提供程序扩展 ASP.NET 2.0 本地化模型](http://weblogs.asp.net/scottgu/archive/2006/11/29/extending-the-asp-net-2-0-localization-model-with-a-database-resource-provider.aspx)

它已经过时了，但这些概念仍然具​​有相关性。

**编辑：**

重要链接已失效，但可以在这里找到：http: [//msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

# asp.net-mvc - 我可以在发布后编辑 Asp.net Mvc cshtml 吗？

> ID：12101892
> 
> 赞同：7
> 
> 时间：2012-08-24T00:45:06.760
> 
> 标签：asp.net-mvc

是否可以在发布后编辑 .cshtml 文件或有任何缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T00:48:45.783

是的，您可以在发布 .cshtml 文件后对其进行编辑。

是的，有缺点。

*   如果您在生产服务器上进行编辑，您将绕过 QA
*   您没有经历正确的构建周期
*   您必须将此更改集成到版本控制中

我强烈建议坚持一个循环

*   代码
*   单元测试
*   报到
*   发布/部署到 QA
*   质量检查中的测试
*   根据需要返回“代码”
*   发布/部署到 PROD
*   如果出现问题，请返回“代码”

使用支持分支和标记的版本控制系统使该循环更容易。

即使“QA”是您的开发服务器上的虚拟机并且您戴上了“QA”的帽子，我也不会跳过这一步。

# c# - 在执行数据库搜索时使用 OrderBy 查询对没有第一个字符的数字进行排序

> ID：12101895
> 
> 赞同：1
> 
> 时间：2012-08-24T00:46:14.750
> 
> 标签：c#, database, arrays, linq-to-sql, sorting

在执行数据库搜索时，如何通过字符串的值减去它的第一个字符（在我的情况下，第一个字符始终是 C 后跟数字）对列表进行排序。

我已经尝试了很多东西，但我几乎在黑暗中磕磕绊绊，我相信这里有人可以立即解决这个问题。

我的代码有效（但没有做我想要的）：

```
 List<Customer> customerlist = null;
        try
        {
            customerlist = db.Customers
                            .Where(u => (u.Cust_ID+u.Given_Name+u.Surname).Contains(searchstring))
                            .OrderBy(u => u.Cust_ID)
                            .ToList();
        } 
```

我目前的错误代码（在我看来它应该可以工作，但导致搜索总是不返回任何结果）：

```
 List<Customer> customerlist = null;
        try
        {
            customerlist = db.Customers
                            .Where(u => (u.Cust_ID+u.Given_Name+u.Surname).Contains(searchstring))
                            .OrderBy(u => Int32.Parse(u.Cust_ID.TrimStart('C')))
                            .ToList();
        } 
```

更多细节：

我的表中有一个名为 Cust_ID 的列，它以 C 开头，然后是一个不带前导零的数字，例如 C1、C2、... C43、... C999。

我允许用户执行搜索，其查询分配给 searchstring。

我已经尝试通过删除 int 解析进行调试

```
 .OrderBy(u => u.Cust_ID.TrimStart('C')) 
```

也不返回任何结果。

我在这里的原始代码仍然可以完成搜索，但不能正确排序。

```
 .OrderBy(u => u.Cust_ID) 
```

我尝试使用 Replace 而不是 TrimStart

```
 .OrderBy(u => u.Cust_ID.Remove(0, 1)) 
```

这会返回一个结果，但仍然没有排序，当我放入 Int 解析时，它会停止再次返回结果：

```
 .OrderBy(u => Int32.Parse(u.Cust_ID.Remove(0, 1))) 
```

我尝试将 int 解析切换为：

```
 .OrderBy(u => int.Parse(u.Cust_ID.Remove(0, 1))) 
```

但这没有帮助。

编辑：发现我遇到了一个异常：

```
System.NotSupportedException: LINQ to Entities does not recognize the method 'Int32 ToInt32(System.String)' method, and this method cannot be translated into a store expression.
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.DefaultTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.Convert()
       at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       at lab2.Controllers.DemoController.retrievecustomers() in [[Directory]]Controller.cs:line 52 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:04:15.537

您可以只使用[`AsEnumerable`](http://msmvps.com/blogs/jon_skeet/archive/2011/01/14/reimplementing-linq-to-objects-part-36-asenumerable.aspx)LINQ to Objects*之前* `OrderBy`切换到. 换句话说，您将在`OrderBy`客户端执行而不是让 ORM 尝试（不成功）将其映射到 SQL 的 ORDER BY。

话虽如此，在数据库中存储一个永不改变的前缀是个坏主意。它浪费空间，迫使您使用错误的数据类型（VARCHAR 而不是 INT），在 ORDER BY 中触发错误的比较并阻止 ORDER BY 使用索引（尽管您的 WHERE 似乎已经非常有效地这样做了）.. .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:03:21.380

我只会在客户端进行订购。为什么？因为它不会增加通过网络的流量，并且会给您更多的灵活性并允许您检查不可靠的值。可以说，无论如何最好在客户端上进行排序，因为它可以减少服务器负载。

```
customerlist = db.Customers
    .Where(u => (u.Cust_ID+u.Given_Name+u.Surname).Contains(searchstring))
    .AsEnumerable()  //EDIT: was ToArray()
    .OrderBy(u => Int32.Parse(u.Cust_ID.SubString(1)))
    .ToList(); 
```

请注意， AsEnumerable 会导致到该点的 linq 查询被发送到服务器，之后的一切都在客户端上完成。

作为旁注，我要补充一点，如果您不需要修改列表，那么将值存储在数组而不是列表中会更有效。

我还要补充一下，您真的想用他们的名字加入 CustID 进行搜索吗？这将导致搜索词 Bob 匹配名为 Bo Brown 的人。

编辑：我已将 ToArray 更改为 AsEnumerable，因为正如 Branko Dimitrijevic 指出的那样，这更有效。如果从其他答案中提取部分内容是不道德的，我深表歉意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:54:37.777

我对 LINQ 不太了解，但试试这个

```
.OrderBy(u => Convert.ToInt32(u.Cust_ID.Substring(1))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T00:59:09.727

我的猜测是您的数据库包含的值不是“C[0-9]+”形式并且与 int.Parse 不兼容，可能是“null”，导致您的 OrderBy 引发异常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T02:38:52.890

我同意 MikeKulls 的观点，即可以在提取数据后进行排序，但如果您*更*喜欢在服务器上进行排序，您可以填充字符串以获得整数排序的语义：

```
customerlist = db.Customers
                .Where(u => (u.Cust_ID+u.Given_Name+u.Surname).Contains(searchstring))
                .OrderBy(u => u.Cust_ID.Substring(1).PadLeft(10 /* or suitable number */, '0'))
                .ToList(); 
```

# backbone.js - 这在 Todo.js 中提到的关键字是什么？（骨干教程）

> ID：12101896
> 
> 赞同：2
> 
> 时间：2012-08-24T00:46:35.470
> 
> 标签：backbone.js

我很难理解 Backbone.js 的 Todo.js 教程中的“this”指的是什么。具体来说，在 AppView 内部：

```
initialize: function() {
this.input = this.$("#new-todo");
this.allCheckbox = this.$("#toggle-all")[0];

Todos.bind('add', this.addOne, this);
Todos.bind('reset', this.addAll, this);
Todos.bind('all', this.render, this);

this.footer = this.$('footer');
this.main = $('#main');
}, 
```

因此，当 Todos.bind('add', this.addOne, this) 被调用时，它会将视图 (this.addOne) 绑定到集合 ('add')。如果是这样，我们假设第三个参数（“this”）也引用了 AppView 对象。为什么我们需要将“this”作为第三个参数？

带注释的源代码：[http ://backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:04:26.270

`this`as 第三个参数是调用第二个参数中的函数时要设置的上下文`this`。

这听起来很混乱，所以让我试着分解一下。让我们看看这条线...

```
Todos.bind('add', this.addOne, this); 
```

如果我们改用这个...

```
Todos.bind('add', function() { this.$el.text("Hello, world!"); }); 
```

...我们根本不需要第三个参数。在这种情况下，该函数被立即调用`this`并被保留。

但是，因为我们不想内联每个函数，所以我们像这样传递对函数的引用......

```
Todos.bind('add', this.addOne, this); 
```

这与您的示例相同。当你调用一个类似的函数时`this.addOne()`，它`this`被设置为`this`它被调用的那个。

但是，当您传递引用时（不要立即调用它），它的`this`上下文会丢失，并且在调用时，它将是`window`，这不是您想要的。

为了防止这种情况，第三个参数`this`是调用函数时使用的上下文。

在内部，Backbone 将使用[`_.bind()`](http://underscorejs.org/#bind)它来绑定它。这是函数原生[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)方法的 polyfill。

# android - ViewPager 中有两个列表视图，只有一个显示

> ID：12101898
> 
> 赞同：3
> 
> 时间：2012-08-24T00:46:59.373
> 
> 标签：android, android-listview, android-viewpager

我目前有一个 ViewPager，其中包含三个片段作为页面。前两个页面显示带有自定义列表视图的片段，这些视图是使用`AsyncTask`. 但是，当应用程序运行时，只显示一个列表视图，另一个页面是空白的。（注意：我在这个项目中使用 ViewPagerIndicator）。

主要活动：

```
public class ViewPagerExample extends FragmentActivity {

private static final String[] TITLETAB = new String[] { "Latest", "New", "Misc" };
private MyAdapter mAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs);

    mAdapter = new MyAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    mIndicator.setCurrentItem(1);

}
public static class MyAdapter extends FragmentPagerAdapter {

    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {

        return ViewPagerExample.TITLETAB.length;
    }
    @Override
    public Fragment getItem(int position) {

        switch(position) {

        case 0:
            return new CustomizedListView();

        case 1:
            return new CustomizedListViewn();

        default:
            return null;

        }

    }

    @Override
    public CharSequence getPageTitle(int position) {
        return ViewPagerExample.TITLETAB[position % ViewPagerExample.TITLETAB.length].toUpperCase();
    }

     @Override
        public void destroyItem(View collection, int position, Object view) {
             ((ViewPager) collection).removeView((View) view);
        }
}} 
```

列表视图片段：

```
public class CustomizedListView extends Fragment {
// All static variables
static final String URL = "http://url.net/booking/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;
XMLParser parser = new XMLParser();

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new getFeed().execute();

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 

{
    View thisfragment1 = inflater.inflate(R.layout.main, container, false);

    return thisfragment1;
}

private class getFeed extends AsyncTask<Void, Void, Document> {
    @Override
    protected Document doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        return doc;
    }

    @Override
    protected void onPostExecute(Document doc) {

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)getActivity().findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(getActivity(), songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

            }
        }); 
    }
}} 
```

第二个片段与上面完全相同，只是 RSS 提要的 URL 不同。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-10T02:14:12.880

`list.notifyDataSetChanged();`请在两个片段中设置适配器后添加行`CustomizedListView & CustomizedListViewn`

# c++ - c++ 静态成员变量的奇怪错误

> ID：12101899
> 
> 赞同：3
> 
> 时间：2012-08-24T00:47:08.523
> 
> 标签：c++, class, static, linker

我有一个类，我试图定义几个自定义类型的静态/常量对象。头文件大致如下：

```
#ifndef SRC_TEMPCONT_HXX
#define SRC_TEMPCONT_HXX

class TC
{
public:

// ... misc stuff ...

  class Register
  {
  public:

    //... misc stuff ...

    enum Access { Read=0x1, Write=0x2, ReadWrite=0x3 };

    //constructor
    Register(uint16_t address, Access access, size_t size);

    //series of static variables
    static Register 
    Setpoint1, SetpointSafetyCheck, Temperature,
      SecurityByte, RampByte, DisplayByte, DisplayState, Model,
      CommAddress, CommBaud, CommDataType, CommDebug,
      ProgramRun,
       Input, Unit,
      SoftwareVersion,
      MaxProgram, Program;

  };

};

#endif //TEMPCONT_HXX 
```

在 cxx 文件中，我实例化如下变量：

```
TC::Register TC::Register::Setpoint1           (0x007F, ReadWrite, 2);
TC::Register TC::Register::SetpointSafetyCheck (0x0125, ReadWrite, 1);
TC::Register TC::Register::Temperature         (0x001C, Read,      2);
//etc... 
```

我的 makefile 使用以下命令编译，我认为这是正确的：

```
g++ -g -Wall -DOS_LINUX -g -lm -lz -lutil -lnsl -lpthread -lrt -Isrc -I/home/deap/ovendaq/midas/include -I/home/deap/ovendaq/midas/drivers/divers src/obj/cont_test.o src/obj/TempCont.o src/obj/TimeoutSerial.o -L/home/deap/ovendaq/midas/linux-m64/lib -lmidas -lboost_system -lboost_program_options -o bin/cont_test.exe 
```

但是对于每个变量，我都收到了这个奇怪的错误：

```
src/obj/TempCont.o:/usr/include/boost/noncopyable.hpp:24: multiple definition of `TC::Register::Setpoint1'
src/obj/cont_test.o:/home/deap/dev/OvenProject/src/cont_test.cxx:14: first defined here
src/obj/TempCont.o:/usr/include/boost/system/error_code.hpp:350: multiple definition of `TC::Register::SetpointSafetyCheck'
src/obj/cont_test.o:/home/deap/dev/OvenProject/src/cont_test.cxx:16: first defined here
src/obj/TempCont.o:/usr/include/boost/exception/exception.hpp:344: multiple definition of `TC::Register::Temperature'
src/obj/cont_test.o:/home/deap/dev/OvenProject/src/cont_test.cxx:18: first defined here
//etc... 
```

为什么它似乎认为我在 boost 库中声明变量？我已经在一个简化的程序中测试了这个完全相同的结构并且它工​​作正常，但我不知道为什么它在这里不起作用。我究竟做错了什么？

TIA

# actionscript-3 - 显示对象的 AS3 可见边界偏移不一致

> ID：12101900
> 
> 赞同：1
> 
> 时间：2012-08-24T00:47:09.853
> 
> 标签：actionscript-3

我正在使用这个功能，改编自 Plastic Sturgeon (http://plasticsturgeon.com/2010/09/as3-get-visible-bounds-of-transparent-display-object/) 来获取显示对象的可见边界。

```
public static function getVisibleBounds(source:DisplayObject):Rectangle
{
    var matrix:Matrix = source.transform.concatenatedMatrix;    
    var data:BitmapData = new BitmapData(1000, 1000,true,0x00000000);
    data.draw(source, matrix);
    var bounds:Rectangle = data.getColorBoundsRect(0xFFFFFFFF,0x000000,false);
    data.dispose();
    return bounds;
} 
```

但是，边界会从对象偏移，具体取决于舞台大小。它非常适合默认的舞台尺寸（550px×400px），但是当任一尺寸增加时，它会沿与该尺寸相反的方向移动（当 x 增加时，它会从对象向左偏移，而当 y 增加时，它从对象向下偏移。）它不会始终如一地这样做。偏移量（舞台尺寸）是非线性的，因为它对于一定范围的舞台尺寸为0，然后对于大于该范围的舞台尺寸，它会随着舞台尺寸快速上升。偏移量也因我更改舞台尺寸的内容而异，例如，如果我分阶段从 400 像素变为 1000 像素，在其间测试电影，边界偏移与我一次从 400 像素变为 1000 像素的情况不同，或没有在中间阶段测试电影。有时偏移量只随一个维度变化，而另一个维度不做任何事情。发布的文件也与测试不同。我尝试将函数放在与显示对象相同的文件中，而不是放在外部文件中，但这仍然不可靠。我想知道是否有一些修复可以可靠地为我提供显示对象的实际可见边界，无论舞台大小和所有其他内容如何。

我的计算机运行 Windows Vista Home Premium 32 位，我使用的是 Adob​​e Flash Professional CS5.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:49:40.397

这可能是一个可以通过设置一些舞台属性来解决的问题。首先尝试将舞台设置为不缩放：

```
this.stage.scaleMode = "noScale"; 
```

然后设置一些对齐规则：

```
this.stage.align = "TL"; 
```

如果这有帮助，则可能是您的位图复制遇到了缩放错误的一些问题。

# asp.net-mvc - 无法在我的 Razor 视图中使 @if 子句起作用（检查复选框选择）

> ID：12101903
> 
> 赞同：0
> 
> 时间：2012-08-24T00:47:55.067
> 
> 标签：asp.net-mvc, razor

我可以`@if`在 Razor 视图中使用子句作为单选按钮来显示 HTML：

```
@if (Model.Step.RadioButton1 == Step.Enum1.Choice1)
{
....
} 
```

但是，当这样处理一个复选框时：

```
@if (Model.Step.CheckBox1 == Step.Enum2.Choice1)
{
....
} 
```

我得到错误：

> 运算符“==”不能应用于“System.Collections.Generic.List”类型的操作数

我理解这个错误，我只是不知道如何解决它来显示我在`{ }`.

不确定是否有任何其他代码相关，但如果有帮助会发布。谢谢。

复选框代码：

```
 public enum Choices
    {
        [Display(Name = "Choice 1")]
        Choice1,
        ....
    }
    public class ChoicesSelectorAttribute : SelectorAttribute
    {
        public override IEnumerable<SelectListItem> GetItems()
        {
            return Selector.GetItemsFromEnum<Choices>();
        }
    }
    [Mandatory(ErrorMessage = "Please select at least one type")]
    [ChoicesSelector(BulkSelectionThreshold = 15)]
    public List<string> CheckBox1 { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:06:28.527

您可能想尝试以下方法：

```
@if (Model.Step.CheckBox1.Contains(Step.Enum2.Choice1))
{
....
} 
```

我不是 100% 确定数据是如何与您的业务/视图逻辑相关的，但我认为这就是您所追求的。

# iphone - Cocos2d 删除对象的定时器

> ID：12101907
> 
> 赞同：1
> 
> 时间：2012-08-24T00:48:40.020
> 
> 标签：iphone, objective-c, cocos2d-iphone

我试图在 Cocos2d 中创建一个计时器，其中一个对象在创建后 5 秒被创建和删除。有谁知道怎么做这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:09:50.143

我假设您的意思是当您说对象时您正在尝试删除 CCSprite。您设置了一个计时器来调用一个方法，该方法然后通过您在创建精灵时分配的标签号删除精灵（假设您在下面的示例中分配了标签号 10）

```
[self schedule: @selector(delete) interval:5];

-(void)delete{
       [self removeChildByTag:10 cleanup:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:40:39.697

或者，您可以像这样使用 NSTimer：

```
NSTimer * timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(removeSprite) userInfo:nil repeats:YES];

-(void)removeSprite {

 [self removeChild:spriteName cleanUp:YES];

} 
```

# excel - Excel 表查找

> ID：12101917
> 
> 赞同：3
> 
> 时间：2012-08-24T00:50:03.500
> 
> 标签：excel, excel-formula

```
 A         B  C   D   E   F   G   H   I   J   K   L   M   N   O   P
1 In Use        |1  0   0   0   0   0   0   0   0   0   0   0   0   0   0|
2 Item Value    |1  0   0   0   0   0   1   1   0   1   1   1   0   0   0|
3 Data          |3  4   5   6   7   8   9   1   2   3   4   5   6   7   8| 
```

我正在寻找一个将比较第 1 行和第 2 行的值以查看它们是否都等于 1 的 excel 函数。如果它们都是 1，我希望它返回第三行的值（对应的列谁的两个值都等于 1) 到单元格。所以在这个例子中，我正在寻找返回值 3 的函数。

达到预期结果的最佳功能是什么？我已经尝试过`AND()`这样的功能：

```
=and(B1:P1=1,B2:P2=1,B3:P3,0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:09:23.200

这会在每一列中出现吗？或者您是否正在寻找一个将它们全部汇总的单元格？如果您正在寻找一个公式来检查所有内容，这可行吗？

```
=SUMPRODUCT(B1:P1,B2:P2,B3:P3) 
```

请注意，这取决于值是 1 还是 0，并且只有一对 (1,1) 存在。

# java - 如何打开使用“ip tuntap”创建的 tun 设备

> ID：12101919
> 
> 赞同：4
> 
> 时间：2012-08-24T00:50:08.450
> 
> 标签：java, linux, networking

我正在尝试在 Linux 中打开一个 TUN 设备（希望最终在 Java 应用程序中）。由于我不想使用任何本机代码（如果可能，我想避免使用 JNI）我想通过命令行尽可能多地做。这是我正在尝试做的事情：

*   使用创建一个 TUN 接口`ip tuntap add dev tun0 mode tun`
*   设置它，并给它一个 IP 地址（使用命令很简单`ip`）
*   打开某种`/dev/tun0`文件以从网络端写入流量。

最后一步是我有点困惑的地方——我认为这可以在 Unix 上工作，因为网络适配器是文件，但我在 Linux 上，我认为我不能以这种方式访问​​ NIC。我知道这对于本机代码来说很简单（进行几次调用`ioctl`并获取文件描述符），但除非有某种方法可以从命令行执行此操作，否则它将无法正常工作。

有什么方法可以通过调用打开已经配置的`tun`接口（配置为`ip tuntap`）`open`，并开始向其写入网络端 IP 数据包（不使用`ioctl`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:01:05.917

如果您已经通过 设置它`ip tuntap`，那么您可以将其作为 java 的读/写文件打开，然后将整个以太网数据包写入其中。您可以打开它两次（FileInputStream/FileOutputStream）来读取和写入以太网数据包。

# jquery - 替换源后淡出/淡入图像

> ID：12101923
> 
> 赞同：1
> 
> 时间：2012-08-24T00:50:23.887
> 
> 标签：jquery, image, switch-statement

我已经编写了一个脚本，其中一旦单击缩略图就会加载主图像，但是当前图像只是在从一个缩略图图像单击到另一个时交换，我希望有一个更平滑的过渡。

到目前为止我的代码..

```
 $('#thumbnails ul li').click(function(){
    $('#main').fadeOut(500, function() {
        $('#main').attr('src',$(this).find('img').attr('src').replace('small/', 'large/'));
}).fadeIn(500);
return false;
}); 
```

使用上面的代码，它会顺利淡出，但是单击时我无法让下一个图像淡入。你知道这可能是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:59:14.447

用你给出的小片段来评估问题有点困难。[尝试使用.hide()](http://api.jquery.com/hide/)隐藏新图像

```
 $('#thumbnails ul li').click(function(){
    $('#main').fadeOut(500, function() {
        $('#main').attr('src',$(this).find('img').attr('src').replace('small/', 'large/')).hide();
}).fadeIn(500);
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:00:37.867

你应该把方法`$(this).find('img')...`的上下文放在外面`fadeOut`，在你的代码`this`中没有引用你想要的元素（`li`元素），试试这个：

```
$('#thumbnails ul li').click(function(){
    var src = $(this).find('img').attr('src').replace('small/', 'large/');
    $('#main').fadeOut(500, function() {
        $(this).attr('src', src);
        $(this).on('load', function(){
            $(this).fadeIn()
        })
    })
    return false;
}); 
```

# html - 是否有可能保持在顶部？

> ID：12101925
> 
> 赞同：0
> 
> 时间：2012-08-24T00:50:27.790
> 
> 标签：html

我有这张表，这是用户发帖时的样子。当在第二个 td 中输入大量内容时，第一个 td 会自然而然地做它应该做的事情，并以第二个 td 为中心。这是它的样子：

[http://puu.sh/YdaE](http://puu.sh/YdaE)

是否有可能使第一个 td 保持在顶部并且不以第二个为中心？因为它看起来有点傻，当它这样做时......

这是基本的代码：

```
<div id="feed">
    <div class="post">
         <table>
              <tr>
                   <td><img src="images/profile-pic.jpg"></td>
                   <td>
                       <div class="name">Kevin Jones</div>
                       <div class="message">Hanging out with my girlfriend, etc.</div>
                   </td>
              </tr>
          </table>
     </div>
</div> 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:54:25.950

我不确定我是否理解您的问题，但是如果您想防止第一个 td 上的图像垂直对齐，只需通过 HTML 属性指定垂直对齐，如下所示：

```
<div id="feed">
    <div class="post">
         <table>
              <tr>
                   <td valign="top"><img src="images/profile-pic.jpg"></td>
                   <td>
                       <div class="name">Kevin Jones</div>
                       <div class="message">Hanging out with my girlfriend, etc.</div>
                   </td>
              </tr>
          </table>
     </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:52:57.277

是的，使用 CSS。

```
vertical-align: top; 
```

所以你可以给你的第一个 TD 上课，然后应用上面提到的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:54:54.533

为标签添加`valign="top"`属性`td`

# javascript - 如何抓取 HTML5 网站并将其 HTML 内容转换为 PDF（使用 Python 或 Ruby 库）？

> ID：12101926
> 
> 赞同：3
> 
> 时间：2012-08-24T00:50:27.623
> 
> 标签：javascript, python, ruby, html, frameworks

我正在寻找一个引擎/解决方案/框架/gem/egg/lib/whatever 用于 Ruby 或 Python 登录网站，抓取 HTML5 内容（主要是画布上的图表），并能够将其转换为 PDF文件（或图像）。

我可以用 mechanize 编写爬虫脚本，这样我就可以登录网站并爬取数据，但是 mechanize 不理解复杂的 JavaScript + HTML5。

所以基本上我正在寻找一个 HTML5/JavaScript 解释器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:17:21.860

这个问题有点令人困惑......抱歉，在再次阅读问题后重新阅读我的答案。

你的问题有两个部分：

**1.如何爬取网站**

可以使用 Mechinize 进行爬网，但正如您所说，它不能很好地执行 Javascript。所以一种选择是使用 Capybara-webkit 或 Selenium (firefox / chrome)。

通常这用于测试，但您可以使用 Ruby 代码来驱动它来导航各个页面。

**2.如何将输出转换为PDF**

如果您需要将爬取的内容转换为 PDF，我认为没有办法做到这一点。您可以使用 Capybara-webkit 或 Selenium 截取屏幕截图（对测试有用），但将其转换为 PDF 可能只是通过一些命令行实用程序将其泵送的问题。

如果您正在寻找真正的 HTML 到 PDF 转换器（通常用于从 rails 应用程序中的视图生成报告），请使用[PDFKit](https://github.com/pdfkit/PDFKit)

基本上它是一个可以输出为 PDF 的 WebKit 浏览器。运行起来真的很简单。

# c - 解决控制台的“WinMain@16”链接错误

> ID：12101933
> 
> 赞同：0
> 
> 时间：2012-08-24T00:52:37.950
> 
> 标签：c, winapi, dll

我一直使用 Code::Blocks 中的默认模板来创建 DLL，但是当我编译时，我得到**undefined reference to 'WinMain@16' 错误**。

我用谷歌搜索了这个错误，似乎`main()`我正在使用的是 Window 应用程序而不是控制台应用程序，但是这个问题没有明确的解决方案。

现在，我是否只需替换此行

```
BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved) 
```

通过这个 int `main()`?

另外，我想坚持认为，任何替代方案都会导致最小的安全漏洞和/或最正确的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-09T06:52:57.563

前段时间我确实遇到了同样的错误，只需替换部分代码即可修复它。我在我的程序中使用了 SDL。这是主要功能：

```
int main(int argc, char** argv) 
```

我将其替换为 windows 主要功能：

```
int WinMain(int argc, char** argv) 
```

但它确实最终给出了相同的警告，但是代码运行。

# java - Java 每行读取文件行

> ID：12101939
> 
> 赞同：2
> 
> 时间：2012-08-24T00:52:58.067
> 
> 标签：java, file-io, io, bufferedreader, filereader

这是我的文件的样子：

```
IDENTIFICATION::HARD::Should We appreciate Art?::Yes
MULTIPLECHOICE::HARD::Which of the FF is not an era of Art?::Bayutism::Digitalism,Somethingism,Retardism,Bayutism
IDENTIFICATION::HARD::What is Chris Browns Greatest Hit?::Rihanna 
```

我正在阅读这样的文件

```
public void openQBankFile(){
    try{
        BufferedReader in = new BufferedReader(new FileReader(qbank.getAbsolutePath()));
        String desc;
        while((desc = in.readLine()) != null){
            qbank_cont.add(desc);
        }

        in.close();
    }catch(FileNotFoundException fnfe){
        System.out.println("Question Repository Could Not Be Found");
        return;
    }catch(IOException ioe){
        ioe.printStackTrace();
    }
} 
```

这是我获取arrayList内容的地方

```
public static void main(String[] args){
        CreateQuiz cq = new CreateQuiz(new File("./quiz/HUM101.quiz"),new File("./qbank/HUM101.qbank"));
        cq.openQBankFile();
        cq.filterQuestions(3, "HARD");
        System.out.println(cq.qbank_cont.get(0));
    } 
```

这就是我添加它的方式

```
public void filterQuestions(int numOfItems, String difficulty){
        List<String> qt_diff = new ArrayList<String>();
        for(int i = 0; i< qbank_cont.size();i++){
            qt_diff.add(qbank_cont.get(i));
        }
    } 
```

我会将它存储在一个`arrayList`. 但是当我将它存储在 arraylist 中时，它只会插入整个文本。不是每行一行。（我正在使用`arrayList.get(0)`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:14:54.723

您的问题的根源似乎是您不了解 Java 如何处理相对路径名。

这是文件 javadoc 所说的：

> 在 UNIX 系统上，通过根据当前用户目录解析相对路径名，使其成为绝对路径名。在 Microsoft Windows 系统上，通过将相对路径名解析为由路径名命名的驱动器的当前目录（如果有），从而使相对路径名成为绝对路径；如果不是，则针对当前用户目录进行解析。

“当前用户目录”是指启动应用程序时生效的当前目录。这取决于应用程序是如何启动的。例如，如果您从命令 shell 使用 启动`java`，则当前目录将是 shell 的当前目录。但是，如果您使用启动包装脚本，它可能会`cd`在启动 JVM 之前转移到其他地方。等等。

但底线是，如果你要使用相对路径，你需要有正确的当前目录。

顺便提一下，当 JVM 启动时，当前目录的绝对路径放在 System Properties 对象中。您可以阅读该属性以了解当前目录是什么，但更改该属性不会改变 File API 和朋友解析相对路径的方式。AFAIK，纯Java应用程序无法可靠地更改其自己的当前目录。

# ios - 阴影路径与 png 中的阴影

> ID：12101946
> 
> 赞同：0
> 
> 时间：2012-08-24T00:53:48.883
> 
> 标签：ios, core-graphics

从性能的角度来看，哪个更有效：使用阴影路径向视图添加阴影或在 png 中为视图背景添加阴影？视图将在屏幕周围动画，但不会改变大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:01:52.317

在 PNG 中放置阴影总是会更有效，因为这是少了一件需要计算的事情。但是，如果您将视图的图层设置为光栅化 ( `view.layer.shouldRasterize`)，那么它只会在其大小发生变化时重新计算，因此差异不会很大。

# python - Python，ascii 无法编码字节错误

> ID：12101949
> 
> 赞同：1
> 
> 时间：2012-08-24T00:54:09.040
> 
> 标签：python, mysql

嗨，我有一个从网站下载的摘要，有时它没有特殊字符，当我尝试将其存储在数据库中时它不会给我任何问题...

其他时候我收到错误，Python 无法编码字节错误等等等等……

我使用 .encode('ascii', 'ignore') 来避免这些问题，但最终这些特殊字符不会被保存......我应该使用什么来存储每个字符而不会出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:13:18.227

正如亚历克斯所提到的，您首先需要确定文件的编码方式（`response.encoding`在scrapy中）。假设 UTF-8，您只需`.encode('utf-8')`，或任何 Python[支持的其他编码](http://docs.python.org/library/codecs.html#standard-encodings)。

您还需要确保您尝试存储数据的表接受该特定编码。有关如何启用 UTF-8 存储的示例，请参阅[此问题。](https://stackoverflow.com/questions/3328968)您还可以以相同的方式使用 MySQL 支持的任何其他[字符集。](http://dev.mysql.com/doc/refman/5.0/en/charset-charsets.html)

# javascript - 第一个完成后jquery slideonlyone调用函数

> ID：12101953
> 
> 赞同：0
> 
> 时间：2012-08-24T00:54:31.727
> 
> 标签：javascript, jquery, hide, show

在第一个函数完成后，我正在寻找一些关于调用函数的帮助。一般来说，我对 jquery 还是很陌生，并且在让它工作时遇到了一些困难。

下面的代码是我现在所拥有的，目前仅适用于“slideonlyone”jquery 插件。我想做的是让slideonlyone函数像往常一样工作，然后一旦显示了div，我希望页面向下滚动（或根据位置向上滚动）到被显示的div的顶部，因为其中一些是图像，可能会尴尬地显示在页面上。

```
<script type="text/javascript">
function slideonlyone(thechosenone) {
    $('.newboxes2').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).slideDown(600);
          }
          else {
               $(this).slideUp(600);
          }
     });
}
</script> 
```

锚标记的 HTML 看起来像这样……但不确定是否真的需要。

```
<a href="javascript:slideonlyone('newboxes11');">
    <div class="project">
       <img src="image.png" />
    </div>
</a> 
```

谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:25:04.540

check this JsFiddle [Demo](http://jsfiddle.net/vvWyQ/2/) it's simple and maybe it will help you

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:17:42.197

从[**.slideDown()**](http://api.jquery.com/slideDown/#entry-examples)的第二个示例中，您将修改`slideonlyone`如下

```
function slideonlyone(thechosenone, domeafter) {
    var mdomeafter = function () {};
    if (domeafter !== undefined && typeof domeafter === 'function') mdomeafter = domeafter;
    $('.newboxes2').each(function(index) {
          if ($(this).attr("id") == thechosenone) $(this).slideDown(600, mdomeafter);
          else $(this).slideUp(600, mdomeafter);
     });
} 
```

和一些函数`domeafter`作为链接中的第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:18:59.760

我可能错误地阅读了您的问题，但是如果您希望在 slideUp 或 slideDown 动画完成后发生某些事情，那么您需要做的就是提供一个回调函数作为对 slideUp/slideDown 的调用的一部分。所以例如

```
$(this).slideDown(600, function() { 
  do something when slide down finishes
}); 
```

有关 slideUp 功能的更多信息，请参阅[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)。

# jsoncpp - C ++ JsonCPP - 从arrayValue中删除objectValue

> ID：12101955
> 
> 赞同：9
> 
> 时间：2012-08-24T00:54:41.830
> 
> 标签：jsoncpp

我现在只使用 jsonCPP 库几个月了。我试图在数组中添加和删除一个对象。我在不同平台上使用了许多不同的 JSON 库，但我发现使用 JsonCPP 非常困难。

这是Json：

```
{   "type": "Disc", 
    "media": "DVD", 
    "adapter": "DVDCodecs", 
    "transportControls" : [
    {"Action":"Left", "ActionCode" : "1a"},
    {"Action":"Right", "ActionCode" : "2a"},
    {"Action":"Up", "ActionCode" : "1b"},
    {"Action":"Down", "ActionCode" : "4c"},
    {"Action":"Center", "ActionCode" : "5e"},
    {"Action":"OK", "ActionCode" : "5a"},
    {"Action":"SubTitles", "ActionCode" : "3b"},
    {"Action":"SubTitlesLang", "ActionCode" : "7d"},
    {"Action":"Audio", "ActionCode" : "7a"},
    {"Action":"Angle", "ActionCode" : "6a"},
    {"Action":"Next", "ActionCode" : "6c"},
    {"Action":"Previous", "ActionCode" : "8b"},
    {"Action":"DVDMenu", "ActionCode" : "8c"},
    {"Action":"Search", "ActionCode" : "8d"},
    {"Action":"Region", "ActionCode" : "3a"},
    {"Action":"Display", "ActionCode" : "2e"},
    {"Action":"RootMenu", "ActionCode" : "6b"},
    {"Action":"FastForward", "ActionCode" : "81"},
    {"Action":"Rewind", "ActionCode" : "8b"},
    {"Action":"FrameForward", "ActionCode" : "8c"},
    {"Action":"Parking"},
    {"Action":"Seekable"}
    ]
} 
```

我一直在尝试在 transportControls 数组中添加和删除 objectValue。要添加一个对象，我一直在这样做：

```
Json::Value addObj;     
Json::Reader reader; 
reader.parse("{\"Action\":\"BlueButton\", \"ActionCode\" : \"9a\"}", addObj );

root["transportControls"].append( addObj ); 
```

这似乎运作良好。如果有更优雅的方式来做到这一点，我想知道。

我的问题是添加后如何删除它。我可以删除对象中的所有成员，但这实际上似乎并没有从 arrayValue 映射中删除对象。

使用 JsonCPP 从数组值中删除对象值的“最佳实践”方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:52:32.860

我终于有时间深入研究源代码，简单的答案是 -**不**。

arrayValue 对象实际上只是一个定义为 std::map 的 ObjectValue。如果对映射中的对象调用**std::map::erase()**，则会中断数组的连续序列 index_Key 。Sdt::Maps 不允许您编辑映射中的键，因此您必须将映射中的所有值对象指针向上移动一个并删除 end() 之前的最后一个条目以实际*“删除”*对象。

*这听起来像很多开销。为什么我必须把所有东西都搬上来？*……你可能会问。因为 JsonCPP 编写器类使用 map[] 索引来打印出值。如果它没有找到键（由于系列中的间隙），它会为该索引返回 nullValue。这就是您调用`root.toStyledString()`转换回字符串时看到的内容。过了一会儿，你就会到处都是这些“**空**”。从 Value 对象中，如果您**不**调用 const 版本 ( `const Value &operator[]( ArrayIndex index ) const;`)，您会将 nullValue 对象插入到数组中。解析器使用该 `Value::operator[]( ArrayIndex index )` 版本将新的 dafaultValue 对象插入到地图中，同时对您的 JSON 进行标记。

回答：**没有**。如果不更改代码以清理地图，则无法从 arrayValue 中删除对象。

更多信息： [更改 std::map 中元素的键](https://stackoverflow.com/questions/5743545/what-is-the-fastest-way-to-change-a-key-of-an-element-inside-stdmap)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-15T16:27:48.817

有 now [`removeIndex()`](http://open-source-parsers.github.io/jsoncpp-docs/doxygen/class_json_1_1_value.html)，但正如 tommygr 所说，在当前实现中这是一项昂贵的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T11:29:19.543

```
Json::Value new_items;
int c = 0;
for(int i = 0; i < items.size(); i++)
{
    if(items[i] != selected_item)
    {
        new_items[c] = items[i];
        c++;
    }
}
items = new_items; 
```

# python - 如何跟踪类实例？

> ID：12101958
> 
> 赞同：28
> 
> 时间：2012-08-24T00:55:21.437
> 
> 标签：python, class, dictionary, self, instances

在程序快结束时，我希望将类的所有实例中的特定变量加载到字典中。

例如：

```
class Foo():
    __init__(self):
    x = {}

foo1 = Foo()
foo2 = Foo()
foo...etc. 
```

假设实例的数量会有所不同，我希望将 Foo() 的每个实例的 x dict 加载到新的 dict 中。我该怎么做？

我在 SO 中看到的示例假设一个已经有实例列表。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-24T01:30:10.633

跟踪实例的一种方法是使用类变量：

```
class A(object):
    instances = []

    def __init__(self, foo):
        self.foo = foo
        A.instances.append(self) 
```

在程序结束时，您可以像这样创建您的 dict：

```
foo_vars = {id(instance): instance.foo for instance in A.instances} 
```

只有一个列表：

```
>>> a = A(1)
>>> b = A(2)
>>> A.instances
[<__main__.A object at 0x1004d44d0>, <__main__.A object at 0x1004d4510>]
>>> id(A.instances)
4299683456
>>> id(a.instances)
4299683456    
>>> id(b.instances)
4299683456 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-24T03:03:44.987

@JoelCornett 的回答完美地涵盖了基础知识。这是一个稍微复杂的版本，可能有助于解决一些微妙的问题。

如果您希望能够访问给定类的所有“实时”实例，请将以下子类化（或在您自己的基类中包含等效代码）：

```
from weakref import WeakSet

class base(object):
    def __new__(cls, *args, **kwargs):
        instance = object.__new__(cls, *args, **kwargs)
        if "instances" not in cls.__dict__:
            cls.instances = WeakSet()
        cls.instances.add(instance)
        return instance 
```

这解决了@JoelCornett 提出的更简单实现的两个可能问题：

1.  每个子类都`base`将分别跟踪自己的实例。您不会在父类的实例列表中获得子类实例，并且一个子类永远不会偶然发现兄弟子类的实例。这可能是不可取的，具体取决于您的用例，但将这些集合重新合并在一起可能比将它们分开更容易。

2.  该`instances`集合使用对类实例的弱引用，因此如果您`del`或将所有其他引用重新分配给代码中其他地方的实例，簿记代码将不会阻止它被垃圾收集。同样，这对于某些用例可能并不理想，但如果您真的希望每个实例永远存在，那么使用常规集合（或列表）而不是弱集很容易。

一些方便的测试输出（`instances`集合总是被传递给`list`只是因为它们不能很好地打印出来）：

```
>>> b = base()
>>> list(base.instances)
[<__main__.base object at 0x00000000026067F0>]
>>> class foo(base):
...     pass
... 
>>> f = foo()
>>> list(foo.instances)
[<__main__.foo object at 0x0000000002606898>]
>>> list(base.instances)
[<__main__.base object at 0x00000000026067F0>]
>>> del f
>>> list(foo.instances)
[] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-19T19:46:51.890

您可能希望对您的实例使用弱引用。否则，该类可能最终会跟踪本应删除的实例。weakref.WeakSet 将自动从其集合中删除任何死实例。

跟踪实例的一种方法是使用类变量：

```
import weakref
class A(object):
    instances = weakref.WeakSet()

    def __init__(self, foo):
        self.foo = foo
        A.instances.add(self)

    @classmethod
    def get_instances(cls):
        return list(A.instances) #Returns list of all current instances 
```

在程序结束时，您可以像这样创建您的 dict：

foo_vars = {id(instance): instance.foo for instance in A.instances} 只有一个列表：

```
>>> a = A(1)
>>> b = A(2)
>>> A.get_instances()
[<inst.A object at 0x100587290>, <inst.A object at 0x100587250>]
>>> id(A.instances)
4299861712
>>> id(a.instances)
4299861712
>>> id(b.instances)
4299861712
>>> a = A(3) #original a will be dereferenced and replaced with new instance
>>> A.get_instances()
[<inst.A object at 0x100587290>, <inst.A object at 0x1005872d0>] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-18T18:35:22.140

您还可以使用[元类](https://stackoverflow.com/questions/100003/what-are-metaclasses-in-python)解决此问题：

1.  创建类时（`__init__`元类的方法），添加一个新的实例注册表
2.  当创建此类的新实例时（`__call__`元类的方法），将其添加到实例注册表中。

这种方法的优点是每个类都有一个注册表——即使不存在实例。相反，当覆盖时`__new__`（如[Blckknght 的回答](https://stackoverflow.com/a/12102666/5703449)），注册表是在创建第一个实例时添加的。

```
class MetaInstanceRegistry(type):
    """Metaclass providing an instance registry"""

    def __init__(cls, name, bases, attrs):
        # Create class
        super(MetaInstanceRegistry, cls).__init__(name, bases, attrs)

        # Initialize fresh instance storage
        cls._instances = weakref.WeakSet()

    def __call__(cls, *args, **kwargs):
        # Create instance (calls __init__ and __new__ methods)
        inst = super(MetaInstanceRegistry, cls).__call__(*args, **kwargs)

        # Store weak reference to instance. WeakSet will automatically remove
        # references to objects that have been garbage collected
        cls._instances.add(inst)

        return inst

    def _get_instances(cls, recursive=False):
        """Get all instances of this class in the registry. If recursive=True
        search subclasses recursively"""
        instances = list(cls._instances)
        if recursive:
            for Child in cls.__subclasses__():
                instances += Child._get_instances(recursive=recursive)

        # Remove duplicates from multiple inheritance.
        return list(set(instances)) 
```

用法：创建一个注册表并将其子类化。

```
class Registry(object):
    __metaclass__ = MetaInstanceRegistry

class Base(Registry):
    def __init__(self, x):
        self.x = x

class A(Base):
    pass

class B(Base):
    pass

class C(B):
    pass

a = A(x=1)
a2 = A(2)
b = B(x=3)
c = C(4)

for cls in [Base, A, B, C]:
    print cls.__name__
    print cls._get_instances()
    print cls._get_instances(recursive=True)
    print

del c
print C._get_instances() 
```

如果使用`abc`模块中的抽象基类，只需子类`abc.ABCMeta`以避免元类冲突：

```
from abc import ABCMeta, abstractmethod

class ABCMetaInstanceRegistry(MetaInstanceRegistry, ABCMeta):
    pass

class ABCRegistry(object):
    __metaclass__ = ABCMetaInstanceRegistry

class ABCBase(ABCRegistry):
    __metaclass__ = ABCMeta

    @abstractmethod
    def f(self):
        pass

class E(ABCBase):
    def __init__(self, x):
        self.x = x

    def f(self):
        return self.x

e = E(x=5)
print E._get_instances() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T07:32:05.187

快速低级黑客和调试的另一个选择是过滤返回的对象列表`gc.get_objects()`并以这种方式动态生成字典。在 CPython 中，该函数将返回一个（通常是巨大的）垃圾收集器所知道的*所有内容的列表，因此它肯定会包含任何特定用户定义类的所有实例。*

请注意，这有点深入解释器的内部结构，因此它可能会也可能不会与 Jython、PyPy、IronPython 等类似的东西一起工作（或工作得很好）。我没有检查过。无论如何，它也可能真的很慢。谨慎使用/YMMV/等。

但是，我想有些遇到这个问题的人最终可能想要一次性做这种事情，以弄清楚某些行为异常的代码片段的运行时状态发生了什么。这种方法的好处是根本不影响实例或其构造，如果有问题的代码来自第三方库或其他东西，这可能很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-05T21:15:29.213

这是与 Blckknght 类似的方法，它也适用于子类。如果有人最终来到这里，我想这可能会很有趣。一个区别是，如果 B 是 A 的子类，而 b 是 B 的实例，则 b 将同时出现在 A.instances 和 B.instances 中。正如 Blckknght 所说，这取决于用例。

```
from weakref import WeakSet

class RegisterInstancesMixin:
    instances = WeakSet()

    def __new__(cls, *args, **kargs):
        o = object.__new__(cls, *args, **kargs)
        cls._register_instance(o)
        return o

    @classmethod
    def print_instances(cls):
        for instance in cls.instances:
            print(instance)

    @classmethod
    def _register_instance(cls, instance):
        cls.instances.add(instance)
        for b in cls.__bases__:
            if issubclass(b, RegisterInstancesMixin):
                b._register_instance(instance)

    def __init_subclass__(cls):
        cls.instances = WeakSet()

class Animal(RegisterInstancesMixin):
    pass

class Mammal(Animal):
    pass

class Human(Mammal):
    pass

class Dog(Mammal):
    pass

alice = Human()
bob = Human()
cannelle = Dog()
Animal.print_instances()
Mammal.print_instances()
Human.print_instances() 
```

`Animal.print_instances()`将打印三个对象，而`Human.print_instances()`将打印两个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T03:01:18.593

使用@Joel Cornett 的答案，我想出了以下内容，这似乎可行。即我能够总计对象变量。

```
import os

os.system("clear")

class Foo():
    instances = []
    def __init__(self):
        Foo.instances.append(self)
        self.x = 5

class Bar():
    def __init__(self):
        pass

    def testy(self):
        self.foo1 = Foo()
        self.foo2 = Foo()
        self.foo3 = Foo()

foo = Foo()
print Foo.instances
bar = Bar()
bar.testy()
print Foo.instances

x_tot = 0
for inst in Foo.instances:
    x_tot += inst.x
    print x_tot 
```

输出：

```
[<__main__.Foo instance at 0x108e334d0>]
[<__main__.Foo instance at 0x108e334d0>, <__main__.Foo instance at 0x108e33560>, <__main__.Foo instance at 0x108e335a8>, <__main__.Foo instance at 0x108e335f0>]
5
10
15
20 
```

# android - Android 应用许可检查

> ID：12101967
> 
> 赞同：0
> 
> 时间：2012-08-24T00:56:36.903
> 
> 标签：android, android-lvl

我目前在 Android 市场上有一个应用程序。我正在更新应用程序以添加 Android 许可。我基本上从 Google Android 中获取了示例并将其添加到我的应用程序中。我将公钥更改为我的。我将我的电子邮件地址添加到许可排除列表中。我在安卓设备上运行我的应用程序，它说该应用程序没有获得许可。

我该如何解决？

有人遇到过关于 android 应用程序许可的任何好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:33:54.420

也许您对发布者帐户的许可是错误的。添加您的电子邮件帐户测试并检查测试响应菜单。更改为许可。

# c# - 如何获取 DeleteUrlCacheEntry() 错误代码？（或有关为什么特定删除不起作用的其他信息）？

> ID：12101969
> 
> 赞同：2
> 
> 时间：2012-08-24T00:56:58.587
> 
> 标签：c#, vb.net, winapi, vb6, browser-cache

基本上，当我调用 DeleteUrlCacheEntry（它是 Wininet.dll API 的一部分）时，我要么返回数字 1（表示删除成功），要么返回数字 0（表示删除无效）。

我的问题是，我怎样才能找出为什么删除不起作用？（即返回 0 时）。我听说 C++ 中有一个 GetLastError() 函数，但是我使用的是 VB6，显然 VB6 中的 GetLastError 等效项是 Err.LastDllError 属性。

在 DeleteUrlCacheEntry 尝试删除失败（返回 0）后，我调用/查询 Err.LastDllError 并且它总是返回 0 - 无论如何。即使 DeleteUrlCacheEntry 返回 0（删除无效），即使它返回 1（删除有效），它也会返回 0。我还尽快对 Err.LastDllError 进行调用/查询（如在 DeleteUrlCacheEntry 调用之后）。

我真的很困惑，因为我什至没有收到运行时错误或任何典型异常（或任何异常）。我没有 On Error Resume Next 来忽略应用程序中任何地方的异常，因此向我报告错误的所有方法都是可用的，但我终其一生都无法弄清楚为什么特定的 DeleteUrlCacheEntry() 尝试会失败并返回 0 （我似乎没有办法找出答案）。

所以，我的问题是，如何从 DeleteUrlCacheEntry() 函数（位于 wininet.dll API 中）获取扩展错误信息？

如果您想了解有关我从 DeleteUrlCacheEntry() 函数中查找扩展错误信息的原因的更多信息，我还有另一个问题详细说明了这一点（以及在删除时有效和无效的缓存项的实际示例）尝试）：[https ://stackoverflow.com/questions/12096546/deleteurlcacheentry-function-of-wininet-api-not-deleting-some-internet-explo](https://stackoverflow.com/questions/12096546/deleteurlcacheentry-function-of-wininet-api-not-deleting-some-internet-explo)

另外，补充一下，我使用的是 VB6——但原则上它在大多数语言中应该是相同的，因为它是一个 API 调用。这是我在 VB6 中的声明：

> 公开声明函数 DeleteUrlCacheEntry Lib "WININET" Alias "DeleteUrlCacheEntryA" (ByVal lpszUrlName As String) 只要

另外，我这样称呼它：

> 将 lReturnValue 变暗
> 
> 将 cacheFileString 调暗为字符串
> 
> ' GetStrFromPtrA 将 Pointer (Long) 转换为 String。cacheFileString 是 lpszSourceUrlName 的实际文本/字符串，从 Pointer (Long) 变为 String（人类可读的缓存文件名/字符串）。此外，cacheFileString 是从循环中的 FindFirst/NextEntry 函数中检索的，因此不能错误地格式化或任何其他内容，因为它在删除大多数其他项目时也有效。
> 
> cacheFileString = GetStrFromPtrA(icei.lpszSourceUrlName)
> 
> lReturnValue = DeleteUrlCacheEntry(cacheFileString)

如果删除不起作用，lReturnValue 最终为 0，当删除起作用时，lReturnValue 最终为 1，仅此而已。此外，`Err.LastDllError`始终返回 0。

感谢您期待的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:25:01.410

This might not be directly relevant, but it seems to me that you are doing an unecessary string copy here. Why not directly use the string pointer you already have:

```
Public Declare Function DeleteUrlCacheEntry Lib "WININET" Alias "DeleteUrlCacheEntryA" (ByVal lpszUrlName As Long) As Long

Dim lReturnValue As Long

lReturnValue = DeleteUrlCacheEntry(icei.lpszSourceUrlName) 
```

(This is assuming that icei.lpszSourceUrlName is a pointer to an ANSI string.)

Also, you do realise that Err.LastDllError is overwritten everytime a command called via a VB declare or type library declare with usesgetlasterror = true? So, for instance, if I declared APIFunc1() and APIFunc2(), and then called them like this;

```
nRet = APIFunc1(APIFunc2) 
```

... then LastDllError would reflect only APIFunc1().

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:25:28.637

If `Err.LastDllError` is returning 0 than either `GetLastError()` really is returning 0, which is unlikely, or VB is not calling `GetLastError()`, which is more likely. Such as if the VB declaration of `DeleteUrlCacheEntry()` is wrong, like it is not setting the `DllImport.SetLastError` property to true under .NET PInvoke.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T01:11:41.543

就我个人而言，我会在调用 DeleteUrlCacheEntry() 时设置一个断点，然后逐步观察调用堆栈中的值是什么。

除此之外，没有代码片段就没什么好说的了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-13T19:42:50.923

这有点过时了......但我对这个主题很感兴趣，所以我想我会分享我有限的知识。

对我来说，当我使用错误的 URL 调用*DeleteUrlCacheEntry*时，我收到一个错误并且*Err.LastDllError*设置为 2 ！

# database - Soccer 和 CouchDb (noob pining for sql and joins)

> ID：12101977
> 
> 赞同：0
> 
> 时间：2012-08-24T00:59:23.437
> 
> 标签：database, node.js, nosql, couchdb, nosql-aggregation

这让我一直睡到凌晨。我想要一个数据库来跟踪足球比赛。每场比赛有两支球队，主客场。每支球队都可以是多场比赛的主队或客队。

我有一个数据库和两种文档类型，“匹配”（包含：home：teamId 和 away：teamId）和团队（包含：teamId、teamName 等）。

我已经设法编写了一个工作视图，但这意味着向每个团队添加它所参与的每场比赛的 id，这没有多大逻辑意义 - 这是一个 hack。

关于如何编写此视图的任何想法？我几乎想把海绵扔进去，改用 postgres。

编辑：我想要的是获得主队和客队的球队信息，给定一场比赛的 id。打两个电话很容易，但我不想打两个电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:35:08.543

`map`只需为每个匹配发出两个值，如下所示：

```
function (doc) {
  if (!doc.home || !doc.away) return;
  emit([doc._id, "home"], { _id: doc.home });
  emit([doc._id, "away"], { _id: doc.away });
} 
```

在查询视图以获取匹配 ID`MATCHID`后：

```
curl 'http://localhost:5984/yourdb/_design/yourpp/_view/yourview?startkey=\["MATCHID"\]&endkey=\["MATCHID",\{\}\]&include_docs=true' 
```

您应该能够在`doc`结果列表 ( `row`) 中的字段中获取两个团队的文档，可能如下所示：

```
{"total_rows":2,"offset":0,"rows":[
{"id":"MATCHID","key":["MATCHID","home"],"value":{"_id":"first_team_id"},"doc":{...full doc of the first team...}},
{"id":"MATCHID","key":["MATCHID","away"],"value":{"_id":"second_team_id"},"doc":{...full doc of the second team...}}
]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:59:21.233

查看 CouchDB 书籍： http: [//guide.couchdb.org/editions/1/en/why.html](http://guide.couchdb.org/editions/1/en/why.html)

它是免费的，包括对初学者的回答:)

如果你喜欢它，可以考虑购买它。即使认为 Chris 和 Jan 太棒了，他们只是将他们的书免费放在那里，你仍然应该支持他们为他们的书所做的伟大工作。

# c# - 用于显示大图像的本机 WPF 与自定义 DirectX

> ID：12101979
> 
> 赞同：6
> 
> 时间：2012-08-24T00:59:28.540
> 
> 标签：c#, wpf, directx

我需要加快我的图像查看器，并想知道我是否应该考虑创建自己的 DirectX 控件来这样做。

我的图像查看器显示医学图像。它们可以很大。说到乳房 X 光检查，我们说的是 55mb。像素数据为 16 位灰度，存储在 ushort 数组中。在不深入细节的情况下，我当前的方法是将像素数据加载到 ImageSource 中，并使用 WPF Image 控件。

我从来没有用 DirectX 做过任何事情。值得深入研究吗？它会比原生 WPF 更快吗？如果是，那么显着？或者，我应该忘记 DirectX 并研究可以改进当前方法的领域吗？

在有人这么说之前，我知道 WPF 利用 DirectX。我想知道如果删除 WPF 层并自己编写 DirectX 会提高性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:46:15.297

我有一些绘制数 GB 卫星和图表图像的经验。使用大约 55MB 的图像应该可以正常工作，即使没有尝试过多地优化它。您还没有真正提供足够的详细信息来推荐一种替代方案，因此我将就利弊发表我的看法。

使用 2D Windows API 将是最容易实现的，并且如果您不需要旋转并且只想显示图像以及缩放和平移，则应该总是足够快。如果您将其视为一张大图像，如果您使用半色调进行绘制以提供漂亮的平滑图像，则当您缩小时性能将不会那么好。这是因为它每次绘制时都必须有效地读取所有 55mb 的图像。

为了解决这个性能问题，您可以制作多个位图，有效地对图像进行 mip 映射。当您缩小时，您可以选择最接近您尝试绘制的分辨率的降低分辨率的图像。如果您不熟悉 mip-mapping，这里有一个 Wikipedia 链接：

[http://en.wikipedia.org/wiki/Mipmap](http://en.wikipedia.org/wiki/Mipmap)

使用 DirectX 实现它的难度将增加 10 倍。不同的图形硬件具有不同的最大纹理尺寸。很可能您需要将图像分解为多个纹理以进行绘制，并且您还必须跟踪渲染状态、查看矩阵等。

但是，如果您确实使用 DirectX，您可以实现大量实时照片调整您可以通过简单地调整视图矩阵来进行实时旋转。您可以在像素着色器中轻松进行实时对比度、亮度、伽玛和锐度。

我可能会建议另外两个 API。如果您愿意将自己限制在 Vista 或更高版本，那么 Direct2D 会比 Direct3D 简单一些。此外，如果您需要在非 Windows 平台上实现它，我建议您改用 OpenGL。我目前的项目是在 Direct3D 中，因为几年前当我们开始它时，OpenGL 落后了，而且我没有预见到 Android 设备的普及。我现在希望我们改用 OpenGL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:50:51.410

尝试[分析](http://msdn.microsoft.com/en-us/library/aa969767.aspx)以查看 WPF 将时间花在哪里。您是否以原始分辨率显示图像？如果不是，那么进行一些预处理并创建 1/2 分辨率版本可能是值得的。

# objective-c - Xcode 社交媒体分享按钮

> ID：12101980
> 
> 赞同：0
> 
> 时间：2012-08-24T00:59:47.460
> 
> 标签：objective-c, xcode, twitter, social-networking, facebook-social-plugins

是否有任何 Xcode 的内置 api/代码允许应用程序检测 iphone/ipad/ipod touch 中安装的其他社交媒体应用程序以填充共享功能？

听说安卓有这样的能力，iOS也有吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:20:57.290

Twitter 集成内置于 iOS 5，请查看此链接[http://developer.apple.com/library/ios/documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)

对于 Facebook，您需要使用 Facebook SDK，请在此处查看[http://developers.facebook.com/docs/reference/iossdk/](http://developers.facebook.com/docs/reference/iossdk/)

或者你可以试试 ShareKit... [http://getsharekit.com/](http://getsharekit.com/)

或 GetSocialize... [http://www.GetSocialize.com/](http://www.GetSocialize.com/)

这两者都提供了功能下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T10:52:07.173

```
- (IBAction) shareHasTapped: (id)sender {

    NSString *texttoshare = @"text to share";

    //  UIImage *imagetoshare = [UIImage imageNamed:@"beck.png"];

    NSArray *activityItems = @[texttoshare];

    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

    activityVC.excludedActivityTypes =@[UIActivityTypeCopyToPasteboard, UIActivityTypePostToWeibo, UIActivityTypePostToTwitter, UIActivityTypePostToWeibo];

[self presentViewController:activityVC animated:TRUE completion:nil]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T09:10:57.153

使用 UIActivityViewController 共享图像社交网络：

-（无效）共享图像{

```
NSArray *objectsToShare = @[_s_image];
UIActivityViewController * avc = [[UIActivityViewController alloc] initWithActivityItems:objectsToShare applicationActivities:nil];

avc.excludedActivityTypes=@[UIActivityTypePostToTwitter];
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    [self presentViewController:avc animated:YES completion:nil];
}
else
{
    UIPopoverController *popup = [[UIPopoverController alloc] initWithContentViewController:avc];
    [popup presentPopoverFromRect:CGRectMake(self.view.frame.size.width/2, self.view.frame.size.height/4, 0, 0)inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

}

# spring-mvc - Spring MVC 中的拦截器可以调用业务层吗？

> ID：12101981
> 
> 赞同：0
> 
> 时间：2012-08-24T01:00:00.187
> 
> 标签：spring-mvc, interceptor

我正在为当前项目使用 Spring MVC 3，我想确保拦截器是否可以调用业务层的方法来从设计的角度获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:07:39.863

是的，它可以在春季技术上访问，经典案例可以是您[问题中所问的菜单处理程序](https://stackoverflow.com/questions/12102153/what-is-the-idea-for-creating-a-menu-system-in-spring-mvc-application)

# ios - ECGraph 在设备上不工作，但在模拟器上工作

> ID：12101989
> 
> 赞同：1
> 
> 时间：2012-08-24T01:01:26.503
> 
> 标签：ios, xcode, api, graph, error-handling

ECGraph 有什么理由可以在模拟器上运行良好，但是当我在我的设备上运行它时却给我这个错误：

```
 2012-08-24 01:57:18.543 Portfolio[3538:907] *** -[__NSCFCalendar                 components:fromDate:toDate:options:]: fromDate cannot be nil
 I mean really, what do you think that operation is supposed to mean with a nil fromDate?
 An exception has been avoided for now.
 A few of these errors are going to be reported with this complaint, then further      violations will simply silently do whatever random thing results from the nil.
 Here is the backtrace where this occurred this time (some frames may be missing due to      compiler optimizations):
 (
0   CoreFoundation                      0x37a1d78f <redacted> + 86
1   Portfolio                           0x000a0d1f -[ECGraph(Private) getDaysFrom:To:] + 202
2   Portfolio                           0x000a1577 -[ECGraph(Private) getXDaysFromLines:minDate:] + 502
3   Portfolio                           0x000a2623 -[ECGraph drawCurveWithLines:lineWidth:color:] + 978
4   Portfolio                           0x000a716f -[GraphView drawRect:] + 2682
5   UIKit                               0x38b1811d <redacted> + 364
6   QuartzCore                          0x39468035 <redacted> + 112
7   QuartzCore                          0x39467771 <redacted> + 1808
8   QuartzCore                          0x39466f45 <redacted> + 980
9   QuartzCore                          0x39466a7b <redacted> + 202
10  QuartzCore                          0x3953a9f5 <redacted> + 24
11  QuartzCore                          0x394663d3 <redacted> + 238
12  QuartzCore                          0x39466119 <redacted> + 316
13  QuartzCore                          0x3945dfe1 <redacted> + 60
14  CoreFoundation                      0x37a4f18d <redacted> + 20
15  CoreFoundation                      0x37a4d3f9 <redacted> + 276
16  CoreFoundation                      0x37a4d74f <redacted> + 742
17  CoreFoundation                      0x379cbc1d CFRunLoopRunSpecific + 356
18  CoreFoundation                      0x379cbaa9 CFRunLoopRunInMode + 104
19  GraphicsServices                    0x3a88f33b GSEventRunModal + 74
20  UIKit                               0x38b35535 UIApplicationMain + 1120
21  Portfolio                           0x00094e7d main + 152
22  Portfolio                           0x00094de0 start + 40 
```

)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:26:26.580

您正在尝试从 nil NSDate 中获取 NSDateComponents ：

```
NSCalendar* gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate* fromDate = nil;
NSDate* toDate = [NSDate date];
unsigned int components = NSYearCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit | NSWeekCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit;
NSDateComponents* dateComponents = [gregorian components:uintFlags fromDate:fromDate  toDate:toDate  options:0]; 
```

可能一个简单的检查会很有用：

```
NSDate* fromDate = nil;
NSDate* toDate = [NSDate date];

NSDateComponents* dateComponents = nil;

if(fromDate != nil)
{
 NSCalendar* gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
 unsigned int components = NSYearCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit | NSWeekCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit;
 dateComponents = [gregorian components:uintFlags fromDate:fromDate  toDate:toDate  options:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:10:20.000

您的设备使用的区域格式与您的模拟器不同。

如果您匹配那些 (in `Settings -> General -> International`)，那么它们应该显示相同的结果。就我而言，这样做时，它们都失败了，但是模拟器没有提供与设备相同的日志，所以我几乎错过了它。

我假设您正在使用 an`NSDateFormatter`将一些字符串日期格式化为 NSDate 。在这种情况下，您必须确保这不会取决于手机所在的区域，并将解决方案设置为始终相同，无论您身在何处。

```
[df setLocale:([[NSLocale alloc] initWithLocaleIdentifier:@"en_UK"])];
// df being the NSDateFormatter-object 
```

这告诉格式化程序使用英国标准进行格式化，这在我的情况下是必需的。输入您需要的国家代码，即`en_US`等。

性病

# android - 用于运行已开发应用程序的廉价且强大的全能平板电脑

> ID：12101995
> 
> 赞同：0
> 
> 时间：2012-08-24T01:03:33.760
> 
> 标签：android, recommendation-engine

这个问题不适合[https://android.stackexchange.com/](https://android.stackexchange.com/)。

您会推荐哪种低预算（< 200 欧元）平板设备作为功能方面的最佳折衷方案和最强大的设备？这是为了运行定制的按需创建软件（个人应用程序、商业应用程序......）。我在欧洲。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:45:57.383

Nexus 7 我猜是这个价格下最好的。它有 4 核不错的内存，我认为您永远不需要 Dropbox/GDrive/Box(50GB)/Skydrive 超过 25 GB 的存储空间。它有 4.1 果冻豆和