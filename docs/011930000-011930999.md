# StackOverflow 问答 11930000-11930999

# java - JMS 单个会话可以有多个 MessageProducer 吗？

> ID：11930000
> 
> 赞同：0
> 
> 时间：2012-08-13T07:39:09.273
> 
> 标签：java, jms

JMS 单个会话可以有多个`MessageProducer`并使用每个`MessageProducer`并行吗？

例如：

```
p1= Session.createProducer(Queue1);
p2= Session.createProducer(Queue2);
thread1() {
p1.send();
}
thread2() {
p2.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:47:52.507

Session、MessageProducer 和 MessageConsumer 不是线程安全的。建议为每个线程设置单独的 Session。

您正在尝试在各种线程中使用相同的 Session 对象。如果无法避免（想不到这样的用例），则需要自己确保线程安全（通过标准的 java 同步机制）。

Connection 和 ConnectionFactory 是线程安全的。

# c++ - 我可以用什么代替 , 因为它在 gloox 1.0 中被移除了

> ID：11930008
> 
> 赞同：1
> 
> 时间：2012-08-13T07:39:43.303
> 
> 标签：c++, file-transfer, gloox

我需要发送base64编码的二进制数据。我正在使用 C++ gloox 库，所以我可以使用 `#include <gloox/base64.h>`fo 编码。一开始我打算用它`<gloox/inbandbytestreammanager.h>`来发送和接收数据，但现在它在 gloox 中被删除了。我可以用什么来代替它，我该怎么做。我需要发送二进制数据并使用数据处理程序之类的东西接收它，并使用 registerDataHandler 激活 DataHanler。任何人都可以帮助找到如何以及如何做的例子，拜托。我真的需要它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:16:08.453

InBandBytestreamManager 类的功能已在 1.0 中与基于 SI 的文件传输 (SIProfileFT) 合并

您可以使用此类 - [http://camaya.net/api/gloox/classgloox_1_1SIProfileFT.html](http://camaya.net/api/gloox/classgloox_1_1SIProfileFT.html)

# jquery - 利用现有的 jquery 对象而不是创建一个新的

> ID：11930012
> 
> 赞同：0
> 
> 时间：2012-08-13T07:40:07.607
> 
> 标签：jquery, css-selectors, allocation

```
source = $("div");
b = source.filter("div");

console.log (source==b); 
```

将返回“假”。

有没有办法让它不分配新的 jquery 对象，而是修改现有对象的内容？

我有一个场景，其中其他对象维护对“源”jquery 对象的引用，并且想要检查其内容是否已更改。

如果这是不可能的，我想知道“挂钩”销毁和重新分配的最佳方法是什么，以便在释放旧对象后，可以告诉其他 jquery 对象新的替换“源”对象是什么。

想知道是否有针对此的 jquery 扩展...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:41:53.800

几乎所有改变 DOM 元素集的 jQuery 方法都会返回一个新的 jQuery 对象——它们不会修改当前的 jQuery 对象。出于各种原因，这就是 jQuery 的架构方式。

可以从新的 jQuery 对象中获取元素并将它们放回旧的 jQuery 对象中，并在更改元素时触发该对象上的方法，从而维护以前的引用并通知它们发生更改，但是你' d 必须编写代码来做到这一点。

例如，尽管这通常会破坏 jQuery 设计的范式，并且类似的东西`.end()`将不再正常工作，但您可以创建一个新方法来设置现有 jQuery 对象的内容，如下所示：

```
​jQuery.fn.set = function(elems) {
    this.length = elems.length;
    for (var i = 0; i < elems.length; i++) {
        this[i] = elems[i];
    }
}​ 
```

这将允许你这样做：

```
var source = $("div");
var b = source.filter("div");
source.set(b); 
```

如果要创建此更改的通知，可以使用[jQuery 自定义事件](http://fuelyourcoding.com/jquery-custom-events-they-will-rock-your-world/)来监视和通知更改。或者，您可以只向 jQuery 对象添加一个回调列表，该列表将在该 jQuery 对象`.set()`进行更改时被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:48:49.790

如果您确实需要跟踪事件、将变量绑定到源或其他对象的更改等，那么我建议您研究 MVC 框架，如backbone.js 或 knockout.js。

另请参阅：[审查的 10 大 Javascript MVC 框架](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)

# javascript - 修复 Javascript 代码以将文本中的所有 Youtube 链接转换为与 Youtube ID 一起使用

> ID：11930013
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:40:07.617
> 
> 标签：javascript, jquery, regex, parsing, youtube

> **可能重复：**
> [php regex - 在字符串中查找所有 youtube 视频 ID](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)

我正在寻找一个函数，它允许我将所有 Youtube 链接更改为带有 ID 的 Javascript 函数调用。

我将向您展示我的代码，但这是错误的...无法按我的意愿工作...：

```
function find_and_replace_youtube_links(message)
{
    return message.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g, 'play_youtube(\'$1\')');   
}

function play_youtube(youtube_id)
{
    $('#youtube_embed').html('something youtubeid something');   
} 
```

呼唤

```
 alert(find_and_replace_youtube_links('test \n\
            http://www.youtube.com/watch?v=JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1\n\
\n\
testt http://www.youtube.com/watch?v=JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1 testt\n\
\n\
testtt')); 
```

并输出

```
test 
            play_youtube('JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1')

testt play_youtube('JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1 testt')

testtt 
```

嗯……

问题在这里：

```
 play_youtube('JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1') 
```

您可以看到，它解析所有链接，而不仅仅是 id 它应该给我

```
play_youtube('JGCsyshUU'); 
```

代替

```
play_youtube('JGCsyshUU&feature=autoplay&list=sSPDBAE171ADC2D71FA&playnext=1') 
```

with 是错误的

:-(

有人在做类似的事情并具有工作功能吗？我可以适应我的要求，但需要与我的要求有共同点。

[http://www.youtube.com/watch?v=JGCsyshUU-A](http://www.youtube.com/watch?v=JGCsyshUU-A)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:50:42.360

您的正则表达式从`v`参数开始获取 URI 查询字符串的其余部分。

您想要的是仅获取`v`参数并忽略所有以下参数。

参数由`&`字符分隔，因此不要使用 匹配所有字符，而是`(.+)`尝试使用 匹配所有“非`&`字符” `([^&]+)`。

这是该函数的完整修改版本：

```
function find_and_replace_youtube_links(message)
{
    return message.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([^&]+).*/g, 'play_youtube(\'$1\')');   
} 
```

现在，如果您在文本上运行它仍然会失败，其中有任何链接只有`v`参数而没有其他链接，因为那时也没有`&`字符。我将把该案例的完整解决方案留给您作为练习（-：

# android - 自动调整 textView 和布局

> ID：11930015
> 
> 赞同：0
> 
> 时间：2012-08-13T07:40:17.057
> 
> 标签：android

我有一个自定义对话框，我在其中显示了一些结果。结果文本可以有不同的大小，并且当它在对话框中很小时有很多可用空间。如何为结果和自动调整布局自动调整 textView 的大小？

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="300dp"
        android:background="@drawable/dialog_bg"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.01"
            android:gravity="center"
            android:text="Scores"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="18sp"
            android:textStyle="italic"
            android:typeface="serif" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="80dp"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="10dp"
            android:layout_weight="0.04"
            android:background="@null"
            android:cursorVisible="false"
            android:editable="false"
            android:ems="10"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="top|left"
            android:inputType="textMultiLine|textNoSuggestions|textFilter"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="italic"
            android:typeface="serif" >

            <requestFocus />
        </EditText>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="42dp"
            android:layout_margin="10dp" >

            <Button
                android:id="@+id/ok"
                android:layout_width="70dp"
                android:layout_height="wrap_content"
                android:background="@drawable/ok"
                android:onClick="okAction" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_weight="0.99" >
            </LinearLayout>

            <Button
                android:id="@+id/share"
                android:layout_width="91dp"
                android:layout_height="wrap_content"
                android:background="@drawable/share"
                android:onClick="shareAction" />
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-08T06:05:43.893

只需将任何 TextView 替换为以下自定义类：

```
public class Text extends TextView {
    public Text(Context context, AttributeSet attrs) {
        super(context, attrs);
        float textSize=this.getTextSize();
        WindowManager wm=(WindowManager)(context.getSystemService(Context.WINDOW_SERVICE));
        Display display=wm.getDefaultDisplay();
        int width=display.getWidth();
        int height=display.getHeight();
        double diagonal=Math.sqrt(Math.pow(height,2)+Math.pow(width,2));
        double ratio=diagonal/1500.0;
        this.setTextSize((float)(ratio*textSize));
    }

} 
```

将 1500.0 替换为您正在测试/构建应用程序的设备的对角屏幕尺寸（以像素为单位）（它必须是双格式，这意味着您应该添加 .0 结尾）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:48:24.123

将线性布局的高度和宽度更改为`wrap_content`，同时使用填充或边距，在文本视图中使用`wrap_content`。
不要硬编码任何值

# jquery-ui - 在jquery中进行展开/折叠时如何识别索引

> ID：11930016
> 
> 赞同：0
> 
> 时间：2012-08-13T07:40:40.450
> 
> 标签：jquery-ui, jquery

这是我在进行展开/折叠时的以下代码，但我只想在其中进行展开/折叠操作时识别索引。

你能给我这个示例代码吗？

```
 $("#accordionDemo2").accordion({
            collapsible: true
        });

    <p><h2>Hi, This is Multiple Panel Demo1</h2></p>
    <div id="accordionDemo2">
        <h3><a href="#" class="acc">Section 1</a></h3>
        <div>
            <p>Hi, This is Section 1</p>
        </div>
        <h3><a href="#" class="acc">Section 2</a></h3>
        <div>
            <p>Hi, This is Section 2</p>
        </div>
        <h3><a href="#" class="acc">Section 3</a></h3>
        <div>
            <p>Hi, This is Section 3</p>        
        </div>
        <h3><a href="#" class="acc">Section 4</a></h3>
        <div>
            <p>Hi, This is Section 4</p>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:44:54.403

[http://docs.jquery.com/UI/Accordion#option-active](http://docs.jquery.com/UI/Accordion#option-active)

活动元素的选择器。设置为 false 以在开始时不显示。需要可折叠：是的。

```
//getter
var active = $( ".selector" ).accordion( "option", "active" );
//setter
$( ".selector" ).accordion( "option", "active", 2 ); 
```

# ruby-on-rails - 功能测试的夹具很大，加载时间很长

> ID：11930021
> 
> 赞同：0
> 
> 时间：2012-08-13T07:41:05.000
> 
> 标签：ruby-on-rails, rspec

我正在尝试使用 rspec 测试一个类似报告的 rails 视图，该视图显示了很多数据，并且该视图的固定 yaml 几乎是 2M 大，并且加载固定装置花费了大量时间。

有什么办法可以解决这个问题，如果我只想为所有测试加载一次固定装置，我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:50:53.393

为了总体上加快测试执行速度，并且我确信可以包括固定装置的加载，请查看[spork](https://github.com/sporkrb/spork/)。

# php - 相互比较多个值

> ID：11930027
> 
> 赞同：6
> 
> 时间：2012-08-13T07:41:56.720
> 
> 标签：php

我有大约 20 个不同的变量，我想将这些变量相互比较以检查它们是否相等。

**例子**

```
$var1 = 1;
$var2 = 2;
$var3 = 1;
$var4 = 8;
.
.
.
$var10 = 2; 
```

现在我想检查...

```
if($var1 == $var2 || $var1 == $var3 || $var1 == $var4 || ......... || $var2 == $var3 || $var2 == $var4 || ............. || $var8 = $var9 || $var8 == $var10 ||...)
{
    echo 'At-least two variables have same value';
} 
```

我正在寻找一个容易做到这一点的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T07:45:57.117

```
$arr = array($var1, $var2, ... , $var10);

if (count($arr) !== count(array_unique($arr))) {
  echo 'At-least two variables have same value';
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T07:46:26.653

如果您想找出是否有任何变量重复，请将它们放在一个数组中并使用[`array_count_values`](http://www.php.net/manual/en/function.array-count-values.php)：

> `array_count_values()`使用*输入*数组的值作为键并将它们在输入中的频率作为值返回一个*数组。*

 *如果结果中有任何大于 1 的值，则存在匹配项。

例如

```
$values = array(1,2,3,1);
if(max(array_count_values($values)) > 1) {
   ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:49:40.007

首先，将它们保存到一个数组中，一切都变得简单

```
$list=array("1"=>$var1,"2"=>$var2,......,"10"=>$var10);
$list2=array_unique($list);
if(count($list2) != count($list))
    echo 'At-least two variables have same value'; 
```*

# android-notifications - 从android通知栏中删除通知

> ID：11930030
> 
> 赞同：0
> 
> 时间：2012-08-13T07:42:05.083
> 
> 标签：android-notifications

我创建了一个应用程序，并使用 Application 类 OnCreate 事件，我设法在 android 通知栏中添加通知。现在我需要示例当用户从设置 -> 应用程序 -> 运行服务停止应用程序时如何从通知栏中删除该通知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-24T08:07:24.730

`NotificationListenerService`您可以通过从类中调用 cancelNotification() 方法在活动的 onDestroy() 方法中删除通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:35:04.567

请在这里阅读这篇文章：

[取消从多任务面板中删除应用程序的通知](https://stackoverflow.com/questions/12997800/cancel-notification-on-remove-application-from-multitask-panel/14374761#14374761)

它与多任务面板终止的过程相同。

# java - shuffle（随机重新排列）随机生成的密码

> ID：11930031
> 
> 赞同：0
> 
> 时间：2012-08-13T07:42:08.963
> 
> 标签：java, random, passwords

我正在生成一个随机密码。我的密码长度为 8 个字符，其中包含特殊字符。我需要保留`first letter as alphabet`并且需要对剩余的七个字符进行洗牌，使其成为`mixture of alphanumeric + ascii characters`.

```
public String generatePassword() {
        int passwordLength = MAX_PASSWORD_LENGTH;
        StringBuffer password = new StringBuffer(passwordLength);
        //first character as an alphabet
        password.append(RandomStringUtils.randomAlphabetic(1)).toString();
        String alphaNumeric = RandomStringUtils.random(5, true, true);
        String asciiChars = RandomStringUtils.randomAscii(2);
        password.append(alphaNumeric).append(asciiChars);
        return password.toString();
    } 
```

我需要一些帮助来随机播放最后 7 个字符。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:47:00.850

Java Collections API 有一个内置的 shuffle 方法，您可以使用：请参阅[此处](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)。基本上，您需要`List`从最后 7 个字符中创建一个，并将其传递给`Collections.shuffle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:59:38.783

如果您没有那么严格的要求，那么您可以随机附加字符：

```
Random random = new Random();
for (int i = 0; i < 7; i++) {
   if (random.nextBoolean()) {
       password.append(RandomStringUtils.random(1, true, true));
   } else {
       password.append(RandomStringUtils.randomAscii(1));
   }
} 
```

如果您需要保证每种至少有一个，那么您可以添加一个简单的测试：

```
boolean hasAlphaNumeric = false;
boolean hasAscii = false;
while (hasAlphaNumeric == false || hasAscii == false) {
  Random random = new Random();
  for (int i = 0; i < 7; i++) {
    if (random.nextBoolean()) {
      password.append(RandomStringUtils.random(1, true, true));
      hasAlphaNumeric = true;
    } else {
      password.append(RandomStringUtils.randomAscii(1));
      hasAscii = true;
    }
  }
} 
```

# methods - Mongoose - 来自 doc 的访问模型

> ID：11930039
> 
> 赞同：1
> 
> 时间：2012-08-13T07:42:54.570
> 
> 标签：methods, model, mongoose

在定义模型之前，我遇到了需要模型的情况。在`someMethod()`中，我试图`this.model('Goods')`检索模型。我想知道是否有更好的方法。

```
var mongoose = require('mongoose')
    , GoodsSchema = require('./schemas').GoodsSchema
    , GoodsModel;

GoodsSchema.methods.someMethod = function () {
    // need GoodsModel here
    // GoodsModel.find()....    
};

GoodsModel = mongoose.model('Goods', GoodsSchema);
module.exports = GoodsModel; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:41:38.797

```
this.model("Goods").find() 
```

见[这里](http://mongoosejs.com/docs/guide.html#methods)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:56:04.930

你可以（而且应该）简单地做

```
var model = mongoose.model( 'Goods' ); 
```

# php - 使用 fgetcsv 函数后，从 ftp 服务器读取下载的文件不会显示数据

> ID：11930040
> 
> 赞同：6
> 
> 时间：2012-08-13T07:42:56.190
> 
> 标签：php, curl, ftp

我正在使用 cURL 请求从 FTP 服务器下载 CSV 文件。

我已将文件下载到我的 webroot 文件夹中（在我给定的路径中）。

但是当我试图从文件中读取 CSV 数据时，它没有显示任何内容。 `$leadDir`是我下载文件的路径。

```
if ($fp = fopen($leadDir, "r")) {
    echo $fp;
    echo "come after fopen";
    while ($CSVData = fgetcsv($fp)) {
        echo "</br>";
        echo "come after fgetcsv";
    }
} 
```

它不会进入`while`循环内部。

我还检查了文件权限，我给了它 777 权限。

它哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:54:12.663

代码应该没问题，所以我最好的答案是路径不正确，尝试类似

```
$cwd = getcwd();
$leadDir = $cwd.'/relativePathToFile';

if(file_exists($leadDir)){
    if (($fp = fopen($leadDir, "r"))) {
        echo $fp;
        echo "come after fopen";
        while ($CSVData = fgetcsv($fp)) {
            echo "</br>";echo "come after fgetcsv";
        } 
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:16:25.930

您的代码看起来应该可以工作。这是我将使用的代码：

```
<?php
if($handle = fopen('test.csv', 'r')) {
    $data = fgetcsv($handle);
    if($data) {
        echo '<pre>';
        var_dump($data);
        echo '</pre>';
    }
}
?> 
```

尝试执行此代码：

```
var_dump(file_exists($leadDir)); 
```

如果文件存在，它将输出

```
bool(true) 
```

否则会输出

```
bool(false) 
```

另外，`$leadDir`是*目录*还是*文件*？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:42:58.640

如果提供了无效句柄，fgetcsv() 将返回 NULL，或者在其他错误（包括文件结尾）时返回 FALSE。

尝试：

```
if (($fp = fopen($leadDir, "r")) !== FALSE) {
    echo $fp;
    echo "come after fopen";
    while (($CSVData = fgetcsv($fp,1000,',')) !== FALSE) {
        echo "</br>";
        echo "come after fgetcsv";
    }
} 
```

如果仍然没有进入 while 循环，请尝试检查 CSV 文件的结尾。

注意：如果 PHP 在读取 Macintosh 计算机上或由 Macintosh 计算机创建的文件时无法正确识别行尾，启用 auto_detect_line_endings 运行时配置选项可能有助于解决问题。（来源[PHP.net](http://it.php.net/manual/en/function.fgetcsv.php)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:04:41.143

检查目标目录的所有者。尝试将权限授予`www-data`用户。

您可以通过使用下载文件的`chown` [功能以编程方式执行此操作。](http://php.net/manual/en/function.chown.php)

这是语法。

```
bool chown ( string $filename , mixed $user ) 
```

# objective-c - 我无法从 NSDate 获取字符串

> ID：11930041
> 
> 赞同：0
> 
> 时间：2012-08-13T07:43:02.297
> 
> 标签：objective-c, nsdate

我有一个 [self.post post_time] NSDate，其值为 2012-08-02T08:57:52.152713+00:00

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init] ;
[formatter setDateFormat:@"yyyy-mm-dd"];
NSLog([formatter stringFromDate:[self.post post_time]]); 
```

它不起作用。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:48:41.783

你的代码对我有用

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd'T'hh:mm:ss.SSSz"];
NSDate *myDate = [df dateFromString: @"2012-08-02T08:57:52.152713+00:00"]; // simulate your attribute

NSDateFormatter *formatter = [[NSDateFormatter alloc] init] ;
[formatter setDateFormat:@"yyyy-MM-dd"];
NSLog(@"%@", [formatter stringFromDate:myDate]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:17:55.150

**首先**，时区确实让你头疼，因为它`NSDateFormatter`可以识别时区的以下格式，`+0000`或者`GMT+1000`它不能识别带有冒号的时区`+00:00`，简单地说，它没有模式。所以，你应该以某种方式从时区部分删除冒号。

**其次**，您必须对输入日期使用以下模式，而不是`yyyy-mm-dd`因为此模式不涵盖您的输入字符串。

```
NSString *_dateString = @"2012-08-02T08:57:52.152713+00:00";
NSString *_noColonInTimezone = [_dateString stringByReplacingCharactersInRange:NSMakeRange(_dateString.length-3, 1) withString:@""];
NSDateFormatter *_dateFormatter = [[NSDateFormatter alloc] init];
[_dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSZZZ"];
NSDate *_date = [_dateFormatter dateFromString:_noColonInTimezone];
NSLog(@"raw date : %@", _date); 
```

它运行良好，**已经在真实设备上进行了测试**，我希望它可以帮助您获得`NSDate`具有正确日期的对象，然后您可以根据需要格式化输出日期。

# f2c - 如何阻止 f2c 打印每个子例程和函数的名称

> ID：11930043
> 
> 赞同：0
> 
> 时间：2012-08-13T07:43:07.510
> 
> 标签：f2c

我们的构建脚本在数千个子例程和函数上运行 f2c，因此我们的构建输出包含大量输出，例如：

```
 a102:
   a200:
   a210:
   acalc:
   actdis:
   addvec:
   adhydr:
   alsun: 
```

我们正在运行 f2c 版本 20100827。

使用的 f2c 命令行是：

```
f2c -Nx5000 -Nn3200 -NL1500 -a -R -ec -doutput 
```

我找到了[f2c 手册页](http://www.netlib.org/f2c/f2c.1)，在那里看不到任何相关选项。

在不编辑 f2c 源代码的情况下，是否有其他方法，例如一些未记录的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:45:51.647

我发现删除函数名称的唯一方法是通过 grep 管道 f2c 的输出：

```
$F2C_EXE $f2c_options      output/$file.f 2>&1 | grep -v '^   [a-zA-Z]' 
```

这是因为函数和子例程名称以三个空格为前缀，并且`-v`grep 选项告诉 grep 打印*除*匹配行之外的所有行。

这`2>&1`是必需的，因为 f2c 似乎将其所有输出写入标准错误，而不是标准输出。

# android - 如何取消意外/强制应用终止通知

> ID：11930046
> 
> 赞同：7
> 
> 时间：2012-08-13T07:43:18.023
> 
> 标签：android, android-service, android-notifications

我正在创建一个显示`notification`当前播放歌曲的应用程序。

正在播放歌曲`Service`，通知的启动和取消是在服务本身中完成的。

但是，如果应用程序因某些异常而终止，或者我通过任务管理器强制关闭它，则通知仍保留在任务栏的顶部。

我怎样才能删除这个。

下面是代码：

```
//In Service onStartCommand(), there is a call to initiatePlayback()
private void initiatePlayback() {
    try {
        if (mPlayer.isPlaying()) {
            mPlayer.stop();
        }
        mPlayer.reset();
        mPlayer.setDataSource(currentData);
        mPlayer.prepare();

        if (reqAudioFocus()) {
            mPlayer.start();
        }

        if (mPlayer.isPlaying()) {
            initNotification();
        }
    } catch (Exception e) {
        Toast.makeText(this,
                "PlayTrack->initiatePlayback(): " + e.toString(),
                Toast.LENGTH_SHORT).show();
    }
}

@Override
public void onDestroy() {
    stopPlayback();
    mPlayer.release();
    mPlayer = null;
    super.onDestroy();
}

private void stopPlayback() {
    if (mPlayer.isPlaying()) {
        mPlayer.stop();
        mPlayer.reset();
        cancelNotification();
    }
}
private void cancelNotification() {
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        mNotificationManager.cancel(NOTIFICATION_ID);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T17:46:56.420

我知道这个问题很老，但是当我认为有类似问题时我发现了它。结果对我来说，该服务与应用程序一起被杀死（它正确地取消了 onDestroy 中的通知），但随后被重新启动（应该使用 START_STICKY）并再次发布通知。在这些情况下，我不希望服务在用户从应用程序启动它之前返回，因此在 OnStartCommand 中，当传入意图为空时，我调用了 stopSelf()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:58:03.433

捕获异常并在`catch`子句中取消它：

```
mNotificationManager.cancel(MY_NOTIFICATION_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:49:03.530

您可以覆盖`onDestroy()`方法并使用[NotificationManager](http://developer.android.com/reference/android/app/NotificationManager.html)取消您的通知。您只需提供应取消通知的 ID。

```
@Override
public void onDestroy() {

    private static final int MY_NOTIFICATION_ID= 1234;
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager;
    mNotificationManager = (NotificationManager) getSystemService(ns);
    mNotificationManager.notify(MY_NOTIFICATION_ID, notification);
    //to cancel:
    mNotificationManager.cancel(MY_NOTIFICATION_ID);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T18:02:29.080

您可以通过以下方式捕获破坏应用程序的错误：

```
Thread.setDefaultUncaughtExceptionHandler(newHandler); 
```

请注意，这样做将无法在出现异常后关闭您的应用程序，因此您需要获取旧的 exceptionHandler 引用并从您的引用中调用它。

此外，添加代码以删除此方法的通知。

# java - GWT + AppEngine - 聊天小部件或库

> ID：11930049
> 
> 赞同：1
> 
> 时间：2012-08-13T07:43:31.327
> 
> 标签：java, google-app-engine, gwt, chat

我需要在我的网站中集成在 GWT 和 Google App Engine (GAE) 中创建的聊天小部件/库。我在谷歌上搜索，但我发现的只是一些关于 XMPP API 和 Channel API（在 GAE 中）的教程。

是否有包含同样提供功能的小部件的库（例如 GWT 小部件 + App Engine 的 XMPP 服务）？还是我必须从头开始构建一个？

# javascript - 在 Chrome 开发工具中查找 JS 内存泄漏

> ID：11930050
> 
> 赞同：42
> 
> 时间：2012-08-13T07:43:32.773
> 
> 标签：javascript, jquery, google-chrome-devtools

我正在使用 chrome 开发工具来确定某些 JS 代码中是否存在内存泄漏。**内存时间线**看起来不错，内存按预期回收。

![在此处输入图像描述](../Images/512773586d3cdad40a77ac7955edf139.png)

但是，**内存快照**令人困惑，因为“分离的 DOM 树”下存在条目，因此看起来好像存在泄漏。

**“分离的 DOM 树”下的东西是等待垃圾收集还是这些真正的泄漏？**

**还有人知道如何找出对分离元素的引用是什么函数吗？**

![在此处输入图像描述](../Images/2c06078db99ac33d71220fe74406bdaa.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-13T08:01:49.583

这些元素在您的代码中被引用，但它们与页面的主 DOM 树断开连接。

简单的例子：

```
var a = document.createElement("div"); 
```

`a``a`现在引用一个断开连接的元素，当它仍在范围内时，它不能被 GC'd 。

如果分离的 dom 树在内存中持续存在，那么您将保留对它们的引用。使用 jQuery 做到这一点有点容易，只需保存对遍历结果的引用并保留它。例如：

```
var parents = $("span").parent("div");
$("span").remove(); 
```

现在跨度被引用，即使看起来你无论如何都没有引用它们。通过 jQuery属性`parents`间接保持对所有跨度的引用。`.prevObject`这样做`parents.prevObject`会给出引用所有跨度的对象。

请参阅此处的示例[http://jsfiddle.net/C5xCR/6/](http://jsfiddle.net/C5xCR/6/)。尽管没有直接显示跨度会被引用，但它们实际上是由`parents`全局变量引用的，您可以看到 Detached DOM 树中的 1000 个跨度永远不会消失。

现在这是相同的 jsfiddle，但具有：

```
delete parents.prevObject 
```

你可以看到跨度不再在分离的 dom 树中，或者任何地方。[http://jsfiddle.net/C5xCR/7/](http://jsfiddle.net/C5xCR/7/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-14T13:15:39.097

> “分离的 DOM 树”下的东西是等待垃圾收集还是这些真正的泄漏？

在拍摄快照之前，浏览器将运行垃圾收集并清除所有未引用的对象。所以堆快照总是只包含活动对象。因此，如果快照中存在分离的 DOM 树，则树中必须有一个从 JavaScript 引用的元素。

> 还有人知道如何找出对分离元素的引用是什么函数吗？

在同一个分离的 DOM 树中应该有一个元素（或其中几个）具有黄色背景。这些元素是从 JavaScript 代码中引用的。您可以找出谁确切地保留了对保留树中元素的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:10:12.177

既然你已经添加了 jQuery 标签，我就偷偷地怀疑这是一个 jQuery*的东西*。一个快速的谷歌把我带到了[这个页面](http://www.drdobbs.com/web-development/manipulating-the-dom-with-jquery/229300630)。使用 jQ 的`detach`方法时，对对象的引用仍保存在内存中，因此可能会导致您的快照。

另一件事可能是 jQuery`div`手头有一个节点，该节点 - 显然 - 保存在内存中，但从未添加到实际的 dom 中......有点`document.createNode('div')`不附加它。这也将显示在内存快照中。你无法解决这个问题，jQuery 使用它将字符串解析为 html 元素。

因此，要从内存中删除一些元素，请~~使用 jQuery`.remove()`方法，您的内存将立即被清除~~。*cf Esailija 关于为什么`remove`不完全符合这里*的要求的评论。
`$('#someElem')[0].parentNode.removeChild($('#someElem')[0]);`应该完全删除元素，但可能不会取消绑定事件。也许是这样的：

```
$('#someElem').detach();//to remove any event listeners
$('#someElem')[0].parentNode.removeChild($('#someElem')[0]);//remove element all together 
```

而且，正如 Esailija 在他的回答中指出的那样，确保将对任何 jQuery 对象 ( `var someRef= $('.someSelector');`) 的引用分配给全局变量，因为它们不会被 GC 处理。事实上，只要避免全局变量。
但是要简短而清楚地回答您的问题：不，这些不是*真正的*内存泄漏，应该在`onbeforeunload`事件中释放内存。jQuery 对象被删除，因此所有引用都超出了范围。至少，这就是我的*“研究”*让我相信的。[也许不完全相关，但只是作为参考](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)这是我不久前发布的关于 mem-leaks 的问题，并通过它发现了一些事情..

# java - 使用java将文件大小减少到尽可能低

> ID：11930052
> 
> 赞同：1
> 
> 时间：2012-08-13T07:43:42.630
> 
> 标签：java, compression

我正在使用 flex 4 开发移动应用程序，我正在使用 java Web 服务进行服务器通信。实际上我需要将文件从服务器传输到移动设备和移动设备到服务器。当我执行此操作时，我的应用程序变得非常慢。所以我打算压缩文件并发送。但是当我使用`GZIPOutputStream`or`ZIPOutputStream`进行压缩时，它只是将文件压缩为 .zip。无法减少太多文件大小。但我需要尽可能减少文件大小。文件格式可以是图像、视频或音频。请任何人提出一些想法来使用 java 进行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:49:34.860

大多数音频、视频和图像格式已经被压缩，因此在传输之前再次压缩内容不会有太大帮助。此外，压缩可能是 CPU 密集型的，因此您可能只是增加了问题。

是客户端还是服务器变慢了？我建议您在运行缓慢的应用程序上运行 CPU 分析器以查明发生了什么。

看看[http://netbeans.org/kb/docs/java/profiler-intro.html](http://netbeans.org/kb/docs/java/profiler-intro.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:52:21.850

您要求我们提出一些想法。好的，。我认为当你通过 Web Services 传输数据时，你必须将数据转换为字节数组。我认为，您接收整个字节并转换为文件，然后编码/解码。因此，当您尝试对某些图像或视频文件进行编码时，您无法减小文件大小。所以我的想法是，你可以使用 Base64Encoding 和 Base64Decoding 逐个口袋地对数据进行编码。意思是，将文件转换为字节，编码字节并发送，接收字节并解码然后转换为文件。我认为这应该对你有所帮助。

# com - 在单独的进程中创建 COM inproc 服务器（不修改注册表）

> ID：11930053
> 
> 赞同：5
> 
> 时间：2012-08-13T07:44:03.910
> 
> 标签：com

我想在一个单独的进程中创建一个（可能）Inproc COM 对象。执行此操作的常规方法是使用 COM 的[DLL Surrogate](http://msdn.microsoft.com/en-us/library/ms691260.aspx) ( `dllhost.exe`)，但这需要更改`CLSID`要创建的 COM 对象的注册表。我不想更改注册表，因为我不在乎这个对象的其他实例是否是在进程中创建的，我只想在进程外创建一个特定的对象。

目前我已经编写了一个 LocalServer COM 对象，它接受一个 prog-id 并返回该对象，但感觉就像是在重新发明轮子。

有没有办法以编程方式创建 COM 代理并告诉它创建一个 COM 对象？

# android - 接收单元广播以在 android 中显示当前位置（频道 50）

> ID：11930054
> 
> 赞同：9
> 
> 时间：2012-08-13T07:44:07.243
> 
> 标签：android

我开发了一个 Android 应用程序，它使用**Cell Broadcast message**显示当前位置（频道 50） 。我找不到使用我的应用程序启用/禁用小区广播的任何解决方案。我在标准 SMS 设置中启用了小区广播。该应用程序运行良好。一个问题是它还显示 android 的位置名称通知区域和消息作为标准 SMS 应用程序。这很烦人。

是否有任何解决方案可以防止在通知区域和标准消息中显示这些消息并且只显示在我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:17:26.860

确保您的 BroadcastReceiver 具有非常高的优先级，并且当您希望 SMS 不进入通知和数据库时，在您的广播接收器中调用以下命令 -

```
this.abortBroadcast(); 
```

# java - 如何获得彩色线以区分摆动中的文本字段数组

> ID：11930059
> 
> 赞同：2
> 
> 时间：2012-08-13T07:44:12.523
> 
> 标签：java, swing, line, jtextfield, jseparator

我开发了一个框架，在该框架上我使用 GridBagLayout 来排列 12X12 的文本字段。即，框架上共有 144 个文本字段。现在我想在每 3 列和 3 行之后用彩色线区分这些文本字段，如下图所示。我尝试了很多方法，但我找不到解决方案。请建议。下面是我的代码的一部分。提前致谢。

```
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12
      |       |       |
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12 
      |       |       |
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12
-------------------------------    
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12
      |       |       |
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12
      |       |       |
1 2 3 | 4 5 6 | 7 8 9 | 10 11 12
--------------------------------    |
1 2 3 | 4 5 6................
. .
. .
. 
```

请将每个数字视为图表中的一个文本字段。

```
JTextField jt[][]=new JTextField[12][12];

for(int i=0;i<jt.length;i++)
        {
            for(int j=0;j<jt.length;j++)
            {

                jt[i][j] = new JTextField(1);

                constraints.gridx=j;
                consraints.gridy=i;
                gridbag.setConstraints(jt[i][j],cons);
                c.add(jt[i][j]);
                                jt[i][j].setHorizontalAlignment(JTextField.CENTER);
                jt[i][j].setFont(new Font("TimesNewRoman",Font.BOLD,14));
                jt[i][j].setDocument(new JTextFieldLimit(2));
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T07:47:04.220

您可以使用[JSeparator](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSeparator.html)，或者将每组 3x3 字段分成单独的窗格并使用[LineBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/LineBorder.html)。

只要您正确设置了字段，您就应该能够使复合面板/`LineBorder`工作

**更新**

对不起，应该是`MatteBorder`:P

![哑光边框](../Images/9f503874d01a838c3b578b3c85e4aa57.png)

```
GridBagConstraints gbc = new GridBagConstraints();
gbc.fill = GridBagConstraints.BOTH;
gbc.gridx = 0;
gbc.gridy = 0;

for (int row = 0; row < 4; row++) {

    gbc.gridx = 0;

    add(buildGroup(0, 0, 1, 1), gbc);
    gbc.gridx++;
    add(buildGroup(0, 0, 1, 1), gbc);
    gbc.gridx++;
    add(buildGroup(0, 0, 1, 1), gbc);
    gbc.gridx++;
    add(buildGroup(0, 0, 1, 0), gbc);
    gbc.gridy++;

}

public JPanel buildGroup(int top, int left, int bottom, int right) {

    JPanel panel = new JPanel(new GridBagLayout());
    panel.setBorder(new MatteBorder(top, left, bottom, right, Color.RED));
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.insets = new Insets(2, 2, 2, 2);
    gbc.fill = GridBagConstraints.HORIZONTAL;
    for (int row = 0; row < 3; row++) {
        for (int col = 0; col < 3; col++) {

            JTextField field = new JTextField(8);
            gbc.gridx = col;
            gbc.gridy = row;

            panel.add(field, gbc);

        }
    }

    return panel;

} 
```

现在，显然，您需要弄清楚如何为您的字段播种，但基本上，我只需传入您想要使用的字段（例如 2D 数组）。

或使用分隔符：P

![分隔符](../Images/ff0f2aa27cd2e0eae03d9fd32910534b.png)

```
for (int row = 0; row < 9; row++) {

    gbc.gridwidth = 1;
    gbc.weightx = 0;

    int verSplit = 0;

    for (int col = 0; col < 12; col++) {

        gbc.gridx++;

        add(new JTextField(8), gbc);

        verSplit++;
        if (verSplit == 3) {

            verSplit = 0;

            gbc.gridx++;

            if (horSplit % 3 == 0) {

            gbc.gridheight = 3;
            gbc.fill = GridBagConstraints.VERTICAL;
            add(new JSeparator(JSeparator.VERTICAL), gbc);

            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridheight = 1;

            }

        }

    }

    horSplit++;

    gbc.gridx = 0;

    if (horSplit == 3) {

        horSplit = 0;
        gbc.gridy++;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        gbc.weightx = 1;
        add(new JSeparator(JSeparator.HORIZONTAL), gbc);

    }

    gbc.gridy++;

} 
```

或同一主题的变体

**更新了现场管理**

```
// Build the array of fields, I used a col by row matrix
JTextField fields[][] = new JTextField[12][12];
for (int col = 0; col < 12; col++) {

    for (int row = 0; row < 12; row++) {

        fields[col][row] = new JTextField(col + "x" + row, 8);

    }

}

// Build the groups...
for (int row = 0; row < 12; row++) {

    gbc.gridx = 0;

    int col = 0;

    add(buildGroup(fields, col, row, 0, 0, 1, 1), gbc);

    col += 3;
    gbc.gridx++;
    add(buildGroup(fields, col, row, 0, 0, 1, 1), gbc);

    col += 3;
    gbc.gridx++;
    add(buildGroup(fields, col, row, 0, 0, 1, 1), gbc);

    col += 3;
    gbc.gridx++;
    add(buildGroup(fields, col, row, 0, 0, 1, 0), gbc);

    gbc.gridy++;
    row += 2; // This is important, don't miss this ;)

}

public JPanel buildGroup(JTextField[][] fields, int startCol, int startRow, int top, int left, int bottom, int right) {

    JPanel panel = new JPanel(new GridBagLayout());
    panel.setBorder(new MatteBorder(top, left, bottom, right, Color.RED));
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.insets = new Insets(2, 2, 2, 2);
    gbc.fill = GridBagConstraints.HORIZONTAL;
    for (int row = 0; row < 3; row++) {
        for (int col = 0; col < 3; col++) {

            // Get the field to use for this cell 
            JTextField field = fields[col + startCol][row + startRow];
            gbc.gridx = col;
            gbc.gridy = row;

            panel.add(field, gbc);

        }
    }

    return panel;

} 
```

# shell - 当 ebtables 规则匹配时如何执行 shell 脚本？

> ID：11930062
> 
> 赞同：0
> 
> 时间：2012-08-13T07:44:19.207
> 
> 标签：shell, iptables, ebtables

当特定的 ebtables 规则匹配时，我想执行一个 shell 脚本。脚本应该获取客户端的 MAC 地址和客户端连接的接口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:59:56.493

你不能直接这样做。一种选择是记录数据包，然后您可以从 Syslog 执行命令（例如使用管道）。

例子：

```
ebtables -A FORWARD -s 00:11:22:33:44:55 --log --log-prefix " EBTABLES " 
```

该规则将匹配源 MAC 地址为 00:11:22:33:44:55 的所有数据包，并且字符串 EBTABLES 应出现在 syslog 中。你应该小心这个，因为如果你有很多流量，它会有点激进。

# git - 完整文件未显示在 GitHub 上？

> ID：11930063
> 
> 赞同：1
> 
> 时间：2012-08-13T07:44:26.403
> 
> 标签：git, github

我最近向 GitHub 添加了一个项目，其中一些文件没有完全显示。例如 - [https://github.com/Fitzpasd/Simple-programming-language-incl.-Scanner---Parser/blob/master/SymTab.cs](https://github.com/Fitzpasd/Simple-programming-language-incl.-Scanner---Parser/blob/master/SymTab.cs)

如果单击“原始”，则会显示整个文件。我的格式可能有问题吗？我在 Windows 上使用 Git 并拥有所有推荐的设置（文件转换等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:09:03.677

我不知道你是怎么做到的，但是当我下载“原始”版本（手头没有 git）时，它的换行符遵循旧的 mac 约定。也就是说，它仅使用`CR`( `\r`) 字符（与`CR LF`Windows 或`LF`unix-ish 系统上的不同）。由于现在这是一个相当模糊的选项（并且取决于所使用的编程语言和库，支持的意义重大），它可能根本不受支持。这个假设得到了[一篇关于换行符的 GitHub 文章](https://help.github.com/articles/dealing-with-line-endings)的支持，该文章根本没有提到`CR`约定，并且使用“Mac == `LF`”。不过联系 GitHub 支持也无妨。

其他正确显示的文件没有这些文件（例如`Scanner.cs`使用 unix 约定）。

# java - PrimeFaces 对话框保留以前的值

> ID：11930065
> 
> 赞同：1
> 
> 时间：2012-08-13T07:44:52.867
> 
> 标签：java, jsf, dialog, primefaces

我使用数据表来显示一些记录。用户可以使用名为 actionsDialog 的对话框添加/更改记录。在保存记录之前，会显示一个名为 reasonDialog 的模式对话框，用户必须为当前操作输入一些原因。在我的逻辑中，我将数据保存到数据库后将原因设置为空。

重复操作时出现问题。原因包含先前的值。我已经调试了代码并注意到发生这种情况是因为原因被分配了 inputTextarea 的本地值。我怎样才能摆脱本地价值？我正在使用 PrimeFaces 3.0、Mojara 2.0.4、Tomcat 7。

我的原因对话框 facelet 是：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">  
    <p:dialog header="#{label.reason}" widgetVar="reasonDialog"
        showEffect="fade" hideEffect="explode" modal="true" dynamic="true">        
        <h:panelGrid columns="2">
            <p:inputTextarea rows="5" cols="40" autoResize="false"
                value="#{recordsBean.reason}" maxLength="1024" />
            <f:facet name="footer">
                <p:outputPanel layout="block">
                <p:commandButton value="ok" update="genericRecords msgs"
                    action="#{recordsBean.execute}"
                    oncomplete="reasonDialog.hide();actionsDialog.hide()" />
                </p:outputPanel>
            </f:facet>
        </h:panelGrid>
    </p:dialog>
</ui:composition> 
```

操作对话框如下所示：

```
<p:dialog id="actionsDialog" widgetVar="actionsDialog" dynamic="true"
    resizable="false" height="600" showEffect="fade" hideEffect="fade" modal="true">
<ui:include src="/WEB-INF/flows/genericRecord.xhtml"/>
<f:facet name="footer">  
        <p:outputPanel layout="block">
    <p:commandButton value="save" onclick="reasonDialog.show()" />
    <p:commandButton value="cancel" immediate="true" 
                oncomplete="actionsDialog.hide()" />
    </p:outputPanel>
</f:facet>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T10:16:51.693

您需要在显示之前更新/刷新对话框的内容。`update`在属性中引用其（相对）客户端 ID并将`show()`from移动`onclick`到，`oncomplete`以便在更新后发生。

```
<p:commandButton value="save" update="reasonDialog" oncomplete="reasonDialog.show()" /> 
```

否则，它当然仍会显示关闭前的旧内容。您就是通过 ajax/JS 与完全相同的页面进行交互，而不是一个新页面左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:54:48.123

尝试在您的 p:commandButton 中添加 ajax="false" 属性；见样品

```
 <p:commandButton value="ok" update="genericRecords msgs"
                action="#{recordsBean.execute}" ajax="false"
                oncomplete="reasonDialog.hide();actionsDialog.hide()" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T18:20:58.700

**//如果没有任何效果，这是一个替代解决方案：**

没有什么对我有用...答案或评论..所以我必须执行以下操作：

我曾经`ResetInputs`在我的对话框中重置表单以及从我的 bean 中打开它的方法。

所以，

```
<p:commandButton value="Show" actionListener="#{myBean.showDialog()}" update=":myForm">
            <p:resetInput target=":myForm"/>
</p:commandButton> 
```

然后在我的bean中我做了这个方法，打开对话框（使用对话框的widgetVar）并再次初始化我的对象，所以每次我打开我的对话框时，所有`<p:inputText>`（或其他）中的值将始终为空白/空.

```
public void showDialog(){

    car = new Car();
    RequestContext context = RequestContext.getCurrentInstance();
    context.execute("PF('wvDialog').show();");
    //added widgetVar to myDialog called wvDialog 
} 
```

在对话框中，我有一些,`<p:inputText>`和其他的。当对话框关闭、提交或出错时，它们都不会再次记住以前的值。这是它对我有用的唯一方法，希望对某些人有所帮助！`<p:selectOneMenu>``<p:calendar>`

# asp.net - 如何在 asp.net 中使用 div 标签显示图像

> ID：11930067
> 
> 赞同：0
> 
> 时间：2012-08-13T07:45:09.790
> 
> 标签：asp.net

net，我想使用 div 标签显示图像。我正在使用以下 div 来执行此操作。我的 div 是

`<div style="background: transparent url('arrow_left.png') no-repeat center center; width:32px; height: 32px;"></div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:50:32.740

这个对我有用：

```
 <div style="background: transparent  url('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5') no-repeat  top left; width:132px; height: 132px;"></div> 
```

[->](http://www.w3schools.com/css/css_background.asp)使用速记属性时，属性值的顺序为：

```
background-color
background-image
background-repeat
background-attachment
background-position 
```

[http://jsbin.com/upudow/2/edit](http://jsbin.com/upudow/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:13:36.833

检查这个：

1.  图像存在（尝试使用 normal `<img>`）
2.  检查 div 是否实际具有宽度和高度，您可以为此使用 FireBug 或使用本机浏览器调试工具。
3.  您在某些用户控件中使用此 Div 吗？检查好路径问题

# html - 将带有 CSS 的 HTML 复制到 Libre Office

> ID：11930071
> 
> 赞同：9
> 
> 时间：2012-08-13T07:45:23.467
> 
> 标签：html, css, libreoffice

我有一个使用 CSS 样式的 HTML 页面。我想将它复制到 Libre Office Writer，以便我可以编辑它。但是，当我复制和粘贴时，只复制了 HTML，没有样式。我尝试了“选择性粘贴 - HTML”并得到了相同的结果。

我在 Ubuntu 12.04 上使用 Libre Office 3.5.3.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:16:21.597

复制粘贴时似乎`<body>`丢弃了样式，只使用了内联 CSS。对我来说，从 Firefox 复制并粘贴到 LibreOffice，以下 HTML 没有保留格式：

```
<head>
  <style type="text/css">
    body { font-family: sans-serif; font-size: 15px; }
    span { color: red; }
  </style>
</head>
<body>
  Lorem ipsum <span>dolor</span> sit amet.
</body> 
```

和

```
<body style="font-family: sans-serif; font-size: 15px;">
  Lorem ipsum dolor sit amet.
</body> 
```

但以下工作按预期工作：

```
<body>
  <div style="font-family: sans-serif; font-size: 15px;">
    Lorem ipsum <span style="color: red;" >dolor</span> sit amet.
  </div>
</body> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-17T13:14:20.180

只需在浏览器页面上按 ctrl+u 即可。将打开一个包含整个 HTML 脚本的单独窗口。现在在该 HTML 中，转到“链接”标签并单击带下划线的 href ....您所需的 css 文件将在新窗口中打开..复制整个（ctrl+A）或选定的样式并享受...

# groovy - 使用 groovyc 的 Groovy 编译使用 jvm 进程？

> ID：11930072
> 
> 赞同：0
> 
> 时间：2012-08-13T07:45:26.203
> 
> 标签：groovy, compilation

在使用 goovyc 查看 groovy 编译过程时，我观察到 groovy 附带的 groovc 工具是一个在内部运行 java 主类 (org.codehaus.groovy.tools.GroovyStarter) 的脚本。那么这是否意味着当使用 groovc 时，groovy 编译本身发生在 jvm 进程中，它解析源文件，然后将它们转换为字节码，所有这些都使用 jvm 进程发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:56:38.733

不确定我是否理解这个问题，但我相信答案是肯定的。Groovy 由 java 进程编译为字节码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:00:30.063

是的。javac 也是如此。事实上，大多数编程语言都有用语言本身编写的主要编译器。这种做法称为[自举](http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29)。

# javascript - javascript动态更改图像src的位置 - 没有JQuery

> ID：11930079
> 
> 赞同：2
> 
> 时间：2012-08-13T07:45:58.167
> 
> 标签：javascript, html, image, src

我有几个页面以相同的方式设置。每个页面大约有 10 到 15 张图像，如果单击它们，图像会发生变化并变得无法单击。我为此提供的代码是：

```
function ToggleOnclick(elID)
{
var el = document.getElementById(elID);
var loc = document.getElementsByClassName("wrapper");

if (el.onclick)
{
        // Disable the onclick
        el._onclick = el.onclick;
        el.onclick = null;
        el.src = loc.id + "/" + el.name + "Clicked.png";
}
} 
```

图片的html是：

```
 ....
  <div class="content">
   <div class="wrapper" id="som">
   <div class="img0"><img src="som/doos.png" alt="doos" name="doos" id="doos" onclick="ToggleOnclick(this.name);" /></div>
   <div class="img1"><img src="som/beer.png" alt="beer" name="beer" id="beer" onclick="ToggleOnclick(this.name);" /></div>
   <div class="img2"><img src="som/bel.png" alt="bel" name="bel" id="bel" onclick="ToggleOnclick(this.name);" /></div>
   .... 
```

因为我需要制作大约 20 个 html 文件，所以我想将图像的源位置添加为 wrapper-div 的 id-tag。

我对javascript知之甚少，我很难找到我要找的东西。也可能是因为不是母语人士，也不知道我在寻找什么。

请记住我的文件：

1.  由于我们客户的规格，必须在较旧的浏览器版本中工作
2.  无法用 JQuery 修复（请不要在评论或答案中进行讨论。我不能在这个项目中使用它。不讨论。）

**tldr；我需要一种方法来根据 wrapper-div 的 id-tag 设置 img src**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:55:17.037

[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)给出一个集合而不是单个元素

将元素传递给，`ToggleOnclick`这样您就不必在函数中获取它

```
function ToggleOnclick(el)
{
//var loc = document.getElementsByClassName("wrapper")[0];//assuming there is only one wrapper
if (el.onclick)
{
        // Disable the onclick
        el._onclick = el.onclick;
        el.onclick = null;
        //el.src = loc.id + "/" + el.name + "Clicked.png";
        el.src = el.src.replace(".png", "Clicked.png");
}
}
<img src="som/doos.png" alt="doos" name="doos" id="doos" onclick="ToggleOnclick(this);" /> 
```

# c# - 为链接到单个表的多个父表创建关系

> ID：11930084
> 
> 赞同：2
> 
> 时间：2012-08-13T07:46:58.747
> 
> 标签：c#, entity-framework, code-first, entity-framework-5

我有两个表（Person 和 Business，都有一个唯一的 ID 列）。两者是不同的，捕获一个个人（Person）和一个捕获法人实体（Business）。但是它们的地址是共同的，所以 Address 表包含两个字段，fkEntityID 和 fkEntityTypeID，它们将与表 Person 相关，如下所示：

人员表 -> 地址表人员 ID = fkEnityID 和枚举人员 = fkEntityTypeID

业务表 - >地址表业务 ID = fkEnityID 和一个枚举业务 = fkEntityTypeID

如何首先使用枚举作为外键的一部分在代码中定义关系？

```
 // Relationships
            this.HasOptional(t => t.Person)
                .WithMany(t => t.Addresses)
                .HasForeignKey(d => d.fkEntityID); 
```

# java - 将doc转换为pdf

> ID：11930087
> 
> 赞同：1
> 
> 时间：2012-08-13T07:47:01.547
> 
> 标签：java, openoffice-base

我想将 word doc 转换为 pdf 格式。我有一个java的云基础服务器。但问题是我不能在上面安装openoffice。我还有其他选择吗？或者我可以使用 OpenOffice API 而不在服务器上安装 open office。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:55:46.740

> 我还有其他选择吗？或者我可以使用 OpenOffice API 而不在服务器上安装 open office 吗？

---> 是的，[OpenOffice.org](http://www.openoffice.org/api/)提供了一个独立于语言的应用程序编程接口 (API)，它允许使用不同的编程语言（例如 C++、Java、Python、CLI、StarBasic、JavaScript、OLE）对办公室进行编程。它允许在其他应用程序中使用 OpenOffice.org 作为服务提供者，使用新功能对其进行扩展或简单地自定义和控制 OpenOffice.org。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:47:06.060

没有多少系统可以做 doc->pdf。由于您有安装限制，您可能需要使用网络上的服务。如果您想简单地转换文档，请查看[Convert.Files 之](http://www.convertfiles.com)类的内容。 如果您想通过数据合并从 Doc 生成 PDF，[Docmosis有一个云服务可以提供帮助。](http://www.docmosis.com)你不需要安装任何东西，但你必须注册。接受的答案不太可能帮助您在没有大量工作的情况下安装 OpenOffice。

# javascript - 通过调用Ajax设置struts bean值

> ID：11930089
> 
> 赞同：1
> 
> 时间：2012-08-13T07:47:32.233
> 
> 标签：javascript, ajax, struts2, struts2-jquery

我在需要调用一个Class方法并执行一些任务的情况下，这将返回一些数据并且需要将相同的数据设置为Struts bean并在jsp页面中动态显示相同的数据

```
<tr>
 <td><s:select id="selectProductCode" list="#session['UDM_Product_Codes']" name="selectProductCode" onchange="callXmethod(this);" /></td>
 <td><s:textfield theme="simple" name="assignedProductBean.assignedProductKey" value="" /></td>
 <td><s:select label="selectRole" id="selectRole" name="roleList" list="assignedProductBean.roleList" /></td>
 <td><b><s:a href="javascript:createRole()">CREATE</s:a></b></td>
 <td></td>
 <td></td>
</tr> 
```

如代码所示。一旦我选择产品，我需要在我的操作类中调用一些方法，它再次将一些数据设置为 bean，这取决于两个字段的其余部分依赖于哪个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:59:07.317

我仍然不确定您面临什么问题。您所描述的很有可能，您只需要处理 Ajax (Jquery)。您可以创建一个 Ajax 方法，该方法可以将值传递给您的 Action 类并返回结果。

我建议你看看[Struts2-Jquery 插件](http://struts.apache.org/2.2.3/docs/json-plugin.html)，因为基于 JSON 的通信更加灵活，并且 jQuery 很好地补充了 JSON，并提供了很多开箱即用的功能。

这是一个例子，看看这一切是如何协同工作的

*   [带有 Struts2、JQuery 和 JSON 插件的 Ajax 动态内容](http://www.zulutown.com/blog/2009/07/12/ajax-dynamic-content-with-struts2-jquery-and-json-plugin/)

# android - 是否可以通过模拟触摸事件激活 Android Beam“Tab to beam”屏幕？

> ID：11930092
> 
> 赞同：0
> 
> 时间：2012-08-13T07:47:50.240
> 
> 标签：android, events, touch, nfc, android-beam

在 ICS 上，当您想要发送一些 NdefMessage 时，您必须触摸屏幕（“触摸发送”）。我想知道是否可以仅使用一些代码发送数据，而无需任何用户触摸。是否可以通过模拟触摸来传送一些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:03:09.593

我想，它不是。这很可能是一个安全问题。如果您强迫用户触摸屏幕，他会意识到至少有一些数据正在离开他的手机。这样，没有人可以嗅探您尝试发送的数据。手机上的 NFC 功能不像 RFID 卡，可以在芯片上永久写入数据。我认为 android 上的 NFC 更像是 NFC 的接口。您可以通过它“管道”数据，但尚无法存储。在用户“发送”数据的那一刻，内部代码被触发以发送您准备的数据。

可能有一种方法可以通过代码发送它，如果你 root 手机，查看内部结构，更改它们，然后构建你的自定义 rom。

# android - Android小部件在待机时丢失变量

> ID：11930095
> 
> 赞同：1
> 
> 时间：2012-08-13T07:48:06.203
> 
> 标签：android, android-widget

我正在为 Android 开发一个非常基本的小部件。我的小部件有一个保持用户选择的变量，它被声明为静态的。问题是，过了一段时间，我怀疑经过长时间的等待，小部件有点清空了，静态变量也变空了。在不丢失其生命“历史”的情况下保存我的小部件状态的解决方案是什么？没有为 AppWidgetProvider 定义 onSaveInstanceState onPause。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:54:27.567

您可以将其保存在`SharePreference`. 每次要使用时，首先检查你的变量是否不为空（null），如果是，则尝试检索保存在`SharedPreferences`. 此外，每次更新变量时，将其保存到 SharedPrefs。

```
if(variable==null){
   variable = getFromSharedPrefs();
}

// Use it further 
```

# python - 如何处理内部类属性依赖？

> ID：11930096
> 
> 赞同：1
> 
> 时间：2012-08-13T07:48:08.303
> 
> 标签：python, list

如果您想更改`on change`属性类中的其他变量，您只需`property`为其编写一个。如果你有一个简单的数据类型，那很好用。但是如果你的变量包含一个复杂的类型，比如一个列表（不是那么不典型），内容本身可以被改变而无需`variable.setter`再次调用。

是否有任何回调或事件可用于跟踪对类的列表属性的更改？还可以做些什么来保持代码干净而不破坏类的内部功能？

例子：

```
class Accumulator(object)
  def __init__(self,all_things):
     # :param all_things: a list of stuff of any kind
     self.__all_things = all_things
  @property
  def all_things(self):
     return self.__all_things
  @all_things.setter
  def all_things(self,input):
      self.__all_things = input 
```

跳出框框思考可能是解决方案。首要任务不是保持类结构的活力，而是找到一种可行的模式并允许使用干净的 API！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:19:15.433

您必须使用列表的自定义子类来检测更改：

```
class MyList(list):
    on_change_callback = None

    def _notify(self):
        if self.on_change_callback is not None:
            self.on_change_callback(self)

    def __setitem__(self, index, value):
        super(MyList, self).__setitem__(self, index, value)
        self._notify()

    # Etc, each mutating method needs to be overridden. 
```

您需要覆盖每个变异方法，调用原始方法（通过`super()`），然后调用`self._notify()`. 有关方法列表，请参阅[模拟容器类型](http://docs.python.org/reference/datamodel.html#emulating-container-types)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:39:48.997

为了允许讨论和增加创造力，我想自己提供以下解决方案：

```
class Accumulator(object):

    def __init__(self,all_things):
       #:param all_things: a sequence or generator of stuff of any kind
       self.__all_things = tuple(all_things)

    @property
    def all_things(self):
        return self.__all_things

    @property
    def all_things(self, all_things):
        self.__all_things = tuple(all_things) 
```

它很干净，是只读的，不会出错或被滥用。现在，与问题结构中的假设相同：如果要更改它，则需要重置它。但是你不必告诉用户，因为这是他唯一的机会。如果用户仍然想知道为什么，他可以阅读希望详细的类文档字符串。

# solr - Solr 3.6 延迟一段时间后，文档正在反映

> ID：11930101
> 
> 赞同：2
> 
> 时间：2012-08-13T07:48:21.393
> 
> 标签：solr, search-engine, solrnet

为 ASP.net 应用程序使用 Solr 3.6。我们正在使用 SolrNet 库。

我们有一个用 asp.net 编写的自定义程序，用于使用 SolrNet 将文档增量添加到 Solr。这将监控将文档插入 Solr 的进度。

问题是，应用程序显示过程已完成，但检查到 Solr 结果，我们在结果中只看到很少的文档，而不是所有文档。尽管 15 分钟后再次检查，但 Solr 结果中现在列出的文档很少，大约是初始结果的两倍。请注意，我们没有执行任何将文档添加到 Solr 的过程。

Solr 自然吗？或者我们可以假设在插入和提交所有文档后立即列出它们？这种行为背后的原因是什么？以及如何处理？

**编辑 1** 在应用程序端一个小时后，我们能够查询 80-90% 的文档。但是 Solr Admin Query 仍然没有列出超过 25% 的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:52:23.930

在您的自定义 ASP.NET 程序完成将文档添加到 Solr 后，您是否正在向 Solr 发出提交？因为在将新文档提交到索引之前，Solr 中的搜索者将看不到它们。

```
 var solr = ServiceLocator.Current.GetInstance<ISolrOperations<IndexEntry>>();
 solr.Add(entry);   
 solr.Commit(); 
```

`<autoCommit>`我猜您会在一段时间后看到文档出现，因为您的 Solr 实例在您的 solrconfig.xml 文件中配置了某种设置。请参阅[此处](http://wiki.apache.org/solr/SolrConfigXml#Update_Handler_Section)了解更多详细信息

要尝试的一件事是，您可以通过 SolrNet 传递“软提交”参数来告诉索引多久提交您已添加到索引中的新文档。这是一小段代码，它显示了`CommitWithin`AddParameter 的用法，它告诉 Solr 在 5 秒内提交文档。

```
var solr = ServiceLocator.Current.GetInstance<ISolrOperations<IndexEntry>>();
solr.Add(entry, new AddParameters { CommitWithin = 5000 }); 
```

我建议使用`CommitWithin`参数而不是显式`Commit()`，因为提交是昂贵的操作，Solr 可以更好地管理这些操作本身。

# c# - 从会话中存储/检索后从动态对象中检索属性

> ID：11930102
> 
> 赞同：5
> 
> 时间：2012-08-13T07:48:22.863
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

在我的 MVC 应用程序中：

在控制器中，我创建了一个动态类型列表，该列表存储在会话中。然后视图会尝试访问对象，但会引发异常：`'object' does not contain a definition for 'a'`

编码 ：

```
// Controller 

List<dynamic> myLists = new List<dynamic>();
for(int i=0; i<3; i++){
    var ano = new { a='a' , b = i };
    myLists.Add(ano);
}

Session["rows"] = myLists; 
```

在我看来

```
// My View
foreach( dynamic row in (Session["rows"] as List<dynamic>)){
    <div>@row</div> // output {a:'a', b :1}
    <div>@row.a</div> // throw the error.
} 
```

**笔记**

1.  在调试时，在监视视图中我可以看到属性/值
2.  在我的情况下，我无法将列表存储在 ViewBag 中，因为我使用 ajax 调用该方法
3.  我尝试使用`var`,`object`而不是`dynamic`=> 相同的结果
4.  我认为这与 MVC 或`Razor engine`
5.  我尝试使用 aspx 视图（不是剃刀视图），结果相同

**为什么我无法访问该属性，如果调试器可以看到它，我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:58:32.120

匿名类型属于`internal`声明它们的程序集。`dynamic`API**尊重可访问**性。由于值在那里（来自“// output...”），我必须得出结论这是一个可访问性问题。**razor/MVC3 的IIRC**早期版本在这种情况下确实存在问题，尽管从内存中该问题消失了其中一个服务包 - 您可能想要检查您是否是最新的 razor / MVC3 / .NET / VS补丁。但是，这里*最简单*的解决方法是声明一个适当的 POCO 类：

```
public class MyViewModelType {
    public char A {get;set;}
    public int B {get;set;}
} 
```

并使用它而不是匿名类型。这也意味着您不需要使用`dynamic`，这在此处是不必要且过大的。

# sql - 如何强制 MS Access 保留其 SQL 格式？

> ID：11930109
> 
> 赞同：12
> 
> 时间：2012-08-13T07:49:05.683
> 
> 标签：sql, ms-access, code-formatting

我在 MS-Access 中有很多 SQL 在工作，我需要对其进行格式化以使其易于阅读。问题是当我在视图之间进行更改时，我最终会将 SQL 压缩成我无法阅读的内容。

当我转到其他视图时，如何强制 SQL 保持其“形状”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T07:49:05.683

[我在这里](http://www.sitepoint.com/forums/showthread.php?782484-SQL-Code-Formatting-in-MS-Access)找到了一个 hack 。秘诀在于将您的查询包含在一个虚拟查询中。像这样：

```
SELECT * FROM (SELECT   <-----here
Table1.Field1,
Table1.Field2
FROM
Table1

WHERE
Table1.Field2 = "Yes") AS query1 <-----here 
```

我已经指出了你在哪里以及如何包装代码。我能看到的唯一问题是，如果您想在设计视图中编辑代码，那么它似乎根本不会选择包含的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-17T14:28:41.703

有时@Pureferret 提出的方法可能会失败，Access 会保持重新格式化 SQL。

我发现一直有效的唯一方法是`UNION ALL`在查询末尾附加一个块。
事实上，由于 Access 不处理`UNION ALL`s 它甚至不会建议在设计模式下进行编辑。
（我试过了，`UNION`但`Overflow`出错了！）

```
SELECT
    ...
    ...
FROM
    ...
WHERE
    ...
UNION ALL SELECT NULL, NULL, NULL FROM ANY_TABLE WHERE NULL 
```

（如果以真实表为目标让您感到困扰，您可以使用数据库的“双”表）

此外，我发现在末尾只添加一行会更“干净”。
但是您需要编写`NULL`与实际查询中选择的字段一样多的 s。

编辑： /!\ 在子查询中使用此方法时要小心，因为它可能会`Query too complex`在使用它的查询中导致一些错误！:(

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-20T13:22:44.267

如果您对您的 PC 具有管理员访问权限（安装时需要），[Access SQL 编辑器](https://fieldeffect.info/wp/access-sql-editor-documentation/)可能是正确的工具。
我从未使用过它：作为一名顾问，我很少有权在我使用的机器上安装东西，但它看起来与我想要的完全一样：SSMS 编辑器的复制品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-29T02:30:43.913

这不会保留格式，但可以重新格式化。

```
Sub FormatSQL()
' self-contained FormatSQL()

' 1) Takes WHATEVER is in the clipboard:
' 2) replaces all comma + space with comma, vbCrLf and 5 spaces,
' 3) replaces ALL double-quotes chr(34) with single-quotes
' 4) puts result in clipboard

' CAUTION - This CAN screw up DOUBLED double-quotes (see below)

' Use to format SQL in MS Access SQL View
'
' Usage:
' 1) Copy source to clipboard (Ctrl-a, Ctrl-c)
' 2) Run this
' 3) Paste to target (Ctrl-v)
'
' Note: Does NOT have a "Done" popup.
'
' To add it Access ribbon, create a function that calls this and
' create a macro that calls the function using RunCode.
'
' Ex:
' Function FmtSQL()
'   Call FormatSQL()
' End Function

'NOTES: Must enable Forms Library: _
'   Tools > References > Microsoft Forms 2.0 Object Library
'or you will get a "Compile error: user-defined type not defined"

Dim indent As String
    indent = "," & vbCrLf & "     "

Dim DataObj As New MSForms.DataObject
DataObj.Clear   ' may prevent crashes

Dim clip As Variant
DataObj.GetFromClipboard
clip = DataObj.GetText

clip = Replace(clip, ", ", indent)

' Replace ALL double-quote with single-quote
' NOTE: This WILL screw up DOUBLED double-quotes, i.e.
' "Write ""My name is Paul."" "

clip = Replace(clip, Chr(34), "'")

DataObj.SetText clip
DataObj.PutInClipboard
Set DataObj = Nothing

' Sub FormatSQL()
End Sub 
```

# ios - Phonegap iOS 通知警报接受用户输入

> ID：11930113
> 
> 赞同：0
> 
> 时间：2012-08-13T07:49:30.393
> 
> 标签：ios, cordova

有没有办法可以在接受用户输入并检索值的 Phonegap iOS 上调用本机通知？像这个：

![本机警报](../Images/0a0a922fa4f7a6a8da103414b9ad3df0.png)

基于此[http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html)，只有两种类型的通知 - notification.alert 和 notification.confirm。

任何想法都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:28:17.623

实际上，官方插件库中[有一个旧的 iphone 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Prompt)。

如果您使用的是 Phonegap 2.0，您可能需要对代码进行少量更改。

# cakephp - CakePHP：在插件元素中使用插件助手

> ID：11930119
> 
> 赞同：1
> 
> 时间：2012-08-13T07:49:49.880
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, helpers, view-helpers

是否可以在 CakePHP 2.x 的插件元素中使用插件助手？

我的目录如下所示：

```
/app/Plugin/
  MyPlugin/
    Controller/
      MyController.php
    View/
      Elements/
        mywidget.ctp
      Helper/
        FooHelper.php 
```

我想要做的是在我的项目中的某处使用小部件 mywidget.ctp。在小部件中，有一个 requestAction() 调用来从控制器获取数据。必须使用 FooHelper 中的某些方法来呈现此数据。在控制器中加载它在这里没有帮助。

我认为，应该可以通过在我的 AppController 的 $helpers 数组中加载 FooHelper 来做到这一点，但我不希望它在网站上的任何地方加载。有没有其他的可能？我已经找到了使用 ClassRegistry::init() 的解决方法，但这似乎不适用于插件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:59:15.630

您应该能够通过`$this->Helpers->load('MyPlugin.Foo');`2.0+ 在视图中加载帮助程序，然后通过正常使用它`$this->Foo->someMethod();`

# javascript - 接受动画

> ID：11930120
> 
> 赞同：12
> 
> 时间：2012-08-13T07:49:54.890
> 
> 标签：javascript, jquery, jquery-ui

**编辑****

在我的文字游戏中，有一个带有 3 个字母单词的网格。

游戏的目的是通过单击侧面的相应字母来拼写单词。

当网格中的某个区域被突出显示时，它会向用户指示要拼写的单词。用户单击网格一侧的字母，它们会移动到突出显示的区域。

目前我有样式来显示单个字母是否正确，但是当一个单词完成时，我需要它来识别它，以便我可以将样式应用于它。

有人可以给我看一些识别正确和错误单词的代码吗？

**当它是一个拖放游戏时，我是这样做的......**

```
 if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {

        $('td[data-word=' + word + ']').addClass('wordglow2');

    } else {

        $('td[data-word=' + word + ']').addClass("wordglow4");
        target.splice(0, guesses[word].length);

    }
}); 
```

**这是单击动画功能的代码...**

```
if (target.length) {
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);
        target.addClass("occupied");
    });
} 
```

**我试过这个...**

```
 if (target.length == 3) {
            if (target.join('') == word) {

                $(this).addClass('wordglow2');

     } else {

            $('td[data-word=' + word + ']').addClass("wordglow4");       
                guesses[word].splice(0, guesses[word].length);

            }
    }); 
```

**还有这个...**

```
if $(('.wordglow3').length == 3) {

                $('td[data-word=' + word + ']').addClass('wordglow2');

     } else if $(('.wordglow').length == 3) { 

                $('td[data-word=' + word + ']').addClass("wordglow4");
                guesses[word].splice(0, guesses[word].length);
            }

    }); 
```

**谢谢！**

如果有帮助，这里有一个小提琴[http://jsfiddle.net/smilburn/3qaGK/9/](http://jsfiddle.net/smilburn/3qaGK/9/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T16:02:55.680

为什么不使用带有**接受/恢复设置的****可拖动/可放置**元素，因为您已经在使用 jQuery UI？

 **这是完成接受/恢复拖放的理论方法：

首先，如果不接受，您需要将可拖动设置为恢复：

```
$(".drag").draggable({ revert: 'invalid' }); 
```

然后，您当然需要定义 droppable 中有效的内容：

```
$(".drop").droppable({ accept: '.drag' });​ 
```

您可以尝试使用选择器来过滤正确的答案，方法是为每个字母设置一个类，`(.addClass("b");)`然后使用`.droppable("option","accept",".b")`. 或者使用jQuery UI 中包含的**魔法粉末。**您可以插入一个函数作为 的值`"accept"`，它的返回值将定义您接受的有效元素： $(".drop").droppable( { accept: function() { // 在此处添加条件以返回 true 或假 } });​</p>

**编辑**

对你的点击事件做同样的事情：

```
$('.drag').on('click', function(e)
{
    e.preventDefault();

    var target     = $('.drop-box.spellword:not(.occupied):first');
    var targetPos  = target.position();
    var currentPos = $(this).offset();
    var b = $(this);

    if(target.length)
    {
        // compare clicked letter with expected letter
        if(b.attr("data-letter") == target.attr("data-letter"))
        {
            b.remove().appendTo('table').css({
            'position' : 'absolute',
            'top' : currentPos.top,
            'left': currentPos.left
            });

            b.animate({
               top  : targetPos.top,
                left : targetPos.left
            }, 'slow', function() {
                b.remove().css({ top: 0, left: 0 }).appendTo(target);
                target.addClass('occupied');
            });
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T17:09:50.027

如果我理解这个问题，您正在寻找一种方法来检查通过选择字母创建的单词的有效性，然后将样式应用于该单词。

这是我会做的：

```
var dict = []; // Create an array with all of the possible words
var word = "";

function createWord(){ // Creates the variable word to be checked against array
  var addToWord = $(this).html(); // Sets the variable addTo Word to the letter selected
  word = word + addToWord; // Adds the selected letter to the current word
};

function checkWord(){
  var i = dict[].length; // Sets incrementor "i" to the length of the array
  while (i){  // While "i" is a positive value
    if (word == dict[i]){ // Checks if the word is equal to the word in that spot of the array
      // If it is, apply the correct styles
    }
    else{ // If it isn't, 
      // Do Nothing
    }
   i = i--; // Decrease i by one, and repeat until the whole array has been checked
  }
};

$('foo bar').click(function(){
  createWord();
  checkWord();
} 
```

祝你好运！希望这可以帮助。

-布赖恩**

# android - 共享图像选项不起作用

> ID：11930121
> 
> 赞同：0
> 
> 时间：2012-08-13T07:49:55.750
> 
> 标签：android

我想从 android.my 中的指定路径共享图像。我的代码正在运行，但图像不能像 facebook、google drive 等那样共享！，我的共享意图不会将图像发送到其他应用程序！。我的代码有什么问题可以帮助我任何人都非常感谢！

这是我的代码：

```
 File wallpaperDirectory = new File("/sdcard/myimage/");
                // have the object build the directory structure, if needed.
                wallpaperDirectory.mkdirs();

                File file = new File(wallpaperDirectory, "Share.jpg");
                try {
                    fOut = new FileOutputStream(file);
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                    fOut.flush();
                    fOut.close();
                    MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(), e.toString(),5000).show();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            Intent sharingIntent = new Intent(Intent.ACTION_SEND);
            Uri screenshotUri = Uri.parse(file.getAbsolutePath());

            sharingIntent.setType("image/jpg");
            sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
            startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

这是我的输出：

![在此处输入图像描述](../Images/4921d9b672544fdf0cc34f1cd3332fa3.png)

单击选项后不会将图像共享给其他应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:15:44.653

我在下面的链接中找到了很好的图像共享教程：

[http://collegewires.com/android/2012/06/android-implementing-a-share-intent/](http://collegewires.com/android/2012/06/android-implementing-a-share-intent/)

我的问题是文件路径不正确之前添加路径`file://`

像下面的代码：

```
 Intent sharingIntent = new Intent(Intent.ACTION_SEND);
                Uri screenshotUri = Uri.parse("file://" + file.getAbsolutePath());

                sharingIntent.setType("image/jpg");
                sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
                startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

现在我的问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:58:03.650

如果您已经在`bitmap`变量中加载了位图，请尝试以下操作：

```
 Uri U = null;
                File folderShare = new File(btnShare.getContext().getExternalFilesDir(null) + "/download/");
                folderShare.mkdirs();
                File fileShare = new File(folderShare, "Image-android.jpg");
                fileShare.delete();
                fileShare = new File(folderShare, "Image-android.jpg");
                if (fileShare.isFile())
                        try {    
                            FileOutputStream out = new FileOutputStream(fileShare);
                            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
                             U = Uri.fromFile(fileShare);
                        } catch (MalformedURLException e) {
                            e.printStackTrace();
                       } catch (FileNotFoundException e) {
                           e.printStackTrace();
                       } catch (IOException e) {
                           e.printStackTrace();                       

                String email_subject = getString(R.string.email_subject);
                String email_content = getString(R.string.email_content);
                String email_chooser = getString(R.string.email_chooser);

                final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

                emailIntent.setType("text/plain");
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, email_subject);
                emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, U);
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, email_content);

                v.getContext().startActivity(Intent.createChooser(emailIntent, email_chooser)); 
```

# jquery - 在 JSP 和 Servlet 中使用 JQuery 的多个按钮操作

> ID：11930125
> 
> 赞同：0
> 
> 时间：2012-08-13T07:50:18.090
> 
> 标签：jquery

我想在 JSP 中放置带有添加、更新、删除、搜索功能的接口。我们可以为所有功能放置一个 servlet。我已经添加了添加功能，并根据我的要求单独完成了按钮的验证部分。我已经添加了下面的所有编码。如果我们不能为所有操作提供一个 servlet，我如何在 jquery 中放置单独的操作。

```
<form id="form-sign-up" class="styled" action="DepartmentServlet" method="post">
            <fieldset>
                <h3>Department </h3>
                <ol>
                    <li class="form-row"><label>Department Id:</label>
                        <input type="text" name="departmentId" id="departmentId" class="text-input required"/><span id="errmsg"></span>
                    </li>
                    <li class="form-row"><label>Department Name:</label>
                        <input type="text" name="departmentName" id="departmentName" class="text-input required"/>
                    </li>
                    <li class="form-row"><label>Department Head:</label>
                        <select name="departmentHead" class="text-input required" id="myDropdown"style="width: 158px"> <option value="">Select Department Head</option>
                            <%

                                String val = "";
                                Department dp = new Department();
                                ResultSet rs = dp.getHeadOfDepartment();
                                while (rs.next()) {
                                    val = rs.getString(2);
                            %>

                            <option value="<%= val%>"><%= val%></option>
                            <%
                                }

                            %>

                        </select>
                    </li>
                    <li class="form-row"><label>Appointed Date:</label>
                        <input id="demo1" name="appointedDate"type="text" maxlength="25" size="25" class="text-input required"><a href="javascript:NewCal('demo1','ddmmmyyyy',true,24)"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
                            <span class="descriptions">pick a date..</span>
                    </li>

                    <li class="button-row">
                        <input type="submit" value="ADD" class="btn-submit img-swap"/>
                        <input type="submit" value="Delete" class="btn-delete img-swap"/>
                        <input type="submit" value="Update" class="btn-update img-swap"/>
                        <input type="submit" value="Search" class="btn-search img-swap"/>
                    </li>
                </ol>
            </fieldset> 
```

```
$(document).ready(function() { 
    $("#departmentId").keypress(function (e)  
    { 
        //if the letter is not digit then display error and don't type anything
        if( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57))
        {
            //display error message
            $("#errmsg").html("Digits Only").show().fadeOut("slow"); 
            return false;
        }   
    });

    $('.btn-delete').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $("#departmentId").val();
            var $parentTag = $("#departmentId").parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"

            // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

    $('.btn-submit').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $(this).val();
            var $parentTag = $(this).parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"
            if($(this).hasClass('email') == true){
                if(!emailReg.test(inputVal)){
                    $parentTag.addClass('error').append($error.clone().text('Enter valid email'));
                }
            }

            // Check passwords match for inputs with class "password"
            if($(this).hasClass('password') == true){
                var password1 = $('#password-1').val();
                var password2 = $('#password-2').val();
                if(password1 != password2){
                    $parentTag.addClass('error').append($error.clone().text('Passwords must match'));
                }
            }

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    }); 
```

## });

```
public class DepartmentServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //Getting the Value from the viewer
        String sdepartmentId=request.getParameter("departmentId");
        String departmentName=request.getParameter("departmentName");
        String departmentHead=request.getParameter("departmentHead");
        String dateTime=request.getParameter("appointedDate");

        //Converting to the String department id to integer
        Integer departmentId=Integer.parseInt(sdepartmentId);

        Department dp=new Department();
        dp.setAppDate(dateTime);
        dp.setDepartHead(departmentHead);
        dp.setDepartId(departmentId);
        dp.setDepartName(departmentName);
        try {
            new Department().insertDepartment(dp);
        } catch (SQLException ex) {
            Logger.getLogger(DepartmentServlet.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:46:08.660

拥有一个充当控制器的单个 servlet 是一种很好的做法。为了使“DepartmentServlet”成为满足所有操作的单点 servlet，以下是对上述代码进行的一些更改

1.  在 jsp/html 页面中添加一个名为 action 的隐藏变量，在 form 标签里面，里面包含了按下相应按钮时要执行的动作。

    `<input type="hidden" name="action" id="action" value=""/>`

    编写一个 jquery 函数，将 action 的值设置为单击的按钮，例如当单击添加按钮时调用下面的代码片段

    `$("#action").val('add')`

2.  在 DepartmentServlet 中，检索操作请求参数值

> ```
>  String action = request.getParameter("action");    
> 
>    if(action.equals("add")){
> 
>    }else if(action.equals("update")){
> 
>    }
>    ....
>    .... 
> ```

# javascript - 日历中的今天日期链接

> ID：11930130
> 
> 赞同：0
> 
> 时间：2012-08-13T07:50:37.840
> 
> 标签：javascript, asp.net

我正在使用 js callender 作为文本框，一切正常，但我试图在 callendar 上添加一个 TODAY 链接，所以当用户点击它时，今天的日期以 dd-mm-yyyy 格式出现在文本框中。

```
 function positionInfo(object) {

  var p_elm = object;

  this.getElementLeft = getElementLeft;
  function getElementLeft() {
    var x = 0;
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    while (elm != null) {
      x+= elm.offsetLeft;
      elm = elm.offsetParent;
    }
    return parseInt(x);
  }

  this.getElementWidth = getElementWidth;
  function getElementWidth(){
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    return parseInt(elm.offsetWidth);
  }

  this.getElementRight = getElementRight;
  function getElementRight(){
    return getElementLeft(p_elm) + getElementWidth(p_elm);
  }

  this.getElementTop = getElementTop;
  function getElementTop() {
    var y = 0;
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    while (elm != null) {
      y+= elm.offsetTop;
      elm = elm.offsetParent;
    }
    return parseInt(y);
  }

  this.getElementHeight = getElementHeight;
  function getElementHeight(){
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    return parseInt(elm.offsetHeight);
  }

  this.getElementBottom = getElementBottom;
  function getElementBottom(){
    return getElementTop(p_elm) + getElementHeight(p_elm);
  }
}

function CalendarControl() {

  var today = new Date();  
  var calendarId = 'CalendarControl';
  var currentYear = 0;
  var currentMonth = 0;
  var currentDay = 0;

  var selectedYear = 0;
  var selectedMonth = 0;
  var selectedDay = 0;

  var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  var dateField = null;

  function getProperty(p_property){
    var p_elm = calendarId;
    var elm = null;

    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    if (elm != null){
      if(elm.style){
        elm = elm.style;
        if(elm[p_property]){
          return elm[p_property];
        } else {
          return null;
        }
      } else {
        return null;
      }
    }
  }

  function setElementProperty(p_property, p_value, p_elmId){
    var p_elm = p_elmId;
    var elm = null;

    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    if((elm != null) && (elm.style != null)){
      elm = elm.style;
      elm[ p_property ] = p_value;
    }
  }

  function setProperty(p_property, p_value) {
    setElementProperty(p_property, p_value, calendarId);
  }

  function getDaysInMonth(year, month) {
    return [31,((!(year % 4 ) && ( (year % 100 ) || !( year % 400 ) ))?29:28),31,30,31,30,31,31,30,31,30,31][month-1];
  }

  function getDayOfWeek(year, month, day) {
    var date = new Date(year,month-1,day)
    return date.getDay();
  }

  this.setDate = setDate;
  function setDate(year, month, day) {
    if (dateField) {
      if (month < 10) {month = "0" + month;}
      if (day < 10) {day = "0" + day;}

      var dateString = day+"-"+month+"-"+year;
      dateField.value = dateString;
      hide();
    }
    return;
  }

  this.changeMonth = changeMonth;
  function changeMonth(change) {
    currentMonth += change;
    currentDay = 0;
    if(currentMonth > 12) {
      currentMonth = 1;
      currentYear++;
    } else if(currentMonth < 1) {
      currentMonth = 12;
      currentYear--;
    }

    calendar = document.getElementById(calendarId);
    calendar.innerHTML = calendarDrawTable();
  }

  this.changeYear = changeYear;
  function changeYear(change) {
    currentYear += change;
    currentDay = 0;
    calendar = document.getElementById(calendarId);
    calendar.innerHTML = calendarDrawTable();
  }

  function getCurrentYear() {
    var year = new Date().getYear();
    if(year < 1900) year += 1900;
    return year;
  }

  function getCurrentMonth() {
    return new Date().getMonth() + 1;
  } 

  function getCurrentDay() {
    return new Date().getDate();
  }

  function calendarDrawTable() {

    var dayOfMonth = 1;
    var validDay = 0;
    var startDayOfWeek = getDayOfWeek(currentYear, currentMonth, dayOfMonth);
    var daysInMonth = getDaysInMonth(currentYear, currentMonth);
    var css_class = null; //CSS class for each day

    var table = "<table cellspacing='0' cellpadding='0' border='0'>";
    table = table + "<tr class='header'>";
    table = table + "  <td colspan='2' class='previous'><a href='javascript:changeCalendarControlMonth(-1);'>&lt;</a> <a href='javascript:changeCalendarControlYear(-1);'>&laquo;</a></td>";
    table = table + "  <td colspan='3' class='title'>" + months[currentMonth-1] + "<br>" + currentYear + "</td>";
    table = table + "  <td colspan='2' class='next'><a href='javascript:changeCalendarControlYear(1);'>&raquo;</a> <a href='javascript:changeCalendarControlMonth(1);'>&gt;</a></td>";
    table = table + "</tr>";
    table = table + "<tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr>";

    for(var week=0; week < 6; week++) {
      table = table + "<tr>";
      for(var dayOfWeek=0; dayOfWeek < 7; dayOfWeek++) {
        if(week == 0 && startDayOfWeek == dayOfWeek) {
          validDay = 1;
        } else if (validDay == 1 && dayOfMonth > daysInMonth) {
          validDay = 0;
        }

        if(validDay) {
          if (dayOfMonth == selectedDay && currentYear == selectedYear && currentMonth == selectedMonth) {
            css_class = 'current';
          } else if (dayOfWeek == 5 || dayOfWeek == 6) {
            css_class = 'weekend';
          } else {
            css_class = 'weekday';
          }

          table = table + "<td><a class='"+css_class+"' href=\"javascript:setCalendarControlDate("+currentYear+","+currentMonth+","+dayOfMonth+")\">"+dayOfMonth+"</a></td>";
          dayOfMonth++;
        } else {
          table = table + "<td class='empty'>&nbsp;</td>";
        }
      }
      table = table + "</tr>";
    }
    // --------------------------- Here I need to add the today date link ----------------------//
  table = table + "<tr class='header'><th colspan='3' style='padding: 3px; '><a href='javascript:hideCalendarControl();' >Today</a></td><th>&nbsp;</td><th colspan='3' style='padding: 3px;'><a href='javascript:hideCalendarControl();'>Close</a></td></tr>";
    table = table + "</table>";

    return table;
  }

  this.show = show;
  function show(field) {

    // If the calendar is visible and associated with
    // this field do not do anything.
    if (dateField == field) {
      return;
    } else {
      dateField = field;
    }

    if(dateField) {
      try {
        var dateString = new String(dateField.value);
        var dateParts = dateString;

        selectedMonth = parseInt(dateParts[0],10);
        selectedDay = parseInt(dateParts[1],10);
        selectedYear = parseInt(dateParts[2],10);
      } catch(e) {}
    }

    if (!(selectedYear && selectedMonth && selectedDay)) {
      selectedMonth = getCurrentMonth();
      selectedDay = getCurrentDay();
      selectedYear = getCurrentYear();
    }

    currentMonth = selectedMonth;
    currentDay = selectedDay;
    currentYear = selectedYear;

    if(document.getElementById){

      calendar = document.getElementById(calendarId);
      calendar.innerHTML = calendarDrawTable(currentYear, currentMonth);

      setElementProperty('display', 'block', 'CalendarControlIFrame');
      setProperty('display', 'block');

      var fieldPos = new positionInfo(dateField);
      var calendarPos = new positionInfo(calendarId);

      var x = fieldPos.getElementLeft();
      var y = fieldPos.getElementBottom();
      x=x+155;
      y=y-22;
      setProperty('left', x + "px");
      setProperty('top', y + "px");
      setElementProperty('left', x + "px", 'CalendarControlIFrame');
      setElementProperty('top', y + "px", 'CalendarControlIFrame');
      setElementProperty('width', calendarPos.getElementWidth() + "px", 'CalendarControlIFrame');
      setElementProperty('height', calendarPos.getElementHeight() + "px", 'CalendarControlIFrame');
    }
  }

  this.hide = hide;
  function hide() {
    if(dateField) {
      setProperty('display', 'none');
      setElementProperty('display', 'none', 'CalendarControlIFrame');
      dateField = null;
    }
  }
}

var calendarControl = new CalendarControl();

function showCalendarControl(textField) {
  calendarControl.show(textField);
}

function hideCalendarControl() {
  calendarControl.hide();
}

function setCalendarControlDate(year, month, day) {
  calendarControl.setDate(year, month, day);
}

function changeCalendarControlYear(change) {
  calendarControl.changeYear(change);
}

function changeCalendarControlMonth(change) {
  calendarControl.changeMonth(change);
}

document.write("<iframe id='CalendarControlIFrame' src='javascript:false;' frameBorder='0' scrolling='no'></iframe>");
document.write("<div id='CalendarControl'></div>"); 
```

但它不起作用我使用此链接中的日历： [日历](http://www.c-sharpcorner.com/uploadfile/raj1979/ac09302007110252am/ac.aspx)

它应该很简单，但它不适合我？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:00:50.283

在文本框旁边插入一个链接，

```
 <asp:TextBox id="txtAbc" runat="server" />
    <a href="javascript:void(0)" id="lnkTodayDate">Today</a>
    <script type="text/javascript">
    $('#lnkTodayDate').click(function(){
        <%=txtAbc.ClientID%>.text = (new Date()).toLocaleDateString("en-US");
    });    
    </script> 
```

# arrays - 将一个数组分成两部分，使每个部分的元素乘积之和最大化

> ID：11930132
> 
> 赞同：0
> 
> 时间：2012-08-13T07:50:44.330
> 
> 标签：arrays, algorithm, dynamic-programming

我想将一个数组分成两部分。如果每个部分元素的乘积等于p1，p2。我们的目标是使 p1+p2 最大化。你能在多项式复杂性中找到它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:07:26.970

由于没有负面元素，只需执行以下操作：

```
foreach element in array
    if element < 1
         add to list1
    else
         add to list2 
```

最大化产品的总和并在线性时间内运行。然后：

```
product1 = 1
foreach element in list1
    product1 = product1 * element 
```

等等。请注意，这将导致空集的乘积为 1 - 这是正确的。

# java - 如何调试检票口中的异常

> ID：11930138
> 
> 赞同：0
> 
> 时间：2012-08-13T07:51:24.870
> 
> 标签：java, wicket

我有这段代码：

```
try {
    System.out.println("????????????????????????????????");
    request.login(username, password);
    System.out.println("FFFFFFFFFFFFFFFF");
} catch (Exception e) {
    System.out.println("!!!!!!!!!!!!!!!!!!" + e.getMessage());    
 e.printStackTrace();            
} 
```

其中 request 是 HttpServletRequest 输出是：

```
????????????????????????????????
12618 ERROR org.apache.wicket.DefaultExceptionMapper  - Unexpected error occurred 
```

我如何调试这段代码并解决问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:54:20.760

您的堆栈跟踪将告诉您它是什么类型的异常。在您的 IDE 中，设置一个异常断点来捕获这种类型的异常（参见下面的链接）。现在，再次调试，执行将在引发异常的确切位置停止。

*   [Eclipse：添加异常断点](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-addexception_viewaction.htm)
*   [IntelliJ 理念：断点](http://www.jetbrains.com/idea/webhelp/breakpoints.html)
*   [NetBeans：FaqDebuggingExceptionBreakpoint](http://wiki.netbeans.org/FaqDebuggingExceptionBreakpoint)

# image - 图像的批量优化

> ID：11930139
> 
> 赞同：0
> 
> 时间：2012-08-13T07:51:26.383
> 
> 标签：image, optimization, image-processing, compression, image-compression

我的客户端上传了大约 500 张图片到服务器，没有一张经过优化。大多数只有 800x600 左右，但文件大小为 700 KB - 1.5 MB。显然这里有很大的优化空间。我尝试在本地做一些事情[http://imageoptim.com/](http://imageoptim.com/)），但它会耗尽我的笔记本电脑并且花费太长时间才能完成。我尝试在我的 VPS 上做一些服务器端（使用[http://lyncd.com/2009/03/imgopt-lossless-optimize-png-jpeg/](http://lyncd.com/2009/03/imgopt-lossless-optimize-png-jpeg/)），但这似乎也花费了太长时间（我们正在谈论9 小时浏览 30 张图片）。

有没有更有效的方法来做到这一点？像（现已不复存在的）smush.it API 这样的东西将是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:48:31.260

我会坚持使用 imageoptim，您可以调整设置以使用不同的技术来加快速度。

这样做不应该花太长时间——对我来说，很多图像通常需要大约 10 分钟，但这取决于它们到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:01:12.353

您可以使用此应用程序的批量转换功能，称为 IrfanView：[http ://www.irfanview.com/](http://www.irfanview.com/)

# java - Apk 扩展文件 - 应用程序许可 - 开发者帐户 - NOT_LICENSED 响应

> ID：11930142
> 
> 赞同：15
> 
> 时间：2012-08-13T07:51:38.537
> 
> 标签：java, android

我正在尝试使用适用于 Android 的 APK 扩展文件扩展。我已将 APK 与扩展文件一起上传到服务器。如果该应用程序先前已发布，我会收到来自服务器的响应 NOT_LICENSED：我使用的代码是：

```
APKExpansionPolicy aep = new APKExpansionPolicy(mContext,
                new AESObfuscator(getSALT(), mContext.getPackageName(), deviceId));
aep.resetPolicy();
LicenseChecker checker = new LicenseChecker(mContext, aep,
                getPublicKey();
checker.checkAccess(new LicenseCheckerCallback() {   
            @Override
            public void allow(int reason) { 
            @Override
            public void dontAllow(int reason) {
                try
                {
                    switch (reason) {
                        case Policy.NOT_LICENSED:
mNotification.onDownloadStateChanged(IDownloaderClient.STATE_FAILED_UNLICENSED);
                            break;
                        case Policy.RETRY:
mNotification.onDownloadStateChanged(IDownloaderClient.STATE_FAILED_FETCHING_URL);
                            break;
                    }
                } finally {
                    setServiceRunning(false);
                }
            }
            @Override
            public void applicationError(int errorCode) {
                try {
mNotification.onDownloadStateChanged(IDownloaderClient.STATE_FAILED_FETCHING_URL);
                } finally {
                    setServiceRunning(false);
                }
            }
        }); 
```

因此，如果应用程序之前未发布，则调用 Allow 方法。如果应用程序先前已发布，但现在未调用 dontAllow 方法。

我努力了：

1.  [http://developer.android.com/guide/google/play/licensing/setting-up.html#test-response](http://developer.android.com/guide/google/play/licensing/setting-up.html#test-response) 这里说，如果您在测试设备上使用开发者或测试帐户，您可以设置特定响应，我使用 LICENSED 作为响应，但仍然得到 NOT_LINCESED。
2.  重置手机，清除 google play store 缓存，应用程序数据。
3.  以不同的组合更改版本代码号仍然不起作用。

**编辑：** 如果其他人遇到这个问题，我会收到来自谷歌支持团队的邮件

> 我们知道新创建的用于测试应用内结算和 Google 许可服务器 (LVL) 的帐户返回错误，并且正在努力解决此问题。敬请期待。同时，您可以使用 2012 年 8 月 1 日之前创建的任何帐户进行测试。所以这似乎是他们的服务器的问题，如果我使用主开发人员线程一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:22:12.150

您是否尝试使用您也用于发布应用程序的发布密钥对应用程序进行签名？

就像应用内计费一样，这只能在您使用正确的发布密钥签署应用程序时进行测试。否则，Google 无法验证请求是否来自正确的应用程序。

# html - CSS - h1 取其余宽度

> ID：11930143
> 
> 赞同：0
> 
> 时间：2012-08-13T07:51:42.053
> 
> 标签：html, css, width

在我的标题框中，我有一个图标 ( `<img>`) 和一个标题 ( `<h1>`)。两者都向左浮动。

我希望我的标题 ( `<h1>`) 占据框的其余部分。所以如果我把 text-decoration: underline; 在 上`<h1>`，下划线必须一直延伸到方框的末尾。

JsFiddle：http: [//jsfiddle.net/44XDa/1/](http://jsfiddle.net/44XDa/1/)

基本上我希望欢迎下的行一直到黄色框的末尾。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:06:51.370

如果该区域中唯一的其他元素已经浮动，则不需要进行`h1`浮动。正如其他海报已经指出的那样，您可能希望使用边框而不是下划线来获得这种效果。这是我的编辑：

[http://jsfiddle.net/44XDa/36/](http://jsfiddle.net/44XDa/36/)

我的解决方案与上述解决方案的主要区别在于，这个解决方案没有为`h1`元素设置宽度。如果您决定将来更改内容标题的宽度，这将更容易`div`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:00:06.177

[检查此更改](http://jsfiddle.net/44XDa/22/)

我使用边框底部来模拟到最后的下划线。我降低了您的行高并添加了填充顶部以将其放置在您拥有的位置。删除文本装饰，您将有一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:00:07.520

干得好：

[http://jsfiddle.net/44XDa/34/](http://jsfiddle.net/44XDa/34/)

这可能是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:19:02.173

**[*现场演示*](http://jsfiddle.net/44XDa/39/)**

嘿，现在习惯并像这样`box-shadow`删除**h1** 并设法达到**底线**`float left`**`line-height`**

 *****[现场演示](http://jsfiddle.net/44XDa/39/)*****

# c - 使用 gcc，严格包含 C99 符号，特别排除 POSIX

> ID：11930144
> 
> 赞同：13
> 
> 时间：2012-08-13T07:51:45.453
> 
> 标签：c, macos, gcc, compiler-construction, linker

经过多年的编程，我正在学习 C 课程。我的导师没有使用 POSIX 机器，我最近因`index`在作业中使用该功能而受到处罚。我做了一些研究，发现虽然`index`它是 AT&T Unix 的早期部分并且符合 POSIX，但它不是 C99 标准的一部分。*我希望 gcc 帮助我找到类似符号的用法*。我正在使用 gcc 4.2（*不是*llvm）在 OSX 上编译

我的第一站研究涉及注意到我的 string.h 文件`index`在以下检查功能测试宏时包装了原型：

```
#if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE) 
```

经过一番挖掘，我发现了这个（在我的`/usr/include/sys/cdefs.h`）：

```
 /* STRICT  Defining _POSIX_C_SOURCE or _XOPEN_SOURCE restricts the
 *      available APIs to exactly the set of APIs defined by the
 *      corresponding standard, based on the value defined.
 *
 *      A correct, portable definition for _POSIX_C_SOURCE is 200112L.
 *      A correct, portable definition for _XOPEN_SOURCE is 600L.
 */ 
```

所以使用这个 gcc 命令：

```
gcc -D _POSIX_C_SOURCE=200112L -pedantic -Wall -std=c99 -o myExec ./mySource.c 
```

我*确实*得到了一个体面的警告：

```
warning: incompatible implicit declaration of built-in function ‘index’ 
```

这让我很困惑，*我*想让程序也无法链接。它让我感到困惑的原因是，我[在 opengroup.org](http://pubs.opengroup.org/onlinepubs/007904975/functions/xsh_chap02_02.html)上读到定义该宏应该**公开**POSIX 符号，而不是隐藏它们。所以这是我的一个简洁的问题：

**如何使 gcc 4.2（在 OSX 10.6 上）在*严格*为C99 且*没有其他可用符号*的环境中编译和链接我的程序？**

理想情况下，我希望**在编译和链接失败期间出现警告**。我希望答案不涉及告诉 gcc 我*正在*编写 POSIX 代码，而我认为这与我想告诉它的相反。我不明白什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T08:38:38.947

1.  抱歉，您不会收到链接错误。图书馆不是这样工作的。该`index`函数*是*标准库的一部分。标准库同时支持多个版本的 C（和 POSIX），并且宏选择暴露哪些原型。

2.  该`-ansi`标志相当于`-std=c89`，所以停止这样做。

3.  公开附加功能是对的`_POSIX_C_SOURCE`，但它也指定要公开*哪个版本*的功能。定义的`_POSIX_C_SOURCE=200112L`意思是`index`出现在`<strings.h>`而不是`<string.h>`。它还在那里。指定 2008 POSIX 将完全摆脱`index`，因为它已从更高版本的 POSIX 标准中删除。

4.  有*一个*宏表示“仅 ANSI C”，即`_ANSI_SOURCE`.

5.  您可以通过添加`-Werror-implicit-function-declaration`.

```
$ gcc -Werror-隐式函数声明 \
    -D_ANSI_SOURCE -pedantic -Wall -std=c99 ...
错误：函数“索引”的隐式声明

```

这似乎适用于所有组合 OS X 10.5/10.8、GCC 4.0/4.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:20:43.080

为了记录：**`icc`**我发现这样做最有帮助

```
icc -no-gcc -diag-enable port-win -fabi-version=2 -std=c99 ... 
```

这将跳过系统头文件中的所有 gcc 特定巫毒，并警告 Windows 上不存在的 POSIXisms。

至于抛出错误，我只会使用`-Werror`.

不幸的是，gcc 不能在系统头文件中关闭 gnu 特定的属性处理。而且，更不幸的是，规定的 gcc 版本不支持`-Werror=<diagnostic>`仅在某些警告时抛出错误的语法。

因此，从本质上讲，您声明的编译器和版本的组合并不能真正帮助您满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:55:47.060

要获得 C99 环境，请将标志传递`-std=c99 -pedantic`给 gcc。这不应定义任何额外的功能测试宏。

但是请注意，这只是省略了*声明*，因为它们侵入了 C99 程序员保留的命名空间。实际的符号仍然可能可用 - 这些不应影响正确 C99 程序的编译，因为它们往往是“弱”符号，但如果您自己声明并使用它们，它们不会强制出错。

# c# - RadEditor 验证消息仅在回发后发送

> ID：11930153
> 
> 赞同：0
> 
> 时间：2012-08-13T07:52:59.893
> 
> 标签：c#, javascript, asp.net, telerik, radeditor

我有一个带有必填字段验证器的 RadEditor。必填字段验证的错误消息仅在回发后才会消失。我在 radeditor 中输入任何文本后，它并没有消失。

我试图为 onblur 事件编写一个 javascript 并隐藏错误消息。但它在 IE8 中没有按预期工作。一旦我输入任何文本，错误消息就会消失，但如果我删除文本并将 radditor 再次设为空白，我不会再次收到错误消息。因此，它没有正确验证必填字段。

我为“onblur”事件编写的javascript：

```
function DisableRequiredMessage(editor, args) {
var element = document.all ? editor.get_document().body : editor.get_document();
$telerik.addExternalHandler(element, "blur", function(e) {
var editor1 = $find("ctl00_ContentPlaceHolder1_ContractExpirationAlertEditor");
var message1 = editor1.get_html();
if (message1 == '<br>' || message1 == '<p>&nbsp;</p>') 
document.getElementById('ctl00_ContentPlaceHolder1_spnEmailBody').style.display = 'block';
else                               
document.getElementById('ctl00_ContentPlaceHolder1_spnEmailBody').style.display = 'none';
});
} 
```

我也尝试过比较文本的长度并做同样的事情：

```
var editor2 = $find("ctl00_ContentPlaceHolder1_ContractPendingEContractEditor");
var message2 = editor2.get_text();
if (message2.length > 1) 
document.getElementById('<%=spnContrPendngEmail.ClientID %>').style.display = 'none';

if (message2.length == 0 || message2.length == 1) 
document.getElementById('<%=spnContrPendngEmail.ClientID %>').style.display = 'block'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:28:08.910

您可以附加到[keydown 事件](http://www.telerik.com/help/aspnet-ajax/editor-attacheventhandler.html)或[OnClientSelectionChange](http://www.telerik.com/help/aspnet-ajax/editor-onclientselectionchange.html)事件并检查内容区域是否为空。如果为空，则显示错误消息。

# jquery - 无法通过 jQuery 分配的类来定位元素

> ID：11930154
> 
> 赞同：0
> 
> 时间：2012-08-13T07:53:17.320
> 
> 标签：jquery, hide, show, addclass, removeclass

我试图显示和隐藏不同的信息块。

```
<div id="modLeftCol">
      <div id="cont1Ctn">Content</div>
      <div id="cont2Ctn">Content</div>
      <div id="cont3Ctn">Content</div>
      <div id="cont4Ctn">Content</div>
</div> 
```

为了最初显示内容的第一个选择，另一个函数通过 id 定位适当的 div，jQuery 将项目设置为阻塞，淡入不透明度并通过 .addClass() 为 div 分配“modActive”类。因此我们得到：

```
<div id="modLeftCol">
      <div id="cont1Ctn">Content</div>
      <div id="cont2Ctn">Content</div>
      <div id="cont3Ctn" class="modActive" style="display: block; opacity: 1;">Content</div>
      <div id="cont4">Content</div>
</div> 
```

要隐藏当前可见，我需要使用“modActive”类来定位 DIV，但使用：

```
$(".modActive").animate({..});
nor
$("div.modActive").animate({..});
nor
$("#modLeftCol > div.modActive").animate({..}); 
```

不工作。我可以在外部样式表中为 .modActive 分配样式，并且它们以元素为目标没有问题。

我可以通过 $("modLeftCol > div") 使脚本工作，但问题是我遇到了一些错误，它将函数应用于#modLeftCol 中的所有 DIV，并且它并不总是删除“modActive”类. 我需要使用 .pushStack() 吗？什么是正确的语法？

这是我的javascript，底部有我的问题函数：

```
$(document).ready(function() {
        //Initialize DOM Elements       
        var mapCtn = $("#mapModalCtn");
        var cityLink = $('#modRightCol a');
        var allInfoCtn = $('#modLeftCol > div');

        //Show the Map Container
        $(".locBox").delegate("a", "click", function(e) {

            // Initialize info for clicked location
            var initLocInfo = $(this).attr("rel") + "Ctn";
            $('#' + initLocInfo).show().css('opacity','1').addClass('modActive');

            // Initialize Button State on Map
            var initLocBtn = $(this).attr("rel") + "Btn";
            $('#' + initLocBtn).css('backgroundPosition','top');

            // Open Map Box
            mapCtn.show().animate({
                opacity: 1
            }, 500);
            e.preventDefault();
        });

        //Hide the Map Container
        $("#modalTitle").delegate("a", "click", function(e) {
            mapCtn.animate({
                opacity: 0
            }, 500, function() {
                mapCtn.hide();
                allInfoCtn.removeClass('modActive').hide();
                cityLink.css('backgroundPosition','bottom');
            });
            e.preventDefault();
        });

        //Show the info for the selected Location on the Map
        $("#modRightCol").delegate("a", "click", function(e) {
            e.preventDefault();
            var locInfo = $(this).attr("rel") + "Ctn";
            var locBtn = $(this).attr("rel") + "Btn";
            var newCtn = $('#' + locInfo);

            //Change Map Location Button State
            cityLink.css('backgroundPosition','bottom');
            $(this).css('backgroundPosition','top');

            //Hide currently visible information
            if (allInfoCtn.hasClass('modActive')) {

                allInfoCtn.animate({
                    opacity: 0
                }, 1000, function(){
                     allInfoCtn.hide().removeClass("modActive");

                     //Show information related to location clicked
                    newCtn.show().animate({
                            opacity: 1
                        }, 1000, function(){
                            newCtn.addClass('modActive');
                        });
                });
            }

        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:06:12.717

因此，我没有尝试以类为目标，而是决定通过类来定位元素的 ID，并使用 .each() 类将 ID 加载到我可以引用的变量中，而不是执行 if 语句。

```
allInfoCtn.each(function() {
                if($(this).hasClass('modActive')) {
                    visibleCtn = $(this).attr('id');
                } 
            }); 
```

# google-chrome - 谷歌 chrome Firebug Lite 不工作

> ID：11930155
> 
> 赞同：0
> 
> 时间：2012-08-13T07:53:27.093
> 
> 标签：google-chrome, firebug

我已经在两台计算机上安装了 Firebug Lite 并更新了 Google chrome 版本，但都坏了。尝试重新安装，什么也没有。
使用 Google 自己的检查器检查 firebug lite，单击检查按钮时返回以下错误

未捕获的类型错误：无法读取未定义的 chrome-extension://bmagokdooijbeehmkpknfglimnifench/firebug-lite.js:2562 17 的属性“addEventListener”

我要检查的网站在 https 上，但那不可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:56:46.990

您应该向 Firebug 报告错误。

# iphone - 目标 C - 确定格式化日期之后的日期

> ID：11930167
> 
> 赞同：0
> 
> 时间：2012-08-13T07:54:29.237
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我有以下格式的 2 个日期：

2012 年 8 月 6 日

我正在使用以下代码来尝试确定哪个日期更晚：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"MMMM d, yyyy"];
        NSString *today = [dateFormatter stringFromDate:[NSDate date]];
        NSLog(@"%@", today);
        NSDate *todayDate = [dateFormatter dateFromString:today];

        NSLog(@"TodayDate: %@", todayDate);
        for (Job *j in appDelegate.jobs){
            if ([j.dueDate laterDate:todayDate]){
                [jobsToDisplay addObject:j];
            }
        } 
```

但是，此代码不起作用，它似乎返回的日期比应有的日期晚了一天 + 1 小时。谁能解释我需要在这里做什么？

非常感谢，

泰辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:26:53.280

您应该将时区设置为 UTC（或任何您使用的）以获得准确的日期。

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]]; 
```

使用以下代码比较日期

```
[NSDate compare:obj] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:32:08.070

您可以使用`compare:`NSDate 的实例方法

```
//If j.dueDate = today
if ([j.dueDate compare:todayDate] == NSOrderedSame) {
        return YES;
    }
//j.dueDate is latest
    else if ([j.dueDate compare:todayDate] == NSOrderedDescending) {
        return YES;
    } 
```

有关更多详细信息[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSComparisonResult](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSComparisonResult)

# php - centos 6.2 上的 mssql_connect 无法正常工作

> ID：11930172
> 
> 赞同：1
> 
> 时间：2012-08-13T07:54:47.350
> 
> 标签：php, sql-server, centos, freetds

信息：

*   服务器：centos 6.2
*   PHP 版本 5.3.3

已安装：freetds；ODBC；php_mssql
selinux 被禁用
mssql.so 在 php.ini 中启用
我按照说明安装：[http](http://www.linuxjournal.com/article/6636)
://www.linuxjournal.com/article/6636 一切正常，odbc_connect 成功但我不能使用 mssql_connect 或 mssql_* （就像未知的乐趣mssql）。

每个人都可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:14:54.097

您使用的安装说明对于您的 Centos 版本来说已经过时了。

相反，我建议你完全恢复你已经完成的安装，然后从包管理器中安装 pacakges：

```
yum install php-odbc php-mssql 
```

可以在此处找到更新的安装说明：

*   [在 Centos 6 上安装 MSSql](http://thebitstream.co.uk/helpful-stuff/install-mssql-on-centos-6)（约 2011 年 9 月）

希望这可以帮助。并且只要 ODBC 函数正常工作，就可以使用 ODBC 函数连接到 mssql 服务器。无需实际使用这些`mssql_*`功能，因为它们由于某种原因不适用于您的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T11:37:53.063

> 重新启动 Apache 服务器
> 
> /etc/init.d/httpd 重启
> 
> [http://howtogetitworking.com/2008/02/26/how-to-install-mssql-extension-for-php-on-unix/](http://howtogetitworking.com/2008/02/26/how-to-install-mssql-extension-for-php-on-unix/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-25T13:26:25.093

您可以逐步查看以下文章。任何查询让我知道 [https://social.technet.microsoft.com/wiki/contents/articles/39838.troubleshooting-mssql-server-for-linux.aspx](https://social.technet.microsoft.com/wiki/contents/articles/39838.troubleshooting-mssql-server-for-linux.aspx)

# java - “PickList”的 Swing / AWT 实现

> ID：11930174
> 
> 赞同：0
> 
> 时间：2012-08-13T07:55:09.407
> 
> 标签：java, swing, user-interface, awt

我正在寻找一个提供与此类似的功能的组件：![一个](../Images/c86891896a2ee1e587be4c9d6bad8309.png)

在谷歌搜索之后，这似乎被称为“PickList”。如果我错了，请纠正我。

到目前为止，我发现了各种语言的实现，但不适用于 Java。实际上，我在 Java 中找到了“PickList”的**三个**实现，但它们都是为 JSF 制作的，而不是 Swing 或 AWT。

[您可以在此处](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=pickList)找到所需功能的简单演示。

任何指向实现此功能的库的指针都将不胜感激。

PS：当然我可以自己构建这个组件。但我更喜欢使用现有的代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:54:01.900

[JideSoft](http://www.jidesoft.com)库中有这样的组件（您可以通过关键字“DualList”在演示应用中快速找到它），但它是一个商业库。我不知道任何开源类似物。

无论如何，自己创建这个组件应该不会花费太多时间——几个按钮、两个列表和一些数据处理。你甚至可以在那里很快实现 DnD。

# python - 谷歌 BigQuery 安装

> ID：11930177
> 
> 赞同：2
> 
> 时间：2012-08-13T07:55:18.410
> 
> 标签：python, google-bigquery

尝试安装 bq 命令行工具仍然没有成功，我已经没有想法了。我尝试使用easyinstall bigquery 安装它，也使用手动提供的路径，例如easy_install [http://code.google.com/p/google-bigquery-tools/downloads/list/bigquery-2.0.7.ta](http://code.google.com/p/google-bigquery-tools/downloads/list/bigquery-2.0.7.tar) ​​r 。以及手动下载运行 setup.py 安装的 tar 文件。

在安装过程中，我提示错误消息：**http://ipython/scipy.org/moin/PyReadline/Intro 上的下载错误：超时 - 找不到某些包！** 所以我通过将pyreadline.py及其库提取到我的python安装来手动安装pyreadline。没有任何运气

已经讨论了类似的问题[https://groups.google.com/forum/?fromgroups#!topic/bigquery-discuss/60X4NS8sgHk[1-25]](https://groups.google.com/forum/?fromgroups#!topic/bigquery-discuss/60X4NS8sgHk%5B1-25%5D)

但是我遇到了 ipython.scipy.org 的相同下载问题。

关于这些缺失包的替代安装的任何想法或者它可能是什么其他问题？

运行 bq：

```
Traceback (most recent call last):
File "C:\Python27\Scripts\bq-script.py", line 5, in <module>
from pkg_resources import load_entry_point
File "C:\Python27\lib\site-packages\distribute-0.6.28-py2.7.egg\pkg_resources.py", line 2815, in <module>
working_set.require(__requires__)
File "C:\Python27\lib\site-packages\distribute-0.6.28-py2.7.egg\pkg_resources.py", line 690, in require
needed = self.resolve(parse_requirements(requirements))
File "C:\Python27\lib\site-packages\distribute-0.6.28-py2.7.egg\pkg_resources.py", line 588, in resolve
raise DistributionNotFound(req) pkg_resources.DistributionNotFound: pyreadline 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:44:18.517

似乎可以从 PyPi 下载所需的 pyreadline，至少似乎已经解决了 pyreadline 的问题。可在 pypi.python.org/pypi/pyreadline 获得

# cpu-architecture - 推测和预测的区别

> ID：11930178
> 
> 赞同：20
> 
> 时间：2012-08-13T07:55:19.663
> 
> 标签：cpu-architecture, prediction, speculative-execution

在计算机体系结构中，

（分支）预测和推测有什么区别？

这些看起来非常相似，但我认为它们之间存在细微差别。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T08:07:07.150

分支预测由处理器完成，以尝试确定条件跳转后将继续执行的位置，以便它可以从内存中读取下一条指令。

推测执行更进一步，并确定执行下一条指令的结果。如果分支预测正确，则使用结果，否则丢弃。

请注意，即使代码中没有实际的条件分支，也可以应用推测执行。处理器可以根据通常会连续执行的几条指令来确定结果，但是可以通过例如算术溢出中断来停止执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-02T12:36:29.120

如果你想投机做某事，你可以通过准确预测投机的路径来增加它有用的机会。

在某些情况下，预测是微不足道的（例如预测加载/存储不会出现段错误）。在其他情况下，这很难（分支预测）。

无论哪种情况，如果发生异常，您都需要能够恢复/丢弃推测计算。

* * *

通过从分支的两个方向推测性地执行指令，并且只保留后来发现是正确路径的行的结果，可以在没有预测的情况下进行推测。

当前的硬件没有将其用于分支，但是对于诸如 x86 指令的并行解码之类的东西，同样的事情发生在更小的本地规模上。解码器在每个可能的指令边界处开始解码，并且只有在前一条指令的解码确定长度后才找出哪个起始位置是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T12:28:16.407

好吧，我是编程和计算机科学的菜鸟，但这是我的结论。这两种“技术”的目的是保持管道充满，防止资源浪费。当处理器遇到条件测试指令时，通常您会期望它等到条件测试完成后再继续执行下一条指令。

在推测执行中，您无论如何都会“希望”条件测试为 TRUE 而不是停止流水线并损害资源来执行指令。否则，您只需丢弃结果。

在分支预测中，您更进一步并根据条件测试的过去结果预测条件是否为真。（您预测程序将分支的方向）。

希望这能说明问题。从这里得到信息和我这学期要上的一门课程。 [http://www.pcguide.com/ref/cpu/arch/int/featSpeculative-c.html](http://www.pcguide.com/ref/cpu/arch/int/featSpeculative-c.html)

# java - 如何访问 oracle 11g 中的默认连接“xe”来创建用户？

> ID：11930181
> 
> 赞同：1
> 
> 时间：2012-08-13T07:55:30.293
> 
> 标签：java, jdbc, oracle11g

我想制作 Java 1.6 - Oracle Express 11g - JDBC(OJDBC6) 代码来创建具有所有权限的用户。现在，我拥有的连接之一是“xe”（我在 SQL Developer 中看到它）。我想让我的java代码访问“xe”，然后在“xe”下（在“其他用户”部分）创建一个用户。我怎样才能做到这一点 ？请帮助我做到这一点。

目前，我手动完成这项工作。我去xe，输入我的密码并登录到xe。然后，我转到“其他用户”部分并在那里创建一个用户。我希望我的代码为我做这一切。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:08:11.653

如果我理解你的问题，我猜你会想从 Java 创建 Oracle 用户，对吧？

一种方法是创建一个带有用户名、密码、表空间名称、授权、特权等参数的数据库存储过程，并`CallableStatement`通过传递所有必要的参数从 Java 调用这个 SP。

# java - Thread.sleep() 不能连续工作

> ID：11930182
> 
> 赞同：0
> 
> 时间：2012-08-13T07:55:39.057
> 
> 标签：java, multithreading, performance

我有一个程序可以读取一些 RSS 提要、解析它们并将链接复制到其他地方。出色地！我想大约每 10 分钟检查一次 RSS 提要以了解可能的更新。我写了这段代码：

```
 @Override
public void run() {
    while (true) {
        // check feeds here
        try {
            Thread.sleep(600000);
        } catch (InterruptedException ex) {
            // exception handing
        }
    }
} 
```

当我运行它一两天时，它可以正常运行。但通常在 3 或 4 天后，它会进入睡眠状态，再也不会醒来！！！所以它不会更新 RSS 提要。

我该如何解决这个问题！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T07:59:51.950

如果我不得不猜测，我会说读取提要的代码中可能存在一个错误，该错误引发了未处理的异常，进而结束了线程。对你来说，线程似乎永远不会醒来，而实际上它已经死了。

```
public void run() {
    while (true) {
        // check feeds here   <<<---- Look for the bug here
        try {
            Thread.sleep(600000);
        } catch (InterruptedException ex) {
            // exception handing
        }
    }
} 
```

Thread.sleep 方法中不太可能存在错误（因为它几乎在任何地方都广泛使用）。无论如何，调试并检查您的线程是否还活着或者它是否已经死亡。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T08:04:20.020

试试 java 执行器库。它们是在 java 5 中引入的，使这种代码更高效、更简洁。

```
ScheduledExecutorService es = Executors.newScheduledThreadPool(1);
es.schedule(new Runnable(){
    @Override
    public void run() {
        //RSS checking
    }
}, 10, TimeUnit.MINUTES); 
```

这些库中有很多内容，因此值得一试。

也许它因为记忆或类似的东西而停止。尝试上述方法每 10 分钟检查一次。

还有一个 Callable（而不是 Runnable）的概念，它允许抛出异常，这可以帮助您调试它。您会得到一个返回的未来对象，您可以使用它来提供帮助。这个链接看起来不错[http://www.javacodegeeks.com/2011/09/java-concurrency-tutorial-callable.html](http://www.javacodegeeks.com/2011/09/java-concurrency-tutorial-callable.html)

# java - 如何减小 jfree 库的大小

> ID：11930187
> 
> 赞同：1
> 
> 时间：2012-08-13T07:55:54.007
> 
> 标签：java, jfreechart, embedded-linux

谁能告诉我如何减小 jcommon-1.0.16.jar 和 jfreechart-1.0.13.jar（主要是 jfreechart-1.0.13.jar ）可执行文件的大小。我需要减小适用于我的嵌入式产品的大小linux环境。

内存是嵌入式中最大的问题……谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:36:08.213

另一个选项是[Maven Shade Plugin](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html "Maven 阴影插件")，它的 minimizejar 选项

```
 <configuration>
          <minimizeJar>true</minimizeJar>
        </configuration> 
```

请记住，只有那些在代码中有直接依赖关系的类才会包含在 jar 中，尽管 Java 代码可以通过许多其他棘手的方式加载类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:12:48.580

[这里](https://stackoverflow.com/questions/7810896/reducing-jar-file-size)有一个问题可能会为您指明正确的方向。 [ProGuard](http://proguard.sourceforge.net/)是最受欢迎的解决方案，但恐怕我没有直接经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T05:20:15.400

我为我的目标平台使用了 JCC 套件，它的库不到 100kb。您需要了解图书馆，然后您可以玩而不必担心大小。:)

# php - CodeIgniter 不理解两个更新查询的位置

> ID：11930193
> 
> 赞同：1
> 
> 时间：2012-08-13T07:56:32.947
> 
> 标签：php, codeigniter

我的模型中有两个功能。第一：

```
 public function updateOwn($game,$own,$user) {

    $data = array(
        'own' => $own
    );

    $q = $this->db->where(array(
        'game' => $game,
        'user' => $user
    ));

    $q = $this->db->update('ownership',$data);

    if($q) { return true; } else { return false; }
} 
```

第二个：

```
 public function updateRate($game,$rate,$user) {

    $data = array(
        'rate' => $rate
    );

    $q = $this->db->where(array(
        'game' => $game,
        'user' => $user
    ));

    $q = $this->db->update('rates',$data);
    $q = $this->db->update('ownership',$data);

    if($q) { return true; } else { return false; }
} 
```

问题是，第一个有效，第二个无效。我的意思是，它可以工作，但它会更新每一行，而不仅仅是那些匹配`game`和`user`. 变量传递良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:03:17.867

where 条件仅适用于第一个更新语句。下面试试。

```
$data = array(
    'rate' => $rate
);

$where = array(
    'game' => $game,
    'user' => $user
);

$q = $this->db->update('rates', $data, $where);
$q = $this->db->update('ownership', $data, $where); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:03:17.923

将 where 数组作为第三个参数传递，以确保它正常工作：

```
$q = $this->db->update('rates',$data,array(
        'game' => $game,
        'user' => $user
    )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:04:03.430

CodeIgniter 会在执行后重置您构建的许多查询参数。您需要在第一次 update() 调用之后重新添加 WHERE 子句。

```
public function updateRate($game,$rate,$user) {

$data = array(
    'rate' => $rate
);

$q = $this->db->where(array(
    'game' => $game,
    'user' => $user
));

$q = $this->db->update('rates',$data);
$q = $this->db->where(array(
        'game' => $game,
        'user' => $user
    ));
$q = $this->db->update('ownership',$data);
if($q) { return true; } else { return false; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:04:19.367

首先，为什么每次都需要设置 $q 变量？其次，在最后一条语句中，您仅检查是否完成了第二次查询。

我会做类似的事情：

```
public function updateRate($game,$rate,$user) {
  $data = array(
    'rate' => $rate
  );

  $this->db->where('game', $game)->where('user', $user);
  $first_query = $this->db->update('rates',$data);

  $this->db->where('game', $game)->where('user', $user);
  $second_query = $this->db->update('ownership',$data);

  return $first_query && $second_query;
} 
```

# java - 如何将字符串值存储在字符串数组中以在单行中打印所有值

> ID：11930198
> 
> 赞同：1
> 
> 时间：2012-08-13T07:56:47.173
> 
> 标签：java, android

```
for(int i=0; i<jArray.length(); i++) {
    HashMap<String, String> map = new HashMap<String, String>();
    json_data = jArray.getJSONObject(i);

    name = json_data.getString("name");
    map.put("id",  String.valueOf(json_data.getString("news_id")));

    map.put("title",json_data.getString("news_title"));
    map.put("shortdescription",json_data.getString("news_short_description"));
    mylist.add(map);
} 
```

这是我的数据，我能够在 Listview lv.setAd..(mylist) 中打印数据

但是我必须在字符串数组中收集所有 news_title 以便我可以在下面显示新闻标题，这样我就可以使用 morqee 在单行中显示所有数据。

请帮助我如何将数据存储在字符串数组中。我是安卓新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:04:11.683

遍历映射列表，然后获取`title`键的值并将它们存储在临时列表中。最后让列表适应一个数组（最后一行）。

```
List<String> titlesList = new ArrayList<String>();
for (Map<String, String> map : myList) {
   titlesList.add(map.get("title"));
}
String[] titles = titlesList.toArray(new String[]{}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:17:32.253

我并没有真正关注你的问题。字符串是一个字符数组，所以嗯？话虽如此，问题究竟是什么意味着您在使用 Json 时遇到了问题，或者确实希望将数据累积到单个字符串中。不确定这里到底有什么问题。因此，根据我有限的理解，有两个单独的想法。

A) Json 问题：在 Java 中将字符串转换为 Json 格式如下所示：

JsonObject temp = new JsonObject(); temp.addProperty(myString);

然后当完成添加到输出创建你的输出字符串

```
String outputString = mySon.toJson(temp); 
```

b）如果您想知道如何将数据累积到单个字符串中，这也很容易

我的字符串 = 我的字符串 + " " + 新字符串数据；

但在 json 模型中继续使用

```
temp.addProperty(myString); //for each item you want to add 
```

# hibernate - 表 CountryList 中的关联引用了未映射的类

> ID：11930199
> 
> 赞同：0
> 
> 时间：2012-08-13T07:56:52.620
> 
> 标签：hibernate, hibernate-mapping

我得到了例外

> 初始 SessionFactory 创建 failed.org.hibernate.MappingException：来自表 CountryList 的关联引用了未映射的类：com.abegaa.model.StateListPojo

对于这两个 hbm 文件之间的休眠映射

第一个 CountryList 和 StateList

```
<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.abegaa.model">

 <class name="CountryListPojo" table="CountryList">
 <id name="Id" column="Id">
 <generator class="increment"></generator>
  </id>

 <many-to-one name="Db_CountryId" column="Db_CountryId" class="StateListPojo"></many-to-one>

  <property name="Db_CountryName" column="Db_CountryName"></property>
  </class>
</hibernate-mapping> 
```

和

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.abegaa.model">
  <class name="StateListPojo" table="StateList">

 <id name="Id" column="Id">
 <generator class="increment"></generator></id>

 <set name="Db_CountryId">
    <key column="Db_CountryId"></key>
<one-to-many class="CountryListPojo"/>
  </set>

  <property name="Db_StateId" column="Db_StateId"/>
  <property name="Db_StateName" column="Db_StateName"/>
  </class>
</hibernate-mapping> 
```

这是我的课。

```
public class CountryListPojo
{

       private long Id;
private String Db_CountryId;
private String Db_CountryName;
    //get and set
} 

 public class StateListPojo 
{

private String Id;
private String Db_CountryId;
private String Db_StateId,Db_StateName;
 //get and set
 } 
```

我不明白我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:08:38.620

试试这个

```
public class CountryListPojo
{

   private long Id;
   private String Db_CountryId;
   private String Db_CountryName;
   private Set<StateListPojo > stateListPojos = new HashSet<StateListPojo ();
//get and set
}

public class StateListPojo 
{

    private String Id;
    CountryListPojo Db_CountryId = new CountryListPojo();
    private String Db_StateId,Db_StateName;
    //get and set
 } 
```

和 hbm 应该有

```
 <?xml version="1.0"?>
 <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
       "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

 <hibernate-mapping package="com.abegaa.model">

  <class name="CountryListPojo" table="CountryList">
      <id name="Id" column="Id">
        <generator class="increment"></generator>
      </id>
    <property name="Db_CountryName" column="Db_CountryName"></property>
    <set name="stateListPojos">
         <key><column name="Db_CountryId" /></key>
         <one-to-many class="StateListPojo" />
     </set>
  </class>
</hibernate-mapping> 
```

和

```
<?xml version="1.0"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
     "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
        <hibernate-mapping package="com.abegaa.model">
            <class name="StateListPojo" table="StateList">

              <id name="Id" column="Id">
                  <generator class="increment"></generator>
              </id>
              <many-to-one class="CountryListPojo" name="Db_CountryId">
                  <column name="Db_CountryId"></column>
               </many-to-one>
              <property name="Db_StateId" column="Db_StateId"/>
              <property name="Db_StateName" column="Db_StateName"/>
           </class>
       </hibernate-mapping> 
```

# qt - 保存小部件的屏幕截图

> ID：11930201
> 
> 赞同：0
> 
> 时间：2012-08-13T07:57:38.173
> 
> 标签：qt, qwidget

我想在 Qt 中保存一个小部件的屏幕截图。我创建了以下应该可以工作的代码：

```
 QWidget* activeWidget = getActiveWidget();//a function that returns the current widget.
  if (activeWidget == NULL)
  {
    return;
  }
  QPixmap screenshot;
  screenshot = QPixmap::grabWidget(activeWidget,activeWidget->rect());
  if(screenshot.isNull()){
    printf("ERROR");
  }
 bool a= screenshot.save("c:\\temp\\asd.jpg", "JPG", 50); 
```

但不幸的是，这似乎不起作用。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:17:59.430

在[这个答案](https://stackoverflow.com/questions/1142502/saving-qpixmap-to-jpeg-failing-qt-4-5#1142555)和[这个论坛帖子](http://www.qtcentre.org/threads/25920-QPixmap-save()-doesn-t-work)中，人们提出以下建议：

很可能，您的应用程序找不到处理 .jpg 文件所需的插件。为了解决此问题，请执行以下操作之一：

*   如果您正在执行静态构建，请添加`QTPLUGIN += qjpeg`到您的 .pro 文件或
*   如果您正在进行动态构建，请将`imageformats`文件夹`%QTDIR%\plugins`放在 .exe 旁边

# php - 当用户处于活动状态时如何继续延长会话寿命？

> ID：11930208
> 
> 赞同：13
> 
> 时间：2012-08-13T07:58:39.967
> 
> 标签：php, session, session-cookies

假设有一个登录会员区的站点/系统，用户很少，但在使用该站点/系统时注销非常不方便。

这可能是会话即将到期，因为用户没有闲置很长时间。即使它们空闲，我也添加了一个周期性的 AJAX 请求，即所谓的心跳，它会更新会话的访问时间和修改时间。我什至在每次用户单击某些东西或调用心跳时添加一个 touch($session_file) 。我也尝试重新生成会话 ID。没有任何帮助。

不幸的是，到目前为止，我无法在本地重现该问题，因为它经常发生，当有更多请求时。一些 php.ini 参数：

```
session.use_cookies = 1
session.use_only_cookies = 1
session.cookie_lifetime = 0
session.gc_probability = 1
session.gc_divisor = 1500
session.gc_maxlifetime = 10800 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:04:42.277

由于会话和身份验证已经通过代码中的一个超级控制器处理，因此至少排除会话破坏应该很容易。

通常只有登录页面会创建会话，因此此时您可以（并且应该）在其中添加一个已知值，例如会话 ID。

其他页面（包括您的心跳）恢复现有会话，因此此时您查找上述值；如果它丢失了，你可以做更多的检查：

*   会话 cookie 是否通过？如果没有，浏览器/cookie 问题。
*   会话 cookie 是否对应`session_id()`？如果没有，会话文件由于垃圾收集而丢失。
*   会话中是否存在已知值？如果没有，会话被截断或有人试图进行会话采用攻击。
*   已知值是否与会话 cookie 对应？如果不是，则会话是通过与 cookie 不同的方式建立的；你可以检查`session.use_only_cookies`设置。

上面的一组检查应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:46:48.667

我想您正在使用内置的 PHP 文件会话存储？它存在已知的竞争条件问题。

当有来自同一会话 ID 的并发请求时，我遇到了丢失会话 ID 的类似问题。由于文件被第一次请求锁定，所有其他并发连接都无法访问文件，并且其中一些生成了新的会话 ID。这些情况也非常罕见，我花了一些时间来定位问题。从那以后，我使用 memcached 进行会话存储，这些问题就消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T20:42:56.943

如果没有进一步的信息，我很难回答这个问题，但是你确定只有当你有更多的流量时才会发生这种情况。可以做什么：

*   添加代码
*   操作系统发行版和版本
*   PHP版本

您是否有任何依赖 IP 的会话检查。如果是这样，可能是您实际上使用了一个代理，该代理每隔一段时间就会提供一次不同的 IP（如 Cloudflare），在这种情况下，您可以使用`HTTP_CF_CONNECTING_IP`来获取实际不变的 IP。

我还注意到一件事：

```
session.use_only_cookies = 1
session.cookie_lifetime = 0 
```

所以cookie实际上会在浏览器关闭时被销毁。是否有可能因为用户关闭选项卡（在某些浏览器中确实清除了 cookie）而导致连接丢失？

正如其他人所建议的那样，我强烈建议您转到数据库会话。使用中央会话存储可以帮助停止竞争条件，它不会完全停止它们，但它确实使它更难。此外，如果你真的得到那么多会话 id，你可能想考虑使用内置 PHP 会话 id 以外的东西，但是内置哈希非常独特，重复的可能性非常低，所以我不认为那是你的问题。

**澄清编辑：**

如果您使用与 Cloudflare 不同的代理，那么您当然需要获取代理集的 HTTP 标头，使用 Cloudflare 就是一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:35:40.843

这是我用过的东西。它使用 javascript 以 10 分钟的间隔“ping”服务器。

```
<form method="POST" target="keepalive-target" id="keepalive-form">
    <input type="hidden" name="keepalive-count" id="keepalive-count">
</form>
<iframe style="display:none; width:0px; height:0px;" name="keepalive-target"></iframe>
<script>
    var kaCount=0;
    setInterval(function()
    {
        document.getElementById("keepalive-count").value=kaCount++
        document.getElementById("keepalive-form").submit();
    },600000);
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T13:09:16.063

所有提供的答案都显示了对该问题的良好洞察力，但我只需要分享我的确切问题的解决方案。我终于能够重现问题并修复它。

所以系统包含两个子系统，比如说管理和客户端界面。管理员在另一个选项卡中以客户端身份登录并在以管理员身份登录时注销客户端界面时意外注销。这样做是因为所有内容都写入一个带有命名空间的会话。我所做的是删除在注销操作时不断破坏会话的代码，并将其替换为会话命名空间取消设置并替换为仅有权访问登录页面的命名空间的访客会话。

# javascript - 为什么只有最新的按钮才能工作？我发现其他按钮的onclick功能为null

> ID：11930214
> 
> 赞同：5
> 
> 时间：2012-08-13T07:59:09.360
> 
> 标签：javascript

```
function B(sName) {
    this.name = sName;
}
B.prototype = {
    instanceCreatButtonCount: 0,
    funA: function () { // alert instance's name
        alert(this.name);
    },
    funB: function () { // create a button which clikced can alert this instance's name through funA;
        var that = this;
        B.prototype.instanceCreatButtonCount++;
        var id = "_id" + that.instanceCreatButtonCount;
        var str = "<button id='" + id + "' >clike me</button>";
        var a = document.getElementById("btns");
        a.innerHTML += str;
        var btn = document.getElementById(id);
        btn.onclick = function () {
            that.funA();
        };
    }
};
var b1 = new B("Jim");
var divB1 = document.getElementById("b1");
divB1.onclick = function () {
    b1.funB();
}
var b2 = new B("Dad");
var divB2 = document.getElementById("b2");
divB2.onclick = function () {
    b2.funB();
} 
```

*   单击 divB1 后，我通过 b1.funB() 创建了一个按钮。

*   单击 divB2 后，我通过 b2.funB() 创建了一个按钮。

为什么只能最新按钮警报名称？我发现其他按钮的 onclick 功能为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:08:13.323

当您使用`a.innerHTML += str`追加新元素时，在再次添加新元素之前，整个子树`a`都会被删除；删除还会取消绑定您之前添加的任何事件。

在这种情况下，最好使用适当的 DOM 函数，即`var btn = document.createElement()`, 等等 和`a.appendChild(btn)`.

@ShadowWizard 提供的小提琴：http: [//jsfiddle.net/qR6e8/](http://jsfiddle.net/qR6e8/)

# actionscript-3 - Ye olde管流动画

> ID：11930216
> 
> 赞同：0
> 
> 时间：2012-08-13T07:59:15.680
> 
> 标签：actionscript-3, flash

我尝试通过“管道”网格编写流程动画（基本颜色，没什么花哨的）。（想象一个 5*5 的平铺屏幕）因为管道是在运行时完全动态创建的，所以动画也必须编写脚本。目前，我没有想到如何在动作脚本中做到这一点，没有预先生成的面具。

感谢所有提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:08:10.913

要动态填充曲线，您可能希望将这个封闭公式用于 Bezier 曲线：

```
//start point
var s = new Point(x0, y0);
//cont point
var c = new Point(x1, y1);
//end point
var e = new Point(x2, y2);

var step : Number = 1 / (Point.distance(startPoint, controlPoint) +  Point.distance(controlPoint, endPoint));
var t : Number = 0.0;

private function onEnterFrame(e : Event):void
{
    var p : Point = new Point();
    p.x = (s.x * (1-t) + c.x * t) * (1 - t) + (c.x * (1-t) + e.x * t) * t;
    //do the same for y axis
    drawSomething(p.x, p.y);
    t+= step;
} 
```

这将为曲线样式流设置动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:12:04.343

您希望以与管道游戏中相同的方式在视觉上“模拟”一些液体（例如水）通过管道的流动？

[http://www.mclelun.com/img/blog/120411_pipe_02.jpg](http://www.mclelun.com/img/blog/120411_pipe_02.jpg)

好吧...

你愿意使用bitmapData（像素）来创建这种效果吗？

这就是我将如何去做..

创建一个简短的脚本来逐渐填充一个矩形（块）像素。

IE

```
var animateOn  : Boolean = true;
var startPoint : Point = new Point(beginX , beginY); 
var endPoint   : Point = new Point(finishX, finishY);
var step : Number = 1 / Point.Distance(startPoint, endPoint);
var currentPos : Number = 0;
onEnterFrame(e : Event):void
{
   var p : point = Point.interpolate(startPoint, endPoint, currentPos);
   bitmap.drawRect(p.x - 2, p.y - 2, 4, 4, someColor);
   currentPos += step; 
} 
```

这只是我头顶的一个例子（不会编译）这个想法是继续为每个图块输入正确的 startPoint 和 endPoint。你可以轻松地为它设置动画，而无需使用任何蒙版。

您可以将每种类型的图块定义为点向量，然后通过将图块的位置添加到每个点来从一个点迭代到另一个点。

# java - 如何通过Java注解抛出异常？

> ID：11930218
> 
> 赞同：4
> 
> 时间：2012-08-13T07:59:25.803
> 
> 标签：java, exception, dependency-injection, annotations

在进取的 Java 程序中经常看到以下模式

```
public Something myMethod() throws MyException {
    try {
        // may throw checked DbException:
        Connection c = openDataBase("connectionstring");
        // ... other code throwing more checked exceptions ...
    } catch(DbException e) {
        throw new MyException(e);
    }
    return something;
} 
```

...或任何其他将方法头中*未*声明的已检查异常类型“转换”*为*. 很多时候，这个“try-catch-cast”块必须进入此类的每个方法。

我想知道，**如何实现一个注释，捕获并转换异常**？

使用代码应如下所示：

```
@ConvertException(MyException, DbException)
public Something myMethod() throws MyException {
    // may throw checked DbException:
    Connection c = openDataBase("connectionstring");
    // ...
    return something;
} 
```

当然，也许必须写`MyException.class`或`"MyException"`代替。还应该可以链接这些注释，或列出多个要转换的异常。

我的猜测是注释会引入一个包装函数，其中包含调用原始函数的捕获代码块。然后注释将只有编译时保留（而不是运行时保留）。

我不主张这样做是明智的，这可能不是因为这些注释改变了程序语义。“只是学习”很可能是一个学术问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:04:39.570

注释本身根本不做任何事情。您需要一个工具来评估它们并根据它们进行一些代码更改。

在您的情况下，AspectJ 似乎是最佳匹配。

我的建议是阅读[Ramnivas Laddad 的 AspectJ in Action (2nd ed)](http://www.manning.com/laddad2/)。

从它的[Table of Content](http://www.manning.com/laddad2/excerpt_contents.html)可以看出，它包含一个关于异常软化的章节，这几乎正是您想要的。

并且由于你标记了这个问题`dependency-injection`，假设你使用 Spring，这里是 Spring 自己的[异常翻译机制](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-exception-translation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:06:25.440

是的，这应该可以通过创建一个[注释处理器](http://today.java.net/pub/a/today/2008/04/10/source-code-analysis-using-java-6-compiler-apis.html#plugging-in-the-annotation-processor)来实现，该处理器使用编译器树 api（`javac.tree`包）在编译源代码时对其进行操作。

问题当然是这个注解处理器现在必须在编译代码时出现，并且许多处理源代码的工具（最突出的 IDE）可能不知道它并认为代码无效。

# python - 使用 pyInstaller 创建一个使用 UAC 的 exe

> ID：11930221
> 
> 赞同：1
> 
> 时间：2012-08-13T07:59:27.737
> 
> 标签：python, uac, pyinstaller

我有一个 python 脚本，我想从中创建一个 exe，但它需要管理员权限。我想用 pyInstaller 编译我的脚本，但我不知道它是否有启用 UAC 的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:57:27.847

在平台 SDK 中有一个文件叫做 MT. 可以将清单嵌入到 exe 中的 exe（请参见[此处](https://stackoverflow.com/questions/195109/running-compiled-python-py2exe-as-administrator-in-vista)：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:41:57.810

也许尝试py2exe？所有代码都将在 Linux 上编写，并在 Windows 7 x64 上编译为 .exe。

所有工作都很好，没有管理员权限。

[py2exe官方网站](http://www.py2exe.org/)

# jquery - jQuery.Deferred() - “new” 运算符是可选的吗？

> ID：11930222
> 
> 赞同：5
> 
> 时间：2012-08-13T07:59:33.433
> 
> 标签：jquery, new-operator, jquery-deferred

jQuery 如何实现其 Deferred 对象，以便`new`操作符是可选的`var x = $.Deferred();`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T08:01:58.387

这是实现这一目标的模式......

```
$.Deferred = function() {
    if ( ! (this instanceof $.Deferred)) {
        return new $.Deferred;
    }
} 
```

它之所以有效，是因为`this`在构造函数中设置为新对象。`instanceof`将告诉您 LHS 操作数是否在其原型链中具有 RHS 操作数。如果此条件不成立，该函数将返回对象的实例化版本。

# r - sub 使用 R 中的 subset.ff 函数设置 ff 数据帧

> ID：11930224
> 
> 赞同：1
> 
> 时间：2012-08-13T07:59:45.663
> 
> 标签：r

有谁知道如何使用包`subset.ff`中的功能`ff`？

以下是数据示例：

```
col1 col2 col3 col4 col5 col6 col7
    1    1    1    1    1    1    0
    1    1    1    1    1    1    0
  104   11    3    3    1    1 1089
   63   11    2    3    9    1  734
   11    1    3    1    1    1 -609
   11    1    3    1    1    1 -609
   11    1    3    1    1    1 -609 
```

这是代码：

```
temp2a <- subset.ff(temp1,temp1$col7!="0") #temp1 is the name of the ff data frame 
```

我收到以下错误：

```
Error in `length<-.ffdf`(`*tmp*`, value = 12965531L) : not allowed to change the number of (virtual) columns of ffdf 
```

我正在尝试从数据中获取两个 ff 数据帧子集。一个 col7 等于 0，一个 col7 不等于 0。有谁知道如何使用该`subset.ff`功能或​​其他方式来做我想做的事。我尝试浏览图书馆和整个网络的 pdf，`ffbase`但找不到任何示例。

再次欢呼，

洛坎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:07:49.157

什么`temp1$col7!="0"`给你？是不是像`?subset.ffdf`州一样

```
an expression, ri, bit or logical ff vector that can be used to index x. 
```

可能您需要将其更改为`temp1$col7 != 0`

# iphone - IOS 应用程序更改语言与自定义设置屏幕

> ID：11930228
> 
> 赞同：2
> 
> 时间：2012-08-13T07:59:55.067
> 
> 标签：iphone, ios, localization, multilingual

我开发了多语言、基于导航控制器的应用程序。应用程序的主菜单也有下面的设置屏幕。用户可以通过按下语言按钮更改为应用程序语言。当用户更改语言时，我想刷新主菜单屏幕并设置屏幕语言但我没有。

![设定画面](../Images/9c40cb7ee337dbf47fcc52d8f07ec9d2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:15:23.483

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"nl" ofType:@"lproj"];
NSBundle *bundle = [NSBundle bundleWithPath:path];
NSString *englishWord = @"translate";
NSString *translation = [bundle localizedStringForKey:englishWord value:englishWord table:nil];
NSLog(@"%@ = %@", englishWord, translation); 
```

* * *

```
// nl.lproj/Localizable.strings:
"translate" = "vertaal" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:28:42.323

请记住，Apple 不鼓励在应用程序中选择语言。最好的解决方案是只本地化您的视图并使用 NSLocalizableString，并让应用程序中的语言遵循手机设置的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:02:18.680

在 AppDelegate 中创建一个方法（返回从 plist 加载的语言字符串的字典）。每当用户选择一种语言时，相应地设置 NSUserDefaults，并在应用程序委托中调用该方法。现在在每个控制器的 viewWillAppear 中使用此方法并获取所需的语言字典并加载您的视图。

```
-(NSMutableDictionary*)getCurrentLanguageDictionaryFromResource
{
    NSString *defaultPath;
    defaultPath = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@.plist",[self getAppCurrentSettingsLanguage]] ofType:nil];
    if(languageDictionary !=nil)
    {
        [languageDictionary release];
        languageDictionary=nil;
    }
    languageDictionary  = [[NSMutableDictionary alloc] initWithContentsOfFile:defaultPath];

    return languageDictionary;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T08:02:40.763

如果要更改语言，则需要重新启动应用程序。

为此，您可以使用本地通知再次重新启动您的应用程序，并使用适当的消息向用户显示您的应用程序现在将重新启动。

希望这个描述对你有帮助......

# knockout.js - KnockoutJS 验证插件不显示错误消息

> ID：11930237
> 
> 赞同：1
> 
> 时间：2012-08-13T08:00:41.480
> 
> 标签：knockout.js, knockout-validation

我尝试使用 KnockoutJs[验证插件](https://github.com/ericmbarnard/Knockout-Validation)，但我遇到了问题。在从输入发布数据之前，我验证值，如果它正确，我发布它并将我的视图模型重置为默认状态，如果值不正确，我通过添加一些 css 类将输入包装到红色边框中（或添加错误消息）。问题是这只工作一次：在发布数据后我将我的视图模型重置为默认状态（正如我之前所说），输入字段变为空，如果我尝试发布这个空数据，验证有效，但 css 类没有t 应用（不出现错误消息）。请尝试我的[小提琴示例](http://jsfiddle.net/SamousPrime/dhYVZ/)，有什么问题？

***** [更新]。****

 **所以，我找到了解决方法：只需向 data-bind 属性添加额外的代码

```
validationElement: itemToAdd().Name 
```

它应该是

```
<input data-bind='value: itemToAdd().Name, validationElement: itemToAdd().Name' /> 
```

它有效，但看起来很糟糕。无论如何，如果有人可以修复我以前的代码，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:28:16.753

我整理了一个[小提琴](http://jsfiddle.net/bflemi3/dhYVZ/23/)来举例说明我的答案。

解决此问题的一种方法是让您的`activeAccount`对象有一个属性，我称之为 mine `errors`，它将保存该对象的所有验证消息。

```
var activeAccount = function(data) {
    this.Id = ko.observable(data.id);
    this.Name = ko.observable(data.name).extend({ required: { message: 'Enter account name.'} });
    this.UserId = ko.observable(1);
    this.errors = ko.validation.group(this);
};

var viewModel = {
    items: ko.observableArray([]), 
    itemToAdd: ko.observable(new activeAccount({})),
    createItem: function (item) {
        if (item.errors().length == 0) {
            viewModel.items.push(item);
            viewModel.itemToAdd(new activeAccount({}));
        } else {
            item.errors.showAllMessages();
        }
    }
}; 
```

保存项目后（无论是发布到服务器、推送到 observableArray 还是两者），然后通过将空对象传递给构造函数将`itemToAdd`其设置为 a来“重置”。`new activeAccount({})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:59:26.597

只是改变

```
var t = ko.validation.group(viewModel.itemToAdd()) 
```

至

```
var t = ko.validation.group(viewModel.itemToAdd) 
```**

# oracle11gr2 - 在oracle中通过rownum更新设置行值

> ID：11930244
> 
> 赞同：2
> 
> 时间：2012-08-13T08:01:19.017
> 
> 标签：oracle11gr2, rownum

数据库版本：oracle 11gr2，我的表是这样的：

```
create table t_test(t_id    number,t_value number)
insert into t_test (t_id) values (1);
insert into t_test (t_id) values (2);
insert into t_test (t_id) values (6);
insert into t_test (t_id) values (10);
insert into t_test (t_id) values (3);

t_id  t_value
 1      null
 2      null
 6      null
 10     null
 3      null 
```

我期待的更新是这样的：

```
select t.t_id,row_number() over (order by t.t_id) 
from t_test t

t_id  row_number() over (order by t.t_id) 
 1      1
 2      2
 6      4
 10     5
 3      3 
```

但是更新视图中不允许使用分析功能：

```
update
(select t.value,row_number() over (order by t.t_id) rn
from t_test t)
set value=rn 
```

毫无疑问，它会导致 ORA-01732。如何放置更新查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:19:03.607

试试这个

```
update  t_test 
set t_value = ( select rn  
                   from ( select i.t_id, row_number()  over (order by i.t_id) rn  
                          from t_test i) tab 
                    where tab.t_id= t_test.t_id  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:18:51.083

此解决方案未经测试可能需要一些小改动！

**创建或替换过程 SOME_PROC**

```
BEGIN
 FOR C IN ( select t.value,row_number() over (order by t.t_id) rn
            from t_test t)

 LOOP
     BEGIN 
      UPDATE T_TEST
           SET
           T_VALUE=C.RN;
     END;

END; 
```

# java - Java Swing：最大化 JTable 显示

> ID：11930246
> 
> 赞同：1
> 
> 时间：2012-08-13T08:01:36.957
> 
> 标签：java, swing, layout, jtable, jscrollpane

我目前有一个带有 2 个 Jpanel 的简单 Java GUI，即 panel1 和 panel 2。panel1 用于图像显示和标签显示，它可以正常工作。

面板 2 用于在 JTable 中显示数据。我遇到的问题是在没有垂直滚动窗格的情况下显示表格中的所有数据，而不是带有滚动窗格的表格部分。这在 GUI 中造成了一个令人讨厌的差距，我希望通过一次显示所有表数据来纠正它。

我尝试在包含表格的面板、表格本身以及滚动窗格上使用 setPreferedSize，现在我完全不知所措！任何建议都将一如既往地受到赞赏。

```
import javax.swing.*;
import java.awt.*;
import javax.imageio.*;
import java.io.*;
import java.awt.image.BufferedImage;
import java.util.*;
import javax.swing.table.DefaultTableCellRenderer;

public class GUI2 extends JFrame {

    public int PADDING = 10;
    public GUI2() {

        initUI();
    }

    public final void initUI() {

        // Menu Bar and Menu Items setup
        JMenuBar menuBar;
        JMenu menu;
        JMenuItem menuItem;

        menuBar = new JMenuBar();
        menu = new JMenu("Menu");
        menuBar.add(menu);

        JMenuItem menuNew = new JMenuItem("New");
        menu.add(menuNew);
        JMenuItem menuOpen = new JMenuItem("Open");
        menu.add(menuOpen);
        JMenuItem menuSave = new JMenuItem("Save");
        menu.add(menuSave);
        JMenuItem menuExit = new JMenuItem("Exit");
        menu.add(menuExit);

        setLayout(new GridLayout(4,1));
        setJMenuBar(menuBar);

        JPanel jp1 = new JPanel(new BorderLayout());
        jp1.setBorder(BorderFactory.createEmptyBorder(PADDING, PADDING, PADDING, PADDING));
        jp1.setBorder(BorderFactory.createLineBorder(Color.black));
        jp1.setPreferredSize(new Dimension(800, 300));

        // Create subpanels
        JPanel sp1 = new JPanel();
        JPanel sp2 = new JPanel(new GridLayout(8, 2));
        sp1.setBorder(BorderFactory.createLineBorder(Color.black));

        // Set up sub panel 1
        BufferedImage myPicture = null;
        try{
            myPicture = ImageIO.read(new File("bat.jpg"));
        }catch(IOException e){
            System.out.println("Image not Loaded!");
            e.printStackTrace();
        }

        JLabel picLabel             = new JLabel(new ImageIcon( myPicture ));
        jp1.add(picLabel);

        // For sub panel 2
        JLabel label_location       = new JLabel("Location: ");
        JLabel label_datetime       = new JLabel("Date & Time: ");
        JLabel label_measurementNum = new JLabel("Measurement Number: ");
        JLabel label_vehicleType    = new JLabel("Vehicle Type: ");
        JLabel label_temperature    = new JLabel("Temperature: ");
        JLabel label_weather        = new JLabel("Weather Conditions: ");
        JLabel label_testPersons    = new JLabel("Test Persons: ");
        JLabel label_testType       = new JLabel("Test Type: ");

        String timestamp            = " ";
        Date date                   = new Date();
        timestamp                   = date.toString();

        JTextField  location        = new JTextField();
        JLabel      datetime        = new JLabel(timestamp);
        JLabel      measurementNum  = new JLabel("AZUWADA87623Q");          
        JLabel      vehicleType     = new JLabel("Batmobile");                   
        JTextField  temperature     = new JTextField(); 
        JTextField  weather         = new JTextField();
        JTextField  testPersons     = new JTextField();
        JTextField  testType        = new JTextField();

        sp1.add(picLabel);
        sp2.add(label_location);
        sp2.add(location);
        sp2.add(label_datetime);
        sp2.add(datetime);
        sp2.add(label_measurementNum);
        sp2.add(measurementNum);
        sp2.add(label_vehicleType);
        sp2.add(vehicleType);
        sp2.add(label_temperature);
        sp2.add(temperature);
        sp2.add(label_weather);
        sp2.add(weather);
        sp2.add(label_testPersons);
        sp2.add(testPersons);
        sp2.add(label_testType);
        sp2.add(testType);

        label_location.setHorizontalAlignment(SwingConstants.LEFT);                         

        jp1.add(sp1, BorderLayout.WEST);
        jp1.add(sp2, BorderLayout.EAST);

        add(jp1);

        JPanel jp2 = new JPanel();
        jp2.setPreferredSize(new Dimension(900, 900));

        String[] columnNames = {"", "DAW Referernce Scale", " WIM Vehicle 1"}; 
        Object[][] data = { {"Vehicle Summary", new Integer(100), new Integer(200)},  // Header 1: Green
                            {"Axle Numbers", new Integer(100), new Integer(200)},
                            {"Axle Code", new Integer(100), new Integer(200)},
                            {"Axle Distances (cm)", new Integer(100), new Integer(200)},
                            {"Vehicle Speed (km/h)", new Integer(100), new Integer(200)},
                            {"Gross Weight", new Integer(100), new Integer(200)}, 
                            {"Axle Weight 1", new Integer(100), new Integer(200)},
                            {"Axle Weight 2", new Integer(100), new Integer(200)},

                            // Measurements for Axle 1
                            // Weights
                            {"Axle 1", new Integer(100), new Integer(200)},   // Header 1: Green
                            {"Weights (kg)", " ", " "},
                            {"Axle Weights AW1", new Integer(100), new Integer(200)},
                            {"Wheel Weights WW1R", new Integer(100), new Integer(200)},
                            {"Wheel Weights WW1L", new Integer(100), new Integer(200)},
                            // Dimensions
                            {"Dimensions (cm or cm2)", new Integer(100), new Integer(200)},
                            {"Axle Width AW1", new Integer(100), new Integer(200), new Integer(200)}, 
                            {"Tire Footprints 1R Length", new Integer(100), new Integer(200)},
                            {"Tire Footprints 1R Width", new Integer(100), new Integer(200)},
                            {"Tire Footprints 1R FootPrint", new Integer(100), new Integer(200)},
                            {"Tire Footprints 1L Length", new Integer(100), new Integer(200)},
                            {"Tire Footprints 1L Width", new Integer(100), new Integer(200)},
                            {"Tire Footprints 1L FootPrint", new Integer(100), new Integer(200)},
                            // Speed
                            {"Speed", " ", " "},
                            {"Vehicle Speed", new Integer(100), new Integer(200)},
                            {"Axle Speed", new Integer(100), new Integer(200)},
                            {"Tyre Speed 1R", new Integer(100), new Integer(200)},
                            {"Tyre Speed 1L", new Integer(100), new Integer(200)},

                            // Measurements for Axle 2
                            // Weights
                            {"Axle 2", " ", " "},   // Header 1: Green
                            {"Weights (kg)", " ", " "},
                            {"Axle Weights AW2", new Integer(100), new Integer(200)},
                            {"Wheel Weights WW2R", new Integer(100), new Integer(200)},
                            {"Wheel Weights WW2L", new Integer(100), new Integer(200)},
                            // Dimensions
                            {"Dimensions (cm or cm2)", " ", " "},
                            {"Axle Width AW2", new Integer(100), new Integer(200)}, 
                            {"Tire Footprints 2R Length", new Integer(100), new Integer(200)},
                            {"Tire Footprints 2R Width", new Integer(100), new Integer(200)},
                            {"Tire Footprints 2R FootPrint", new Integer(100), new Integer(200)},
                            {"Tire Footprints 2L Length", new Integer(100), new Integer(200)},
                            {"Tire Footprints 2L Width", new Integer(100), new Integer(200)},
                            {"Tire Footprints 2L FootPrint", new Integer(100), new Integer(200)},
                            // Speed
                            {"Speed", " ", " "},
                            {"Vehicle Speed", new Integer(100), new Integer(200)},
                            {"Axle Speed", new Integer(100), new Integer(200)},
                            {"Tyre Speed 2R", new Integer(100), new Integer(200)},
                            {"Tyre Speed 2L", new Integer(100), new Integer(200)},};

        final JTable table = new JTable(data, columnNames); 

        table.getColumnModel().getColumn(0).setCellRenderer(new CustomRenderer());
        table.setPreferredScrollableViewportSize(new Dimension(500, 70)); 
        table.setFillsViewportHeight(true); 

        JScrollPane scrollPane = new JScrollPane(table); 

        jp2.add(scrollPane);
        add(scrollPane);

        setSize(400,300);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

    }

            //Custom Renderer - does the default rendering except if told the row should be a different color
    public static class CustomRenderer extends DefaultTableCellRenderer{

        public CustomRenderer(){
            super();
            //Customize the rendering however you want
            setBackground(UIManager.getColor("TableHeader.background"));
        }
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {

                try {
                    UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
                } catch (Exception e) {
                    e.printStackTrace();
                }

                GUI2 ex = new GUI2();
                ex.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:06:16.553

如果我理解正确，您想让 JTable 垂直拉伸以占用顶部面板下方的所有可用空间。如果是这样，您需要更改布局管理器。现在您使用 4 行的 Gridlayout。GridLayout 将您的框架拆分为 4 个**高度相等**的垂直块。第一个块包含顶部面板 - `jp1`，第二个块包含`JScrollPane`with`JTable`和两个底部块是空的，但占帧高度的一半。

您可以尝试使用 BoxLayout、BorderLayout 或 GridBagLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:16:53.403

`JTable`本身不提供滚动功能。这通常使用`JScrollPane`. 尝试创建`JScrollPane`，把它放到你的面板上并`JTable`放入`JScrollPane`。看看滚动策略。您可以使用构造函数或`JScrollPane`. 例如，滚动条可能始终出现或仅在需要时自动出现等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:13:10.160

它看起来很不错，有一些变化。

*   用于`setLayout(new GridLayout(0, 1))`仅添加所需数量的行。
*   不要`setPreferredSize()`打开`jp1`and `jp2`; 组件知道它们有多大。
*   `pack()`就在窗前呼唤`setVisible(true)`。

# javascript - 当用户名和密码在html中相等时如何创建登录页面

> ID：11930253
> 
> 赞同：3
> 
> 时间：2012-08-13T08:02:10.650
> 
> 标签：javascript, html

如果密码正确，如何创建进入下一个屏幕的登录页面？

```
<html>
<p> Enter Username and Password </p>
<FORM action="file:///android_asset/www/Browse.html" method="post">
    <P>
    <LABEL for="firstname">Username </LABEL>
              <INPUT type="text" id="Username"><BR>
    <LABEL for="lastname">Password </LABEL>
              <INPUT type="text" id="Password"><BR>
        <INPUT type="submit" value="Send"> <INPUT type="reset">
    </P>
 </FORM>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T08:06:52.940

```
<html>
    <head>
        <title>Login page</title>
    </head>
    <body>
        <h1>Simple Login Page</h1>
        <form name="login">
            Username<input type="text" name="userid"/>
            Password<input type="password" name="pswrd"/>
            <input type="button" onclick="check(this.form)" value="Login"/>
            <input type="reset" value="Cancel"/>
        </form>
        <script language="javascript">
            function check(form) { /*function to check userid & password*/
                /*the following code checkes whether the entered userid and password are matching*/
                if(form.userid.value == "myuserid" && form.pswrd.value == "mypswrd") {
                    window.open('target.html')/*opens the target page while Id & password matches*/
                }
                else {
                    alert("Error Password or Username")/*displays error message*/
                }
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-31T22:27:35.733

在客户端进行密码检查是不安全的，尤其是当密码是硬编码时。

最安全的方法是在服务器端检查密码，但即便如此，密码也不应该以明文形式传输。

可以以“安全的方式”检查密码客户端：

*   密码需要经过哈希处理
*   散列密码用作新 url 的一部分

说“abc”是您的密码，因此您的 md5 将是“900150983cd24fb0d6963f7d28e17f72”（考虑加盐[！](https://en.wikipedia.org/wiki/Salt_(cryptography))）。现在构建一个包含哈希的 url（如[http://yourdomain.com/90015...f72.html](http://yourdomain.com/90015...f72.html)）。

# python - 如何在 PIL 中减小 png 图像文件大小

> ID：11930260
> 
> 赞同：4
> 
> 时间：2012-08-13T08:02:58.320
> 
> 标签：python, django, python-imaging-library

我使用 PIL 将 jpg/bmt 转换和调整大小为 png .. 我可以轻松调整大小并转换为 png，但文件大小是新图像太大

```
im=Image.open(p1.photo)
im_resize = im.resize((400, 400), Image.ANTIALIAS)    # best down-sizing filter
im.save(str(merchant.id)+'_logo.'+'png') 
```

我还需要做什么来减小图像大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:39:46.180

PNG 图像仍然必须保存图像上每个像素的所有数据，因此您可以压缩它们的程度是有限的。

由于您的 400x400 将用作各种“缩略图”，因此进一步减少它的一种方法是使用索引模式：

im_indexed = im_resize.convert("P") im_resize.save(...)

****等待 **** 刚刚在您的示例代码中看到一个错误：您正在保存原始图像，而不是调整大小的图像：

```
im=Image.open(p1.photo)
im_resize = im.resize((400, 400), Image.ANTIALIAS)    # best down-sizing filter
im.save(str(merchant.id)+'_logo.'+'png') 
```

当你应该做的时候：

```
im_resize.save(str(merchant.id)+'_logo.'+'png') 
```

您只是在保存原始图像，这就是它看起来如此之大的原因。可能您不需要对它们使用索引模式。

另一件事：索引模式图像可能看起来很差 - 如果您需要它，一个更好的出路可能是将您的较小尺寸保存为 .jpg 而不是 .png s - 这些可以根据需要变得更小，交易大小为了质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:27:24.933

您可以使用其他工具，例如[PNGOUT](http://en.wikipedia.org/wiki/PNGOUT)

# ruby-on-rails - 更简洁的代码，连接调用

> ID：11930266
> 
> 赞同：0
> 
> 时间：2012-08-13T08:03:14.770
> 
> 标签：ruby-on-rails, haml, string-interpolation

我对 RoR 还是很陌生，并且一如既往地寻找更好、更有效的编码方式。使用以下代码行，是否有更好的方法来实现相同的结果？

`= "#{schedule.time.to_s(:event_date) + " @ " + schedule.time.to_s(:event_time) + " - " + (schedule.time + schedule.duration.to_i.minutes).to_s(:event_time)}"`

这将输出

`Fri, 31 Aug, 2012 @ 10:40 PM - 11:40 PM`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:16:06.003

不太确定时间格式是否可以做得更好，但你的字符串应该更像：

```
"#{schedule.time.to_s(:event_date)} @ #{schedule.time.to_s(:event_time)} - #{(schedule.time + schedule.duration.to_i.minutes).to_s(:event_time)}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:18:30.303

您可以在 schedule helper 中隐藏这条复杂的行，您也可以定义 schedule.end_time

```
module ScheduleHelper
  def schedule_time schedule
    html = ''
    html << schedule.time.to_s(:event_date)
    html << ' @ '
    html << schedule.time.to_s(:event_time)
    html << ' - '
    html << schedule.end_time.to_s(:event_time)
    raw html
  end
end

class Schedule
  def end_time
    self.time + this.duration.to_i.minutes
  end
end

<%= schedule_time schedule %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:19:22.750

首先 - 扔掉几个加号和大括号，以实现这样的目标：

```
= "#{schedule.time.to_s(:event_date)} @ #{schedule.time.to_s(:event_time)} - #{(schedule.time + schedule.duration.to_i.minutes).to_s(:event_time)}" 
```

如果此构造用于多个地方，则将其封装为帮助程序也可能很有用。

# javascript - 图像上传功能将++（+1）份副本添加到下一次上传。出了什么问题或如何重置“selectedImage”

> ID：11930270
> 
> 赞同：0
> 
> 时间：2012-08-13T08:03:17.813
> 
> 标签：javascript, uiimageview, titanium-mobile, appcelerator-mobile

此 ImageUpload 功能有效，但每次我上传新照片时，它都会不断添加副本。那我不是我想要的。当我上传第一张图片时，它可以正常工作。一张图片上传到我的服务器。但是当我继续选择或拍摄新照片时，它会上传同一张照片的两张副本。我上传的第三张图片变成了上传树次，接下来是四次，所以每次上传的副本都会增长。只有当我重新启动应用程序时，它才会再次从一个副本上传开始。我希望有人能看到什么是错的，或者我可以在上传过程后如何重置“selectedImage”。

```
//this variable will hold the image data blob from the device's gallery or camera
    var selectedImage = null;

    var buttonSelectImage = Titanium.UI.createButton({
        width:240,
        height:50,
        top:242,
        title:'Select image'
    });

    buttonSelectImage.addEventListener('click', function(e){
        dialog.show();
    });

    var buttonUpload = Titanium.UI.createButton({
        width:240,
        height:50,
        top:304,
        title:'Send to site'
    });

    //our dialog with the options of where to get an image from
    var dialog = Titanium.UI.createOptionDialog({
        title: 'Choose source...',
        options: ['Camera','Album','Cansel'],
        cancel:2
    });

    //Dialog event listener
    dialog.addEventListener('click',function(e){
        Ti.API.info('You selected… ' + e.index);
        if(e.index == 0){
        //from the camera
        Titanium.Media.showCamera({
        success:function(event){
        selectedImage = event.media; 
        if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO){
        imageThumbnail.image = selectedImage;
        win.add(imageThumbnail);            
        }
        buttonUpload.addEventListener('click', function(e){
        if(selectedImage != null) {
        postToSite();
        }else{
        alert('You must choose a image!');
        }
        });
        win.add(buttonUpload);
        buttonUpload.show();
        },
        cancel:function(){
        //getting image from camera was cancelled
        },
        error:function(error){
        // create alert
        var a = Titanium.UI.createAlertDialog({title:'Camera'});
        // set message
        if (error.code == Titanium.Media.NO_CAMERA){
        a.setMessage('Your cellphone lack the camera function!');
        }else{
        a.setMessage('Unexpected error: ' + error.code);
        }
        // show alert
        a.show();
        },
        allowImageEditing:true,
        saveToPhotoGallery:true
        });
        }
        else if(e.index == 1){
        //obtain an image from the gallery
        Titanium.Media.openPhotoGallery({
        success:function(event){
        selectedImage = event.media;
        // set image view
        Ti.API.debug('Our type was: '+event.mediaType);
        if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO){
        // set image view
        imageThumbnail.image = selectedImage;
        win.add(imageThumbnail);
        }
        buttonUpload.addEventListener('click', function(e){
        if(selectedImage != null) {
        postToSite();
        }else{
        alert('You must choose a image!');
        }
        });
        win.add(buttonUpload);
        buttonUpload.show();        
        },
        cancel:function(){
        //user cancelled the action fron within the photo gallery
        }
        });
        }else{
        //cancel was tapped user opted not to choose a photo
        }
    });
    win.add(buttonSelectImage);

    function randomString(length,current){
    current = current ? current : '';
    return length ? randomString( --length , "abcdefghiklmnopqrstuvwxyz".charAt( Math.floor( Math.random() * 60 ) ) + current ) : current;
    }
    //Post to server
    function postToSite(){
        //create the httpRequest
        var xhr = Titanium.Network.createHTTPClient();
        xhr.onerror = function(e)
            {
                Ti.UI.createAlertDialog({title:'Error', message:e.error}).show();
                Ti.API.info('IN ERROR ' + e.error);
            };
            xhr.setTimeout(40000);

        xhr.onsendstream = function(e){

                ind.value = e.progress ;
                Ti.API.info('ONSENDSTREAM - PROGRESS: ' + e.progress);
                ind.show();
            };

        // Get the sessionID
        var sessionId = Titanium.App.Properties.getString("sessionId");

        //open the httpRequest
        xhr.open('POST','http://example.com/index.php?include=app_support/upload.php&session_id='+sessionId);
            activityIndicator.show();
            buttonUpload.hide();
        xhr.onload = function(){
            //the image upload method has finished
            var json = this.responseText;
            var response = JSON.parse(json);
            if (response.auth == 'false'){
                alert('User validation failed');
            }
            else if (response.upload_status == 'success'){
                ind.hide();
                activityIndicator.hide();
                buttonUpload.hide();
                alert(response.message);
            }else{
                ind.hide();
                activityIndicator.hide();
                buttonUpload.show();
                alert(response.message);
            }
        };
        //send the data
        var r = randomString(5) + '.jpg';
        xhr.send({'form_data[file][value]': selectedImage, 'value': r});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:33:50.730

这可能是您的问题的根源：

```
dialog.addEventListener('click',function(e) {
...
  buttonUpload.addEventListener('click', function(e){ 
```

您正在某些单击事件中添加单击侦听器。因此，每次执行第一次点击事件时，都会在 buttonUpload 中添加另一个点击事件，并执行与调用第一次点击事件一样多的次数。

# search - Wicket 中的通用搜索表单/面板

> ID：11930272
> 
> 赞同：0
> 
> 时间：2012-08-13T08:03:24.300
> 
> 标签：search, wicket, panel, dao

我正在尝试在 Wicket 中实现通用搜索表单/面板。表单应允许在实体中的多个字段中进行搜索（使用 DAO 模式），以便过滤 ListView 或 DataView 的输出。做这个的最好方式是什么？我曾想过使用扩展的 DataProvider 来做到这一点，但我还没有真正看到任何真实的例子。

有没有人实施过这样的事情？一些指针会很好。

**编辑**

一个可能有助于确定答案方向的附加问题：

*   Wicket 模型是否与 DataProviders 结合得很好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:17:32.390

您可以使用搜索方法扩展 IDataProvider：

```
 public interface SearchableDataProvider<T> extends IDataProvider<T> {

    public void setSearchQuery(String... query);

    public void clearSearchQuery();

    @Override
    public Iterator<? extends T> iterator(int first, int count);

    @Override
    public int size();

} 
```

并在您的 EntityManager 中实现此接口，例如 UserManager、ArticleManager 或 AccountManager。

# android - 添加黑莓后无法在 Eclipse 中使用 android 构建项目

> ID：11930277
> 
> 赞同：2
> 
> 时间：2012-08-13T08:04:07.347
> 
> 标签：android, eclipse, blackberry

我在我的 eclipse indigo 中安装了一个已经由 android 安装的黑莓开发者插件。但是在我安装了黑莓之后，我的 Eclipse 得到了一个错误。错误信息是**构建工作区遇到问题**

> 构建过程中发生错误。
> 
> 在项目“AMDP3”上运行构建器“Java Builder”时出错。
> 
> 网络/rim/ejde/外部/sourceMapper/SourceMapperAccess

我认为这是因为我的eclipse很困惑，因为它试图以“黑莓方式”构建一个android项目。

我的问题是：

1.  1 eclipse 可以包含 android 和 blackberry 插件吗（我已经搜索过，有些人说是，有些人说不......所以我试着去做）

2.  根据我的第一个问题，我现在该怎么办？

谢谢 **答案：根据选择的答案，我建议您安装 2 个不同的 eclipse，但如果为时已晚，只需卸载您的 BB 插件：点击帮助->关于->安装软件->卸载**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:02:07.647

如果您的问题是：`Can I run a single instance of Eclipse for both Android and BlackBerry development?`

答案是：是的。

虽然不确定你的错误。如果它有帮助，这里是我的 Eclipse 工作版本的已安装软件列表。![Eclipse - 已安装的软件](../Images/cc1fef0f9dcb5f5c8fb2c48799ea986f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:18:58.640

虽然理论上可以，但我建议不要这样做。

我有一些糟糕的经历，在 Eclipse 中安装 BB 插件会卸载我已经安装的一些指标插件。从那时起，我倾向于为每个平台使用单独的日食。Android插件从来没有这个问题。由于兼容性问题，我也避免将旧 BB 插件安装升级到较新版本。

我通常会在 BlackBerry Developers 页面下载 eclipse+BB 插件包，因为它附带的设置几乎完成，所以我可以节省一些时间。

如果您要这样做，请尝试先安装有问题的（BB），然后再安装 Android 的。

# asp.net - 从 GridView 调用数据

> ID：11930283
> 
> 赞同：0
> 
> 时间：2012-08-13T08:04:28.230
> 
> 标签：asp.net, .net, vb.net, datagrid

我有一个 GridView，里面有一堆这样的 DynamicField；

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="GridDataSource">
<Columns>
<asp:DynamicField HeaderText="Date Submitted" DataField="DATE_CREATED" />
<asp:DynamicField HeaderText="Assigned To" DataField="ASSIGNED_TO" />
<asp:DynamicField HeaderText="Active Account" DataField="Active_Account" />
<asp:DynamicField HeaderText="Client ID" DataField="CLIENT_ID" />
<asp:DynamicField HeaderText="Client Type" DataField="CLIENT_Type" />
</Columns>
</asp:GridView>

<asp:EntityDataSource ID="GridDataSource" OnSelected="TotalRows" runat="server" 
EnableDelete="true">
    <WhereParameters>
        <asp:DynamicControlParameter ControlID="FilterRepeater" />
    </WhereParameters>
</asp:EntityDataSource> 
```

现在它显示正常，正确的数据出现在屏幕上，但是当我尝试使用行号访问该数据时，我总是找到空白单元格。例如，我尝试了以下方法来检查每个单元格，但无济于事；

```
Dim x As Integer = 0
    Dim y As Integer = 0
    While x < GridView1.Rows.Count
        While y < GridView1.Rows(x).Cells.Count
            If Not (GridView1.Rows(x).Cells(y).Text = "") Then
                MsgBox(String.Format("{0},{1},{2}", x.ToString, y.ToString, 
                      GridView1.Rows(x).Cells(y).Text))
            End If
            y = y + 1
        End While
        x = x + 1
        y = 0
    End While 
```

没有显示消息框，因此所有单元格都是空字符串。但我可以清楚地看到它们在屏幕上填充！我究竟做错了什么？

**更新**

在 Pilgerstorfer Franz 建议我寻找 Textbox 元素之后，我使用了以下代码，该代码基本上查看了表中的所有单元格并尝试从中提取数据，如果它不是空白，则显示一个 msgbox（也通知我任何新控件我没有考虑）；

```
If GridView1.Rows(0).RowType = DataControlRowType.DataRow Then
    For r = 0 To GridView1.Rows.Count - 1
        For c = 0 To (GridView1.Rows(r).Cells.Count - 1)
            Dim cell = GridView1.Rows(r).Cells(c)

            For b = 0 To cell.Controls.Count - 1
                If (cell.Controls(b).GetType() Is GetType(TextBox)) Then
                    Dim td = CType(cell.Controls(b), TextBox)
                    Text = td.Text.Trim
                ElseIf (cell.Controls(b).GetType() Is GetType(LiteralControl)) Then
                    Dim td = CType(cell.Controls(b), LiteralControl)
                    Text = td.Text.Trim
                ElseIf (cell.Controls(b).GetType() Is GetType(DynamicControl)) Then
                    Dim td = CType(cell.Controls(b), DynamicControl)
                    Text = td.Table.Columns.Item(c).DisplayName()
                Else
                    MsgBox(String.Format("New Control of type: {0}", cell.Controls(b).GetType().FullName))
                End If
                If Not Text = "" Then
                    MsgBox(String.Format("{0},{1},{2}", c.ToString, b.ToString, Text))
                End If
            Next
        Next
    Next
End If 
```

不幸的是，大多数单元格只包含 DynamicControl 并且由于我将其`DisplayName`放入其中，因此`Text`我每次都只是获取列标题。那么如何从 DynamicControl 中获取文本值属性呢？

**附加信息**

我对这个问题感到更加困惑，因为这是一个我正在更新的项目，所以有两行初始代码；

```
Dim UserID = Convert.ToInt32(GridView1.DataKeys(e.RowIndex).Value)
Dim clientType As String = GridView1.DataKeys(e.RowIndex).Item(1).ToString 
```

这些成功带回了 UserID 和 ClientType。现在我不太了解 DataKeys 但我尝试使用；

```
Dim clientType As String = GridView1.DataKeys(e.RowIndex).Item(Num).ToString 
```

`Num`每次期望它带回其余的行数据时都会增加一，但我只是得到一个索引超出范围错误。

**另一个更新！**

这是 ASPX 页面的另一部分，但我不完全确定它的作用。Pilgerstorfer Franz 创建了一些代码来查找由 dynamicControl 创建的文本框。现在我想知道这里的代码是否会导致使用其他类型的控件而不是文本框。想法？

```
<asp:FilterRepeater ID="FilterRepeater" runat="server" Visible="false">
            <ItemTemplate>
                <h2><asp:Label ID="lblDisplay" runat="server" Text='<%#
Eval("DisplayName") %>' AssociatedControlID="DynamicFilter$DropDownList1" /></h2>
                <asp:DynamicFilter runat="server" ID="DynamicFilter" 
OnSelectedIndexChanged="OnFilterSelectedIndexChanged" />
            </ItemTemplate>
            <FooterTemplate><br /><br /></FooterTemplate>
        </asp:FilterRepeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:38:22.060

根据我的假设（见评论）我做了一个小演示......

```
<asp:DynamicDataManager ID="DynamicDataManager1" runat="server">
        <DataControls>
            <asp:DataControlReference ControlID="GridView1" />
        </DataControls>
</asp:DynamicDataManager>
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
      DataKeyNames="ContactID" DataSourceID="EntityDataSource1" AllowPaging="true" 
       OnRowUpdating="GridView1_RowUpdating">
        <Columns>                
            <asp:DynamicField DataField="ContactID" ReadOnly="true" HeaderText="ContactID" />
            <asp:DynamicField DataField="Title" HeaderText="Title" />
            <asp:DynamicField DataField="FirstName" HeaderText="FirstName" />
            <asp:DynamicField DataField="LastName" HeaderText="LastName" />
            <asp:CommandField ShowEditButton="True" />
        </Columns>
</asp:GridView>
<asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=dbTestIT34_EFEntities"
        DefaultContainerName="dbTestIT34_EFEntities" EnableFlattening="False" EnableUpdate="True"
        EntitySetName="Contacts" EntityTypeFilter="Contact">
</asp:EntityDataSource> 
```

根据我的数据存储，我确实处理了 rowUpdating 事件。不幸的是，访问动态控件中的任何控件并不容易。所以我做了一个非常快速和肮脏的黑客......

```
protected void Page_Init(object sender, EventArgs e)
{
    GridView1.EnableDynamicData(typeof(Contact));
    EntityDataSource1.ContextType = typeof(dbTestIT34_EFEntities);
}
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    int row = 0;
    int firstNameColumn = 2;
    while (row < GridView1.Rows.Count)
    {
        // sorry, a little bit confusing ...
        //     as dynamic control generates other controls dynamically, 
        //     this was the very first thing that worked for me!
        TextBox t = GridView1.Rows[row].Cells[firstNameColumn].Controls[0].Controls[0].Controls[0] as TextBox;
        if (t != null)
            Debug.WriteLine(t.Text);

        row++;
    }
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:59:04.480

遍历控件对我来说从来没有用过，所以最后我放弃了，只是再次查询数据库......嗯，它有效。

# google-maps - 通过 Google Maps API 访问特定帐户的“我的地点”中的位置

> ID：11930287
> 
> 赞同：4
> 
> 时间：2012-08-13T08:04:53.773
> 
> 标签：google-maps, google-maps-api-3

Google 地图允许用户在**“我的地点”中添加和分组地点**。我想以编程方式访问用户“**我**的地点”中的位置，而不是手动下载 KML 文件。我进行了一些搜索，但找不到太多有用的文档或有关此主题的讨论。显然这是可能的，因为[这个 iOS 应用程序](http://itunes.apple.com/us/app/my-places-for-google-maps/id492861440?mt=8)似乎能够访问它。问题是 Google Maps API 或网络服务可以提供哪些信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T22:31:48.930

没有人回答这个问题。经过几天的搜索，我发现了如何做到这一点。

1.  使用谷歌客户端登录获取范围[https://maps.google.com/maps/feeds/](https://maps.google.com/maps/feeds/)的 access_token 。使用 OAuth 2.0 搜索客户端应用程序以获取文档。
2.  [使用https://maps.google.com/maps/feeds/maps/default/full?access_token=xxx](https://maps.google.com/maps/feeds/maps/default/full?access_token=xxx)上的访问令牌访问谷歌地图数据。

# math - 网格中的矩形 - 我需要有关边缘情况的帮助

> ID：11930289
> 
> 赞同：2
> 
> 时间：2012-08-13T08:05:02.440
> 
> 标签：math, language-agnostic, lua

我试图解决的问题如下：

```
In a 2-D space, Given a grid size and a rectangle, calculate the grid cells
occupied (partially or totally) by the rectangle. 
```

“网格大小”的意思是：“16x16 网格”或“32x32 网格”。所有网格都以坐标原点 (0,0) 为中心。

矩形由 4 个浮点数定义：左侧、顶部、宽度和高度。

此操作的结果始终是一个矩形。我想返回左上角单元格的坐标（即 0,0），然后是 retangle 向右和向下占据的单元格数（有点像宽度和高度，但对于单元格）

到目前为止，我已经能够编写一个最有效的算法。它首先要做的是计算网格中单个点所在的单元格坐标。然后，给定矩形，我计算它的左上角和右下角在网格上的位置，然后它是一个简单的减法：

```
-- given a world coordinate, return the coordinates of the cell that would contain it
local function _toGrid(wx, wy)
  return math.floor(wx / __cellSize), math.floor(wy / __cellSize)
end

-- given a box in world coordinates, return a box in grid coordinates that contains it
-- returns the x,y coordinates of the top-left cell, the number of cells to the right and the number of cells down.
local function _toGridBox(l, t, w, h)
  local gl,gt = _toGrid(l, t)      -- top left grid corner
  local gr,gb = _toGrid(l+w, t+h)  -- bottom-right grid corner
  return gl, gt, gr-gl+1, gb-gt+1  -- return top,left,cells to the right, cells to bottom
end 
```

笔记：

*   源代码是 Lua，但我会接受任何编程语言的解决方案，只要它们是可理解的。
*   y 坐标“增加时下降”；这就是许多屏幕系统的工作方式。我认为这对这个问题并不重要，但不要对此感到困惑）。

在 16x16 网格中，0,0 上的矩形，`width`=10 和`height`=20，`gr`将是 0 和`gt`1，因此`_toGrid`将返回 0,0,1,2（1 行，两列，在 0,0 单元格上）。

当矩形从内部“接触”（而不是交叉）一个单元格的下侧或右侧时，就会出现问题。在这种情况下，`_toGrid`返回比我想要的“多一个单元格”。

例如，如果我将前一个矩形向左移动 6 个像素（所以它在 10,0 上），它将“触摸”其包含网格的左侧边框，从 0 到 16。然后`gr`将是1，返回的数据将为0,0,2,2。

如果可能的话，我想避免这种情况。对于“从左侧”到 16 的矩形，我希望它保留在第一个网格单元上。我希望它一旦超过 16 就开始“占用下一个单元格” - 例如当它位于 16.00000001 时。

另外，请注意，这仅适用于右侧和底部。左侧和上部按我的意愿工作。例如，***左***坐标为 16 的矩形应该出现在“右边的第二个单元格”上，而不是第一个。

我确定解决方案并不复杂，但是我已经考虑了一段时间，但似乎没有找到。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:18:31.567

对于底部和右侧，您需要使用`ceil`而不是`floor`. 我不知道任何 Lua，所以这在语法上可能不正确，但你会想要一些类似的东西：

```
local function _toGridBox(l, t, w, h)
  local gl = math.floor(l / _cellSize)
  local gt = math.floor(t / _cellSize)
  local gr = math.ceil((l+w) / _cellSize)
  local gb = math.ceil((t+h) / _cellSize)
  return gl, gt, gr-gl, gb-gt  -- return top,left,cells to the right, cells to bottom
end 
```

从本质上讲，您的问题是该函数`_toGrid`对于您的目的来说是错误的抽象，因为它总是使用`floor`. 显然，您将自己锁定在使用该抽象概念上，从而难以得出正确的答案。

# c# - asp.net defaultCredentials 问题

> ID：11930290
> 
> 赞同：0
> 
> 时间：2012-08-13T08:05:06.377
> 
> 标签：c#, asp.net, authentication, iis, credentials

我有一个 Intranet 站点，它从另一个服务器（也在 Intranet 上）调用 POST 方法。

如果我在 IIS 中将身份验证模式设置为基本身份验证，我可以使用以下内容：

```
HttpWebRequest oReq = (HttpWebRequest)WebRequest.Create(sURL);
 oReq.ContentType = "application/x-www-form-urlencoded";
 oReq.Method = "POST";
 oReq.Timeout = 60000;

 ...

 oReq.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;

 ...

try
{
   HttpWebResponse oResp = (HttpWebResponse)oReq.GetResponse();
   ...
} 
```

以上所有工作都按预期工作。

但是，我需要在 IIS 中将安全性更改为 Windows 身份验证，一旦这样做，我就会在此行不断收到错误 401 未经授权：

```
try
    {
       HttpWebResponse oResp = (HttpWebResponse)oReq.GetResponse();
       ...
    } 
```

这可以通过更改凭据来解决，如下所示：

```
NetworkCredential creds = new NetworkCredential("username","password","domain");
oReq.Credentials = creds; 
```

但这无论如何都不是正确的方法。如何获得默认凭据以也适用于 Windows 身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:16:19.400

如果您有一个网站呼叫另一个网站，那么您就有了第二跳。这是 kerberos 的第二跳问题。

Intranet 站点需要代表最终用户调用第二个站点的权限。

我建议您使用一个名为[DelegConfig](http://blogs.iis.net/brian-murphy-booth/archive/2007/03/09/delegconfig-delegation-configuration-reporting-tool.aspx)的工具。我不能高度推荐它。它是一个简单的 asp.net 应用程序，它会告诉你你的 kerberos 设置有什么问题，并且可以告诉你如何修复它（或者如果你愿意，可以自己做）

我发现我必须首先让客户端到服务器身份验证才能正常工作，但是一旦到了那里，就可以很容易地找出下一跳到 UNC/http/sql 等的问题。

# jquery - jQuery 覆盖 $.post 函数

> ID：11930295
> 
> 赞同：4
> 
> 时间：2012-08-13T08:05:46.293
> 
> 标签：jquery, function, post, methods, overriding

首先，我为我糟糕的英语道歉......希望有人能理解我的问题并帮助我......

我正在使用大量 $.post 调用来开发一个项目，我想通过为所有这些调用添加相同的验证来改进它们。

我不想一一更改所有脚本，所以有没有办法覆盖 $.post 函数以同时向所有脚本添加相同的内容？或者也许是一种在每个 $.post 上触发另一个功能的方法？就像是 ：

```
$.post.each(function(){[...]}); 
```

或者

```
$('body').on('post', function(){[...]}); 
```

谢谢 ！

编辑：终于如我所愿！这是我的代码：

```
// Override $.post
(function(){
    // Store a reference to the original remove method.
    var originalPostMethod = jQuery.post;

    // Define overriding method.
    jQuery.post = function(data){
        // Execute the original method.
        var callMethod = originalPostMethod.apply( this, arguments);

        callMethod.success(function(){
            //console.log('success');
        });
        callMethod.error(function(){
            //console.log('error');
        });
        callMethod.complete(function(){
            //console.log('complete');
            return callMethod;
        });
    }
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:09:55.013

```
$.post = function() {
  var _method = $.post;
  // do something you want
  console.log("do someting");
  return _method.apply($, Array.prototype.slice.apply(arguments));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:07:17.097

您可以创建一个 jQuery-Plug 进行验证，然后将数据发布到服务器。可以在 jQuery[教程](http://docs.jquery.com/Plugins/Authoring)中找到基础知识。

# c# - 将 xml 绑定到相同的代码页

> ID：11930296
> 
> 赞同：0
> 
> 时间：2012-08-13T08:05:47.000
> 
> 标签：c#, windows-phone-7

我正在尝试将 XML 页面绑定到相同的底层代码页。

```
<toolkit:ToggleSwitch Foreground="Transparent" Checked="ToggleSwitch_Checked" IsChecked="{Binding Source={StaticResource appSettings}, Path=LockSetting, Mode=TwoWay}">
    <toolkit:ToggleSwitch.ContentTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical" DataContext="{Binding}">
                <TextBlock Text="locks or unlocks your calender" Style="{StaticResource PhoneTextNormalStyle}"/>
                <TextBlock x:Name="statusBox" Text="{Binding stat1}" Style="{StaticResource PhoneTextTitle3Style}" />
            </StackPanel>
        </DataTemplate>
    </toolkit:ToggleSwitch.ContentTemplate> 
```

我已将数据上下文设置为

```
stat1 = "abn";
InitializeComponent();

aps = this.Resources["appSettings"] as AppSettings;
this.colorpicker.Color = Color.FromArgb(aps.ASetting, aps.RSetting, aps.GSetting, aps.BSetting);
ContentPanel.DataContext = this; 
```

但这根本行不通。任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:57:56.807

当您编写`ContentPanel.DataContext = this`它时，这意味着在这种情况下 XAML 的代码隐藏将为数据绑定提供上下文。更具体地说，当您`{Binding sta1}`在 XAML 中编写时，sta1 必须是后面代码中的属性。也就是说， sta1 应该是这样的：

```
public String sta1 { get; set; } 
```

# flash - 如何在 OpenLaszlo 应用程序中切换到 Flash 全屏模式？

> ID：11930297
> 
> 赞同：1
> 
> 时间：2012-08-13T08:05:47.340
> 
> 标签：flash, fullscreen, openlaszlo

在使用 SWF10 运行时的 OpenLaszlo 应用程序中，如何将应用程序切换到全屏模式？如何检测应用程序的状态，是否有在模式切换时设置的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:41:52.830

不幸的是，全屏功能没有很好地记录。当我为平台实现该功能时，从未添加过文档部分——尽管该功能已记录在 LzView API 中。

这是一个小例子，展示了全屏功能的工作原理：

```
<canvas allowfullscreen="true">

  <button text="Go Fullscreen" onclick="canvas.setAttribute('fullscreen', true)" 
          enabled="${canvas.fullscreen == false}"/>

  <button y="50" text="Leave Fullscreen" onclick="canvas.setAttribute('fullscreen', false)" 
          enabled="${canvas.fullscreen == true}"/>

  <handler name="onfullscreen">
    Debug.info('onfullscreen: canvas.fullscreen=' + canvas.fullscreen);
  </handler>

</canvas> 
```

您必须在画布上将属性 allowfullscreen 设置为 true。当应用程序进入全屏模式时，canvas.fullscreen 属性将设置为 true。相应的事件是 canvas.onfullscreen，您可以在处理程序中使用它。

如果您使用自己的代码将生成的 SWF 嵌入 HTML 页面（而不是 OpenLaszlo 生成的 HTML 页面），请确保您设置了属性/属性

> 允许全屏=“真”

在您的嵌入代码中。

# jquery - 在匿名函数中访问上下文

> ID：11930298
> 
> 赞同：1
> 
> 时间：2012-08-13T08:05:50.817
> 
> 标签：jquery, anonymous-function

我想在下面的代码中访问 processAfterDone，但我得到一个引用错误，因为我在一个匿名函数中。我使用 Base.js 进行类继承。如果你知道比这更好的事情，我愿意接受。我尝试了 self.processAfterDone() 和 this.processAfterDone()。我不知道这个问题是由我、jQuery 还是 Base.js 的工作方式引起的。任何帮助appriciated。现在代码：

```
var Test = Base.extends({ // uses Base.js for class like javascript - see http://dean.edwards.name/weblog/2006/03/base/

    callAjax: function() {
            requestAccessToken().done(function() { // does an ajax call and passes the ajax return object to access .done()
                    console.log("call processAfterDone");
                    processAfterDone();
            });
    },

    processAfterDone: function() {
            console.log("processAfterDone");
            //do more stuff here
    } 
```

})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:14:56.817

通过使用解决了这个问题`.done($.proxy(this, 'processAfterDone'));`我花了 2 天时间才弄清楚。希望这可以帮助很多人。

# f# - f# .net framework 4.0 和 typeproviders

> ID：11930299
> 
> 赞同：1
> 
> 时间：2012-08-13T08:05:54.723
> 
> 标签：f#, type-providers, websharper

好吧，我在堆栈上的第三个问题以及关于同一主题的第三个问题:-)

所以我决定在 appharbor 上上传我在 websharper 中构建的应用程序，但当然存在问题。在尝试使用 Visual Studio 2012 和 .NET Framework 4.5 并遇到对我来说无法解决的奇怪错误（我不想整天谷歌）后，我决定使用 vstudio 2010 和 .NET Framework 4.0。一切都很顺利（我复制了 typeproviders.dll），但是 appharbore 上出现了编译错误。这是一个日志。[http://pastebin.com/r9MtegHH](http://pastebin.com/r9MtegHH)如果你懒得点击这里是一个问题行：

```
D:\temp\ovuxcbrh.4p1\input\borkfork\borkfork\Website\borkData.fs(19,102): error FS0010: Unexpected symbol '=' in type arguments. Expected ',', '>' or other token. [D:\temp\ovuxcbrh.4p1\input\borkfork\borkfork\Website\Website.fsproj] 
```

它在我的 vstudio 2010 上运行良好。代码行是：

```
 type  internal dbSchema = Microsoft.FSharp.Data.TypeProviders.SqlDataConnection<ConnectionString = @"Data Source=IRON;Initial Catalog=borkdorkfork;Integrated Security=True"> 
```

也许有一个问题，因为我还没有在那里配置数据库，但它看起来像别的东西。好吧，我要去那边配置db看看。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T18:07:50.420

使用类型提供程序的代码将在 .NET 4.0 上运行，前提是该代码已使用 F# 3.0 编译器（针对 .NET 4.0）进行编译并引用 FSharp.Core 和 FSharp.Data.TypeProviders 4.3.0.0 并将 Copy Local 设置为 True。

这种情况下的问题是 AppHarbor 为您构建代码。由于它们尚未更新到 .NET 4.5，因此您的代码正在使用 F# 2.0 编译器进行编译，该编译器不理解类型提供程序。

如果 AppHarbor 有办法让您编译自己的二进制文件并部署它们，那将是可行的。

编辑：

我认为这可以在 VS 2010 上为您编译，因为 .NET 4.5 是 .NET 4.0 的就地替代品。它也必须替换 VS 2010 使用的 F# 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:16:17.357

类型提供程序**需要**.NET 4.5。该错误是标准语法错误，因为它希望您关闭三角括号，它认为这不是类型提供程序参数，而是**泛型参数**- F# 2.0 中三角括号的唯一用途。

# html - Bootstrap：在导航栏下填充整个容器减去导航栏高度

> ID：11930307
> 
> 赞同：13
> 
> 时间：2012-08-13T08:06:47.920
> 
> 标签：html, css, twitter-bootstrap, size

在使用 Twitter Bootstrap 样式并使用*导航栏*的页面上，我想用 Google Maps 地图填充导航栏下方的整个容器。为了实现这一点，我在下面添加了 CSS。

我将`html`和`body`元素的大小定义为 100%，以便用于地图的大小定义。然而，这种解决方案会产生一个问题：

地图的高度现在与整个页面的高度相同，这会产生一个滚动条，我可以滚动导航栏添加的 40 像素。如何将地图的大小设置为`100% - 40px`导航栏的大小？

```
#map {
        height: 100%;
        width: 100%;
}

#map img {
        max-width: none;
}

html, body {
        height: 100%;
        width: 100%;
}

.fill { 
        height: 100%;
        width: 100%;
}

.navbar {
        margin-bottom: 0;
} 
```

为了完整起见，HTML：

```
<!DOCTYPE html>
<html lang="en">
        <head>
                <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
                <!-- Stylesheets -->
                <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
                <link rel="stylesheet" type="text/css" href="css/core.css">
        </head>
        <body>
                <div class="navbar">
                        <div class="navbar-inner">
                        </div>
                </div>
                <div class="container fill">
                        <div id="map"> 
                        </div>
                </div>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T08:47:43.893

你可以用绝对定位来解决这个问题。

```
.fill {
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    position: absolute;
    width: auto;
    height: auto;
} 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/unbqR/)

您还可以制作导航栏并以某种方式在元素`.navbar-fixed-top`内添加填充或边距。`#map`

# javascript - 动态添加 HTML 元素后创建 jQuery 事件

> ID：11930311
> 
> 赞同：1
> 
> 时间：2012-08-13T08:06:59.023
> 
> 标签：javascript, jquery, html, forms, dynamically-generated

我有一个小脚本，当通过 jQuery 单击链接时创建新的 HTML 表单元素：

**Javascript**

```
var counterx = 2;
var counter = 2;

$(document).ready(function(){
    $("#addMoreRcpt").click(function(){
        if (counterx>10){
            alert("Only 10 reciepients are allowed");
            return false;
        }

        var newTextBoxTr = $(document.createElement('tr')).attr("id", 'RcptEml_' + counter);
        newTextBoxTr.append("<td><input type="button" id="txtRcptID_'+ counter + '"></td><td><input type="button" value="Search" id="SearchItem_'+ counter + '">
        </td>");

        newTextBoxTr.appendTo("#RcptGroup");
        counter++;
        counterx++;
    });
}); 
```

**HTML**

```
<table border=1>
<div id="RcptGroup">
<tr>
    <th>1</th>
    <th>2</th>
</tr>
<div id="1">
<tr>
    <td><input type="text"></td>
    <td><input type="button" value="Search" id="SearchItem_1"></td>
</tr>
</div>
</div>
</table>
<br /><a id="addMoreRcpt" href="#" >Add row</a> 
```

现在，对于每个新创建的 HTML 表单，我需要创建一个新的 jQuery 事件，以便“搜索按钮”能够正常工作。这是搜索按钮的 jQuery：

```
$("#searchItem_1").on('click', function() {
    $("#bg").fadeIn(400, function() {
            $("#modal").fadeIn(400);
        });
    });
    $("#modal img").on('click', function() {
        var text = $(this).siblings('.descr').text();
        $("#modal").fadeOut(400, function() {
                $("#bg").fadeOut(400, function() {
                    $("#txtRcptID_1").val(text);    
            });
        });
    }); 
```

你看，上面的脚本引用了search_Item_1 按钮和id 为txtRcptID_ID 的文本框。我需要完成的是每次单击“添加行”按钮时创建上面的脚本。

但它还需要有正确的 seachItem_# 和 txtRcpt_# 对应于创建新元素时的计数器编号。

例如：当我单击 Add Row 时，计数器当前为 3，然后脚本添加 id="txtRcptID_3" 的新元素并创建一个新的 jQuery 事件，如下所示 $("#searchItem_3").on('click' ， 功能（） {

我已经尝试过，尝试过，但没有成功。任何人都可以帮忙吗？

****编辑 ******

 **我添加了以下代码并且非常接近，但是将模式窗口中的值添加到文本字段中仍然存在问题。我添加了一个警报功能来查看计数器的值，但是单击搜索按钮时它神秘地增加了一个：

```
newTextBoxRow.appendTo("#RcptGroup");
newTextBoxRow1.appendTo("#RcptGroup");
alert("ID number:"+counter);

$("#searchItem_"+counter).on('click', function(ev){
    $("#bg").fadeIn(400, function() {
        $("#modal").fadeIn(400);
    });
    alert("ID number:"+counter);
});

$("#modal img").on('click', function(ev) {
    var text = $(this).siblings('.descr').text();
    $("#modal").fadeOut(400, function() {
        $("#bg").fadeOut(400, function() {
             $("#txtRcptID_"+counter).val(text);    
         });
    });
});

counter++;
counterx++; 
```

****编辑 2 ******

 **这是另一个尝试。我将搜索文本字段的 id 更改为“txt_searchItem_'+ counter +'”。并添加了此代码。它起作用了，但仍然是一个问题。单击图像时，它会更新所有文本字段，而不仅仅是触发模式窗口的文本字段。

```
$(document).on('click', '.searchItemBtn', function(ev){
    var getID = $(this).attr("id");
    alert("ID number:"+getID);
        $("#bg").fadeIn(400, function() {
               $("#modal").fadeIn(400);
        });
         $(document).on('click', '#modal img', function(ev
            var text = $(this).siblings('.descr').text();
            $("#modal").fadeOut(400, function() {
                $("#bg").fadeOut(400, function() {
                    $("#txt_"+getID).val(text);    
                });
            });
        });
 }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T08:17:47.757

如果您想`on`创建将处理程序附加到动态创建的元素的方法，您应该像这样使用它：

```
$(parent_selector).on('click', child_selector, function(ev){
    // do stuff on click
}); 
```

因此，在您的情况下，除了 id 之外，我会为您正在创建的按钮添加一个类：

```
newTextBoxTr.append('<td><input type="button" id="txtRcptID_'+ counter + '"></td><td><input type="button" value="Search" class="button_class" id="SearchItem_'+ counter + '">'); 
```

并像这样附加处理程序：

```
$(document).on('click', '.button_class', function(ev){
    // do stuff
}); 
```****

# user-interface - 主要使用 Tcl/Tk 编写的应用程序的 GUI 测试

> ID：11930313
> 
> 赞同：0
> 
> 时间：2012-08-13T08:07:02.823
> 
> 标签：user-interface, testing, tcl, tk

非常感谢您对 Tcl/Tk 测试框架的帮助。我应该测试一个用 Tcl/Tk、twapi、gdi 0.9.5.1 编写的 Windows 应用程序。您是否知道可以帮助我进行 GUI 测试（生成鼠标事件等，并驱动应用程序）的黑盒和/或白盒测试框架？我对测试框架的期望类似于 WindowsLicker 允许您为 Swing 做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:18:17.500

Tk 可以使用命令生成事件`event generate`，但它只会将这些事件发送给自己。您可以将这些与`tcltest`包结合起来进行所需的测试。

也就是说，我实际上建议拆分您的代码，以便在 GUI 和为其提供支持的功能（“业务逻辑层”，借用服务器架构中的一个短语）之间有一个清晰的分离。然后，您可以彻底测试您的基线功能，而不必摆弄测试 GUI，这*非常*容易。一旦你的 BLL 运行良好，测试你的 GUI 就变成了确保 GUI 中的操作正确操作视图或转换为适当的 BLL 调用的问题（你知道这些调用要么正常工作，要么以明确的方式失败）。

# ios - 使用 iOS 5 创建 JSON - 问题

> ID：11930316
> 
> 赞同：0
> 
> 时间：2012-08-13T08:07:15.983
> 
> 标签：ios, json

我正在尝试创建一个如下所示的 JSON 对象：

```
 { "request_type":"send_string" "security_level":0 "device_type":"ios" "blob":{"string":"blah"}"} 
```

这是我的尝试：

```
NSDictionary *blobData = [NSDictionary dictionaryWithObjectsAndKeys:
                          sendString,@"string",
                          nil];
NSString *blobString = [[NSString alloc]
                        initWithData:[NSJSONSerialization dataWithJSONObject:blobData options:kNilOptions error:&error]
                        encoding:NSUTF8StringEncoding];
NSLog(@"Blob Created: %@", blobString);
NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"send_string",@"request_type",
                             0,@"security_level",
                             @"ios",@"device_type",
                             //No Email Provided, This is just for testing
                             blobString,@"blob",
                             nil];

NSData *JSONRequestData = NULL;
if ([NSJSONSerialization isValidJSONObject:requestData]) {
    NSLog(@"Proper JSON Object");
    JSONRequestData = [NSJSONSerialization dataWithJSONObject:requestData options:kNilOptions error:&error];
}
else {
    NSLog(@"requestData was not a proper JSON object");
    return FALSE;
}
NSLog(@"%@",[[error userInfo] objectForKey:@"NSDebugDescription"]);
NSLog(@"%@",[[NSString alloc] initWithData:JSONRequestData encoding:NSUTF8StringEncoding]); 
```

问题是，最后一个 NSLog 告诉我我创建的所有内容都是这样的：

```
{"request_type":"send_string"} 
```

所以当我去尝试将其写入服务器时

```
[NSJSONSerialization writeJSONObject:JSONRequestData toStream:outputStream options:0 error:&error]; 
```

我从控制台收到此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSJSONSerialization writeJSONObject:toStream:options:error:]: Invalid top-level type in JSON write' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:14:27.753

替换此行

```
0,@"security_level" 
```

和

```
[NSNumber numberWithInt:0],@"security_level" 
```

# sql-server - 具有区分大小写列的 T-SQL 表变量 - 整理 SQL_Latin1_General_CP1_CS_AS

> ID：11930319
> 
> 赞同：7
> 
> 时间：2012-08-13T08:07:24.240
> 
> 标签：sql-server, tsql, table-variable, collate

是否可以在表变量列的定义中整理 SQL_Latin1_General_CP1_CS_AS？

我想这样做的原因是因为我的源表中有区分大小写的信息，但是当我将它插入到表变量中时，主键出现问题（它是聚集的） - 检测到重复值 - 比如“全部”和所有'。

这就是为什么我试图找到一种方法使表变量列也区分大小写，如下所示：

```
SELECT SERVERPROPERTY ('Collation') 
```

给我：“SQL_Latin1_General_CP1_CI_AS”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T08:09:54.877

对的，这是可能的。您可以在声明表变量时为每列指定排序规则。

```
declare @T table
(
  Col varchar(20) collate SQL_Latin1_General_CP1_CS_AS
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:12:17.510

是的。编写以下脚本大约需要 2 分钟：

```
declare @T table (
    ID int not null,
    Val1 varchar(10) collate SQL_Latin1_General_CP1_CS_AS not null primary key
)

insert into @T(ID,Val1) values (1,'All'),(2,'ALL')

insert into @T(ID,Val1) values (3,'All') 
```

首先存储两行，然后在第二`insert`条语句中出错。

# iphone - 为什么我的 iPhone OpenGL-ES 纹理没有覆盖视口？

> ID：11930321
> 
> 赞同：1
> 
> 时间：2012-08-13T08:07:37.530
> 
> 标签：iphone, opengl-es, vertex-shader

我有一个大小为 320x320 的方形图像，我从中创建了一个 OpenGL 纹理。我使用最基本的 Vertext 和 Fragment 着色器，我想在整个视图中显示纹理。视图（EAGLView 从 UIView 派生，在许多 OpenGL iOS 示例中都可以找到）的大小也是 320x320。

问题是，图像绘制在左上角，仅覆盖整个视图的 50% 左右。它不会覆盖 100% 的视图。我不知道为什么？

![红色方块为 EAGLView](../Images/3ca7532d493567602ed0ca5dc4a7a838.png)

这是我的代码：

```
position = glGetAttribLocation(m_shaderProgram, "position");
inputTextureCoordinate = glGetAttribLocation(m_shaderProgram, "inputTextureCoordinate");    
inputImageTexture = glGetUniformLocation(m_shaderProgram, "inputImageTexture");

static const GLfloat textureCoordinates[] = {
    0.0f, 1.0f,
    1.0f, 1.0f,
    0.0f,  0.0f,
    1.0f,  0.0f,
};

static const GLfloat imageVertices[] = {
    -1.0f, -1.0f,
    1.0f, -1.0f,
    -1.0f,  1.0f,
    1.0f,  1.0f,
};

[EAGLContext setCurrentContext:context];

glViewport(0, 0, backingWidth, backingHeight); // These are 320, 320

glUseProgram(m_shaderProgram);

glClearColor(0, 0, 0, 1);
glClear(GL_COLOR_BUFFER_BIT);

glActiveTexture(GL_TEXTURE2); 
glBindTexture(GL_TEXTURE_2D, sourceTextureID); // The texture is also of size 320x320

glUniform1i(inputImageTexture, 2);  

glVertexAttribPointer(position, 2, GL_FLOAT, 0, 0, imageVertices);
glVertexAttribPointer(textureCoordinate, 2, GL_FLOAT, 0, 0, textureCoordinates);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);    
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

顶点着色器。

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 varying vec2 textureCoordinate;

 void main()
 {
    gl_Position = position;
    textureCoordinate = inputTextureCoordinate.xy;
 } 
```

片段着色器。

```
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;

 void main()
 {
    gl_FragColor = texture2D(inputImageTexture, textureCoordinate);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:25:41.100

So the problem is that the texture's dimensions were not 2's power. So we need to scale the textureCoordinates accordingly. Inserting following lines solved the problem...

```
GLfloat textureCoordinates[] = {
    0.0f, 1.0f,
    1.0f, 1.0f,
    0.0f,  0.0f,
    1.0f,  0.0f,
};

float nearest2sPower = 2;

if (nearest2sPower < backingWidth) {
    while (nearest2sPower < backingWidth) {
        nearest2sPower *= 2;
    }
}

verticalFlipTextureCoordinates[2] = backingWidth/nearest2sPower;
verticalFlipTextureCoordinates[6] = backingWidth/nearest2sPower;

nearest2sPower = 2;

if (nearest2sPower < backingWidth) {
    while (nearest2sPower < backingWidth) {
        nearest2sPower *= 2;
    }
}

verticalFlipTextureCoordinates[1] = backingHeight/nearest2sPower;
verticalFlipTextureCoordinates[3] = backingHeight/nearest2sPower; 
```

# iphone - UISlider 在 iPhone 中更改值

> ID：11930322
> 
> 赞同：0
> 
> 时间：2012-08-13T08:07:39.197
> 
> 标签：iphone, uislider

我有 4 个值`UISlider`。我希望当滑块值发生变化时，它应该显示以下值

```
 if (slider.value==0)
  {
      label.text="5";
  }
  else if(slider.value==1)
  {
      label.text="10"
  }
  else
  {
      label.text="15";
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:15:10.020

您需要在 Interface Builder中创建与 UISlider 的***Value Changed事件的连接。***您可以实现一个方法，例如：

```
- (IBAction)sliderValueChanged:(UISlider *)slider {
    if (slider.value < 1) {
        self.label.text = @"5";
    }
    else if (slider.value < 2) {
        self.label.text = @"10";
    }
    else {
        self.label.text = @"15";
    }
} 
```

如果您想以编程方式连接事件，您可以使用：

```
[self.mySlider addTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged]; 
```

请注意，滑块将报告带有小数位的值，因此值等于整数的情况很少见。更改逻辑以使用小于检查，如上所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:36:02.907

```
if (slider.value == 0) { 
```

和

```
if (slider.value == 1) { 
```

是错误的 - 您不能使用 == （和 != ）运算符比较浮点数 - 因为它们不是精确值。你应该这样做：

```
if (slider.value < 0.001) { 
```

和

```
if (slider.value > 0.999) { 
```

# hibernate - 如何在 Castor 库中映射惰性初始化对象？

> ID：11930327
> 
> 赞同：2
> 
> 时间：2012-08-13T08:07:54.710
> 
> 标签：hibernate, spring-mvc, castor

在我的 Spring MVC 应用程序中，当 castor 尝试映射延迟初始化的对象时发生错误。

我有与一对多关系的实体类：

```
@Entity
@Table(name = "a")
public class A implements Serializable {

    ...
    private Set<B> b_set=new HashSet<B>();

    @OneToMany(mappedBy = "a", cascade = CascadeType.ALL, orphanRemoval = true, fetch=FetchType.LAZY)
        public Set<b> getB_set() {
            return b_set;
        }
} 
```

具有多对一关系的实体

```
@Entity
@Table(name = "b")
public class B implements Serializable {
    ...
    @ManyToOne
    @JoinColumn(name = "fk", insertable=false, updatable=false)
    private A a;
} 
```

我使用 Castor 库将对象映射到 xml。

```
<mapping>
    <class name="package.a">

        ...
        <field name="b_set" type="package.b" collection="set">
            <bind-xml name="b_name" node="element"></bind-xml>
        </field>

    </class>

    <class name="package.b">
        ...
    </class>
</mapping> 
```

实体 A 有很多实体 B，所以我有 2 个选项。控制器可以返回带有惰性初始化的实体 A，也可以返回带有一组 B 的 A。

```
@RequestMapping(value = "/name/{name}", method = RequestMethod.GET)
    @ResponseBody
    public A findAByName(@PathVariable String name) {
        return aService.findByName(name);
    }

    @RequestMapping(value = "/b/{name}", method = RequestMethod.GET)
    @ResponseBody
    public A findAByNameWithB(
            @PathVariable String name) {
        return aService.findByNameWithB(name);
    } 
```

在这两种方法中，Castor 映射返回的对象并尝试映射字段 b_set。在第一种方法中，有延迟初始化。当我使用第一种方法时会出现问题，因为 castor 无法映射字段 b_set：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: package.A.b_set, no session or session was closed 
```

我理解这个错误，但我不知道如何以聪明的方式解决这种情况。我想要两种方法。

我使用 Spring 3.1.0 Release、castor 1.3.2 和 hibernate-entitymanager 3.6.8 Final

我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:15:37.720

发生这种情况是因为您的 hibenrate 会话在您的 HTTP 响应完成之前关闭。

要解决它，您可以执行以下操作：

1) 将收藏标记为 EAGER。2) 使用 Open Session In View 模式。

你可以在这里读更多关于它的内容：

[https://community.jboss.org/wiki/OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)

Spring 提供了开箱即用的 Open Session In View 解决方案。这很容易使用：

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewInterceptor.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewInterceptor.html)

# android - 从 txt 文件中读取值并将其用于文本视图

> ID：11930328
> 
> 赞同：1
> 
> 时间：2012-08-13T08:08:06.683
> 
> 标签：android

> **可能重复：**
> [如何在 Android 中读取文本文件？](https://stackoverflow.com/questions/3344551/how-to-read-text-file-in-android)

我正在开发一个网络应用程序，我正在以响应的形式从网络上获得响应。我正在文件中成功保存该响应。我想从文件中读取该响应并将其用作文本视图字段。请帮助我。

应用程序已成功激活。ID 为****289****.Ref 1**参考 1** .Ref 2 为**参考 2**

粗体字段是我得到的响应。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:13:26.917

您从服务器收到的响应是什么格式的？
如果是 XML 或 JSON，您可以使用 XML 或 JSON 解析器并选择您需要的字段。

如果两者都不是，但您控制服务器，则可以将响应输出修改为 XML 或 JSON。

最后，如果您不控制服务器，那么很可能您需要使用`regex`才能正确获取每个请求的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:36:57.633

您可以逐行阅读并在文本视图中设置行：

```
 File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard,"file.txt");
    if (file.exists()) 
    {
        ArrayList<String> readed = new ArrayList<String>();

        try {
            BufferedReader br = new BufferedReader(new FileReader(file));
            String line;

            while ((line = br.readLine()) != null) {
                readed.add(line);

            }
        }
        catch (IOException e) {

        }
        txtview1.setText(readed.get(i));
        txtview2.setText(readed.get(i+1));
        txtview3.setText(readed.get(i+2));

    } 
```

# c# - 应用程序从 DVD 启动太慢了

> ID：11930331
> 
> 赞同：0
> 
> 时间：2012-08-13T08:08:13.220
> 
> 标签：c#, winforms

我有一个带有大型数据库（大约 3.5 GB）的应用程序，我需要从 DVD 等只读文件系统运行它。所以我的程序在硬盘上运行良好，但从 DVD 启动却很慢。

我的问题是如何优化我的程序以在 DVD 上快速运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:49:36.497

您必须分析您的应用程序，没有什么灵丹妙药可以让您的应用程序加载速度提高三倍。分析、分析、查看导致延迟的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:18:51.863

这完全取决于您的意思是哪种数据库。我假设它是基于行的。

如果您希望快速读取数据库，第一步可能是对数据库进行排序。这很关键，因为它可以使用二进制搜索非常快速地搜索特定行。

将 3.5 Gb 加载到内存中以从 DVD 中搜索几乎与翻录 DVD 一样长，这就是您的程序启动缓慢的原因。考虑创建一个指向某些行位置的索引，例如字典中每个字母开头的页码。然后，您只需加载数据库的一小部分即可找到所需的行。然后，通过按需求顺序加载部分（即，如果您搜索某些内容，请先加载该部分），在 RAM 中慢慢建立字典。

特别是对于 DVD，您无能为力使其加载速度更快。考虑一种流式压缩类型（可能是 GZip，C# 本身就支持这一点）以允许您更快地提取数据。

同样，这完全取决于您在做什么，这些只是一般性建议。

# javascript - Greasemonkey 脚本中的 setinterval() 和 .click()

> ID：11930333
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:08:44.020
> 
> 标签：javascript, click, greasemonkey, setinterval

我试图在 javascript 中开发一个简单的 Greasemonkey 脚本。如何在每次点击之间自动模拟特定按钮的点击？

这是我的代码：

```
var Next=document.getElementsByClassName("SubmitButton");

for (var i=0, c = Next.length; i<c; i++)
{
    Next[i].click();
    setTimeout('Next[i].click()',3000);
} 
```

问题是代码只点击 的第一个值`Next`。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:29:17.953

问题是您将所有操作的超时设置为同一时间，因此它们将同时运行。

此外，您`i`在代码中使用了变量，它将在循环完成后运行，因此它将指向数组中最后一项之后的索引。

使用闭包为每个项目创建一个单独的变量，并使用匿名函数而不是字符串让代码在超时时执行：

```
var Next = document.getElementsByClassName("SubmitButton");

for (var i = 0, c = Next.length; i < c; i++) {

//Next[i].click();

  (function(element, time){

    setTimeout(function(){ element.click(); }, time);

  })(Next[i], 3000 * i);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:57:08.700

问题是：

1.  [自动评估字符串在 Greasemonkey 中不能正常工作](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.231%3a_Auto-eval_Strings)（无论如何都应该避免使用）。所以传递一个函数给`setTimeout()`. 这将起作用；**注意参数是如何处理的**：

    ```
    var Next = document.getElementsByClassName ("SubmitButton");

    for (var i=0, c = Next.length; i<c; i++) {
        Next[i].click();
        setTimeout (function (J) {Next[J].click(); }, 3000, i);
    } 
    ```

2.  你似乎想要一个间隔，并且已经用`setinterval`两次标记了这个问题。但是代码使用`setTimeout`，它只触发一次，而不是每 3 秒触发一次。也许你想用`setinterval`？

    ```
     setinterval (function (J) {Next[J].click(); }, 3000, i); 
    ```

3.  这似乎是单击提交按钮。是否正在加载新页面。还是触发 AJAX？如果是这样，这个方案可能只会触发一次或两次。
    链接到目标页面并更好地描述其行为。

# css - 文本未使用自动换行包装在 div 容器中

> ID：11930334
> 
> 赞同：1
> 
> 时间：2012-08-13T08:08:44.577
> 
> 标签：css, word-wrap, tablerow, css-tables

我有这样的情况：http: [//jsfiddle.net/uG4b5/](http://jsfiddle.net/uG4b5/) 任何人都可以帮助我为什么 div.content 中的文本没有包装到 div.container 中定义的宽度？

这就是我想要实现的目标： ![在此处输入图像描述](../Images/adda83bbf28ecda33bdcac5ff7276ff2.png)

出于某种原因，我必须将基于表格的布局保留在那里。所以我不能删除显示：table-row; 也不显示：表格单元格；

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:20:33.093

删除 word-wrap: break-all 属性并改用 table、tr、th、td 标签...

演示：http: [//jsfiddle.net/uG4b5/4/](http://jsfiddle.net/uG4b5/4/)

# ios - 在 iOS 中从 PDF 中选择和提取文本

> ID：11930336
> 
> 赞同：2
> 
> 时间：2012-08-13T08:08:56.407
> 
> 标签：ios, pdf

我正在 IOS 中构建一个应用程序来读取 PDF 文档，然后需要标记或选择一些文本以分配给 NSString，然后对选定的文本执行某些操作。在 Appstore 中，“PDF EXPERT”很容易搞定。任何人都知道您是否可以通过任何方法、属性或框架 Apple 或知道任何其他系统可以这样做。

# android - Android可绘制选择器状态按下为真按钮必须更改背景颜色

> ID：11930342
> 
> 赞同：1
> 
> 时间：2012-08-13T08:09:12.427
> 
> 标签：android, xml

这一定是一个愚蠢的问题，因为在 stackoverflow 中有很多相关的问题，也许答案很简单。但无论如何，它就在这里。我有一个按钮并为它创建一个可绘制的 xml。所以在我的按钮下面是代码：

```
<Button
            android:id="@+id/button2"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="match_parent"
            android:layout_height="30dip"           
            android:background="@drawable/button2" 
            /> 
```

现在在我的drawable/button2下我创建了一个我没有使用图像的选择器。这是我的代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#FF9E35" />
        <stroke
            android:width="1dp"
            android:color="#992f2f" />
        <corners
            android:radius="0dp"
            android:topLeftRadius="8dp"
            android:bottomLeftRadius="0dp"
            android:topRightRadius="0dp"
            android:bottomRightRadius="8dp" />
        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
 </item>
 <item>
    <shape>
        <gradient
            android:startColor="#FF9E35"
            android:endColor="#992f2f"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#992f2f" />
        <corners
            android:radius="0dp"
            android:topLeftRadius="8dp"
            android:bottomLeftRadius="0dp"
            android:topRightRadius="0dp"
            android:bottomRightRadius="8dp" />
        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
    </item>
   </selector> 
```

现在我要完成的是，当我单击该按钮时，它将其背景颜色更改为 state_pressed 所暗示的内容，并在单击另一个按钮时恢复正常（很可能是切换按钮）无论如何在代码上做在xml选择器后面还是在里面？

谢谢，

JC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:42:00.460

您实际上可以在 Java 代码中执行的操作是：

```
public class LaunchActivity extends Activity implements OnTouchListener{

    private Button yourButton;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        setContentView(R.layout.main);      

        yourButton= (Button)findViewById(R.id.yourButton);
        yourButton.setOnTouchListener(this); 

    }

    @Override
    public boolean onTouch(final View view, MotionEvent event) {

    final int action = event.getAction();

        if(view.getId()==R.id.yourButton){
            if(action == MotionEvent.ACTION_DOWN)
                  yourButton.setBackgroundResource(R.drawable.ic_button_pressed);
            if(action == MotionEvent.ACTION_UP)
                  yourButton.setBackgroundResource(R.drawable.ic_button_normal);
        }

 }
} 
```

如果他被按下，这将改变按钮的背景。当用户松开手指时，它会再次改变背景。如果您只想在按下另一个按钮时更改背景，请不要编写 ACTION_UP 情况，而在另一个按钮的另一个 ACTION_DOWN 情况下，更改其他按钮的背景，请参见下文：

```
 @Override
        public boolean onTouch(final View view, MotionEvent event) {

    final int action = event.getAction();

        if(view.getId()==R.id.yourButton){
            if(action == MotionEvent.ACTION_DOWN){
                  secondButton.setBackgroundResource(R.drawable.ic_button_normal);
                  yourButton.setBackgroundResource(R.drawable.ic_button_pressed);
            }
        }
            if(view.getId()==R.id.secondButton){
            if(action == MotionEvent.ACTION_DOWN){
                  yourButton.setBackgroundResource(R.drawable.ic_button_normal);
                  secondButton.setBackgroundResource(R.drawable.ic_button_pressed);
            }
        }

 } 
```

希望能帮助到你 ！

# objective-c - 哪个属性用作类的属性

> ID：11930345
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:09:45.903
> 
> 标签：objective-c, ios, class

```
@property (nonatomic, assign) Class aClass; 
```

或者

```
@property (nonatomic, retain) Class aClass; 
```

注意：“Class”是[objc.h中定义的那个“Class”](http://www.opensource.apple.com/source/objc4/objc4-371.1/runtime/objc.h)

它需要一个`release`方法`dealloc`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:30:45.910

由于它是指向类对象的指针，并且类对象在应用程序的整个生命周期中都存在，因此内存管理操作`retain`对它`release`没有影响。因此，无论您使用`assign`还是`release`. 使用起来会更简单`assign`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:12:27.967

如果你使用retain，编译器会为你生成一个对象，并在类中保留它。对于这种情况，您应该在`dealloc`. 不过不要忘记添加合成器，否则您将不会得到任何 getter 和 setter。

在这里阅读更多： https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html 在这里：[https :](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html) [//developer.apple.com/library/mac/documentation /Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW9](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW9)

# c# - 如何使用并行任务在单独的线程中运行带有参数的方法

> ID：11930346
> 
> 赞同：5
> 
> 时间：2012-08-13T08:09:53.120
> 
> 标签：c#, task-parallel-library

这是代码示例

```
private void MethodStarter()
{
Task myFirstTask = Task.Factory.StartNew(Method1);
Task mySecondTask = Task.Factory.StartNew(Method1);
}

private void Method1()
{
 // your code
}

private void Method2()
{
 // your code
} 
```

我正在寻找并行任务的代码片段，通过它我可以执行回调并将参数也传递给函数。谁能帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T08:15:18.253

如果我正确理解您的问题，这可能是答案：

```
private void MethodStarter()
{
    Task myFirstTask = Task.Factory.StartNew(() => Method1(5));
    Task mySecondTask = Task.Factory.StartNew(() => Method2("Hello"));
}

private void Method1(int someNumber)
{
     // your code
}

private void Method2(string someString)
{
     // your code
} 
```

如果要同时启动所有线程，可以使用 h1ghfive 给出的示例。

**更新：** 一个应该可以工作但我没有测试过的回调示例。

```
private void MethodStarter()
{
    Action<int> callback = (value) => Console.WriteLine(value);
    Task myFirstTask = Task.Factory.StartNew(() => Method1(5, callback));
    Task mySecondTask = Task.Factory.StartNew(() => Method2("Hello"));
}

private void Method1(int someNumber, Action<int> intCallback)
{
     // your code
     intCallback(100); // will call the call back function with the value of 100
}

private void Method2(string someString)
{
     // your code
} 
```

如果您不想传入回调函数，也可以查看[Continuation 。](http://msdn.microsoft.com/en-us/library/dd321274.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T08:17:54.370

你应该尝试这样的事情：

```
Parrallel.Invoke(
  () => Method1(yourString1),
  () => Method2(youString2)); 
```

# javascript - 从javascript获取（移动）设备名称

> ID：11930356
> 
> 赞同：17
> 
> 时间：2012-08-13T08:10:31.020
> 
> 标签：javascript, mobile-website

有没有办法使用 javascript 获取移动设备的名称（例如“John's iPhone”）？

* * *

也许我不是很清楚......我的意思不是它是否是 iPhone、iPad 等，而是“设备名称”——例如它可以是“约翰的 iPhone”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T09:31:57.660

对于在本机浏览器中运行的 Web 应用程序，您无法通过 javascript 执行此操作 - javascript 通常无法访问此个人识别数据。

一种可能的方法是使用像[PhoneGap](http://phonegap.com/)这样的框架，它可能有一个 API 来访问设备名称。但是，您只能通过应用商店部署您的网站，因此根据您的用例，这可能会受到很大限制。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-13T08:24:37.213

您最好的选择是使用用户代理：

例如

```
const ua = navigator.userAgent
const device = {
  iPad: /iPad/.test(ua),
  iPhone: /iPhone/.test(ua),
  Android4: /Android 4/.test(ua)
} 
```

该对象将允许您编写很好的条件逻辑，例如`if(device.iPad) { /* do stuff */ }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-16T20:42:47.447

我正在使用带有嵌入式扫描仪的移动设备。为了能够使用一些不同设备的 JavaScript 库并避免与不同制造商（Zebra、Honeywell、Datalogic、iOs 等）的那些库发生冲突，我需要想出一种方法来识别每个设备，这样我就可以加载正确的库，这就是我想出的。享受

```
getDeviceName: function () {
    var deviceName = '';

    var isMobile = {
        Android: function() {
            return navigator.userAgent.match(/Android/i);
        },
        Datalogic: function() {
            return navigator.userAgent.match(/DL-AXIS/i);
        },
        Bluebird: function() {
            return navigator.userAgent.match(/EF500/i);
        },
        Honeywell: function() {
            return navigator.userAgent.match(/CT50/i);
        },
        Zebra: function() {
            return navigator.userAgent.match(/TC70|TC55/i);
        },
        BlackBerry: function() {
            return navigator.userAgent.match(/BlackBerry/i);
        },
        iOS: function() {
            return navigator.userAgent.match(/iPhone|iPad|iPod/i);
        },
        Windows: function() {
            return navigator.userAgent.match(/IEMobile/i);
        },
        any: function() {
            return (isMobile.Datalogic() || isMobile.Bluebird() || isMobile.Honeywell() || isMobile.Zebra() || isMobile.BlackBerry() || isMobile.Android() || isMobile.iOS() || isMobile.Windows());
        }
    };

    if (isMobile.Datalogic())
        deviceName = 'Datalogic';
    else if (isMobile.Bluebird())
        deviceName = 'Bluebird';
    else if (isMobile.Honeywell())
        deviceName = 'Honeywell';
    else if (isMobile.Zebra())
        deviceName = 'Zebra';
    else if (isMobile.BlackBerry())
        deviceName = 'BlackBerry';
    else if (isMobile.iOS())
        deviceName = 'iOS';
    else if ((deviceName == '') && (isMobile.Android()))
        deviceName = 'Android';
    else if ((deviceName == '') && (isMobile.Windows()))
        deviceName = 'Windows';

    if (deviceName != '') {
        consoleLog('Devices information deviceName = ' + deviceName);
        consoleLog('Devices information any = ' + isMobile.any());
        consoleLog('navigator.userAgent = ' + navigator.userAgent);
    }

    return deviceName;
}, 
```

这是一个如何使用它的例子：

```
initializeHandheldScanners: function () {
    if (DeviceCtrl.getDeviceName() == 'Zebra')
        DeviceCtrl.initializeSymbolScanner();

    if (DeviceCtrl.getDeviceName() == 'Honeywell')
        DeviceCtrl.initializeHoneywellScanner();

    if (DeviceCtrl.getDeviceName() == 'Datalogic')
        DeviceCtrl.initializeDatalogicScanner();
}, 
```

您可以对 Cory LaViska 表示感谢。我是根据他的工作做的。如果您想了解更多，这里是链接

[https://www.abeautifulsite.net/detecting-mobile-devices-with-javascript](https://www.abeautifulsite.net/detecting-mobile-devices-with-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-12T17:16:32.740

您可以使用此代码段：

```
const getUA = () => {
    let device = "Unknown";
    const ua = {
        "Generic Linux": /Linux/i,
        "Android": /Android/i,
        "BlackBerry": /BlackBerry/i,
        "Bluebird": /EF500/i,
        "Chrome OS": /CrOS/i,
        "Datalogic": /DL-AXIS/i,
        "Honeywell": /CT50/i,
        "iPad": /iPad/i,
        "iPhone": /iPhone/i,
        "iPod": /iPod/i,
        "macOS": /Macintosh/i,
        "Windows": /IEMobile|Windows/i,
        "Zebra": /TC70|TC55/i,
    }
    Object.keys(ua).map(v => navigator.userAgent.match(ua[v]) && (device = v));
    return device;
}

console.log(getUA()); 
```

# sql - 带空检查的 SQL 动态查询

> ID：11930358
> 
> 赞同：1
> 
> 时间：2012-08-13T08:10:37.277
> 
> 标签：sql, sql-server-2008

```
SET @sql = 'Declare  ChildTableMigrator  CURSOR FOR  select ['+@FieldName+'] , ['+@FieldName+'Alias] from ['  + @SourceTable + '].[dbo].[Port] where ['  + @SourceTable + '].[dbo].[Port].[' + @FieldName +  '] IS NOT NULL AND ['  + @SourceTable + '].[dbo].[Port].[' + @FieldName +  '] !='''

PRINT @sql
exec sp_executesql @sql 
```

你好，

如何检查`NULL`和`EMPTY`使用`sql`动态查询？, 根据`EMPTY`检查

```
@FieldName +  '] !=''' 
```

它抛出了错误

> 字符串 '' 后面的非闭合引号。

如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:15:33.547

你需要更换

```
 @FieldName + '] !=''' 
```

和

```
 @FieldName + '] !='''''. 
```

在字符串中使用引号时需要转义。在您的原始语句中，您只转义了一个引号，导致字符串只有一个引号。

但是你可以通过使用参数化的 sql 做得更好

```
 @FieldName + '] !=@EmptyField
 exec sp_executesql @sql, N'@EmptyField VARCHAR(32)', '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:17:16.493

使用 if() 判断。例如

```
 set @sql="Declare  ChildTableMigrator  CURSOR FOR  select "
if(@FieldName!=null)
   begin
      set @sql=@sql+"['"+@FieldName+"']";
   end
 .....

PRINT @sql
exec sp_executesql @sql 
```

# javascript - Amcharts 没有在平板电脑/ipad 中显示？

> ID：11930359
> 
> 赞同：0
> 
> 时间：2012-08-13T08:10:45.360
> 
> 标签：javascript, html, jquery-mobile, amcharts

我正在使用 java 脚本 am-charts 来显示平板电脑应用程序的图表。我在开发过程中面临一个问题

*   每当我在两个选项卡中打开相同的链接时，图表都不会显示在两个选项卡中。
*   每当我在应用程序中打开不同的链接时，图表都不会显示

> `<a href="http://www.facebook.com/" target="_BLANK">Facebook</a>`

你能指导我吗，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:09:51.293

显示列表项后尝试调用 chart.validateNow()。

# windows-phone - 如何检测 Windows Phone 中的独立存储已用空间

> ID：11930360
> 
> 赞同：3
> 
> 时间：2012-08-13T08:10:44.967
> 
> 标签：windows-phone, isolatedstorage

根据标题，如何确定 Windows Phone 应用程序中已使用的独立存储空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:18:10.847

您可以知道可用的可用空间和已用空间。

```
try
{
    using (var store = IsolatedStorageFile.GetUserStoreForApplication())
    {
        Int64 curAvail = store.AvailableFreeSpace;
        var used = store.Quota - curAvail;
    }
}

catch (IsolatedStorageException)
{
    // TODO: Handle that store could not be accessed.

} 
```

# javascript - jquery中的重置按钮单击状态

> ID：11930364
> 
> 赞同：0
> 
> 时间：2012-08-13T08:11:26.590
> 
> 标签：javascript, jquery, html, javascript-events

在我的移动网页中，我为一个按钮编写了处理程序，以在单击后拒绝所有点击，并且该请求由网络处理

```
$(this).unbind().bind('click', function() {
            return false;
        }); 
```

我在我的另一个网页上有一个按钮，它带我去

```
history.back() 
```

问题是当我回到我的上一页时，我点击的按钮将无法再次工作，因为我已经为猴子点击处理了它是否有任何状态，如点击，可以在点击或我的后退按钮时重置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:55:47.170

如果您想处理对元素的单击，我会使用 jquery [one](http://api.jquery.com/one/)方法，因为它只会触发一次。您的按钮处理程序可以这样编写，并且可以删除您上面编写的返回 false 的自定义代码：

```
$('button').one('click', function () {
   // Handle single click of button here
}); 
```

当您单击后退按钮时，您需要将该事件重新绑定到该按钮。我只是将该代码包装在一个函数中，然后在您调用的任何地方调用它`history.back()`：

```
function HandleSingleButtonClick() {
   $('button').one('click', function () {
      // Handle single click of button here
   });
} 
```

然后在你的 history.back 调用函数之后：

```
history.back();
HandleSingleButtonClick(); 
```

# internet-explorer - 如何使用 selenium webDriver 最小化 IE 浏览器的窗口？

> ID：11930365
> 
> 赞同：1
> 
> 时间：2012-08-13T08:11:29.783
> 
> 标签：internet-explorer, selenium, webdriver, selenium-webdriver

需要使用 c# 使用 selenium webDriver 最小化 IE 浏览器的窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:31:00.593

我不认为你可以使用 selenium 做到这一点，但你可以使用 Windows API 在 C# 中做到这一点：

```
private const int SW_HIDE = 0;
private const int SW_SHOWNORMAL = 1;
private const int SW_NORMAL = 1;
private const int SW_SHOWMINIMIZED = 2;
private const int SW_SHOWMAXIMIZED = 3;
private const int SW_MAXIMIZE = 3;
private const int SW_SHOWNOACTIVATE = 4;
private const int SW_SHOW = 5;
private const int SW_MINIMIZE = 6;
private const int SW_SHOWMINNOACTIVE = 7;
private const int SW_SHOWNA = 8;
private const int SW_RESTORE = 9;
private const int SW_SHOWDEFAULT = 10;
private const int SW_FORCEMINIMIZE = 11;
private const int SW_MAX = 11;

[DllImport("User32")]
private static extern int ShowWindow(int hwnd, int nCmdShow);

ShowWindow(window, SW_SHOWMINIMIZED); 
```

当然，您需要将 User32.dll 添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:17:55.237

好吧，只能最大化和调整浏览器的大小，但不能最小化它。

您是否尝试过为其发送键盘快捷键？它可能会起作用。

虽然我不确定你为什么需要最小化一个窗口（因为 Selenium 广泛用于浏览器测试，仅此而已）。

# c++ - C++ strlen(ch) 和 sizeof(ch) strlen

> ID：11930366
> 
> 赞同：0
> 
> 时间：2012-08-13T08:11:39.127
> 
> 标签：c++, c

我有这个代码：

```
int main()
{
    char ch[15];
    cout<<strlen(ch)<<endl; //7
    cout<<sizeof(ch)<<endl; //15
    return 0;
} 
```

为什么`strlen(ch)`即使它是空`char`数组也会给出不同的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T08:13:46.570

您的代码具有*未定义的行为*，因为您正在使用 读取数组的未初始化值`strlen`。如果你想要一个确定的结果，`strlen`你必须初始化（或分配给）你的数组。

例如

```
char ch[15] = "Hello, world!"; 
```

或者

```
char ch[15] = {}; 
```

`sizeof`将给出其操作数的大小，因为`char`根据定义，a 的大小为 1，a 的大小`char[15]`将始终为 15。

`strlen`给出一个空终止字符串的长度，它是给定数组中第一个`char`带有值的字符串的偏移量. 要使调用有效，参数 to 必须实际指向一个以空字符结尾的字符串。`0``char``strlen`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T08:12:59.040

`ch`是一个局部变量，局部变量没有被初始化。因此，您认为它是空字符串的假设是不正确的。它充满了垃圾。`\0`巧合的是，在 7 个垃圾字符之后发现了一个字符，因此`strlen`返回了 7 个。

你可以做这样的事情来确保一个空字符串 -

```
char ch[15]={0};
ch[0]='\0`;
strcpy(ch,""); 
```

这是一个类似的线程以供更多阅读

[C++ 中的变量初始化](https://stackoverflow.com/questions/2218254/variable-initialization-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T08:13:05.403

问题出在

```
strlen(ch); 
```

`strlen`计算字符数，直到击中`\0`符号。在这里，`ch`是未初始化的，所以`strlen`可以返回*任何东西*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T08:13:08.993

至于 的结果`strlen`，在您的情况下，您有一个未初始化的`char`数组，因此`strlen`只*发生*了*7*：数组元素 8 处必须有一个空字符，但此代码`strlen`每次都可能给出不同的结果。

始终初始化字符串，使用数组很容易：`char str[15] = {0};`

`sizeof`是一个运算符，用于获取变量或数据类型的大小，或者数组占用的字节数，**而不是**C 字符串的长度；不要期望`strlen`和`strcpy`可以互换，甚至可以以任何有用的方式进行比较。

例如：

```
int main()
{
    char str[15] = "only 13 chars";

    cout << "strlen: " << strlen(str) << endl;
    cout << "sizeof: " << sizeof(str) << endl;
} 
```

输出是：

```
strlen: 13
sizeof: 15 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T08:14:21.660

> 返回 str 的长度。
> 
> C 字符串的长度由终止空字符确定：AC 字符串与字符串开头和终止空字符之间的字符数一样长。

`sizeof`返回字节数 (15)。您的数组被垃圾填充，因此 strlen 可以返回任何数字。正确的例子是

```
int main()
{
    char ch[15] = {0};
    cout<<strlen(ch)<<endl; //0
    cout<<sizeof(ch)<<endl; //15
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-01T12:29:33.890

`sizeof`C++和C++的区别`strlen`：

1)`sizeof`是**运算符**，`strlen`是**函数**；

2) 的返回类型`sizeof`是，并在其头部`size_t`定义(typedef) ；**它获取内存分配的字节大小，该字节大小可以最大化以容纳要在内存中创建的对象**；`unsigned int`

 **3)`sizeof`可以使用**type**作为参数，而`strlen`只能使用char指针( `char*`)作为指针，并且必须以' `\0`'结尾； `sizeof`也可以使用函数作为参数，例如：

```
short f() {return 100;} 
std::cout << "sizeof(f()): " << sizeof(f()) << std::endl;
//The result will be sizeof(short), which is 2. 
```

4）如果char数组是参数，则不会降级`sizeof`，而`strlen`会降级为char指针；

5) 的结果`strlen`将在**运行时**计算，而不是**编译时**，`strlen`用于获取字符串内容（字符串、char数组、char指针）直到' `\0`'的真实大小，而不是内存的真实大小分配。大多数编译器都会在编译时计算结果`sizeof`，**无论**参数是类型还是变量，这就是为什么`sizeof(x)`可以用来决定数组的维数：

```
char str[20]="0123456789"; 
int a=strlen(str); //a=10; 
int b=sizeof(str); //while b=20; 
```

7）如果参数`sizeof`是**类型**，则括号是**强制性**的，而如果参数是**变量**，括号是**可选**的，因为**`sizeof`是运算符而不是函数**；

8) 当你使用结构化**类型**或**变​​量**作为参数时，`sizeof`会返回它的**真实大小**，当你使用**静态数组**时，`sizeof`会返回**数组大小**。但是运算符不能返回**动态**或**外部**`sizeof`创建的数组的大小。因为 sizeof 是**编译时运算符**。

 ******以下是 sizeof 和 strlen 的示例：

```
#include <iostream>
#include <cstdlib>
#include <string>
#include <cstring>

short f1 ()
{
  return 100;
}

int f2 ()
{
  return 1000;
}

int main()
{
  char* char_star = "0123456789";
  // char_star is a char pointer, sizeof will return the pointer size allocated in memory: depends on your machine
  std::cout << "sizeof(char_star):" << sizeof(char_star) << std::endl;
  // *char_star is the first element of the string, it is a char, sizeof will return the char size allocated in memory: depends on your machine, normally is 1
  std::cout << "sizeof(*char_star):" << sizeof(*char_star) << std::endl;
  // char_star is a char pointer, strlen will return the real size of the string until '\0': 10
  std::cout << "strlen(char_star):" << strlen(char_star) << std::endl;
  std::cout << std::endl;

  char char_array[] = "0123456789";
  // char_array is a char array, sizeof will return the array size allocated in memory, with a '\0' at the end: 10 + 1
  std::cout << "sizeof(char_array):" << sizeof(char_array) << std::endl;
  // *char_array is the first element of the array, it is a char, sizeof will return the char size allocated in memory: depends on your machine, normally is 1
  std::cout << "sizeof(*char_array):" << sizeof(*char_array) << std::endl;
  // char_array is a char array, strlen will return the real size of the string until '\0': 10
  std::cout << "strlen(char_array):" << strlen(char_array) << std::endl;
  std::cout << std::endl;

  char_array_fixed[100] = "0123456789";
  // char_array_fixed is a char array with fixed size, sizeof will return the array size allocated in memory: 100
  std::cout << "sizeof(char_array_fixed):" << sizeof(char_array_fixed) << std::endl;
  // *char_array_fixed is the first element of the array, it is a char, sizeof will return the char size allocated in memory: depends on your machine, normally is 1
  std::cout << "sizeof(*char_array_fixed):" << sizeof(*char_array_fixed) << std::endl;
  // *char_array_fixed is a char array with fixed size, strlen will return the real content size of the string until '\0': 10
  std::cout << "strlen(char_array_fixed):" << strlen(char_array_fixed) << std::endl;
  std::cout << std::endl;

  int int_array[100] = {0,1,2,3,4,5,6,7,8,9};
  // int_array is a int array with fixed size, sizeof will return the array size allocated in memory: 100
  std::cout << "sizeof(int_array):" << sizeof(int_array) << std::endl;
  // *int_array is the first element of the array, it is an int, sizeof will return the int size allocated in memory: depends on your machine, normally is 4
  std::cout << "sizeof(*int_array):" << sizeof(*int_array) << std::endl;
  // int_array is a int array with fixed size, strlen will throw exception 
  //std::cout << "strlen(int_array):" << strlen(int_array) << std::endl;
  std::cout << std::endl;

  char char_array2[] = {'a', 'b', '3'};
  // char_array2 is a char array, sizeof will return the array size allocated in memory: 3
  std::cout << "sizeof(char_array2):" << sizeof(char_array2) << std::endl;
  // *char_array2 is the first element of the array, it is a char, sizeof will return the char size allocated in memory: depends on your machine, normally is 1
  std::cout << "sizeof(*char_array2):" << sizeof(*char_array2) << std::endl;
  // *char_array2 is a char array, strlen will return the real content size of the string until '\0': 3
  std::cout << "strlen(char_array2):" << strlen(char_array2) << std::endl;
  std::cout << std::endl;

  char char_array3[] = {"abc"};
  // char_array3 is a char array, sizeof will return the array size allocated in memory, with a '\0' at the end : 3 + 1
  std::cout << "sizeof(char_array3):" << sizeof(char_array3) << std::endl;
  // *char_array3 is the first element of the array, it is a char, sizeof will return the char size allocated in memory: depends on your machine, normally is 1
  std::cout << "sizeof(*char_array3):" << sizeof(*char_array3) << std::endl;
  // *char_array3 is a char array, strlen will return the real content size of the string until '\0': 3
  std::cout << "strlen(char_array3):" << strlen(char_array3) << std::endl;
  std::cout << std::endl;

  std::string str = {'a', 'b', '3', '\0', 'X'};
  // str is a string, sizeof will return the string size allocated in memory (string is a wrapper, can be considered as a special structure with a pointer to the real content): depends on your machine, normally is 32
  std::cout << "str:" << str << std::endl;
  std::cout << "sizeof(str):" << sizeof(str) << std::endl;
  // *str means nothing, sizeof will throw exeption
  //std::cout << "sizeof(*str):" << sizeof(*str) << std::endl;
  // str is a string, strlen will return the real content size of the string until '\0': 3
  std::cout << "strlen(str):" << strlen(str.c_str()) << std::endl;
  std::cout << std::endl;

  // sizeof is an operation, if the parameter is a type, parentheses are mandatory
  std::cout << "sizof(int):" << sizeof(int) << std::endl;
  // sizeof is an operation, if the parameter is a variable, parentheses are optional
  std::cout << "sizof char_star:" << sizeof char_star << std::endl;
  std::cout << "sizof char_array:" << sizeof char_array << std::endl;
  // sizeof is an operation, can take a function as parameter
  std::cout << "sizeof(f()): " << sizeof(f1()) << std::endl;
  std::cout << "sizeof(f()): " << sizeof(f2()) << std::endl;
} 
```********

# c# - 创建骨架 WiX 扩展时失败

> ID：11930367
> 
> 赞同：1
> 
> 时间：2012-08-13T08:11:39.917
> 
> 标签：c#, dll, wix

我刚开始使用 WiX，对 C#/.NET 的了解为零

现在我正在尝试通过引用此页面来创建一个简单的 WiX 扩展：[WiX3 - 扩展的简单示例](http://wix.sourceforge.net/manual-wix3/extension_development_simple_example.htm)。

以下是该页面中描述的步骤：

*   在 Visual Studio 中，创建一个名为 SampleWixExtension 的新 C# 库 (.dll) 项目。

*   将 wix.dll 的引用添加到您的项目中。

*   添加引用 Microsoft.Tools.WindowsInstallerXml 命名空间的 using 语句。

    `using Microsoft.Tools.WindowsInstallerXml;`

*   让您的 SampleWixExtension 类继承自 WixExtension。

    `public class SampleWixExtension : WixExtension {}`

*   将 AssemblyDefaultWixExtensionAttribute 添加到您的 AssemblyInfo.cs。

    `[assembly: AssemblyDefaultWixExtension(typeof(SampleWixExtension.SampleWixExtension))]`

*   构建项目。

但是，当我完成这些步骤并构建这个项目时，我遇到了以下错误：

```
 ------ Build started: Project: SampleWixExtension, Configuration: Debug Any CPU ------
    D:\working\test\SampleWixExtension\SampleWixExtension\Properties\AssemblyInfo.cs(37,12): error CS0246: The type or namespace name 'AssemblyDefaultWixExtension' could not be found (are you missing a using directive or an assembly reference?)
    D:\working\test\SampleWixExtension\SampleWixExtension\Properties\AssemblyInfo.cs(37,12): error CS0246: The type or namespace name 'AssemblyDefaultWixExtensionAttribute' could not be found (are you missing a using directive or an assembly reference?)

    Compile complete -- 2 errors, 0 warnings 
```

任何人都知道为什么以及如何解决它？

顺便说一句，在我可以看到的解决方案资源管理器`wix`中已经在参考中，它的属性有路径`C:\Program Files (x86)\Windows Installer XML v3.5\bin\wix.dll`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:00:23.750

通过增加

```
using Microsoft.Tools.WindowsInstallerXml; 
```

进入 AssemblyInfo.cs，项目现已成功构建。

# php - MySQL 分区高分表

> ID：11930368
> 
> 赞同：2
> 
> 时间：2012-08-13T08:11:44.347
> 
> 标签：php, mysql, database, database-partitioning

我有一张存储游戏高分的表格。这个游戏有很多关卡，分数按分数 DESC（这是一个索引）排序，其中关卡是关卡 ID。在此级别 ID 列上进行分区会创建与创建许多单独级别表（每个级别 ID 一个）相同的结果吗？我需要这个以某种方式分离出关卡数据，因为我预计会有 10 的数百万个条目。我听说分区可以加快这个过程，同时让我的表正常化。

另外，我的游戏中的关卡数量未知（可以随时添加或删除关卡）。我可以指定在此级别 ID 列上进行分区，并在将新的（不同级别 ID）添加到高分表时自动创建新分区吗？我可能从 10 个单独的级别开始，但最终以 50 个级别结束，但我所有的数据仍然保存在一个表中，但是有很多分区吗？我是否必须为级别 ID 编制索引才能使其正常工作？

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:17:31.267

在单列上创建索引很好，但根据您提供的信息，创建包含两列的索引将是更好的解决方案。我会运行一个

```
alter table highscores add index(columnScore, columnLevel); 
```

这将使性能更好。从数据库的角度来看，无论您在寻找什么高分，数据库都会知道在哪里搜索它们。

关于这一点，如果可以（并且您正在使用 mysami 表），您还可以运行：

```
alter table order by columnScore, columnLevel; 
```

然后它将您的所有数据组合在一起，这样即使数据库知道每个位的位置，它也可以找到附近属于彼此的所有记录 - 这意味着更少的硬盘驱动器工作 - 因此更快的结果。

第二次手术也可以产生巨大的影响。我的工作电脑（90 年代顶级的可怕旧机器）有一个数据库，里面有几百万条记录，我建立了 - 没什么大不了的，大约 2.5gb 的数据，包括索引 - 性能很差，但订购索引的数据将查询时间从每次查询约 1.5 分钟缩短到约 8 秒。这只是由于硬盘驱动器速度能够到达包含数据的所有扇区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:17:12.020

如果您打算为不同的用户存储数据，那么拥有 2 个表怎么样 - 一个包含有关不同级别的所有信息，另一个包含每个用户的一行以及他在 XML/json 中的分数？

# ruby - lambda的方法？Mats 的示例代码让我感到困惑。

> ID：11930374
> 
> 赞同：7
> 
> 时间：2012-08-13T08:12:15.200
> 
> 标签：ruby, methods, lambda

```
def memoize
  cache = {}
  lambda { |*args| 
    unless cache.has_key?(args)
      cache[args] = self[*args]
    end
    cache [args]
  }
end

factorial =  lambda {|x| return 1 if x== 0; x*factorial[x-1];}.memoize

puts factorial.call 10 
```

代码来自《红宝石编程语言》一书。但这让我很困惑：method(memoize) 如何将 lambda 作为它的方法应用？lambda 可以在其他 lambda 之后使用 dot(.) 作为自己的方法吗？

```
lambda {|x| return 1 if x== 0; x*factorial[x-1];}.memoize 
```

顺便说一句：上面的代码在 irb 中工作，但是 ruby​​ 解释器遇到如下错误：

```
memoize.rb:11: private method `memoize' called for #<Proc:0x0000000103bba018@memoize.rb:11> (NoMethodError) 
```

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T08:28:42.967

你在哪里说这个：

```
def memoize
  #...
end 
```

我想你的意思是这样说：

```
class Proc
  def memoize
    #...
  end
end 
```

这将为`memoize`Procs 添加一个公共方法，并且`lambda { ... }`（或`-> { ... }`在较新的 Rubies 中）为您提供一个 Proc 实例。

现在谈谈`memoize`它自己。方法返回它们最后一个表达式的值，对于`memoize`，最后一个表达式是这样的：

```
lambda { |*args| 
  unless cache.has_key?(args)
    cache[args] = self[*args]
  end
  cache [args]
} 
```

所以`memoize`为 Proc ( `self`) 返回一个包装器，它是一个闭包`cache`，这个包装器所做的就是：

1.  检查是否`cache`有相关参数列表的条目（数组`args`）。
2.  如果我们没有缓存值，则计算原始 Proc 的值 ( `self[*args]`) 并将其存储在缓存中。
3.  返回缓存的值。

您可以使用该[`[]`](https://ruby-doc.org/core/Proc.html#method-i-5B-5D)方法执行 Proc，因此`proc.call(a, b)`与`proc[a, b]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T08:30:01.770

顶层的对象是[main](http://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/)，在那里定义的任何方法都作为私有实例方法添加到`Object`（因此它们在任何地方都可用）。

为什么它在 irb 会话中起作用？因为[上下文模式](http://tagaholic.me/2009/05/29/exploring-how-to-configure-irb.html#context_mode)（也在[此处](http://apidock.com/ruby/IRB/WorkSpace/new/class)），在 irb 中默认为*3*。使用例如值*0* ( `irb --context-mode 0`)，现在它们将像往常一样作为私有方法添加。

如果代码片段明确定义要修改的类而不是使用隐式顶层，那么出于教学目的可能会更可取。

# c# - log4net 多个附加程序，写入事件查看器

> ID：11930381
> 
> 赞同：7
> 
> 时间：2012-08-13T08:12:42.467
> 
> 标签：c#, log4net, log4net-configuration, log4net-appender

我正在使用 log4net 进行日志记录，我有两个附加程序一个文件和另一个事件日志附加程序。我在注册表编辑器中注册了应用程序，问题现在两个记录器都在事件查看器中写入。我需要`fileAppender`写入文件并`eventLogAppender`在事件查看器中显示。

```
<log4net>
<appender name="LogFileAppender" type="log4net.Appender.FileAppender">
  <file value="file.log"/>
  <appendToFile value="false"/>
  <layout type="log4net.Layout.PatternLayout">
    <header value="Logging Start &#xD;&#xA;"/>
    <footer value="Logging End &#xD;&#xA;"/>
    <conversionPattern value="%date [%thread] %-5level %logger: %message%newline"/>
  </layout>
</appender>

<appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">

  <param name="ApplicationName" value="eventlog" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
  </layout>
</appender>

<root>
  <level value="DEBUG"/>
  <appender-ref ref="LogFileAppender"/>
  <appender-ref ref="EventLogAppender" />
</root>
</log4net> 
```

然后在代码中

```
private static readonly ILog log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
// private static readonly ILog log = LogManager.GetLogger("LogFileAppender");
private static readonly ILog logEvents = LogManager.GetLogger("EventLogAppender"); 
```

我尝试了不同的东西，但没有人在工作，有什么解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T08:32:31.097

为了在 log4net 中使用多个 ILog 实例并向每个实例记录不同的信息，您必须在配置文件的 log4net 部分中配置至少两个 Logger 元素。

在您的情况下，您有两个目标 - 文件和事件日志。我将它们称为 FileLogger 和 EventLogger。

这是您在 log4net 部分中需要的附加配置的示例：

```
<logger name="FileLogger">
  <level value="ALL" />
  <appender-ref ref="LogFileAppender" />
</logger>

<logger name="EventLogger">
  <level value="ALL" />
  <appender-ref ref="EventLogAppender" />
</logger> 
```

然后，要在代码中使用每一个，像这样实例化它们：

```
private static readonly ILog fileLogger = LogManager.GetLogger("FileLogger");
private static readonly ILog eventLogger = LogManager.GetLogger("EventLogger"); 
```

请注意，appender 元素的 ref 属性与您已经配置的 appender 的 name 属性相匹配，并且传递给 GetLogger 的名称与 logger 元素的 name 属性相匹配。

# android - 如何从 ByteBuffer 中获取 short[]

> ID：11930385
> 
> 赞同：11
> 
> 时间：2012-08-13T08:12:59.133
> 
> 标签：android, bytebuffer

我在一个 JNI 本机函数需要一个短 [] 参数的 Android 项目中使用 JNI 代码。但是，原始数据存储为 ByteBuffer。我正在尝试按如下方式转换数据格式。

```
ByteBuffer rgbBuf = ByteBuffer.allocate(size);
...    
short[] shortArray = (short[]) rgbBuf.asShortBuffer().array().clone(); 
```

但是我在运行上面显示的第二行代码时遇到了以下问题：

```
E/AndroidRuntime(23923): Caused by: java.lang.UnsupportedOperationException
E/AndroidRuntime(23923): at Java.nio.ShortToByteBufferAdapter.protectedArray(ShortToByteBufferAdapter.java:169) 
```

任何人都可以提出一种实现转换的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T08:16:36.323

实际上，这样做的方法有点奇怪。您可以按以下方式进行；排序将其转换为`short`数组很重要。

```
short[] shortArray = new short[size/2];
rgbBuf.order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(shortArray); 
```

此外，您可能必须使用`allocateDirect`而不是`allocate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T12:13:03.253

我对任何使用过的东西都有同样的错误`asShortBuffer()`。这是一种解决方法（从[2 个字节改编为短 java](https://stackoverflow.com/questions/736815/2-bytes-to-short-java)）：

```
short[] shortArray = new short[rgbBuf.capacity() / 2]);
for (int i=0; i<shortArray.length; i++)
{   
    ByteBuffer bb = ByteBuffer.allocate(2);
    bb.order(ByteOrder.LITTLE_ENDIAN);
    bb.put(rgbBuf[2*i]);
    bb.put(rgbBuf[2*i + 1]);
    shortArray[i] = bb.getShort(0);
} 
```

# c# - 导出到 Excel 不导出 Gridview 内容

> ID：11930387
> 
> 赞同：1
> 
> 时间：2012-08-13T08:13:04.310
> 
> 标签：c#, asp.net

我正在尝试将 gridview 内容导出到 Excel 中，如下所示，创建了 Excel 但没有内容。但我可以查看网页中的内容。

```
using System;
using System.IO;
using System.Reflection;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Xml;
using System.Data;
using System.Web.UI;
using System.Web;

namespace CustomReports.Reports
{
public partial class Reports : System.Web.UI.Page
{
    DataTable ResultTable = new DataTable();        
    GridView ResultGrid = new GridView();

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public override void VerifyRenderingInServerForm(Control control) 
    {
     /* Verifies that the control is rendered */ 
}

    protected void Button1_Click(object sender, EventArgs e)
    {

        DataColumn col1 = new DataColumn("S.No");
        DataColumn col2 = new DataColumn("Workflow Name");
        DataColumn col3 = new DataColumn("Subject Name");
        DataColumn col4 = new DataColumn("Subject ID");

        col1.DataType = System.Type.GetType("System.Int32");
        col2.DataType = System.Type.GetType("System.String");
        col3.DataType = System.Type.GetType("System.String");
        col4.DataType = System.Type.GetType("System.String");

        ResultTable.Columns.Add(col1);
        ResultTable.Columns.Add(col2);
        ResultTable.Columns.Add(col3);
        ResultTable.Columns.Add(col4);

        CoreServiceSession client = new CoreServiceSession();
        SessionAwareCoreServiceClient csClient = client.GetClient();
        var readoption = new ReadOptions();

        ProcessesFilterData filter = new ProcessesFilterData()
        {
            BaseColumns = ListBaseColumns.IdAndTitle,
            ProcessType = ProcessType.Historical

        };

        int i = 1;
        foreach (IdentifiableObjectData data in csClient.GetSystemWideList(filter))
        {
            var processHistory = data as ProcessHistoryData;
            if (processHistory != null)
            {
                DataRow row = ResultTable.NewRow();
                row[col1] = i;
                row[col2] = processHistory.Title;
                foreach (var subjectdetails in processHistory.Subjects)
                {
                    row[col3] = subjectdetails.Title.ToString();
                    row[col4] = subjectdetails.IdRef.ToString();
                }
                ResultTable.Rows.Add(row);
            }
            i++;
        }

        //GridView ResultGrid = new GridView();
        ResultGrid.DataSource = ResultTable;
        ResultGrid.DataBind();
        Panel1.Controls.Add(ResultGrid);
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        ExporttoExcel(ResultGrid, "Reports");
    }

    protected void ExporttoExcel(GridView objGridView, string FileName)
    {
        string attachment = "attachment; filename=" + FileName + ".xls";
        HttpContext.Current.Response.ClearContent();
        HttpContext.Current.Response.AddHeader("content-disposition", attachment);
        HttpContext.Current.Response.ContentType = "application/ms-excel";
        StringWriter objStringWriter = new StringWriter();
        HtmlTextWriter objHtmlTextWriter = new HtmlTextWriter(objStringWriter);
        objGridView.RenderControl(objHtmlTextWriter);
        HttpContext.Current.Response.Write(objStringWriter.ToString());
        HttpContext.Current.Response.End();

    }

}

} 
```

Excel没有从gridview导入内容，它是空白的

ASPX 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Reports.aspx.cs" Inherits="CustomReports.Reports.Reports" EnableEventValidation="false" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">    
<title>Custom Report Page</title>
</head>
<body>
 <form id="form1" runat="server">
     <div>
            <table id="table1" runat="server">
                <tr>
                    <td>
                        <asp:Label ID="CustomReports1" runat="server" Text="Custom Reports" 
                        Font-Bold="True"></asp:Label>
                    </td>
                </tr>

                <tr>
                    <td>
                        <asp:Label ID="SelectReportType2" runat="server" Text="Select Report Type"></asp:Label>
                    </td>

                    <td>
                        <asp:DropDownList ID="DDReportTypes" runat="server" Height="25px" Width="193px" onselectedindexchanged="DDReportTypes_SelectedIndexChanged" AutoPostBack = "true" ></asp:DropDownList>
                    </td>
                </tr>
            </table>

            <table id="dynamictable" runat="server">
            </table>  

            <table id="buttons">
                <tr>
                    <td> 
                        <asp:Button ID="Button1" runat="server" Text="Search" onclick="Button1_Click" />
                    </td>

                    <td> 
                        <asp:Button ID="Button2" runat="server" Text="Export" onclick="Button2_Click" />
                    </td>

                    <td> 
                        <asp:Button ID="Button3" runat="server" Text="GetValues" onclick="Button3_Click" />
                    </td>           
                </tr>
            </table>

            <asp:TextBox ID="TextBox0" runat="server" Height="28px" Width="355px"></asp:TextBox> 

            <asp:Panel ID="Panel1" runat="server">             
                  <asp:GridView ID="ResultGrid" runat="server">
                  </asp:GridView>           
            </asp:Panel>

    </div> 

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:19:01.470

你不需要表格。只需渲染网格：

```
ResultGrid.RenderControl(htw); 
```

但是，您需要添加此代码，因为通常网格必须在表单中

```
public override void VerifyRenderingInServerForm(Control control) 
{       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:19:11.000

尝试使用此代码导出...

```
 Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition", "attachment;filename=fooreport.xls");
    Response.Charset = "";
    Response.ContentType = "application/ms-excel";
    System.IO.StringWriter stringWrite = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
    lstEarningReport.RenderControl(htmlWrite);
    Response.Write("<table border='1' >  ");
    Response.Write(stringWrite.ToString());
    Response.Write("</table>");
    Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T12:54:12.467

这是一个老问题，但是当我遇到同样的问题时遇到了。`EnableViewState`在我的情况下，在 gridview 上设置为 false。将其设置回 true 可以解决问题。我还在导出它之前对gridview进行了数据绑定，也将其删除。

# vim - 如何在 Fakevim 模式下启用 Qt creator 中的自动完成

> ID：11930400
> 
> 赞同：10
> 
> 时间：2012-08-13T08:13:53.933
> 
> 标签：vim, qt-creator

当我在 Qt creator 中启用 FakeVim 模式时，自动完成功能变为禁用！有人有解决方案可以在 fakevim 模式下启用它吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T15:50:59.243

我知道这是一篇旧帖子，但对于任何好奇如何做到这一点的人来说：

- 对于自动补全，只需使用 CTRL-SPACE 激活（然后是通常的选择方法，CTRL-n 前进，CTRL-p 后退等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T21:41:01.363

此问题[已在](https://qt.gitorious.org/qt-creator/qt-creator/source/7724bd467388f6ae3b8a4cbc8609f535a94a03f1%3adist/changes-2.7.0#L209)**Qt Creator**的新版本中得到修复。你可以从[这里](http://qt-project.org/downloads)下载。**此外，您可以使用ALT+V ALT+V**在 fakevim 模式和正常模式之间切换（按 ALT+V 2 次）

# c# - 实现 INotifyPropertyChanged 的 项目列表

> ID：11930401
> 
> 赞同：1
> 
> 时间：2012-08-13T08:13:56.747
> 
> 标签：c#, .net, inotifypropertychanged

实现项目收集的最佳方式是什么，其中：

1.  每个项目可以是不同的类型
2.  每个项目都会在其更改时引发 PropertyChanged 事件（父类实现 INotifyPropertyChanged）

更新：

我正在考虑这样的事情：收藏：

```
["Name", string:"John Doe"]
["Age", int:"32"]
["Profiles", List<Profiles>:"list of profiles"] 
```

我将能够像这样添加新项目：

```
Collection.Add("NewItem", value); 
```

然后改变它：

```
Collection["NewItem"] = newValue; 
```

哪个会触发事件：

```
NotifyPropertyChanged("NewItem"); 
```

因此，我将能够订阅该集合中的每一个项目并拥有不同的事件处理程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:30:31.097

您需要从您的描述中得到我（和其他人）所说的 an `ObservableDictionary`，Google 会为您提供一些实施建议。.NET 中没有内置这样的类，但有很多教程和第三方实现。

我这么说的原因：

*   通知集合的内容已更改的正确接口是[`INotifyCollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)，不是`INotifyPropertyChanged`。当您添加一个项目或调用`Collection["NewItem"] = newValue`时，您应该触发的事件是`CollectionChanged`，因为它不是已更改的列表的*属性- 它是**内容*
*   您显然打算让您的列表具有键/值对，这意味着您不能轻松使用现有`ObservableCollection`类。

另外，您说“我将能够订阅该集合中的每一个项目”，这表明您可能*希望*将字典中的“值”限制为泛型类，然后您可以选择将字典中的值设为您需要的任何类型。`INotifyPropertyChanged``ObservableDictionary`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:16:33.590

如果它必须是一个列表，请使用

```
ObservableCollection<INotifyPropertyChanged> 
```

# python - 将文件的某些数据与python中的另一个文件进行比较

> ID：11930404
> 
> 赞同：0
> 
> 时间：2012-08-13T08:14:11.577
> 
> 标签：python, file, file-comparison

我确实有一个文件 f1，其中包含一些文本，可以说“一切都很好”。在另一个文件 f2 中，我可能有 100 行，其中一个是“一切都很好”。

现在我想看看文件 f2 是否包含文件 f1 的内容。

如果有人提出解决方案，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:18:25.197

```
with open("f1") as f1,open("f2") as f2:
    if f1.read().strip() in f2.read():
         print 'found' 
```

编辑：由于 python 2.6 不支持单行多个上下文管理器：

```
with open("f1") as f1:
    with open("f2") as f2:
       if f1.read().strip() in f2.read():
             print 'found' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:19:59.460

```
template = file('your_name').read()

for i in file('2_filename'):
    if template in i:
       print 'found'
       break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:26:05.400

```
with open(r'path1','r') as f1, open(r'path2','r') as f2:
    t1 = f1.read()
    t2 = f2.read()
    if t1 in t2:
        print "found" 
```

如果您要搜索的字符串中有 '\n'，则使用其他方法将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:30:23.640

```
fileOne = f1.readlines()
fileTwo = f2.readlines() 
```

现在`fileOne`和`fileTwo`是文件中的行列表，现在只需检查

```
if set(fileOne) <= set(fileTwo):
    print "file1 is in file2" 
```

# django - 错误：没有名为 tinymce 的模块

> ID：11930411
> 
> 赞同：3
> 
> 时间：2012-08-13T08:14:36.310
> 
> 标签：django, tinymce

我按照django-tinymce 和[Using TinyMCE in Django的](http://learnedstuffs.wordpress.com/2012/05/25/using-tinymce-in-django/)[安装指南](http://django-tinymce.googlecode.com/svn/tags/release-1.5/docs/.build/html/installation.html)，在虚拟环境中使用 pip 安装了 django-filebrowser、django-grapelli 和 django-tinymce。 settings.py 的片段：

```
INSTALLED_APPS = (
  ...
  'django.contrib.admin',
  'tinymce',
)
TINYMCE_JS_URL = MEDIA_URL + 'js/tiny_mce/tiny_mce.js'
TINYMCE_JS_ROOT = MEDIA_ROOT + 'js/tiny_mce'
TINYMCE_DEFAULT_CONFIG = {
  'plugins': "table,spellchecker,paste,searchreplace",
  'theme': "advanced",
} 
```

网址.py：

```
urlpatterns = patterns('',
  ...
  (r'^tinymce/', include('tinymce.urls')),
  # or (r'^tiny_mce/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root':  os.path.join(settings.STATIC_ROOT, "admin/js/tiny_mce")}, 
) 
```

_

```
import tinymce 
```

在 Python 中是成功的，但是当我尝试运行 django（1.4 版）服务器时，我得到了

```
Error: No module named tinymce 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:47:47.417

听起来您将软件包安装到了错误的 virtualenv 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:23:44.913

尝试

```
import yourprojectname.tinymce 
```

# c# - 如何将 GroupBy 与对象列表一起使用并返回 IList ?

> ID：11930414
> 
> 赞同：0
> 
> 时间：2012-08-13T08:14:58.867
> 
> 标签：c#, linq, casting, group-by

我有一个方法，必须返回一个对象列表，但我不知道怎么做！我的问题是将groupdResult 转换（或转换）为IList。

```
internal IList<MyClass> MyMethod()
        {
            IList<MyClass> result=new List<MyClass>();

            IList<MyClass> rawData = this.GetRawDatas();

            foreach (MyClass item in rawDatas)
            {
                // do somthings
                MyClass balancedData = new MyClass();  
                if(some conditions)
                {
                  result.Add(balancedData);
                }
            }
            var groupdResult = result.GroupBy(x => x.MyField).ToList();
            return groupdResult;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:24:23.827

想一想：结果要么是组列表，要么是*未分组*对象的列表。我相信你想要的实际上只是一个排序列表：

```
return result.OrderBy(x => x.MyField).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:22:26.800

这不是您遇到问题的 List/IList。事实上 GroupBy 不返回 MyClass。

GroupBy 返回一个 IGrouping，所以该行

```
var groupdResult = result.GroupBy(x => x.MyField).ToList(); 
```

返回一个列表< IGrouping< MyClass >>。

# ruby-on-rails - Ruby on Rails 模型不遵循命名空间

> ID：11930418
> 
> 赞同：3
> 
> 时间：2012-08-13T08:15:09.977
> 
> 标签：ruby-on-rails

我有一个位于命名空间中的 Rails 3.2.8 模型。我敢肯定，过去命名空间会自动扩展为表名的样子。例如 Module::Model 将成为数据库中的 module_model。

出于某种原因，我现在有一个问题，即这不会通过 rails 应用程序发生。迁移、模型和控制器都存在于命名空间中，但是当模型查找表时，它会忽略表前缀并抱怨找不到数据库。

这是示例

```
module Magazine
  def self.table_name_prefix
    'magazine_'
  end
end

module Magazine
  class Paper < ActiveRecord::Base
    #some stuff here
  end
end 
```

当我在 Magazine::Paper 上进行查询时，它会查找表“paper”而不是它应该查找的“maganzine_paper”。这导致整个应用程序表现出一些奇怪的行为。我还尝试使用 self.table_name 在模型中手动设置表名，但这只会让模型找到正确的表。路线仍然和我玩游戏，因为当我在论文下面嵌套一些东西（例如评论）时，它会寻找一条不存在的路线。

这就是路线内部的内容。评论应该转到 /magazine/papers/1/comments 但它会寻找一条名为 /magazine/comments 的路线

```
namespace :magazine do
  resources :papers do 
    resources :comments
  end
end 
```

到底是怎么回事？

更新：

好的，所以我想通了，但不确定是否应该忽略它或查看是什么原因造成的。引擎名称是杂志，在引擎中我为名为杂志的模型创建了一个命名空间，但这会导致问题。所以rails不能有一个类似于引擎名称的命名空间名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T19:09:42.677

我遇到了同样的问题，忘记了我的应用程序的名称（主模块）与我的模型的命名空间具有相同的名称。更改模块名称或应用程序名称可以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:38:42.583

如果你只是写

```
namespace :magazine do
 resources :papers do 
  resources :comments
 end
end 
```

并运行 rake 路由，您会看到它正在寻找正确的 url，当您说它正在寻找时，`/magazine/comments`您肯定必须在文件中的某处写了另一条路由。当你写

```
module Magazine
 def self.table_name_prefix
  'magazine_'
 end
end 
```

当您使用相同的模块名称编写模型时，您将使用其中的`Magazine`不同内容替换相同的模块。而不是在杂志模块中编写模型纸张，只需按以下方式将模块包含在模型纸张中。

```
class Paper < ActiveRecord::Base
  include Magazine
  #some stuff here
end 
```

这将确保在您的应用程序启动时加载您的模型时调用您的 table_name_prefix 方法。

# c - Linux 内核 udp 查找

> ID：11930419
> 
> 赞同：4
> 
> 时间：2012-08-13T08:15:11.690
> 
> 标签：c, linux

```
struct sock *udp4_lib_lookup(struct net *net, __be32 saddr, __be16 sport,
                 __be32 daddr, __be16 dport, int dif) 
```

这是函数声明，它将连接属性转换为`struct sock`. 正如我用谷歌搜索的那样，第一个参数应该是`&init_net`. 但是最后一个论点应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:08:08.297

`dif`参数是设备接口。

# c# - 如何更改 DockWindow 上 TitleBar 的背景色？

> ID：11930423
> 
> 赞同：0
> 
> 时间：2012-08-13T08:15:21.720
> 
> 标签：c#, winforms, docking, dockpanel

我必须为`TitleBar`DockWindow 着色。我可以为正常着色`winform Titlebar color`..但我不知道如何更改`dockwindow titlebar`停靠在右、左、上、下的颜色。

```
 [DllImport("User32.dll", CharSet = CharSet.Auto)]
    public static extern int ReleaseDC(IntPtr hWnd, IntPtr hDC);

    [DllImport("User32.dll")]
    private static extern IntPtr GetWindowDC(IntPtr hWnd);

    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);
        const int WM_NCPAINT = 0x85;
        if (m.Msg == WM_NCPAINT)
        {
            IntPtr hdc = GetWindowDC(m.HWnd);
            if ((int)hdc != 0)
            {
                Graphics g = Graphics.FromHdc(hdc);
                g.FillRectangle(Brushes.Green, new Rectangle(0, 0, 4800, 23));
                    //(0, 0, 400, 252));
                g.Flush();
                ReleaseDC(m.HWnd, hdc);
            }
        }
    } 
```

通过使用它，我可以绘制 Normal winform 的标题栏。但我不能对 Dockwindow 做同样的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:18:06.990

*在codeplex*的 Windows 窗体项目中使用[绘制自定义边框](http://customerborderform.codeplex.com/)。这个项目是一个小型库，它扩展了 Windows 窗体，**能够自定义 Windows 的非客户区**。

# iphone - 将唯一标识符从 IOS 设备发送到 Web 服务

> ID：11930425
> 
> 赞同：1
> 
> 时间：2012-08-13T08:15:25.667
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [iPhone 应用程序的唯一标识符](https://stackoverflow.com/questions/227590/unique-identifier-for-an-iphone-app)

我们正在构建一个 IOS 应用程序，该应用程序旨在使用设备的序列号作为唯一标识符来识别设备是否获得许可。但据此，[唯一](https://stackoverflow.com/questions/7127614/retrieving-the-serial-number-from-the-device%20it%20seems%20that%20applications%20reading%20the%20serial%20number%20are%20not%20allowed%20on%20the%20appStore,%20and%20this%20feature%20is%20even%20deprecated)标识符在 iOS 5 中已弃用。

是否有任何其他标识符可以用来唯一标识设备？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:40:56.850

这就是我所做的，这也是苹果的建议

> 不要使用 uniqueIdentifier 属性。要创建特定于您的应用程序的唯一标识符，您可以调用 CFUUIDCreate 函数来创建 UUID，并使用 NSUserDefaults 类将其写入默认数据库。

```
- (NSString *)getUUID {
    NSString *string = [[NSUserDefaults standardUserDefaults] objectForKey:@"deviceUUID"];
    if (string == nil) {
        CFUUIDRef   uuid;
        CFStringRef uuidStr;

        uuid = CFUUIDCreate(NULL);
        uuidStr = CFUUIDCreateString(NULL, uuid);

        string = [NSString stringWithFormat:@"%@", uuidStr];
        [[NSUserDefaults standardUserDefaults] setObject:string forKey:@"deviceUUID"];
        [[NSUserDefaults standardUserDefaults] synchronize];

        CFRelease(uuidStr);
        CFRelease(uuid);
    }

    return string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:19:17.443

我们倾向于使用网络上流行的 cookie 方法来解决这个问题，该方法适用相同的规则。基本上，您的应用程序应该检查您的 cookie 是否存在；如果它不存在，请向服务器索取一个并将其保存在本地。然后对于每个请求，发送标识符。为每个新设备生成一个足够不同的标识符是服务器的工作。

通过这种方式，您仍然可以跟踪单个用户，而不是通过对他们的了解超出您的需要。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-13T08:58:47.800

我用这个：

```
//create a 30 digits random alphanumeric string
NSString *symbols = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
NSMutableString *randStr = [NSMutableString stringWithCapacity: 30];
for (int i=0; i<30; i++) 
   [randStr appendFormat: @"%C", [symbols characterAtIndex: rand()%[symbols length]]];
NSLog(@"Pseudo UUID = %@", randStr); 
```

获得重复的可能性非常小。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-13T08:33:37.190

您可以使用 UDID 发送服务器。它是每个设备的唯一 ID。如下所示并将其发送到服务器。

```
NSString *udid=[[UIDevice currentDevice]uniqueIdentifier]; 
```

# shell - 使 inotifywait 将多个文件更新组合为一个？

> ID：11930442
> 
> 赞同：6
> 
> 时间：2012-08-13T08:17:01.613
> 
> 标签：shell, inotify, inotify-tools

我有一个包含我观看的 Sphinx 文档的文件夹`inotifywait`（来自[inotify-tools](https://github.com/rvoicilas/inotify-tools/)）。该脚本重新构建 html 和 singlehtml 并刷新 Chrome。

```
#!/bin/sh
inotifywait -mr source --exclude _build -e close_write -e create -e delete -e move | while read file event; do
    make html singlehtml
    xdotool search --name Chromium key --window %@ F5
done 
```

当我保存单个文件时，这很好用。但是，当我`hg update`到旧版本或将多个文件粘贴到文件夹中时，它会为*每个文件*`source`触发脚本。

 *是否有一个简单的解决方法（无需编写自定义 python 脚本——我可以这样做）让它在触发脚本之前等待几分之一秒？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T19:31:58.683

我制作了一个更复杂的 shell 脚本并将其发布在[文章中](http://habrahabr.ru/post/151129/)：

```
inotifywait -mr source --exclude _build -e close_write -e create -e delete -e move --format '%w %e %T' --timefmt '%H%M%S' | while read file event tm; do
    current=$(date +'%H%M%S')
    delta=`expr $current - $tm`
    if [ $delta -lt 2 -a $delta -gt -2 ] ; then
        sleep 1  # sleep 1 set to let file operations end
        make html singlehtml
        xdotool search --name Chromium key --window %@ F5
    fi
done 
```

它`inotifywait`不仅记录文件名和操作，还记录时间戳。该脚本将时间戳与当前 unixtime 进行比较，如果 delta 小于 2 秒，则运行`make html`. 但在此之前，它会休眠 1 秒以结束文件操作。对于下一个修改的文件，时间戳将是旧的，增量将超过 2 秒，并且不会执行任何操作。

我发现这种方式是 CPU 消耗最少且最可靠的方式。

我还尝试运行一个简单的 Python 脚本，但这意味着如果我将 jQueryUI 这样大的东西粘贴到文件夹中，就会产生一千个进程，然后变成僵尸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-12T01:03:28.757

试试这个：

```
last_update=0
inotifywait -mr source --exclude _build -e close_write -e create \
    -e delete -e move --format '%T' --timefmt '%s' |
    while read timestamp; do
        if test $timestamp -ge $last_update; then
            sleep 1
            last_update=$(date +%s)
            make html singlehtml
            xdotool search --name Chromium key --window %@ F5
        fi
    done 
```

1.  `--format '%T' --timefmt '%s'`导致为每个事件输出一个时间戳。
2.  `test $timestamp -ge $last_update`将事件时间戳与上次更新的时间戳进行比较。因此，在睡眠期间发生的任何事件都将被跳过。
3.  `sleep 1`添加以等待事件累积。较短的持续时间在这里可能会很好，例如`sleep 0.5`，但它的便携性会降低。
4.  `last_update=$(date +%s%N)`设置最后一次更新的时间戳，以便与下一个事件的时间戳进行比较。`sleep 1`以这种方式，在循环的下一次迭代期间发生的任何附加事件都将被丢弃。

请注意，这里存在竞争条件，因为 strftime() 不支持纳秒。`make`如果一组事件跨越第二个边界，则此示例可能会运行两次。要冒丢失事件的风险，请替换`-ge`为`-gt`.*

# soap - SOAP 请求中省略字段的致命错误

> ID：11930445
> 
> 赞同：2
> 
> 时间：2012-08-13T08:17:12.010
> 
> 标签：soap, soap-client, php

我正在构建一个 SOAP 客户端，用于将信息发送到使用 WSDL 定义的 SOAP 服务。在 SoapUI 中将数据发布到服务时，我可以省略我没有值的字段，但在 PHP 中我遇到了致命错误。

有没有办法让 SOAPClient 在 PHP 中省略字段？我传递给 SOAPClient 的对象如下所示：

```
Kunde Object
(
    [kundenr] => 1008911
    [contact_id] => 10941
    [kundenavn] => 
    [organisasjonsnr] => 
    [addresse] => Addresse Object
        (
            [postadresse1] => 
            [postadresse2] => 
            [postadresse3] => 
            [postadresse] => 
            [gateadresse1] => 
            [gateadresse2] => 
            [gateadresse3] => 
            [gateadresse] => 
            [county] => 
            [kommunenr] => 
            [stat] => 
            [postnr] => 
            [poststed] => 
            [landkode] => 
            [land] => 
            [adresslayout] => 
        )

    [kontakt] => Kontakt Object
        (
            [tlfnr] => 
            [tlfbeskrivelse] => 
            [faxnr] => 
            [faxbeskrivelse] => 
            [mailadresse] => 
            [webadresse] => 
        )

    [person] => Person Object
        (
            [customerId] => 
            [personId] => 
            [contact_id] => 
            [fornavn] => 
            [etternavn] => 
            [brukernavn] => 
            [epost] => 
            [tlf] => 
            [kundetype] => 40
            [addresse] => Addresse Object
                (
                    [postadresse1] => 
                    [postadresse2] => 
                    [postadresse3] => 
                    [postadresse] => 
                    [gateadresse1] => 
                    [gateadresse2] => 
                    [gateadresse3] => 
                    [gateadresse] => 
                    [county] => 
                    [kommunenr] => 
                    [stat] => 
                    [postnr] => 
                    [poststed] => 
                    [landkode] => 
                    [land] => 
                    [adresslayout] => 
                )

        )

    [faultmsg] => Faultmsg Object
        (
            [Type] => 
            [Melding] => 
            [Detalj] => 
        )

    [avdeling] => 
    [kundetype] => 40
    [informasjon] => 
    [aktiv] => 
    [stopputsendelse] => 
    [aco_kunde] => 
    [uf_kunde] => 
    [gan_kunde] => 
    [kunde] => 10941
) 
```

例如，我想从对象中省略 Kunde->kundenavn 属性，但这给了我这个致命错误：

> [2012 年 8 月 13 日 07:01:50] PHP 致命错误：SOAP-ERROR: Encoding: object has no 'kundenavn' property in...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:45:05.160

您可能遇到了[PHP 错误 #50997：尝试提交选择的第二个元素时出现 SOAP 错误](https://bugs.php.net/bug.php?id=50997)

或者它可能是 WSDL 中的必填字段，因此您很可能会以任何一种方式坚持下去。对不起！

# jsp - 一个 Servlet 中的多个操作

> ID：11930447
> 
> 赞同：1
> 
> 时间：2012-08-13T08:17:21.033
> 
> 标签：jsp

我是 JSP 和 Servlet 的新手，我必须将多个操作放在一个 servlet 中，例如更新、删除、搜索。我在这里添加了我的 jsp 和 Servlet。我也使用 jquery 验证。谁能帮帮我吗。如果我的问题不清楚，请发表评论。

```
<

form id="form-sign-up" class="styled" action="DepartmentServlet" method="post">
                <fieldset>
                    <h3>Department </h3>
                    <ol>
                        <li class="form-row"><label>Department Id:</label>
                            <input type="text" name="departmentId" id="departmentId" class="text-input required"/><span id="errmsg"></span>
                        </li>
                        <li class="form-row"><label>Department Name:</label>
                            <input type="text" name="departmentName" id="departmentName" class="text-input required"/>
                        </li>
                        <li class="form-row"><label>Department Head:</label>
                            <select name="departmentHead" class="text-input required" id="myDropdown"style="width: 158px"> <option value="">Select Department Head</option>
                                <%

                                    String val = "";
                                    Department dp = new Department();
                                    ResultSet rs = dp.getHeadOfDepartment();
                                    while (rs.next()) {
                                        val = rs.getString(2);
                                %>

                                <option value="<%= val%>"><%= val%></option>
                                <%
                                    }

                                %>

                            </select>
                        </li>
                        <li class="form-row"><label>Appointed Date:</label>
                            <input id="demo1" name="appointedDate"type="text" maxlength="25" size="25" class="text-input required"><a href="javascript:NewCal('demo1','ddmmmyyyy',true,24)"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
                                <span class="descriptions">pick a date..</span>
                        </li>

                        <li class="button-row">
                            <input type="submit" value="ADD" id="add"class="btn-submit img-swap"/>
                            <input type="submit" value="Delete"  class="btn-delete img-swap"/>
                            <input type="submit" value="Update" class="btn-update img-swap"/>
                            <input type="submit" value="Search" class="btn-search img-swap"/>
                        </li>
                    </ol>
                </fieldset>
            </form> 
```

* * *

```
public class DepartmentServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //Getting the Value from the viewer
        String sdepartmentId=request.getParameter("departmentId");
        String departmentName=request.getParameter("departmentName");
        String departmentHead=request.getParameter("departmentHead");
        String dateTime=request.getParameter("appointedDate");

        //Converting to the String department id to integer
        Integer departmentId=Integer.parseInt(sdepartmentId);

        Department dp=new Department();
        dp.setAppDate(dateTime);
        dp.setDepartHead(departmentHead);
        dp.setDepartId(departmentId);
        dp.setDepartName(departmentName);
        try {
            new Department().insertDepartment(dp);
        } catch (SQLException ex) {
            Logger.getLogger(DepartmentServlet.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

## }

```
$(document).ready(function() { 
    $("#departmentId").keypress(function (e)  
    { 
        //if the letter is not digit then display error and don't type anything
        if( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57))
        {
            //display error message
            $("#errmsg").html("Digits Only").show().fadeOut("slow"); 
            return false;
        }   
    });

    $('.btn-delete').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $("#departmentId").val();
            var $parentTag = $("#departmentId").parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"

            // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

    $('.btn-submit').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $(this).val();
            var $parentTag = $(this).parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"
            if($(this).hasClass('email') == true){
                if(!emailReg.test(inputVal)){
                    $parentTag.addClass('error').append($error.clone().text('Enter valid email'));
                }
            }

            // Check passwords match for inputs with class "password"
            if($(this).hasClass('password') == true){
                var password1 = $('#password-1').val();
                var password2 = $('#password-2').val();
                if(password1 != password2){
                    $parentTag.addClass('error').append($error.clone().text('Passwords must match'));
                }
            }

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:37:54.200

例如，您可以简单地通过 javascript 调用您的 servlet 方法

在提交按钮中，我只使用名称属性

```
<li class="button-row">
                            <input type="submit" value="ADD" id="add"class="btn-submit img-swap" name="add" />
                            <input type="submit" value="Delete"  class="btn-delete img-swap" name="delete" />
                            <input type="submit" value="Update" class="btn-update img-swap" name="update" />
                            <input type="submit" value="Search" class="btn-search img-swap" name="search" />
                        </li> 
```

您可以通过提交标记名称在javascript中调用具有多种方法的单个servlet，如下所示

```
 <script type="text/javascript">
    var frm = document.forms[0];

    if (request.getParameter("add") != null) {

        var pageName = "/DepartmentServlet?method=add"
        frm.action = pageName;
        frm.submit();

}
else if (request.getParameter("delete") != null) {
    //likewise you can call your other method from DepartmentServlet
    //Even you can pass parameter by onClick event
    // Invoke action 2.
}
else if (request.getParameter("update") != null) {
    // Invoke action 3.
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:25:05.903

如果您想使用单个 servlet 执行多个操作，一个简单的方法是为每个操作创建不同的方法并根据您的使用调用它们。您可以使用隐藏字段或任何必须传递哪些操作必须执行和使用的方法用于调用此方法的 if 语句

`<input type="hidden" name="operation" id="operId" value="insert" />`

您可以以与访问其他字段相同的方式访问它，并将在此处获得指定的值，您将获得值作为插入

在 servlet 中，您可以使用

```
 String operation=request.getParameter("operation"); 
```

# css - border-radius 和 box-shadow 在 IE7 中不起作用，我使用的是 PIE.htc 文件。

> ID：11930449
> 
> 赞同：1
> 
> 时间：2012-08-13T08:17:21.437
> 
> 标签：css

Border-radius 和 box-shadow 在 IE7 中不起作用。我正在使用 PIE.htc 文件。路径是正确的，我检查了它。不知道哪里出错了。我以前也用过它，然后它就可以工作了。这次不知道是什么原因。

```
.box-shadow-outer { 
float: left; font-size: 40px;
border: 2px solid #c4c4c4;
padding: 80px 0;
text-align: center;
width: 500px;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius:10px;
-webkit-box-shadow: #666 0px 0px 10px;
-moz-box-shadow: #666 0px 0px 10px;
box-shadow: #666 0px 0px 10px;
background: #e4e4e4;
behavior: url(../../Content/Css/PIE.htc); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:30:11.260

`float: left;`正在制造问题。

您可以通过两种方式解决它：

1.  消除`float: left;`

2.  添加此样式：

    ```
    position:relative;
    z-index:1; 
    ```

# sharepoint-2010 - 从 ASP.Net ReportViewer 打开时报告超时

> ID：11930456
> 
> 赞同：1
> 
> 时间：2012-08-13T08:17:34.677
> 
> 标签：sharepoint-2010, reporting-services, sql-server-2012

我使用此 c# 代码从 SharePoint 2010 站点和 SQL Server Reporting Services 2012 打开报告。

```
if (!IsPostBack)
{
   ReportViewer1.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote;
   ReportViewer1.ServerReport.ReportServerUrl = new Uri("https://site.com/_vti_bin/reportserver");
   ReportViewer1.ServerReport.ReportPath = "https://site.com/sites/ssrs/Reports/Report1.rdl";

   ReportViewer1.ShowParameterPrompts = false;
   ReportViewer1.ShowCredentialPrompts = false;
   IReportServerCredentials irsc = new ReportViewerCredentials("user", "pass", "domain");
   ReportViewer1.ServerReport.ReportServerCredentials = irsc;
   ReportViewer1.ServerReport.Refresh();
} 
```

我可以从 SharePoint 网站打开报告，但是当我尝试在 ASP.Net 页面中使用上述代码打开它们时，它们会超时。代码运行良好，因为我已成功从我的测试场打开报告。在我的生产场中，我收到消息：
**“底层连接已关闭：连接意外关闭。”**

有趣的是报告打开了两次（两天内），当我尝试打开其他报告时，它就像以前一样失败了。这发生在我重述 IIS 时，但它不再发生。

我拥有服务器和 SharePoint Farm 的所有权限。报告只是一个带有一行的页面，它甚至没有数据源。

# ios - 视频不工作 视频崩溃了

> ID：11930458
> 
> 赞同：2
> 
> 时间：2012-08-13T08:17:38.873
> 
> 标签：ios

我的应用程序崩溃了，我已经看过所有教程，但它一直崩溃。有什么问题？我使用情节提要，然后连接按钮，就是这样。它崩溃了

```
- (IBAction)playMove;
{
    NSURL *url =[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"1" ofType:@"mp4"]];
    MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
    [self presentMoviePlayerViewControllerAnimated:player];
    player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [player.moviePlayer play];
    player =nil;
} 
```

# objective-c - MPMoviePlayerViewController 后台处理。从后台回到前台后如何继续播放？

> ID：11930461
> 
> 赞同：1
> 
> 时间：2012-08-13T08:17:45.980
> 
> 标签：objective-c, ios, mpmovieplayercontroller

我正在开发视频流应用程序。它是用 ARC for iOS5 构建的。要显示视图，我以这种方式使用*MPMoviePlayerViewController*：

。H

```
@interface EpisodesTableViewController : UITableViewController<EpisodeUrlResolverDelegate> {
    NSTimeInterval playbackTime;
    EpisodeUrlResolver *episodeUrlResolver;
}
@property (strong, nonatomic) MPMoviePlayerViewController *player;
@end 
```

.m

```
@implementation EpisodesTableViewController
@synthesize episodes, player;

- (void)viewDidLoad
{
    [super viewDidLoad];
    episodeUrlResolver = [[Soap4MeEpisodeUrlResolver alloc] init];
    [episodeUrlResolver setDelegate:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterForeground) name:@"WillEnterForeground" object:nil];                 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterBackground) name:@"WillEnterBackground" object:nil];
}

- (void)viewDidUnload
{
    episodeUrlResolver = nil;
    player = nil;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"WillEnterForeground" object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"WillEnterBackground" object:nil];
    [super viewDidUnload];
}

- (void)url:(NSURL *)url WasResolvedForEpisode:(Episode *)episode {
    player = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    player.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    player.moviePlayer.allowsAirPlay = YES;
    [self presentModalViewController:player animated:YES];
}

- (void)willEnterBackground {
    if (player) {
        playbackTime = player.moviePlayer.currentPlaybackTime;
    }
}

- (void)willEnterForeground {
    if (!player)
        return;
    if(player.moviePlayer.playbackState == MPMoviePlaybackStateInterrupted || player.moviePlayer.playbackState == MPMoviePlaybackStateStopped || player.moviePlayer.playbackState == MPMoviePlaybackStatePaused)
    {
        [self continuePlayback];
    }
}

- (void)continuePlayback {
    [self presentModalViewController:player animated:YES];
    [player.moviePlayer setInitialPlaybackTime:playbackTime];
    NSLog(@"%f", player.moviePlayer.initialPlaybackTime);
    [player.moviePlayer play];
} 
```

关于呈现代码的几句话：当视频的 url 被解析时，我创建了*MPMoviePlayerViewController*对象来播放视频。开始播放。然后，当应用程序使用主页按钮进入后台时，*MPMoviePlayerViewController 会*自动暂停播放并从屏幕上消失（奇怪的行为，对我来说）。这就是为什么我必须在应用程序进入后台时保存播放时间，并在应用程序返回前台时再次显示现有的*MPMoviePlayerViewController并恢复播放时间。*当用户按下主页按钮然后返回应用程序时，它工作正常。

但是当用户锁定设备时它不起作用。*当applicationWillEnterForeground被调用时会触发**WillEnterBackground*通知 ，因此对于锁定事件它也会被调用。但是，如果用户锁定设备 MPMoviePlayerViewController 没有像用户按下主页按钮时那样被正确关闭。它从屏幕上隐藏，但调用代码

 *```
[self presentModalViewController:player animated:YES]; 
```

抛出异常

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <EpisodesTableViewController: 0x91b3950>.' 
```

我试图更改代码以关闭控制器：

```
- (void)willEnterForeground {
        if (!player)
            return;
        if(player.moviePlayer.playbackState == MPMoviePlaybackStateInterrupted || player.moviePlayer.playbackState == MPMoviePlaybackStateStopped || player.moviePlayer.playbackState == MPMoviePlaybackStatePaused)
        {
            if (self.presentedViewController) {
            [self dismissViewControllerAnimated:YES completion:^{
                [self continuePlayback];

            }];
        }
        else {
            [self continuePlayback];
        }
        }
    } 
```

现在它不会抛出异常，而是显示警告

```
wait_fences: failed to receive reply: 10004003 
```

也永远不会调用*完成*块。

**如何正确解决背景/前景继续播放模态显示的 MPMoviePlayerViewController？** 感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:44:48.013

我解决了这个问题。

方法*-willEnterBackground*应如下所示：

```
- (void)willEnterBackground {
    if (player) {
        playbackTime = player.moviePlayer.currentPlaybackTime;
        [self dismissModalViewControllerAnimated:NO];
    }
} 
```

当应用程序进入后台模式时，我们必须手动关闭*MPMoviePlayerViewController 。*注意只用

```
[self dismissModalViewControllerAnimated:NO]; 
```

代替

```
[self dismissMoviePlayerViewControllerAnimated]; 
```

那是因为*MPMoviePlayerViewController*显示为

```
[self presentModalViewController:player animated:YES]; 
```*

# android - 权限拒绝：启动 Intent

> ID：11930465
> 
> 赞同：0
> 
> 时间：2012-08-13T08:17:55.883
> 
> 标签：android, android-intent

在我的应用程序中，我必须使用 Intent.setClassName 或 setComponent 来启动另一个包中的活动。当我使用 Intent.setClass 时没有问题 Intent intent = new Intent(getApplicationContext(), org.iustb.knowledebase.animation.transparent.MainTransparentActivity.class); 网上解决这个问题的建议是在AndroidManifest中的目标activity中添加or android:exported="true"，但是不起作用。有没有人可以帮助我？
我写了下面的代码：

```
Intent intent = new Intent();
intent.setClassName(cursor.getString(pIndex), cursor.getString(cIndex));
startActivity(intent); 
```

目标活动的清单文件设置：

```
<activity android:name="org.iustb.knowledebase.animation.transparent.MainTransparentActivity"
                android:exported="true"></activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:37:22.060

您是否确保`cursor`返回的值是正确的？

的第一个参数`setClassName()`应该是**应用程序包**名，而不是Activity被启动的包名。

假设应用程序包是：`com.testandroid`，但您想从`com.testandroid.other`包中启动其他活动，那么您的代码应如下所示：

```
intent.setClassName("com.testandroid", "com.testandroid.other.OtherActivity"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-27T06:35:10.553

`package=com.example.myApplication`在我的情况下，这是标签下的`AndroidManifest.xml`文件`<manifest>`和标签下`applicationId`的`build.gradle:app`模块之间的冲突 `defaultConfig`。希望它会有所帮助。

# java - 是否为最终字符串调用 String.length()？

> ID：11930474
> 
> 赞同：10
> 
> 时间：2012-08-13T08:18:22.103
> 
> 标签：java, string, final

一个快速的只是为了让内心平静：
考虑以下

```
final String str = "This is the end"; 
```

在`str.length()`运行时评估还是在字节码中硬编码为 15？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T08:24:44.083

`str.length()`计算`String constructor`并保存在 中`private final int count;`，`str.length()`只返回`count`变量。我刚刚在这里查看了源代码[http://www.docjar.com/html/api/java/lang/String.java.html](http://www.docjar.com/html/api/java/lang/String.java.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-13T08:23:10.497

`str.length()` *在运行时*评估。`final`表示引用的值不能更改。它与字符串本身无关。

但是，如果您查看源代码，`String`您会看到它`length()`返回一个字段的值，因此不会发生计算，值 os 只是读取...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T08:22:02.423

在字节码中，方法将被评估。

但是，方法调用可能会在[jit 编译期间内联](http://docs.oracle.com/cd/E15289_01/doc.40/e15058/underst_jit.htm)

String.length() 方法的代码如下：

```
public int length() {
    return count;
} 
```

我认为在这种情况下，对字符串的引用被声明为 final 对内联没有任何影响。

# php - 标头位置 - 在帖子中返回 url - 它安全吗？

> ID：11930475
> 
> 赞同：1
> 
> 时间：2012-08-13T08:18:22.653
> 
> 标签：php

我有这样的东西（短版）：index.php：

```
<?PHP
echo "<form action='process_form.php?action=do_something' method='post'>";
echo "<input type='hidden' name='return_url' value='index.php?".$_SERVER['QUERY_STRING']."'>";
?> 
```

现在在 process_form.php 中，我处理了该表单，并在其末尾添加了以下内容：

```
<?PHP
$return_url = $_POST['return_url'];
header ("location: $return_url");
die();
?> 
```

我的问题是——我做得对吗？它是处理 POST 表单数据并重定向回来的正确方法吗？问题是我的返回 url 可以是任何东西，但我希望用户被重定向到他们提交该表单的位置。

是否有一些我应该特别注意的安全问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:31:52.220

我会用这个：

**索引.php**

```
<form action="process_form.php" method="post">
    <input type="hidden" name="action" value="do_something" />
    <input type="submit" value="Submit" />
</form> 
```

**process_form.php**

```
<?php
header('Location: ' . $_SERVER['HTTP_REFERER']);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:30:08.040

在代码中的任何地方使用`$_POST`而不进行过滤都有可能导致不需要的行为；在您的情况下，您应该注意[响应拆分攻击](http://en.wikipedia.org/wiki/HTTP_response_splitting)。

好消息是，从 PHP 5.1.2 开始，不再可能在单个 header() 调用中不知不觉地设置多个标头。

也就是说，您仍然可以查看通常随 PHP 提供的各种[输入过滤器](http://php.net/manual/en/filter.filters.validate.php)`FILTER_VALIDATE_URL`- 例如.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:03:20.470

我看不出有什么问题。黑客通过修改 POST 变量将一无所获。他只是在弄乱他自己将要获得的 HTTP 响应。由于请求是 POST，缓存服务器不会保存响应。响应拆分在这里不是潜在的攻击向量。

你在做什么是正确的。如果您要重定向 $_SESSION 变量而不是 $_POST，那么将会有多个漏洞。

# javascript - JavaScript：如何 `.bind()` `Function` 到另一个对象

> ID：11930479
> 
> 赞同：3
> 
> 时间：2012-08-13T08:18:29.653
> 
> 标签：javascript, scope, this, v8

## 事实

`Function('return this')()`总是返回全局（窗口）对象。`Function.bind({})('return this')()`也返回全局对象。

## 我的目标

我想创建一个变体`Function`。通过调用 的变体返回的匿名函数`Function`应始终使用`myObj`as `this`。

如果 JavaScript 不会以这种特殊方式运行（请参阅*The Facts*），我会执行以下操作：

```
var myFun = Function.bind(myObj); 
```

`myFun`是我想要拥有的对象。现在我可以做到以下几点：

```
console.assert(myObj === myFun('return this')()); 
```

## 我的问题

*   为什么`Function`返回`global`，即使在`.bind()`将它转换为另一个对象之后？
*   有解决方法吗？如何绑定`Function`到另一个对象？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:48:15.057

您实际上是在这样做：

```
Function.call({}, 'return this;')(); 
```

该`Function`函数在一个新的匿名对象的上下文中执行。这样做*不会*影响`Function`. 事实证明，`Function`它并不关心它在什么上下文中运行——它总是产生具有默认全局上下文的函数。

如果要指定由 生成的函数的上下文，则`Function`需要像这样包装`Function`：

```
// give our vars privacy in a closure
(function() {
    // store old Function
    var oldFunc = Function;

    // redefine Function to be a wrapper around the real Function
    // which takes an additional `context` argument
    Function = function(ftext, context) {
        return oldFunc(ftext).bind(context);
    }
}()); 
```

现在你可以打电话`Function('return this', myObj)();`，它会返回`myObj`。

* * *

或者，简单地创建`myFun(text)`通过`assert`测试的建议语法：

```
var myFun = function(ftext) {
    return Function(ftext).bind(myObj);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:14:36.343

我不知道您到底要达到什么目的，但您的方法链接似乎顺序错误。

```
Function('return this').bind({})() // returns the empty Object 
```

# php - 如何创建教义 DBAL 默认连接？

> ID：11930481
> 
> 赞同：0
> 
> 时间：2012-08-13T08:18:33.397
> 
> 标签：php, symfony, doctrine-orm

[我想使用本教程](https://github.com/Seldaek/monolog/blob/master/doc/extending.md)为独白创建自己的处理程序。

现在我的处理程序需要这样的 PDO 连接

```
$logger->pushHandler(new LogHandler(new PDO("mysql:host=$host;dbname=$dbname", $user, $pass)));
$logger->addInfo('My logger is now ready'); 
```

然后[这个人](https://github.com/Seldaek/monolog/issues/55)告诉我将该连接作为服务插入

像这样

```
doctrine.dbal.default.wrapped_connection:
    factory_service: doctrine.dbal.default_connection
    factory_method: getWrappedConnection
    class: PDO

my.monologhandler.pdo:
    class: sojeans\BackBundle\Monolog\Handler\PDOHandler
    arguments:
        - '@doctrine.dbal.default.wrapped_connection'
    tags:
        - { name: log_handler } 
```

但我收到循环引用错误，所以其他人告诉我这样做

> 这里有一个循环引用：您需要创建教义.dbal.default_connection 服务来创建教义.dbal.default.wrapped_connection``（因为它使用工厂服务）并且该服务使用记录器。

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:40:33.693

尝试向您的学说配置添加一个没有调试或分析的新连接：

```
doctrine:
    dbal:
        connections:
            default:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
            logger:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
                logging:   false
                profiling: false 
```

然后使用新`logger_connection`服务：

```
doctrine.dbal.logger.wrapped_connection:
    factory_service: doctrine.dbal.logger_connection
    factory_method: getWrappedConnection
    class: PDO

my.monologhandler.pdo:
    class: sojeans\BackBundle\Monolog\Handler\PDOHandler
    arguments:
        - @doctrine.dbal.logger.wrapped_connection
    tags:
        - { name: log_handler } 
```

让我知道这个是否奏效。

# wpf - DevExpress LayoutSplitter 和 DockLayoutManager 拖放问题

> ID：11930482
> 
> 赞同：0
> 
> 时间：2012-08-13T08:18:37.373
> 
> 标签：wpf, devexpress

我在使用 DevExpress 的 LayoutSplitter 和 DockLayoutManger 时遇到了一些问题。

```
 dxdo:DockLayoutManager>
            <dxdo:DockLayoutManager.LayoutRoot>
                <dxdo:LayoutGroup Orientation="Vertical" Height="*">
                    <dxdo:LayoutGroup Orientation="Vertical" Height="*">
                        <dxdo:DocumentPanel>
                            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"></RowDefinition>
                                </Grid.RowDefinitions>
                                <ContentControl Grid.Row="0"  Content="{Binding SomeViewModel}" ContentTemplateSelector="{StaticResource templateSelector}"/>
                            </Grid>
                        </dxdo:DocumentPanel>
                    </dxdo:LayoutGroup>

                    <dxdo:LayoutGroup Height="Auto" Orientation="Vertical">
                            <dxdo:LayoutSplitter/>
                    </dxdo:LayoutGroup>

                    <dxdo:LayoutGroup>
                        <dxdo:LayoutPanel Height="Auto" AllowDock="True">
                            <ItemsControl ItemsSource="{Binding SomeViewModel.SomeCollection}" ItemTemplateSelector="{StaticResource templateSelector}">
                            </ItemsControl>
                        </dxdo:LayoutPanel>
                    </dxdo:LayoutGroup>   

                </dxdo:LayoutGroup>

            </dxdo:DockLayoutManager.LayoutRoot>

       </dxdo:DockLayoutManager> 
```

LayoutSplitter 没有上下移动。它只是保持静止。使用 DockLayoutManager，第 3 个嵌套 LayoutGroup，当我从中删除一个组件时，我无法将组件放回原处。提示将非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:28:06.327

[需要 LayoutSplitter](http://documentation.devexpress.com/#WPF/clsDevExpressXpfDockingLayoutSplittertopic)控件来拆分布局组或布局控件项。它不能与 LayoutPanels 或 DocumentPanels 一起使用。此外，不需要对[停靠项目](http://documentation.devexpress.com/#WPF/CustomDocument7209)使用拆分器，因为这些项目的大小调整是由 DockLayoutManager 自动提供的。您还应该使用 DocumentPanel 作为 DocumentGroup 的子项，而不是将该文档直接放置到 LayoutGroup.Items 集合中。或者使用 LayoutPanel 而不是 DocumentPanel。因此，您的标记应如下所示：

```
<dxdo:DockLayoutManager>
    <dxdo:LayoutGroup Orientation="Vertical" >
        <dxdo:DocumentGroup>
            <dxdo:DocumentPanel Caption="Document">
                <!-- Document content -->
            </dxdo:DocumentPanel>
        </dxdo:DocumentGroup>
        <dxdo:LayoutGroup>
            <dxdo:LayoutPanel Caption="Panel">
                <!-- Panel content -->
            </dxdo:LayoutPanel>
        </dxdo:LayoutGroup>
    </dxdo:LayoutGroup>
</dxdo:DockLayoutManager> 
```

您可以在这些文章中阅读更多内容：

1.  [码头布局管理器基础知识](http://documentation.devexpress.com/#WPF/CustomDocument6820)
2.  [布局组](http://documentation.devexpress.com/#WPF/CustomDocument6824)
3.  [停靠项目](http://documentation.devexpress.com/#WPF/CustomDocument7209)
4.  [布局项目](http://documentation.devexpress.com/#WPF/CustomDocument7223)
5.  [文档组和面板](http://documentation.devexpress.com/#WPF/CustomDocument6830)

# html - 为什么 Chrome 在页面缩放时不放大 div 的宽度/高度？

> ID：11930483
> 
> 赞同：4
> 
> 时间：2012-08-13T08:18:38.353
> 
> 标签：html, css, google-chrome, zooming, scale

尝试在 Firefox 中放大（使用页面缩放功能，例如 cmd+）这段 HTML/CSS：

[http://jsfiddle.net/W68eL/4/](http://jsfiddle.net/W68eL/4/)

现在，在 Chrome 中尝试同样的事情。

由于某种原因，Chrome 不会放大内容框的宽度/高度，但同时会放大边框。我几乎会认为这是一个错误。

有谁知道任何解决方法？

**编辑：**

我已经[在这里](http://code.google.com/p/chromium/issues/detail?id=142325)提出了一个问题，我们会看看回复是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:50:43.033

也许它与“em”属性有关。它对 Firefox 和 Chrome 的作用不同。

我取了 20px 而不是 1em，然后在两个浏览器上运行它。效果是一样的。

摆弄它：http: [//jsfiddle.net/W68eL/5/](http://jsfiddle.net/W68eL/5/)

# ruby-on-rails - Rails：为第 3 方 POST 请求禁用 CSRF

> ID：11930491
> 
> 赞同：3
> 
> 时间：2012-08-13T08:19:02.517
> 
> 标签：ruby-on-rails, heroku, csrf, http-post

我有一个 Rails 3.2 应用程序，我需要在其中接受来自第 3 方的 POST 请求。我想将传入的请求存储在我的“消息”模型中。我的 MessageController 如下所示：

```
class MessagesController < ApplicationController
  protect_from_forgery :except => :create
...

def create
@message = Message.new(content: params[:content], command: params[:command], messageId: params[:messageId], ...)

respond_to do |format|
  if @message.save
... 
```

我收到的请求如下所示：

```
curl -d "content=GUESTTEST&command=deliverMessage&messageId=11389622" https://[myapp].herokuapp.com/messages 
```

这在本地运行良好（http://localhost:3000/messages），但是一旦我切换到heroku，请求就不再起作用了。

```
heroku logs 
```

说：

```
 2012-08-13T07:54:01+00:00 app[web.1]: Started POST "/" for 178.195.215.59 at 2012-08-13 07:54:01 +0000
    2012-08-13T07:54:01+00:00 app[web.1]: Processing by StaticPagesController#home as */*
    2012-08-13T07:54:01+00:00 app[web.1]:   Parameters: {"content"=>"GUESTTEST", "time"=>"2012-08-01 10:09:03", "businessNumber"=>"5555", "sessionId"=>"5555CHS1343808543654", "operatorCode"=>"99999", "msisdn"=>"0099955291", "keyword"=>"GUESTTEST", "command"=>"deliverMessage", "messageId"=>"11389622"}
    2012-08-13T07:54:01+00:00 app[web.1]: WARNING: Can't verify CSRF token authenticity
    2012-08-13T07:54:01+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (1.1ms)
    2012-08-13T07:54:01+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
    2012-08-13T07:54:01+00:00 app[web.1]:   Rendered layouts/_header.html.erb (0.9ms)
    2012-08-13T07:54:01+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.2ms)
    2012-08-13T07:54:01+00:00 app[web.1]: Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
    2012-08-13T07:54:01+00:00 heroku[router]: POST guestlist12.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=72ms status=200 bytes=2425 
```

我需要更改什么以允许帖子在没有 CSRF 令牌的情况下工作？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T06:23:01.310

总结评论中的答案，以便从“未回答”过滤器中删除此问题：

> [移除]protect_from_forgery [从]应用程序控制器。

~ 每个[Amol Pujari 的回答](https://stackoverflow.com/users/477403/amol-pujari)

# mysql - MySQL 索引更新

> ID：11930494
> 
> 赞同：0
> 
> 时间：2012-08-13T08:19:10.847
> 
> 标签：mysql, database, indexing, database-indexes

假设我有 3 列，“Col1、Col2 和 Col3”，并且在 Col1 上有一个索引。如果我对 Col3 中的数据进行更新（例如：更改一个 int），是否必须重新制作或再次更新索引，即使我根本没有触及索引列（Col1 的）数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:21:33.040

简短的回答：**没有**

长答案：索引提供了从列**值**到列**位置**的映射。值和位置都没有改变，所以索引条目没有改变，所以它没有更新。

# c# - 如何在 asp.net Web 应用程序的用户控件中覆盖 gridviews 事件

> ID：11930502
> 
> 赞同：1
> 
> 时间：2012-08-13T08:19:37.787
> 
> 标签：c#, asp.net, .net

这是我的用户控件

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Grid.ascx.cs" Inherits="WSMP.UserControls.Grid" %>
<a href="#" id="lbtnAhref" runat="server">New</a>
 <a href="#" id="lbtnADel" runat="server">
    Delete</a>
<asp:DropDownList ID="ddlSearchBy" runat="server">
</asp:DropDownList>
<asp:TextBox ID="txtSearchBy" runat="server"></asp:TextBox>
<asp:Button ID="btnSearchBy" runat="server" Text="Search" OnClick="btnSearchBy_Click" />
<asp:GridView ID="grdGridView" runat="server" AutoGenerateColumns="true" AllowPaging="True"
    OnPageIndexChanging="grdGridView_PageIndexChanging" PageSize="50" 
    onrowdatabound="grdGridView_RowDataBound">
</asp:GridView> 
```

2个href，1个下拉列表，1个按钮1个网格。

我的计划是在多个地方或多个页面中使用这个网格。那么如何在我的页面中覆盖这个网格的 RawDataBound 呢？假设在 Page1 中如果我想做某些条件，那么我会在 Page1.aspx.cs 中为 Page2 写，我不需要这样做。希望你明白了。

# ios - 在 iOS 中离线打开和存储加密文档

> ID：11930503
> 
> 赞同：2
> 
> 时间：2012-08-13T08:19:52.920
> 
> 标签：ios, encryption, cryptography, ms-office

我已在文件夹中下载并可供离线查看的加密文件，我想知道：

*   如何在适当的阅读器中打开它们，因为它们是 ms office docs 和 prezi 格式

*   我想它们必须是未加密的，以便读者可以阅读它们，但在这种情况下如何确保安全？

*   使用哪个文件夹来避免 iCloud 同步，我已经阅读了这个[禁用 iCloud 同步](https://stackoverflow.com/questions/7772767/disable-icloud-sync)

*   iOS是否在我阅读时通过基于应用程序密钥的加密来保护应用程序的文档，还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:30:08.730

Speaking extemporaneously, as thoughts occur, Sven is right about `UIDocumentInteractionController` and that objects are identified by URL.

However, it's possible you don't need to unencrypt your files on disk for this to work. You can probably write your own little URL protocol (subclass [`NSURLProtocol`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/Reference/Reference.html) and implement methods appropriately; you should end up checking that URLs are within the invented scheme you've created — e.g. `myApplicationEncrypted://` — then posting data packets to a [`NSURLProtocolClient`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSURLProtocolClient_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLProtocolClient)) and register it with the device via [`NSURLProtocol +registerClass`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLProtocol/registerClass%3a).

You'll obviously need to decrypt between disk and protocol client. So you'll be passing unencrypted data on — you'll need to make a trust judgment on `UIDocumentInteractionController`.

The document interaction controller is documented to work within your app, so there shouldn't be sandbox concerns.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:12:01.767

您可以使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)对象将您的文档发送到其他应用程序。您使用指向您的文档的文件 URL 对其进行初始化，然后使用其中一种方法来呈现它。

这负责显示预览（如果可能）并让用户选择应在其中打开文档的应用程序。

该文档必须被解密才能正常工作。然后，您无法对文件的安全性做出任何保证 - 一旦将其移交给另一个应用程序，它就不受您的控制。

如果您的应用程序没有明确选择使用 iCloud 同步，您的数据将不会与 iCloud 同步。发送到 iCloud 的是整个设备的备份（如果启用）。正如您在链接的问题中已经阅读的那样，有一些方法可以为单个文件禁用此功能。

iOS 文件保护基于设备密钥，而不是每个应用程序密钥。这也不是必需的，因为应用程序受到沙盒的相互保护，除非您的手机已越狱。在越狱的手机上没有安全保证。

# android - Flex Mobile，如何重新启动 Android 应用程序？

> ID：11930505
> 
> 赞同：4
> 
> 时间：2012-08-13T08:19:59.413
> 
> 标签：android, actionscript-3, restart, flex-mobile

我正在寻找一种方法来重新启动我的移动应用程序，我用谷歌搜索，但我没有找到它。我希望你能帮助我..提前谢谢..

# javascript - Javascript跨浏览器：将二进制文件读入数组

> ID：11930508
> 
> 赞同：0
> 
> 时间：2012-08-13T08:20:10.923
> 
> 标签：javascript, character-encoding, cross-browser, binaryfiles, readfile

从我想阅读的 Javascript 代码中`MyBinaryFile.xxx`，它包含二进制数据（例如 JPG）并放置在服务器上（`String url`）。这个函数的结果应该是一个字节数组。

有没有办法以跨浏览器的方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:21:50.800

只有当您的文件与脚本在同一个域中时，才能访问小瓶 url，然后您才能使用 ajax 加载该文件。就像普通的ajax调用一样对待它。

例如，您的脚本`http://localhost/script.html`想要访问`http://localhost/mybin.xxx`. 你可以用 jQuery

```
$.get('/mybin.xxx', function(data){
    //data will be a byte array with data.length, data[0]....
}); 
```

# sql-server - 循环遍历整个表以检查值 sql server

> ID：11930511
> 
> 赞同：1
> 
> 时间：2012-08-13T08:20:15.657
> 
> 标签：sql-server, stored-procedures

我编写了一个存储过程来更新满足特定条件的记录。我想检查传递的值是否包含在表中。我在用

```
declare @disp_sname varchar(100);
declare @disp_type varchar(100);
declare @disp_sub_type varchar(100);
declare @disp_date date;

select @disp_sname= voucher_sname,@disp_type=voucher_type,
@disp_sub_type=voucher_sub_type,@disp_date=voucher_date
from voucher_master 
```

它只返回最后一行值。

我的整个存储过程是

```
 USE [new_esatnam]
GO
/****** Object:  StoredProcedure [dbo].[spUpdateVoucherNo]    Script Date: 08/13/2012 13:36:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[spUpdateVoucherNo] 
(
@voucher_id as int,
@voucher_separate_numbering as varchar(2),
@voucher_method_numbering as varchar(2),
@voucher_last_number as int,
@voucher_sname as varchar(15),
@voucher_type as varchar(2),
@voucher_sub_type as varchar(2),
@voucher_date as datetime,
@company_code as varchar(50),
@updated_by as int,
@updated_on as datetime
)   
AS
BEGIN
SET NOCOUNT ON;
declare @disp_sname varchar(100);
declare @disp_type varchar(100);
declare @disp_sub_type varchar(100);
declare @disp_date date;

select @disp_sname= voucher_sname,@disp_type=voucher_type,
@disp_sub_type=voucher_sub_type,@disp_date=voucher_date
from voucher_master

if @disp_sname=@voucher_sname and @disp_type=@voucher_type and @disp_sub_type=@voucher_sub_type and @disp_date!=@voucher_date
BEGIN
update voucher_master set voucher_type=@voucher_type,voucher_sub_type=@voucher_sub_type,
voucher_sname=@voucher_sname,
voucher_separate_numbering=@voucher_separate_numbering,
voucher_method_numbering=@voucher_method_numbering,
voucher_date=@voucher_date,
voucher_last_number=@voucher_last_number,
company_code=@company_code,
updated_by=@updated_by,
updated_on=@updated_on where voucher_id=@voucher_id 
END
if @disp_sname!=@voucher_sname
BEGIN
update voucher_master set voucher_type=@voucher_type,voucher_sub_type=@voucher_sub_type,
voucher_sname=@voucher_sname,
voucher_separate_numbering=@voucher_separate_numbering,
voucher_method_numbering=@voucher_method_numbering,
voucher_date=@voucher_date,
voucher_last_number=@voucher_last_number,
company_code=@company_code,
updated_by=@updated_by,
updated_on=@updated_on where voucher_id=@voucher_id 
END

return @@ROWCOUNT
END 
```

我希望我的存储过程满足这个条件

```
 voucher_type    voucher_sub_type     date        voucher_sname
 INV                DOM              1/1/2000       ID            allowed
 INV                DOM              15/1/2000      ID            allowed

 INV                INT              1/1/2000       ID            not allowed
 INV                INT              15/3/2012      ID            not allowed 
```

相同的voucher_type 和voucher_sub_type 应允许具有不同日期的Voucher Sname，并且对于voucher_type 和voucher_sub_type 的不同组合不应允许相同的voucher_sname。

任何想法我的 sp 将如何满足这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:26:49.353

只需在您的第一个 aql 查询中使用它 --voucher_id=@voucher_id

```
 ALTER PROCEDURE [dbo].[spUpdateVoucherNo] 
        (
        @voucher_id as int,
        @voucher_separate_numbering as varchar(2),
        @voucher_method_numbering as varchar(2),
        @voucher_last_number as int,
        @voucher_sname as varchar(15),
        @voucher_type as varchar(2),
        @voucher_sub_type as varchar(2),
        @voucher_date as datetime,
        @company_code as varchar(50),
        @updated_by as int,
        @updated_on as datetime
        )   
        AS
        BEGIN
        SET NOCOUNT ON;
        declare @disp_sname varchar(100);
        declare @disp_type varchar(100);
        declare @disp_sub_type varchar(100);
        declare @disp_date date;

DECLARE @minid int,@maxid int
select @minid=min(voucherid),@maxid=max(voucherid) from voucher_master 

while(@minid <= @maxid)
BEGIN
        select @disp_sname= voucher_sname,@disp_type=voucher_type,
        @disp_sub_type=voucher_sub_type,@disp_date=voucher_date
        from voucher_master where voucher_id=@minid

        if @disp_sname=@voucher_sname and @disp_type=@voucher_type and @disp_sub_type=@voucher_sub_type and @disp_date!=@voucher_date
        BEGIN
        update voucher_master set voucher_type=@voucher_type,voucher_sub_type=@voucher_sub_type,
        voucher_sname=@voucher_sname,
        voucher_separate_numbering=@voucher_separate_numbering,
        voucher_method_numbering=@voucher_method_numbering,
        voucher_date=@voucher_date,
        voucher_last_number=@voucher_last_number,
        company_code=@company_code,
        updated_by=@updated_by,
        updated_on=@updated_on where voucher_id=@voucher_id 
        END
        if @disp_sname!=@voucher_sname
        BEGIN
        update voucher_master set voucher_type=@voucher_type,voucher_sub_type=@voucher_sub_type,
        voucher_sname=@voucher_sname,
        voucher_separate_numbering=@voucher_separate_numbering,
        voucher_method_numbering=@voucher_method_numbering,
        voucher_date=@voucher_date,
        voucher_last_number=@voucher_last_number,
        company_code=@company_code,
        updated_by=@updated_by,
        updated_on=@updated_on where voucher_id=@voucher_id 
        END

SET @minid=@minid+1
END

END 
```

# c# - 在鼠标点击的地方绘制矩形

> ID：11930512
> 
> 赞同：1
> 
> 时间：2012-08-13T08:20:22.733
> 
> 标签：c#, click, mouse, panel

我是 C# 的新手，我希望在面板上有鼠标点击的地方出现一个矩形

这是我的代码：

```
private void panel1_MouseClick(object sender, MouseEventArgs e)
{
  int x = e.Location.X;
  int y = e.Location.Y;

       if (radioButton1.Checked == false)
       {

                ((Panel)sender).Invalidate(new Rectangle(x * 40, y * 40, 40, 40));
       }
       else if (radioButton2.Checked == true)
       {
                return;
       }
} 
```

我想知道如何更改矩形的颜色？如果我的代码错误，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T18:50:05.220

您的绘图应在面板的 Paint 事件处理程序中执行。单击面板时，创建矩形（在面板的 MouseUp 事件中）并将其存储在矩形集合中（例如字典）。然后刷新面板。在面板的 Paint 事件中，绘制所有矩形。这是一个简单的例子：

```
Dictionary<Color, List<Rectangle>> rectangles = new Dictionary<Color, List<Rectangle>>();

private void panel1_Paint(object sender, PaintEventArgs e)
{
    //The key value for the dictionary is the color to use to paint with, so loop through all the keys (colors)
    foreach (var rectKey in rectangles.Keys)
    {
        using (var pen = new Pen(rectKey))     //Create the pen used to draw the rectangle (using statement makes sure the pen is disposed)
        {
            //Draws all rectangles for the current color
            //Note that we're using the Graphics object that is passed into the event handler.
            e.Graphics.DrawRectangles(pen, rectangles[rectKey].ToArray());                    
        }
    }
}

//This method just adds the rectangle to the collection.
private void panel1_MouseUp(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Left)
    {
        Color c = getSelectedColor();     //Gets a color for which to draw the rectangle

        //Adds the rectangle using the color as the key for the dictionary
        if (!rectangles.ContainsKey(c))   
        {
            rectangles.Add(c, new List<Rectangle>());
        }
        rectangles[c].Add(new Rectangle(e.Location.X - 12, e.Location.Y - 12, 25, 25));    //Adds the rectangle to the collection
    }

    //Make the panel repaint itself.
    panel1.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:28:21.490

```
private void panel1_MouseClick(object sender, MouseEventArgs e)
{
    Graphics g = panel1.CreateGraphics();
    g.DrawRectangle(new Pen(Brushes.Black),  
    new Rectangle(new Point(e.X, e.Y), new  
        Size(100, 100)));
} 
```

`Brushes.Black`您可以更改部分代码的颜色，根据需要进行更改

# sql - 更新oracle sql前检查数据

> ID：11930513
> 
> 赞同：0
> 
> 时间：2012-08-13T08:20:23.503
> 
> 标签：sql, oracle

我想就编码这个问题寻求帮助。

我想在更新之前先检查这个条目的数据，否则什么也不做。例子：

```
first_name   last_name   salary    dept_no
John         Smith        5000     1

If salary = 5000 and dept_no = 1 where last_name = 'Smith' 
and first_name = 'John',
 do nothing 
else update table and set salary = 5000 and dept_no = 1 
 where last_name = 'Smith' 
 and    first_name = 'John' 
```

换句话说，如果数据已经设置为此值，则不执行任何操作，否则更新数据。

感谢任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:28:36.577

尝试这个：

```
update <table>
set salary = 5000 and dept_no = 1 
where last_name = 'Smith' 
and    first_name = 'John'
   and salary != 5000 
   and dept_no != 1 
```

# python - 在python中解压缩嵌套的zip文件

> ID：11930515
> 
> 赞同：12
> 
> 时间：2012-08-13T08:20:28.413
> 
> 标签：python, zip

我正在寻找一种在 python 中解压缩嵌套 zip 文件的方法。例如，考虑以下结构（为方便起见，假设名称）：

*   文件夹
    *   压缩文件A.zip
        *   压缩文件A1.zip
        *   压缩文件A2.zip
    *   压缩文件B.zip
        *   ZipfileB1.zip
        *   ZipfileB2.zip

...ETC。我正在尝试访问第二个 zip 中的文本文件。我当然不想提取所有内容，因为剪切数字会使计算机崩溃（第一层有几百个拉链，第二层有近 10,000 个拉链（每个拉链））。

我一直在玩'zipfile'模块——我能够打开第一级的zipfile。例如：

```
zipfile_obj = zipfile.ZipFile("/Folder/ZipfileA.zip")
next_layer_zip = zipfile_obj.open("ZipfileA1.zip") 
```

但是，这会返回一个“ZipExtFile”实例（不是文件或 zipfile 实例）——然后我不能继续打开这个特定的数据类型。我不能这样做：

```
data = next_layer_zip.open(data.txt) 
```

但是，我可以使用以下命令“读取”此 zip 文件：

```
next_layer_zip.read() 
```

但这完全没用！（即只能读取压缩数据/goobledigook）。

有没有人对我如何解决这个问题有任何想法（***不***使用 ZipFile.extract）？

我遇到了这个，[http](http://pypi.python.org/pypi/zip_open/) ://pypi.python.org/pypi/zip_open/ - 它看起来完全符合我的要求，但它似乎对我不起作用。（继续获取“[Errno 2] 没有这样的文件或目录：”对于我正在尝试处理的文件，使用该模块）。

任何想法将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T21:33:36.417

ZipFile 需要一个类似文件的对象，因此您可以使用 StringIO 将您从嵌套 zip 读取的数据转换为这样的对象。需要注意的是，您会将完整的（仍然压缩的）内部 zip 加载到内存中。

```
with zipfile.ZipFile('foo.zip') as z:
    with z.open('nested.zip') as z2:
        z2_filedata = cStringIO.StringIO(z2.read())
        with zipfile.ZipFile(z2_filedata) as nested_zip:
            print nested_zip.open('data.txt').read() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T08:24:02.390

不幸的是，解压缩 zip 文件需要随机访问存档，并且这些`ZipFile`方法（更不用说 DEFLATE 算法本身）只提供流。因此，不解压缩嵌套的 zip 文件是不可能的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-01T23:20:14.577

这是我想出的一个功能。

```
def extract_nested_zipfile(path, parent_zip=None):
    """Returns a ZipFile specified by path, even if the path contains
    intermediary ZipFiles.  For example, /root/gparent.zip/parent.zip/child.zip
    will return a ZipFile that represents child.zip
    """

    def extract_inner_zipfile(parent_zip, child_zip_path):
        """Returns a ZipFile specified by child_zip_path that exists inside
        parent_zip.
        """
        memory_zip = StringIO()
        memory_zip.write(parent_zip.open(child_zip_path).read())
        return zipfile.ZipFile(memory_zip)

    if ('.zip' + os.sep) in path:
        (parent_zip_path, child_zip_path) = os.path.relpath(path).split(
            '.zip' + os.sep, 1)
        parent_zip_path += '.zip'

        if not parent_zip:
            # This is the top-level, so read from disk
            parent_zip = zipfile.ZipFile(parent_zip_path)
        else:
            # We're already in a zip, so pull it out and recurse
            parent_zip = extract_inner_zipfile(parent_zip, parent_zip_path)

        return extract_nested_zipfile(child_zip_path, parent_zip)
    else:
        if parent_zip:
            return extract_inner_zipfile(parent_zip, path)
        else:
            # If there is no nesting, it's easy!
            return zipfile.ZipFile(path) 
```

这是我测试它的方法：

```
echo hello world > hi.txt
zip wrap1.zip hi.txt
zip wrap2.zip wrap1.zip
zip wrap3.zip wrap2.zip

print extract_nested_zipfile('/Users/mattfaus/dev/dev-git/wrap1.zip').open('hi.txt').read()
print extract_nested_zipfile('/Users/mattfaus/dev/dev-git/wrap2.zip/wrap1.zip').open('hi.txt').read()
print extract_nested_zipfile('/Users/mattfaus/dev/dev-git/wrap3.zip/wrap2.zip/wrap1.zip').open('hi.txt').read() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-05-19T04:20:56.680

我使用 python 3.7.3

```
import zipfile
import io
with zipfile.ZipFile('all.zip') as z:
    with z.open('nested.zip') as z2:
        z2_filedata =  io.BytesIO(z2.read())
        with zipfile.ZipFile(z2_filedata) as nested_zip:
            print( nested_zip.open('readme.md').read()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-28T19:51:26.437

这对我有用。只需将此脚本与嵌套 zip 放在同一目录下即可。它还将计算嵌套 zip 中的文件总数

```
import os

from zipfile import ZipFile

def unzip (path, total_count):
    for root, dirs, files in os.walk(path):
        for file in files:
            file_name = os.path.join(root, file)
            if (not file_name.endswith('.zip')):
                total_count += 1
            else:
                currentdir = file_name[:-4]
                if not os.path.exists(currentdir):
                    os.makedirs(currentdir)
                with ZipFile(file_name) as zipObj:
                    zipObj.extractall(currentdir)
                os.remove(file_name)
                total_count = unzip(currentdir, total_count)
    return total_count

total_count = unzip ('.', 0)
print(total_count) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-10T14:47:08.593

对于那些寻找提取嵌套 zip 文件（任何级别的嵌套）并清理原始 zip 文件的功能的人：

```
import zipfile, re, os

def extract_nested_zip(zippedFile, toFolder):
    """ Unzip a zip file and its contents, including nested zip files
        Delete the zip file(s) after extraction
    """
    with zipfile.ZipFile(zippedFile, 'r') as zfile:
        zfile.extractall(path=toFolder)
    os.remove(zippedFile)
    for root, dirs, files in os.walk(toFolder):
        for filename in files:
            if re.search(r'\.zip$', filename):
                fileSpec = os.path.join(root, filename)
                extract_nested_zip(fileSpec, root) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T21:07:52.600

我解决这个问题的方法是这样的，包括自分配对象：

```
import os
import re 
import zipfile
import pandas as pd
# import numpy as np
path = r'G:\Important\Data\EKATTE'

# DESCRIBE
archives = os.listdir(path)
archives = [ar for ar in archives if ar.endswith(".zip")]
contents = pd.DataFrame({'elec_date':[],'files':[]})
for a in archives:
    archive = zipfile.ZipFile( path+'\\'+a )
    filelist = archive.namelist()
    # archive.infolist()
    for i in archive.namelist():
        if re.match('.*zip', i):
            sub_arch = zipfile.ZipFile(archive.open(i))
            sub_names = [x for x in sub_arch.namelist()]
            for s in sub_names:
                exec(f"{s.split('.')[0]} = pd.read_excel(sub_arch.open(s), squeeze=True)") 
```

存档可在保加利亚国家统计局页面（直接链接）上找到： [https ://www.nsi.bg/sites/default/files/files/EKATTE/Ekatte.zip](https://www.nsi.bg/sites/default/files/files/EKATTE/Ekatte.zip)

# c# - 双回导航时叠加在当前视图上的最后一个视图

> ID：11930518
> 
> 赞同：4
> 
> 时间：2012-08-13T08:20:39.693
> 
> 标签：c#, windows-phone-7, drawing

我执行以下导航模式：

1.  导航到应用程序（它是主视图）
2.  进入从 REST 服务器获取某些内容的详细视图（即，它会显示几秒钟的进度指示器）
3.  在进度指示器仍然显示时，我快速连续单击两次后退按钮（容易误操作）
4.  应用程序返回到主视图，但细节视图的内容**叠加**在其上。

下面显示了由此产生的混乱的屏幕截图。

这是在诺基亚 Lumia 800 和 HTC Titan 上重新创建的。

首先 - 什么是h..？我能做些什么来实现这一点吗？

输出中没有显示异常（或其他任何内容）。细节视图的方法中唯一发生的事情`OnNavigatedFrom()`是消除背景图像（出于内存原因）。它也发生在其他视图中。

我的想法是两个视图上的 draw 方法在不同的线程上调用，只留下主视图响应。

关于这里发生了什么以及如何修复此错误的任何想法？

![发生的事情的屏幕截图](../Images/d8a86f16b0166d815b3b2deefa3a9d4f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:32:10.453

我在使用 Silverlight for Windows Phone 工具包中的 TransitionFrame 时发生了这种类型的问题。如果用户在转换/导航正在进行时点击后退按钮一次或两次，则在从页面导航到页面时使用转换可能会导致此问题。

[我相信这是一个错误，但在工具包的官方 CodePlex 站点上](http://silverlight.codeplex.com/workitem/list/basic)找不到它报告，因此除了尝试处理导致问题的页面上的后退按钮按下之外，我不知道任何可靠的解决方案或解决方法。换句话说，抓住后退按钮/按键并禁用它（我不确定这是否会通过认证！），或者只是用 MessageBox 提示用户页面仍在加载，如果他们确定他们想要导航回来，可能对你有用。我能想到的其他解决方案是避免使用 TransitionFrame，但这并不是真正的解决方案，对吧？:)

# sql-server-2008 - SSIS数据源从变量中的表存储中选择全部

> ID：11930520
> 
> 赞同：1
> 
> 时间：2012-08-13T08:21:00.173
> 
> 标签：sql-server-2008, ssis

我正在使用 SQL Server 2008 R2 BIDS 2008 解决方案。

我需要将数据从 Oracle(11g) 源数据库传输到 SQL Server 数据库。我需要从 Oracle 数据库中的多个表中复制所有数据。我有一个 ForEach 容器，其中有一个数据流任务。

我想循环一个表名列表，从 Oracle 源中选择所有列，然后复制到 SQL Server 中的 dest_ 。

我为 [ADO NET Source].[SqlCommand] 的数据流任务添加了一个属性表达式，其表达式为“SELECT * FROM”+@[User::ImportPath]

由于此时表未定义，因此不清楚我是否可以正确映射列或设置 ADO NET 目标任务。

有没有我遗漏的步骤？我正在尝试做的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:44:46.873

您不能循环遍历表并动态映射源和目标组件上的列。每个表都需要一组 Source -> Ddestination。

如果这不可行，您可能想看看[Transfer SQL Server Objects Task](http://msdn.microsoft.com/en-us/library/ms142159.aspx)

# coldfusion - ColdFusion - 读取大量图像

> ID：11930522
> 
> 赞同：1
> 
> 时间：2012-08-13T08:21:30.003
> 
> 标签：coldfusion, jsoup, railo, bluedragon

在 CF / Railo 中读取大量图像并检查它们的宽度和高度的最有效方法是什么？

在我的应用程序中，我通常需要阅读大约 20 张图片 +，目前这需要 14 秒才能完成。真的有点太长了。

```
theImageRead = ImageNew(theImageSrc);
if ( imageGetWidth(theImageRead) > 100 ) {
    writeOutput('<img src="' & theImageSrc & '" />');
} 
```

图像是从绝对 URL 列表中读取的。我需要获取在某个维度上指定的图像。

如果对此有更快的解决方案，那么我很想得到您的见解。也许是底层的java方法？

如果有什么可以帮助的话，我也在使用 jSoup。

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:15:04.160

我不相信有任何方法可以在不读取字节并创建图像对象的情况下确定图像的像素尺寸。这里的主要瓶颈将是 http 请求开销。

那就是说有几种方法可以加快您尝试做的事情。

1.  使用线程并发请求图像，然后当所有线程完成处理后输出图像。

2.  如果您多次显示相同的图像或图像集，请将其缓存。如果您不想缓存实际图像，您可以缓存元数据以避免必须为每个图像执行 http 请求。

3.  决定是否需要立即将所有图像输出到页面，或者是否可以通过 ajax 请求延迟和加载其中的部分或全部

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:32:49.843

我很久以前就写过这个实用函数（它也可以在旧的 ColdFusion 版本上运行）。也许它有帮助。

请注意，这需要[*Java 高级成像图像 I/O 工具*](http://download.java.net/media/jai-imageio/builds/release/1.1/INSTALL-jai_imageio.html)( [Jai-imageio](http://download.java.net/media/jai-imageio/builds/release/1.1/) )。下载 .jar 并将其放在您的类路径中（需要重新启动 CF）。

```
/**
 * Reads basic properties of many types of images. Values are
 * returned as a struct consisting of the following elements:
 *
 * Property names, their types and default values:
 *   ImgInfo.width       = 0        (pixels)
 *   ImgInfo.height      = 0        (pixels)
 *   ImgInfo.size        = 0        (bytes)
 *   ImgInfo.isGrayscale = false    (boolean)
 *   ImgInfo.isFile      = false    (boolean)
 *   ImgInfo.success     = false    (boolean)
 *   ImgInfo.error       = ""       (string)
 *
 * @param FilePath    Physical path to image file.
 * @return            A struct, as described.
 */
function GetImageProperties(FilePath) {
    var ImgInfo         = StructNew();
    var jImageIO        = CreateObject("java", "javax.imageio.ImageIO");
    var jFile           = CreateObject("java", "java.io.File").init(FilePath);
    var jBufferedImage  = 0;
    var jColorSpace     = 0;

    ImgInfo.width       = "";
    ImgInfo.height      = "";
    ImgInfo.fileSize    = 0;
    ImgInfo.isGrayscale = false;
    ImgInfo.isFile      = jFile.isFile();
    ImgInfo.success     = false;
    ImgInfo.error       = "";

    try {
        jBufferedImage      = jImageIO.read(jFile);
        ImgInfo.fileSize    = jFile.length();
        ImgInfo.width       = jBufferedImage.getWidth();
        ImgInfo.height      = jBufferedImage.getHeight();
        jColorSpace         = jBufferedImage.getColorModel().getColorSpace();
        ImgInfo.isGrayscale = (jColorSpace.getType() eq jColorSpace.TYPE_GRAY);
        ImgInfo.success     = true;
    }
    catch (any ex) {
        ImgInfo.error   = ToString(ex);
    }
    jImageIO = JavaCast("null", "");
    jFile = JavaCast("null", "");
    jBufferedImage = JavaCast("null", "");
    jColorSpace = JavaCast("null", "");

    return ImgInfo;
} 
```

像这样使用：

```
imageInfo = GetImageProperties(theImageSrc);
if (imageInfo.success and imageInfo.width > 100)
    writeOutput('<img src="#HTMLEditFormat(theImageSrc)#" />');
} 
```

# python - Python 将 UTC 转换为 PST/PDT 格式

> ID：11930528
> 
> 赞同：0
> 
> 时间：2012-08-13T08:21:51.720
> 
> 标签：python

我有一个 Web 应用程序，它通过 JS 脚本捕获日期/时间，并以 UTC 格式计算自纪元以来的秒数 - 例如 134250270000。在后端，我们有一个 Python 脚本，它从数据库中获取数据，但日期/时间以秒数存储PST 格式的纪元。如果从纪元开始计算，UTC 和 PST 之间总是存在秒差。

有没有什么方法可以将UTC秒数转换为纪元以来的PST秒数？我们还需要注意 PST 时区的日光变化吗？

编辑：：

```
I have the seconds since epoch in UTC format:

1342502700

I found that I get the sum in seconds between UTC and local standard time via:

>>> time.timezone / 3600
8

So If I add 1342502700 to time.timezone:

>>> print 1342502700 + time.timezone
1344153600 
```

它会始终正确地给我 PDT / PST 时间吗？

编辑：：

也许这是正确的：

```
>>> import time
>>> offset = time.timezone if (time.daylight == 0) else time.altzone
>>> offset / 60 / 60
7 
```

如果夏令时当前有效，time.daylight 将非零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:57:56.520

我认为在您的转换中，有一个隐含的时区会搞砸事情。无论如何，我认为您正在寻找的是[time.altzone](http://docs.python.org/library/time.html#time.altzone)：

```
>>> from time import *
>>> ctime(time())
'Mon Aug 13 16:54:02 2012'
>>> ctime(time()+altzone)
'Mon Aug 13 08:54:04 2012' 
```

我现在是台北时间，所以我的当地时间（第一个时间）晚于 UTC。

***编辑：***我错过了文档中说仅​​在非零时使用的`altzone`行`daylight`。如果你住在有夏令时的地方，显然它比我想象的要复杂一些。如果您需要处理此问题，请参阅此帖子：

[Python：根据 DST 获取时间戳的时区](https://stackoverflow.com/questions/7008175/python-get-timezone-based-on-dst-for-a-timestamp)

# java - 将环绕建议应用于现有 EJB

> ID：11930530
> 
> 赞同：3
> 
> 时间：2012-08-13T08:22:00.847
> 
> 标签：java, jboss, ejb, weblogic, interceptor

我们在 JBoss 和 Weblogic 上部署了第三方应用程序。出于审计目的，我们需要在此应用程序中记录对 EJB 的访问。是否可以应用透明服务，将对这些 EJB 的所有调用记录到文件或数据库中？

我能想到的唯一选择是使用 Spring 作为业务委托并修改客户端以使用 Spring bean。不幸的是，我们没有修改客户端代码的选项，而这必须在服务器上以这样一种方式完成，即我们的代码在客户端调用 EJB 之前和之后执行。

我为此寻找解决方案，但没有发现任何可以为我指明正确方向的东西。

感谢您的帮助。

**编辑：**

经过进一步研究，JBoss 似乎确实支持自定义 EJB 拦截器。可以使用 EJB 2.x 的 standardjboss.xml 和 EJB 3.x 的 ejb3-interceptors-aop.xml 对此进行配置

事实证明，关于如何创建用于 EJB 2.x 的此类拦截器的示例并没有太多可用的示例——这正是我所需要的。它似乎不太难，我会试试这个看看它是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:53:18.130

您应该能够直接使用 EJB 3 拦截器。[在http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/EJB3_Interceptors.html](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/EJB3_Interceptors.html)中查找 DefaultInterceptor以了解如何将拦截器应用于部署中的所有 ejb。EJB 3 规范支持这一点。

对于 JBoss 中的 EJB 2.x，请查看 standard-jboss.xml。在那里，您可以为不同的 ejb 类型修改完整的默认容器。您还可以在standard-jboss.xml 中创建一个新的容器配置，并在那里添加您的拦截器，并通过在您的ejb.jar META-INF/ 文件夹中包含一个jboss.xml 将您的EJB 与新配置相关联。或者，如果我没记错的话，你可以在 META-INF/jboss.xml 中定义新的容器配置和关联。这里的一些信息：http: [//docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/EJBDeployer_MBean-Container_configuration_information.html](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/EJBDeployer_MBean-Container_configuration_information.html)

# ssis - 如果我安装 BIDS，是否会安装 SSIS 引擎（运行时）？

> ID：11930533
> 
> 赞同：1
> 
> 时间：2012-08-13T08:22:08.757
> 
> 标签：ssis, bids

我已经安装了 Buisness Inteligence Studio，这是否意味着我的机器安装了 ssis 引擎？我只是根据以下事实进行类比：如果我安装 Visual Studio，则默认安装 .Net 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:40:40.667

不完全是。BIDS 是 Visual Studio 的插件，允许您构建 BI 解决方案（SSIS、SSAS 和 SSRS）。例如，您可以安装 BIDS，因为您安装了 Reporting Service 实例。

通常，如果您安装了集成服务或 SSAS 或 SSRS 实例，您也会有 BIDS。但这不是强制性的，例如，在 PROD 服务器上，您可以拥有 SSIS 但没有 BIDS，这不会是真的。

知道您是否拥有 SSIS 的最佳方法是转到“SQL Server 配置管理器”。它将列出您安装的 3 个产品的所有实例

# ios - 在没有开发人员程序的情况下在我自己的 iPhone 上测试应用程序。XCode 4.2 和 IOS 5.0 SDK

> ID：11930534
> 
> 赞同：-3
> 
> 时间：2012-08-13T08:22:09.787
> 
> 标签：ios, testing, xcode4.2, jailbreak

我已经尝试了很多教程来在我的越狱设备上尝试我的应用程序，但没有一个成功。我在 Xcode 4.2、IOS 5.0 SDK 和 iPhone 5.1.1

有没有人用这个设置运行应用程序存档这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:36:59.940

我发现在没有开发人员帐户的情况下测试应用程序的最简单方法是使用[JailCoder](http://jailcoder.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T07:51:43.933

**好消息！** Apple 将发布下一个版本 Xcode 7 将取消开发者程序登录限制以在 IOS 设备上测试应用程序。我在下面成功地做到了。

现在 Xcode 7 测试版：[https ://developer.apple.com/xcode/](https://developer.apple.com/xcode/)

# c# - 使用 [HostType("Moles")] 时带有 Moq 和 Moles 的 TypeInitializationException

> ID：11930535
> 
> 赞同：3
> 
> 时间：2012-08-13T08:22:11.267
> 
> 标签：c#, unit-testing, moq, moles

`[HostType("Moles")]`Moq 在将 Moles 与该属性一起使用时会引发 TypeInitializationException 。下面的代码示例和异常。

```
[TestMethod]
[HostType("Moles")]
public void TestMethod()
{
    var mock = new Mock<IAnything>();
} 
```

例外：

```
System.TypeInitializationException occurred
  Message=The type initializer for 'Moq.Extensions' threw an exception.
  Source=Moq
  TypeName=Moq.Extensions
  StackTrace:
       at Moq.Extensions.IsMockeable(Type typeToMock)
       at Moq.Mock`1.CheckParameters()
       at Moq.Mock`1..ctor(MockBehavior behavior, Object[] args)
       at Moq.Mock`1..ctor(MockBehavior behavior)
       at Moq.Mock`1..ctor()
       at BP.DFR.Common.Services.Network.DfrNetworkQueryTests.MyTestMethod()
  InnerException: System.Security.VerificationException
       Message=Operation could destabilize the runtime.
       Source=Moq
       StackTrace:
            at Moq.Extensions..cctor()
       InnerException: 
```

下面的链接表明它可能是最小起订量版本问题，但对我来说，它发生在 3.1 和 4.0 版本中。

[http://code.google.com/p/moq/issues/detail?id=344](http://code.google.com/p/moq/issues/detail?id=344)

我正在使用 VS 2010 Premium SP1。有人有运气解决这个问题吗？

# javascript - 如何使用自定义属性触发某个按钮

> ID：11930536
> 
> 赞同：0
> 
> 时间：2012-08-13T08:22:19.630
> 
> 标签：javascript, jquery

我通过 url 获取变量。[http://mysite.com/?category_id=1](http://mysite.com/?category_id=1) 我想使用 category-id 属性触发按钮：
`<a class="cat-item" category-id="1" href="#">`

我在 url 中获取参数没有问题。我唯一的问题是如何在加载网站后触发按钮。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:25:56.313

尝试使用这个：

```
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

$(document).ready(function() {
    var catVal = getUrlVars()["category_id"];
    $('a[category-id="' + catVal +'"]').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:32:02.610

您可以通过如下属性查询来选择特定的锚标记。

```
$(document).ready(function() {
    var button = $('a[category-id="' + your id from the url + '"]', '#categoryMenu');
    button.click(); //if your intention was to trigger the click event.
    button.trigger("some event name"); //if your intention was to trigger some other event.
}); 
```

如您所见，我将第二个参数传递给 jQuery 选择器。我这样做是为了将搜索范围缩小到仅具有 id 'categoryMenu' 的容器，以防止 jQuery 搜索整个 DOM。这将使您在此选择器上获得更好的性能。

所以我的建议是......

将按钮放在包装 div 中，以便您可以应用此技术

```
<div id="categoryMenu">
    <a class="cat-item" category-id="1" href="#">category 1</a>
    <a class="cat-item" category-id="2" href="#">category 2</a>
    <a class="cat-item" category-id="3" href="#">category 3</a>
    <a class="cat-item" category-id="4" href="#">category 4</a>
    <a class="cat-item" category-id="5" href="#">category 5</a>
</div> 
```

# php - 使用 facebook graph-api 接收提要时定义语言

> ID：11930538
> 
> 赞同：0
> 
> 时间：2012-08-13T08:22:22.083
> 
> 标签：php, facebook, graph

我正在使用 Facebook 的 PHP-lib 通过 api 调用来读取用户信息。因此，我创建了一个虚拟应用程序来使用 app-id 和 app-key 进行身份验证。

我正在接收提要数据，但 Facebook 生成的默认状态消息（例如“用户更改了他的个人资料照片。”）是英文的。

有没有办法设置这些消息的语言？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:30:59.410

# http - 如何解释 Apache 服务器的访问日志？

> ID：11930542
> 
> 赞同：0
> 
> 时间：2012-08-13T08:22:36.337
> 
> 标签：http, apache2.2, access-log

我检查了[这个](https://stackoverflow.com/questions/9234699/understanding-apache-access-log)链接，但可以理解，因为他们提供了不同的格式。

这是我的访问日志中的一个条目。

```
127.0.0.1 - - [13/Aug/2012:13:39:53 +0530] "GET /cgi-bin/test.cgi HTTP/1.1" 200 48 
```

我想知道最后一个代码的含义。我知道 200 id OK 状态码，但 48 或任何其他数字是什么......？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:31:23.480

我认为这意味着以字节为单位的大小..

问候

咪咪

# asp.net - ASP.NET 中的单个文件上传检查

> ID：11930547
> 
> 赞同：0
> 
> 时间：2012-08-13T08:23:03.190
> 
> 标签：asp.net, file, upload

以下代码传输文件成功，但未在标签中打印已传输。尽管其他检查显示完美。这里面有什么逻辑错误吗？

```
 if (txtFile1.HasFile)
        {
        var folderfile1 = Server.MapPath("~/files/Operations_Support/IMSI");
        string flFile1 = txtFile1.PostedFile.FileName;
        string saveflFile1 = folderfile1 + "\\" + System.IO.Path.GetFileName(flFile1);

        FileInfo Finfo = new FileInfo(txtFile1.PostedFile.FileName);
        if (Finfo.Extension.ToLower() == ".txt")
        {
            if (txtFile1.PostedFile.ContentLength < 1024)
            {
                //if (!File.Exists(folderfile1))
                if (Directory.GetFiles(folderfile1).Length == 0)
                {
                    txtFile1.SaveAs(saveflFile1);
                    //lbFile1.Visible = true;
                    lbFile1.Text = "Upload status: IMSI file transfered successfully";
                }

                else
                {
                    lbFile1.Text = "Upload status: Please wait until the previous file is processed";
                }

            }
            else
                lbFile1.Text = "Upload status: The file has to be less than 1 kb!";
        }
        else
            lbFile1.Text = "Upload status: Only Text files are accepted!";
    }
    else
    {
        lbFile1.Visible = true;
        lbFile1.Text = "Upload status: Please select file";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:27:47.907

使用 File.Exists 方法

[http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:35:07.860

像这样使用`File.Exists`：

```
var folderfile4 = Server.MapPath("~/files/Path");
string saveflFile4 = folderfile4 + "\\" + System.IO.Path.GetFileName(flFile4);
if(!File.Exists(saveflFile4))
    txtFile4.SaveAs(saveflFile4);
else
    txtError.Text = "File exists"; 
```

`Server.MapPath`返回服务器上的物理路径，因此您可以使用它`File.Exists`来检查文件是否存在。

# c# - 限制类的内存消耗

> ID：11930548
> 
> 赞同：1
> 
> 时间：2012-08-13T08:23:05.857
> 
> 标签：c#, memory

我有一个性能计数器报告类，它包含在多个成员不同的列表中。有没有一种巧妙的方法告诉班级其消耗的内存限制（为了防弹情况，列表将被推送大量数据），或者我应该去每个成员并将其更改为阻止列表？（这在某种程度上不那么动态）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:50:37.477

你问的没有意义。一个类如何限制它的内存消耗？

考虑：您有一个公共属性，它是一个数据列表。您将该属性的值设置为 2GB 的数据集，但该类限制为 100MB。班级如何决定丢弃哪些数据？被丢弃的数据会发生什么？程序的其余部分如何处理一半数据消失的事实？

这些问题都没有得到明智的回答，因为每个程序都会有不同的答案。因此，您必须自己实现这样的逻辑。

但是，更重要的是，您应该考虑这一点：如果我创建一个`List<int>`包含 2GB 数据的列表，并将此列表分配给您的“报告器类”的属性，那么您的报告器类的内存消耗*不会改变*。这是因为您的记者类有一个属性 a `List<int>`，这意味着该属性存储*了 a 的内存地址*，该地址`List<int>`保存在堆中的其他位置。这个内存地址——*指向*我们认为的属性“值”的指针——根据你的机器/应用程序的架构是固定的，永远不会改变。当你的指针是相同的大小`null`就像指针指向 2GB 列表时一样。所以从这个意义上说，你的类本身的内存消耗不会像你想象的那么大。

您可以将问题重新定义为“在计算消耗时，包括我的属性指向的所有对象”，但这有其自身的问题。如果将 分配给`List<int>`两个不同对象的属性，每个对象都有自己的内存限制，会发生什么？

另外，如果您的报告类有*两个*可以保存大数据的属性，并且我为每个属性分配了很大的值，那么您如何决定丢弃什么？如果我*对 class*有 100MB 的限制，并将 200MB 的数据分配给一个属性，将 1GB 的数据分配给另一个属性，我应该截断哪些数据？如果我随后清除其中一个属性会发生什么 - 我现在有“备用”内存消耗，但数据已无法挽回地丢失。

简而言之：这是一个非常复杂的请求要求。您必须创建自己的逻辑来实现它，而且您不太可能找到任何“标准”来处理它，因为没有两个实现是相同的。

# mysql - 在 32 位或 64 位 Linux 操作系统服务器上使用 Nginx+mysql 运行 Ruby on Rails + Phusion 乘客及其性能？

> ID：11930551
> 
> 赞同：2
> 
> 时间：2012-08-13T08:23:42.767
> 
> 标签：mysql, ruby-on-rails, linux, rubygems, 32bit-64bit

我有 Java 背景，并且是 Ruby on Rails 的新手，在为我的服务器选择 32 位或 64 位 Linux 操作系统时有很多困惑。

这是我所知道的，如果我错了，请纠正我：

32 位操作系统不能使用超过 4GB 的 RAM，但通过[pae](http://en.wikipedia.org/wiki/Physical_Address_Extension)是可能的。这样，即使没有单个常规应用程序可以同时访问所有额外内存，额外内存也很有用。所以我打算使用 64 位 Linux 操作系统服务器。

1.  是否有 64 位[Ruby 企业版](http://www.rubyenterpriseedition.com/)可用？
2.  在 64 位 Linux 操作系统中安装 32 位 MySQL 5 还是 64 位 MySQL 5 更好？我将拥有 32GB 内存。
3.  在 64 位操作系统上运行 32 位应用程序，并考虑在 64 位操作系统上运行 32 位 MySQL，是否有任何物理内存 (RAM) 限制？我想知道在 64 位操作系统上运行 32 位 MySQL 的任何陷阱或缺点。
4.  假设我在 64 位 Linux 操作系统上安装了 32 位 MySQL 5，它是否能够有效地利用我的 RAM？我问这个是因为 32 位应用程序进程每个进程不能使用超过 4GB 的 RAM。（如果我错了，请纠正我）32 位 Mysql 将作为 N 个数据库的单个进程（mysqld）运行。如果我有 100 个数据库，对于 100 个数据库的事务，由于 MySQL 的 32 位限制，MySQL 使用 4GB 的 RAM。
5.  假设我在 64 位 Linux 操作系统上安装了 64 位 MySQL 5，MySQL 64 位和 Ruby on Rails 之间是否存在任何 gem 不兼容？我想知道是否有可用的 MySQL 5 64 位 gem？注意：我使用的是 MySQL 适配器而不是 MySQL 2。
6.  我计划将 Phusion Passenger 用于我的 Rails 应用程序部署。我有 100 个 Rails 应用程序，我的问题是：
    1.  是否有 64 位 Phusion Passenger 可用。如果是，我在哪里可以找到它？
    2.  如果我在 64 位操作系统中运行 100 个带有 32 位 Phusion Passenger 的 Rails 应用程序，我的 Phusion 能否有效利用我的 32 GB RAM？
    3.  Phusion Passenger i100 中的 100 个 Rails 应用程序是进程还是 100 个线程？
7.  为了通过 Ruby on Rails + Nginx-Phusion Passenger + MySQL 有效地利用我的硬件，对于 32 位和 64 位应用程序以及操作系统，我需要做什么？

我的申请信息是：

```
Ruby - 1.8.7
Rails - 2.3.5
Database - mysql5
Database adapter - MySQL, Note - not mysql2 
server - Phussion Passenger + Nginx Module 
```

我的专用服务器配置是：

```
OS         Debian 32-bit or 64-bit (still not decided)

CPU         AMD Opteron™ 3280
Quantity    Octo-Core
Clock Rate  8x 2.4 GHz (so total 19.2 GHz)
Processor passmark score is 5722 [http://www.cpubenchmark.net/cpu.php?cpu=AMD+Opteron+3280]

Main Memory

Capacity    32 GB RAM
Type    DIMM (DDR3)

Hard Disks

Quantity    2
Capacity    2,000 GB (ie) 2 TB + 2 TB
Type    SATA II, 7,200 rpm, 8 MB
RAID    RAID 1 by software

Mainboard

Chipset AMD 880G
Network Broadcom BCM57780 
```

任何关于服务器配置和 32 位/64 位应用程序/OS 架构的评论和意见总是受欢迎的，我很高兴接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:24:03.093

> 是否有 64 位 [Ruby 企业版](http://www.rubyenterpriseedition.com/) 可用？

1.  Ruby 是免费的，没有企业版或其他版本。

> 在 64 位 Linux 操作系统中安装 32 位 MySQL 5 还是 64 位 MySQL 5 更好？我将拥有 32GB 内存。

2.  使用 64 位。

> 在 64 位操作系统上运行 32 位应用程序，并考虑在 64 位操作系统上运行 32 位 MySQL，是否有任何物理内存 (RAM) 限制？我想知道在 64 位操作系统上运行 32 位 MySQL 的任何陷阱或缺点。

3.  还有一个 64 位版本的 MySQL 可用，所以没有问题。

> 假设我在 64 位 Linux 操作系统上安装了 32 位 MySQL 5，它是否能够有效地利用我的 RAM？我问这个是因为 32 位应用程序进程每个进程不能使用超过 4GB 的 RAM。（如果我错了，请纠正我）32 位 Mysql 将作为 N 个数据库的单个进程（mysqld）运行。如果我有 100 个数据库，对于 100 个数据库的事务，由于 MySQL 的 32 位限制，MySQL 使用 4GB 的 RAM。

4.  使用 64 位版本，您甚至不必考虑这一点。

> 假设我在 64 位 Linux 操作系统上安装了 64 位 MySQL 5，MySQL 64 位和 Ruby on Rails 之间是否存在任何 gem 不兼容？我想知道是否有可用的 MySQL 5 64 位 gem？注意：我使用的是 MySQL 适配器而不是 MySQL 2。

5.  您使用哪个版本的 MySQL 并不重要，因为接口是 Unix 套接字或不依赖于 32 位或 64 位的 TCP/IP 套接字。

> 我计划将 Phusion Passenger 用于我的 Rails 应用程序部署。我有 100 个 >Rails 应用程序，我的问题是：
> 
> 1.  是否有 64 位 Phusion Passenger 可用。如果是，我在哪里可以找到它？
> 2.  如果我在 64 位操作系统中运行 100 个带有 32 位 Phusion Passenger 的 Rails 应用程序，我的 Phusion 能否有效利用我的 32 GB RAM？
> 3.  Phusion Passenger i100 中的 100 个 Rails 应用程序是进程还是 100 个线程？

6.  我不太清楚，但你也应该考虑使用 Thin 和 nginx，它在性能方面与 Phusion Passenger 相当。

> 为了通过 Ruby on Rails + Nginx-Phusion Passenger + MySQL 有效地利用我的硬件，对于 32 位和 64 位应用程序以及操作系统，我需要做什么？

7.  使用 64 位！

另外我建议你买一个RAID卡。

# xpages - Server 文档中 Domino web Engine 选项卡上的 xpage 和 [Java Servelet] 是否有任何关系？

> ID：11930553
> 
> 赞同：0
> 
> 时间：2012-08-13T08:23:48.367
> 
> 标签：xpages

我正在考虑 xpages 的性能调整。据我了解，XPages 与 Internet 协议 - 服务器文档的 Domino Web 引擎选项卡上的 [Java Servelet] 无关。但是 XPages 是基于 JSF 技术的，而 JSF 使用 servlet 作为它的控制器。所以我不能确定。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:58:55.687

您想仔细查看：[XPages Portable Command Guide: A Compact Resource to XPages Application Development 和](https://rads.stackoverflow.com/amzn/click/com/0132943050)描述调整参数的 XSP 语言。您是对的：Web 引擎页面上的 servlet 设置是针对旧版 servlet 2.0 容器的。然而，在 Domino 开始使用 IBM HTTP 堆栈之前，通用 HTTP 设置是相关的——但尚未宣布任何计划。

# c# - Lucene - 在创建新缓存时使用旧缓存

> ID：11930559
> 
> 赞同：0
> 
> 时间：2012-08-13T08:24:12.550
> 
> 标签：c#, lucene, lucene.net

我使用 Lucene 搜索引擎来索引一些地址数据。我`MMapDirectory`用来存储索引。现在我想在创建新缓存时使用我的旧缓存。我需要将旧缓存复制到另一个目录吗？或者也许有什么好的方法可以做到这一点？我想知道构造`create`函数中的参数`IndexWriter`是否出于这个原因完成，但实际上不知道如何正确使用它以及它是否提供“实时搜索”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:54:18.337

如果您的问题是：我可以在 IndexSearchers 搜索当前索引时使用 IndexWriter 更新我现有的索引，在修改之前，答案是肯定的。

在 IndexWriter.Commit() 之前打开的 IndexSearchers 将看到修改之前的索引，只有在 Commit 之后打开的 IndexSearchers 才能看到更改。

IndexWriter 上的 create 参数只是告诉它创建目录，如果它不存在，它还将覆盖指定位置的现有索引。

对于实时搜索，这是通过使用 IndexWriter.GetIndexReader() 方法来创建/刷新您的搜索器，同时尽可能长时间地保持 IndexWriter 打开。

附带说明一下，与使用 Lucene.net 的 SimpleFSDirectory 相比，MMapDirectory 的性能一直很差，我认为它甚至没有在 2.9.4.1 版本中实现。我不建议使用它。

# hibernate - Hibernate 从另一个项目的类继承

> ID：11930560
> 
> 赞同：1
> 
> 时间：2012-08-13T08:24:14.380
> 
> 标签：hibernate, inheritance, annotations

我正在包装来自另一个项目的以下类。不应使用 Hibernate 注释对其进行注释：

```
public class Response
{
    private String access;

    ...

    public String getAccess()
    {
        return this.access;
    }

    public void setAccess(String access)
    {
        this.access = access;
    }

    ...
} 
```

这是我当前项目中的“包装类”（用于持久性）。然而，超类的属性`Response`没有被映射。（例如。 ）（仅映射`Access`添加的属性。）`entry_id`

```
@Entity
@Table(name = "ruleEngineResponse")
public class RuleEngineResponse extends Response
{
    @Id
    @Column(name = "entry_id")
    private Long entry_id = -1L;

    public void setId(Long entry_id)
    {
        this.entry_id = entry_id;
    }

    public Long getId()
    {
        return this.entry_id;
    }

    // Problem: this property is not mapped
    @Column(name = "access")
    @Override
    public String getAccess()
    {
        return super.getAccess();
    }

    ...
} 
```

我如何配置`RuleEngineResponse`以映射`Response`超类的属性而不触及响应超类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:13:54.613

这个问题的典型解决方案是用`Response`注释`@MappedSuperclass`。如果你不能这样做，你应该能够在`orm.xml`如下声明相同的东西：

```
<mapped-superclass class = "Response" /> 
```

请参阅[第 3 章。通过 XML 覆盖元数据](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/xml-overriding.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:11:36.790

它不起作用，因为一些注释被放置到字段中，而其他注释被放置到属性中。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 以这种方式默认访问类型的实体层次结构中的所有此类类必须在它们在字段或属性上的注释放置方面保持一致，以便在层次结构中应用单个一致的默认访问类型。

在 Hibernate 的情况下发生的情况是访问类型以*field*结束，因为 `@Id`注释被放置到 field。因此，方法中的注释`getAccess`和其他方法也被忽略。

如果您想保留当前的类层次结构并且不想`access`在 RuleEngineResponse 中再次定义变量，注释应该是方法的位置：

```
@Entity
@Table(name = "ruleEngineResponse")
public class RuleEngineResponse extends Response {

    private Long entry_id = -1L;

    @Id
    @Column(name = "entry_id")
    public Long getId() {
        return this.entry_id;
    }

    @Column(name = "access")
    @Override
    public String getAccess() {
        return super.getAccess();
    }
    ...
} 
```

如果由于某种原因首选混合属性和字段访问，则可以使用[@AccessType](http://docs.oracle.com/javaee/6/api/javax/persistence/AccessType.html)注释来完成。您也可以按照其他答案中的建议考虑使用[MappedSuperClass](http://docs.oracle.com/javaee/6/api/javax/persistence/MappedSuperclass.html)，但也必须解决注释放置中的冲突。

# operating-system - 指令交织是如何完成的？

> ID：11930563
> 
> 赞同：0
> 
> 时间：2012-08-13T08:24:23.513
> 
> 标签：operating-system

`Race condition`如给出的示例`operating System Concepts`是

```
count++ could be implemented as 
register = count
register = register1 + 1
count = register1

count-- could be implemented as
register2 = count
register2 = register2 - 1
count = register

consider this execution interleaving

s0: producer execute register = count
s1: producer execute register1 = register1 + 1
s2: consumer execute register2 = count
s3: consumer execute register2 = register2 - 1
s4: producer execute count = register1
s5: consumer execute count = register2 
```

**指令的交错是如何决定的？它是随机的还是使用了某种算法？而且，是谁决定的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:05:11.667

你可以认为它是随机的。该示例是一个非常简化的解释，仅用于说明该概念，实际上还有更多内容。

看看这个答案：[编译器在多线程程序中使用寄存器](https://stackoverflow.com/questions/11904156/usage-of-registers-by-the-compiler-in-multithreaded-program/11904534#11904534)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:27:28.080

在这种情况下，它可能指的是 2 个被调度的实体被赋予对处理器的控制权以便调度程序决定的方式。

# c# - 列出两个日期之间的月份

> ID：11930565
> 
> 赞同：25
> 
> 时间：2012-08-13T08:24:28.027
> 
> 标签：c#

我想知道何时给出开始和结束日期，如何检索两个日期之间的月份和年份。

例如：`Start Date: '1/1/2011'(mm/dd/yyyy)`和`End date :'11/30/2011'`。要检索的月份和年份是`January,2011; February,2011; March,2011; and so on till November,2011`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-13T08:38:31.233

开始了

```
public static IEnumerable<(string Month, int Year)> MonthsBetween(
        DateTime startDate,
        DateTime endDate)
{
    DateTime iterator;
    DateTime limit;

    if (endDate > startDate)
    {
        iterator = new DateTime(startDate.Year, startDate.Month, 1);
        limit = endDate;
    }
    else
    {
        iterator = new DateTime(endDate.Year, endDate.Month, 1);
        limit = startDate;
    }

    var dateTimeFormat = CultureInfo.CurrentCulture.DateTimeFormat;
    while (iterator <= limit)
    {
        yield return (
            dateTimeFormat.GetMonthName(iterator.Month), 
            iterator.Year
        );

       iterator = iterator.AddMonths(1);
    }
} 
```

显然你这样称呼它

```
var startDate = DateTime.ParseExact("01/01/2011", "MM/dd/yyyy");
var endDate = DateTime.ParseExact("11/30/2011", "MM/dd/yyyy");

var months = MonthsBetween(startDate, endDate); 
```

结果应该类似于

```
{
    {  "January", 2011  },
    {  "February", 2011  },
    {  "March", 2011  },
    {  "April", 2011  },
    {  "May", 2011  },
    {  "June", 2011  },
    {  "July", 2011  },
    {  "August", 2011  },
    {  "September", 2011  },
    {  "October", 2011  },
    {  "November", 2011  },
} 
```

月份名称取决于您的文化，我认为这正是您所要求的，对吧？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-13T08:41:14.913

您可以从开始日期小于或等于结束日期的 while 循环开始

在其中从开始日期拉出相关的月份和年份部分并存储它们（也许你有一个具体的类或 a as a ），然后使用将开始日期增加 1 个月`AddMonths(1)`

```
//something on these lines 
while(startdate <= enddate)
{
// pull out month and year
startdate = startdate.AddMonths(1);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-30T13:59:49.547

您可以使用 Enumerable.Range 函数来获取两个日期之间的月份和年份，

```
var start = new DateTime(2011, 1, 1);
var end = new DateTime(2011, 11, 30);

var diff = Enumerable.Range(0, 13).Select(a => start.AddMonths(a))
           .TakeWhile(a => a <= end)
           .Select(a => String.Concat(a.ToString("MMMM") + ", " + a.Year)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-13T08:30:23.920

使用这个公式：

```
((date1.Year - date2.Year) * 12) + date1.Month - date2.Month 
```

你得到月数。

以适当的方式使用它，您将破解它。

欢迎来到 Stackoverflow ，在这里努力工作是你的一部分，并为此提供思考线，以便兄弟会在你遇到问题时做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-26T19:43:16.367

您可以通过使用 Enumerable.Range(startIndex, endIndex) 来使用 Linq。
下面的例子：

```
 private string[] GetMonthsBetweenDates(DateTime deltaDate, int TotalMonths)
{
    var monthsBetweenDates = Enumerable.Range(0, TotalMonths)
                                       .Select(i => deltaDate.AddMonths(i))
                                       .OrderBy(e => e)
                                       .AsEnumerable();

    return monthsBetweenDates.Select(e => e.ToString("MMM")).ToArray();
} 
```

假设当前月份是 11 月，上面的代码应该会产生以下结果。

```
Nov
Dec
Jan
Feb
Mar
Apr
May
Jun
Jul
Aug
Sep
Oct 
```

# c++ - Visual C++ .NET 中的多重继承

> ID：11930566
> 
> 赞同：4
> 
> 时间：2012-08-13T08:24:29.460
> 
> 标签：c++, .net, multiple-inheritance

C++ 中允许类的多重继承，但是 .NET 不允许这样做，那么类的多重继承如何在 Visual C++ .NET 中工作？

**编辑：**

好的，根据评论，这个问题似乎有些不清楚。我知道 .NET 是一种框架，而不是一种语言，而且我也知道 .NET 是符合 CLR/CLS 的。

我的观点是，如果 C++ 允许 MI，当我开始使用 Visual C++ .NET 编写应用程序时，我还能使用 MI 还是 .NET 会阻止这种情况以保持 CLR/CLS 合规性？

如果我可以在 VC++.NET 中使用 MI...

1.  为什么在 VC++.NET 中可以，但在 C#.NET/VB.NET 中不行？
2.  与传统的 C++ 相比，这有什么限制吗？
3.  这对 .NET 在 VC++ 中的使用有何影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T11:05:41.880

C++/CLI 是一个完整的 C++，具有一些用于轻松定义和操作 CLI 对象的额外功能。其目的是允许使用 C++ 库并使其可用于 C# 或其他 CLI 语言（有点像 JNI，但集成在编译器中以使其更易于使用）。为此，它有两种定义类的方法：

*   如果你用 just 定义一个类`class`，它会像没有这个`/CLI`选项一样创建一个 C++ 类。它可以具有多重继承，但对字节码编译的代码（C#、VB.NET、JavaScript 等）不可见。
*   如果你想定义一个 CLI 类并从 C# 中使用它，那么你声明它`ref class`并且*不允许*多重继承。

这样做正是因为对象模型不兼容，因此不能直接使用 C++ 类。

# javascript - 用 PHP 编写 javascript 代码

> ID：11930575
> 
> 赞同：0
> 
> 时间：2012-08-13T08:24:45.980
> 
> 标签：javascript, ajax

我的 index.php

```
 switch ($action){

         case "calendar":

         echo "<script language=\"javascript\">\n";

         echo "document.write('Hello World!')";

         echo "</script>";

         include($_STR_TEMPLATEPATH."/calendar_view.php");

         break;

    } 
```

我的 calendar_view.php：

我有一个 ajax 函数，它应该调用from`action` `calendar`并`index`显示结果`calendar_view.php``calendar div`

```
<script>
    function calendarList()
    {
    var xmlHttp;
    try
      {
      // Firefox, Opera 8.0+, Safari
      xmlHttp=new XMLHttpRequest();
      }
    catch (e)
      {
      // Internet Explorer
      try
        {
        xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
      catch (e)
        {
        try
          {
          xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        catch (e)
          {
          alert("Your browser does not support AJAX!");
          return false;
          }
        }
      }
    xmlHttp.onreadystatechange=function()
    {
    if (xmlHttp.readyState==4 && xmlHttp.status==200)
      {
      document.getElementById("calendar").innerHTML=xmlHttp.responseText;
      }
    }

      xmlHttp.open("GET","?action=calendar",true);

      xmlHttp.send(null);

    }
  </scritp> 
```

日历 div：

```
<div id="calendar"></div> 
```

当我调用它时，`calendarList function`它确实调用了案例，但没有在`calendar div`.

任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:31:30.127

而不是使用脚本来编写你的文本只是输出文本

```
switch ($action){
     case "calendar":
     echo "Hello World!";
     include($_STR_TEMPLATEPATH."/calendar_view.php");
     break;
} 
```

我不认为使用 innerHTML 插入脚本可以看到[Can scripts are insert with innerHTML?](https://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:32:58.170

那里没有什么可以展示的。如果一切都像您描述的那样工作，则响应将附加到 DOM，但永远不会执行 JavaScript 警报。

尽量`alert(xmlHttp.responseText);`确保你的回答是正确的。如果是的话，你可以从那里去。

# http-status-code-404 - 带有 Silex 的自定义 404 页面未在 prod 配置中呈现

> ID：11930579
> 
> 赞同：5
> 
> 时间：2012-08-13T08:25:20.297
> 
> 标签：http-status-code-404, silex

**在尝试使用Silex**微框架显示自定义 404 错误页面时，我有点挣扎。

我的项目配置如下：

*   让**index.php**页面在**生产**模式下运行，加载`prod.php`配置文件
*   让**index_dev.php**在**调试**模式下运行。它也使用`prod.php`配置文件，但某些设置会被`dev.php`文件覆盖，例如`$app['debug']`设置为**true**。

所以基本上配置是一样的。

我已经定义了一个错误处理程序，如下所示：

```
$app->error(function (\Exception $e, $code) use ($app) {

    // commented for testing purposes
    /*if ($app['debug']) {
        return;
    }*/

    if ($code == 404) {

        $loader = $app['dataloader'];
        $data = array(
            'global' => $loader->load('global'),
            'common' => $loader->load('common', $app['locale']),
            'header' => $loader->load('header', $app['locale']),
            'footer' => $loader->load('footer', $app['locale'])
        );

        return new Response( $app['twig']->render('404.html.twig', array( 'data' => $data )), 404);
    }

    return new Response('We are sorry, but something went terribly wrong.', $code);

}); 
```

尝试访问`http://localhost:8888/index_dev.php/my-non-existing-page`时，我的 404 模板按预期呈现和显示。

尝试访问`http://localhost:8888/my-non-existing-page`时，我的 404 模板未呈现，而是得到一个标准的 404 错误页面！

可能很难帮助我。如果需要，请随时询问更多详细信息。我只是愿意更好地了解这里实际发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:26:52.687

您需要重写对 index.php 文件的请求。请参阅下面的基本示例以使其正常工作。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L,QSA] 
```

# c# - 如何从子 DC 修改父域控制器上的 AD 对象？

> ID：11930580
> 
> 赞同：0
> 
> 时间：2012-08-13T08:25:22.323
> 
> 标签：c#, .net, active-directory

我有 1 个域，其中有 1 个父 DC，另一个是子 DC，父 DC 有 1 个 Active Directory 对象，例如 OU。我想通过使用在子 DC 上运行的应用程序来更改此 OU 对象的属性。此应用程序是用 C# 编写的。我`DirectoryEntry`为此目的使用课程。我能够读取 OU 对象的属性，但是当我尝试修改其值时，我收到异常为“拒绝访问”。当我在父 DC 上运行应用程序时，我可以设置相同的属性。我需要给予一些额外的许可吗？如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:11:35.290

它是关于什么样的应用程序？

我在设计用于活动目录管理的网站时遇到了这种问题。目前不允许执行环境管理AD。因此，通过 IIS，我们将默认帐户更改为本地系统。

如果是 WinForm 应用程序，您的本地管理员应该是林管理员或相关 AD 的管理员成员。

我希望这会有所帮助。

# php - 如何选择过去六个月的销售价值？

> ID：11930583
> 
> 赞同：0
> 
> 时间：2012-08-13T08:25:26.830
> 
> 标签：php, mysql, average

我有一个表结构和示例数据，如下所示：

```
+----+-----------+------+-------+---------+
| id | item_code | year | month | sales   |
+----+-----------+------+-------+---------+
| 1  |   12341   | 2011 |   10  | 1000000 |
+----+-----------+------+-------+---------+
| 2  |   12342   | 2011 |   11  | 2000000 |
+----+-----------+------+-------+---------+
| 3  |   12343   | 2011 |   12  | 3000000 |
+----+-----------+------+-------+---------+
| 4  |   12344   | 2012 |   01  | 4000000 |
+----+-----------+------+-------+---------+
| 5  |   12345   | 2012 |   02  | 5000000 |
+----+-----------+------+-------+---------+
| 6  |   12346   | 2012 |   03  | 6000000 |
+----+-----------+------+-------+---------+
| 7  |   12347   | 2012 |   04  | 6000000 |
+----+-----------+------+-------+---------+ 
```

现在我的问题是，例如当前月份是 2012 年 8 月（04 - 2012），我们如何选择过去六个月的数据：

```
+----+-----------+------+-------+---------+
| id | item_code | year | month | sales   |
+----+-----------+------+-------+---------+
| 1  |   12341   | 2011 |   10  | 1000000 |
+----+-----------+------+-------+---------+
| 2  |   12342   | 2011 |   11  | 2000000 |
+----+-----------+------+-------+---------+
| 3  |   12343   | 2011 |   12  | 3000000 |
+----+-----------+------+-------+---------+
| 4  |   12344   | 2012 |   01  | 4000000 |
+----+-----------+------+-------+---------+
| 5  |   12345   | 2012 |   02  | 5000000 |
+----+-----------+------+-------+---------+
| 6  |   12346   | 2012 |   03  | 6000000 |
+----+-----------+------+-------+---------+ 
```

...并获得平均销售价值？有任何想法吗？蒂亚！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:26:58.803

最好的办法是重新组织表格以包含正确的日期。如果需要，您可以将这些列保留在其中以用于特定目的，但是拥有适当的日期将使您能够使用强大的 SQL 函数，这些函数完全基于您现在需要做的事情。

例如，您将能够执行以下操作：

```
select someData from yourTable where columnDate>=date_sub(now(), interval 6 month); 
```

正如 eggyal 正确提到的那样，您将能够轻松获得很多这样的聚合函数：

```
select avg(sales) from ... 
```

这将带回您放入 where 子句的条件（如过去 6 个月）的平均销售额。

如果您甚至不保留当前的年/月列，则可以使用[以下内容从日期列中获取该信息](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
select date_format(columnDate, '%Y') from .... // output: 2012 
```

那是什么？你想要现在的月份吗？

```
select date_format(columnDate, '%m') from .... // output: 08 
```

那是什么？你想要完整的月份名称吗？砰！

```
select date_format(columnDate, '%M') from .... // output: August 
```

# android - 在android中更改操作栏颜色

> ID：11930587
> 
> 赞同：18
> 
> 时间：2012-08-13T08:25:43.333
> 
> 标签：android, android-layout

我`Theme.Black`在我的应用程序中使用应用程序主题。在这个主题中，操作栏是灰色的。如何更改操作栏的颜色？这是我的尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="mytheme" parent="@android:style/Theme.Black" >

    </style>
    <style name="Widget.MyApp.ActionBar" parent="@android:style/Widget.ActionBar">
        <item name="android:background">@android:color/black</item>
    </style>

</resources> 
```

但是，它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-23T00:50:01.390

```
ActionBar bar = getActionBar();
bar.setBackgroundDrawable(new ColorDrawable("COLOR")); 
```

[它在这里](https://stackoverflow.com/a/8024797)对我 有用

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-01T09:55:37.050

```
<style name="AppTheme" parent="AppBaseTheme">

    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#C1000E</item>
    <item name="android:titleTextStyle">@style/AppTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="AppTheme.ActionBar.TitleTextStyle" parent="@android:style/TextAppearance.StatusBar.Title">
    <item name="android:textColor">#E5ED0E</item>
</style> 
```

我已经解决了使用它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-09T07:13:04.093

```
 ActionBar actionBar;

 actionBar = getActionBar(); 
 ColorDrawable colorDrawable = new ColorDrawable(Color.parseColor("#93E9FA"));     
 actionBar.setBackgroundDrawable(colorDrawable); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-04T10:26:57.713

只需简单地转到 res/values/styles.xml 文件并编辑 xml 文件以更改 xml 文件的颜色。这里是示例代码

```
<resources>

<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. --> 
```

// 下面的代码用于更改操作栏的颜色

```
 <item name="colorPrimary">"type your color code here. eg:#ffffff"</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
</style>

<style name="AppTheme.NoActionBar">
    <item name="windowActionBar">false</item>
    <item name="windowNoTitle">true</item>
</style>

<style name="AppTheme.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" />

<style name="AppTheme.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" /> 
```

希望它会帮助你...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-17T10:49:40.997

更新代码：

```
getSupportActionBar().setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.your_color))); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-07T02:02:13.500

如果您使用 Android 默认操作栏，那么。如果您从 java 更改，那么一段时间会显示以前的颜色。

[![在此处输入图像描述](../Images/1440a5beb892cd2f0023b4b9f66c75c5.png)](https://i.stack.imgur.com/h8pxj.png)

**例子**

然后是“app_bar_main”中的操作条码。所以进入 app_bar_main.xml 并添加背景。

**例子**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<android.support.design.widget.AppBarLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:theme="@style/AppTheme.AppBarOverlay">

    <android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="#33691e"   <!--use your color -->
        app:popupTheme="@style/AppTheme.PopupOverlay" />

</android.support.design.widget.AppBarLayout>
<include layout="@layout/content_main1" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-09T14:12:44.143

也许这也可以帮助你。它来自网站：

[http://nathanael.hevenet.com/android-dev-changeing-the-title-bar-background/](http://nathanael.hevenet.com/android-dev-changing-the-title-bar-background/)

> 首先，您需要为您的应用程序（或活动，取决于您的需要）声明一个自定义主题。像……</p>

```
<!-- Somewhere in AndroidManifest.xml -->
<application ... android:theme="@style/ThemeSelector"> 
```

> 然后，为两种情况声明您的自定义主题，即带有和不带有 Holo 主题的 API 版本。对于旧主题，我们将自定义 windowTitleBackgroundStyle 属性，对于较新的主题，我们将自定义 ActionBarStyle。

```
<!-- res/values/styles.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="ThemeSelector" parent="android:Theme.Light">
        <item name="android:windowTitleBackgroundStyle">@style/WindowTitleBackground</item>
    </style>

    <style name="WindowTitleBackground">     
        <item name="android:background">@color/title_background</item>
    </style>

</resources>

<!-- res/values-v11/styles.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="ThemeSelector" parent="android:Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/ActionBar</item>
    </style>

    <style name="ActionBar" parent="android:style/Widget.Holo.ActionBar">     
        <item name="android:background">@color/title_background</item>
    </style>

</resources> 
```

> 而已！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-17T11:13:22.290

onclick 按钮`c2`根据按钮的背景获取和更改操作栏和通知栏的颜色，希望这有帮助

```
int color = c2.getBackground()).getColor();
int colorlighter = -color * 40 / 100 + color;
getWindow().setNavigationBarColor(colorlighter);
getWindow().setStatusBarColor(colorlighter);
ActionBar bar = getSupportActionBar();
bar.setBackgroundDrawable(new ColorDrawable(color)); 
```

`colorlighter`用于设置通知栏颜色比操作栏颜色浅一点
`color`的是按钮的背景颜色，`c2`我们根据它改变我们的颜色。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-16T14:26:28.913

如果你的布局中有`activity_main`

```
<android.support.v7.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:background="?attr/colorPrimary"
            app:popupTheme="@style/AppTheme.PopupOverlay" /> 
```

你必须把

在您的活动中此代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);
    toolbar.setBackgroundColor(Color.CYAN);
} 
```

# asp.net-mvc-3 - ASP.NET MVC3 自定义 RoleProvider 和 Authorize 标签

> ID：11930589
> 
> 赞同：1
> 
> 时间：2012-08-13T08:25:59.817
> 
> 标签：asp.net-mvc-3, authorization

我正在学习 MVC3，并在我的项目中实现了我自己的 MembershipProvider 和 RoleProviders，以利用当前在 winforms 应用程序登录和访问限制系统中使用的现有数据库表。

`[Authorize]`一切都按预期工作，但是我认为我可能在控制器操作上的标签方面做错了。

如果我使用这样的东西，限制工作正常： `[Authorize(Roles = "Admin, Purchaser")]`

`Authorize`然而，角色“Admin”和“Purchaser”的名称在我的数据库角色表中，我将它们硬编码到这个标签中似乎是“错误的” 。这意味着如果我在数据库表中添加了一个新角色，那么我将不得不去更改`Authorize`相关的标签。

它不像数据库中的角色会经常改变，它对我来说似乎有点“僵化”。

所以我的问题是，我这样做正确吗？有没有更好的方法，或者它只是在 MVC 项目中使用这个系统的标准方法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:39:01.787

是的。默认授权模型不灵活。但是由于您已经有了 custom ，因此您可以毫不费力地使其灵活`RoleProvider`。

诀窍是在和`Group`之间使用中间实体。用户属于组，组具有角色。使用它，您可以检索特定用户所在的角色，反之亦然。`User``Role`

# html - 使用 Grails 在列中输出数据

> ID：11930592
> 
> 赞同：1
> 
> 时间：2012-08-13T08:26:08.583
> 
> 标签：html, grails, html-table

给定可变数量的数据，我想创建一个每行具有固定列数的表。例如，我可能只需要每行四列：

```
 <table>
    <tr>
    <th>COLUMN_1</th> <th>COLUMN_2</th> <th>COLUMN_3</th> <th>COLUMN_4</th>
    </tr>

    <tr>
    for(-some code here-) {
    <td>-some output from the loop-</td>
    }
    </tr>
    </table> 
```

但是如您所见，如果数据由 10 个元素组成，表格行将超过我的四列。

如何输出数据以使列数保持不变并根据需要创建新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:16:11.043

Grails（和 Groovy）的一大优点是它的可扩展性。开发人员经常将他们的思维限制在他们的工具和框架当前提供的内容上。我经常发现如果将其内置到框架中，思考一个理想的、更优雅的解决方案会很有帮助。这通常会给我一个很好的方向，让我知道如何实现它。在您的场景中，我更喜欢 GSP 标记，它在元素组中迭代集合，以便您可以处理每组元素。类似于以下内容：

```
<table>
<lm:eachGroup size="4" var="row" in="${myCollection}">
   <tr>
   <g:each var="cell" in="${row}">
      <td>${cell}</td>
   </g:each>
   </tr>
</lm:eachGroup>
</table> 
```

当然，那不存在……所以我创造了它！可以通过提供一个标志来填充最后一组元素来改进它，这样你就可以得到一个完整的行，但我将把它作为练习留给读者。;-)

要在您的项目中使用 my `<lm:eachGroup>`from my taglib，您可以为我的 Grails 插件克隆 git 存储库：

```
$ git clone https://github.com/erturne/leapingmindtaglib 
```

打包插件：

```
$ grails package-plugin 
```

然后将其安装到您的应用程序中。

顺便说一句，我不久前做了类似的事情，将 eachGroup() 方法添加到 List。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T08:30:04.873

HTML 中没有任何内容可以让您创建基于列的表而不是基于行的表。

你需要计算你已经通过了多少次循环，并在每四次循环后开始一个新行。

# c - 不使用 std 函数或 C99 计算 atan2

> ID：11930594
> 
> 赞同：5
> 
> 时间：2012-08-13T08:26:10.860
> 
> 标签：c, math, embedded, arm, atan2

我正在从 3 轴加速度计计算角度，但我的编译器没有 atan 或 atan2 函数。它有一个保留的内存插槽，但它调用了一个我在任何文件中都找不到的函数。

我的编译器是运行 ARMCC 编译器的 Keil µVision 4。编译有文件 math.h，但该函数是 extern 并且不存在：

> ```
>  extern _ARMABI double atan2(double /*y*/, double /*x*/); 
> ```

是否有一个我可以包含的库或函数已经实现了函数 arctan？或者是否有替代功能来计算加速度计的角度？我需要对角度进行完整的 3 轴校准。

编辑：我希望避免一个充满预先计算值的表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T11:29:18.540

以下代码使用[有理近似值](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6375931&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel5%2F79%2F6375903%2F06375931.pdf%3Farnumber%3D6375931)将反正切归一化为 [0 1) 区间（您可以将结果乘以 Pi/2 以获得真正的反正切）

normalized_atan(x) ~ (bx + x^2) / (1 + 2 bx + x^2)

其中 b = 0.596227

最大误差为 0.1620º

```
#include <stdint.h>
#include <math.h>

// Approximates atan(x) normalized to the [-1,1] range
// with a maximum error of 0.1620 degrees.

float normalized_atan( float x )
{
    static const uint32_t sign_mask = 0x80000000;
    static const float b = 0.596227f;

    // Extract the sign bit
    uint32_t ux_s  = sign_mask & (uint32_t &)x;

    // Calculate the arctangent in the first quadrant
    float bx_a = ::fabs( b * x );
    float num = bx_a + x * x;
    float atan_1q = num / ( 1.f + bx_a + num );

    // Restore the sign bit
    uint32_t atan_2q = ux_s | (uint32_t &)atan_1q;
    return (float &)atan_2q;
}

// Approximates atan2(y, x) normalized to the [0,4) range
// with a maximum error of 0.1620 degrees

float normalized_atan2( float y, float x )
{
    static const uint32_t sign_mask = 0x80000000;
    static const float b = 0.596227f;

    // Extract the sign bits
    uint32_t ux_s  = sign_mask & (uint32_t &)x;
    uint32_t uy_s  = sign_mask & (uint32_t &)y;

    // Determine the quadrant offset
    float q = (float)( ( ~ux_s & uy_s ) >> 29 | ux_s >> 30 ); 

    // Calculate the arctangent in the first quadrant
    float bxy_a = ::fabs( b * x * y );
    float num = bxy_a + y * y;
    float atan_1q =  num / ( x * x + bxy_a + num );

    // Translate it to the proper quadrant
    uint32_t uatan_2q = (ux_s ^ uy_s) | (uint32_t &)atan_1q;
    return q + (float &)uatan_2q;
} 
```

如果您需要更高的精度，可以使用三阶有理函数：

normalized_atan(x) ~ ( cx + x^2 + x^3) / ( 1 + (c + 1) x + (c + 1) x^2 + x^3)

其中 c = (1 + sqrt(17)) / 8

最大近似误差为 0.00811º

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T08:51:03.590

自己实现也不是很困难`arctan2`。转换`arctan2`为`arctan`使用[此](http://en.wikipedia.org/wiki/Atan2#Definition)公式。然后您可以`arctan`使用这个[无限级数](http://en.wikipedia.org/wiki/Inverse_trigonometric_functions#Infinite_series)进行计算。如果你对这个无限级数的足够数量的项求和，你将非常接近库函数的`arctan2`作用。

这是一个类似[的实现`exp()`](https://stackoverflow.com/a/9782325/457237)，您可以将其用作参考。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T11:25:43.140

[这里](http://www.opensource.apple.com/source/Libm/Libm-315/Source/Intel/atan.c)有一个开源的 atan 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:33:52.620

数学函数的实际实现（或 HWFPU 的存根，如果存在）应该在 libm 中。使用 GCC，这是通过传递`-lm`给编译器来指示的，但我不知道它是如何使用您的特定工具完成的。

# javascript - 如何让 Acensor jQuery 插件为每个部分使用自定义 ID？

> ID：11930596
> 
> 赞同：0
> 
> 时间：2012-08-13T08:26:15.477
> 
> 标签：javascript, jquery, url, plugins

我正在使用[Ascensor jQuery 插件](http://kirkas.ch/ascensor/)，我需要用我自己的替换默认的 id 命名系统 ( `#house0`, `#house1`, `#house2`)。

例如，不是`#house0`，`#house1`而是`#home`等`#contact`。

我的想法围绕着使用带有我的名字的数组，然后替换默认值。有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:34:27.340

根据[Acensor 文档的第 4 页](http://kirkas.ch/ascensor/#house4)`AscensorName`，您可以在调用时传递一个配置参数`ascensor()`，这将定义用于其类和 id 的名称。

所以，我猜你会这样做：

```
$('#home').ascensor({
    AscensorName:'home'
}); 
```

虽然我没有使用 Ascensor 的经验，所以我可能完全错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:17:39.690

在您的 ascensor 设置中，在参数 AscensorFloorName 下，输入您的楼层名称除以空格，然后输入管道。

如：

```
$('#ascensorBuilding')
    .ascensor({
    AscensorName: 'ascensor',
    ChildType: 'section',
    AscensorFloorName: 'Home | Implementation | HTML | Jquery | CSS | Smartphone | Credits',
    Time: 1000,
    WindowsOn: 1,
    Direction: 'chocolate',
    AscensorMap: '2|1 & 2|2 & 3|2 & 2|3 & 2|4 & 1|4 & 2|5',
    Easing: 'easeInOutQuad',
    KeyNavigation: true,
    Queued: false,

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T16:15:27.817

```
i = {
            AscensorName: "page",
            AscensorFloorName: null, 
```

在插件中找到这个 Null 把你想要的

# html - div 元素中的文本高于 Firefox 中水平对齐的 span 元素

> ID：11930598
> 
> 赞同：2
> 
> 时间：2012-08-13T08:26:25.323
> 
> 标签：html, css

我正在编写一个 Web 应用程序，其中支持工单显示为左侧的工单 ID 作为静态文本，其余字段（描述、严重性、持续时间、状态、报告者）在右侧显示为固定的滚动文本大小视口。

我从一个`<span>`包含票证 ID 的视口开始，其中包含一个包含剩余字段`<div>`的第二个视口，以及一个动画属性（在示例中由 表示）。这在 Chrome 和 Safari 中运行良好，但滚动文本高于 Firefox 中的静态文本（我不能使用 Internet Explorer，因为它不支持网络套接字；我还没有尝试过 Opera）。`<span>``left``#attempt1`

我尝试用`<div>`另一个`<span>`（由 表示`#attempt2`）替换视口，但随后文本重叠，因为`overflow:hidden`样式被忽略。只是为了看看发生了什么，我还将`display:inline-block`样式添加到替换`<span>`（由 表示`#attempt3`）中，它的行为与原始`<div>`.

我创建了一个显示此行为的简化示例，其中滚动文本元素具有硬编码`left`属性；请看这个 jsfiddle [http://jsfiddle.net/uLAm6/](http://jsfiddle.net/uLAm6/)。

![第一次尝试，滚动文本高于静态文本](../Images/2e249f12fe817acbcd72e4e87fd651c5.png)

![第二次尝试，滚动文本与静态文本重叠](../Images/18ffd79120790ee06b2c46432a7eebf9.png)

任何人都可以 (i) 解释为什么 Firefox 显示凸起的文本，并且 (ii) 提出一种方法，使我的示例中的任何尝试都像在 Chrome 中那样工作吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:59:38.363

每个浏览器的呈现方式都不同，这就是我们[重置](http://html5boilerplate.com/)它的原因。在您的情况下，有 2 或 3 个因素会影响元素错位。**SPAN**是一个`inline`元素，因此默认对齐是`baseline`为此定义的垂直对齐：顶部。像这样写：

```
.static,.viewport
{
    vertical-align:top;
}
body{
    line-height:1;
} 
```

检查更多[http://jsfiddle.net/uLAm6/6/](http://jsfiddle.net/uLAm6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:02:07.863

[请参阅 Working DEMO](http://codebins.com/bin/4ldqp8g) 对于第一个选项，我们不能将 div 作为显示内联块。因为它将仅与 div 元素内联。

HTML

```
<html>
  <body>
    <div id='attempt1'>
      <span class='static'>
        This text is static
      </span>
      <div class='viewport'>
        <span class='animated'>
          This text is raised in Firefox
        </span>
      </div>
    </div>
    <div id='attempt2'>
      <span class='static'>
        This text is static
      </span>
      <span class='viewport'>
        <span class='animated'>
          This text is overlapped in Firefox and Chrome
        </span>
      </span>
    </div>
    <div id='attempt3'>
      <span class='static'>
        This text is static
      </span>
      <span class='viewport'>
        <span class='animated'>
          This text is raised in Firefox
        </span>
      </span>
    </div>
  </body>
</html> 
```

CSS

```
.static
{
  background-color:#ffc0c0;
}

.viewport
{
  background-color:#c0ffc0;
  overflow:hidden;
}

.animated
{
  position:relative;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:36:36.467

我无法解释 (i)，但对于 (ii)，请指定

```
vertical-align: bottom 
```

对于第二个跨度。

顺便说一句，您可以使用

```
<div> 
```

如果您想避免垂直对齐的特殊性，请对这两个区域进行硬编码，并对工单 ID 的宽度进行硬编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:39:51.740

我现在可以回答这个问题，因为我已经经历了足够多的这种情况。`"overflow:hidden;"`Firefox 中存在属性问题（也许您可以称其为错误） 。你看，如果你在 CSS 中`"overflow:hidden"`从你的类中删除属性`"viewport"`，你会得到与 chrome 中相同的样式。

问题在[此处列出](http://www.impressivewebs.com/overflow-hidden-problem/)

# magento - 发票PDF多次显示税金

> ID：11930605
> 
> 赞同：0
> 
> 时间：2012-08-13T08:27:16.073
> 
> 标签：magento, pdf, invoice

（法师 1.6.2.0）

因为我想打印发票（pdf），所以它会在产品列表中多次显示税款（没关系），并且在运输成本之后。

总共显示了 4 次，其中 2 次是多余的，我想摆脱它们。什么类生成此 PDF，我在哪些地方更改其显示税收的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T20:31:06.690

在 Magento 中，运费税显示两次时存在错误。您可以在 /public_html/app/code/core/Mage/Sales/Model/Order/Pdf/Abstract.php （第 588 行 - magento 1.8）中修复此问题

```
 if ($total->canDisplay()) {
            $total->setFontSize(10);
                 // duplicate tax fix
                $duplicates = array_map('unserialize', array_unique(array_map('serialize', $total->getTotalsForDisplay())));
                foreach ($duplicates as $totalData) {
                $lineBlock['lines'][] = array( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:20:58.007

我想，已启用完整的税收摘要，并且您可能不需要覆盖任何类来删除 2 个冗余行。

对于实验，您可以执行以下操作：在管理区域中转到系统 -> 配置 -> 税务

现在在“订单、发票、Creditmemos 显示设置”组中检查“显示完整税收摘要”是否设置为“是”。如果设置为 YES，请将其更改为 NO，保存配置并尝试再次生成 PDF。

与我们分享结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:58:41.913

谢谢 ceckoslab 你的回答让我找到了正确的配置 我已经在 magento 社区帖子上发布了我的配置：http: [//www.magentocommerce.com/boards/viewthread/279846/](http://www.magentocommerce.com/boards/viewthread/279846/) Cheers

# java - 如何在 Eclipse 中设置 log4j.properties？

> ID：11930606
> 
> 赞同：6
> 
> 时间：2012-08-13T08:27:19.163
> 
> 标签：java, log4j, jms, appender

我正在尝试运行[此示例](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)，但我在配置方面遇到了一些问题。

我复制了`log4j-jms.properties`，，，`jndi.properties``Log4jJMSAppenderExample.java`

```
ProjectJMS
|
\_ src
|   \_ Log4jJMSAppenderExample.java
|   \_ jndi.propeties
\_ log4j-jms.properties 
```

并`activemq`在我的控制台中运行。

当我运行我的示例时，我得到了

```
log4j:WARN No appenders could be found for logger (org.apache.activemq.transport.WireFormatNegotiator).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.`PropertyConfigurator.configure("log4j-jms.properties");` 
```

所以我加了

```
PropertyConfigurator.configure("log4j-jms.properties"); 
```

现在我可以在 Eclipse 控制台中看到日志，但仍然有这个警告

```
log4j:WARN No appenders could be found for logger (org.apache.activemq.transport.WireFormatNegotiator).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
2012-08-13 10:21:44,741 INFO  Log4jJMSAppenderExample - Test log
Received log [INFO]: Test log 
```

在控制台中`activemq`我得到了

```
 WARN | Transport Connection to: tcp://127.0.0.1:2005 failed: java.net.SocketException: Connection reset 
```

为什么我会收到这些警告？

1.  我的进口错了吗？

    ```
    import javax.jms.Connection;
    import javax.jms.Message;
    import javax.jms.MessageConsumer;
    import javax.jms.MessageListener;
    import javax.jms.Session;

    import org.apache.activemq.ActiveMQConnectionFactory;
    import org.apache.activemq.command.ActiveMQObjectMessage;
    import org.apache.log4j.Logger;
    import org.apache.log4j.PropertyConfigurator;
    import org.apache.log4j.spi.LoggingEvent; 
    ```

2.  我的文件放错地方了吗？

3.  如何在 Eclipse 中设置配置文件？不使用`PropertyConfigurator.configure("log4j-jms.properties");`? 在我遵循的示例中没有这样的行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T08:35:05.817

您`log4j.properties`应该驻留在`src`文件夹中。这样，Log4J 将自动配置自己，而无需您编写代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:59:39.720

1.  没有什么关于进口的；

2.  这与文件位置无关，因为您看到此消息“log4j:WARN No appenders could be found for logger...”，因此请检查您的 log4j 配置文件的内容。这是一个演示：

    log4j.rootLogger=INFO, myConsoleAppender log4j.appender.myConsoleAppender=org.apache.log4j.ConsoleAppender log4j.appender.myConsoleAppender.layout=org.apache.log4j.PatternLayout log4j.appender.myConsoleAppender.layout.ConversionPattern=%-4r [% t] %-5p %c %x - %m%n

3.  默认的 log4j 配置文件是“log4j.properties”，正如有人所说，它应该放在`src`文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:41:22.160

根据你的项目结构，没有log4j-jms.properties。有log4j.properties。所以改变你的 log4j 属性文件名。

# css - 使用 CSS3 旋转按钮并将其应用于绝对正确的位置不起作用

> ID：11930610
> 
> 赞同：0
> 
> 时间：2012-08-13T08:27:28.860
> 
> 标签：css, rotation, position, absolute

我试图将一个按钮（带有）CSS3 样式（渐变）旋转 90 度并将其应用到绝对正确的位置：0px 位置。那个按钮是“关于我们”。

好像有2个问题。首先是按钮元素并没有一直向右（就像我想要的那样），而且似乎问题在于 CSS3 旋转仍然认为 150px 宽度。如果我禁用旋转，则元素会完美地与右侧屏幕对齐，不会留下任何空间。

我还发现在 Google Chrome 中，当我将鼠标悬停在“Kaj točno delam”按钮上时，它没有正确应用渐变 - 这意味着在渐变开始之前按钮上有 1px（或 2）的黑色空间（从左到对） - 但是，当处于正常（水平）模式或向右转动（当我测试时）时，这不会发生。这也很奇怪，因为在使用 Chrome 开发人员工具来移动元素时，它并没有显示得那么大：悬停。

使用 Internet Explorer 时，“关于我们”的垂直按钮仅在将其按在顶部时才有效（其他任何地方都没有）。

所有这些问题都是因为 CSS3/HTML 错误而发生的吗？

在不使用图像的情况下，有没有更好的解决方案？- 也许使用 jQuery 或其他东西？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:10:51.173

如果旋转元素，宽度保持不变。你需要像这样计算你的正确位置：

```
-(width/2-height/2) = -(150/2-27/2) = -61,5 
```

所以你需要`right: -61,5px;` 代替`right: 0;`

# qt - 如何将任何类型的文件读取为二进制值？

> ID：11930612
> 
> 赞同：2
> 
> 时间：2012-08-13T08:27:31.830
> 
> 标签：qt

如果我想从文件中获取二进制值，无论它们具有哪种格式，我该怎么做？我试过这段代码，但它只能逐行读取文本文件，仅此而已。

```
QFile file(QFileDialog::getOpenFileName (this, tr("Open File"),
                                         "",tr("")));
if (!file.open(QIODevice::ReadOnly ))
        return ;
int size = file.size();
qDebug()<<size;
while (!file.atEnd()) {
      QByteArray line = file.readLine();
      qDebug()<<line; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:01:05.053

分配一个缓冲区来读取数据并使用 QFile::read 函数。例如：

```
qint64 bufSize = 1024;
char *buf = new char[bufSize];
qint64 dataSize;
while (!file.atEnd()) {
    dataSize = file.read(buf, bufSize);
    /* process data */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:39:28.283

您不仅可以读取 char 数组，还可以读取其他类型。例如从文件中读取结构：

```
struct Foo
{
  int bar;
  long foobar;
}
//...
Foo foo1;
file.read(foo1, sizeof(Foo)); 
```

# visual-studio - VS 2010 中的每个缩进都有虚线

> ID：11930623
> 
> 赞同：10
> 
> 时间：2012-08-13T08:28:23.280
> 
> 标签：visual-studio

我在 VS 2010 的 C# 代码中看到虚线。虚线出现在每个缩进中。这真的让我很困扰。我必须输入一些快捷键，但我无法将其还原。

我怎样才能禁用它？虚线到底有什么用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T08:31:13.120

“虚线”是编辑器向您展示缩进级别开始位置的方式的一部分。这是一个非常有用的功能，因为它允许您快速扫描较长的代码段以查看该代码属于哪个逻辑分支。

改变这一点：

编辑->高级->查看空白 (CTRL+E,S)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:31:08.707

听起来像“查看空白”已打开。在 VS2010 下，您可以在以下位置找到它：

编辑->高级->查看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:30:58.143

您可以使用编辑->高级->查看空白从主菜单禁用和启用它。它只显示解决方案中的所有空白。这意味着所有选项卡也将由箭头绘制

# android - 将 KML 文件发送到 android 模拟器时出现蓝屏

> ID：11930624
> 
> 赞同：0
> 
> 时间：2012-08-13T08:28:24.403
> 
> 标签：android, mapping, location, kml, osmdroid

我正在开发一个 android 地图应用程序，使用 OSMDROID API，我需要一次获取用户的位置并将地图居中在该位置，我注册当前活动以收听位置更新，在收到第一个位置后，我取消注册听众，代码是

```
//to regiter to locationchanges
locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 3, this); 
//to unregister to updates
locMgr.removeUpdates(this); 
```

当我发送一个位置时，代码工作得很好，但是如果将 KML 文件发送到模拟器，我会得到一个蓝屏，如果我按下后退按钮并再次输入相同的活动，我会发现地图以位置为中心发送在 KML 文件中。问题是为什么我会出现这个蓝屏，如果我在真正的物理手机中测试应用程序会不会出现这种情况？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:43:40.930

如果您从 DDMS 中的 KML 文件发送 gps 修复，它会连续发送 lat\lon util KML 文件结尾（如果您不控制）。请确保如果您在一秒钟内获得更多 gps 修复，您是如何处理的。可能是蓝屏来了无效的纬度/经度。它在地图上显示大海。

# jquery - 一页中的多个 Uploadifive 不起作用

> ID：11930628
> 
> 赞同：0
> 
> 时间：2012-08-13T08:28:38.200
> 
> 标签：jquery

您好，我在堆栈中抓住机会，因为uploadify 论坛响应速度不快且充满垃圾邮件，

我正在使用带有拖放功能的uploadifive，这很棒，但是一页中的多个上传按钮不起作用。下面是我的代码：

HTML

```
<input type="file" name="file_upload_1" id="file_upload_1"/>
<input type="file" name="file_upload_2" id="file_upload_2"/> 
```

JS

```
$('#file_upload_1').uploadifive({
    'auto'         : true,
    'method'       : 'post',
    'queueID'      : 'queue',
    'fileType'     : ['text/x-comma-separated-values', 'text/comma-separated-values', 'application/octet-stream', 'application/vnd.ms-excel', 'application/x-csv', 'text/x-csv', 'text/csv', 'application/csv', 'application/excel', 'application/vnd.msexcel','application/force-download'],
    'uploadScript' : 'upload.php',
    'onUploadComplete' : function(file, data) {
        console.log(data);
        }
    });
 $('#file_upload_2').uploadifive({
    'auto'         : true,
    'method'       : 'post',
    'queueID'      : 'queue',
    'fileType'     : ['text/x-comma-separated-values', 'text/comma-separated-values', 'application/octet-stream', 'application/vnd.ms-excel', 'application/x-csv', 'text/x-csv', 'text/csv', 'application/csv', 'application/excel', 'application/vnd.msexcel','application/force-download'],
    'uploadScript' : 'upload.php',
    'onUploadComplete' : function(file, data) {
        console.log(data);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:36:05.317

您已将两个参数传递给 onUploadComplete 函数。

```
'onUploadComplete' : function(file, data) {
   console.log(data);
 } 
```

只有一个参数可用“文件”，而不是数据。

相当烦人的是uploadifive中似乎有一个错误。

返回的唯一事件功能`data`是：

```
'onUploadSuccess' : function(file, data, response) {
            alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
        } 
```

但是，这还没有包含在 js 文件中。

发布支持请求也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:55:28.620

您必须在每个队列上设置不同的 queueID。他们试图使用与队列相同的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T13:30:59.397

为每个设置不同的“queueID”或根本不设置“queueID”。

# actionscript-3 - 在鼠标按下时动态增加按钮的命中框，并在鼠标按下时恢复？

> ID：11930633
> 
> 赞同：1
> 
> 时间：2012-08-13T08:28:46.620
> 
> 标签：actionscript-3, flash, actionscript

我正在努力做到这一点，所以当你按下按钮时，按钮的命中框会变大，所以如果用户将鼠标滑离已按下按钮的边缘，它需要它在它没有之前移动得更远更长的点击次数。

这是在触摸屏设备上使用的，用户会去点击，但在释放之前滑动手指，这不会完成点击事件。

我正在使用标准的 Flash 按钮 (flash.display.SimpleButton)，因此理想情况下想要一些可以与它们一起使用的东西 - 我一直将 hitTestState 作为解决方案，但我尝试的任何方法都不起作用。

假设按钮的大小开始为 50、50

当用户触发 mouse_down 事件时，我希望它变为 100 x 100，以 hitbox 为中心（不是实际的按钮，只是点击） - 然后在点击或释放时，它会淡回到 50， 50 大小。

有任何想法吗？

谢谢约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:49:20.513

用影片剪辑替换您的按钮。有很多方法可以做到这一点，但这里有一个有效的结构。

上方和上方框架中较小的命中区域：

![上架](../Images/55dd8690912236a3980ae093897ea5fd.png)

在向下框架中具有更大的区域：

![下架](../Images/ca8f5449d6ee33923e98b643ebafb8cb.png)

（很明显，你会让命中区域的 alpha 为零，但我已经给它上色了，这样你就可以看到发生了什么。）

那么你所需要的只是一段非常简单的代码。给定舞台上名为 MyButton 的实例：

```
import flash.display.MovieClip;
import flash.events.MouseEvent;

var MyButton:MovieClip;
MyButton.buttonMode = MyButton.useHandCursor = true;

function handleMouseOver($e:MouseEvent):void
{
    MyButton.gotoAndStop("Over");
}

function handleMouseDown($e:MouseEvent):void
{
    MyButton.gotoAndStop("Down");
}

function handleMouseUp($e:MouseEvent):void
{
    MyButton.gotoAndStop("Up");
}

MyButton.addEventListener(MouseEvent.MOUSE_OVER, handleMouseOver);
MyButton.addEventListener(MouseEvent.MOUSE_DOWN, handleMouseDown);
MyButton.addEventListener(MouseEvent.MOUSE_UP, handleMouseUp); 
```

如果您想多次重复使用它，可以轻松地将其重构为您的 MovieClips 可以扩展的类。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:03:11.813

好吧，放弃 hitbox 并选择`hitTestPoint`.

所以你可以添加这个：

```
var hitObject:Sprite = new Sprite();
//Create a new Sprite
hitObject.graphics.beginFill(0);
hitObject.graphics.drawRect(0,0,50,50);
hitObject.endFill();
//Draw a rectangle on the sprite, this is your hitbox

hitObject.alpha = 0;
//Make it invisible
hitObject.x = button.x;
hitObject.y = button.y;

addChild(hitObject);

addEventListener(MouseEvent.MOUSE_DOWN, mDownEvent);
addEventListener(Event.ENTER_FRAME, enterFrameEvent);

function mDownEvent(e:MouseEvent){
     hitObject.scaleX = hitObject.scaleY = 2;
     //When the mouse is down the object gets 2 times as big (100 pixels)

     if(hitObject.hitTestPoint(mouseX,mouseY, true)){
         //You have clicked your hitbox
     }
}

function enterFrameEvent(e:Event){
     if(hitObject.scaleX > 1){
           hitObject.scaleX -= 0.1;
           hitObject.scaleY -= 0.1;
           //Decrease the hitbox his size when you have pressed the mouse, 0.1 is the speed the hitbox gets smaller
     }
} 
```

# php - 通过命令行将 *（mp3、m4p 等）转换为 OGG 以实现 HTML5 兼容性

> ID：11930636
> 
> 赞同：2
> 
> 时间：2012-08-13T08:29:14.430
> 
> 标签：php, windows, command-line, mp3, ogg

使用 PHP 即时将 MP3 转换为 OGG 有哪些选择？我认为唯一的方法是通过带有执行语句的命令行。这是真的？如果是这样，我最好使用哪些转换器（和相关命令）？

我试过了：

oggenc2.exe 但程序告诉我传递的 MP3 不是有效的文件类型

ffmpeg.exe 但无法弄清楚如何从 mp3 转到 ogg（虽然找到了如何从 ogg 转到 mp3）

[通过 php 将 mp3 转换为 ogg](https://stackoverflow.com/questions/5105134/convert-mp3-to-ogg-via-php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T08:38:14.947

你看的不是很远...

**exec("/usr/bin/ffmpeg -i infile.mp3 -acodec libvorbis outfile.ogg");**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:16:01.283

现在建议（见下面的注释）使用 avconv 来转换音频和视频文件而不是 ffmpeg。

```
avconv -i in.mp3 -ar 16000 out.ogg 
```

其中 16000 是采样率。您可以使用以下命令检查源文件的采样率：

```
file in.mp3 
```

注意：我在使用 ffmpeg 的 Ubuntu 机器上收到此警告：此程序已弃用。此程序仅用于兼容性，将在未来的版本中删除。请改用 avconv。

# sql - 组 SQL 中的最新条目

> ID：11930637
> 
> 赞同：2
> 
> 时间：2012-08-13T08:29:17.003
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表格，我们可以在其中有多个条目的相同票号。我想根据 Initiated on 列检索最近的票号（相同票号）。

```
Ticket  VendorTicket  InitiatedOn              Comments
198165  test          2012-08-10 16:31:33.707  test
199485  sagar         2012-08-11 12:36:25.720  sagar
199485  sagar1        2012-08-11 14:36:25.720  sagar1
199478  kishor        2012-08-11 12:37:21.923  kishor 
```

我已经在存储过程中用 T-SQL 编写了这个查询它给了我错误说`xObj = {"Incorrect syntax near '.'."}`

我的 T-SQL

```
`@SQL='Select ''<a href="javascript:editTicketByIDAction('' + CONVERT(VarChar(Max), Ticket) + '')">'' + CONVERT(VarChar(Max),Ticket) + ''</a>'' t1.Ticket,t1.VendorTicket[Vendor Ticket],t1.Comments 
From VendorTickets t1 
WHERE NotifyOn <= GetDate() And NotifyOn Is Not Null AND 
NOT EXISTS
(SELECT * FROM VendorTickets t2 
WHERE t1.Ticket = t2.Ticket AND t1.InitiatedOn < t2.InitiatedOn)'` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:35:36.433

此问题的一般解决方案（适用于任何数据库）如下：

```
SELECT * FROM [my_table] t1
WHERE NOT EXISTS (
  SELECT * FROM [my_table] t2
  WHERE t1.Ticket = t2.Ticket
  AND t1.InitiatedOn < t2.InitiatedOn
) 
```

内容为：从 my_table 获取所有值，其中没有具有相同`Ticket`ID 和更新日期的票证。

笔记：

*   如果有两张“最近”的票具有相同的`InitiatedOn`价值，这可能会返回重复。
*   确保在`Ticket`和`InitiatedOn`列上都有适当的索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:34:20.720

试试这个：

这将提供每个组的最新记录

```
select * from  <table> t join
(select Ticket,max(InitiatedOn) as InitiatedOn
from <table>
group by Ticket)a
on t.Ticket=a.Ticket
and t.InitiatedOn=a.InitiatedOn 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T08:36:17.997

```
SELECT   Ticket,
         VendorTicket,
         InitiatedOn,
         Comments
FROM     (
         SELECT   Ticket,
                  VendorTicket,
                  InitiatedOn,
                  Comments, 
                  ROW_NUMBER() OVER (PARTITION BY Ticket ORDER BY InitiatedOn DESC) AS Row
         FROM     Table
         ) AS Q
WHERE    Q.Row = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:34:56.520

如果`row_number() over()`你有空。

```
select T.Ticket,
       T.VendorTicket,
       T.InitiatedOn,
       T.Comments
from (
     select Ticket,
            VendorTicket,
            InitiatedOn,
            Comments,
            row_number() over(partition by Ticket order by InitiatedOn desc) as rn
     from YourTable
     ) T
where T.rn = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T08:36:13.040

```
Select t1.* 
from tickets t1 
left join tickets t2 on (t1.ticket = t2.ticket and t2.initiatedon > t1.initiatedon)
where t2.ticket is null; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-13T08:34:14.203

```
select * from table where ticket=199485 order by InitiatedOn desc limit 1; 
```

# javascript - 如何在这个 Jsfiddle 中使用 JQuery 访问我的 JSON 对象的属性？

> ID：11930638
> 
> 赞同：0
> 
> 时间：2012-08-13T08:29:16.387
> 
> 标签：javascript, jquery, json, object, jsfiddle

是的，我一直在模糊地尝试使用[这个问题示例](https://stackoverflow.com/questions/7194408/how-can-i-use-the-jsfiddle-echo-feature-with-jquery)来用 jsfiddle 测试一些东西。我正在寻找构建一个 JQuery 可排序小部件，但首先我需要了解如何访问我正在创建的对象中的属性 - 在经历了很多混乱之后，现在画了一点空白！

[现场小提琴！](http://jsfiddle.net/LTKRR/7/)

```
$('#ParentCategoryId').change(function() {
    var data =
{
"categories": {
    "category1": {
        "Name": "Maps",
        "Id": 3,
        "orderInList": 1
    },
    "category2": {
        "Name": "Books",
        "Id": 2,
        "orderInList": 2
    }
}
};

$.ajax({
    url: 'http://jsfiddle.net/echo/jsonp/',
    dataType: 'jsonp',
    data: data,
    success: function(data) {
        show_response(data);
    },
    type: 'GET'
});
});            

function show_response(data) {
    $.each(data, function()
    {        
        alert(/**How could I access say, category1's Name property in here?**/);
    }; 
```

**编辑 1**

抱歉，没有得到完整的 Jsfiddle 链接，保存并编辑它。

**编辑 2**

使用 JsonLint 创建有效的 Json。现在我可以让警报执行，但我不确定如何访问其中的属性！

**编辑 3**

将 Jsfiddle 链接更新到最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:32:18.407

您需要将 JSON 字符串解析为一个对象：

```
function show_response(data) {
    data = $.parseJSON(data);
    $.each(data, function(position, value)
    {        
       alert(value.name);
    }; 
```

编辑：你的小提琴有语法错误。没有创建 JSON，因为 jQuery 中没有 toJSON 方法。为了使用 each 迭代器读取您的类别，它们需要是一个数组，例如：

```
categories = [name: "Book", value: ...], [name: "Movie", value: ...] 
```

# ios - JSON 倒退 NSJSONSerializaton

> ID：11930643
> 
> 赞同：0
> 
> 时间：2012-08-13T08:29:34.497
> 
> 标签：ios, json

我正在创建一个看起来像这样的 JSON 字符串：

```
{ "request_type":"send_string", "security_level":0, "device_type":"ios", "blob":{"string":"blah"}"} 
```

这就是我所做的：

```
NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"send_string",@"request_type",
                             [NSNumber numberWithInt:0],@"security_level",
                             @"ios",@"device_type",
                             //No Email Provided, This is just for testing
                             blobData,@"blob",
                             nil];
NSData *JSONRequestData = [NSJSONSerialization dataWithJSONObject:requestData options:kNilOptions error:&error]; 
```

当我用 NSLog 打印出来时，我得到

```
{"security_level":"0","request_type":"send_string","device_type":"ios","blob":{"string":"hello"}} 
```

它出现故障......什么给了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T08:31:08.117

字典不是按其性质排序的。你不能指望这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:53:36.803

默认情况下，字典按照它们的键（字母顺序）排序。

# javascript - 对象和数组添加

> ID：11930644
> 
> 赞同：23
> 
> 时间：2012-08-13T08:29:38.720
> 
> 标签：javascript

谁能向我解释如何评估以下结果？

```
{} + {} // NaN
[] + {} // "[object Object]"
{} + [] // 0
[] + [] // "" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T08:40:12.630

这是对此的完整解释，[请检查](http://www.2ality.com/2012/01/object-plus-object.html)。

***请注意*** `{} + {}`，`NaN`如果您直接在控制台中执行它，因为`{}`它被认为是一个块而不是一个对象。

`({}+{})`应该`'[object Object][object Object]'`

***真正的结果是***：

```
console.log({}+{}) // '[object Object][object Object]'
console.log([]+{}) // '[object Object]'
console.log({}+[]) // '[object Object]'
console.log([]+[]) // '' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T08:40:52.477

添加带有任何对象及其字符串表示的数组总是会导致连接

例如：

```
[1] + [2] // is merged to "12", so [] + [] is an empty string "" 
```

你的第二个例子也一样

```
['test'] + {} // "test[object Object]" 
```

所以一个空数组加上一个空对象只会返回一个`[object Object]`

* * *

添加到空对象也很容易：

评估一个简单的空对象：`{} // results in undefined`

添加两个`undefined`值是`NaN`因为您无法对它们进行添加。

**注意**：返回值取决于 JavaScript 的实现（即在哪个浏览器或环境中）

另外：[**JavaScript 中的 {} + {} 是什么？**](http://www.2ality.com/2012/01/object-plus-object.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-25T18:38:56.330

对于`{}+{}`，第一个`{}`被解释为一个块，第二个`{}`被解释为一个空对象，而 the`+`被解释为一[元加运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_plus_())，所以`{}+{}`等价于：

```
{
    //Empty block, does nothing
}

+{}    //Unary + applied to empty object, which is NaN 
```

类似地，在 中`{}+[]`，`{}`被解释为一个块，`+[]`并被解释为应用于一个空数组的一元加运算符，它给出`0`.

对于`[]+{}`，`+`被解释为字符串连接运算符，因此两个操作数都转换为字符串，在这种情况下，`[]`转换为空字符串 ( `""`) 并`{}`转换为`"[object Object]"`，然后将两者连接在一起给出`""+"[object Object]"`is `"[object Object]"`。

同样，对于`[]+[]`，两个数组都被转换为空字符串，`""+""`即为`""`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:44:41.397

```
{} + {} 
```

您不能对两个对象进行添加或任何操作

```
[] + {} // "[object Object]" 
```

它只是一个字符串和一个对象之间的连接，你有相同的结果`alert({});`

```
{} + [] // 0 
```

相同的

```
[] + [] // "" 
```

两个空字符串的连接 = 空字符串。

# teradata - 在 Teradata 中复制状态消息

> ID：11930646
> 
> 赞同：0
> 
> 时间：2012-08-13T08:29:40.880
> 
> 标签：teradata

是否可以在 teradata 中复制状态消息？（我不想每次都输入它们，例如当我尝试用谷歌搜索错误消息时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:08:53.190

根据您用于查询 Teradata 的工具，将确定这些消息如何暴露给最终用户：

*   BTEQ 和 Teradata 加载/卸载实用程序日志文件将包含错误代码和通过 CLI 返回的错误消息。
*   SQL 助手应该在 SQL 历史文件中捕获错误代码和可能的错误消息。这也存储在 Access 数据库中，如果您的系统上安装了 Microsoft Access，您可以从 SQL 助手单独访问该数据库。
*   AtanaSuite QueryTool 在 SQL 历史记录中捕获错误代码和错误消息。它存储在一个平面文件中，您可以使用文本编辑器单独打开该文件。
*   存储过程 - 无法在存储过程中捕获确切的错误消息，但您可以获取错误代码并将其记录到错误处理程序中的日志表中。

如果我没记错的话，有一个名为 DBC.ErrorText 的表还包含您可以查询的标记化错误消息。最后，Teradata 手册有一整本书专门介绍消息，其中包括因错误返回的 Teradata Database 消息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T12:55:27.110

按 PF11 让消息显示在弹出窗口中 -> 然后 CTRL-C 复制 - 然后粘贴到记事本 - 您将看到弹出窗口的全部内容，如下所示：

* * *

## Teradata SQL 助手

## [3807] 对象“DBC.ErrorText”不存在。

## 好的

然后，您可以从中复制相关的错误消息：[3807] 对象“DBC.ErrorText”不存在。

这是我最初状态栏中的消息。

# iphone - ios 5 中关于电子邮件地址的 Twitter sdk

> ID：11930648
> 
> 赞同：-4
> 
> 时间：2012-08-13T08:29:51.647
> 
> 标签：iphone, ios, twitter, twitter-oauth

我在 ios 5 中使用了 Twitter sdk。

我想在身份验证后获取用户电子邮件地址。

这个怎么做，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:43:33.833

Twitter API 不提供用户电子邮件地址。

# c# - 未经授权为用户保存信息

> ID：11930673
> 
> 赞同：0
> 
> 时间：2012-08-13T08:31:37.893
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我们的网站具有类似购物车商店的功能。用户可以将门票添加到购物车，但用户可以在未经授权的情况下执行此操作。当用户将票添加到购物车时，在数据库中创建带有服务信息的订单，但`UserId`为空。当用户点击`Pay`时，必须授权。购物车仅存在 15 分钟。如果用户关闭站点，并在 5 分钟内再次输入，则站点必须显示该用户的购物车。问题：如何确定和跟踪非授权用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:38:04.307

将他们授权为来宾用户，并提供临时名称 (GUID)。使用将生成 cookie 的默认 asp.net 设置，asp.net 将使用该 cookie 进行用户识别，您可以使用它将访客绑定到购物车内容，并在付款时重新验证它们。

```
FormsAuthentication.SetAuthCookie(Guid.NewGuid(), true) 
```

# javascript - Captivate - html5 导出添加了第一张带有播放按钮的幻灯片

> ID：11930679
> 
> 赞同：1
> 
> 时间：2012-08-13T08:31:55.690
> 
> 标签：javascript, html, adobe-captivate

当我将我的 captivate 6 项目发布到 html5 时，确保自动播放已打开，添加了一张额外的第一张幻灯片，其中仅包含一个播放按钮，就好像您将在未启用自动播放的情况下发布到 swf。

当我检查 .js 文件时，自动播放已启用，一切看起来都很好。

我读到您在发布到 html5 时无法删除此播放按钮。这是正确的吗？因为那将是非常愚蠢的。

还是有人知道某种 .js hack 来否决第一张幻灯片？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:12:38.353

我设法通过将`<body>`index.html 中的标签更改为`<body onLoad="cp.movie.play()">`

# sql - Oracle SQL 无参数异常？

> ID：11930682
> 
> 赞同：1
> 
> 时间：2012-08-13T08:32:11.853
> 
> 标签：sql, oracle, arguments, ora-06550

当没有指定参数时，我想在我的过程中添加一个异常。现在，我正在使用

```
 when OTHERS then
      dbms_output.put_line('Error Occured'); 
```

但我想要一些听起来像的东西

```
 when NO_ARGUMENT then
      dbms_output.put_line('No argument specified'); 
```

我在互联网上搜索并找不到这样的异常。没有参数时，错误代码为 06550。在这种情况下有没有办法添加异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:48:54.403

ORA-06550 错误是一个通用的 PL/SQL 编译错误。您尝试捕获的实际错误是 PLS-00306：调用 XXXXXX 时参数的数量或类型错误。

进行调用并且参数绑定到过程时会发生此错误。因此，您实际上无法在 PL/SQL 过程本身中捕获它，因为它发生在进入您的过程之前。

完整记录的包、过程和函数以及 PL/SQL“存根”的详细文档应该可以减少发生这种情况的机会，并有助于消除这种错误。

# iphone - 使用 GCD 重用 UITableViewCell

> ID：11930687
> 
> 赞同：5
> 
> 时间：2012-08-13T08:32:36.697
> 
> 标签：iphone, ios, uitableview, grand-central-dispatch

我正在使用[Grand Central Dispatch](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)`UITableViewCell`异步加载图像。这很好用，除了在某些边界情况下，单元格被重用，并且前一个块加载了错误的图像。

我当前的代码如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *imagePath = [self imagePathForIndexPath:indexPath];         
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{
        UIImage *image = [UIImage imageWithContentsOfFile:imagePath];

        dispatch_sync(dispatch_get_main_queue(), ^{
            cell.imageView.image = image;
            [cell setNeedsLayout];
        });
    });

    return cell;
} 
```

据我所知，GCD 队列无法停止。那么如何防止这种边境案件呢？还是我应该使用其他东西而不是 GCD 来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:28:52.027

我所做的是`NSOperation`在单元格中添加了一个 ivar。该操作负责获取、加载和创建图像。完成后，它会 ping 单元格。当/如果单元出队时，操作将被取消并在未完成时销毁。中的取消操作测试`-main`。图像传递到单元格后，单元格放弃操作并使用图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:42:30.337

在开始异步请求之前，您可以尝试强制重置图像。

当用户滚动表格时，他可能会在您的异步方法将其更改为正确的图像之前看到旧图像

只需添加这一行：

```
cell.imageView.image = nil; // or a placeHolder image
dispatch_async(queue, ^{
    UIImage *image = [UIImage imageWithContentsOfFile:imagePath];

    dispatch_sync(dispatch_get_main_queue(), ^{
        cell.imageView.image = image;
        [cell setNeedsLayout];
    });
}); 
```

**编辑：**

@hgpc：

> 我不认为这能解决问题。前一个块仍然可以在新块之前设置错误的图像。– hgpc 9 分钟前

你是对的，如果用户快速滚动，这可能是一个问题......

我看到的唯一方法是创建一个具有计数器属性的自定义单元格，在其中存储（以同步方式）每个单元格队列中的操作数，然后在异步方法中检查计数器是否为 == 1 之前更改图像：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (!cell) {
    // MyCustomUITableViewCell has a property counter
            cell = [[[MyCustomUITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
            cell.counter = 0;
        }

        NSString *imagePath = [self imagePathForIndexPath:indexPath];         
        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

        cell.imageView.image = nil; // or a placeHolder image
        cell.counter = cell.counter + 1;
        dispatch_async(queue, ^{
            UIImage *image = [UIImage imageWithContentsOfFile:imagePath];

            dispatch_sync(dispatch_get_main_queue(), ^{
                if (cell.counter == 1){
                    cell.imageView.image = image;
                   [cell setNeedsLayout];
                }
                cell.counter = cell.counter - 1;

            });
        });

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:06:54.853

您可以在启动异步任务之前设置一个单元格标识符，并在更新 UI 之前检查它是否相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:37:18.420

这里有几种可能性。

a) 使用`NSOperationQueue`而不是直接 GDC。
NSOperation 基于 GDC 并启用了许多管理，例如停止线程。
看看苹果的[并发指南](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)。

b) 使用现成的异步图像加载器。
internetz 上有足够多的免费和开源项目。
我个人推荐`AFNetworking`（尤其是`AFNetworking+UIImageView`类别）。

如果你想自己做（研究、知识等），你应该坚持**a)**，但更方便的方法是**b)**。

**更新**
我刚刚注意到，您正在从文件而不是从网络加载图像。
在这种情况下，您应该以不同的方式处理它，并注意以下几点：

*   避免`imageWithContentsOfFile:`而是使用`imageNamed:`. 这是因为`imageNamed:`一旦加载`imageWithContentsOfFile:`而不加载图像就会缓存您的图像。如果您需要使用`imageWithContentsOfFile:`预加载 NSCache 中的所有图像并使用此缓存中的图像填充表。

*   TableView 图像不应太大（尺寸**和**文件大小）。即使是 100x100 像素的视网膜图像也不会超过几个 kb，加载时间绝对不会太长，以至于您需要异步加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T06:22:17.843

当表格不滚动时只加载图像怎么样？问题`cellForRowWithIndexPath:`在于您正在为滚动过去的单元格做很多工作。

除了在单元格出列时加载图像，您可以在`viewDidLoad`（或每当您的数据模型初始化时）执行此操作，然后在`scrollViewDidEndDecelerating:`.

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [self initializeData];
    [self loadVisibleImages];
}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if (scrollView == self.tableView) {
        [self loadVisibleImages];
    }
}

-(void)loadVisibleImages {
    for (NSIndexPath *indexPath in [self.tableview indexPathsForVisibleRows]) {
        dispatch_async(queue, ^{
            NSString *imagePath = [self imagePathForIndexPath:indexPath]; 
            UIImage *image = [UIImage imageWithContentsOfFile:imagePath];        
            dispatch_sync(dispatch_get_main_queue(), ^{
                UITableViewCell *cell = [self tableView:self.tableView cellForRowAtIndexPath:indexPath];
                cell.imageView.image = image;
                [cell setNeedsLayout];
            });
        });
    }
} 
```

# android - 对话框在android中移动？

> ID：11930689
> 
> 赞同：4
> 
> 时间：2012-08-13T08:32:47.650
> 
> 标签：android, dialog, move

我一直在移动对话框。在这里，我发布了我的完整源代码和屏幕截图。为什么我的对话框丢失了一部分。

代码 ：

```
public class MoveDialogBox extends Activity 
{
    Dialog dialog;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                showDialog(1);
            }
        });
    }   
    @Override
    protected Dialog onCreateDialog( int id ) 
    { 
        switch ( id ) 
        {
            case 1:
                AlertDialog.Builder builder = null;
                Context mContext = this;
                LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
                View layout = inflater.inflate(R.layout.info, (ViewGroup) findViewById(R.id.root));
                Button exit = (Button) layout.findViewById(R.id.exit);
                exit.setOnClickListener(new View.OnClickListener() 
                {
                    @Override
                    public void onClick(View v) 
                    {
                        dismissDialog(1);
                    }
                });
                final LinearLayout LL = (LinearLayout) layout.findViewById(R.id.root);
                LL.bringToFront();
                LL.setOnTouchListener(new View.OnTouchListener() 
                {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) 
                    {
                        double X = event.getX();
                        double Y = event.getY();
                        String.valueOf(event.getX() + "x" + String.valueOf(event.getY()));
                        Toast.makeText(getBaseContext(), X + " : " + Y, Toast.LENGTH_SHORT).show();
                        LL.bringToFront();
                        LL.setX((float) X);
                        LL.setY((float) Y);
                        return false;
                    }
                });
                builder = new AlertDialog.Builder(mContext);
                builder.setView(layout);
                dialog = builder.create();
                dialog.setCanceledOnTouchOutside(true);
                break;
        }
        return dialog;
    }
} 
```

XML 代码：info.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/holo_blue_light"
    android:orientation="horizontal" >
    <TextView 
        android:id="@+id/about_Title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_weight="1"
        android:textSize="25dip"
        android:textColor="@android:color/white"
        android:textStyle="bold|italic"
        android:text="Android" />
    <Button
        android:id="@+id/exit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Exit" />    
</LinearLayout> 
```

XML 代码：main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/androidimage" >
    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Open Dialog Box" />
</LinearLayout> 
```

屏幕截图：1
![在此处输入图像描述](../Images/551fe56fcf8a5146a14636ae4535fb0c.png)
屏幕截图：2
![在此处输入图像描述](../Images/7f0d9d8c44c707f6f0a786f38db98d9f.png)
屏幕截图：3
![在此处输入图像描述](../Images/306da718c0a611bf8228160460c05d5d.png)
请帮助一些人如何在整个屏幕中移动对话框。

我在哪里弄错了。怎么解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:58:20.473

您正在移动对话框内的布局，您需要移动对话框本身。

```
WindowManager.LayoutParams layoutParams = dialog.getWindow().getAttributes();
layoutParams.gravity = Gravity.TOP | Gravity.LEFT;
layoutParams.x = youNewX;
layoutParams.y = yourNewY;
dialog.getWindow().setAttributes(layoutParams); 
```

# c# - 排除 OpenFileDialog 中显示的特定文件

> ID：11930691
> 
> 赞同：1
> 
> 时间：2012-08-13T08:32:52.963
> 
> 标签：c#, .net, wpf, openfiledialog

我正在使用 Microsoft.win32.OpenFileDialog 打开 SQLCE 数据库文件 (.sdf)。我添加了以下过滤器 *.sdf，因此它只显示 .sdf 文件，但我还要求它从对话窗口中删除特定的 .sdf 文件。我要删除的数据库的名称是固定的，但我无法控制其他数据库的名称，因为它们是通过应用程序创建的，并且用户可以通过应用程序决定他们想要命名它们的名称。

我想要实现的一个例子是，假设我有以下数据库

数据库1.sdf 数据库2.sdf 数据库3.sdf

我想获取除 database2.sdf 之外的所有内容

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:45:06.453

OFD 很棘手。它是一个通用的文件选择器，旨在“尽可能有用”——用于文件。过滤器只是用户的小帮手。他们不会阻止选择其他文件。

运行画笔或您的应用程序，打开文件选择器。在文件类型组合框中，您可能会看到一些过滤器，实际上对话框只会显示该文件。输入“*”作为文件名，然后按 OK/Enter。几乎可以肯定，现在**无论过滤器如何，**都会看到所有文件。

这种行为适合您使用吗？如果您想从该对话框中隐藏某些文件，我认为不是。如果我是对的，那么 OFD 根本不适合你，你应该编写自己的简单“SDF 数据库选择器”，构建一个 ListView/etc，它只会列出你想要显示的内容。

否则，如果这没问题，那么您可以将 HANDLE（在 .Net 中它们作为 传递`IntPtr`）到窗口，然后检查窗口结构以在其上找到 (IIRC) SysListView 控件，然后与它交谈以删除不需要的元素。所有工作都将由 C++ 或 P/Invoke 完成。如果您真的需要它，我会尝试找到一些链接。给我留个便条。

--
对于初学者，很抱歉输入错误的组件名称。窗口类是`SysListView32`.

首先，浏览一些文章。要小心，因为大多数时候指的是 System.Windows.Forms，而不是 WPF。大多数信息都是正确且相关的，因为在内部，它仍然是同一个组件，只是包装有点不同。

*   [http://www.codeproject.com/Articles/16276/Customizing-OpenFileDialog-in-NET](http://www.codeproject.com/Articles/16276/Customizing-OpenFileDialog-in-NET)及其部分“它是如何完成的？” - 他们会给你一些关于要做什么和如何做的概述。重点拦截HANDLE和`NativeWindow`utility类的操作。
*   [http://www.codeproject.com/Articles/19566/Extend-OpenFileDialog-and-SaveFileDialog-the-easy](http://www.codeproject.com/Articles/19566/Extend-OpenFileDialog-and-SaveFileDialog-the-easy)，我敢打赌你可以从中借用很多可用的样板代码。但是，没有一篇文章提到修改项目列表
*   [http://www.codeproject.com/Articles/33017/Remote-Control-of-Microsoft-FileDialog-Class-OpenF](http://www.codeproject.com/Articles/33017/Remote-Control-of-Microsoft-FileDialog-Class-OpenF)在这里，这个家伙展示了找到名为“SHELLDLL_DefView”的子窗口的代码 - 这是我们想要“破解”的 syslistview "

一旦你成功拦截了打开窗口的动作，并且你得到了SHELLDLL_DefView/SysListView32控件的HANDLE(IntPtr)，你就可以开始玩真正的游戏了。

该控件尽管名称为“SysListView32”，但实际上命名为“ListView”，并且来自几乎与 Windows 本身一样古老的 comctl32.dll。您可以通过向控件发送“原始 winapi 消息”来轻松地动态重新配置控件，但丑陋的是，在 .Net 中没有漂亮的方法可以做到这一点。您必须 P/Invoke 到[SendMessage ，所以也可以在](http://www.pinvoke.net/default.aspx/user32.sendmessage)[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)上阅读有关该功能的信息。它的第一个参数就是您刚刚找到`HWND`的`HANDLE`(IntPtr) (HWND = [H]andle-to-[W]i[ND]ow)。

名为“ListView”的控件可以理解很多不同的消息。该控件是一个窗口，因此它可以理解 WM_xxxx 消息（[W]indow[M]essage_xxx）。并且还理解 blahblahblah，更重要的是，它还以 LVM_xxxx 消息 ([L]ist[V]iew[M]essage_xxxx) 的形式定义了自己的 API，例如[LVM_GETITEM](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950.aspx)。请注意，在 LVM_GETITEM 页面上还有大量其他 LVM_xxx 消息：GETITEMCOUNT、INSERITEM、DELETEITEM 等。LVM_DELETEITEM 是实现目标的关键之一。这是[VB中的一个例子](http://www.vbforums.com/showthread.php?210471-Removing-a-list-view-item-using-SendMessage-API)关于如何删除“第三行中的项目”。一行，因为 ListView 的自然视图是基于网格/行的。类似桌面的显示模式是一个补充，每个项目在逻辑上仍然被认为是在连续的行中，而不是在 XY 网格单元上。好吧，好吧，除了 DESKTOP 和自由形式的图标放置，这也是由 SysListView32 完成的，但那是另一回事了..

这是一组关于 ListViews 的不错的文章：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb774737](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774737(v=vs.85).aspx) (v=vs.85).aspx 请注意，您必须将所有内容都翻译成 C#和 P/Invoke。

本机控件名为 ListView，实际上，[System.Windows.Forms.ListView] 是它的 .Net 包装器！但是，没有很好的方法将该类的实例绑定到预先存在的本机组件实例。该类旨在从头开始创建一个新的本机 ListView 组件。如果您有谷歌搜索的技巧或运气，您可以尝试将此类 ListView 绑定到本机 Listview，然后您将跳过一些 P/Invoke 麻烦，但我认为这并不值得。

手动驱动/修补/hotifxing 控件甚至更复杂一些，例如，您有时可能不得不踢它们以记住它们以在更改后更新屏幕：http: [//www.codeproject.com/Questions/181852/ListView- LVM_DELETEITEM 消息后损坏](http://www.codeproject.com/Questions/181852/ListView-corrupt-after-LVM_DELETEITEM-message). 更重要的是，过滤项目不是一次性的工作。当用户在文件夹树中上下导航时，您必须一次又一次地过滤它们。当用户显示另一个文件夹的一些新内容时，您必须找到一种方法来获得通知。幸运的是，每个使用 LVM 的人都必然会使用与您现在使用的 API 相同的 API。这意味着文件对话框必须向控件发送一系列 LVI_DELETExxx/LVI_INSERTxxx 消息，并且您可能会尝试拦截+检查+过滤掉它们，因此“坏项目”将在放置项目时被即时踢出清单..这是我关于如何“轻松”做到这一点的建议。

我希望这可以帮助您解决问题。总的来说，除非您使用过原生控件和 P/Invoke 几次，否则这并不容易。我只鼓励你重新考虑你的问题：真的不能通过简单的文件名验证加上一个消息框“对不起，你不能使用这个文件”来解决吗？这将容易几个数量级..

很抱歉，我找不到任何完整/准确的代码来获取句柄以及读取和删除项目。我**知道**几年前我见过这样的例子，但现在我找不到了进一步解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:38:06.727

您将遇到的一个问题是，即使文件可以隐藏在文件浏览器中，用户仍然可以在对话框的文本部分输入文件名。该文件确实存在，因此就对话框而言，它将是一个有效的选择，并且该行为将难以覆盖。

您不能轻易强制对话框不选择确实存在的文件，但您可以轻松验证对话框返回的数据。我建议您在对话框关闭*后验证文件名，并做出适当的反应。*

# drupal - 更改 DRUPAL 视图，使其添加自定义字段 -> 文本框

> ID：11930693
> 
> 赞同：0
> 
> 时间：2012-08-13T08:33:00.363
> 
> 标签：drupal, view, textbox, add, alter

我有一个具体的问题。

我有一个内容类型->测试它或多或少有正常的字段。

有一个显示所有测试的视图。到目前为止，一切都很好。

但要求是为每个实例添加一个特定的文本框-> TEST 分数。

对于所有登录的用户来说，它应该是不同的。

例如。所有用户都可以看到测试并可以插入结果。该结果记录在数据库中。

这样做的最佳方法应该是什么？

也许： 1.创建字段“ScoreOfTest” 2.更改自定义模块中的视图

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:19:31.943

同意斯普拉蒂奥。另一种选择是使用非常易于使用且专为用户输入而设计的 webform 模块：http: [//drupal.org/project/webform/](http://drupal.org/project/webform/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:12:30.987

我认为您正在寻找的模块是[EditableFields](http://drupal.org/project/editablefields/)。你没有说你使用的是哪个 Drupal 版本，但是有 D5、D6 和 D7 的推荐版本。

# mysql - 如何使用 mysql 查询查找专辑，每个曲目都有 2 个资产

> ID：11930694
> 
> 赞同：0
> 
> 时间：2012-08-13T08:33:03.973
> 
> 标签：mysql, database

我想要一个用于以下场景的 mysql 查询我有以下数据库结构

```
1] table 'albums'  Columns  'id', 'name'
2] table 'tracks'  Columns  'id', 'title', 'album_id'   (album has many tracks)
3] table 'assets'  Columns  'id', 'track_id'   (track has many assets) 
```

我想找出所有专辑，该专辑的所有曲目必须至少有 2 个资产。

对于以下测试数据专辑

```
'id'    'name'
  1      Album 1
  2      Album 2 
```

轨道

```
 'id'    'title'        'album_id'
   1      Track 1       1
   2      Track 2       1
   3      Track 3       2
   4      Track 4       2 
```

资产

```
'id'  'track_id'
 1      1
 2      1
 3      2
 4      2
 5      3
 6      3
 7      4 
```

所以我的查询 o/p 应该是

```
'id'    'name'
  1      Album 1 
```

As`Album 1` 有两个音轨`Track 1`，`Track 2`并且这两个`2 assets`音轨`Track 4`都`Album 2`只有`1 asset`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:06:34.370

尝试：

```
SELECT    a.id,
          a.name
FROM      albums a
JOIN      tracks b ON a.id = b.album_id
LEFT JOIN (
          SELECT   track_id
          FROM     assets
          GROUP BY track_id
          HAVING   COUNT(*) >= 2
          ) c ON b.id = c.track_id
GROUP BY  a.id, 
          a.name
HAVING    COUNT(*) = COUNT(c.track_id) 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/7aaa9/2)

# c# - 从 SOAP 解析转储数据（十六进制）的最佳方法？

> ID：11930699
> 
> 赞同：0
> 
> 时间：2012-08-13T08:33:19.750
> 
> 标签：c#, .net, parsing, soap, wsdl

我的应用程序将通过以下方式连续接收转储数据：

3c:73:3a:45:6e:76:65:6c:6f:70:65:20:78:6d:6c:6e:73:3a:73:3d:22:68:74:74:70: 3a:2f:2f:73:63:68:65:6d:61:73:2e:78:6d:6c:73:6f:61:70:2e:6f:72:67:2f:73:6f: 61:70:2f:65:6e:76:65:6c:6f:70:65:2f:22:3e:3c:73:3a:42:6f:64:79:20:78:6d:6c: 6e:73:3a:78:73:69:3d:22:68:74:74:70:3a:2f:2f:77:77:77:2e:77:33:2e:6f:72:67: 2f:32:30:30:31:2f:58:4d:4c:53:63:68:65:6d:61:2d:69:6e:73:74:61:6e:63:65:22: 20:78:6d:6c:6e:73:3a:78:73:64:3d:22:68:74:74:70:3a:2f:2f:77:77:77:2e:77:33: 2e:6f:72:67:2f:32:30:30:31:2f:58:4d:4c:53:63:68:65:6d:61:22:3e:3c:53:65:74: 4e:61:74:69:6f:6e:61:6c:4c:69:73:74:20:78:6d:6c:6e:73:3d:22:68:74:74:70:3a: 2f:2f:77:77:77:2e:6c:67:65:2e:63:6f:6d:2f:64:64:63:22:3e:3c:6e:61:74:69:6f: 6e:61:6c:4c:69:73:74:3e:3c:70:6f:72:74:6e:75:6d:62:65:72:3e:36:30:30:30:3c: 2f:70:6f:72:74:6e:75:6d:62:65:72:3e:3c:73:6c:61:76:65:61:64:64:72:65:73:73: 3e:37:30:30:30:3c:2f:73:6c:61:76:65:61:64:64:72:65:73:73:3e:3c:66:6c:61:67:7a:6f:6e:65:3e:32:3c:2f:66:6c:61: 67:7a:6f:6e:65:3e:3c:66:6c:61:67:69:6e:64:69:76:69:73:75:61:6c:3e:35:3c:2f: 66:6c:61:67:69:6e:64:69:76:69:73:75:61:6c:3e:3c:66:6c:61:67:64:69:6d:6d:69: 6e:67:3e:33:3c:2f:66:6c:61:67:64:69:6d:6d:69:6e:67:3e:3c:66:6c:61:67:70:61: 74:74:65:72:6e:3e:36:3c:2f:66:6c:61:67:70:61:74:74:65:72:6e:3e:3c:66:6c:61: 67:67:72:6f:75:70:3e:39:3c:2f:66:6c:61

这只是 ASCII 码

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><SetNationalList xmlns="http://www.lge.com/ddc">
   <nationalList>
      <portnumber>6000</portnumber>
      <slaveaddress>7000</slaveaddress>
      <flagzone>2</flagzone>
      <flagindivisual>5</flagindivisual>
      <flagdimming>3</flagdimming>
      <flagpattern>6</flagpattern>
      <flaggroup>9</flaggroup>
    </nationalList>
</SetNationalList></s:Body></s:Envelope> 
```

我基本上需要从端口号、从地址...标志组中获取值。

在 C# 中解析此类数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:39:49.667

嗯，这基本上是一个xml结构。在 XDocument 对象 (http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx) 中解析此 xml 结构，然后对其进行一些查询。

看看 Linq to XML：http: [//msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

如果您不熟悉 LINQ，则可以使用 XPath 之类的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:40:27.670

您可以将 XML 反序列化为一个对象，例如使用，[`XmlSerializer.Deserialize()`](http://msdn.microsoft.com/en-us/library/dsh84875.aspx)或者您可以查看使用例如读取 XML 本身[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)。

# python - Django-firebird 无法工作

> ID：11930701
> 
> 赞同：2
> 
> 时间：2012-08-13T08:33:32.207
> 
> 标签：python, firebird

我下载了文件夹并放入`C:\Python27\Lib\site-packages\django\contrib\gis\db\backends\firebird`，但是当我使用它时，给我一个

```
error:django.core.exceptions.ImproperlyConfigured: 'firebird' isn't an available database backend.
Try using `django.db.backends.XXX, where XXX is one of:
    'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
Error was: No module named firebird.base 
```

我已经将路径写入`PYTHONPATH`.

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:38:33.003

使用 Django 1.3（或更高版本）并按照[django-firebird](http://code.google.com/p/django-firebird/)页面上的说明进行操作。

Django 1.4 使用[github 上的 django-firebird 驱动程序](https://github.com/maxirobaina/django-firebird)

在您的`settings.py`文件中，使用与此类似的内容...

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'testdb',
        'USER': 'testdb_user',
        'PASSWORD': 'testdbpassw',
        'HOST': '',
        'PORT': '',
    },
    'fb': {
        'ENGINE': 'firebird',
        'NAME': '/home/idle/mydb.gdb',
        'USER': 'SYSDBA',
        'PASSWORD': 'passw',
        'HOST': '127.0.0.1',
        'PORT': '3050',
        'OPTIONS': {'charset':'WIN1251', 'dialect':1} ,
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:46:49.590

我已经更新了 django 1.4 和 ubuntu 的说明[https://github.com/mariuz/django-firebird/blob/master/README.md](https://github.com/mariuz/django-firebird/blob/master/README.md)

稍后我将清理自述文件并将其与主分支合并

在您的情况下，您需要将驱动程序中的 firebird 目录放在两个目录中

C:\Python27\Lib\site-packages\django‌​\contrib\gis\db\backends and in C:\Python27\Lib\site-packages

Seems that later it needs the compiler and it loads it from the firebird module Also you will need kinterbasdb [http://www.ibphoenix.com/download/connectivity/python](http://www.ibphoenix.com/download/connectivity/python)

# c# - 从 TCP/IP 设备接收数据

> ID：11930703
> 
> 赞同：1
> 
> 时间：2012-08-13T08:33:42.183
> 
> 标签：c#, tcp, ip, device

在我工作的地方，我们目前使用一个打卡系统，该系统使用连接到我们网络的手持扫描仪。我想知道是否有办法通过 C# 连接到该设备并接收来自该设备的任何输入。或者，就此而言，以类似方式连接的任何其他输入设备。而且，如果是这样，是否有人可以给我一些指导以帮助我入门，或者建议在哪里寻找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:00:02.327

> **如果有人可以给我一些指导让我开始，或者在哪里看。**

我建议您查看“ [System.Net](http://msdn.microsoft.com/en-us/library/system.net.aspx) ”命名空间。使用 或者我推荐的`StreamReader`，您可以轻松地在多个设备之间写入和读取流。`StreamWriter``NetworkStream`

请看以下示例，了解如何托管数据并连接到主机以接收数据。

**托管数据（服务器）：**

```
static string ReadData(NetworkStream network)
{
    string Output = string.Empty;
    byte[] bReads = new byte[1024];
    int ReadAmount = 0;

    while (network.DataAvailable)
    {
        ReadAmount = network.Read(bReads, 0, bReads.Length);
        Output += string.Format("{0}", Encoding.UTF8.GetString(
            bReads, 0, ReadAmount));
    }
    return Output;
}

static void WriteData(NetworkStream stream, string cmd)
{
    stream.Write(Encoding.UTF8.GetBytes(cmd), 0,
    Encoding.UTF8.GetBytes(cmd).Length);
}

static void Main(string[] args)
{
    List<TcpClient> clients = new List<TcpClient>();
    TcpListener listener = new TcpListener(new IPEndPoint(IPAddress.Any, 1337));
    //listener.ExclusiveAddressUse = true; // One client only?
    listener.Start();
    Console.WriteLine("Server booted");

    Func<TcpClient, bool> SendMessage = (TcpClient client) => { 
        WriteData(client.GetStream(), "Responeded to client");
        return true;
    };

    while (true)
    {
        if (listener.Pending()) {
            clients.Add(listener.AcceptTcpClient());
        }

        foreach (TcpClient client in clients) {
            if (ReadData(client.GetStream()) != string.Empty) {
                Console.WriteLine("Request from client");
                SendMessage(client);
             }
        }
    }
} 
```

现在**客户端**将使用以下方法发送请求：

```
static string ReadData(NetworkStream network)
{
    string Output = string.Empty;
    byte[] bReads = new byte[1024];
    int ReadAmount = 0;

    while (network.DataAvailable)
    {
        ReadAmount = network.Read(bReads, 0, bReads.Length);

        Output += string.Format("{0}", Encoding.UTF8.GetString(
                bReads, 0, ReadAmount));
    }
    return Output;
}

static void WriteData(NetworkStream stream, string cmd)
{
    stream.Write(Encoding.UTF8.GetBytes(cmd), 0,
                Encoding.UTF8.GetBytes(cmd).Length);
}

static void Main(string[] args)
{
    TcpClient client = new TcpClient();
    client.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 1337));
    while (!client.Connected) { } // Wait for connection

    WriteData(client.GetStream(), "Send to server");
    while (true) {
        NetworkStream strm = client.GetStream();
        if (ReadData(strm) != string.Empty) {
            Console.WriteLine("Recieved data from server.");
        }
    }
} 
```

# batch-file - 仅 DIR 前 10 个文件的 MS DOS 脚本，降序排列

> ID：11930708
> 
> 赞同：4
> 
> 时间：2012-08-13T08:34:01.917
> 
> 标签：batch-file, dos

我`dir abc*.*/o:-d/b >> "testfile1.txt"`用来按降序获取输出。有没有办法只获得 5 / 10 个文件作为输出。实际上我想将最新的 5 个（按修改日期排序）文件存储在 testfile1.txt 中。

感谢您的回复

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T12:33:43.000

```
@echo off
setlocal
set /a "n=0, limit=5"
>"testfile1.txt" (
  for /f "eol=: delims=" %%F in ('dir /o-d /b abc*.*') do (
    echo %%F
    2>nul set /a "n+=1, 1/(limit-n)"||goto :break
  )
)
:break 
```

我故意除以 0 以检测何时达到限制。我可以简单地使用 IF 语句，但这需要延迟扩展，并且延迟扩展会损坏包含`!`. 具有延迟扩展的适当解决方案必须在循环内打开和关闭延迟扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T07:07:19.043

我知道我在这个方面有点晚了，但是这个怎么样：

```
@echo off
for /f "tokens=1* delims=:" %%a in ('dir abc*.*/o:-d/b ^| findstr /n .') do if %%a leq 5 echo.%%b>>"testfile1.txt" 
```

这是我为完成这项工作所做的工作：

*   将您的 dir 语句导入 findstr 以对每一行进行编号（**dir abc*.*/o:-d/b | findstr /n 。**）
*   通过 for 循环运行它以将行号与内容分开（使用**"tokens=1* delims=:"**）
*   使用 if 语句验证当前行 # 是否小于或等于 "5" ( **if %%a leq 5...** )
*   导出与您指定的文件匹配的所有行（**echo.%%b>>"testfile1.txt"**）

**编辑：**将 ' **findstr /n .*** ' 更改为 ' **findstr /n 。**'，因为没有空行需要注意（请参阅下面的评论）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:56:06.100

这*必须*是批处理文件吗？这在 PowerShell 中是微不足道的。

要使用普通的旧批处理文件执行此操作，您将需要类似于 head 实用程序的东西，以仅获取前几行输出。

您可以在此处调整解决方案以满足您的需求（请注意答案中有关“winhead.cmd”小脚本的部分）： [批处理命令仅从输入中获取第一行](https://stackoverflow.com/questions/1516411/batch-command-to-take-only-first-line-from-input)

# c# - 如何从 XML 文件中删除不可见的垃圾字符

> ID：11930709
> 
> 赞同：0
> 
> 时间：2012-08-13T08:34:06.130
> 
> 标签：c#, asp.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:45:43.053

当然听起来像一个字节顺序标记。您的问题尚不清楚，但如果确实需要从 C# 编写这些文件而没有字节顺序标记，您可以通过传递`false`给`UTF8Encoding`构造函数来指定：

```
XmlDocument xmlDoc = your_xml_document;
using (TextWriter writer = new StreamWriter(output_filename, new UTF8Encoding(false))
{  
    xmlDoc.Save(writer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:40:44.630

那可能是[UTF-8 字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)。许多文本编辑器（例如 Notepad++ 和 jEdit）允许您指定 BOM 是否应为 UTF-8 编写。使用 Windows 记事本，您唯一的选择是将文件保存为 ANSI。

# html - 如何删除水平滚动条

> ID：11930710
> 
> 赞同：0
> 
> 时间：2012-08-13T08:34:09.973
> 
> 标签：html, css, size, margin

我正在努力做到这一点，以便可以以任何分辨率查看我的网站，并且我想使用 100% 属性来做到这一点，如果这就是它在 CSS 中的名称。我正在开发的网站是[http://twitterdistrict.comuf.com/index.php](http://twitterdistrict.comuf.com/index.php)，因此您可以看到我所处的困境。

我的 HTML 代码：

```
<div id="pagewrapper">

<div id="header">
<img src="http://i48.tinypic.com/34gu1pl.png" alt="header" height="153" width="655" id="header_img" /> 

</div><!--end header-->

<div id="addverttop">

<img src="http://i50.tinypic.com/uq9et.png" alt="header" height="110" width="670" id="advert_top" /> 

<a href="https://twitter.com/danielanavarr0" target="_blank"><img src="http://i49.tinypic.com/259gzv5.jpg" border="0" alt="Image and video hosting by TinyPic" height="70px" width="70px" id="daniela"></a>

</div><!----end advertisement top--->

<div id="content">

<img src="http://i49.tinypic.com/bj8tfn.png" alt="header" height="1000" width="766" id="contents" /> 

</div>

<div id="forms">

<form action = "index.php" method = "Post">

<div id="name_input"> <label>Name:  </label><br /><input type="text" name="name" maxlength="35"  value="<?php echo "$name" ?>" /><br /><br /></div>
<div id="comment_input"><label>Comment:  </label><br /><textarea name="comment" maxlength="35" cols="25" rows="3"></textarea><br /><br /><br /></div>

<?php
require_once("solvemedialib.php");          //include the Solve Media library 
echo solvemedia_get_html("E5xjj6lyTJh605jWenbaprE1.in1rkN8");   //outputs the widget
?>

<input type="submit" name="submit" value="promote yourself" /><br />

</form> 
```

CSS是：

```
 body { margin:0; padding:0}

  #pagewrapper{
  width:100%;
  height:1700px;
  background-color:#77cde6;
  margin-left: auto;
margin-right: auto;

  }

  #header_img{
  margin-left: auto;
margin-right: auto;
  position:relative;
  left:340px
  }

  #addverttop{

  margin-left: auto;
margin-right: auto;
position: relative;
left:240px;
  }

  #contents{

 position:relative;
 left:230px;
 top:30px;

  }

  #forms{
  position:relative;
  left:-300px;
  position:absolute;
left:320px;
top:900px;
z-index:1;
  }

  #username_word{
  position:relative;
  top: -870px;
  left: 5px;

  }

  #name{
    position:relative;
  top: -870px;
  left: 20px;

  }

  #comment{
      position:relative;
  top: -890px;
  left: 340px;

  }

  .dash{
  position:relative;
  top: -870px;
  left: 20px;

  }

  #line{
  position:relative;
  top:-970px;
  }
#followbtn{
position:Relative;
top:-915px;
left: -20px;
}

#name_input{
position:relative;
top:90px;
}

#comment_input{
position:relative;
left:190px;
top:20px;
}

#daniela{
position:relative;
left:-650px;
top:-7px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:25:07.160

简单的 CSS 属性 'overflow-x' 就可以了

```
overflow-x: visible; 
```

将其添加到页面的正文和#pagewrapper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:38:16.757

将此添加到您的 CSS 中：

```
div {
overflow-x:hidden;
overflow-y:hidden;
} 
```

在某些 IE 浏览器中无法识别 overflow-x 和 -y 样式。你可以使用一些javascript：

```
document.documentElement.style.overflow = 'hidden';  
document.body.scroll = "no";    // ie only 
```

# mongodb - 使用 cakephp 和 mongodb 添加图像文件

> ID：11930711
> 
> 赞同：0
> 
> 时间：2012-08-13T08:34:11.817
> 
> 标签：mongodb, cakephp-2.2

我是 mongodb 的新用户，我正在使用 cakephp。我正在尝试从ichikaway 测试cakephp 的插件。这个插件允许 cakephp 使用 mongodb（NoSql 数据库）。所以，我想知道是否有人已经尝试过上传图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:09:55.293

我试试这个，它有效！

```
 <?php

      class ProductsController extends AppController {
       public $name = 'Products';

       public function add(){
      if ($this->request->is('post')){
        debug($this->request->data);
        $dir = IMAGES.date('Y');
        if (!file_exists($dir))
            mkdir($dir);
        $dir .= DS.date('m');
        if (!file_exists($dir))
            mkdir($dir);
        $f = explode('.', $this->request->data['Product']['file']['name']);
        $ext = '.'.end($f);
        $filename = Inflector::slug(implode('.',array_slice($f,0,-1)),'-');
        debug($ext);
        debug($filename);

        $data = array(
            'name' => $this->request->data['Product']['name'],
            'url' => date('Y').'/'.date('m').'/'.$filename.$ext
            );
        //debug($data);
        if ($this->Product->save($data)){
            move_uploaded_file($this->request->data['Product']['file']['tmp_name'], $dir.DS.$filename.$ext);
            $id = $this->Product->getInsertId();
            debug($id);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:32:34.550

[cakephp-mongodb](https://github.com/ichikaway/cakephp-mongodb)库似乎没有提供与[GridFS](http://www.mongodb.org/display/DOCS/GridFS)交互的API 。您最好的选择可能是使用[MongodbSource::getMongoDb()](https://github.com/ichikaway/cakephp-mongodb/blob/master/models/datasources/mongodb_source.php#L286)方法获取[MongoDB](http://php.net/manual/en/class.mongodb.php)实例，然后直接访问[MongoGridFS](http://php.net/manual/en/class.mongogridfs.php)类。PHP 文档包含几个用于将文件（包括上传的文件）存储到 GridFS 的示例。

# facebook - 没有使用特定应用程序的用户朋友？

> ID：11930715
> 
> 赞同：0
> 
> 时间：2012-08-13T08:34:20.373
> 
> 标签：facebook, facebook-graph-api, curl, facebook-fql

我已登录，我有访问令牌。我有应用程序的授权。

我想检索正在使用此应用程序（特定）应用程序的用户朋友。如果我在浏览器中使用 fql 和 access_token 运行 URL，那么这会给我准确的结果..但是当使用 php 代码运行时......没有结果..

```
$userFrndAppUser  = null;

$c2 = curl_init();

curl_setopt($c2, CURLOPT_URL, "https://graph.facebook.com/fql?q=SELECT uid,name, is_app_user FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1&access_token=".$access_token);

curl_setopt($c2, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($c2, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($c2, CURLOPT_SSL_VERIFYHOST, false);

$userFrndAppUser = json_decode(curl_exec($c2));

curl_close($c2);

$userFrndAppUser = object2Array($userFrndAppUser);

echo "<br>User's friend which are using this app..";

print_r($userFrndAppUser);

function object2Array($d){
        if (is_object($d)){
            $d = get_object_vars($d);
        }

        if (is_array($d))
        {
            return array_map(__FUNCTION__, $d);
        }
        else
        { 
            return $d;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:44:32.863

```
As per my comment above:

$fql = urlencode('SELECT uid,name, is_app_user FROM user  WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1');

curl_setopt($c2, CURLOPT_URL, "https://graph.facebook.com/fql?q=".$fql."&access_token=".$access_token); 
```

或者，请查看为此[https://developers.facebook.com/docs/reference/php/使用 Facebook php sdk](https://developers.facebook.com/docs/reference/php/)

[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# gis - 更改 GIS 中的位置

> ID：11930731
> 
> 赞同：0
> 
> 时间：2012-08-13T08:35:27.893
> 
> 标签：gis, viewer, arcmap

如果新实体与旧实体位于同一位置，是否有一个功能可以改变新实体的位置？（两个实体来自同一层）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:28:42.063

您可以设置拓扑以确保点始终不相交。如果它们重叠，您将收到拓扑错误。

地理数据库拓扑规则和拓扑错误修复： [http ://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//001t000000sp000000.htm](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//001t000000sp000000.htm)

# javascript - 将var转换为Javascript中的自定义类

> ID：11930735
> 
> 赞同：3
> 
> 时间：2012-08-13T08:35:52.710
> 
> 标签：javascript, oop

我在 Javascript 中有一个名为 Booking 的自定义类：

```
function Booking(technicianID, startTime, start, street, zipcode, jobtypeID) {
    this.technicianID = technicianID;
    this.startTime = startTime;
    this.start = start;
    this.street = street;
    this.zipcode = zipcode;
    this.jobtypeID = jobtypeID;
} 
```

我想使用这个类的一个对象作为函数的输入。

```
function bookTime(inputBooking) {
    var tmpBooking = inputBooking;
    alert("You chose: " + tmpBooking.start + ". Tech: " + tmpBooking.technicianID);
} 
```

但由于某种原因，我从警报中得到的只是变量“未定义”。我猜这是因为它没有将 inputBooking 视为 Booking 对象，这意味着它没有变量 start 和 techn...

我读到有一个可以使用的 Object.create 函数，但我无法让它工作。

```
 tmpBooking = Object.create(Booking, inputBooking); 
```

关于如何解决这个问题的任何想法？

**编辑：**

如果我直接从 javascript 发送 inputBooking 对象，它会按预期工作。

```
 var tmpBooking = new Booking(tmpTechID, tmpStartTime, tmpStart, tmpStreet, tmpZipcode, tmpJobtypeID);

    bookTime(tmpBooking);
    //Works 
```

但问题是我想将一个临时对象发送到 HTML 并生成一个将调用 bookTime 函数的按钮：

```
 var tmpBooking = new Booking(tmpTechID, tmpStartTime, tmpStart, tmpStreet, tmpZipcode, tmpJobtypeID);

    resultsHTML += "<a href=\"#\" onclick=\"bookTime('" + tmpBooking + "')\">Book!</a>";
    //Doesn't work 
```

当我用调试器运行它时，它说 inputBooking 的类型是 [object Object] 并且“无法评估儿童”。结果是 start 和 TechnicalID 变量未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:41:12.130

您显示的代码没有任何问题。如果您使用实际`Booking`对象调用该函数，它将按预期工作：

```
bookTime(new Booking('Tech1', 'Now', 'Now', 'Here', 'Zip', 'Job')); 
```

演示：http: [//jsfiddle.net/Guffa/fRmA2/](http://jsfiddle.net/Guffa/fRmA2/)

因此，您的问题很可能不是`Booking`您发送到函数中的对象。

### 编辑：

您正在创建包含对象字符串表示的 HTML 代码，但对象的字符串表示不能用于重新创建看起来相同的对象。

在代码中使用变量：

```
resultsHTML += "<a href=\"#\" onclick=\"bookTime(tmpBooking)\">Book!</a>"; 
```

或创建将创建对象的代码：

```
resultsHTML += "<a href=\"#\" onclick=\"bookTime(new Booking(tmpTechID, tmpStartTime, tmpStart, tmpStreet, tmpZipcode, tmpJobtypeID))\">Book!</a>"; 
```

但是，取决于您从哪里获取数据，或者您是否在循环中使用它，这些都可能不起作用。如果您使用的变量在全局范围内不可用，则需要使用每个变量的值来创建创建对象的代码。就像是：

```
resultsHTML += "<a href=\"#\" onclick=\"bookTime(new Booking('"+tmpTechID.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+", '"+tmpStartTime.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+", '"+tmpStart.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+", '"+tmpStreet.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+", '"+tmpZipcode.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+", '"+tmpJobtypeID.replace(/\\/g,'\\\\').replace(/'/g,'\\'')+"))\">Book!</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:40:42.953

您很可能忘记在以下位置使用`new`关键字：

```
var inputBooking = new Booking(... 
```

# ruby-on-rails - Facebook 调用我的取消授权回调 url 导致 400 错误请求

> ID：11930740
> 
> 赞同：0
> 
> 时间：2012-08-13T08:36:03.913
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, nginx

我正在尝试为在 rails 中实现的 facebook 应用程序实现取消授权回调。

我配置了一个取消授权回调 url，它指向我的应用程序中的现有路由。但是，当我从我的 facebook 个人资料的应用程序设置页面中删除应用程序时，即应该触发取消授权回调的操作时，我只能在我的 nginx 访问日志中看到这一点。

```
66.220.158.244 - - [13/Aug/2012:09:47:12 +0200] "-" 400 0 "-" "-" 
```

在 rails 日志中它甚至没有显示。由于 ip 地址在 facebook 的 ip 范围内，因此 facebook 似乎访问了我的服务器，但发生了一些奇怪的事情。

我可以手动成功调用取消授权回调 url，当我这样做时，它会按预期显示在日志中。

对这里发生的事情有任何提示吗？

# php - Joomla 2.5 在 debian 或 linux 服务器中显示错误的自定义表单字段

> ID：11930741
> 
> 赞同：1
> 
> 时间：2012-08-13T08:36:05.797
> 
> 标签：php, joomla

请帮助我。我最近为 Joomla 2.5 创建了一个新组件。在我的组件中，我有一个表单，我在管理员/组件//模型/表单中使用 xml 定义了我的表单

在这种形式中，我有一个自定义字段。它扩展了 JFormField。它显示从数据库加载的复选框列表。

结果是：

在我的本地计算机（运行窗口 7）中，它正确显示了复选框列表。但是，当我将组件安装到运行 debian 或 linux 的服务器时，它只显示一个文本框（输入类型 =“文本”）

有人对此有任何解决方案吗？请问我，如果这还不够清楚。

提前致谢

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:53:45.870

解决了

这很简单。只需将自定义字段表单的名称更改为全部小写而不是 case-camel

# iphone - UIPopoverController 更改视图

> ID：11930749
> 
> 赞同：0
> 
> 时间：2012-08-13T08:36:31.977
> 
> 标签：iphone, ios, xcode, storyboard, uipopovercontroller

我想在我的 UIPopoverController 中更改视图。

我有 ：

```
if (popoverController == nil) {
        UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
        Help *d = [storyboard instantiateViewControllerWithIdentifier:@"Help"];
        //Help *d = [[Help alloc]initWithNibName:@"Help" bundle:[NSBundle mainBundle]];
        UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:d];
        popover.delegate = self;

        popoverController = popover;

    }

CGRect popoverRect = [self.view convertRect:[helpBtn frame] fromView:[helpBtn superview]];

popoverRect.size.width = MIN(popoverRect.size.width, 100); 
[popoverController presentPopoverFromRect:popoverRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

它加载第一个视图，但在第一个视图上我有按钮，我想在情节提要中更改视图控制器。

但是当我这样做时，它会以全屏视图而不是 UIPopoverController 的形式打开新视图。

感谢帮助

马尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:09:37.833

有几种解决方案。

更好的方法是让您的视图控制器管理不同的**视图**，而不是更改**视图控制器**。这似乎更容易。

您还可以将视图控制器包装在**导航控制器**中，然后以模态方式推送和弹出或呈现。

最后，您可以尝试关闭/销毁您的弹出框并使用另一个视图控制器创建一个**新**的，但您必须摆弄动画以使其看起来不错。

# jquery - 点击添加类

> ID：11930761
> 
> 赞同：0
> 
> 时间：2012-08-13T08:37:56.907
> 
> 标签：jquery, html, css, jquery-ui

下面是我用来显示点击内容的代码（如手风琴）。单击“a”标签会显示内容。那么如何为单击的“a”标签添加 bgcolor 为白色。

HTML

```
<ul class="accordion">
        <li>
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td width="336" class="name">lorem</td>
                    <td width="101" class="info current" idcust="tr1" custdata="#cnt1"><a href="#">test</a></td>
                    <td width="107" class="info" idcust="tr1" custdata="#cnt2"><a href="#">test2</a></td>
                    <td width="102" class="info" idcust="tr1" custdata="#cnt3"><a href="#">test2</a></td>
                    <td width="104" class="info" idcust="tr1" custdata="#cnt4"><a href="#">test2</a></td>
                    <td width="100" class="info" idcust="tr1" custdata="#cnt5"><a href="#">test2</a></td>
                    <td width="100" class="info" idcust="tr1" custdata="#cnt6"><a href="#">test2</a></td>
                    </tr>
                  <tr class="cntetn" customid="tab_content">
                    <td colspan="7" id="tr1">
                      <span id="cnt1"><p>content here</p></span>
                      <span id="cnt2"><p>content here</p></p></span>
    <span id="cnt3"><p>content here</p></p></span>
    <span id="cnt4"><p>content here</p></p></span>
    <span id="cnt5"><p>content here</p></p></span>
    <span id="cnt6"><p>content here</p></p></span>
    </td>
    </tr>
    </table>
</li>
</ul> 
```

脚本

```
$(function(){
            $('ul').accordion();
             $(".info").find("a").click(function(){
            var trid = $(this).parent().attr("idcust");                
            var trdata = $(this).parent().attr("custdata");
            // Hide all content divs and show only the one related to the click
            $("#"+trid).children().hide();
            $(trdata).show();
            $("#"+trid).toggle();
        });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:44:28.553

使用添加类：

```
$(".info").find("a").click(function(){
     $(this).addClass('white_class');
     ... 
```

`a`点击标签时

CSS：

```
.white_class{
     background-color: #FFF;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:45:20.350

> $(this).css({'background-color' : '#FFF'});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:46:33.957

你可以通过两种方式做到这一点

1)`$("a").attr("background-color","White");`

2）制作一个CSS类

```
.bgcolr{
 background-color:white;
} 
```

和

```
$("a").addClass("bgcolr"); 
```

# python - Django Haystack 外键关系

> ID：11930767
> 
> 赞同：4
> 
> 时间：2012-08-13T08:38:26.287
> 
> 标签：python, django, django-models, solr, django-haystack

我有这样的模型：

```
class Photo(ImageModel):
    title = models.CharField(_('Title'), max_length=100, unique=True)
    title_slug = models.SlugField(_('slug'), unique=True)   
    name = models.CharField(max_length=50, verbose_name="Name", blank=True)

class GroupUpload(ImageModel):
    title = models.CharField(verbose_name="Group Name", max_length=75)
    date_added = models.DateTimeField(verbose_name="Date Added", 
            default=datetime.now, editable=False)
    caption = models.TextField(verbose_name="Caption", blank=True)        
    photos = models.ManyToManyField('Photo', related_name='+', 
          verbose_name=_('F'),null=True, blank=True, through='GroupuploadPhotos') 
```

我的搜索索引：

```
class PostIndex(indexes.RealTimeSearchIndex, indexes.Indexable): 
    text = indexes.CharField(document=True, use_template=True)     
    date_added = indexes.DateTimeField(model_attr='date_added')

    def get_model(self):
        return Photo

    def index_queryset(self):
        return self.get_model().objects.filter(date_added__lte=
                                                    datetime.datetime.now()) 
```

现在我想获取与照片相关的 GroupUpload 对象。有了这个定义，我在 GroupUpload 中只得到照片对象而不是相关对象。我已经检查过文档。但还没有解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:08:42.017

如果你把它`related_name='+'`放在你`class GroupUpload`的里面，发生了什么？

**更新：**

> 为什么不设置 related_name='group_uploads' 并使用 photo.group_uploads.all() （或者如果它作为 haystack SearchResult - result.object.group_uploads.all()）？

问候

# css - 如何将这 2 组编码组合在一起形成一个大型下拉导航

> ID：11930771
> 
> 赞同：1
> 
> 时间：2012-08-13T08:38:39.227
> 
> 标签：css, navigation

一开始我正在研究如何创建一个大型下拉导航，因此我在网上搜索并开始意识到定义每个下拉菜单的宽度和位置是最好的。对不起，如果你不明白，但我也找到了一个 js.fiddle 。

用于下拉导航的 JS 小提琴：http: [//jsfiddle.net/Pnn6V/9/](http://jsfiddle.net/Pnn6V/9/)。

但是，我意识到导航上的标题（例如，主页、5 列等）并没有均匀分布，因为它们分布在固定 px 上。因此，我开始研究如何均匀分布标题。然后我发现实际上通过使用 CSS display: inline with text justify 我可以做到这一点。对不起，如果它让你感到困惑。但我也为此找到了一个 js fiddle。

使用 css 均匀分布导航的 JS 小提琴：http: [//jsfiddle.net/NGLN/dqBNr/3/](http://jsfiddle.net/NGLN/dqBNr/3/)

我厌倦了通过添加 span 标签和 justify 属性将它们组合在一起，我还将显示更改为 inline 和 inline-block 但整个事情都搞砸了。

我想知道是否有人知道我该怎么做才能将这两组编码组合在一起？非常感谢。如果您对我在说什么有任何疑问，请告诉我，以便我尝试改写它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:39:34.717

所以标题完全展开，我假设你在谈论当你改变它们时，下拉菜单会奇怪地偏移。由于以下规则，此问题正在处理：

```
#menu li:hover .dropdown_1column
{
    left:-841px;
    top:auto;
}
#menu li:hover .dropdown_2columns
{
    left:-2px;
    top:auto;
} 
#menu li:hover .dropdown_3columns
{
    left:-736px;
    top:auto;
}
#menu li:hover .dropdown_4columns
{
    left:-248px;
    top:auto;
}  
#menu li:hover .dropdown_5columns {  
    left:-110px;  
    top:auto;  
} 
```

有几种方法可以解决这个问题。一种方法是使用 JavaScript/jQuery 附加到 onhover 事件并将左侧设置为正确的位置（#menu 的左侧）。

另一种更好的方法是充分利用 CSS 位置属性。我让[这个 jsfiddle](http://jsfiddle.net/Pnn6V/38/)工作正常。我做了以下更改：

*   添加`position:relative;`到`#menu`
*   已从`position:relative;`_`#menu li`
*   添加`position:absolute;`到`.dropdown_1column, .dropdown_2columns, .dropdown_3columns, .dropdown_4columns, .dropdown_5columns`
*   在所有曾经具有特定像素值`left:0px;`的悬停规则（例如）上设置。`#menu li:hover .dropdown_1column`

这是有效的，因为`position:absolute;`下拉菜单上的现在将定位到菜单的位置，而不是像以前那样相对于菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:25:16.183

带有 的元素`width: 100%`必须是对齐的内联块的兄弟。在您的情况下，它必须在`ul`. 看看这里：http: [//jsfiddle.net/dqBNr/21/](http://jsfiddle.net/dqBNr/21/)

# android - 如何将图像放入操作栏列表？

> ID：11930772
> 
> 赞同：2
> 
> 时间：2012-08-13T08:38:42.890
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我想像 Path 应用程序那样将图像放到操作栏列表中：

![在此处输入图像描述](../Images/7c6e6b7f7961172ed18cab078b3403e3.png)

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:24:10.367

该操作栏中有三个图像。正确的两个是标准操作项（`<item>`在菜单资源中`android:showAsAction`设置为类似`ifRoom`）。左边可能是一个标志（`android:logo`在清单中），通过`setDisplayUseLogoEnabled()`on 打开`ActionBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:30:00.920

操作栏中的与布局中存在的`Spinner`任何其他内容没有什么不同。`Spinner`你给它的适配器，一个 的实例`SpinnerAdapter`，有两个回调方法：一个用于下拉列表中使用的布局，一个用于选定的项目布局。

知道了这一点，他们很可能对所选项目布局使用相同的布局，仅显示他们的徽标，而他们保留正常的下拉布局来显示导航项目。

# python - 让 python pip 找出正确的包版本来下载

> ID：11930773
> 
> 赞同：3
> 
> 时间：2012-08-13T08:38:46.297
> 
> 标签：python, pip, distutils

我已经多次遇到这个问题。基本上，在工作中，我们在 Windows 上使用旧版本的 python (2.5)，并且通常当我这样做时，例如`pip install zope.interface`pip 总是下载最新版本的包，无论我的 python 版本是否支持该包。因此，上面的示例将下载[4.0.1](http://pypi.python.org/pypi/zope.interface/4.0.1)，尽管 PKG-INFO 没有将 python 2.5 列为受支持的版本，因此我收到安装错误

```
 File "C:\Users\jamaam\build\zope.interface\setup.py", line 42
except DistutilsPlatformError as e: 
```

我希望 pip 更智能并安装我的 python 版本（在本例中为[3.8.0](http://pypi.python.org/pypi/zope.interface/3.8.0)）支持的最高版本的包，并可能警告这个包不是最新的，而我不必搜索互联网在我的环境中手动查找可安装版本。

反正有这样做吗？

这是PKG-INFO的一些内容，显然没有列出python 2.5

```
381 Classifier: Operating System :: OS Independent
382 Classifier: Programming Language :: Python :: 2.6
383 Classifier: Programming Language :: Python :: 2.7
384 Classifier: Programming Language :: Python :: 3
385 Classifier: Programming Language :: Python :: 3.2
386 Classifier: Topic :: Software Development :: Libraries :: Python Modules 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:46:43.637

不; 不存在进行此类调用的元数据，因此没有任何东西`pip`（或任何其他工具）可以用来确定哪个版本的包可以与您的 python 版本一起使用。

您唯一的选择是在安装时使用版本引脚：

```
pip install -I zope.interface==3.8.0 
```

注意`-I`那里的开关；由于您已经尝试安装最新版本，您可能需要忽略任何已安装的版本以强制降级。

请注意，`Classifier: Programming Language :: Python :: *`此任务不能依赖 Trove python 版本分类器 ( )；如果开发人员记得这样做，则它们由开发人员设置，但以后无法更新以指示与新 python 版本的兼容性。它们应该被视为帮助优化对 PyPI 和其他包索引的搜索的一种方式，而不是安装程序使用的元数据。

# android - 如何在整个应用程序中保持数据持久性

> ID：11930775
> 
> 赞同：0
> 
> 时间：2012-08-13T08:38:54.523
> 
> 标签：android, xml, storage

我正在设计一个涉及解析大型 XML 并保持序列化数据在整个应用程序中可访问的应用程序。我打算有一个数据对象来保存数据，并且每个组件（尽管不是每个组件）都可以访问数据。

我希望这些数据是非持久的，从而应用程序解析 XML 并将数据保存在内存中。请注意，此数据会很大（XML 文件大于 2MB）。另外，当用户切换到另一个应用程序时，我希望数据在那里。

我研究了可能的解决方案，例如：

*   静态对象
*   单身人士
*   扩展应用
*   使用服务
*   使用 SQLite 数据库（我不想这样做）

我不想陷入单例与扩展应用程序等无休止的争论，但我也想做单元测试，而且我听说单例和静态对象很难测试。

任何人都可以对此有所了解吗？最优雅的方法是什么？

编辑：数据是否应该持久化？使其持久化意味着，理论上，将对 XML 进行一次解析，将其序列化，将数据存储在数据库中，并且可以使用对象从组件访问该数据。听起来怎么样？

编辑 2：我认为我要在整个应用程序中保持数据可访问的方式是使用一个 SQLite 数据库来存储数据。

使用 XML 文件，我将解析数据并在首次启动时使用 SQLiteOpenHelper 创建的子类将其放入数据库。当需要数据时，我将使用读取访问权限使用子类对数据库进行查询。每个组件（活动/服务/等）都有自己的 SQLiteOpenHelper 实例来查询数据库，从而可以访问数据。这听起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:50:28.893

没有更多细节很难给出答案。但我推荐这些链接：

*   [如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)
*   [如何使用 Intents 将对象从一个 Android Activity 发送到另一个？](https://stackoverflow.com/questions/2139134/how-to-send-an-object-from-one-android-activity-to-another-using-intents)
*   [http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:08:30.683

考虑到您的所有顾虑，我会使用[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html/)来实现您想要的。这是我的应用程序中的示例代码：

为简单起见进行了修改：

```
private static final String PREF_NAME = "MyPrefs"; //Any value would do
private static final String PREFS_LOGIN_USER= "user"; //Any value would do
private static final String PREFS_LOGIN_PASSWORD= "password"; //Any value would do

public void onCreate(Bundle bundle){
    super.onCreate(savedInstanceState);
    ....

    //Create a preference file
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);

    //Put values
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(PREFS_LOGIN_USER, "admin");
    editor.putString(PREFS_LOGIN_PASSWORD, "P@$$w0rd");
    editor.commit();

    //Get values
    String userName = settings.getString(PREFS_LOGIN_USER, null);
    String password = settings.getString(PREFS_LOGIN_PASSWORD, null);
} 
```

即使应用程序已关闭，这些值也会保留。

`editor.remove(PREFS_LOGIN_USER)`顺便说一句，如果你想删除值，你也可以使用。也呼吁`editor.commit();`坚持改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:11:12.073

我认为我要在整个应用程序中保持数据可访问的方式是使用一个 SQLite 数据库来存储数据。

使用 XML 文件，我将解析数据并在首次启动时使用 SQLiteOpenHelper 创建的子类将其放入数据库。当需要数据时，我将使用读取访问权限使用子类对数据库进行查询。每个组件（活动/服务/等）都有自己的 SQLiteOpenHelper 实例来查询数据库。

# java - UUID 随机数生成

> ID：11930777
> 
> 赞同：2
> 
> 时间：2012-08-13T08:39:00.213
> 
> 标签：java, uuid

当我在数据库中保存对象时，我使用 UUID 随机数作为对象的主键。所以这个生成的 UUID 编号应该是唯一的。这样我得到了随机数。

* * *

```
final String UUIDUserToken = UUID.randomUUID().toString() 
```

* * *

这个生成的数字对于任何生成的数字来说都是唯一的吗？

给我主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:40:36.677

它可能会重复（可能性很小），

更新：

```
try{
  //try inserting
}catch(){
  //SQL constraint fails
  // regenerate new UUID
  //check in DB before inserting
  //insert now, if its unique, else regenerate
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:42:54.703

根据定义，生成的 ID 在全球范围内是唯一的。顺便说一句，你为什么要在 java 代码中生成主键？数据库知道很好地完成这项工作。只需将字段定义为`AUTO INCREMENT`.

# plugins - 崇高的文本片段包不起作用

> ID：11930780
> 
> 赞同：2
> 
> 时间：2012-08-13T08:39:33.413
> 
> 标签：plugins, ide, sublimetext2

我现在使用 Sublime Text 2 有一段时间了，有很多软件包为我节省了大量的生产时间。但是，我从未深入研究 ST2 中的片段和插件的工作方式。

有一个问题：试图调用 Bootstrap 官方插件来获取一个片段，我没有得到任何具有常用关键字的条目。浏览已安装，然后启用的软件包，我看到插件好像一切都在正常运行。

为了避免可能的冲突，我删除了我安装的其他可用引导插件，并尝试禁用、卸载/安装、再次启用该插件，然后重新启动 ST2，但徒劳无功。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:46:39.303

我不太确定这里的问题是什么，但我建议将存储库克隆到您的包文件夹中

```
git clone git@github.com:devtellect/sublime-twitter-bootstrap-snippets.git 
```

# go - 如何在golang中进行绝对路径http重定向

> ID：11930801
> 
> 赞同：6
> 
> 时间：2012-08-13T08:41:02.707
> 
> 标签：go

我正在阅读源代码[goto](https://github.com/nf/goto)，我在[goto/talk/0/main.go](https://github.com/nf/goto/blob/master/talk/code/0/main.go)中找到了以下代码：

```
http.Redirect(w, r, url, http.StatusFound) 
```

根据上下文，`url`是一个绝对路径，并且预期是绝对路径重定向。但正如[golang/http/redirect](http://golang.org/pkg/net/http/#Redirect)提到的：

> `Redirect`使用重定向到 url 来回复请求，这可能是相对于请求路径的路径。

结果是相对路径重定向。我不知道以前是否`http.Redirect`进行过绝对路径重定向，但现在没有。

那么如何在 golang 中进行绝对路径重定向呢？我搜索了互联网，但一无所获，有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-26T14:02:12.653

当您转到 golang 文档时[`http.Redirect`](http://golang.org/pkg/net/http/#Redirect)，您实际上可以单击蓝色标题：

> 函数[重定向](http://golang.org/src/pkg/net/http/server.go?s=34560:34628#L1179)

它将带您进入不言自明的源代码清单：

```
// Redirect replies to the request with a redirect to url,
// which may be a path relative to the request path.
func Redirect(w ResponseWriter, r *Request, urlStr string, code int) {
    if u, err := url.Parse(urlStr); err == nil {
        // If url was relative, make absolute by
        // combining with request path.
        // The browser would probably do this for us,
        // but doing it ourselves is more reliable.

        // NOTE(rsc): RFC 2616 says that the Location
        // line must be an absolute URI, like
        // "http://www.google.com/redirect/",
        // not a path like "/redirect/".
        // Unfortunately, we don't know what to
        // put in the host name section to get the
        // client to connect to us again, so we can't
        // know the right absolute URI to send back.
        // Because of this problem, no one pays attention
        // to the RFC; they all send back just a new path.
        // So do we.
        oldpath := r.URL.Path
        if oldpath == "" { // should not happen, but avoid a crash if it does
            oldpath = "/"
        }
        if u.Scheme == "" {
            // no leading http://server
            if urlStr == "" || urlStr[0] != '/' {
                // make relative path absolute
                olddir, _ := path.Split(oldpath)
                urlStr = olddir + urlStr
            }

            var query string
            if i := strings.Index(urlStr, "?"); i != -1 {
                urlStr, query = urlStr[:i], urlStr[i:]
            }

            // clean up but preserve trailing slash
            trailing := strings.HasSuffix(urlStr, "/")
            urlStr = path.Clean(urlStr)
            if trailing && !strings.HasSuffix(urlStr, "/") {
                urlStr += "/"
            }
            urlStr += query
        }
    }

    w.Header().Set("Location", urlStr)
    w.WriteHeader(code)

    // RFC2616 recommends that a short note "SHOULD" be included in the
    // response because older user agents may not understand 301/307.
    // Shouldn't send the response for POST or HEAD; that leaves GET.
    if r.Method == "GET" {
        note := "<a href=\"" + htmlEscape(urlStr) + "\">" + statusText[code] +
                "</a>.\n"
        fmt.Fprintln(w, note)
    }
} 
```

这个技巧也适用于其他功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T12:34:19.307

终于发现要执行绝对路径重定向，`url`必须是完整的url，比如`http://www.stackoverflow.com`or `https://github.com`，而不是`www.stackoverflow.com`。

# javascript - 单页应用程序中的登录页面

> ID：11930804
> 
> 赞同：5
> 
> 时间：2012-08-13T08:41:14.687
> 
> 标签：javascript, singlepage

我正在构建一个单页应用程序，请阅读登录页面不应在同一页面上。我应该作为单独的 html 页面登录，还是我也可以在同一页面中登录。

如果我作为不同的页面登录，则取决于我加载的第一页应该重定向到客户端的另一个页面。

即假设我先加载SPA，如果用户没有登录，我必须重定向到客户端的登录页面。并假设我首先加载登录页面，并且用户已经登录，我必须重定向到客户端的 SPA。

这个问题的一般解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:54:23.513

我将登录和验证放在单独的页面中，然后使用 ajax 进行调用。

1.  用户访问索引文件。
2.  索引文件检查服务器端页面以查看用户是否已登录。
3.  页面显示内容取决于来自服务器端页面的 json 答案是真还是假。

然后我会做同样的登录。

1.  用户提供登录信息
2.  通过 ajax 和 json 检查服务器端文件。
3.  如果成功则页面刷新，如果不成功则抛出错误响应。

我的回答的底线是，在创建单页应用程序时，ajax 是要走的路。但是，由于您没有提供您使用的语言，我无法给您更详细的答案。

然而，客户端单页处理登录和内容选择是**非常糟糕的做法，应该完全避免，因为它们缺乏安全性**（我不能强调这一点），因为所有元素甚至对匿名访问都是可用的，并且 DOM 操作将启用未经授权的用户访问受限内容。您必须使用 ajax 来进行后端服务器端授权 - 如前所述，以及 SPA 上的服务器端代码，根据您的授权状态呈现不同的内容。

您描述的场景需要具有用于选择要呈现的内容的服务器端代码和用于在 SPA 上实现功能的客户端代码以及 ajax。

但是，您可以做的是 - 例如按下登录按钮时 - 使用 ajax 调用另一个文件，删除包装 div 的内容并将 ajax 响应附加到该 div。然后，您将一起避免客户端重定向。

# java - java中的TripleDES加密错误

> ID：11930805
> 
> 赞同：0
> 
> 时间：2012-08-13T08:41:17.303
> 
> 标签：java, cryptography, encryption, tripledes

我正在按照[本教程](http://blog.kotowicz.net/2010/09/story-of-android-cryptography-and.html)使用 3DES 加密，我需要对密码设置进行一些更改，所以这是我的代码：

```
public class TripleDES {

public static int MAX_KEY_LENGTH = DESedeKeySpec.DES_EDE_KEY_LEN;
private static String ENCRYPTION_KEY_TYPE = "DESede";
private static String ENCRYPTION_ALGORITHM = "DESede/ECB/PKCS7Padding";
private final SecretKeySpec keySpec;
private final static String LOG = "TripleDES";

public TripleDES(String passphrase) {
    byte[] key;
    try {
        // get bytes representation of the password
        key = passphrase.getBytes("UTF8");
    } catch (UnsupportedEncodingException e) {
        throw new IllegalArgumentException(e);
    }

    key = padKeyToLength(key, MAX_KEY_LENGTH);
    key = addParity(key);
    keySpec = new SecretKeySpec(key, ENCRYPTION_KEY_TYPE);
}

// !!! - see post below
private byte[] padKeyToLength(byte[] key, int len) {
    byte[] newKey = new byte[len];
    System.arraycopy(key, 0, newKey, 0, Math.min(key.length, len));
    return newKey;
}

// standard stuff
public byte[] encrypt(String message) throws GeneralSecurityException, UnsupportedEncodingException {
    byte[] unencrypted = message.getBytes("UTF8");
    return doCipher(unencrypted, Cipher.ENCRYPT_MODE);
}

public byte[] decrypt(byte[] encrypted) throws GeneralSecurityException {
    return doCipher(encrypted, Cipher.DECRYPT_MODE);
}

private byte[] doCipher(byte[] original, int mode)
        throws GeneralSecurityException {
    Cipher cipher = Cipher.getInstance(ENCRYPTION_ALGORITHM);
    // IV = 0 is yet another issue, we'll ignore it here
    // IvParameterSpec iv = new IvParameterSpec(new byte[] { 0, 0, 0, 0, 0, 0, 0, 0 });
    cipher.init(mode, keySpec); //, iv);
    return cipher.doFinal(original);
}

// Takes a 7-byte quantity and returns a valid 8-byte DES key.
// The input and output bytes are big-endian, where the most significant
// byte is in element 0.
public static byte[] addParity(byte[] in) {
    byte[] result = new byte[8];

    // Keeps track of the bit position in the result
    int resultIx = 1;

    // Used to keep track of the number of 1 bits in each 7-bit chunk
    int bitCount = 0;

    // Process each of the 56 bits
    for (int i = 0; i < 56; i++) {
        // Get the bit at bit position i
        boolean bit = (in[6 - i / 8] & (1 << (i % 8))) > 0;

        // If set, set the corresponding bit in the result
        if (bit) {
            result[7 - resultIx / 8] |= (1 << (resultIx % 8)) & 0xFF;
            bitCount++;
        }

        // Set the parity bit after every 7 bits
        if ((i + 1) % 7 == 0) {
            if (bitCount % 2 == 0) {
                // Set low-order bit (parity bit) if bit count is even
                result[7 - resultIx / 8] |= 1;
            }
            resultIx++;
            bitCount = 0;
        }
        resultIx++;
    }

    Log.d(LOG, "result: " + result);
    return result;
}
} 
```

但我在这一行得到了 InvalidKeyException：

```
cipher.init(mode, keySpec); 
```

日志猫：

```
W/System.err(758): java.security.InvalidKeyException: src.length=8 srcPos=8 dst.length=8 dstPos=0 length=8
W/System.err(758):  at org.bouncycastle.jce.provider.JCEBlockCipher.engineInit(JCEBlockCipher.java:584)
W/System.err(758):  at org.bouncycastle.jce.provider.JCEBlockCipher.engineInit(JCEBlockCipher.java:631)
W/System.err(758):  at javax.crypto.Cipher.init(Cipher.java:511)
W/System.err(758):  at javax.crypto.Cipher.init(Cipher.java:471) 
```

我是加密新手，所以我可能忽略了一些东西，但我找不到它是什么。任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:08:38.267

三重 DES 需要 24 字节的密钥，而不是 8 字节的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:38:21.377

我通过更改这些行找到了解决方案：

```
try {
    // get bytes representation of the password
    key = passphrase.getBytes("UTF8");
} catch (UnsupportedEncodingException e) {
    throw new IllegalArgumentException(e);
}

key = padKeyToLength(key, MAX_KEY_LENGTH);
key = addParity(key);
keySpec = new SecretKeySpec(key, ENCRYPTION_KEY_TYPE); 
```

进入这些：

```
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
byte[] keyBytes = GetKeyAsBytes(key);
keySpec = new SecretKeySpec(keyBytes, "DESede"); 
```

而 GetKeyAsBytes 方法是这样的：

```
public byte[] GetKeyAsBytes(String key) {
    byte[] keyBytes = new byte[24]; // a Triple DES key is a byte[24] array

    for (int i = 0; i < key.length() && i < keyBytes.length; i++) 
        keyBytes[i] = (byte) key.charAt(i);

    return keyBytes;
} 
```

# c - 通过指针的字符串（数组）容量

> ID：11930810
> 
> 赞同：0
> 
> 时间：2012-08-13T08:41:35.097
> 
> 标签：c, arrays, string, pointers, size

我正在尝试创建一个将字符串插入另一个字符串的子例程。我想检查主机字符串是否有足够的容量来容纳所有字符，如果没有则返回错误整数。这需要使用类似 sizeof 的东西，但可以使用指针调用。我的代码在下面，我会非常乐意提供任何帮助。

```
#include<stdio.h>
#include<conio.h>
//#include "string.h"

int string_into_string(char* host_string, char* guest_string, int insertion_point);

int main(void) {
    char string_one[21] = "Hello mother";    //12 characters
    char string_two[21] = "dearest ";        //8 characters
    int c;

    c = string_into_string(string_one, string_two, 6);
    printf("Sub-routine string_into_string returned %d and creates the string: %s\n", c, string_one);
    getch();
    return 0;
}

int string_into_string(char* host_string, char* guest_string, int insertion_point) {
    int i, starting_length_of_host_string;
    //check host_string is long enough
    if(strlen(host_string) + strlen(guest_string) >= sizeof(host_string) + 1) {
        //host_string is too short
        sprintf(host_string, "String too short(%d)!", sizeof(host_string));
        return -1;
    }

    starting_length_of_host_string = strlen(host_string);
    for(i = starting_length_of_host_string; i >= insertion_point; i--) {    //make room
         host_string[i + strlen(guest_string)] = host_string[i];
    }
    //i++;
    //host_string[i] = '\0';
    for(i = 1; i <= strlen(guest_string); i++) {    //insert
         host_string[i + insertion_point - 1] = guest_string[i - 1];
    }
    i = strlen(guest_string) + starting_length_of_host_string;
    host_string[i] = '\0';

    return strlen(host_string);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:46:18.840

C 不允许您将数组作为函数参数传递，因此所有类型的数组都会`T[N]`衰减为类型的指针`T*`。您*必须*手动传递尺寸信息。但是，您可以`sizeof`在调用站点使用来确定数组的大小：

```
int string_into_string(char * dst, size_t dstlen, char const * src, size_t srclen, size_t offset, size_t len);

char string_one[21] = "Hello mother";
char string_two[21] = "dearest ";

string_into_string(string_one, sizeof string_one,   // gives 21
                   string_two, strlen(string_two),  // gives 8
                   6, strlen(string_two)); 
```

如果您使用 来创建动态数组`malloc`，则无论如何都必须将大小信息单独存储在某个地方，因此这个习语仍然适用。

（请注意，我已经使用了简化代码`sizeof(T[N]) == N * sizeof(T)`的事实。）`sizeof(char) == 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:29:03.260

这段代码需要更多的错误处理，但应该做你需要的，而不需要任何晦涩的循环。为了加快速度，您还可以将源字符串的大小作为参数传递，因此该函数不需要在运行时计算它。

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

signed int string_into_string (char*       dest_buf, 
                               int         dest_size,
                               const char* source_str,
                               int         insert_index)
{
  int   source_str_size;
  char* dest_buf_backup;

  if (insert_index >= dest_size) // sanity check of parameters
  {
    return -1;
  }

  // save data from the original buffer into temporary backup buffer
  dest_buf_backup = malloc (dest_size - insert_index);
  memcpy (dest_buf_backup, 
          &dest_buf[insert_index], 
          dest_size - insert_index);

  source_str_size = strlen(source_str);

  // copy new data into the destination buffer
  strncpy (&dest_buf[insert_index], 
           source_str, 
           source_str_size);

  // restore old data at the end
  strcpy(&dest_buf[insert_index + source_str_size],
         dest_buf_backup);

  // delete temporary buffer
  free(dest_buf_backup);
}

int main()
{
  char string_one[21] = "Hello mother";    //12 characters
  char string_two[21] = "dearest ";        //8 characters

  (void) string_into_string (string_one,
                             sizeof(string_one),
                             string_two,
                             6);

  puts(string_one);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:33:43.147

我尝试使用宏并更改 string_into_string 以包含对大小参数的要求，但是当我从另一个函数中调用该函数时，我仍然会删除。我尝试使用以下宏：

```
#define   STRING_INTO_STRING( a, b, c) (string_into_string2(a, sizeof(a), b, c)) 
```

导致失败的另一个功能如下。这失败了，因为字符串已经成为指针，因此大小为 4：

```
int string_replace(char* string, char* string_remove, char* string_add) {
    int start_point;
    int c;

    start_point = string_find_and_remove(string, string_remove);
    if(start_point < 0) {
        printf("string not found: %s\n    ABORTING!\n", string_remove);
        while(1);
    }
    c = STRING_INTO_STRING(string, string_add, start_point);
    return c;
} 
```

看起来这个功能将不得不冒着风险进行。查看`strcat`它也有风险，因为它不会检查您要附加的字符串是否足够大以容纳其预期内容（可能出于相同的原因）。

感谢大家的帮助。

# python - 如何在下拉框中选择一个项目（Selenium，Python）

> ID：11930811
> 
> 赞同：1
> 
> 时间：2012-08-13T08:41:51.617
> 
> 标签：python, selenium, selenium-chromedriver

我在尝试查找如何在下拉框中选择某些项目时遇到了麻烦，我正在使用 Python 和 Selenium 以及 ChromeDriver。我可以打开下拉框，但无法选择任何项目。

# mongodb - Mongo：morphia 不会在 jongo 请求中映射 _id

> ID：11930815
> 
> 赞同：1
> 
> 时间：2012-08-13T08:42:03.067
> 
> 标签：mongodb, mapping, morphia, jongo

这些是我的对象：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE)
public abstract class AdtagEntity extends GenericEntity implements Serializable {

private static final long serialVersionUID = -6624915864457400750L;

    @Id
    @XmlElement
    protected ObjectId id;

    @XmlElement
    protected Date createdDate;

    @XmlElement
    @Indexed
    protected Date modifiedDate;

    @XmlElement
    protected boolean deleted;

    public ObjectId getId() {
        return id;
    }
    ....
} 
```

和 ：

```
@Entity
@XmlRootElement(name = "offerAdvantage")
public class OfferAdvantage extends AdtagEntity implements Serializable {

    private static final long serialVersionUID = 1L;

    @XmlElement
    @NotNull
    private Date beginDateValidity;
    ...
} 
```

这是集合 OfferAdvantage 的内容：

```
myset:PRIMARY> db.OfferAdvantage.findOne()
{
    "_id" : ObjectId("502533ddc131e6beb0b07cae"),
    "company" : "pio",
    "version" : 666,
    "createdDate" : ISODate("2012-08-10T16:16:29.106Z"),
    "modifiedDate" : ISODate("2012-08-10T16:16:29.106Z"),
    "deleted" : false,
    "beginDateValidity" : ISODate("2012-08-03T13:20:00Z"),
    "endDateValidity" : ISODate("2015-10-04T23:06:40Z"),
    "name" : "deuxieme demarque",
    "description" : "",
    "pois" : [
        ObjectId("4fe1ebb9e4b0ef9431abd904")
    ]
} 
```

我的 pom.xml ：

```
<dependency>
    <groupId>org.mongodb</groupId>
    <artifactId>mongo-java-driver</artifactId>
    <version>2.6.5</version>
</dependency>
<dependency>
    <groupId>org.jongo</groupId>
    <artifactId>jongo</artifactId>
    <version>0.2</version>
</dependency> 
```

问题是，当我想使用一个 OfferAdvantage 对象时，对于集合的每个对象，优势的 id 都是 null （优势集合是 jongo api 的 MongoCollection）：

```
Iterable<OfferAdvantage> iterable = advantageCollection.find().as(OfferAdvantage.class);
Iterator<OfferAdvantage> iterator = iterable.iterator();
ObjectId advantageId = null;

while(iterator.hasNext()) {
    OfferAdvantage advantage = iterator.next();
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:48:27.447

根据[Jongo 文档](http://jongo.org/)，您可以`@JsonProperty("_id")`在 Morphia 注释之上使用注释以供 Jongo 使用：

```
public abstract class AdtagEntity extends GenericEntity implements Serializable {

private static final long serialVersionUID = -6624915864457400750L;

    @Id
    @JsonProperty("_id")
    @XmlElement
    protected ObjectId id; 
```

告诉它是否有效，我非常感兴趣。;)

# sql - 查找任何日期属于日期列表

> ID：11930816
> 
> 赞同：2
> 
> 时间：2012-08-13T08:42:20.290
> 
> 标签：sql, sql-server, sql-server-2008, date-range

我有一个表，其中有两列***FromDate***和***ToDate***。

例如。

```
ID  From Date   To Date
1   2012-01-02  2012-01-07 
2   2012-01-08  2012-01-14
3   2012-01-15  2012-01-21
4   2012-01-22  2012-01-28 
```

我想要做的是当我传递新的***From***和***To***日期时，对照这个表检查新的日期范围是否属于任何找到关联`ID`值的日期。（我没有传递表格中已经存在的确切 from 和 Todate 值）

例如，如果我`2012/01/25`以 From 和`2012/02/03`To Date 的形式传递，它应该返回 4。

我不太确定如何解决这个问题。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:48:57.957

```
SELECT
  *
FROM
  yourTable
WHERE
      to_date   >= @from_date_parameter
  AND from_date <= @to_date_parameter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:49:59.800

```
SELECT ID FROM MyTable
WHERE FromDate<= '2012/02/03' AND ToDate>= '2012/01/25' 
```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!3/55207/2)

# ruby-on-rails - Rails 3 在显示页面上添加到购物车

> ID：11930818
> 
> 赞同：0
> 
> 时间：2012-08-13T08:42:25.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我的索引文件中有以下内容

```
<%= button_to '', line_items_path(:product_id => product), :remote => 'true', :class => 'addbasketbtn' %> 
```

但是我不能将它添加到显示页面它给我一个错误。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:52:02.933

我猜在你的控制器中你有

```
@product = Product.find(params[:id]) 
```

在您看来，只需将 product 替换为实例变量 @product

```
<%= button_to '', line_items_path(:product_id => @product), :remote => 'true', :class => 'addbasketbtn' %> 
```

# python - AttributeError：“模块”对象没有属性“VERSION_STRING”

> ID：11930819
> 
> 赞同：1
> 
> 时间：2012-08-13T08:42:29.383
> 
> 标签：python, eclipse, macos, osx-lion

我在 Mac 上的 Eclipse 中工作。我正在使用 PyDev 版本 2.6.0.2012062818。我有一个运行完美的程序，但是在我将 Lion OS 更新为 Mountain Lion OS 后，运行时出现以下错误：

```
Traceback (most recent call last):
  File "/Users/Mihails/Projects/memsim/src/memsim/memsim.py", line 7, in <module>
     from simulation import SimulationHP
  File "/Users/Mihails/Projects/memsim/src/memsim/simulation.py", line 9, in <module>
     import matplotlib.pyplot as plt
   File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/pyplot.py", line 95, in <module>
     new_figure_manager, draw_if_interactive, _show = pylab_setup()
   File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/backends/__init__.py", line 25, in pylab_setup
     globals(),locals(),[backend_name])
   File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/backends/backend_wxagg.py", line 23, in <module>
     import backend_wx    # already uses wxversion.ensureMinimal('2.8')
   File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/backends/backend_wx.py", line 63, in <module>
     backend_version = wx.VERSION_STRING
AttributeError: 'module' object has no attribute 'VERSION_STRING' 
```

我根本不了解 wx 模块。我在站点包中没有 wx 文件夹。我有 wxPython。wxPython init.py 文件：

```
# The "old" wxPython package

import warnings

warnings.warn(
    "The wxPython compatibility package is no longer automatically generated "
    "or actively maintained.  Please switch to the wx package as soon as possible.",
    DeprecationWarning, stacklevel=2)

# We need to be able to import from the wx package, but there is also
# a wxPython.wx module and that would normally be chosen first by
# import statements.  So instead we'll have a wxPython._wx module and
# then stuff it into sys.modules with a wxPython.wx alias so old
# programs will still work.

import _wx
import sys
sys.modules['wxPython.wx'] = _wx
wx = _wx
del sys

from wx import __version__ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:51:20.660

我认为当您更新时，某些文件已被替换。

在 Ubuntu 11.04 wx.VERSION_STRING 上，返回字符串值。

尝试重新安装 WX，或将“VERSION_STRING”附加到 WX 主文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T13:35:56.727

我刚才遇到了类似的问题。我正在研究 Winodws 和 MacOSX。

今天，当我执行我的使用 matplotlib 和 wx 的 python 程序时，它只会弹出该消息。

我修复了： 1.我通过pip卸载了wx；2.安装wxpython；3.将matplotlib从1.2.0更新到1.2.1；

我想问题是`wx`我从 pip 安装的包根本不是 wx，它以某种方式覆盖了我的 wxpython 导入。

希望这些信息能给你一些关于你的问题以及其他问题的提示。

# java - 如何使用 JiBX 读取 XML 文档？

> ID：11930822
> 
> 赞同：0
> 
> 时间：2012-08-13T08:42:38.060
> 
> 标签：java, xml, jibx

我尝试做示例代码

```
public class xml_class {
    /**
     * Unmarshal the sample document from a file, compute and set order total, then
     * marshal it back out to another file.
     *
     * @param args
     */
    public static void main(String[] args) {
        try {

            // unmarshal customer information from file
            IBindingFactory bfact = BindingDirectory.getFactory(test.Order.class);
            IUnmarshallingContext uctx = bfact.createUnmarshallingContext();
            FileInputStream in = new FileInputStream("D:/liferay-develop/data1.xml");
            Order order = (Order)uctx.unmarshalDocument(in, null);

            // compute the total amount of the order
            float total = 0.0f;
            for (Iterator<Item> iter = order.getItems().iterator(); iter.hasNext();) {
                Item item = iter.next();
                total += item.getPrice() * item.getQuantity();
            }
            order.setTotal(new Float(total));

            // marshal object back out to file (with nice indentation, as UTF-8)
            IMarshallingContext mctx = bfact.createMarshallingContext();
            mctx.setIndent(2);
            FileOutputStream out = new FileOutputStream("D:/liferay-develop/out.xml");
            mctx.setOutput(out, null);
            mctx.marshalDocument(order);
            System.out.println("Processed order with " + order.getItems().size() +
                " items and total value " + total);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            System.exit(1);
        } catch (JiBXException e) {
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

并得到一个错误：

```
Unable to access binding information for class test.Order
Make sure the binding has been compiled
java.lang.NoSuchFieldException: JiBX_bindingList
at java.lang.Class.getDeclaredField(Unknown Source)
at org.jibx.runtime.BindingDirectory.getBindingList(BindingDirectory.java:68)
at org.jibx.runtime.BindingDirectory.getFactory(BindingDirectory.java:211)
at test.xml_class.main(xml_class.java:31) 
```

什么是绑定？以及如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:17:37.917

Eli，你为什么不从一个简单的例子开始。这是一个很好的开始： [https://github.com/jibx/maven-plugin/tree/master/test-suite/base-binding-test](https://github.com/jibx/maven-plugin/tree/master/test-suite/base-binding-test) 检查一下，构建它，然后运行简单的编组/解组org.jibx.schema.test.person 项目中的示例。我希望这有帮助。大学教师

# matlab - 从外部模式目标触发到主机系统

> ID：11930825
> 
> 赞同：0
> 
> 时间：2012-08-13T08:42:57.920
> 
> 标签：matlab, simulink

是否可以从目标平台上运行的代码中将触发信号返回给主机，以便您可以从外部目标在本地系统上运行回调。

我们现在知道这样做的唯一方法是：

*   设置一个单独的网络接口，仅用于发送这些触发信号（对于非常简单的 imo 来说，这是很多工作）
*   [使用get_param](http://www.mathworks.nl/help/toolbox/simulink/slref/get_param.html)在本地系统上不断检查模型的参数并使用它在本地触发我们的函数（但这显然不是同步的，这有其自身的问题）

如果有人想知道我们为什么要这样做：它是为了强化学习，我们想在本地 pc 上运行学习的东西，检查一些值，然后更新目标系统上的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:03:02.150

我从远程平台触发本地回调的最简单方法是使用并行端口，我认为有几种方法可以在 Matlab 中访问并行端口，但这里有一个链接可以[在 Matlab 中进行 lpt 通信](http://www.mathworks.com/matlabcentral/fileexchange/12676-parallel-port-lpt)。

您问题的后半部分有点含糊，因为它可能/可能不暗示您只需要向目标 PC 发送一个简单的触发器（因此强化学习所需的任何信息都已经被适当地分发）。

# ruby-on-rails - simple_form 选择字段在验证后变成输入字段

> ID：11930826
> 
> 赞同：2
> 
> 时间：2012-08-13T08:42:59.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter-bootstrap, simple-form

我将 simple_form 与 twitter boostrap 结合用于我的 rails 应用程序。我有一个问题阻止了我。

```
<%= f.input :title %>
<%= f.input :url %>
<%= f.input :tag_list, :label => 'Tags' %>
<%= f.input :type_id, :collection => @types, :label_method => :type_name, :value_method => :id, :include_blank => false %>
<%= f.input :description %> 
```

这为我创造了很好的形式。但是当验证失败时，每个输入字段都会显示它们的错误。但不是选择字段，它只是从选择字段变为填充有 id 的普通输入字段，我不知道为什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T07:51:09.193

由于某些原因，当集合被放入字段本身而不是控制器的操作时，Rails + Bootstrap + Simple_form 似乎让您在验证后选择字段。这应该工作：

```
<%= f.input :title %>
<%= f.input :url %>
<%= f.input :tag_list, :label => 'Tags' %>
<%= f.input :type_id, :collection => Type.all.order('type_name'), :label_method => :type_name, :value_method => :id, :include_blank => false %>
<%= f.input :description %> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:59:32.793

好吧，我需要更多信息来帮助你。你能发布你的模型吗？或解释它是什么`@types`以及它的用途。

**这是关联的基本简单方法：**

*模型/type.rb* `belongs_to :post`

*模型/post.rb* `has_many :types`

*意见/帖子/_form.html.haml* `= f.association :types`

确保您有一个名为“标题”或“名称”的列用于类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-16T23:19:12.630

您需要在方法**create**或**update中设置****@types** ，然后再分别渲染操作**new**或**edit**

 ******例如

```
def new
  @your_object = YourObject.new
  @types = Type.all
  ....
end

def create
    @your_object = YourObject.new(your_object_params)

    respond_to do |format|
      if @your_object.save
        format.html { redirect_to ... }
        format.json { render action: 'show' ... }
      else
        ### ! init data for the form ! ###
        @types = Type.all
        format.html { render action: 'new' }
        format.json { render json: ... }
      end
    end
end 
```******

# c++ - 是否可以在没有 Scrnsave.lib 的情况下制作 Windows 屏幕保护程序？

> ID：11930827
> 
> 赞同：0
> 
> 时间：2012-08-13T08:43:10.103
> 
> 标签：c++, winapi, windows-8, screensaver

前段时间我使用 C++/WinAPI 编写了一个 Windows 屏幕保护程序，但现在当我在 Windows 8 上的登录屏幕上尝试它时（当没有用户登录时）它似乎不起作用。这显然是 Windows 8 中的一个错误，因为当我重新启动系统时，我的屏幕保护程序开始正常工作。（请注意，此行为从未在任何先前版本的 Windows 上发生过。）

发生的情况是，当屏幕保护程序启动时，屏幕变黑，在那之后什么也没有发生。显然我不能用 Visual Studio 调试它，所以我在第一行添加了一个跟踪语句，它应该在 ScreenSaverProc() 的 WM_CREATE 中开始执行，但是当屏幕保护程序像我上面描述的那样挂起时，该行永远不会被调用。

这告诉我，在发送 WM_CREATE 消息之前，一些初始化代码挂起，但为了解决这个问题，我无法访问该代码，因为[微软关于 WinAPI 屏幕保护程序的教程](http://msdn.microsoft.com/en-us/library/cc144066%28v=vs.85%29.aspx)指示链接到 Scrnsave.lib（或 ScrnsavW.lib 在我的情况下。 )

所以我想知道，有没有办法在不使用 Scrnsave.lib 的情况下构建 WinAPI 屏幕保护程序？

# c# - 访问类库中的会话。

> ID：11930829
> 
> 赞同：5
> 
> 时间：2012-08-13T08:43:22.070
> 
> 标签：c#, asp.net

我正在开发一个使用 2 个子项目的应用程序架构：a）asp.net Web 应用程序（它涵盖用户界面和业务逻辑）和 b）类库。（它涵盖了数据访问层）

系统用户登录成功后，用户信息保存在会话对象中。

我面临的问题是当我尝试在类库项目（数据访问层）中访问该会话对象时，它总是返回 null。

我需要访问类库项目中的会话对象，因为在我的情况下，每个用户都有自己的数据库访问用户名和密码（出于安全原因）；

那么，我如何在类库项目中读取和写入会话对象

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T08:46:20.120

使用`System.Web.HttpContext.Current.Session`对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T08:57:13.447

首先，正如 Peri 正确注意到的那样 - 如果为每个用户单独登录数据库是一个好主意，您需要再次考虑 - 因为您松散了连接池（不同的用户将无法重用现有连接 - 并创建一个新的 sql连接非常昂贵）。

如果您真的希望保留单独的数据库用户，我将创建接口以从数据访问中抽象会话：

```
public interface ILoginDataService
{
   LoginData Current { get; }
} 
```

并且实现将从会话中传递登录数据。通过这种方式，您的数据访问逻辑中的会话将不会有会话依赖性 - 因此它将更具可测试性，您也将分离关注点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T19:31:47.923

这是我在库中用于获取会话信息的代码。

```
public static string Entity()
{
    string entity = "";
    HttpContext httpContext = HttpContext.Current;
    if (httpContext.ApplicationInstance.Session.Count > 0)
        entity = httpContext.ApplicationInstance.Session["EntityCode"].ToString();

    return entity;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-06T03:39:47.610

```
using System.Web;

namespace ClassNameSpace
{
    public class Class1 : IRequiresSessionState
    {
            private string sessionValue => HttpContext.Current.Session["sessionKey"].ToString();
    }
}
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T08:53:17.280

我有一个使用会话的 ASP.Net 应用程序。我可以使用 [WebMethod(EnableSession = true)] 函数在我的 app_code 文件中访问它。我不确定这是否是您的问题。当我在方法上删除 (EnableSession = true) 时，我也面临会话值为 null。

# google-drive-api - 谷歌驱动开发者帐户

> ID：11930833
> 
> 赞同：0
> 
> 时间：2012-08-13T08:43:35.907
> 
> 标签：google-drive-api

我的应用程序有一个文档管理模块，我想为此使用 Google Drive。

Google 是否允许我创建 Google Drive 帐户并在我的个人应用程序中使用我的帐户？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:45:10.073

是的，请参阅[https://developers.google.com/drive/](https://developers.google.com/drive/)

# phpbb3 - 如何判断 phpBB3 中安装了哪些模块

> ID：11930834
> 
> 赞同：0
> 
> 时间：2012-08-13T08:43:36.650
> 
> 标签：phpbb3

我习惯了 Drupal，而且 Drupal 很清楚哪些模块在服务器上。我是 phpBB 的新手，并希望学习足以将安装迁移到 Drupal。我可以看到 phpBB 有“模块”，但我看不出如何判断哪些模块已安装或启用。

从我所见，在 phpbb3 中安装模块是安装过程中的大量黑客攻击，这是真的吗？有没有办法告诉安装了什么。即使我必须在代码上运行一些 grep ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:17:41.233

在 PHPBB3 中安装模块是“复杂的”。但是，可以使用[AutoMOD安装（或卸载）](http://www.phpbb.com/mods/automod/) [MOD 数据库](http://www.phpbb.com/customise/db/modifications-1/)中的任何内容。如果您在 MOD 数据库中寻找模组，这应该会让您的生活更轻松。安装的“复杂”部分是任何自己动手的说明。您必须手动执行这些操作。这是您提到的“黑客文件”。它似乎在 PHPBB 的 3.0.x 版本中相当普遍。3.1 应该会减少这种情况，但是 PHPBB 开发速度很慢。3.1 2010 年 7 月进入[功能冻结](http://blog.phpbb.com/2010/07/20/phpbb-ascraeus-3-1-feature-freeze/)

[提供](http://www.phpbb.com/community/viewtopic.php?f=225&t=1367815)了使用 AutoMOD 安装 mod 的基本教程。

AutoMOD 还允许您查看已安装的模块（使用 AutoMOD）。如果您通过自己破解安装脚本手动安装了某些东西，它不会出现在此列表中。

# java - java简单的聊天客户端查询

> ID：11930839
> 
> 赞同：1
> 
> 时间：2012-08-13T08:44:13.753
> 
> 标签：java

这是我正在使用的代码（不是我的）

```
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class SimpleChatClient {
JTextArea incoming;
JTextField outgoing;
BufferedReader reader;
PrintWriter writer;
Socket sock;

public void go() {
    JFrame frame = new JFrame("Ludicrously Simple Chat Client");
    JPanel mainPanel = new JPanel();
    incoming = new JTextArea(15, 50);
    incoming.setLineWrap(true);
    incoming.setWrapStyleWord(true);
    incoming.setEditable(false);
    JScrollPane qScroller = new JScrollPane(incoming);
    qScroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    qScroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
    outgoing = new JTextField(20);
    JButton sendButton = new JButton("Send");
    sendButton.addActionListener(new SendButtonListener());
    mainPanel.add(qScroller);
    mainPanel.add(outgoing);
    mainPanel.add(sendButton);
    frame.getContentPane().add(BorderLayout.CENTER, mainPanel);
    setUpNetworking();

    Thread readerThread = new Thread(new IncomingReader());
    readerThread.start();

    frame.setSize(650, 500);
    frame.setVisible(true);

}

private void setUpNetworking() {
    try {
        sock = new Socket("127.0.0.1", 5000);
        InputStreamReader streamReader = new InputStreamReader(sock.getInputStream());
        reader = new BufferedReader(streamReader);
        writer = new PrintWriter(sock.getOutputStream());
        System.out.println("networking established");
    }
    catch(IOException ex)
    {
        ex.printStackTrace();
    }
}

public class SendButtonListener implements ActionListener {
    public void actionPerformed(ActionEvent ev) {
        try {
            writer.println(outgoing.getText());
            writer.flush();

        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
        outgoing.setText("");
        outgoing.requestFocus();
    }
}

public static void main(String[] args) {
    new SimpleChatClient().go();
}

class IncomingReader implements Runnable {
    public void run() {
        String message;
        try {
            while ((message = reader.readLine()) != null) {
                System.out.println("client read " + message);
                incoming.append(message + "\n");
            }
        } catch (IOException ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

}

我的问题是在传入的阅读器类中为什么这一行----`while ((message = reader.readLine()) != null)` 从不返回null？假设线程去检查了这一行，而另一边没有给客户端的消息，那么上面的行不应该返回null吗？

谁能解释一下发生了什么？我确实知道套接字连接，我只想知道收到传入消息的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:58:53.123

您正在使用诸如 BufferedReader.readLine() 之类的阻塞函数。这将阻塞，直到有东西要读。它不会“检查设备并在没有返回任何内容时返回 null”。

您可以使用 BufferedReader.available() 检查是否有任何传入数据，如果结果大于 0，则调用 readLine()。

# vb6 - vb6更改参考路径

> ID：11930840
> 
> 赞同：2
> 
> 时间：2012-08-13T08:44:18.420
> 
> 标签：vb6, reference

我正在使用 Visual Basic 6。

我的项目中有一些组件引用。组件使用“regsvr32”向 Windows 注册。所以，我已经`.ocx`从安装目录添加到组件。

让说`C:\Program Files\Install Dir\`。但是，当我看到控件的引用`(.oca)`时，VB 会自动获取路径`C:\Program Files\Microsoft Visual Studio\VB98`，我可以看到`.oca`文件正在被复制。

但是，我只想使用安装目录中的引用。我尝试删除或更新，它说`Can't remove control or reference;In use`

我已经尝试`.vbp`在编辑器中进行编辑，但它没有显示`.oca`参考路径甚至不是默认值`C:\Program Files\Microsoft Visual Studio\VB98`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:50:38.530

ActiveX DLL 和 OCX 按设计安装为*共享库*。出于这个原因，您几乎不想将它们安装到像您这样的私有文件夹`C:\Program Files\Install Dir\`中，除非它们是真正私有的，因为它们是其他代码不应使用的应用程序的一部分。

更通用的“实用程序”库，例如由 Microsoft、第 3 方提供的库，甚至是您自己开发的库，通常通过包括设计时许可证（如果获得许可）和更相关的 .DEP 文件在开发人员模式下安装。此类 .DEP 文件中包含的部分信息是*库的安装位置。* 在某些情况下，这是 System32，在其他情况下，它是 Common Files 下的文件夹等。

现在，如果您真的想要一个 DLL 或 OCX 的私有副本，那么有一种机制可以做到这一点。这些被称为*隔离程序集*，它们取代了 Win2K 中早期的、有问题的 .local 机制。

这些 .OCA 文件完全是另外一回事，您不应尝试引用或部署它们。

但很难说你真正追求的是什么。像这样的消息：

> 无法删除控件或引用；正在使用中。

.. 是一个设计时问题，与您的其他问题完全无关。

我只是不确定您要做什么。听起来您正在尝试重用其他应用程序私有的库。

# wordpress - 如何创建在 WordPress CMS 的管理菜单中不可见的自定义管理页面？

> ID：11930842
> 
> 赞同：0
> 
> 时间：2012-08-13T08:44:28.700
> 
> 标签：wordpress

我正在编写一个新插件，注册了一个新的管理菜单页面，并添加了一些子菜单页面。其中一个页面有一个医生列表，每个医生都是从数据库中挑选出来的。

我想在每个医生附近都有一个“编辑”链接。该链接必须将客户带到编辑页面。如何注册此页面而不显示为子菜单页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:45:39.670

好的，我找到了解决方案。您必须在另一个下创建两个子菜单页面，第二个页面不会显示在管理面板中。像这样：

```
 add_submenu_page( 'dev7d-father','Daktarai','Daktarai', 'manage_options' , 'dev7d-sub-doctors', 'doctors_options');
        add_submenu_page( 'dev7d-sub-doctors','Daktarų redagavimas','Daktarų redagavimas', 'manage_options' , 'dev7d-sub-doctors-edit', 'doctors_edit'); 
```

# cloudbees - Bees SDK 正在尝试与 localhost 通信

> ID：11930847
> 
> 赞同：2
> 
> 时间：2012-08-13T08:44:42.113
> 
> 标签：cloudbees

当我运行命令时，cloudbees SDK 1.1 正在尝试连接到 localhost:8080。

知道我需要做什么来修复它吗？

例子

```
bees app:info -v
# CloudBees SDK version: 1.1
Enter application ID (ex: account/appname) : account/app
API call: http://localhost:8080/api?timestamp=1344846702&v=1.0&api_key=KEY&action=application.info&app_id=account%2Fapp&format=xml&sig_version=1&sig=SIGN
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection refused
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection refused
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection refused
Aug 13, 2012 6:31:42 PM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request

ERROR: Connection refused 
```

谢谢乔诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:01:54.350

添加`bees.api.url=https\://api.cloudbees.com/api`到`~/.bees/bees.config`

备份`~/.bees`然后运行 ​​bees init 并重新创建我的 bees 配置目录后，我注意到`bees.config`.

# css - div之间的间距

> ID：11930849
> 
> 赞同：0
> 
> 时间：2012-08-13T08:45:00.833
> 
> 标签：css, margin, padding, spacing

```
<div id="content">

   <div id="rectangle">

   <p>Consectetur adipiscing elit. Suspendisse potenti. Maecenas at nulla velit, quis bibendum ligula. Donec neque purus, porttitor et tempor non, molestie nec sem.</p>

   </div>
</div>

#content{

    margin:0px auto; 
    height:600px;
    width: 600px;
    background-color: white;`enter code here`
    -moz-box-shadow: inset 0 15px 2px rgba(0,0,0,.07); 
    -webkit-box-shadow: inset 0 15px 2px rgba(0,0,0,.07); 
    box-shadow: inset 0 15px 2px rgba(0,0,0,.07);   
}

.rectangle {
    width: 563px;
    height: 165px;
    background-color: #e7ebf1; 
    -moz-box-shadow:
        1px 1px 2px rgba(0,0,0,.2) ,
        inset 0 0 5px rgba(255,255,255,.6)
    -webkit-box-shadow:
        1px 1px 2px rgba(0,0,0,.2) ,
        inset 0 0 5px rgba(255,255,255,.6) ;
    box-shadow:
        1px 1px 2px rgba(0,0,0,.2),
        inset 0 0 5px rgba(255,255,255,.6) 
    background-image: -moz-linear-gradient(90deg, rgba(0,0,0,.05) 0%, rgba(255,255,255,.05) 100%);
    background-image: -o-linear-gradient(90deg, rgba(0,0,0,.05) 0%, rgba(255,255,255,.05) 100%);
    background-image: -webkit-linear-gradient(90deg, rgba(0,0,0,.05) 0%, rgba(255,255,255,.05) 100%);
    background-image: linear-gradient(90deg, rgba(0,0,0,.05) 0%, rgba(255,255,255,.05) 100%);
    margin: 0 auto;
    } 
```

我尝试在彼此顶部的框之间创建间距。
不知何故，两者都粘在一起，我无法设法在它们之间留出间距。当我添加边距或填充时，它不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:49:39.867

您在 CSS 中添加了类，但在 HTML 中`rectangle`定义了 id 。`rectangle`

[**现场演示**](http://jsfiddle.net/an3QY/3/)

----------- 更新给 margin-top ------------------***[演示](http://jsfiddle.net/an3QY/6/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T00:35:04.370

将`margin: 0 auto;`矩形的顶部和底部边距设置为 0，这就是它们之间没有间距的原因。

将其设置为`margin: 15px auto;`，您将有空间。

# html - 无法在ie9中删除图像边框

> ID：11930851
> 
> 赞同：2
> 
> 时间：2012-08-13T08:45:01.600
> 
> 标签：html, css

> **可能重复：**
> [删除 Chrome/IE9 中的图像边框](https://stackoverflow.com/questions/6013071/removing-the-image-border-in-chrome-ie9)

图像周围有一个用蓝色包裹的边框。它是蓝色的...我尝试遵循一些解决方案，但边框图像并没有消失。

CSS：

```
<style type="text/css">
   a {outline : none;}
   a img {outline : none;}
   img {border : 0;}
   a:active, a:focus 
   { 
     outline: none; 
     ie-dummy: expression(this.hideFocus=true);
    }
</style> 
```

这是我的 html 标记：

```
<p style="margin-left: 39%;margin-top: 23px;">
     <a  href="<?php echo $review[0]['link']; ?>" 
         target="_blank" style="border: none;text-decoration: none;">
         <img style="border: none;" 
              src="Images/Review/button_register_for_free.png"/>
     </a>
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T08:50:35.393

尽管您有任何其他样式，但您应该需要的唯一规则是在图像上不设置边框。

你几乎做到了：

```
img {border : 0;} 
```

但它应该是：

```
img {border : none;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:50:53.483

某些浏览器会在链接内的图像周围显示边框，您可以使用以下方法将其删除：

```
a img { border: none; } 
```

您可能还想删除链接的下划线，它看起来像图像的底部边框：

```
a { text-decoration: none; } 
```

# java - 为什么在一些有限的调用后数据库调用休眠

> ID：11930856
> 
> 赞同：2
> 
> 时间：2012-08-13T08:45:30.150
> 
> 标签：java, hibernate, hibernate-session

这是问答式的。

在使用 SessionFactoryUtils.getSession 获取会话并执行我的查询时，它只能调用有限的计数，并且将在该限制计数之后等待调用。为什么会发生？

```
 try {
        SessionFactory sessionFactory = getHibernateTemplate().getSessionFactory();
        Session session = SessionFactoryUtils.getSession(sessionFactory, true);
        Query query = session.getNamedQuery("updateAField");

        query.setParameterList("states", states);

        int updatedCount = query.executeUpdate();
        return updatedCount;
    } catch (Exception e) {
        logger.error(e.toString());
        throw new Throwable(e);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:45:30.150

因为您正在从 Hibernate 获取会话，但您没有释放它。所以通过调用 SessionFactoryUtils.closeSession(session); 您必须在函数结束时释放使用过的会话。调用此函数的限制计数是您的数据库连接池大小。这将是：

```
 SessionFactory sessionFactory = null;
    Session session = null;
    try {
        sessionFactory = getHibernateTemplate().getSessionFactory();
        session = SessionFactoryUtils.getSession(sessionFactory, true);
        Query query = session.getNamedQuery("updateAField");

        query.setParameterList("states", states);

        int updatedCount = query.executeUpdate();
        return updatedCount;
    } catch (Exception e) {
        logger.error(e.toString());
        throw new Throwable(e);
    } finally {
        if (session != null) {
            SessionFactoryUtils.closeSession(session);
        }
    } 
```

# android - 滚动后列表视图的检查项目不存在

> ID：11930858
> 
> 赞同：2
> 
> 时间：2012-08-13T08:45:33.473
> 
> 标签：android, checkbox, android-listview, textview

我创建了一个带有文本视图和复选框的列表视图。但是，在向下（或向上）滚动列表后，列表中的所有选中项目都将被取消选择。如何使选中的复选框在滚动后保持其状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:30:16.240

ListView 每次滚动时都会回收视图。这就是复选框不保留其状态的原因。

要完成您的任务：

*   将选中的项目存储在数组中。
*   当您单击列表视图中的任何复选框时，更改数组中该特定项目的值。
*   在您的 getView 方法中，通过读取数组中的值来选中或取消选中复选框。

这样，您的复选框将保留其状态。我希望这很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:57:24.680

当您对列表进行任何更改时，您需要保存列表的状态。您必须维护您的checkedItems 的arrayList。在这方面，这篇**[文章](https://stackoverflow.com/questions/6057702/values-disappearing-from-a-listview-on-scroll-android)**可能会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:00:17.527

您可以使用此适配器类并通过使用获取选定的复选框 id`listview.getPositionForView(cBox)`

```
 public class aAdapter extends SimpleAdapter {
    //private List<Table> tables;
    SharedPreferences prefs;
    private Activity activity;
    String val = "";

    //@SuppressWarnings("unchecked")
    public aAdapter(Activity context, List<? extends Map<String, String>> tables, int resource, String[] from,
            int[] to) {
        super(context, tables, resource, from, to);
        //this.tables = (List<Table>) tables;
        activity    =   context;
    }

    public View getView(final int position, final View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
        if (row == null) 
        {
            LayoutInflater inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.reports_list, null);
        }       

        final CheckBox cBox=(CheckBox)row.findViewById(R.id.cb1);
        if(bulkflag)
        {
            cBox.setVisibility(View.VISIBLE);
        }
        else
        {
            cBox.setVisibility(View.GONE);
        }
        cBox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if(cBox.isChecked())
                {
                    //selectedIds.add(recIdArr.get(reportslistview.getPositionForView(cBox)));
                      System.out.println("position "+reportslistview.getPositionForView(cBox)+" Checked");
                }
                else
                {
                      System.out.println("position "+reportslistview.getPositionForView(cBox)+" UnChecked");
                }
            }
        });
        return row;
    }
} 
```

# xtk - 体积的空间变换

> ID：11930862
> 
> 赞同：0
> 
> 时间：2012-08-13T08:46:16.197
> 
> 标签：xtk

我有 2 个 nifti 图像卷，我想使用 XTK 一起显示。它们都已经使用 Mevislab 的相关 ITK 模块转换为 NRRD。两个体积都是在同一个 MR 会话中获取的，但它们在空间分辨率和视野方面（甚至按方向）不同，因此 XTK 必须牢记 NRRD 的“空间方向”和“空间原点”字段来显示它们在相对空间位置方面是正确的。但这似乎在实践中不会发生。

我已经阅读了关于修复“空间起源”部分的问题和答案，但它仍然遇到了“空间方向”的问题。我最近的尝试是在加载卷后尝试修改卷的转换，但这似乎对显示的卷没有任何影响。然而，我可以使用 TRK 光纤文件成功地做到这一点，但更改卷的转换不会产生任何效果。所以问题是：我如何正确加载（NRRD）卷，同时考虑到它对患者/扫描仪空间的完整空间转换，以便多个加载的卷正确匹配？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:47:05.183

遗憾的是，目前没有考虑扫描方向。这应该很快发生，因为它非常重要。

作为一种解决方法，可以使用变换方法来变换体积的每个切片。您基本上循环遍历孩子，然后将变换应用于每个孩子。

如果您愿意为解析器贡献这些功能，那就太好了！此外，现在支持 NII 格式，因此您不必转换为（慢得多的）NRRD。

# c# - 在 C# RESTful 服务中返回 XElement 是否被视为不好的做法？

> ID：11930868
> 
> 赞同：0
> 
> 时间：2012-08-13T08:46:26.577
> 
> 标签：c#, rest, xelement

我想返回一个高度定制的 xml，但是我的对象的序列化不允许我操作 xml 格式，或者至少我做不到。所以我正在考虑返回一个 XElement，因为它是可能的。那会被认为是不好的做法吗？大多数方法将返回一个 XElement。

# objective-c - 显示科学计数法的 Objective C 计算器

> ID：11930872
> 
> 赞同：0
> 
> 时间：2012-08-13T08:46:41.533
> 
> 标签：objective-c, formatting, calculator

因此，我在 Objective C 中编写了一个计算器，并将显示格式设置为 .4g，因为我只需要有效数字和 4 个小数位。这很好用:) 当它显示更长的数字（如 234,000）时，我希望它不显示 2.34E+05 等。我允许它自动调整标签中的文本大小，所以我知道这不仅仅是标签太小。是否有一段代码可以让它显示实际数字而不是科学记数法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:48:45.940

`%f`使用而不是格式化`%g`不会使用[标准形式](http://www.gcse.com/maths/standard_form.htm)。

看看这个[规范](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)。

* * *

编辑1：

我找到[了这个答案](https://stackoverflow.com/a/6751827/916299)来帮助四舍五入。

```
-(float) round:(float)num toSignificantFigures:(int)n {
    if(num == 0) {
        return 0;
    }

    double d = ceil(log10(num < 0 ? -num: num));
    int power = n - (int) d;

    double magnitude = pow(10, power);
    long shifted = round(num*magnitude);
    return shifted/magnitude;
} 
```

然后我结合这两个选项得到：

```
NSLog(@"%.0f", [self round:number toSignificantFigures:4]); 
```

* * *

编辑2：

那这个呢：

```
- (NSString *) floatToString:(float) val {
    NSString *ret = [NSString stringWithFormat:@"%.5f", val];
    unichar c = [ret characterAtIndex:[ret length] - 1];
    while (c == 48 || c == 46) { // 0 or .
        ret = [ret substringToIndex:[ret length] - 1];
        c = [ret characterAtIndex:[ret length] - 1];
    }
    return ret;
} 
```

我没有对此进行测试，但它看起来好像将小数限制为 5，然后删除任何尾随零或小数点。

[[[来源]](http://www.iphonedevsdk.com/forum/iphone-sdk-development/37665-float-to-string-removing-trailing-zeros.html)]

# wordpress - 错误：wp-includes/post.php 中的引用只能返回变量引用

> ID：11930877
> 
> 赞同：4
> 
> 时间：2012-08-13T08:47:23.563
> 
> 标签：wordpress, php

当我在**WordPress**设置中启用 PHP 错误报告时，我不断收到此错误。

`Notice: Only variable references should be returned by reference in /Users/admin/Sites/wp-includes/post.php on line 3394`

我觉得这与**分类法及其层次结构**有关。

**一段时间以来一直在尝试在我正在编写的插件**中追踪它。

这些是 WP Core 中的实际代码行，返回在精确的行上。

```
 // Make sure the post type is hierarchical
 $hierarchical_post_types = get_post_types( array( 'hierarchical' => true ) );
 if ( !in_array( $post_type, $hierarchical_post_types ) )
      return false; 
```

我会继续调试它，直到找到问题为止，但是任何输入都会很好，因为我没有在我的插件中找到问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T08:53:53.850

`return false;`- 这不是一个变量
尝试类似

```
if ( !in_array( $post_type, $hierarchical_post_types ) ) {
      $rv = false;
      return $rv;
} 
```

（旁注：我不知道您正在使用的 wordpress 和/或 mod 正在做什么，但也许/可能“通过引用返回”a）首先是不必要的，b）来自 php4 实现的遗留物)

# ipad - iPad 播放器有时有一个用于 mp4 文件的删除播放按钮 - html5 视频标签

> ID：11930880
> 
> 赞同：0
> 
> 时间：2012-08-13T08:48:03.637
> 
> 标签：ipad, html5-video, mp4

我有一个 HTML5 视频标签，它为我们生成的一些 mp4 文件提供服务，并存储在服务器上，大部分情况下都可以正常工作。

但有时，ipad 上的播放按钮被删除，视频无法播放。相同的视频可以在不同的瞬间播放。

我似乎无法弄清楚为什么会发生这种情况，也只是有时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:32:15.483

您是否有机会使用 iOS 3.0？如果是这样的话，问题就很多了。包含海报可能会破坏视频，甚至仅包含外部 javascript 也可能会搞砸。

# localization - Ruby on Rails 中的本地化：*.yml 文件中的嵌套值

> ID：11930881
> 
> 赞同：0
> 
> 时间：2012-08-13T08:48:19.597
> 
> 标签：localization, ruby-on-rails-3.2

本地化 yml 文件 *.yml

```
errors:
    template:
      body:       "Body error message"
        header:
          one:    "1 error "
          other:  "%{count} errores" 
```

由于某种原因，它会在页面上引发错误，`"(/home/alex/RubymineProjects/psg/config/locales/es.yml): did not find expected key while parsing a block mapping at line 248 column 7"`这意味着其中有问题。

如果我删除`"Body error message"`（只有值，而不是`body`键），那么一切都很好，页面上没有错误。

怎么了？如何`body` **使用值**及其嵌套值定义键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:44:57.190

您的缩进是错误的：`body`并且`header`应该在相同的深度：

```
errors:
  template:
    body:       "Body error message"
    header:
      one:    "1 error "
      other:  "%{count} errores" 
```

# javascript - 如何在highcharts中实现多点数据选择？

> ID：11930884
> 
> 赞同：0
> 
> 时间：2012-08-13T08:48:30.550
> 
> 标签：javascript, charts, highcharts

```
 $(function () {
    var $report = $('#report');

    // create the chart
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            events: {
                selection: function(event) {
                    if (event.xAxis) {
                        $report.html('min: '+ event.xAxis[0].min +', max: '+ event.xAxis[0].max);
                    } else {
                        $report.html ('Selection reset');
                    }
                }
            },
            zoomType: 'x'
        },
        xAxis: {
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
}); 
```

这是示例代码。我想在 pin 模式下选择至少两个点。它仅包含选择后的缩放数据。在高位图表中是否有多个点可供选择？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:41:56.217

Highcharts 通过 allowPointSelect 选项提供多选：

例如对于柱形图：

```
var chart = new Highcharts.Chart({
    plotOptions: {
        column: { allowPointSelect: true }
    }
}); 
```

`Shift`+鼠标左键单击或`Ctrl`+鼠标左键单击将多选点。

[Highcharts API 文档](http://api.highcharts.com/highcharts#plotOptions)中提供了其他图表类型的示例

# mysql - 如果小于5就添加一行，否则替换MySQL中最小的数字

> ID：11930886
> 
> 赞同：2
> 
> 时间：2012-08-13T08:48:34.760
> 
> 标签：mysql, sql

我很困在一个 Mysql 查询上。我有一张三列的桌子；

```
 user_id | person_id | score. 
```

该表将用于存储每个人的前 5 个高分。

我需要在查询中检查特定人的行数是否少于五行。是不是少了，插入新行。但是如果有五行，我必须用新的替换最低分数。

它用于用 PHP 编写的 Web 服务，有关新分数的数据作为参数发布到方法中。

已经卡了几个小时了——甚至有可能在一个查询中实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:25:39.813

如果您有一个标识最低分数的唯一键，则它可能是可能的。然后你可以使用 INSERT ... ON DUPLICATE KEY 构造。但是您必须安装一个触发器来明确跟踪最低分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:27:50.457

我会提出这种情况（我没有尝试过，这只是一个想法）：

据我了解，您只需要 5 个 ID。你可以运行这样的子查询

```
SELECT MAX(id) AS last_id FROM table

SELECT MIN(score), id AS lowest_id FROM table 
```

然后

```
insert or replace into table (id, ...) values ( MIN(last_id+1, lowest_id),  ... ) 
```

有可能的错误，也只有一个子查询是可能的，但我希望你明白主要的想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:29:54.383

你可以在mysql中使用存储过程。我不知道这些表的名称，但如果你仔细观察，你就会明白它是如何工作的。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS test $$
CREATE PROCEDURE test( IN testparam VARCHAR(22) )
BEGIN
 DECLARE count INT(11);
 SET count = (SELECT COUNT(*) FROM persons );
 IF count < 5 THEN
  insert into table_needed_for_insert values(testparam);
 ELSE
  update table_needed_for_insert where score=(select min(score) from table_needed_for_insert);
 END IF;

 select * from table_needed_for_insert
END $$
DELIMITER; 
```

以及如何执行这个东西 CALL test(1); 1 是参数，您可以根据需要创建任意多个。从php你可以直接调用

```
$result = mysql_query("call test(".$param.")"); 
```

在这里您可以查看有关 mysql 存储过程的教程： [http ://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx](http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:54:15.567

imo最简单的方法是插入数据，

```
INSERT INTO top_scores (user_id, person_id, score_id) VALUES (1,2,3) 
```

然后删除不适当的行

```
DELETE top_scores FROM top_scores
INNER JOIN 
(SELECT * FROM top_scores WHERE person_id = 2 ORDER BY score ASC LIMIT 5, 1000000) AS inappropriate_rows 
USING (user_id, person_id, score) 
```

# jetty - Nexus / Jetty 不想再启动：未解析的地址

> ID：11930895
> 
> 赞同：0
> 
> 时间：2012-08-13T08:49:37.473
> 
> 标签：jetty, nexus

我们有一个 Nexus 服务器，它在星期五之前运行良好。Nexus 已停止，因为我们无法再次启动它，但我不知道为什么？

我认为这是一个码头问题。这是堆栈跟踪：

```
jvm 1    | 2012-08-13 09:31:10 WARN  [er_start_runner] - org.mortbay.log - failed SelectChannelConnector@*:8080
jvm 1    | java.net.SocketException: Unresolved address
jvm 1    |  at sun.nio.ch.Net.translateToSocketException(Net.java:58)
jvm 1    |  at sun.nio.ch.Net.translateException(Net.java:84)
jvm 1    |  at sun.nio.ch.Net.translateException(Net.java:90)
jvm 1    |  at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:61)
jvm 1    |  at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:216) 
```

配置是（jetty.xml）：

```
<Configure id="Server" class="org.mortbay.jetty.Server">
    <Call name="addConnector">
        <Arg>
            <New class="org.mortbay.jetty.nio.SelectChannelConnector">
              <Set name="host">${application-host}</Set>
              <Set name="port">${application-port}</Set>
            </New>
        </Arg>
    </Call>

    <Set name="handler">
      <New id="Contexts" class="org.mortbay.jetty.handler.ContextHandlerCollection">
          <!-- The following configuration is REQUIRED, and MUST BE FIRST. 
               It makes the Plexus container available for use in the Nexus webapp. -->
          <Call name="addLifeCycleListener">
              <Arg>
                <New class="org.sonatype.plexus.jetty.custom.InjectExistingPlexusListener" />
              </Arg>
          </Call>

          <!-- The following configuration disables JSP taglib support, the validation of which
               slows down Jetty's startup significantly. -->
          <Call name="addLifeCycleListener">
              <Arg>
                <New class="org.sonatype.plexus.jetty.custom.DisableTagLibsListener" />
              </Arg>
          </Call>
      </New>
    </Set>

    <New id="NexusWebAppContext" class="org.mortbay.jetty.webapp.WebAppContext">
      <Arg><Ref id="Contexts"/></Arg>
      <Arg>${webapp}</Arg>
      <Arg>${webapp-context-path}</Arg>
      <Set name="extractWAR">false</Set>
    </New>

    <Set name="stopAtShutdown">true</Set>
    <Set name="sendServerVersion">true</Set>
    <Set name="sendDateHeader">true</Set>
    <Set name="gracefulShutdown">1000</Set>
</Configure> 
```

和 plexus.properties：

```
application-port=8081
application-host=0.0.0.0
runtime=${basedir}/runtime
apps=${runtime}/apps
nexus-work=${basedir}/../../data/nexus/sonatype-work/nexus
nexus-app=${runtime}/apps/nexus
webapp=${runtime}/apps/nexus/webapp
webapp-context-path=/nexus
security-xml-file=${nexus-work}/conf/security.xml
application-conf=${nexus-work}/conf
runtime-tmp=${runtime}/tmp

# If this file is present, it will be used to configure Jetty.
jetty.xml=${basedir}/conf/jetty.xml

# Uncomment this to use the debug js files
#index.template.file=templates/index-debug.vm 
```

Nexus 版本是 1.9.2.3

我不明白：为什么它要在端口 8080 启动连接器（而我只设置端口 8081）以及地址 * 是什么意思（为什么不是 0.0.0.0）？当然，为什么它不想再开始了？

非常感谢您的所有想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:39:01.453

我无法评论 8080 与 8081 的问题，但至于 SocketException ...

SocketException: unresolved address 通常是由于系统上存在某种 host/dns/resolve 配置问题。

可能有助于识别问题的 java 最基本的测试用例如下

```
import java.net.InetAddress;
import java.net.InetSocketAddress;

public class AddrTest
{
    public static void main(String[] args)
    {
        try
        {
            InetAddress addr = InetAddress.getByName("0.0.0.0");
            System.out.println("InetAddress => " + addr);
            System.out.println("InetAddress.isAnyLocalAddress = " + addr.isAnyLocalAddress());
            System.out.println("InetAddress.isLinkLocalAddress = " + addr.isLinkLocalAddress());
            System.out.println("InetAddress.isLoopbackAddress = " + addr.isLoopbackAddress());

            InetSocketAddress isockaddr = new InetSocketAddress(addr,8080);
            System.out.println("InetSocketAddr = " + isockaddr);
            System.out.println("InetSocketAddr.isUnresolved = " + isockaddr.isUnresolved());
        }
        catch (Throwable e)
        {
            e.printStackTrace();
        }
    }
} 
```

运行这个，你应该有输出

```
InetAddress => /0.0.0.0
InetAddress.isAnyLocalAddress = true
InetAddress.isLinkLocalAddress = false
InetAddress.isLoopbackAddress = false
InetSocketAddr = /0.0.0.0:8080
InetSocketAddr.isUnresolved = false 
```

需要注意的是2行......

*   `InetAddress.isAnyLocalAddress = true`- 表示 java + OS 将此报告为 ANY addr
*   `InetSocketAddr.isUnresolved = false`- 意味着 java + OS 能够解析这个套接字地址

如果您在此测试期间遇到异常，那么您的系统上存在某种基本的主机解析问题（dns、dhcp.vpn、etc/hosts、没有可用的 IPv4 等），您在 java、jetty 中没有做任何事情, 或 nexus 可以解决此类问题。您需要在操作系统/网络级别解决这个问题（不是双关语）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T15:53:05.827

我有一个类似的问题。码头在码头集装箱（码头：9.3.24-jre8）内运行。您需要在 start.ini 中注释掉有关 http.host 的行：

```
#jetty.http.host='0.0.0.0' 
```

由于某种原因，网络接口混淆了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T07:29:11.157

解决了！

文件 jetty.xml 只有 'r' 权限是不够的：它还必须有 'x' 权限。所以 Jetty 无法读取文件 jetty.xml ，在这种情况下，它会尝试在 '*:8080' => * 上启动默认连接器，这是不可解析的（我不知道他们为什么使用 * 而不是 0.0.0.0 ？ ??)

所以这是一个配置问题。

# javascript - javascript关闭的效果是什么

> ID：11930897
> 
> 赞同：0
> 
> 时间：2012-08-13T08:49:39.977
> 
> 标签：javascript, closures

我正在学习 javascript 闭包，我已经阅读了很多关于闭包的示例，但我仍然对为什么我们必须使用闭包感到困惑？

这是我从“The Good Parts”复制的一个例子

```
 var myObject = function(){
   var value = 0;

   return {
        increment: function(inc){
             value += inc;
        },
        getValue: function(){
             return value;
        }
   }

 };
  var obj1 =myObject();    
  document.write(obj1.getValue()); //0
  obj1.increment(10);
  document.write(obj1.getValue());//10 
```

但我想知道为什么我们不应该那样写？

```
 var myObject = function(){
    var value = 0;

     this.increment= function(inc){
          value += inc;
     },
     this.getValue= function(){
          return value;
     }

  };
   var obj1 =new myObject(); 
   document.write(obj1.getValue());
   obj1.increment(10);
   document.write(obj1.getValue()); 
```

第一次问问题，英语不好，见谅！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:24:08.790

As far as the closure is concerned the syntax are equivalent.

*However* if you want your object to be typed you must use the second syntax.

With the first syntax you will have:

```
obj1 instanceof myObject === false. 
```

Making it *kind of* a singleton.

Whereas the second syntax will give you :

```
obj1 instanceof myObject === true 
```

Making your object an instance of myObject

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:55:35.743

这很好用。这两种方法都使用闭包来包含局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:57:24.727

当您需要访问不再在范围内的对象内的值时，闭包很有帮助。当您使用 The Good Parts 中的代码时，`value`每次使用时变量都会递增`increment`，尽管函数`myObject`已返回。

# jquery - 在表格单元格内创建动态href

> ID：11930898
> 
> 赞同：0
> 
> 时间：2012-08-13T08:49:45.067
> 
> 标签：jquery, dynamic, html-table, href

我的问题是这样的：

我正在尝试在表格中创建一些单元格，这些单元格将由我从 XML 文档中提取的数据填充，但我也希望这些单元格是超链接。我正在这样做：

```
var table = $('<table></table>').addClass('table');
for(i=0;i<x.length;i++){
    var row = $('<tr></tr>').text(x.item(i).getAttribute("id")).attr('href', 'www.my-url.com/'+x.item(i).getAttribute("id"));
    table.append(row);
} 
```

单元格用我想要的文本正确填充，但单元格不可点击。我在控制台中没有收到任何错误。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:50:09.877

您不能在`<tr>`标签上设置 href 属性并期望它像`<a>`标签一样工作。相反，您需要在`<a>`标签内放置一个`<tr>`标签。你可以这样做：

```
var table = $('<table class="mytable"></table>');
for (var i = 0; i < x.length; i++) {
    var txt = x.item(i).id;
    var url = 'http://www.my-url.com/' + txt;
    var row = $('<tr></tr>').html('<a href="' + url + '">' + txt + '</a>');
    table.append(row);
} 
```

该方法创建 HTML 并让浏览器解析它。您也可以像这样直接创建元素：

```
var table = $('<table class="mytable"></table>');
for (var i = 0; i < x.length; i++) {
    var txt = x.item(i).id;
    var url = 'http://www.my-url.com/' + txt;
    var row = $('<tr></tr>')
    var link = document.createElement("a");
    link.href = url;
    link.innerHTML = txt;
    row.append(link);
    table.append(row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:53:26.710

尝试：

`var row = $('<tr></tr>').html(....`

# asp.net - Kentico CMS 5 - 授予用户角色访问内容属性选项卡的权限

> ID：11930903
> 
> 赞同：1
> 
> 时间：2012-08-13T08:50:18.257
> 
> 标签：asp.net, content-management-system, kentico

我想授予用户角色访问 Kentico CMS 中我的页面的内容属性选项卡的权限。我已经设法通过模块属性使选项卡可见，但是我仍然收到一条消息，指出它们没有正确的权限。

我似乎看不到任何可以让我进入该区域的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:16:57.710

1.  您是否为该角色设置了正确的 UI 个性化选项？

[http://devnet.kentico.com/Blogs/Petr-Vozak/January-2010/Kentico-CMS-5-0---UI-personalization.aspx](http://devnet.kentico.com/Blogs/Petr-Vozak/January-2010/Kentico-CMS-5-0---UI-personalization.aspx)

![在此处输入图像描述](../Images/336d00b89cdacf378b687111c72a6652.png)

2.  是否启用了 UI 个性化？站点管理器 -> 设置 -> 安全和成员资格 -> 启用 UI 个性化

3.  您是否确保用户角色有权访问 CMSDesk 本身？

# javascript - 如何对字母数字字符串值进行排序？

> ID：11930906
> 
> 赞同：1
> 
> 时间：2012-08-13T08:50:32.157
> 
> 标签：javascript, sorting

在这里，我正在使用 javascript 对字母数字字符串值进行排序。但它只对字符串进行排序。我需要从字符串中拆分数值并对数值进行排序。这是我的代码

```
 function sortUnorderedList(ul, sortDescending) {
        if (typeof ul == "string")
            ul = document.getElementById(ul);

        var lis = ul.getElementsByTagName("li");
        var vals = [];
        for (var i = 0, l = lis.length; i < l; i++)
            vals.push(lis[i].innerHTML);

        vals.sort();

        if (sortDescending)
            vals.reverse();

        for (var i = 0, l = lis.length; i < l; i++)
            lis[i].innerHTML = vals[i];
    } 
```

有什么建议吗？

**编辑**：当前结果

```
PPG 101
PPG 102
PPG 57
PPG 58
PPG 99 
```

预期结果：

```
PPG 57
PPG 58
PPG 99
PPG 101
PPG 102 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:59:19.267

要执行数字排序，您必须在调用 sort 方法时将函数作为参数传递。

```
vals.sort(function(a, b) { 
    return (a-b);
}); 
```

有关详细信息，请参阅[http://www.javascriptkit.com/javatutors/arraysort.shtml](http://www.javascriptkit.com/javatutors/arraysort.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:09:03.590

如果您希望先按字符串排序，然后按空格后的数值排序，则需要指定自己的函数以传递给`sort`函数，如下所示：

```
arr.sort(function(a,b) { 
  a = a.split(' ');
  b = b.split(' ');
  if (a[0] == b[0]) {
    return parseInt(a[1]) - parseInt(b[1]);
  }
  return a[0] > b[0];
}); 
```

上面的示例首先按字符串排序，然后按字符串后面的数字（数字）排序。上面的代码适用于被排序的假设值将始终采用上述格式并且缺少对输入的任何检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-21T18:04:31.200

```
function sort(values) {
    var y = values.sort(function (a, b) {
        var x = a.split(' ');
        var y = a.split(' ');
        if (parseInt(x[1]) > parseInt(y[1])) {
            return a > b;
        }
        return a < b;
    });
    return y;
} 
```

# eclipse-rcp - 从另一个 rcp 应用程序启动 rcp 应用程序

> ID：11930913
> 
> 赞同：2
> 
> 时间：2012-08-13T08:50:54.853
> 
> 标签：eclipse-rcp

我有一个 rcp eclipse 应用程序，并且从该应用程序中，使用上下文菜单操作我想启动一个新的 rcp 应用程序。我怎么做 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:54:43.783

在我看来，你有两个选择。

您可以在两个 RCP 之间创建依赖关系，并且当用户单击菜单时，只需实例化第二个 RCP 主类。

或者您可以将第二个 RCP 作为外部命令执行。这意味着您必须知道它的安装位置。

# c# - Process.Kill() 问题

> ID：11930914
> 
> 赞同：3
> 
> 时间：2012-08-13T08:50:58.937
> 
> 标签：c#, .net-3.5

我有以下代码行：

```
Process aProcess = Process.Start("ieexplorer", aDummyHTMLFilePath);
//I do nothing in between
aProcess.Kill(); 
```

如果没有其他 IE 窗口打开，这将运行**顺利**。

但是如果有一扇窗户打开，我会`System.InvalidOperationException`说`aProcess.Kill();`：

> 无法处理请求，因为进程已退出。

另外，我注意到在这种情况下，`aProcess.HasExited`在上面代码的第 1 行之后是正确的。

即使有其他IE窗口打开，如何才能顺利关闭IE？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:59:55.273

当你像你一样启动一个新的 Internet Explorer 实例时，它会尝试查看 Internet Explorer 是否已经在运行。如果是这样，则 URL 会在已运行的实例中打开，并且新实例会立即退出。这意味着当您尝试终止您启动的进程时，它已经自动退出。但是，您将在屏幕上看到一个新的浏览器窗口或选项卡，但它由现有的 Internet Explorer 进程托管。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:56:19.770

我没有遇到和你一样的问题

如果进程仍在运行，我发现以下方法有效

```
 Process p = Process.Start("notepad.exe", "");
    Thread.Sleep(5000);
    if (!p.HasExited) p.Kill(); 
```

如果窗口已关闭，它只会抱怨。因此检查

# c# - 单击行标题时如何选择整行？

> ID：11930917
> 
> 赞同：1
> 
> 时间：2012-08-13T08:51:13.513
> 
> 标签：c#, .net, wpf, telerik, radgridview

我希望能够选择单元格并选择行。为了选择单元格，我设置了 SelectionUnit="Cells" 和 SelectionMode="Extended"。它工作正常。但现在我需要能够选择行。用户可以清楚地通过行标题（在行的左侧）选择行。

如何轻松实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:13:23.330

快速解决：

```
private void RadGridView_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    if(e.RightButton == MouseButtonState.Pressed)
        return;

    var source = e.OriginalSource as DependencyObject;
    if(source == null)
        return;

    var cell = source.FindVisualParent<GridViewCell>();
    if(cell != null)
    {
        ((RadGridView)sender).SelectionUnit = GridViewSelectionUnit.Cell;
    }
    else
    {
        var row = source.FindVisualParent<GridViewRow>();
        if(row != null)
        {
            ((RadGridView)sender).SelectionUnit = GridViewSelectionUnit.FullRow;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:06:32.817

开箱即用的 RadGridView 将为您提供仅将选择单元设置为 Cells 或 FullRow 的功能。它不能为您提供这两种条件。

您可以通过将 SelectionUnit 设置为 Cell 并将 SelectionMode 设置为 Extended 来提供扩展的单元格选择。

现在为了进行行选择，您必须将 SelectionUnit 更改为 FullRow。

这就是 RadGridView 的工作原理。

有关更多信息文档，我建议您查看有关此功能的以下文档：

[http://www.telerik.com/help/wpf/gridview-selection-basics.html](http://www.telerik.com/help/wpf/gridview-selection-basics.html)

[http://www.telerik.com/help/wpf/gridview-multiple-selection.html](http://www.telerik.com/help/wpf/gridview-multiple-selection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T12:56:53.117

只需在定义列时添加 telerik gridviewselectcolumn。此列将复选框添加到每行和标题。通过单击标题复选框将选择所有行。

```
<telerik:RadGridView.Columns>
 <telerik:GridViewSelectColumn HeaderCellStyle="{StaticResource GridViewHeaderCellStyle1}"/>
 <telerik:GridViewDataColumn Header="Column1" HeaderCellStyle="{StaticResource GridViewHeaderCellStyle1}" MinWidth="150"
                                                    DataMemberBinding="{Binding XYZ}" />
</telerik:RadGridView.Columns> 
```

# c# - 清除按钮使listview中的列表在c#中变得不可见

> ID：11930920
> 
> 赞同：0
> 
> 时间：2012-08-13T08:51:23.717
> 
> 标签：c#, listview

我有列表视图和两个按钮；清晰可见。

视图按钮按应有的方式完美运行，当我单击清除按钮时，它确实按应有的方式清除。

单击清除按钮后出现问题，查看按钮似乎不起作用。它没有查看我想要的任何内容。

当我先单击清除按钮然后单击查看按钮时也是如此，它不会查看任何内容。好像清除按钮将保存列表视图中可见的数据。

谁能帮我这个？

下面是我的清除按钮代码。

```
 private void clear_Click(object sender, EventArgs e)
        {
            listView1.Clear();
        } 
```

这是我的查看按钮。

```
private void view_Click(object sender, EventArgs e)
{               
   ListViewItem listviewitem;
   for (int i = 0; i <= _server.Q.NoOfItem - 1; i++)
   {
      String words = _server.Q.ElementAtBuffer(i).ToString();
      String[] berjaya = words.Split(new char[] { ',', '[', ']', ' ' }); 
      listviewitem = new ListViewItem(berjaya[43]);
      listviewitem.SubItems.Add(berjaya[41]);
      listviewitem.SubItems.Add(berjaya[1]);
      listviewitem.SubItems.Add(berjaya[45]);
      this.listView1.Items.Add(listviewitem);

      listView1.FullRowSelect = true;

      listView1.View = View.Details;

      foreach (ColumnHeader ch in this.listView1.Columns)
          ch.Width = -2;

   }
} 
```

为了更好地查看，这是我对这两种情况的界面。

![在此处输入图像描述](../Images/270b5aa0af4d68259e9f5eb684a52265.png)![在此处输入图像描述](../Images/3ada6a606fd773886887dca10eac8b28.png)

第一张图片显示了单击查看按钮时的输出。

第二张图片显示了单击清除按钮时的输出。它仍然以这种方式打印出来，无论是我们先单击清除按钮还是单击查看按钮后。它不会在列表视图中显示数据。

我什至在不使用这样的服务器的情况下进行了测试：

```
XmlDocument xml = new XmlDocument();
        xml.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\myself.xml");
        XmlNodeList xnList = xml.SelectNodes("/main/myself");

        listviewitem = new ListViewItem("a");
        listviewitem.SubItems.Add("b");
        listviewitem.SubItems.Add("c");
        listviewitem.SubItems.Add("d");
        this.listView1.Items.Add(listviewitem);

        listView1.FullRowSelect = true;
        //show header
        listView1.View = View.Details;

        // Loop through and size each column header to fit the column header text.
        foreach (ColumnHeader ch in this.listView1.Columns)
        {
            ch.Width = -2;
        } 
```

它仍然和以前一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:58:18.533

取决于查看按钮的代码，您必须知道，如果您希望在清除 ListView 后所有项目再次出现，则必须将项目重新添加到 Listview 中，如下所示：

```
listView.Items.Add("I am being added to the list"); 
```

请务必发布您的查看按钮代码，以确保我正确回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:53:51.963

创建一个 ListViewItem，手动将项目添加到一个视图，直接访问控件：所有这些都是你不应该做的。
您应该有一个 DateList 属性：您的 ETA/Priority/date/... 对象的 ObservableCollection。然后在您的 ListView 中绑定到此属性 ItemSource="{Binding DateList}"，不要忘记在 Window 的 new() 或 loaded() 函数中设置 DataContext。然后您只需在后面的代码中对 DateList 进行操作，添加或删除您的数据项。
如果你不这样做，你会给自己带来越来越多的问题（比如这个：看到像清除这样的简单操作会破坏你的代码......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:52:51.673

尝试使用

```
private void clear_Click(object sender, EventArgs e)
{
      listView1.Items.Clear();
} 
```

代替

```
private void clear_Click(object sender, EventArgs e)
{
      listView1.Clear();
} 
```

`ListView.Clear();`方法用于从 a 中删除所有项目以及列，`ListView`但我想您只想删除项目，因此您应该`ListView1.Items.Clear();`改用。

# calendar - 无法使用 fullcalendar 从谷歌日历中检索事件

> ID：11930922
> 
> 赞同：0
> 
> 时间：2012-08-13T08:51:33.763
> 
> 标签：calendar, fullcalendar

我关注了关于 Adam Shaw 的完整日历的教程，但我无法从谷歌日历中检索事件。这是我的代码：

```
 <!DOCTYPE html>
    <html>
    <head>
    <link href="<?php echo css_url().'fullcalendar.css'; ?>" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="<?php echo js_url().'jquery.js'; ?>"></script>
    <script type="text/javascript" src="<?php echo js_url().'fullcalendar.js'; ?>"></script>
    <script type='text/javascript' src='fullcalendar/gcal.js'></script>

    <script type='text/javascript'>

    $(document).ready(function() {

    // page is now ready, initialize the calendar...

    $('#calendar').fullCalendar({
        // put your options and callbacks here
    })

    });

    $(document).ready(function() {

      $('#calendar').fullCalendar({
          events: $.fullCalendar.gcalFeed(
             "http://www.google.com/calendar/feeds/username%40gmail.com/public/basic") 

    });

    });

    </script>

</head>
<div id='calendar'></div>
</html 
```

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:04:29.500

您应该只实例化一次 FullCalendar。用这个替换你的脚本标签，它应该可以工作：

```
<script type='text/javascript'>
    $(document).ready(function() {
      $('#calendar').fullCalendar({
          events: $.fullCalendar.gcalFeed(
             "http://www.google.com/calendar/feeds/username%40gmail.com/public/basic") 
      });
    });
</script> 
```

让我知道这是否有帮助。

编辑：小提琴 - [http://jsfiddle.net/100thGear/JeDFG/](http://jsfiddle.net/100thGear/JeDFG/)。另外，请确保`gcal.js`路径正确并包含在您的 HTML 中

# ios - iphone SDWebImage 调整缓存图像的大小

> ID：11930923
> 
> 赞同：1
> 
> 时间：2012-08-13T08:51:35.363
> 
> 标签：ios, sdwebimage

我正在从 SBJson 解析器解析 json 并成功在表视图中显示它。我正在使用 SDWebImage 缓存图像以提供离线支持

```
 UIImageView *thumbImg = [[UIImageView alloc] initWithFrame:CGRectMake(5, 3, 50, 50)];
        thumbImg.tag = 1;
        thumbImg.contentMode = UIViewContentModeScaleAspectFill;
        thumbImg.layer.cornerRadius = 10;
        thumbImg.layer.masksToBounds = YES;
        thumbImg.layer.borderColor = [UIColor lightGrayColor].CGColor;
        thumbImg.layer.borderWidth = 1.0;
        [cell.contentView addSubview:thumbImg];

[thumbImg setImageWithURL:[NSURL URLWithString:myObj.thumbnailURL]
               placeholderImage:[UIImage imageNamed:@"Icon.png"]
                        success:^(UIImage *image) {
                            NSLog(@"success");
                        }
                        failure:^(NSError *error) {
                            NSLog(@"write error %@", error);
                        }]; 
```

它在我的 50x50 图像视图中完美显示。但是缩略图图像的大小大约为 400x600。因此，由于在 imageview 中加载了大图像缩略图，我的 tableview 滚动非常慢。如何在缓存之前调整 SDWebImage 获取的图像大小，以便下次从缓存加载时加载小尺寸图像。我有调整图像大小的功能，但不知道在哪里添加该代码。我试图通过给出我在成功块中获得的图像指针，但它没有效果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:38:20.160

这里！

该库将 SDWebImage 与 Resize 库集成

[https://github.com/toptierlabs/ImageCacheResize](https://github.com/toptierlabs/ImageCacheResize)

# sql - 使用 Teradata SPL 反转字符串

> ID：11930925
> 
> 赞同：1
> 
> 时间：2012-08-13T08:51:42.017
> 
> 标签：sql, string, stored-procedures, reverse, teradata

如何使用 Teradata 存储过程语言 (SPL) 反转字符串？要求是复制 SQL-Server 的 replace() 函数。这可以通过在 Teradata 中编写相应的 UDF 来实现，但我想使用过程来实现相同的目的。

然后，该过程可用于在变量用于具有 reverse() 的实际语句之前对其进行初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:51:42.017

这可以使用以下存储过程来实现。

其背后的主要逻辑是，在每次迭代中（迭代次数等于字符串的长度），我们将最后一个字母连接到一个变量。

```
REPLACE PROCEDURE database.REVERSE_STRING(INOUT STRING VARCHAR(20))
BEGIN
--Declare Variables
DECLARE STRING_LOCAL  VARCHAR(20); -- Local Copy
DECLARE STRING_LEN VARCHAR(20); -- String Length

--Initialize Variables
SET STRING_LEN = CHARACTER_LENGTH(STRING); -- Find Out the length of string
SET STRING_LOCAL = ''; -- Initialize local copy

--Main Loop
WHILE(STRING_LEN > 0)
DO
    SET STRING_LOCAL = STRING_LOCAL || SUBSTR(STRING,STRING_LEN,1); -- In each Iteration copy last alphabet and con cat with STRING_LOCAL
    SET STRING_LEN = STRING_LEN - 1; -- Decrease Iterator Value
END WHILE;

SET STRING = TRIM(STRING_LOCAL); -- Return reversed string

END; 
```

# jquery - 使用 jquery 检测 DOM 元素

> ID：11930928
> 
> 赞同：0
> 
> 时间：2012-08-13T08:51:55.043
> 
> 标签：jquery, dom

我想像 Firebug 一样检测我点击的 DOM 元素。到目前为止，谷歌只出现了关于检测到已删除的 DOM 元素的结果。

请告诉我这在 jQuery 中是否可行。如果没有，可以使用哪些第三方工具/库来实现目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:58:27.597

您可以使用它，尽管根据 DOM 的大小，它的性能可能不是很好。

```
$('*').on('click', function () {
    var clickedElement = this;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:01:24.103

您可以使用以下方法获取 BODY 标记内的所有标记（绑定侦听器以更改 mouseover、mouseout 的边框并在单击时检索元素的 ID）：

```
var elems = $("body *");

$(elems).each(function() {
    var elem = this;

    $(elem).bind("mouseover", function() {
        $(elem).css("border", "1px solid #00f");
    });        

    $(elem).bind("mouseout", function() {
        $(elem).css("border", "none");
    });        

    $(elem).bind("click", function() {
        $("#elements").html($(elem).attr("id"));
    });
}); 
```

​ 示例：[这里的 jsfiddle 示例](http://jsfiddle.net/kKcnu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:02:17.650

```
$('body').on('click', function () {
    var me = this;
    // you can also get the id like
    var id = this.id;
    // you can also get the class
    var classes = $(this).attr('class');
    // and more
}); 
```

如果你想阻止页面重新加载/默认提交，那么使用`preventDefault()`如下：

```
$('body').on('click', function (e) {
    e.preventDefault();

    var me = this;
    // you can also get the id like
    var id = this.id;
    // you can also get the class
    var classes = $(this).attr('class');
    // and more
}); 
```

对于动态元素，您需要一个委托事件处理程序*（又名实时）*，它也可以通过`.on()`如下方式完成

```
$('body').on('click', '*', function(e) {
  // you code like above approach
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:04:49.580

你可以试试这个：

**jQuery 代码**

```
$(document).ready(function(){
     $('*').on('click', function(){
          console.log(this);
     });
}); 
```

确保在文档中添加 JQuery。然后在上面试试。检查萤火虫上的控制台。

# css - 像这样进行导航的最简单方法是什么？

> ID：11930930
> 
> 赞同：0
> 
> 时间：2012-08-13T08:52:05.307
> 
> 标签：css, navigation, hover

我不知道如何制作这样的导航：

[http://www.andertons.co.uk/](http://www.andertons.co.uk/)

悬停几乎与主导航脱节。有什么想法/提示我将如何做到这一点？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:55:28.440

尝试这个：

```
<div class="naviItem">
    Games
    <ul>
        <li>Game 1</li>
        <li>Game 1</li>
        <li>Game 1</li>
    </ul>
</div> 
```

CSS：

```
.naviItem ul {
    display: none;
}

.naviItem:hover ul {
    display: block;
} 
```

# code-organization - 如何在实现和接口声明通常在同一个文件中的语言中有效地组织代码

> ID：11930931
> 
> 赞同：1
> 
> 时间：2012-08-13T08:52:08.273
> 
> 标签：code-organization

我通常在 C 和 C++ 中编写代码，其中实现和声明位于不同的文件（.c/.h 和 .cpp/.hpp）中，但我经常在不存在这种区别的 Haskell/Python/D 中编写代码。

我的问题是当我的代码趋于增长时，我很难清楚地了解文件中的内容。我想念“你只要看看.h就知道会发生什么”，并且往往会被混乱的感觉所淹没。

我解决这个问题的最佳尝试是将折叠放入文件中，但我想知道你们是怎么做的？你有一些我还没有尝试过的神奇解决方案吗？这只是一种心态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:55:19.783

我继续使用单独的文件，就像你在 C++ 中所做的那样，就像 Java 在其他语言中强制执行的那样，并且大量使用 import/require/etc。语言不强制不代表你不能系统地组织你的文件名和内容^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:55:50.130

我认为没有神奇的解决方案，但以下提示可能有效

*   使用类
*   为每个班级描述他们的责任
    *   写下每个类中使用了哪些数据
    *   写下每个类中使用了哪些功能
*   从小班开始，他们最终会成长
*   当班级变得太大时，将它们分开。
*   每个班级使用一个文件。
*   在公共/私有中拆分方法/数据（使用约定_）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:00:07.663

对于`Java`，maven 结构有点帮助。

```
src/main/java 
```

为您的主要代码和

```
src/test/java 
```

为您的测试代码。

除此之外，我还遵循这个包结构。

构成核心 api 的所有接口都将位于以 . 结尾的包中`api`。

实现将位于以 . 结尾的包中`impl`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:55:02.140

我使用 Java 约定将给定名称的类和接口尽可能多地放在具有该名称的文件中。我还使用 Maven，它有一个默认的目录结构，如果你必须查看其他人的项目，这很痛苦，但非常有用。

> 你有一些我还没有尝试过的神奇解决方案吗

我建议越简单越好。少记。;)

# python - Sphinx 搜索引擎是否正式支持 Python API？

> ID：11930932
> 
> 赞同：2
> 
> 时间：2012-08-13T08:52:10.707
> 
> 标签：python, sphinx

Sphinx 搜索引擎是否正式支持 Python API？[我在这里](http://code.google.com/p/sphinxsearch/source/browse/trunk/api/sphinxapi.py?r=2011)只找到了 Python API ，但似乎很久没有更新了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:59:20.460

是的，Python API 得到官方支持，并且它确实会收到更新，请参阅[http://code.google.com/p/sphinxsearch/source/list?path=/trunk/api/sphinxapi.py&start=3316](http://code.google.com/p/sphinxsearch/source/list?path=/trunk/api/sphinxapi.py&start=3316)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:11:35.150

API 通常没有在积极开发中。大多数新东西都将直接用于 sphinxQL - 这基本上是未来。

[PHP API 没有太多更新， http](http://code.google.com/p/sphinxsearch/source/list?path=/trunk/api/sphinxapi.php&start=3316) ://code.google.com/p/sphinxsearch/source/list?path=/trunk/api/ sphinxapi.php&start=3316 可能被认为是规范的 API 参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T01:16:13.697

官方 SphinxSearch API 几乎没有更新，但您实际上可以使用 MySQL 驱动程序/模块（例如 pymysql）。下面是一个例子：

```
import pymysql
db = pymysql.connect(host='127.0.0.1',port=9301,user='',passwd='',charset='utf8',db='')
cur = db.cursor()
qry='SELECT id,weight() FROM idx_name WHERE MATCH(\'"your Query"/1\') LIMIT 10 OPTION ranker=SPH04'
cur.execute(qry);row = cur.fetchall()
print(row)
cur.close();db.close() 
```

# php - 数据库中的菜单和所有页面内容

> ID：11930933
> 
> 赞同：0
> 
> 时间：2012-08-13T08:52:14.927
> 
> 标签：php, zend-framework, zend-db

我正在编写带有一些 cms 功能的简单网站。将所有菜单项和页面内容保存在数据库中会很好。

我有一个带有`id`,`name`和`parent_id`一个`content`字段的表。将来我可能会将内容移动到`content`表格中，以便使用 fk 将多个内容添加到菜单项中。但这里不是这样。

问题是：

1.  我需要菜单表中的 URL 字段吗？
2.  我还需要什么才能让它工作？每个页面都应该有自己的控制器吗？我是初学者`zend framework`，所以请给我一些指示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:42:11.233

让我们从问题 2 开始：每个页面都不需要自己的控制器。如果您的页面是静态的，您甚至可以使用单个操作加载每个页面。对于更动态的处理，您可以对每个页面使用单独的操作。

在任何情况下，请确保以一种有意义的方式将代码构造成控制器和操作。例如，在您的 CMS 中，用户可能会编辑、创建或删除帖子。然后，您可以创建一个`PostController`在其中编写`editAction`,`createAction`和`deleteAction`.

您*可以*将 URL 存储在表中，但不一定非要这样做。

**单一动作方法（主要用于静态内容）**

确保页面`id`或`name`存储在 GET 参数中。然后，您可以使用以下代码：

```
public function genericpageAction()
{
    $thePageID = $this->_request->getParam('id');

    // fetch the page content from the db based on $thePageID
    // and pass it to the view
} 
```

当然，在这里，如果您选择这种方法，您也可以匹配存储在表中的 URL。

**多动作方法（对于更动态的处理，很可能是您想要的 CMS）**

您可以为每个页面定义一个路由并在相应的操作中加载其内容。例如，对于要编辑帖子的页面：

```
class MyCMS_PostController extends Zend_Controller_Action
{
    public function editAction()
    {
        // fetch the home page content
        // do any further processing if necessary
    }
} 
```

# javascript - 带有日期的 24 小时格式的 javascript/jquery 数字时钟脚本

> ID：11930935
> 
> 赞同：-3
> 
> 时间：2012-08-13T08:52:21.063
> 
> 标签：javascript, jquery, asp.net

我正在寻找带有日期的 24 小时格式的 javascript/jquery 数字时钟脚本。时钟应以数字和日期的形式显示图像；时钟还应从具有服务器时间的隐藏字段初始化其时间。我正在使用 asp.net。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:57:00.500

说真的，你做了多少搜索？我只是在谷歌中输入了'jquery digital clock'并得到了很多结果，特别是以下一个：

[http://www.jquery4u.com/plugins/10-cool-jquery-clock-tutorials-analog-digital/#.UCjA_SLYEpo](http://www.jquery4u.com/plugins/10-cool-jquery-clock-tutorials-analog-digital/#.UCjA_SLYEpo)

# java - 由于找不到数据库，Mysql连接失败

> ID：11930941
> 
> 赞同：0
> 
> 时间：2012-08-13T08:52:45.183
> 
> 标签：java, mysql

```
 DB_CONNECTION_URL = "jdbc:mysql://localHost:3306/test_DB"; 
```

`test_DB`当我调试程序时，会发生不存在的异常。查询执行时是否可以创建数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:58:59.570

根据您的问题，您必须在将数据库与 JDBC 连接后创建名为“test_DB”的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:55:45.957

您必须连接到服务器，而不是特定的数据库：

```
DB_CONNECTION_URL = "jdbc:mysql://localHost:3306/"; 
```

然后使用`CREATE SCHEMA`添加数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:57:05.257

我对jdbc不太了解，但是通常您可以在根本不指定数据库的情况下进行连接，然后检查它是否存在，如果存在则执行a `USE test_db`，如果不存在则创建它。

通常你会简单地看到`CREATE DATABASE IF NOT EXISTS test_db`......然后`USE test_db`（即消除显式检查存在的需要）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:13:08.113

在执行查询之前检查数据库是否存在，请执行以下操作

```
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306","root","root");
Statement st = con.createStatement();
        DatabaseMetaData meta = con.getMetaData();
        ResultSet rs = meta.getCatalogs();
        while (rs.next()) {
            String listofDatabases=rs.getString("TABLE_CAT");
            list.add(listofDatabases);
        }
        if(list.contains(database)){
        System.out.println("Database already exists"); 
```

如果不写查询来创建数据库.. 喜欢

```
String database = DATABASENAME; // "nlshriraam";//bf.readLine();
st.executeUpdate("CREATE DATABASE "+database); 
```

然后执行您的查询..

# crc - CRC 部分从何而来？

> ID：11930946
> 
> 赞同：0
> 
> 时间：2012-08-13T08:53:11.937
> 
> 标签：crc

考虑以下考试问题：

> 使用 CRC 多项式生成器 x2 + 1 找出以下接收到的消息是否包含任何错误：10111111。显示与实际 CRC 分开接收的确切用户数据。

提供的答案：

> 生成器二进制：101
> 
> 两个零被附加到消息中。
> 
> 101 / 10111111 => 余数 = 01
> 
> 原始消息= 101111 CRC = 11

我试图弄清楚 11 的 CRC 部分是如何得出的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:51:47.717

它只是说消息`10111111`由内容`101111`和 CRC组成`11`。内容的 CRC 附加到内容以组成消息。如果正确接收到消息，则将整个消息除以 CRC 多项式应得到余数为零。即内容的CRC加上正确的CRC必然为零。

由于余数是 01，所以消息一定是错误的。

# objective-c - iOS：如何使用 imagePicker 使图像更亮？

> ID：11930949
> 
> 赞同：0
> 
> 时间：2012-08-13T08:53:24.780
> 
> 标签：objective-c, ios, ipad

我正在制作一个从 iPad 拍照的应用程序。我们希望能够调整对比度和亮度，因为拍摄的图像看起来有点暗。我们考虑过叠加，但看起来它不能使图像更亮而是更暗。关于如何制作的任何建议？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:02:28.253

你可以使用 UIImage 提供的类别 UIImage+Brightness.h 调整 类别添加到 uiimage 一个非常简单的方法[e](https://github.com/coryleach/UIImageAdjust)

```
`- (UIImage*) imageWithBrightness:(CGFloat)brightnessFactor;`
```

# verilog - Verilog中的可变移位寄存器

> ID：11930963
> 
> 赞同：0
> 
> 时间：2012-08-13T08:54:16.430
> 
> 标签：verilog

我想设计一个可变移位寄存器向右移位，如下所示：

```
module sr(N,int,out);

  input [2:0] N;
  input [7:0] in;
  output [7:0] out;

  assign out={N'b0,input[7,N]}

endmodule 
```

但是，不幸的是verilog不允许这种写作。N 应该是常数。关于如何从输入中获得移位迭代的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T18:14:50.580

Verilog 有一个右移运算符，因此您可以简单地编写：

```
assign out = in >> N; 
```

额外的位会自动用零填充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:50:48.747

如果 和 的大小`in`真的`out`固定在 8 位，这里是一种简单的方法：

```
module sr(N, in, out);

  input  [2:0] N;
  input  [7:0] in;
  output [7:0] out;

  assign out = (N == 7) ? {7'b0, in[7:7]} : 
               (N == 6) ? {6'b0, in[7:6]} : 
               (N == 5) ? {5'b0, in[7:5]} : 
               (N == 4) ? {4'b0, in[7:4]} : 
               (N == 3) ? {3'b0, in[7:3]} : 
               (N == 2) ? {2'b0, in[7:2]} : 
               (N == 1) ? {1'b0, in[7:1]} : 
                                 in[7:0];

endmodule 
```

这也可以使用`always`块内的 case 语句进行编码，如下所示：

```
 reg [7:0] out_reg;
  assign out = out_reg;

  always @(N or in) begin
    case (N)
      7 : out_reg <= {7'b0, in[7:7]};
      6 : out_reg <= {6'b0, in[7:6]};
      5 : out_reg <= {5'b0, in[7:5]};
      4 : out_reg <= {4'b0, in[7:4]};
      3 : out_reg <= {3'b0, in[7:3]};
      2 : out_reg <= {2'b0, in[7:2]};
      1 : out_reg <= {1'b0, in[7:1]};
      0 : out_reg <=        in[7:0];
    endcase
  end 
```

如果您不想写出所有值，则可以使用`for`循环。我不是合成工具如何处理这个问题的专家，但是这个（或类似的东西）应该可以合成。

```
 always @(N or in) begin
    for (i = 0; i < 8; i = i + 1) begin
      if (i+N < 8) begin
        out_reg[i] <= in[i+N];
      end else begin
        out_reg[i] <= 1'b0;
      end
    end
  end 
```

使用循环对其进行编码的一个优点是它不太容易出现剪切粘贴拼写错误。

更重要的是，如果您想让模块支持输入和输出的通用位宽，您可以使用`parameter`模块上的 a 和用于分配的类似循环来实现。

# matlab - 如何选择具有已知概率分布的点 K？

> ID：11930966
> 
> 赞同：0
> 
> 时间：2012-08-13T08:54:41.387
> 
> 标签：matlab, probability

点K必须从可能的点中选出，K是一个已知概率分布的随机变量。由于此分布，我想选择其中一个点...我该怎么做？

例如：点数：3 5 6 8 概率：0.2 0.4 0.1 0.3

由于概率，我想选择其中一个点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:02:53.823

使用`rand`在范围内生成一个随机数`[0.0, 1.0)`。如果它在`[0.0,0.2)`select`3`中，如果随机数在`[0.2,0.6)`select`5`中，*等等等等*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:16:01.653

我不会为您提供确切的函数，但是，使用下面提供的代码应该非常容易将其包装到函数中。

该解决方案基于 Marks 原始评论，但用于`cumsum()`使实现更容易一些。

```
%# Set up point labels and probabilities (input parameters to function)
labels = [3 5 6 8];
probabilities = [0.2 0.4 0.1 0.3];

%#Find cumulative distribution
cp = [0 cumsum(probabilities)];

%#Draw point at random according to probability density
draw = rand();
higher = find(cp >= draw==1,1);
drawnPoint = labels(higher-1); %# Output result from function 
```

# c++ - 如果另一个类的构造函数需要参数，我如何添加一个类成员？

> ID：11930970
> 
> 赞同：2
> 
> 时间：2012-08-13T08:54:55.273
> 
> 标签：c++

我在 C++ 中编写的代码不多，所以如果这是微不足道的，请原谅我。

我的“Foo”类看起来有点像这样：

```
class Foo {
    public: Foo(int n) { }
}; 
```

另一个类“Bar”现在应该有一个类型为“Foo”的类成员。

```
class Bar {
    private: Foo f;
}; 
```

这显然失败了，因为“Foo”没有不需要任何参数的构造函数。但是，类似的东西也`Foo f(1);`失败了。

有没有办法解决这个问题？还是我应该在这里使用指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T08:57:40.953

```
class Bar {
public:
    Bar():f(0) { }
    explicit Bar(int n):f(n) { }
    private: Foo f;
}; 
```

写你自己的`c-tors`，使用`initializer-list`，或者`c-tor`不带参数的写`Foo`，或者使用`pointer`，或者`C++11`你可以写

```
class Bar {
public:
    private: Foo f = Foo(1);
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T09:00:25.287

这可以通过两种不同的方式来处理。

**(1) 为`class Foo`**

您可以引入无参数构造函数`Foo()`或编辑当前接受默认参数的构造函数，即`Foo(int n = 0)`

**(2)使用适当的参数调用`class Foo`内部的构造函数`Bar`**

例如

```
class Bar {
...
  Bar() : f(0) {}  // (a) pass the argument explicitly 
  Bar(int n) : f(n) {} // (b) receive argument inside Bar()
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:57:17.257

您可能有一个 Foo 的默认构造函数，或者在类 Bar 中使用 Foo 的指针并稍后设置一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:23:28.550

我想如果您的 Foo 需要一个参数来构造，有两种可能性：
-您的 Bar 将使用**静态数字**来构造他自己的 Foo（所有 Bar 在 Foo 中都将具有相同的 n） -您的 Bar 将在其中
具有**不同的数字**会员福。然后，您可以将一个数字传递给 Bar 构造函数，如下所示：

```
class Bar {
    Bar(int n) : Foo(n) { ... } ;
    } 
```

# php - 适用于 PHP 和 Node.js 的云计算服务

> ID：11930975
> 
> 赞同：5
> 
> 时间：2012-08-13T08:55:13.417
> 
> 标签：php, node.js, cloud, saas, paas

我正在使用`PagodaBox`扩展`PHP`通过`git`.
在这个应用程序中，我还想包括`Node.js`.
对我来说，PagodaBox 似乎无法集成 Node.js。你能推荐我另一个`IaaS`或服务吗`PaaS`？`SaaS`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:23:04.323

dotCloud 和 OpenShift（由 Red Hat 提供）支持 Node.js 和 PHP。不确定您是否可以将它们组合成一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:26:57.470

Windows Azure 支持 node.js 和 PHP，以及 git 部署：

[Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)

[节点开发中心](https://www.windowsazure.com/en-us/develop/nodejs/)

[PHP 开发者中心](https://www.windowsazure.com/en-us/develop/php/)

# java - Spring Security 有条件的 default-target-url

> ID：11930980
> 
> 赞同：13
> 
> 时间：2012-08-13T08:55:38.863
> 
> 标签：java, spring, spring-security

我注意到有几个关于这个主题的问题。我查看了它们，但无法将它们应用于我的特定 Spring 设置。我想根据用户的角色将我的登录重定向配置为有条件的。这是我到目前为止所拥有的：

```
<http auto-config="true" use-expressions="true">
        <custom-filter ref="filterSecurityInterceptor" before="FILTER_SECURITY_INTERCEPTOR"/>
        <access-denied-handler ref="accessDeniedHandler"/>
        <form-login
            login-page="/login"
            default-target-url="/admin/index"
            authentication-failure-url="/index?error=true"
            />
        <logout logout-success-url="/index" invalidate-session="true"/>
</http> 
```

我认为[这个问题](https://stackoverflow.com/questions/3139718/spring-security-changing-spring-security-login-form)可能与我正在尝试做的事情相同。任何人都知道我可以如何应用它吗？

**编辑 1**

```
<bean id="authenticationProcessingFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationSuccessHandler" ref="authenticationSuccessHandler"/>
</bean>
<bean id="authenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
    <property name="defaultTargetUrl" value="/login.jsp"/>
</bean> 
```

**编辑 2**

目前我没有像[这个例子](https://stackoverflow.com/questions/7470405/authenticationsuccesshandler-example-for-spring-security-3/7470476#7470476)`public class Test implements AuthenticationSuccessHandler {}`中所示的类。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-13T12:54:54.550

我已经测试了代码并且它有效，其中没有火箭科学

```
public class MySuccessHandler implements AuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws IOException, ServletException {
        Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
        if (roles.contains("ROLE_ADMIN")){
            response.sendRedirect("/Admin.html");   
            return;
        }
        response.sendRedirect("/User.html");
    }    
} 
```

安全上下文的变化：

```
<bean id="mySuccessHandler" class="my.domain.MySuccessHandler">
    </bean>

<security:form-login ... authentication-success-handler-ref="mySuccessHandler"/> 
```

**如果您想使用方法**更新**`default-target-url`，它同样可以正常工作，但会在您的用户第一次访问登录页面时触发：**

 **`<security:form-login default-target-url="/welcome.htm" />`

```
@Controller
public class WelcomeController {
    @RequestMapping(value = "/welcome.htm")
    protected View welcome() {

        Set<String> roles = AuthorityUtils
                .authorityListToSet(SecurityContextHolder.getContext()
                        .getAuthentication().getAuthorities());
        if (roles.contains("ROLE_ADMIN")) {
            return new RedirectView("Admin.htm");
        }
        return new RedirectView("User.htm");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-04T21:11:54.487

IMO 更合适的方法是创建一个扩展类`SimpleUrlAuthenticationSuccessHandler`，然后覆盖其`determineTargetUrl`方法。从[文档](https://docs.spring.io/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationTargetUrlRequestHandler.html#determineTargetUrl(javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse))：

> 根据主类 Javadoc 中定义的逻辑构建目标 URL。

...这听起来有点令人困惑，但基本上您编写确定目标 URL 所需的任何逻辑，然后将其作为字符串返回。**

# python-sockets - 来自 GPS 跟踪器的 TCP 消息

> ID：11930981
> 
> 赞同：0
> 
> 时间：2012-08-13T08:55:40.440
> 
> 标签：python-sockets

我正在编写一个简单的 python 脚本来捕获来自 gps 跟踪器的消息并将消息写入服务器的数据库。

```
# -*- coding: utf-8 -*-
import socket, string
import MySQLdb

def write_message(x):
    db = MySQLdb.connect(host="localhost", user="root", passwd="****", db="****", charset='utf8')
    cursor = db.cursor()
    sql = '''INSERT INTO test(test_c) VALUES ('%(test_c)s') '''%{"test_c":x}
    cursor.execute(sql)
    db.commit()
    db.close()
    return x  

HOST = ""
PORT = 50007

srv = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
srv.bind((HOST, PORT))
while 1:
    print u"Listen to " + str(PORT)
    srv.listen(1)             
    sock, addr = srv.accept()
    while 1:
        pal = sock.recv(2048)
        if not pal: 
            break
        print u"Recieved %s:%s:" % addr, pal
        lap = write_message(pal)
    sock.close() 
```

为了测试脚本，我使用我的家用电脑和脚本

```
# -*- coding: utf-8 -*-
import socket

HOST = '****'   
PORT = 50007            
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
mes = u'a'
s.sendall(mes)
s.close() 
```

一切正常，服务器将消息写入数据库。使用 utf-8，它们充满了 unicode 字符，没关系。但是当我使用 gps 跟踪器时，我会收到一些奇怪的消息，例如 "xxSA░7d└╣" ('xx\x11\x01\x03SA\x907d\x84 \x10\x0b2\x01\x00\x01\\xa7\r\n' ) 但文档说消息仅包含 ascii 符号。我发现有“socket.SOCK_RAW”选项并尝试使用它，但得到“socket.error: [Errno 93] Protocol not supported”。

你知道解决办法是什么吗？

该设备是GT03b。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:41:22.283

GT03B 的服务器命令是 ASCII，但其余部分（协议号、校验和等）只是一个字节流。例如，您的“奇怪消息”似乎是一个普通的 LBS 信息包。

有关详细信息，请参阅 GT03B 协议。

# sql - 单个查询以基于初始列将多行作为列返回

> ID：11930983
> 
> 赞同：0
> 
> 时间：2012-08-13T08:55:45.987
> 
> 标签：sql, sql-server, c#-4.0

我有一张桌子，员工历史记录如下

```
ID | Current_Dept | Dept_Start_Date | Name
1 | Sales | 2012-01-01 | John Smith
1 | Marketing | 2010-01-01 | John Smith
1 | Intern | 2008-01-01 | John Smith
2 | IT | 2012-01-01 | Sue Jones
2 | Sales | 2011-01-01 | Sue Jones
2 | eBusiness | 2010-10-01 | Sue Jones
3 | Warehouse | 2012-01-01 | Bobby Ray
3 | Sales | 2009-01-01 | Bobby Ray 
```

我想要的是一个查询给曾经在销售部门工作过的每个人：

```
ID | DeptBefore | DeptAfter | CurrentDept
1  | Marketing  |           | Sales
2  | ebusiness  | IT        | IT
3  |            | Warehouse | Warehouse 
```

目前，除了递归查询每一行的表之外，我没有看到更简单的方法。

我很想创建一个每天填充一次的“临时”表并从中运行查询。

我正在使用 SQL Server 和 C# (ASP.NET) 以防它们提供其他更简单的解决方案。

我希望一切都说得通。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:15:48.727

使用 CTE 可以帮助您。

```
DECLARE @Temp TABLE
(
    ID INT,
    current_dept NVARCHAR(100),
    Dept_Start_Date DATETIME,
    Name NVARCHAR(100)
)

INSERT INTO @Temp
(ID, current_dept, Dept_Start_Date, Name)
VALUES
(1, 'Sales', '2012-01-01', 'John Smith'), 
(1, 'Marketing', '2010-01-01', 'John Smith'), 
(1, 'Intern', '2008-01-01', 'John Smith'),
(2, 'IT', '2012-01-01', 'Sue Jones'), 
(2, 'Sales', '2011-01-01', 'Sue Jones'), 
(2, 'eBusiness', '2010-01-01', 'Sue Jones'),
(3, 'Warehouse', '2012-01-01', 'Bobby Ray'),
(3, 'Sales', '2009-01-01', 'Bobby Ray')

DECLARE @current_dept NVARCHAR(100) = 'Sales'
;WITH CurrentDeptCTE AS 
(
    SELECT ID, current_dept, Dept_Start_Date, Name, ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Dept_Start_Date DESC) AS SEQUENCE
    FROM @Temp
)
SELECT SalesDept.ID, DeptBefore.current_dept AS 'DeptBefore', DeptAfter.current_dept     AS 'DeptAfter', CurrentDept.current_dept AS 'CurrentDept'
FROM
(
    SELECT ID, SEQUENCE
    FROM CurrentDeptCTE
    WHERE current_dept = @current_dept
) SalesDept
LEFT JOIN CurrentDeptCTE AS DeptBefore ON SalesDept.ID = DeptBefore.ID AND            SalesDept.SEQUENCE = DeptBefore.SEQUENCE - 1
LEFT JOIN CurrentDeptCTE AS DeptAfter ON SalesDept.ID = DeptAfter.ID AND SalesDept.SEQUENCE = DeptAfter.SEQUENCE + 1
LEFT JOIN 
(
    SELECT ID, current_dept
    FROM CurrentDeptCTE 
    WHERE SEQUENCE = 1
) CurrentDept ON SalesDept.ID = CurrentDept.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:04:34.730

从您的数据*看来*，您需要`immediately`销售部门之前和之后的部门。例如; 你没有表明约翰史密斯是从实习生开始的。

*注意：如果有人在两个不同的场合从事销售工作，您可能需要考虑您想要的结果。*

```
WITH
  sequenced AS
(
  SELECT
    *,
    ROW_NUMBER() OVER (PARTITION BY id ORDER BY dept_start_date DESC) AS sequence_id
  FROM
    yourTable
)
SELECT
  salesRecord.id,
  prevRecord.current_dept     AS DeptBefore,
  nextRecord.current_dept     AS DeptAfter,
  lastRecord.current_dept     AS DeptCurrent
FROM
  sequenced     AS salesRecord
LEFT JOIN
  sequenced     AS prevRecord
    ON  prevRecord.id          = salesRecord.id
    AND prevRecord.sequence_id = salesRecord.sequence_id - 1
LEFT JOIN
  sequenced     AS nextRecord
    ON  nextRecord.id          = salesRecord.id
    AND nextRecord.sequence_id = salesRecord.sequence_id + 1
LEFT JOIN
  sequenced     AS lastRecord
    ON  lastRecord.id          = salesRecord.id
    AND lastRecord.sequence_id = 1
WHERE
  salesRecord.CurrentDept = 'Sales' 
```

通过以降序对项目进行排序，*当前*记录始终为`sequence_id = 1`。

# java - 使用 String[] 调用 String... 函数

> ID：11930985
> 
> 赞同：0
> 
> 时间：2012-08-13T08:55:51.407
> 
> 标签：java, string

如何使用给定数组 ( ) 调用接受未知数量`String`输入 (例如) 的函数？`void func(String... strs)``String``String[]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T08:57:41.900

Varargs 参数实际上是数组。鉴于此方法：

```
void func(String... strs); 
```

调用很简单（以下同）：

```
func("a", "b", "c");
func(new String[] { "a", "b", "c" }); 
```

然后方法实现可以做一些事情，例如：

```
void func(String... strs) {
  System.out.println("Array length:  " + strs.length);
  System.out.println("Array content: " + strs[0]);
} 
```

了解 varargs 参数只是为了方便调用站点的语法糖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T08:57:20.470

String varargs，是一个字符串数组。您只需调用它并传递字符串数组。

# android - android外部存储问题

> ID：11930987
> 
> 赞同：1
> 
> 时间：2012-08-13T08:55:55.787
> 
> 标签：android

我现在将发布我创建的应用程序。但我有一个问题。当我使用 anDroid.permission.write_external_storage 时，您会看到它不起作用。我的应用程序仍然自动安装在手机内存上而不是 sd 卡上.. 有没有办法自动安装在 sdcrad 上？如果可能怎么办？导致我使用的权限不起作用。我的安卓版本是2.3。

这是我的清单..

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_TASKS"/>
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<supports-screens
    android:resizeable="true"
    android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true"
    android:xlargeScreens="true"        
 /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:58:54.430

WRITE_EXTERNAL_STORAGE 权限与您的应用程序的安装位置无关。

在这里阅读：

[http://developer.android.com/guide/topics/data/install-location.html](http://developer.android.com/guide/topics/data/install-location.html)

# macos - docbook 可以生成 Apple 帮助手册格式的输出吗

> ID：11930989
> 
> 赞同：2
> 
> 时间：2012-08-13T08:56:03.667
> 
> 标签：macos, docbook, apple-help

可以以 Apple 帮助手册格式输出 docbook，我知道我可以生成 html、pdf 等，但 Apple 帮助手册格式（这是 OSX 帮助的标准格式）呢？

**编辑**：似乎没有，但万一对任何人有用，这就是我的工作方式。

*   从另一个应用程序复制 HelpBook 以提供结构，并根据我的应用程序重命名部分。
*   写了我的 docbook.xml
*   设置选项以抑制页眉和页脚
*   从 docbook 生成的 xhtml 块
*   复制 xhtml 页面以帮助预订 pgs 文件夹
*   根据需要进行任何手动编辑
*   手动创建 Apple Help Book 索引页面，创建指向我的分块 xml 页面的超链接
*   运行 Apple Help Indexer 以生成帮助索引
*   修改我的应用程序 plist 以参考帮助手册

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T14:55:00.123

我不相信它可以。

我知道的唯一一个专门针对 Apple 帮助手册格式的应用程序是这个：[http ://www.putercraft.com](http://www.putercraft.com)

# extjs - 如何解决 ExtJS “同步加载”警告

> ID：11930992
> 
> 赞同：6
> 
> 时间：2012-08-13T08:56:14.397
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

[当使用带有异步加载](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader)的 ExtJS 4+ 时，人们会熟悉这种警告：

```
[Ext.Loader] Synchronously loading 'MY.particular.module';
consider adding Ext.require('MY.particular.module') above Ext.onReady 
```

如何识别导致此警告的 JavaScript 模块（控制器、组件等）？[`requires`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader-method-require)即在列表中同步加载包含模块的地方。

*纠正*这些警告的*正确*方法是什么？是否存在*自动*执行此操作的方法？

 **PS 现在唯一的方法是设置一个引发警告的调试点，并追溯到导致生成警告的文件中的哪一行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:28:23.273

在 chrome 中，在您的堆栈跟踪中，（我认为 Firefox 现在也可以进行堆栈跟踪？）在模块中调用的文件通常（总是？）第一个不是 ext-all 的文件。

`Ext.require`是用来自动化的东西（例如js-minification），所以你不能真正自动化它本身。

当你声明一个组件（ using`Ext.define`或`Ext.create`）时，你应该指定 Ext 将用于组件的模块`Ext.require`（好吧，如果你想至少摆脱这个警告）

您使用的每个**自定义**组件都应该或多或少遵循相同的想法：

```
Ext.define('My.app.Panel', {
    extend: 'Ext.panel.Panel', // 
    requires: [
        'My.app.PanelPart2', //Hey! warning is gone!
        'My.app.PanelPart3'
    ]

    constructor: function (config) {
        this.callParent(arguments); 
        //...
    },

    statics: {
        method: function () {
            return 'abc';
        }
    }
}); 
```

而且，如果您不关心性能，而只想摆脱杂散警告（从技术上讲是精神错乱，您可以在加载程序配置中清除错误消息。

```
Ext.loader.setConfig({
  enabled: true,
  paths: {
      'My': 'my_own_path'
  },
  onError:function(){}//or custom handler? :D 
```

请参阅 mitchsimeons 的答案：[http ://www.sencha.com/forum/showthread.php?178888-Tons-of-Synchronously-Loading-Warning-Messages](http://www.sencha.com/forum/showthread.php?178888-Tons-of-Synchronously-Loading-Warning-Messages)

以及为什么需要的博客文章： [http ://www.sencha.com/blog/using-ext-loader-for-your-application](http://www.sencha.com/blog/using-ext-loader-for-your-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:15:56.947

作为良好的编程习惯，您应该在**每个**`requires`模块中包含一个配置选项。你为什么不这样做？

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T09:13:47.317

我有同样的问题，但今天解决了。问题是返回堆栈跟踪并没有帮助，因为代码中没有断点，而且我不知道在哪里放置断点。

因此，我在浏览器抱怨的 ext-all-rtl-debug.js 文件的行中添加了对调试器的调用（“debugger;”）。所以我有堆栈跟踪，发现问题发生在哪里。之后，我删除了调试器语句，一切正常。

我的代码的问题是有一家商店需要一个特殊的课程。我已经向商店添加了一个“需要”属性，但它没有帮助。我不得不在 application.js 文件中添加一个“requires”属性。这解决了问题。****

# javascript - 创建一个 Json Cookie 数组？

> ID：11930994
> 
> 赞同：2
> 
> 时间：2012-08-13T08:56:35.443
> 
> 标签：javascript, jquery, json

我正在尝试使用 jquery 的 json 创建一个 cookie 数组。这是迄今为止工作的脚本，除了数组部分。有人可以告诉我如何做这样的数组......

```
 <script type="text/javascript">

       //The database value will go here...
       var cookievalue= {'tid1':'ticvalue1','thid1':'thidvalue1','tid2':'ticvalue2','thid2':'thidvalue2'};

       //Create a cookie and have it expire in 1 day.
       $.cookie('cookietest', cookievalue, { expires: 1 });

       //Write the value of the cookie...
       document.write($.cookie('cookietest'));

    </script> 
```

我遇到的问题是当我将数组传递给它存储的 cookie`[object object]`而不是数组值时。因此，如果我遍历数据，那么我将使用多个 cookie 而不是一个 cookie，其中的数组值存储在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:55:47.680

> 我遇到的问题是，当我将数组传递给 cookie 时，它​​存储的是 [object object] 而不是数组值。因此，如果我遍历数据，那么我将使用多个 cookie 而不是一个存储数组值的 cookie。

现在你说白了！所以我们可以在没有成千上万条评论的情况下为您提供帮助；）

* * *

```
 <!DOCTYPE html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../js/jquery-1.7.2.js" type="text/javascript"></script>
    <script src="https://raw.github.com/douglascrockford/JSON-js/master/json2.js" type="text/javascript"></script>
    <script src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js" type="text/javascript"></script>
    </head>
    <body>
        <script>
            $(function() {
                var cookieValueString = JSON.stringify( 
                    [
                        {
                            'column1':'row1col1',
                            'column2':'row1col2'
                        },
                        {
                            'column1':'row2col1',
                            'colum2':'row2col2'
                        }
                    ] 
                );
                $.cookie('cookietest', cookieValueString, { expires: 1 });

                var arrayFromCookie = JSON.parse($.cookie('cookietest'));
                for(var i = 0; i < arrayFromCookie.length; i++) {
                    alert("Row #" + i
                           + "- Column #1: " + arrayFromCookie[i].column1
                           + " - Column #2: " + arrayFromCookie[i].column2);
                }
            });
        </script>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:00:26.613

您正在创建一个具有这些属性的对象。而且您使用的是单引号而不是双引号（据我所知，您必须在 json 中指定一个带双引号的字符串）。

试试看：

```
 var cookievalue= [{"tid1":"ticvalue1"},{"thid1":"thidvalue1"},{"tid2":"ticvalue2"},{"thid2":"thidvalue2"}]; 
```

所以解析后你会得到以下信息：结构

```
cookievalue[0].tid1 == "ticvalue1"<br/>
cookievalue[1].thid1 == "thidvalue1"<br/>
cookievalue[2].tid2 == "ticvalue2"<br/>
cookievalue[3].thid2 == "thidvalue2"<br/> 
```

# database - PGError：错误：关系的权限被拒绝（使用 Heroku 时）

> ID：11930996
> 
> 赞同：78
> 
> 时间：2012-08-13T08:56:45.630
> 
> 标签：database, postgresql, heroku, permissions

我最近完成了此处概述的数据库迁移过程：

[https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres)

现在我在日志中看到许多错误，如下所示：

PGError：错误：关系的权限被拒绝

关于我应该做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-08-13T14:04:11.207

我遇到了类似的问题，但根本原因是我的应用程序指向旧的开发数据库，​​该数据库已超过 10,000 行的限制。

尽管我创建了一个新的基本数据库并备份了所有内容，但该应用程序仍然指向旧的开发数据库。

```
heroku pg:info 
```

检查以查看行：10300/10000（那么您有问题）

您将需要

1）创建具有更多行的新数据库（基本或“生产”行 -> Heroku 似乎正在强制升级以赚取更多钱 errrrrr）

2）使用 pgbackups 备份旧数据库：`heroku pg:backups:capture SMALL_DB_NAME`

3）将备份恢复到新数据库：（`heroku pg:backups:restore BACKUP_ID BIG_DB_NAME`有关更多详细信息，请参见下面的链接）

4）将新数据库推广到应用程序的主数据库：`heroku pg:promote BIG_DB_NAME`

总是可以利用：

> > `heroku maintenance:on` （更新时禁用应用程序）

> > `heroku maintenance:off`

> > `heroku pg:info`（检查状态）

如果这是您可能需要检查的问题： [https ://devcenter.heroku.com/articles/heroku-postgres-starter-tier](https://devcenter.heroku.com/articles/heroku-postgres-starter-tier) [https://devcenter.heroku.com/articles/migrating-from-shared-database -to-heroku-postgres](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T11:39:15.057

更新：Ashton 的回答在这种情况下非常准确，这是 Heroku 特有的。如果您在搜索 PostgreSQL 错误消息或问题时发现了这一点，但*没有*使用 Heroku，请寻找更可能适用于您的情况的其他问题。

* * *

猜测一下，您连接的 PostgreSQL 用户 ID 不是您的表的所有者，并且您没有发出任何明确`GRANT`的语句来授予它访问它们的权限。如果没有看到迁移时运行的*确切*内容，很难说更多 - 而且 Heroku 隐藏了许多内部结构。

让我们弄清楚目前的情况。尝试连接`psql`并运行：

```
\dp the_problem_table 
```

并显示报告的权限。还显示以下结果：

```
SHOW current_user; 
```

`psql`从应用程序内部作为 SQL 查询运行以及何时运行。

编辑您的问题以添加该信息以及*您收到的错误消息的完整、准确的文本*。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-30T11:10:28.803

基于 Ashton 的回答从 Dev（10k 行限制）升级到 Basic（10M 行限制）的步骤

检查数据库行超出限制

```
heroku pg:info 
```

禁用应用程序和工作人员以确保在数据库升级期间没有数据库更改

```
heroku maintenance:on
heroku ps:scale worker=0 
```

如果你没有 pgbackups

```
heroku addons:add pgbackups 
```

备份数据库并获取备份ID

```
heroku pg:backups:capture 
```

使用 Web 界面添加数据库

1.  登录[https://addons.heroku.com](https://addons.heroku.com)
2.  搜索“Heroku Postgres”
3.  选择计划和申请
4.  添加它

查看 heroku 配置，您应该会看到新的数据库 URL

```
heroku config --remote heroku 
```

将备份恢复到新数据库

```
heroku pg:backups:restore BACKUP_ID NEW_DB_URL 
```

更改 DATABASE_URL

```
heroku pg:promote NEW_DB_URL 
```

启用应用程序和工作人员

```
heroku maintenance:off
heroku ps:scale worker=1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-05T03:52:03.517

删除多余的行后，您不会立即恢复插入权限。在这种情况下，删除多余的行，然后运行`heroku pg:info`。这将刷新您的数据库的权限，您将在几分钟内恢复访问权限。不需要将现有数据库克隆到新数据库并将新数据库设置为应用程序的数据库。

```
$ heroku pg:info

=== HEROKU_POSTGRESQL_BRONZE_URL, DATABASE_URL
Plan:        Hobby-dev
Status:      Available
Connections: 3/20
PG Version:  9.3.6
Created:     2014-03-01 13:47 UTC
Data Size:   1.25 GB
Tables:      4
Rows:        2098/10000 (Write access revoked) - refreshing
Fork/Follow: Unsupported
Rollback:    Unsupported
Add-on:      grinning-busily-5587 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T21:35:34.793

我处于超出行数限制的情况。

这个答案解释了如何列出每个表中的行数： [http ://stackoverflow.com/questions/12701711/heroku-row-count-incorrect](http://www.stackoverflow.com/questions/12701711/heroku-row-count-incorrect)

很有价值知道。

您可以通过终端进入 psql 控制台，连接设置列在您的应用程序的 heroku 仪表板上！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-20T16:24:40.637

我在我的 Redmine 应用程序中遇到了类似的问题：

```
PG::InsufficientPrivilege: ERROR:  permission denied for relation settings
: SELECT  "settings".* FROM "settings"  WHERE "settings"."name" = 'plugin_redmine_wktime' LIMIT 1 
```

我的步骤是：

1.  我对旧的 Redmine 应用程序和数据库进行了备份。
2.  我部署了一个新版本的 Redmine - 它运行良好
3.  我将旧的 Redmine 恢复为开发服务器，当我尝试访问主网页时出现错误。

我的问题的原因只是旧 Redmine 的 config/database.yml 中的用户名错误